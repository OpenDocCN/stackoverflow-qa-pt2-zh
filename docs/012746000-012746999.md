# StackOverflow 问答 12746000-12746999

# c++ - 带有类型的 C++ 接口类

> ID：12746000
> 
> 赞同：0
> 
> 时间：2012-10-05T12:11:31.440
> 
> 标签：c++, templates, interface, g++

我有几个这样的数据容器类型，但它们的内容不同：

```
struct containerRequest
{
   uint8_t data1
   uint8_t data2
};

struct containerResponse
{
    uint8_t data1;
    uint8_t data2;
};

union myType
{
   containerRequest Request;
   containerResponse Response;
}; 
```

现在我想创建一个抽象接口以确保所有这些接口都具有这样的 MyDatatype

```
class IMyInterface
{
   public: 
      union myType
      {
          X Request;
          Y Response;
      };

      bool IsMyType(myType& data) = 0;
      void DoThings(myType& data) = 0;
}; 
```

我想过使用模板，但这会破坏我的其余代码：

```
template <typename X, typename Y>
class IMyInterface
{
    ...
} 
```

但这破坏了我的其余代码。

因为我收集了不同的容器：

```
void addContainer(IMyInterface& data)
{
     collection.push_back(&data);
} 
```

当我在界面中使用模板时，g++ 会强制我指定模板的类型。

如何在我的派生类中定义 X 和 Y 而无需在我的集合中指定类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:24:54.563

如果您不需要任何方法，我会继续使用结构，如果您这样做，我会使用这样的方法：

```
enum PacketType {Request,Response};

// General interface defining which methods must they both provide
class Packet {
    virtual PacketType GetType() = 0;

    ...
}

// As many Packet subtypes as you need
class Response : Packet {
    virtual PacketType GetType(){
        return Response;
    }
}

class Request : Packet {
    virtual PacketType GetType(){
        return Request;
    }
}

// And use it in (e.g.) vector:
std::vector<Packet *> collection;
collection.push( new Request());
collection.push( new Response()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:03:27.163

听起来您需要（运行时）多态性，即想要在`IMyInterface`不知道其精确类型的情况下处理 an 的代码。单独的模板不会让你到达那里，因为它们只提供编译时多态性。提供您想要的 C++ 部分是 RTTI（运行时类型信息）和虚函数。C++ 极其强大的特性之一是您可以*将这*两种方法结合起来。在您的情况下，这意味着`IMyInterface`变成模板，但让该模板继承自定义您需要的虚函数的非模板基类。这是一个例子。

```
// Base class for interface types. Make sure it's a polymorphic type by adding a least one
// virtual member. Since polymorphich types should have virtual destructory anyway, adding
// a virtual no-op destructor is the natural choice.
struct IMyInterfaceDataType {
  virtual ~IMyInterfaceDataType() {};
};

// Base class for interface implementations.
struct IMyInterface {
  virtual bool IsMyType(const IMyInterfaceDataType& data);
  virtual void DoThings(IMyInterfaceDataType& data);
}

template<typename RequestType, typename ResponseType>
struct IMyInterfaceImplementation : MyInterface {
  struct MyType : IMyInterfaceDataType {
    union { RequestType Request; ResponseType Response } data;

    // You'll probably want to add some constructors here
  };

  virtual bool IsMyType(const IMyInterfaceDataType& data) {
    // Cast as pointer, not reference, to get NULL instead of an exception if cast fails
    return dynamic_cast<const MyType*>(&data) != NULL;
  }
};

struct SomeRequestType { ... };
struct SomeResponseType { ... };
struct SomeInterface : IMyInterfaceImplementation<SomeRequestType, SomeResponseType> {
  virtual void DoThings(IMyInterfaceDataType& data_raw) {
    // Throws std::bad_cast if data_raw isn't actually a DataType instance
    DataType& data = dynamic_cast<DataType&>(data_row);
    ... Do whatever you want to do with data ...
  } 
};

// This should now work, but you need to store pointers (or references, but
// putting references into a std::vector doesn't work), since polymorphism only
// works as expected with references or pointers.
std::vector<IMyInterface*> interfaces;
void addCollection(IMyInterface* iface) {
  interfaces.push_back(iface);
}

// This would then process an arbitrary data type with the first matching interface
void process(IMyInterfaceDataType& data) {
  for(std::vector<IMyInterface>::iterator i = interfaces.begin(); i != interfaces.end(); ++i) {
    IMyInterface& iface = **i;
    if (iface.IsMyType(data) {
      iface.DoThings(data);
      break;
    }
  }
} 
```

在实际代码中，您当然*不*应该在向量中存储原始点`interfaces`，而是使用某种智能指针。`boost::shared_ptr`（或者`std::shared_ptr`如果您使用的是 C++11）将是一个不错的选择。您可能还想看看`boost::any`，它以安全的方式包装了任意类型的对象（即，在某种程度上，它`void*`是正确的）。

顺便说一句，您的使用`union`有点可疑。方法如何`DoThings`知道数据是包含请求还是响应？您可能要考虑使用`boost::variant`而不是 C 风格的联合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:22:38.810

你不能，STL 集合需要知道插入元素的大小，并且需要完整的类型规范来确定它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T12:59:37.670

有几个选项可以解决这个问题：

1.  由于您要存储其地址，因此将其参数设为 void *：

    `void addContainer(void * data) { collection.push_back(data); }`

2.  使`IMyInterface`继承没有模板的接口。

3.  如果你有几个你想考虑的组合并且没有共同点，你可以重载它。

# java - 2个不同数组中的共同元素

> ID：12746001
> 
> 赞同：1
> 
> 时间：2012-10-05T12:11:39.583
> 
> 标签：java

我正在制作一个基本的编码算法，它接受输入，对其进行编码（使用随机数），然后解密。数组用“char”类型填充。它单独加密每个字母。我如何检查它在编码字母时是否没有将相同的字母编码为其他字母。

例子

编码

美国广播公司

a 被赋予随机数 2 b 被赋予随机数 5 我如何防止 c 被赋予 2 或 5

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:30:09.733

Baz 的答案会起作用，但会很慢（相对而言，因为您需要为每个生成的数字搜索集合，但您可能不在乎）。

Christoffer Hammarström（生成 N 个连续数字并随机播放）的答案有效，但缺乏随机性，因为这是用于加密的。

这是一种获取唯一（几乎）随机数数组的算法。

1.  确定您需要能够编码多少个不同的字符 (caracterSetCount)
2.  `caracterSetCount`分配一个大小为 int 的数组
3.  生成随机数以供以后使用：

静态最终 int RANDOM_RANGE = 3000;

```
randomKeys = new long[caracterSetCount];
randomKeys[0] = rand.nextInt(RANDOM_RANGE); // A number between 0 and RANDOM_RANGE 
for (int i=1; i<caracterSetCount; ++i) {
  randomKeys[i] = randomKeys[i-1] + 1 + rand.nextInt(RANDOM_RANGE); 
  We have a pseudo random number which is strictly greater than the previous one
} 
```

1.  如果需要，您可以打乱该列表（按顺序排列，您可能需要改进）

然后，您有一个数组来获取每个要编码的字符的伪随机数。

为了获得更多随机性，您可以增加 RANDOM_RANGE （但请注意不要在不断添加数字时溢出）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:29:24.020

这是我的提议：

```
 Character yourInput[] = {'a', 'b', 'c', 'd'};
    int yourInputEncoded[] = new int[yourInput.length];
    Hashtable<Character, Integer> charToInt = new Hashtable<Character, Integer>();
    ArrayList<Integer> alreadyUsedInt = new ArrayList<Integer>();
    Random randomize = new Random();
    for(int i = 0; i < yourInput.length; i++)
    {
        if(!charToInt.containsKey(yourInput[i]))
        {
            int randomInt = randomize.nextInt();
            while(!alreadyUsedInt.contains(randomInt))
                randomInt = randomize.nextInt();

            charToInt.put(yourInput[i], randomInt);
            alreadyUsedInt.add(randomInt);
        }
        yourInputEncoded[i] = charToInt.get(yourInput[i]);
    } 
```

对于每个 char，我们检查是否与 int 相关联。如果不是，我们（随机）生成一个新的关联 int（以前从未使用过）。之后，我们用他关联的 int 替换 char。那它:)

# javascript - 当跨度中的文本重新调整大小以填充整个 div 时，div 内的垂直对齐跨度

> ID：12746004
> 
> 赞同：1
> 
> 时间：2012-10-05T12:11:42.600
> 
> 标签：javascript, jquery, css

我有一张有 25 个 td 的桌子。每个 td 包含以下元素：

```
<td>
  <div>
    <span>
     text
    </span>
  </div>
</td> 
```

我还使用了一个脚本来重新调整 span 内的文本大小以填充整个 div，因此较长的文本将导致较小的字体大小。

现在我试图在 div 的中心垂直对齐文本，但没有成功（一整天）。我在源代码中包含[了这个 jsfiddle页面。](http://jsfiddle.net/JucD7/)

请帮我弄清楚这里出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:49:28.620

你为什么不做

```
td {
    vertical-align: middle !important;

}

td div {
    display: inline !important
} 
```

我不知道是否需要重要，我只是穿上一般样式来覆盖你拥有的任何东西

[http://jsfiddle.net/JucD7/6/](http://jsfiddle.net/JucD7/6/)

我在 FF 中进行了测试，但我不明白为什么这在其他浏览器中不起作用

更新

更新的小提琴，你只需要在 TD 上调整大小

```
$('td').textfill({ maxFontPixels: 26 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T12:46:28.280

这是：http: [//jsfiddle.net/JucD7/3/](http://jsfiddle.net/JucD7/3/)对你有什么好处？？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:24:11.667

试试这个[演示](http://jsbin.com/ibemuy/1/edit)

```
td {width: 75px!important;
max-width: 75px!important;
overflow: hidden;
height: 75px!important;
max-height: 75px!important;
}
span {display:block;  text-align:center;} 
```

# google-app-engine - 开发服务器上的 AppEngine Search API

> ID：12746008
> 
> 赞同：2
> 
> 时间：2012-10-05T12:11:51.050
> 
> 标签：google-app-engine

问题真的很奇怪。我在本地开发服务器上索引了一些文档。索引在管理控制台中可见（文本搜索链接）。然后我用`--clear_datastore`交换机重新启动服务器。所有数据存储实体都消失了，但是当我在管理控制台中单击文本搜索链接时，我仍然看到文本搜索索引。

我该如何摆脱它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T19:06:16.183

还有另一个标志，`--clear_search_index`应该清除它们

# css - Mozilla 未检测到 CSS -moz-border-radius

> ID：12746009
> 
> 赞同：1
> 
> 时间：2012-10-05T12:11:53.747
> 
> 标签：css

我在 Mozilla 检测 -moz-border-radius 时遇到问题。它默认为正常的边界半径，如果我删除它，它只会在边缘再次变回方形。

```
 -webkit-border-top-right-radius: 15px;
 -webkit-border-top-left-radius: 3px;
 -webkit-border-bottom-left-radius: 15px;
 -webkit-border-bottom-right-radius: 3px;
 -moz-border-radius-topright: 15px;
 -moz-border-radius-topleft: 3px;
 -moz-border-radius-bottomleft: 15px;
 -moz-border-radius-bottomright: 3px;
 border-top-right-radius: 15px;
 border-top-left-radius: 3px;
 border-bottom-left-radius: 15px;
 border-bottom-right-radius: 3px; 
```

我听说 Mozilla 已经放弃了边界半径的 -moz- ，有人可以证实这一点吗？我正在使用此代码为网站制作按钮，但在跨浏览器工作时遇到问题。

```
 /* BACKGROUND GRADIENTS */
 background: #A2C838;
 background: -moz-linear-gradient(top, #A2C838, #92B432 50%, #82A02D 51%, #718C27);
 background: -webkit-gradient(linear, left top, left bottom, color-stop(0, #A2C838), color-stop(.5, #92B432), color-stop(.5, #82A02D), to(#718C27));
 filter:  progid:DXImageTransform.Microsoft.gradient(startColorStr='#A2C838', EndColorStr='#718C27'); /* IE6,IE7 */
 -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorStr='#A2C838', EndColorStr='#718C27')"; /* IE8 */ 
```

问题是我不能真正使用边框半径，因为它现在似乎会影响 mozilla 和 IE，但由于 IE 不支持渐变，我不得不使用过滤器，它将我可爱的弯曲角恢复为正方形。我可以把它们都做成正方形，但我喜欢圆角的外观，如果我能保存它们，我会更喜欢。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:19:24.057

如果您在 IE 中需要圆角，您可以使用预渲染的渐变图像作为背景而不是滤镜，或者尝试应用`border-radius`到容器元素并使用`overflow: hidden`来查看渐变滤镜是否被容器边框剪裁。

> 我听说 Mozilla 已经放弃了边界半径的 -moz- ，有人可以证实这一点吗？

是的，[它从 Firefox 13 开始就消失了](https://developer.mozilla.org/en-US/docs/CSS/border-radius#Gecko_notes)。

当同一个属性的标准版本已经被很好地实现了这么长时间时，支持非标准属性真的没有意义。在任何情况下都没有理由使用非标准前缀版本而不是标准无前缀版本，因为供应商前缀的全部目的是提供可能最终成为标准或可能不会成为标准的实验性实现。您不能依赖那些始终存在的非标准属性。

IE 过滤器将始终忽略`border-radius`，这是设计使然。但仅仅因为一个浏览器以非标准方式做某事并不意味着您必须对其他所有浏览器都非标准。此外，由于 IE 无论如何都会消除角落，因此`border-radius`在代码中保留无前缀确实没有害处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:17:00.590

```
border-radius:10px;
-moz-border-radius:10px; 
```

在你的 CSS 中添加边框半径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T12:14:36.017

您可以使用[PIE.HTC - Progressive Internet Explorer HTML Component](http://css3pie.com/)在 IE 中同时拥有边界半径和线性渐变。所以不需要使用微软过滤器。

# three.js - three.js - 如何围绕特定点旋转圆柱体？

> ID：12746011
> 
> 赞同：10
> 
> 时间：2012-10-05T12:11:55.043
> 
> 标签：three.js

我已经提到了以下关于对象旋转的问题。

*   [链接 1](https://stackoverflow.com/questions/10747510/how-to-rotate-a-three-js-vector3-around-an-axis) [链接 2](https://stackoverflow.com/questions/11060734/how-to-rotate-a-3d-object-on-axis-three-js?lq=1) [链接 3](https://stackoverflow.com/questions/11119753/how-to-rotate-a-object-on-axis-world-three-js) [链接 4](https://stackoverflow.com/questions/10747510/how-to-rotate-a-three-js-vector3-around-an-axis) [链接 5](https://stackoverflow.com/questions/9038465/three-js-object3d-rotation-to-align-to-a-vector?rq=1)

但无法准确理解如何围绕特定点旋转圆柱体？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-05T15:36:20.227

我假设您的意思是您希望对象围绕*其几何中*的特定点旋转。

例如，`cylinderGeometry`围绕它的*center*旋转。假设您希望它围绕其*end*旋转。

您需要做的是在圆柱几何体创建后立即平移它，以便几何体中的所需点现在位于原点。

```
geometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, cylinderHeight/2, 0 ) ); 
```

编辑：您现在可以这样做，而不是：

```
geometry.translate( 0, cylinderHeight/2, 0 ); // three.js r.72 
```

现在，当您旋转圆柱体时，它现在将围绕其末端旋转，而不是围绕其中间旋转。

它旋转的一端也将位于您为圆柱体网格设置的位置。

显然，您可以使用任何几何体来执行此操作，而不仅仅是圆柱体。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-19T17:23:49.950

为上面的 WestLangley 答案给出一个代码示例：

```
// CYLINDER
var cyl_material = new THREE.MeshBasicMaterial( { color: 0xff0000 } );
var cyl_width = 1;
var cyl_height = 5;
// THREE.CylinderGeometry(bottomRadius, topRadius, height, segmentsRadius, segmentsHeight, openEnded )
var cylGeometry = new THREE.CylinderGeometry(cyl_width, cyl_width, cyl_height, 20, 1, false);
// translate the cylinder geometry so that the desired point within the geometry is now at the origin
cylGeometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, cyl_height/2, 0 ) );
var cylinder = new THREE.Mesh(cylGeometry, cyl_material);

scene.add( cylinder ); 
```

现在旋转围绕圆柱体原点进行：

```
cylinder.rotation.x = 0.5*Math.PI; 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-06T09:54:07.173

下面的函数可以用来实现这一点。请注意，几何图形被平移，但网格的位置没有改变。

```
//rotates a mesh's geometry about a specified axis and pivot
//the axis is a normalized Vector3
const rotateAbout = (mesh, axis, axisPosition, angle) => {
    mesh.geometry.applyMatrix(new THREE.Matrix4().makeTranslation(mesh.position.x-axisPosition.x, mesh.position.y-axisPosition.y, mesh.position.z-axisPosition.z));  //translate geometry to axis location
    mesh.geometry.applyMatrix(new THREE.Matrix4().makeRotationAxis(axis, angle));    //rotate geometry about axis
    mesh.geometry.applyMatrix(new THREE.Matrix4().makeTranslation(axisPosition.x-mesh.position.x, axisPosition.y-mesh.position.y, axisPosition.z-mesh.position.z));  //translate geometry back to original location
} 
```

# asp.net-mvc - asp.net MVC中RouteLink和ActionLink()的区别

> ID：12746012
> 
> 赞同：-1
> 
> 时间：2012-10-05T12:12:00.557
> 
> 标签：asp.net-mvc

> **可能重复：**
> [ASP.NET MVC 中的 RouteLink 和 ActionLink 有什么区别？](https://stackoverflow.com/questions/864827/whats-the-difference-between-routelink-and-actionlink-in-asp-net-mvc)

`RouteLink()`和*ASP.NET MVC*`ActionLink()`有什么区别？

 *什么时候用`Html.RouteLink()`，什么时候用`Html.ActionLink()`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T12:15:32.903

该`ActionLink`方法呈现链接到操作方法的元素。

该`RouteLink`方法呈现一个链接到 URL 的元素，该 URL 可以解析为操作方法、文件、文件夹或其他一些资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:15:42.680

[ASP.NET MVC 中的 RouteLink 和 ActionLink 有什么区别？](https://stackoverflow.com/questions/864827/whats-the-difference-between-routelink-and-actionlink-in-asp-net-mvc)

这个问题已经回答过了，我不打算窃取它的内容。*

# regex - 正则表达式如何做以下测试：如果表达式包含'{'则仅当找到另一个'}'时才接受该表达式？

> ID：12746023
> 
> 赞同：1
> 
> 时间：2012-10-05T12:12:32.967
> 
> 标签：regex, xsd

我需要运行以下测试：如果一个表达式包含 '{' 则仅在找到另一个 '}' 时才接受该表达式 有效的表达式是 'aaa{aaa}aaa', '{aa}' , 'a{aa {aa}aa}aa'、'{a{a}a}' 等...我该怎么做？

如果重要，我将在 XSD 文档中运行此测试...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:21:37.983

您所描述的语言（与 Dyck 语言密切相关）是上下文无关的，而不是常规的（乔姆斯基层次结构中的类型 2）。也就是说，不可能使用基本的正则表达式来构造该语言单词的接受器。

但是，堆栈机器可以决定您描述的语言类型的单词问题。要实现这一点，您应该将字符串标记为字符，遍历每个字符，如果发现左括号，则将初始化为 0 的计数器加一。如果您发现右括号将其减一。如果在整个执行过程中不变量`counter >= 0`成立并且计数器的最终状态为 0，则接受该字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T02:09:16.773

由于 Michael Schmeißer 概述的原因，XSD 正则表达式无法识别问题中描述的语言。（它可能可以被 Perl 兼容的模式识别，这些模式早已将 class-3 语言抛在后面，但 XSD 不使用反向引用和其他设备，这些设备为 Perl 表达式提供了额外的功能。）

## 正则近似

您对 MS 回答的评论表明您可能愿意接受问题中描述的语言的常规近似值。如果是这样，那么您可以在常规子语言（仅接受原始语言的单词但可能错误地拒绝其中一些单词）或常规超集语言（接受该语言的所有单词但错误地接受某些非语言）之间进行选择。话也是如此。

### 评论中的近似值

MS答案的评论中给出的表达式是一个常规子集。它有三个明显的局限性：

*   它允许大括号最多嵌套三个深度。
*   它至少需要一对大括号（它不接受字符串“ `aaa`”）。
*   它在每一层嵌套中最多允许一对大括号（它不接受“ `a{a}a{a}a`”）。

像第一个这样的限制是不可避免的。您可以选择大于 3 的数字，但在常规子集中总是会有最大嵌套深度。然而，其他两个不是必需的，可以通过子集表达式的系统开发来避免。

## 系统地开发子集表达式

### 从 BNF 开始

为简单起见，使用原始帖子中说明的语言，我们可以用类似 BNF 的符号表示它：

```
<S> ::= <empty> | <S> a | <S> { <S> } .
<empty> ::= . 
```

或者，在扩展的 BNF 中：

```
S ::= (a|{S})* 
```

### 重写以使嵌套级别显式

然后我们可以重写它来跟踪嵌套（以词缀语法的风格）：

```
S ::= (a|{S1})*
S1 ::= (a|{S2})*
S2 ::= (a|{S3})*
etc. 
```

在选定的级别*n*，我们可以这样结束递归（从而使语言变得规则）：

```
Sn ::= a* 
```

### 用 RHS 代替 LHS

然后我们可以通过一次替换一个级别来构建正则表达式：

```
S = (a|{S1})*
  = (a|{(a|{S2})*})*
  = (a|{(a|{(a|{S3})*})*})*
etc. 
```

在这种情况下，它归结为：为了允许嵌套*n*层深度，我们从字符串“ ”的*n 个*副本开始，以“ `(a|{`”继续，并以字符串“ ”的*n 个*副本`a*`结束。要允许除 以外的字符，我们可以用而不是重写。 *`})*``a``[^{}]``a`*

 *### *n* = 4的结果

如果我们用四级嵌套大括号停止替换，我们得到表达式

```
([^{}]|{([^{}]|{([^{}]|{([^{}]|{[^{}]*})*})*})*})* 
```

### 超集表达式作为替代

如果重要的是永远不会拒绝任何合法表达式，我们可以通过用`[^{}]*`or`.*`替换中心表达式来将其转换为超集表达式`(.|\n)*`；然后我们有一个正则表达式，它接受 (a) 正确嵌套的大括号不超过四个深度的字符串，以及 (b) 带有嵌套四个深度的大括号的字符串，在最内层包含任意字符串（所以第五个、第六个或第 n 个嵌套级别不一定正确）。

```
([^{}]|{([^{}]|{([^{}]|{([^{}]|{[(.|\n)*})*})*})*})* 
```

相比之下，如果不接受任何非法表达式很重要，那么最好坚持使用子集表达式。*

# codeigniter - hmvc，模块化分离，模块化扩展，概念澄清

> ID：12746027
> 
> 赞同：0
> 
> 时间：2012-10-05T12:12:51.387
> 
> 标签：codeigniter, module, hmvc

我已经阅读有关 codeigniter 的模块很长一段时间了，并决定深入研究它。我已经了解了基本概念，每个模块都是一个单独的“MVC”，因此易于维护、添加等，但需要一点帮助来理解正确的实现。

首先，具体来说，我想对原始模块化扩展 hmvc 站点中的行进行解释

“仅使用模块化分离，没有 HMVC，控制器将扩展 CodeIgniter 控制器类。”

这是什么意思？如果有人可以解释它的含义和目的，那将非常有帮助。

此外，对 HMVC、模块化扩展和分离等进行更多概念性的解释会很棒。比如如何决定何时扩展模块，将它们分开，以及这意味着什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:37:25.973

> [https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home)
> 
> 要使用 HMVC 功能，例如`Modules::run()`，控制器必须扩展 MX_Controller 类。
> 
> 要仅使用模块化分离，不使用 HMVC，控制器将扩展 CodeIgniter 控制器类。

这意味着如果您希望您的控制器能够利用`Modules::run()`可以从应用程序中的任何位置（包括其他模块）调用的 ，您需要让该控制器扩展 MX_Controller 类，如下所示：

```
class Foobar extends MX_Controller {} 
```

`MX_Controller`是模块化扩展包的基本控制器。您还可以选择扩展本身 extends 的任何其他控制器`MX_Controller`，如下所示：

```
// Base controller
class Module_Controller extends MX_Controller {}

// Actual controller
class Blog extends Module_Controller {} 
```

> `Modules::run()`专为返回视图部分而设计

如果你不需要这个功能（你可能不需要），那么你不需要在你的模块控制器中做任何不同的事情：

```
class Foobar extends CI_Controller {}
class Foobar extends MY_Controller {} // etc. 
```

在这种情况下，“模块”只是迷你 CI 应用程序，每个应用程序都有自己的模型、视图、控制器等。它有助于保持代码的组织性，并为您提供更多分离不相关组件的能力。理论上，任何 CI 应用程序都可以成为一个模块，反之亦然。

# qt - 如何分发 Qt 项目的源代码？

> ID：12746030
> 
> 赞同：0
> 
> 时间：2012-10-05T12:13:04.393
> 
> 标签：qt, qt-creator, autotools, qmake

我使用 Qt Creator 创建了一个程序，并希望将其传递给某人。由于缺乏优雅的解决方案，我编写了一个脚本来打包所有相关文件并告诉该人解包并执行`qmake -makefile`.

有没有标准的方法来做到这一点？甚至是自动工具方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:43:36.203

通常您将所有内容 tar/zip 在一起，或者如果您使用 VCS（您应该这样做），创建一个标签并导出源文件和 .pro 文件（git 存档、svn 导出等）。或者让其他人访问 VCS。

当然，除了 QMake 和 Qt，您还可以使用其他构建系统。为了尽量减少痛苦，我不建议使用 autotools，而是建议使用 cmake。（如果您针对它，这在 Windows 上也很有效）。

# javascript - 如何使用 addEventListener 在 Firefox 中获取错误事件详细信息？

> ID：12746034
> 
> 赞同：14
> 
> 时间：2012-10-05T12:13:20.133
> 
> 标签：javascript, firefox

我试图理解为什么 Firefox（我使用的是 15，但即使在夜间也一样）在尝试访问错误事件信息时的行为不像 WebKit。

这个在任何地方都有效：

```
window.onerror = function(message, lineno, filename) { } 
```

但我当然不想用这个。

正确的做法是：

```
window.addEventListener('error', function(e) { 
  console.log(e.message);
}, false); 
```

不幸的是，这仅适用于 WebKit。在 Firefox 中，处理程序被调用，但`e`事件几乎是空的：没有消息，没有行号，没有文件名属性。

最小的测试在这里：http: [//jsbin.com/efexiw/1/edit](http://jsbin.com/efexiw/1/edit)

不过，我不认为这是一个错误……所以问题是：如何在最近的 Firefox 中获取错误详细信息？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-05T13:31:37.143

[HTML5 规范要求](http://www.w3.org/TR/html5/webappapis.html#creating-scripts)解析失败会导致浏览器：

> ...报告脚本错误，使用全局对象...作为目标，使用有问题的位置（行号和列号）。

其中“[报错](http://www.w3.org/TR/html5/webappapis.html#report-the-error)”包括步骤

> 4.  让*message*是一个用户代理定义的字符串，以一种有用的方式描述错误。
> 
> ...
> 
> 7.  让*event*是一个新的可信`ErrorEvent`对象，它不会冒泡但可以取消，并且具有事件名称`error`。
>     
>     
> 8.  *将event*的`message`属性初始化为*message*。
>     
>     
> 
> ...
> 
> 13.  在*目标*调度*事件*。

 *因此，任何兼容 HTML5 的浏览器都会报告解析时错误事件`window`，其中包括`message`设置为“*用户代理定义的字符串以有用的方式描述错误”的属性。*任何未能做到这一点的浏览器版本还没有在这方面符合 HTML5。

* * *

以前（在编写此问题时），`window.onerror`提供了`window.addEventListener("error")`. 如果您必须使用旧版本的 Firefox，您可以[安全地使用`window.onerror`](https://developer.mozilla.org/en-US/docs/DOM/window.onerror#Example)：

> ```
> // Example 1:
> 
> // Prevent error dialogs from displaying -which is the window's normal
> // behavior- by overriding the default event handler for error events that
> // go to the window.
> window.onerror = null;
> 
> // Example 2:
> 
> var gOldOnError = window.onerror;
> // Override previous handler.
> window.onerror = function myErrorHandler(errorMsg, url, lineNumber) {
>   if (gOldOnError)
>     // Call previous handler.
>     return gOldOnError(errorMsg, url, lineNumber);
> 
>   // Just let default handler run.
>   return false;
> } 
> ```*

# asp.net-mvc-3 - MVC，在控制器和视图之间传递类

> ID：12746037
> 
> 赞同：4
> 
> 时间：2012-10-05T12:13:30.377
> 
> 标签：asp.net-mvc-3

我有一个场景如下；“调查”包含“问题”类型的列表；“问题”由一个 id 和一个名为“文本”的字符串组成。以下是类定义：

```
public class Survey
{
    public int SurveyId { get; set; }
    public string Title { get; set; }
    public List<Question> Questions { get; set; }

    public Survey()
    {
        this.Questions = new List<Question>();
    }
}

public class Question
{
    public int QuestionId { get; set; }
    public string QuestionText { get; set; }
    public int OwningSurveyId { get; set; }
} 
```

我希望能够从特定调查的页面链接以创建一个新问题（效果很好），但是当提交问题表单时，我想做两件事；1) 确保正确设置了 OwningSurveyId，2) 将问题添加到 Survey.Questions List。

我对任何获得此功能的解决方案持开放态度——我采用的方法可能不是最好的。我决定做的是将调查对象传递给问题的创建表单，以便在提交表单时，表单包含两个对象，因此我可以正确执行上述两个任务（1 和 2）。

我在 QuestionController 中设置了 Create Question 页面，如下所示：

```
// GET: /Question/Create

    public ActionResult Create(Survey OwningSurvey)
    {
        return View(OwningPulse);
    }

[HttpPost]
    public ActionResult Create(Pulse OwningPulse, Question NewQuestion)
    {
        ModelState["OwningSurveyId"].Errors.Clear();

        if (ModelState.IsValid)
        {
            OwningPulse.Questions.Add(NewQuestion);
            db.Questions.Add(NewQuestion);
            db.SaveChanges();
            return RedirectToAction("Index", "Survey");
        }

        return View(OwningSurvey);
    } 
```

该问题的 Create.cshtml 文件具有以下内容：

```
@model MoodTool.Interface.Models.Survey

@{
ViewBag.Title = "Create";

var Question = new MoodTool.Interface.Models.Question();
Question.OwningPulseId = Model.SurveyId;
}

@using (Html.BeginForm("Create", "Question", "{NewQuestion}", FormMethod.Post, new { NewQuestion = Question }))
{... code follows 
```

我遇到的问题是 .cshtml 文件中“模型”的值为空，因此页面崩溃。Question 控制器（“GET”版本）的 Create 方法中的 OwningSurvey 的值也为空。

谁能指导我正确的方向？我意识到我可能在做一些严重错误的事情（设计模式），或者犯了一个简单的语法错误，但我是 MVC 的新手并且在循环中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:32:06.437

您是否正在为在调查操作中添加问题的调查加载模型？如果不是，那么这就是您的模型为空的原因。这只是我根据我在这里看到的猜测。RedirectToActions 不加载模型，因此您必须将其放入 TempData 并在重定向操作中重新加载它。

第二部分

在第一部分中，您将创建问题并重定向到调查的索引操作。

```
 OwningPulse.Questions.Add(NewQuestion);
 db.Questions.Add(NewQuestion);
 db.SaveChanges();
 return RedirectToAction("Index", "Survey"); 
```

一旦进入索引操作，您需要重新加载您首先放置问题的调查并将其加载到模型中以传递给视图。使用上面的 lavriks 方法，通过将 id 传递给 action 方法，您可以从数据库中获取该调查并将其传递给为视图定义的模型中的视图。

```
 public ActionResult Index(int id)
    {
         // assuming you have some built in functionality to retrieve the survey information from the db through the constructor given an id
        Survey s1 = new survey(id);  

        // some of this is pseudo code, assumes you have a model defined called survey for the view using it
        // Return view with model.
        return View( "Survey" , s1 );
    } 
```

当我谈到 tempdata 而不是将 ID 传递给 action 方法并在 action 方法中为您的视图再次查找它时，您可以将对象存储在 tempdata

```
 // save data to survey in teh create action method
     TempData["survey"] = survey 
```

然后在调查的默认索引操作方法中，从临时数据中调用调查并将其发送到视图。

```
 Survey s1 = (Survey)Tempdata["survey"];
     return View ("Survey", s1); 
```

同样，其中一些是伪代码，并不完全完整，但它应该为您指明正确的方向。两种方法都有其优点和缺点，但取决于应用程序、对象的大小、有多少人在访问页面等，您可以选择使用或使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:13:58.683

这里最好的方法之一是 Post-Redirect-Get 模式。您只需发布带有调查 ID 的问题表单。在控制器中，您可以尝试按 id 读取调查并检查它是否存在。然后添加问题并保存调查。例如，重定向到 Survey GET 操作。它将显示包括新添加的问题。此外，您将仅在此处发布问题和调查 ID - 您不再需要任何内容​​。您不会通过发布一些不必要的数据来更改调查 - 所以它也更安全一些。

编辑。

例如。

```
// GET: /Question/Create
public ActionResult Create(int surveyId)
{
    return View(new Question(){OwningSurveyId = surveyId });
}
[HttpPost]
public ActionResult Create(Question newQuestion)
{
    if (ModelState.IsValid)
    {
        //I've never used EntityFramework so just a pseudo code here
        var survey = db.Surveys.Get(newQuestion.OwningSurveyId);
        if(survey != null)
        {
            survey.Questions.Add(newQuestion);
            db.Surveys.Save(survey); 
            db.SaveChanges();
            //If you want to open specific survey, 
            //you can pass it's Id to read it in Survey index action
            return RedirectToAction("Index", "Survey", {Id = survey.Id});
        }
    }

    return View(newQuestion);
} 
```

并查看创建问题

```
@model MoodTool.Interface.Models.Question

@{
ViewBag.Title = "Create";
}

@using (Html.BeginForm("Create", "Question", FormMethod.Post))
{
     @Html.HiddenFor(x => x.OwningSurveyId)
     @Html.EditorFor(x => x.QuestionText)
       //etc.
 } 
```

# java - 为什么我会在运行时收到“DOM Level 3 Not implemented”错误？

> ID：12746038
> 
> 赞同：2
> 
> 时间：2012-10-05T12:13:35.270
> 
> 标签：java, dom, cxf, xmlbeans

我目前正在开发一个使用 XMLBeans 绑定而不是默认 JAXB 绑定的 Apache CXF Web 服务。我正在使用 Java 1.6 编译和运行代码。对于以下代码片段，我在运行时收到“DOM 级别 3 未实现”错误：

```
ExtType[] extTypeList = p.getExtArray();
        for (ExtType extType : extTypeList) {               
            Node node = extType.getDomNode();
            NodeList objList = node.getChildNodes();
            for (int i = 0; i < objList.getLength(); ++i) {
                Node text = (Node) objList.item(i);                 
                if (text.getNodeName() != null
                        && text.getNodeName() == XmlConstant.NODE_NAME) {

                    info.setDuration(text
                            .getTextContent());
                }
            }
        } 
```

JBoss 中显示的确切错误如下：

```
java.lang.RuntimeException: DOM Level 3 Not implemented
        at org.apache.xmlbeans.impl.store.DomImpl._node_getTextContent(DomImpl.java:2516)
        at org.apache.xmlbeans.impl.store.Xobj$NodeXobj.getTextContent(Xobj.java:2607) 
```

从上面的错误消息中，很明显 getTextContent 方法导致了异常，因为在运行时找不到 DOM 级别 3 API。如何消除此错误？我猜我必须弄清楚哪个 jar 包含 DOM API，并从该 jar 中删除所有与 dom 相关的类，以便使用 jdk 附带的默认 DOM API。或者，有没有办法在不依赖 getTextContent 方法的情况下使用 DOM 获取 xml 标签的文本内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T13:19:08.470

似乎 XMLBeans 提供了一个不符合 DOM 3 的 DOM 实现，基于异常：

```
java.lang.RuntimeException: DOM Level 3 Not implemented
        at org.apache.xmlbeans.impl.store.DomImpl._node_getTextContent(DomImpl.java:2516)
        at org.a

pache.xmlbeans.impl.store.Xobj$NodeXobj.getTextContent(Xobj.java:2607) 
```

而不是`getTextContent`您可以遍历所有子节点并附加来自所有文本类型节点的值。

```
package forum12746038;

import java.io.StringReader;
import javax.xml.parsers.*;
import org.w3c.dom.*;
import org.xml.sax.InputSource;

public class Demo {

    public static void main(String[] args) throws Exception {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        String xml = "<root>Hello <!-- comment -->World</root>";
        Document doc = db.parse(new InputSource(new StringReader(xml)));

        Element element = doc.getDocumentElement();
        NodeList childNodes = element.getChildNodes();
        StringBuilder strBldr = new StringBuilder();
        for(int x=0; x<childNodes.getLength(); x++) {
            Node childNode = childNodes.item(x);
            if(childNode.getNodeType() == Node.TEXT_NODE) {
                strBldr.append(childNode.getNodeValue());
            }
        }
        System.out.println(strBldr.toString());
    }

} 
```

* * *

> 我猜我必须弄清楚哪个 jar 包含 DOM API，并从该 jar 中删除所有与 dom 相关的类，以便使用 jdk 附带的默认 DOM API。

这可能行不通，因为我想象 XMLBeans 返回一个专门的 DOM 实现，该实现包装了自己的对象以通过 DOM API 公开它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:56:18.610

那么根据[这个页面](http://docs.oracle.com/javase/6/docs/technotes/guides/xml/jaxp/JAXP-Compatibility_160.html#dom)，Java 6 的 XML 支持应该是 DOM 3 兼容的。另请参阅 Java SE 6 [javadoc](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Node.html)。

这使我认为，当您在 JBoss 上运行应用程序时，其类路径中必须有较旧的 XML jar，或类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T10:57:31.033

仅供参考：这通常是由 maven 或将非常旧的 xml-apis 或 xmlParserApis jar 添加到类路径中引起的，通常通过 xerces 依赖项，这些可以删除，Java 已经内置了 XML 多年。现代 Java 代码永远不应该依赖于 xerces。

# c++ - 多个 GLSL 统一缓冲区

> ID：12746040
> 
> 赞同：8
> 
> 时间：2012-10-05T12:13:44.847
> 
> 标签：c++, opengl, glsl

使用多个统一缓冲区时遇到问题。

这是我的 GLSL 代码：

```
layout(std140) uniform MaterialInfo {
    vec3 Ka;
    vec3 Ks;    
    vec3 Kd;
};

layout(std140) uniform LightInfo {
    vec3 La;
    vec3 Ls;
    vec3 Ld;
}; 
```

这就是我创建和填充缓冲区的方式：

```
 blockIndex = glGetUniformBlockIndex(program, "MaterialInfo");
    if (blockIndex == -1) {
        fprintf(stderr, "Could not bind uniform block\n");
    }
    glGenBuffers(1, &materialUbo);
    glBindBuffer(GL_UNIFORM_BUFFER, materialUbo);
    glBufferData(GL_UNIFORM_BUFFER, sizeof(MaterialBlock), &mesh->material, GL_DYNAMIC_DRAW);
    glBindBufferBase(GL_UNIFORM_BUFFER, blockIndex, materialUbo);

    blockIndex = glGetUniformBlockIndex(program, "LightInfo");
    if (blockIndex == -1) {
        fprintf(stderr, "Could not bind uniform block\n");
    }
    glGenBuffers(1, &lightUbo);
    glBindBuffer(GL_UNIFORM_BUFFER, lightUbo);
    glBufferData(GL_UNIFORM_BUFFER, sizeof(LightBlock), &light->lightBlock, GL_DYNAMIC_DRAW);
    glBindBufferBase(GL_UNIFORM_BUFFER, blockIndex, lightUbo); 
```

当结构定义如下：

```
struct LightBlock { 
    glm::vec4 La;
    glm::vec4 Ld;
    glm::vec4 Ls;
};

struct MaterialBlock {
    glm::vec4 Ka;
    glm::vec4 Ks;
    glm::vec4 Kd;
}; 
```

如果我只使用一个统一缓冲区，则此代码可以正常工作。那就是 MaterialInfo。如果我包含 lightInfo 的第二个缓冲区，当我稍后在渲染中到达 glDrawElements() 时会崩溃。

像这样使用多个统一缓冲区有问题吗？我可以把它变成 1 个 UBO 吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-05T15:25:24.430

`glGetUniformBlockIndex`不能那样工作。它检索一个标识该特定统一块的数字。它*不是*要传递给的统一缓冲区绑定索引`glBindBufferRange/Base`。

UBO 绑定很像纹理绑定。您告诉程序要查看哪个插槽。使用纹理，您可以获得纹理的统一位置，然后将该统一的值设置为纹理单元索引。使用 UBO，您可以获得块的块索引，将该块索引的绑定值设置为它将查找的统一缓冲区绑定点。

因此，您应该从中获取索引`glGetUniformBlockIndex`并使用[`glUniformBlockBinding`](http://www.opengl.org/wiki/GLAPI/glUniformBlockBinding)为它分配一个缓冲区绑定点。然后将缓冲区绑定到分配给统一块的绑定点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-14T12:54:18.523

只是为了扩展尼科尔的答案。大多数示例将分配和使用混为一谈，并且他们对使用槽进行硬编码，以便只支持一个缓冲区，这真的很混乱，我自己只是浪费了一天的时间。

着色器初始化设置：

```
 m_ubo_transform_block_index = glGetUniformBlockIndex(m_gl_program_object, "transform_uniforms");
    if (m_ubo_transform_block_index != -1)
    {
        glUniformBlockBinding(m_gl_program_object, m_ubo_transform_block_index, UBO_TRANSFORM_INDEX);
    } 
```

UBO_TRANSFORM_INDEX 是一个插槽，就像纹理单元一样。

绘制时的用法：

```
 if(m_ubo_transform_block_index != -1)
        {
            glBindBufferBase(GL_UNIFORM_BUFFER, UBO_TRANSFORM_INDEX, uniform_buffer->m_uniform_transform_buffer_object);
        } 
```

# iphone - 我们可以从内置设置应用程序中获取/访问与照片相关的设置吗？

> ID：12746044
> 
> 赞同：0
> 
> 时间：2012-10-05T12:13:47.720
> 
> 标签：iphone, objective-c, settings

我找到了使用 UIDevice 和 NSLocale 的当前版本、型号和其他内容，但我想获取有关设置->照片的信息

我怎么能得到那个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:16:55.583

没有已知的公共 API。如果您的应用程序被拒绝，您根本无法做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:15:55.430

你不能，没有API。

# mongodb - Meteor：为不同的收集视图保持实时计数

> ID：12746048
> 
> 赞同：1
> 
> 时间：2012-10-05T12:14:05.540
> 
> 标签：mongodb, meteor

我想在 Meteor 中创建一个消息传递应用程序（使用 auth 分支）。它有一个 Messages 集合，其中每个文档都有一组回复文档（“回复”）。在侧边栏中，我们有消息集合的不同视图，其中每个视图都有一个“查询”字段，该字段作为参数提供给 Meteor.publish('messages')... 方法。

到目前为止，一切都很好。如果我单击视图，页面的主要部分会显示与查询匹配的消息列表。对于每条消息，如果有任何回复比当前用户上次打开消息时更新，或者她从未打开过消息，我会以粗体显示。为此，我为每条消息维护一个“read_by”字段，其中包含一组 {user_id, ..., read_at: ...} 记录。这也很有效。

问题是我需要侧边栏中的每个视图都显示一个带有每个视图的未读消息数量的徽章（根据上一段中的逻辑），而不仅仅是当前选择的一个。

我该如何解决这个问题？据我所知，这意味着我需要针对 Messages 集合维护一些实时查询。同时，客户端不能选择订阅整个 Messages 集合——让我们假设它拥有数百万个文档。无论服务器上的数据库集合中有多少文档，客户端都必须保持敏捷。

我怀疑这需要不同的架构设计（这不是问题），但我不太明白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T00:16:14.030

我认为你有两个选择。

更简单的选择（这可能不是最有效的）是订阅您感兴趣的所有不同查询：

```
 _.each(queries, function(query) {
   Meteor.subscribe('messages', query);
 }) 
```

当您需要消息时，使用相同的查询仅选择您感兴趣的消息：

```
 Template.queryView.messages = function() { 
   return Messages.find(queries[Session.get('currentQueryNo')]);
 } 
```

显然，您可以进行所需的计数。

另一种选择是发布一个特殊的计数集合，它是手动设置的。[首先，做一些与文档发布](http://docs.meteor.com/#meteor_publish)部分中的`counts-by-room`示例非常相似的事情，然后在客户端，做一些类似的事情：

```
 var Counts = new Meteor.Collection('counts');
 _.each(queries, function(query) {
   Meteor.subscribe('counts-by-query', query);
 }) 
```

每个订阅都`counts-by-query`将在计数集合中维护一条记录。

希望有帮助！

# xsd - 仅当设置了另一个属性时才需要一个属性

> ID：12746049
> 
> 赞同：5
> 
> 时间：2012-10-05T12:14:06.073
> 
> 标签：xsd

`required`如果设置了另一个属性，是否可以创建一个属性？

例如，在下面的代码中，必须`viewId`设置属性，但设置了属性。`required``action`

XML:

```
<node id="id1" destination="http://www.yahoo.com" />
<node id="id2" action="demo" viewId="demo.asp"/> 
```

如果这是可能的，请你告诉我这是怎么做的。截至目前，我已经`viewId`设置`required`了所有情况，因此第一个`node`元素未能通过验证。

```
<xsd:attribute name="focusViewId" type="xsd:anyURI" use="required"/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T13:11:38.947

单独使用 XSD 1.0 是不可能的。您必须使用另一种 XML 模式语言来补充或代替 XSD，或者迁移到 XSD 1.1。

另一种选择可能是重构您的架构。如果 @destination 与 { @action, @viewId} 互斥，也许您可​​以使用元素来代替，这样您就可以使用`xsd:choice`.

更新：对于 XSD 1.1

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xsd:schema elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="node">
        <xsd:complexType>
            <xsd:attribute name="id" type="xsd:ID" use="required"/>
            <xsd:attribute name="destination" type="xsd:string"/>
            <xsd:attribute name="action" type="xsd:string"/>
            <xsd:attribute name="viewId" type="xsd:string"/>
            <xsd:assert test="(@viewId) or not(@action)" />
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:19:58.647

您可以为包含@id 定义的元素“节点”（我们称之为abstactNode）创建一个抽象复杂类型。

然后使用@destination 的定义创建一个扩展abstactNode 的复杂类型“nodeWithDestination”。

第二个复杂类型“nodeWithActionAndViewId”也扩展了abstactNode，具有@action 和@viewId 属性定义。

您的 XML 将如下所示：

```
<node id="id1" destination="http://www.yahoo.com" xsi:type="nodeWithDestination"/>
<node id="id2" action="demo" viewId="demo.asp" xsi:type="nodeWithActionAndViewId"/> 
```

这符合您的需要吗？

# java - JSON Jquery 到 Struts2 动作

> ID：12746051
> 
> 赞同：7
> 
> 时间：2012-10-05T12:14:09.377
> 
> 标签：java, jquery, json, struts2

我想将我的 JSON 对象从 Javscript 发送到 Struts2 Action。

示例 JSON 对象

```
 {
        "lists":["list1","list2","list3","list4","list5"],
        "maps": {  
            "key4":"value4","key3":"value3","key5":"value5","key2":"value2","key1":"value1"
        },
        "number1":123456789,
        "numberarray1":[1,2,3,4,5,6,7,8,9],
        "string1":"A",
        "stringarray1":["A1","B1"]
    } 
```

我的 Jquery Ajax

```
$.ajax({
    type: 'POST', 
    url: 'json/JSON.action',
    data: JSON.stringify(data),
    dataType: 'json',
    async: false ,
    contentType: 'application/json; charset=utf-8',
    success: function(){window.alert('Done');}
}); 
```

Struts.xml 配置

```
<action name="JSON" class="com.actions.json.JsonAction" method="getJSON">
    <result type="json"/>
</action> 
```

我的行动课

```
public class JsonAction extends ActionSupport {

    private String data;

    public String getJSON() {

        return ActionSupport.SUCCESS;
    }

    public String getData() {
        return data;
    }

    public void setData(String data) {
        this.data = data;
    }

} 
```

我的问题是如何在操作类中接收 JSON 对象。

注意：POST OF JSON 对象是成功的.. 我只是不知道如何通过 Action Class 接收它.. 请帮助谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T12:56:23.800

1.  `struts.xml`您的输入有错字
2.  您是否在`struts.xml`. **[请看这个链接](https://stackoverflow.com/a/12266588/1085285)**
3.  您发送到服务器的 json 不包含任何`data`密钥。所以它将始终为空。由于 json 被表示为对象。您需要以这种方式将 JSON 转换为 Java 对象。

**方法 1。**

为等创建二传手`lists,maps,number1,numberarray1,string1`。在**[此链接](http://struts.apache.org/2.2.3/docs/json-plugin.html)**的顶部，定义了执行此操作的方式。然后您可以通过这种方式访问​​所有变量。

**方法 2.** 在您的 javascript 中定义一个新对象。

```
 var sentData ={};
 sentData ["sentData "] = data;
// And in your ajax call , 
data: JSON.stringify(sentData), 
```

在你的动作类中，为此创建 getter 和 setter。

```
Map<K.V> sentData = new HashMap<K,V>(); 
```

这将为您提供整个 json 对象作为 Map。

# javascript - 在 web worker 和主线程之间传递大量数据

> ID：12746053
> 
> 赞同：21
> 
> 时间：2012-10-05T12:14:19.713
> 
> 标签：javascript, html, web-worker, html5-filesystem

有没有办法在网络工作者和主线程之间传递大量数据（多 MB）？我在一个项目中工作，我需要下载文件，对其进行一些修改，然后以某种方式让用户下载修改后的文件。我发现了以下在 web worker 和主 UI 之间传递数据的方法

1.  使用常规`postMessage`方法。
2.  使用可转移对象（仅限 Chrome）
3.  创建对 blob 的 URL 引用并仅发送 URL（在 Chrome 中有效，在其他方面也有效？）

我认为（1）在发送较小的对象时很好，但在处理大于几 MB 的文件时需要大量的时间和空间，因为它是序列化并作为 JSON 发送的。Chrome 提供了一种使用可传输对象传输数据的方法，无需复制数据。不幸的是，到目前为止，这是 Chrome 唯一的功能，否则它本来可以达到我的目的。

我发现的最后一件事是，从工作人员那里创建一个指向 blob 的 URL `self.webkitURL`，然后只将 URL 引用传递给 UI。这很好用，我可以将 URL 提供给用户，他们可以下载文件。不幸的是，我没有找到在 Firefox 中执行此操作的方法，这可能吗？

有没有其他方法可以用来在工作线程和主线程之间传输数据？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-12-02T05:35:02.683

Firefox/Opera/Chrome 目前都支持[一种称为 Transferable Objects 的网络工作者](https://html.spec.whatwg.org/multipage/workers.html)，它速度极快 - 也极易设置。在这里，我们向 ww（网络工作者）发送一个浏览器分配的数组，该数组由 ww 填充并返回给浏览器端。这是通过引用传递的，而不是副本：浏览器 <-> ww

在浏览器端：

```
var huge_array = new Float32Array(BIG_HUSKY_SIZE);

// worker.postMessage(huge_array.buffer);                      // old way
   worker.postMessage(huge_array.buffer, [huge_array.buffer]); // new Trans Obj 
```

然后在网络工作者内部：

```
self.onmessage = function(e) {

      var flt_arr = new Float32Array(e.data);

    //  typically you might want to populate flt_arr here

    //  now send data structure back to browser

    // self.postMessage(flt_arr.buffer);                    // old way
       self.postMessage(flt_arr.buffer, [flt_arr.buffer]); // new Trans Obj way
} 
```

通过简单地将数据对象放在方括号 [in here] 中，这会提示 js 使用 Transferable Object 模式。这也适用于来回发送包含多个变量的 javascript 对象，而不仅仅是类型化数组。

[引用](https://developers.google.com/web/updates/2011/12/Transferable-Objects-Lightning-Fast)：

> 可转移对象是不被复制的对象（例如使用结构化克隆之类的东西）。相反，数据从一个上下文传输到另一个上下文。调用上下文中的“版本”在转移到新上下文后不再可用。例如，当将一个 ArrayBuffer 从主应用程序传输到 Worker 时，主线程中的原始 ArrayBuffer 被清除并且不再可用。这极大地提高了向 Worker 发送数据的性能

[http://html5-demos.appspot.com/static/workers/transferables/index.html](http://html5-demos.appspot.com/static/workers/transferables/index.html) [https://html.spec.whatwg.org/multipage/workers.html](https://html.spec.whatwg.org/multipage/workers.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T23:11:43.087

根据这个[WebWorkers 教程](http://www.html5rocks.com/en/tutorials/file/filesystem-sync/?redirect_from_locale=es#toc-passing-data)，WebWorkers 现在支持传递 File 和 Blob 对象以及基本上可以与[结构化克隆算法](https://developer.mozilla.org/en/DOM/The_structured_clone_algorithm)一起使用的任何对象......或者至少 Chrome 做到了，可能是因为它实现了 FileSystem API。我不知道这是否是主要原因，但我希望不要，事实上，这个功能是在其他浏览器中实现的......能够在后台处理用户选择的文件是一件好事。

# buddypress - 使用会员用户id获取buddypress用户角色

> ID：12746058
> 
> 赞同：1
> 
> 时间：2012-10-05T12:14:36.447
> 
> 标签：buddypress

我想使用当前用户信息打印成员的用户角色，有没有人有类似下面的代码

```
$user_role=get_user_role($user_id); 
```

我是 buddypress 的新手 :)

# google-app-engine - 如何使用 Eclipse 的谷歌插件部署具有漂亮编译 HTML 的 GWT 应用程序

> ID：12746059
> 
> 赞同：5
> 
> 时间：2012-10-05T12:14:41.187
> 
> 标签：google-app-engine, gwt

我使用 google plugin for eclipse 来部署我的 GWT 应用程序，它一直运行良好，部署操作首先用“混淆”输出样式编译我的 GWT 项目，现在我希望它更改为“Pretty”，因为我必须调试客户端在飞行中，我只是看不到混淆的堆栈。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T13:08:13.633

编译器级别是 GWT 编译器选项的一部分：

```
-style Script output style: OBF[USCATED], PRETTY, or DETAILED (defaults to OBF) 
```

**如果您使用的是 Ant ：**

修改您的 build.xml 文件：

```
<arg value="-style"/>
<arg value="pretty"/> 
```

**如果您使用的是 Maven：**

修改你的 pom.xml 文件：

```
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>gwt-maven-plugin</artifactId>
<version>2.4.0</version>
<executions>
    <execution>
        <goals>
            <goal>compile</goal>
        </goals>
        </execution>
</executions>
<configuration>
    <style>PRETTY</style>
    <!-- OTHER STUFF -->
</configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T13:50:15.063

解决方法很简单，先打开“GWT compile”对话框，选择Detailed or Pretty，点击apply，关闭对话框，然后就会以Detailed 或 Pretty 风格部署。

# ruby-on-rails - 如何安装rails mac OSX Mountain Lion？

> ID：12746060
> 
> 赞同：0
> 
> 时间：2012-10-05T12:14:45.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3, macos, rvm, homebrew

> **可能重复：**
> [OS X Mountain Lion：gcc-4.2 没有这样的文件或目录](https://stackoverflow.com/questions/12256616/os-x-mountain-lion-gcc-4-2-no-such-file-or-directory)

我在我的 MAC 上安装导轨时遇到问题。

我正在自己学习 RoR，但我无法安装导轨。

这就是我所做的： 1 - 安装 XCode 并下载“命令行工具”

2 - 使用此代码安装 RVM：

```
curl -L https://get.rvm.io | bash -s stable 
```

3 - 安装 HomeBrew 和 libksba：

```
ruby <(curl -fsSkL raw.github.com/mxcl/homebrew/go)

brew install libksba 
```

4 - 使用 RVM 安装 Ruby（RVM 命令仅在我重新启动系统后才有效）：

```
rvm install 1.9.3 
```

5 - 默认定义为 Ruby 1.9.3：

```
rvm --default 1.9.3 
```

6 - 现在我正在尝试运行此代码：

```
gem install rails 
```

但它返回此错误：

> Guerreiro:~ rguerreiro$ gem install rails 构建原生扩展。这可能需要一段时间... 错误：安装 rails 时出错：错误：无法构建 gem 原生扩展。
> 
> ```
>  /Users/rguerreiro/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 
> ```
> 
> 创建 Makefile
> 
> make 编译 generator.c make: /usr/bin/gcc-4.2: No such file or directory make: *** [generator.o] Error 1
> 
> Gem 文件将继续安装在 /Users/rguerreiro/.rvm/gems/ruby-1.9.3-p194/gems/json-1.7.5 以供检查。结果记录到 /Users/rguerreiro/.rvm/gems/ruby-1.9.3-p194/gems/json-1.7.5/ext/json/ext/generator/gem_make.out

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:20:01.217

RVM supports multiple rubies of different versions and hence is preferred for RoR development. checkout the installation steps at [https://rvm.io/rvm/install/](https://rvm.io/rvm/install/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T22:51:31.633

你读了`rvm requirements`吗？它会告诉你如何获取 osx-gcc-installer - 安装它，它应该会进入下一步。

# java - 如何将结果集的行存储到 HASHMAP 中

> ID：12746063
> 
> 赞同：-1
> 
> 时间：2012-10-05T12:14:58.887
> 
> 标签：java, jdbc

有没有办法将 ResultSet 中包含的表的每一行存储到 HashMap 中（使每一行成为 HashMap 的条目）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T12:31:13.600

从您的结果集中获取一列（被认为是主键），并将其用于 Map 的 key 属性。您可以创建自定义类，将其余列作为其字段（简单 POJO），并将其用于 value 属性。一个例子：

```
public class MyRow {
    private String col1;
    private int col2;
    ...
    // the constructor
    public MyRow(String s, int i, ...) {
        this.col1 = s;
        this.col2 = i;
        ...
    }
} 
```

假设您将结果集中的 int 列（如果存在）作为映射的键，您将拥有如下所示的内容：

```
Map<Integer, MyRow> map = new HashMap<Integer, MyRow>(0);
ResultSet rs;
// get your result set from some db query or whatever
while(rs.next()) {
    MyRow mr = new MyRow(rs.getString(yourCol1Index), rs.getInt(yourCol2Index), ...);
    map.put(rs.getInt(yourKeyColumnIndex), mr);
}
// finaly release the resources
rs.close(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T12:25:02.087

你能做到吗？是的。您编写一个自定义类来表示一行的数据内容，然后读取这些行，为每一行创建一个实例，并使用适当的键将其放入 HashMap 中。

有没有更简单或更好的方法？不是我知道的。

# image - SSRS 表格单元格中的多个图像

> ID：12746068
> 
> 赞同：0
> 
> 时间：2012-10-05T12:15:04.287
> 
> 标签：image, reporting-services, ssrs-2008

我在 SQL Server Reporting Services 中使用表。我正在从数据库中获取数据表。数据表有三列。一列的图像名称用逗号分隔。

数据表：

```
Type  Status  Images
 1      1      one.jpg,two.jpg,three.jpg
 2      2      four.jpg,two.jpg,seven.jpg
 3      1      one.jpg,six.jpg 
```

我在 SSRS 表中显示这三行。如何按行单元格显示图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T02:40:38.413

将图像动态添加到 SSRS 报告并不像动态更改或隐藏图像那么容易。所以想到了两种方法。

如果图像的顺序不需要更改：将所有需要的图像放入一个单元格中。为每个设置可见性公式，以检查字段中是否列出了适当的图像。

```
=IIF(INSTR(Fields!Images.Value, "one.jpg") > 0, false, true) 
```

**如果订单需要匹配 SQL 表中的订单，则另一种方法：**

编写一些[自定义代码](http://msdn.microsoft.com/en-us/library/ms156028.aspx)将逗号分隔的字符串分开，返回元素 x。将一堆图像添加到相应的单元格中。然后设置每个的 Image 属性来调用你的自定义代码。例如，第一个的 Image 属性可能是：

```
=Code.GetImageName(Fields!Image.Value, 1) 
```

第二个是

```
=Code.GetImageName(Fields!Image.Value, 2) 
```

# matlab - dlmwrite 使用 withing 循环

> ID：12746074
> 
> 赞同：3
> 
> 时间：2012-10-05T12:15:21.703
> 
> 标签：matlab, loops, save

是否可以在循环中使用 dlmwrite ？我的代码有点长，但我被困在这里....

```
loop starts
{
file taken as input
some processing done over it
results saves in a variable "d"
**now i want to save the results of d to new text file**
display the results on Matlab
goes to next file until last file
} 
```

对于没有循环的单个文件，这很好用

```
 dlmwrite('test.txt',d); 
```

现在在循环中做什么以每次使用新文件名保存结果，因为每次新文件正在处理

喜欢

```
dlmwrite('file1.txt',d);
dlmwrite('file2.txt',d);
.
.
.
.
.
.
dlmwrite('lastfile.txt',d); 
```

我所有的结果都是二进制的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:32:57.203

您应该使用循环并枚举文件名：

```
 for i=1:numel(data)
         fileName = sprintf('file%d.txt');
         dlmwrite(fileName,data{i});
    end 
```

# microsoft-metro - Windows 应用商店在磁贴中本地化应用程序名称

> ID：12746075
> 
> 赞同：0
> 
> 时间：2012-10-05T12:15:26.780
> 
> 标签：microsoft-metro, windows-store

如何本地化 Windows 应用商店应用程序中的应用程序名称，以便其本地化名称出现在应用程序磁贴中？

根据本文设置显示名称不起作用。 [http://msdn.microsoft.com/en-us/library/windows/apps/hh454044.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh454044.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:28:43.383

如果您使用*字符串资源*，它可以使用该翻译：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh465254.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465254.aspx)

# css - 具有自动调整宽度的浮动 DIV

> ID：12746084
> 
> 赞同：1
> 
> 时间：2012-10-05T12:15:45.663
> 
> 标签：css, html, css-float, width

我目前有以下 HTML：

```
<div class="clearfix">
   <div style="width:33%;float:left">content</div>
   <div style="width:33%;float:left">content</div>
   <div style="width:33%;float:left">content</div>
</div> 
```

当一行上有 3 个 div 时，由于我为每个 div 指定了百分比宽度，它们都完全占据了父宽度的宽度。我想要实现的是让浮动 div 自动调整它们的宽度（即没有硬编码百分比宽度），具体取决于在线上有多少 div。例如，如果有 2 个 div，那么每个 div 将占据父级整个宽度的一半（即 50%）。如果有 3 个 div，则为 33%。

浮动 div 可以做到这一点吗？如果没有，我可以使用哪些其他方法来实现这种类型的流畅布局？我考虑让父级使用“表格”显示，内部 div 使用“表格单元格”显示，但随后父级停止占用 100% 的可用宽度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T12:28:08.233

您的表格方法对我来说效果很好，只需记住`float:left`从子 div 中删除，请参阅我的工作[**演示**](http://jsfiddle.net/gnel/DXGkb/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:44:17.633

你可以使用jQuery来实现样式的动态变化：

```
var divcnt = $(".clearfix div").length;
var widthInPercent = 100.0 / divcnt;
$(".clearfix div").each(function() {
    $(this).css("width", widthInPercent+"%")
}); 
```

有关示例，请参阅[此演示](http://jsfiddle.net/eXqFS/2/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:27:20.043

您可以尝试使用 css 之类的

```
display:box; 
```

前父 div。和

```
box-flex:1 
```

用于嵌套。有关示例，请参阅[此链接](http://www.html5rocks.com/en/tutorials/flexbox/quick/)。

# oracle - 通过先前的预言机连接

> ID：12746094
> 
> 赞同：2
> 
> 时间：2012-10-05T12:16:36.183
> 
> 标签：oracle, recursive-query, connect-by

我有一个包含分层元素的表

桌子 ：

```
AB
P1 -
P2 P1
C1 P2
C2 P2

```

B 是来自同一张表的外键

查询是：

```
SELECT 级别 niveau, A
从表父，表子
从一个 IN 开始
('P0','P1','C2')
由先前的 A = B 连接

```

结果

```
1个P1
1 P2
  2 C1
  2 C2
1个C2

```

为什么会出现“2 C2”？

尽管它不正确，但所需的结果是，我：

```
1个P1
1 P2
  2 C1
1个C2

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:23:28.467

`Connect by`先评估条件，`start with`然后再评估。在您的情况下，C2 既是 P2 的子节点，又是层次结构的根节点。这就是为什么它出现在您的结果中两次。

来自[Oracle 文档](http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries003.htm)

> Oracle 按如下方式处理分层查询：
> 
> 如果存在连接，则首先评估连接，无论连接是在 FROM 子句中指定还是使用 WHERE 子句谓词。
> 
> 评估 CONNECT BY 条件。
> 
> 评估任何剩余的 WHERE 子句谓词。
> 
> 然后，Oracle 使用来自这些评估的信息通过以下步骤形成层次结构：
> 
> Oracle 选择层次结构的根行——那些满足 START WITH 条件的行。
> 
> Oracle 选择每个根行的子行。每个子行必须满足关于其中一个根行的 CONNECT BY 条件的条件。
> 
> Oracle 选择连续几代的子行。Oracle 首先选择步骤 2 中返回的行的子代，然后选择这些子代的子代，以此类推。Oracle 总是通过评估与当前父行相关的 CONNECT BY 条件来选择子行。
> 
> 如果查询包含没有连接的 WHERE 子句，则 Oracle 会从层次结构中删除所有不满足 WHERE 子句条件的行。Oracle 对每一行单独评估此条件，而不是删除不满足条件的行的所有子行。
> 
> Oracle 按图 9-1 所示的顺序返回行。在图中，孩子出现在父母的下方。对于层次树的解释，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T06:19:23.903

将一个节点设置为根节点意味着它必须从一个节点开始然后它会为你工作我有同样的问题我希望这对你有帮助

```
SELECT level niveau, A
from table parent, table child
START WITH A IN ='P1'
CONNECT BY PRIOR  A= B 
```

# neon - 选择支持 VFP/Neon 的 Windows Compact 7 编译器

> ID：12746096
> 
> 赞同：0
> 
> 时间：2012-10-05T12:16:41.027
> 
> 标签：neon

> **可能重复：**
> [将 VFP/Neon 用于 Visual Studio 2008 应用程序](https://stackoverflow.com/questions/12639940/using-vfp-neon-for-a-visual-studio-2008-application)

我已经使用 Visual Studio 2008 的 Platform Builder 插件构建了一个 Windows Compact 7 OS 映像和 SDK。我知道 Visual Studio 2008 既不支持 VFP 也不支持 NEON。

那么，我应该使用哪个编译器为使用 VFP/Neon 协处理器的 Windows Compact 7 开发 C/C++ 应用程序？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:32:23.947

[根据 Visual Studio 中的ARM NEON Intrisics 支持，](https://stackoverflow.com/questions/11839780) Visual Studio 2012 应该可以工作。

我怀疑你除了坚持使用 MSVC 之外别无选择——即使在 x86 和 x86-64 上，Clang 和 GCC 都具有有限的 ABI 兼容性 MSVC，所以如果它们在 ARM 上兼容，我会感到非常惊讶。

# postgresql - How to create multiple sequences in one table?

> ID：12746106
> 
> 赞同：6
> 
> 时间：2012-10-05T12:17:11.590
> 
> 标签：postgresql, database-design, postgresql-9.1, database-sequence

I have a table "receipts". I have columns customer_id (who had the receipt) and receipt_number. The receipt_number should start on 1 for each customer and be a sequence. This means that customer_id and receipt_number will be unique. How can I elegantly do this. Can I use the built-in sequeance functionality with CREATE SEQUENCE or similar? It seems like I would have to create a sequence for each customer, which of course is not an elegant solution.

EDIT: There must be a thread-safe and idiot-secure way to do this. It should be quite a simple/common need.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:31:03.730

SEQUENCE does not guarantee there are no gaps. For example, one transaction might generate a new number and then abort (due to a bug or a power failure or whatever...). The next transaction would then blindly get the next number, not the one that was "lost".

It would be best if your client application did not depend on "no gaps" assumption in the firs place. You could, however, minimize gaps like this:

1.  `SELECT MAX(receipt_number) FROM receipts WHERE customer_id = :ci`
2.  `INSERT INTO receipts(customer_id, receipt_number) VALUES (:ci, aboveresult+1)`, or just insert 1 if ***step 1*** returned NULL.
3.  If ***step 2*** returned a PK violation^*, retry from the beginning.

^* *Because a concurrent transaction has gone through the same process and committed.*

As long as rows are just added and not deleted, this should prevent any gaps, even in a concurrent environment.

* * *

BTW, you can "condense" ***steps 1 and 2*** like this:

```
INSERT INTO receipts (customer_id, receipt_number)
SELECT :ci, COALESCE(MAX(receipt_number), 0) + 1
FROM receipts
WHERE customer_id = :ci; 
```

[[SQL Fiddle]](http://sqlfiddle.com/#!1/d366f/3)

The index underneath the PK {customer_id, receipt_number} should ensure that the SELECT part of this query is satisfied efficiently.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:50:12.810

![enter image description here](../Images/e49ba412e7d859f9e13f4fbfb4f1bf46.png)

```
-- next CustomerReceiptNo
select coalesce(max(CustomerReceiptNo), 0) + 1
from  Receipt
where CustomerId = specific_customer_id; 
```

This is not thread-safe, so make sure to implement error handling if two separate threads try to create a new receipt for a given customer at the same time.

* * *

**EDIT**

There is more to **thread-safety** than just avoiding race-conditions. Suppose there are two separate threads creating a new receipt for the same customer at the same time. Should it happen? Is this normal, a bug, or security breach? Suppose a bank where two tellers are creating a new record for the same customer at the same time -- something is very wrong. If this is supposed to happen, you can use locks; if not, then some kind of error is in order.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T12:51:27.030

Why do receipt numbers begin with 1 for each customer? Is that part of the defined requirements?

The simplest way to get this done is to have the program that generates new receipts query the database for max(ReceiptNumber) where CustomerId = CurrentCustomerId and then add 1.

currentCustomerId is a program variable not a database value.

This is a little inelegant in that involves an extra search of the table. You will need to create your indexes carefully, in order to get one of the indexes to answer the question without a full table scan.

An alternative that's a little quicker at insert time is to create an extra column, called MaxReeceiptNumber, in the customer table. Increment that whennever you want to insert a new receipt.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T13:07:13.550

You could use a trigger like this to update your column:

Table definition with unique constraint on customer_id, receipt_number:

```
CREATE TABLE receipts (id serial primary key, customer_id bigint, receipt_number bigint default 1);
CREATE UNIQUE INDEX receipts_idx ON receipts(customer_id, receipt_number); 
```

Function to check for max receipt_number for the client, or 1 if no previous receipts

```
CREATE OR REPLACE FUNCTION get_receipt_number()  RETURNS TRIGGER AS $receipts$
  BEGIN
    -- This lock will block other transactions from doing anything to table until
    -- committed. This may not offer the best performance, but is threadsafe.
    LOCK TABLE receipts IN ACCESS EXCLUSIVE MODE;
    NEW.receipt_number = (SELECT CASE WHEN max(receipt_number) IS NULL THEN 1 ELSE max(receipt_number) + 1 END FROM receipts WHERE customer_id = new.customer_id);
    RETURN NEW;
  END;
$receipts$ LANGUAGE 'plpgsql'; 
```

Trigger to fire the function on each row insert:

```
CREATE TRIGGER rcpt_trigger 
   BEFORE INSERT ON receipts 
   FOR EACH ROW 
   EXECUTE PROCEDURE get_receipt_number(); 
```

Then, executing the following:

```
db=> insert into receipts (customer_id) VALUES (1);
INSERT 0 1
db=> insert into receipts (customer_id) VALUES (1);
INSERT 0 1
db=> insert into receipts (customer_id) VALUES (2);
INSERT 0 1
db=> insert into receipts (customer_id) VALUES (2);
INSERT 0 1
db=> insert into receipts (customer_id) VALUES (2); 
```

should yield:

```
 id | customer_id | receipt_number 
 ----+-------------+----------------  
  14 |           1 |              1  
  15 |           1 |              2  
  16 |           2 |              1 
  17 |           2 |              2  
  18 |           2 |              3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-25T16:16:04.663

I would like to propose my solution to this problem - use +1 column on the customer table to store latest_receipt_id, and use incremental function next_receipt_id( customer_id ):

```
ALTER TABLE customers ADD COLUMN latest_receipt_id integer DEFAULT 1;

-- ensure customer_id, receipt_number pair uniqueness
CREATE UNIQUE INDEX customer_receipt_ids_pair_uniq_index ON receipts USING btree (customer_id, receipt_number);

-- sequence-like function for the next receipt id, 
-- will increment it on every execution
CREATE FUNCTION next_receipt_id( for_customer_id integer ) RETURNS integer
LANGUAGE plpgsql AS 
$$
DECLARE 
  result integer;
BEGIN  
  UPDATE customers SET latest_receipt_id = latest_receipt_id + 1 WHERE id = for_customer_id RETURNING latest_receipt_id INTO result;
  RETURN result;
END;
$$; 
```

Then you can either use it in the receipt INSERT trigger:

```
-- somewhere inside trigger function, triggered on receipt INSERT 
NEW.receipt_number := next_receipt_id( NEW.customer_id ); 
```

OR inside your ORM (pseudocode):

```
# it does not matter when you assign the receipt_number, 
# it could be even in standalone update execution, just do it only once! 
receipt.update( 'receipt_number = next_receipt_id(customer_id)' ) 
```

Disregarding of any concurrency on inserts you will always have sequential ids.

Cheers!

# c# - 通过 DataGrid 保留负零

> ID：12746108
> 
> 赞同：0
> 
> 时间：2012-10-05T12:17:17.787
> 
> 标签：c#, .net, floating-point, zero, binaryreader

我正在使用 BinaryReader 从文件中读取一些浮点数并将它们放入 DataGrid 中。我使用在 DataGrid 中获得的数据将文件保存回来，没有进行任何更改，并且在对原始文件和保存的文件进行二进制比较时，我注意到任何负零（小端序中的 0x00000080）都被转换为正零 (0x00000000)。我知道它可能不会受到伤害，但也许这样保存负零是有原因的，所以我问是否有办法处理负零。

~~我是否必须覆盖 ReadSingle 和 ReadDouble 并自己进行转换？~~有没有办法确保浮点数即使在使用 typeof(float) 放入 DataGridColumn 之后仍保持负零，然后使用 BinaryWriter 正确保存回结果文件中？

# c# - 我可以帮助修复一个 vb XNA 结构来处理位置、颜色和正常。里面的例子

> ID：12746109
> 
> 赞同：1
> 
> 时间：2012-10-05T12:17:22.470
> 
> 标签：c#, vb.net, struct, xna

这更像是将一些 c# 文档和语法翻译成视觉基本内容的问题。我正在用 Visual basic 编写，并使用 4.0 XNA 刷新平台。

我在[Riemers.net](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series1/Lighting_basics.php)上关注 ac# 教程，但在重现他处理顶点、位置、颜色和法线的结构时遇到了一些困难。我已经能够使用预建的 VertexPositionColor & .VertexDeclaration 很好地运行程序。

这个问题的 C# 代码是这样的：

```
 public struct VertexPositionColorNormal
 {            
     public Vector3 Position;
     public Color Color;
     public Vector3 Normal;

     public readonly static VertexDeclaration VertexDeclaration = new VertexDeclaration
     (
         new VertexElement(0, VertexElementFormat.Vector3, VertexElementUsage.Position, 0),
         new VertexElement(sizeof(float) * 3, VertexElementFormat.Color, VertexElementUsage.Color, 0),
         new VertexElement(sizeof(float) * 3 + 4, VertexElementFormat.Vector3, VertexElementUsage.Normal, 0)
     );
 } 
```

这是我的转换尝试

```
Public Structure VertexPositionColorNormal

Public Position As Vector3
Public Color As Color
Public Normal As Vector3

Public Shared SizeInBytes As Integer = 7 * 4

Public Shared ReadOnly VertexDeclaration As VertexElement() = New VertexElement() _
{New VertexElement(0, VertexElementFormat.Vector3, VertexElementUsage.Position, 0), _
New VertexElement(4 * 3, VertexElementFormat.Color, VertexElementUsage.Color, 0), _
New VertexElement(4 * 4, VertexElementFormat.Vector3, VertexElementUsage.Normal,                 0)}

End Structure 
```

虽然我的尝试在语法上似乎是正确的，但它在这一行产生了一个错误：

```
GraphicsDevice.DrawUserIndexedPrimitives(PrimitiveType.TriangleList, vertices, 0, vertices.Length, indices, 0, indices.Length / 3, VertexPositionColorNormal.VertexDeclaration) 
```

并给我以下错误描述：

> 错误 18
> 重载解析失败，因为无法使用这些参数调用可访问的“DrawUserIndexedPrimitives”：
> 
> 'Public Sub DrawUserIndexedPrimitives(Of VertexPositionColorNormal)(primitiveType As Microsoft.Xna.Framework.Graphics.PrimitiveType, vertexData() As VertexPositionColorNormal, vertexOffset As Integer, numVertices As Integer, indexData() As Short, indexOffset As Integer, primitiveCount As Integer, vertexDeclaration As Microsoft.Xna.Framework.Graphics.VertexDeclaration)'：**“整数的一维数组”类型的值无法转换为“Short 的一维数组”，因为“Integer”不是从“Short”派生的。**
> 
> 'Public Sub DrawUserIndexedPrimitives(Of VertexPositionColorNormal)(primitiveType As Microsoft.Xna.Framework.Graphics.PrimitiveType, vertexData() As VertexPositionColorNormal, vertexOffset As Integer, numVertices As Integer, indexData() As Short, indexOffset As Integer, primitiveCount As Integer, vertexDeclaration As Microsoft.Xna.Framework.Graphics.VertexDeclaration)'：**“Microsoft.Xna.Framework.Graphics.VertexElement 的一维数组”类型的值无法转换为“Microsoft.Xna.Framework.Graphics.VertexDeclaration”。**
> 
> 'Public Sub DrawUserIndexedPrimitives(Of VertexPositionColorNormal)(primitiveType As Microsoft.Xna.Framework.Graphics.PrimitiveType, vertexData() As VertexPositionColorNormal, vertexOffset As Integer, numVertices As Integer, indexData() As Integer, indexOffset As Integer, primitiveCount As Integer, vertexDeclaration As Microsoft.Xna.Framework.Graphics.VertexDeclaration)'：**“Microsoft.Xna.Framework.Graphics.VertexElement 的一维数组”类型的值无法转换为“Microsoft.Xna.Framework.Graphics.VertexDeclaration”。**
> 
> C:\Users\Xheis-Overlord\Documents\Visual Studio 2010\Projects\Test_Terrains2\Test_Terrains2\Test_Terrains2\Game1.vb 416 13 Test_Terrains2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:50:48.413

我不精通VB，但根据错误消息，我认为这条线有部分错误：

```
Public Shared ReadOnly VertexDeclaration As VertexElement() = New VertexElement() _ 
```

在您包含的 C# 中，`VertexDeclaration`对象的类型实际上是`VertexDeclaration`. 但是，在您的 VB 中，您将其视为类型`VertexElement`数组。

还有，什么是`indices`？

[这是关于DrawUserIndexPrimitives](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.graphicsdevice.drawuserindexedprimitives.aspx)的 MSDN 文章的链接以供参考。此方法有四个重载，它们都非常相似。仔细检查您的参数类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:56:42.443

原件不是数组，但在您的转换中它是一个数组。尝试这个：

```
 Public Structure VertexPositionColorNormal
     Public Position As Vector3
     Public Color As Color
     Public Normal As Vector3

     Public ReadOnly Shared VertexDeclaration As New VertexDeclaration( _
        New VertexElement(0, VertexElementFormat.Vector3, VertexElementUsage.Position, 0), _
        New VertexElement(Len(New Single) * 3, VertexElementFormat.Color, VertexElementUsage.Color, 0), _
        New VertexElement(Len(New Single) * 3 + 4, VertexElementFormat.Vector3, VertexElementUsage.Normal, 0))
 End Structure 
```

# grails - applicationContext中的Spring-security AuthenticationEntryPoint

> ID：12746112
> 
> 赞同：1
> 
> 时间：2012-10-05T12:17:31.433
> 
> 标签：grails, spring-security

基本上我得到一个基于此的错误：

```
Caused by: java.lang.IllegalStateException: Cannot convert value of type [example.TestAuthFilterEntryPoint] to required type [org.springframework.security.web.AuthenticationEntryPoint] for property 'authenticationEntryPoint': no matching editors or conversion strategy found
... 42 more 
```

基本上我只将这个类实现为 AuthenticationEntryPoint

```
import org.springframework.security.ui.AuthenticationEntryPoint;
import org.springframework.security.AuthenticationException;
public class TestAuthFilterEntryPoint implements AuthenticationEntryPoint,
    InitializingBean {... 
```

在如何正确“转换”它方面，我是否遗漏了一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:37:17.610

你应该实现的接口`org.springframework.security.web`在 Spring Security >= 3.0 的包中（就像你在错误消息中一样），所以它应该是：

```
import org.springframework.security.web.AuthenticationEntryPoint;
import org.springframework.security.AuthenticationException;
public class TestAuthFilterEntryPoint implements AuthenticationEntryPoint,
    InitializingBean {
  // ... 
```

# javascript - callback for player.sendEvent() in jwplayer

> ID：12746117
> 
> 赞同：0
> 
> 时间：2012-10-05T12:18:01.817
> 
> 标签：javascript, jwplayer

Is there any way to add callback function for player.sendEvent() in jwplayer.

```
function timeseek(obj){
        seek_position = obj.position ;
        player.sendEvent('PLAY',false);//pause video
        updateT(logid,seek_position,1);//update db with current paused value
        player.sendEvent('SEEK ',seek_position);//seek to position
        player.sendEvent('PLAY',true);//Play video
            } 
```

i want to do actions in above function one after the other.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:45:49.717

我不是 JWPlayer 专家，但是，如果我正确理解了这个问题，并且我对 sendEvent 所做的假设是正确的，那么我会尝试以下操作：

```
player.onPlay(function(e) {
  // do something...
});

player.onSeek(function(e) {
   // do something
}); 
```

因为 JWPlayer 是事件驱动的，你可以监听事件和状态变化，当你关心的事情发生时，你会在你的事件处理程序中做出反应。如果你确切地解释了在特定事件之后你想做什么，我可以提供一个更具体的例子。

有关更多信息，请参阅[JWPlayer 事件文档](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/16024/listening-for-player-events)。

# javascript - RequireJS 在 IE9 中不起作用

> ID：12746119
> 
> 赞同：6
> 
> 时间：2012-10-05T12:18:06.180
> 
> 标签：javascript, internet-explorer, asynchronous, internet-explorer-9, requirejs

我遇到了一种相当奇怪的行为——我的 RequireJS 模块似乎根本没有在 IE9 下初始化和运行：

```
<head>
    ...
    <script data-main="/static/js/main" src="/static/js/libs/require.js"></script> // Seems to be not running at all.
</head> 
```

但是，每当我**启动 IE9 的开发人员工具并重新加载页面**时，这些模块都会像在 Firefox/Chrome/Safari/etc 中一样正常运行。在 IE9 中清理浏览器缓存并关闭开发人员工具将导致 JavaScript 不再完全运行。

另一种启动 RequireJS 模块执行的方法是在它之前添加一个同步脚本调用：

```
<head>
    ...
    <script type="text/javascript" src="https://getfirebug.com/firebug-lite.js"></script> // Add any synchronous script calling here and the module below will execute fine.
    <script data-main="/static/js/main" src="/static/js/libs/require.js"></script>
</head> 
```

看起来奇怪行为的原因可能是：

*   RequireJS 的异步加载出了点问题
*   出现问题导致脚本在 $.ready() 之前启动

不过，为什么开发人员工具可以启动执行确实让我感到困惑。

寻找对该现象的完整解释以及如何解决它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T07:37:57.307

找到了答案：当开发工具未打开时在 IE9 中，但您永远不会看到此错误，因为该工具的控制台需要重新加载页面才能开始工作`console`。`undefined`

更多细节在这里：[https ://github.com/jrburke/requirejs/issues/488](https://github.com/jrburke/requirejs/issues/488)

# ios - pushViewController 不起作用

> ID：12746120
> 
> 赞同：0
> 
> 时间：2012-10-05T12:18:23.307
> 
> 标签：ios, uinavigationcontroller, appdelegate

我在 appDelegate 中设置了 navigationController，但现在我在另一个 ViewController 中回忆它，它不起作用。这是我的代码：

在 appDelegate.h

```
 #import <UIKit/UIKit.h>

  @class RootViewController;

  @interface AppDelegate : UIResponder <UIApplicationDelegate>

  @property (strong, nonatomic) UIWindow *window;

  @property (strong, nonatomic) RootViewController *viewController;

  @property (strong, nonatomic) UINavigationController * navigationController;

  @end 
```

在 appDelegate.m

```
 @implementation AppDelegate

  - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{

      RootViewController * rootMenu;
     self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    rootMenu = [[RootViewController alloc] initWithNibName:@"RootViewController_iPhone" bundle:nil];
    } else {
    rootMenu = [[RootViewController alloc] initWithNibName:@"RootViewController_iPad" bundle:nil];
}

     self.viewController = rootMenu;

     self.navigationController =[[UINavigationController alloc]initWithRootViewController:rootMenu];

     self.window.rootViewController = self.viewController;

    [self.window makeKeyAndVisible];
     return YES;
    } 
```

在 rootViewController.h

```
 #import <UIKit/UIKit.h>

    @interface RootViewController : UIViewController <UIGestureRecognizerDelegate>{

     }

    @property (nonatomic, retain) UIImageView * bigImageView;
    @property (nonatomic, assign)BOOL fromRootViewController;

     - (void)handleTap:(UITapGestureRecognizer *)recognizer;

    @end 
```

在 RootViewController.m

```
 - (void)handleTap:(UITapGestureRecognizer *)recognizer{

          if (recognizer.state == UIGestureRecognizerStateEnded)     {
          MenuViewController * menu = [[MenuViewController alloc]initWithNibName:@"MenuViewController" bundle:nil];

          self.fromRootViewController = YES;

          [self.navigationController pushViewController:menu animated:YES];

     }
   } 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:21:26.583

在 AppDelegate 中用 2 替换下面的第 1 行

```
1)self.window.rootViewController = self.viewController;

2)self.window.rootViewController = self.navigationController; 
```

它会起作用的

> 原因是您的应用程序中没有 navigationController

# python - 如何从 Python 启动命令窗口

> ID：12746130
> 
> 赞同：4
> 
> 时间：2012-10-05T12:19:00.280
> 
> 标签：python, windows, console, subprocess, popen

我想在 Windows 上使用 Python 2.6 来启动几个**单独**的命令窗口，每个命令窗口都运行自己的 Python 脚本。目的是：这些是客户端，我试图用来自多个准独立客户端的请求加载服务器。

我不需要在运行期间或运行后与客户端通信，但我确实需要向每个客户端发送不同的命令行参数，并且我希望每个客户端的输出在其自己的“控制台”中滚动。

在 DOS 命令行中，“开始”命令执行我想要的操作。我可以：

```
start perf_test.py 2 
```

或者

```
start cmd /c perf_test.py 3 
```

或者

```
start cmd /c python perf_test.py 4 
```

（如果您为 *.py 文件正确设置了“文件关联”，这些对您有用。如果您需要帮助，还有其他线程。或者，使用 python exe 和/或脚本的完整路径。）

我的挑战是：如何从 Python 中获得相同的效果？

使用`subprocess`库，我尝试过这样的变体：

```
from subprocess import *
p = Popen(["perf_test.py", "4"], shell=True, stdin=PIPE) 
```

但即使使用`shell=True`，输出也会混合在我已经运行的窗口中。添加`stdout=PIPE`会停止，但我必须阅读`p.stdout`或使用`p.communicate()`. 将“cmd”添加到 Popen 大致相同：

```
p = Popen(["cmd", "/c", "perf_test.py", "4"], shell=True, stdin=PIPE) 
```

以上都没有达到我想要的效果，即：“**为这个脚本弹出一个新的、不同的窗口，并在它自己的控制台中观察它的输出滚动**”（因为我真的想运行这些客户端中的 N 个在平行下）。

我求助的另一件事也*几乎*奏效了。

```
import os
os.startfile("perf_test.py") 
```

这会立即返回，并弹出一个实际的 dosbox。耶！成功！也就是说，直到我尝试添加一个论点。这失败了：

```
os.startfile("perf_test.py 5") 
```

出现错误“系统找不到指定的文件”......因为它正在将“[SPACE] 5”添加到文件名中。（参数的目的是每个“perf_test”都需要有一个分配的 ID，以便它们作为不同的实例访问服务器。）

我考虑过的其他方法，由于各种原因真的不喜欢：

*   在自己的线程中运行每个“perf_test”。（但我真的很想在自己的控制台中看到每个输出。）
*   用 Tk 制作我自己的伪控制台。（图我会在那里遇到不同的线程问题。）
*   使用“start perf_test.py 1”、“start perf_test.py 2”等行动态写入 .BAT 文件，然后使用`Popen`或启动该 .BAT 文件`startfile`。

我希望最后一个会起作用......我想这是我最后的手段，如果我不能直接使用 Python 脚本来完成它。

感谢您的任何意见/见解！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T13:39:08.203

您可以使用：

```
import os
os.system("start python perf_test.py 5") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-06T09:50:37.987

那么我有同样的问题。用这种方法解决了。你应该试试：

```
import os
os.system('chrome.exe') # open Chrome (.exe  file) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-30T11:08:08.420

**代码 ：**

```
user = raw_input("welcome to cmd: ")
def print_perms(chars, minlen, maxlen): 
    for n in range(minlen, maxlen+1): 
        for perm in itertools.product(chars, repeat=n): 
            print(''.join(perm)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-18T04:03:58.503

```
import os
os.system("start cmd") 
```

# ajax - AJAX Call Not Working with Struts2 Spring Plugin

> ID：12746132
> 
> 赞同：1
> 
> 时间：2012-10-05T12:19:12.877
> 
> 标签：ajax, spring, struts2, struts2-jquery, struts2-json-plugin

I have a project with `Struts2 + Struts2 JQUery + JQ Grid + Struts2` JSON Tags. The project works perfectly and i am able to do most of the JQuery features with AJAX from tabbed panel to Grid. I have multiple struts config file and they are all called from `sj: a` tags.

But the problem starts when I add the `Spring Plugin`.

1.  The Submit returns `null` values to the Action Class.
2.  I have a Tabbed Panel which is created from 'struts-jquery-tags' and on `onload` calls the action class. If I use Auto wired on the Constructor in the action class only that is getting called and the action method is not getting called at all. As a result the jsp is not getting rendered.

If I remove the Spring plugin, everything works just fine. I am trying hard to overcome this issue but I have no success.

I have `Struts 2.3.3` / `Spring 3.0.5` / `aspectweaver` / `Struts2Jquery 3.3.3` jars.

Can someone advice ? I have followed `jgeppert` examples in showcase app.

# javascript - 在 JavaScript 中设置 disabled=true 后未调用 JSF h:commandButton 的操作

> ID：12746137
> 
> 赞同：1
> 
> 时间：2012-10-05T12:19:24.280
> 
> 标签：javascript, jsf, commandbutton, disabled-control

谁能解释以下行为？在 JavaScript 中禁用命令按钮时，永远不会执行 action 方法。

```
<h:form>
    <h:commandButton value="test" action="#{bean.test}" onclick="disabled=true" />
</h:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:25:31.067

当 HTML 表单元素被禁用时，它的`name=value`对将不会作为 HTTP 请求参数发送，因此 JSF 永远不会在请求参数映射中找到它。对于命令按钮，这反过来意味着永远不会调用该操作。

您需要在提交表单后*不久禁用该按钮。*使用属性的建议`disabled`没有任何意义，因为为时已晚。提交表单时不设置，仅在响应返回时设置。

为了在*这种特殊*情况下实现您的特定功能要求，您可以使用 JS 来使禁用超时。

```
<h:commandButton ... onclick="setTimeout('document.getElementById(\'' + this.id + '\').disabled=true;', 50);" /> 
```

然而，更好的是使用`<f:ajax onevent>`

### 也可以看看：

*   [用于防止双重提交的纯 Java/JSF 实现](https://stackoverflow.com/questions/23285530/pure-java-jsf-implementation-for-double-submit-prevention)
*   [在执行操作之前重新加载页面的某些部分？](https://stackoverflow.com/questions/12744614/reload-parts-of-a-page-before-action-is-executed/12744647#12744647)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T12:26:29.030

尝试使用组件的“已禁用”属性从 BackBean 禁用按钮

```
disabled="#{!(bean.disable)}" 
```

此选项将在渲染组件时起作用，在发送信息之后

# java - 来自未完全填充的字符数组的字符串

> ID：12746143
> 
> 赞同：3
> 
> 时间：2012-10-05T12:20:04.907
> 
> 标签：java, string, arrays

显然，下面的代码给出了一个相当奇怪的结果。

```
char[] data = new char[5];
data[0] = 'a';
data[1] = 'b';
data[2] = 'c';

out.println("'" + new String(data) + "'"); 
```

> 'abc□□'

有没有办法从字符数组创建一个字符串，考虑到整个数组可能没有被字符填充到末尾？

* * *

**问题的原因：**当使用该[`Reader.read(char[])`](http://docs.oracle.com/javase/6/docs/api/java/io/Reader.html#read%28char%5b%5d%29)方法时，你给它一个字符数组来填充，我只能假设它不会被完全填充，除非你很幸运，当你到达流的末尾时。所以想知道如何将其转换为可以附加到`StringBuffer`. 现在意识到虽然该`read`方法实际上返回了读取的字节数，但我假设它可以与 结合使用`StringBuffer.append(char[], int, int)`，这使得我的问题没有实际意义。但是，仍然是我很好奇的东西，而不是我通过谷歌搜索找到的东西，所以我想这个问题很高兴在这里得到答案；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:22:11.007

`String`has 构造函数String [(char[] value, int offset, int count)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28char%5b%5d,%20int,%20int%29)接受一个加长`char`（和偏移）的数组：

```
String s = new String(data, 0, 3); 
```

假设解决方案中没有嵌入的空字符（前导空字符被认为是嵌入的空字符），`data`则需要找到第一个空字符以确定 in 的`char`数量`data`：

```
int length = 0;
while (length < data.length && 0 != data[length]) length++;
String s = new String(data, 0, length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:29:11.447

我想不出一个不起作用的健壮方法如下：

```
char[] data = new char[5];
data[0] = 'a';
data[1] = 'b';
data[2] = 'c';

StringBuilder builder = new StringBuilder();
for (char c : data) {
  if (c != 0x00) {
    builder.append(c);
  }
}

System.out.println(builder.toString()); 
```

这专门省略了值等于默认值 ( `0x00`) 的字符。请注意，这远非完美，因为`0x00`它是合法的字符。我建议您重新评估导致您达到这一点的设计决策。

我不喜欢假设`((char) 0x00)`是空白并且可以修剪的解决方案。即使它有效。注意：

```
System.out.println(' ' == ((char) 0x00)); 
```

将打印`false`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:23:06.827

是的，有使用带有偏移量和长度的字符串[构造函数。](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28char%5b%5d,%20int,%20int%29)

```
 String(char[] value, int offset, int count) 

 new String(data,0,3) 
```

现在，如果不知道确切的值，那么您可以编写实用程序方法来更正数组。或用于`trim()`修剪尾随字符。

```
 public static char[] getNotMessedUpArray(char[] messedUp) {

    int messedUpIndex = messedUp.length;
    for (int i = 0; i < messedUp.length; i++) {
        if (messedUp[i] <= ' ') {
            System.arraycopy(messedUp, i + 1, messedUp, i, messedUp.length
                    - i - 1);
        }
    }
    for (int i = 0; i < messedUp.length; i++) {
        if (messedUp[i] <= ' ') {
            messedUpIndex--;
        }
    }
    char[] notMessedUp = new char[messedUpIndex];
    System.arraycopy(messedUp, 0, notMessedUp, 0, messedUpIndex);
    return notMessedUp;

} 
```

# asp.net - More code or more web pages?

> ID：12746147
> 
> 赞同：0
> 
> 时间：2012-10-05T12:20:11.527
> 
> 标签：asp.net

I'm building a simple ASP.NET application that consists of four pages: Sign Up, Log In, Customer Page, Admin Page.
Upon logging in to the system there is a code about 30 lines long that sets some session parameters and does other important stuff.
**Note: I can't run this code in the Log In page**

So, What I'm ending up with is this bulk of code duplicated at Customer Page and Admin Page. One Solution I was thinking about is creating a fifth page called LoggingGateWay. After successful logging in the LogIn page, users will be redirected to this page. It will run the bulk of code, and then redirect the users to one of the secured pages. The question is whether loading another page and having more transportation in this case is better than the duplication of code or not?
Thanks ahead for the answers! :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:23:45.067

如果这是必须在应用程序的每个“内部”页面上运行的代码，并且您使用的是 Webforms 而不是 MVC，请创建一个包含所需代码的母版页，然后将该母版页用于您的每个内部页面页。

`Page`另一种选择是为所有要使用的内部页面创建一个基础，该基础`System.Web.UI.Page`继承自您的自定义页面，并使您的内部页面继承自您的自定义页面，`Page`而不是默认页面。

# python - SUDS client gets urlopen error [Errno 11001] getaddrinfo failed (Python3.2 + WCF WS)

> ID：12746149
> 
> 赞同：0
> 
> 时间：2012-10-05T12:20:24.350
> 
> 标签：python, wcf, web-services, suds

I have a problem with connecting to web service with python3.2 (SUDS library 0.4.1). When I connect to the non-wcf webservice everything works fine. I create the object Client class like this:

```
Client("http://xxxxxx.xx/XXX_2.0/RequestsService.asmx?wsdl") 
```

But... I want to do exactly the same for wcf service:

```
Client("http://xxxxxx.xx/XXX_2.0_WCF/WcfJSONRequestsService.svc?wsdl") 
```

I get the following error:

**Traceback:**

```
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "C:\Python32\lib\site-packages\suds_jurko-0.4.1.jurko.5._development_-py3.2.egg\suds\client.py", line 112, in __init__
    self.wsdl = reader.open(url)
  File "C:\Python32\lib\site-packages\suds_jurko-0.4.1.jurko.5._development_-py3.2.egg\suds\reader.py", line 152, in open
    d = self.fn(url, self.options)
  File "C:\Python32\lib\site-packages\suds_jurko-0.4.1.jurko.5._development_-py3.2.egg\suds\wsdl.py", line 157, in __init__
    self.build_schema()
  File "C:\Python32\lib\site-packages\suds_jurko-0.4.1.jurko.5._development_-py3.2.egg\suds\wsdl.py", line 248, in build_schema
    self.schema = container.load(self.options)
  File "C:\Python32\lib\site-packages\suds_jurko-0.4.1.jurko.5._development_-py3.2.egg\suds\xsd\schema.py", line 93, in load
    child.open_imports(options)
  File "C:\Python32\lib\site-packages\suds_jurko-0.4.1.jurko.5._development_-py3.2.egg\suds\xsd\schema.py", line 302, in open_imports
    imported = imp.open(options)
  File "C:\Python32\lib\site-packages\suds_jurko-0.4.1.jurko.5._development_-py3.2.egg\suds\xsd\sxbasic.py", line 570, in open
    result = self.download(options)
  File "C:\Python32\lib\site-packages\suds_jurko-0.4.1.jurko.5._development_-py3.2.egg\suds\xsd\sxbasic.py", line 588, in download
    d = reader.open(url)
  File "C:\Python32\lib\site-packages\suds_jurko-0.4.1.jurko.5._development_-py3.2.egg\suds\reader.py", line 79, in open
    d = self.download(url)
  File "C:\Python32\lib\site-packages\suds_jurko-0.4.1.jurko.5._development_-py3.2.egg\suds\reader.py", line 95, in download
    fp = self.options.transport.open(Request(url))
  File "C:\Python32\lib\site-packages\suds_jurko-0.4.1.jurko.5._development_-py3.2.egg\suds\transport\https.py", line 60, in open
    return  HttpTransport.open(self, request)
  File "C:\Python32\lib\site-packages\suds_jurko-0.4.1.jurko.5._development_-py3.2.egg\suds\transport\http.py", line 63, in open
    return self.u2open(u2request)
  File "C:\Python32\lib\site-packages\suds_jurko-0.4.1.jurko.5._development_-py3.2.egg\suds\transport\http.py", line 121, in u2open
    return url.open(u2request, timeout=tm)
  File "C:\Python32\lib\urllib\request.py", line 369, in open
    response = self._open(req, data)
  File "C:\Python32\lib\urllib\request.py", line 387, in _open
    '_open', req)
  File "C:\Python32\lib\urllib\request.py", line 347, in _call_chain
    result = func(*args)
  File "C:\Python32\lib\urllib\request.py", line 1156, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Python32\lib\urllib\request.py", line 1139, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [Errno 11001] getaddrinfo failed> 
```

Has anyone encountered a similar problem?

# passbook - PKPassLibrary doesn't work on device

> ID：12746152
> 
> 赞同：1
> 
> 时间：2012-10-05T12:20:26.883
> 
> 标签：passbook

I'm working on passbook usage and everything seems to be OK on device, but, even if I install a provisioning profile with passbook activated, nothing is detected under entilement part in XCode 4.5.

Is there a format to respect in pass type identifier to be able to access a pass in the application, or is there another way that I ignore.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-28T10:00:06.627

您只能访问与您在应用程序中使用的通行证标识符相同的通行证。

```
PKPassLibrary passes 
```

此方法仅获取具有相同通行证类型 ID 的通行证。

每个信息都与 PassBook 相关：[https ://developer.apple.com/passbook/](https://developer.apple.com/passbook/)

# php - PHP preg_replace 第一个单词（包括特殊字符）

> ID：12746153
> 
> 赞同：0
> 
> 时间：2012-10-05T12:20:27.977
> 
> 标签：php, preg-replace

我有一个字符串，看起来像这样 "1-1-2012 Something, Something"

我如何包装日期部分，以便结果最终为`<span>1-1-2012</span> Something, Something`

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T12:21:57.080

你可以使用这样的东西：

```
list($a,$b) = explode(" ",$input,2);
$out = "<span>".$a."</span> ".$b; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:26:12.743

你可以试试

```
$str = "11-10-2012 Something, Something";
$str = preg_replace("/\d{1,2}-\d{1,2}-\d{4}/", '<span>$0</span>', $str);
var_dump($str); 
```

输出

```
 string '<span>4-10-2012</span> Something, Something' (length=43) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T12:27:02.587

```
preg_replace( '~\d{1,2}-\d{1,2}-\d{4}~', '<span>$0</span>', '1-1-2012 Something something' ); 
```

正则表达式`~\d{1,2}-\d{1,2}-\d{4}`查找一个或两个整数，后跟`-`，然后是另外一个或两个整数，然后是 a `-`，然后是 4 个整数，它们同时匹配“1-1-2012”和“05-10-2012”。然后它将匹配替换为`<span>$0</span>`，其中 $0 将替换为找到的日期。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-05T12:23:38.737

检查这个：

```
$str="1-1-2012 Something, Something";
$str=preg_replace('/\d-\d-\d{4}/', '<span>$0</span>', $str);
echo $str; 
```

**UPD**

我错过了第一部分是日期:)

这可能用于：

```
$str=preg_replace('/(:?\d{1,2}-){2}\d{4}/', '<span>$0</span>', $str); 
```

# flash - 居中对齐旋转的影片剪辑

> ID：12746155
> 
> 赞同：0
> 
> 时间：2012-10-05T12:20:43.603
> 
> 标签：flash, actionscript-2

我有一个动态创建的影片剪辑，其中包含一个文本字段。

然后我将移动剪辑旋转 20 度。

然后我想将剪辑放在舞台中央。但是宽度和高度读数，以及定位 x 和 y 使它定位在错误的位置，我猜这是由于注册点。

有解决办法吗？

这是`flash 8`，`as2`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:29:10.887

将文本字段与影片剪辑居中对齐。如果您正在动态设置文本并且文本字段是自动调整大小的，请记住重新应用文本字段的中心对齐方式：

```
//Assuming mc is your MovieClip instance and tf is the child TextField instance
var tf = mc.tf;

//Reading the width and height of the TextField will remain accurate and unchanged by it's parent's rotation as it's rotation remains zero.
tf._x = -(tf._width / 2);
tf._y = -(tf._height / 2); 
```

如果您将影片剪辑保持在舞台的中心，则文本字段也将显示在中心位置。不管影片剪辑的旋转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-23T13:56:38.613

制作一个中间有reg点的mc的代码

```
var mc:movieclip = new movieclip
mc.graphics.beginFill(0x000000,0);
mc.graphics.drawRect(-1,-1,2,2);
mc.graphics.endFill(); 
```

将此中心 reg 点 mc 放在舞台中间的代码

```
 mc.x = stage.stageWidth / 2;
 mc.y = stage.stageHeight / 2; 
```

# android - How can I compare a DatePicker date to the Calendar Date

> ID：12746156
> 
> 赞同：0
> 
> 时间：2012-10-05T12:20:48.950
> 
> 标签：android, date, calendar, format

A simple question I hope. How can I compare the date entered into a DatePicker to the current Calendar date?

To explain, If I have the DatePicker date stored as a string, how could I compare that to the current date on the android system calendar?

```
 protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.dpresult);

textView1 = (TextView)findViewById(R.id.textView1);

button1 = (Button)findViewById(R.id.button1);
button1.setOnClickListener(new OnClickListener(){

public void onClick(View v){         

   Intent intent = new Intent(datePickerResult.this, calander.class);

    startActivity(intent);
}
});

Bundle extras = getIntent().getExtras(); 

year = extras.getInt("year"); 
day = extras.getInt("day"); 
month = extras.getInt("month");

textView1.setText(day+""); 
```

} }

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:32:31.960

例如，您从 datepicker 获得了类似日期的字符串

```
String sDate = "05-10-2012"; // suppose you create this type of date as string then

SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");

Date date = sdf.parse(sDate);

Calendar c = Calendar.getInstance();

c.getTime().compareTo(date); 
```

它取决于您的字符串或您如何获得？您可以从日期选择器中单独获取所有内容，然后直接在日历实例中设置

```
Calendar my = Calendar.getInstance();
my.set(year, month, day); 
```

现在比较

```
my.compareTo(Calendar.getInstance()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T12:24:55.537

您可以将您的字符串转换为日期看到[这个](http://www.roseindia.net/java/java-conversion/StringToDate.shtml)

试试这个 [compareTo](http://java.sun.com/javase/6/docs/api/java/util/Date.html#compareTo%28java.util.Date%29)

```
date1.compareTo(date2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:24:00.497

在此处阅读有关日期的教程：[http ://www.mkyong.com/android/android-date-picker-example/](http://www.mkyong.com/android/android-date-picker-example/)

和这篇关于类似情况的帖子：[How to match or compare a date string with the date stored in sqlite in android?](https://stackoverflow.com/questions/11009662/how-to-match-or-compare-a-date-string-with-the-date-stored-in-sqlite-in-android)

如果这些都没有帮助，那么发布一些代码，我会编辑我的答案:)

# .net - 类似 Java for .NET 的反射

> ID：12746162
> 
> 赞同：-11
> 
> 时间：2012-10-05T12:21:03.383
> 
> 标签：.net, c#-4.0, reflection

参考这个...

[http://docs.oracle.com/javase/tutorial/reflect/index.html](http://docs.oracle.com/javase/tutorial/reflect/index.html)或 [什么是反射，为什么它有用？](https://stackoverflow.com/questions/37628/what-is-reflection-and-why-is-it-useful)

.Net 平台上有类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:32:24.707

反射提供了封装程序集、模块和类型的对象（Type 类型）。您可以使用反射来动态创建类型的实例，将类型绑定到现有对象，或从现有对象获取类型并调用其方法或访问其字段和属性

我已经使用反射来动态加载程序集并在反射的帮助下显示其形式。

```
Step 1: Loading an assembly form the specified path.

string path = Directory.GetCurrentDirectory() + @"\dynamicdll.dll";
try
{
    asm = Assembly.LoadFrom(path);
}
catch (Exception)
{
}

Step 2: Getting all forms of an assembly dynamically & adding them to the list type.

List<Type> FormsToCall = new List<Type>();
Type[] types = asm.GetExportedTypes();
foreach (Type t in types)
{
    if (t.BaseType.Name == "Form")
        FormsToCall.Add(t);
}

Step 3:

int FormCnt = 0;
Type ToCall;
while (FormCnt < FormsToCall.Count)
{
     ToCall = FormsToCall[FormCnt];
     //Creates an instance of the specified type using the constructor that best matches the specified parameters.
     object ibaseObject = Activator.CreateInstance(ToCall);
     Form ToRun = ibaseObject as Form;
     try
     {
          dr = ToRun.ShowDialog();
          if (dr == DialogResult.Cancel)
          {
             cancelPressed = true;
             break;
          }
          else if (dr == DialogResult.Retry)
          {
             FormCnt--;
             continue;
          }
     }
     catch (Exception)
     {
     }
     FormCnt++;
} 
```

# objective-c - 内存不足，仪器分配

> ID：12746163
> 
> 赞同：0
> 
> 时间：2012-10-05T12:21:06.367
> 
> 标签：objective-c, ios, instruments

我的内存不足，请看[屏幕截图 1](http://postimage.org/image/olznrsyyp)

第二个屏幕是CFData（存储），请看[屏幕截图2](http://postimage.org/image/k898ed53b/)

任何人都可以帮助哪些对象分配了内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:30:34.673

按 command + E 打开扩展详细信息视图，然后单击地址列中的箭头以显示更多详细信息。

在扩展的详细信息视图中，您可以查看内存分配的对象和位置。

[此链接](http://www.raywenderlich.com/2696/how-to-debug-memory-leaks-with-xcode-and-instruments-tutorial)中有关于仪器的精彩教程。

# java - 我们如何在 Node 类中创建“Node”类型字段？

> ID：12746195
> 
> 赞同：1
> 
> 时间：2012-10-05T12:22:55.020
> 
> 标签：java

堆栈实现。我们如何在 Node 类中创建“Node”类型字段？“节点”类型的变量“第一个”如何包含“节点”类型的字段？谢谢你的帮助

```
public class Stack 
{
private Node first = null;

private class Node
{
    String item;
    Node next;
}

public boolean isEmpty()
{
    return first == null;
}

public void push(String item)
{
    Node oldFirst = first;
    first = new Node();
    first.item = item;
    first.next = oldFirst;  
}

public String pop()
{
    String item = first.item;
    first = first.next;
    return item;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:31:54.533

Java 通过引用（或指针）处理对象。

```
class Node {
     String value;
     Node next;
} 
```

给定这个类的一个实例，它的主体需要 8 字节内存（在 32 位机器上）。前 4 个字节存储一个指向字符串的指针，接下来的 4 个字节指向另一个`Node`对象（或 null）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:33:07.500

`Node`是一种递归数据结构。想象一下，你有一个清单。一个列表可以是空的，也可以有一个第一个元素和一个剩余部分，其中剩余部分也是一个列表。

在您的`Stack`班级中，您拥有第一个`Node`实例的参考。这个第一个实例由一个字符串值和对下一个`Node`实例的引用组成。一开始很难理解一个类可以有同一个类的一个字段。但这是一个基本原则。即你有一个类人。一个 Person 实例可以关联到其他 Person 实例。喜欢`father`。然后很自然地`father`在类 Person 中包含一个字段。类型`father`是人。这不是魔法。这只是对类实例之间的关联进行建模的方法。这里唯一特别的是，这些是同一个类之间的关联，而不是两个不同类之间的关联。

# specs2 - ScalaCheck 选择无需替换

> ID：12746196
> 
> 赞同：2
> 
> 时间：2012-10-05T12:22:58.480
> 
> 标签：specs2, scalacheck

如何编写一个`Gen[A]`永远不会返回相同对象两次的使用 ScalaCheck？

```
Gen.oneOf(a,b,c) 
```

可以重复选择同一个对象，所以这是行不通的。

我在 specs2 中编​​写了一个可变规范，我想这样做的原因是，在某种意义上，被测系统的行为应该只允许每个对象“使用”一次。

**编辑**：“相同”我的意思是根据 相同`==`，并且对象实际上是字符串，所以我不能每次都创建相同的字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:48:54.120

我不完全确定您在问什么，但是有一个称为生成器组合器`Gen.wrap`，每次评估生成器本身时都会评估其参数。这样，您可以强制创建新对象。请参见下面的示例（请注意，如果需要，您可以跳过使用`Gen.value`隐式转换，而是依赖隐式转换`A => Gen[A]`）：

```
scala> import org.scalacheck._
import org.scalacheck._

scala> class A
defined class A

scala> val g1: Gen[A] = Gen.value(new A)
g1: org.scalacheck.Gen[A] = Gen()

scala> g1.sample.get
res0: A = A@45243a0f

scala> g1.sample.get
res1: A = A@45243a0f

scala> val g2: Gen[A] = Gen.wrap(Gen.value(new A))
g2: org.scalacheck.Gen[A] = Gen()

scala> g2.sample.get
res2: A = A@331d4d66

scala> g2.sample.get
res3: A = A@728aed09 
```

# php - 致命错误：在非对象上调用成员函数 Fetch_Assoc()

> ID：12746204
> 
> 赞同：0
> 
> 时间：2012-10-05T12:23:40.637
> 
> 标签：php, html, mysql, phpmyadmin

我正在尝试为人们创建一个小表单来访问我的网站，只需输入以下信息：

*   姓名
*   姓
*   电子邮件地址

它应该将此信息从我的数据库发送回我的表中。

现在这就是事情变得“复杂”的地方（......对我来说，好吗？）

如果电子邮件地址确实存在于我们的表中，则它必须回显“已添加电子邮件地址。谢谢！”。否则，如果它不存在，那么它必须回显“电子邮件地址已存在！”

由于某种原因，它没有这样做。它吐出这个错误：

```
Fatal error: Call to a member function fetch_assoc() on a non-object in C:\wamp\www\addemail.php on line 46 
```

我附上了我的php代码（如下）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>

<script LANGUAGE="JavaScript">
<!--
function redirect () { setTimeout("go_now()",3000); }
function go_now ()   { window.location.href = "newsletter_frame.html"; }
//-->
</script>

<!-- This is the link to the external CSS file-->
<link rel="stylesheet" type="text/css" href="css/mystyle.css">

<!-- This is the link to the external Javascript file-->
<script type="text/javascript" src="js/myjs.js"></script>

<title>Page</title>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="verify-v1" content="gDSxHR1Tk8vWtty9GoRHABGFEH+Bh2VHYCHv0Cx1/Ek=">
<meta name="copyright" content="Burger man">
<meta name="keywords" content="afro, afrodeep, soulful, funky, deep, vocal house, broken beats, disco">
<meta name="description" content="Burgers and chips">
<meta name="page-type" content="Information">

</head>
    <body  onLoad="redirect()" id="iframe_newsl_spec">

        <?php
            $dbc = mysqli_connect('localhost', 'root', '', 'si_store') or die('Error connecting to MySQL server.');

                if ( isset($_POST['email_address']) && isset($_POST['firstname']) && isset($_POST['surname']) )
                    {
                        $email_address = $_POST['email_address'];
                        $firstname = $_POST['firstname'];
                        $surname = $_POST['surname'];

                        $query = mysqli_query("SELECT * FROM email_list WHERE email_address = '$email_address'");

                        if ( mysql_num_rows($query) > 0)
                        {
                            echo 'Email address already exists!';
                        }
                        else
                        {
                            mysqli_query("INSERT INTO email_list(email_address, firstname, surname) VALUES ('$email_address','$firstname','$surname')");

                            echo 'Email Address Added. Thank you!';
                        }   
                    }

            //mysqli_query($dbc, $query) or die ('Error connecting to database.');

            mysqli_close($dbc);
        ?>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:46:42.243

一旦你修复了这些`mysql_*`函数，并将它们更改为`mysqli_*`，*并且*你已经更改了代码以便使用*准备好的语句*，你应该添加以下代码：

```
$stmt = mysqli_prepare('SELECT * FROM email_list WHERE email_address = ?');
//BTW, if all you want to check if a record exists, don't use SELECT *
//Just select one field, not the entire row
mysqli_stmt_bind_param($stmt,'s',$_POST['email_address']);
//bind param, to statement, as String, value ^^
mysqli_stmt_execute($stmt);
//execute the query
mysqli_stmt_bind_result($stmt,$col1,$col2,$col3);
//bind variables that will be assigned the value of the fields
while(mysqli_stmt_fetch($stmt))
{//get the values in question
    echo 'col1: '.$col1.'<br/>col2: '.$col2.'<br/>col3: '.$col3.'<br/>';
} 
```

要获得结果集的关联数组，您将不得不[阅读文档](http://php.net/manual/en/mysqli-stmt.fetch.php)，那里有几个您可能想要使用的函数。

# powershell - 当您想显示多列时如何在powershell中扩展...？

> ID：12746206
> 
> 赞同：1
> 
> 时间：2012-10-05T12:23:45.897
> 
> 标签：powershell, powershell-2.0

我正在尝试在下面的 powershell 脚本中显示目录对象`Name`的`FullName`属性

`gci C:\abc\*\* | where {$_.PsIsContainer} |select Name, FullName |sort Name -u`.

但该`FullName`属性显示`...`在目录路径中的某些字符之后。

任何人都知道如何显示 Name & FullName 属性的所有值？

`Select-Object -ExpandProperty`我猜只有当你只需要显示一个字段时才有效。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T12:32:29.900

使用`Format-Table`cmdlet，也`ft`就是这样，

```
gci C:\abc** | where {$_.PsIsContainer} |select Name, FullName |sort Name -u | ft -wrap 
```

这将导致输出在多行上换行，以防它不适合屏幕。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-23T19:25:30.307

您也可以尝试使用 Format-Table 中的 -autosize 选项

```
gci C:\abc** | where {$_.PsIsContainer} |select Name, FullName |sort Name -u | ft -autosize 
```

此外，如果仍然不适合这种方式，您始终可以使您的 Powershell 控制台更大。就是这样

```
$host.UI.RawUI.BufferSize = New-Object System.Management.Automation.Host.Size(8192,500) 
```

这应该会给你一个漂亮而长的水平滚动条来查看列中的完整值

# gwt - 在按钮单击事件上分别访问每个选项卡面板中的不同弹性表

> ID：12746207
> 
> 赞同：1
> 
> 时间：2012-10-05T12:23:51.070
> 
> 标签：gwt, flextable

我在 GWt 中有一个带有 4 个 TabPanel 的 TabContainer。在第一个选项卡面板中，我列出了 7 个单选按钮，并在单选按钮上选择一组图像和一个表格。

现在，如果我单击提交按钮，我想以不同的方式访问每个弹性表，而我现在还没有习惯。表结构如下所示

[![](../Images/a622214f96ff8e5520207aebec34718e.png)](https://i.stack.imgur.com/pi7TV.png)
[（来源：[expertsmind.com](http://www.expertsmind.com/CMSImages/1323_html%20control.png)）]

这只是我的 GUI 外观的演示。此外，当我明智地检索数据列时，对于文本框，我只得到它的 HTML 代码而不是它的值。所以请告诉我如何使用表 id 从 flextable 的文本框中检索数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T05:53:11.270

假设您的 TabPanel 上面有一个活动，最简单的解决方案是让活动访问您拥有的每个 FlexTable，或您想要的相关数据。如果每个选项卡都是一个单独的类，只需放置一个 getData() 函数或类似的东西，然后从处理您的逻辑的覆盖活动中查询每个选项卡。

# asp.net - 在锚点单击 ASP.NET 时写入会话

> ID：12746211
> 
> 赞同：-1
> 
> 时间：2012-10-05T12:24:02.993
> 
> 标签：asp.net

我有基于 ASP.NET 的站点。例如我有两个锚点：

```
<a id="sortByPopular" runat="server" href="url1">Popular</a>
<a id="sortByRecent" runat="server" href="url2">Recent</a> 
```

在后面的代码中，我可以构建 href 属性：

```
sortByPopular.Href = BuildURL(POPULAR);
sortByRecent.Href = BuildURL(RECENT); 
```

我想记住，用户在列表页面上使用的排序顺序。我认为应该有办法在用户点击链接时创建新的 Session 变量。有人可以帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:27:19.607

您可以使用链接按钮

```
<asp:LinkButton runat="server" ID="sortByRecent" Text="Recent" OnClick="sortByRecent_Click"></asp:LinkButton> 
```

代码隐藏

```
protected void sortByRecent_Click(object sender, EventArgs e)
{
   //do your session thing here
} 
```

# javascript - 输入 [type="file"] 上的 JavaScript 更改事件

> ID：12746214
> 
> 赞同：1
> 
> 时间：2012-10-05T12:24:17.330
> 
> 标签：javascript, html, input

我编写了一个脚本：用户可以单击“浏览”按钮，然后会打开一个对话框。一旦用户选择了您要创建的选定文件列表。也可以允许重复。

我的问题是我处理`change`事件。那是当用户选择一个文件并且文件最终出现在我的列表中时，用户想要再次选择相同的文件不起作用。

例子

```
jQuery(form).find("input[type='file']").on("change", checkSelectedFile);

function checkSelectedFile (e) { console.log(e); } 
```

如果第一个和最后一个文件相同，则不会触发该事件。你有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:28:54.053

如果选择了相同的文件，则没有更改，因此无法触发 onchange。您可能想使用`blur`.

# android - 错误：在预期项目的位置找到形状标签

> ID：12746215
> 
> 赞同：1
> 
> 时间：2012-10-05T12:24:21.210
> 
> 标签：android, xml, eclipse

它在第二行显示“错误：在预期项目的位置找到形状标签”给我错误。可能是eclipse的问题。我重新启动了eclipse并清理了项目，但没有任何效果..

```
<resources>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
  <solid android:color="#FFFFFF"/>
  <stroke android:width="2dp" android:color="#515151"/>
  <corners android:radius="3dp" />
  <padding android:left="10dp" android:top="5dp"android:right="10dp" android:bottom="5dp" />
</shape>
</resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:32:07.670

***为什么你使用`<resources>`标签？***

您的代码必须为

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
  <solid android:color="#FFFFFF"/>
  <stroke android:width="2dp" android:color="#515151"/>
  <corners android:radius="3dp" />
  <padding android:left="10dp" android:top="5dp" android:right="10dp" android:bottom="5dp" />
</shape> 
```

阅读有关 shape drawable 的[教程。](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)这[是](http://www.vogella.com/blog/2011/07/19/android-shapes/)一个演示应用程序。

# javascript - 使用 Jquery 隐藏每个 tr 的 n:th td 元素

> ID：12746217
> 
> 赞同：0
> 
> 时间：2012-10-05T12:24:35.037
> 
> 标签：javascript, jquery

我有一张这样的桌子：

```
<table Id="modules-mgr">
<tbody>
<tr>
<td>lorem ispium blok</td>
<td>lorem ispium blok</td>
<td>lorem ispium blok</td>
</tr>
<tr>
<td>lorem ispium blok</td>
<td>lorem ispium blok</td>
<td>lorem ispium blok</td>
</tr>
<tr>
<td>lorem ispium blok</td>
<td>lorem ispium blok</td>
<td>lorem ispium blok</td>
</tr>
</tbody>
</table> 
```

我想`td`从每个`tr`. 和 没有任何类`td`，`tr`因此我们需要使用 选择它们`.eq`。并且还想要一个 else if 函数，比如 resize 事件。如果窗口大小调整为 200，则最后隐藏`td`，如果窗口大小调整为 100，则隐藏最后两个`td`。到目前为止，我所做的一切都在这里，但确实有效；

```
jQuery(window).resize(function() {
var width=jQuery(window).width();
    if(width < 870) {
        jQuery('table#modules-mgr tr td').eq(10).hide()

    }
    /*elseif(width < 570) {

    }
    else {

    }*/
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:25:35.457

仅 CSS：

```
@media all and (max-width: 200px) {
    #modules-mgr td:last-child {display:none]
}
@media all and (max-width: 100px) {
    #modules-mgr td:nth-last-child(-n+2) {display:none]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:28:00.900

好吧，如果你真的想要 nth-child 就像标题中所说的那样，

```
jQuery('#modules-mgr td:nth-child(10)').hide(); 
```

对于那些没有陷入黑暗时代的浏览器，应该像在直接 CSS 中那样做：

```
#modules-mgr td:nth-child(10) {
    display: none;
} 
```

（如果您只想要最后一个元素，请参阅其他答案）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:26:04.537

如果要隐藏最后一个，可以使用`last()`选择器：

```
// for last
$('#modules-mgr tr td').last().hide();
// for n-th element - 0-index based
$('#modules-mgr tr td').eq(n - 1).hide(); 
```

选择：

```
// for last
$('#modules-mgr tr td:last').hide();
// for n-th element - 0-index based
$('#modules-mgr tr td:eq(n - 1)').hide(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T12:27:26.457

```
jQuery('table#modules-mgr tr td').last().hide(); 
```

# r - 对列表中对象的矩阵运算

> ID：12746218
> 
> 赞同：0
> 
> 时间：2012-10-05T12:24:43.370
> 
> 标签：r, list, matrix

我有一个类似于下面的列表，其中包含我想对其进行单独操作的矩阵。

```
data <- data.frame(matrix(data = c(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,2), nrow = 8, ncol = 4, byrow = TRUE) )
matrix_list <- list(data[1:4, ], data[5:8, ]) 
```

我知道我可以分别对每个对象进行矩阵运算，就像这样

```
eigen(matrix_list[[1]]) 
```

我可以用`for`循环对所有项目进行操作

```
for (i in 1:2){print(eigen((data_list[[i]])))} 
```

如何跳过`for`循环并直接对列表进行操作？如果我能做类似“eigen（matrix_list）”之类的事情，那就太好了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:26:24.927

用于`lapply`对列表进行操作

```
lapply(matrix_list, eigen)
[[1]]
[[1]]$values
[1] 1 1 1 1

[[1]]$vectors
     [,1] [,2] [,3] [,4]
[1,]    0    0    0    1
[2,]    0    0    1    0
[3,]    0    1    0    0
[4,]    1    0    0    0

[[2]]
[[2]]$values
[1] 2 2 2 2

[[2]]$vectors
     [,1] [,2] [,3] [,4]
[1,]    0    0    0    1
[2,]    0    0    1    0
[3,]    0    1    0    0
[4,]    1    0    0    0 
```

如果您只对值或向量感兴趣，您可以使用以下方法选择它们：

```
Eigen <- lapply(matrix_list, eigen)
> sapply(Eigen, '[', 'values') # Extrating eigen values
$values
[1] 1 1 1 1

$values
[1] 2 2 2 2

> sapply(Eigen, '[', 'vectors') # Extrating eigen vectors
$vectors
     [,1] [,2] [,3] [,4]
[1,]    0    0    0    1
[2,]    0    0    1    0
[3,]    0    1    0    0
[4,]    1    0    0    0

$vectors
     [,1] [,2] [,3] [,4]
[1,]    0    0    0    1
[2,]    0    0    1    0
[3,]    0    1    0    0
[4,]    1    0    0    0

> 
```

# n2cms - N2常见内容

> ID：12746219
> 
> 赞同：0
> 
> 时间：2012-10-05T12:24:44.630
> 
> 标签：n2cms, n2

N2 关于继承的文档提到将公共内容放入起始页定义中，然后在母版页中从 StartPage 而不是 CurrentPage 检索该部分内容。这被认为是最佳实践还是有其他方法可以从祖先页面继承内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:56:18.213

这包括三个方面

1.  如果您有一些内容出现在多个页面上，例如公司联系电话出现在每个页面的页脚上，最佳做法是将其作为属性添加到起始页，可能在单独的选项卡上（例如“页脚” )，填充其值，然后通过从起始页读取在所有页面上重用属性值。这样做的好处是对此类重用属性的集中编辑

2.  如果您在页面组上具有相同的某些属性-例如，当某些第一级菜单项的所有子项的“主题颜色”相同时-那么您可以在起始页的子项级别上使用相同的方法-您会在起始页的子级上定义属性（例如颜色），然后在其所有子级上重用它。一旦编辑器在第一级页面上设置“主题颜色”，它将自动影响其所有子级。

3.  如果您有具有某种用户定义的默认值的属性，但您希望编辑器能够覆盖它，例如标题图像，您将使用组合方法。在起始页和所有其他页面上定义 HeaderImage 属性。然后，在您的代码中，如果 HeaderImage 属性为空，请使用起始页中的一个。这是一个很好的做法，因为人们往往会犯错误并忘记事情。在这种情况下，如果没有指定 Header 图像，它将自动替换为 StartPage 中的值

所有这三个场景都在现实生活中使用，并一次又一次地证明是很好的解决方案。

# wcf - wcf服务库的多个实例？

> ID：12746220
> 
> 赞同：0
> 
> 时间：2012-10-05T12:24:49.590
> 
> 标签：wcf, silverlight, visual-studio-2012

我正在构建一个使用 WCF 服务进行通信的 Silverlight 应用程序。当我运行多个 Silverlight 应用程序实例时，它是否也运行多个服务库实例？我还想知道，如果我从浏览器复制应用程序 URL 并将其粘贴到新选项卡中，它是否运行多个 Silverlight 实例。预先感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:18:52.417

> When I run multiple instances of Silverlight application does it also run multiple instances of service library or not?

No, because Silverlight and your service are two differents applications. Silverlight runs on client whereas your service is hosted ins IIS. As a website, the service will expose data for all clients.

> Also I want to know, is it running multiple instances of Silverlight if I copy the application URL from browser and paste it into a new tab.

Every instance of Silverlight is sandboxed. Even multiples of the same Silverlight app in the same Browser page are duplicate instances and nothing is shared. They are therefore not even shared between browser tabs.

# graphviz - Graphviz---随机节点顺序和通过标签的边

> ID：12746224
> 
> 赞同：3
> 
> 时间：2012-10-05T12:24:59.513
> 
> 标签：graphviz

我有以下点文件：

```
digraph finite_state_machine {
    {
        rank=same;
        node [shape = doublecircle]; q_5;
        node [shape = circle];
        q_1 -> q_2 [ label = "." ];
        q_1 -> q_2 [ label = "\epsilon" ];
        q_2 -> q_1 [ label = "\epsilon" ];
        q_2 -> q_3 [ label = "a" ];
        q_3 -> q_4 [ label = "^\wedge a" ];
        q_3 -> q_4 [ label = "\epsilon" ];
        q_4 -> q_3 [ label = "\epsilon" ];
        q_4 -> q_5 [ label = "b" ];
    }
} 
```

我的印象是节点会按照它们被提及的顺序出现。但是顺序对我来说似乎是随机的。我希望从左到右的顺序是下标的顺序。此外，边缘穿过标签，我该如何避免这种情况？

这是当前图像： ![电流输出](../Images/5510812084927f874878538c98539f71.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T15:33:37.090

Graphviz 确实根据彼此之间的边缘而不是按出现顺序来布置节点。如果您希望边不影响任何节点的位置，您可以通过添加`constraint=false`.

因此，此图：

```
digraph finite_state_machine {
  pad=0.2;
    {
        rank=same;
        node [shape = doublecircle]; q_5;
        node [shape = circle];
        q_1 -> q_2 [ label = "." ];
        q_1 -> q_2 [ label = "\epsilon", constraint=false ];
        q_2 -> q_1 [ label = "\epsilon", constraint=false ];
        q_2 -> q_3 [ label = "a" ];
        q_3 -> q_4 [ label = "^\wedge a" ];
        q_3 -> q_4 [ label = "\epsilon", constraint=false ];
        q_4 -> q_3 [ label = "\epsilon", constraint=false ];
        q_4 -> q_5 [ label = "b" ];
    }
} 
```

会给你：

![graphviz 输出有限状态机](../Images/3bb02967948376c8f23eb0bd9346f02e.png)

我不得不添加`pad`，以免一些标签被剪掉。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:34:40.047

这是其中一个想法。

1) 使用以下命令找出点在放置节点时使用的位置。

```
dot filename.dot 
```

2) 注意生成的输出中每个节点的**pos**属性。然后根据您在代码中的喜好更改其值。这是您的示例的修改后的点代码。

```
digraph finite_state_machine {
{
    rank=same;
    node [shape = circle];
    q_1[pos="30"];
    q_2[pos="130"];
    q_3[pos="230"];
    q_4[pos="330"];
    node [shape = doublecircle]; 
    q_5 [pos="430"];
    q_1 -> q_2 [ label = "." ];
    q_1 -> q_2 [ label = "\epsilon" ];
    q_2 -> q_1 [ label = "\epsilon" ];
    q_2 -> q_3 [ label = "a" ];
    q_3 -> q_4 [ label = "^\wedge a" ];
    q_3 -> q_4 [ label = "\epsilon" ];
    q_4 -> q_3 [ label = "\epsilon" ];
    q_4 -> q_5 [ label = "b" ];
} 
```

}

3) 再次运行 dot，这一次生成输出文件。

结果可以在这里看到：

[![Graphviz 输出](../Images/b803991f7a4a95d2d2249aef8760b7bb.png)](https://i.stack.imgur.com/aBMhJ.png)

# haskell - 当 Haskell 记录访问器以下划线开头时通常是什么意思？

> ID：12746229
> 
> 赞同：31
> 
> 时间：2012-10-05T12:25:05.783
> 
> 标签：haskell

HaskellNet 库中的一个示例：

```
data MailboxInfo = MboxInfo { _mailbox :: MailboxName
                            , _exists :: Integer
                            , _recent :: Integer
                            , _flags :: [Flag]
                            , _permanentFlags :: [Flag]
                            , _isWritable :: Bool
                            , _isFlagWritable :: Bool
                            , _uidNext :: UID
                            , _uidValidity :: UID
                            }
                 deriving (Show, Eq) 
```

字段名称中的下划线是否意味着什么，如果不是编译器，那么至少根据 Haskell 约定？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-05T14:05:21.930

通过类比下划线表示不相关的模式，例如`fst (x, _) = x`，下划线前缀（在记录字段上或其他）用于指示标识符应该被任何阅读代码的人忽略，或者可能被编译器忽略以用于某些类型的用户交互，即使它因某种原因被命名。

请注意，这不仅仅是一个约定，而是基于[Haskell 报告中明确说明的](http://www.haskell.org/onlinereport/lexemes.html#sect2.4)内容：

> 下划线“_”被视为小写字母，可以出现在小写字母可以出现的任何位置。但是，“_”本身就是一个保留标识符，在模式中用作通配符。鼓励为未使用的标识符提供警告的编译器禁止对以下划线开头的标识符发出此类警告。这允许程序员将“_foo”用于他们希望不使用的参数。

一个示例是旨在供 Template Haskell 使用的定义，然后定义不带下划线的等效标识符，如基于记录字段生成镜头的常见示例（我猜这是您的示例正在做的事情）。在这种情况下，标识符比实际定义更多地输入到 TH；TH 生成的代码实际上可能使用也可能不使用下划线前缀标识符。

但是，除了上述之外，下划线前缀与常规小写标识符没有任何不同。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-05T12:27:41.587

模板 Haskell 代码有时会查找以下划线开头的标识符。

[例如，下划线用于自动生成镜头。](http://hackage.haskell.org/packages/archive/data-lens-template/2.1.7/doc/html/Data-Lens-Template.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T14:07:27.400

这只是一个很好的编程习惯。

由于 Haskell 中的记录字段标签实际上是顶级命名函数，它们污染了模块命名空间。为字段标签添加下划线意味着您可以自由定义另一个具有相同名称的函数。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-25T19:10:21.137

最近我发现了一些与你的问题相关的东西。

我想控制我的类型实例的构造位置，以证明每个值都是有效的。所以我在它自己的模块中声明了它：

```
module Coords (Coords(), -- hide the constructor
               x,y,buildCoords) where

data Coords = Coords { x :: Int, y :: Int }

buildCoords :: Int -> Int -> Coords
buildCoords x y | x < 0 || y < 0 = error "omg"
buildCoords x y = Coords { x = x, y = y } 
```

然后，我推断，在这个模块之外，没有代码可以创建无效的坐标。

我错了！`x`并且`y`是公开的，因此只需使用`let c = buildCoords 1 1 in c { x = -1 }`即可获得无效的 Coords 值！

但这种语法之所以可行，是因为 x 和 y 是该类型的记录选择器。只允许有效值的方法如下：

```
module Coords (Coords(), -- hide the constructor
               x,y,buildCoords) where

data Coords = Coords { _x :: Int, _y :: Int }
x = _x
y = _y

buildCoords :: Int -> Int -> Coords
buildCoords x y | x < 0 || y < 0 = error "omg"
buildCoords x y = Coords { _x = x, _y = y } 
```

现在 x 和 y 只是常规函数。语法不会编译，`c { x = -1 }`并且其他模块无权访问记录选择器_x。

问题已通过下划线解决；-)

# php - 为什么 PHP 5.4 中的 mb_convert_case 会破坏我的字符串，而在 5.2 中却不会？

> ID：12746231
> 
> 赞同：5
> 
> 时间：2012-10-05T12:25:15.083
> 
> 标签：php, unicode

我有以下代码：

```
header('Content-type: text/html; charset=utf-8');
$str = 'áá áá';
echo $str."\n";
echo mb_convert_case($str, MB_CASE_TITLE)."\n";
echo bin2hex($str)."\n";
echo bin2hex(mb_convert_case($str, MB_CASE_TITLE))."\n"; 
```

使用 PHP 5.2.2，我得到以下输出：

```
áá áá
áá áá
c3a1c3a120c3a1c3a1
c3a1c3a120c3a1c3a1 
```

使用 PHP 5.4.3，我得到了这个：

```
áá áá
á� á�
c3a1c3a120c3a1c3a1
c3a1e3a120c3a1e3a1 
```

在这两种情况下，我的预期输出都是：

```
áá áá
Áá Áá
c3a1c3a120c3a1c3a1
c381c3a120c381c3a1 
```

所以我有两个问题：

1.  为什么 á 不被转换为 Á？
2.  为什么 PHP 5.4 会破坏我的字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T15:49:14.160

要么传递`$encoding`给每个`mb_`函数调用，要么设置：

```
mb_internal_encoding("UTF-8"); 
```

以确保 PHP 知道您正在使用什么编码。否则编码来自`php.ini`，或者默认的 ISO-8859-1 如果不包含在其中。

因此，您的 5.4 安装默认为 ISO-8859-1，因此将 UTF-8 序列的前导字节小写，破坏了它。我在 5.2 中也发生了同样的情况，所以也许你的 5.2 安装还有其他一些不同的地方——也许`internal_encoding`是`ini`在那些字节位置设置为没有字母的其他东西？

# android - 我想检查用户提供的凭据（通过编辑文本框）是否与我的数据库库 ID 中的值匹配。

> ID：12746237
> 
> 赞同：0
> 
> 时间：2012-10-05T12:25:36.550
> 
> 标签：android, android-sqlite

这是我的光标代码，我感到困惑的是如何继续检查每个值并根据计算使我的布尔值 x 为真或假：

```
 private boolean fillData() {
       Cursor c = DBHelper.fetchAllIDs();
       // List<String> idList = new ArrayList<String>();
       if (c.moveToFirst()) {
        do {
            String X = (c.getString(c.getColumnIndexOrThrow("IDno")));
            Toast.makeText(getApplicationContext(), "" +X, Toast.LENGTH_LONG).show();
            if (Idno.getText().toString().equals(X));
            {
                Toast.makeText(getApplicationContext(),   ""+Idno.getText().toString(), Toast.LENGTH_LONG).show();
                x=true;
            }
        } while (c.moveToNext());

       }
      return x;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T07:26:03.400

1.  `x`在光标上循环之前设置为 false。

    ```
    private boolean fillData() {
        boolean x = false;

        // ...

    } 
    ```

2.  替换以下代码：

    ```
    if (Idno.getText().toString().equals(X));
    {
        Toast.makeText(getApplicationContext(),   ""+Idno.getText().toString(), Toast.LENGTH_LONG).show();
        x=true;
    } 
    ```

    有了这个：

    ```
    if (Idno.getText().toString().equals(X))
    {
        Toast.makeText(getApplicationContext(),   ""+Idno.getText().toString(), Toast.LENGTH_LONG).show();
        x=true;
        break;
    } 
    ```

    **注意**：
    我`;`从语句的末尾删除了，并在块的末尾`if`添加了一个语句。`break``if`

# python - 从列表中计算唯一的相交集

> ID：12746238
> 
> 赞同：2
> 
> 时间：2012-10-05T12:25:39.933
> 
> 标签：python, list, matrix

我有一个二维数字列表，两个维度的长度都不同。这些代表主机的开放端口。下面是一个列表，显示了 4 个不同主机上的开放端口：

```
ports = [[22,23],[22],[22,23,80],[23,80]] 
```

我想计算两个或多个主机共享的所有唯一端口组合，在这个例子中我应该得到以下结果：

```
Ports -> Count
22     -> 3
22, 23 -> 2
23     -> 3
23, 80 -> 2
80     -> 2 
```

我已经实现了一个解决方案，但我的结果不正确，因为我对给定组合的计数往往超过我正在使用的主机数量，为简洁起见，我没有发布我很长的解决方案，但会用伪代码概述它：

*   在每个主机之间创建一个交集矩阵

*   提取/展平矩阵以仅包含唯一集，即不包含相反的顺序。

    ```
    -- a AND b, b AND a => a AND b 
    ```

*   创建一个新列表，其中包含（提取/展平）列表中的每组唯一端口以及该组发生的次数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T12:39:06.150

使用来自[itertools](http://docs.python.org/library/itertools.html#recipes)`powerset`的配方：

```
from collections import Counter
from itertools import chain, combinations

def powerset(iterable):
    "powerset([1,2,3]) --> () (1,) (2,) (3,) (1,2) (1,3) (2,3) (1,2,3)"
    s = list(iterable)
    return chain.from_iterable(combinations(s, r) for r in range(len(s)+1))

def port_table(ports):
    d = Counter()
    for portseq in ports:
        for subset in powerset(sorted(portseq)):
            if subset:
                d[subset] += 1
    return d 
```

基本上，`powerset`给出要递增的所有可能子集（包括空的子集，因此`if subset:`跳过它），然后对于我们在每个端口列表中看到的每个子集，我们递增一个`Counter`对象。然后产生

```
>>> ports = [[22,23],[22],[22,23,80],[23,80]]
>>> table = port_table(ports)
>>> for port, count in sorted(table.items()):
...     if count > 1:
...         print port, '->', count
... 
(22,) -> 3
(22, 23) -> 2
(23,) -> 3
(23, 80) -> 2
(80,) -> 2 
```

# php - 无法从 PHP 中的 ARRAY 获取数据

> ID：12746240
> 
> 赞同：-1
> 
> 时间：2012-10-05T12:26:01.587
> 
> 标签：php, arrays, multidimensional-array

我的数组看起来像这样。我想将数组和数组`["perm_name"]`与`["type_name"]`数组分开`["selectdata"]`。我无法解决这个问题。请帮帮我

```
 array(1) {
  ["selectData"]=>
  array(2) {
    ["perm_name"]=>
    object(CI_DB_mysql_result)#17 (8) {
      ["conn_id"]=>
      resource(28) of type (mysql link persistent)
      ["result_id"]=>
      resource(34) of type (mysql result)
      ["result_array"]=>
      array(2) {
        [0]=>
        array(7) {
          ["permission_id"]=>
          string(1) "1"
          ["permission_name"]=>
          string(4) "news"
          ["default_is_edit"]=>
          string(1) "Y"
          ["default_is_view"]=>
          string(1) "Y"
          ["default_is_delete"]=>
          string(1) "Y"
          ["default_is_personal"]=>
          string(1) "Y"
          ["active"]=>
          string(1) "Y"
        }
        [1]=>
        array(7) {
          ["permission_id"]=>
          string(1) "8"
          ["permission_name"]=>
          string(13) "movies & play"
          ["default_is_edit"]=>
          string(1) "Y"
          ["default_is_view"]=>
          string(1) "Y"
          ["default_is_delete"]=>
          string(1) "Y"
          ["default_is_personal"]=>
          string(1) "Y"
          ["active"]=>
          string(1) "Y"
        }
      }
      ["result_object"]=>
      array(0) {
      }
      ["custom_result_object"]=>
      array(0) {
      }
      ["current_row"]=>
      int(0)
      ["num_rows"]=>
      int(2)
      ["row_data"]=>
      NULL
    }
    ["type_name"]=>
    object(CI_DB_mysql_result)#18 (8) {
      ["conn_id"]=>
      resource(28) of type (mysql link persistent)
      ["result_id"]=>
      resource(37) of type (mysql result)
      ["result_array"]=>
      array(5) {
        [0]=>
        array(4) {
          ["user_type_id"]=>
          string(1) "1"
          ["user_type"]=>
          string(5) "Admin"
          ["is_active"]=>
          string(1) "Y"
          ["last_modifiled"]=>
          string(19) "2012-10-05 10:38:41"
        }
        [1]=>
        array(4) {
          ["user_type_id"]=>
          string(1) "3"
          ["user_type"]=>
          string(9) "Developer"
          ["is_active"]=>
          string(1) "Y"
          ["last_modifiled"]=>
          string(19) "2012-10-05 10:32:11"
        }

      }
      ["result_object"]=>
      array(0) {
      }
      ["custom_result_object"]=>
      array(0) {
      }
      ["current_row"]=>
      int(0)
      ["num_rows"]=>
      int(5)
      ["row_data"]=>
      NULL
    }
  }
} 
```

帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:40:57.257

尝试这个。

```
function array_separator($val, $key, $identifier) {
  if ($key == $identifier) { // perm_name
    // do foreach for the perm_name subarray
  } else { // type_name
    // do foreach for the type_name subarray
  }
}

$select_data_array = array(/* the selectData subarray i.e. $array['selectData'] */);

array_walk($select_data_array, 'array_separator', 'perm_name'); 
```

希望我的问题是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:27:50.650

尝试以下操作：

```
$permName = $array['selectData']['perm_name'];
$typeName = $array['selectData']['type_name']; 
```

# php - url重写中断页面并且不加载？

> ID：12746244
> 
> 赞同：0
> 
> 时间：2012-10-05T12:26:23.677
> 
> 标签：php, apache, url-rewriting, visual-web-developer

目前在我的网站上，当用户登录它时它会显示`www.domain.com/userHome.php`，我希望它只显示`www.domain.com`，这样我就可以有一个更清晰的 URL 供用户查看。

我很难弄清楚如何将 url 重写为只是在地址栏中切掉末尾。[我在这里](http://www.workingwith.me.uk/articles/scripting/mod_rewrite)学习了一个教程，并决定在我的文件中尝试这个，`.htaccess`看看我是否可以进行任何重写。

```
RewriteEngine on
RewriteRule ^userHome.php$ /hello.html 
```

当我尝试这个时，我希望看到 www.domain.com/hello.html 而不是`www.domain.com/userHome.php`我想要的，但我正在尝试在学习这一点时采取婴儿步骤。

不幸的是，当我尝试这个时，我去的时候只是得到了一个找不到页面的错误`www.domain.com/userHome.php`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:28:07.437

尝试：

```
RewriteRule ^hello\.html$  userHome.php [L] 
```

然后尝试访问：www.domain.com/hello.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:32:56.437

你真的不需要为此使用 mod rewrite 。只需使用：

```
DirectoryIndex userHome.php index.php index.html index.htm 
```

# jquery - 将 :first 应用于多个选择器

> ID：12746248
> 
> 赞同：2
> 
> 时间：2012-10-05T12:26:30.870
> 
> 标签：jquery, jquery-selectors, focus

我想知道这是否可能。

我有一个网页，我想关注表单中第一个启用的、可见的字段。第一个字段可以是输入字段或选择字段。我尝试过（使用 JQuery）以下格式

```
input,select:visible:enabled:first 
```

并且

```
(input,select):visible:enabled:first 
```

但这些似乎都不适合我。

那么这可以做到吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T12:29:12.153

`$('input,select').filter(':visible:enabled:first')`听起来它会做你想做的事。

这是未经测试的，我有点担心将如何`:first`表现在那里，所以如果这不起作用，你总是可以这样做：

```
$('input,select').filter(':visible:enabled').first(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:29:17.580

尝试使用`filter`选择器：

```
$("input,select").filter(":visible:enabled:first"); 
```

# wpf - 在数据网格中编辑新行会激活快捷方式而无需按下 ALT

> ID：12746255
> 
> 赞同：0
> 
> 时间：2012-10-05T12:27:08.717
> 
> 标签：wpf, datagrid, shortcut, alt

我定义了以下窗口：

```
<Window x:Class="ShortCutInTabControlproblem.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<DockPanel>

    <TabControl>
        <TabItem Header="_1st Tab">
            <DataGrid ItemsSource="{Binding Persons}" />                
        </TabItem>
        <TabItem Header="_2nd Tab">

        </TabItem>
    </TabControl>
</DockPanel> 
```

后面有以下代码：

```
public partial class MainWindow : Window
{
    public ObservableCollection<Person> Persons { get; set; }

    public MainWindow()
    {
        InitializeComponent();

        Persons = new ObservableCollection<Person>
                    {new Person() {Name = "John", Age = 39}, new Person() {Name = "Doe", Age = 34}};

        DataContext = this;
    }
} 
```

最后是以下“模型”：

```
public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
} 
```

当我尝试在第一个选项卡（“第一个选项卡”）上向数据网格中添加一行并且我按下的第一个键是“2”时，会发生最奇怪的事情。这将激活第二个选项卡（“第二个选项卡”），因为它定义了一个快捷方式。

如果我编辑现有网格，例如 John 的年龄并按“2”，则不会发生任何事情（除了年龄更改为 2）。

这是一个已知的错误，是否有任何已知的修复？你知道需要按下 Alt+'2' 而不仅仅是 '2' 的方法吗？

请帮我...

在此先感谢 Søren Rokkedal

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:15:33.903

这实际上是一个已知问题，应该在未来的 .NET 版本中修复。

同时，您可以使用自定义 TabItem 来解决您的问题：

```
public class MyTabItem : TabItem
{
    protected override void OnAccessKey(AccessKeyEventArgs e)
    {
        if ((Keyboard.Modifiers & ModifierKeys.Alt) != ModifierKeys.Alt)
        {
            return;
        }
        base.OnAccessKey(e);
    }
} 
```

您还可以编写以下修复程序来解决所有 UIElements 的问题：

```
EventManager.RegisterClassHandler(typeof(UIElement), AccessKeyManager.AccessKeyPressedEvent, new AccessKeyPressedEventHandler(OnAccessKeyPressed)); 
```

其中 OnAccessKeyPressed 将实现相同的逻辑。

# c# - 回发后无法维护动态下拉选择值

> ID：12746259
> 
> 赞同：1
> 
> 时间：2012-10-05T12:27:17.270
> 
> 标签：c#, asp.net, c#-4.0, webforms, dynamic-controls

我正在使用下面的代码来创建一个多重下拉列表。但我无法保持之前选择的值。请帮助我保持以前的价值。

我的代码在这里：

```
 for (int i = 1; i <= Count; i++)
        {
            Session["i"] = Count;

            Panel1.Controls.Add(new LiteralControl("<br />"));
            Label lbl = new Label();
            lbl.ID = "lbl" + i;
            lbl.Text = "Head";
            Panel1.Controls.Add(lbl);
            Panel1.Controls.Add(new LiteralControl("&nbsp;&nbsp;&nbsp;&nbsp;"));

            DropDownList ddl = new DropDownList();
            ddl.ID = "ID" + i;
            ddl.DataValueField = "fld_Head";
            ddl.DataTextField = "fld_Head";
            ddl.DataSource = DVS;
            ddl.DataBind();
            Panel1.Controls.Add(ddl);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:37:11.847

[正如我在这里](https://stackoverflow.com/questions/10928524/property-null-after-postback-dynamically-loaded-control/10929096#10929096)已经提到的，您应该在`Page_Init`事件中初始化动态控件的值。

因为使用 viewstate 的 asp.net 内部功能会在`Page_Load`事件中填充值，如果您的动态控件仍未创建，它的值将被忽略。\

常见问题 =)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:36:26.437

您正在将 a`DropDownList`动态添加到 a`Panel`中。新添加`DropDownList`的控件在回发时将不可用。您可以使用

```
HttpContext.Current.Request.Form["ID" + i] 
```

从发布请求中获取值。使用这些值，您可以添加具有新状态的新控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-04T08:33:00.687

在 Page_Init 中创建动态控件非常有效。

# java - android计时器异常onResume

> ID：12746267
> 
> 赞同：0
> 
> 时间：2012-10-05T12:27:48.283
> 
> 标签：java, android

我正在正确执行活动的定时任务，如下所示。但是，当活动 onResume 时，会抛出一个异常，“定时器任务已安排”。一旦执行任务，我就会取消计时器。如何解决？谢谢你

```
final Runnable setButton = new Runnable() {
        public void run() {
            myClass.aBridge.button_back.setVisibility(View.INVISIBLE);
                timer.cancel();
        }
    };

    TimerTask task = new TimerTask(){
        public void run() {
            webPush.this.runOnUiThread(setButton);
        }
    };

    @Override
    protected void onResume() {
        super.onResume();

            timer = new Timer();
            timer.schedule(task, 5000);

    } 
```

任务在 onResume 之前被调用一次：

```
 timer = new Timer();
        timer.schedule(task, 5000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:50:43.137

您只能为每个 TimerTask 实例调用 timer.schedule() 一次。在计划之前创建一个新实例。

编辑：对于您的代码，不要在定义它的位置初始化 TimerTask 成员变量。相反，在你安排它之前，在你的 onResume() 中创建一个新实例。

# android - 如何在 android 应用程序中为 REST API 结果实现缓存？

> ID：12746269
> 
> 赞同：17
> 
> 时间：2012-10-05T12:27:51.167
> 
> 标签：android, caching, android-sdk-2.3

我的 android 应用程序使用 REST API 获取数据。我想实现客户端缓存。我们有任何内置的类吗？

如果没有，这些是我可以重用的任何代码吗？我记得在某个时候遇到过这样的代码。但是我找不到它。

如果没有其他工作，我会写我自己的。以下是基本结构

```
public class MyCacheManager {

static Map<String, Object> mycache;

public static Object getData(String cacheid) {
    return mycache.get(cacheid);
}

public static void putData(String cacheid, Object obj, int time) {
    mycache.put(cacheid, obj);
}

} 
```

如何为缓存对象启用时间？还有 - 什么是最好的序列化方式？即使应用程序关闭并稍后重新打开（如果时间尚未到期），缓存也应该是完整的。

谢谢阿杰

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-16T07:07:01.153

现在很棒的库 Volley 在 Google I/O 2013 上发布，它有助于改善调用 REST API 的所有问题：

[**Volley 是一个库**](https://developers.google.com/events/io/sessions/325304728)，它是来自 Android 开发团队的名为 Volley 的库。这使得 Android 应用程序的联网更容易，最重要的是，更快。它管理**网络请求的处理和缓存，**并节省开发人员一次又一次编写相同的网络调用/缓存代码的宝贵时间。更少代码的另一个好处是更少的错误，这就是所有开发人员想要和追求的目标。

截击示例：[technotalkative](http://www.technotalkative.com/android-volley-library-example/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T12:32:21.773

最好的方法之一是使用 Matthias Käppler 的 ignited 库来发出将响应缓存在内存（弱引用）和文件中的 http 请求。它真的可以配置做一个或另一个或两者。

该库位于此处：[https](https://github.com/mttkay/ignition) ://github.com/mttkay/ignition ，示例位于此处：[https ://github.com/mttkay/ignition/wiki/Sample-applications](https://github.com/mttkay/ignition/wiki/Sample-applications)

就个人而言，我喜欢这个库，因为它被称为 Droidfu

希望这对您有帮助，就像对我 Ajay 一样！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-13T17:01:09.293

首先检查设备是否从互联网连接。

```
public class Reachability {

private final ConnectivityManager mConnectivityManager;

public Reachability(Context context) {
    mConnectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
}

public boolean isConnected() {
    NetworkInfo networkInfo = mConnectivityManager.getActiveNetworkInfo();
    return networkInfo != null && networkInfo.isConnectedOrConnecting();
}} 
```

如果设备是从互联网连接的，则从 API 获取数据并缓存它，否则从缓存中获取数据。

```
public class CacheManager {

Cache<String, String> mCache;
private DiskLruCache mDiskLruCache;
private final Context mContext;

public CacheManager(Context context) throws IOException {
    mContext = context;
    setUp();
    mCache = DiskCache.getInstanceUsingDoubleLocking(mDiskLruCache);
}

public void setUp() throws IOException {
    File cacheInFiles = mContext.getFilesDir();
    int version = BuildConfig.VERSION_CODE;

    int KB = 1024;
    int MB = 1024 * KB;
    int cacheSize = 400 * MB;

    mDiskLruCache = DiskLruCache.open(cacheInFiles, version, 1, cacheSize);
}

public Cache<String, String> getCache() {
    return mCache;
}

public static class DiskCache implements Cache<String, String> {

    private static DiskLruCache mDiskLruCache;
    private static DiskCache instance = null;

    public static DiskCache getInstanceUsingDoubleLocking(DiskLruCache diskLruCache){
        mDiskLruCache = diskLruCache;
        if(instance == null){
            synchronized (DiskCache.class) {
                if(instance == null){
                    instance = new DiskCache();
                }
            }
        }
        return instance;
    }

    @Override
    public synchronized void put(String key, String value) {
        try {
            if (mDiskLruCache != null) {
                DiskLruCache.Editor edit = mDiskLruCache.edit(getMd5Hash(key));
                if (edit != null) {
                    edit.set(0, value);
                    edit.commit();
                }
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    @Override
    public synchronized String get(String key) {
        try {
            if (mDiskLruCache != null) {
                DiskLruCache.Snapshot snapshot = mDiskLruCache.get(getMd5Hash(key));

                if (snapshot == null) {
                    // if there is a cache miss simply return null;
                    return null;
                }

                return snapshot.getString(0);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
        // in case of error in reading return null;
        return null;
    }

    @Override
    public String remove(String key) {
        // TODO: implement
        return null;
    }

    @Override
    public void clear() {
        // TODO: implement
    }
}

public static String getMd5Hash(String input) {
    try {
        MessageDigest md = MessageDigest.getInstance("MD5");
        byte[] messageDigest = md.digest(input.getBytes());
        BigInteger number = new BigInteger(1, messageDigest);
        String md5 = number.toString(16);

        while (md5.length() < 32)
            md5 = "0" + md5;

        return md5;
    } catch (NoSuchAlgorithmException e) {
        Log.e("MD5", e.getLocalizedMessage());
        return null;
    }
}} 
```

创建 CacheInterceptor 类来缓存网络响应并处理错误

```
public class CacheInterceptor implements Interceptor{
private final CacheManager mCacheManager;
private final Reachability mReachability;

public CacheInterceptor(CacheManager cacheManager, Reachability reachability) {
    mCacheManager = cacheManager;
    mReachability = reachability;
}

@Override
public Response intercept(Chain chain) throws IOException {
    Request request = chain.request();
    String key = request.url().toString();

    Response response;
    if (mReachability.isConnected()) {
        try {
            response = chain.proceed(request);
            Response newResponse = response.newBuilder().build();

            if (response.isSuccessful()) {
                if (response.code() == 204) {
                    return response;
                }
                // save to cache this success model.
                mCacheManager.getCache().put(key, newResponse.body().string());

                // now we know that we definitely have a cache hit.
                return getCachedResponse(key, request);
            }else if (response.code() >= 500) { // accommodate all server errors

                // check if there is a cache hit or miss.
                if (isCacheHit(key)) {
                    // if data is in cache, the return the data from cache.
                    return getCachedResponse(key, request);
                }else {
                    // if it's a miss, we can't do much but return the server state.
                    return response;
                }

            }else { // if there is any client side error
                // forward the response as it is to the business layers to handle.
                return response;
            }
        } catch (ConnectException | UnknownHostException e) {
            // Internet connection exception.
            e.printStackTrace();
        }
    }

    // if somehow there is an internet connection error
    // check if the data is already cached.
    if (isCacheHit(key)) {
        return getCachedResponse(key, request);
    }else {
        // if the data is not in the cache we'll throw an internet connection error.
        throw new UnknownHostException();
    }
}

private Response getCachedResponse(String url, Request request) {
    String cachedData = mCacheManager.getCache().get(url);

    return new Response.Builder().code(200)
            .body(ResponseBody.create(MediaType.parse("application/json"), cachedData))
            .request(request)
            .protocol(Protocol.HTTP_1_1)
            .build();
}

public boolean isCacheHit(String key) {
    return mCacheManager.getCache().get(key) != null;
}} 
```

现在在 OkHttpClient 中添加 this 拦截器，同时使用 Retrofit 创建服务。

```
public final class ServiceManager {
private static ServiceManager mServiceManager;

public static ServiceManager get() {
    if (mServiceManager == null) {
        mServiceManager = new ServiceManager();
    }
    return mServiceManager;
}

public <T> T createService(Class<T> clazz, CacheManager cacheManager, Reachability reachability) {
    return createService(clazz, HttpUrl.parse(ServiceApiEndpoint.SERVICE_ENDPOINT), cacheManager, reachability);
}

private <T> T createService(Class<T> clazz, HttpUrl parse, CacheManager cacheManager, Reachability reachability) {
    Retrofit retrofit = getRetrofit(parse, cacheManager, reachability);
    return retrofit.create(clazz);
}

public <T> T createService(Class<T> clazz) {
    return createService(clazz, HttpUrl.parse(ServiceApiEndpoint.SERVICE_ENDPOINT));
}

private <T> T createService(Class<T> clazz, HttpUrl parse) {
    Retrofit retrofit = getRetrofit(parse);
    return retrofit.create(clazz);
}

private <T> T createService(Class<T> clazz, Retrofit retrofit) {
    return retrofit.create(clazz);
}

private Retrofit getRetrofit(HttpUrl httpUrl, CacheManager cacheManager, Reachability reachability) {
    return new Retrofit.Builder()
            .baseUrl(httpUrl)
            .client(createClient(cacheManager, reachability))
            .addConverterFactory(getConverterFactory())
            .build();
}

private OkHttpClient createClient(CacheManager cacheManager, Reachability reachability) {
    return new OkHttpClient.Builder().addInterceptor(new CacheInterceptor(cacheManager, reachability)).build();
}

private Retrofit getRetrofit(HttpUrl parse) {
    return new Retrofit.Builder()
            .baseUrl(parse)
            .client(createClient())
            .addConverterFactory(getConverterFactory()).build();
}

private Retrofit getPlainRetrofit(HttpUrl httpUrl) {
    return new Retrofit.Builder()
            .baseUrl(httpUrl)
            .client(new OkHttpClient.Builder().build())
            .addConverterFactory(getConverterFactory())
            .build();
}

private Converter.Factory getConverterFactory() {
    return GsonConverterFactory.create();
}

private OkHttpClient createClient() {
    return new OkHttpClient.Builder().build();
}} 
```

缓存接口

```
public interface Cache<K, V> {

void put(K key, V value);

V get(K key);

V remove(K key);

void clear();} 
```

# c++ - 轮廓和矩形OPENcv c ++之间的交集

> ID：12746271
> 
> 赞同：4
> 
> 时间：2012-10-05T12:28:04.313
> 
> 标签：c++, opencv, intersection

我已经使用 cv.rectangle 绘制了一个矩形，并且有一个轮廓形状（来自 FindContours），该矩形被绘制在上面。

矩形在两点与完整轮廓相交。如何找到矩形和轮廓轮廓之间的这些交点。

我可以将这两个图像加在一起并寻找最大值，但我知道矩形顶点是如何存储的，因为我需要一个填充了一组点的线型向量

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:14:40.670

如果您确定矩形仅在 2 个点与形状相交，则可以遍历轮廓点，并检查这些点是否在矩形边框中。

```
std::vector<cv::Point> shape; // computed with FindContours
cv::Rect myRect; //whatever

const int NUMPOINTS = 2;
int found = 0;
for(std::vector<cv::Point>::iterator it = shape.begin(); it != shapes.end() && found < NUMPOINTS; ++it) {
  if (it->y == myRect.y && it->x >= myRect.x && it->x < myRect.x + width)
    // that point cross the top line of the rectangle
    found++; // you might want to store the point
  else if (// ... add the other checks here)

} 
```

# jquery - 非 webkit 浏览器菜单动画的奇怪行为

> ID：12746275
> 
> 赞同：0
> 
> 时间：2012-10-05T12:28:25.003
> 
> 标签：jquery, jquery-animate

我有一个关于非 webkit 浏览器的 jQuery 动画的问题。我在这里放了一个简单的版本[http://jsfiddle.net/AdrianoRizzo/t3XUd/](http://jsfiddle.net/AdrianoRizzo/t3XUd/) 菜单是水平的，当你悬停它时， li 应该垂直扩展，但那里会出现一些怪异......

有一些额外的标记`<span>s`对我有用的其他目的，我需要保留它们。

我不使用`.stop()`控制动画的方法，而是`filter(':not(:animated)')`我想保留的方法。

我已经做了一些搜索，但找不到任何东西，感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:21:22.687

使用`float:left;`而不是 `display:inline-block;`这个应该可以解决您的问题。

[http://jsfiddle.net/t3XUd/3/](http://jsfiddle.net/t3XUd/3/)

# javascript - 在 for 循环中生成 unicode 字符列表

> ID：12746278
> 
> 赞同：6
> 
> 时间：2012-10-05T12:28:54.813
> 
> 标签：javascript, escaping

我试图在 for 循环中列出使用计数器作为 unicode 字符的编号。这样做的目的，......让我们说我这样做是为了好玩。当然，经验丰富的 javascript 用户将能够告诉我这里出了什么问题。

要在 javascript 中使用 unicode 字符，可以按原样输入，也可以使用转义序列，例如：`\u8211`. 当我尝试将数字部分与转义的 u 结合起来时，我的问题就出现了。我得到的错误类似于“错误的转义字符”，这意味着`i`变量中的数字没有像我希望的那样与 \u 结合。

```
for (var i=65; i< 90; i++ ) {                                          
    anchor = document.createElement('a'),
    img = document.createElement('img'),
    character = "\\u"+i;
    img.setAttribute('alt', character);
    img.setAttribute('src', '');

    anchor.appendChild(document.createTextNode(i +": "));
    anchor.appendChild(img);

    anchor.setAttribute('title', character);
    body.appendChild(anchor);
    body.appendChild(document.createElement('br'));
} 
```

我试过的：

```
character = "\u{"+i+"}"

cha = ['\\u'];
cha.push(i);
cha.join(''); 
```

...我已经没有想法了

一个例子：

[jsfiddle.net/Dn4Vv/](http://jsfiddle.net/Dn4Vv/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T12:36:29.677

最大的问题是`\uXXXX`在解析代码的时候被解释；就像你不能写出`'"' + '"'`与 相同的意思`""`（因为`"`代码中实际是双引号，而`'"'`字符串是*包含* `"`），你也不能写出`'\\u' + 'XXXX'`与 相同的意思`'\uXXXX'`。

正如 Brad Christie 在上面的评论中所说，您应该使用[该函数`String.fromCharCode`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/fromCharCode)将整数转换为您需要的字符：

```
 character = String.fromCharCode(i); 
```

第二个问题——这是学术性的，由于上述原因，但我想我应该提到它——`\uXXXX`表示法期望字符代码以*十六进制*表示法给出，并且零填充到恰好四个十六进制数字，而你是以*十进制*表示，并且没有零填充。例如，您正在编写`\u65`，但 Unicode 转义语法`A`实际上是`\u0041`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:31:15.143

试试这个： `String.fromCharCode(i);`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:35:44.110

```
character = String.fromCharCode(i); // works for me 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-05T16:58:11.953

尝试这样的事情：

```
<script language=Javascript>
charCode=2665;
uc='"\\u' + charCode +'"';
document.write('<a title="' + charCode + '">' + eval(uc) + '</a>');
</script> 
```

# ruby-on-rails - 基于 2 列定义唯一主键

> ID：12746280
> 
> 赞同：38
> 
> 时间：2012-10-05T12:29:08.170
> 
> 标签：ruby-on-rails, primary-key, composite-primary-key

我想为基于 2 列的记录定义一个唯一键：“id”和“语言”

让用户提交以下字符串： id=1 语言=en 值=blabla 英语 id=1 语言=fr 值=blabla 法语

我尝试使用 set_primary_key 和 add_index 但它不起作用（ add_index :words, ["id", "language_id"], :unique => true ）

我有以下模型：

```
class Word < ActiveRecord::Base
  belongs_to :dictionnary
  belongs_to :language

  attr_accessible :lang, :rev, :value, :dictionnary_id, :language_id

  validates :value, :uniqueness => true

end 
```

和这个

```
class Language < ActiveRecord::Base
    has_many :words

    attr_accessible :lang
end 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-05T12:33:01.337

`add_index :words, ["id", "language_id"], :unique => true`

它应该工作。也许您的数据库中已经有一些非唯一数据并且无法创建索引？但是（正如@Doon 注意到的那样，这将是多余的，因为 id 总是唯一的）。所以你需要在两列上创建主键。

要在 rails 中定义 2 列主键，请使用：

```
create_table :words, {:id => false} do |t|
  t.integer :id
  t.integer :language_id
  t.string :value
  t.timestamps
end
execute "ALTER TABLE words ADD PRIMARY KEY (id,language_id);" 
```

并使用此 gem 在您的模型中设置 primary_key：[http](http://rubygems.org/gems/composite_primary_keys) ://rubygems.org/gems/composite_primary_keys ：

```
class Word < ActiveRecord::Base
    self.primary_keys = :id,:language_id
end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-03-23T22:31:27.027

在 Rails 5 中，您可以执行以下操作：

```
create_table :words, primary_key: %i[id language_id] do |t|
  t.integer :id
  t.integer :language_id
  t.string :value
  t.timestamps
end 
```

也不需要在模型上设置`primary_key`属性。`Word`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-24T07:44:59.243

**模型**

```
class User < ActiveRecord::Base
  has_secure_password
  self.primary_keys = :name
end 
```

**移民**

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :name, null: false
      t.string :emailid
      t.string :password_digest
      t.integer :locked, :default => 0
      t.text :secretquestion
      t.string :answer

      t.timestamps null: false
    end
    add_index :users, :name, :unique => true
  end
end 
```

你会得到这张桌子

![图片](../Images/1b7738a643d18d18f5bfb28be5bc2a07.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T12:42:19.810

正如我在评论中所说，如果你尝试这个，你会遇到障碍，而且它并没有真正支持开箱即用。您可以查看[http://compositekeys.rubyforge.org](http://compositekeys.rubyforge.org) ，它提供了一种在 Rails 中执行复合主键的方法。我没有使用它，因为我还没有需要（通常当我有一些复合键的东西时，就像它只是一个没有主键的连接表和连接对（HABTM）上的唯一索引）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T12:43:06.930

根据您的用例，您可能想尝试使用[复合键 gem](http://compositekeys.rubyforge.org/)，它允许您定义复合主键并增强 ActiveRecord 来处理这种模型（对于与此模型的关联或 url_for 助手等有很大帮助）。

因此，如果您计划将此模型用作任何其他导轨模型，那么 gem 将有很大帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-16T22:55:58.267

在将站点迁移到 Rails 时，我遇到了类似的问题。我有一个表格，其中存储了我的网站可用的每种语言的文本数据，所以我有这样的东西：

```
CREATE TABLE Project_Lang(
    project_id INT NOT NULL,
    language_id INT NOT NULL,
    title VARCHAR(80),
    description TEXT,

    PRIMARY KEY pk_Project_Lang(project_id, language_id),

    FOREIGN KEY fk_Project_Lang_Project(project_id)
        REFERENCES Project(project_id)
        ON DELETE RESTRICT ON UPDATE CASCADE,

    FOREIGN KEY fk_Project_Lang_Language(language_id)
        REFERENCES Language(language_id)
        ON DELETE RESTRICT ON UPDATE CASCADE
)ENGINE = InnoDB DEFAULT CHARACTER SET = utf8 DEFAULT COLLATE = utf8_spanish_ci; 
```

但是由于 Rails 不处理开箱即用的复合主键，我被迫改变表的结构，所以它有自己的主键：

```
CREATE TABLE Project_Lang(
    project_lang_id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
    project_id INT NOT NULL,
    language_id INT NOT NULL,
    title VARCHAR(80),
    description TEXT,

    UNIQUE INDEX(project_id, language_id),

    FOREIGN KEY fk_Project_Lang_Project(project_id)
        REFERENCES Project(project_id)
        ON DELETE RESTRICT ON UPDATE CASCADE,

    FOREIGN KEY fk_Project_Lang_Language(language_id)
        REFERENCES Language(language_id)
        ON DELETE RESTRICT ON UPDATE CASCADE
)ENGINE = InnoDB DEFAULT CHARACTER SET = utf8 DEFAULT COLLATE = utf8_spanish_ci; 
```

我还为之前创建复合主键的列创建了一个唯一索引，这样就不会插入重复的记录。然后在我的 Rails 模型中，我可以简单地：

```
self.primary_key = "project_lang_id" 
```

这就是诀窍。不是我想要的，但比战斗框架更好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-01T03:30:12.510

就像@rogal111 说的那样，但是如果主键已经存在，那么你会想要这样做

```
ALTER TABLE sections DROP PRIMARY KEY, ADD PRIMARY KEY(id, workspace_id, section_key); 
```

# iphone - Iphone 音频路由选择按钮

> ID：12746284
> 
> 赞同：1
> 
> 时间：2012-10-05T12:29:12.497
> 
> 标签：iphone, audio, view

我已经看到语音备忘录应用程序有一个显示音频路由选择菜单的按钮。如何添加这样的按钮（或显示代码中的路线选择）。我尝试使用`MPVolumeView`但有时只显示按钮，我想始终显示按钮（并且不包括音量栏）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:06:59.950

设法通过以下方式添加它：

```
MPVolumeView *volumeView = [MPVolumeView new]
volumeView.showsVolumeSlider = NO;
volumeView.showsRouteButton = YES;
[volumeView sizeToFit]; 
```

# android - 屏幕方向更改时的 RoboService 异常

> ID：12746289
> 
> 赞同：2
> 
> 时间：2012-10-05T12:29:25.940
> 
> 标签：android, android-service, android-orientation, roboguice

嗨，

我有一个活动绑定/取消绑定到`OnStart()/OnStop()`. 如果我在水平握住手机的同时打开列表中的链接（在浏览器中打开），应用程序会崩溃。

我想提一下，该活动在清单中被限制为纵向模式，并且是`singleTop`.

我收到以下错误：

```
ERROR/AndroidRuntime(9864): FATAL EXCEPTION: main
        java.lang.NullPointerException
        at roboguice.service.RoboService.onConfigurationChanged(RoboService.java:92)
        at android.app.ActivityThread.performConfigurationChanged(ActivityThread.java:3618)
        at android.app.ActivityThread.handleConfigurationChanged(ActivityThread.java:3746)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1308)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4745)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
        at dalvik.system.NativeStart.main(Native Method) 
```

我注意到，如果在方向改变时服务仍然绑定，那么应用程序就会崩溃。

我的问题：

1.  RoboGuice 2.0 中是否存在错误或者我只是使用错误？
2.  有没有办法在方向改变之前取消绑定服务？
3.  如果对于另一个活动我有绑定/解除绑定，`OnCreate()/OnDestroy()`并且我想保留该绑定直到活动被破坏，在这些情况下我该怎么做？

# ant - 如何增加 Sonar Java 堆大小？

> ID：12746292
> 
> 赞同：2
> 
> 时间：2012-10-05T12:29:32.883
> 
> 标签：ant, sonarqube

我正在用声纳分析一个相当大的项目。前几次运行正常，但现在出现错误。与时间机器和违规分析器有关：

```
java.lang.OutOfMemoryError: GC overhead limit exceeded
at 
org.sonar.plugins.core.timemachine.ViolationTrackingDecorator.mapViolations(ViolationTrackingDecorator.java:131)
    at org.sonar.plugins.core.timemachine.ViolationTrackingDecorator.decorate(ViolationTrackingDecorator.java:70) 
```

我使用 ANT 执行声纳。我可以以某种方式增加java堆大小吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T14:39:51.993

Sonar ANT 任务作为 ANT 的一部分执行，因此您需要使用标准 ANT 环境参数设置 JVM 堆。例如：

```
export ANT_OPTS=-Xmx256m 
```

# c# - 了解服务器上证书的检索

> ID：12746295
> 
> 赞同：1
> 
> 时间：2012-10-05T12:29:42.973
> 
> 标签：c#, x509certificate

我制作了一个简单的控制台应用程序，它遍历机器上的所有证书

```
private static X509Certificate2 GetSpecifiedCertificate(StoreName storeName, StoreLocation storeLocation)
{
    X509Store store = new X509Store(storeName, storeLocation);
    store.Open(OpenFlags.ReadOnly);

    X509Certificate2Collection certs = store.Certificates;

    if (certs.Count > 0)
    {
        Console.WriteLine(string.Format("found {0} certficates", certs.Count));

        for (int i = 0; i < certs.Count; i++)
        {
            X509Certificate2 cert = certs[i];
            Console.WriteLine(cert.Thumbprint);
        }
    }
    else
        Console.WriteLine("found no certficates at all");

    return null;
} 
```

使用`StoreName.CertificateAuthority`and`StoreLocation.LocalMachine`作为变量，在我的 Windows Server 2008R2 上，即使安装了更多证书，我也只能获得 3 个证书

控制台应用程序输出： ![在此处输入图像描述](../Images/21560232f6cd3a54e064848d8f28fffe.png)

`CertificateAuthority`在商店位置 下安装证书![在此处输入图像描述](../Images/eadfeb8456c5c2320d2dde7f6e5018cc.png)

> 如何获得丢失的？

我特别想检索[Apple证书](http://www.apple.com/certificateauthority/)来签署文件，但无论我如何安装公共证书，我都无法从商店循环中检索它......

> 我总是需要重新启动机器吗？有什么特殊的技巧可以得到它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:19:37.257

How did you open the certificate window? I think you are looking at the certificates under your account instead of the computer account. However, the code queries certificates from the computer account, which usually has less certificates installed than your account.

To open the certificates window for the computer account,

1.  Execute mmc at command prompt.
2.  File | Add/Remove Snap-in.
3.  Add Certificates.
4.  Choose Computer account.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:01:26.407

通常，它应该与加载“CertificateAuthority”存储并从那里获取它一起工作，所以这有点奇怪。

但是，根据 MSDN：http: [//msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.storename.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.storename.aspx)

应该可以像这样加载 Apple 证书：

```
var appleCert = new  X509Certificate2("appleRoot.cer"); 
```

只是为了让你开始。

# php - 处理来自类的表单，php

> ID：12746301
> 
> 赞同：0
> 
> 时间：2012-10-05T12:30:05.813
> 
> 标签：php, forms, oop, class, post

我有一个快速的问题。我一直在开发和设计一个面向对象的站点，但是到目前为止，整个过程的一部分还不是面向对象的。那是处理表单的脚本。

我已经四处寻找并没有找到答案，所以我不完全确定是否可能，希望你们能够为我澄清。

我的表单发布到一个标准脚本，例如 login.php，我希望我的表单发布到一个类，或者更准确地说，该类中的一个方法。这是可能吗？

非常感谢，杰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T12:32:00.510

您不能直接发布到一个类，但您可以将参数发送到该类中的函数，例如：

```
$class = new Forms();
$class->processForm($_POST, 'login');

// it would call `processForm()` from `Forms` class and send `$_POST` and `login` as parameters 
```

或者您可以使用以下`__construct()`功能：

```
class Forms {

    function __construct($array, $type){
        switch($type){
            case 'login':
                $this->processLogin($array);
                break;
            //......
        }
    }

    function processLogin($array){
        // do something with $array;
    }

}

$class = new Forms($_POST, 'login'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:45:42.163

您可以使用像这样的基类，它在构造函数阶段自动处理自身并继承具有指定字段的特定表单。不要忘记一些渲染代码。（此处未显示，因为它是系统特定的。）

```
class Form {

    protected $name = "generic_form";
    protected $method = "POST";
    protected $url = "";

    protected $fields = array();
    protected $data = array();
    protected $submits = array();
    protected $errors = array();
    protected $required = null;
    protected $submitsrequired = array();

    public function __construct() {
        $this->FillSubmits();
        $this->FillData(); 
        foreach($this->fields as $key => $value) {
            if(isset($this->data[$value["name"]])) {
                $this->fields[$key]["value"] = $this->data[$value["name"]];
            }
        }
        $action = null;
        foreach($this->submits as $key => $value) {
            if (isset($this->data[$value["name"]])) {
                $action = $value["name"];
                break;
            }

        }
        if ($action === null) {
            return;
        }
        if (!$this->innerValidate($action)) {
            return;
        }
        $this->Commit($action);
    }

    protected function Validate($action, $name, $value) {
      // Put validation code here
    }

    protected function Commit($action) {
      // Put code to execute when form is correctly filled here
    }

    protected function FillSubmits() {
        foreach($this->fields as $field) {
            if($field["type"] == "submit")
                $this->submits[] = $field;
        }

    }

    protected function FillData() {
        foreach($this->fields as $field) {
            if(isset($_POST[$field["transmitname"]]))
                $this->data[$field["name"]] = $_POST[$field["transmitname"]];
        }
    }

    protected function innerValidate($action) {
        $retval = true;
        if ($this->required !== null) {
            foreach($this->required as $value) {
                if (!isset($this->data[$value])) {
                    return false;
                }
            }
        }
        if (isset($this->submitsrequired[$action])) {
            foreach($this->submitsrequired[$action] as $value) {
                if (!isset($this->data[$value])) {
                    return false;
                }
            }
        }
        foreach($this->data as $key => $value) {
            if(is_callable(array($this, "Validate_".$key))) {
                $retval &= call_user_func(array($this, "Validate_".$key),$action, $value);
            }
            else {
                $retval &= $this->Validate($action, $key, $value);
            }
        }
        return $retval;
    }

} 
```

# javascript - 带有外部 Javascript 脚本的 GWT 库

> ID：12746303
> 
> 赞同：4
> 
> 时间：2012-10-05T12:30:26.707
> 
> 标签：javascript, gwt

我为 javascript 可视化库 ( [dygraphs](http://dygraphs.com/) ) 编写了一个 GWT 库。
这是一个简单的包装器，使用`JavascriptObject`并`JSNI`调用 dygraphs 代码。
到目前为止，我已将`dygraphs.js`脚本包含在我的 GWT 模块 xml 文件中，并且运行良好。

但是，当我最近尝试使用时，`SuperDevMode`我不得不切换到`xsiframe linker`不允许脚本标签的那个。
使用跨站点链接器在 GWT 库中包含外部 javascript 脚本的最佳实践是什么？

我能想到的最好的办法是将 Javascript 文件包含`TextResource`在 a 中`ClientBundle`，然后使用[ScriptInjector](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/core/client/ScriptInjector.html)包含它？

这是推荐的方法还是有更好的方法？

我必须确保 dygraphs.js 在使用我的 GWT 包装器的应用程序访问它之前已完全加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:19:28.113

Including your external javascript as a TextResource and injecting it yourself is a very good way making sure its loaded with your app. (and you are saving the extra http request while benefitting from GWT cache mechanism)

If you are running on thin client you may want to separate the actual injection in the DOM from parsing, which you could easily do if you inject the textresource with a comment from top to bottom and then later on remove it.

# php - 如果冻结，如何重新启动 php 脚本？

> ID：12746310
> 
> 赞同：0
> 
> 时间：2012-10-05T12:30:47.093
> 
> 标签：php, shell, concurrency, parallel-processing, cron

它运行“某种恶魔”。

事实上，我的引导文件如下所示：

```
<?
$command = "php -f httpdocs/shell/run.php -- -job search/updater::run";
while(true) {
  passthru($command);
} 
```

不幸的是，在 passthru 之后发生的事情涉及一些严重错误的东西，并且有时图书馆会冻结。我使用 tick 函数进行了调试，结果发现这是在等待`while(!feof`外部 http 资源......

但是，我想调度该过程，并且 while 循环完成的所有内容都触及文件。

当时间戳过时时，我想终止该进程并重新启动它。

但是 passthru 是阻塞的，所以它不会在那个脚本中到达那里。

我需要以某种方式将它分派到后台并有一个循环持续监视它是否仍在运行或文件修改时间戳是否过时并杀死旧进程并启动一个新进程，或者只是启动一个新进程。

我该怎么做，或者有更好/更简单的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:41:33.657

不久前，我在命令行脚本上进行了失速检测。听起来有些事情需要发生......

1) 在您正在运行的命令中为 http:// 请求添加超时

2）您可以使用 while() 语句对其进行监控，您必须使用以下内容：

```
$stillRunning = true;
while ($stillRunning) {
    exec('ps -ef | grep httpdocs/shell/run.php', $processes); //will get all process which contain the path to the file

    //loop through all processes to determine if it's still running.  If so, grab the process ID and kill it'

    exec('kill '.$processId);

    //if it's still there, this will do the job
    if ($this->_ifProcessExists($processId)) {
        exec('kill -9 '.$processId);
    }

    sleep(2);
} 
```

这是我为检测失速以满足我们的需求而构建的类...

```
<?php
/**
 * GMC Management Class
 * 
 */

class GMC {

    private $executablePath = '/usr/local/PNetT/PNetTCNetClient',
            $outPath = '/usr/local/PNetT/tmpData/SOB/',
            $workflowPath = '',
            $graphicPath = '',
            $logRecipient = 'my@email.com',
            $stalledThreshold = 10, //in seconds
            $originalProcesses = array(),
            $processes = array(),
            $log = array();

    public function __construct () {
        $this->workflowPath = $this->outPath.'workflows/';
        $this->graphicPath = $this->outPath.'graphics/';
    }

    /**
     * Adds an image to the GMC graphics directory
     * 
     * @param string $imgPath The absolute path of the image to add
     */
    public function addImage ($imgPath) {
        exec('cp '.$imgPath.' '.$this->graphicPath);
    }

    /**
     * Determines if a process is stalled
     */
    public function isStalled ($processes = false) {
        if ($processes === false) {
            $processes = $this->_getProcesses();
            $this->originalProcesses = $processes;
        }

        foreach ($processes as $process) {
            if (array_key_exists('duration', $process) && $process['duration'] <= (time() - $this->stalledThreshold)) {
                $this->_addLog("detected #".$process['processId']." as a stalled process");
                return true;
            }
        }

        return false;
    }

    /**
     * Fixes GMC's being stalled
     * Will also report the document that caused the stall
     */
    public function fixStalled () {
        $this->_restart();

        $this->reportLog();
    }

    /**
     * Sends the log to the development team for review
     */
    public function reportLog () {
        $body = "Here's a report how GMC was handled during this last stall:

Oldest process:\n
        ID | COMMAND\n";

        $oldest = $this->_getOldestProcess();
        $body .= "        ".$oldest['processId']." | ".$oldest['command']."\n";

        $body .= "
Logs:\n";

        foreach ($this->log as $log) {
            $body .= "        ".$log."\n";
        }

        $body .= "
Processes:\n
        ID | COMMAND\n";

        foreach ($this->processes as $process) {
            $body .= "        ".$process['processId']." | ".$process['command']."\n";
        }

        mail($this->logRecipient, 'GMC Stalled Report', $body);
    }

    /**
     * Restarts GMC
     * Must be conducted after GMC's stalled processes have been killed
     */
    private function _restart () {
        //kill all GMC processes
        foreach ($this->_getProcesses(true) as $process) {
            $this->_killProcess($process['processId']);
        }

        //restart GMC
        exec('bash /usr/local/PNetT/pnet.sh');

        $this->_addLog("GMC has been restarted");
    }

    /**
     * Restarts GMC
     * Must be conducted after GMC's stalled processes have been killed
     */
    private function _getOldestProcess () {
        $oldest = array(
            'timestamp' => 0,
            'processId' => 0
        );
        foreach ($this->_getProcesses() as $process) {
            if ($process['user'] == 'wwwuser' && $process['duration'] > $oldest['timestamp']) {
                $oldest = array(
                    'timestamp' => $process['duration'],
                    'processId' => $process['processId']
                );
            }
        }

        return $this->processes[$oldest['processId']];
    }

    /**
     * Get a list of all GMC processes
     */
    private function _getProcesses ($newList = false) {
        if ($newList == true || count($this->processes) == 0) {
            //exec('ps -ef | grep GMC', $processes);
            //sample processes for testing, above command is for live usage
            $processes = array(
                'ps -ef | grep GMC',
                'wwwuser   1767 31199  0 12:40 ?        00:00:00 /scripts/GMC/PNetT-5.1-SP1/PNetTCNetClient.bin -o /usr/local/PNetT/tmpData/SOB/workflows/master_ppo_sob_3col.wfd -e PDF -f /usr/local/PNetT/tmpData/SOB/Master PPO-LP2069 Solution PPO 1500-15-20 MOCKUP_temp.pdf -useincluded * -difDataInput1 /usr/local/PNetT/tmpData/SOB/Master PPO-LP2069 Solution PPO 1500-15-20 MOCKUP.txt -difDataInput2 /usr/local/PNetT/tmpData/SOB/Master PPO-LP2069 Solution PPO 1500-15-20 MOCKUP-table.txt',
                'wwwuser   2364  1207  0 12:41 ?        00:00:00 /scripts/GMC/PNetT-5.1-SP1/PNetTCNetClient.bin -o /usr/local/PNetT/tmpData/SOB/workflows/master_ppo_sob_3col.wfd -e PDF -f /usr/local/PNetT/tmpData/SOB/Master PPO-LP2045 mock up_temp.pdf -useincluded * -difDataInput1 /usr/local/PNetT/tmpData/SOB/Master PPO-LP2045 mock up.txt -difDataInput2 /usr/local/PNetT/tmpData/SOB/Master PPO-LP2045 mock up-table.txt',
                'wwwuser   2465  2378  0 12:42 ?        00:00:00 /scripts/GMC/PNetT-5.1-SP1/PNetTCNetClient.bin -o /usr/local/PNetT/tmpData/SOB/workflows/master_ppo_sob_3col.wfd -e PDF -f /usr/local/PNetT/tmpData/SOB/Master PPO-PBARR Test 12-20_temp.pdf -useincluded * -difDataInput1 /usr/local/PNetT/tmpData/SOB/Master PPO-PBARR Test 12-20.txt -difDataInput2 /usr/local/PNetT/tmpData/SOB/Master PPO-PBARR Test 12-20-table.txt',
                'wwwuser  19370  7900  0 13:17 ?        00:00:00 /scripts/GMC/PNetT-5.1-SP1/PNetTCNetClient.bin -o /usr/local/PNetT/tmpData/SOB/workflows/master_ppo_sob_3col.wfd -e PDF -f /usr/local/PNetT/tmpData/SOB/Master PPO-LP2069_temp.pdf -useincluded * -difDataInput1 /usr/local/PNetT/tmpData/SOB/Master PPO-LP2069.txt -difDataInput2 /usr/local/PNetT/tmpData/SOB/Master PPO-LP2069-table.txt',
                'root     19948 19508  0 13:18 pts/6    00:00:00 grep GMC',
                'wwwuser  26685 17061  0 12:25 ?        00:00:00 /scripts/GMC/PNetT-5.1-SP1/PNetTCNetClient.bin -o /usr/local/PNetT/tmpData/SOB/workflows/diff_report.wfd -e PDF -f /usr/local/PNetT/tmpData/SOB/Master PPO-LP2069 Solution PPO 1500-15-20 MOCKUP_differences.pdf -useincluded * -difDataInput1 /usr/local/PNetT/tmpData/SOB/Master PPO-LP2069 Solution PPO 1500-15-20 MOCKUP-report.txt -difDataInput2 /usr/local/PNetT/tmpData/SOB/Master PPO-LP2069 Solution PPO 1500-15-20 MOCKUP-table-report.txt',
                'root     32017     1 89 May03 ?        12-18:02:22 /scripts/GMC/PNetT-5.1-SP1/PNetTNetServer.bin -tempdir /usr/local/GMC/PNetT-5.1-SP1/tmpData -D'
            );

            $this->processes = array();
            foreach ($processes as $idx => $process) {
                if ($idx > 1) {
                    $pieces = preg_split("/\s+/", $process, 8);

                    //skip the grep filter process
                    if ($pieces[7] != 'grep GMC') {
                        $this->processes[$pieces[1]] = array(
                            'user' => $pieces[0],
                            'processId' => $pieces[1],
                            'duration' => strtotime($pieces[4]),
                            'command' => $pieces[7]
                        );
                    }
                }
            }
        }

        return $this->processes;
    }

    /**
     * Kills a process
     * 
     * @param int $processId The process to be killed
     */
    private function _killProcess ($processId) {
        //nicely
        exec('kill '.$processId);

        //if it's still there, this will do the job
        if ($this->_ifProcessExists($processId)) {
            exec('kill -9 '.$processId);

            $this->_addLog("process #".$processId." wasn't nicely killed, I had to force it");
        } else {
            $this->_addLog("process #".$processId." was nicely killed");
        }
    }

    /**
     * Determines if a process is still running
     * 
     * @param int $processId The process to be checked
     */
    private function _ifProcessExists ($processId) {
        exec('ps '.$processId, $return);

        return count($return) > 1;
    }

    /**
     * Adds a message to the log
     */
    private function _addLog ($message) {
        $this->log[] = $message;
    }
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:41:53.813

事实上，解决问题比解决问题要好。就我而言，我正在处理第 3 方代码。然而 phps 滴答处理功能使我能够查明正确的代码部分，并且问题就在 php.net 主页上作为一个大警告以及解决方案。

它与超时无关，而是与此函数在损坏的套接字上的行为有关。

> 警告 如果 fsockopen() 打开的连接没有被服务器关闭，feof() 将挂起。要解决此问题，请参见以下示例：
> 
> Example #1 使用 feof() 处理超时
> 
> 返回 feof($fp); }
> 
> /* 假设 $fp 之前被 fsockopen() 打开 */
> 
> $开始=空；$timeout = ini_get('default_socket_timeout');
> 
> while(!safe_feof($fp, $start) && (microtime(true) - $start) < $timeout) { /* 句柄 */ } ?>

# android - 如何使用 android 备份服务备份和恢复应用程序数据库？

> ID：12746320
> 
> 赞同：3
> 
> 时间：2012-10-05T12:31:24.910
> 
> 标签：android, sqlite

有没有人知道如何备份和恢复应用程序的数据库数据？

# php - Paypal 自定义变量解决方案

> ID：12746321
> 
> 赞同：3
> 
> 时间：2012-10-05T12:31:26.517
> 
> 标签：php, paypal, paypal-ipn, paypal-sandbox

我正在尝试使用贝宝作为我网站的付款方式。

我的网站只销售一种虚拟货币，比如在线游戏中的“钻石”。

因此，在阅读后我开始使用 Express Checkout for Digital Goods，对吗？还是我必须使用其他付款方式？

那么我的问题是当使用 Express Checkout for Digital Goods 时，如何传递自定义变量？

假设我想将数据库中的 user_id、diamond_id 和其他一些变量支付给 paypal api。似乎贝宝不支持自定义变量传递 api 调用。我想在用户完成付款后，Paypal 通知我的服务器通过 user_id 和我传递的一些其他变量完成付款，这样我很容易知道细节。

搜索后我找到了一些解决方案，

1.  第一个解决方案是将“TOKEN”（从“SetExpressCheckout”方法生成）和我属于TOKEN的自定义变量存储在数据库中，然后在支付完成后paypal将通知我的服务器之前保存的相同TOKEN。所以我会根据TOKEN查询。
2.  第二种解决方案是在 RETURNURL 变量[http://www.mysite.com/successpayment.php?user_id=13&diamond_id=88](http://www.mysite.com/successpayment.php?user_id=13&diamond_id=88)中使用 get 样式所以我很容易抓住 GET 变量。

哪种解决方案是正确的？有什么解决办法吗？以及如何确保付款确认的安全，我的意思是如果有人知道并破解了我的返回网址。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T10:55:21.517

如果您使用的是[PAYPAL EXPRESS CHECKOUT NVP API](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/howto_api_reference)和类**[SetExpressCheckOut()](https://www.x.com/paypal-apis-setexpresscheckout-php-5.3/nvp)**

**参考支付认证**

```
$paypal = new SetExpressCheckout($totalPrice); 
```

*此类调用程序实例化您将用于设置将客户重定向到 Paypal 并返回所需参数的方法。必须设置总价格的一个变量来完成这个类的启动。*

```
 $paypal->setNVP("RETURNURL", "http://yourURL.com/confirm.php");
    $paypal->setNVP("HDRIMG", "http://yourURL.com/image.jpg");
    $paypal->setNVP("EMAIL", "$userEmail"); // customer's email
    $paypal->setNVP("AMT", $totalPrice);
    $paypal->setNVP("SHIPPINGAMT", "32");
    $paypal->setNVP("CUSTOM", "Anything you want to put");  // user_id, diamond_id
    $paypal->setNVP("INVNUM", $uniqueID); // your Order number this include the id of your order  (order table  will also have user_id, diamond_id related to the order so you will automaticaly get them once you send the orderid  )
    $paypal->getResponse(); 
```

*在您提交转账到 Paypal 之前，请知道您可以使用该`setNVP()`功能发送可选值，以自定义付款流程。默认情况下，可以在`etc/NVP/SetExpressCheckout.ini file`. `getResponse()`将用户的浏览器发送到 Paypal 以验证信用信息。特别是您必须在名为 etc/NVP/PayPalNVP.ini 的文件中在测试模式（沙盒）和实时模式之间进行可变设置的 URL。*

**完成销售**

```
$paypal  = new GetExpressCheckoutDetails;
$details = $paypal->getResponse(); 
```

**DoExpressCheckoutPayment()**

```
$payment  = new DoExpressCheckoutPayment($totalPrice);
$response = $payment->getResponse(); 
```

**检查状态**

```
if ($response['PAYMENTSTATUS'] == 'Completed') {
    # process information
} 
```

**显示来自 getResponse 的结果**

```
echo '<pre>';
print_r($details);
echo '<pre>';
print_r($response); 
```

[对此](http://moorberry.net/blog/paypal-express-checkout-nvp-api/)的详细说明

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:07:31.987

PayPal API 确实允许您发送自定义数据。不，永远不要使用返回 URL 为用户提供他们所支付的费用。任何人都可以访问该 URL。

PayPal API 的工作方式是您（通常）向 PayPal 发送一个带有大量隐藏字段的表单，您可以设置的字段之一是“自定义”，因为您可以存储您喜欢的任何内容；所以你想要做的是存储用户表中的用户ID之类的东西，以及你想给他们多少虚拟货币，也许用逗号分隔，所以你可以在变量上使用explode()它返回以分离数据。

PayPal 付款完成后，如果您使用 Express Checkout，PayPal 会发送 IPN（即时付款通知）。此 IPN 请求转到您指定的页面，因此您需要创建一个[http://yourwebsite.ca/ipn.php](http://yourwebsite.ca/ipn.php)例如。然后需要验证此通知，然后您可以提取自定义字段，获取用户 ID 和虚拟货币数量等。我建议您使用预先存在的[PHP PayPal 类](https://github.com/drewjoh/phpPayPal)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T04:35:57.953

PayPal 即时付款通知的工作方式 - 一旦您收到 PayPal 的回复，您将消息发回 PayPal 并确认它是已验证的还是无效的。

您通过 HTTPS 向 PayPal 发布此帖子，因此“中间人攻击”不应该成为问题（我认为这是您上面的后续问题）。请在[此处](https://www.x.com/instant-payment-notification-4)参考 IPN 的完整代码示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T10:03:56.713

**像这样的系统**怎么样：

1.  当用户向购物篮添加东西或单击购买链接时，将一行添加到您自己的数据库中，其中包含您需要的所有自定义字段，然后获取该行的 ID (mysql_insert_id())。

2.  然后在 PayPal 表单中有一个隐藏字段，该字段将被命名`notify_url`并包含指向数据库行 ID`paypal_ipn.php?id={ID}`所在位置之类的链接。`{ID}`

3.  付款成功后，PayPal 会将购物车详细信息发布到您的脚本中，您可以获取所有订单详细信息以及使用`$_GET['id']`检索数据库中设置的自定义变量。

使用 paypal_ipn.php 脚本，您当然需要检查发布的数据是否有效，并确保它来自 PayPal 本身并且没有被欺骗。这是您的 paypal_ipn.php 文件的一个很好的资源：http: [//net.tutsplus.com/tutorials/php/using-paypals-instant-payment-notification-with-php/](http://net.tutsplus.com/tutorials/php/using-paypals-instant-payment-notification-with-php/)

# c# - 通过 c# 获取 iframe 文档对象

> ID：12746326
> 
> 赞同：0
> 
> 时间：2012-10-05T12:31:38.200
> 
> 标签：c#, multithreading, iframe, domdocument, mshtml

我有这个代码片段需要检索 iframe 的文档对象并将其保存在一个对象中。

```
//just a wrapper object to store the document object   
DocObj obj = new DocObj(HtmlDoc);

ManualResetEvent aDoneEvents = new ManualResetEvent(false);
string errorMessage = "";
Thread aThread = new Thread(() =>
{
    try
    {
        //finding the iframe element in the current document
        IHTMLElement IElem = LocatorBuilder.GetLocator(Target)
                   .Find(this.HTMLDoc);

        obj.HTMLDoc = (IElem as HTMLIFrame).document as HTMLDocument;

    }
    catch (Exception e)
    {
        errorMessage = e.Message;
    }
    aDoneEvents.Set();
});

aThread.SetApartmentState(ApartmentState.STA);
aThread.IsBackground = true;
aThread.Start();
aDoneEvents.WaitOne();
if (errorMessage != "")
{
    throw new Exception(errorMessage);
}
HtmlDoc = obj.HTMLDoc; 
```

但是当我尝试检索新的文档对象时，我在最后一行得到了这个异常：

> 函数评估已禁用，因为之前的函数评估超时。您必须继续执行才能重新启用函数评估

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-13T11:17:09.637

```
mshtml.IHTMLDocument3 doc3 =   (mshtml.IHTMLDocument3)webBrowser.Document.DomDocument;
mshtml.IHTMLFrameBase2 frame = (mshtml.IHTMLFrameBase2)doc3.getElementById("iframe_name");
if (frame != null)
{
    mshtml.IHTMLWindow2 w2 = (mshtml.IHTMLWindow2)frame.contentWindow;
    doc3 = (mshtml.IHTMLDocument3)w2.document;
} 
```

# c++ - 在这种情况下如何在 Eclipse 上链接库？

> ID：12746331
> 
> 赞同：0
> 
> 时间：2012-10-05T12:31:54.907
> 
> 标签：c++, eclipse, cmake, fltk

我有一个 c++ 项目可以使用 cmake 很好地编译。

但是当我去eclipse时，出现了一些问题。

```
Description Resource    Path    Location    Type
undefined reference to `FcMatrixRotate' test_new        line 0, external location: fl_font.cxx  C/C++ Problem
undefined reference to `FcPatternAddBool'   test_new        line 0, external location: fl_font.cxx  C/C++ Problem
undefined reference to `FcPatternAddDouble' test_new        line 0, external location: fl_font.cxx  C/C++ Problem
undefined reference to `FcPatternAddInteger'    test_new        line 0, external location: fl_font.cxx  C/C++ Problem
undefined reference to `FcPatternAddMatrix' test_new        line 0, external location: fl_font.cxx  C/C++ Problem
undefined reference to `FcPatternAddString' test_new        line 0, external location: fl_font.cxx  C/C++ Problem
undefined reference to `FcPatternCreate'    test_new        line 0, external location: fl_font.cxx  C/C++ Problem
undefined reference to `FcPatternDestroy'   test_new        line 0, external location: fl_font.cxx  C/C++ Problem
undefined reference to `FcUtf8Len'  test_new        line 0, external location: fl_font.cxx  C/C++ Problem
undefined reference to `FcUtf8ToUcs4'   test_new        line 0, external location: fl_font.cxx  C/C++ Problem
undefined reference to `jpeg_calc_output_dimensions'    test_new        line 0, external location: Fl_JPEG_Image.cxx    C/C++ Problem
undefined reference to `jpeg_CreateDecompress'  test_new        line 0, external location: Fl_JPEG_Image.cxx    C/C++ Problem
undefined reference to `jpeg_destroy_decompress'    test_new        line 0, external location: Fl_JPEG_Image.cxx    C/C++ Problem
undefined reference to `jpeg_finish_decompress' test_new        line 0, external location: Fl_JPEG_Image.cxx    C/C++ Problem
undefined reference to `jpeg_read_header'   test_new        line 0, external location: Fl_JPEG_Image.cxx    C/C++ Problem
undefined reference to `jpeg_read_scanlines'    test_new        line 0, external location: Fl_JPEG_Image.cxx    C/C++ Problem
undefined reference to `jpeg_resync_to_restart' test_new        line 0, external location: Fl_JPEG_Image.cxx    C/C++ Problem
undefined reference to `jpeg_start_decompress'  test_new        line 0, external location: Fl_JPEG_Image.cxx    C/C++ Problem
undefined reference to `jpeg_std_error' test_new        line 0, external location: Fl_JPEG_Image.cxx    C/C++ Problem
undefined reference to `jpeg_stdio_src' test_new        line 0, external location: Fl_JPEG_Image.cxx    C/C++ Problem
undefined reference to `XftDrawChange'  test_new        line 0, external location: fl_font.cxx  C/C++ Problem
undefined reference to `XftDrawCreate'  test_new        line 0, external location: fl_font.cxx  C/C++ Problem
undefined reference to `XftDrawSetClip' test_new        line 0, external location: fl_font.cxx  C/C++ Problem
undefined reference to `XftDrawString32'    test_new        line 0, external location: fl_font.cxx  C/C++ Problem
undefined reference to `XftFontMatch'   test_new        line 0, external location: fl_font.cxx  C/C++ Problem
undefined reference to `XftFontOpen'    test_new        line 0, external location: fl_font.cxx  C/C++ Problem
undefined reference to `XftFontOpenPattern' test_new        line 0, external location: fl_font.cxx  C/C++ Problem
undefined reference to `XftFontOpenXlfd'    test_new        line 0, external location: fl_font.cxx  C/C++ Problem
undefined reference to `XftTextExtents32'   test_new        line 0, external location: fl_font.cxx  C/C++ Problem 
```

在eclipse中，我进入project->properties->c/c++ build->settings->tool settings->GCC C++ linker->libraries，然后在“Libraries(-l)”中添加jpeg、Xft和fontconfig，并添加/usr/lib/x86_64-linux-gnu 在“库搜索路径 (-L)”中。但这是行不通的。

这是我的 CMakeLists.txt，它在 cmake 中运行良好。

```
cmake_minimum_required(VERSION 2.6)

PROJECT(PROSTVIEW)

SET(CMAKE_BUILD_TYPE DEBUG)
SET(CMAKE_CXX__FLAGS -O3 -pipe -ffast-math -Wno-deprecated)

# Chargement Package
# FLTK
 FIND_PACKAGE ( FLTK )
 IF ( FLTK_FOUND )
    INCLUDE_DIRECTORIES( ${FLTK_INCLUDE_DIR} )
 ENDIF ( FLTK_FOUND )

# ITK
FIND_PACKAGE ( ITK )
IF ( ITK_FOUND )
    INCLUDE( ${USE_ITK_FILE} )
ENDIF( ITK_FOUND )

# VTK
FIND_PACKAGE ( VTK )
IF ( VTK_FOUND )
    INCLUDE( ${USE_VTK_FILE} )
ENDIF( VTK_FOUND )
SET(VTK_LIBRARIES vtkCommon vtkRendering vtkWidgets vtkGraphics vtkGenericFiltering vtkzlib)

# vtkFlRenderWindowInteractor
SET(VTKFL_INCLUDE_DIR "include/vtkfl")
SET(VTKFL_CPP 
${VTKFL_INCLUDE_DIR}/vtkFlRenderWindowInteractor.cxx)

# Auxiliary_Tools
SET(AT_DIR "include/Auxiliary_Tools")
SET(AT_INCLUDE_DIR ${AT_DIR}/include)
SET(AT_LIBRARY_DIR ${AT_DIR}/lib)

#Nifty
SET(NII_DIR "include/nifti")
SET(NII_SRC 
${NII_DIR}/vtkNIfTIReader.cxx
${NII_DIR}/vtkNIfTIWriter.cxx
${NII_DIR}/vtkAnalyzeReader.cxx
${NII_DIR}/vtkAnalyzeWriter.cxx
${NII_DIR}/vtknifti1_io.cxx
${NII_DIR}/vtkznzlib.cxx)

#Other include
SET(PROSTVIEW_INCLUDE_DIR "include")
SET(PROSTVIEW_SRC
${PROSTVIEW_INCLUDE_DIR}/ContourTmt.cpp
${PROSTVIEW_INCLUDE_DIR}/conversion.cpp 
${PROSTVIEW_INCLUDE_DIR}/TmtMatrix.cpp) 

# VOLUME Widget
SET(VOLUME_WIDGET_DIR "include/GUI")
SET(VOLUME_WIDGET 
${VOLUME_WIDGET_DIR}/VOLUME_Loader.cpp 
${VOLUME_WIDGET_DIR}/VOLUME_Widget.cpp 
${VOLUME_WIDGET_DIR}/VOLUME_Mouse_Widget.cpp 
${VOLUME_WIDGET_DIR}/VOLUME_3DView.cpp 
${VOLUME_WIDGET_DIR}/CONTOUR_Loader.cpp 
${VOLUME_WIDGET_DIR}/ProstView.cpp)

# MODULES
SET(MODULE_DIR "Module")

# SEGMENTATION
SET(SEGMENTATION_DIR "Module/Segmentation")
SET(SEGMENTATION 
${SEGMENTATION_DIR}/DDC2D.cpp 
${SEGMENTATION_DIR}/DDC3D.cpp 
${SEGMENTATION_DIR}/DDC3DHu.cpp 
${SEGMENTATION_DIR}/DDC3DPlus.cpp 
${SEGMENTATION_DIR}/DDC3DBal.cpp 
${SEGMENTATION_DIR}/IMAGE_ENERGY.cpp 
${SEGMENTATION_DIR}/REGULARIZATION.cpp 
${SEGMENTATION_DIR}/OPTIMAL_SURFACE_DETECTION.cpp 
${SEGMENTATION_DIR}/OPTIMAL_MULTIPLE_SURFACES_DETECTION.cpp 
${SEGMENTATION_DIR}/RESAMPLE_From_Prostate.cpp
${SEGMENTATION_DIR}/RECTAL_WALL_US.cpp 
${SEGMENTATION_DIR}/BLADDER_MRI.cpp 
${SEGMENTATION_DIR}/RECTUM_MRI.cpp 
${SEGMENTATION_DIR}/REGION_GROWING.tpp )

#MESH
SET(MESH_DIR "Module/Mesh")
SET(MESH
${MESH_DIR}/GENERIC_MESH.cpp
${MESH_DIR}/ELLIPSOID_MESH.cpp
${MESH_DIR}/PROSTATE_MESH.cpp
${MESH_DIR}/TUBULAR_MESH.cpp
${MESH_DIR}/OPEN_MESH.cpp
${MESH_DIR}/QUADRIC_MESH.cpp
${MESH_DIR}/ELLIPTICAL_CYLINDER_MESH.cpp 
${MESH_DIR}/CONTOURS_MAN_MESH.cpp)

#STUDY
SET(STUDY_DIR "Module/Statistics")
SET(STUDY
${STUDY_DIR}/PROFILE.cpp
${STUDY_DIR}/Histogram.cpp
${STUDY_DIR}/HISTOGRAM_FROM_MESH.cpp
${STUDY_DIR}/TRAINING_SET_ALIGNMENT.cpp
${STUDY_DIR}/APPEARANCE_MODEL.cpp)

# MOMENTS
SET(MOMENTS_DIR "Module/Moments")
SET(MOMENTS 
${MOMENTS_DIR}/KRAWTCHOUK_Moments.tpp 
${MOMENTS_DIR}/TCHEBICHEF_Moments.tpp 
${MOMENTS_DIR}/GEOMETRIC_Moments.tpp)

#VALIDATION
SET(VALIDATION_DIR "Module/Evaluation")
SET(VALIDATION 
${VALIDATION_DIR}/Metrics.cpp)

# Include et Link Directories
INCLUDE_DIRECTORIES(${FLTK_INCLUDE_DIR} ${VTK_INCLUDE_DIRS} ${VTKFL_INCLUDE_DIR} ${AT_INCLUDE_DIR} ${NII_DIR} ${PROSTVIEW_INCLUDE_DIR} ${VOLUME_WIDGET_DIR} ${MODULE_DIR})
LINK_DIRECTORIES(${FLTK_LIBRARY_DIR} ${VTK_LIBRARY_DIRS} ${AT_LIBRARY_DIR} ${PROSTVIEW_INCLUDE_DIR} ${VOLUME_WIDGET_DIR} ${MODULE_DIR})

# Sources
SET(SRC main.cpp) 

# Executables and "stand-alone " librairies
ADD_EXECUTABLE(PROSTVIEW ${SRC} ${PROSTVIEW_SRC} ${VTKFL_CPP} ${VOLUME_WIDGET} ${SEGMENTATION} ${MESH} ${STUDY} ${MOMENTS} ${VALIDATION} ${NII_SRC})

# Linkage
TARGET_LINK_LIBRARIES(PROSTVIEW  ${FLTK_LIBRARIES} ${VTK_LIBRARIES} ${ITK_LIBRARIES} libfontconfig.so libXft.so) 
```

我正在和喜欢 eclipse 的教授一起工作，所以我需要让它在 eclipse 中工作。我在配置中错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:29:17.423

问题不在于 Eclipse，而是（粗略一瞥）因为您忘记链接到 CMakeLists.txt 文件中的三个库，从外观上看，您需要链接到 FontConfig、libjpeg 和 X 库。当您在 Eclipse 中使用 CMake 时，Eclipse 使用 CMake 进行构建，而不管理构建本身。

# c - 在 printf 参数列表中使用 ( )。这个语法是什么意思？

> ID：12746345
> 
> 赞同：5
> 
> 时间：2012-10-05T12:32:45.953
> 
> 标签：c

我遇到一个代码：（
`printf("\tout:\t%-14.14s\n", (sprintf(tmpbuf[0], "[%s]", mystring), tmpbuf[0]));`
）中的那些句子与 sprintf 是什么意思？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T12:38:11.133

它是一个涉及逗号运算符的表达式，将以下内容放在一行中：

```
sprintf(tmpbuf[0], "[%s]", mystring);
printf("\tout:\t%-14.14s\n", tmpbuf[0]); 
```

逗号运算符计算两个参数并返回其正确的参数，即`tmpbuf[0]`.

# google-drive-api - 如何将 Google Drive 范围添加到 Google Apps MarketPlace 应用程序清单

> ID：12746352
> 
> 赞同：2
> 
> 时间：2012-10-05T12:33:07.530
> 
> 标签：google-drive-api, google-apps-marketplace

我想添加对应用程序清单的 google drive api feed 访问权限，以便能够使用 2 腿 Oauth 访问驱动器文件，有关如何添加此内容的任何帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:39:26.500

您需要指定以下范围

```
https://docs.google.com/feeds/   //for documents,presentations and other file types
https://spreadsheets.google.com/feeds/   // for spreadsheets 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T20:00:23.580

您可以使用文档提要，它是等效的：

> [https://docs.google.com/feeds](https://docs.google.com/feeds)

# typo3 - FCE 选择器元素配置

> ID：12746359
> 
> 赞同：1
> 
> 时间：2012-10-05T12:33:23.473
> 
> 标签：typo3, typoscript, templavoila

如何在灵活内容元素（FCE）的选择框元素中添加选项和值？如何在其他元素的打字稿中使用该值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:57:58.277

如何在灵活内容元素（FCE）的选择框元素中添加选项和值？

编辑字段并单击表单链接：

![](../Images/05b00e0fd174a79193958dfdb103628c.png)

如何在其他元素的打字稿中使用该值？

例如。在其他元素 TS

```
10 = TEXT
10.field = field_2bf3c2 
```

其中 field_2bf3c2 id 字段名称查看图像。

# ruby-on-rails - 导轨的好购物车宝石

> ID：12746365
> 
> 赞同：3
> 
> 时间：2012-10-05T12:33:39.353
> 
> 标签：ruby-on-rails, gem, shopping-cart

我需要在我的汽车零部件应用目录中添加一些功能。我看到很多关于我的问题。但主要区别在于，我不需要像 spree gem 之类的东西，也不需要建立目录......我只需要添加到我的目录购物车（添加到购物车、购物车、订单）。有什么好的解决办法吗？简单的购物车（没有电子支付系统等）？？？因为狂欢很难定制（我会说更简单）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-05T12:42:11.290

您可以使用 Saas 产品[Shopify](http://www.shopify.com/)，这是最好的。

# tdd - 新 Java 应用程序的 TDD - 我应该从哪里开始？

> ID：12746372
> 
> 赞同：1
> 
> 时间：2012-10-05T12:34:03.720
> 
> 标签：tdd

**目标**：在典型的企业 Java 环境中测试 TDD。

**语境 ：**

使用的框架（即使它是矫枉过正，我练习[基于项目的学习](http://www.scotthyoung.com/blog/2008/05/05/use-projects-to-educate-yourself-for-free/)）：

*   DAO：休眠
*   春季国际奥委会
*   前端：Spring MVC + Twitter Boostrap（如果可能）
*   TDD：JUnit
*   数据库：PostgreSQL

我的项目是一个简单的计费系统，可以帮助自由职业者创建、编辑和打印/发送账单给客户。

创建和配置我的项目后，我不知道从哪里开始。假设我的第一个功能是创建具有唯一编号和标题的账单。

**问题**：我应该首先测试什么？

*   具有 createBill(String title) 方法的域层会生成一个唯一的序列号？我会模拟数据库层。
*   首先是 UI，模拟服务层？我不知道该怎么做。

提前感谢您的回答，

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:23:32.127

从测试开始:-)

你的系统是做什么的？

```
public class BillingSystemTest {
    @Test
    public void generatesBills() {
        Bill bill = new BillingSystem().generate()
        assertNotNull(bill)
    }
} 
```

第一次测试完成！

让它通过，继续下一个测试......

```
@Test
public void generatesAnInvoiceNumberForEachBill() {
    Bill bill = new BillingSystem().generate()
    assertEquals(1, bill.getNumber())
}

// ...and the next
@Test
public void generatesUniqueInvoiceNumbersForEachBill() {
    BillingSystem bs = new BillingSystem()
    assertEquals(1, bs.generate().getNumber())
    assertEquals(2, bs.generate().getNumber())
}

@Test
public void generatesAnInvoiceSubjectWhenNoneIsSpecified() {
    Bill bill = new BillingSystem().generate()
    assertEquals("Invoice #1 from ACME Corp.", bill.getSubject())
}

@Test
public void allowsForCustomSubjectsOnBills() {
    Bill bill = new BillingSystem().generate("Custom subject")
    assertEquals("Custom subject", bill.getSubject())
} 
```

我显然已经跳过了这里的重构步骤，但是现在您已经有了测试以及随之而来的代码，您需要对其进行评估以获得更多机会。我想象代码看起来像这样。

```
public class BillingSystem {
    private nextInvoiceNumber = 1;

    public Bill generate() {
        return generate("Invoice #" + nextInvoiceNumber + " from ACME Corp.");
    }

    public Bill generate(String subject) {
        Bill bill = new Bill(nextInvoiceNumber, subject)
        nextInvoiceNumber++
        return bill;
    }
} 
```

看这段代码，似乎没问题，但可能违反了单一职责原则（SRP）。这里`BillingSystem`生成账单以及管理发票编号。这是一个重构的机会。重构后，您的设计可能如下所示：

```
public class BillingSystem {
    private InvoiceNumbering invoiceNumbering = new InvoiceNumbering()

    public Bill generate() {
        return generate("Invoice #" + invoiceNumbering.peekNext() + " from ACME Corp.");
    }

    public Bill generate(String subject) {
        Bill bill = new Bill(invoiceNumbering.generateNext(), subject)
        nextInvoiceNumber++
        return bill;
    }
} 
```

你的设计更好，你的测试都通过了。接下来要做的是重构测试以从中删除实现细节。他们最终可能看起来像：

```
@Test
public void generatesBills() {
    Bill bill = new BillingSystem().generate()
    assertNotNull(bill)
}

@Test
public void generatesAnInvoiceNumberForEachBill() {
    // Using hand rolled mocks
    MockInvoiceNumbering in = new MockInvoiceNumbering()
    in.generateNextShouldReturn(4)

    Bill bill = new BillingSystem(in).generate()
    assertEquals(4, bill.getNumber())
}

@Test
public void generatesUniqueInvoiceNumbersForEachBill() {
    MockInvoiceNumbering in = new MockInvoiceNumbering()

    BillingSystem bs = new BillingSystem(in)

    bs.generate();
    bs.generate();

    assertEquals(2, in.numberOfTimesGenerateNextWasCalled)
}

@Test
public void generatesAnInvoiceSubjectWhenNoneIsSpecified() {
    Bill bill = new BillingSystem().generate()
    assertEquals("Invoice #1 from ACME Corp.", bill.getSubject())
}

@Test
public void allowsForCustomSubjectsOnBills() {
    Bill bill = new BillingSystem().generate("Custom subject")
    assertEquals("Custom subject", bill.getSubject())
} 
```

作为此重构的一部分，您可能会围绕您的`InvoiceNumbering`类创建一些测试。

希望这是一个足够的开始。留下了很多东西。:-)

希望有帮助！

布兰登

# java - Java 应用程序构建

> ID：12746374
> 
> 赞同：0
> 
> 时间：2012-10-05T12:34:10.697
> 
> 标签：java, jakarta-ee, build

我们有一个 Java EE 应用程序，它需要**一些 jar 文件**、一个**JVM**和**Tomcat**。

如何创建一个构建，用户可以通过它在非 Java Windows 环境中安装和运行我的应用程序？

用户不需要单独安装 JVM 或 Tomcat，但我的构建将为我的应用程序配置 JVM 和 Tomcat。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:38:51.083

Java 安装程序会创建几个注册表项，但它们不是运行所必需的。所以你可以做什么：

1.  请求许可将 Java 与您的代码一起打包（Java VM*是*受版权保护的作品，因此您不能简单地做您想做的事）
2.  安装 Java 一次，然后简单地将硬盘上的新文件添加到安装程序中
3.  解压 Tomcat 并添加这些文件
4.  将您的应用程序复制到 tomcat/webapp/ 文件夹中
5.  编写一个打包和配置所有内容的脚本

# sql - SQL Server：选择不同的最大（日期）组

> ID：12746380
> 
> 赞同：0
> 
> 时间：2012-10-05T12:34:40.933
> 
> 标签：sql, database, select, distinct

这是我的桌子`offs`：

```
date ----------   oid ------   head -----  cnt

2012-1-9 -----13      --------  10   -----------1
2012-1-11 --- 13      --------  6  -----------  2
2012-1-22 --- 13      --------  10   -----------3
2012-1-22 --- 11      --------  10   -----------4 
```

我需要一个 select 函数，其结果是`max(date)`from oid 和 distinct 头，如下所示：

```
2012-1-11 --- 13      --------  6  -----------  2
2012-1-22 --- 13      --------  10   -----------3
2012-1-22 --- 11      --------  10   -----------4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:39:58.397

这个查询怎么样：

```
SELECT a.*, b.cnt from(
SELECT MAX(Date) AS Date, oid, head
from offs group by oid, head
)a inner join offs b on a.Date=b.Date and a.oid=b.oid and a.head=b.head 
```

# ajax - 如何在 Spring MVC 中以 Json 形式返回对象列表

> ID：12746382
> 
> 赞同：7
> 
> 时间：2012-10-05T12:34:45.390
> 
> 标签：ajax, jquery, spring-mvc

我正在尝试获取要在 Spring 3 MVC 应用程序上呈现的对象列表，并希望通过 Ajax 执行此操作。

所以在我的春季课上，我有：

```
@RequestMapping(value = "/viewSearchEnquiriesAjax", method = RequestMethod.GET, headers = "Accept=application/json")
public @ResponseBody List<Enquiry> getEnquiriesBySearchAjax(@RequestParam String name) {
    Search search =  new Search();
    search.setFirstName(name);
    return searchEnquiries(search);
} 
```

但是当它运行时我得到一个 500（内部服务器错误）。当我在浏览器中调试时，这会表现出来`'GET http://localhost:8080/SpringMVC/viewSearchEnquiriesAjax?name=peter 500 (Internal Server Error)'`

我可以成功返回一个没有错误的对象。Spring Json 映射器（Jackson）可以正确转换吗？我错过了一些基本的东西吗？

我的javascript如下：

```
function doAjaxPost() {
// get the form values
var firstName = $('#firstName').val();
$.getJSON("/SpringMVC/viewSearchEnquiriesAjax", { name: firstName }, function(result) {
    alert("Success");
 });

} 
```

我的查询对象是一个实体：

```
@Entity
@Table(name = "enquiries")
public class Enquiry implements java.io.Serializable{

    private static final long serialVersionUID = -5093725544297637792L;

    protected Long id;
    protected Date created = new Date();
    ...
    ...

    public Enquiry() {
    }

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "id", unique = true, nullable = false)
    public Long getId() {
        return this.id;
    }

    public void setId(Long id) {
        this.id = id;
    }
   ...
   ... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T20:19:27.753

对于 Jackson，由于类型擦除，您必须创建一个强类型列表类：

```
public class EnquiryList extends ArrayList<Enquiry> {
} 
```

然后从您的控制器返回此列表：

```
@RequestMapping(value = "/viewSearchEnquiriesAjax", method = RequestMethod.GET, headers = "Accept=application/json")
public @ResponseBody EnquiryList getEnquiriesBySearchAjax(@RequestParam String name) {
    EnquiryList list = new EnquiryList();
    ...
    return list;
} 
```

另请查看有关类似问题的[答案。](https://stackoverflow.com/a/6179440/285288)

# ruby-on-rails - 将 Rabl 转换为 Erb json 视图

> ID：12746383
> 
> 赞同：2
> 
> 时间：2012-10-05T12:34:46.470
> 
> 标签：ruby-on-rails, erb, rabl

我正在尝试将此 .json.rabl 视图转换为 .json.erb 并且由于我对 ruby​​ 非常陌生，因此我正在寻找实现这一目标的方向。解决此问题的最佳方法是什么？

```
`object @perform
attributes :id => :team_id 
attributes :perform_id
node(:fb_user_id) {|x| x.user.fb_user_id.to_s}
node(:first_name) {|x| x.user.first_name}
node(:last_name) {|x| x.user.last_name}
attributes :level, :jersey, :height, :weight, :positions
node(:stat_source) {|x| Stat::SOURCES.key(x.stat_source)}

if !@nomvps
  node({}, :if => lambda{ |m| @event.present? }) do |x| 
  {
  mvp_votes: Vote.player_vote_count(@event.id, x.id)
  }
  end
end

if !@nostats && (@_options[:event] || @event)
node :stats do |perform| 
  Hash[*perform.source_stats.where(event_id: (@_options[:event].try(:id) || @event.id)).map{|x|[x.name, x.value]}.flatten]
end 
end` 
```

* * *

 `## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T18:03:48.217

Erb 与 rabl 等模板语言相反——您创建所需的 json，然后使用 erb 插入值，而不是像在 rabl 中那样使用代码定义结构。

在带有 <% %> 的 erb 周围文本中表示一些 ruby​​ 代码（用于分配、循环等）：

```
<% x = "output" %> 
```

<%= %> (NB = sign) 表示将通过调用 to_s 输出到模板的 ruby​​ 代码（任何代码）：

```
<%= x.to_json %> 
```

没有被这些符号包围的任何内容都将按原样输出。

因此，您应该能够使用假值创建所需的 json，然后调用相关的 ruby​​ 代码以在运行时获取真实值。例如像这样的片段（不熟悉 rabl，因此 json 的格式可能需要调整）：

```
[{  "perform" :
  {
    "id" : <%= @perform.team_id %>, 
    "user" : <%= @perform.perform_id %>,
    ...

  }
}] 

<% if !@nomvps %>
  <% node({}, :if => lambda{ |m| @event.present? }) do |x|   %>
  {
  mvp_votes: <%= Vote.player_vote_count(@event.id, x.id) %>
  }
  <% end %>
<% end %> 
```

例如，对于作为哈希干净映射到 json 的对象，您还可以考虑创建 to_json 方法，而不是将它们放在这样的模板中，但是对于像这样没有干净映射的复杂结构，模板可能是最好的。

我将从一个名为 xx.json.erb（纯 json）的文件中的你想要的 json 开始，然后开始使用 erb 插入值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:58:57.960

也许这不是对确切问题的答案，但在 Rails 中执行 JSON 视图的认可方法是使用`jbuilder`.

JBuilder 的 API 与 RABL 非常相似，但它是由同一个 rails 核心团队完成的，因此它集成了所有内部组件，如缓存助手（未来还有缓存依赖）、部分等。

[https://github.com/rails/jbuilder](https://github.com/rails/jbuilder)`

# jquery - 如何使用 jquery 使我的无序列表进行分页？

> ID：12746384
> 
> 赞同：-3
> 
> 时间：2012-10-05T12:34:45.780
> 
> 标签：jquery, html, css

我想知道如何`<ul>`进行分页？

示例：上一个 1 2 3 4 5 下一个

当我点击下一步时，它会像这样

上一页 2 3 4 5 6 下一页

当我点击 prev 它会像这样

上一页 1 2 3 4 5 下一页

等等...

```
<ul class="pages">
 <li>Prev</li>
 <li>1</li>
 <li>2</li>
 <li>3</li>
 <li>4</li>
 <li>5</li>
 <li>6</li>
 <li>7</li>
 <li>8</li>
 <li>9</li>
 <li>10</li>
 <li>Next</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:37:23.033

使用 jQuery .nextUntil( [**)**](http://api.jquery.com/nextUntil/)和[**.prevUntil()**](http://api.jquery.com/prevUntil/)

这些链接已经有演示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:39:22.243

您可以使用[`slice`](http://api.jquery.com/slice/)，这样：

```
$(".pages li").slice(5).css("display", "none"); 
```

然而，这将包括您的“下一个”项目，但使用 jQuery，您可以轻松计算`li`s 并排除最后一个索引 - 读者练习。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T12:58:08.333

你也可以使用`:gt(n)//n denotes number`

```
$(function (){
     $("li:gt(5)").css("display", "none");
        });​ 
```

[JsFiddle 演示](http://jsfiddle.net/tpBdc/5/)

如果您想查看 6 到 10 个元素，那么您可以

```
$(function (){
     $("li:lt(6)").css("display", "none");
        });​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-11T06:26:46.397

试试我创建的这个 JS 函数：

```
 function showPage (pageIndex, pageSize) {
            var items = $(".pages > li");
            $(items).hide();

            // Range
            var start = pageIndex * pageSize;
            var end = start + pageSize;

            $(items).slice(start, end).show();

        } 
```

然后调用 showPage(0, 10); // PageNumber=1, PageSize=10

# c# - 在gridview中的Linkbutton生成的弹出窗口中添加itemtemplate列值作为查询字符串

> ID：12746391
> 
> 赞同：1
> 
> 时间：2012-10-05T12:35:02.003
> 
> 标签：c#, asp.net

如果有人可以帮助我，将不胜感激。

我的网格视图中有两列，第一列是用于捕获网格行数的模板字段，第二列是一个链接按钮，单击它我正在打开一个弹出窗口。

```
<Columns>
<asp:TemplateField HeaderText="RowNum" Visible="false"> 
<ItemTemplate> 
<asp:Label ID="lblRowNum" runat="server" Text="<%#Container.
DataItemIndex + 1>"></asp:Label>
</ItemTemplate> 

<asp:TemplateField HeaderText="FileName"> 
<ItemTemplate>
<asp:LinkButton ID="btn"  runat="server" Text='<%#Eval("Empid")%>'
CommandName="Click" OnClientClick='<%# Eval("FileName", "window.open
(\"abc.aspx\",null,\"location=0,status=0,toolbar=0,
menubar=0,resizable=1\",\"true\");")%>'/>
</ItemTemplate> 
</asp:TemplateField> 
```

这很好用，但是我想将标签文本（来自第一列）作为弹出窗口的查询字符串传递。

可以在代码隐藏中还是在我的javascript代码的window.open中完成，我正在调用链接按钮的onclick事件。

提前致谢

# c# - Visual Studio 数据提供程序错误

> ID：12746393
> 
> 赞同：0
> 
> 时间：2012-10-05T12:35:17.077
> 
> 标签：c#, visual-studio-2010, objectdataprovider

每当我在 Visual Studio2010 Ultimate 中单击我的数据库 .dbml 文件时，我都会收到错误消息 - Visual Studio 遇到了意外错误 - 有谁知道可能是什么原因造成的。同一个项目在不同的机器上运行良好。我怀疑它是 dataprovider 文件，但我不确定如何重新安装它。

# c# - Visual Studio 2012 RTM 中可移植类库中新出现的 api

> ID：12746398
> 
> 赞同：1
> 
> 时间：2012-10-05T12:35:39.217
> 
> 标签：c#, visual-studio

嗨，这是第一次在 sof 中提问。

我想这是由 VS2012 RC 和 RTM 之间的不同支持引起的。

我在 VS2012 RC 中有一个可移植的类库。我致力于 TFS 并使用 VS 2012 RTM 下载到新的 Windows 8 机器。

在旧环境中它运行良好，但在新环境中出现错误：

未找到“Windows.Foundation”库@“使用 Windows.Foundation”行

微软的家伙说 VS2012 对可移植库的支持是有限的，所以不支持的库可能会通过编译，即使可移植库实际上不支持该库。

我只是在库中仅使用 Windows.Foundation 中的 Point，因此我可以轻松地排除该类。但是，如果我们不能依赖 VS2012 代码检查器，那么保持可移植库规则的最佳方法是什么？

谢谢你。

# xampp - 如何在 xampp 中更改 Web 服务器文件夹位置

> ID：12746402
> 
> 赞同：5
> 
> 时间：2012-10-05T12:35:45.440
> 
> 标签：xampp

我已经安装了 xampp，默认情况下我的网站文件存储在 htdocs 中。如何更改网络目录路径？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T12:40:47.967

编辑文件 /opt/lampp/etc/httpd.conf 并更改包含当前 Web 目录路径的行。它应该以 DocumentRoot 开头。将所有具有当前路径的位置更新为您希望的路径。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T12:46:38.670

可以通过编辑此路径“\xampp\apache\conf\”中的“httpd.conf”文件来完成。

更改以“目录 ...”开头的行。

请注意，所有以井号 (#) 开头的行都只是注释，用于描述文件中存在的命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:36:24.083

搜索文件“httpd.conf”并更改该文件中的路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-10T12:58:52.173

[更改本地主机的名称？](http://w3-video.com/Web_Tools/XAMPP/xampp_access_change_localhost.html) 因此而不是 localhostdomain/webdirectory

你可能有 newdomain/webdirectory ？

# javascript - $.grep .. 的 Jquery 库源代码！

> ID：12746404
> 
> 赞同：0
> 
> 时间：2012-10-05T12:35:48.400
> 
> 标签：javascript, jquery, web-services

> **可能重复：**
> [什么是!! JavaScript 中的（不是不是）运算符？](https://stackoverflow.com/questions/784929/what-is-the-not-not-operator-in-javascript)

$.grep 的 Jquery 库源代码.....

grep：函数（元素，回调，inv）{

```
 var retVal,
        ret = [],
        i = 0,
        length = elems.length;
    inv = !!inv;

    // Go through the array, only saving the items
    // that pass the validator function
    for ( ; i < length; i++ ) {
        retVal = !!callback( elems[ i ], i );
        if ( inv !== retVal ) {
            ret.push( elems[ i ] );
        }
    }

    return ret;
}, 
```

在上面的这个例子中，jquery grep 在 jquery 库的源代码上。为什么他将 inv 设为默认值是未定义的，他更改为布尔值，而**retVal**存储**!!callback**并更改为布尔值。问题是 if 语句如何工作......？？可以给我一些更详细的解释..!! 谢谢。

```
 retVal = !!callback( elems[ i ], i );
        if ( inv !== retVal ) {
            ret.push( elems[ i ] );
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:47:18.953

`!`是一元运算符，它将操作数强制为布尔值，然后返回相反的值。将它们中的两个放在一起（`!!`），你会得到一个被强制为布尔值和双重否定的操作数——它是布尔表示。大多数人更喜欢它`Boolean(val)`，`!!val`因为它更容易理解。

```
// this calls "callback" and converts the return value to a boolean
retVal = !!callback( elems[ i ], i );
// if the converted return value is not identical to "inv" then... 
if ( inv !== retVal ) {
    // elems[i] is pushed on to the top of the array "ret"
    ret.push( elems[ i ] );
} 
```

请注意，条件`inv !== retVal`也可以编写，`inv != retVal`因为我们都知道`inv`并且`retVal`是布尔类型，但是即使比较运算符可以使用，始终使用恒等运算符也是一个好习惯。

# sql - 多列的 SQL 案例

> ID：12746407
> 
> 赞同：1
> 
> 时间：2012-10-05T12:36:08.977
> 
> 标签：sql, sqlite, select, join, case

嗨，我查看了“多列案例”问题，没有看到与此相同的内容，所以我想我应该问一下。

基本上我有两个要加入的表（都是子查询的结果）。它们具有相同的列名。如果我加入他们的 id 并且`SELECT *`我得到每一行是这样的：

`A.id, A.x, A.y, A.z, A.num, B.id, B.x, B.y, B.z, B.num`

我想要的是一种只选择 num 值较低的表列的方法。所以在这种情况下，结果表总是有 5 列，`id, x, y, z, num`我不在乎`id, x, y, z, num`事后来自哪个表。如果它们相等，任何一个表结果都可以。

`SELECT CASE WHEN A.num < B.num THEN A.* ELSE B.* END FROM A JOIN B ON A.id=B.id`

会很完美，但你只能在 CASE 语句中返回一列，我可以为每一列使用一个 CASE，但这似乎很浪费（我的实际数据库中的每个表中有 8 个，所以我会有 8 个 CASE 语句）。

这是 SQLite 顺便说一句。任何帮助，将不胜感激！

* * *

**编辑以获取有关 A 和 B 的更多信息：** A 和 B 来自这样的查询

选择“认为案例陈述可能会在这里” FROM

(SELECT id, x, y, z, num FROM Table1 a JOIN Table2 b ON a.id=b.id AND (y BETWEEN (53348574-3593) AND (53348574+3593)) AND (z BETWEEN (-6259973-6027) ) AND (-6259973+6027)) 加入表 3 c ON c.id= b.id GROUP BY a.id, cr) A

加入

(SELECT id, x, y, z, num FROM Table1 a JOIN Table2 b ON a.id=b.id AND (y BETWEEN (53401007-3593) AND (53401007+3593)) AND (z BETWEEN (-6397286-6027) ) AND (-6397286+6027)) 加入表 3 c ON c.id= b.id GROUP BY a.id, cr ) B ON A.id=B.id

因此，如果您想知道为什么数字很大，它会连接两个基于地理位置制作的表，并且需要根据在任一位置找到的属性来决定从哪个表中获取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:47:56.273

我不知道任何支持您想要的 RDBMS。您将必须编写 8 个 CASE 语句。但是为什么这么浪费呢？~~还是你只是懒惰？:)~~

编辑：

看，当您编写`SELECT * ...`RDBMS 时，您正在做的是查询系统表（information_schema 等）并获取表中的列列表。所以当你写

```
SELECT CASE WHEN A.num < B.num THEN A.* ELSE B.* END ... 
```

你基本上写

```
SELECT CASE WHEN A.num < B.num THEN A.num, A.whatever, A.more, ... ELSE B.num, B.whatever, B.more... END FROM A JOIN B ON A.id=B.id 
```

不幸的是，这是错误的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:49:01.237

尝试

```
select A.id, A.x, A.y, A.z, A.num from  A JOIN B ON A.id=B.id where a.num<b.num
union
select b.id, b.x, b.y, b.z, b.num from  A JOIN B ON A.id=B.id where b.num<a.numhere 
```

# django - 没有重复按钮的循环的Django模板

> ID：12746408
> 
> 赞同：0
> 
> 时间：2012-10-05T12:36:16.090
> 
> 标签：django, templates, for-loop, logic

当我为多个条目投票时，for 循环中的每个条目都会重复“添加投票”按钮。关于我应该如何修复逻辑以便添加投票按钮只出现一次的任何想法？

```
 {{ user.get_profile.votes.all }}

                {% for v in user.get_profile.votes.all %}
                    {% if v.entry = e.entry %}
                        <form action="/profile/" method="post">
                        {% csrf_token %}
                        <input type='hidden' name='entry_id' value='{{ e.id }}'>
                        <input type='hidden' name='project_id' value='{{ p.id }}'>
                        <input type='hidden' name='team_id' value='{{ t.id }}'>
                        <input type='submit' name="remove_vote" value='Remove Vote'>
                        </form>
                    {% elif v.entry != e.entry %}
                        <form action="/profile/" method="post">
                        {% csrf_token %}
                        <input type='hidden' name='entry_id' value='{{ e.id }}'>
                        <input type='hidden' name='project_id' value='{{ p.id }}'>
                        <input type='hidden' name='team_id' value='{{ t.id }}'>
                        <input type='submit' name="add_vote" value='Add Vote'>
                        </form>
                    {% endif %}
                    {% empty %}
                        <form action="/profile/" method="post">
                        {% csrf_token %}
                        <input type='hidden' name='entry_id' value='{{ e.id }}'>
                        <input type='hidden' name='project_id' value='{{ p.id }}'>
                        <input type='hidden' name='team_id' value='{{ t.id }}'>
                        <input type='submit' name="add_vote" value='Add Vote'>
                        </form>
                {% endfor %} 
```

![截屏](../Images/d94cd65964c809b42db2dcee6c6c7d52.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:43:41.330

在 Django 中，你有一个 forloop 计数器，你可以像这样使用它：

```
{% if forloop.first %}
    <input type='submit' name="add_vote" value='Add Vote'>
{% endif %} 
```

而且您的按钮只会在循环的第一轮中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:57:09.323

稍微清理一下你的代码：

```
 <form action="/profile/" method="post">
            {% csrf_token %}
            <input type='hidden' name='entry_id' value='{{ e.id }}'>
            <input type='hidden' name='project_id' value='{{ p.id }}'>
            <input type='hidden' name='team_id' value='{{ t.id }}'>

            {% for v in user.get_profile.votes.all %}
                {% ifequal v.entry e.entry %}
                    <input type='submit' name="remove_vote" value='Remove Vote'>
                {% elif v.entry != e.entry %}
                    <input type='submit' name="add_vote" value='Add Vote'>
                {% endifequal %}
            {% endfor %}
          </form> 
```

由于 else 动作在两种情况下都是相同的；您只需要检查一次条目。我还修复了您的模板，因为您有一个`=`需要两个进行比较的模板。

# mercurial - Mercurial，功能分支

> ID：12746415
> 
> 赞同：1
> 
> 时间：2012-10-05T12:36:51.037
> 
> 标签：mercurial

我正在阅读权威指南 Mercurial，它提到在大型项目中，将项目拆分为功能分支很有用。当您想将功能分支与主分支合并时，我已经绘制了一张我认为正在发生的事情的快速图片。

我的图表是否正确 + 功能分支是否继续存在？我假设是的。

[![](../Images/7b5ee943dd99f0b58347b5be877e9c4d.png "由 imgur.com 主办")](https://imgur.com/vQYdW)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:42:32.767

可以使用以下方式显式***关闭***活动的命名分支：

```
hg commit --close-branch 
```

如果某项工作无处可去，则往往会这样做。*如果要在已关闭*的分支上重新打开同名分支，则需要使用以下命令再次打开该分支：

```
hg branch <name> --force 
```

但是，如果您从功能分支合并到另一个分支并且功能分支没有未合并的更改集（例如，该分支上的最后一件事是合并到另一个分支） ，它们就会隐式变为***非活动状态。***此合并的目的地不必是“主线”以停用分支，不活动纯粹基于任何未合并的变更集。

如果您稍后在它们上创建更改集，它们将再次激活。如果您正在离线处理功能并经常合并，这往往是常见的情况。

请注意，*关闭*的分支与*非活动*的分支不同。

对不起，但我无法真正理解你的图表，所以我希望上面的句子有意义。

[此外，不要将命名分支与匿名分支混淆，匿名分支是指单个分支有多个“头”。]

# php - 基于 PHP 的投票脚本

> ID：12746417
> 
> 赞同：-1
> 
> 时间：2012-10-05T12:36:59.443
> 
> 标签：php, mysql, vote, voting-system

我正在一个管站点上工作，该站点按其来源国家/地区对每个视频进行分类，而不仅仅是类别。

我需要考虑一个投票系统，如果我们在国家/地区犯了错误，用户可以纠正我们，并可能提出正确的建议。所以我认为会有这个+ / - 简单的投票系统。如果用户点击“-”，那么他需要建议正确的国家。

假设我们说视频来自巴西，用户应该能够投票反对并从列表中选择正确的国家并提交。然后我们需要手动更正它。

我只是想不出一种从 MySQL 表角度创建该选项的方法。我的意思是我们的数据库中有 200 多个国家/地区，每个国家/地区都有其 ID，我正在考虑为投票脚本创建一个表：`ID | video ID | Votes for | Votes Against | suggestions`. 我想不出适合建议几个国家/地区的逻辑（这里不能为每个国家/地区创建一个列..）。问题基本上是每个用户都可以建议一个不同的国家。例如：5 可以说是阿根廷，2 可以说是智利，4 说是西班牙等。我如何设计表格以获取许多以前未知数量的值？

我对数据库不是那么好..

那里有很多好的投票脚本，但没有一个具有建议功能。至少我找不到。

如果你知道一个适合这里的好脚本，那也很棒。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:43:16.410

```
video table   
   video_id 

votes table
   video_id
   proposed_country_id
   voter_id 
```

然后选择视频，proposed_country_id，count(proposed_country_id) 加入投票使用(video_id) group by video_id,proposed_country_id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:56:38.230

**投票表**

```
ID | video ID |Country ID | Votes for | Votes Against | suggestions 
```

**视频表**

```
ID | ................    // Use this id in the voting Table as video ID 
```

**国家表**

```
ID | ..........        // Use this id in the voting Table as Country ID 
```

# android - 尝试安装 Motodev Core 插件时出错

> ID：12746418
> 
> 赞同：0
> 
> 时间：2012-10-05T12:37:02.783
> 
> 标签：android, motodev-studio

我之前使用的是 Motodev Studio，但由于这不再可能，我需要安装 Motodev Core Plugin。我按照 motodev 网站[http://developer.motorola.com/tools/motodevcoreplugins/](http://developer.motorola.com/tools/motodevcoreplugins/)上的指南进行操作，一切顺利，直到我不得不安装 Motodev Core Plugin。它开始安装，但过了一会儿我收到了这条消息：

![在此处输入图像描述](../Images/1a5b855b29cadc14663dee0a37a7d744.png)

然后我重试了没有运气。然后我重新启动 Eclipse 并再次导入项目，但现在由于 1924 错误无法构建项目

有谁知道该怎么做？我也试图在没有运气的情况下遵循这个[问题。](https://stackoverflow.com/questions/12692865/motodev-core-plugins)我只希望它像以前一样简单：下载->安装->完成

:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:54:09.580

我在安装 Motodev 核心插件时遇到了其他问题。虽然不是同一个问题，但我建议尝试此处答案中列出的步骤：[Motodev Core Plugins](https://stackoverflow.com/questions/12692865/motodev-core-plugins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:57:09.357

在“程序文件”文件夹中创建内容时可能存在安全问题。尝试将您的 eclipse 文件夹移动到您可以完全控制的“我的文档”文件夹中，然后重新安装插件。

# ipad - Ipad 视图对齐

> ID：12746425
> 
> 赞同：0
> 
> 时间：2012-10-05T12:37:13.533
> 
> 标签：ipad

在我的 iPad 应用程序中，我只支持纵向模式，但在一个屏幕上除外。我在底部有标签栏，单击任何标签时，它会打开一个大小为 320.0 * 600.0 的小视图，带有表格视图。在小视图中选择任何行时，将打开一个全屏视图。问题是，当我进入支持所有方向的全屏视图时，下一次，我的其他视图尤其是小视图的帧大小为 768 * 1024。感谢任何建议或帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:19:20.257

我猜问题是您在仍处于横向模式时读取帧大小。如果您在模拟器中运行东西，当您关闭全屏时它可能会跳回纵向？这会强制应用程序返回“肖像”模式，而不会触发正常的“willRotate”功能，并且可能会弄乱您的代码以跟踪方向。

另请记住，大多数应用程序需要支持 iPad 上的所有方向才能被接受，除非您正在制作例如通常专门为横向或纵向设计的游戏。

# c - 用于处理注释的 C 命令行解析器

> ID：12746430
> 
> 赞同：1
> 
> 时间：2012-10-05T12:37:24.020
> 
> 标签：c, parsing, getopt, command-line-arguments

我有一个`tool`需要`input`并制作`output`：

```
$ tool input > output 
```

我想添加一个长字符串选项——比如“评论”选项。此注释文本是选项的一个参数，并且是一个包含在正向刻度线中的句子：

```
$ tool --comment='I am commenting on the use of comments' input > output_plus_comment 
```

这与通常`--foo=bar`的键值对不同，其中`foo`是选项名称并且`bar`是一个单词值（例如，`true`，`red`，...）。

是否有一个很好的 C 命令行解析器库来处理这种特殊情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:46:43.490

将命令行标记为程序的参数是您的 shell 的责任，而不是您的责任。所以你没有什么可做的。

只需在包含空格的字符串周围加上引号，或者在命令行上用反斜杠转义空格，您的`--foo`值可以包含任意数量的空格。

# css - 添加 ajax 元素后，定位的 div 元素不会流动/更新

> ID：12746432
> 
> 赞同：0
> 
> 时间：2012-10-05T12:37:27.110
> 
> 标签：css, ajax, html, position, positioning

我在页面底部有一个包含在 php 中的页脚元素：

```
<footer>
    <h5>Title</h5>
    <h6>&copy Copyright 2012</h6>
</footer>

footer{
    width:100%;
    height:40px;
    font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
    background-color:#EEE;
    text-align:center;
    position:absolute;
    bottom:0;
} 
```

这可以按预期将页脚与底部对齐。问题在于页面主要部分中的数据是通过 AJAX 调用加载的，而页脚只是保持在添加 ajax 元素之前的位置。movieBox 元素默认为空，并在返回 ajax 调用时填充多个 div。

```
<div id="movieBox"></div>
<br style="clear:both"/> 
```

有没有唯一的CSS方法来解决这个问题？还有什么方法吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:40:56.880

您绝对定位页脚，这意味着无论通过 AJAX 加载什么内容，它都将保持在同一个位置。您需要更改布局，以便不依赖位置：绝对。

# android-layout - OnClickListener 不适用于 ViewPager 内 GridView 中的第一项

> ID：12746433
> 
> 赞同：0
> 
> 时间：2012-10-05T12:37:28.167
> 
> 标签：android-layout

在 ViewPager 中，有一个 gridview，它有一个带有文本视图和图像的单选答案网格。当我单击任何答案时，文本视图应将其颜色更改为红色，否则为白色。**除了第一个**答案之外，它对于所有其他答案都可以正常工作。当我第一次点击gridview中的第一个答案时，它不会改变颜色，第二次点击它会变成红色，但是当我改变选项时，第一个选项的红色不会变成白色。看下面的画面，

抱歉，我是新用户，不允许提交屏幕...

内部`GridFragment#OnActivityCreated()`：

```
gridview.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View v, int position, long arg3) {

            currentPage = new TestTopics().getCuttentPage();

            tv = ((ViewHolder) v.getTag()).lbl;                 

            if(selectedValues.containsKey(currentPage))
            {   

                selectedValues.get(currentPage).setTextColor(Color.WHITE);
                selectedValues.remove(currentPage);
                selectedValues.put(currentPage, tv);
                selectedValues.get(currentPage).setTextColor(Color.RED);

            }
            else
            {   

                selectedValues.put(currentPage, tv);
                selectedValues.get(currentPage).setTextColor(Color.RED);

            }               

        }
    }); 
```

`ImageAdapter#getView()`方法：

```
public View getView(int position, View convertView, ViewGroup parent) {

    numTopics = mTopicList.getNumTopics ();
    ViewHolder holder;
    holder = new ViewHolder();

    if (convertView == null) { 

       int layoutId = R.layout.demo_pager_grid_item;
       LayoutInflater li =  ((Activity) mContext).getLayoutInflater();
       childView = li.inflate (layoutId, null);

       holder.img = (ImageView) childView.findViewById(R.id.image);
       holder.lbl = (TextView) childView.findViewById(R.id.title);

       childView.setTag(holder);

    } else {

        childView = convertView;
        holder = (ViewHolder) childView.getTag();
    }                

    if (childView != null) {
       // Set the width and height of the child view.
       childView.setLayoutParams(new GridView.LayoutParams(mCellWidth, mCellHeight));

       int j = position + mImageOffset;

       if (j < 0) j = 0;
       if (j >= numTopics) j = numTopics - 1;

       imageView = (ImageView) childView.findViewById (R.id.image);
       if (imageView != null) {
          Resources res = mContext.getResources ();
          int imagePadding = res.getDimensionPixelSize (R.dimen.grid_image_padding);

          imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
          imageView.setBackgroundResource (R.color.background_grid1_cell);
          imageView.setPadding (imagePadding, imagePadding, imagePadding, imagePadding);
          imageView.setImageBitmap (mTopicList.getTopicImage (j));
          imageView.setTag (new Integer (j));

       }
       textView = (TextView) childView.findViewById (R.id.title);

       if (textView != null) 
       {           

                textView.setText(mTopicList.getTopicTitle (j)); 
                textView.setTag (mTopicList.getTopicTitle (j));
                holder.lbl.setTag(mTopicList.getTopicTitle (j));

       }
    }

    return childView;

} 
```

我已经看到了这个链接：[OnClickListener not working for first item in GridView](https://stackoverflow.com/questions/11778228/onclicklistener-not-working-for-first-item-in-gridview)，并按照答案，但没有成功......

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-08T18:47:49.230

在问题编辑中回答。转换为社区 wiki 答案。请参阅[将问题的答案添加到问题本身时的适当操作是什么？](https://meta.stackoverflow.com/questions/267434/what-is-the-appropriate-action-when-the-answer-to-a-question-is-added-to-the-que))

OP写道：

> 已经解决了……
> 
> 我`gridview.setBackgroundColor(Color.TRANSPARENT);`在以下代码中添加了：
> 
> ```
> if(patternItems.containsKey(currentPage) && selectedValues.containsKey(currentPage))
>             {
> 
>                 selectedValues.get(currentPage).setTextColor(Color.WHITE);
>                 selectedValues.remove(currentPage);
>                 selectedValues.put(currentPage, tv);
>                 selectedValues.get(currentPage).setTextColor(Color.RED);
>                 **gridview.setBackgroundColor(Color.TRANSPARENT);**
>                 patternItems.remove(currentPage);                       
>                 patternItems.put(currentPage,tv.getText().toString());
>              }
>             else
>             {   
>                 selectedValues.put(currentPage, tv);
>                 selectedValues.get(currentPage).setTextColor(Color.RED);
>                 **gridview.setBackgroundColor(Color.TRANSPARENT);**
>                 patternItems.put(currentPage,tv.getText().toString());                                                                                              
>             } 
> ```

# c - 相当于 Windows 上的 /dev/kmsg？

> ID：12746434
> 
> 赞同：2
> 
> 时间：2012-10-05T12:37:30.440
> 
> 标签：c, logging, windbg, windows-kernel

我想从批处理文件或 cmd 提示符向 Windows 内核日志添加自定义行。

在linux中，我会通过写入`/dev/kmsg`文件来做到这一点。`dmesg`通过或可以看到写入该文件的任何内容`/var/log/messages`。
例如`echo Hello world > /dev/kmsg`

我想要一些非常相似的 Windows 端。

`log_to_kernel.exe "my message"`如果有类似, 而不是重定向到设备文件的解决方案，我也可以。我认为，Windows 中没有设备“文件”的概念。

要求的原因：
我正在尝试调试驱动程序中的一些问题，为此我正在运行一些测试程序，该程序在内部调用 Windows 中的驱动程序。
如果驱动程序失败，我将能够看到附加在 1394 上的内核 windbg 中的调试消息。内核调试器将遇到断点/断言，我将无法检查目标系统上的迭代次数，直到我继续来自windbg。
因此，我需要在内核日志本身中记录时间和测试迭代次数，我计划通过运行自动化测试的批处理文件来完成。

因此，我需要一些带有 C 代码的工具或虚拟回显驱动程序，它将我的自定义消息记录在内核日志中。

在一行中，我想从用户空间应用程序向内核日志写入一条自定义消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T13:07:33.660

`DbgPrintEx`如果您正在编写驱动程序，您应该使用函数来编写日志条目，

[http://msdn.microsoft.com/en-us/library/windows/hardware/ff543634(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff543634(v=vs.85).aspx)

然后调试器应该能够显示它。

如果你的应用是用户态，`OutputDebugString`是最简单的，

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa363362(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363362(v=vs.85).aspx)

您还可以阅读有关事件跟踪的信息，

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb968803(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb968803(v=vs.85).aspx)

# php - How to make a full dynamic insert query?

> ID：12746447
> 
> 赞同：-2
> 
> 时间：2012-10-05T12:38:21.110
> 
> 标签：php, dynamic, insert

I have tried this so far...

```
class Test {

public $table = 'users'
public $fields = ('id', 'username', 'password');
public $id = "";
public $username = "yousufiqbal";
public $password = "123456";

public function fields_to_string(){
    foreach ($fields as $field) {
        // some stuff here
    }
}

public function properties_to_string(){
    // some stuff here
}

public function insert(){
    global $dbh;
    $sql = "INSERT INTO {$this->table} ($this->fields_to_string()) VALUES ($this->properties_to_string());";
    $dbh->exec($sql);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:46:06.000

I would do this:

```
class Test {

    public $table;
    public $fields;
    public $values;

    public function __construct($fields, $values, $table){
        $this->fields = $fields;
        $this->values = $values;
        $this->table = $table;
    }

    public function fields_to_string(){
        return "`".implode("`, `", $this->fields)."`";
    }

    public function properties_to_string(){
        return "'".implode("', '", $this->values)."'";
    }

    public function insert(){
        global $dbh;
        $sql = "INSERT INTO `{$this->table}` (".$this->fields_to_string().") VALUES (".$this->properties_to_string().");";
        $dbh->exec($sql);
        echo $sql; // for test purposes
    }
}

$fields = array('username', 'password');
$values = array('Mihai', 'stackoverflow');

$test = new Test($fields, $values, 'users');
$test->insert();

// INSERT INTO `users` (`username`, `password`) VALUES ('Mihai', 'stackoverflow'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:47:33.160

It is probably better to have the field values as a array to. This example should get you going:

```
class Test
{    
  public $table = 'users';
  public $fields = array( 'id', 'username', 'password' );
  public $values = array( "", "yousufiqbal", "123456" );

  public function insert()
  {
    global $dbh;
    $fields = '`' . implode( '`,`', $this->fields ) . '`';
    $values = implode( ',', $this->values );
    $sql = "INSERT INTO `$this->table` ( $fields ) VALUES ( $values )";
    $dbh->exec( $sql );
  }    
} 
```

Your next step would be to implement parameter binding, to prevent SQL injection!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T12:48:38.223

```
 class Test {
     public $fields = array('id', 'username', 'password');
     public $properties = array('id' => "", 'username' => "yousufiqbal",'password' =>"123456");
     public function fields_to_string(){        
       $fields_str = implode(',', $this->fields);  
       return $fields_str;
    }

   public function properties_to_string(){
      $properties_str = implode(',', "'".$this->properties."'"); 
      return $properties_str;
    }

   public function insert(){
    global $dbh;
    $sql = "INSERT INTO `{$this->table}` ($this->fields_to_string()) VALUES ($this->properties_to_string());";
    $dbh->exec($sql);
    }
   } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-05T12:43:45.743

// some stuff here

```
return implode( ',', $this->fields ); 
```

For the values:

```
return "'" . implode( "','", $this->values ) . "'"; 
```

# c# - Azure：如何创建对内部终结点的服务引用

> ID：12746452
> 
> 赞同：0
> 
> 时间：2012-10-05T12:38:45.433
> 
> 标签：c#, windows, azure

如何使用实现 WCF 主机的内部端点创建从 Web 角色到辅助角色的服务引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:35:11.743

那么你有两个选择：

1.  使用共享 DLL 而不是使用服务引用（[这里解释了基本概念](http://blogs.msdn.com/b/juveriak/archive/2008/02/03/using-channels-vs-proxies-in-wcf.aspx)）
2.  创建 WCF 服务：
    *   为您的合同 + 服务创建一个程序集（理想情况下，您可能还希望将合同与实施分开）
    *   在您的工作人员中引用此程序集
    *   创建一个引用新创建的程序集的“虚拟”WCF 应用程序，该程序集仅包含带有以下代码的 *.svc 文件（您不会部署此服务，它的唯一目标是允许使用服务引用）。

* * *

```
<%@ ServiceHost Language="C#" Debug="true" Service="MyWorker.Service.ContactService" %> 
```

*   在您的 WebRole 中，添加一个服务引用，VS 将在虚拟 WCF 应用程序中发现该服务。

    （你可以对 svcutil.exe 做同样的事情）

![在此处输入图像描述](../Images/960d99cff4e302dbe1c83bc665d8ec12.png)

# c# - 启动异步方法时挂钩

> ID：12746454
> 
> 赞同：2
> 
> 时间：2012-10-05T12:38:51.313
> 
> 标签：c#, async-await, c#-5.0

async/await 机制中是否有一个集成点来挂钩并知道何时启动异步方法？

自定义 TaskScheduler 可以提供这个钩子吗？自定义 SynchronizationContext？

我希望能够跟踪某些方法调用并知道它们与哪个任务（或代码）相关联。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:52:09.733

根据“任务状态”部分中[的基于任务的异步模式：](http://www.microsoft.com/en-us/download/details.aspx?id=19957)

> 从 TAP 方法返回的所有任务都必须是“热的”[...]，这意味着它们所代表的异步操作已经启动，并且它们的 TaskStatus 是除 Created 之外的枚举值。

这意味着您将始终在`Task`创建它时立即启动它（至少如果工厂方法实现了 TAP，对于 .Net 框架提供的所有方法都是如此）。

`Task`如果您使用创建并返回“冷”（非运行）`new Task()`，则无法确定是否`Task.Start()`调用了该方法。您只能`TaskStatus`定期检查该物业。

# symfony - 具有关系的实体中的 JMSSerializerBundle 序列化组

> ID：12746455
> 
> 赞同：9
> 
> 时间：2012-10-05T12:39:05.743
> 
> 标签：symfony, doctrine-orm, jmsserializerbundle

我在使用组序列化具有许多关系的实体时遇到问题。我在以这种方式序列化相关实体时遇到问题。

假设我有两个实体：产品和相关元素。

```
/**
 *
 * @Serializer\ExclusionPolicy("none")
 */
class Product {

    /**
     * Primary key
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     * 
     * @Serializer\Groups({"list","details"})
     * @Serializer\Type("integer")
     */
    protected $id;

    /**
     * @Serializer\Groups({"list","details"})
     * @Serializer\Type("string")
     */
    protected $name;

    /**
     * @ORM\Column(name="description", type="string", length=4096, nullable=true)
     * 
     * @Serializer\Groups({"details"})
     * @Serializer\Type("string")
     */
    protected $description;

    /**
     * @var ArrayCollection
     * 
     * @ORM\OneToMany(targetEntity="Madden\ProjectBundle\Entity\ProjectResource", mappedBy="project")
     * @Serializer\Groups({"details"})
     * @Serializer\Type("ArrayCollection<Element>")
     */
    protected $details1;

    /**
     * Relation to project tasks
     * @ORM\OneToMany(targetEntity="Madden\ProjectBundle\Entity\ProjectTask", mappedBy="project")
     * @Serializer\Exclude()
     * @Serializer\Type("ArrayCollection<Element>")
     */
    protected $details2;

    ...

} 
```

元素实体具有类似的结构：

```
/**
 *
 * @Serializer\ExclusionPolicy("none")
 */
class Element {

    /**
     * Primary key
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     * 
     * @Serializer\Groups({"list","details"})
     * @Serializer\Type("integer")
     */
    protected $id;

    /**
     * @Serializer\Groups({"list","details"})
     * @Serializer\Type("string")
     */
    protected $name;

    /**
     * @ORM\Column(name="description", type="string", length=4096, nullable=true)
     * 
     * @Serializer\Groups({"details"})
     * @Serializer\Type("string")
     */
    protected $description;

    ...
} 
```

我的问题是，当我使用“详细信息”组实体序列化产品时，我只想序列化元素的 id，但正如您所见，实体已定义与产品相同的组（以防我需要元素对象的详细信息），因为我想要在我的所有实体上都有统一的组，并防止创建数百个组，如“product_details”、“element_details”等。

当我访问关系或类似的东西时，有没有办法最终更改序列化组？处理程序可能或类似的东西？

问候和感谢任何帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-15T13:26:48.320

不幸的是，你不能真的（但继续阅读;-)），至少在不更改序列化程序库的情况下不能。罪魁祸首是组列表在您开始序列化过程的那一刻固定在 a `GroupExclusionStrategy`（由 引用）内。`Context`一旦（反）序列化运行时，代码中实际上有一个断言可以防止修改排除策略。

但碰巧的是，我在我的一个项目中也遇到了完全相同的问题，我对序列化程序代码进行了必要的更改。我已经清理了一些代码并将其上传到 Github（[https://github.com/andreasferber/serializer/tree/recursion-groups](https://github.com/andreasferber/serializer/tree/recursion-groups)）。

它添加了新的属性元数据，您可以在下降到子对象时添加、删除或覆盖组。使用注释它看起来像这样：

```
/**
 * @Serializer\RecursionGroups(set={"foo", "bar"}, add={"baz"}, remove={"Default"})
 */
private $myProperty; 
```

您也应该能够使用 XML 或 Yaml 元数据，但是这是未经测试的，因为我不使用它们并且我还没有添加测试用例。查看参考文档。由于我还没有进行任何优化，如果您的实体真的很大并且嵌套很深，它可能会对性能产生显着影响。

如果您觉得这很有用，或者您有任何建议，请告诉我，因为如果这不仅是我需要的，我将添加一些测试并尝试将其提交到上游。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-17T14:04:49.913

[官方文档](http://jmsyst.com/libs/serializer/master/cookbook/exclusion_strategies#overriding-groups-of-deeper-branches-of-the-graph)中实际上描述了一个解决方案。

话虽这么说，@aferber 提出的解决方案在很多方面似乎更好：更容易维护，更少冗长，更灵活......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-11T10:39:38.477

你需要使用`setGroups`.

*`_group`不需要官方文档中使用的后缀。*

```
$context->setGroups([
    'Default', //if you want

    // use this linked entity but show only its id
    'group_of_linked_field',
    'group_of_linked_field' => [
        'id' // you will need to define this group first
    ],

    // use this linked entity and show fields as described
    'group_of_other_linked_field',
    'group_of_other_linked_field' => [
        // just as an example
        'Default',
        'details',
    ],
]); 
```

这**不适**用于`addGroup`or `addGroups`！他们都不会接受关联数组。`setGroups`是您的（唯一？）解决方案。

# sql - SQL Server 2005 中合并子句的改编

> ID：12746457
> 
> 赞同：1
> 
> 时间：2012-10-05T12:39:06.383
> 
> 标签：sql, sql-server, sql-server-2005, merge

我有一个正在运行的代码，但我遇到的问题是它包含许多 MERGE 子句，因为它打算从 SQL Server 2008 运行并向前运行。但问题是一个新客户正在运行 SQL Server 2005，并且您知道 Merge 子句在 SQL Server 2008 之前不可用，所以我的问题是是否没有办法自动解析 this 子句或者是否有其他解决方案（除了重写经典子句中的所有子句）因为客户不愿意升级数据库。

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:48:10.527

恐怕您需要`MERGE`为 SQL Server 2005 重新编写所有子句。

您可以使用 2005 友好`output`子句来实现相同的功能，但使用更详细的 SQL。这种方法也适用于 SQL Server 2008。

[http://sqlserver-tips.blogspot.co.uk/2006/09/mimicking-merge-statement-in-sql.html](http://sqlserver-tips.blogspot.co.uk/2006/09/mimicking-merge-statement-in-sql.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:05:39.750

您可以将 C#（或其他）应用程序放在一起来解析合并语句并从中创建插入/更新语句。我的意思是，这是一个可怕的想法，但你*可以*做到...

您必须拉出“ON”部分，将其添加到检查 IF EXISTS 和更新部分，然后将列列表添加到插入部分。您甚至可以以编程方式（原文如此？）创建 SP 参数和所有内容。

呵呵。祝你好运。

# python - Python unicode 正则表达式匹配失败并带有一些 unicode 字符-bug 或错误？

> ID：12746458
> 
> 赞同：13
> 
> 时间：2012-10-05T12:39:17.563
> 
> 标签：python, regex, unicode

我正在尝试将`re`Python 2.7.3 中的模块与 Unicode 编码的 Devnagari 文本一起使用。我已添加`from __future__ import unicode_literals`到代码的顶部，因此所有字符串文字都应该是 unicode 对象。

但是，我在 Python 的正则表达式匹配方面遇到了一些奇怪的问题。例如，考虑这个名字：“किशोरी”。这是一个（拼写错误的）名称，在印地语中，由我的一个用户输入。任何印地语读者都会认出这是一个词。

以下返回一个匹配，因为它应该：

`re.search("^[\w\s][\w\s]*","किशोरी",re.UNICODE)`

但这不会：

`re.search("^[\w\s][\w\s]*$","किशोरी",re.UNICODE)`

一些探索表明，这个字符串中只有一个字符，字符 0915 (क)，被识别为属于 \w 字符类。[这是不正确的，因为“派生核心属性”上](http://www.unicode.org/Public/UNIDATA/DerivedCoreProperties.txt)的 Unicode 字符数据库文件将该字符串中的其他字符（我没有检查所有字符）列为字母字符 - 确实如此。

这只是 Python 实现中的一个错误吗？我可以通过手动将所有 Devnagari 字母数字字符定义为字符范围来解决这个问题，但这会很痛苦。还是我做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T13:40:22.423

这是模块中的一个[错误](http://pypi.python.org/pypi/regex)[，它已在`re`模块](http://bugs.python.org/issue1693050)中修复：[`regex`](http://pypi.python.org/pypi/regex)

```
# -*- coding: utf-8 -*-
from __future__ import unicode_literals
import unicodedata
import re
import regex  # $ pip install regex

word = "किशोरी"

def test(re_):
    assert re_.search("^\\w+$", word, flags=re_.UNICODE)

print([unicodedata.category(cp) for cp in word])
print(" ".join(ch for ch in regex.findall("\\X", word)))
assert all(regex.match("\\w$", c) for c in ["a", "\u093f", "\u0915"])

test(regex)
test(re)  # fails 
```

输出显示 中有 6 个代码点`"किशोरी"`，但只有 3 个用户感知字符（扩展字形簇）。***在一个字符内*****打断一个单词是错误的。** *[Unicode 文本分割](http://www.unicode.org/reports/tr29/)说：*

 *> *单词边界*、行边界和句子边界*不应出现在字素簇内*：换句话说，就确定这些其他边界的过程而言，字素簇应该是一个原子单元。

^(在这里，进一步强调是我的)

单词边界在[文档](http://docs.python.org/2.7/library/re)`\b`中定义为从`\w`到`\W`（或反向）的转换：

> 请注意，正式地，\b 被定义为 \w 和 \W 字符之间的边界（反之亦然），或 \w 和字符串的开头/结尾之间，...

因此，形成单个字符的所有代码点要么是，要么`\w`都是`\W`. 在这种情况下`"किशोरी"`匹配`^\w{6}$`.

* * *

来自[Python 2 中](http://docs.python.org/library/re)[的文档`\w`](http://docs.python.org/library/re)：

> 如果设置了 UNICODE，这将匹配字符 [0-9_] 加上*Unicode 字符属性数据库中分类为字母数字的*任何内容。

在[Python 3](http://docs.python.org/py3k/library/re)中：

> 匹配 Unicode 单词字符；这*包括可以成为任何语言中单词一部分的大多数字符，*以及数字和下划线。

来自`regex`文档：

> 'word' 字符的定义（[问题 #1693050](http://bugs.python.org/issue1693050)）：
> 
> “单词”字符的定义已针对 Unicode 进行了扩展。它现在符合 [http://www.unicode.org/reports/tr29/](http://www.unicode.org/reports/tr29/)上的 Unicode 规范。这适用于 \w、\W、\b 和 \B。

根据[unicode.org `U+093F`( `DEVANAGARI VOWEL SIGN I`)](http://unicode.org/cldr/utility/character.jsp?a=093F)是 alnum 和 alphabetic 因此即使我们遵循不基于单词边界的定义，`regex`考虑它也是正确的。`\w`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T13:07:25.110

从字符映射：

> ‍ि
> 
> U+093F 梵音元音符号 I
> 
> 一般字符属性
> 
> 在 Unicode 自：1.1 Unicode 类别：**标记、间距组合**

所以，从技术上讲，这不是一封信，`\w`即使是`re.UNICODE`. 您可以尝试使用[`regex`](http://pypi.python.org/pypi/regex)Unicode 字符属性来包含这些类型的字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T13:09:06.857

我测试了以下内容：

```
import unicodedata
for c in "किशोरी":
    print unicodedata.category(c)
    print unicodedata.name(c) 
```

在我的情况下显示：

```
Lo
DEVANAGARI LETTER KA
Mc
DEVANAGARI VOWEL SIGN I
Lo
DEVANAGARI LETTER SHA
Mc
DEVANAGARI VOWEL SIGN O
Lo
DEVANAGARI LETTER RA
Mc
DEVANAGARI VOWEL SIGN II 
```

Unicode 的东西很难调试，因为复制和粘贴会弄乱数据，而且我不懂印地语。但是在某些语言中，您可以在 unicode 中以不同的方式对字符进行编码。是否有可能，您必须在匹配之前以某种方式规范化您的字符串？对我来说，元音符号不匹配看起来没问题`\w`。*

# javafx-2 - 如何更改 TableView 行的颜色？

> ID：12746459
> 
> 赞同：5
> 
> 时间：2012-10-05T12:39:21.323
> 
> 标签：javafx-2

我有一个表格视图，如果我想更改行的默认颜色...
1\. ... 悬停在一行上方。
2\. ... 选择了一行。

有没有一种简单的方法可以在 css 文件中完成所有这些操作？

我发现对于案例 1，我可以设置

`.table-cell:hover { -fx-background-color: green; }`

在 css 文件中。这样，单元格的颜色会发生变化，但整行的颜色不会发生变化。

`.table-view .row-selection:hover{ -fx-background-color: lightgreen; }` 我尝试过的许多其他组合都不起作用。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-05T13:27:51.917

```
/* Selected row */
.table-view:focused .table-row-cell:filled:focused:selected {
    -fx-background-color: brown;
    -fx-background-insets: 0, 1, 2;
    -fx-background: -fx-accent;
    -fx-text-fill: -fx-selection-bar-text;
}

/* Selected row when table not focused */
.table-row-cell:filled:focused:selected {
    -fx-background-color: red;
    -fx-background-insets: 0, 1, 2;
    -fx-background: -fx-accent;
    -fx-text-fill: -fx-selection-bar-text;
}

/* Row hovered */
.table-view:row-selection .table-row-cell:filled:hover {
    -fx-background-color: green;
    -fx-background-insets: 0, 0 0 1 0;
    -fx-text-fill: -fx-text-inner-color;
}

/* Selected row hovered */
.table-view:focused .table-row-cell:filled:focused:selected:hover {
    -fx-background: -fx-accent;
    -fx-background-color: yellow;
    -fx-background-insets: 0, 1, 2;
    -fx-text-fill: -fx-selection-bar-text;
}

/* Selected row hovered when table not focused */
.table-view:row-selection .table-row-cell:filled:focused:hover {
    -fx-background-color: blue;
    -fx-background-insets: 0, 0 0 1 0, 1 1 2 1, 2 2 3 2, 3 3 4 3;
    -fx-text-fill: -fx-text-inner-color;
} 
```

# java - 带有远程路由的 akka 广播路由

> ID：12746470
> 
> 赞同：0
> 
> 时间：2012-10-05T12:39:55.087
> 
> 标签：java, routing, akka

我想构建一个 java Akka 集群系统。

预计主节点将任务分配给其路由。

这些任务将在主节点的不同节点上执行。

我实际上正在考虑使用广播路由器。

与现有的远程路由。

然后将路由的远程引用传递给广播路由器。

我的问题是是否可以将现有的远程路由器引用传递给广播路由器。

我检查了文档，看起来你只是将路由器的数量传递给广播路由器。

很高兴听到您的建议。

谢谢你们

很乐意接受任何建议。

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:59:40.143

[给定路由的使用在http://doc.akka.io/docs/akka/2.0.3/scala/routing.html#Routers_In_Action](http://doc.akka.io/docs/akka/2.0.3/scala/routing.html#Routers_In_Action)的文档中作为示例显示，同样适用于所有路由器类型。

# php - PHP 中的 CSV 附件

> ID：12746474
> 
> 赞同：0
> 
> 时间：2012-10-05T12:40:12.343
> 
> 标签：php

我正在尝试在 PHP 中将 CSV 文件作为附件发送，并使用邮件功能作为附件。以下代码工作正常。它成功附加了 CSV 文件并将其发送给收件人，但附加的输出文件（通过电子邮件发送）以文本格式 (.txt) 出现。我不知道我在哪里犯了错误以及我需要更改标题以在附加的电子邮件中保留原始 CSV 文件格式。

```
 $path ="/myhost/public_html/csv/"; 
        $file_name = $path."Test";
        $file_name.=".csv";
        $from     = "some@myemail.co.uk";
        $to       = "other@hisemail.co.uk";
        $fat=$file_name;
        $subject  = $_POST[subject];
        //   $message  = $_POST[message];
        //replace \n with <br>
        $message = str_replace("\n", "<br>",$message);
        //report
        echo "<b><font color=#8080FF> From: $from </b><br>";
        echo "<b>To: $to </b><br>";
        echo "<b>Subject: $subject</b><br><br></font>";
        // Obtain file upload variables
        $fileatt      = $_FILES[$fat]['tmp_name'];
        $fileatt_type = $_FILES[$fat]['type'];
        $fileatt_name = $_FILES[$fat]['name'];

        $headers = "From: $from  \n";

        // if($_FILES['fileatt']['size'] > 0)
        if (file_exists($fat)) {
           // Read the file to be attached ('rb' = read binary)
           $file = fopen($fat,'rb');
           $data = fread($file,filesize($fat));
           fclose($file);
           // Generate a boundary string
           $semi_rand = md5(time());
           $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";
           // Add the headers for a file attachment
           $headers .= "MIME-Version: 1.0\n" .
                    "Content-Type: multipart/mixed;\n" .
                    " boundary=\"{$mime_boundary}\"";
           // Add a multipart boundary above the  message
           $message = "This is a multi-part message in MIME format.\n\n" .
           "--{$mime_boundary}\n" .
           "Content-Type: text/html; charset=\"iso-8859-1\"\n" .
           "Content-Transfer-Encoding: 7bit\n\n" .
           $message . "\n\n";

           // Base64 encode the file data
           $data = chunk_split(base64_encode($data));
           // Add file attachment to the message
           $message .= "--{$mime_boundary}\n" .
           "Content-Type: {$fileatt_type};\n" .
           " name=\"{$fileatt_name}\"\n" .
           //"Content-Disposition: attachment;\n" .
           //" filename=\"{$fileatt_name}\"\n" .
           "Content-Transfer-Encoding: base64\n\n" .
           $data . "\n\n" .
           "--{$mime_boundary}--\n";
        } else echo "File error!  ";

        //send the mail
        if(mail($to, $subject, $message,$headers))echo "<b><font color=#FF0000>Message was sent!<b></font>";
        else echo "<b><font color=#FF0000>Message error!<b></font>"; 
```

我只想在电子邮件附件中保留原始文件格式。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:46:35.480

我建议使用库来处理电子邮件附件。这种事情会很快变得复杂，并且其他人已经弄清楚了附加 CSV 文件时需要发生的所有细节。我会使用类似[http://swiftmailer.org/](http://swiftmailer.org/)

您可以执行上面的所有代码，或者更像...

```
require_once 'lib/swift_required.php';

$message = Swift_Message::newInstance()
  ->setSubject('Your subject')
  ->setFrom(array('john@doe.com' => 'John Doe'))
  ->setTo(array('receiver@domain.org', 'other@domain.org' => 'A name'))
  ->setBody('Here is the message itself')
  ->addPart('<q>Here is the message itself</q>', 'text/html')
  ->attach(Swift_Attachment::fromPath('my-document.csv')); 
```

示例来自：[http ://swiftmailer.org/docs/messages.html](http://swiftmailer.org/docs/messages.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:45:11.587

```
$header .= "Content-Type: application/octet-stream; name=\"".$filename."\"\r\n"; // use different content types here
$header .= "Content-Transfer-Encoding: base64\r\n";
$header .= "Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n"; 
```

[这可能有帮助](http://www.finalwebsites.com/forums/topic/php-e-mail-attachment-script)吗？

# java - 如何让服务器以多行响应？（爪哇）

> ID：12746476
> 
> 赞同：0
> 
> 时间：2012-10-05T12:40:35.190
> 
> 标签：java, stream, client-server

我想从文件中获取文本，然后将其发送到服务器以使其大写，然后再发送回打印出来的客户端。我如何实现这一目标？

我可以读取一行并将其发送回客户端，并且我已经设法将多行写入输出流（供服务器读取），但我现在不知道该怎么做..

我有一个从文件中读取文本的客户端：

```
import java.io.*;
import java.net.*;
import java.util.Date;

public class Client 
{
    public static void main(String[] args)
    {
        try
        {
            // First create the input from keyboard
            BufferedReader input = new BufferedReader(new InputStreamReader(System.in));
            System.out.println("Client Program");

            // Next we need to find out the IP address and port number of the server
            System.out.print("Enter IP Address of server: ");
            String ip = input.readLine();
            System.out.print("Enter port number of server: ");
            String port_string = input.readLine();

            // The port number needs to be an int, so convert the string to an int
            int port = Integer.parseInt(port_string);

            // Connect to the server
            Socket sock = new Socket(ip, port);

            // Create the incoming stream to read messages from
            DataInputStream network = new DataInputStream(sock.getInputStream());

            //Create the output stream to the client
            DataOutputStream message = new DataOutputStream(sock.getOutputStream());

            //Send message
            //message.writeUTF("some text");
            FileReader file = new FileReader("text.dat");
            BufferedReader input_file = new BufferedReader(file);

            // Loop until EOF
            while (input_file.ready()){
            // Read next line from the file
                String line = input_file.readLine();
                // Write line to server
                message.writeUTF(line + "\n");
                //System.out.println(line);
            }

            // Display our address
            System.out.println("Address: " + sock.getInetAddress());
            String line;

            // Loop until the connection closes, reading from the network
            while ((line = network.readUTF()) != null)
            {
                // Display the received message
                System.out.println(line);
            }
        }
        catch (IOException ioe)
        {
            // This is expected when the server closes the network connection
            System.err.println("Error in I/O");
            System.err.println(ioe.getMessage());
            System.exit(-1);
        }
    }
} 
```

然后是一个应该接受这些字符串并将它们大写的服务器：

```
import java.io.*;
import java.net.*;
import java.util.*;

public class Server 
{
    public static void main(String[] args)
    {
        try
        {
            // First create the input from the keyboard
            BufferedReader input = new BufferedReader(new InputStreamReader(System.in));
            System.out.println("Server Program");

            // Get the port to listen on
            System.out.print("Enter port number to listen on: ");
            String port_string = input.readLine();

            // The port number needs to be an int, so convert the String to an int
            int port = Integer.parseInt(port_string);

            // Create a ServerSocket to listen on this address
            ServerSocket server = new ServerSocket(port);

            // Accept an incoming client connection on the server socket
            Socket sock = server.accept();

            // Create the output stream to the client
            DataOutputStream network = new DataOutputStream(sock.getOutputStream());

            //Create the incoming stream to read messages from
            DataInputStream message =  new DataInputStream(sock.getInputStream());

            String newLine = inFromClient.readLine();

            //Line to read
            String line;
            line = message.readUTF();
            line = line.toUpperCase();

            // Send message
            network.writeUTF(newLine);

            // Close sockets.  This will cause the client to exit
            sock.close();
            server.close();
        }
        catch (IOException ioe)
        {
            System.err.println("Error in I/O");
            System.err.println(ioe.getMessage());
            System.exit(-1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:41:46.050

问题是您的服务器只读取一次流并关闭套接字连接。您的服务器如何知道您已完成将客户端数据发送到服务器套接字？您应该修改服务器以侦听端口，直到您完成发送整个文本。为此，请执行以下操作 -

```
String newLine;
while ( true )
newLine = inFromClient.readLine();              
          if (newLine.equalsIgnoreCase("END"))
{
    break;
}

          newLine = newLine.toUpperCase();                 

// Send message             
          network.writeUTF(newLine);
}
// Close sockets.  This will cause the client to exit

sock.close();               
server.close(); 
```

并在发送完所有行后从客户端发送“END”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:49:53.537

最简单的方法是使用Apache Commons 的[IOUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html)。IOUtils.readLines 将返回一个字符串列表

完全相同的问题：[将 InputStream 读取/转换为字符串](https://stackoverflow.com/questions/309424/read-convert-an-inputstream-to-a-string)

# java - 特定单词的正则表达式

> ID：12746477
> 
> 赞同：5
> 
> 时间：2012-10-05T12:40:40.317
> 
> 标签：java, regex

我想使用标准库在 java 中创建一个正则表达式，该库将容纳以下句子：

```
12 of 128 
```

显然，数字可以是任何东西……从 1 位到许多位

另外，我不确定如何适应“of”这个词，但我想可能是这样的：

```
[\d\sof\s\d] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T12:42:48.813

这应该适合你：

```
(\d+\s+of\s+\d+) 
```

这将假设您想要将整个文本块捕获为“一组”，并且每个之间可以有一个或多个空白字符（如果只有一个空格，您可以更改`\s+`为 just `\s`）。

如果要单独捕获数字，可以尝试：

```
(\d+)\s+of\s+(\d+) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T12:42:56.353

你要这个：

```
\d+\sof\s\d+ 
```

与您已有的相关更改是添加了两个加号。这意味着，它应该匹配多个数字，但至少匹配一个。

示例：[http ://regexr.com?32cao](http://regexr.com?32cao)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T12:45:35.303

这个正则表达式

```
"\\d+ of \\d+" 
```

将匹配至少一位到任意位数，后跟字符串“ of”，然后是一位到任意位数。

# python - 为什么sklearn（python）和matlab统计包中的LASSO不一样？

> ID：12746479
> 
> 赞同：11
> 
> 时间：2012-10-05T12:40:48.680
> 
> 标签：python, matlab, linear-regression, scikit-learn, statistics

我使用`LaasoCV`from`sklearn`来选择最佳模型是通过交叉验证选择的。我发现如果我使用 sklearn 或 matlab 统计工具箱，交叉验证会给出不同的结果。

我使用`matlab`并复制了 [http://www.mathworks.se/help/stats/lasso-and-elastic-net.html](http://www.mathworks.se/help/stats/lasso-and-elastic-net.html)中给出的示例 以获得这样的数字

![在此处输入图像描述](../Images/ec8eb323ed5d07951d82c2ac66a0faf1.png)

然后我保存了`matlab`数据，并尝试使用`laaso_path`from复制图形`sklearn`，我得到了

![在此处输入图像描述](../Images/4bd7beacb4911f68c912f9ea38ef2033.png)

虽然这两个数字之间有一些相似之处，但也存在一定的差异。据我了解参数`lambda`in`matlab`和`alpha`in`sklearn`是相同的，但是在此图中似乎存在一些差异。有人可以指出哪个是正确的还是我错过了什么？此外，获得的系数也不同（这是我主要关心的问题）。

**Matlab代码：**

```
rng(3,'twister') % for reproducibility
X = zeros(200,5);
for ii = 1:5
      X(:,ii) = exprnd(ii,200,1);
end
r = [0;2;0;-3;0];
Y = X*r + randn(200,1)*.1;

save randomData.mat % To be used in python code

[b fitinfo] = lasso(X,Y,'cv',10);
lassoPlot(b,fitinfo,'plottype','lambda','xscale','log');

disp('Lambda with min MSE')
fitinfo.LambdaMinMSE
disp('Lambda with 1SE')
fitinfo.Lambda1SE
disp('Quality of Fit')
lambdaindex = fitinfo.Index1SE;
fitinfo.MSE(lambdaindex)
disp('Number of non zero predictos')
fitinfo.DF(lambdaindex)
disp('Coefficient of fit at that lambda')
b(:,lambdaindex) 
```

**蟒蛇代码：**

```
import scipy.io
import numpy as np
import pylab as pl
from sklearn.linear_model import lasso_path, LassoCV

data=scipy.io.loadmat('randomData.mat')
X=data['X']
Y=data['Y'].flatten()

model = LassoCV(cv=10,max_iter=1000).fit(X, Y)
print 'alpha', model.alpha_
print 'coef', model.coef_

eps = 1e-2 # the smaller it is the longer is the path
models = lasso_path(X, Y, eps=eps)
alphas_lasso = np.array([model.alpha for model in models])
coefs_lasso = np.array([model.coef_ for model in models])

pl.figure(1)
ax = pl.gca()
ax.set_color_cycle(2 * ['b', 'r', 'g', 'c', 'k'])
l1 = pl.semilogx(alphas_lasso,coefs_lasso)
pl.gca().invert_xaxis()
pl.xlabel('alpha')
pl.show() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-08T18:45:11.013

我没有 matlab，但要小心，通过交叉验证获得的值可能不稳定。这是因为它受到您细分样本的方式的影响。

即使您在 python 中运行 2 次交叉验证，您也可以获得 2 个不同的结果。考虑这个例子：

```
kf=sklearn.cross_validation.KFold(len(y),n_folds=10,shuffle=True)
cv=sklearn.linear_model.LassoCV(cv=kf,normalize=True).fit(x,y)
print cv.alpha_
kf=sklearn.cross_validation.KFold(len(y),n_folds=10,shuffle=True)
cv=sklearn.linear_model.LassoCV(cv=kf,normalize=True).fit(x,y)
print cv.alpha_

0.00645093258722
0.00691712356467 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T16:55:02.123

有可能`alpha = lambda / n_samples`
在`n_samples = X.shape[0]`scikit-learn 中

另一句话是，您的路径不是可能/应该是分段线性的。考虑减少 tol 并增加 max_iter。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-27T18:50:31.473

我知道这是一个旧线程，但是：

我实际上正在处理`LassoCV`从`glmnet`（在 R 中）的管道，并且我发现`LassoCV`首先对 X 矩阵进行归一化并不太好（即使您指定了参数`normalize = True`）。

使用 LassoCV 时，首先尝试对 X 矩阵进行归一化。

如果是 pandas 对象，

```
(X - X.mean())/X.std() 
```

看来您还需要将 alpha 乘以 2

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-10T11:23:47.340

虽然我无法弄清楚是什么导致了问题，但有一个合乎逻辑的方向可以继续。

这些是事实：

*   Mathworks 选择了一个示例并决定将其包含在他们的文档中
*   您的 matlab 代码产生的结果与示例完全相同。
*   替代方案与结果不匹配，并且过去提供了不准确的结果

这是我的假设：

*   与以替代方式复制此示例未给出正确结果的可能性相比，mathworks 选择在其文档中放置错误示例的可能性可以忽略不计。

合乎逻辑的结论：此示例的 matlab 实现是可靠的，而另一个则不可靠。这可能是代码中的问题，或者可能是您如何使用它的问题，但无论哪种方式，唯一合乎逻辑的结论是您应该继续使用 Matlab 来选择您的模型。

# show-hide - 需要在点击链接时显示/隐藏 div

> ID：12746483
> 
> 赞同：-1
> 
> 时间：2012-10-05T12:41:13.213
> 
> 标签：show-hide

我想做一些像这样的小提琴只适用于按钮而不是链接：

[http://jsfiddle.net/qNhZj/](http://jsfiddle.net/qNhZj/)

我需要它来处理链接，而且我还有一个介绍 div，它在单击其中一个链接后被隐藏。

谁能帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:48:21.037

您只需要声明链接而不是输入。在类列表中，添加要显示`id`的。`div`

```
Click a button to make it visible:

<div id="intro-tekst">Intro text here !</div>
<div class="boxes" id="coke">Coke is awesome!</div>
<div class="boxes" id="bubble-tea">Bubble tea is da bomb!</div>
<div class="boxes" id="milk">Milk is healthy!</div>
<br />
<p>
    I change my mind:
    <ul>
        <li><a href="javascript:void(0);" class="link coke">Coke</a></li>
        <li><a href="javascript:void(0);" class="link bubble-tea">Bubble Tea</a></li>
        <li><a href="javascript:void(0);" class="link milk">Milk</a></li>
    </ul>
</p> 
```

并像这样绑定它：

```
$(document).ready(function() {
    var url = window.location.href;
    var option = url.match(/option=(.*)/);
    if (option !== null) {
        $(".link ." . option[1]).trigger('click');
    }

    $(".link").bind('click', function () {
        $('#intro-tekst').hide();
        $('.boxes').hide();
        $('.link').removeClass('selected');
        $(this).removeClass('link');
        $('#' + $(this).prop('class')).show();
        $(this).addClass('link selected');       
    });   
}); 
```

JsFiddle 代码在这里：http: [//jsfiddle.net/Pq5Cv/8/](http://jsfiddle.net/Pq5Cv/8/)

# iphone - Sqlite 准备失败：没有这样的表

> ID：12746484
> 
> 赞同：1
> 
> 时间：2012-10-05T12:41:17.097
> 
> 标签：iphone, objective-c, sqlite

我已经创建了 sqlite 数据库。

我在我的应用程序中添加了这个 sqlite 文件，但是当我在模拟器中运行应用程序并检查文档目录中的 sqlite 文件路径时，我在文档目录的路径上打开了 sqlite 文件，当时我创建的表没有出现。

在本地副本中，我也可以在我的项目文件夹中看到表格我可以看到表格但是在模拟器的路径上我看不到表格

所以在我的控制台中它向我显示了错误：

> Sqlite Prepare 失败：没有这样的表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:05:55.733

我在下面的回复假设您的数据库格式正确且功能正常。您可以通过命令行轻松测试。在我自己的应用程序中，所有标签栏控制器应用程序，我将数据库访问代码放在应用程序委托中。应用委托中的两个方法如下：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions (NSDictionary *)launchOptions {
    [self createEditableCopyOfDatabaseIfNeeded];
    [self.window setRootViewController:rootController]; 
    [window makeKeyAndVisible];
    return YES;
} 
```

还：

```
- (void)createEditableCopyOfDatabaseIfNeeded {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];

    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;
    NSString *dbPath =[documentsDir stringByAppendingPathComponent:@"dbName.sqlite"];
    BOOL success = [fileManager fileExistsAtPath:dbPath];
    if(!success)
    {
        NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"dbName.sqlite"];
        success = [fileManager copyItemAtPath:defaultDBPath toPath:dbPath error:&error];

        if (!success)
            NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-18T05:09:36.693

如果您已经尝试了所有方法并且仍然收到此错误.. 即使您尝试重置 iOS 模拟器。尝试在iOS模拟器中安装应用程序，然后手动卸载（选择主页并长选应用程序图标并删除它），然后重置模拟器。

我不知道为什么，但我尝试了其他所有方法，花了几个小时把头撞在墙上。然后这奏效了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:03:28.807

您可以将 sqlite 文件放在您的 xcode 项目中并像这样找到它：

> ```
> NSString *pathToSQL = [[NSBundle mainBundle]
> pathForResource:@"sqlname" ofType:@"sql"]; 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-26T08:53:51.917

确保 sql 文件的“Target Membership”设置正确，以便项目“看到”它：

1）点击Xcode左侧窗格中的sql文件

2）打开/显示文件检查器（右窗格）

3）在“目标会员”下，确保“检查”是“检查”

就是这样。希望，这就是你要找的。任何问题都可以回复我。

# php - 从 get_template_part 获取变量？

> ID：12746491
> 
> 赞同：3
> 
> 时间：2012-10-05T12:42:05.080
> 
> 标签：php, wordpress

是否可以从另一个模板获取变量？

我有一个页面模板，顶部有以下内容：

```
<?php echo $table_name; ?> 
```

然后再往下一点，我正在使用这个：

```
<?php get_template_part('governance-management'); ?> 
```

该模板中包含以下内容（以及许多其他显示良好的代码）：

```
<?php $table_name = "CPEL Implementation"; ?> 
```

如何`$table_name`在第一个回显中回显变量？

问题是我在设置变量之前调用它。有没有办法解决这个问题？我试过把回声放在下面，`get_template_part`但它仍然没有显示任何东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T14:46:21.687

好吧，您只需将变量声明为`global`：

```
global $table_name;
$table_name = "CPEL Implementation"; 
```

如果你想在另一个模板中使用它：

```
global $table_name;
echo $table_name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-10T17:44:02.093

“全局”方法对我不起作用。（因为这是一个公认的答案，它可能在 2012 年有效，但在 2015 年无效？！）

我不得不将 get_template_part 行更改为：

```
include(locate_template('content.php')); 
```

# html - 使用 JAXWS Jersey Web 服务显示图像

> ID：12746492
> 
> 赞同：0
> 
> 时间：2012-10-05T12:42:07.420
> 
> 标签：html, jersey, jax-rs, image

我有一个 java webservice (jaxws /jersey) 并希望它在我使用浏览器访问 web 服务时在首页上显示图像。

我为第一页发送 html 代码的 @GET 方法如下：

```
@GET
@Produces(MediaType.TEXT_HTML)
public String getHTMLSite(){

    String message = "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">"+
            "<html xmlns=\"http://www.w3.org/1999/xhtml\" dir=\"ltr\" lang=\"de-DE\">" +
            "<div style=\"padding-left:20px; height:200px; width:800px; font-size:20px;\">" +
                "<p>" +
                    "<h1 style=\"color:#313e7d\">" +
                        "Hello World. This is a Webservice URL" +
                    "</h1>" +
                "</p>"+
                "<img src=\"/images/img_logo.gif\" height=\"51\" width=\"537\"/>"+
            "</div>"+
            "</html>";

    return  message;
} 
```

一切正常，除了图像

```
<img src=\"/images/img_logo.gif\" height=\"51\" width=\"537\"/> 
```

还没有找到。

我将图像移动到 WebContent / images/ 目录中。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:07:14.293

由于您已将 servlet 映射设置为`/*`Jersey，因此将拦截所有对静态资源的请求，并且不知道如何处理它们。你可以：

*   将您的 servlet 映射的位置移动到`/api/*`或类似的位置。这将解决静态资源问题，但会移动所有 REST 调用的终点。

*   切换到本答案中所述的 Jersey 过滤器：[Jersey /* servlet mapping 导致静态资源出现 404 错误](https://stackoverflow.com/questions/12422660/jersey-servlet-mapping-causes-404-error-for-static-resources/12428843#12428843)

# xcode - 无法升级到 XCode 4.5.1

> ID：12746494
> 
> 赞同：1
> 
> 时间：2012-10-05T12:42:07.873
> 
> 标签：xcode

我无法从应用商店下载 XCode 4.5.1。我有一个有效的开发者许可证等等。我输入了我的 Apple Id 登录到应用商店，单击升级按钮更新 xcode 4.5.1 后，按钮的文本从“升级”切换到“安装”。但是当再次点击安装时没有任何反应。所以我最终遇到的情况是我可以点击安装按钮，但什么都没有发生......

目前我在我的 Mac OS Lion 版本 10.7.5 上运行 XCode 版本 4.4 (4F250)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T13:48:33.343

好的，这就是我所做的：

1.  转到[Apple Developer Download Center](https://developer.apple.com/downloads/index.action?name=Xcode)并直接从网页下载 XCode（不是从这个愚蠢的 App Store 下载）
2.  将 Applications 文件夹中现有的旧 XCode App 重命名为例如 XCode_44 或通过将其拖入垃圾箱将其删除
3.  打开 den dmg XCode 4.5.1 文件并将 XCode 复制到应用程序文件夹
4.  启动 XCode 4.5.1（可能需要一段时间，所以请耐心等待）
5.  干得好！现在您可以并行使用 XCode 4.4 和 XCode 4.5.1（如果需要）

# c# - 传递 C# 变量并将其用作 SQL 语句查询中的列值

> ID：12746498
> 
> 赞同：2
> 
> 时间：2012-10-05T12:42:23.547
> 
> 标签：c#, asp.net, sql, sql-server-2008

我需要将变量的值用作我正在生成的 SQL 插入查询中的字段之一。在 PHP 中，我这样做：

```
if($currency = "USD")
{
 $columntoinsert = "USD_Currency";
} 
else
{
 $columntoinsert = "";
} 
```

然后在我的 SQL 语句中，我会像这样执行查询：

```
$sqlinsertpayment = sqlsrv_query($connect,"INSERT INTO Payments_TBL(column1,column2,$columntoinsert,columnn)VALUES(????)",$params) or die("An error occurred trying to execute the statement"); 
```

我想在 C# 中做同样的事情。我有以下代码来设置我要使用的列

```
var amountfield = "";
  if (save_currency != "USD")
    {
      amountcolumn = "Amount";

     }
  else
   {
      amountcolumn = "USD_Amount";
   } 
```

但是我无法执行我的 sql 查询，因为尝试`amountcolumn`在查询字符串中使用会产生`Invalid column name`预期的错误。如何以这种方式使用变量：

```
var sql = new sqlCommand("INSERT INTO Payments_TBL(column1,column2,myc#variablevaluehere,column3,....)Values(@value,@value,@value)",new sqlConnection(conn)); 
```

对其他选择持开放态度。所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T12:47:33.113

因为 for 的值`amountfield`来自您的代码逻辑，所以您可以安全地执行以下操作：

```
var sql = new sqlCommand(String.Format("INSERT INTO Payments_TBL(column1,column2,{0},column3,....)Values(@value,@value,@value)", amountcolumn),new sqlConnection(conn)); 
```

但是永远不要对来自用户的字符串做这样的事情，因为这会让你打开 SQL 注入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T12:46:16.180

它的

```
var amountfield = save_currency != "USD" ? "Amount" : "USD_Amount";

var sql = new sqlCommand("INSERT INTO Payments_TBL(column1,column2," 
+  amountcolumn + 
",column3,....)Values(@value,@value,@value)",new sqlConnection(conn)); 
```

或者

```
var sql = new sqlCommand(
                   String.Format("INSERT INTO Payments_TBL(column1,column2,  
                   {0},column3,....)Values(@value,@value,@value)", amountfield), 
                   new sqlConnection(conn)); 
```

# backbone.js - 将数据插入到使用 require.js 加载的模板中

> ID：12746504
> 
> 赞同：0
> 
> 时间：2012-10-05T12:42:52.917
> 
> 标签：backbone.js, requirejs

我对 Backbone.js 和 Require.js 很陌生。在我的应用程序中，我通过 require （使用文本！插件）将模板加载到每个模块中，如下所示：

```
define([
'jQuery',
'Underscore',
'Backbone',
'API',
'Utils',
'text!templates/home/register.html'
], function($, _, Backbone, api, utils, registerTpl){
       var registerView = Backbone.View.extend({
           el: $("#content"),
           render: function(){
               this.el.html(registerTpl);
           },
           {...} 
```

我不知道如何绑定数据模型或直接将数据加载到我的模板中，如backbonetutorials.com 示例中所示，如下所示：

```
{...}
render: function(){
        //Pass variables in using Underscore.js Template
        var variables = { search_label: "My Search" };
        // Compile the template using underscore
        var template = _.template( $("#search_template").html(), variables );
        // Load the compiled HTML into the Backbone "el"
        this.el.html( template );
},
{...}
<script type="text/template" id="search_template">
<!-- Access template variables with <%= %> -->
<label><%= search_label %></label>
<input type="text" id="search_input" />
<input type="button" id="search_button" value="Search" />
</script> 
```

任何见解、提示或代码片段将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:57:42.523

这很简单，在本教程中，它直接从 DOM 获取模板数据，而您将其作为引用传递给 require js。

你可以这样做：

```
template = _.template(registerTpl),

render: function(){
        var variables = { search_label: "My Search" };
        this.el.html(this.template(variables));
        return this;
}, 
```

相反，如果您想将模型的数据与模板一起使用：

```
this.el.html(this.template(this.model.toJSON())); 
```

# javascript - 每次渲染 Backbone 视图时是否应该使用 jQuery 选择相同的元素

> ID：12746508
> 
> 赞同：2
> 
> 时间：2012-10-05T12:42:56.190
> 
> 标签：javascript, jquery, twitter-bootstrap

是否有必要为每个渲染的 Backbone View 选择相同的 DOM 元素并对其进行处理？任何时候都只有一个视图存在。

例如，说 Bootstrap 的 Tabs（可选项卡插件）必须在特定的主干 View 上使用`Product`。在函数中包含可选项卡插件的初始化代码是否正确`render`？

```
render: function() {

    this.$el.html( this.template( this.model.toJSON() ) );

    // Activate Twitter Bootstrap Tabs
    $('.tab-bar').tab();
    $('.tab-bar .tab:first').tab('show');
    $('.tab-bar .tab').click(function(e) {
        e.preventDefault();
        $(this).tab('show');    });

    return this;
} 
```

或者有没有办法只调用这个选择器一次，它会触发所有具有类的元素，`.tab-bar`包括那些尚未存在的元素。

同样，如果我想要第一个选项卡上的点击处理程序

```
$('.tab:first').click(function(){
    console.log('hey!')'
} 
```

我应该把它放在那个视图的`render`函数中吗？`click`如果我这样做，如果视图被多次呈现，它不会创建许多事件侦听器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:45:00.390

您需要在初始化方法中绑定事件侦听器，而不是在渲染中。除非您要多次重新渲染 DOM 元素。

编辑

```
window.myView = Backbone.View.extend({

    events: {
        'click #someElementID': 'do_something',
    },

    initialize: function(){
        _.bindAll(this, 'render', 'do_something');
    },

    .....

    do_something: function(e){
        console.log("A click was made!", e.currentTarget);
    }

}); 
```

# hibernate - 当从父集合中删除时，休眠 jpa 从表中删除子项并更新父项

> ID：12746516
> 
> 赞同：1
> 
> 时间：2012-10-05T12:43:18.523
> 
> 标签：hibernate, jpa, one-to-many, many-to-one

我的代码中有这样的父子关系（一对多/多对一）

父母

```
@JsonAutoDetect
@Entity
@Table(name = "Parent")
public class Parent{

    private Integer id;
    private List<Child> childs;

    @Id
    @GeneratedValue(strategy= GenerationType.AUTO)
    @Column (name="idparent")
    public Integer getId() {
        return id;
    }
    public void setId(Integer id) {
        this.id = id;
    }

    @OneToMany(mappedBy = "parent", cascade = CascadeType.ALL)
    @LazyCollection (LazyCollectionOption.FALSE)
    public List<Child> getChilds() {
        return childs;
    }
    public void setChilds(List<Child> childs) {
        for (Child child: childs) {
            child.setParent(this);
        }
        this.childs= childs;
    }
} 
```

和孩子

```
@JsonAutoDetect
@Entity
@Table(name="Child")
public class Child{

    private Integer id;
    private Parent parent;

    @Id
    @GeneratedValue(strategy= GenerationType.AUTO)
    @Column (name = "idchild")
    public Integer getId() {
        return id;
    }
    public void setId(Integer id) {
        this.id = id;
    }

    @ManyToOne(fetch = FetchType.EAGER)
    @NotFound(action = NotFoundAction.IGNORE)
    @JoinColumn(name = "idparent")
    @JsonIgnore
    public Parent getParent() {
        return parent;
    }
    public void setParent(Parent parent) {
        this.parent= parent;
    }
} 
```

一切都很好，但是当我想像

```
parent.getChilds().remove(child);
session.update(parent); 
```

孩子没有从桌子上移开，有什么问题，你能帮我吗，对不起我的英语不好:-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:55:42.750

`child`在这种情况下，不应从数据库中删除。如果这是您想要的行为，您需要启用“孤儿删除”：

```
@OneToMany(mappedBy = "parent", cascade = CascadeType.ALL, orphanRemoval=true)
@LazyCollection (LazyCollectionOption.FALSE)
public List<Child> getChilds() {
    return childs;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:11:42.400

可能会有所帮助

```
Child c = (Child) parent.getChilds();
parent.getChilds().remove(c);
c.setParent(null); 
```

或者

```
Child c = (Child) parent.getChilds();
parent.getChilds().remove(c);
session.delete(c); 
```

# http - 有没有办法在龙卷风中设置上传的文件大小限制？

> ID：12746518
> 
> 赞同：9
> 
> 时间：2012-10-05T12:43:27.843
> 
> 标签：http, file-upload, limit, tornado, filesize

我正在使用[tornado](http://www.tornadoweb.org/)制作图像处理 RESTful 服务，该服务接受通过通用 HTTP 方式上传的图像，例如`multipart/form-data`. 然后我在处理程序中使用`self.request.files`.

攻击者可能会尝试上传一个巨大的文件来破坏服务。有没有办法告诉 tornado 上传的文件大小限制，超过应该丢弃哪个文件并设置错误 HTTP 状态？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-04-21T01:25:40.250

这个我试过了，有效！`max_buffer_size`默认值为 100 M。

```
import tornado.httpserver

app = tornado.web.Application([
    (r'/upload/', UploadFileHandler),
])

server = tornado.httpserver.HTTPServer(app, max_buffer_size=10485760000)  # 10G
server.listen(8888)
tornado.ioloop.IOLoop.instance().start() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-01T20:07:52.333

您可以在创建服务器时传递一个 max_buffer_size 参数。例如允许 160MB 上传”

```
HTTPServer(app, max_buffer_size=167772160) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T12:46:29.940

您必须在 Web 服务器上进行配置。例如，使用 nginx：

```
client_max_body_size 50M; 
```

编辑： HttpServer 使用的流具有 max_buffer_size 属性。HttpServer 将不接受比这更大的上传。它的默认值为 100MB。在我看来，当达到此限制时，HttpServer 只是关闭连接而不是发送 HTTP 响应。

# r - 防止第二个传说

> ID：12746523
> 
> 赞同：9
> 
> 时间：2012-10-05T12:43:53.680
> 
> 标签：r, ggplot2

我有一个 ggplot，它还显示一个图例：

```
ggplot(dt.m, aes(x=pct.on.OAC.cont,y=Number.of.Practices, fill=Age.Group)) +
    geom_bar(stat="identity",position=position_dodge()) 
```

当我添加另一行时，我还会得到第二个图例：

```
geom_smooth(aes(x=pct.on.OAC.cont,y=Number.of.Practices, colour=Age.Group), se=F, alpha=0.5) 
```

如何防止显示第二个图例？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-05T12:47:49.580

用于：`show_guide = FALSE`_`geom_smooth`

```
geom_smooth(aes(x=pct.on.OAC.cont,y=Number.of.Practices, colour=Age.Group),
            se=F, alpha=0.5, show_legend = FALSE) 
```

这会抑制绘制图例。

# javascript - javascript - 显示匹配项 onkeyup

> ID：12746524
> 
> 赞同：0
> 
> 时间：2012-10-05T12:43:54.053
> 
> 标签：javascript, onkeyup

这个已经可以了，但是我在更改数组的内容时遇到了问题。

我想查询我的数据库并将该数据用作数组的元素。

我该怎么做呢？

```
<script type="text/javascript" language="javascript">
        function ShowMe(obj) {

            var lbl = document.getElementById('divContent');

            var myArray = new Array();
            myArray[0] = "Football";
            myArray[1] = "Baseball";
            myArray[2] = "Cricket";
            myArray[3] = "Fast";

            var s2 = obj.value.toLowerCase();

            for (i = 0; i < myArray.length; i++) {
                if (myArray[i].toLowerCase().indexOf(s2) != -1) 
                {
                    lbl.innerHTML = myArray[i];
                }
            }

        }

    </script>

<div>
<h1>JS Test</h1>
<input id="txtInput" onkeyup="javascript:ShowMe(this)" />
<div id="divContent">

</div> 
```

主要问题是......如何将我的数组传递到脚本中？

假设我已经有了

```
$myquery_array; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:47:37.513

你想要这个吗？[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:47:04.707

您应该尝试阅读有关[Ajax的信息](http://www.w3schools.com/ajax/default.asp)

# android - android - 带有换行符的 TextViews

> ID：12746525
> 
> 赞同：2
> 
> 时间：2012-10-05T12:44:02.377
> 
> 标签：android, textview, android-linearlayout

我有 TextViews，我希望它们像换行一样成行。TextViews 是具有某些功能的对象。它们是由逗号分隔的数组中的单词。我想用换行符按顺序显示它。

**这是我的代码：**

```
int i;
String p = "one, two, three, four, five, six, seven, eight, ten";
String[] array = p.split(",");

LinearLayout groupLL = new LinearLayout(this);
LinearLayout.LayoutParams gLLP = new LinearLayout.LayoutParams(
    new ViewGroup.MarginLayoutParams(
    LinearLayout.LayoutParams.WRAP_CONTENT,
    LinearLayout.LayoutParams.WRAP_CONTENT));

LinearLayout.LayoutParams mlp = new LinearLayout.LayoutParams(
    new ViewGroup.MarginLayoutParams(
    LinearLayout.LayoutParams.FILL_PARENT,
    LinearLayout.LayoutParams.WRAP_CONTENT));
mlp.setMargins(0, 0, 10, 0);

for (i = 0; i < array.length; i++) {
    TextView newTextView = new TextView(this);
    newTextView.setText(array[i]);
    newTextView.setBackgroundColor(Color.RED);
    newTextView.setSingleLine(true);
    newTextView.setTextSize(20);

    groupLL.addView(newTextView, mlp);
}

ll.addView(groupLL, gLLP); 
```

**这是我的布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/ScrollView02"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

    <RelativeLayout
    android:id="@+id/RelativeLayout02"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout android:id="@+id/LinearLayout2"
              xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:orientation="vertical" >
    </LinearLayout>

    </RelativeLayout>

</ScrollView> 
```

**我有这个：**

```
|one two three four five s|
|                         |
|                         | 
```

**我要这个：**

```
|one two three four five  |
|six seven eight ten      |
|                         | 
```

* * *

**编辑：**

如果我改变 newTextView.setSingleLine(true); 到 newTextView.setSingleLine(false); 然后我有这个：

```
|one two three four five six |
|                         sev|
|                          en| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:48:24.237

改变

```
newTextView.setSingleLine(true); 
```

至

```
 newTextView.setSingleLine(false); 
```

希望它会工作我的朋友......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:49:03.790

尝试为 textviews 设置 setEllipsize

```
newTextView.setEllipsize(null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:48:13.220

将 following 设置为 false 而不是 true 以启用换行`newTextView.setSingleLine(true);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T12:47:17.397

当您在此设置 true 时，`newTextView.setSingleLine(true);`如果您希望文本在下一行换行，则需要设置为 false

只需`newTextView.setSingleLine(false);`在 for 循环中更改它

根据您的代码，您每次都在新的 TextView 中添加数组对象的单个元素，并且不需要为此设置此方法，您需要为此更改布局。如果您要在单个 textview 中附加或设置 p 字符串，则可以根据需要获得，但是使用多个 textview，则需要更改布局。

对于单个文本视图

```
TextView newTextView = new TextView(this);
newTextView.setText(p);
newTextView.setBackgroundColor(Color.RED);
newTextView.setTextSize(20);

groupLL.addView(newTextView, mlp); 
```

# loops - Vaadin 多重网格布局

> ID：12746532
> 
> 赞同：0
> 
> 时间：2012-10-05T12:44:38.410
> 
> 标签：loops, components, vaadin, grid-layout

请帮帮我，我在 for 循环中使用 Vaadin 的 GridLayout

```
 for (int i = 0; i < SubjectLength; i++) 
                    {
                    GridLayout tableHeader= new GridLayout(3,1);
                    tableHeader.addComponent(TopicTitle);
                    tableHeader.addComponent(MinHr);
                    tableHeader.addComponent(Streams);
                    tableHeader.setWidth("300px");
                    tableHeader.addStyleName(TABLEHEADER_STYLE);
                    } 
```

问题是 GridLayout 的多次添加以在循环的最后一个值添加 gridLayout 结束。但是如果我尝试执行 System.out.println("print") 它会导致打印正确数量的打印值。我应该怎么做才能添加多个 GridLayout？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:52:59.113

您不能在布局中多次添加相同的组件。您必须创建 TopicTitle、MinHr 和 Streams 的新实例。

# php - PHP fopen() 不创建文件

> ID：12746540
> 
> 赞同：5
> 
> 时间：2012-10-05T12:45:10.123
> 
> 标签：php, fopen

根据[fopen 文档](http://www.php.net/manual/en/function.fopen.php)，在某些模式下，如果文件不存在，它会创建文件，但在我的情况下，我检查了所有“w”、“w+”、“x”和“x+”模式，但它只是抛出警告在我身上，它无法创建文件。

这是我的代码：

```
$this->handle = fopen($this->log_name, 'w'); 
```

我得到了什么：

```
Warning: fopen(D:\xampp\htdocs\farid\logs\error.php) [function.fopen]: failed to open stream: No such file or directory in D:\xampp\htdocs\farid\libraries\error\log.php on line 34
Warning: fwrite() expects parameter 1 to be resource, boolean given in D:\xampp\htdocs\farid\libraries\error\log.php on line 66
Warning: fclose() expects parameter 1 to be resource, boolean given in D:\xampp\htdocs\farid\libraries\error\log.php on line 27 
```

我在windows环境下工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T12:49:40.000

检查日志文件的路径是否存在，它会创建一个文件，而不是目录。

还要检查运行 xampp 的用户是否有权访问您指定的文件夹。

# javascript - Javascript内存泄漏删除Raphael路径对象

> ID：12746542
> 
> 赞同：1
> 
> 时间：2012-10-05T12:45:14.867
> 
> 标签：javascript, memory-leaks, raphael

我的代码中有内存泄漏，我无法弄清楚是什么原因造成的。我从一个`WebSocket`基本上包含一个 ID 和一个 X、Y 坐标的目标数据接收。数据被传递给一个`HandleData`函数，该函数为每个目标创建一个圆圈和一条线（已更新）以显示目标从/到的移动位置。

如果目标不再出现在`WebSocket`流中，则将其删除。在测试中，尽管我删除了这些项目，但我发现网页迅速积累了数百 mb 的数据。在使用 Chrome 的内存分析器时，尽管我删除了它，但 Raphael（或其他东西）似乎保留了所有路径信息。

如果有人可以帮助我，我将不胜感激。拉斐尔似乎确实掌握了数据，但我很有可能在代码中的某个地方犯了错误:)

```
var arrayColours = ["#f33", "#3f3", "#33f", "#f66", "#6f6", "#66f"];

var targetStructArray = [];

function HandleTargetData(data) {

    //Go through all our existing targets and mark them as not updated
    for (var i = 0; i < targetStructArray.length; i++) {
        targetStructArray[i].updated = false;
    }

    for (var i = 0; i < data.targets.length; i++) {
        var targetData = data.targets[i];
        var targetStruct = undefined;

        //find our targetStruct
        for (var j = 0; j < targetStructArray.length; j++) {
            if (targetStructArray[j].id == targetData.id) {
                targetStruct = targetStructArray[j];
                break;
            }
        }

        //If it doesnt exist, create it
        if (!targetStruct) {
            var path = paper.path();

            path.attr({ "stroke-width": "2", "stroke": "#888" });
            path.addPart(['M', targetData.x, targetData.y]);

            var circle = paper.circle(targetData.x, targetData.y, 15, 15).attr({
                stroke: "none",
                fill: arrayColours[Math.floor(Math.random() * arrayColours.length)] //random colour
            });

            //Create our struct
            targetStruct = {
                circle: circle,
                path: path,
                id: targetData.id,
                updated: false
            };

            targetStructArray.push(targetStruct);
        }
        else {
            targetStruct.circle.attr({ cx: targetData.x, cy: targetData.y });
            targetStruct.path.addPart(['L', targetData.x, targetData.y]);
        }

        //ensure we are set as updated
        targetStruct.updated = true;
    }

    //Go through all our existing targets and delete any that werent updated
    for (var i = targetStructArray.length - 1; i >= 0; i--) {
        if (!targetStructArray[i].updated) {
            targetStructArray[i].circle.remove();
            targetStructArray[i].path.remove();

            targetStructArray[i].circle.removeData();
            targetStructArray[i].path.removeData();

            targetStructArray[i].circle = null;
            targetStructArray[i].path = null;

            targetStructArray[i] = null;
            targetStructArray.remove(i);
        }
    }
} 
```

我使用了此处未列出的两个函数，它们是[John Resig 的 Array.Remove](http://ejohn.org/blog/javascript-array-remove/)和来自不同[问题的 Raphael 辅助函数](https://stackoverflow.com/a/8860479/94278)

# javascript - jQuery循环遍历整个元素树以消除内存泄漏和孤立元素

> ID：12746546
> 
> 赞同：0
> 
> 时间：2012-10-05T12:45:36.257
> 
> 标签：javascript, jquery, memory-leaks

我有一个非常复杂的元素树正在渲染，有很多级别，我需要深入挖掘最后一个子元素以开始从底部到顶部删除，我需要动态地执行此操作。

我的意思是说：

我想从让我们说“div”元素开始并遍历所有子元素。当我找到“div”的第一个孩子时，我想去找那个孩子的孩子。

我希望它很清楚，但这里有一个更直观的表示来帮助您理解：

```
<div> 1
    <a>1(a)</a>
    <div>1(b)
        <div>1(b)(1)
            <div>1(b)(1)(1)
                <a>1(b)(1)(1)(1)</a>
            </div>
        </div>
        <span>1(b)(2)</span>
    </div>
    <div>1(c)</div>
</div> 
```

考虑到我想要的上述结构：从点**1**开始动态地挖掘点**1(b)(1)(1)(1)**（不知道 id、类或类型）并销毁最后一个孩子（**1(b)(1 )(1)(1)** ) 然后它是父级，依此类推。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:24:20.343

DFS = 深度优先搜索。这是一个简单的 DFS，可以满足您的要求（如果我的要求正确）：http: [//jsfiddle.net/umkZ2/](http://jsfiddle.net/umkZ2/)

每个警报都为最深的节点着色。您可以用延迟或其他方式替换它。

# c# - 在C#中通过传递keyvalue获取hashtable值

> ID：12746547
> 
> 赞同：-1
> 
> 时间：2012-10-05T12:45:37.023
> 
> 标签：c#, hashtable

我正在尝试从 Hashtable 存储和获取一些值。当我通过将键传递给该哈希表来获取值时，它返回一个空值。但这具有将该传递的值作为键的表。

我正在使用一些字符串变量添加 Hashtable 键和值。

**编辑：** 这是我的代码。

```
Hashtable hashtbl = new Hashtable();
string[,] ValueArray =new string[3,2];
 ValueArray[0,0]="key1";
 ValueArray[0,1]="value1";
 ValueArray[1,0]="key2";
 ValueArray[1,1]="value2";
 ValueArray[2,0]="key3";
 ValueArray[2,1]="value3";

 for(int i=0;i<ValueArray.GetUpperBound(0);i++)
 {
     string mykey=ValueArray[i,0];
     string myval=ValueArray[i,1];
 if (hashtbl.ContainsKey(mykey)==false)
     {
   hashtbl.Add(mykey,myval);
     }
   } 
```

之后我试图获得像

```
string newVal =hashtbl[mykey].ToString(); 
```

它抛出一个空异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:51:14.337

有几种可能：

*   你已经`null`在`mykey`之前插入了，现在你把它拿回来了，因为`if`语句返回`true`
*   `myval`为 null 并且您的代码可以完美运行
*   `mykey`是有一个非常奇怪的实现的类型`GetHashCode`

前两个选项实际上是不可能的，就像`hashtbl[mykey].ToString()`throw一样`NullObjectReference`。我还假设这不是真正的代码，因为我想不出`x.ToString()`会返回 null 的场景，除非您忘记提及它`myval` 是您的自定义类型，它以一种奇怪的方式覆盖它。

因此，我会假设后者：是您的类型以它返回的方式`myval`覆盖。`ToString``null`

编辑：在显示您的代码并澄清最后一行不返回 null 而是抛出之后，看起来第二种情况正在发生。如果您通过调试器运行代码，您将看到您正在为键索引大于 2 的每个条目插入空值。因此，哈希表返回空值。

这个片段是可疑的：`ValueArray.GetUpperBound(0) - 1`. 尝试删除“-1”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:18:10.877

我已经执行了以下代码，它在我这边运行良好。请检查您是否`myKey`在`hasttbl`. myKey 应该是您在 hashtbl 中输入的 sctual 字符串键。

```
class Program
    {
        static void Main(string[] args)
        {
            Hashtable hashtbl = new Hashtable();
            string[,] ValueArray = new string[10, 2];
            ValueArray[0, 0] = "key1";
            ValueArray[0, 1] = "value1";
            ValueArray[1, 0] = "key2";
            ValueArray[1, 1] = "value2";
            ValueArray[2, 0] = "key3";
            ValueArray[2, 1] = "value3";

            for (int i = 0; i < ValueArray.GetUpperBound(0) - 1;i++)
            {
                if (ValueArray[i, 0] == null)
                    continue;

                string mykey = ValueArray[i, 0];
                string myval = ValueArray[i, 1];
                if (hashtbl.ContainsKey(mykey) == false)
                {
                    hashtbl.Add(mykey, myval);
                }
            }

            foreach (string key in hashtbl.Keys)
            {
                string newVal = hashtbl[key].ToString();

                Console.WriteLine("New value: " + newVal);
            }
            Console.ReadLine();
        }
    } 
```

输出

```
New value: value2 
New value: value3 
New value: value1 
```

# nservicebus - NServiceBus ：当使用 2 个订阅者时，两个队列中都有 2 条消息

> ID：12746552
> 
> 赞同：2
> 
> 时间：2012-10-05T12:45:54.213
> 
> 标签：nservicebus

我是使用 NServiceBus 的新手，所以我很确定我只是搞砸了我的 pub/sub 功能的配置......

我设置了 2 个订阅者（ A & B ）来处理相同的事件。我正在使用 MSMQ 进行消息存储。如果我评论 B 的处理程序并且只订阅 A，那么 A 的处理程序只被调用一次（并且只有 1 条消息在 A 的队列中）。

但是，当我取消注释 B 订阅者中的处理程序以处理相同的事件时。A 和 B 都在他们的队列中得到两个完全相同的消息，这导致每个处理程序运行两次。

我正在使用 NServiceBus 3.2.0.0，每个事件订阅者都在单独的项目中并在他们自己的 NServiceBus 主机中运行。

这是我的总线设置...

```
 private IBus CreateBus()
    {
        return Configure.With()
            .NinjectBuilder(this.Kernel)
            .Log4Net()
            .MsmqTransport()
            .PurgeOnStartup(true)
            .UnicastBus()
            .LoadMessageHandlers()
            .CreateBus()
            .Start(() => Configure.Instance.ForInstallationOn<NServiceBus.Installation.Environments.Windows>().Install());
    } 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:05:52.283

事实证明这是对ninject的滥用。我还在我的解决方案中使用了 EventStore，所以当我在第一个实例完成提交之前注入第二个 EventStore 实例时，它重新发布了未提交的第一个事件。

# django - Django中的简单投票按钮

> ID：12746553
> 
> 赞同：1
> 
> 时间：2012-10-05T12:46:00.377
> 
> 标签：django, django-forms, django-csrf

我是 django 的绝对初学者（和一般编程），我已经尝试了 django Polls 教程并且一切顺利，但是我试图让一个最小的投票按钮工作。基本上我已经建立了一个有两列的数据库，我的`models.py`样子是这样的

```
from django.db import models

class Imgurl(models.Model):

    urlvar = models.URLField(max_length=200)# a URL linking to an image
    urlvote = models.IntegerField(default=0)# my intended vote count

    def __unicode__(self):
        return self.urlvar 
```

我制作了一个输入框，我可以在其中复制和粘贴图像 url，然后该图像显示在单独的页面上（这很好用）。我想要的是在每个显示的图像旁边都有一个投票按钮，用户可以在其中单击按钮（我正在尝试使用提交按钮），并且数据库中的投票数将增加（不会重定向到新页面，或任何花哨的东西）。

我认为这是一个微不足道的问题，我正在尝试学习`POST`django 中的基础知识和数据库处理（另外，我已经阅读了 djangobook 中的相关章节......也许我只是有点慢？）

我的观点看起来像这样

```
def urlvotes(request):

    if request.method=='POST':
        if 'voteup' in request.POST:
            v=Imgurl(forloop.counter)
            v.urlvote +=1
        else:
            pass
        votetotal=v.urlvote # attempt to give the template some kind of context
    return render_to_response('display.html', {'votetotal':votetotal}, context_instance=RequestContext(request)) 
```

我的模板如下所示：

```
{% extends "base.html" %}

{% block head %}Image display{% endblock %}
{% block content1 %}

<a href="http://127.0.0.1:8000/home/">Home</a>
{% if links %}
        <ul>
        {% for link in links %}
            <li><img src="{{ link }}"></li>

            <li><form action="{% url urlvotes %}" method="post"> 
            {% csrf_token %}
            <input type="submit" name="voteup" value='vote'/></p>
            <p>{{votetotal}}</p>
            </form></li>

        {% endfor %}

        </ul>
{% else %}
<p>No uploads.</p>
{% endif %}
{% endblock %} 
```

当我按原样运行时，我收到一个 csrf 验证失败错误

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:54:03.487

尝试将@csrf_protect 添加到您的视图中

```
@csrf_protect
def urlvotes(request):

    if request.method=='POST':
        if 'voteup' in request.POST:
            v=Imgurl(forloop.counter)
            v.urlvote +=1
    else:
        pass
    votetotal=v.urlvote # attempt to give the template some kind of context
    return render_to_response('display.html', {'votetotal':votetotal}, context_instance=RequestContext(request)) 
```

# java - WebServices (JAVA - Jersey) 与 PHP 客户端之间的连接

> ID：12746554
> 
> 赞同：-2
> 
> 时间：2012-10-05T12:46:00.590
> 
> 标签：java, php, web-services, jersey

我正在尝试将 php 客户端与 Java WS 连接，我正在研究它，但我找不到谈论这个的好文章，我对 PHP ws 和 PHP 客户端有一点经验，但对 Java 没有，我也查看了互联网和 stackoverflow，但没有任何帮助，有人对 Jersey(ws) - Php(client) 有经验吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:12:26.980

如果您正在实现客户端，那么在服务器端使用哪种实现并不重要，只要您使用相同的技术即可。

在您的情况下，您还没有说过，但说到泽西岛，它是关于 RESTful Web 服务的。试着用一句话说出来，使用宁静的网络服务，您（不一定，但通常）通过 HTTP 请求资源，比方说亚马逊网络服务上的一本书，提供该资源的 URL。

因此，您基本上需要做的就是对所述资源执行 HTTP GET 操作并处理答案的格式（例如 JSON 对象）。

我不知道你在搜索什么，但如果你用谷歌搜索 php 和 restful 的 werbservice 客户端，你肯定会找到比你需要的更多的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:36:44.497

我有解决办法！感谢 stackoverfow 和许多其他网站以及合作伙伴，请看：

```
**curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/json; charset=utf-8","Accept:application/json, text/javascript, */*; q=0.01"));**

**$postargs = array('user' => 'user', 'pass' => 'pass');**

**json_encode($postargs);** 
```

这救了我的命！！

多谢你们！

# iphone - 如何更改日期和时间格式？

> ID：12746556
> 
> 赞同：2
> 
> 时间：2012-10-05T12:46:10.400
> 
> 标签：iphone, objective-c, ios, ios5

> **可能重复：**
> [如何更改 iphone sdk 中的日期格式](https://stackoverflow.com/questions/11984285/how-to-change-the-date-format-in-iphone-sdk)

实际上我得到了一个 24 小时时间格式的字符串。我想显示 12 小时时间格式。

这是我的输入：

```
2012-10-19T04:10:00

2012-10-06T14:00:00 
```

我想要以下格式：

```
10-19-2012 4:10 AM

10-06-2012 2:00 PM 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:54:51.557

：使用 NSDateFormatter 更改日期

您的输入：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss"];
NSDate *Yourcurrenttime = [dateFormatter dateFromString:Yourstring]; 
```

并将日期转换为字符串 ..

```
NSDateFormatter *dateFormatterNew = [[NSDateFormatter alloc] init];
[dateFormatterNew setDateFormat:@"mm-dd-yyyy hh:mm a"];

NSString *stringForNewDate = [dateFormatterNew stringFromDate:Yourcurrenttime]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:52:29.080

```
NSDate *currentDate = [NSDate date];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"dd-MM-yyyy hh:mm a"]; //You can set different formats for the date
NSLog(@"Current Date %@",[formatter getStringFromDate:currentDate"]);
[formatter release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:49:21.290

`NSDateFormatter`与格式类型一起使用`dd-MM-yyyy hh:mm:ss a`。希望这可以帮助你..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T12:49:49.907

在大多数情况下，您只需要使用`NSDateFormatterStyle`.

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateStyle:NSDateFormatterMediumStyle];
[dateFormatter setTimeStyle:NSDateFormatterShortStyle];
NSLog(@"%@", [dateFormatter stringFromDate:[NSDate date]]);

[dateFormatter release]; 
```

// 输出：2008 年 12 月 2 日下午 3:58

您也可以使用 DateFormatter 从编码中获得输出，如下所示..

```
NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setDateFormat:@"MM-dd-yyy HH:mm:s a"];

NSString *convertedString = [dateFormatter stringFromDate:[NSDate date]];
NSLog(@"Converted String : %@",convertedString); 
```

:)

# vim - 当占位符更改时，Vim 触发更新所有出现的占位符

> ID：12746562
> 
> 赞同：0
> 
> 时间：2012-10-05T12:46:27.367
> 
> 标签：vim

我想在 Vim 中创建一个文档模板。

创建扩展文件后`.bananão`，模板应自行激活并成为当前缓冲区。

该模板将包含如下内容：

* * *

```
Names of attorneys:
- DEFATTORNEY
- BANANATTORNEY

Plaintiff:
- BANANAPLAINTIFF
Defendant:
- BANANADEFENDANT

...

.. moves the court for the entry of an Order directing BANANAPLAINTIFF
   to produce to BANANADEFENDANT ...

... etc. 
```

* * *

我想`vim`观察对这个文档模板进行的更改，并在检测到特定事件时触发操作。

我想监控的变化是：

*   编辑属于集合 COCONUTSET 的任何关键字：{ DEFATTORNEY, BANANATTORNEY, BANANAPLAINTIFF, BANANADEFENDANT }

我想配置的触发复合动作是：

*   在完成编辑 COCONUTSET 中的一个单词的命令后，说 COCONUTWORD，读取第一个代替占位符单词 COCONUTWORD 的单词，并将所有其他出现的占位符单词 COCONUTWORD 替换为刚刚替换它的替换单词。

*   从 COCONUTSET 中删除 COCONUTWORD。

*   如果 COCONUTSET 为空，则停止监视更改。

您会为此推荐哪些功能/方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:56:50.763

用你这个愚蠢的例子，很难判断它的应用有多好，但我已经为我编写了一个插件，它提供了一个`gc`像 built-in 一样工作的命令`c`，并且在离开插入模式后，将本地替换应用于当前的所有其他事件行（如果字符更改很小），或者当整行更改时，缓冲区的其余部分。我计划很快发布这个，但本质上你只需要挂钩`InsertLeave`事件，查看已编辑的内容（注册`".`），然后执行替换。

# javascript - 什么是窗口加载替代方案？

> ID：12746566
> 
> 赞同：3
> 
> 时间：2012-10-05T12:46:35.297
> 
> 标签：javascript, jquery

我有以下情况：我想仅在页面完全加载时**立即****显示**我的图像，因为我想避免在***文档就绪功能***中一张一张地显示图像（它们最初是隐藏的，并且只想在文档**时立即**显示它们已完成加载），所以我正在使用当我使用此功能时，它运行良好并且行为符合预期，但我唯一的问题是 load 功能已**弃用**。 例如，如果我使用下面的代码**而不**使用我可以看到我的图像被一张一张地加载，这不是一个选项（setTimeout 也不是选项）。 我的问题：如何在不使用的情况下实现相同的行为？谢谢！！******`$(window).load(function () {});`

 ****`$(window).load`

`$(window).load`**********

 ******示例代码：

```
$(document).ready(function(){
 //on document ready HIDE my images 
glowHide.hide();

   //on page LOAD show all images AT ONCE (works fine but depreciated) 
   $(window).load(function(){
   glowHide.show();
   });

}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T19:41:19.463

要将`load`事件绑定到窗口，您应该使用[`on`](http://api.jquery.com/on/)jQuery 提供的方法。

> .on() 方法将事件处理程序附加到 jQuery 对象中当前选定的元素集。从 jQuery 1.7 开始，.on() 方法提供了附加事件处理程序所需的所有功能。

```
$(window).on("load", function(){...}) 
```******

# java - 使用java将数据从数据库导入Excel？

> ID：12746572
> 
> 赞同：1
> 
> 时间：2012-10-05T12:46:51.793
> 
> 标签：java, database, excel

使用java将数据从excel导入数据库，我找到“Apache POI”。

但是现在，我想使用 java 将数据从数据库导入到 excel 中。我也可以用这个“阿帕奇 POI”吗？如果没有，我必须做什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T05:09:01.663

**是的，您可以使用 Apache POI**将数据从数据库导入 excel。但最简单的方法是下载为 CSV 文件。不同之处在于 CSV 文件不能格式化单元格，但使用 excel 可以根据需要格式化单元格。EG）像单元格边框、单元格高亮、字体这些只有使用excel下载才能完成。如果您不需要格式化，那么您可以选择最简单的 CSV 下载方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:50:50.983

是的。poi可以写excel文件。

或者您可以从 DB 中读取数据，然后生成一个 CSV 文件（没有 poi）。大多数情况下，MS-Excel 可以打开 CSV 格式。

但是如果你需要你的 Excel 文件有一个性感的外观.. 例如彩色字体，bgcolor。等..尝试poi。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:50:54.213

我不知道您是否可以使用 Apachi POI 将数据从数据库导入到 excel 但您可以将数据库的数据格式化为 csv 文件并将此 csv 导入 excel（excel 可以本地导入）

# sql - 将子字符串插入新列

> ID：12746573
> 
> 赞同：1
> 
> 时间：2012-10-05T12:46:56.390
> 
> 标签：sql, sql-server-2008

我有一个数据库，其中一列包含 2 条数据，例如名字和姓氏。

格式大致`ABC-1D23-4F34`

我想将前 3 个字母 ABC 复制并插入到新列中。让我们称这些列`[full_id]`和`[ref_id]`

从阅读来看，似乎 substring 能够做到这一点，但我在这里做错了。

`INSERT INTO [ref_id]`

`SUBSTRING([full_id], 1, 3)`

`FROM db.Name`

感谢您的帮助。

* * *

编辑：

更新字符串有效。但我发现我的数据存在问题，而且格式不正确。

有没有办法编写一个案例，如果子字符串不是 3 个字母，它会写一个空值？

再次感谢，很抱歉有错误的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:49:25.830

尝试

```
UPDATE Name
SET ref_id = CASE WHEN CHARINDEX('-',full_id) = 4 THEN SUBSTRING(full_id,1,3) ELSE NULL END 
```

这将使用 full_id 列的前 3 个字符为所有行设置 ref_id 列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:49:52.133

如果它是同一个表中的列，则需要切换到更新语句。

```
UPDATE db.Name SET [ref_id] = SUBSTRING([full_id], 1, 3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:51:25.097

也许你想要类似的东西：

```
Update db.Name set ref_id = substring([full_id], 1,3) 
```

# php - 从网站检索特定数据

> ID：12746579
> 
> 赞同：1
> 
> 时间：2012-10-05T12:47:22.103
> 
> 标签：php, html

我目前正在构建一个刮板来从网站上刮取某些信息。

例如，我想从网站上获取餐厅名称、地址、营业时间和电话号码。

通过使用 curl，我设法从网站获取数据：

```
 $url = "http://localhost/test.html";
    $ch = curl_init(); 
    curl_setopt($ch, CURLOPT_URL, $url); 
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
    $data = curl_exec($ch); 
    curl_close($ch); 
```

但是，我需要一些关于如何将我的刮刀精确定位到确切位置以刮除这些信息的想法。

我已经尝试过正则表达式，但无法让它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:48:30.080

**对 php 使用 SimpleHTMLDom 解析器：http:**
[//simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

在这里下载：http:
[//sourceforge.net/projects/simplehtmldom/files/](http://sourceforge.net/projects/simplehtmldom/files/)

此处的文档：http:
[//simplehtmldom.sourceforge.net/manual.htm](http://simplehtmldom.sourceforge.net/manual.htm)

那是因为我有使用 php 解析 HTML 的最佳工具的经验......

如果没有必要，您也不需要使用 curl 来获取内容，对于 simpleHTMLDom 解析器只需使用：

```
$remote_html = file_get_html("http://www.somesite.com/"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:49:22.547

看一下 XPath 查询： [`http://php.net/manual/en/domxpath.query.php`](http://php.net/manual/en/domxpath.query.php)

我在 C# 中使用等效方法进行网站抓取。这里采用相同的标准。最优秀的。

# facebook-graph-api - Facebook Graph API 帖子显示一些消息字符不正确

> ID：12746583
> 
> 赞同：0
> 
> 时间：2012-10-05T12:47:29.487
> 
> 标签：facebook-graph-api, grails, urlencode

我正在尝试使用 facebook graph api 向用户墙发布消息。 [https://graph.facebook.com/me/feed](https://graph.facebook.com/me/feed)

å、ä 或 ö 之类的字符会与 ���... 之类的符号一起显示不正确

我在请求中发送的所有相关参数（消息、名称、描述）周围使用了 apacheCommons StringEscapeUtils.encodeHtml。

```
def params = [
                accessToken: getFacebookAccessToken(),
                message: StringEscapeUtils.escapeHtml(deal.title),
                pictureUrl: imageUrl,
                name: StringEscapeUtils.escapeHtml(deal.title),
                description: StringEscapeUtils.escapeHtml(deal.shortDescription),
                actionLabel: StringEscapeUtils.escapeHtml(actionLabel),
                actionUrl: actionUrl
        ] 
```

```
def graph(path, params, method = GET, contentType = JSON) {
        def http = null

        http = new TrustAllHttpBuilder(ConfigurationHolder.config.facebook.graph.uri)

        http.request( method, contentType) { req ->

            uri.path = path

        req.getParams().setParameter(ClientPNames.COOKIE_POLICY, CookiePolicy.IGNORE_COOKIES );
        req.getParams().setParameter(CoreConnectionPNames.CONNECTION_TIMEOUT, connectionTimeout );
        req.getParams().setParameter(CoreConnectionPNames.SO_TIMEOUT, socketTimeout );

            requestContentType = URLENC

        body = params

            response.success = { resp, obj ->
                return obj

            }
        }
    } 
```

更改后，“名称”和“描述”在 facebook 中正确显示，但“消息”仍然无法正确呈现。

任何想法为什么“消息”没有正确显示？FB的处理方式不同吗？

![在此处输入图像描述](../Images/d700f847a1d2e5d48c7f558db1646c15.png)

谢谢

* * *

## 更新

在发送 JSON 请求的正文之前，我将参数调整为 URLEncoded 为 UTF-8。

```
def params = [
                accessToken: getFacebookAccessToken(),
                message: URLEncoder.encode(deal.title,"UTF-8"),
                pictureUrl: imageUrl,
                name: URLEncoder.encode(deal.title,"UTF-8"),
                description: URLEncoder.encode(deal.shortDescription,"UTF-8"),
                actionLabel: URLEncoder.encode(actionLabel,"UTF-8"), 
                actionUrl: actionUrl
        ] 
```

请求：

```
14:49:13 DEBUG [FacebookService] body: Message: Tommy+%C3%80%C3%84%C4%87%C3%95,Name: Tommy+%C3%80%C3%84%C4%87%C3%95,Description: %C3%80%C3%84%C4%87%C3%95%C3%80%C3%84%C4%87%C3%95,Caption: ,Action Label: TEST,ActionUrl: http://www.mytest.com

14:49:51 DEBUG [FacebookService] Calling facebook graph API https://graph.facebook.com/me/feed
14:49:51 DEBUG [TrustAllHttpBuilder] POST https://graph.facebook.com/me/feed
14:49:52 DEBUG [headers] >> POST /me/feed HTTP/1.1
14:49:52 DEBUG [headers] >> Accept: application/json, application/javascript, text/javascript
14:49:52 DEBUG [headers] >> Content-Length: 475
14:49:52 DEBUG [headers] >> Content-Type: application/x-www-form-urlencoded; charset=windows-1252
14:49:52 DEBUG [headers] >> Host: graph.facebook.com
14:49:52 DEBUG [headers] >> Connection: Keep-Alive
14:49:53 DEBUG [headers] << HTTP/1.1 200 OK
14:49:53 DEBUG [headers] << Access-Control-Allow-Origin: *
14:49:53 DEBUG [headers] << Cache-Control: private, no-cache, no-store, must-revalidate
14:49:53 DEBUG [headers] << Content-Type: application/json
14:49:53 DEBUG [headers] << Expires: Sat, 01 Jan 2000 00:00:00 GMT
14:49:53 DEBUG [headers] << Pragma: no-cache
14:49:53 DEBUG [headers] << X-FB-Rev: 
14:49:53 DEBUG [headers] << X-FB-Debug:
14:49:53 DEBUG [headers] << Date: Fri, 05 Oct 2012 13:49:52 GMT
14:49:53 DEBUG [headers] << Connection: keep-alive
14:49:53 DEBUG [headers] << Content-Length: 40 
```

FB 中的结果（不工作）：

![在此处输入图像描述](../Images/dad113b85530635777593c5e9104a2b5.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T13:30:55.880

`escapeHtml`是错误的方法 - 您会看到您的消息现在如何显示 HTML 实体。您不想发布 HTML 代码，您想发布纯文本。

> å、ä 或 ö 之类的字符会与 ���... 之类的符号一起显示不正确

这很可能是因为您的应用程序使用了错误的字符编码。

确保使用 UTF-8。（或者在*将*参数值传递给 API 之前将它们转换为 UTF-8，如果前者不可能的话。）

编辑：

> 我之前尝试将参数转换为 UTF-8
> 
> 14:49:13 调试 [FacebookService] 正文：消息：Tommy+%C3%80%C3%84%C4%87%C3%95，名称：...</p>

这些是*URL 编码*的 UTF-8 字符。URL 编码在这里适得其反。

> 14:49:52 调试 [标题] >> 内容类型：应用程序/x-www-form-urlencoded；**字符集=windows-1252**

你不应该如此明目张胆地在 API 面前撒谎 :-)

认真地，找出是什么让您的应用程序在请求标头中发送该字符集 - 并查看您如何将其更改为 UTF-8（或完全保留字符集部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:31:51.893

事实证明，EncoderRegistry 类已经有一个用于请求数据的字符集字段。它默认为平台编码。您可以将其设置为 UTF-8，如下所示：

```
def graph(path, params, method = GET, contentType = JSON) {
        def http = null

        http = new TrustAllHttpBuilder(ConfigurationHolder.config.facebook.graph.uri)

        http.encoderRegistry = new EncoderRegistry( charset: 'utf-8' )  

        http.request( method, contentType) { req ->

            uri.path = path

        req.getParams().setParameter(ClientPNames.COOKIE_POLICY, CookiePolicy.IGNORE_COOKIES );
        req.getParams().setParameter(CoreConnectionPNames.CONNECTION_TIMEOUT, connectionTimeout );
        req.getParams().setParameter(CoreConnectionPNames.SO_TIMEOUT, socketTimeout );

            requestContentType = URLENC

        body = params

            response.success = { resp, obj ->
                return obj

            }
        }
    } 
```

[答案参考](http://groovy.329449.n5.nabble.com/How-to-POST-URLENC-UTF-8-form-using-HTTPBuilder-0-5-0-SNAPSHOT-td366508.html)

# javascript - 我对两种不同类型的图像使用相同的 js 文件，分别命名为彩色和类型，但它不适用于我

> ID：12746586
> 
> 赞同：0
> 
> 时间：2012-10-05T12:47:34.133
> 
> 标签：javascript, html

我的问题是我使用不同名称的相同 js 文件。两个文件的功能是一样的。第一个 js 文件正在滑动 5 张图像（黑白），而另一个 js 仅在同一页面的不同链接上滑动两张图像（彩色）。但两者都不能正常工作意味着如果一个用于黑白图像的滑块工作，那么另一个用于彩色图像的滑块不工作。请帮我。

Js在名为coverflow-color.js的脚本文件中被引用

```
var min = 1; //minimum number of image
var max = 3; //maximum number of images
var current = 2; //image number that is at the center of the coverflow
var currPos = 0; //custom attribute that stores current TranslateX position of each image
var newPos = 0; //custom attribute that stores new TranslateX position of each image, i.e after movement
var currAngle = 0; //custom attribute that stores current RotationY angle of each image
var newAngle = 0; //custom attribute that stores new RotationY angle of each image
var gap = 75;
var clickedIndex = 0; //index of the image tapped
var isMouseDown = false; //has the user interacted
var swipeStartX = 0;
var swipeDistanceX = 0;
var diff = 0;
var imageTapStartX = 0;
var imageTapEndX = 0;
var imageTapDistanceX= 0;
var coverFlowContainerElement = null;
var thresholdDistanceSingleSlide = 0; //this measures the distance

window.addEventListener("load",function(){
    /* Hide the browser address bar. This will give a native feel to the app */
    setTimeout(function() { window.scrollTo(0, 1); }, 20);

    /* Get the pointer to the coverflow holder */
    coverFlowContainerElement = document.getElementById("coverflow");
    moveImagesFromRight();  //help comments are there in the function definition
    addEventsToImageHolders(); //help comments are there in the function definition
    addEventToCoverflowHolder(); //help comments are there in the function definition

    thresholdDistanceSingleSlide = parseInt(300 / max);
    disablePageScroll();  //help comments are there in the function definition
},false);

/*
    Give the initial thrust to the slides from the right. I have just given it an effect of the images being
    thrown into the center from the right.
*/
function moveImagesFromRight()
{
    setTimeout(function() {
      document.getElementById("fig1").style.webkitTransform = "translateX(-150px) rotateY(30deg)";
      document.getElementById("fig2").style.webkitTransform = "translateX(0px) rotateY(0deg) translateZ(200px)";
      document.getElementById("fig3").style.webkitTransform = "translateX(150px) rotateY(-30deg)";
    }, 150);
}

/* Register touch event listener to the image holders i.e the <div> holding each images */
function addEventsToImageHolders()
{
    var imageHolders = coverFlowContainerElement.getElementsByTagName("div");
    for(var i=0;i<imageHolders.length;i++)
    {
        //console.log(imageHolders[i]);
        imageHolders[i].addEventListener("touchstart",handleImageTapStart,false);
        imageHolders[i].addEventListener("touchend",handleImageTapEnd,false);
    }
}

/*
    Add touch events to the <div id='coverflow' /> container. So the container registers the finger movements
    and acts accordingly
*/
function addEventToCoverflowHolder()
{
    coverFlowContainerElement.addEventListener("touchstart", handleFingerSwipeStart, false);
    coverFlowContainerElement.addEventListener("touchmove", handleFingerSwipeMove, false);
    coverFlowContainerElement.addEventListener("touchend", handleFingerSwipeEnd, false);
}

/* The default behavior of the browser is to scroll when you swipe. This line is to prevent scrolling */
function disablePageScroll() {
  document.ontouchmove = function(event) {
      event.preventDefault();
  }
}

/* Events for the <div id='coverflow'></div> holder */
function handleFingerSwipeStart(event) {
  isMouseDown = true;
  swipeStartX = event.changedTouches[0].pageX;
  event.preventDefault();
}
function handleFingerSwipeMove(event) {
  if (isMouseDown) {
      swipeDistanceX = parseInt(event.changedTouches[0].pageX - swipeStartX);//

      var netDistance = Math.abs(swipeDistanceX);
      //console.log("Move: " + swipeDistanceX + " Net distance: " + netDistance); //changedTouches[0].
      if (netDistance >= thresholdDistanceSingleSlide) {
          //console.log(thresholdDistanceSingleSlide + " covered");
          if (swipeDistanceX < 0) {
              right();
              swipeStartX = event.changedTouches[0].pageX;
          }
          else {
              left();
              swipeStartX = event.changedTouches[0].pageX;
          }
      }
  }
}
function handleFingerSwipeEnd(event) {
  if (isMouseDown) {
      isMouseDown = false;
      swipeStartX = 0;
  }
}

/*
    Events for the <div id="fig"></div> elements where fig starts from 1 to 7\. The images are
    inside these element
*/
function handleImageTapStart(event) {
    imageTapStartX = event.changedTouches[0].pageX;
}
function handleImageTapEnd(event) {
    imageTapEndX = event.changedTouches[0].pageX;
    imageTapDistanceX = imageTapEndX - imageTapStartX;
    var targetObj = event.currentTarget;
    if (imageTapDistanceX == 0) {
      clickedIndex = parseInt(targetObj.id.slice(3, 4));
      if (clickedIndex > current) {
          //move right to the clicked index
          diff = clickedIndex - current;
          for (var i = 1; i <= diff; i++) {
              right();
          }
      }
      else if (clickedIndex < current) {
          //move left to the clicked index
          diff = (current - clickedIndex);
          for (var i = 1; i <= diff; i++) {
              left();
          }
      }
      else {
          //same element is clicked....do nothing
          //alert(clickedIndex);
          document.getElementById("coverflow").style.display="none";
          document.getElementById("fig"+clickedIndex+"_content").style.display="block";
      }
    }
}

/* Functions - left() & right() for actually moving the images when user interacts*/
/* Move an image from L -> R i.e you are swiping from L->R across the screen */
function left() {
  if (current > min) {
      current--;

      for (var i = 1; i <= max; i++) {
          currPos = document.getElementById("fig" + i).getAttribute("cp");
          currAngle = document.getElementById("fig" + i).getAttribute("a");
          if (currPos == "-150" || currPos == "0") {
              newPos = parseInt(currPos) + (gap * 2) * (1);
              if (currPos == "0") {
                  newAngle = -30;
              }
              else if (currPos = "-150") {
                  newAngle = 0;
              }
              else {
              }
          }
          else {
              newPos = parseInt(currPos) + (gap) * (1);
              newAngle = parseInt(currAngle);
          }
          if (i == current) {
              document.getElementById("fig" + i).style.webkitTransform = "translateX(" + newPos + "px) rotateY(" + newAngle + "deg) translateZ(200px)";
          }
          else {
              document.getElementById("fig" + i).style.webkitTransform = "translateX(" + newPos + "px) rotateY(" + newAngle + "deg)";
          }
          document.getElementById("fig" + i).setAttribute("cp", newPos);
          document.getElementById("fig" + i).setAttribute("a", newAngle);
      }
  }
}
/* Move an image from R -> L i.e you are swiping from R->L across the screen */
function right() {
  if (current < max) {
      current++;

      for (var i = 1; i <= max; i++) {
          currPos = document.getElementById("fig" + i).getAttribute("cp");
          currAngle = document.getElementById("fig" + i).getAttribute("a");
          if (currPos == "150" || currPos == "0") {
              newPos = parseInt(currPos) + (gap * 2) * (-1);
              if (currPos == "0") {
                  newAngle = 30;
              }
              else if (currPos = "150") {
                  newAngle = 0;
              }
              else {
              }
          }
          else {
              newPos = parseInt(currPos) + (gap) * (-1);
              newAngle = parseInt(currAngle);
          }
          if (i == current) {
              document.getElementById("fig" + i).style.webkitTransform = "translateX(" + newPos + "px) rotateY(" + newAngle + "deg) translateZ(200px)";
          }
          else {
              document.getElementById("fig" + i).style.webkitTransform = "translateX(" + newPos + "px) rotateY(" + newAngle + "deg)";
          }
          document.getElementById("fig" + i).setAttribute("cp", newPos);
          document.getElementById("fig" + i).setAttribute("a", newAngle);
      }
  }
} 
```

另一个Js在名为coverflow-type.js的脚本文件中引用

```
var min = 1; //minimum number of image
var max = 5; //maximum number of images
var current = 3; //image number that is at the center of the coverflow
var currPos = 0; //custom attribute that stores current TranslateX position of each image
var newPos = 0; //custom attribute that stores new TranslateX position of each image, i.e after movement
var currAngle = 0; //custom attribute that stores current RotationY angle of each image
var newAngle = 0; //custom attribute that stores new RotationY angle of each image
var gap = 75;
var clickedIndex = 0; //index of the image tapped
var isMouseDown = false; //has the user interacted
var swipeStartX = 0;
var swipeDistanceX = 0;
var diff = 0;
var imageTapStartX = 0;
var imageTapEndX = 0;
var imageTapDistanceX= 0;
var coverFlowContainerElement = null;
var thresholdDistanceSingleSlide = 0; //this measures the distance

window.addEventListener("load",function(){
    /* Hide the browser address bar. This will give a native feel to the app */
    setTimeout(function() { window.scrollTo(0, 1); }, 20);

    /* Get the pointer to the coverflow holder */
    coverFlowContainerElement = document.getElementById("coverflow");
    moveImagesFromRight();  //help comments are there in the function definition
    addEventsToImageHolders(); //help comments are there in the function definition
    addEventToCoverflowHolder(); //help comments are there in the function definition

    thresholdDistanceSingleSlide = parseInt(300 / max);
    disablePageScroll();  //help comments are there in the function definition
},false);

/*
    Give the initial thrust to the slides from the right. I have just given it an effect of the images being
    thrown into the center from the right.
*/
function moveImagesFromRight()
{
    setTimeout(function() {
      document.getElementById("fig1").style.webkitTransform = "translateX(-225px) rotateY(30deg)";
      document.getElementById("fig2").style.webkitTransform = "translateX(-150px) rotateY(30deg)";
      document.getElementById("fig3").style.webkitTransform = "translateX(0px) rotateY(0deg) translateZ(200px)";
      document.getElementById("fig4").style.webkitTransform = "translateX(150px) rotateY(-30deg)";
      document.getElementById("fig5").style.webkitTransform = "translateX(225px) rotateY(-30deg)";
    }, 150);
}

/* Register touch event listener to the image holders i.e the <div> holding each images */
function addEventsToImageHolders()
{
    var imageHolders = coverFlowContainerElement.getElementsByTagName("div");
    for(var i=0;i<imageHolders.length;i++)
    {
        //console.log(imageHolders[i]);
        imageHolders[i].addEventListener("touchstart",handleImageTapStart,false);
        imageHolders[i].addEventListener("touchend",handleImageTapEnd,false);
    }
}

/*
    Add touch events to the <div id='coverflow' /> container. So the container registers the finger movements
    and acts accordingly
*/
function addEventToCoverflowHolder()
{
    coverFlowContainerElement.addEventListener("touchstart", handleFingerSwipeStart, false);
    coverFlowContainerElement.addEventListener("touchmove", handleFingerSwipeMove, false);
    coverFlowContainerElement.addEventListener("touchend", handleFingerSwipeEnd, false);
}

/* The default behavior of the browser is to scroll when you swipe. This line is to prevent scrolling */
function disablePageScroll() {
  document.ontouchmove = function(event) {
      event.preventDefault();
  }
}

/* Events for the <div id='coverflow'></div> holder */
function handleFingerSwipeStart(event) {
  isMouseDown = true;
  swipeStartX = event.changedTouches[0].pageX;
  event.preventDefault();
}
function handleFingerSwipeMove(event) {
  if (isMouseDown) {
      swipeDistanceX = parseInt(event.changedTouches[0].pageX - swipeStartX);//

      var netDistance = Math.abs(swipeDistanceX);
      //console.log("Move: " + swipeDistanceX + " Net distance: " + netDistance); //changedTouches[0].
      if (netDistance >= thresholdDistanceSingleSlide) {
          //console.log(thresholdDistanceSingleSlide + " covered");
          if (swipeDistanceX < 0) {
              right();
              swipeStartX = event.changedTouches[0].pageX;
          }
          else {
              left();
              swipeStartX = event.changedTouches[0].pageX;
          }
      }
  }
}
function handleFingerSwipeEnd(event) {
  if (isMouseDown) {
      isMouseDown = false;
      swipeStartX = 0;
  }
}

/*
    Events for the <div id="fig"></div> elements where fig starts from 1 to 7\. The images are
    inside these element
*/
function handleImageTapStart(event) {
    imageTapStartX = event.changedTouches[0].pageX;
}
function handleImageTapEnd(event) {
    imageTapEndX = event.changedTouches[0].pageX;
    imageTapDistanceX = imageTapEndX - imageTapStartX;
    var targetObj = event.currentTarget;
    if (imageTapDistanceX == 0) {
      clickedIndex = parseInt(targetObj.id.slice(3, 4));
      if (clickedIndex > current) {
          //move right to the clicked index
          diff = clickedIndex - current;
          for (var i = 1; i <= diff; i++) {
              right();
          }
      }
      else if (clickedIndex < current) {
          //move left to the clicked index
          diff = (current - clickedIndex);
          for (var i = 1; i <= diff; i++) {
              left();
          }
      }
      else {
          //same element is clicked....do nothing
         // alert(clickedIndex);
          console.log(targetObj);
          var thumbfile=targetObj.getAttribute("rel");
          document.getElementById("coverflow").style.display="none";
          document.getElementById("content").style.display="block";
            var thumbList=show(thumbfile);
            document.getElementById("Tlist").innerHTML=thumbList;
            window.mySwipe = new Swipe(document.getElementById('slider'),{ 
            callback: function(e, pos) {
            var i = bullets.length;
            while (i--) {
            bullets[i].className = '';
            }
            bullets[pos].className = 'on';
            }
            }),
            bullets = document.getElementById('position').getElementsByTagName('span');
      }
    }
}

/* Functions - left() & right() for actually moving the images when user interacts*/
/* Move an image from L -> R i.e you are swiping from L->R across the screen */
function left() {
  if (current > min) {
      current--;

      for (var i = 1; i <= max; i++) {
          currPos = document.getElementById("fig" + i).getAttribute("cp");
          currAngle = document.getElementById("fig" + i).getAttribute("a");
          if (currPos == "-150" || currPos == "0") {
              newPos = parseInt(currPos) + (gap * 2) * (1);
              if (currPos == "0") {
                  newAngle = -30;
              }
              else if (currPos = "-150") {
                  newAngle = 0;
              }
              else {
              }
          }
          else {
              newPos = parseInt(currPos) + (gap) * (1);
              newAngle = parseInt(currAngle);
          }
          if (i == current) {
              document.getElementById("fig" + i).style.webkitTransform = "translateX(" + newPos + "px) rotateY(" + newAngle + "deg) translateZ(200px)";
          }
          else {
              document.getElementById("fig" + i).style.webkitTransform = "translateX(" + newPos + "px) rotateY(" + newAngle + "deg)";
          }
          document.getElementById("fig" + i).setAttribute("cp", newPos);
          document.getElementById("fig" + i).setAttribute("a", newAngle);
      }
  }
}
/* Move an image from R -> L i.e you are swiping from R->L across the screen */
function right() {
  if (current < max) {
      current++;

      for (var i = 1; i <= max; i++) {
          currPos = document.getElementById("fig" + i).getAttribute("cp");
          currAngle = document.getElementById("fig" + i).getAttribute("a");
          if (currPos == "150" || currPos == "0") {
              newPos = parseInt(currPos) + (gap * 2) * (-1);
              if (currPos == "0") {
                  newAngle = 30;
              }
              else if (currPos = "150") {
                  newAngle = 0;
              }
              else {
              }
          }
          else {
              newPos = parseInt(currPos) + (gap) * (-1);
              newAngle = parseInt(currAngle);
          }
          if (i == current) {
              document.getElementById("fig" + i).style.webkitTransform = "translateX(" + newPos + "px) rotateY(" + newAngle + "deg) translateZ(200px)";
          }
          else {
              document.getElementById("fig" + i).style.webkitTransform = "translateX(" + newPos + "px) rotateY(" + newAngle + "deg)";
          }
          document.getElementById("fig" + i).setAttribute("cp", newPos);
          document.getElementById("fig" + i).setAttribute("a", newAngle);
      }
  }
}

// show thumbnails functions

//function show(dname){ 
//  if(window.XMLHttpRequest){
//      xhttp=new XMLHttpRequest();     
//      }
//      else{
//      xhttp=new ActiveXObject(Microsoft.XMLHTTP);  
//        } 
//     xhttp.open("GET",dname,false);     
//     xhttp.send();       
//     var xmlDoc=xhttp.responseXML;
//     var thumblist=xmlDoc.getElementsByTagName("asset");
//    //str=""; 
//    str="<li>";
//    var image= new Array();    
//    for(i=0, tc=1; i<thumblist.length;i++){
//        var x=thumblist[i].childNodes;
//         for(j=0,index=0; j<x.length;j++){
//             if(x[j].nodeType==1){
//                image[index]=(x[j].firstChild.nodeValue);
//                 index++;
//                 }
//               x[j]=x[j].nextSibling;             
//            }
//            str+='<div><a href="'+image[2]+'"><img src="'+image[0]+'"></a><span>'+image[1]+'</span></div>';
//            // tc<thumblist.length check for the last node                          
//             if(tc%6==0&& tc<thumblist.length){
//                  str+="</li><li>";   
//               } 
//          tc++;                  
//        // str+='<div class="thumbwrapper"><img src="'+image[0]+'">'+image[1]+'</div>'; 
//        //str+='<li><img src="'+image[0]+'"><span>'+image[1]+'</span></li>';                    
//        }
//      str+="</li>";  
//   //alert(str);
//   console.log(str);     
//   return str;       
//  }

  function show(dname){ 
    if(window.XMLHttpRequest){
        xhttp=new XMLHttpRequest();     
        }
      else{
        xhttp=new ActiveXObject(Microsoft.XMLHTTP);  
          } 
       xhttp.open("GET",dname,false);     
       xhttp.send();       
       var xmlDoc=xhttp.responseXML;
       var thumblist=xmlDoc.getElementsByTagName("asset");
      //str=""; 
      str="<li>";
      var image= new Array();    
      for(i=0, tc=1; i<thumblist.length;i++){
          // getting the attribute node of every assets
              var thumb=thumblist[i].attributes;
              str+='<div><a href="'+thumb.getNamedItem("url").nodeValue+'"><img src="'+thumb.getNamedItem("thumbnail").nodeValue+'"></a><span>'+thumb.getNamedItem("title").nodeValue+'</span></div>';
              // (tc<thumblist.length) check for the last node                        
               if(tc%6==0&& tc<thumblist.length){
                    str+="</li><li>";   
                 } 
            tc++;                                     
          }
        str+="</li>";  
     //alert(str);
     console.log(str);     
     return str;       
  } 
```

这是我的 HTML：

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no">
<title>GRAAVAA HTML5</title>

<link href="css/bgLandscape.css" rel="stylesheet" type="text/css">
<link href="css/bgLandscape.css" media="screen and (device-width:768px) and (orientation:landscape) or (-webkit-min-device-pixel-ratio: 2)" rel="stylesheet" type="text/css">

<link rel="stylesheet" type="text/css" href="css/login.css" />

<link href="css/coverflow.css" type="text/css" rel="stylesheet"/>

<script type="text/javascript" src="js/modernizr.custom.86080.js"></script>
<script src="js/jquery-1.8.2.min.js"></script>

</head>

<body>

<div class="bg">
<ul class="cb-slideshow">
            <li><span></span></li>
            <li><span></span></li>
            <li><span></span></li>
            <li><span></span></li>
            <li><span></span></li>
            <li><span></span></li>
            <li><span></span></li>
</ul>

<div id="formContainer" class="formContainer">
            <form id="login" method="post" action="index.html" class="login">
                 <span id="msg" class="error"></span>
<!--                <input type="email" name="email" id="email" value="Email Address" class="stored" required="required" placeholder="admin@mail.com"/>-->
                <input type="email" name="email" id="email" placeholder="Email Address" class="email" style="top:176px;" />
                <input type="text" name="name" id="name"  placeholder="Full Name" class="stored"/>
                <!--<input type="reset" name="reset" value="Skip" />-->
                <input type="button" name="skip" id="skip" value="Skip" class="skip" />
                <input type="submit" name="submit" value="Save" class="submit" />
    </form>

  </div>

<!-- Collection By Type -->

<div id="wrapperType" class="collectionTypeWrapper">
      <div class="container">
        <div id="coverflow">
          <div id="fig1" cp="-225" a="30" rel="xml/granite.xml"><img src="collectionType/granite.jpg" /></div>
          <div id="fig2" cp="-150" a="30" rel="xml/marble.xml"><img src="collectionType/marble.jpg" /></div>
          <div id="fig3" cp="0" a="0" rel="xml/onyx.xml"><img src="collectionType/onyx.jpg" /></div>
          <div id="fig4" cp="150" a="-30" rel="xml/travertine.xml"><img src="collectionType/travertine.jpg" /></div>
          <div id="fig5" cp="225" a="-30" rel="xml/limitededition.xml"><img src="collectionType/limited.jpg" /></div>
        </div>      
      </div>
  </div>

 <!-- Collection By Color -->

<div id="wrapperColor" class="collectionColorWrapper">
      <div class="container">
        <div id="coverflow">        
           <div id="fig1" cp="-150" a="30" rel="xml/natural.xml"><img src="collectionColor/neutral.jpg" /></div>
           <div id="fig2" cp="0" a="0" rel="xml/dark.xml"><img src="collectionColor/dark.jpg" /></div>
           <div id="fig3" cp="150" a="-30" rel="xml/vivid.xml"><img src="collectionColor/vivid.jpg" /></div>
        </div>      
      </div>
  </div>

<div id="popupicon">
<img id="collectionColor" src="images/1.png" style="margin-left:15px" />
<img id="collectionType" src="images/2.png" style="margin:0px 0px 5px 35px" />
</div>

<div id="bottomImgWrapper" class="bottomImgWrapper"></div> 
<div id="bottomImg" class="bottomImg" >
<img src="images/collection.png" class="graavaaImag" id="collection" />
<a href="applications.html"><img src="images/application.png" class="graavaaImag" /></a>
<a href="showrooms.html"><img src="images/showrooms.png"  class="graavaaImag"/></a>
<img src="images/menuLogo.png" class="graavaaIcon" />
</div>    
</div>

<script type="text/javascript">

$("img#collection").click(function(e){
    e.preventDefault(); 
    $("#popupicon").fadeToggle("slow");     
});

$('#skip').click(function(){
    //localStorage.clear();     
    $("#formContainer").css("display","none");
    $("#bottomImgWrapper").css("display","block");
    $("#bottomImg").css("display","block"); 
    // setting the skip flag
    sessionStorage.setItem('flag','true');              
});

$('.login').submit(function() { 
    var email=$(this).children("#email").val();
    var name=$(this).children("#name").val();                       
    var result=validateEmail($(this).children("#email").val());

    if(result==false){
        //$(this).focus();
        $(".error").html('Invalid Email Address');
        $(".email").focus();
        return false;
    }

    if(result==true){
        $(".error").html('');
        localStorage[$("#email").attr('name')] = email;
        localStorage[$("#name").attr('name')] = name;
        alert('Thank You for saving information');
        $("#formContainer").css("display","none");
        $(".bottomImgWrapper").css("display","block");
        $(".bottomImg").css("display","block"); 
        // Dont submit the form in any condition : as it refresh the page  
        return false;
        //return true;  
    }                   

    return false;       
});

$('#collectionType').click(function(){      
        $(".collectionTypeWrapper").css("display","block");
        $(".collectionColorWrapper").css("display","none");
        $("#collectionColor").hide(".collectionTypeWrapper");
        $("#collectionColor").show(".collectionTypeWrapper");

    //$(".collectionTypeWrapper").fadeIn("slow");
    //$(".collectionColorWrapper").fadeOut("slow");
    $("#popupicon").fadeToggle("slow");             
});

$('#collectionColor').click(function(){     
    $(".collectionColorWrapper").css("display","block");
    $(".collectionTypeWrapper").css("display","none");
        //$(".collectionTypeWrapper").fadeOut("slow");
    //$(".collectionColorWrapper").fadeIn("slow");
    $("#popupicon").fadeToggle("slow");             
});

function validateEmail(txtEmail){
   var filter = /^((\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*?)\s*;?\s*)+/;
    if(filter.test(txtEmail)){
        return true;
    }
    else{
        return false;
    }
}

$(document).ready(function(e) {

    function init() {
        //localStorage.clear(); 
        // show the login form if localstorage not persent              

        if(!localStorage["email"]){
            $("#formContainer").css({"display":"block"});
            // hide the bottom images initially
            $("#bottomImgWrapper").css("display","none");
            $("#bottomImg").css("display","none");
        }

        // storing the value into application session
        if(sessionStorage.flag=="true"){
            $("#formContainer").css({"display":"none"});
            $("#bottomImgWrapper").css("display","block");
            $("#bottomImg").css("display","block");
        }

        if(localStorage["email"]){
            $("#formContainer").css("display","none");
            alert('You are already saved as : '+ localStorage["email"]);        
        }
    }

    init();
});

</script>

<script type="text/javascript" src="js/coverflow-color.js"></script>
<script type="text/javascript" src="js/coverflow-type.js"></script>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:50:34.347

由于全局变量，它不会起作用。第二个覆盖第一个。您还可以创建具有相同 ID 的多个元素。id 是单数的，你不能有多个具有相同 id 的元素。

# android - Android 中的报表查看器

> ID：12746588
> 
> 赞同：-1
> 
> 时间：2012-10-05T12:47:39.753
> 
> 标签：android

android中是否有任何报告查看器工具或api用于生成任何形式的报告。我想在我的 android 手机中创建销售报告、购买报告。所以我正在寻找一个 api 或框架，它可以让我的工作变得轻松。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:50:05.353

我使用 Excel 来创建销售和采购等报告。

请查看[此处](https://stackoverflow.com/a/11200875/1405983)和[此处](https://stackoverflow.com/questions/5919531/how-to-open-excel-sheet-in-android/11190527#11190527)以在 android 中创建 excelsheet 报告。

另请参阅[示例](http://www.vogella.com/articles/JavaExcel/article.html)。

# ruby-on-rails-3 - ruby on rails password_confirmation 验证

> ID：12746589
> 
> 赞同：0
> 
> 时间：2012-10-05T12:47:44.947
> 
> 标签：ruby-on-rails-3, validation, password-confirmation

我的密码确认验证有问题

在用户模型中：

```
 validates :password, :confirmation => true 
```

在视图 new.html.erb 中：

```
 <%= form_for(@user) do |f| %>
   <div class="field">
     <%= f.label :password %><br />
     <%= f.password_field :password %><br />
     <%= f.label :password_confirmation %><br />
     <%= f.password_field :password_confirmation %><br />
   </div>
   <div class="actions">
     <%= f.submit %>
   </div>
 <% end %> 
```

所以对于任何插入的数据，验证都会抛出错误。我认为 :password_confirmation 有问题，并且 RoR 收到它的值为 nil 是否可能？我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:53:14.383

尝试这个

```
class User < ActiveRecord::Base
  validates :password, :presence =>true, :confirmation =>true
  validates_confirmation_of :password
end 
```

控制器旨在从视图中获取数据并尝试执行保存，这是视图的代码：

```
<%= form_for(@user) do |f|%>
  <% if @user.errors.any? %>
    ....
    ....
  <% end %>
  <%= f.label :email %><br />
  <%= f.text_field :email %><br />
  <%= f.label :password %><br />
  <%= f.password_field :password %><br />
  <%= f.label :password_confirmation %><br />
  <%= f.password_field :password_confirmation %>
  <%= f.submit %>
<% end %>

NOTE: This check is performed only if password_confirmation is not nil, and by default    only on save. 
To require confirmation, make sure to add a presence check for the confirmation attribute: 
```

[http://ar.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html](http://ar.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html)

# linq - Linq to Entities 如何在一个数据库访问中更新记录

> ID：12746594
> 
> 赞同：3
> 
> 时间：2012-10-05T12:48:03.533
> 
> 标签：linq, entity

我想更新 1000 万条记录数据库中的许多记录。此处的示例表明可以像这样进行更新：

```
Customer c = (from x in dataBase.Customers
             where x.Name == "Test"
             selext x).First();
c.Name = "New Name";
dataBase.SaveChanges(); 
```

但这看起来像是两次访问数据库。一个获取记录，另一个保存记录。如果我在一次调用中更新了 1000 条记录，我认为这将不得不将 1000 条记录从数据库中提取到我的 WCF 服务器，进行更改，然后通过 LAN 将 1000 条记录推回数据库服务器。

在过去，“Update Customers set Name = 'Test' where Year < 1960”将是 LAN 上的一条指令，工作在数据库服务器上完成。

Linq to Entity中是否有类似的东西？

*顺便说一句：这是我想要实现的一个简单示例，我实际上有数百个命令要发出，我不希望 2*数百次访问数据库，我也不认为需要将所有从数据库到 WCF 的数据只是为了更改它并将其发送回来！*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:09:57.027

正如你所怀疑的那样。如果您有 1000 条记录，您确实会看到针对此操作的 1001 个数据库请求。ORM 非常适合将对象推入内存、使用它们然后更新它们。它们不适合批量操作。在这种情况下，您最好的选择是使用 ADO.Net 并通过代码传递更新语句，或者将批量更新命令放入存储的过程中并将该过程映射到 EF 中的函数。

# haskell - 当这个多态值用作多个类型的值时如何处理？

> ID：12746595
> 
> 赞同：3
> 
> 时间：2012-10-05T12:48:04.770
> 
> 标签：haskell, polymorphism

鉴于这行代码（我第一次在[这个答案](https://stackoverflow.com/a/12738163/894284)中看到）：

```
pVal :: Num a => a
pVal = sum . map fromIntegral $ ([1..10000000] :: [Int]) 
```

如果它被用作多种类型，是否为每种类型完全重新评估表达式？是否保留了每种类型的一个结果？

例如：

```
pInt :: Int
pInt = pVal

pDub :: Double
pDub = pVal 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T12:56:24.083

从技术上讲，Haskell 标准没有具体说明。在实践中，它每次都会重新评估。您可以使用以下方法自行验证`Debug.Trace`：

```
import Debug.Trace (trace)

pVal :: Num a => a
pVal = trace "evaluating..." $ sum . map fromIntegral $ ([1..10000] :: [Int]) 
```

在 GHCi 中尝试：

```
> pVal :: Int
evaluating...
50005000
> pVal :: Int
evaluating...
50005000 
```

但是，将此值绑定到具体类型将允许它被重用。

```
pInt :: Int
pInt = pVal 
```

请注意，第二次没有“评估...”：

```
> pInt
evaluating...
50005000
> pInt
50005000 
```

# c++ - boost Spirit 可以扫描语法树并产生结果吗？

> ID：12746596
> 
> 赞同：2
> 
> 时间：2012-10-05T12:48:07.877
> 
> 标签：c++, parsing, boost, code-generation, boost-spirit

我想写一种小语言，我决定使用[Boost Spirit](http://boost-spirit.com/home/)。对我来说看起来不错。我知道我可以使用 Spirit 来编写词法分析器，并使用解析器来创建语法树。是否可以在 Spirit 中扫描语法树并产生结果。（或者只是为了解析？）是否有可用的函数来生成结果或者我必须使用不同的工具？很抱歉这个简单的问题，但我在简要查看 Spirit 文档时确实找不到信息。

除此之外，我可以使用我自己的词法分析器和使用 Spirit 编写的解析器吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T14:26:03.943

事实上，这确实是“不是一个真正的问题”的候选者。如果您没有链接到文档页面，我会通过该链接将其关闭。

碰巧的是，您可能错过了示例：

*   [http://www.boost.org/doc/libs/1_51_0/libs/spirit/example/qi/compiler_tutorial/](http://www.boost.org/doc/libs/1_51_0/libs/spirit/example/qi/compiler_tutorial/)

*   许多版本的简单表达式计算器（可能按顺序查看）

*   conjure compiler 这个编译器能够编译和运行一种简单的语言。样品[在这里](http://www.boost.org/doc/libs/1_51_0/libs/spirit/example/qi/compiler_tutorial/conjure_samples)：

    ```
    /* The factorial (in conjure) */

    int factorial(n)
    {
        if (n <= 0)
            return 1;
        else
            return n * factorial(n-1);
    }

    int main(n)
    {
        return factorial(n);
    } 
    ```

*   还有一个[`mini C`编译器示例](http://www.boost.org/doc/libs/1_51_0/libs/spirit/example/qi/compiler_tutorial/mini_c/)

* * *

**问**：除此之外，我可以将我自己的词法分析器与使用 Spirit 编写的解析器一起使用吗？

**答：**是的。只需公开一个令牌迭代器接口，并将其用作解析 API 的输入迭代器。有关更多信息，请参阅 Spirit Lex 的示例。

# c# - 我可以持有相同后代的对象类型的 List<> 吗？

> ID：12746603
> 
> 赞同：6
> 
> 时间：2012-10-05T12:48:34.727
> 
> 标签：c#, oop, list, inheritance

我需要保存一个允许执行某些操作的**对象类型列表。**

示例`Animal`有 3 个后代`Tiger`, `Human`,`Hippo`

我只想让`Tiger`s 和`Hippo`s 被关在动物园的笼子里？我需要一份动物类型的清单。

我会喜欢比`List<Type>`

*这只是一个简化的例子。我不喜欢笼子里的动物。。*

**编辑**

因为不清楚。我想在列表中保存对象类型而不是实际对象。

例子：

```
List<Type> types = new List<Type>();
types.Add(typeof(Hippo));
types.Add(typeof(Tiger)); 
```

这有程序员可以做的限制，`types.Add(typeof(Human))`这是我不想反对的。

**编辑2**

只是为了澄清我的问题。我希望能够动态地`Register`允许类型，而不是`if`像下面的一些答案那样有 consequent 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T13:09:49.007

方法1 - 通过接口：

```
public interface ICageable
{ }

public abstract class Animal
{}

public class Hippo : Animal, ICageable
{}

public class Human : Animal, ICageable
{}

public IEnumerable<Type> GetCageableAnimals()
{
    return  GetAssemblyTypes(assembly:typeof(Animal).Assembly)
        .Where(type=>IsDerivedFrom(type, typeof(Animal)))
        .Where(type=>ImplementsInterface(type,typeof(ICageable)));
} 
```

方法 2 - 通过属性：

```
public class InCageAttribute : Attribute
{ }

public abstract class Animal
{}

[InCage]
public class Hippo : Animal
{}

public class Human : Animal
{}

public IEnumerable<Type> GetCageableAnimals()
{
    return  GetAssemblyTypes(assembly:typeof(Animal).Assembly)
        .Where(type=>IsDerivedFrom(type, typeof(Animal)))
        .Where(type=>MarkedByAttribute(type,typeof(InCageAttribute)));
} 
```

**更新**

**重要的**

这两种方法都只提供运行时检查。有编译检查实现会更好，但不知道如何实现。

**UPDATE2**
对于动态注册：

```
public class CageRegistry
{
    private List<Type> _allowedTypes = new List<Type>();
    public IEnumerable<Type> AllowedTypes{get{return _allowedTypes;}}

    public bool TryAdd(Type type)
    {
        if(ImplementsInterface(type, typeof(ICageable)))// for approach with attributes code is pretty similar
        {
            _allowedTypes.Add(type);
            return true;
        }
        return false;
    }
} 
```

**PS2**
很抱歉没有实现诸如`MarkedByAttribute`,`IsDerivedFrom`和`ImplementsInterface`- 我只是在当前机器上还没有 Visual Studio 并且不记得确切的 api 之类的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T12:54:59.750

**如果您想要仅包含某些类型的列表：**

泛型中没有任何东西可以支持您的要求，因此只需创建一个自定义类型，允许您存储`Type`类型并在运行时使用代码来防止无效条目：

```
public class CagedTypes 
{
    private readonly List<Type> _types;

    public void Add(Type t)
    {
        if (t == typeof(Hippo) || t == typeof(Tiger))
            _types.Add(t);
    }
} 
```

虽然我不明白你为什么需要这个。

**如果您想要仅包含某些类型的列表，则可以选择：**

执行与上面相同的操作，但包括下面的界面并将添加检查更改为：

```
public void Add(Type t)
{
    if (t.GetInterfaces().Contains(typeof(ICanBeHeldInZooCage)))
        _types.Add(t);
} 
```

`GetAttributes`您也可以使用属性，因为您可以使用该方法查询任何属性的类型。

**如果您希望仅在列表中包含某些实例：**

创建标记界面：

```
public interface ICanBeHeldInZooCage 
```

那`Tiger`并`Hippo`实施（不必做任何事情），那么你可以拥有：

```
var cagedAnimals = new List<ICanBeHeldInZooCage>(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T12:58:43.457

一个接口怎么样？

```
public interface ICageable {}

public abstract class Animal {}

public class Hippo : Animal, ICageable {}

public class Tiger : Animal, ICageable {}

public class Human : Animal, ICageable {}

public class Ape : Animal {}

....
List<ICageable> ZooAnimals = new List<ICageable>{hippo, tiger, human}; 
```

（从人猿星球的角度写作）

如果您需要列表中的类型本身，那么类型是该类型的实例`Type`，因此无论您创建什么，它都将是类型的集合。你可以封装是这样的：

```
public class CageableTypesCollection : 
{
    private List<Type> _cageableTypes;

    public CageableTypesCollection()
    {
       _cageableTypes = new List<Type>();
    }

    public RegisterType(Type t)
    {
       if (!typeof(ICageable).IsAssignableFrom(t))
          throw new ArgumentException("wrong type of type");
       _cageableTypes.Add(t);
    }

    public UnregisterType(Type t)
    {
       ....
    }

    .....

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T13:01:27.390

我会使用一个接口来确定动物是否是 ZooAnimal

```
 public class Animal
  {
    public string Name;
  }
  public class Tiger : Animal, IZooAnimal
  {

  }
  public class Human : Animal
  {

  }
  public interface IZooAnimal
  {
    //Some zoo animal properties
  } 
```

然后检查动物是否是 Zoo Animal`if (a is IZooAnimal)`下面是你可以使用的 zoo 类。

```
 public class Zoo
  {
    public List<IZooAnimal> AnimalsInZoo = new List<IZooAnimal>();
    public void AddAnimal(IZooAnimal a)
    {
      AnimalsInZoo.Add(a);
    }
  } 
```

编辑：

好的，现在使用类型来执行此操作并将类型限制为 a`ZooAnimal`我已经创建了一个通用 zoo 类，`T`其中 T 是 ZooAnimal - 在我们的示例中，您可以拥有 ZooAnimals 列表或老虎列表。

```
 public class Zoo<T> where T : IZooAnimal
  {
    public List<Type> AnimalTypes = new List<Type>();
    public void AddType(Type a)
    {
      if (typeof(T) == a)
        AnimalTypes.Add(a);
    }
  } 
```

这会将`type`Tiger 添加到`AnimalsInZoo`. 希望这对你有用。

```
 Zoo<IZooAnimal> cage = new Zoo<IZooAnimal>();
  cage.AddType(typeof(Tiger));
  cage.AddType(typeof(Human)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T12:56:56.373

人是*动物*，老虎是*动物园里应该有的动物*。因此，在您的情况下，我将为`Tiger`and再创建一个基类`Hippo`。

```
public class AnimalInZoo : Animal {}
public class Tiger : AnimalInZoo {}
public class Hippo : AnimalInZoo {}
public class Human : Animal {} 
```

您可以创建辅助函数`AddInZoo(AnimalInZoo obj)`来添加`List<Type> m_Zoo`：

```
void AddInZoo(AnimalInZoo obj)
{
    m_Zoo.Add(obj.GetType());
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T13:09:20.447

另一种选择：

```
public abstract class Animal
{
    public abstract bool IsCagable { get; }
} 
```

并让嵌套类实现它们的行为。

`Zoo`稍后，在本主题的答案中主要出现的某种类，在方法 Add 中必须进行检查：

```
public sealed class ZooList : List<Animal> // I believe you need Animal, not Type
{
    // ... some implementations ...

    public override sealed void Add(Animal animal)
    {
        if (!animal.IsCagable)
            // Prevent from adding.
    }
} 
```

# vb.net - 如何使用表格在每页末尾打印分页总计

> ID：12746609
> 
> 赞同：0
> 
> 时间：2012-10-05T12:48:44.290
> 
> 标签：vb.net, reporting-services, report, reporting, rdlc

我正在尝试制作一份报告，其中包含每行的一些价格，我想在每一页的底部打印价格的总和 - 这些价格打印在页面上。至少在我的情况下，我认为在每一页中打印总计并不明智。

例子：

第一页

```
Name            | Price1 | Price2 | Price3 | Price4   -table header

Record 1        |   10   |   15   |   15   |   20

Record 2        |   15   |   15   |   15   |   15

Total 2 records |   25   |   30   |   30   |   35     -table footer for page 1 
```

* * *

第二页

```
Name             | Price1 | Price2 | Price3 | Price4  -starting 2\. page, table header

Record 3         |   20   |   30   |   30   |   30

Total 1 records  |   20   |   30   |   30   |   30    -end of the table

Grand T. (3 rec) |   45   |   60   |   60   |   65    -end of the table 
```

我在第一页放了 2 条记录，在第二页放了 1 条记录，这只是为了展示我想要的。我尽力让它看起来清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:03:25.213

我可以看到两种可能的方法。

由于您说每页有可预测的行数（假设为便于构建示例，有 25 行），您可以执行以下操作：

在您的查询中，为每一行分配一个连续的序列号。你可以这样做：

```
WITH Cte
AS (
    SELECT Name,
           Price1,
           Price2,
           Price3,
           Price4,
           RecordNumber = Row_Number() OVER (ORDER BY [whatever])
    FROM   [tables]
)
SELECT    Name,
          Price1,
          [etc]
          RowGroup = Floor((RecordNumber * 1.0) / 25 )
FROM      Cte
ORDER BY  RecordNumber 
```

然后，在您的报告中，按 分组`RowGroup`，并对您的行进行小计。

如果您在报表中有其他更高级别的分组，您可能必须在每个更高级别的组之后开始一个新页面，因为否则它将导致页面小计的位置失效。

（您也可以使用 SSRS 中的 RowNumber() 函数来执行此操作，而无需修改基础查询，但是关于何时可以使用哪些函数有很多规则，我不知道是否允许这样做。 )

我能想到的另一个选项更复杂，涉及使用报告代码部分和设置一些模块级函数。如果您认为这是您需要看到的，请告诉我。

# c# - 以纯 asp.net 读取并返回文件内容？

> ID：12746610
> 
> 赞同：0
> 
> 时间：2012-10-05T12:48:47.333
> 
> 标签：c#, asp.net

我想创建一个简单的服务，以便其他应用程序可以轮询 url，例如

```
http://IP/serverstatus.aspx 
```

并在一行中获取状态，没有“html”。但是我如何输出它，我目前正在读取文件的 c# 代码中的一个文件，并且它的内容将被输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:54:24.883

*   设置内容类型
*   清除响应（我认为这是可选的）
*   写入响应
*   确保您的 ASPX 文件为空

像这样：

```
protected void Page_Load(object sender, EventArgs e)
{
    Response.ContentType = "text/plain";
    Response.Clear();
    Response.WriteFile(Server.MapPath("yourfile.txt"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:53:46.840

尝试：

```
Response.Write("hello world");
Response.End(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:50:51.013

将响应标头设置为纯文本

# jsf-2 - 无法从 JSF 2.1 应用程序中的 PhaseListener 引用 ViewScoped Managed bean

> ID：12746615
> 
> 赞同：2
> 
> 时间：2012-10-05T12:49:11.873
> 
> 标签：jsf-2, managed-bean, phaselistener

我已经尝试了几十个谷歌搜索中的每一个解决方案：getRequestMap、ElResolver、evaluateExpressionGet 等等。没有，绝对没有，工作。我`null`每次都得到。以下是相关代码：

```
 @ManagedBean(name="readerBean")
    @ViewScoped
    public class ReaderBean implements Serializable {... 
```

在 PhaseListener 中：

```
 public void beforePhase(PhaseEvent event) {

    if (event.getPhaseId() == PhaseId.RESTORE_VIEW) {

            ReaderBean r = null; //The Managed Bean
            try {
                FacesContext fctx = FacesContext.getCurrentInstance();
                r=(ReaderBean) fctx.getExternalContext().getRequestMap().get("readerBean");
                r=(ReaderBean) fctx.getELContext().getELResolver().getValue(fctx.getELContext(), null, "readerBean");
                r=(ReaderBean) fctx.getApplication().getExpressionFactory().createValueExpression(fctx.getELContext(), "#{readerBean}", ReaderBean.class).getValue(fctx.getELContext());
                r=(ReaderBean) fctx.getApplication().evaluateExpressionGet(fctx, "#{readerBean}", ReaderBean.class); 
```

什么都没用！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:06:37.123

至于请求映射方法，它失败了，因为视图范围的 bean 没有存储在请求范围中。相反，它存储在视图范围内。至于其他方法，它们失败了，因为视图范围的 bean 存储在视图中，因此只有*在*视图恢复后才可用。但是，您试图在视图恢复之前获取它。这是一个鸡蛋问题。

你需要修改你的方法。也许 bean 需要是一个请求范围的？也许逻辑需要在不同的阶段执行？也许逻辑需要在 bean 本身中执行？等等。

由于问题中未提及您认为这是正确解决方案的具体功能要求，因此我无法为您指明正确的方向。

# xml - XSLT 1.0 中的数字舍入和精度问题

> ID：12746624
> 
> 赞同：12
> 
> 时间：2012-10-05T12:49:40.937
> 
> 标签：xml, xslt

我在使用 xsl 时出现不一致，

这是xml，

```
<Rate>
    <TotalRate>506.41</TotalRate>
    <TotalTax>17</TotalTax>
    <Currency>INR</Currency>
</Rate> 
```

和 xsl，

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="/">
        <TotalAmount>
            <xsl:value-of select="Rate/TotalRate + Rate/TotalTax"/>
        </TotalAmount>
    </xsl:template>
</xsl:stylesheet> 
```

输出是，

```
<TotalAmount xmlns:fo="http://www.w3.org/1999/XSL/Format">523.4100000000001</TotalAmount> 
```

但预期的 o/p 是，

```
<TotalAmount xmlns:fo="http://www.w3.org/1999/XSL/Format">523.41</TotalAmount> 
```

为什么 o/p 是 523.4100000000001？我怎样才能在不四舍五入的情况下得到 523.41？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-05T12:59:04.433

**在 XSLT 1.0 中，数字是使用*double*类型**实现的，并且与任何二进制浮点类型一样，存在精度损失。

**在 XSLT 2.0/XPath 2.0 中可以使用`xs:decimal`类型来工作而不会损失精度**。

* * *

**一、XSLT 1.0 解决方案**：

使用[**`format-number()`**](http://www.w3.org/TR/1999/REC-xslt-19991116#function-format-number)功能：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:template match="/*">
        <TotalAmount>
      <xsl:value-of select="format-number(TotalRate + TotalTax, '0.##')"/>      
        </TotalAmount>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Rate>
    <TotalRate>506.41</TotalRate>
    <TotalTax>17</TotalTax>
    <Currency>INR</Currency>
</Rate> 
```

**产生了想要的正确结果：**

```
<TotalAmount>523.41</TotalAmount> 
```

**这也是一个示例，表明所需的精度可能不是静态已知的，并且可以作为外部/全局参数传递给转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:param name="pPrec" select="2"/>
    <xsl:param name="pPrec2" select="13"/>

    <xsl:variable name="vPict" select="'##################'"/>

    <xsl:template match="/*">
        <TotalAmount>
      <xsl:value-of select=
      "format-number(TotalRate + TotalTax,
                     concat('0.', substring($vPict,1,$pPrec))
                     )"/>
        </TotalAmount>
        <TotalAmount>
      <xsl:value-of select=
      "format-number(TotalRate + TotalTax,
                     concat('0.', substring($vPict,1,$pPrec2))
                     )"/>
        </TotalAmount>
    </xsl:template>
</xsl:stylesheet> 
```

**当对提供的 XML 文档应用此转换时，会产生两个结果——精度为 2 和精度为 13**：

```
<TotalAmount>523.41</TotalAmount>
<TotalAmount>523.4100000000001</TotalAmount> 
```

* * *

**二、XSLT 2.0 解决方案使用`xs:decimal`：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="xs">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
        <TotalAmount>
      <xsl:value-of select="xs:decimal(TotalRate) + xs:decimal(TotalTax)"/>
        </TotalAmount>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，会产生所需的正确结果**：

```
<TotalAmount>523.41</TotalAmount> 
```

# c# - System.Web.Caching.Cache 在模型中引发空异常

> ID：12746626
> 
> 赞同：4
> 
> 时间：2012-10-05T12:49:46.927
> 
> 标签：c#, asp.net-mvc-3, caching, data-caching

也许这个问题应该很容易，但事实并非如此。我已经阅读[了在 ASP.NET 中使用 System.Web.Caching.Cache 类的问题](https://stackoverflow.com/questions/531014/problem-using-the-system-web-caching-cache-class-in-asp-net)。

我有一个单例类：

```
private System.Web.Caching.Cache _cache;
private static CacheModel _instance = null;

private CacheModel() {
   _cache = new Cache();
}

public static CacheModel Instance {
         get {
            return _instance ?? new CacheModel();
         }
      }

public void SetCache(string key, object value){
   _cache.Insert(key, value);
} 
```

如果在我的代码中的其他任何地方，我调用以下命令：

```
CacheModel aCache = CacheModel.Instance;
aCache.SetCache("mykey", new string[2]{"Val1", "Val2"});  //this line throws null exception 
```

为什么第二行会抛出空引用异常？

也许我在代码的某个地方犯了一些错误？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T12:57:43.113

您不应该使用该`Cache`类型[来初始化您自己的实例](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.cache.aspx)：

> 此 API 支持 .NET Framework 基础结构，不打算直接从您的代码中使用。

如果不直接研究*为什么*会出现空引用异常，而且我之前也遇到过这个问题，这[与 Web 应用程序的基础设施和生命周期有关](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)：

> 每个应用程序域创建一个此类的实例，只要应用程序域保持活动状态，它就保持有效。有关此类实例的信息可通过 HttpContext 对象的 Cache 属性或 Page 对象的 Cache 属性获得。

最重要的是，不要`System.Web.Caching.Cache`以这种方式直接使用该类型 - 要么访问现有的缓存实例，要么使用像[Enterprise Library 的 Caching Application Block](http://msdn.microsoft.com/en-us/library/ff649551.aspx)这样的替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-22T00:53:35.590

正如格兰特在上面提到的，**System.web.caching.cache**存储 ASP.NET 内部数据（如已在 App_start 中构建的包）。

请改用**System.Runtime.Caching**。 [这是 MSDN 上的演练](https://msdn.microsoft.com/en-us/library/ff477235.aspx)

这是一个片段：`

```
using System.Runtime.Caching;

...

ObjectCache cache = MemoryCache.Default;
var test = "hello world";
cache["greeting"] = test;
var greeting = (string)cache["greeting"]; 
```

`

在 ASP.NET 4 中，缓存是通过使用 ObjectCache 类实现的。 [在 MSDN 上阅读更多内容](https://msdn.microsoft.com/en-us/library/system.runtime.caching.objectcache.aspx)

# delphi - Indy 的 SMTP 身份验证方法会导致电子邮件进入 hotmail 中的垃圾箱吗？

> ID：12746627
> 
> 赞同：2
> 
> 时间：2012-10-05T12:49:47.983
> 
> 标签：delphi, email, indy10

我的公司有一个用 Delphi 编写的发送电子邮件的业务应用程序，它是在 Delphi 7 上编写的，但今年早些时候我们迁移到了 Delphi 2010，因为我们不得不从 Indy 9 迁移到 Indy 10。

在端口之前，我们使用此代码在 SMTP 服务器上进行身份验证：

```
 ...
 IdSMTP1.AuthenticationType := atLogin;
 IdSMTP1.Username := pUser;
 IdSMTP1.Password := pPassword;
 ... 
```

港口后我们改为

```
 ...
 IdSMTP1.AuthType := satDefault;
 IdSMTP1.Username := pUser;
 IdSMTP1.Password := pPassword;
 ... 
```

更改之前hotmail将收到的电子邮件放入收件箱，但现在将它们放入垃圾箱。SMTP 身份验证方法中的这种更改是否会导致此问题？

SMTP 服务器来自我的公司（例如：smtp.mycompany.com）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:00:27.390

代码更改不是 Hotmail 决定贵公司邮件的原因。

在幕后，有一个复杂的信誉系统来评估所有从源头接收的电子邮件。我找不到 Hotmail 链接，但这篇 Exchange 文章提到了一些类似的细节，

[http://technet.microsoft.com/en-us/library/bb124512.aspx](http://technet.microsoft.com/en-us/library/bb124512.aspx)

据我猜测，贵公司的邮件服务器已被用于一些“邪恶”的事情，例如发送垃圾邮件或其他任何事情。Hotmail 系统检测到这一点（或通过第三方信誉网关），因此它将所有后续邮件标记为垃圾邮件。

对您而言，在信誉系统重新评估邮件服务器之前，无法更改它。

# javascript - 连接具有不同编码的javascript文件

> ID：12746629
> 
> 赞同：0
> 
> 时间：2012-10-05T12:49:50.703
> 
> 标签：javascript, encoding, utf-8, ascii, concatenation

是否有关于如何处理多种编码的通用/最佳实践方法？由于我网站上的 js 代码对于每个页面都大致相同，因此将所有内容放入一个文件中是有意义的，但是我遇到了很多奇怪的问题，因为有些文件是 UTF-8、一些 ASCII、一些有 CLRF 和一些射频结尾。

**编辑** 到目前为止，我使用过 cat，但据我所知，cat 将原始编码保留在适当的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:56:05.900

您绝对应该针对所有文件进行统一编码；如果 UTF-8 文件在其中，那么 UTF-8 就是要走的路。ASCII 在这里不是问题（ASCII 是 UTF-8 的子集，因此您可以毫无问题地连接 UTF-8 和 ASCII 文件），但其他编码（latin-1 等）是。您肯定希望避免在单个文件中混合编码。

您还应该规范您的行尾（所有 CRLF 或所有 LF，但不能同时使用两者；当然不是在单个文件中 - 这很难看）。在 Unix 系统上，LF 是标准，所以这可能是您应该使用的。

`cat`根本不关心编码，它只是将文件粘贴在一起，所以如果你连接具有不同编码/行结尾的文件，它*会*搞砸。

# java - Java将值插入MySQL并从MySQL返回值

> ID：12746650
> 
> 赞同：0
> 
> 时间：2012-10-05T12:50:55.947
> 
> 标签：java, mysql

我正在创建一个员工登录验证类，我可以在其中将他们的信息插入 mysql 数据库，然后进行验证，我试图只选择行的密码。这是我的代码：

```
 import java.sql.*;
        import java.sql.PreparedStatement;
        import java.sql.Connection;

    public class Employee 
    {

    private PreparedStatement statement;
    private Connection con;
    private String pass;
    public Employee()
    {   

    }
    public Employee(String firstName, String lastName, String userID, String userPassword, String role )
    {
        try
        {
            Class.forName("com.mysql.jdbc.Driver");
            con = DriverManager.getConnection("jdbc:mysql://localhost:3306/test","root","");
            statement = con.prepareStatement("Insert into employee(firstName, lastName, userID, " +
                    "password, role)values(?, ?, ?, ?, ?)");    

            statement.setString(1, firstName);
            statement.setString(2, lastName);
            statement.setString(3, userID);
            statement.setString(4, userPassword);
            statement.setString(5, role);
            statement.executeUpdate();
            con.close(); 
        }
        catch(Exception e)
        {

        }
    }
    public void setPassword(String userID)
    {
        try
        {
            statement = con.prepareStatement("SELECT * from employee WHERE userID = ?");
            statement.setString(1, userID);
            ResultSet rs = statement.executeQuery();
            while(rs.next()){
                pass = rs.getString(4);
            }
        }
        catch(Exception e)
        {
            System.out.print(e);
        }
    }
    public String getPassword()
    {
        return pass;
    }

    }
and here is my main

        public class TestMain 
        {
        public static void main(String argsp[])
    {
        Employee emp = new Employee();
        emp.setPassword("ecka12");  
    }
    } 
```

我有一个空指针异常，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:55:46.940

您正在使用以下方法创建对象：-

```
 Employee emp = new Employee(); 
```

在您的 0-arg 构造函数中，您尚未初始化`connection`

```
public Employee() {

} 
```

所以，当你`con`在`setPassword()`方法中使用时，你会得到`NullPointerException`： -

```
 // con is not initialized
    statement = con.prepareStatement("SELECT * from employee WHERE userID = ?");
    statement.setString(1, userID); 
```

**要更正此问题**，您需要将以下代码移至**`0-arg constructor`**.. 并在您的**其他构造函数**中： - 添加**`this()`**为您的第一条语句..

```
public Employee() {
    try {
         Class.forName("com.mysql.jdbc.Driver");
         con = DriverManager.getConnection(
                        "jdbc:mysql://localhost:3306/test","root","");
    } catch (Exception e) {
         e.printStackTrace();
    }
}

public Employee(String firstName, String lastName) {
     this(); // Initialize con..

     try {
        // You don't need to initialize your con here again..
        // Your remaining code.. 
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:59:04.240

发生空指针异常是因为您有一个额外的构造函数 public Employee() ， con 没有初始化，因此导致空指针异常。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:23:21.257

1.确保在`employee table`执行代码之前创建了表，因为您还没有在java代码中创建表。

2.`Employee(String,,,,)`构造函数也没有使用，因为这个Connection没有被实例化，你已经关闭了构造函数本身的连接。因此它可能在搜索表中的数据之前就已经存在。

# java - Java：RMI 目标对象的垃圾收集？

> ID：12746652
> 
> 赞同：1
> 
> 时间：2012-10-05T12:50:59.860
> 
> 标签：java, garbage-collection, rmi

在弄脏 RMI 时，我遇到了一个`java.rmi.NoSuchObjectException`异常，这导致我提出了这个问题：[java.rmi.NoSuchObjectException: no such object in table](https://stackoverflow.com/questions/645208/java-rmi-nosuchobjectexception-no-such-object-in-table) *but my question is different*。

我在我的 main 方法中创建 impl 对象，因此在主线程中。如果我这样做：

```
FooImpl fi = new FooImpl();
foo = (Foo) UnicastRemoteObject.exportObject(fi, 0); 
```

一切正常。

如果我这样做：

```
foo = (Foo) UnicastRemoteObject.exportObject(new FooImpl(), 0); 
```

我看到收集了 FooImpl 实例，然后我得到了上述异常。

`foo`是我在 main 中初始化的静态引用；另一个远程对象`foo`从其方法之一返回。因此，客户端首先获取该远程对象，然后从中获取`foo`，然后调用一个方法`foo`，这就是我得到上述异常的时候。那么为什么会这样呢？

编辑：这是我的主要方法

```
public static void main(String[] args) throws RemoteException, AlreadyBoundException 
{

    Server server = new Server();
    Hello stub = (Hello) UnicastRemoteObject.exportObject(server, 0);

    FooImpl fi = new FooImpl();
    foo = (Foo) UnicastRemoteObject.exportObject(fi, 0);

    Registry registry = LocateRegistry.getRegistry();
    registry.bind("Hello", stub);       
    System.out.println("Server ready!");        
} 
```

在客户端，我正在获取`hello`并调用一个方法，它给了我`foo`，然后调用一个方法`foo`。

EDIT2：如果我使用

`Hello stub = (Hello) UnicastRemoteObject.exportObject(new Server(), 0);`

`foo`然后先绑定`hello`，然后当我尝试访问时抛出相同的异常，`hello`因为现在它是正在收集的服务器实例。真是奇怪的东西！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T22:35:19.657

这两种方法都可能失败。在变量范围方面，它们之间没有真正的区别。

在这些情况下更常见的问题是注册表本身，当您创建时`LocateRegistry.createRegistry()`，您没有这样做。如果你是，创建的注册表本身也可以被 GC 处理：你必须将`Registry`引用保存在静态变量中。然后它不会被 GC'd，它会阻止 stub`foo`被 GC'd，并且 stub 将阻止`FooImpl`DGC'd 并因此 GC'd。

在您的情况下，您最好将远程对象引用（服务器，而不是存根）保存在静态变量中。

# android - 点击返回按钮后，Gridview 项目未更新

> ID：12746654
> 
> 赞同：0
> 
> 时间：2012-10-05T12:51:03.643
> 
> 标签：android, gridview, back

当我更新我的 SQL 数据库中的某个字段然后点击后退按钮，回到我的 gridview（在我的 Level 类中）时，我遇到了问题。目的是我在 gv 项目中有一个图像和一个文本，如果用户给出正确的答案，我希望更新文本：

```
//in my custom adapter:
//...
        if (mView != null) {

            int correctAnswer = getItem(position).getAnswerCorrect();
            if(correctAnswer == 1) { text.setText("yea"); } else { text.setText("too bad"); }
} 
```

如果您单击一个项目，您将进入 Answer.java：

```
if (qAnswer.equals(userAnswer)) {
                Toast.makeText(getApplicationContext(), ("Answer Correct"),
                        Toast.LENGTH_SHORT).show();
//update database:
                myDbHelper.updateAnswerCorrect((int)id, level);

            } else {
                Toast.makeText(getApplicationContext(), ("Wronggggg"),
                        Toast.LENGTH_SHORT).show();
            } 
```

奇怪的是，当我转到主屏幕并再次启动Level.java时（Answer -> Level -> Main -> Level），它以正确的方式显示。如果我只是返回一个屏幕回到网格视图（答案 - > 级别），我怎么看不到它？

我试图把它放在我的 Level 课程中，但它似乎不起作用：

```
@Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        myAdapter.notifyDataSetChanged();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:54:33.133

您必须使用托管光标（[http://www.higherpass.com/Android/Tutorials/Accessing-Data-With-Android-Cursors/3/](http://www.higherpass.com/Android/Tutorials/Accessing-Data-With-Android-Cursors/3/)），或者只是重新创建一个新的适配器（myAdapter = new MyAdapter( ...)) 并在 onResume() 中使用新的调用 gridview.setAdapter()

# c# - 从不同的选定列表框项绑定

> ID：12746657
> 
> 赞同：0
> 
> 时间：2012-10-05T12:51:22.620
> 
> 标签：c#, binding, listbox

**简介：** 我正在使用标准的 MVVM 框架，并且我有两个列表框，我希望能够从中选择一个项目。列表框绑定到同一类的不同 ObservableCollections。

绑定到 ViewModel 后，我希望能够在同一个窗口中表示选定的项目，具体取决于我选择的项目。

**视图模型 -**

```
 private KisesaSearchResultViewModel _selectedPerson;
    public KisesaSearchResultViewModel SelectedPerson
    {
        get
        {
            return _selectedPerson;
        }
        set
        {
            _selectedPerson = value;
            OnPropertyChanged("SelectedPerson");
        }
    }

    private KisesaSearchResultViewModel _selectedSearch;
    public KisesaSearchResultViewModel SelectedSearch
    {
        get
        {
            return _selectedSearch;
        }
        set
        {
            _selectedSearch = value;
            SelectedPerson = value;
            OnPropertyChanged("SelectedSearch");
        }
    }

    private KisesaSearchResultViewModel _selectedMatch;
    public KisesaSearchResultViewModel SelectedMatch
    {
        get
        {
            return _selectedMatch;
        }
        set
        {
            _selectedMatch = value;
            SelectedPerson = _selectedMatch;
            OnPropertyChanged("SelectedMatch");
        }
    } 
```

**XAML -**

```
 <ListBox ItemsSource="{Binding Path=MatchedMembers, Mode=OneWay}" 
             ItemTemplate="{StaticResource SearchResult}"
             SelectedItem="{Binding SelectedSearch}">
    </ListBox>

    <ListBox ItemsSource="{Binding Path=SelectedMatchList, Mode=OneWay}" 
             ItemTemplate="{StaticResource SearchResult}"
             SelectedItem="{Binding SelectedMatch}">
    </ListBox> 
```

**我想这样显示信息：**

```
 <TextBlock Grid.Row="1" Text="{Binding Path= SelectedPerson.FullName}" FontSize="18" FontWeight="Bold" Style="{StaticResource PInfo}" />
        <TextBlock Grid.Column="0" Grid.Row="2" Style="{StaticResource Info}" Margin="30,0,0,0" Text="{Binding Path=SelectedPerson.Age}"/> 
```

**问题：** 我需要 SelectedSearch 和 SelectedPerson 因为我希望能够独立更改 SelectedPerson。此时，SelectedPerson 正在由 SelectedSearch 设置器设置，但它没有绑定到 Textblocks。我正在使用 OnPropertyChanged，但是否需要执行其他操作，例如使用事件处理程序？另外，有点不相关，但我可以限制 WPF 窗口，以便一次只选择两个不同列表框中的一个项目吗？

# silverlight - 来自字符串的 Silverlight LoadComponent

> ID：12746660
> 
> 赞同：1
> 
> 时间：2012-10-05T12:51:50.563
> 
> 标签：silverlight, xamlreader

欢迎大家

基本上，在 Silverlight 4 或 5 中，我想调用`Application.LoadComponent()`给定的有效 xaml 内容。问题是，这个 xaml 是动态创建的，并且不存在于可用于 URI 的资源中。

通常，这会起作用：

```
System.Windows.Application.LoadComponent(this, 
    new System.Uri("/TestApp;component/MainPage.xaml")); 
```

但我需要类似的东西：

```
string s = "{some xaml}";
System.Windows.Application.LoadComponent(this, s); 
```

我不能使用`XamlReader.Load()`，因为我的 xaml 包含`x:Class="..."`，这是这种方法不可接受的。

我要如何继续？我在想把字符串放进去`MergedDictionary`什么的，但是，如何让URI指向它呢？

# javascript - Kendo UI TreeView 节点在拖放后丢失自定义分配的 HtmlAttributes

> ID：12746662
> 
> 赞同：2
> 
> 时间：2012-10-05T12:51:52.667
> 
> 标签：javascript, jquery, kendo-ui

我已经为我的每个树节点分配了一个 ID 属性，以在控制器上保存我需要的信息，以便我可以保存修改后的层次结构。

但是，当我删除一个节点时，会删除 Id 属性。我不确定这是否是一个错误，如果我做错了什么，或者这是否按照开发人员的预期工作。

我附上了我的警报窗口的屏幕截图（下面的代码），以及从 Firebug 生成的 Html 的两张照片。一个在 Drop 之前，一个在 Drop 之后。

```
@(Html.Kendo().TreeView()
.Name("CompanyHierarchy")
.Events(events => events
    .DragEnd("HierarchyDragEnd")
)
.BindTo(Model.Hierarchy as System.Collections.IEnumerable, mappings =>
{
    mappings.For<Models.EnterpriseChildModel>(binding => binding
        .Children(c => c.Children)
        .ItemDataBound((item, c) =>
        {
            item.Text = c.Name;
            item.HtmlAttributes.Add("Id", c.EnterpriseID.ToString());
        })
    );
})
.DragAndDrop(true)) 
```

![警报窗口缺少 ID](../Images/edfa0726fddc713f75da1e06c4c1a2a8.png) ![Firebug 在丢弃之前在 Html 上显示 ID](../Images/813fd22f4f98db068d612a666a4850d0.png) ![Firebug 在 Html 中显示缺少 ID 丢弃后](../Images/71e89d662a028a72a78573b623aa3f99.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:56:14.123

我有一个解决方案。它是由 Telerik 团队成员在 Kendo 论坛上提供的。我也会在下面发布我修改后的代码：

> 拖放操作后，HtmlAttributes 不会保留。在这种特殊情况下，最好将 Id 添加到项目并通过客户端上的 dataItem 方法访问它。

修改后的代码：

**将 ID 添加到 dataItem：**

```
 @(Html.Kendo().TreeView()
    .Name("CompanyHierarchy")
    .Events(events => events
        .DragEnd("HierarchyDragEnd")
    )
    .BindTo(Model.Hierarchy as System.Collections.IEnumerable, mappings =>
    {
        mappings.For<Models.EnterpriseChildModel>(binding => binding
            .Children(c => c.Children)
            .ItemDataBound((item, c) =>
            {
                item.Text = c.Name;
                item.Id = c.EnterpriseID.ToString();
            })
        );
    })
    .DragAndDrop(true)
) 
```

**从 dataItem 获取信息：**

```
 function HierarchyDragEnd(e) {
        setTimeout(function () {
            var originDataItem = $("#CompanyHierarchy").data('kendoTreeView').dataItem(e.sourceNode);
            var originNodeId = originDataItem.id;
            var originNodeText = originDataItem.text;
            var destinationDataItem = $("#CompanyHierarchy").data('kendoTreeView').dataItem(e.destinationNode);
            var destinationNodeId = destinationDataItem.id;
            var destinationNodeText = destinationDataItem.text;

            var dropPosition = e.dropPosition;
        }, 100);
    } 
```

# css - wordpress中不同菜单的不同图像

> ID：12746666
> 
> 赞同：0
> 
> 时间：2012-10-05T12:52:04.447
> 
> 标签：css, wordpress, wordpress-theming

在我的 WordPress 菜单中，我还希望为不同的菜单提供不同的图像和文本。这是图像参考。我希望我的菜单应该是这样的。我使用的是 WordPress 3.4.2。任何帮助和建议都是非常值得赞赏的。

![在此处输入图像描述](../Images/f39ebc087090dbfdc469f086cccb8395.png)

**更新** 屏幕选项图像![在此处输入图像描述](../Images/ec09274ca68e68f003d3be7f0bf58cd2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:55:03.390

这里有两种方法可以向您的菜单项添加自定义类，以便您可以使用 CSS 设置它们的样式。

1.  在 Wordpress 管理面板中的`Appearance > Menus`页面上，单击`Screen Options`页面右上角的 。将出现一个滑出菜单，允许您检查标记为 的选项`CSS Classes`。如果启用此选项，您将能够为每个菜单项添加自定义类，就像添加其标题一样。

2.  您可以自定义`Walker`类以将增量类名称添加到每个（顶级）元素。要了解 Walker 类的工作原理，请查看以下文章： [http ://wp.tutsplus.com/tutorials/creative-coding/understanding-the-walker-class/](http://wp.tutsplus.com/tutorials/creative-coding/understanding-the-walker-class/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:21:18.723

1.  使用图像精灵
2.  `<li>`为每个项目使用不同的类
3.  将您的图像定位为该类的背景。

# r - 增加 geom_smooth 的线条粗细

> ID：12746667
> 
> 赞同：19
> 
> 时间：2012-10-05T12:52:10.470
> 
> 标签：r, ggplot2

我有这个ggplot：

```
ggplot(dt.m, aes(x=pct.on.OAC.cont,y=Number.of.Practices, fill=Age.Group)) +
    geom_bar(stat="identity",position=position_dodge()) +   
    geom_smooth(aes(x=pct.on.OAC.cont,y=Number.of.Practices, colour=Age.Group), se=F) 
```

如何增加 geom_smooth 绘制的线条的粗细？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-05T13:03:53.770

做`size`你想做的事：

```
+ geom_smooth(aes(x=pct.on.OAC.cont, y=Number.of.Practices, colour=Age.Group), 
               se=F, size=10) 
```

或者，您可以更改`size`为`lwd`，但它是使用的标准`size`。

# asp.net - 在运行时设置 TD（取决于 Label.text）

> ID：12746676
> 
> 赞同：1
> 
> 时间：2012-10-05T12:52:28.300
> 
> 标签：asp.net

我有一些表格数据，当标签具有某些特定值时，我需要让它炫耀。尝试通过样式化 TD 来做到这一点。我的 C# 将值设置为`Label1.text`

你能想到其他方法吗？它引发了歧义错误。

```
 <% if (Label1.Text == "1") { %>
            <td style="background:#ffedad; border:#e3a345; color:#cd5c0a"><asp:Label ID="Label1" runat="server" /></td>
 <% }  else {%>
      <td><asp:Label ID="Label1" runat="server" /></td>
 <% } %> 
```

**编辑**

做了其他事情（和更清洁）。

处理变量后面的一些代码以及`td.alt`我的 css 文件中的一些新代码以获取标签的值。如果是`1`，那么我设置一个 `classLabel`变量`alt`，然后我只是设置`class`里面`td`

```
<td class="<%classLabel%>"><asp:Label ID="Label1" runat="server" /></td> 
```

不过，我在我的 aspx 页面的最后一行出现错误，有什么想法是错误的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:20:18.037

您可以调用 code behind 方法，该方法将返回可以由浏览器直接呈现的格式化 HTML 字符串。在该方法背后的代码中，您几乎可以做任何事情：访问任何类型的数据库或任何业务逻辑。

可能返回封装内容的 div 元素（无样式）。您可以通过在代码隐藏方法中使用 if-else 逻辑来返回具有不同 id 或类的 div。然后你可以编写不同的 CSS 样式来应用到不同的 div 上。

```
<% if (Label1.Text == "1") { %> 
        <td style="background:#ffedad; border:#e3a345; color:#cd5c0a">
        <%# generateOutput() %></td> 
<% }  else {%> 
  <td> <%# generateOutput() %> </td> 
<% } %> 
```

而不是在 asp.net 标记中使用 if-else，您可以简单地拥有

```
<%# generateOutput() %> 
```

并从后面的代码中返回全部内容并在 CSS 文件中编写样式。

如果要显示的内容不太复杂，则第二种方法将起作用，否则您可能更喜欢第一种方法。

但是，如果您直接从数据库访问数据，您可以使用 GridView 等 ASP.NET 数据控件，在模板中设置样式，还可以使用查询字符串或表单值过滤数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:21:06.203

你可以用一行来试试这个：

```
<td <%=Label1.Text != "1"?"":"style='background:#ffedad; border:#e3a345; color:#cd5c0a'"%>><asp:Label ID="Label1" runat="server" /></td> 
```

恕我直言，在后面设置样式代码并使用 css 类会更干净

希望这会有所帮助

# android - 布局项目在图形布局上延伸

> ID：12746678
> 
> 赞同：0
> 
> 时间：2012-10-05T12:52:35.010
> 
> 标签：android, xml, user-interface

我正在我的应用程序上设置一个基本的数据输入表单，但布局有困难。

![远远超出图形布局](../Images/596f3b56d23060474934eb5659032032.png)

这就是图形布局的结果。它看起来不错，但所有项目都很好地延伸到了手机图形布局的边界。结果，按钮上的文本消失了，微调器看起来很紧张而且不专业。

这是 XML 代码：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="5dp"
android:background="#F3F3F3"
android:stretchColumns="1" >

<TableRow>
    <TextView
        android:text="@string/name"
        android:id="@+id/TextView03"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#333">
    </TextView>

    <EditText
        style="@style/CustomText"
        android:text=""        
        android:id="@+id/nameContent"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/nameHint"
        android:layout_marginBottom="10dp">
    </EditText>
    <!-- CUSTOM STYLES TO BE IMPLEMENTED FRIDAY! -->

</TableRow>

<TableRow>
    <TextView
        android:text="@string/type"
        android:id="@+id/TextView05"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#333">
    </TextView>

    <Spinner
        android:id="@+id/type_spinner"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="-5dp"
        android:background="@android:drawable/btn_dropdown"
        android:padding="5dp" />

</TableRow>

<TableRow>
    <TextView
        android:text="@string/description"
        android:id="@+id/TextView04"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#333">
    </TextView>

    <EditText
        android:text=""
        android:id="@+id/descriptionContent"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:inputType="textMultiLine"
        android:background="#FFF"
        android:textSize="12dp"
        android:layout_marginBottom="10dp"
        android:padding="5dp"
        android:lines="5"
        android:hint="@string/descriptionHint">     
    </EditText>
</TableRow>

<TableRow>
      <TextView
        android:text="@string/project"
        android:id="@+id/TextView06"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#333">
    </TextView>

    <Spinner
        android:id="@+id/type_project"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@android:drawable/btn_dropdown"
        android:layout_marginLeft="-5dp"
        android:layout_marginBottom="10dp"
        android:padding="5dp"/>

</TableRow>

<TableRow>
<Button
    android:id="@+id/btnClear"
    android:layout_width="match_parent"
    android:layout_height="30dp"
    android:layout_marginBottom="10dp"
    android:background="#ADD6AD"
    android:text="@string/reset"
    android:drawableLeft="@drawable/ic_discard"
    android:textColor="#333"
    android:textSize="12dp"
    /> 

<Button
    android:id="@+id/btnSync"
    android:layout_width="match_parent"
    android:layout_height="30dp"
    android:layout_marginBottom="10dp"
    android:layout_marginLeft="10dp"
    android:background="#ADD6AD"
    android:drawableLeft="@drawable/ic_save"
    android:text="@string/sync"
    android:textColor="#333" />
  </TableRow> 
 </TableLayout>` 
```

任何人都知道如何解决这个错误？我希望一切都保持在手机预览的范围内。

# mysql - 如何找到 mysql 查询的连接大小？

> ID：12746683
> 
> 赞同：3
> 
> 时间：2012-10-05T12:53:04.493
> 
> 标签：mysql, phpmyadmin

我有一个导致错误的查询：

```
错误 1104：SELECT 将检查多于 MAX_JOIN_SIZE 的行。
检查您的 WHERE 并使用 SET SQL_BIG_SELECTS=1 或 SET SQL_MAX_JOIN_SIZE=# 如果 SELECT 没问题。
```

我现在更改了查询，并且不再收到此错误。`max_join_size = 900,000`和`sql_big_selects = 0`。不幸的是，我没有 ssh 访问权限，我必须使用 phpmyadmin。

所以我的问题是，有没有办法确定特定查询将检查多少行？我想看看查询与 max_join_size 限制有多接近。

编辑：这是原始查询：

```
SELECT * FROM `tz_verify` 
LEFT JOIN `tz_sessions` ON `tz_sessions`.`timesheet_id` = `tz_verify`.`timesheet_id`
AND `tz_sessions`.`client_id` = `tz_verify`.`client_id`
LEFT JOIN `tz_clients` ON `tz_sessions`.`client_id` = `tz_clients`.`id`
LEFT JOIN `tz_tutor_comments` ON `tz_sessions`.`timesheet_id` = `tz_tutor_comments`.`timesheet_id`
AND `tz_sessions`.`client_id` = `tz_tutor_comments`.`client_id` 
LEFT JOIN `tz_notes` ON `tz_sessions`.`notes` = `tz_notes`.`id` 
WHERE `tz_verify`.`code` = 'b65f35601c' AND `confirmed` = 0; 
```

我可以暂时启用`SQL_BIG_SELECTS`以`EXPLAIN`运行 - 这是输出：

```
id  select_type  table              type    possible_keys  key      ref                    rows  extra
1   SIMPLE       tz_verify          ALL     NULL           NULL     NULL                   93    Using where
1   SIMPLE       tz_sessions        ALL     NULL           NULL     NULL                   559
1   SIMPLE       tz_clients         eq_ref  PRIMARY        PRIMARY  tz_sessions.client_id  1
1   SIMPLE       tz_tutor_comments  ALL     NULL           NULL     NULL                   185
1   SIMPLE       tz_notes           eq_ref  PRIMARY        PRIMARY  tz_sessions.notes      1 
```

在重写查询时，我只是将其拆分为运行两个单独的查询，首先是 find `client_id`(eg 226) 和`timesheet_id`(eg 75) from `tz_verify`，然后在此查询中使用这些值：

```
SELECT * FROM `tz_sessions` 
LEFT JOIN `tz_clients`
ON `tz_clients`.`id` = 226
LEFT JOIN `tz_tutor_comments` 
ON `tz_tutor_comments`.`timesheet_id` = 75
AND `tz_tutor_comments`.`client_id` = 226
LEFT JOIN `tz_notes` 
ON `tz_sessions`.`notes` = `tz_notes`.`id`
WHERE `tz_sessions`.`client_id` = 226 AND `tz_sessions`.`timesheet_id` = 75; 
```

这是`EXPLAIN`：

```
id  select_type  table              type    possible_keys  key      ref                    rows  extra
1   SIMPLE       tz_sessions        ALL     NULL           NULL     NULL                   559   Using where
1   SIMPLE       tz_clients         const   PRIMARY        PRIMARY  const                  1
1   SIMPLE       tz_tutor_comments  ALL     NULL           NULL     NULL                   185
1   SIMPLE       tz_notes           eq_ref  PRIMARY        PRIMARY  tz_sessions.notes      1 
```

这看起来不像一次性完成那么整洁！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:36:23.133

根据`EXPLAIN`您发布的第一个输出：

*   我认为连接大小是：93*559*185 = 9 617 595
*   与表连接时，您的初始查询似乎并不总是使用索引`tz_sessions`和`tz_tutor_comments`. 我建议添加以下复合索引（每个索引由 2 个字段组成）：
    *   表`tz_verify`：（timesheet_id，client_id）
    *   表`tz_sessions`：（timesheet_id，client_id）
    *   表`tz_tutor_comments`：（timesheet_id，client_id）

如果这些索引之一已经存在，请不要再次创建它。

添加索引后，`EXPLAIN`再次运行（使用初始查询）。您会注意到查询现在为每个连接使用索引（查看“key”列）。您可以再次运行初始查询，它不应再导致您遇到的错误。

# 文档：

[使用 EXPLAIN](http://dev.mysql.com/doc/refman/5.5/en/using-explain.html)
[CREATE INDEX 语法优化查询](http://dev.mysql.com/doc/refman/5.5/en/create-index.html)
[MySQL 如何使用索引](http://dev.mysql.com/doc/refman/5.5/en/mysql-indexes.html)
[多列索引](http://dev.mysql.com/doc/refman/5.5/en/multiple-column-indexes.html)

# r - 我可以在乳胶文档的标题中使用 knitr 内联表达式吗？

> ID：12746684
> 
> 赞同：12
> 
> 时间：2012-10-05T12:53:09.890
> 
> 标签：r, latex, knitr

我想`\Sexpr{}`在 \begin{document} 命令之后但 \maketitle 命令之前，在 LaTeX 文档的标题中使用 Knitr/Sweave 内联调用 ( )。内联 R 代码将从我嵌入 LaTeX 的 R 脚本早期创建的 R 数据框中提取一两条信息。

我有几个 Knitr 块，它们创建了一个 data.frame，从中我获得了我想要放入标题中的信息。我尝试将这些块放置在 LaTeX 的 \begin{document} 调用和 \title 代码之间，如下所示：

```
\documentclass
[LaTex Preamble]
\begin{document}
[%% Knitr chunks that initialize an R data-frame]
\title \Sexpr{--a snippet of R code that extracts an element from the data-frame --}
\maketitle
... (rest of the LaTeX document) 
```

我还尝试在 \begin{document} 语句之前将 Knitr 块放在 LaTeX 代码的序言中。

但是在 Knitr 中似乎忽略了放置在 LaTeX 中的 \maketitle 调用之前的代码（除了初始化之外），因此包含标题的内联代码段看起来像 Latex 的错误，它会停止输出。

我在 Knitr 文档中找不到关于在 LaTeX 文档的标题中包含内联代码的任何信息。

有任何想法吗？

* * *

好的：感谢下面@ben-bolker 的提示，找到了解决方案。Ben 在输出到 RNW 文件之前使用 R 块的格式（在两步 Knitr 过程中：latex -> rnw -> pdf）。但是我一步将 LaTeX 文件编译为 PDF，而无需从 TeXShop 内部（在 Mac OSX 上）转到 RNW 文件。我发现我可以使用 RNW 分隔符 (<<>>=) 和一步编译来让 Ben 的示例工作。但我不能混合使用通常的 LaTeX 块分隔符（%%begin.rcode 和 %% end.rcode）和 RNW 内联语句挂钩（\Sexpr{}）。无论我如何摆弄，后者都不起作用。最终我发现 LaTeX 的正确内联钩子是**\\rinline{}**。

在 Knitr 文档中不是很清楚这是 LaTeX 所需的格式，我最终发现它主要归功于 Ben 的示例。最好的，彼得

* * *

**更新 2** ...然后是 RTFM（或本例中的“备忘单”）：[http ://cran.r-project.org/web/packages/knitr/vignettes/knitr-refcard.pdf](http://cran.r-project.org/web/packages/knitr/vignettes/knitr-refcard.pdf)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T13:08:56.097

唔。以下文件对我有用：

```
\documentclass{article}
<<echo=FALSE>>=
x <- 5
@ 
\title{The number is \Sexpr{x^2}}
\begin{document}
\maketitle

Some stuff
\end{document} 
```

在 Ubuntu 10.04 上使用 knitr 版本 0.8，通过`knit2pdf("knitr_title.Rnw")`... ![在此处输入图像描述](../Images/19cc132210c1d5ff70af77f95a4d8170.png)

# sql - 获取所有记录，包括不匹配的记录

> ID：12746687
> 
> 赞同：3
> 
> 时间：2012-10-05T12:53:18.987
> 
> 标签：sql, sql-server-2008, tsql

我有以下表格

支付

PayTypeId，描述

*   0 , 信用
*   1、借记
*   2、大师

ActualPayment Id,PayTypeId,Amount

*   1,1,10

这是我正在查看的输出

Id,PayTypeId,金额

*   1,0,空
*   1,1,10
*   1,2,空

基本上我想要 ActualPayment 的所有记录，包括所有付款类型。

这是我使用过但没有得到任何记录的查询

```
select
*
from #ActualPayments ap 
left join #Payment p on ap.paytypeid = p.paytypeid 
where p.paytypeid is null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:00:45.500

您没有收到任何记录，因为您正在使用该`WHERE`子句过滤掉所有内容`p.paytypeid is null`

尝试在没有`WHERE`子句的情况下运行它。

**编辑：**下面的 SQL 应该返回正确的信息。我用 a`CROSS JOIN`创建了一个内嵌视图。这应该删除不需要`NULL`的 s。

```
SELECT t1.id, t1.paytypeid, t2.amount
FROM (  
    SELECT id, payment.paytypeid 
    FROM #ActualPayments
    CROSS JOIN #Payment
) t1
LEFT OUTER JOIN #ActualPayments t2 
    ON t1.paytypeid = t2.paytypeid 
; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T13:01:56.043

如果您想要三个值中的每一个都有一个记录`PayTypeID`，那么您需要在左侧的这三个记录`LEFT JOIN`。

同样，如果您想要`ActuallPaymentID`在每个输出行上，该值需要在左侧。

你所拥有的数据和你所描述的表格都会让你走上错误的道路。

在你的问题中只有这两个表，我会使用这个布局来代替......

```
SELECT
  ap.ActualPaymentID,
  p.PayTypeID,
  SUM(CASE WHEN ap.PayTypeID = p.PayTypeID THEN ap.Amount END)    AS Amount
FROM
  ActualPayments                    AS ap
CROSS JOIN
  Payment                           AS p
GROUP BY
  ap.ActualPaymentID,
  p.PayTypeID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:00:23.623

我想你想要一个完整的外部连接：

```
select
*
from #ActualPayments ap 
full outer join #Payment p
    on ap.paytypeid = p.paytypeid 
; 
```

这将返回 ActualPayments 表中的所有行以及它们对应的 Payment 值 - 如果有的话。此外，它将返回 Payment 中不存在 ActualPayments 的所有行。
请注意：不得使用示例查询的 where 子句！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T13:12:47.337

我很困惑你为什么要这样做，但这是一种方法

```
select  ap.Id, pt.PayTypeId, ap2.Amount
from    #ActualPayments ap
    cross join #PaymentTypes pt
    left join #ActualPayments ap2
    on pt.PayTypeId = ap2.PayTypeId
    and ap.Id = ap2.id 
```

# ajax - 浏览器是否限制 AJAX 轮询率？极限是多少？

> ID：12746688
> 
> 赞同：9
> 
> 时间：2012-10-05T12:53:20.420
> 
> 标签：ajax, xmlhttprequest, limit, polling, rate

我刚刚读到一些浏览器会阻止 HTTP 轮询（我猜是通过限制请求的速率）......

来自[https://github.com/sstrigler/JSJaC](https://github.com/sstrigler/JSJaC)：

> 注意：由于大多数现代浏览器的安全限制阻止 HTTP Polling 不再可用，此模块现在默认禁用。如果你想编译它使用'make polling'。

这可以解释我的一些 JavaScript 的一些不当行为（有时请求只是没有发送或重试，即使它们实际上是成功的）。但是我找不到有关详细信息的更多信息..

## 问题

*   如果它是“每 x 秒的最大请求数 n”，x 和 n 的通常/默认设置是什么？
*   有什么好的资源吗？
*   有什么方法可以检测请求是否由于速率限制而被“延迟”或“拒绝”？

谢谢你的帮助...

斯特凡

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T19:41:48.763

是的，据我所知，每个请求的默认池限制为 10，默认请求超时为 30 秒，但是可以控制超时和轮询限制，并且不同的浏览器实现不同的限制！

查看这个[Google 实施](http://closure-library.googlecode.com/svn/docs/class_goog_structs_PriorityPool.html)。

这是捕捉超时错误的一个[很棒的实现！](http://closure-library.googlecode.com/svn/docs/closure_goog_labs_net_xhr.js.source.html)

[您可以在这里](https://developer.mozilla.org/en-US/docs/Talk:Document_Object_Model_%28DOM%29/XMLHttpRequest)找到 Firefox 的详细信息！

Internet Explorer 的细节是从 Windows 注册表内部控制的。

也看看[这个问题](https://stackoverflow.com/questions/5031501/how-to-rate-limit-ajax-requests)。

基本上，您控制的方式不是通过更改浏览器限制，而是通过遵守它们。因此，您应用了一种称为节流的技术。

将其视为创建函数的 FIFO/优先级队列。将 xhr 请求作为成员并在它们之间强制延迟的队列结构是 Xhr 轮询。例如，我正在使用 Jsonp 从位于另一个域的 node.js 服务器获取数据，当然由于浏览器的限制，我正在轮询。否则，我从服务器得到零响应，这仅仅是因为浏览器的限制。

我实际上正在为每个应该发送的请求做一个控制台日志，但并不是所有的请求都被记录下来。所以浏览器限制了它们。

我会更具体地帮助你。我的网站上有一个页面，该页面应该呈现数十甚至数百篇文章的视图。您可以使用很酷的水平滑块浏览它们。

滑块的当前值与当前的“页面”匹配。由于我每页只显示 5 篇文章，而且我无法完全加载数千篇文章“onload”而不会对性能产生严重影响，因此我加载了当前页面的文章。我通过向 Python 脚本发送跨域请求来从 MongoDB 获取它们。

该脚本应该返回一个包含五个对象的数组，其中包含我为“页面”构建 DOM 元素所需的所有详细信息。但是，有几个问题。

首先，滑块工作得非常快，因为它或多或少是一个值变化。即使有拖放功能、按键事件等，实际更改也需要几毫秒。但是，滑块的代码如下所示：

```
goog.events.listen(slider, goog.events.EventType.CHANGE, function() {
    myProject.Articles.page(slider.getValue());
} 
```

slider.getValue() 方法返回一个带有当前页码的 int，所以基本上我必须从以下位置加载：

```
currentPage * articlesPerPage to (currentPage * articlesPerPage + 1) - 1 
```

但是为了加载，我做了这样的事情：我有一个存储引擎（把它想象成一个数组）：

*   我检查内容是否已经存在
*   如果是，则没有必要再发出请求，因此请继续从数组中获取 DOM 元素，并将已创建的 DOM 元素放在适当的位置。
*   如果不是，那么我需要得到它，所以我需要发送我提到的那个请求，它看起来像（不考虑浏览器限制）：

    JSONP.send({'action':'getMeSomeArticles','start':start,'length': itemsPerPage, function(callback){

    // 现在我只是快速解析回调以确保它是一致的 // 创建 DOM 元素，并填充客户端存储 // 并为用户更新视图。}}

问题来自您更改该滑块的速度。由于每个更改都应该触发一个请求（正常的 Xhr 请求也会发生同样的情况），所以您基本上跨越了所有浏览器的限制，所以如果没有限制，大多数请求都不会有“回调”。'callback' 是 JSONP 请求返回的 JS 代码（这更像是一个远程脚本包含而不是其他任何东西）。

所以我所做的是将请求推送到优先级队列，而不是 POLL，因为现在我不需要同时发送多个请求。如果队列为空，则执行最近添加的成员，每个人都很高兴。如果不是，则取消所有正在进行的未完成请求，仅执行最后一个请求。

现在，在我的特定情况下，我进行二进制搜索（0（log n））以查看存储引擎是否还没有先前请求的数据，这会告诉我先前的请求是否已完成。如果有，则将其从队列中删除并处理当前的，否则将触发新的。如此等等。

同样，为了速度考虑和讨厌的浏览器，如 Internet Explorer，我提前 3-4 步执行上述过程。所以我提前预加载了 20 页，直到一切都是客户端存储引擎。这样，每个限制都被成功处理。

冷却时间由滑过 20 页所需的最短时间覆盖，并且节流确保在任何给定时间不超过 1 个活动请求（向后兼容至 Internet Explorer 5）。

**我写这一切的原因是为了给你一个例子，试图说明你不能总是直接从 FIFO 结构中强制延迟，因为你的调用可能需要变成用户看到的，而你并不完全想要用户等待 10-15 秒以呈现单个页面。**

此外，始终尽量减少轮询和轮询的需要（同时触发 Ajax 事件，因为并非所有浏览器实际上都对它们做了好事）。例如，与其发送一个请求以获取内容并发送另一个请求以在您的应用指标中查看要跟踪的内容，不如在服务器级别执行尽可能多的任务！

当然，您可能希望正确地跟踪您的错误，因此您选择的库中的 Xhr 对象为 ajax 实现错误处理，并且因为您是一个了不起的开发人员，所以您想使用它们。

所以假设你有一个 try - catch 块 场景是这样的：一个 Ajax 调用已经完成，它应该返回一个 JSON，但是调用不知何故失败了。但是，您尝试解析 JSON 并使用它做任何您需要做的事情。所以

```
function onAjaxSuccess (ajaxResponse) {
    try {
        var yourObj = JSON.parse(ajaxRespose);
    } catch (err) {
    // Now I've actually seen this on a number of occasions, to log that an error occur
    // a lot of developers will attempt to send yet another ajax request to log the
    // failure of the previous one.
    // for these reasons, workers exist.
    myProject.worker.message('preferrably a pre-determined error code should go here');
    // Then only the worker should again throttle and poll the ajax requests that log the
    //specific error. 
};

}; 
```

虽然我已经看到各种实现尝试同时触发尽可能多的 Xhr 请求，直到遇到浏览器限制，然后在等待浏览器“冷却”时停止未触发的请求方面做得很好'，我可以建议您考虑以下几点：

*   速度对您的应用程序有多重要？
*   I/O 的可扩展性和密集程度如何？

如果第一个的答案是“非常”，而后者的答案是“OMFG 现代技术”，那么尽量优化你的代码和架构，这样你就不需要同时发送 10 个 Xhr 请求。此外，对于大型应用程序，多线程您的流程。实现这一点的 JavaScript 方法是使用工作者。或者你可以打电话给 ECMA 委员会，告诉他们将其设为默认值，然后将其发布在这里，以便我们其他 JS 开发人员可以享受 JS 中的原生多线程:)（他们怎么没想到这个？！ ？！）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T10:28:26.897

Stefan，下面的快速答案：

- 如果它是“每 x 秒的最大请求数 n”，x 和 n 的通常/默认设置是什么？这听起来更像是服务器限制。浏览器通常听起来像：-“相同主机名的最大请求数是 x”-“任何主机名的最大连接数是 y”

- 有什么好的资源吗？ [http://www.browserscope.org/?category=network](http://www.browserscope.org/?category=network)（也可以将鼠标悬停在表头上以查看测量的内容） [http://www.stevesouders.com/blog/2008/03/20/roundup-on-parallel-连接](http://www.stevesouders.com/blog/2008/03/20/roundup-on-parallel-connections)

- 有什么方法可以检测请求是否由于速率限制而被“延迟”或“拒绝”？您可以查看“连接：关闭”的 http 标头以检测服务器限制，但我不知道 JavaScript 能够以一致的、独立于浏览器的方式从这么多浏览器中读取设置。（对于 Firefox，你可以阅读这个[http://support.mozilla.org/en-US/questions/746848](http://support.mozilla.org/en-US/questions/746848)）

希望这个快速回答有帮助吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T15:32:47.807

我编写了一些带有长轮询的应用程序，一些使用 C++ 后端和我自己的网络服务器，还有一个使用 PHP 后端和 Apache2。

我的长轮询超时是 4..10 秒。当发生某些事情或 4..10 秒过去时，我的服务器返回一个空响应。然后客户端立即启动另一个 AJAX 请求。我发现当我从以前的 AJAX 处理程序启动 AJAX 调用时，某些浏览器会挂起，所以我使用 setTimeout() 和一个小值来启动下一个 AJAX 请求。

当客户端发生某些事情，应该发送到服务器时，我使用另一个 AJAX 请求，但这是单向的：服务器不发送任何响应，客户端不处理任何内容。操作的结果（如果有）将在长轮询中收到。它需要最大。2 连接到所有浏览器都支持的服务器。

请记住，如果有 500 个客户端，则意味着 500 个服务器端 webserver 线程，它们将一起移动，出现负载峰值，因为当有事情发生时，服务器必须同时为每个客户端报告，客户端将处理它几乎同时长，他们将在同一时间开始下一个长请求，从那时起，超时也将同时到期，未来的也将到期。您可以使用 rnd 超时进行欺骗，例如 4 rnd(0..4)，但这毫无价值，如果发生任何事情，它们将再次“同步”，所有请求必须同时处理，当发生可报告的事情时。

我已经通过路由器对其进行了测试，并且可以正常工作。我假设，路由器尊重 4..10 延迟，它大约是慢 webapge 的速度（很远，很远），没有路由器认为应该取消它。

我的 PHP 工作是一个协作电子表格，当您按 Enter 键并且内容在多个浏览器中同时更新时，它看起来很棒。玩得开心！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T02:44:32.620

不，浏览器不会以任何方式影响轮询。我认为该页面上的含义是相同的来源策略-您只能访问与原始页面相同的主机和端口。

对连接本身的唯一已知限制是，您通常只能同时连接两到四个到同一主机。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T05:33:06.820

ajax 请求的数量没有限制。但是它将在同一主机和端口上。

服务器可以根据其设置限制来自机器的请求。

例如。服务器可以设置，如果在指定时间内来自同一台机器的请求过多，它将拒绝请求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T09:28:25.953

在 javascript 代码中出现小错误后，每一步调用 2 个 ajax 请求都会产生无休止的循环。在 firebug 中，我可以看到越来越多的请求，直到 firefox 开始减速、不响应并最终崩溃。

所以，是的，有一个“限制”；）

# javascript - 为什么当通知被关闭时，Mountain Lion 上的 Chrome 中的 Webkit 通知没有发送 onClose 事件？

> ID：12746690
> 
> 赞同：1
> 
> 时间：2012-10-05T12:53:36.130
> 
> 标签：javascript, google-chrome, webkit, notifications, osx-mountain-lion

我在我的网页上使用 Webkit 通知来通知用户页面中的更新（使用 AJAX 定期更新）。我使用带前缀的*webkitNotifications*而不是不带前缀的版本来尽可能保持向后兼容性。我创建一个通知，在元素的数据中保留对它的引用（使用 jQuery），向它添加一个*onClose*处理函数，然后显示它。通知按原样显示在通知中心，并且功能正常。如果我将*onClick*处理程序附加到它，它也会按预期运行。但是，当我关闭通知时（如果我将它作为警报单击关闭，或者如果它只是一个横幅，则在通知中心清除它）我的*onClose*在 Chrome 中不调用处理程序。我的网页上仍然有对通知的引用，如果我在其上调用取消方法（通知在通知中心不再可见），则确实会调用*onClose处理程序。*

据我所知，这个问题是在 Mountain Lion 上运行的 Chrome 所独有的（我没有在以前版本的 OSX 上测试过它，但我认为它的功能与 Windows 类似，因为当时不存在通知中心） . 在 Mountain Lion 上使用 Safari，在关闭通知时正确调用*onClose*，在 Windows 下从 Chrome 关闭通知时也会调用它。

有谁知道为什么会这样，以及是否有某种方法可以正确接收*onClose*事件？

我已经为人们设置了一个[jsFiddle](http://jsfiddle.net/AzxC9/ "jsFiddle")来测试它。

（澄清一下，我正在运行 Chrome 的 22.0.1229.79 版本，并且该测试适用于 Safari 的 6.0.1 版本）。

# ruby-on-rails-3 - 使用 Savon SOAP GEM 获取 WSDL 文件

> ID：12746695
> 
> 赞同：0
> 
> 时间：2012-10-05T12:53:50.683
> 
> 标签：ruby-on-rails-3, soap, savon

我正在尝试使用 ruby​​ gems Savon 建立连接并执行 SOAP 请求和响应。问题是我每次都通过这样做来获取文件：

```
client = Savon.client("http://www.webservicex.net/uszip.asmx?WSDL") 
```

现在在 Savon 的文档中是这样说的：

“您可以使用或不使用（本地或远程）WSDL 文档来实例化客户端。使用 WSDL 会更容易一些，因为 Savon 可以为目标名称空间、端点、可用的 SOAP 操作等解析文档。但是（远程）WSDL 具有为每个客户端下载和解析一次，这会带来性能损失。”

所以我的问题是，我可以只使用 Savon 库来获取 WSDL 文件吗？还是我需要从第三方应用程序中索取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:27:12.210

这取决于服务，以及他们是否从其服务 URL 提供 .WSDL。可用性的最佳选择可能是将 WSDL 存储在本地，但此时您承诺跟踪其更新

# c# - 如何使用 log4net 创建动态日志

> ID：12746696
> 
> 赞同：0
> 
> 时间：2012-10-05T12:53:55.153
> 
> 标签：c#, logging, log4net

我的项目是 C#（Windows 窗体）.net3.5

在我的代码中有多个事件，并且在每个事件中都运行多个搜索。

我必须为每个事件创建日志文件，并且多个搜索可以访问和写入这个单个日志文件。

问题是我不知道如何使用 log4net 创建多个具有动态（在运行时设置）名称的日志。

如何设置位置（路径）

我浏览了有关我的问题的互联网，但没有找到任何解决此类问题的帮助。

任何想法请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:04:32.740

`log4net`通常用于具有多个源和附加器。要生成已定义的源，请要求 LogManager 有一个命名日志，通常我们使用类型来标识日志，但如果需要，可以随意使用字符串：

```
 var myLog = LogManager.GetLogger("NAME");
....
    var myLog = LogManager.GetLogger(GetType()); 
```

在第一种情况下，记录器由 标识`"NAME"`，在第二种情况下，由带有命名空间的类型名称标识。然后，您可以为所有日志、它们的子集、过滤器等配置附加程序。让我们看一个例子：

```
<configuration>

  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>

  </configSections>
  <log4net>

<appender name="MYFILE" type="log4net.Appender.RollingFileAppender">
  <file value=".\logs\myname.log"/>
  <appendToFile value="true"/>
  <rollingStyle value="Size"/>
  <maxSizeRollBackups value="10"/>
  <maximumFileSize value="10MB"/>
  <staticLogFileName value="true"/>
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%date %-5level (%thread) %logger - %message%newline"/>
  </layout>
</appender>

<root>
  <level value="INFO"/>
  <!-- all logger append to these appenders />
   <appender-ref ref="xxxxxx"/>

</root>
<logger name="NAME">
  <level value="INFO"/>

  <appender-ref ref="MYFILE"/>
</logger>
<!-- add other appender here --> 
```

不要忘记在您的应用程序开始时调用`XmlConfigurator.Configure();`

# java-me - QWERTY 手机 j2me 的按键代码

> ID：12746697
> 
> 赞同：0
> 
> 时间：2012-10-05T12:54:03.450
> 
> 标签：java-me

我目前正在做一个 j2me 项目，我想知道当我按下 A、B、C 等字母时，我将为 keylistener 使用什么键码？

我在 QWERTY 手机中部署 j2me - SAMSUNG CH@T 223。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T00:38:21.567

[`Canvas.keyPressed`](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Canvas.html#keyPressed%28int%29)该`keyCode`参数将保存按下键对应字符的 Unicode 值。
根据键盘模式，该值可能会有所不同。例如，相同的密钥可能会生成“d”、“D”或“4”。
模式是：normal（小写字母）、shift/caps（大写字母）和alt（数字和符号）。

# sql - Django中的不可变表

> ID：12746699
> 
> 赞同：1
> 
> 时间：2012-10-05T12:54:05.300
> 
> 标签：sql, django, model, readonly

我正在为游戏实现后端。我有两组表，在生产过程中不会更改的游戏元数据表和用户数据表。我正在考虑优化游戏元数据，因为它们是完全不可变的。我想到的一些想法是，

*   在 mysql 中使用内存表引擎 [不知道如何改进]
*   编写一个管理器来缓存对这些表的所有查询结果，前提是 SQL 中两种类型的表之间没有连接 [仍然不太确定是否可能]
*   利用缓存输出侧面模型对象[虽然不是那么普遍]

你认为最好的方法是什么？或其他更好的方法？谢谢。

# c# - 使用 MVC4 asp.net 随机注销

> ID：12746703
> 
> 赞同：2
> 
> 时间：2012-10-05T12:54:38.220
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, forms-authentication, session-cookies

这将是我在这里的第一个问题！

我的 mvc4 应用程序和随机发生的注销有问题。

我使用会话来存储我的公司 ID 和用户 ID。

```
 private void SetSessionData(string UserName)
    {
        Employee data = (from employee in _db.Employees where employee.Email == UserName select employee).First();
        Session.Add("Comp_ID", data.Comp_ID);
        Session.Add("Company", data.Company.Name);
        Session.Add("User_ID", data.ID);
    } 
```

我已将会话的超时值设置为 600（10 小时），这甚至设置了 2 个位置以确保：

```
 [AllowAnonymous]
    public ActionResult Login(LoginModel model, string returnUrl)
    {
        if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
        {
            //FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe); //sørger for at remember me virker!

            SetSessionData(model.UserName);
            Session.Timeout = 600;

            if (model.RememberMe)
            {
                Response.Cookies.Add(new HttpCookie("CookieUserName", model.UserName) { Expires = DateTime.Now.AddDays(30), Value = model.UserName });
                Response.Cookies.Add(new HttpCookie("CookieRememberMe", model.RememberMe.ToString()) { Expires = DateTime.Now.AddDays(30), Value = model.RememberMe.ToString() });//sætter den nye cookie
            }
            else
            {
                Response.Cookies.Set(new HttpCookie("CookieUserName") { Expires = DateTime.Now.AddDays(-1) });
                Response.Cookies.Set(new HttpCookie("CookieRememberMe") { Expires = DateTime.Now.AddDays(-1) });
            }

            if (string.IsNullOrEmpty(returnUrl))
            {
                return RedirectToLocal(returnUrl);
            }
            return RedirectToAction("Index", "Home");
        }

        // If we got this far, something failed, redisplay form
        ModelState.AddModelError("", "Vi har enten ikke brugernavnet eller koden i kartoteket.");
        return View(model);
    } 
```

在 web.config 中：

```
<system.web>
<machineKey validationKey="MyKeyGoesHere" validation="SHA1" decryption="AES" />
<sessionState timeout="600" />
<compilation debug="true" targetFramework="4.5">
  <assemblies>
    <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </assemblies>
</compilation>
<httpRuntime targetFramework="4.5" />
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login" timeout="600" />
</authentication> 
```

我的 cookie 似乎保存了 10 个小时，而我的 session_id cookie 过期时间似乎设置为“浏览器关闭时”。

服务器端我已将应用程序池设置为在凌晨 1 点回收。

即使设置了所有这些，我的用户仍然会在登录后 2 分钟到登录后 1 小时之间从所有内容中随机注销。

为了解决我遇到的一些随机半登录状态问题，我包括以下内容：

```
@if(Session == null || Session["User_ID"] == null || !WebSecurity.Initialized){
                //Makes sure the session data is cleared and user logged out if session dies.
                try
                {
                    if(Session != null) {Session.Clear();}

                    if (WebSecurity.Initialized){WebSecurity.Logout();}

                    FormsAuthentication.SignOut();

                    //dette er til at stoppe cache.
                    Response.Cache.SetExpires(DateTime.UtcNow.AddMinutes(-1));
                    Response.Cache.SetCacheability(HttpCacheability.NoCache);
                    Response.Cache.SetNoStore();

                }catch{ <p>Error Clearing Login Cache</p>}    
            } 
```

我现在很迷茫，希望那里的大师可能知道我在这里犯了什么初学者错误！

感谢所有提前回复！

编辑：

我也试过这个： http: [//www.windowsitpro.com/article/security-development/create-persistent-id-cookies](http://www.windowsitpro.com/article/security-development/create-persistent-id-cookies)

（原链接来自：[ASP.NET MVC FormsAuthentication Cookie timeout cannot be increase](https://stackoverflow.com/questions/1663991/asp-net-mvc-formsauthentication-cookie-timeout-cannot-be-increased)）

但这只是让我的应用程序在每次登录后按任何内容时都注销。

该应用程序在带有 IIS8 的 Windows 2012 服务器上运行。

更多补充：

我发现 session_id cookie 在浏览器中关闭时仍设置为：

cloud.hviidnet.com/image/2X3v2y2e1K1S

奇怪的是它设置为 600 分钟，即使我查看 IIS 服务器：

cloud.hviidnet.com/image/1e3J1g2u3p2M

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:07:21.403

解决方案是删除所有“会话”的使用。并使用 WebSecurity.CurrentUserID 从数据库中获取所有数据。

希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:22:14.480

你只有一个网络服务器吗？如果您有多个服务器负载平衡，则会话可能会丢失，因为用户在帖子之间被路由到不同的服务器，这可以解释为什么它会随机发生。

# jsp - 在jsp的列表中显示嵌套列表的值

> ID：12746704
> 
> 赞同：0
> 
> 时间：2012-10-05T12:54:38.730
> 
> 标签：jsp, spring-mvc, foreach, jstl

我正在尝试使用`c:forEach`syantax 迭代 jsp 上的 pojos 列表。现在的问题是列表包含一个嵌套列表，那么我应该如何在 jsp 上显示该特定值。

这是我在 jsp 上的代码：

```
<c:forEach items="${capQues.captureQuestionList}" var="captureQuestion" varStatus="status">
  <fieldset name="captureQuestionList[${status.index}].languageId" value="1">
    <legend><c:out value="${captureQuestion.languages}" /></legend>
    <div class="question"><textarea class="textarea" name="captureQuestionList[${status.index}].question" value="question"></textarea></div>
  </fieldset>
</c:forEach> 
```

其中languages也是一个列表里面`captureQuestionList`。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:56:35.210

我认为您在这里缺少的是`var`. 在您的第一个循环`captureQuestion`中，将是来自 list 的当前对象`captureQuestionList`。您可以按原样使用该引用，因此您不需要使用`captureQuestionList[${status.index}]`来获取对象。顺便说一句，正确的语法是`${captureQuestionList[status.index]}`. 因此，您的字段集名称可以是`${captureQuestion.languageId}`.

For 循环只能嵌套。例如（对您的问题对象做出一些假设）：

```
<c:forEach items="${capQues.captureQuestionList}" var="captureQuestion">
  <fieldset name="${captureQuestion.languageId}">
      <legend><c:out value="${captureQuestion.languages}" /></legend>
      <c:forEach items="${captureQuestion.questionList}" var="question">
        <div class="question">
          <textarea class="textarea" name="${question.id}"><c:out
            value="${question.value}"/></textarea>
        </div>
      </c:forEach>
  </fieldset>
</c:forEach> 
```

请注意，`textarea`它没有`value`属性。把价值放在它的身体里。

* * *

**编辑**：如果您需要遍历语言列表，您可以使用相同的原则：

```
<c:forEach items="${capQues.captureQuestionList}" var="captureQuestion">
  <fieldset name="${captureQuestion.languageId}">
      <legend>
        <c:forEach items="${captureQuestion.languages}" var="language">
          <c:out value="${language.name}" />
        </c:forEach>
      </legend>
      <div class="question">
        <textarea class="textarea" name="${captureQuestion.question}"></textarea>
      </div>
  </fieldset>
</c:forEach> 
```

如果要显示一种语言，请添加一个`c:if`以检查语言

```
<c:forEach items="${captureQuestion.languages}" var="language">
  <c:if test="${language.id eq captureQuestion.questionId}">
    <c:out value="${language.name}" />
  <c:if>
</c:forEach> 
```

尽管最好在模型中添加对正确语言的引用，这样您就可以使用`${captureQuestion.language}`.

# ios - ios geocodeAddressString 在块期间修改全局变量

> ID：12746706
> 
> 赞同：0
> 
> 时间：2012-10-05T12:54:40.013
> 
> 标签：ios, objective-c-blocks, clgeocoder

我知道对 CLGeocoder geocodeAddressString 的调用是异步的，传入一个块以在完成时处理回调。我也知道块内唯一可变的变量是局部 __block 变量。但是我需要将生成的 CLPlacemarks 存储在全局 NSMutableArray 变量中，我无法弄清楚这是如何发生的。任何 __block 变量只能在同一个方法中访问，但在它们具有任何值（即在块内）时，我不能为全局数组分配任何值。在块之后，__block 变量可能不会有任何值，因为调用异步 geocodeAddressString 时会立即返回。

如何存储调用的结果，以便它们可以用于更新 UITableView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:43:39.690

好的，解决了。我错误地推断（从我对块的阅读中）无法在块的范围内修改属性和实例变量。就我而言，我无法修改 iVar 数组的原因是我没有分配/初始化它。一旦我这样做了，我就能够分配值并在块之外查看它们，例如在我的表格视图的 cellForRowAtIndexPath 方法中。

向任何可能被我最初的假设误导的人道歉！作为记录，我确实认为 Apple docs re blocks & variables 上的文本[有点](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Blocks/Articles/bxVariables.html)误导......它提到的唯一可变变量是 __block 函数级变量，而它说所有其他“可以被访问”，我将其理解为“只读”（我知道 getter 和 setter 都是访问器，但上下文令人困惑）。

# ssas - 我可以将 ssas 2008 多维数据集上的计算成员的参数传递给 cognos 报表工作室吗？

> ID：12746711
> 
> 赞同：0
> 
> 时间：2012-10-05T12:54:54.943
> 
> 标签：ssas, mdx, cognos

我可以将 ssas 2008 多维数据集上的计算成员的参数传递给 cognos 报表工作室吗？我知道如何在 Microsoft 报告服务中执行此操作，但不知道 Cognos Report Studio 10.1。我不知道计算成员应该采用的格式，也不知道如何让 Cognos 识别传递的任何参数。示例：假设我想传递下面的代码，显示前 25 个帐户，但相反，我想调整它以具有一个变量/参数，使我能够在运行时对其进行调整，以说出前 10 个帐户。这可能吗。我知道我可以在报表工作室本身中创建代码，但出于性能和可重用性的原因，我宁愿在多维数据集中进行。这是此特定示例的副本，谢谢！

```
 TOPCOUNT( [Instrument].[Account Name].[Account Name].members,
           25, [Measures].[Committed Amt])**strong text** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:57:57.770

If I understood you correctly, you can do it in the following way:
Drag a data item into the query and use the embeded parameter (?prmTopCount?):

```
topeCount([Instrument].[Account Name].[Account Name], 
?prmTopCount?, [Measures].[Committed Amt]) 
```

You can build a prompt page and define a textBox Prompt which uses existing prompt (prmTopCount).
I have also tried to write manual MDX in the report, but it looks it does not support macros embedded inside the manual written MDX.

# java - 在 Xtext 中重载代码生成器

> ID：12746715
> 
> 赞同：1
> 
> 时间：2012-10-05T12:55:21.137
> 
> 标签：java, dsl, xtext

我有一个非常简单的 DSL，它由一个包含比较器列表的验证器元素组成：

```
Validator:
  'validator' name = ID '{'
    comparisons+=Comparison*
  '}'
;

Comparison:
  LessThan | GreaterThan | EqualTo
;

LessThan:
  'lt' value = INT
; 
```

有了这个，我正在尝试生成 C 代码。在我遍历每个验证器的地方，创建一个 C 文件（基于验证器的名称）并将比较器放入三元条件语句中。当我遍历每个比较器时，它会调用`Comparison`输出`if`语句的类的定义。一个缩减示例（输出类似于 CPPUNIT 的内容）：

```
int
main(int argc, char **argv)
{
  // parse argv[1] if it exists -> place into i
  printf("%c", i < (comparator_value_1) ? '.' : 'F');
  printf("%c", i > (comparator_value_2) ? '.' : 'F');
  printf("\n");
  return 0;
} 
```

我可以很好地完成所有这些工作；但是我遇到的问题是我似乎必须在我的`Comparison`生成器中选择条件。我似乎无法通过为 LessThan 添加处理程序来覆盖生成器。

```
def compile(Comparison c) '''
  printf("%c",
    i «IF c.eClass.name.equals("LessThan")»...«ENDIF» «c.value»
      ? '.' : 'F');
''' 
```

当我试图重载它时：

```
def compile(LessThan lt) '''
  printf("%c", i < «c.value» ? '.' : 'F');
  ...
''' 
```

重载的例程不会被调用，这充其量是不幸的。

如果这有什么不同，它会被调用：

```
«FOR c:v.comparisons»
  «c.compile»
«ENDFOR» 
```

其中“v”是验证器。

Xtext有这个能力吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:36:58.490

Xtext 可以使用多态调度（@SpaceTrucker 提供），其中：

> 可以根据多个参数的运行时（动态）类型动态调度函数或方法。

为了使用这个功能，我不得不添加一个词`dispatch`。

```
def dispatch expandComparator(GreaterThan gt) '''
    printf("%c", i < «gt.value» ? '.' : 'F');
'''

def dispatch expandComparator(EqualTo eq) '''
    printf("%c", i == «eq.value» ? '.' : 'F');
'''

def dispatch expandComparator(LessThan lt) '''
    printf("%c", i < «lt.value» ? '.' : 'F');
''' 
```

并使用以下内容生成它：

```
«FOR c:v.comparisons»
    «c.expandComparator»
«ENDFOR» 
```

`compile`函数的名称必须像单个调度函数一样更改。

以下链接包含有关此解决方案的更多详细信息。 [http://dslmeinte.wordpress.com/2012/08/03/polymorphic-dispatch-in-xtend/](http://dslmeinte.wordpress.com/2012/08/03/polymorphic-dispatch-in-xtend/)

# c# - 根据文本设置 asp:label 文本颜色

> ID：12746716
> 
> 赞同：1
> 
> 时间：2012-10-05T12:55:22.307
> 
> 标签：c#, asp.net, css, data-binding

我正在对 gridview 进行数据绑定，其中一列的定义如下所示。我想做的是根据文本是“是”还是“否”来为文本着色。如果文本为“是”，我想将其设置为红色，否则将其设置为绿色。可以这样做吗？如果可以，应该通过 css 完成，还是我可以在该行中添加一些代码？

```
<asp:TemplateField HeaderText="Validated" ItemStyle-HorizontalAlign="Center" SortExpression="Product">
    <ItemTemplate>
        <asp:Label ID="lblValidated" runat="server" Text='<%# Bind("Validation") %>' />
    </ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:10:24.423

下面应该做你想做的。

**ASP.NET**

```
<asp:TemplateField HeaderText="Validated" ItemStyle-HorizontalAlign="Center" SortExpression="Product">
<ItemTemplate>
    <asp:Label ID="lblValidated" runat="server" Text='<%# Bind("Validation") %>' CssClass='<%# SetColor(DataBinder.Eval(Container.DataItem, "Validation")) %>'  />
</ItemTemplate> 
```

**C＃**

```
public string SetColor(string Text)
{
    return Text.ToUpper == "YES" ? "GreenClass" : "RedClass"
} 
```

**CSS**

```
.GreenClass{color:green;}
.RedClass{color:red;} 
```

# c# - SQL Server SELECT 语句通过传入的字符串数组进行过滤

> ID：12746724
> 
> 赞同：1
> 
> 时间：2012-10-05T12:55:41.990
> 
> 标签：c#, sql-server, arrays

我有一个名为 MyProducts 的表，我想返回 item1 和 item2

```
SELECT item1, item2 from MyProducts 
```

但是我希望它在我传入的字符串数组（来自 C#）上进行过滤。这是一张非常大的桌子，所以我写了一个“IN”语句。我将如何使用 join 语句来做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:57:33.867

一种解决方案是创建一个临时表并加入它。临时表可以在您将要加入的列上具有索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:12:31.507

声明没有理由`IN`“出局”；最终，这是一种完全合理的过滤方式——让优化器担心各种选项。它当然不会受到很大的事实的影响`MyProducts`。添加连接会增加工作量：但是，它不会减少“命中”的数量或所涉及的工作量。例如，用 dapper 做到这一点就是：

```
string[] filter = ...
var rows = connection.Query(
     "select item1, item2 from MyProducts where SomeField in @filter",
     new {filter}); 
```

或使用 LINQ：

```
string[] filter = ...
var rows = db.Products.Where(x => filter.Contains(x.SomeField)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T13:13:55.573

我一直很喜欢这种方法...

```
CREATE FUNCTION dbo.Split(@String varchar(max), @Delimiter char(1))        
returns @temptable TABLE (Value varchar(max))        
as        
begin        
    declare @idx int        
    declare @slice varchar(max)        

        select @idx = 1        
        if len(@String)<1 or @String is null  return        

    while @idx!= 0        
    begin        
        set @idx = charindex(@Delimiter,@String)        
        if @idx!=0        
            set @slice = left(@String,@idx - 1)        
        else        
            set @slice = @String        

        if(len(@slice)>0)   
            insert into @temptable(Items) values(@slice)        

        set @String = right(@String,len(@String) - @idx)        
        if len(@String) = 0 break        
    end    
return        
end 
```

那么你可以这样做......

```
CREATE PROCEDURE MySp
    @list varchar(max)
AS 

SELECT <columns> 
  FROM <mytable> mt
 INNER JOIN dbo.split(@list,',') s ON s.Value= my.Key 
```

*注意：那里有许多拆分功能，因此您不必使用这个特定的功能。*

* * *

我在使用 SQL Server 2008 时使用的另一种方法是使用这样的表参数...

```
CREATE TYPE [dbo].[LookupTable] As Table
(
    ID Int primary key
)

CREATE PROCEDURE [dbo].[SampleProcedure]
(
    @idTable As [dbo].[LookupTable] Readonly
)
AS
BEGIN
    SELECT <columns> 
      FROM <mytable> mt
     INNER JOIN @idTable s ON s.Id= my.Key
END 
```

以这种方式将参数从 C# 传递到 SQL Server...

```
DataTable dataTable = new DataTable("SampleDataType"); 
dataTable.Columns.Add("Id", typeof(Int32)); 
foreach (var id in <mycollectionofids>)
    dataTable.Rows.Add(id); 

SqlParameter parameter = new SqlParameter(); 
parameter.ParameterName="@Id"; 
parameter.SqlDbType = System.Data.SqlDbType.Structured; 
parameter.Value = dataTable; 
command.Parameters.Add(parameter); 
```

# c++ - “你好”和{“你好”}有什么区别？

> ID：12746726
> 
> 赞同：7
> 
> 时间：2012-10-05T12:55:58.920
> 
> 标签：c++, c, pointers, initialization

在 C/C++ 中，以下两行代码有什么区别：

```
char *str1="hello";  
char *str2={"hello"}; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T13:10:59.523

根据 2011 C 标准，第 6.7.9 节初始化，第 11 段：“标量的初始化程序应为单个表达式，可选用大括号括起来……”</p>

这就对了。没有语义差异；大括号可能存在​​也可能不存在，但含义没有变化。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T13:02:20.410

仅在这种情况下样式。他们都导致同样的事情，他们都是坏的形式。你应该用过`const char * str1="hello";`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T13:10:39.650

请参阅[https://stackoverflow.com/a/3462768/153225](https://stackoverflow.com/a/3462768/153225)。

大括号是多余的。

使用“gcc -S”从以下代码生成汇编程序确认它们生成完全相同的东西（每种情况下的常数略有不同）：

```
#include <iostream>
using namespace std;

void test1() {
    const char *str1="hello1";
    cout << str1 << endl;
}

void test2() {
    const char *str2={"hello2"};
    cout << str2 << endl;
}

int main() {
    test1();
    test2();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-05T13:06:39.553

数组和“字符串”没有区别，因为字符串是字符数组。

# html - 我可以在我的主页上用粗体标记两个完整的句子吗

> ID：12746727
> 
> 赞同：-5
> 
> 时间：2012-10-05T12:56:03.183
> 
> 标签：html

为了便于阅读，我想将两句大约 50 个单词的主页内容完全加粗。我将使用粗体标签。它将如何影响用户和搜索引擎？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T12:58:01.897

**是的。如果你愿意，你可以让整个网站加粗。这对搜索引擎没有任何影响，但用户可能会感到有些困惑。就像网站对他们大喊大叫一样。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:11:49.943

在大多数情况下，使用“粗体标签”（可能意味着`b`元素）会降低文本的可读性。为了使文本更加突出，增加字体大小通常比加粗效果更好。在经典排版中，粗体通常仅用于文本中的标题和单个单词。

没有证据表明对搜索引擎有任何影响，尽管这种影响并非完全不合逻辑（搜索引擎可以`b`在页面中赋予元素内容更高的相对权重）。

# c++ - 如何在 main 中使用函数变量？

> ID：12746730
> 
> 赞同：-1
> 
> 时间：2012-10-05T12:56:10.197
> 
> 标签：c++, function, vector

嘿，我有一个包含 STL 容器向量的函数。

```
void displayInventory()
{
    vector<string> inventory;
    cout<< "You have " << inventory.size() << " items.\n";
    cout<< "\nYouritems:\n";
    for (int i= 0; i< inventory.size(); ++i)
    cout<< inventory[i] << endl;
} 
```

我想在另一种方法玩游戏中使用实际向量。

```
int playGame()
{
    inventory.push_back("sword"); //This is an error. Expression must have class.
} 
```

谁能帮我做到这一点而不必全球化矢量声明？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:59:47.437

通过引用这两个函数来传递向量并在 main? 中声明它？

```
int main()
{
  vector<string> inventory;
  playGame(inventory);
  displayInventory(inventory);
}

void displayInventory(vector<string> &inventory)
{
  inventory.push_back("string");
}

void playGame(vector<string> &inventory)
{
  inventory.push_back("A second string");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T12:57:34.160

您可以将其作为函数参数接收：

```
int playGame(vector<string>& inventory)
{
    inventory.push_back("sword");
} 
```

# java - 用于查找给定距离内所有地理点的 Android 算法

> ID：12746733
> 
> 赞同：3
> 
> 时间：2012-10-05T12:56:18.013
> 
> 标签：java, android, google-maps

在我幼稚的 Android 初期，我认为这样做的方法是遍历每个对象，检查接近度是否在 X 范围内，如果是，则包括该对象。这是通过 Google Maps 和 GeoPoints 完成的。

也就是说，我知道这可能是最慢的方式。我搜索了 Android Proxmity 算法，但并没有真正得到太多。我正在寻找的是更有效的最佳选择。

有没有我找不到的图书馆？

如果没有，我应该将这些 Location 对象加载到 SQL 中，然后从那里开始还是将它们保存在 JSONArray 中？

一旦我建立了我最好的数据结构，他最好的方法是找到位于 X 英里用户的所有位置？

我不是要求剪切和粘贴代码，而是最有效的方法。然后，我可以偶然发现代码:)

我的第一个直觉是按区域对位置进行分组，但我不确定如何执行此操作。

我可能有数以万计的数据点。

非常感谢任何有助于朝着正确方向前进的帮助。

附带说明一下，在发现我一直在使用的远程 API 是……好吧……只是完全错误并从我的邻近搜索中省略了数据点之后，我到达了这个关口。我还意识到，如果只是放在手机上的数据点上，那么我可以允许用户在没有互联网连接的情况下运行应用程序，而只有 GPS，这将是一个巨大的优势。所以，所有的挫折都伴随着机遇！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:38:02.320

答案取决于 GeoPoints 的表示：如果这些没有排序，您需要扫描所有它们（这是在线性时间内完成的，排序 wrt。距离或聚类会更昂贵）。使用`Location.distanceTo(Location)`或`Location.distanceBetween(float, float, float, float, float[])`计算距离。

如果 GeoPoints 是按 wrt 排序的。距离你的位置这个任务可以更有效地完成，但由于供应商不知道你的位置，我认为这不能完成。

如果 GeoPoints 是集群的，即如果您有一组具有某个中心和半径的集群，请选择从您的位置到集群中心的距离在限制加上半径范围内的每个集群。对于这些集群，您需要检查集群中包含的每个 GeoPoint（其中一些距离您的位置可能比限制允许的更远）。或者，您可能会接受错误并包括集群的所有点（如果半径相对较小，我会推荐这个）。

# javascript - hide() 在运行时不起作用

> ID：12746739
> 
> 赞同：0
> 
> 时间：2012-10-05T12:56:38.480
> 
> 标签：javascript, jquery, html

我编写了一个脚本，可以通过一些考虑的单选按钮隐藏或显示我的类，但它在运行时不起作用并且不会动态更改，有什么想法吗？

我的脚本：

```
 $(document).ready(function() {
        if (document.getElementById('addContent').checked) {
            $(".contentForm").show();
            $(".searchContentForm").hide();
        }
        else if (document.getElementById('editContent').checked || 
                       document.getElementById('deleteContent').checked) {
            $(".searchContentForm").show();
            $(".contentForm").hide();
        }
        else {
            $(".searchContentForm").hide();
            $(".contentForm").hide();
        }
    });​ 
```

JsFiddle 演示：http: [//jsfiddle.net/BpMed/](http://jsfiddle.net/BpMed/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:06:57.683

请试试这个：

```
function forDynamic()
{
        if (document.getElementById('addContent').checked) {
            $(".contentForm").show();
            $(".searchContentForm").hide();
        }
        else if (document.getElementById('editContent').checked || 
                       document.getElementById('deleteContent').checked) {
            $(".searchContentForm").show();
            $(".contentForm").hide();
        }
        else {
            $(".searchContentForm").hide();
            $(".contentForm").hide();
        }

} 
```

在您的 javascript 中添加上述代码。每次更新时，您只需调用**forDynamic();**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T13:11:43.483

一方面，你为什么`document.getElementById`在使用 jquery 时使用？

您还需要将 if 块包装在正在寻找要单击的那些收音机的函数的一侧。看到这个[jsfiddle](http://jsfiddle.net/q7tzw/1/)。我为每个复选框添加了一个类`changeup`，你当然可以添加任何你想要的。

```
$(".changeUp").click(function() {
    if ($('#addContent').is(':checked')) {
        $(".contentForm").show();
        $(".searchContentForm").hide();
    }
    else if ($('#editContent').is(':checked')) {
        $(".searchContentForm").show();
        $(".contentForm").hide();
    }
    else if ($('#deleteContent').is(':checked')) {
        $(".searchContentForm").show();
        $(".contentForm").hide();
    }
    else {
        $(".searchContentForm").hide();
        $(".contentForm").hide();
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T13:15:43.857

简化代码：

```
$(".searchContentForm").hide();
$(".contentForm").hide();
$('input[name=tContent]').click(function() {    
    if ($('#addContent').is(':checked')) {
        $(".contentForm").show();
        $(".searchContentForm").hide();
    }
    else if ($('#editContent').is(':checked') || 
             $('#deleteContent').is(':checked')) {
        $(".searchContentForm").show();
        $(".contentForm").hide();
    }
}); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/KVsrN/)**

​</p>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T13:10:32.617

很难用这么少的上下文说，但看起来这个函数只在 document.ready 上执行 - 初始页面加载。如果您想要更动态的东西，您需要将（[http://api.jquery.com/bind/ ）您的函数绑定到这些复选框的更改事件。](http://api.jquery.com/bind/)

非常基本的类似例子： [http ://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_onchange](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_onchange)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T14:14:14.780

我知道您已经接受了答案，但是您可以使用切换并传入一个条件 - 所以 true=show 和 false=hide - 这几乎可以消除您在 if/else 语句中的重复，只是为了显示/隐藏元素。

```
$(".searchContentForm").hide();
$(".contentForm").hide();
$('input[name=contentMng]').change(function() {   
   var adc =  $('#addContent').is(':checked'); 
   var edc = $('#editContent').is(':checked') ||  $('#deleteContent').is(':checked');
   $(".contentForm").toggle(adc);
   $(".searchContentForm").toggle(edc);
}); 
```

[http://jsfiddle.net/HLmru/](http://jsfiddle.net/HLmru/)

​</p>

# java - 重复使用原型 bean 的相同实例两次 - Spring

> ID：12746740
> 
> 赞同：2
> 
> 时间：2012-10-05T12:56:47.130
> 
> 标签：java, spring, inversion-of-control

我对 Spring 有一个问题：我需要重复使用相同的 bean 实例两次，但不能使其成为单例。

这是一个简短的ApplicationContext：

```
<bean class="a.b.c.Provider" id="defaultProvider" scope="prototype">
    <constructor-arg ref="lifecycle" />
    <constructor-arg ref="propertySetter" />
</bean>

<bean name="lifecycle" class="a.b.c.Lifecycle" scope="prototype">
        <constructor-arg ref="someParam" />
        ... and more args
</bean>

<bean id="propertySetter" class="a.b.c.PropertySetter" scope="prototype">
    <constructor-arg ref="lifecycle" />
</bean> 
```

所以，我需要在里面完全初始化`Provider`，`Lifecycle`并且`PropertySetter`这`PropertySetter`必须包含对相同的引用`Lifecycle`，就像`Provider`有一样。

当我将`lifecycle`and定义`propertySetter`为单例时，它会引起很大的问题，因为如果我创建多个`Provider`，类的所有实例都`Provider`共享相同的生命周期和属性设置器，这会破坏应用程序逻辑。

当我尝试将所有 bean 定义为原型时，生命周期 in`Provider`和 in`PropertySetter`又不相同 => 异常。

`Provider`我有一个解决方案：仅传递给`Lifecycle`并`PropertySetter`在`Provider`java 构造函数中创建（通过扩展`Provider`）。它运行良好，但仅在我的本地环境中。在生产代码中我不能扩展 3pty`Provider`类，所以我不能使用这个解决方案。

请告诉我，在这种情况下最适合做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:45:37.750

你不需要扩展`Provider`. 只需创建您自己`ProviderFactory`的将参考`lifecycle`并创建`PropertySetter`然后`Provider`：

```
public class ProviderFactory {

  public static create(Lifecycle lc) {
    return new Provider(lc, new PropertySetter(lc));
  }
} 
```

这是Spring声明：

```
<bean id="defaultProvider" scope="prototype" 
      class="a.b.c.ProviderFactory" factory-method="create">
    <constructor-arg ref="lifecycle" />
</bean> 
```

# javascript - jquery 和 angular.js 在下拉列表中不起作用

> ID：12746742
> 
> 赞同：1
> 
> 时间：2012-10-05T12:56:55.007
> 
> 标签：javascript, jquery, angularjs

我在下拉列表中使用 jquery 插件，并且还使用 Angular js 根据我选择的内容更新内容。我遇到的问题 Angular watch 不适用于 jquery 插件，删除插件使一切正常，但我无法删除它，因为我需要使用它。这是我的代码：

```
<select id="chart_csv" ng:model="report">
    <option value="cancel">Cancel</option>
    <option value="rate">Rate</option>
</select> 
```

我在下拉列表中使用了这个 jquery 插件： jquery plugin: [http://designwithpc.com/Plugins/ddSlick](http://designwithpc.com/Plugins/ddSlick)

```
jQuery(function($){
    $('#chart_csv').ddslick({
        width:300,
        selectText: "Select your csv output",
        imagePosition:"right" 
    });        
}); 
```

在角度我有以下代码：

```
$scope.$watch("report", function() {
    switch ($scope.report) {
        case "cancels":                
            //update some content              
        case "rate":       
           //update other content

        default:
           // default here
    }
}); 
```

如何让 Angular 监听由 jquery 插件触发的更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T14:07:02.820

在上面的评论中，您问我如何编写这样的指令。好吧，就像所有的 JavaScript 一样，有很多方法可以给这只猫剥皮，所以我会给你一些基础知识，你可能会想出适合你的东西，因为我不太熟悉你的插件尝试使用：

```
app.directive('myDdslick', function($parse) {
  return {
     restrict: 'A', //this is an attribute,
     link: function(scope, elem, attr, ctrl) {
         var model = $parse(attr.myDdslick);
         elem.ddslick({
            width:300,
            selectText: "Select your csv output",
            imagePosition: "right" 
         };
         elem.change(function(){
           model.assign(scope, elem.val());
         });
     }
  }
}); 
```

那么你的标记将是这样的：

```
<select id="chart_csv" my-ddslick="report">
    <option value="cancel">Cancel</option>
    <option value="rate">Rate</option>
</select> 
```

这些都没有经过测试，但这是基本思想。从表面上看，ng-model 似乎应该刚刚起作用。如果上述方法不起作用，则可能是 select 上的 change 事件没有触发，因为插件正在以编程方式设置值。

我希望这会有所帮助。

# linux - MCP2200 linux设置

> ID：12746744
> 
> 赞同：2
> 
> 时间：2012-10-05T12:57:04.240
> 
> 标签：linux, terminal

我想在 linux 中控制 MCP2200。

我找到了[文本链接](http://ww1.microchip.com/downloads/en/DeviceDoc/mcp2200_linux_driver_readme.txt)并设置了所有内容。

例如：
我输入控制台

```
GP3-1 
```

它将引脚 3 设置为 1。但我不知道在控制台中输入什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-16T10:33:18.820

要控制 mcp2200，您需要一个程序为您做这些事情。

USBtoUART 对我不起作用，也许您必须自己进行一些编码 - 但您可以使用它来了解如何连接到 mcp2200 hid。

为了控制 IO，只需设置一个 16 字节数组，填充此处描述的数据： [http ://ww1.microchip.com/downloads/en/DeviceDoc/93066A.pdf](http://ww1.microchip.com/downloads/en/DeviceDoc/93066A.pdf)

如果您想控制除 gpios 之外的更多东西，您将不得不做更多的事情 - 可以控制的不仅仅是来自 linux 的 mcp2200 的 gpios。

我对 Windows 配置工具的通信进行了一点 USB 跟踪，提取了一些信息，然后 - tadaah，您可以使用自己的 pID/vID、制造商和产品字符串。

注意：您可能需要 MikeF 所说的 HIDAPI。

首先，一些定义：

```
// NOTE: max. string length for manufacturer / product string is 63 bytes!!

// from usb trace of mcp2200 config tool
#define MCP2200_SECRET_CONFIGURE    0x01
#define MCP2200_CFG_PID_VID     0x00 
#define MCP2200_CFG_MANU        0x01
#define MCP2200_CFG_PROD        0x02 
```

...和一些变量：

```
unsigned char **mcp2200_manu_string;
unsigned char **mcp2200_prod_string; 
```

制造商字符串的输出消息如下所示

```
/* configure manufacturer string (16 x 16 bytes):
 *  output buffer:
 * #0: [01 01 00 16 03 58 00 4B 00 72 00 FF FF FF FF FF]
 *       |  |  |  |  |  |  |  |  |  |  |  +-----------+--> Always FF
 *       |  |  |  |  |  |  +-----+-----+-----------------> Always 00
 *       |  |  |  |  |  +-----+-----+--------------------> First 3 Chars of Manufacturer Name / Product Name
 *       |  |  |  |  +-----------------------------------> In #0: 0x03, After #0: 0x00
 *       |  |  |  +--------------------------------------> (Length (Manufacturer Name) * 2) + 2 (after #0: chars of manufacturer name)
 *       |  |  +-----------------------------------------> Counter 0x00 .. 0x0F
 *       |  +--------------------------------------------> MCP2200 Config Bit (MCP2200_CFG_MANU / PROD / VID_PID)
 *       +-----------------------------------------------> MCP2200_SECRET_CONFIGURE from usb trace
 */ 
```

如果你把所有这些都放在一个函数中，它可能看起来像这样：

```
void prepare_cfg_strings (char* manu, char* prod) {
    char manuStr[64];
    char prodStr[64];
    unsigned int i, k = 0;
    unsigned char tmp = 0;

    memset (manuStr, 0x00, sizeof(manuStr));
    memset (prodStr, 0x00, sizeof(prodStr));

    // allocate mcp2200_{manu,prod}_string buffer, 2-dim array with 16 x 16 chars
    if (( mcp2200_manu_string = ( unsigned char** )malloc( 16*sizeof( unsigned char* ))) == NULL ) {
        // error
    }
    if (( mcp2200_prod_string = ( unsigned char** )malloc( 16*sizeof( unsigned char* ))) == NULL ) {
        // error
    }

    for ( i = 0; i < 16; i++ )
    {
      if (( mcp2200_manu_string[i] = ( unsigned char* )malloc( 16 )) == NULL ) {
        /* error */ 
      }
      if (( mcp2200_prod_string[i] = ( unsigned char* )malloc( 16 )) == NULL ) {
        /* error */ 
      }
      /* init the rows here */
      memset (mcp2200_manu_string[i], 0x00, sizeof(&mcp2200_manu_string[i]));
      memset (mcp2200_prod_string[i], 0x00, sizeof(&mcp2200_prod_string[i]));
    }

    // manuStr holds (strlen(manuStr) * 2) + 2 in byte[0] and manufacturer string from byte[1] on
    strcpy (&manuStr[1], manu);
    manuStr[0] = ((strlen (&manuStr[1]) * 2) + 2);
    // prodStr holds (strlen(prodStr) * 2) + 2 in byte[0] and product string from byte[1] on
    strcpy (&prodStr[1], prod);
    prodStr[0] = ((strlen (&prodStr[1]) * 2) + 2);

    // build manufacturer / product strings
    for (i=0, k=0; i<16; i++, k+=4) {
        if (i==0) {
            tmp = 0x03;
        } else {
            tmp = 0x00;
        }
        // manufacturer string
        mcp2200_manu_string[i][0] = MCP2200_SECRET_CONFIGURE; 
        mcp2200_manu_string[i][1] = MCP2200_CFG_MANU;
        mcp2200_manu_string[i][2] = i; 
        mcp2200_manu_string[i][3] = manuStr[k];
        mcp2200_manu_string[i][4] = tmp;
        mcp2200_manu_string[i][5] = manuStr[k+1];
        mcp2200_manu_string[i][6] = 0x00;
        mcp2200_manu_string[i][7] = manuStr[k+2];
        mcp2200_manu_string[i][8] = 0x00;
        mcp2200_manu_string[i][9] = manuStr[k+3];
        mcp2200_manu_string[i][10] = 0x00;
        mcp2200_manu_string[i][11] = 0xff;
        mcp2200_manu_string[i][12] = 0xff;
        mcp2200_manu_string[i][13] = 0xff;
        mcp2200_manu_string[i][14] = 0xff;
        mcp2200_manu_string[i][15] = 0xff;

        // product string
        mcp2200_prod_string[i][0] = MCP2200_SECRET_CONFIGURE; 
        mcp2200_prod_string[i][1] = MCP2200_CFG_PROD;
        mcp2200_prod_string[i][2] = i; 
        mcp2200_prod_string[i][3] = prodStr[k];
        mcp2200_prod_string[i][4] = tmp;
        mcp2200_prod_string[i][5] = prodStr[k+1];
        mcp2200_prod_string[i][6] = 0x00;
        mcp2200_prod_string[i][7] = prodStr[k+2];
        mcp2200_prod_string[i][8] = 0x00;
        mcp2200_prod_string[i][9] = prodStr[k+3];
        mcp2200_prod_string[i][10] = 0x00;
        mcp2200_prod_string[i][11] = 0xff;
        mcp2200_prod_string[i][12] = 0xff;
        mcp2200_prod_string[i][13] = 0xff;
        mcp2200_prod_string[i][14] = 0xff;
        mcp2200_prod_string[i][15] = 0xff;
    }
} 
```

在主循环中调用此函数：

```
prepare_cfg_strings ("MyManufacturerName, "MyProductName"); 
```

打开你的 mcp2200 的隐藏句柄并将这些东西放在总线上：

```
// write manufacturer string configuration to usb device
for (i=0; i<16; i++) {
    hid_write (handle, mcp2200_manu_string[i], 16);
}
// write product string configuration to usb device
for (i=0; i<16; i++) {
    hid_write (handle, mcp2200_prod_string[i], 16);
} 
```

如果您想使用自己的 VendorID / ProductID 刷新 mcp2200，请配置您的消息：

```
// Microchip VID: 0x04d8
//   MCP2200 PID: 0x00df
mcp2200_pid_vid_cfg[] = 01 00 D8 04 DF 00 00 00 00 00 00 00 00 00 00 00
                         |  | +---+ +---+--------------------------------> Product ID (bytes swapped)
                         |  |     +--------------------------------------> Vendor ID (bytes swapped)
                         |  +--------------------------------------------> MCP2200 Config Bit (MCP2200_CFG_VID_PID)
                         +-----------------------------------------------> MCP2200_SECRET_CONFIGURE from usb trace 
```

并把它放在公共汽车上：

```
hid_write (handle, mcp2200_pid_vid_cfg, 16); 
```

玩得开心！

n.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:07:05.320

您将无法通过 USB tty 从控制台/终端控制 GPIO 端口... USB 转串口/UART 转换器是 MCP2200 的功能之一，要控制 GPIO，您需要通过 USB 和 HID 发送命令司机。要实现这一点，您将需要以下内容。

HIDAPI：

[https://github.com/signal11/hidapi](https://github.com/signal11/hidapi)

USB转UART：

[https://github.com/Miceuz/USBtoUART](https://github.com/Miceuz/USBtoUART)

USBtoUART 需要 HIDAPI 包中的 hid.o...所以首先从 HIDAPI 开始...

祝你好运！

迈克

ps：我对代码做了一些修改，以接受二进制格式来控制 GPIO 端口等......它在 x86 和 ARM（Raspberry Pi）上编译得很好

# php - 如何使用 Delphi 和 PHP 获得相同的 MD5？

> ID：12746747
> 
> 赞同：8
> 
> 时间：2012-10-05T12:57:10.283
> 
> 标签：php, delphi, md5, delphi-xe2, firemonkey

我将 Delphi **XE2**与 FireMonkey 一起使用。

我已经阅读了许多有关 MD5 的其他问题，但没有找到我遇到的问题的答案......我还测试了不同的脚本以从 Delphi 生成 MD5：

```
function MD5(const text: string) : string;
var
  md5 : TIdHashMessageDigest5;
begin
  md5    := TIdHashMessageDigest5.Create;
  Result := LowerCase(md5.HashStringAsHex(text, TEncoding.ANSI));
  md5.Free;
end; 
```

或者

```
function MD5(const text: String) : string;
var
  md5: IMD5;
begin
  md5:= GetMD5;
  md5.Init;
  md5.Update(TByteDynArray(RawByteString(AnsiString(text))), Length(AnsiString(text)));
  Result := LowerCase(md5.AsString);
end; 
```

两者都给了我相同的结果......这**通常**与我在 PHP 中的结果相同：

```
$md5 = md5($toencode);
$md5 = hash("md5", $toencode); 
```

`"`但是，如果我使用 Delphi或PHP，当我请求这些字符之一的 MD5 时，结果会有所不同`'` ：

我已经测试了许多**扩展的 ASCII 字符**并具有相同的 MD5 ...

所以，我不明白为什么我与它们中的少数（`"`或`'`）存在差异，并且我想知道是否有一种方法可以始终从 Delphi 生成 PHP MD5 结果，无论字符是什么。

任何的想法？

> 例如：
> 
> 与**德尔福**：
> 
> ": b15835f133ff2e27c7cb28117bfae8f4
> 
> ': 3590cb8af0bbb9e78c343b52b93773c9
> 
> 使用**PHP**：
> 
> ": 3bd864034f446da13581129bb17f9191
> 
> ': 024c94d6e03b6f67a86b952b914816c7

正式化这个问题..我找到了答案......顺便说一句，我发布它，因为其他人可能有同样的问题......

`"`并且`'`在 PHP 中被转义......所以，在 Delphi 中，我必须编码`\"`和`\'`......如果你认为我忘记了字符或者如果你想添加一些细节，请不要犹豫......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T13:00:31.197

德尔福就在这里。

```
>>> hashlib.md5('"').hexdigest()
'b15835f133ff2e27c7cb28117bfae8f4'
>>> hashlib.md5("'").hexdigest()
'3590cb8af0bbb9e78c343b52b93773c9' 
```

PHP 不应该需要那些默认转义的字符；确保将其配置为不这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T13:53:33.437

PHP`hash`函数完美地实现了MD5。

以下PHP：

```
$md5 = hash("md5", "\"");
echo "\":&nbsp;&nbsp;", $md5, "<br/>";
$md5 = hash("md5", "'");
echo "':&nbsp;&nbsp;", $md5, "<br/>";
$md5 = hash("md5", "\\\"");
echo "\\\": ", $md5, "<br/>";
$md5 = hash("md5", "\\'");
echo "\\': ", $md5, "<br/>"; 
```

导致此输出：

```
": b15835f133ff2e27c7cb28117bfae8f4
': 3590cb8af0bbb9e78c343b52b93773c9
\": 3bd864034f446da13581129bb17f9191
\'：024c94d6e03b6f67a86b952b914816c7

```

因此，前两个值是您从 Delphi 代码中获得的值，与 Ignacio 从 Python 中获得的值相同。因此，绝对没有理由相信 PHP MD5 代码有问题。底部的两个值是您的 PHP 代码返回的值。

这让我们得出结论，您提供的 Delphi 代码输入与您提供给 PHP 代码的输入不同。如果你给他们两个相同的输入，你将得到相同的输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-17T23:20:17.047

```
 uses IdHashMessageDigest;

    function MD5(const texto:string):string;
    var
      idmd5 : TIdHashMessageDigest5;
    begin
      idmd5 := TIdHashMessageDigest5.Create;
      try
        result := idmd5.HashStringAsHex(UTF8Encode(texto));
      finally
        idmd5.Free;
      end;
    end; 
```

要完全相同的使用`LowerCase(MD5('1234'));`，这与 PHP MD5 相同。

# sql - 数据驱动订阅错误 - SQL Server 2005

> ID：12746748
> 
> 赞同：0
> 
> 时间：2012-10-05T12:57:11.500
> 
> 标签：sql, sql-server-2005, reporting-services, subscription, data-driven

我正在使用 SQL Server 2005。

正在连接到：Reporting Services...

主文件夹 -> 我有我的报告：“Report1”

对于“Report1”，我可以添加订阅 -> 数据驱动订阅...

我经历了整个过程并设置了一个时间表，在每个月的第一天 12:00 运行。一切都很顺利。

但是当我再次查看数据驱动订阅的时间表时，因为报告是在 00:00 而不是 12:00 发送的。

我去订阅通知，时间已更改为 1.1.0001 (pic1) 的 00:00，当我想再次设置时间表时出现以下错误 (pic2)：

![在此处输入图像描述](../Images/9d2bc650d892ad4f3507248cf4999611.png)

![在此处输入图像描述](../Images/5fec7853596d47547d53cb03a6be099e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:41:21.377

我从 Microsoft 专家那里得到的答案是：SQL Server 需要更新。

# licensing - 编写脚本的 GPL 库：脚本应该如何获得许可？

> ID：12746752
> 
> 赞同：0
> 
> 时间：2012-10-05T12:57:27.867
> 
> 标签：licensing, gpl

这是我的问题：

假设我有 GPL 许可的库（例如 C++ 库，但任何语言都可以）。

假设该库的目的是帮助人们自动生成脚本（例如 js、octave..）或其他源代码。

这些最终脚本/代码应该如何获得许可？他们可以这样吗？

从某种意义上说：“谁拥有谁？”

希望这是一个很好的问题

谢谢你。

编辑：确实，我是这样一个库的开发人员，所以我问我应该在道德上做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T14:07:06.710

根据 GPL 常见问题解答，仅当程序将自身的一部分输出到输出中时，程序的输出才需要是 GPL。

请参阅：[http](http://www.gnu.org/licenses/gpl-faq.html#CanIUseGPLToolsForNF) ://www.gnu.org/licenses/gpl-faq.html#CanIUseGPLToolsForNF和[http://www.gnu.org/licenses/gpl-faq.html#WhatCaseIsOutputGPL](http://www.gnu.org/licenses/gpl-faq.html#WhatCaseIsOutputGPL)

# umbraco - 如何在 Umbraco 中更改 TinyMCE 语言

> ID：12746754
> 
> 赞同：1
> 
> 时间：2012-10-05T12:57:30.720
> 
> 标签：umbraco

我正在使用 Umbraco 4.9。我已经下载了一个语言包并将其安装在我的 Umbraco 的 TinyMCE 中。我想 tinyMceConfig.config 文件中有一个标签，它定义了富文本的语言，但我找不到任何东西。有人知道吗？

更新：

我试过：

```
<config key="language">en</config> 
```

但即使是默认的 en 语言选项也会使富文本编辑器消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:43:58.967

WYSIWYG 文本编辑器的语言由用户登录控制。

在用户下，选择您想用于 Umbraco 后端的语言。

开箱即用，它支持：

*   丹麦语
*   德语
*   英语（英国）
*   西班牙语
*   法语
*   意大利语
*   韩国人
*   荷兰语
*   挪威
*   瑞典语（se）
*   瑞典

如果那里没有列出您需要的语言，您有几个选择。第一个选项是创建 Umbraco 后端的全新翻译，这涉及编辑 Umbraco 翻译文件等，并且是合理大小的任务。

如果您只想翻译 TinyMCE 编辑器，您可以破解 JS 以便它使用您的翻译文件而不是默认文件。

为此，您需要重命名几个 JS 文件并更新一个。基本上，原则是您用您自己的语言替换现有语言之一，即 en 或 fr。

[our.umbraco.org](http://our.umbraco.org/forum/using/ui-questions/34525-TinyMCE-not-work)上的帖子上有关于如何执行此操作的说明

我不推荐这种方法，如果您正在寻找后端的新完整翻译，那么为什么不在[our.umbraco.org](http://our.umbraco.org)论坛上联系，看看是否有人已经完成了您正在寻找的翻译或愿意帮助。

# silverlight - Silverlight Checkbox 未选中事件已完成

> ID：12746760
> 
> 赞同：0
> 
> 时间：2012-10-05T12:57:46.810
> 
> 标签：silverlight, datagrid

我有一个 Silverlight 5 Datagrid，它在第一列中有一个复选框。当复选框未被选中时，我需要触发一个更改另一个单元格中的值的事件。我遇到的问题是，当 Unchecked 事件触发时，复选框实际上仍处于选中状态，因此另一个单元格中的值不会改变。是否有一个我可以连接的事件让我知道未检查的事件何时完成？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:20:55.287

你可以试试这个：

首先，您将在后面的代码中增加未经检查的事件，如下所示：

```
checkBox1.Unchecked +=new RoutedEventHandler(checkBox1_Unchecked2); 
```

所以，在这个活动中，你可以这样做

```
 private void checkBox1_Unchecked2(object sender, RoutedEventArgs e)
    {
        if ((bool)checkBox1.IsChecked)
            //Your code
    } 
```

默认的未选中事件将被触发，然后当它到达第二个复选框时，复选框将被标记为未选中，然后您可以随心所欲地进行操作。

希望能帮助到你。

# android - Android 在记录之间左右滑动

> ID：12746761
> 
> 赞同：3
> 
> 时间：2012-10-05T12:57:48.090
> 
> 标签：android

我拥有的许多应用程序（例如 gmail）都有一个功能，您可以左右滑动以从一条记录转到另一条记录。在 gmail 中，此导航会将您从一封电子邮件带到下一封（或上一封，具体取决于您滑动的方式）。当你到达终点时，你会得到这个蓝色光环效果，并且朝那个方向滑动不起作用。我的问题是，这个导航叫什么？是 sdk 里面的东西，还是开发者为每个应用写的？我可以在我的应用程序中使用它，我的数据存储在 sqlite 数据库中，我想以这种方式一次显示一条记录吗？它在所有 sdk 版本中都可用吗？

我会搜索它，但我不知道它叫什么，所以我真的想不出这里有什么好的搜索词。如果有人只是指出我正确的方向，我可以阅读文档并弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T13:00:43.270

您要查找的组件调用`ViewPager.`您可以在兼容性包 jar 下找到。

[android viewPager 实现](https://stackoverflow.com/questions/7244813/android-viewpager-implementation)

[http://android-developers.blogspot.co.il/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.co.il/2011/08/horizontal-view-swiping-with-viewpager.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:01:58.777

如果你想使用动画，你可以使用一个叫做 viewFlipper 的东西。

这里有一个很好的教程：[http ://www.warriorpoint.com/blog/2009/05/26/android-switching-screens-in-an-activity-with-animations-using-viewflipper/](http://www.warriorpoint.com/blog/2009/05/26/android-switching-screens-in-an-activity-with-animations-using-viewflipper/)

祝你好运 ：）

# c++ - 为什么在为数组分配新值时会崩溃？

> ID：12746768
> 
> 赞同：0
> 
> 时间：2012-10-05T12:58:08.903
> 
> 标签：c++, arrays, visual-c++, for-loop, set

> **可能重复：**
> [无法分配内存](https://stackoverflow.com/questions/12688239/could-not-allocate-memory)

我的以下代码运行良好：

```
double weight [600] [800][3];
double mean [600] [800][3];
double sd [600] [800][3];
double u_diff [600] [800][3];

for ( int i = 0; i < 600; i ++ )
{
    for ( int j = 0; j < 800; j ++ )
    {
        for ( int k=0; k < 3; m ++ )
        {
            weight [i][j][k] = 0;
            mean[i][j][k] = 0; 
            sd[i][j][k] = 6;        
        }       
    }
} 
```

但是当我把它改成这种形式时：

```
int init = 6;
int C = 3;

for ( int i = 0; i < 600; i ++ )
{
    for ( int j = 0; j < 800; j ++ )
    {
        for ( int k =0; k < 3; k ++ )
        {
            weight [i][j][k] = 1/C;
            mean[i][j][k] = rand(); 
            sd[i][j][k] = init;         
        }       
    }
} 
```

它崩溃了。我什至尝试分别为“weight”、“mean”和“sd”工作。我怀疑它可能是数据类型，更改如下：

```
double value = rand();
weight[i][j][m] = value; 
```

但错误仍然存​​在。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:00:23.757

```
mean[i][j][k] = rand(); 
```

是什么`k`？你的意思是

```
mean[i][j][m] = rand(); 
```

?

此外，`1/C`for`C=3`为 0，因为它们都是`int`s。也许你想要`1.0/C`？

**编辑和评论后回答**：

这些数组非常庞大。您应该动态分配它们。

```
double* mean = new double[600*800*3];
// in the inner loop:
    mean[ k + 800*( j + 600*i )] = rand();

// when you're done with them
delete[] mean; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:04:00.907

我也得到了第一个崩溃的版本（cygwin，4.5.3）。

问题与有限的堆栈大小有关，大约为 2 MB。

为什么它不会崩溃可能是由于优化：
由于另一个片段中的“rand”，优化器/编译器不可能
告诉数组根本没有被使用——这很可能
从第一个片段中就可见分段。

```
gcc -std=c99 tst.c -O  && ./a.exe -- produces nothing
gcc -std=c99 tst.c && ./a.exe -- segmentation fault 
```

为了解决这个错误，只需使用 malloc 从堆中分配大数组（或者通过使用相当小的数组 80x60x3 来研究限制？）

```
// tst.c
// compile and run with gcc -std=c99 tst.c -DOK=0 -DW=80 -DH=60 && ./a.exe    // ok
//               or     gcc -std=c99 tst.c -DOK=0 -DW=800 -DH=600 && ./a.exe  // crash
//               or     gcc -std=c99 tst.c -DOK=1 -DW=800 -DH=600 && ./a.exe  // ok
#include <stdlib.h>
int main()
{
#if OK
    double *weight =(double*)malloc(W*H*3*sizeof(double));      // no crash
#else
    double weight[W*H*3];   // crash when W*H is large, nocrash when W*H is small
#endif
    int z=0;
    for ( int i = 0; i < W; i ++ )
    {
        for ( int j = 0; j < H; j ++ )
        {
            for ( int m =0; m < 3; m ++ )
            {
                 weight[z++]=0;     
            }       
        }
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T13:45:38.590

我尝试在 Cygwin(1.7.15) 和 VC++ 编译器中构建以下代码，但没有发生任何崩溃。这对我来说可以。

`double weight [600] [800][3];`
`double mean [600] [800][3];`
`double sd [600] [800][3];`
`double u_diff [600] [800][3];`

`int init = 6;`
`int C = 3;`
`int main()`
`{`
`int i = 0;` `for ( i = 0; i < 600; i ++ )` `{`
`int j = 0;` `for ( j = 0; j < 800; j ++ )` `{`
`int k = 0;`
`for ( k=0; k < 3; k ++ )` `{`
`weight [i][j][k] = 1/C;` `mean[i][j][k] = rand();` `sd[i][j][k] = init;` `}` `}`
`}`
`return 0;` `}`

# php - 如何使用 PHP 将数据从 Oracle 移动到 Mysql 数据库

> ID：12746771
> 
> 赞同：0
> 
> 时间：2012-10-05T12:58:16.300
> 
> 标签：php, javascript, jquery, mysql, oracle

我需要使用 PHP 将表数据从 Oracle db 移动到 Mysql db。但是，这将是一个自动化（JQUERY）过程，每隔 5 分钟运行一次。

哪个更好：

1）将所有表数据从Oracle直接复制到Mysql中，从而不断覆盖Mysql中的所有内容？

2) 或先将数据导出到 CSV（或其他外部）文件。然后使用PHP将其导入Mysql？

我想仅使用过去 5 分钟内添加到 Oracle 数据库中的其他行来更新 Mysql 数据库。顺便说一句，PHP 将连接到 5 个以上的 Oracle 数据库。

哪种方法对 RAM 和 PROCESSOR 功耗的影响最小，但仍能保持效率？

# c# - SyncRoot 如何/为什么隐藏在队列中 ?

> ID：12746772
> 
> 赞同：5
> 
> 时间：2012-10-05T12:58:18.250
> 
> 标签：c#, c#-4.0, interface

很困惑，可能会遗漏一些简单的东西..

我有

```
var q = new Queue<object>();
lock (q.SyncRoot)
{
    ...
} 
```

我明白了

```
Queue<T> does not provide a defintion for SyncRoot blah blah... 
```

但是，定义为公共属性的`Queue<T>`工具。`ICollection``SyncRoot`

所以，首先，为什么要隐藏这个。其次，如何隐藏正在实现的接口的属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T13:02:59.260

[您可以通过显式实现](http://msdn.microsoft.com/en-us/library/aa288461%28v=vs.71%29.aspx)来隐藏该属性：

```
 object MyQueue.SyncRoot { get; set; } 
```

它是隐藏[的，因为它已被弃用](http://blogs.msdn.com/b/brada/archive/2003/09/28/50391.aspx)：

> 我们发现基于 SyncRoot 的同步 API 在大多数情况下不够灵活。API 允许线程安全地访问集合的单个成员。问题是在许多情况下您需要锁定多个操作（例如删除一个项目并添加另一个项目）。换句话说，通常是使用集合的代码想要选择（并且可以实际实现）正确的同步策略，而不是集合本身。我们发现 SyncRoot 实际上很少使用，在使用它的情况下，它实际上并没有增加太多价值。在不使用它的情况下，它只会让 ICollection 的实现者感到烦恼。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T13:02:14.043

它是“[显式接口实现](http://msdn.microsoft.com/en-us/library/ms173157.aspx)”的一个例子。

当您显式实现接口时，您*只能*通过该实例的该类型的引用来访问该方法。换句话说，如果您将其`Queue`转换为`ICollection`，您将看到同步根成员。

# c++ - 处理应该能够管理linux用户帐户的程序的用户权限的最佳实践是什么

> ID：12746777
> 
> 赞同：1
> 
> 时间：2012-10-05T12:58:48.107
> 
> 标签：c++, linux, qt

我需要在我的程序中管理 Linux 用户帐户，因此我实际上需要某种 root 访问权限，但授予该程序 root 权限并不是最好的解决方案。
我怎样才能以节省的方式管理它。至少我不知道多进程架构。对于整个“通用的东西”，我使用 Qt。只有特定于操作系统的东西是我自己的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:07:27.120

实现权限分离的“经典”解决方案如下：

*   使用 setuid-0 安装程序
*   在程序启动的早期（尽可能早地这样做，最好是“你的程序做的第一件事”）：
    *   使用 socketpair() 创建一对套接字
    *   fork() 你的进程
    *   让您的主进程使用 setuid() 删除其所有根 UID 并照常继续
*   您的子进程将执行一个循环来处理从主进程发送的命令

结果将是您的主进程没有特殊权限，但是您有一个具有根特权的子进程，该子进程通过这些套接字连接到您的主进程。这些套接字是“未命名的”，这意味着没有其他程序可以访问它们。

当然，您仍然有些容易受到攻击。即使你的代码在你到达 fork() 之前是“安全的”，攻击者仍然可以稍后进入你的主程序，并向特权进程发送命令。即使子进程擅长验证其输入并且不会受到破坏，有效命令在由攻击者发出时仍然会导致问题 - 就像在您的情况下，攻击者可能会创建新帐户，甚至可能是具有 uid 的帐户0。

# eclipse - 在eclipse中比较本地和远程文件时的相反顺序

> ID：12746779
> 
> 赞同：2
> 
> 时间：2012-10-05T12:58:54.533
> 
> 标签：eclipse, eclipse-cdt

我目前正在使用 Eclipse Juno 作为我的 C/C++ 开发 IDE，它内置了一个不错的比较工具，但是文件的本地（修改）版本显示在左侧，这让我很困扰，而不是右侧的，就像大多数差异工具一样。

我查看了 Eclipse 中与比较/补丁相关的所有首选项，但找不到任何东西。

有谁知道这个的解决方案？

谢谢，
克劳迪乌

# jquery - Fancybox 提交表单不关闭

> ID：12746780
> 
> 赞同：2
> 
> 时间：2012-10-05T12:58:57.723
> 
> 标签：jquery, fancybox

我需要寻求帮助。我一直在寻找解决方案几个小时...

我有调用和fancybox 2.1.1 ajax 框架的主文件。

我的fancybox框架上有一个表单，当表单成功时，我想关闭fancybox，所以我使用`jQuery.fancybox.close();`它并开始关闭但覆盖层没有关闭（我需要点击它）。因此，我尝试在 js 调用中添加回调，例如 afterClose () 和 beforeClose() （带有用于测试的警报消息）。只有当我单击关闭覆盖时才会显示警报。我也尝试添加`jQuery('.fancybox-overlay').hide();`，它隐藏了覆盖，但我仍然需要单击来刷新我的表单操作。

我阅读了这两个帖子并尝试了解决方案，但不起作用：[这里](http://dropthenerd.com/web-development/close-fancybox-when-you-submit-a-form-revisited)

你是我唯一的希望，因为除了双击之外的所有工作！谢谢 ！

接下来我的代码：

主页代码，弹出 JS 调用工作正常：

```
jQuery(".popup-style").fancybox ({
            'hideOnContentClick' : true,
            'width' : 710,
            'height' : 'auto',              
            'padding' : 0,
            'beforeClose': function(){                  
                if (verif == "ok") {                        
                    var NAME = document.getElementById("product" + pproductid)
                    NAME.className='bouton unstyle w310';
                    jQuery("#folderid").removeAttr("disabled");
                    jQuery("#foldername").removeAttr("disabled");
                    document.getElementById("product" + pproductid).innerHTML = '<span>Unstyle it!</span>'; 
                    document.getElementById("product" + pproductid).href ='javascript:removeproduct1(pproductid)';        
                    var myTextField = document.getElementById("compteur"+ pproductid);    
                    var precision=parseInt(myTextField.innerHTML);
                    precision =   precision+1;   
                    document.getElementById("compteur"+ pproductid).innerHTML =  precision;
                }                   
            }                       
        }); 
```

html调用fancybox

```
<a id="product<?php echo $productid ?>" class="bouton popup-style w310 fancybox.ajax" href="<?php echo $this->getUrl('arithmetic/integer/popupstyle/productid/'.$productid)?>"><span>Style it!</span></a> 
```

弹出代码：

HTML：

```
 <form id="popupform" name="popupform" method="post" >         
     <input type="submit" class="small-btn rounded" value="Style It!"/></a> 
```

JS：

```
var verif = "ko";
    var pproductid; 

            jQuery("#popupform").submit(function(){
                verif = "ok";
                pproductid = jQuery("#productid").val();    
                var pfolderid = jQuery("#folderid").val();    
                var pfoldername = jQuery("#foldername").val();     
                var psize = jQuery("#size").val();    
                var pcolor = jQuery("#color").val();     
                var pcategory = 13;//jQuery("#$category").val();      
                var psubcategory = 10;//jQuery("#$subcategory").val();
                //alert("test");
            if (jQuery(".valid-name").val() != "" || jQuery(".valid-id").val() != "select") {

                jQuery.post('http://localhost/magento-sample/index.php/arithmetic/integer/addstyle1',{
                    productid:pproductid,category:pcategory,subcategory:psubcategory,folderid:pfolderid,foldername:pfoldername,size:psize,color:pcolor
                }); 

                    jQuery.fancybox.close();                            
                    //jQuery('.fancybox-ajax').remove();
                    //jQuery('.fancybox-overlay').hide();
                    //jQuery('.fancybox-overlay').style.display=="none"();                      
                    return false;
                    jQuery.fancybox.close();    

            }                           
        }); 
```

# java - 让用户在Java中用鼠标绘制一个矩形

> ID：12746783
> 
> 赞同：0
> 
> 时间：2012-10-05T12:59:10.807
> 
> 标签：java, swing, graphics, user-input, paintcomponent

我正在编写一个程序，让用户在图像顶部的屏幕上绘制一个空心矩形。他们还可以单击图像，然后将这些单击连接起来形成多边形。

连接点可以正常工作，但是当用户拖动以绘制矩形时，之前绘制的矩形和多边形会消失。可运行代码如下；

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Frame;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.swing.BorderFactory;
import javax.swing.Box;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class ImageLabeller extends JFrame {

static boolean drawRectangle = false;
/**
 * some java stuff to get rid of warnings
 */
private static final long serialVersionUID = 1L;

/**
 * main window panel
 */
JPanel appPanel = null;

/**
 * toolbox - put all buttons here
 */
JPanel toolboxPanel = null;

/**
 * image panel - displays image and editing area
 */

static ImagePanel imagePanel;

/**
 * handles New Object button action
 */

public ImageLabeller(String imageFilename) {

    try {

        this.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent event) {
                System.out.println("Bye bye!");
                System.exit(0);
            }
        });

        // Create and set up the image panel.
        // setup main window panel
        setExtendedState(Frame.MAXIMIZED_BOTH);
        appPanel = new JPanel();
        appPanel.setLayout(new BoxLayout(appPanel, BoxLayout.Y_AXIS));
        this.setContentPane(appPanel);

        imagePanel = new ImagePanel(imageFilename);
        imagePanel.setOpaque(true); // content panes must be opaque
        imagePanel.setBorder(BorderFactory.createLineBorder(Color.green));

        // create toolbox panel
        toolboxPanel = new JPanel();
        toolboxPanel.setBorder(BorderFactory.createLineBorder(Color.black));

        JButton newPolyButton = new JButton("New object");
        newPolyButton.setMnemonic(KeyEvent.VK_N);
        // newPolyButton.setSize(50, 20);
        newPolyButton.setToolTipText("Click to add new object");
        newPolyButton.addActionListener(new DrawListener());

        JButton newSquareButton = new JButton("New Square");
        newSquareButton.setMnemonic(KeyEvent.VK_S);
        // newPolyButton.setSize(50, 20);
        newSquareButton.setEnabled(true);
        newSquareButton.setToolTipText("Click to add new square");
        newSquareButton.addActionListener(new SquareListener());

        // add all buttons to toolboxPanel
        toolboxPanel.add(newPolyButton);
        toolboxPanel.add(newSquareButton);

        // add all panels to appPanel
        appPanel.add(toolboxPanel);
        appPanel.add(imagePanel);
        // appPanel.add(Box.createRigidArea(new Dimension(0,10)));

        // display all the stuff
        this.pack();
        this.setVisible(true);
    } catch (Exception e) {
        System.err.println("Image: ");
        e.printStackTrace();
    }
}

public static void addNewPolygon() {
    imagePanel.addNewPolygon();
}

public static void addNewRectangle() {
    //imagePanel.addNewRectangle();
}

    static class DrawListener implements ActionListener {
        public void actionPerformed(ActionEvent event) {
            addNewPolygon();
        }
    }

    static class SquareListener implements ActionListener {
        public void actionPerformed(ActionEvent event) {
            drawRectangle = true;
            imagePanel.drawingRectangle = true;
            System.out.println(imagePanel.drawingRectangle);
        }
    }

    public static void main (String args []) {
        new ImageLabeller("/change to/a photo/ of your choice.jpg");
    }

} 
```

_

```
import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.util.ArrayList;

import javax.imageio.ImageIO;
import javax.swing.JPanel;

public class ImagePanel extends JPanel implements MouseListener,
    MouseMotionListener {

Rectangle currentRectangle = null;
boolean drawingRectangle = false;

/**
 * some java stuff to get rid of warnings
 */
private static final long serialVersionUID = 1L;

/**
 * image to be tagged
 */
BufferedImage image = null;

/**
 * list of current polygon's vertices
 */
ArrayList<Point> currentPolygon = null;

/**
 * list of polygons
 */
ArrayList<ArrayList<Point>> polygonsList = null;

ArrayList<Rectangle> rectangleList = null;

/**
 * extended constructor - loads image to be labelled
 * 
 * @param imageName
 *            - path to image
 * @throws Exception
 *             if error loading the image
 */
public ImagePanel(String imageName) throws Exception {

    currentPolygon = new ArrayList<Point>();
    polygonsList = new ArrayList<ArrayList<Point>>();
    rectangleList = new ArrayList<Rectangle>();

    image = ImageIO.read(new File(imageName));
    Dimension panelSize = new Dimension(image.getWidth(), image.getHeight());
    this.setSize(panelSize);
    this.setMinimumSize(panelSize);
    this.setPreferredSize(panelSize);
    this.setMaximumSize(panelSize);

    setBounds(0, 0, image.getWidth(), image.getHeight());
    addMouseListener(this);
    addMouseMotionListener(this);
    this.setVisible(true);

}

@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    System.out.println("Paint Component");
    Graphics2D g2d = (Graphics2D) g;

    // Paint image on screen
    g2d.drawImage(image, 0, 0, image.getWidth(), image.getHeight(), null);

    // display all the completed polygons
    for (ArrayList<Point> polygon : polygonsList) {
        drawPolygon(polygon);
        finishPolygon(polygon);
        System.out.println("Polly");
    }

    // Display all completed squares
    for (Rectangle r : rectangleList) {
        drawRectangle(r);
        System.out.println("Square");
    }

    // display current polygon
    if (currentPolygon != null) {
        drawPolygon(currentPolygon);
    }

    // display current square
    if (currentRectangle != null) {
        drawRectangle(currentRectangle);
    }
}

/**
 * displays a polygon without last stroke
 * 
 * @param polygon
 *            to be displayed
 */
public void drawPolygon(ArrayList<Point> polygon) {
    Graphics2D g = (Graphics2D) this.getGraphics();
    // set to red so I can see when it's being redrawn
    g.setColor(Color.RED);
    g.setStroke(new BasicStroke(3));
    for (int i = 0; i < polygon.size(); i++) {
        Point currentVertex = polygon.get(i);
        if (i != 0) {
            Point prevVertex = polygon.get(i - 1);
            g.drawLine(prevVertex.getX(), prevVertex.getY(),
                    currentVertex.getX(), currentVertex.getY());
        }
        g.fillOval(currentVertex.getX() - 5, currentVertex.getY() - 5, 10,
                10);
    }
}

public void drawRectangle(Rectangle r) {
    Graphics2D g = (Graphics2D) this.getGraphics();
    g.setStroke(new BasicStroke(3));
    g.setColor(Color.BLUE);
    g.drawLine(r.getX1(), r.getY1(), r.getX2(), r.getY1());
    g.drawLine(r.getX1(), r.getY1(), r.getX1(), r.getY2());
    g.drawLine(r.getX2(), r.getY2(), r.getX2(), r.getY1());
    g.drawLine(r.getX2(), r.getY2(), r.getX1(), r.getY2());

    System.out.println(r.getX1() + " " + r.getY1() + " " + r.getX2());
    System.out.println("Drawn rectangle");
}

/**
 * displays last stroke of the polygon (arch between the last and first
 * vertices)
 * 
 * @param polygon
 *            to be finished
 */
public void finishPolygon(ArrayList<Point> polygon) {
    // if there are less than 3 vertices than nothing to be completed
    if (polygon.size() >= 3) {
        Point firstVertex = polygon.get(0);
        Point lastVertex = polygon.get(polygon.size() - 1);

        Graphics2D g = (Graphics2D) this.getGraphics();
        g.setColor(Color.GREEN);
        g.setStroke(new BasicStroke(3));
        g.drawLine(firstVertex.getX(), firstVertex.getY(),
                lastVertex.getX(), lastVertex.getY());
    }
}

/**
 * moves current polygon to the list of polygons and makes pace for a new
 * one
 */
public void addNewPolygon() {
    // finish the current polygon if any
    if (currentPolygon != null) {
        finishPolygon(currentPolygon);
        polygonsList.add(currentPolygon);
    }

    currentPolygon = new ArrayList<Point>();
}

public void mouseClicked(MouseEvent e) {

    if (!drawingRectangle) {
        int x = e.getX();
        int y = e.getY();

        // check if the cursor is within image area
        if (x > image.getWidth() || y > image.getHeight()) {
            // if not do nothing
            return;
        }

        Graphics2D g = (Graphics2D) this.getGraphics();

        // if the left button than we will add a vertex to poly
        if (e.getButton() == MouseEvent.BUTTON1) {
            g.setColor(Color.GREEN);
            if (currentPolygon.size() != 0) {
                Point lastVertex = currentPolygon
                        .get(currentPolygon.size() - 1);

                g.setStroke(new BasicStroke(3));
                g.drawLine(lastVertex.getX(), lastVertex.getY(), x, y);
            }
            g.fillOval(x - 5, y - 5, 10, 10);

            currentPolygon.add(new Point(x, y));
            System.out.println(x + " " + y + " polygon point");
        }
    }
}

public void mouseEntered(MouseEvent arg0) {
}

public void mouseExited(MouseEvent arg0) {
}

public void mousePressed(MouseEvent arg0) {
    if (drawingRectangle) {
        currentRectangle = new Rectangle(arg0.getX(), arg0.getY(),
                arg0.getX(), arg0.getY(), Color.BLACK);

    }
}

public void mouseReleased(MouseEvent arg0) {
    if (drawingRectangle) {
        rectangleList.add(new Rectangle(currentRectangle.getX1(),
                currentRectangle.getY1(), arg0.getX(), arg0.getY(),
                currentRectangle.getColor()));

        System.out.println(currentRectangle.getX1() + " "
                + currentRectangle.getY1() + " " + arg0.getX() + " "
                + arg0.getY() + " rectangle point");

        // unnecessary when mouseDragged calls paintComponent directly?
        drawRectangle(new Rectangle(currentRectangle.getX1(),
                currentRectangle.getY1(), arg0.getX(), arg0.getY(),
                currentRectangle.getColor()));

        currentRectangle = null;
        drawingRectangle = false;

    }
}

public void mouseDragged(MouseEvent arg0) {

    if (drawingRectangle) {
        currentRectangle = new Rectangle(currentRectangle.getX1(),
                currentRectangle.getY1(), arg0.getX(), arg0.getY(),
                currentRectangle.getColor());

        System.out.println(currentRectangle.getX1() + " "
                + currentRectangle.getY1() + " " + arg0.getX() + " "
                + arg0.getX() + " " + "Dragging");
        repaint();

    // It works better using this instead on repaint()

//           Graphics g = this.getGraphics();
//           paintComponent(g);
    }

}

public void mouseMoved(MouseEvent arg0) {
    // TODO Auto-generated method stub

}

} 
```

-

```
public class Point {
private int x = 0;
private int y = 0;

public Point() {
}

public Point(int x, int y) {
    this.x = x;
    this.y = y;
}

public int getX() {
    return x;
}

public void setX(int x) {
    this.x = x;
}

public int getY() {
    return y;
}

public void setY(int y) {
    this.y = y;
}

} 
```

-

```
import java.awt.Color;
import java.awt.Graphics2D;

public class Rectangle {

// Initialize variables
private int x1; // x coordinate of first endpoint
private int y1; // y coordinate of first endpoint
private int x2; // x coordinate of second endpoint
private int y2; // y coordinate of second endpoint
private Color colour; // colour of the shape

// A no-parameter constructor that sets all the coordinates of the shape to
// 0 and the
// colour to Color.BLACK
public Rectangle() {
    x1 = 0;
    y1 = 0;
    x2 = 0;
    y2 = 0;
    colour = Color.BLACK;
}

// A constructor that initializes the coordinates and colour to the values
// of the
// parameters supplied.
public Rectangle(int x1, int y1, int x2, int y2, Color col) {
    this.x1 = x1;
    this.y1 = y1;
    this.x2 = x2;
    this.y2 = y2;
    this.colour = col;
}

public void setX1(int x1) {
    this.x1 = x1;
}

public void setY1(int y1) {
    this.y1 = y1;
}

public void setX2(int x2) {
    this.x2 = x2;
}

public void setY2(int y2) {
    this.y2 = y2;
}

public void setColor(Color colour) {
    this.colour = colour;
}

public int getX1() {
    return this.x1;
}

public int getY1() {
    return this.y1;
}

public int getX2() {
    return this.x2;
}

public int getY2() {
    return this.y2;
}

public Color getColor() {
    return this.colour;
}

public int getWidth() {
    return (Math.abs(x2 - x1));
}

public int getHeight() {
    return (Math.abs(y2 - y1));
}

public int getUpperLeftX() {
    return (Math.min(x1, x2));
}

public int getUpperLeftY() {
    return (Math.min(y1, y2));
}
} 
```

抱歉代码量大，我尽量删减。

单击图像绘制点，这些点连接起来创建线。当用户单击“新建对象”按钮时，第一个点和最后一个点被连接以创建一个多边形。这一切都很好，但是如果您单击“新正方形”并在图像上拖动，则所有先前的形状都会随着鼠标的移动而闪烁，并在释放鼠标按钮时消失。如果再次单击“新方块”（到目前为止，我的编码很差）并绘制了另一个方块，则可以看到“消失”的形状再次闪烁，但一旦松开鼠标就会消失。我在 mouseDragged(...) 事件中调用 repaint()，我认为这就是所有必要的。当我改变时，它实际上（几乎）按要求工作

```
repaint(); 
```

为了

```
Graphics g = this.getGraphics();
paintComponent(g); 
```

但是我读过的每一本书和每一篇文章都说我永远不应该自己调用paintComponent。然而，调用paintComponent 的一个问题是背景图像往往会闪烁很多。如果 repaint() 调用paintComponent，为什么它们会导致不同的结果？

我也不明白为什么，在 mouseDragged 事件中使用 repaint() 时，我必须，我还必须在 mouseReleased 中调用 drawRectangle(...) 才能看到正方形，但是在使用paintComponent 时，我没有吨？

非常感谢任何建议或指示，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:17:50.660

在您的 drawRectangle 和 drawPolygon 中，您重新获得了一个图形对象，但您是从 paintComponent 调用它们。这就是导致奇怪行为的原因，您应该将图形从 painComponent 传递给这些方法。

不过，我看到了其他奇怪的行为，比如多边形保持绿色，直到我画完一个正方形，然后它们变成红色，但其中一条线保持绿色并最终消失。我没有过多考虑。

此外，awt 支持多边形绘制和点和矩形，您有什么理由选择为这些创建自己的类吗？

```
package test;
import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.util.ArrayList;

import javax.imageio.ImageIO;
import javax.swing.JPanel;

public class ImagePanel extends JPanel implements MouseListener,
    MouseMotionListener {

Rectangle currentRectangle = null;
boolean drawingRectangle = false;

/**
 * some java stuff to get rid of warnings
 */
private static final long serialVersionUID = 1L;

/**
 * image to be tagged
 */
BufferedImage image = null;

/**
 * list of current polygon's vertices
 */
ArrayList<Point> currentPolygon = null;

/**
 * list of polygons
 */
ArrayList<ArrayList<Point>> polygonsList = null;

ArrayList<Rectangle> rectangleList = null;

/**
 * extended constructor - loads image to be labelled
 * 
 * @param imageName
 *            - path to image
 * @throws Exception
 *             if error loading the image
 */
public ImagePanel(String imageName) throws Exception {

    currentPolygon = new ArrayList<Point>();
    polygonsList = new ArrayList<ArrayList<Point>>();
    rectangleList = new ArrayList<Rectangle>();

    image = ImageIO.read(new File(imageName));
    Dimension panelSize = new Dimension(image.getWidth(), image.getHeight());
    this.setSize(panelSize);
    this.setMinimumSize(panelSize);
    this.setPreferredSize(panelSize);
    this.setMaximumSize(panelSize);

    setBounds(0, 0, image.getWidth(), image.getHeight());
    addMouseListener(this);
    addMouseMotionListener(this);
    this.setVisible(true);

}

@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    System.out.println("Paint Component");
    Graphics2D g2d = (Graphics2D) g;

    // Paint image on screen
    g2d.drawImage(image, 0, 0, image.getWidth(), image.getHeight(), null);

    // display all the completed polygons
    for (ArrayList<Point> polygon : polygonsList) {
        drawPolygon(polygon,g);
        finishPolygon(polygon);
        System.out.println("Polly");
    }

    // Display all completed squares
    for (Rectangle r : rectangleList) {
        drawRectangle(r,g);
        System.out.println("Square");
    }

    // display current polygon
    if (currentPolygon != null) {
        drawPolygon(currentPolygon, g);
    }

    // display current square
    if (currentRectangle != null) {
        drawRectangle(currentRectangle, g);
    }
}

/**
 * displays a polygon without last stroke
 * 
 * @param polygon
 *            to be displayed
 */
public void drawPolygon(ArrayList<Point> polygon,  Graphics gr) {
    Graphics2D g = null;
    if (gr instanceof Graphics2D) {
        g = (Graphics2D) gr;
    }
    else{ return; }
    // set to red so I can see when it's being redrawn
    g.setColor(Color.RED);
    g.setStroke(new BasicStroke(3));
    for (int i = 0; i < polygon.size(); i++) {
        Point currentVertex = polygon.get(i);
        if (i != 0) {
            Point prevVertex = polygon.get(i - 1);
            g.drawLine(prevVertex.getX(), prevVertex.getY(),
                    currentVertex.getX(), currentVertex.getY());
        }
        g.fillOval(currentVertex.getX() - 5, currentVertex.getY() - 5, 10,
                10);
    }
}

public void drawRectangle(Rectangle r, Graphics gr) {
    Graphics2D g = null;
    if (gr instanceof Graphics2D) {
        g = (Graphics2D) gr;
    }
    else{ return; }
    g.setStroke(new BasicStroke(3));
    g.setColor(Color.BLUE);
    g.drawLine(r.getX1(), r.getY1(), r.getX2(), r.getY1());
    g.drawLine(r.getX1(), r.getY1(), r.getX1(), r.getY2());
    g.drawLine(r.getX2(), r.getY2(), r.getX2(), r.getY1());
    g.drawLine(r.getX2(), r.getY2(), r.getX1(), r.getY2());

    System.out.println(r.getX1() + " " + r.getY1() + " " + r.getX2());
    System.out.println("Drawn rectangle");
}

/**
 * displays last stroke of the polygon (arch between the last and first
 * vertices)
 * 
 * @param polygon
 *            to be finished
 */
public void finishPolygon(ArrayList<Point> polygon) {
    // if there are less than 3 vertices than nothing to be completed
    if (polygon.size() >= 3) {
        Point firstVertex = polygon.get(0);
        Point lastVertex = polygon.get(polygon.size() - 1);

        Graphics2D g = (Graphics2D) this.getGraphics();
        g.setColor(Color.GREEN);
        g.setStroke(new BasicStroke(3));
        g.drawLine(firstVertex.getX(), firstVertex.getY(),
                lastVertex.getX(), lastVertex.getY());
    }
}

/**
 * moves current polygon to the list of polygons and makes pace for a new
 * one
 */
public void addNewPolygon() {
    // finish the current polygon if any
    if (currentPolygon != null) {
        finishPolygon(currentPolygon);
        polygonsList.add(currentPolygon);
    }

    currentPolygon = new ArrayList<Point>();
}

public void mouseClicked(MouseEvent e) {

    if (!drawingRectangle) {
        int x = e.getX();
        int y = e.getY();

        // check if the cursor is within image area
        if (x > image.getWidth() || y > image.getHeight()) {
            // if not do nothing
            return;
        }

        Graphics2D g = (Graphics2D) this.getGraphics();

        // if the left button than we will add a vertex to poly
        if (e.getButton() == MouseEvent.BUTTON1) {
            g.setColor(Color.GREEN);
            if (currentPolygon.size() != 0) {
                Point lastVertex = currentPolygon
                        .get(currentPolygon.size() - 1);

                g.setStroke(new BasicStroke(3));
                g.drawLine(lastVertex.getX(), lastVertex.getY(), x, y);
            }
            g.fillOval(x - 5, y - 5, 10, 10);

            currentPolygon.add(new Point(x, y));
            System.out.println(x + " " + y + " polygon point");
        }
    }
}

public void mouseEntered(MouseEvent arg0) {
}

public void mouseExited(MouseEvent arg0) {
}

public void mousePressed(MouseEvent arg0) {
    if (drawingRectangle) {
        currentRectangle = new Rectangle(arg0.getX(), arg0.getY(),
                arg0.getX(), arg0.getY(), Color.BLACK);

    }
}

public void mouseReleased(MouseEvent arg0) {
    if (drawingRectangle) {
        rectangleList.add(new Rectangle(currentRectangle.getX1(),
                currentRectangle.getY1(), arg0.getX(), arg0.getY(),
                currentRectangle.getColor()));

        System.out.println(currentRectangle.getX1() + " "
                + currentRectangle.getY1() + " " + arg0.getX() + " "
                + arg0.getY() + " rectangle point");

        // unnecessary when mouseDragged calls paintComponent directly?
        /*drawRectangle(new Rectangle(currentRectangle.getX1(),
                currentRectangle.getY1(), arg0.getX(), arg0.getY(),
                currentRectangle.getColor()));*/

        currentRectangle = null;
        drawingRectangle = false;

    }
}

public void mouseDragged(MouseEvent arg0) {

    if (drawingRectangle) {
        currentRectangle = new Rectangle(currentRectangle.getX1(),
                currentRectangle.getY1(), arg0.getX(), arg0.getY(),
                currentRectangle.getColor());

        System.out.println(currentRectangle.getX1() + " "
                + currentRectangle.getY1() + " " + arg0.getX() + " "
                + arg0.getX() + " " + "Dragging");
        repaint();

    // It works better using this instead on repaint()

//           Graphics g = this.getGraphics();
//           paintComponent(g);
    }

}

public void mouseMoved(MouseEvent arg0) {
    // TODO Auto-generated method stub

}

} 
```

# terminology - 申请通知软件

> ID：12746789
> 
> 赞同：0
> 
> 时间：2012-10-05T12:59:30.730
> 
> 标签：terminology

每当更新可用时，应用程序显示可用更新消息的名称是什么？

它被称为网络服务吗？

比如我安装了杀毒软件（avast）；有时会出现一个小的弹出消息，表明有可用的更新。

我对此有非常模糊的想法，它必须定期联系服务器以检查新更新是否可用。

我不知道应用程序名称是什么，所以我无法搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:07:02.227

这些是依赖于供应商的解决方案。它通常*不是*检查更新的单独软件。他们所做的只是查询一个回复“当前”版本的网络服务。至少只要谈论MS-Windows。Linux 环境中存在更优雅、更高效的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:02:36.857

它被称为自动更新软件功能。它通常是软件本身的一部分 - 如果您想查看一些关于在您的应用程序中实现它们的 API，请[在此处了解更多信息](http://www.sciensoft.com/products/updateshield/updatecheck-api/)。[如果您进行 Windows 开发， WinSparkle](http://winsparkle.org/)也是您可以研究的。

# sql - 更新声明澄清

> ID：12746790
> 
> 赞同：0
> 
> 时间：2012-10-05T12:59:32.523
> 
> 标签：sql, sql-server-2008-r2

我对“更新”数据库非常陌生，因为我只将查询写为选择语句。

我有一条记录需要从数据库中删除或更改。我该怎么做呢？让我们先更新一列。

我想更新“客户”表和“TicketNum”列是“123”的“SNumber”列现在该记录的“SNumber”是空白的，我希望它是“115”

我刚在想：

```
update Customer
set snumber = '115'
where ticketnum = '123' 
```

显然，我不想运行这个查询，因为担心会弄乱数据库。

第二部分是如何将记录一起删除？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:06:52.750

如果您是新手，我建议您使用 tSQL 搜索 CRUD 操作。例如：

*   [MSDN 上的更新](http://msdn.microsoft.com/es-es/library/ms174122%28v=sql.105%29.aspx)
*   [在 MSDN 上删除](http://msdn.microsoft.com/es-es/library/ms174018%28v=sql.105%29.aspx)

至于你的问题。你不会用那个 UPDATE 子句弄乱数据库，这是正确的。

要删除该行，只需使用：

```
DELETE FROM Customer
 WHERE ticketnum = '123' 
```

`ROLLBACK`，正如其他答案所建议的那样，有助于回滚不正确或错误或仅仅因为某些数据不正确的操作（事务）。请参阅[MSDN 了解 ROLLBACK sintax](http://msdn.microsoft.com/es-es/library/ms181299%28v=sql.105%29.aspx)

**[这与TRANSACTIONS](http://msdn.microsoft.com/es-es/library/ms174377.aspx)**概念密切相关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T13:05:51.923

那是对的。

请记住，如果需要撤消它，您可以更新然后发出 ROLLBACk。

删除类似：

```
delete customer where ticketnum = 123; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:12:28.043

SQL中更新的一般形式是UPDATE table SET column = expression WHERE predicates;

一个例子是 UPDATE 供应商 SET description = 'gorilla glass', product = 'screens' WHERE name = 'corning';

正如其他海报所指出的，您的 SQL 更新是正确的。

# android - 使用 TwoLineListItem 组件

> ID：12746792
> 
> 赞同：0
> 
> 时间：2012-10-05T12:59:39.560
> 
> 标签：android, android-layout, android-listview, android-view

我必须创建一个列表，其列表项有 2 行文本。我开始构建一个自定义列表项，但后来我发现了该`TwoLineListItem`组件。我写了这段代码：

```
pageFilterResultView=new TwoLineListItem(containerActivity);
pageFilterResultView.getText1().setText("Test"); 
```

但是，`getText1`返回 null，并且第二行抛出一个`NullPointerException`. 所以我认为我需要使用膨胀布局而不是构造函数。TwoLineListItem[文档](http://developer.android.com/reference/android/widget/TwoLineListItem.html)指定我可以将`android.R.layout.two_line_list_item`资源用于布局，因此我将代码更改为：

```
LayoutInflater inflater=(LayoutInflater)containerActivity.
        getSystemService(Context.LAYOUT_INFLATER_SERVICE);
pageFilterResultView=(TwoLineListItem)inflater.inflate(android.R.
        layout.two_line_list_item,null);
pageFilterResultView.getText1().setText("Test"); 
```

但是，这会抛出 a ，`ClassCastException`因为布局实际上是 a `LinearLayout`。`TwoLineListItem`继承自`RelativeLayout`，因此我什至无法将布局转换为层次结构中的更高级别。

那么问题来了：如何`TwoLineListItem`正确使用？我必须为它创建自己的自定义布局吗？如果是这样，如果我仍然必须自己完成创建列表项的所有工作，那么这个组件的意义何在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:46:45.137

> 如何正确使用 TwoLineListItem？

该小部件是您必须提供的`TwoLineListItem`两个以上的外观。`TextViews`要使用`TwoLineListItem`in a`ListView`的行，您需要一个行布局，其中您的`TwoLineListItem`小部件具有两个（至少）`TextView`具有特定 id（`android.R.id.text1`和`android.R.id.text2`）的子级。像这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<TwoLineListItem xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@android:id/text1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@android:id/text2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:layout_below="@android:id/text1"/>

</TwoLineListItem> 
```

然后你可以`getView()`像你一样在方法中使用它：

```
pageFilterResultView=(TwoLineListItem)inflater.inflate(R.layout.the_layout_file_above,null);
pageFilterResultView.getText1().setText("Test"); 
```

当然，您可以使用包含的布局文件作为子项`TwoLineListItem`（只要您有两个`TextViews`具有所需 id 的文件）：

```
<?xml version="1.0" encoding="utf-8"?>
<TwoLineListItem xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <!-- the android version of the two line layout -->
    <include layout="@android:layout/two_line_list_item" />

</TwoLineListItem> 
```

但这只会增加布局深度，应该避免。

> 如果是这样，如果我仍然必须自己完成创建列表项的所有工作，那么这个组件的意义何在？

从您不能以编程方式使用这个小部件的事实来看，我也没有看到对这个组件的需求。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T13:07:26.063

将您的布​​局代码放入带有 ClassCastException 的 try catch 块中，它会正常工作我的朋友。......

# c++ - 在 C++ 中访问类变量

> ID：12746798
> 
> 赞同：-2
> 
> 时间：2012-10-05T12:59:57.240
> 
> 标签：c++, class, pointers, constants

> **可能重复：**
> [在 C++ 中访问类 Veriables](https://stackoverflow.com/questions/12750868/accessing-class-veriables-in-c)

嗨，我在 C++ 中有以下类层次结构

```
Class1 {  
    vector<Class2> vecClass2;  
}  

Class2 {  
    private:  
        const Class1 * ptrClass1;  
        vector<Class3> vecClass3;  
    public:  
        Class2(const Class1 * ptrClass1);  
        int intC2publicVar;  
        string strC2publicVar;  
}  

Class3 {  
    private:  
        const Class2 * ptrClass2;  
        vector<Class4> vecClass4;  
    public:  
        Class3(const Class2 * ptrClass2);  
}  

Class4 {  
    private:  
        const Class3 * ptrClass3;  
        vector<Class5> vecClass5;  
    public:  
        Class4(const Class3 * ptrClass3);  
        void class4Method() const;  
} 
```

在 class4Method() 我正在做这样的事情：

```
void Class4::class4Method() const {  
    const Class2 * pC2 = ptrClass3->ptrClass2;  
    int valClass2 = pC2->intC2publicVar;  
    //Above value is giving wrong value, I have no idea from where it is fetching the wrong value  

    string strVatClass2 = pC2->strC2publicVar;  
    //Above line of code cause run time termination of code and programs stops as soon as this line executes.  

    const Class2 c2 = * pC2;  
    //Above line of code cause run time termination of code and programs stops as soon as this line executes.  

} 
```

我不知道为什么这发生在 Class4 的 class4Method() 中。请帮我解决这个问题。我的整个项目都因为这个问题而受到打击，如果不解决它，我就无法继续前进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:39:42.110

我是否正确假设`const Class`*N-1* `* ptrClass`*N-1*成员是指向当前实例的“所有者”的指针，并且它们指向的实例存在于`Class`*N-2*的向量中？

在这种情况下，您只是忘记了向量具有在内存中移动其内容的习惯，因为它们重新分配以容纳新插入的值。不要将指向对象的指针存储在向量中，而是将对象存储在列表中（并获取指向列表中实例的指针，因为它仍然被复制）或存储指针向量（并确保删除析构函数中的元素）。

# python - 我的 Nginx 配置有什么问题？

> ID：12746799
> 
> 赞同：0
> 
> 时间：2012-10-05T13:00:02.137
> 
> 标签：python, web, nginx

我正在尝试配置 Nginx 以便能够通过 CGI 执行 Python 脚本。

如果我指向：[http](http://myserver.org/scripts/ajaxpost.py) ://myserver.org/scripts/ajaxpost.py并且在我的配置中我使用：

```
location ~ \.py$ {
          root   html;
          fastcgi_pass 127.0.0.1:9001;
          fastcgi_param  SCRIPT_FILENAME  /usr/share/nginx/html/scripts/ajaxpost.py;
          include /etc/nginx/fastcgi_params;
      } 
```

它完美地工作。但是，我希望配置能够执行脚本文件夹中的任何 Python 脚本，但指向[http://myserver.org/scripts/ajaxpost.py](http://myserver.org/scripts/ajaxpost.py)会给我一个 403 错误。

```
location ~ \.py$ {
          root   html;
          fastcgi_pass 127.0.0.1:9001;
          fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
          include /etc/nginx/fastcgi_params;
      } 
```

配置有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:25:06.020

也许你需要`/usr/share/nginx/html/scripts$fastcgi_script_name`？

# c++ - 键盘焦点：寻找通用策略

> ID：12746800
> 
> 赞同：0
> 
> 时间：2012-10-05T13:00:06.867
> 
> 标签：c++, winapi, keyboard, c++builder

我的应用程序有一个很大的图形区域，在侧面板中有一些控件（滑块、按钮、文本编辑控件）。图形区域理解一些键盘命令。

我的问题是，当侧面板中的控件处于焦点时，主图形区域将不会收到任何键盘命令，因此这会使用户感到困惑。但是，对于某些控件，这是有意的，例如文本编辑控件。

我想要的是尽早自动返回图形区域的焦点（我称之为“贪婪”焦点） - 例如，当文本编辑完成时（回车键），或者当用户从组合框。

我正在寻找一种干净而强大的策略来处理这个问题，无论是使用 Windows API 还是 Borland Vcl。

如果您想分享您的想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:31:11.647

我还没有完全解决这个问题，但是在表单级别拦截的一个非常有用的消息是`CM_DIALOGKEY`（仅限 Borland Vcl）。它为通常用于在 UI 中导航的每个键发送。也就是说，光标键、tab 和 shift-tab、Enter 和其他可能。

我添加了一个事件处理程序，用于`CM_DIALOGKEY`将焦点返回到图形区域并将按键转发到该组件。这样用户仍然可以通过键盘控制 UI 元素（对于文本输入很重要），但光标键由图形区域处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T10:21:24.043

我知道你的意思我在一些 BIG 应用程序 lice CAD/CAM 上遇到了类似的问题......

我的解决方案简单、强大，而且我使用了多年。

1.该 gfx 区域的所有击键处理

*   必须在该区域所在的表格事件中完成
*   不在面板中，无论是油漆盒...

2.create unfocus函数（最好是form的成员，但不是必须的）

*   此功能将失去任何 VCL 项目的焦点
*   所以焦点会形成自己，这就是你想要的
*   我正在使用这个：

    ```
    //---------------------------------------------------------------------------
    void main_unfocus()
        {          
        Main->bt_unfocus->Visible=true;
        Main->bt_unfocus->SetFocus();
        Main->bt_unfocus->Visible=false;
        }
    //--------------------------------------------------------------------------- 
    ```

*   Main 是表单指针

*   bt_unfocus 是按钮（可以是任何可聚焦的 VCL 组件）
*   我通常将此按钮放在 App 的左上角，并将其大小设置为 2x2 像素
*   一开始是不可见的
*   这个想法是把焦点放在它上面（但首先取消隐藏它所以不会抛出异常）
*   然后隐藏它使其失去焦点
*   在 BCB5 和 BDS2006 中运行良好（没有与任何其他 IDE 一起使用）
*   如您所见，大多数情况下该组件是不可见的

4.现在何时调用 main_unfocus ？

*   当您使用鼠标从 gfx 区域的外部到内部时（OnMouseMove 事件）
*   或者当你点击它时
*   您也可以将其与记住焦点是否在 gfx 区域相结合
*   这可以通过 OnExit 之类的事件来完成...
*   或者当您在焦点位于编辑框内时按 Esc ...\
*   我相信您掌握了这个想法并根据您的需要进行调整

希望能帮助到你

# java - 什么是 JVM 指令？

> ID：12746801
> 
> 赞同：7
> 
> 时间：2012-10-05T13:00:07.833
> 
> 标签：java, jvm

所以我正在和一个运行面试的人（你的标准人力资源经理）谈论他们在面试中真正寻找的东西，他提到了一些关于测试 JVM 指令知识的事情（以及许多其他事情）。

我不知道那些是什么，但我以为他在谈论字节码指令。

我做了一些研究，似乎在“JVM 指令”上找不到任何东西，我发现的只是对字节码指令的引用，我已经知道了。

例如：[http](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html) ://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html起初似乎在谈论 JVM 指令，但这似乎是我所知道的字节码指令。

所以我的问题是，是否存在与字节码指令分开的 JVM 指令之类的东西，或者它们是一回事吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T13:03:59.620

> 所以我的问题是，是否存在与字节码指令分开的 JVM 指令之类的东西，或者它们是相同的？

他们是一样的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T13:01:50.603

他很可能只是在谈论字节码指令，因为那是 JVM 运行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:19:29.550

我所知道的是 ByteCode 是一种由 JVM 执行的抽象机器语言。制作字节码的一些指令是**dadd**（两个数字相加）、**ddiv**（两个数字相除）、**dload**等。它们属于类型转换、算术和逻辑等特定组。所以我猜它们是***相同***的。这些指令组成了一个 java 字节码。字节码指令列表[http://www.stackframe.com/documents/bytecode.html](http://www.stackframe.com/documents/bytecode.html)

# python - sys.maxint 和 xmlrpclib.MAXINT

> ID：12746802
> 
> 赞同：0
> 
> 时间：2012-10-05T13:00:10.537
> 
> 标签：python, xmlrpclib

我想 xmlrpclib 有一个单独的 MAXINT 而不是 sys. 谁能向我解释为什么？

```
>>> print xmlrpclib.MAXINT
2147483647
>>> print sys.maxint
2147483647 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:01:50.807

因为可以支持的最大整数`xmlrpclib`可以不同于系统可以支持的最大整数。

```
>>> sys.maxint
9223372036854775807
>>> xmlrpclib.MAXINT
2147483647L 
```

# javascript - 制作javascript动画div并插入文本

> ID：12746814
> 
> 赞同：0
> 
> 时间：2012-10-05T13:01:00.740
> 
> 标签：javascript, html, css

我有这个盒子：

`<div class="message_box_red" id="commentForm_error_name" style="width: 409px; height: 0px; border: 0; margin: 0; padding: 0;"></div>`

我想让它动画成这种风格：`"border: 2px solid; margin: 1px; padding: 7px; width: 409px;"`

然后在其中插入一些文本，比如`this is a test message`或其他东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:07:11.770

试试这个[演示](http://jsbin.com/ewuyup/2)

**jQuery :**

```
$(".message_box_red").animate({

    "border":"2px solid",
    "margin":"1px",
    "padding":"7px",
    "width":" 409px",
    "height":"40px"

  },2000,function(){$(this).text("this is a test message")}); 
```

[**更新的演示**](http://jsbin.com/ewuyup/11)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:16:19.053

试试这个，它使用通过 java sscript 更改 CSS 类触发的 CSS3 过渡：

```
<html>
<head>

<style>

    .message_box_red {

        width: 409px; 
        height: 50px; 
        border: 0; 
        margin: 0; 
        padding: 0;
        cursor: pointer;
        background: red;

        -webkit-transition: all 1s ease-out;
        -moz-transition: all 1s ease-out;
        -ms-transition: all 1s ease-out;
        -o-transition: all 1s ease-out;
        transition: all 1s ease-out;

    }
    .message_box_red.animate {

        border: 2px solid; 
        margin: 1px; 
        padding: 7px; 
        width: 409px;
        height: 100px;
        background: blue;
        color: #fff;

    }

</style>

<script>

    function change_class(did, content) {

        var div_change = document.getElementById(did);
        div_change.setAttribute("class", "message_box_red animate");
        div_change.innerHTML = content;

    }

</script>

</head>
<body>
    Click on DIV!
    <div class="message_box_red" id="commentForm_error_name" onclick="change_class('commentForm_error_name','this is the future content of DIV...');">

    </div>

</body>
</html> 
```

**现场示例：**
[http ://simplestudio.rs/yard/div_animate/chng_color.html](http://simplestudio.rs/yard/div_animate/chng_color.html)

# c# - 如何让数据字段函数从 EPPlus 中的总和变为计数？

> ID：12746815
> 
> 赞同：3
> 
> 时间：2012-10-05T13:01:01.240
> 
> 标签：c#, winforms, excel, epplus

在我的数据透视表中，我有一个数据字段，我想将其汇总为计数。我尝试将 subtotalfunction 属性更改为 count，但它仍然显示总和。有人可以给我一个例子来说明我如何做到这一点吗？

换句话说，谁能给我一个透视表的例子，你可以在其中看到计数而不是总和。

我正在使用 EPPlus 最新版本。3.1.1

非常感谢 ：）

编辑：这就是我正在尝试的。

```
 var wsPivot = package.Workbook.Worksheets.Add("Pivot");
                    var pivotTable = wsPivot.PivotTables.Add(wsPivot.Cells["A55"], dataRange, "Table");
                    pivotTable.MultipleFieldFilters = true;
                    pivotTable.RowGrandTotals = true;
                    pivotTable.ColumGrandTotals = true;
                    pivotTable.Compact = true;
                    pivotTable.CompactData = true;
                    pivotTable.GridDropZones = false;
                    pivotTable.Outline = false;
                    pivotTable.OutlineData = false;
                    pivotTable.ShowError = true;
                    pivotTable.ErrorCaption = "[error]";
                    pivotTable.ShowHeaders = true;
                    pivotTable.UseAutoFormatting = true;
                    pivotTable.ApplyWidthHeightFormats = true;
                    pivotTable.ShowDrill = true;
                    pivotTable.FirstDataCol = 3;
                    pivotTable.RowHeaderCaption = "Caption";

                    var pageField = pivotTable.Fields["field1"];
                    pivotTable.PageFields.Add(pageField);

                    var rowField = pivotTable.Fields["cust"];                    
                    pivotTable.RowFields.Add(rowField);

                    var dataField = pivotTable.Fields["id"];

                    dataField.SubTotalFunctions = OfficeOpenXml.Table.PivotTable.eSubTotalFunctions.Count;
                    pivotTable.DataFields.Add(dataField); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T06:16:49.337

我想到了。这对我有用

```
pivotTable.DataFields.Add(dataField);
pivotTable.DataFields[0].Function = DataFieldFunctions.Count; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-24T06:05:07.900

这是我的发现，

```
Dim Field As ExcelPivotTableField = pivotTable.Fields(strFieldName)
    Dim DataField As ExcelPivotTableDataField = pivotTable.DataFields.Add(Field)
    DataField.Function = DataFieldFunctions.Sum 
```

# javascript - JQuery - 可拖动的 DIV 在图像之间淡入淡出？

> ID：12746817
> 
> 赞同：0
> 
> 时间：2012-10-05T13:01:03.640
> 
> 标签：javascript, jquery, html, css, slider

这是关于我的问题的[JSFIDDLE 。](http://jsfiddle.net/6NTSV/)

我想左右拖动滑块（上面有对话气泡）。当它在它后面的栏上的蓝色和绿色之间滑动时，它会设置不透明度`image 1 to 90%`和不透明度等`image 2 to 10%`，`image1 80% image 2 20%, image 1 70% - image2 30%`直到滑块到达绿色和的末端`opacity`，`image 1 is set to 0% and image 2 to 100%`然后随着滑块不断向右滑动`from green to red`，，`image 2 reaches 0% and image 3 is 100%`。重复下一张图片。

我查看了[http://jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)似乎可以满足我的要求，但是我不确定如何获取滑块的 X 位置，然后将其应用于 image1 的不透明度，图像2，图像3，图像4。

滑块是`960px wide`，因此`960 / 4 = 240`，对于`240 pixels`沿滑块的每个滑块，不透明度需要设置为 0-100%。

首先，这在jquery中可能吗？其次，任何人都可以帮助编写代码或向我展示一些可能有帮助的链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:21:36.413

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Slider</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function() {
        $( "#slider" ).slider({

        range: "min",
                 value: 0,
                 min: 0,
                 max: 10,

                 slide: function (event, ui) {
                     var r = (ui.value); 
                     $("#img1").css({'opacity':r/10});
                     $("#img2").css({'opacity':1-(r/10)});
}   
    })
    });
    </script>
</head>
<body>
<img id = "img1" src = "http://www.gettyimages.com/images/marketing/frontdoorStill/PanoramicImagesRM/FD_image.jpg" style = "height:200px; width:200px">
<img id = "img2" src = "http://www.gettyimages.com/images/marketing/frontdoorStill/PanoramicImagesRM/FD_image.jpg" style = "height:200px; width:200px">
<div id="slider" style = "height:10px; width:400px" ></div>
</body>
</html> 
```

# zend-framework - 将 Zend Mail 与 SMTP 身份验证一起使用会出错

> ID：12746820
> 
> 赞同：1
> 
> 时间：2012-10-05T13:01:08.953
> 
> 标签：zend-framework, email, zend-mail

我正在尝试创建一个使用 SMTP 身份验证发送电子邮件的表单，但我一直收到错误消息。我已经在网上阅读了很多帖子，这是我到目前为止提出的代码。有人看到下面的代码有什么问题吗？任何帮助将不胜感激。

谢谢鲍勃

```
$configSMTP = array(  
    'port' => 587,  
    'auth' => 'login',  
    'username' => '***',  
    'password' => '***'  
);

$transport = new Zend_Mail_Transport_Smtp('mail.server.com', $configSMTP);  
$mail = new Zend_Mail();

$mail->setReplyTo($config['replyto']);  
$mail->setBodyText($message);  
$mail->setFrom($params[$config['emailID']], $params[$config['nameID']]);  
$mail->addTo($config['sendto']);  
$mail->setSubject($config['subject']);

try {  
    $mail->send($transport);  
} catch(Exception $ex) {  
    Mage::getSingleton('core/session')->addError('There was an error submitting your  request.');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-30T02:22:46.293

Mandril 的 SMTP 使用 TLS。

[http://help.mandrill.com/entries/21738477-What-SMTP-ports-can-I-use-](http://help.mandrill.com/entries/21738477-What-SMTP-ports-can-I-use-)

在您的配置数组中启用它。

```
$configSMTP = array(
    'ssl' => 'tls',  
    'port' => 587,  
    'auth' => 'login',  
    'username' => '***',  
    'password' => '***'  
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:28:45.287

很难说不知道你得到了什么异常。

可能有几个原因，你能连接到 SMTP 服务器吗.. 端口 587 真的打开了吗？您是否有防火墙，如果有，是否会阻止与该端口的连接？您真的确定这些凭据有效吗？您是否尝试过手动连接到 SMTP 服务器？

如果没有，请查看如何使用 Telnet：[如何使用 Telnet 测试 SMTP 服务器](http://www.anta.net/misc/telnet-troubleshooting/smtp.shtml)

您也可以尝试使用交易电子邮件服务。这样您就不需要管理 SMTP 服务器，甚至不需要考虑可交付性等。您只需将其外包给其他人。

有各种供应商，其中一些是：

*   [阿尔法邮件](http://comfirm.se/alpha-mail/)
*   山魈
*   邮资应用

如果您使用的是 AlphaMail，您可以使用 AlphaMail PHP 客户端并发送您的电子邮件，如下例所示：

```
include_once("comfirm.alphamail.client/emailservice.class.php");

$email_service = AlphaMailEmailService::create()
    ->setServiceUrl("http://api.amail.io/v1")
    ->setApiToken("YOUR-ACCOUNT-API-TOKEN-HERE");

$person = new stdClass();
$person->userId = "1234";
$person->firstName = "John";
$person->lastName = "Doe";
$person->dateOfBirth = 1975;

$response = $email_service->queue(EmailMessagePayload::create()
    ->setProjectId(12345) // You AlphaMail project (determines template, options, etc)
    ->setSender(new EmailContact("Sender Company Name", "from@example.com"))
    ->setReceiver(new EmailContact("Joe Doe", "to@example.org"))
    ->setBodyObject($person) // Any serializable object
); 
```

[模板是使用Comlang](http://docs.amail.io/?section=comlang&client_env=comlang)模板语言在 AlphaMail Dashboard 中构建的。这意味着您可以随时轻松地编辑您的电子邮件，而无需深入研究代码。Comlang 中的模板类似于：

```
<html>
    <body>
        <b>Name:</b> <# payload.firstName " " payload.lastName #><br>
        <b>Date of Birth:</b> <# payload.dateOfBirth #><br>

        <# if (payload.userId != null) { #>
            <a href="/sign-up">Sign Up Free!</a>
        <# } else { #>
            <a href="/login?id=<# payload.userId #>">Sign In</a>
        <# } #>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:54:38.097

可能会指导您查看Zend Mail中的[资源插件部分。](http://framework.zend.com/manual/1.12/en/zend.application.available-resources.html#zend.application.available-resources.mail)提供更好的选项列表，并显示如何通过 app.ini 文件分配它们。

也就是说，假设您的论点是有效的，那看起来不错。

你发现了什么异常？您一定会收到一条错误消息。你能从这台机器telnet到你的邮件服务器吗？想要消除网络/身份验证问题。

# android - android 9补丁图像在发布模式下不会拉伸

> ID：12746825
> 
> 赞同：3
> 
> 时间：2012-10-05T13:01:24.773
> 
> 标签：android, release, nine-patch, build.xml

我正在为我的应用程序中的按钮使用一些 9 补丁图像。

当我从 eclipse 启动时，一切都很好，但是当我在发布模式下构建（ant/proguard 混淆，...）并安装 apk 时，9-patch 图像在应用程序中无法正确拉伸（像普通 png 一样拉伸，显示黑色边框...）。

我查看了 apk，*9.png 文件看起来很正常。所有其他图像均正确显示。我尝试禁用 -crunch 目标，并在打包目标中添加了 nocompress 选项，但没有运气。

关于这可能来自什么的任何线索？（我认为它与 ant 构建有关——我使用的是 adt 工具 v20）。

提前致谢

皮埃尔-g

# c# - 将 IEnumerable 转换为列表 在 .net 2.0 中

> ID：12746826
> 
> 赞同：5
> 
> 时间：2012-10-05T13:01:25.893
> 
> 标签：c#, .net-2.0, ienumerable

我需要转换`IEnumerable`为`List<string>`. 一种方法是遍历此并将每个对象添加到列表中，但是此过程非常耗时。有没有其他方法可以做到这一点。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-05T13:02:56.713

您可以将 enumerable 直接传递给新实例的[构造](http://msdn.microsoft.com/en-us/library/fkbw11z0.aspx)`List<string>`函数：

```
List<string> list = new List<string>(yourEnumerable); 
```

或者您可以使用以下[`AddRange`](http://msdn.microsoft.com/en-us/library/z883w3dc.aspx)方法：

```
List<string> list = new List<string>();
list.AddRange(yourEnumerable); 
```

这个答案假设您实际上已经拥有一个`IEnumerable<string>`.
如果不是这种情况，您唯一的选择是循环：

```
List<string> list = new List<string>();
foreach(object item in yourEnumerable)
    list.Add(item.ToString()); 
```

* * *

顺便说一句：你是说：

> 一种方法是遍历此并将每个对象添加到列表中，但此过程非常耗时

在任何情况下，您都需要迭代可枚举。否则您将如何获得所有值？在我给你的前两个示例代码中，枚举是在`List<T>`类内部执行的，但它仍在发生。

# c# - 使用 ++ 运算符 C# 的字段数据的有趣响应

> ID：12746829
> 
> 赞同：0
> 
> 时间：2012-10-05T13:01:28.170
> 
> 标签：c#, properties

我在这里有一个程序片段，它允许创建一个具有年龄、id、姓名和工资等简单属性的 Employee 对象。只是在玩它，我注意到

```
 Console.WriteLine(joe.Age+1); is my Main() method returns one, 
```

但`Console.WriteLine(joe.Age++);`返回 0。我知道根据构造函数将 Age 属性初始化为 0，但为什么不使用 ++ 运算符添加 1？ **编辑：我找到了奇怪行为的根源。在我拥有的 Age 属性中`empAge=Age`，它应该等于`value`**

来源：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace EmployeeApp
{
    class Employee
    {
        //field data
        //notice the the fields are declared as private
        //these fields are used in the constructors
        private string empName;
        private int empID;
        private float currPay;
        private int empAge;

        //properties! private field data should be accessed via public properties
        //note that properties don't use parentheses ()
        //within the set scope you see the 'value' contextual keyword
        //it represents the value being assigned by the caller and it will always be the same 
        //underlying data type as the property itself
        public int Age
        {
            get { return empAge; }
            set { empAge = Age; }
        }

        public string Name
        {
            get { return empName; }
            set
            {
                if (value.Length > 15)
                    Console.WriteLine("this name is too long.");
                else
                    empName = value;
            }
        }
        public int ID
        {
            get { return empID; }
            set { empID = value; }
        }
        public float pay
        {
            get { return currPay; }
            set { currPay = value; }
        }

        //constructors
        public Employee() { }

        public Employee(string name, int id, float pay, int age)
        {
            empName = name;
            empID = id;
            currPay = pay;
            empAge = age;
        }

        //methods
        //the int parameter that this method takes will come from somewhere in the Main method
        //currpay is a private field
        public void GiveBonus(float amount)
        {
            currPay += amount;
        }
        public void DisplayStats()
        {
            Console.WriteLine("name: {0}", empName);
            Console.WriteLine("ID: {0}", empID);
            Console.WriteLine("pay: {0}", currPay);
            Console.WriteLine("age: {0}", empAge);
        }
    }

} 
```

主要方法在这里

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
//Encapsulation using traditional accessors/mutators or get/set methods
//the role of a get method is to return to the caller the current value of the underlying state data
//a set method allows the caller ot change the current value of the state data

//you need to have a getter and a setter for every field that the class has

namespace EmployeeApp
{
    class Program
    {
        static void Main(string[] args)
        {
            //Console.WriteLine("fun with encapsulation");
            //Employee emp = new Employee("marvin", 456, 4000, 56);
            //emp.GiveBonus(3);
           // emp.DisplayStats();
           // emp.Name = "wilson";
           // emp.DisplayStats();

            Employee joe = new Employee();

            Console.WriteLine(joe.Age++);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T13:04:21.717

增量运算符有`++`两种用途：

```
joe.Age++ 
```

和

```
++joe.Age 
```

正如您使用的那样，第一个在当前操作*之后执行。*因此，当您调用 时`Console.WriteLine(joe.Age++);`，这也可以表示为：

```
Console.WriteLine(joe.Age);
joe.Age = joe.Age + 1; 
```

因此，您将当前值传递给`WriteLine`，*然后将其*递增。

领先`++`将做相反的事情 - 增加*然后*使用该值。所以，`Console.WriteLine(++joe.Age);`也可以读作：

```
joe.Age = joe.Age + 1;
Console.WriteLine(joe.Age); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T13:04:11.493

当您在变量后使用[一元 ++ 运算符](http://msdn.microsoft.com/en-us/library/36x43w8w.aspx)时，在计算外部表达式之前不会发生加法。当您在变量之前使用它时，加法发生在评估外部表达式之前。

例如，

```
// this will increment joe.Age, and then write it to console.
Console.WriteLine(++joe.Age); 
```

相对

```
// this will write joe.Age to the console, and then increment it.
Console.WriteLine(joe.Age++); 
```

从[msdn 上的文档](http://msdn.microsoft.com/en-us/library/36x43w8w.aspx)：

> 第一种形式是前缀递增操作。操作的结果是操作数增加后的值。
> 
> 第二种形式是后缀递增操作。操作的结果是操作数在递增之前的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T13:04:39.210

在 C++ 和 C# 中，有两个 ++ 运算符。第一个是前缀运算符 (++age)，它按您的预期工作 - 递增值，然后返回结果。后缀运算符 (age++) 增加值但返回*前一个*值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T13:06:54.237

在您的 Age 属性中，您没有将`empAge`成员更改为传入的值。这可能是您在[`++`](http://msdn.microsoft.com/en-us/library/36x43w8w.aspx)多次尝试时没有看到任何更改的原因。

```
public int Age 
{ 
    get { return empAge; } 
    set { empAge = Age;  } // this does not set the value!
} 
```

改用`value`：

```
public int Age 
{ 
    get { return empAge;   } 
    set { empAge = value;  } // use the value passed in
} 
```

正如其他人所指出的，您正在使用`++`运算符的后缀版本。在将属性写入控制台之前，前缀版本将首先增加数量。

# c++ - 如何使用 Boost 正则表达式检测字符串中的 ESC

> ID：12746839
> 
> 赞同：0
> 
> 时间：2012-10-05T13:02:07.687
> 
> 标签：c++, boost

我需要确定文件是否经过 PCL 编码。所以我正在查看第一行是否以 ESC 字符开头。如果您知道更好的方法，请随时提出建议。这是我的代码：

```
bool pclFlag = false;
if (containStr(jobLine, "^\\e")) {
   pclFlag=true;
}

bool containStr(const string& s, const string& re)
{
   static const boost::regex e(re);
   return regex_match(s, e);
} 
```

pclFlag 未设置为 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:24:14.503

如果您只想查看字符串是否以某个字符开头，那么 Boost.Regex 似乎有点过头了。

```
bool pclFlag = jobLine.length() > 0 && jobLine[0] == '\033'; 
```

您还可以使用 Boost 字符串算法：

```
#include <boost/algorithm/string.hpp>

bool pclFlag = jobLine.starts_with("\033"); 
```

如果您要查看字符串中的任何位置是否包含转义符：

```
bool pclFlag = jobLine.find('\033') != npos; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:19:41.573

您已声明`boost::regex e`为静态，这意味着它只会在您的函数第一次被调用时被初始化。如果您在此处的搜索*不是*第一次调用，它将搜索在第一次调用中传递的任何字符串。

regex_match 必须匹配*整个*字符串。尝试在正则表达式的末尾添加“.*”（点星）。

**重要**
请注意，仅当表达式与**整个**输入序列匹配时，结果才为真。如果要在序列中的某处搜索表达式，请使用 regex_search。如果要匹配字符串的前缀，则使用带有标志 match_continuous 集的 regex_search。
[http://www.boost.org/doc/libs/1_51_0/libs/regex/doc/html/boost_regex/ref/regex_match.html](http://www.boost.org/doc/libs/1_51_0/libs/regex/doc/html/boost_regex/ref/regex_match.html)

@JoachimPileborg 是对的…… `if (jobline[0] == 0x1B) {}`要容易得多。

# windows - 使用 winrm 连接到远程服务器而不将服务器添加到 TrustedHosts

> ID：12746844
> 
> 赞同：5
> 
> 时间：2012-10-05T13:02:32.850
> 
> 标签：windows, windows-7, windows-server-2008, winrm, remote-management

我一直在努力处理 winrm 和 TrustedHosts 但无济于事。经过一些试验，我发现 winrm/config/client 的这个字段最多只能有 1023 个符号，这还不够，特别是如果通过它们的 ipv6 添加主机。我引用[了 Windows 远程管理的安装和配置](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384372%28v=vs.85%29.aspx)：`A trusted hosts list should be set up when mutual authentication cannot be established.`

同样在同一个文件中，文本说：`Other computers in a workgroup or computers in a different domain should be added to this list.`所以我认为这意味着只要两台计算机在同一个域中，我应该能够使用 winrm 从另一台访问其中一台。

我尝试将两台计算机添加到测试域并执行：

> winrm 获取 winrm/config/client -r:192.168.100.1 -u:user -p:pass

从其中一个到另一个，但这失败并出现错误：

```
WSManFault
    Message = The WinRM client cannot process the request. If the authentication
 scheme is different from Kerberos, or if the client computer is not joined to a
 domain, then HTTPS transport must be used or the destination machine must be ad
ded to the TrustedHosts configuration setting. Use winrm.cmd to configure Truste
dHosts. You can get more information about that by running the following command
: winrm help config.

Error number:  -2144108316 0x803380E4
The WinRM client cannot process the request. If the authentication scheme is dif
ferent from Kerberos, or if the client computer is not joined to a domain, then
HTTPS transport must be used or the destination machine must be added to the Tru
stedHosts configuration setting. Use winrm.cmd to configure TrustedHosts. You ca
n get more information about that by running the following command: winrm help c
onfig. 
```

将 192.168.100.1 添加到 TrustedHosts 后，上述查询成功。所以我的问题是：是否可以在不修改 TrustedHosts 的情况下在两台主机之间使用 winrm？将受信任的主机设置`*`为对我来说不是一个选项。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T15:45:15.933

如果两台机器在同一个域中，您应该能够使用 ComputerName 而不是 IP 地址。当您使用 IP 地址时，您几乎被迫使用我所看到的 TrustedHosts。

# jquery - Jquery查找值为X的表格单元格

> ID：12746846
> 
> 赞同：12
> 
> 时间：2012-10-05T13:02:35.953
> 
> 标签：jquery, dom-traversal

我试图找到一个`<td>`值为 5 的地方。它是一个日历，所以只有一个 5 值。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-05T13:06:28.107

您可以使用[过滤](https://api.jquery.com/filter/)方法：

```
$('td').filter(function(){
    return $(this).text() === '5'
}) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-05T13:05:07.283

使用[:contains](http://api.jquery.com/contains-selector/)选择器：

```
var td = $("td:contains('5')"); 
```

***编辑：*** 这也将选择带有`15`and`25`，如果你想要 exact`5`，然后使用`.filter`另一个答案所说的方法。

# batch-file - 环境中设置的批处理文件错误和 ARGV

> ID：12746848
> 
> 赞同：0
> 
> 时间：2012-10-05T13:02:36.360
> 
> 标签：batch-file, windows-scripting

我在 Windows XP 上有一个行为异常的批处理文件。它包含：

```
SetLocal
FOR /f "delims=" %%x in (my.properties) DO (set "%%x")
call as-create-launch-config X --region us-east-1 --user-data "a=%VAR1%^|b=%VAR2%^|c=%VAR3%"
call as-create-launch-config Y --region us-east-1 --user-data "d=%VAR4%^|e=%VAR5%^|f=%VAR6%" 
```

VARx 变量似乎设置正确。

我收到一条错误消息，提示“b 未被识别为内部或外部命令”。我确定从命令行运行时 - 不涉及批处理文件 - 我必须插入克拉来逃脱管道。但是在批处理文件中，如果我有克拉，它就不起作用，如果我没有，它就不起作用！

另一件奇怪的事情是 SetLocal 似乎没有任何效果，因为在批处理文件运行后，my.properties 中的所有属性都可以通过“set”看到。'set' 的输出中有一些东西叫做 ARGV。

感谢您的帮助，保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:44:17.913

***编辑的答案***

我傻了，我终于弄清楚了问题所在。

CALL 语句将所有引用的插入符号加倍，因此您的代码实际上正在传递：

```
"a=%VAR1%^^|b=%VAR2%^^|c=%VAR3%" 
```

您可以通过将带引号的字符串存储在变量中，然后使用加倍百分比来延迟变量的扩展，直到插入符号加倍后，才能解决该问题。

```
SetLocal
FOR /f "delims=" %%x in (my.properties) DO (set "%%x")
set arg="a=%VAR1%^|b=%VAR2%^|c=%VAR3%"
call as-create-launch-config X --region us-east-1 --user-data %%arg%%
set arg=""d=%VAR4%^|e=%VAR5%^|f=%VAR6%"
call as-create-launch-config Y --region us-east-1 --user-data %%arg%% 
```

请参阅[Windows 命令解释器 (CMD.EXE) 如何解析脚本？](https://stackoverflow.com/a/4095133/1012053)有关批处理解析如何工作的更多信息，包括有关插入符号加倍的信息。

您还可以实施您在[答案](https://stackoverflow.com/a/12749273/1012053)中找到的解决方案，而无需借助其他脚本。该解决方案令人惊讶地需要括号来避免DosTips 用户 Liviu 发现的未[执行跳转。](http://www.dostips.com/forum/viewtopic.php?p=13088)

```
SetLocal
FOR /f "delims=" %%x in (my.properties) DO (set "%%x")
call :sub1
call :sub2
exit /b

:sub1
(as-create-launch-config X --region us-east-1 --user-data "a=%VAR1%^|b=%VAR2%^|c=%VAR3%")

:sub2
(as-create-launch-config Y --region us-east-1 --user-data "d=%VAR4%^|e=%VAR5%^|f=%VAR6%") 
```

***SETLOCAL 解决方案***

关于 SETLOCAL 问题 - 通常，一旦脚本终止，在 SETLOCAL 之后设置的所有值都应该被清除，即使没有明确的 ENDLOCAL。但是，我发现了一个令人讨厌的行为（错误？），可以解释您的结果。不幸的是，如果调用的例程或脚本中存在致命错误，则 SETLOCAL 仍然存在。请参阅我的 DosTips post [SETLOCAL 在批处理终止后继续！](http://www.dostips.com/forum/viewtopic.php?p=8312). 阅读整个线程。

消除致命错误后，SETLOCAL 应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:20:02.330

我最终确实让这个工作了。

as-create-launch-config 是一个 Amazon AWS 工具，不是我可以控制的，所以修改它不是一个选项。

我尝试了所有我能找到的关于转义和引用等的建议 - 没有任何区别。当我不使用“调用”时，一切正常，但当然只有脚本中的第一个命令会在这种情况下运行。所以我介绍了一个间接级别 - script1 有：

```
call scriptA
call scriptB 
```

和 scriptA 有：

```
as-create-launch-config --user-data "a=%VAR1%^|b=%VAR2%^|c=%VAR3%" 
```

和 scriptB 有：

```
 as-create-launch-config --user-data "d=%VAR4%^|e=%VAR5%^|f=%VAR6%" 
```

这是我能达到这个结果的唯一方法。

# postgresql-9.2 - Postgresql：如何启动数据库服务器并创建数据库

> ID：12746854
> 
> 赞同：12
> 
> 时间：2012-10-05T13:03:07.210
> 
> 标签：postgresql-9.2

当我尝试运行服务器时：

```
postgres@ubuntu:~$ /usr/local/pgsql/bin/postgres -D /usr/local/pgsql/data
LOG:  could not bind IPv4 socket: Address already in use
HINT:  Is another postmaster already running on port 5432? If not, wait a few seconds and retry.
WARNING:  could not create listen socket for "localhost"
FATAL:  could not create any TCP/IP sockets postgres@ubuntu:~$ 
```

然后我将用户更改为我自己：

```
postgres@ubuntu:~$ su - michael

michael@ubuntu:~$  sudo netstat -tulpn | grep 5432
tcp        0      0 127.0.0.1:5432          0.0.0.0:*               LISTEN      959/postgres 
```

好吧，postgres 似乎正在监听端口，这似乎是问题所在。

让我们将 pack 更改为 postgres 并尝试终止此进程：

```
postgres@ubuntu:~$ kill `cat /usr/local/pgsql/data/postmaster.pid` 
```

反应是：

```
cat: /usr/local/pgsql/data/postmaster.pid: No such file or directory
kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec] 
```

你能推荐我如何进行吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T13:10:15.047

首先，获取正在运行的 Postgres pid：

```
ps -ef | grep postmaster | awk '{print $2}' 
```

然后杀

```
kill <the_pid_you_just_got> 
```

但是，除非您尝试使用 Postgres（多个实例...）做一些非常特别的事情，否则您**应该**使用**sudo /etc/init.d/postgresql stop**（或 sudo /etc/init.d/postgres stop）停止它并启动它使用**sudo /etc/init.d/postgresql 启动**

Postgres 作为**服务**运行，因此它有一个服务控制文件/脚本，负责正确启动和停止它。这些控制文件过去位于 /etc/init.d 中，但我必须承认，随着服务管理系统（init、upstart、systemd...）的数量不断增加，这些文件现在变得有点乱了。

# php - PHP中Skype名称的正则表达式

> ID：12746862
> 
> 赞同：10
> 
> 时间：2012-10-05T13:03:38.897
> 
> 标签：php, regex

请我想在 PHP 中使用正则表达式验证 Skype 名称。

**注意：**它必须介于 6-32 个字符之间，以字母开头并且仅包含字母和数字（没有空格或特殊字符）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-05T13:12:17.277

这种模式应该适合你：

```
[a-zA-Z][a-zA-Z0-9\.,\-_]{5,31} 
```

这将匹配一个前导字母，后跟任何字母数字组合，最多 6 - 32 个字符（对于整个字符串）。

你可以在 PHP 中使用它：

```
if (preg_match('/^[a-z][a-z0-9\.,\-_]{5,31}$/i', $name)) {
    // you have a valid name!
} 
```

注意，在 中`preg_match()`，我添加了`i`regex 选项来忽略大小写。此外，我以*开头*`^`的模式表示模式必须从字符串的开头开始，并以 a 结尾以表示模式必须在字符串的*末尾结束*。*`$`*

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:12:31.270

这将完成这项工作：

```
preg_match( '~^[a-z][a-z0-9]{5,31}$~i', $text) 
```**

# php - php fwrite 在每个单词中给出一行

> ID：12746863
> 
> 赞同：-3
> 
> 时间：2012-10-05T13:03:40.133
> 
> 标签：php, cakephp

这是我的 fwrite 函数的 php 代码。我想在第二行输出像 oneworld 而不是第二个世界，而第三个在第三行

输出

```
05 10 2012 16:06:29  bonne 
05 10 2012 16:06:29   
05 10 2012 16:06:38  mauvais 
05 10 2012 16:06:38   
05 10 2012 16:06:44  pas bonne 
05 10 2012 16:06:45   
05 10 2012 16:07:17  trés bonne 
05 10 2012 16:07:18   
05 10 2012 16:07:34  bonne 
05 10 2012 16:07:35 
```

每个单词之间有一行。这是我的代码，你能帮帮我吗

```
<?php
        $file = "testFile.txt";
        $fp = fopen($file, 'a');
        $name = $_POST['nom'];
        $mood = trim($_POST['Humer']);
        $date = date ("d m Y H:i:s");
        $data = $mood;
        fwrite($fp, "$date  $data \n");
        fclose($fp);
        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:09:11.040

您只写入文件一个`$mood`带有换行符的变量。关于其他行，请尝试在之前修剪数据：

```
$mood = trim($_POST['Humer']); 
```

# php - FOSUserBundle 将更改密码表单与其他表单集成

> ID：12746865
> 
> 赞同：2
> 
> 时间：2012-10-05T13:03:53.817
> 
> 标签：php, symfony, fosuserbundle

我想将 FOSUserBundle 的 change_password 表单集成到我的设置页面中，其中我还有 change_email 表单或其他信息。我知道如何在我的设计中集成 FOS，但不知道如何做我想做的事情。

现在，表单是通过控制器和表单构建器方法生成的，我不知道如何修改它......

提前致谢， 瓦伦丁

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-07T10:23:41.283

*（我看到这是一个 8 个月大的问题，但也许它可以帮助某人。）*

如果您只想为用户配置文件制作一页，最简单的方法是为密码更改事件使用单独的表单。FOSUserBundle 提供了这个功能。因此，如果您想使用自己的路由和表单，只需从 FOS 控制器和表单复制代码，更改一些参数（如路由名称和设计），就可以设置好了。可能有一些更复杂的方法可以使用这个 Bundle，但在我看来这是最简单和最灵活的。

FOSUserBundle 在`/vendor/friendsofsymfony/user-bundle/FOS/UserBundle/`目录中。密码控制器位于`/Controller/ChangePasswordController.php` ，表格位于`/Resources/views/ChangePassword`.

这是我在“设置”页面中执行此操作的方法。我只使用密码更改功能，但我假设您可以对不同的表单进行单独的操作，然后将用户重定向回带有视图的原始索引页面。

这是控制器（我只更改了重定向路由和视图）：

```
use JMS\SecurityExtraBundle\Annotation\Secure;
use Symfony\Component\Security\Core\Exception\AccessDeniedException;
use FOS\UserBundle\Model\UserInterface;

class SettingsController extends Controller
{
    /**
    * @Secure(roles="ROLE_USER")
    */
    public function indexAction()
    {
        $user = $this->container->get('security.context')->getToken()->getUser();
        if (!is_object($user) || !$user instanceof UserInterface) {
            throw new AccessDeniedException('This user does not have access to this section.');
        }

        $form = $this->container->get('fos_user.change_password.form');
        $formHandler = $this->container->get('fos_user.change_password.form.handler');

        $process = $formHandler->process($user);
        if ($process) {
            $this->get('session')->setFlash('notice', 'Password changed succesfully');

            return $this->redirect($this->generateUrl('settings'));
        }

        return $this->render('AcmeHelloBundle:Settings:password.html.twig', ['form' => $form->createView()]);
    }
} 
```

这是视图 (password.html.twig) - 这里唯一的变化是路线：path('settings')

```
<form action="{{ path('settings') }}" {{ form_enctype(form) }} method="POST" class="fos_user_change_password">
    {{ form_widget(form) }}
    <div>
        <input type="submit" value="{{ 'change_password.submit'|trans({}, 'FOSUserBundle') }}" />
    </div>
</form> 
```

所以就是这样。现在您有了一个漂亮的密码更改表单，所有繁重的工作都由 FOS UserBundle 负责！

# c++ - 动态创建对象并将它们添加到链表

> ID：12746866
> 
> 赞同：3
> 
> 时间：2012-10-05T13:03:55.953
> 
> 标签：c++, list, dynamic, linked-list

这是一个 C++ 控制台游戏，里面有坦克可以发射炮弹。问题是关于坦克壳部分。我想创建一个 PlayerTankShell 类的对象，并在每次按下空格按钮时将其添加到链表中。我怎样才能做到这一点 ？

这是我的代码：

```
#include <iostream>
#include <conio.h>
#include <list>

using namespace std;

#define ATTACK  32

class PlayerTankShell
{
    int x;
    int y;
    int speed;
    bool isExist;

public:
    PlayerTankShell(bool exists)
    {
        isExist = exists;
    }
    bool getExistense()
    {
        return isExist;
    }
};

int main()
{
    char input;
    input = getch();

    if (input == ATTACK)
    {
        // Here create an object and add it to the linked list
    }

    // My test so far:
    PlayerTankShell *s1 = new PlayerTankShell(1);
    PlayerTankShell *s2 = new PlayerTankShell(1);
    PlayerTankShell *s3 = new PlayerTankShell(1);

    list<PlayerTankShell> listShells;

    listShells.push_back(*s1);
    listShells.push_back(*s2);
    listShells.push_back(*s3);

    list<PlayerTankShell>::iterator i;

    for (i = listShells.begin(); i != listShells.end(); i++)
    {
        cout << "exists=" << i->getExistense() << endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:08:39.723

你想要这样的东西：

```
std::list<PlayerTankShell> shells; 
```

然后你可以添加到它：

```
shells.push_back(PlayerTankShell(true)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:49:59.817

如果您希望将*指针*`PlayerTankShell`存储在列表中，您可能需要使用一些**智能指针**模板类，例如`shared_ptr`（如果它们`PlayerTankShell`也在代码的其他部分中共享，则一旦引用计数达到零，它们就会被破坏，即STL 容器，`shared_ptr`你有一个“**确定性垃圾收集器**”）：

```
// List of smart pointers to PlayerTankShell
list<shared_ptr<PlayerTankShell>> shells;

// Add new PlayerTankShell to the list
shells.push_back( make_shared<PlayerTankShell>(true) ); 
```

# c++ - 在 Ubuntu 中监控键盘按键

> ID：12746869
> 
> 赞同：0
> 
> 时间：2012-10-05T13:04:01.867
> 
> 标签：c++, c, linux, ubuntu, keyboard

> **可能重复：**
> [如何在 Ubuntu 的后台进程中获取数据](https://stackoverflow.com/questions/12744064/how-to-fetch-data-in-a-background-process-in-ubuntu)

我正在编写一个程序来监视键盘上按下的键。但是我的程序可能在前台或后台运行。我听说有操作系统特定的系统调用，即使运行系统调用的程序在后台，程序员也可以监控键盘活动。我是 Ubuntu 编程的新手，所以请有人告诉我那个操作系统系统调用是什么。

**注意：** 此程序仅用于教育目的。这是学校项目的一部分..

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:54:25.090

大多数 Ubuntu 系统（至少是 Ubuntu 新手用户的桌面）都在运行[X11](http://en.wikipedia.org/wiki/X_Window_System)窗口服务器（如[Xorg](http://en.wikipedia.org/wiki/X.Org_Server)）。该服务器（仅）正在获取原始键盘和鼠标设备输入。它处理它们以将[X11 协议事件](http://en.wikipedia.org/wiki/X_Window_System_core_protocol)传递给客户端应用程序（例如，您的 firefox 浏览器、`emacs`编辑器、gnome 或`xterm`终端）。

您可以花时间（几个月）了解所有这些（可能从[freedesktop](http://www.freedesktop.org/wiki/)开始）您也可以切换到其他项目，也许只是使用[Gtk](http://www.gtk.org/)（在 Gnome 中）或[Qt](http://qt.digia.com/)（在 KDE 中）编写一个有趣的 GUI 应用程序。所有 Linux 图形工具包库都构建在与 X11 协议接口的库之上，通常是[Xlib](http://en.wikipedia.org/wiki/Xlib)或[XCB](http://en.wikipedia.org/wiki/XCB)。

如果您想开始学习 Linux 编程，请阅读[Advanced Unix Programming](http://basepath.com/aup/)和[Advanced Linux Programming](https://mentorembedded.github.io/advancedlinuxprogramming/)。之后，花大量时间了解[tty](http://www.linusakesson.net/programming/tty/index.php) -s 的奥秘，熟悉[syscalls(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/syscalls.2.html)。然后熟悉像 Qt 或[GTK](https://gtk.org/)这样的图形工具包。

然后你就会开始明白要准确回答你问得不好和可疑的问题是多么困难。（答案很大程度上取决于观点 -`Xorg`看到与其他应用程序不同的关键事件，特别是 X 客户端，并且非常复杂）。

一旦你理解了我给你的链接中的所有概念，你就可以更准确地提出你的问题。当您以更精确和技术性的术语重新提出您的问题时（特别是解释您希望在哪个级别监控键盘和鼠标），显示您试验过的代码，我们将能够（并且愿意）回答你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:38:24.650

有一个用于 linux 的程序，它绑定全局热键并在按键时执行预定义的操作。它被称为`xbindkeys`。查看其源代码以获取建议或直接使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:37:30.927

*听说有特定于操作系统的系统调用*：你从谁那里听到的？你问他们了吗？

这需要多次调用，您需要使用`ioctl`（在 Ubuntu 上可能不同）将您的记录器推送到终端流中。这并不简单，也不太适合刚开始的项目。例如，请参阅`script`程序。

# mysql - 从连接表中选择相异集公共子集

> ID：12746870
> 
> 赞同：3
> 
> 时间：2012-10-05T13:04:09.057
> 
> 标签：mysql, sql

给定一个用于和之间的 m-2-m 关系的连接`booth`表`user`

```
+-----------+------------------+
| booth_id  |          user_id |
+-----------+------------------+
|         1 |                1 |
|         1 |                2 |
|         1 |                5 |
|         1 |                9 |
|         2 |                1 |
|         2 |                2 |
|         2 |                5 |
|         2 |               10 |
|         3 |                1 |
|         3 |                2 |
|         3 |                3 |
|         3 |                4 |
|         3 |                6 |
|         3 |               11 |
+-----------+------------------+ 
```

**如何获得一组不同`booth`的用户 ID 子集之间共有的记录？**例如，如果给我的`user_id`值`1,2,3`，我希望结果集只`booth`包含 id`3`因为它是`booth`上面连接表中所有`user_id`提供的唯一共同点。

我希望我在 MySQL 中缺少一个关键字来实现这一点。到目前为止我最远的是 using`... user_id = all (1,2,3)`但这总是返回一个空的结果集*（我相信我明白为什么会这样）*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:34:41.643

对此的 SQL 查询将是：

```
select booth_id from table1 where [user_id]
in (1,2,3) group by booth_id having count(booth_id) = 
(select count(distinct([user_id])) from table1 where [user_id] in (1,2,3)) 
```

如果这可以帮助您创建 MySQL 查询。

# objective-c - JigSaw拼图uiimage不规则裁剪

> ID：12746873
> 
> 赞同：6
> 
> 时间：2012-10-05T13:04:17.793
> 
> 标签：objective-c, iphone, uiimageview, masking

正在为 iphone 开发拼图游戏。

在这里，我使用遮罩技术将图像裁剪为 9 块。见下图。

裁剪后，由于掩蔽，图像的某些部分丢失。我知道这是因为在方形 uiimageview 中加载那些裁剪的图像。

我的问题是如何使它成为完整的裁剪图像而不会丢失图像的任何部分，以及如何正确地拟合这些碎片以与原始图像匹配。

![在此处输入图像描述](../Images/436c0e73cf33d28d1dddaf8ce69e4d3b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:35:41.850

建立一组与每个拼图相对应的面具。每个蒙版都应该是原始图像的大小，除了一个带有拼图位置和形状的白色区域外，都是黑色的。此外，为每个部分维护一个边界矩形（一个在掩码图像中最少包含该部分的矩形）。

不丢失任何原始图像的方法是将掩码（和相应的边界矩形）排列为图像上的[分区](http://en.wikipedia.org/wiki/Partition_of_a_set)。

[这是](http://mobiledevelopertips.com/cocoa/how-to-mask-an-image.html)一些演示如何应用掩码的代码的链接。[应用蒙版后，使用此处](https://stackoverflow.com/questions/158914/cropping-a-uiimage)和其他地方的代码将蒙版图像裁剪到边界矩形。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-03T10:15:18.777

我也在考虑用蒙版分割原始图像，但这对我们来说可能是个坏主意，而且管理起来也很复杂。所以对于**拼图初学者来说，**[这是最好的问题/答案](https://stackoverflow.com/questions/10810798/cropping-image-with-transparency-in-iphone) ，你也可以[从 git获得](https://github.com/GuntisTreulands/JigsawDemo)[**拼图游戏**](https://github.com/GuntisTreulands/JigsawDemo)[的源代码。](https://github.com/GuntisTreulands/JigsawDemo)

 **请为解决您问题的这个人***（@“Guntis Treulands”）脱帽。***我知道这不应该是一个答案，但应该是评论，但如果我将它作为评论，那么可能是对**拼图**有问题的用户，他/她不能轻易找到它。我把它作为一个答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-20T07:53:21.647

```
//Create our colorspaces
imageColorSpace = CGColorSpaceCreateDeviceRGB();
maskColorSpace = CGColorSpaceCreateDeviceGray();
provider=CGDataProviderCreateWithCFData((__bridge CFDataRef)self.puzzleData);
image=CGImageCreateWithPNGDataProvider(provider, NULL, true, kCGRenderingIntentDefault);
CGDataProviderRelease(provider);

//Resize the puzzle image
context = CGBitmapContextCreate(NULL, kPuzzleSize, kPuzzleSize, 8, 0, imageColorSpace, kCGImageAlphaPremultipliedFirst);
CGContextDrawImage(context, CGRectMake(0, 0, kPuzzleSize, kPuzzleSize), image);
CGImageRelease(image);
image = CGBitmapContextCreateImage(context);
CGContextRelease(context);

//Create the image view with the puzzle image
self.imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, kPuzzleSize, kPuzzleSize)];
[self.imageView setImage:[UIImage imageWithCGImage:image]];

//Create the puzzle pieces (note that pieces are rotated to the puzzle orientation in order to minimize the number of graphic operations when creating the puzzle images)
for(i = 0; i < appDelegate().puzzleSize * appDelegate().puzzleSize; ++i)
{
    //Recreate the piece view
    [pieces[i] removeFromSuperview];
    pieces[i] = [[CJPieceView alloc] initWithFrame:CGRectMake(0, 0, kPieceSize, kPieceSize) index:i];
    [pieces[i] setTag:-1];

    //Load puzzle piece mask image
    UIImage *maskimage=[self.arrmaskImages objectAtIndex:i];
    NSData *dataMaskImage=UIImagePNGRepresentation(maskimage);

    provider=CGDataProviderCreateWithCFData((__bridge CFDataRef)dataMaskImage);
    tile = CGImageCreateWithPNGDataProvider(provider, NULL, true, kCGRenderingIntentDefault);
    CGDataProviderRelease(provider);
    mask = CGImageCreateCopyWithColorSpace(tile, maskColorSpace);
    CGImageRelease(tile);

    context = CGBitmapContextCreate(NULL, kPieceSize / kPieceShadowFactor, kPieceSize / kPieceShadowFactor, 8, 0, imageColorSpace, kCGImageAlphaPremultipliedFirst);
    CGContextClipToMask(context, CGRectMake(0, 0, kPieceSize / kPieceShadowFactor, kPieceSize / kPieceShadowFactor), mask);
    CGContextSetRGBFillColor(context, 0.0, 0.0, 0.0, 1.0);
    CGContextFillRect(context, CGRectMake(0, 0, kPieceSize / kPieceShadowFactor, kPieceSize / kPieceShadowFactor));
    shadow = CGBitmapContextCreateImage(context);
    CGContextRelease(context);
    imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, kPieceSize, kPieceSize)];
    [imageView setImage:[UIImage imageWithCGImage:shadow]];
    [imageView setAlpha:kPieceShadowOpacity];
    [imageView setUserInteractionEnabled:NO];
    [pieces[i] addSubview:imageView];
    CGImageRelease(shadow);

    //Create image view with piece image and add it to the piece view
    context = CGBitmapContextCreate(NULL, kPieceSize, kPieceSize, 8, 0, imageColorSpace, kCGImageAlphaPremultipliedFirst);
    CGRect rectPiece= CGRectMake(fmodf(i, appDelegate().puzzleSize) * kPieceDistance, (floorf(i / appDelegate().puzzleSize)) * kPieceDistance, kPieceSize, kPieceSize);
    [self.arrlocations addObject:[NSValue valueWithCGRect:rectPiece]];
    CGContextTranslateCTM(context, (kPieceSize - kPieceDistance) / 2 - fmodf(i, appDelegate().puzzleSize) * kPieceDistance, (kPieceSize - kPieceDistance) / 2 - (appDelegate().puzzleSize - 1 - floorf(i / appDelegate().puzzleSize)) * kPieceDistance);        
    CGContextDrawImage(context, CGRectMake(0, 0, CGImageGetWidth(image), CGImageGetHeight(image)), image);
    subImage = CGBitmapContextCreateImage(context);     
    CGContextRelease(context); 
    tile = CGImageCreateWithMask(subImage, mask);
    imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, kPieceSize, kPieceSize)];
    [imageView setImage:[UIImage imageWithCGImage:tile]];
    [imageView setUserInteractionEnabled:NO];
    [pieces[i] addSubview:imageView];
    CGImageRelease(tile);
    CGImageRelease(subImage);
    DLog(@"%f", pieces[i].frame.size.width);
    pieces[i].transform=CGAffineTransformScale(CGAffineTransformIdentity, kTransformScale, kTransformScale);
    DLog(@"%f %f",kTransformScale, pieces[i].frame.size.width);
    //Release puzzle piece mask;
    CGImageRelease(mask);

}

//Clean up
CGColorSpaceRelease(maskColorSpace);
CGColorSpaceRelease(imageColorSpace);
CGImageRelease(image); 
```**

# android - 如何从 TabHost 中更新 WebView？

> ID：12746876
> 
> 赞同：1
> 
> 时间：2012-10-05T13:04:19.513
> 
> 标签：android, webview, android-tabhost

如果这个答案很明显，请原谅我，我对 Android 很陌生，但正在稳步前进。

我进行了详尽的搜索，但担心我可能使用了错误的术语。

我有一个创建 WebView 的活动：

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

webviewHome = (WebView) findViewById(R.id.webView1);
webviewHome.setWebViewClient(new WebViewClient1(){  
});
webviewHome.getSettings().setJavaScriptEnabled(true);
webviewHome.loadUrl("http://192.168.1.3/codeholder.html"); 
```

该活动还有一个带有 3 个选项卡的 TabHost：

```
//Tabs
tabHost = getTabHost();
tabHost.setOnTabChangedListener(this);

//Tab for Sky
TabSpec skyspec = tabHost.newTabSpec("0");
skyspec.setIndicator("", getResources().getDrawable(R.drawable.sky));
Intent skyIntent = new Intent(this, sky.class);
skyspec.setContent(skyIntent);

//Tab for XBMC
TabSpec XBMCspec = tabHost.newTabSpec("1");
XBMCspec.setIndicator("", getResources().getDrawable(R.drawable.xbmc));
Intent XBMCIntent = new Intent(this, xbmc.class);
XBMCspec.setContent(XBMCIntent);

//Tab for PC
TabSpec PCspec = tabHost.newTabSpec("2");
PCspec.setIndicator("", getResources().getDrawable(R.drawable.windows));
Intent PCIntent = new Intent(this, pc.class);
PCspec.setContent(PCIntent);

tabHost.addTab(skyspec);
tabHost.addTab(XBMCspec);
tabHost.addTab(PCspec); 
```

WebView 和选项卡工作正常。我无法解决的是如何将（例如） webviewHome.loadUrl("javascript:button('right')") 从选项卡之一发送到 WebView 而无需重新加载 Activity。

您的专业知识将不胜感激...

# javascript - 在提交表单之前显示一个 css 弹出窗口

> ID：12746880
> 
> 赞同：0
> 
> 时间：2012-10-05T13:04:47.883
> 
> 标签：javascript, jquery, css

我想要的是显示一个 jQuery 对话框，例如“添加到购物车的商品”

我可以用一个提交按钮来做到这一点，但是当您在同一页面上有多个按钮时，onclick 功能会变得混乱。

另外，我希望对话框按钮显示一段时间，然后当对话框关闭时，才应该提交表单

我在[http://www.partydecorationsonline.co.uk/NewProducts.asp?subcat=2133有一个实时网页](http://www.partydecorationsonline.co.uk/NewProducts.asp?subcat=2133)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:19:40.217

为弹出窗口使用好的库[Fancybox](http://bitbonsai.com/facybox/)或使用[其他](http://smashingspy.com/32-best-jquery-popup-window-dialog-box-example/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:37:52.323

使用 jquery 对话框

```
var dialog = $('#dialog').dialog({
    //some configuration
    ...
    close: function(){ 
       if (current_form) current_form.submit(); 
    }
});

//when submit button is clicked
var form = $('#form').submit(function(){
    dialog.dialog('open');
}); 
```

为多种形式编辑：

```
var current_form;
$('.form').submit(function(){
    current_form = $(this);
    dialog.dialog('open');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T13:20:07.380

您可以使用 jquery[对话框](http://jqueryui.com/demos/dialog/)。然后写一个这样的函数，

```
 //This will only submit the form after the dialog is closed.
    $('#dialog_box).close(function(){
      $('.form').submit();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T13:13:53.593

您可以简单地在您的 asp 按钮 onclientclick 中使用此代码：

```
onclick="return confirm('Items added to your Shopping cart')" 
```

但是您不能设置此窗口的样式，它只是一个简单的 javascript 警报。

# mysql - 在rails控制器中使用名字，姓氏的组合排序结果

> ID：12746882
> 
> 赞同：1
> 
> 时间：2012-10-05T13:05:05.780
> 
> 标签：mysql, ruby, ruby-on-rails-3, indexing

我想通过名字和姓氏的组合对查询结果进行排序。

用户模型的索引定义为

```
define_index do
  indexes :first_name
  indexes :last_name

  has first_name, :as => :fname
  has last_name, :as => :lname
end 
```

在我的控制器的操作中，我正在检索这样的结果。

```
 @results = User.search(query,
                                :with => options,
                                :order => "fname ASC",                                
                                :match_mode => :extended).page(params[:page]).per(11) 
```

它按 first_name 排序结果，结果是这样的。

```
 Micheal Clark
              Niel Johnson
              Micheal Beaven 
```

但我想通过名字和姓氏的组合来排序结果。应该退回这样的东西。

```
 Micheal Beaven
              Micheal Clark                  
              Niel Johnson 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:14:36.337

改变

```
has last_name, :as => :fname 
```

到

```
has first_name, :as => :fname 
```

以下应该工作

```
:order => "first_name, last_name", 
```

# java - 导入 CSV 文件并比较用户条目

> ID：12746884
> 
> 赞同：-1
> 
> 时间：2012-10-05T13:05:09.540
> 
> 标签：java, csv, io, bufferedreader

开始一个项目，这让我很生气。我认为代码没问题，但我不明白如何返回记录或解析行。

我有一个 CSV 文件，它在 Libra 中显示如下。

用户密码克里斯密码米歇尔密码约翰密码

我让用户输入他们的用户名和密码，然后尝试将它们与 CSV 进行比较，以确保 1）用户名存在，2）如果存在，则密码正确。老实说，第 2 部分不是必需的，因为它不是规范的一部分，但我想这样做，而且我怀疑这与我遇到的问题相同。正如我所说，我认为代码没问题，但我不确定变量 thisLine 的格式是什么，我的 else 语句是否正确地将 BufferedReader 移动到下一行？

我可以使用 thisLine.trim() 将 USER PASSWORD 对 USER 进行剪切吗？

static void readFromCsvFile(String sFileName, User user) throws FileNotFoundException { String thisLine;

```
 try
        {
           BufferedReader reader = new BufferedReader(new FileReader(sFileName));
           thisLine = reader.readLine();
           System.out.print(thisLine);

           while((thisLine = reader.readLine()) != null)
               {
                    if (user.displayUserName() == thisLine)
                    {
                    System.out.print("\nUser <-" + user.displayUserName() + " -> exists!");
                    reader.close();
                    }

                    else 
                    {
                        thisLine = reader.readLine();
                    }
               }

        }
        catch(IOException e)
        {
            System.out.print("\nUser does not exist\n"); 
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:17:43.277

这里有几点说明：

1)`thisLine.trim()`只会删除`thisLine`内容开头和结尾的尾随空格。这样做是可以的，特别是如果您要比较两个字符串，但它不会从变量中拆分用户名和密码。

2) 要拆分您应该使用的两个不同的值`thisLine.split(" ")`（我假设您的 CSV 文件使用空格来分隔不同的字段）。

3) 另一个错误是使用`==`而不是比较字符串`equals`，这是正确的做法。

`while`4）由于您在不需要内部的条件下读取新行`reader.readLine()`

5）最后，永远不要关闭循环内的流（或阅读器）！在一个`try/catch/finally`街区上做。

因此，通过这些更正，您的代码将如下所示：

```
 static void readFromCsvFile(String sFileName, User user) throws FileNotFoundException { 
   String thisLine;
   BufferedReader reader = new BufferedReader(new FileReader(sFileName));
    try
    {

       thisLine = reader.readLine();
       System.out.print(thisLine);

       while((thisLine = reader.readLine()) != null)               
           {
               thisLine = thisLine.trim();
               String username = thisLine.split(" ")[0];
                if (user.displayUserName().equals(username))
                {
                System.out.print("\nUser <-" + user.displayUserName() + " -> exists!");
                break;   // break the loop
                }                    
           }

    }
    catch(IOException e)
    {
        System.out.print("\nUser does not exist\n"); 
        e.printStackTrace();
    } 
    finally {
        try {
            reader.close();
        } catch (IOException e) { /* ignore */ }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:07:49.650

比较两个字符串：

```
firstString.equal(secondString); 
```

另一个问题是`thisLine`包含用户名和密码（例如“Chris Password”），因此您必须将行拆分为单独的用户名（“Chris”）和密码（“Password”）。

```
while((thisLine = reader.readLine()) != null)
{
    thisLine = thisLine.trim()
    // userData[0] => Username and userData[1] => Password
    String userData[] = thisLine.split(" ");
    if (user.displayUserName().equal(userData[0]))
    {
        System.out.print("\nUser <-" + user.displayUserName() + " -> exists!");
    }
} 
```

# c - 为什么使用 asprintf() 而不是 sprintf()？

> ID：12746885
> 
> 赞同：63
> 
> 时间：2012-10-05T13:05:23.457
> 
> 标签：c, printf, gnu, asprintf

我很难理解你为什么需要 asprintf。在手册中它说

> 函数`asprintf()`and`vasprintf()`是 and 的类似物`sprintf(3)`， `vsprintf(3)`除了它们分配一个足够大的字符串来保存包括终止空字节在内的输出，并通过第一个参数返回一个指向它的指针。`free(3)`当不再需要时，应该传递该指针 以释放分配的存储空间。

所以这是我试图理解的例子：

```
asprintf(&buffer, "/bin/echo %s is cool", getenv("USER")); 
```

如果缓冲区分配足够大的字符串与说 char* = (string) 有什么区别

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-10-05T13:19:09.613

如果使用`sprintf()`or `vsprintf()`，则需要先分配一个缓冲区，并且需要确保该缓冲区足够大以容纳 sprintf 写入的内容。否则`sprintf()`将愉快地覆盖缓冲区末尾之外的任何内存。

```
char* x = malloc(5 * sizeof(char));
// writes "123456" +null but overruns the buffer
sprintf(x,"%s%s%s", "12", "34", "56"); 
```

... 写入 '6' 并在`null`分配给 的空间结束后终止`x`，要么破坏其他变量，要么导致分段错误。

如果幸运的话，它会在分配的块之间践踏内存，并且不会造成任何伤害——这一次。这会导致间歇性错误——最难诊断的错误。使用像*ElectricFence*这样的工具会很好地导致溢出快速失败。

提供过长输入的非恶意用户可能会导致程序以意想不到的方式运行。恶意用户可以利用此方法将自己的可执行代码导入系统。

防止这种情况的一种方法是使用`snprintf()`，它将字符串截断为您提供的最大长度。

```
char *x = malloc(5 * sizeof(char));
int size = snprintf(x, 5, "%s%s%s", "12", "34", "56"); // writes "1234" + null 
```

返回值是空间可用时写入的长度——*不*`size`包括*终止的 null*。

 **在这种情况下，如果`size`大于或等于 5，那么您就知道发生了截断 - 如果您不想截断，您可以分配一个新字符串并重试`snprintf()`。

```
char *x = malloc(BUF_LEN * sizeof(char));
int size = snprintf(x, 5, "%s%s%s", "12", "34", "56");
if (size >= BUF_LEN) {
    realloc(&x,(size + 1) * sizeof(char));
    snprintf(x, size + 1 , "%s%s%s", "12", "34", "56");
} 
```

（这是一个非常幼稚的算法，但它说明了这一点。其中可能还存在错误，这进一步说明了这一点——这东西很容易搞砸。）

`asprintf()`为您一步完成 - 计算字符串的长度，分配该内存量，并将字符串写入其中。

```
char *x;
int size = asprintf(&x, "%s%s%s", "12", "34", "56"); 
```

在所有情况下，一旦你完成了`x`你需要释放它，或者你泄漏内存：

```
free(x); 
```

`asprintf()`是一个隐含的`malloc()`，所以你必须检查它是否有效，就像你使用`malloc()`或任何其他系统调用一样。

```
if (size == -1 ) {
   /* deal with error in some way */
} 
```

请注意，这`asprintf()`是 libc 的 GNU 和 BSD 扩展的一部分 - 您不能确定它在每个 C 环境中都可用。`sprintf()`并且`snprintf()`是 POSIX 和 C99 标准的一部分。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-05T13:09:12.113

好处是安全。

许多程序通过在填充用户提供的数据时使程序员提供的缓冲区溢出而允许系统漏洞发生。

为您`asprintf`分配缓冲区保证不会发生。

但是，您*必须*检查 的返回值`asprintf`以确保内存分配确实成功。见[http://blogs.23.nu/ilja/2006/10/antville-12995/](http://blogs.23.nu/ilja/2006/10/antville-12995/)**

# sql - SQLite 更新方法不会因无效数据类型而失败

> ID：12746886
> 
> 赞同：0
> 
> 时间：2012-10-05T13:05:24.720
> 
> 标签：sql, database, sqlite

我在使用 SQLite 数据库时遇到了一个奇怪的问题，特别是对 UPDATE 查询的数据验证。所以让我开始吧，如果我使用以下查询，当我尝试运行它时会出现“数据类型不匹配”错误。这是正确的和预期的，因为字段类型被标记为整数。

```
INSERT OR REPLACE INTO Table ('Column') VALUES ('shouldFail') 
```

但是，人们也期望以下 UPDATE 查询应该返回相同的“数据类型不匹配”错误，但事实并非如此。我可以很好地运行以下查询，这使我可以在仅标记为 INTEGER 的列中得到一个“字符串”数据类型......

```
UPDATE Table SET 'Column'='shouldFail' WHERE SecondColumn = 'Some value' 
```

那么谁能告诉我为什么 SQL 数据类型验证在第一个查询上有效，而在第二个查询上无效？

非常感谢山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:28:29.217

以我的 MySQL 知识，我会说这`REPLACE`不是. 此外，我敢打赌，当使用错误的数据类型更新行并且值设置为默认值（整数为 0）时，您的数据库设置为仅发出警告。插入失败，更新引发警告。不幸的是，我对 sqlite 不是很熟悉，但我在某处听说它们并没有那么不同？`UPDATE``DELETE, THEN INSERT`

PS：试试看`SHOW WARNINGS;`有没有什么...

# python - os.rename() 文件到文件夹名称的一部分

> ID：12746888
> 
> 赞同：3
> 
> 时间：2012-10-05T13:05:35.083
> 
> 标签：python, operating-system, rename

我有多个看起来像`folder.0`和`folder.1`. 在每个文件夹`'junk'`中都有一个文件（ 这是我正在尝试做的事情：`.0``.1`

```
inDirec = '/foobar'
outDirec = '/complete/foobar'

for root, dirs,files in os.walk(inDirec):
    for file in files:
        if file =='junk'
            d = os.path.split(root)[1]
            filename, iterator = os.path.splitext(d)  # folder no. captured
            os.rename(file, iterator+file) # change name to include folder no.
            fullpath = os.path.join(root,file)
            shutil.copy(fullpath,outDirec) 
```

这将返回：

```
os.rename(file,iterator+file)
OSError: [Errno 2] No such file or directory 
```

我什至不确定我应该使用 os.rename。我只想将它们拉出`files == 'junk'`并将它们复制到一个目录中，但它们都具有完全相同的名称。所以我真的只需要重命名它们，这样它们就可以存在于同一个目录中。有什么帮助吗？

### 更新

```
 for root, dirs,files in os.walk(inDirec):
    for file in files:
        if file =='junk'
            d = os.path.split(root)[1]
            filename, iterator = os.path.splitext(d)  # folder no. captured
            it = iterator[-1] # iterator began with a '.'

            shutil.copy(os.path.join(root,file),os.path.join(outDirec,it+file)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T13:20:44.820

您的问题是您的程序在启动时使用工作目录进行重命名操作。您需要提供完整的相对或绝对路径作为 os.rename() 的参数。

代替：

```
os.rename(file, iterator+file)
fullpath = os.path.join(root,file)
shutil.copy(fullpath,outDirec) 
```

使用（如果您想移动）：

```
os.rename(os.path.join(root, file), os.path.join(outDirec, iterator+file)) 
```

或者（如果你想复制）：

```
shutil.copy(os.path.join(root, file), os.path.join(outDirec, iterator+file)) 
```

注意：目标目录应该已经存在，否则您将需要代码来创建它。

# http - 仅在一页使用 https

> ID：12746897
> 
> 赞同：-1
> 
> 时间：2012-10-05T13:05:59.043
> 
> 标签：http, https, security

我正在尝试设计一个需要访问者登录的在线法官网站。

我想确保网站是安全的。我决定使用 https，但似乎 https 比 http 慢得多。所以我只想在登录页面使用 https。

我是一个关于网络开发的 n00b。我用谷歌搜索并测试了它，我发现在 http 页面上我无法通过 https 页面获取存储在 HTML5 localStorage 中的数据。从 http 页面发布到 https 页面也是不可能的。所以我该怎么做？将所有网站放在 https 或仅使用 http（有没有安全的方法来保护传输的数据？）

PS：我想通过https连接发送用户名和密码，得到一个密钥和一个加密的sessionID，当访问者发出下一个请求时，ID会被解密并发送给服务器，服务器会返回另一个加密的sessionID用同一个键。所以我只需要确保第一个连接是安全的。也许有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:12:44.517

只需在您的完整网站上使用 HTTPS。您将为自己省去很多麻烦。唯一显着的性能影响是连接的初始部分，对用户来说，这也是微不足道的。关于服务器性能，浏览器将重新使用已建立的连接来进行快速的后续请求，从而减少负载。我质疑您关于“https 要慢得多”的断言……这是假设还是测量？

# iphone - 将 webView 实例变量附加到 Web View 对象

> ID：12746898
> 
> 赞同：1
> 
> 时间：2012-10-05T13:06:05.483
> 
> 标签：iphone, ios, xcode, google-maps

我正在尝试遵循本[教程](https://developers.google.com/maps/articles/tutorial-iphone) 本教程有点过时了，因为 NIB 文件不再像 xCode 故事板那样使用。所以我的问题是如何将 webView 实例变量附加到 Web View 对象？这可能是一个非常基本的问题，因此我对此很陌生。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:51:26.323

好的，我发现了如何做到这一点。这是一个如何创建 webView的[教程，视频从我遇到的整个委托开始。](http://www.youtube.com/watch?feature=player_detailpage&v=tIyQP3A7amw#t=201s)该视频仍然适用于界面构建器而不是故事板，但想法非常相似。

# parsing - scala中的AST解析器数据类型问题

> ID：12746903
> 
> 赞同：0
> 
> 时间：2012-10-05T13:06:19.353
> 
> 标签：parsing, scala, abstract-syntax-tree

这是我的代码： http: [//pastie.org/private/t37ectjdnplit66zidj6hq](http://pastie.org/private/t37ectjdnplit66zidj6hq)

此代码用于类似 pascal 的语言解析器。我在这些行中遇到了问题：178、181、193。当我使用关键字定义语法时：[Any]，我运行成功！但是当我用特征和“案例类”之一替换该关键字时，它会通知我有一个错误！我想我不明白使用代码时的含义：解析器[???]。有人可以帮我解决这些问题吗？

```
line 181: def val_type : Parser[Type] = primitive| array_type | string_type

line 193: def ident_list  : Parser[List[Id]] = ident ~(rep(","~> ident)) 
```

更新：以下是相应的错误：

```
line 181: type mismatch;  found   : MPRecognizer.this.Parser[Any]  required:   MPRecognizer.this.Parser[Type]
line 193: type mismatch;  found   : MPRecognizer.this.Parser[MPRecognizer.this.~[String,List[String]]]  required: MPRecognizer.this.Parser[Id] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:09:07.613

您需要向我们展示原始代码，而不是您通过使所有内容都返回而修改的代码`Parser[Any]`。

错误消息告诉您，并非所有替代方案都会产生`Type`. 例如，检查方法`primitive`，`array_type`并且`string_type`都返回一个`Parser[Type]`. 为它们中的每一个添加类型注释，如果在修改后的定义中出现类型错误，请以相同的方式进一步缩小范围。

# bash - 如何在文件的特定字段中的单词字符之间插入空格

> ID：12746906
> 
> 赞同：3
> 
> 时间：2012-10-05T13:06:26.577
> 
> 标签：bash, awk, processing-efficiency

我有一个包含 100000 行的文件

```
1 0110100010010101
2 1000010010111001
3 1000011001111000
10 1011110000111110
123 0001000000100001 
```

我想知道如何通过在字符之间添加空格来有效地显示第二个字段。

```
0 1 1 0 1 0 0 0 1 0 0 1 0 1 0 1
1 0 0 0 0 1 0 0 1 0 1 1 1 0 0 1
1 0 0 0 0 1 1 0 0 1 1 1 1 0 0 0
1 0 1 1 1 1 0 0 0 0 1 1 1 1 1 0
0 0 0 1 0 0 0 0 0 0 1 0 0 0 0 1 
```

一种解决方案是使用 awk 获取第二列，然后使用 sed 添加空格。但由于文件太长，我想避免使用管道。然后我想知道我是否可以通过使用 awk 来做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T13:11:00.223

这个可以吗？

```
awk '{gsub(/./,"& ",$2);print $2}' yourFile 
```

**例子**

```
kent$  echo "1 0110100010010101
2 1000010010111001
3 1000011001111000"|awk '{gsub(/./,"& ",$2);print $2}'
0 1 1 0 1 0 0 0 1 0 0 1 0 1 0 1 
1 0 0 0 0 1 0 0 1 0 1 1 1 0 0 1 
1 0 0 0 0 1 1 0 0 1 1 1 1 0 0 0 
```

**更新**

第一列中超过 2 位数字不起作用？我没明白：

```
kent$  echo "133 0110100010010101
233 1000010010111001
333 1000011001111000"|awk '{gsub(/./,"& ",$2);print $2}'
0 1 1 0 1 0 0 0 1 0 0 1 0 1 0 1 
1 0 0 0 0 1 0 0 1 0 1 1 1 0 0 1 
1 0 0 0 0 1 1 0 0 1 1 1 1 0 0 0 

gsub(/./,"& ", $2)

1 /./  match any single character
2 "& " & here means the matched string, in this case, each character
3 $2   column 2

so it means, replace each character in 2nd column into the character itself + " ". 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T13:10:30.350

一种仅使用的方法`awk`：

```
awk '{ gsub( /./, "& ", $2 ); print $2; }' infile 
```

这会产生：

```
0 1 1 0 1 0 0 0 1 0 0 1 0 1 0 1 
1 0 0 0 0 1 0 0 1 0 1 1 1 0 0 1 
1 0 0 0 0 1 1 0 0 1 1 1 1 0 0 0 
```

* * *

**编辑**：**肯特**和我给出了相同的实现，所以，为了让这个答案更有用，我将添加`sed`一个：

```
sed -e 's/^[^ ]* *//; s/./& /g' infile 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T13:16:58.177

只需添加一个 sed 替代方案：

```
sed -e 's/^.* *//;s/./& /g;s/ $//' file 
```

三个命令：

1.  删除行首的字符和空格
2.  用它自己替换每个字符，后跟一个空格
3.  （可选）删除行尾的尾随空格

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T13:16:29.317

`sed`解决方案。

```
sed 's/.* //;s/\(.\)/\1 /g' 
```

它在每行的末尾添加了一个额外的空格。添加`;s/ $//`到表达式以将其删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T07:47:03.960

这可能对您有用（GNU sed）：

```
sed 's/^\S*\s*//;s/\B/ /g' /file 
```

# sql - 如何自动将实体模型更改部署到数据库？

> ID：12746908
> 
> 赞同：2
> 
> 时间：2012-10-05T13:06:31.350
> 
> 标签：sql, visual-studio, entity-framework, deployment, continuous-integration

目前我使用 Visual Studio 数据库项目，所以我可以一键部署对数据库的更改并将数据保存在数据库中。

现在我希望能够在实体框架中创建模型并一键部署。

所以我得到了 sql 脚本来从实体框架创建数据库。我可以运行此脚本来创建数据库，但我想将我的数据保存在数据库中。

有什么办法吗？有什么工具可以做到这一点？我应该使用 T4 自己生成它吗？

我使用 CI，所以我需要能够经常部署。我想要类似于 Visual Studio 数据库项目部署的东西，但使用实体框架生成的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:30:17.223

[Liquibase](http://www.liquibase.org/)是一个数据库变更管理工具。它是用 Java 实现的，但可以使用命令行版本来控制您的数据库升级（.NET 版本正在开发中）。

如果您需要一些建模工具支持，那么 [Power 架构师](http://code.google.com/p/power-architect/)可以与[liquibase](http://www.liquibase.org/)一起使用。

与管理数据库模式升级相关的问题是微妙的。对于一些背景阅读，我建议：

*   [进化数据库设计](http://martinfowler.com/articles/evodb.html)
*   [让您的数据库处于版本控制之下](http://www.codinghorror.com/blog/2008/02/get-your-database-under-version-control.html)

# 更新

创建一个名为**liquibase.properties**的文件来保存数据库详细信息：

```
url=jdbc:sqlserver://localhost:1433;databaseName=test
username=myuser
password=mypass
driver=com.microsoft.sqlserver.jdbc.SQLServerDriver
classpath=C:\\Program Files\\Microsoft SQL Server 2005 JDBC Driver\\sqljdbc_1.2\\enu\\sqljdbc.jar
changeLogFile=database-changelog.xml 
```

对现有数据库使用 liquibase 时，您可以运行以下命令：

```
liquibase generateChangeLog
liquibase changelogSync 
```

第一个命令将创建一个名为**database-changelog.xml**的 XML 文件，其中包含提取的数据模型。
第二个命令是可选的，但如果您想对当前数据库应用新的更改，它很有用。它将提取的变更集标记为已在数据库中执行。

现在您有了一个起点，您可以继续将新的变更集添加到**database-changelog.xml**文件中。要应用这些新更改，只需运行以下命令：

```
liquibase update 
```

这与您用于全新数据库的命令相同。在更新操作期间，liquibase 会将 XML 文件中的变更集与已应用于目标数据库的变更集进行比较。

对于更高级的用例，我建议阅读 liquibase 文档，以下答案也可能有所帮助：

*   [使用 liquibase 比较数据库并生成 sql 脚本](https://stackoverflow.com/questions/8397488/comparing-databases-and-genrating-sql-script-using-liquibase/8408334#8408334)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T23:58:46.807

为了能够从实体框架模型生成 Visual Studio 数据库项目，您需要安装**Entity Designer Database Generation Power Pack**。

您需要将数据库项目添加到您的解决方案中，然后创建**具有相同名称的**edmx 模型。然后右键单击 edmx 工作区并选择**Generate Database from Model**和从生成菜单**Sync Database Project**。

然后，您可以将此 Sql 项目从 Visual Studio 部署到 Sql Server。

# upgrade - STM32如何升级固件？

> ID：12746910
> 
> 赞同：1
> 
> 时间：2012-10-05T13:06:33.067
> 
> 标签：upgrade, bootloader, stm32

大家好，

我认为这可能是个愚蠢的问题。

我正在使用 STM32F2XXX 系列控制器。我想升级我的固件。我的新固件将存储在控制器的 RAM 中。

因此，如果我想使用这个新固件并升级设备的固件，我需要在引导加载程序代码中进行哪些更改？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-16T11:11:44.370

请查看此[应用说明](https://www.st.com/content/ccc/resource/technical/document/application_note/27/38/37/58/c2/8c/40/07/DM00161366.pdf/files/DM00161366.pdf/jcr:content/translations/en.DM00161366.pdf)。但请注意：F2 系列的闪存大小从 128KB 到 1MB 不等，但内部 RAM 只有 128KB，因此您需要为您的程序实现一个异地存储位置。因为它不适合您的 RAM。

# python - 如何让 Python 显示超过 50 个小数位？

> ID：12746911
> 
> 赞同：2
> 
> 时间：2012-10-05T13:06:34.050
> 
> 标签：python, floating-point, floating-point-precision

我写了这个程序来计算 pi。它给了我 50 个小数位。我怎样才能获得更高的精度？

```
# pi.py - arctan(1) * 4 = pi
from math import *
from decimal import *

err = 0.0000000000000001

def arctan(n, err):
    """Uses Gregory's formula for calculating atan."""
    temp = n
    atan = 0
    i = 3
    while (abs(atan - n) > err):
        atan = n
        n = n - (pow(temp, i)/i) + ((pow(temp, i + 2)) / (i + 2))
        i += 4
    return n

def euler(a, b, err):
    """Uses Euler's formula and fibonacci numbers."""
    euler = 0
    temp = 5
    while (abs(temp - euler) > err):
        temp = euler
        euler += arctan(1/b, err)
        a = b + a
        b = b + a
    return euler

pi = euler(1, 2, err) * 4
print(Decimal.from_float(pi)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T13:12:30.663

您必须将 Decimal prec 设置为更高的值。请参阅[此示例线程](https://stackoverflow.com/questions/4733173/how-can-i-show-an-irrational-number-to-100-decimal-places-in-python)。[官方 python 站点](http://docs.python.org/library/decimal.html)有更多示例。

此外，您应该使用十进制进行所有计算，而不仅仅是最后一步。否则，您将无法获得所需的精度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T23:10:28.983

或者查看支持任意精度浮点数的 mpmath。

而且，有些算法会无限期地一次生成一位 pi（没有极高的精度要求）。

# eclipse-plugin - 我可以更改 OSGi 包的父类加载器吗？

> ID：12746914
> 
> 赞同：0
> 
> 时间：2012-10-05T13:06:42.080
> 
> 标签：eclipse-plugin, osgi, classloader, bundle, equinox

问题陈述：在 Bundle A 中找到一个资源（比如说 myClass）并加载它，如果没有找到 在 Bundle B 中定位资源并以编程方式加载它，而控件位于 Bundle C 中。我对 A 和B束。

我所知道的是：对于每个 OSGi 包，父类加载器都是 Bundle 0 的类加载器。和系统bla bla

如果我将捆绑 B 的 CL 的父级更改为 -> 捆绑 A. 的 CL 并从捆绑 B 的 CL 更改 getClass 可以吗？

会采用最佳实践吗？

限制：不要使用import、export、require语句解决。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:22:45.627

好像做不到 Java 不提供 API 来设置父类加载器。很抱歉问这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T06:14:29.790

OSGi 中的最佳实践是不更改类加载器。OSGi 中的系统经过深思熟虑，如果您更改它，您将遇到各种麻烦。理想情况下，您根本不应该手动加载类。如果您需要类或资源的实例，则将其加载到包含它的包中。如果您随后在另一个捆绑包中需要它，最佳实践是发布带有实例的服务或带有实例的工厂。

# c# - 将一些代码从 C# 转换为 VB.net 在编译时抛出错误

> ID：12746918
> 
> 赞同：-2
> 
> 时间：2012-10-05T13:06:48.433
> 
> 标签：c#, vb.net, events

我正在尝试将以下代码转换为 VB.net

```
private void Application_Start(object sender, EventArgs e)
    {
        var defaultTableData = new DefaultTableData();
        defaultTableData.CheckAndUpdate();

        if (ConfigurationManager.AppSettings["RSAConfigSwitch"].ToString().ToUpper() == "ON")
        {
            FederatedAuthentication.ServiceConfigurationCreated += new EventHandler<ServiceConfigurationCreatedEventArgs>(FederatedAuthentication_ServiceConfigurationCreated);

        }

    }

    void FederatedAuthentication_ServiceConfigurationCreated(object sender, Microsoft.IdentityModel.Web.Configuration.ServiceConfigurationCreatedEventArgs e)
    {
        String certName = ConfigurationManager.AppSettings["CertificateName"].ToString(); // read from web.config
        System.Security.Cryptography.X509Certificates.X509Store store = new System.Security.Cryptography.X509Certificates.X509Store(System.Security.Cryptography.X509Certificates.StoreName.My, System.Security.Cryptography.X509Certificates.StoreLocation.LocalMachine);
        store.Open(OpenFlags.ReadOnly);
        System.Security.Cryptography.X509Certificates.X509Certificate2Collection col = store.Certificates.Find(System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectName, certName, true);
        var cookieProtectionCertificate = col[0];

        e.ServiceConfiguration.SecurityTokenHandlers.AddOrReplace(
            new SessionSecurityTokenHandler(new System.Collections.ObjectModel.ReadOnlyCollection<CookieTransform>(
                new List<CookieTransform> 
                    { 
                        new DeflateCookieTransform(), 
                        new RsaEncryptionCookieTransform(cookieProtectionCertificate), 
                        new RsaSignatureCookieTransform(cookieProtectionCertificate) 
                    })
            ));
    } 
```

转换后的 VB 代码

```
Sub Application_Start(ByVal sender As Object, ByVal e As EventArgs) 
        ' Fires when the application is started 
        FederatedAuthentication.ServiceConfigurationCreated += New EventHandler(Of ServiceConfigurationCreatedEventArgs)(FederatedAuthentication_ServiceConfigurationCreated)

    End Sub
Private Sub FederatedAuthentication_ServiceConfigurationCreated(ByVal sender As Object, ByVal e As Microsoft.IdentityModel.Web.Configuration.ServiceConfigurationCreatedEventArgs)  

        Try 
            Dim appCertificateName As String = System.Configuration.ConfigurationManager.AppSettings("adfsCertName") 
            If String.IsNullOrEmpty(appCertificateName) Then 
                Throw New Exception("ADFS_CERTIFICATE in config is empty") 
            End If 
            Dim store As X509Store = New X509Store(StoreName.My, StoreLocation.LocalMachine) 
            store.Open(OpenFlags.ReadOnly) 
            Dim col As X509Certificate2Collection = store.Certificates.Find(X509FindType.FindBySubjectName, appCertificateName, True)

            Dim cookieProtectionCertificate As X509Certificate2 = col(0) 
           e.ServiceConfiguration.SecurityTokenHandlers.AddOrReplace(New SessionSecurityTokenHandler(New System.Collections.ObjectModel.ReadOnlyCollection(Of CookieTransform)(New List(Of CookieTransform)() With { _

        New DeflateCookieTransform(), _ 
        New RsaEncryptionCookieTransform(cookieProtectionCertificate), _ 
        New RsaSignatureCookieTransform(cookieProtectionCertificate) _ 
})))                                                                          

        Catch ex As Exception 
            Throw ex 
        End Try 
    End Sub 
```

但我收到以下错误错误 103 'Public Shared Event ServiceConfigurationCreated(sender As Object, e As Microsoft.IdentityModel.Web.Configuration.ServiceConfigurationCreatedEventArgs)' 是一个事件，不能直接调用。使用“RaiseEvent”语句来引发事件。

有人可以帮我转换代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:47:37.680

从[http://www.developerfusion.com/](http://www.developerfusion.com/)将您的 C# 代码转换为 VB.net 后，我​​从那里得到了以下代码。就这样吧。，

`Private Sub Application_Start(sender As Object, e As EventArgs) Dim defaultTableData = New DefaultTableData() defaultTableData.CheckAndUpdate()`

```
If ConfigurationManager.AppSettings("RSAConfigSwitch").ToString().ToUpper() = "ON" Then

    FederatedAuthentication.ServiceConfigurationCreated += New EventHandler(Of ServiceConfigurationCreatedEventArgs)(AddressOf FederatedAuthentication_ServiceConfigurationCreated)
End If 
```

`End Sub`

`Private Sub FederatedAuthentication_ServiceConfigurationCreated(sender As Object, e As Microsoft.IdentityModel.Web.Configuration.ServiceConfigurationCreatedEventArgs) Dim certName As [String] = ConfigurationManager.AppSettings("CertificateName").ToString() ' read from web.config Dim store As New System.Security.Cryptography.X509Certificates.X509Store(System.Security.Cryptography.X509Certificates.StoreName.My, System.Security.Cryptography.X509Certificates.StoreLocation.LocalMachine) store.Open(OpenFlags.[ReadOnly]) Dim col As System.Security.Cryptography.X509Certificates.X509Certificate2Collection = store.Certificates.Find(System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectName, certName, True) Dim cookieProtectionCertificate = col(0)`

```
e.ServiceConfiguration.SecurityTokenHandlers.AddOrReplace(New SessionSecurityTokenHandler(New System.Collections.ObjectModel.ReadOnlyCollection(Of CookieTransform)(New List(Of CookieTransform)() From { _
    New DeflateCookieTransform(), _
    New RsaEncryptionCookieTransform(cookieProtectionCertificate), _
    New RsaSignatureCookieTransform(cookieProtectionCertificate) _
}))) 
```

`End Sub`

希望这可能会有所帮助。，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:48:15.293

编译器错误告诉您事件处理程序有问题。VB 不支持用于添加处理程序的 += 语法。请改用 AddHandler/AddressOf 关键字：

```
 AddHandler  FederatedAuthentication.ServiceConfigurationCreated, AddressOf FederatedAuthentication_ServiceConfigurationCreated 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:51:14.070

您的转换中有一些问题 - 试试这个：

```
Private Sub Application_Start(ByVal sender As Object, ByVal e As EventArgs)
    Dim defaultTableData = New DefaultTableData()
    defaultTableData.CheckAndUpdate()

    If ConfigurationManager.AppSettings("RSAConfigSwitch").ToString().ToUpper() = "ON" Then
        AddHandler FederatedAuthentication.ServiceConfigurationCreated, AddressOf FederatedAuthentication_ServiceConfigurationCreated
    End If
End Sub

Private Sub FederatedAuthentication_ServiceConfigurationCreated(ByVal sender As Object, ByVal e As Microsoft.IdentityModel.Web.Configuration.ServiceConfigurationCreatedEventArgs)
    Dim certName As String = ConfigurationManager.AppSettings("CertificateName").ToString() ' read from web.config
    Dim store As New System.Security.Cryptography.X509Certificates.X509Store(System.Security.Cryptography.X509Certificates.StoreName.My, System.Security.Cryptography.X509Certificates.StoreLocation.LocalMachine)
    store.Open(OpenFlags.ReadOnly)
    Dim col As System.Security.Cryptography.X509Certificates.X509Certificate2Collection = store.Certificates.Find(System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectName, certName, True)
    Dim cookieProtectionCertificate = col(0)

    e.ServiceConfiguration.SecurityTokenHandlers.AddOrReplace(New SessionSecurityTokenHandler(New System.Collections.ObjectModel.ReadOnlyCollection(Of CookieTransform)(New List(Of CookieTransform) From {
        New DeflateCookieTransform(),
        New RsaEncryptionCookieTransform(cookieProtectionCertificate),
        New RsaSignatureCookieTransform(cookieProtectionCertificate)
    })))
End Sub 
```

# c# - 如何使用 C# 获取耶路撒冷的当前时间？

> ID：12746921
> 
> 赞同：0
> 
> 时间：2012-10-05T13:06:54.333
> 
> 标签：c#, timezone

我需要知道耶路撒冷当前时间。

该代码占用服务器时间，但我需要耶路撒冷时间：

```
DateTime currentTime = DateTime.Now;
dayName = currentTime.DayOfWeek; 
```

编辑：

在 Vinoth 答案的帮助下（我只使用了 AddHours(2) 部分）它应该是这样的（不起作用）：

```
 DateTime currentTime = DateTime.Now;
      currentTime=currentTime.AddHours(2);//Jerusalem Time
      dayName = currentTime.DayOfWeek; 
```

Edit2：我的改进（ToUniversalTime()）

```
 DateTime currentTime = DateTime.Now;
      currentTime=currentTime.ToUniversalTime().AddHours(2);//Jerusalem Time
      dayName = currentTime.DayOfWeek; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T13:09:38.793

这将对您有所帮助。我用过这是我的应用程序之一。只需粘贴代码

```
public static DateTime GetIsraelTime(DateTime d) {
    d = d.AddHours(2);           // Israel is at GMT+2

    // April 2nd, 2:00 AM
    DateTime DSTStart = new DateTime(d.Year, 4, 2, 2, 0 ,0);  
    while (DSTStart.DayOfWeek != DayOfWeek.Friday)
        DSTStart = DSTStart.AddDays(-1);

    CultureInfo jewishCulture = CultureInfo.CreateSpecificCulture("he-IL");
    System.Globalization.HebrewCalendar cal = 
          new System.Globalization.HebrewCalendar();
    jewishCulture.DateTimeFormat.Calendar = cal;
    // Yom HaKipurim, at the start of the next Jewish year, 2:00 AM
    DateTime DSTFinish =
         new DateTime(cal.GetYear(DSTStart)+1, 1, 10, 2, 0 ,0, cal);
    while (DSTFinish.DayOfWeek != DayOfWeek.Sunday)
        DSTFinish= DSTFinish.AddDays(-1);

    if (d>DSTStart && d<DSTFinish)
        d = d.AddHours(1);

    return (d);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-02T13:59:26.620

`var israelTime = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(DateTime.Now, "Israel Standard Time")`

可以在[此处](https://stackoverflow.com/questions/14149346/what-value-should-i-pass-into-timezoneinfo-findsystemtimezonebyidstring)找到完整的时区 ID 列表。

# sql - 使用连接优化 sql 查询

> ID：12746927
> 
> 赞同：2
> 
> 时间：2012-10-05T13:07:11.083
> 
> 标签：sql, sql-server, performance, tsql, join

我有一张表，其中存储了近 1000 万行的人的信息。

目前 State 是 person 表上的一个 char(2) 字段。正如您所料，这会导致大量数据重复。如果我将 State 数据规范化到它自己的表中并在 person 表中为其创建一个 FK 会导致更快的查询时间吗？

前：

```
SELECT Name, City, State FROM Person WHERE State = 'WI' 
```

后：

```
SELECT p.Name, p.City, s.Name as State
FROM Person p
    INNER JOIN State s ON p.State == s.Id
WHERE s.Name = 'WI' 
```

在我看来，这会提高性能，但在优化查询方面我远非专家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:10:29.867

规范化可能会导致性能*下降*，但在这种情况下它很少会*提高*您的性能，因为现在服务器必须查看磁盘上的两个位置，而不仅仅是一个。

标准化有两个目的：

1.  减少*存储*在磁盘上的数据量
2.  允许在一个地方更新数据

您的查询不会受益于这些优势中的任何一个，因为

1.  char(2) 和 int （外键）之间没有太大区别
2.  状态的两位数代码永远不会改变，因此您永远不需要更新它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:15:11.600

如果您只谈论 2 个字符 - 那么将其拆分到新表可能没有多大用处。

（但是 - 考虑到允许的特定值域 - 如果有人输入 VX 或其他一些不允许的值怎么办 - 非规范化时无法正确或有效地进行约束）

如果您正在谈论其他信息，例如美国邮政缩写（2 个字符）和州全名，也许还有其他一些信息，那么绝对可以 - 将其分开。

作为实践问题，您应该始终在适当的规范化方面犯错（imo） - 然后经过冗长的争论之后，您才应该考虑非规范化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T13:15:44.373

如果您在状态表上创建一个非常窄的键，例如 TINYINT，那么您*可以*提高性能，但不能保证。不过，这完全值得测试。

考虑复制每个表，正确索引它们，然后使用分析器同时对两者运行查询。

您最终可能会提高 1% 的速度。

尽管如此，标准化很少是一个坏主意......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T13:22:00.297

只是没有多少空间可以节省。
您可以使用 byte (tinyint) 作为状态表上的主键，因为只有 50 个状态。
Char(2) 是两个字节。
因此，您只能在 person 表中每行保存一个字节。

压缩数据的优点是更少的磁盘空间和更少的内存。
对于固定数量的内存，如果数据较小，则内存中数据的机会更高。

我认为 1 字节的大小差异不值得加入的开销。

但我会规范化只是因为这是一个很好的做法。
为什么让某人进入JZ状态？

第 3 范式失败
[达到 3NF](http://www.relationaldbdesign.com/relational-database-analysis/module4/achieve-third-normal-form.php)
*如果有重复的组，则将这些组分离成它们自己的关系。*

您可以使用 char(2) 作为状态表中的 PK，因此 char(2) 与 char(2) 直接匹配。
这将满足第 3 范式，因为值仅限于 50 个状态。
在这种情况下，您不需要加入选择，因为实际值在主表中。
在插入或更新时，强制执行 FK 关系，因此它必须是有效状态。

如果您想报告整个状态，您可以在状态表中添加一列以获取全名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T18:59:34.677

好吧..在您的查询中，您正在做一些非最佳的事情。

```
SELECT p.Name, p.City, s.Name as State
FROM   Person p
       INNER JOIN State s ON p.State == s.Id
WHERE s.Name = 'WI' 
```

您将获得所有状态下记录的所有人员详细信息，然后您将使用“WI”过滤状态..

如果您尝试这样做，您将获得更少的状态！

```
SELECT p.Name, p.City, s.Name as State
FROM   Person p
       INNER JOIN State s 
         ON  p.State == s.Id
         and s.Name = 'WI' 
```

为什么？因为您只会获得名称为 WI 而不是所有状态列的状态列。

之后..如果它适合您的索引，请在 name = 'WI' 的状态上创建一个过滤索引

那会帮助一些..

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-05T13:17:14.807

搜索字符串索引（理论上）比搜索 int 索引慢得多。这意味着是的；规范化您的数据会使其更快。在实践中，我经常看到差异很小。YMMV。您可能需要预先缓存或单独选择状态 ID：

```
SELECT p.Name, p.City, s.Name as State
FROM Person p
INNER JOIN State s ON p.State == s.Id
WHERE s.Id = (select id from State where State.Name = 'WI'); 
```

与查询一样，最好进行测试和优化。

# iphone - IOS 6人脸检测不工作

> ID：12746934
> 
> 赞同：0
> 
> 时间：2012-10-05T13:07:31.023
> 
> 标签：iphone, ios, xcode, face-recognition, ciimage

我已使用以下代码检测 IOS 5 的面部

```
CIImage  *cIImage = [CIImage imageWithCGImage:image.CGImage];
            CIDetector* detector = [CIDetector detectorOfType:CIDetectorTypeFace context:nil options:[NSDictionary dictionaryWithObject:CIDetectorAccuracyHigh forKey:CIDetectorAccuracy]];
            NSArray *features = nil;
            features = [detector featuresInImage:cIImage];
            if ([features count] == 0) 
            {
                NSDictionary* imageOptions = [NSDictionary dictionaryWithObject:[NSNumber numberWithInt:6] forKey:CIDetectorImageOrientation];
                features = [detector featuresInImage:cIImage options:imageOptions];
            } 
```

使用此代码，我可以在 IOS 5 中检测到人脸，但最近我们已将系统升级到 Xcode 4.4 和 IOS 6，现在，人脸检测无法正常工作，

在 IOS 6 中检测人脸需要做哪些更改。

任何帮助都受到高度赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:05:37.693

我注意到 iOS6 中的人脸检测不如 iOS5 中的好。尝试选择图像。你可能会发现它在 iOS6 中可以正常工作，有很多图像，但不是全部。

我一直在测试同一组图像： 1\. 运行 iOS6 的模拟器。2\. iPhone 5 (iOS6) 3\. iPhone 3GS (iOS5)。

3GS 检测到的人脸比其他两个选项多。

这是代码，它适用于两者，但在 iOS6 上效果不佳：

```
- (void)analyseFaces:(UIImage *)facePicture {
// Create CI image of the face picture
CIImage* image = [CIImage imageWithCGImage:facePicture.CGImage];

// Create face detector with high accuracy
CIDetector* detector = [CIDetector detectorOfType:CIDetectorTypeFace
                                          context:nil options:[NSDictionary dictionaryWithObject:CIDetectorAccuracyHigh forKey:CIDetectorAccuracy]];

// Create array of detected faces
NSArray* features = [detector featuresInImage:image];

// Read through the faces and add each face image to facesFound mutable
for(CIFaceFeature* faceFeature in features)
{
    CGSize parentSize = facePicture.size;

    CGRect origRect = faceFeature.bounds;
    CGRect flipRect = origRect;
    flipRect.origin.y = parentSize.height - (origRect.origin.y + origRect.size.height);

    CGImageRef imageRef = CGImageCreateWithImageInRect([facePicture CGImage], flipRect);
    UIImage *faceImage = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);

    if (faceImage)
        [facesFound addObject:faceImage];
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:50:32.030

我希望这对你有帮助...

添加**CoreImage.framework**

```
-(void)faceDetector

{

// Load the picture for face detection

UIImageView* image = [[UIImageView alloc] initWithImage:

[UIImage imageNamed:@"facedetectionpic.jpg"]];

// Draw the face detection image

[self.window addSubview:image];

// Execute the method used to markFaces in background

[self markFaces:image];

}

-(void)faceDetector

{

// Load the picture for face detection

    UIImageView* image = [[UIImageView alloc] initWithImage:[UIImage 
imageNamed:@"facedetectionpic.jpg"]];

    // Draw the face detection image
    [self.window addSubview:image];

    // Execute the method used to markFaces in background
    [self performSelectorInBackground:@selector(markFaces:) withObject:image];

    // flip image on y-axis to match coordinate system used by core image
    [image setTransform:CGAffineTransformMakeScale(1, -1)];

    // flip the entire window to make everything right side up
    [self.window setTransform:CGAffineTransformMakeScale(1, -1)];

} 
```

并检查这两个链接

http://maniacdev.com/2011/11/tutorial-easy-face-detection-with-core-image-in-ios-5/

http://i.ndigo.com.br/2012/01/ios-facial-recognition/

# mediawiki - 只允许注册用户编辑谈话页面

> ID：12746943
> 
> 赞同：1
> 
> 时间：2012-10-05T13:08:02.487
> 
> 标签：mediawiki

我使用 mediawiki 已经有一段时间了，并且已经将它设置为只有我可以编辑页面：

```
$wgGroupPermissions['*']['edit'] = false;
$wgGroupPermissions['user']['edit'] = false;
$wgGroupPermissions['sysop']['edit'] = true; 
```

但是，我希望注册用户能够创建/编辑讨论页。我该怎么做呢？除了上述之外，我对 mediawiki 权限没有任何经验，但是从查看[此页面](http://www.mediawiki.org/wiki/Manual%3aUser_rights "MediaWiki 手册 - 用户权利")看来，您似乎必须具有编辑权限才能更改讨论页面，然后让我限制创建新页面并保护每个页面。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:02:00.677

您不能开箱即用，因为 MediaWiki 将编辑 Talk 页面与编辑 wiki 中的任何其他页面相同，但请查看[Talkright](http://www.mediawiki.org/wiki/Extension%3aTalkright)扩展程序。它做你想做的事。

# android - android 自动删除损坏的 SQLite 文件

> ID：12746944
> 
> 赞同：0
> 
> 时间：2012-10-05T13:08:03.093
> 
> 标签：android, sqlite

当 Android 打开一个 SQLite 文件并且该文件已损坏时，Android 会删除该文件。尽管听起来令人惊讶，但这种行为在 Android 源代码中明确实现，导致惊愕和这个 Android 问题。

作为解决方案——

*   不能实现恢复算法（aries），可以在android源代码中添加。

*   或者，最好使用任何其他数据库，如[Berkley DB Java Edition](http://www.oracle.com/technetwork/database/berkeleydb/overview/index-093405.html)、[H2 DB](http://www.h2database.com/html/main.html)或任何其他

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:16:40.630

SQLite 已经实现[了类似 ARIES 的恢复算法](http://www.sqlite.org/atomiccommit.html)（它更简单，因为 SQLite 中没有写并发）。但是，这无助于防止闪存中的错误。任何其他数据库都会看到类似的损坏。

应用程序已经预料到它们的数据会在用户删除或重新安装应用程序时消失。因此，将其用作错误恢复方法是有意义的；如果 Android 会从每个数据访问调用中返回 I/O 错误，那么大多数应用程序都会中断，因为处理此类错误从未经过测试或根本没有实现。

# php - “echo”中的“insset else”代码中的文本语法

> ID：12746947
> 
> 赞同：-1
> 
> 时间：2012-10-05T13:08:11.787
> 
> 标签：php, syntax, echo, isset

我有这个代码：

```
echo ('<div></div>
'.(isset($replay->extra['mode']) ? $replay->extra['mode'] : "n/a").' 
<div></div>') 
```

我想把这个文本放在刚才 $replay->extra['mode'] : "n/a") 之前。

```
M- 
```

所以它看起来像这样：

```
M-$replay->extra['mode'] : "n/a").' 
```

完全像这样：

```
 echo ('<div></div>
    '.(isset($replay->extra['mode']) ? M-$replay->extra['mode'] : "n/a").' 
    <div></div>') 
```

但是我不断收到**语法错误**，那么正确的语法和方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T13:09:13.147

您需要通过将字符串设为`if`字符串（用引号括起来）并使用`.`.

```
echo ('<div></div>'.(isset($replay->extra['mode']) ? 'M-' . $replay->extra['mode'] : "n/a").'<div></div>') 
```

您的`<div></div>`'s 也可能有错误 - 除非您尝试`<div>`在字符串之前和之后创建一个空字符串，否则您可能会使用以下`<div>`标签包装输出：

```
echo ('<div>'.(isset($replay->extra['mode']) ? 'M-' . $replay->extra['mode'] : "n/a").'</div>') 
```

# javascript - 将画布上的视频转换为 3d 网格的合适起点是什么

> ID：12746949
> 
> 赞同：7
> 
> 时间：2012-10-05T13:08:18.713
> 
> 标签：javascript, canvas, mesh

当前是否有 JavaScript 库用于将 Canvas 中的视频流转换为 3D 网格？

一个示例情况是将相机对准杯子并捕获原始图像，将先前的数据与新数据进行比较以生成视图内对象的边缘轮廓，理想情况下将其转换为最简单的多边形集并显示计算出的多边形/在第二个画布元素中建模。

我已经看到 mrdoob 在 3d javascript 上从目标文件到画布渲染的一些出色工作，但我希望捕获原始数据并尝试生成网格。目的是在 2 个用户之间通过套接字发送当前在摄像机视图中捕获的任何对象的网格点。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T17:10:53.260

它不是一个库，但这里正好展示了您正在寻找的技术。

[网络摄像头网格](http://www.chromeexperiments.com/detail/webcam-mesh/?f=)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T09:00:50.900

这是一个相当复杂的问题。大多数算法需要 2 个图像（立体视觉系统）才能识别 2d 信息并将其处理为 3d 对象。使用网络摄像头执行此操作并由 Javascript 支持是一个很大的挑战:)

基本上，我认为您必须结合一些计算机视觉技术（边缘检测、过滤、3d 到 2d 映射……）。

以下是一些可能有用的信息

用于 Javascript 的计算机视觉库 - [https://github.com/alex-m/seevee.js/wiki](https://github.com/alex-m/seevee.js/wiki)（移植一些众所周知的 opencv 函数） - 可用于获取网络摄像头图像、3d 处理等

轻量级 3D 库 - [https://github.com/mrdoob/three.js/](https://github.com/mrdoob/three.js/)

请参阅此方法[http://www.eng.cam.ac.uk/news/stories/2009/3D_models/](http://www.eng.cam.ac.uk/news/stories/2009/3D_models/)

# java - Hibernate 初学者的疑惑

> ID：12746954
> 
> 赞同：0
> 
> 时间：2012-10-05T13:08:45.903
> 
> 标签：java, hibernate, jpa, hql, jpql

嗨，我是新来的休眠。我阅读了很多关于阅读哪本书和阅读什么规范的主题和讨论。但问题是有些线程太老了，我不明白从哪里开始。我从开发人员指南中的 Hibernate 规范开始，我认为这太复杂了。所以我读了一些小教程。实际上，我被分配到某个项目，我被告知使用了 Hibernate。但是由于对Hibernate知之甚少，我完全迷路了。在代码中，我可以看到在 Maven pom Hibernate 中使用了。我发现 META-INF/Persistence.xml 包含：

```
 <?xml version="1.0" encoding="UTF-8" ?> 
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" version="1.0">
 <persistence-unit name="EmployeeDatabase" transaction-type="JTA">
    <jta-data-source>java:EmpDS</jta-data-source>   
<provider>org.hibernate.ejb.HibernatePersistence</provider> 
<class>entity.Employee</class> 
<properties>
  <property name="hibernate.connection.password" value="Usha" /> 
  <property name="hibernate.archive.autodetection" value="class" /> 
  <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver" /> 
  <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/Employee" /> 
  <property name="hibernate.connection.username" value="Usha" /> 
  <property name="hibernate.hbm2ddl.auto" value="update" /> 
  <property name="hibernate.show_sql" value="false" /> 
    </properties>
 </persistence-unit> 
```

我认为休眠配置必须通过 hibernate.cfg.xml 完成。但我无法在任何地方找到它。在进行查询时的代码中没有提到休眠。所有查询都是使用 import javax.persistence.Query 完成的。所以我猜想JPQL是用来做查询的。

**所以我的问题是：这真的是 Hibernate 还是 JPA 还是什么？**

我什么时候可以说这是使用 Hibernate 进行持久性。

何时使用 JPQL，何时使用 HQL？

请任何人都可以指导我完成这个。请明确我想先学习 Hibernate，然后再深入研究我的任务。但我不知道从哪里开始。哪本书或教程最好。

最好的问候，吉娜

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T13:10:59.133

> 这真的是 Hibernate 或 JPA 还是什么？

JPA 是一个框架，而 Hibernate 是一个可以使用 JPA 框架的实现。所以不要把它们混为一谈。

> 何时使用 JPQL，何时使用 HQL？

同样，JPQL 是一种标准语言，并且不仅与 Hibernate 相关联。但是，如果您只使用 Hibernate，您可能会发现 HQL 有更多选择并且更灵活。

[http://en.wikipedia.org/wiki/Java_Persistence_Query_Language](http://en.wikipedia.org/wiki/Java_Persistence_Query_Language) 参考这个：

> JPQL 基于 Hibernate 查询语言 (HQL)，这是一种早期的非标准查询语言，包含在 Hibernate 对象-关系映射库中。
> 
> Hibernate 和 HQL 是在 JPA 规范之前创建的。从 Hibernate 3 开始，JPQL 是 HQL 的子集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T13:21:06.297

> 所以我的问题是：这真的是 Hibernate 还是 JPA 还是什么？

这是使用 Hibernate 作为实现的 JPA。

JPA是一个标准，Hibernate是JPA标准的实现之一

尝试遵循 Hibernate 文档和教程，然后使用 Hibernate EntityManager 使您的项目符合 JPA

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T14:22:43.427

Hibernate 是 JPA 的实现。但希伯兰特还有更多。hibernate 中还有其他方法可以将对象持久保存到数据库中。如前所述，您可以将 JPA 与[myBatis](http://blog.mybatis.org/)等其他框架一起使用。

在 Hibernate 中，使用 JPA 是一种选择。使用 JPA 选项时，您必须使用`EntityManager`and `EntityManagerFactory`。您必须使用`persistance.xml`.

另一方面，您可以使用其他选项，例如`Criteria API`或`HQL`。使用 Hibernate 特定选项时，您必须使用`Session`and `SessionFactory`。您必须`hibernate.cfg.xml`在创建 SessionFactory 时使用。

# ios - 在 subView 上绘制 UIImage 并与 UIScrollView 交互

> ID：12746955
> 
> 赞同：0
> 
> 时间：2012-10-05T13:08:47.540
> 
> 标签：ios, xcode, uiview, uiscrollview, uiimage

我有`ViewController`一个`UIScrollView`和 3 个子视图。我已经将 UIScrollView 的大小声明为通过水平滚动获得 3 个视图。我试图在每个子视图的顶部绘制一个新图像，当视图滚动时，我希望新图像将与子视图一起滚动。现在，我设法绘制了新图像，但即使我滚动视图，它仍然是静态的。

```
x = [button frame].origin.x;
y = [button frame].origin.y;
check = [[UIImageView alloc] initWithFrame:CGRectMake(x+100,y+100, 20, 20)];
check.image = [UIImage imageNamed:@"check.png"];    
[self.view addSubview:check]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:17:32.717

不要在滚动视图中绘制它。在您的自定义 UIImageView 子类中绘制它。或者将子视图添加到您的图像视图中。

# android - 在 Windows 上的 NDK 构建中找不到 opencv.hpp

> ID：12746956
> 
> 赞同：0
> 
> 时间：2012-10-05T13:08:51.117
> 
> 标签：android, opencv, android-ndk

当我尝试用 Cgywin 编译我的代码时，我在这里遇到了一些问题。

```
$ /cygdrive/c/native_work/android-ndk-r8b/ndk-build
Android NDK: WARNING: Unsupported source file extensions in jni/Android.mk for module main
Android NDK:   NotePaperDetector.hpp
Install        : libmain.so => libs/armeabi-v7a/libmain.so 
```

那么我如何编译 .hpp 文件呢？

现在正如@mah 你所说我已经从我的 Android.mk 中删除了它，但现在它显示了一些不同的错误 -

```
$ /cygdrive/c/native_work/android-ndk-r8b/ndk-build
Compile++ thumb  : main <= NotePaperDetector.cpp
In file included from jni/NotePaperDetector.hpp:4:0,
             from jni/NotePaperDetector.cpp:1:
jni/NoteLocation.hpp:4:30: fatal error: opencv2/opencv.hpp: No such file or directory
compilation terminated.
/cygdrive/c/native_work/android-ndk-r8b/build/core/build-binary.mk:255: recipe for      target `obj/local/armeabi-v7a/objs/main/NotePaperDetector.o' failed
make: *** [obj/local/armeabi-v7a/objs/main/NotePaperDetector.o] Error 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:51:40.360

使用最新的 NDK 版本，您根本不需要 Cygwin。

顺便说一句，GNU/Linux 平台始终是 Android 开发人员的最佳选择。

# jndi - 为 JNDI 编写 Junit

> ID：12746968
> 
> 赞同：1
> 
> 时间：2012-10-05T13:09:21.770
> 
> 标签：jndi, junit4

我在我的应用程序中使用了 JNDI 连接，它正在工作。但我需要编写 Junits 来测试连接。我们不使用任何弹簧框架。这是我编写的获取 JNDI 连接的方法。

```
public Connection getConnection() throws SQLException {
        DataSource ds = null;
        InitialContext ic = null;
        Connection con = null;
        try {
            ic = new InitialContext();
            ds = (DataSource) ic.lookup("java:/DBs");
            con = ds.getConnection();
            return con;
        } catch (Exception e) {
            throw new SQLException(e);
        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:19:16.887

You can make use of the SimpleNamingContextBuilder that comes with the spring-test library. You can use this even if you aren't using Spring as it isn't Spring specific.

Below is an example of setting up a JNDI connection in the @Before of the JUnit test.

```
package com.example;

import org.springframework.jdbc.datasource.DriverManagerDataSource;
import org.springframework.mock.jndi.SimpleNamingContextBuilder;

public class SomeTest
{

   @Before
   public void contextSetup () throws Exception
   {
       SimpleNamingContextBuilder builder = SimpleNamingContextBuilder.emptyActivatedContextBuilder();
       DriverManagerDataSource dataSource = new DriverManagerDataSource("org.hsqldb.jdbcDriver", "jdbc:hsqldb:mem:testdb", "sa", "");
       builder.bind("java:comp/env/jdbc/ds1", dataSource);
       builder.bind("java:comp/env/jdbc/ds2", dataSource);
   }

   @Test
   public void testSomething () throws Exception
   {
        /// test with JNDI
   }

} 
```

UPDATE: This solution also uses Spring's DriverManagerDataSource. If you want to use that you will also need the spring-jdbc library. But you don't have to use this, you can create any object you like and put it into the SimpleNamingContextBuilder. For example, a DBCP connection pool, a JavaMail Session, etc.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:57:34.083

```
OK. After lot of searching i found a solution.And it is working for me. I want to share this to everybody. Hope this thing might help people who are having the same issue. Please add the below code.Add ojdb6.jar and naming-common-4.1.31.jar in your test libraries                                               
 @BeforeClass
    public static void setUpClass() throws Exception {
        try {
            System.setProperty(Context.INITIAL_CONTEXT_FACTORY,
                    "org.apache.naming.java.javaURLContextFactory");
            System.setProperty(Context.URL_PKG_PREFIXES,"org.apache.naming");
            InitialContext  ic = new InitialContext();
            ic.createSubcontext("java:");
            ic.createSubcontext("java:/comp");
            ic.createSubcontext("java:/comp/env");
            ic.createSubcontext("java:/comp/env/jdbc");

            OracleConnectionPoolDataSource ocpds = new OracleConnectionPoolDataSource();
            ocpds.setURL("your URL");
            ocpds.setUser("your username");
            ocpds.setPassword("your password");

            ic.bind("java:/yourJNDIName", ocpds);

        } catch (NamingException ex) {
            Logger.getLogger(yourTesTClass.class.getName()).log(Level.SEVERE, null, ex);

        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:13:09.493

如果它在应用服务器之外运行，那么您可能需要为 InitialContext 的调用提供参数。但也要意识到许多 DataSource 实现是不可序列化的，因此它们无法在容器外工作。

您正在编写的是一个集成测试，它应该在容器中运行。

# python - python：根据另一列中的ID组合一列中的值

> ID：12746970
> 
> 赞同：0
> 
> 时间：2012-10-05T13:09:36.807
> 
> 标签：python

我需要根据第一列中的 id 组合制表符分隔文件的第二列中的值。示例如下。最快的方法是什么。我可以使用 for 循环，遍历每一行，但我确信有一些聪明的方法可以做到这一点，我不知道。

```
596230  Other postop infection
596230  Disseminated candidiasis
596230  Int inf clstrdium dfcile
596230  Pressure ulcer, site NOS
2846079 Schizophrenia NOS-unspec
7800713 CHF NOS
7800713 Chr airway obstruct NEC
7800713 Polymyalgia rheumatica
7800713 DMII wo cmp nt st uncntr 
```

进入

```
596230  Other postop infection, Disseminated candidiasis, Int inf clstrdium dfcile, Pressure ulcer, site NOS
2846079 Schizophrenia NOS-unspec
7800713 CHF NOS, Chr airway obstruct NEC, Polymyalgia rheumatica, DMII wo cmp nt st uncntr 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:14:30.783

假设您在文件中有文本：

```
from collections import defaultdict
items = defaultdict(list)
with open("myfile.txt") as infile:
    for line in file:
        id, text = line.rstrip().split("\t")
        items[id].append(text)
for id in items:
    print id + "\t" + ", ".join(items[id]) 
```

这不会保持你`id`的 s 的原始顺序，但它确实保持了文本的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:11:29.367

如果它们已经排序，您可以`itertools.groupby()`在分割线上使用来收集它们。如果它们未排序，则先对其进行排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T14:11:28.067

您还可以考虑使用[Python csv 模块](http://docs.python.org/library/csv.html)来解析文件，因为您可以将其设置为使用逗号以外的字符（例如制表符，`\t`）作为分隔符。基本示例是这样的：

```
import csv
with open('myfile', 'rb') as f:
    reader = csv.reader(f, delimiter='\t', quoting=csv.QUOTE_NONE)
    for row in reader:
        print row 
```

从那里您可以使用已经建议的选项之一将具有相同编号的所有项目组合在一起。

# c# - 在运行程序中执行方法而不是启动新实例

> ID：12746975
> 
> 赞同：6
> 
> 时间：2012-10-05T13:10:03.940
> 
> 标签：c#, windows, winforms, windows-7, taskbar

我正在编写一个天气应用程序。我正在将它与任务栏集成。当您右键单击任务栏上的图标时，它会显示当前温度等。当前，如果您单击显示“当前：...”的文本，它将打开应用程序的另一个实例。

截屏：

![天气任务栏](../Images/0ed234bfb2aa5ade35f5a45d668df9f2.png)

我怎样才能让它在我的程序中运行一个过程或函数？因此，如果用户单击“当前：...”，它应该在同一应用程序中打开一个新表单。它不应该打开另一个应用程序吗？

我的代码目前是：

```
JumpListCustomCategory userActionsCategory = new JumpListCustomCategory("Weather");
userActionLink.Arguments = "-1";
JumpListLink userActionLink = new JumpListLink(Assembly.GetEntryAssembly().Location, Conditions + ": " + reader.ReadToEnd());
userActionLink.IconReference = new IconReference(testicon, 0);
userActionsCategory.AddJumpListItems(userActionLink);
list.AddCustomCategories(userActionsCategory);
list.Refresh(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:24:38.330

看这里：[每周源代码 31-单实例 WinForms](http://www.hanselman.com/blog/TheWeeklySourceCode31SingleInstanceWinFormsAndMicrosoftVisualBasicdll.aspx)。它将只允许您打开一个程序实例，但使用 VisualBasic 而不是 Mutex。

# python - 在 python 中使用 scikit 包在 SVM 中获取负 alpha 值

> ID：12746976
> 
> 赞同：6
> 
> 时间：2012-10-05T13:10:04.643
> 
> 标签：python, machine-learning, svm, scikit-learn, convex-optimization

我在 python 中使用 scikit 包实现 SVM。我在解释[plot_separating_hyperplane.py中的“alpha i”值时遇到了困难](http://scikit-learn.org/0.11/auto_examples/svm/plot_separating_hyperplane.html)

```
import numpy as np
import pylab as pl
from sklearn import svm

# we create 40 separable points
np.random.seed(0)
X = np.r_[np.random.randn(20, 2) - [2, 2], np.random.randn(20, 2) + [2, 2]]
Y = [0] * 20 + [1] * 20

# fit the model
clf = svm.SVC(kernel='linear')
clf.fit(X, Y)
print clf.support_vectors_
#support_vectors_ prints the support vectors
print clf.dual_coef_
#dual_coef_ gives us the "alpha i, y i" value for all support vectors 
```

样本输出

```
Dual_coef_ = [[ 0.04825885  0.56891844 -0.61717729]]
Support Vectors = 
[[-1.02126202  0.2408932 ]
 [-0.46722079 -0.53064123]
 [ 0.95144703  0.57998206]] 
```

Dual_coef_ 为我们提供了“alpha i * y i”值。我们可以确认“alpha i * y i”的总和 = 0 (0.04825885 + 0.56891844 - 0.61717729 = 0)

我想找出“alpha i”值。这应该很容易，因为我们有“alpha i * y i”值。但我让所有的“阿尔法我”都是负面的。例如，点 (0.95144703, 0.57998206) 位于直线上方（[参见链接](http://scikit-learn.org/0.11/auto_examples/svm/plot_separating_hyperplane.html)）。所以 y = +1。如果 y = +1，则 alpha 将为 -0.61717729。同样，点 (-1.02126202, 0.2408932) 位于该线下方。所以 y = -1，因此 alpha = -0.04825885。

**为什么我的 alpha 值为负数？** 我的解释错了吗？任何帮助将不胜感激。

* * *

## 供你参考，

对于支持向量分类器 (SVC)，

给定训练向量 , i=1,..., n, 在两个类别中，以及一个向量使得 ，SVC 解决了以下原始问题：

![在此处输入图像描述](../Images/0bd847f641db9288b1399233e336f6b9.png)

它的对偶是

![在此处输入图像描述](../Images/9d33af686f61745b8114dc990a402ee0.png)

其中'e'是全1的向量，C > 0是上界，Q是n乘n半正定矩阵，![在此处输入图像描述](../Images/82abde0c9b02316c4819e6f74501aaf9.png)是![在此处输入图像描述](../Images/19a48e78bbc290ea2f1b2e8410663169.png)核。在这里，训练向量被函数映射到更高的（可能是无限的）维空间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T10:56:13.773

我认为您只是错误地解释了 y 。我猜在线上方是 y=-1 和下方 y=+1。

为什么你认为它是相反的？

对于一个二级问题，我认为是“第一类”。即编号最小的一个是+1，另一个是-1。这是一个 LibSVM 约定。

# java - 如何从 javaScript 函数访问 javaBean 属性？

> ID：12746977
> 
> 赞同：0
> 
> 时间：2012-10-05T13:10:06.060
> 
> 标签：java, javascript

是否可以从 javascript 函数中获取 java 对象属性。

使用 EL 语言的示例：

```
function jsFunction(){
    var name = #{myBean.name};
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:13:37.413

直接——不。

您需要将 java bean 传递给客户端（通常使用 JSON 完成）并通过 HTTP 请求（`GET`或者，最好是`POST`）从客户端获取修改后的 bean。这就是 AJAX 的用途（尽管 AJAX 可用于任何服务器端执行环境，无论是否为 JVM）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:18:42.630

您可以使用[DWR](http://directwebremoting.org/dwr/index.html)之类的 ajax 库，这样您就可以从 JavaScript 代码访问服务器端 Java 对象。

[在这里](http://directwebremoting.org/dwr/introduction/scripting-dwr.html)您可以找到如何进行基本远程处理的简单示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-10T05:46:03.843

如果您使用像 Primefaces 这样的现代 JSF 框架，您可以使用内置的命令组件，例如`<p:remoteCommand>`.

[http://www.primefaces.org/showcase/ui/ajax/remoteCommand.xhtml](http://www.primefaces.org/showcase/ui/ajax/remoteCommand.xhtml)

例如

```
<h:form>    
<p:remoteCommand name="rc" update="msgs" actionListener="#{remoteCommandView.execute}" />     
<p:growl id="msgs" showDetail="true" />    
<p:commandButton type="button" onclick="rc()" value="Execute" icon="ui-icon-refresh" />
</h:form> 
```

...`rc()`您用来访问`remoteCommandView`bean 方法的 javascript 方法名称在哪里`execute`。

例如

```
<div onclick="rc()">Clicking Here Calls remoteCommandView.execute</div> 
```

或者

```
<script>
function something(){ 
rc(); 
}
</script> 
```

# django - 在哪里放置自定义后端？

> ID：12746978
> 
> 赞同：1
> 
> 时间：2012-10-05T13:10:06.980
> 
> 标签：django

我有一个正在尝试使用[的基于电子邮件地址的后端。](http://justcramer.com/2008/08/23/logging-in-with-email-addresses-in-django/)

我已将代码放入：

```
myapp /
  mymodule /
    backends.py 
```

在`settings.py`我有

```
AUTHENTICATION_BACKENDS = (
    'myapp.mymodule.backends.EmailOrUsernameModelBackend',
    'django.contrib.auth.backends.ModelBackend'
) 
```

但我得到了错误

```
Module "myapp.mymodule.backends" does not define a 
   "EmailOrUsernameModelBackend" authentication backend 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:56:24.090

您`settings.py`和项目布局看起来不错。你还没有向我们展示你的 backends.py，所以我们所能做的就是猜测它为什么不起作用。

这可能是您的`backends.py`或您的`settings`. 检查后端类的名称是否完全匹配`EmailOrUsernameModelBackend`，包括大写字母。

如果您没有使用内置的开发服务器，请确保您已重新启动它，这样您就不会运行旧版本的代码。

# python - 如何杀死在 python 中使用 webbrowser() 打开的默认浏览器进程

> ID：12746982
> 
> 赞同：0
> 
> 时间：2012-10-05T13:10:22.800
> 
> 标签：python, browser

```
import webbrowser

br=webbrowser.open('http://www.google.com/')
if br==True:
   print"Success"
   print"need to close the browser" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:15:49.333

你不能。

但是您可以改用该[`subprocess`](http://docs.python.org/library/subprocess.html)模块来打开浏览器并使用[`terminate`](http://docs.python.org/library/subprocess.html#subprocess.Popen.terminate)or[`kill`](http://docs.python.org/library/subprocess.html#subprocess.Popen.kill)方法。

# php - 让不同的 Symfony 2 应用程序使用相同的会话/登录？

> ID：12746986
> 
> 赞同：4
> 
> 时间：2012-10-05T13:10:31.117
> 
> 标签：php, symfony, symfony-2.1

我有四个 Symfony 2.1 应用程序，我希望它们共享相同的会话/登录系统，以便登录一个让您进入其他应用程序。

所有应用程序都在同一个域和服务器上，因此它们可以正确获取 cookie。出于某种原因，它们仍然不能交换。它们都具有 中`secret`指定的相同属性`properties.yml`。

问题是，在登录一个应用程序后，进入其他应用程序需要您再次登录，如果您这样做，那么您将退出前一个应用程序。

如何让多个 Symfony 2.1 应用程序在同一个服务器和域上使用一次登录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T19:27:04.063

您应该将会话配置为指向相同的存储位置，该位置将为所有应用程序共享（如果您使用默认的 NativeSessionStorage）。

```
framework:
    session:
        # ...
        save_path: "/your/shared/sessions/path" 
```

默认情况下`save_path`设置为`%kernel.cache_dir%/sessions`- 这与您的应用程序相关。

# asp.net - 在 VS2012 中关闭 Web 表单设计器的自动样式

> ID：12746991
> 
> 赞同：3
> 
> 时间：2012-10-05T13:10:48.447
> 
> 标签：asp.net, visual-studio, visual-studio-2012

每当您在 VS2012 中处于设计模式以编辑 Web 表单时，如果您单击任何内容并意外拖放，则 CSS 自动样式将出现在 aspx 页面的 HTML 顶部。

通过一些初步研究，我检查了以下内容：工具>选项>HTML 设计器>CSS 样式>样式应用程序模式，但它已经设置为手动。我应该在其他地方禁用此功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:31:11.817

现在没有办法关闭它。我们已通过[连接链接](http://connect.microsoft.com/VisualStudio/feedback/details/735863/css-files-are-automatically-formatted)收到此反馈。请为此连接错误添加投票。我们将在未来的 VS 版本中考虑这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-16T12:54:16.350

我也发现了这一点，并且我已经正确或错误地将其关联起来，大页面完全损坏（表格单元格内容显然是随机交换的）。

我设法通过转到工具>选项> HTML Designer> CSS并为那里的每个项目选择“CSS（内联样式）”来关闭自动样式。

自动样式已停止，并且（手指交叉）我最新的页面保留了它们的完整性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-20T19:36:19.420

Tools > Options > Web Forms Designer > CSS change all CSS(classes) to CSS(inline styles)

# image - 用于检测图像中对象的快速算法

> ID：12746992
> 
> 赞同：2
> 
> 时间：2012-10-05T13:10:53.890
> 
> 标签：image, opencv, homography

我正在开发一个用于光学标记识别的小程序。扫描表格的处理包括两个步骤： 1）在扫描的图像中找到表格，去除和裁剪边框。2）使用这种“标准化”形式，我可以使用原始文档中的坐标等简单地搜索标记。

第一步，我目前正在使用 OpenCV 中的 Homography 函数和透视变换来映射点。我还尝试了 SurfDetector。

但是，这两种算法都很慢，并且在从文档扫描仪扫描表格时并不能真正满足速度要求。

谁能指出我针对这个特定问题的替代算法/解决方案？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:05:53.307

Viola-Jones 级联分类器非常快。它在 OpenCV 中用于人脸检测，但您可以针对不同目的对其进行训练。根据您所谓的“表格”的外观，您可以使用更简单的算法，例如 Muffo 所说的互相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:26:34.540

尝试使用 ORB 或 FAST 检测器：它们应该比 SURF 更快（[此处的文档](http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html)）。

如果这些不符合您的速度要求，您可能应该使用不同的方法。你需要缩放和旋转不变性吗？如果没有，您可以尝试使用互相关。

# c# - 从具有非拉丁文件路径的文件加载 XmlDocument

> ID：12746993
> 
> 赞同：0
> 
> 时间：2012-10-05T13:10:55.263
> 
> 标签：c#, .net

我已经实例化了 XmlDocument，然后尝试在文件 pat 中加载带有非拉丁符号的 XML 文件。在加载文件期间，我面临着

```
 ArgumentNullException 
```

带有消息：

```
"Value cannot be null. Parameter name: str" 
```

堆栈跟踪是 -

```
at System.Security.Permissions.FileIOPermission.HasIllegalCharacters(String[] str)
at System.Security.Permissions.FileIOPermission.AddPathList(FileIOPermissionAccess access, AccessControlActions control, String[] pathListOrig, Boolean checkForDuplicates, Boolean needFullPath, Boolean copyPathList)
at System.Security.Permissions.FileIOPermission..ctor(FileIOPermissionAccess access, String path)
at System.Uri.ParseConfigFile(String file, IdnScopeFromConfig& idnStateConfig, IriParsingFromConfig& iriParsingConfig)
at System.Uri.GetConfig(UriIdnScope& idnScope, Boolean& iriParsing)
at System.Uri.InitializeUriConfig()
at System.Uri.InitializeUri(ParsingError err, UriKind uriKind, UriFormatException& e)
at System.Uri.CreateThis(String uri, Boolean dontEscape, UriKind uriKind)
at System.Uri..ctor(String uriString, UriKind uriKind)
at System.Xml.XmlResolver.ResolveUri(Uri baseUri, String relativeUri)
at System.Xml.XmlUrlResolver.ResolveUri(Uri baseUri, String relativeUri)
at System.Xml.XmlTextReaderImpl..ctor(String url, XmlNameTable nt)
at System.Xml.XmlTextReader..ctor(String url, XmlNameTable nt)
at System.Xml.XmlDocument.Load(String filename)
at .... 
```

我的代码有一部分：

```
var xmlData = new XmlDocument();
if (File.Exists(xmlPath))
{        
    xmlData.Load(xmlPath);
    ...
} 
```

xmlPath 包含法语字母。

怎么了？如何打开非拉丁字符的 xml 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:08:52.457

我找到了使用其他类进行数据加载的问题的解决方案，如下所示：

```
var d = File.ReadAllText(xmlPath);
xmlData.LoadXml(d); 
```

但是问题 - “怎么了？” 还开着。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:42:20.907

首先将文件路径加载到uri中：

```
Uri xmlUri = new Uri(xmlPath);
xmlData.Load(xmlUri.AbsolutePath); 
```