# StackOverflow 问答 14578000-14578999

# c# - async/await 对 Web 应用程序有用吗？

> ID：14578001
> 
> 赞同：7
> 
> 时间：2013-01-29T07:47:11.810
> 
> 标签：c#, asp.net, async-await

我阅读了 C# 5.0 中的 Async 和 Await 关键字，它允许同时执行并行任务。（这是我的理解）。

这种做法对 Web 应用程序有用吗？

在这里，我们有 AJAX 方法，它允许在不阻塞 UI（浏览器）的情况下执行任务。

它们应该只用于异步 Web 服务吗？

你能举个例子说明为什么/如何在 Web 应用程序中使用 async/await 关键字吗？（利用此功能）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T08:02:38.663

也许我能想到的最好的例子是从您的异步操作方法中调用一系列 Web 服务方法。例如：

假设您在 Web 服务中定义了两个方法，Method1 和 Method2。如果每个方法都需要 1 秒，那么同步调用它们将需要 2 秒，但是以一种`async`方式调用它们会花费更少的时间。

```
 using (DataClient proxy = new DataClient())
            {
                Task<Object> data1= proxy.Method1();
                Task<Object> data2 = proxy.Method2();

                await Task.WhenAll(new Task[] { data1, data2 });

               //Completed
           } 
```

来自 MSDN：

> AsyncController 类使您能够编写异步操作方法。您可以对长时间运行的非 CPU 绑定请求使用异步操作方法。这可以避免在处理请求时阻止 Web 服务器执行工作。AsyncController 类的典型用途是长时间运行的 Web 服务调用。

链接： http: [//msdn.microsoft.com/en-us/library/ee728598 (v=VS.98).aspx](http://msdn.microsoft.com/en-us/library/ee728598(v=VS.98).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T07:50:31.003

`async``await`这不是一项*创新*，我不是简单的语法糖围绕相同的异步调用处理模式，不同之处在于它使编码器以线性、更自然的方式编写*代码*。

所以，真正的问题是：我应该在哪里使用异步模式？

好吧，无论何时您需要一些`async`调用，或大量处理多个调用，或一些繁重的处理操作......或任何其他可以在宇宙中找到以满足`async`需求的东西。

# blackberry - BlackBerry Push Service SDK - BPS 服务器 URL

> ID：14578002
> 
> 赞同：1
> 
> 时间：2013-01-29T07:47:12.270
> 
> 标签：blackberry, push-notification, push, blackberry-push

为了了解 BlackBerry 中的 Push 服务是如何实现的，我安装了 Push Service SDK 并遵循[Push_Service_SDK-Getting_Started_Guide](http://docs.blackberry.com/en/developers/deliverables/30161/Push_Service_SDK-Getting_Started_Guide--1590931-0622013208-001-1.1.0.16-US.pdf)。彻底按照这些步骤，在从应用程序“注册”自己时，我收到以下错误：

```
Request to register failed. Caused by java.io.IOException: Network operation [Subscribe] failed. Make sure that Content Provider URL is accesible. 
```

谁能指导我完成这个。键入详细信息时，我们需要提供“BPS 服务器 URL”和“Push Initiator 应用程序 URL”。我收到了来自 BlackBerry 的凭据详细信息，其中包含 PPG Base Url 作为“cpXXX.pushapi.eval.blackberry.com”，其中 XX 需要替换为 CPID（内容提供商 ID）。是否要为“BPS 服务器 URL”和“Push Initiator 应用程序 URL”键入此链接？我确实输入了这个并在“注册”上收到了上述错误。

请指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:52:48.267

您应该已经收到一封邮件，其中包含您的服务器应用程序和黑莓客户端应用程序的凭据。对于客户端应用程序，它们应该如下所示：

```
 Application ID: <CPID(4 chars)>-<id(35 chars)>
    PPG Base URL: http://cpXXX.pushapi.eval.blackberry.com
    Push Port: <port(5 chars)> 
```

如您所见，App id 有两个部分。破折号前的前缀是您的 CPID，其余的是 id。然后我们有一个 URL，我们需要用 CPID 替换 XXX（请注意，CPID 通常是一个 4 位数字，所以如果他们使用 XXXX 作为占位符会更好）。最后是最多 5 位的端口号。

使用这些参数，在您的 BB 应用程序中，您将编写如下代码：

```
 String id = "<your full app id here>";
    String url = "http://cp<CPID>.pushapi.eval.blackberry.com"; //Make sure it is http and not https, and check you have replaced <CPID> with the appid prefix.
    int port = <port>;
    byte serverType = <PushApplicationDescriptor.SERVER_TYPE_BPAS or
                        PushApplicationDescriptor.SERVER_TYPE_NONE>;

    ApplicationDescriptor descriptor = ApplicationDescriptor.currentApplicationDescriptor();
    PushApplicationDescriptor pushDescriptor = new PushApplicationDescriptor(id, port, url, serverType, descriptor);

    // This is how we would register the client app:
    PushApplicationRegistry.registerApplication(pushDescriptor); 
```

执行该行后，如果一切正常（注册需要一些时间，建立了一些连接），您可以调用`PushApplicationRegistry.getStatus`或通过`onStatusChange`回调检查注册状态。

# android - Android 邮件应用程序（如何）

> ID：14578004
> 
> 赞同：3
> 
> 时间：2013-01-29T07:47:12.487
> 
> 标签：android, email, delegates

*亲爱的 StackOverflowers，首先我不确定这对于 stackoverflow 社区来说是否是一个真正的问题，所以请在否决投票之前尝试将我转发到一个真正的目的地..*

我想开发一个基于域的 android 邮件应用程序。例如，如果从 xyz.com 等域收到一封包含“bla bla bla”之类的单词的邮件，我会尝试推送警报。即使手机处于静音（或振动）模式，我也希望能够激活语音警报。现在我的问题是：

**1\. 是否可以捕获（获取）邮件委托方法来激活一些其他功能**

**2\. Android 会允许我在静音模式下激活语音警报吗？**

附加说明：我的邮件服务器将是 Microsoft Exchange..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:30:46.010

> 是否可以捕获（获取）邮件委托方法来激活其他功能

是的，在一定程度上。您可以让您的用户使用他们的电子邮件帐户登录邮件应用程序，并在收到电子邮件时接收它们。AFAIK，除非您自己的应用程序是接收者，否则您无法访问传入的电子邮件。因此，如果用户使用您的应用程序登录，您将能够接收电子邮件，但您将无法在 Gmail 应用程序中阅读电子邮件。

> Android 会让我在静音模式下激活语音警报吗？

您可以让您的应用程序在静音时将音量调高，播放通知声音，然后将其重新设为静音。这很容易做到。

# sybase - 如何在 Sybase 中捕获日志挂起场景？

> ID：14578008
> 
> 赞同：0
> 
> 时间：2013-01-29T07:47:28.863
> 
> 标签：sybase, transaction-log

很少有 shell 脚本使用[isql](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.utility/html/utility/utility210.htm)在 Sybase 数据库服务器上执行一些 sql 语句。我在日志中看到几条 Log Suspend 消息，问题是 shell 脚本成功退出。

> 数据库 MAIN_DB 中的事务日志几乎已满。您的事务将暂停，直到日志中有可用空间。

我需要拦截这些日志挂起消息并报告正确的错误。我该怎么做呢？我不确定如何在这里进行。当它发生时，它无法被清除，并且数据库管理员必须在一段时间后终止 spid，但脚本已经成功退出。因此，数据传输实际上并没有发生并被中止。这是我需要处理的场景。

请让我知道我们如何能够拦截 Log Suspend 并至少等待特定时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T03:21:21.343

你有两个问题。一是脚本没有正确检测错误。其次，事务日志经常被填满。

首先脚本需要有标准输出和错误输出到你的日志文件。当你使用`>`它时，它使用的是文件描述符 1。当你想捕获错误输出时，你需要使用`2>`文件描述符 2。所以命令如下所示。

`isql > error.log 2> error.log`

更好的是使用这个

`isql 2>&1 > error.log`

前面说让文件描述符 2 转到文件描述符 1。

现在要检测错误，请查找所有错误都在前面的“Msg”。

其次，要解决事务日志空间，您需要增加应该在自己的设备上的日志大小。然后您需要设置阈值以自动将完成的事务转储到磁盘文件。您需要调查以下命令。

```
sp_helpthreshold
sp_addthreshold
sp_thresholdaction 
```

好 SQL，晚安。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:22:39.443

您可以检查数据库中的进程，并查找*'LOG SUSPEND'*的进程状态。指定用户名是可选的。

**sp_who** *{用户名}*

# ruby - 创建并初始化具有顺序名称的类的实例

> ID：14578009
> 
> 赞同：0
> 
> 时间：2013-01-29T07:47:40.223
> 
> 标签：ruby, arrays

我有一`BankAccount`堂课。我试图创建这个类的多个实例并将它们放入一个数组中。例如

```
accounts = [Ba1 = BankAccount.new(100), Ba2 = BankAccount.new(100)] 
```

我想用里面的大量实例初始化数组，比如说 20，所以 from`Ba1`到`Ba20`. 有没有比手动输入更简单的方法呢？我尝试了一个循环，但我只是不知道如何使它工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T07:52:00.557

这应该可以解决问题：

```
accounts = 100.times.collect { BankAccount.new(100) } 
```

如果您需要根据每个帐户的不同为每个帐户做一些不同的事情，那么：

```
accounts = 100.times.collect { |i| BankAccount.new(i) } 
```

`i`表示被迭代的集合中的每个数字。

如果您确实需要使用您可以调用的数据设置变量名称`eval()`。

```
accounts = 100.times.collect { |i| eval("B#{i} = BankAccount.new(100)") } 
```

现在应该将`B1`through设置为适当的 BankAccount 实例。`B100`

免责声明：我应该说这种方法通常会不受欢迎。在这种情况下，您已经有一个名为 accounts 的数组。您需要做的就是对其进行索引以获取相应的银行帐户。 `accounts[50]`例如，而不是`Ba50`. 在我多年的 ruby​​ 开发中，我发现很少有地方使用 eval 是有意义的。

# regex - 在spring的验证器类上使用正则表达式进行验证的问题

> ID：14578015
> 
> 赞同：0
> 
> 时间：2013-01-29T07:48:27.760
> 
> 标签：regex, spring-mvc

我的要求是我希望使用 spring 验证器类和正则表达式对我的表单字段进行验证，所以我在这里做什么，我正在验证我`DepartmentName`在 String 中的字段在任何地方都不包含数值。我使用正则表达式执行此验证，`[0-9]`因为如果它包含任何数值，则 `matcher.find()`如果它返回true，则返回true，我正在抛出错误消息。所以我面临的问题是，当我为字符串提供非数值验证时，如果我提供纯字符串，那么如果我运行应用程序，它仍然会抛出相同的消息再次提供纯字符串值然后它的工作，但如果我再次提供错误的条目，验证正在发生，但之后如果我提供正确的条目相同的消息抛出所以每次我需要运行我的应用程序时请解决这个问题

这是我的验证器类

```
package com.ankur.tutorial.validator;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import org.springframework.validation.Errors;
import org.springframework.validation.Validator;
import com.nousinfo.tutorial.service.model.DepartmentBO;

public class DepartmentValidator implements Validator {

    boolean found = false;

    public boolean supports(Class<?> arg0) {

        return DepartmentBO.class.isAssignableFrom(arg0);
    }

    public void validate(Object object, Errors errors) {
        DepartmentBO departmentBO = (DepartmentBO) (object);
        System.out.println(departmentBO.getDepartmentName());

        if (departmentBO.getDepartmentName().equals("")) {

            errors.rejectValue("departmentName", "department.Name");
        } else {
            Pattern pattern = Pattern.compile("[0-9]");
            Matcher matcher = pattern.matcher(departmentBO.getDepartmentName());
            while (matcher.find()) {
                found = true;

            }
            System.out.println(found);
            if (found) {
                errors.rejectValue("departmentName", "department.string");
            }

        }

    }

} 
```

这是我的控制器

```
package com.nousinfo.tutorial.controllers;
import java.util.Map;
import javax.validation.Valid;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;
import com.nousinfo.tutorial.model.DepartmentForm;
import com.nousinfo.tutorial.service.impl.DepartmentServiceImpl;
import com.nousinfo.tutorial.service.model.DepartmentBO;
import com.nousinfo.tutorial.validator.DepartmentValidator;

@Controller
@RequestMapping("departmentController")
public class DepartmentController {
    private DepartmentServiceImpl departmentServiceImpl;

    private DepartmentValidator departmentValidator;

    public DepartmentServiceImpl getDepartmentServiceImpl() {
        return departmentServiceImpl;
    }

    public void setDepartmentServiceImpl(
            DepartmentServiceImpl departmentServiceImpl) {
        this.departmentServiceImpl = departmentServiceImpl;
    }

    public DepartmentValidator getDepartmentValidator() {
        return departmentValidator;
    }

    public void setDepartmentValidator(DepartmentValidator departmentValidator) {
        this.departmentValidator = departmentValidator;
    }

    /**
     * Set to set the view
     * 
     * @param model
     * @return
     * @throws Exception
     */
    @RequestMapping(value = "/departmentForm", method = RequestMethod.GET)
    public String view(Model model) throws Exception {
        DepartmentBO departmentBO = new DepartmentBO();
        model.addAttribute("departmentBO", departmentBO);
        return "departmentForm";
    }

    /**
     * Create the department
     * 
     * @param departmentForm
     * @param bindingResult
     * @param model
     * @return
     * @throws Exception
     */
    @RequestMapping(value = "/createDepartment", method = RequestMethod.POST)
    public ModelAndView createEmployee(
            @ModelAttribute("departmentBO") DepartmentBO departmentBO,
            BindingResult bindingResult) throws Exception {
        ModelAndView modelAndView = new ModelAndView();

        departmentValidator.validate(departmentBO, bindingResult);
        if (bindingResult.hasErrors()) {
            modelAndView.setViewName("departmentForm");
            return modelAndView;
        }

        modelAndView.addObject("departmentBO", departmentBO);

        if (departmentBO.getUpdateStatus() == 'A') {
            boolean flag = departmentServiceImpl.actionDecider(departmentBO);
            if (flag == false)
                modelAndView.setViewName("DBError");
            else
                modelAndView.setViewName("Success");

        }
        return modelAndView;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:53:07.390

您将变量作为类属性找到。验证器是单例的。移动在 validate 方法中找到的变量。

# android - 部署的apk文件在哪里？怎么用adb卸载？

> ID：14578033
> 
> 赞同：14
> 
> 时间：2013-01-29T07:50:25.340
> 
> 标签：android, adb, android-sdk-2.3

我尝试使用 adb 安装我的 apk，如下所示：

```
D:\C_Desktop\Development\Android SDK\platform-tools>adb install "C:\test_haxe\bin\android\bin\bin\testhaxe-debug.apk"
4274 KB/s (3702929 bytes in 0.846s)
        pkg: /data/local/tmp/testhaxe-debug.apk
Success 
```

所以，它安装得很好，但是在我的手机上，我找不到apk文件，是不是安装后被删除了？！

另外，我尝试像这样卸载它：

```
adb uninstall com.ketab.haxe 
```

但我明白了

```
Failure 
```

因为我没有模拟器，每次都要安装应用程序才能看到进度，所以我需要卸载它然后在手机上安装新应用程序，这是正确的方法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-29T19:49:13.683

`pm path <package>`安装使用命令后找出 apk 文件位置：

```
adb shell pm path com.ketab.haxe 
```

您可以尝试使用以下方法卸载软件包：

```
adb shell pm uninstall com.ketab.haxe 
```

如果失败，请检查错误消息：

```
adb logcat -d -s PackageManager:* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T20:35:48.123

Linux/mac 用户还可以创建一个脚本来卸载（“删除”）具有以下内容的 apk。创建一个以`adb-uninstall`这 3 行命名的文件：

```
pkg=$(aapt dump badging $1|awk -F" " '/package/ {print $2}'|awk -F"'" '/name=/ {print $2}')
adb uninstall $pkg 
```

然后`chmod +x adb-uninstall`使其可执行。

现在您可以简单地：

```
adb-uninstall myapp.apk 
```

这里的好处是你不需要知道包名。同样，您可以创建`adb-run myapp.apk`.

注意：这要求您`aapt`在路径中有。您可以在 SDK 的新构建工具文件夹下找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-20T15:11:01.373

[有解决方案] 从命令行成功安装我的应用程序 apk ( `adb install ~/Downloads/myapp.apk`) 后，我无法在我的 android 设备上找到 apk 文件。在搜索我手机的文件管理器后，我发现该应用程序是作为**APP**下载的，而不是像我预期的那样作为 apk 文件下载。因此，如果其他人正在寻找 apk 文件 - 它是一个应用程序，而不是您可以看到的文件

# oracle - SQLplus ORA 错误解析

> ID：14578034
> 
> 赞同：0
> 
> 时间：2013-01-29T07:50:25.853
> 
> 标签：oracle, bash, sqlplus

我正在从 bash 运行几个 sql 脚本。我想在添加提交之前查看 ORA 错误的摘要。像这样的东西：

```
#!/bin/bash
S_DB2_CONNECTOR=""
echo "My statement"
SQL_STM=$( echo "UPDATE ..." | sqlplus login/pass@bd );
echo "Output:"
echo "$SQL_STM"
echo "searching for errors...."
echo $LOG_VAR | grep "ORA"
echo "before commit"
wait 1000
echo "COMMIT;" | sqlplus -s login/pass@bd; 
```

但这不起作用，因为 sqlplus 会话被破坏并且！SURPRISE！sqlplus 在 SQL_STM 执行后添加了自动提交。

如何在提交前解析 ORA-/ST-errors 的 sqlplus 输出？首选在这个终端屏幕。

也许我不需要 bash 来解析，而 sqlplus 可以为我做吗？（因此会话状态将被保留）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:57:00.403

如果你想在 ORA 代码的情况下回滚/做一些额外的事情，那么在 SQL*PLUS 会话中做这一切。

即作为脚本运行它。

```
set serverout on
begin
  update...;

exception
  when others -- others is a catch all, you can catch specific codes too
  then 
    rollback;
    dbms_output.put_line('Error!');
    dbms_output.put_line(sqlerrm); -- prints full error string
end;
/ 
```

如果您只是想向 bash 发出一条 sql 语句失败的信号，您可以在 sql*plus 中设置为第一件事。`whenever sqlerror exit sql.sqlcode`（或`whenever sqlerror (exit -1`等）代替（见[这里](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12052.htm)）。这将在第一个错误时停止，并使用适当的返回代码返回您的 schell 脚本。

您可以嵌套块，例如：

```
begin
  update ..;
  begin
    select id into v_id
      from tab
     where ...;
  exception
    when no_data_found
    then
      null;-- ignore that we didnt find a row
  end;
  -- if the select fails, we continue from here..
  delete...;
  begin
    savepoint mysave;
    your_proc(...);
  exception
   when others
   then
     rollback to mysave; -- of the call to your_proc fails, lets just toll that back alone
  end;

end; 
```

等等

如果您需要它是交互式的，您可以执行类似 (dbms_alert)[http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_alert.htm#CHDCFHCI] 的操作：

```
sqlplus /<<EOF | tee -a my.log
set feedback on verify on serverout on 
-- IE YOUR CODE HERE..
select * from dual;
begin
  null;
end;
/
-- END OF YOUR CODE..
-- now lets wait for an alert from another session:
declare
  v_message  varchar2(32767);
  v_status   number;
begin
  DBMS_ALERT.REGISTER('should_i_commit');
  DBMS_ALERT.WAITONE('should_i_commit', v_message, v_status); -- there is a timeout parameter you can set too
  if (v_message = 'Y')
  then
    dbms_output.put_line('I committed');
    commit;
  else
    dbms_output.put_line('I rolled back');
    rollback;
  end if;
end;
/
EOF 
```

然后在另一个会话中，您可以发出：

```
SQL> exec dbms_alert.signal('should_i_commit', 'N');

PL/SQL procedure successfully completed.

SQL> commit;

Commit complete. 
```

# mysql - 在 sql 中执行 SCD 的通用过程

> ID：14578036
> 
> 赞同：1
> 
> 时间：2013-01-29T07:50:45.067
> 
> 标签：mysql, sql, sql-server, tsql, scd

我在 mssql 服务器中有 2 个表。我可以通过自定义插入/更新/删除以及 Merge 语句执行 scd。

*   [真棒合并](http://chrisjarrintaylor.co.uk/2012/07/03/ssis-scd-vs-merge-statement-performance-comparison/)

我想知道是否有任何通用程序可以达到目的。我们只传给它 2 个表，它应该能支持 SCD。SQL Server 2008 中的任何选项？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:02:58.703

不，无论您传递给它什么表，都没有也不能有一个通用的适合。有几个原因：

*   您怎么知道 SCD 类型？（好吧，可能是另一个参数，但是......）
*   你怎么知道哪一列应该被历史化，哪一列应该被覆盖？
*   如何确定哪一列是业务键、代理键、到期列等等？
*   要在更新语句中指定列，您必须编写动态 sql，这是可能的，但上述要点发挥了作用

这不是不可能的原因，但也要考虑：对于一个适当的`UPSERT`通常与临时表一起使用的语句，该`MERGE`语句对于 SCD 来说很糟糕，除非在特殊情况下。那是因为您不能将`MERGE`语句与 an 一起使用，`INSERT/UPDATE`并且您必须为此禁用外键，因为 an`UPDATE`被实现为`DELETE THEN INSERT`（或类似的东西，不记得清楚了，但是当我尝试时遇到了这些问题） .

我更喜欢这样做（SCD 类型 2 和 SQL Server）：

**步骤1：**

```
IF EXISTS (
SELECT * FROM sys.objects
WHERE name = 'tmpDimSource')
DROP TABLE tmpDimSource;
SELECT
*
INTO tmpDimSource
FROM
(
SELECT whatever
FROM yourTable
); 
```

**第2步：**

```
IF EXISTS (
SELECT * FROM sys.objects
WHERE name = 'tmpDimYourDimensionName')
DROP TABLE tmpDimYourDimensionName;

SELECT * INTO tmpDimYourDimensionName FROM D_yourDimensionName WHERE 1 = 0;
INSERT INTO tmpDimYourDimensionName 
(
sid, /*a surrogate id column*/
theColumnsYouNeedInYourDimension,
validFrom
)
SELECT 
ISNULL(d.sid, 0),
ds.theColumnsYouNeedInYourDimension,
DATEADD(DAY, DATEDIFF(DAY, 0, GETDATE()), 0) /*the current date*/
FROM
tmpDimSource ds 
LEFT JOIN D_yourDimensionName d ON ds.whateverId = c.whateverId
; 
```

第`ISNULL(d.sid, 0)`2 步很重要。如果条目已存在，则返回维度的代理 ID，否则返回 0。

**第 3 步：**

```
UPDATE D_yourDimensionName SET 
validTo = DATEADD(DAY, DATEDIFF(DAY, 0, GETDATE()) - 1, 0) /*yesterday*/
FROM 
D_yourDimensionName d
INNER JOIN tmpDimYourDimensionName t ON d.sid = t.sid
WHERE t.sid <> 0 AND
(
d.theColumnWhichHasChangedAndIsImportant <> t.theColumnWhichHasChangedAndIsImportant OR
d.anotherColumn <> t.anotherColumn 
)
; 
```

在第 3 步中，您将现有条目标记为不再有效并保留它的历史记录。您获得的有效条目`WHERE validTo IS NULL`.

如果需要，您还可以添加另一个`UPDATE`以用新值覆盖任何其他列。

**第4步：**

```
INSERT INTO D_yourDimensionName 
SELECT * FROM tmpDimYourDimensionName 
WHERE sid = 0; 
```

就是这样。

# sql - 在 SQL SERVER 2008 R2 中生成序列时出错

> ID：14578038
> 
> 赞同：-2
> 
> 时间：2013-01-29T07:50:46.720
> 
> 标签：sql, sql-server, sql-server-2008-r2

> **可能重复：**
> [SQL Server 2008 Express Edition - 如何创建序列](https://stackoverflow.com/questions/7999448/sql-server-2008-express-edition-how-to-create-a-sequence)

我编写了以下 SQL 查询以在 SQL Server 2008R2 中创建序列。我不知道为什么我会收到这种错误。

**SQL 代码：**

```
Use CRM 
GO 
CREATE SEQUENCE User_Detail_Sequence 
AS 
int START WITH 1
INCREMENT BY 1 NO MAXVALUE 
GO 
```

**错误：**

> 消息 343，级别 15，状态 1，第 1 行 CREATE、DROP 或 ALTER 语句中使用的未知对象类型“SEQUENCE”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T08:04:36.063

SQL Server 2008 不支持序列 - SQL Server 2012 (Denali) 中引入了该功能。

拉吉

# android-tabhost - 选项卡中的谷歌地图 v2 错误（片段中的 MapFragment）

> ID：14578048
> 
> 赞同：5
> 
> 时间：2013-01-29T07:51:35.107
> 
> 标签：android-tabhost, android-tabs, google-maps-android-api-2, android-maps-v2

我有一个 fragmentActivity，我在其中构建了一个 tabHost，并且在每个选项卡中都有一个 Fragment。好吧，当我选择一个选项卡并传递给其他所有内容时，我有四个选项卡，3 个带有信息，1 个带有一个片段，其中包含一个 google-map-v2（是片段中的一个片段映射，因为我想添加按钮等）进展顺利，但是当我选择地图选项卡时，在另一个选项卡和地图选项卡之后会抛出错误。

我的看法是这样的：

```
|__||__|__|__|
| __________ |
|| FRAGMENT ||
||_____   _ ||
|| FRAG| |_|||
|| MAP |    ||
||     |    ||
||_____|    ||
||__________|| 
```

错误：

```
01-29 08:32:56.979: E/AndroidRuntime(27738): FATAL EXCEPTION: main
01-29 08:32:56.979: E/AndroidRuntime(27738): android.view.InflateException: Binary XML file line #11: Error inflating class fragment
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:587)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at com.monumentos.vistasmovil.MonumentoMapa.onCreateView(MonumentoMapa.java:127)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.support.v4.app.FragmentManagerImpl.attachFragment(FragmentManager.java:1264)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:672)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at com.monumentos.vistasmovil.Monumento.onTabChanged(Monumento.java:279)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.widget.TabHost.invokeOnTabChangeListener(TabHost.java:436)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.widget.TabHost.setCurrentTab(TabHost.java:421)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:158)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:459)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.view.View.performClick(View.java:2552)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.view.View$PerformClick.run(View.java:9229)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.os.Handler.handleCallback(Handler.java:587)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.os.Looper.loop(Looper.java:138)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.app.ActivityThread.main(ActivityThread.java:3701)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at java.lang.reflect.Method.invokeNative(Native Method)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at java.lang.reflect.Method.invoke(Method.java:507)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at dalvik.system.NativeStart.main(Native Method)
01-29 08:32:56.979: E/AndroidRuntime(27738): Caused by: java.lang.IllegalArgumentException: Binary XML file line #11: Duplicate id 0x7f06005c, tag null, or parent id 0x0 with another fragment for com.google.android.gms.maps.SupportMapFragment
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:285)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
01-29 08:32:56.979: E/AndroidRuntime(27738):    ... 27 more 
```

错误说：

```
01-29 08:32:56.979: E/AndroidRuntime(27738): Caused by: java.lang.IllegalArgumentException: Binary XML file line #11: Duplicate id 0x7f06005c, tag null, or parent id 0x0 with another fragment for com.google.android.gms.maps.SupportMapFragment
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:285)
01-29 08:32:56.979: E/AndroidRuntime(27738):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
01-29 08:32:56.979: E/AndroidRuntime(27738):    ... 27 more 
```

这是问题所在，但我不知道为什么只有这个片段有问题：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
Bundle savedInstanceState) {
View view = inflater.inflate(R.layout.monumenos_view_preview, container, false);

return view;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T11:19:41.307

最后我找到了解决方案，我删除了 Fragment 中的嵌套 MapFragment：

```
public void onDestroyView ()
{
      try{
    SupportMapFragment fragment = ((SupportMapFragment) getFragmentManager().findFragmentById(R.id.mapv2));
        FragmentTransaction ft = getActivity().getSupportFragmentManager().beginTransaction();
        ft.remove(fragment);
        ft.commit();
      }catch(Exception e){
      }
    super.onDestroyView();  
} 
```

我从这里得到解决方案：[片段中的片段](https://stackoverflow.com/questions/6847460/fragments-within-fragments)

# qnx - QNX 6.5 中的诊断 KVM 切换器

> ID：14578049
> 
> 赞同：1
> 
> 时间：2013-01-29T07:51:35.900
> 
> 标签：qnx

我有 KVM(ATEN CS 1642) 开关并连接到它的 usb 鼠标、usb 键盘和两个 dvi 显示器。KVM 控制两台计算机之间的切换 (QNX 6.5)。我需要获取有关连接的输入输出设备（鼠标、键盘、显示器）的信息。操作系统实用程序仅确定模拟的交换机设备。即调用 hidview 显示 Aten 鼠标和 Aten 键盘，即使它们实际上拉出 KVM。我可以通过编程获取实际连接的 IO 设备列表吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:24:26.413

如果您只连接了 USB 设备，则可以使用`usb -vvv`以获取更多详细信息。

# visual-studio-2012 - VS 2012 中的 Pex（不是痣）

> ID：14578054
> 
> 赞同：7
> 
> 时间：2013-01-29T07:51:51.753
> 
> 标签：visual-studio-2012, pex

我正在寻找适用于 VS 2012 的 Pex 插件（或同等产品）。

我知道 Moles 变成了假货 ( [http://msdn.microsoft.com/en-us/library/hh549175.aspx](http://msdn.microsoft.com/en-us/library/hh549175.aspx) )，这是存在的。我希望 Pex 部分作为自动 WhiteBox 测试的输入生成器。我不确定如何在 VS2012 中做到这一点。有人可以在这里给我指点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:48:33.800

Pex[团队表示](http://research.microsoft.com/en-us/projects/pex/)他们将构建 Pex 的新版本，但同时从 Moles 转移到 Fakes 导致“内部工作方式发生一些变化，并延迟了 Pex 的下一个版本”。

[该问题](https://stackoverflow.com/questions/13422153/can-i-use-pex-with-visual-studio-2012)的一位撰稿人从 Microsoft 获得了一些信息，称他们预计学术许可证将在 2013 年初提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T02:55:07.973

最后，Pex 为 Visual Studio 2012 提供了一些东西：Code Digger ( [http://visualstudiogallery.msdn.microsoft.com/fb5badda-4ea3-4314-a723-a1975cbdabb4](http://visualstudiogallery.msdn.microsoft.com/fb5badda-4ea3-4314-a723-a1975cbdabb4) )。您可以要求它生成一个输入/输出表，其中的参数将涵盖您的所有代码。

但是，它今天仅支持便携式库项目......让我们等待新版本。

# asp.net-mvc - 使用 POSTMan chrome 扩展将列表传递给 MVC 控制器操作

> ID：14578059
> 
> 赞同：1
> 
> 时间：2013-01-29T07:52:10.923
> 
> 标签：asp.net-mvc, api

我正在使用 Postman Chrome 扩展来测试我的 MVC 服务 API。

我传递给控制器​​的模型如下所示：

```
public class ActivateBenefitRequestModel
{
    public int BenefitID { get; set; }
    public int MemberID { get; set; }
    public string Token { get; set; }
    public List<AdditionalBenefitField> BenefitAdditionalFields { get; set; } 
} 
```

和

```
public class AdditionalBenefitField
{
    public int BenefitFieldId { get; set; }
    public string Value { get; set; }
} 
```

我应该如何传递 BenefitAdditionalFields List ？

甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:15:49.960

假设您所做的只是构建一个 POST 请求字符串（不熟悉扩展名），我相信您可以格式化您的请求以指定使用 URL 编码的方括号索引的单个列表元素：

```
...&AdditionalBenefitFields%5B0%5D.BenefitFieldId=1&AdditionalBenefitFields%5B0%5D.Value=Foo
&AdditionalBenefitFields%5B1%5D.BenefitFieldId=2&AdditionalBenefitFields%5B1%5D.Value=Bar&... 
```

这就是我们的一个 MVC3 项目中对复杂类型列表的 POST 请求的外观，我很确定我们不会对它做任何特别的事情。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-01T07:07:52.870

所以我明白了，这很容易：

只需在 PostMan 扩展中的表单数据中设置单独的文本值

```
BenefitAdditionalFields[0].BenefitFieldId
BenefitAdditionalFields[0].Value
BenefitAdditionalFields[1].BenefitFieldId
BenefitAdditionalFields[1].Value 
```

# php - 如何在 WHMCS 的 name_of_module_ouput 函数中包含 tpl 文件

> ID：14578061
> 
> 赞同：0
> 
> 时间：2013-01-29T07:52:24.077
> 
> 标签：php, whmcs

需要知道如何包含 tpl 文件并为这些 tpl 文件赋值。在这个例子中

```
function addonexample_output($vars) {   
    $modulelink = $vars['modulelink'];
    $version = $vars['version'];
    $option1 = $vars['option1'];
    $option2 = $vars['option2'];
    $option3 = $vars['option3'];
    $option4 = $vars['option4'];
    $option5 = $vars['option5'];
    $LANG = $vars['_lang'];

    echo '<p>'.$LANG['intro'].'</p>
<p>'.$LANG['description'].'</p>
<p>'.$LANG['documentation'].'</p>';

} 
```

输出是回声，但我需要包含 tpl 文件并从 _output 函数分配值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-01T19:12:32.760

包含 .tpl 文件用作这样的句子：

```
{include file="$template/tplfileuneed.tpl" title=$LANG.knowledgebasecategories} 
```

这仅适用于模板文件夹。

祝你好运！

# zend-framework - 我可以动态检测包含路径中的 Zend 框架吗？

> ID：14578065
> 
> 赞同：0
> 
> 时间：2013-01-29T07:53:00.020
> 
> 标签：zend-framework, include-path, php-include

我正在为 WordPress 开发一个插件，如果 Zend 框架可用，它将添加额外的功能，但是如果它不存在，添加的功能不足以证明用户安装框架是合理的。

我的问题是，有什么好方法可以检测 Zend 是否存在？显然，我可以`get_include_path()`用来返回包含路径的任何内容，但除此之外我不确定。我可以使用正则表达式来确定该短语是否`zend`出现在路径中，但这似乎充其量是不可靠的（更多地认为误报而不是误报，但我认为如果人们没有使用默认路径，两者都有可能）。

如果我不得不求助于这个正则表达式，我总是可以在错误出现并从那里继续时捕获它们，但如果有更好的方法，那么知道这将是有用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:39:20.507

最简单的方法：

```
if (stream_resolve_include_path('Zend/Version.php')) {
    // ZF found
} 
```

但我会质疑你为什么需要这样做。如果你的插件需要被编码才能在没有框架的情况下工作，如果它在那里，你会通过使用它获得什么？似乎这只会使您的代码复杂化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:26:12.207

是的，这有点容易：

```
$zfPresent = (bool) stream_resolve_include_path("Zend/Application.php") 
```

如果可以在包含路径中找到该文件，`stream_resolve_include_path()`将返回它的绝对路径 - 如果不是，它将返回 false。

因此，如果找到该框架，肯定就在那里。

对某些人来说只是一粒盐：它至少需要 PHP 5.3.2

见： http: [//php.net/manual/de/function.stream-resolve-include-path.php](http://php.net/manual/de/function.stream-resolve-include-path.php)

如果 PHP 版本不允许您使用上述解决方案：

尝试这样的事情：

```
set_error_handler(function($code, $text, $file, $line) {
    // Handle zend not present    

    /* So that internal error handling won't be executed */
    return true;
});

include("Zend/Application.php");

restore_error_handler(); 
```

我不认为它真的很优雅，但它在检测 Zend 方面应该有点可靠。另一种方式可能是这样的：

```
function checkForZf()
{
    $includePaths = array_merge(explode(PATH_SEPARATOR, get_include_path(), array($myAppsLib));

    foreach($includePaths as $path) {
        if (file_exists($path . DIRECTORY_SEPARATOR . 'Zend' . DIRECTORY_SEPARATOR . 'Application.php') {
            return true;
        }
    }
    return false;
} 
```

这也应该有点可靠，但文件操作的性能代价很高。您可以在第一次检测后测试它的性能或将状态存储在某处，因此它不需要在每个请求上运行。

# c# - 多语言页面

> ID：14578071
> 
> 赞同：0
> 
> 时间：2013-01-29T07:53:23.583
> 
> 标签：c#, asp.net, multilingual, satellite-assembly

在我的项目中，有不同的网页，我的要求是当用户根据用户的语言登录时，页面必须以用户语言显示。

我用谷歌搜索了它，但没有得到正确的解决方案。

我有卫星组件作为解决方案，但如何实施呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:02:25.257

[ASP.NET 本地化的 MSDN 文档](http://msdn.microsoft.com/en-us/library/c6zyy3s9%28v=vs.100%29.aspx)是开始阅读它的好地方。基本步骤如下：

1.  本地化您的网页 - 这些将创建语言特定的资源，这些资源将为支持的语言生成附属程序集。
2.  本地化应用程序中的其他方面，例如日期/时间格式和输入、图像、用户消息等
3.  根据需要在您的网页中设置文化和 UI 文化（例如，基于浏览器设置或用户偏好或用户选择等）。请参阅[this](http://msdn.microsoft.com/en-us/library/bz9tc508%28v=vs.100%29.aspx)了解如何操作。

请参阅[此演练](http://msdn.microsoft.com/en-us/library/fw69ke6f%28v=vs.100%29.aspx)，它将快速完成基本步骤。

# jquery - 本地化在 Jquery 日期选择器中不起作用

> ID：14578075
> 
> 赞同：4
> 
> 时间：2013-01-29T07:53:41.110
> 
> 标签：jquery, jquery-ui

我的应用程序中有日历功能。我指的是[http://jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)。我在该网页中看到了“本地化日历”示例。但是本地化本身不起作用。是错误还是我需要做的任何额外工作。

我的代码

```
$(function () {
    $.datepicker.setDefaults( $.datepicker.regional[ "fr" ] );

        $("#w_datePicker").datepicker({
            showOn: "button",
            buttonImage: "style/images/calendar.gif",
            buttonImageOnly: true,
            altField: '#show_date_on_select',
            altFormat: 'DD, MM d',
            //dateFormat: 'DD, MM d',
            onSelect: function (dateText, inst) {
                //var selDate = FormatDate(dateText);
                //$("#show_date_on_select").html(selDate);
            }
        });

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T08:08:59.200

我想您还需要为您选择的语言提供一个语言文件。从这里：[日期选择器语言文件](https://github.com/jquery/jquery-ui/tree/master/ui/i18n)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-25T12:23:39.467

试试这个：

```
$.datepicker.regional['fr'] = {clearText: 'Effacer', clearStatus: '',
    closeText: 'Fermer', closeStatus: 'Fermer sans modifier',
    prevText: '&lt;Préc', prevStatus: 'Voir le mois précédent',
    nextText: 'Suiv&gt;', nextStatus: 'Voir le mois suivant',
    currentText: 'Courant', currentStatus: 'Voir le mois courant',
    monthNames: ['Janvier','Février','Mars','Avril','Mai','Juin',
    'Juillet','Août','Septembre','Octobre','Novembre','Décembre'],
    monthNamesShort: ['Jan','Fév','Mar','Avr','Mai','Jun',
    'Jul','Aoû','Sep','Oct','Nov','Déc'],
    monthStatus: 'Voir un autre mois', yearStatus: 'Voir un autre année',
    weekHeader: 'Sm', weekStatus: '',
    dayNames: ['Dimanche','Lundi','Mardi','Mercredi','Jeudi','Vendredi','Samedi'],
    dayNamesShort: ['Dim','Lun','Mar','Mer','Jeu','Ven','Sam'],
    dayNamesMin: ['Di','Lu','Ma','Me','Je','Ve','Sa'],
    dayStatus: 'Utiliser DD comme premier jour de la semaine', dateStatus: 'Choisir le DD, MM d',
    dateFormat: 'dd/mm/yy', firstDay: 0, 
    initStatus: 'Choisir la date', isRTL: false};
 $.datepicker.setDefaults($.datepicker.regional['fr']); 
```

大多数语言的链接：http: [//jquery-ui.googlecode.com/svn/tags/1.8.20/ui/i18n/](http://jquery-ui.googlecode.com/svn/tags/1.8.20/ui/i18n/) 如[Sudhir 在他的回答中所说](https://stackoverflow.com/a/14578270/662581)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-03T08:41:25.077

1.  首先检查是否存在所有必需的语言文件。如果您想下载日期选择器的语言文件，则可以从以下链接下载：[https ://github.com/jquery/jquery-ui/tree/master/ui/i18n](https://github.com/jquery/jquery-ui/tree/master/ui/i18n)

2.  如果您将文件路径放入标题部分并且它不起作用，那么请将脚本标签从标题移动到正文。

以上步骤对我有用。

# ajax - CDN 是缓存查询结果的合适解决方案吗？

> ID：14578076
> 
> 赞同：0
> 
> 时间：2013-01-29T07:53:43.340
> 
> 标签：ajax, caching, scalability, cdn

我正在开发一个小型搜索引擎，试图找出如何缓存查询结果。这些结果是简单的 JSON 文本，使用 ajax 请求检索。

将结果存储在内存中不是一个选项，我可以看到剩下的两个选项：

*   使用 nosql 数据库检索缓存的结果。
*   将结果存储在 CDN 上并重定向 http 请求（307 - 临时重定向），以防结果已被缓存。

但是，我对 CDN 没有太多经验，想知道将它用于大量临时小文本文件是否是一种好习惯。在 ajax 请求上使用重定向是一个好习惯吗？CDN 是缓存小文本文件的合适解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:27:37.777

简短的回答：没有。

Long：通常，您将 CDN 用于大型静态文件，您希望 CDN 在世界各地进行镜像，以便在用户请求它们时靠近用户。当您有大量更改的数据时，将更改传播到 CDN 的所有节点总是需要一段时间，同时用户会得到不一致的结果（这可能对您来说很重要，也可能不重要）。

此外，为了避免更高的延迟，我不会使用 HTTP 重定向（您告诉客户端向其他地方发出第二个请求），而是确定是从缓存还是从您端的引擎获取数据（例如使用[缓存代理](http://en.wikipedia.org/wiki/Proxy_server#Caching)或负载平衡器），然后将其直接提供给客户端。

# d3.js - 线插补之间的 D3 过渡

> ID：14578079
> 
> 赞同：3
> 
> 时间：2013-01-29T07:53:50.720
> 
> 标签：d3.js, transition, interpolation

我一直在寻找很长一段时间，但我一直无法弄清楚。

我想在单行的两个插值“基础”和“后一步”之间进行转换。

```
var time_scale, kpi_scale;
var line;

var data = [
{"kpi": 100, "time": 1317448800000},
{"kpi": 200, "time": 1320127200000},
{"kpi": 250, "time": 1322719200000},
{"kpi": 180, "time": 1325397600000},
{"kpi": 230, "time": 1328076000000},
{"kpi": 360, "time": 1330581600000},
{"kpi": 140, "time": 1333260000000},
{"kpi": 120, "time": 1335852000000},
{"kpi": 240, "time": 1338530400000},
{"kpi": 190, "time": 1341122400000},
{"kpi": 185, "time": 1343800800000},
{"kpi": 130, "time": 1346479200000},
{"kpi": 340, "time": 1349071200000},
{"kpi": 320, "time": 1351749600000},
{"kpi": 250, "time": 1354341600000}
];

// set up the viewport, the scales, and axis generators      
var container_dimensions = {width: 900, height: 400},
    margins = {top: 10, right: 20, bottom: 30, left: 60},
    chart_dimensions = {
        width: container_dimensions.width - margins.left - margins.right,
        height: container_dimensions.height - margins.top - margins.bottom
    };

var time_extent = d3.extent(
    data,
    function(d){return d.time;}
);

time_scale = d3.time.scale()
    .domain(time_extent)
    .range([0, chart_dimensions.width]);

var kpi_extent = d3.extent(
    data,
    function(d){return d.kpi;}
);

kpi_scale = d3.scale.linear()
    .domain(kpi_extent)
    .range([chart_dimensions.height, 0]);

var container = d3.select('body')
    .append('svg')
        .attr("width", container_dimensions.width)
        .attr("height", container_dimensions.height)
    .append("g")
        .attr("transform", "translate(" + margins.left + "," + margins.top + ")")
        .attr("id","chart");

draw_timeseries (data);
transitionToStepped (data);

function draw_timeseries (data) {
    line = d3.svg.line()
        .x(function(d){return time_scale(d.time);})
        .y(function(d){return kpi_scale(d.kpi);})
        .interpolate("basis");

    d3.select('#chart').append('path')
        .attr('d', line(data))
        .attr('id', 'line')
        .attr('class', 'line');               
}

function transitionToStepped (data) {

    line.interpolate("step-after");

    d3.select("#chart").selectAll(".line")
        .transition()
        .duration(2000)
        .attr("d", line(data))
        .delay(2000);           
} 
```

我保存了一个包含我的代码的小 jsfiddle。

[jsFiddle 插值转换](http://jsfiddle.net/flyingk/4Y4ef/)

我想在基准线和后续线之间“变形”。但是 d3 是从左侧滑入后续线，而不是将基准线“弯曲”成后续线。

谢谢你的帮助。克里斯托夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T01:42:52.613

必须有一种方法可以做到这一点，而且肯定比下面的产品更好（我期待看到其他答案），但我还没有在这里看到任何答案，这至少会做一个“变形” " 对你来说，虽然它也在过渡期间使线平行于 x 轴。不是一件可怕的事情，但我不完全相信你所追求的。

这是完整代码和演示的小提琴，从您的原始修改：http:
[//jsfiddle.net/n5P6z/2/](http://jsfiddle.net/n5P6z/2/)

该方法的核心在这里：

```
function xLineReduce() {
    line.x(function (d) {
        return time_scale(d.time);
    }).y(function (d) {
        return chart_dimensions.height;
    });
}

function resetInterpolator() {
    line.interpolate("cubic-in-out");
}

function stepItUp() {
    line.x(function (d, i) {
        return time_scale(d.time);
    })
        .y(function (d, i) {
        return kpi_scale(d.kpi);
    })
        .interpolate("step-after");
}

function transitionToStepped(myData) {
    path.data(myData)
        .call(xLineReduce)
        .transition()
        .delay(1000)
        .duration(500)
        .attr('d', line(myData));

    path.data(myData)
        .call(resetInterpolator)
        .transition()
        .delay(1500)
        .duration(0)
        .attr('d', line(myData));

    path.data(myData)
        .call(stepItUp)
        .transition()
        .delay(1500)
        .duration(500)
        .attr('d', line(myData));
} 
```

# javascript - 带有选项值用法的 HTML 和 js

> ID：14578081
> 
> 赞同：0
> 
> 时间：2013-01-29T07:54:06.273
> 
> 标签：javascript, html

我有第一个带有 3 个选项值的 a。当我选择其中一个值时，我希望它记住我选择了哪个值，一旦我按下我的按钮，javascript 将打开一个特定的 url。

一些代码示例。

```
 <select id="dd-files">
        <option value="asdf">Pick:</option>
        <option value="url1">File1</option>
        <option value="url2">File2</option>
        <option value="url3">File3</option>
       </select>
      </section>
    </div>
<br>
        <div class="modal-footer">
            <a class="btn btn-primary get-data" href="#">Button</a>
        </div> 
```

**javascript**这个javascript直接就是为了知道它是怎么工作的，所以我只是测试了一下。

```
$(".get-data").on("click",function() {
  var location = 'http://hardcodedurl.com';
  window.open(location); 
```

然后我有另一个函数，当我选择一个选项值时，存储它并直接打开它，但不是直接打开它，我希望我的第二个脚本只是在我的按钮“.get-data”被按下时打开。

```
$(function () {
  $('#dd-files').on('change', function() {
    debugger;
    var url = $(this).val();
    if (url) {
      window.location = url;
    }
    return false;
  })
}) 
```

对新手有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:01:04.217

Not clear why do you need `on('change')` event. To make it open when button is pressed, you just need something like this:

```
$(".get-data").on("click",function() {
  var location = $('#dd-files').val(); 
  if(location) {
     window.open(location);
  }
} 
```

Just take an url from `#dd-files` directly.

# c++ - opengl glReadPixels

> ID：14578091
> 
> 赞同：0
> 
> 时间：2013-01-29T07:54:40.190
> 
> 标签：c++, opengl

我想得到一个像素的颜色。像素是鼠标位置。我用`glReadPixels`但我不能

```
 POINT pt;
    GetCursorPos(&pt);
    unsigned char pixel[3];
    glReadPixels(pt.x, pt.y, 1, 1, GL_RGB, GL_UNSIGNED_BYTE, pixel); 
```

在此代码之后像素的值是：`'Ì'` 有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T09:58:48.887

`204`是`CC`十六进制表示。该值通常用于填充未初始化的内存。如果你`pixel`用零初始化（例如）

```
 unsigned char pixel[3] = {0}; 
```

99,(9)% 调用后你会看到零`glReadPixels`。取决于[文档](http://www.opengl.org/sdk/docs/man/xhtml/glReadPixels.xml) `glReadPixels`

> 如果生成错误，则不会更改数据内容。

那是你的数据`pixel`没有因为错误而改变。遵循@OlegTitov 的第四条建议（看看`glGetError();`会告诉你什么）

**更新：**如果你想从主屏幕获取一个像素值`glReadPixels`，并且如果你没有创建任何 GLFrameBuffer，我不确定，但我认为你会失败。我会重复 - 我不确定，但我认为，它`glReadPixels`只能从帧缓冲区读取像素值，这是以前由 gl-functions 创建的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T08:59:00.433

1.  输出`char`到控制台时，编译器将打印为符号，而不是字母。这是为了 C 风格的字符串可以正常打印。要打印整数值，首先将变量转换为整数类型。

2.  从屏幕读取时：注意openGL的坐标原点在左下角，而窗口系统使用左上角，所以需要从一个坐标系转换到另一个坐标系

    glReadPixels(pt.x, window_height - pt.y, 1, 1, GL_RGB, GL_UNSIGNED_BYTE, 像素);

3.  如果您遇到进一步的问题，请确保将正确的像素缓冲区绑定为读取缓冲区。对于窗口输出：

    glBindFramebuffer(GL_READ_FRAMEBUFFER, 0);

4.  如果仍然有一些问题，请开始检查您的代码`glGetError();`

# business-intelligence - BI 分析报告包含维度中的“未知”成员

> ID：14578094
> 
> 赞同：-6
> 
> 时间：2013-01-29T07:55:01.563
> 
> 标签：business-intelligence

我的分析报告显示了一个未知成员的维度。我验证了不为空或不为空的列。还是有的。

请帮忙。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:02:34.797

[http://www.bidn.com/blogs/DevinKnight/ssis/1419/ssas-%E2%80%93-hiding-unknown-member](http://www.bidn.com/blogs/DevinKnight/ssis/1419/ssas-%E2%80%93-hiding-unknown-member) 这是我要隐藏维度的未知成员数据，但仍然不会获取未知数据。比以前更好，从报告中隐藏数据。

# internet-explorer-8 - RichFaces 模式面板不适用于 IE8

> ID：14578095
> 
> 赞同：1
> 
> 时间：2013-01-29T07:55:20.420
> 
> 标签：internet-explorer-8, richfaces, hide

我正在使用 rich:modalPanel 并且每次我想关闭它（我正在调用 hide 方法）它都不会关闭。这是我的代码：

```
 <a4j:status onstart="#{rich:component('wait')}.show()" onstop="#{rich:component('wait')}.hide()"/>
            <rich:modalPanel id="wait" autosized="true" width="200" height="120" moveable="false"
                             resizeable="false" >
                <f:facet name="header">
                    <h:outputText value="Processing"/>
                </f:facet>
                <h:outputText value="Wait Please..."/>
            </rich:modalPanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:24:07.213

不确定这是否能解决您的问题，但您可以尝试以下方法

```
<a4j:status onstart="javascript:Richfaces.showModalPanel('wait');" onstop="javascript:Richfaces.hideModalPanel('wait')"/> 
```

这似乎对我有用

# android - 在 Android 中重启后保存警报

> ID：14578098
> 
> 赞同：-1
> 
> 时间：2013-01-29T07:55:33.090
> 
> 标签：android

我是安卓新手。我正在阅读手册，并阅读以下内容：

`Registered alarms are retained while the device is asleep (and can optionally wake the device up if they go off during that time), but will be cleared if it is turned off and rebooted`

是否可以将警报保存在应用程序中。如果是，你能告诉我怎么做。

能否请您提供我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:09:11.627

这应该让你继续前进。简而言之，您可以让您的应用程序免于监视警报本身。相反，您告诉系统为您跟踪它，并且只需创建一个应在警报响起时由系统唤醒的类。

[http://www.vogella.com/articles/AndroidServices/article.html#scheduleservice_scheduling](http://www.vogella.com/articles/AndroidServices/article.html#scheduleservice_scheduling)

# c++ - boost::asio::io_service 就绪处理程序的定义是什么？

> ID：14578102
> 
> 赞同：5
> 
> 时间：2013-01-29T07:55:48.257
> 
> 标签：c++, boost, boost-asio

我试图了解 io_service 的 poll()/poll_one() 和 run()/run_one() 之间的区别。文档中所述的区别在于 poll() 执行准备好的处理程序，而不是 run() 执行任何处理程序。

但是在 boost 文档中，我找不到“就绪处理程序”的定义。

这个问题的一个有效答案是能够展示（最好是通过代码示例）就绪和非就绪处理程序之间的区别以及 poll() 和 run() 执行它的方式之间的区别。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T08:31:31.950

“就绪处理程序”是准备好执行的处理程序。如果您发出了异步调用，它将在后台执行，并且在异步调用完成时其处理程序准备就绪。在此之前，处理程序处于挂起状态，但尚未准备好。

*   `poll_one`如果有，则执行一个就绪处理程序。
*   `poll`执行所有准备好的处理程序，但不执行待处理的处理程序。两个轮询版本在处理程序执行后立即返回。
*   `run_one`如果有一个准备好的处理程序，则执行一个准备好的处理程序，如果没有，它会等待第一个待处理的处理程序准备好，这意味着它会阻塞。
*   `run`执行并等待，直到既没有准备好也没有待处理的处理程序。返回后，io_servie 处于停止状态。

另请参阅[Boost::Asio : io_service.run() 与 poll() 或如何在 mainloop 中集成 boost::asio](https://stackoverflow.com/questions/4705411/boostasio-io-service-run-vs-poll-or-how-do-i-integrate-boostasio-in-ma)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-29T08:49:11.497

```
int main()
{
    boost::asio::io_service io_service;
    boost::asio::deadline_timer timer(io_service);

    timer.expires_from_now(boost::posix_time::seconds(5));
    timer.async_wait([](const boost::system::error_code& err)
                     { std::cout << (err ? "error" : "okay")
                     ;});

    //io_service.poll_one(); 
    io_service.run_one();
} 
```

如果您使用`io_service.poll_one();`，您很可能看不到任何输出，因为计时器尚未结束。`ready handler`简单地表示准备运行的句柄（例如当计时器经过或操作完成时等）。但是，如果您使用 `io_service.run_one();`此调用将阻塞，直到计时器完成并执行处理程序。

# javascript - jquery datatable fnAddData 数据操作

> ID：14578108
> 
> 赞同：0
> 
> 时间：2013-01-29T07:56:04.943
> 
> 标签：javascript, jquery, datatable

我想将每个单元格的内容包装到一个具有不同类的 div 中，我使用 fnAddData 将这些类放入数据表中。换句话说：当我使用

```
fnAddData(["a","b","c"]) 
```

我想查看表中的下一个值：

```
<div class="cellContent1">a</div>
<div class="cellContent2">b</div>
<div class="cellContent3">c</div> 
```

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:05:41.400

```
 fnAddData(array){
    var resluarray =array.split(',');
    var resultstring; 
    for (var i = 0, l = resluarray .length; i++){
    resultstring += '<div class="+resluarray[i]+">+resluarray[i]+</div>';

    }
   return resultstring ;
    } 
```

之后将结果字符串附加到您的 td 或您的 element 。

# vb.net - vb2010组合框自动更改项目中的文本

> ID：14578112
> 
> 赞同：0
> 
> 时间：2013-01-29T07:56:13.367
> 
> 标签：vb.net

我正在使用**vb2010**，但组合框有问题。我下面的代码从 mysql 数据库中获取项目，然后将其添加到组合框中。当我在组合框中输入“ **N** ”并按 Tab 时，组合框中有一个项目，例如“ **NERISON ”，组合框会自动将文本更改为“** **NERISON** ” - 这是我不想要的。我只想留下“N”作为文本。我该怎么做？

 ****```
If Not e.KeyChar = ChrW(8) Then
        txtprice.Text = ""
            With cmb_particular
                .Items.Clear()
                load_dbase() ' connects to database
                CNN.Open()
                runSql("select particular from particular where status=0 and particular like '%" & .Text & "%' order by particular") ' my function for queries
                While dr.Read
                    .Items.Add(dr("particular"))
                End While
                CNN.Close()
                .SelectionStart = cmb_particular.Text.Length
                .DroppedDown = True
            End With
        End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:39:57.023

在您的组合框属性中确保 AutoCompleteMode=None

@Nerison：我在表单中添加了一个组合框。我什么都不改变。我检查它的属性：

```
ComboBox1.AutoCompleteMode=None
ComboBox1.AutoCompleteSource=None
ComboBox1.DropDownStyle=DropDown 
```

我添加一个数据表作为数据源。现在我有你想要的行为了。我输入“N”，它不建议或附加任何内容。你能再检查一下吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:25:57.063

可能是组合框中的`autofill`/`autocompelte is enabled`吗？

对于 WPF，设置以下内容：

`IsTextSearchEnabled = False`

对于表格：

`ComboBox.AutoCompleteMode = False`****

# c# - 使用自定义 hql 生成器扩展 linq-to-nhibernate

> ID：14578113
> 
> 赞同：2
> 
> 时间：2013-01-29T07:56:28.787
> 
> 标签：c#, nhibernate, linq-to-nhibernate

目标是使用 NHibernate 和 Linq 做这样的事情：

```
Session.Query<MyClass>().Where(x => x.DateGreaterThen(DateTime.Now)) 
```

这个例子稍微简化了一点，但想法是在 Where 谓词中我想调用 MyClass 方法。所以 MyClass 看起来像：

```
public class MyClass
{
    public static readonly Expression<Func<MyClass, DateTime, bool>> GreaterThenExpression =
        (x, dt) => x.MyDateTimeProperty > dt.Date;

    private static readonly Func<MyClass, DateTime, bool> GreaterThenFunc = GreaterThenExpression.Compile();

    public Guid Id { get; set; }

    public DateTime MyDateTimeProperty { get; set; }

    public bool DateGreaterThen(DateTime dt)
    {
        return GreaterThenFunc(this, dt);
    }
} 
```

自定义生成器：

```
public class EntityMethodGenerator<T1, T2, TResult> : BaseHqlGeneratorForMethod
{
    private Expression<Func<T1, T2, TResult>>  _returnValueExpression;

    public EntityMethodGenerator()
    {
        SupportedMethods = new[]
                               {
                                   ReflectionHelper.GetMethodDefinition<MyClass>(myClass => myClass.DateGreaterThen(DateTime.Now))
                               };
    }

    public static void Register(ILinqToHqlGeneratorsRegistry registry, Expression<Action<T1>> method, Expression<Func<T1, T2, TResult>> returnValueExpression)
    {
        var generator = new EntityMethodGenerator<T1, T2, TResult> { _returnValueExpression = returnValueExpression };

        registry.RegisterGenerator(ReflectionHelper.GetMethodDefinition(method), generator);
    }

    public override HqlTreeNode BuildHql(
        MethodInfo method,
        Expression targetObject,
        ReadOnlyCollection<Expression> arguments,
        HqlTreeBuilder treeBuilder,
        IHqlExpressionVisitor visitor)
    {
        return visitor.Visit(_returnValueExpression);
    }
} 
```

最后是自定义自定义生成器注册表：

```
public class OwnLinqToHqlGeneratorsRegistry : DefaultLinqToHqlGeneratorsRegistry
{
    public OwnLinqToHqlGeneratorsRegistry()
    {
        EntityMethodGenerator<MyClass, DateTime, bool>.Register(this, (myClass) => myClass.DateGreaterThen(DateTime.Now), MyClass.GreaterThenExpression);
    }   
} 
```

但这不起作用，我`System.Data.SqlClient.SqlException : Invalid column name 'dt'.`怀疑我的 BuildHql 方法没有正确实现，有什么帮助解决这个问题吗？

顺便说一句，我想在生成器中使用表达式，比如我的而不是在方法`GreaterThenExpression`中手动构建 HqlTree`BuildHql`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:07:11.707

GreaterThenExpression 是一个羔羊。在 BuildHql() 中，您还需要注意 targetObject 和参数，否则您只是在 HQL 树中插入一些*未应用的 lambda 的 HQL 转换。*

您需要提取 lambda 的主体并将其参数替换为 targetObject 和参数。然后你可以从中生成 HQL。尝试使用 Remotion.Linq.Parsing.ExpressionTreeVisitors.MultiReplacingExpressionTreeVisitor。

（附带说明，它应该是 GreaterThan，而不是 GreaterThen。）

# ruby-on-rails - 在 Appfog 的不同环境中运行 Rails 应用程序

> ID：14578121
> 
> 赞同：1
> 
> 时间：2013-01-29T07:56:52.080
> 
> 标签：ruby-on-rails, appfog

我想在“暂存”环境而不是默认的“生产”环境中在 Appfog 上运行我的 RoR 应用程序。

我尝试添加环境变量 RAILS_ENV=staging，然后重新启动应用程序。但是，我收到了这个错误：

```
rake aborted!
database configuration does not specify adapter 
```

有没有人尝试在 Appfog 上这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:42:18.300

创建新环境：

假设您要创建 hudson 环境。

在 config/environments/hudson.rb 中创建一个新的环境文件。

您可以先克隆一个现有的，例如 config/environments/test.rb。在 config/database.yml 中为您的环境添加一个新的配置块。就这样。

现在你可以启动服务器了

ruby 脚本/服务器 -e hudson

运行控制台

红宝石脚本/服务器哈德森

等等。

# vb.net - 如何在 VB.NET 中正确使用 ProgressBar

> ID：14578123
> 
> 赞同：4
> 
> 时间：2013-01-29T07:56:55.020
> 
> 标签：vb.net

我必须在我的 VB.NET 程序中使用进度条，它的行为与 VB6 中的非常不同。例如，如果我有一个程序通过某个循环填充 datagridview 并使用进度条显示进度，会发生什么？
Datagridview 填充 100% 而进度条达到 50% 左右！

这是说明问题的示例程序。创建一个新项目，添加一个 windows 窗体，然后将此代码复制到 Form1 的代码上。

```
Public Class Form1

Dim myMax As Integer = 100000
Dim pb As New ProgressBar
Dim dgv As New DataGridView
Dim WithEvents ti As New Timer

Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    With Me
        .Width = 400
        .Height = 250

        .Controls.Add(pb)
        With pb
            .Maximum = myMax
            .Dock = DockStyle.Bottom
        End With

        .Controls.Add(dgv)
        With dgv
            .ColumnCount = 2
            .Dock = DockStyle.Fill
            .Columns(1).AutoSizeMode = DataGridViewAutoSizeColumnMode.Fill
            .Visible = False
        End With
    End With

    ti.Start()
End Sub

Private Sub OnFormLoaded(ByVal sender As Object, ByVal e As EventArgs) Handles ti.Tick
    ti.Enabled = False
    ti.Dispose()

    Dim temp As Integer

    For t = 0 To myMax

        If t Mod 100 = 0 Then
            pb.Value = t
            pb.Refresh()
            Application.DoEvents()

            temp += 1

            dgv.Rows.Add(New String() { _
                t.ToString, _
                temp.ToString _
                })
        End If
    Next
    pb.Value = myMax
    pb.Visible = False
    dgv.Visible = True
    dgv.Focus()

End Sub
End Class 
```

这段代码创建了几个控件，加载了一个表单并启动了一个循环来填充数据并在进度条中显示该进度。在该程序隐藏一个进度条并显示一个数据网格视图之后，具体（现实世界）程序中的常见情况是什么。

问题是，尽管 datagridview 填充和更新进度条都来自同一个循环（以 100 步为单位），但 datagridview 的填充比进度条显示进度快得多，并将其隐藏在 50% 左右。

这与 VB6 完全不同，VB6 的填充和显示是完全同步的，并且在进度条达到 100% 值后将显示网格。

如何在显示的代码上获得 VB.NET 中进度条的这种功能？
我尝试刷新进度条和 DoEvents 但这还不足以让它按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:13:14.930

为了解决这个问题，而不是仅仅从一个 ProgressBar 做一个“线程科幻小说”，你必须使用一种通常与微软的 GUI 工具包一起使用的技术。

这种方法可能可以解决您的具体问题：

```
 If t Mod 100 = 0 Then
        pb.Value = t
     If pb.Value > 0 Then pb.Value -= 1

        temp += 1

        dgv.Rows.Add(New String() { _
            t.ToString, _
            temp.ToString _
            })
    End If 
```

# c# - C# webclient：无法读取 ajax html 内容

> ID：14578124
> 
> 赞同：0
> 
> 时间：2013-01-29T07:56:58.247
> 
> 标签：c#, ajax, webclient

我想创建一个 HttpModule 来为 google bot 生成 html 快照，我的代码是：

```
private void Application_BeginRequest(Object source, EventArgs e)
{
    // Create HttpApplication and HttpContext objects to access
    // request and response properties.
    var application = (HttpApplication)source;
    HttpContext context = application.Context;

    string escapedFragment = HttpContext.Current.Request.Params["_escaped_fragment_"];

    if (!string.IsNullOrWhiteSpace(escapedFragment))
    {
        string result = string.Empty;
        using (var client = new WebClient())
        {
            Stream data = client.OpenRead("http://giadinhthinhvuong.com/#/" + escapedFragment);
            if (data != null)
            {
                var reader = new StreamReader(data);
                result = reader.ReadToEnd();
            }
        }
        context.Response.Write(result);
    }
} 
```

但是，它似乎不适用于网页中的 ajax 内容。

[在这里](http://GiaDinhThinhVuong.com?_escaped_fragment_=dang-nhap)你可以找到我的链接测试。

所以我的问题是：

1.  还有其他方法可以为 C# 生成 html 快照吗？
2.  还是有其他方法可以在 C# 中读取 ajax 内容？

# android - 如何使用 Intent.ACTION_EDIT 设置提醒时间？

> ID：14578126
> 
> 赞同：0
> 
> 时间：2013-01-29T07:57:04.880
> 
> 标签：android, calendar

我试图寻找选项，我怎样才能“控制” Intent.ACTION_EDIT？我的代码是：

```
public void addEvent(long beginTime, boolean allDayOrNot, long endTime, String title) {          
    Intent intent = new Intent(Intent.ACTION_EDIT);
    intent.setType("vnd.android.cursor.item/event");
    intent.putExtra("beginTime", beginTime);
    intent.putExtra("allDay", allDayOrNot);
    intent.putExtra("endTime", beginTime+60*60*1000);
    intent.putExtra("title", title);
    intent.putExtra("description", title);
    intent.putExtra("hasAlarm", true);
    startActivity(intent);  
} 
```

如您所见，我为“控制” ACTION_EDIT 屏幕发送了许多附加信息，我搜索了设置提醒时间（用于警报）的附加信息。我的目标是 ACTION_EDIT 屏幕将出现我的特定提醒时间，例如“30 分钟前”。我没有找到答案。有这样的额外吗？如果没有 - 还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:00:10.787

您可以为此使用计时器任务，[http://developer.android.com/reference/java/util/TimerTask.html](http://developer.android.com/reference/java/util/TimerTask.html)

# android - 图书馆或图书馆到二维码和条形码

> ID：14578132
> 
> 赞同：2
> 
> 时间：2013-01-29T07:57:39.617
> 
> 标签：android

我正在搜索很多关于条形码和二维码的图书馆，但我找不到两者都好的图书馆。我需要可以用于二维码和条形码的库。我找到 zxing 但是当平板电脑没有焦点代码时不会扫描。你喜欢哪个或哪些图书馆？我可以使用另外两个库。

# c# - 用 Parallel.For 总结 C# 数据表列？

> ID：14578133
> 
> 赞同：0
> 
> 时间：2013-01-29T07:57:46.500
> 
> 标签：c#, multithreading, .net-4.0, parallel-processing, task-parallel-library

我有这个数据表：

`DataTable dt = GetDatatTable();`

它的一列是`Amount`（十进制）

我想尽可能快地总结它`TPL`。

```
 object obj  = new Object();
  var total=0m;
  Parallel.For (1, dt.Rows.Count+1  ,i => {lock (obj) total += Decimal.Parse(dt.Rows[i-1]["Amount"]) }); 
```

但我真的不想多次锁定。

**问题 #1**

有没有其他选择可以减少广泛的锁？

**问题2**

我不明白为什么我需要保护总蓄能器

*   保护是针对`+=`还是针对多*线程更新*`total`？

    我的意思是看下面的流程，一个`Volatile`领域可以很容易地解决它。

    假设`total=0`
    DataTable 项目是`1,2,3`

    **1）**第一个线程：total=total+1。（总计=1）

    **2）**第二个线程：total = total+ `___stop__` （上下文切换，线程3进来的值为3） `___val=_3____`（total =1+3=4）

    **3)**上下文切换回线程 2 总计=4+2 = 6。

    所以一切似乎都很好。

我一定在这里遗漏了一些东西。

**PS** 我知道我可以做到：

```
ParallelEnumerable.Range (1, dt.Rows.Count+1).Sum (i => Decimal.Parse(dt.Rows[i-1]["Amount"]) ) 
```

但我想学着做`Parallel.For`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:44:46.513

由于您需要使用锁定来确保正确的结果，因此我认为不会`Parallel.For`给您买任何东西。您不能并行锁定某些东西；根据定义，锁定是串行完成的。

因此，一个简单的`for`循环将同样高效，并且更易于使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:18:06.560

是的，有减少锁的替代方法：

1.  使用[支持本地数据的](http://msdn.microsoft.com/en-us/library/dd783299.aspx)[重载`Parallel.For()`](http://msdn.microsoft.com/en-us/library/dd783299.aspx)。这样，您只需要在`localFinally`委托中进行同步（但您不应该在那里忘记它）。
2.  使用`Interlocked.Add()`. 这在您的情况下不起作用，因为只有`int`and有重载，而`long`不是`decimal`.
3.  不要使用并行处理。通过像这样一个非常简单的操作，并行处理的开销很可能会超过速度的增益。
4.  使用 PLINQ：

    ```
    var total =
        ParallelEnumerable.Range(0, dt.Rows.Count)
                          .Select(i => Decimal.Parse(dt.Rows[i]["Amount"]))
                          .Sum(); 
    ```

关于您的线程安全问题，您假设在“上下文切换”之后（我使用了可怕的引号，因为在多核 CPU 上，发生此问题不需要任何上下文切换），线程将读取的当前值`total`。但实际上，它已经读取了旧值，现在保存在寄存器中。因此，第 3 步的结果将变为 1 + 2 = 3。

# c# - 如何在下一个位置为数组添加值

> ID：14578135
> 
> 赞同：0
> 
> 时间：2013-01-29T07:57:50.010
> 
> 标签：c#

我正在构建一个像数码相机一样的小应用程序，在我的拍照功能上，我想向我的数组插入一个随机数（我成功做到了），我的问题是当我拍摄多张照片时，值总是进入第一个职位。我的代码：

```
public override void TakePhoto()
{
    Random rnd = new Random();
    int photo = rnd.Next(1, 10);
    for (int i = 0; i < 1; i++)
    {

        MemoryCard.buffer[i] = photo;
    }
}

class Program
{
    static void Main(string[] args)
    {

        DigitalCamera digitalCamera = 
            new DigitalCamera("kodak", 43, newMemoryCard, 3);

        digitalCamera.TakePhoto();
        digitalCamera.TakePhoto();
        digitalCamera.TakePhoto();

    }
} 
```

每张照片后如何跳到下一个位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T07:59:59.160

您明确地说将下一个值放在第一个位置。

查看您的代码：

```
for (int i = 0; i < 1; i++)
{
   MemoryCard.buffer[i] = photo;
} 
```

`i`总是`0`

要解决此问题，只需将 i 值保存到某个全局变量中，或者将*下一个索引*像函数中的参数一样接受`TakePhoto(...)`。

例子：

```
int curindex = 0; //GLOBAL VARIABLE 

public override void TakePhoto()
{
   Random rnd = new Random();
   int photo = rnd.Next(1, 10);
   if(curindex < MemoryCard.buffer.Length) //IF CURINDEX LESS THE TOTAL ARRAY LENGTH
   {
      MemoryCard.buffer[curindex] = photo;  //ASSIGN PHOTO IN CURRENTINDEX
      curindex ++;                          //INCEREMENT CURRENTINDEX
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T08:02:17.823

1.  你的 for 循环中有一个错误，我假设你想使用变量`Length` 的`buffer`
2.  你调用`TakePhoto`太快了，因此你[`Random`](http://msdn.microsoft.com/en-us/library/system.random.aspx)总是用相同的种子创建，因此总是生成相同的“随机”数字。

而是将`Random`实例作为参数传递给方法或使用字段变量。

```
public override void TakePhoto(Random rnd)
{
    int photo = rnd.Next(1, 10);
    for (int i = 0; i < MemoryCard.buffer.Length; i++)
    {

        MemoryCard.buffer[i] = photo;
    }
} 
```

现在总是使用相同的实例：

```
Random r = new Random();
DigitalCamera digitalCamera = new DigitalCamera("kodak", 43, newMemoryCard, 3);
digitalCamera.TakePhoto(r);
digitalCamera.TakePhoto(r);
digitalCamera.TakePhoto(r); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T08:04:21.743

我认为对您的代码进行以下修改将解决您的问题：

```
class DigitalCamera
{
    static int currentPhotoNumber = 0;
    private Random rnd = new Random();

    public override void TakePhoto()
    {
        int photo = rnd.Next(1, 10);
        MemoryCard.buffer[currentPhotoNumber++] = photo;
    }
}
class Program
{
    static void Main(string[] args)
    {

        DigitalCamera digitalCamera = new DigitalCamera("kodak", 43, newMemoryCard, 3);

        digitalCamera.TakePhoto();
        digitalCamera.TakePhoto();
        digitalCamera.TakePhoto();

    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-29T08:02:06.490

您的代码中存在逻辑错误：

```
 for (int i = 0; i < 1; i++)
    {

        MemoryCard.buffer[i] = photo;
    } 
```

如果您查看 for 循环变量，循环从 i=0 运行到 i<1。这基本上意味着循环只运行一次（对于 i=0）。

你每次都需要增加 i ，也许

```
 MemoryCard.buffer[MemoryCard.numberofphotos] = photo;
 MemoryCard.numberofphotos++; 
```

# glassfish - glassfish关闭时如何通知用户

> ID：14578143
> 
> 赞同：0
> 
> 时间：2013-01-29T07:58:33.160
> 
> 标签：glassfish

我正在为我的项目使用**Glassfish v3.0.1**。但是，Glassfish 似乎多次下跌。因此，我想开发一种在 Glassfish 出现故障时通知我的机制。Glassfish 有什么选择吗？如果没有，我怎样才能做到这一点？此外，我如何理解 Glassfish 为何会失败？我在日志中找不到正确的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:08:49.000

我不知道 Glassfish 本身有任何选项，我怀疑是否有任何选项（进程通常很难知道它何时死亡:-)。编写脚本尝试连接到服务（例如，使用`wget`or `curl`）或使用监视进程的[系统监控工具](http://en.wikipedia.org/wiki/System_monitor)。

要找出 Glassfish 终止的原因，您必须调试问题。这里有一些提示：

*   添加/启用更多日志记录
*   在源代码中搜索`System.exit()`. 这可以终止 Java 应用程序，而无需任何跟踪它发生的原因。（[这也可能有帮助](https://stackoverflow.com/questions/5401281/preventing-system-exit-from-api)）
*   检查进程的标准输出
*   寻找崩溃转储；请参阅您正在使用的 Java VM 的文档。

# linux - 虚拟内存真的存在吗？

> ID：14578146
> 
> 赞同：0
> 
> 时间：2013-01-29T07:58:42.253
> 
> 标签：linux, memory, memory-management, operating-system

虚拟内存是否存在于我们计算机系统中的某个地方（即硬盘上）？

如果不是，如果数据不在主内存中，即（发生页面错误），如何进行从虚拟内存到硬盘中真实数据的映射。是否有任何表维护从虚拟内存到硬盘数据的映射..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:35:12.587

1.  内存之所以被称为*虚拟*内存，是因为进程将其地址空间视为可用内存的连续块，使用底层地址总线宽度的所有宽度，比如 4GB 用于 32 位系统。所以每个进程都有一个 4GB 的地址空间，但是这个内存并没有完全由物理内存一对一地支持。即使你有 4GB 的物理内存来支持进程的 4GB 地址空间，内核会去哪里，其他进程呢？该内存*必须*是虚拟的。
2.  是的，表维护进程地址空间。为简单起见，一些页面当前映射到易失性物理内存上，而另一些页面则没有。它们由 HDD 上的内存文件支持。当发生页面错误时，页面错误将检查该页面是否映射到物理内存（通常它在页面属性内部），如果没有，它将从 HDD 上的内存映射文件中获取它，并用它替换映射到物理内存的旧页面。

希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T08:02:11.377

Yes virtual memory really does exist and yes there is a table that maintains the mapping. Look for [page table](http://en.wikipedia.org/wiki/Virtual_memory#Page_tables) in wikipedia for instance. In fact most of the virtual memory article will answer your question in full.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T08:02:27.973

Most of your questions are answered by [http://en.wikipedia.org/wiki/Virtual_memory](http://en.wikipedia.org/wiki/Virtual_memory).

1.  A backing store must exist for virtual memory. This is usually a hard disk. Basically its some other device that ua usually slower than RAM but is **much bigger** in capacity.
2.  When a page fault occurs, the page is obtained from the backing store
3.  The page table contains information on where in the backing store the page is to found

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T08:02:03.813

Short answer, no :) Virtual Memory is virtual! Especially if you consider virtual memory as "the memory that can be addressed by a process". On 64 bit systems, the whole disk hardly could back the entire virtual memory. So "in reality", as you asked, I would say no.

Long(-ish) answer: virtual memory exists as a series of data structures in the kernel. They mostly keep trace of which page/segment is currently reserved, allocated, mapped to a file or mapped to physical memory. Also, the answer is different if what you look at is "allocated virtual memory". This always exists in one form or another (usually, pages backed by hard-disk swap space).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T08:02:39.563

Yes, most used bytes of virtual memory exist somewhere. I say "most" because pages that map registers of some special hardware can have holes. But all memory allocated by you app exists either in RAM or on hard disk.

The wikipedia article explains all the details: [http://en.wikipedia.org/wiki/Virtual_memory](http://en.wikipedia.org/wiki/Virtual_memory)

# svn - 在 TortoiseSVN 中搁置和审查代码

> ID：14578151
> 
> 赞同：5
> 
> 时间：2013-01-29T07:58:57.883
> 
> 标签：svn, tortoisesvn, shelving

我想搁置 SVN 中的代码更改，主要用于代码审查。我遇到了一些问题，希望有人可以检查我是否做错了什么。

我已将存储库设置为具有此额外结构：

```
/shelves
    /username1
    /username2 
```

然后要创建一个架子，我右键单击我的工作目录的根文件夹，单击`Branch/Tag...`，浏览到正确的路径（例如`/shelves/username1/MYPROJECT_29012013`），选择`Working copy`，最后是`OK`。

要查看我的书架中的代码，我将转到`Repo Browser`，浏览到书架分支，右键单击它并选择`Show Log`。这会弹出一个弹出窗口，其中包含下半部分的文件列表。双击这些文件中的任何一个都会显示更改的差异。魔法！

这在我在我的机器上创建的一个小测试 repo 上非常有效。在我们的实际代码库（带有远程仓库）上，当我双击 diff 文件时出现错误。它说

```
"URL http://.../the/file/I/changed.cpp doesn't exist" 
```

我做错什么了吗？或者这可能是一个错误？有没有更好的方法来实施搁置和代码审查`TortoiseSVN`？

编辑：这个过程适用于我在 TortoiseSVN 1.7.5 (SVN 1.7.3) 上的同事。我在 TortoiseSVN 1.7.10 (SVN 1.7.7)。所以这很可能是一个错误？或者我的机器上的设置不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T07:01:19.240

如果您在左下角勾选了停止复制/重命名，请取消勾选。我认为这是一个错误，因为即使文件没有以前的修订版，tortoisediff 在比较的左侧也会显示空白

# c++ - 具有多个客户端的服务器：如何将消息从一个客户端转发到另一个客户端

> ID：14578156
> 
> 赞同：1
> 
> 时间：2013-01-29T07:59:36.277
> 
> 标签：c++, multithreading, sockets

我有一个可以处理多个客户端（每个客户端一个线程）的工作服务器 - 从[这里](http://www.codeproject.com/internet/singleServerMulClient.asp)改编。目前它的工作原理是这样的：

1.  客户端连接到服务器
2.  用户在客户端控制台上键入消息，该消息被发送到服务器（并显示在服务器端控制台上。
3.  用户在服务器控制台上键入消息，该消息被发送回同一客户端。

但是我想做的是从例如客户端1接收一条消息，该消息将发送到服务器进行处理，然后可能会转发到客户端3（它将消息转发到哪个客户端由服务器确定）。

我的猜测是我需要修改`clientHandleThread`，但我不知道我需要做什么。我也不确定是否可以从当前线程访问单独的线程。

我对套接字编程和线程非常陌生，并且努力学习，因此欢迎任何帮助！我附上包含的代码`main()`（如果我应该附上其他代码，请告诉我！）

```
myLog winLog;

DWORD WINAPI clientHandleThread(LPVOID threadInfo)
{
    //this structure will contain all the data this callback will work on
    myThreadArgument* clientArgument = (myThreadArgument*)threadInfo;

    //the semamphore to protect the access to the std output
    mySemaphore* coutSemaphore = clientArgument->getCoutSemaphore();

    /*get the client connection: receiving messages from client and
    sending messages to the client will all be done by using
    this client connection*/
    myTcpSocket* clientConnection = clientArgument->getClientConnect();
    string clientName = clientArgument->getHostName();

    //the server is communicating with this client here
    while(1)
    {
        string messageFromClient = "";

        //receive from the client

        int numBytes = clientConnection->receiveMessage(messageFromClient);
        if ( numBytes == -99 ) break;

        //write to the console and the log file, so lock the semaphore
        coutSemaphore->lock();

        cout   << "[RECV fr " << clientName << "]: " << messageFromClient << endl;
        winLog << "[RECV fr " << clientName << "]: " << messageFromClient << endl;

        msgInfo proMsgFrCli = msgClassification(messageFromClient);

        //if the client wants to discount
        if ( messageFromClient.compare("quit") == 0 || messageFromClient.compare("Quit") == 0 )
        {
            coutSemaphore->unlock();
            break;
        }
        else // send to the client
        {
            char messageToClient[MAX_MSG_LEN+1];
            memset(messageToClient,0,sizeof(messageToClient));
            cout << "[SEND to " << clientName << "]: ";
            cin.getline(messageToClient,MAX_MSG_LEN);
            winLog << "[SEND to " << clientName << "]: " << messageToClient << endl;
            clientConnection->sendMessage(string(messageToClient));
            coutSemaphore->unlock();
        }
    }

    // if we reach here, this session with the client is done,
    // so we set the event on this thread to inform the main
    // control that this session is finished
    clientArgument->getExitEvent()->setEvent();
    return 1;
}

DWORD WINAPI serverHandleThread(LPVOID threadInfo) //server thread
{
    //this structure will contain all the data this callback will work on
    myThreadArgument* serverArgument = (myThreadArgument*)threadInfo;

    //the semamphore to protect the access to the std output
    mySemaphore* coutSemaphore = serverArgument->getCoutSemaphore();

    //get the server
    myTcpSocket* myServer = serverArgument->getClientConnect();
    string serverName = serverArgument->getHostName();

    //bind the server to the socket
    myServer->bindSocket();
    cout   << endl << "server finishes binding process... " << endl;
    winLog << endl << "server finishes binding process... " << endl;

    //server starts to wait for client calls
    myServer->listenToClient();
    cout   << "server is waiting for client calls ... " << endl;
    winLog << "server is waiting for client calls ... " << endl;

    //server starts to listen, and generates a thread to handle each client
    myThreadArgument* clientArgument[MAX_NUM_CLIENTS];
    myThread* clientHandle[MAX_NUM_CLIENTS];
    for ( int i = 0; i < MAX_NUM_CLIENTS; i++ )
    {
        clientArgument[i] = NULL;
        clientHandle[i] = NULL;
    }
    int currNumOfClients = 0;
    char buffer [100]; //temp buffer to convert currNumOfClients to char

    while ( 1 )
    {
        //wait to accept a client connection.  
        //processing is suspended until the client connects
        myTcpSocket* client; //connection dedicated for client communication
        string clientName; //client name 
        client = myServer->acceptClient(clientName);    
        clientName = clientName + "-" + itoa(currNumOfClients, buffer, 10);//char(65+currNumOfClients);

        //lock the std out so we can write to the console
        coutSemaphore->lock();
        cout   << endl << endl << "==> a client from [" << clientName << "] is connected!" << endl;
        winLog << endl << "==> a client from [" << clientName << "] is connected!" << endl << endl;

        coutSemaphore->unlock();

        //for this client, generate a thread to handle it
        if ( currNumOfClients < MAX_NUM_CLIENTS-1 )
        {
            clientArgument[currNumOfClients] = new myThreadArgument(client,coutSemaphore,clientName);
            clientHandle[currNumOfClients] = new myThread(clientHandleThread,(void*)clientArgument[currNumOfClients]);
            serverArgument->addClientArgument(clientArgument[currNumOfClients]);
            clientHandle[currNumOfClients]->execute();
            currNumOfClients++;
        }
    }

    return 1;
}

int main()
{
    /*build a semaphore so we can synchronize the access to std cout
    also includes the log file*/
    mySemaphore coutSemaphore(string(""),1);

    //initialize the winsock library
    myTcpSocket::initialize();

    /*create the server: local host will be used as the server, let us 
    first use myHostInfo class to show the name and IP address 
    of the local host*/
    winLog << endl;
    winLog << "retrieve the local host name and address:" << endl;

    myHostInfo serverInfo;
    string serverName = serverInfo.getHostName();
    string serverIPAddress = serverInfo.getHostIPAddress();
    cout << "my localhost (server) information:" << endl;
    cout << "   name:    " << serverName << endl;
    cout << "   address: " << serverIPAddress << endl;
    winLog << "     ==> name: " << serverName << endl;
    winLog << "     ==> address: " << serverIPAddress << endl;

    //open socket on the local host(server) and show its configuration
    myTcpSocket myServer(PORTNUM);
    cout   << myServer;
    winLog << myServer;

    //read connectivityFile
    neighbourInfo = connFrFile(numberOfFiles, intBtwnChange);
    //read routingFile
    nextHopInfo = routFrFile(numberOfFiles, intBtwnChange);

    /*create a thread to implement server process: listening to the socket,
    accepting client calls and communicating with clients. This will free the 
    main control (see below) to do other process*/
    myThreadArgument* serverArgument = new myThreadArgument(&myServer,&coutSemaphore,serverName);
    myThread* serverThread = new myThread(serverHandleThread,(void*)serverArgument);
    serverThread->execute();

    // main control: since the serverThread is handling the server functions,
    // this main control is free to do other things.
    while ( 1 )
    {
        /*do whatever you need to do here, I am using Sleep(x) 
        to make a little delay, pretending to be the other 
        possible processings*/
        Sleep(50000);

        //report the server status
        coutSemaphore.lock();
        cout   << endl << "-----------------------------------------------------------------" << endl;
        winLog << endl << "-----------------------------------------------------------------" << endl;
        cout   << "server (name:" << serverName << ") status report:" << endl;
        winLog << "server (name:" << serverName << ") status report:" << endl;
        cout   << "   the following clients have successfully connected with server: " << endl;
        winLog << "   the following clients have successfully connected with server: " << endl;
        for ( int i = 0; i < MAX_NUM_CLIENTS; i ++ )
        {
            myThreadArgument* clientInfo = serverArgument->getClientArgument(i);
            if ( clientInfo ) 
            {
                cout   << "         " << clientInfo->getHostName() << endl;
                winLog << "         " << clientInfo->getHostName() << endl;
            }
        }
        cout   << "   the following clients have shutdown the connection: " << endl;
        winLog << "   the following clients have shutdown the connection: " << endl;
        for ( int i = 0; i < MAX_NUM_CLIENTS; i ++ )
        {
            myThreadArgument* clientInfo = serverArgument->getClientArgument(i);
            if ( clientInfo && clientInfo->getExitEvent()->waitForEvent(0) )
            {
                clientInfo->setSignalToEnd(true);
                cout   << "         " << clientInfo->getHostName() << endl;
                winLog << "         " << clientInfo->getHostName() << endl;
            }
        }
        cout   << "-----------------------------------------------------------------" << endl << endl;
        winLog << "-----------------------------------------------------------------" << endl << endl;
        coutSemaphore.unlock();
    }

    return 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:05:44.977

对于每个连接，您可以有两个队列：一个用于输入，一个用于输出。连接线程（如果每个连接有一个专用线程）从客户端读取输入并将其放入输入队列。连接线程还从输出队列中获取消息并将其发送到连接的客户端。

然后服务器有另一个线程，它遍历所有连接输入队列，提取消息，决定如何处理输入，然后可能将其放入其他连接的输出队列。

* * *

伪代码示例：

```
struct message_struct
{
    int source;       // Source where the message came from
    int destination;  // Destination client to send message on to
}

void client_thread()
{
    while (!exit_thread)
    {
        if (is_there_anything_to_recv())
        {
            // Receive and parse a message from the client
            message = receive();

            // Add to the threads input queue
            add_to_queue(input_queue, message);
        }

        // As long as there are messages in the output queue
        while (!queue_is_empty(output_queue))
        {
            // Remove one message from the queue
            message = remove_from_queue(output_queue);

            // And send it to the connected client
            send(message);
        }
    }
}

void server_thread()
{
    while (!exit_thread)
    {
        // Check for new connections
        // ...

        // Assuming the threads are on array (or array-like structure)
        for (i = 0; i < number_of_client_threads; i++)
        {
            // While the current threads (`i`)  input queue is not empty
            while (!queue_is_empty(client_threads[i].input_queue))
            {
                // Remove the message from the threads input queue
                message = remove_from_queue(client_threads[i].input_queue);

                // And add it to the destinations output queue
                add_to_queue(client_threads[message.destination].output_queue);
            }
        }
    }
} 
```

# php - 如何检查我的代码可以处理多少流量？

> ID：14578166
> 
> 赞同：2
> 
> 时间：2013-01-29T08:00:17.870
> 
> 标签：php, scale

我正在编写一个网站（在 php 中），我想知道如何测试和了解我的代码可以处理多少流量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T08:02:01.717

您需要执行负载测试。您可以使用

1.  [阿帕奇JMeter](http://jmeter.apache.org/)
2.  围城
3.  阿帕奇基准 ( `ab`)

在这三个 JMeter 中比较好，这是我的推荐。我从来没用过`ab`。

# php - PHP/MySQLi while 在 while 内首先重复 while 值

> ID：14578167
> 
> 赞同：1
> 
> 时间：2013-01-29T08:00:17.680
> 
> 标签：php, mysqli, while-loop

代码：

```
$query = $db->query("SELECT day FROM impressions WHERE pub_id = '$pub_id' AND pub_tag = '$pub_tag' AND month = '$month' AND valid = '1' GROUP BY day ASC");
$stat_rev = $query->num_rows;
if($stat_rev > 0) {
    while($revenue = $query->fetch_array())
    {
        $revenues[] = $revenue;
    }
    foreach($revenues as $revenue)
    {
        echo $rev_day = $revenue['day'].':';

        $queryi = $db->query("SELECT revenue FROM impressions WHERE pub_id = '$pub_id' AND pub_tag = '$pub_tag' AND month = '$month' AND day = '$rev_day' AND valid = '1'");
        while($rev = $queryi->fetch_array())
        {
            $revs[] = $rev;
        }
        foreach($revs as $rev)
        {
            //$total_rev = $total_rev + $rev['revenue'];
            echo $rev['revenue'].',';
        }
        $queryi->close();

        echo ' - ';

        //echo '[\''.$revenue['day'].'\', '.$total_rev.'],';
        $total_rev = 0;

    }
} 
```

输出：

```
28:0.001,0.001,0.006, - 29:0.001,0.001,0.006,0.006,0.001, - 
```

数据库：

```
28: 0.001
28: 0.001
28: 0.006
29: 0.006
29: 0.001 
```

在第一次循环运行期间，当天是 28，循环显示 0.001、0.001、0.006。现在在第 29 天第二次循环运行时，循环显示 0.001、0.001、0.006、0.006、0.001。第二个循环显示我尝试过但无法修复的第一个循环值我想显示诸如 28 之类的值：0.001、0.001、0.006 和 29：0.006、0.001。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:02:56.913

在您的 while 循环之前，您需要 reset `$revs`，否则您只是将更多内容附加到已经存在的值中。

`$revs = array( );`在 foreach 中添加类似的东西应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:41:48.910

改变你的

```
 while($rev = $queryi->fetch_array())
    {
        $revs[] = $rev;
    } 
```

到

```
 while($rev = $queryi->fetch_array())
    {
        $revs[$rev_day][] = $rev;
    } 
```

这将为您提供一个结构化数组，您可以稍后处理。

或者

在while之前初始化数组

```
 $revs      = aray();
    while($rev = $queryi->fetch_array())
    {
        $revs[$rev_day][] = $rev;
    } 
```

# c# - C# DataGrid 字符编码

> ID：14578170
> 
> 赞同：2
> 
> 时间：2013-01-29T08:00:43.653
> 
> 标签：c#, winforms, encoding

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:22:26.703

Without knowing the file's encoding in advance, the best you can do is guess what that encoding is.

I suggest you read this great article: [http://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

It's fun to read and I personally found some valuable information/clarifications in there.

But the main takeaway from the article is this:

> ### It does not make sense to have a string without knowing what encoding it uses.

* * *

Leaving theory aside, I know in practice it is sometimes impossible to ask a user what is the encoding of the file they just submitted/uploaded.

So, again, the best you can do is guess.

I have dealt with this problem a few times in my career and every time I managed to find a *good enough* encoding guessing algorithm, depending on the nature of the system being developed.

The best thing you can do is grab as many sample files as you can, manually analyze their encodings and see if you can find patterns, such as:

*   all users submit files encoded in UTF-8, except users A and B who use ISO-8859-1
*   if a file contains a certain byte sequence, it's very likely that it's encoding A, otherwise use default encoding B

# css - How to put a transparent image over a div containing a pdf in iframe

> ID：14578173
> 
> 赞同：2
> 
> 时间：2013-01-29T08:01:03.467
> 
> 标签：css, html

I have a Div consists of an iframe to display a pdf. I just want to safe my pdf by putting up a transparent image over the iframe. So that nobody can download the pdf. I am using following code :

```
<div id="tobecovered">
    <p>your content...</p>
    <img src="./img/transparent.png" class="cover" />
</div>

div#tobecovered{
    position: relative;
}
div#tobecovered img.cover{
    position: absolute;
    /* position in top left of #tobecovered */
    top: 0; /* top of #tobecovered */
    left: 0; /* left of #tobecovered */
} 
```

Its working fine in Chrome but not working in Mozilla Firefox. Can anybody help ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:21:00.487

That is what I think of:

The new HTML:

```
<div id="tobecovered">
    <p>your content...</p>
    <div class="cover"></div> <!--for example-->
</div> 
```

And the new CSS:

```
div#tobecovered{
    position: relative;
}
div#tobecovered div.cover{
    background: url(images/./img/transparent.png) no-repeat 0 0;
    width: 100px; /*for example*/
    height: 100px; /*for example*/
    position: absolute;
    /* position in top left of #tobecovered */
    top: 0; /* top of #tobecovered */
    left: 0; /* left of #tobecovered */

    opacity: 0.0; 
    filter:alpha(opacity=0);
} 
```

Or if you want change `background: transparent` with `opacity: 0.0; filter:alpha(opacity=0);`

Thats if you have image, and when you have iFrame it will be buggy. So try to create completely transparent image in photoshop. And just put it for a cover. That way you don't need to add transparency or opacity to the cover element and it might cover the iframe, because it does the bug only if there is lower opacity than 1\. (that I've heard). and may be you have to put some z-index ... try it :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:28:14.037

给`max-width; max-height`图像 100%：

```
div#tobecovered img.cover{
    position: absolute;
    /* position in top left of #tobecovered */
    top: 0; /* top of #tobecovered */
    left: 0; /* left of #tobecovered */
    max-width: 100%;
    max-height: 100%;
} 
```

# batch-file - 在远程机器上使用凭据进行 xcopy

> ID：14578175
> 
> 赞同：21
> 
> 时间：2013-01-29T08:01:11.427
> 
> 标签：batch-file, network-programming, remote-access, credentials

我正在尝试通过其 IP 地址访问不同域上的远程服务器。在运行命令中，我输入了以下内容

```
\\XXX.XXX.XXX.XXX\C$\Program Files\ 
```

我得到一个弹出窗口，要求输入用户名和密码。我进入它，并访问了路径。当我再次尝试访问该文件夹时，它不会询问我的密码。但是当我重新启动时，它确实再次弹出。

有没有办法添加我的凭据？假设我的域\用户名是`MyDomain\RapsyTree`. 我尝试了以下方法：

```
cmdkey /generic:TERMSRV/YYY.YY.YYY.YYY /user:YourDomain\rapsalands /pass:secretPass 
```

凭据正在添加。但我仍然会弹出用户名和密码。

实际上，我正在尝试`xcopy`在不同域的此服务器上处理一些文件。但我需要用不同的凭据来做。我正在使用批处理文件。任何指针都会有很大帮助。如果我不清楚，请告诉我。我正在使用`Windows 7`谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-29T08:08:12.087

你只需要映射一个网络驱动器：

```
net use Z: \\XXX.XXX.XXX.XXX\C$ password /user:domain\username 
```

如果您希望驱动器在下次登录时重新连接，请添加选项`/persistent:yes`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-29T11:21:50.927

你也可以试试这个。将用户名和密码作为参数传递。复制后它会删除映射并断开连接。

```
SET username=%1
SET password=%2
net use "\\xxx.xxx.xxx.xxx\Some Folder" %password% /user:domain\%username%
:copy
copy "\\xxx.xxx.xxx.xxx\Some Folder\New.txt" "D:\new.txt"
IF ERRORLEVEL 0 goto disconnect
goto end
:disconnect 
net use "\\xxx.xxx.xxx.xxx\Some Folder" /delete
goto end
:end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-29T09:22:21.287

尝试将 IP 放在双引号中。它对我有用。

```
net use "\\xxx.xxx.xxx.xxx\Some Folder" password /user:domain\username 
```

让我发布:)

# emacs - 查看以“Cx r”前缀键开头的所有绑定？

> ID：14578178
> 
> 赞同：0
> 
> 时间：2013-01-29T08:01:33.903
> 
> 标签：emacs

> **可能重复：**
> [如何在 Emacs 中获取以某个键（组合）开头的命令列表？](https://stackoverflow.com/questions/1282100/how-do-i-get-a-list-of-commands-starting-with-a-certain-key-combo-in-emacs)

例如，有 3 个命令，如`C-x r i`, `C-x r s`,`C-x r b`

有没有人知道如何`C-x r`在emacs中查看所有这些命令？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T08:13:00.687

只需`C-h`在前缀键后键入：`C-x r C-h`

# java - What type of Charset URL encoding should this use?

> ID：14578179
> 
> 赞同：0
> 
> 时间：2013-01-29T08:01:34.360
> 
> 标签：java, http, url

I have a rest api and when I enter a URL in the browser, part of the URL looks like this:

```
...where+%7B%0D%0A%3Fs+<http%3A%2F%2F... 
```

which actually stands for

```
...where { ?s <http://... 
```

Now, when I have to call the same URl through my JAVA code, I know of URLEncoder using which I am encoding the URL. When I use "UTF-8" format, the "<" in the URL is also encoded as %3C.

Is there any way of encoding such that the "<" and ">" are retained while other parts of the URL such as spaces and others are encoded properly.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:36:50.763

“<”得到编码的原因是因为它不是合法的URI字符。它与字符编码无关。

如果服务器没有正确处理转义序列，那么它需要得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:03:32.743

You can do

```
URLEncoder.encode(urlString).replace("%3C", "<") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:29:02.300

```
URLEncoder.encode(url, "UTF-8").replaceAll("%3C", "<").replaceAll("%3E", ">"); 
```

# javascript - Windows 8 添加图像

> ID：14578181
> 
> 赞同：0
> 
> 时间：2013-01-29T08:01:40.923
> 
> 标签：javascript, html, windows-8

我正在尝试将图像添加到我的 hello world 应用程序（HTML / JavaScript）。

我可以添加标准图像（logo.png、smalllogo.png 等），但 `<img src="images/testImg.png">`在测试应用程序时添加：不会显示。

该图像位于图像文件夹中，但不会显示。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:39:31.227

显然需要通过单击“添加->现有项目->图像”来添加图像。然后它会被加载并在应用程序中可用。

# jquery - How to set Min and Max range for datetime calender

> ID：14578182
> 
> 赞同：0
> 
> 时间：2013-01-29T08:01:41.343
> 
> 标签：jquery

I am using the calender from the link: [http://razum.si/jQuery-calendar/TimeCalendar.html](http://razum.si/jQuery-calendar/TimeCalendar.html)

but i want one extra function setting min and max date range.

i have two input feilds and set the range with one another.

in my JS i have like this

```
$("#datepicker1").calendar({ fieldSettings :customRange});
$("#datepicker2").calendar({ fieldSettings :customRange});

function customRange(input) {
    return { 
        minDate : (input.id == 'datepicker2' ? (getDate(jq11('#datepicker1').val())) : null),
        maxDate :(input.id == 'datepicker1' ? (getDate(jq11('#datepicker2').val())) : null)
    } 
} 
```

but it is not working. Please help me

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:34:04.600

如果要限制日期范围，可以使用[jqueryui](http://jqueryui.com/datepicker/#min-max)`Datepicker`中的小部件。页面上有完整的代码示例，但我将粘贴其用法的摘录：

```
<script>
  $(function() {
    $( "#datepicker" ).datepicker({ minDate: -20, maxDate: "+1M +10D" });
  });
</script> 
```

# lua - 在变量赋值中处理可变参数值的惯用方法是什么？

> ID：14578191
> 
> 赞同：6
> 
> 时间：2013-01-29T08:02:21.317
> 
> 标签：lua

我有一些代码想要从函数中获取一些额外的返回值，然后将它们转发给：

```
local ok, ... = coroutine.resume(co)
do_stuff(ok)
return ... 
```

但是，这不会运行，因为`...`变量赋值是语法错误。

我可以通过使用旧的“函数参数和变量是等效的”技巧和立即调用的函数来解决这个限制

```
return (function(ok, ...)
    do_stuff(ok)
    return ...
)(coroutine.resume(co)) 
```

但我想这样做不会很惯用或有效。有没有更合理的方法来解决这个处理`resume`调用返回的剩余值的问题？

编辑：顺便说一句，这需要使用`nil`额外参数中的值

**EDIT2：**看起来使用立即调用的函数一直是最好的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T10:38:21.290

恕我直言，最好的方法是将 vararg 作为参数传递给辅助函数，就像您在问题中所做的那样。
另一种方法是“打包-解包”：

```
-- Lua 5.2 only
local t = table.pack(coroutine.resume(co))
do_stuff(t[1])
return table.unpack(t, 2, t.n) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T08:57:36.470

使用未知数量的返回值执行此操作的惯用方法是将函数调用包装在表构造函数中：

```
local t = { coroutine.resume(co) }
do_stuff(table.remove(t, 1)) 
return unpack(t)  -- table.unpack(t) in lua 5.2 
```

虽然这也涉及创建一个临时对象，但它应该比使用闭包要快得多，而且肯定要整洁得多。

# .htaccess - .htaccess 无法正常工作

> ID：14578195
> 
> 赞同：1
> 
> 时间：2013-01-29T08:02:35.917
> 
> 标签：.htaccess, mod-rewrite

我更改了 .htacess 文件，如下所示。

```
RewriteCond %{REQUEST_URI} (.*)product-list.php(.*)
RewriteRule (.*) www.example.com/swimming-pool/product-list\.php$1 [R=301,L]
RewriteCond %{REQUEST_URI} (.*)product-info.php(.*)
RewriteRule (.*)\?(.*)$ www.example.com/swimming-pool/product\-info\.php$2 [R=301,L] 
```

当我请求时，我只需要那个

`http://www.example.com/product-info.php?Applepc.html`应该重定向到

`http://www.example.com/swimming-pool/product-info.php?Applepc.html`

URL 字段中的输出是这样的：-

> www.example.com/swimming-pool/product-list.phpswimming-pool/product-list.phpswimming-pool/product-list.phpswimming-pool/product-list.phpswimming-pool/product-list.phpswimming-pool/ product-list.phpswimming-pool/product-list.phpswimming-pool/product-list.phpswimming-pool/product-list.phpswimming-pool/product-list.phpswimming-pool/product-list.phpswimming-pool/product- list.phpswimming-pool/product-list.phpswimming-pool/product-list.phpswimming-pool/product-list.phpswimming-pool/product-list.phpswimming-pool/product-list.phpswimming-pool/product-list。 phpswimming-pool/product-list.phpswimming-pool/product-list.phpproduct-list.php?Flowers-pg1-cid38.html

请告诉我我在哪里弄错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:13:50.480

尽管您没有提到另一条规则的目的是什么`product-list.php`，但它已包含在此规则集中。

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} (product-list|product-info)\.php  [NC]
RewriteRule ^(.*)/?$  swimming-pool/$1 [R=301,L] 
```

永久重定向任何这样的 URL

`http://www.example.com/product-info.php?query`或者

`http://www.example.com/product-list.php?query`

到

`http://www.example.com/swimming-pool/product-info.php?query`或者

`http://www.example.com/swimming-pool/product-list.php?query`

实际规则的问题似乎是它们正在生成一个循环。

# apache-flex - 如何在 Flex DataGrid 中显示 DropDownList 组件？

> ID：14578208
> 
> 赞同：1
> 
> 时间：2013-01-29T08:03:51.950
> 
> 标签：apache-flex, datagrid

我对 flex 很陌生。我已经在我的 dataGrid 表中成功添加了一个 dropDownList。dropdownList 工作正常。只是因为我是为用户这样做的。我希望能够在 dataGrid 表中看到 dropDowList 组件/图标本身，而不是单击单元格，然后出现 dropDownList 供我选择。我有可能做到这一点吗？我必须使用弹性皮肤吗？请指导我如何实现这一目标，如果可能的话，请给我一个例子。

谢谢雷哈

这是我现在拥有的代码：

```
 <fx:Script>
    <![CDATA[                
        import mx.collections.ArrayCollection;
        import spark.events.IndexChangeEvent;
        import mx.controls.Alert;
        [Bindable]
        private var myDP:ArrayCollection = new ArrayCollection([
            {label1:"Order #2314", quant:3, color:'red'},
            {label1:"Order #2315", quant:3, color:'red'}                
        ]);         
    ]]>
</fx:Script>

<s:DataGrid id="myDG" x="29" y="33" width="393" height="151" dataProvider="{myDP}"
            editable="true" variableRowHeight="true">
    <s:columns>
        <s:ArrayList>
            <s:GridColumn dataField="label1" headerText="Order #" editable="false"/>                
            <s:GridColumn dataField="quant" headerText="Qty" editable="true"/>

            <s:GridColumn dataField="color" headerText="Color" editable="true">                     
                <s:itemEditor>
                    <fx:Component>                              
                        <s:GridItemEditor>              
                            <fx:Script>
                                <![CDATA[

                                    import mx.core.FlexGlobals;
                                    import mx.events.FlexEvent;

                                    import spark.events.IndexChangeEvent;

                                    override public function set value(newValue:Object):void {

                                        cb.selectedItem = newValue;
                                    }

                                    override public function get value():Object {
                                        return cb.selectedItem.toString();
                                    }

                                    override public function setFocus():void {
                                        cb.setFocus();
                                    }

                                    override public function save():Boolean
                                    {
                                        data[column.dataField] = value;                                     
                                        return true;
                                    }
                                ]]>
                            </fx:Script>
                            <s:DropDownList id="cb" requireSelection="true" skinClass="MySkins.mytestddbSkin">
                                <s:dataProvider>
                                    <s:ArrayCollection>
                                        <fx:String>red</fx:String>
                                        <fx:String>blue</fx:String>
                                        <fx:String>green</fx:String>
                                    </s:ArrayCollection>                                        
                                </s:dataProvider>
                            </s:DropDownList>                               
                        </s:GridItemEditor>                         
                    </fx:Component>
                </s:itemEditor>             
            </s:GridColumn> 

        </s:ArrayList> 
    </s:columns >
</s:DataGrid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:08:40.180

您可以使用 ItemRenderer 代替 ItemEditor。在这种情况下，您应该将 GridColumn 的 rendererIsEditable 属性设置为 true。

然后您可以使用 DropDownList 的更改事件，在您的数据提供者中注册更改。

我已经添加了两次颜色列，让您看到，数据实际上是在选择后编辑的。

![在此处输入图像描述](../Images/8e39beed387036f7015fa2b279e37d79.png)

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           minWidth="955" minHeight="600">
<fx:Script>
    <![CDATA[                
        import mx.collections.ArrayCollection;

        [Bindable]private var myDP:ArrayCollection = new ArrayCollection([
            {label1:"Order #2314", quant:3, color:'red'},
            {label1:"Order #2315", quant:3, color:'red'}                
        ]);         
    ]]>
</fx:Script>

<s:DataGrid id="myDG" x="29" y="33" height="151" dataProvider="{myDP}"
            editable="true" variableRowHeight="true">
    <s:columns>
        <s:ArrayList>
            <s:GridColumn dataField="label1" headerText="Order #" editable="false"/>                
            <s:GridColumn dataField="quant" headerText="Qty" editable="true"/>

            <s:GridColumn dataField="color" headerText="Color" editable="true" width="120"/>       

            <s:GridColumn dataField="color" headerText="Color" editable="true" rendererIsEditable="true" width="180">
                <s:itemRenderer>
                <fx:Component>
                    <s:GridItemRenderer>
                        <fx:Script>
                            <![CDATA[
                                import spark.events.IndexChangeEvent;

                                protected function onCbChange(event:IndexChangeEvent):void
                                {
                                    var value:String = (event.currentTarget as DropDownList).selectedItem;
                                    data[column.dataField] = value; 
                                }
                            ]]>
                        </fx:Script>

                        <s:DropDownList id="cb" requireSelection="true" width="100%" change="onCbChange(event)">
                            <s:dataProvider>
                                <s:ArrayCollection>
                                    <fx:String>red</fx:String>
                                    <fx:String>blue</fx:String>
                                    <fx:String>green</fx:String>
                                </s:ArrayCollection>                                        
                            </s:dataProvider>
                        </s:DropDownList>   

                    </s:GridItemRenderer>
                </fx:Component>
                </s:itemRenderer>
            </s:GridColumn>

        </s:ArrayList> 
    </s:columns >
</s:DataGrid>

</s:Application> 
```

# spring-security - spring security - 不同 URL 模式的多重身份验证

> ID：14578212
> 
> 赞同：2
> 
> 时间：2013-01-29T08:04:10.873
> 
> 标签：spring-security, authentication

我的应用程序当前具有为特定 URL 定义的一种身份验证，带有自定义过滤器，通过从 URL（在查询字符串中）提取用户详细信息来对用户进行身份验证。这工作正常。现在我想使用身份证书为不同的 URL 模式添加新的身份验证（身份验证与第一个完全不同，它具有不同的用户详细信息服务等）。我看到 Spring Security 中已经支持 x509 证书身份验证。我想了解考虑以下几点我应该做的最佳配置是什么：

1.  我希望用户访问不同的 URL 模式以通过相关身份验证进行身份验证，而不是先尝试一种身份验证，如果失败则尝试另一种身份验证。这就是为什么我认为我可能需要 2 个不同的身份验证管理器？
2.  对于所有 URL，我的应用程序必须使用 HTTPS
3.  我需要以仅对特定 URL 模式而不是所有应用程序需要客户端身份验证的方式配置 tomcat。

这是我迄今为止的第一次身份验证，任何帮助将不胜感激：

安全-applicationContext.xml：

```
<sec:http pattern="/urlAuth1" auto-config="false" entry-point-ref="url1EntryPoint">
    <sec:intercept-url pattern="/**" access="IS_AUTHENTICATED_FULLY" requires-channel="https" />
    <sec:custom-filter position="PRE_AUTH_FILTER" ref="urlPreAuthFilter"/>
</sec:http>
<bean id="urlPreAuthFilter" class="com.myapp.security.UrlPreAuthenticatedFilter">
    <property name="authenticationManager" ref="authenticationManager" />
</bean>
<bean id="urlPreAuthProvider" class="org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider">
    <property name="preAuthenticatedUserDetailsService" ref="urlUserDetailsService" />
</bean>

<sec:authentication-manager alias="authenticationManager">
    <sec:authentication-provider ref="urlPreAuthProvider" />
</sec:authentication-manager> 
```

谢谢！

**编辑 - 30.01.13：**

我将以下部分添加到我的安全 context.xml 中。当我在访问两种 URL 模式时调试我的应用程序时，我看到对于第一个 URL 模式 (/urlAuth1)，authenticationManager 中的 getProviders() 只返回一个提供程序，即 urlPreAuthProvider，而对于第二个 URL 模式 (/certAuthTest) 它返回两个提供者 - 我猜默认注册的匿名和预验证提供者。对我来说这没问题，因为这意味着每个模式都通过正确的提供者。我想确保我没有遗漏任何东西，你觉得这对吗？

```
<sec:http pattern="/certAuthTest" auto-config="false">
    <sec:intercept-url pattern="/**" access="IS_AUTHENTICATED_FULLY" requires-channel="https" />
    <sec:x509 subject-principal-regex="CN=(.*?)," user-service-ref="certUserDetailsService"/>
</sec:http> 
```

关于 clientAuth 的 web.xml 配置，我会做更多的阅读，看看这是否有效。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T18:25:58.053

您可以为所需的每个 URL 模式声明单独的身份验证管理器 bean，然后使用元素`authentication-manager-ref`上的属性将它们分配给各个过滤器链`<http />`。

```
<http pattern="/someapi/**"  authentication-manager-ref="someapiAuthMgr">
    ...
</http> 
```

您可以将标准`ProviderManager`bean 用于各个身份验证管理器。

要对所有请求强制实施 HTTPS，您可以使用[标准 web.xml 设置](https://stackoverflow.com/questions/7790141/security-constraint-configuration-inside-web-xml-for-tomcat)。

客户端证书身份验证在 SSL 连接建立时进行。所以你要么拥有它，要么你没有。调查`clientAuth`tomcat 连接器设置。您可以将其设置为“想要”以请求客户端证书，但不需要 SSL 连接才能成功。

# ios6 - UICollectionView 中的低帧率/较差的滚动性能......有点扭曲

> ID：14578221
> 
> 赞同：1
> 
> 时间：2013-01-29T08:05:01.937
> 
> 标签：ios6, uicollectionview

我认为自己在获得流畅的滚动性能方面是先进的，但这让我很难过。我有一个 UICollectionViewController 显示相机胶卷中的图片。它工作得很好，然后我添加了部分以显示其他专辑，使用不同的布局。从那以后，滚动性能变得非常不稳定。将这些部分设置回 1，它会变得更好一些。我无法确定是什么阻碍了事情，但我认为这可能是由于布局（`layoutAttributesForElementsInRect:`和朋友）中的计算。

现在这是奇怪的部分——如果我将一个视图推送到导航堆栈上，然后弹回这个集合视图控制器，它非常流畅。

除了推送视图控制器之外，没有任何修改。集合视图控制器没有被释放或任何东西，并且看起来与推送之前相同。有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:31:28.993

布局更改后似乎存在子视图保留的错误。

# jakarta-ee - 具有来自同一节点的成员的 WebSphere 集群

> ID：14578224
> 
> 赞同：0
> 
> 时间：2013-01-29T08:05:18.450
> 
> 标签：jakarta-ee, websphere, websphere-8

我有 WebSphere ND 版本 8，在单个配置文件下有一个节点。出于测试目的，我需要创建一个集群。我可以创建一个包含来自同一节点的所有成员的集群吗？（我不想创建额外的节点。）。这会正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:12:47.777

是的，是的。您可能会发现在一台机器上拥有大量 JVM 会给机器的内存带来压力，但如果您有足够的内存（或将最大堆大小设置得较小），您应该没问题。

# javascript - javascript滚动单独的jScrollpane

> ID：14578225
> 
> 赞同：1
> 
> 时间：2013-01-29T08:05:26.740
> 
> 标签：javascript, web, jscrollpane

在我的网页上，我将 jScrollpane 用于某些内容，并且在左侧的滚动窗格之外有一个菜单栏。目前，我使用菜单栏中的内部锚链接链接到内容中的特定位置，并通过将 jscrollpane hijackInternallinks 选项设置为“true”，这将使滚动窗格滚动到正确的位置。但是，我想知道是否有办法在不使用内部链接的情况下做到这一点？有没有办法只使用 javascript 来执行此操作，我将单击功能绑定到菜单项，当单击该菜单项时，也会导致 jscrollpane 滚动到我希望它在内容中的位置？

# html - 为什么我在使用引导程序时不能在边栏中使用进度条？

> ID：14578234
> 
> 赞同：1
> 
> 时间：2013-01-29T08:06:02.143
> 
> 标签：html, css, twitter-bootstrap

如果我使用进度条，下一个内容会出现在进度条中。
我想要进度条底部的下一个内容，边距为 50px。
我怎样才能解决这个问题？

演示：http: [//jsfiddle.net/VwmqV/](http://jsfiddle.net/VwmqV/)

**HTML**

您已登录

```
 <div class="progress progress-striped active"><div class="bar" style="width: 53%"></div>
    This message should be on the bottom of progress bar
</div> 
```

**CSS**

太长了，请看 JS fiddle demo

![](../Images/abb1966b87ed0e1994ee293f95f8a070.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:10:45.913

您的文本是第一个的一部分，`<div>`它是进度条的容器。将其*放在*`<div>`. 所以你应该有这个：

```
<div class="progress progress-striped active">
    <div class="bar" style="width: 53%"></div>
</div>
This message should be on the bottom of progress bar 
```

# .net - 无法将 LINQ 结果复制到数据表中

> ID：14578235
> 
> 赞同：2
> 
> 时间：2013-01-29T08:06:05.227
> 
> 标签：.net, vb.net, linq

下面是我的 LINQ 查询：

```
Dim JoinedResult = From t1 In temp.AsEnumerable() _
                   Group Join t2 In tbCity.AsEnumerable() _
                   On t1.Field(Of String)("City") Equals t2.Field(Of String)("city_name") _
                   Into RightTableResults = Group _
                   From t In RightTableResults.DefaultIfEmpty
                   Select New With 
                   {
                        .ID = t1.Item("ID"), 
                        .CID = If(t Is Nothing, 
                        1,  
                        t.Item("city_gid"))
                   } 
```

如何将值从“JoinedResult”复制到数据表？

笔记：

1.  我没有得到`JoinedResult.CopyToDataTable()`
2.  我不想使用循环

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T08:10:13.030

[`CopyToDataTable`](http://msdn.microsoft.com/en-us/library/bb386921%28v=vs.90%29.aspx)自 .NET 3.5 以来就已经存在。但问题是您想`DataTable`从匿名类型“从头开始”创建。那是行不通的。

`CopyToDataTable`只是一个扩展`IEnumerable<DataRow>`。因此，您要么必须从已加入的选项中选择**一个** ：`DataRow``DataTables`

```
Dim query =  From t1 In temp.AsEnumerable() _
             Group Join t2 In tbCity.AsEnumerable() _
             On t1.Field(Of String)("City") Equals t2.Field(Of String)("city_name") Into RightTableResults = Group 
             From t In RightTableResults.DefaultIfEmpty
             Select t1
Dim table = query.CopyToDataTable() 
```

或使用[它`ObjectShredder`](http://msdn.microsoft.com/en-us/library/bb669096.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)使用反射，因此不是最有效的方法（[C# 实现](https://stackoverflow.com/a/9259348/284240)）。

除此之外，为什么你需要`DataTable`呢？您还可以将匿名类型用作 DataSource 或创建一个自定义类，您可以从查询结果中对其进行初始化。

**编辑**：您还可以`DataTable`使用所需的列创建自定义，例如（来自您的评论）：

```
Dim tbTemp As New DataTable
tbTemp.Columns.Add("ID")
tbTemp.Columns.Add("CID")

Dim query = From t1 In temp.AsEnumerable()
            Group Join t2 In tbCity.AsEnumerable() On
            t1.Field(Of String)("City") Equals t2.Field(Of String)("city_name")
            Into RightTableResults = Group
            From t In RightTableResults.DefaultIfEmpty
            Select New With {.ID = t1.Item("ID"), .City_Gid = t.Item("city_gid")}
For Each x In query
    tbTemp.Rows.Add(x.ID, x.City_Gid)
Next 
```

# java - 使用 JPA/Hibernate 和 Jasypt 进行配置

> ID：14578237
> 
> 赞同：0
> 
> 时间：2013-01-29T08:06:06.327
> 
> 标签：java, hibernate, jpa, jasypt

我正在尝试在 JSF/Primefaces 项目中使用 JPA + Hibernate 4.5.1。我正在使用 c3p0 进行连接池。启动应用程序时，c3p0 尝试初始化池，但身份验证失败。

这是我的persistence.xml：

```
 <persistence-unit name="ba">

    <properties>
        <property name="hibernate.connection.driver_class" value="net.sourceforge.jtds.jdbc.Driver"/>
        <property name="hibernate.connection.url" value="jdbc:jtds:sqlserver://x.x.x.x:1433/ba"/>
        <property name="hibernate.connection.username" value="ba"/>
        <property name="hibernate.connection.password" value="ENC(UcsChwXw5vYnM7w2S9XUaw==)" />            
        <property name="hibernate.connection.provider_class" value="org.jasypt.hibernate4.connectionprovider.EncryptedPasswordC3P0ConnectionProvider"/>
        <property name="hibernate.connection.encryptor_registered_name" value="configurationHibernateEncryptor"/>
        <property name="hibernate.dialect" value="org.hibernate.dialect.SQLServerDialect"/>  
        <property name="hibernate.connection.release_mode" value="on_close"/>
        <property name="hibernate.archive.autodetection" value="class, hbm"/>
        <property name="hibernate.show_sql" value="true"/>
        <property name="hibernate.c3p0.validate" value="true"/>
        <property name="hibernate.c3p0.min_size" value="5"/>
        <property name="hibernate.c3p0.max_size" value="20"/>
        <property name="hibernate.c3p0.timeout" value="8"/>
        <property name="hibernate.c3p0.max_statements" value="50"/>
        <property name="hibernate.c3p0.preferredTestQuery" value="SELECT 1;"/>
        <property name="hibernate.c3p0.idle_test_period" value="5"/>  
        <property name="hibernate.c3p0.idle_test_period" value="1200"/>
        <property name="hibernate.c3p0.acquire_increment" value="1"/>
    </properties>

</persistence-unit> 
```

我在 ServletContextListener 中添加了以下内容：

```
 @Override
  public void contextInitialized(ServletContextEvent contextEvent) {
    StandardPBEStringEncryptor strongEncryptor = new StandardPBEStringEncryptor();
    strongEncryptor.setAlgorithm("PBEWithMD5AndDES");
    strongEncryptor.setPassword("password");      
    HibernatePBEEncryptorRegistry registry = HibernatePBEEncryptorRegistry.getInstance();
    registry.registerPBEStringEncryptor("configurationHibernateEncryptor", strongEncryptor); 
```

}

这些是“错误”行：

```
INFO: Initializing c3p0 pool... com.mchange.v2.c3p0.PoolBackedDataSource@b0d5e69
d [ connectionPoolDataSource -> com.mchange.v2.c3p0.WrapperConnectionPoolDataSou
rce@b495f632 [ acquireIncrement -> 1, acquireRetryAttempts -> 30, acquireRetryDe
lay -> 1000, autoCommitOnClose -> false, automaticTestTable -> null, breakAfterA
cquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> n
ull, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTest
er, debugUnreturnedConnectionStackTraces -> false, factoryClassLocation -> null,
 forceIgnoreUnresolvedTransactions -> false, identityToken -> 2rxe6q8s1103xfe10g
g38n|1712f3d, idleConnectionTestPeriod -> 1200, initialPoolSize -> 3, maxAdminis
trativeTaskTime -> 0, maxConnectionAge -> 0, maxIdleTime -> 8, maxIdleTimeExcess
Connections -> 0, maxPoolSize -> 20, maxStatements -> 50, maxStatementsPerConnec
tion -> 0, minPoolSize -> 5, nestedDataSource -> com.mchange.v2.c3p0.DriverManag
erDataSource@b80b5127 [ description -> null, driverClass -> null, factoryClassLo
cation -> null, identityToken -> 2rxe6q8s1103xfe10gg38n|bc294a, jdbcUrl -> jdbc:
jtds:sybase://x.x.x.x:yyyy/crystal, properties -> {encryptor_registered_name=
configurationHibernateEncryptor, user=******, password=******, autocommit=true,
release_mode=auto} ], preferredTestQuery -> null, propertyCycle -> 0, statementC
acheNumDeferredCloseThreads -> 0, testConnectionOnCheckin -> false, testConnecti
onOnCheckout -> false, unreturnedConnectionTimeout -> 0, usesTraditionalReflecti
veProxies -> false; userOverrides: {} ], dataSourceName -> null, factoryClassLoc
ation -> null, identityToken -> 2rxe6q8s1103xfe10gg38n|1976f39, numHelperThreads
 -> 3 ]

Jan 29, 2013 11:16:25 AM com.mchange.v2.resourcepool.BasicResourcePool$Scattered
AcquireTask run
WARNING: com.mchange.v2.resourcepool.BasicResourcePool$ScatteredAcquireTask@1de3
1b1 -- Acquisition Attempt Failed!!! Clearing pending acquires. While trying to
acquire a needed new resource, we failed to succeed more than the maximum number
 of allowed acquisition attempts (30). Last acquisition attempt exception:
java.sql.SQLException: Login failed for user 'xxxxx'.
        at net.sourceforge.jtds.jdbc.SQLDiagnostic.addDiagnostic(SQLDiagnostic.j
ava:372)
        at net.sourceforge.jtds.jdbc.TdsCore.tdsErrorToken(TdsCore.java:2820)
        at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2258)
        at net.sourceforge.jtds.jdbc.TdsCore.login(TdsCore.java:603)
        at net.sourceforge.jtds.jdbc.ConnectionJDBC2.<init>(ConnectionJDBC2.java
:352)
        at net.sourceforge.jtds.jdbc.ConnectionJDBC3.<init>(ConnectionJDBC3.java
:50)
        at net.sourceforge.jtds.jdbc.Driver.connect(Driver.java:185)
        at com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManag
erDataSource.java:134)
        at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnecti
on(WrapperConnectionPoolDataSource.java:183)
        at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnecti
on(WrapperConnectionPoolDataSource.java:172)
        at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionRe
sourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:152)
        at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResource
Pool.java:1074)
        at com.mchange.v2.resourcepool.BasicResourcePool.doAcquireAndDecrementPe
ndingAcquiresWithinLockOnSuccess(BasicResourcePool.java:1061)
        at com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourc
ePool.java:32)
        at com.mchange.v2.resourcepool.BasicResourcePool$ScatteredAcquireTask.ru
n(BasicResourcePool.java:1796)
        at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(Thre
adPoolAsynchronousRunner.java:635)

Jan 29, 2013 11:16:25 AM com.mchange.v2.resourcepool.BasicResourcePool forceKill
Acquires
WARNING: Having failed to acquire a resource, com.mchange.v2.resourcepool.BasicR
esourcePool@13dcf53 is interrupting all Threads waiting on a resource to check o
ut. Will try again in response to new client requests.
Jan 29, 2013 11:16:25 AM com.mchange.v2.resourcepool.BasicResourcePool forceKill
Acquires
WARNING: Having failed to acquire a resource, com.mchange.v2.resourcepool.BasicR
esourcePool@13dcf53 is interrupting all Threads waiting on a resource to check o
ut. Will try again in response to new client requests. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:33:43.740

这是一个错误。请点击这里了解更多详情： http: [//sourceforge.net/tracker/ ?func=detail&aid=3515794&group_id=183612&atid=905944](http://sourceforge.net/tracker/?func=detail&aid=3515794&group_id=183612&atid=905944)

为了修复它，必须根据链接中提供的详细信息修改 Jasypt-hibernate4 提供的文件之一 (EncryptedPasswordC3P0ConnectionProvider)。

# xaml - winrt usercontrol 被动画剪辑了

> ID：14578241
> 
> 赞同：0
> 
> 时间：2013-01-29T08:06:17.263
> 
> 标签：xaml, windows-runtime

将用户控件添加到视图边界之外并使用情节提要对其进行动画处理 从右上角平移变换 x 获取用户控件视图被剪裁

这是动画的xaml代码

```
 <Storyboard x:Name="gridstory">
        <DoubleAnimation
                  Storyboard.TargetName="gdd"
                  Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                  From="0" To="-200" />

    </Storyboard>
    <Storyboard x:Name="gridstory2">
        <DoubleAnimation
                  Storyboard.TargetName="gdd"
                  Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                  From="-200" To="0" />

    </Storyboard>
</UserControl.Resources> 
```

我正在添加这样的用户控件 c2.Margin = new Thickness(1355, 0, 0, 0);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:03:45.970

边距中的 1355 表示控件将布置在一个矩形的边界内，该矩形的左边界距其父级的左边界 1355 个逻辑像素。在大多数屏幕上，这意味着布局矩形即使不是负大小也几乎是空的，因此通常会被剪裁。解决方案可能是将 Margin 设置为 0 并将 Horizo​​ntalAlignment 设置为 Right 并将 c2.ActualWidth 的动画设置为 0 而不是 0 到 -200。

另请查看本文以了解可能对您有所帮助的内容：

[动画基于边缘的 UI](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj649428.aspx)

# php - 在 MySQLi 中将查询错误转换为异常

> ID：14578243
> 
> 赞同：27
> 
> 时间：2013-01-29T08:06:22.197
> 
> 标签：php, mysqli

我正在尝试将 MySQLi 查询错误转换为异常，但不能 - [mysqli_sql_exception](http://php.net/manual/en/class.mysqli-sql-exception.php)只有在连接数据库失败时才会抛出。

我使用`mysqli_report(MYSQLI_REPORT_STRICT)`了嵌入到自定义包装类的程序 MySQLi 函数。

**以前的代码：**

```
public function mysqlQuery($SQL) {

    $this->Result = mysqli_query($this->DBlink, $SQL);

    if($this->Result === false)
        throw new MySQLiQueryException($SQL, mysqli_error($this->DBlink), mysqli_errno($this->DBlink));

    return $this->Result;

} 
```

**问题：**查询失败时是否正常没有警告，也没有抛出异常，所以我必须检查mysqli_query（）是否返回false？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-29T08:37:08.263

前段时间我设法解决了这个问题。[正如在另一个答案](https://stackoverflow.com/a/21048373/285587)中指出的那样，

```
mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT); 
```

是告诉 mysqli 抛出异常的正确方法。

只要确保**不要将每个查询都包装在 try-catch**中。这是一个非常常见的误解，即一旦开始使用异常，就应该开始左右抛出尝试和捕获。恰恰相反，应谨慎使用 try-catch。虽然 99% 的错误不应该就地处理，而应该由站点范围的错误处理程序处理。[您可以从我关于PHP 错误报告](https://phpdelusions.net/articles/error_reporting)的文章中阅读有关该主题的更多信息

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-01-10T15:40:17.753

> 我是否必须检查 mysqli_query() 是否返回 false？

不。

您应该能够执行您需要的操作并指示 mysqli 驱动程序在 SQL 错误上引发异常，但`MYSQLI_REPORT_ERROR`如果尚未启用，您将需要启用它......

```
mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT) 
```

`mysqli_query()`现在应该在错误时抛出异常。您不需要检查返回值是否失败（无论如何都不会发生，因为抛出了异常）。

```
public function mysqlQuery($SQL) {
    try {
        $this->Result = mysqli_query($this->DBlink, $SQL);
    } catch (mysqli_sql_exception $e) {
        throw new MySQLiQueryException($SQL, $e->getMessage(), $e->getCode());
    }
    return $this->Result;
} 
```

（注意：我在重新抛出的异常中更改`$this->SQL`为。）`$SQL`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-10T13:58:09.380

我知道这有点太晚了，但为了后代。我发现 MYSQLI_REPORT_STRICT 是限制性的，某些异常不会被引发，因此它们不能被 catch 块处理。

```
 mysqli_report(MYSQLI_REPORT_ALL); // Traps all mysqli error 

 try {
    $mysqli = new mysqli('localhost','user,'pwd','db');

     /* I don't need to explicitly throw an exception as this is being
      done automatically */

 } catch(Exception $e) {
    echo $e->getMessage();
 } 
```

# dynamics-crm-2011 - CRM 中的页面不呈现

> ID：14578245
> 
> 赞同：1
> 
> 时间：2013-01-29T08:06:48.260
> 
> 标签：dynamics-crm-2011, internet-explorer-10

在过去的几天里，我已经多次看到这种行为。当我尝试访问一个组织时，我得到了 ASPX 文件的内容，但它们以纯文本形式显示，而不是被呈现。任何人都可以确认这种行为吗？如果他们也可以解释，那就加分。

我正在运行 IE10，并且该行为（很少）发生在 UR8 上。我怀疑**这**是问题所在，但我无法解释为什么它很少发生，也无法解释为什么。

![在此处输入图像描述](../Images/b4707f1533fc1b18d1d59ff36ac2b48a.png)

# android - Activity 再次被创建，而不是恢复并使用堆栈中的实例？

> ID：14578250
> 
> 赞同：0
> 
> 时间：2013-01-29T08:07:06.040
> 
> 标签：android, android-intent, android-activity

我有一个带有多个活动的 android 应用程序。每个活动在操作栏中都有应用程序图标，它可以帮助用户直接返回到主要活动，而不是按返回按钮。我的问题是当我使用图标开始我的家庭活动时不使用堆栈中的前一个实例并重新开始创建它。

我的操作栏应用程序图标代码是：

> startActivity(new Intent(this, DashBoard.class) .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));

上面的代码启动仪表板活动并调用它的 onCreate() 和 onResume()。但是如果我使用后退按钮从任何活动返回到此活动，它只会调用 onResume()。

**清单文件中的活动定义：**

```
 <activity
        android:name=".DashBoard"
        android:configChanges="keyboardHidden"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
    </activity> 
```

为什么会发生这种情况？我是否遗漏了一些东西以防止它再次创建它？请帮助

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:30:35.353

使用`setFlags()`, 而不是`addFlags()`. 你走在正确的轨道上。使用以下代码。

```
Intent intent = new Intent(this, DashBoard.class);    
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|Intent.FLAG_ACTIVITY_SINGLE_TOP);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:19:11.970

删除 FLAG_ACTIVITY_CLEAR_TOP。

# c++ - 找到递归关系和矩阵求幂

> ID：14578254
> 
> 赞同：1
> 
> 时间：2013-01-29T08:07:40.693
> 
> 标签：c++, c, algorithm, matrix, recurrence

我试图在 Codechef 上找到这个问题的递归关系：

[http://www.codechef.com/problems/BWALL](http://www.codechef.com/problems/BWALL)

我知道一旦找到它，我可以使用矩阵求幂轻松解决它。但是我很难理解它是如何得到正确答案的。这里有一个解决方案，但我想如果有人以更好的方式解释它？

![在此处输入图像描述](../Images/fc9675d6ca1bdf4eaca93f4f95bf346d.png) ![在此处输入图像描述](../Images/d179a3918f214f8229cea1e2d7708985.png) ![在此处输入图像描述](../Images/4be34c50f1ce81fab64dd654fc8efca4.png)

是否有一个简单的经验法则可以找到复发或类似的东西？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:19:36.403

找到递归的“一般规则”是了解问题的解决方案与较小问题的解决方案之间的关系。但更重要的是，我认为没有找到复发的一般程序。

对于这个特定的例子，这里是你如何找到重复的方法。

假设你有一堵大小为 N 的大墙。现在，看看墙的末端。更准确地说，从墙的末端开始，找到第一个具有“垂直分隔”的位置，即第一个可以将墙分成两个没有 L 形的较小墙的位置。

*例子：*

(A) 这是墙：

> X###X#XXX#X
> 
> XX#XX#XXXXX

与结束的分裂给你：

> X###X#XXX #X
> 
> XX#XX#XXX XX

(B) 另一面墙

> X###X#XXX
> 
> XX#XX#XXX

与结束的分裂给你：

> X###X#XXX
> 
> XX#XX#XXX

在分裂和墙端之间可以得到的小块墙的尺寸是多少？好吧，您可以有 1、2 或 3 个，但不能更多（否则，您可以进行最小的拆分）。

小块的可能性实际上是您问题中给出的可能性（是的，7 个小块）。

因此，要建造尺寸为 N 的墙，您必须：

*   建造一堵大小为 N-1 的墙并添加到大小为 1 的小块的末端
*   或建造一堵大小为 N-2 的墙并添加到四个大小为 2 的块之一的末端
*   或建造一堵 N-3 大小的墙，并添加到两个大小为 3 的块之一的末端。

因此，大小为 N 的可能墙的数量 T(N) 为

*   大小为 N-1 的墙的数量（最后有大小为 1 的块）-> T(N-1)
*   加上尺寸为 N-2 的墙的数量，带有 4 个可能的端块（尺寸为 2）-> 4 T(N-2)
*   加上尺寸为 N-3 的墙的数量，带有 2 个可能的端块（尺寸为 3）-> 2 T(N-3)

在那里你得到你的复发。

希望能帮助到你！

# javascript - 我希望我的字符串的前两个字符不应该是特殊字符

> ID：14578257
> 
> 赞同：1
> 
> 时间：2013-01-29T08:07:51.137
> 
> 标签：javascript

我希望我的字符串的前两个字符不应该是特殊字符

```
function detectInvalidChars(limitField)
{
    var len=limitField.value.length;
    var char1=limitField.value.substring(0,1);
    var char2=limitField.value.substring(1,2);

    if(char1=='&'||char1=='<' char1=='!' || char2=='&'||char2=='<'..........so on)
    {
    alert("Invalid character");
    limitField.value = limitField.value.substring(0,len-1);
    }
} 
```

`char1`而不是将and`char2`与每个特殊字符匹配。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:13:45.063

您可以使用正则表达式：

```
var re = /^([&<!]|.[&<!])/;
if (re.test(limitField.value)) {
    alert...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:23:18.287

If you don't want to use regex and want to define your own set of special characters, you could use a function like this:

```
function detectInvalidChars(s, count) {
    var specialChars = "!@#$%^&*()+=-[]\\\';,./{}|\":<>?~_";
    var firstChars = s.substr(0, count).split('');
    for(var i=0; i<firstChars.length; i++) {
        if(specialChars.indexOf(firstChars[i]) !== -1) {
            // invalid char detected
        }
    }
} 
```

Where `s` is your string and `count` is the number of the first characters that should be investigated.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:12:10.657

查看字符串方法 .charCodeAt(n)

然后，您应该能够比较范围内的 ascii 值。

因此，例如，如果您想排除控制字符，您可以编写类似

```
if (mystring.charCodeAt(0)<32 || mystring.charCodeAt(1)<32) {
    alert("Invalid character");
} 
```

或使用正则表达式。

您可能会发现这个问题很有帮助： [isalpha replacement for JavaScript?](https://stackoverflow.com/questions/6800536/isalpha-replacement-for-javascript)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T08:14:39.053

您可以在原始的子字符串上使用正则表达式。

substring 获取字符串中从“from”到“to”的部分。

/^[0-9a-z]+$/ 是只允许 0 ... 9 和 a ... z 的正则表达式

```
function is_part_alnum(value, from, to) 
    substring = value.substring(from, to);
    if(!substring.match(/^[0-9a-z]+$/) {
        alert("Invalid character(s)");
    }
} 
```

# html - 在 HTML（.tmpl 文件）设计的表上异步应用 Ajax 并通过 Perl（.cgi 文件）检索数据

> ID：14578261
> 
> 赞同：1
> 
> 时间：2013-01-29T08:08:32.533
> 
> 标签：html, ajax, perl

我有 2 个单独的链接文件 - > (1) .cgi（用于从 URL 检索数据的 Perl 文件）和 (2) .tmpl（已构建表的 HTML 模板）。两者都通过 HTML::Template 链接起来。

我需要异步刷新表行的内容，比如每 20 秒。同样，我在 .tmpl 文件中创建了需要刷新的各种 div id。

代码如下： 1\. Perl代码（.cgi文件，检索表内容）：

```
#!/Dwimperl/perl/bin/perl

use strict;
use warnings;
use LWP::Simple;
use HTML::Table;
use HTML::TableContentParser;
use HTML::Template;
use CGI;

print "Content-type: text/html\n\n";
my $template = HTML::Template->new(filename => 'tryin.tmpl');
my $cgi = new CGI;
use CGI::Carp qw(fatalsToBrowser);
#1======================================================
#-------------------------------------------------------
#Fetching AIRTEL HVP1
#-------------------------------------------------------
my $URL1= "http://****/server1";
my $content1 = get($URL1);
my $str12;
my $count13;
my $count14;
my $str15;
my $str16; # GHANA TIME
#2------------------------------------------------------
# FOR IP #
#-------------------------------------------------------
my $value1=0;
my $value2=0;
if ($content1 =~ m/IP/g) {$value1=pos($content1);}
if ($content1=~m/Blocked/g) {$value2=pos($content1);}
$str12=substr($content1,$value1,$value2-$value1);
$str12=~s/[^\d.-]//g;
#print($str12);
$template->param(A12=>$str12);
#3------------------------------------------------------
# FOR INCALL #
#-------------------------------------------------------
$count13=0;
while ($content1 =~ m/bgcolor='green'/g) 
{$count13=$count13+1;}
$count13=$count13-1;
#print($count13);
$template->param(A13=>$count13);
#4------------------------------------------------------
# FOR OBD #
#-------------------------------------------------------
$count14=0;
while ($content1 =~ m/bgcolor='blue'/g) 
{$count14=$count14+1;}
$count14=$count14-1;
#print($count14);
$template->param(A14=>$count14);
#5------------------------------------------------------
# FOR BUSY CIRCUIT #
#------------------------------------------------------- 
$value1=0;
$value2=0;
if ($content1 =~ m/Busy Cir./g) {$value1=pos($content1);}
if ($content1=~m/OBD/g) {$value2=pos($content1);}
$str15=substr($content1,$value1,$value2-$value1);
$str15=~s/[^\d.-]//g;
#print($str15);
$template->param(A15=>$str15);
#6------------------------------------------------------
# FOR THE DISPALY OF LOCAL TIME
#-------------------------------------------------------
$content1 = get($URL1);
$value1=0;
$value2=0;
if ($content1=~m/Current time/g) {$value1=pos($content1);}
if ($content1=~m/Circuits/g) {$value2=pos($content1);}
$str16=substr($content1,$value1,$value2-$value1);
$str16=~s/[^\d..:._.-]//g;
#print($str16);
$template->param(TIME=>$str16);
#2=====================================================
#------------------------------------------------------
#Fetching AIRTEL HVP2
#------------------------------------------------------
my $URL2= "http://****/server2";
my $content2 = get($URL2);
my $str22;
my $count23;
my $count24;
my $str25;
#2-----------------------------------------------------
# FOR IP #
#------------------------------------------------------
$value1=0;
$value2=0;
if ($content2 =~ m/IP/g) {$value1=pos($content2);}
if ($content2=~m/Blocked/g) {$value2=pos($content2);}
$str22=substr($content2,$value1,$value2-$value1);
$str22=~s/[^\d.-]//g;
#print($str22);
$template->param(A22=>$str22); 
#3-----------------------------------------------------
# FOR INCALL #
#------------------------------------------------------
$count23=0;
while ($content2 =~ m/bgcolor='green'/g) 
{$count23=$count23+1;}
$count23=$count23-1;
#print($count23);
$template->param(A23=>$count23);
#4-----------------------------------------------------
# FOR OBD #
#------------------------------------------------------
$count24=0;
while ($content2 =~ m/bgcolor='blue'/g) 
{$count24=$count24+1;}
$count24=$count24-1;
#print($count24);
$template->param(A24=>$count24);
#5----------------------------------------------------
# FOR BUSY CIRCUIT #
#-----------------------------------------------------
$value1=0;
$value2=0;
if ($content2 =~ m/Busy Cir./g) {$value1=pos($content2);}
if ($content2=~m/OBD/g) {$value2=pos($content2);}
$str25=substr($content2,$value1,$value2-$value1);
$str25=~s/[^\d.-]//g;
#print($str25);
$template->param(A25=>$str25);
#====================================================
print $template->output;
#==================================================== 
```

1.  HTML 代码（由 table 和 div id 组成的 .tmpl 文件）：

    HVP 使用报告

    ```
     <font color=#00124B>
        <center>

        <font size="7" face="calibri" color=#00124B><b>Ghana <img src="/ghanaa.jpg" width="80" height="40"></b></font>
        <br> 
        <font size="6" face="calibri" color = #0033CC><b><TMPL_VAR NAME=TIME></b></font> 
        <br><br>
        <table  border="2" cellpadding="6" cellspacing ="4" >
            <tr bgcolor=#00248E>
                <th><font face="calibri" size="7" color=#BFCFFE>Client</font></th>
                <th><font face="calibri" size="7" color=#BFCFFE>HVP</font></th>
                <th><font face="calibri" size="7" color=#BFCFFE>IP</font></th>
                <th><font face="calibri" size="7" color=#BFCFFE>Incall</font></th>
                <th><font face="calibri" size="7" color=#BFCFFE>OBD</font></th>
                <th><font face="calibri" size="7" color=#BFCFFE>Busy Cir.</font></th></font>
            </tr>     
            <tr>
                <td align ="center"><font size="6" face="calibri" color=#00124B><img src="/airtel.jpg" width="100" height="56"></font></td>
                <td align ="center" bgcolor=#BFCFFE><font size="7" face="calibri" color=#00124B>VP1</font></td>
                <td ialign ="center" bgcolor=#BFCFFE><font size="7" face="calibri" color=#00124B><TMPL_VAR NAME=A12></font></td>
                <div id="A1"> 
                    <td align ="center" bgcolor=#BFCFFE><font size="7" face="calibri" color=#00124B><b><TMPL_VAR NAME=A13></b></font></td>
                    <td align ="center" bgcolor=#BFCFFE><font size="7" face="calibri" color=#00124B><b><TMPL_VAR NAME=A14></b></font></td>
                    <td align ="center" bgcolor=#BFCFFE><font size="7" face="calibri" color=#00124B><b><TMPL_VAR NAME=A15></b></font></td>
                </div>
            </tr>
            <tr>
                <td align ="center"><font size="6" face="calibri" color=#00124B><img src="/airtel.jpg" width="100" height="56"></font></td>
                <td align ="center" bgcolor=#809FFE><font size="7" face="calibri" color=#00124B>VP2</font></td>
                <td align ="center" bgcolor=#809FFE><font size="7" face="calibri" color=#00124B><tmpl_var name=A22></font></td>
                <div id="A2">               
                    <td align ="center" bgcolor=#809FFE><font size="7" face="calibri" color=#00124B><b><tmpl_var name=A23></b></font></td>
                    <td align ="center" bgcolor=#809FFE><font size="7" face="calibri" color=#00124B><b><tmpl_var name=A24></b></font></td>
                    <td align ="center" bgcolor=#809FFE><font size="7" face="calibri" color=#00124B><b><tmpl_var name=A25></b></font></td>
                </div>
            </tr>
        </table>
    </center>
    </font> 
    ```

请协助我在上述文件上应用 ajax 及其功能。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T20:33:43.900

您将需要使用客户端 javascript 来刷新行。

*   首先查看 jQuery，它提供了简化 ajax 请求和 DOM 操作的功能。
*   为 ajax 路由使用单独的 CGI 文件并将数据访问代码保存在共享的 perl 模块中通常更容易。这提供了业务逻辑和两个视图的清晰分离

# windows - 如何使用 wget 使用单个命令下载多个 URL？

> ID：14578264
> 
> 赞同：36
> 
> 时间：2013-01-29T08:08:44.770
> 
> 标签：windows, download, wget

我正在使用以下命令下载一个网页，其中包含`wget`在 Windows 7 中使用的所有图像和 js：

```
wget -E -H -k -K -p -e robots=off -P /Downloads/ http://www.vodafone.de/privat/tarife/red-smartphone-tarife.html 
```

它正在根据需要下载 HTML，但是当我尝试传递具有要下载的 3 个 URL 列表的文本文件时，它没有给出任何输出，以下是我正在使用的命令：

```
wget -E -H -k -K -p -e robots=off -P /Downloads/ -i ./list.txt -B 'http://' 
```

我也试过这个：

```
wget -E -H -k -K -p -e robots=off -P /Downloads/ -i ./list.txt 
```

此文本文件中`http://`预先添加了 URL。

`list.txt`包含我需要使用单个命令下载的 3 个 URL 的列表。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-29T08:31:16.770

来自[`man wget`](http://www.gnu.org/software/wget/manual/wget.html#Invoking)：

> 2 调用
> 默认情况下，Wget 调用起来非常简单。基本语法是：
> wget [option]... [URL]...

因此，只需使用多个 URL：

```
wget URL1 URL2 
```

或使用评论中的链接：

```
$ cat list.txt
http://www.vodafone.de/privat/tarife/red-smartphone-tarife.html
http://www.verizonwireless.com/smartphones-2.shtml
http://www.att.com/shop/wireless/devices/smartphones.html 
```

和你的命令行：

```
wget -E -H -k -K -p -e robots=off -P /Downloads/ -i ./list.txt 
```

按预期工作。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-29T08:28:15.050

首先使用您需要下载的 URL 创建一个文本文件。例如：下载.txt

`download.txt`将如下：

```
http://www.google.com
http://www.yahoo.com 
```

然后使用命令`wget -i download.txt`下载文件。您可以将许多 URL 添加到文本文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-15T08:45:30.193

迂腐版：

```
for x in {'url1','url2'}; do wget $x; done 
```

您可以将其视为单个 wget url 命令的优点

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-17T23:09:07.810

如果您有一个分隔在多行中的 URL 列表，如下所示：

```
http://example.com/a
http://example.com/b
http://example.com/c 
```

但是您不想创建文件并将 wget 指向它，您可以这样做：

```
wget -i - <<< 'http://example.com/a
http://example.com/b
http://example.com/c' 
```

# android - 如何让 SOX 的 rec 脚本在 Android 上运行？

> ID：14578269
> 
> 赞同：1
> 
> 时间：2013-01-29T08:08:55.563
> 
> 标签：android, android-ndk, ffmpeg, sox

我构建了 sox`Android`并且我正在使用生成的二进制文件，即`sox, rec, play and soxi`通过将它们作为二进制文件安装在我的应用程序中直接在我的应用程序中生成。

我可以`sox`直接调用命令，但是调用命令时遇到问题`rec`。

我使用了以下命令，`rec -r 8000 -c 2 output.wav` 但它没有说`sox is not found`or `sox is expected but is not found`。

当我在命令行中使用上面的 rec 命令时，它在 Ubuntu 中完美运行

请注意，我可以`sox`成功使用与二进制相关的操作，但我无法使用与`rec`二进制相关的命令。

最初我认为问题可能是由于 Android 施加的权限，所以我将这些权限包括在内，`manifest.xml`但无济于事。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.RECORD_AUDIO"/> 
```

我做了一些研究并得到了这个[链接](http://billposer.org/Linguistics/Computation/SoxTutorial.html)，它在**使用 Sox 播放和录制**部分中说可能有一些 Linux 系统不`rec`直接接受命令。

我听从了他的建议，并在命令中附加了`padsp`etc，但它仍然不起作用。

所以我的问题是如何在Android系统上成功调用rec命令，有没有人试过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T21:38:05.203

`rec`, `play`,`soxi`是`sox`二进制文件的符号链接。（或者，在不支持符号链接的平台上，它们都是相同二进制文件的完全相同的副本。）根据调用它的名称，SoX 具有不同的默认行为。

您设备上的符号链接似乎有问题。也许他们指向了错误的道路？试试你能不能解决这个问题。

您的另一个选择是将`sox`二进制文件用于所有任务。`rec -r 8000 -c 2 output.wav`实际上与`sox -d -r 8000 -c 2 output.wav`（`-d`是默认音频设备）相同。对于播放，类似地，`play somefile`与 相同`sox somefile -d`。

# mysql - Django 数据库看门狗在 Django 外部保存信号

> ID：14578274
> 
> 赞同：0
> 
> 时间：2013-01-29T08:09:23.767
> 
> 标签：mysql, django, django-signals, watchdog

我有以下问题：我正在使用 Django 框架。系统中的一部分（非 django）写入数据库，在 django 使用的同一数据库中。我想在保存对象时发出信号。它是一个 django 模型对象，但不是通过 django 保存的，而是直接在 mysql 数据库中。

当 django 没有保存数据库时，django 有没有办法在他的数据库中查看保存操作？

最简洁的方法是：创建一个 Api，并让保存操作通过这个 api 运行。保存信号可以是 django 默认的。（但这取决于外部的一些工作......所以不是首选的路线......对于未来的发展来说肯定是）。

另一种选择是实现 celery 并创建一个任务，该任务经常查看其中一个保存的对象是否没有后续行动.....（我想也放弃一些令人费解的问题来启动并运行它）

但可能有一个更简单的......对我来说未知？我看到了用于文件系统的 django 看门狗解决方案......而不是数据库（可能是因为 django 有这个内置......当通过 django 正确完成时）

使其复杂化：我使用 sqlite 在本地进行测试和开发....但是我可以将保存信号放入我的测试中，而无需在本地工作....只要它在 mysql 中工作，我很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:02:23.510

你可以试试这个解决方案：

1.  创建一个包含一列“ **object_id ”的新表“** **django_watch** ” （根据您的标准添加其他列，如“created_datetime”等）；

***   假设您的主表是“**对象**”。为这个表上的 INSERT 事件添加一个[**mysql 触发器。**](http://dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html)

    *   您应该在触发器中添加一个额外的插入查询，以将**object_id**插入到“ **django_watch** ”表中。

    *   现在您可以拥有一个 cronjob 来检查新表 ' **django_watch** '（用于 Django 对象中的更新）并执行必要的操作。您可以延迟 1 分钟（由您决定）连续运行此 cronjob。** 

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:33:19.403

最后写了一个可以被第三方模块调用的api。我使用 c-code 将代码交付到 django 上登录到这个 api 并调用这个 api 的 GET。（使用 django rest 框架）。这个 api 只是保存对象（在 url 中给出的 id），然后从那里开始它是默认的 django。第三方唯一需要做的就是在我的代码中构建来调用 api ......

也许不是最好的解决方案，但最好的解决我的问题......**

# node.js - Docpad：再生失败，没有明显的原因

> ID：14578278
> 
> 赞同：2
> 
> 时间：2013-01-29T08:10:02.267
> 
> 标签：node.js, docpad

当我运行`docpad run`时，有时在我将更改写入磁盘后，该进程尝试重新生成它却失败了。这不是它需要很长时间的问题，它只是无法重新生成，即使在随后的写入中也是如此。我必须中断进程（即控制台中的 ctrl+d）并重新启动进程。

我的环境：

*   Linux Mint Debian 64 位
*   节点@0.8.17
*   npm@1.2.2
*   docpad@6.21.7
*   docpad 插件：
    *   玉@2.2.0
    *   livereload@2.2.0
    *   机器人裙@2.0.1
    *   手写笔@2.2.0

有没有人遇到过这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T00:54:44.107

作为预防措施，请尝试`ulimit -n 4096`在您的控制台中运行。

这解决了我的 docpad 实例中的许多杂项故障。

# pid - 达到 CPU 阈值时自动生成 w3wp.exe 进程转储文件，即使 PID 更改也是如此

> ID：14578287
> 
> 赞同：5
> 
> 时间：2013-01-29T08:10:46.473
> 
> 标签：pid, w3wp, procdump

我正在尝试解决我们的一个网站导致 CPU 间歇性飙升的问题。该站点位于 Web 服务器场上，并且在不同时间在所有服务器上间歇性地发生。导致峰值的进程是 w3wp.exe。我已经检查了所有明显的东西，现在想分析导致峰值的 w3wp.exe 的多组转储文件。

我试图在 w3wp.exe 进程在指定时间内达到指定的 CPU 阈值时自动生成转储文件。

我可以使用 ProcDump.exe 来执行此操作，如果它在 PID（进程 ID）更改之前被触发，它会起作用。

例如：（ `procdump -ma -c 80 -s 10 -n 2 5844`其中 5844 是 PID）

*   -ma 写一个包含所有进程内存的转储文件。默认转储格式包括线程和句柄信息。
*   -c 创建进程转储的 CPU 阈值。
*   -s 在写入转储之前必须达到连续秒 CPU 阈值（默认为 10）。
*   -n 退出前要写入的转储数。

上面的命令将监控 w3wp.exe，直到 CPU 在 10 秒内达到 80% 的峰值，并且至少需要两次迭代才能完全转储。

**问题：**

我有多个 w3wp.exe 实例正在运行，所以我不能使用进程名称，我需要指定 PID。每次回收应用程序池时，PID 都会更改。这会导致 PID 在我捕获多个转储文件之前发生变化。然后我需要在每个 Web 服务器上再次启动 procdump。

**我的问题：**

即使在 PID 更改后，如何继续自动生成转储文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-10T15:51:29.423

使用 Microsfot 的 DebugDiagnostic 2.0：[https ://www.microsoft.com/en-us/download/details.aspx?id=49924](https://www.microsoft.com/en-us/download/details.aspx?id=49924)

它处理多个 w3wp.exe 进程。如果您需要通用解决方案，则必须编写脚本 - 例如[https://gallery.technet.microsoft.com/scriptcenter/Getting-SysInternals-027bef71](https://gallery.technet.microsoft.com/scriptcenter/Getting-SysInternals-027bef71)

# java - Apache POI - Word（docx）文档中的多个列

> ID：14578288
> 
> 赞同：2
> 
> 时间：2013-01-29T08:10:47.897
> 
> 标签：java, ms-word, apache-poi

我正在尝试创建一个包含多列的 word 文档。这样做（而不是使用表格）的原因是数据将跨越多个页面，并且只有在添加到新页面之前我才能填充整个页面的列。

可以用 Apache POI 完成吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:11:48.273

如何使用以前创建的具有多列的空文档？像这样：

```
 XWPFDocument document = new XWPFDocument(PoiTest.class.getResourceAsStream("twocolumn.docx"));
    XWPFParagraph tmpParagraph = document.getParagraphs().get(0);

    for (int i = 0; i < 100; i++) {
        XWPFRun tmpRun = tmpParagraph.createRun();
        tmpRun.setText("LALALALAALALAAAA");
        tmpRun.setFontSize(18);
    }
    document.write(new FileOutputStream(new File("C:\\temp\\poi.docx"))); 
```

# javascript - Extjs - JavaScript - 与模板组合 - 多个值作为显示字段

> ID：14578296
> 
> 赞同：0
> 
> 时间：2013-01-29T08:11:33.787
> 
> 标签：javascript, extjs, autocomplete

我正在开发 Extjs 4.1。我确实为文本框实现了自动完成功能。我想自定义显示字段以显示多个值而不是一个值。我试过转换功能：

```
Ext.define("Post", {
    extend: 'Ext.data.Model',
    proxy: {
    type: 'ajax',
    url: 'app/search/autocomplete.php',
    reader: {
        type: 'json',
        root: 'names',
        autoLoad: true,
        totalProperty: 'totalCount'
    },
    fields: ['f_name','l_name', {
        name : 'display',
        convert : function(v, rec) {                        
            return rec.f_name + ' ' + rec.l_name
        }
    }]
}); 
```

但我得到了：`undefined undefined`在文本框中！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:55:05.467

你需要抓住财产：

`return rec.get('f_name') + ' ' + rec.get('l_name');`

# android - Android显示渐变图片

> ID：14578301
> 
> 赞同：1
> 
> 时间：2013-01-29T08:11:52.447
> 
> 标签：android

我使用下面的代码来测试渐变图像。

```
myView=(ImageView)findViewById(R.id.imgView);
bitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(uri));
if(bitmap!=null){
  myView.setImageBitmap(bitmap);
} 
```

我在android2.3-android3.1的sdk 10-13中编译渐变图可以正常显示。如果我在android4.0的sdk 15中编译这个，渐变图无法显示，轮廓清晰。

我在网上查了一下，它说android 4.0中的默认格式是rgb565。我需要设置格式`getWindow().setFormat(PixelFormat.RGBA_8888);`以显示 24 位图像。但它仍然无法显示。

这个怎么做？谢谢！

# java - 从java上的url解析pdf。我可以使用 jsoup 吗？

> ID：14578302
> 
> 赞同：1
> 
> 时间：2013-01-29T08:11:55.457
> 
> 标签：java, pdf, jsoup, pdf-parsing

我有网址： http: [//pasca.undiksha.ac.id/e-journal/index.php/jurnal_bahasa/article/view/500](http://pasca.undiksha.ac.id/e-journal/index.php/jurnal_bahasa/article/view/500)（它不是直接访问pdf，而是定向到pdf文件。我想解析这个pdf文件并获取 pdf 文本。我尝试使用 jsoup ：`

```
String url = "http://pasca.undiksha.ac.id/e-journal/index.php/jurnal_ep/article/download/380/172";
File in = new File(url);
Document doc = Jsoup.parse(in, "UTF-8");
System.out.println(doc.toString());` 
```

输出是：

```
java.io.FileNotFoundException: http:\pasca.undiksha.ac.id\e-journal\index.php\jurnal_ep\article\download\380\172 (The filename, directory name, or volume label syntax is incorrect)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(FileInputStream.java:138)
        at org.jsoup.helper.DataUtil.load(DataUtil.java:36)
        at org.jsoup.Jsoup.parse(Jsoup.java:103) 
```

有什么想法吗？谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T08:15:40.413

使用 URLConnection 连接 pdf 阅读内容：

```
URL url = 
new URL( "http://pasca.undiksha.ac.id/e-journal/index.php/jurnal_bahasa/article/view/500" );

URLConnection connection = url.openConnection();

input = connection.getInputStream();

Document doc = Jsoup.parse(in, "UTF-8");
System.out.println(doc.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:16:32.017

您不能`File`与 以外的 URL 一起使用`file://`，这当然是一个错误。使用[commons-http-client](http://hc.apache.org/httpclient-3.x/)访问您在网络上的文件。

# java - 代码未到达“finally”块

> ID：14578305
> 
> 赞同：3
> 
> 时间：2013-01-29T08:12:13.687
> 
> 标签：java

给定的java代码不会进入`finally`块，我认为这些块无论如何都应该执行：

```
public static void main(String[] args) {
    try {
        System.out.println("Hello world");
        System.exit(0);
    } finally {
        System.out.println("Goodbye world");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T08:13:34.237

```
System.exit(0); 
```

将卸载 JVM，即不处理进一步的 java 指令这就是不执行的原因`finally{}`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T08:13:47.537

是的，这很正常。块总是被`finally`执行，除非 JVM 在到达代码末尾之前停止，这是您在退出 JVM 时的情况。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-29T08:20:07.197

如[Java 6`System.exit()`文档](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#exit%28int%29)中所述：

> 该调用`System.exit(n)`实际上等同于调用：`Runtime.getRuntime().exit(n)`

而且，如果你去看看[`Runtime.exit()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exit%28int%29)（我的粗体字）：

> 通过启动其关闭序列来终止当前正在运行的 Java 虚拟机。**此方法永远不会正常返回。**
> 
> 虚拟机的关闭顺序包括两个阶段。在第一阶段，所有已注册的关闭挂钩（如果有）都以某种未指定的顺序启动，并允许同时运行直到它们完成。在第二阶段，如果 finalization-on-exit 已启用，则所有未调用的终结器都会运行。**完成此操作后，虚拟机将停止。**

基本上，这个函数唯一可以返回（并因此允许该`finally`子句运行）是它引发 a`SecurityException`因为任何正在运行的安全管理器都不允许使用给定的代码退出。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T08:14:09.723

该`System.exit`方法停止当前线程和所有其他线程的执行。finally 的存在并没有给予线程继续执行的特殊权限。

前文对此进行了非常详细的讨论。 [Java 的 System.exit() 如何与 try/catch/finally 块一起工作？](https://stackoverflow.com/questions/1410951/how-does-javas-system-exit-work-with-try-catch-finally-blocks)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T08:22:27.213

通过`System.exit(0)`您正在退出 Jvm，因此在此之后不会执行任何行，这就是您发现 finally 块未执行的原因。

# visual-c++ - 重新定义默认参数错误而不重新定义

> ID：14578307
> 
> 赞同：-1
> 
> 时间：2013-01-29T08:12:19.153
> 
> 标签：visual-c++, compiler-errors

我的 Visual Studio 2010 编译器出现一组奇怪的错误。

我得到的错误

```
error C2572: redefinition of default parameter
error C2011: 'class' type redefinition 
```

我仔细检查过，我很清楚在函数定义中，我没有给出默认参数值，我只在头文件的函数原型中给出了默认参数值。

另外，我非常确定没有两个类被赋予相同的类名。

请问有谁能告诉我出现这些错误的其他原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:59:45.143

我没有得到它发生的确切原因，但我已经通过使用一些简单的技术克服了它。

我使用函数重载概念来避免默认参数列表。它会导致代码重复，但事实证明它非常有效。

所以像这样

```
void myFunction( int, char * = '\0', char * = '\0' ); 
```

会变成这样

```
void myFunction( int );
void myFunction( int, char * );
void myFunction( int, char *, char * ); 
```

在此示例中，代码被重复了两次，但似乎只能解决解决方案。

接下来，对于奇怪的类类型重新定义错误，我在许多文件中实例化了类变量。所以，我到处都删除了实例化的特性，并使用了类似这样的全局变量。

名为 myHeader.h 的文件

```
#include "myFile.h"
myClass myObj; 
```

在所有其他文件中

```
#include "myHeader.h"
myObj.function1( );
myObj.function2( ); 
```

# c# - 我如何将 xml 转换为 XSL

> ID：14578308
> 
> 赞同：0
> 
> 时间：2013-01-29T08:12:24.210
> 
> 标签：c#, .net, vb.net

我正在将 VB6 代码转换为 C#.net。IXSLProcessor xslProcessor.input 采用 DomDocument 但我有 XmlDocument。在强制转换（从 xml 到 DomDocument）时，它会引发异常。是否可以将 XmlDocument 转换为 DomDocument？代码是

```
 Object vntRetVal;    
        ADODB.Stream objStream; 
        XSLTemplate xsl;  
        IXSLProcessor xslProcessor;
        DocSys.IField objField = null;
        String strFormatting=string.Empty;
        String strValue;
        Boolean blnManual;
        XmlElement nd;
        int m;
        int n;
        String[] bstr;
        object[] astr = null;

        objStream = new ADODB.Stream();
        objStream.Open()
        xslProcessor = xsl.createProcessor();
        xslProcessor.addParameter("mergeindex", m_Model.MailMerge.Items.Current);
        DOMDocument dom1 = new DOMDocument();
        dom1 =(DOMDocument)m_Model.Document.get_Data;
        xslProcessor.input = dom1;                               
        xslProcessor.output = objStream;                        
        xslProcessor.transform();

        objStream.Position = 0;
        strValue = objStream.ReadText(); 
```

# sharepoint - 在 sharepoint 中使用自定义服务应用程序

> ID：14578309
> 
> 赞同：0
> 
> 时间：2013-01-29T08:12:26.097
> 
> 标签：sharepoint, service-application

我按照[本教程](http://sharepointegg.blogspot.sg/2009/11/create-custom-service-application-in.html)在我的共享点服务器中成功创建了一个自定义服务应用程序，我的问题是如何从另一个共享点解决方案中使用它，例如我创建了一个新的空共享点项目并添加了一个新的应用程序页面，我如何访问从应用程序页面的代码中强类型服务应用程序对象？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:29:11.307

**您**需要使用`SPServiceApplicationProxy`. [您可以在创建自定义 SharePoint 2010 服务应用程序和使用者](http://msdn.microsoft.com/en-us/library/gg543112%28v=office.14%29.aspx)中查看视频和示例代码。

# windows - clang 构建 qt 的 mkspecs 是什么？

> ID：14578311
> 
> 赞同：5
> 
> 时间：2013-01-29T08:12:40.600
> 
> 标签：windows, qt, clang

如果我想在 Windows 下用 gcc 构建 qt，configure 选项是 -platform win32-g++，但是当我想用 clang 构建 qt 时，选项是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:15:47.830

clang/windows 组合没有。我假设人们可以很容易地将 win32-g++ 修改为 win32-clang，遵循 linux-g++ 和 linux-clang 之间的差异：

```
diff -w -u ../linux-g++/qmake.conf ./qmake.conf
--- ../linux-g++/qmake.conf 2012-11-20 16:38:28.000000000 +0100
+++ ./qmake.conf    2012-11-20 16:38:28.000000000 +0100
@@ -1,12 +1,16 @@
 #
-# qmake configuration for linux-g++
+# qmake configuration for linux-clang
 #

 MAKEFILE_GENERATOR = UNIX
-CONFIG += incremental gdb_dwarf_index
+CONFIG += incremental
+
 QMAKE_INCREMENTAL_STYLE = sublib

 include(../common/linux.conf)
 include(../common/gcc-base-unix.conf)
-include(../common/g++-unix.conf)
+include(../common/clang.conf)
+
+QMAKE_LFLAGS += -ccc-gcc-name g++
+
 load(qt_config)
 diff -w -u ../linux-g++/qplatformdefs.h ./qplatformdefs.h
--- ../linux-g++/qplatformdefs.h    2013-01-28 17:42:15.170318229 +0100
+++ ./qplatformdefs.h   2013-01-28 17:42:15.170318229 +0100
@@ -67,6 +66,7 @@
 #include <grp.h>
 #include <pwd.h>
 #include <signal.h>
+#include <dlfcn.h>

 #include <sys/types.h>
 #include <sys/ioctl.h> 
```

# linq - IEnumerable 在 linq 查询中列出

> ID：14578315
> 
> 赞同：0
> 
> 时间：2013-01-29T08:12:48.583
> 
> 标签：linq, ienumerable

我正在尝试运行此查询，我尝试在其中获取类别和子类别

```
studentCont.ContinuumCategories = db.continuumcategorymasters
    .Where(x => x.AssessmentId == assessmentId && x.ContinuumCategory != "other")
    .Select(x => new ContinuumCategory()
    {
        AssessmentId = x.AssessmentId,
        ContinuumCategoryId = x.ContinuumCategoryId,
        NativeAppid = x.NativeAppCategoryId,
        score = 0,
        ContinuumCategoryName = x.ContinuumCategory,
        ContinuumSubCategories = x.continuumsubcategorymasters
            .Select(csc => new ContinuumSubCategory
            {
                ContinuumSubCategoryId = csc.ContinuumSubCategotyId,
                ContinuumSubCategoryName = csc.ContinuumSubCategotyName,
                NativeAppsubid = csc.NativAppSubCategotyId
            })
    })
    .ToList(); 
```

目前该字段`ContinuumCategory.ContinuumSubCategories`是类型`List`，所以这个查询给了我一个编译时错误，它不能转换`IEnumerable`为列表，当然不能。

由于 linq 无法识别`ToList`方法，因此我什至无法在查询中使用它。

`ContinuumCategory.ContinuumSubCategories`我可以通过更改 to 的类型来解决我的问题，`IEnumerable`但是我已经在许多使用方法的地方使用了这个字段，`List.Add`所以我必须将所有 Add 方法替换为`IEnumerable.Concat`，所以这可能很乏味。

是否有任何解决方法可以仅从 linq 查询中直接获取连续子类别列表？

**编辑：**

当我使用此查询时（`ToList()`ContinuumSubCategories 查询中使用的方法）

```
studentCont.ContinuumCategories = db.continuumcategorymasters
    .Where(x => x.AssessmentId == assessmentId && x.ContinuumCategory != "other")
    .Select(x => new ContinuumCategory()
    {
        AssessmentId = x.AssessmentId,
        ContinuumCategoryId = x.ContinuumCategoryId,
        NativeAppid = x.NativeAppCategoryId,
        score = 0,
        ContinuumCategoryName = x.ContinuumCategory,
        ContinuumSubCategories = x.continuumsubcategorymasters
            .Select(csc => new ContinuumSubCategory
            {
                ContinuumSubCategoryId = csc.ContinuumSubCategotyId,
                ContinuumSubCategoryName = csc.ContinuumSubCategotyName,
                NativeAppsubid = csc.NativAppSubCategotyId
            }).ToList()
    })
    .ToList(); 
```

我得到了这个例外

```
 LINQ to Entities does not recognize the method 'System.Collections.Generic.List1[BusinessObjects.ContinuumSubCategory] ToList[ContinuumSubCategory]
    (System.Collections.Generic.IEnumerable1[BusinessObjects.ContinuumSubCategory])' method, and this method cannot be translated into a store expression. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:56:22.460

不要调用`ToList()`内部查询（ for `ContinuumSubCategories`）

将您的查询分成两部分，`ToList()`中间有：

```
studentCont.ContinuumCategories = db.continuumcategorymasters
    .Where(x => x.AssessmentId == assessmentId && x.ContinuumCategory != "other")
    .ToList()  // Fetch all the data from the db
    .Select(x => new ContinuumCategory
    {
        AssessmentId = x.AssessmentId,
        ContinuumCategoryId = x.ContinuumCategoryId,
        NativeAppid = x.NativeAppCategoryId,
        score = 0,
        ContinuumCategoryName = x.ContinuumCategory,
        ContinuumSubCategories = (x.continuumsubcategorymasters
            .Select(csc => new ContinuumSubCategory
            {
                ContinuumSubCategoryId = csc.ContinuumSubCategotyId,
                ContinuumSubCategoryName = csc.ContinuumSubCategotyName,
                NativeAppsubid = csc.NativAppSubCategotyId
            })).ToList()
    }).ToList(); 
```

它有效吗？

# oracle - 如何检查数组是否包含特定字符串？

> ID：14578316
> 
> 赞同：13
> 
> 时间：2013-01-29T08:12:51.053
> 
> 标签：oracle, plsql, contains, user-defined-types

我有一个字符串数组。我想检查数组中是否存在特定字符串。

```
DECLARE
  TYPE v_array IS TABLE OF VARCHAR2(200);
  ais_array v_array;
BEGIN
  ais_array := ('Lb1','Lb2','Lb3','Lb613');
  IF 'Lb1' IN ais_array THEN
     dbms_output.put_line('found');
  END IF;
END; 
```

`IN`操作员不工作。我尝试`select *`对类型进行 a 然后使用`IN`，但这也不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-29T12:30:01.327

试用`member of`条件：

```
IF 'Lb1' member of ais_array THEN
  dbms_output.put_line('found');
END IF; 
```

Oracle 在 10g 中引入了几个用于处理集合的集合运算符。请阅读[文档以了解更多信息](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/collections.htm#i36377)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-03T21:14:56.490

MEMBER OF 只能用于嵌套表。您正在尝试在关联数组上使用它。您将收到一个错误“在调用 'MEMBER OF' 时参数的数量或类型错误”。

这是如何使用它：

```
 DECLARE  
   TYPE clientele IS TABLE OF VARCHAR2 (64);  

   client_list_12    clientele := clientele ('Customer 1', 'Customer 2');  
   client_list_13    clientele := clientele ('Customer 1', 'Customer 3');  

   client_list_133   clientele  
                   := clientele ('Customer 1', 'Customer 3', 'Customer 3');  

   client_list_empty clientele := clientele ();                          
BEGIN  
   IF 'Customer 1' MEMBER OF client_list_12  
   THEN  
      DBMS_OUTPUT.put_line ('Customer 1 is in the 12 list');  
   END IF;  

   IF 'Customer 2' NOT MEMBER OF client_list_13  
   THEN  
      DBMS_OUTPUT.put_line ('Customer 2 is not in the 13 list');  
   END IF;  

   DBMS_OUTPUT.put_line ('List 133 contains ' || CARDINALITY (client_list_133) || ' items');  

   IF client_list_empty IS EMPTY  
   THEN  
      DBMS_OUTPUT.put_line ('Client list is empty');  
   END IF;  

   IF client_list_133 IS NOT EMPTY  
   THEN  
      DBMS_OUTPUT.put_line ('Client list 133 is not empty');  
   END IF;  

END; 
```

# php - 弹出窗口中的onload（）在opera中不起作用

> ID：14578318
> 
> 赞同：1
> 
> 时间：2013-01-29T08:13:03.473
> 
> 标签：php, javascript, jquery, ckeditor, opera

当我尝试在`onload()`弹出窗口的功能中执行任何操作时，它不会显示在`opera`. 但它在所有其他浏览器中运行良好。

在下面的代码中，我试图`div`在`onload`.

```
<script>
var title=$('#title').val();
var content=CKEDITOR.instances['editor'].getData();
var popup = window.open("<?php echo site_url('/index'); ?>",'pop up','width=1100,height=600,scrollbars=1');

popup.onload = function(){
    $('#content', popup.document).html(content);
    $('.title', popup.document).html(title);
}
</script> 
```

谁能告诉我任何解决方案？

# android - 在 Android 中更新 SQLite 表中的选定列

> ID：14578322
> 
> 赞同：1
> 
> 时间：2013-01-29T08:13:20.243
> 
> 标签：android, sqlite, android-sqlite

我需要更新数据库中的选定列，但是我无法获取更新的数据。用户单击下一步按钮后，数据应该会更新。表中总共需要更新 12 个字段。

场景有点不同，我已经有一个活动，主要说是否插入了 5 个字段，而在第二个活动中，我需要更新 SAME TABLE 中的 5 个字段

提前致谢

注意：dba 是 DBAdapter，即数据库，myDB 是 SQLiteDatabase

```
 nxt = (Button)findViewById(R.id.btn_nxt);
          nxt.setOnClickListener(new OnClickListener(){

            public void onClick(View v) {

                String b1=t1.getText().toString();
                String b2=goal_website_trying_to_achieve_edttxt.getText().toString();
                String b3=communicate_edttxt.getText().toString();
                String b4=success_look_like_edttxt.getText().toString();
                String b5=usp_insights_edttxt.getText().toString();
                String b6=act_edttxt.getText().toString();
                String b7=market_edttxt.getText().toString();
                String b8=your_current_website_www_edttxt.getText().toString();
                String b9=your_current_website_good_edttxt.getText().toString();
                String b10=your_current_website_bad_edttxt.getText().toString();
                String b11=your_current_website_type_edttxt.getText().toString();
                String b12=your_current_website_update_edttxt.getText().toString();
                String b13=your_current_website_supporting_edttxt.getText().toString();

                if(!validatescreen2()){
                    return;
                }

                else{

                    myDB = DBAdapter.openDatabase(Newform_Screen2.this,DBAdapter.DATABASE_TABLE);

                    String updatequery = "UPDATE"+ DBAdapter.DATABASE_TABLE+ " SET ";       

                    updatequery = updatequery + " KEY_MESSAGE_1 = '" + b1 + "',";
                    updatequery = updatequery + " KEY_MESSAGE_2 = '" + b2 + "',";
                    updatequery = updatequery + " KEY_MESSAGE_3 = '" + b3 + "',";
                    updatequery = updatequery + " KEY_MESSAGE_4 = '" + b4 + "',";
                    updatequery = updatequery + " KEY_MESSAGE_5 = '" + b5 + "',";
                    updatequery = updatequery + " KEY_MESSAGE_6 = '" + b6 + "',";
                    updatequery = updatequery + " KEY_YOUR_CURRENT_WEBSITE_1 = '" + b7 + "',";
                    updatequery = updatequery + " KEY_YOUR_CURRENT_WEBSITE_2 = '" + b8 + "',";
                    updatequery = updatequery + " KEY_YOUR_CURRENT_WEBSITE_3 = '" + b9 + "',";
                    updatequery = updatequery + " KEY_YOUR_CURRENT_WEBSITE_TYPE = '" + b10 + "',";
                    updatequery = updatequery + " KEY_YOUR_CURRENT_WEBSITE_NEED = '" + b11 + "',";
                    updatequery = updatequery + " KEY_YOUR_CURRENT_WEBSITE_OTHER = '" + b12 + ",";

                    updatequery = updatequery +  "WHERE" + DBAdapter.KEY_ROWID + "=" + mRowId +"';";

                    try{
                        myDB.execSQL(updatequery);
                    }catch(Exception e){
                        //Log("Caught while writing response" + e.getLocalizedMessage());
                    }finally{
                        if(myDB != null)myDB.close();
                        showDialog(DIALOG_ID);
                    }

                }
            }
          }); 
```

在`DBAdapter`课堂上

```
public static SQLiteDatabase openDatabase(Context context, String DBname){
    SQLiteDatabase myDB;
    myDB = context.openOrCreateDatabase(DBname,Context.MODE_PRIVATE, null);
    Cursor rs = null;
    boolean tableExists;
    try{
        rs = myDB.rawQuery("SELECT * FROM " + DATABASE_TABLE + " WHERE 1=0", null );
        tableExists = true;
    }catch(Exception ex){
        tableExists = false;
    }finally{
        if (rs != null) rs.close();
    }
    if(!tableExists) {
        myDB.execSQL(DATABASE_CREATE);
    }

    return myDB;
}

public static void executeQuery(SQLiteDatabase db,String query){

    if(db != null){
        db.execSQL(query);
    }

}

public static Cursor selectQuery(SQLiteDatabase db,String query){

    if(db != null)
    {
        Cursor c = db.rawQuery(query,null);
        return c;
    }
    else
    return null;

}

public static void closeDatabase(SQLiteDatabase db){
    if (db != null)
    {
        //Log("Closing Database conn");
        db.close();
    }
} 
```

进行更改后，但仍然无法更新..我需要进行任何其他更改吗？

```
dba.open();
                        ContentValues args = new ContentValues();
                        args.put(DBAdapter.KEY_MESSAGE_1, b2);
                        args.put(DBAdapter.KEY_MESSAGE_2, b3);
                        args.put(DBAdapter.KEY_MESSAGE_3, b4);
                        args.put(DBAdapter.KEY_MESSAGE_4, b5);
                        args.put(DBAdapter.KEY_MESSAGE_5, b6);
                        args.put(DBAdapter.KEY_MESSAGE_6, b7);
                        args.put(DBAdapter.KEY_YOUR_CURRENT_WEBSITE_1, b8);
                        args.put(DBAdapter.KEY_YOUR_CURRENT_WEBSITE_2, b9);
                        args.put(DBAdapter.KEY_YOUR_CURRENT_WEBSITE_3, b10);
                        args.put(DBAdapter.KEY_YOUR_CURRENT_WEBSITE_TYPE, b11);
                        args.put(DBAdapter.KEY_YOUR_CURRENT_WEBSITE_NEED, b12);
                        args.put(DBAdapter.KEY_YOUR_CURRENT_WEBSITE_OTHER, b13);

                        String where = "_id = " + mRowId.toString();

                myDB.update(DBAdapter.DATABASE_TABLE, args,where, null);    
                            dba.close();
                            showDialog(DIALOG_ID);
                    }

                }

              }); 
```

添加 try/catch 后

```
try{
                        myDB.beginTransaction();
                dba.open();
                ContentValues args = new ContentValues();
                args.put(DBAdapter.KEY_MESSAGE_1, b2);
                args.put(DBAdapter.KEY_MESSAGE_2, b3);
                args.put(DBAdapter.KEY_MESSAGE_3, b4);
                args.put(DBAdapter.KEY_MESSAGE_4, b5);
                args.put(DBAdapter.KEY_MESSAGE_5, b6);
                args.put(DBAdapter.KEY_MESSAGE_6, b7);
                args.put(DBAdapter.KEY_YOUR_CURRENT_WEBSITE_1, b8);
                args.put(DBAdapter.KEY_YOUR_CURRENT_WEBSITE_2, b9);
                args.put(DBAdapter.KEY_YOUR_CURRENT_WEBSITE_3, b10);
                args.put(DBAdapter.KEY_YOUR_CURRENT_WEBSITE_TYPE, b11);
                args.put(DBAdapter.KEY_YOUR_CURRENT_WEBSITE_NEED, b12);
                args.put(DBAdapter.KEY_YOUR_CURRENT_WEBSITE_OTHER, b13);

                String where =DBAdapter.KEY_ROWID +"=" + mRowId.toString();

                myDB.update(DBAdapter.DATABASE_TABLE, args,where, null);
                myDB.setTransactionSuccessful();
                    dba.close();

                    showDialog(DIALOG_ID);
                    }
                    catch(Exception e){
                        e.printStackTrace();
                    }
                     finally {
                        myDB.endTransaction();
                       }
                }

            }

          }); 
```

现在我收到这个错误

```
01-29 17:52:38.874: W/System.err(9257): java.lang.NullPointerException
01-29 17:52:38.874: W/System.err(9257):     at com.example.sales.Newform_Screen2$3.onClick(Newform_Screen2.java:150)
01-29 17:52:38.874: W/System.err(9257):     at android.view.View.performClick(View.java:4084)
01-29 17:52:38.883: W/System.err(9257):     at android.view.View$PerformClick.run(View.java:16966)
01-29 17:52:38.883: W/System.err(9257):     at android.os.Handler.handleCallback(Handler.java:615)
01-29 17:52:38.883: W/System.err(9257):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-29 17:52:38.893: W/System.err(9257):     at android.os.Looper.loop(Looper.java:137)
01-29 17:52:38.893: W/System.err(9257):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-29 17:52:38.893: W/System.err(9257):     at java.lang.reflect.Method.invokeNative(Native Method)
01-29 17:52:38.893: W/System.err(9257):     at java.lang.reflect.Method.invoke(Method.java:511)
01-29 17:52:38.893: W/System.err(9257):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-29 17:52:38.893: W/System.err(9257):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:24:41.500

Use update method instead of query like `myDB.update(mTableName, values, sWhereClause, null);` values is ContentValues object, put all your fields and values in this object ,sWhereClause is where clause without where word on selected fields like name='xyz'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:25:04.723

使用更新方法。

```
public int update (String table, ContentValues values, String whereClause, String[] whereArgs) 
```

更新数据库中行的便捷方法。您可以从
- [http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#update获取更多信息](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#update)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-19T22:55:48.147

显然，您在 SQLite 语句中犯了很多错误。首先，在你写“WHERE”之前，应该删除最后一个“,”。其次，“WHERE”前后应该有空格。最后但并非最不重要的一点是，您需要一个“;” 在字符串末尾的 SQLite-Query-String 中。好吧，这三件事可能无法完全解决问题，但它们至少应该让您更接近解决方案。

# c++ - 如何将 boost::uintmax_t 转换为 std::string

> ID：14578323
> 
> 赞同：1
> 
> 时间：2013-01-29T08:13:23.117
> 
> 标签：c++, boost

`boost::filesystem::file_size()`返回`boost::uintmax_t`。那么，如何转换`boost::uintmax_t`为`std::string`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:26:55.723

好吧，您可以使用一些简单的方法，例如：

```
boost::lexical_cast<std::string>(size); 
```

或手动使用字符串流：

```
static_cast<std::stringstream>(std::stringstream() << size).str() 
```

数字运算符是一个成员，因此即使在 C++03 中它也应该是临时的；其他一些重载是自由函数，在 C++03 中那些不接受临时函数，但您可以使用`std::stringstream().flush()`，它返回*左值*引用并且所有`operator<<`重载都有效。

但这不仅仅是简单的数字。是文件大小。因此，您很可能应该对其进行四舍五入并处理 kB/MB/GB/KiB/MiB/GiB 单位。在这种情况下，请查看[libkibi](https://launchpad.net/libkibi)。

# ios - StackMob 本地核心数据存储

> ID：14578332
> 
> 赞同：3
> 
> 时间：2013-01-29T08:13:57.653
> 
> 标签：ios, xcode, core-data, stackmob

我最近决定迁移到 StackMob（来自 Parse）。我已经设法设置核心数据，并且可以读取和写入 StackMob 数据存储。

到目前为止，StackMob 向用户提供了一个项目列表。如果用户决定在我的应用程序上使用某个项目，我希望该项目可以离线使用，这样他就可以使用它而无需连接到 stackmob。

我正在考虑创建一个本地核心数据并复制用户在那里选择的项目。我的第一个问题是我是否可以对 Core Data（stackmob 和本地）使用相同的对象。如果这是正确的做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:24:55.157

最新的 sdk 包括对核心数据缓存的支持。详细信息在这篇[博文](https://blog.stackmob.com/2013/01/ios-sdk-v1-2-0-released/)中。

> 缓存系统默认关闭。要打开它，只需在您的 App Delegate 文件中将 SM_CACHE_ENABLED 标志设置为 YES，然后再初始化 Core Data 存储。该标志在 SMCoreDataStore.h 中声明。

它还包括有关如何控制缓存的代码示例...

```
SMClient *client = [[SMClient alloc] initWithAPIVersion:@"0" publicKey:@"XXXX"];
SMCoreDataStore *coreDataStore = [client coreDataStoreWithManagedObjectModel:myModel];
[client.session.networkMonitor setNetworkStatusChangeBlockWithCachePolicyReturn:^SMCachePolicy(SMNetworkStatus status) {
        if (status == Reachable) {
            return SMCachePolicyTryNetworkElseCache;
        } else {
            return SMCachePolicyTryCacheOnly;
        }
}]; 
```

# model - Phalcon：交易和复杂模型

> ID：14578340
> 
> 赞同：1
> 
> 时间：2013-01-29T08:14:47.587
> 
> 标签：model, phalcon

在我的项目中，我有一个`entities`表，所有实体都应该存在（以支持复杂的外键），所以我需要在特殊表（在这个实体列表中）中插入额外的行，然后再向我的模型表插入一行，我想问做这个的最好方式是什么。

因此，对于以下代码，我需要插入两行：在`entity`表中，然后为刚刚插入的行选取 id，将其保存在当前模型中并插入`accounts`表中：

```
$account = new Account();
$account->name = 'John';
$account->save(); // performs two inserts while creating model 
```

据我了解，我可以使用 beforeCreate() 方法在`entity`表中插入行并为新创建的行获取 id，就像这样：

```
class Account
{
    public function beforeSave()
    {
        $entity = new \Entity();
        $entity->type = get_class($this);
        $entity->save();
        $this->id = $entity->id;
    }
} 
```

但是这样，如果不插入帐户行，`entity`表中的行就会存在。

然后我想使用这里的文档中所示的事务[http://docs.phalconphp.com/en/latest/reference/models.html#transactions](http://docs.phalconphp.com/en/latest/reference/models.html#transactions)

但我不明白，如果我为每个 model::create() 方法都有小事务，当我需要复杂操作的事务时它会如何工作？

例如

```
// controller action context
use Phalcon\Mvc\Model\Transaction\Manager as TxManager,
    Phalcon\Mvc\Model\Transaction\Failed as TxFailed;

try {

    //Create a transaction manager
    $manager = new TxManager();

    // Request a transaction
    $transaction = $manager->get();

    $account = new Account();
    $account->setTransaction($transaction);
    $account->name = "WALL·E";
    $account->created_at = date("Y-m-d");
    if ($account->save() == false) { // sub-transaction inside account::create() method
        $transaction->rollback("Cannot save account");
    }

    $accountPart = new AccountPart();
    $accountPart->setTransaction($transaction);
    $accountPart->type = "head";
    if ($accountPart->save() == false) { // sub-transaction inside accountPart::create() method
        $transaction->rollback("Cannot save account part");
    }

    //Everything goes fine, let's commit the transaction
    $transaction->commit();

} catch(TxFailed $e) {
    echo "Failed, reason: ", $e->getMessage();
} 
```

很难想象它将如何在大型项目中工作。嵌套事务对数据库性能不是很好

我还考虑了 3d 实现方法，我在下面添加了它的代码，但它看起来像一个 hack，我也不想使用它：

```
public function create($data = null)
{   
    // Create abstract entity instance
    $entity = new \Entity();
    $entity->type = get_class($this);

    // Save abstract entity
    if (!$entity->save()) {
        return false;
    }

    // Save current entity
    $this->id = $entity->id;
    $result = parent::create($data);

    // Remove abstract entity if current row was not saved
    if (!$result) {
        $entity->delete();
    }

    return $result;
} 
```

支持此类复杂实体的最佳且简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:21:17.417

实现事务的最简单方法是使用 0.9.0：

```
class Account
{
    public function beforeCreate()
    {
        $entity = new \Entity();
        $entity->type = get_class($this);
        $this->entity = $entity;
    }

    public function initialize()
    {
        $this->belongsTo(array('entity_id', 'Entity', 'id'));
    }

} 
```

另一方面，事务管理器创建一个隔离连接，允许您查询在当前事务快照中修改的记录，以及查看未隔离的记录。

这里，在新文档中有对不同事务场景的解释：http: [//docs.phalconphp.com/en/0.9.0/reference/models.html#transactions](http://docs.phalconphp.com/en/0.9.0/reference/models.html#transactions)

# gdata - OpenERP 7，安装时警告 gdata 未更新

> ID：14578341
> 
> 赞同：1
> 
> 时间：2013-01-29T08:15:01.190
> 
> 标签：gdata, openerp

我已经在 virtualbox 4.2.6 上的 Ubuntu 服务器 12.04.1 上安装了 OpenERP 7。我遵循[了这个有用的教程](http://www.theopensourcerer.com/2012/12/how-to-install-openerp-7-0-on-ubuntu-12-04-lts/)。但几乎在最后，当我启动 openerp 服务器时，我在日志中获得了几行信息，包括这一行：

```
WARNING ? openerp.addons.google_docs.google_docs:
Please install latest gdata-python-client from
http://code.google.com/p/gdata-python-client/downloads/list 
```

在教程的第 6 步结束时，作者指出他有同样的警告。然后他执行：

```
sudo apt-get install python-pip
sudo pip install gdata --upgrade 
```

警告消失了。不是我的情况。因此，在此操作之后，我手动下载了最后一个版本包并成功重新安装，但结果相同，我仍然收到警告消息。

关于什么可能是错的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:39:56.373

尝试：

```
sudo apt-get python-gdata 
```

然后：

```
wget http://gdata-python-client.googlecode.com/files/gdata-2.0.17.tar.gz
tar zxvf gdata-2.0.17.tar.gz
cd gdata-2.0.17/
python setup.py install 
```

# ios - 我创建了 UITextField 子类。当我选择键盘时，出现 EXC_BAD_ACCESS

> ID：14578343
> 
> 赞同：1
> 
> 时间：2013-01-29T08:15:13.743
> 
> 标签：ios, objective-c, exception, uitextfield, exc-bad-access

我做的。

标题

```
#import <UIKit/UIKit.h>

typedef BOOL (^validationType)(UITextField *textField);

@interface GLPValidationTextField : UITextField<UITextFieldDelegate>

@property (copy, nonatomic) validationType validation;

@end 
```

身体

```
#import "GLPValidationTextField.h"

@implementation GLPValidationTextField

@synthesize validation;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (id)initWithCoder:(NSCoder *)inCoder {
    if (self = [super initWithCoder:inCoder]) {
        self.delegate = self;
    }
    return self;
}

#pragma - mark UITextField delegate

-(BOOL) textFieldShouldEndEditing:(UITextField *)textField{
    return validation(textField);
} 
```

并且，用 IB 设置这个 TextField。

并且，使用这个

```
[self.mailTextField setValidation:validationBlock]; 
```

**这是工作。**

```
-(BOOL) textFieldShouldEndEditing:(UITextField *)textField{
    return validation(textField);
} 
```

这个方法叫。我可以验证。

但是，当我用地球之类的按钮选择键盘（将英文键盘更改为日文键盘或其他东西）时，会在模拟器中出现 EXC_BAD_ACCESS。

启用僵尸，但控制台什么也不显示。

发生了什么？当我选择键盘时。为什么会出现 EXC_BAD_ACCESS？

当发生 EXC_BAD_ACCESS 总是 Xcode 显示

```
libobjc.A.dylib`lookUpMethod:
0x1647a9a:  pushl  %ebp
0x1647a9b:  movl   %esp, %ebp
0x1647a9d:  pushl  %ebx
0x1647a9e:  pushl  %edi
0x1647a9f:  pushl  %esi
0x1647aa0:  subl   $28, %esp
0x1647aa3:  calll  0x1647aa8                 ; lookUpMethod + 14 // Thread 1:EXC_BAD_ACCESS 
```

# javascript - 向下滚动的简单 jQuery 问题

> ID：14578345
> 
> 赞同：0
> 
> 时间：2013-01-29T08:15:29.867
> 
> 标签：javascript, jquery, html, slider, scrollto

我有一段脚本运行*良好*。[这是一个演示](https://tinker.io/8e585/19)

你可以看到当你点击`Test 1`它**打开 div**。当您单击`Test 2`它时，它会**向下滚动**。

但是，我希望它能够工作，所以如果您单击“测试 2”，它会*打开***div 并向** **下滚动**- 这可能吗？

 ***我想这意味着如果可能的话将这两个功能结合起来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:21:05.770

在代码中，您拥有：

```
$("#box2 h3 a").click(function () {
    var $this = $(this);
    $('html, body').animate({
         scrollTop: $this.offset().top
    }, 1000);
    return false;
}); 
```

只需在函数内的任何位置添加以下语句（在明显的 return 语句之前）：

```
$('#newboxes7').addClass('active'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:20:15.160

是的，有可能……您可以使用 Bind 来绑定多个事件……甚至您也可以使用 Live 来绑定未来的事件！***

# c# - 在我的程序中共享一个日志类

> ID：14578348
> 
> 赞同：0
> 
> 时间：2013-01-29T08:15:39.960
> 
> 标签：c#, logging

我将在运行时使用反射将一些类加载到我的程序中。我希望这些类能够使用与主程序相同的日志记录类。

想一想，我将如何处理这个问题？使用静态类会起作用吗？

我宁愿不使用日志框架，因为它对于我想要的东西来说太过分了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:43:34.653

如果您真的不想使用日志框架（这可以理解），那么您可能需要查看 Singleton 模式。

```
using System;

public class Singleton
{
   private static Singleton instance;

   private Singleton() {}

   public static Singleton Instance
   {
      get 
      {
         if (instance == null)
         {
            instance = new Singleton();
         }
         return instance;
      }
   }
} 
```

请注意如何只能从其`.Instance`属性创建/访问/访问此类，这些属性都共享*相同*的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:23:08.920

你可以用一个名为 ILogger 的通用接口来包装你的记录器实现——你将加载的所有类都将在它们的构造函数中接受该接口——并且你可以在创建它们时将你的记录器实现注入它们。另外——关于运行时的加载——你听说过 MEF 吗？ [http://msdn.microsoft.com/en-us/library/dd460648.aspx](http://msdn.microsoft.com/en-us/library/dd460648.aspx) - 在这方面它可能对你有帮助，并且会自动将记录器依赖注入到你加载的新类中

我认为类引用的单例记录器不好，因为它将记录器从您的代码库紧密耦合到您创建的类。构造函数中的注入和接口将使它们与记录器松散耦合，并使它们更加独立和可测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:48:41.223

如果您想使用单例，请注意在 C# 中它可以以不那么冗长的方式实现：

```
public class Singletone
{
   public static readonly Singletone Instance = new Singletone();

   private Singletone() {}
   // other methods 
   public void DoTheJob(){}
}

// usage
Singletone.Instance.DoTheJob(); 
```

此实现解决了诸如延迟初始化（字段初始化器仅在应用程序域中第一次使用类时执行）以及线程安全（静态初始化器在 .NET 中保证是线程安全的）等问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T08:40:10.487

看看log4net。这将处理你想要的所有事情。如果您需要在某个特殊的地方记录，请实现您自己的附加程序来执行此操作。其他日志框架将提供您需要的功能。无需重新发明日志记录。

[log4net](http://logging.apache.org/log4net/)

# c# - 在 Microsoft 安全更新 MS13-004 后在 MSTest 中执行单元测试时出现 System.InvalidProgramException

> ID：14578355
> 
> 赞同：6
> 
> 时间：2013-01-29T08:16:26.310
> 
> 标签：c#, castle-windsor, mstest, nuget-package, castle-dynamicproxy

在 2013 年 1 月 8 日[http://technet.microsoft.com/en-us/security/bulletin/ms13-004](http://technet.microsoft.com/en-us/security/bulletin/ms13-004)应用 Microsoft 安全更新后，我们开始在构建服务器和本地的 CI 构建中遇到故障在我们的开发箱上运行测试。

我们得到一个**System.InvalidProgramException: Common Language Runtime detected an invalid program**。

这只发生在使用使用 Castle Windsor DynamicProxy 的 MSTest 运行测试时，尽管我不相信 DynamicProxy 在这里有问题。

下面是一个会生成异常的示例代码。

```
 [TestMethod]
    public void ShouldBeAbleToGenerateADynamicProxyForAnObject()
    {
        var container = new WindsorContainer();

        container.Register(Component.For<TestInterceptor>());

        container.Register(Component.For<ISomething>()
                               .Instance(new TestDependency("Called from test framework."))
                               .LifeStyle.Transient);

        container.Register(Component.For<IService>()
                               .ImplementedBy<TestService>()
                               .Interceptors(InterceptorReference.ForType<TestInterceptor>())
                               .Anywhere
                               .LifeStyle.Transient);

        var service = container.Resolve<IService>();
        Assert.AreEqual("Called from test framework.", service.MethodNumberOne());
    } 
```

这会生成一个堆栈跟踪，最终在 DynamicProxy 中调用 MixinData 构造函数时引发异常：

> Castle.DynamicProxy.MixinData..ctor(IEnumerable`1 mixinInstances) Castle.DynamicProxy.ProxyGenerationOptions.Initialize() Castle.DynamicProxy.Generators.InterfaceProxyWithTargetGenerator.GenerateCode(Type proxyTargetType, Type[] interfaces, ProxyGenerationOptions options) Castle.DynamicProxy.DefaultProxyBuilder。 CreateInterfaceProxyTypeWithTarget(Type interfaceToProxy, Type[] additionalInterfacesToProxy, Type targetType, ProxyGenerationOptions options) Castle.DynamicProxy.ProxyGenerator.CreateInterfaceProxyTypeWithTarget(Type interfaceToProxy, Type[] additionalInterfacesToProxy, Type targetType, ProxyGenerationOptions options) Castle.DynamicProxy.ProxyGenerator.CreateInterfaceProxyWithTarget(Type interfaceToProxy, Type [] additionalInterfacesToProxy，对象目标，ProxyGenerationOptions 选项，IInterceptor[] 拦截器）城堡。Windsor.Proxy.DefaultProxyFactory.Create（IKernel 内核，对象目标，ComponentModel 模型，CreationContext 上下文，Object[] constructorArguments）Castle.MicroKernel.ComponentActivator.DefaultComponentActivator.CreateInstance（CreationContext 上下文，ConstructorCandidate 构造函数，Object[] 参数）Castle.MicroKernel。 ComponentActivator.DefaultComponentActivator.CreateInstance(CreationContext context, ConstructorCandidate constructor, Object[] arguments) Castle.MicroKernel.ComponentActivator.DefaultComponentActivator.Instantiate(CreationContext context) Castle.MicroKernel.ComponentActivator.DefaultComponentActivator.InternalCreate(CreationContext context) Castle.MicroKernel.ComponentActivator.AbstractComponentActivator .Create(CreationContext context, 负担) Castle.MicroKernel.Lifestyle.AbstractLifestyleManager。CreateInstance(CreationContext context, Boolean trackedExternally) Castle.MicroKernel.Lifestyle.AbstractLifestyleManager.Resolve(CreationContext context, IReleasePolicy releasePolicy) Castle.MicroKernel.Handlers.DefaultHandler.ResolveCore(CreationContext context, Boolean requiresDecommission, Boolean instanceRequired, Burden&负担) Castle.MicroKernel。 Handlers.DefaultHandler.Resolve(CreationContext context, Boolean instanceRequired) Castle.MicroKernel.Handlers.AbstractHandler.Resolve(CreationContext context) Castle.MicroKernel.DefaultKernel.ResolveComponent(IHandler handler, Type service, IDictionary additionalArguments, IReleasePolicy policy) Castle.MicroKernel.DefaultKernel .Castle.MicroKernel.IKernelInternal.Resolve（类型服务，IDictionary 参数，IReleasePolicy 策略）Castle.MicroKernel.DefaultKernel。解决（类型服务，IDictionary 参数）Castle.Windsor.WindsorContainer.ResolveT ShouldBeAbleToGenerateADynamicProxyForAnObject() 在 TestCastleWindsorDynamicProxy.cs：第 34 行

我的第一个想法是 DynamicProxy 实际上在创建代理时在安全更新之后生成了无效的 IL，但据我所知，情况并非如此，因为它并没有那么远。我反编译了 Castle 并使用调试器单步执行，当通过如下调用从 ProxyGenerationOptions 类调用 MixinData 构造函数时，我看到根据堆栈跟踪抛出异常（*注意：在上面的代码示例中 this.mixins 将是null 但这是预期的并且在被调用的构造函数的代码中正确处理*）：

```
this.mixinData = new Castle.DynamicProxy.MixinData(this.mixins); 
```

在 MSTest 运行器之外，一切都按预期工作，我们的应用程序继续运行，并且在 xUnit 甚至使用 MSTest 的 TestDriven.NET 中运行单元测试时，它们不会生成异常。我们只看到此行为从 Visual Studio 运行测试或使用 TFS 和我们的 MSBuild 脚本进行自动化构建。

在我们向 Microsoft 提出支持请求之前，我想我们会问其他人是否经历过类似的事情或对可能导致我们问题的原因有任何想法？

**编辑：**今天早上经历了一些新事情后，我们发现这实际上似乎与我们正在使用的 Castle NuGet 包有关。当我们使用最新的 NuGet 包引用 Castle 时，我们最终会引用为**.NET Client Profile 4**编译的 Castle.Core 程序集，此引用是上述异常的原因（为什么？我还不完全确定）。更改对为 .NET 3.5 编译的版本的引用可确保测试在所有场景中都按预期通过。

**编辑：**经过更多挖掘之后，似乎确实存在一个链接问题（这让我们有理由回到微软，看看他们要说什么）[公共语言运行时在单元测试中检测到一个无效的程序错误](https://stackoverflow.com/questions/14333264/common-language-runtime-detected-an-invalid-program-error-in-unit-testing)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:38:15.887

我刚刚通过卸载 .net 的 micrsoft 安全补丁 kb2742595 在我的一位同事计算机上修复了相同的错误。我想安全设置中已经修复了一些问题，MSTest 运行器无法处理新设置。我们没有安装 Castle.Core。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T14:53:11.753

在尝试运行使用 TypeMock 的测试时，我遇到了类似的错误。为了解决这个问题，我在 Visual Studio 中打开了我的解决方案并选择了*Test* - *Edit Test Settings*。在*Test Settings*对话框中，我选择了*Hosts*并将其切换到*Run tests in 64 bit process on 64 bit machine*。

让我知道这是否有帮助。如果这与您的错误无关，请告诉我，我将删除我的答案。

# javascript - 如何检测图像何时在浏览器中完成渲染（即绘制）？

> ID：14578356
> 
> 赞同：45
> 
> 时间：2013-01-29T08:16:30.173
> 
> 标签：javascript, image, dom-events

在 Web 应用程序上，我需要处理大量高分辨率图像，这些图像会动态添加到 DOM 树中。它们是预先加载的，然后添加到页面中。

检测此类图像何时完成加载是一回事，为此我使用该`load`事件，但是如何使用 Javascript 检测它何时在浏览器中**完成呈现？**在处理高分辨率图像时，实际的绘画过程可能会花费大量时间，知道何时结束非常重要。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-07-10T10:42:02.017

我使用 requestAnimationFrame 来做到这一点。加载图像后，它将在下一个动画帧期间渲染。因此，如果您等待两个动画帧，您的图像将被渲染。

```
function rendered() {
    //Render complete
    alert("image rendered");
}

function startRender() {
    //Rendering start
    requestAnimationFrame(rendered);
}

function loaded()  {
    requestAnimationFrame(startRender);
} 
```

见[http://jsfiddle.net/4fg3K/1/](http://jsfiddle.net/4fg3K/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-08-20T08:22:45.580

我有同样的问题。我已经创建了带有进度条的预加载器页面。加载图片时，白色背景的预加载页面平滑消失到`opacity: 0`，但图片仍未渲染。

`setInterval`当图像加载*（但未渲染）*时，我终于使用了。在间隔中，我检查了`naturalWidth`and`naturalHeight`属性*(Support: IE9+)*。最初它等于`0`并且当图像被渲染时它显示它的当前宽度和高度。

```
const image = document.getElementById('image');

image.src = "https://cdn.photographylife.com/wp-content/uploads/2014/06/Nikon-D810-Image-Sample-1.jpg";

image.onload = function () {
  console.log('Loaded: ', Date.now());
  const interval = setInterval(() => {
    if (image.naturalWidth > 0 && image.naturalHeight > 0) {
      clearInterval(interval);
      rendered();
    }
  }, 20);
}

function rendered() {
  console.log('Rendered: ', Date.now());
}
```

```
img{
  width: 400px;
}
```

```
<img id="image"/>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-02T13:27:50.280

来自[mdn](https://developer.mozilla.org/en-US/docs/Web/Events/MozAfterPaint)，

> MozAfterPaint 事件在屏幕上重新绘制内容时触发，并提供有关已重新绘制的内容的信息。主要用于考察性能优化

希望您这样做是为了衡量渲染图像的性能。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-04T11:19:04.943

**更新：不要使用这种方法 - 在图像尺寸设置为默认值以外的情况下不起作用**

您可以将元素的高度设置为自动（具有固定宽度）并超时继续检查元素的尺寸是否与图像的自然尺寸匹配。这不是最好的解决方案，但如果您真的需要在渲染后而不是在加载后做某事，这是一个不错的选择。

或多或少是它的样子：

```
//this is NOT a real code
function checkIfRendered(img, onRender) {
    var elRatio = img.width() / img.height();
    var natRatio = img.naturalWidth / img.naturalHeight;

    if (elRatio === natRatio)
        onRender();
    else {
        setTimeout(function() {
            checkIfRendered(imgEl, onRender)
        }, 20);
    }
}

img.onload(checkIfRendered(img, function() { alert('rendered!'); })); 
```

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2013-01-29T08:24:45.667

You need the `onload` event on the `<img>` tag. For example:

```
function loadImage () {
  alert("Image is loaded");
}
<img src="w3javascript.gif" onload="loadImage()" width="100" height="132"> 
```

[source](http://www.w3schools.com/jsref/event_img_onload.asp)

If the image is the background of another element, load the image in the background (with a simple Ajax GET request) and when the result comes back, set the background after it has been loaded.

# python - Python：如何在定义的函数中单独打印变量？

> ID：14578360
> 
> 赞同：-2
> 
> 时间：2013-01-29T08:16:36.217
> 
> 标签：python, function, printing

我想知道如何使用 python 在函数中打印变量，例如：

```
import math
def number():
    print
    number_enters = input("Please enter the number: ")
    square_roots = math.sqrt(number_enters)
    print square_roots 
```

但是我怎样才能单独打印 square_roots ，例如在程序结束时打印它（在其他功能之后），例如：

```
import math
def number():
    print
    number_enters = input("Please enter the number: ")
    square_roots = math.sqrt(number_enters)
    print square_roots

def bla_bla():
    .....
    .....

.......
.......
print square_roots 
```

我希望这是有道理的，请帮帮我，毕竟我怎样才能打印 square_roots ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:19:13.570

在函数中替换`print square_roots`为。`return square_roots`这将允许您稍后使用该变量。

```
def number():
    print
    number_enters = input("Please enter the number: ")
    square_roots = math.sqrt(number_enters)
    return square_roots 
```

然后您可以将结果存储在一个变量中，然后打印它。

```
square_root = number()
.....
.....
print square_root 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:19:27.033

例如，从列表中返回函数的结果并将其存储在变量中。稍后使用此变量在程序结束时打印平方根。我也不明白为什么当每个非负数都有一个（非负）平方根（假设您使用实数）并且您总是计算一个结果时，您为什么要有平方根 ​​s*。

# hadoop - 如何使用 bzip2 输入格式增加 MapReduce 的地图任务

> ID：14578363
> 
> 赞同：0
> 
> 时间：2013-01-29T08:16:46.333
> 
> 标签：hadoop, mapreduce, bzip2

我开发了 mr，它可以正确处理运行多个地图任务的文本文件，但我需要在档案上运行作业。我的选择是 bzip2 存档。有了这样的档案，我的工作只需要一个地图任务。

有谁知道，我怎样才能增加地图任务？

Hadoop版本：Hadoop 0.20.2-cdh3u5

我尝试使用不同的参数编辑 mapred-site.xml，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:01:22.270

你的文件有多大？你的块大小是多少？Bzip2 是可拆分的，因此当您的文件大小超过您的块大小并且您的 Bzip2 编解码器配置正确时，您的文件将自动拆分，因此您的地图任务将自动增加。

中的属性`mapred-site.xml`用于指定作业的（中间）输出。当您使用压缩文件作为输入时，您应该在`core-site.xml`using中设置它`io.compression.codecs`。

另外，如果我是你，我会看看 LZO。默认情况下，LZO 档案不可拆分，但有一种方法可以对它们进行索引，以便它们成为可拆分的。与 Bzip2 相比，LZO 的压缩更少，但速度更快。我使用 Bzip2 压缩了一个 32GB 的文本文件。Bzip2 将文件压缩到 1.6GB，但耗时 6.5 小时。当我使用 LZO 执行相同操作时，它返回了一个 5GB 的文件，但它在 30 分钟内完成了。减压的差别就更大了。Bzip2 也使用更多的内存。

关于如何索引 LZO 文件，请看这里：[https ://github.com/twitter/hadoop-lzo](https://github.com/twitter/hadoop-lzo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:11:24.887

根据[此线程](https://groups.google.com/a/cloudera.org/forum/?fromgroups=#!topic/cdh-user/sVrERdEVdBE)，还需要[MAPREDUCE-830才能使 Bzip2 文件可拆分 (](https://issues.apache.org/jira/browse/MAPREDUCE-830) [HADOOP-4012](https://issues.apache.org/jira/browse/HADOOP-4012) ) 用于 MapReduce 作业。[MAPREDUCE-830](https://issues.apache.org/jira/browse/MAPREDUCE-830)在 CDH3u5 上不可用。

# oracle - 无法在表空间 TEMP 数据库驱动程序错误中将临时段扩展 128

> ID：14578364
> 
> 赞同：0
> 
> 时间：2013-01-29T08:16:52.110
> 
> 标签：oracle

我在 oracle 上执行了一些繁重的查询。但是出现了一个错误（无法在表空间 TEMP 数据库驱动程序错误中将临时段扩展 128）

我检查了表空间，但没有找到 TEMP 表空间。下面是我执行的查询。而且我已经增加了 USER 表空间。但仍然面临同样的问题。

选择 * 从 DBA_DATA_FILES；

```
/home/oracle/oracle/oradata/ORCL/users01.dbf    4   USERS   32212254720 3932160 AVAILABLE   4   YES 34359721984 4194302 160 32211206144 3932032 ONLINE
/home/oracle/oracle/oradata/ORCL/undotbs01.dbf  3   UNDOTBS1    21474836480 2621440 AVAILABLE   3   YES 34359721984 4194302 640 21473787904 2621312 ONLINE
/home/oracle/oracle/oradata/ORCL/sysaux01.dbf   2   SYSAUX  1377828864  168192  AVAILABLE   2   YES 34359721984 4194302 1280    1376780288  168064  ONLINE
/home/oracle/oracle/oradata/ORCL/system01.dbf   1   SYSTEM  1073741824  131072  AVAILABLE   1   YES 34359721984 4194302 1280    1072693248  130944  SYSTEM
/home/oracle/oracle/oradata/ORCL/CSA_BILL_ITEM01.dbf    5   CSA_BILL_ITEM   32212254720 3932160 AVAILABLE   5   YES 32212254720 3932160 12800   32211206144 3932032 ONLINE
/home/oracle/oracle/oradata/ORCL/CSA_BILL_ITEM_INDEX01.dbf  6   CSA_BILL_ITEM_INDEX 2147483648  262144  AVAILABLE   6   YES 2147483648  262144  3200    2146435072  262016  ONLINE
/home/oracle/oracle/oradata/ORCL/CSA_BILL01.dbf 7   CSA_BILL    2147483648  262144  AVAILABLE   7   YES 2147483648  262144  12800   2146435072  262016  ONLINE
/home/oracle/oracle/oradata/ORCL/CSA_BILL_INDEX01.dbf   8   CSA_BILL_INDEX  536870912   65536   AVAILABLE   8   YES 1073741824  131072  3200    535822336   65408   ONLINE
/home/oracle/oracle/oradata/ORCL/META_DATA01.dbf    9   META_DATA   536870912   65536   AVAILABLE   9   YES 1073741824  131072  3200    535822336   65408   ONLINE
/home/oracle/oracle/oradata/ORCL/META_INDEX01.dbf   10  META_INDEX  268435456   32768   AVAILABLE   10  YES 536870912   65536   640 267386880   32640   ONLINE
/home/oracle/oracle/oradata/ORCL/POWERCENTER01.dbf  11  POWERCENTER 2147483648  262144  AVAILABLE   11  YES 2147483648  262144  4096    2146435072  262016  ONLINE
/home/oracle/oracle/oradata/ORCL/CSA_QOTA01.dbf 12  CSA_QOTA_TBSPACE    536870912   65536   AVAILABLE   12  YES 536870912   65536   4096    535822336   65408   ONLINE
/home/oracle/oracle/oradata/ORCL/CSA_QOTA02.dbf 13  CSA_QOTA_TBSPACE    1610612736  196608  AVAILABLE   13  NO  0   0   0   1609564160  196480  ONLINE
/home/oracle/oracle/oradata/ORCL/CSA_QOTA03.dbf 14  CSA_QOTA_TBSPACE    1073741824  131072  AVAILABLE   14  NO  0   0   0   1072693248  130944  ONLINE 
```

请在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T08:54:58.680

临时表空间的管理方式与普通数据表空间不同。您可以通过查询来查看操作系统文件`dba_temp_files`。请参阅[文档](http://docs.oracle.com/cd/E14072_01/server.112/e10595/tspaces007.htm#i1006555)以了解如何增加临时表空间文件的大小或添加新文件。

但是，您最好调查一下为什么您的查询使用了如此多的临时空间并查看是否可以减少它；可能存在一个根本性错误（例如意外的交叉连接），这意味着它使用的温度远远超过应有的温度，并且可能使其运行时间超过应有的时间。查看解释计划以获取有关问题所在的线索。增加`TEMP`可能是必要的，但不应在看到此错误后立即自动完成。

如果您有一个查询需要比正常多得多的临时表，那么另一个选择可能是添加一个新的临时表空间，在操作期间[将其分配给用户](http://docs.oracle.com/cd/E14072_01/network.112/e10574/users.htm#CHDCJDFJ)`alter user`，完成后恢复，并且然后删除新的表空间。然后额外的磁盘只占用很短的时间。对于您的情况可能不实用或不明智，但以防万一。

* * *

我应该说真正的临时临时表空间 - 定义为[`create temporary tablespace`](http://docs.oracle.com/cd/E14072_01/server.112/e10592/statements_7003.htm#CJAFDEIF)- 是这样管理的，条目在`dba_temp_files`. 在 8i 之前，他们有正常的数据文件，并且可能在已升级的数据库中仍然具有该配置，并且没有以新格式重新创建临时表空间。显然，您的情况并非如此，因为您的没有出现在`dba_data_files`.

# c# - 单元测试 .NET 事件调用

> ID：14578368
> 
> 赞同：1
> 
> 时间：2013-01-29T08:17:16.793
> 
> 标签：c#, unit-testing, unhandled-exception

我有一个静态类，它包含像`UnhandledException`和`ProcessExit`（CurrentAppDomain 对象的）这样的.NET 事件，因此当调用者在类上调用*Initialize*时，它​​会为这些事件订阅我自己的处理程序，稍后调用者可以添加他自己的处理程序方法，使用专用 API。（它是这样设计的，所以一旦事件被触发，我就能够控制处理程序的执行顺序）。

我的问题是：是否可以对这样的类进行单元测试？

例如，我想知道当抛出未处理的异常时，我的私有处理程序已执行。问题是当我抛出未处理的异常时，这将是测试的“结果”（如果我错了，请纠正我）。如果我退出该过程，也会发生同样的情况。

我在想一个可能的解决方案可能涉及加载一个新的应用程序域，但我不知道这是否可能以及如何从技术上解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:51:40.370

要进行测试`UnhandledException`，您可以在新线程中抛出异常：

```
[TestMethod]
public void UnhandledTest()
{
    using (var okEvent = new ManualResetEventSlim())
    using (var notOkEvent = new ManualResetEventSlim())
    {
        UnhandledExceptionEventHandler handler = (o, e) =>
            {
                if (e.ExceptionObject is ApplicationException)
                    okEvent.Set();
                else notOkEvent.Set();
            };

        AppDomain.CurrentDomain.UnhandledException += handler;

        var thread = new Thread(() => { throw new ApplicationException(); });
        thread.Start();

        var result = EventWaitHandle.WaitAny(new[] { notOkEvent.WaitHandle, okEvent.WaitHandle }, 10000);
        Assert.AreEqual(1, result);

        AppDomain.CurrentDomain.UnhandledException -= handler;
    }
} 
```

这不会导致测试失败，因为测试框架仅在执行测试方法的线程上捕获异常。

`ProcessExit`另一方面，当当前进程退出时将被引发，因此测试框架很可能届时已经关闭。所以你必须在不同的进程中运行实际的测试代码。从单元测试方法开始，您将启动一个新进程，它将运行测试的内容并将测试结果传回给原始进程中的单元测试方法。

新进程只是一个单独的 .exe 项目。它所做的是附加到`ProcessExit`，停止自身，并在`ProcessExit`处理程序中检查一切是否正常，然后将结果传达回运行单元测试方法的进程。

您可以使用命令行从单元测试项目到 .exe 项目进行通信，并使用某种 IPC（如临时文件或[命名事件](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)）进行通信。

# javascript - 这段代码有什么问题？我不断收到错误，但它不起作用

> ID：14578369
> 
> 赞同：-3
> 
> 时间：2013-01-29T08:17:26.240
> 
> 标签：javascript, jquery, ip-geolocation

如果用户在 MaxMind 数据库的帮助下居住在特定位置，该脚本会显示适当的 div。

但是，由于我仍然在弄湿我整理的这个小代码片段，所以我不想工作。

我在这里做错了什么？

（在下面编辑了更多信息 - 感谢大家对澄清的提醒！非常有帮助）

$geoip_city 是 MaxMind 数据库提供的全局变量。它根据与列出的条目对应的用户 IP 返回一个值。在这种情况下，我正在寻找多伦多或温哥华等特定城市的用户。

```
$(document).ready(function(){
    if ($geoip_city() == $geoip_city('Vancouver')){
     document.getElementById('vizPlayer').style.display = "block";
    }else if ($geoip_city() == $geoip_city('Toronto')){
      document.getElementById('vizPlayer').style.display = "none";
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T08:21:28.333

This is how document.ready should look like

```
$(document).ready(function(){

}); 
```

# php - 参考：“PHP：限制 foreach() 语句？” 如何将其添加到我的代码中

> ID：14578370
> 
> 赞同：0
> 
> 时间：2013-01-29T08:17:26.877
> 
> 标签：php, arrays, foreach, smarty, limit

我发现这篇文章[PHP: Limit foreach() statement?](https://stackoverflow.com/questions/1656969/php-limit-foreach-statement) 它谈论做我想做的事情，但我不确定如何编辑我的代码以及将其放置在哪里。谁能告诉我在哪里放置代码/如何编辑它以使其仅显示数组的 X 个数？

```
{~* Get Ads *~}
{~$ads2=array()~}
{~foreach $ads as $data~}
{~capture append="ads2"~}
{~if $data.code~}
<div>{~$data.code|decode~}</div><br />
{~else~}
<div><a rel="nofollow" href="{~$conf.path~}side/sideClick.php?spid={~$data.id~}" target="_blank">{~if $data.url~}<img src="{~$data.url~}" border="0" alt="{~$data.title~}" {~if $config->get('sideForce')~} width="120" height="60"{~/if~}>{~else~}{~$data.title~}{~/if~}</a></div>
{~/if~}
{~/capture~}
{~/foreach~}

{~* Advertise Here *~}
{~if !$config->get('sideNoFill') || $config->get('sideNoFill')=='2'~}

{~* Advertising Spots *~}
{~if $adsRows>=5 || $config->get('sideNoFill')=='2'~}
{~$rows=1~}
{~else~}
{~$rows=5-$adsRows~}
{~/if~}

{~* Advertising Text *~}
{~if $config->get('sideAds')=='image'~}
{~$adText="banner"~}
{~elseif $config->get('sideAds')=='text'~}
{~$adText="text link"~}
{~else~}
{~$adText="banner or text link"~}
{~/if~}

{~* Loop *~}
{~section loop=$rows name="sidePanel"~}
{~capture append="ads2"~}
<div><a href="{~$conf.path~}side/index.php">Your 120x60 {~$adText~} here, <br>As Low As 8 Cents Per Day!</a></div>
{~/capture~}
{~/section~}
{~/if~}

{~* Horizontal Ads *~}
{~if $horizontal>0~}
{~if count($ads2)~}
<table cellpadding="4" cellspacing="0" style="border:0px;width:100%;table-layout:fixed">
{~$i=1~}
{~foreach $ads2 as $data~}
  {~if $i==1~}
<tr valign="top">
  {~/if~}
<td>{~$data~}</td>
  {~if $i==$horizontal~}
    {~$i=1~}
</tr>
  {~elseif $data@last~}
<td colspan="{~$horizontal-$i~}"></td>
</tr>
  {~else~}
    {~$i=$i+1~}
  {~/if~}
{~if (++$i == 5) break;~}{~/if~}
{~/foreach~}
</table>
{~/if~}

{~* Vertical Ads *~}
{~else~}
{~foreach $ads2 as $data~}
<div>{~$data~}</div>
{~if !$data@last~}<br />{~/if~}
{~/foreach~}
{~/if~} 
```

我试图弄乱它以找到放置它的位置，但我只是不断收到错误。

我正在使用垂直广告版本。（上面显示了一个。）

我想限制正在显示的广告数量，因为现在它会一直显示所有广告，每次都以随机顺序出现。我希望它是相同的，除了只显示它们中的前 X 个被拉动而忘记其余的告诉下一个负载。由于它们以随机顺序出现，因此它们都将显示，而不是同时显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:54:16.577

1) 您正在编辑 Smarty 模板代码，而不是 PHP 代码。这就是您链接到的代码不起作用的原因。尽管 Smarty 试图与 PHP 非常相似，但它并不相同。

`{break}`2）您可以使用该命令跳出循环。

```
{foreach $ads2 as $data}
  {if $data@index >= 2}
   {break}   
  {/if}
{/foreach} 
```

3) 请您将该代码提交到[http://thedailywtf.com/](http://thedailywtf.com/)吗？

# android - 有人知道android中名称youtube应用程序的包吗？

> ID：14578373
> 
> 赞同：7
> 
> 时间：2013-01-29T08:17:50.237
> 
> 标签：android, android-intent, youtube-api

谁能帮我在哪里可以找到 youtube 应用程序在 android 中的包名称。因为我将在我的应用程序中使用 Youtube API，它首先需要一个 youtube 应用程序才能运行。这就是为什么我需要包名。提前谢谢你：D

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-29T08:25:11.520

它是`com.google.android.youtube`。

要找出答案，请在 Play 商店中找到它，然后记`id`下 URL 中的参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T08:24:47.617

包名是`com.google.android.youtube`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T08:25:34.107

好问题，只需添加包名称：

**com.google.android.youtube**

更多查看本教程，我相信你会得到你的答案。

[http://blog.blundellapps.com/click-item-in-a-listview-to-show-youtube-video/http://blog.blundell-apps.com/click-item-in-a-listview- to-show-youtube-video/](http://blog.blundellapps.com/click-item-in-a-listview-to-show-youtube-video/http://blog.blundell-apps.com/click-item-in-a-listview-to-show-youtube-video/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-10T07:55:06.207

要了解您设备中安装的任何应用程序的包名称，请按照说明进行操作。

1.  打开安卓工作室
2.  从 android studio 连接您的设备
3.  打开设备文件资源管理器（从您打开 Logcat 的位置）
4.  选择/单击数据文件夹 -> 应用程序文件夹

现在您将看到应用程序列表，现在您可以找到所需应用程序的包名称。

# c# - Azure blob 作为图像 Windows 窗体

> ID：14578374
> 
> 赞同：2
> 
> 时间：2013-01-29T08:17:52.750
> 
> 标签：c#, windows, winforms, azure, azure-blob-storage

在我的应用程序中，我可以将一些图像上传到我在 Windows Azure 上的 blob 存储。现在我正在开发我的应用程序的第二部分，从 Azure 服务器检索图像，并将它们显示在图片框中。

我尝试了几件事：

```
listboxPictures.Items.Clear();
iTotalPictures = 0;
CloudBlobClient blobClient =
    new CloudBlobClient("http://ferryjongmans.blob.core.windows.net/",
        new StorageCredentialsSharedAccessSignature(signature));
CloudBlobContainer container = blobClient.GetContainerReference(comboBox1.SelectedItem.ToString());
CloudBlobDirectory direct = container.GetDirectoryReference(comboBox1.SelectedItem.ToString());
BlobRequestOptions options = new BlobRequestOptions();
options.UseFlatBlobListing = true;
options.BlobListingDetails = BlobListingDetails.Snapshots;
foreach (var blobItem in direct.ListBlobs(options))
{
    listboxPictures.Items.Add(blobItem.Uri.ToString());
    iTotalPictures ++;
    lblTotal.Text = "Total frames: "+Convert.ToString(iTotalPictures);
    pictureBox1.ImageLocation = blobItem.Uri.ToString(); // This is the display box, this works only with public settings on the container
} 
```

这有效，但仅当容器是公共的（在 Azure 控制面板中设置）时。但是当我的容器处于私有状态时，我想获取我的图像。

请问谁能帮帮我？

（我希望描述足够清楚）

[当我的 blobcontainer 设置为公共](http://www.cindesbetondesign.nl/Application.png) [时的应用程序 当我的 blobcontainer 设置为私有时的应用程序](http://www.cindesbetondesign.nl/application2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:42:29.970

首先，确保您的 SAS 签名已定义“**读取**”权限（“列表”权限将只允许列出 blob 容器中的 blob）。然后替换以下代码行：

```
pictureBox1.ImageLocation = blobItem.Uri.ToString(); 
```

和：

```
pictureBox1.ImageLocation = blobItem.Uri.ToString() + signature; 
```

您看不到图片的原因是您为 blob 获取的 URI 没有附加 SAS 组件。

# c++ - CMake 构建时出错。项目使用 boost 库

> ID：14578376
> 
> 赞同：0
> 
> 时间：2013-01-29T08:18:02.887
> 
> 标签：c++, boost, compilation, compiler-errors, cmake

我已经下载了示例以在用 C++ 编写的开源模拟器中运行。我正在遵循[本](https://github.com/golems/grip/wiki/Linux-installation)教程来帮助我构建和运行示例。我已经完成了教程中的大部分命令。但是当我尝试 cmake （这是本教程中的最后一步）时，我收到了这个错误。

这是我要运行的示例：[https ://github.com/golems/grip-samples/tree/master/cubesTab](https://github.com/golems/grip-samples/tree/master/cubesTab)

我得到的错误在这里：

```
CMake Error at CMakeLists.txt:30 (find_package):
  Could not find module FindDARTExt.cmake or a configuration file for package
  DARTExt.

  Adjust CMAKE_MODULE_PATH to find FindDARTExt.cmake or set DARTExt_DIR to
  the directory containing a CMake configuration file for DARTExt.  The file
  will have one of the following names:

    DARTExtConfig.cmake
    dartext-config.cmake

CMake Error at /usr/share/cmake-2.8/Modules/FindBoost.cmake:1202 (message):
  Unable to find the requested Boost libraries.

  Boost version: 1.46.1

  Boost include path: /usr/include

  The following Boost libraries could not be found:

          boost_system
          boost_filesystem

  No Boost libraries were found.  You may need to set BOOST_LIBRARYDIR to the
  directory containing Boost libraries or BOOST_ROOT to the location of
  Boost.
Call Stack (most recent call first):
  /usr/share/cmake-2.8/Modules/FindDART.cmake:50 (find_package)
  CMakeLists.txt:31 (find_package)

-- Configuring incomplete, errors occurred! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-14T01:05:01.183

尝试使用以下方法完成该过程：

```
sudo apt-get install cmake libblkid-dev e2fslibs-dev libboost-all-dev libaudit-dev 
```

# magento - 创建包含国家代码的下拉属性，magento

> ID：14578382
> 
> 赞同：0
> 
> 时间：2013-01-29T08:18:35.137
> 
> 标签：magento, attributes, entity-attribute-value

我在 magento 中创建了一个下拉属性，它显示了所有国家的列表。我通过在后端创建一个下拉属性来做到这一点，然后我使用 SQLyog 将其源模型更改为`catalog/product_attribute_source_countryofmanufacture`. 现在它显示国家列表。我想创建一个新的下拉属性，它将显示所有国家/地区代码的列表（以两个字母格式）...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T09:59:43.940

您必须创建一个自定义源模型并将其分配给您的新属性。要在您的模块中实现这一点，请创建一个安装/升级脚本。确保设置模型扩展`Mage_Catalog_Model_Resource_Setup`或扩展`Mage_Catalog_Model_Resource_Eav_Mysql4_Setup`，例如：

```
 <resources>
            <yourpackage_yourmodule_setup>
                <setup>
                    <module>YourPackage_YourModule</module>
                    <class>Mage_Catalog_Model_Resource_Eav_Mysql4_Setup</class>
                </setup>
            </yourpackage_yourmodule_setup>
        </resources> 
```

在安装脚本中创建一个属性，并将源模型属性设置为您的自定义类：

```
$installer = $this;
/* @var $installer Mage_Catalog_Model_Resource_Eav_Mysql4_Setup */

$installer->startSetup();

$applyTo = array(
    Mage_Catalog_Model_Product_Type::TYPE_SIMPLE,
    Mage_Catalog_Model_Product_Type::TYPE_CONFIGURABLE
);

$installer->addAttribute(
    'catalog_product',
    'custom_countries', 
    array(
        'group'             => 'General',
        'type'              => 'int',
        'backend'           => '',
        'frontend'          => '',
        'label'             => 'Custom Countries',
        'input'             => 'select',
        'source'            => 'yourpackage_yourmodule/product_attribute_source_custom',
        'global'            => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_WEBSITE,
        'apply_to'          => implode(',',$applyTo)
    )
);

$installer->updateAttribute('catalog_product', 'custom_countries', 'backend_model', '');

$installer->endSetup(); 
```

在模块的 Model 文件夹中创建一个目录结构`Product/Attribute/Source`并在其中放置一个文件`Custom.php`- 这是您将自定义源模型放入的位置。

在文件`YourPackage/YourModule/Model/Product/Attribute/Source/Custom.php`中放入一个具有以下定义的类。

```
class YourPackage_YourModule_Model_Product_Attribute_Source_Custom
    extends Mage_Catalog_Model_Product_Attribute_Source_Countryofmanufacture
{ 
```

在其中添加一个函数覆盖，它将选项标签的国家名称与国家代码交换：

```
public function getAllOptions()
    {
        $options = parent::getAllOptions();
        foreach ($options as $key => $option) {
            $options[$key] = array('value' => $option['value'], 'label' => $option['value']);
        }
        return $options;
    } 
```

完毕。

# jquery - iphone jquery手机闪烁问题

> ID：14578387
> 
> 赞同：3
> 
> 时间：2013-01-29T08:19:07.800
> 
> 标签：jquery, jquery-mobile, flicker

我在使用 jQuery 移动开发的应用程序时遇到了 iPhone 上的闪烁问题。我尝试了互联网上的几种解决方案，包括 CSS 更改、将转换设置为“无”，甚至在 jquerymobile.js 中注释代码。但没有运气......我正在使用的 JS 和 CSS 文件如下：

```
<script src="jquery-1.7.1.min.js"></script>
<script src="jquery.mobile-1.1.0.js"></script>
<script type="text/javascript" charset="utf-8" src="cordova-2.3.0.js"></script>
<link rel="stylesheet" href="jquery.mobile.structure-1.1.0.min.css" /> 
```

对此的任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T15:41:02.657

当我在转换期间搜索闪烁的**页眉**和**页脚**时，我发现了这个 SO 线程以及：http: [//view.jquerymobile.com/1.3.1/dist/demos/widgets/fixed-toolbars/footer-persist-一个.html](http://view.jquerymobile.com/1.3.1/dist/demos/widgets/fixed-toolbars/footer-persist-a.html)

> 就这么简单：如果您要导航到的页面的页眉或页脚与您要导航的页面具有相同的 data-id，则工具栏将在转换之外显示为固定。

```
<div id="sell" data-role="page" > 
    <div data-role="header" data-id="header" data-position="fixed">
        <h1>Seconds.me</h1>
        <a data-role="button" href="#buy" data-icon="arrow-l" data-theme="app-ios" style="color: white; text-decoration: none;">Back</a>
    </div>

      <h3>1</h3>
      <a href="#buy">2</a>

  </div>  

  <div id="buy" data-role="page" > 
    <div data-role="header" data-id="header" data-position="fixed">
        <h1>Seconds.me</h1>
        <a data-role="button" href="#sell" data-icon="arrow-l" data-theme="app-ios" style="color: white; text-decoration: none;">Back</a>
    </div>

      <h3>2</h3>
      <a href="#sell">1</a>

  </div> 
```

一直闪烁，现在不闪烁了。看看`data-id="header"`两个页面的哪个相同。

*（希望有帮助）*

更新： http: [//jquerymobile.com/demos/1.2.0/docs/pages/page-transitions.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-transitions.html) --> 这个页面也解决了闪烁问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:57:43.227

在这里，我带来了解决方案.......

请按照顺序

```
// First of all jQuery
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>

// then load custom jQuery Mobile
<script type="text/javascript" src="mobile/js/mobile-jqm.js"></script>

// then load jQuery Mobile
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

// finally load your own scripts (.js) files 
<script type="text/javascript" src="mobile/js/script.js"></script> 
```

要禁用转换，请在 mobile-jqm.js 文件中创建 mobile-jqm.js filt &，放置以下代码：

```
$(document).bind("mobileinit", function(){
  $.extend(  $.mobile , {
   defaultPageTransition: 'none'
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:26:57.407

尝试下载并使用最新版本的 jquery(1.8.2) 和 jquery mobile(1.2.0) 及其 css(1.2.0)。

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T08:30:35.233

您是否执行了以下解决方法：

```
.ui-page { -webkit-backface-visibility: hidden; } 
```

[如此处](http://jquerymobile.com/demos/1.2.0/docs/pages/page-transitions.html)所述

> 重要提示：某些平台目前存在过渡问题。我们正在努力为每个人解决问题的解决方案。如果您在过渡期间或过渡结束时遇到闪烁和闪烁，我们建议您采用以下解决方法。请注意，此解决方法应在部署前在目标平台上进行全面测试。已知此解决方法会导致性能问题，并且浏览器在某些平台（尤其是 Android）上崩溃。

# php - 在 php / linux centos 中丢失的会话

> ID：14578388
> 
> 赞同：1
> 
> 时间：2013-01-29T08:19:07.923
> 
> 标签：php, linux, session, centos

好的。我知道有很多关于在页面之间导航丢失会话的帖子，但没有一个像下面这样：

我正在一个在共享主机帐户中运行良好的网站上工作。

当我将站点移动到云服务器时，我只能登录。但是当我进入时，任何页面上的任何操作都会将用户与登录页面分开，而在某个地方不再有会话变量。

对我来说一切都很好，会话路径是可写的，会话已正确解决，直到第一页，会话在 html 代码的开头和结尾都正确显示。

经过 1 天的疯狂，我发现对于页面中的每一个错误（未找到 css 文件或未找到图像），会话都会丢失。因此，我一个一个地纠正了这些错误（顺便说一句，这非常好），现在该站点又可以正常工作了。

我的问题是我可以在哪里配置这样的 linux 服务器行为，即使编程中出现一些错误，也可以保存和写入会话？

我想知道它，因为如果共享主机像那样工作，意味着某处有一个指令可以做到这一点......直到现在我找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:35:22.010

错误导致会话不被保存的唯一可能性（假设您使用正常的会话保存处理程序）是 PHP 本身会在页面结束之前崩溃 - 所有其他情况（与 PHP 无关的错误，例如缺少CSS 文件或图像或非崩溃的 PHP 错误）仍应让 PHP 正常关闭，`session_write_close()`如果您之前没有手动执行此操作，则会自动执行此操作。

这也不太可能是与 Linux 相关的问题。

最可能的选择是旧主机和新服务器之间的 PHP 会话设置有所不同。在两者上运行`phpinfo()`并比较会话设置 - 看看你是否发现任何异常。

另外，我建议确保您的会话 ID cookie 被浏览器接受并且不会随着时间而改变。使用 Firebug 或 Chrome 开发者工具通过多个页面跟踪会话 ID cookie（默认称为 PHPSESSID）的值。确保它被浏览器接受并且不会一直更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:39:11.680

如果这些错误中的任何一个导致在会话开始之前在页面上显示错误或警告，那么这是有道理的，因为任何输出都会阻止您启动会话。

# php - 通过 php 函数向 mysql 添加条目时，将生成的 ID 作为变量返回

> ID：14578391
> 
> 赞同：0
> 
> 时间：2013-01-29T08:19:17.797
> 
> 标签：php, mysql, null

我在 php 中创建了一个函数来向表中添加一些信息。但是，ID 是在输入时创建的。但是我需要该 ID 才能执行另一项任务，但我实际上不确定如何获取该条目。

所以我的功能是这样的：

```
addSkillset($agent, $computing, $tactical, $driving); 
```

这样做：

```
function addProperty($agent, $computing, $tactical, $driving) {
    $mysqli = new mysqli(DB_SERVER, DB_USER, DB_PASSWORD, DB_NAME);
    if (!$mysqli) {
            die('There was a problem connecting to the database.');
    }
    else {
    $query = "INSERT INTO Skillset VALUES (NULL, '$agent', '$computing', '$tactical', '$driving')";
    }
    if ($Results = mysql_query($query)){
    echo "added";
    }
    $mysqli->close();
} 
```

所以在这个查询中，“NULL”位是我试图识别和返回的。

我想我必须说：

```
if ($Results = mysql_query($query)){
    $somesortofvariable = somesortofcommand;
    return $somesortofvariable;
} 
```

但我不完全确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:22:43.710

您正在寻找[mysqli_insert_id()](http://php.net/manual/de/mysqli.insert-id.php)

```
if ($Results = mysqli_query($query)){
    $somesortofvariable = mysqli_insert_id();
    return $somesortofvariable;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T08:24:29.660

也许你应该考虑使用[`mysql_insert_id()`](http://php.net/manual/en/function.mysql-insert-id.php)：

```
if($Results = mysqli_query($query))
{
    return mysqli_insert_id();
} 
```

但请注意，API 参考文档顶部的红色大框：

> 此扩展自 PHP 5.5.0 起已弃用，并将在未来删除。相反，应该使用[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO_MySQL扩展。](http://php.net/manual/en/ref.pdo-mysql.php)另请参阅[MySQL：选择 API](http://php.net/manual/en/mysqlinfo.api.choosing.php)指南和[相关的常见问题解答](http://php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)以获取更多信息。此功能的替代方案包括：
> 
> *   [`mysqli_insert_id()`](http://php.net/manual/en/mysqli.insert-id.php)
> *   [`PDO::lastInsertId()`](http://php.net/manual/en/pdo.lastinsertid.php)

我确实注意到您正在使用 MySQLi，但您正在运行标准的`mysql_query()`. 也许这是您的代码的错字，但我想我会提到它以防万一......

# c# - 为什么在将密封类转换为它可能实现的接口时会出现编译错误？

> ID：14578395
> 
> 赞同：10
> 
> 时间：2013-01-29T08:20:00.603
> 
> 标签：c#, generics, compiler-errors

以下代码给出了编译器错误 CS0030（使用 VS 2012 的 C# 编译器编译），尽管转换可能在运行时成功。删除`sealed`关键字、使用`as`强制转换或添加中间强制转换以`object`使错误消失。

```
 public interface IFunny<out T> { }

  public sealed class Funny<T> : IFunny<T>
  {
    public IFunny<TOther> Cast<TOther> ()
    {
      // error CS0030: Cannot convert type Funny<T>' to 'IFunny<TOther>'.
      return (IFunny<TOther>) this;
    }
  } 
```

在我看来，编译器仅对密封类使用启发式方法，这在通用接口实现的情况下过于严格。

它真的太严格（从错误的意义上说），还是这个错误有充分的理由？

**更新：**`TOther`澄清我的问题：编译器无法确定编译时和之间是否存在关系`T`。在运行时，如果`TOther`是相同的或者是 的基类，强制转换会成功，`T`并且在所有其他情况下都会失败。无论是否`Funny<T>`密封都是如此。

C# 编译器通常不会阻止可能在运行时成功的强制转换。（例如，我可以将静态类型的实例强制`object`转换为`IComparable`，如果该实例没有真正实现该接口，则会导致运行时异常。）为什么在这种`sealed`情况下会这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T08:27:32.913

由于它是`sealed`类，它不能被程序员继承。为了拥有转换对象的权限，您需要一个继承层次结构。

但是，在这种情况下，`sealed`关键字保证编译器在任何情况下`TOther`都不能是类型（即它不能被继承）。`T`因此错误。

删除`sealed`关键字会起作用，因为它创造了`TOther`可能是类型的机会`T`。因此错误消失了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T08:26:35.523

TOther 和 T 之间没有可以在编译时确定的关系。

所以基本上你会期望转换`IFunny<string>`为 a `IFunny<DataTable>`，例如，这是行不通的。

# email - 为什么在通过电子邮件发送错误更新时，Bugzilla 会排除受让人？

> ID：14578398
> 
> 赞同：0
> 
> 时间：2013-01-29T08:20:10.557
> 
> 标签：email, bugzilla

假设有一个由 member1 打开的 bug，分配给我，cced 给 member2。然后我在其中添加了一条评论，同时将受让人更改为 member2。Bugzilla 向 member1 发送了一封电子邮件，但表示将我和 member2 排除在外。我可以理解为什么它会排除我，但它为什么会排除 member2？受让人不应该知道他现在被分配了吗？这是 Bugzilla 中的错误吗？

这是使用 Bugzilla 4.2.4（最新稳定版）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:15:37.757

值得查看被排除的团队成员的电子邮件偏好。受让人何时收到电子邮件有很多选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:16:54.460

每个用户都可以设置自己的个人偏好。事实上，您可以更改您的，这样即使您自己的更改也会收到通知。

您不必担心谁会收到来自 Bugzilla 的电子邮件。可能有些收件人您不希望收到邮件，而您希望收到电子邮件的用户不是收件人。

当我是最大的 Bugzilla 实例之一的少数管理员之一时，我会收到要求 Bugzilla 不要向某些人发送电子邮件的请求，并且偶尔会强迫其他人接收电子邮件。我总是告诉这些人“不”，因为其他用户的电子邮件偏好不是他们可以决定的。

# c++ - 实现自定义 gtkmm 树模型

> ID：14578416
> 
> 赞同：0
> 
> 时间：2013-01-29T08:21:34.370
> 
> 标签：c++, gtkmm

我正在尝试在 gtkmm 中实现自定义树模式（这样做的原因是使用一些分页显示数据库中的行）。我已经实现了所有 vfunc 方法，但我仍然收到以下错误：

```
glibmm-CRITICAL **: Glib::Interface::Interface(const Glib::Interface_Class&): assertion `gobject_ != 0' failed

GLib-GObject-CRITICAL **: g_object_ref: assertion `G_IS_OBJECT (object)' failed 
```

在实例化我有以下代码：

```
ModelTracks::ModelTracks(Library* library_ptr)
        : Glib::ObjectBase(typeid(ModelTracks)),
          Gtk::TreeModel(),
        _library_ptr(library_ptr) {
    _sort_direction[0] = true;
    _sort_direction[1] = true;
    _sort_direction[2] = true;
    _sort_direction[3] = true;
    _sort_order[0] = 0;
    _sort_order[1] = 1;
    _sort_order[2] = 2;
    _sort_order[3] = 3;
} 
```

有人可以帮助我或有一个自定义 Gtk::TreeModel 的工作示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:34:47.913

尝试在 Gtk::TreeModel 之前初始化 Glib::Object。

```
ModelTracks::ModelTracks(Library* library_ptr) :
  Glib::ObjectBase(typeid(ModelTracks)),
  Glib::Object(),
  Gtk::TreeModel(),
  _library_ptr(library_ptr)
{
  _sort_direction[0] = true;
  _sort_direction[1] = true;
  _sort_direction[2] = true;
  _sort_direction[3] = true;
  _sort_order[0] = 0;
  _sort_order[1] = 1;
  _sort_order[2] = 2;
  _sort_order[3] = 3;
} 
```

# c# - 从 TreeView 保存到 XML

> ID：14578417
> 
> 赞同：0
> 
> 时间：2013-01-29T08:21:41.537
> 
> 标签：c#, wpf, xml, silverlight, treeview

我在保存我的数据时遇到问题`TreeView`。我用谷歌搜索了很多关于如何将数据保存到的主题`TreeView`，`XML`我看到了一些方法来做到这一点。但是他们都在使用`WindowsForms application`，没有人- `WPF`。我试图将这些示例转换为`WPF`，但其中没有一个不能正常工作。有什么办法可以做到吗？我尝试移植的一种方式：

```
 void SaveToXml(TreeView tw)
    {
        XmlDocument d = new XmlDocument();
        XmlNode n = d.CreateNode(XmlNodeType.Element, "root", "");
        foreach (TreeViewItem t in tw.Items)
        {
            n.AppendChild(getXmlNode(t, d));
        }
        d.AppendChild(n);
        d.Save(AppDomain.CurrentDomain.BaseDirectory + "out.xml");
    }
    private XmlNode getXmlNode(TreeViewItem tnode, XmlDocument d)
    {
        XmlNode n = d.CreateNode(XmlNodeType.Element, tnode.Name, " ");

        foreach (TreeViewItem t in tnode.Items)
        {
            n.AppendChild(getXmlNode(t, d));
        }
        return n;
    } 
```

它抛出`ArgumentException`“本地元素和属性的名称不能为空”。我正在尝试`D:\`使用代码在我的驱动器上保存有关文件的信息：

```
 private void ListDirectory(TreeView treeView, string path)
    {
        var rootDirectoryInfo = new DirectoryInfo(path);
        treeView.Items.Add(CreateDirectoryNode(rootDirectoryInfo));
    }

    private static TreeViewItem CreateDirectoryNode(DirectoryInfo directoryInfo)
    {
        var directoryNode = new TreeViewItem();
        directoryNode.Header = directoryInfo.Name;
        try
        {
            foreach (var directory in directoryInfo.GetDirectories())
                directoryNode.Items.Add(CreateDirectoryNode(directory));
            foreach (var file in directoryInfo.GetFiles())
                directoryNode.Items.Add(new TreeViewItem { Header = file.Name });
        }
        catch (UnauthorizedAccessException e)
        { }
        return directoryNode;
    } 
```

它工作正常，并`TreeView`显示所有文件夹和文件。请告诉我如何将数据保存`TreeView`到`XML`. 谢谢。

试过这个：

```
 public void exportToXml(TreeView tv, string filename)
    {
        sr = new StreamWriter(filename, false, System.Text.Encoding.UTF8);
        //Write the header
        sr.WriteLine("<?xml version=\"1.0\" encoding=\"utf-8\" ?>");
        //Write our root node
        sr.WriteLine("<ROOT>");
        foreach (TreeViewItem node in tv.Items)
        {
            saveNode(node.Items);
        }
        //Close the root node
        sr.WriteLine("</ROOT>");
        sr.Close();
    }

    private void saveNode(TreeViewItem[] tnc)
    {
        foreach (TreeViewItem node in tnc)
        {
            //If we have child nodes, we'll write 
            //a parent node, then iterrate through
            //the children
            if (node.Items.Count > 0)
            {
                sr.WriteLine("<" + node.Name + ">");
                saveNode(node.Items);
                sr.WriteLine("</" + node.Name + ">");
            }
            else //No child nodes, so we just write the text
                sr.WriteLine(node.Name);
        }
    } 
```

但是`saveNode(node.Items);`说`node.Items`and之间有不同的类型`TreeViewItem[]`，所以我尝试`List<TreeViewItem>`了，但是错误是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:49:26.067

恐怕这不是一个真正的答案，但您可以尝试替换此行：

```
saveNode(node.Items); 
```

有了这个：

```
saveNode(node.Items.OfType<TreeViewItem>().ToArray()); 
```

希望这会有所帮助，

* * *

从 xml 文档中获取缩进字符串的示例：

```
public static String ToString(XmlDocument doc)
{
    StringBuilder sb = new StringBuilder();
    XmlTextWriter mywriter = new XmlTextWriter(new StringWriter(sb));
    mywriter.Formatting = Formatting.Indented;
    doc.WriteTo( mywriter );
    mywriter.Flush();
    return(sb.ToString());
} 
```

# insert - DB2: Insert Query

> ID：14578427
> 
> 赞同：0
> 
> 时间：2013-01-29T08:22:33.360
> 
> 标签：insert, db2, multiple-insert

There is table from which I need to select some data based on date criteria which I can do after that need to insert the same data in the same table with the value of one of the columns which is also a key field needs to be changed before insertion.

The Columns of the table are like:

1st key, 2nd key, 3rd key, 4th column,.....26th column, row_update_time, last_upd_user_id, row_create_tm_, row_create_usid.

Now I need to retrieve the data which were updated after a certain date and then insert the same data in this table with a different 2nd key and row_update_time as current time.

I am able to select all the data based on the date criteria and it is retrieving nearly 300 rows. How can I insert with modification in a single shot?

Can any one please help me in this.?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:26:25.563

您的问题*非常*模糊，但是您可能正在寻找类似的东西：

```
insert into the_table (id, some_column, other_column)
select id * 2, some_column, 'foobar'
from the_table
where id = 1; 
```

如果这不是您要查找的内容，则需要***更加***具体（例如，使用表结构和数据的示例）。

# android - 模拟来自 onitemclick 的点击

> ID：14578429
> 
> 赞同：8
> 
> 时间：2013-01-29T08:22:39.820
> 
> 标签：android

我已经有一个`onitemclickListener`并且它有效，

```
list.setOnItemClickListener( new OnItemClickListener()
{
     public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3){
         ...
     }
}); 
```

但是，我需要从不同的按钮实现相同的功能。

如何引用`onitemclickListener`我的列表中已经存在的内容？

我不想复制所有代码并再次使用它，因为它大约有 500 行。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-03-31T15:01:20.540

有[performItemClick](http://developer.android.com/reference/android/widget/AbsListView.html#performItemClick%28android.view.View,%20int,%20long%29)可以做到这一点。

```
list.performItemClick(list.getChildAt(pos), pos, list.getItemIdAtPosition(pos)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T08:30:51.330

在单独的方法中重构您的代码，并从 bot 和 调用该`onItemClick`方法`onClick`。

如果您的代码需要所选项目，请将其作为参数从`onItemClick`. 在您的按钮`onClick`中，您必须查看[`ListView.getCheckedItemIds`](http://developer.android.com/reference/android/widget/AbsListView.html#getCheckedItemIds%28%29)，因为列表视图一次可以选择多个项目，并根据任何标准将您的逻辑应用于您想要的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:29:57.153

创建你自己的`OnItemClickListener`类，使用你已经编写的代码，并在你的调用中使用它`list.setOnItemClickListener(new myOnClickListener())`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T08:31:03.680

需要创建一个 OnItemClickListener 对象并在需要时使用它：

```
OnItemClickListener listener =  new OnItemClickListener(){
                 public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3)
                 {
                 ...
                 }
} 
```

每当您需要时：

```
list.setOnItemClickListener(listener); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T08:33:22.633

在布局 xml 中注册您的 onItemClickListener 并在您的活动中创建一个通用方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T08:41:07.583

我看到了两种解决方案，您可以编写一个通用函数并在单击任一按钮时调用此函数。另一种解决方案是在单击第二个按钮时查看第一个按钮，然后调用 performClick 函数。

```
public void Click2()
{
 Button b = (Button)findViewById(R.id.button1);

 b.performClick();

} 
```

# java - 异常处理恢复行为

> ID：14578432
> 
> 赞同：1
> 
> 时间：2013-01-29T08:22:47.933
> 
> 标签：java, exception, try-catch-finally

StackOverFlow 的新手，Java 的新手。在此之前一直在用 C 进行编程，并且正在尝试获得 Java 的基础。

只是对以下代码有点困惑：

```
public class Exercise5 {
private static int[] ia = new int[3];
static int x = 5;   
public static void main(String[] args) {
    while(true) {
        try {
            ia[x] = 1;
            System.out.println(ia[x]);
            break;  
        } catch(ArrayIndexOutOfBoundsException e) {
            System.err.println(
                "Caught ArrayIndexOutOfBoundsException");
                e.printStackTrace();
            x--;
        } finally {
            System.out.println("Are we done yet?");     
        }
    }
    System.out.println("Now, we're done.");
} 
```

}

我仍在努力解决 try、catch 和 finally 块的问题。我不明白的是，在这段代码中，程序只运行到第一个发生非异常的实例发生，然后退出 while 循环。

我的理解是，while 循环将一直运行，直到内存不足，所以有人可以解释一下代码如何在第一个非异常实例上退出 while 循环。

谢谢！

马可

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T08:27:30.297

首先，`x`is 等于 5，然后程序进入`while`循环。由于 5 大于数组的大小，它会给出异常并转到异常块。在这里，`x`将被减少并再次运行到`while`循环中。直到`x`达到2，不再有异常；因此，它可以到达`break`线。所以，程序可以退出`while`循环并完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:25:20.580

`try{}`

执行代码直到发生异常

`catch(ExceptionType e){}`

如果抛出的异常满足提到的异常类型，则以下块将与提供的异常一起执行，此处为`e`

`finally{}`

无论抛出什么异常都执行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:28:48.183

您创建了一个大小为 3 的数组，一个值为 5 的变量 x。因此，在第一次迭代中，您将看到`ArrayIndexOutOfBoundsException`，但在`catch`块`x`中递减。所以我们再去一次，现在`x`是 4，然后是 3，最后是 2。现在您将看不到任何异常并且程序已完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T08:29:27.777

首先**Try 将被执行，如果它毫无例外地被执行，那么它将在一次迭代中中断，最后将被执行**。

**如果发生异常，它将进入 catch 块，然后进入 finally**。

**它将根据上述给定的行为重申循环**..随时要求进一步澄清。

# c++ - 获取函数成员地址

> ID：14578435
> 
> 赞同：2
> 
> 时间：2013-01-29T08:23:11.643
> 
> 标签：c++, function, structure, member

有没有办法获得函数成员的确切地址？例如我有：

```
struct foo
{
    void print() { printf("bla bla bla"); }
};
//////////////////////////////////////////////////////////////
unsigned int address = foo::print; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:24:38.877

您可以使用以下语法来声明指向成员函数的指针：

```
typedef void (foo::*address)();
address func = &foo::print; 
```

为了调用非静态成员函数，您需要该类的现有实例：

```
(fooInstance.*func)(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T08:53:41.503

我不确定您所说的“确切地址”是什么意思。当然没有办法将任何地址放入`unsigned int` （小于我机器上的指针）中。就此而言，没有办法将指向函数的指针放在`void*`. 同样，我使用了指向函数的指针大于`void*`. 最后，没有办法将指向（非静态）成员函数的指针放入指向函数的指针中；指向成员函数的指针几乎总是更大。最后，给出：

```
void (MyClass::*pmf)();
MyClass* p;
(p->*pmf)(); 
```

可以调用不同的函数，具体取决于`p`.

所以根本不清楚你在问什么。

# iphone - MobileSMS 应用程序上出现空白短信

> ID：14578437
> 
> 赞同：0
> 
> 时间：2013-01-29T08:23:20.100
> 
> 标签：iphone, sms, jailbreak, iphone-privateapi

我正在为越狱设备构建，我想阻止传入的消息。

所以我屏蔽它并删除它，但是当我打开MobileSMS（“消息”）应用程序或biteSMS应用程序时，被屏蔽的消息是空的，但发件人仍然出现。

我怎样才能完全删除这条消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:45:30.250

尝试通过 'theos' 挂钩此功能。：

```
- (void)_ingestIncomingCTMessage:(id)arg1
-(void) _processReceivedMessageWithInfo:(struct __CFDictionary *)arg1
-(void)_receivedMessage:(CKSMSRecordRef)message replace:(BOOL)replace 
```

它们在 SMSCTServer 和 SMSService 中。试试吧~~

# javascript - Toggle a popup and toggle it when clicked outside

> ID：14578439
> 
> 赞同：3
> 
> 时间：2013-01-29T08:23:38.800
> 
> 标签：javascript, jquery, html, popup

I have a issue,

Im trying to make a popup toggle with `toggleClass`. However i also made a rule that i got from StackOverflow that makes the popup dissapear when clicked outside.

However when i click the button login it appears, but i cant make it dissapear with the login button anymore. But i have set the rule :

```
$('a#inloggen').click(function() {
    $('.inloggen').toggleClass('active');
}); 
```

However it seems like he is ignoring that...

Prehaps you guys can spot what the issue is that i can not see.

**HTML**

```
<div id="usermenu">
<div class="inloggen"><h2 class=" swe-editable" _sweid="17" _sweclass="nl swe swe-snippet swe-h2 ">
Inloggen</h2>

this is the popup!
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Wachtwoord vergeten? <a href="#">Klik hier</a>.</p></div>

</div>  
<ul class="menu">
  <li class="first"><a href="#" id="inloggen">login</a></li>
</ul> 
```

**jQuery**

```
$('a#inloggen').click(function() {
    $('.inloggen').toggleClass('active');
  });

  $(document).mouseup(function (e)
  {
      var container = $('.inloggen');

      if (container.has(e.target).length === 0)
      {
          container.removeClass('active');
      }

  });

  if ($('#project_user_loginform-name').hasClass('error') || $('#project_user_loginform-password').hasClass('error')) {
    $('.inloggen').addClass('active');
  }; 
```

* * *

**What have i tried?**
I tried to add a exception to the function that makes the div dissapear when clicked outside the div but this just seems to reverse the progress.

```
var container2 = $('a#inloggen');
if (container.has(e.target).length === 0 && container2.has(e.target).length !== 0) 
```

**UPDATE :**
I got a bit further in the progress and changed mouseup to mousedown and changed the order of the functions. This gives me a bit closer to the solution however its not working perfectly yet.

```
$(document).mousedown(function (e)
  {
      var container = $('.inloggen');

      if (container.has(e.target).length === 0)
      {
          container.removeClass('active');
      }

  });

  $('a#inloggen').click(function() {
    $('.inloggen').toggleClass('active');
  }); 
```

**Example**
[http://codepen.io/anon/pen/ghpwr](http://codepen.io/anon/pen/ghpwr)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:12:45.413

我相信完成您想要做的事情的更简单方法是创建一个可以切换弹出窗口的空白 div。基本上像弹出窗口一样隐藏它，当点击登录链接时，`<div class="mask"></div>`显示掩码 div，但在`z-index:-1;`. 这样页面上的链接仍然被识别为链接，但 div 仍然是可点击的。

这是代码的新版本，并实施了建议的更改：[链接](http://codepen.io/anon/pen/ycEpo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:30:32.953

似乎以下行打破了切换，尽管我不完全确定为什么。

```
if (container.has(e.target).length === 0) {
  container.removeClass('active');
} 
```

我的猜测是链接被认为是文档的一部分，因此当用户单击链接时，首先删除该类，然后切换，重新添加该类。

# r - Use a loop or a function to run a script over multiple files using R

> ID：14578456
> 
> 赞同：1
> 
> 时间：2013-01-29T08:24:42.763
> 
> 标签：r, file, function, loops

> **Possible Duplicate:**
> [Which is the best method to apply a script repetitively to n .csv files in R?](https://stackoverflow.com/questions/5799096/which-is-the-best-method-to-apply-a-script-repetitively-to-n-csv-files-in-r)

I have a script that calculates kernel utilization distributions and generates a PDF of the summary plots. My script currently split the database by each "period" and uses a for loop to generate the KUD plots. I also have multiple csv files store in a directory that correspond to individual fish. What I would like is to use a function or loop to read all the files in the directory and run the script that will generate PDF plots for each individual fish and each period.

My script looks like this:

```
library(ks)

dd<-read.table(text="period  dist   depth
            1   4916.64 8.661827
            1   4916.64 14.789091
            1   4916.64 13.555909
            1   4916.64 12.92816
            1   4916.64 11.708774
            1   4916.64 15.28
            1   4916.64 13.369875
            1   4916.64 14.039655
            1   4916.64 13.454545
            1   4916.64 12.638261
            1   4916.64 13.251081
            1   4916.64 14.006341
            1   4916.64 12.64
            1   4916.64 15.521818
            1   4916.64 10.202121
            1   4916.64 14.816667
            1   4916.64 15.504
            1   9674.844    23.93
            1   11000.151   22.157143
            1   11414.31    22.72
            1   11414.31    25.7
            1   11414.31    19.07
            1   11414.31    23.085714
            1   9481.57 17.266667
            1   11414.31    26.8
            1   11414.31    19.382222
            1   5616.09 12.016667
            1   10658.02    18.873913
            1   11414.31    25.2
            1   11414.31    20.9
            1   11414.31    27.65
            1   11414.31    22.133333
            1   11414.31    30.9
            1   5616.09 23.3
            2   11172.718   20.391667
            2   9964.755    23.51
            2   5616.09 19.43
            2   5616.09 19.1
            2   4916.64 18.42
            2   8515.2  17.683333
            2   11414.31    22.128571
            2   11414.31    22.8608
            2   10391.095   24.955882
            2   10931.125   25.225
            2   6444.407    20.228571
            2   11276.257   23.77619
            2   10585.993   23.285714
            2   10641.214   20.653333
            2   9757.676    24.007143
            2   11414.31    18.817
            2   11414.31    23.525
            2   11414.31    22.873684
            2   11414.31    26.15
            2   10486.595   21.9
            2   11000.151   24.142857
            2   11414.31    24.3875
            2   10819.621   20.569231
            2   10360.088   29.345455
            2   9708.951    21.488235
            2   11414.31    30.775
            2   11414.31    25.5
            2   11414.31    18.477917
            2   10327.144   26.8625
            2   11414.31    26.12963
            2   11414.31    29.28125
            2   11414.31    23.166667
            2   10689.532   21.8625
            2   11414.31    28.328571
            2   11414.31    22.563158
            2   11414.31    25.490909
            2   11414.31    26.0625
            2   11414.31    34.5
            2   11414.31    17.375294
            ",header=T) 
```

* * *

```
dd1<-data.frame(dd$period,dd$dist,dd$depth)

# split database for each period
period<-dd1$dd.period
M<-split(dd1,period)
l<-length(M)

# run loop through each tag and create a PDF file with all KUD plots
pdf("KUD plot.pdf",width=11,height=8,paper="a4r")
par(mfcol=c(1,1))

for(j in 1:l){

# calculate the 2D kernel
dd2<-data.frame(M[[j]]$dd.dist,M[[j]]$dd.depth)

## auto bandwidth selection
H.pi2<-Hpi(dd2,binned=TRUE)*1
ddhat<-kde(dd2,H=H.pi2)

# Kernel contour plot
plot(ddhat,cont=c(95),drawpoints=TRUE,col="black",xlab="Distance (m)",lwd=2.5, 
    ylab="Depth (m)",ptcol="grey15",cex=0.7,
    xlim=c(min(dd2[,1]-dd2[,1]*0.4),max(dd2[,1]+dd2[,1]*0.4)),ylim=c(45,-1),
    main=paste("Period"," - ",M[[j]]$dd.period[1])) 

plot(ddhat,cont=c(25),add=TRUE,col="red",lwd=2.4)
plot(ddhat,cont=c(50),add=TRUE,col="seagreen2",lwd=2.4)
plot(ddhat,cont=c(75),add=TRUE,col="royalblue",lty=5,lwd=2.5)  

}

dev.off() 
```

Any suggestions or ideas of how to improve the script will be appreciated. Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:06:40.590

@RomanLustrik 链接的答案不包含`apply`基于解决方案的解决方案，因此我将在这里介绍一个。您可能想要的功能`d*ply`来自`plyr`包。`plyr`做所有`splitting`- `applying a function to each split`- `and combining it back together again`。例如，要获得每个周期的平均深度：

```
library(plyr)
ddply(dd, .(period), summarise, mn = mean(depth)) 
```

您可以使用相同的想法来执行分析：

```
res = dlply(dd, .(period), function(x) {
   dd2 = x[-1]
   H.pi2<-Hpi(dd2,binned=TRUE)*1
   ddhat<-kde(dd2,H=H.pi2)
 }) 
```

其中`res`是包含分析结果的长度为 2 的列表。您可以使用类似的方法从 中提取信息`res`并绘制它。我会用`ggplot2`它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:06:54.997

简化代码的一种方法是将`for`循环替换为`ddply`对`plyr`包的调用。例如 ：

```
library(plyr)

pdf("test.pdf",width=11,height=8,paper="a4r")
invisible(ddply(dd1, .(period), function(df) {
  period <- df$dd.period[1]
  df <- df[,-1]
  ## auto bandwidth selection
  H.pi2<-Hpi(df,binned=TRUE)*1
  ddhat<-kde(df,H=H.pi2)

  ## Kernel contour plot
  plot(ddhat,cont=c(95),drawpoints=TRUE,col="black",xlab="Distance (m)",lwd=2.5, 
       ylab="Depth (m)",ptcol="grey15",cex=0.7,
       xlim=c(min(df$dd.dist-df$dd.dist*0.4),max(df$dd.dist+df$dd.dist*0.4)),ylim=c(45,-1),
       main=paste("Period"," - ",period)) 

  plot(ddhat,cont=c(25),add=TRUE,col="red",lwd=2.4)
  plot(ddhat,cont=c(50),add=TRUE,col="seagreen2",lwd=2.4)
  plot(ddhat,cont=c(75),add=TRUE,col="royalblue",lty=5,lwd=2.5)  

}))
dev.off() 
```

然后，您可以将此代码包装到您自己的函数中，并将数据框和 pdf 文件名作为参数：

```
pdfks <- function(dd1, filename) {
  pdf(filename, width=11, height=8, paper="a4r")
  ...
  dev.off()
} 
```

然后，您可以创建一个循环，依次加载每个 csv 文件并将此函数应用于每个文件。

# javascript - 在 javascript 中使用 angular.js 的数据绑定/或在事件中更新 javascript 变量

> ID：14578458
> 
> 赞同：0
> 
> 时间：2013-01-29T08:24:46.547
> 
> 标签：javascript, html, drop-down-menu, angularjs

我刚开始用`angular.js`，挺好用的。我用错误的关键字搜索了很多，但我无法找到如何`angular.js`在 javascipt 中使用 's Data Binding。

这是问题的示例：

```
<form><select ng-model="frfiSzam" id="frfi-szam">
      <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option> <option>11</option><option>12</option><option>13</option><option>14</option><option>15</option>
    </select></form>

    <div class="leir">

     <p class="fejl">{{frfiSzam}} férfi résztvevő</p>

     <script type="text/javascript"> 

    var x= '{{frfiSzam}}'
    var char = '';
    while (x--) {
        char += 'Hi!';
    }
    // write once
    document.write(char);

     </script> 
```

所以事情正在工作（第一部分），除了这个`var x= '{{frfiSzam}}'`。如果我将其设置为常量，则代码工作正常，所以我认为我需要`x`在下拉值更改时更新我的​​变量，但我不知道该怎么做才能使代码正常工作。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:45:19.253

您正在寻找手表：http: [//jsfiddle.net/6QG9r/](http://jsfiddle.net/6QG9r/)

```
$scope.$watch('number', function(newValue, oldValue) {
    //this callback function gets executed whenever 'number' changes
    var x = newValue;
    $scope.hi = "";
    while (x--) {
        $scope.hi += "Hi! ";
    }
}); 
```

# javascript - 根据选择的选项生成图表

> ID：14578463
> 
> 赞同：0
> 
> 时间：2013-01-29T08:25:01.740
> 
> 标签：javascript, jquery, html

我有一个带有选择框的 html 页面。I code it in a Jquery file so that when when the selection selected is "football" then it will compare a json data in Jquery and generate the chart. 但是，如果我选择“电影”，它会显示一个错误。

But I couldn't make it response when the selection changes.

这是我的 html 代码：

```
<title>Pie chart</title>
    <style type="text/css">
        .style1
        {
            text-align: center;
        }
    </style>
</head>
<body>

<p class="style1">
        Select your category :
        <select id="selection" name="D1" onclick="return selection_onclick()">
            <option value ="football" selected =selected>Football Team</option>
            <option value ="Movie">Movie</option>
        </select></p>
<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto">
    <br />
    </div>
</body> 
```

这是我嵌入了 json 的 Jquery 文件：

```
$(function () {
    var json = {
        "data": [
                     {
                         "cid": "football",
                         "id": "/en/chelsea_fc",
                         "topic": "Chelsea F.C.",
                         "audience": [
                             {
                                 "userid": "100003914111287",
                                 "information": [
                                     {
                                         "category": "Athlete",
                                         "source": "Didier Drogba"
                                     },
                                     {
                                         "category": "Athlete",
                                         "source": "Frank Lampard"
                                     },
                                     {
                                         "category": "Professional sports team",
                                         "source": "Chelsea Football Club"
                                     },
                                     {
                                         "category": "favorite_teams",
                                         "source": "Chelsea Football Club"
                                     }
                                 ]
                             },
                             {
                                 "userid": "100003914111287",
                                 "information": [
                                     {
                                         "category": "Athlete",
                                         "source": "Didier Drogba"
                                     },
                                     {
                                         "category": "Athlete",
                                         "source": "Frank Lampard"
                                     },
                                     {
                                         "category": "Professional sports team",
                                         "source": "Chelsea Football Club"
                                     },
                                     {
                                         "category": "favorite_teams",
                                         "source": "Chelsea Football Club"
                                     }
                                 ]
                             }
                         ],
                         "type": "/soccer/football_team"
                     },
                     {
                         "id": "/en/manchester_united_fc",
                         "topic": "Manchester United F.C.",
                         "audience": [
                             {
                                 "information": [
                                     {
                                         "category": "Athlete",
                                         "source": "Ryan Giggs"
                                     },
                                     {
                                         "category": "Professional sports team",
                                         "source": "Manchester United"
                                     },
                                     {
                                         "category": "favorite_teams",
                                         "source": "Manchester United"
                                     }
                                 ],
                                 "userid": "100003921730958"
                             }
                         ],
                         "type": "/soccer/football_team"
                     }
                 ]
    }; 
```

接下来这是我生成图表的方式：

```
 $("#selection").on('change', function(){
   // var e = document.getElementById("selection");
        var id =$(this).val();
        if(id = json.data[0].cid) {
        console.log(id)
        $.each(json.data, function (i, v) {
        pts.push([v.topic, v.audience.length]);
        });
        }

        else
        alert("Wrong data");

    //Radialize the colors
    Highcharts.getOptions().colors = $.map(Highcharts.getOptions().colors, function (color) {
        return {
            radialGradient: { cx: 0.5, cy: 0.3, r: 0.7 },
            stops: [
            [0, color],
            [1, Highcharts.Color(color).brighten(-0.3).get('rgb')] // darken
    ]
        };
    });

    var chart;
    $(document).ready(function () {

        /*var e = document.getElementById("selection");
        var id = e.options[e.selectedIndex].value;
        console.log(id);

        if (id = json.data[0].cid) {

        $.each(json.data, function (i, v) {
        pts.push([v.topic, v.audience.length]);*/
            chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'container',
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false
                },
                title: {
                    text: 'Facebook like'
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.percentage}%</b>',
                    percentageDecimals: 0
                }

            ,
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        point: {
                            events: {
                                click: function (event) {
                                    //var personame =" ";
                                    var id = "10150616324193820";
                                    for (var i = 0; i < jsonFB.user1.length; i++) {
                                        for (var k = 0; k < json.data.length; k++) {
                                            for (var j = 0; j < json.data[k].audience.length; j++) {

                                                if (jsonFB.user1[i].id = json.data[k].audience[j].userid) {
                                                    var personname = jsonFB.user1[i].name;

                                                    var id = jsonFB.user1[i].id;

                                                }

                                                else {

                                                    alert("Error!");

                                                }

                                            }

                                        }

                                        alert("Person who like " + this.name + " are " + personname);
                                        var ans = confirm("Do you want to view this person profile?");
                                        if (ans)
                                            window.location = "http://www.facebook.com/people/@/" + id;

                                    }
                                }
                            }
                        },
                        showInLegend: true,
                        dataLabels: {
                            enabled: true,
                            color: '#000000',
                            connectorColor: '#000000',

                            formatter: function () {
                                return '<b>' + this.point.name + '</b>: ' + Math.round(this.percentage) + '%';
                            }

                        }
                    }
                },

                series: [{
                    type: 'pie',
                    name: 'Likes',
                    data: pts

                }]
            });

    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:48:32.737

*onclick*不是您感兴趣的事件。您必须使用*onchange*代替：

```
<select id="selection" name="D1" onchange="selection_onclick()">
    <option value ="football" selected =selected>Football Team</option>
    <option value ="Movie">Movie</option>
</select></p> 
```

希望能帮助到你，

# php - 将 SplFileInfo 转换为字符串

> ID：14578468
> 
> 赞同：2
> 
> 时间：2013-01-29T08:25:18.790
> 
> 标签：php, class, object

我正在使用 DirectoryIterator 来获取文件夹的内容，它工作得很好：

```
$iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator(__DIR__ . $this->certificate), RecursiveIteratorIterator::SELF_FIRST);

foreach ($iterator as $key => $value) {
    array_push($files, $value);
}
unset($value); 
```

但是我`$files`打印出来的结果不是字符串，而是 STD 类。如何将该输出转换为字符串（如果只有一个文件）或数组？

**编辑：**这将是我得到的结果：

```
{ [0]=> object(SplFileInfo)#5 (2) { ["pathName":"SplFileInfo":private]=> string(101) "C:\Users\rgr\Apache\htdocs\Roland Groza [ 3.0 ]\class\mongohq/certificate\GTECyberTrustGlobalRoot.crt" ["fileName":"SplFileInfo":private]=> string(27) "GTECyberTrustGlobalRoot.crt" } } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T08:36:29.527

`$value`是[SplFileInfo](http://php.net/manual/en/class.splfileinfo.php)的实例，如果您需要文件名推送`$key`或`$value->__toString()``$files`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T08:28:32.593

使用此函数将 std 类对象转换为数组

```
 function objectToArray($d) {
    if (is_object($d)) {
        // Gets the properties of the given object
        // with get_object_vars function
        $d = get_object_vars($d);
    }

    if (is_array($d)) {
        /*
        * Return array converted to object
        * Using __FUNCTION__ (Magic constant)
        * for recursive call
        */
        return array_map(__FUNCTION__, $d);
    }
    else {
        // Return array
        return $d;
    }
}

 $arr = objectToArray(files);
 print_r($arr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T08:30:50.823

好吧，`$files`在您的示例中似乎是一个数组。您正在将价值观推向它。

至于将 a 转换`stdClass`为数组，您可以通过强制转换来转换它：

```
$obj = new stdClass;
$arr = (array) $obj; 
```

你也可以反过来做：

```
$arr = array();
$obj = (object) $arr; 
```

如果你想要一个对象或数组中的字符串，那么你需要取消引用它：

```
$str = $arr['key'];
$str = $obj->property; 
```

这是回答你的问题还是我误解了你？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T08:31:00.003

最简单的方法是[类型转换](http://php.net/manual/de/language.types.type-juggling.php#language.types.typecasting)（更具体的[数组转换](http://php.net/manual/de/language.types.array.php#language.types.array.casting)）：

```
$foo = new stdClass();
$foo->bar = 'baz';
$foo->boo = 'far';
$arr = (array)$foo;
var_dump($arr);
/*
array(2) {
  ["bar"]=>
  string(3) "baz"
  ["boo"]=>
  string(3) "far"
}
*/ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T08:32:45.000

你可以简单地使用

```
array_push((array)$files, $value); 
```

但是如果 $files 有多个 std 类，建议使用 Yogesh。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-29T08:39:47.040

您可以使用`iterator_to_array()`与`array_keys()`.

```
print_r(array_keys(iterator_to_array($iterator))); 
```

默认情况下，标志`RecursiveDirectoryIterator`是：

```
FilesystemIterator::KEY_AS_PATHNAME
FilesystemIterator::CURRENT_AS_FILEINFO 
```

它使用当前文件名作为迭代器键和一个实例`SplFileInfo`作为迭代器值。

# azure - 在 Azure 的 VM 中，并发处理

> ID：14578471
> 
> 赞同：0
> 
> 时间：2013-01-29T08:25:31.810
> 
> 标签：azure, concurrency, azure-virtual-machine

在 Microsoft Azure 的 VM 中，我想要这个实验。

步骤 1\. 创建两个 VM。（很容易......）第 2 步。我想要在两个创建的 VM 上进行一项工作的“并发处理”（想知道..这是可能的或不可能的。）

在这个实验中，我想知道 Microsoft Azure 的 VM 中的并发处理是可能的。并且...如果可以进行并发处理，我想知道在两个 VM 之间正确完成的正确工作。

（对不起......我的英语不熟练......'一个适当的工作'是在两个VM中完成的事情）（我对“一个工作”没有很好的想法。请告知你对“适当的工作”的想法工作”）

我对虚拟机感兴趣。

但是这个实验只是在两个虚拟机中完成，我有一个梦想，在许多虚拟机中进行大量工作（非常大......）的并发处理将产生有效的结果（时间，速度，精确）

所以，我想回答我的问题 1。并发处理是可能的吗？不可能的？2.正确的工作 3.尝试这个实验的方法。

1.  和.. ETC（有用的网站 URL .....）

请 ！

whdahek@naver.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:08:12.187

首先，根据我从您的问题中了解到的情况，这里的并发上下文几乎没有误导性。

的上下文`concurrency`取决于应用程序的类型。

*   对于像`Web Application`您这样的应用程序，将在`Load-Balancer`. 这确保`high availability`了`high throughput`您的整个架构。该应用程序将通过负载平衡器访问，`URL`或者`IP`在后台，其中一个 Web 服务器将响应。

*   对于类似的应用程序`MAP-REDUCE`，两台或更多台机器将同时工作以处理或处理由一`MASTER`台机器引导的任务。

**谈到你的问题，关于它在 Azure 中的可能性......**

是的，以上两种都是可能的。Azure 虚拟机与上述场景的可能性无关，它纯粹与您如何管理和构建应用程序有关。

# vba - 根据单元格内容复制到各个列

> ID：14578474
> 
> 赞同：0
> 
> 时间：2013-01-29T08:25:37.973
> 
> 标签：vba, excel

我是 VBA 新手，我需要创建宏，它会在 A 列中找到包含“测试”、“数据”或“新”的所有单元格，并将所有这些单元格复制到 B 列，从 B2 开始，所有其他单元格应从 C2 开始复制到 C 列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:39:22.997

了解您已经接受了答案，但是如果您要进行大量此类过滤，那么迭代单元格可能会对性能产生负面影响。**尝试一个`array`**. 还可以使用**`LIKE`**运算符来比较值，这是完美的`wildcard operator`。将以下代码添加到 VBA 项目模块中。在工作表中添加一个按钮并通过调用子程序`button click event`。

```
Option Explicit

Sub filterSpecifics()
Dim rng As Range
Dim lastRow As Long
Dim vArray As Variant
Dim i As Integer

    lastRow = Sheets(3).Cells(Rows.Count, "A").End(xlUp).Row
    Set rng = Sheets(3).Range("A1").Resize(lastRow)
    vArray = WorksheetFunction.Transpose(rng.Value)

    For i = LBound(vArray) To UBound(vArray)
        If Not IsEmpty(vArray(i)) Then
            If Not vArray(i) Like "test*" And _ 
                 Not vArray(i) Like "data*" And Not vArray(i) Like "new*" Then
                vArray(i) = ""  '-- remove the value
            End If
        End If
    Next i

    '-- output the array to the column B
    rng.Offset(0, 1).Resize(UBound(vArray)) = Application.Transpose(vArray)
End Sub 
```

**输出：**

![在此处输入图像描述](../Images/577276c41eeb5784c0e8247f754533da.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:49:41.370

打开您的 VBA 编辑器并将以下代码粘贴到 Sheet1 中（在 Microsoft Excel 对象下）：

```
Option Explicit

Sub MyMacro()
Dim iLastRow As Long 
Dim i As Long 
Dim sVal As String

iLastRow = range("A65536").End(xlUp).Row 'get last row in use

For i = 2 To iLastRow 'iterate trough rows from second to last in use
    sVal = range("A" & i).Value
    If sVal = "test" Or sVal = "data" Or sVal = "new" Then
        range("B" & i).Value = sVal
    Else
        If sVal <> "" Then range("C" & i).Value = sVal
    End If

Next i 
End Sub 
```

确保将鼠标指针设置在过程中的某处，`MyMacro`然后按 F5 以执行代码。它应该能做到你所要求的魔法:-)

# java - INSERT sql 语句结合 SELECT 和 WHERE

> ID：14578475
> 
> 赞同：2
> 
> 时间：2013-01-29T08:25:41.143
> 
> 标签：java, sql, ms-access-2010

我正在尝试将这些值插入数据库，但是，INSERT 和 WHILE 子句彼此不兼容。有没有人知道如何以不同的方式实现我想要的结果。

```
public boolean updateAns()
{
    boolean success=true;
    DBController db=new DBController();
    db.setUp("IT Innovation Project");
    String sql="INSERT INTO kioskSurveyAns(survey_qn1,survey_qn2,survey_qn3) VALUES('"+radioText+"','"+radioText1+"','"+radioText2+"')SELECT survey_qn1,survey_qn2,survey3 FROM kioskSurveyAns WHERE survey_nric='"+nric+"'";

    if (db.updateRequest(sql) == 1)
    success = true;
    db.terminate();
    return success;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T08:27:29.910

如果您正在使用`INSERT INTO...SELECT`语句，则其上不应有`VALUES`关键字，因为将插入的值来自该`SELECT`语句。例如

```
INSERT INTO tableName (col1, col2)
SELECT col1, col2
FROM tableX
WHERE.... 
```

但回顾您的查询，您希望根据控件的值**更新**行。正确的？

```
UPDATE kioskSurveyAns
SET    survey_qn1 = 'rad1',
       survey_qn2 = 'rad2',
       survey_qn3 = 'rad3'
WHERE  survey_nric= = 'richere' 
```

作为旁注，该语句很容易受到`SQL Injection`. 请使用参数化您的查询`PreparedStatements`

*   [准备好的语句](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)

# vba - 有什么方法可以获取“您在 [xxx] 上回复此消息”的日期时间吗？

> ID：14578476
> 
> 赞同：1
> 
> 时间：2013-01-29T08:25:47.183
> 
> 标签：vba, outlook

我正在尝试将电子邮件从 Outlook 导出到 excel 宏，其中包括收件人、电子邮件主题，最重要的是电子邮件回复的日期时间。我尝试搜索邮件项目属性列表。

此外，我似乎无法在**“您在 [xxx] 回复此消息”上**`.LastModificationTime`找到更接近确切日期时间的任何属性

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:13:08.910

您需要 PR_LAST_VERB_EXECUTION_TIME（DASL 名称为`http://schemas.microsoft.com/mapi/proptag/0x10820040`），可以使用`MailItem.PropertyAccessor`. [使用OutlookSpy](http://www.dimastr.com/outspy)
（单击 IMessage 按钮）查看 消息以查看可用属性。**

# aero - 如何检测航空基本主题

> ID：14578482
> 
> 赞同：1
> 
> 时间：2013-01-29T08:26:09.467
> 
> 标签：aero, aero-glass, dwm

我可以拥有 Windows 7 主题（标题栏中的透明度）和 Windows 7 基本主题（无透明度）。我怎样才能区分它们？是否有任何 API 可以告诉我是否启用了玻璃效果。我目前正在使用`DwmIsCompositionEnabled()`，但当我的主题是 Windows 7 Basic 时它返回 false。

# flash - 发布时闪烁不适用于翻转

> ID：14578486
> 
> 赞同：1
> 
> 时间：2013-01-29T08:26:24.133
> 
> 标签：flash, actionscript-2

我被困在我制作的翻转效果的电影剪辑上，然后将链接放在这个电影剪辑中，现在问题是 onrollover 工作但在发布时没有任何解决方案？

代码 m 使用

```
on(release){
getURL("name.html")
} 
```

示例文件链接

[http://escribir.biz/nb1/sample.fla](http://escribir.biz/nb1/sample.fla)

[http://escribir.biz/nb1/sample.swf](http://escribir.biz/nb1/sample.swf)

主盒子有翻转和滚动效果，链接在这部电影的第 2 层和第 1 层的盒子在实际电影中有很多这样的盒子有链接，但是当翻转工作时，发布时链接不起作用

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:21:29.083

第一次尝试为您的电影剪辑创建一个简单的类并将您的控件放在那里。

例如：

```
class YourMovieClipClassName extends MovieClip
{
    function YourMovieClipClassName() { super(); }
    function onLoad()
    {
        this.ControlMyMC();
    }
    function ControlMyMC()
    {
        this.onRollOver = function()
        {
            //Do on some
        }
        this.onRollOut = function()
        {
            //Do on some
        }
        this.onPress = function()
        {
            //Do on some
        }
        this.onRelease = function()
        {
            this.getURL("name.html");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T01:29:10.237

1.  创建一个 MovieClip 并将其命名为“button1”
2.  复制该 MovieClip 尽可能多的按钮，并将名称命名为“button2”“button3”等
3.  创建另一个 MovieClip 并将其命名为“main”，将其放入您的第 1 层，并将“Main”添加为 instanceName
4.  在“Main”MovieClip 中添加两个按钮，并分别添加“Button1”和“Button2”作为 Instancename
5.  为主影片剪辑创建一个类文件
6.  将以下代码复制粘贴为类

或者下载examples.zip来查看[http://www.comvos.net/downloads/examples.zip](http://www.comvos.net/downloads/examples.zip)

```
 class main extends MovieClip
    {
        function main() { super(); }
        function onLoad()
        {
            this.ControlMyMC();
        }
        function ControlMyMC()
        {
            //Turn OFF the HandCursor of Main MC
            this.useHandCursor = false;

            this.onRollOver = function()
            {
                this["AnimatedBG"].gotoAndPlay(2);
                trace("RollOver Main MC");
            }

            this.onRollOut = function()
            {
                this["AnimatedBG"].gotoAndPlay(21);
                trace("RollOut Main MC");
            }

            var ButtonInstanceNames:Array = [
                                    "Button1",
                                    "Button2"
                                    ];

            for(var i:Number = 0; i < ButtonInstanceNames.length; i++)
            {

                this[ButtonInstanceNames[i]].onEnterFrame = function()
                {
                    if (this.hitTest(_root._xmouse, _root._ymouse, true))
                    {
                        //ROLL OVER BUTTON
                        if (!this.isRollOver) 
                        { 
                            this.isRollOver = true; 
                            trace("RollOver " + _name);
                        }
                    }
                    else
                    {
                        //ROLL OUT BUTTON
                        if (this.isRollOver) 
                        { 
                            this.isRollOver = false; 
                            trace("RollOut " + _name);
                        }
                    }
                }

                //ON RELEASE ---(if you want to use onPress .... just replace the onMouseUp wit onMouseDown
                this[ButtonInstanceNames[i]].onMouseUp = function()
                {
                    if (this.hitTest(_root._xmouse, _root._ymouse, true))
                    {
                        switch (_name)
                        {
                            case "Button1": trace("You Clicked on Button 1 ... replace me with --->   this.getURL(\"page1.html\");"); break;
                            case "Button2": trace("You Clicked on Button 2 ... replace me with --->   this.getURL(\"page2.html\");"); break;

                            //example
                            case "Button3": this.getURL("name.html"); break;
                            default: trace("aa"); break;
                        }
                    }
                }               
            }
        }
    } 
```

# android - 在 ViewPagers 上加载活动

> ID：14578501
> 
> 赞同：1
> 
> 时间：2013-01-29T08:27:26.287
> 
> 标签：android, android-viewpager

我想在浏览器上加载我的活动。在我添加浏览器之前，我有一个按钮，它将我发送到一个活动。在那个活动中，我做了很多事情，比如从数据库加载和计算一些值。现在我添加了一个 ViewPager，所以当我按下按钮时，它会打开一个寻呼机 xml，并在每个选项卡上加载我想要加载的活动的 xml。但我不知道如何将实际活动加载到 Viewpager 中。现在 ViewPager 只显示我的活动 xml，但它们什么都不做，也没有值加载到其中。这是我的一些代码：

```
 MyFragmentPagerAdapter mPagerAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_fuel_pager);

        MyFragmentFuel mFragmentFuel = new MyFragmentFuel();
        MyFragmentDetails mFragmentDetails = new MyFragmentDetails();
        MyFragmentGraphs mFragmentGraphs = new MyFragmentGraphs();

        mPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());
        mPagerAdapter.addFragment(mFragmentFuel);
        mPagerAdapter.addFragment(mFragmentDetails);
       // mPagerAdapter.addFragment(mFragmentGraphs);

        ViewPager mViewPager = (ViewPager) super.findViewById(R.id.pager);
        mViewPager.setAdapter(this.mPagerAdapter);
        mViewPager.setOffscreenPageLimit(2);
        mViewPager.setCurrentItem(0);
    }
}

public class MyFragmentDetails extends Fragment{
    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.activity_add_fuel_details, container, false);
        return v;
    }
} 
```

# jquery - Jquery滚动，如何添加偏移量？

> ID：14578507
> 
> 赞同：0
> 
> 时间：2013-01-29T08:27:33.847
> 
> 标签：jquery, scroll

有我的js代码。这是页面滚动脚本。我需要做的是在开始时进行**偏移（78px）**并将`active`类设置为元素（主页 - 第一个菜单项）（直到我使用这个脚本）。你可以在[这个网站](http://lebsajt.pl/specify)上查看。

```
$(document).ready(function(){

    $('a').click(function(event) {
        event.preventDefault();

        var full_url = this.href;

        var parts = full_url.split('#');
        var trgt = parts[1];

        var target_offset = $('#'+trgt).offset();
        var target_top = target_offset.top;

        $('html, body').animate({scrollTop:target_top}, 500);

    });

    $('nav .menu li a').click(function(){
         $('nav .menu li a').removeClass('active');
         $(this).addClass('active');
    });

}); 
```

有任何想法吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:02:33.697

只需将`id`属性添加到`a`元素。

**HTML**

```
<li><a href="#section-splash" alt="" title="" id="home">home</a></li> 
```

然后使用jQuery添加类。

**jQuery**

```
$("#home").addClass('active'); 
```

[**现场演示**](http://jsfiddle.net/BygBR/)

# javascript - Amazon S3 upload via Iframes

> ID：14578512
> 
> 赞同：22
> 
> 时间：2013-01-29T08:27:50.243
> 
> 标签：javascript, iframe, upload, amazon-s3

Sigh, we're back to this. I can easily enough use CORS on any decent enough browser to directly upload files to my AWS S3 bucket. But (it was coming), with IE I have to fall back to Iframes. Easy, set up a hidden Iframe, create a form, set its target to Iframe name/id, submit form. If the upload is successful, the Iframe is redirected to a url I specify and I can access the whatever I need to. But if an error occurs, since the Iframe is now on an AWS domain, I won't have access to the XML content of the error. Infact, I won't even know that an error has occurred.

I've seen brave people on the internet talking about hosting an html file, on the same bucket to which files are to be uploaded, and then using postMessages to route the Iframe content, or something of that sort.

Could someone please explain to me how to achieve this mythical solution? The jQuery file uploader by Blueimp seems to solve this, but by God the code is so jQueryified that I haven't been able to get the gist of it.

## Editing for clarity

1.  IE<10 does not have a FileReader API.
2.  Because of 1, I cannot use an XDomainRequest to send a file to S3
3.  So use an Iframe and post that along with a complete form to S3
4.  If successful, AWS redirects to a page on server, which reads the headers and
    then returns a JSONP style response that can be read by scripts on client (redirect page can
    be specified by me).
5.  If on error, all I can do right now is wait for a timeout to expire and then console log
    an IFRAME ID, and popup an alert so that the user can then query for the the iframe by ID,
    read the DAMN XML content, figure out the AWS specified error, and then retry (I'm being sarcastic..)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-02T09:11:33.307

Almost everything you need to know about how the jQuery File Upload plugin does iframe uploads is in its [Iframe Transport plugin](https://github.com/blueimp/jQuery-File-Upload/blob/master/js/jquery.iframe-transport.js) (along with supporting [result.html](https://github.com/blueimp/jQuery-File-Upload/blob/master/cors/result.html) page).

As an introduction, you may want to read their user instructions on their [Cross domain uploads](https://github.com/blueimp/jQuery-File-Upload/wiki/Cross-domain-uploads) wiki page, specifically the **Cross-site iframe transport uploads** section. (Note that according to their [Browser support](https://github.com/blueimp/jQuery-File-Upload/wiki/Browser-support) page, niceties like upload progress are not supported for IE <10, so I wouldn't consider these possible using the iframe transport, at least without significant effort.)

(Also, I don't believe any S3 upload implementation using the File Upload plugin has access to the XML content of a file upload error)

The Iframe Transport plugin adds a new Ajax "transport" method for jQuery and is not specific to the File Upload plugin. You may want to read the documentation for [jQuery.ajaxTransport()](http://api.jquery.com/jQuery.ajaxTransport/) to understand the API that jQuery provides for adding a new transport.

* * *

I'll try to summarize what the Iframe Transport plugin is doing, and how it relates to uploading files to Amazon S3:

1.  When a file upload is triggered, the `send()` function is called. This function:

    *   Creates a hidden form element

    *   Creates an iframe element with `src="javascript:false;"`, and binds a `load` event handler to the iframe

    *   Appends the iframe to the hidden form, and appends the hidden form to the document.

2.  When the iframe is created and its "page" loaded, its `load` event handler is called. The handler:

    *   Clears itself from the iframe, and binds another `load` event handler

    *   Configures the hidden form:

        *   The form's `action` will be the URL for the S3 bucket

        *   The form's `target` is set to the iframe, so that the server response is loaded in the iframe

        *   Other fields, e.g. `AWSAccessKeyId`, are added. Specifically, `success_action_redirect` is set to the URL of [result.html](https://github.com/blueimp/jQuery-File-Upload/blob/master/cors/result.html) on your server, e.g. `http://example.org/result.html?%s`.

            Normally, the `%s` token should be replaced with the upload results by server-side code, but with S3 this can be hard-coded with a success value by your code, since Amazon will redirect to this URL only if the upload succeeded.

        *   File input fields from the original form are moved into the hidden form, with cloned fields left in the original fields' place

    *   Submits the hidden form

    *   Moves the file input fields back into the original form, replacing the cloned fields

3.  The file(s) are uploaded to S3\. If successful, Amazon redirects the iframe to the `success_action_redirect` URL. If not successful, Amazon returns an error, which is also loaded in the iframe.

4.  The iframe's `load` event handler is called. The handler:

    *   Tries to save a reference to the iframe's `document` object. If the file upload failed, the handler saves an `undefined` instead.

    *   Calls the complete callback with a success code and a reference to the iframe's `document` object (or `undefined`)

    *   Removes the hidden form (and iframe)

5.  Before control is returned to your code, the iframe's `document` object is passed to a converter (at the bottom of the [Iframe Transport plugin](https://github.com/blueimp/jQuery-File-Upload/blob/master/js/jquery.iframe-transport.js#L168)), depending on what type of data you were expecting. The converter extracts that data from the `document` object and returns it (or `undefined` if the file upload failed) to your callback(s).

6.  Your callback(s) (`success` and/or `complete` as passed to [jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)) is called. A success code is always returned by the plugin, and so any `error` callback will not be triggered.

    If the data passed to your callback(s) is the value you included in the `success_action_redirect`, then the file upload succeeded. If the data is `undefined`, then the file upload failed.

* * *

**Update:** If the error XML page stays on the same origin as the S3 bucket, then another page from the S3 bucket, loaded into another iframe, can access the original iframe's content (because they are from the same origin). Your main page can communicate with this second iframe using `postMessage()` (or [easyXDM](http://easyxdm.net/wp/)'s FlashTransport, if you need to support IE6/7).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-07T11:43:27.543

This problem, of providing accurate feedback to users using browsers with no FileReader or FormData support has troubled me a lot as wel. I spent a whole 3 days trying to come up with a solution and finally came up with something close to nothing.

Lets get down to the facts:

*   **Browser**: **IE8/9** // thin chance of being any other browser with no FileReader support
*   **Upload Behavior**: we need it to be "Ajax" for UX reasons
*   **Toolbelt**: [jQuery File Upload](https://github.com/blueimp/jQuery-File-Upload)*

Ok, then there is no other way of uploading the file than using an iframe. Right?

So, jQuery File Upload using jQuery Iframe Transport as @jeferry_to describes so well is the tool for the job.

*Actually the tool/plugin doesn't change a thing..

What now?

Well... we need to access the S3 response inside the transport iframe. But we can't because its on a different domain. So we decide to deal with it by using this trick involving a second iframe.

**The setup:**

*   TopFrame, our page (www.myhost.com)
*   iframe TransportFrame (s3.amazonaws.com), auto created by the plugin - contains the S3 response
*   iframe XDMFrame (s3.amazonaws.com), accesses the TransportFrame when ordered, grabs the response and delivers it to TopFrame

**The scenario:**

First of all we need to modify jQuery Iframe Transport so that it does not auto remove the auto-generated form and transport frame. We need to do this cause #postMessage which will use later is asynchronous by nature and we don't want the iframe gone by the time we try to access it.

1.  on TopFrame we upload a file to S3using jQuery File Upload. We now want to make sure it has been uploaded and get the error otherwise.
2.  TopFrame sends a cross domain message to XDMFrame using #postMessage, supplying the name of the TransportFrame. This message actually says: 'Hey check the contents of iframe X' and when you do send em back to me.
3.  XDMFrame then does something like `top.frames['iframe X'].document.documentElement` to access te contents of the TransportFrame, stringifies them and sends them back to TopFrame through #postMessage.
4.  TopFrame receives the message, shows the proper feedback to the user and removes the form and iframe left over because of our jQuery Iframe Transport modification.

Ok, everything should work now cause everything is done by the book.

Nahh, you should not even bother.

You see... if you force a modern browser to use the iframe transport instead of the XHR2 the above solution will indeed work like a charm.

However that's pointless. We want it to work in IE8 + 9.

Well... in IE8/9 it sometimes work, it sometimes doesn't. Usually it doesn't.

Why? Because of the IE's friendly HTTP error messages. Oh yes you read just fine.

In case of an error, S3 responds with an HTTP error status depending on the error (400, 403 etc). Now, depending on the status and the length of the response as shown [here](http://perishablepress.com/important-note-for-your-custom-error-pages/), IE discards the S3 response and replaces it with a friendly error message. In order to overcome this, you must make sure the response is always > 512 bytes. In this case you cannot guarrantee anything like that cause you don't control the response. S3 does and the typical errors are less than 512 bytes.

**In short:**

The iframe trick works on those browsers that do not need it, and doesn't on those who do.

Unfortunately, I can't think of anything else so that case is closed for me now.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T09:36:07.700

Summarizing my answer in the comments: IE has CORS support with some restrictions: [http://www.html5rocks.com/en/tutorials/cors/](http://www.html5rocks.com/en/tutorials/cors/)

and this implementation of direct upload to S3 looks much simpler than jquery fileupload and its not in jquery: [http://codeartists.com/post/36892733572/how-to-directly-upload-files-to-amazon-s3-from-your](http://codeartists.com/post/36892733572/how-to-directly-upload-files-to-amazon-s3-from-your)

Hope this helps!

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T05:15:00.513

AS for the "postMessage" scenario, maybe the iframe should contain a simple javascript

[edit] for iframes taken over by an errormessage

> IFRAME script

```
window.document.onload = function(e){ 
    window.parent.postMessage(document, '*'); //replace '*' with your parent if possible   
}
// just to get the proper document for the parent to target me
window.addEventListener('message',function(e) {
    if (e.domain == 'example.com') { // the domain of your parent frame
        if (e.data == "Salute") {
            window.parent.postMessage("I'm here", '*'); //replace '*' with your parent too
        }
    }
}); 
```

Now parent knows the iFrame perfectly well and can track it's status (depending on if it's answering a simple postMessage)

> PARENT script

```
var iFrameTarget;
var iFrameTakenOver = false;
var timer;
window.addEventListener('message',function(e) {
    if (e.domain == 'example.com') { // the domain of your iframe
        if (e.data) { // e.data contains the iframe document
            if(typeof(e.data) =='object')
                iFrameTarget = e.source;
            elseif(e.data == "I'm here")
            {
                iFrameTakenOver = false;
            }
            timer =setInterval(call_iFrame(),5000); // check iFrame presence in 5 seconds
        }
    }
});

function call_iFrame() {
    iFrameTarget.postMessage('Salute');
    iFrameTakenOver = true;
} 
```

IF iframe is not responding with it's "code" iFrameTakenOver will be permanently set to false checking that will verify if an error has occured or not.

# iphone - NSPredicate 核心数据

> ID：14578513
> 
> 赞同：3
> 
> 时间：2013-01-29T08:27:57.937
> 
> 标签：iphone, ipad, core-data, nspredicate

core data`LIKE [c]%@`和in之间的确切区别是什么？我想搜索一个应该与接收者完全匹配的字符串。例子 ： `= [c]%@``NSPredicate`

```
NSArray *arrayNames = [context fetchObjectsForEntityName:NSStringFromClass([PatientFamilyMember class])
      withSortColumn:nil withSortDescending:FALSE
      withPredicate:@"patientID = %@ && firstName=[c]%@ && relationship=[c]%@ && lastName=[c]%@",
      self.pfm.patientID, firstName, relationship, lastName]; 
```

这有效，但我不明白使用`LIKE [c]`和之间的区别`= [c]%@.`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-29T09:07:30.747

谓词中的`LIKE`和之间的区别在于允许和作为通配符，其中匹配1个字符并匹配0个或更多字符。`=``LIKE``?``*``?``*`

两者`LIKE`和`=`都可以修改`[c]`以指定不区分大小写。

示例：假设您有具有名称的对象

```
"Mark", "mark", "Mike", "mike", "M*" 
```

两个都

```
[NSPredicate predicateWithFormat:@"name = %@", @"Mark"];
[NSPredicate predicateWithFormat:@"name LIKE %@", @"Mark"]; 
```

找到“标记”，两者

```
[NSPredicate predicateWithFormat:@"name =[c] %@", @"Mark"];
[NSPredicate predicateWithFormat:@"name LIKE[c] %@", @"Mark"]; 
```

找到“标记”和“标记”。但只有`LIKE`运算符可以与通配符一起使用，例如

```
[NSPredicate predicateWithFormat:@"name LIKE[c] %@", @"M*"]; 
```

找到“Mark”、“mark”、“Mike”、“mike”和“M*”，但是

```
[NSPredicate predicateWithFormat:@"name ==[c] %@", @"M*"]; 
```

仅找到“M*”。

有关详细信息，请参阅“谓词编程指南”中的[字符串比较](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html%23//apple_ref/doc/uid/TP40001795-215868)。

# jquery - jquery mobile和ui不兼容

> ID：14578514
> 
> 赞同：4
> 
> 时间：2013-01-29T08:27:59.213
> 
> 标签：jquery, jquery-ui, jquery-mobile, compatibility

尽管我有很多人提到了类似的兼容性问题，但他们 50% 的问题在 StackOverflow 上得到了解决。我希望我的问题能达到 51-49 :)

考虑这段代码：

```
<html>
<head>
  <title>Hello, world!</title>
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
  <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
</head>
<body>
  Hello
</body>
</html> 
```

如果你在网页上加载它，你会在浏览器中间看到一个灰色的圆圈，并且不会显示“你好”这个词。在 Web 控制台上，您将看到以下内容：**Uncaught TypeError: Object 0 has no method 'match'** (Chrome) 或**TypeError: c.match is not a function** (Firefox) 或**SCRIPT438: Object doesn't support property or method “匹配”**（IE）。

想在一个页面上同时使用 jquery-ui 和 jquery-mobile 是一个坏主意，还是我做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T08:34:33.400

唯一相关的是订单，在 jUI 之后加载 jQM，css 文件也是如此：

```
<!DOCTYPE html>
<html>
<head>
  <title>jQM Complex Demo</title>
  <meta name="viewport" content="width=device-width"/>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />    
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
  <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>    
  <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>
<body>
    <div data-role="page" id="index">    
      Hello
    </div>
</body>
</html> 
```

你还需要：

```
<!DOCTYPE html> 
```

这将防止 ajax 加载程序舞会显示：

```
<div data-role="page" id="index">    
    Hello
</div> 
```

# sql - 将 sql 结果转换为 'select UNION select' 查询（可导出数据）

> ID：14578515
> 
> 赞同：2
> 
> 时间：2013-01-29T08:28:02.567
> 
> 标签：sql, sql-server, tsql, converter

有时我们需要使用客户端数据进行调试，而我们没有时间进行完整的数据库备份，因此我们手动将 sql 结果转换为静态“select UNION select UNION”的组合，以便我们可以即时使用他们的数据......

例子：

```
select * from items 
```

结果：

```
Itemcode     ItemName     Price
Car1         FerrariX     1200.00
Car2         FerrariZ     3000.00
Car3         MustangR     2100.00 
```

我们将它带回我们的调试环境，如下所示：

```
select 'Car1' as Itemcode, 'FerrariX' as Itemname, 1200.00 as 'Price' UNION
select 'Car2',             'FerrariZ', 3000.00 UNION
select 'Car3',             'MustangR', 2100.00 
```

可能的存储过程解决方案：

```
EXEC spQueryAsStaticData @Query = 'select * from items' 
```

我们如何自动进行这种转换？一些存储过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:53:55.567

我用这样的东西使用数据打印出文本

```
DECLARE @i int
DECLARE @employee_id int
Declare @Hash nvarchar(max)
declare @Result nvarchar(max)
Declare @String nvarchar(MAX)
DECLARE @numrows int
DECLARE @employee_table TABLE (
    idx smallint Primary Key IDENTITY(1,1)
    , [ID] int , [Hash] nvarchar(50), Result nvarchar(50)
)

INSERT @employee_table
SELECT Top 5 * FROM [Hlist].[dbo].[MD5]
set @i =0 
set @String = '' 

SET @numrows = (SELECT COUNT(*) FROM @employee_table)

IF @numrows > 0

    WHILE (@i <= (SELECT MAX(idx) FROM @employee_table))
    BEGIN

        -- get the next employee primary key
        SET @employee_id = (SELECT ID  FROM @employee_table WHERE idx = @i)
        SET @Hash = (SELECT Hash  FROM @employee_table WHERE idx = @i)
        SET @Result = (SELECT Result  FROM @employee_table WHERE idx = @i)
        Set @String = coalesce(@String +'Select '+ convert(varchar,@employee_id) + ', ' +@Hash+ ', '+@Result +' Union ', '')

        --
        -- do something with this employee
        --

        -- increment counter for next employee
        SET @i = @i + 1
    END

    Print @String 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:41:11.270

最后，我们开发了一个小 C# 应用程序解决了它，虽然不如直接从 SQL 查询生成它有用，但它可以工作......

如果有人给出 SQL 解决方案，我们会将答案授予他/她

# php - 从数据库获取更改/插入通知的标准方法

> ID：14578519
> 
> 赞同：0
> 
> 时间：2013-01-29T08:28:16.663
> 
> 标签：php, mysql

我目前正在尝试制作一个针对 1000-1500 个用户的聊天应用程序。当前发生的情况是，一旦我的网页加载，我每秒都会发出一个 ajax 请求，以检查数据库中是否有任何新内容。我想知道这是否是标准做法，或者是否有更有效的方法可以在插入发生时以某种方式由服务器通知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T08:31:47.387

使用 WebSocket。或者至少是 AJAX 轮询。每秒从 1500 个客户端发出一个请求很可能会杀死您的服务器。

看看[http://socket.io/](http://socket.io/)如果你愿意为你的堆栈引入一些新东西。但是，如果您仅限于 PHP，则可以使用 PHP websocket 解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T08:34:38.580

您的方法是一种称为[Polling](http://en.wikipedia.org/wiki/Polling_%28computer_science%29)的标准方法。根据客户端的数量，对于具有最新硬件的服务器来说，这应该是完全可以的（通过该`HEAD`请求`AJAX`通过代码指示状态`HTTP status`）。

另一种选择——正如 Jan 所指出的——称为[Pushing](http://en.wikipedia.org/wiki/Push_technology)。

*   优点：对服务器的请求要少得多。
*   缺点：需要的技术可能会或可能不会由您的客户的浏览器提供。

如果您选择第二种方法，请查看[Server-Sent Events](http://dev.w3.org/html5/eventsource/)（W3C 草案）。

> 该规范定义了一个 API，用于打开 HTTP 连接以接收来自服务器的 DOM 事件形式的推送通知。该 API 的设计使其可以扩展为与其他推送通知方案（如推送 SMS）一起使用。

# javascript - 如何在正则表达式中使用变量

> ID：14578525
> 
> 赞同：1
> 
> 时间：2013-01-29T08:28:55.350
> 
> 标签：javascript, regex

我有以下 RegExp 并且**工作**正常

```
 var reg = new RegExp(/(.{1,4})/g); 
```

但是现在我想用名为 limit 的变量替换 4 然后它**不起作用**

```
 var reg = new RegExp("/(.{1,"+ limit +"})/g"); 
```

我如何在上面的 RegExp 中使用变量而不是固定值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T08:30:12.397

放下`/`. `RegExp`需要一个字符串或一个正则表达式。然后它需要第二个参数，您可以在其中指定标志。

```
var reg = new RegExp("(.{1,"+ limit +"})", "g"); 
```

更多在这里[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T08:30:43.923

像这样（你不需要`/`）：

```
 var reg = new RegExp(".{1,"+ limit +"}", "g"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T08:30:13.343

像这样使用它，

```
var reg = new RegExp("(.{1,"+ limit +"}", "g"); 
```

第二个参数用于选项。并且该模式不带任何分隔符。

# android - 如何在没有外部应用程序的情况下打开/显示文档（.pdf、.doc）？

> ID：14578530
> 
> 赞同：21
> 
> 时间：2013-01-29T08:29:01.833
> 
> 标签：android, pdf, external

我想创建一个程序，无需外部应用程序即可打开文档。我需要这个，因为我想用手机方向（俯仰和滚动）滚动文档。我在屏幕底部创建了一个按钮，当我按住按钮时，我也可以滚动文档。如果我释放按钮，我无法滚动它。所以，如果我用外部应用程序打开文档，我的按钮就会消失，sensorManager 也不起作用。

有任何想法来解决这个问题。或者有任何想法，如何滚动文档，在外部应用程序中打开，我的手机方向？

（对不起我的英语不好）

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.orientationscrolling"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />
<uses-permission android:name="android.permission.INTERNET" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.orientationscrolling.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
</manifest> 
```

这是我的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<WebView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="bottom"
    android:orientation="vertical" >

<Button 
   android:id="@+id/mybutt"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:textSize="25sp"
   android:text="Scroll!!"
   android:layout_gravity="right"/>
</LinearLayout> 
```

这是我的代码：

```
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    button = (Button) findViewById( R.id.mybutt );

    String pdf = "http://www.pc-hardware.hu/PDF/konfig.pdf";
    String doc="<iframe src='http://docs.google.com/gview?embedded=true&url=http://www.pc-hardware.hu/PDF/konfig.pdf' width='100%' height='100%' style='border: none;'></iframe>";
    webView = (WebView) findViewById(R.id.webView1);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setPluginsEnabled(true);
    webView.getSettings().setAllowFileAccess(true);
    webView.loadData( doc , "text/html", "UTF-8");
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-29T08:38:51.033

我认为您应该使用自定义库来完成此操作。请参阅[此](https://stackoverflow.com/a/11153195/1450401)和[此](http://www.androidpdf.mobi/download)

但是有一种方法可以在不调用另一个应用程序的情况下显示 PDF

这是一种在 android 应用程序中显示 PDF 的方法，该应用程序使用来自的支持将 PDF 文档嵌入到**android webview**`http://docs.google.com/viewer`

伪

```
String doc="<iframe src='http://docs.google.com/viewer?url=+location to your PDF File+' 
              width='100%' height='100%' 
              style='border: none;'></iframe>"; 
```

示例如下所示

```
 String doc="<iframe src='http://docs.google.com/viewer?url=http://www.iasted.org/conferences/formatting/presentations-tips.ppt&embedded=true' 
              width='100%' height='100%' 
              style='border: none;'></iframe>"; 
```

代码

```
 WebView  wv = (WebView)findViewById(R.id.webView); 
    wv.getSettings().setJavaScriptEnabled(true);
    wv.getSettings().setPluginsEnabled(true);
    wv.getSettings().setAllowFileAccess(true);
    wv.loadUrl(doc);
    //wv.loadData( doc, "text/html",  "UTF-8"); 
```

并在清单中提供

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

看到[**这个**](https://stackoverflow.com/a/11718742/1450401)

注意：我不知道各种 android 版本的兼容性问题

这种方法的缺点是您需要互联网连接。但我认为它满足你的需要

编辑试试这个作为 iframe 的 src

```
src="http://docs.google.com/gview?embedded=true&url=http://www.pc-hardware.hu/PDF/konfig.pdf" 
```

试试`wv.loadData( doc , "text/html", "UTF-8");`。两者都对我有用

![在此处输入图像描述](../Images/28cc90007ba66c361b5ec1f910a304ef.png)![在此处输入图像描述](../Images/8f10f8243d24da93ff30cd5b591fa83c.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-08T08:58:21.457

从这里下载源代码（[在我的 android 应用程序中显示 PDF 文件](https://deepshikhapuri.wordpress.com/2017/02/15/display-pdf-file-inside-my-android-application/)）

**在您的成绩中添加此依赖项：**

```
compile 'com.github.barteksc:android-pdf-viewer:2.0.3' 
```

**activity_main.xml**

```
<RelativeLayout android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ffffff"
    xmlns:android="http://schemas.android.com/apk/res/android" >

    <TextView
        android:layout_width="match_parent"
        android:layout_height="40dp"
        android:background="@color/colorPrimaryDark"
        android:text="View PDF"
        android:textColor="#ffffff"
        android:id="@+id/tv_header"
        android:textSize="18dp"
        android:gravity="center"></TextView>

    <com.github.barteksc.pdfviewer.PDFView
        android:id="@+id/pdfView"
        android:layout_below="@+id/tv_header"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>

    </RelativeLayout> 
```

**MainActivity.java**

```
package pdfviewer.pdfviewer;

import android.app.Activity;
import android.database.Cursor;
import android.net.Uri;
import android.provider.OpenableColumns;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.ImageView;
import android.widget.RelativeLayout;

import com.github.barteksc.pdfviewer.PDFView;
import com.github.barteksc.pdfviewer.listener.OnLoadCompleteListener;
import com.github.barteksc.pdfviewer.listener.OnPageChangeListener;
import com.github.barteksc.pdfviewer.scroll.DefaultScrollHandle;
import com.shockwave.pdfium.PdfDocument;

import java.util.List;

public class MainActivity extends Activity implements OnPageChangeListener,OnLoadCompleteListener{
    private static final String TAG = MainActivity.class.getSimpleName();
    public static final String SAMPLE_FILE = "android_tutorial.pdf";
    PDFView pdfView;
    Integer pageNumber = 0;
    String pdfFileName;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        pdfView= (PDFView)findViewById(R.id.pdfView);
        displayFromAsset(SAMPLE_FILE);
    }

    private void displayFromAsset(String assetFileName) {
        pdfFileName = assetFileName;

        pdfView.fromAsset(SAMPLE_FILE)
                .defaultPage(pageNumber)
                .enableSwipe(true)

                .swipeHorizontal(false)
                .onPageChange(this)
                .enableAnnotationRendering(true)
                .onLoad(this)
                .scrollHandle(new DefaultScrollHandle(this))
                .load();
    }

    @Override
    public void onPageChanged(int page, int pageCount) {
        pageNumber = page;
        setTitle(String.format("%s %s / %s", pdfFileName, page + 1, pageCount));
    }

    @Override
    public void loadComplete(int nbPages) {
        PdfDocument.Meta meta = pdfView.getDocumentMeta();
        printBookmarksTree(pdfView.getTableOfContents(), "-");

    }

    public void printBookmarksTree(List<PdfDocument.Bookmark> tree, String sep) {
        for (PdfDocument.Bookmark b : tree) {

            Log.e(TAG, String.format("%s %s, p %d", sep, b.getTitle(), b.getPageIdx()));

            if (b.hasChildren()) {
                printBookmarksTree(b.getChildren(), sep + "-");
            }
        }
    }

} 
```

谢谢！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-25T12:30:37.797

好吧，我认为下面是解决方案

```
 String doc="<iframe src='http://docs.google.com/viewer?url=http://www.example.com/yourfile.pdf&embedded=true' width='100%' height='100%'  style='border: none;'></iframe>";

    WebView  wv = (WebView)findViewById(R.id.wv);
    wv.setVisibility(WebView.VISIBLE);
    wv.getSettings().setJavaScriptEnabled(true);
    wv.getSettings().setAllowFileAccess(true);
    wv.getSettings().setPluginState(WebSettings.PluginState.ON);  
    wv.setWebViewClient(new Callback()); 
    wv.loadData(doc, "text/html", "UTF-8"); 
```

希望这会帮助你:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-25T02:34:31.790

以上依赖于谷歌文档的答案仅在您有互联网连接时才有效。更好的选择是使用 Android [PdfRenderer](https://developer.android.com/reference/android/graphics/pdf/PdfRenderer)类。

[您可以在此处](https://github.com/googlesamples/android-PdfRendererBasic)尝试示例应用程序。

# opencv - OpenCV中Haar级联训练中正样本的背景颜色

> ID：14578533
> 
> 赞同：2
> 
> 时间：2013-01-29T08:29:11.153
> 
> 标签：opencv, colors, background, cascade

我注意到，在 OpenCV 的用于 Haarcascade 训练的 opencv_createsamples 实用程序中，您可以指定背景颜色，默认情况下为黑色。由于我现在正在创建正样本，我想知道将正图像中的所有背景像素设置为黑色是否有益，或者这是否真的会损害识别/训练过程。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:46:05.293

供将来参考：当背景不是完全黑色时，结果会好很多。因此，使用没有预先分割的裁剪图像效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-08T03:20:28.643

bgcolor 参数默认为 0，表示黑色，但您可以指定自己的 8 位颜色值。例如：要指定白色，请使用`-bgcolor 255`

如果您的正片具有相同的背景颜色并且您提供了背景图像，那么正片将覆盖在背景图像上，并且正片自身的背景适当地变为透明。

`-show`您可以使用参数观察这一点

# oauth-2.0 - 检索 Google 服务帐户请求的 accessToken 时引发无效授权错误

> ID：14578536
> 
> 赞同：0
> 
> 时间：2013-01-29T08:29:20.600
> 
> 标签：oauth-2.0, google-authenticator

```
package com.google.serviceacc;
import java.io.FileInputStream;
import java.io.IOException;
import java.security.InvalidKeyException;
import java.security.KeyStore;
import java.security.KeyStoreException;
import java.security.NoSuchAlgorithmException;
import java.security.PrivateKey;
import java.security.Signature;
import java.security.SignatureException;
import java.security.UnrecoverableKeyException;
import java.security.cert.CertificateException;

import org.apache.commons.codec.binary.Base64;
import org.apache.commons.httpclient.HttpClient;
import org.apache.commons.httpclient.HttpException;
import org.apache.commons.httpclient.methods.PostMethod;
import org.json.JSONException;
import org.json.JSONObject;
public class GoogleServiceAccount<E> {
    static String keyAlias = "privatekey";

    public static byte[] signData(byte[] data, PrivateKey privateKey) throws InvalidKeyException, SignatureException, NoSuchAlgorithmException
    {
        Signature signature = Signature.getInstance("SHA256withRSA");
        signature.initSign(privateKey);
        signature.update(data);
        return signature.sign();
    }
    /*public static String encodeBase64(byte[] rawData)
    {
        byte[] data = Base64.encodeBase64(rawData);

        return data.toString();
    }*/

    private static PrivateKey getPrivateKey(String keyFile, String password)
            throws KeyStoreException, IOException, NoSuchAlgorithmException, CertificateException, UnrecoverableKeyException
    {

        KeyStore keystore = KeyStore.getInstance("PKCS12");
        keystore.load(new FileInputStream(keyFile), password.toCharArray());
        PrivateKey   privateKey = (PrivateKey) keystore.getKey(keyAlias, password.toCharArray());
        return privateKey;
    }
    public static void main(String[] args) throws InvalidKeyException, SignatureException, NoSuchAlgorithmException, UnrecoverableKeyException, KeyStoreException, CertificateException, IOException {
        String keystoreLoc = "C:/Users/xyz/Downloads/b5b400df17628d8.p12";
        String password = "notasecret";
        String jwtStr=null;
        String jwtClaimStr=null;
        PrivateKey privateKey=null;
        JSONObject jwtHeader=new JSONObject();
        try {
            jwtHeader.put("alg","RS256");
            jwtHeader.put("typ","JWT");
            jwtStr= jwtHeader.toString();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();

        }

        byte[] encodedHeader = Base64.encodeBase64(jwtStr.getBytes("UTF-8"));     
        System.out.println("Original HEaderString: " + jwtStr );
        System.out.println("Base64 Encoded HeaderString : " + new String(encodedHeader));

        JSONObject jwtClaimSet= new JSONObject();
        try {
            jwtClaimSet.put("iss", "client_id_email@developer.gserviceaccount.com");
            jwtClaimSet.put("scope", "https://www.googleapis.com/auth/devstorage.readonly");
            jwtClaimSet.put("aud", "https://accounts.google.com/o/oauth2/token");
            jwtClaimSet.put("exp", "1328554385");
            jwtClaimSet.put("iat", "1328550785");
            jwtClaimStr=jwtClaimSet.toString();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        byte[]  encodedClaimSet=Base64.encodeBase64(jwtClaimStr.getBytes("UTF-8"));
        System.out.println("Original ClaimSet String:"+jwtClaimStr);
        System.out.println("Base64 Encoded ClaimSet:"+ new String(encodedClaimSet) );

        StringBuffer token = new StringBuffer();
        token.append(Base64.encodeBase64(jwtStr.getBytes("UTF-8")));
        token.append(".");
        token.append(Base64.encodeBase64(jwtClaimStr.getBytes("UTF-8")));

        privateKey= getPrivateKey(keystoreLoc, password);
        byte[] sig = signData(token.toString().getBytes("UTF-8"), privateKey);
        byte[] signedPayload =Base64.encodeBase64(sig);

        token.append(".");
        token.append(signedPayload);

        HttpClient client = new HttpClient();
        PostMethod method = new PostMethod("https://accounts.google.com/o/oauth2/token");
        method.addRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        method.addParameter("grant_type","urn:ietf:params:oauth:grant-type:jwt-bearer");

        System.out.println("printing Token.toString():"+token.toString());

        method.addParameter("assertion",token.toString());
        System.out.println("Printing QuerString:"+method.getQueryString());
        System.out.println("Printing request char set:"+method.getRequestCharSet());
        try {
            int responseCode=client.executeMethod(method);
            System.out.println(responseCode);
            System.out.println(method.getResponseBodyAsString());
            System.out.println(method.getURI());

        } catch (HttpException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

如果我尝试执行上面的代码，我会得到 { "error" : "invalid_grant" } 我创建了一个服务帐户并能够通过上面的代码下载私钥。但是当我尝试执行检索访问令牌的请求时我收到无效的授权错误我需要添加一些东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:02:03.823

我终于有输出了！！！！

更新的代码是：

```
package com.voxmobili.sng.cnx.gmail.sync;
import java.io.FileInputStream;
import java.io.IOException;
import java.security.InvalidKeyException;
import java.security.KeyStore;
import java.security.KeyStoreException;
import java.security.NoSuchAlgorithmException;
import java.security.PrivateKey;
import java.security.Signature;
import java.security.SignatureException;
import java.security.UnrecoverableKeyException;
import java.security.cert.CertificateException;

import org.apache.commons.codec.binary.Base64;
import org.apache.commons.httpclient.HttpClient;
import org.apache.commons.httpclient.HttpException;
import org.apache.commons.httpclient.methods.PostMethod;
import org.json.JSONException;
import org.json.JSONObject;
public class GoogleServiceAccount<E> {
    static String keyAlias = "privatekey";

    public static byte[] signData(byte[] data, PrivateKey privateKey) throws InvalidKeyException, SignatureException, NoSuchAlgorithmException
    {
        Signature signature = Signature.getInstance("SHA256withRSA");
        signature.initSign(privateKey);
        signature.update(data);
        return signature.sign();
    }
      public static String encodeBase64(byte[] rawData)
      {
        byte[] data = Base64.encodeBase64(rawData);

        return data.toString();
      }

    private static PrivateKey getPrivateKey(String keyFile, String password)
            throws KeyStoreException, IOException, NoSuchAlgorithmException, CertificateException, UnrecoverableKeyException
    {

        KeyStore keystore = KeyStore.getInstance("PKCS12");
        keystore.load(new FileInputStream(keyFile), password.toCharArray());
        PrivateKey   privateKey = (PrivateKey) keystore.getKey(keyAlias, password.toCharArray());
        return privateKey;
    }

    public static void main(String[] args) throws InvalidKeyException, SignatureException, NoSuchAlgorithmException, UnrecoverableKeyException, KeyStoreException, CertificateException, IOException {
        String keystoreLoc = "C:/Users/xyz/Downloads/b5b400df17628d8.p12";
        String password = "notasecret";
        String jwtHeaderStr=null;
        String jwtClaimStr=null;
        PrivateKey privateKey=null;

        //JWT HEADER
        JSONObject jwtHeader=new JSONObject();
        try {
            jwtHeader.put("alg","RS256");
            jwtHeader.put("typ","JWT");
            jwtHeaderStr=   jwtHeader.toString();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();

        }

        byte[] encodedHeader = Base64.encodeBase64(jwtHeaderStr.getBytes("UTF-8"));     
        System.out.println("Original HEaderString: " + jwtHeaderStr );
        System.out.println("Base64 Encoded HeaderString : " + new String(encodedHeader));

     //JWT CLAIMSET
        JSONObject jwtClaimSet= new JSONObject();
          long iat =  (System.currentTimeMillis()/1000)-60;
          long exp =  iat + 3600;
        try {
            jwtClaimSet.put("iss", "4459@developer.gserviceaccount.com");
            jwtClaimSet.put("scope", "https://www.googleapis.com/auth/calendar.readonly");
            jwtClaimSet.put("aud", "https://accounts.google.com/o/oauth2/token");
            jwtClaimSet.put("exp", +exp);
            jwtClaimSet.put("iat",+iat);
            jwtClaimStr=jwtClaimSet.toString();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        byte[]  encodedClaimSet=Base64.encodeBase64(jwtClaimStr.getBytes("UTF-8"));
        System.out.println("Original ClaimSet String:"+jwtClaimStr);
        System.out.println("Base64 Encoded ClaimSet:"+ new String(encodedClaimSet) );

        StringBuffer token = new StringBuffer();
        token.append(new String(encodedHeader));
        token.append(".");
        token.append(new String(encodedClaimSet));

        //JWT SIGNATURE
        privateKey= getPrivateKey(keystoreLoc, password);
        byte[] sig = signData(token.toString().getBytes("UTF-8"), privateKey);
        byte[] encodedSig=Base64.encodeBase64(sig);
        System.out.println("Signature before encoding:"+ new String(encodedSig));
        String signedPayload =encodeBase64(sig);
        //System.out.println("Signature before encoding:"+signedPayload);
        token.append(".");
        //token.append(signedPayload);
        token.append(new String(encodedSig));

        HttpClient client = new HttpClient();
        PostMethod method = new PostMethod("https://accounts.google.com/o/oauth2/token");
        method.addRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        method.addParameter("grant_type","urn:ietf:params:oauth:grant-type:jwt-bearer");

        System.out.println("printing Token.toString():"+token.toString());

        method.addParameter("assertion",token.toString());
        try {
            int responseCode=client.executeMethod(method);
            System.out.println(responseCode);
            System.out.println(method.getResponseBodyAsString());
            System.out.println(method.getURI());

        } catch (HttpException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

# javascript - 将事件监听器添加到 Titanium

> ID：14578537
> 
> 赞同：0
> 
> 时间：2013-01-29T08:29:26.460
> 
> 标签：javascript, dom-events, appcelerator, titanium-mobile, appcelerator-mobile

我是 Titanium 和 Web 编程和移动应用程序的新手。我想做简单的事件监听器。当我单击图像时，会打开另一个窗口。其他窗口必须是外部 .js 文件

```
var image=Ti.UI.createImageWiew({
image:'...............',
 })

image.addeventListener('click',function(){

//what do I write here?

 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:55:45.447

在你的监听器中写下这段代码：

```
image.addeventListener('click',function(){
    var window = Ti.UI.createWindow({
         url:'external.js' 
    });   
    Ti.UI.currentTab.open(window,{animated:true});

}); 
```

并在您的 external.js 文件中编写此代码：

```
var window = Ti.UI.currentWindow;
window.backgroundImage = 'your-bg-image'; 
```

如果你使用 url 打开一个窗口，你不能这样做：

```
var win=Ti.UI.createWindow({ }); 
```

在你的 js 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:04:41.240

```
var wndMyWindow = Ti.UI.createWindow({
     url             : 'ExternalFile.js',
     backgroundImage : 'mybackgroundImage.png'
}); 

wndMyWindow.open(); 
```

上面的代码将打开一个新窗口，这里你在打开窗口之前告诉背景图像。

如果你愿意，你可以在打开窗口后告诉这个，如下所示

**外部文件.js**

```
var wndMyWindow = Ti.UI.currentWindow;
wndMyWindow.backgroundImage = 'mybackgroundImage.png';//This will also set background image for your window 
```

如果需要，您可以将其他控件添加到此窗口。您可以添加这些控件，例如

`wndMyWindow.add(yourControl);`

另请阅读[此](https://wiki.appcelerator.org/display/guides/CommonJS+Modules+in+Titanium)链接。它将帮助您了解有助于处理不同文件的 commonJS 模块。

快乐编程：）

# spring - 使用 jquery-ajax 在春季文件上传不起作用

> ID：14578542
> 
> 赞同：1
> 
> 时间：2013-01-29T08:29:32.760
> 
> 标签：spring, jquery, spring-mvc, file-upload

这是我的表格：

```
<form name="CIMtrek_Compliance_Daily_Shipments" enctype="multipart/form-data">
<input type="file" id="CIMtrek_comments" name="CIMtrek_comments" value="" />
    <button id="upload" onclick="uploadCommentFile()">Upload</button>
</form> 
```

这是我使用 jquery 的 ajax 调用：

```
function uploadCommentFile(){
    $("#upload").live("click", function() {
        var file_data = $("#CIMtrek_comments").prop("files")[0];   // Getting the properties of file from file field
        var form_data = new FormData();                  // Creating object of FormData class
        form_data.append("file", file_data)              // Appending parameter named file with properties of file_field to form_data
        //form_data.append("user_id", 123)                 // Adding extra parameters to form_data
        $.ajax({
                    type: 'POST',
                    url: "/CIMtrek_Compliance_Daily_Shipments_FileUpload",
                    dataType: 'script',
                    cache: false,
                    contentType: false,
                    processData: false,
                    data: {
                         uploadFile:  file_data
                       },
                    success: function (msg) {
                        global.getElementById("CIMtrek_uploadedFileName").innerHTML=msg;
                    }
           })
    })

} 
```

这是我的弹簧控制器：

```
 @RequestMapping(value = "/CIMtrek_Compliance_Daily_Shipments_FileUpload", method = RequestMethod.POST)
    public String createComments(@RequestParam("uploadFile") CommonsMultipartFile uploadItem,
            HttpServletRequest request) {
        String uploadedFileName="";
        try {
            MultipartFile file = uploadItem;
            String fileName = null;
            InputStream inputStream = null;
            OutputStream outputStream = null;
            if (file.getSize() > 0) {
                inputStream = file.getInputStream();

                System.out.println("size::" + file.getSize());
                fileName = request.getRealPath("") + "/WEB-INF/resources/Attachment"+ file.getOriginalFilename();

                System.out.println("path : "+request.getRealPath("") + "/WEB-INF/resources/Attachment");
                outputStream = new FileOutputStream(fileName);
                System.out.println("fileName:" + file.getOriginalFilename());

                int readBytes = 0;
                byte[] buffer = new byte[10000];
                while ((readBytes = inputStream.read(buffer, 0, 10000)) != -1) {
                    outputStream.write(buffer, 0, readBytes);
                }
                outputStream.close();
                inputStream.close();
            }
            uploadedFileName =file.getOriginalFilename();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return uploadedFileName;
    } 
```

但是当我单击上传按钮时出现以下异常：

```
HTTP Status 400 - 
The request sent by the client was syntactically incorrect. 
```

可能是什么问题，请帮助我识别。

最好的祝福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:18:01.500

关注[这个](http://viralpatel.net/blogs/ajax-style-file-uploading-using-hidden-iframe/)它帮助并解决了我的问题：

# c# - 泛型类型在 mvc 1 c# 中求值

> ID：14578543
> 
> 赞同：0
> 
> 时间：2013-01-29T08:29:33.813
> 
> 标签：c#, .net, asp.net-mvc

我有以下代码需要评估其类型，尽管我不确定如何在 mvc 1 中执行此操作？示例底部的 show 方法突出显示了我需要评估类型是 Car 还是 Boat 的问题。任何人都可以建议如何做到这一点！非常感谢詹姆斯

```
public interface IPanel
{
    string Name { get; }
}

public class CarPanel : IPanel
{
    public string Name
    {
        get { return "Hello Car"; }
    }
}

public class BoatPanel : IPanel
{
    public string Name
    {
        get { return "Hello Boat"; }
    }
}

...

var list = new List<IPanel>();

list.Add(new BoatPanel());
list.Add(new CarPanel());

// In the view

foreach (var p in ViewData.Model.Panels)
{ 
    <% Html.RenderAction<PanelController>(x => x.Show()); %> 
}

// PanelController

public ActionResult Show()
{
    var model = <T> // Problem: Am I a Boat or Car? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:34:00.123

使用`is`运算符。

```
if(model is BoatPanel)
{
    //your code
}
if(model is CarPanel)
{
    //your code
} 
```

[is 运算符](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.100%29.aspx)用于检查泛型对象是否属于所需类型。

希望能帮助到你 ：）

# c# - 这个最简单的方法是什么

> ID：14578545
> 
> 赞同：-5
> 
> 时间：2013-01-29T08:29:37.253
> 
> 标签：c#, asp.net, linq

我有这个 ：

```
var originalList = from x in db.Products
                            where x.Id == 2
                            orderby x.Ip
                            select x; 
```

现在我有一个结果集（例如提取了 10 行）。我想一一更新所有行的字段，例如 x.name 。像这样的东西：

```
 foreach (//the fetched rows )
        {
            //x.name = "jack";
        } 
```

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T08:31:06.073

```
foreach (var product in x)
    product.Name = "Jack"; 
```

够简单吗？

~~作为旁注，我不相信你的电话`select`实际上是在添加任何东西。~~

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T08:31:59.160

可以使用`originalList.ForEach`内部使用简单`for`循环的 LINQ 函数，它可以帮助您*迭代和修改*现代集合。

在简单`foreach`循环的情况下，它*可能会*引发异常（取决于您在内部更改的*内容*和*方式*）

```
originalList.ToList().ForEach(product => {
    product.Name = "Jack";
}); 
```

# openerp - OpenERP 7 中的“发件人”字段

> ID：14578550
> 
> 赞同：0
> 
> 时间：2013-01-29T08:29:51.390
> 
> 标签：openerp

当消息被发送到电子邮件地址时，“发件人/回复至”字段出现问题。它没有显示当前用户的电子邮件地址。

这是 openerp 7 在从字段声明默认值时的代码..

```
def _get_default_from(self, cr,uid, context=None):
    this = self.pool.get('res.users').browse(cr, uid,uid, context=context)
    if this.alias_domain:
    return '%s@%s' % (this.alias_name, this.alias_domain)
    elif this.email:
    return this.email
    raise osv.except_osv(_('Invalid Action!'), _("Unable to send email, please configure the sender's email address or alias.")) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:36:19.450

In E-mail **from address** from **ir.mail_server (Outgoing Mail Server)**，其中**用户**名将是外发邮件的发件人地址

# database - 分区容错关系数据库

> ID：14578551
> 
> 赞同：3
> 
> 时间：2013-01-29T08:29:55.983
> 
> 标签：database, database-design, relational-database, scalability

我正在寻找实现以下目标的数据库：

1.  完全酸。
2.  与联接有关。
3.  有交易。
4.  允许管理员指定分片规则（例如：来自欧洲的用户应该位于欧洲数据中心）。
5.  **最苛刻的要求：**在网络分区时，就像两个数据中心相互断开一样，每个数据中心都应该能够读取和写入其中的节点。基本上，我愿意为分区容错牺牲**部分**可用性。可悲的是，大多数解决方案都会在脑裂的情况下停止所有读取和写入。（因此，更喜欢可用性而不是分区容限）

# android - android Failed to start emulator:Cannot run program

> ID：14578557
> 
> 赞同：20
> 
> 时间：2013-01-29T08:30:14.097
> 
> 标签：android, linux, eclipse, ubuntu

I have installed android SDK and android eclipse plugin successfully on Ubuntu.

Every thing was working fine until I removed Ubuntu and installed Linux Mint. I installed the SDK again and used the same eclipse copy I was using on Ubuntu but now all the android applications contain errors and I can not start the emulator.

When starting the emulator this message appears

```
Starting emulator for AVD 'test' Failed to start emulator: Cannot run program "/home/anas/android//tools/emulator": error=2, No such file or directory 
```

While the android SDK is installed in the specified path and the file (emulator) is exists in the same path.

Also all my applications contains the same error `R can not be resolved to a variable`

What is the problem here?

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-29T08:47:11.897

1.  Installed on Ubuntu successfully. but not running avd

    If you're running a 64-bit system, you need to install ia32-libs

> ```
>  sudo apt-get install ia32-libs 
> ```

1.  R can not be resolved to a variable

This can be due to following Reason

*   class is not the part of that package add proper package

*   not properly defined in manifest file class path define it properly

clear and run the avd it will work

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-22T11:30:57.430

If cmd from fist comment doesn't work like in my case (64bit Crunchbang) then you may also try with :

> sudo aptitude install ia32-libs lib32ncurses5 lib32stdc++6

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-03-08T09:59:43.650

I solved it doing a backup of the "emulator" and creating a symbolic link to the correct emulator:

```
mv emulator emulator_bup
ln -s emulator64-arm emulator 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-14T18:49:12.730

I used the command-line tool android (`android avd`), and used Tools->Manage SDK to install 64 bit emulators. I then mv'ed emulator to emulator.old, and emulator64-arm to emulator. Now the AVD starts up.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-13T08:32:47.827

You do not need install packages any more!

In directory tools, there are many types of `emulator`, while my computer works with `emulator64-arm`! My system is `Linux Mint 16 amd64`! Good luck!

```
./emulator64-arm @yxphone -sdcard yxsd -scale 0.8 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-29T08:41:34.667

Like you have written the specified path and the files are exists in the same path, but i suggest to check that one more time.

and like you are getting R cannot be resolved to a variable, do not worry:

**Reasons:**

1.  Check *Package name in Manifest* File
2.  If you are already getting something like this: *import com.version.bajrang.january.R;* so first of all *try to change package name* here, or secondly just *delete this line* and clean your program
3.  If you are *not getting* something like: *import com.version.bajrang.january.R*; then **add import packagename.R;**

I believe that you will get your answer.....

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-29T08:42:27.193

It looks like your SDK path in eclipse has a mistake:

> Cannot run program "/home/anas/android//tools/emulator"

That double "//" may be the problem. Check in Eclipse: Window -> Preferences -> Android. There should be a field there pointing the SDK Location. Edit it.

Check your path : /home/anas/android/ to see if it really is where you put your SDK . If not repeat [these](http://developer.android.com/sdk/installing/index.html) steps to have it

The missing R resource message is a compile error right? Then in this case your emulator should not be the problem. However, if your SDK path is incorrect like I suspect, then .. you can expect this compile error along with any other android libraries import

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2021-01-14T16:18:25.767

This is sorted by running this on Ubuntu.

```
sudo cp ~/Android/Sdk/platform-tools/adb /usr/bin/adb 
```

Refer this: [Can't connect to emulator through ADB genymotion](https://askubuntu.com/questions/1144617/cant-connect-to-emulator-through-adb-genymotion)

# html - HTML5：Div 在拖动时被裁剪

> ID：14578558
> 
> 赞同：0
> 
> 时间：2013-01-29T08:30:27.773
> 
> 标签：html, css, transform, scale, drag

在 HTML5 中，当 Parent Div 应用了 -webkit-transform 比例并且子级是可拖动的。然后在拖动孩子时，孩子覆盖被裁剪。

什么应该是正确的实现。

Chrome 特定问题

# php - PHP：HTML：在 POST 中发送 HTML 选择选项属性

> ID：14578559
> 
> 赞同：22
> 
> 时间：2013-01-29T08:30:31.847
> 
> 标签：php, html, html-parsing

我想发送选定的项目值以及一些属性（stud_name）值。PHP中是否有任何功能可以做到这一点？

这是示例之一。

```
<form name="add">
    Age: 

    <select name="age">
         <option value="1" stud_name="sre">23</option>
         <option value="2" stud_name="sam">24</option>
         <option value="5" stud_name="john">25</option>
     </select>

    <input type="submit" name="submit">

</form> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-29T08:43:54.907

```
<form name="add" method="post">
     <p>Age:</p>
     <select name="age">
        <option value="1_sre">23</option>
        <option value="2_sam">24</option>
        <option value="5_john">25</option>
     </select>
     <input type="submit" name="submit"/>
</form> 
```

您将在 中选择值`$_POST['age']`，例如`1_sre`。然后您将能够拆分值并获得`'stud_name'`.

```
$stud = explode("_",$_POST['age']);
$stud_id = $stud[0];
$stud_name = $stud[1]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-29T09:24:06.153

你可以用 JQuery 做到这一点

简单地：

```
 <form name='add'>
   Age: <select id="age" name='age'>
   <option value='1' stud_name='sre'>23</option>
   <option value='2' stud_name='sam'>24</option>
   <option value='5' stud_name='john'>25</option>
   </select>
   <input type='hidden' id="name" name="name" value=""/>
   <input type='submit' name='submit'/>
   </form> 
```

在 Header 部分添加此代码：

```
<script src="http://code.jquery.com/jquery-1.9.0.min.js"></script> 
```

现在 JQuery 函数

```
<script type="text/javascript" language="javascript">
$(function() {
      $("#age").change(function(){
      var studentNmae= $('option:selected', this).attr('stud_name');
      $('#name').val(studentNmae);
   });
});
</script> 
```

你可以使用这两个值作为

```
$name = $_POST['name'];
$value = $_POST['age']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T08:36:34.717

您将不得不使用 JavaScript。浏览器只会发送`value`所选选项的 （所以它不是 PHP 的错）。

你的 JS 应该做的是钩入表单的提交事件，并使用所选选项的`stud_name`值创建一个隐藏字段。然后这个隐藏字段将被发送到服务器。

话虽如此……您不应该在客户端上中继以提供正确的数据。您已经知道`stud_name`服务器上的给定值应该是什么（因为您正在输出它）。因此，在处理表单时只需应用相同的逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T08:42:57.350

只需将值和 stud_name 组合起来，例如 1_sre 并在将其放入 php 时拆分值。Javascript 似乎是一把锤子。注意此方法假定您可以编辑 html。这是 html 的样子：

```
<form name='add'>
Age: <select name='age'>
     <option value='1_sre'>23</option>
     <option value='2_sam>24</option>
     <option value='5_john>25</option>
     </select>
<input type='submit' name='submit'/>
</form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T08:43:19.573

您可以使用 jquery 功能。

```
<form name='add'>
   <input type='text' name='stud_name' id="stud_name" value=""/>
   Age: <select name='age' id="age">
   <option value='1' stud_name='sre'>23</option>
   <option value='2' stud_name='sam'>24</option>
   <option value='5' stud_name='john'>25</option>
   </select>
   <input type='submit' name='submit'/>
</form> 
```

jQuery代码：

```
<script type="text/javascript" src="jquery.js"></script>

<script>
    $(function() {
          $("#age").change(function(){
          var option = $('option:selected', this).attr('stud_name');
          $('#stud_name').val(option);
       });
    });
</script> 
```

# javascript - jQuery .each() 和 ajax 获取大小

> ID：14578564
> 
> 赞同：1
> 
> 时间：2013-01-29T08:30:41.993
> 
> 标签：javascript, jquery, ajax, closures, each

我在 php 文件中有地址列表，这些文件按国家/地区标记。因此，在一个名为 uk 的列表中，我可以有 12 个地址列表项。但是在我的主页上，我尝试使用 jQuery 计算每个国家/地区的值，然后将值放在该国家/地区地图上的 div 中，以表明英国是 x 个地址，美国有 x 个地址等等。

我在下面汇总的代码一直有效到 .ajax，然后在 console.log 中它回显 1 个国家而不是国家列表。

**HTML**

```
<div class="right map">
    <div class="canada" data-name="Canada"></div>
    <div class="usa" data-name="USA"></div>
    <div class="uk" data-name="UK"></div>
    <div class="ireland" data-name="Ireland"></div>
    <div class="spain" data-name="Spain"></div>
    <div class="portugal" data-name="Portugal"></div>
    <div class="italy" data-name="Italy"></div>
    <div class="australia" data-name="Australia"></div>
</div> 
```

**jQuery**

```
$('.map div').each(function() { 
    $this = $(this);
    country = $this.attr("class");
    console.log(country);
    $.ajax({
        url : "/assets/inc/coe/"+country+".php",
            success : function (data) {
                console.log($('.map div.'+country));
                $('.map div.'+country).text($(data).find('li').size());
            }
        }); 
}); 
```

**.php 文件**

```
<ul>
    <li>
        <strong>Company Name</strong>
        123 Fake Street<br />
        Fakesville<br />
        <a href="#">Link</a>
    </li>
    <li>
        <strong>Company Name</strong>
        123 Fake Street<br />
        Fakesville<br />
        <a href="#">Link</a>
    </li>
</ul> 
```

**控制台日志**

```
canada
usa
uk
ireland
spain
portugal
italy
australia
[div.australia]
[div.australia]
[div.australia]
[div.australia]
[div.australia]
[div.australia]
[div.australia]
[div.australia] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T08:42:45.297

您遇到的问题不在您的职能`country`范围内。`success`当你的`success`函数被调用时，它会查找作用域链来查找`country`。但是因为你的 AJAX 是异步运行的，所以循环总是在`success`被调用之前完成，`country`因此*总是*在循环中设置的最后一个国家。

要解决此问题，您需要将`success`函数嵌套在新的作用域级别中并按`country`值传递。在下面的示例中，我使用一个立即执行的函数来完成此操作，该函数返回您的原始`success`函数：

改变这个：

```
$.ajax({
        url : "/assets/inc/coe/"+country+".php",
            success : function (data) {
                console.log($('.map div.'+country));
                $('.map div.'+country).text($(data).find('li').size());
            }
        }); 
```

对此：

```
$.ajax({
        url : "/assets/inc/coe/"+country+".php",
            success : (function (country) {
                return function(data) {
                    console.log($('.map div.'+country));
                    $('.map div.'+country).text($(data).find('li').size());
                };
            })(country)
        }); 
```

这都是关于[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T08:35:58.227

使您的 ajax 请求同步。添加`async: false`将起作用。它将等待当前的 ajax 请求完成，然后再开始另一个。所以对的引用`country`将正确映射到正确的国家`div`

```
$('.map div').each(function() { 
$this = $(this);
country = $this.attr("class");
console.log(country);
$.ajax({
    url : "/assets/inc/coe/"+country+".php",
    async: false,
        success : function (data) {
            console.log($('.map div.'+country));
            $('.map div.'+country).text($(data).find('li').size());
        }
    }); 
```

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:36:29.557

这是一个闭包问题和ajax的异步性；它处理了击败所有ajax调用的国家变量，所以它总是在最后一个设置（澳大利亚）。

将新属性写入 ajax 函数/对象

```
$.ajax({
        url : "/assets/inc/coe/"+country+".php",
        country: country,
            success : function (data) {
                var country = this.country;
                console.log($('.map div.'+country));
                $('.map div.'+country).text($(data).find('li').size());

            }
        }); 
```

# css - 选定的行颜色在jqgrid中没有改变黄色

> ID：14578566
> 
> 赞同：0
> 
> 时间：2013-01-29T08:30:47.323
> 
> 标签：css, asp.net, jqgrid

嗨伙计们！！！！在 MyJqgrid 中，选定行的背景颜色没有变为“黄色”，而在悬停时它正在改变。我想在选择时将颜色更改为黄色。

```
<script type="text/javascript">

    $(function () {
        $("#UsersGrid").jqGrid({
            url: 'getGriddahico.ashx',
            datatype: 'json',
            height: 250,
            colNames: ['id', 'username', 'ordinal', 'authcode', 'extension', 'trunk', 'dialnumber', 'dialdate', 'dialtime', 'duration', 'destination', 'price', 'toc'],
            colModel: [
                    { name: 'id', index: 'id', width: 100, sortable: true, align: 'center' },
                    { name: 'username', width: 100, sortable: true, align: 'center' },
                    { name: 'ordinal', width: 100, sortable: true, align: 'center' },
                    { name: 'authcode', width: 100, sortable: true, align: 'center' },
                    { name: 'extension', width: 100, sortable: true, align: 'center' },
                    { name: 'trunk', width: 100, sortable: true, align: 'center' },
                    { name: 'dialnumber', width: 100, sortable: true, align: 'center' },
                    { name: 'dialdate', width: 100, sortable: true, align: 'center' },
                    { name: 'dialtime', width: 100, sortable: true, align: 'center' },
                    { name: 'duration', width: 100, sortable: true, align: 'center' },
                    { name: 'destination', width: 100, sortable: true, align: 'center' },
                    { name: 'price', width: 100, sortable: true, align: 'center' },
                    { name: 'toc', width: 150, sortable: true, align: 'center' }
                ],
            rowNum: 100,
            rowList: [100, 200, 300],
            pager: '#UsersGridPager',
            sortname: 'username',
            viewrecords: true,
            ignorecase:true,
            sortorder: 'asc',
            autowidth: true,
            toppager: true,
            height: '100%'

        });

        $("#UsersGrid").jqGrid('navGrid', '#UsersGridPager', { edit: false, add: false, del: false, search: false });

        jQuery("#UsersGrid").jqGrid('filterToolbar', { stringResult: true, searchOnEnter: false });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T09:02:49.753

使用 CSS

```
 .ui-jqgrid-btable .ui-state-highlight { background: yellow; } 
```

或者

```
 .ui-jqgrid .ui-state-highlight { background: yellow; } 
```

# php - PHP 性能：$this->variable 与本地 $variable（操纵）

> ID：14578573
> 
> 赞同：7
> 
> 时间：2013-01-29T08:31:08.257
> 
> 标签：php, performance, local-variables, class-variables

我有一堂课，我决定分成一个新的部分。

当我将代码部分移植到一个新类中时，我注意到它在执行其中一个 foreach 循环时要慢得多。

我设法找到了部分问题，即我决定如何保存最终结果数组。

我认为如果您看到我的代码的缩短版本会更容易理解：

原移植代码： http: [//pastebin.com/2iBuqmgn](http://pastebin.com/2iBuqmgn) 更优化的移植代码： http: [//pastebin.com/TYU1rHwU](http://pastebin.com/TYU1rHwU)

您会看到，在第一个示例中，我一直直接操作 $this->active_topics。

在第二个示例中，我在将局部变量保存到 $this->active_topics 之后在 foreach 循环之后使用局部变量。

最初的循环似乎平均为 1 秒，而更优化的循环平均使用 0.85 来执行。他们最终返回完全相同的内容。

为什么更优化的代码，使用局部变量，效率更高？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-29T08:42:13.027

当您访问类中的某些内容时，PHP 解释器首先必须在内存中找到该类，然后查看属性所在的位置。在一个普通的局部变量上，它不需要在类中搜索属性，它可以直接访问变量的内存，所以速度要快一些。

# java - 无法在运行时设置复选框的背景颜色

> ID：14578574
> 
> 赞同：0
> 
> 时间：2013-01-29T08:31:16.707
> 
> 标签：java, swing, jpanel, jcheckbox, agents-jade

有一个类 AgentHome 扩展了 JFrame。AgentHome 有一个 JPanel rem_panel。复选框被动态添加到 rem_panel...复选框的数量取决于数据库表中的条目数，文本框要显示的文本从该表中读取。

AgentHome 有一个整数变量 x 和一个复选框数组列表 rem_cbarr。

rem_cbarr 在复选框被创建并添加到 rem_panel 时存储它们。当程序执行时变量 x 设置为 1 时，我试图将这些复选框的背景颜色设置为红色。我已经实现了 JADE 框架的 TickerBehaviour 来检查变量 x 是否设置为 1。

我无法将复选框的背景颜色设置为红色。这是我实现的代码。请帮忙。谢谢。

```
 public void setup()
{
  Behaviour loop = new TickerBehaviour( this, 2000 )
  {
     protected void onTick() {

      timer();
     }
  };

   addBehaviour( loop );
 }

  public void timer()
{
    AgentHome hm=new AgentHome();
           if(hm.x==1)
       {
           for (int i = hm.rem_cbarr.size()-1; i>=0; i--)
                   {
                       JCheckBox cb=hm.rem_cbarr.get(i);
                     cb.setBackground(Color.red);
                      hm.rem_panel.revalidate();
                     hm.rem_panel.repaint();
                   }
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:33:53.467

GUI 操作需要在 EDT（Event Dispatcher Thread）上完成。在 java 中，这通过调用[`SwingUtilities.invokeLater(Runnable run)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:01:10.547

很多事情...

*   UI 组件应该只在事件调度线程的上下文中更新
*   您永远不应该执行任何可能阻塞事件调度线程的操作（例如使用循环或`Thread#Sleep`尝试更新屏幕）
*   事件调度线程负责调度绘制更新......
*   `JCheckBox`默认是透明的。

* * *

```
public class FlashCheckBox {

    public static void main(String[] args) {
        new FlashCheckBox();
    }

    public FlashCheckBox() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridBagLayout());
                frame.add(new FlashyCheckBox());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class FlashyCheckBox extends JCheckBox {

        private final Color defaultBackground;
        private int flash;
        private Timer flashTimer;

        public FlashyCheckBox() {

            defaultBackground = getBackground();

            flashTimer = new Timer(500, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    flash++;
                    if (flash % 5 == 0) {
                        setOpaque(false);
                        setBackground(defaultBackground);
                        flashTimer.stop();
                    } else if (flash % 2 == 0) {
                        setBackground(Color.YELLOW);
                        setOpaque(true);
                    } else {
                        setBackground(defaultBackground);
                        setOpaque(false);
                    }
                    repaint();
                }
            });

            flashTimer.setRepeats(true);
            flashTimer.setCoalesce(true);
            flashTimer.setInitialDelay(0);

            addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    flashTimer.restart();
                }
            });

        }

    }

} 
```

# python - 通过工具栏删除带有 auitoolbar 的面板时出现 PyDeadObjectError

> ID：14578585
> 
> 赞同：0
> 
> 时间：2013-01-29T08:32:08.957
> 
> 标签：python, wxpython, wxauitoolbar

我有一个带有 auitoolbar 的面板，工具栏上有一个“删除”按钮。按下此按钮将删除面板及其中的所有内容。问题是除了`wx.EVT_TOOL`我用来触发删除之外，auitoolbar 还会触发`OnLeftUp`面板被删除后发生的事件，因此`PyDeadObjectError`. 有没有办法解决？常规按钮工作正常，这只是 auitoolbar 的问题。

```
python 2.7.2
wxpython 2.8.12 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:20:28.793

与事件`OnLeftUp`绑定？`wx.EVT_LEFT_UP`如果是这样，那么在面板删除时，您还需要明确取消面板与事件的绑定：

```
self.panel.Unbind(wx.EVT_LEFT_UP) 
```

# javascript - Sencha touch 使容器内的列表可见

> ID：14578590
> 
> 赞同：-1
> 
> 时间：2013-01-29T08:32:24.140
> 
> 标签：javascript, sencha-touch, sencha-touch-2

我有一个包含多个项目（标签、轮播、容器等）的视图 -

```
Ext.define('MyApp.view.MyView', {
    extend:'Ext.Panel',
    alias:'widget.view',
    requires:['Ext.Panel', 'Ext.carousel.Carousel'],
    config:{
        layout:'vbox',
        cls: 'detail',
        scrollable:{
            direction:'vertical'
        }
    },

    initialize:function () {
        var type = {
            xtype: 'label',
            id:'type',
            html:'Type'
        };

        var socialButton = {
            xtype:'label',
            id:'socialButton',
            html:'<div style="position: absolute; right: 0; top: 0px; background: #efefef; border: 1px solid #e5e5e5">' +
                '<div class="x-button social-button" btnType="fb_icon" style="background: #fff url(resources/images/appimages/facebook.png) no-repeat;"></div>' +
                '<div class="x-button social-button" btnType="twitter_icon" style="background: #fff url(resources/images/appimages/twitter.png) no-repeat;"></div>' +
                '<div class="x-button social-button" btnType="google_icon" style="background: #fff url(resources/images/appimages/google.png) no-repeat;"></div>' +
                '<div class="x-button social-button" btnType="linked_icon" style="background: #fff url(resources/images/appimages/linkedin.png) no-repeat;"></div>' +
                '</div>'
        };

        if (Ext.os.is.Phone) {
            socialButton = {
                xtype:'label',
                id:'socialButton',
                html:'<div style="position: absolute; right: 0; top: 0px; background: #efefef; border: 1px solid #e5e5e5">' +
                 '<div class="x-button social-button" btnType="fb_icon" style="background: #fff url(resources/images/appimages/facebook.png) 100% 50% no-repeat;"></div>' +
                 '<div class="x-button social-button" btnType="twitter_icon" style="background: #fff url(resources/images/appimages/twitter.png) 100% 50% no-repeat;"></div>' +
                 '<div class="x-button social-button" btnType="google_icon" style="background: #fff url(resources/images/appimages/google.png) 100% 50% no-repeat;"></div>' +
                 '<div class="x-button social-button" btnType="linked_icon" style="background: #fff url(resources/images/appimages/linkedin.png) 100% 50% no-repeat;"></div>' +
                 '</div>'
           };
        }

        var titleFont = Ext.os.is.Phone ? 0.7 : 1.2;
        var title = {
            xtype:'label',
            id:'title',
            html:'title',
            style:'font-size: ' + titleFont + 'em; font-weight: bold; color: #117BBE; margin-top: 10px;'
        };

        var wFont = Ext.os.is.Phone ? 7 : 8;
        var w = {
            xtype:'label',
            margin:'0 0 0 0',
            id:'w',
            html:'wwwww',
            style:'font-size: ' + wFont + 'pt; color: #117BBE;'
        };

        var tsFont = Ext.os.is.Phone ? 'font-size: 7pt;' : '';
        var ts = {
            xtype:'label',
            id:'ts',
            html:'tststst',
            style:'font-weight: bold;' + tsFont
        };

        var carousel = {
            xtype:'slideshow',
            id:'carousel',
            cls:'carousel',
            style: 'margin-top: 10px; margin-bottom: 5px;',
            height: '300px'
        };

        var imageCaption = {
            xtype:'label',
            id:'imageCaption',
            html:'Caption of the image',
            style:'font-size: 8pt; text-align: center;'
        };

        var mainPanel = {
            xtype: 'container',
            layout: 'vbox',
            items:[
                {
                    xtype: 'label',
                    id: 'body',
                    tpl: '{body}'
                },
                {
                    xtype: 'label',
                    id: 'analysis',
                    html: 'analysis'
                },
                {
                    xtype: 'toolbar',
                    title: 'Related'
                },
                {
                    xtype: 'list',    // this list is not visible
                    id: 'related',
                    itemTpl: '{title}',
                    listeners: {
                        select: {
                            scope: this,
                            fn: this.onRelatedSelect
                        },
                        painted: function (list) {
                            //alert(list.element.dom.offsetHeight);
                        }
                    }
                }
            ]
        };

        this.add([
            type,
            socialButton,
            title,
            w,
            ts,
            carousel,
            imageCaption,
            mainPanel
        ]);
        this.element.on(
        {
            swipe:{
                scope:this,
                element:'element',
                fn:this.onSwipe
            }
        });
    },

    onSwipe:function (event) {
        this.fireEvent('Swipped', event.direction);
    },

    onRelatedSelect:function (list, record) {
        return this.fireEvent('relatedSelected', record);
    }
}); 
```

根面板包含一个`mainPanel`项目，该项目又包含几个其他组件（标签和列表）。

问题出在`mainPanel`. 呈现视图时，即使列表有项目，列表的任何项目都不可见（可能是因为它的高度为零）。在使用配置强制像素高度（例如，200 像素）后，`height`列表是可见的，但高度应该足够动态，以便即使列表包含 10 个元素，所有元素都是可见的。

我该如何解决？

**编辑**

[这](http://www.senchafiddle.com/#yyCVE)是 SenchaFiddle 的演示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T09:43:27.860

我认为您只需要添加`height: "auto"`到您的列表中

**编辑：**

也添加`scrollable:false`到您的列表中

**演示：** [http ://www.senchafiddle.com/#yyCVE#GNEuj#1aEQr](http://www.senchafiddle.com/#yyCVE#GNEuj#1aEQr)

# cakephp - 如何使用相同的字段名称验证多个字段？

> ID：14578591
> 
> 赞同：0
> 
> 时间：2013-01-29T08:32:37.177
> 
> 标签：cakephp

这是 $this->request->data 的结构：

```
 array(
        'Capture' => array(
             'items' => array (
                 0 => array(
                    'description' => '',
                    'amount' => ''
                 )
                 1 => array(
                    'description' => '',
                    'amount' => ''
                 )
            )
        )
) 
```

我必须验证这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:46:03.200

要验证具有相同字段的多条记录，您可以使用`Model::saveAll`并传入一个参数，告诉它仅验证。

请注意，我认为您不能以上述格式传递您的`$this->request->data`（关卡会扔掉它）。`items`它需要采用以下格式：

```
array(
    'ModelName' => array(
        '0' => array(...)
        '1' => array(...)
        //...
        'n' => array(...)
    ),
) 
```

或者：

```
array(
     '0' => array(...)
     '1' => array(...)
     //...
     'n' => array(...)
) 
```

所以通过以下方式将其传递给函数：

```
$this->Capture->saveAll($this->request->data['Capture']['items'], array('validate' => 'only')); 
```

这是一个类似的问题：

[验证具有相同名称的多个字段](https://stackoverflow.com/questions/12525645/validating-multiple-fields-with-the-same-name/12525934#12525934)

# c# - C# 将时间戳附加到文件路径

> ID：14578592
> 
> 赞同：0
> 
> 时间：2013-01-29T08:32:40.770
> 
> 标签：c#, file-io, timestamp

我有以下问题或疑问，我有这个功能

```
private void SavePic(Canvas canvas, string filename)
    {
        RenderTargetBitmap renderBitmap = new RenderTargetBitmap(
         (int)canvas.Width, (int)canvas.Height,
         96d, 96d, PixelFormats.Pbgra32);
        // needed otherwise the image output is black
        canvas.Measure(new Size((int)canvas.Width, (int)canvas.Height));
        canvas.Arrange(new Rect(new Size((int)canvas.Width, (int)canvas.Height)));

        renderBitmap.Render(canvas);

        //JpegBitmapEncoder encoder = new JpegBitmapEncoder();
        PngBitmapEncoder encoder = new PngBitmapEncoder();
        encoder.Frames.Add(BitmapFrame.Create(renderBitmap));

        using (FileStream file = File.Create(filename))
        {

            encoder.Save(file);
        }
    } 
```

和相应的调用 `SavePic(mySuperDefaultPainting, @"C:\KinDraw\out.png");`

现在我想附上日期+时间的文件名？您可以在函数调用中获取此 DateTime 函数吗？

也许我可以在这里帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T08:37:06.280

尝试**（更新文件路径）**：

```
string fileName=string.Format("{0}-{1:ddMMMyyyy-HHmm}.png", @"C:\KinDraw\out", 
                                                    DateTime.Now);
if(!Directory.Exists(Path.GetDirectoryName(fileName)))
{
    Directory.CreateDirectory(Path.GetDirectoryName(fileName));
}

SavePic(mySuperDefaultPainting, fileName); 
```

假设时间是**29-JAN-2013 07:30 PM**，它会给你：`C:\KinDraw\out-29JAN2013-1930.png`.

但请查看有关`CreateDirectory`此[MSDN 页面](http://msdn.microsoft.com/en-us/library/54a0at6s.aspx)的详细信息。还要寻找`Exceptions`并包裹在`try-catch`块中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T08:38:06.433

```
string timestamp =DateTime.Now.ToString("MMddyyyy.HHmmss");
SavePic(mySuperDefaultPainting, @"C:\KinDraw\out"+timestamp+".png"); 
```

**更新：（如果目录不存在则创建目录）**

```
if (!Directory.Exists(filepath))
    Directory.CreateDirectory(filepath); 
```

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T08:37:36.727

尝试在代码的开头添加：

```
var extension = Path.GetExtension(filename);
var newName = filename.Replace(filename, extension) + DateTime.Now.ToString("yyyy-MM-dd HH:mm:dd") + extension; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T08:38:36.690

只需将这一行放在那里：

```
string stampedFileName = filename.Replace(".",
    string.Format("{0:YYYY-mm-dd hhmmss}", DateTime.UtcNow) + "."); 
```

然后改变

```
using (FileStream file = File.Create(filename)) 
```

至

```
using (FileStream file = File.Create(stampedFilename)) 
```

重要的是使用`DateTime.UtcNow`而不是`DateTime.Now`因为前者不受夏令时的影响。

**编辑：**我在上面提出的格式的优点是按字母顺序对文件名进行排序，然后自动按时间顺序对它们进行排序。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-07-21T16:31:03.913

我就是这样做的，而且效果很好。稍微调整了@Avishek 代码以使其适用于我。无需删除文件或丢失其中的内容。

输出文件后调用“Rename()”方法..

```
public static void Rename()
        {
            string timestamp = DateTime.Now.ToString("MMddyyyy.HHmmss"); 
            string originalFile = @"C:\Users\Data_Output\" + fileName + ".csv"; 
            string newFile = @"C:\Users\Data_Output\" + fileName + "_" + timestamp + ".csv";

            File.Move(originalFile, newFile);

        } 
```

# asp.net-web-api - 如何配置 OData 不处理 Web Api 中的非 OData 异常

> ID：14578593
> 
> 赞同：4
> 
> 时间：2013-01-29T08:32:43.217
> 
> 标签：asp.net-web-api, odata

我想在 Web Api 中将 OData 用于 Controller 中的几个 Action 方法。发生的事情是，一旦我在 Web Api 中启用 OData，错误消息格式就会更改所有错误。有没有办法只为特定的控制器/动作路由配置 Odata。

启用 OData 之前的错误消息如下所示：

```
{"Message":"User Name/Password are invalid ."} 
```

启用 OData 后的错误消息如下所示：

```
{
  "odata.error":{
    "message":{
      "lang":"en-US","value":"User Name/Password are invalid ."
    }
  }
} 
```

我想将 OData 配置为仅处理特定的控制器，以便其余 API 不受 OData 设置的影响。感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:08:42.833

我们在 RC 和 RTM 之间所做的重大更改之一是我们完全删除了 EnableOData 扩展方法。我们意识到在全球范围内注册 OData 格式化程序是一个坏主意，因为它会影响控制器，无论它们是否应该成为 OData 控制器。

因此，在我们的 OData v1 版本和我们当前的夜间构建中，我们添加了一个名为 ODataController 的新基类。如果您从 ODataController（或 EntitySetController）派生，您将自动获得仅针对该控制器的 OData 支持。它不应该像现在这样影响其余的控制器。您还应该使用 config.Routes.MapODataRoute 而不是 EnableOData。

您可以使用以下说明安装我们最新的夜间版本：

[http://blogs.msdn.com/b/henrikn/archive/2012/06/01/using-nightly-asp-net-web-stack-nuget-packages-with-vs-2012-rc.aspx](http://blogs.msdn.com/b/henrikn/archive/2012/06/01/using-nightly-asp-net-web-stack-nuget-packages-with-vs-2012-rc.aspx)

在这一点上它应该是相当稳定的。

# python - Python 3 的命令行

> ID：14578596
> 
> 赞同：1
> 
> 时间：2013-01-29T08:32:58.597
> 
> 标签：python

我有 1 个 python 3 脚本。我需要通过命令行使用另一个脚本。我应该使用什么功能？我的意思是这样的：

```
res = execute('C:\python32\python Z:\home\192.168.0.15\www\start.pyw start=1 module=server > Z:\home\192.168.0.15\www\test.html') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:49:44.103

查看 os 模块的进程管理部分

[http://docs.python.org/3/library/os.html#module-os](http://docs.python.org/3/library/os.html#module-os)

如果您对进程的 i/o 感兴趣，os.popen 会很好用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:50:47.643

使用[子流程](http://docs.python.org/3/library/subprocess.html)模块。这为您提供了最大的灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:15:07.703

这是您要启动的python程序。最好导入模块，运行所需的方法并将输出写入文件。

但是，这就是您可以通过 shell 执行的方式：

```
from subprocess import *
command_stdout = Popen(['C:\python32\python', 'Z:\home\192.168.0.15\www\start.pyw', 'start=1', 'module=server'], stdout=PIPE).communicate()[0]
res = command_stdout.decode("utf-8")
fd = open('Z:\home\192.168.0.15\www\test.html',"w")
fd.write(res) 
```

# javascript - 使用 javascript 确认框来验证用户操作

> ID：14578602
> 
> 赞同：1
> 
> 时间：2013-01-29T08:33:50.280
> 
> 标签：javascript, html

我有一个包含多个项目的页面，用户可以在同一页面上删除任何项目。但是我需要集成一个 javascript 确认警报框来验证用户是否真的想继续执行每个项目的操作。

我可以通过在页面中放置 javascript 来实现它，但挑战是我只能使用一个 javascript 函数来删除一个项目。这仅仅意味着我将为每个项目拥有多个 javascript，这非常困难，因为这些项目的数量随着它的不断增加而无法定义。

所以我需要能够对所有正在显示的项目使用一个 javascript 函数。

这是javascript代码：

```
<script>    

<!--
function confirmAlertBox(){
   var retVal = confirm("Do you want to continue ?");
   if( retVal == true ){
  window.location = "items.php?del_item&amp;item_id=<?php echo $item_id; ?>";
      return true;
   }else{
      return false;
   }
}
//-->

</script> 
```

以下是从数据库中获取的项目：

```
<?php

while ($all_item_row = @mysql_fetch_assoc($all_item_query)) {
    $item_title = $all_item_row['title'];
    $item_id = $all_item_row['id'];

 echo '<tr> <td>'.$item_title.'</td> <td class="action_lnk"><a href="edit_item.php?edit_cal&amp;item_id='.$item_id.'">Edit Item</a> <a href="#" onclick="confirmAlertBox()">Delete Item</a> <div class="clear"></div></td> </tr>';

}
}
else{
echo "<strong>No item available. Thank You!</strong>";  
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:40:23.787

试试这个：

```
<a href=\"javascript:confirmDelete('items.php?del_item&amp;item_id=$item_id;')\">Delete</a> 
```

你的javascript函数应该像

```
<script>

function confirmDelete(delUrl) {
 if (confirm("Are you sure you want to delete")) {
document.location = delUrl;
 }
} 
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:36:26.390

您需要将功能更改为

```
function confirmAlertBox(id){
   var retVal = confirm("Do you want to continue ?");
   if( retVal == true ){
  window.location = "items.php?del_item&amp;item_id="+id;
      return true;
   }else{
      return false;
   }
} 
```

然后使用`confirmAlertBox(<?php echo $item_id; ?>)`而不是调用它`confirmAlertBox()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:48:08.143

我会一起删除单独的功能，并使用一些更简单的东西。

在构建表格单元格时，将删除链接更改为：

```
<a href="items.php?del_item&amp;item_id='.$item_id.'" 
   onclick="return confirm('Do you want to Delete this item?');">
       Delete Item
</a> 
```

*不确定如何在 php 中转义 ' 字符，因此您需要在确认函数中执行此操作*

这样，链接已经在锚点中，如果用户单击确定，他们将被发送到该链接。否则`false`将被退回，用户将留在原地。

# java - 如何使用正则表达式获取特定数据？

> ID：14578607
> 
> 赞同：-1
> 
> 时间：2013-01-29T08:34:10.983
> 
> 标签：java, regex

我有以下数据的输入流：

```
---------------------------------------------
manil@manil-ubvm:~$ db2level
DB21085I  Instance "manil" uses "64" bits and DB2 code release "SQL10010" with 
level identifier "0201010E".
Informational tokens are "DB2 v10.1.0.0", "s120403", "LINUXAMD64101", and Fix 
Pack "0".
Product is installed at "/home/manil/sqllib".
--------------------------------------------- 
```

从上面我需要`v10.1.0.0`存储在一个字符串变量中。

如何使用java正则表达式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:49:59.610

使用类似这样的东西来捕获版本模式：

```
import java.util.regex.*;

    public class RTest {

            public static void main(String [] args) {
                    String raw_data = "asdkgjasdbf984 sdkjfashfiu 4qwsadkfjnv w98sa-asdf08gywbfsd v1231.123.12.11.1 fkjsdfn9823isd";
                    Pattern version_find = Pattern.compile("v[\\d+\\.?]+");
                    Pattern directory_find = Pattern.compile("[\\/[^\\/]+]+");
                    Matcher version_finder = version_find.matcher(raw_data);
                    while(version_finder.find()) {
                          System.out.println(version_finder.group());
                    }
            }
    } 
```

输出是：

```
v1231.123.12.11.1
/isd/asdasd2903 ajshdaq09r34/adsj 38/ 
```

如果你是一名程序员，你**真的**需要深入理解正则表达式。它们是必需品之一。一开始它们很难，但一旦你“破解它们”，你就不会忘记它。就像骑自行车一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T08:56:25.737

这将满足您的需求：

```
String version = yourLine.replaceAll(".*(v\\d+([.]\\d+){3}).*", "$1") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:39:02.643

你在这里不需要正则表达式

只需使用

`String .contain()`方法和`String substring()`

# logic - Logicmonitor - 如何使用 API 获取角色列表？

> ID：14578608
> 
> 赞同：1
> 
> 时间：2013-01-29T08:34:15.287
> 
> 标签：logic, monitor

我在我的项目中使用逻辑监视器。我使用添加帐户 API 创建了用户。但是我们需要为每个用户添加角色 ID。我正在手动提供角色 ID。有谁知道如何使用 API 获取角色列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:36:50.367

尝试

```
$container->getParameter('security.role_hierarchy.roles'); 
```

显然，如果你无法达到`$container`，你必须将它注入你的`Logicmonitor`班级

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:51:36.253

我得到了答案，要从 logicmonitor 获取角色列表，我们必须使用下面给出的 HTTP 请求，

[http://companyname.logicmonitor.com/santaba/rpc/getRoles?c=companyname&u=username&p=password](http://companyname.logicmonitor.com/santaba/rpc/getRoles?c=companyname&u=username&p=password)

# asp.net-mvc - 多个站点相同的 ASP MVC 文件夹

> ID：14578610
> 
> 赞同：1
> 
> 时间：2013-01-29T08:34:18.243
> 
> 标签：asp.net-mvc, iis-7

我有一个需要为多个客户托管的网站。我可以有 1 个包含所有站点文件的文件夹吗？并为使用此文件夹的每个客户端创建站点，但我需要根据客户端更改一些内容，例如连接字符串

# image-processing - 迭代扭曲图像？

> ID：14578613
> 
> 赞同：2
> 
> 时间：2013-01-29T08:34:35.753
> 
> 标签：image-processing, opencv

我想做这样的事情[Image Warping LIB](http://code.google.com/p/imgwarp-opencv/)。图像应该被变形（翘曲）作为控制点，但是，当我尝试使用基于 OpenCV 的它可能从原始图像变形到变形图像。但是，不能将该结果（变形图像）用作下一阶段变形的源图像。

做逐阶段变形（使用之前的变形图像作为每个状态的源图像），我可以这样做吗？因为，插值使图像在进行一些迭代时变得模糊并变成黑色或白色。

谢谢你的帮助！

![原始图像](../Images/d680625036c20241b4d4ae6c24a3307e.png)![变形图像](../Images/ac3fa8a55ece14079d24be4d07888567.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:07:44.627

技术方案不是仅仅在每个阶段之后应用变形，而是将变形聚合并在源图像上应用总变形。例如，在第一阶段，控制点的移动定义了变形。变形保存到堆栈并应用。您移动了一组新的控制点。额外的变形也会保存到堆栈中。但是不是对已经变形的信息应用变形，而是计算总变形并将其应用于原始图像。这样，无论您有多少阶段，舍入和插值只进行一次。

也就是说，计算两个连续变形的总变形可能非常容易或非常困难，具体取决于这些变形的作用以及实现方式。该库的源代码看起来不太适合简单的解决方案。

# c++ - IDXGIKeyedMutex::ReleaseSync 何时渲染“完成”？

> ID：14578616
> 
> 赞同：3
> 
> 时间：2013-01-29T08:34:54.303
> 
> 标签：c++, direct3d

我正在查看[文档`IDXGIKeyedMutex`](http://msdn.microsoft.com/en-us/library/windows/desktop/ff471339%28v=vs.85%29.aspx)，但我对以下内容有点不确定：

> 完成对表面的渲染后，必须调用 ReleaseSync 方法。

我的问题是“当你完成渲染”是什么意思？是在删除纹理作为即时上下文的渲染目标之后，当我调用`Flush`即时上下文时，还是在调用之前需要某种其他形式的 GPU 围栏/同步`ReleaseSync`？

还有为什么`D3D11_RESOURCE_MISC_SHARED_KEYEDMUTEX`首选`D3D11_RESOURCE_MISC_SHARED`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:47:30.597

在调用 ID3D11DeviceContext::Draw 调用或其他调用以发出 GPU 命令以写入缓冲区（即 ID3D11DeviceContext::CopyResource）之后，您应该调用 IDXGIKeyedMutex::ReleaseSync。您不需要显式调用 Flush。有关使用 AcquireSync/ReleaseSync 的示例，请查看[http://code.msdn.microsoft.com/DXGISyncSharedSurf](http://code.msdn.microsoft.com/DXGISyncSharedSurf)

D3D11_RESOURCE_MISC_SHARED_KEYEDMUTEX 优于 D3D11_RESOURCE_MISC_SHARED，因为它可以与 D3D11_RESOURCE_MISC_SHARED_NTHANDLE 一起使用，从而为跨进程表面共享提供更好的安全性。

# ios - 使用 Touchxml 和 xcode 动态创建 Xpath 查询

> ID：14578619
> 
> 赞同：0
> 
> 时间：2013-01-29T08:35:05.880
> 
> 标签：ios, xcode, xpath, touchxml

我是 touchxml 和 xpath 的新手，我只想知道是否有任何方法可以动态获取节点的属性？我有这个xml

```
<?xml version="1.0" encoding="UTF-8"?>
<countries>
   <country id="Philippines">
      <countryname>Philippines</countryname>
      <subsidiaries>
          <subsidiary>
              <name>Sartorius Philippines Inc.</name>
              <address>Unit 20-A The World Centre Building, 330 Senator Gil Puyat Avenue Makati 1209 City Philippines, Philippines</address>
              <phone>+63.2.8640.929</phone>
              <fax>+63.28640.932</fax>
              <email>enquiry.philippines@sartorius.com</email>
              <website>http://www.sartorius-mechatronics.com.ph</website>
          </subsidiary>
     </subsidiaries>
  </country>
  <country id="Denmark">
       <countryname>Denmark</countryname>
       <subsidiaries>
          <subsidiary>
              <name>Sartorius Stedim Nordic A|S</name>
              <address>stedim Hoerskaetten 6d 2630 Taastrup, Denmark</address>
              <phone>+45.7023.4400</phone>
              <fax>+45.4630.4030</fax>
              <email>ne.customersupport@sartorius.com</email>
              <website></website>
         </subsidiary>
         <subsidiary>
              <name>Sartorius Nordic A|S</name>
              <address>Hoerskaetten 6D 2630 Taastrup, Denmark</address>
              <phone>+45.7023.4400</phone>
              <fax>+45.4630.4030</fax>
              <email>ne.customersupport@sartorius.com</email>
              <website></website>
       </subsidiary>
     </subsidiaries>
    </country>
</countries>` 
```

我有一个显示所有国家/地区名称的表格视图，我希望发生的是当我单击丹麦这个词时，它会显示 id="denmark" 的属性

我现在有这个 xpath 查询：

```
resultNodes = [rssParser2 nodesForXPath:@"/countries/country[@id]/subsidiaries/subsidiary" error:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:54:42.147

我不是 100% 确定在 Objective-C 中连接字符串的最佳方法，但我的想法是，假设你有一个`countryId`带有你正在寻找的 id 的变量，你会做这样的事情：

```
NSString *xpath =
    [NSString stringWithFormat:@"%@/%@/%@",
         @"/countries/country[@id = '", countryId, @"']/subsidiaries/subsidiary"];
resultNodes = [rssParser2 nodesForXPath:xpath error:nil]; 
```

# python - python循环使用gdal和数据库目录进行图像处理

> ID：14578620
> 
> 赞同：0
> 
> 时间：2013-01-29T08:35:12.370
> 
> 标签：python, image-processing, gdal

我是python的新手，我想要的只是创建一个执行以下命令的循环，并且如果hDataset打开成功到下一个进程

```
hDataset = gdal.Open( pszFilename, gdal.GA_ReadOnly )
if hDataset is None:
   print some condition
else:
   print somecondition. 
```

下一个进程使用`hDataset`if 它成功打开，否则它应该继续循环直到`hDataset`成功打开并将其传递给下一个进程。

# ios - iOS 跨不同 UIWebViews 共享 cookie

> ID：14578624
> 
> 赞同：0
> 
> 时间：2013-01-29T08:35:24.320
> 
> 标签：ios, objective-c, cookies, uiwebview, uiwebviewdelegate

是否可以在两个不同的 UIWebView 实例之间共享 cookie。我正在尝试的是在 UIWebView 中加载请求并在 shouldStartLoadWithRequest 委托方法中检查请求类型是否为 UIWebViewNavigationTypeLinkClicked || UIWebViewNavigationTypeForm 已提交。如果是，我将展示一个新的视图控制器，它通过传递在 shouldStartLoadWithRequest 中捕获的 url 在其视图之上添加了一个新的 UIWebView。然后我加载在新 UIWebView 中传递的 url。在此过程中，cookie 不会通过 UIWebViews 传递。谁能告诉我出了什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T08:49:19.500

一个应用程序中的所有 webview 都应该有一个共享的 cookie 存储。`[NSHTTPCookieStorage sharedHTTPCookieStorage]`

如果 ONE APP 内的所有 Web 视图都没有使用那个，那就是有问题了 :)

* * *

至于应用程序之间的共享：你不能。你是沙盒的！

# data-structures - 广度优先搜索用于搜索循环图中任意两个节点之间的所有路径

> ID：14578626
> 
> 赞同：0
> 
> 时间：2013-01-29T08:35:30.053
> 
> 标签：data-structures, graph, breadth-first-search

我正在尝试使用 BFS 获取循环图中两个节点之间的所有路径。我发现 BFS 不会跟踪它之前的节点，所以需要添加一些其他的集合来实现相同的效果。

> 问题是 - 我们是否应该避免使用 BFS 来获取节点中的所有路径并使用 DFS 或 BFS 也可以提供潜在的解决方案。

如果它在那里，请为我提供相同的逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:04:47.187

我假设您只想找到简单的路径（没有循环），否则可能会有无限的路径。如果这不是一个要求，那么理论上 BFS 或 DFS 都可以工作（尽管 DFS 只会继续探索一个循环，永远不会找到其他更短的路径），但取消这个要求并没有真正的意义。

对于 BFS 和 DFS，每个节点都应该有一个已处理的标志，以防止循环图中的无限多路径。

考虑以下：

```
A with children B, C
B with children C, D
C with children B, D 
```

使用 BFS，您会错过 A -> C -> B -> D，因为 B 在处理 C 之前已被标记为已处理。

使用 DFS，这不会成为问题，因为在向上备份树时应重置已处理标志。

到目前为止，您可以跟踪每个节点的整个路径，但这不可行，因为它需要大量额外的存储空间和时间。

您可以摆脱 BFS 的已处理标志并在路径中的节点数 > 树中的节点数时停止处理，并从输出中删除所有非简单路径。

# android - Google Play 许可服务：关于 userId 字段的断言？

> ID：14578627
> 
> 赞同：3
> 
> 时间：2013-01-29T08:35:54.333
> 
> 标签：android, google-play

根据其参考实现，我们假设**Google Play Licensing** Serv{ice,er} 在[其响应的](http://code.google.com/p/marketlicensing/source/browse/library/src/com/android/vending/licensing/ResponseData.java)[**userId**](http://code.google.com/p/marketlicensing/source/browse/library/src/com/android/vending/licensing/ResponseData.java)字段中返回一个[// **Application-specific user identifier**。](http://code.google.com/p/marketlicensing/source/browse/library/src/com/android/vending/licensing/LicenseValidator.java#155)另一方面，[LVL 参考](http://developer.android.com/google/play/licensing/licensing-reference.html)没有做出这样的承诺。

实际上，返回的值似乎是冗长的二进制数据，甚至可能以（至少）一个`0x00`字节开始，Base64 编码。

应该从评论中假设该字段的值代表客户的 ID，经过混淆但**在每个应用程序中仍然是唯一的**，因此可以使用该值识别客户，而另一方面不适合确定它是否是与可能发布的另一个应用程序相同的客户。

但是，如果要依靠这个假设来做生意，应该是**官方确认**的，我找不到这样的确认。此外，**最大长度**断言会很有帮助，但到目前为止我还没有找到。

有没有人找到这方面的更多信息或愿意分享他们的经验？我非常感谢这一点。

**更新：**任何人都可以确认这些 ID 包含 24 x 8 位二进制数据，并用前导（第 25 个）`0x00`字节填充吗？

# asp.net-mvc - 如何将数据从一个视图传递到 MVC 4.0 中的另一个视图？

> ID：14578631
> 
> 赞同：0
> 
> 时间：2013-01-29T08:35:59.270
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我需要在 MVC 4.0 中将数据从一个视图传递到另一个视图。我是 MVC 4.0 的新手。场景是我有一个视图，其中在加载视图时填充了一个组合框。我在这个视图上有一个表单，在提交这个表单时，我需要做一些处理，并相应地在视图上显示一些状态消息。

由于 HTTP 是无状态协议，因此数据（填充组合框的数据）会丢失。我想保留这些数据，因为我不想一次又一次地进行相同的处理来获取数据。请建议我如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:41:10.267

在 MVC 中（尽管我不认为是唯一的），您可以使用`Session`该类跨多个视图存储变量。

您可以使用 将对象`Session`作为键/值对添加到数组中`Session.Add()`，并且可以通过索引或键访问数据。

您还可以通过简单地使用`Session`索引或键访问索引来添加变量，无论您是否已将其显式添加到数组中。所以你可以这样做`Session[0] = new Object();`或者`Session["object"] = new Object();`因为他们已经覆盖了访问器属性。

但是，我建议您对`Session`阵列的正确使用进行一些研究。

# c# - 即使变量未使用，是否总是执行局部变量赋值？

> ID：14578641
> 
> 赞同：3
> 
> 时间：2013-01-29T08:36:35.940
> 
> 标签：c#, variable-assignment, compiler-optimization

我有一个静态容器类，它拥有某个类的句柄`A`：

```
public static class Container
{
    private static A _a;        
    public static void Register(A a) { _a = a; }
    public static void Run() { _a.DoIt(); }
} 
```

容器`A`实例的注册在`A`构造函数中执行：

```
public class A
{
    public A() { Container.Register(this); }        
    public void DoIt() { Console.WriteLine("Running!"); }
} 
```

现在，假设我`A`通过调用仅包含实例化的方法来注册我的`A`实例：

```
public void Init() { var a = new A(); } 
```

从理论上讲，是否可以优化编译以忽略此分配，或者我是否可以 100% 确定在调用该方法`A`时*始终*实例化`Init`？

**示例**当我运行以下代码时：

```
Init();
...
Container.Run(); 
```

将`Container._a`始终定义并将`DoIt`方法的输出写入控制台？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T08:39:41.233

编译器通常不知道 A 的构造函数是否具有可观察到的副作用，因此它总是会调用它。它可能不会保留变量“a”。

所以，构造函数会被调用，但结果可能不会赋值给变量；相反，如果没有其他对象引用它，则 A 对象可能会立即注册以进行垃圾收集。（在您的情况下，其他东西确实引用了它 - 即 Container 类 - 所以它不会被垃圾收集！）

在您的情况下，构造函数显然在任何情况下都有副作用（因此编译器优化构造函数调用将是一个重大错误）。

总之：

*   构造函数将始终被调用。
*   可能不会将结果分配给局部变量，因为编译器知道它没有可观察到的副作用。
*   在您的代码中，其他内容保留了对构造对象的引用，因此不会被 GC。

# sql - ms sql 从变量中插入值并从表中选择

> ID：14578645
> 
> 赞同：1
> 
> 时间：2013-01-29T08:37:11.497
> 
> 标签：sql, sql-server, sql-insert

我想将变量中的值和选择结果插入表中。

```
declare @actual Date
set @actual = getdate() 
```

* * *

这是我的尝试：

```
insert into test (ID, Date) (select ID, @actual from Table) 
```

* * *

我收到一条错误消息！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T08:39:29.020

使用`INSERT INTO..SELECT`声明，

```
DECLARE @actual Date
SET @actual = GETDATE()

INSERT INTO test (ID, Date) 
SELECT ID, @actual 
FROM   Tablename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T08:41:34.150

```
You can try like this for using a select clause for Insert

insert into test(id,date) select col1,col2 from table; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:48:06.257

```
INSERT INTO TEST
(ID,DATE)
SELECT COLUMN1,COLUMN2 FROM TABLE 
```

# svg - 如何在highcharts“区域”图上为每个点添加虚线边框

> ID：14578648
> 
> 赞同：1
> 
> 时间：2013-01-29T08:37:40.747
> 
> 标签：svg, highcharts

我有一个高图“区域”图，对于该图上的每个点，我想在彩色区域上添加一个虚线边框，一直到底部。

![在此处输入图像描述](../Images/d8acb9656f6eb5b5c1ca8c39dac835f3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T09:06:49.607

要为您的面积图添加虚线边框，请提及[**`dashstyle`**](http://api.highcharts.com/highcharts#plotOptions.area.dashStyle)每个系列将在其中表示。

## 示例片段

```
 Series:[{
            name: 'USA',
            data: [null, null, 10421, 10358, 10295, 10104 ],
            dashStyle: 'longdash'
        }] 
```

# 可能的值

*   坚硬的
*   短划线
*   短点
*   短划线点
*   ShortDashDotDot
*   点
*   短跑
*   长划线
*   破折号
*   长点划线
*   LongDashDotDot

## 演示

[**Jsfiddle**](http://jsfiddle.net/gopinaghr/bZYe7/)在这里。

# opengl - qt + open Gl=paintgl 绘制三角形的函数

> ID：14578650
> 
> 赞同：1
> 
> 时间：2013-01-29T08:37:50.410
> 
> 标签：opengl, qt4, gl-triangle-strip

我已经编写了我在上一篇文章中读到的关于一个众所周知的主题的内容，但我继续得到一个绿色窗口，里面没有任何三角形。这是我的绘画功能：

```
void mGLWidget::paintGL()
{

glClearColor( Qt::green );

QSize viewport_size = size();
glViewport(0, 0, viewport_size.width(), viewport_size.height());
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glFrustum(-1, 1, -1, 1, 5, 7); // near and far match your triangle Z distance
glMatrixMode(GL_MODELVIEW);

glColorMask( GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE );
glColor4f( 1.0, 1.0, 1.0, 1.0 );

glTranslatef(-1.5f,0.0f,-15.0f);

glBegin(GL_TRIANGLES);         // Drawing Using Triangles
glVertex3f( 0.0f, 1.0f, 0.0f);      // Top
glVertex3f(-1.0f,-1.0f, 0.0f);      // Bottom Left
glVertex3f( 1.0f,-1.0f, 0.0f);      // Bottom Right
glEnd();
// Finished Drawing The Triangle
// swapBuffers();
} 
```

我只得到一个没有任何三角形的绿色窗口。我的 QT 是 qt4.8 和 opengl 4.0。

我究竟做错了什么 ？-\

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:53:44.043

您的 near 和 far 值很小，并且您将三角形平移了 -15f 单位，这意味着您的三角形没有绘制或充当点。所以你只看到窗口颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:49:19.530

您 glfrustrum 的远近值范围很小，将其设为 1、100 而不是 5、7。可能不是实际的解决方案，但如果不是，它将有所帮助

# jquery-ui - 在 TypeScript 中定义一个自定义的 jQuery UI 小部件

> ID：14578651
> 
> 赞同：19
> 
> 时间：2013-01-29T08:37:53.283
> 
> 标签：jquery-ui, typescript

我们目前正在考虑将我们的 JavaScript 项目翻译成 TypeScript。我们的应用程序严重依赖自定义开发的 jQuery UI 小部件。

在我们当前的代码库中，我们使用深拷贝机制从小部件定义继承，例如，允许我们声明一个泛型`TableWidget`以及`OrdersTableWidget`定义更具体的函数的一个。

因此，我想将我的小部件定义定义为 TypeScript 类，然后将这些类的实例绑定到 jQuery。

例如

```
class MyWidget {
    options: WidgetOptions;
    _init(){
        // general initialization
    }
}

class MySecondWidget extends MyWidget {
    _init(){
        super._init();
        // specific initialization
    }
} 
```

进而

```
$.widget("MyNameSpace.MyWidget", new MyWidget());
$.widget("MyNameSpace.MySeWidget", new MyWidget()); 
```

此外，我想将我的自定义小部件表示为 jQuery UI`Widget`定义的实现

```
class MyWidget implements Widget {
    options: WidgetOptions;
    _init(){
        // general initialization
    }
} 
```

所以我可以在 TypeScript 中使用以下语法：

```
$(selector).MyWidget(options); 
```

我知道我必须使用定义文件（来自[definitelyTyped](https://github.com/borisyankov/DefinitelyTyped)），但是我还没有找到一个可靠的来源来解释我应该如何在TypeScript 中编写自定义的jQuery UI 小部件。有没有人有这方面的经验？

任何帮助都非常感谢，一如既往！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-29T09:51:00.870

`Widget`由于缺少重载的构造函数，我不确定您是否可以编写实现接口的类。您可以创建一个由`Widget`接口键入的变量。

一个标准的 jQuery 插件将用几乎纯 JavaScript 表示，并且不会使用模块或类，因为它最终被包装为 jQuery 的一部分，它本身不是模块或类。

这是一个名为的空插件`plugin`，看起来像任何标准的 jQuery 插件，但您可以看到它利用了 TypeScript 类型系统并扩展了`JQuery`接口以允许调用它。

```
/// <reference path="jquery.d.ts" />

interface JQuery {
    plugin(): JQuery;
    plugin(settings: Object): JQuery;
}

(function ($) {

    function DoSomething(someParamater: string) : void {

    }

    $.fn.plugin = function (settings) {

        var config = {
            settingA: "Example",
            settingB: 5
        };

        if (settings) {
            $.extend(config, settings);
        }

        return this.each(function () {

        });
    };

})(jQuery); 
```

这将以正常方式调用。

```
$('#id').plugin(); 
```

所以真的，我的回答是——你不能真正做你想做的事，因为你正在为 jQuery 添加声明的接口，而不是将它们作为模块公开。您可以将使用情况包装在模块中，例如将 jQuery 方面从 TypeScript 中的使用中抽象出来的适配器，或者您可以从插件内部调用您的类，但插件或小部件并不真正适合模块或班级。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-06T16:22:05.720

在打字稿中拥有一个基类可能会有所帮助，其他小部件类可以从中派生。它的唯一目的是提供基类语义，这样您就可以访问基类的成员，而不必求助于弱类型。

诀窍是在运行时（在构造函数中）删除所有成员——否则你会遇到小部件工厂提供的继承问题。例如，该`option`方法将覆盖小部件的原始方法，这是不希望的：我们只想能够调用它（以静态类型的方式）。

```
class WidgetBase {

    public element:JQuery;

    constructor() {
        // remove all members, they are only needed at compile time.
        var myPrototype =  (<Function>WidgetBase).prototype;
        $.each(myPrototype, (propertyName, value)=>{
           delete myPrototype[propertyName];
        });
    }

    /**
     * Calles the base implementation of a method when called from a derived method.
     * @private
     */
    public _super(arg1?:any, arg2?:any, arg3?:any, arg4?:any) {

    }

    /**
     * @private
     */
    public _superApply(arguments) {

    }

    /**
     * Gets or sets the value of the widget option associated with the specified optionName.
     */
    public option(optionName:string, value?:any):any {

    }

    // ... further methods from http://api.jqueryui.com/jQuery.widget/
} 
```

然后你可以像这样实现你自己的小部件：

```
class SmartWidget extends WidgetBase {

    constructor(){
        super();
    }

    public _create() {
        var mySmartOption = this.option('smart'); // compiles because of base class
        this.beSmart(mySmartOption);
    }

    public _setOption(key:string, value:any) {
        if (key === 'smart') {
           this.beSmart(value);
        }

        this._super(key, value); // compiles because of base class
    }

    private beSmart(smartOne:any){
        // ...
    }

}

// register
jQuery.widget("myLib.smartWidget", new SmartWidget());

// assuming you are using https://github.com/borisyankov/DefinitelyTyped
declare interface JQuery{
    smartWidget();
    smartWidget(options:any);
    smartWidget(methodName:string, param1?:any, param2?:any, param3?:any, param4?:any);
} 
```

最后，您可以使用您的小部件：

```
$(".selector").smartWidget({smart:"you"}); 
```

# c# - 文本框的 Ajax 日历扩展器

> ID：14578655
> 
> 赞同：0
> 
> 时间：2013-01-29T08:38:20.613
> 
> 标签：c#, ajax, visual-studio-2010

> **可能重复：**
> [如何将天数添加到今天的日期？](https://stackoverflow.com/questions/3818193/how-to-add-number-of-days-to-todays-date)

我想检查如何将 3 天添加到 date() 以便用户无法在从今天起 3 天内选择任何日期。下面是我的代码....

```
 function checkDate(sender, args) {
        if (sender._selectedDate < new Date()) {
            alert("You cannot select a day earlier than today!");
            sender._selectedDate = new Date();
            sender._textbox.set_Value(sender._selectedDate.format(sender._format))
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:46:16.870

```
var dateFromNow  = new Date();

dateFromNow = dateFromNow.setDate(dateFromNow.getDate()+3);

if(sender._selectedDate < dateFromNow){

//code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:52:03.300

看看[http://www.datejs.com/](http://www.datejs.com/)（它是开源的，与'.com'相反）。

然后你可以这样做：

```
if (sender._selectedData < Date.today().add(3).days()) { ... } 
```

另外，根据[如何将天数添加到今天的日期？](https://stackoverflow.com/questions/3818193/how-to-add-number-of-days-to-todays-date)

```
var minDate = new Date();
minDate.setDate(minDate.getDate() + 3); 
if (sender._selectedData < minDate) { ... } 
```

# php - Quickbooks 集成（内联网）

> ID：14578656
> 
> 赞同：0
> 
> 时间：2013-01-29T08:38:24.110
> 
> 标签：php, integration, intranet, quickbooks

我需要将 vTiger CRM 与 Quickbooks 2010 集成。所以它是 PHP。QB 服务器和运行 vTiger 的 Linux 机器位于同一个办公室。我试图弄清楚是否有一种方法可以让 PHP 在不使用 Web 连接器的情况下直接与 QB 服务器对话。我们需要实时数据访问。不像真正的“实时”，但需要在 5-30 秒内生成报告。只读取数据，不写入。有什么方法可以直接向 QB 服务器发送/接收 qbXML？提前致谢。迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:37:46.343

这可以做到……但请注意，QuickBooks 并不总是最可靠的软件，可用于集成以进行实时数据访问 - 与 QuickBooks 的连接往往既缓慢又脆弱，这就是为什么您通常会看到使用 Web 连接器的排队模型。

您可以做的是编写一个自定义 C# 组件（查看 SDK 中包含的示例，特别是这个：C:\Program Files (x86)\Intuit\IDN\QBSDK12.0\samples\qbdt\c-sharp\qbXML \CustomerAdd) 打开与 QuickBooks 的连接，然后执行任何操作。

“随便”可能是这样的：

*   对 QuickBooks 运行查询，然后将数据 HTTP POST 回 vTiger

或者

*   打开一个套接字并监听传入的请求，在这种情况下，PHP 可以连接到该套接字并提供可以中继到 QuickBooks 的组件请求，然后返回响应

请注意，每 5 秒在 QuickBooks 中生成一份报告可能会大大降低 QuickBooks 的速度。根据您正在谈论的数据量和过滤器，甚至可能无法让 QuickBooks 快速生成报告。

同样，请注意某些事情会导致与 QuickBooks 的连接失败，因此您必须优雅地处理这些问题。具体来说：

*   QuickBooks 自动更新将锁定集成应用程序
*   如果您有太多用户同时登录，您将被锁定
*   如果其他人进入单用户模式，您将被锁定

等等

也许如果您能提供更多关于为什么需要如此频繁地访问报告的详细信息，我们可以提供一些额外的信息。

您的代码将如下所示：

```
 while (true)
        {
            string input = "your fancy qbXML request goes here";

            RequestProcessor2 rp = null; 
            string ticket = null;
            string response = null;
            try 
            {
                rp = new RequestProcessor2 ();
                rp.OpenConnection("", "Your App Name");
                ticket = rp.BeginSession("", QBFileMode.qbFileOpenDoNotCare );
                response = rp.ProcessRequest(ticket, input);
            }
            catch( System.Runtime.InteropServices.COMException ex )
            {
                MessageBox.Show( "COM Error Description = " +  ex.Message, "COM error" );
                return;
            }
            finally
            {
                if( ticket != null )
                {
                    rp.EndSession(ticket);
                }
                if( rp != null )
                {
                    rp.CloseConnection();
                }
            };

            // Do something with the response here
             ... 
        } 
```

# apache - 安装多个版本的 NodeJS

> ID：14578660
> 
> 赞同：0
> 
> 时间：2013-01-29T08:38:50.967
> 
> 标签：apache, node.js, forever

我需要知道如何在同一台机器上多次安装 NodeJS。我知道 NVM，但这只允许我一次拥有 1 个活动版本的节点。我需要让这些同时运行。

[Forever](https://npmjs.org/package/forever)还需要安装在每个节点安装上。

我完全不知道我在这里做什么。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:46:55.207

您可以为节点版本的安装位置创建多个符号链接：

例如像这样安装V1：

```
cd /opt
wget http://nodejs.org/dist/v0.8.17/node-v0.8.17.tar.gz
tar zxf node-v0.8.17.tar.gz
cd node-v0.8.17
./configure --prefix=/opt/node-v0.8.17 && make install 
```

然后创建符号链接：例如：

```
cd /opt
ln -s node-v0.8.17 nodeV1 
```

运行此节点安装：

```
nodeV1 
```

（重复其他版本的不同位置和符号链接）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:38:27.013

我想，你可以在安装节点 js 时尝试使用选项“--prefix”

```
./configure --prefix=/path/to/node_version 
```

# scala - 类型与 map 和 flatMap 不匹配

> ID：14578662
> 
> 赞同：1
> 
> 时间：2013-01-29T08:38:53.807
> 
> 标签：scala, types, map

在尝试使用 scala 中的选项时，我遇到了这个特殊的问题。

我开始创建一个 List[Option[Int]] 如下：

```
scala> List(Some(1),Some(2),None,Some(3))
res0: List[Option[Int]] = List(Some(1), Some(2), None, Some(3)) 
```

然后我尝试在 res0 中的列表条目上映射 1 的添加，如下所示：

```
scala> res0 map (_ + 1) 
```

这给了我错误：

```
<console>:9: error: type mismatch;
 found   : Int(1)
 required: String
              res0 map (_ + 1)
                            ^ 
```

然后我尝试对条目进行 flatMapping 的添加，如下所示：

```
scala> res0 flatMap (_ + 1) 
```

这给了我同样的错误：

```
<console>:9: error: type mismatch;
 found   : Int(1)
 required: String
              res0 flatMap (_ + 1)
                                ^ 
```

但是类似的东西`res0.flatMap(r => r)`效果很好，结果是：

```
res9: List[Int] = List(1, 2, 3) 
```

谁能告诉我为什么将条目添加到 1 对 map 和 flatMap 都会失败？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T08:55:57.327

您尝试的前两件事失败了，因为您试图将 an 添加`Option`到 an `Int`，这是不可能的。

发生奇怪的错误消息是因为 Scala 假设，因为`Option`没有`+`方法，您正在尝试`String`连接，但是您必须将 an 添加`Option`到 a`String`或 a添加`String`到 an `Option`，并且您都没有这样做，因此错误消息.

在最后一种情况下，您没有尝试添加任何内容，您只是`Option`按原样返回，因此没有错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T08:47:54.610

尝试使用 get 提取值`Some[Int]`以`Int`允许计算，`value + 1`即：

```
res0 map{_.getOrElse(0) + 1} 
```

正如@Sepp2k 所指出的，您也可以使用 a`collect`来避免默认为`None`

```
res0 collect {case Some(x) => x + 1 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T08:53:34.233

要增加所有不是的值`None`，您还需要映射`Option`列表的每个元素，如下所示：

```
scala> res0.map(_.map(_ + 1))
res1: List[Option[Int]] = List(Some(2), Some(3), None, Some(4)) 
```

如果你想过滤掉`None`s，你确实会使用 a `flatMap`：

```
scala> res0.flatMap(_.map(_ + 1))
res2: List[Int] = List(2, 3, 4) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T08:53:51.940

给定的函数`flatMap`和给定的函数都可以`map`获取列表元素类型的值 - 在这种情况下`Option[Int]`。但是您的函数`_ + 1`需要一个`Int`，而不是，因此在这种情况下`Option[Int]`，您不能将其用作参数。此外，给定的函数应该返回一个可迭代的¹，但您的函数将返回一个数字。`map``flatMap``flatMap`

这将做你想要的：`res0 flatMap (_ map (_ + 1))`。在这里，给定的函数`flatMap`接受一个并通过调用选项`Option[Int]`返回一个。然后获取函数返回的选项并将它们连接起来。`Option[Int]``map``flatMap`

¹ 技术上是一个`GenTraversableOnce`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T08:56:11.967

您尝试在 a 中的每个元素上调用，`e.+(1)`但不是由 . 声明的函数。然而，字符串连接是可能的（我假设有一个隐含的 from to ），但前提是第二个参数也是一个字符串（不确定为什么这里不考虑我假设的隐含的存在）。`e``List[Option[Int]]``+``Option[_]``Any``String`

您可以通过使用@korefn 建议的默认值来解决这个问题，或者“隐藏”另一个调用之间的区别`Some(x)`，即通过`None``map`

```
map(_.map(_ + 1)) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-29T09:00:35.237

它们失败了，因为类型错误并且编译器正确地声明了它。

map 案例失败，因为`map`需要一个 function `A => B`。在您的代码中，`A => B`is really `Int => Int`which 将不起作用，因为调用`map`您的列表意味着它`A`实际上是 `Option[Int]`.

此外，`flatMap`期望形式的功能`A => F[B]`。因此，如果您这样做了，您将得到答案`res0 flatMap { o => o map { a => a + 1 } }`。这基本上是以下内容的扩展：

```
for {
  element <- res0 // o above
  value <- element // a above
} yield value + 1 
```

# f# - F# 在运行时编译代码以缺少程序集结尾

> ID：14578665
> 
> 赞同：3
> 
> 时间：2013-01-29T08:39:04.023
> 
> 标签：f#

[我有一个与此问题](https://stackoverflow.com/questions/1156665/how-to-execute-f-code-found-in-a-string-in-a-compiled-f-program)答案中提供的代码相关的问题。

`CompilerParameters`我遇到的问题是在运行时找不到传递给的三个引用程序集（System.dll、FSharp.Core.dll、FSharp.Powerpack.dll） 。我得到的错误是：

> 未知文件（0,0）：错误 0：错误 FS0218：无法读取程序集 'c:\user s\utente\documents\visual studio 2010\Projects\TrashSolution\TrashSolution\bin\D ebug\FSharp.Core.dll '

如何告诉编译器在 GAC 中而不是项目的 bin 目录中搜索这些程序集？如果我在作为字符串提供的代码中打开命名空间，我如何知道要添加哪些程序集？我在哪里可以获得这些信息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T11:46:26.877

在您链接的答案的代码中，底部有一行：

```
let asm = Reflection.Assembly.LoadFrom(fileinfo.Value.FullName) 
```

如果您[`Reflection.Load`](http://msdn.microsoft.com/en-us/library/ky3942xh.aspx)改为调用并将*完全限定的*程序集名称传递给它，它将尝试从 GAC（以及其他一些地方，如果程序集不在 GAC 中）加载程序集。

```
let asm =
    Assembly.Load "SampleAssembly, Version=1.0.2004.0, Culture=neutral, PublicKeyToken=8744b20f8da049e3" 
```

如果您不知道完全限定的程序集名称，则必须使用`AssemblyName`程序集的简单名称创建一个，然后调用采用 a而不是 a的[`Reflection.Load`](http://msdn.microsoft.com/en-us/library/x4cw969y.aspx)重载。`AssemblyName``string`

```
let asmName = AssemblyName "Your.Assembly.Name"
let asm = Assembly.Load asmName 
```

至于知道要加载哪些程序集——我认为没有一种简单的方法可以以编程方式确定它。我现在唯一能想到的两个解决方案：

1.  如果您对给出的代码（作为字符串）*有所*`FSharpCodeProvider`了解，则可以使用 解析它并查看打开了哪些命名空间/模块以及使用了哪些类型。如果您想查看是否使用了某个特定的命名空间或类型（即，在编译代码时需要包含程序集引用），您可以创建一个`.fsx`命名空间的 Map（在您正在编译的地方）和/或将名称键入程序集名称并使用它来引用适当的程序集。
2.  您可以“蛮力”搜索 GAC，方法是使用半文档化的 Fusion API 枚举安装在 GAC 中的所有程序集，然后使用反射检查每个程序集并确定它是否是您需要的。这可能非常慢，所以我会不惜一切代价避免它。如果您决定走这条路，您还*必须*使用该`Assembly.ReflectionOnlyLoad`方法来加载程序集！这允许在您完成检查后卸载程序集 - 如果您使用普通反射，则无法卸载程序集，并且您的程序可能会因`OutOfMemoryException`类似或类似情况而崩溃。

**编辑：**事实证明，通过其简单名称加载程序集是成功的，`fsi`而不是在普通的 F# 代码中，因为会自动为[AppDomain.AssemblyResolve](http://msdn.microsoft.com/en-us/library/vstudio/system.appdomain.assemblyresolve%28v=vs.100%29.aspx)事件`fsi`安装一个处理程序。此事件由 CLR 在您尝试加载程序集且无法解析时触发；该事件为您提供了一种“手动”解析程序集和/或动态生成程序集并将其返回的方法。

如果您`FileNotFoundException`尝试在 F# 项目中运行代码时查看引发的问题，您将在异常的 Fusion Log 属性中看到类似的内容：

```
=== Pre-bind state information ===
LOG: User = Jack-Laptop\Jack
LOG: DisplayName = System
 (Partial)
WRN: Partial binding information was supplied for an assembly:
WRN: Assembly Name: System | Domain ID: 1
WRN: A partial bind occurs when only part of the assembly display name is provided.
WRN: This might result in the binder loading an incorrect assembly.
WRN: It is recommended to provide a fully specified textual identity for the assembly,
WRN: that consists of the simple name, version, culture, and public key token.
WRN: See whitepaper http://go.microsoft.com/fwlink/?LinkId=109270 for more information and common solutions to this issue.
LOG: Appbase = file:///C:/Users/Jack/Documents/Visual Studio 2010/Projects/StackOverflow1/StackOverflow1/bin/Debug/
LOG: Initial PrivatePath = NULL
Calling assembly : StackOverflow1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
===
LOG: This bind starts in default load context.
LOG: No application configuration file found.
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Users/Jack/Documents/Visual Studio 2010/Projects/StackOverflow1/StackOverflow1/bin/Debug/System.DLL.
LOG: Attempting download of new URL file:///C:/Users/Jack/Documents/Visual Studio 2010/Projects/StackOverflow1/StackOverflow1/bin/Debug/System/System.DLL.
LOG: Attempting download of new URL file:///C:/Users/Jack/Documents/Visual Studio 2010/Projects/StackOverflow1/StackOverflow1/bin/Debug/System.EXE.
LOG: Attempting download of new URL file:///C:/Users/Jack/Documents/Visual Studio 2010/Projects/StackOverflow1/StackOverflow1/bin/Debug/System/System.EXE. 
```

查看该日志的底部，您将看到 CLR 在放弃之前搜索程序集的位置。

这是一个简单的处理程序，可让您了解如何使用 AppDomain.AssemblyResolve 处理程序手动解析程序集。（注意：需要在尝试加载程序集的代码*之前添加处理程序！）*

```
System.AppDomain.CurrentDomain.add_AssemblyResolve (
    System.ResolveEventHandler (fun _ args ->
        let resolvedAssembly =
            System.AppDomain.CurrentDomain.GetAssemblies ()
            |> Array.tryFind (fun loadedAssembly ->
                // If this assembly has the same name as the one we're looking for,
                // assume it's correct and load it. NOTE : It may not be the _exact_
                // assembly we're looking for -- then you'll need to adjust the critera below.
                args.Name = loadedAssembly.FullName
                || args.Name = loadedAssembly.GetName().Name)

        // Return null if the assembly couldn't be resolved.
        defaultArg resolvedAssembly null)) 
```

如果您将该代码添加到新的 F# 控制台项目，然后添加`AssemblyName`与 Assembly.Load 一起使用的代码，您应该能够加载`System`程序集，因为它在 F# 项目中默认被引用，并且会在您运行时加载项目。如果您尝试解析`System.Drawing`，它将失败，因为我们的自定义事件处理程序找不到程序集。显然，如果您需要一些更复杂的程序集解析逻辑，您应该以任何对您的应用程序有意义的方式将其构建到事件处理程序中。

最后，这是异常消息中提到的 MSDN 白皮书的链接：[Best Practices for Assembly Loading](http://msdn.microsoft.com/en-us/library/dd153782.aspx)。如果您遇到困难并且无法弄清楚如何解决您需要的程序集，那么值得一读。

# gnuplot - gnuplot：xdata 时间和盒子

> ID：14578676
> 
> 赞同：4
> 
> 时间：2013-01-29T08:39:48.420
> 
> 标签：gnuplot

我在文本文件中有一些温度数据，我想用“盒装”图表示它，像直方图一样显示每天的温度。

```
23 10 2012 12.3
28 10 2012 14.1
30 11 2012 30.4
... 
```

我试图用一个简单的 gnuplot 脚本来表示它，如下所示：

```
set terminal png enhanced font font_file size size_x, size_y tiny
set xdata time
set timefmt "%d %m %Y"
set format x "%d"
set boxwidth 0.9 relative
plot u 1:4 w boxes 
```

我想将没有可用数据的日子留空，但 gnuplot 会为这些日子提供数据可用的最后一天的值。例如，在我之前写的数据文件中，gnuplot 会给出 12.3 到 10 月 23 日，但我想留下这个空白没有任何栏。

有没有办法得到这个？我已经放弃了直方图表示，因为我读过它与时间数据不兼容。

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:34:43.127

你的问题是线路`set boxwidth 0.9 relative`。Relative 表示您正在尝试填充相邻框之间 90% 的空间。你可能想设置一个绝对的boxwidth。如果您将脚本更改为`set boxwidth 0.9 absolute`，那么您将看到垂直线。这是因为在使用时间数据时，x 轴单位实际上是*seconds*，所以当您的 x 比例为多天时，您的框只有 ~1 秒宽。因此，要使每个框都成为一天的宽度，您将使用

```
set boxwidth 3600*24 
```

这是完整的脚本：

```
set term png enhanced
set output 'foo.png'
set xdata time
set timefmt "%d %m %Y"
set format x "%d"
set boxwidth 3600*24
plot 'test.dat' u 1:4 w boxes 
```

和输出：

![在此处输入图像描述](../Images/80391acab43020b64fb78f0d4780e33d.png)

# php - 一个简单的正则表达式来替换 sql 条件运算符？

> ID：14578678
> 
> 赞同：0
> 
> 时间：2013-01-29T08:39:50.500
> 
> 标签：php, regex

我正在编写一个类来处理一些 MySql 函数。
现在，我想要一个正则表达式模式来检测操作。
请看我的代码：

```
$a = "user_id <> 2";

$generalOperators = "/[<>|[<][\sA-Za-z0-9]|>|<|=]([\sA-Za-z0-9])/";
$op = "$1";
$asd = preg_replace($generalOperators, $op, $a);
echo $asd; 
```

这将`user_id 2`作为输出回显！
我是正则表达式的新手。
提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:52:39.883

您还可以使用 str_replace() 添加更多要替换的项目

```
$in_str = str_replace(array('<', '>', '&', '{', '}', '*', '/', '(', '[', ']' , '@', '!', ')', '&', '*', '#', '$', '%', '^', '|','?', '+', '=','"',','), array(''), $str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:44:55.260

```
$a    = "user_id <> 2";
$res  = preg_replace("/[<>]/","",$a);

echo $res; 
```

# windows - 在 Windows 上通过 Git bash 更改文件夹的大小写

> ID：14578680
> 
> 赞同：38
> 
> 时间：2013-01-29T08:40:04.983
> 
> 标签：windows, git

我需要更改文件夹~~和文件~~的大小写。我尝试的第一件事是重命名文件夹，但 Git 没有接受这些更改。所以我尝试使用[`git mv -f controller Controller`](https://stackoverflow.com/questions/1793735/git-change-case-of-a-file-on-windows?lq=1)，但它说：

`fatal: renaming 'application/classes/controller failed: Permission denied`

我尝试设置全局忽略大小写标志：

`git config --global core.ignorecase false`

但它仍然不起作用。有些人建议将文件夹移出 repo，删除，然后重新添加，但是当其他人拉 repo 时，这个更改会被采纳吗？还有什么我可以尝试的吗？

编辑：它适用于文件但不适用于文件夹。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-01-29T10:03:19.107

总结评论，您必须通过中间临时名称重命名目录。例如

```
git mv controller Controller-tmp
git mv Controller-tmp Controller 
```

我认为这与 MinGW 的实现`rename(2)`不支持此操作有关。请参阅此[线程](http://lists.gnu.org/archive/html/bug-gnulib/2009-03/msg00222.html)[`rename`](http://msdn.microsoft.com/en-us/library/zw5t957f.aspx)、有关 CRT实现的 MSDN 文档和[`MoveFileEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365240.aspx)函数的文档。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-03-08T17:31:06.597

确保关闭 Visual Studio 和与该路径相关的任何 Windows 资源管理器文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-30T11:52:52.410

确保在使用中间文件夹重命名文件夹后将更改添加到索引，如下所示。

```
git mv oldfolder newfolder

git add -u newfolder

git commit -m "changed the foldername whaddup" 
```

[参考](http://www.patrick-wied.at/blog/rename-files-and-folders-with-git)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-01T13:47:13.933

除了执行以下操作外，我无法解决此问题

1.  在文件夹名称大小写更改之前从提交分支，作为临时分支只是为了解决此问题。
2.  樱桃采摘提交以在提交前解决文件夹案例名称更改。
3.  重置旧分支这个新的临时分支最终提交。
4.  删除临时分支。

# dojo - dojo dnd 改变被拖元素的类型

> ID：14578684
> 
> 赞同：0
> 
> 时间：2013-01-29T08:40:20.127
> 
> 标签：dojo, drag-and-drop

我正在使用 Dojo 1.8.3

我想使用 dnd 开发一个可定制的表单。我在左侧有一个表单元素列表，在`dojo/dnd/Source`右侧有一个容器，`dojo/dnd/Target`当我放下它时应该会生成 dijit。

```
<div class="normal" style="width: 99%;  height: 99%;" data-dojo-type="dijit/layout/BorderContainer" 
     data-dojo-props="design:'sidebar', gutters: true, liveSplitters: true">
   <div data-dojo-type="dijit/layout/ContentPane"  class="normal" style="width: 30%;  height: 80%;" 
                         data-dojo-props="splitter: true, region: 'left'">

     <div data-dojo-type="dojo/dnd/Source" data-dojo-id="form_tools" id="form_tools"  data-dojo-props="copyOnly: true"   
                                 class="container" style="width:99%;">
                        <div class="dojoDndItem" dndtype="heading">Heading</div>
                        <div class="dojoDndItem" dndtype="textbox">Text Box</div>
                        ... 
                </div>
        </div>
        <div data-dojo-type="dijit/layout/ContentPane" class="normal" id="form_container" 
                         style="width: 68%; height: 80%;" data-dojo-props="splitter: true, region: 'center'">

                <div data-dojo-type="dojo/dnd/Target" data-dojo-id="form_items" id="form_items" class="container" style="height: 80%;" accept="heading,textbox">
                        <script type="dojo/on" event="DndDrop"> form.transform_item(arguments[0], arguments[1], arguments[2], arguments[3]);//source, nodes, copy, target </script>                        </div>
        </div>
</div> 
```

在我的 js 函数`transform_item`中，我正在这样做：

```
this.transform_item = function(){ 
var dragged_items = arguments[3].selection; 

form_items.forInSelectedItems(function(item, id, map){ 
          var dnditem = dojo.byId(id); 
          switch(item.type[0]){ 
            case "textbox": 
              var textbox = new dijit.form.TextBox({ 
                  name: "textbox", 
                  value: "This is a TextBox" 
              }, "textbox_text"); 

              // HERE IS WHERE I SHOULD INSERT THE CODE FOR GENERATING A TEXTBOX 

              require(['dojo/parser'], function(parser){ 
                parser.parse('textbox_text'); 
              }); 

              break; 
 } 
 }); 
    } 
```

在这一点上，当我放下 Target 时出现错误：

```
dojo/parser::parse() error 
TypeError: root is null 

var node = root.firstChild; 
```

如何让 Dojo 生成，例如 `dijit.form.TextBox`当我拖动“文本框”dndtype 时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:11:20.547

**已解决：**我刚刚插入了`textbox`错误的父项，`textbox_text`不存在。所以不需要`parse()`；

# android - 是否可以在画布中绘制列表视图？

> ID：14578689
> 
> 赞同：1
> 
> 时间：2013-01-29T08:40:39.550
> 
> 标签：android, android-layout

现在我使用 canvas( `ondraw()`) 来绘制我的应用程序的图像，如果我想展示一些

在我的应用程序中心列出。我应该怎么做？我有2个想法。

1.  在Dialog中添加ListView，但是屏幕很暗，我不希望这样。

2.  在 LinearLayout 中添加 ListView 并使其`Bitmap`无法绘制图像，我的

    代码如下：

    `ListView modeList = new ListView(context); modeList.setAdapter(new ImageAdapter(context, objects)); linearlayout = new LinearLayout(context); linearlayout.setOrientation(LinearLayout.VERTICAL); linearlayout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); linearlayout.addView(modeList); linearlayout.layout(0, 0, 200, 200); linearlayout.measure((int)Define.getScreenWidth(), (int)Define.getScreenHeight()); linearlayout.setDrawingCacheEnabled(true); linearlayout.buildDrawingCache(true);`

当我画画的时候

`protected void onDraw(Canvas canvas) { canvas.drawBitmap(linearlayout.getDrawingCache(), 200, 200, null); }`

但是，它什么也没画:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:52:29.007

+1 投票给第一种方式。设置对话框样式并禁用深色背景。

第二种方法过于复杂。您最好将 listview 作为子项直接添加到当前窗口，因此它将绘制在所有其他视图之上，或者将所有视图放在框架布局中并将列表视图添加到该框架布局中，因此它将位于所有先前添加的视图之上.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:18:27.207

第一种方式更好，您可以将 Dialog 样式设置为无边界并具有半透明背景。检查[此](https://stackoverflow.com/a/6059132/1705641)链接。

# c++ - 如何使初始化列表和类成员初始化器一起工作？

> ID：14578692
> 
> 赞同：9
> 
> 时间：2013-01-29T08:40:42.233
> 
> 标签：c++, c++11

以下代码在 gcc-4.7.1 和 clang-3.2 下都无法使用 -std=c++11 进行编译。所以我觉得我做错了什么。但我不知道为什么。有人可以给我一个提示吗？基本上，如果我删除 X 的类内成员初始化程序，它就可以工作。那么为什么初始化列表不能与类内成员初始化器一起使用呢？

```
struct X {
    int x = 1;
    int y = 1;
};

int main() {
    X x = {1, 2};
} 
```

gcc 编译错误：

```
a.cpp: In function 'int main()':
a.cpp:7:16: error: could not convert '{1, 2}' from '<brace-enclosed initializer list>' to 'X' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T08:44:41.320

通过在声明点初始化非静态数据成员，您的类不再是聚合（参见 8.5.1 Aggregates **[decl.init.aggr]**）。

一种解决方法是添加一个双参数构造函数。这允许您使用初始化器列表初始化，它允许与聚合初始化相同的语法，即使您的类在技术上不是聚合。

```
struct X {
  X(int x, int y) : x(x), y(y) {}
    int x = 1;
    int y = 1;
};

int main() 
{
    X x1{1, 2};
    X x2 = {1,2};
} 
```

**注意**：对于 C++1y，这些规则已经放宽，这意味着您的类型确实是一个聚合。

# mysql - 运行总 mysql 查询 - 几乎可以工作

> ID：14578693
> 
> 赞同：2
> 
> 时间：2013-01-29T08:40:44.743
> 
> 标签：mysql

我即将完成一个运行总列，但我认为我缺少一些简单的东西。任何帮助将不胜感激。

```
SET @runtot := 0;
SELECT
  COUNT(adjustment_id) AS Adjustments,
  DATE(FROM_UNIXTIME(shifts.outtime)) AS 'Month',
  (@runtot := @runtot + COUNT(adjustment_id)) AS RT
FROM adjustments
  INNER JOIN shifts
    ON (shifts.shiftID = adjustments.shiftID)
  INNER JOIN employees
    ON (shifts.idnum = employees.idnum)
WHERE YEAR(FROM_UNIXTIME(shifts.outtime)) = '2012'
GROUP BY MONTH(FROM_UNIXTIME(shifts.outtime))
ORDER BY MONTH(FROM_UNIXTIME(shifts.outtime))ASC 
```

上面的代码输出：

```
Adjustments | Month      | RT
34          | 2012-08-29 | 34
161         | 2012-09-01 | 161 
```

RT 与调整匹配，并没有像我希望的那样显示运行总数。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:49:50.573

您需要对聚合查询的结果进行汇总：

```
SET @runtot := 0;

SELECT 
    Adjustments,
    Month,
    (@runtot := @runtot + Adjustments) AS RT
FROM ( SELECT
COUNT(adjustment_id) AS Adjustments,
DATE(FROM_UNIXTIME(shifts.outtime)) AS 'Month'
FROM
adjustments
INNER JOIN shifts ON (
shifts.shiftID = adjustments.shiftID
)
INNER JOIN employees ON (shifts.idnum = employees.idnum)
WHERE
YEAR (FROM_UNIXTIME(shifts.outtime)) = '2012'
GROUP BY MONTH(FROM_UNIXTIME(shifts.outtime))
ORDER BY MONTH(FROM_UNIXTIME(shifts.outtime)) ASC
) x 
```

# java - null != something 和 something != null 之间的区别

> ID：14578703
> 
> 赞同：2
> 
> 时间：2013-01-29T08:41:12.927
> 
> 标签：java, null-check

`null != something`Java和`something != null`Java之间有区别吗？如果有区别，那么我应该使用哪一个，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T08:44:58.163

它可能来自您编写的所谓的 joda-conditions，`"bla" == myVariable`而不是`myVariable == "bla"`因为它可能碰巧`myVariable = "bla"`在某些语言中返回“bla”但也将“bla”分配给 myVariable

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T08:44:33.700

`null != something`和之间没有区别`something != null`。您一定在考虑两者`person.getName().equals("john")`的`"john".equals(person.getName())`区别：第一个会抛出`NullPointerException`if `getName()`returns `null`，而第二个不会。但这不适用于您的问题示例。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-29T09:39:42.210

我只想指出，这样做的“尤达条件”基本原理（在 C 和 C++ 等语言中）不适用于这种（Java）案例。

1.  Java 不允许将通用表达式用作语句，因此两者

    ```
     something == null; 
    ```

    和

    ```
     null == something; 
    ```

    将是编译错误。

2.  `something == null`和的类型`something = null`不同；boolean 和一些引用类型。在这种情况下，这意味着两者：

    ```
     if (something = null) {
         ...
     } 
    ```

    和

    ```
     if (null = something) {
         ...
     } 
    ```

    将是编译错误。

事实上，我想不出一个*现实*的例子，哪里`null == something`会出现编译错误而`something == null`不会。因此，它在防错方面没有任何成就。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T08:45:09.197

从性能上看不会有区别，两边的算子都是执行任何方式的。但是对于更易读的代码，第二个似乎更易读

```
 obj.getSomething().getAnotherThing().doSomething() != null

  null != obj.getSomething().getAnotherThing().doSomething() 
```

但是，如果您只想比较变量或参数，则更具可读性

```
 something != null 
```

当然，这取决于读者的感觉。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T08:42:56.993

没有区别，但有些人使用它是为了便于代码的可读性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T08:45:01.863

在java中，如果我们比较任何东西，我们总是必须将变量放在左侧，而值放在右侧......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-29T08:45:32.277

它们都是一样的，没有区别。

# java - 如何在安卓游戏中制作动画特效？

> ID：14578704
> 
> 赞同：1
> 
> 时间：2013-01-29T08:41:13.777
> 
> 标签：java, android, animation, opengl-es, gif

我正在尝试制作一个用 java 编码的 2D android 游戏，我有一个问题。如何显示一个电击动画，就好像它在 2 个特斯拉线圈之间产生火花一样？我已经探索过使用 GIF，但是当屏幕被平移时，GIF 动画会暂停直到释放。

我曾考虑过 Open GL，但在现阶段这看起来令人生畏。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:46:03.620

[LibGDX是一个很棒的安卓游戏开发框架，在](http://code.google.com/p/libgdx/)[这里](http://code.google.com/p/libgdx/wiki/ParticleEditor)看看这个粒子编辑器。它提供了对 OpenGL 的一个很好的抽象，但是如果你愿意，以原始形式访问 OpenGL 是没有问题的。

# wordpress - github中的公共密码

> ID：14578706
> 
> 赞同：2
> 
> 时间：2013-01-29T08:41:21.530
> 
> 标签：wordpress, git, github

我的 wordpress 网站在我的笔记本电脑上，里面有很多使用 Git 的旧版本。

直到今天，我都有自己的 Git 服务器，但现在我想将存储库推送到 Github。所以我编辑了`.gitignore`文件以忽略`wp-config.php`并避免向所有人打开我的数据库密码，但是当我推送我的存储库时，我可以在 github 上看到该文件的旧版本。

**当我推送到 github 时，有什么方法可以完全忽略此文件的任何版本？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T09:15:21.463

您需要使用`git filter-branch`来修改您的整个历史记录，`wp-config.php`从存储库中删除文件。有关示例，请参阅[github 帮助。](https://help.github.com/articles/remove-sensitive-data)

# java - 如何在 java 中使用 Inet6Address

> ID：14578707
> 
> 赞同：0
> 
> 时间：2013-01-29T08:41:22.427
> 
> 标签：java, netty

我再次需要一些关于如何在 java 上使用 Inet6Address 的小帮助。

当我开发一个获取 IPv4 地址的应用程序时，现在我想将它扩展到 IPv6。而且似乎我无法获得 IPv6 地址，并且它一直在获得 IPv4 地址。

我尝试导入 java.net.Inet6Address；

使用我拥有的现有代码，如下所示。

```
public SocketAddress getInetAddress(){
   return channel.getRemote();
} 
```

该频道正在使用 netty 项目。

如何使用 Inet6Address？

正如我在这个网站上发现的那样 [http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Inet6Address.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Inet6Address.html)

```
public InetSocketAddress getInetAddress(){
   Inet6Address ipv6 = (Inet6Address)channel.getRemoteAddress.**getAddress();**

    return channel.getRemote();
} 
```

我也可以问一下 .getAddress() 是否不能使用，有人可以帮我解决这个问题吗？

就像我需要下载一个jar文件来解决这个问题吗？

我使用的java版本是java 6。

来自斯威夫特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:46:16.280

如果你没问题 - 尝试使用

[Java-ipv6](http://code.google.com/p/java-ipv6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:05:33.040

你的类型是`channel`什么？从未使用过'netty'，但在sun的nio世界中，假设`sa`是一个实例`SocketAddress`，只需使用`sa.getAddress()`. if`sa`表示 IPv4 地址上的套接字，您将获得 的实例`Inet4Address`，或者`Inet6Address`当它是 IPv6 地址上的套接字时。

添加一些 IPv6 绑定代码：

```
InetAddress[] addresses = InetAddress.getAllByName("localhost");
Inet6Address add6 = null;
for(InetAddress add : addresses) { 
    if (add instanceof Inet6Address) {
        add6 = add;
        break;
    }
}
if (add6==null)
    throw new RuntimeException("no IPv6 local address found!");
InetSocketAddress sa=new InetSocketAddress(add6, port);
... 
```

# c++ - OpenCV 中的轮廓比较（从 C 到 C++ 的转换）

> ID：14578711
> 
> 赞同：0
> 
> 时间：2013-01-29T08:41:30.360
> 
> 标签：c++, c, opencv, video-processing

我还是 C++ 的新手，现在我需要将我的这个[旧程序](https://stackoverflow.com/questions/12971093/better-algorithm-for-edge-filter-in-video-programming)中的一些部分从 C 转换为 C++，因为我想`BackgroundSubtractorMOG2`在我的程序中应用它，因为它只在 C++ 中可用。[基本上，该程序将基于背景减法](http://docs.opencv.org/trunk/modules/video/doc/motion_analysis_and_object_tracking.html#backgroundsubtractormog2)检测摄像机的轮廓并选择可用的最大轮廓。

我在这部分特别有问题（取自[旧程序](https://stackoverflow.com/questions/12971093/better-algorithm-for-edge-filter-in-video-programming)）：

```
double largestArea = 0;                    //Const. for the largest area
CvSeq* largest_contour = NULL;             //Contour for the largest area
while (current_contour != NULL){           //If the current contour available
    double area = fabs(cvContourArea(current_contour,CV_WHOLE_SEQ, false));   //Get the current contour's area as "area"    
    if(area > largestArea){            //If "area" is larger than the previous largest area
        largestArea = area;
        largest_contour = current_contour; 
    }
    current_contour = current_contour->h_next;  //Search for the next contour
} 
```

这部分是程序将扫描每个可用轮廓的地方`current_contour`，找到它的区域并将其与之前的最大轮廓进行比较。我的问题是**如何获得`current_contour`, 它的区域并跳转到 C++ 中的下一个轮廓？**另外，**C ++****中的指示是什么？`contours.size()`**是扫描的轮廓数还是轮廓的总面积？

这是我到目前为止所做的：

```
for(;;)
{
    cap >> frame; // get a new frame from camera
    if( frame.empty() )
            break;
    image=frame.clone();
    mog(frame,foreground,-1);

    threshold(foreground,foreground,lowerC,upperC,THRESH_BINARY);
    medianBlur(foreground,foreground,9);
    erode(foreground,foreground,Mat());
    dilate(foreground,foreground,Mat());

    findContours(foreground,contours,CV_RETR_LIST,CV_CHAIN_APPROX_SIMPLE);  

    if(contours.empty())
        continue;

//Starting this part
    double largest_area = 0;
    for(int i= 0; i < contours.size(); i++){
        double area = contourArea(contours);
        if(area >= largest_area){
            largest_area = area;
            largest_contours = contours;
        }
    }
//Until this part

    drawContours(image,largest_contours,-1,Scalar(0,0,255),2);

    imshow( "Capture",image );
    imshow("Contours",foreground);

    if(waitKey(30) >= 0) break;

} 
```

提前致谢。

PS：旧程序有一些错误，但算法工作得很好。如果您需要更新的程序，请像我一样免费。目前使用 OpenCV 2.4.3 + VS C++ 2010 Exp。

**编辑：**

感谢所有试图帮助我的人，但我已经得到了来自[这里](https://stackoverflow.com/questions/14582270/contour-is-not-equal-to-contouri)的答案。尽管如此，对于那些仍然不知道的人来说：**OpenCV in `C`IS NOT EXACTLY THE SAME as OpenCV in`C++`** .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:30:06.013

这是代码的一部分，我在其中找到图像上的所有轮廓并计算它们的周长和面积：

```
IplImage* bin = cvCreateImage( cvGetSize(_image), IPL_DEPTH_8U, 1);
cvConvertImage(_image, bin, CV_BGR2GRAY);
cvCanny(bin, bin, 50, 200);
CvMemStorage* storage = cvCreateMemStorage(0);
CvSeq* contours=0;

//Number of all contours on image @contoursCont@
int contoursCont = cvFindContours( bin, storage,&contours,sizeof(CvContour),CV_RETR_LIST,CV_CHAIN_APPROX_SIMPLE,cvPoint(0,0));
assert(contours!=0);

// iterate through all contours --> current = current->h_next
 for( CvSeq* current = contours; current != NULL; current = current->h_next )
 {
     //calculate perimeter and area of each contour
     double area = fabs(cvContourArea(current));
     double perim = cvContourPerimeter(current);
     cvDrawContours(_image, current, cvScalar(0, 0, 255), cvScalar(0, 255, 0), -1, 1, 8);
     //the rest code 
  } 
```

来自 OpenCV 文档：

函数 cvFindContours 从二值图像中检索轮廓并返回检索到的轮廓数。指针 CvSeq* contours=0 由函数填充。如果没有检测到轮廓（如果图像完全是黑色），它将包含指向第一个最外层轮廓的指针或 NULL。可以使用 h_next 和 v_next 链接从 first_contour 到达其他轮廓。

# ios - 如何实现自动跳转到指定页面

> ID：14578714
> 
> 赞同：0
> 
> 时间：2013-01-29T08:41:36.100
> 
> 标签：ios

我想做一个功能，那就是基于页面，我添加一个按钮，当我点击按钮时，弹出一个选择框。在选中的框中输入页码，但是当我输入时如何实现页码，页面跳转到指定页面

编辑：

我想做一个日历，顶部的标签标题栏我用过按钮，现在，当我按下按钮时，它会弹出一个选框，里面有月份。现在，我想按下一个月在新闻框中，然后转到相应的页面。

# hadoop - 无法在 hadoop 0.23.0 上启动节点管理器

> ID：14578719
> 
> 赞同：1
> 
> 时间：2013-01-29T08:42:03.403
> 
> 标签：hadoop, hadoop-yarn

在集群上安装 Hadoop 0.23.0 时，节点管理器无法启动并出现以下错误。

```
Caused by: org.jboss.netty.channel.ChannelException: Failed to bind to: 0.0.0.0/0.0.0.0:8080
        at org.jboss.netty.bootstrap.ServerBootstrap.bind(ServerBootstrap.java:303)
        at org.apache.hadoop.mapred.ShuffleHandler.start(ShuffleHandler.java:255)
        at org.apache.hadoop.yarn.server.nodemanager.containermanager.AuxServices.start(AuxServices.java:123)
        at org.apache.hadoop.yarn.service.CompositeService.start(CompositeService.java:68)
        ... 4 more
Caused by: java.net.BindException: Address already in use
        at sun.nio.ch.Net.bind(Native Method)
        at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:126)
        at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:59) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:54:04.233

这意味着 8080 已经在使用中。所以 sudo netstat -nvvpa |grep 8080 并查看 o/p。

如果它侦听任何 java，则如果可能，请停止该进程。然后尝试再次启动节点管理器。

这让我的问题解决了。谢谢你。

# cakephp - 如何从 CakePHP GitHub 存储库下载 CakePHP 1.3？

> ID：14578721
> 
> 赞同：4
> 
> 时间：2013-01-29T08:42:05.743
> 
> 标签：cakephp

我正在处理一个遗留的 CakePHP 1.3 项目，并希望遵循[标准的博客教程](http://book.cakephp.org/1.3/en/The-Manual/Tutorials-Examples/Blog.html)。

**该教程说这可以通过两种方式实现：**

a) 通过**[http://github.com/cakephp/cakephp/downloads](http://github.com/cakephp/cakephp/downloads)**下载，但是当访问这个链接时没有包可以下载任何东西。

b）它表明可以使用**git clone git://github.com/cakephp/cakephp.git**通过命令行下载，但这似乎下载了最新版本（在这个阶段 2.0+）

[我在这个地址https://github.com/cakephp/cakephp/tree/1.3](https://github.com/cakephp/cakephp/tree/1.3)找到了似乎是 CakePHP 1.3 的东西，但我不知道如何使用 git 选项一次性下载这些。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T11:25:07.423

您可以下载一个[标记的 zips](https://github.com/cakephp/cakephp/tags)，或者`checkout`在从 Git bash 克隆存储库后只下载 1.3 分支：

```
git clone http://github.com/cakephp/cakephp
git checkout 1.3 
```

这样您就可以获得 1.3 分支并可以使用这些文件。如果您想回到主分支，只需`checkout`该分支：

```
git checkout master 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-27T09:47:47.433

最后一个 CakePHP 1.3.21 zip 文件：

[https://codeload.github.com/cakephp/cakephp/zip/1.3.21](https://codeload.github.com/cakephp/cakephp/zip/1.3.21)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T10:18:54.947

所有版本都带有标签，您可以从[https://github.com/cakephp/cakephp/tags下载它们](https://github.com/cakephp/cakephp/tags)

# mongodb - MongoDB map减少产生奇怪的结果

> ID：14578722
> 
> 赞同：0
> 
> 时间：2013-01-29T08:42:10.073
> 
> 标签：mongodb, mapreduce

我正在MongoDB（c＃驱动程序）中实现一个简单的“获取最大值”映射减少。对于我的测试，我的集合中有 10 项 int _id = 1 到 10。

我的map和reduce如下：

```
var map = "function() {emit('_id', this.Id);}";
var reduce = "function(key, values) {var max = 1; for (id in values) {if(id>max) {max=id;}} } return max;}"; 
```

但是，当我运行时，我得到了结果 9，奇怪！

我认为地图正在输出一个字符串，因此比较没有按预期工作。任何帮助都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:22:53.423

如果值仅包含一项，则 Reduce 函数将不会运行。如果所有 id 都是唯一的，并且您在地图中的键只是那个 id，那么由于设计问题（为了提高性能），reduce 阶段将无法工作。如果你需要改变你的reduce输出的格式，你应该使用`finalize`method. 或者只是看看`aggregation framework`它提供了非常有用的工具来处理数据。

检查jira

> jira.mongodb.org/browse/SERVER-5818

如果您只是想熟悉 map reduce，我建议您尝试使用 map-reduce 真正有意义的不同场景

干杯

# php - 从 Web 表单发送信息

> ID：14578728
> 
> 赞同：0
> 
> 时间：2013-01-29T08:42:44.137
> 
> 标签：php, forms, smtp

我正在尝试通过 Web 表单发送电子邮件，但出现错误......我在 Windows Server 2008 R2（64 位）拆分服务器（2 服务器环境）上配置了我的 php 环境，其中一台服务器运行 mysql另一台服务器运行 php 和 apache（使用 xammp 安装）。运行网站时出现以下错误：

> 警告：mail() [function.mail]：无法在“localhost”端口 25 连接到邮件服务器，请验证 php.ini 中的“SMTP”和“smtp_port”设置或在 C:\xampp\htdocs\ 中使用 ini_set()在线联系.php

以下是php脚本：

```
if(empty($_POST) === false)
    {
        //Array to store and output errors
        $errors = array();

        $name = $_POST['name'];
        $email = $_POST['email'];
        $subject = $_POST['subject'];
        $feedback = $_POST['feedback'];

        //check if the all the required fields have been completed
        if(empty($name)=== true || empty($email)=== true || empty($subject)=== true || empty($feedback) === true)
            {
                $errors[] = 'Name, email, subject and message are required';
            }
        else
            {
                //check if the email is valid
                if(filter_var($email,FILTER_VALIDATE_EMAIL) === false )
                    {
                        $errors[] = 'That\'s not a valid email address';
                    }
                //check if the name contains any numbers
                if (ctype_alpha($name)=== false)
                    {
                        $errors[] = 'Name must only contain letters';
                    }
            }

    }

    //if there are no errors then send the email
    if(empty($errors) === true)
        {
            //send email
            mail('erecruitment@saqa.co.za','$subject','$feedback','FROM:'.'$email');

            //redirect users
            header('Location: contact.php?sent');
            //exit();
        } 
```

以下来自 php.ini 文件：

```
[mail function]
; For Win32 only.
; http://php.net/smtp
SMTP = localhost
; http://php.net/smtp-port
smtp_port = 25

; For Win32 only.
; http://php.net/sendmail-from
;sendmail_from = me@example.com 
```

我仍在掌握 php，如果有人可以帮助我看看我做错了什么，那就太好了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:51:48.483

您是否在本地计算机上运行过 sendmail 服务器？你可以在[这里](http://www.glob.com.au/sendmail/)得到它。

出于测试目的，您可以使用[测试邮件服务器工具](http://www.toolheap.com/test-mail-server-tool/)。它将模拟发送电子邮件。

# iphone - NSView 的视频流

> ID：14578730
> 
> 赞同：2
> 
> 时间：2013-01-29T08:42:50.173
> 
> 标签：iphone, ios, ipad, video-streaming, video-capture

我想在 iOS 中创建一个 View 的视频流。例如，在 iPhone 中放置一个视图并在其上绘制一些东西，我想创建一个视频流（H.264 或 MP4 或任何著名的标准），以便我可以保存一个包含我的 NSView 和所有绘图和其他记录的视频文件我执行的操作。

知道从哪里开始吗？iOS 中是否有一些 API 可用于录制视频 iPhone 屏幕或特定视图？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T10:34:07.490

这篇[博](http://www.subfurther.com/blog/2011/04/12/voices-that-matter-iphone-spring-2011/)文包含一个示例项目的链接，该链接展示了如何在 iOS 上捕获屏幕内容并将其添加到 AVFoundation 资产中。
下载名为 VTMScreenRecorderTest.zip 的示例项目 还可以查看幻灯片（屏幕捕获部分从幻灯片 44 开始）。捕获代码基于 Apple 的[Technical Q&A 1703](http://developer.apple.com/library/ios/#qa/qa1703/_index.html)。

# objective-c - RestKit 0.20：restkit 对象映射使属性映射加倍

> ID：14578732
> 
> 赞同：0
> 
> 时间：2013-01-29T08:42:52.857
> 
> 标签：objective-c, json, restkit

我正在使用 RestKit 0.20 并在使用带有点 (.) 的规范符号时检测到一种奇怪的映射行为。如果您能解释一种简单的方法来处理从我在 IOS 上作为 NSManagedObject 实现的扁平对象到服务器端的对象关系的对象映射，我会很高兴。

映射几乎是正确的，但从我的角度来看，将 geopoint.lat 和 geopoint.lon 映射为额外字段是错误的，并且会在服务器上引发异常（无法识别的属性异常）。

RKObjectMapping：

```
[mapping addAttributeMappingsFromDictionary:@{
 @"geopoint.lat": @"latitude",
 @"geopoint.lon": @"longitude",
 @"countrycode": @"countryId",
 @"county": @"county",
 @"postcode": @"postalcode",
 @"city": @"city",
 @"street": @"street",
 @"housenumber": @"housenumber"
 }]; 
```

有效结果（显示为日志输出）

```
2013-01-29 09:29:38.856 CPlusApp[4285:907] T restkit.object_mapping:RKMappingOperation.m:514 Mapped relationship object from keyPath 'startAddress' to 'startAddress'. Value: {
city = aCity;
geopoint =     {
    lat = "48.8901234";
    lon = "8.818448999999998976";
};
"geopoint.lat" = "48.8901234";
"geopoint.lon" = "8.818448999999998976";
postcode = 91000;
street = Rennbrunnen;
}
2013-01-29 09:29:38.861 CPlusApp[4285:907] D restkit.object_mapping:RKMappingOperation.m:818 Finished mapping operation successfully... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:38:40.170

我遇到过类似的情况，我可以看到两种解决方案：

1) 为具有纬度和经度属性的地理点创建一个新类。然后`geopoint`在对象的类中添加为属性。从字典中删除两个映射（geopoint.lat 和 geopoint.lon）并添加从 keyPath 'geopoint' 到 'geopoint' 的关系。从那时起，您可以通过`object.geopoint.lat`和访问纬度和经度`object.geopoint.lon`。

2）通过以下方式删除请求的映射：

```
RKEntityMapping *addressRequestMapping = [mapping inverseMapping];

[addressRequestMapping removePropertyMapping:[addressRequestMapping propertyMappingsBySourceKeyPath][@"geopoint.lat"]];
[addressRequestMapping removePropertyMapping:[addressRequestMapping propertyMappingsBySourceKeyPath][@"geopoint.lon"]];

[manager addRequestDescriptorsFromArray:@[

 [RKRequestDescriptor addressRequestMapping objectClass:[Address class] rootKeyPath:nil]

]]; 
```

选项 1 将允许您修改坐标并将数据发送到服务器，而选项 2 不允许。

# php - 特殊字符设置 PHP

> ID：14578734
> 
> 赞同：1
> 
> 时间：2013-01-29T08:42:56.867
> 
> 标签：php, mysqli

每次我做一个新项目时，我都会遇到麻烦，因为我忘记使用 UTF-8 创建数据库排序规则，或者有一些我没有看到的字符漏掉了，比如 é/à/.. 还有双.. 或三重... 似乎很讨厌。我通常使用**mysqli_real_escape_string**来确保他将字符写掉，当我打印它们时，我使用**htlmentities**。但这并不适用于所有角色，当然也不适用于 double .. 或tripple ... 。

设置项目时是否应牢记一般规则/准则，这样我就不会对这些特殊字符感到困扰？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:47:48.883

> 在设置项目时，我应该牢记一般规则/准则吗？

当然。
**始终设置您的数据库连接字符集以匹配您的 HTML 页面的实际字符集。**

说，你的页面是 utf-8，然后发出

```
mysqli_set_charset($conn,'utf8'); 
```

连接后立即

您的页面在 Windows-1251 中，然后制作它

```
mysqli_set_charset($conn,'cp1252'); 
```

等等

还始终用于`mysqli_real_escape_string`格式化您要动态添加到查询中的**字符串文字**
， 并在将**用户输入**`htmlspecialchars()`打印回 HTML 页面时使用

 ****更新：**
您还需要使用支持所有必需字符的字符集设置表（UTF-8 是首选默认值）。

```
CREATE TABLE `table` (
    ...
) DEFAULT CHARSET=utf8 
```

在创建具有此类定义的表时，您的数据中将永远不会有 ?s**

# django - 将 django-app 推送到 heroku

> ID：14578737
> 
> 赞同：1
> 
> 时间：2013-01-29T08:43:12.443
> 
> 标签：django, git, deployment, heroku, procfile

我有一个 Django 项目，想部署在 Heroku 上。我正在尝试将我的应用程序推送到 heroku，并收到以下消息：

```
$ git push heroku master
Counting objects: 22, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (18/18), done.
Writing objects: 100% (22/22), 5.04 KiB, done.
Total 22 (delta 0), reused 0 (delta 0)
 !     Heroku push rejected, no Cedar-supported app detected

To git@heroku.com:fierce-tor-2115.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:fierce-tor-2115.git' 
```

文件列表：

```
$ git ls-files
.gitignore
Procfile
project/__init__.py
project/apps/main/__init__.py
project/apps/main/admin.py
project/apps/main/forms.py
project/apps/main/models.py
project/apps/main/tests.py
project/apps/main/views.py
project/environ.py
project/manage.py
project/project/__init__.py
project/project/settings.py
project/project/urls.py
project/project/wsgi.py
requerements.txt 
```

混帐配置

```
$ cat .git/config 
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
    ignorecase = true
[remote "heroku"]
    url = git@heroku.com:fierce-tor-2115.git
    fetch = +refs/heads/*:refs/remotes/heroku/* 
```

我的档案：

```
$ cat Procfile 
web: python project/manage.py runserver 0.0.0.0:$PORT --noreload 
```

我的 requirements.txt 文件：

```
$ cat requerements.txt 
Django==1.5c1
psycopg2==2.4.6 
```

我使用下一个命令创建的 Heroku 应用程序：

```
heroku create -s cedar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:51:27.027

作为一种解决方法，我建议您查看本指南 [https://devcenter.heroku.com/articles/django](https://devcenter.heroku.com/articles/django) 并尝试推送按照指南中的步骤创建的测试空项目。

如果它成功推送，请尝试找出差异（例如，我知道 heroku 区分大小写）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:22:45.987

在您的文件列表中出现`requerements.txt`并且应该是`requirements.txt`

# jquery - Flexigrid 中顶部和底部的导航面板

> ID：14578738
> 
> 赞同：0
> 
> 时间：2013-01-29T08:43:16.197
> 
> 标签：jquery, flexigrid

如何在 flexigrid 中实现，在顶部和底部**都**显示导航面板？我找到了在顶部和底部之间进行更改的[解决方案](https://groups.google.com/d/msg/flexigrid/drPeB4o3270/nUHAhNVdxncJ)，但两者都不起作用。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:01:33.030

未经测试，但从您链接到它的解决方案应该像这样工作：替换行：'$(g.bDiv).after(g.pDiv);' 和：

```
var navClone = $(g.pDiv).clone(true);
$(g.bDiv).prepend(g.pDiv).after(navClone); 
```

# c - 优化轴对齐边界框检查

> ID：14578745
> 
> 赞同：1
> 
> 时间：2013-01-29T08:43:38.700
> 
> 标签：c, optimization, gcc, aabb

我目前正在大量使用点云，并且我已经实现了一种分割算法，该算法将具有特定最大距离的点聚集成段。

为了优化这一点，我给每个段一个轴对齐的边界框，以检查给定点是否可能与段匹配，然后再仔细观察并迭代这些点并计算距离（我实际上使用八叉树这个，修剪掉大部分的点。）

我已经通过 gnuprof 运行了我的程序，结果如下：

```
Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total           
 time   seconds   seconds    calls   s/call   s/call  name    
 52.42      5.14     5.14 208995661     0.00     0.00  otree_node_out_of_bounds
 19.60      7.06     1.92 189594292     0.00     0.00  otree_has_point_in_range
 11.33      8.17     1.11   405834     0.00     0.00  otree_node_has_point_in_range
  9.29      9.08     0.91   352273     0.00     0.00  find_matching_segments
 [...] 
```

如您所见，大部分计算时间都花在`otree_node_out_of_bounds`其中实现如下：

```
int otree_node_out_of_bounds(struct otree_node *t, void *p)
{
    vec3 *_p = p;
    return (_p->x < t->_llf[0] - SEGMENTATION_DIST 
        || _p->x > t->_urb[0] + SEGMENTATION_DIST
        || _p->y < t->_llf[1] - SEGMENTATION_DIST 
        || _p->y > t->_urb[1] + SEGMENTATION_DIST
        || _p->z < t->_llf[2] - SEGMENTATION_DIST 
        || _p->z > t->_urb[2] + SEGMENTATION_DIST);
} 
```

其中`SEGMENTATION DIST`是编译时间常数，以允许 gcc 进行一些常数折叠。`_llf`并且`_urb`是类型`float[3]`并且代表八叉树的边界框。

所以，我的问题基本上是，是否可以对这个函数进行一些偷偷摸摸的优化，或者更一般地说，有没有更有效的方法来对 AABB 进行边界检查，或者用不同的方式来表达它，我可以加快速度吗？通过使用一些 C/gcc 魔法以某种方式进行比较？

如果您需要更多信息来回答这个问题，请告诉我:)

谢谢，安迪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:34:01.087

这是一个很小的叶子函数，被调用了很多次。分析结果总是过度代表这些函数的成本，因为测量调用的开销相对于函数本身的成本来说是很大的。通过正常优化，整个操作的成本（在最终调用此测试的外部循环级别）将占整个运行时的较低百分比。您可以通过使该功能内联并启用分析（例如，使用`__attribute__((__always_inline__))`）来观察这一点。

你的函数看起来很好写。我怀疑您是否可以比您进一步优化这样的单个测试（或者如果可以，它不会是戏剧性的）。如果要优化整个操作，则需要在更高级别上进行：

*   您可以尝试另一种结构（例如，kd-tree 而不是八叉树）或利用数据中某些模式的全新算法。
*   您可以将循环从“for each point check otrees”反转为“for each otree check points”，这样您就可以一遍又一遍地重用边界数据。
*   您可以确保以最有效的方式访问数据（可能是点）（即顺序而不是随机跳转）。
*   通过重组循环，您可以使用 SSE 在一条指令中执行多个边界测试（没有分支！）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T09:26:29.933

对我来说看起来不错。我能想到的唯一微优化是将 *_p 声明为静态

# phpexcel - PHPexcel - 如何从 url 加载 excel 文件

> ID：14578749
> 
> 赞同：1
> 
> 时间：2013-01-29T08:43:47.177
> 
> 标签：phpexcel

我正在使用以下代码来加载、读取、写入和下载 Excel 文件。

```
//include PHPExcel library

require_once "Classes/PHPExcel/IOFactory.php";

//load Excel template file

$objTpl = PHPExcel_IOFactory::load("excel.xls");
$objTpl->setActiveSheetIndex(0);  //set first sheet as active

$objTpl->getActiveSheet()->setCellValue('C2', date('Y-m-d'));  //set C1 to current date

$objTpl->getActiveSheet()->getStyle('C2')->getAlignment()->setHorizontal(PHPExcel_Style_Alignment::HORIZONTAL_RIGHT); //C1 is right-justified

$strData = $objTpl->getActiveSheet()->getCell('C3')->getValue();
$strData .= $objTpl->getActiveSheet()->getCell('C4')->getValue();

$objTpl->getActiveSheet()->setCellValue('C3', 'It\'s working');
$objTpl->getActiveSheet()->setCellValue('C4', 'Dynamic excel read and writing');
$objTpl->getActiveSheet()->setCellValue('C6', 'Data read: C3 = '.substr($strData,0,1).' and C4 = '.substr($strData,1,1));

$objTpl->getActiveSheet()->getStyle('C4')->getAlignment()->setWrapText(true);  //set wrapped for some long text message

$objTpl->getActiveSheet()->getColumnDimension('C')->setWidth(40);  //set column C width

$objTpl->getActiveSheet()->getRowDimension('4')->setRowHeight(120);  //set row 4 height

$objTpl->getActiveSheet()->getStyle('A4:C4')->getAlignment()->setVertical(PHPExcel_Style_Alignment::VERTICAL_TOP); //A4 until C4 is vertically top-aligned

//prepare download

$filename=mt_rand(1,100000).'.xls'; //just some random filename

header('Content-Type: application/vnd.ms-excel');
header('Content-Disposition: attachment;filename="'.$filename.'"');
header('Cache-Control: max-age=0');

$objWriter = PHPExcel_IOFactory::createWriter($objTpl, 'Excel5');  //downloadable file is in Excel 2003 format (.xls)

$objWriter->save('php://output');  //send it to user, of course you can save it to disk also! 
```

我的问题是我想从不同的源（url，stream）加载excel文件，而不是从本地目录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-18T08:36:34.273

只需将文件保存到您的服务器，然后读取它。

```
 file_put_contents('excel.xls',  
          file_get_contents('https://www.myweburl.com/spreadsheets.xls')
        );

    $objTpl = PHPExcel_IOFactory::load("excel.xls"); 
```

# json - 从 jqgrid 自定义按钮调用 json 中的函数

> ID：14578751
> 
> 赞同：2
> 
> 时间：2013-01-29T08:43:56.287
> 
> 标签：json, jqgrid

我有一个带有一些数据的 jqgrid。When two of the rows are selected, I'd like to add a record in the database (in a different table than the one of the jqgrid). 我所做的是使用以下代码在导航栏中创建一个新按钮：

```
 jQuery("#tabla").navButtonAdd('#navegacion',
        {
            caption: "Crear tramo", buttonicon: "ui-icon-extlink", cursor:"pointer", title: "Crear tramo",
            onClickButton: $(function() {   
                 var selectedrows = $("#tabla").jqGrid('getGridParam','selarrrow');
                 var er1=$("#tabla").jqGrid('getRowData',selectedrows[0]);
                 var er2=$("#tabla").jqGrid('getRowData',selectedrows[1]);

                $.ajax({
                    dataType: 'json',
                    mtype: 'POST',                                  
                    url: 'json/operaciones.jsp',                                                                    
                    postData: { oper:'add', id1:er1, id2:er2},
                    success: function(data) {
                        alert(data);
                    }
                })                                
            })
    }); 
```

我在文件 opaciones.jsp 中的内容是：

```
 <%

            String salida="";

            DriverManager.registerDriver (new oracle.jdbc.driver.OracleDriver());

            Connection con = DriverManager.getConnection("my", "Connection", "Parameters");

            try {

                    System.out.println("Parámetros enviados:");
                    Enumeration e=request.getParameterNames();
                    while (e.hasMoreElements()){
                            String par=(String)e.nextElement();
                            System.out.println(par+":"+request.getParameter(par));
                    }

            String operacion=request.getParameter("oper");
            String id1=request.getParameter("id2");
            String id2=request.getParameter("id2");
            String comentarios="prueba";

            if (operacion.equals("add")) {

                    PreparedStatement stmt=con.prepareStatement(
                            "INSERT INTO TRAMOS "+
                            "(COMENTARIOS,ELEMENTOS_REGISTROCODIGO,ELEMENTOS_REGISTROCODIGO2, ENTIDADESCIF) "+
                            "VALUES (?,?,?,?,?)");
                    stmt.setString(1,comentarios);
                    stmt.setString(2,id1);
                    stmt.setString(3,id2);
                    stmt.setString(4,"Q1818002F");

                    stmt.executeUpdate();
                    stmt.close();
                    salida="{\"correcto\":true,\"clave\":\""+id1+"|"+id2+"\",\"mensaje\":\"OK\"}";
            }
            }
            catch (Exception e) {
                    String cadenaError=e.toString().substring(e.toString().indexOf(":")+2);
                    cadenaError=cadenaError.replace('\n',' ');
                    cadenaError=cadenaError.replace("\"","\\\"");
                    salida="{\"correcto\":false,\"clave\":\"\",\"mensaje\":\""+e.toString()+"\"}";
            }
            finally {
                    con.close();
            }
        System.out.println("salida:"+salida);

        response.setContentType("application/json");
    %>     
    <%=salida%> 
```

但它不起作用，我得到的是“java.lang.NullPointerException”。错误在哪里？如何将数据发送到文件 opaciones.jsp？非常感谢，娜塔莉亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:10:09.360

您使用的代码中的一个明显错误是使用了`postData`代替`data`和`mtype`代替`type`作为[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)的参数。

我建议您另外编写更安全的代码。例如，您在验证 that is not和 that之前使用`selectedrows[0]`and`selectedrows[1]`内部。例如，如果用户在选择至少两行之前单击按钮，则在 JavaScript 代码中会出现异常。`onClickButton``selectedrows``null``selectedrows.length > 1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:24:03.717

这是一个愚蠢的错误......终于奏效了：

```
 jQuery("#tabla").navButtonAdd('#navegacion',
                {
                    caption: "Crear tramo", buttonicon: "ui-icon-extlink", cursor:"pointer", title: "Crear tramo",
                    onClickButton: function() {                       
                        selectedrows = $("#tabla").jqGrid('getGridParam','selarrrow');
                    if(selectedrows.length==2){
                        er1=$("#tabla").jqGrid('getRowData',selectedrows[0]);
                        er2=$("#tabla").jqGrid('getRowData',selectedrows[1]);                       
                        $.ajax({
                            datatype:'json',
                            type:'GET',
                            url:'json/operacionesTramos.jsp',
                            data:{oper:'add',id1:er1.codigo,id2:er2.codigo},
                            success: function(data) {
                                alert("Tramo creado");
                            }
                        })  
                        }
                        else{
                        alert("Seleccione dos arquetas, por favor");                     
                        }                   

                    }
            }); 
```

谢谢奥列格！

# ibm-mq - 如何为要使用的 MQ Explorer 配置 ccsid 的值？

> ID：14578754
> 
> 赞同：2
> 
> 时间：2013-01-29T08:44:04.830
> 
> 标签：ibm-mq, mq

前几天我尝试通过 MQ 资源管理器添加新的远程 MQGR，但失败并出现以下错误：

```
AMQ4052 Coded character set ID error. Cannot convert a command message to the CCSID of the target queue manager. 
```

我想远程QMGR使用的ccsid是5488，安装MQ资源管理器的本地电脑的ccsid是1381。

我的问题是：

> 1.  如何配置**MQ Explorer**使用的 ccsid 的值？
> 2.  为了与远程 QMGR 通信，我应该为 MQExplorer 选择哪种 ccsid？除此之外，我在哪里可以找到有关 ccsid 兼容性的信息？
> 3.  从 MQ 的角度来看，当通过客户端和服务器进行通信时，检查 CCSID 兼容性的程序是什么？我知道 MQ 在 OS 上安装了数据转换表，例如用于 AIX 的 /usr/lib/nls/loc/iconvTable 下的文件。那么MQ是如何利用它的呢？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:35:45.120

1.  您可以设置环境变量[MQCCSID](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzaf.doc/cs12290_.htm)。
2.  支持的转换取决于运行队列管理器的平台，请参阅[代码页转换](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzak.doc/fr20890_.htm)以获取支持的转换列表。
3.  据我所知，它在 Unix 上使用 iconv，我不知道它在 Windows 上是如何处理的。

# ios - Interface Builder 中的颜色错误

> ID：14578759
> 
> 赞同：32
> 
> 时间：2013-01-29T08:44:29.033
> 
> 标签：ios, xcode, colors, picker

**问题：**我在 Interface Builder 中设置了颜色，设置了通道 RGB，然后我对工作窗口进行了截图，在 Photoshop 中打开它并通过我在 Interface Builder 中设置的颜色选择器检查颜色。结果——RGB值和我设置的不一样。

视频： [http ://www.youtube.com/watch?v=ASLfnYHPbqM](http://www.youtube.com/watch?v=ASLfnYHPbqM)

大多数异常从第 45 秒开始，当时我尝试使用 Interface Builder 的颜色选择器。它显示 RGB 值与我在他相同并安装的值不同），但颜色选择器 IB 的值与颜色选择器 Photoshop 的值一致。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-29T11:11:39.287

Apple 认为*颜色在任何地方看起来都相同*比颜色在任何地方都具有相同的 RGB 值更重要。看，相同的 RGB 值在不同的屏幕上看起来并不相同，因为每个屏幕都有不同的显示特性。

因此，当您截取屏幕截图时，Apple 不仅为图像中的每个像素存储一个 RGB 值，它们还将您的显示器的显示特性存储在图像文件中。那有什么好处？如果其他人打开你的截图，系统可以查看创建它的人的显示器特性，将这些特性与想要观看它的人的显示器特性进行比较，然后可以计算出它必须如何*采用 RGB图像中的值*，以便图像在当前监视器上看起来相同。如果它只是显示 RGB 值而不做任何这些，图像颜色可能看起来不对（在某些情况下只是轻微的，在某些情况下更多，如果用户的显示器非常糟糕，在某些情况下甚至是完全错误的） .

所以系统会向图形适配器发送不同的 RGB 值，因为 RGB 颜色本身并不能真正描述颜色。RGB 值和显示器配置文件确实描述了一种颜色，而不是 RGB 值很重要，颜色很重要。如果我制作红色的东西，我希望它在每台显示器上都是相同的红色。我不希望它在一台显示器上是深红色，在另一台显示器上是浅红色，而在第三台显示器上是几乎粉红色的红色。

Photoshop 的问题在于它有自己的内置颜色校正机制。Photoshop 通常在 sRGB（标准 RGB 颜色空间）或 Adob​​e RGB（Adobe 发明的扩展颜色空间）中工作。当您加载不在所需颜色空间内的图像时，Photoshop 将转换图像的颜色空间，并且每次颜色空间转换都会导致 RGB 值发生变化。请注意，在 Photoshop 中显示的图像仍会根据您当前的显示器颜色特性进行颜色校正，只是您在 Photoshop 中操作的 RGB 值位于另一个颜色空间中，当存储回文件时，Photoshop 会将这些值转换回或它将保留它们并将新的颜色配置文件嵌入到图像文件中。

仅使用 RGB 来描述颜色的时代已经结束多年。今天，RGB 本身相当没有意义，只有与颜色配置文件结合使用时，它在描述实际颜色时才真正有意义。

如果您想要没有嵌入真实颜色配置文件的屏幕截图，请执行以下操作：

1.  打开“系统偏好设置”
2.  转到“显示”
3.  转到“颜色”
4.  选择“通用 RGB 配置文件”
5.  制作你的截图
6.  改回您的个人资料

在您更改配置文件之前可能需要先退出 Xcode（并在您更改回配置文件后重新启动它），因为我不确定更改配置文件是否会立即生效。它肯定会立即影响显示器上的显示方式，但是如果您想通过选择特定的 RGB 值在 Xcode 中选择一种颜色，我不确定配置文件更改是否也会在此处立即生效（您可以给它尝试不重新启动，如果不起作用，则必须重新启动重复）。

但是，这可能仍会导致 Photoshop 中的颜色不正确，因为 Photoshop 仍可能将颜色转换为 sRGB 或 Adob​​e RGB。因此，您可能不想选择“通用 RGB 配置文件”，而是选择“sRGB”配置文件（取决于您的 OS X 版本，也可能命名为“sRGB IEC61966-2.1”）。这样图像已经在 sRGB 颜色空间中。您只需要说服 Photoshop 保持这种方式（而不是将其转换为 Adob​​e RGB），然后您将真正在 Xcode 和 Photoshop 中看到相同的 RGB 值。

请注意更改颜色配置文件如何使您的显示看起来完全不同？你认为颜色变化很大吗？相信我，与不同的显示器有时会改变颜色相比，这算不了什么。也许您现在可以理解为什么色彩校正如此重要了。所以问题是，为什么 RGB 值首先对您如此重要？只要显示的颜色相同，RGB 值是否相同真的很重要吗？

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-11-06T00:19:55.380

这是有效的[指南](http://inaka.net/blog/2014/09/05/getting-the-right-colors-in-your-ios-app/)，只需按照以下步骤操作，您就可以通过编程方式设置 UIColor 并让它们与屏幕截图中的颜色相匹配。

[![在此处输入图像描述](../Images/33c05cc1ab121f754aa52af8ce85cc2f.png)](https://i.stack.imgur.com/b5Dk9.png)

# c++ - QDesktopServices::openUrl 和 gvfs-open 问题

> ID：14578775
> 
> 赞同：1
> 
> 时间：2013-01-29T08:45:22.863
> 
> 标签：c++, qt, ubuntu

我正在尝试使用 ubuntu 下的 QDesktopServices::openUrl 打开本地文件，它似乎使用 gvfs-open 。如果文件名正确，则弹出 PDF。如果文件名错误，当然 gvfs-open 无法打开文件。但是，函数的返回值是 true。也就是说，该函数不会检测到 PDF 打开文件失败。我应该怎么做才能得到正确的打开结果？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:09:03.337

您可以在调用之前使用[QFile::exists](http://qt-project.org/doc/qt-4.8/qfile.html#exists)检测文件是否存在`openUrl()`

# java - 从 Web 服务获取响应时出错非默认命名空间无法映射到空 URI

> ID：14578788
> 
> 赞同：1
> 
> 时间：2013-01-29T08:46:16.513
> 
> 标签：java, webservice-client, axis

我正在尝试制作一个 java webservice 客户端。这是一个非常简单的服务，它接收一个字符串并返回另一个字符串。我正在使用soapUI 测试该服务并且运行良好，但是当我尝试在Java 中对其进行编码时它失败了。

这是我用来调用服务的代码

```
 QName QNAME_TYPE_STRING = new QName(nameSpaceURI,"string");
    Service service = new Service();
    Call call = (Call) service.createCall();
    call.setTargetEndpointAddress(new java.net.URL(endpoint));
    call.setOperationName(new QName(nameSpaceURI, webServiceMethod));
    call.addParameter("buil:arg0", XMLType.XSD_STRING, ParameterMode.IN);
    call.setReturnType(QNAME_TYPE_STRING, String.class);
    String ret = (String) call.invoke(new Object[]{"PARAMETER VALUE"}); 
```

该`endPoint`变量正确指向服务的 URL，并且：

```
nameSpaceURI = "http://build.response.service/";
webServiceMethod = "buildResponse"; 
```

问题是 webService 正确获取了参数，但是响应中发生了一些事情：

```
Caused by: com.ctc.wstx.exc.WstxParsingException: Non-default namespace can not map to
empty URI (as per Namespace 1.0 # 2) in XML 1.0 documents
at javax.xml.stream.SerializableLocation@6fee8ce6 
```

这是我在soapUI 上的请求示例

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:buil="http://build.response.service/">
    <soapenv:Header/>
        <soapenv:Body>
            <buil:buildResponse>
                <buil:arg0>PARAMETER VALUE</buil:arg0>
            </buil:buildResponse>
        </soapenv:Body>
</soapenv:Envelope> 
```

这是soapUI上的响应示例

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Body>
        <ns1:buildResponse xmlns:ns1="http://build.response.service/">
            <return xmlns="http://build.response.service/">
                RESPONSE1,RESPONSE2,RESPONSE3
            </return>
        </ns1:buildResponse>
    </soap:Body>
</soap:Envelope> 
```

¿ 想法？我认为这与响应有关，但我真的是 webServices 的新手（我知道......我知道...... 21 世纪......）。

更多信息：我无权使用 wsdl2java 也无权发布服务的 wsdl（无论如何它是自动生成的，我与它无关，它不会改变）。对此感到抱歉，尽管有这些限制，我希望可以帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:59:15.213

天啊……太简单了，在调用参数上做了一点小改动：

```
call.addParameter(new QName(nameSpaceURI, "buil:arg0"),XMLType.XSD_STRING,ParameterMode.IN);
call.addParameter(new QName(nameSpaceURI, "return"), XMLType.XSD_STRING, ParameterMode.OUT); 
```

现在它就像一个魅力，希望这对某人有所帮助。

# python - python整数除法错误 - 以零为模 - 但除数！= 0

> ID：14578790
> 
> 赞同：4
> 
> 时间：2013-01-29T08:46:31.300
> 
> 标签：python, division, modulo

我是使用 python 做简单数学的新手，如果这是一个愚蠢的问题，我很抱歉。

我有 8 个变量都设置为整数，这些整数在执行简单计算时使用。

```
a = 0
b = 17
c = 152
d = 1
e = 133
f = 19
g = 20
h = 0

answer = ( ( ( a / f ) + b + c ) - ( g + ( h / f ) ) ) / ( d / f )

print answer 
```

当我运行此代码时，我收到错误 ZeroDivisionError: integer division or modulo by zero。

我已经阅读了这个错误并且所有文档都指向我的除数为零，但是如果我用数字作为字符串代替变量打印它，我得到：

```
( ( ( 0 / 19 ) + 17 + 152 ) - ( 20 + ( 0 / 19 ) ) ) / ( 1 / 19 ) 
```

该语句中没有除数为零的地方。

请让我知道我需要如何更改表达式以获得答案 2831。请注意，我可以将变量的类型更改为浮点数或其他。感谢您的帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-29T08:48:12.407

可能您正在使用`Python 2.x`，哪里`x / y`是`integer division`.

所以，在下面的代码中： -

```
( 20 + ( 0 / 19 ) ) ) / ( 1 / 19 ) 
```

`1 / 19`是`integer division`，这导致`0`. 所以表达式本质上是一样的：-

```
( 20 + ( 0 / 19 ) ) ) / 0 
```

现在您可以看到错误的来源。

* * *

您可以在`python`代码中添加以下导入，以强制浮点除法：-

```
from __future__ import division 
```

或者，您可以将其中一个整数转换为浮点数，使用其中一个`float()`或仅通过添加`.0`到初始值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T08:48:55.990

```
from __future__ import division 
```

而不是你的计算

它将导致除法返回浮点数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-05T21:34:55.697

这应该有效。这是我的代码：

```
a = 0
b = 17
c = 152
d = 1
e = 133
f = 19
g = 20
h = 0

answer = ( ( ( a / f ) + b + c ) - ( g + ( h / f ) ) ) / ( d / f )

print(answer) 
```

几乎完全一样。

# java - Tomcat 为 docBase 嵌入了 addContext 的正确用法

> ID：14578794
> 
> 赞同：3
> 
> 时间：2013-01-29T08:46:58.087
> 
> 标签：java, tomcat, configuration, embedded-tomcat-7

有谁知道如何在嵌入式 Tomcat 实例中设置上下文以从不在部署文件夹中的本地目录提供文件？

在标准 server.xml 中，它看起来像这样：

```
<Context docBase="/MyWebApp/images" path="/tmp/images/" reloadable="false"/> 
```

我尝试了以下 tomcat 嵌入式调用的不同变体，但均未成功：

```
tomcat.addContext(tomcat.getHost(), "/MyWebApp/images", "/tmp/images/"); 
```

我也试过：

```
tomcat.addContext("/MyWebApp/images", "/tmp/images/"); 
```

看起来这个 grails 问题的思路是一样的：

[grails：在开发中为嵌入式 tomcat 添加上下文](https://stackoverflow.com/questions/8332851/grails-add-context-to-embedded-tomcat-in-development)

但我没有使用 grails。（使用 Java）

这是我正在使用的完整启动代码：

```
package launch;

import java.io.File;
import org.apache.catalina.startup.Tomcat;

public class Main {

    public static void main(String[] args) throws Exception {

        String webappDirLocation = "/src/main/webapp/";
        Tomcat tomcat = new Tomcat();

        //The port that we should run on can be set into an environment variable
        //Look for that variable and default to 8080 if it isn't there.
        String webPort = System.getenv("PORT");
        if(webPort == null || webPort.isEmpty()) {
            webPort = "8080";
        }

        tomcat.setPort(Integer.valueOf(webPort));

        tomcat.addWebapp("/MyWebApp", new File(webappDirLocation).getAbsolutePath());
        tomcat.addContext("/MyWebApp/images", "/tmp/images/");

        tomcat.start();
        tomcat.getServer().await();  
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T09:40:57.360

将 Web 应用程序添加到嵌入式 Apache Tomcat 有两种通用方法。`addContext()`和`addWebapp()`。

`addContext()`需要完全程序化的方法。您必须通过 API 配置所有内容。这包括提供静态内容（如图像）的默认 servlet。您尚未配置默认 Servlet，因此不提供静态内容。

您几乎肯定想要使用`addWebapp()`它与在 webapps 文件夹中放置一个目录并让 Tomcat 自动部署它大体相似。在这种情况下，与 conf/web.xml 中的设置（默认 servlet、JSP servlet、MIME 类型映射、欢迎文件等）等效的设置将应用于 webapp。

# java - 每 x 次执行一项任务

> ID：14578800
> 
> 赞同：0
> 
> 时间：2013-01-29T08:47:15.897
> 
> 标签：java

我正在尝试每 5 分钟执行一次任务。任务需要从：xx:00、xx:05、xx:10、xx:15 等开始，所以如果时间是 xx:37，任务将从 xx:40 开始。

我使用以下代码来做到这一点：

```
 Date d1 = new Date();
    d1.setMinutes(d1.getMinutes() + 5 - d1.getMinutes()%5);
    d1.setSeconds(0);
    this.timer.schedule(new Send(), d1, TEN_MINUTES/2); 
```

发送看起来像这样：

```
class Send extends TimerTask
{
    public void run()
    {
        if(SomeCondition)
                    {
                            Timestamp ts1 = new Timestamp(new java.util.Date().getTime());
                            SendToDB(ts1);
                    }
    }
} 
```

所以结果应该是记录，如果你 % 分钟，结果将为 0。但我所拥有的记录时间是：

*05:35:00 *07:44:40 *07:54:40 *09:05:31 *09:50:00

正如您所看到的，第一个任务完美地开始了，但随后出现了问题。

我的猜测是该任务会在上一个任务完成后计算 5 分钟的跳转，因此任务运行时间会受到影响，但这只是一个猜测。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:53:16.243

任务执行所需的时间会延迟计划。从[文档中`schedule`](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html#schedule%28java.util.TimerTask,%20long%29)：

> 如果由于任何原因（例如垃圾收集或其他后台活动）延迟执行，则后续执行也会延迟。

你会更好地使用[`scheduleAtFixedRate`](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html#scheduleAtFixedRate%28java.util.TimerTask,%20java.util.Date,%20long%29).

或者，您可以尝试使用简单`Thread`的循环来重复执行任务。循环中的最后一步可以是休眠必要的时间，直到您想再次开始任务。假设没有一次循环迭代需要五分钟，这将消除累积延迟。

```
public void run() {
    long start = System.currentTimeMillis();
    while (shouldRun()) {
        doTask();
        long next = start + FIVE_MINUTES;
        try {
            Thread.sleep(next - System.currentTimeMillis());
            start = next;
        } catch (InterruptedException e) {
            . . .
        }
    }
} 
```

这将在接下来的五分钟间隔开始每次迭代，并且不会由于运行时间`doTask()`或任何系统延迟而累积延迟。我没有查看来源，但我怀疑这与`Timer.scheduleAtFixedRate`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T08:51:44.880

为什么不使用[任务调度程序](http://www.mkyong.com/java/how-to-run-a-task-periodically-in-java/)或简单地在循环中使用睡眠命令，让线程睡眠 5 分钟然后继续。

另一种方法是使用[Timer 类](http://www.shanison.com/2010/05/18/how-to-use-java-timer-class/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:02:48.923

我可能会使用[ScheduleExecutorService.scheduleAtFixedRate](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleAtFixedRate%28java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit%29)，这是一种比使用 a 更现代的方法`Timer`，并且允许有多个工作线程，以防有许多任务被调度。

# webdriver - 单击带有 selenium2library 的元素

> ID：14578802
> 
> 赞同：0
> 
> 时间：2013-01-29T08:47:26.713
> 
> 标签：webdriver, selenium-rc, selenium-webdriver, robotframework

我的整个测试套件基于带有 SeleniumLibrary (RC) 的机器人框架。我正在尝试将其移植到 Selenium2 (webdriver)。我遇到了不再支持**坐标**参数的**Click Element**关键字的问题。我读[了这篇文章](https://stackoverflow.com/questions/5347613/how-it-is-possible-click-on-specific-coordinates-with-selenium2-webdriver-in-c)，其中提到了 MoveToOffsetAction，但在从机器人框架中看到的 Selenium2Library 中找不到它。我还读到 webdriver API 有一个*click_at(locator, coordString)*

 ***总结一下情况，我想知道如何将我的 selenium RC *Click Element Locator Coordinates*转换为 Selenium2 关键字或一组关键字。

非常感谢你的帮助，

皮埃尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:41:03.960

在 Selenium2 API 中，没有使用坐标单击元素的选项。

`Action`但是您可以通过使用该类来解决问题。

**试试这个代码：**

```
 //Assume driver is instantiated somewhere properly.
 WebElement ele = driver.findElement(By.xpath(Element locator));       
 Actions builder = new Actions(driver);
 builder.moveToElement(ele, 100, 200).click().perform(); 
```

通过使用上面的代码，您可以使用坐标（此处按钮）移动到特定元素并能够单击。

欲了解更多信息[http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/interactions/Actions.html](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/interactions/Actions.html)***

# android - 缓存图像并加载它们

> ID：14578814
> 
> 赞同：0
> 
> 时间：2013-01-29T08:48:23.480
> 
> 标签：android, caching, image-processing, image-gallery

我下载了图像并使用 Fedora 的惰性列表将它们缓存到我的缓存文件夹中，但现在，而不是将它们显示到列表视图中。我需要使用 viewpager + touchimageview。我已经找到了示例，但不知道如何将它们加载到 AndroidTouchGallery 中。有人可以给我指点吗？

这是文件cache.java

```
package com.fedorvlasov.lazylist;

import java.io.File;
import java.net.URLEncoder;

import android.content.Context;

public class FileCache {

    private File cacheDir;

    public FileCache(Context context){
        //Find the dir to save cached images
        if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
            cacheDir=new File(android.os.Environment.getExternalStorageDirectory(),"LazyList");
        else
            cacheDir=context.getCacheDir();
        if(!cacheDir.exists())
            cacheDir.mkdirs();
    }

    public File getFile(String url){
        //I identify images by hashcode. Not a perfect solution, good for the demo.
        //String filename=String.valueOf(url.hashCode());
        //Another possible solution (thanks to grantland)
        String filename = URLEncoder.encode(url);
        File f = new File(cacheDir, filename);
        return f;

    }

    public void clear(){
        File[] files=cacheDir.listFiles();
        if(files==null)
            return;
        for(File f:files)
            f.delete();
    }

} 
```

内存缓存（也由 fedora 提供）

```
package com.fedorvlasov.lazylist;

import java.util.Collections;
import java.util.Iterator;
import java.util.LinkedHashMap;
import java.util.Map;
import java.util.Map.Entry;
import android.graphics.Bitmap;
import android.util.Log;

public class MemoryCache {

    private static final String TAG = "MemoryCache";
    private Map<String, Bitmap> cache=Collections.synchronizedMap(
            new LinkedHashMap<String, Bitmap>(10,1.5f,true));//Last argument true for LRU ordering
    private long size=0;//current allocated size
    private long limit=1000000;//max memory in bytes

    public MemoryCache(){
        //use 25% of available heap size
        setLimit(Runtime.getRuntime().maxMemory()/4);
    }

    public void setLimit(long new_limit){
        limit=new_limit;
        Log.i(TAG, "MemoryCache will use up to "+limit/1024./1024.+"MB");
    }

    public Bitmap get(String id){
        try{
            if(!cache.containsKey(id))
                return null;
            //NullPointerException sometimes happen here http://code.google.com/p/osmdroid/issues/detail?id=78 
            return cache.get(id);
        }catch(NullPointerException ex){
            ex.printStackTrace();
            return null;
        }
    }

    public void put(String id, Bitmap bitmap){
        try{
            if(cache.containsKey(id))
                size-=getSizeInBytes(cache.get(id));
            cache.put(id, bitmap);
            size+=getSizeInBytes(bitmap);
            checkSize();
        }catch(Throwable th){
            th.printStackTrace();
        }
    }

    private void checkSize() {
        Log.i(TAG, "cache size="+size+" length="+cache.size());
        if(size>limit){
            Iterator<Entry<String, Bitmap>> iter=cache.entrySet().iterator();//least recently accessed item will be the first one iterated  
            while(iter.hasNext()){
                Entry<String, Bitmap> entry=iter.next();
                size-=getSizeInBytes(entry.getValue());
                iter.remove();
                if(size<=limit)
                    break;
            }
            Log.i(TAG, "Clean cache. New size "+cache.size());
        }
    }

    public void clear() {
        try{
            //NullPointerException sometimes happen here http://code.google.com/p/osmdroid/issues/detail?id=78 
            cache.clear();
            size=0;
        }catch(NullPointerException ex){
            ex.printStackTrace();
        }
    }

    long getSizeInBytes(Bitmap bitmap) {
        if(bitmap==null)
            return 0;
        return bitmap.getRowBytes() * bitmap.getHeight();
    }
} 
```

这是我应该将缓存的数据加载到触摸库中的部分。以前我只需要加载一个字符串数组（数据存储在 sdcard 中），现在我如何在 touchgallery 中显示我作为缓存下载的项目？

```
public class UrlTouchImageView extends RelativeLayout {
    protected ProgressBar mProgressBar;
    protected TouchImageView mImageView;

    protected Context mContext;
    UrlPagerAdapter pagerAdapter;
    String[] mImageIds;
    Bitmap bm;
    ArrayList<String>  mStringList= new ArrayList<String>();

    public UrlTouchImageView(Context ctx, UrlPagerAdapter pagerAdapter)
    {
        super(ctx);
        mContext = ctx;
        this.pagerAdapter = pagerAdapter;

        init();

    }
    public UrlTouchImageView(Context ctx, AttributeSet attrs)
    {
        super(ctx, attrs);
        mContext = ctx;
        init();
    }

    public TouchImageView getImageView() 
    { 
        return mImageView; 
    }

    protected void init() {

        mImageView = new TouchImageView(mContext);
        LayoutParams params = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
        mImageView.setLayoutParams(params);
        this.addView(mImageView);
        mImageView.setVisibility(GONE);

        mProgressBar = new ProgressBar(mContext, null, android.R.attr.progressBarStyleHorizontal);
        params = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
        params.addRule(RelativeLayout.CENTER_VERTICAL);
        params.setMargins(30, 0, 30, 0);
        mProgressBar.setLayoutParams(params);
        mProgressBar.setIndeterminate(true);
        this.addView(mProgressBar);
    }

    public void setUrl(String imageUrl)
    {
        new ImageLoadTask().execute(imageUrl);
    }

    //No caching load
    public class ImageLoadTask extends AsyncTask<String, Integer, Bitmap>
    {
        //RETRIEVES LINK FROM GALLERYACTIVITY
        //READ MNT/SDCARD/....

        @Override
        protected Bitmap doInBackground(String... strings) {
            bm = null;
            String url = strings[0];
            //Log.d("url",url);

            bm = BitmapFactory.decodeFile(url);
            return bm;

        }

        @Override
        protected void onPostExecute(Bitmap bitmap) {

            mImageView.setImageBitmap(bm);
            mImageView.setVisibility(VISIBLE);
            mProgressBar.setVisibility(GONE);
        }
    }
} 
```

我很抱歉我的英语不好以及对android编程的了解不足。希望大家能给我建议。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:18:58.320

我建议你使用这个库。

[https://github.com/chrisbanes/Android-BitmapCache](https://github.com/chrisbanes/Android-BitmapCache)

# django - Django 投票添加 Reddit 样式 - 缺少链接模型

> ID：14578817
> 
> 赞同：1
> 
> 时间：2013-01-29T08:48:36.957
> 
> 标签：django, voting

我想在 Django 中重用任何现有的投票应用程序。
我尝试使用 Django Voting 应用程序 - [http://code.google.com/p/django-voting/wiki/RedditStyleVoting](http://code.google.com/p/django-voting/wiki/RedditStyleVoting)。这个应用程序在 models.py 中有以下代码

```
from django.conf.urls.defaults import *
from django.views.generic.list_detail import object_list

from devdocs.apps.kb.models import Link
from voting.views import vote_on_object 
```

但我在应用程序中看不到任何“devdocs.apps.kb.models”。我该怎么办 ？我应该在 models.py 中创建自己的 Link 类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:07:47.147

您应该将“链接”替换为您创建的代表用户投票的模型。

示例项目 wiki 中的示例：

```
urlpatterns = patterns('',
# Generic view to list Link objects
(r'^links/?$', object_list, dict(queryset=Link.objects.all(),
    template_object_name='link', template_name='kb/link_list.html',
    paginate_by=15, allow_empty=True)),

# Generic view to vote on Link objects
(r'^links/(?P<object_id>\d+)/(?P<direction>up|down|clear)vote/?$',
    vote_on_object, dict(model=Link, template_object_name='link',
        template_name='kb/link_confirm_vote.html',
        allow_xmlhttprequest=True)), 
) 
```

上面的 url 配置本质上是创建 url 端点，供您喜欢、不喜欢或删除您对抽象对象的投票，在示例中是“链接”。

你可以想象，如果你正在建立一个类似 Reddit 的网站，用户会发布链接。此链接模型上的可能字段将是用户的外键、标题和链接。

如果此应用程序类似于 StackOverflow，您可能会创建一个“问题”和“答案”模型，然后可以对其进行投票。

您还必须创建模板来显示您的链接列表以及用户喜欢/不喜欢/清除投票的时间。同样，这在 google 代码项目的 wiki 中也有详细说明：[Reddit Style Voting](http://code.google.com/p/django-voting/wiki/RedditStyleVoting "Reddit 风格投票")

# android - 安装成功后如何运行.apk文件？

> ID：14578821
> 
> 赞同：0
> 
> 时间：2013-01-29T08:48:50.780
> 
> 标签：android, eclipse

我已经通过eclipse建立了一个android项目

在我通过命令 promot 成功安装了我的 .apk 文件并获得了成功字后，我将它复制到手机中以便运行它，但我收到了错误

**解析包错误**

有人可以帮助我谢天谢地。

我的安装方式如下

```
C:\Program  Files\Android\android-sdk\platform-tools>adb -s emulator-5554 install -r    
 path myfile.apk
71 KB/s (533069 bytes in 7.262s)
        pkg: /data/local/tmp/myfile.apk
Success

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.elhadi.azkarElmuslim"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="17"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"

        android:label="أذكار "
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.elhadi.azkar.Main"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

         <activity android:name=".Activity1"></activity>
         <activity android:name=".Activity2"></activity>
         <activity android:name=".Activity3"></activity>
         <activity android:name=".Activity4"></activity>
         <activity android:name=".Activity5"></activity>
         <activity android:name=".Activity6"></activity>
         <activity android:name=".Activity7"></activity>
         <activity android:name=".Activity9"></activity>
         <activity android:name=".Activity10"></activity>
         <activity android:name=".Activity11"></activity>
         <activity android:name=".Activity12"></activity>
         <activity android:name=".Activity13"></activity>
         <activity android:name=".Activity14"></activity>
         <activity android:name=".Activity15"></activity>
         <activity android:name=".Activity16"></activity>
         <activity android:name=".Activity17"></activity>
         <activity android:name=".Activity18"></activity>
         <activity android:name=".Activity19"></activity>
         <activity android:name=".Activity20"></activity>
         <activity android:name=".Activity21"></activity>
         <activity android:name=".Activity22"></activity>
         <activity android:name=".Activity23"></activity>
         <activity android:name=".Activity24"></activity>
         <activity android:name=".Activity25"></activity>
         <activity android:name=".Activity26"></activity>
         <activity android:name=".Activity27"></activity>
           <activity android:name=".Activity30"></activity>
             <activity android:name=".Activity31"></activity>
             <activity android:name=".Activity32"></activity>
               <activity android:name=".Activity33"></activity>
                 <activity android:name=".Activity34"></activity>
                   <activity android:name=".Activity35"></activity>
                     <activity android:name=".Activity36"></activity>
                 <activity android:name=".Activity37"></activity>
                   <activity android:name=".Activity38"></activity>

                       <activity android:name=".Activity39"></activity>
                         <activity android:name=".Activity40"></activity>
                           <activity android:name=".Activity41"></activity>
                             <activity android:name=".Activity42"></activity>
                               <activity android:name=".Activity43"></activity>
                                 <activity android:name=".Activity44"></activity>
                                   <activity android:name=".Activity45"></activity>
                    <activity android:name=".Activity46"></activity>
                      <activity android:name=".Activity47"></activity> 
                        <activity android:name=".Activity48"></activity>
                          <activity android:name=".Activity49"></activity>
                            <activity android:name=".Activity50"></activity>
                              <activity android:name=".Activity51"></activity>
                                <activity android:name=".Activity52"></activity>
                                  <activity android:name=".Activity53"></activity>   
                                  <activity android:name=".Activity54"></activity> 
                                  <activity android:name=".Activity55"></activity> 
                                  <activity android:name=".Activity56"></activity>
                                  <activity android:name=".Activity102"></activity>
                                  <activity android:name=".Activity103"></activity>
                                  <activity android:name=".Activity104"></activity>
                                  <activity android:name=".Activity105"></activity>
                                  <activity android:name=".Activity106"></activity>
                                  <activity android:name=".Activity107"></activity>
                                  <activity android:name=".Activity108"></activity>
                                  <activity android:name=".Activity109"></activity>
                                  <activity android:name=".Activity110"></activity>
                                   <activity android:name=".Activity111"></activity>
                                  <activity android:name=".Activity112"></activity>
                                  <activity android:name=".Activity113"></activity>
                                  <activity android:name=".Activity114"></activity>
                                  <activity android:name=".Activity115"></activity>
                                  <activity android:name=".Activity116"></activity>
                                  <activity android:name=".Activity117"></activity>

                                   <activity android:name=".Activity118"></activity>
                                   <activity android:name=".Activity119"></activity>
                                   <activity android:name=".Activity120"></activity>
                                   <activity android:name=".Activity121"></activity>
                                   <activity android:name=".Activity122"></activity>
                                   <activity android:name=".Activity123"></activity>
                                   <activity android:name=".Activity124"></activity>
                                   <activity android:name=".Activity125"></activity>
                                    <activity android:name=".Activity126"></activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:58:32.900

嗯..可能这将是原因。请在您的版本中添加此支持。例如：你可能

用 android 4 编写并在您的设备中以以下版本运行。所以在清单中使用它。

使用-sdk android:minSdkVersion="8" android:targetSdkVersion="16"

在这个 targetSdkVersion 中，您选择要支持的最高 android 版本。和

在您的项目中，您使用了 17。尝试使用从 android 2.2 支持的 minsdkVersion 到 8

到以上版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:57:14.393

你只需检查你的模拟器你会发现一个应用程序图标（你安装的应用程序的图标）只需点击它就会运行应用程序

# grails - Grails 控制器和服务中的线程池

> ID：14578831
> 
> 赞同：1
> 
> 时间：2013-01-29T08:49:10.950
> 
> 标签：grails, service, concurrency, blocking, controllers

我想知道控制器和服务是如何在 Grails 中实现的。特别是我想知道它是否以及如何为控制器和服务维护一个线程池。

假设以下场景：

> 我有一个 Grails 控制器，它调用一个对外部系统进行阻塞调用的服务。

我是否需要维护服务（甚至控制器）中的线程池，以便当我有多个用户同时访问我的应用程序时，应用程序不会因为调用一个服务而阻塞？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T09:14:09.307

你不需要做任何具体的事情，在 Grails 方面，每个请求都在自己的线程中同时执行。

来自官方文档：“*默认情况下对服务方法的访问是不同步的，因此没有什么可以阻止这些功能的并发执行。* ”参见[http://www.grails.org/version/Services/2](http://www.grails.org/version/Services/2)（“服务和范围”）

# mysql - 选择 * 其中 col1 是每个 col2 的局部最大值

> ID：14578832
> 
> 赞同：1
> 
> 时间：2013-01-29T08:49:11.440
> 
> 标签：mysql, sql, join, greatest-n-per-group

我有几张类似的桌子。我需要通过`*`.
我想获取每个行中`revnr`最高的行的列表`docid`。

我的问题是我不知道如何`max(revnr)`为每个`docid`.

我正在使用 MySQL，但我更喜欢通用的 sql 解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T08:51:08.033

`revnr`您可以在子查询中获取每个的最新值，`docID`然后该结果将连接到表本身。

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  docID, MAX(revnr) max_val
            FROM    tableName
            GROUP   BY docID
        ) b ON  a.docID = b.docID AND
                a.revnr = b.max_val 
```

为了获得更好的性能，请`INDEX`在两列上添加：`docID`和`revnr`

```
ALTER TABLE tableName ADD INDEX (docID, revnr); 
```

# php - 在 PHP 搜索中显示列数据

> ID：14578834
> 
> 赞同：-1
> 
> 时间：2013-01-29T08:49:12.620
> 
> 标签：php, mysql

我有一个名为 products 的 MySQL 表，在这个表中我有数据：

```
id | category | product1 | price1 | discount1 | product2 | price2 | discount2 | product3 | price3 |discount3 |
----------------------------------------------------------------------------------------------------------
| 1 | Meat    | Pork 1kg | 3.99   | -30%    | Lamb 1kg    | 5.94 | -25%      | Ham 200g    | 1.99 | -10% |
| 2 | Fruit   | Apple 1kg| 1.25   | -32%    | Banana 1 kg | 0.99 | -15%      | Melon 1 kg  | 0.79 | -12% | 
```

我的 PHP 搜索脚本如下所示：

```
//-query the database table
$sql="SELECT id, category, product1, price1, discount1, 
product2, price2, discount2, product3, price3, discount3 
FROM products 
WHERE 
product1 LIKE '%" . $name . "%' OR 
price1 LIKE '%" . $name ."%' OR 
discount1 LIKE '%" . $name ."%' OR 
product2 LIKE '%" . $name ."%' OR 
price2 LIKE '%" . $name ."%' OR 
discount2 LIKE '%" . $name ."%' OR 
product3 LIKE '%" . $name ."%' OR 
price3 LIKE '%" . $name ."%' OR 
discount3 LIKE '%" . $name ."%'";

//-run the query against the mysql query function
$result=mysql_query($sql);

//-create while loop and loop through result set
while($row=mysql_fetch_array($result)){

$id=$row['id'];
$category =$row['category'];
$product1=$row['product1'];
$price1=$row['price1'];
$discount1=$row['discount1'];
$product2=$row['product2'];
$price2=$row['price2'];
$discount2=$row['discount2'];
$product3=$row['product3'];
$price3=$row['price3'];
$discount3=$row['discount3'];

//-display the result of the array

echo "<ul>\n"; 
echo  "<li>" . $id . "</li>\n"; 
echo "<li>" . $category . "</li>\n";
echo "<li>" . $product1 . "</li>\n"; 
echo "<li>" . $price1 . "</li>\n";
echo "<li>" . $discount1 . "</li>\n";
echo "<li>" . $product2 . "</li>\n";
echo "<li>" . $price2 . "</li>\n";
echo "<li>" . $discount2 . "</li>\n";
echo "<li>" . $product3 . "</li>\n";
echo "<li>" . $price3 . "</li>\n";
echo "<li>" . $discount3 . "</li>\n";
echo "</ul>";
} 
```

问题是当我搜索让我们说苹果时，香蕉和甜瓜也会显示出来。

使用关键字 apple 搜索时，如何使其仅显示 Apple 及其价格和折扣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T08:57:50.140

你的数据库结构很奇怪，这让你很头疼。而是使用正常关系。

表类别

```
id  name
1   Meat
2   Fruit 
```

餐桌产品

```
id  category_id  product      price  discount
1   1            Pork 1kg     3.99   -30%
2   1            Lamb 1kg     5.94   -25%
3   1            Ham 200g     1.99   -10%
4   2            Apple 1kg    1.25   -32%
5   2            Banana 1 kg  0.99   -15%
6   2            Melon 1 kg   0.79   -12% 
```

您可以使用此查询找到产品（例如“猪肉”）

```
SELECT product.*, category.name as category FROM product INNER JOIN category ON product.category_id = category.id WHERE product.name LIKE 'pork%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:57:08.953

以下是一些使代码真正可用的技巧：

*   停止使用`mysql`（已弃用）并开始使用`mysqli`and `PDO`。
*   [创建一个适当的数据库](http://en.wikipedia.org/wiki/Database_design)。在您的情况下，您至少需要 2 张桌子 -`categories`并且`products`
*   查找一些 SQL 教程。[这是一个](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)（你需要知道如何使用`JOIN`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:57:15.573

如果我理解正确：您有包含三个产品的表格列，因此每行也将是三个产品。所以删除无用的 product2 和 product3 （以及它们的价格等）并只调用你想要的一种产品

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T08:58:06.170

这是因为，这些产品在单行中，将其添加为不同的行

# php - 是否应该在 php 脚本中不使用“->”符号进行数据库连接？如果不能使用，有什么替代方法？

> ID：14578842
> 
> 赞同：1
> 
> 时间：2013-01-29T08:49:38.067
> 
> 标签：php, html, mysqli

以下是我的代码，其中我有 2 个名为`fyear`和的文本框`ayear`。此代码不起作用，因为我无法将它与 MySQL 数据库连接。可能是什么问题，我该如何克服它？我正在使用 PHP：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Home</title>
</head>

<body style="background-color:#708090;">

<?php

if (isset($_POST['submit']))
{

    $mysqli= new mysqli("localhost","admin","admin", "nba" );

    if($mysqli === false)
    {
        die("could not connect:" . mysqli_connect_error());
    }

    if ($inputError != true && empty($_POST['ayear']) )
    {
        echo 'ERROR: Please enter a valid year';
        $inputError = true;
    }
    else
    {
        $ayear = $mysqli-> escape_string($_POST['ayear']);
    }

    if ($inputError != true && empty($_POST['fyear']) )
    {
        echo 'ERROR: Please enter a valid year';
        $inputError = true;
    }
    else
    {
        $fyear = $mysqli->  escape_string($_POST['fyear']);
    }   

    if ($inputError != true)
    {
        $sql="INSERT INTO year VALUES ('$ayear','$fyear')";
        if ($mysqli-> query($sql)==true)
        {
            echo'Added';
        }
        else
        {
            echo"ERROR: Could not execute query : $sql. " . $mysqli-> error;
        }
    }

    $mysqli-> close();

}
?> 

<h1 style="font-family:Verdana;text-align:center;">National Board of Accrediation <br>of<br> Master of Computer Applications Programme</h1>
<br>

<div id="menu" style="background-color:#800000;height:25px;width:1000px">
<b><font "style="font-family:Verdana"><a href="part1.html" title="Institutional Summary"style="color: #000000">Part I</a>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href="part2.html"title="Departmental/Program Summary"style="color: #000000">Part II</a>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href="part3.html"title="Curricula,Syllabi,PEOs and POs"style="color: #000000">Part III</a>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href="part4.html" title="List of Documents to be made available during the visit"style="color: #000000">Part IV</a></font></b>
</div>

<form   method="post" action="home.php"> <p> This  Report  is prepared for the Current Acadamic Year(<input type="text" size="9"  name="ayear" id="ayear" onChange="a('ayear');">) and the Current Financial Year (<input type="text" size="9"  name="fyear" id="fyear" onChange="a('fyear');">) on behalf of the Institution.</p>

<input type="submit" name="submit" value="Submit"/>
</form>
</body>
</html> 
```

问题出在这部分：

```
else
        {
            $ayear = $mysqli-> escape_string($_POST['ayear']);
        } 
```

在“>”符号之后，所有内容都打印在网页中。可能的解决方案是什么？我已经浏览了这段代码，但无法找出错误所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:52:36.987

PHP 根本没有处理您的脚本，因此它`<?php ... ->`被解释为 HTML 标记。在浏览器中查看 HTML 源代码。

脚本是否保存为`.php`? 您的服务器上是否安装了 PHP？

# java - 在java中指定位数

> ID：14578846
> 
> 赞同：3
> 
> 时间：2013-01-29T08:49:46.413
> 
> 标签：java, numbers, format

假设你有：

```
int a = 3; 
```

我想指定位数是 5。所以当我打印它时，输出是：

```
00003 
```

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T08:51:14.787

An`int`仅存储值，不存储格式信息。要显示或保留前导零，您必须使用字符串。

```
 System.out.println(String.format("%05d", a)); 
```

# jquery - jQuery表单图片上传

> ID：14578847
> 
> 赞同：1
> 
> 时间：2013-01-29T08:49:46.767
> 
> 标签：jquery, jquery-plugins

我最近尝试使用[http://malsup.com/jquery/form/#file-upload](http://malsup.com/jquery/form/#file-upload)进行文件上传，但我不完全确定如何将图像上传到服务器上的某个文件夹。

继承人的jQuery：

```
(function() {

var bar = $('.bar');
var percent = $('.percent');
var status = $('#status');

$('form').ajaxForm({
    beforeSend: function() {
        status.empty();
        var percentVal = '0%';
        bar.width(percentVal)
        percent.html(percentVal);
    },
    uploadProgress: function(event, position, total, percentComplete) {
        var percentVal = percentComplete + '%';
        bar.width(percentVal)
        percent.html(percentVal);
        //console.log(percentVal, position, total);
    },
    complete: function(xhr) {
        status.html(xhr.responseText);
    }
}); 

})(); 
```

然后是 HTML：

```
<h1>File Upload Progress Demo #3</h1>
<code>&lt;input type="file" name="myfile[]"></code><br>
<code>&lt;input type="file" name="myfile[]"></code><br>
<code>&lt;input type="file" name="myfile[]"></code>
<form action="files-raw.php" method="post" enctype="multipart/form-data">
    <input type="file" name="myfile[]"><br>
    <input type="file" name="myfile[]"><br>
    <input type="file" name="myfile[]"><br>
    <input type="submit" value="Upload File to Server">
</form>

<div class="progress">
    <div class="bar"></div >
    <div class="percent">0%</div >
</div>

<div id="status"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:11:33.010

服务器端代码负责将上传的文件保存到服务器，当您使用 PHP 时，您可以通过`$_FILES["myfile"]`. 我假设你想要这样的代码，

```
$newdirectory = "/your/directory";
$count = 0;
foreach ($_FILES['myfile']['name'] as $filename)
{
    $temp = $_FILES['myfile']['tmp_name'][$count];
    move_uploaded_file($temp, $newdirectory . '/' . basename($filename));
    $count++;
} 
```

这应该按照您的要求进行。[有关在此处](http://php.net/manual/en/features.file-upload.post-method.php)和[此处](http://php.net/manual/en/function.move-uploaded-file.php)处理上传的更多信息`move_uploaded_file`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:56:22.480

如果它在 MVC 中，那么在视图中

```
<form action="Home/HandleFileUpload" method="post" enctype="multipart/form-data">
    <input type="file" name="myfile[]"><br>
    <input type="file" name="myfile[]"><br>
    <input type="file" name="myfile[]"><br>
    <input type="submit" value="Upload File to Server">
</form> 
```

并在控制器中写下这个......

```
[HttpPost]
        public ActionResult HandleFileUpload()
        {
            if (!string.IsNullOrEmpty(Request.Headers["X-File-Name"]))
            {
                string path = Server.MapPath(string.Format("~/Uploads/{0}", Request.Headers["X-File-Name"]));
                using (var fileStream = new FileStream(path, FileMode.OpenOrCreate))
                {
                    Request.InputStream.CopyTo(fileStream);
                }

                return this.Json(new { success = true });
            }

            return this.Json(new { success = false });
        }
       } 
```

# iphone - 如何隐藏iphone顶栏？

> ID：14578848
> 
> 赞同：0
> 
> 时间：2013-01-29T08:49:46.160
> 
> 标签：iphone, ios, hide

我是ios开发新手.......

当我的应用程序运行时屏幕顶部出现一个 BAR ..... 其中包含

网络、数字时钟和电池符号

我怎么能隐藏这个酒吧？
提前致谢.........

```
[window addSubview:navigationController.view];
[window makeKeyAndVisible];

arryName = [[NSMutableArray alloc] initWithObjects:@"Savasana",@"Makarasana",@"Padahastasana",@"Natarajasana",@"Ustrasana",@"Hanumanasana",@"Garbhasana",@"Bhujapidasana",@"Astavakrasana(Eight-Angle Pose)",@"Mayurasana",@"Paschimottanasana",@"Janu Sirsasana",@"Urdhva Mukha Svanasana",@"Urdhva Dhanurasana",@"Bhujangasana",@"Bakasana",@"Surya Namaskar",@"Akarna Dhanur asana",@"Anjaneya asana",@"Ardha Chandra asana",@"Ardha Matsyendra asana",@"Baddha Kona Asana",@"Bala Asana",@"Chakra Asana",@"Dhanur asana",@"Ekapada asana",@"Garuda asana",@"Gomukha asana",@"Hala sana",@"Hasta Pada angusta",@"Matsya asana",@"Naga asana",@"Nataraja asana",@"Padma asana",@"Parivritta parshvakona",@"Pavana mukta asana",@"Sarvanga asana",@"Shalabha asana",@"Shava asana",@"Siddha asana",@"Simha asana",@"Sirsha asana",@"Tada asana",@"Trikona asana",@"Ugra asana",@"Ushtra asana",@"Vajra asana",@"Vira asana",@"Vriksha asana",@"Vrischika asana",@"Anjali Mudra",@"Ardha Matsyendrasana",nil];

arryImage = [[NSMutableArray alloc]initWithObjects:@"savasana_248.jpg",@"crocodile.jpg",@"Padahastasana.jpg",@"Natarajasana_248.jpg",@"Ustrasana_248.jpg",@"Hanumanasana_248.jpg",@"garbhasana.gif",@"bhujapidasana_1.jpg",@"Astavakrasana_248.jpg",@"Mayurasana.jpg",@"Paschimottanasa_248.jpg",@"JanuSirsasana.jpg",@"UrdhvaMukhaSvanasana.jpg",@"UrdhvaDhanurasana.jpg",@"Bhujangasana.jpg",@"Bakasana.jpg",@"1_Surya-namaskar.png",@"2-akarna_dhanurasana.png",@"3-Anjanya.png",@"4-ardha-chand.png",@"5-Adhamatsya.png",@"6-Baddha-kona.png",@"7-child-pose-balasana.png",@"8-Chakrasana-wheel-pose.png",@"9-Dhanura_asana-Bow_Pose.png",@"10-ekapada-asana-the-one-legged-pose.png",@"11-garudasana.png",@"12-gomukhasana.png",@"13-Halasan.png",@"14-Hasta.Padangusthasana.png",@"15-Matsyasana.png",@"16-naga-vj-g.png",@"17-natarajasana.png",@"18--padma.png",@"19--Parivrtta_Parsvakonasana-Revolved_Side_Angle_Pose.png",@"20-PAWANMUKTASANA.png",@"21-SHOULDER STAND.png",@"22--Salabhasana.png",@"23-Savasana.png",@"24-SIDDHASANA.png",@"25-Simha-asan-the lion.png",@"26-Sirsasana.png",@"27-Tada_Asana.png",@"28-Trikona_Asana.png",@"29-Ugra-asna-the Noblepose.png",@"30--ustrasana.png",@"31--Vijrasana.png",@"32-Vira-asna-the hero pose.png",@"33--Vriksha_Asana-Tree_Pose.png",@"34-VariskhikaiPad.png",@"AnjaliMudra.jpg",@"ArdhaMatsyendrasana.jpg",nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:34:27.193

在您的项目 Info.plist 文件中设置状态栏最初是隐藏的，是的，这将隐藏整个项目的状态栏。

![在此处输入图像描述](../Images/357a1076605ac3bfacb047313ed84fc9.png)

如果您想特别隐藏状态栏，请查看

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:<#(UIStatusBarAnimation)#>]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:13:49.900

**其称为状态栏：**

如果要隐藏状态栏，请在`didFinishLaunchingWithOptions`方法中编写以下代码`AppDelegate`

```
 [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationSlide]; 
```

此代码用动画隐藏状态，如果要删除动画，请设置`withAnimation:NO`

**另一种在状态栏隐藏时自动设置 viewController 大小的方法：**

```
 CGRect appFrame = [[UIScreen mainScreen] applicationFrame];

        [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationSlide];
        [UIView animateWithDuration:0.25 animations:^{
            self.navigationController.navigationBar.frame = self.navigationController.navigationBar.bounds;
            self.view.window.frame = CGRectMake(0, 0, appFrame.size.width, appFrame.size.height);
        }]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:54:02.437

试试下面的代码

```
[[UIApplication sharedApplication] setStatusBarHidden:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T08:56:49.720

它被称为“状态栏”。

您可以通过在“AppDelegate”的“AppDidFinishLauching”方法中添加以下行来隐藏它：

```
[[UIApplication sharedApplication] setStatusBarHidden:YES]; 
```

您也可以从 .plist 文件中隐藏它。

干杯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T08:58:07.090

在您的`ProjectName-Info.plist`文件集中`Status bar is initially hidden` `YES`

否则使用`[[UIApplication sharedApplication] setStatusBarHidden:YES];`

# git - 有什么想法Visual Studio 2012中的git菜单在哪里

> ID：14578850
> 
> 赞同：1
> 
> 时间：2013-01-29T08:49:55.400
> 
> 标签：git, github, visual-studio-2012

我在 Visual Studio 2012 上安装了 git 源代码控制提供程序（例如：工具 -> 扩展和更新，然后搜索 git 并安装 git 源代码控制提供程序），但我看不到“git”菜单。我使用“Visual Studio 11 Integration”和 TortoiseGit 安装了 git 扩展。我可以将 github 与这些连接起来，并且可以从右键单击上下文菜单中使用所有 git 功能。但我想在 Visual Studio 2012 上查看 git 菜单。是否知道 git 菜单在哪里？PS：我可以在visual studio 2010中看到git菜单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:12:09.373

你的版本过时[了，获取最新版本](http://gitextensions.googlecode.com/files/GitExtensions243SetupComplete.msi)的 Git Extensions（此时为 2.43）

# iphone - 将自定义视图添加到窗口并模糊背景视图并且不允许单击背景视图

> ID：14578851
> 
> 赞同：0
> 
> 时间：2013-01-29T08:49:59.287
> 
> 标签：iphone, ios

你好，我自定义了一个像对话框一样的290*280视图，一切正常，但是我的自定义视图后面的其他视图可以点击，我想当我的customView弹出时可以点击其他视图，我也想要我后面的窗口自定义视图模糊。

我的代码是：

```
#import <UIKit/UIKit.h>

@interface RecordView :UIView

@property (strong, nonatomic) IBOutlet UIButton *confirmBu;
@property (strong, nonatomic) IBOutlet UIButton *playBu;
@property (strong, nonatomic) IBOutlet UIButton *recrodBu;
@property (strong, nonatomic) IBOutlet UIButton *closeBu;

@property (strong, nonatomic) IBOutlet UIImageView *backgroundImageview;
@property (strong, nonatomic) IBOutlet UIImageView *showImageview;

-(void)setViewStyle;
@end

 #import "RecordView.h"

    @interface RecordView ()

    @end

    @implementation RecordView

    @synthesize confirmBu;
    @synthesize playBu;
    @synthesize recrodBu;
    @synthesize closeBu;

    @synthesize backgroundImageview;
    @synthesize showImageview;

    -(void)setViewStyle{

         self.frame=CGRectMake(15,100, 290, 280);
         self.backgroundColor=[UIColor clearColor];

        backgroundImageview.layer.masksToBounds=YES;
        backgroundImageview.layer.cornerRadius=15.0;
        backgroundImageview.layer.borderWidth=4.0;
        backgroundImageview.layer.borderColor=[[UIColor lightGrayColor] CGColor];

    }

    @end

self.recordDialog= [[[NSBundle mainBundle] loadNibNamed:@"RecordView" owner:self options:nil]lastObject];
                [self.recordDialog setViewStyle];
  [delegate.window addSubview:self.recordDialog]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:13:18.687

另一种方法是以编程方式创建当前屏幕的屏幕截图。[使用https://github.com/tomsoft1/StackBluriOS](https://github.com/tomsoft1/StackBluriOS)之类的东西模糊屏幕截图，然后将该图像设置为背景。当您单击关闭按钮时，您所要做的就是再次隐藏背景图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:00:34.157

您可以创建半透明图像，这将产生模糊效果。呈现第一张图像，然后呈现 290*280 的图像视图。图像将防止点击背景控制，您将拥有模糊的外观。

# c++ - Visual Studio 2012 中的 BadImageFormatExeption

> ID：14578856
> 
> 赞同：1
> 
> 时间：2013-01-29T08:50:16.450
> 
> 标签：c++, clr, static-libraries, wrapper, linker-errors

我将 cimg（本机 c++ 头库）包装到 dot net 并对其进行了测试，它在 c++ CLR 中运行良好，我使用的数学方法看起来像这样。因为 cimg 只是一个头文件，所以我创建了一个 win32 静态库项目并构建了它，然后我在 CLR c++ 中使用了头文件，并将我的 win32 静态库添加到了附加库中（我这样做的原因是为了避免链接器错误），并且它工作正常，最后我尝试从 CLR 制作一个 DLL，以便我能够在我的 c# GUI 项目中使用它，所以我将 CLR c++ 项目的输出更改为 DLL，然后我在 c# winform App 中引用它然后当我尝试运行它时，我收到此错误消息。

```
 System.BadImageFormatException was unhandled
  HResult=-2147024885
  Message=Could not load file or assembly 'cpp tester, Version=1.0.4775.2046, Culture=neutral, PublicKeyToken=null' or one of its dependencies. An attempt was made to load a program with an incorrect format.
  Source=WindowsFormsApplication1
  FileName=cpp tester, Version=1.0.4775.2046, Culture=neutral, PublicKeyToken=null
  FusionLog==== Pre-bind state information ===
LOG: User = serak-PC\serak
LOG: DisplayName = cpp tester, Version=1.0.4775.2046, Culture=neutral, PublicKeyToken=null
 (Fully-specified)
LOG: Appbase = file:///C:/Users/serak/Desktop/Cimg Wrapper/WindowsFormsApplication1/bin/Debug/
LOG: Initial PrivatePath = NULL
Calling assembly : WindowsFormsApplication1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
===
LOG: This bind starts in default load context.
LOG: No application configuration file found.
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Users/serak/Desktop/Cimg Wrapper/WindowsFormsApplication1/bin/Debug/cpp tester.DLL.
ERR: Failed to complete setup of assembly (hr = 0x8007000b). Probing terminated.

  StackTrace:
       at WindowsFormsApplication1.Form1.button2_Click(Object sender, EventArgs e)
       at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
       at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ButtonBase.WndProc(Message& m)
       at System.Windows.Forms.Button.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at WindowsFormsApplication1.Program.Main() in c:\Users\serak\Desktop\Cimg Wrapper\WindowsFormsApplication1\Program.cs:line 18
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:03:48.327

您的 DLL 和应用程序的“位数”是否可能不匹配？如果您正在执行 32 位构建，请确保 C++/CLI 包装器 .DLL 和 WinForms C# GUI .EXE 都是使用平台目标**x86**（而不是“*任何 CPU* ”）构建的。要检查这一点，在 VS2010 中，您可以转到项目属性，然后选择“*构建*”选项卡。

# iphone - 将 JSON 解析为数字 - iphone

> ID：14578857
> 
> 赞同：1
> 
> 时间：2013-01-29T08:50:21.300
> 
> 标签：iphone, ios, objective-c

我的 iphone 应用程序正在访问 JSON 服务，该服务返回如下内容：

```
{"theResult":{"Total":1.5, "Comment":"some comment"}} 
```

我正在使用的代码成功地解析了任何 NSStrings，例如上面的注释字段，但我遇到了数值问题。

```
NSDictionary *res= [json objectForKey:@"theResult"];
NSString *comment = [res objectForKey:@"Comment"];
NSDecimal *total = (__bridge NSDecimal *)[res objectForKey:@"Total"]; 
```

*total 变量未正确设置并导致 EXC_BAD_ACCESS 错误。

如何解析objective-c中的数值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T08:53:36.823

将对象转换为正确的数据类型，像这样

```
float total = [[res objectForKey:@"Total"] floatValue]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:05:34.353

只需获取`NSString *strtotal = [res objectForKey:@"Total"];`然后转换您想要的任何格式

```
NSDecimalNumber *decimal = [NSDecimalNumber decimalNumberWithString:strtotal]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:54:24.123

您也可以使用以下方法

```
+(NSDecimalNumber *)decimalNumberWithString:(NSString *)numericString in NSDecimalNumber 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T09:01:08.347

`NSDecimal`不是一个对象，它是一个不透明的结构。`NSDecimalNumber`是一个对象，你想要投射到什么。由于`id`和`NSDecimalNumber *`都是对象类型，因此您不需要使用`__bridge`.

此外，您的 JSON 中的数字甚至可能无法解析为十进制数；它可能只是一个浮点数或双精度数（包含在一个 中`NSNumber`）。

# c - 如何在 bash 脚本中运行 ac 程序并给它一些值？

> ID：14578858
> 
> 赞同：1
> 
> 时间：2013-01-29T08:50:25.067
> 
> 标签：c, bash, parameters

我想用 bash 脚本在 C 中运行我的程序，此外，我希望我的 bash 脚本将一些值传递给我的 C 程序。这是我的 C 代码（非常简单，它读作输入数学运算，例如：2 + 3，将其保存到文件中，仅此而已）：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
    int howMany = 0, i = 0;
    float num1, num2;
    char sign;

    FILE *fp;
    if((fp=fopen("operations.txt", "w"))==NULL)
    {
        exit(-1);
    }

    printf("How many math operations would you like to pass?\n> ");
    scanf("%d", &howMany);

    for(i=0; i<howMany; i++)
    {
        printf("Pass %d operations like this: {num1 sign num2}:\n> ", i+1);
        scanf("%f %c %f", &num1, &sign, &num2);

        fprintf(fp, "%f ", num1);
        fprintf(fp, "%c ", sign);
        fprintf(fp, "%f", num2);
        if(i < howMany-1)
            fprintf(fp, "\n");
    }

    fclose(fp);
    return 0;
} 
```

然后，我有我的 bash 脚本，我希望它在 C 中运行我的程序并给它 9 个数学运算：1+2、3+4、... 9+10。我是这样做的：

```
#!/bin/bash

n=9
echo "$n" | ./app

for (( i=1; $i < 10; i++ )) ; do
       let "c=$i+1" 
       echo $i "+" $c | ./app
done 
```

但是有一个问题，它不能按我的意愿工作。请帮忙 - 只有使用这个 bash 脚本，我的 C 程序才能很好地工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T08:59:19.463

问题是你执行了你的`./app`几次，每次都喂它整体的一小部分。

您可以对命令进行分组，然后将其全部通过管道传输到您的应用程序的一个实例，如下所示：

```
#!/bin/bash
{ 
n=9
echo "$n" 

for (( i=1; $i < 10; i++ )) ; do
       let "c=$i+1" 
       echo $i "+" $c
done
} | ./app 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T09:01:11.967

这是因为您正在运行 的独立实例`./app`，每个实例提供的数据量都少于其预期的全部数据量。您可以通过以下方式绕过它：

```
(
    n=9
    echo "$n"

    for (( i=1; $i < 10; i++ )) ; do
        let "c=$i+1" 
        echo $i "+" $c
     done
) | ./app 
```

这会将整个命令集`()`作为单个子 shell 运行，并将批次的输出通过管道传输到应用程序的*单个实例中。*

* * *

更好的方法可能是使用随机数据，例如：

```
#!/bin/bash

(
    (( count = $RANDOM % 100  + 1 ))
    echo ${count}

    while [[ ${count} -gt 0 ]] ; do
        (( val1 = $RANDOM % 100 ))
        (( op   = $RANDOM % 2 + 1 ))
        (( val2 = $RANDOM % 100 ))
        op=$(echo '+-' | cut -c${op}-${op})
        echo ${val1} ${op} ${val2}
        (( count = count - 1 ))
    done
) | ./app 
```

这将为您提供以下内容：

```
9
9 - 91
56 - 4
85 + 25
23 + 15
6 + 86
10 - 26
99 - 26
19 + 31
33 - 60 
```

这可能会提供更好的覆盖范围。

# iphone - 如何在 ios 中使用 child 过滤 XML 中的数据

> ID：14578859
> 
> 赞同：0
> 
> 时间：2013-01-29T08:50:25.527
> 
> 标签：iphone, ios, xml, ipad, filter

我有一个像

```
 <MenuItem><ItemId>0e29531a-c08f-49a9-a8d0-9cdbeb156145</ItemId><ItemName>Grades</ItemName><MenuItemId>4dc25103-906c-44e7-ae94-a30c37c8c5e6</MenuItemId></MenuItem>

<MenuItem><ItemId>72a10662-c1e2-42bf-b8d9-0a879b729e54</ItemId><ItemName>Manage Account(s)</ItemName><MenuItemId>b0d16a5d-9468-40a3-879c-006c8583ddba</MenuItemId></MenuItem>

<MenuItem><ItemId>49155938-346d-44c9-b44d-70c2770b7414</ItemId><ItemName>Linked Guardians</ItemName><ParentId>72a10662-c1e2-42bf-b8d9-0a879b729e54</ParentId></MenuItem> 
```

所以我只想获取`ItemName`前两个标签，而不是最后一个标签，因为最后一个标签是标签 2 的子标签，但它也有 `itemName`，这个 xml 行的顺序可能会改变。

如何在目标 C 中获取它

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{

    if([elementName isEqualToString:@"ItemName"]){

            xmlStringFileObject.xmltitle=nodecontent;
        }
    } 
```

我尝试了上述方法，但我得到了所有三个

# c# - 程序不访问 ValidatingEditor 和 InvalidValueException

> ID：14578861
> 
> 赞同：1
> 
> 时间：2013-01-29T08:50:29.217
> 
> 标签：c#, devexpress

我正在使用 DevExpress DataGrid 我正在从 excel 中填充它。如果用户将字段名称保持为空，我需要给他一条错误消息。这是我的代码：

```
using DevExpress.XtraGrid.Views.Base;
using DevExpress.XtraGrid.Columns;
using DevExpress.XtraEditors.Controls;
using DevExpress.XtraGrid.Views.Grid;

string FirstName = "First Name";
string FatherName = "Father Name";
string LastName = "Last Name";
private void simpleButton1_Click(object sender, System.EventArgs e)
    {
        try
        {
            OleDbConnection con = new OleDbConnection();
            con.ConnectionString = "Provider=Microsoft.Ace.OLEDB.12.0;Data Source=C:\\Users\\pc\\Documents\\Emp.xlsx;Extended Properties=\"Excel 12.0;HDR=Yes\"";

            con.Open();
            DataTable dtSchema;
            dtSchema = con.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, new object[] { null, null, null, "TABLE" });
            OleDbCommand Command = new OleDbCommand ("select * FROM [" + dtSchema.Rows[0]["TABLE_NAME"].ToString() + "]", con);
            OleDbDataAdapter da = new OleDbDataAdapter(Command);
            DataSet ds = new DataSet ();
            da.Fill(ds);
            dataGrid1.DataSource = ds.Tables[0];
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }   

private void gridView3_ValidatingEditor(object sender, DevExpress.XtraEditors.Controls.BaseContainerValidateEditorEventArgs e)
    {
        GridView view = sender as GridView;
        if(view.FocusedColumn.FieldName == "FirstName") 
        {
            string FirName = (e.Value.ToString());
            if(FirName == null) 
            {
                e.Valid = false;
                e.ErrorText = "Enter a First Name";
            }
        }
    }

private void gridView3_InvalidValueException(object sender, DevExpress.XtraEditors.Controls.InvalidValueExceptionEventArgs e)
    {
        //Do not perform any default action 
        e.ExceptionMode = DevExpress.XtraEditors.Controls.ExceptionMode.NoAction;
        //Show the message with the error text specified 
        MessageBox.Show(e.ErrorText);
    } 
```

问题是当我运行程序时..代码无法访问此代码并且没有显示错误..有人能注意到我的错在哪里吗？太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:32:44.423

很遗憾，鉴于您提供的信息，我无法回答您的问题。但是，您应该调查许多事情以找出问题所在。

编辑：添加第 3 点。

1.  检查您是否已将处理程序分配给`InvalidValueException`和`ValidatingEditor`上的事件`gridView3`。您已表明您已通过设计器完成此操作，因此您应该能够搜索您的代码库并验证您是否可以找到以下行：

    `gridView3.InvalidValueException += gridView3_InvalidValueException` `gridView3.ValidatingEditor += gridView3_ValidatingEditor`

2.  在这两种方法的顶部放置一个断点并验证是否正在调用处理程序 - 即，您不仅仅依赖于验证工作，而不是验证正在调用您的处理程序。

3.  阅读有关[ValidatingEditor](http://documentation.devexpress.com/#windowsforms/DevExpressXtraGridViewsBaseBaseView_ValidatingEditortopic)和[InvalidValueException](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsBaseBaseView_InvalidValueExceptiontopic)事件的 DevExpress 文档，以确保您正确理解它们是如何触发的。

# c# - MVVM 从关闭的窗口中获取值

> ID：14578862
> 
> 赞同：0
> 
> 时间：2013-01-29T08:50:30.543
> 
> 标签：c#, wpf, mvvm

我有一个小对话框，我可以在其中设置一个值。这个对话框的视图只有一个文本框和两个按钮。我将 textbox.Text 绑定到 ViewModel 中的属性 TbText。通过一个行为，我从它的视图模型中关闭视图。打开此对话框的代码如下所示：

```
AddLineDialog dialog = new AddLineDialog();
bool? result = dialog.ShowDialog();
if(result.HasValue && result.Value)
{
//Here i need the Text from the closed dialog
}
... 
```

对话框关闭后，我需要访问 Property TbText 的值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:57:30.797

您可以将 ViewModel 或任何类绑定到 Dialog 的 Datacontext：

```
 AddLineDialog dialog = new AddLineDialog();
    var vm = new LineDialogViewModel();
    dialog.DataContext = vm; 
```

然后将文本框绑定到您的类中的属性

```
 <textbox Value="{Binding MyProperty}"> 
```

在此之后，您可以读出您的课程

```
 if(dialog.ShowDialog())
    {
       var value = vm.MyProperty;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:12:06.647

在 Source 中使用 INotifyPropertyChanged 接口，然后在文本框中绑定应该如下所示

```
<TextBox Text={Binding Path=Name, 
                            Mode=TwoWay, 
                            UpdateSourceTrigger=PropertyChanged} /> 
```

这是一种双向绑定，因此每当用户输入在源属性中更新的数据时。如果您需要此数据，您可以从用于绑定的模型属性访问。

希望以上解决方案可以帮助您解决问题

# c# - MonoTouch MKLocalSearch 示例

> ID：14578863
> 
> 赞同：1
> 
> 时间：2013-01-29T08:50:35.270
> 
> 标签：c#, ios, xamarin.ios, mkmapview, mapkit

我找不到样本，`MKLocalSearch`所以我在下面添加了一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T08:50:35.270

```
MKLocalSearchRequest req=new MKLocalSearchRequest
{
  Region=new MKCoordinateRegion(map.CenterCoordinate, new MKCoordinateSpan(0.05, 0.05)), // ~50km radius
  NaturalLanguageQuery=text,
};

var localSearch=new MKLocalSearch(req);
localSearch.Start(delegate(MKLocalSearchResponse response, NSError error)
{
  if (error==null)
  {
    foreach (var item in response.MapItems)
    {
      var coord=item.IsCurrentLocation?map.UserLocation.Coordinate:item.Placemark.Coordinate;
      map.AddAnnotation(new MKPointAnnotation { Coordinate=coord, Title=item.Name });
    }
  }
  //else show error
}); 
```

map 是您的 MKMapView，text 是您要搜索的位置/业务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:20:27.380

[MonoTouch 6.0.10](http://docs.xamarin.com/ios/releases/MonoTouch_6/MonoTouch_6.0#MonoTouch_6.0.10)（昨晚发布，与 iOS 6.1 同一天）中提供了对 iOS 6.1 的支持。

如发行说明中所述（请参阅上一个链接），添加了一个新示例以显示新的 MapKit 搜索功能。它在 github上的 Xamarin 的[monotouch-samples中可用。](https://github.com/xamarin/monotouch-samples/tree/master/MapKitSearch)

# c# - 隐藏 MediaPlayer 控件（Microsoft 媒体平台播放器框架）

> ID：14578867
> 
> 赞同：1
> 
> 时间：2013-01-29T08:51:00.417
> 
> 标签：c#, xaml, windows-8, windows-store-apps, mmppf

我在 ac#/xaml 应用程序中使用 MMP:PF 并提供我自己的控制元素来处理播放器。

这就是为什么我想隐藏/禁用出现在底部的自己的本机控件。（在屏幕截图的中间，这个只是使用一个主题）

有人知道该怎么做吗？我没有设法找到一个属性。

![在此处输入图像描述](../Images/3a95528043161dd275c0a951e593fa92.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-17T10:02:44.087

The magic property to keep players controls from showing up at all:

```
InteractiveActivationMode="None" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-21T05:29:10.460

像这样使用：

```
axWindowsMediaPlayer1.uiMode = "None"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T09:33:14.463

来自`MediaPlayer`的参考、、 、`IsTimeLineVisible`和`IsPlayPauseVisible`许多其他可用的可见性属性。所以你可以将它们设置为假。看看[MediaPlayer 属性](http://smf.blob.core.windows.net/docs/win8/xaml/api/Index.html)`IsPositionVisible``IsStopVisible`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T09:26:00.373

HichemC 答案的替代解决方案：您可以更改播放器控件模板。

使用 Blend 并不难，而且它给了你很多控制权。例如，您可以将控件与播放器的状态 (VSM) 挂钩，并确保您的控件与播放器的内部状态正确同步。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-15T18:31:01.247

如果您想一次隐藏/显示所有控件：

```
_player.IsInteractive = true/false; 
```

这是反编译的 MediaPlayer.cs 的屏幕截图，供那些说该属性不存在的人使用。

[![在此处输入图像描述](../Images/7c9b92cbbed8abdfd731ad0d93f8d5e9.png)](https://i.stack.imgur.com/9wRLE.png)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-22T01:00:26.770

我负责 Microsoft 的 MMPPF，很乐意为您解答任何问题。我同意这里的建议。虽然我喜欢这个网站，但我们并没有对 MMPPF 支持问题进行大量监控。如果您确实需要我们的回答，我的团队每天都会监控 CodePlex 项目网站上的支持页面，他们的响应速度非常快。不要让这阻止您使用这个论坛 - 我只是建议我们的项目站点是一种更好的方式，可以在需要时直接从开发人员那里获得答案。

我希望你的应用做得很好。

迈克·唐尼（Mike Downey）在 microsoft.com 上接听了 --at---

# iphone - 即使在通知中心关闭后也收到推送通知

> ID：14578872
> 
> 赞同：2
> 
> 时间：2013-01-29T08:51:09.523
> 
> 标签：iphone, ios, objective-c

我创建了一个推送通知应用程序，并尝试在通知中心打开时发送推送消息。但是现在我已经关闭了通知中心并尝试推送消息。仍然会为推送通知显示警报并收到推送消息。请帮助我。

# java - JFace 仅调整 TitleAreaDialog 中最后一组的大小

> ID：14578876
> 
> 赞同：2
> 
> 时间：2013-01-29T08:51:29.547
> 
> 标签：java, resize, swt, jface, titleareadialog

下面附加的程序创建了一个 TitleAreaDialog，其中包含四个组。每个组都包含控件，最后一个是“动态”，即在组合框中选择条目时，会生成一定数量的控件。

现在，幸运的是，对话框会自动调整大小——但我希望对调整大小有更多的控制。就像现在一样，对话大小在组之间“分布”均匀。我想要完成的是*只*放大（或缩小）最后一组，即使用户用鼠标调整对话框的大小。三个静态组的大小（高度）应保持固定。

有没有办法做到这一点？蒂亚！

```
public class DialogExample extends ApplicationWindow {
    class MyDialog extends TitleAreaDialog {
        MyDialog(Shell shell) {
            super(shell);
            setShellStyle(getShellStyle() | SWT.MAX | SWT.RESIZE);
        }

        private Composite createComposite(Composite parent) {
            Composite c = new Composite(parent, SWT.NONE);
            GridLayout layout = new GridLayout(1, false);
            layout.horizontalSpacing = 10;
            c.setLayout(layout);
            c.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));
            return c;
        }

        private Group createGroup(Composite parent, String title) {
            Group newGroup = new Group(parent, SWT.NONE);
            newGroup.setText(title);
            newGroup.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));
            GridLayout layout = new GridLayout();
            newGroup.setLayout(layout);          
            return newGroup;
        }

        private Group createGroup(Composite parent, int controlCount) {
            Group newGroup = createGroup(parent, "Group " + controlCount);
            for (int i = 0; i < controlCount; i++) {
                Label l = new Label(newGroup, SWT.NONE);
                l.setText("Label " + (i + 1));
            }          
            return newGroup;
        }

        private Group createControlGroup(final Composite parent) {          
            final Group newGroup = createGroup(parent, "Control Group");
            final Combo combo = new Combo(newGroup, SWT.READ_ONLY);
            combo.add("1");
            combo.add("2");
            combo.add("3");
            combo.addSelectionListener(new SelectionListener() {
                  @Override
                  public void widgetSelected(SelectionEvent event) {
                      for (Control c: newGroup.getChildren()) {
                           if (c != combo) {
                                c.dispose();
                           }
                      }
                      for (int i = 0; i <combo.getSelectionIndex() + 1; i++) {
                          Label l = new Label(newGroup, SWT.None);
                          l.setText("Dynamic Label " + (i + 1));
                      }
                      parent.getShell().pack();
                  }

                  @Override
                  public void widgetDefaultSelected(SelectionEvent arg0) {
                  }
            });
        return newGroup;
     }

     public void create() {
        super.create();
        setTitle("Title");
        setMessage("Message");
     }

     protected Control createDialogArea(Composite parent) {
        Composite main = createComposite(parent);
        createGroup(main, 1);
        createGroup(main, 2);
        createGroup(main, 3);     
        createControlGroup(main);
        return main;
      }
    }

    public DialogExample() 
    {
      super(null);
    }

    public void run() {
      setBlockOnOpen(true);
      open();
      Display.getCurrent().dispose();
    }

    protected Control createContents(Composite parent) {
      Label label = new Label(parent, SWT.CENTER);
      label.setText("Dialog example");
      TitleAreaDialog dialog = new MyDialog(parent.getShell());

      dialog.open();
      return label;
    }

    public static void main(String... args) {
      new DialogExample().run();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:17:40.403

原因是您使用以下内容：

```
newGroup.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true)); 
```

这意味着每个组都应该跨越父组并占据尽可能多的空间。

您可以使用以下方法解决此问题：

```
newGroup.setLayoutData(new GridData(SWT.FILL, SWT.BEGINNING, true, false)); 
```

对于不应垂直拉伸的组件，并且：

```
newGroup.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true)); 
```

对于那些应该的人。

* * *

如果您还没有阅读“理解 SWT 中的布局”，请在[此处](http://www.eclipse.org/articles/article.php?file=Article-Understanding-Layouts/index.html)阅读。

# javascript - Javascript 下拉菜单在 Internet Explorer 中不起作用

> ID：14578885
> 
> 赞同：0
> 
> 时间：2013-01-29T08:51:45.227
> 
> 标签：javascript

我有一个下拉菜单，无法在 Internet Explorer 中工作。它在 Chrome 和 Firefox 上运行良好，但在 Internet Explorer 中没有任何作用。而且我更喜欢将我所有的 javascript 保存在我的单独文档 javascript.js 中，并且我不想使用库。我正在使用的 HTML 代码是这样的：

```
<div id="sidemeny-container">
<div class="sidemenu-maincat">
    <img src="cat1.jpg" alt="cat1" />
        <div class="sidemenu-subcat hidden">
        <a href="subcat1.html"> - Subcat 1 </a>
        </div>
        <div class="sidemenu-subcat hidden">
        <a href="subcat2.html"> - Subcat 2 </a>
        </div>
        <div class="sidemenu-subcat hidden">
        <a href="subcat3.html"> - Subcat 3 </a>
        </div>  
    </div>

    <div class="sidemenu-maincat">
    <img src="cat2.jpg" alt="cat2" />
        <div class="sidemenu-subcat hidden">
        <a href="subcat2-1.html"> - Subcat 2-1 </a>
        </div>
        <div class="sidemenu-subcat hidden">
        <a href="subcat2-2.html"> - Subcat 2-2 </a>
        </div>
        <div class="sidemenu-subcat hidden">
        <a href="subcat2-3.html"> - Subcat 2-3 </a>
        </div>  
    </div>
        </div> 
```

和CSS代码：

```
#sidemeny-container {
    border-bottom:1px #000 solid; 
    height: auto;
    width: 153px;
    float:left;
    padding: 10px 0px 0px 0px;

}

.sidemenu-maincat {
    border-top: 1px #000 solid;
    border-right: 1px #000000 solid;
    width:148px;
    height:auto;
    float:left;
    padding: 0px 0px 0px 5px;
}

.sidemenu-subcat.hidden {
    display:none;
    width:148px;
    height:auto;
    float:left;
    padding: 0px 0px 0px 15px;
} 
```

还有我在一个单独的 .js 文档中的 javascript：

```
 function initiate()
    {

  if (document.getElementsByClassName)
    {
        var sideMenuOptions = document.getElementsByClassName('sidemenu-maincat');
        for (var i = 0; i < sideMenuOptions.length; i++) {
            sideMenuOptions[i].addEventListener('click', function () {
                var subMenuItems = this.getElementsByClassName('sidemenu-subcat');
                for (var s = 0; s < subMenuItems.length; s++) {
                    var subItem = subMenuItems[s];
                    if (subItem.offsetWidth === 0 && subItem.offsetHeight === 0) {
                        subItem.className = 'sidemenu-subcat';
                    } else {
                        subItem.className = subItem.className + ' hidden';
                    }
                }
            });
        }
    }
    else
    {
        var sideMenuOptions = document.getElementsByTagName('div');
        for (var i = 0; i < sideMenuOptions.length; i++) {
            if (sideMenuOptions[i].className == 'sidemenu-maincat')
            {
                sideMenuOptions[i].addEventListener('click', function () {
                    var subMenuItems = this.getElementsByClassName('sidemenu-subcat');
                    for (var s = 0; s < subMenuItems.length; s++) {
                        var subItem = subMenuItems[s];
                        if (subItem.offsetWidth === 0 && subItem.offsetHeight === 0) {
                            subItem.className = 'sidemenu-subcat';
                        } else {
                            subItem.className = subItem.className + ' hidden';
                        }
                    }
                });
            }
        }
    }
    }

    window.onload = initiate; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:35:30.573

您的代码在 IE9 和 IE10 上运行良好。但是，以前的版本不支持`addEventListener`，并且该`attachEvent`方法[不提供`currentTarget`属性](http://www.quirksmode.org/js/events_order.html)。因此，确定调用对象的唯一方法是[通过原型设计](https://stackoverflow.com/a/4590302/1170489)（或使用框架）替换`this`引用。

您的代码的另一个问题是 IE8 不支持`getElementsByClassName()`. 当您的代码对此进行测试时，回退尝试再次使用它来实例化`subMenuItems`. 更好的方法是使用[Document.querySelectorAll](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)，它适用于 IE8 及更高版本，可以让您避免重复代码。

完整示例：

```
Element.prototype.addAnEvent = function(name, funct) {
    if (this.addEventListener) {
        this.addEventListener(name, funct, false);
    } else if (this.attachEvent) {
        var _this = this;
        this.attachEvent("on" + name, function() {
            funct.apply(_this);
            // where the value of "this" in funct should point to "element"
        });
    }
};

function initiate() {
    var sideMenuOptions = document.querySelectorAll('.sidemenu-maincat');
    for (var i = 0; i < sideMenuOptions.length; i++) {
        sideMenuOptions[i].addAnEvent('click', function() {
            openSubmenu(this);
        });
    }
}

function openSubmenu(element) {
    var subMenuItems = element.querySelectorAll('.sidemenu-subcat');
    for (var s = 0; s < subMenuItems.length; s++) {
        var subItem = subMenuItems[s];
        if (subItem.offsetWidth === 0 && subItem.offsetHeight === 0) {
            subItem.className = 'sidemenu-subcat';
        } else {
             subItem.className = subItem.className + ' hidden';
        }
    }
}

window.onload = initiate; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:45:17.613

大多数开发人员通过使用强大的 polyfill（例如 JQuery）来应对这一挑战，它可以为您处理此类跨浏览器兼容性问题。自己努力跟上所有跨浏览器的问题！

如果您有兴趣，可以在源代码中包含 JQuery 并替换

```
sideMenuOptions[i].addEventListener('click', function () { 
```

和

```
$(sideMenuOptions[i]).on("click", function() { 
```

那应该让你开始。

# javascript - $(document).on(...) 不起作用

> ID：14578887
> 
> 赞同：-5
> 
> 时间：2013-01-29T08:51:46.977
> 
> 标签：javascript, jquery, events

不知何故行

```
$(document).on(eventType, handler); 
```

抛出错误

```
TypeError: $(...).on is not a function 
```

什么做错了？

**PS：**如果这有帮助，我将 jquery lib 包含在以下行中

```
<script src="src/libs/jquery-1.6.1.js"> </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T08:53:15.810

[`on`](http://api.jquery.com/on/)仅包含在 jQuery 1.7 及更高版本中。作为替代方案，请使用[`delegate`](http://api.jquery.com/delegate/)（或者如果可能，升级您的 jQuery）。

委托示例：

```
$("table").delegate("td", "click", function() {
    $(this).toggleClass("chosen");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:53:38.197

jQuery`on()`是在 1.7 版中添加的。[请看这里](http://api.jquery.com/on/)

所以要么选择另一种方式来做你需要做的事情，要么升级你的jQuery版本。

来自 jQuery 网站：

```
For help in converting from older jQuery event methods, see .bind(), .delegate(), and .live(). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:54:20.563

[http://api.jquery.com/on/](http://api.jquery.com/on/)

它在 jQuery 1.7 之前不存在

# http - 快速连续下载时 rebol 超时

> ID：14578891
> 
> 赞同：1
> 
> 时间：2013-01-29T08:51:50.870
> 
> 标签：http, download, rebol

我已经花了几个小时试图解决这个问题，而 Rebol 似乎无法做到这一点。这是一个从网页下载所有图像的程序。很高兴看到我可以用更少的代码行来编写它，但性能却很糟糕。下载 4-5 个文件后 Rebol 超时。通过添加到循环的末尾来减少超时，`wait 5`但这需要的时间太长了！

一个相同的程序是用 C 语言编写的，它可以立即下载所有内容。这是 Rebol 中下载图像的部分代码：

[http://pastebin.com/fTnq8A3m](http://pastebin.com/fTnq8A3m)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:30:48.737

您的脚本中有许多错误[http://pastebin.com/fTnq8A3m的脚本中有许多错误](http://pastebin.com/fTnq8A3m)

例如你有

```
write ... read/binary ... 
```

所以你正在以二进制形式读取图像，然后将其写成文本。当 url 已经作为 url 存在时，您也将 url 作为文本处理！数据类型。

所以在

```
read/binary join http://www.rebol.com/ %image.jpg 
```

那里的加入保留了数据类型！完好无损的。没有必要这样做

```
read/binary to-url join "http://www.rebol.com/" %image.jpg 
```

这些图像的尺寸是多少？

添加等待 5 也不会影响下载，因为您正在尝试阻塞同步下载，而且由于您使用的是按钮，您将在 VID 内部，这意味着在等待中使用等待。

另一种方法是设置一个异步处理程序，然后开始下载，这样您就不会像现在那样阻塞 GUI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T06:48:30.370

多年来将 REBOL 用于商业应用程序，其中大多数都需要联网，从多种方式来看，我可以肯定 REBOL 的联网非常稳定。事实上，它可以让服务器运行数月而没有任何内存泄漏。

但是由于您有一个非常具体的目标，我想我会制作一个小应用程序，向您展示如何完成和工作。

这绝对适用于 R2。您可能遇到的一个问题是网络端口超时，但只有当您下载的服务器和/或图像需要几秒钟并且花费的时间超过默认的 30 秒超时时，才会出现这种情况。

下面的应用程序使用单个 url 作为其参数（您可以将其设置为靠近顶部的任何内容），它将下载其在页面上找到的所有**<IMG>** url。它支持 http 和 https，我已经在一些网站上进行了测试，比如 wikipedia、bing、google 图片搜索，它运行良好……每台服务器的下载率都相当稳定。我在最小 gui 上添加了速度报告，让您了解下载速率。

请注意，这是一个同步应用程序，它只是下载图像列表......你不能简单地添加一个 gui 并期望它同时运行，因为这需要一个完全不同的网络模型（异步 http 端口），这需要更复杂的网络代码。

```
rebol [
    title: "webpage images downloader example"
    notes: "works with R2 only"
]

; the last page-url is the one to be used... feel free to change this
page-url: http://en.wikipedia.org/wiki/Dog
page-url: https://www.google.com/search?q=dogs&tbm=isch
page-url: http://www.bing.com/images/search?q=dogs&go=&qs=ds

;------
; automatically setup URL-based information
page-dir: copy/part page-url find/last/tail page-url "/"
page-host: copy/part page-url find/tail at page-url 8 "/"

?? page-url
?? page-dir
?? page-host

output-dir: %downloaded-images/  ; save images in a subdir of current-directory
unless exists? output-dir [make-dir output-dir ]

images: []

;------
; read url (expecting an HTML document)
;
; Parse is used to collect and cleanup URLs, make them absolute URLs. 
parse/all read page-url [
    some [
        thru {<img } thru {src="} copy image to {"} (
            case [
                "https://" = copy/part image 8 [image: to-url image]
                "http://" = copy/part image 7 [image: to-url image]
                "//" = copy/part image 2 [image: join  http:// at image 3  ]
                #"/" = pick image 1 [image: join page-host image ]
                'default [image: join page-dir image]
            ]
            append images image
         )
    ]
]

;------
; pretty-print image list
new-line/all images yes
probe images

;------
; display report window
view/new layout [ field-info: text 500 para [wrap?: false]   speed-info: text 500    ]

;------
; download images and report all activity
i: bytes: 0
s: now/precise
foreach image images [
    unless attempt [
        i: i + 1 
        probe image
        legal-chars: charset [#"a" - #"z" #"A" - #"Z" "0123456789-_.="] 
        fname: to-string find/last/tail image "/" ; get filename from url

        parse/all fname [some [ legal-chars | letter: skip  (change letter "-") ] ] ; convert illegal filename chars

        fname: join output-dir to-file fname ; use url filename to build disk path
        write/binary fname read/binary image ; download file

        ; update GUI
        t: difference now/precise s

        field-info/text: rejoin ["Downloading: (" i "/" length? images ") "  fname]
        show field-info

        bytes: bytes + size? fname
        speed-info/text: rejoin ["bytes: "  bytes ",   time: "  t   ",   speed : " (bytes / 1000) / ( to-decimal t) "kb/s"]
        show speed-info

        true ; all is good, attempt should return a value
    ][
        print "^/^/---^/unable to download image:"
        print image
        print "---^/^/"
    ]
] 
```

如果您不需要网页扫描仪并且有要抓取的手动图像列表，只需将该代码替换为如下所示的图像块：

```
images: [ 
    http://server.com/img1.png
    http://server.com/img2.png
    http://server.com/img3.png
] 
```

让下载循环完成它的工作。

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T04:07:32.747

需要漫长的等待吗？在长循环中，rebol 需要不时等待来处理 gui 事件，但 IIRC 等待 0 应该可以解决问题。事件排队是否有可能产生问题？

# javascript - 如何从 Greasemonkey 中的现有文本创建链接？

> ID：14578895
> 
> 赞同：0
> 
> 时间：2013-01-29T08:52:07.623
> 
> 标签：javascript, hyperlink, greasemonkey

我想我在理解如何使用正则表达式和创建链接时遇到了太多麻烦......

我正在为虚拟宠物游戏编写 Greasemonkey 脚本，该脚本将为特定页面上列出的每个生物创建指向 wiki 的链接。问题是，新宠物一直被添加到页面中，所以我不能只是将链接硬编码到脚本中。我需要搜索生物名称，然后将其设为链接...

您无需注册即可查看[**目标页面。**](http://unicreatures.com/view_accomplishments.php?id=66219)

目标页面的示例源代码：

```
<tr>
    <td>Flizzard</td>
    <td align="center"><img src="./images/icons/yes.png" /></td>
    <td align="center"><img src="./images/icons/yes.png" /></td>
    <td align="center"><img src="./images/icons/yes.png" /></td>
    <td align="center"><img src="./images/icons/yes.png" /></td>
    <td align="center"><img src="./images/icons/yes.png" /></td>
    <td align="center"><img src="./images/icons/yes.png" /></td>
    <td align="center"><img src="./images/icons/yes.png" /></td>
</tr>
<tr>
    <td>Fluff</td>
    <td align="center"><img src="./images/icons/yes.png" /></td>
    <td align="center"><img src="./images/icons/yes.png" /></td>
    <td align="center"><img src="./images/icons/yes.png" /></td>
    <td align="center"><img src="./images/icons/yes.png" /></td>
    <td align="center"><img src="./images/icons/yes.png" /></td>
    <td align="center"><a href="accomplishments.php?family=Fluff&acc=exalted"><img src="./images/icons/no.png" border="0" /></a></td>
    <td align="center"><a href="accomplishments.php?family=Fluff&acc=herd"><img src="./images/icons/no.png" border="0" /></a></td>
</tr> 
```

.
.

“Flizzard”和“Fluff”将是我想要变成链接的东西......我找到了这个并开始研究它，它可能会起作用，除了它似乎没有说明从哪里开始比赛（在某种程度上无论如何，这对我来说很有意义），我不知道该输入什么（The-Identifier-That-Denotes-End-Of-Text-Of-Interest）

```
var html = document.body.innerHTML;
html = html.replace( /(http://wiki.unicreatures.com/index.php?title=)(.*?)(The-
Identifier-That-Denotes-End-Of-Text-Of-Interest)/g, $1<a href="path/to/$2">$2</a>$3
);
document.body.innerHTML = html; 
```

.

有人可以尝试解释一下该正则表达式是如何工作的，以及什么会起作用（The-Identifier-That-Denotes-End-Of-Text-Of-Interest），因为我似乎没有看到任何标点符号或空格生物名称？

谢谢！

（请不要使用 jQuery 信息... javascript 足以让我的大脑立即环绕 LOL）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:23:58.330

简短的回答：**你不能用正则表达式来做到这一点。**

为什么？因为要替换的 HTML 没有唯一标识符或模式。

你会想要做这样的事情，而不是：

```
// Get that table in that page
var table = document.getElementById('right').getElementsByTagName('table')[4]

// Get all table rows
var tableRows = table.getElementsByTagName('tr');

// For each table row, (except the first)
for(i=1; i<tableRows.length; i++) {

    // Get the first table cell
    var tableCell = tableRows[i].children[0];

    // Replace the text with a link, or whatever you fancy
    tableCell.innerHTML = '<a href="http://wiki.unicreatures.com/index.php?title='+tableCell.innerHTML.toLowerCase()+'">'+tableCell.innerHTML+'</a>';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T07:17:01.457

您的代码可以简化为：

```
var critterCells = document.querySelectorAll (
    "#right div.content table:nth-child(4) tr td:first-child"
);

for (var J = 1, L = critterCells.length;  J < L;  ++J) {
    var critterName = critterCells[J].textContent;

    critterCells[J].innerHTML =
        '<a href="http://wiki.unicreatures.com/index.php?title='
        + critterName + '"' + 'target="_blank">' + critterName
        + '</a>'
    ;
} 
```

CSS 选择器中的`#right div.content`, 有助于防止在错误的表格/页面上运行。

* * *

**jQuery**版本只是短一点（到目前为止）：

```
var critterCells = $("#right div.content table:eq(4) tr:gt(0)").find ("td:first");

critterCells.each (function () {
    var jThis       = $(this);
    var critterName = jThis.text ();
    jThis.html (
        '<a href="http://wiki.unicreatures.com/index.php?title='
        + critterName + '"' + 'target="_blank">' + critterName
        + '</a>'
    );
} ); 
```

但是，如果您将来要切换，它将在任何浏览器上运行。（例如，IE`textContent`直到 IE9 才支持。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T23:02:33.520

另一个答案没有用......但这确实

```
var mytable = document.getElementById('right').getElementsByTagName('table')[4];
var myrows = mytable.rows

for(i=1;i < myrows.length;i++)
{
var oldInner;
oldInner = myrows[i].cells[0].innerHTML;
var critterName;
critterName=myrows[i].cells[0].textContent;

 myrows[i].cells[0].innerHTML = "<a href='http://wiki.unicreatures.com
/index.php?title=" + critterName + "'"+ 'target="_blank">'+oldInner +"</a>";
} 
```

# jquery - 如何在 jquery 框架对话框中设置消息？

> ID：14578902
> 
> 赞同：0
> 
> 时间：2013-01-29T08:52:34.080
> 
> 标签：jquery, c#-4.0, dialog, message

我正在创建一个 div，然后我在其中写入一条消息以显示，但是这次我的 div 还必须包含 ID，它是动态的，所以我想动态地写入消息。但我无法获得如何在我的 jquery 函数中编写消息。下面是我的代码：

```
 $(function confirm () {
                         $('#update-dialog').dialog({
                         modal: true,
                         buttons: {
                          Ok: function () {
                          $(this).dialog('close');
                            }
                          }
                          });
                        }); 
```

我的 Div 是：

```
 <div id="update-dialog" title="Mortgage Application Lock" style="display: none">
   <%-- <span class="textfont">This Mortgage Application is currently in use.</span>--%>
</div> 
```

它必须有来自功能的消息，而不是硬写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:01:26.510

```
$( "#update-dialog" ).dialog({open: function( event, ui ) { $(this).html("my recurring message other than hard written with html"); } }); 
```

# java - 如何在声纳中将 Java 源代码与作者联系起来

> ID：14578903
> 
> 赞同：0
> 
> 时间：2013-01-29T08:52:35.890
> 
> 标签：java, sonarqube

我遇到了一个问题。我想在分析项目后向每个代码猴子发送电子邮件。此电子邮件应包含直接链接到声纳页面的所有链接，以查找违规者。
我使用过[SCM Activity](http://docs.codehaus.org/display/SONAR/SCM+Activity+Plugin)，但我没有找到它们之间的关系。我试图从数据库中查询违规行为，但我没有找到它在哪里。

我没有一个好主意。

请帮我。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:44:08.130

这是我们正在使用[Sonar DevCockpit 插件](http://www.sonarsource.com/products/plugins/developer-tools/developer-cockpit/)进行的工作。因此，如果您有足够的耐心，这样的功能将在不久的将来成为 Sonar 的主流；-)

# javascript - 隐藏和显示文本字段

> ID：14578908
> 
> 赞同：4
> 
> 时间：2013-01-29T08:52:42.407
> 
> 标签：javascript

我是 javascript 的初学者。我想在单击按钮时显示一个隐藏的文本框。我执行以下代码，但它不起作用。

我的代码有什么问题？

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">
        function display() {
            var z = prompt("enter your name...");
            if(z != null) {
                document.getElementById("demo").innerHTML = "thankyou " + z + "..";
                document.getElementById("case").style.visibility = 'visible';
            } else {
                document.getElementById("demo").innerHTML = "thankyou";
            }
        }
        </script>
        <title></title>
    </head>
    <body>
        <p id="demo">
            click on the button.....
        </p><button type="button" onclick="display()">submit</button>
        <form>
            <input type="text" id="case" name="myText" style="display:none">
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-29T08:57:13.220

代替

```
document.getElementById("case").style.visibility='visible'; 
```

和

```
document.getElementById("case").style.display='block'; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-29T08:55:13.967

将样式更改为显示块而不是可见性，

```
document.getElementById("case").style.display='block'; 
```

或将您的文本框作为可见性隐藏而不是 display:none

```
<input type="text" name=<name> style="visibility:hidden"/> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-02T14:46:52.353

以下两条语句将显示 id 为“case”的元素：

```
document.getElementById("case").style.display='block'; 
```

或者

```
document.getElementById("case").style.display=''; 
```

以下语句将隐藏 id 为“case”的元素：

```
document.getElementById("case").style.display='none'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-26T15:18:58.990

Display:none 适用于 HTML 隐藏按钮

# javascript - 使用按钮在 aspx.cs 上调用 JavaScript 函数（在 aspx 中）

> ID：14578911
> 
> 赞同：2
> 
> 时间：2013-01-29T08:53:00.473
> 
> 标签：javascript, asp.net, .net, webforms

我有这个aspx：

```
 <body>
    <div>
    <script type="text/javascript">
        function NewPage() {
            document.location.href = "http://www.nextservice.pt/"
        }
        </script>
         <form id="form1" runat="server">
 <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>

                    <asp:Button ID="Btn2" runat="server" Text="OK" onclick="Button2_Click" />

            CODE1: <asp:Label ID="Label1" runat="server" Text="Label" ForeColor="#CC0000" />
        </form>
        </div>
</body> 
```

我正在使用网络表单，我不会在 aspx.cs 上调用此按钮

```
 public partial class SITE_TESTER : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void Button2_Click (object sender, EventArgs e)
    {
        string code = TextBox1.Text.ToString();

        if (!verifyCode(code))  // comparing users from table 
        {
            Label1.Text = "Not Exists";  //for invalid code
        }
        else
        {
            Label1.Text = "Exist";  //for sucsseful code
            /*

            I Wont call my JavaScript Function here!!!!

            */
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T08:58:17.607

您可以通过以下方式从asp.net中的服务器端调用javascript方法：

```
protected void button_Click(object sender , EventArgs e)
{
        string jsMethodName= = "NewPage()";
        ScriptManager.RegisterClientScriptBlock(this, typeof(string), "uniqueKey", jsMethodName, true);

      //or
      //ScriptManager.RegisterStartupScript(this, GetType(), "NewPage()", false); 
} 
```

你可以使用`ScriptManager.RegisterStartupScript`或者`ScriptManager.RegisterClientScriptBlock`

所以两者之间的区别解释如下：

假设我们有一个带有以下表单标签的 .aspx 页面：（行号仅供参考）

```
1\. <form id="Form1" runat="server">
2\. ..
3\. ..
4\. ..
5\. </form> 
```

现在让我们看看每种方法的主要区别：

A. `Page.RegisterClientScriptBlock()`将在第 2 行之前插入脚本 *块*`Page.RegisterStartupScript()`。将在第 4 行之后插入脚本。

B. `Page.RegisterClientScriptBlock()`通常应该用于封装在函数中的脚本。（因此“块”这个词） `Page.RegisterStartupScript()`可以用于任何脚本，即使它不在函数中。

C. `Page.RegisterClientScriptBlock()`应该用于不需要在页面加载时运行的功能。 `Page.RegisterStartupScript()`应该用于必须在页面加载时运行的脚本。

D. `Page.RegisterClientScriptBlock()`应用于不需要创建表单元素的脚本。 `Page.RegisterStartupScript()`应该用于需要创建表单元素并使用对它们的引用的脚本。

请注意，所有 4 个差异本质上是相互关联的（它们建立在前一个差异的基础上）。放在一行中的差异有时可能太微妙了。

你可以从[这里](https://stackoverflow.com/questions/666519/difference-between-registerstartupscript-and-registerclientscriptblock)和[这里了解更多关于这些的信息](https://groups.google.com/forum/?fromgroups=#!topic/DotNetDevelopment/QC0sC-bJBMU)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:00:23.130

您可以添加一个脚本，该脚本将在页面加载到浏览器时执行：

```
Page.RegisterStartupScript("unique_key", "<script type=\"text/javascript\">NewPage()</script>"); // but this is deprecated function 
```

或像这样：

```
ClientScript.RegisterClientScriptBlock(this.GetType(), "unique_key", "NewPage()", true); 
```

但是，如果您只是想做一个重定向（正如我从您的 NewPage 函数中看到的那样），您可以这样做：

```
Response.Redirect("http://www.example.com"); 
```

# java - 带有泽西岛的 json：NoClassDefFoundError

> ID：14578912
> 
> 赞同：6
> 
> 时间：2013-01-29T08:53:06.827
> 
> 标签：java, jakarta-ee, jaxb, jersey, jax-rs

我正在尝试使用 JAX-RS (Jersey) 构建 JSON RESTful Web 服务。我也在使用 Maven 来构建应用程序。

我的第一种方法是

```
@Path("/Person")
public class PersonService {
    @GET
    public String getPersonService() {
        Personperson= new Person();
        person.setLocationCode("MEL");
        person.setName("Johannes");
        return person.getName();
    }
} 
```

在 pom.xml->clean install + Run On Server 之后它可以工作并且输出与执行一样。但我想使用 JAXB 来获取 JSON 格式的 Person 及其所有属性：

```
@Path("/Person")
public class PersonService {
    @GET
    public Person getPersonService() {
        Personperson= new Person();
        person.setLocationCode("MEL");
        person.setName("Johannes");
        return person;
    }
} 
```

所以我加了

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-json</artifactId>
    <version>1.8</version>
</dependency> 
```

到我的 pom 文件。额外的 lib 文件（例如 jackson-cors-asl-1.7.1.jar、jackson-jaxrs-1.7.1.jar、jaxb-impl、...）也可以在生成的 war 文件中找到。 **//编辑：**它还下载 stax-api-1.0.1.jar 和 stax-api-1.0-2.jar 这两个文件之一似乎让错误发生

**错误：** 但调用 /Person（或任何其他服务）会导致错误：

```
javax.servlet.ServletException: Servlet.init() for servlet CloudAPIService threw exception
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    com.sap.security.auth.service.webcontainer.internal.Authenticator.invoke(Authenticator.java:147)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    com.sap.core.tenant.valve.TenantValidationValve.invokeNextValve(TenantValidationValve.java:169)
    com.sap.core.tenant.valve.TenantValidationValve.invoke(TenantValidationValve.java:84)
    com.sap.core.js.monitoring.tomcat.valve.RequestTracingValve.invoke(RequestTracingValve.java:27)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    java.lang.Thread.run(Thread.java:662) 
```

根本原因：

```
java.lang.NoClassDefFoundError: Could not initialize class com.sun.xml.bind.v2.model.impl.RuntimeBuiltinLeafInfoImpl
com.sun.xml.bind.v2.model.impl.RuntimeTypeInfoSetImpl.<init>(RuntimeTypeInfoSetImpl.java:61)
com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.createTypeInfoSet(RuntimeModelBuilder.java:129)
com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.createTypeInfoSet(RuntimeModelBuilder.java:81)
com.sun.xml.bind.v2.model.impl.ModelBuilder.<init>(ModelBuilder.java:152)
com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.<init>(RuntimeModelBuilder.java:89)
com.sun.xml.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:456)
com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:302)
com.sun.xml.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1136)
com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:154)
com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:121)
com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:202)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:133)
javax.xml.bind.ContextFinder.find(ContextFinder.java:286)
javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:372)
javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:337)
javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:244)
com.sun.jersey.server.impl.wadl.WadlApplicationContextImpl.<init>(WadlApplicationContextImpl.java:72)
com.sun.jersey.server.impl.wadl.WadlFactory.init(WadlFactory.java:97)
com.sun.jersey.server.impl.application.RootResourceUriRules.initWadl(RootResourceUriRules.java:169)
com.sun.jersey.server.impl.application.RootResourceUriRules.<init>(RootResourceUriRules.java:106)
com.sun.jersey.server.impl.application.WebApplicationImpl._initiate(WebApplicationImpl.java:1298)
com.sun.jersey.server.impl.application.WebApplicationImpl.access$700(WebApplicationImpl.java:169)
com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:775)
com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:771)
com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:193)
com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:771)
com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:766)
com.sun.jersey.spi.container.servlet.ServletContainer.initiate(ServletContainer.java:488)
com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.initiate(ServletContainer.java:318)
com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:609)
com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:210)
com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:373)
com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:556)
javax.servlet.GenericServlet.init(GenericServlet.java:244)
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
com.sap.security.auth.service.webcontainer.internal.Authenticator.invoke(Authenticator.java:147)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
com.sap.core.tenant.valve.TenantValidationValve.invokeNextValve(TenantValidationValve.java:169)
com.sap.core.tenant.valve.TenantValidationValve.invoke(TenantValidationValve.java:84)
com.sap.core.js.monitoring.tomcat.valve.RequestTracingValve.invoke(RequestTracingValve.java:27)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
java.lang.Thread.run(Thread.java:662) 
```

**当前解决方法：** 我没有添加 jersey-json 依赖项，而是直接添加了 jackson 依赖项：

```
<groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-core-asl</artifactId>
            <version>1.9.11</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.9.11</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-jaxrs</artifactId>
            <version>1.9.11</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-xc</artifactId>
            <version>1.9.11</version>
        </dependency> 
```

但现在我必须手动添加 jersey-json.jar。

**有没有办法两个添加 jersey-json 两个依赖项，但避免它下载 stax-api.jar 的？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T08:40:20.990

我相信 NoClassDefFoundError 是由于您的类路径中可能存在冲突的 JAXB-impl jar 引起的。

如果您认为 Jackson 和 Jersey 捆绑的 stax-api 依赖项导致了这个问题（我怀疑不是这种情况），您可以在 maven pom.xml 中将它们从 jersey-json 依赖项中排除。

```
 <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-json</artifactId>
        <version>1.8</version>
        <exclusions>
            <exclusion>
                <artifactId>jettison</artifactId>
                <groupId>org.codehaus.jettison</groupId>
            </exclusion>
            <exclusion>
                <artifactId>jackson-core-asl</artifactId>
                <groupId>org.codehaus.jackson</groupId>
            </exclusion>
            <exclusion>
                <artifactId>jackson-mapper-asl</artifactId>
                <groupId>org.codehaus.jackson</groupId>
            </exclusion>
            <exclusion>
                <artifactId>jackson-jaxrs</artifactId>
                <groupId>org.codehaus.jackson</groupId>
            </exclusion>
            <exclusion>
                <artifactId>jackson-xc</artifactId>
                <groupId>org.codehaus.jackson</groupId>
            </exclusion>
            <exclusion>
                <artifactId>stax-api</artifactId>
                <groupId>javax.xml.stream</groupId>
            </exclusion>
        </exclusions>
    </dependency> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T08:39:02.587

**可能的解决方案（为我工作）：**

事实证明[stax 是 Java 1.6 附带的](https://stackoverflow.com/questions/7374048/do-i-need-stax-api-1-0-x-in-my-web-app-when-using-jdk-1-6)。但是泽西下载了提到的两个 stax jar 文件。所以我猜这个错误是因为有重复的类而发生的。

我只是在 pom.xml 中排除了相应的包，它现在可以工作了：

```
 <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-json</artifactId>
            <version>1.14</version>
            <exclusions>
                <exclusion>
                    <artifactId>stax-api</artifactId>
                    <groupId>stax</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>stax</artifactId>
                    <groupId>stax</groupId>
                </exclusion>
            </exclusions>
        </dependency> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-02T11:53:22.333

我知道这个问题已经很老了，但也许答案可能对后代有用；）我解决了这个问题

```
<dependency>
<groupId>com.sun.xml.bind</groupId>
<artifactId>jaxb-impl</artifactId>
<version>2.0.1</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T09:09:28.273

据我所知，JAXB 用于 XML 绑定。如果你想要 JSON，你可以看看[http://wiki.fasterxml.com/JacksonJAXBAnnotations](http://wiki.fasterxml.com/JacksonJAXBAnnotations)

这可能很有趣：[如何重用 Jersey 的 JSON/JAXB 进行序列化？](https://stackoverflow.com/questions/1071749/how-to-reuse-jerseys-json-jaxb-for-serialization)

# hook - SugarCRM - 延迟执行的非常简单的逻辑挂钩

> ID：14578914
> 
> 赞同：0
> 
> 时间：2013-01-29T08:53:08.463
> 
> 标签：hook, sugarcrm

我有非常非常简单的逻辑钩子——我还在学习，一开始我很困惑。我打开开发者模式。

我已经在联系人模块中有字段“FIRST_NAME”。我也在联系人模块中创建了我的字段“MY_FIELD”。

在我添加的 logic_hooks.php 文件中

```
$hook_array['before_save'] = Array();
$hook_array['before_save'][] = Array(1, 'Value from one field to another', 'custom/modules/Contacts/my.php', 'User_hook','copy'); 
```

在我添加的 my.php 文件中

```
class User_hook {

    function copy(&$bean, $event, $arguments)
    {

    $bean->my_field_c  = $bean->fetched_row['first_name']. " - additional text";
    }

} 
```

因此，当我输入 First_Name 值“First”时，我输入了我的字段值“-additional text”，但我应该得到“First-additional text”。如果我转到编辑视图并在名字字段“第二”中输入，我将进入我的字段值“第一 - 附加文本”，但我应该得到“第二 - 附加文本”。如果我进入编辑视图“第三”，我将进入我的字段“第三 - 附加文本”，但我应该得到“第三 - 附加文本”。

所以很明显我的逻辑钩子在一次迭代中被延迟执行——为什么以及如何改变它？这是我的第一个钩子，所以我没有那么经验。感谢帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T14:56:10.970

$bean->fetched_row['first_name'] 将在您更改之前返回该字段的值。您可以使用它来查看用户在表单上更改 first_name 之前的值。

尝试使用

```
class User_hook {

    function copy(&$bean, $event, $arguments)
    {

    $bean->my_field_c  = $bean->first_name. " - additional text";
    }

} 
```

# android - 您可以在不与父活动通信的情况下从片段内部打开数据库吗？

> ID：14578915
> 
> 赞同：0
> 
> 时间：2013-01-29T08:53:11.723
> 
> 标签：android, database, android-fragments

是否可以直接从片段内部打开数据库？我尝试将数据库处理程序从我的活动传递给片段，我知道它有效。我只是想知道我是否可以通过其他方式做到这一点。也许是更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:02:05.593

您可以像这样在片段中创建数据库处理程序的实例

```
 DatabaseHandler dbh = new DatabaseHandler(getActivity()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:05:40.157

我会仔细检查具体的实现，`DatabaseHandler`但我相信任何上下文都会这样做，因此您可以滚动自己的实现`Application.getInstance()`并使用您的应用程序上下文。

这使您的代码无需挂接到任何`Activity`实例。

# python - 如何从 Python 中的字典值中减去？

> ID：14578920
> 
> 赞同：-2
> 
> 时间：2013-01-29T08:53:25.900
> 
> 标签：python

我必须从字典值中减去。

```
list1 = {'i': 1, 'k': 1, 'j': 1, 'o': 2, 'q': 1, 's': 1, 'x': 1, 'z': 1}
string = 'ikjoosgx'
for letter in string:
I NEED TO DECREASE list1 key of same name as letter VALUE BY 1\. DIPSIT! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:56:04.363

```
for letter in my_string:
    list1[letter] -= 1 
```

作为旁注，永远不要`string`用作变量名，因为它也是标准模块的名称。

如果其中一个字母不在字典中，这将不起作用。在这种情况下，您可以`try/except`在循环中放置一个块。

```
for letter in my_string:
    try:
        list1[letter] -= 1
    except KeyError:
        pass  # your error handling goes here 
```

如果你想要一个默认值，你可以替换`pass`为：

```
list1[letter] = default_value 
```

或者您可以只使用[Ocaso 的解决方案](https://stackoverflow.com/a/14579131/1907098)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:03:25.150

如果我得到你的问题，你想要这个：

```
list1 = {'i': 1, 'k': 1, 'j': 1, 'o': 2, 'q': 1, 's': 1, 'x': 1, 'z': 1}
string = 'ikjoosgx'
for letter in string:
    if letter in list1:
        list1[letter] -= 1

print list1
>>> {'q': 1, 's': 0, 'z': 1, 'i': 0, 'x': 0, 'k': 0, 'j': 0, 'o': 0} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T09:05:09.070

另一个解决方案，这次使用旧的[`setdefault`](http://docs.python.org/2/library/stdtypes.html#mapping-types-dict)：

```
list1 = {'i': 1, 'k': 1, 'j': 1, 'o': 2, 'q': 1, 's': 1, 'x': 1, 'z': 1}
string1 = 'ikjoosgx'
for letter in string1:
    list1[letter] = list1.setdefault(letter, 0) - 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T08:55:47.207

很简单：

```
d[key] -= 1 
```

只需迭代键：

```
for letter in string:
    d[letter] -= 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T08:58:57.997

```
for letter in string:
    list1[letter] = list1[letter] - 1 
```

# mysql - 如何从分区表和未分区表创建合并表

> ID：14578933
> 
> 赞同：1
> 
> 时间：2013-01-29T08:53:59.790
> 
> 标签：mysql, merge, union

我在 mysql 表中有一个分区表和一个未分区表。我想为这两个表创建一个联合合并表。问题是，在创建合并表后，当我尝试访问该表时出现此错误：`Unable to open underlying table which is differently defined or of non-MyISAM type or doesn't exist`

当我在其上运行 check table 命令时，出现以下错误（ptable 是分区表）：

```
Table 'mydb.ptable' is differently defined or of non-MyISAM type or doesn't exist
Unable to open underlying table which is differently defined or of non-MyISAM type or doesn't exist
Corrupt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:41:07.277

*   您确定分区表和非分区表都是 MyISAM 类型吗？他们应该是。（请确保 'ptable' 是 MyIsam 类型）。

    [在这里](http://magicallinux.blogspot.in/2012/07/on-mysql-merge-tables.html)继续阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T10:42:32.660

从 MySQL 文档中，您不能拥有要在 MERGE 存储引擎中使用的带有分区的表

MERGE 表不支持分区。也就是说，您不能对 MERGE 表进行分区，也不能对 MERGE 表的任何底层 MyISAM 表进行分区。

# android - 恢复片段

> ID：14578934
> 
> 赞同：1
> 
> 时间：2013-01-29T08:54:01.267
> 
> 标签：android, android-fragments

我的应用程序有一个活动和 5 个片段。当用户单击选项卡“Fragment1”时，它会从远程位置加载数据并将其上传到 ListView。“Fragment2”也做同样的工作。但是当用户再次点击“Fragment1”时，它再次开始加载，而不是加载

> 如何从上次加载状态恢复片段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:59:39.407

如果您发布一些代码可能会有所帮助。同时，我偷偷地怀疑，不是重复使用同一个实例，而是`FragmentPagerAdapter`每次`getItem()`调用它时都创建一个新实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:05:43.877

在片段的 OnStart() 中执行检查。

```
 if(listView has Content || is not null)
      {
              //get the data from remote 
      }
  else
      {
             //don;t do anything
      } 
```

# javascript - 如何在移动设备上禁用滚动时启用输入文本字段？

> ID：14578936
> 
> 赞同：1
> 
> 时间：2013-01-29T08:54:03.460
> 
> 标签：javascript, html, jquery-mobile, event-handling

在专门用于移动设备的网站上，我阻止用户使用 document.ready 中的以下代码滚动：

*document.body.addEventListener('touchstart', function (e) {e.preventDefault(););*

这很好用，但它有一个副作用，即阻止用户与输入文本字段交互，文本字段不响应。

我尝试向其中一个文本字段添加一个点击事件，但这没有用。

关于如何解决这个问题的任何想法？

谢谢你，摩西 S。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:05:55.113

不要使用 touchstart，它基本上是移动点击，使用 touchmove 代替：

```
function preventBehavior(e)  
{ 
    e.preventDefault(); 
};

document.addEventListener("touchmove", preventBehavior, false); 
```

# applescript - Chromium - 使用苹果脚本打开 URL

> ID：14578939
> 
> 赞同：0
> 
> 时间：2013-01-29T08:54:11.483
> 
> 标签：applescript, chromium

我使用基于 Chromium 项目（在 Mac 中）的 html5 创建游戏。为了在 Chromium 中打开游戏，选择文件菜单并选择打开文件并浏览 html。并且游戏运行良好，
我想编写一些脚本，在 Chromium 浏览器中打开 html，以便我可以将其打包为应用程序并将其作为 DMG 分发。有没有人遇到过 Chromium 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:41:38.863

尝试：

```
set myFile to "/Users/Satyam/Desktop/OriginalMsg.htm"
do shell script "open " & quoted form of myFile & " -a Chromium" 
```

编辑

```
set myFile to "/Users/Satyam/Desktop/OriginalMsg.htm"
do shell script "open " & quoted form of myFile & " -a Chromium"

tell application "Chromium"
    activate
    close (every tab of window 1 whose title = "New Tab")
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:22:20.923

我不知道如何在 Chromium 中专门打开一个 url。但是，通常您会这样做，它会在用户默认的 Web 浏览器中打开。这是打开文件的正常方式，您不针对特定的应用程序，而是让它在用户的偏好中打开。

也许它会帮助你。祝你好运。

```
open location "http://www.url.com" 
```

# c++ - 在 C++ 中存储类似网格的结构的一些最有效的方法是什么？

> ID：14578946
> 
> 赞同：0
> 
> 时间：2013-01-29T08:54:41.707
> 
> 标签：c++, data-structures

假设我有多个 NxN 网格，并且我想根据一些命令来操纵其中的特定位置。我可以在 C++ 中使用哪些最有效的方法？

为了使事情更清楚，请考虑我有以下文件：

世界.txt：

```
2 O O
O O O
X O X
-----
X O X
O O O
1 O O 
```

它代表两个 3x3 网格。还假设，为了清楚起见（但这并不重要），我的任务是实现一种算法，该算法打印从 1 到 2 的位置（使用任何路线）。在 C++ 中存储此类数据并根据某些规则对各个位置进行操作的最有效方法是什么？哪些数据结构擅长处理具有这种形式的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:17:53.137

对于空间效率或访问速度（或几乎其他任何东西），您不会击败 2D 阵列。更复杂的结构可以让您更直观地表示问题，但会牺牲一些空间或速度。

举例来说，考虑将您的网格表示为一个图形，每个节点（顶点）都有一个指向其邻居的指针（边）列表。在此表示中，您可以将问题转换为图问题并以更容易概念化的方式执行操作（例如，Dijkstra 最短路径搜索），因为该表示明确地是图。将其保留为 2D 数组，您会以一些复杂性为代价获得存储效率，因为您必须例如显式编码邻接规则（角上的节点有 2 个邻居，边上的节点有 3 个等）和程序逻辑中的图形遍历规则。

* * *

对于像这样简单的事情，我会坚持使用数组。但这完全是个人喜好。我可以看到，如果您想要更多说明性的东西，那么图形表示会更好。（此外，它可以更好地推广到任意配置。）

# c - 在我的读取函数 myread 中，当我执行 cat /driver/mydriver 时，它会不断打印读取的数据。我只需要打印一次如何做到这一点

> ID：14578949
> 
> 赞同：2
> 
> 时间：2013-01-29T08:54:58.973
> 
> 标签：c, linux, linux-kernel, linux-device-driver

我通过 echo 将 h 写入驱动程序： echo -nh /dev/mydriver

当我执行 cat /dev/mydriver 时，myread 函数正在连续打印 h。我想打印一次。怎么做。

```
static char m;

static ssize_t myread(struct file *f, char __user *buf, size_t len, loff_t *off)
{
    printk(KERN_INFO "Read()\n");
    if (copy_to_user(buf, &m, 1) != 0)
        return -EFAULT;
    else
        return 1;
}

static ssize_t my_write(struct file *f, const char __user *buf, size_t len, loff_t *off)
{
    printk(KERN_INFO "Write()\n");
    if (copy_from_user(&c, buf + len – 1, 1) != 0)
        return -EFAULT;
    else
        return len;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T12:46:29.317

如果您想在自定义驱动程序中使用标准工具（例如*cat*），请不要忘记正确设置偏移量 (*loff_t *off* )。您的*读取*函数应如下所示：

```
static ssize_t myread(struct file *f, char __user *buf, size_t len, loff_t *off)
{
    printk(KERN_INFO "Read()\n");

    /* You have just a single char in your buffer, so only 0 offset is valid */
    if(*off > 0)
        return 0; /* End of file */

    if (copy_to_user(buf, &m, 1))
        return -EFAULT;

    *off++;
    return 1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:05:40.093

你必须考虑你希望你的设备如何工作......你写给它的内容会被多个进程使用吗？或者你写的东西一旦被阅读就应该被删除？

`m`后者当然更简单，通过清除函数中的变量即可简单实现`myread`。如果为零，则从`myread`函数中返回零。

# wordpress - 自定义帖子 wordpress 上的分页

> ID：14578950
> 
> 赞同：0
> 
> 时间：2013-01-29T08:55:02.170
> 
> 标签：wordpress, pagination, wordpress-theming, custom-post-type

```
<?php query_posts('showposts=5&post_type=html5-blank'); ?>
<?php if (have_posts()): while (have_posts()) : the_post(); ?>
    <article id="post-<?php the_ID(); ?>" class="clearfix" <?php post_class(); ?>>
           //Loop Here
    <!-- /Article -->

<?php endwhile; ?>
<nav>
    <?php previous_posts_link('&laquo; Newer') ?>
    <?php next_posts_link('Older &raquo;') ?>
</nav>

<?php 
  $wp_query = null; 
  $wp_query = $temp;  // Reset
?> 
```

我的`Page doesn't exist`分页链接出现错误。结果链接是：`www.mywebsite.com/blog/page/2/` 这是一个博客页面。我已经编辑了循环代码。

帮助.........

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T05:23:00.337

我在列出帖子的主页（index.php）中遇到了类似的问题。我一直找不到页面。[https://codex.wordpress.org/Pagination](https://codex.wordpress.org/Pagination)中的指令让 www.domain.com/page/2/ 为我工作。

首先从模板文件（index.php、category.php）中删除 query_posts 部分

```
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$args = array('posts_per_page' => 3, 'paged' => $paged );
query_posts($args); 
```

然后在您的functions.php中添加以下内容

```
function my_post_queries( $query ) {
    // do not alter the query on wp-admin pages and only alter it if it's the main query
    if (!is_admin() && $query->is_main_query()){
        // alter the query for the home and category pages
        if(is_home()){
            $query->set('posts_per_page', 3);
        }
        if(is_category()){
            $query->set('posts_per_page', 3);
        }
    }
]
add_action( 'pre_get_posts', 'my_post_queries' ); 
```

注意：HTML5 空白主题和下划线主题都给了我 404 分页错误。上述解决方案使分页适用于两个主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:28:31.127

我宁愿使用`WP_Query`和使用`paged`分页参数。在此处阅读有关此内容的更多信息：[WP_Query#Pagination_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Pagination_Parameters)

```
<?php
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$loop = new WP_Query(
    array(
        'post_type' => 'html5-blank',
        'posts_per_page' => 5,
        'paged'=>$paged
    )
);
?>
<?php if ($loop->have_posts()): while ($loop->have_posts()) : $loop->the_post(); ?>
    <article id="post-<?php the_ID(); ?>" class="clearfix" <?php post_class(); ?>>
           //Loop Here
    <!-- /Article -->

<?php endwhile; endif; ?>
<nav>
    <?php previous_posts_link('&laquo; Newer') ?>
    <?php next_posts_link('Older &raquo;') ?>
</nav> 
```

请告诉我 ：）

**第二个例子：**

```
global $post;
global $paged, $wp_query;
$args = array( 'posts_per_page' => 5, 'post_type' => 'html5-blank', 'paged' => $paged );
$myposts = get_posts( $args );
foreach( $myposts as $post ) :
    setup_postdata($post);
    // loop
    the_title(); // or what it is needed inside the loop
endforeach;
if (  $wp_query->max_num_pages > 1 ) :
    previous_posts_link('&laquo; Newer');
    next_posts_link('Older &raquo;');
endif; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-25T17:07:38.687

```
<?php
global $wp_query;
$paged = ( get_query_var('paged') ) ? get_query_var('paged') : 1;
$args = array(  
            'post_type' => 'html5-blank', //Post type
            'posts_per_page' => 5, //How many post u want to display per page
            'paged' => $paged                      
            );
$the_query = new WP_Query( $args );
if ( $the_query->have_posts() ) {
    while ( $the_query->have_posts() ) {
    $the_query->the_post();

    $url = wp_get_attachment_url( get_post_thumbnail_id($post->ID) );
?>
    <img src="<?=$url?>" width="350" height="350" class="thumbnail imageRight"/>
    <h1><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h1>
    <p><?php the_excerpt(); ?></p>

<?php } } ?>
<div class="pagination">
<?php             
    global $wp_query;

    $big = 999999999; // need an unlikely integer

    echo paginate_links( array(
        'base' => str_replace( $big, '%#%', esc_url( get_pagenum_link( $big ) ) ),
        'format' => '?paged=%#%',
        'current' => max( 1, get_query_var('paged') ),
        'total' => $wp_query->max_num_pages
    ) );
?>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-11T16:47:33.350

```
$paged = get_query_var( 'paged' ) ? get_query_var( 'paged' ) : 1; // setup pagination

$the_query = new WP_Query( array( 
    'post_type' => 'YOUR_POST_TYPE_NAME',
    'paged' => $paged,
    'posts_per_page' => 5) 
);

while ( $the_query->have_posts() ) : $the_query->the_post();
    // YOUR CODE
endwhile;

echo '<nav>';
echo  '<div>'.get_next_posts_link('Older', $the_query->max_num_pages).'</div>'; //Older Link using max_num_pages
echo  '<div>'.get_previous_posts_link('Newer', $the_query->max_num_pages).'</div>'; //Newer Link using max_num_pages
echo "</nav>";

wp_reset_postdata(); // Rest Data 
```

你能试试上面的代码吗？

# entity-framework - 在 Entity Framework + UoW + Generic Repositories 中限制对数据库资源的访问

> ID：14578954
> 
> 赞同：2
> 
> 时间：2013-01-29T08:55:08.037
> 
> 标签：entity-framework, unit-of-work, repository

我将 ASP.NET MVC3 与 Entity Framework 4 一起使用。

我正在使用工作单元 + 通用存储库模式。

我到处搜索类似的问题，我看到很多人都有我的问题，但仍然找不到一个好的实用的解决方案。

我们有一个多租户数据库。

想象一个具有类似结构的数据库：

*   顾客
*   与客户关联的组
*   用户，关联到一个或多个组

然后，对于我们拥有的每个客户

*   资源，关联到一个或多个组，并通过外键、多对多关系等相互链接

因此，当用户登录时，他与一个或多个组相关联，并且他需要有权访问与该组相关联的父资源和子资源。

现在的问题是：

我根据登录用户的 id 在存储库中的工作单元中实现了一种带有 .Where() 子句的预过滤。

这是有效的。

我对存储库所做的预过滤工作正常，但当然只有当您直接访问 TYPE A 或 TYPE B 或 TYPE C 等源的存储库时才有效。

但是一个资源通过多对多表和外键链接到其他资源。

因此，有时资源属于用户有权访问的组，但有时链接到该资源的资源属于用户无权访问的组。

如果我遍历“父”资源的导航属性，用户可以访问所有链接的资源，甚至是属于其他组的资源。

因此，如果您从 TYPE A 资源开始，并遍历导航属性以到达 TYPE B 和 TYPE C 资源，则它们不会被过滤。

如果您访问 TYPE B 和 TYPE C 存储库，它们将被过滤。

现在，正如我之前所说，我的过滤器位于工作单元类中，但我试图将它们移动到自定义 DBContext 中，将过滤器直接应用到 DBSet 中，但没有任何变化：

似乎 EF 正在直接访问数据库以构建导航属性，因此不使用其他存储库或其他 DBSet，从而避免了预过滤器。

我们能做什么？

我看到 NHibernate 具有可以完成我的任务的全局过滤器，因此我正在评估从 EF 到 NH 的迁移。

我看到许多其他人要求使用 .Include() 过滤器，从而禁用延迟加载。

谢谢你。

如果需要，我可以提供一些代码，但我希望我能正确解释我的问题。

谢谢你

此致，

马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:50:22.403

我看到了一个映射到视图和存储过程的解决方案，但我不确定它在开发和维护中有多难。简而言之，可以将 EF 模型映射到视图，在视图中过滤数据；在此解决方案中，每个用户都有自己的数据库凭据。

# css - 换行分隔div内的单词

> ID：14578955
> 
> 赞同：0
> 
> 时间：2013-01-29T08:55:11.237
> 
> 标签：css, html, newline

基本上，我的 div 中有两个 a 标签，它们是可变的。但如果它们不止一个词，或者只是带有更多字母的词，我不希望它们在需要换行时分开。我有这个演示，我在其中写下了一些可能的结果。第一个 div 是我想阻止的现在发生的事情。[http://jsfiddle.net/tVC43/1/](http://jsfiddle.net/tVC43/1/)

```
 <div class="box">
   welcome to <a>xxx</a> part.
  <a>hi thomas</a>
  </div>
  <div class="box" style="left:170px;">
   welcome to <a>xxx</a> part.
  <a style="display:block;">hi thomas</a>
  </div>
  <div class="box" style="left:340px;">
   welcome to <a>xxxxxxx</a> part.
  <a>hi thomas</a>
  </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:02:58.387

使用不间断空格而不是普通空格，例如`<a>hi&nbsp;thomas</a>`，或在元素上使用 CSS 设置`white-space: nowrap`，或将内容包裹在`<nobr>...</nobr>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:22:05.060

添加`display:block`

```
a:last-child, span:last-child{display:block} 
```

**[演示](http://jsfiddle.net/tVC43/7/)**

# c# - 相当于通过变量名来引用控制？

> ID：14578957
> 
> 赞同：2
> 
> 时间：2013-01-29T08:55:15.897
> 
> 标签：c#, vb.net, winforms, controls

在 VB 中，我可以遍历控件，或者通过将变量连接到字符串来引用控件。就像是：

```
Dim I as integer
I = 1
Me["Textbox" & I].Text = "Some text" 
```

最后一条语句的 C# 等价物是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T08:57:58.563

您可以通过控件的名称访问该控件：

```
Me.Controls("TextBox" & I).Text = "Some text" 
```

在 C# 中也是如此：

```
this.Controls["TextBox" + I].Text = "Some text"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T09:02:40.717

接近 SysDragan 的解决方案，但我只需要用这个替换。是的，您需要指定 Controls 集合。

```
this.Controls["TextBox" & I].Text = "Some text"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T09:03:17.210

```
int i = 1;
this.Controls["TextBox" & i].Text = "Some text"; 
```

上面的代码假设它在一个控件/表单中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T08:59:20.103

```
 int I = 1;
 this["Textbox" + I].Text = "some text"; 
```

或者

```
 int I = 1;
 this.Page["Textbox" + I].Text = "some text"; 
```

或者

```
 int I = 1;
 this.Controls["Textbox" + I].Text = "some text"; 
```

# javascript - 如何在循环中生成新名称？

> ID：14578959
> 
> 赞同：0
> 
> 时间：2013-01-29T08:55:28.490
> 
> 标签：javascript, jquery

这是我的代码：

```
 for($i=0;$i<10;$i++)
 {
    $elem=data;
 } 
```

这里需要改为`$elem`get`$elem1, $elem2, $elem3`取决于`$i`.

例子：

如果`$i = 1`行**`$elem=data`**应该是**`$elem1=data`**

如果`$i = 2`行**`$elem=data`**应该是**`$elem1=data`**

```
$('#div1').html($elem1);
$('#div2').html($elem2);
$('#div3').html($elem3); 
```

请告诉我这是怎么做的？

**PS** .: 如果你不明白你可以问问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:41:02.910

根据您的示例片段，此代码非常适合您的目的。

```
var data = [1,2,3,4,5];

for(var i=0;i < data.length; i++)
{
    var elem = data[i];
    // other data manipulations
    $('#div'+(i+1)).html(elem);
} 
```

[http://jsfiddle.net/LmvAb/](http://jsfiddle.net/LmvAb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:07:24.210

因为它是 JavaScript，所以你可以做你想做的事。除非绝对需要，否则请不要在数组上使用它。您需要使用该`eval()`功能。

```
$data = "worked";
for(var $i=0;$i<10;$i++){
   eval('$elem' + $i + '= $data');
}
alert(eval('$elem1'));
alert(eval('$elem2'));
alert(eval('$elem5')); 
```

JSFiddle：http: [//jsfiddle.net/begWG/1/](http://jsfiddle.net/begWG/1/)

# jquery - 需要用 jquery $.post() 传递变量

> ID：14578963
> 
> 赞同：-1
> 
> 时间：2013-01-29T08:55:48.177
> 
> 标签：jquery

我想用 jQuery 传递变量`$.post()`。

我的代码

```
$('#unit_id').change(function() {
        var unit_id = 'sdf';
        var user_id = 'werwe';
        $.post("test.php", { 'user_id': +user_id, 'unit_id': +unit_id, },
          function(data){
            console.log(data.user_id);
            console.log(data.unit_id);
          }, "json");
    }); 
```

但是这个帖子结果像：

```
unit_id NaN
user_id NaN 
```

这是为什么`NaN`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T08:58:06.750

你为什么要`+`附加`variable`？

[$.post() 文档](http://api.jquery.com/jQuery.post/)说参数`data`接受，`A plain object or string that is sent to the server with the request.`因此需要附加`+`.`variable`

改变这个从。

```
$.post("test.php", { 'user_id': +user_id, 'unit_id': +unit_id, }, 
```

至

```
$.post("test.php", { 'user_id': user_id, 'unit_id': unit_id, }, 
```

# css - 使用屏幕属性的网页的最小宽度和最大宽度

> ID：14578964
> 
> 赞同：0
> 
> 时间：2013-01-29T08:55:48.800
> 
> 标签：css

我在这里有一个情况，我需要设计一个网站，但我被困在以某种特定分辨率工作我的网页的问题上。

我在我的网页内容中使用了 %age 方法，并且需要找到一个最小宽度/最大宽度，如果它是要查看的特定监视器，我可以在其上限制整个网页或正文。

我们的最终用户使用以下规格：HP L1955 纵横比：4:3 分辨率：1280*1024

是否有任何使用上述数据的计算来知道最合适的？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:58:16.730

如果要根据特定的屏幕分辨率更改网页的样式，可以使用`@media`查询。检查这个stackoverflow问题：[@media screen and (max-width: 1024px)在CSS中是什么意思？](https://stackoverflow.com/questions/4189868/what-does-media-screen-and-max-width-1024px-mean-in-css)

例如，如果您想为 1024 或更小的屏幕指定一些 CSS 代码，您可以在 CSS 文件中执行此操作：

`@media screen and (max-width: 1024px) { /* code here */ }`

# c++ - 对代码的编译方式极其迂腐

> ID：14578969
> 
> 赞同：7
> 
> 时间：2013-01-29T08:56:03.170
> 
> 标签：c++, g++, error-checking

我想找出 g++ (4.7) 中最极端的错误检查标志组合。我们没有使用新的 C++11 规范，因为我们需要使用旧编译器交叉编译代码，而这些旧编译器（主要是 g++ 4.0）经常会导致 g++4.7 忽略的问题。

现在我们使用以下一组标志：

```
-Wall -Wcomment -Wformat -Winit-self -ansi -pedantic-errors \
-Wno-long-long -Wmissing-include-dirs -Werror -Wextra 
```

但是这种组合不能识别诸如将 double 传递给需要 int 的函数的问题，或者有符号和无符号 int 之间的比较，这会导致旧编译器阻塞它。

我已经阅读了文档并且`-Wsign-compare`应该启用，`-Wextra`但实际上似乎并非如此，所以我可能错过了一些东西......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T09:20:47.080

是没有 GNU 扩展的默认标准的`-ansi`别名。我建议改为显式使用`-std=c++98`，但它应该是默认的`g++ -ansi`，所以并没有真正的不同。

但一般来说，我从未见过任何会被新 gcc 接受并被旧 gcc 以无效为由拒绝的东西。我怀疑任何此类问题都是旧编译器或其标准库中的错误。Gcc 对正确的事情没有警告，但不适用于旧版本，因此除了使用旧版本进行测试之外，您别无选择。

至于你提到的具体问题：

*   将 double 传递给期望 int 的函数不是错误。虽然它可能是未定义的行为。`-Wconversion`应该有帮助。
*   将有符号与无符号进行比较也定义明确，也始终按定义工作，并且在相等比较的情况下实际上会使程序员编写*更糟糕*的代码（将大于 int 的无符号变量与 -1 进行比较，而不是将其与 -1u 进行比较）。所以我实际上总是用`-Wno-sign-compare`.

`-isystem`编译器不应该为在给定目录中找到的头文件而不是打印警告`-I`，因此应该让您对 Qt 头文件的警告静音并为您自己的代码启用它。所以你应该可以使用`-Wconversion`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:16:27.433

除了编译器之外，还可以使用[lint](http://www.unix.com/man-page/FreeBSD/1/lint)或[其他一些静态分析工具来检查代码。](http://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis#C.2FC.2B.2B)在我的 Linux 发行版上，`apt-get install splint`会得到[slint](http://www.splint.org/)，也许检查一下它是否已经为你的操作系统打包以便于安装。

# php - Sever 不能 git pull 但我可以

> ID：14578973
> 
> 赞同：0
> 
> 时间：2013-01-29T08:56:15.977
> 
> 标签：php, git, apache, github

我正在尝试使用接收后挂钩来更新远程服务器。我正在使用 ssh 并且一切正常（运行`git pull`确实拉动）。我已经开始使用[这个 deploy.php](https://gist.github.com/1809044#file_deploy.php)和其他命令，比如`git status`，按预期运行和输出，但是 pull 似乎根本没有做任何事情。

我已经`chown`把所有东西都搞定了（git repo、known_hosts 等），所以我的 www-data 用户应该能够访问服务器上的任何东西。有什么方法可以让我至少找到一些错误日志记录出了什么问题？

**编辑**：按照加法器的建议更改`git pull`为后，我看不到输出有任何变化。`git pull --verbose`输出仍然是：

```
$ whoami
www-data
$ git pull --verbose

$ git status
# On branch master
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   deploy.php
nothing added to commit but untracked files present (use "git add" to track) 
```

**解决方案：**需要将apache用户设置为ssh到github。当我的接收后挂钩目标无法进行相同的更新时，我以 root 身份连接然后感到困惑。我以 root 身份执行此操作，脚本以 www-data 身份运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:49:08.207

git 帮助拉

```
--verbose 
Pass --verbose to git-fetch and git-merge. 
```

# vba - 从包含宏的当前工作簿访问另一个工作簿

> ID：14578976
> 
> 赞同：0
> 
> 时间：2013-01-29T08:56:21.190
> 
> 标签：vba, excel

我有一个以宏的形式为一个 Excel 工作表编写的代码，在这个宏中，我将当前工作簿的副本生成到不同的位置。现在，我需要访问这个复制的 excel 工作簿以从宏中删除它的一些工作表。谁能告诉我如何从当前的 Excel 工作表宏访问新复制的工作表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:58:35.613

以下代码将允许您编辑工作簿的副本：

```
子测试（）
    将 wb 调暗为工作簿
    将 strName 变暗为字符串

    strName = "" & ActiveWorkbook.Name
    ActiveWorkbook.SaveCopyAs 文件名:=strName
    设置 wb = Workbooks.Open(strName)

    Application.DisplayAlerts = False '防止在删除工作表时询问用户
    wb.Worksheets("Sheet1").Delete
    Application.DisplayAlerts = True

    wb.Close SaveChanges:=True
结束子

```

# db2 - 有没有将 PDF 文件导入 DB2 blob 字段的示例方法？

> ID：14578981
> 
> 赞同：2
> 
> 时间：2013-01-29T08:56:26.630
> 
> 标签：db2

我有一个包含 Blob 字段的表，用于存储 PDF 或图像（jpeg、gif、...）文件。有一个 Java EE 应用程序可以执行此操作，并且运行良好。

但是，有时我需要通过命令插入或更新 Blob 字段。

有什么简单的方法可以在不编码的情况下做到这一点吗？我正在寻找一个纯粹的命令或某种工具。

DB2 在 AIX 和 Windows 上是 v9。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:31:35.967

不幸的是，我现在手头没有 DB2，但我想我可以为您指明正确的方向：

```
#!/bin/sh

FILENAME="$1"
HEX=`xxd -p $FILENAME | tr -d '\n'`

echo insert into $2 \($3\) values \(cast\(X\'$HEX\' as blob\( $4 \)  \) \); 
```

这个想法是使用[xxd](http://linux.die.net/man/1/xxd)创建文件的正确十六进制字符串。（AIX 安装了 xxd，除非它被破坏。）然后可以在 SQL 查询中将十六进制字符串与 db2 命令行处理器（“db2”）一起使用。您所要做的就是[将十六进制字符串转换为 blob](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0008478.html)。

我给你的脚本将打印出正确的 SQL 查询以供测试。修复它以匹配您的 DDL 和其他要求。然后将 echo 命令更改为 db2 命令，您应该有一个工作实用程序：

```
./myscript myfile mytable myblob myblobsize 
```

# solr - Solr：在部分匹配期间使用全字提升文档

> ID：14578982
> 
> 赞同：2
> 
> 时间：2013-01-29T08:56:27.810
> 
> 标签：solr, solr-boost

我有一个支持完全匹配和部分匹配的 SOLR 查询。查询词添加了适当的提升因子，其中精确匹配与部分匹配相比具有更高的提升。

然而，在部分匹配中，我们也希望以这样的方式定义增强因子：

具有完整单词的部分匹配比作为单词的一部分出现的部分匹配具有更高的优先级。

例如：如果用户搜索字符串“Annie Hall”，则与“ **Halloween** ”等值相比，包含“ **Tanner Hall** ”、“ **Hall Pass** ”等值的文档应该具有更高的权重（优先级） , " "**拯救万圣节的狗**"。它们都是部分匹配，但 "Hall" 在 "Tanner Hall" 和 "Hall Pass" 中作为单独的词出现，因此它们应该有更多的分数。

 ****请帮忙。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T05:48:18.607

我假设您正在使用 ngram 过滤器进行查询，因为它能够匹配全部和部分匹配。

如果是这样，您总是可以有两个字段。

*   具有更高提升的非 Ngramed 字段 - 文本
*   具有正常提升的 Ngramed 字段 - text_ngram

例如对于 dismax -`text^2 text_ngram`将导致完美匹配比部分匹配具有更高的提升。
请记住，如果有完全匹配，也会有部分匹配，因此它是累积提升。****

# javascript - Javascript负浮点数计算

> ID：14578984
> 
> 赞同：2
> 
> 时间：2013-01-29T08:56:33.000
> 
> 标签：javascript, math

> **可能的重复：**
> [JavaScript 的浮点数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-floating-point-math-broken)

在 Javascript 中，如何计算`23668-23671.88`to`-3.88`而不是的结果`-3.8800000000010186`？

我不想要任何舍入，因为如果我使用 windows calc，结果是 -3.88。

可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T09:08:02.073

如果您不想四舍五入，那么您需要某种方法来确定表达式中变量的精度并将该精度应用于表达式的结果。不幸的是，JavaScript 没有办法确定浮点数的精度。

但是，您可以通过一种简单的“hacky”方式来完成此操作：

[http://jsfiddle.net/SjxCY/2/](http://jsfiddle.net/SjxCY/2/)

```
var num = 2.383;
var precision = (num+'').split('.')[1].length;
var final = (234234-num).toFixed(precision);
alert(final); 
```

它不漂亮，但它有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T09:02:53.280

如果您不想要四舍五入，则不能使用浮点数，而必须找到[十进制算术库。](https://stackoverflow.com/questions/744099/)恐怕没有内置的东西。

# android - 在 linux/c 中快速打开数千个文件

> ID：14578987
> 
> 赞同：5
> 
> 时间：2013-01-29T08:56:42.057
> 
> 标签：android, c, file-io

我正在做 SDCARD 扫描仪，它扫描每个文件夹和图像文件。

我正在使用 C 代码并使用 opendir、readdir、fopen API 来枚举目录和打开的文件。我有不同的 DIR 变量。

问题是 fopen() 花费了太多时间（10000 个文件需要 300 秒），而导向器遍历需要大约 25 秒。

是否有任何 API 可以让我使用句柄、dir_ino 或类似工具加快文件打开操作，以便我可以使用目录句柄或类似工具打开文件。

到目前为止，我已经尝试过使用 dirent->dir_ino, DIR* 但没有运气。

我正在寻找比 fopen 花费更少时间的低级 api。

编辑 fts 和 ftw api 有用吗？它们似乎仅与遍历目录有关...任何其他黑客或方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:01:18.877

唯一的“低级”功能是[`open`](http://linux.die.net/man/2/open)

```
int fd = open(dirent->d_name, O_RDONLY); 
```

不过，`fopen`应该不会慢很多。

# c# - 将对象保存到设备

> ID：14578989
> 
> 赞同：0
> 
> 时间：2013-01-29T08:56:44.773
> 
> 标签：c#, .net, windows-phone-7

我已经开始为 Windows Phone 开发一个应用程序。我想制作一个具有自定义对象数组的 Singleton 对象。我也想有一些自定义功能，如`Add`，等`CheckIfExists``Delete`

我需要在应用程序关闭时保存此数组，并在应用程序启动时将数组加载到 Singleton。

谁能帮我做我应该做的事情？我应该从哪里开始？

在 iOS 平台上`NSUserDefault`，我用我想要的键保存对象，然后从键中加载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:55:25.627

独立存储只是可用选项之一。

iOS 中 NSUserDefault 的直接功能模拟是`IsolatedStorageSettings`类。这是一些通过键保存/加载值的辅助方法的片段：

```
static T getValue<T>( string _propName )
{
    return getValue( _propName, default( T ) );
}

static T getValue<T>( string _propName, T _defaultValue )
{
    var iss = IsolatedStorageSettings.ApplicationSettings;
    T res;
    if( iss.TryGetValue( _propName, out res ) )
        return res;
    return _defaultValue;
}

static void setValue( string _propName, object val )
{
    IsolatedStorageSettings.ApplicationSettings[ _propName ] = val;
    IsolatedStorageSettings.ApplicationSettings.Save();
} 
```

或者，您可以使用成熟的 ORM + RDBMS。在 iOS 中，您将 Core Data 与底层 SQLite 一起使用，在 WP7 中，同样被称为具有底层 SQLCE 的实体框架。

所有 3 种解决方案都有其优点和缺点。根据您的数据大小（例如，您不应该在 IsolatedStorageSettings 中保留兆字节的数据）和数据访问模式（例如，如果您需要查询，或者您只插入小项目同时保持 DB 基本完好无损，请谨慎选择，SQL 引擎可以加速增加了几个数量级）。