# StackOverflow 问答 15014000-15014999

# spring - JPA Hibernate 通信链接失败错误

> ID：15014000
> 
> 赞同：2
> 
> 时间：2013-02-21T23:09:54.870
> 
> 标签：spring, hibernate, jpa, spring-mvc, heroku

我在使用 JPA 和 Hibernate 时遇到了真正的问题，它有时会出现通信链接故障，不知道为什么它经常发生不知道为什么它是一个环境问题配置问题无法真正让我明白我会喜欢其他人的输入这个问题，希望能指出我正确的方向

这是堆栈跟踪

```
 21:41:34,726 DEBUG SqlExceptionHelper:139 - Communications link failure
 2013-02-21T21:41:34+00:00 app[web.1]: 
 2013-02-21T21:41:34+00:00 app[web.1]: The last packet successfully received from the  server was 79,581 milliseconds ago.  The last packet sent successfully to the server was 0 milliseconds ago. [n/a]
 2013-02-21T21:41:34+00:00 app[web.1]: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure
  2013-02-21T21:41:34+00:00 app[web.1]: 
 2013-02-21T21:41:34+00:00 app[web.1]: The last packet successfully received from the server was 79,581 milliseconds ago.  The last packet sent successfully to the server was 0 milliseconds ago.
 2013-02-21T21:41:34+00:00 app[web.1]:  at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 
```

POM.xml

```
<properties>
  <org.springframework.version>3.1.1.RELEASE</org.springframework.version>
  <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
  <dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>javax.servlet-api</artifactId>
    <version>3.0.1</version>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-webmvc</artifactId>
    <version>${org.springframework.version}</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-orm</artifactId>
    <version>${org.springframework.version}</version>
</dependency>
<dependency>
    <groupId>taglibs</groupId>
    <artifactId>standard</artifactId>
    <version>1.1.2</version>
</dependency>
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
</dependency>
<dependency>
    <groupId>org.hsqldb</groupId>
    <artifactId>hsqldb</artifactId>
    <version>2.2.8</version>
</dependency>
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.20</version>
</dependency>
<dependency>
    <groupId>commons-dbcp</groupId>
    <artifactId>commons-dbcp</artifactId>
    <version>1.4</version>
</dependency>
<dependency>
    <groupId>com.github.jsimone</groupId>
    <artifactId>webapp-runner</artifactId>
    <version>7.0.27.1</version>
    <scope>provided</scope>
</dependency>

<!-- Tiles dependency -->
<dependency>
    <groupId>org.apache.tiles</groupId>
    <artifactId>tiles-core</artifactId>
    <version>2.2.1</version>
</dependency>

<dependency>
    <groupId>org.apache.tiles</groupId>
    <artifactId>tiles-jsp</artifactId>
    <version>2.2.1</version>
</dependency>
<dependency>
    <groupId>org.apache.tiles</groupId>
    <artifactId>tiles-api</artifactId>
    <version>2.2.1</version>
</dependency>
<dependency>
    <groupId>org.apache.tiles</groupId>
    <artifactId>tiles-servlet</artifactId>
    <version>2.2.1</version>
</dependency>
<dependency>
    <groupId>org.apache.tiles</groupId>
    <artifactId>tiles-template</artifactId>
    <version>2.2.1</version>
</dependency>

<!-- Security -->
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-core</artifactId>
    <version>3.1.3.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-web</artifactId>
    <version>3.1.3.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-config</artifactId>
    <version>3.1.3.RELEASE</version>
</dependency>

<dependency>
    <groupId>javax.validation</groupId>
    <artifactId>validation-api</artifactId>
    <version>1.0.0.GA</version>
</dependency>
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-entitymanager</artifactId>
    <version>4.1.4.Final</version>
</dependency>
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-validator</artifactId>
    <version>4.3.1.Final</version>
</dependency>
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-c3p0</artifactId>
    <version>4.1.4.Final</version>
</dependency>
<dependency>
    <groupId>joda-time</groupId>
    <artifactId>joda-time</artifactId>
    <version>2.1</version>
</dependency>

<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-mapper-asl</artifactId>
    <version>1.9.11</version>
</dependency>
<!-- Junit API -->
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.8.1</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>org.mockito</groupId>
    <artifactId>mockito-all</artifactId>
    <version>1.9.5</version>
</dependency>

<!-- JavaMail API -->
<dependency>
    <groupId>javamail</groupId>
    <artifactId>javamail</artifactId>
    <version>1.3.3</version>
</dependency>
<!-- Java Activation -->
<dependency>
    <groupId>javax.activation</groupId>
    <artifactId>activation</artifactId>
    <version>1.1.1</version>
</dependency>
<!-- JavaMail extension -->
<dependency>
    <groupId>javax.mail</groupId>
    <artifactId>mail</artifactId>
    <version>1.4.6-rc1</version>
</dependency>
<!-- LOG4J -->
<dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.17</version>
</dependency>
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-log4j12</artifactId>
    <version>1.5.6</version>
</dependency>

<!-- The newrelic-agent.jar dependency. -->
<dependency>
    <groupId>com.newrelic.agent.java</groupId>
    <artifactId>newrelic-agent</artifactId>
    <version>2.12.0</version>
    <scope>provided</scope>
</dependency>
<!-- The newrelic-api.jar dependency. -->
<dependency>
    <groupId>com.newrelic.agent.java</groupId>
    <artifactId>newrelic-api</artifactId>
    <version>2.12.0</version>
    <scope>compile</scope>
</dependency>
<!-- The newrelic-java.zip dependency. -->
<dependency>
    <groupId>com.newrelic.agent.java</groupId>
    <artifactId>newrelic-java</artifactId>
    <version>2.12.0</version>
    <scope>provided</scope>
    <type>zip</type>
</dependency>
<dependency>
    <groupId>aspectj</groupId>
    <artifactId>aspectjweaver</artifactId>
    <version>1.5.4</version>
</dependency>
</dependencies>

<build>
<plugins>
    <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
            <source>1.6</source>
            <target>1.6</target>
        </configuration>
    </plugin>
    <plugin>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.2</version>
    </plugin>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <version>2.6</version>
        <executions>
            <execution>
                <id>unpack-zip</id>
                <phase>package</phase>
                <goals>
                    <goal>unpack-dependencies</goal>
                </goals>
                <configuration>
                    <artifactItems>
                        <artifactItem>
                            <groupId>com.newrelic.agent.java</groupId>
                            <artifactId>newrelic-java</artifactId>
                            <version>theVersion</version>
                            <type>zip</type>
                            <overWrite>true</overWrite>
                            <outputDirectory>target</outputDirectory>
                            <destFileName>newrelic</destFileName>
                        </artifactItem>
                    </artifactItems>
                    <outputDirectory>/newrelic</outputDirectory>
                </configuration>
            </execution>
            <execution>
                <phase>package</phase>
                <goals>
                    <goal>copy</goal>
                </goals>
                <configuration>
                    <artifactItems>
                        <artifactItem>
                            <groupId>com.github.jsimone</groupId>
                            <artifactId>webapp-runner</artifactId>
                            <version>7.0.27.1</version>
                            <destFileName>webapp-runner.jar</destFileName>
                        </artifactItem>
                    </artifactItems>
                </configuration>
            </execution>
        </executions>
    </plugin>
</plugins> 
```

持久性.xml

```
 <persistence-unit name="dataSource">
   <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property key="hibernate.connection.provider_class">org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider</property>
            <property key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
            <property key="hibernate.show_sql">true</property>
            <property key="hibernate.hbm2ddl.auto">verify</property>
            <property key="hibernate.current_session_context_class">thread</property>
            <property key="hibernate.c3p0.acquire_increment">1</property>
            <property key="hibernate.c3p0.min_size">5</property>
            <property key="hibernate.c3p0.max_size">20</property>
            <property key="hibernate.c3p0.timeout">5000</property>
            <property key="hibernate.c3p0.max_statements">100</property>
            <property key="hibernate.c3p0.idle_test_period">3000</property>
            <property key="hibernate.c3p0.testConnectionOnCheckout">true</property>
            <property key="hibernate.c3p0.acquireRetryAttempts">1</property>
    </properties> 
```

应用程序上下文.xml

```
 <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url"
        value="#{ 'jdbc:mysql://' + @dbUrl.getHost() + @dbUrl.getPath() }" />
    <property name="username" value="#{ @dbUrl.getUserInfo().split(':')[0] }" />
    <property name="password" value="#{ @dbUrl.getUserInfo().split(':')[1] }" />
</bean>

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
    </property>
</bean> 
```

# android - 允许 Dropbox API 访问我在用户设备上的帐户

> ID：15014001
> 
> 赞同：9
> 
> 时间：2013-02-21T23:10:06.907
> 
> 标签：android, dropbox, dropbox-api

作为一名移动开发人员，我正在寻找一种解决方案，该解决方案允许我的应用程序用户下载多个 .zip 文件，从而为我的应用程序添加“模块化”感觉。我在另一个应用程序中使用了 Dropbox API 来允许用户将项目备份到*他们的*帐户，但现在我需要用户访问*我的*帐户。

有没有办法自动验证 Dropbox 会话到**我的**帐户，或者只是连接到我的公共文件夹而用户甚至没有注意到？

### 后续问题

将我的访问密钥和应用程序密钥/秘密硬编码到应用程序中会带来哪些安全隐患？我知道从 .apk 获取源代码相当简单，但是有人可以用这些信息做什么呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T17:36:47.563

这不是 API 的预期用途，但您可以手动为您的应用程序授权一次访问令牌，然后以编程方式在您的应用程序的所有实例中嵌入和重用该访问令牌。（不过，您需要注意不要意外撤销该访问令牌。）不过，此方法可能存在安全性和速率限制问题，具体取决于具体情况。

或者，使用链接的其他方法可能会更容易。只需[制作所需的链接（](https://www.dropbox.com/help/167/en)并在必要时[转换为直接链接），然后](https://www.dropbox.com/help/201/en)[从中下载](https://stackoverflow.com/questions/1714761/downaload-a-file-programatically-on-android)。（此外，Dropbox 当然不是 CDN，因此请注意[带宽限制](https://www.dropbox.com/help/45/en)。）

**后续答复**

如果您将应用令牌和访问令牌嵌入到应用中，攻击者可能会提取这些令牌，然后可以（通过 API）对您的 Dropbox 的尽可能多的应用访问权限（任一应用文件夹）进行读/写/删除访问或完整的 Dropbox，具体取决于您的 API 应用程序），而不管您的应用程序本身通常会尝试强制执行的任何限制。出于这个原因，您不希望使用此方法来存储任何私人信息，例如任何私人用户特定文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-27T13:40:58.497

一段时间过去了，但现在 Dropbox 将让您生成公共访问令牌并在您的代码中使用它

所以是的，有一种方法可以允许永久访问 Dropbox API。我们需要从应用程序设置（保管箱控制台）生成访问令牌并使用它。这是 Dropbox 所说的：

> 通过生成访问令牌，您将能够为您自己的帐户进行 API 调用，而无需通过授权流程。要获取其他用户的访问令牌，请使用标准 OAuth 流程。

用暗语：

```
AndroidAuthSession session = buildSession();
mApi = new DropboxAPI<AndroidAuthSession>(session);

    private AndroidAuthSession buildSession() {
        AppKeyPair appKeyPair = new AppKeyPair(APP_KEY, APP_SECRET);
        AndroidAuthSession session = new AndroidAuthSession(appKeyPair, ACCESS_TOKEN);
        // I guess then you just have to instantiate a DropboxAPI object and you're good to go without the startAuthentication()... endAuthentication() etc.
        return session;
    } 
```

and here we go just use the mApi to do whatever you want

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T22:22:04.270

> 将我的访问密钥和应用程序密钥/秘密硬编码到应用程序中会带来哪些安全隐患？

有足够动力的人最终会得到你的访问密钥。

> 我知道从 .apk 获取源代码相当简单，但是有人可以用这些信息做什么呢？

他们可以用这些信息做任何你能做的事情。

# javascript - 除以 0 和 0.00

> ID：15014002
> 
> 赞同：2
> 
> 时间：2013-02-21T23:10:11.877
> 
> 标签：javascript, python, ruby

Javascript

```
0/0       // NaN
0/0.0     // NaN
1/0.0     // Infinity
1/0.0     // Infinity 
```

红宝石

```
>> 0/0     # ZeroDivisionError: divided by 0
>> 0/0.00  # NaN
>> 1/0.00  # Infinity
>> -1/0.00 # -Infinity 
```

Python

```
>>> 0/0    # ZeroDivisionError: integer division or modulo by zero
>>> 0/0.0  # ZeroDivisionError: integer division or modulo by zero
>>> 1/0.0  # ZeroDivisionError: integer division or modulo by zero
>>> -1/0.0 # ZeroDivisionError: integer division or modulo by zero 
```

背后的原因是什么

整数不能被零除，但浮点数可以吗？

在 python 中，为什么它不是 NaN 或 Infinity，而是所有错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:13:52.587

浮点除以零在许多环境中*可能*是异常（如果启用），但由于 IEEE 浮点能够表达一些异常值（如`Inf`, `Nan`），除以零也可能返回异常*值*，而整数运算不能.

您还观察到不同语言的不同解析（或提升？）。`0`但是， JavaScript中的 bare*是*浮点 0，而不是整数 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T23:24:29.290

不同的语言做出不同的选择。

Javascript 的情况很简单：整数存储为浮点数，并选择遵循[IEEE-754](http://en.wikipedia.org/wiki/IEEE_floating_point)的除法规则。

Python 显然禁止除以`0`或除以`0.0`. [在这个 SO question 中](https://stackoverflow.com/questions/10011707/how-to-get-nan-when-i-divide-by-zero)查看解决方法。

Ruby 区分了精确`0`和浮点`0.0`（或`-0.0`）。实际上，`0.0`它可以代表一个非常小的正数，不能在浮点数的精度范围内表示（例如`0.1e-400`）。正是在这个视图中`1/0.1e-400`返回`Float::INFINITY`，因为`1e401`它太大而无法用任何其他浮点数表示。

Ruby 实际上有两个不同的比较运算符来区分：

```
0 == 0.0 # => true
0.eql?(0.0) # => false 
```

这可能会产生一些重要的后果：

```
h = {0 => :foo}
h[0.0] # => nil 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T23:24:12.353

> 在 python 中，为什么它不是 NaN 或 Infinity，而是所有错误？

python 中的某些模块确实有这个，当它们合适的时候：

```
In [1]: import numpy as np

In [2]: a = np.arange(3)

In [3]: b = np.ones(3)

In [4]: b/a
Out[4]: array([ inf,  1\. ,  0.5]) 
```

# php - 我应该对静态值使用准备好的语句吗？

> ID：15014003
> 
> 赞同：2
> 
> 时间：2013-02-21T23:10:12.877
> 
> 标签：php

说在每个页面加载上我想获取一个特定用途的分数，`SELECT score FROM users WHERE id = 6`. 这些变量都不会改变，我没有将 POST/GET 数据包含在其中。

我还应该使用准备好的语句吗？或者我可以只使用该`query`功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:14:53.103

省去麻烦，只需使用查询。在这种情况下不需要使用准备语句，除非接受用户输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:49:33.097

使用查询，因为您的输入没有改变或用户输入。

使用准备好的语句的主要原因是正确格式化来自帖子的用户输入，以便在查询中正确使用它。

在我的世界里，使用查询不会对你的网络服务器造成伤害。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T00:44:20.450

始终使用准备好的语句。

此原则将帮助您不必考虑每个新查询。只需使用准备好的语句即可。

表现？使用准备好的语句，它会更慢（如果你不使用一个语句来处理一组数据）......但这种性能差异看起来就像比较字符串在单引号和双引号中的性能。

PS 使用常量而不是幻数 6。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T23:19:18.467

我听说您可以从准备好的语句中获得一些性能提升。如果您的网站上有很多用户，您可能需要考虑使用准备好的。否则只使用一个查询应该没问题。

最后，您可能还需要考虑一种缓存信息的方法。我不确定您的程序完全在做什么，但是如果您可以减少对数据库的查询数量，这也可以提高性能。

# android - Android 应用程序在一段时间未打开后按下按钮时崩溃？

> ID：15014004
> 
> 赞同：0
> 
> 时间：2013-02-21T23:10:23.393
> 
> 标签：android, button, crash

我正在制作一个应用程序，如果我正常使用它，它可以正常工作而不会崩溃。一个活动带有两个交换的片段，一个活动上有两个按钮。如果应用程序有一段时间（数小时）未使用并且应用程序重新打开，那么如果我按下其中一个按钮，应用程序就会崩溃。仅当我使用主页按钮退出应用程序时才会发生这种情况，如果我按几次后退退出，则不会发生此问题。

如果我打开应用程序，按主页按钮返回 android 主屏幕，然后按我的 Advanced Task Killer 应用程序按钮，我也可以复制此崩溃。当我再次打开应用程序时，它会在它离开的同一个片段上打开（这很奇怪，我认为在使用任务杀手后它会重新开始），如果我按下其中一个按钮，应用程序就会崩溃。

编辑：我通过 logcat 发现，当我在以下代码中恢复应用程序时，它会将我的 tempmainfrag 作为 null 传递，这在 saveButtonClicked() 和 deleteButtonClicked() 中都成为问题：

```
 /*
 * Copyright (C) 2012 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.example.android.fragments;

import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentTransaction;
import android.util.Log;
import android.view.View;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.view.inputmethod.InputMethodManager;
import android.widget.CheckBox;
import android.widget.EditText;
import android.widget.TimePicker;
import android.widget.Toast;

public class MainActivity extends FragmentActivity 
        implements MainListFragment.OnListSelectedListener {

    MainListFragment tempmainfrag;
    InfoFragment infofrag;
    int mainPosition = -1;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mainlayout);

        // Check whether the activity is using the layout version with
        // the fragment_container FrameLayout. If so, we must add the first fragment
        if (findViewById(R.id.fragment_container) != null) { //meaning, if using phone version

            // However, if we're being restored from a previous state,
            // then we don't need to do anything and should return or else
            // we could end up with overlapping fragments.
            if (savedInstanceState != null) {
                return;
            }

            // Create an instance of MainListFragment
            tempmainfrag = new MainListFragment();  //made a context parameter to pass the context

            // In case this activity was started with special instructions from an Intent,
            // pass the Intent's extras to the fragment as arguments
            tempmainfrag.setArguments(getIntent().getExtras());

            // Add the fragment to the 'fragment_container' FrameLayout
            getSupportFragmentManager().beginTransaction()
                    .add(R.id.fragment_container, tempmainfrag).commit();

            Log.i("mydebug","TEMPMAINFRAG: " + tempmainfrag);
        }
    }

    public void onResume()
    {
        super.onResume();

    }

    public void onItemSelected(int position, String schedulename, String[] ampm, boolean[] days, int[] times, boolean vibrate) {
        // The user selected a list item

        //////////////////////////////TWO PANE LAYOUT STUFF///////////////////////////////////
        // Capture the article fragment from the activity layout
//        InfoFragment articleFrag = (InfoFragment)
//                getSupportFragmentManager().findFragmentById(R.id.article_fragment);  //article_fragment exists in layout-large
//
//        if (articleFrag != null) {
//            // If article frag is available, we're in two-pane layout...
//
//            // Call a method in the ArticleFragment to update its content
//            articleFrag.updateArticleView(position);
//
//        } else {
            // phone layout - swap frags

            mainPosition = position;

            // Create fragment and give it an argument for the selected article
            infofrag = new InfoFragment();
            Bundle args = new Bundle();
            args.putInt(infofrag.ARG_POSITION, position);

            //new stuff to add info
            args.putString(infofrag.ARG_NAME, schedulename);    
            args.putBooleanArray(infofrag.ARG_DAYS, days);
            args.putIntArray(infofrag.ARG_TIMES, times);
            args.putBoolean(infofrag.ARG_VIBRATE, vibrate); 
            args.putStringArray(infofrag.ARG_AMPM, ampm);

            infofrag.setArguments(args);
            FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

            // Replace whatever is in the fragment_container view with this fragment,
            // and add the transaction to the back stack so the user can navigate back
            transaction.replace(R.id.fragment_container, infofrag);
            transaction.addToBackStack(null);

            // Commit the transaction
            transaction.commit();

    }

    public void saveButtonClicked(View view) {  //pass the click to the mainlistfragment
        Log.i("mydebug","TEMPMAINFRAG: " + tempmainfrag);
        Log.i("mydebug","enter2222!!!!!!");
        boolean redo = false;
        //create toast
        Toast toast;

        //get title
        EditText titletext = (EditText)this.findViewById(R.id.titletext);

        //get checkboxes
        CheckBox check1 = (CheckBox)this.findViewById(R.id.monbox); //recreate checkboxes from view in activity (doesnt extend Activity 
        CheckBox check2 = (CheckBox)this.findViewById(R.id.tuebox); //so use getActivity())
        CheckBox check3 = (CheckBox)this.findViewById(R.id.wedbox);
        CheckBox check4 = (CheckBox)this.findViewById(R.id.thubox);
        CheckBox check5 = (CheckBox)this.findViewById(R.id.fribox);
        CheckBox check6 = (CheckBox)this.findViewById(R.id.satbox);
        CheckBox check7 = (CheckBox)this.findViewById(R.id.sunbox);
        CheckBox vibratebox = (CheckBox)this.findViewById(R.id.vibratecheckbox);

        //get times
        TimePicker startpicker = (TimePicker)this.findViewById(R.id.starttimepicker);
        TimePicker stoppicker = (TimePicker)this.findViewById(R.id.stoptimepicker);

        EditText temppp = titletext;
        //check for input errors
        if(titletext.getText().toString().length() == 0) //if title is empty
        {
            redo = true;
            toast = Toast.makeText(view.getContext(), "Enter an event name", 4);
            toast.show();

            //some sick-ass shake animations!!!
            Animation shake = AnimationUtils.loadAnimation(titletext.getContext(), R.anim.shake_big);
            this.findViewById(R.id.titletext).startAnimation(shake);
        }
        else if((!check1.isChecked()) && (!check2.isChecked()) && (!check3.isChecked()) && 
                (!check4.isChecked()) && (!check5.isChecked()) && (!check6.isChecked()) && 
                (!check7.isChecked()))  //if all checkboxes arent checked
        {
            redo = true;
            toast = Toast.makeText(view.getContext(), "At least one day of week must be checked", 4);
            toast.show();

            //more sick-ass shake animations!!!
            Animation shake = AnimationUtils.loadAnimation(titletext.getContext(), R.anim.shake_small);
            this.findViewById(R.id.checkboxes).startAnimation(shake);
            this.findViewById(R.id.daysofweek).startAnimation(shake);
            this.findViewById(R.id.frequencytext).startAnimation(shake);
        }

        if(!redo)   //if all info is fine
        {
            //check to see if time goes into next day
            if((startpicker.getCurrentHour() > stoppicker.getCurrentHour())||
                    ((startpicker.getCurrentHour() == stoppicker.getCurrentHour())
                            && (startpicker.getCurrentMinute() >= stoppicker.getCurrentMinute())))
            {
                toast = Toast.makeText(view.getContext(), "Note: Stop time is earlier than start time, so this schedule stops at next day", Toast.LENGTH_LONG);
                toast.show();
            }

            toast = Toast.makeText(view.getContext(), "Schedule saved", Toast.LENGTH_LONG);
            toast.show();

            //changing old schedule to new one
            boolean[] tempdays = {check1.isChecked(), check2.isChecked(), check3.isChecked(), check4.isChecked(), 
                    check5.isChecked(), check6.isChecked(), check7.isChecked()};

            tempmainfrag.mainObjectList.changeSchedule(mainPosition, titletext.getText().toString(), tempdays, vibratebox.isChecked(), 
                    startpicker.getCurrentHour()-1, startpicker.getCurrentMinute(), stoppicker.getCurrentHour()-1, stoppicker.getCurrentMinute());

            //used to hide keyboard in case its still open when displaying list
            InputMethodManager imm = (InputMethodManager)this.getSystemService(
                      Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(titletext.getWindowToken(), 0);

            this.onBackPressed();   //replicates backpress to go back to list
        }
    }

    public void deleteButtonClicked(View view)
    {
        //make a notification

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Delete?");
        builder.setIcon(R.drawable.trash_icon);
        builder.setMessage("Are you sure you wish to delete this schedule?")
           .setCancelable(false)
           .setPositiveButton("Delete", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   tempmainfrag.mainObjectList.removeSchedule(mainPosition);

                   tempmainfrag.exit();
               }
           })
           .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                    dialog.dismiss();
               }
           });
        AlertDialog alert = builder.create();
        alert.show();
    }

    public void hideKeyboard()  //hides keyboard, called whenever reverting back to list
    {
        InputMethodManager imm = (InputMethodManager)getSystemService(
                  Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(this.getCurrentFocus().getWindowToken(), 0);
    }

} 
```

我在 onResume 中尝试了一些解决方案，但想不出什么，有什么想法吗？非常感谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:48:16.357

我同意@andr 的观点，即您可能有一些静态变量，并且在 task kill 之后变量变为空或 null 因此，如果您尝试调用变量，您将面临一些错误。我认为是这种情况，但我可能是错的，尽管这取决于您的 LogCat 中的内容。

如果我尝试使用高级任务杀手退出它，我的应用程序也会崩溃。原因是因为我使用了一些静态变量，在任务终止后结果为空“”。为了避免应用程序崩溃，我在每个活动中都实现了这样的东西。

希望这对您有所帮助。或者您可以提供 LogCat 或更多信息，以便其他人可以帮助您。

```
public void onCreate(Bundle savedInstance){
       super.onCreate(savedInstance);

       //check whether global / static variables are empty or not
       //retrieve back the variables or intent it back to other activity
       if(globalvariables.UserName.equals(""){
               //execute something to deal with it
       }
} 
```

# java - slf4j 默认使用 commons-logging 实现吗？

> ID：15014007
> 
> 赞同：0
> 
> 时间：2013-02-21T23:10:38.503
> 
> 标签：java, logging, slf4j, apache-commons-logging

我过去只合作`log4j`过。现在我正在寻找一个新项目并注意到它使用`slf4j 1.7.2`. 我知道它只是一个 API 规范，它为符合它的各种实现提供简化的接口（AKA 外观），例如[java.util.logging、log4j 和 logback](http://www.slf4j.org/manual.html)。但是，我注意到`commons-logging`API 网站的列表中没有提到它，但是，它的 jar 在这个应用程序的类路径中。当我从类路径中删除它以检查它是否是使用的实现时，我确认它确实是：

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory 
```

commons-logging 确实是 slf4j 的默认实现吗？因为他们的文档说：

**如果在类路径上没有找到绑定，那么 SL​​F4J 将默认为无操作实现。**

在上面的链接页面。即使我`slf4j-nop-1.7.2.jar`在类路径中，我猜上面提到的默认实现是，我仍然得到异常询问`org/apache/commons/logging/LogFactory`公共资源是否不在类路径中，所以我很困惑。

澄清将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:24:18.790

您需要在类路径上组合绑定 jar 和日志记录实现（在本例中为 JCL）。

[在部署时与日志框架绑定](http://www.slf4j.org/manual.html#swapping)

commons-logging 不是默认的，但如果你的类路径中有 slf4j-jcl-1.7.2.jar，它会尝试使用它。因此，如果您因此从路径中删除 JCL，它将抱怨找不到类。

slf4j-nop-1.7.2.jar 是无操作的“SLF4J 绑定”jar，本身不是实现。

# css - 如何检查 CSS3 是否启用了硬件加速？

> ID：15014009
> 
> 赞同：0
> 
> 时间：2013-02-21T23:10:47.153
> 
> 标签：css

我有以下CSS。

> ```
> -webkit-transform: translate3d(0,0,0);
> -moz-transform: translate3d(0,0,0);
> -ms-transform: translate3d(0,0,0);
> -o-transform: translate3d(0,0,0);
> transform: translate3d(0,0,0);
> 
> -webkit-transition: height 450ms cubic-bezier(0.840, 0.005, 0.755, 0.995);
> -moz-transition: height 450ms cubic-bezier(0.840, 0.005, 0.755, 0.995); 
> -ms-transition: height 450ms cubic-bezier(0.840, 0.005, 0.755, 0.995); 
> -o-transition: height 450ms cubic-bezier(0.840, 0.005, 0.755, 0.995); 
> transition: height 450ms cubic-bezier(0.840, 0.005, 0.755, 0.995); 
> ```

我了解到**translate3d**启用了硬件加速，但我该如何检查呢？我的眼睛看不出区别。

# node.js - 如何将 Mongodb Admin GUI 连接到 Cloud Foundry？

> ID：15014012
> 
> 赞同：0
> 
> 时间：2013-02-21T23:10:52.610
> 
> 标签：node.js, mongodb, cloud-foundry, mongovue

我正在寻找一种方法来浏览我的 Cloud Foundry Mongodb 服务。看起来有两种选择：

1.  使用 Caldecott [http://docs.cloudfoundry.com/tools/vmc/caldecott.html](http://docs.cloudfoundry.com/tools/vmc/caldecott.html)连接到 Cloud Foundry 服务。我从未尝试过，但我想它可能会起作用。
2.  我的问题是：**是否可以从 Mongodb Admin GUI（例如 mViewer 或 Mongovue）直接连接到 Cloud Foundry**？但如果是这样，我怎么知道其中的用户名/密码`process.env.VCAP_SERVICES['mongodb-1.8'][0]['credentials']`？

[https://github.com/Imaginea/mViewer](https://github.com/Imaginea/mViewer)

[http://www.mongovue.com/2011/08/04/mongovue-connection-to-remote-server-over-ssh/](http://www.mongovue.com/2011/08/04/mongovue-connection-to-remote-server-over-ssh/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:32:50.107

您需要使用 Caldecott 创建隧道。

请参阅[http://docs.cloudfoundry.com/tools/vmc/caldecott.html](http://docs.cloudfoundry.com/tools/vmc/caldecott.html)。

当您打开隧道时，它应该为您提供命令行客户端或要使用的凭据。

如果没有，请创建一段代码，`process.env.VCAP_SERVICES`当访问您的服务器上的某个 url 时返回一个转储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T03:26:22.077

通过使用 GUI 客户端，您必须获得通往服务的隧道。在 CLI 控制台中打开它后，将生成并显示连接信息，包括主机地址（通常为 127.0.0.1）、端口号、用户名和密码。如果您尝试从外部环境执行此操作，则无法使用来自 VCAP_SERVICES 的值进行连接，因为这些将是 CF 路由器后面的本地值。

# php - 如何使用 jquery 创建选择器工具

> ID：15014013
> 
> 赞同：0
> 
> 时间：2013-02-21T23:11:18.460
> 
> 标签：php, jquery, selector

我希望创建一个犬种选择器工具，用户可以通过选择某些特征来缩小犬种的范围。这是我到目前为止所拥有的：

```
$(document).ready(function(){
  $("#big,#long").click(function(){
  $("#pug").hide();
  });
    $("#small,#long").click(function(){
  $("#bull").hide();
  });
    $("#big,#short").click(function(){
  $("#pom").hide();
  });
    $("#small,#short").click(function(){
  $("#new").hide();
  });
});
</script>
<p>Size</p>
<button id="small">Small</button>
<button id="big">Big</button>
<p>Coat</p> 
<button id="short">Short Hair</button>
<button id="long">Long Hair</button>
<p id="pug">Pug</p>
<p id="bull">Bulldog</p>
<p id="pom">Pomeranian</p>
<p id="new">Newfoundland</p> 
```

我尝试合并 .show() 以便在重新选择另一个特征后重新出现品种，但随后所有品种都重新出现，这违背了该工具的目的。

我知道一点 php，所以让我知道使用它是否会更容易。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:38:46.610

如果您只是将特定类添加到名称（[demo](http://jsfiddle.net/Mottie/gmHTN/2/)）中会更容易：

```
<p id="pug" class="small short">Pug</p>
<p id="bull" class="big short">Bulldog</p>
<p id="pom" class="small long">Pomeranian</p>
<p id="new" class="big long">Newfoundland</p> 
```

然后你可以使用这个代码：

```
$(function () {
    var size = '',
        coat = '',
        $list = $('#list'),
        selectType = function () {
            $list.find('p').hide();
            $list.find('p' + size + coat).show();
        };

    $("#big,#small").click(function() {
        size = '.' + this.id;
        $('#big').toggleClass('selected', this.id === "big");
        $('#small').toggleClass('selected', this.id === "small");
        selectType();
    });
    $("#short,#long").click(function () {
        coat = '.' + this.id;
        $('#short').toggleClass('selected', this.id === "short");
        $('#long').toggleClass('selected', this.id === "long");
        selectType();
    });

}); 
```

* * *

哎呀，更新了代码以正常工作并为所选按钮着色。

# knockout.js - knockout.js 计算数组未在更改时触发

> ID：15014017
> 
> 赞同：3
> 
> 时间：2013-02-21T23:11:34.763
> 
> 标签：knockout.js, computed-observable

我正在尝试在 MVC 4 和 Knockout.js 中使用计算的 observableArray 创建一个可编辑的网格。首次加载数组时调用 computed() 方法，但不会在通过用户编辑在网格上更改任何数据时调用。

视图模型：

```
function CarsVm() {
var self = this;

self.url = 'http://localhost/FederatedWcf/Services/RestCars.svc/json/cars';

self.cars = ko.observableArray([]);

self.car = ko.computed(function () {
    if ( this.cars().length > 0)
        return this.cars()[this.cars().length-1].Make;
    else {
        return "";
    }
}, this);

self.GetCars = function () {
    var count = 0;
    $.getJSON(self.url, function (allData) {
        var mappedCars = $.map(allData.JsonCarsResult, function (item) {
            console.log(count);
            console.log(item);
            count = count + 1;
            return new Cars(item);
        });
        self.cars(mappedCars);
        console.log(self.cars());
    });
    $.ajaxSetup({ cache: false });
};

} 
```

和 html 片段：

```
<table>
<thead>
    <tr>
        <th></th>
        <th>Year</th>
        <th>Make</th>
        <th>Model</th>
        <th></th>
    </tr>
</thead>
<tbody data-bind="foreach: cars">
    <tr>
        <td><span style="display:none" data-bind="text:Id"></span></td>
        <td><input data-bind="value:Year"></input></td>
        <td><input data-bind="value:Make"></input></td>
        <td><input data-bind="value:Model"></input></td>
        <td><button data-bind="click: $root.removeCar">-</button></td>
    </tr>
</tbody>
</table>
<span data-bind="text:car"></span> 
```

如果我编辑网格中的最后一个 Make，我希望数据绑定的汽车元素会更新，但事实并非如此。

如何检测网格上的变化，比如在 onblur 事件期间，在淘汰的 observableArray 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:38:00.667

确保将 Cars 中的每个属性标记为可观察的，否则淘汰赛不会注意到它们发生了变化。

```
function Cars(data) {
   var self = this;
   self.Id = data.Id;
   self.Year = ko.observable(data.Year);
   self.Make = ko.observable(data.Make);
   self.Model = ko.observable(data.Model);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T23:28:42.200

这是因为当您更改中对象的*属性*`cars`时，`observableArray`不会观察到任何东西（它仍然包含相同的对象，对吗？）

为了让它知道属性，你必须让 observableArray 中的每个项目本身成为一个 observable。您可以使用自己的[映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)`ko.observable()`或在您当前的映射功能中手动执行此操作。

# emacs - 在 Emacs 上的 ansi-term 处粘贴一个单词

> ID：15014022
> 
> 赞同：4
> 
> 时间：2013-02-21T23:11:55.307
> 
> 标签：emacs, ansi-term

我在 Emacs 上使用 ansi-term 并且需要在那里粘贴一些单词。“粘贴”仅适用于鼠标中键。我知道使用`C-x C-j`and ，我们可以在and`C-c C-k`之间切换，但是不方便。我更喜欢使用或做这项工作。在线搜索，但解决方案不适用于我的 emacs23。`char run``line run``C-y``C-c y`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:01:25.587

这里有两个选择：使用劣质进程或 Emacs。

要使用劣质进程（可能是使用 readline 的东西），只需发送原始`C-y`字符。

```
(define-key term-raw-map (kbd "C-k") 'term-send-raw)
(define-key term-raw-map (kbd "C-y") 'term-send-raw) 
```

然后`C-k`直接`C-y`发送到终端，在那里它们的功能就像在任何其他终端中一样（例如分别杀死到行尾和猛拉）。由于下级进程是接收和解释按键，Emacs 将与 kills 和 yanks 无关。

要使用 Emacs 的 kill ring，请使用`term-paste`.

```
(define-key term-raw-map (kbd "C-c C-y") 'term-paste) 
```

就个人而言，我喜欢将缓冲区视为常规终端，因此我通常在编辑命令行时`term-mode`使用鼠标来复制/粘贴和`C-k`/ 。`C-y`

FWIW，我使用[multiterm](http://www.emacswiki.org/MultiTerm)，我做

```
(with-eval-after-load "multi-term"
  (dolist
    (bind '(("C-k"           . term-send-raw)
            ("C-y"           . term-send-raw)
            ("C-c C-y"       . term-paste)
            ))
  (add-to-list 'term-bind-key-alist bind))) 
```

# javascript - 结合两个js函数来显示/隐藏切换

> ID：15014032
> 
> 赞同：1
> 
> 时间：2013-02-21T23:12:14.360
> 
> 标签：javascript, function, if-statement, getelementbyid

我目前正在使用两个函数来显示和隐藏我正在处理的项目中的元素。

一个函数用于元素当前是什么时候，另一个函数是元素当前`.display = 'block'`是什么时候`.display = 'none'`。

```
function hide1(id) {
    ele = document.getElementById(id);
if (ele.style.display == 'block')
    ele.style.display = 'none';
else
    ele.style.display = 'block'; }

function hide2(id) {
    ele = document.getElementById(id);
if (ele.style.display == 'none')
    ele.style.display = 'block';
else
    ele.style.display = 'none'; } 
```

我完全支持优化，我想知道是否有办法将这两个功能组合成一个，或者是否可以将它们保持原样。

干杯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:19:44.603

```
function hide(id) {
    ele = document.getElementById(id);
    ele.style.display = (ele.style.display == 'block')?'none':'block';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:20:13.660

```
function ChangeDisplay(id,prevDisplay,newDisplay) {
ele = document.getElementById(id);
if (ele.style.display == prevDisplay)
ele.style.display = newDisplay; 
else
ele.style.display == prevDisplay;
} 
```

那应该做你的工作

# android - android ndk 本机可执行文件（不是应用程序）写入权限

> ID：15014034
> 
> 赞同：1
> 
> 时间：2013-02-21T23:12:26.513
> 
> 标签：android, c++, unix, android-ndk, nexus-4

我有一个植根的 android 手机，我通过 adb shell 在其上运行本机 c 可执行文件。我既没有使用 Java 也没有使用 Java NDK 应用程序，因为我想使用这个应用程序进行低级工作，并且不与用户进行任何形式的交互。虽然一切运行良好，但当我尝试写入文件（即使用 fprintf 等的 std::ofstream 等）时，文件已创建但为空。

对于应用程序开发，我知道您需要在 Manifest.XML 中添加一行，以便您拥有写入权限。

对本机可执行文件有什么建议吗？

# javascript - 如何让javascript函数调用两个div

> ID：15014036
> 
> 赞同：0
> 
> 时间：2013-02-21T23:12:33.763
> 
> 标签：javascript, function, html, web

我正在尝试在单击按钮时进行颜色更改，并且我设法做到了这一点，但是我不仅想更改主要内容容器的颜色，还想更改更多容器的颜色，我该怎么做？

```
 function changeblackandwhite(objDivID) {
  if(document.getElementById(objDivID).style.color=='black'){
    document.getElementById(objDivID).style.color='white';
    document.getElementById(objDivID).style.backgroundColor='black';
  }

  else if(document.getElementById(objDivID).style.color=='white'){
    document.getElementById(objDivID).style.color='black';
    document.getElementById(objDivID).style.backgroundColor = 'white';
  }

  else{
    document.getElementById(objDivID).style.color='black';
    document.getElementById(objDivID).style.backgroundColor='white';
  }
}

<a href="javascript:changeblackandwhite('Maincontainer')"><img src="images/colour.jpg" title="Change Text/Backgroud Colors"></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:21:37.603

有几十种方法可以实现这一点。

您可以将函数的参数更改为字符串数组。您还可以降低函数的复杂性

```
<script type="text/javascript">
changeblackandwhite = function() {
  for( var idx=0; idx < arguments.length; idx++) {
    var tgtDiv= document.getElementById(arguments[i]);
    if(tgtDiv.style.color=='black'){
        tgtDiv.style.color='white';
        tgtDiv.style.backgroundColor='black';
    }
    else{
        tgtDiv.style.color='black';
        tgtDiv.style.backgroundColor='white';
    }
  }
};
</script>

<a href="javascript:changeblackandwhite('Maincontainer', 'Container2')"><img src="images/colour.jpg" title="Change Text/Backgroud Colors"></a> 
```

正如另一位读者所质疑的那样 - 您可以在一行中使用 jQuery 完成此操作。

使用 jQuery，您可以将相关元素声明为具有类属性。

使用 jQuery，您可以执行以下操作：

```
$('div.someClass').css({'color': 'black', 'background-color': 'white'}); 
```

jQuery 的参数可以是基于类的选择器、基于 id 的选择器或您选择的任何其他选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:17:24.673

我为你制作了一个 jsfiddle 来玩[jsfiddle](http://jsfiddle.net/8c6ER/4/)

我也以与 OP 类似的方式编写了 javascript/jQuery，因为它通常可以帮助他们理解。

如上所述，有几种不同的方法可以做到这一点，我只做了一种。

document.ready 函数为要单击的对象设置了一个事件侦听器，大多数情况下这就是您看到事件编码的方式。因此，当单击链接时，它会使用侦听器所针对的对象的字符串名称调用该函数。

```
$(document).ready(function() {
    $("#changeit").click(function(){
       changeblackandwhite("Maincontainer");  
    })
}); 
```

分配事件监听器后，点击链接时会调用下面的函数。

```
// Here's your function, put the current color in a var, check if it's black
// if black, change colors, else make it black.
function changeblackandwhite(objDivID) {
     var curColor = $("#" + objDivID).css("color");
     if( curColor == 'rgb(0, 0, 0)'){ 
         $("#"+objDivID).css({'color':'white','background-color':'black'});
     } else {
         $("#"+objDivID).css({'color':'black','background-color':'ghostwhite'});
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T23:20:34.060

如果您对 jquery 持开放态度并且您分配了与这两个 div 相同的 1 个类，您可以执行以下操作：这应该可以帮助您入门（请参阅[此 jsfiddle](http://jsfiddle.net/C5WjS/1/)）：我更改了 fiddle 以包含一个更简洁的解决方案，其中单击按钮添加和删除容器上的类，允许您在一次快速调用中设置多个属性，包括文本颜色。

```
<div class='container'>
</div>
<div class='container'>
</div>
<button id="changeColor" type="button">Change Color </button>

<script type="text/javascript">
$(document).ready( function() {
    $('#changeColor').click( function() {
        if ($('.container').hasClass("blackContainer")){
            $('.container').addClass("whiteContainer");
            $('.container').removeClass("blackContainer");
        } else {
            $('.container').removeClass("whiteContainer");
            $('.container').addClass("blackContainer");
        }

    });
});
</script>

//CSS
.blackContainer {
    background-color: black;
    color: white;
}

.whiteContainer {
    background-color: white;
    color: black;
} 
```

# jquery - 将 DOM 元素添加到 jQuery 堆栈数组

> ID：15014037
> 
> 赞同：0
> 
> 时间：2013-02-21T23:12:39.007
> 
> 标签：jquery, dom

我有一个获取几个项目的选择器，我想向该堆栈添加一个元素。这不是[pushStack](http://api.jquery.com/pushStack/)的用途吗？

的HTML：

```
<div id="container">
    <div class="color-me">Line 1</div>
    <div class="color-me">Line 2</div>
</div> 
```

Javascript：

```
var $divs = $('.color-me');

var $generatedDiv = $('<div></div>', {
    'class': 'color-me',
    'text': 'Line 3'
}).appendTo($('#container'));

$divs.pushStack($generatedDiv);

// Shouldn't the $generatedDiv be in the $divs jQuery stack now?
$divs.css('color', 'red'); 
```

jsFiddle：http: [//jsfiddle.net/bGDxw/](http://jsfiddle.net/bGDxw/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:16:17.963

`pushStack`确实将它们添加到 jQuery 堆栈中，但这不是您要处理的内容。您正在处理一组 jQuery 对象。

因此，您需要使用该[`add()`](http://api.jquery.com/add/)功能：

> **描述：** *将元素添加到匹配元素的集合中。*

例如：

```
var $divs = $('.color-me');

var $generatedDiv = $('<div />', {
    'class': 'color-me',
    'text': 'Line 3'
}).appendTo($('#container'));

$divs = $divs.add($generatedDiv);
$divs.css('color', 'red'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:19:08.950

听起来你想要的是 .add()。代替

```
$divs.pushStack($generatedDiv); 
```

尝试

```
$divs = $divs.add($generatedDiv); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T23:14:16.053

采用`$divs.add($generatedDiv);`

请参阅[jQuery.add() 函数](http://api.jquery.com/add/)文档。

# html - 服务器关闭时，HTML5 离线 appcache 自定义字体无法正确加载或显示

> ID：15014040
> 
> 赞同：0
> 
> 时间：2013-02-21T23:12:45.810
> 
> 标签：html, font-face, offline-caching, html5-appcache

当服务器运行或客户端离线时，这些字体加载得非常好。但是一旦我关闭我的服务器（假设它无法联系，因为它已关闭），字体就会中断，这就是我在控制台中得到的：

> 应用程序缓存错误事件：清单提取失败 (-1) [URL]

和

> 资源解释为字体，但使用 MIME 类型 text/html 传输：[URL]

我正在运行一个本地主机，我只能假设这将是野外的行为，因为即使我处于离线状态，它仍然会在控制台中像这样检查清单：

```
使用清单 [URL] 从应用程序缓存加载文档

应用程序缓存检查事件

应用程序缓存 NoUpdate 事件

```

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:56:00.153

当您离线时，总是会发生 manifest fetched failed 错误。第二个错误意味着字体没有作为正确的 MIME 类型接收，因此您需要添加 .htaccess 或其他可以正确设置 mime 类型的东西。还要确保字体的文件扩展名正确。

# ruby-on-rails - 我应该如何组织我的 Ruby on Rails 模型？

> ID：15014047
> 
> 赞同：0
> 
> 时间：2013-02-21T23:13:07.913
> 
> 标签：ruby-on-rails, ruby

关联、范围、属性、验证、回调、非标准代码 ( `acts_as_*`)、类和实例方法的良好常规顺序是什么？

此外，如果我需要将模型拆分为模块，最好将这些模块基于功能（Post::Comments、Post::Share、Post::Admin 等），其中每个模块还包括范围和关联，或者是否最好将所有范围和关联保留在基本模型中并且只拆分方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:24:35.083

你不会得到一个明确的答案。这取决于您的个人喜好以及适合您的代码的内容。

我对模型中的顺序的建议是：选择一个，并坚持下去。回调是在验证之前还是之后发生并不重要，只要它对您有意义，并且您可以记住它。

关于模块：我会选择两个较小的模型，并尝试两种方法，看看哪种更适合你。就我个人而言，我不喜欢我的范围分布在多个文件中，但这也不一定是您的偏好。

也许您想看看其他人是如何做的，例如[https://github.com/gitlabhq/gitlabhq](https://github.com/gitlabhq/gitlabhq)或[https://github.com/diaspora/diaspora](https://github.com/diaspora/diaspora)以帮助您做出决定。

# git - 新分支上的提交未可视化

> ID：15014049
> 
> 赞同：1
> 
> 时间：2013-02-21T23:13:20.720
> 
> 标签：git

在终端中，我正在运行以下命令来可视化我在多个分支上的提交历史记录：

```
git log --graph --oneline --all 
```

这行得通，但我没有看到我认为我应该看到的东西。我有两个分支，我的主分支和我创建、切换到然后添加到提交的功能分支。但我看到以下内容：

```
* cde9a0b Commit on feature branch
* b4a9c14 Commit on feature branch
* b72185f Commit on master 
```

特性分支上的两个提交不应该在右侧显示它们不是主分支的一部分吗？当我运行 a`git status`或 a`git branch`时，它们都确认我正在致力于正确的分支。我读错了，还是我跳过了一步？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:18:41.667

你正在看到你应该看到的，因为`feature`它是由`master`

试试这个看看分支和其他`ref`s：

```
git log --graph --oneline --all --decorate 
```

这是手册页的`--decorate`摘录[`git log`](http://www.kernel.org/pub/software/scm/git/docs/git-log.html)：

> --decorate[=short|full|no]
> 
> > 打印显示的任何提交的引用名称。如果指定了short，则不会打印引用名称前缀refs/heads/、refs/tags/和refs/remotes/。如果指定了 full，则将打印完整的 ref 名称（包括前缀）。默认选项是短的。

# javascript - jquery停止双重事件

> ID：15014050
> 
> 赞同：0
> 
> 时间：2013-02-21T23:13:40.597
> 
> 标签：javascript, jquery

我遇到了一个防止双重事件的问题

所以首先我有一段代码触发

```
jQuery(window).trigger('swipeForward'); 
```

所以这会监听这个触发器

```
jQuery(window).on('swipeForward', swipeHandlerNext ); 
```

滑动处理程序的想法是让用户不能滑动两次并创建一个双事件

然后这将执行 swipeHandlerNext 函数

```
function swipeHandlerNext(event) {

    // If event isn't already marked as handled, handle it
    if(event.handled !== true) {

        // Kill event handler, preventing any more clicks
        jQuery(".pageSize").off("swipeForward");

        // Do your stuff here
        pageSize = jQuery(".mainHeader").width();
        slide("forward", pageSize);

        console.log(" swipe complete page forward via swipe");

        // Mark event as handled
        event.handled = true;
    } 

    return false;
} 
```

这显然执行了滑动功能。这是具有 .animate 命令的那个

```
function slide(data, pageSize) {

    if (!pageSize) {
    pageSize = jQuery(".mainHeader").width();
    }

    var promise  = calcLeft(data, pageSize);

    jQuery.when(promise).then(function(result) {

        console.log(result);

        jQuery('#pageHolder').delay(500).animate({
            left: result

          }, 400, function() {
            console.log("animation started");
            calcNav(pageSize);
            calcPage(pageSize);
            jQuery(".pageSize").on("swipeForward", swipeHandlerNext);
            console.log("animation complete");

        });

    });

} 
```

然而，这并不能阻止双滑。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:39:57.717

**为什么`Off()`在您的示例中不起作用**

jQuery 的`off()`方法期望选择器为[`match the one originally passed to .on() when attaching event handlers`](http://api.jquery.com/off/).

在您的初始事件绑定中，您将事件附加到`window`带有`jQuery(window).on(...)`. 但是在处理程序函数中，您要删除事件，然后使用and将事件重新附加到`.pageSize`元素。`jQuery('.pageSize').off(...)``jQuery('.pageSize').on(...)`

换句话说，您实际上并没有删除绑定到`window`元素的事件处理程序，因此用户可以继续滑动。

**为什么`event.handled`在您的示例中不起作用**

每次滑动事件发生时，都会创建一个*单独* `event`的对象并将其传递给处理程序。因此，该`event`对象不是一个全局变量，您可以在后续滑动中对其进行修改和检查其状态。

**按照您的示例可能的解决方案**

1.  匹配传递给`on()`and`off()`方法的选择器。
2.  设置和取消设置全局变量以指示正在进行滑动。

# encryption - 文件是否使用 AES 加密？

> ID：15014053
> 
> 赞同：0
> 
> 时间：2013-02-21T23:13:45.917
> 
> 标签：encryption, aes

如果我知道算法是 AES，有没有办法判断文件是否已经加密？

我本来是加密它的人，所以解密或加密的信息不是问题。但是，如果您尝试解密尚未加密的文件，您将丢失所有数据。如果你加密它两次，你会得到双重加密。您可以反转双重加密，但您需要知道它被加密了两次。

有没有办法以编程方式确定？

我正在用 Java 做这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:19:11.960

没有办法判断是否有任何东西已经用 AES 加密，它不会留下签名，这就是重点的一部分。尽管您可以通过测试数据长度（以字节为单位）是否为 16 的倍数来推断其可能已使用 AES 或其他 128 位分组密码进行了加密，这表明在最后一个块上有填充的 128 位分组密码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:22:13.850

这取决于未加密的文件格式。如果您的未加密文件具有特定的文件头，您可以搜索该头。如果您找到它，则该文件未加密。如果你没有找到它，文件可能会被加密。

如果您的未加密文件没有特定的文件头......那么运气不好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T23:34:36.047

如果您愿意使用外部程序，则可以使用 openssl 尝试解密数据。只要您在未加密的数据上提供非空白密码，它就会返回“坏幻数”错误。尚不确定 openssl 究竟是如何生成该消息的（如果我可以在您的代码中做到这一点），但这是一个开始。

```
$ openssl enc -d -aes-256-cbc -in /Applications/Wireshark.app/Contents/MacOS/Wireshark
enter aes-256-cbc decryption password:
bad magic number 
```

另一种方法是检查文件的前 8 个字符是“Salted__”，接下来的 8 个字符是 salt（假设加密是 salted，openssl 二进制文件默认执行但可以禁用）。

> 0000000: 5361 6c74 6564 5f5f 70d6 3655 ae12 58de Salted__p.6U..X.

# javascript - 文本输入：将输入限制为数字 (0-9) 和减号 (-)。没有按预期工作

> ID：15014054
> 
> 赞同：2
> 
> 时间：2013-02-21T23:13:47.027
> 
> 标签：javascript, html

我试图将我的文本字段中的键盘输入限制为数字`[0-9]`和减号`-`（没有复制/粘贴等）和删除键显然。

该代码适用于限制数字和删除键，但不适用于减号`-`部分。

用户应该只能`-`在他们的数字前面输入一个减号，如果他们尝试输入，`1`那么`-`它不应该输入，`-`但现在该`-`部分根本不起作用。

小提琴：http: [//jsfiddle.net/7XLqQ/1/](http://jsfiddle.net/7XLqQ/1/)

我认为这段代码是问题所在，但看起来不错。它检查文本输入是否为空白，如果是，则输入减号`-`。

```
// Only enter the minus sign (-) if the user enters it first
if (unicode == 45 && input.value == "") {
    return true;
} 
```

我的完整代码：

```
<input type="text" maxlength="10" id="myInput">

<script>
var input = document.getElementById("myInput");

input.onkeypress = function(e) {
   var unicode = e.keyCode;

    if (unicode == 49 || unicode == 50 || unicode == 51 || unicode == 52 || unicode == 53 || unicode == 54 || unicode == 55 || unicode == 56 || unicode == 57 || unicode == 48) {
        return true;
    } else {
        return false;   
    }

    // Only enter the minus sign (-) if the user enters it first
    if (unicode == 45 && input.value == "") {
        return true;
    }
};
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:19:40.040

操作顺序，在您询问减号之前，您在 0-9 上返回 false。将减号 if block 移到 0-9 if block 之上，你是金子

```
<input type="text" maxlength="10" id="myInput">

<script>
var input = document.getElementById("myInput");

input.onkeypress = function(e) {
   var unicode = e.keyCode;

    // Only enter the minus sign (-) if the user enters it first
    if (unicode == 45 && input.value == "") {
        return true;
    }

    if (unicode == 49 || unicode == 50 || unicode == 51 || unicode == 52 || unicode == 53 || unicode == 54 || unicode == 55 || unicode == 56 || unicode == 57 || unicode == 48) {
        return true;
    } else {
        return false;   
    }

};
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:22:02.553

我建议：

```
var input = document.getElementById("myInput");

input.onkeypress = function(e) {
    switch (e.keyCode){
        case 45:
            return this.value.length == 0 ? true : false;
            break;
        case 48:
        case 49:
        case 50:
        case 51:
        case 52:
        case 53:
        case 54:
        case 55:
        case 56:
        case 57:
            return true;
            break;
        default:
            return false;
            break;
    }
}; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/7XLqQ/2/)。

您的原始代码失败的原因仅仅是您在`if`评估条件之前已经从函数返回。在这个版本中，如果`-`按键被按下，`true`如果没有当前值（因此`-`将是第一个字符），或者`false`如果已经有一个值（因此`-`不会是第一个字符），则返回一个三元组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T00:04:19.593

`keyCode`是除 IE 之外的所有浏览器中的错误属性。您需要`charCode`或`which`在其他浏览器中。使用它，您将获得字符代码，并且可以使用正则表达式来测试键入的字符。`keypress`您还需要在为此类键触发事件的浏览器中允许不可打印的按键，例如删除、退格和箭头键。

演示：http: [//jsfiddle.net/7XLqQ/3/](http://jsfiddle.net/7XLqQ/3/)

```
var input = document.getElementById("myInput");

input.onkeypress = function(e) {
    e = e || window.event;
    var charCode = (typeof e.which == "number") ? e.which : e.keyCode;

    // Allow non-printable keys
    if (!charCode || charCode == 8 /* Backspace */ ) {
        return;
    }

    var typedChar = String.fromCharCode(charCode);

    // Allow numeric characters
    if (/\d/.test(typedChar)) {
        return;
    }

    // Allow the minus sign (-) if the user enters it first
    if (typedChar == "-" && this.value == "") {
        return;
    }

    // In all other cases, suppress the event
    return false;
}; 
```

这里没有考虑一种情况，即用户将插入符号放在输入的开头并键入减号。为此，您需要检测插入符号的位置。这是一些跨浏​​览器代码，用于检测插入符号是否位于输入的开头，改编自此[答案](https://stackoverflow.com/a/7633355/96100)：

```
function isCaretAtTheStart(el) {
    if (typeof el.selectionEnd == "number") {
        // Modern browsers
        return el.selectionEnd == 0;
    } else if (document.selection) {
        // IE < 9
        var selRange = document.selection.createRange();
        if (selRange && selRange.parentElement() == el) {
            // Create a working TextRange that lives only in the input
            var range = el.createTextRange();
            range.moveToBookmark(selRange.getBookmark());
            return range.moveEnd("character", -el.value.length) == 0;
        }
    }
    return false;
} 
```

这是一个修改后的演示：http: [//jsfiddle.net/7XLqQ/5/](http://jsfiddle.net/7XLqQ/5/)

最后，我最喜欢的关于 JavaScript 关键事件的资源，它将告诉你你需要知道的一切：http: [//unixpapa.com/js/key.html](http://unixpapa.com/js/key.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-30T14:24:49.640

我建议：

```
$(".class_name").keypress(function (e) {
   if (e.which != 8 && e.which != 0 && e.which != 45 && (e.which < 48 || e.which > 57)) {
      return false;
   }
}); 
```

# algorithm - 取 n 行列式的有效方法！xn！Maple中的矩阵

> ID：15014055
> 
> 赞同：6
> 
> 时间：2013-02-21T23:13:50.113
> 
> 标签：algorithm, permutation, maple, determinants

我有一个大矩阵，n！xn!，为此我需要取行列式。对于 n 的每个排列，我将

*   长度为 2n 的向量（这在计算上很容易）
*   2n 个变量的多项式（在 n 上递归计算的线性因子的乘积）

该矩阵是向量处的多项式的评估矩阵（被认为是点）。所以矩阵的 sigma,tau 项（由排列索引）是在 tau 的向量处评估的 sigma 的多项式。

***示例***：对于`n=3`，如果第`i`th 多项式是`(x1 - 4)(x3 - 5)(x4 - 4)(x6 - 1)`并且第`j`th 点是`(2,2,1,3,5,2)`，那么`(i,j)`矩阵的第 th 项将是`(2 - 4)(1 - 5)(3 - 4)(2 - 1) = -8`。这里`n=3`，所以点在`R^(3!) = R^6`并且多项式有`3!=6`变量。

我的目标是确定矩阵是否是非奇异的。

* * *

我现在的做法是这样的：

*   该函数`point`接受一个排列并输出一个向量
*   该函数`poly`采用置换并输出多项式
*   该函数`nextPerm`按字典顺序给出下一个排列

我的代码的删节伪代码版本是这样的：

```
B := [];
P := [];
w := [1,2,...,n];
while w <> NULL do
  B := B append poly(w);
  P := P append point(w);
  w := nextPerm(w);
od;

// BUILD A MATRIX IN MAPLE
M := Matrix(n!, (i,j) -> eval(B[i],P[j]));

// COMPUTE DETERMINANT IN MAPLE
det := LinearAlgebra[Determinant]( M );

// TELL ME IF IT'S NONSINGULAR
if det = 0 then return false;
else return true; fi; 
```

我正在使用内置函数在 Maple 中工作`LinearAlgebra[Determinant]`，但其他一切都是使用低级 Maple 函数（例如 和 ）的自定义`seq`构建`convert`函数`cat`。

我的问题是这需要很长时间，这意味着我可以`n=7`耐心等待，但`n=8`需要几天时间。理想情况下，我希望能够到达`n=10`.

有谁知道我可以如何改善时间？我愿意使用不同的语言工作，例如 Matlab 或 C，但我更愿意在 Maple 中找到一种加快速度的方法。

我意识到如果没有所有血淋淋的细节，这可能很难回答，但是每个函数的代码，例如`point`和`poly`，已经优化，所以这里真正的问题是是否有更快的方法通过在飞，或类似的东西。

* * *

更新：这是我玩弄的两个不起作用的想法：

1.  我可以将多项式（因为它们需要一些时间来计算，如果可以的话我不想重做）存储到一个长度向量中`n!`，并即时计算点，并将这些值插入置换公式对于行列式：

    ![置换行列式](../Images/e1638f42f376af1cea3faeaa5160ebd6.png)

    这里的问题是这是`O(N!)`矩阵的大小，所以对于我来说这将是`O((n!)!)`. 什么时候`n=10`，`(n!)! = 3,628,800!`甚至考虑这样做的方式都很大。

2.  使用 LU 分解计算行列式。幸运的是，我的矩阵的主对角线是非零的，所以这是可行的。由于这是`O(N^3)`矩阵的大小，这变得`O((n!)^3)`更接近可行。但是，问题在于它需要我存储整个矩阵，这对内存造成了严重压力，更不用说运行时间了。所以这也行不通，至少在没有一点聪明的情况下是行不通的。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:27:40.090

我不清楚你的问题是空间还是时间。显然，两者来回交易。如果您只想知道行列式是否为正，那么您绝对应该进行`LU`分解。原因是如果`A = LU`有`L`下三角和`U`上三角，那么

```
det(A) = det(L) det(U) = l_11 * ... * l_nn * u_11 * ... * u_nn 
```

所以您只需要确定 or 的任何主对角线条目`L`是否`U`是`0`。

为了进一步简化，使用 Doolittle 算法，其中`l_ii = 1`. 如果算法在任何时候发生故障，则矩阵是奇异的，因此您可以停止。这是要点：

```
for k := 1, 2, ..., n do {
  for j := k, k+1, ..., n do {
    u_kj := a_kj - sum_{s=1...k-1} l_ks u_sj;
  }
  for i = k+1, k+2, ..., n do {
    l_ik := (a_ik - sum_{s=1...k-1} l_is u_sk)/u_kk;
  }
} 
```

关键是您可以同时计算第`i`th 行`U`和第`i`th 列`L`，并且您只需要知道上一行/列即可继续前进。通过这种方式，您可以尽可能多地并行处理并尽可能少地存储。由于您可以根据需要计算条目`a_ij`，因此这需要您存储两个长度向量，`n`同时生成另外两个长度向量`n`（ 的行`U`、 的列`L`）。该算法需要`n^2`时间。您也许可以找到更多技巧，但这取决于您的空间/时间权衡。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T09:27:32.497

不确定我是否关注了您的问题；是（或减少到）以下？

您有两个包含 n 个数字的向量，将它们称为`x`和`c`，然后矩阵元素是 的乘积`k`，`(x_k+c_k)`每一行/列对应于`x`和的不同顺序`c`？

`x`如果是这样，那么我相信只要在或中有重复值，矩阵就会是奇异的`c`，因为矩阵将具有重复的行/列。`n`在具有不同值的较小的蒙特卡罗上尝试一堆蒙特卡洛`x`，`c`看看这种情况是否通常是非奇异的——如果这对于 6 是真的，那么对于 10 来说很可能是真的。

就蛮力而言，您的方法：

1.  是非首发
2.  将更快地工作（应该是几秒钟`n=7`），尽管您可能想尝试 SVD 而不是 LU，这将更好地让您知道矩阵的表现如何。

# jquery - 输入动画文本

> ID：15014066
> 
> 赞同：13
> 
> 时间：2013-02-21T23:14:50.520
> 
> 标签：jquery, animation, text, typing

我有 DIV 标签，里面有文字。是否可以在具有打字效果的循环中更改文本内容，在其中键入，然后向后删除字母并从新文本重新开始？这可以用jquery吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-21T23:20:38.037

只是一个简单的方法：

```
$("[data-typer]").attr("data-typer", function(i, txt) {

  var $typer = $(this),
    tot = txt.length,
    pauseMax = 300,
    pauseMin = 60,
    ch = 0;

  (function typeIt() {
    if (ch > tot) return;
    $typer.text(txt.substring(0, ch++));
    setTimeout(typeIt, ~~(Math.random() * (pauseMax - pauseMin + 1) + pauseMin));
  }());

});
```

```
/* PULSATING CARET */
[data-typer]:after {
  content:"";
  display: inline-block;
  vertical-align: middle;
  width:1px;
  height:1em;
  background: #000;
          animation: caretPulsate 1s linear infinite; 
  -webkit-animation: caretPulsate 1s linear infinite; 
}
@keyframes caretPulsate {
  0%   {opacity:1;}
  50%  {opacity:1;}
  60%  {opacity:0;}
  100% {opacity:0;}
}
@-webkit-keyframes caretPulsate {
  0%   {opacity:1;}
  50%  {opacity:1;}
  60%  {opacity:0;}
  100% {opacity:0;}
}
```

```
<span data-typer="Hi! My name is Al. I will guide you trough the Setup process."></span>
<h3 data-typer="This is another typing animated text"></h3>

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
```

所以基本上 jQuery 获取`data-text`你的元素，逐个字符地插入，而`:after`那个 SPAN 的 CSS3 动画元素没有什么是脉动的“插入符号”。

另请参阅：[在 JavaScript 中生成两个数字之间的随机数](https://stackoverflow.com/questions/4959975/generate-random-number-between-two-numbers-in-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:20:36.563

Jquery 的 text() 方法允许您设置元素的文本。

[http://api.jquery.com/text/](http://api.jquery.com/text/)

您可以通过在循环中调用 this 来使用它来为内容设置动画，并为其提供您希望在每一帧中看到的内容。

var frames = ['t_', 'ty_', 'typ_', 'type_']

```
// loop over frames ... inner part reads frame and prints it
// use setInterval, etc.
$('#my-div').text( frames[i] ); 
```

通过拆分文本元素和操纵字符，我做了更复杂的事情，但我认为在你的情况下这将是矫枉过正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-11T09:09:34.200

## 打字效果+擦除效果+闪烁光标

我修改了*Simon Shahriveri*代码盘以进一步添加光标的闪烁效果。它也与 IE 兼容。
这是最终结果： [https ://codepen.io/jerrygoyal/pen/vRPpGO](https://codepen.io/jerrygoyal/pen/vRPpGO)

**HTML：**

```
<h1>
  <a href="" class="typewrite" data-period="2000" data-type='[ "Hi, I am Jerry.", "I am Creative.", "I Love Design.", "I Love to Develop." ]'>
    <span class="wrap"></span>
  </a>
</h1> 
```

**CSS：**

```
body {
  background-color:#ce6670;
  text-align: center;
  color:#fff;
  padding-top:10em;
}

* { color:#fff; text-decoration: none;}

.wrap{
   animation: caret 1s steps(1) infinite;
   border-right: 0.08em solid #fff;
  padding-right: 1px;
}
@keyframes caret {
  50% {
    border-color: transparent;
  }
} 
```

**JS：**

```
var TxtType = function(el, toRotate, period) {
        this.toRotate = toRotate;
        this.el = el;
        this.loopNum = 0;
        this.period = parseInt(period, 10) || 2000;
        this.txt = '';
        this.tick();
        this.isDeleting = false;
    };

    TxtType.prototype.tick = function() {
        var i = this.loopNum % this.toRotate.length;
        var fullTxt = this.toRotate[i];

        if (this.isDeleting) {
        this.txt = fullTxt.substring(0, this.txt.length - 1);
        } else {
        this.txt = fullTxt.substring(0, this.txt.length + 1);
        }

        this.el.innerHTML = '<span class="wrap">'+this.txt+'</span>';

        var that = this;
        var delta = 200 - Math.random() * 100;

        if (this.isDeleting) { delta /= 2; }

        if (!this.isDeleting && this.txt === fullTxt) {
        delta = this.period;
        this.isDeleting = true;
        } else if (this.isDeleting && this.txt === '') {
        this.isDeleting = false;
        this.loopNum++;
        delta = 500;
        }

        setTimeout(function() {
        that.tick();
        }, delta);
    };

    window.onload = function() {
        var elements = document.getElementsByClassName('typewrite');
        for (var i=0; i<elements.length; i++) {
            var toRotate = elements[i].getAttribute('data-type');
            var period = elements[i].getAttribute('data-period');
            if (toRotate) {
              new TxtType(elements[i], JSON.parse(toRotate), period);
            }
        }

    }; 
```

* * *

另一种仅使用函数而不是 js 原型的方法：[https ://codepen.io/jerrygoyal/pen/vRPpGO](https://codepen.io/jerrygoyal/pen/vRPpGO)

# windows - 将清单嵌入到 exe 失败，参数无效

> ID：15014067
> 
> 赞同：1
> 
> 时间：2013-02-21T23:14:51.563
> 
> 标签：windows, manifest, exe, administrator

我想向 .exe 文件添加一个清单，以便它停止要求用户在 Windows 7 中以管理员身份运行。

我按照[本教程](http://www.aneef.net/2009/06/29/request-uac-elevation-for-net-application-managed-code/)进行了操作，该教程似乎完全符合我的要求，只是在执行相同操作时出现此错误并且找不到解决方案：

```
mt.exe : general error c101008d: Failed to write the updated manifest to the resource of file "C:\install.exe". The parameter is incorrect. 
```

这是我使用的命令：

```
mt.exe –manifest C:\install.exe.manifest -outputresource:C:\install.exe;1 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:11:22.697

这就是我解决这个问题的方法，它实际上是一个语法问题：

```
mt.exe –manifest "C:\install.exe.manifest" -outputresource:"C:\install.exe;#1" 
```

还有一个更好的解决方案是直接使用 Visual Studio 编辑 .exe。

# android - 在android中编码视频文件并在php中解码

> ID：15014068
> 
> 赞同：1
> 
> 时间：2013-02-21T23:14:52.373
> 
> 标签：android

在我的 android 应用程序中，我像这样将视频编码为 base 64。

文件文件=新文件（路径）；
InputStream is = new FileInputStream(file);
int 长度 = (int)file.length();
字节[]字节=新字节[长度]；
int a=is.read(bytes,0,length);
String str = Base64.encodeToString(bytes, 0);
is.close();
//将字符串发送到我的服务器....

PHP
$str=$_POST['str'];
$var=base64_decode($str);
$fp = fopen('2013-02-21_14-52-35_968.mp4', 'w');
fwrite($fp,$var);
fclose($fp);

所以当视频文件被写入时，我无法打开它。我如何正确编码视频并从 PHP 解码？或者我缺少什么，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:52:49.657

我解决了我的问题，问题是我只编码了文件的一部分。这是我的解决方案：

```
$fp=fopen("/address".$filename,'w')
 while($row=mysql_fetch_array($getChunks)){
 $chuncks=$row['chunkpart'];
 $var=base64_decode($chunks);
  fwrite($fp,$var)
 } 
```

# stm32 - Jtag 无效确认

> ID：15014070
> 
> 赞同：1
> 
> 时间：2013-02-21T23:15:03.130
> 
> 标签：stm32, jtag, openocd

我在带有 sysfsgpio bitbang 接口的 ARM9 上使用 OpenOCD，并尝试调试 Cortex M3 stm32f103 微控制器。使用的操作系统是嵌入式 debian。不幸的是，在获得设备 ID 后，我不断从目标收到错误的 ACK（警告，jtag DP 事务中的无效 ACK 0x4）。

您对导致问题的原因有任何见解吗？我在示波器上绘制了每个信号，没有发现任何问题，我还使用 olimex jtag-key 检查了目标设备，它正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:22:16.487

微控制器和 TDI 线上的 JTAG 连接器之间存在错误接触，但是目标设备正在发送其 ID，因为它不需要特定指令...

# python - 用 argparse 杀死解释器

> ID：15014074
> 
> 赞同：0
> 
> 时间：2013-02-21T23:15:37.373
> 
> 标签：python, windows, python-2.7, argparse

我正在测试一些 argparse 代码。我想要一个可选参数，它`n`从选择列表中收集输入的数量。所以，我写道：

```
import argparse

modules = ["geo", "loc"]
parser = argparse.ArgumentParser()
parser.add_argument("--modules", nargs='*', choices=modules) 
```

有了这个设置，我可以可靠地完全杀死解释器。

如果您传递一组有效的参数，它可以正常工作：

```
>>> parser.parse_args("--module geo loc geo".split())
Namespace(modules=['geo', 'loc', 'geo']) 
```

但是如果你传入一个未形成的参数，它会完全杀死 python：

```
>>> parser.parse_args("--module geo metro".split())
usage: [-h] [--modules [{geo,loc} [{geo,loc} ...]]]
: error: argument --modules: invalid choice: 'metro' (choose from 'geo', 'loc')
PS C:\Users\myname\mycode> 
```

我的问题有两个：

1.  这是预期的行为吗？如果是这样，这是什么原因？
2.  我可以使用这段代码吗，因为我不介意我的程序是否因格式错误的参数而死？还是有一些令人信服的理由来避免这种情况？

作为说明，我在 Windows 7 上使用 Python2.7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:22:24.487

1.  是的，这是有意的，并记录在案：

    > 在解析命令行时，parse_args() 会检查各种错误，包括不明确的选项、无效类型、无效选项、错误数量的位置参数等。当遇到此类错误时，它会退出并打印错误以及使用信息：

    这个想法是，如果用户给出了一个您不知道如何处理的无效选项或参数，最好的选择是放弃而不是事后猜测用户的实际意图。

2.  如果你不介意，那应该没问题吧？除非您知道实现不同行为的原因，否则您的程序与所有平台上所有行为良好的命令行工具完全一致。

如果您确实想实现不同的行为，请捕获可能引发的`SystemExit`异常。`parse_args`

（我能想到的唯一与我刚才描述的行为方式不同的程序是版本控制工具 Git，它确实会尝试猜测用户的意思并打印出它的猜测。但它仍然会退出。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:19:04.763

`argparse`专为从命令行运行 Python 脚本时使用而设计。这就是为什么无效的参数会导致程序退出。

这种行为几乎与所有 shell (bash/sh/dos/etc.) 实用程序一致。无效的命令行参数会导致程序退出并显示错误字符串和（可选）使用消息。

# memory-leaks - clGetPlatformIDs 内存泄漏

> ID：15014078
> 
> 赞同：4
> 
> 时间：2013-02-21T23:15:59.170
> 
> 标签：memory-leaks, opencl

我正在使用 NVIDIA 硬件在 Ubuntu 12.04 上测试我的代码。

没有实际的 OpenCL 处理发生；但我的初始化代码仍在运行。此代码调用 clGetPlatformIDs。但是，Valgrind 报告了内存泄漏：

```
==2718== 8 bytes in 1 blocks are definitely lost in loss record 4 of 74
==2718==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==2718==    by 0x509ECB6: ??? (in /usr/lib/nvidia-current/libOpenCL.so.1.0.0)
==2718==    by 0x50A04E1: ??? (in /usr/lib/nvidia-current/libOpenCL.so.1.0.0)
==2718==    by 0x509FE9F: clGetPlatformIDs (in /usr/lib/nvidia-current/libOpenCL.so.1.0.0) 
```

我不知道这甚至是可能的。这可以解决吗？请注意，目前没有进行特殊的取消初始化——在这之后我需要调用一些东西吗？[文档](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/clGetPlatformIDs.html)没有提到必须释放任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T20:31:47.350

关于：“检查一下：devgurus.amd.com/thread/136242。valgrind 无法通过设计处理自定义内存分配器，OpenCL 可能会使用它”

从给出的链接中引用：“虽然在出口处不释放池的行为可以称为库的错误。”

如果您想创建一个内存池并从中分配，请继续；但你仍然应该正确地释放它。整个内存池的复杂性不亚于常规内存引用的复杂性，并且至少应该得到与常规引用相同的关注，如果不是更多的话。此外，8 字节结构不太可能是内存池。

如果 clGetPlatformIds 旨在返回分配的内存，Tim Child 会对您如何使用它有所了解。但是，阅读[http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/clGetPlatformIDs.html](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/clGetPlatformIDs.html)我并没有充分相信应该是这种情况。

有问题的泄漏可能严重也可能不严重，可能会或可能不会通过连续调用累积，但您可能只能选择向 nvidia 报告错误，希望他们修复它或找到不同的 opencl 实现进行开发。尽管如此，opencl 库可能有理由创建对从 valgrind 的角度来看未使用的数据的引用。

可悲的是，这仍然给我们留下了由我们无法控制的外部因素引起的内存泄漏，并且仍然给我们留下了过多的 valgrind 输出。

假设您足够确定您不对这次泄漏负责（例如，我们知道一个事实，即一位 nvidia 工程师在 OpenCL.so 中分配了一个随机值，他并没有为了惹恼您而取消分配）。Valgrind 有一个标志--gen-suppressions=yes，您可以使用它来抑制有关特定警告的警告，您可以使用--suppressions=$filename 将其反馈给valgrind。阅读 valgrind 页面以了解有关其工作原理的更多详细信息。

不过要非常小心使用抑制。显然，抑制错误并不能修复它们，并且自由使用该机制将导致您抑制代码产生的错误，而不是 nvidia 或 valgrind。不要压制您不确定它们来自何处的警告，或定期重申您的压制。

# java - 手动处理 SOAP/JAX-WS 请求

> ID：15014080
> 
> 赞同：1
> 
> 时间：2013-02-21T23:16:01.943
> 
> 标签：java, jakarta-ee, soap, jax-ws

有没有办法手动或按请求处理 SOAP 请求？由于现有系统中一些非常愚蠢的技术原因，我不能只将 JAX-WS 服务发布到通过标准端点工厂创建的端点。我的情况有点混乱，因为我基本上从 ServerSocket 收到了一个原始 InputStream 并被告知要处理它。

流中的数据是从发出 SOAP 请求的客户端发送的。客户端的开发人员提供了一堆 WSDL 和 XSD，用于使用 wsimport 和 xjc 生成必要的服务器端类。所有这些都是 JAX-WS，我想尽可能多地利用 JAX-WS 来最大限度地减少我必须做的工作。

有谁知道从哪里开始寻找如何做到这一点？甚至可能吗？目前我最好的猜测是我必须手动实现客户端点或提供者。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:28:52.147

您可以使用以下步骤处理原始输入。只需像解析任何 XML 流一样解析传入的消息

```
 try{ //throws a bunch of XML parsing related exceptions
      XMLInputFactory xFactory = XMLInputFactory.newFactory();
      XMLStreamReader xStream = xFactory.createXMLStreamReader(req.getInputStream());
      //Start skipping tags til you get to the message payload
      for(int nodeCount=0; nodeCount < 3; nodeCount++){
             xStream.nextTag(); //Jump <Envelope/>,<Body/>,<theMessageNode/>   
          }
      //You're now at the level of the actual class; Now unmarshal the payload  

      JAXBContext ctxt  = JAXBContext.newInstance(YourResponseClass.class);
      Unmarshaller um = ctxt.createUnmarshaller();
      JAXBElement<YourResponseClass.class> elem = um.unmarshal(xStream, YourResponseClass.class);             
      YourResponseClass theObj = elem.getValue();

     }
    catch(Exception ex) {

    } 
```

# android - NFC 标签类型 1 保护

> ID：15014083
> 
> 赞同：0
> 
> 时间：2013-02-21T23:16:13.247
> 
> 标签：android, nfc

我从 NXP 半导体获得了 Type 1 NFC TAG ...我尝试了许多 android 应用程序来重置或格式化，但从未工作过，它显示 Protected 或 Blocked。问题是，我怎样才能破解 NFC 卡保护。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T05:40:32.160

Type1 NFC 标签具有简单但有效的保护机制。

标签上有一次性可编程锁定位。每个锁定位使标签上的 8 个字节数据只读（简化视图）。

一旦这些位被设置，存储器就永远被写保护。将锁定位想象成保险丝：一旦它们被熔断，就无法解开它们。也没有将标签置于读/写状态左右的万能钥匙。

长话短说：Type1 NFC 标签上没有什么可以破解的。

# spring - Spring JMS：每个 DefaultMessageListenerContainer 部署花费的时间都比以前长

> ID：15014087
> 
> 赞同：3
> 
> 时间：2013-02-21T23:16:21.790
> 
> 标签：spring, jms, jetty, activemq, spring-jms

我们正在使用 Active MQ 5.6.0，并配置了许多 JMS 消息侦听器（目前 17 个），每个都使用 Spring 3.1.1 DefaultMessageListenerContainer，部署到 Jetty 7。

首先，消息路由和处理工作正常并且执行良好。问题在于**部署**Spring 配置所需的时间：每次部署都比之前的部署时间长，所以我们谈论的是多项式时间而不是线性时间。如果我们达到 30 左右，那将是严重的。

示例（修剪过的）日志文件显示了 17 个部署似乎相互争夺连接，直到 - 超过 2.5 分钟后 - 全部连接：

```
22:33:21,147 - (Def...r) - JMS message listener invoker needs to establish shared Connection
22:33:22,148 - (Def...r) - JMS message listener invoker needs to establish shared Connection
22:33:23,160 - (Def...r) - JMS message listener invoker needs to establish shared Connection
22:33:23,166 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerA' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:33:24,160 - (Def...r) - JMS message listener invoker needs to establish shared Connection
22:33:24,172 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerB' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:33:25,173 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerC' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:33:26,184 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerD' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:33:27,166 - (Def...r) - JMS message listener invoker needs to establish shared Connection
[*snip*]
22:35:25,135 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerI' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:26,146 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerH' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:27,167 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerD' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:28,178 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerE' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:29,179 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerF' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:31,191 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerG' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:32,192 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerH' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:33,203 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerI' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:34,214 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerJ' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:35,225 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerK' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:36,229 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerL' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:37,230 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerM' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:38,242 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerN' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:40,266 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerC' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:41,277 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerB' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:42,280 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerA' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:44,292 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerN' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:45,293 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerM' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:46,294 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerL' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:47,300 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerK' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:48,282 - (Def...r) - JMS message listener invoker needs to establish shared Connection
22:35:48,311 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerJ' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:49,322 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerI' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:50,322 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerH' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:51,323 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerG' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:53,345 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerF' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:54,366 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerE' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:55,367 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerD' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:56,378 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerH' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:57,389 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerI' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:58,394 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerJ' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:35:59,400 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerK' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:00,396 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerL' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:01,409 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerM' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:02,412 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerN' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:03,421 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerO' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:04,422 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerA' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:05,426 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerB' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:06,437 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerC' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:09,471 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerO' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:10,472 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerN' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:11,483 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerM' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:12,483 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerL' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:13,459 - (Def...r) - JMS message listener invoker needs to establish shared Connection
22:36:13,494 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerK' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:14,515 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerJ' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:15,516 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerI' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:16,518 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerH' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:17,530 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerD' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:18,541 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerE' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:19,542 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerF' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:21,546 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerG' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:22,557 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerH' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:23,569 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerI' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:24,580 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerJ' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:25,581 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerK' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:26,582 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerL' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:27,593 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerM' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:28,594 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerN' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:29,605 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerO' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:30,616 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerP' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:32,638 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerC' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:33,639 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerB' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:34,650 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerA' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:36,674 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerP' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:37,685 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerO' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:38,805 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerN' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:39,806 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerM' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:40,653 - (Def...r) - JMS message listener invoker needs to establish shared Connection
22:36:40,807 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerL' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:41,824 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerK' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:42,825 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerJ' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:43,837 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerI' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:44,838 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerH' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:45,851 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerG' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:47,863 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerF' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:48,874 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerE' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:49,875 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerD' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:50,876 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerH' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:51,891 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerI' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:52,902 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerJ' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:53,913 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerK' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:54,924 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerL' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:55,925 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerM' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:56,926 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerN' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:57,937 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerO' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:58,935 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerP' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:36:59,936 - (Def...r) - Could not refresh JMS Connection for destination 'queue://HandlerQ' - retrying in 5000 ms. Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect
22:37:00,520 - (Def...r) - Successfully refreshed JMS Connection
22:37:00,520 - (Def...r) - Successfully refreshed JMS Connection
22:37:00,520 - (Def...r) - Successfully refreshed JMS Connection
22:37:00,520 - (Def...r) - Successfully refreshed JMS Connection
22:37:00,520 - (Def...r) - Successfully refreshed JMS Connection
22:37:00,520 - (Def...r) - Successfully refreshed JMS Connection
22:37:00,520 - (Def...r) - Successfully refreshed JMS Connection
22:37:00,520 - (Def...r) - Successfully refreshed JMS Connection
22:37:00,520 - (Def...r) - Successfully refreshed JMS Connection
22:37:00,520 - (Def...r) - Successfully refreshed JMS Connection
22:37:00,520 - (Def...r) - Successfully refreshed JMS Connection
22:37:00,520 - (Def...r) - Successfully refreshed JMS Connection 
```

为简洁起见，我不会发布每个 Spring bean，但这里是重要的部分：

```
<jee:jndi-lookup id="srcConnectionFactory" jndi-name="${jndi.jms.connfactory}">
    <jee:environment>
        java.naming.factory.initial = ${jndi.jms.naming.factory.initial}
        java.naming.provider.url = ${jndi.jms.naming.url}
    </jee:environment>
</jee:jndi-lookup>

<bean id="connectionFactory" class="org.springframework.jms.connection.CachingConnectionFactory">
    <property name="targetConnectionFactory" ref="srcConnectionFactory"/>
    <property name="cacheConsumers" value="false"/>
    <property name="reconnectOnException" value="true"/>
    <property name="sessionCacheSize" value="20"></property>
</bean>

<jee:jndi-lookup id="handlerA_Dest" jndi-name="handlerA">
    <jee:environment>
        java.naming.factory.initial = ${jndi.jms.naming.factory.initial}
        java.naming.provider.url = ${jndi.jms.naming.url}
        queue.handlerA = handlerA
    </jee:environment>
</jee:jndi-lookup>

    [x 17]

<bean id="handlerA_Container" class="org.springframework.jms.listener.DefaultMessageListenerContainer"
    p:connectionFactory-ref="connectionFactory"
    p:messageListener-ref="handlerA"
    p:destination-ref="handlerA_Dest">
    <property name="concurrentConsumers"><value>10</value></property>
    <property name="maxConcurrentConsumers"><value>10</value></property>
    <property name="idleConsumerLimit"><value>5</value></property>
</bean>     

    [x 17] 
```

知道为什么这些容器应该竞争吗？

不幸的是，这种`MessageSelector`方法（不再）不是我们的选择。每种消息类型都有一个侦听器。

* * *

**更新**确实，严格来说，MQ 代理在此部署开始时确实已关闭，但它被部署到同一个 Jetty 中（这一切都发生在 Maven 集成测试阶段），所以即使有一个短暂的时期经纪人第二个开始，我不希望它迟到2-3分钟。

我所看到的看起来真的像是代理部署被这个 Spring 部署“阻止”了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:27:30.397

这与 Spring 或客户端之间的争用无关。

经纪人从`22:33:23,166`直到`22:37:00,520`.

```
Cause: Could not connect to broker URL: tcp://0.0.0.0:61616\. Reason: java.net.ConnectException: Connection refused: connect 
```

在我看来，一旦代理可用，它们就会在 1 毫秒内全部连接。

# iphone - 是否可以在 IOS6 中为通知中心创建小部件？

> ID：15014088
> 
> 赞同：0
> 
> 时间：2013-02-21T23:16:23.537
> 
> 标签：iphone, ios6, widget, notifications

伙计们！

是否可以在没有越狱的情况下在 IOS6 中为通知中心创建小部件？

十分感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:17:34.300

不，没有越狱是不可能的。

# objective-c - Sqlite3 语法格式可能不正确

> ID：15014090
> 
> 赞同：-1
> 
> 时间：2013-02-21T23:16:42.883
> 
> 标签：objective-c, sqlite

我有这个 sqlite3 查询，由于某种原因，它的结构可能不正确。我已将其插入到我正在使用目标 c 在 IOS6 中处理的应用程序中：

```
const char *sql = "SELECT id, Wine, Rating, Photo FROM 1tbl" 
```

有人可以帮帮我吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:30:23.087

鉴于您对问题的详细解释，我将尝试猜测：

未调用您的表，`1tbl`因为它不是有效的表名。

# xcode - 了解 SenTestingKit 日志输出

> ID：15014091
> 
> 赞同：0
> 
> 时间：2013-02-21T23:16:55.313
> 
> 标签：xcode, unit-testing, sentestingkit

我正在尝试完全理解我的单元测试生成的最终控制台输出：

```
Test Suite 'Multiple Selected Tests' finished at 2013-02-21 22:54:57 +0000.
Executed 6 tests, with 0 failures (0 unexpected) in 0.034 (0.052) seconds 
```

大部分是不言自明的，但最后一个我不确定。具体来说`in 0.034 (0.052) seconds`。它不能是平均值，因为每个测试都显示如下输出：

```
Test Suite 'MMProductLogicTests' started at 2013-02-21 22:54:57 +0000 Test Case
-[MMProductLogicTests testProductMissingFormURL]' started.
Test Case '-[MMProductLogicTests testProductMissingFormURL]' passed (0.005 seconds).
Test Suite 'MMProductLogicTests' finished at 2013-02-21 22:54:57 +0000. 
```

所有六项测试都表明`passed (0.005 seconds)`，平均值没有意义。`0.034`似乎是执行的总时间，我对`(0.052)`代表什么感到困惑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:34:57.457

0.034 是“测试持续时间”；0.052 是“总持续时间”。

这是 SenTestingKit 源代码（旧版本）：

```
 + (void) testSuiteDidStop:(NSNotification *) aNotification
    {
        SenTestRun *run = [aNotification run];
        testlog ([NSString stringWithFormat:@"Test Suite '%@' finished at %@.\nPassed %d test%s, with %d failure%s (%d unexpected) in %.3f (%.3f) seconds\n",
            [run test],
            [run stopDate],
            [run testCaseCount], ([run testCaseCount] != 1 ? "s" : ""),
            [run totalFailureCount], ([run totalFailureCount] != 1 ? "s" : ""),
            [run unexpectedExceptionCount],
            [run testDuration],
            [run totalDuration]]);
    } 
```

不幸的是，对代码的进一步检查并没有揭示两者之间的差异。

# amazon-s3 - sbcl 与 clisp：USOCKET:TIMEOUT-ERROR。这两种实现访问 USOCKET 的方式不同吗？

> ID：15014094
> 
> 赞同：4
> 
> 时间：2013-02-21T23:17:03.237
> 
> 标签：amazon-s3, lisp, common-lisp

我有一个脚本，它使用 quicklisp 加载 zs3 以访问亚马逊的 S3。

当我使用 clisp 运行脚本时，`(zs3:bucket-exists-p "Test")`运行时会出现 USOCKET:TIMEOUT-ERROR。

但是，当我使用 sbcl 运行它时，它运行正常。

他们访问 usocket 的方式不同吗？

各自的优缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:54:18.110

usocket 是一个兼容层，它隐藏了每个 Lisp 实现的底层套接字 API。在某些情况下肯定会出现阻抗不匹配，但在大多数情况下它应该可以正常工作。

我怀疑 zs3 不经常与 CLISP 一起使用（或者可能根本不使用！），您会看到结果。另一方面，人们通常可以期望库在 SBCL 下得到很好的测试，因为这是最流行的实现。

另请注意，线程在 CLISP 中仍处于试验阶段；默认情况下不启用它们。套接字经常与线程混合的事实只会减少 CLISP + usocket 的相对使用。

# c++ - 可变参数模板扩展期间的 C++ 类型索引

> ID：15014096
> 
> 赞同：20
> 
> 时间：2013-02-21T23:17:15.257
> 
> 标签：c++, templates, c++11, variadic-templates

我有一个简单但令人生畏的问题，我自己无法解决。我有类似的东西

```
template<class T, class... Args>
T* create(SomeCastableType* args, size_t numArgs)
{
  return new T(static_cast<Args>(args[INDEX_OF_EXPANSION])...);
} 
```

假设`SomeCastableType`可以转换为任何类型。显然我无法得到的是`INDEX_OF_EXPANSION`。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-22T00:02:45.357

[指数把戏](http://loungecpp.wikidot.com/tips-and-tricks:indices)，耶~

```
template<class T, class... Args, std::size_t... Is>
T* create(U* p, indices<Is...>){
  return new T(static_cast<Args>(p[Is])...);
}

template<class T, class... Args>
T* create(U* p, std::size_t num_args){
  assert(num_args == sizeof...(Args));
  return create<T, Args...>(p, build_indices<sizeof...(Args)>{});
} 
```

当然，我强烈建议使用[智能指针](https://stackoverflow.com/q/8706192/500104)和 a`std::vector`而不是原始指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T23:23:06.110

你需要一个帮手：

```
#include <tuple>

template <typename T, bool, typename Tuple, unsigned int ...I>
struct helper
{
    static T * go(S * args)
    {
        return helper<T, sizeof...(I) + 1 == std::tuple_size<Tuple>::value,
                      Tuple, I..., sizeof...(I)>::go(args);
    }
};

template <typename T, typename ...Args, unsigned int ...I>
struct helper<T, true, std::tuple<Args...>, I...>
{
    static T * go(S * args)
    {
        return new T(static_cast<Args>(args[I])...);
    }
};

template <typename T, typename ...Args>
T * create(S * args)
{
    return helper<T, sizeof...(Args) == 0, std::tuple<Args...>>::go(args);
} 
```

*编辑：*经过测试，似乎有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-03-25T17:58:00.250

使用 c++17 的 constexpr if，我们可以获得索引查找函数的更易读/更易理解的实现（我从来没有设法理解这里的其他答案）：

```
template<typename Target, typename ListHead, typename... ListTails>
constexpr size_t getTypeIndexInTemplateList()
{
    if constexpr (std::is_same<Target, ListHead>::value)
        return 0;
    else
        return 1 + getTypeIndexInTemplateList<Target, ListTails...>();
} 
```

这可以按如下方式使用：

```
size_t index = getTypeIndexInTemplateList<X,  Foo,Bar,X,Baz>(); // this will return 2 
```

或者，如果您有可变模板类型并希望在其中获取索引：

```
template<typename... Types>
class Container
{
public:
    size_t getIndexOfType<typename T>() {  return getTypeIndexInTemplateList<T, Types...>(); }
};

...

Container<Foo, Bar, X, Baz> container;
size_t container.getIndexOfType<X>(); // will return 2 
```

它的工作方式是递归地从列表中消除类型。所以第一个例子的调用顺序基本上是：

```
getTypeIndexInTemplateList<X,  Foo,  Bar,X,Baz>() // ListHead = Foo, ListTails = Bar,X,Baz
getTypeIndexInTemplateList<X,  Bar,  X,Baz>()     // ListHead = Bar, ListTails = X, Baz
getTypeIndexInTemplateList<X,  X,    Baz>()       // ListHead = X, so now we return. Recursive addition takes care of calculating the correct index 
```

该函数是 constexpr，所以这将在编译时执行，它在运行时只是一个常量。

如果您请求列表中不存在的类型，它将产生编译错误，因为它会尝试使用太少的模板参数调用函数。当然，如果该类型不止一次出现，这只会返回列表中该类型的第一个实例的索引。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-23T08:54:26.487

> 假设`SomeCastableType`可以转换为任何类型。显然我无法得到的是`INDEX_OF_EXPANSION`。

从**C++14**开始，您可以使用帮助程序[在标准库的支持下](https://en.cppreference.com/w/cpp/utility/integer_sequence)执行@Xeo 提到*的索引技巧*，如下所示：`std::make_index_sequence`

```
template<class T, class... Args, std::size_t... Is>
T* create(SomeCastableType* p, std::index_sequence<Is...>)
{
    return new T(static_cast<Args>(p[Is])...);
}

template<class T, class... Args>
T* create(SomeCastableType* p, std::size_t num_args)
{
    return create<T, Args...>(p, std::make_index_sequence<sizeof...(Args)>());
} 
```

# c# - 无法在 Web 应用程序中通过 VPN 和 CrossDomain 连接到远程 SQL 数据库

> ID：15014097
> 
> 赞同：0
> 
> 时间：2013-02-21T23:17:21.907
> 
> 标签：c#, cross-domain, database-connection, connection-string, vpn

我有一个需要连接到客户端托管的数据库的 Web 应用程序。我的公司和客户之间配置了 VPN。所有端口都已打开。通过 SQL Server Management Studio 连接工作正常。我们只需要指定当前数据库中的域名（例如`MYSERVER.mydomain`）。

相反，当开发人员尝试在调试模式下运行应用程序时，不会建立连接。

连接字符串的类型为：connectionString =`"Data Source = <SERVERNAME> \ <instance name>; Initial Catalog = <BaseName>; User ID = [login] Password = [password]"`

连接似乎没有成功，并引发以下异常：

`{"A network-related or instance-specific error occurred while Establishing a connection to SQL Server. The server was not found or was not accessible. Verify que le instance name is correct and SQL Server is configured That to allow remote connections. (Provider : SQL Network Interfaces, error: 26 - Error Locating Server / Instance Specified) "}`

我们尝试了以下更改：

  - 禁用防火墙客户端

  - 修改连接字符串：Persist Security Info = True

  - 修改connectionStrings：Connect Timeout = 120；

有人已经遇到过这个问题吗？在这一点上，任何想法都可能很棒......

非常感谢

# android - 有没有办法停止一个带有破折号的单词的自动换行？（即大开眼界）

> ID：15014098
> 
> 赞同：0
> 
> 时间：2013-02-21T23:17:22.650
> 
> 标签：android, textview

我现在正在使用 Android 进行编码，我想保留一个词，当它自动换行时，让我们一起说“大开眼界”。例如：

```
| Going to SF was an eye- |
| opening experience      | 
```

我不希望“大开眼界”被分裂。我希望它像这样保持在一起：

```
| Going to SF was an      |
| eye-opening experience  | 
```

有没有办法做到这一点？

# c# - WebGrid Asp.Net MVC 自定义寻呼机

> ID：15014117
> 
> 赞同：3
> 
> 时间：2013-02-21T23:18:59.100
> 
> 标签：c#, asp.net-mvc

我正在尝试扩展我的 webgrid 寻呼机，但是当我尝试调用该方法来寻呼系统时，会返回以下错误：

`System.Web.Helpers.WebGrid`不包含 for 的定义，也找不到接受第一个类型参数的`PagerList`扩展方法（您是否缺少 using 指令或程序集引用？）`PagerList``System.Web.Helpers.WebGrid`

寻找我的类构造函数：

```
 public static HelperResult PagerList(
                this WebGrid webGrid,
                WebGridPagerModes mode = WebGridPagerModes.NextPrevious | WebGridPagerModes.Numeric,
                string firstText = null,
                string previousText = null,
                string nextText = null,
                string lastText = null,
                int numericLinksCount = 5)
    {
        return PagerList(webGrid, mode, firstText, previousText, nextText, lastText, numericLinksCount, explicitlyCalled: true);
    } 
```

查找我的 Webgrid 声明和扩展类

```
var grdConvidados = new WebGrid(null, rowsPerPage: 10, ajaxUpdateContainerId: "deploymentsGrid", canSort: false, canPage:true);
    @grid.PagerList(mode: WebGridPagerModes.All) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:33:05.640

文章介绍了使用 WebGrid Web Helper 进行高效分页 - ASP.NET MVC

[http://www.dotnetcurry.com/ShowArticle.aspx?ID=618](http://www.dotnetcurry.com/ShowArticle.aspx?ID=618)

谢谢

# javascript - HTML5中属性的后备解决方案

> ID：15014124
> 
> 赞同：1
> 
> 时间：2013-02-21T23:19:12.453
> 
> 标签：javascript, html, fallback

这是 HTML5 中的一个 shema。HTML5 具有以下属性：自动对焦、占位符、日期等。并非所有浏览器都支持这些。因此我想做一些后备功能。我对JS，JQuery不太熟悉，但我真的很想学习:)

后备函数使用 elementSupportAttribute 函数来检查元素是否可以包含特定属性。当我不通过以下 if 语句运行方法时，代码工作正常：if (!(elementSupportsAttribute(element, attribute))，但是当我这样做时，代码根本不运行。有人能看到问题吗？

另外，我尝试使用 Modernizr 框架，但也没有管理。

```
<!DOCTYPE html>

<html lang="en"> 
    <head>
        <meta charset= "UTF-8" />
        <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link type="text/css" rel="stylesheet" href="Skjema.css"/>
        <title>Bestilling av busstur</title>

        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
        <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
        <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
        <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
        <link rel="stylesheet" href="/resources/demos/style.css" />

        <script type="text/javascript">

            $(document).ready(function() {
                if (!(elementSupportsAttribute('input','autofocus')) { 
                    $("#auto").focus();
                }
                if(!(elementSupportsAttribute('input','date')){  
                    $("#datepicker").datepicker();
                }
            });

            function elementSupportsAttribute(element,attribute){ 
                var test = document.createElement(element);
                if (attribute in test){
                    return true;
                }
                else {
                    return false;
                }
            }

            function finnAlleRequired(){
                if (!(elementSupportsAttribute('input', 'required')){
                    var alle = document.getElementsByClassName("requiredInput"); 
                    var print = "";
                    for (i=0;i<alle.length; i++){
                        var temp = alle[i]; 
                        if (temp.value==""){
                            print += temp.name + " "; 
                            temp.classList.add("error");

                        }
                        else {
                            temp.classList.remove("error"); 
                        } 
                    }

                }   
                if(!(elementSupportsAttribute('input','number')){
                    numberCheck();
                }
            }

            function numberCheck () {
                var number = document.getElementById("number").value;
                var min = 1;
                var max = 10;
                if(number < 1 || number > 10){
                    alert("Antallet personer du kan bestille til er mellom 1 og 10");
                }
            }

        </script>
    </head>
    <body>
        <header>
            <h1>
                Bestilling av busstur
            </h1>
        </header>
        <article>
            Vennligst fyll ut skjema under for å bestille busstur. Du kan bestille plasser for max 10 personer. Felter markert med <label class="required">*</label> er obligatoriske.
        </article>
        <form>
            <p>
                <label for="name">Navn:</label><br/>
                <input type="text"      name="name"     placeholder="Fullt navn" id="auto" autofocus>
            </p>
            <p> 
                <label class="required">*</label>
                <label for="email">E-post:</label><br/>
                <input type="email"     name="email"    placeholder="nordmann@norge.no" class="requiredInput" required>
            </p>
            <p>
                <label for="phone">Telefon:</label><br/>
                <input type="tel"       name="phone"    placeholder="11223344"> </p>
            <p>
                <label class="required">*</label>
                <label for="date">Dato:</label><br/>
                <input type="date"      name="date"     id="datepicker" class="requiredInput"required>
            </p>
            <p>
                <label class="required">*</label>
                <label for="numberPersons">Antall:</label><br/>
                <input type="number"    name="numberPersons"    min="1" max="10" value="2"  class="requiredInput" id="number" required>
            </p>
            <p>
                <label for="other">Hvor fant du informasjon om oss?</label><br/>
                <input type="text"      name="other"    placeholder="Facebook, Twitter, venner">
            </p>
            <p>
                <input type="submit"    value="Registrer" onclick="finnAlleRequired()">
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:26:28.050

您最好的选择可能是为您希望确保支持的功能找到*polyfill 。*

[https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)

> 另外，我尝试使用 Modernizr 框架，但也没有管理。

Modernizr 不会自动修复不受支持的功能，但*会让*您知道哪些功能可用并[有条件地加载](http://modernizr.com/docs/#load)回退。

> 当我不通过以下 if 语句运行方法时，代码可以正常工作：if (!(elementSupportsAttribute(element, attribute))，但是当我这样做时，代码根本不会运行。

我使用这个片段和几个 HTML 5 表单属性进行了快速测试。

```
function elementSupportsAttribute(element,attribute){ 
    var test = document.createElement(element);
    if (attribute in test){
        return true;
    }
    else {
        return false;
    }
}

alert(elementSupportsAttribute("input", "required")); 
```

该功能似乎在 Chrome 24 中有效：http: [//jsfiddle.net/eT5Ac/](http://jsfiddle.net/eT5Ac/)。

但是，最好使用 Modernizr 已建立的测试之一，特别是[Input Types Test](http://modernizr.com/download/)。

# javascript - Yeoman 使用谷歌应用引擎服务器

> ID：15014127
> 
> 赞同：5
> 
> 时间：2013-02-21T23:19:22.617
> 
> 标签：javascript, gruntjs, yeoman

我设置了[Yeoman 1.0 beta](http://yeoman.io/gettingstarted_1.0.html)来处理我的 js/css 任务。一切正常，如果我运行`grunt server`，它会启动一个静态服务器并将浏览器会话连接到端口 9000（livereload）。js/css concat，缩小也在工作。

现在，***有没有办法让它连接到谷歌应用引擎开发服务器***（而不是启动静态服务器）。服务器在 localhost 的 8080 端口上运行，我希望 grunt 在监视下的 css/js 文件上重新加载网页。这些文件将由 GAE 服务器提供。

我`rolling your own`在**grunt-contrib-connect** [文档](https://github.com/gruntjs/grunt-contrib-connect#roll-your-own)中看到了一个部分，但不确定它是否意味着外部服务器。据我所知，这些是来自 Gruntfile.js 的相关配置

```
connect: {
      livereload: {
        options: {
          port: 8080, //*** was 9001 originally ** 
          middleware: function (connect) {
            return [
              lrSnippet,
              mountFolder(connect, '.tmp'),
              mountFolder(connect, yeomanConfig.app)
            ];
          }
        }
      }, 
```

当我将端口号更改为 8080 并尝试启动时，显然会出错。

> 致命错误：端口 8080 已被另一个进程使用。

所以，我不想启动新服务器，而是通过已经运行的 GAE 服务器连接。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T00:37:52.410

为了使用 GAE 服务器而不是 nodejs 服务器，我们需要执行以下操作。
* 编译你的less/coffeescript，concat[, minify]，将你的代码复制到应用引擎代码所在的位置。
* 在 grunt.js 中创建一个任务来生成一个 shell 命令来运行应用引擎。

这是我用作参考的示例。[https://github.com/cowboy/grunt/tree/master/tasks](https://github.com/cowboy/grunt/tree/master/tasks)

关注 grunt.js 文件可能会有所帮助！

```
module.exports = function(grunt) {
    grunt.initConfig({
    ....
    });

    grunt.registerTask('appengine-update', 'Upload to App Engine.', function() {
        var spawn = require('child_process').spawn;
        var PIPE = {stdio: 'inherit'};
        var done = this.async();

        spawn('appcfg.py', ['update', 'build/task-manager-angular'], PIPE).on('exit', function(status) {
            done(status === 0);
        });
   });
   grunt.registerTask('clean', 'Clean the whole build directory.', function() {
        require('child_process').exec('rm -rdf build', this.async());
   });

   grunt.registerTask('run', 'Run app server.', function() {
       var spawn = require('child_process').spawn;
       var PIPE = {stdio: 'inherit'};
       var done = this.async();
       spawn('dev_appserver.py', ['.'], PIPE).on('exit', function(status) {
          done(status === 0);
       });
    });
});

//....
//Other settings
//....

grunt.loadTasks('tasks');
grunt.loadNpmTasks('grunt-coffeelint');
grunt.registerTask('build', 'coffee less concat');
grunt.registerTask('deploy', 'coffee less concat build appengine-update');
grunt.registerTask('default', 'coffee less');
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-05T07:28:00.910

[为 Grunt](https://npmjs.org/package/grunt-gae)找到了这个Google App Engine 管理插件

# node.js - util.inherits - 如何在实例上调用 super 的方法？

> ID：15014133
> 
> 赞同：19
> 
> 时间：2013-02-21T23:19:49.013
> 
> 标签：node.js, inheritance

我正在使用`util.inherits` [node.js 中的方法，](http://nodejs.org/docs/latest/api/util.html#util_util_inherits_constructor_superconstructor)但似乎无法获得所需的行为。

```
var util = require("util");

function A() {
  this.name = 'old';
}

A.prototype.log =  function(){
  console.log('my old name is: '+ this.name);
};

function B(){
  A.call(this);
  this.name = 'new';
}

util.inherits(B, A);

B.prototype.log = function(){
  B.super_.prototype.log();
  console.log('my new name is: ' + this.name);
}

var b = new B();
b.log(); 
```

结果是：

```
my old name is: undefined 
my new name is: new 
```

但是我想要的是：

```
my old name is: new 
my new name is: new 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-22T00:08:07.097

以下是如何实现您正在寻找的东西：

```
B.prototype.log = function () {
  B.super_.prototype.log.apply(this);

  console.log('my new name is: ' + this.name);
}; 
```

这确保了上下文是我想的而不是`this`实例。`B``B.super_.prototype`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-16T04:39:37.913

我更喜欢调用 super through 的方法，`prototype chain`而不是`constructor chain`像下面这样。

```
var prototype = C.prototype;

prototype.log = function() {
  Object.getPrototypeOf(prototype).log.call(this)

  // or old style
  prototype.__proto__.log.call(this)
} 
```

他们都在访问超类的原型对象，但使用可能`prototype chain`比`constructor.super_.prototype`.`constructor chain`

因为通常我将方法隐藏`protected`在`private`单独的文件中和`prototype`文件夹下。只有`public`方法`constructor`与`same scope`. 此外，为了让他们在不同的班级之间轻松移动。它们都被命名为`prototype.method = function() {...}`，因此它们中的大多数只能访问原型对象。

或者知道任何好处会很感激`constructor chain`？这就是我找到这篇文章的原因。

# twitter - 使用 Twitter API 以其他用户身份发布推文？

> ID：15014134
> 
> 赞同：0
> 
> 时间：2013-02-21T23:19:52.010
> 
> 标签：twitter, oauth

我已经对 OAuth Twitter 内容进行了排序，目前我的应用程序所做的只是抓取 Tweets 并将它们显示在网页上。在用户允许我的应用程序使用他们的帐户后，有没有办法代表他们发布推文，即以他们的身份发布？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:31:15.427

第一个呼叫点将在这里阅读 - [https://dev.twitter.com/docs/auth/oauth/oauth-echo](https://dev.twitter.com/docs/auth/oauth/oauth-echo)

# python - 如何从 Twitter 对话页面获取 20 多条消息？

> ID：15014135
> 
> 赞同：0
> 
> 时间：2013-02-21T23:19:52.460
> 
> 标签：python, twitter, web-crawler

出于研究目的，我正在尝试检索 Twitter 页面。但问题是，如果该页面包含超过 20 条消息，它只会在开头显示前 20 条消息。只有在您向下拖动页面后，它才会向您显示更多内容。而我目前的代码只有前 20 个 :( 请帮助我，谢谢！

```
f = urllib.urlopen("http://twitter.com/%s/status/%s" % (uid, sid)) 
```

一个例子是[https://twitter.com/DeanoLP/status/304476010257211394](https://twitter.com/DeanoLP/status/304476010257211394)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:28:54.340

如果您使用 python twitter api 包装器查询 twitter，您的生活可能会更轻松：[http ://code.google.com/p/python-twitter/](http://code.google.com/p/python-twitter/)

```
import twitter
api = twitter.Api()
statuses = api.GetUserTimeline(uid, count=200) 
```

count 参数确定要检索的状态数（最大值=200）。

注意：您可以通过 pip 快速轻松地安装此模块，但请务必使用：

```
pip install python-twitter 
```

不是

```
pip install twitter 
```

这是一个不同的包装。

# c# - 如何忽略异常并完成尝试

> ID：15014137
> 
> 赞同：0
> 
> 时间：2013-02-21T23:20:07.773
> 
> 标签：c#, serial-port, ioexception

所以我一直在与[这个问题](https://stackoverflow.com/questions/14885288/io-exception-error-when-using-serialport-open)作斗争大约一个星期，并认为我知道这个问题，但我不想在那里报告答案，直到我把它固定下来。

简而言之，我在尝试使用该`SerialPort.Open()`命令时收到 IOException。事实证明，这是非常常见的，大多数终端程序实际上也是如此，但他们只是忽略了它。请阅读我上面的帖子以获取完整的故事。现在我想做的是忽略 IOException 但*仍然打开串口*。我不能用 try/catch 做到这一点，或者至少我不知道怎么做。

我想知道有没有办法尝试一些事情并以某种方式声明“我知道会抛出一个问题，这是一个安全问题，我选择忽略异常并继续执行任务”。需要明确的是，我不想忽略错误然后继续。我想忽略错误并*仍然完成操作*。

以下是我最好的猜测，但它不起作用。

```
 try
        {
            serialPort1.Open();               
        }
        catch (System.IO.IOException)
        {
            MessageBox.Show("An IO Exception occurred.");
        }
        finally
        {          
            //SAFELY IGNORE ERROR AND DO TASK ANYWAY HERE
        } 
```

如果有人可以帮助我解决这个问题，我将不胜感激。

编辑：如果我`serialport1.Open`之后添加代码，我会得到： ![IOException 截图](../Images/4761497f005121469792a0bdb9c8c6b3.png)

这与没有 try/catch 的情况基本相同。我想做的是说我正在尝试这样做：我不在乎它会引发错误，无论如何都要这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T23:22:13.780

一般来说，如果您有一行代码导致异常，并且无论是否发生异常都需要完成额外的工作，您应该只使用 a `catch`，并将您想要完成的东西放在`try`/之外（之后） `catch`。

* * *

对于您的特定情况（在您的其他问题中描述），您正在处理 .NET 的可怕破坏`System.IO.Ports.SerialPort`。打开串行端口成功，但这`SerialPort.Open`是一种复杂的方法，它会做很多额外的事情，并且如果任何额外（和不必要的）事情失败，就会坚持关闭端口。我还发现了其他问题`System.IO.Ports.SerialPort`（例如，无法通过其内部设备名称打开端口）。IMO，越早摆脱 `System.IO.Ports.SerialPort`越好。

您可以 p/invoke Win32 Serial Port 函数（`CreateFile`其余的都[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363195.aspx)）或找到已经编写了包装库的人（我做过，但它不公开）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:32:01.737

> serialPort1.Open();

是什么引发了异常。通常，当您编写代码时，如果发生异常，您会清理连接。

正如其他人所提到的，如果您继续调用相同的方法，除非调用发生变化，否则您将不断收到异常。

所以理解这一点，我的建议是你寻找其他方法来打开串口，除了 serialPort1.Open(); 称呼。在 C# 中可能有也可能没有构建方式。所以你可能必须要有创意:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T23:36:43.973

从[SerialPort.Open](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.open.aspx)：

> 每个 SerialPort 对象只能存在一个打开的连接。任何应用程序的最佳做法是在调用 Close 方法后等待一段时间，然后再尝试调用 Open 方法，因为端口可能不会立即关闭。

和

> 端口处于无效状态。
> 
> *   或者 -
> 
> 设置底层端口状态的尝试失败。例如，从此 SerialPort 对象传递的参数无效。

我敢打赌这就是正在发生的事情......您的 SerialPort 最近打开了，现在您正试图在它准备好之前再次打开它。

我的建议是写一个循环，并在两次打开尝试之间睡一会儿。弄清楚你愿意在多长时间内尝试多少次。 `break`成功时退出循环。

```
foreach(int i in Enumerable.Range(1, numberOfAttempts)
{
  try
  {
    serialPort1.Open();
    break;
  }
  catch(Exception ex)
  {
    //log attempt #i failed because of ex
  }
  Thread.Sleep(millisecondsToWait);
} 
```

# c# - 使用 C# SevenZipSharp - 压缩错误

> ID：15014140
> 
> 赞同：0
> 
> 时间：2013-02-21T23:20:19.350
> 
> 标签：c#, 7zip, sevenzipsharp

我目前正在尝试将`SevenZipSharp`功能实现到我的项目中。我已经阅读了他们拥有的文档并查看了注释的源代码，但我无法弄清楚该`CompressFilesEncrypted`方法。我在 archiveName 参数上收到一条错误消息，显示“访问被拒绝”。

任何成功使用过这个的人，你能给我一些关于如何完成这个实现的建议吗？

这是我正在使用的代码（看起来很简单）：

```
 string fileName = Path.GetFileName(filepath);
        string outputDir = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
        try
        {
                        SevenZipCompressor compressor = new SevenZipCompressor();
                        compressor.CompressionMethod = CompressionMethod.Default;
                        compressor.CompressionLevel = CompressionLevel.Normal;
                        compressor.ZipEncryptionMethod = ZipEncryptionMethod.Aes256;
                        compressor.ArchiveFormat = OutArchiveFormat.Zip;
                        **compressor.CompressFilesEncrypted(outputDir, "12345",filepath);**
        }
        catch (Exception exc)
        {
            MessageBox.Show(exc.Message);
        } 
```

非常感谢任何见解！我知道之前必须有人做过这项工作:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T23:38:16.797

更正的代码和问题已解决。更正代码如下：

```
SevenZipCompressor compressor = new SevenZipCompressor();
            compressor.CompressionMethod = CompressionMethod.Deflate;
            compressor.CompressionLevel = CompressionLevel.High;
            compressor.ZipEncryptionMethod = ZipEncryptionMethod.Aes256;
            compressor.ArchiveFormat = OutArchiveFormat.Zip;
            compressor.CompressionMode = CompressionMode.Create;
            compressor.EventSynchronization = EventSynchronizationStrategy.AlwaysAsynchronous;
            compressor.FastCompression = false;
            compressor.EncryptHeaders = true;
            compressor.ScanOnlyWritable = true;
            compressor.CompressFilesEncrypted(outputDir, password, filepath); 
```

输出目录需要具有适当扩展名的文件名。原来是问题的一部分。

# java - Android：customsearchadapter 显示空结果

> ID：15014143
> 
> 赞同：2
> 
> 时间：2013-02-21T23:20:30.643
> 
> 标签：java, android, actionbarsherlock, android-contentprovider

我正在尝试显示我的自定义搜索框建议，但我收到的结果是空的。我遵循了一些指南来实现此功能，即：

*   对于内容提供者：[http ://www.androidcompetencycenter.com/2009/01/basics-of-android-part-iv-android-content-providers/](http://www.androidcompetencycenter.com/2009/01/basics-of-android-part-iv-android-content-providers/)
*   要使其在 ABS 中工作：[https ://github.com/JakeWharton/ActionBarSherlock/pull/653/files](https://github.com/JakeWharton/ActionBarSherlock/pull/653/files)

这导致了以下代码：

添加搜索框：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.building_search, menu);

    SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    SearchView searchView = new SearchView(getSupportActionBar().getThemedContext());

    searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
    searchView.setSuggestionsAdapter(new BuildingSuggestionsAdapter(this, searchManager.getSearchableInfo(getComponentName()), searchView));

    return super.onCreateOptionsMenu(menu);
} 
```

将建筑物添加到我的数据库中：

```
for (Resto resto : restos) {
    ContentValues values = new ContentValues();
    values.put(TableBuildings.Buildings.NAME, resto.name);
    values.put(TableBuildings.Buildings.DISTANCE, "3");
    getContentResolver().insert(TableBuildings.Buildings.CONTENT_URI, values);
} 
```

BuildingSuggestionAdapter：

```
public class BuildingSuggestionsAdapter extends CursorAdapter {

    private static final int QUERY_LIMIT = 50;
    private LayoutInflater inflater;
    private SearchView searchView;
    private SearchableInfo searchable;

    public BuildingSuggestionsAdapter(Context context, SearchableInfo info, SearchView searchView) {
        super(context, null, CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
        this.searchable = info;
        this.searchView = searchView;
        this.inflater = LayoutInflater.from(context);
    }

    @Override
    public void bindView(View v, Context context, Cursor c) {
        String name = c.getString(c.getColumnIndex(TableBuildings.Buildings.NAME));
        TextView namet = (TextView) v.findViewById(R.id.resto_search_name);
        namet.setText(name);

        String man = c.getString(c.getColumnIndex(TableBuildings.Buildings.DISTANCE));
        TextView manuf = (TextView) v.findViewById(R.id.resto_search_distance);
        manuf.setText(man);

        Toast.makeText(context, name + " " + man, Toast.LENGTH_LONG).show();
    }

    @Override
    public View newView(Context arg0, Cursor arg1, ViewGroup arg2) {
        return this.inflater.inflate(R.layout.resto_search_suggestion_view, null);
    }

    /**
     * Use the search suggestions provider to obtain a live cursor. This will be called in a worker
     * thread, so it's OK if the query is slow (e.g. round trip for suggestions). The results will
     * be processed in the UI thread and changeCursor() will be called.
     */
    @Override
    public Cursor runQueryOnBackgroundThread(CharSequence constraint) {
        String query = (constraint == null) ? "" : constraint.toString();
        /**
         * for in app search we show the progress spinner until the cursor is returned with the
         * results.
         */
        Cursor cursor = null;
        if (searchView.getVisibility() != View.VISIBLE
            || searchView.getWindowVisibility() != View.VISIBLE) {
            return null;
        }
        try {
            cursor = getSuggestions(searchable, query, QUERY_LIMIT);
            // trigger fill window so the spinner stays up until the results are copied over and
            // closer to being ready
            if (cursor != null) {
                cursor.getCount();
                return cursor;
            }
        } catch (RuntimeException e) {
        }
        // If cursor is null or an exception was thrown, stop the spinner and return null.
        // changeCursor doesn't get called if cursor is null
        return null;
    }

    public Cursor getSuggestions(SearchableInfo searchable, String query, int limit) {

        if (searchable == null) {
            return null;
        }

        String authority = searchable.getSuggestAuthority();
        if (authority == null) {
            return null;
        }

        Uri.Builder uriBuilder = new Uri.Builder()
            .scheme(ContentResolver.SCHEME_CONTENT)
            .authority(authority)
            .query("")
            .fragment("");

        // if content path provided, insert it now
        final String contentPath = searchable.getSuggestPath();
        if (contentPath != null) {
            uriBuilder.appendEncodedPath(contentPath);
        }

        // append standard suggestion query path
        uriBuilder.appendPath(SearchManager.SUGGEST_URI_PATH_QUERY);

        // get the query selection, may be null
        String selection = searchable.getSuggestSelection();
        // inject query, either as selection args or inline
        String[] selArgs = null;
        if (selection != null) {    // use selection if provided
            selArgs = new String[]{query};
        } else {                    // no selection, use REST pattern
            uriBuilder.appendPath(query);
        }

        if (limit > 0) {
            uriBuilder.appendQueryParameter("limit", String.valueOf(limit));
        }

        Uri uri = uriBuilder.build();

        // finally, make the query
        return mContext.getContentResolver().query(uri, null, selection, selArgs, null);
    }
} 
```

提供者：

```
public class BuildingSuggestionProvider extends ContentProvider {

    private SQLiteDatabase sqlDB;
    private DatabaseHelper dbHelper;
    private static final String DATABASE_NAME = "Buildings.db";
    private static final int DATABASE_VERSION = 1;
    private static final String TABLE_NAME = "Buildings";

    private static class DatabaseHelper extends SQLiteOpenHelper {

        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            //create table to store user names
            db.execSQL("Create table " + TABLE_NAME + "( _id INTEGER PRIMARY KEY AUTOINCREMENT, NAME TEXT, DISTANCE TEXT);");
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
            onCreate(db);
        }
    }

    @Override
    public int delete(Uri uri, String s, String[] as) {
        return 0;
    }

    @Override
    public String getType(Uri uri) {
        return null;
    }

    @Override
    public Uri insert(Uri uri, ContentValues contentvalues) {
        // get database to insert records
        sqlDB = dbHelper.getWritableDatabase();
        // insert record in user table and get the row number of recently inserted record
        long rowId = sqlDB.insert(TABLE_NAME, "", contentvalues);
        if (rowId > 0) {
            Uri rowUri = ContentUris.appendId(TableBuildings.Buildings.CONTENT_URI.buildUpon(), rowId).build();
            getContext().getContentResolver().notifyChange(rowUri, null);
            return rowUri;
        }
        throw new SQLException("Failed to insert row into " + uri);
    }

    @Override
    public boolean onCreate() {
        dbHelper = new DatabaseHelper(getContext());
        return (dbHelper == null) ? false : true;
    }

    @Override
    public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
        SQLiteQueryBuilder qb = new SQLiteQueryBuilder();
        SQLiteDatabase db = dbHelper.getReadableDatabase();
        qb.setTables(TABLE_NAME);
        Cursor c = qb.query(db, projection, selection, null, null, null, sortOrder);
        c.setNotificationUri(getContext().getContentResolver(), uri);
        return c;
    }

    @Override
    public int update(Uri uri, ContentValues contentvalues, String s, String[] as) {
        return 0;
    }
} 
```

餐桌建筑：

```
import android.net.Uri;
import android.provider.BaseColumns;
public class TableBuildings {

    public static final String AUTHORITY = "be.ugent.zeus.hydra.ui.map.suggestions.BuildingSuggestionProvider";

    // BaseColumn contains _id.
    public static final class Buildings implements BaseColumns {

        public static final Uri CONTENT_URI = Uri.parse("content://be.ugent.zeus.hydra.ui.map.suggestions.BuildingSuggestionProvider");
        // Table column
        public static final String NAME = "NAME";
        public static final String DISTANCE = "DISTANCE";
    }
} 
```

最后是用于定义搜索框的 XML，然后是我的应用程序中用于提供程序的 xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
            android:label="@string/resto_search_label"
            android:hint="@string/resto_search_hint" 
            android:searchSuggestAuthority="be.ugent.zeus.hydra.ui.map.suggestions.BuildingSuggestionProvider" />

<provider
            android:name=".ui.map.suggestions.BuildingSuggestionProvider"
            android:authorities="be.ugent.zeus.hydra.ui.map.suggestions.BuildingSuggestionProvider" /> 
```

我得到的结果如下：没有错误；它打开 searchview 并查询 contentprovider。奇怪的是，Provider 中的查询方法被调用，但它没有从适配器调用，例如，当我放置断点时，我的程序不会停止。视觉上，我的键盘弹出，我看到一个列表，但列表只包含空项目......

有人有什么主意吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-17T08:48:34.917

我知道这已经很晚了，但我遇到了同样的问题，并通过使用*SearchManager*类提供的常量作为我数据库中的列名解决了这个问题。请参阅[Android 开发者网站上的搜索教程](http://developer.android.com/guide/topics/search/adding-custom-suggestions.html "安卓开发者")。

SUGGEST_COLUMN_TEXT_1是您特别需要的[。](http://developer.android.com/reference/android/app/SearchManager.html#SUGGEST_COLUMN_TEXT_1 "搜索管理器")这是 ContentProvider 需要在结果 ListView 中显示的主要文本以及它将搜索的内容。

# batch-file - 将一个文件移动到多个目录

> ID：15014146
> 
> 赞同：0
> 
> 时间：2013-02-21T23:20:37.110
> 
> 标签：batch-file

我想使用批处理文件将文件从我的桌面移动到这些文件路径（最终在字母文件夹中）。

我的文件夹\子文件夹1\env01\子文件夹2\子文件夹3\字母

我的文件夹\子文件夹1\env02\子文件夹2\子文件夹3\字母

我的文件夹\子文件夹1\env03\子文件夹2\子文件夹3\字母

不确定如何将文件复制到多个路径。需要帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:31:32.737

一个`for`循环是你可能追求的：http: [//www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/batch.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/batch.mspx?mfr=true)

```
for %%d in (env01 env02 env03) do copy desktop.fil myfolder\subfolder1\%%d\subfolder2\subfolder3\Letters 
```

对于多个源文件，将循环包含在另一个循环中：

```
for %%c in (file0 file1 file2) do (
    for %%d in (env01 env02 env03) do (
        copy %%c myfolder\subfolder1\%%d\subfolder2\subfolder3\Letters
    )
) 
```

# api - 通过 Adwords API 更改目标 URL 中的查询字符串会触发社论吗？

> ID：15014149
> 
> 赞同：0
> 
> 时间：2013-02-21T23:20:52.957
> 
> 标签：api, google-ads-api

这是我公司正在进行的辩论。我们运行大量 Adwords 帐户。我需要在大量关键字上自动添加或更改查询字符串参数。我们的 SEM 团队担心这可能会导致 Adwords 编辑人员在审查更改时禁用大量关键字（有效地扼杀流量）。

我可以理解为什么更改 URL 中的域或页面可能会导致这种情况。但我认为不应该更改查询字符串。

任何人都可以确认/否认这种可能性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:06:41.533

**更新 2013-03-19**

我不确定这是否有资格作为“答案”。我在 Google Groups 上发布了同样的问题，并且像往常一样，Google 是不置可否的。然而，这是我迄今为止收集到的（我为后代分享）：

首先，“社论”似乎不是谷歌广泛接受的术语。我这样说是基于我们与客户代表的讨论。这个词对他们来说意义不大，需要澄清。因此，澄清一下，当我说“编辑”时，我指的是 Google 审查您的关键字词、广告文案、着陆页以及可能重置统计信息（质量得分）的过程。据我所知，这在他们的系统中大部分是自动化的。然而，有时似乎人类实际上参与了这个过程。

现在答案是：修改关键字目标 URL 似乎不会导致人工审核或重置统计信息。可能的例外是商标术语或药物术语。我将其更广泛地翻译为“任何具有特殊规则的术语”。

注意：Google 群组中的人们似乎都同意在创意级别修改 URL 会重置统计信息。所以小心行事。

这是谷歌组线程。

**更新 2013-07-11**

我现在只是在自言自语。我感觉很孤独。我刚刚获得了这篇文章的“风滚草”奖。

Adwords 团队最终告诉我们，修改目标网址*不应*影响流量。

因此，我们修改了数十万个目标 URL，我们的 SEM 团队报告说，他们的一些高流量关键字在大约 10 天后停止访问，然后神奇地回来了。没有解释。Adwords 团队从员工的内心深处挖出了一些“专家”，随后告诉我们修改目标 URL*确实*会影响流量。

但是，我们同时也将这些帐户转换为增强型广告系列。所以结果在我看来是不确定的。我认为即使是 Adwords 团队也不知道 Adwords 是如何工作的。

这里冷。需要生火...

# objective-c - `objc_autoreleasePoolPush()` 和 `objc_autoreleasePoolPop()` 函数和 `@autoreleasepool` 块

> ID：15014152
> 
> 赞同：3
> 
> 时间：2013-02-21T23:21:09.793
> 
> 标签：objective-c, automatic-ref-counting, objective-c-runtime, nsautoreleasepool

我在某处读到，当我们使用`@autoreleasepool { }`启用了 ARC 的块时，编译器会生成代码以分别在块的开头和结尾调用`objc_autoreleasePoolPush()`和函数。`objc_autoreleasePoolPop()`

但是，当我用块编译一个 Objective-C 文件时`@autoreleasepool`，这两个函数不会被调用，即使是`-fobjc-arc`. 相反，编译器生成代码以在开始时分配一个新`NSAutoreleasePool`对象（具有等效于 的东西）并在块的末尾`[[NSAutoreleasePool alloc] init]`排出池（通过调用）。`-drain`

那么，`objc_autoreleasePoolPush()`and`objc_autoreleasePoolPop()`函数真的应该在启用 ARC 的情况下调用吗？如果是，缺少哪些编译器选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:43:47.530

`objc_autoreleasePoolPush()`从 OSX 10.7/iOS 5.0 开始，实际上应该从编译器生成的代码分别在块`objc_autoreleasePoolPop()`的开头和块的和处调用。`@autoreleasepool`缺少的编译器选项是`-fobjc-runtime=macosx-10.7`.

而且，顺便说一句，ARC 与所有这些无关，因此`@autoreleasepool`即使未启用 ARC，块也会使编译器生成对这两个函数的调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T23:24:19.787

你的部署目标是什么？可能需要 OSX 10.8/iOS 6 才能获得更新的做事方式。

# magento - 如何修复 Magento 1.7 开发者模式

> ID：15014154
> 
> 赞同：1
> 
> 时间：2013-02-21T23:21:14.313
> 
> 标签：magento, magento-1.7

每当我在 Magento 1.7 中打开开发人员模式时，我都会收到此警告消息如果有任何其他警告或错误，它将显示该错误但是当没有错误时，此屏幕将出现。一旦我关闭开发者模式，我就可以使用网站。

> 警告：get_class() 期望参数 1 是对象，在第 1340 行 >C:\xampp\htdocs\magento\app\code\core\Mage\Core\Model\App.php 中给出的布尔值
> 
> 0 [内部函数]: mageCoreErrorHandler(2, 'get_class() exp...', 'C:\xampp\htdocs...', >1340, Array) #1 C:\xampp\htdocs\magento\app\ code\core\Mage\Core\Model\App.php(1340): >get_class(false) #2 C:\xampp\htdocs\magento\app\code\core\Mage\Core\Model\App.php(1317 ): >Mage_Core_Model_App->_callObserverMethod(false, 'check', Object(Varien_Event_Observer)) #3 >C:\xampp\htdocs\magento\app\Mage.php(447): Mage_Core_Model_App->dispatchEvent('controller_fron... '，数组）#4 >C:\xampp\htdocs\magento\app\code\core\Mage\Core\Controller\Varien\Front.php(147): ?>Mage::dispatchEvent('controller_fron...' , 数组) #5 >C:\xampp\htdocs\magento\app\code\core\Mage\Core\Model\App.php(749): ?>Mage_Core_Controller_Varien_Front->init() #6 >C:\xampp\ htdocs\magento\app\code\core\Mage\Core\Model\App。php(1094): Mage_Core_Model_App->_initFrontController() #7 >C:\xampp\htdocs\magento\app\code\core\Mage\Core\Model\App.php(354): Mage_Core_Model_App->getFrontController() #8 C:\xampp\htdocs\magento\app\Mage.php(683): Mage_Core_Model_App->run(Array) #9 C:\xampp\htdocs\magento\index.php(87): Mage::run('' , '商店') #10 {main}

我们将不胜感激任何帮助或指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:43:36.703

你有一个已失效的观察者；见[`Mage_Core_Model_App::_callObserverMethod()`（链接）](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Model/App.php#L1340)：

```
protected function _callObserverMethod($object, $method, $observer)
{
    if (method_exists($object, $method)) {
        $object->$method($observer);
    } elseif (Mage::getIsDeveloperMode()) {
        Mage::throwException('Method "'.$method.'" is not defined in "'.get_class($object).'"');
    }
    return $this;
} 
```

从堆栈跟踪的其余部分可以看出，正在观察的事件是`controller_front_init_routers`(ref. [`Mage_Core_Controller_Varien_Front::init()`(link)](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Controller/Varien/Front.php#L147) )。除非[`Mage_Cms_Controller_Router`(link)](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Cms/etc/config.xml#L177)出现问题，否则问题必须出在配置为观察此事件的自定义模块上。

要查找有问题的配置，请在*app/code*中搜索`<controller_front_init_routers>`.

您还可以[创建一个不调用前端控制器的测试脚本](https://gist.github.com/benmarks/4532434)并使用它来调试：

```
<?php
ini_set('display_errors',true);
error_reporting(E_ALL | E_STRICT);
include 'app/Mage.php';
Mage::setIsDeveloperMode(true);
Mage::app();

Zend_Debug::dump(
    Mage::getConfig()->getXpath('//controller_front_init_routers//class')
); 
```

库存输出如下；其他任何事情都是你的麻烦制造者：

```
array(1) {
    [0] => object(Mage_Core_Model_Config_Element)#66 (1) {
        [0] => string(26) "Mage_Cms_Controller_Router"
    }
} 
```

# css - 移动设备上的侧滚动

> ID：15014155
> 
> 赞同：0
> 
> 时间：2013-02-21T23:21:23.990
> 
> 标签：css, mobile, responsive-design

我在移动设备上看到了一些令人讨厌的侧滚动。我有两个@media 查询集，平板电脑和手机。

[dev.bdbshop.com](http://www.dev.bdbshop.com/)

```
@media only screen and (max-width: 767px) {
.wrap { max-width: 300px; } 
```

这是问题吗？有没有更好的方法来做到这一点，例如使用百分比？

我应该添加第三个@media 查询并设置更具体的百分比吗？目前只有 2 个断点相当宽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T06:46:11.787

我检查了你的代码`<div id="sidebar-footer" class="sidebar">` 你知道这个元素的确切宽度是多少？您已经提到它的宽度超过视口 100%。

`#sidebar-footer { clear: both; margin-bottom: 0; margin-left: auto; margin-right: auto; margin-top: 0; overflow-x: visible; overflow-y: visible; width: 104.255%; }`

使用 100% 而不是 104.255% 。它可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:02:56.257

追问，你个人觉得在767px以下再增加一个#media屏幕断点值得吗？例如旧手机和 iPhone 的 320 像素？

# python - 老虎机程序中的每次循环中断

> ID：15014156
> 
> 赞同：1
> 
> 时间：2013-02-21T23:21:26.823
> 
> 标签：python, python-3.x

我试图打破循环说

```
if deff <= int(total):
    break 
```

但是无论输入为负数还是大于总和，循环都会中断，它将中断循环

关于我做错了什么的任何建议？

PS我知道我会新的一个公式来决定玩家是赢还是输。现在我只是想在去那里之前弄清楚第一个代码

第一次编程，老师没有帮助）：

* * *

```
def intro():

    greeting()

    print('How much money do you want to start with?')

    print('Enter the starting amount of dollars.', end='')
    total = int(input())

    print('Your current total is '+ str(total)+'\n')
    while True:

        print('How much money do you want to bet (enter 0 to quit)?', end='');
    # Bett will be the amount of money that the player will play with

        bett = int(input())
        if bett > int(total):
            print('ERROR You don\'t have that much left')

        if bett < int(0):
            print('ERROR: Invalid bet amount\n')

        if bett <= int(total)
            break

# Function shows results of slot machine after handle being pulled
def random():
    import random

    num1 = random.randint(1, 5)
    num2 = random.randint(1, 5)
    num3 = random.randint(1, 5)

    print('/---+---+---\  ')
    print('|-'+ str (num1)+'-|-'+ str(num2) +'-|-'+ str (num3) +'-|')
    print('\---+---+---/  ')

intro() 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:41:01.287

您需要在连续的条件测试中使用`elif`and ：`else`

```
 bett = int(input())
    if bett > total:
        print('ERROR You don\'t have that much left')

    elif bett < 0:
        print('ERROR: Invalid bet amount\n')

    else:
        break 
```

这样，只执行一条语句，而不是更多或更多。

注意：没有必要一直使用`int()`构造函数来处理已经是`int`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:38:40.297

在这个块中：

```
 if bett <= int(total)
        break 
```

您有语法错误。在第一行的末尾添加一个冒号：

```
 if bett <= int(total):
        break 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T23:59:51.153

如果是我，我会使用 while 循环。

```
play = True
while play == True:
    #all the code
    #to be executed
    #indented here
    #
    #Ask user if they want to continue playing
    p = input("Play again?[y/n] ")
    playAgain = str(p)

    if playAgain == "y":
        play = True
    else:
        play = False 
```

# javascript - 检测图像输入加载

> ID：15014163
> 
> 赞同：5
> 
> 时间：2013-02-21T23:22:02.967
> 
> 标签：javascript, html, css, onload

我正在使用这段代码：

```
<input type="image" ... onLoad="this.style.opacity = 1" /> 
```

它在 IE 中运行良好（至少支持`opacity`:p 的版本），但在 Chrome 中，`onLoad`加载图像时事件没有触发。

请注意，`src`输入的属性是可以改变的，当它发生时，一些 JavaScript`opacity`首先将 设置为 0，合适`transition`的属性使它看起来像图像淡出和新的淡入一样。另外，需要使用 of`<input type="image">`因为服务器需要该坐标。

我已经使用绝对定位`<img>`的`onLoad`and对其进行了杰里操纵`opacity`，放在`<input>`现在使用透明 GIF 像素的后面。虽然它有效，但它很丑陋。

有什么方法可以检测`<input>`Chrome 中使用的图像的成功加载，还是`background-image`无法检测到？

编辑：如果有帮助，这里有一个[小提琴](http://jsfiddle.net/GKpYW/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:09:07.390

这是一种 hack，但您可以实例化一个 Javascript`Image`对象，然后在其上设置事件侦听器，然后在加载完成时设置输入的 src：

[http://jsfiddle.net/t8n4y/](http://jsfiddle.net/t8n4y/)

免责声明：仅在 Chrome 上测试

HTML：

```
<input type="image" id="imgInput" /> 
```

Javascript：

```
 var photo = document.getElementById('imgInput');
            var img = new Image();
            img.addEventListener('load', function () { alert("done loading"); }, false);
            img.src = 'http://jeremydouglass.com/gamertextually/images/gt_snowflake_tags-2-ach-large.png?ran=' + Math.random();
            photo.src = img.src; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:00:39.693

我记得我过去遇到过这样的问题。您可以通过执行以下操作来检测它：

```
window.onload = function(){
    var input = document.getElementById('input1');
    input.src='';
    input.addEventListener('load', loadImage, false);
    input.src = 'http://theoffguard.net/wp-content/upLoads/2012/04/Nick-Cage.jpg';
}

function loadImage()
{
  console.log("Image is loaded");
} 
```

演示：http: [//jsbin.com/ufovom/9/edit](http://jsbin.com/ufovom/9/edit)

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-25T11:22:02.760

```
<input id="image" type="image" ... onLoad="this.style.opacity = 1" />

  //script ->

  $("#image").change(function () {
                if (this.files && this.files[0]) {
                var FR = new FileReader();
                FR.onload = function (e) {
                    //your onload
                };
                FR.readAsDataURL(input.files[0]);
            }
}); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-21T23:31:20.600

您可以将[addEventListener()](http://help.dottoro.com/ljeuqqoq.php)方法与输入的引用一起使用。

请注意，在将事件侦听器添加到输入之前，您需要让页面加载，为此，只需为窗口对象应用另一个事件侦听器，然后触发引用您输入的函数。

# jquery - 使用 jQuery 在 Adob e Muse 中动态加载内容？

> ID：15014168
> 
> 赞同：0
> 
> 时间：2013-02-21T23:22:39.710
> 
> 标签：jquery, html, audio, audio-player, muse

我喜欢使用 Adob​​e Muse，因为它设计简单，感觉更像是一个图形设计工具，而不是 Web 编程软件。

我有一个主页，我想在其中放置音乐播放器。主页指向另外 2 个信息页面。当用户转到其他页面时，我想让播放器继续播放音乐而不刷新自己。

这在 Adob​​e Muse 中可行吗？Muse 已经使用了 jQuery，并为自定义代码（如 YouTube 嵌入）提供了 HTML*插入选项*。如何实现这样的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T08:03:35.897

问题不在于 Muse，而在于浏览器。当您导航到新页面时，他们将停止播放正在关闭的页面上的任何媒体。因此，您需要在音乐播放器上打开一个窗口以确保连续性。您可以通过使用 JavaScript 打开一个小弹出窗口来执行此操作，该窗口显示一个仅包含您的音乐播放器的页面。window.open 函数将为您执行此操作。但是，您的网站访问者可能不喜欢打开弹出窗口，并且如果他们启用了弹出窗口阻止程序，无论如何它可能不会打开。

顺便说一句，在网站上自动播放音乐通常被认为是个坏主意。您的访问者可能已经在听他们自己的音乐，因此他们不想同时听到您的音乐。许多人只是觉得它很烦人，尤其是当它出乎意料时。如果您的音乐与您的网站相关并且是必要的（例如，它是一个乐队的网站），那么添加一个音乐播放器小部件并让访问者在发出任何噪音之前按下播放键。

# asp.net - 64 位 IIS 7.5 服务器上的 ASP.NET / MVC 4 捆绑和缩小 404 问题

> ID：15014169
> 
> 赞同：7
> 
> 时间：2013-02-21T23:22:39.647
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-4.5, bundling-and-minification

我们最近将我们的项目从 MVC 3 升级到了 MVC 4。我们的目标是 .NET 4.0 框架，并且我们的 Web 应用程序是 32 位的，因为我们必须包含一些参考。

我们遇到的问题是我们将捆绑/缩小从 Chirpy 转换为内置的 ASP.NET 捆绑。该站点在 32 位服务器（仅运行 .NET 4.0 的 Windows Server 2003/IIS 6 和 2008/IIS 7.5 以及我们的 64 位开发机器）上运行没有问题。捆绑/缩小在上述所有方面都可以正常工作。

在仅安装 .NET 4.0 的 64 位 Windows 2008 / IIS 7.5 服务器上，捆绑不起作用。生成的脚本和样式都会出现 404 错误。

如果我们在 64 位服务器上安装 .NET 4.5，它可以正常工作。我们对此感到困惑，因为有些服务器在没有 .NET 4.5 的情况下工作，而这个需要它。最重要的是，Windows Server 2003 / 64 位与 .NET 4.5 不兼容，因此如果这也有问题，此修复程序将不起作用。

奇怪的是，针对 .NET 4.0 构建的 x86 的示例 MVC 4 示例 Internet 应用程序在问题服务器上仅使用 4.0 即可正常工作。除了统一、日志记录、elmah 和无点配置之外，web.config 完全相同。

对此的任何帮助将不胜感激。

这是 BundleConfig.cs：

```
using System.Web;
using System.Web.Optimization;

namespace WebApp
{
    public class BundleConfig
    {
        public static void RegisterBundles(BundleCollection bundles)
        {
            bundles.UseCdn = false;

            // .debug.js, -vsdoc.js and .intellisense.js files 
            // are in BundleTable.Bundles.IgnoreList by default.
            // Clear out the list and add back the ones we want to ignore.
            // Don't add back .debug.js.
            bundles.IgnoreList.Clear();
            bundles.IgnoreList.Ignore("*-vsdoc.js");
            bundles.IgnoreList.Ignore("*intellisense.js");

            bundles.Add((new ScriptBundle("~/bundles/WebApp.Register1")).Include("~/Scripts/jquery.ba-tinypubsub.min.js",       
                                                                                 "~/Scripts/knockout-2.1.0.js",
                                                                                 "~/Scripts/WebApp/WebApp.Register.RegisterStudent.js",
                                                                                 "~/Scripts/WebApp/WebApp.Register.RegisterPresenter.js"));

            bundles.Add((new Bundle("~/bundles/WebApp.Register2")).Include("~/Scripts/WebApp/WebApp.Register.StudentSelect.js"));

            bundles.Add((new ScriptBundle("~/bundles/WebApp.View1")).Include("~/Scripts/jquery.ba-tinypubsub.min.js",
                                                                             "~/Scripts/WebApp/WebApp.View.ImagePresenter.js", 
                                                                             "~/Scripts/WebApp/WebApp.View.ImageResults.js"));

            bundles.Add((new Bundle("~/bundles/WebApp.View2")).Include("~/Scripts/WebApp/WebApp.View.StudentsSelect.js"));

            bundles.Add((new ScriptBundle("~/bundles/WebApp.Print1")).Include("~/Scripts/WebApp/WebApp.Print.SelectedIdArray.js",
                                                                              "~/Scripts/jquery.ba-tinypubsub.min.js",
                                                                              "~/Scripts/WebApp/WebApp.Print.DocumentsSelect.js",
                                                                              "~/Scripts/WebApp/WebApp.Print.DocumentsSelected.js",
                                                                              "~/Scripts/WebApp/WebApp.Print.DocumentsPresenter.js",
                                                                              "~/Scripts/WebApp/WebApp.Print.StudentsPresenter.js",
                                                                              "~/Scripts/WebApp/WebApp.Print.PrinterSelected.js",
                                                                              "~/Scripts/WebApp/WebApp.Print.OutputSummary.js",
                                                                              "~/Scripts/WebApp/WebApp.Print.OutputPresenter.js",
                                                                              "~/Scripts/WebApp/WebApp.Print.NoStudentPresenter.js"));

            bundles.Add((new Bundle("~/bundles/WebApp.Print2")).Include("~/Scripts/WebApp/WebApp.Print.StudentsSelect.js",
                                                                        "~/Scripts/WebApp/WebApp.Print.StudentsSelected.js"));

            bundles.Add((new ScriptBundle("~/bundles/WebApp.Main")).Include("~/Scripts/modernizr.custom.33607.js", 
                                                                            "~/Scripts/jquery-1.6.1.js",
                                                                            "~/Scripts/jquery-ui-1.8.10.custom.min.js",
                                                                            "~/Scripts/jquery-ui.min.js", 
                                                                            "~/Scripts/json.js",
                                                                            "~/Scripts/jquery.validate.min.js", 
                                                                            "~/Scripts/jquery.marquee.js",
                                                                            "~/Scripts/YUI.js", 
                                                                            "~/Scripts/Common.SearchHighlight.js"));

            bundles.Add((new StyleBundle("~/bundles/Content/WebApp.Main")).Include("~/Content/jquery.marquee.min.css",
                                                                                      "~/Content/YUI.css", 
                                                                                      "~/Content/Site.css",
                                                                                      "~/Content/ui-lightness/jquery-ui-1.8.10.custom.css"));
        }
    }
} 
```

以下是我们在布局中引用捆绑包的方式：

```
 @Scripts.Render("~/bundles/WebApp.Main")
    <link href="@Url.Content("~/Content/SiteLess.less")" rel="stylesheet" type="text/css"  />
    @Styles.Render("~/bundles/Content/WebApp.Main")
    ... 
```

编辑：响应/更新

*   是的，已启用 32 位应用程序标志在应用程序池中设置为 True。
*   给出 404 的请求的路径如下所示[http://xx.xx.xx.xxx/WebApp/bundles/WebApp.Main?v=03pBc7hdH1lHLtZGx-JMosNaLpMK7fcmI0uI6auknHw1](http://xx.xx.xx.xxx/WebApp/bundles/WebApp.Main?v=03pBc7hdH1lHLtZGx-JMosNaLpMK7fcmI0uI6auknHw1)
*   Windows 事件查看器不显示任何内容
*   它在安装 .NET 4.5，卸载它，然后重新安装 .NET 4.0 后工作
*   它适用于企业 2008 64 位服务器。问题服务器是标准版。我们将重建虚拟机，看看是否能解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-10T21:21:15.307

您最初遇到 404 问题的环境可能没有应用无扩展名 URL 修补程序。

请参阅[http://support.microsoft.com/kb/980368](http://support.microsoft.com/kb/980368)

巧合的是，您的“干净的 .NET 4.0”安装要么是 4.0 之后的版本（可能是 4.5？），要么您可能在不知不觉中应用了修补程序/更新以启用对无扩展 URL 的支持。

我在 Windows Server 2008 机器（企业版；32 位和 64 位）中遇到了同样的问题，其中捆绑器在运行时没有失败（它正确地创建了捆绑包，并正确呈现了捆绑包 URL，例如`/app/bundles/my_script`），但 IIS 返回 404捆绑网址。我安装了修补程序 980368，并且捆绑包开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:20:28.910

问题似乎与我们用于该服务器的 VM 上的 .NET 4.0 安装有关。在创建两个安装了干净的 .NET 4.0 的新 VM（均为 Windows 2008 64 位，一个标准一个企业）后，捆绑在两者上都运行良好。感谢所有的帮助。

# wpf - 向 VisualTree 发送通知

> ID：15014175
> 
> 赞同：1
> 
> 时间：2013-02-21T23:23:18.510
> 
> 标签：wpf

如何在可视化树下发送通知？

这是简单的代码示例：

```
class MyButton1 : Button
{
 ....
} 
```

Generic.XAML 如下所示：

```
 <Style TargetType="{x:Type local:MyButton1}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type local:MyButton1}">
                        <Button>
                           <StackPanel>
                             <Label>
                              <local:MyTextBlock1 Text="Not working yet."/>
                             </Label>
                            </StackPanel>
                        </Button>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

没有 VIEWMODEL。它是一个自定义控件，当单击 MyButton1 时，它应该通知 MyTextBlock1 将文本更改为“它正在工作”。MyButton1 位于可视树的顶层，而 MyTextblock1 位于深处。

那么如何在可视化树下发送通知并在特定元素处处理它们呢？在我的情况下，它的 MyButton1 和单击通知应该沿着可视树向下移动，直到 MyTextBlock1。然后应该处理通知并将文本更改为“它正在工作”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:45:38.477

MVVM 和数据绑定示例。

我简单的 Person 类

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

我简单的 PersonViewModel 类

```
public class PersonViewModel : INotifyPropertyChanged
{
    public PersonViewModel(Person person)
    {
        if (person == null)
            throw new ArgumentNullException("person");
        this.Model = person;

        this.ShowFirstNameCommand = new DelegateCommand((o) => this.showFirstName());
        this.ShowLastNameCommand = new DelegateCommand((o) => this.showLastName());
    }

    public ICommand ShowFirstNameCommand { get; private set; }
    public ICommand ShowLastNameCommand { get; private set; }

    public Person Model { get; private set; }

    public string FirstName
    {
        get
        {
            return this.Model.FirstName;
        }
        set
        {
            this.Model.FirstName = value;
            this.OnPropertyChanged("FirstName");
        }
    }

    public string LastName
    {
        get
        {
            return this.Model.LastName;
        }
        set
        {
            this.Model.LastName = value;
            this.OnPropertyChanged("LastName");
        }
    }

    private string _showString;

    public string ShowString
    {
        get
        {
            return this._showString;
        }
        set
        {
            this._showString = value;
            this.OnPropertyChanged("ShowString");
        }
    }

    private void showFirstName()
    {
        this.ShowString = this.FirstName;
    }

    private void showLastName()
    {
        this.ShowString = this.LastName;
    }

    #region INPC code - can create an abstract base view model class and put this there instead

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        this.OnPropertyChanged(new PropertyChangedEventArgs(propertyName));
    }

    protected virtual void OnPropertyChanged(PropertyChangedEventArgs e)
    {
        var handler = this.PropertyChanged;
        if (handler != null)
        {
            handler(this, e);
        }
    }

    #endregion
} 
```

使按钮命令起作用的 DelegateCommand 类

```
// Copyright © Microsoft Corporation.  All Rights Reserved.
// This code released under the terms of the 
// Microsoft Public License (MS-PL, http://opensource.org/licenses/ms-pl.html.)

using System;
using System.Windows.Input;

namespace WpfApplication1
{
public class DelegateCommand : ICommand
{
    /// <summary>
    /// Action to be performed when this command is executed
    /// </summary>
    private Action<object> executionAction;

    /// <summary>
    /// Predicate to determine if the command is valid for execution
    /// </summary>
    private Predicate<object> canExecutePredicate;

    /// <summary>
    /// Initializes a new instance of the DelegateCommand class.
    /// The command will always be valid for execution.
    /// </summary>
    /// <param name="execute">The delegate to call on execution</param>
    public DelegateCommand(Action<object> execute)
        : this(execute, null)
    {
    }

    /// <summary>
    /// Initializes a new instance of the DelegateCommand class.
    /// </summary>
    /// <param name="execute">The delegate to call on execution</param>
    /// <param name="canExecute">The predicate to determine if command is valid for execution</param>
    public DelegateCommand(Action<object> execute, Predicate<object> canExecute)
    {
        if (execute == null)
        {
            throw new ArgumentNullException("execute");
        }

        this.executionAction = execute;
        this.canExecutePredicate = canExecute;
    }

    /// <summary>
    /// Raised when CanExecute is changed
    /// </summary>
    public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }

    /// <summary>
    /// Executes the delegate backing this DelegateCommand
    /// </summary>
    /// <param name="parameter">parameter to pass to predicate</param>
    /// <returns>True if command is valid for execution</returns>
    public bool CanExecute(object parameter)
    {
        return this.canExecutePredicate == null ? true : this.canExecutePredicate(parameter);
    }

    /// <summary>
    /// Executes the delegate backing this DelegateCommand
    /// </summary>
    /// <param name="parameter">parameter to pass to delegate</param>
    /// <exception cref="InvalidOperationException">Thrown if CanExecute returns false</exception>
    public void Execute(object parameter)
    {
        if (!this.CanExecute(parameter))
        {
            throw new InvalidOperationException("The command is not valid for execution, check the CanExecute method before attempting to execute.");
        }
        this.executionAction(parameter);
        }
    }
} 
```

进入 MainWindow.xaml 的代码。

```
<StackPanel>
    <Button Command="{Binding Path=ShowFirstNameCommand}">Click to show first name</Button>
    <Button Command="{Binding Path=ShowLastNameCommand}">Click to show last name</Button>
    <TextBox Text="{Binding Path=ShowString}" HorizontalAlignment="Stretch"/>
</StackPanel> 
```

进入 App.xaml.cs 以将其粘合在一起的代码

公共部分类应用程序：应用程序{受保护的覆盖无效OnStartup（StartupEventArgs e）{base.OnStartup（e）;

```
 var personvm = new PersonViewModel( new Person
        {
            FirstName = "John",
            LastName = "Smith"
        });

        var window = new MainWindow
        {
            DataContext = personvm
        };

        window.Show();
    }
} 
```

基本上我在屏幕上显示 2 个按钮和一个文本框。单击时，其中一个按钮将在文本框中显示一个人的名字，另一个按钮将在同一文本框中显示该人的姓氏。如果您检查代码，您将看到我使用 WPF 命令实现了这一点。按钮的 Command 属性绑定到我的 PersonViewModel 类的 ICommand 属性。然后将这些属性“绑定”（使用 DelegateCommand）到同一视图模型类中的私有方法。我还有一个 Public ShowString 属性，它是绑定到屏幕上我的文本框的数据，用于控制文本框中显示的字符串。您将看到我在 viewmodel 类中的私有方法更改了此 ShowString 属性的值，从而更改了文本框中显示的数据。

我的 xaml 代码与您所拥有的不同（您没有提供代码），但这个概念应该适合您。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:29:48.060

在使用WPF 进行开发时，您应该考虑使用[MVVM 设计模式，并](http://csharperimage.jeremylikness.com/2010/04/model-view-viewmodel-mvvm-explained.html)[使用 MVVM 框架](http://www.lhotka.net/weblog/UsingTheMVVMPatternRequiresAFramework.aspx)为您提供许多开箱即用的功能。

在 MVVM 模式中，您将拥有一个视图模型，它是您的视图的数据上下文。您的视图将包含您的 2 个文本框和按钮。

MVVM 框架将提供一些机制，用于在单击按钮时调用视图模型上的方法。

您的视图模型将公开 2 个公共字符串属性，这些属性绑定到您视图上的 2 个文本框。单击按钮时，将调用 viewmodel 方法，并设置 2 个字符串属性的值，然后通过 WPF 数据绑定更新文本框中的文本。

这就是概念，但我会阅读 MVVM，然后看看比较 MVVM 框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:39:53.247

示例背后的代码

在您的 xaml 中，

```
<Button Click="Button_Click_1">Click me</Button>
<TextBox Name="myTextBox" HorizontalAlignment="Stretch" /> 
```

在你后面的代码中，

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        this.myTextBox.Text = "Hello World";
    }
} 
```

基本上这个概念是，如果你给你的控件一个名字，你可以在后面的代码中通过直接调用这个名字来操纵它的属性，如我的例子所示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T23:07:16.747

因此，假设您正在使用带有 DataBinding 的 MVVM，让我们来看看您的可视化树...

某处你有一个按钮......

```
<Button OnClick="MyButtonOnClick">
// Your Button Content Here
</Button> 
```

在某处你有一个文本框，作为你的`Button`.

```
 <TextBox Binding="FirstName" /> 
```

我只演示了 View XAML 的一些部分，以便您知道如何进行 DataBind -***在代码隐藏中更新文本框的内容不是视图的工作。***这一切都应该通过适当的数据绑定来处理，这不需要您更改可视化树或设计。

ViewModel 中的 person 类负责提醒 UI 数据已更改。它看起来像这样：

```
public class Person
{
  private proeprty _firstName;
  public property FirstName
  {
    get
    {
      return _firstName;
    }
    set
    {
      _firstName = value;
      NotifyPropertyChanged("FirstName"); // This is required to notify the UI. Specific implementation will depend on your property notification pattern.
    }
  } 
```

正确绑定的控件，例如您的`TextBox`，“侦听”它们绑定到的属性何时通知它们已更改，例如类的`FirstName`属性`Person`。所以在你后面的代码中，你不需要指示文本框更新；他们是有约束力的。绑定文本框已经知道要监听来自它们绑定的属性的更改通知。

但是您仍然需要让您的代码更新 ViewModel 中的属性。这是在您的按钮单击事件处理程序中完成的：

```
public partial class MyView
{
  ... // All your other code

  // Event Handler for the Button Click
  public void MyButtonOnClick(object sender, RoutedEventArgs e)
  {
    Person myPerson = this.DataContext as Person;
    myPerson.FirstName = "Some New Value"; // When I set this property, it will automatically notify any listeners that its contents have changed.
  }

  ...
} 
```

这个 MVVM 的初始示例演示了您应该如何在应用程序层之间分离您的关注点。

View 负责处理用户交互、向 ViewModel 发送数据和从 ViewModel 检索数据——其他任何事情都*超出*了 View 的范围。

ViewModel 负责在 Model 中发送/检索数据，并在数据发生更改时广播通知（通过用户交互或由于 ViewModel 另一部分的更新 - 其他任何事情都*超出*了 ViewModel的范围. ViewModel 不关心谁在听，它只关心通过通知广播变化。

当然，您的模型可以对数据库或其他存储库中的数据进行建模。它不关心 ViewModel 的存在；使用模型是 ViewModel 的工作。

# python - setuptools、easy_install 和自定义 pypi 服务器

> ID：15014180
> 
> 赞同：8
> 
> 时间：2013-02-21T23:24:04.533
> 
> 标签：python, pip, setuptools, easy-install, pypi

我有一个自定义 pypi 服务器正在运行，我想知道如何将所有对[https://pypi.python.org/](https://pypi.python.org/)的引用从那里指向我的自定义服务器？

我希望能够涵盖用户调用`pip`/`easy_install`包的情况（因此他们不必记住执行`-i`or ）`-f`以及有人`python setup.py install`在`install_requires`.`setup.py`

我可以做一些全局配置或设置来让所有这些不同的方法查看我的本地服务器吗？我想做一些网络代理类型的魔法来路由`http://pypi.python.org/`到我的自定义服务器将是一种方法，但不幸的是这不是一个选择。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-04T13:30:31.770

以下配置将禁用 pypi 存储库索引并使您的索引成为`pip`and使用的唯一索引`easy_install`。setuptools`install`命令基本上是`easy_install`在当前项目上运行命令的快捷方式。所以，这也行。

```
# Add the following to ~/.pydistutils.cfg for easy_install
[easy_install]
index_url = http://localhost:8000/

# Add the following to ~/.pip/pip.conf for pip
[global]
index-url = http://localhost:8000/ 
```

查看[easy_install](http://pythonhosted.org/distribute/easy_install.html#configuration-files)和[pip](http://www.pip-installer.org/en/latest/configuration.html#config-file)的文档以获取更多信息。

您可以为您的用户提供一个简单的 python 脚本，为他们创建这些配置文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-12T08:42:49.360

需要修改2个文件：</p>

**对于 distutils**

*   配置文件：[doc](https://docs.python.org/2/install/#location-and-names-of-config-files)

    *   `~/.pydistutils.cfg`对于Linux，
    *   `$HOME/pydistutils.cfg`适用于 Windows
*   内容：

    ```
    [easy_install]
    index_url = YOUR_URL 
    ```

这涉及诸如`python setup.py install`.

**对于点**

*   配置文件：[doc](https://pip.pypa.io/en/stable/user_guide/#config-file)

    *   `~/.pip/pip.conf`对于Linux，
    *   `$HOME/pip/pip.conf`适用于 Windows
*   内容：

    ```
    [global]
    index-url = YOUR_URL 
    ```

这涉及`pip install mypackage`命令。

# android - 不可重现的错误：类在预验证期间使用了不同的 *

> ID：15014186
> 
> 赞同：2
> 
> 时间：2013-02-21T23:24:23.843
> 
> 标签：android, proguard, preverify

我正在使用 ProGuard 来混淆和缩小我的应用程序，对于我和 99% 的用户来说，一切似乎都很好，但有时我会收到一个根本无法运行我的应用程序的用户的报告。它以以下模式崩溃：

```
01-05 13:20:57.273 W/dalvikvm(22002): Class resolved by unexpected DEX: MyClass;(0x418d1200):0x1d3ef00 ref [Lorg/apache/commons/lang3/time/FastDateFormat;] Lorg/apache/commons/lang3/time/FastDateFormat;(0x418d1200):0x1d5ebf8
01-05 13:20:57.273 W/dalvikvm(22002): (MyClass; had used a different Lorg/apache/commons/lang3/time/FastDateFormat; during pre-verification)
01-05 13:20:57.273 W/dalvikvm(22002): Exception Ljava/lang/IllegalAccessError; thrown while initializing MyClass; 
```

我用 MyClass 替换了实际的类名。显然我在我的项目中使用了 Apache Commons Lang 并且`FastDateFormat`似乎导致了这个问题。无论如何，我都无法重现崩溃。

我阅读了具有类似问题的问题，但它们都集中在 Maps API 或 Support 库上，并且无条件出现。我的问题似乎出现在我的一小部分用户身上，尤其是我。

有任何想法吗？

# c++ - 类内的 C++ SDL cin 字符串导致崩溃

> ID：15014188
> 
> 赞同：0
> 
> 时间：2013-02-21T23:24:45.853
> 
> 标签：c++, sdl

SDL 出现问题并且我的程序崩溃，它被定位为`cin >> var`在成员函数中使用的任何问题。

这是我拥有的一些会产生错误的代码-

```
#include "SDL_Wrapper.h"
#include <iostream>
#include <string>

using namespace std;

class Image {
public:
    Image();
    ~Image();
    string getImageName();
protected:
    string imageName;
};

Image::Image() {
}

Image::~Image() {
    //imageName = "";
}

string Image::getImageName() {
    string name;
    cin >> name;
    return name;
}

int main(int argc, char * argv[]) {
    Image img;
    img.getImageName();
    return 0;
} 
```

有谁知道为什么会发生此错误以及任何解决方法？字符串上的 cin 会导致这个问题似乎很奇怪。

# sql - 添加循环以返回在 SELECT 查询中组合在一起的各个行

> ID：15014189
> 
> 赞同：0
> 
> 时间：2013-02-21T23:24:46.420
> 
> 标签：sql, loops, group-by

我正在使用以下查询返回分组在一起的行：

`SELECT Work, COUNT(*) AS count, Amount, SUM(Amount) AS Total FROM work_times GROUP BY Work, Amount`

我想对此进行调整，以便我可以在分组数据下方列出每个分组的各个日期。

因此，如果我有下表：

身份证 | 工作 | 金额 | 日期

1 | 治疗会议 | 40 英镑 | 2013-02-02
2 | 顾问会议 | 50 英镑 | 2013-02-01
3 | 治疗会议 | 20 英镑 | 2013-02-03
4 | 顾问会议 | 50 英镑 | 2013-02-08
5 | 顾问会议 | 50 英镑 | 2013-02-15
6 | 治疗会议 | 40 英镑 | 2013-02-09
7 | 顾问会议 | 50 英镑 | 2013-02-22
8 | 治疗会议 | 40 英镑 | 2013-02-16
9 | 治疗会议 | 20 英镑 | 2013-02-10
10 | 顾问会议 | 50 英镑 | 2013-03-01

查询将能够返回：

5 次咨询会议，每次 50 英镑：250 英镑

2013 年 2 月 1 日 2013 年2 月
8 日 2013年 2 月
15 日 2013年 2 月
22 日 2013 年
3 月 1 日

3 次治疗，每次 40 英镑：120 英镑

2013 年 2月 2 日 2013 年 2 月
9 日 2013年 2 月
16 日

2 次治疗，每次 20 英镑：40 英镑

2013 年 2 月3 日 2013 年 2 月
10 日

因为我在查询中将这些行分组在一起，所以我不确定如何引用各个行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:29:34.903

```
SELECT  b.*, c.date2
FROM    (
            SELECT  a.work, 
                    COUNT(*) totalCount, 
                    SUM(Amount) totalAmount
            FROM    tableName a
            GROUP   BY a.work, amount
        ) b
        INNER JOIN
        (
            SELECT  a.work, DATE_FORMAT(Date,'%D %M %Y') date2,
                    date
            FROM    tableName a
        ) c ON b.work = c.work
ORDER   BY b.work, b.totalCount, c.date 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/e0ec1/8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T00:06:22.963

下面的代码是我对**JW**答案的小修改：

```
SELECT  b.*, c.date2
FROM    (
            SELECT a.work, a.amount, 
                   COUNT(*) totalCount, 
                   SUM(Amount) totalAmount
            FROM tableName a
            GROUP BY a.work, a.amount
        ) b
        INNER JOIN
        (
            SELECT a.work, a.amount, DATE_FORMAT(Date,'%D %M %Y') date2,
                    date
            FROM tableName a
        ) c ON b.work = c.work and b.amount=c.amount
ORDER BY b.work, b.totalCount, c.date 
```

我在第一个子查询、第二个子查询和 JOIN 表达式中添加了**数量。**

希望这个链接可以工作：[http ://sqlfiddle.com/#!2/e0ec1/24](http://sqlfiddle.com/#!2/e0ec1/24)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T00:37:55.020

2 个查询和一个 UNION 运算符应提供您需要的格式。 [SQL小提琴](http://sqlfiddle.com/#!2/e0ec1/27)

```
 SELECT '' AS ID, Work, '' AS Date, Amount, SUM(Amount) AS Total
FROM TableName 
GROUP BY Work, Amount
UNION ALL
SELECT ID, Work, Date, Amount, '' AS Total
FROM TableName
ORDER BY Work, Amount, Date;
```

# air - 为普通屏幕和视网膜屏幕创建单个应用程序

> ID：15014193
> 
> 赞同：0
> 
> 时间：2013-02-21T23:25:13.317
> 
> 标签：air, retina-display

我只是很好奇如何开发一个适合普通屏幕和视网膜屏幕的应用程序。

我的意思是像 iPad 1、2 mini 和 iPad 3、4

您是否创建了两组具有不同分辨率的图像？

干杯比尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:45:06.470

You can either develop app just to fit a normal screen - and on retina screens, the device will convert each pixel into a 2x2 pixel block.

Or create an adaptive layout - ie: the app lays out its objects to fit any size screen (within reason) - i believe "liquid layout" is the customary term.

Assuming you are not using Flex, if you want an adaptive layout you will have to implement one yourself.

# url - 在 asio 中使用 ip 地址而不是 url

> ID：15014196
> 
> 赞同：1
> 
> 时间：2013-02-21T23:25:35.570
> 
> 标签：url, visual-c++, ip-address, boost-asio

我在 Windows 上使用 Boost::ASIO 版本 1.52.0 和 SSL 版本 C，在运行 Win 8 的测试机器上使用 VC++ 中的 Visual Studio 2008 代码。

我有一些代码可以成功连接到具有给定 URL 的 TCP 服务器：

```
// Create the resolver and query objects to resolve the host name in serverPath to an ip address.
boost::asio::ip::tcp::resolver resolver(*IOService);
boost::asio::ip::tcp::resolver::query query(serverPath, port);
boost::asio::ip::tcp::resolver::iterator EndpointIterator = resolver.resolve(query);
// Set up an SSL context.
boost::asio::ssl::context ctx(*IOService, boost::asio::ssl::context::tlsv1_client);
// Specify to not verify the server certificiate right now.
ctx.set_verify_mode(boost::asio::ssl::context::verify_none);
// Init the socket object used to initially communicate with the server.
pSocket = new boost::asio::ssl::stream<boost::asio::ip::tcp::socket>(*IOService, ctx);
//
// The thread we are on now, is most likely the user interface thread.  Create a thread to handle all incoming socket work messages.
// This thread is created for each connection to a server.
if (!RcvThreadCreated)
{
   WorkerThreads.create_thread(boost::bind(&SSLSocket::RcvWorkerThread, this));
   RcvThreadCreated = true;
   WorkerThreads.create_thread(boost::bind(&SSLSocket::SendWorkerThread, this));
}
// Try to connect to the server.  Note - add timeout logic at some point.
boost::asio::async_connect(pSocket->lowest_layer(), EndpointIterator,
   boost::bind(&SSLSocket::HandleConnect, this, boost::asio::placeholders::error)); 
```

根据一些研究，如果将 IP 地址替换为 serverPath 中的 URL，则无法使用上述解析 IP 地址的代码。看起来正确的方法是创建这样的端点：

```
const boost::asio::ip::address IP(boost::asio::ip::address::from_string(serverPath));
int iport = atoi(port.c_str());
boost::asio::ip::tcp::endpoint EP(IP, iport); 
```

这部分似乎可以编译。但是，稍后在 async_connect 方法中：

```
// Try to connect to the server.  Note - add timeout logic at some point.
boost::asio::async_connect(pSocket->lowest_layer(), EP,
boost::bind(&SSLSocket::HandleConnect, this, boost::asio::placeholders::error)); 
```

它会产生错误。我猜 async_connect 方法希望看到第二个参数的迭代器。但是，我不确定如何创建一个。

根据以下[链接](https://stackoverflow.com/questions/9040424/boost-asio-connect-using-an-ip-address)，答案表明可以使用套接字对象上的连接方法。但是，当我尝试这样做时：

```
pSocket->connect(EP); 
```

编译器给出错误 - 错误 C2039：

```
'connect' : is not a member of 'boost::asio::ssl::stream<Stream>' 
```

那么，有人可以展示一些简单的代码，提供一种使用 IP 地址而不是 URL 连接到服务器的方法吗？

如果这不可能，那么有没有办法从 IP 地址进行反向查找以获取 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:52:10.207

您的 async_connect() 代码行未编译，因为您正在传递成员函数指针而没有将实例绑定到它。您已经在代码的其他位置正确绑定了成员函数，所以我认为这只是一个疏忽。正确的行是这样的：

```
pSocket->next_layer().async_connect(
    EP,
    boost::bind(&SSLSocket::HandleConnect, this, boost::asio::placeholder::error)); 
```

至于您的原始问题，获取 IP 地址的端点，在 IP 地址查询上使用 ip::tcp::resolver 工作正常，因此您不必为名称和地址设置单独的代码路径。在 ssl::stream 上使用最低层() 来访问底层 ip::tcp::socket 是访问 connect() 和 async_connect() 的正确方法。

除了使用 ssl::context 创建 ssl::stream 并在建立连接后使用 async_handshake() 之外，您的 SSL 代码应该与您的 TCP 代码几乎相同。您也可以在 TCP 代码中使用最低层（）（它只是返回自身），这可以强调相似之处。

我不保证此代码可以编译，因为我从工作代码中对其进行了简化，但是如果您执行 async_resolve()，您的解析处理程序方法将类似于（`sp_`是套接字/流指针）：

```
void Pimpl::handleResolve(
  const boost::system::error_code& ec,
  boost::asio::ip::tcp::resolver::iterator endpointIterator) {
  if (ec) {
    // error handling here
    return;      
  }
  sp_->lowest_layer().async_connect( 
     *endpointIterator,
     boost::bind(&Pimpl::handleConnect, this, endpointIterator, boost::asio::placeholder::error));
} 
```

然后您的连接处理程序将看起来像（这会尝试端点，直到它得到一个可以工作或不再有的端点）：

```
void Pimpl::handleConnect(
  boost::asio::ip::tcp::resolver::iterator endpointIterator,
  const boost::system::error_code& ec) {
  if (!ec) {
    sp_->async_handshake(
      boost::asio::ssl::stream_base::client,
      boost::bind(&Pimpl::handleHandshake, this, boost::asio::placeholder::error));
  }
  else if (++endpointIterator != boost::asio::ip::tcp::resolver::iterator()) {
    // Try connecting to the next endpoint.
    sp_->lowest_layer().close();
    sp_->lowest_layer().async_connect(
      *endpointIterator,
      boost::bind(&Pimpl::handleConnect, this, endpointIterator, boost::asio::placeholder::error));
  }
  else {
    // error handling here
  }
} 
```

唯一使它特定于 ssl::stream 指针而不是 ip::tcp::socket 指针的行是 async_handshake() 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:02:51.807

我找到了解决这个问题的方法。我正在使用 ssl::stream 类作为套接字对象，错误的原因是因为它没有连接方法。但是，它确实有一个 next_layer() 方法，该方法返回一个可以调用 connect 或 async_connect 方法的对象。我在编译 async_connect 时遇到问题，但 connect 方法有效。然后我像这样调用我的 HandleConnect 方法：

```
boost::system::error_code EC;
pSocket->next_layer().connect(EP, EC);
HandleConnect(EC); 
```

为了回答@SamMiller 对代码的请求，它在下面给出。我仍然想知道如何为 boost::asio::async_connect 调用的端点创建一个迭代器，以及如何调用 next_layer 对象的 async_connect 方法。

```
void SSLSocket::Connect(SSLSocket* psSLS, const string& serverPath, string& port)
{
   // Connects to the server.
   // serverPath - specifies the path to the server.  Can be either an ip address or url.
   // port - port server is listening on.
   //
   try
   {
      Locking CodeLock(SocketLock); // Single thread the code.
      // If the user has tried to connect before, then make sure everything is clean before trying to do so again.
      if (pSocket)
      {
         delete pSocket;
         pSocket = 0;
      }                                                                                                  
      // If serverPath is a URL, then resolve the address.
      if ((serverPath[0] < '0') || (serverPath[0] > '9')) // Assumes that the first char of the server path is not a number when resolving to an ip addr.
      {
         // Create the resolver and query objects to resolve the host name in serverPath to an ip address.
         boost::asio::ip::tcp::resolver resolver(*IOService);
         boost::asio::ip::tcp::resolver::query query(serverPath, port);
         boost::asio::ip::tcp::resolver::iterator EndpointIterator = resolver.resolve(query);
         // Set up an SSL context.
         boost::asio::ssl::context ctx(*IOService, boost::asio::ssl::context::tlsv1_client);
         // Specify to not verify the server certificiate right now.
         ctx.set_verify_mode(boost::asio::ssl::context::verify_none);
         // Init the socket object used to initially communicate with the server.
         pSocket = new boost::asio::ssl::stream<boost::asio::ip::tcp::socket>(*IOService, ctx);
         //
         // The thread we are on now, is most likely the user interface thread.  Create a thread to handle all incoming socket work messages.
         // This thread is created for each connection to a server.
         if (!RcvThreadCreated)
         {
            WorkerThreads.create_thread(boost::bind(&SSLSocket::RcvWorkerThread, this));
            RcvThreadCreated = true;
            WorkerThreads.create_thread(boost::bind(&SSLSocket::SendWorkerThread, this));
         }
         // Try to connect to the server.  Note - add timeout logic at some point.
         boost::asio::async_connect(pSocket->lowest_layer(), EndpointIterator,
            boost::bind(&SSLSocket::HandleConnect, this, boost::asio::placeholders::error));
      }
      else
      {
         // serverPath is an ip address, so try to connect using that.
         //
         // Create an endpoint with the specified ip address.
         const boost::asio::ip::address IP(boost::asio::ip::address::from_string(serverPath));
         int iport = atoi(port.c_str());
         const boost::asio::ip::tcp::endpoint EP(IP, iport);
         // Set up an SSL context.
         boost::asio::ssl::context ctx(*IOService, boost::asio::ssl::context::tlsv1_client);
         // Specify to not verify the server certificiate right now.
         ctx.set_verify_mode(boost::asio::ssl::context::verify_none);
         // Init the socket object used to initially communicate with the server.
         pSocket = new boost::asio::ssl::stream<boost::asio::ip::tcp::socket>(*IOService, ctx);
         //
         // The thread we are on now, is most likely the user interface thread.  Create a thread to handle all incoming socket work messages.
         // This thread is created for each connection to a server.
         if (!RcvThreadCreated)
         {
            WorkerThreads.create_thread(boost::bind(&SSLSocket::RcvWorkerThread, this));
            RcvThreadCreated = true;
            WorkerThreads.create_thread(boost::bind(&SSLSocket::SendWorkerThread, this));
         }
         // Try to connect to the server.  Note - add timeout logic at some point.
         // pSocket->next_layer().async_connect(EP, &SSLSocket::HandleConnect);
         boost::system::error_code EC;
         pSocket->next_layer().connect(EP, EC);
         if (EC)
         {
            // Log an error.  This worker thread should exit gracefully after this.
            stringstream ss;
            ss << "SSLSocket::Connect: connect failed to " << sClientIp << " : " << uiClientPort << ".  Error: " << EC.message() + ".\n";
            Log.LogString(ss.str(), LogError);
         }
         HandleConnect(EC);
      }
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::Connect: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
} 
```

这是以下行时生成的错误：

```
pSocket->next_layer().async_connect(EP, &SSLSocket::HandleConnect); // Does not compile 
```

替换为：

```
boost::system::error_code EC;
pSocket->next_layer().connect(EP, EC); // Compiles and works properly. 
```

错误信息：

```
1>c:\boost_1_52_0\boost\asio\basic_socket.hpp(706) : error C2064: term does not evaluate to a function taking 1 arguments
1>        c:\users\bob\documents\visual studio 2008\projects\attackpoker1\win32client\sslsockets\sslsocket.cpp(114) : see reference to function template instantiation 'void boost::asio::basic_socket<Protocol,SocketService>::async_connect<void(__thiscall SSLSocket::* )(const boost::system::error_code &)>(const boost::asio::ip::basic_endpoint<InternetProtocol> &,const ConnectHandler &)' being compiled
1>        with
1>        [
1>            Protocol=boost::asio::ip::tcp,
1>            SocketService=boost::asio::stream_socket_service<boost::asio::ip::tcp>,
1>            InternetProtocol=boost::asio::ip::tcp,
1>            ConnectHandler=void (__thiscall SSLSocket::* )(const boost::system::error_code &)
1>        ] 
```

# firefox - 背景与 CSS 阴影混合的问题

> ID：15014206
> 
> 赞同：1
> 
> 时间：2013-02-21T23:26:39.793
> 
> 标签：firefox, css, shadow

我正在尝试使用基本上是径向渐变的文本制作元素。我想我可以通过取一个圆形的白色容器然后添加一个白框阴影来做到这一点，但是阴影开始的颜色和 div 的背景颜色在 chrome 中不匹配，并且边框半径属性是在 Firefox 中造成奇怪的边框。

我喜欢一些输入，我为此创建了一个代码笔，但这里是代码......

[http://codepen.io/syren/pen/tcdBz](http://codepen.io/syren/pen/tcdBz)

```
div.feature{
  background:#000;
  width:100%;
  height: 300px;
}

div.text{
  width: 300px;
  height: 300px;
  background: white;
  padding: 130px 0 0;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border-radius: 160px;
  text-align: center;
  text-transform: uppercase;
  font-weight: bold;
  box-shadow: 0 0 50px 50px #fff;
  margin: 0 auto;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:49:39.500

这是一个修复/解决方法：

```
div.text{
  width: 300px;
  height: 170px;
  background: white;
  padding: 130px 0 0;

  border:solid 1px white;
  border-radius: 50%;
  text-align: center;
  text-transform: uppercase;
  font-weight: bold;
  box-shadow: 0 0 10px #fff,0 0 20px #fff,0 0 50px 30px #fff,0 0 50px 40px #fff;
  margin: 0 auto;
} 
```

有问题的边框有背景的颜色，所以现在`box-shadow`覆盖它

[**更新的笔**](http://codepen.io/jotavejv/pen/HAGch)

# php - 刮板功能中的PHP变量

> ID：15014208
> 
> 赞同：0
> 
> 时间：2013-02-21T23:27:04.157
> 
> 标签：php, web-scraping, scraperwiki

我正在使用 ScraperWiki 构建一个简单的屏幕抓取工具，从在线商店获取链接。商店有多个页面，所以我想从第一页获取所有链接，在寻呼机中找到“下一步”按钮，转到该 url，从那里找到所有链接，转到下一页，依此类推等等。

这就是我所在的地方。ScraperWiki 使用简单的 HTML DOM 和 CSS 选择器：

```
<?php 
require 'scraperwiki/simple_html_dom.php';  

function nextPage(){
    $next = $html->find("li.pager-next a"); 
    $nextUrl = 'http://www.domain.com';
    $nextUrl .= $next->href . "\n"; 
    getLinks($nextUrl);
} 

function getLinks($url){    // gets links from product list page   

    $html_content = scraperwiki::scrape($url);
    $html = str_get_html($html_content);

    $x = 0;

    foreach ($html->find("div.views-row a.imagecache-product_list") as $el) { 
        $url = $el->href . "\n";  
        $allLinks[$x] = 'http://www.domain.com';
        $allLinks[$x] .= $url;
        $x++;
    }

    nextPage();
}

getLinks("http://www.domain.com/foo/bar");

print_r($allLinks);

?> 
```

该`getLinks()`函数在不在函数中时工作正常，但是当我将它们放入函数时出现“未声明的变量”错误。我的问题是：

在 PHP 中，我可以像在 Javascript 中那样声明要在整个脚本中使用的空变量/数组吗？我在 Stack 上阅读了一些答案，这似乎暗示不需要声明，这似乎很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:34:31.523

如果您显示了整个错误，它可能类似于

> 未定义变量：$getLinks

可能是因为你的意思是这样的： `getLinks($nextUrl);`

不是这个： `$getLinks($nextUrl);`

它在`nextPage`函数之外工作正常，因为您在那里正确调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:38:39.767

```
class ScraperWiki{
    public $variable;
    protected $variable;
    private $variable;

    // here you have the option of choosing how your functions and variables are treated...

     private function getLinks(){...}

     public function someOtherFunction(){
          $this->getLinks(); //will call the function in this Class
     }
} 
```

另外，您还有语法错误 $getLinks($nextUrl); 应该是 getLinks($nextUrl)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T22:14:24.200

在其他答案的帮助下自己找到了解决方案 - 必须在脚本开头声明 $allLinks ，在任何函数之外。在 Javascript 中足以使其成为全局变量，但在 PHP 中，您似乎还必须将其声明为全局 INSIDE 函数，如下所示：

```
$allLinks = array();

function foo(){
    global $allLinks
    ...//stuff
} 
```

这终于让我的代码工作了。

# http - 如何使用 Reddit 的 API 登录？

> ID：15014210
> 
> 赞同：3
> 
> 时间：2013-02-21T23:27:16.147
> 
> 标签：http, curl, http-post, reddit

我正在尝试使用 Reddit API 访问我的 Reddit 用户的帐户-其 API 页面上列出的[POST 登录端点。](http://www.reddit.com/dev/api#POST_api_login)

我试过这个：

```
curl -i -X POST -d '{"user":"myusername", "passwd":"mypassword", "rem":"true" }' http://www.reddit.com/api/login 
```

但它说密码错误（我使用相同的凭据登录网站，所以我不知道出了什么问题）：

```
HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8
{
    "jquery": 
             [[0, 1, "call", ["body"]], [1, 2, "attr", "find"], 
              [2, 3, "call", [".status"]], [3, 4, "attr", "hide"], 
              [4, 5, "call", []],  [5, 6, "attr", "html"], 
              [6, 7, "call", [""]], [7, 8, "attr", "end"], 
              [8, 9, "call", []], [0, 10, "attr", "find"], 
              [10, 11, "call", [".error.WRONG_PASSWORD.field-passwd"]], 
              [11, 12, "attr", "show"], [12, 13, "call", []], 
              [13, 14, "attr", "text"], [14, 15, "call", ["invalid password"]], 
              [15, 16, "attr", "end"], [16, 17, "call", []]]
 } 
```

但是，这有效：

```
curl -i -c Cookie.txt -d '{"user":"myusername", "passwd":"mypassword" , "rem":"true"}' http://www.reddit.com/api/login 
```

产量：

```
{
     "jquery": 
              [[0, 1, "call", ["body"]], 
               [1, 2, "attr", "find"], 
               [2, 3, "call", [".status"]], 
               [3, 4, "attr", "hide"], 
               [4, 5, "call", []], 
               [5, 6, "attr", "html"], 
               [6, 7, "call", [""]], 
               [7, 8, "attr", "end"], 
               [8, 9, "call", []], 
               [0, 10, "attr", "find"], 
               [10, 11, "call", [".error.RATELIMIT.field-vdelay"]], 
               [11, 12, "attr", "show"], 
               [12, 13, "call", []], 
               [13, 14, "attr", "text"], 
               [14, 15, "call", 
                 ["you are doing that too much. try again in 4 minutes."]],
               [15, 16, "attr", "end"], [16, 17, "call", []]]
} 
```

这也适用：

```
curl -b Cookie.txt http://www.reddit.com/api/me.json 
```

问题：

*   有谁知道如何使用 Reddit API 登录 Reddit？

*   有没有更简单的方法通过 HTTP Post 传递凭据以正确登录？

*   为什么它从我的初始卷曲中显示无效密码？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-02T00:59:50.223

以下是如何使用 curl 登录 reddit 的正确示例：

```
curl -duser=USERNAME -dpasswd=PASSWORD -dapi_type=json https://ssl.reddit.com/api/login 
```

通过传递，`api_type=json`您可以获得有意义的 json 输出，而不是基于 reddit 的特定 jquery 输出。

```
{"json": {"errors": [],
          "data": {"modhash": "<REMOVED>",
                   "cookie": "<REMOVED>"}
         }
} 
```

Note that reddit also properly uses the set-cookie header so that a proper http client / library will take advantage of the session for subsequent requests.

Your example did not work because you were not properly sending the form parameters. The example that you thought might have worked, in-fact did not. You were receiving a rate-limit response for failing to login too many times.

# visual-studio-2012 - Visual Studio 2012 源代码管理资源管理器中的“查看为”

> ID：15014212
> 
> 赞同：1
> 
> 时间：2013-02-21T23:27:28.610
> 
> 标签：visual-studio-2012

在 VS 2010 中，您可以选择“查看为”作为以 VS 以外的方式（如 Dreamweaver）打开文件的一种方式。那个功能没了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-31T19:01:49.247

您在 vs2010 中看到了“查看为”选项，因为您安装了 tfs 电动工具。[vs2012 中的解决方案是从这里](http://visualstudiogallery.msdn.microsoft.com/b1ef7eb2-e084-4cb8-9bc7-06c3bad9148f)安装 vs2012 powertools 。

# c# - C++/CLI 等效于 C# 检查关键字

> ID：15014214
> 
> 赞同：3
> 
> 时间：2013-02-21T23:28:03.617
> 
> 标签：c#, c++, c++-cli, overflow

C++/CLI 中的托管代码有没有办法在算术溢出时引发异常？C# 有选中的关键字和全局项目标志来启用这些，但我在 C++/CLI 中都找不到...

我的情况是我将 C++ 库包装在 .NET 中。有时 C++ 本机代码会溢出。我正在/正在考虑将一些敏感的计算转移到现有的 C++/CLI 包装器中，但也许这是不可能的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T01:59:07.653

链接的副本没有意义，C++/CLI 遵循 C++ 约定。C++ 没有用于检测算术溢出的内置机制。

使用*checked*和*unchecked*关键字最初计划用于 C++/CLI 的未来扩展。 [Ecma-372](http://www.ecma-international.org/publications/standards/Ecma-372.htm)是当前的语言标准，并在附录 F.2.1 中提出了此扩展。然而，这从未发生过，也不太可能被实施。

因此，您必须自己实施溢出检查。你会在[这个问题](https://stackoverflow.com/questions/199333/best-way-to-detect-integer-overflow-in-c-c)中找到一些指导。

# symfony - 如何使用 symfony2.0 设置默认选中一个 filter_checkbox 选择字段？

> ID：15014215
> 
> 赞同：2
> 
> 时间：2013-02-21T23:28:05.830
> 
> 标签：symfony, filter, checkbox, choice

标题几乎说明了一切，但这里是我的代码片段来说明我正在尝试做的事情。

这是表单类型

```
//[...]
class ActivityFilterType extends AbstractType
{
  //[...]
  public function buildForm(FormBuilder $builder, array $options)
  {
        $builder->add('filter_checkbox', 'choice', array(
                'label'    => $this->translator->trans('form.label.sexFilter'),
                'choices'  => array(1 => ucfirst($this->translator->transChoice('sex.female', 2)), 2 => ucfirst($this->translator->transChoice('sex.male', 2))),
                'multiple' => true,
                'expanded' => true,
                'required' => false,
                'empty_value' => false,
                /*
                   // those ones didn't make it
                   'attr'     => array( 1=>array('checked' => 'checked'), 2=>array('checked' => 'checked') ),
                   'preferred_choices' => array(1, 2),
                */
        ));
  }
  //[...]
} 
```

和表格模板

```
<div class="filter-message">
    <div class="select-group">
        {{ form_label(form.filter_dropdown) }}
        <div class="input control-group filter" >
            {{ form_widget(form.filter_dropdown) }}
        </div>
    </div>
    <div class="checkbox">
        {{ form_label(form.filter_checkbox) }}
        {{ form_widget(form.filter_checkbox, {'attr':{'checked':checked}}) }} 
        <!-- that didn't do it neither -->
    </div>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T23:25:10.430

我在@Squazic指出的上[一篇](https://stackoverflow.com/users/1149992/squazic)[文章中关注了](https://stackoverflow.com/questions/8073236/symfony2-setting-a-default-choice-field-selection)[@bentidy](https://stackoverflow.com/users/1206985/bentidy)的回答。这很简单

所以对我来说，因为我希望默认选中两个性别复选框，所以我必须将 data 参数添加为数组（它同时接受单个值和数组）。

它是这样的：

```
//[...]
class ActivityFilterType extends AbstractType
{
  //[...]
  public function buildForm(FormBuilder $builder, array $options)
  {
    $builder->add('filter_checkbox', 'choice', array(
            'label'    => $this->translator->trans('form.label.sexFilter'),
            'choices'  => array(1 => ucfirst($this->translator->transChoice('sex.female', 2)), 2 => ucfirst($this->translator->transChoice('sex.male', 2))),
            'multiple' => true,
            'expanded' => true,
            'required' => false,
            'empty_value' => false,
            'data' => array(1,2) // female value is 1 and male value is 2
    ));
  }
  //[...]
} 
```

这是相关的文档：[http ://symfony.com/doc/2.0/reference/forms/types/field.html](http://symfony.com/doc/2.0/reference/forms/types/field.html)

多谢你们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:59:11.673

您在控制器中执行此操作：

```
$activityFilter = new ActivityFilter();
$activityFilter->setFilterCheckbox(1);
$form = $this->createForm(new ActivityFilterType(), $activityFilter);
... 
```

顺便说一句：你不应该命名你的属性`filter_checkbox`，而是让它更具体地存储什么。例如`sexFilter`在这种情况下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T02:40:11.780

如果您有一个复选框数组，则必须将“数据”设置为要选中的复选框值的数组。像那样：

```
'data' =>array(0,1,2),'choices'=>array(0=>'Permitem Acesso Livre', 1=>'Exigem Cadastro', 2=>'Cobram Mensalidades ou Taxas') 
```

就是这样。

# c - C中的二叉树插入排序

> ID：15014216
> 
> 赞同：0
> 
> 时间：2013-02-21T23:28:07.777
> 
> 标签：c, data-structures, recursion, tree, binary-tree

嘿，任何人都可以解释如何在 C 语言中使用插入排序对二叉树进行排序，其中时间复杂度是一个问题。我只是在学习编码。谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:29:59.880

值得注意的是，这里使用了特定的术语。*二叉树*是一种数据结构，其中每个节点最多有两个孩子。二叉树中的节点排序没有约定。

*二叉搜索树*是一种二叉树，对于给定节点 N，N 的左子树中的所有节点都被认为“小于”N，而 N 的右子树中的所有节点都被认为“大于”N。您也可以让节点被认为“等于”树中的 N，只要您始终将它们定义为放在左子树或右子树中。

正如其他人所建议的那样，最好的办法是修改代码以构造二叉搜索树而不是普通的二叉树，或者将二叉树转换为线性数据结构并对其进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:48:30.760

如果您以传统意义上的二叉树编码，那么当您将项目添加到树时，它将保留排序顺序。您可以通过遍历树来按顺序获取项目的完整列表。我建议你阅读：

*   [http://en.wikipedia.org/wiki/Tree_traversal](http://en.wikipedia.org/wiki/Tree_traversal)

*   [http://en.wikipedia.org/wiki/Binary_tree](http://en.wikipedia.org/wiki/Binary_tree)

也看看： http: [//nova.umuc.edu/~jarc/idsv/lesson1.html](http://nova.umuc.edu/~jarc/idsv/lesson1.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-25T12:02:09.387

```
#include <stdio.h>
#include <malloc.h>
#define FIN "algsort.in"
#define FOUT "algsort.out"

struct Node {
   int val;
   struct Node *left;
   struct Node *right;
};

typedef struct Node node;

void insert(node **bt, node *Node) {

if( !(*bt) ) {

     *bt = Node;

} else {

        if( Node->val < (*bt)->val )

            insert(&((*bt)->left), Node);

        else

            insert(&((*bt)->right), Node);
 }
 }

 void printout(struct Node *node) {

   if(node->left) printout(node->left); 

   printf("%d ", node->val);  

   if(node->right) printout(node->right);
 }

 void postorder(struct Node *node) {

      if(node->left) printout(node->left);   

      if(node->right) printout(node->right); 

      printf("%d ", node->val);  
 }

 int main () {

     int i, n, elem;    

     node *curr; 

     freopen(FIN, "r", stdin);

     freopen(FOUT, "w", stdout);

     node *bt = NULL;

     scanf("%d", &n);

     for(i = 0; i < n; ++i) {

        scanf("%d", &elem); 

        curr = malloc( sizeof(struct Node) );

        curr->val = elem;

        curr->left = NULL;

        curr->right = NULL;

        insert(&bt, curr );

     }

    printout( bt ); 

    return(0);
  } 
```

假设 algsort.in 包含以下整数数组：

algsort.int -> 9,8,7,6,5,4,3,2,0,1,-1;

algsort.out -> -1,0,1,2,3,4,5,6,7,8,9

# java - 如何在暂停时使活动对本地广播做出反应？

> ID：15014217
> 
> 赞同：3
> 
> 时间：2013-02-21T23:28:10.117
> 
> 标签：java, android, android-activity, broadcast

[`LocalBroadcastManager`](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)使活动（如果有的话）对活动暂停或停止时发送的广播做出反应的最佳方法是什么。如果与正常广播不同，我找不到太多细节`LocalBroadcastManager`，但如果活动在后台，似乎仍然会被称为事件。但这会导致一些问题，因为只要不显示活动，就无法进行一些 UI 修改。

这就是为什么我更愿意在活动回到顶部时处理所有广播。但是我该怎么做。我正在考虑一个队列，它将获取一个可运行的列表，当活动恢复到运行状态时，这些可运行列表会被执行。但我认为这是某种矫枉过正，因为 android surly 确实有一个机制。

那么这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:49:06.463

我过去所做的是让我的活动注册一个接收器 onResume 并取消注册 onPause。

当您完成创建证书后，将更新视图和发送广播所需的任何信息保存到本地存储。

如果活动正在运行，它将接收广播并自行更新。如果它被暂停，您应该读取本地存储 onResume 并相应地更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:35:38.987

毕竟我找到了适合我需要的解决方案。我创建了一个 BroadcastReceiver，用作我的活动的子类。每当活动进入暂停状态时，它都会在我的 BroadcastReceiver 上调用 .pause()。从那时起，所有传入的 Intent 都将被放入队列中，并将在 Activity 调用 .unpause() 时刷新。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-06T05:45:11.550

为什么不简单地取消注册接收器 onDestroy？那么当activity暂停时，你仍然可以在receiver中执行代码吗？

# asp.net-mvc - 编写单元测试来验证所有 ASP.NET MVC 控制器是否继承了一个基本控制器

> ID：15014218
> 
> 赞同：4
> 
> 时间：2013-02-21T23:28:14.450
> 
> 标签：asp.net-mvc, unit-testing, inheritance, controller

感谢您提前回答。我刚刚开始研究单元测试 asp.net mvc web 应用程序。

我有几个控制器，所有这些都从 BaseController 继承（这个 BaseController 负责菜单、租户检查等）。我想知道是否有一种方法可以对所有控制器进行单元测试，以确保它是从 BaseController 继承的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T00:00:15.630

这听起来似乎更适合静态分析，例如 Visual Studio 的代码分析功能（又名“FxCop”）。但是我以前写过代码分析规则，我不确定我是否会推荐它，除非你满头头发，想把头发都拔掉！

回到单元测试：

在您的单元测试中，策略是在您的控制器程序集中找到所有控制器类型并确保它们具有正确的基类。这是一些伪代码：

```
Type[] allTypes = typeof(SomeTypeInTheAssembly).Assembly.GetExportedTypes();
Type[] allControllerTypes = allTypes.Where(
    t => typeof(IController).IsAssignableFrom(t));
Type[] allControllerTypesExceptBaseClass = allControllerTypes.Except(
    t => t == typeof(BaseController);

// Assert that all controllers derive from BaseController
Assert.True(allControllerTypesExceptBaseClass.All(
    t => typeof(BaseController).IsAssignableFrom(t)) 
```

# mysql - 连接到实体框架

> ID：15014219
> 
> 赞同：0
> 
> 时间：2013-02-21T23:28:18.837
> 
> 标签：mysql, entity-framework

我最近开始在 Visual Studio 中使用实体框架。我真的很喜欢它，以及它如何为我创建 SQL 数据库。我唯一无法开始工作的是连接并设置 MySQL 数据库。我看到，自`Connector/net 6.5.5`EF 以来，有一些 Visual Studio 集成，但我似乎无法找出究竟是什么。`EF`使用的最佳做法是`MySQL`什么？

# apache - .htaccess 访问限制不起作用

> ID：15014225
> 
> 赞同：0
> 
> 时间：2013-02-21T23:28:42.133
> 
> 标签：apache, .htaccess

刚刚将我们的网站从共享网络托管移动到 vps，突然间用户可以浏览目录。我的 .htaccess 文件中有代码在最后一个服务器上停止了它，但现在它被忽略了。

我将此添加到 /etc/apache2/httpd.conf 但似乎没有帮助

```
<Directory />
  AllowOverride All
</Directory> 
```

容器正在运行 ubuntu 10.04

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:45:41.973

也许问题与 Order 指令有关。

尝试修改如下所示的行：

```
<Directory />
    Options FollowSymLinks
    AllowOverride None
    Order deny,allow
    Allow from all
</Directory> 
```

更多信息可以在这里找到： [http ://httpd.apache.org/docs/2.2/pt-br/mod/mod_authz_host.html#order](http://httpd.apache.org/docs/2.2/pt-br/mod/mod_authz_host.html#order)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:31:20.533

确保您`Options -Indexes`的 htaccess 或虚拟主机中有。

# oracle10g - 如何使用 oracle 根据当前时间显示“早安”或“下午好”或“晚安”

> ID：15014227
> 
> 赞同：-3
> 
> 时间：2013-02-21T23:29:03.817
> 
> 标签：oracle10g

如何根据当前时间显示“早上好”或“下午好”或“晚安”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:17:48.607

声明光标 CR 是从 DUAL 中选择 SYSDATE；

开始

FOR I 在 CR 循环中

IF TO_CHAR(I.SYSDATE,'HH24')>=0 AND TO_CHAR(SYSDATE,'HH24')<12 THEN

```
Dbms_output.put_line(' GOOD MORNING'); 
```

ELSIF TO_CHAR(I.SYSDATE,'HH24')>=12 AND TO_CHAR(SYSDATE,'HH24')<18 THEN

```
Dbms_output.put_line('GOOD EVENING '); 
```

别的

```
Dbms_output.put_line('GOOD NI8 '); 
```

万一;

结束循环；

结尾;

# authentication - 外部网站的 Salesforce 登录验证

> ID：15014229
> 
> 赞同：0
> 
> 时间：2013-02-21T23:29:14.143
> 
> 标签：authentication, salesforce

我们有一个外部应用程序，我们想使用 salesforce.com 对其进行身份验证。我已经阅读了有关使用 OAuth 的 salesforce.com 文档，但我不清楚如何实现此功能（我们不希望客户端手动创建客户端密钥）。基本上我们希望有人访问我们的系统，但登录身份验证将由 Salesforce 验证。想象一个使用 Salesforce.com 凭据进行身份验证的网站。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:31:17.420

您可以像任何其他 OAuth 外部应用程序一样进行设置。从 Salesforce 获得 OAuth 令牌后，您还将在同一数据包中收到用户标识符。然后你可以用这个标识符做你想做的事。

有关如何设置 OAuth2 身份验证的信息，请参阅[此文档。](http://www.salesforce.com/us/developer/docs/api_streaming/Content/code_sample_auth_oauth.htm)

注意：需要创建客户端 ID，但只能创建一次。它可以在开发人员组织上创建，而不需要在每个客户端组织上创建。

# java - 读取 Excel 工作表时如何知道单元格是否返回空值？

> ID：15014231
> 
> 赞同：4
> 
> 时间：2013-02-21T23:29:32.247
> 
> 标签：java, apache-poi

我正在从 Excel 工作表中的某些特定单元格中读取值。这些单元格通常包含字符串，但有时它们可​​能是空白的（因此可能返回空白或空值）。我正在使用以下代码来获取单元格数据：

```
Cell cellValue = row.getCell(10, Row.RETURN_NULL_AND_BLANK);
List.add(cellValue.getStringCellValue()); 
```

但是，当我运行此代码时，我得到一个`NullPointerException`. 任何人都可以指出什么是错误的并且应该添加吗？

注意：我故意使用`Row.RETURN_NULL_AND_BLANK`而不是`MissingCellPolicy.RETURN_NULL_AND_BLANK`因为使用后者给我一个错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T23:35:16.907

您需要测试`cellValue`它是否不为空，因为 using`Row.RETURN_NULL_AND_BLANK`将`null`在您尝试访问丢失的单元格的情况下返回。

您得到 a 是`NullPointerException`因为缺少指定行的第 10 列。

如果您需要以不同方式处理缺失和空白案例，您可以使用以下内容：

```
Cell cellValue = row.getCell(10, Row.RETURN_NULL_AND_BLANK);
if (cellValue == null)
    List.add("CELL NOT FOUND");
else if("".equals(cellValue.getStringCellValue().trim()))
    List.add("MISSING CONTENT");
else 
    List.add(cellValue.getStringCellValue()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:42:30.940

@dan - 感谢您的回复。这确实有帮助。我修改了我的代码如下，我现在没有得到那个异常：

```
Cell cellValue = row.getCell(10, Row.CREATE_NULL_AS_BLANK);
if(cellValue.getStringCellValue().equals("")){
    List.add("NOT FOUND");
}
else {
    List.add(cellValue.getStringCellValue());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T23:40:05.563

嘿，你为什么不能像这样添加空指针检查

```
if(null!=cellValue)

    {

    List.add(cellValue.getStringCellValue());
} 
```

如果单元格值为空，希望这会有所帮助，那么您不要将单元格值添加到您的列表中。

# c# - 了解用户何时关闭窗口

> ID：15014236
> 
> 赞同：0
> 
> 时间：2013-02-21T23:29:47.793
> 
> 标签：c#, console-application

在我的 c# 控制台程序结束时，我制作了一个 M 文件，该文件在 MATLAB 中绘制了一个函数，并以这种方式运行它：

```
System.Diagnostics.Process Mfile = new System.Diagnostics.Process();
Mfile.StartInfo.FileName = "M.m";
Mfile.Start(); 
```

有没有办法编写代码，当用户关闭该 MATLAB 窗口时，会打开一个 txt 文件？我可以同时打开这两个文件，但我真的很想知道是否可以理解用户何时关闭该 MATLAB 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:36:22.523

`Process.WaitForExit`有点在球场上，但你想要的是一个事件。

一旦进程关闭，您就可以使用它`Process.Exited`来调用方法。

[http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exited.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exited.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:33:36.377

查看[Process.WaitForExit](http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx)方法。正如文件所说，它应该等待您转移的过程。使用应该像

```
Mfile.WaitForExit();
// here you can invoke Notepad.exe with your text file 
```

# java - 如何制作 Android 启动器图标

> ID：15014242
> 
> 赞同：17
> 
> 时间：2013-02-21T23:30:35.820
> 
> 标签：java, android, icons, launching-application

应用程序的第一印象是应用商店中的启动器图标，因此不应掉以轻心。我终于完成了我的第一个应用程序，但仍然需要一个图标。我不擅长图形或设计。

我的问题是我如何去寻找、创造或让某人提供免费的制作服务。我不想在一个简单的图标上花钱，我也没有 Photoshop。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-21T23:34:23.990

[Android Asset Studio](https://romannurik.github.io/AndroidAssetStudio/)是一个很好的起点。您可以尝试使用其中一种预定义模式制作图标，它会为您提供适用于所有屏幕密度的图标。你也可以去 google plus 的 android 设计社区，尝试在那里寻求帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T00:02:22.823

此外，如果您想创建徽标，还有一些免费工具。只需搜索免费的标志制造商。这是我喜欢的一个：[https ://www.logaster.com/](https://www.logaster.com/)

# java - 多次使用 ListView

> ID：15014244
> 
> 赞同：0
> 
> 时间：2013-02-21T23:30:58.993
> 
> 标签：java, android, listview, parse-platform

我是编程新手，所以请解释一下。但是我有一些我要从 parse.com 中提取的对象。当我得到一个对象时，我调用这个方法。但我的问题是，每次调用此方法时，它每次都会替换第一项。我知道这很容易解决，我只需要一点帮助。

```
private void display(Object name, Object weightClass, Object record, int count) {       

    ListView list = (ListView) findViewById(R.id.list);
    ArrayAdapter<String> listAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1);
    list.setAdapter(listAdapter);
    String fightCard = (name).toString();
    listAdapter.add(fightCard); 
    listAdapter.notifyDataSetChanged();          
 } 
```

另外，我知道这完全是另一个问题，但我知道我需要查找自定义列表视图的方法，我想更改颜色和大小。有谁知道一些好的链接来学习如何做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:52:04.290

下面应该首先在方法之外创建。

```
ListView list = (ListView) findViewById(R.id.list);
ArrayAdapter<String> listAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1);
        list.setAdapter(listAdapter); 
```

然后将适配器传递给方法

```
display(name,weightClass,record,count, adapter); 
```

**或者**

只需让适配器全局，以便在方法内访问。

```
 ArrayAdapter<String> listAdapter;

 public void onCreate(Bundle savedInstanceState) {

   ListView list = (ListView) findViewById(R.id.list);
   listAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1);
   list.setAdapter(listAdapter);
//whatever else you want 
```

}

然后在你的方法中：

```
private void display(Object name, Object weightClass, Object record, int count) {       

String fightCard = (name).toString();
listAdapter.add(fightCard); 
listAdapter.notifyDataSetChanged(); 
```

}

在此之后，每次调用此方法时，都会将数据泵入适配器。

如果您仍然感到困惑/卡住，请联系我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T00:08:50.230

考虑更改方法，使其每次返回一个字符串。所以它将是：

```
private String display(Object name, Object weightClass, Object record, int count) {       

String fightCard = (name).toString();
return fightCard;
} 
```

然后在 onCreate() 内：

```
ListView lv = (ListView) findViewById(R.id.list);
ArrayList<String> your_array_list = new ArrayList<String>();

 "loop here -> get each String and add it to list : ( your_array_list.add( fightCard ) ) "

        ArrayAdapter<String> listAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1);

     lv.setAdapter(arrayAdapter); 
```

一步一步：
1\. 通过在布局文件中查找 id 来声明您的 listView 项目
2\. 声明一个用于存储项目的 ArrayList
3\. 将项目添加到您的 arraylist。在这里，您从一个方法中获取它们，因此循环直到将它们全部添加
4\. 声明 ArrayAdapter
5\. 设置您的 listView 后面的数据

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T00:13:54.037

我认为你在`ArrayAdapter`尝试这个时遗漏了一个论点：

```
ArrayList<String> namesArray = new ArrayList<>();
ArrayAdapter<String> listAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, namesArray); 
```

每次你有一个新项目时，将它添加到 namesArray，然后调用

```
namesArray.add((name).toString()); 
```

`listAdapter.notifyDataSetChanged();`

因为如果您这样做：`listAdapter.add(fightCard);`它将继续替换您的 ListView 中的现有项目；

希望能帮助到你

# git - CruiseControl.Net 构建异常

> ID：15014246
> 
> 赞同：1
> 
> 时间：2013-02-21T23:31:08.167
> 
> 标签：git, continuous-integration, cruisecontrol.net, cruisecontrol

需要帮助我们从构建服务器获得以下异常。我在一分钟内构建得很好，然后突然我们收到了这个异常消息。我们没有在构建服务器上进行任何更改，但实际上我们通过 GIT 推送了更多代码，以便在我们使用单声道时从项目文件中删除 Visual Studio 行。想不出是什么原因造成的。我们正在使用 CruiseControl.Net Contentiousness Integration 服务器。任何帮助都感激不尽。

ThoughtWorks.CruiseControl.Core.CruiseControlException：源代码控制操作失败：ssh：连接到主机 xxxxxxxxxxxxxxxxxxxxxxx 端口 22：错误文件号致命：无法从远程存储库读取。

请确保您具有正确的访问权限并且存储库存在。. 处理命令： git fetch origin at ThoughtWorks.CruiseControl.Core.Sourcecontrol.ProcessSourceControl.Execute(ProcessInfo processInfo) at ThoughtWorks.CruiseControl.Core.Sourcecontrol.Git.GitFetch(IIntegrationResult result) at ThoughtWorks.CruiseControl.Core.Sourcecontrol.Git.CreateUpateLocalRepository (IIntegrationResult 结果) 在 ThoughtWorks.CruiseControl.Core.Sourcecontrol.QuietPeriod.GetModificationsWithLogging(ISourceControl sc, IIntegrationResult from, IIntegrationResult to) 在 ThoughtWorks.CruiseControl.CruiseControl.Core.Sourcecontrol.Git.GetModifications(IIntegrationResult from, IIntegrationResult to) 在 ThoughtWorks.CruiseControl。 Core.Sourcecontrol.QuietPeriod.GetModifications（ISourceControl sourceControl，IIntegrationResult lastBuild，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:04:13.460

我不得不将 git 恢复到以前的工作版本，并且它建立了。重新进行更改并将其重新投入生产，并且构建良好。一定与项目文件或其他东西有关。这一切都很好，没有任何改变，它会突然不起作用。所以通过还原和重做来解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T08:21:45.470

这个问题与 CCNet 无关。

使用相同的错误消息检查此问题： [Git SSH error: "Connect to host: Bad file number"](https://stackoverflow.com/questions/7144811/git-ssh-error-connect-to-host-bad-file-number)

您是否测试过从运行 CCNet 服务的同一工作目录和用户手动运行命令？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T08:23:16.370

尝试调用更新或尝试获取修改时似乎发生错误。

您能否尝试从构建服务器手动调用更新，并检查您是否有足够的权限从构建服务器调用更新。

# android - EditText 不允许编辑

> ID：15014247
> 
> 赞同：2
> 
> 时间：2013-02-21T23:31:14.807
> 
> 标签：android, android-listview, android-edittext

我有一个`ListView`三行。最后 2 行包含`EditText`允许编辑的字段。我有下面这两个的xml：

```
<LinearLayout
    android:id="@+id/id_message_subject_edit"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/id_message_details_subject"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="left"
        android:layout_margin="5dp"
        android:gravity="left"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@color/BLACK"
        android:textSize="15sp" />

</LinearLayout> 
```

出于某种原因，当我单击 时`EditText`，它只是失去了光标，但键盘仍然可见。我不确定，但它发生在两个盒子上。`TouchListener`对于这件事，没有或任何其他听众。放入一个`ListView`我需要注意的东西有什么特别之处吗？

**编辑**

当我将以下内容放入 manifest.xml 文件中时：

```
android:windowSoftInputMode="adjustPan" 
```

我看到它可以工作......但是`ListView`当文本低于键盘时不会滚动。有没有办法处理那个用例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:01:31.783

> 将 ListView 放入我需要注意的地方有什么特别之处吗？

是的，请记住，`ListView`想要处理焦点和点击事件，但现在你有一个`EditText`组合。查看这个[问题](https://stackoverflow.com/questions/9272140/edittext-in-listview-android)的答案。

但是，如果您的 . 文件中只有 3 行`ListView`，那么使用它确实不会获得太多收益。`ListView`旨在回收视图并在列表中有许多项目时非常有效。如果您只有几行，我建议您使用 a`ScrollView`并将您`View`的 s （行）添加到其中，然后`onClick`自己处理事件（如果您的列表项是可点击的）。

# quickbooks - QuickBooks TxnID 格式

> ID：15014260
> 
> 赞同：1
> 
> 时间：2013-02-21T23:32:08.167
> 
> 标签：quickbooks, intuit, qbxml

我希望允许用户在文本框中输入 RefNumber 或 TxnID 以查询发票。TxnID 的格式是什么？我正在考虑使用 RegEx 模式来确定它是否是 TxnID。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T14:06:27.927

从 QB OSR...

TxnID 是 IDTYPE 类型 IDTYPE（标识符类型）是一个理论上最大长度为 36 位的字符串，但允许的最大值取决于具体情况。从 QuickBooks 返回的 IDTYPE 是对象 ID 和创建时间的串联，用连字符分隔。

# .net - Why can't a .NET COM library be used via COM in .NET?

> ID：15014266
> 
> 赞同：19
> 
> 时间：2013-02-21T23:32:40.843
> 
> 标签：.net, com

Now, I'm aware that if the library is in .NET, it's a little pointless to access it via COM, however, I am a bit perplexed because if I were to ask someone to write a library and expose it via COM, that person should be free to do so with any language.

It shouldn't matter to me which language that COM library is written in, so why does it matter?

For reference, this is what happens when you use tlbimp on a .tlb file generated from a .NET library:

```
C:\dev>tlbimp test.tlb
Microsoft (R) .NET Framework Type Library to Assembly Converter 4.0.30319.1
Copyright (C) Microsoft Corporation.  All rights reserved.

TlbImp : error TI1029 : Type library 'test' was exported from
a CLR assembly and cannot be re-imported as a CLR assembly. 
```

Additionally, my test COM library uses IUnknown, supporting only early-bound COM interop.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-19T22:11:19.817

tlbimp is only the beginning of the problem.

Every COM-visible .NET object implements IManagedObject. Every time you try to call an object through a COM interface, .NET does a QueryInterface for IManagedObject, and if it succeeds the object is unwrapped and accessed directly instead. Eliminating the interop call in this way is considered a performance optimization.

This is a serious issue in COM-based interop scenarios where multiple components may be implemented in .NET languages. If each .NET component implements its own tlbimp-generated version of the COM interface, they will be unable to communicate with each other using that interface. Even though each tlbimp'ed copy of the interface has the same COM GUID, .NET considers them separate interfaces. The "correct" solution to this problem is to define the COM interface in a primary interop assembly, and have every .NET-implemented component use that same copy of the interface, but if there's no coordination between component developers that's pretty unlikely to happen.

This problem was once highlighted by a Microsoft developer at [http://blogs.msdn.com/b/jmstall/archive/2009/07/09/icustomqueryinterface-and-clr-v4.aspx](http://blogs.msdn.com/b/jmstall/archive/2009/07/09/icustomqueryinterface-and-clr-v4.aspx) along with a solution for .NET 4, but it was based on a pre-release version and doesn't work in the final. I'm not aware of anywhere else it's been acknowledged by Microsoft.

One solution is to forego the interface in the .NET-to-.NET scenario and use reflection instead. This may work in many cases but of course isn't very performant. Possibly the best solution is to use unmanaged code to aggregate each of your managed components and reject attempts to QueryInterface for IManagedObject. This is similar to what's described in the above blog entry, but doesn't rely on .NET features that no longer work as described in that blog.

The .NET interop behavior is, IMO, pretty terrible, and clearly violates COM rules (same IID == same interface, and shouldn't have to care what language the object is implemented in). But .NET has behaved this way from the beginning and no amount of feedback from developers bitten by this behavior has changed the minds of anyone on the .NET team.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-22T01:10:10.453

Tlbimp can see from the type library that it was produced from a .NET assembly. It just balks at what you are trying to do. Which doesn't make sense, if you want to use a .NET assembly then just add a reference to it.

You can fool the machine by using late-bound COM, most easily done with the *dynamic* keyword in C#. That still doesn't fool the CLR, it can see that it interops with a managed assembly and won't actually create the COM-callable wrapper. You most typically do this to write a test program to test your COM server. The implication is that your test doesn't actually test the way your COM server is going to be used in practice. Very basic things like converting variants to objects and back just won't be tested at all. And may well give you very unpleasant surprises when you use the assembly in production.

# c++ - boost::shared_ptr - 两个类之间的组合关系

> ID：15014273
> 
> 赞同：0
> 
> 时间：2013-02-21T23:33:06.283
> 
> 标签：c++, boost, shared-ptr

假设我有：

*   两个等级：P 和 C。
*   P <>- C 之间的组合关系，即P 的每个实例都包含一个C 的实例，当父P 实例被销毁时，C 的实例也被销毁。

为了实现这一点，在 C++ I 中：

*   定义两个类 P 和 C；
*   定义一个 boost::shared_ptr 类型的 P 成员变量，并在 P 的构造函数中使用新创建的对象对其进行初始化。

下面给出了一个代码示例。

```
 #include "boost/scoped_ptr.hpp"

    class C
    {
      public:
        C() {}

      private:

    };

    class P
    {
      public:
        P() : childC(new C()) {}

      private:
        boost::shared_ptr<C> childC;
    };

    int main(int argc, char** argv)
    {
        P p;
    } 
```

不知何故，我无法构建这个简单的代码示例，我不明白为什么（我是编程新手）。

错误：

> “P”类没有任何名为“childC”的字段</p>
> 
> 预期的 ';' 在'<'之前 令牌
> 
> '::' 的无效使用</p>
> 
> ISO C++ 禁止声明没有类型的“shared_ptr”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:43:13.550

您的错误最可能的原因是您正在包含`boost/scoped_ptr.hpp`并且您正在尝试声明一个`boost::shared_ptr`. 您不太可能需要`boost::shared_ptr`这里。

在这种情况下，表达[构图的最简单方法是](http://en.wikipedia.org/wiki/Object_composition)

```
class C {};
class P 
{
 private:
  C c_;
}; 
```

现在您可能希望通过使用只需要前向声明 的习惯用法来减少编译时间依赖性`C`，在这种情况下，`P`可以是

```
#include <boost/scoped_ptr.hpp>

class C; // forward declaration

class P
{
 public:
  P() : c_(new C()) {}
 private:
  boost::scoped_ptr<C> c_;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:45:05.187

正如 KerrekSB 在评论中暗示的那样，您使用了`shared_ptr`，但包括了`scoped_ptr`。不同之处在于`scoped_ptr`表示独占所有权（这里是这种情况），而`shared_ptr`表示共享所有权（不是这种情况）。首选的习惯用法是`scoped_ptr`在代码中使用。

如果您绝对想使用 shared_ptr，请包含 header `<boost/smart_ptr/shared_ptr.hpp>`。

# java - Solr LukeRequest 正在返回一个空的 fieldInfo 地图

> ID：15014275
> 
> 赞同：1
> 
> 时间：2013-02-21T23:33:19.170
> 
> 标签：java, solr, luke

我正在尝试使用 LukeRequest 检查 solr 模式。我可以使用 solr admin 架构浏览器浏览架构。但是，当我尝试使用以下代码检索它时，它会返回一个空字段信息映射

```
String url = "<host>:<port>/solr/";
SolrServer server = new HttpSolrServer(url);
     LukeRequest luke = new LukeRequest();
        luke.setShowSchema(false);
        final LukeResponse process = luke.process(server);
        final Map<String, FieldInfo> fieldInfo = process.getFieldInfo();
        for(String key: fieldInfo.keySet()){
            FieldInfo info = fieldInfo.get(key);
            System.out.println(key + ":" + info.getType());
        } 
```

（fieldInfo 变量得到一个空映射）我使用的是 solr 3.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:55:56.073

奇怪的是，这又开始起作用了，如果我发现出了什么问题，我会更新这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:22:44.497

请尝试更改`luke.setShowSchema(true)`，然后尝试它应该可以工作。

# python - Python：根据条件对字典中的值求和

> ID：15014276
> 
> 赞同：5
> 
> 时间：2013-02-21T23:33:33.697
> 
> 标签：python, python-3.x

我有一本字典`Key:Values.`

这些值是整数。我想根据条件得到值的总和......比如说所有值> 0（即）。

我尝试了一些变化，但不幸的是似乎没有任何效果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T23:38:22.030

尝试使用`values`字典上的方法（在 Python 3.x 中返回一个生成器），遍历每个值并求和，如果它大于 0（或任何你的条件）：

```
In [1]: d = {'one': 1, 'two': 2, 'twenty': 20, 'negative 4': -4}

In [2]: sum(v for v in d.values() if v > 0)
Out[2]: 23 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:37:20.383

```
>>> a = {'a' : 5, 'b': 8}
>>> sum(value for _, value in a.items() if value > 0) 
```

# c# - 如何以编程方式关闭 datetimepicker 的下拉日历或更新下拉日历以反映 .Value 属性？

> ID：15014280
> 
> 赞同：0
> 
> 时间：2013-02-21T23:33:49.407
> 
> 标签：c#, .net, winforms, datetimepicker

请帮忙？！问题是因为我有一个使用 datetimepicker 控件的旧用户控件。如果 datetimepicker 的文本框中没有要显示的日期，则 .Value 属性设置为 DateTimePicker.MinimumDateTime。如果 .Value 是 DateTimePicker.MinimumDateTime，OnValueChanged 会将 CustomFormat 更新为“”。否则，CustomFormat 为“yyy-MM-dd hh:mm:ss tt”。

问题 ==> 在 DropDown 事件中，我检查最小日期时间。如果 .Value 等于那个值，那么我将 .Value 更新为 DateTime.Now。当下拉日历显示时，日历设置为 1753-01-01，而文本框 (.Value) 显示 DateTime.Now。

如何让日历显示与 DropDown 事件中更新的 .Value 属性对应的日期？即使有一种方法可以在值从 DateTimePicker.MinimumDateTime 更改为 DateTime.Now 时“取消” DateTimePicker 上的第一个 DropDown 事件。现在我认为这可以工作，因为第二次（和后续时间）下拉显示日历 日历正确匹配文本框中显示的日期 (DateTimePicker.Value)。

这是我连接到有问题的 DateTimePicker 的事件的代码：

```
 private void ValueDatetimePickerOnKeyUp(Object sender, KeyEventArgs e)
    {
        if (e.KeyCode != Keys.Delete && e.KeyCode != Keys.Back)
            return;
        var dp = (DateTimePicker)sender;
        if (dp == null)
            return;
        dp.Value = DateTimePicker.MinimumDateTime;
    }

    private void ValueDatetimePickerDropDown(Object sender, EventArgs e)
    {
        var dp = (DateTimePicker)sender;
        if (dp == null)
            return;
        if (dp.Value == DateTimePicker.MinimumDateTime)
            dp.Value = DateTime.Now;
    }

    private void ValueDatetimePickerValueChanged(Object sender, EventArgs e)
    {
        var dp = (DateTimePicker)sender;
        if (dp == null)
            return;
        dp.CustomFormat = dp.Value == DateTimePicker.MinimumDateTime ? " " : "yyyy-MM-dd hh:mm:ss tt";
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:44:51.000

我有一些时间来解决这个问题。这有点 hacky，但基本上在 datetimepicker 的 DropDown 事件处理程序中将 ShowUpDown 设置为 true，然后调用 Closeup 事件处理程序将 ShowUpDown 设置回 false。这将关闭下拉日历并强制用户再次打开它，然后日历上将显示正确的日期，而不是 1/1/1753。OnKeyUp 事件处理程序只允许用户在按下 DEL 或 Backspace 键时将 datetimepicker 的文本框值清空。

```
 private void ValueDatetimePickerOnKeyUp(Object sender, KeyEventArgs e)
    {
        //if user presses backspace or delete key then clear the date/time
        if (e.KeyCode != Keys.Delete && e.KeyCode != Keys.Back)
            return;
        var dp = (DateTimePicker)sender;
        if (dp == null)
            return;
        dp.Value = DateTimePicker.MinimumDateTime;
    }

    private void ValueDatetimePickerCloseUp(Object sender, EventArgs e)
    {
        var dp = (DateTimePicker) sender;
        if(dp == null)
            return;
        dp.ShowUpDown = false;
    }

    private void ValueDatetimePickerDropDown(Object sender, EventArgs e)
    {
        var dp = (DateTimePicker)sender;
        if (dp == null)
            return;
        if (dp.Value == DateTimePicker.MinimumDateTime)
        {
            dp.Value = DateTime.Now;
            dp.ShowUpDown = true;
            Invoke((MethodInvoker) (() => ValueDatetimePickerCloseUp(dp, new EventArgs())));
        }
    }

    private void ValueDatetimePickerValueChanged(Object sender, EventArgs e)
    {
        var dp = (DateTimePicker)sender;
        if (dp == null)
            return;
        dp.CustomFormat = dp.Value == DateTimePicker.MinimumDateTime ? " " : "yyyy-MM-dd HH:mm:ss tt";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T22:10:24.057

创建您自己的控件并添加：

```
#region IsInputKey(Keys keyData)
        protected override bool IsInputKey(Keys keyData)
        {
            if (keyData == Keys.Tab
                //|| keyData.Equals(Keys.Up)
                //|| keyData.Equals(Keys.Down)
                //|| keyData.Equals(Keys.Left)
                //|| keyData.Equals(Keys.Right)
                || keyData.Equals(Keys.Enter)
                || keyData.Equals(Keys.Escape)
                || keyData.Equals(Keys.Space)
                )
                return true;

            return base.IsInputKey(keyData);
        }
        #endregion 
```

这将允许您想要在 KeyDown 事件上传递的所有键。;D 高频！！！并且也可以与其他控件一起使用，例如 TextBox、DataGridView 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-10T10:12:36.243

如果只需要禁止打开下拉菜单，您可以使用更简单的解决方案。

*只需在DropDown*事件中切换*ShowUpDown*属性。**将此**更改为您的控件名称。

 ***```
private void MyDropDown(object sender, EventArgs e)
{
    bool value = this.ShowUpDown;
    this.SuspendLayout();
    this.ShowUpDown = !value;
    this.ShowUpDown = value;
    this.ResumeLayout();
} 
```

添加事件处理程序。

```
this.DropDown += MyDropDown; 
```

将 DoubleBuffered 属性设置为 true 以避免闪烁可能很方便。

```
Type type = this.GetType();
System.Reflection.PropertyInfo property;
property = type.GetProperty("DoubleBuffered", System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic);
property.SetValue(control, true, null); 
```

或者，您可以检查*ShowUpDown*属性是否已经为 false，因此它仅适用于日历下拉菜单。

```
private void MyDropDown(object sender, EventArgs e)
{
    if (this.ShowUpDown == false)
    {
        this.SuspendLayout();
        this.ShowUpDown = true;
        this.ShowUpDown = false;
        this.ResumeLayout();
    }
} 
```***

# grails - 在 grails 2 中从一个数据源复制到另一个数据源

> ID：15014281
> 
> 赞同：0
> 
> 时间：2013-02-21T23:34:03.990
> 
> 标签：grails

我正在尝试使用为两个数据源配置的域将数据从一个数据源复制到另一个数据源。该文档暗示这是直截了当的，但我只能将其保存到默认数据源。

```
class LocalTransaction {
  static mapping = {
    datasources(['DEFAULT','migration'])
  }
} 
```

首先，我尝试通过 LocalTransaction.findAllBy..() 从默认数据源中查找事务，然后尝试通过 tr.migration.save(flush:true,failOnError:true) 保存更改，但更改保存为 DEFAULT。

我认为尝试通过 LocalTransaction.migration.get(lt.id) 创建一个新实例，复制数据然后保存，但这也没有保存到迁移数据源。

谢谢，

账单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:12:03.773

Grails 2.0 在其核心中添加了对多个数据源的支持（以前由插件提供）。[请阅读 Grails 文档http://grails.org/doc/2.0.0.RC1/guide/conf.html#multipleDatasources](http://grails.org/doc/2.0.0.RC1/guide/conf.html#multipleDatasources)中的以下部分

要将数据保存在特定数据源中，您必须在调用 save() 闭包之前使用其名称，例如：

```
localTransactionObj.migration.save() 
```

希望有帮助！

# authentication - 浏览器不提示输入客户端证书

> ID：15014288
> 
> 赞同：23
> 
> 时间：2013-02-21T23:34:30.093
> 
> 标签：authentication, iis-7, windows-server-2008, smartcard, client-certificates

**背景：**

我正在将内部应用程序更新为两步验证过程。我想在传统的用户名/密码表单之上添加一个客户端证书身份验证过程（通过智能卡）。该应用程序是用 C# 编写的，托管在 IIS7 上，面向 Chrome 和 IE8。

**问题：**

我在让应用程序提示用户输入客户端证书时遇到问题。我一直在 Fiddler 的帮助下调试应用程序。当我在 Fiddler 的用户目录 (C:\Documents and Settings\USER\My Documents\Fiddler2) 中保存了测试客户端证书时，应用程序按预期工作。系统提示我输入保护智能卡的 PIN 码，输入正确后，我会进入登录表单。当我关闭 Fiddler 时，应用程序会引发 403 Forbidden 错误（因为 Fiddler 不再运行并指向其证书）。我无法弄清楚为什么应用程序不会正常提示输入证书。

**当前服务器设置：**

*   自签名证书已创建
*   443 绑定指向自签名证书
*   启用匿名身份验证
*   自签名证书被添加到受信任的根 CA 和中间 CA 中（我读到另一个人在这两者中都有它，而不仅仅是受信任的根 CA 并且解决了他们的问题，尽管这两种设置都不适合我们）。
*   我清除了受信任的根 CA 中我不需要的其余证书（我在其他地方读到，证书过多会导致 SSL 阻塞）。

除了在另一台服务器上从头开始之外，我没有想法尝试。有谁知道问题可能是什么？这似乎应该是相当直截了当的，我错过了一些小事。欢迎任何想法。

**更新：**

今天花了更多时间处理这个问题后，我坚信这与 IIS7 配置不正确有关（我最初没有设置它）。我认为这是因为我启用了失败的请求跟踪，查看了随后生成的 .xml 文件，并看到抛出了 500 错误。

Chrome 会抛出“拒绝访问网页”消息，而不是“403 - 禁止访问：拒绝访问”。我不知道这是否有帮助。我确实知道，当我不需要证书时，该站点将按预期工作。要求证书是失败的地方。

应用程序池设置为 .Net 4.0 | 经典 | 网络服务。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-03T18:56:53.953

您的问题是浏览器要么没有收到提供客户端证书的请求，要么没有与安全相关的选项来阻止它发生。IE 仅在网站位于正确区域（内联网或受信任的站点）时才提供证书。请在一切之前检查这一点。

如果这没有帮助，请查看此[答案](https://stackoverflow.com/questions/6131458/403-7-iis-7-5-ssl-client-certificate-authentication-issue)以进行下一步。netsh 文档说：

```
clientcertnegotiation
Optional. Specifies whether the negotiation of certificate is enabled or disabled. Default is disabled. 
```

启用它，即使是最笨的浏览器也应该注意到它应该提供用于身份验证的证书。要进一步诊断您的问题，您可以使用[WireShark](https://www.wireshark.org/)查看实际的协商。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-24T14:24:25.803

尝试`openssl s_client -connect yourip:443 -prexit` 并查看 CA（您的自签名证书）是否以可接受的客户端证书 CA 名称发送给客户端。

如果没有，则需要先安装 openssl

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-07-10T15:02:44.777

在我见过的每个浏览器中，如果浏览器没有任何由服务器信任的 CA 签名的证书，它不会提示您选择证书。因此，请确保您的服务器配置了正确的 CA。正如 Boklucius 建议的那样，您可以使用 openssl 检查服务器发送给客户端的受信任 CA 列表，并查看您签署客户端证书的 CA 是否在其中。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-07-10T11:28:23.350

我会提出“尝试重新启动浏览器”的建议，特别是如果您在浏览器运行时安装了证书。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-04-15T01:05:09.040

添加一个相当痛苦的教训：确保您退出占用端口 443 的 Skype（或任何其他应用程序）。

所以这里的想法是，如果您在同一台机器（客户端和 IIS）上运行开发环境，并且您的团队使用 Skype 或其他一些应用程序进行通信。

当您尝试调试此问题时，请注意时间流逝，似乎一切都“正确”，`netsh http sslcerts`等等，甚至重新启动但无济于事。好吧，原来 Skype 会吃掉 443，所以把它关掉，然后“噗”地出现你的证书提示。

然后随意向墙上扔东西，大喊脏话或只是“愤怒，愤怒反对光的消亡”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-08T09:16:10.713

在 Firefox 中，如果您在第一次提示您输入证书时按“取消”，并且您将鬼鬼祟祟的“记住此决定”框选中，那么 Firefox 将记住这一点并且不再提供它。

您可以在 Firefox Preferences -> Privacy & Security ( `about:preferences#privacy`)、View Certificates 中查看和删除您之前记住的决定，并检查 Authentication Decisions 选项卡。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-19T18:03:02.730

另外，请确保 Fiddler 不会妨碍您。如果你让它解密 SSL，它会将消息损坏回 IE，并且它没有安装证书，所以它不能提供它。关闭 fiddler，瞧，出现证书提示。

# c# - Json.Net解析日期时间值错误

> ID：15014294
> 
> 赞同：3
> 
> 时间：2013-02-21T23:35:01.057
> 
> 标签：c#, json.net

我正在尝试使用 JObject.Parse 将 json 字符串转换为 JObject，但遇到错误“解析正无穷大值时出错。路径 'Modified.Date'，第 1 行，位置 52。”

这是 json 中抛出错误的部分 -

{ ...，“修改”：{“日期”：ISODate（“2013-02-21T22：23：57.118Z”），“用户”：“管理员”}，...}

这是我用来进行解析的代码 -

```
var jobj = JObject.Parse(formJson) 
```

**更新：** json 是使用 mongodb 的 .ToJson() 扩展方法生成的，通过发送以下 jsonwritersettings 它生成的 json 可由 json.net 解析 - new JsonWriterSettings { OutputMode = JsonOutputMode.JavaScript };

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T23:49:41.810

我认为您需要丢失 ISODate。

这有效：

```
String MyJson = "{MyDate   : \"2013-02-21T22:23:57.118Z\" }";
var x = Newtonsoft.Json.Linq.JObject.Parse(MyJson); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-26T09:33:23.600

我尝试使用正则表达式并在 C# 中进行转换：

```
Regex _regex = new Regex(@"\d\d\d\d-\d\d-\d\d");
                    Match _date = _regex.Match(<Your_Date_String>);
                    if (_date.Success)
                    {
                        var datetime = Convert.ToDateTime(_date.Value);
                    } 
```

# c# - 类之间的通信

> ID：15014295
> 
> 赞同：0
> 
> 时间：2013-02-21T23:35:01.087
> 
> 标签：c#, winrt-xaml

我已经对 MS mandelbrot[示例](http://code.msdn.microsoft.com/windowsapps/0f5d56ae-5e57-48e1-9cd9-993115b027b9/sourcecode?fileId=44756&pathId=962809525)进行了大量修改，并且基于它发布了一个应用程序大约一半。

我现在正在尝试将这些页面链接在一起，但我注意到小学班级无权访问任何中学班级。

这些类似乎与页面紧密耦合，并且主类似乎能够动态创建和加载这些页面，而无需获得类的句柄（我可以将事件绑定到委托）。

从 mainpage.xaml.cs：

```
public void LoadScenario(Type scenarioClass)
{
    AutoSizeInputSectionWhenSnapped = true;

    // Load the ScenarioX.xaml file into the Frame.
    HiddenFrame.Navigate(scenarioClass, this);

    if (scenarioClass == typeof(TitleScreen))
    {
        // connect event handler here? how?
        //     EventHandler e = scenarioClass.PageEventHandler(HandleChangePageCall);
        // scenarioClass is a Type, so any events are not in scope
    }

    // Get the top element, the Page, so we can look up the elements
    // that represent the input and output sections of the ScenarioX file.
    Page hiddenPage = HiddenFrame.Content as Page;

    // Get each element.
    UIElement input = hiddenPage.FindName("Input") as UIElement;
    UIElement output = hiddenPage.FindName("Output") as UIElement;
    UIElement entireScreen = hiddenPage.FindName("LayoutRoot") as UIElement;

    if (entireScreen == null)
    {
        // Malformed input section.
        NotifyUser(String.Format(
            "Cannot load this screen: {0}.  Make sure root of input section markup has x:Name of 'entireScreen'",
            scenarioClass.Name), NotifyType.ErrorMessage);
        return;
    }

    if (output == null)
    {
        // Malformed input section.
        NotifyUser(String.Format(
            "Cannot load this screen: {0}.  Make sure root of input section markup has x:Name of 'Output'",
            scenarioClass.Name), NotifyType.ErrorMessage);
        return;
    }

    // Find the LayoutRoot which parents the input and output sections in the main page.
    Panel panel = hiddenPage.FindName("LayoutRoot") as Panel;

    if (panel != null)
    {
        // Get rid of the content that is currently in the intput and output sections.
        panel.Children.Remove(input);
        panel.Children.Remove(output);
        //panel.Children.Remove(entireScreen);

        //// Populate the input and output sections with the newly loaded content.
        //InputSection.Content = input;
        OutputSection.Content = output;
        //OutputSection.Content = entireScreen;   // doesn't fall within the expected range
    }
    else
    {
        // Malformed Scenario file.
        NotifyUser(String.Format(
            "Cannot load scenario: '{0}'.  Make sure root tag in the '{0}' file has an x:Name of 'LayoutRoot'",
            scenarioClass.Name), NotifyType.ErrorMessage);
    }
} 
```

这些类/页面与 UI 控件（列表框）紧密绑定，但由于列表框不属于我的用户流，因此我将其删除。

同样在 MainPage.xaml.cs 中：

```
// Change the array below to reflect the name of your scenarios.
// This will be used to populate the list of scenarios on the main page with
// which the user will choose the specific scenario that they are interested in.
// These should be in the form: "Navigating to a web page".
// The code in MainPage will take care of turning this into: "1) Navigating to a web page"
List<Scenario> scenarios = new List<Scenario>
{
    new Scenario() { Title = "Main Title", ClassType = typeof(TitleScreen) },
    new Scenario() { Title = "Images from a file stream", ClassType = typeof(Scenario2) },
    new Scenario() { Title = "Displaying a NineGrid image", ClassType = typeof(Scenario3) },
    new Scenario() { Title = "Using a WriteableBitmap", ClassType = typeof(Scenario4) }
}; 
```

我应该修改场景类来保存所有这些场景的实例吗？

还是我应该设置某种 IPC 来传回信息？我不确定 Windows 应用程序是否甚至可以做 IPC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:01:29.780

显然 MainPage 类对自身有一个静态引用，所以我可以调用它来从辅助页面更改辅助页面：

```
// in the secondary page:
MainPage rootPage = MainPage.Current;
rootPage.SetScreen(2);

// definition in the MainPage class:
public static MainPage Current; 
```

# r - 与 R 的远程通信——如何从 R GUI 客户端开始访问远程服务器上的 R

> ID：15014297
> 
> 赞同：8
> 
> 时间：2013-02-21T23:35:33.880
> 
> 标签：r, qt, remote-access

我尝试[了 RInside](http://dirk.eddelbuettel.com/code/rinside.html)的 Qt 示例 qdensity 并且非常喜欢它。它很容易设置，鉴于我几乎没有 Qt 经验，我很惊讶它是多么容易理解和修改。现在我想知道是否可以在远程机器上的某个地方使用 RInside 和 R。

看来我不能为此目的使用 RInside。我想知道是否有另一种创建 Qt 桌面应用程序的方法，它与某个服务器上的 R 通信。我让 R Studio Server 运行起来，我对它非常满意，但它是为 R 人准备的。为了在我们研究所内也向非 R 人员推广我的 R 东西，我想提供一个简单的、非常有限的 GUI，它可以做一些基本的事情，比如显示一些图表或启动一个`R CMD Batch`. 我也知道闪亮的（和闪亮的服务器）并且最近一直在积极测试它，但我正在寻找一个简单的桌面客户端去连接我的服务器端 R。

是否有从 Rserve 和 Qt 入手的基础？任何建议（从哪里开始，例子，通常是坏主意）？？？

[R 有什么能力来处理类似 IPC 或 D-Bus 的东西](http://doc.qt.digia.com/4.7-snapshot/ipc.html)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T11:32:12.647

将 Qt 与 C++ 一起使用，只需处理您在服务器上使用 R 创建的文件。例如：创建图形并以您可以加载的格式保存。BMP、PNG 等。将其加载到您的 GUI 中。

我还建议使用 Qt Creator 进行 GUI 设计。它快速而简单。如果您不想留在 R 环境中，这个想法只适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T16:04:10.147

当我创建了处理数据和计算概率和图表之类的程序时，通常使用 HTML 作为使用 PHP 的界面并将其余处理（例如 R 脚本）留给服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-26T20:42:19.433

对于任何最近的访问者：看看[openCPU](https://www.opencpu.org/)，它将 R 函数发布为 RESTful 服务，并执行从 R 数据类型到 JSON 的所有编组。

# api - 对不可接受的 Accept 标头的 HTTP 响应

> ID：15014301
> 
> 赞同：8
> 
> 时间：2013-02-21T23:36:04.863
> 
> 标签：api, http, rest

我的 RESTFul API 只能响应 JSON 编码的数据（即我所有的标头都有`Content-Type: application/json`）。如果请求的`Accept`标头不允许 JSON（例如，`Accept: text/html`），我应该返回什么？我应该`400 Bad Request`在正文中返回带有解释的 a，还是有针对此异常的更具体的状态代码？

请注意，这与[不受支持的请求内容类型不同](https://stackoverflow.com/q/11973813/252239)。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T15:10:38.600

如果你想在语义上是正确的：

如果请求是 HTTP/1.0：

406 Not Acceptable 是正确的返回值，因为客户端可能无法处理不属于请求类型的响应。

在 HTTP/1.1 中，这仍然是“正确”的做法，但也有例外，

来自 RFC 2616 Sec 10.4.7

```
 Note: HTTP/1.1 servers are allowed to return responses which are
      not acceptable according to the accept headers sent in the
      request. In some cases, this may even be preferable to sending a
      406 response. User agents are encouraged to inspect the headers of
      an incoming response to determine if it is acceptable. 
```

事实上，正如@Jack 所提到的，它发生的可能性非常低。为了完整起见，我只包括这个答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T23:39:40.507

不要打扰。

在某些情况下，您的服务的消费者不会费心设置此标头，例如在使用PHP`cURL`或`file_get_contents()`在 PHP 中时。

如果您的 API 文档声明您的服务仅支持 JSON 输出，那应该已经足够了。

您还可以使用扩展来强制执行格式，例如分别用于 JSON 和 XML `/path/to/resource.json?a=b`。`/path/to/resource.xml?a=b`

如果您希望支持多种输出格式并且`Accept`请求标头值不确定，则应定义*默认*输出格式。

# sql-server - 如何确定哪一行导致了错误 - ERROR CHECKING

> ID：15014306
> 
> 赞同：5
> 
> 时间：2013-02-21T23:36:31.680
> 
> 标签：sql-server, sql-server-2005, sql-server-2000, runtime-error

我看到另一位发帖人 (WolfiG) 提出了一个非常相似的问题，但我没有看到答案。（我了解错误消息，并且不是在寻找如何修复错误，我正在尝试确定是否有任何类型的错误检查（或调试技术）可用于其他错误。

我找到了类似的代码并将其添加到其中，以获取服务器上每个数据库中的每个表......并显示 PK 和行数。（处理清单，然后处理数据字典——但这不是问题，我只是在解释代码是如何产生的。）

所以在这种情况下，我已经在一定程度上缩小了数据范围（这意味着我知道我正在查询哪个数据库并遇到了错误），所以“只有”81 个表（行）可能出错了。但是当然这需要太多的手动检查才能找到问题，所以我希望有一种方法可以查看当子查询出错时正在读取哪个“t.name”。（我通过一次注释掉一行来缩小第一个子查询的范围（有 10 个，我只是没有在这里复制所有这些。）

问题再次是（而且看起来我不是唯一一个提出此类问题的人） - ***有没有办法确定哪一行（数据）在查询中导致错误？***

在下面的示例中， ***有没有办法显示 t.name （或其他列的数据）是发生错误时的最新数据？***

在大型机中工作过 - 您可以查看转储或缓冲区。但我想我不想期待太多，因为我一直看到神秘的消息，显然系统有信息但不显示它。

消息 512，级别 16，状态 1，第 1 行子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

```
use [DBName]
SELECT '[DBName]' as DBName, t.NAME, it.xtype,i.rowcnt, 
   (select c.name from syscolumns c inner join sysindexkeys k on k.indid=i.indid and c.colid = k.colid and c.id=t.id and k.keyno=1 and k.id=t.id)as 'column1',
   (select c.name from syscolumns c inner join sysindexkeys k on k.indid=i.indid and c.colid = k.colid and c.id=t.id and k.keyno=2 and k.id=t.id)as 'column2'  
  from sysobjects t inner join sysindexes i on i.id=t.id   
    LEFT OUTER JOIN   sysobjects it on it.parent_obj=t.id and it.name = i.name
 WHERE  i.indid < 2 AND OBJECTPROPERTY(t.ID, 'IsMSShipped') = 0 
```

谢谢！

顺便说一句，我如何能够找到导致此错误的行（以防这对其他人有帮助）是我将第一个子查询更改为“从 syscolumns 中选择**count(c.name)** ”，然后查找任何数字大于 1 的行。

Sebastian Meine 谢谢，但现在我遇到了另一个问题。（我不得不说，我非常遗憾地反驳你的评论，即 SQL 比字典中的其他数据库更好。GRRRR）

**我使用“i.indid < 2”**是因为 - 首先我试图获得 rowcnt，老实说，样本都使用它。但是我看到**您粘贴的查询如何获得更多的行并且原来的错过了**- 显然是因为检查：i.indid < 2

**但是，通过您的查询，我现在在同一个表中出现了更多的情况，并且我看不到在我输入这个时如何“总结”/ARGHHH** 我看到 COLS 不仅是主键，而且显示相同的表名（并且具有不同的行数，并且看起来在许多情况下，表中的每一列都有一行 - 而在其他情况下则没有）。因此，在寻找一种模式时，我发现 MAYBE sysindexes.status = 可能会限制我的结果 - 但是虽然很接近，但仍然有重复的行。再次ARGGGH

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T02:35:47.370

SQL Server does not provide the ability to do row by row debugging. Everything is handled as a set. If one element does not conform to the rules the whole query fails.

So, to find the offending row you need to write a separate query, as you already did.

The catalog vies in SQL 2000 have not been that great but since have been greatly improved and provide a lot more detail than most other RDBMSs out there. But since you seem to have the requirement to write one query that runs on all, try this:

```
 SELECT DB_ID() AS DBName,
        o.name,
        i.rowcnt,
        i.keycnt,
        cols.column1,
        cols.column2,
        cols.column3,
        cols.column4
 FROM   sysobjects o
 JOIN   sysindexes i
        ON o.id = i.id
 JOIN   (
          SELECT  k.id,
                  k.indid,
                  MAX(CASE WHEN k.keyno = 1 THEN c.name END) AS column1,
                  MAX(CASE WHEN k.keyno = 2 THEN c.name END) AS column2,
                  MAX(CASE WHEN k.keyno = 3 THEN c.name END) AS column3,
                  MAX(CASE WHEN k.keyno = 4 THEN c.name END) AS column4
          FROM    sysindexkeys k
          JOIN    syscolumns c
                  ON k.id = c.id
                  AND k.colid = c.colid
          GROUP BY k.id, k.indid
        ) cols
        ON i.id = cols.id
        AND i.indid = cols.indid 
```

I do not have a SQL 2000 version running anymore to try this on, but I believe it will run.

Two things to be aware of:

1.  The sysindexes.rowcnt value was very unreliable in SQL 2000\. The value you find in sys.indexes in later versions is reliable but not ACID compliant.

2.  There can be up to 16 kolumns in an index. I added 4 to the query and also added the keycnt column, so you know how many you are missing.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T00:09:35.600

我发现有用的是重新构建 sql 以使其更容易排除故障。除非绝对需要，否则我一般会避免子查询。

否则，如果您确实使用子查询，您还需要考虑它们在标量上下文中返回多个结果的情况。

通常，大多数像这样的子查询都可以重写为连接。然后，您还可以直接查看重复的数据——您可以在重复字段上将表连接到自身，这样 id 不相等。

# c# - 获取选中的值

> ID：15014309
> 
> 赞同：0
> 
> 时间：2013-02-21T23:36:44.190
> 
> 标签：c#, .net, wpf, listview

我正在尝试从我的信息中提取信息，`listview`但似乎无法选择特定的`dataset`. 从这里提取信息时，我总是能取回全部内容，但永远不能只读取一组。

我将把行数据提取为：

```
chartViewList2.SelectedItem 
```

我通过向列表视图添加信息

```
 private void getServices(string ComputerName)
    {
        chartListView2.Items.Clear();
        ServiceController[] services = ServiceController.GetServices(ComputerName);

        foreach (ServiceController service in services)
        {
            chartListView2.Items.Add(new { Service = service.ServiceName, Status =     service.Status, Desc = service.DisplayName });
        }
    } 
```

列表视图 XML：

```
 ListView x:Name="chartListView2" Margin="12,59,46,6"
              GridViewColumnHeader.Click="GridViewColumnHeaderClickedHandler2">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Service" DisplayMemberBinding="{Binding Service}" Width="100"/>
                            <GridViewColumn Header="Status" DisplayMemberBinding="{Binding Status}" Width="60"/>
                            <GridViewColumn Header="Desc" DisplayMemberBinding="{Binding Desc}" Width="190"/>
                        </GridView>
                    </ListView.View>
                </ListView> 
```

我想从中得到的只是服务名称字段。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:46:20.630

反思在这里可能会有所帮助。

```
var item = chartViewList2.SelectedItem;
var type = item.GetType();
var propertyInfo = type.GetProperty("Service");
var value = propertyInfo.GetValue(item, null); 
```

然后，您将在“值”变量中获得服务字段的值。

由于 .NET 4 和动态关键字甚至更短的方式存在：

```
dynamic item = chartViewList2.SelectedItem;
dynamic propertyValue = item.Service; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:01:30.710

如果您将您的绑定`ListView`到 a`List<TypedObject>`那么您可以这样做：

```
var item = chartViewList2.SelectedItem as TypedObject 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T00:02:39.313

您可以设置并绑定`ListView` `SelectedvaluePath`到`Service`您的模型或使用`ListView` `SelectedValue`.

例子：

```
 <ListView x:Name="chartListView2" SelectedValuePath="Service" SelectedValue="{Binding SelectedServiceName}" > 
```

# python - 为什么 Python3 中没有 xrange 函数？

> ID：15014310
> 
> 赞同：302
> 
> 时间：2013-02-21T23:36:54.377
> 
> 标签：python, python-3.x, pep, xrange

最近我开始使用 Python3，它没有`xrange`伤害。

简单的例子：

1.  Python2：

    ```
    from time import time as t
    def count():
      st = t()
      [x for x in xrange(10000000) if x%4 == 0]
      et = t()
      print et-st
    count() 
    ```

2.  Python3：

    ```
    from time import time as t

    def xrange(x):

        return iter(range(x))

    def count():
        st = t()
        [x for x in xrange(10000000) if x%4 == 0]
        et = t()
        print (et-st)
    count() 
    ```

结果分别是：

1.  `1.53888392448`
2.  `3.215819835662842`

这是为什么？我的意思是，为什么`xrange`被删除了？这是一个很好的学习工具。对于初学者，就像我自己一样，就像我们都在某个时候一样。为什么要删除它？有人可以指出正确的 PEP，我找不到。

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2013-02-22T00:03:10.850

一些性能测量，使用`timeit`而不是尝试手动使用`time`.

一、苹果2.7.2 64位：

```
In [37]: %timeit collections.deque((x for x in xrange(10000000) if x%4 == 0), maxlen=0)
1 loops, best of 3: 1.05 s per loop 
```

现在，python.org 3.3.0 64 位：

```
In [83]: %timeit collections.deque((x for x in range(10000000) if x%4 == 0), maxlen=0)
1 loops, best of 3: 1.32 s per loop

In [84]: %timeit collections.deque((x for x in xrange(10000000) if x%4 == 0), maxlen=0)
1 loops, best of 3: 1.31 s per loop

In [85]: %timeit collections.deque((x for x in iter(range(10000000)) if x%4 == 0), maxlen=0) 
1 loops, best of 3: 1.33 s per loop 
```

显然， 3.x`range`确实比 2.x 慢一点`xrange`。而OP的`xrange`功能与它无关。`__iter__`（不足为奇，因为在对循环中发生的任何事情的 10000000 次调用中不可能看到对插槽的一次性调用，但有人提出了它的可能性。）

但它只慢了 30%。OP 是如何变得慢 2 倍的？好吧，如果我用 32 位 Python 重复相同的测试，我会得到 1.58 与 3.12。所以我的猜测是，这是 3.x 以损害 32 位的方式针对 64 位性能进行优化的又一种情况。

但这真的重要吗？检查一下，再次使用 3.3.0 64 位：

```
In [86]: %timeit [x for x in range(10000000) if x%4 == 0]
1 loops, best of 3: 3.65 s per loop 
```

因此，构建所需的`list`时间是整个迭代的两倍多。

至于“比 Python 2.6+ 消耗更多的资源”，根据我的测试，看起来 3.x`range`的大小与 2.x 的大小完全相同`xrange`——而且，即使它是 10 倍大，构建不必要的列表仍然比范围迭代可能做的任何问题多出大约 10000000 倍。

那么显式`for`循环而不是内部的 C 循环`deque`呢？

```
In [87]: def consume(x):
   ....:     for i in x:
   ....:         pass
In [88]: %timeit consume(x for x in range(10000000) if x%4 == 0)
1 loops, best of 3: 1.85 s per loop 
```

因此，声明中浪费的时间几乎与`for`迭代`range`.

如果您担心优化范围对象的迭代，那么您可能找错地方了。

* * *

同时，你一直问为什么`xrange`被删除，不管人们告诉你多少次同样的事情，但我会再重复一遍：它没有被删除：它被重命名为`range`，而 2.x`range`就是被删除的内容。

这里有一些证明 3.3`range`对象是 2.x`xrange`对象（而不是 2.x`range`函数）的直接后代：[3.3`range`](http://hg.python.org/cpython/file/3.3/Objects/rangeobject.c)和[2.7`xrange`](http://hg.python.org/cpython/file/2.7/Objects/rangeobject.c)的源。您甚至可以看到[更改历史记录](http://hg.python.org/cpython/diff/a6eb6acfe04a/Objects/rangeobject.c)（我相信，链接到替换文件中任何位置的字符串“xrange”的最后一个实例的更改）。

那么，为什么会慢呢？

好吧，首先，他们添加了许多新功能。另一方面，他们在整个地方（尤其是内部迭代）进行了各种具有轻微副作用的更改。并且已经做了很多工作来显着优化各种重要的案例，即使它有时会略微悲观不太重要的案例。把这一切加起来，我并不感到惊讶的是，`range`尽可能快地迭代 a 现在有点慢。这是没有人会足够关注的次要案例之一。没有人可能有一个真实的用例，这种性能差异是他们代码中的热点。

* * *

## 回答 #2

> 赞同：150
> 
> 时间：2013-02-22T01:09:29.197

Python3 的范围*是*Python2 的 xrange。没有必要在它周围包裹一个迭代器。要在 Python3 中获取实际列表，您需要使用`list(range(...))`

如果你想要一些适用于 Python2 和 Python3 的东西，试试这个

```
try:
    xrange
except NameError:
    xrange = range 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-02-21T23:42:07.870

Python 3 的`range`类型与 Python 2 的`xrange`. 我不确定你为什么会看到速度变慢，因为你的`xrange`函数返回的迭代器正是你`range`直接迭代得到的。

我无法在我的系统上重现减速。以下是我的测试方式：

Python 2，带有`xrange`：

```
Python 2.7.3 (default, Apr 10 2012, 23:24:47) [MSC v.1500 64 bit (AMD64)] on win32
Type "copyright", "credits" or "license()" for more information.
>>> import timeit
>>> timeit.timeit("[x for x in xrange(1000000) if x%4]",number=100)
18.631936646865853 
```

Python 3`range`稍微快一点：

```
Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 10:57:17) [MSC v.1600 64 bit (AMD64)] on win32
Type "copyright", "credits" or "license()" for more information.
>>> import timeit
>>> timeit.timeit("[x for x in range(1000000) if x%4]",number=100)
17.31399508687869 
```

我最近了解到 Python 3 的`range`类型还有一些其他简洁的特性，比如支持切片：`range(10,100,2)[5:25:5]`is `range(20, 60, 10)`!

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-22T15:18:03.857

修复 python2 代码的一种方法是：

```
import sys

if sys.version_info >= (3, 0):
    def xrange(*args, **kwargs):
        return iter(range(*args, **kwargs)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-07T01:52:23.583

Python 2 中的 xrange 是一个生成器并实现了迭代器，而 range 只是一个函数。在 Python3 中，我不知道为什么会从 xrange 中删除。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-12-27T10:46:21.857

**comp:~$ python** Python 2.7.6 (default, Jun 22 2015, 17:58:13) [GCC 4.8.2] on linux2

```
>>> import timeit
>>> timeit.timeit("[x for x in xrange(1000000) if x%4]",number=100) 
```

5.656799077987671

```
>>> timeit.timeit("[x for x in xrange(1000000) if x%4]",number=100) 
```

5.579368829727173

```
>>> timeit.timeit("[x for x in range(1000000) if x%4]",number=100) 
```

21.54827117919922

```
>>> timeit.timeit("[x for x in range(1000000) if x%4]",number=100) 
```

22.014557123184204

**使用 timeit number=1 参数：**

```
>>> timeit.timeit("[x for x in range(1000000) if x%4]",number=1) 
```

0.2245171070098877

```
>>> timeit.timeit("[x for x in xrange(1000000) if x%4]",number=1) 
```

0.10750913619995117

**comp:~$ python3** Python 3.4.3（默认，2015 年 10 月 14 日，20:28:29）[GCC 4.8.4] 在 linux 上

```
>>> timeit.timeit("[x for x in range(1000000) if x%4]",number=100) 
```

9.113872020003328

```
>>> timeit.timeit("[x for x in range(1000000) if x%4]",number=100) 
```

9.07014398300089

**使用 timeit number=1,2,3,4 参数可以快速且线性地工作：**

```
>>> timeit.timeit("[x for x in range(1000000) if x%4]",number=1) 
```

0.09329321900440846

```
>>> timeit.timeit("[x for x in range(1000000) if x%4]",number=2) 
```

0.18501482300052885

```
>>> timeit.timeit("[x for x in range(1000000) if x%4]",number=3) 
```

0.2703447980020428

```
>>> timeit.timeit("[x for x in range(1000000) if x%4]",number=4) 
```

0.36209142999723554

因此，如果我们测量 1 个运行循环周期，例如 timeit.timeit("[x for x in range(1000000) if x%4]",number=1) （正如我们在实际代码中实际使用的那样），python3 工作得足够快，但在重复循环中，python 2 xrange() 在速度上胜过 python 3 中的 range()。

# ruby - 在全新的 Debian 安装中提取 Ruby 时出错

> ID：15014316
> 
> 赞同：0
> 
> 时间：2013-02-21T23:38:04.120
> 
> 标签：ruby, rvm

我刚刚配置了 2 台新的 Debian 服务器，看起来 RVM 无法提取 Ruby。我缺少什么提取依赖项？

控制台输出：尝试提取源时出错。停止安装。

截图：[http ://d.pr/i/JO2Q](http://d.pr/i/JO2Q)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:43:42.973

日志明确表示“请阅读 ...extract.log”。我敢打赌，您的存储设备上没有足够的空间，但您绝对应该检查该日志文件。

# php - 回复 - 使用 gmail smtp 在 codeigniter 中发送电子邮件

> ID：15014324
> 
> 赞同：1
> 
> 时间：2013-02-21T23:38:29.413
> 
> 标签：php, codeigniter, smtp, gmail

我在我的网站中创建了一个联系表格，并且，为了将电子邮件发送到网站帐户 (contact@mywebsite.com)，我使用的是 gmail smtp，使用与我将接收消息相同的电子邮件。

因此，用户访问我的网站，点击联系页面，填写表格：姓名、电子邮件、消息。

比我发送带有以下代码的电子邮件：

```
 $config = Array(
        'protocol' => 'smtp',
        'smtp_host' => 'ssl://smtp.googlemail.com',
        'smtp_port' => 465,
        'smtp_user' => 'contact@mywebsite.com',
        'smtp_pass' => 'mypass',
        'mailtype' => 'html',
        'charset' => 'utf-8'
    );
    $this->load->library('email', $config);
    $this->email->set_newline("\r\n");

    $email = $this->input->post('email');
    $name = $this->input->post('name');
    $msg = $this->input->post('msg');
    $this->email->to('contact@mywebsite.com');
    $this->email->reply_to($email); //User email submited in form
    $this->email->from($email, $name);
    $this->email->subject('Conctact form');
    $this->email->message($msg);
    if ($this->email->send())
    {
        return true;
    } else
    {
        echo $this->email->print_debugger();
        return false;
    } 
```

电子邮件进入我的“contact@mywwebsite.com”收件箱，我可以正常阅读邮件，但是......当我点击“回复”而不是回复给我发送邮件的用户时，它回复到“我”（联系@mywebsite.com）。

我已经配置了reply_to，回复用户地址，不是我的，但仍然会去contact@mywebsite.com。

如何解决这个问题？我应该在代码或 gmail 设置中更改更多内容吗？

（PS.：我使用gmail界面阅读电子邮件，直接来自站点mail.google.com）

提前致谢。

-- 另外，当我收到电子邮件时，它显示：“发件人：'提交表单中的姓名'”

不是：“来自：'提交表单中的姓名'<'提交表单中的电子邮件'>”应该是这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:46:00.277

Gmail 会这样做，我认为没有任何解决方法。

“发件人”地址永远只是您用来发送电子邮件的帐户——您不能简单地“通过”gmail 的服务器。

如果您需要这样做，您将需要 SendGrid 或您自己的 smtp 服务器之类的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T00:36:07.617

我修复了通过另一个用户发送电子邮件...我从 me@mywebsite.com 发送到contact@mywebsite.com，当我点击回复时，选择的用户与发送消息的用户相同。

[GMail 似乎忽略了回复](https://stackoverflow.com/questions/2421234/gmail-appearing-to-ignore-reply-to)

# python - 如何确定 waf 选择的工具？

> ID：15014326
> 
> 赞同：4
> 
> 时间：2013-02-21T23:38:30.960
> 
> 标签：python, build, build-process, waf

如何确定 waf 选择哪个特定工具作为“cxx_compiler”等？示例：

```
def configure(ctx):
   print('Running ' + ctx.cmd + ' in ' + ctx.path.abspath() )
   ctx.load('compiler_c')
   ctx.load('compiler_cxx')

def build(ctx):
   print('Running ' + ctx.cmd + ' in ' + ctx.path.abspath() )
   # Here print which C++ compiler was chosen
   print 'Building cpp files with %s' % WHAT_GOES_HERE 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T00:28:40.483

```
def options(opt):
    opt.load('compiler_c')
    opt.load('compiler_cxx')

def configure(cfg):
    cfg.load('compiler_c')
    cfg.load('compiler_cxx')

def build(bld):
    print "Compiler is CC_NAME  %s  CC  %s"%(bld.env.CC_NAME,bld.env.CC)
    print "Compiler is CXX_NAME %s  CXX %s"%(bld.env.CXX_NAME,bld.env.CXX) 
```

会给你：

```
D:\temp>waf.bat configure build --check-c-compiler=gcc --check-cxx-compiler=g++
Setting top to                           : D:\temp
Setting out to                           : D:\temp\build
Checking for 'gcc' (c compiler)          : c:\tools\gcc\bin\gcc.exe
Checking for 'g++' (c++ compiler)        : c:\tools\gcc\bin\g++.exe
'configure' finished successfully (0.191s)
Waf: Entering directory `D:\temp\build'
Compiler is CC_NAME  gcc  CC  ['c:\\tools\\gcc\\bin\\gcc.exe']
Compiler is CXX_NAME gcc  CXX ['c:\\tools\\gcc\\bin\\g++.exe']
Waf: Leaving directory `D:\temp\build'
'build' finished successfully (0.008s) 
```

# r - R中美元价值和百分比的数据清理

> ID：15014333
> 
> 赞同：0
> 
> 时间：2013-02-21T23:39:10.450
> 
> 标签：r, data-cleaning

我一直在寻找 R 中的一些包来帮助我将美元值转换为漂亮的数值。我似乎找不到一个（例如在 plyr 包中）。我正在寻找的基本内容是简单地删除 $ 符号以及分别将“M”和“K”翻译为百万和数千。

要复制，我可以使用下面的代码：

```
require(XML)
theurl <- "http://www.kickstarter.com/help/stats"
html <- htmlParse(theurl)

allProjects <- readHTMLTable(html)[[1]]
names(allProjects) <-  c("Category","LaunchedProjects","TotalDollars","SuccessfulDollars","UnsuccessfulDollars","LiveDollars","LiveProjects","SuccessRate") 
```

数据如下所示：

```
> tail(allProjects)
      Category LaunchedProjects TotalDollars SuccessfulDollars UnsuccessfulDollars LiveDollars
8         Food            3,069     $16.79 M          $13.18 M             $2.78 M   $822.64 K
9      Theater            4,155     $13.45 M          $12.01 M             $1.22 M   $217.86 K
10      Comics            2,242     $12.88 M          $11.07 M           $941.31 K   $862.18 K
11     Fashion            2,799      $9.62 M           $7.59 M             $1.44 M   $585.98 K
12 Photography            2,794      $6.76 M           $5.48 M             $1.06 M   $220.75 K
13       Dance            1,185      $3.43 M           $3.13 M           $225.82 K     $71,322
   LiveProjects SuccessRate
8           189      39.27%
9           111      64.09%
10          134      46.11%
11          204      27.24%
12           83      36.81%
13           40      70.22% 
```

我最终编写了自己的函数：

```
dollarToNumber <- function(vectorInput) {
  result <- c()
  for (dollarValue in vectorInput) {
    if (is.factor(dollarValue)) {  
      dollarValue = levels(dollarValue)
    }
    dollarValue <- gsub("(\\$|,)","",dollarValue)
    if(grepl(" K",dollarValue)) {
      dollarValue <- as.numeric(gsub(" K","",dollarValue)) * 1000
    } else if (grepl(" M",dollarValue)) {
      dollarValue <- as.numeric(gsub(" M","",dollarValue)) * 1000000
    }  
    if (!is.numeric(dollarValue)) {
      dollarValue <- as.numeric(dollarValue)
    }
    result <- append(result,dollarValue)
  }
    result
} 
```

然后我用它来得到我想要的：

```
 allProjects <- transform(allProjects,
                          LaunchedProjects = as.numeric(gsub(",","",levels(LaunchedProjects))),
                          TotalDollars = dollarToNumber(TotalDollars),
                          SuccessfulDollars = dollarToNumber(SuccessfulDollars),
                          UnsuccessfulDollars = dollarToNumber(UnsuccessfulDollars),
                          LiveDollars = dollarToNumber(LiveDollars),
                          LiveProjects = as.numeric(LiveProjects),
                          SuccessRate = as.numeric(gsub("%","",SuccessRate))/100) 
```

这将在下面给我这个结果：

```
> str(allProjects)
'data.frame':   13 obs. of  8 variables:
 $ Category           : Factor w/ 13 levels "Art","Comics",..: 6 8 4 9 12 11 1 7 13 2 ...
 $ LaunchedProjects   : num  10006 1185 1860 20025 2242 ...
 $ TotalDollars       : num  1.11e+08 9.68e+07 6.89e+07 6.66e+07 4.31e+07 ...
 $ SuccessfulDollars  : num  90990000 84960000 59020000 59390000 34910000 ...
 $ UnsuccessfulDollars: num  16640000 7900000 6830000 5480000 3700000 ...
 $ LiveDollars        : num  3090000 3970000 3010000 1750000 4470000 ...
 $ LiveProjects       : num  13 7 6 11 3 10 8 4 1 2 ...
 $ SuccessRate        : num  0.394 0.338 0.382 0.541 0.334 ... 
```

我是 R 新手，我觉得我写的代码太丑了，肯定有更好的方法来做到这一点而无需重新发明轮子吗？我使用了 apply、aaply、ddply 函数但没有成功（我也试图不使用 for 循环......）。最重要的是，在处理 SuccessRate 列时，我在 R 中找不到类似 as.percentage 的函数。我错过了什么？

任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T00:49:22.117

使 R 与您可能习惯的其他语言不同的一件事是，最好以“向量化”的方式做事，一次对整个向量进行操作，而不是循环遍历每个单独的值。所以你的`dollarToNumber`函数可以在没有`for`循环的情况下重写：

```
dollarToNumber_vectorised <- function(vector) {
  # Want the vector as character rather than factor while
  # we're doing text processing operations
  vector <- as.character(vector)
  vector <- gsub("(\\$|,)","", vector)
  # Create a numeric vector to store the results in, this will give you
  # warning messages about NA values being introduced because the " K" values
  # can't be converted directly to numeric
  result <- as.numeric(vector)
  # Find all the "$N K" values, and modify the result at those positions
  k_positions <- grep(" K", vector)
  result[k_positions] <- as.numeric(gsub(" K","", vector[k_positions])) * 1000
  # Same for the "$ M" value
  m_positions <- grep(" M", vector)
  result[m_positions] <- as.numeric(gsub(" M","", vector[m_positions])) * 1000000
  return(result)
} 
```

它仍然提供与原始函数相同的输出：

```
> dollarToNumber_vectorised(allProjects$LiveDollars)
 [1] 3100000 3970000 3020000 1760000 4510000  762650  510860  823370  218590  865940
[11]  587670  221110   71934
# Don't worry too much about this warning
Warning message:
In dollarToNumber_vectorised(allProjects$LiveDollars) :
  NAs introduced by coercion
> dollarToNumber(allProjects$LiveDollars)
 [1] 3100000 3970000 3020000 1760000 4510000  762650  510860  823370  218590  865940
[11]  587670  221110   71934 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-16T14:32:11.160

使用`parse`and的解决方案`eval`：

```
ToNumber <- function(X)
{
  A <- gsub("%","*1e-2",gsub("K","*1e+3",gsub("M","*1e+6",gsub("\\$|,","",as.character(X)),fixed=TRUE),fixed=TRUE),fixed=TRUE)
  B <- try(sapply(A,function(a){eval(parse(text=a))}),silent=TRUE)
  if (is.numeric(B)) return (as.numeric(B)) else return(X)
}

#----------------------------------------------------------------------
# Example:
X <-
  read.table( header=TRUE,
              text = 
   'Category LaunchedProjects TotalDollars SuccessfulDollars UnsuccessfulDollars LiveDollars  LiveProjects SuccessRate
        Food            3,069    "$16.79 M"         "$13.18 M"            "$2.78 M"  "$822.64 K" 189      39.27%
     Theater            4,155    "$13.45 M"         "$12.01 M"            "$1.22 M"  "$217.86 K" 111      64.09%
      Comics            2,242    "$12.88 M"         "$11.07 M"          "$941.31 K"  "$862.18 K" 134      46.11%
     Fashion            2,799     "$9.62 M"          "$7.59 M"            "$1.44 M"  "$585.98 K" 204      27.24%
 Photography            2,794     "$6.76 M"          "$5.48 M"            "$1.06 M"  "$220.75 K"  83      36.81%
       Dance            1,185     "$3.43 M"          "$3.13 M"          "$225.82 K"    "$71,322"  40      70.22%' )

numX <- as.data.frame(lapply(as.list(X),ToNumber))

options(width=1000)
print(numX,row.names=FALSE)

#    Category LaunchedProjects TotalDollars SuccessfulDollars UnsuccessfulDollars LiveDollars LiveProjects SuccessRate
#        Food             3069     16790000          13180000             2780000      822640          189      0.3927
#     Theater             4155     13450000          12010000             1220000      217860          111      0.6409
#      Comics             2242     12880000          11070000              941310      862180          134      0.4611
#     Fashion             2799      9620000           7590000             1440000      585980          204      0.2724
# Photography             2794      6760000           5480000             1060000      220750           83      0.3681
#       Dance             1185      3430000           3130000              225820       71322           40      0.7022 
```

# javascript - 是否可以在用户更改标签/最小化之前检测到？

> ID：15014334
> 
> 赞同：0
> 
> 时间：2013-02-21T23:39:12.693
> 
> 标签：javascript

我知道可以[在用户关闭网页之前](https://stackoverflow.com/questions/147636/best-way-to-detect-when-a-user-leaves-a-web-page)使用`onbeforeunload`. 我只是想知道在用户切换选项卡或最小化之前是否触发了类似的事件。我**不是在寻找**在用户更改选项卡后触发的事件。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:44:01.023

不，没有这样的事件。对不起！

# .net - NLog 从命令行启用日志记录

> ID：15014335
> 
> 赞同：1
> 
> 时间：2013-02-21T23:39:22.180
> 
> 标签：.net, logging, nlog

您知道是否有办法以编程方式启用某些日志记录级别？

我想在正常应用程序使用期间仅启用错误日志记录，但能够在需要时通过将命令行参数传递给应用程序来打开更详细的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T20:21:50.370

给定一个像这样配置的基本记录器

```
<targets>
  <target xsi:type="File" name="payroll" fileName="c:\temp\payroll.log"             
        layout="${longdate} ${uppercase:${level}} ${message}" />
</targets>
<rules>
    <logger name="*" minlevel="Error" writeTo="payroll" />
</rules> 
```

您可以以编程方式添加到日志级别

```
 static void Main(string[] args)
    {
        if (args.Contains("Info"))
        {
            var logger = NLog.LogManager.Configuration.LoggingRules.First(x => x.Targets.First().Name == "payroll");
            logger.EnableLoggingForLevel(LogLevel.Info);    
        }

        var proc = new PayrollProcessor();
        proc.Process();
    } 
```

# javascript - 单击时删除值

> ID：15014337
> 
> 赞同：0
> 
> 时间：2013-02-21T23:39:26.810
> 
> 标签：javascript, html

我想创建一个 javascript，一旦单击，它将 anotif 的值更改为 0：

```
Approved:<?php if($anotif<1){
    echo 0;
} else { 
    echo '<a class="anotif" onClick="validator()" href="?anotif">'.$anotif.'</a>';
} ?><br/> 
```

但我不知道怎么做，考虑到我对javascript很陌生。我用谷歌搜索了一下，但我找不到答案。

```
function validator(){
    if(document.anotif.clicked){ // I'm not really sure if this is correct.
        // if clicked, change value to zero
} 
```

更准确地说，我希望它在点击后看起来像这样： From: Approved:3 To: Approved:0

```
Approved:<?php if($anotif<1){
    echo 0;
} else { 
    echo '<a class="anotif" onClick="validator()" href="?anotif">'.$anotif.'</a>';
} ?><br/> 
```

此代码将引导我使用 ?anotif 来查看表中数据库中的一些数据。一旦获得批准：

*   被点击时，必须在我移动到其他页面的同时设置为零。

    问题是它需要刷新才能被系统设置为 0。

    这是其余的代码：

    ```
    $firstname =  getuserfield('txtFname');
    $lastname = getuserfield('txtLname');
    echo 'Hello '.$firstname.' '.$lastname.'.<br/>';

    $anotif = 0;
    $dnotif = 0;
    $anotif = $anotif + getuserfield('approved_notif');
    $dnotif = $dnotif + getuserfield('disapproved_notif');
    ?>
    <h3>Notifications:</h3>
    Approved:<?php if($anotif<1){echo 0;} else { echo '<a class="anotif" onClick="validator(this);" href="?anotif">'.$anotif.'</a>';}?><br/> //problem is over here
    <?php 
    if(isset($_GET['anotif'])) {
        $query = "SELECT * FROM hrf_leave WHERE empid = '$empid' AND formStatus = 1 AND checked = 0";
        $query_run = mysql_query($query) or die($query."<br/><br/>".mysql_error());
        echo "<table border=1>
        <tr>
        <th>Type of Leave</th>
        <th>Specific Reason</th>
        <th>Date From</th>
        <th>Date To</th>
        <th>Number of Days</th>
        </tr>";
        echo "<tr>";
        while($record = mysql_fetch_array($query_run)){ 
            $leave_id = $record['leave_id'];
            echo "<td>" . $record['type_of_leave'] . "</td>";
            echo "<td>" . $record['specific_reason'] . "</td>";
            echo "<td>" . $record['date_from'] . "</td>";
            echo "<td>" . $record['date_to'] . "</td>";
            echo "<td>" . $record['num_of_days'] . "</td>";
            echo "</tr>";
            $query2 = "UPDATE hrf_leave SET checked=1 WHERE leave_id = $leave_id";
            if($query_run2 = mysql_query($query2)){ 
                $anotif = 0;
                $query3 = "UPDATE hrms_emp_info SET approved_notif=$anotif WHERE empid = $empid";
                if($query_run3 = mysql_query($query3)){
                }
            }
        }
        echo "</table>";
    }
    ?>
    Disapproved:<?php if($dnotif<1){echo 0;} else { echo '<a href="?dnotif">'.$dnotif.'</a><br/>';} ?> //and here
    <?php
    if(isset($_GET['dnotif'])) {
        $query = "SELECT * FROM hrf_leave WHERE empid = '$empid' AND formStatus = 2 AND checked=0"; 
        $query_run = mysql_query($query);
        echo "<table border=1>
        <tr>
        <th>Type of Leave</th>
        <th>Specific Reason</th>
        <th>Date From</th>
        <th>Date To</th>
        <th>Number of Days</th>
        </tr>";
        echo "<tr>";
        while($record = mysql_fetch_array($query_run)){
            $leave_id = $record['leave_id'];
            echo "<td>" . $record['type_of_leave'] . "</td>";
            echo "<td>" . $record['specific_reason'] . "</td>";
            echo "<td>" . $record['date_from'] . "</td>";
            echo "<td>" . $record['date_to'] . "</td>";
            echo "<td>" . $record['num_of_days'] . "</td>";
            echo "</tr>";
            $query2 = "UPDATE hrf_leave SET checked=1 WHERE leave_id = $leave_id";
            if($query_run2 = mysql_query($query2)){ 
                $dnotif = $dnotif-1;
                $query3 = "UPDATE  hrms_emp_info SET disapproved_notif=$dnotif WHERE empid = $empid";
                if($query_run3 = mysql_query($query3)){ 
                }
            }
        }
        echo "</table>";
    } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:44:20.740

你可以像这样改变你的锚：

```
<a class="anotif" onClick="return validator(this)" href="?anotif"> 
```

然后像这样更改`validator()`函数：

```
function validator(element)
{
    // element is clicked already, so you can change its value

    element.innerHTML = '0';

    // prevent click from changing page
    return false;
} 
```

~~但是，这里真正的问题是页面将被更改，`?anotif`而您所做的任何更改都将是白费力气。~~ 用一种方法更新了代码，以防止点击更改页面并将数字减少到“0”。

# r - 使用新列和 data.table 进行 Rbind

> ID：15014339
> 
> 赞同：14
> 
> 时间：2013-02-21T23:39:42.230
> 
> 标签：r, data.table

我需要将许多大表添加到现有表中，因此我将 rbind 与优秀的包 data.table 一起使用。但是后来的一些表比原来的表有更多的列（需要包括在内）。data.table 是否有 rbind.fill 的等价物？

```
library(data.table)

aa <- c(1,2,3)
bb <- c(2,3,4)
cc <- c(3,4,5)

dt.1 <- data.table(cbind(aa, bb))
dt.2 <- data.table(cbind(aa, bb, cc))

dt.11 <- rbind(dt.1, dt.1)  # Works, but not what I need
dt.12 <- rbind(dt.1, dt.2)  # What I need, doesn't work
dt.12 <- rbind.fill(dt.1, dt.2)  # What I need, doesn't work either 
```

我需要在拥有所有表之前开始 rbinding，因此无法知道将来会调用哪些新列。缺失的数据可以用 NA 填充。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-10-10T07:35:28.463

由于`v1.9.2`,`data.table`的 rbind 函数获得了`fill`参数。从`?rbind.data.table`文档：

> 如果 TRUE 用 NA 填充缺失的列。默认情况下为假。当为 TRUE 时，use.names 必须为 TRUE，并且输入列表的所有项目都必须具有非空的列名。

因此您可以这样做（大约在 v1.9.6 之前）：

```
data.table::rbind(dt.1, dt.2, fill=TRUE) 
#    aa bb cc
# 1:  1  2 NA
# 2:  2  3 NA
# 3:  3  4 NA
# 4:  1  2  3
# 5:  2  3  4
# 6:  3  4  5 
```

**v1.9.6 的更新：**

这现在可以直接工作：

```
rbind(dt.1, dt.2, fill=TRUE)
#    aa bb cc
# 1:  1  2 NA
# 2:  2  3 NA
# 3:  3  4 NA
# 4:  1  2  3
# 5:  2  3  4
# 6:  3  4  5 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T05:05:30.443

这是一种将更新缺失列的方法

```
rbind.missing <- function(A, B) { 

  cols.A <- names(A)
  cols.B <- names(B)

  missing.A <- setdiff(cols.B,cols.A)
  # check and define missing columns in A
  if(length(missing.A) > 0L){
   # .. means "look up one level"
   class.missing.A <- lapply(B[, ..missing.A], class)
   nas.A <- lapply(class.missing.A, as, object = NA)
   A[,c(missing.A) := nas.A]
  }
  # check and define missing columns in B
  missing.B <- setdiff(names(A), cols.B)
  if(length(missing.B) > 0L){
    class.missing.B <- lapply(A[, ..missing.B], class)
    nas.B <- lapply(class.missing.B, as, object = NA)
    B[,c(missing.B) := nas.B]
  }
  # reorder so they are the same
  setcolorder(B, names(A))
  rbind(A, B)

}

rbind.missing(dt.1,dt.2)

##    aa bb cc
## 1:  1  2 NA
## 2:  2  3 NA
## 3:  3  4 NA
## 4:  1  2  3
## 5:  2  3  4
## 6:  3  4  5 
```

这对于许多或大型 data.tables 来说效率不高，因为它一次只能工作两个。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-09T19:02:30.380

答案很棒，但看起来，这里建议了一些功能[，](https://stackoverflow.com/questions/3402371/combine-two-data-frames-by-rows-rbind-when-they-have-different-sets-of-columns)例如 plyr::rbind.fill 和 gtools::smartbind 似乎对我来说非常有效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-22T03:42:25.090

基本概念是在两个方向上添加缺失的列：从运行`master`表到`newTable`另一个方向并返回。

正如@menl 在评论中指出的那样，简单地分配一个 NA 是一个问题，因为这将使整个列成为`class` `logical`.

一种解决方案是强制使用单一类型（即`as.numeric(NA)`）的所有列，但这太严格了。

相反，我们需要分析每个新列的类别。然后我们可以使用`as(NA, cc)`_(`cc`作为类) 作为我们将分配给新列的向量。我们将其包装在 the 的 语句`lapply`中`RHS`并使用to 分配。`eval(columnName)``LHS`

然后我们可以将它包装在一个函数中并使用 S3 方法，以便我们可以简单地调用

```
rbindFill(A, B) 
```

下面是函数。

```
rbindFill.data.table <- function(master, newTable)  {
# Append newTable to master

    # assign to Master
    #-----------------#
      # identify columns missing
      colMisng     <- setdiff(names(newTable), names(master))

      # if there are no columns missing, move on to next part
      if (!identical(colMisng, character(0)))  {
           # identify class of each
            colMisng.cls <- sapply(colMisng, function(x) class(newTable[[x]]))

            # assign to each column value of NA with appropriate class 
            master[ , eval(colMisng) := lapply(colMisng.cls, function(cc) as(NA, cc))]
          }

    # assign to newTable
    #-----------------#
      # identify columns missing
      colMisng     <- setdiff(names(master), names(newTable))

      # if there are no columns missing, move on to next part
      if (!identical(colMisng, character(0)))  {
        # identify class of each
        colMisng.cls <- sapply(colMisng, function(x) class(master[[x]]))

        # assign to each column value of NA with appropriate class 
        newTable[ , eval(colMisng) := lapply(colMisng.cls, function(cc) as(NA, cc))]
      }

    # reorder columns to avoid warning about ordering
    #-----------------#
      colOrdering <- colOrderingByOtherCol(newTable, names(master))
      setcolorder(newTable,  colOrdering)

    # rbind them! 
    #-----------------#
      rbind(master, newTable)
  }

  # implement generic function
  rbindFill <- function(x, y, ...) UseMethod("rbindFill") 
```

**示例用法：**

```
 # Sample Data: 
    #--------------------------------------------------#
    A  <- data.table(a=1:3, b=1:3, c=1:3)
    A2 <- data.table(a=6:9, b=6:9, c=6:9)
    B  <- data.table(b=1:3, c=1:3, d=1:3, m=LETTERS[1:3])
    C  <- data.table(n=round(rnorm(3), 2), f=c(T, F, T), c=7:9)
    #--------------------------------------------------#

    # Four iterations of calling rbindFill
    master <- rbindFill(A, B)
    master <- rbindFill(master, A2)
    master <- rbindFill(master, C)

    # Results:
    master
    #      a  b c  d  m     n     f
    #  1:  1  1 1 NA NA    NA    NA
    #  2:  2  2 2 NA NA    NA    NA
    #  3:  3  3 3 NA NA    NA    NA
    #  4: NA  1 1  1  A    NA    NA
    #  5: NA  2 2  2  B    NA    NA
    #  6: NA  3 3  3  C    NA    NA
    #  7:  6  6 6 NA NA    NA    NA
    #  8:  7  7 7 NA NA    NA    NA
    #  9:  8  8 8 NA NA    NA    NA
    # 10:  9  9 9 NA NA    NA    NA
    # 11: NA NA 7 NA NA  0.86  TRUE
    # 12: NA NA 8 NA NA -1.15 FALSE
    # 13: NA NA 9 NA NA  1.10  TRUE 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-03T12:17:09.773

插入缺失列（具有正确的类型和 NA）的另一种方法是使用具有第二个 data.table 结构的空 data.table 插入`merge()`第一个 data.table。这节省了在用户函数中引入错误的可能性（我知道它比我自己的代码更可靠；））。从上面使用 mnel 的表格，执行类似于下面的代码的操作。`A``A2[0]``merge()`

此外，`rbindlist()`在处理`data.tables`.

定义表（与上面 mnel 的代码相同）：

```
library(data.table)
A  <- data.table(a=1:3, b=1:3, c=1:3)
A2 <- data.table(a=6:9, b=6:9, c=6:9)
B  <- data.table(b=1:3, c=1:3, d=1:3, m=LETTERS[1:3])
C  <- data.table(n=round(rnorm(3), 2), f=c(T, F, T), c=7:9) 
```

在表 A 中插入缺失的变量：（注意使用`A2[0]`

```
A <- merge(x=A, y=A2[0], by=intersect(names(A),names(A2)), all=TRUE) 
```

在表 A2 中插入缺失的列：

```
A2 <- merge(x=A[0], y=A2, by=intersect(names(A),names(A2)), all=TRUE) 
```

现在应该有相同的列，具有相同的类型`A`。`A2`将列顺序设置为匹配，以防万一（可能不需要，不确定是否`rbindlist()`跨列名或列位置绑定）：

```
setcolorder(A2, names(A))
DT.ALL <- rbindlist(l=list(A,A2))
DT.ALL 
```

对其他表重复...也许将其放入函数中而不是手动重复会更好...

```
DT.ALL <- merge(x=DT.ALL, y=B[0], by=intersect(names(DT.ALL), names(B)), all=TRUE)
B <- merge(x=DT.ALL[0], y=B, by=intersect(names(DT.ALL), names(B)), all=TRUE)
setcolorder(B, names(DT.ALL))
DT.ALL <- rbindlist(l=list(DT.ALL, B))

DT.ALL <- merge(x=DT.ALL, y=C[0], by=intersect(names(DT.ALL), names(C)), all=TRUE)
C <- merge(x=DT.ALL[0], y=C, by=intersect(names(DT.ALL), names(C)), all=TRUE)
setcolorder(C, names(DT.ALL))
DT.ALL <- rbindlist(l=list(DT.ALL, C))
DT.ALL 
```

结果看起来与 mnels 的输出相同（随机数和列顺序除外）。

PS1：原作者没有说如果有匹配的变量怎么办——我们是真的想做 a`rbind()`还是在想 a `merge()`？

PS2：（因为我没有足够的声誉发表评论）问题的要点似乎与[此问题](https://stackoverflow.com/questions/18003717/is-there-any-efficient-way-than-rbind-filllist)重复。`data.table`对于`plyr`大型数据集的基准测试也很重要。

# jquery - 无限滚动中断 jQuery 事件

> ID：15014340
> 
> 赞同：0
> 
> 时间：2013-02-21T23:39:48.373
> 
> 标签：jquery, ajax, infinite-scroll

我在 jQuery 中有一个函数，当您将鼠标悬停在一个 div 上时，它会消失并在其位置显示另一个 div。该功能运行良好，直到我使用 Ajax 加载项目以进行无限滚动。我知道这与绑定新元素有关（从我读过的内容中，使用 on()），但由于我是 jQuery 新手，我不知道如何实现这个更改。我一直在尝试过去几个小时，但没有取得任何进展。

（具体问题：new_social hover 在新加载项目的 ajax 加载时被破坏）

任何帮助将不胜感激，特别是在代码形式！非常感谢！

以下是功能：

```
$("a.share").hover(function(){
  $(this).closest($('div.new_story')).children("div.new_social_buttons").show();
  $(this).closest(".new_social").hide();
 },
 function(){
  });

$("div.new_social_buttons").hover(function(){

},
function(){
  $(this).hide();
   $(this).closest($('div.new_story')).children("div.new_social").show();
}); 
```

这是ajax加载函数：

```
jQuery.ias({
container : '#middle',
item: '.new_story',
pagination: '#pagination',
next: 'a.next',
loader: '<img src="loader.gif"/>',
history: false

 }); 
```

这是我获得无限滚动的地方，我认为它在函数调用后面有 jQuery： [https ://github.com/webcreate/Infinite-Ajax-Scroll](https://github.com/webcreate/Infinite-Ajax-Scroll)

再次感谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T23:50:28.283

听起来事件需要委托给页面加载期间存在的静态父元素。

**委托的 a.share 处理程序**

```
$(document).on({
    mouseenter: function(){
        $(this).closest($('div.new_story')).children("div.new_social_buttons").show();
        $(this).closest(".new_social").hide();
    },
    mouseleave: function(){
        //looks like nothing going on here; just providing for future ref.
    }
}, 'a.share'); 
```

**委托的 div.new_social_buttons 处理程序**

```
$(document).on({
    mouseenter: function(){
        //looks like nothing going on here; just providing for future ref.
    },
    mouseleave: function(){
        $(this).hide();
        $(this).closest($('div.new_story')).children("div.new_social").show();
    }
}, 'div.new_social_buttons'); 
```

使用`.on()`时不能使用正常的`.hover()`包装方法。相反，您必须提供一个`mouseenter and`具有其中声明的功能的 mouseleave 对象。

另外，需要注意的是，您应该替换`document`为任何静态父元素以节省性能。因为 jQuery 的委托选择器利用了 javascript 的[querySelectorAll()](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)方法，所以性能提升可以忽略不计，但在深度嵌套的站点上可能会成为负担。这就是为什么我建议绑定到树中较低的静态对象。

# git - repo start 和 git checkout -b 的区别

> ID：15014345
> 
> 赞同：7
> 
> 时间：2013-02-21T23:40:19.450
> 
> 标签：git, android-source, repository

在 Android 内核中做一些工作。我对 git 很熟悉，但对 repo 不是特别熟悉，所以我阅读了以下文档：http: [//source.android.com/source/version-control.html](http://source.android.com/source/version-control.html)。据我了解，以及围绕主题分支进行试验，`repo start BRANCH_NAME`与`git checkout -b BRANCH_NAME`. 我的理解是正确的，还是我遗漏了一些微妙而重要的细节？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-13T22:37:52.580

不同之处在于在 .git/config 中为您的分支`repo start`设置`remote`和属性：`merge`

```
[branch "YOUR_BRANCH_HERE"]
    remote = aosp
    merge = master 
```

如果没有这些，repo 将不知道如何在您`repo upload`稍后运行时正确上传您的更改，并且它会表现得好像您的新分支根本不存在。

(There's also some logic in there that lets you create the new branch for every project in the repo simultaneously with `--all`, but that's just a convenience thing.)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T07:59:39.883

查看 repo start的[`start.py`源代码](https://gerrit.googlesource.com/git-repo/+/master/subcmds/start.py)，我认为主要区别在于对包含在 Android 项目中的**[清单文件的管理。](http://developer.android.com/guide/topics/manifest/manifest-intro.html)**

> 从清单中指定的修订开始，开始一个新的开发分支。

* * *

要添加到[Trevor Johns](https://stackoverflow.com/users/186035/trevor-johns)的[答案](https://stackoverflow.com/a/23642769/6309)，您需要检查“[如何使现有的 Git 分支跟踪远程分支？](https://stackoverflow.com/a/2286030/6309) ”（当您不使用时`repo start`）：

```
git checkout -b newBranch -t aosp/master 
```

这将在与新分支关联的配置中设置远程和合并（`-t`=“track”）。

一个简单的`git checkout -b`不会设置任何东西，并创建一个纯粹的本地分支（不跟踪任何上游分支到远程仓库）

# javascript - 为什么我不能访问位图的 x 变量？(javascript)

> ID：15014349
> 
> 赞同：0
> 
> 时间：2013-02-21T23:40:53.687
> 
> 标签：javascript, arrays, position, easeljs

我正在尝试遍历数组中的 3 个图像并将其添加到舞台（使用画架JS）。我也想定位。当我尝试访问数组中的图像时，我收到一条错误消息，提示我无法设置未定义的 x。为什么不能访问easeljs Bitmap的x变量？

```
function displayPosters() {

    getPosters(); //get all images and assign it to designated array

            console.log(frontPosters);
            console.log(frontPosters.length);

    if(currentCat == Category.HOME) { //if current category is HOME

        for(var i = 0; i < frontPosters.length; i++) { //loop through posters

            frontPosters[i].x = 40; //set x position for testing, also where error occurs
            stage.addChild(frontPosters[i]); //add poster to stage

        }

    }

} 
```

这是加载这些图像并将其推送到 frontPosters 数组中的代码。

```
var frontPosters = new Array(3);

function getPosters() {

    var games = new Image(); //create 3 images
    var apps = new Image();
    var aboutme = new Image();

    games.onload = function() { //add image to frontImages array on load

        var gamesPost = new createjs.Bitmap(games);
        frontPosters[0] = gamesPost;

    };

    apps.onload = function() {

        var appPost = new createjs.Bitmap(apps);
        frontPosters[1] = appPost;

    };

    aboutme.onload = function() {

        var amPost = new createjs.Bitmap(aboutme);
        frontPosters[2] = amPost;

    };

    games.src = "images/assets/posters/games_poster.jpg"; 
    apps.src = "images/assets/posters/apps_poster.jpg";
    aboutme.src = "images/assets/posters/aboutme_poster.jpg";

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:44:32.717

使用`for(poster in frontPosters)`是不好的做法，因为您实际上是在迭代数组**对象**而不是值（也就是数组本身）。改为使用`for(var i=0; i<frontPosters.length; i++)`。这是最简单的解决方案，IMO。

```
for(var i = 0; i < frontPosters.length; i++) { //loop through posters
    frontPosters[i].x = 40; //set x position for testing, also where error occurs
    stage.addChild(frontPosters[i]); //add poster to stage
} 
```

**编辑**

我认为您正在处理竞争条件。在加载所有图像**之前**，您正在检查您的数组。通过设置`var frontPosters = new Array(3);`，您会自动设置三个值，将`undefined`其推入新数组。

在继续执行脚本之前，您应该检查所有图像是否已加载。

这是给你的一个想法。设置仅在加载第三张图像后才会运行的回调。

```
var frontPosters = new Array(3);

function getPosters(callback) {

    var games   = new Image(),
        apps    = new Image(),
        aboutme = new Image(),
        loaded  = 0;

    games.onload = function() {
        frontPosters[0] = new createjs.Bitmap(this);
        if (++loaded === 3) callback();
    };

    apps.onload = function() {
        frontPosters[1] = new createjs.Bitmap(this);
        if (++loaded === 3) callback();
    };

    aboutme.onload = function() {
        frontPosters[2] = new createjs.Bitmap(this);
        if (++loaded === 3) callback();
    };

    games.src   = "images/assets/posters/games_poster.jpg"; 
    apps.src    = "images/assets/posters/apps_poster.jpg";
    aboutme.src = "images/assets/posters/aboutme_poster.jpg";

}

function displayPosters() {

    getPosters(function() {
        if(currentCat == Category.HOME) { //if current category is HOME
            for(var i = 0; i < frontPosters.length; i++) { //loop through posters
                frontPosters[i].x = 40; //set x position for testing, also where error occurs
                stage.addChild(frontPosters[i]); //add poster to stage
            }
        }
    }); //get all images and assign it to designated array, only after all images were loaded

} 
```

# objective-c - NSMutableArray 字符串

> ID：15014350
> 
> 赞同：0
> 
> 时间：2013-02-21T23:40:57.577
> 
> 标签：objective-c

新的 Objective-C 程序员在这里尝试创建一个可变的字符串数组。

```
imageNames = [NSMutableArray arrayWithObjects: @"Yellow1.png",@"Yellow2.png",@"Yellow3.png","Yellow4.png","Yellow5.png","Yellow6.png",
        "Yellow7.png","Yellow8.png", nil];

    for (NSString *name in imageNames) {
        NSLog(@"%@", name);
    } 
```

`(lldb)`运行后，我在输出日志和 aa 中收到`Thread 1: EXC_BAD_ACCESS (code=EXC_ARM_DA_ALIGN, address = 'xxxxxxx'`

字符串数组是否设置正确，是什么导致它无法打印出数组中的字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:42:26.657

您的某些字符串没有以“@”为前缀，例如“Yellow5.png”。您需要更正它以使它们被识别为对象。

# html - HTML 文本输入，无数字

> ID：15014357
> 
> 赞同：-2
> 
> 时间：2013-02-21T23:41:38.507
> 
> 标签：html, validation

我有一个给定名称（名字）的 HTML5 文本字段。

```
<input name="name" id="name" autocompletetype="given-name"  type="text" alt="" maxlength="16" required/> 
```

一些用户在这里输入密码。因此，我想通过不允许数字来防止其中一些。我将如何做到这一点？所以，我只想要英语和土耳其语字母加上`-`任何`'`情况下，哦，这些 â,Â,ê.. 任何情况下。更好的方法是不允许我猜的数字，但有这样的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:49:53.753

我将假设您可以使用 javascript/jQuery。

请注意，我不确定下面的字母序列是否仅涵盖土耳其字母/所有土耳其字母。但是，它是各种语言中使用的字母的详尽列表。

然后：

```
 $('#name').on('change', function(){
            if(/^[a-zA-Z\- ’'‘ÆÐƎƏƐƔĲŊŒẞÞǷȜæðǝəɛɣĳŋœĸſßþƿȝĄƁÇĐƊĘĦĮƘŁØƠŞȘŢȚŦŲƯY̨Ƴąɓçđɗęħįƙłøơşșţțŧųưy̨ƴÁÀÂÄǍĂĀÃÅǺĄÆǼǢƁĆĊĈČÇĎḌĐƊÐÉÈĖÊËĚĔĒĘẸƎƏƐĠĜǦĞĢƔáàâäǎăāãåǻąæǽǣɓćċĉčçďḍđɗðéèėêëěĕēęẹǝəɛġĝǧğģɣĤḤĦIÍÌİÎÏǏĬĪĨĮỊĲĴĶƘĹĻŁĽĿʼNŃN̈ŇÑŅŊÓÒÔÖǑŎŌÕŐỌØǾƠŒĥḥħıíìiîïǐĭīĩįịĳĵķƙĸĺļłľŀŉńn̈ňñņŋóòôöǒŏōõőọøǿơœŔŘŖŚŜŠŞȘṢẞŤŢṬŦÞÚÙÛÜǓŬŪŨŰŮŲỤƯẂẀŴẄǷÝỲŶŸȲỸƳŹŻŽẒŕřŗſśŝšşșṣßťţṭŧþúùûüǔŭūũűůųụưẃẁŵẅƿýỳŷÿȳỹƴźżžẓ]$/.test($(this).val())){
                $(this).removeClass('invalidField');
                $(this).addClass('validField');
          } else {
                $(this).addClass('invalidField');
                $(this).removeClass('validField');
          }
      }); 
```

然后使用 CSS 标记字段有效/无效。（例如无效字段的红色边框）

# javascript - 使用 javascript/regex 过滤动态生成的标签

> ID：15014358
> 
> 赞同：0
> 
> 时间：2013-02-21T23:41:58.873
> 
> 标签：javascript, regex, dynamic-content

我目前正在尝试为我的培训部门创建一个动态的可打印文档生成器。我希望整个项目保留在 Javascript/浏览器端脚本中，因为我正在尝试专门获取 Javascript 知识。用户界面链接如下（在我有 10 个代表之前无法发布图片）：

[托管在我的个人网站 - cgiv.webs.com/Test Platform/Training Plan.png](http://cgiv.webs.com/Test%20Platform/2013_02_21_15_33_03_Training_Plan.png)

我遇到的问题是正则表达式。我对 Javascript 相当陌生，但对 Jscript 中的正则表达式却非常陌生。我目前正在使用以下函数来生成和识别每次执行的三个输入文本：

```
/*Variable Declarations*/

var i1 = 0;
var i2 = 0;

/* ------------------- */

function generateInput()
{

if (i1<15)
{
    i1++;
    var appendSpan = document.getElementById('appendSpan');

    var appendStr = "<div class='row'><input id='text_topic" + i2.toString() + i1.toString() + "' class='text_topic' type='text'/>|<input id='text_instructor" + i2.toString() +  i1.toString() + "' class='text_instructor' type='text'/>|<input id='text_date" + i2.toString() +  i1.toString() + "' class='text_date' type='text'/></div>";

    appendSpan.innerHTML += appendStr;
}
else
{
    alert("Action Cancelled.  Maximum fields reached.");
}

} 
```

i2 变量表示输入字段所属的标题编号，其中 i1 变量表示每个单元格所属的行。我想在以下函数中放置一个正则表达式标识符脚本，以从每个单元格中提取值并将它们附加到“newPage”变量中各自的目标跨度下方：

```
function createPage() 
{
var newPage = "<html><head><title></title>";
newPage += "<link rel='stylesheet' lang='text/css' href='output.css'>";
newPage += "</head><body>";
newPage += "<div class='head'>" + promptVal[0] + "</div><br/>";
newPage += "<span id='hcontent1'></div></span>";

var inputs = document.getElementsByTagName("input");

/*  Uhhh.. Yeah.  This is where I'm lost */

newPage += "</span>";
newPage += "</body></html>";

var j = window.open('')
j.document.write(newPage);
j.document.close();
} 
```

例如，一旦我可以在“hcontent1”范围内获得所有文本_（主题、讲师、日期）（11-13），我就可以将其格式化。我只想从文本字段中提取数据并将其放入单独页面上的 div 标签中。

感谢您的时间，提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:02:17.913

我想到了！经过三天的搜索，这奏效了：

```
var regex1 = /1/g;

for (var i=0; inputs[i]; i++)
{
    if (inputs[i].id.search(regex1) == 10)
    {
        alert("It worked");
    }

    else if (inputs[i].id.search(regex1) == 15)
    {
        alert("It worked again");
    }

    else if (inputs[i].id.search(regex1) == 9)
    {
        alert("You did it, man");
    }

    else
    {
        alert("Skip this one");
    }
} 
```

# c# - Windows Mobile 安全策略？

> ID：15014359
> 
> 赞同：0
> 
> 时间：2013-02-21T23:42:01.580
> 
> 标签：c#, windows-mobile, compact-framework

Windows Mobile 上是否有与 Windows 的组策略等效的策略？

我的目标是阻止用户更改 Windows 移动设备上的日期或时间，而最好允许应用程序更改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T15:58:13.873

唯一可以管理此类设置的工具是 SCMDM（System Center 移动设备管理：[http](http://en.wikipedia.org/wiki/System_Center_Mobile_Device_Manager) ://en.wikipedia.org/wiki/System_Center_Mobile_Device_Manager ）。

但是您可以使用黑名单（[http://community.intermec.com/t5/Device-Management/Tips-collection-thread/mp/2941#M375](http://community.intermec.com/t5/Device-Management/Tips-collection-thread/m-p/2941#M375)）

```
REGEDIT4
;Enable blacklist of applications that should not run
[HKEY_LOCAL_MACHINE\Security\Policies\Shell]
"DisallowRun"=dword:1
;Add entries to blacklist of applications that should not run
[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer\DisallowRun]
"1"="clock.exe" 
```

您还可以使用 ReDirect="" 键禁止访问某些控制面板设置

```
[HKEY_LOCAL_MACHINE\ControlPanel\Clock]
"Redirect"="" 
```

但这一切都不能取代一个好的锁定kisok模式应用程序。

我写了几篇关于信息亭模式的文章：[http ://www.hjgode.de/wp/2012/05/29/windows-mobile-kiosk-mode-series-part-2/](http://www.hjgode.de/wp/2012/05/29/windows-mobile-kiosk-mode-series-part-2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:30:16.957

我不知道一个。但这并不意味着它不存在。

我们的解决方案是在每次与我们的服务器建立数据库连接时设置设备的时间，方法是强制所有应用程序使用全局“获取打开连接”方法，该方法首先调用`SELECT GetDate();`我们的 SQL Server 并在返回打开之前设置设备的日期连接到调用方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T03:25:14.403

> Windows Mobile 上是否有与 Windows 的组策略等效的策略？

除了医学界，Windows Mobile 几乎已经死了。OT：平台认证既昂贵又耗时（其 FDA 相当于 FIPS 140），因此许多医疗设备仍使用较旧的 Windows CE 内核。它可能在其他地方很受欢迎，例如汽车（我不与该行业合作，所以我不知道）。

Windows Mobile 设备确实采用组策略，因此不需要等效策略。信息仍然在网上和 MSDN 中可用。例如，[管理 MDM 设备](http://technet.microsoft.com/en-us/library/dd261728.aspx)和[配置设备组策略设置](http://technet.microsoft.com/en-us/library/dd252805.aspx)。

杰夫

# android - 使用 holoeverywhere 时，警报对话框中的 ListView 无法正确显示

> ID：15014362
> 
> 赞同：0
> 
> 时间：2013-02-21T23:42:11.177
> 
> 标签：android, android-alertdialog, layout-inflater, android-holo-everywhere

我正在使用 Holoeverywhere 兼容性库和 sherlockActionbar 库。我遇到的问题是，当我在 DialogFragment 类中膨胀视图时，它不会在 3.0 之前的设备上正确显示

```
 public static class PointSystemDialogFragment extends DialogFragment implements View.OnClickListener, DialogInterface.OnClickListener {
    static final private int GET_CODE = 0;

    static PointSystemDialogFragment newInstance() {
        return new PointSystemDialogFragment();
    }

    Context app;
    Cursor pointSystem;
    DatabaseManager db;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        setStyle(STYLE_NORMAL, 0); //Used for theme switching in samples
        super.onCreate(savedInstanceState);
        app = getSupportActivity();
        db = DatabaseManager.getInstance();
    }

    @Override
    public void onClick(DialogInterface dialog, int which) {
        switch (which) {
            case Dialog.BUTTON_POSITIVE:
                break;
            case Dialog.BUTTON_NEGATIVE:
                break;
            case Dialog.BUTTON_NEUTRAL:
                Intent intent = new Intent(getSupportActivity(), AddPointSystem.class);
                startActivity(intent);
                break;
        }
    }

    @Override
    **public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.pointsystemlist2, container, false);
        String pName = PointSystemDao.Properties.Name.columnName;
        pointSystem = db.getPointSystemCursor();
        String pValue = PointSystemDao.Properties.PointValue.columnName;
        String[] from = {pName, pValue};
        int[] to = {android.R.id.text1, android.R.id.text2};
        SimpleCursorAdapter adapter = new SimpleCursorAdapter(app, android.R.layout.simple_list_item_activated_1, pointSystem, from, to);
        ListView listView = (ListView) view.findViewById(R.id.pointsystem);
        listView.setTextFilterEnabled(true);
        listView.setAdapter(adapter);
        db.getPointSystemCursor().requery();
        // Tell the list view to show one checked/activated item at a time.
        listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
        listView.setItemChecked(0, true);
        mListener = (onPointSystemChanged)app;
        listView.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(android.widget.AdapterView<?> parent, View view, int position, long id) {
                Long i = (long) position + 1;
                PointSystem pointSystem1 = db.getPointSystemDao().load(i);
                mListener.onSelectedPointSystem(pointSystem1.getName());
                //mListener.onPointSystemChanged(i);
                mListener.onChangedPointSystem(pointSystem1);
            }
        });
        Button Ok = (Button) view.findViewById(R.id.btnOk);
        Ok.setOnClickListener(this);
        Ok.requestFocus();
        Button Add = (Button) view.findViewById(R.id.btnAdd);
        Add.setOnClickListener(this);
        Button Cancel = (Button) view.findViewById(R.id.btnCancel);
        Cancel.setOnClickListener(this);
        Dialog dialog = getDialog();
        if (dialog != null) {
            dialog.setTitle("Select Point System");
            dialog.setCanceledOnTouchOutside(false);
        }
        return view;
    }**

    @Override
    public void onClick(View v) {
        int viewId = v.getId();
        switch (viewId) {
            case R.id.btnOk:
                break;
            case R.id.btnAdd:
                Intent intent = new Intent(getSupportActivity(), AddPointSystem.class);
                startActivity(intent);
                break;
            case R.id.btnCancel:
                break;
        }
        dismiss();
    }

} 
```

在 3.0 之前的设备上显示的链接如下 [http://i49.tinypic.com/2j9yeh.png](http://i49.tinypic.com/2j9yeh.png)

在 3.0 后的设备上，它可以正确显示 [http://i46.tinypic.com/egy8tt.png](http://i46.tinypic.com/egy8tt.png)

我无法弄清楚是什么导致了错误的显示。布局文件如下所示

```
 <ListView
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:id="@+id/pointsystem"
        android:layout_weight="1"/>

    <LinearLayout style="?android:attr/buttonBarStyle"
              android:layout_width="match_parent" android:layout_height="wrap_content"
              android:measureWithLargestChild="true">
        <Button style="?android:attr/buttonBarButtonStyle" android:id="@+id/btnCancel"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Cancel" />

        <Button style="?android:attr/buttonBarButtonStyle" android:id="@+id/btnAdd"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Add" />
        <Button style="?android:attr/buttonBarButtonStyle" android:id="@+id/btnOk"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="OK" />

    </LinearLayout>

</LinearLayout> 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:58:18.813

您将 "android: layout_weight =" 1 "/>" 设置为列表视图的权重。listview的父视图的“weightSum”值是多少？问题可能就在这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T08:40:29.350

> 警报对话框。

您使用 Dialog 代替 AlertDialog，您使用 ?android:attr/buttonBarStyle 代替 ?buttonBarStyle，您使用 ?android:attr/buttonBarButtonStyle 代替 ?buttonBarButtonStyle。只需使用 AlertDialog - 它已经包含底部按钮栏列表所需的所有样式，请参阅演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T10:41:31.010

我发现了问题。换行

```
SimpleCursorAdapter adapter = new SimpleCursorAdapter(app, android.R.layout.simple_list_item_activated_1, pointSystem, from, to); 
```

到

```
SimpleCursorAdapter adapter = new SimpleCursorAdapter(app, org.holoeverywhere.R.layout.simple_list_item_activated_1, pointSystem, from, to); 
```

或者

```
int layout  =  int layout = (Build.VERSION.SDK_INT  >= 11) ? org.holoeverywhere.R.layout.simple_list_item_activated_1 : android.R.layout.simple_list_item_1;
SimpleCursorAdapter adapter = new SimpleCursorAdapter(app, layout, pointSystem, from, to); 
```

从[https://github.com/ChristopheVersieux/HoloEverywhere/issues/225获得解决方案](https://github.com/ChristopheVersieux/HoloEverywhere/issues/225)

# html - 在极少数情况下，外部样式表要么不下载要么不应用

> ID：15014373
> 
> 赞同：1
> 
> 时间：2013-02-21T23:43:26.120
> 
> 标签：html, css, browser, stylesheet

我记得一些非常罕见的情况，主要网站（亚马逊、Facebook 等）要么没有下载 CSS 文件，要么没有应用规则，导致页面看起来像这样：

![没有风格的 Facebook](../Images/68aab86fa050d2b7ebd45a801caf5e2c.png)

在我们收到一封投诉电子邮件后，我的任务是提供内部解释，该电子邮件附有来自我们一个网站的用户的截图，显示相同的效果。屏幕截图包含敏感的用户信息，所以我无法发布它。但它表明正在应用内联样式，但没有应用从外部 CSS 文件引用的任何样式。

不幸的是，我无法重现这个问题，除了说“没有应用样式”之外，我想出一个详细的解释，我很想自己理解它。

我将不胜感激任何关于为什么会发生这种情况的意见，或参考任何文章。即使有人知道这个事件叫什么，我也很乐意去研究它，但到目前为止我还是一片空白。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T00:08:16.237

发生这种情况的情况不止一种：

1)**带宽问题**：正如 italo.nascimento 所提到的，连接速度很慢，您的 HTML 已下载，但您的 CSS 已超时，因此您只剩下一个裸 HTML 页面（通常也发生在网站处于 DoS 之下或有很多许多访客和服务器跟不上流量）

2)**缓存问题**：您的 HTML 中发生了一些变化，但 CSS 是从浏览器的本地缓存中提供的，因此选择器不匹配...

3) **FOUC**：它与您所要求的并不真正相似，除非打印屏幕是在页面加载期间制作的。它被称为 Flash of Unstyled Content。

一般来说，这类问题中有 90% 是由连接问题引起的。丢包、超时、CDN 无法正常工作。由于它们是随机的，我认为您无法“重现它们”——这不是可以修复的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T23:50:10.393

在主要网站上发生过很多次。

大多数情况下，它发生在 Internet 连接非常缓慢或不稳定时，因此文件无法从服务器正确加载（包丢失）并且该站点以纯 HTML 显示。也许您可以通过限制带宽并重新加载页面来重现它。

# algorithm - 合并大小相等的堆

> ID：15014374
> 
> 赞同：4
> 
> 时间：2013-02-21T23:43:40.897
> 
> 标签：algorithm, data-structures, heap

有人可以解释为什么以下用于合并堆的算法不正确吗？

假设我们有两个（最大）堆 H1 和 H2。

合并它们：

创建一个其键值为负无穷大的人工虚拟节点，并将其放置在根处，并将 H1 和 H2 作为子节点连接。然后执行 O(log n) 冒泡步骤，最终将根交换到叶位置，最终将其删除。生成的结构是一个合并的堆。

我在维基百科和其他地方都看到了合并两个大小相等的堆是 Theta(n) 操作的说法，这与我上面写的相矛盾。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:48:56.857

至少在通常实现堆的情况下（在节点位置中隐含链接），您似乎几乎忽略的部分（“将 H1 和 H2 附加为子项”）本身具有线性复杂性。

通常实现堆时，您有一个线性集合（例如，数组），其中每个元素 N 都有元素 2N 和 2N+1 作为其子元素（例如，对于基于 1 的数组，元素 1 的子元素是元素 2和 3，元素 2 的子元素是 4 和 5)。因此，在我们到达合并操作的起点之前，您需要交错两个堆中的元素。

如果您从显式链接的二叉树开始（仅遵循堆样式规则而不是例如二叉搜索树排序），那么您是对的，合并可以以对数复杂度完成——但我怀疑原始文章意指这种结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T02:05:56.277

如果您将其实现为树，则您的解决方案是正确的。但正如 Jerry 所提到的，合并基于数组的堆不能在亚线性时间内完成。

根据合并的频率和大小，我建议您使用虚拟堆。您可以将其实现为堆堆（带有数组）。几次合并后，您可以将多个内部堆懒惰地合并为一个大堆。

# android - wait_event_interruptible_timeout 总是过期，即使唤醒事件及时发生

> ID：15014380
> 
> 赞同：0
> 
> 时间：2013-02-21T23:44:03.183
> 
> 标签：android, linux, embedded, wakeup, smp

我有一个问题，关于在具有先发制人的 linux 3.0 内核的 Android 嵌入式平台（基于 Exynos5dual）上 wait_event 和 wake_up 的奇怪行为。在具有非抢占式内核（任何版本）的普通 SMP 笔记本电脑上不会发生这种**情况**

我们有一个带有经典睡眠/唤醒场景的 linux 设备驱动程序，这就是发生的情况：

```
T0: taskA:
    if(!flag)
        wait_event_interruptible_timeout(wq, flag==true, timeout=0.5sec)

T1: (after a few msec) taskB: 
    atomic set flag
    wake_up_interruptible()

T2: (after timeout msec) taskA: 
    wait_event_interruptible_timeout expires (ret 0) instead of waking up at T1 
```

标志的所有读写都是原子的，并且已经使用了从 atomic bitops（内核设置/测试位）到 volatile atomic_t，再到使用 atomic_t vars 对每个读/写使用内存屏障（根据[this](http://www.kernel.org/doc/Documentation/memory-barriers.txt "这个")）

如果 TaskA 实际上开始等待（wait_event_* 内核函数首先检查条件，因此可能并非总是如此），那么它会等待完全超时，而不是在标志更改值并调用 wake_up() 时被 taskB 唤醒。

我们怀疑这两个任务发生在不同的内核上。Core1 在 wait_event_..() 之后进入深度睡眠，并且无法被 Core2 上发生的 wake_up_interruptible() 唤醒。

有谁知道这是真的，还是其他原因？

*注意*：如果我们保存 sleeper 的任务结构 ptr，然后在（除此之外）wake_up_interruptible() 之前执行 wake_up_process (saved_ptr)，问题似乎就消失**了**。我们发现这不是最优的，想知道是否有更好的方法。

# java - 需要帮助简化我的合并排序实施

> ID：15014381
> 
> 赞同：0
> 
> 时间：2013-02-21T23:44:18.623
> 
> 标签：java, sorting, mergesort

我正在构建一个扩展 ArrayList 的可排序 ArrayLists 类。目标是能够在 SortDoubleArray 上调用排序方法，并通过所描述的方法对该数组进行排序。我得到了快速排序、插入排序、冒泡排序和选择排序，所有这些都可以按我的意愿工作。但是，我在使用合并排序时遇到了一些困难。

排序工作，但由于涉及递归的工作方式，我被迫将列表的内容重置为应用于自身的方法。

首先，这里是测试器类。它显示了其他类型是如何实现的。如果我在解释我的问题时做得不好，希望您会看到必须使用 mergeSort() 方法的不同之处。

```
public class SortTester
{
    /**
     * @param args
     */
    public static void main(String[] args)
    {
        SortDoubleArray list = new SortDoubleArray();

        // Code to fill an array with random values.

        //list.quickSort();
        //list.insertionSort();
        //list.selectionSort();
        //list.bubbleSort();
        list = list.mergeSort();

        // Code to print the sorted array.
    }
} 
```

接下来，这里是 SortDoubleArray 类。为简洁起见，除插入排序（作为我想要的工作方式的示例）之外的所有其他排序都已被删除。

```
public class SortDoubleArray extends ArrayList<Double>
{ // Start of class.
    private static final long serialVersionUID = 1271821028912510404L;

    /**
     * Progresses through the elements one at a time inserting them in their proper place
     * via swaps.
     */
    public void insertionSort()
    { // Start of insertionSort.
        int current = 1;

        while (current < size())
        {
            int i = current;
            boolean placeFound = false;

            while(i > 0 && !placeFound)
            {
                if (get(i) < get(i - 1))
                {
                    double temp = get(i);
                    set(i, get(i - 1));
                    set(i - 1, temp);
                    i -= 1;
                }
                else
                {
                    placeFound = true;
                }
            }
            current += 1;
        }
    } // End of insertionSort.

    /**
     * Triggers the recursive mSort method.
     * @return 
     */
    public SortDoubleArray mergeSort()
    { // start of mergeSort.
        return mSort(this);
    } // End of mergeSort.

    /**
     * Separates the values each into their own array.
     */
    private SortDoubleArray mSort(SortDoubleArray list)
    { // Start of mSort.
        if (list.size() <= 1)
        {
            return list;
        }

        SortDoubleArray left = new SortDoubleArray();
        SortDoubleArray right = new SortDoubleArray();

        int middle = list.size() / 2;

        for (int i = 0; i < middle; i += 1)
        {
            left.add(list.get(i));
        }

        for (int j = middle; j < list.size(); j += 1)
        {
            right.add(list.get(j));
        }

        left = mSort(left);
        right = mSort(right);

        return merge(left, right);
    } // End of mSort.

     /**
     * Merges the separated values back together in order.
     */
    private SortDoubleArray merge(SortDoubleArray left, SortDoubleArray right)
    { // Start of merge.
        SortDoubleArray result = new SortDoubleArray();

        while (left.size() > 0 || right.size() > 0)
        {
            if (left.size() > 0 && right.size() > 0)
            {
                if (left.get(0) <= right.get(0))
                {
                    result.add(left.get(0));
                    left.remove(0);
                }
                else
                {
                    result.add(right.get(0));
                    right.remove(0);
                }
            }
            else if (left.size() > 0)
            {
                result.add(left.get(0));
                left.remove(0);
            }
            else if (right.size() > 0)
            {
                result.add(right.get(0));
                right.remove(0);
            }
        }

        return result;
    } // End of merge.
} // End of class. 
```

请给我一些关于如何更改 SortDoubleArray 类中的 mergeSort() / mSort() 函数的想法，以使其具有与其他排序相同的实现。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:57:37.173

鉴于`mSort`和`merge`方法是正确的，这个怎么样？

```
public void mergeSort()
{ // start of mergeSort.
    SortDoubleArray result = mSort(this);
    clear();
    addAll(result);
} // End of mergeSort. 
```

然后，您的测试中的相关行将是：

```
 list.mergeSort(); 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:01:13.260

目前，您的`mergeSort()`和`merge()`函数都在创建新`SortedDoubleArray`对象。理想情况下，您会在不创建新数组的情况下就地完成所有操作，您创建和复制的数量将对您的算法产生相当大的性能影响。

所以你的方法会有这样的原型：

```
private SortDoubleArray mSort(SortDoubleArray list, int startIndex, int length)

private SortDoubleArray merge(SortDoubleArray list, 
                              int leftIndex, int leftlength,
                              int rightIndex, int rightlength) 
```

Then use `ArrayList.set` and `.get` with a temporary variable to do the swapping in-place. This will mean you're only working on a single array and not creating any new unnecessary ones.

Does this help? Let me know if I understood the issue or you need more explanation.

*Note that `int endIndex` can also work instead of `int length`*

# ember.js - ArrayProxy 表现得像一个单例

> ID：15014387
> 
> 赞同：0
> 
> 时间：2013-02-21T23:44:48.020
> 
> 标签：ember.js

如果我有这样的自定义 ArrayProxy：

```
App.MyArrayProxy = Ember.ArrayProxy.extend() 
```

我从控件 {{control 'foo/bar'}} 在控制器的初始化中创建它的一个实例

像这样：

```
 init: ->
    @_super.apply this, arguments
    @set 'property', App.MyArrayProxy.create() 
```

看起来这个ArrayProxy 是一个单例，即控件的所有实例共享同一个arrayproxy 实例。是这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:29:53.787

它不应该是单例。您是否设置和初始内容值？例如

`App.MyArrayProxy = Ember.ArrayProxy.extend({content: []});`

在上述情况下，内容将被共享，从而产生单身人士的潜在错觉。

# currency - 如何用 R3 钱显示美分？

> ID：15014391
> 
> 赞同：3
> 
> 时间：2013-02-21T23:45:15.960
> 
> 标签：currency, precision, rebol, bcd, rebol3

在线文档承诺这一点

```
 probe to-money 123
  $123.00 
```

[http://www.rebol.com/r3/docs/datatypes/money.html](http://www.rebol.com/r3/docs/datatypes/money.html)

我明白了

```
 probe to-money 123
  $123 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T00:28:47.753

您看到的文档是 R2 文档的副本。它仍然不能反映 R3 中的当前状态。

在 R3 中，您可以同时拥有 123 美元和 123.00 美元，您尝试过吗？

这看起来像一个更准确的文档：

[http://www.rebol.net/wiki/Money](http://www.rebol.net/wiki/Money)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T00:36:20.730

```
>> round/to to money! 123 $.01
== $123.00 
```

# javascript - 为什么 jQuery.ajax() 调用我的对象函数？

> ID：15014396
> 
> 赞同：3
> 
> 时间：2013-02-21T23:45:30.363
> 
> 标签：javascript, jquery

我遇到了 jQuery.ajax() 调用我的数据对象函数的问题。例如，我有一个类似于以下的对象结构：

```
var TestFactory = (function () {
    var _id;
    var _attributes;

    return {
        createObject: function (objectId) {
            var value = null;
            _id = objectId;
            _attributes = {};

            function _showErrorStatus() {
                $('label')
                    .css('background-color', 'red')
                    .css('color', 'black')
                    .text('jQuery called me...');
            }

            function _attr(key, value) {
                if (value == null) {
                    return _attributes[key];
                }

                _attributes[key] = value;

                return this;
            }

            return {
                id: _id,
                attributes: _attributes,
                showErrorStatus: _showErrorStatus,
                attr: _attr,                
            }
        }
    }
})(); 
```

我想将此对象用作我的 jQuery.ajax() 调用的数据值，如下所示：

```
var myObject = TestFactory.createObject(12345);

myObject.attr('name', 'Fred Flinstone');

$.ajax({
    url: '/echo/json/',
    type: 'GET',
    data: myObject,
    dataType: 'json',
}); 
```

我遇到的问题是 jQuery.ajax() 从工厂返回的对象调用 showErrorStatus() 函数——在我的代码中没有任何地方调用这个函数。

我喜欢使用这个对象所获得的 OOP 品质，那么有没有什么方法可以在不进行重大重写的情况下处理这种情况（例如，从“类”中删除我的所有功能）？

**注意：**我发现很难解释这个问题，所以这里有一个完整[的 jsfiddle 运行示例](http://jsfiddle.net/HJ9AS/8/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:54:12.200

它发生是因为它是一个功能，尽管据我所知没有记录。

如果您传递一个对象，那么它假定您希望它调用作为对象属性值的任何函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T23:56:11.383

使用`JSON.stringify`（不是 jQuery 方法）。

```
$.ajax({
    url: '/echo/json/',
    type: 'GET',
    data: JSON.stringify(myObject),
    dataType: 'json',
}); 
```

[http://jsfiddle.net/HJ9AS/10/](http://jsfiddle.net/HJ9AS/10/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T23:57:17.610

一种方法是使用像 Underscore 的函数[`pick()`](http://underscorejs.org/#pick)。它可用于从对象中挑选您需要的某些属性。无论如何，它是一个有用的库，但如果你愿意，你也可以实现这个简单的方法。

```
$.ajax({
    url: '/echo/json/',
    type: 'GET',
    /* only send id and attributes! */
    data: _.pick(myObject, 'id', 'attributes'),
    dataType: 'json',
}); 
```

**总是把东西列入白名单**可能是一个好习惯，而不是盲目地发送所有东西。准确指定要发送的内容可以使您免于将来的意外（例如您刚刚遇到的意外）。大多数时候，您根本不想发送存储在对象中的所有内容。

您还可以实现某种方式让您的对象能够返回其可发送内容。它可以得到一个`.getJSON()`方法，该方法只从对象中收集要发送的所有内容。

* * *

**关于函数调用：**

处理`data`属性 uses [`$.param()`](http://api.jquery.com/jQuery.param/)，在文档中有这个：

> 从 jQuery 1.3 开始，函数的返回值被用作字符串而不是函数。

这是一个功能，而不是一个错误:)。我理解它背后的逻辑，因为如果您刚刚指定为要发送的数据的对象中有一个函数，那么它背后一定有一个很好的理由......

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-21T23:51:36.840

而不是通过`data: myObject`，

尝试设置：`var serializedObject = myObject.param()`

然后通过`data: serializedObject`

[在这里](http://api.jquery.com/jQuery.param/)查看 jQuery 的参数函数。

# c - perl 语句等价于 C

> ID：15014400
> 
> 赞同：2
> 
> 时间：2013-02-21T23:45:56.627
> 
> 标签：c, binary, byte, endianness

这条 Perl 行在 C 中的等价物是什么？

```
unpack('J>', pack('B*', $s)) 
```

根据 Perl 的构建，它采用 4 或 8 字节的二进制表示

```
"11110000000000000000000001010001" 
```

或者

```
"0000000000000000000000000000000011110000000000000000000001010001" 
```

并返回由这些字节以大端顺序表示的 32 位或 64 位整数。

```
0xF0000051 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:08:37.183

要解析您可以使用的二进制字符串`strtol()`并使其成为大端，您可以使用`htonl()`：

```
int32_t value = strtol("1010001", NULL, 2);
int32_t big_endian = htonl(value); 
```

`htonl()`严格来说，它不是 C 的一部分，但它在网络代码中很常见，它将长（4 个字节）放入网络顺序（恰好是大端）。或者，您必须测试您是否已经在一个大端框上，然后您可以自己进行按位运算。

# ios - ios6 自动布局约束

> ID：15014402
> 
> 赞同：3
> 
> 时间：2013-02-21T23:45:58.037
> 
> 标签：ios, ios6, autolayout

我试图弄清楚如何在 UIViewController 上使用约束（在 UINavigationController 内的 UITabBarController 内）......超过一千字，这就是我想要做的......

![肖像](../Images/8f8c1fc8661c6f343bb25bcc5bd352c2.png) ![风景](../Images/379cdc446d9300d48d2966df6a4a8f85.png)

实际上，第一个是 100px 高度，无论方向如何，第二个是一个广告（纵向 50px，横向 32px），最后一个 tableView 将占据其余部分。

到目前为止，这是我的代码：

```
PMMainProfilHeader  *profilHeader = [[PMMainProfilHeader alloc] init];
    [self.view addSubview:profilHeader];
    [profilHeader release];

    UIView *adTest = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 50)];
    adTest.backgroundColor = [UIColor redColor];
    [self.view addSubview:adTest];
    [adTest release];

    _tableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
    [self.view addSubview:_tableView];
    [_tableView release];

    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-0-[profilHeader]-0-|"
                                                                      options:0
                                                                      metrics:nil
                                                                        views:NSDictionaryOfVariableBindings(profilHeader)]];
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-0-[adTest]-0-|"
                                                                      options:0
                                                                      metrics:nil
                                                                        views:NSDictionaryOfVariableBindings(adTest)]];
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-0-[_tableView]-0-|"
                                                                      options:0
                                                                      metrics:nil
                                                                        views:NSDictionaryOfVariableBindings(_tableView)]];
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-0-[profilHeader]-0-[adTest]-0-[_tableView]-0-|"
                                                                      options:0
                                                                      metrics:nil
                                                                        views:NSDictionaryOfVariableBindings(profilHeader, adTest, _tableView)]]; 
```

但当然它不起作用......而且我不知道为什么，当我恢复调试几次时，我从调试器中得到了这条评论：

```
2013-02-22 00:17:13.207 MyApplication[6822:907] Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSLayoutConstraint:0x1d0b20d0 H:[UIView:0x1d0ae7e0]-(0)-|   (Names: '|':UIView:0x1c596de0 )>",
    "<NSLayoutConstraint:0x1d0b2090 H:|-(0)-[UIView:0x1d0ae7e0]   (Names: '|':UIView:0x1c596de0 )>",
    "<NSLayoutConstraint:0x1d0b2000 H:[PMMainProfilHeader:0x1d09f5b0]-(0)-|   (Names: '|':UIView:0x1c596de0 )>",
    "<NSLayoutConstraint:0x1d0b2320 H:|-(0)-[PMMainProfilHeader:0x1d09f5b0]   (Names: '|':UIView:0x1c596de0 )>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5dcb10 h=--& v=--& UIView:0x1d0ae7e0.midX ==>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5daf80 h=--& v=--& PMMainProfilHeader:0x1d09f5b0.midX == + 160>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x1d0b20d0 H:[UIView:0x1d0ae7e0]-(0)-|   (Names: '|':UIView:0x1c596de0 )>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful.
2013-02-22 00:17:41.706 MyApplication[6822:907] Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSLayoutConstraint:0x1c5ab460 V:[PMMainProfilHeader:0x1d09f5b0]-(0)-[UIView:0x1d0ae7e0]>",
    "<NSLayoutConstraint:0x1c5ab3f0 V:|-(0)-[PMMainProfilHeader:0x1d09f5b0]   (Names: '|':UIView:0x1c596de0 )>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5dcca0 h=--& v=--& UIView:0x1d0ae7e0.midY ==>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5db050 h=--& v=--& PMMainProfilHeader:0x1d09f5b0.midY == + 50>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x1c5ab460 V:[PMMainProfilHeader:0x1d09f5b0]-(0)-[UIView:0x1d0ae7e0]>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful.
2013-02-22 00:17:43.382 MyApplication[6822:907] Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSAutoresizingMaskLayoutConstraint:0x1d0c0530 h=--& v=--& UITableView:0x1db44600.midX ==>",
    "<NSLayoutConstraint:0x1c5ab160 H:[UITableView:0x1db44600]-(0)-|   (Names: '|':UIView:0x1c596de0 )>",
    "<NSLayoutConstraint:0x1c5ab120 H:|-(0)-[UITableView:0x1db44600]   (Names: '|':UIView:0x1c596de0 )>",
    "<NSLayoutConstraint:0x1d0b2000 H:[PMMainProfilHeader:0x1d09f5b0]-(0)-|   (Names: '|':UIView:0x1c596de0 )>",
    "<NSLayoutConstraint:0x1d0b2320 H:|-(0)-[PMMainProfilHeader:0x1d09f5b0]   (Names: '|':UIView:0x1c596de0 )>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5daf80 h=--& v=--& PMMainProfilHeader:0x1d09f5b0.midX == + 160>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x1c5ab160 H:[UITableView:0x1db44600]-(0)-|   (Names: '|':UIView:0x1c596de0 )>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful.
2013-02-22 00:17:45.290 MyApplication[6822:907] Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSAutoresizingMaskLayoutConstraint:0x1c5dcce0 h=--& v=--& V:[UIView:0x1d0ae7e0(0)]>",
    "<NSLayoutConstraint:0x1c5ab510 V:[UITableView:0x1db44600]-(0)-|   (Names: '|':UIView:0x1c596de0 )>",
    "<NSLayoutConstraint:0x1c5ab4b0 V:[UIView:0x1d0ae7e0]-(0)-[UITableView:0x1db44600]>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5ed510 h=-&- v=-&- UILayoutContainerView:0x1c5d1440.height == UIWindow:0x1c564480.height>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5ef2e0 h=--- v=--- V:[UIWindow:0x1c564480(480)]>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5eb9e0 h=-&- v=-&- UINavigationTransitionView:0x1c5d2b20.height == UILayoutContainerView:0x1c5d1440.height>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5e9f80 h=-&- v=-&- UIViewControllerWrapperView:0x1d0ba580.height == UINavigationTransitionView:0x1c5d2b20.height>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5e8610 h=-&- v=-&- UILayoutContainerView:0x1d096c30.height == UIViewControllerWrapperView:0x1d0ba580.height>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5e6ed0 h=-&- v=-&- UITransitionView:0x1d0999d0.height == UILayoutContainerView:0x1d096c30.height - 49>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5e5980 h=-&- v=-&- UIViewControllerWrapperView:0x1c5cb7a0.height == UITransitionView:0x1d0999d0.height - 20>",
    "<NSAutoresizingMaskLayoutConstraint:0x1d0c0710 h=--& v=--& UITableView:0x1db44600.midY ==>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5e4270 h=-&- v=-&- UIView:0x1c596de0.height == UIViewControllerWrapperView:0x1c5cb7a0.height>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5dcca0 h=--& v=--& UIView:0x1d0ae7e0.midY ==>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x1c5ab4b0 V:[UIView:0x1d0ae7e0]-(0)-[UITableView:0x1db44600]>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful.
2013-02-22 00:17:48.283 MyApplication[6822:907] Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSLayoutConstraint:0x1c5ab510 V:[UITableView:0x1db44600]-(0)-|   (Names: '|':UIView:0x1c596de0 )>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5ed510 h=-&- v=-&- UILayoutContainerView:0x1c5d1440.height == UIWindow:0x1c564480.height>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5ef2e0 h=--- v=--- V:[UIWindow:0x1c564480(480)]>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5eb9e0 h=-&- v=-&- UINavigationTransitionView:0x1c5d2b20.height == UILayoutContainerView:0x1c5d1440.height>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5e9f80 h=-&- v=-&- UIViewControllerWrapperView:0x1d0ba580.height == UINavigationTransitionView:0x1c5d2b20.height>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5e8610 h=-&- v=-&- UILayoutContainerView:0x1d096c30.height == UIViewControllerWrapperView:0x1d0ba580.height>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5e6ed0 h=-&- v=-&- UITransitionView:0x1d0999d0.height == UILayoutContainerView:0x1d096c30.height - 49>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5e5980 h=-&- v=-&- UIViewControllerWrapperView:0x1c5cb7a0.height == UITransitionView:0x1d0999d0.height - 20>",
    "<NSAutoresizingMaskLayoutConstraint:0x1d0c0710 h=--& v=--& UITableView:0x1db44600.midY ==>",
    "<NSAutoresizingMaskLayoutConstraint:0x1c5e4270 h=-&- v=-&- UIView:0x1c596de0.height == UIViewControllerWrapperView:0x1c5cb7a0.height>",
    "<NSAutoresizingMaskLayoutConstraint:0x1d0c0750 h=--& v=--& V:[UITableView:0x1db44600(0)]>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x1c5ab510 V:[UITableView:0x1db44600]-(0)-|   (Names: '|':UIView:0x1c596de0 )> 
```

感谢您阅读整个（巨大的）帖子！希望有人知道为什么它不起作用！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T00:20:14.730

好的，我找到了答案...

我只需要为我使用约束的每个视图调用 setTranslatesAutoresizingMaskIntoConstraints ：

```
[profilHeader setTranslatesAutoresizingMaskIntoConstraints:NO];
[adTest setTranslatesAutoresizingMaskIntoConstraints:NO];
[_tableView setTranslatesAutoresizingMaskIntoConstraints:NO]; 
```

希望它可以帮助某人...

# ruby - Capistrano Ruby 安全错误

> ID：15014404
> 
> 赞同：1
> 
> 时间：2013-02-21T23:46:02.713
> 
> 标签：ruby, debian, capistrano, rbenv

Capistrano 在此命令上出错

```
 * executing "cd -- /home/root/apps/case/releases/20130221234114 && bundle exec 
rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile && cp -- 
/home/root/apps/case/shared/assets/manifest.yml
/home/root/apps/case/releases/20130221234114/assets_manifest.yml" 
```

之后我得到了这个回复

```
** [out :: 108.60.137.195] ruby
** [out :: 108.60.137.195] :
** [out :: 108.60.137.195] no -I allowed while running setgid
** [out :: 108.60.137.195] (
** [out :: 108.60.137.195] SecurityError
** [out :: 108.60.137.195] ) 
```

除了在 macports 上编译 Ruby 的几个问题外，似乎找不到任何相关的东西。我在 Debian 6 上使用 rbenv 和 Ruby 1.9.3-p385。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:58:56.747

它是 rbenv 的共享（系统范​​围）安装吗？旧指令（目前已从 wiki 中删除，但可以在[https://github.com/sstephenson/rbenv/wiki/Shared-install-of-rbenv/a86ef2e6b12254eeb7cecfd3bd878cf7382d1b4a](https://github.com/sstephenson/rbenv/wiki/Shared-install-of-rbenv/a86ef2e6b12254eeb7cecfd3bd878cf7382d1b4a)访问）建议在 Ruby 解释器上设置 SGID 权限位，这会触发安全警告（并且有充分的理由）。

当前的 rbenv 文档建议安装项目本地安装（[https://github.com/sstephenson/rbenv/wiki/Deploying-with-rbenv](https://github.com/sstephenson/rbenv/wiki/Deploying-with-rbenv)）。或者，它可以使用没有 SGID 的系统范围安装，并为捆绑程序使用 --deployment 标志，这样它就不会尝试写入系统范围的目录。

# iphone - 如何本地化自定义完成按钮

> ID：15014406
> 
> 赞同：2
> 
> 时间：2013-02-21T23:46:20.510
> 
> 标签：iphone, objective-c, cocoa, localization, uinavigationbar

我在自定义视图中使用`Done`按钮，我想让它的标题可本地化。我知道系统`Done`按钮`UINavigationBar`已经本地化，以某种方式获取本地化字符串将是完美的。有没有办法做到这一点？

`UINavigationBar`仅因为本地化按钮而使用整体`Done`似乎是不合适的。

澄清：重点是使用系统使用的相同本地化字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T16:38:41.837

没有从操作系统获取标准字符串的官方方法，但很可能所有字符串都在本地化字符串文件中，并且其中大部分都存在于模拟器上（它不会有来自应用程序的字符串'不存在于模拟器上，但应该具有框架中的几乎所有字符串）。

模拟器的框架目录是相对于你的 Xcode 安装目录和类似这样的（从内存中输入，根据需要更改版本）：

```
Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk/System/Library/Frameworks/UIKit.framework/ 
```

首先，我会查看`UIKit.framework/en.lproj/*.strings`（或 English.lproj 或 en_US.lproj）。字符串文件是 plist，通常是设备上的二进制 plist（此类文件以“bplist00”开头）。有多种打开方式：TextWrangler 将自动将 plist 显示为 XML，命令行工具`plutil`将转换为其他格式。我使用 bash 别名

```
alias plist-dump='plutil -convert xml1 -o /dev/stdout --' 
```

找到字符串后，您有几个选择：

*   在运行时直接从框架加载它，例如

    ```
    [[NSBundle bundleWithIdentifier:...] localizedStringForKey:@"DONE" value:nil table:...] 
    ```

    **不建议**这样做。不能保证它可以在不同的操作系统版本上运行。（实际上，像“Done”这样的字符串可能不会移动，但替代方法很简单，不值得大惊小怪。）

*   将字符串复制到您的项目中。我不知道有一种工具可以自动执行此操作并与您现有的 Localizable.strings 合并，但它可能存在于某个地方并且不会太难编写。*在法律*上有点可疑（但仅比用眼睛复制您关心的语言的字符串更重要）；我肯定会避免在预发布的 SDK 上这样做，以避免担心 Apple 的 NDA。

*   将整个字符串文件复制到 eg`UIKit.strings`并使用类似`NSLocalizedStringFromTable(@"DONE",@"UIKit",nil)`. 很可能是侵犯版权！

实际上，我认为 Apple 不太可能关心将少量字符串/图像从 iOS 复制到 iOS 应用程序中。将它们复制到 Android 应用程序中完全是另一回事......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:52:12.963

只需在项目设置中添加所需的本地化，所有系统内容（如完成按钮）都将通过设备区域设置进行本地化，如果您添加它，则它将使用您也应该设置的默认语言。

对于自定义按钮：

```
[self.myButton setTitle:NSLocalizedString(@"my localizable title", @"") forState:UIControlStateNormal]; 
```

它也适用于您项目中的任何 NSString。

```
NSString *someText = NSLocalizedString(@"my localizable title", @"");
self.myLabel.text = someText; 
```

您应该通过添加所需的本地化来使您的应用程序可本地化。

之后，只需按照以下说明进行操作：

[http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)

但我真的建议你在项目结束时这样做。

# css - 将接触形式的元素浮动到不同的侧面

> ID：15014411
> 
> 赞同：1
> 
> 时间：2013-02-21T23:48:19.177
> 
> 标签：css, css-float, contact-form

我有一个联系表格，我希望所有元素都浮动到左侧并垂直对齐，但“消息”框和提交按钮应该浮动并在右侧对齐。

目前，所有领域似乎都在水平流动。我该如何补救？

[jsfiddle](http://jsfiddle.net/jF49S/)

```
<div id="contact">
        <div id="contact-form" class="clearfix">  
        <h2><img src="img/chat.png" alt="contact frsh studio"></h2> 
        <ul id="errors" class="">  
            <li id="info">There were some problems with your form submission:</li>  
        </ul>  
        <p id="success">Thanks for your message! We will get back to you ASAP!</p>  
        <form method="post" action="process.php"> 
            <input type="text" id="name" name="name" value="" placeholder="NAME" required="required" autofocus="autofocus" />  
            <input type="email" id="email" name="email" value="" placeholder="EMAIL" required="required" />   
            <select id="enquiry" name="enquiry">  
                <option value="refrsh">Brand REFRSH</option>  
                <option value="consult">Brand Consultation</option>  
                <option value="support">Just a Hello!</option>  
            </select>  
            <textarea id="message" name="message" placeholder="MESSAGE" required="required" data-minlength="20"></textarea>  
            <span id="loading"></span>  
            <input type="submit" value="Holla!" id="submit-button" />  
            <p id="req-field-desc"><span class="required">*</span> kind of necessary</p>  
        </form>  
    </div>  
    </div><!-- end contact -->

#contact-form { 
    width: 690px;
    padding:20px;  
    margin: 50px auto;    
    position:relative;  
}   
#contact-form h2 {  
    margin-bottom:20px;
    margin-top:40px;
    text-align: center;  
}  
#contact-form input,  
#contact-form select,  
#contact-form textarea,  
#contact-form label {  
    font-size:15px;  
    margin-bottom:2px;
}  
#contact-form input,  
#contact-form select,  
#contact-form textarea {
    float: left !important;  
    width:320px;   
    margin-bottom:20px;  
    padding:4px;  
}    
#contact-form textarea {  
    height:150px;  
    resize: none;  
}
#contact-form #message {
    clear: both;
    float: right !important;
}
#contact-form label {  
    display:block;  
}  
#contact-form .required {  
    font-weight:bold;  
    color:#F00;  
}  
#contact-form #submit-button {  
    width: 100px;  
    border: 2px solid #515151;  
    display:block;  
    float:rightright;  
    margin-bottom:0px;  
    margin-right:6px; 
}   
#contact-form #loading {  
    width:32px;  
    height:32px;  
    background-image:url(../img/loading.gif);  
    display:block;  
    position:absolute;  
    rightright:130px;  
    bottombottom:16px;  
    display:none;  
}  
#errors {  
    border:solid 1px #E58E8E;  
    padding:10px;  
    margin:25px 0px;  
    display:block;  
    width:437px;  
    -webkit-border-radius:8px;  
    -moz-border-radius:8px;  
    border-radius:8px;  
    background:#FFE6E6 url(../img/cancel_48.png) no-repeat 405px center;  
    display:none;  
}  
#errors li {  
    padding:2px;  
    list-style:none;  
}  
#errors li:before {  
    content: ' - ';  
}  
#errors #info {  
    font-weight:bold;  
}  
#errors #info:before {  
    content: '';  
}  
#success {  
    border:solid 1px #83D186;  
    padding:25px 10px;  
    margin:25px 0px;  
    display:block;  
    width:437px;  
    -webkit-border-radius:8px;  
    -moz-border-radius:8px;  
    border-radius:8px;  
    background:#D3EDD3 url(../img/accepted_48.png) no-repeat 405px center;  
    font-weight:bold;  
    display:none;  
}  
#errors.visible, #success.visible {  
    display:block;  
}  
#req-field-desc {  
    font-style:italic;  
}  
/* Remove box shadow firefox, chrome and opera put around required fields. It looks rubbish. */  
input:required, textarea:required {  
    -moz-box-shadow:none;  
    -webkit-box-shadow:none;  
    -o-box-shadow:none;  
    box-shadow:none;  
}  
/* Normalize placeholder styles */  
/* chrome, safari */  
::-webkit-input-placeholder {  
    color:#CCC;  
    font-style:italic;  
}  
/* mozilla */  
input:-moz-placeholder, textarea:-moz-placeholder {  
    color:#CCC;  
    font-style:italic;  
}  
/* ie (faux placeholder) */  
input.placeholder-text, textarea.placeholder-text  {  
    color:#CCC;  
    font-style:italic;  
} 
```

![目前来看](../Images/a3a73a84a65b69ffb6324da897bd7001.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:01:36.373

更新 JSFiddle：http: [//jsfiddle.net/jF49S/1/](http://jsfiddle.net/jF49S/1/)

正如我在评论中提到的，`clear`在处理`float`.

例如，这里只需要一个`clear: left;`.

```
#contact-form input,  
#contact-form select,  
#contact-form textarea {
    clear:left;
    float: left;
    width:320px;   
    margin-bottom:20px;  
    padding:4px;  
} 
```

我还重新排列了一些 HTML。有时这是获得所需布局所必需的。例如，我移动`<textarea>`到表格的开头以便它正确显示。

请记住，通常有很多方法可以使用 HTML 和 CSS 完成布局；我的建议只是一种方式。

有很多关于浮动的文章和教程，但这里有一个很好的入门：[http ://css-tricks.com/all-about-floats/](http://css-tricks.com/all-about-floats/)

# multithreading - 处理 __sync_add_and_fetch 未定义

> ID：15014417
> 
> 赞同：2
> 
> 时间：2013-02-21T23:48:39.693
> 
> 标签：multithreading, gcc, atomic

在我的开源软件项目中，我调用[gcc atomic](http://gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Atomic-Builtins.html) builtins：__sync_add_and_fetch 和 __sync_sub_and_fetch 来实现某些变量的原子增量和减量。我定期收到试图编译我的代码的人的电子邮件，但他们收到以下链接器错误：

```
refcountobject.cpp:(.text+0xb5): undefined reference to `__sync_sub_and_fetch_4'
refcountobject.cpp:(.text+0x115): undefined reference to `__sync_add_and_fetch_4' 
```

经过一番挖掘，我将根本原因缩小到他们的旧版本 gcc (4.1) 默认为 i386 的目标架构这一事实。显然，gcc 实际上并没有在 80386 上进行原子加法的内在函数，因此它隐式地在其中注入了一个未定义的 __sync_add_and_fetch_4 调用。这里有一个很好的描述它是如何工作[的](https://stackoverflow.com/questions/11727855/obtaining-current-gcc-architecture/11739573#comment21023835_11739573)。

[正如这里](https://stackoverflow.com/questions/2566167/where-to-find-sync-add-and-fetch-8)所讨论的，简单的解决方法是告诉他们修改 Makefile 以附加**-march=pentium**作为编译器标志之一。一切都很好。

**那么什么是长期修复，所以用户不必手动修复 Makefile？**

我正在考虑一些想法：

我不想将 -march=pentium 作为编译器标志硬编码到 Makefile 中。我猜这会破坏任何不是基于英特尔的东西。但是如果 Makefile 有一个规则来检测默认目标是 i386，我当然可以添加它。我正在考虑在 Makefile 中有一个规则，它是一个调用 gcc -dumpmachine 并解析出第一个三元组的脚本。如果字符串是 i386，它将添加编译器标志。我假设没有人会真正为 80386 机器构建。

另一种选择是实际提供 __sync_add_and_fetch_4 的实现，以供链接器使用。它甚至可以根据定义的 GCC_HAVE_SYNC_COMPARE_AND_SWAP 宏的存在有条件地编译。我使用全局 pthread_mutex 对实现进行了原型设计。可能不是最好的性能，但它可以很好地解决问题。如果为 x86 编译，一个更好的想法可能是自己编写内联程序集以调用“lock xadd”来实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T01:41:15.987

这是我的另一个工作解决方案。它可能在某些情况下存在，但我选择了上面的 makefile+script 解决方案。

此解决方案是在单独的源文件中提供 _sync_add_and_fetch_4、_sync_fetch_and_add_4、_sync_sub_and_fetch_4 和 _sync_fetch_and_sub_4 的本地定义。只有当编译器无法本地生成它们时，它们才会被链接。需要一些组装，但所有地方的[维基百科](http://en.wikipedia.org/wiki/Fetch_and_add#x86_implementation)都有一个我可以参考的合理实现。（我还反汇编了编译器通常生成的内容，以推断其他一切是否正确）。

```
#if defined(__i386) || defined(i386) || defined(__i386__)
extern "C" unsigned int xadd_4(volatile void* pVal, unsigned int inc)
{

    unsigned int result;
    unsigned int* pValInt = (unsigned int*)pVal;

    asm volatile( 
        "lock; xaddl %%eax, %2;"
        :"=a" (result) 
        : "a" (inc), "m" (*pValInt) 
        :"memory" );

    return (result);

}

extern "C" unsigned int __sync_add_and_fetch_4(volatile void* pVal, unsigned int inc)
{
    return (xadd_4(pVal, inc) + inc);
}

extern "C" unsigned int __sync_sub_and_fetch_4(volatile void* pVal, unsigned int inc)
{
    return (xadd_4(pVal, -inc) - inc);
}

extern "C" unsigned int __sync_fetch_and_add_4(volatile void* pVal, unsigned int inc)
{
    return xadd_4(pVal, inc);
}

extern "C" unsigned int __sync_fetch_and_sub_4(volatile void* pVal, unsigned int inc)
{
    return xadd_4(pVal, -inc);
}

#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:24:27.940

没有回复，我自己解决了。

有两种可能的解决方案，这是其中之一。

首先，将以下脚本 getfixupflags.sh 添加到与 Makefile 相同的目录中。该脚本将检测编译器是否*可能*以 i386 为目标，如果是，则将“-march=pentium”作为输出回显。

```
#!/bin/bash

_cxx=$1
_fixupflags=
_regex_i386='^i386'

if [[  ! -n $_cxx ]]; then echo "_cxx var is empty - exiting" >&2; exit; fi

 _target=`$_cxx -dumpmachine`
if [[ $_target =~ $_regex_i386 ]]; then 
    _fixupflags="$_fixupflags -march=pentium"
fi

if [[ -n $_fixupflags ]]; then echo $_fixupflags; fi 
```

现在修复 Makefile 以使用此脚本。将以下行添加到 Makefile

```
FIXUP_FLAGS := $(shell getfixupflags.sh $(CXX)) 
```

然后在编译代码时修改 Makefile 中的编译器指令以包含 FIXUP_FLAGS。例如：

```
%.o: %.cpp
    $(COMPILE.cpp) $(FIXUP_FLAGS) $^ 
```

# ruby-on-rails - 如果我想在按下按钮时触发外部 API 调用 - 控制器还是模型？

> ID：15014425
> 
> 赞同：2
> 
> 时间：2013-02-21T23:49:26.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想在按下按钮时通过调用外部 API 来更新我的数据。

我应该将逻辑放在控制器还是模型中？

或者更确切地说，哪些逻辑应该进入控制器，哪些应该进入模型。

基本上，我想检查是否在外部服务上创建了新记录 - 如果有新记录，那么我想拉出这些记录并在我这边创建一个新记录。

如果没有，那么就忽略它并继续前进。

解决这个问题的最佳方法是什么？

代码示例会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T15:02:37.320

我将在其下创建一个类或模块`lib`来处理所有核心 API 调用，并在模型中调用它。

所以我会做如下的事情。创建文件，如`lib/tag_fetcher.rb`：

```
module TagFetcher

  def self.fetch_tags(...)
    # adress some API to fetch the tags
  end
end 
```

然后在你的模型中写下类似的东西

```
def self.update_tags
  api_result = TagFetcher.fetch_tags
  # do your stuff here
end 
```

（当然：您应该为您的案例考虑更相关的名称）

这样做的原因：

*   可测试性：您可以相互隔离地测试获取和更新
*   更简洁的代码：获取标签不是模型的职责（单一职责原则）
*   如果 API 会以某种方式发生变化，或者您会使用相同的服务调用不同的 API，那么变化可能很小

HTH。

# c - 使用 libpcap 时出现分段错误

> ID：15014428
> 
> 赞同：0
> 
> 时间：2013-02-21T23:49:40.733
> 
> 标签：c, segmentation-fault, valgrind, libpcap

这是我用于解析`.pcap`文件的程序的 Valgrind 输出。

不幸的是，我可能不会在此处粘贴程序的源代码...问题是，当我在没有 valgrind 的情况下运行程序时，我没有任何`memcpy(...)`调用，它运行良好。`plugin_input_get_flow(...)`这可能吗？它是否表明，我以错误的方式使用 libpcap 库

```
Invalid write of size 1
==18228==    at 0x4A08877: memcpy (mc_replace_strmem.c:587)
==18228==    by 0x5229E9A: plugin_input_get_flow (in /home/flowmon/ipfix/flowmon-http-plugins-1.0/src/input-http/.libs/flowmon-input-http.so)
==18228==    by 0x409EA0: sw_get_flow_thread (in /usr/bin/flowmonexp)
==18228==    by 0x363600673C: start_thread (in /lib64/libpthread-2.5.so)
==18228==    by 0x36354D3D1C: clone (in /lib64/libc-2.5.so)
==18228==  Address 0xc3d2d5f is 1 bytes before a block of size 568 alloc'd
==18228==    at 0x4A0610C: malloc (vg_replace_malloc.c:195)
==18228==    by 0x3635461709: __fopen_internal (in /lib64/libc-2.5.so)
==18228==    by 0x3635C13A5C: pcap_open_offline (in /usr/lib64/libpcap.so.0.9.4)
==18228==    by 0x5229A3A: plugin_input_init (in /home/flowmon/ipfix/flowmon-http-plugins-1.0/src/input-http/.libs/flowmon-input-http.so)
==18228==    by 0x40974C: sw_init (in /usr/bin/flowmonexp)
==18228==    by 0x4115B5: main (in /usr/bin/flowmonexp)
==18228== 
==18228== Invalid write of size 1
==18228==    at 0x4A0887D: memcpy (mc_replace_strmem.c:587)
==18228==    by 0x5229E9A: plugin_input_get_flow (in /home/flowmon/ipfix/flowmon-http-plugins-1.0/src/input-http/.libs/flowmon-input-http.so)
==18228==    by 0x409EA0: sw_get_flow_thread (in /usr/bin/flowmonexp)
==18228==    by 0x363600673C: start_thread (in /lib64/libpthread-2.5.so)
==18228==    by 0x36354D3D1C: clone (in /lib64/libc-2.5.so)
==18228==  Address 0xc3d2d5e is 2 bytes before a block of size 568 alloc'd
==18228==    at 0x4A0610C: malloc (vg_replace_malloc.c:195)
==18228==    by 0x3635461709: __fopen_internal (in /lib64/libc-2.5.so)
==18228==    by 0x3635C13A5C: pcap_open_offline (in /usr/lib64/libpcap.so.0.9.4)
==18228==    by 0x5229A3A: plugin_input_init (in /home/flowmon/ipfix/flowmon-http-plugins-1.0/src/input-http/.libs/flowmon-input-http.so)
==18228==    by 0x40974C: sw_init (in /usr/bin/flowmonexp)
==18228==    by 0x4115B5: main (in /usr/bin/flowmonexp)
==18228== 
==18228== Invalid write of size 1
==18228==    at 0x4A08884: memcpy (mc_replace_strmem.c:587)
==18228==    by 0x5229E9A: plugin_input_get_flow (in /home/flowmon/ipfix/flowmon-http-plugins-1.0/src/input-http/.libs/flowmon-input-http.so)
==18228==    by 0x409EA0: sw_get_flow_thread (in /usr/bin/flowmonexp)
==18228==    by 0x363600673C: start_thread (in /lib64/libpthread-2.5.so)
==18228==    by 0x36354D3D1C: clone (in /lib64/libc-2.5.so)
==18228==  Address 0xc3d2d5d is 3 bytes before a block of size 568 alloc'd
==18228==    at 0x4A0610C: malloc (vg_replace_malloc.c:195)
==18228==    by 0x3635461709: __fopen_internal (in /lib64/libc-2.5.so)
==18228==    by 0x3635C13A5C: pcap_open_offline (in /usr/lib64/libpcap.so.0.9.4)
==18228==    by 0x5229A3A: plugin_input_init (in /home/flowmon/ipfix/flowmon-http-plugins-1.0/src/input-http/.libs/flowmon-input-http.so)
==18228==    by 0x40974C: sw_init (in /usr/bin/flowmonexp)
==18228==    by 0x4115B5: main (in /usr/bin/flowmonexp)
==18228== 
==18228== Invalid write of size 1
==18228==    at 0x4A0888F: memcpy (mc_replace_strmem.c:587)
==18228==    by 0x5229E9A: plugin_input_get_flow (in /home/flowmon/ipfix/flowmon-http-plugins-1.0/src/input-http/.libs/flowmon-input-http.so)
==18228==    by 0x409EA0: sw_get_flow_thread (in /usr/bin/flowmonexp)
==18228==    by 0x363600673C: start_thread (in /lib64/libpthread-2.5.so)
==18228==    by 0x36354D3D1C: clone (in /lib64/libc-2.5.so)
==18228==  Address 0xc3d2d5c is 4 bytes before a block of size 568 alloc'd
==18228==    at 0x4A0610C: malloc (vg_replace_malloc.c:195)
==18228==    by 0x3635461709: __fopen_internal (in /lib64/libc-2.5.so)
==18228==    by 0x3635C13A5C: pcap_open_offline (in /usr/lib64/libpcap.so.0.9.4)
==18228==    by 0x5229A3A: plugin_input_init (in /home/flowmon/ipfix/flowmon-http-plugins-1.0/src/input-http/.libs/flowmon-input-http.so)
==18228==    by 0x40974C: sw_init (in /usr/bin/flowmonexp)
==18228==    by 0x4115B5: main (in /usr/bin/flowmonexp) 
```

# java - 通过foreach循环从其他类访问arraylist

> ID：15014430
> 
> 赞同：-1
> 
> 时间：2013-02-21T23:49:44.767
> 
> 标签：java, foreach, entity, lwjgl, slick

我正在尝试通过 Foreach 循环从我的其他类访问我的 ArrayList。但这似乎不起作用，出于某种原因。没有错误，只是不会执行 Foreach 循环。

这是我的代码：

```
for(Entity entity : world.entitys) {
if(entity.isMouseDown()) {
    System.out.println("Touching Entity");
} else {
    System.out.println("Is not Touching Entity");
}
} 
```

世界级的数组列表：

```
public ArrayList<Entity> entitys = new ArrayList<Entity>(); 
```

世界是我的另一门课。实体是我的 Arraylist。Entity 是我在 Arraylist 中的实体的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:04:13.777

如果根据您的描述没有抛出编译器或运行时错误，唯一的原因是 ArrayList 为空...

学习调试，它将帮助您解决此类问题，而无需寻求任何人的帮助。

# r - R中的采样和计算

> ID：15014432
> 
> 赞同：0
> 
> 时间：2013-02-21T23:49:52.693
> 
> 标签：r

我有一个包含两列（Time，VA）的文件。该文件很大，我设法在 R 中读取它（使用读取和子集 - 对于大文件不实用）。现在，我想根据时间进行采样，其中每个样本都有样本大小和样本偏移。样本大小是整个采样过程的固定值，例如 sampleSize=10 秒。样本移位是每个新样本的起点（在第一个样本之后）。例如，如果 sampleShift =4 sec 并且 sampleSize 是 10 sec ，这意味着第二个样本将从 5 sec 开始并添加 10 sec 作为样本 sample size=10 sec。对于每个样本，我想将 -VA- 值提供给一个函数以进行一些计算。

```
Sampling <- function(values){
# Perform the sampling 
lastRowNumber<- #specify the last row manually
sampleSize<-10
lastValueInFile<-lastRowNumber-sampleSize

for (i in 1: (lastValueInFile ) ){ 
  EndOfShift<-9+i
  sample<-c(1:sampleSize)
  h<-1

  for(j in i:EndOfShift){        
    sample[h] <- values[j,1]
    h<-h+1
  }
  print(sample)
  #Perform the Calculation on the extracted sample
  #--Samp_Calculation<-SomFunctionDoCalculation(sample) 
}
} 
```

我尝试的问题是：1）我必须为我读取的每个文件手动指定 lastRow 编号。2）我试图根据行数而不是时间值进行采样。此外，每个样本的偏移量为 1。

文件样本：

```
Time     VA
0.00000 1.000
0.12026 2.000
0.13026 2.000
0.14026 2.000
0.14371 3.000
0.14538 4.000
 ..........
 ..........
15.51805 79.002
15.51971 79.015
15.52138 79.028
15.52304 79.040
15.52470 79.053
............. 
```

对更专业的方式有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:45:25.200

我已经生成了一些测试数据，如下所示：

```
val <- data.frame (time=seq(from=0,to=15,by=0.01),VA=c(0:1500)) 
```

...然后功能：

```
sampTime <- function (values,sampTimeLen) 
{
    # return a data frame for a random sample of the data frame -values-
    # of length -sampTimeLen-
    minTime <- values$time[1]
    maxTime <- values$time[length(values$time)] - sampTimeLen
    startTime <- runif(1,minTime,maxTime)
    values[(values$time >= startTime) & (values$time <= (startTime+sampTimeLen)),]
} 
```

...可以按如下方式使用：

```
> sampTime(val,0.05)
    time  VA
857 8.56 856
858 8.57 857
859 8.58 858
860 8.59 859
861 8.60 860 
```

...我认为这就是你要找的。

（编辑）

在澄清您想要来自特定时间而不是随机时间的样本之后，此功能应该为您提供：

```
sampTimeFrom <- function (values,sampTimeLen,startTime) 
{
    # return a data frame for sample of the data frame -values-
    # of length -sampTimeLen- from a specific -startTime-
    values[(values$time >= startTime) & (values$time <= (startTime+sampTimeLen)),]
} 
```

... 这使：

```
> sampTimeFrom(val,0.05,0)
  time VA
1 0.00  0
2 0.01  1
3 0.02  2
4 0.03  3
5 0.04  4
6 0.05  5
> sampTimeFrom(val,0.05,0.05)
   time VA
6  0.05  5
7  0.06  6
8  0.07  7
9  0.08  8
10 0.09  9
11 0.10 10 
```

如果您想要多个样品，可以这样交付`sapply()`：

```
> samples <- sapply(seq(from=0,to=0.15,by=0.05),function (x) sampTimeFrom(val,0.05,x))
> samples[,1]
$time
[1] 0.00 0.01 0.02 0.03 0.04 0.05

$VA
[1] 0 1 2 3 4 5 
```

在这种情况下，输出将重叠，但使输出`sampTimeLen`值略小于移位值（显示在 的`by=`参数中`seq`）将为您提供不重叠的样本。或者，函数中的一个或两个标准可以从`>=`或更改`<=`为`>`或`<`。

# java - 为什么我会得到 nullpointerexeption？

> ID：15014442
> 
> 赞同：0
> 
> 时间：2013-02-21T23:50:36.230
> 
> 标签：java, nullpointerexception, dao, bufferedreader

```
class DAOBilTextFile implements DAOBil {
private ArrayList<DTOBil> dtoBilar;

public DTOBil dtobil;

public DAOBilTextFile() {
 dtoBilar = new ArrayList<DTOBil>();   
 Charset charset = Charset.forName("UTF-8");
BufferedReader reader = null;

try {
        try{
        reader = Files.newBufferedReader(Paths.get("databilar.txt"), charset);

        String line = null;
        DTOBil bil = null;
         while((line = reader.readLine()) != null){
                 //tar in line och lägger in den i en array med hjälp av ; för att splitta datat
                 String strBilar[] = line.split(";");
                bil = new DTOBil(strBilar[0], strBilar[1], strBilar[2], strBilar[3]);
                //lägger till bil i arraylistan
                dtoBilar.add(bil);
             }reader.close();//this line is the error!

    }finally{
        reader.close();
        }} catch (IOException ioexp) {
        System.out.println(ioexp.getMessage());
    }

}

@Override
public void create(DTOBil dtobil) {
     Charset charset = Charset.forName("UTF-8");
    //klasser för att skriva till textfil
    BufferedWriter writer = null;

        try {
        writer = Files.newBufferedWriter(Paths.get("databilar.txt"), charset, StandardOpenOption.APPEND);
        writer.write(dtobil.getRegnr() + ";"
                    + dtobil.getMarke() + ";"
                    + dtobil.getModell() + ";"
                    + dtobil.getsokVag());
            writer.newLine();
            System.out.println("La till en bil");
            writer.close();
    } catch (IOException ioexp) {
       System.out.println(ioexp.getMessage());
     }
} 
```

我在 swing.labb3.DAOBilTextFile.(DAOBilTextFile.java:50) 处收到“线程“AWT-EventQueue-0”java.lang.NullPointerException 中的异常”，但为什么呢？我不明白？我的朋友也做了同样的事情，他的代码也可以工作......这不是所有的代码，但我已经在评论中放置了第 50 行。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:30:54.737

看起来，您缺少该`databilar.txt`文件，因此`newBufferedReader`调用会引发`IOException`. 所以它转移到 finally 块并尝试关闭阅读器，但由于阅读器没有被`newBufferedReader`调用设置，它仍然是`null`，并且尝试关闭它会抛出一个`NullPointerException`. 在 finally 块中，您需要对此进行测试：

```
} finally {
    if (reader != null) reader.close();
} 
```

然后它将能够无害地退出 finally 块并到达外部 try 块中的 IOException 捕获器。

但最大的问题是找不到文件。

# asp.net-mvc - 如何在迁移 > 配置中使用两个不同的数据库 - 一个用于 Web，一个用于测试？

> ID：15014449
> 
> 赞同：1
> 
> 时间：2013-02-21T23:51:29.333
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, asp.net-mvc-4

*   我有一个 3 层 MVC4 应用程序 - Web > Services > Core。
*   我正在使用 EF Codefirst
*   数据上下文和迁移文件夹位于核心中
*   我想重复使用这些，但使用不同的数据库进行测试
*   我在解决方案中添加了另一个名为“Tests”的项目 - 我正在尝试创建另一个项目来调用一些服务并使用测试数据库来验证所有 CRUD 操作是否按预期运行。
*   我从 Web 复制`app.config`到 Tests 项目并删除了所有特定于 Web 的东西
*   我在这里的测试中指定了一个新数据库`app.config`：

```
Catalog=Project.Services.Tests;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\Project.Services.Tests.mdf" providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

*   我成功构建了项目
*   我添加了以下测试类：

    ```
    [TestClass]
    public class ServiceTest
    {
        private TransactionScope _transactionScope;
        private SetServices _services;

        [TestInitialize]
        public virtual void TestInitialize()
        {
            _services = new SetServices();
            _transactionScope = new TransactionScope();
        }

        [TestMethod]
        public void AddSet()
        {
            _services.CreateSet("New Set", "Details", null);
        }

        [TestCleanup]
        public void TestCleanup()
        {
            // rollback
            if (_transactionScope != null)
            {
                _transactionScope.Dispose();
            }
        }

    } 
    ```

但是当我运行它时，我得到：

> 多语句事务中不允许 CREATE DATABASE 语句。

在我的`CreateSet`方法中：

```
 _db.Sets.Add(set); 
```

我不确定它为什么要尝试创建一个新数据库。我怎样才能开始解决这个问题？

# facebook - 重定向到移动 URL 时 Facebook 发布 URL 不起作用

> ID：15014456
> 
> 赞同：3
> 
> 时间：2013-02-21T23:52:08.950
> 
> 标签：facebook, url, redirect, mobile

我有一个 facebook 应用程序，它使用 facebook graph api 存储帖子和评论详细信息。graph api 为帖子提供 url，并且这些 url 使用基于 web 的 url 返回。我的应用程序允许我在墙上的帖子中搜索内容，并返回与我的搜索词匹配的帖子的 url。

例如，帖子的 url 格式为

```
http://www.facebook.com/user_id/posts/post_id 
```

在桌面上这工作正常。在我的手机上，我认为 facebook 会重定向到 url 的移动版本。

例如，我要求

```
www.facebook.com/user_id/posts/post_id 
```

Facebook 重定向到

```
m.facebook.com/user_id/posts/post_id 
```

我已经在我的桌面上使用 Firefox 上的代理更换器确认了重定向，我收到了相同的错误消息。

> 您请求的页面现在无法显示。它可能暂时不可用，您点击的链接可能已损坏或过期，或者您可能无权查看此页面。

我的问题是：facebook 帖子的移动 url 是否应该与重定向一起使用。例如，当我尝试

```
m.facebook.com/my_username 
```

这回来没问题。我是否缺少设置或配置来使其正常工作

# html - 创建一个向下滚动时消失/缩小的 div？

> ID：15014458
> 
> 赞同：2
> 
> 时间：2013-02-21T23:52:18.997
> 
> 标签：html, css

我有兴趣在这里创建类似于标题 div 的内容：http: [//abduzeedo.com/brainstorm-9-logo-process](http://abduzeedo.com/brainstorm-9-logo-process)

我知道 html 看起来有点像这样：

```
<div class="menu">
    <!--Fixed menu-->
</div>

<div class="headerimg">
    <!--Image that would disapear-->
</div>

<div class="content">
    <!--Content stuff here-->
</div> 
```

但我不确定如何在 jQuery/CSS 方面做到这一点。有任何想法吗？

谢谢，哈里森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:14:33.100

这是一个小提琴（没什么花哨的，主要是玩位置：固定；和z-index。）：http: [//jsfiddle.net/zrYTm/7/](http://jsfiddle.net/zrYTm/7/)

HTML：

```
<div class="menu"> Lorem ipsum dolor...</div>

<div class="headerimg"> Sed aliquam, lectus...</div>

<div class="content"> Fusce at neque...</div> 
```

CSS：

```
.menu {
    position: fixed;
    z-index: 1000000; /* highest z-index on page */

    top: 0;
    left: 0;
    right: 0;
    height: 100px;
    background-color: red;
}

.headerimg {
    position: fixed;
    z-index: 0; /* Lowest z-index */

    top: 100px;
    left: 0;
    right: 0;
    height: 100px;
    background-color: green;
}

.content {
    position: relative;
    z-index: 1000; /* Medium z-index */

    margin-top: 200px; /* Heigth of header and menu */

    height: 1000px;
    background-color: blue;
}

div {
    overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T00:38:24.850

使用您的 html，这里是 css：

```
 .menu, .headerimg, .content {
    width: 100%;
}
.menu {
    background: red;
    height: 50px;
    position: fixed;
    top: 0;
}
.headerimg {
    background: yellow;
    height: 100px;
    position: fixed;
    top:50px;
    z-index: -2;
}
.content {
    height: 1000px;
    background: gray;
    z-index:50;
    margin-top: 160px;
} 
```

现在要让`.headerimg`滚动速度慢于`.content`，请使用 Jquery

```
$(document).ready(function() {
window.onscroll = function () {
    n = Math.ceil($("body").scrollTop() / 4);
    $(".headerimg").css("-webkit-transform", "translateY(-" + n + "px)");
    $(".headerimg").delay(1300).css("-moz-transform", "translateY(-" + n + "px)");

}
}) 
```

[http://jsfiddle.net/akurtula/3w9Dv/1](http://jsfiddle.net/akurtula/3w9Dv/1)

# c# - 使用 NUnit Assert.Throws 方法或 ExpectedException 属性？

> ID：15014461
> 
> 赞同：160
> 
> 时间：2013-02-21T23:52:45.470
> 
> 标签：c#, unit-testing, exception, nunit, assert

我发现这些似乎是测试异常的两种主要方法：

```
Assert.Throws<Exception>(()=>MethodThatThrows());

[ExpectedException(typeof(Exception))] 
```

其中哪一个最好？一个比另一个有优势吗？还是仅仅是个人喜好问题？

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2013-02-23T18:01:27.977

主要区别在于：

`ExpectedException()`*如果测试方法中的任何*地方发生异常，属性使测试通过。
的使用`Assert.Throws()`允许指定`exact`预期异常的代码位置。

NUnit 3.0 完全放弃了官方支持`ExpectedException`。

所以，我绝对更喜欢使用`Assert.Throws()`方法而不是`ExpectedException()`属性。

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2013-02-21T23:59:53.100

第一个允许您通过多个调用测试多个异常：

```
Assert.Throws(()=>MethodThatThrows());
Assert.Throws(()=>Method2ThatThrows()); 
```

第二个只允许您为每个测试函数测试一个异常。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2013-02-22T00:02:51.430

我更喜欢 assert.throws 因为它允许我在抛出异常后验证和断言其他条件。

```
 [Test]
    [Category("Slow")]
    public void IsValidLogFileName_nullFileName_ThrowsExcpetion()
    {
        var a = new MyTestObject();

        // the exception we expect thrown from the IsValidFileName method
        var ex = Assert.Throws<ArgumentNullException>(() => a.IsValidLogFileName(""));

        // now we can test the exception itself
        Assert.That(ex.Message == "Blah");

    } 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-11-24T12:23:41.370

您也可以强输入您期望的错误（如旧的属性版本）。

```
Assert.Throws<System.InvalidOperationException>(() => breakingAction()) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-22T06:38:11.113

如果您使用的是旧版本（**<=2.0**），`NUnit`那么您需要使用`ExpectedException`.

如果您使用的是**2.5**或更高版本，则可以使用`Assert.Throw()`

[https://github.com/nunit/docs/wiki/Breaking-Changes](https://github.com/nunit/docs/wiki/Breaking-Changes)

使用方法： [https ://www.nunit.org/index.php?p=exceptionAsserts&r=2.5](https://www.nunit.org/index.php?p=exceptionAsserts&r=2.5)

# python - pygraphviz ValueError：在路径中找不到程序点

> ID：15014465
> 
> 赞同：5
> 
> 时间：2013-02-21T23:52:58.613
> 
> 标签：python, graphviz, pygraphviz

问题是：我在 Windows7 上，并且我已经安装了 pygraphviz 库和 Graphviz 应用程序（Graphviz 应用程序位于“C:\Program Files”中）。当我在 python 上运行我的程序时，我收到以下消息：

```
g.draw(filename,prog='dot')
  File "C:\Python27\lib\site-packages\pygraphviz\agraph.py", line 1418, in draw
    data=self._run_prog(prog,args)
  File "C:\Python27\lib\site-packages\pygraphviz\agraph.py", line 1248, in _run_prog
    runprog=self._get_prog(prog)
  File "C:\Python27\lib\site-packages\pygraphviz\agraph.py", line 1236, in _get_prog
    raise ValueError("Program %s not found in path."%prog) 
ValueError: Program dot not found in path. 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T23:55:57.817

您需要将带有 graphviz 二进制文件的目录添加到`PATH`.

# java - 一段时间后如何打开一个新的 JPanel（Java）？

> ID：15014466
> 
> 赞同：1
> 
> 时间：2013-02-21T23:53:02.623
> 
> 标签：java, swing, jframe, jpanel

我正在使用三个班级。第一个 (JFrame) 调用 Splash 类 (JPanel)。一段时间后，我希望将面板删除并替换为 Menu 类中的另一个面板。

我的主类目前是这样的（init方法被同一个类中的main方法调用）...

```
public void init() throws InterruptedException{
        setLayout(new BorderLayout());

        Menu menu = new Menu(this);
        Splash splash = new Splash(this);

        this.getContentPane().add(splash, BorderLayout.CENTER);
        validate();

        setVisible(true);

        Thread.sleep(1000);

        this.removeAll();

        invalidate();
        this.getContentPane().add(menu, BorderLayout.CENTER);
        revalidate();

        setVisible(true);

    } 
```

Splash 类看起来像这样......

```
public Splash(Survive survive) throws InterruptedException{
        Color c1 = new Color(255, 255, 255);
        this.setBackground(c1);

        JLabel jl1 = new JLabel();
        jl1.setIcon(new ImageIcon("res/splash.png"));
        this.add(jl1);

    } 
```

菜单类如下...

```
public Menu(Survive survive){
        ImageIcon i1 = new ImageIcon("res/title.png");

        this.setLayout(new FlowLayout(FlowLayout.CENTER));
        this.setLayout(new GridBagLayout());

        Color c1 = new Color(96, 96, 96);
        this.setBackground(c1);

        JButton b0 = new JButton(i1);
        b0.setPreferredSize(new Dimension(800, 250));
        b0.setRolloverIcon(i1);
        b0.setOpaque(false);
        b0.setBorderPainted(false);
        gbc.gridx = 0;
        gbc.gridy = -2;
        this.add(b0, gbc);

        JButton b1 = new JButton("Singleplayer");
        b1.setPreferredSize(new Dimension(buttonWidth, buttonHeight));
        gbc.gridx = 0;
        gbc.gridy = 1;
        this.add(b1, gbc);

        JButton b2 = new JButton("Options");
        b2.setPreferredSize(new Dimension(buttonWidth, buttonHeight));
        gbc.gridx = 0;
        gbc.gridy = 2;
        this.add(b2, gbc);

        JButton b3 = new JButton("Credits");
        b3.setPreferredSize(new Dimension(buttonWidth, buttonHeight));
        gbc.gridx = 0;
        gbc.gridy = 3;
        this.add(b3, gbc);

        JButton b4 = new JButton("Options");
        b4.setPreferredSize(new Dimension(buttonWidth, buttonHeight));
        gbc.gridx = 0;
        gbc.gridy = 4;
        this.add(b4, gbc);

    } 
```

这一切的目的是使用swing组件制作一个闪屏。我意识到有更简单的方法可以做到这一点，但我发现这种方法适合我的需要。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:29:33.167

使用 one one shot`javax.swing.Timer`触发事件，并`CardLayout`在组件之间保持/交换。

# php - 如何从另一个文件加载页面片段并使用 jQuery load() 函数显示它

> ID：15014468
> 
> 赞同：0
> 
> 时间：2013-02-21T23:53:08.833
> 
> 标签：php, jquery, codeigniter

```
$(document).ready(function() {
$('#items').load("<?php echo site_url('home/new_items'); ?>");
}); 
```

使用 jQuery，我可以显示整个页面，使用上面的代码调用“home/new_items”，但我如何只显示文件的一部分？ [$('#result').load('ajax/test.html #container');](http://api.jquery.com/load/) 在示例中，它表明这是可能的，那么如何在 codeigniter 中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:02:07.847

首先，您不能通过 java 脚本代码插入 php 代码。

同样使用 jQuery 加载，您可以只从目录加载文件而无需任何 php 帮助。

提示：使用

```
$(function(){/*your code*/}); 
```

如果你使用 jQuery

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:23:00.277

可以显示部分页面，但是您需要：

*   解析页面并仅剪切您需要显示的部分

或者

*   从服务器端（PHP）准备部分，您可以使用参数进行 AJAX 调用

> $('#result').load('ajax/test.php?part=some_special_part_of_page');

# java - 如何阻止 JScrollPane 中的滚动条更新？

> ID：15014477
> 
> 赞同：0
> 
> 时间：2013-02-21T23:54:57.763
> 
> 标签：java, swing, jscrollpane

我在里面有自己的自定义控件`JScrollPane`。这是无尽的（在各个方向）板，上面有网格。

我尝试了各种方法来实现它，包括扩展`JViewport`和添加`setViewport`，以及扩展`JComponent`和添加`setViewportView`。

所有方法都会导致一些无穷无尽和负位置的问题。尽管组件可以在负坐标空间中自由绘制自己，但糟糕的 Swing API 设计不允许将此信息传输到容器（仅允许维度，即正方向）。

最后我得出结论，如果我完全破坏了通知`JScrollPane`它的包含大小的通道，它会更新滚动条的最小值和最大值，我将被允许手动设置最小值和最大值，这将解决任务。

所以，这就是问题所在：如何防止自定义组件通知`JScrollPane`它的大小？这种预防的简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T06:18:38.180

我宁愿将逻辑（模型）坐标和组件坐标/大小分开。因此，当用户增加 NORTH 方向时，您应该为组件的高度添加适当的更改值并将渲染（或组件）垂直位置向下移动。

例如，我有一个模型元素 -`Rectangle`放置在 (0,0) 中。绘制矩形的JPanel 具有初始绘制点=(10,10)。事实上，当我们绘制时，我们只是`g.translate(10,10)`然后绘制模型`g.draw(myRectangle);`

因此，当用户增加 NORTH (+10) 时，我们只需增加移位`g.translate(10,10+10)`并增加`JPanel's`首选高度以反映`JScrollPane`.

# css - 溢出-x：隐藏不起作用

> ID：15014481
> 
> 赞同：1
> 
> 时间：2013-02-21T23:55:08.540
> 
> 标签：css, web

我正在一个网站上工作，我想禁用水平滚动但允许垂直滚动。所以我做了以下

```
<body style="overflow-x:hidden; overflow-y:scroll;"> 
```

虽然我没有看到任何滚动条，但我可以滚动（在 Mac 上使用触摸板）。但是，当我设置

```
<body style="overflow:hidden;"> 
```

它会按我的预期禁用所有滚动。

有什么想法可以在启用另一个方向的同时禁用一种方式滚动吗？

该网站可在 [www.aeccons.com上找到](http://www.aeccons.com)

# javascript - 如何对数组的两种类型的值进行排序？

> ID：15014483
> 
> 赞同：1
> 
> 时间：2013-02-21T23:55:28.237
> 
> 标签：javascript, sorting

我正在尝试按字母顺序对项目进行排序。但是，我也想对项目类型进行排序。

例如：

我想

```
 type     sortValue

blockItem   a test1
blockItem   a test2
blockItem   b test3
imageItem   a image
imageItem   b image
imageItem   c image
imageItem   s image
textItem    a text
textItem    b text
textItem    c text 
```

我的代码会做这样的事情。

```
 type     sortValue

blockItem   a test1
blockItem   a test2
imageItem   a image
textItem    a text
blockItem   b test3
imageItem   b image
textItem    b text
imageItem   c image
textItem    c text
imageItem   s image 
```

我的排序功能

```
array contains type and sortvalue

array=array.sort(sortFunction);

function sortFunction(groupA, groupB) {

    if (groupA.sortValue > groupB.sortValue) {
        return 1;
    } else if (groupA.sortValue < groupB.sortValue) {
        return -1;
    }

    return 0;
} 
```

它只对文本进行排序，而不对类型进行排序。我想知道是否有办法做到这一点。非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:59:33.803

使用第二个键比较第一个键是否相等：

```
function sortFunction(a, b) {
    if (a.key1 > b.key1) {
        return +1;
    } else if (a.key1 < b.key1) {
        return -1;
    } else if (a.key2 > b.key2) {
        return +1;
    } else if (a.key2 < b.key2) {
        return -1;
    } else 
    ...
    } else if (a.keyN > b.keyN) {
        return +1;
    } else if (a.keyN < b.keyN) {
        return -1;
    } else {
       return 0;
    }   
} 
```

或者，为了更好的可读性：

```
function sortFunction(a, b) {
    if (a.key1 > b.key1) {
        return +1;
    } else if (a.key1 < b.key1) {
        return -1;
    }

    if (a.key2 > b.key2) {
        return +1;
    } else if (a.key2 < b.key2) {
        return -1;
    }
    ...

    if (a.keyN > b.keyN) {
        return +1;
    } else if (a.keyN < b.keyN) {
        return -1;
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T23:59:44.570

```
if (groupA.type == groupB.type) {
    /* your code */
}
else if (groupA.type > groupB.type) {
    return 1;
}
else if (groupA.type < groupB.type) {
    return -1;
}

return 0; 
```

# ruby-on-rails - 为什么 rvm 在没有 rvmrc 的情况下改变路径？

> ID：15014485
> 
> 赞同：0
> 
> 时间：2013-02-21T23:55:46.660
> 
> 标签：ruby-on-rails, rvm, bundler

今天我再次遇到了bundler 的可怕错误。这里有很多关于它的问题和很多调试技巧，但我开始深入挖掘，奇怪的是，即使我删除and并且我在两个不同的项目中得到不同的结果。据我所知，它们在 rvm 眼中应该是相同的，但我得到了不同的结果。在两个新的 bash 窗口中，Linux Mint：`ERROR: Gem bundler is not installed, run `gem install bundler` first.``.rvmrc``bin``.bundle`

```
~ $ cd ${PROJECT_PATH}/project1
project1 $ echo $PATH
/usr/local/heroku/bin:/home/fletch/.rvm/gems/ruby-1.9.3-p385/bin:/home/fletch/.rvm/gems/ruby-1.9.3-p385@global/bin:/home/fletch/.rvm/rubies/ruby-1.9.3-p385/bin:/home/fletch/.rvm/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games
project1 $ tree -L 1 -a
.
|-- app
|-- config
|-- config.ru
|-- db
|-- Gemfile
|-- Gemfile.lock
|-- .git
|-- .gitignore
|-- Guardfile
|-- lib
|-- log
|-- Procfile
|-- public
|-- Rakefile
|-- .rspec
|-- script
|-- spec
|-- tmp
`-- vendor

11 directories, 15 files 
```

这是所需的输出。现在对于另一个项目：

```
~ $ cd ${PROJECT_PATH}/project2
project2 $ echo $PATH
/home/fletch/.rvm/gems/ruby-1.9.3-p385/bin:/home/fletch/.rvm/rubies/ruby-1.9.3-p385/bin:/home/fletch/.rvm/bin:/usr/local/heroku/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games
project2 $ tree -L 1 -a
.
|-- app
|-- config
|-- config.ru
|-- coverage
|-- db
|-- Gemfile
|-- Gemfile.lock
|-- .git
|-- .gitignore
|-- Guardfile
|-- lib
|-- log
|-- public
|-- Rakefile
|-- README.md
|-- .rspec
|-- script
|-- spec
|-- tmp
`-- vendor

12 directories, 8 files 
```

为什么我的路径不一样？第二个不加载全局gemset，并且出于某种原因也将heroku 位向后移动。作为参考，当我打开一个新的控制台时，我的默认路径与第一个路径匹配。rvm 是否将一些信息保存在内存或一些关于哪些项目使用哪些版本的全局文件中？我无法在我的项目中辨别出任何模式。有些工作，有些不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:36:14.693

RVM 支持的不仅仅是`.rvmrc`其中一个文件`Gemfile`使用`bundler`指定 ruby​​ 的指令：

```
ruby='1.9.3' 
```

或具有偏好且特定于 RVM 的评论：

```
#ruby=1.9.3-p385 
```

# linux - Linux - 系统启动时自动运行哪些进程

> ID：15014486
> 
> 赞同：-1
> 
> 时间：2013-02-21T23:55:47.237
> 
> 标签：linux, process, redhat

关于 linux (Scientific Linux) 中的系统启动，我有一个有点菜鸟的问题。

系统启动时自动运行哪些进程？

据我研究，Linux 有 7 个初始化运行级别（从 0 到 6 计数），在第 3 级（完全多用户模式）它初始化位于 /etc/rc.d/ 中的所有脚本（系统启动脚本） rc3.d/ 文件夹。

我是对的还是错的？请解释

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T23:59:07.310

1.  BIOS 执行特定于硬件平台的启动任务
2.  一旦硬件被识别并正确启动，BIOS 就会从指定的引导设备加载并执行分区引导代码，其中包含 Linux 引导加载程序的阶段 1。阶段 1 加载阶段 2（大部分引导加载程序代码）。一些加载器可能会使用中间阶段（称为阶段 1.5）来实现这一点，因为如果没有进一步的代码，现代大型磁盘可能无法完全读取。
3.  引导加载程序通常会为用户提供一个可能的引导选项菜单。然后它加载操作系统，解压到内存中，并在调用 start_kernel() 之前设置系统功能，例如基本硬件和内存分页。
4.  start_kernel() 然后执行大部分系统设置（中断、内存管理的其余部分、设备初始化、驱动程序等），然后分别生成空闲进程和调度程序以及 Init 进程（在用户空间中执行）。
5.  Init 进程根据需要执行设置所有非操作系统服务和结构的脚本，以便创建用户环境，然后向用户显示登录屏幕。

# java - 在Java中查找倍数

> ID：15014487
> 
> 赞同：-3
> 
> 时间：2013-02-21T23:55:49.310
> 
> 标签：java

我将如何找到 3 和 5 的倍数？

我是新手，所以请不要太复杂。但是我知道基础知识。

创建一个方法会更好，但这会花费太长时间

IE

如果 x == 3,5,6 等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:58:42.947

查看Java的[模数运算符。](http://www.cafeaulait.org/course/week2/15.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:56:39.767

```
if (num % 5 == 0 || num % 3 == 0) // you have a multiple. 
```

这只会告诉你`num`是 3 还是 5 的倍数……我想你可能会弄清楚如何使它更通用并适合任何数字组合。或者只是看看 duffymo 的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T23:57:23.257

```
package math;

/**
 * MathUtils description here
 * @author Michael
 * @link
 * @since 2/21/13 6:59 PM
 */
public class MathUtils {

    public static void main(String[] args) {
        int [] values = {
            10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
            20, 21, 22, 23, 24, 25, 26, 27, 28, 29,
            30
        };
        int n = 3;
        int p = 5;
        for (int i = 0; i < values.length; ++i) {
            System.out.println(String.format("value %d multiple of %d and %d? %s", values[i], n, p, isEvenMultiple(values[i], n, p)));
        }
    }

    public static boolean isEvenMultiple(int m, int n, int p) {
        return ((m%n == 0) && (m%p == 0));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T00:15:07.603

该程序只打印非负倍数，也只打印可以用 32 位 2s 补码表示的倍数。但其中，它应该按顺序打印它们，并且不重复。

```
int m3 = 0 ;
int m5 = 0 ;
while( m3 >= 0 || m5 >= 0 ) {
    if( m5 < 0 || m3 < m5 ) {
        System.out.println(m3) ;
        m3 += 3 ; }
    else if( m3 < 0 || m5 < m3 ) {
        System.out.println(m5) ;
        m5 += 5 ; }
    else {
        System.out.println(m3) ;
        m3 += 3 ; m5 += 5 ; }  } 
```

# php - 如何在php的另一个页面中打印会话数组变量值

> ID：15014488
> 
> 赞同：3
> 
> 时间：2013-02-21T23:55:56.870
> 
> 标签：php

这是打印所有主题名称的程序，这是学生表的字段名称。我将所有主题名称存储到一个数组中，我必须在另一个页面中打印该数组值。所以我将该数组存储到会话变量中但是在下一页打印该数组时，它仅打印为“数组”。

```
<?php

session_start();
$con=mysql_connect("localhost","root","");  
mysql_select_db("cse",$con);

$sql="select * from studenttable where username='saravanan'";

$calname=array();
$i=0;
mysql_query($sql);
while($rs=mysql_fetch_field($result))
{
         $colname[$i]=$rs->name;
         $i++;

}
$_SESSION['subject']=$calname;
?>

in the next page i print the session variable using 

<?php
session_start();
echo $_SESSION['subject'];
?>

but i am getting "Array"only as output.
how to print the all value of array what i stored into it already? 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T23:57:36.190

当然，您只是得到`Array`输出..您正在尝试将数组转换为字符串，而没有适用的函数。

如果您想将整个数组打印为字符串，请尝试[`print_r($array);`](http://us3.php.net/manual/en/function.print-r.php).

此外，您当然可以使用字符串将数组连接在一起，使用[`implode()`](http://us3.php.net/manual/en/function.implode.php).. 最后但并非最不重要的一点是，如果需要，请务必使用它们的键访问数组的各个部分：

```
echo $_SESSION['subject']['somekeyhere']; 
```

但是，从您的代码中也可以看出，您实际上有一些拼写错误会阻止您获取所需的数据：`$calname`与`$colname`您在 while 循环中拥有的变量相比.. 在会话中将其保留为空数组。

**更新 1：**

另一种打印整个数组的方法..或者更确切地说，回显每个单独的值：

```
foreach ($array as $key => $value) {
    echo $value . "<br />";
} 
```

**无关：**

我不建议使用`mysql_*`函数来编写新代码。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/q0gwD)。看到[红框](http://goo.gl/OWwr2)了吗？相反，您应该了解[准备好的语句](http://goo.gl/orrj0)并使用[PDO](http://goo.gl/TD3xh)或[MySQLi](http://php.net/mysqli)。如果你不能决定哪个，[这篇文章](http://goo.gl/YXyWL)会帮助你。如果您选择 PDO，[这里有很好的教程](http://goo.gl/b2ATO)。另请参阅[为什么我不应该在 PHP 中使用 mysql 函数？](http://goo.gl/J5jAo)

使用 PDO 代替上述代码的示例（也修复了拼写错误）：

```
try {
    $dbh = new PDO("mysql:host=localhost;dbname=cse", "root", "");
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
}
catch (PDOException $e) {
    echo "Error!  Could not connect to database: " . $e->getMessage() . "<br/>";
    die();
}

$stmt = $dbh->prepare("select * from studenttable where username=:username");
$stmt->bindValue(":username","saravanan");
$stmt->execute();

$calname = array();
$i = 0;
while ($rs = $stmt->fetch()) {
     $calname[$i]=$rs['name'];
     $i++;
}
$_SESSION['subject']=$calname; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T00:24:59.913

尝试添加`<pre>`标签以获得更清晰的视图 $_SESSION。

```
 echo '<pre>';
    print_r($_SESSION);
    echo '</pre>'; 
```

# python - 使用python计算fasta文件中每个基因特定字符的出现

> ID：15014492
> 
> 赞同：0
> 
> 时间：2013-02-21T23:56:09.207
> 
> 标签：python, counter, biopython

我有一个fasta文件如下：

```
>SO_0001 
MTKIAILVGTTLGSSEYIADEMQAQLTPLGHEVHTFLHPTLDELKPYPLWILVSSTHGAGDLPDNLQPFC
KELLLNTPDLTQVKFALCAIGDSSYDTFCQGPEKLIEALEYSGAKAVVDKIQIDVQQDPVPEDPALAWLA
QWQDQI
>SO_0002  
MTTPVDAPKWPRQIPYIIASEACERFSFYGMRNILTPFLMTALLLSIPEELRGAVAKDVFHSFVIGVYFF
PLLGGWIADRFFGKYNTILWLSLIYCVGHAFLAIFEHSVQGFYTGLFLIALGSGGIKPLVSSFMGDQFDQ
>SO_0003 
MTTDTIVAQATAPGRGGVGIIRISGDKATNVAMAVLGHLPKPRYADYCYFKSASGQVIDQGIALFFKGPN
SFTGEDVLELQGHGGQIVLDMLIKRVLEVEGIRIAKPGEFSEQAFMNDKLDLTQAEAIADLIDATSEQAA
KSALQSLQGEFSKEVHELVDQVTHLRLYVEAAIDFPDEEVD 
```

">" 后面的是基因 ID，">" 行后面的字母是相应的序列。我想解析文件并计算每个基因 ID 的序列中有多少个“C”。我希望我的输出文件是一个制表符分隔的文件，如下所示：

```
SO_0001    Number of C's
SO_0002    Number of C's
SO_0003    Number of C's 
```

等等...

我正在使用python，并认为通过将基因ID作为字典的键，这将是直接的，但我只使用制表符分隔的文件做到了这一点，我遇到了麻烦，因为每个序列的长度不同并且在基因ID之下。任何建议都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T00:16:29.137

搜索`biopython fasta`弹出[此页面](http://biopython.org/wiki/SeqIO)，并修改示例：

```
>>> from Bio import SeqIO
>>> with open("bio.fasta") as fp:
...         record_dict = SeqIO.to_dict(SeqIO.parse(fp, "fasta"))
... 
```

生成一个看起来像的数据字典

```
>>> import pprint
>>> pprint.pprint(record_dict)
{'SO_0001': SeqRecord(seq=Seq('MTKIAILVGTTLGSSEYIADEMQAQLTPLGHEVHTFLHPTLDELKPYPLWILVS...DQI', SingleLetterAlphabet()), id='SO_0001', name='SO_0001', description='SO_0001', dbxrefs=[]),
 'SO_0002': SeqRecord(seq=Seq('MTTPVDAPKWPRQIPYIIASEACERFSFYGMRNILTPFLMTALLLSIPEELRGA...FDQ', SingleLetterAlphabet()), id='SO_0002', name='SO_0002', description='SO_0002', dbxrefs=[]),
 'SO_0003': SeqRecord(seq=Seq('MTTDTIVAQATAPGRGGVGIIRISGDKATNVAMAVLGHLPKPRYADYCYFKSAS...EVD', SingleLetterAlphabet()), id='SO_0003', name='SO_0003', description='SO_0003', dbxrefs=[])} 
```

我们可以在其中访问记录并计算字符数：

```
>>> record_dict["SO_0002"]
SeqRecord(seq=Seq('MTTPVDAPKWPRQIPYIIASEACERFSFYGMRNILTPFLMTALLLSIPEELRGA...FDQ', SingleLetterAlphabet()), id='SO_0002', name='SO_0002', description='SO_0002', dbxrefs=[])
>>> record_dict["SO_0002"].seq
Seq('MTTPVDAPKWPRQIPYIIASEACERFSFYGMRNILTPFLMTALLLSIPEELRGA...FDQ', SingleLetterAlphabet())
>>> record_dict["SO_0002"].seq.count("C")
2 
```

所以：

```
>>> count = {name: record.seq.count("C") for name, record in record_dict.items()}
>>> count
{'SO_0002': 2, 'SO_0003': 1, 'SO_0001': 3} 
```

之后

```
>>> import csv
>>> with open("c_count.csv", "wb") as fp:
...     writer = csv.writer(fp, delimiter="\t")
...     for k in sorted(count):
...         writer.writerow([k, count[k]]) 
```

产生一个像

```
localhost-2:coding $ cat c_count.csv 
SO_0001 3
SO_0002 2
SO_0003 1 
```

建议：不要重写 FASTA 解析器，使用现有的解析器；并且不要重新实现`csv`模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:20:53.280

如果您已经拥有您发布的格式的数据并且不想深入研究专门的库，您可以尝试这样的事情。

```
with open('datafile.txt') as file:
  datalist = []
  for line in file:
    if line.startswith('>'):
      datalist.append([line.strip()[1:], ''])
    else:
      datalist[-1][1] += line.strip()
  for data in datalist:
    print(data[0], '   ', data[1].count('C')) 
```

# sql - 非单调 SQL ID 值

> ID：15014494
> 
> 赞同：2
> 
> 时间：2013-02-21T23:56:16.377
> 
> 标签：sql, ruby-on-rails, security

我被要求随机化所有 SQL 表的 ID 值，继续前进。原因是竞争对手无法根据我们 ID 值的增长来推断网站流量。

rails 中的默认设置是使用 ID 作为索引、外键和 URL 路径。这些 ID 线性递增。

生成伪随机整数作为所有表的 ID 的最简单方法是什么？有没有我可以扔进去的宝石？

注意：Rails 有时会遇到非整数值的问题，所以我想坚持使用整数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:46:34.973

它与 Rails 的关系不大，因为数据库的约定是使用自动增量主键。

对于新表，要防止 rails 使用此约定，您需要告诉它不要自动创建 id 列，而是自己创建它。

```
# example of creating a users table

create_table :users, id: false do |t|
  t.integer :id
  # other column definitions
end

add_index :users, [:id], unique: true, name: 'index_id_on_users' 
```

然后在您的模型中，您需要在创建记录之前明确设置它。

```
class User < ActiveRecord::Base
  before_create :set_id

  def set_id
    loop do
      self.id = rand(1<<32)
      break unless User.exists?(self.id)
    end
  end
end 
```

该循环只是确保您获得一个唯一的键，否则 db 约束将引发错误。仍然存在竞争条件，但如果您担心冲突而不是使用 UUID 或 SHA 之类的东西。

至于非整数键的问题，我自己从未遇到过任何问题，并且使用了 UUID 和 SHA 键，以及使用不是 id 列的主键，只需要更多的配置。

至于您当前的模型，您必须从所有 id 中删除自动增量，否则我很确定数据库会忽略您告诉它的任何内容。这显然可以通过简单地在 id 上发出列更改迁移来完成。

```
change_column :users, :id, :integer 
```

这里需要注意的是，您的 db/schema.rb 不会反映更改，使 db:schema:load 无法生成正确的数据库，尽管我可以说我从来没有使用过 rake 任务来加载数据库。只需使用 db:migrate 就可以了。

和往常一样，请确保在运行这样的命令之前备份您的数据库。我刚刚在我的开发环境中的 sqlite3 上运行它，它似乎工作正常。

**更新#1**

如果您只关心 URL，则另一种方法是使用 slug 而不是 ID。有一些 gem 可以通过一些配置和一些新列来处理这个问题。基本上这个想法是有一个列用作 url 参数。因此，当您使用 URL 助手而不是输出 /resources/1 时，它将输出 /resources/some-url-friendly-slug。这可以是像 UUID 或 SHA 这样神秘的东西，也可以是对 SEO 友好的东西。这取决于模型中是否有可以击打的东西。例如，如果它是 product_path 并且产品有标题，那么 slug 可能是产品标题的 url 友好版本，非常适合 SEO。

# django - django rest 框架序列化程序中的 id 字段

> ID：15014495
> 
> 赞同：23
> 
> 时间：2013-02-21T23:56:19.497
> 
> 标签：django, django-rest-framework

我正在使用 django rest 框架并创建一个简单的序列化程序，如下所示：

```
class PackageSerializer(serializers.HyperlinkedModelSerializer):

    class Meta:
        model = Package
        fields = ('id', 'url', 'title','location') 
```

但是我收到此错误：

```
KeyError at /cerberus/packages/
'id' 
```

为什么我无法将主键“id”作为序列化数据的一部分？感谢您的帮助！

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-22T08:59:32.850

`HyperlinkedModelSerializer`默认情况下不包括`id`。在 2.2 及更早版本中，您需要将其显式添加为字段...

```
class PackageSerializer(serializers.HyperlinkedModelSerializer):
    id = serializers.Field()

    class Meta:
        model = Package
        fields = ('id', 'url', 'title','location') 
```

从 2.3 开始，您可以简单地将 'id' 添加到`fields`选项中......

```
class PackageSerializer(serializers.HyperlinkedModelSerializer):
    class Meta:
        model = Package
        fields = ('id', 'url', 'title','location') 
```

从 3.x (< 3.3) 开始，如果要显式添加它而不使用选项，则必须使用`ReadOnlyField()`而不是...`Field()``fields`

```
class PackageSerializer(serializers.HyperlinkedModelSerializer):
    id = serializers.ReadOnlyField()

    class Meta:
        model = Package 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-12-08T22:27:13.497

根据[Django Rest 框架文档](https://www.django-rest-framework.org/api-guide/serializers/#customizing-multiple-update)：

> 默认隐式生成的 id 字段被标记为 read_only。这会导致它在更新时被删除。

因此，如果您需要`id`更新方法中的字段，则不能将其声明为只读，而是使用读写字段：

```
class PackageSerializer(serializers.ModelSerializer):
    id = serializers.IntegerField() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-01-31T21:51:08.407

我只是通过创建这个类对其进行了调整以使其更具可插入性：

```
class HyperlinkedModelSerializerWithId(serializers.HyperlinkedModelSerializer):
    """Extend the HyperlinkedModelSerializer to add IDs as well for the best of
    both worlds.
    """
    id = serializers.ReadOnlyField() 
```

然后，只需使用它来制作您的序列化程序，您就可以开始使用了。

# php - 如何在 CodeIgniter 的双 foreach 中删除双 URL 引用

> ID：15014498
> 
> 赞同：0
> 
> 时间：2013-02-21T23:56:37.783
> 
> 标签：php, javascript, jquery, codeigniter, foreach

所以我一直在编写 CodeIgniter 中的代码，它需要一个双 foreach 循环。但是，当我使用`site_url()`提供的功能时，这会产生不希望的结果。我已经在配置文件中进行了设置，以便正确使用它，事实上它在整个站点上都可以使用。我遇到的主要问题是因为它是一个双 foreach 循环，所以它会生成两次 site_url。所以它显示为`http://example.comhttp://example.com`.

foreach 循环的写法如下：

```
 <?php foreach($array1 as $key1): ?>
        <?php foreach($array2 as $key2): ?>
            <img src="<?= site_url() ?>" /> 
            // prints out "http://example.comhttp://example.com" in the img href
        <?php endforeach; ?>
    <?php endforeach; ?> 
```

问题是我如何获得它，以便它只显示`http://example.com`一次而不生成第二个。我必须在双 foreach 循环中执行此操作，否则脚本将不起作用。我正在尝试解决这个问题，以防止它重复`site_url`两次。如果您感到困惑，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:09:31.477

这是一种只回显 URL 一次的快速而肮脏的方法：

```
<?php 

$has_been_echoed = false;

?>
<?php foreach($array1 as $key1): ?>
    <?php foreach($array2 as $key2): ?>
        <?php if($has_been_echoed == false){ echo site_url(); $has_been_echoed = true; } ?>
    <?php endforeach; ?>
<?php endforeach; ?> 
```

*要在每一秒*循环内仅回显一次 site_url() ，请尝试以下方式：

```
<?php 

$has_been_echoed = false;

?>
<?php foreach($array1 as $key1): ?>
    <?php foreach($array2 as $key2): ?>
        <?php if($has_been_echoed == false){ echo site_url(); $has_been_echoed = true; } ?>
    <?php

    endforeach;

    $has_been_echoed = false;

    ?>
<?php endforeach; ?> 
```

# visual-studio - TFS 2012 不会将 TFS 服务器添加到“Team Foundation Server 列表”

> ID：15014500
> 
> 赞同：0
> 
> 时间：2013-02-21T23:56:52.520
> 
> 标签：visual-studio, tfs, visual-studio-2012

之前我使用的是 Azure 团队基础服务器，最近我尝试连接到不同的团队基础服务器。但我无法从 Azure 团队基础服务器切换到其他服务器。

当我连接到其他 TFS 服务器时，它不会显示登录文本框来输入我的凭据以将该服务器添加到*Team Foundation Server 列表*以便稍后连接。它只显示*插入智能卡*选项。

![在此处输入图像描述](../Images/fea12453b7dc160366c1a86fc0ed3d98.png)

即使取消选中“记住我的凭据”，我也没有得到登录文本框来输入我的凭据，因此我无法连接到该服务器。

我正在使用 Windows 7 和 Visual Studio 2012 Ultimate 版本。

禁用智能卡服务后，没有任何选项： ![在此处输入图像描述](../Images/e306b6e66bae43f06668e3b722690520.png)

这很奇怪，即使我重新安装了 Visual Studio，问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:00:48.447

尝试从 中删除保存的凭据`Credentials Manager`。

*   加载`Control Panel`
*   加载`User Accounts`
*   点击`Manage your Credentials`

查看`Windows Credentials`并删除与 Azure 帐户关联的所有已保存凭据。

# c - 我在哪里可以找到在 c 标准头文件（如 stdlib.h）中声明的函数的定义？

> ID：15014502
> 
> 赞同：3
> 
> 时间：2013-02-21T23:57:12.150
> 
> 标签：c, linux, gcc, header-files, glibc

我正在使用 Linux (ubuntu)。

我想阅读一些在头文件中声明的函数的函数定义，比如`stdlib.h`

我试图寻找`stdlib.c`但找不到。

谁能告诉我在哪里可以找到我系统上的相应代码文件。

如果我太天真，请原谅我。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T23:59:20.840

您需要下载[glibc](http://www.gnu.org/software/libc/)的源代码。您的发行版通常只附带 C 库的编译版本。另见[维基百科文章](http://en.wikipedia.org/wiki/GNU_C_Library)。

（例如，在类 Debian 系统上 try `apt-get source libc6`。）

glibc 不是类 Linux 系统的唯一 C 库，存在一些“竞争对手”。例如，[uClib](http://www.uclibc.org/)是一个非常小的替代方案，旨在用于嵌入式应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T00:47:59.543

对于大多数基于 Linux 的系统，标准库由 glibc 提供。您可以在此处浏览 git 存储库：

[http://sourceware.org/git/?p=glibc.git;a=tree](http://sourceware.org/git/?p=glibc.git;a=tree)

请注意，许多有趣的资源都隐藏在`sysdeps`树下，尤其是`sysdeps/unix/sysv/linux`类似的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T01:48:33.037

正如前面的答案所解释的，Linux 上的函数代码包含在`glibc`. 如果您需要在您的系统上运行的确切代码，那是我们唯一的递归。如果您只是对如何实现这些功能感兴趣，也许最好的办法是查看更简单的 libcs​​，查看[uClibc](http://www.uclibc.org/)，即嵌入式使用的微型 libc；寻找 Minix 的 libc 源代码（原始的，而不是当前的 Minix3）；也许[计划 9](http://plan9.bell-labs.com/plan9/)中的那个也合适。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-22T09:24:07.767

如果您在 ubuntu 中使用意味着您使用 vim editor.so 运行 C 程序，那么您想要哪个头文件，您在 Esc 模式下按 gf。例子

```
 #include<stdio.h>
     you placed in the cursor point s and press the gf then automatically  go to the standard library of stdio.h

                (or) 
```

使用命令更改目录

```
 cd /usr/include 
```

该目录包含在所有头文件中

# python - 为什么我的子流程调用失败？

> ID：15014505
> 
> 赞同：0
> 
> 时间：2013-02-21T23:57:30.230
> 
> 标签：python, subprocess, youtube-dl

我正在尝试使用子进程库。

`$youtube-dl http://www.youtube.com/watch?v=co5gy_2uOEY`在终端上按预期工作，但在 IDLE 中运行的以下代码片段似乎没有做任何事情。

```
> os.chdir('/home/andrew')
> line = 'http://www.youtube.com/watch?v=co5gy_2uOEY'
> yt_dl = subprocess.call(['youtube-dl',line])
1 
```

或者，我也尝试过：

```
> yt_dl = subprocess.Popen(['youtube-dl',line]) 
```

但这又回来`1`了，也没有做任何事情。这里发生了什么？

编辑：

用双引号换行使其工作，但现在这个子进程挂起。我尝试进行以下更改，但它再次不起作用：

```
yt_dl = ["youtube-dl","http://www.youtube.com/watch?v=co5gy_2uOEY"]
x = subprocess.Popen(yt_dl, stdout=subprocess.PIPE, stdin=subprocess.PIPE, shell=True)
stdout, stderr = x.communicate() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:01:51.237

不知道为什么你没有得到关于`http`未定义的错误，但你应该使用：

```
line = "http://www.youtube.com/watch?v=co5gy_2uOEY" 
```

将字符串传递给`subprocess.call`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T00:41:27.983

它挂起，因为它有效。您可以检查运行输出`idle`的终端。`youtube-dl`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-22T00:05:49.677

您是否尝试添加 shell=True？（尽管通常不鼓励这样做。）

> yt_dl = subprocess.Popen(['youtube-dl',line] shell=True)

# android - PagerAdapter 的页面更改回调

> ID：15014512
> 
> 赞同：14
> 
> 时间：2013-02-21T23:58:15.817
> 
> 标签：android, adapter

我正在尝试开发一个应用程序，该应用程序将显示数字 1-10 以及该数字的声音。

使用 mobile.tutsplus 中的示例进行水平滑动，我已经达到了所有数字都正确显示`1`但当我们从`2`. （它最初是在我的活动以 开头时出现的`1`）。也不会来`10`。

在解决了上一个声音 for`1`和`2`会立即出现的问题之后，我现在明白`instantiateItem()`将调用它来预取下一个条目。

我想知道我应该在什么时候播放声音？目前它已经完成，`instantiateItem()`这就是为什么我没有听到它的原因`1`and `10`。我以为我可以做到，`finishUpdate()`但我看到它被多次调用。

根据培训指南，`FragmentStatePagerAdapter`应该使用这样的对象集合，我将尝试移至该对象。但我真的很想让它正常工作。

正如您已经猜到的那样，我是一个新手，这是我的第一个应用程序。如果需要，我可以粘贴代码。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-22T00:32:11.293

ViewPager 有一个 setOnPageChangeListener() 方法，它允许您设置一个对象，当新页面成为用户正在查看的页面时，该对象将获得回调。

这样的事情会让你走上正确的道路：

```
mPageChangeListener = new OnPageChangeListener() {

    @Override
    public void onPageScrollStateChanged(int arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onPageSelected(int pos) {
        playSoundForPage(pos);
    }

};
yourViewPager.addOnPageChangeListener(mPageChangeListener); 
```

但是，您必须将其放入拥有您的 ViewPager（活动或片段）而不是您的适配器的任何地方。

# haskell - 参数化的 Maybe monad

> ID：15014517
> 
> 赞同：2
> 
> 时间：2013-02-21T23:58:45.663
> 
> 标签：haskell, monad-transformers

我把 Monad、ReaderT 弄得一团糟……来执行“简单？” 行为。

我想将测试功能散布到`Maybe`转换（`Maybe`或另一个个性化的单子）中。

确切地说，我想避免`t`调用，创建某种单子（我认为是单子）

```
doCalculus :: (Int -> Bool) -> Int -> Maybe Int
doCalculus f a = do
  b <- t $ a + 1
  c <- t $ 2 * b
  d <- t $ a + b + c
  return d
  where t = if f n then Just n else Nothing 
```

例子

```
test :: Int -> Bool
test n = not (n `elem` [3, 7, 9])

*Main> doCalculus test 2
Nothing
*Main> doCalculus test 3
Just 15
*Main> 
```

我正在尝试做一些单子喜欢`ReaderT`执行一些喜欢

```
runMaybeTest doCalculus test 
```

用作

```
doCalculus :: Int -> Maybe' Int
doCalculus a = do
  b <- a + 1
  c <- 2 * b
  d <- a + b + c
  return d

perform = runMaybe' doCalculus test 
```

但我不能。

（当然，`Int`类型将泛型为 monad）

谢谢你的任何提示！

**=== 更新 1 ===**

我能做到！:) ...但不实用（我认为）:(

我改编了一篇精彩的[Eric Kidd 帖子](http://www.randomhacks.net/articles/2007/03/15/data-set-monad-haskell-macros)

```
import Prelude hiding (Just, Nothing, return, (>>=))

class Tester a where
  test :: a -> Bool
  test _ = True

data MMaybe a = Nothing | Just a deriving (Eq, Show)

class Monad1 m a where
  return :: a -> m a
  fail :: String -> m a

class (Monad1 m a, Monad1 m b) => Monad2 m a b where
  (>>=) :: m a -> (a -> m b) -> m b

instance (Tester a) => Monad1 MMaybe a where
  return = Just
  fail _ = Nothing

instance (Tester a, Tester b) => Monad2 MMaybe a b where
  Nothing >>= _ = Nothing
  (Just x) >>= f = if test x then f x else Nothing

instance Tester Int where
  test n = not $ n `mod` 2 == 0 && n `mod` 3 == 0

test1 :: Int -> MMaybe Int
test1 n =
  return n >>= \a ->
  return (a + 3) >>= \b ->
  return (a + b)

test2 = map test1 [1..20] 
```

可能的（重要）问题是：

1.  是可用的单子吗？
2.  do符号在哪里？
3.  仅适用于将测试功能定义为唯一类型（新测试功能需要新类型）

但我可以将测试函数包装成伪单子......（它的东西）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T01:56:48.043

看起来您想要 (a) 对一些转换进行排序和 (b) 在各个阶段短路谓词故障。整个过程在“包含”类型（此处为 Int ）和谓词上是参数化的。

让我们潜入水中。

## 一世

我们在这里控制的主要影响是失败，因此`Maybe`是一个很好的起点。它的`Monad`实例让我们可以组合各种`Maybe`生成计算。

```
-- some pure computations
f, g, h :: a -> a

-- ... lifted and sequenced!
may :: a -> Maybe a
may = (return . f) >=> (return . g) >=> (return . h) 
```

这是一种非常正式的写作方式，`(h . g . f)`因为我们只是使用完全一般的“单子”（真的，`Kleisli`）组合，没有特殊效果。

## 二、

给定一个谓词`p :: a -> Bool`，我们可以开始失败。第一种方法是使用`Maybe`'`MonadPlus`实例和`guard :: MonadPlus m => Bool -> m ()`.

```
\a -> do x <- return (f a)
         guard (p x)
         y <- return (g x)
         guard (p y)
         z <- return (h y)
         guard (p z)
         return z 
```

但是我们显然在这里有一个相当重复的模式——在纯函数的每个“组合边界”上，我们执行我们的谓词并且可能会失败。就像你想象的那样，这是一个强大的`Reader`-like 和`Maybe`-like 效果的混合，但它没有与`Monad`它们或它们的堆栈完全相同的 ic 语义。我们可以用其他方式捕捉它吗？

## 三、

好吧，让我们试着把它们包起来。

```
newtype OurMonad a = OM { getOM :: MaybeT (Reader (a -> Bool)) a } 
```

现在`OurMonad`是一个`newtype`围绕 monad 变压器堆栈，包括`Reader`和`Maybe`. 我们将能够利用这一点来编写一个高度通用的“运行”函数，`runOurMonad :: (a -> Bool) -> OurMonad a -> Maybe a`.

或者，更确切地说，感觉就像我们可以，对吧？我想争辩说我们不能，实际上。原因是为了编写一个`Monad`实例，我们必须有一个`Functor`实例*，这意味着给定任何函数映射`a -> b`我们需要能够映射`OM a -> OM b`。问题是我们通常不知道如何泛化我们的谓词！我不知道怎么写函数`(a -> b) -> (a -> Bool) -> b -> Bool`，除非我们也有函数`b -> a`**。

因此，我们一直试图将其推广到`Monad`. 我不认为它是一个。

## 四。

但是您的示例实际上并不需要 Monad 的全部通用性——我们知道我们所有的纯转换都是`Endo`，即 type `a -> a`。这是我们的单个谓词就足够的一种方式！我们可以利用类型同质性将`Endo`s 的列表写成`[a -> a]`。因此，让我们更直接地定义我们需要的内容作为`fold`该列表的内容：

```
stepGuarded :: (a -> Bool) -> a -> [a -> a] -> Maybe a
stepGuarded pred = foldM $ \a f -> mfilter pred (return $ f a)

stepGuarded (`elem` [3, 7, 9]) 3 [ (+1), (*2) ] 
-- Nothing

stepGuarded (`elem` [4, 8, 9]) 3 [ (+1), (*2) ]
-- Just 8 
```

* nb 技术上不正确，但理论上和实践上，如果我们不能编写`Functor`实例，那么我们也会在编写实例时遇到困难`Monad`。

** 从技术上讲，这仍然是一个 categorical `Functor`，它只是逆变的，而`Functor`假设`Monad`函子是协变的。我们可以将所有这些概括为具有同构上的仿函数，Edward Kmett 将这些称为`ExFunctor`s 我认为您可以改为定义`xmap :: (a -> b) -> (b -> a) -> f a -> f b`，这很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:36:06.203

我认为你需要做的是在你的 do 块中使用“let”。

```
doCalculus :: Int -> Maybe Int
doCalculus a = do
  let b = a + 1
  let c = 2 * b
  let d = a + b + c
  return d 
```

或者

```
doCalculus :: Int -> Maybe Int
doCalculus a = Just d where
  b = a + 1
  c = 2 * b
  d = a + b + c 
```

并一起跳过 do 符号。

# android - APK 安装失败：[INSTALL_FAILED_VERIFICATION_FAILURE]

> ID：15014519
> 
> 赞同：76
> 
> 时间：2013-02-21T23:58:59.217
> 
> 标签：android, apk

我正在尝试在运行 Jelly Bean (4.2) 的 AOSP 构建的设备上安装 APK。

当我“adb install my.apk”时，出现错误：

[INSTALL_FAILED_VERIFICATION_FAILURE]

我试过使用“testsign.jar”来“签名”apk，但它不会改变结果

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2016-01-07T22:05:45.793

您需要在 ADB 安装期间禁用 APK 验证。如果安全性中的设置显示为灰色或无法正常工作，则应尝试对设备进行炮击，并且根据您的 API 级别（全局、系统、安全）运行的设置数据库中的设置

`$ adb shell settings put global verifier_verify_adb_installs 0`

如果您可以实际设置它，它将阻止通过 ADB 检查 APK。

有时您还需要使用以下方法禁用包验证器：

`$ adb shell settings put global package_verifier_enable 0`

在 KitKat 上，您可以在此处看到这些设置位于 Global 数据库中：

[http://androidxref.com/4.4.2_r2/xref/frameworks/base/core/java/android/provider/Settings.java#5015](http://androidxref.com/4.4.2_r2/xref/frameworks/base/core/java/android/provider/Settings.java#5015)

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2018-02-05T07:01:00.287

转到*开发人员设置*并禁用通过 USB**验证应用程序。**然后你就可以毫无问题地安装*.apk 了。*

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2018-12-20T00:29:40.370

在您的手机中，转到：

设置/开发者选项/通过 USB 验证应用程序

并禁用它。

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2018-07-03T12:19:01.227

这是有用的，我试图在带有 android 6.0 的设备上安装

1.  `Settings > Developer Options > Then Turn off Verify Apps over USB`查看第一张图片

然后

2.  `Settings > Security > Then Turn on Unknown sources`

最后

3.  不要忘记卸载您的应用程序并重新开始。

必须`Settings > Developer Options > Then Turn off Verify Apps over`

`Settings > Security > Then Turn on Unknown sources`

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-10-02T17:10:54.413

**更新答案：在最近的 Android 更新中，由于****Play Protect**的原因，现在在安装 APK 期间可能会显示以下错误：

```
Failed to finalize session : INSTALL_FAILED_VERIFICATION_FAILURE
Session 'app': Error Installing APKs 
```

为了解决这个问题（出于开发者的目的），您可以禁用 Play Protect，如下所示：[安装应用程序被 Play Protect 阻止](https://stackoverflow.com/a/51797048 "安装应用程序被播放保护阻止")。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2020-03-26T06:09:32.273

实际问题是 Google play 阻止了您的应用！你需要关闭它

1.  去游戏店
2.  打开抽屉并选择 Play Protect
3.  打开设置并关闭使用播放保护扫描应用程序和改进有害应用程序检测
4.  现在轮到你了。重建您的应用程序并启动它！祝你好运！

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-02-22T00:11:13.970

您必须允许未签名的应用程序。安装被 Android 阻止。在设置中允许安装非市场应用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-06-06T15:20:53.557

上面的建议都不适合我，但是工厂重置设备就可以了。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-04-04T00:12:08.227

除了“settings put global verifier_verify_adb_installs 0”之外，我还需要将 package_verifier_enable 设置为 0 以使其工作。

例如

```
adb shell

settings put global package_verifier_enable 0 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-05-21T17:15:55.053

删除所有目录->`{.gradle, .idea, app/build }`并再次安装为我工作

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-06-20T12:09:11.980

就像有人说的那样，你需要一个签名的apk才能运行它。为了有一个签名的apk，右键单击你的项目>Android工具>导出签名的应用程序包。然后会提示你找到你的密钥库，但是如果你没有，您可以创建一个。按照 eclipse 的指导执行后续步骤。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-10-29T06:50:33.493

您可以在没有任何类似说明的情况下执行此操作：转到设备上的设置，然后进行开发人员设置并禁用通过 USB 确认应用程序的选项。（用谷歌翻译翻译）

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-09-04T09:26:05.790

在我的 PC 上重新安装操作系统后，我在 Android Studio 中发生了这种情况——我试图在平板电脑上测试构建。最终对我有用的只是卸载平板电脑上的应用程序（由以前的安装构建）。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-08-23T13:47:43.297

在开发人员设置中打开应用程序调试解决了我的问题

# c# - LINQ join on columns AND nullable variable

> ID：15014521
> 
> 赞同：4
> 
> 时间：2013-02-21T23:59:04.257
> 
> 标签：c#, sql, linq

I am trying to join tables using LINQ by matching columns where a column in the joined table is equal to a variable or the variable is null (at which point the join still needs to happen just not on that field).

My LINQ is something like:

```
var data = (
    from lt in cxt.CmsPageRow
    join page in cxt.CmsPage on new { lt.CmsPageID, cmsSiteID.Value } equals new { page.CmsPageID, page.CmsSiteID }
    ... 
```

cmsSiteID is a nullable INT.

I cannot compile my code as it is complaining about "Type inference failed in the call to 'Join'."

On top of that I need to only join on page.CmsSiteID when cmsSiteID is not null. If cmsSiteID is null then the join on lt.CmsPageID still needs to happen.

*** EDIT ***

The question has kind of changed now. I can get it to do what I want by using a WHERE clause on the join in my LINQ.

```
join page in cxt.CmsPage.Where(p=>(cmsSiteID==0||p.CmsSiteID==cmsSiteID)) on lt.CmsPageID equals page.CmsPageID 
```

However, this still runs slow. If I change the parameter passed through to a literal it executes instantly.

Slow runner

```
(@p__linq__1 = 0 OR [Extent2].[CmsSiteID] = @p__linq__1) 
```

Fast runner

```
(267 = 0 OR [Extent2].[CmsSiteID] = 267) 
```

Is there a way to speed this up?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:12:23.230

`join` in LINQ assumes an inner join (no nulls). Try pulling the null stuff out into separate `where` clauses. I think something along these lines should work for what you're describing.

```
from lt in cxt.CmsPageRow
join page in cxt.CmsPage on lt.CmsPageID == page.CmsPageID
where cmsSiteID == null || 
      (cmsSiteID != null && (page.CmsSiteID == null || page.CmsSiteId == cmsSiteID.Value))
select ... 
```

### Update

I didn't realize that performance was an issue for you. In that case, I'd suggest creating a different query structure based on values that are known at run-time and don't depend on individual rows:

```
var rows = 
    from lt in cxt.CmsPageRow
    join page in cxt.CmsPage on lt.CmsPageID == page.CmsPageID
    select new {lt, page};
if (cmsSiteID != null)
{
    rows = rows.Where(r => r.page.CmsSiteID == null || 
                           r.page.CmsSiteId == cmsSiteID.Value));
}
var data = rows.Select(...); 
```

Also, if your data context is set up right, you should be able to use navigation properties to simplify your code somewhat.

```
var rows = ctx.CmsPageRow;
if (cmsSiteID != null)
{
    rows = rows.Where(r => r.CmsPage.Any(p => p.CmsSiteID == null || 
                               p.CmsSiteId == cmsSiteID.Value));
}
var data = rows.Select(...); 
```

# asp.net - XSLT 图像路径不起作用

> ID：15014529
> 
> 赞同：1
> 
> 时间：2013-02-21T23:59:34.410
> 
> 标签：asp.net

我有一个结构如图所示的项目。该项目在重置密码时发送电子邮件。我有一个包含 .xslt 文件的文件夹 XSLT。我在 Common 文件夹中有页眉、页脚和样式，其中 ResetPassword.xslt 位于 XSLT 文件夹下。

重置密码.xslt：

```
<?xml version="1.0"?>
  <xsl:include href="Common/Header.xslt"/>

  <xsl:output method="html"/>
  <xsl:template match="/">
    <html>
      <head>
        <xsl:call-template name="Style"/>
      </head>
      <body>
        <table id="resetPasswordBody">
          <tr>
            <td>
              <xsl:call-template name="Header"/> 
```

如您所见，我在 ResetPassword.xslt 模板中调用了 Header 模板。在标题模板中，我有以下内容：

```
 <?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template name="Header">   

          <img src="img\banner.jpg"/>     

    </xsl:template>
</xsl:stylesheet> 
```

问题是当我在 Visual Studio 中运行这个项目时（通过右键单击 -> 在浏览器中显示），图像不会出现。我有点努力找出我可以在标题 xslt 模板中提及的路径，以便banner.jpg 可以出现。我已经尝试了所有可能的组合。

唯一有效的路径是完整路径，即 C:\XXXXXX\xxxxx

但问题是当部署在服务器上时，完整路径将不是有效路径。

我很困惑，任何帮助都会很棒。

提前致谢。

![项目结构](../Images/a1ae5f21370e9b6cb46fb21193f3a804.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:08:30.077

您正在从模板调用文件，它是 2 到达图像

```
../../img/banner.jpg

or img/banner.jpg 
```

# c# - 控制台互斥体怪癖

> ID：15014531
> 
> 赞同：0
> 
> 时间：2013-02-21T23:59:42.610
> 
> 标签：c#

我发现了一个相当奇怪的问题，我不明白为什么。我的初衷是使用互斥锁来防止打开控制台应用程序的多个实例。为此，我有这样的事情：

```
[STAThread]
static void Main(string[] args)
{
    // Attempt to create mutex
    Mutex mutex = new Mutex(true,MUTEX_NAME);

    try {
        if (!mutex.WaitOne(0,true)) return;

        ...
    } finally {
        // Close mutex
        mutex.Close();
    }

    // If debugging, allow for read-key pause
    #if DEBUG
    Console.ReadKey();
    #endif
} 
```

我希望这样，如果它不能等待互斥锁，它将立即从`Main()`方法中返回，同时尊重 finally 块。

但是，看来我可以使用此代码运行多个实例，它总是可以等待互斥体，而我总是在这`ReadKey()`一点上结束。

但是，如果我将代码更改为：

```
[STAThread]
static void Main(string[] args)
{
    // Attempt to create mutex
    Mutex mutex = new Mutex(true,MUTEX_NAME);

    try {
        if (!mutex.WaitOne(0,true)) return;

        ...

        // If debugging, allow for read-key pause
        #if DEBUG
        Console.ReadKey();
        #endif
    } finally {
        // Close mutex
        mutex.Close();
    }
} 
```

然后这可以按预期工作，并且只允许一个实例。

我感兴趣的是为什么第二个代码块在第一个代码块上工作，据我所知，它们应该都可以工作，但它们似乎没有。我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:27:57.957

在您的第一个示例中，您创建互斥体，等待它，它将立即返回，然后继续销毁它，然后等待按键。由于您销毁了互斥锁，下一个实例将不会找到它并重新创建它。

在您的第二个示例中，您在等待按键时保留互斥锁，从而防止第二个实例启动。

# php - 检测服务器过载以限制 mysql 查询

> ID：15014536
> 
> 赞同：0
> 
> 时间：2013-02-22T00:00:05.067
> 
> 标签：php, c++, mysql, service, apache2

我正在编写 c++ 服务，它每 1 秒不断地在 mysql 服务器上使用 LIMIT 1 进行 SELECT 查询，一些东西计算然后进行 INSERT 并且这个循环永远永远。

我想检测服务器过载以使 SELECT 具有更大的 LIMIT，例如 LIMIT 10 和更大的 inetrvals，例如每 5 秒左右。不确定我的解决方案是否会减轻服务器过载。

我的问题是如何检测这些重载，我不确定我所说的重载是什么意思 :) 它可能是任何东西，但我的应用程序是 php（聊天）中的 Web 应用程序，因此可以在 Apache2 端或 mysql 端检测到过载，或检测有多少用户在时间间隔内进行了多少输入（聊天消息）。我不知道 ：/

谢谢！

**编辑：**好的，我用我的 C++ 应用程序制作了一个套接字服务器，而且它真的很快。现在我正在为内存泄漏而苦苦挣扎，但那是另一回事了。

所以感谢**@brianbeuning**对我的问题有帮助的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:30:09.367

另一种方法是缓冲应用程序中的数据并使用各种连接池来管理负载。保留需要插入的数据的滚动缓冲区，并根据缓冲区的大小管理“限制”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T00:32:03.540

更好地解决永远循环的问题，这不是一个好主意。

如果确实必须使用该循环，则使用一些缓存技术。

为了检测“过载”（我称之为 MySQL CPU 使用率高），请尝试调用操作系统支持的外部命令。

例如，如果您在**Linux**上使用它，请使用**ps**命令。

* * *

**编辑：**

我现在意识到你正在编程聊天服务器。使用 MySQL 作为中间人并不是一个好主意。尝试在不使用 MySQL 的情况下解决此问题，然后如果您需要保存聊天记录，请偶尔将其保存到 MySQL（例如，每 10 秒左右）。

我敢打赌，现在只有 20 个密集型用户会占用 CPU。

尝试直接进行客户端到客户端的通信，而不需要服务器（仅使用服务器在 2 个客户端之间建立通信）。

# javascript - 未捕获的类型错误：对象原型在 ember.js 上可能只是一个对象或 null

> ID：15014540
> 
> 赞同：0
> 
> 时间：2013-02-22T00:00:38.373
> 
> 标签：javascript, ember.js

我正在尝试开始使用 ember.js，所以我尽可能地遵循这些教程。我目前有这个 HTML：

```
<!doctype html>
<html>
 <head>
  <script type="text/x-handlebars" data-template-name="application">
   Test
 </script>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
   <script src="ember-1.0.0-rc.1.min.js"></script>
   <script src="handlebars.runtime.js"></script>
   <script src="app.js"></script>
 </head>

</html> 
```

app.js 在哪里：

```
App = Em.Application.create(); 
```

在 Chrome 中我得到：

```
Uncaught TypeError: Object prototype may only be an Object or null ember-1.0.0-rc.1.min.js:18 
```

我哪里错了？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:24:05.780

一些建议：

*   在此处按照我的说明进行操作：[Ember.js 缺少模块？](https://stackoverflow.com/questions/14801865/ember-js-missing-modules/14802112#14802112)
*   尊重`script`标签的顺序（jquery -> 车把 -> ember）
*   创建一个`body`标签，ember 需要能够写入它
*   将标签放在标签`script`之前`</body>`

导致：

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>bitshiftcop.com</title>
  </head>
  <body>
    <script type="text/x-handlebars" data-template-name="application">
      Test
    </script>    

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="handlebars-1.0.0-rc.3.js"></script>
    <script src="ember-1.0.0-rc.1.js"></script>
    <script src="app.js"></script>
  </body>
</html> 
```

# iphone - 在软键盘启动时禁用滚动

> ID：15014544
> 
> 赞同：0
> 
> 时间：2013-02-22T00:01:03.103
> 
> 标签：iphone, ios, jquery-mobile, web

我已经为此苦苦挣扎了好几天。我的移动应用程序中有一个非常简单的页面，带有 textarea 输入，当我单击它时，软键盘会出现并将我的页面标题滚动到视图之外。有没有办法防止这种默认滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:55:57.887

Your是Phones的默认功能，当用户输入完成后屏幕自动向后滚动，请检查它，如果有效请回复。

# php - Jquery 连接到 Internet 消息

> ID：15014554
> 
> 赞同：0
> 
> 时间：2013-02-22T00:01:39.423
> 
> 标签：php, jquery, html, ajax, connection

如果用户连接到互联网，我有一个 Jquery 功能可以完美运行

```
$("a[id ^= 'toggle']").click(function(event){
  event.preventDefault();
  $("div [id='replypost_"+$(this).attr('id').replace('toggle_','')+"']").toggle();
}); 
```

这个标签是触发它的原因

```
<a href= '' id ='toggle_$id'><img src='design/reply.png' class='like'/><h4 class='liketext'>Send Message</h4></a> 
```

我的问题是，如果用户没有连接到互联网，那么当`<a>`点击标签时，页面只会刷新，但当用户连接到互联网时，它可以完美运行。有没有办法检查用户是否连接到互联网，如果连接不活跃，会提醒他们一条消息？

# php - 可以在 Wordpress 摘录中将变量传递给 add_filter

> ID：15014557
> 
> 赞同：2
> 
> 时间：2013-02-22T00:01:57.423
> 
> 标签：php, wordpress, function

试图让它工作，甚至可以传递这样的变量吗？

```
function excerpt_read_more($output, $text) {
    global $post;
    return $output . '<a href="'. get_permalink($post->ID) . '" class="readmore">'.$text.'</a>';
}
add_filter('the_excerpt', 'excerpt_read_more'); 
```

我试图能够做这样的事情

```
<?php the_excerpt('Read More...'); ?> 
```

因为我希望它在整个网站上说不同的东西。例如，阅读这篇文章，继续阅读这篇文章，查看这个食谱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:30:59.577

过滤器[**`the_excerpt`**](http://core.trac.wordpress.org/browser/tags/3.5.1/wp-includes/post-template.php#L248)只有一个参数，因此您尝试的操作是不可能的。

一种选择是使用全局变量：

```
function excerpt_read_more( $output ) {
    global $post, $my_read_more;
    return $output 
        . '<a href="'
        . get_permalink( $post->ID ) 
        . '" class="readmore">' 
        . $my_read_more 
        . '</a>';
}
add_filter( 'the_excerpt', 'excerpt_read_more' ); 
```

然后，像这样调用函数：

```
<?php
global $my_read_more;
$my_read_more='read this post'; 
the_excerpt();
?>

<?php
global $my_read_more;
$my_read_more='view this recipe'; 
the_excerpt();
?> 
```

* * *

另一种解决方案是使用自定义字段：[***如何自定义阅读更多链接***](https://wordpress.stackexchange.com/q/56048/12615)。

为了可用性，创建一个包含所有“阅读更多”选项的元框，因此这是在发布后定义的：[***添加一个复选框到发布屏幕，为标题添加一个类***](https://wordpress.stackexchange.com/q/61041/12615)。

# nhibernate - Nhibernate：一对多关系导致 GenericADOException

> ID：15014560
> 
> 赞同：1
> 
> 时间：2013-02-22T00:02:25.343
> 
> 标签：nhibernate

我遇到了以下异常，我很确定这与类别和产品之间的一对多关系有关。怎么了？

**Nhibernate.Exceptions.GenericADOException** {“无法执行批处理命令。[SQL：SQL 不可用]”}

**InnerException:** {"INSERT 语句与 FOREIGN KEY 约束 \"FK1F94D86A1B57B09E\" 冲突。冲突发生在数据库 \"SimpleNhibernate\"、表 \"dbo.Category\"、列 'Id' 中。\r\n语句有已终止。"}

**程序.cs**

```
class Program
{
    private static ISessionFactory _sessionFactory;
    private static Configuration _configuration;

    static void Main(string[] args)
    {

        _configuration = new Configuration();
        _configuration.Configure();
        _configuration.AddAssembly(typeof(Product).Assembly);
        _sessionFactory = _configuration.BuildSessionFactory();

        var schema = new SchemaExport(_configuration);
        schema.Drop(true, true);
        schema.Create(true, true);

        AddCategory(new Category("Phone"));
        AddCategory(new Category("Smart Phone"));

        using (ISession session = NHibernateHelper.OpenSession())
        {
            var categories = session.QueryOver<Category>().List();                
            foreach (var category in categories)
            {
                using (ITransaction transaction = session.BeginTransaction())
                {
                    session.Save(new Product("iPhone", category));      
                    transaction.Commit(); 

                }
            }
        }

    }

    private static void AddCategory(Category product)
    {
        using (ISession session = NHibernateHelper.OpenSession())
        using (ITransaction transaction = session.BeginTransaction())
        {
            session.Save(product);
            transaction.Commit();
        }
    }
} 
```

**类别.cs**

```
using System;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Iesi.Collections.Generic;
namespace SimpleNhibernate
{
    public class Category
    {
        public virtual Guid Id { get; set; }
        public virtual string Name { get; set; }
        public virtual ISet<Product> Products { get; set; }
        public virtual bool Discontinued { get; set; }

        public Category() { }

        public Category(string name)
        {
            Name = name;
        }
    }
} 
```

**类别.hbm.xml**

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="SimpleNhibernate"
                   namespace="SimpleNhibernate">

  <class name="Category">
    <id name="Id">
      <generator class="guid" />
    </id>
    <property name="Name" />
    <set name="Products" inverse="true" >
      <key column="Id" />
      <one-to-many class="Product"/>
    </set>
    <property name="Discontinued" />
  </class>

</hibernate-mapping> 
```

**产品.hbm.xml**

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" 
                   assembly="SimpleNhibernate" 
                   namespace="SimpleNhibernate">

  <class name="Product">
    <id name="Id">
      <generator class="guid" />
    </id>
    <property name="Name" />
    <many-to-one name="Category" column="CategoryID"></many-to-one>
    <property name="Discontinued" />
  </class>

</hibernate-mapping> 
```

**产品.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace SimpleNhibernate
{
    public class Product
    {
        public virtual Guid Id { get; set; }
        public virtual string Name { get; set; }
        public virtual Category Category { get; set; }
        public virtual bool Discontinued { get; set; }

        public Product() { }
        public Product(string name, Category category)
        {
            Name = name;
            Category = category;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T08:23:27.183

负责映射（双向）的列`CategoryID`在*产品*表中

所以`set`应该有这样的钥匙

```
 <class name="Category">
    ...
    <set name="Products" inverse="true" >
      <key column="CategoryID" /> // instead of Id 
```

与产品映射中的相同

```
<many-to-one name="Category" column="CategoryID"></many-to-one> 
```

# zend-framework2 - 作曲家自动加载在生产服务器上不起作用

> ID：15014561
> 
> 赞同：1
> 
> 时间：2013-02-22T00:02:29.123
> 
> 标签：zend-framework2, composer-php

我已经使用 composer 在本地设置了一个项目来自动加载我的供应商和模块。这是在运行 Nginx 的 Windows XP 机器上完成的。

当我将所有内容同步到生产服务器并运行 LAMP 时，自动加载器停止工作，并且我调用的每个类都找不到。

由于这是一个共享主机，我无法运行 composer.phar update 来尝试刷新类映射命名空间。

任何人都知道可能会发生什么？

+信息：

```
<?php

// autoload_namespaces.php generated by Composer

$vendorDir = dirname(__DIR__);
$baseDir = dirname(dirname($vendorDir));

return array(
    'Zend\\' => $vendorDir . '/zendframework/zendframework/library/',
    'ZendTest\\' => $vendorDir . '/zendframework/zendframework/tests/',
    'Symfony\\Component\\Console' => $vendorDir . '/symfony/console/',
    'Doctrine\\ORM' => $vendorDir . '/doctrine/orm/lib/',
    'Doctrine\\DBAL' => $vendorDir . '/doctrine/dbal/lib/',
    'Doctrine\\Common' => $vendorDir . '/doctrine/common/lib/',
    'DoctrineORMModule\\' => $vendorDir . '/doctrine/doctrine-orm-module/src/',
    'DoctrineORMModuleTest\\' => $vendorDir . '/doctrine/doctrine-orm-module/tests/',
    'DoctrineModule\\' => $vendorDir . '/doctrine/doctrine-module/src/',
    'DoctrineModuleTest\\' => $vendorDir . '/doctrine/doctrine-module/tests/',
    'Application\\' => $baseDir . '/module/Application/src',
);

<?php

// autoload_classmap.php generated by Composer

$vendorDir = dirname(__DIR__);
$baseDir = dirname(dirname($vendorDir));

return array(
); 
```

$loader 返回：

```
Composer\Autoload\ClassLoader Object
(
    [prefixes:Composer\Autoload\ClassLoader:private] => Array
        (
            [Zend\] => Array
                (
                    [0] => /home/XXXX/public_html/vendor/zendframework/zendframework/library/
                )

            [ZendTest\] => Array
                (
                    [0] => /home/XXXX/public_html/vendor/zendframework/zendframework/tests/
                )

            [Symfony\Component\Console] => Array
                (
                    [0] => /home/XXXX/public_html/vendor/symfony/console/
                )

            [Doctrine\ORM] => Array
                (
                    [0] => /home/XXXX/public_html/vendor/doctrine/orm/lib/
                )

            [Doctrine\DBAL] => Array
                (
                    [0] => /home/XXXX/public_html/vendor/doctrine/dbal/lib/
                )

            [Doctrine\Common] => Array
                (
                    [0] => /home/XXXX/public_html/vendor/doctrine/common/lib/
                )

            [DoctrineORMModule\] => Array
                (
                    [0] => /home/XXXX/public_html/vendor/doctrine/doctrine-orm-module/src/
                )

            [DoctrineORMModuleTest\] => Array
                (
                    [0] => /home/XXXX/public_html/vendor/doctrine/doctrine-orm-module/tests/
                )

            [DoctrineModule\] => Array
                (
                    [0] => /home/XXXX/public_html/vendor/doctrine/doctrine-module/src/
                )

            [DoctrineModuleTest\] => Array
                (
                    [0] => /home/XXXX/public_html/vendor/doctrine/doctrine-module/tests/
                )

            [Application\] => Array
                (
                    [0] => /home/XXXX/public_html/module/Application/src
                )

        )

    [fallbackDirs:Composer\Autoload\ClassLoader:private] => Array
        (
        )

    [useIncludePath:Composer\Autoload\ClassLoader:private] => 
    [classMap:Composer\Autoload\ClassLoader:private] => Array
        (
        )

) 
```

++信息：

```
spl_autoload_functions:

Array
(
    [0] => Array
        (
            [0] => Composer\Autoload\ClassLoader Object
                (
                    [prefixes:Composer\Autoload\ClassLoader:private] => Array
                        (
                            [Zend\] => Array
                                (
                                    [0] => /home/XXXX/public_html/vendor/zendframework/zendframework/library/
                                )

                            [ZendTest\] => Array
                                (
                                    [0] => /home/XXXX/public_html/vendor/zendframework/zendframework/tests/
                                )

                            [Symfony\Component\Console] => Array
                                (
                                    [0] => /home/XXXX/public_html/vendor/symfony/console/
                                )

                            [Doctrine\ORM] => Array
                                (
                                    [0] => /home/XXXX/public_html/vendor/doctrine/orm/lib/
                                )

                            [Doctrine\DBAL] => Array
                                (
                                    [0] => /home/XXXX/public_html/vendor/doctrine/dbal/lib/
                                )

                            [Doctrine\Common] => Array
                                (
                                    [0] => /home/XXXX/public_html/vendor/doctrine/common/lib/
                                )

                            [DoctrineORMModule\] => Array
                                (
                                    [0] => /home/XXXX/public_html/vendor/doctrine/doctrine-orm-module/src/
                                )

                            [DoctrineORMModuleTest\] => Array
                                (
                                    [0] => /home/XXXX/public_html/vendor/doctrine/doctrine-orm-module/tests/
                                )

                            [DoctrineModule\] => Array
                                (
                                    [0] => /home/XXXX/public_html/vendor/doctrine/doctrine-module/src/
                                )

                            [DoctrineModuleTest\] => Array
                                (
                                    [0] => /home/XXXX/public_html/vendor/doctrine/doctrine-module/tests/
                                )

                            [Application\] => Array
                                (
                                    [0] => /home/XXXX/public_html/module/Application/src
                                )

                        )

                    [fallbackDirs:Composer\Autoload\ClassLoader:private] => Array
                        (
                        )

                    [useIncludePath:Composer\Autoload\ClassLoader:private] => 
                    [classMap:Composer\Autoload\ClassLoader:private] => Array
                        (
                        )

                )

            [1] => loadClass
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:59:55.213

解决方案是 str 在所有模块自动加载器中用 / 替换命名空间中的所有 \。

所以这：

```
public function getAutoloaderConfig() {
        return array(
            'Zend\Loader\StandardAutoloader' => array(
                'namespaces' => array(
                    __NAMESPACE__ => __DIR__ . '/src/' . str_replace('\\', '/', __NAMESPACE__),
                ),
            ),
        );
    } 
```

将使一切在 LAMP 机器上按预期工作。

# c - 如何从 C99 函数声明中确定返回类型、参数、函数名

> ID：15014570
> 
> 赞同：1
> 
> 时间：2013-02-22T00:02:50.397
> 
> 标签：c, perl, c99

我正在寻找最简单的方法，如何从 C99 下编写的 c 头文件中确定返回类型、参数和函数名。

这是我的学校项目，必须在没有任何库的情况下用 Perl 编写。所以我有几个选择，我可以使用正则表达式，但它不适用于最难的函数，比如以下：

```
int * (* func(int * arg[]))(); 
```

返回类型应为“ **int * (* )()** ”，参数为“ **int * []** ”。

第二种方法是使用语法并对其进行解析，但我认为这不是正确的方法。

我的朋友告诉我一个现有的算法可以做到这一点。但他不记得名字，也不记得在哪里见过他。该算法非常简单。类似的东西：找到第一个结束括号，这个结束括号和第一个匹配的前一个开始括号之间的所有内容都是参数......

有谁知道我在找什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:45:28.323

如果你能获得Kernighan 和 Ritchie[*的 The C Programming Language*](http://citeseer.ist.psu.edu/viewdoc/download?doi=10.1.1.126.4437&rep=rep1&type=pdf)。它不仅是 C 的圣经，而且在第 5 章中，它们提供了解析 C 声明的代码。您可以在那里查看他们是如何做到的，并且很可能会调整他们的方法（第 5 章，第 12 节）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T01:31:36.750

查看[C 声明的魔术解码器环](http://books.google.com/books?id=4vm2xK3yn34C&pg=PA76&lpg=PA76&dq=magic%20decoder%20ring%20for%20C%20declarations&source=bl&ots=Ho92Ui-J9T&sig=fsl-7Hs4-rfM91r9DhH-LEuxgCE&hl=en&sa=X&ei=LMomUfjAG-TB2wX1zYHgCQ&ved=0CDsQ6AEwAQ#v=onepage&q=magic%20decoder%20ring%20for%20C%20declarations&f=false)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T00:14:19.353

您只需为此类问题构建一个[解析器。](http://en.wikipedia.org/wiki/Parsing)通常自上而下的方法（例如[递归下降](http://en.wikipedia.org/wiki/Recursive_descent_parser)）可以完成这种工作。幸运的是，自上而下的解析器或多或少可以直接实现。

类似 C 的语言中唯一的难点是，这些语言通常至少为 LL1（1 个标记向前看）或更差的 LL2 或更高。因此，有时您必须提前查看一些标记，以了解它是函数声明还是函数调用。

# request - 中断请求 (IRQ) 技术的历史有多久了？

> ID：15014571
> 
> 赞同：0
> 
> 时间：2013-02-22T00:02:50.570
> 
> 标签：request, history, irq

做一个报告，我在任何地方都找不到日期数据！IRQ 技术（粗略的日期）有多长时间了？

在中断请求存在之前计算机做了什么？只是产生错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:14:14.490

62 岁。

根据：[本站](http://people.cs.clemson.edu/~mark/interrupts.html)

自从微型计算机 (PC) 发明以来，我一直在使用中断。

我不确定“只产生错误”是否真的是支持中断的替代方案。但我想在硬件/软件中断被用于错误捕获的特定情况下，是的，这将是替代方案。

更广泛地说，中断允许共享 CPU - 多任务处理、硬件接口等。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:35:45.927

中断不仅对错误有用。顾名思义，它们会*中断*处理器的工作。本质上，它是一个处理器事件信号。在当前的处理器中，它们发出各种事件的信号，包括错误、有话要说的设备、产生的程序*、*内存事件......

在中断出现之前，没有办法中断处理器。它只是按照它们出现的顺序继续执行程序指令。此类处理器具有特殊的阻塞指令，例如，从外部存储设备（磁盘、磁带）读取。键盘和此类随机间隔设备（如果存在）通过特殊指令进行轮询，以查看是否按下了任何键。

错误发生时，只会导致不可预知的程序行为。那些旧处理器中可能发生的可处理错误并不多。主要是*除以零*，这可以通过仔细编程来避免。

在[这个链接](http://www.cap-lore.com/Hardware/int.html)中，作者讲述了他使用类中断构造的经验，这是他在 56 年前的 1957 年第一次看到的。[马克史蒂文斯](https://stackoverflow.com/a/15014697/146622)也发布[的链接](http://people.cs.clemson.edu/~mark/interrupts.html)引用了 62 年前的 1951 年。

* * *

如果您对计算机和处理器的内部结构感兴趣，我可以推荐Carl Hamacher、Zvonko Vranesic 和 Safwat Zaky所著的[Computer Organization一书。](https://rads.stackoverflow.com/amzn/click/com/0071122184)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-16T20:02:27.443

查看最近的这篇文章，了解计算机中断的历史可以追溯到他们的发明。这篇短文还包含一个视频，并引用了我能找到的关于该主题的所有可用材料。[http://virtualirfan.com/history-of-interrupts](http://virtualirfan.com/history-of-interrupts)

令人着迷的中断历史，尤其是关于 Djikstra 是如何被他们吓坏的。

# sql - 查询具有不同出现的记录

> ID：15014573
> 
> 赞同：0
> 
> 时间：2013-02-22T00:02:56.317
> 
> 标签：sql, count, group-by, having

我有这种情况

```
|---COL A ------------------COL B----|
|----001 ----------------------X-----|
|----001 ----------------------X-----|
|----002 ----------------------Y-----|
|----002 ----------------------Y-----|
|----003 ----------------------X-----|
|----003 ----------------------Y-----|
|----004 ----------------------X-----|
|----004 ----------------------Z-----| 
```

我想获取具有不同值的记录`colB`。因此，我希望得到一个对 b 列具有不同值的 id 的结果。

```
003
004 
```

意思是 003 有一个 x 和 Y ，而 004 有一个 x 和一个 Z

我试过了：

```
select colA,count(*) from table group by colA,colB having count(*) >2; 
```

看起来不对，因为它将具有相同 A 和 B 的人分组

所以我删除了 group by 上的 col b ，但它会得到所有具有相同 A 的人，而不管 B 是否相等。我不知道它的正确语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:08:51.777

```
SELECT colA 
FROM (
    SELECT colA, COUNT(DISTINCT colB) countB
    FROM tableGroup 
    GROUP BY colA
)
WHERE countB > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:10:46.703

尝试这个：

```
select colA
from t
group by colA
having count(distinct colB) >= 2 
```

关键是`count(distinct)`.

一种更有效的形式是：

```
having min(colB) <> max(colB) 
```

但是，这并不能推广到超过 2 个值。

# sharepoint - SharePoint 2010 - 文件和文件夹的 CustomAction

> ID：15014574
> 
> 赞同：0
> 
> 时间：2013-02-22T00:03:00.030
> 
> 标签：sharepoint, custom-action

我对 Elements.xml 中的 CustomActions 有一个非常基本的问题，我已经成功创建了一个小应用程序，该应用程序在上下文菜单中为我的文件库添加一个项目，我的目标是让相同的自定义操作可用于文件和文件夹，到目前为止，当我使用 RegistrationID= **“0x0101”**和文件夹**“0x0120”时，它仅适用于文件**

我想让我的解决方案适用于这两种类型。

这是我的 Elements.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<Elements xmlns="http://schemas.microsoft.com/sharepoint/">
  <CustomAction      
        ScriptSrc="/_layouts/CustomContextMenu/Permissions.js"
        Location="ScriptLink"
        Sequence="100">
  </CustomAction>
  <CustomAction Id="CustomContextMenu.MenuItemClicked"
                RegistrationType="ContentType"
                RegistrationId="0x0101"   
                Location="EditControlBlock"
                ImageUrl="/_layouts/CustomContextMenu/security-key.png"
                Title="External Access"
                Description="This options allows you to configure the access to this item for external users">
    <UrlAction Url="javascript:PermissionsDialog('{SiteUrl}', '{ItemId}', '{ListId}');" />
  </CustomAction>
</Elements> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:19:23.167

```
 Location="EditControlBlock"

  RegistrationId="101"

RegistrationType="List"

  RequireSiteAdministrator = "False"

  Rights = "AddListItems"    

  Description="Custom Upload"

  Title="Move To"   > 
```

这适用于我的文件夹和文件。

# jaxb - jax-rs 响应实体不是 xmlroot，而是一个元素

> ID：15014578
> 
> 赞同：0
> 
> 时间：2013-02-22T00:03:27.430
> 
> 标签：jaxb, jax-rs

我有一个 JAX-RS 响应方法

```
@Produces('application/xml', 'application/json') 
```

我还有一个 JAX-B 实体，它产生这个：

```
<person>
    <name>joe</name>
    <address>
        <street>123 home</street>
    </address>
<person> 
```

对于这个电话`/person/Joe`

我想回应`/person/joe/address`

并返回

```
 <address>
       <street>123 home</street>
  </address> 
```

使用 JAX-RS/Jersey 我得到一个错误：

> 当 mime 类型为 application/XML 时，没有 Address.class 类型的编组器

发生这种情况是因为地址对象未注释为`@XMLRootElement`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:52:17.303

您可以`Address`使用.`@XmlRootElement``JAXBElement`

```
new JAXBElement<Address>(
    new QName("address"), 
    Address.class, 
    address); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T00:29:50.790

我编写了一个简单的提供程序来处理这种情况，它似乎按我的预期工作。它会将 xmlType 包装在一个 jaxbelement 中，以便对其进行编组。

```
/**
 * by default we are unable to write an {@link XmlType} object as xml it must be
 * an {@link XmlRootElement} based object this class will wrap {@link XmlType}
 * with {@link JAXBElement} and marshall them
 * 
 * @author shaun
 * 
 */
@Provider
@Consumes({ "application/xml", "text/xml" })
public class XMLTypeWriter extends AbstractRootElementProvider {

    private static final Logger logger = LoggerFactory.getLogger(XMLTypeWriter.class);

    public XMLTypeWriter(@Context Providers ps) {
        super(ps, MediaType.APPLICATION_XML_TYPE);
    }

    @Override
    protected boolean isSupported(MediaType m) {
        return (m.equals(MediaType.APPLICATION_XML_TYPE) || m.equals(MediaType.TEXT_XML_TYPE));
    }

    @Override
    public boolean isReadable(Class<?> type, Type genericType, Annotation[] annotations, MediaType mediaType) {
        // There is already a xmltype reader defined.
        return false;
    }

    @Override
    public boolean isWriteable(Class<?> type, Type genericType, Annotation[] annotations, MediaType mediaType) {
        return type.isAnnotationPresent(XmlType.class) && isSupported(mediaType);
    }

    @Override
    protected void writeTo(Object t, MediaType mediaType, Charset c, Marshaller m, OutputStream entityStream) throws JAXBException {

        // need to get the type name from the annotation
        XmlType xt = t.getClass().getAnnotation(XmlType.class);
        JAXBElement p = null;
        if (xt != null) {
            String name = xt.name();
            p = new JAXBElement(QName.valueOf(name), t.getClass(), t);
        }
        super.writeTo(p, mediaType, c, m, entityStream);
    }
} 
```

# actionscript-3 - As3 sprite 旋转 X 和旋转 Y

> ID：15014581
> 
> 赞同：2
> 
> 时间：2013-02-22T00:03:44.483
> 
> 标签：actionscript-3, rotation

我对rotationX 和rotationY 有一点问题。

如果我在下面做一个 roationX 和 rotaionY 那就太酷了

```
_eventParent.rotationY =_differentX; 
_eventParent.rotationX =_differentY; 
```

但是，一旦我将鼠标移动分配给 _eventParent。当鼠标移动时，roationX 和 roationY 会发生透视变化。因此，该项目保持相同的大小。它会前瞻性地增加和减少大小。知道为什么要这样做吗？有没有可能阻止这种行为？

谢谢

请在下面找到图片。

![在此处输入图像描述](../Images/16b6684a0af934ad528faf0aab5c4bf2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T05:41:29.090

透视允许您的部分形状看起来比其他部分更接近您。问题是透视图有一个中心或“消失点”，默认情况下它是固定的。当您将形状从消失点移得更远时，视角会发生变化，从而导致您的形状变宽或变窄。

您可以通过更新消失点来解决此问题，使其始终与您的形状处于相同的坐标。由于形状将始终处于消失点，因此视角不应改变。

为此，请为您的形状创建一个 perspectiveProjection：

```
_eventParent.transform.perspectiveProjection = new PerspectiveProjection(); 
```

PerspectiveProjection 位于 flash.geom 包中，所以不要忘记导入它。

然后每当你更新你的形状的位置，更新它的消失点：

```
_eventParent.transform.perspectiveProjection.projectionCenter = 
    new Point(_eventParent.x, _eventParent.y); 
```

您可能需要将消失点偏移一定数量的像素，以使透视看起来像您想要的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T07:08:42.460

如果我误解了你的问题，请纠正我。您的问题是，如果您对movieClip 对象应用旋转，那么为什么大小会发生变化？

为简化起见，我们不要在 X 轴和 Y 轴上都应用旋转。让我们拍摄一个矩形影片剪辑，然后我们执行 onMouseMove `++myMovieClip.rotationX`；

现在，该语句将在对象上应用围绕 X 轴的旋转，并且将获得影片剪辑在 X 轴上翻转的透视图，这种翻转将显示为对象大小的变化。

这同样适用于跨 y 轴旋转。

# redis - Redis忽略redis.conf中的目录

> ID：15014584
> 
> 赞同：0
> 
> 时间：2013-02-22T00:04:28.750
> 
> 标签：redis, osx-mountain-lion

我最近在 OS X 上安装了 Redis。我对一些对象进行了初始加载，这方面的一切似乎都运行良好。

我将数据保存到`dump.rdb`，如果我从这个目录启动 redis 并且不使用`redis.conf`文件，一切都会按计划进行。

问题是，在安顿下来并在其中设置`redis.conf`文件后，`/etc/redis/`它似乎完全忽略了`dbfilename`和`dir`设置。

要更清楚。我在以下位置创建了一个数据目录：`/Library/Redis_Data/`. 在`redis.conf`我设置`dbfilename dump.rdb`和`dir /Library/Redis_Data`

如果我启动：`redis-server /etc/redis/redis.conf`它只是拒绝加载`dump.rdb`.

我已经运行`redis-cli`并且可以读取配置参数`get config dbfilename`并且`get config dir`它们返回正确的值，但是没有数据被恢复。

我还启用了 AOF。`appendonly.aof`如果我删除它并重新启动服务器，将重新创建驻留在同一目录中的文件。

最后......如果我`save`从 cli 运行，它将完全清除并`dump.rdb`在我的数据上创建一个新的。

有什么想法吗？

> 仅供参考：redis 服务器 v=2.6.9 sha=00000000:0 malloc=libc bits=64

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:44:20.633

已解决：今天早上回顾这个问题，我设法发现了这个问题。

我最初添加我的数据时没有启用`appendonly`模式。在这个测试负载之后，我设置了我的环境并决定启用`appendonly`.

我发现的是这个。如果您有数据`dump.rdb`但`appendonly.aof`文件为空**且** `appendonly`已打开；Redis 将忽略，`dump.rdb`而是假设没有任何事情要做，因为`appendonly.aof`事务不存在。

我做了什么：`appendonly`在配置文件中关闭并使用正常的目录设置重新启动 Redis。然后`dump.rdb`根据我的配置文件加载。然后我从`redis-cli config set appendonly yes`后面运行命令`save`。

然后创建了`appendonly.aof`包含所有交易的文件。回到配置`appendonly`中`yes`，一切正常。

干杯，该死的

# ios - XCode 不会通过控制点击来绑定 nib 和源头文件

> ID：15014586
> 
> 赞同：0
> 
> 时间：2013-02-22T00:04:43.617
> 
> 标签：ios, xcode, xib, nib

我向现有项目添加了一个带有接口 (.h)、实现 (.m) 文件和 UI (.xib) 的自定义视图控制器类。

当我在笔尖和界面之间按住 ctrl 单击并拖动时，拖动时它**不会**放置插座或 IBAction，因此我无法将 UI 元素链接到属性。另外，当我在助手编辑器模式下查看 nib 时，XCode 不会弹出相应的界面文件。

注意：我更改了自定义类的名称。我在源代码中更改了文件名和对它的引用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T00:43:06.063

确保单击左侧的文件所有者，然后在右侧的身份检查器中，放入自定义类。然后，您应该能够建立连接。

# java - java.util.date 错误？

> ID：15014589
> 
> 赞同：2
> 
> 时间：2013-02-22T00:05:02.970
> 
> 标签：java, jvm, java-7, java.util.date

java.util.Date是不是有bug？在进行一些测试时，我将毫秒设置为 2147483647，这应该给我一个 2038-01-19 03:14:07 的日期，但它返回 1970-01-25 20:31:23。还尝试了 4294967295 并得到 1970-02-19 17:02:47 的错误答案。有谁知道解决方法

```
import java.util.*;
import java.io.*;

/*
centos 6.3 x64
java version "1.7.0_13"
Java(TM) SE Runtime Environment (build 1.7.0_13-b20)
Java HotSpot(TM) 64-Bit Server VM (build 23.7-b01, mixed mode)
*/

public class Test
{
   static public void main(String args[])
   {
      long ms = 2147483647L;

      java.util.Date d = new java.util.Date( ms );

      java.text.SimpleDateFormat df = new java.text.SimpleDateFormat( "yyyy-MM-dd HH:mm:ss" );
      // SHOULD be 2038-01-19 03:14:07
      System.out.println( df.format( d ) );         

      System.out.println(df.format(new Date(Long.MAX_VALUE)));

      System.out.println( "\n" + ms );
      System.out.println( Long.MAX_VALUE );
   }
} 
```

* * *

1970-01-25 20:31:23 292278994-08-17 07:12:55

2147483647 9223372036854775807

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-22T00:07:28.240

2147483647 毫秒只有大约 24.8 天，所以它显示为 1970-01-25 20:31:23。

4294967295 毫秒只有大约 49.7 天，所以它显示为 1970-02-19 17:02:47。

您可能会根据 2147483647 秒而不是毫秒来计算您的预期。这不是 java.util.Date 中的错误；通过乘以 1000 将秒值转换为毫秒。

# mysql - MySQL 创建表时出现错误 1022

> ID：15014592
> 
> 赞同：21
> 
> 时间：2013-02-22T00:05:31.940
> 
> 标签：mysql, mysql-workbench

MySQL Workbench 提出了以下 SQL 来创建表：

```
CREATE  TABLE IF NOT EXISTS `mydb`.`errors_reports` (
   `error_id` INT NOT NULL ,
   `report_short` VARCHAR(15) NOT NULL ,
PRIMARY KEY (`error_id`, `report_short`) ,
INDEX `error_id_idx` (`error_id` ASC) ,
INDEX `report_short_idx` (`report_short` ASC) ,
CONSTRAINT `error_id`
   FOREIGN KEY (`error_id` )
   REFERENCES `mydb`.`errors` (`error_id` )
   ON DELETE NO ACTION
   ON UPDATE NO ACTION,
CONSTRAINT `report_short`
   FOREIGN KEY (`report_short` )
   REFERENCES `mydb`.`reports` (`report_short` )
   ON DELETE NO ACTION
   ON UPDATE NO ACTION)
ENGINE = InnoDB 
```

这对我来说看起来不错，并且我的数据库中还有许多其他非常相似的表，MySQL 非常乐意创建这些表。

但是这个...

```
ERROR 1022 (23000): Can't write; duplicate key in table 'errors_reports' 
```

我一辈子都看不到这里有任何重复的键。只定义了一个键！

我正在使用全新的默认安装运行 MySQL 5.6。错误日志中没有任何内容。

想法？

编辑：通过消除过程（回到最简单的表定义，然后逐渐添加位）问题似乎是这个位：

```
CONSTRAINT `error_id`
    FOREIGN KEY (`error_id` )
    REFERENCES `mydb`.`errors` (`error_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION, 
```

这特别奇怪，因为其他几个表定义中有相同的代码，而且完全没问题！

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-30T21:46:50.837

问题是一个**外键的****名称**不能与整个模型中的另一个**外键****相同。**

 ******想象一下这种情况

目录 --> 供应商

产品 --> 供应商

如果供应商表目录中的外键名称是“供应商”，并且您在产品表中分配了相同的名称，则外键名称将“冲突”。

您需要以不同的方式命名它们..

例如：

目录_供应商 产品_供应商

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T00:28:07.490

看来您正在外键列上创建索引。在 InnoDb 中创建外键时，会自动创建一个。

[看到这个线程](http://forums.mysql.com/read.php?125,362156,362753#msg-362753)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-22T00:22:11.103

如果发现重复的主键，请尝试使用INSERT IGNORE`INSERT IGNORE`代替`INSERT`where INSERT IGNORE 不会插入新行。这应该有助于暂时解决问题，但我建议截断表格。******

# c++ - C++ 源文件包含“唯一映射”？

> ID：15014593
> 
> 赞同：3
> 
> 时间：2013-02-22T00:05:36.897
> 
> 标签：c++, c++11

在 C++11 标准 16.2.5 中：

> 实现应为由一个或多个非数字或数字 (2.11) 后跟句点 (.) 和单个非数字组成的序列提供唯一映射。第一个字符不能是数字。该实现可能会忽略字母大小写的区别。

我完全不明白这句话的上下文或含义？

“提供独特的映射”是什么意思？从什么映射到什么？和独特的相对于什么？什么序列？

它似乎与周围的段落完全无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T00:18:31.740

在典型情况下，您在`#include`指令中指定的是文件名。这就是说它不必是文件名。“from what”是指令中的字符序列（`h-char-sequence`或`q-char-sequence`）。这可以映射到相同类型数据的某些（或多或少任意）源——例如，如果一个实现想要将标题存储在某种数据库中，它可能会将它们映射到数据库中的记录。

至于“到什么”部分，它故意含糊不清——典型的实现使用文件名，但它几乎可以是其他任何东西，只要包含标题会产生正确类型的结果——上面提到的数据库记录会是一种可能性，但它旨在允许诸如预编译头文件之类的事情，甚至将标准头文件的“知识”构建到编译器本身中，因此包含标准头文件可能只会在编译器中设置一个标志来告诉它请注意该标题的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T00:52:39.503

我不认为这是不合逻辑的，“序列”是指和对或对之间的*q-char-sequence*或*h-char-sequence*。`<``>``"`

措辞直接来自 C 标准（仅稍作改动），该标准在 6.4.7 中有以下附加措辞：

> 两种形式的头文件名中的序列都以实现定义的方式映射到 6.10.2 中指定的头文件或外部源文件名。

后面的措辞在这种情况下更有意义。

我相信这确实意味着实现只*需要*支持该形式的包含文件和标题。这显然并不意味着`#include <vector>`不起作用，因为该措辞并没有说实现*不应*支持其他形式，并且还有其他措辞要求标头正常运行。

# r - 如何在日历热图上使用黑白填充图案而不是颜色编码

> ID：15014595
> 
> 赞同：25
> 
> 时间：2013-02-22T00:05:38.617
> 
> 标签：r, plot, ggplot2, heatmap, visualize

我正在使用[Paul Bleicher](https://twitter.com/pbleic)的[日历热](https://github.com/jbryer/makeR/blob/master/R/calendarHeat.R)图来可视化一段时间内的一些事件，并且我有兴趣添加 [黑白填充图案](https://www.google.com/search?q=black-and-white+fill+patterns&hl=en&client=firefox-a&hs=ow5&rls=org.mozilla:en-US:official&tbm=isch&tbo=u&source=univ&sa=X&ei=qe4mUd-sCO-zigKnuICoCQ&ved=0CDEQsAQ&biw=1440&bih=716)而不是（或在其之上）颜色编码以增加日历热图的可读性黑白印刷。

这是一个以颜色显示的日历热图示例，

![日历热图颜色](../Images/442c5ad89b5568ce8a2f2f82ed3c0191.png)

这是它在黑白中的样子，

![黑白日历热图](../Images/88eab1ad9a09d4072f4613500678e88d.png)

很难区分黑白的各个级别。

有没有一种简单的方法可以让 R 为 6 个级别添加某种模式而不是颜色？

### 以颜色重现日历热图的代码。

```
source("http://blog.revolution-computing.com/downloads/calendarHeat.R")

stock <- "MSFT"
start.date <- "2012-01-12"
end.date <- Sys.Date()

quote <- paste("http://ichart.finance.yahoo.com/table.csv?s=", stock, "&a=", substr(start.date,6,7), "&b=", substr(start.date, 9, 10), "&c=", substr(start.date, 1,4), "&d=", substr(end.date,6,7), "&e=", substr(end.date, 9, 10), "&f=", substr(end.date, 1,4), "&g=d&ignore=.csv", sep="")
stock.data <- read.csv(quote, as.is=TRUE)

# convert the continuous var to a categorical var 
stock.data$by <- cut(stock.data$Adj.Close, b = 6, labels = F)

calendarHeat(stock.data$Date, stock.data$by, varname="MSFT Adjusted Close") 
```

### *更新 02-13-2013 03:52:11Z，添加模式*是什么意思，

我设想将模式添加到日历热图中的各个日期框，因为模式被添加到此图中右侧 ( **B** )饼图中的各个切片中，

![new-features.html#patterns](../Images/1a4c443c1a5a7e0cda171c1d0236f0ca.png)

在[这里](http://www.press.uchicago.edu/journals/an/prep-art.html?journal=an#halftones)找到了类似于[这个情节](http://www.softill.com/new-features.html#patterns)中的状态的东西。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-24T20:22:36.043

我在他成为赏金之前回答了这个问题。看起来 OP 发现我以前的答案有点复杂。[我在这里](https://gist.github.com/agstudy/5024781)将代码组织在一个要点中。您只需要下载文件并获取它。

我创建了新函数`extra.calendarHeat`，它是第一个绘制双时间序列 hetmap 的扩展函数。（dat，value1，value2）。我添加了这个新参数：

```
 pch.symbol : vector of symbols , defualt 15:20
   cex.symbol : cex of the symbols , default = 2
   col.symbol : color of symbols , default #00000044
   pvalues    : value of symbols 
```

这里有一些例子：

```
## I am using same data 
stock <- "MSFT"
start.date <- "2012-01-12"
end.date <- Sys.Date()
quote <- paste("http://ichart.finance.yahoo.com/table.csv?s=",
               stock,
               "&a=", substr(start.date,6,7),
               "&b=", substr(start.date, 9, 10),
               "&c=", substr(start.date, 1,4), 
               "&d=", substr(end.date,6,7),
               "&e=", substr(end.date, 9, 10),
               "&f=", substr(end.date, 1,4),
               "&g=d&ignore=.csv", sep="")             
stock.data <- read.csv(quote, as.is=TRUE)

p1 <- extra.calendarHeat(dates= stock.data$Date, values = stock.data$Adj.Close,
                         pvalues = stock.data$Volume,
                         varname="W&B MSFT Adjusted Close 
                                  \n Volume as no border symbol ") 
```

![在此处输入图像描述](../Images/dcfb63cfae961af7c0d57bc6fd13ff91.png)

```
## multiply symbols
p2 <- extra.calendarHeat(dates= stock.data$Date, values = stock.data$Adj.Close,
                         pvalues = stock.data$Volume,
                         varname="W&B MSFT Adjusted Close \n 
                                    black Volume as multiply symbol ",
                         pch.symbol = c(3,4,8,9),
                         col.symbol='black') 
```

![在此处输入图像描述](../Images/20b21f9591a980265fdfa0cf00c7196e.png)

```
## circles symbols
p3 <- extra.calendarHeat(dates= stock.data$Date, values = stock.data$Adj.Close,
                         pvalues = stock.data$Volume,
                         varname="W&B  MSFT Adjusted Close \n blue Volume as circles",
                         pch.symbol = c(1,10,13,16,18),
                         col.symbol='blue') 
```

![在此处输入图像描述](../Images/bb8c4555ff84fdcce6af42bf70976e88.png)

```
## triangles  symbols
p4 <- extra.calendarHeat(dates= stock.data$Date, values = stock.data$Adj.Close,
                         pvalues = stock.data$Volume,
                         varname="W&B MSFT Adjusted Close \n red Volume as triangles",
                         pch.symbol = c(2,6,17,24,25),
                         col.symbol='red') 
```

![在此处输入图像描述](../Images/5f31694278ed92a3d604b8df65237747.png)

```
p5 <- extra.calendarHeat(dates= stock.data$Date, values = stock.data$Adj.Close,
                         varname="MSFT Adjusted Close",
                         pch.symbol = LETTERS,
                         col.symbol='black') 
```

![在此处输入图像描述](../Images/425cb12d4e9ad8d4da9293d60ba6248a.png)

```
# symbols are LETTERS
p6 <- extra.calendarHeat(dates= stock.data$Date, values = stock.data$Adj.Close,
                         pvalues = stock.data$Volume,
                         varname="MSFT Adjusted Close  \n Volume as LETTERS symbols",
                         pch.symbol = letters,
                         color='r2b') 
```

![在此处输入图像描述](../Images/31bd1d4e619465071e229ce49b05e520.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-22T15:06:29.387

您可以`panel.level.plot`从`latticeExtra`添加模式。我认为提出的问题有点具体。所以我试图概括它。这个想法是给出将时间序列转换为日历热图的步骤：使用 2 种模式（填充颜色和形状）。我们可以想象多个时间序列（关闭/打开）。例如，你可以得到这样的东西

![在此处输入图像描述](../Images/a586dfae9b678326b0f1bd2793195a9c.png)

或者像这样，使用 ggplot2 主题：

![在此处输入图像描述](../Images/25154dfa40c1dd6b1752270e8edc47c9.png)

该函数`calendarHeat`给出一个单一的时间序列 (dat,value) ，像这样转换数据：

```
 date.seq value dotw woty   yr month seq
1 2012-01-01    NA    0    2 2012     1   1
2 2012-01-02    NA    1    2 2012     1   2
3 2012-01-03    NA    2    2 2012     1   3
4 2012-01-04    NA    3    2 2012     1   4
5 2012-01-05    NA    4    2 2012     1   5
6 2012-01-06    NA    5    2 2012     1   6 
```

所以我假设我的数据格式是这样的，否则，我从 calendarHeat 中提取了函数中数据转换的部分（参见这个[要点](https://gist.github.com/agstudy/5013751)）

```
 dat <- transformdata(stock.data$Date, stock.data$by) 
```

那么日历本质上就是一个`levelplot`带有自定义`sacles`、自定义`theme`和自定义的`panel' function`。

```
library(latticeExtra)
levelplot(value~woty*dotw | yr, data=dat, border = "black",
          layout = c(1, nyr%%7),
          col.regions = (calendar.pal(ncolors)),
          aspect='iso',
          between = list(x=0, y=c(1,1)),
          strip=TRUE,
          panel = function(...) {
            panel.levelplot(...)
            calendar.division(...)  
            panel.levelplot.points(...,na.rm=T,
                                   col='blue',alpha=0.5,
                                   ## you can play with cex and pch here to get the pattern you      
                                   ## like
                                   cex =dat$value/max(dat$value,na.rm=T)*3
                                   pch=ifelse(is.na(dat$value),NA,20),
                                   type = c("p"))

          },
          scales= scales,
          xlim =extendrange(dat$woty,f=0.01),
          ylim=extendrange(dat$dotw,f=0.1),
          cuts= ncolors - 1,
          colorkey= list(col = calendar.pal(ncolors), width = 0.6, height = 0.5),
          subscripts=TRUE,
          par.settings = calendar.theme) 
```

秤在哪里：

```
 scales = list(
   x = list( at= c(seq(2.9, 52, by=4.42)),
             labels = month.abb,
             alternating = c(1, rep(0, (nyr-1))),
             tck=0,
             cex =1),
   y=list(
     at = c(0, 1, 2, 3, 4, 5, 6),
     labels = c("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday",
                "Friday", "Saturday"),
     alternating = 1,
     cex =1,
     tck=0)) 
```

主题设置为：

```
 calendar.theme <- list(
   xlab=NULL,ylab=NULL,
   strip.background = list(col = "transparent"),
   strip.border = list(col = "transparent"),
   axis.line = list(col="transparent"),
   par.strip.text=list(cex=2)) 
```

面板函数使用函数 caelendar.division。实际上，网格（月黑计数）的划分很长，并且是使用`grid`包以硬方式完成的（面板焦点...）。我稍微改了一下，现在我在格子面板函数中调用它：[caelendar.division](https://gist.github.com/agstudy/5013606)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-24T08:21:11.010

我们可以使用 ggplot2`scale_shape_manual`让我们的形状看起来接近阴影，我们可以将它们绘制在灰色热图上。
*注意：这改编自@Jay 在日历热图[的原始博客帖子中的评论](http://blog.revolutionanalytics.com/2009/11/charting-time-series-as-calendar-heat-maps-in-r.html)*

```
# PACKAGES
library(ggplot2)
library(data.table)

# Transofrm data
stock.data <- transform(stock.data,
  week = as.POSIXlt(Date)$yday %/% 7 + 1,
  month = as.POSIXlt(Date)$mon + 1,
  wday = factor(as.POSIXlt(Date)$wday, levels=0:6, labels=levels(weekdays(1, abb=FALSE)), ordered=TRUE),
  year = as.POSIXlt(Date)$year + 1900)

# find when the months change
#   Not used, but could be 
stock.data$mchng <- as.logical(c(0, diff(stock.data$month)))

# we need dummy data for Sunday / Saturday to be included.
#  These added rows will not be plotted due to their NA values
dummy <- as.data.frame(stock.data[1:2, ])
dummy[, -which(names(dummy) %in% c("wday", "year"))] <- NA
dummy[, "wday"] <- weekdays(2:3, FALSE)
dummy[, "mchng"] <- TRUE
rbind(dummy, stock.data) -> stock.data

# convert the continuous var to a categorical var 
stock.data$Adj.Disc <- cut(stock.data$Adj.Close, b = 6, labels = F)

# vals is the greyscale tones used for the outer monthly borders
vals <- gray(c(.2, .5))

# PLOT
  # Expected warning due to dummy variable with NA's: 
  # Warning message:
  # Removed 2 rows containing missing values (geom_point). 
ggplot(stock.data) + 
  aes(week, wday, fill=as.factor(Adj.Disc), 
      shape=as.factor(Adj.Disc), color=as.factor(month %% 2)) + 
  geom_tile(linetype=1, size=1.8) + 
  geom_tile(linetype=6, size=0.4, color="white") + 
  scale_color_manual(values=vals) +
  geom_point(aes(alpha=0.2), color="black") + 
  scale_fill_grey(start=0, end=0.9) +  scale_shape_manual(values=c(2, 3, 4, 12, 14, 8)) + 
  theme(legend.position="none")  +  labs(y="Day of the Week") +  facet_wrap(~ year, ncol = 1) 
```

![在此处输入图像描述](../Images/9ed9be19de5f3f47c719509a5781b570.png)

# php - 为什么 PHP 不能从 Web 浏览器执行命令？

> ID：15014596
> 
> 赞同：0
> 
> 时间：2013-02-22T00:05:45.140
> 
> 标签：php, apache, exec

这真的很简单，但我根本无法让它工作。花了很多时间，我总是放弃。我创建了名为 copy.php 的 php 脚本，它应该调用一个名为 copy.py 的 python 脚本。

我想执行这样的命令行

```
 <?php exec('/var/www/html/copy.py'); ?> 
```

真的很简单。

为什么我不能从 php exec() 执行 python 脚本？python 脚本内部的功能是从不同的目录（Apache 外部）获取 error_log 的副本到 html 目录中。

如果我从终端运行它

```
 > php copy.php 
```

它确实执行了该功能并制作了一份副本。为什么网络浏览器不这样做？

让我简化一下：

为什么不能 exec("cp /var/log/httpd/error_log /var/www/html/path/to/php/script") 工作？

如果我在终端中键入它可以正常工作，但在浏览器中运行时则不行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:08:14.283

正如其他人所暗示的那样，区别可能在于权限。当您从命令行运行命令时，您通常与运行 apache 脚本的用户不同。

换句话说，如果您从命令行键入`whoami`，您可能会得到您的用户帐户的任何名称。

from inside php 显示了脚本的`echo exec('whoami');` 运行身份，即 Apache。

因此，您尝试从 Web 服务器运行的任何命令都不能以 Apache 用户身份运行。你提到你已经能够有`exec("python /usr/diskpurge/script.py")`工作，但没有 `exec('/var/www/html/copy.py')`没有。这是由于在一种情况下您正在运行 python，而在另一种情况下您正在尝试执行您的`copy.py`脚本。如果 copy.py 没有 Apache 用户的执行权限，您将无法从浏览器运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:45:34.207

听起来像是权限错误。检查您的服务器是否以足够的权限运行。

`echo exec('whoami');`

将您的错误报告设置为报告所有：

```
ini_set('display_errors', true);
error_reporting(E_ALL); 
```

并检查错误..

如果您的*whoami*返回的用户不是 SU 系列 (linux) 或管理 (windows) 的成员，则重新设置您的权限..

Linux：为 whoami 返回的用户分配正确的权限以运行 python 脚本.. 不允许生成的用户名以具有全部管理权限的 root 身份运行.. 这是一个很大的不不

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T00:08:51.067

也许不同的设置适用于 Apache 环境与命令行。

使用`error_reporting(E_ALL);`and`ini_set('display_errors', true)`查看可能出现的错误。

可能是 Apache 环境被禁止使用`exec`，或者 Apache 在没有`execute`Python 脚本权限的不同用户下运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-30T11:32:37.583

它不起作用的唯一原因是您没有设置写权限！

做：

```
sudo nano /etc/sudoers 
```

然后输入以下内容：

```
www-data ALL=(root) NOPASSWD:ALL 
```

# java - 从 Java Applet 访问文件

> ID：15014601
> 
> 赞同：0
> 
> 时间：2013-02-22T00:06:09.543
> 
> 标签：java, security, file-io, applet, runtime.exec

我正在用java构建这个桌面应用程序，它从`Standard.in`（或更具体地说 `FileInputStream`）读取输入，我想（或者我打算）把它变成一个JApplet。

我不是网络编程方面的专家，所以问题是，Java 小程序是否可以访问本地文件？更好的是，它可以执行系统调用（即`Runtime.getRuntime().exec(...)`）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:17:21.410

小程序需要由您进行数字签名并在出现提示时得到最终用户的信任，然后才能访问本地文件系统或用于`exec`启动进程。

# memory-management - 如何在D中的堆上创建一个字符串？

> ID：15014612
> 
> 赞同：0
> 
> 时间：2013-02-22T00:07:07.863
> 
> 标签：memory-management, d

我正在用 D 编写一个 trie，我希望每个 trie 对象都有一个指向某些数据的指针，如果节点是 trie 中的终端节点，则该指针具有非 NULL 值，否则为 NULL。在创建 trie 之前，数据的类型是不确定的（在 C 中，这将使用 a 来完成`void *`，但我打算使用模板来完成），这就是为什么需要指向堆对象的指针的原因之一。

这要求我最终在堆上创建我的数据，此时它可以被 trie 节点指向。实验，它似乎`new`执行了这个任务，就像它在 C++ 中所做的一样。但是由于某种原因，这会因字符串而失败。以下代码有效：

```
import std.stdio;

void main() {
    string *a;
    string b = "hello";
    a = &b;
    writefln("b = %s, a = %s, *a = %s", b, a, *a);
}
/* OUTPUT:
b = hello, a = 7FFF5C60D8B0, *a = hello
*/ 
```

但是，这失败了：

```
import std.stdio;

void main() {
    string *a;
    a = new string();
    writefln("a = %s, *a = %s", a, *a);
}
/* COMPILER FAILS WITH:
test.d(5): Error: new can only create structs, dynamic arrays or class objects, not string's
*/ 
```

是什么赋予了？如何在堆上创建字符串？

PS 如果编写 D 编译器的人正在阅读此内容，则“字符串”中的撇号是语法错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T12:12:05.013

字符串总是在堆上分配。这对于任何其他动态数组都是相同的（`T[]`,`string`只是 type 的别名`immutable(char)[]`）。

如果您只需要一个指针，有两种方法可以做到：

```
auto str = "some immutable(char) array";
auto ptr1 = &str; // return pointer to reference to string (immutable(char)[]*)
auto ptr2 = str.ptr; // return pointer to first element in string (char*) 
```

如果您需要指向空字符串的指针，请使用：

```
auto ptr = &""; 
```

请记住，您不能更改字符串中任何单个字符的值（因为它们是`immutable`）。如果要对字符串中的字符进行操作，请使用：

```
auto mutableString1 = cast(char[])"Convert to mutable."; // shouldn't be used
// or
auto mutableString2 = "Convert to mutable.".dup; // T[].dup returns mutable duplicate of array 
```

通常，除非您绝对知道自己在做什么，否则您应该避免使用指针。

从内存的角度来看，任何指针都占用 4B（x64 机器为 8B）内存，但如果您使用指向数组的指针，那么如果指针不为空，则使用 12B（+ 数组中的数据）内存。4B 如果来自指针和 8B 来自对数组的引用，因为数组引用是由两个指针组成的。数组中的一个到第一个和一个到最后一个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T01:00:20.970

请记住，这`string`只是`immutable(char)[]`. 所以你不需要指针，因为`string`它已经是一个动态数组。

至于创建它们，你只是做`new char[X]`，而不是`new string`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T07:00:00.167

字符串内容已经在堆上，因为字符串是动态数组。但是，在您的情况下，最好使用 char 动态数组，因为您需要可变性。

```
import std.stdio;

void main() {
  char[] a = null; // redundant as dynamic arrays are initialized to null
  writefln("a = \"%s\", a.ptr = %s", a, a.ptr); // prints: a = "", a.ptr = null
  a = "hello".dup; // dup is required because a is mutable
  writefln("a = \"%s\", a.ptr = %s", a, a.ptr); // prints: a = "hello", a.ptr = 7F3146469FF0
} 
```

请注意，您实际上并没有保存数组的内容，而是其中的一部分。该数组由运行时处理并在堆上分配。关于这个主题的一个很好的阅读是这篇文章[http://dlang.org/d-array-article.html](http://dlang.org/d-array-article.html "D片")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T10:06:08.383

If you can only use exactly one pointer and you don't want to use the suggestions in Marmyst's answer (`&str` in his example creates a reference to the stack which you might not want, `str.ptr` loses information about the strings length as D strings are not always zero terminated) you can do this:

Remeber that you can think of D arrays (and therefore strings) as a struct with a data pointer and length member:

```
struct ArraySlice(T)
{
    T* ptr;
    size_t length;
} 
```

So when dealing with an array the array's content is always on the heap, but the ptr/length combined type is a value type and therefore usually kept on the stack. I don't know why the compiler doesn't allow you to create that value type on the heap using new, but you can always do it manually:

```
import core.memory;
import std.stdio;

string* ptr;

void alloc()
{
    ptr = cast(string*)GC.malloc(string.sizeof);
    *ptr = "Hello World!";
}

void main()
{
    alloc();
    writefln("ptr=%s, ptr.ptr=%s, ptr.length=%s, *ptr=%s", ptr, ptr.ptr, ptr.length, *ptr);
} 
```

# ajax - 透明的 getJSON 请求无法正常工作

> ID：15014616
> 
> 赞同：0
> 
> 时间：2013-02-22T00:07:23.093
> 
> 标签：ajax, getjson

我坚持让它工作：在我将 2 个 getJSON 字符串 ($.getJSON... ...return false) 放入 base64 函数后，getjson 请求成功运行，但编码函数的其余部分不返回任何内容（它必须返回 base64编码文本）。如何解决？谢谢。

更新：没有'return false;' getjson 不发送任何东西，所以我认为会有一个解决方案来替换'return false;' 回报别的东西，不是吗？

代码：

```
var Base64 = {

// private property
_keyStr : "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=|", 
// public method for encoding
encode : function (input) {

       $.getJSON('http://debug.loc/savedata.php', $("#somedata").serialize(), function(data){});
       return false;

    var output = "";
    var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
    var i = 0;

    input = Base64._utf8_encode(input);

    while (i < input.length) {

        chr1 = input.charCodeAt(i++);
        chr2 = input.charCodeAt(i++);
        chr3 = input.charCodeAt(i++);

        enc1 = chr1 >> 2;
        enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
        enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
        enc4 = chr3 & 63;

        if (isNaN(chr2)) {
            enc3 = enc4 = 64;
        } else if (isNaN(chr3)) {
            enc4 = 64;
        }

        output = output +
        this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +
        this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);

    }

    return output;

}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:32:59.547

这是意料之中的——实际上，它返回 value `false`，而不是“nothing”。

`return false;`调用下面的行`getJSON()`有效地从函数返回（退出）。从函数返回意味着其余代码*不会*被执行。

我了解您希望该函数继续执行，对给定值进行编码并返回它。为此，只需删除该行`return false;`。

# c# - 浏览器关闭后会话变为空

> ID：15014618
> 
> 赞同：2
> 
> 时间：2013-02-22T00:07:37.117
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我使用以下代码跨页面检索登录用户身份

```
// login method of account model
public ActionResult Login(LoginModel model)
{
    Session["username"]=model.Username;
    //redirect to login controler
} 
```

并在登录控制器中

```
public ActionResult LoginLayout()
{
    if(IsAdmin(Session["username"]))
        return View();
    else
        return OtherView();
} 
```

一切都很好，直到我关闭浏览器然后重新打开它，然后我总是被重定向到，`OtherView()`即使我仍然被认证为登录用户。

**更新**

```
 [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Login(LoginModel model, string returnUrl)
    {
        if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
        {                
            Session["username"] = model.UserName;
            return RedirectToLocal(returnUrl);
        }

        // If we got this far, something failed, redisplay form
        ModelState.AddModelError("", "The user name or password provided is incorrect.");
        return View(model);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:07:47.730

您必须*始终*准备好清除会话状态。例如，如果更改了 web.config 文件，工作进程将被回收，所有进程内会话状态都将丢失。您可以通过使用进程外会话状态来缓解这种情况，但作为最佳实践，您应该随时准备丢失会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T01:57:52.447

您只需要检查您是否已登录，因为您的 cookie 是持久的。它与会话无关，因为关闭浏览器后会话将永远不存在，除非您将会话存储在数据库或状态中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T13:12:31.677

由于先前的回复状态，您无法在浏览器关闭后回复会话状态仍然有效。以下两篇文章应该会有所帮助

[ASP.NET 会话状态概述](http://msdn.microsoft.com/en-us/library/ms178581.aspx)

[ASP.NET 状态管理建议](http://msdn.microsoft.com/en-us/library/z1hkazw7.aspx)

蒂姆

# android - 在活动上创建叠加图像

> ID：15014619
> 
> 赞同：0
> 
> 时间：2013-02-22T00:07:45.913
> 
> 标签：android, android-layout, android-activity

我想在我的应用程序上制作一个“启动提示”，但我不确定我应该如何制作它。当您第一次开始时，我想要类似果冻豆的东西，我想要一个“手”，表明您可以向左或向右滑动，如下所示： ![在此处输入图像描述](../Images/526b3a0069fe726e4ceb5b999773ac69.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:14:45.240

使用这个库，它可以创造奇迹：[https ://github.com/Espiandev/ShowcaseView](https://github.com/Espiandev/ShowcaseView)

# asp.net - 从 Java 代码到 ASPX 页面的 HTTP 发布未命中该页面

> ID：15014634
> 
> 赞同：1
> 
> 时间：2013-02-22T00:09:05.007
> 
> 标签：asp.net, networking, iis-6, port, network-protocols

我遇到了一个问题，将不胜感激任何帮助或指示：

运行在 appache 上的 java 应用程序的第三方系统正在向 ASPX 页面 (.net 4.0) 发送 http 帖子，但请求未到达该页面。我确实看到来自 IIS 日志的请求来自 IIS，但它没有到达页面（基于我的日志文件上的结果）。我已经确认，当我通过测试 html 页面将 http 发布到同一页面时，包括日志在内的所有内容都可以正常工作。

当请求来自 java 代码时，IIS 似乎正在阻塞。在进行搜索时我没有得到任何具体的东西......任何帮助或指针将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:45:10.673

事实证明，.net 拒绝了该请求，因为表单中传递的数据是 XML，它认为它太危险了 :-)。我必须在 system.web 部分的 web.config 中添加以下内容才能工作：

这只发生在请求来自第 3 方源系统而不是来自同一服务器的测试页面时。

感谢你的帮助！！

# python - Python optparse 帮助消息格式化

> ID：15014637
> 
> 赞同：0
> 
> 时间：2013-02-22T00:09:19.747
> 
> 标签：python, arguments, command-line-arguments, optparse

我正在使用 optparse 处理命令行参数，并且遇到了 optparse 帮助消息的多个空格行的问题。

```
group.add_option(
    '-H',
    '--hostname',
    action='store',
    dest='hostname',
    help='Specify the hostname or service/hostname you want to connect to\
    If specified -f/--hostfile will be ignored',
    metavar='HOSTNAME',) 
```

因此，在帮助消息中的“to”之后，我在帮助消息中得到了几个空格（因为缩进）。

```
 Specify the hostname or service/hostname you want to connect 
 to                   If specified -f/--hostfile will be ignored 
```

我可以删除帮助消息第二行中的前导空格，但那将是不合情理的。

是否有一些pythonic方法可以删除帮助消息中的空格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T00:17:25.570

如果括在括号中，则可以连接多行字符串。所以你可以这样重写：

```
group.add_option(
    '-H',
    '--hostname',
    action='store',
    dest='hostname',
    help=('Specify the hostname or service/hostname you want to connect to.  '
          'If specified -f/--hostfile will be ignored'),
    metavar='HOSTNAME',) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:28:15.863

Austin Phillips 的回答涵盖了您希望将字符串连接起来的情况。如果您想保留换行符（即，您需要多行帮助字符串）。查看[textwrap 模块](http://docs.python.org/2/library/textwrap.html)。具体来说就是denden函数。

示例用法：

```
>>> from textwrap import dedent
>>> def print_help():
...   help = """\
...   Specify the hostname or service/hostname you want to connect to
...   If specified -f/--hostfile will be ignored
...   Some more multiline text here
...   and more to demonstrate"""
...   print dedent(help)
... 
>>> print_help()
Specify the hostname or service/hostname you want to connect to
If specified -f/--hostfile will be ignored
Some more multiline text here
and more to demonstrate
>>> 
```

从文档中：

> textwrap.dedent（文本）
> 
> 从文本的每一行中删除任何常见的前导空格。
> 
> 这可用于使三引号字符串与显示的左边缘对齐，同时仍以缩进形式在源代码中显示它们。

# ajax - RecorderJS 通过 AJAX 上传记录的 blob

> ID：15014638
> 
> 赞同：4
> 
> 时间：2013-02-22T00:09:20.870
> 
> 标签：ajax, html, audio, upload, recorder

我正在使用 Matt Diamond 的 recorder.js 来导航 HTML5 音频 API，并且觉得这个问题可能有一个明显的答案，但我找不到任何具体的文档。

**问题**：录制了 wav 文件后，如何通过 ajax 将 wav 发送到服务器？有什么建议么？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T14:39:01.930

如果您有 blob，则需要将其转换为 url 并通过 ajax 调用运行该 url。

```
// might be nice to set up a boolean somewhere if you have a handler object
object = new Object();
object.sendToServer = true;

// You can create a callback and set it in the config object.
var config = {
   callback : myCallback
}

// in the callback, send the blob to the server if you set the property to true
function myCallback(blob){
   if( object.sendToServer ){

     // create an object url
     // Matt actually uses this line when he creates Recorder.forceDownload()
     var url = (window.URL || window.webkitURL).createObjectURL(blob);

     // create a new request and send it via the objectUrl
     var request = new XMLHttpRequest();
     request.open("GET", url, true);
     request.responseType = "blob";
     request.onload = function(){
       // send the blob somewhere else or handle it here
       // use request.response
     }
     request.send();
   }
}

// very important! run the following exportWAV method to trigger the callback
rec.exportWAV(); 
```

让我知道这是否有效..尚未对其进行测试，但应该可以。干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-10T22:40:42.643

我还花了很多时间试图实现你在这里想要做的事情。只有在实现 FileReader 并调用 readAsDataURL() 将 blob 转换为数据后，我才能成功上传音频 blob 数据：表示文件数据的 URL（查看[MDN FileReader](https://developer.mozilla.org/en-US/docs/Web/API/FileReader)）。此外，您必须*POST*，而不是*GET* FormData。这是我的工作代码的范围片段。享受！

```
function uploadAudioFromBlob(assetID, blob)
{
    var reader = new FileReader();

    // this is triggered once the blob is read and readAsDataURL returns
    reader.onload = function (event)
    {
        var formData = new FormData();
        formData.append('assetID', assetID);
        formData.append('audio', event.target.result);
        $.ajax({
            type: 'POST'
            , url: 'MyMvcController/MyUploadAudioMethod'
            , data: formData
            , processData: false
            , contentType: false
            , dataType: 'json'
            , cache: false
            , success: function (json)
            {
                if (json.Success)
                {
                    // do successful audio upload stuff
                }
                else
                {
                    // handle audio upload failure reported
                    // back from server (I have a json.Error.Msg)
                }
            }
            , error: function (jqXHR, textStatus, errorThrown)
            {
                alert('Error! '+ textStatus + ' - ' + errorThrown + '\n\n' + jqXHR.responseText);
                // handle audio upload failure
            }
        });
    }
    reader.readAsDataURL(blob);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-05T02:54:50.740

**@jeff Skee 的**回答确实很有帮助，但一开始我无法理解，所以我用这个小 javascript 函数做了一些更简单的事情。

**函数参数**
@blob : 要发送到服务器的 Blob 文件
@url : 服务器端代码 url 例如 upload.php
@name : 在服务器端文件数组中引用的文件索引

**jQuery ajax 函数**

```
function sendToServer(blob,url,name='audio'){
var formData = new FormData();
    formData.append(name,blob);
    $.ajax({
      url:url,
      type:'post',      
      data: formData,
      contentType:false,
      processData:false,
      cache:false,
      success: function(data){
        console.log(data);
      }
    });  } 
```

**服务器端代码（upload.php）**

```
$input = $_FILES['audio']['tmp_name'];
$output = time().'.wav';
if(move_uploaded_file($input, $output))
    exit('Audio file Uploaded');

/*Display the file array if upload failed*/
exit(print_r($_FILES)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-12T13:03:58.113

上述两种解决方案都使用 jQuery 和`$.ajax()`

这是本机`XMLHttpRequest`解决方案。只需在您可以访问该`blob`元素的任何地方运行此代码：

```
var xhr=new XMLHttpRequest();
xhr.onload=function(e) {
  if(this.readyState === 4) {
      console.log("Server returned: ",e.target.responseText);
  }
};
var fd=new FormData();
fd.append("audio_data",blob, "filename");
xhr.open("POST","upload.php",true);
xhr.send(fd); 
```

服务器端，`upload.php`很简单：

```
$input = $_FILES['audio_data']['tmp_name']; //temporary name that PHP gave to the uploaded file
$output = $_FILES['audio_data']['name'].".wav"; //letting the client control the filename is a rather bad idea

//move the file from temp name to local folder using $output name
move_uploaded_file($input, $output) 
```

[来源](https://addpipe.com/blog/using-recorder-js-to-capture-wav-audio-in-your-html5-web-site/)| [现场演示](https://addpipe.com/simple-recorderjs-demo/)

# sql - 如何只选择最新日期的 1 行

> ID：15014640
> 
> 赞同：0
> 
> 时间：2013-02-22T00:09:31.343
> 
> 标签：sql, tsql, sql-server-2005

SQL Server 2005。我有两个表，其中包含以下行中的发货信息：

> ```
> TABLE1: SHIPMNT_NO
>         SHIPMNT_LN_NO
>         CUSTOMER
> 
> TABLE2: SHIPMNT_NO
>         SHIPMNT_LN_NO
>         SHIP_DT
>         QTY 
> ```

TABLE2 中有多个行，SHIPMNT_NO 和 SHIPMNT_LN_NO 的值相同，但发货日期 (SHIP_DT) 的值不同。

> ```
> SHIPMNT_NO   SHIPMNT_LN_NO    SHIPMNT_DT
>  965271         1             2013-02-07 00:00:00.000
>  965271         1             2013-02-12 00:00:00.000
>  965271         1             2013-02-14 00:00:00.000
>  965271         1             2013-02-16 00:00:00.000
>  965271         1             2013-02-18 00:00:00.000 
> ```

我需要将 SHIPMNT_NO 和 SHIPMNT_LN_NO 上的表连接在一起。但我只需要具有最近日期（SHIPMNT_DT）的不同 SHIPMNT_NO 和 SHIPMNT_LN_NO 行。

> ```
> select a.SHIPMNT_NO, a.SHIPMNT_LN_NO, b.QTY
> from TABLE1 a join TABLE2 b on b.SHIPMNT_NO = a.SHIPMNT_NO
>                            and b.SHIPMNT_LN_NO = a.SHIPMNT_LN_NO
> Where????? 
> ```

我可以用 WHERE、JOIN 或 SUBQUERY 做什么？

希望很清楚我要完成的工作，但如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:14:02.347

```
;WITH x AS 
(
   SELECT a.SHIPMNT_NO, a.SHIPMNT_LN_NO, b.QTY, b.SHIPMNT_DT,
      rn = ROW_NUMBER() OVER 
      (
        PARTITION BY a.SHIPMNT_NO, a.SHIPMNT_LN_NO
        ORDER BY b.SHIPMNT_DT DESC
      )
   FROM dbo.TABLE1 AS a 
   INNER JOIN dbo.TABLE2 AS b 
   ON b.SHIPMNT_NO = a.SHIPMNT_NO
   AND b.SHIPMNT_LN_NO = a.SHIPMNT_LN_NO
)
SELECT SHIPMNT_NO, SHIPMNT_LN_NO, QTY --, SHIPMNT_DT
FROM x WHERE rn = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:13:09.230

你想要 row_number() 函数：

```
select SHIPMNT_NO, SHIPMNT_LN_NO, QTY
from (select a.SHIPMNT_NO, a.SHIPMNT_LN_NO, b.QTY,
             row_number() over (partition by shipmnt_no, shipmnt_ln_no order by shipmnt_dt desc) as seqnum
      from TABLE1 a join TABLE2 b on b.SHIPMNT_NO = a.SHIPMNT_NO
                       and b.SHIPMNT_LN_NO = a.SHIPMNT_LN_NO
    ) t
where seqnum = 1 
```

该`row_number()`函数为组中的行分配一个序号。在这种情况下，组由装运描述定义。排序由 shipping_dt 定义，最近的值为 1。

如果您认为您可能有联系（同一组中具有相同日期的两行）*并且*您想要所有这些，请使用`rank()`而不是`row_number()`.

# perl - DBIx::Class 如何为 SQLite 启用 PRAGMA foreign_keys？

> ID：15014643
> 
> 赞同：3
> 
> 时间：2013-02-22T00:09:43.773
> 
> 标签：perl, sqlite, dbix-class

我想使用 DBIx::Class 启用对 SQLite3 的外键支持，以便在更新和删除时使用级联。我在文档中找到了这个[http://search.cpan.org/dist/DBIx-Class/lib/DBIx/Class/Storage/DBI/SQLite.pm](http://search.cpan.org/dist/DBIx-Class/lib/DBIx/Class/Storage/DBI/SQLite.pm)，但对如何使用它不是很清楚。

这就是我在脚本中设置 Schema.pm 和连接字符串的方式。

```
# Schema.pm
package MyApp::Schema;
use base qw/DBIx::Class::Schema/;

use strict;
use warnings;
our $VERSION = '0.00001';

__PACKAGE__->load_namespaces();
__PACKAGE__->load_components(qw/Schema::Versioned/);
__PACKAGE__->upgrade_directory('sql/');

# connection string in script
use MyApp::Schema;
my $schema = MyApp::Schema->connect('dbi:SQLite:db/myapp.db'); 
```

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T02:31:05.277

两个都

```
my $schema = MyApp::Schema->connect(
    'dbi:SQLite:db/myapp.db',
    undef,
    undef,
    {
        on_connect_do => 'PRAGMA foreign_keys = ON',
    }
); 
```

和

```
my $schema = MyApp::Schema->connect(
    dsn           => 'dbi:SQLite:db/myapp.db',
    on_connect_do => 'PRAGMA foreign_keys = ON',
); 
```

应该做的伎俩。

* * *

如评论中所述，您还可以使用

```
on_connect_call => 'use_foreign_keys', 
```

代替

```
on_connect_do => 'PRAGMA foreign_keys = ON', 
```

# python - 发出更长的 xpath 表达式

> ID：15014646
> 
> 赞同：0
> 
> 时间：2013-02-22T00:09:55.850
> 
> 标签：python, xpath, lxml

我遇到了`urllib`和`lxml.html`模块的问题。

这是我的原始代码：

```
import urllib  
import lxml.html  
down='http://v.163.com/special/visualizingdata/'  
file=urllib.urlopen(down).read()  
root=lxml.html.document_fromstring(file)
xpath_str="//div[@class='down s-fc3 f-fl']/a"  
urllist=root.xpath(xpath_str)  
for url in urllist:  
  print url.get("href") 
```

运行时，它返回以下输出：

```
http://mov.bn.netease.com/movieMP4/2012/12/A/7/S8H1TH9A7.mp4  
http://mov.bn.netease.com/movieMP4/2012/12/D/9/S8H1ULCD9.mp4  
http://mov.bn.netease.com/movieMP4/2012/12/4/P/S8H1UUH4P.mp4  
http://mov.bn.netease.com/movieMP4/2012/12/B/V/S8H1V8RBV.mp4  
http://mov.bn.netease.com/movieMP4/2012/12/6/E/S8H1VIF6E.mp4  
http://mov.bn.netease.com/movieMP4/2012/12/B/G/S8H1VQ2BG.mp4 
```

但是，当我换行时

`xpath_str='//div[@class="down s-fc3 f-fl"]//a'`

进入

`xpath_str='//div[@class="col f-cb"]//div[@class="down s-fc3 f-fl"]//a'`

也就是说，

```
urllist=root.xpath('//div[@class="col f-cb"]//div[@class="down s-fc3 f-fl"]//a') 
```

我没有收到任何输出。这段代码有什么缺陷？
奇怪的是，越短的可以工作，越长的不能，它们具有相同的xpath结构！

在firefox中打开网页' [http://v.163.com/special/visualizingdata/](http://v.163.com/special/visualizingdata/) '，你可以看到带有firebug的html结构。

![在此处输入图像描述](../Images/fa7002e4d8724cec2ed5f4276299630c.png)

# c - 为什么将 ucontext 添加到 POSIX，然后从 POSIX 中删除？

> ID：15014647
> 
> 赞同：3
> 
> 时间：2013-02-22T00:09:58.380
> 
> 标签：c, posix, setjmp, ucontext

据我所知，`ucontext`提供更好的东西`setjmp`。但它已被弃用，现在已从 POSIX 规范中删除。那么它为什么会出现，又为什么会被移除呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-26T03:49:17.547

[`makecontext`](http://pubs.opengroup.org/onlinepubs/009695399/functions/makecontext.html)from的签名`ucontext.h`是：

```
void makecontext(ucontext_t *ucp, void (*func)(),
       int argc, ...); 
```

请注意，它`func`使用空括号作为参数，但这是标准 C 中不推荐使用的功能：

> ### C11(ISO/IEC 9899:201x) §6.11.6 函数声明符
> 
> 使用带空括号的函数声明符（不是原型格式参数类型声明符）是一个过时的特性。

这就是它被弃用的原因（并且有点不幸）。

# android - Spring：没有合适的消息转换器

> ID：15014649
> 
> 赞同：0
> 
> 时间：2013-02-22T00:10:23.960
> 
> 标签：android, json, spring, jackson

我正在尝试将 Spring 用于 GET http 请求。

我的主要课程：

```
 final String url = getString(R.string.myurl);

        // Populate the HTTP Basic Authentitcation header with the username and password
        String Usn = "username";
        String ww = "password";

        HttpAuthentication authHeader = new HttpBasicAuthentication(Usn, ww);
        HttpHeaders requestHeaders = new HttpHeaders();
        requestHeaders.setAuthorization(authHeader);
        requestHeaders.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));

        System.out.println("Headers: " + requestHeaders.toString());

        // Create a new RestTemplate instance
        RestTemplate restTemplate = new RestTemplate();
        restTemplate.getMessageConverters().add(new MappingJackson2HttpMessageConverter());

        try {
            // Make the network request
            Log.d(TAG, url);
            ResponseEntity<CatMessage> response = restTemplate.exchange(url, HttpMethod.GET, new HttpEntity<Object>(requestHeaders), CatMessage.class);
            System.out.println(response.toString());
        } catch (HttpClientErrorException e) {
            Log.e(TAG, e.getLocalizedMessage(), e);
        }
    } 
```

使用 CatMessage 类：

```
public class CatMessage {

    public String getMessage() {
        return message;
    }
    public void setMessage(String message) {
        this.message = message;
    }
    public int getCode() {
        return code;
    }
    public void setCode(int code) {
        this.code = code;
    }

    public String message;
    public int code;

} 
```

我应该回来的，因为我使用的用户名和密码组合不工作（这个服务器部分工作正常），是：

> {
> 
> ```
> "message": "You are not authorized to use this service",
> "code": 5201 
> ```
> 
> }

我认为这应该可行，因为我几乎正在复制[Spring for Android 的基本身份验证项目](https://github.com/SpringSource/spring-android-samples/tree/master/spring-android-basic-auth/client)

但是会发生什么是解析的问题（我认为）。当然，我已经包含了 Jackson 和 Spring 依赖项，所以我不希望我的问题存在。但我希望 JSON 非常小，有一个映射良好的模型（CatMessage），并且包含了我的 Jackson 文件，所以我认为这应该可以工作......但我收到以下错误：

> 02-22 00:13:42.977：E/AndroidRuntime(2052)：原因：org.springframework.web.client.RestClientException：无法提取响应：没有找到适合响应类型的 HttpMessageConverter [org.springframework.android.basicauth。 CatMessage] 和内容类型 [text/html] 02-22 00:13:42.977: E/AndroidRuntime(2052): at org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:79) 02-22 00: 13:42.977: E/AndroidRuntime(2052): 在 org.springframework.web.client.RestTemplate$ResponseEntityResponseExtractor.extractData(RestTemplate.java:655) 02-22 00:13:42.977: E/AndroidRuntime(2052): 在 org .springframework.web.client.RestTemplate$ResponseEntityResponseExtractor.extractData(RestTemplate.java:641) 02-22 00:13:42.977: E/AndroidRuntime(2052): at org.springframework.web.client。RestTemplate.doExecute(RestTemplate.java:484) 02-22 00:13:42.977: E/AndroidRuntime(2052): at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:439) 02-22 00: 13:42.977: E/AndroidRuntime(2052): 在 rg.springframework.web.client.RestTemplate.exchange(RestTemplate.java:415)

有谁知道我的问题可能出在哪里？在看似如此简单的事情上工作几个小时真是太糟糕了……谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:26:37.173

您的代码看起来不错，我能想到的唯一解释是您正在调用的服务

1.  不产生 JSON 内容。
2.  它产生 JSON，但设置一个`Content-Type`响应头`text/json`或类似的东西（默认情况下`MappingJackson2HttpMessageConverter`唯一知道的）。`application/json`

你能检查一下`Content-Type`响应头吗（因为这是`RestTemplate`选择正确的东西`HttpMessageConverter`）？

# opengl - glDrawArrays 什么都不画？

> ID：15014654
> 
> 赞同：0
> 
> 时间：2013-02-22T00:10:57.193
> 
> 标签：opengl, vbo, .obj

程序成功加载了所有内容，我接受的代码完全是脏的，但我至少正在尝试绘制一些东西。但似乎出了点问题，没有错误，没有显示：P

PS：投影，加载文件等一切都设置正确。

objloader.h

```
#pragma once
#include <windows.h>
#include <GL/gl.h>
#include <GL/glu.h>
#include <algorithm>
#include <cassert>
#include <cstdlib>
#include <ctime>
#include <iostream>
#include <vector>
#include "opengl.h"
#include "terrain.h"

struct VertexCoord
{
    float x,y,z,w;
};

struct TextureCoord
{
    float u,v;
};

struct NormalCoord
{
    float x,y,z;
};

struct ColorComp
{
    float r,g,b;
};

struct VBOVertex
{
    float x,y,z,w;
    float nx,ny,nz;
    float u,v;
    float r,g,b;
};

class ObjLoader
{

    GLuint VBO;
    std::vector<VertexCoord>    vertexData;
    std::vector<NormalCoord>    normalData;
    std::vector<TextureCoord>   textureData;
    std::vector<ColorComp>  colorData;
    int numVerts;
    char *modeldata;

public:
    ObjLoader(void);
    ~ObjLoader(void);
    void LoadBuffers(const char* fileName);
    void render();
}; 
```

objloader.cpp

```
#include "ObjLoader.h"
#include <fstream>
#include <string>
#include <sstream>
using namespace std;

ObjLoader::ObjLoader(void)
{

    glGenBuffers(1,&VBO);
    numVerts=0;
}

ObjLoader::~ObjLoader(void)
{
}

void ObjLoader::LoadBuffers(const char* fileName) {

    ifstream fs(fileName,ios::in);
    string line;
    vector<string> faceList;

    while (getline(fs,line)) {
        if (line.substr(0,2) == "v ") {
            istringstream s(line.substr(2));
            VertexCoord ver;
            s >> ver.x >> ver.y >> ver.z;
            vertexData.push_back(ver);
        } 
        else if (line.substr(0,3) == "vt ") {
            istringstream s(line.substr(3));
            TextureCoord ver;
            s >> ver.u >> ver.v;
            textureData.push_back(ver);
        } 
        else if (line.substr(0,3) == "vn ") {
            istringstream s(line.substr(2));
            NormalCoord ver;
            s >> ver.x >> ver.y >> ver.z;
            normalData.push_back(ver);
        } 
        else if (line.substr(0,2) == "f ") {
            faceList.push_back(line);
        } 
        else if (line[0] == '#'){       } 
        else {      }
    }

    modeldata=new char[faceList.size()*3*sizeof(VBOVertex)];

    for (int i=0; i < faceList.size(); i++) {
        VBOVertex newvert[3];

        int v[3],n[3],t[3];
        sscanf(faceList[i].c_str(),"f %d/%d/%d %d/%d/%d %d/%d/%d",&v[0],&t[0],&n[0],
            &v[1],&t[1],&n[1],
            &v[2],&t[2],&n[2]);

        for (int j=0;j < 3; j++) {
            newvert[j].x=vertexData[v[j]-1].x;
            newvert[j].y=vertexData[v[j]-1].y;
            newvert[j].z=vertexData[v[j]-1].z;
            newvert[j].w=vertexData[v[j]-1].w;
            newvert[j].u=textureData[t[j]-1].u;
            newvert[j].v=textureData[t[j]-1].v;
            newvert[j].nx=normalData[n[j]-1].x;
            newvert[j].ny=normalData[n[j]-1].y;
            newvert[j].nz=normalData[n[j]-1].z;
        }
        memcpy(modeldata + (i*3*sizeof(VBOVertex)),newvert,3*sizeof(VBOVertex));
        numVerts++;

    }

    glBindBuffer(GL_ARRAY_BUFFER,VBO);
    glBufferData(GL_ARRAY_BUFFER,faceList.size()*3*sizeof(VBOVertex),(char*)modeldata,GL_STATIC_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER,0);

}

void ObjLoader::render() {
    glBindBuffer(GL_ARRAY_BUFFER, VBO);

    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
    glTexCoordPointer(2, GL_FLOAT, sizeof(VBOVertex), BUFFER_OFFSET(7 * sizeof(float)));

    glEnableClientState(GL_NORMAL_ARRAY);
    glNormalPointer(GL_FLOAT, sizeof(VBOVertex), BUFFER_OFFSET(4 * sizeof(float)));

    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(3, GL_FLOAT, sizeof(VBOVertex), BUFFER_OFFSET(0));

    glDrawArrays(GL_TRIANGLES,0,numVerts);

    glDisableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_NORMAL_ARRAY);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);

    glBindBuffer(GL_ARRAY_BUFFER, 0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:18:03.727

抱歉，由于文本绘制，我刚刚意识到投影模式是 Ortho，代码按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:59:59.527

您永远不会调用 glGenBuffers 来创建 vbo。在绑定此缓冲区之前进行此调用。否则，您将尝试使用未设置的 vbo id 绑定不存在的缓冲区。

# spring-mvc - 如何使用 Spring Security 获取当前用户的角色

> ID：15014656
> 
> 赞同：5
> 
> 时间：2013-02-22T00:11:07.803
> 
> 标签：spring-mvc, spring-security, waffle

我正在尝试获取已通过身份验证的当前用户的所有角色并在 JSP 页面中显示它们。

我注意到这里列出了一些内置表达式：http: [//static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html)但我没有看到任何将列出所有角色。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T12:11:48.333

您可以使用`SecurityContextHolder.getContext().getAuthentication().getAuthorities()`获取当前登录用户角色的集合。

# c++ - 对“#pragma GCC 诊断推送/弹出”感到困惑

> ID：15014657
> 
> 赞同：2
> 
> 时间：2013-02-22T00:11:11.470
> 
> 标签：c++, gcc, pragma

我正在尝试使用“#pragma GCC 诊断推送”和“#pragma GCC 诊断弹出”为我的代码打开警告，然后退出（例如，一旦标题结束）。但是当我弹出时，警告并没有按预期关闭。作为一个简单的例子：

```
int main(int, char*[]) {
  int i;
  unsigned int ui;
  i==ui;  // no warning as expected
// this push doesn't make any difference
#pragma GCC diagnostic push
#pragma GCC diagnostic warning "-Wsign-compare"
  i==ui;  // warns as expected

// this push doesn't make any difference in warning output
#pragma GCC diagnostic push

#pragma GCC diagnostic ignored "-Wsign-compare"
  i==ui; // no warning as expected

#pragma GCC diagnostic pop
  i==ui; // warns as expected

#pragma GCC diagnostic pop
  i==ui; // warns unexpectedly

// I can put as many pops as I want here, nothing changes
#pragma GCC diagnostic pop
  i==ui; // warns unexpected
  return 0;
} 
```

使用 gcc 4.6（和 4.7）并且没有从命令行启用警告（甚至在命令行上传递 -Wno-sign-compare），警告将在文本中标记。也就是说，似乎无法将内容弹出回命令行值。我是否误解了这应该如何工作？

关于如何让事情发挥作用的任何指示？

我看到 gcc 手册中的示例具有相同的行为：

```
int test() {
  int a,b,c,d;
#pragma GCC diagnostic warning "-Wuninitialized"
  foo(a);                  /* warning is given for this one */
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wuninitialized"
  foo(b);                  /* no diagnostic for this one */
#pragma GCC diagnostic pop
  foo(c);                  /* warning is given for this one */
#pragma GCC diagnostic pop
  foo(d);                  /* warning is given here too, for some reason */
} 
```

# html - 如何在调整大小时缩放导航栏

> ID：15014662
> 
> 赞同：0
> 
> 时间：2013-02-22T00:11:29.353
> 
> 标签：html, css

到目前为止，我有一个简单的网站，但有两个问题。我已经用百分比完成了所有事情，因为该网站可能会在高清电视上上升，我希望它们能够很好地扩展。缩放适用于图像，但 id 也喜欢缩放导航栏背景和文本，使其最终看起来不小。

第二个问题是当网站被压扁时，底部图像会覆盖导航栏并且不会在导航栏元素下方流动。我很喜欢这个功能，因为它可以很好地适用于智能手机。

这是html：

```
 <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="headish.css">
    <title>New Site</title>
  </head>
  <body>
    <div id="container">
        <div id="tophead">
            <img src="images/logo.png" alt="logo" />    
            <ul>
                <li><a href="#" title="About Us">About Us</a></li>
                <li><a href="#" title="Biographies">Biographies</a></li>
                <li><a href="#" title="Services">Services</a></li>
                <li><a href="#" title="Careers">Careers</a></li>
                <li><a href="#" title="Contact">Contact</a></li>
            </ul>
        </div>
        <div id="maincont">
          <img src="images/second.png" alt="image">
        </div>
    </div>
    </div>
  </body>
</html> 
```

这是CSS：

```
 html, body, #container {
    height: 100%;
    width: 100%;
    margin: 0;
    position: relative;

}

#tophead {
    height: 20%;
    width: 80%;
    margin: auto;
    text-align: center;

}

#tophead img {
    height: 100%;
    width: auto%;

}
#tophead ul {
    list-style: none;
    display: inline-block;
    font-size: 0;

}
#tophead li {
    display: inline-block;

    }
#tophead a {
  background: #2dbaf0;
  color: #fff;
  display: block;
  font-size: 16px;
  font-family: "arial";
  font-weight: bold;
  padding: 0 20px;
  line-height: 38px;
  text-transform: uppercase;
  text-decoration: none;

}
#tophead a:hover {
  background: #f8a52b;
  color: #fff;
  -webkit-transition-property: background;
  -webkit-transition-duration: .2s;
  -webkit-transition-timing-function: linear;
}
#tophead li:first-child a {
  border-left: none;
  border-radius: 5px 0 0 5px;
}
#tophead li:last-child a {
  border-right: none;
  border-radius: 0 5px 5px 0;
}
#maincont {
    padding-left: 10%;

    }
#maincont img{
    border-radius: 7%;
    width: 30%;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:40:44.387

要阻止图像流入其他元素，`clear:both`请在您的`#maincontent img`

编辑：可以在这里找到一篇很好的文章，它建议了其他方法。[http://quirksmode.org/css/clearing.html](http://quirksmode.org/css/clearing.html)

Edit2：这只适用于浮动元素，我刚刚注意到你根本没有使用浮动元素。看我下面的评论

# jquery - JQuery：遍历所有 多个元素 element I have a multiple element as follows: <select id="mySelect" multiple=""><option value="1">Option 1</option> <option value="2">Option 2</option> <option value="3">Option 3 ID：15014663 赞同：2 时间：2013-02-22T00:11:29.947 标签：jquery 回答 #1 赞同：8 时间：2013-02-22T00:14:01.773 您的选择器缺少#： $('#mySelect option').each(function(){ ... }); ^ 没有#，您将寻找<mySelect>元素。 回答 #2 赞同：5 时间：2013-02-22T00:14:06.390 可能你错过了ready function类似的东西： LIVE DEMO $(function(){ // DOM is ready var myOptions = [] ; $('#mySelect option').each(function(){ myOptions.push( this.value ); }); alert( myOptions ); // 1,2,3 }); 回答 #3 赞同：3 时间：2013-02-22T00:14:12.570 将其更改为： $('#mySelect option') 现在你有它： $('mySelect option') 它正在寻找 type 的元素mySelect。# 指定您正在匹配 ID</option></select>

# c# - 如何处理非常大的数据库

> ID：15014665
> 
> 赞同：1
> 
> 时间：2013-02-22T00:11:34.683
> 
> 标签：c#, .net, wpf, database, performance

我有一个`DataTable`可以放置数十万条记录的文件。这是一个巨大的内存开销，所以我添加了一个功能，用户只能在我的应用程序中可视化前 200 条记录，并且可以将其余结果导出到 CSV 文件。

但是，为了导出到 CSV 文件，我使用的方法是将 a 的内容转换为`DataTable`CSV 文件。由于我可以在 DataTable 中有超过 100K 的记录，我认为将所有记录放入 DataTable 并映射到 CSV 文件会占用太多内存。会推荐什么方法？这是我的 CSV 映射代码：

```
StringBuilder builder = new StringBuilder();

            IEnumerable<string> columnNames = dtResults.Columns.Cast<DataColumn>().Select(column => column.ColumnName);
            builder.AppendLine(string.Join(",", columnNames));

            foreach (DataRow row in dtResults.Rows)
            {
                IEnumerable<string> fields = row.ItemArray.Select(field => DisplayCommas(field.ToString()));
                builder.AppendLine(string.Join(",", fields));
            }

            File.WriteAllText(filename, builder.ToString()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:55:28.530

我会去老学校并使用sqlcmd。就像是：

```
sqlcmd -q "select field1,field2,field3 from mytable" -oc:\output.csv -h-1 -s"," 
```

[http://msdn.microsoft.com/en-us/library/ms162773.aspx](http://msdn.microsoft.com/en-us/library/ms162773.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:57:18.653

放弃 DataTable 并使用 DataReader。依次读取您需要的记录并随时构建 CSV 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T12:38:11.007

正如其他人所建议的那样，鉴于您的要求，应避免在此处使用重量级 DataTable。因此，使用其提供者的数据读取器从源中流式传输数据将为您提供最佳性能，同时保持纤薄的内存配置文件。

我进行了一些快速搜索，但无法提出任何 csv 库实现（有很多，远非详尽的搜索）吹捧使用 DataReader 轻松即插即用。然而，使用 CSV 库（我之前成功使用过 FileHelpers 和 kbcsv）来处理文件写入、从查询中加载数据读取器、在开始循环之前告诉 csv 写入器列名然后只需让作者处理将结果流式传输到磁盘即可。

在此期间您可能会增加一些内存，因为文件写入流可能会有一个不错的缓冲区，但与以数据表为中心的方法相比，它**的**内存消耗要少得多。以这种方式使用具有大型结果集的数据读取器，我真正看到的唯一缺点是长时间运行的查询可能会从 ADO.NET 数据提供程序中消耗，但这完全是提供程序特定的（但一个常见问题）沿着这条路线走下去，您可以查看数据库方面是否有问题。

希望有帮助。

# c# - 一个程序能否响应另一个应用程序中的事件

> ID：15014673
> 
> 赞同：2
> 
> 时间：2013-02-22T00:12:23.260
> 
> 标签：c#, windows, events

我的任务是用 C# 编写一个 Windows 应用程序，它将数据连接并传输到 API。我希望每当用户在单独的应用程序中执行某个操作时都会发生这种情况。

用户有一个软件，它在 SQL 数据库中显示一个表，其中包含最近收到的订单数据。用户可以选择任意数量的订单行，表明订单已经发货，程序会自动将相应的信息放入另一个包含发货订单数据的 SQL 表中。此时，任何移动的数据都可以选择保存到任何格式的文件中。每当用户执行此操作时，我希望 C# 程序捕获有关已发货订单的数据，并执行其操作。

这是一个根本有缺陷的想法吗？如果是这样，我最好的选择是什么来获得我正在寻找的那种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T00:15:58.910

您没有提供大量详细信息，但[`SqlDependency`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)符合您的给定要求。

*   [在 Windows 应用程序中使用 SqlDependency](http://msdn.microsoft.com/en-us/library/a52dhwx7%28v=vs.80%29.aspx)
*   [ASP.NET 应用程序中的 SqlDependency](http://msdn.microsoft.com/en-us/library/9dz445ks.aspx)

# ruby-on-rails-3 - 带有 Jader 的 Rails 出现“无法要求“fs””错误

> ID：15014680
> 
> 赞同：0
> 
> 时间：2013-02-22T00:12:55.327
> 
> 标签：ruby-on-rails-3, pug

我正在尝试使用由 Ruby on Rails 预编译并可通过 JST 获得的客户端 Jade 模板。

我添加了翡翠宝石

`gem "jader", "~> 0.0.8"`

在配置/初始化程序中，我创建了一个名为 jamr.rb 的初始化程序，其中包含：

```
Jader.configure do |config|
  config.views_path = Rails.root.join('app','assets','javascripts','views')
  config.mixins_path = Rails.root.join('app','assets','javascripts','mixins')
end 
```

在 app/assets/javascripts/views 我添加了一个 index.js.jst.jade 文件

```
Hello World! 
```

最后在我的 javascript 文件中，我有：

```
$('#app-content').append(JST["views/index"]()); 
```

当我运行 Rails 并浏览到触发代码的页面时，我收到以下错误：

```
failed to require "fs"
  (in /my-project/app/assets/javascripts/views/index.js.jst.jade) 
```

我知道问题是jade是一个node.js项目并且require函数有问题。如何修复 require 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T18:29:37.883

如果您正在考虑仅在客户端使用 Jade 模板（使用 Rails 资产管道），我推荐[https://github.com/inossidabile/jade](https://github.com/inossidabile/jade)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T20:16:41.273

您的 index.jade 模板中可能有错误。从[这里的玉 rails-fix pull request](https://github.com/visionmedia/jade/pull/794)来看，rails 使用的 ExecJS 不支持 require("fs") 并且即使是模板错误也会抛出 'failed to require "fs"。希望这应该为您指明正确的方向。

要调试，您可以将 index.jade 模板的内容替换为 1-liner 翡翠占位符，以查看它是否呈现良好。或者，如果可能的话，尝试使用 nodejs 服务器渲染 index.jade 模板，以确保模板渲染时没有任何抱怨。

# c - Deflate：在没有 zlib（或任何其他库）的情况下解压缩 PNG

> ID：15014681
> 
> 赞同：3
> 
> 时间：2013-02-22T00:13:08.550
> 
> 标签：c, png, deflate

前几天，我想我会更多地了解图像压缩。我研究了 .png 及其各自的压缩算法，我希望能够在没有任何其他库的情况下解压缩文件，以此作为我了解有关数据压缩的更多信息的一种方式。我很难找到有关如何在没有第三方库的情况下解压缩 png 的信息，并希望有人能够指出我正确的方向或简要解释它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T00:20:42.627

我会先阅读有关 DEFLATE 压缩的信息，例如在[wikipedia](http://en.wikipedia.org/wiki/DEFLATE)或[RFC 1951](https://www.rfc-editor.org/rfc/rfc1951#section-Abstract)上，因为这是 PNG 压缩的基础（至少根据[wikipedia](http://en.wikipedia.org/wiki/Portable_Network_Graphics#Compression)）。还有一个简短的解释，可以在 DEFLATE 之前进行过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T04:49:34.577

如果你想解压缩 deflate 数据，你需要能够找到它。所以你应该首先了解[PNG文件的结构](http://www.libpng.org/pub/png/spec/iso/index-object.html)。然后看其他答案。

# objective-c - 从 xcode 中的其他目录导入文件

> ID：15014685
> 
> 赞同：3
> 
> 时间：2013-02-22T00:13:26.800
> 
> 标签：objective-c, xcode

我有以下目录结构。

```
A
 |---B
 |   |---C
 |   |---D
 |
 |
 |---E
 |   |---F
 |   |---G 
```

我有 A 目录下有 B 和 E。在 B 中，我有 C 和 D 文件，在 EI 中有 F 和 G 文件。

我正在处理 G 文件，我需要导入 D 文件。我怎么做 ？如果我直接写 import "Gh" 它会抛出错误，因为它将在 E 文件夹中搜索。如果我使用 import ，它的抛出错误。请让我知道如何在 Xcode 中遍历目录。我正在使用最新版本的 XCode（Xcode 4.6）。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:36:36.440

如果您已将文件正确添加到项目中，您应该能够编写

```
#import "G.h" 
```

因为物理位置应该不是问题。Xcode 应该跟踪这些。

尝试删除并重新添加有问题的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:51:22.880

您可以直接在项目或目标构建设置中将“B”添加到“标题搜索路径”。

添加`"${SRCROOT}"`以`HEADER_SEARCH_PATHS`包含您的源目录。在您的示例中，它指向`A`. 如果将其设置为`recursive`它将检查所有子文件夹（包括`B`）。`"${SRCROOT}/B"`你只会在文件夹中包含头文件`B`。如果路径中有空格，则需要引号。

但是，如果所需的文件（Gh）在您的 xcode-project 中，则您不需要这样做。尝试按照 Mundi 的建议重新添加文件。

[苹果开发者文档：SRCROOT](http://developer.apple.com/library/mac/documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html#//apple_ref/doc/uid/TP40003931-CH3-SW38)

# c++ - std::transform 用于向量的向量

> ID：15014686
> 
> 赞同：3
> 
> 时间：2013-02-22T00:13:32.417
> 
> 标签：c++, vector, nested, range, transform

我在 vector< vector < double>> 中有数值数据，需要向它们添加标量值，如下所示：

```
vector <vector<double> > data ( M, vector<double>(N) );
vector <double>scalars(N);

data[0][0]     += scalars[0];
data[0][1]     += scalars[1];
...
data[0][N-1]   += scalars[N-1];

data[1][0]     += scalars[0];
data[1][1]     += scalars[1];
...
data[1][N-1]   += scalars[N-1];

...

data[M-1][N-1] += scalars[N-1]; 
```

当然，这可以通过两个 for 循环来实现。我想知道它是否可以像转换、绑定和加号一样简单地完成？我正在尝试尽可能使用仿函数（尽管出于习惯仍然使用旧的 C 样式代码）。

内部循环需要对数据中的向量 0 执行此操作：

```
transform ( data[0].begin(), data[0].end(), 
            scalars[0].begin(), 
            data[0].begin(), 
            plus<double>() ) 
```

是否可以将这一行中的 data[0] 替换为另一个计数器（与 data[0]..data[N-1] 的转换有关）？这可能是一个标准问题，但我找不到很好的参考。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T00:25:16.450

那么以下内容呢，只需将您的包装`transform`在一个`for_each`?

```
std::for_each( data.begin(), data.end(), 
               [&scalars](std::vector<double>& v) {
                  transform ( v.begin(), v.end(),
                              scalars.begin(),
                              v.begin(), plus<double>() );
                } 
             ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T00:43:54.067

如果您没有可用的 lambda，您可以实现一个仿函数来转换每个`vector<double>`：

```
struct transformer
{
    transformer(vector<double>& s)
    :s_(s)
    {
    }

    vector<double>& operator ()(vector<double>& v)
    {
        transform(v.begin(), v.end(), s_.begin(), v.begin(), plus<double>());
        return v;
    }

    vector<double> s_;
}; 
```

并在你的电话中使用它来`transform`为你`vector`的`vector<double>`：

```
transform(data.begin(), data.end(), data.begin(), transformer(scalars)); 
```

# gmock - gmock 匹配器与我的引用不匹配

> ID：15014691
> 
> 赞同：1
> 
> 时间：2013-02-22T00:14:03.977
> 
> 标签：gmock, matcher

我在像这样的类中有一个模拟函数

```
int foo(const bar& b) const; 
```

这被嘲笑为

```
MOCK_CONST_METHOD1(foo, int(const bar& b)); 
```

我为此设置了一些默认操作，例如

```
ON_CALL(anObject, foo(bar(0,0))).WillByDefault(Return(1)); 
```

我的测试代码调用

```
anObject.foo(bar(0,0); 
```

但 gmock 没有返回 1，而是给了我以下错误：

```
Uninteresting mock function call - returning default value.
Function call: foo(@0xbfffcf90 8-byte object <00-00 00-00 00-00 00-00>)
The mock function has no default action set, and its return type has no default value set. 
```

`operator ==`是为对象定义的`bar`。为什么 gmock 找不到我的默认操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:26:33.610

错误不在上面的代码中。该`ON_CALL`声明在测试代码之后。

简单的答案：**确保在任何代码调用模拟方法之前都有 ON_CALL 语句。**

# database - heroku 上的 pg_largeobject 访问

> ID：15014692
> 
> 赞同：6
> 
> 时间：2013-02-22T00:14:05.610
> 
> 标签：database, postgresql, heroku

我正在尝试清理 heroku 上的 postgres 数据库，其中一些大对象已经失控，我想删除不再使用的大对象。

在我的开发机器上，我可以这样做：

```
select distinct loid from pg_largeobject 
Where loid Not In (select id from table ) 
```

然后我运行：

```
SELECT lo_unlink(loid) 
```

在每个 ID 上。

但是在heroku上，我无法运行任何选择`pg_largeobject`，甚至

```
select * from pg_largeobject limit 1; 
```

给我一个错误：

```
ERROR:  permission denied for relation pg_largeobject 
```

`pg_largeobject`有什么建议可以解决这个问题，或者实际上为什么我们在 heroku 中没有读取权限？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T16:21:02.343

从 PostgreSQL 9.0 开始，非超级用户无法访问`pg_largeobject`. 这记录在发行说明中：

> 添加使用 GRANT/REVOKE (KaiGai Kohei) 控制大对象 (BLOB) 权限的功能
> 
> 以前，任何数据库用户都可以读取或修改任何大对象。现在可以为每个大对象授予和撤销读取和写入权限，并跟踪大对象的所有权。

如果它适用于您的开发实例，则可能是因为它的版本`8.4`或更低，或者因为您以超级用户身份登录。

如果您无法在 heroku 上以超级用户身份登录，我想您可以使用 转储远程数据库`pg_dump`，然后在本地重新加载，将泄漏的 OID 识别为本地超级用户，将它们放入带有`lo_unlink`命令的脚本中，最后播放这个针对 heroku 实例的脚本。

**更新：**

根据 psql`\dl`命令查询数据库的方式，似乎`pg_catalog.pg_largeobject_metadata`可以通过以下查询检索所有大对象的 OID 和所有权：

```
SELECT oid as "ID",
  pg_catalog.pg_get_userbyid(lomowner) as "Owner",
  pg_catalog.obj_description(oid, 'pg_largeobject') as "Description"
  FROM pg_catalog.pg_largeobject_metadata   ORDER BY oid 
```

因此，对于 9.0+ 的非超级用户，可以将查找泄漏的大对象的初始查询更改为：

```
select oid from pg_largeobject_metadata
 Where oid Not In (select id from table ) 
```

`lomowner`如有必要，可以添加一个条件来过滤特定用户拥有的大型对象。

# wcf - WCFExtras XmlComments ...它们在哪里？

> ID：15014694
> 
> 赞同：3
> 
> 时间：2013-02-22T00:14:07.403
> 
> 标签：wcf, wcf-extensions

我花了最后 3 个小时试图让 WCFExtras 使用他们在 codeplex 站点以及其他地方描述的步骤将我的 XML 注释输出到我的 WSDL。最终，我发现 WCFExtras 还生成了第二个 WSDL，可作为单个文件使用，并且 XML 注释在*该*文件中。

我的问题是——因为我在任何地方都找不到这些信息——它应该是这样工作的吗？WCFExtras 的意图是从不尝试在 WSDL WCF 中输出 XML 注释吗？ WCF 已经自动生成了？如果我有兴趣获得这些评论，我是否应该从现在开始生成这个其他 WSDL 文件？

我希望这里有人知道。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-29T17:50:35.577

我花了一些时间试图弄清楚我做错了什么，但我忘了选中`XML documentation file`复选框，在`Properties -> Build`. 谢谢[武青荣](http://vthanhvinh.blogspot.com.br/2015/05/wcfextras-and-xml-comment-doesnt-work.html)。

[![在此处输入图像描述](../Images/ad8a18512f1bc41c01112b955adb1052.png)](https://i.stack.imgur.com/2uy0u.png)

现在，WSDL 包含`wsdl:documentation`标签，但我还有另一个问题：`wsdl:documentation`包含完整的 XML 文档，包括`<summary>`标签。

如果我发现其他内容，我会更新答案。

# php - 为什么我的所有查询都有效，除了这个？尽管不在 PHP 中工作，但它在终端中工作正常

> ID：15014700
> 
> 赞同：-2
> 
> 时间：2013-02-22T00:14:21.200
> 
> 标签：php, mysql, mysqli

我有以下代码块：

```
$result = $db->query("SELECT username FROM users WHERE id = 1");
while ($row = $result->fetch_assoc()) {
    echo $row["username"];
} 
```

但是，这不起作用，我收到了这个可怕的致命错误：致命错误：在非对象上调用成员函数 fetch_assoc()

但是，如果我在 Sequel Pro 之类的程序中运行它，我会得到：http: [//i.imgur.com/X4DpmHt.png](http://i.imgur.com/X4DpmHt.png)

此外，所有其他检索语句都可以在我的代码中使用。只是没有这个。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:18:39.353

该错误似乎表明 $db 未初始化，或者 $result 为空...您在该循环中做出了一些假设，但对于这些变量中的一个实际持有的内容是不正确的。

# ruby-on-rails - 使用 Omniauth 创建 Rspec 测试

> ID：15014701
> 
> 赞同：5
> 
> 时间：2013-02-22T00:14:24.613
> 
> 标签：ruby-on-rails, rspec, omniauth

Rails 菜鸟在这里。我无法理解如何/如何测试有关使用 Omniauth-Facebook 进行身份验证的内容。与相关的 railscast 几乎有类似的设置。我的测试环境设置类似于之前的问题和 Gem wiki 中描述的内容。

几个问题。当您创建用户工厂时，如何获得结果对象来模拟身份验证？

运行以下代码时还会发生什么？

```
before do 
  request.env["omniauth.auth"] = OmniAuth.config.mock_auth[:facebook]
  visit '/auth/facebook'
end 
```

对象是否保存在数据库中？

我在下面添加了一些示例规格和工厂规格。安装文件再次`spec_helper`将测试模式配置设置为 true。

`add_mock`设置：

```
OmniAuth.config.add_mock(:facebook,
                         { :provider => 'facebook',
                           :uid => '1234567',
                           :info => { :name => 'Jonathan', :image => 'http://graph.facebook.com/1234567/picture?type=square'},
                           :credentials => {
                             :expires_at => 1351270850,
                             :token=> 'AAADzk0b791YBAHCNhBI3n6ScmWvuXTY4yIUqXr9WiZCg1R808RYzaHxsHnrbn62IwrIgZCfSBZAVIP6ptF41nm8YtRtZCeBbxbbz1mF8RQZDZD'
                            } }) 
```

用户页面规格：

```
describe "user pages" do

  let(:user) { Factory.create(:user) }

  describe "sign_in" do
    before { visit '/' }

    it "should add a user to the User model" do 
      expect { click_link "sign_in" }.to change(User, :count).by(1) 
    end

    it "should route to the appropriate page if email is nil" do
      click_link "sign_in"
      page.should have_selector('h5', text: 'Edit Email')
    end

    it "should redirect to the show page upon" do
      user.email = 'example@stanford.edu'
      user.save!
      click_link 'sign_in'
      page.should have_selector('div', text: user.name)
    end
   end
end 
```

工厂

```
FactoryGirl.define do
  factory :user do
    provider  "facebook"
    uid       '1234567'
    name      'Jonathan'
  end
end 
```

# entity-framework - 如何管理实体框架模型的第一个模式更新？

> ID：15014705
> 
> 赞同：1
> 
> 时间：2013-02-22T00:14:59.260
> 
> 标签：entity-framework

我首先使用 Entity Framework 5 模型。假设我已经部署了应用程序，并且我想用新列升级 EF 实体，基本上是向表中添加列。

在不丢失数据的情况下升级现有数据库的最佳方法是什么？例如，我有一个用户表，我向其中添加了两个新列。如果我尝试编写模式更改脚本，则需要删除表才能添加新列。有没有办法更新表而不需要重新创建它们？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:31:28.680

这可能是一个迟到的答案，但我遇到了同样的问题，只能找到一个解决方案，有一个应用程序可以更新模型优先生成的数据库而不会丢失数据。它可以直接打开模型文件并更新数据库表。它还在 Visual Studio 上安装了一些我没有亲自使用但可能可用的扩展。名称是 Entity Developer，这里列出了应用程序的一些版本： [Entity Developer Editions](http://www.devart.com/entitydeveloper/editions.html) 免费版仅可用于 10 个或更少的实体，可能不适合您的需求，但专业版可作为试用版使用 30 天，可能帮助您完成工作。我能在网上找到的唯一解决方案就是这个。希望它可以帮助您解决问题。

# java - 让 jsvc 在 OSX 上运行

> ID：15014706
> 
> 赞同：3
> 
> 时间：2013-02-22T00:15:02.360
> 
> 标签：java, macos, jsvc

我正在尝试重现这篇文章中编写的代码：

[如何使用 jsvc 将 java 程序转换为守护进程？](https://stackoverflow.com/questions/7687159/how-to-convert-a-java-program-to-daemon-with-jsvc)

没有花哨的 bash 脚本。

我创建了罐子。这是我正在运行的命令：

```
jsvc -verbose -outfile tmp/example.out -cp /pathto/commons-daemon-1.0.13/commons-daemon-1.0.13.jar:/pathto/MyProject.jar my.package.MyClass 
```

现在......这绝对没有任何作用。没有任何输出。我什至用脚本尝试过。又没有输出了。而且由于 jsvc 根本不会抛出任何类型的错误，我不知道问题是什么。

我什至尝试使用`-server`或运行它`sudo`。然后我可以看到它出现在进程下，但它仍然什么都不做。详细信息也不做任何事情并且`JAVA_HOME`配置正确。

任何线索/想法？有人在 OSX 下做过这项工作吗？

编辑：

日志记录是系统输出，根据该帖子和 jscv 的手册应在输出文件中捕获。

是的，我确实尝试设置错误文件。再一次没有运气，它甚至没有被创造出来。

我试着给它一个用户。并且代码与链接问题中的代码完全相同，这就是为什么我没有将这张票弄乱的原因。

我编译了我的 jsvc 并且没有安装 tomcat。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T07:34:15.193

你试过带着`-debug`国旗跑吗？它会吐出大量有用的信息，说明为什么事情可能没有按预期运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-07T10:25:03.593

就我而言，它可以设置`-outfile`和`-errfile`标准输出和标准错误。尝试：

```
-outfile '&1' -errfile '&2' 
```

# select - SQL Server 2008 在 Select 语句中为多个实例提供一次值

> ID：15014711
> 
> 赞同：1
> 
> 时间：2013-02-22T00:15:23.707
> 
> 标签：select, sql-server-2008-r2

在此先感谢您的帮助。

我正在处理一个名为 CustSalesbyRoute 的现有查询。我最近对其进行了更改，以获得客户对路线停靠点的不同计数，并且此信息存储在我为 CustRouteStops 创建的单独表中。但是，查询还包括产品系列，因此这重复了我不同的 Route-Stop 计数。我已经确认有几个报告使用此表中的产品系列来提取各种数据，否则，我将删除此列，一切都会很好。我也知道这本质上违背了关系数据库的完整性。但是，我要继续努力，我希望有一个等效于 Excel 的 FREQUENCY/MATCH 函数或 SUMPRODUCT 等的解决方案。

问题是这样的：有没有办法为具有多个 Product Family 值的行的第一个实例显示 Customer Route-Stops 值，并为同一客户/路线组合的任何其他行显示 0？例如，如果我包含 Product Family，则查询现在正在执行以下操作：

```
CustID    ProdFamily    Route   #ofStops 
10001     Dairy          101      14
10001     Dry Groceries  101      14
10001     Meat           101      14 
```

这是我希望看到的，因为我需要将 Product Family 留在表格中：

```
CustID    ProdFamily    Route  #ofStops 
10001     Dairy          101     14  <<< 1st instance will provide the Stops value
10001     Dry Groceries  101      0  <<< remaining rows for same Cust# and Route will show 0
10001     Meat           101      0 
```

再次感谢！

# mysql - MySQL - 计算一个表中的记录并汇总另一表中的记录

> ID：15014713
> 
> 赞同：0
> 
> 时间：2013-02-22T00:15:57.570
> 
> 标签：mysql, sql

我知道这类似于这个问题：[MySQL Query - Sum one related table - Count another related table](https://stackoverflow.com/questions/11652394/mysql-query-sum-one-related-table-count-another-related-table)但我无法让它为我工作。

我有 3 张桌子：

*   `Event`
*   `Attendee`
*   `Gifts`

对于每个`Event`，我们需要总结 的数量`Attendees`和总量`Gifts`。一个`Attendee`人可能会或可能不会收到礼物。

我可以让它工作，这样如果我忽略礼物总数，我会得到这个查询的正确答案：

```
SELECT event.name AS name, count( * ) AS num_attendee
FROM attendee
RIGHT JOIN event on event.id = attendee.event_id 
WHERE event.company_id =6
GROUP BY event.id 
```

但我不知道如何总结每个事件`Gift.Amount`给所有人的礼物（即价值） 。`Attendees`当我尝试`Gift`根据`event_id`所有数字简单地加入表格时，就会变得古怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:19:44.577

您是否正确地进行连接？您应该在礼物表中同时包含活动和参与者：

```
from attendee right join
     event
     on event.id = attendee.event_id right join
     gifts
     on event.id = gifts.event_id and attendee.id = gifts.attendee_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:40:15.003

这在 MS-SQL 2000 中没问题：

```
SELECT event.name AS name, count( * ) num_attendee ,amount
FROM attendee
RIGHT JOIN event on event.id = attendee.event_id 
LEFT OUTER JOIN(
    SELECT event_id,amount=SUM(Amount)
    FROM Gifts
    GROUP BY event_id
) Gifts ON Gifts.event_id=event.id
WHERE event.company_id =6
GROUP BY event.name,amount 
```

# objective-c - NSRange 异常

> ID：15014715
> 
> 赞同：0
> 
> 时间：2013-02-22T00:15:59.653
> 
> 标签：objective-c, sqlite, ios-simulator, xcode4.2

我的日志说我的应用程序由于未捕获的异常 'NSRangeException' 而正在终止应用程序，原因：' *** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array'

```
if (sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) !=SQLITE_OK)
        {
            NSLog(@"Problem with prepare statement");
        } 
```

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:39:01.310

如果这确实是违规行，则唯一可能为空的数组是您的`char`数组`sqlStatement`。确保它被正确定义并包含您期望的内容。

# c - C 用未定义的符号编译

> ID：15014717
> 
> 赞同：1
> 
> 时间：2013-02-22T00:16:08.650
> 
> 标签：c

我使用的是旧版本的 Diab C 编译器。

在我的代码中，我取了一个函数名并将其重新定义为具有相同签名的函数指针。在进行此更改之前，代码有效。更改后，它导致嵌入式系统锁定。

函数指针在头文件中声明为 extern，在一个 .c 文件中定义，并在另一个 .c 文件中使用。当从第二个 .c 文件调用它时，它会导致系统锁定。当我尝试使用 sprintf 添加调试信息时，它最终告诉我这是一个未定义的符号。我意识到头文件未包含在第二个 .c 文件中。当我#included 时，所有内容都已编译并正常工作。

我的问题是，即使符号在调用位置未定义，是否有一些 C 规则允许编译器推断函数签名？据我了解，在我进行任何更改之前很久就应该出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:18:39.520

如果没有可用的声明，则编译器使用函数的默认声明，该函数采用未知数量的参数并返回一个 int。如果您出现编译器警告（例如`-Wall -Wextra -Werror`，使用 gcc，请检查编译器的文档），您应该会收到编译时警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T00:33:05.663

最有可能的是，该代码最初可以工作，因为它是在 C89 或类似模式下编译的。1989 年的 C 标准允许在不首先声明函数的情况下调用函数。

当您更改代码以使用指针但不包含指针的声明时，编译器会假定您的指针实际上是一个函数并生成调用指针的代码，就好像指针内部有可执行代码一样。结果，程序停止工作是可以理解的。

您应该做的是启用所有可能的警告（对于 gcc: `-Wall`，`-Wextra`并确保启用优化（`-O2`很好），因为它启用代码分析），特别是对于调用没有原型的函数。更好的做法可能是将编译器切换到 C99 模式（`-std=c99`在 gcc 中）或切换到 C99 编译器。1999 年的 C 标准禁止调用没有原型的函数，并带有一些 C89 中没有的有用特性。

# r - 阶乘 for 循环

> ID：15014719
> 
> 赞同：1
> 
> 时间：2013-02-22T00:16:28.510
> 
> 标签：r, loops, for-loop, factorial

我创建了以下函数来计算给定数字的阶乘：

```
factorial <- function(x){
y <- 1
for(i in 1:x){
y <-y*((1:x)[i])
print(y)
}

}

factorial(6)

in console:

[1] 1
[1] 2
[1] 6
[1] 24
[1] 120
[1] 720 
```

6!=720 所以显然最后一个数字是正确的，并且计算确实适用于所有数字。

问题是我只想将最后一个数字打印到控制台，有什么办法吗？我一直在尝试将 y 转换为函数中的向量，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T00:19:21.437

将打印语句移到循环外？

```
for(i in 1:x){
    y <-y*((1:x)[i])
}
print(y) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T00:23:21.233

`print`打印到屏幕上。函数将返回最后一个计算表达式的结果（或显式`return`值）。你想返回值并打印它吗？

话虽如此

`R`已经有一个函数`factorial`调用`gamma(x+1)`，使用整数值的事实[`gamma(x+1) == x!`](http://en.wikipedia.org/wiki/Gamma_function)

所以

```
factorial(6)

gamma(7) 
```

您编写的函数在乘以大数时会出现整数溢出问题，并且由于您`y`在循环中反复重新分配（递归时不需要），因此效率非常低

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T00:22:38.023

只需将`print()`外部循环

```
factorial <- function(x){
y <- 1
for(i in 1:x){
y <-y*((1:x)[i])
}
print(y)
} 
```

你可以改进这个功能......为什么`(1:x)[i]`而不只是`i`？为什么`print()`而不是`return()`？最重要的是：为什么不使用`factorial()`基础包？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-06T10:04:19.393

```
# take input from the user
n <- as.integer(readline(prompt="Enter a number: "))
factorial = 1 #set factorial variable to 1

# check is the number is negative, positive or zero
if(n < 0) {
  print("factorial does not exist for negative numbers")
} else if(n == 0) {
  print("The factorial of 0 is 1")
} else {
  for(i in 1:n) #for loop to expand n up to 1
    {
    factorial = factorial * i 
  }
  print(paste("The factorial of", n ,"is",factorial))
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-27T14:06:20.893

您可以在代码末尾使用 return 函数来定义阶乘函数：

```
factorial<-function(x){
        y<-1
        for(i in 1:x) {
        y<-y*((1:x)[i])
                      }
        return(y) 
            } 
```

# c# - 根据用户输入动态过滤显示的文本

> ID：15014722
> 
> 赞同：0
> 
> 时间：2013-02-22T00:16:45.330
> 
> 标签：c#

我正在尝试制作一个工具来获取格式化的文本文件，该文件存储我们的日志信息并仅返回其中的某些部分。例如，日志文件如下所示：

```
[TimeStamp] <Config>: Configuration note is shown here
[TimeStamp] <Info>: Information is written here   
[TimeStamp] <Info>: More Information
[TimeStamp] <Step>: A generated step is writing a message
[TimeStamp] <Warning>: A warning is logged
[TimeStamp] <Error>: An error has occurred 
```

我想从文件中获取此文本，并根据尖括号中每种日志消息类型的复选框，用户可以隐藏他们不想看到的内容。例如取消选中“Step”复选框会隐藏 Step 行，但如果他们重新选中它，它将重新出现在文本窗口中。

我尝试将每一行存储到一个字符串中，该字符串存储在一个列表中以保持每一行的顺序，但是这种方法在更改文本时非常慢。方法如下图

```
logTextbox.Text = "";
foreach (string line in CompleteLog) //CompleteLog is list containing each line in log file
{
   if (CheckLine(line)) //Checks line based on what the user wants to see
   {
      WriteLine(line);
   }
} 
```

任何建议都会非常受欢迎

编辑：

```
 private bool CheckLine(string line)
    {
        int left = line.IndexOf('<');
        int right = line.IndexOf(">:");

        string logtype = line.Substring(left+1, right - left-1);
        if (ValidLogs.Any(p => p.ToLower().Equals(logtype.ToLower())))
        {
            return true;
        }

        return false;
    } 
```

ValidLogs 是一个字符串列表，其中包含允许在加载时设置的内容，并在与日志类型对应的复选框的检查事件中更改。上面的第一种方法用于加载和每个检查事件来更新显示的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:03:22.867

Assuming you don't have memory limitations or excessively large files and your filter criteria are fixed you could pre-parse each line for the filter criteria and store the filter details on a log object you'd then have objects with simple properties to check rather having to re-parse everytime.

```
public class LogLine {
       public string Text { get; set; }
       public eLogLevel LogLevel { get; set; }
       // other filter properties
} 
```

Then you would change your CheckLines() to filter the list of LogLine objects.

```
logTextbox.Text = "";
foreach (LogLine line in ParsedLog) //ParsedLog is list containing each line in log file pre-parsed
{
   if (CheckLine(line)) //Checks line based on what the user wants to see
   {
      WriteLine(line.Text);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:27:21.553

我认为实现这一点的最佳方法是使用 listview 控件。您可以在文本文件中每行添加一个项目，然后根据复选框过滤显示的项目（行）。我可以推荐[ObjectListView](http://objectlistview.sourceforge.net/cs/index.html "对象列表视图")作为实现这一目标并使其看起来更漂亮的一种方式。

# objective-c - 多次调用时，NSString 到 NSDate 不起作用

> ID：15014726
> 
> 赞同：0
> 
> 时间：2013-02-22T00:17:07.043
> 
> 标签：objective-c, cocoa, xcode4.6

我在一个类中编写了这个函数：

```
- (NSDate *) convertDate : (NSString *) dateStr{
  NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
  [dateFormatter setDateFormat:@"dd-MM-yyyy"];
  [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
  NSDate *dateFrmStr = [[NSDate alloc] init];
  dateFrmStr = [dateFormatter dateFromString:dateStr];
  return dateFrmStr;
} 
```

我在另一个类中调用这个函数，如下所示：

```
NSString * dateStr1 =@"01-01-1977";
NSString * dateStr2 =@"22-12-1977";
NSString * dateStr3 =@"19-01-1978";

MyClass *data = [[MyClass alloc]init];

NSDate *dateObj1 = [data convertDate:dateStr1];
NSDate *dateObj2 = [data convertDate:dateStr2];
NSDate *dateObj3 = [data convertDate:dateStr3];
NSLog(@" >>> dateObj1 %@",dateObj1);
NSLog(@" >>> dateObj2 %@",dateObj2);
NSLog(@" >>> dateObj3 %@",dateObj3); 
```

当我运行它时，唯一的第一个日期似乎被转换了，因为我得到的输出是：

```
>>> dateObj1 1977-01-01 00:00:00 +0000 
```

没有错误，只是程序停止了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:52:15.890

会不会

NSString * dateStr2 =@"22-12-1977";

那 NSDate 认为 22 是一个月？？？也许尝试 12-22-1977 代替？我通常使用 NSDateFormatter 转换为字符串或日期..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:41:26.273

我试过你的代码，对我来说工作得很好（使用 ARC），可能你的问题在“MyClass”的其他地方......顺便说一句！为什么不在 NSDate 上做一个“分类”？

像这样的东西：

## NSDate + ConvertDate.h

```
@interface NSDate (ConvertDate)

+(NSDate *) convertDateFromString : (NSString *)dateString;

@end 
```

## NSDate + ConvertDate.m

```
@implementation NSDate (ConvertDate)

+(NSDate *)convertDateFromString:(NSString *)dateString{

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"dd-MM-yyyy"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
    return [dateFormatter dateFromString:dateString];

}

@end 
```

* * *

是的，它看起来像您的代码，唯一的区别是您不需要分配“MyClass”的实例来使用“convertDateFromString”方法，因为您使用的是类方法。

# jquery - jquery 点击每个元素，但

> ID：15014739
> 
> 赞同：2
> 
> 时间：2013-02-22T00:18:41.920
> 
> 标签：jquery, jquery-selectors

`active`当单击页面上除元素及其子项之外的任何内容时，我试图从单击的元素中删除类。

我知道我没有`not()`正确使用选择器，但这是我最好的猜测。我也不知道如何添加关于孩子的部分（？）

```
$(document).ready(function () {
    $('#content_container').on('click', '.wrapper-dropdown-1', function () {
        //close all open dropdowns
        $('.wrapper-dropdown-1').not(this).removeClass('active');

        //close dropdown if anywhere on the body is clicked
        $('body').on('click', ('#content_container').not(this), function () {
            $(this).removeClass('active');
        }); 
        //Uncaught TypeError: Object #content_container has no method 'not'

        var dropdown = $(this);
        dropdown.toggleClass('active');
    });
});

//Uncaught TypeError: Object #content_container has no method 'not' 
```

我无法理解这与第四行中的成功实施之间的区别。

```
$('.wrapper-dropdown-1').not(this).removeClass('active'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:49:28.543

[jsBin](http://jsbin.com/onaxis/2/)

```
$('#content_container').on('click', '.wrapper-dropdown-1', function(evt){
  $(this).toggleClass('active');
});

$('body').click(function(evt){
  var el = $(evt.target).is('.wrapper-dropdown-1') ? evt.target : null;
  $('#content_container .wrapper-dropdown-1').not(el).removeClass('active');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T01:05:25.430

```
var dropdown;

$('body').on('click', function () {
    if ($(e.target).closest(dropdown).length) return;
    $('.wrapper-dropdown-1').removeClass('active');
}); 

$('#content_container').on('click', '.wrapper-dropdown-1', function () {
    $('.wrapper-dropdown-1').not(this).removeClass('active');
    dropdown = $(this).toggleClass('active');
}); 
```

请注意使用`$(e.target)`(原始事件元素) 而不是`$(this)`(始终是`body`)。

必须采用这种方式的原因是，如果您尝试`:not`在事件过滤器中使用样式选择`on`器，则会阻止事件在该区域内的元素上触发，但不会在该区域的父级上触发。事件处理程序`not`不会停止事件的传播，只会包含在选择中。（在捕获的区域内停止事件传播是另一种方法，但是随着您的应用程序变得更加复杂，维护起来会变得很困难，所以我不推荐它。）

您还在另一个事件处理程序中声明了一个事件处理程序。这还有其他问题，例如每次他们单击该区域时，您都会在`body`. 您可以想象为事件处理程序命名并自己手动绑定和取消绑定它，但让这个处理程序一直运行可能更容易。很可能你会想要添加到它，因为你在你的 UI 中想出了其他“单击其他任何地方以取消”类型的区域。

# javascript - 在 jQuery Mobile 中响应地显示或隐藏按钮文本

> ID：15014743
> 
> 赞同：10
> 
> 时间：2013-02-22T00:19:27.760
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我有一个带有一些按钮的 jQuery Mobile 网站。如果视口为 640 像素或更宽，我想在按钮右侧显示一些文本，否则隐藏文本。

我知道用于该目的的[`iconpos`选项/数据属性](http://api.jquerymobile.com/button/#option-iconpos)`left`，并且可以将其设置为在我需要和`notext`不需要时显示文本。我可能会想出一些 Javascript 来更改属性并在页面加载、方向更改和窗口调整大小事件时刷新按钮，但这可能会变得很麻烦，而且我不确定我是否忘记了一些可能导致视口的事件宽度来改变。

**编辑 2：**我在多个浏览器和设备上测试了我的网站，似乎更改方向、调整窗口大小以及显示和隐藏屏幕键盘（在可能的情况下）总是导致`resize`事件被触发`window`对象。当然，我不确定这是否会在所有浏览器中始终发生。

我考虑过使用某种媒体查询将`display`文本上的 CSS 属性设置为`inline`或`none`取决于视口宽度，但在查看 jQuery Mobile 的代码后，似乎该`iconpos`选项影响的不仅仅是文本的可见性：它会影响尺寸、标题属性、图标位置和其他一些东西，因此仅使用 CSS 可能无法实现。

**编辑：**我忘了提到该按钮位于标题中，因此它是内联按钮之一。简单地通过 CSS 隐藏文本会让它看起来很有趣。

这里有人知道基于视口宽度显示或隐藏文本的简单实用方法吗？或者作为一个更普遍的问题，**这里有没有人知道如何根据视口宽度更改数据属性并让 jQuery Mobile 在视口宽度发生变化时确认更改？**我发现了一个关于更改数据属性的[类似问题](https://stackoverflow.com/questions/14246703/making-features-of-collapsible-sets-responsive-in-jquery-mobile)，它没有任何合理的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T09:28:44.807

这是一个纯 CSS 解决方案，它需要一个 HTML5 浏览器，但 jQuery Mobile 也需要一个：

```
/* Less then 620 px -------------------*/ 
@media all and (max-width: 620px){  
    #custom-button span span { visibility:hidden;} 
}       

/* More then 640 px -------------------*/ 
@media only screen and (min-width: 640px) {
    #custom-button span span { visibility:visible;} 
} 
```

**可见性是比****显示**更好的解决方案，因为按钮高度将保持不变。

这是一个有效的 jsFiddle 示例： http: [//jsfiddle.net/Gajotres/adGTK/](http://jsfiddle.net/Gajotres/adGTK/)，只需拉伸一个结果区域即可查看差异。

编辑 ：

这应该这样做，例子是一样的：http: [//jsfiddle.net/Gajotres/adGTK/](http://jsfiddle.net/Gajotres/adGTK/)

```
/* Less then 639 px -------------------*/ 
@media all and (max-width: 639px){  
    #custom-button span span.ui-btn-text 
    { 
        left: -9999px !important;
        position: absolute !important;
    } 

    #custom-button span span.ui-icon 
    { 
        float: left !important;
        margin: 2px 1px 2px 3px !important;
        display: block !important;
        z-index: 0 !important;   
        position: relative;
        left: 0 !important;
    } 

    #custom-button span.ui-btn-inner
    { 
        padding: 0 !important;
    } 

    #custom-button
    { 
        height: 24px !important;
        width: 24px !important;
        margin-top: 5px;
    }     
} 
```

此示例仅适用于使用 <a> 标记创建的按钮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T19:51:34.163

这是迄今为止我想出的最好的事情：

```
$(window).resize(function() {
    $(".ui-btn-left, .ui-btn-right, .ui-btn-inline").filter("[data-icon]")
        .buttonMarkup({iconpos: window.innerWidth >= 640 ? "left" : "notext"})
        .buttonMarkup("refresh");
});

$(document).delegate("[data-role=page]", "pageinit", function() {
    $(window).resize();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-02T18:15:57.073

在转移到仅类按钮声明之后，这在 jQuery Mobile 1.4 beta 1 中对我非常有效。

```
$(window).on("throttledresize", function() {
  var smallButtons = $(window).width() <= 480;
  $('#article_nav a').toggleClass('ui-btn-icon-notext', smallButtons);
  $('#article_nav a').toggleClass('ui-btn-icon-left', !smallButtons);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T12:15:03.730

为 data-icon 类型的 a 和 button 标签工作，默认设置`data-iconpos="notext"`在 html 中，然后绑定`pagebeforecreate orientationchange`事件以根据屏幕宽度添加或删除属性：

```
$(document).on('pagebeforecreate orientationchange', updateIcons);

function updateIcons () {
    if ($(window).width() > 480) {
        $('a[data-icon], button[data-icon]').removeAttr('data-iconpos');
    } else {
        $('a[data-icon], button[data-icon]').attr('data-iconpos', 'notext');
    }
} 
```

**编辑：**看起来它只适用于页面创建而不是方向更改。

信用：[Aurelio@buildmobile.com](http://buildmobile.com/author/aderosa/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-20T21:04:09.627

这是一个适用于 IE8+ 和所有其他浏览器的纯 css 解决方案。请注意，代码来自 Twitter-Bootstrap，只是稍作修改。

[演示](http://jsfiddle.net/SchmalzyB/0ccb0z6m/)

```
<button type="submit" class="btn btn-primary" value="Submit">
    <i id="versturen" class="fa fa-check"></i>
    <span class="sr-only-xs"> Versturen</span>
</button>

@media (max-width: 767px) {
  .sr-only-xs {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0,0,0,0);
    border: 0;
  }
} 
```

# javascript - 没有 id/class 的带有 javascript 的自动点击链接

> ID：15014746
> 
> 赞同：2
> 
> 时间：2013-02-22T00:19:50.977
> 
> 标签：javascript, click, location

得到了这个例子：

```
<html>
<head>
<script type="text/javascript">
    function init(){
        var linkPage = document.getElementById('linkid').href;
        window.location.href = linkPage;
    }
    onload=init;
</script>
</head>
<body>

<a href="someplace.html" id="linkid">GO HERE</a>

</body>
</html> 
```

此脚本单击链接“转到此处”。（完美运行）

但在我的示例中，链接中没有类或 ID。

```
<a href="someplace_with_session.php&c=ToMNi1ffNs4qf55cSmaisSvv3h8NqUliyO&o=16cb29acefffyccc83bbd8e&r=338a8d7492839096df1dd">LINK NAME</a> 
```

唯一不变的是链接的名称（“链接名称”）

是否可以搜索“LINK NAME”，然后像上面的工作脚本一样单击它？

或者可以做我需要的东西：D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T00:26:16.010

JS 无法通过文本内容（我知道）搜索节点。

```
Array.prototype.forEach.call(document.getElementsByTagName('a'), function (elem) {
    if (elem.innerHTML.indexOf('LINK NAME') > -1) {
        window.location = elem.href;
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T00:30:51.207

遍历文档中的链接并检查文本：

```
for(var i = 0, len = document.links.length; i < len; i += 1) {
    if(document.links[i].textContent === "LINK TEXT") {
        document.links[i].click();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T00:35:24.990

我只使用以下位，它使用 jquery 选择。

```
var link = $("a:contains('LINK TEXT')"); //get the a
var click = document.createEvent("Event"); //create event
click.initEvent("click", true, true);
link.dispatchEvent(click); // make it happen 
```

# forms - 如何使用 Symfony2 表单清除字段值

> ID：15014747
> 
> 赞同：11
> 
> 时间：2013-02-22T00:19:52.720
> 
> 标签：forms, symfony, symfony-forms

我正在编写自己的 CAPTCHA 类，当表单无法验证时，出于显而易见的原因，我不想用之前的答案预先填充验证码输入。我只想在渲染之前清除输入。

我发现*data*选项仅适用于默认值，它会被用户输入的内容覆盖。我尝试了以下代码：

```
$form->get('captcha')->setData(null); 
```

..请求与表单绑定后，但`AlreadyBoundException`抛出了一个。我实际上已经设法让它与：

```
if (isset($formView->children['captcha'])) {
    $formView->children['captcha']->vars['value'] = null;
} 
```

但这看起来是错误的，而且绝对不符合 Symfony 的标准。我查看了您在构建表单时可以提供的其他选项，但我看不到任何值得注意的东西。

有谁有想法吗？

顺便说一句，我有一半希望 Symfony2 附带一个 CAPTCHA 解决方案，这主要是我习惯该框架时的学习练习。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-05-04T15:21:01.793

我想你想像 Symfony 处理一个字段一样处理这个表单`password`字段：它不会被填充。让我们看一下[PasswordType](https://github.com/symfony/form/blob/2.8/Extension/Core/Type/PasswordType.php)：

```
namespace Symfony\Component\Form\Extension\Core\Type;

class PasswordType extends AbstractType
{
    public function buildView(FormView $view, FormInterface $form, array $options)
    {
        if ($options['always_empty'] || !$form->isSubmitted()) {
            $view->vars['value'] = '';
        }
    }

    public function configureOptions(OptionsResolver $resolver)
    {
        $resolver->setDefaults(array(
            'always_empty' => true,
            'trim' => false,
        ));
    }

    //...
} 
```

所以，这很简单：只需添加您的 FormType`$view->vars['value'] = ''`的`buildView`方法（即 CaptchaType）。这意味着该字段的数据不会被清除，但不会传递给 Twig 模板。不同的方法，但结果是一样的：验证失败后密码字段保持为空。

如果你真的很懒，你可以使用 PasswordType，但由于该字段的输入将被屏蔽 (*****)，这会使烦人的验证码字段变得更糟。

您的表单类型可能如下所示：

```
class CaptchaType extends AbstractType
{
    /**
     * {@inheritdoc}
     */
    public function buildView(FormView $view, FormInterface $form, array $options)
    {
        $view->vars['value'] = '';
    }

    /**
     * {@inheritdoc}
     */
    public function getParent()
    {
        return __NAMESPACE__.'\TextType';
    }

    /**
     * {@inheritdoc}
     */
    public function getName()
    {
        return $this->getBlockPrefix();
    }

    /**
     * {@inheritdoc}
     */
    public function getBlockPrefix()
    {
        return 'captcha';
    }
} 
```

编辑：刚刚发现 CaptchaBundle 采用了[相同的方法](https://github.com/Gregwar/CaptchaBundle/blob/v2.0.2/Type/CaptchaType.php#L111)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-04T19:38:00.340

有一种有趣的方法可以在处理请求之前对其进行修改。但是，我会研究斯蒂芬的答案，因为它看起来更干净。

像这样：

```
public function indexAction(Request $request)
{

    $form = $this->createForm(Form::class);

    $subData=$request->request->get('form');

    $subData['task']=null;

    $request->request->set('form',$subData);

    $form->handleRequest($request);

    if ($form->isValid()) {

      //do stuff
    }

    return $this->render('default/index.html.twig', array(
        'form' => $form->createView()
    ));
} 
```

获取名称为'form'的提交数据作为值数组，将所述值更改为null，然后将请求的值设置为新值并让表单处理它。

和一个简单的形式

```
class Form extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('task')
            ->add('save', SubmitType::class);    

    }

} 
```

无论您输入什么，提交表单后数据将始终为空。当然，在将值设置为 null 之前，您需要验证验证码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T08:20:10.103

当您的控件发现表单无效时，您可以将不完整的实体传递给调用的操作。

> ```
> public function updateAction(Request $request, $id)
> {
>     $entity = $this->EM()->getRepository('Bundle:Entity')->find($id);
>     if (!$entity) {
>         throw $this->createNotFoundException('Unable to find Entity entity.');
>     }
> 
>     $form = $this->createForm(new RecommendationType()
>         ,$entity
>         ,array(
>             'attr'            => array(
>                 ,'entity'         => $entity
>                 )
>             )
>         );
> 
>     $form->bind($request);
>     if ($form->isValid()) {
>         $this->EM()->persist($entity);
>         $this->EM()->flush();
> 
>         return $this->redirect($this->generateUrl('entity_show'
>             ,array('id' => $id)));
>     } else {
>         $entity->setCapthca(Null);
>     } 
> 
>     return $this->render('Bundle:Entity:edit.html.twig'
>         ,array(
>             'entity'            => $entity
>             ,'form'             => $form->createView()
>             )
>         );
> } 
> ```

create 动作会有类似的修改。

# php - Jquery/Ajax 在没有 .load() 的情况下执行 php

> ID：15014748
> 
> 赞同：0
> 
> 时间：2013-02-22T00:20:04.997
> 
> 标签：php, jquery, ajax

我知道如果您使用 Ajax 的 .load() ，它会剥离任何脚本（包括 PHP），因此如果您将内容加载到 div 中，它们将不会运行。有没有解决的办法？我“认为”这可能是解决方案的一部分，但老实说，我不知道如何处理它>> [Jquery - 使用 .load 和选择器加载页面不执行脚本？](https://stackoverflow.com/questions/1429927/jquery-loading-a-page-with-load-and-selector-doesnt-execute-script)

基本上，这就是我所拥有的： 在一个页面上，我有一些 PHP 执行类似的操作：

```
 <?php
    ... perform some "while" loop ...
    ... set some variables ...
    echo "<div id='info' class='businfo'>";
    echo "something something $some_variable something something";
    echo "</div>
    ?> 
```

在第二页上，我想检索“”的内容并将其显示在另一个 div 中。从我正在阅读的内容来看，我认为可能有解决方法，但我还没有看到一个足够容易让我工作的方法:(

任何人都有一个简单的示例代码解决方案？

提前致谢，

*   d -

# javascript - 对齐中心 - EXTJS 4

> ID：15014754
> 
> 赞同：1
> 
> 时间：2013-02-22T00:21:06.583
> 
> 标签：javascript, ajax, extjs, extjs4, alignment

```
var loginForm = new Ext.form.FormPanel({
           frame: true,
           border: true,
           height: 155,
           width: 350,
           layout: {
            type: 'hbox',
            },
            items: [{
                     xtype: 'image',
                     src : 'images/system-users.png',
                     width: 100,
                   },{
                        xtype: 'container',

                        defaults: {
                            labelWidth: 80,

                        },
                        layout: {
                            type: 'vbox',
                            //align: 'stretch',
                            padding:'0 0 20 0'
                        },  
                       items: [{
                                 xtype: 'textfield',
                                 width: 250,
                                 id: 'username',
                                 fieldLabel: 'Username'
                               },{
                                 xtype: 'textfield',
                                 width: 250,
                                 id: 'password',
                                 fieldLabel: 'Password ',
                                 inputType: 'password',
                                 submitValue: false
                               },{
                                 xtype: 'hidden',
                                 id: 'challenge',
                                 value: "<?php echo $challenge; ?>",
                                 submitValue: false
                               },btnLogin],
           }
           ]//contain items    
         }); 
```

![在此处输入图像描述](../Images/fd07a20e6a4135d867d3702ededee26e.png)

## 问题

这是一个现场演示[http://jsfiddle.net/anthor/WM9DD/88/](http://jsfiddle.net/anthor/WM9DD/88/)
1）如何将登录按钮居中对齐？
2）图像和所有文本框对齐窗口框的中心和中间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:09:12.103

尝试这个：

```
var loginForm = new Ext.form.FormPanel({
 frame: true,
 border: true,
 layout: {
     type: 'hbox',
     align: 'stretch'
 },

 items: [{
     xtype: 'image',
     src: 'images/system-users.png',
     width: 100,
 }, {
     xtype: 'container',

     defaults: {
         labelWidth: 80,

     },
     layout: {
         type: 'vbox',
         align: 'stretch',
         padding: '0 0 20 0'
     },
     flex: 1,
     items: [{
         xtype: 'textfield',
         id: 'username',
         fieldLabel: 'Username'
     }, {
         xtype: 'textfield',
         id: 'password',
         fieldLabel: 'Password ',
         inputType: 'password',
         submitValue: false
     }, {
         xtype: 'hidden',
         id: 'challenge',
         value: "<?php echo $challenge; ?>",
         submitValue: false
     }, {
         xtype: 'container',
         layout: {
             type: 'hbox',
             pack: 'end'
         },
         items: [btnLogin]
     }],
 }] //contain items    
 }); 
```

在 hbox 布局中，您可以将`align: 'stretch'`选项和`flex: 1`选项添加到项目以拉伸它们。我还将按钮放在另一个容器中以将其固定在右侧。

# r - 有没有办法在 lubridate 中自动分配 DST 转换？

> ID：15014757
> 
> 赞同：1
> 
> 时间：2013-02-22T00:21:46.790
> 
> 标签：r, lubridate

我在 csv 文件中有日期时间对，看起来像

2012 年 11 月 4 日

在一列和

上午 12:06:08

在相邻的列中。它们以本地时间记录（即它们在适当的时间切换到 PST 和 PDT），但文件中没有 tz 或 DST 指示符。检测到这一点的唯一可见方法是时间序列做了有趣的事情。例如，在 2012 年 11 月 4 日，我有一系列时间，例如

12:51:20 AM 1:13:08 AM 1:24:58 AM 1:40:28 AM 1:48:08 AM 1:54:08 AM 1:56:58 AM 1:04:28 AM 1: 05:48 AM 1:07:18 AM 1:15:00 AM 1:39:08 AM 2:05:38 AM

PST 大概从凌晨 1:04:28 读数开始，但没有指示符。

是否有一种简单的方法来正确分配时区（大概使用 lubridate）？该文件很长，所以我不想一次循环阅读一个读数，因为我担心这可能需要一些时间。我必须在春天做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:59:29.683

这是不可能的。没有办法确切地知道是 PST而不是PDT`"11/4/2012 1:04:28 AM"`之间的实际观察。`"11/4/2012 12:51:20 AM"``"11/4/2012 1:13:08 AM"`

如果您确定观察结果在文件中是有序的，您可以将它们转换为向量`POSIXt`并获取`diff`向量。任何负值都将是 DST 更改。但是，如果 DST 更改中的两次观察之间的时间大于 1 小时，您可能会错过一些。

```
Lines <- "11/4/2012 12:51:20 AM
11/4/2012 01:13:08 AM
11/4/2012 01:24:58 AM
11/4/2012 01:40:28 AM
11/4/2012 01:48:08 AM
11/4/2012 01:54:08 AM
11/4/2012 01:56:58 AM
11/4/2012 01:04:28 AM
11/4/2012 01:05:48 AM
11/4/2012 01:07:18 AM
11/4/2012 01:15:00 AM
11/4/2012 01:39:08 AM
11/4/2012 02:05:38 AM"

x <- scan(con <- textConnection(Lines), what="", sep="\n")
close(con)
diff(strptime(x, format="%m/%d/%Y %I:%M:%S %p"))
# Time differences in mins
#  [1]  21.800000  11.833333  15.500000   7.666667   6.000000   2.833333
#  [7] -52.500000   1.333333   1.500000   7.700000  24.133333  86.500000 
```

# java - Android：固定大小的 ScrollView 不滚动/滚动奇怪

> ID：15014760
> 
> 赞同：2
> 
> 时间：2013-02-22T00:22:03.570
> 
> 标签：java, android, xml

`scrollview`我正在尝试制作的固定尺寸有问题。我在 StackOverflow 和其他网站上阅读了许多与我相似（但不相等）的问题，但没有一个答案对我有帮助，所以我决定问我自己的问题。

基本上，我想要一个固定大小`scrollview`，里面有不同的控件。基本的将是其`textview`内部动态变化的大小。当我更改 的文本`textview`并且它大于 时`scrollview`，滚动条会快速闪烁，这表明我可以滚动，但无论我滑动手指多少次，它都不会滚动。然后我尝试用两根或三根手指滑动，有时（仅数次）它会滚动。

我已经尝试了许多不同的方法，比如将 更改`textview`为`edittext`with focusable = false 所以它不会给用户编辑文本的机会；或将文本视图单独放在滚动视图中，或将其包装在线性布局、相对布局等中，但它仍然不滚动。

下面是今天的代码。此滚动视图与其他控件一起位于垂直线性布局内，由于长度原因，我没有放置这些控件，但如果有人需要它，我会放置它。如果有人能指出我的问题或帮助我解决这个问题，我将不胜感激。

XML:

```
<ScrollView
        android:id="@+id/scrollFifthHorizontalLineDetails"
        android:layout_width="304dp"
        android:layout_height="133dp"
        android:layout_gravity="center"
        android:layout_marginTop="5dp" >

        <LinearLayout
            android:id="@+id/rrrr"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/txtlblPlaceDetails"
                android:layout_width="302dp"
                android:layout_height="wrap_content"
                android:background="@drawable/placedescriptionbg"
                android:text="@string/null_text"
                android:textAppearance="?android:attr/textAppearanceSmall" />

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />
        </LinearLayout>
    </ScrollView> 
```

我在其中填充 TextView 的行：

```
((TextView) findViewById(R.id.txtlblPlaceDetails)).setText(mJsonOb.getString("placeDescription")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:23:14.847

我在几个月前开发的 Android 应用程序中遇到了类似的问题。我通过增加滚动视图的布局宽度来解决滚动问题。在编辑器中，您实际上可以拖动滚动视图的 RHS 以超出可见区域。我想我将 android:layout_width 设置为大约 1024。

# perl - 关闭文件句柄上的 readline()

> ID：15014763
> 
> 赞同：4
> 
> 时间：2013-02-22T00:22:11.380
> 
> 标签：perl

运行此代码会产生一个错误，说明“readline() on closed filehandle SEQFILE at line 14”。以前的搜索都评论了如何在 open 之后放置某种类型的条件。这样做只会杀死程序（我把它遗漏了，所以我可以看到它为什么没有打开）。我猜更深层次的问题是为什么它不打开我的文件？

```
#!/usr/bin/perl -w

#Ask user to point to file location and collect from the keyboard
print "Please specify the file location: \n";
$seq = <STDIN>;

#Remove the newline from the filename
chomp $seq;

#open the file or exit
open (SEQFILE, $seq);

#read the dna sequence from the file and store it into the array variable @seq1
@seq1 = <SEQFILE>;

#Close the file
close SEQFILE;

#Put the sequence into a single string as it is easier to search for the motif
$seq1 = join( '', @seq1);

#Remove whitespace
$seq1 =~s/\s//g;

#Use regex to say "Find 3 nucelotides and match at least 6 times
my $regex = qr/( ([ACGT]{3}) \2{6,} )/x;
$seq1 =~ $regex;
printf "MATCHED %s exactly %d times\n", $2, length($1)/3;
exit; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T00:26:16.550

要查看`open`失败的原因，请更改以下内容：

```
open (SEQFILE, $seq); 
```

对此：

```
open (SEQFILE, $seq) or die "Can't open '$seq': $!"; 
```

[（`perlopentut`](http://perldoc.perl.org/perlopentut.html)参见[手册页](http://perldoc.perl.org/perlopentut.html)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T21:01:57.963

另请注意，如果您使用 || 而不是像这样的行中的“或”：

打开 SEQFILE，$seq || die "无法打开 '$seq': $!";

这将无法正常工作。见链接：

[https://vinaychilakamarri.wordpress.com/2008/07/27/subtle-things-in-perl-part-2-the-difference-between-or-and/](https://vinaychilakamarri.wordpress.com/2008/07/27/subtle-things-in-perl-part-2-the-difference-between-or-and/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-23T08:27:18.290

您运行程序的位置与“要打开的文件”的存储位置不匹配。

这是我找到它的地方， [Perl Readline on closed filehandle - 文件不存在错误](https://stackoverflow.com/questions/20036312/perl-readline-on-closed-filehandle-file-does-not-exist-error)

# android - Android 库项目无法启动

> ID：15014764
> 
> 赞同：1
> 
> 时间：2013-02-22T00:22:15.853
> 
> 标签：android, api, sdk

我一直在尝试运行一个项目，但有一个弹出窗口显示**“无法启动 Android 库项目”。**

现在，我的项目需要 API 7，并且我已经在 Android SDK Manager 中安装了它。在 Properties -> Android -> Target build 中，我选择 Android 4.1.2。我还在 Android Manifest 中添加了这些行： `<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="7" android:maxSdkVersion="16"/>`

然而，当我运行我的项目时，会显示相同的弹出消息。任何人，请帮助我。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T21:53:05.203

您的项目肯定被配置为“库”，这就是您收到消息的原因：**“无法启动 Android 库项目。”**

右键单击您的项目并选择属性。在“属性”窗口->“Android”->取消选中“是库”选项并应用->单击“确定”关闭属性窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:24:37.080

对该消息的天真和有点字面意思的解释是您的项目是一个图书馆项目；事实上，它们无法启动，只能嵌入到一些主要项目中。

您是否仔细检查过您的项目不是图书馆项目？“创建新的android项目”向导中曾经有一个复选框......

# hadoop - 如何使用 LZO 以外的压缩处理 Hadoop Map/Reduce 中的协议缓冲区文件？

> ID：15014766
> 
> 赞同：1
> 
> 时间：2013-02-22T00:22:30.127
> 
> 标签：hadoop, gzip, protocol-buffers, lzo, xz

我想使用 Hadoop Map/Reduce 处理使用 LZO 以外的其他东西压缩的[分隔](https://developers.google.com/protocol-buffers/docs/reference/java/com/google/protobuf/MessageLite#writeDelimitedTo%28java.io.OutputStream%29)协议缓冲区文件，例如`xz`或`gzip`. Twitter 的大象鸟库似乎主要支持读取 LZO 压缩的 protobuf 文件，因此似乎不能满足我的需求。是否有现有的库或标准方法来执行此操作？

（**注意：**正如您从我选择的压缩算法中看到的那样，解决方案没有必要使 protobuf 文件可拆分。您的答案甚至不需要指定特定的压缩算法，但应该允许至少一个我提到的那些。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:20:00.963

您可能需要查看 Hadoop 的 RAgzip 补丁，以处理大型 gzip 文件的多个地图任务：[RAgzip](https://issues.apache.org/jira/browse/MAPREDUCE-491 "压缩包")

# sql-server-2008 - 查询以消除重复并报告空值

> ID：15014767
> 
> 赞同：0
> 
> 时间：2013-02-22T00:22:32.840
> 
> 标签：sql-server-2008, tsql

我正在使用 SQL Server 2008。我有一个包含手动扫描仪数据的表。表名是 ScanData。

```
Barcode  ScanDate                   ScannerId
*******  ********                   *********
A000012  2013-02-19 11:55:02.900    SGH205YXHD
A000015  2013-02-21 11:30:02.767    SGH205YXHD
A000017  2013-02-21 11:29:19.507    SGH205YXHD
A000012  2013-02-19 10:58:02.900    5C7152P0SB
A000015  2013-02-19 10:41:02.400    SGH205YXHD
A000018  2013-02-19 10:25:02.140    5C7152P0SB 
```

我有第二个表将条形码链接到产品。表名是条形码。

```
Barcode  ProductID
*******  *********
A000012  CCC3047A-2E85-413F
A000015  2C4CD739-F09D-44D0
A000018  F48C9B37-7B2F-4446 
```

我需要加入表格但没有重复的条形码值。如果有重复，则应选择较高的 TimeStamp。所以结果应该是这样的：

```
Barcode  ScanDate                   ScannerId    ProductID
*******  ********                   *********    *********
A000012  2013-02-19 11:55:02.900    SGH205YXHD   CCC3047A-2E85-413F
A000015  2013-02-21 11:30:02.767    SGH205YXHD   2C4CD739-F09D-44D0
A000017  2013-02-21 11:29:19.507    SGH205YXHD   null
A000018  2013-02-19 10:25:02.140    5C7152P0SB   F48C9B37-7B2F-4446 
```

请注意，在第三行返回 ProductID 的空值非常重要。

我已经尝试使用 DISTINCT、PARTITION BY 和 GROUP BY，但是我为消除重复而遵循的示例没有加入第二个表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:59:19.443

这是这样做的一种方法：[http ://www.sqlfiddle.com/#!3/0763a/1](http://www.sqlfiddle.com/#!3/0763a/1)

```
select 
    ScanData.Barcode, 
    ScanData.ScanDate, 
    ScanData.ScannerId,
    Barcode.ProductID
From
    ScanData
Left Join
    Barcode
on
    ScanData.Barcode = Barcode.Barcode
join 
(
    select 
        Barcode, 
        max(ScanDate) ScanDate 
    from 
        ScanData 
    Group By Barcode
) Latest
On
    Latest.Barcode = ScanData.Barcode and Latest.ScanDate = Scandata.ScanDate
Order By
    Barcode 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T00:35:33.277

你可以这样做：

```
;WITH ScanData_CTE AS
  (
  SELECT sd.Barcode, sd.ScanDate, sd.ScannerId, b.ProductID,
    row_number() over (partition BY sd.Barcode ORDER BY sd.ScanDate DESC) AS rn
  FROM ScanData sd
  LEFT OUTER JOIN Barcode b ON sd.Barcode = b.Barcode
  )

SELECT Barcode, ScanDate, ScannerId, ProductID
FROM ScanData_CTE
WHERE rn = 1 
```

使用公用表表达式 (CTE)，您可以按日期降序为每个条形码分配一个行号。然后，仅选择每个条形码组中的第一行。

# facebook-graph-api - Facebook 加载后来自 apprequest 的通知消失

> ID：15014776
> 
> 赞同：0
> 
> 时间：2013-02-22T00:23:21.617
> 
> 标签：facebook-graph-api, facebook-javascript-sdk, apprequests, facebook-app-requests

这是我用来加载 SDK 的代码：

```
window.fbAsyncInit = function() {
    FB.init({
        appId      : "<APP_ID>",
        status     : true,
        cookie     : true,
        xfbml      : true
    });
};

(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk')); 
```

当用户单击邀请按钮时会调用它：

```
function inviteFriends(){
    FB.ui(
        {
            method: 'apprequests',
            message: 'invites you to play'
        },
        function(response){ console.log(response) } // temporary to verify
    )
} 
```

用户体验如[https://developers.facebook.com/docs/concepts/requests/#ux](https://developers.facebook.com/docs/concepts/requests/#ux)中所述，但是当接收者登录时，通知在 Facebook 加载后消失。

寻找答案，我发现了这些：

[facebook 应用程序请求的通知未显示](https://stackoverflow.com/questions/8677823/notification-for-facebook-app-requests-not-showing-up)

[http://facebook.stackoverflow.com/questions/11279765/facebook-pagetab-request-dialogue-notification-shows-and-goes](http://facebook.stackoverflow.com/questions/11279765/facebook-pagetab-request-dialogue-notification-shows-and-goes)

[http://facebook.stackoverflow.com/questions/9689927/ios-fb-request-dialogs-not-working-properly](http://facebook.stackoverflow.com/questions/9689927/ios-fb-request-dialogs-not-working-properly)

[http://facebook.stackoverflow.com/questions/9812572/facebook-sdk-javascript-request-dialog-disappearing-on-receiver-side](http://facebook.stackoverflow.com/questions/9812572/facebook-sdk-javascript-request-dialog-disappearing-on-receiver-side)

[http://facebook.stackoverflow.com/questions/8823362/invite-friends-for-a-website-app-fb-ui-apprequests](http://facebook.stackoverflow.com/questions/8823362/invite-friends-for-a-website-app-fb-ui-apprequests)

[http://facebook.stackoverflow.com/questions/10209281/handle-facebook-apprequest-notification](http://facebook.stackoverflow.com/questions/10209281/handle-facebook-apprequest-notification)

[http://facebook.stackoverflow.com/questions/8979826/facebook-notification-from-my-app-appears-and-disappears](http://facebook.stackoverflow.com/questions/8979826/facebook-notification-from-my-app-appears-and-disappears)

但：

*   沙盒模式被禁用；
*   定义了画布应用程序 url，以及安全画布应用程序 url；
*   应用程序类型定义为 Web。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:01:03.077

Facebook 正在测试如果用户对用户的请求没有出现在通知宝石上会发生什么。他们在这里解释：

[https://developers.facebook.com/bugs/532388000129311](https://developers.facebook.com/bugs/532388000129311)

测试显然已经结束，事情应该很快就会恢复正常，至少现在是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T16:20:52.023

当您的画布应用程序设置不正确时，仍然会发生这种情况。在这里查看答案：

[我的应用程序中的 Facebook 通知出现和消失](https://stackoverflow.com/questions/8979826/facebook-notification-from-my-app-appears-and-disappears/18174042#18174042)

# objective-c - 使用 Xcode 和 ARC 的对象的潜在泄漏

> ID：15014777
> 
> 赞同：2
> 
> 时间：2013-02-22T00:23:24.460
> 
> 标签：objective-c, xcode, memory-leaks, crash-reports

我在 Xcode 4.5.2 中有一个应用程序，我正在使用 ARC。我的应用程序一直在构建和运行，没有编译器警告或错误，但是，当应用程序进入后台然后返回前台时（特别是在中间经过很长一段时间后），应用程序崩溃。我对 iOS 还很陌生，我一直在无休止地尝试分析崩溃报告，并象征性地表示崩溃，但到目前为止，我一直未能成功收集到问题的任何线索。然而，突然当我重新打开我的项目时，一行代码（一直存在）现在显示**蓝色编译器警告：Memory (Core Foundation/Objective C) Potential Leak of an Object。** 我不明白为什么这段代码在使用 ARC 的情况下会产生这个警告，也不明白它为什么突然出现。我假设这可能与崩溃问题有关，但我不知道为什么会收到此错误，因此我不知道如何修复它。

这是问题所在的代码：

```
- (void) cropPhoto:(UIImage *)originalImage inImageView:(UIImageView *)imageView atXPoint:(int)x atYPoint:(int)y withWidthSize:(int)width withHeightSize:(int)height
{
  CGSize size = [originalImage size]; //gets size of Facebook photo

  [imageView setFrame:CGRectMake(0, 0, size.width, size.height)]; 

  [self.view addSubview:imageView]; //adds imageView to view

  CGRect rect = CGRectMake (size.width / 4, size.height / 4 ,
                          (size.width / 1), (size.height / 2));

  //THIS NEXT LINE GIVES THE COMPILER WARNING!!
  [imageView setImage:[UIImage    
        imageWithCGImage:CGImageCreateWithImageInRect([originalImage CGImage], rect)]]; 

  [imageView setFrame:CGRectMake(x, y, width, height)];
  [self.view addSubview:imageView];

} 
```

任何帮助或指导表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T00:28:46.480

调用`CGImageCreateWithImageInRect()`返回一个你必须释放的对象。（它的保留计数为 1）

ARC 不会为您处理 Core Foundation 对象的保留/释放。

您的代码应如下所示：

```
{
    CGImageRef cgImage = CGImageCreateWithImageInRect([originalImage CGImage], rect)
    [ imageView setImage:[ UIImage imageWithCGImage:cgImage ] ] ;
    CGImageRelease( cgImage ) ;
} 
```

编辑：

这是另一种选择：

```
[imageView setImage:[UIImage    
    imageWithCGImage:CFBridgingRelease( CGImageCreateWithImageInRect([originalImage CGImage], rect))]]; 
```

# actionscript-3 - 触摸移动不会动画

> ID：15014781
> 
> 赞同：0
> 
> 时间：2013-02-22T00:24:26.267
> 
> 标签：actionscript-3

好的，所以我正在用 Adob​​e Flash (air) 开发一个游戏，这将是一个手机游戏。我前一段时间问过这个问题，但是动画不起作用所以知道我回来了。无论如何，我遇到的问题是当我按住一个按钮时没有连续移动，所以我必须不断按下按钮才能移动。那个人告诉我使用滴答声，所以这就是我构建运动引擎的方式，围绕着滴答声.当我去添加我的动画时，它会运行一次然后停止（动画）这是我的代码：

```
myButton.addEventListener(MouseEvent.MOUSE_DOWN,mouseDown);

function mouseDown(e:Event):void {
    stage.addEventListener(MouseEvent.MOUSE_UP,mouseUp); //listen for mouse up on the stage, in case the finger/mouse moved off of the button accidentally when they release.
    addEventListener(Event.ENTER_FRAME,tick); //while the mouse is down, run the tick function once every frame as per the project frame, this is where I add the players animation.
}

function mouseUp(e:Event):void {
    removeEventListener(Event.ENTER_FRAME,tick);  //stop running the tick function every frame now that the mouse is up
    stage.removeEventListener(MouseEvent.MOUSE_UP,mouseUp); //remove the listener for mouse up
}

function tick(e:Event):void {
    //do your movement
} 
```

我的意思是，有没有办法解决这个问题？我怎样才能用勾号制作动画！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:53:20.507

和其他人一样，我发现代码非常好。因为，我无法访问整个代码和时间线，所以我对这个问题有以下猜测：

因为，您只想在鼠标按下时开始动画，所以您必须在动画的第一帧中有一个 stop() 动作。（如果不是这种情况，请纠正我）。动画的最后一帧必须再次执行 gotoAndPlay(x) 操作才能循环播放。

基于上述假设，当您的动画循环播放时，它会再次到达已经定义了 stop() 动作的帧。

# c# - publish_actions 扩展的 facebook 权限是否适合自动发布？

> ID：15014783
> 
> 赞同：-3
> 
> 时间：2013-02-22T00:24:35.127
> 
> 标签：c#, javascript, facebook

我想在我的表单上有一个“分享到 facebook”复选框，如果选中，它会自动发送到 facebook，从而减少弹出窗口的需要。我需要为此获得哪个 facebook 扩展权限？我分不清是哪一个？publish_actions 是否正确？或者这是矫枉过正？

另外，我希望对用户不具有侵入性，我注意到 Tripadvisor 处理得很好，他们有“分享开启”、“分享关闭”模式，而且他们每次都会再次询问您。如果没有任何作用，有谁知道为什么他们有“共享开/关”？我想要这个开/关系统，但它是如何工作的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:05:03.703

`publish_action` permissions allow you to post OpenGraph actions and object. These are automatically posted, publication of OG are re kept in a ticker box on user profile and can appear in the news feed. Most Facebook application use OG actions as they're less intrusive and more interesting from the story telling view point.

If what you want is to publish a post to wall; like an image sharing or a website. Then you'll want `publish_stream` permissions, and you'll want to create new `post`. This is basically what the sharing FB widget or the user sharing a link does. I'd advocate against using this one as it is intrusive and may bring you bad feedback (for spam) - and in the end, you'll just get blocked by FB.

So, look out OpenGraph and see if it matches your needs. If not, then prefer using really clear sharing functionnality at the cost of an extra popup as this will make it clear to the user and prevent bad feedback from bringing down you app.

# c - 遍历未知长度的 int 数组

> ID：15014788
> 
> 赞同：1
> 
> 时间：2013-02-22T00:25:00.903
> 
> 标签：c, microcontroller

我正在尝试遍历一个最多包含**4**个元素的数组 - 不存在关于数组长度的其他知识。

**伪代码**

```
void insert_vals(uint8_t num, uint8_t *match_num, uint8_t *value)
{
    uint8_t i;

    while(data_exists)  // how do I determine if data exists in 'value'?
    {
        switch(num)
        {
            case 0:
            {
                switch(match_num[i])
                {
                    case 0:
                        hw0reg0 = value[i];
                    case 1:
                        hw0reg1 = value[i];
                    case 2:
                        hw0reg2 = value[i];
                    case 3:
                        hw0reg3 = value[i];
                }
            }
            case 1:
            {
                switch(match_num[i])
                {
                    case 0:
                        hw1reg0 = value[i];
                    case 1:
                        hw1reg1 = value[i];
                    case 2:
                        hw1reg2 = value[i];
                    case 3:
                        hw1reg3 = value[i];                 
                }
            }
            // etc. 2 other cases
        }
        i++;
    }
} 
```

**调用示例（伪代码）**

```
/*
 * num: hardware device select from 1 - 4
 * match_num: 4 possible matches for each hardware device
 * value: 32-bit values to be assigned to 4 possible matches
 * NOTE: This function assumes hardware devices are selected
 * in a consecutive order; I will change this later.
 */

 // example calling code - we could have configured 4 hardware devices
 insert_vals(0, [0, 1], [0x00000001, 0x000000FF]);  // arg2 and arg3 equal in length 
```

我怎样才能做到这一点？

在字符数组中，C 会自动添加`'\0'`到数组的末尾，但对于整数数组，情况似乎并非如此。如果我最初能够在运行时以某种方式确定`match_num`and `value`（参见`if`语句）的长度，那么这将允许我创建一个`for`循环。

# 编辑

既然我知道最多有 4 个元素，我不能做类似下面的事情吗？

```
void insert_vals(uint8_t num, uint8_t *match_num, uint32_t *value)
{
    int i;

    for(i = 0; i < 4; i++)
    {
        if(value[i] == -1)
            break;
        else
        {
            // Assign data
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T00:28:47.910

仅给定指针，您无法获得指向的数组的长度。要么你必须传递长度，要么它必须是常数（总是 4），并且在未使用的元素中有一些标记值——这个值在某种程度上对你的计算是无效的（比如 NUL 是用于字符串的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T00:31:04.563

是否有一个值可以保证它不在“可用”数据中？（例如，0 不是字符串的有效字符，因此 Kernighan 先生和 Ritchie 先生决定选择它作为“数组结尾”标记。您可以对任何值执行相同的操作。

假设您知道您的整数值介于 0 到 512 之间，因此您可以将整个数组初始化为 1024，然后填充它并遍历它，直到出现 >512 的数字（这必须是您的数组结束标记）。

另一种可能性是将数组中元素的数量与数组一起传递。

# java - 从其他类调用 actionPerformed()

> ID：15014789
> 
> 赞同：0
> 
> 时间：2013-02-22T00:25:11.890
> 
> 标签：java, swing

我有三个不同的类，每一个都是一个单独的 JFrame，有自己的 GUI，每个做不同的事情。在另一个类中，我有我的 Keypad 类，上面所有这些类都包含。

这是`actionPerformed`我的键盘类的一部分：

```
public void actionPerformed(ActionEvent e) {
        String s = CheckStock.stockNo.getText();
        switch (e.getActionCommand()) {
        case "1":
            CheckStock.stockNo.setText(s + "1");
            break;
        case "2":
            CheckStock.stockNo.setText(s + "2");
            break;
        case "3":
            CheckStock.stockNo.setText(s + "3");
            break; 
```

但是当是这样的时候，我只能在我的 CheckStock 类中使用它，我也想在`actionPerformed`其他类中使用它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:29:11.590

在每个 JFrame 类中，您都可以通过这种方式添加 Keypad 对象。

```
 add(new Keypad(1)); // For the first class
 add(new Keypad(2)); // For the second class
 add(new Keypad(3));// For the third class 
```

以这种方式修改您的键盘类。

```
public class Keypad extends JPanel implements ActionListener {

        private int identifier;
 public Keypad(int identifier) {
                this.identifier = identifier;
               ..............................
               ...............................
                }

          public void actionPerformed(ActionEvent e) {
                switch(identifier)
                {
                case 1:
                String s = CheckStock.stockNo.getText();
                CheckStock.stockNo.setText(s + e.getActionCommand());
                break;
                case 2:
                //for second class
                break;
                case 3:
                // for the third class
                 break;

        }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T01:00:26.260

创建一个键盘需要的通用接口......`KeyPadListener`例如。

在其中声明一个方法，例如`keyPadActionPerformed`. 现在约定将规定您应该传递某种事件对象，但您可以简单地传回对键盘的引用和要附加的值，即`public void keyPadActionPerformed(Keypad keyPad, String value)`

基本上，`KeyPad`当键盘事件发生时，您的类将允许其他对象自行注册以进行回调，`KeyPad#addKeyPadListener(KeyPadListener)`例如......

在您的`actionPerformed`方法中，您将通知所有已注册的侦听器发生了事件...

```
public void actionPerformed(ActionEvent e) {
    String s = e.getActionCommand();
    KeyPadListener[] listeners = getKeyPadListeners(); // You would provide this...
    if (listeners != null && listeners.length > 0) {
        for (KeyPadListener listener : listeners) {
            listener.keyPadActionPerformed(this, s);
        }
    }
} 
```

这意味着由`KeyPadListener`实现决定如何处理`keyPadActionPerformed`事件

# javascript - Rails Ajax 搜索不执行任何操作 - 404 错误

> ID：15014799
> 
> 赞同：0
> 
> 时间：2013-02-22T00:26:25.267
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, jquery

试图在 Rails 3 应用程序中找出 Ajax 搜索，遵循[这篇文章](https://stackoverflow.com/questions/10908566/rails-3-ajax-search)，它本身是从 Railscast 借来的。目前，当我提交时，什么都没有发生，如果我进入 Chrome 控制台，我会看到这个错误：

```
GET http://localhost:3000/search?utf8=%E2%9C%93&search=&_=1361491523102 404 (Not Found) 
```

posts.js 第 5 行似乎是有罪的，但这似乎是 jQuery 调用，所以我不确定我做错了什么。

我的相关代码：

**post.js.coffee**

```
jQuery ->
    # Ajax search on submit
    $('.search_form').submit( ->
        $.get(this.action, $(this).serialize(), null, 'script')
        false
  ) 
```

**post_controller.rb**

```
def show
  @search = Post.search(params[:search])

  respond_to do |format|
    format.html # show.html.erb
    format.json { redirect_to @post }
  end
end

def search
  @search = Post.search(params[:search])
  render json: { results: @search }
end 
```

**post.rb**

```
def self.search(search)
  if search
    where('name LIKE ?', "%#{search}%")
  else
    scoped
  end
end 
```

**显示.html.erb**

```
<%= form_tag search_path, method: "get", class: "search_form form-inline",
 style: "display:inline-block;" do %>
    <%= text_field_tag :search, params[:search], placeholder: "Search:", id: "search_field" %>
    <%= submit_tag("Search", name: nil, class: "btn search", remote: true) %>
<% end %>

# Testing for @search stops it from pulling a "no method '.first' for nil NilClass" error.
<div id="list"><%= render partial: 'list', locals: { search: @search } if @search%></div> 
```

**list.html.erb**

```
<ul>
    <% @search.each do |p| %>
        <li><a href=<%= p.id %> ><%= p.name %> <span class="manual_small">(<%= p.created_at.strftime("%b %d, %Y") %>)</span></a></li>
    <% end %>
</ul> 
```

知道这里出了什么问题吗？

编辑——添加路线文件的相关行：

```
resources :posts

# ...

match '/search', to: 'posts#search' 
```

我已经在那里有了“/搜索”路线。对吗？在这种情况下，问题出在其他地方吗？其余的代码看起来不错吗？

编辑——根据 Damien 的建议，向 PostsController 添加了搜索方法。感兴趣的新事物是 a) 我调用部分的方式，新的搜索操作，然后我尝试用“Post.all”替换 Post.rb 中的 show 方法的内容，但它仍然没有显示任何东西。但是，没有抛出错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:06:22.973

> “没有搜索操作！没有意识到我需要一个。里面应该有什么？当我尝试没有 AJAX 的早期版本时，我有一个搜索操作，它基本上是 show （+ @search 等）的复制品，带有“

使用 AJAX，无需渲染整个`show`页面。只需以所需格式返回过滤后的结果：

```
def search
  @search = Post.search(params[:search])
  render json: { results: @search }
end 
```

如有必要，添加基于格式的退货。

# sql - 如何为此 Oracle 查询应用某种循环？

> ID：15014802
> 
> 赞同：0
> 
> 时间：2013-02-22T00:26:52.047
> 
> 标签：sql, oracle, oracle11g

我有一个使用 Oracle 开发的查询。我想更新同一列

'5次。在我开发的查询下方：

```
MERGE INTO product pr 
USING(
SELECT pr.uuid,
            xmltype(pr.attributes_de_de).extract('//attr[@name = "SellingPoint1"]/string/text()')  AS sellingpoint1,
            xmltype(pr.attributes_de_de).extract('//attr[@name = "SellingPoint2"]/string/text()')  AS sellingpoint2,
            xmltype(pr.attributes_de_de).extract('//attr[@name = "SellingPoint3"]/string/text()')  AS sellingpoint3,
            xmltype(pr.attributes_de_de).extract('//attr[@name = "SellingPoint4"]/string/text()')  AS sellingpoint4,
            xmltype(pr.attributes_de_de).extract('//attr[@name = "SellingPoint5"]/string/text()')  AS sellingpoint5
  FROM product pr WHERE pr.defaultproductvariationid ='1tap_vEBvuEAAAE89CgjnPbb' AND pr.typecode = '16'
) defaultproducts ON (pr.uuid = '8d2p_vEBCJgAAAE8ruYjnPba')
WHEN MATCHED THEN 
UPDATE SET pr.attributes_de_de = CASE WHEN sellingpoint1 IS NOT NULL THEN
                                  CASE WHEN (SELECT count(1) existscount FROM product pr 
                                              WHERE pr.uuid = '8d2p_vEBCJgAAAE8ruYjnPba' 
                                              AND existsNode(xmltype(pr.attributes_de_de), '/attrs/attr[@name="SellingPoint1"]') = 1) = 1 
                                        THEN 
                                  UPDATEXML(XMLTYPE.createXML(pr.attributes_de_de),'/attrs/attr[@name = "SellingPoint1"]/string/text()', 
                                                    sellingpoint1).getClobVal() 
                                        ELSE 
                                  APPENDCHILDXML(xmltype(pr.attributes_de_de), 'attrs/attr[@name="SellingPoint22"]',
                                                    XMLType('<string>test</string>')).getClobVal()
                                        END  
                                    ELSE 
                                  DELETEXML(xmltype(pr.attributes_de_de), '/attrs/attr[@name="SellingPoint1"]').getClobVal()  
                                END
DELETE where pr.uuid != '8d2p_vEBCJgAAAE8ruYjnPba' 
```

此查询中的挑战是“pr.attribute_de_de”列应更新为 sellpoint1、sellingpoint2、sellingpoint3、sellingpoint4、sellingpoint5。如何在 oracle 中做到这一点。非常感谢您的任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T04:31:46.373

您不需要循环，因为 Oracle updateXML 函数可用于在单个 SQL UPDATE 语句中的多个节点上用新值替换现有元素、属性和其他节点。

```
...    
UPDATE SET pr.attributes_de_de = updateXML(pr.attributes_de_de, '/attrs/attr[@name = "SellingPoint1"]/string/text()', 'NewVal_SellingPoint1',  
                                                                '/attrs/attr[@name = "SellingPoint2"]/string/text()', 'NewVal_SellingPoint2',  
                                                                '/attrs/attr[@name = "SellingPoint3"]/string/text()', 'NewVal_SellingPoint3')  
...
```

[查看有关XMLtype 操作](http://docs.oracle.com/cd/B28359_01/appdev.111/b28369/xdb04cre.htm#CHDBIJCB)的 Oracle 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:52:16.370

我认为您的“USING”查询中需要五行。UNION 会起作用吗？说，像这样：

```
MERGE INTO product pr 
USING(
  SELECT pr.uuid, xmltype(pr.attributes_de_de).extract('//attr[@name = "SellingPoint1"]/string/text()') as sellingpoint,
  UNION ALL SELECT pr.uuid, xmltype(pr.attributes_de_de).extract('//attr[@name = "SellingPoint2"]/string/text()'),
  UNION ALL SELECT pr.uuid, xmltype(pr.attributes_de_de).extract('//attr[@name = "SellingPoint3"]/string/text()'),
  UNION ALL SELECT pr.uuid, xmltype(pr.attributes_de_de).extract('//attr[@name = "SellingPoint4"]/string/text()'),
  UNION ALL SELECT pr.uuid, xmltype(pr.attributes_de_de).extract('//attr[@name = "SellingPoint5"]/string/text()')
) defaultproducts ... 
```

...然后是查询的其余部分，但使用“卖点”而不是“卖点 1”、“卖点 2”等。

注意 UNION ALL 而不是 UNION：普通的 UNION（没有 ALL）将消除重复的行。我假设您每次都需要五行，无论是否重复。

希望这至少是朝着正确方向的推动。我在处理 XML 查询时都睡眼惺忪 :)

# mysql - 执行时出现 Bbugs

> ID：15014804
> 
> 赞同：0
> 
> 时间：2013-02-22T00:27:11.223
> 
> 标签：mysql, vb.net, mysql-connector

在谷歌搜索 3 小时后，我无法找出这段代码的问题所在。
代码在运行时停止工作`ExecuteNonQuery`。然后我得到一个超时。从数据库中列出我没有任何问题，但删除是。

```
Dim con As MySqlConnection = New MySqlConnection("server=" & Me.txt_mysqlHost.Text & "; user id=" & Me.txt_mysqlUser.Text & "; password=" & Me.txt_mysqlPassword.Text & "; database=" & Me.txt_mysqlDatabase.Text)
con.Open()
Dim mySelectQuery As String = "DELETE FROM Lager WHERE Artikelnr = '" & Artikelnr & "'"
Dim myCommand As New MySqlCommand(mySelectQuery, con)
myCommand.ExecuteNonQuery()
con.Close() 
```

# android - ListView Blank 不显示数据库条目

> ID：15014808
> 
> 赞同：0
> 
> 时间：2013-02-22T00:27:22.760
> 
> 标签：android, listview, arraylist, cursor, android-logcat

当我的数据库数据更改时尝试让我的 ListView 刷新时，我的列表视图现在完全空白。项目被添加到数据库中，但它们不再显示在列表视图中。在所有 db 列中，只有一个设置为显示在 listview (sname) 中。我的 Logcat 指向一个重新查询，但我不确定如何进行修复。请指教。

日志猫：

```
 02-19 22:41:41.303: W/SQLiteCursor(1083): requery() failed database /data/data/com.loginplus.home/databases/SiteLogindb (conn# 0) already closed
   02-19 22:41:41.303: W/SQLiteCursor(1083): java.lang.IllegalStateException: database /data/data/com.loginplus.home/databases/SiteLogindb (conn# 0) already closed
   02-19 22:41:41.303: W/SQLiteCursor(1083):    at android.database.sqlite.SQLiteDatabase.verifyDbIsOpen(SQLiteDatabase.java:2082)
   02-19 22:41:41.303: W/SQLiteCursor(1083):    at android.database.sqlite.SQLiteDatabase.getDbConnection(SQLiteDatabase.java:2407)
   02-19 22:41:41.303: W/SQLiteCursor(1083):    at android.database.sqlite.SQLiteDatabase.getDatabaseHandle(SQLiteDatabase.java:2388)
   02-19 22:41:41.303: W/SQLiteCursor(1083):    at android.database.sqlite.SQLiteCursor.requery(SQLiteCursor.java:246)
   02-19 22:41:41.303: W/SQLiteCursor(1083):    at android.app.Activity.performRestart(Activity.java:4505)
   02-19 22:41:41.303: W/SQLiteCursor(1083):    at android.app.Activity.performResume(Activity.java:4531)
   02-19 22:41:41.303: W/SQLiteCursor(1083):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2434)
  02-19 22:41:41.303: W/SQLiteCursor(1083):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2472)
   02-19 22:41:41.303: W/SQLiteCursor(1083):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1173)
   02-19 22:41:41.303: W/SQLiteCursor(1083):    at android.os.Handler.dispatchMessage(Handler.java:99)
   02-19 22:41:41.303: W/SQLiteCursor(1083):    at android.os.Looper.loop(Looper.java:137)
   02-19 22:41:41.303: W/SQLiteCursor(1083):    at android.app.ActivityThread.main(ActivityThread.java:4424)
   02-19 22:41:41.303: W/SQLiteCursor(1083):    at java.lang.reflect.Method.invokeNative(Native Method)
   02-19 22:41:41.303: W/SQLiteCursor(1083):    at java.lang.reflect.Method.invoke(Method.java:511)
   02-19 22:41:41.303: W/SQLiteCursor(1083):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
   02-19 22:41:41.303: W/SQLiteCursor(1083):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
   02-19 22:41:41.303: W/SQLiteCursor(1083):    at dalvik.system.NativeStart.main(Native Method)
   02-19 22:41:41.323: W/SQLiteCursor(1083): requery() failed database /data/data/com.loginplus.home/databases/SiteLogindb (conn# 0) already closed
   02-19 22:41:41.323: W/SQLiteCursor(1083): java.lang.IllegalStateException: database /data/data/com.loginplus.home/databases/SiteLogindb (conn# 0) already closed
   02-19 22:41:41.323: W/SQLiteCursor(1083):    at android.database.sqlite.SQLiteDatabase.verifyDbIsOpen(SQLiteDatabase.java:2082)
   02-19 22:41:41.323: W/SQLiteCursor(1083):    at android.database.sqlite.SQLiteDatabase.getDbConnection(SQLiteDatabase.java:2407)
   02-19 22:41:41.323: W/SQLiteCursor(1083):    at android.database.sqlite.SQLiteDatabase.getDatabaseHandle(SQLiteDatabase.java:2388)
   02-19 22:41:41.323: W/SQLiteCursor(1083):    at android.database.sqlite.SQLiteCursor.requery(SQLiteCursor.java:246)
   02-19 22:41:41.323: W/SQLiteCursor(1083):    at android.app.Activity.performRestart(Activity.java:4505)
   02-19 22:41:41.323: W/SQLiteCursor(1083):    at android.app.Activity.performResume(Activity.java:4531)
   02-19 22:41:41.323: W/SQLiteCursor(1083):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2434)
   02-19 22:41:41.323: W/SQLiteCursor(1083):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2472)
   02-19 22:41:41.323: W/SQLiteCursor(1083):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1173)
   02-19 22:41:41.323: W/SQLiteCursor(1083):    at android.os.Handler.dispatchMessage(Handler.java:99)
   02-19 22:41:41.323: W/SQLiteCursor(1083):    at android.os.Looper.loop(Looper.java:137)
   02-19 22:41:41.323: W/SQLiteCursor(1083):    at android.app.ActivityThread.main(ActivityThread.java:4424)
   02-19 22:41:41.323: W/SQLiteCursor(1083):    at java.lang.reflect.Method.invokeNative(Native Method)
   02-19 22:41:41.323: W/SQLiteCursor(1083):    at java.lang.reflect.Method.invoke(Method.java:511)
   02-19 22:41:41.323: W/SQLiteCursor(1083):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
   02-19 22:41:41.323: W/SQLiteCursor(1083):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
   02-19 22:41:41.323: W/SQLiteCursor(1083):    at dalvik.system.NativeStart.main(Native Method)
   02-19 22:41:41.343: W/SQLiteCursor(1083): requery() failed database /data/data/com.loginplus.home/databases/SiteLogindb (conn# 0) already closed
   02-19 22:41:41.343: W/SQLiteCursor(1083): java.lang.IllegalStateException: database /data/data/com.loginplus.home/databases/SiteLogindb (conn# 0) already closed
   02-19 22:41:41.343: W/SQLiteCursor(1083):    at android.database.sqlite.SQLiteDatabase.verifyDbIsOpen(SQLiteDatabase.java:2082)
   02-19 22:41:41.343: W/SQLiteCursor(1083):    at android.database.sqlite.SQLiteDatabase.getDbConnection(SQLiteDatabase.java:2407)
   02-19 22:41:41.343: W/SQLiteCursor(1083):    at android.database.sqlite.SQLiteDatabase.getDatabaseHandle(SQLiteDatabase.java:2388)
   02-19 22:41:41.343: W/SQLiteCursor(1083):    at android.database.sqlite.SQLiteCursor.requery(SQLiteCursor.java:246)
   02-19 22:41:41.343: W/SQLiteCursor(1083):    at android.app.Activity.performRestart(Activity.java:4505)
   02-19 22:41:41.343: W/SQLiteCursor(1083):    at android.app.Activity.performResume(Activity.java:4531)
   02-19 22:41:41.343: W/SQLiteCursor(1083):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2434)
  02-19 22:41:41.343: W/SQLiteCursor(1083):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2472)
  02-19 22:41:41.343: W/SQLiteCursor(1083):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1173)
  02-19 22:41:41.343: W/SQLiteCursor(1083):     at android.os.Handler.dispatchMessage(Handler.java:99)
  02-19 22:41:41.343: W/SQLiteCursor(1083):     at android.os.Looper.loop(Looper.java:137)
  02-19 22:41:41.343: W/SQLiteCursor(1083):     at android.app.ActivityThread.main(ActivityThread.java:4424)
  02-19 22:41:41.343: W/SQLiteCursor(1083):     at java.lang.reflect.Method.invokeNative(Native Method)
  02-19 22:41:41.343: W/SQLiteCursor(1083):     at java.lang.reflect.Method.invoke(Method.java:511)
  02-19 22:41:41.343: W/SQLiteCursor(1083):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
  02-19 22:41:41.343: W/SQLiteCursor(1083):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
  02-19 22:41:41.343: W/SQLiteCursor(1083):     at dalvik.system.NativeStart.main(Native Method) 
```

日志猫 2/2513

```
 02-24 20:44:04.032: E/AndroidRuntime(1323): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.loginplus.home/com.loginplus.home.LoginList}: java.lang.NullPointerException
   02-24 20:44:04.032: E/AndroidRuntime(1323):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
   02-24 20:44:04.032: E/AndroidRuntime(1323):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
   02-24 20:44:04.032: E/AndroidRuntime(1323):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
   02-24 20:44:04.032: E/AndroidRuntime(1323):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
   02-24 20:44:04.032: E/AndroidRuntime(1323):  at android.os.Handler.dispatchMessage(Handler.java:99)
   02-24 20:44:04.032: E/AndroidRuntime(1323):  at android.os.Looper.loop(Looper.java:137)
   02-24 20:44:04.032: E/AndroidRuntime(1323):  at android.app.ActivityThread.main(ActivityThread.java:4424)
   02-24 20:44:04.032: E/AndroidRuntime(1323):  at java.lang.reflect.Method.invokeNative(Native Method)
   02-24 20:44:04.032: E/AndroidRuntime(1323):  at java.lang.reflect.Method.invoke(Method.java:511)
   02-24 20:44:04.032: E/AndroidRuntime(1323):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
   02-24 20:44:04.032: E/AndroidRuntime(1323):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
   02-24 20:44:04.032: E/AndroidRuntime(1323):  at dalvik.system.NativeStart.main(Native Method)
   02-24 20:44:04.032: E/AndroidRuntime(1323): Caused by: java.lang.NullPointerException
   02-24 20:44:04.032: E/AndroidRuntime(1323):  at com.loginplus.home.LoginList.populateList(LoginList.java:92)
   02-24 20:44:04.032: E/AndroidRuntime(1323):  at com.loginplus.home.LoginList.onCreate(LoginList.java:41)
   02-24 20:44:04.032: E/AndroidRuntime(1323):  at android.app.Activity.performCreate(Activity.java:4465)
   02-24 20:44:04.032: E/AndroidRuntime(1323):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
   02-24 20:44:04.032: E/AndroidRuntime(1323):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

活动课：

```
 public class LoginList extends Activity implements OnClickListener,    OnItemClickListener {

  private ListView loginList;
  private Button webLogin;

  private ListAdapter loginListAdapter;

  private ArrayList<LoginDetails> loginArrayList;

  List<String> arrayList = new ArrayList<String>();

 @Override 
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 arrayList = populateList();
 loginListAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, populateList());
 setContentView(R.layout.login_listview);

 loginList = (ListView)
 findViewById(R.id.loginlist);
 loginList.setOnItemClickListener(this);

 webLogin = (Button)
 findViewById(R.id.button3);
 webLogin.setOnClickListener(this);

 }

@Override
public void onClick (View v) {
Intent webLoginIntent = new Intent (this, LoginPlusActivity.class);
startActivity(webLoginIntent);

}

public List<String> populateList (){

List<String> webNameList = new ArrayList<String>();

dataStore openHelperClass = new dataStore (this);

SQLiteDatabase sqliteDatabase = openHelperClass.getReadableDatabase();

Cursor cursor = sqliteDatabase.query(dataStore.TABLE_NAME_INFOTABLE, null, null, null,  null, null, dataStore.COLUMN_NAME_SITE, null);

//startManagingCursor(cursor); (revised 2/25/13)

while (cursor.moveToNext()){
String sName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_SITE));
String wUrl = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_ADDRESS));
String uName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_USERNAME));
String pWord = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_PASSWORD));
String lNotes = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_NOTES));

LoginDetails lpDetails = new LoginDetails();

  lpDetails.setsName(sName);
  lpDetails.setwUrl(wUrl);
  lpDetails.setuName(uName);
  lpDetails.setpWord(pWord);
  lpDetails.setlNotes(lNotes);

  loginArrayList.add(lpDetails);
  webNameList.add(sName);
 }

 cursor.close(); //(revised 2/25/13)
 return webNameList;
 }

@Override
protected void onResume() {
super.onResume();

ArrayList<LoginDetails> loginArrayList = new ArrayList<LoginDetails>();
loginArrayList.clear();

arrayList.clear();

arrayList = populateList();

dataStore refreshHelper = new dataStore (this);
SQLiteDatabase sqliteDatabase = refreshHelper.getWritableDatabase();
Cursor cursor = sqliteDatabase.query(dataStore.TABLE_NAME_INFOTABLE, null, null, null, null, null, dataStore.COLUMN_NAME_SITE, null);
String[]columns = new String[] { dataStore.COLUMN_NAME_SITE,    dataStore.COLUMN_NAME_ADDRESS, dataStore.COLUMN_NAME_USERNAME,  dataStore.COLUMN_NAME_PASSWORD, dataStore.COLUMN_NAME_NOTES };
int[] to = new int[]{R.id.rusName, R.id.ruwUrl, R.id.ruuName, R.id.rupWord, R.id.ruNotes};
SimpleCursorAdapter loginListAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, cursor, columns, to);
loginListAdapter.notifyDataSetChanged();

}

@Override
 public void onItemClick(AdapterView<?> arg0 , View arg1, int arg2, long arg3) {
 Toast.makeText(getApplicationContext(), "Selected ID :" + arg2,     Toast.LENGTH_SHORT).show();

 Intent updateDeleteLoginInfo = new Intent (this, UpdateDeleteLoginList.class);

 LoginDetails clickedObject = loginArrayList.get(arg2);

  Bundle loginBundle = new Bundle();
  loginBundle.putString("clickedWebSite",clickedObject.getsName());
  loginBundle.putString("clickedWebAddress",clickedObject.getwUrl());
  loginBundle.putString("clickedUserName",clickedObject.getuName());
  loginBundle.putString("clickedPassWord",clickedObject.getpWord());
  loginBundle.putString("clickedNotes",clickedObject.getlNotes());

  updateDeleteLoginInfo.putExtras(loginBundle);

  startActivityForResult(updateDeleteLoginInfo, 0);   
   }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:42:36.317

在我看来，问题出在这一行`startManagingCursor(cursor);`。您要求活动管理光标，但在完成光标后立即关闭连接。只需注释掉该行并关闭游标而不是数据库。只需更改`sqliteDatabase.close();`为`cursor.close()`.

# python - django-crispy-forms 在同一行上有字段和按钮

> ID：15014810
> 
> 赞同：5
> 
> 时间：2013-02-22T00:27:30.933
> 
> 标签：python, django, django-crispy-forms

我需要在同一行上有一个带有按钮的引导 PrependedText 字段。我可以在同一行得到它，但它在文本框之前显示按钮，我想要它之后。我在做什么错以及如何让它在框后显示（在文本字段的右侧）

```
serial = forms.CharField(forms.TextInput(attrs={'autocomplete':'off',}))
    serial.label = ''

    helper = FormHelper()
    helper.form_class = 'form-horizontal'
    helper.form_action = 'checkout'
    helper.form_method = 'post'

    helper.layout = Layout(
        HTML("<p class='alert-info'>Please scan the items barcode or enter the serial # in the field below.</p>"),
        Div(
            Div(PrependedText('serial', 'Serial #',css_class='input-xlarge'), css_class='span1'),
            Div(Submit('submit','Submit', css_class='btn-primary'), css_class='span1'),
            css_class='row-fluid'
        )
    ) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T04:39:02.580

首先，我注意到在你对`serial`字段的定义中，你忘了在`widget=`前面加上`forms.TextInput(`. 另外，您`p`也应该`alert`上课，而不仅仅是`alert-info`.

我可以通过更改 to 的第一个实例来解决问题`span1`，`span6`但我绝对不建议这样做，因为调整窗口大小会导致布局问题，甚至可以使它看起来根本没有提交按钮！

我将推荐使用`PrependedAppendedText`，但[模板](https://github.com/maraujop/django-crispy-forms/blob/dev/crispy_forms/templates/bootstrap/layout/appended_prepended_text.html)`PrependedAppendedText.template = 'custom_appended_prepended_text.html'`假设您正在附加文本而不是按钮，因此除非您覆盖模板（例如），否则这将不起作用。如果您想走那条路，只需将原始模板复制到您的自定义模板，删除`span`第二个实例所在的模板`{{ crispy_appended_text|safe }}`，然后使用如下代码：

```
Div(PrependedAppendedText('serial', 'Serial #', '<button class="btn btn-primary">Submit</button>', css_class='input-xlarge'), css_class='span1'), 
```

不过，我确实有另一个建议。我更喜欢这个解决方案，但这意味着放弃前置文本以支持占位符文本。首先，除了将字段的`autocomplete`属性设置为`off`，将其`class`属性设置为 ，并将`input-xlarge`其属性设置`placeholder`为`Serial #`。接下来，使用此代码：

```
FieldWithButtons('serial', StrictButton('Submit', type='submit', css_class='btn-primary')), 
```

无需创建自定义模板。此外，在`p`表单顶部的文本和字段的占位符文本之间，我认为您的用户不会因缺少前置文本而感到困惑。

# java - 在静态方法中注入依赖项

> ID：15014812
> 
> 赞同：0
> 
> 时间：2013-02-22T00:27:34.813
> 
> 标签：java, spring

是否可以在这样的静态方法中注入依赖项：

```
@Component
public class MyClass {
    @Autowired
    public static void main(String[] args) {
        // do stuff 
    }
} 
```

我想要实现的是为此工作代码实现自动装配：

```
@Component
public class MyClass {

    public static void main(String[] args, MyClass mc) {
        ApplicationContext ctx = new GenericXmlApplicationContext("context.xml");
        MyClass p = ctx.getBean(MyClass.class);
        // do stuff
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:16:57.473

首先，我很确定包含的第二个代码块`public static void main(String[] args, MyClass mc) {`不会作为启动应用程序的主要方法。

您将无法以这种方式使用自动装配。请记住，静态 main 方法是应用程序的入口，请将其视为与您的类不同。输入此方法时，还没有实例化任何对象，包括处理自动装配的 Spring Context。

# android - 使用复选框显示导航（内容）在 Android 上不起作用

> ID：15014813
> 
> 赞同：1
> 
> 时间：2013-02-22T00:27:41.233
> 
> 标签：android, css

我有以下设置（在窄窗口中查看，<750px 宽）：[http ://codepen.io/darrylhein/pen/oFalc](http://codepen.io/darrylhein/pen/oFalc)

问题是导航的隐藏/显示在 Android 的默认浏览器中不起作用。它似乎在其他任何地方都有效。（它确实适用于 Android 上的 Firefox。）

基本上我`input:checked ~ .class { height: 16em; }`用来显示导航。

我试过删除过渡和其他各种东西，但它似乎不起作用。

有任何想法吗？

我想避免使用 JS，但如果必须，我会的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:47:09.920

因此，解决方案有 2 个部分：

1) Android <4.1.2 出现问题。解决方案是在 body 上添加一个假动画：

```
body { -webkit-animation: bugfix infinite 1s; }
@-webkit-keyframes bugfix { 
    from { padding:0; }
    to { padding:0; }
} 
```

2) iOS <6 上还有一个问题，标签不选中复选框。解决方案是将一个添加`onclick`到`label`：

```
<label for="checkbox" onclick>Menu</label> 
```

我在这里找到了解决方案：http: [//timpietrusky.com/advanced-checkbox-hack](http://timpietrusky.com/advanced-checkbox-hack)

我还更新了 codepen：[http ://codepen.io/darrylhein/pen/oFalc](http://codepen.io/darrylhein/pen/oFalc)

# regex - 正则表达式 - 跳行

> ID：15014815
> 
> 赞同：0
> 
> 时间：2013-02-22T00:27:49.097
> 
> 标签：regex

我正在使用名为[https://code.google.com/p/slre/](https://code.google.com/p/slre/)的基本正则表达式解析器，它具有一些基本的正则表达式集实现。我想解析看起来像的http标头

```
GET /3397557/RSVP006_male_468X60_05.swf HTTP/1.1
User-Agent: Opera/9.80 (Macintosh; Intel Mac OS X 10.8.2) Presto/2.12.388 Version/12.10
Host: s0.2mdn.net 
```

我的意图是到达“Host:”，我不关心 User-Agent: 行，那么我如何跳过 User-Agent 行并移动到 Host: ？到目前为止我尝试过的表达方式非常无用，

```
"^\\s*(GET|POST)\\s+(\\S+)\\s+HTTP/(\\d)\\.(\\d)\\s+User-Agent:\\s+.*?\\s+Host:\\s+(\\S+)" 
```

我知道这`User-Agent:\\s+.*?`不是我们跳过这条线的方式，但我不知道该怎么做，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:39:09.243

好吧，我不熟悉您的库，但下面的正则表达式有效（在 javascript 中实现）

```
var str = "GET /3397557/RSVP006_male_468X60_05.swf HTTP/1.1"+
"User-Agent: Opera/9.80 (Macintosh; Intel Mac OS X 10.8.2) Presto/2.12.388 Version/12.10"+
"Host: s0.2mdn.net"

// capture the `Host` value
// has `m` flag to ensure multi-line capturing - not sure if you need to do that with
// your library, or even how to do that
var m = str.match(/Host:\s*(.+)/m)
// get the first captured match, which is the value of the `Host` field
console.log(m[1]) 
```

***编辑：更仔细的正则表达式***

*   在字符串中添加了换行符（忘记了 javascript 需要显式添加它们）
*   添加`start marker`( `^`) 正则表达式的开头，因此它仅`Host:`在行首时匹配

```
var str = "GET /3397557/RSVP006_male_468X60_05.swf HTTP/1.1\n"+
"User-Agent: Opera/9.80 (Macintosh; Intel Mac OS X 10.8.2) Presto/2.12.388 Version/12.10\n"+
"Host: s0.2mdn.net"

var m
if(m = str.match(/^Host:\s*(.+)/m)) // added `[\r\n]+`
  console.log(m[1]) // only if there is a match... 
```

# android - 在下一个活动中在 webview 中预加载 URL

> ID：15014816
> 
> 赞同：1
> 
> 时间：2013-02-22T00:27:52.297
> 
> 标签：android, webview, android-activity, cordova

我有 2 个活动。在第二个活动中，我有一个 WebView，我在其中加载了一个本地 html 页面（来自 assets 文件夹）。在 onCreate 方法中，我调用 webView.loadUrl(url)。

我需要一张从第一个活动过渡到第二个活动的幻灯片。这就是我的问题所在：第二个活动按原样滑入，但在 WebView 中显示页面需要一点时间。所以，基本上，只有一个白色的空白屏幕滑入。我需要第二个 Activity 在它滑入之前加载 html 页面。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:36:17.013

简短的回答是：你真的不能。

一次只有一个 Activity 处于“活动状态”（在屏幕上），因此，当您的 FirstActivity 仍然可见时，您的 SecondActivity 不能做任何事情。

如果您只使用 1 个 Activity 和 2 个 WebView，一个可见，一个隐藏，则可以实现与您所追求的类似的效果。您应该能够在第二个（隐藏的）webview 隐藏时加载一个 url，然后使其可见并在您准备好时将其滑入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T00:36:31.777

另一种方法是将您的第二个活动（WebView 等）的内容移动到[片段](http://developer.android.com/guide/components/fragments.html)中并将其推送到现有活动中。这样，您可以在显示之前将 WebView 预加载到片段中。

# xna - 在等轴测 2D 投影中旋转 90 度后计算相机的新坐标

> ID：15014818
> 
> 赞同：2
> 
> 时间：2013-02-22T00:27:53.540
> 
> 标签：xna, camera, rendering, game-engine, isometric

我制作了一个 2D 等距渲染器。它工作正常，但现在我想从 4 个不同的角度（没有 NW SE SW）显示我的场景，但是**在 90° 旋转时，我的相机无法将我的场景中心保持在屏幕上。**

*什么工作：*

*   我计算新的场景投影以匹配新的视口（我的世界中的 xyz）。
*   我重新组织了我的部分场景（块）以正确的顺序绘制它们
*   我重新组织“块”的“图块”以正确的顺序绘制它们
*   我可以通过 180 度的旋转保持正确的中心。

*什么不起作用：*

*   旋转 90 度后，我找不到适用于我的相机的正确翻译。

*我知道的 ：*

*   为了与我的相机保持相同的中心旋转 180°，我必须这样做：

`camera.Position -= new Vector2(2 * camera.Position.X + camera.Width, 2 * camera.Position.Y + camera.Height);`

**插图** ![从 SE 的角度看](../Images/57643a42e14b8e846c53d2d2941c9388.png) ![在此处输入图像描述](../Images/2a2297896beef5271e8fdfebc3ad1ec1.png) ![在此处输入图像描述](../Images/af6a6c2655d51ad62d417b39a20fad8d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T08:59:36.190

如果地图的中心是 origo (0,0,0)，这很容易：

首先将默认相机位置存储在 Vector3 CameraOffset 中，然后使用旋转矩阵计算位置。redians 中的 90* 是半个 Pi，所以我们将使用 PiOverTwo。我们还将使用枚举来决定要指向的方向，所以你可以说

Camera.Orientation = 方向.东;

并且相机应该自行修复:)

```
public enum Orientation
{
    North, East, South, West
} 
```

在相机中：

```
public Vector3 Position { get; protected set; }

Vector3 _CameraOffset = new Vector3(0, 20, 20);
public Vector3 CameraOffset
{
    get
    {
        return _Orientation;
    }

    set
    {
        _Orientation = value;
        UpdateOrientation();
    }
}

Orientation _Orientation = Orientation.North;
public Orientation Orientation
{
    get
    {
        return _Orientation;
    }

    set
    {
        _Orientation = value;
        UpdateOrientation();
    }
}

private void UpdateOrientation()
{
    Position = Vector3.Transform(CameraOffset, Matrix.CreateRotationY(MathHelper.PiOverTwo * (int)Orientation));
} 
```

如果您想在位置之间进行滑行运动，我想我也可以提供帮助；）

如果您的相机没有聚焦于 Vector3.Zero 并且不应该围绕它旋转，您只需要更改：

```
Position = Vector3.Transform(CameraOffset, Matrix.CreateRotationY(MathHelper.PiOverTwo * (int)Orientation)); 
```

至：

```
Position = Vector3.Transform(CameraOffset, Matrix.CreateRotationY(MathHelper.PiOverTwo * (int)Orientation) * Matrix.CreateTranslation(FocusPoint)); 
```

在这里，FocusPoint 是您旋转的 3D 点（您的世界中心）。现在你也知道如何让你的相机四处移动，如果你在你的 Camera.Update() 中调用 UpdateOrientation() ;)

编辑; 很抱歉，完全错过了您使用 2D 的重点。我稍后会回来看看我是否可以提供帮助：P

# devise - 覆盖设计密码无效方法

> ID：15014823
> 
> 赞同：1
> 
> 时间：2013-02-22T00:28:00.823
> 
> 标签：devise

我正在使用 Devise 和相关的 Devise Security Extension gem，并且无法找出如何覆盖标准密码无效消息。我正在使用 config.password_regex 设置格式要求并在我的相关模型中使用 :secure_validatable，但是当用户输入错误密码时我收到的消息是“密码无效”。我已经搜索了我的整个代码库，但无法找到此消息 - 我不知道如何覆盖此消息，以及是否应该使用相关的语言环境文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T11:09:48.563

您可以使用 i18n 翻译，例如

```
en:
  activerecord:
    errors:
      models:
        user:
          attributes:
            password:
              invalid: Security requirements not fulfilled 
```

# postgresql - 具有高 cpu 的 postgres 查询需要很长时间才能运行

> ID：15014827
> 
> 赞同：0
> 
> 时间：2013-02-22T00:28:14.010
> 
> 标签：postgresql, postgresql-9.1

我有一个运行 PHP 和 postgres 后端（9.1）的 Web 应用程序。

大多数繁重的数据库提升工作都是通过 postgres 存储过程完成的。

应用程序中的一个过程是导入数据例程。存储过程在导入时非常密集，但在开发时可以在大约 15 秒内导入我的测试表（大约 20 行数据）。

这是在我的本地桌面上的 4 核 ubuntu VM 上完成的，默认 postgres 配置（分配给 VM 的 1GB 内存）。我的 CPU 是 Intel i7。

我在本地机器上使用了 pg_top，SELECT 进程在 CPU 使用率达到 60% 时达到峰值，然后在 15 秒内完成。

所以，我现在已经将应用程序部署到一个实时环境，这是一个 1and1 专业服务器。32 核，64GB 内存，2TB 硬盘。非常昂贵和非常大的数字！

现在，在实时服务器上运行相同的导入例程需要超过 6 分钟，而 postgres SELECT 语句在 100% CPU 下运行大约需要 6 分钟。

我已经通过了许多 postgres conf 设置并增加了内存数量以匹配更高功率的盒子，但无论我如何更改它似乎都不会对极差的性能产生任何影响。

有谁知道为什么查询会执行得这么差？

在具有 1GB 内存的 4 核 VM 上只需 15 秒

但是在具有 64GB 内存的 32 核专用服务器上需要 6 分钟

有些东西显然是搞砸了，但我不知道它是什么:(

编辑：

好的，这是我认为我已经确定问题的查询（在大型数据集上需要 50/60 毫秒，而不是在小数据集上需要 10 毫秒）

```
EXPLAIN UPDATE artwork_entity SET "updated_on"=NOW(), "category"='blah', "category:oid"=47425 
WHERE artwork_entity."id" IN (
SELECT n."id" FROM (
SELECT e."id" FROM artwork_entity e
WHERE e."id"=47425 OR e."id" IN
(SELECT l."descendant_id" FROM artwork_relation l
LEFT JOIN artwork_entity e1 ON l."descendant_id"=e1."id"
WHERE l."depth">0 AND l."ancestor_id"=47425
AND (e1."category:oid"=(SELECT e2."category:oid" FROM artwork_entity e2 WHERE e2."id"=l."ancestor_id") OR e1."category:oid" IS NULL))
) AS n);

Update on artwork_entity  (cost=3864.35..7743.46 rows=21118 width=451)"
  ->  Hash Semi Join  (cost=3864.35..7743.46 rows=21118 width=451)"
        Hash Cond: (artwork_entity.id = e.id)"
        ->  Seq Scan on artwork_entity  (cost=0.00..3364.36 rows=42236 width=445)"
        ->  Hash  (cost=3600.38..3600.38 rows=21118 width=10)"
              ->  Seq Scan on artwork_entity e  (cost=24.84..3600.38 rows=21118 width=10)"
                    Filter: ((id = 47425) OR (hashed SubPlan 2))"
                    SubPlan 2"
                      ->  Nested Loop Left Join  (cost=0.00..24.83 rows=1 width=4)"
                            Filter: ((e1."category:oid" = (SubPlan 1)) OR (e1."category:oid" IS NULL))"
                            ->  Index Scan using artwork_relation_ancestor_id_descendant_id_key on artwork_relation l  (cost=0.00..8.28 rows=1 width=8)"
                                  Index Cond: (ancestor_id = 47425)"
                                  Filter: (depth > 0)"
                            ->  Index Scan using artwork_entity_pkey on artwork_entity e1  (cost=0.00..8.27 rows=1 width=8)"
                                  Index Cond: (l.descendant_id = id)"
                            SubPlan 1"
                              ->  Index Scan using artwork_entity_pkey on artwork_entity e2  (cost=0.00..8.27 rows=1 width=4)"
                                    Index Cond: (id = l.ancestor_id)" 
```

此外，执行此查询时没有向任何列添加索引。

另外，请注意内部选择语句只需要大约 10/20 毫秒即可在大型数据集上运行（所以它必须是更新？）它只更新大量可用行中的 2 行。

编辑2：

```
EXPLAIN SELECT e."id" FROM artwork_entity e
WHERE e."id"=47425 OR e."id" IN
(
SELECT l."descendant_id" FROM artwork_relation l
LEFT JOIN artwork_entity e1 ON l."descendant_id"=e1."id"
WHERE l."depth">0 AND l."ancestor_id"=47425
AND (e1."category:oid"=(SELECT e2."category:oid" FROM artwork_entity e2 WHERE e2."id"=l."ancestor_id") OR e1."category:oid" IS NULL)
) 
```

然后它尝试为序列扫描获取 21k 行

但是，如果我将其分解为两个单独的查询，如下所示：

```
EXPLAIN SELECT e."id" FROM artwork_entity e
WHERE e."id"=47425 
```

这只得到 1 行，然后是查询的其他部分

```
EXPLAIN SELECT l."descendant_id" FROM artwork_relation l
LEFT JOIN artwork_entity e1 ON l."descendant_id"=e1."id"
WHERE l."depth">0 AND l."ancestor_id"=47425
AND (e1."category:oid"=(SELECT e2."category:oid" FROM artwork_entity e2 WHERE e2."id"=l."ancestor_id") OR e1."category:oid" IS NULL) 
```

也只得到 1 行，但如果第二个查询是 in 的一部分，那么它会尝试获取所有 21k 行。

怎么会？

编辑3：

将在初始扫描中返回 21k 行的语句简化为：

```
EXPLAIN SELECT e."id" FROM artwork_entity e
WHERE e."id"=47425 OR e."id" IN
(
SELECT l."descendant_id" FROM artwork_relation l
WHERE l."depth">0 AND l."ancestor_id"=47425
) 
```

分别运行它们都返回单行，但加在一起它会查询整个数据集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:17:47.133

好的，我想出了一个更快的方法：

而不是这样做

其中 e."id"=47425 或 e."id" IN (...)

我可以删除 OR 语句，只需执行以下 IN 语句：

```
SELECT e."id" FROM artwork_entity e
WHERE e."id" IN
(
SELECT l."descendant_id" FROM artwork_relation l
LEFT JOIN artwork_entity e1 ON l."descendant_id"=e1."id"
WHERE l."depth">=0 AND l."ancestor_id"=47425
AND (e1."category:oid"=(SELECT e2."category:oid" FROM artwork_entity e2 WHERE e2."id"=l."ancestor_id") OR e1."category:oid" IS NULL)
) 
```

不同的是现在 IN 语句是 depth>=0 而不是 depth>0。原因是我实际上将实体的自引用关系存储在深度为 0 的位置。我想我是在编写此存储过程之后以这种方式添加的，因此当时它不可用。

无论如何，这样做它只搜索正确的行，结果是一个更快的查询（12 毫秒而不是 60 毫秒）

不过，这个答案可能对其他人没有用！

**编辑：**

我确实说过这是我的解决方案，总的来说它要好得多。

但是，现在在实时服务器上，导入需要 50 秒（而不是 6 分钟），但在我的本地 VM 上仍然要快得多（使用相同的数据集需要 12 秒）

postgres 没有达到 30% 以上的 CPU（在实时或本地服务器上），但由于某种原因，它在我的低功率本地 VM 上更快。

我有什么遗漏或应该注意配置吗？

# symfony - symfony2 如何在表单构建器中使用实体保存特定数据

> ID：15014837
> 
> 赞同：0
> 
> 时间：2013-02-22T00:28:51.233
> 
> 标签：symfony

我需要为`$id`我从控制器解析的活动用户存储用户信息。在这种情况下（在代码中）我获得了所有用户的表单列表，但我只需要获得与我一起工作的实际用户。

```
 public function buildForm(FormBuilderInterface $builder, array $options)
    {
    $id = $this->id;

        $builder
            ->add('companyname')
            ->add('address')
            ->add('city')
            ->add('zip')
            ->add('userinfo', 'entity',  array('property' => 'id', 'class' => 'Admin\SecureBundle\Entity\Userinfo', 'attr' => array('value' => $id), 'empty_value' => $id)); 
```

想法：我有一个用户和该用户的发票地址。在数据库onetoone rel。我需要创建活动用户的 invoiceaddress - 该用户的 id 应该存储在 userinfo 中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:51:59.127

这是来自[关于实体形式的 Symfony2-Doc](http://symfony.com/doc/current/reference/forms/types/entity.html)：

```
$builder->add('users', 'entity', array(
    'class' => 'AcmeHelloBundle:User',
    'query_builder' => function(EntityRepository $er) {
        return $er->createQueryBuilder('u')
            ->where('u.isActive = 1')
            ->orderBy('u.username', 'ASC');
    },
)); 
```

您需要在此处进行自己的查询。

# php - 在特定时间触发代码

> ID：15014839
> 
> 赞同：1
> 
> 时间：2013-02-22T00:28:58.377
> 
> 标签：php, events, time

是否可以告诉 PHP 在给定的日期和时间执行一段代码？例如，Blogger.com 允许某人设置将来发布的博文（例如 2014 年 12 月 12 日上午 6:00）。

PHP可以做类似的事情吗？

（对不起，我什至不知道像这样的事件的正确术语是什至能够搜索它们！:()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:32:15.133

告诉 PHP 自己执行此操作是不可能的，因为它需要一个永远运行的进程来定期调用您的 PHP 代码。值得庆幸的是，有几件事可以做到这一点：

1) 从 cron 作业调用 PHP 脚本，然后执行任何必要的工作。如果您无权访问 crontab，则可以在用户 ping 您的站点时定期调用它，尽管这当然不太可靠。

2）使用[`at`](http://linux.about.com/library/cmd/blcmdl1_at.htm)。这与 Linux 系统上的 cron 的工作方式基本相同，但会在准确的时间安排一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T00:37:54.250

对于“在特定时间触发代码”，cron 有效。但是对于像在特定时间发表文章这样简单的事情，它是不需要的。您可以在文章中存储发布日期。显示文章列表时，您可以将查询调整为类似`WHERE PUBLISH_DATE <= NOW()`的内容，并在文章页面上检查文章的发布日期是否已过，然后再显示文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T00:30:27.910

您可以使用 cron 作业（或 Windows 上的计划任务）来执行此操作；尽管它们通常用于重复工作。

如果您使用的是数据库，大多数平台都带有调度程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T00:31:08.043

您可以在数据库中安排您的操作，并在您的服务器上使用 cronjob 或使用 cron 作业服务来运行您的操作。

[https://www.setcronjob.com/](https://www.setcronjob.com/)

例如，当您想在将来发布您的博客时，您可以在将来保存您的发布日期并设置某种自动发布位。

然后每小时由 cronjob 运行一个 PHP 脚本，该脚本检查数据库中所有需要发布的博客。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T00:33:56.360

在类 Unix 系统上，有 Cron。您可以[从 PHP 管理 Cron](https://stackoverflow.com/questions/4421020/use-php-to-create-edit-and-delete-crontab-jobs)。

在 Windows 上，有计划任务——您也可以使用[PHP 来管理计划任务](https://stackoverflow.com/questions/295386/how-to-run-a-php-file-in-a-scheduled-task-windows-task-scheduler)。

不过要小心——这有点难以测试，你最终可能会遇到一个削弱服务器的时间表。

# c# - 是否可以从数组中填充树视图？

> ID：15014841
> 
> 赞同：1
> 
> 时间：2013-02-22T00:29:08.053
> 
> 标签：c#, wpf

或者这是一个不好的做法？在我的最后一个问题中，有人告诉我从后面的代码中引用/访问 UIElements 不是一个好习惯。那么有没有更好的解决方案将数组发送到树视图？我什至不知道一个数组是否可以在这里使用，也许是一个字符串生成器。我只知道这在我的winform中有效，所以我保留了它。...无论如何，我创建了一个清单应用程序，它将一些数组发送到列表框。

这是我的 xaml：

```
<ListBox x:Name="lstToDo" Margin="188,10,10,38" FontSize="14" SelectionMode="Extended" UseLayoutRounding="False" Grid.RowSpan="2">
        <ListBox.ItemTemplate>
            <DataTemplate>
                    <CheckBox Content="{Binding .}" IsChecked="{Binding RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}}, Path=IsSelected}">
                        <CheckBox.LayoutTransform>
                            <ScaleTransform ScaleX="1" ScaleY="1" />
                        </CheckBox.LayoutTransform>
                    </CheckBox>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

我有大约 50 个不同的数组，我可能会根据用户按下的按钮将它们发送到该列表框。这是我的一个数组的示例：

```
string[] Install_MySQL = {
                                "1\. If you don’t have a SQL engine, install MySQL. ",
                                "a. MySQL Server 5.0",
                                "i. Typical",
                                "ii.    Note: Select Custom if you want to install MySQL to a location other than the default, C:\\Program Files.",
                                "b. MySQL Server Instance Configuration Wizard",
                                "i. Select the Detailed Configuration radio button and click Next ",
                                "ii.    select “Server Machine” if you expect to run other applications on this server ",
                                "iii.   Select “Transactional Database Only”",
                                "iv.    select the location for your Tablespace ",
                                "v. To allow for enough connections, select the OLTP option ",
                                "vi.    Unless you have a specific reason for changing it, leave the default value of Port 3306.", 
                                "vii.   Standard Character Set",
                                "viii.  accept the “Install As Windows Service” and “Launch the MySQL Server Automatically” ",
                                "ix.    user: root   pass: Synergy1 – enable remote access",
                                "x. execute – cross fingers ",
                                "c. Install MySQL Administration Tools for MySQL 5.0",
                                "i. mysql-gui-tools-com-5.0-r12-win32.msi",
                                "ii.    select complete Install",
                                "2\. More stuff",
                                "a. some more stuff",
                                "b. even more stuff",
                            }; 
```

这就是我将该数组发送到列表框的方式：

```
private void InstallMySQLTool()
    {
        foreach (string s in Install_MySQL)
        {
            lstToDo.Items.Add(s);
        }
    } 
```

我绝对相信树视图将是清单的更好解决方案，因为我可以折叠每个子列表对吗？有没有办法可以在 xaml 本身中构建这些列表并仍然根据不同的按钮填充它？

# asp.net-mvc-4 - 将 WebSercurity.CreateAccount 与 TrasactionScope 中的其他查询一起使用，但未启用 DTC

> ID：15014842
> 
> 赞同：5
> 
> 时间：2013-02-22T00:29:11.783
> 
> 标签：asp.net-mvc-4, entity-framework-5, transactionscope, msdtc, simplemembership

**问题。**在注册场景中，我试图在我的用户表中插入一个用户，然后调用`WebSercurity.CreateAccount`该用户（在事务中）。这会导致服务器上没有 MS DTC 的错误。

**描述。**我这样做的原因是因为我有一个`Customer`继承自的实体`User`，所以`WebSercurity.CreateUserAndAccount`不能使用，因为它不知道`Customer`并且只是插入一条`User`记录。

我将 Asp.net MVC 4 与 EntityFramework 5、CodeFirst 和 SQL Server 2008 R2 一起使用。

任何不使用 DTC 的建议将不胜感激！

**编辑。** 发生此错误的原因很明显，因为 websecurity 使用它自己的数据库连接，而我的存储库使用另一个连接，虽然我已将 simplemembership 配置为使用与`DbContext`我的存储库相同的类，但问题是它创建了一个新的实例`DbContext`... _

我希望是否有一种方法可以传递现有的上下文对象，或者`WebSecurity`与它的方法一起使用的连接。

这是代码：

```
 if (ModelState.IsValid)
        {
            //using (TransactionScope tx = new TransactionScope())
            //{
                UnitOfWork.UserRepository.Insert(new Customer
                {
                    FirstName = model.FirstName,
                    LastName = model.LastName,
                    Email = model.Email,
                    Tel = model.Tel,
                    Mobile = model.Mobile,
                    BirthDate = model.BirthDate,
                    InsertDate = DateTime.Now,
                    UserType = UserType.Customer,
                    MaritalStatus = model.MaritalStatus,
                    ZipCode = model.ZipCode,
                    StreetAddress = model.StreetAddress,
                    City = model.City,
                    State = model.State
                });
                UnitOfWork.Commit();

                string token = WebSecurity.CreateAccount(model.Email, model.Password, true);

                Roles.AddUserToRole(model.Email, "Customer");
                //WebSecurity.Login(model.Email, model.Password, true);

                await Task.Run(() => EmailHelper.SendConfrimationEmail(token, model.Email));

            //  tx.Complete();
            //} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:10:24.277

我找到了一个**可能的解决方案**，但我不确定它是否是最好的解决方案。这个想法来自这篇[博客文章](http://blog.spontaneouspublicity.com/including-asp-net-simple-membership-tables-as-part-of-your-entity-framework-model)，该文章说我们如何在我们的 POCO 实体中包含简单的成员表并自己创建表（不使用 WebSecurity）。

因此，我认为我可以通过简单地在表中插入一条记录并在表`CreateAccount`中插入一条记录来在我的存储库中实现该方法。对于像and ... 这样的其他查询，我们可以像以前一样使用and类。`webpages_Membership``AddUserToRole``webpages_UsersInRoles``GetUser``WebSecurity``Roles`

它似乎工作正常（否则我错过了一些东西），但有一些额外的工作要做，我不希望这样做！

因此，如果有人能给我一个更好的解决方案，我会很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T00:47:52.430

发生 DTC 错误是因为您试图跨越两个不同的数据库连接上的事务。你有几个选择。

SimpleMembership 专为简单场景而设计。您正在执行高级方案，因此您可能应该使用不同的成员资格提供程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:36:59.973

正如 Mystere Man 指出的那样，由于事务在两个不同的数据库上，所以正在发生错误。你有几个选择。这里有一些我想到的。

您可以自定义 SimpleMembership 提供程序使用的现有 User 实体，以便为每个用户捕获您想要的自定义信息。这是相当简单的，并[在此博客文章中进行了讨论](http://kevin-junghans.blogspot.com/2013/01/seeding-customizing-aspnet-mvc.html)。看起来您正在尝试发送电子邮件确认，SimpleMembership 提供商也支持并[在此处讨论](http://kevin-junghans.blogspot.com/2013/02/adding-email-confirmation-to.html)。

您还可以将其他数据库中的信息与 SimpleMembership 使用的唯一用户 ID (int) 联系起来。创建用户并登录后，您可以通过调用[WebSecurity.CurrentUserId](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.currentuserid%28v=vs.111%29.aspx)获取该 ID 。

您可以绕过整个 SimpleMempership 提供程序并创建您自己的自定义成员资格提供程序，这[将在此处进行讨论](http://msdn.microsoft.com/en-us/library/f1kyba5e%28v=vs.100%29.aspx)。

# frontend - 如何编辑 Web 界面（前端）

> ID：15014843
> 
> 赞同：2
> 
> 时间：2013-02-22T00:29:12.970
> 
> 标签：frontend, octoprint

我想对[Octoprint 3d 打印 Web 界面](https://github.com/foosel/OctoPrint)进行一些更改，以符合我的期望。为了更改值并观察结果，我显然每次都必须重新编译，即使更改是在前端而不是在后端。有没有办法在不重新编译的情况下观察前端的变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:02:00.803

就在这里。前端的更改包含在浏览器中，不依赖于服务器。前端代码的任何更改都立即可供浏览器使用，并且可以通过调试工具（例如[firefox](https://addons.mozilla.org/en-US/firefox/addon/firebug/)中的 firebug 或[firebug lite](http://getfirebug.com/releases/lite/chrome/) ）查看。

您必须在浏览器上重新加载页面才能加载前端代码中的新更改。

# c# - 将查询语法转换为扩展方法语法

> ID：15014848
> 
> 赞同：0
> 
> 时间：2013-02-22T00:29:31.193
> 
> 标签：c#, .net, linq, linq-to-entities, extension-methods

我正在尝试使用 AdventureWorks2012 数据库和 EF 在我的演示应用程序中保持一致，但我需要一些帮助来将此 Linq 语句转换为扩展方法。

```
return (from person in this.context.Persons
        from email in this.context.EmailAddresses
        where email.EmailAddress == emailAddress
        select person).FirstOrDefault(); 
```

对象是：

```
public class Person
{
    public int BusinessEntityId { get; set; }
    public string PersonType {get;set;}
    public bool NameStyle { get; set; }
    public string Title { get; set; }
    public string FirstName { get; set; }
    public string MiddleName { get; set; }
    public string LastName { get; set; }
    public string Suffix { get; set; }
    public int EmailPromotion { get; set; }
    public PersonPassword Password { get; set; }
    public virtual ICollection<PersonEmailAddress> EmailAddresses { get; set; }
}

public class PersonEmailAddress
{
    public int BusinessEntityId { get; set; }
    public int EmailAddressId { get; set; }
    public string EmailAddress { get; set; }
    public virtual Person Person { get; set; }
}

public class PersonPassword
{
    public int BusinessEntityId { get; set; }
    public string PasswordHash { get; set; }
    public string PasswordSalt { get; set; }
    public virtual Person Person { get; set; }
} 
```

其中 BusinessEntityId 是 PK。任何帮助是极大的赞赏。谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T00:48:33.680

*下面我将准确回答你的问题。但是，我真的不明白您为什么要将查询转换为扩展方法，所以我认为这个答案不是您正在寻找的答案。如果是这样，您能否深入研究术语并重新提出问题？*

* * *

第一：LINQ 查询语法只是扩展方法的很好的语法糖。你的代码：

```
return (from person in this.context.Persons
        from email in this.context.EmailAddresses
        where email.EmailAddress == emailAddress
        select person).FirstOrDefault(); 
```

下面是转换为扩展方法的 LINQ 查询语法。两者是等价的，它们完全相同并给出相同的结果：

```
return this.context.Persons
    .SelectMany(p => this.context.EmailAddresses,
        (p, e) => new { Person = p, Email = e})
    .Where(pe => pe.Email == pe.Person)
    .Select(pe => pe.Person)
    .FirstOrDefault(); 
```

它只是不那么好阅读，而且更难理解。

# if-statement - 灰尘如果条件

> ID：15014853
> 
> 赞同：9
> 
> 时间：2013-02-22T00:30:19.983
> 
> 标签：if-statement, dust.js

如果状况不佳，我遇到了灰尘问题。我有一个部分指向 2 个不同的灰尘模板，具体取决于国家代码

```
{>"receipt/merchantInfo/merchantInfo_{countryCode}"/} 
```

我正在尝试创建一个 if else 条件来确定是否`{countryCode}`是美国。例子：

```
{@if cond="'{countryCode}' == 'US'"}
<p>is country code US</p>
{:else}
<p>is NOT country code US</p>
{/if} 
```

这是行不通的。有人知道我在哪里出错了吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-22T02:00:51.953

由于潜在的安全漏洞，该`@if`助手已被弃用（它在条件下使用 eval）。我建议改用`@eq`助手。

```
{@eq key=countryCode value="US"}
  <p>is country code US</p>
{:else}
  <p>is NOT country code US</p>
{/eq} 
```

如果这不起作用，请确保 countryCode 在您的上下文中可用（您可以使用`{@contextDump/}`它）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-09T20:54:12.957

我会这样做：

```
{@select key=countryCode }
    {@eq value="US"}<p>is country code US</p>{/eq}
    {@eq value="UK"}<p>is country code UK</p>{/eq}
    {@default}<p>is NOT country code US or UK</p>{/default}
{/select} 
```

确保您使用的是 1.x 或更高版本。

确保您已加载[Helpers 。](https://github.com/linkedin/dustjs-helpers)前几天我遇到了这个。你需要它才能工作，它不会错误地告诉你它不是。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-05T17:36:58.990

如果你喜欢 @if 但不喜欢它使用 eval 的安全问题，你可以使用我的替代 @if 助手。它提供了一个属性 test="expr" 来指定您的 if 条件。eval 不用于评估表达式。

表达式中的变量仅限于灰尘名称和用于从上下文访问值的路径。常量是 JavaScript 整数、浮点数、十六进制和字符串形式（“xx”或“xx”）。操作数可以是“变量”、常数或产生值的二元或一元表达式。关系运算符是 <、>、<=、>=、==、!=。布尔运算符是 ! （一元），|| 和 &&.. 运算符优先级与 JavaScript 相同，为了清楚起见或当优先级不是您想要的时，允许使用括号。

这是一个例子：

```
{@if test="state == 'CA' || state == 'NY'"}
    true stuff goes here
{:else}
    false stuff goes here
{/if} 
```

请注意，它仍然有代码允许使用 eval() 的 cond="expr" 属性。这为现有代码提供了迁移路径。

您可以将其安装为 npm 模块 ( [https://npmjs.org/package/dustmotes-if](https://npmjs.org/package/dustmotes-if) )。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-06T14:41:08.580

您还可以使用：

```
{#key}
  Some content
{:else}
  Some other content, if key doesn't have a value
{/key} 
```

例如：

数据

```
{
   firstName: "Mickey",
   lastName:  "Mouse",
   website:   null,
   phone:     "1-800-DISNEYWORLD"
} 
```

灰尘模板

```
<p>First Name: {firstName}</p>
<p>Last Name: {lastName}</p>
{#website}
   <p>Website: {website}</p>
{:else}
   <p>Phone: {phone}</p>
{/website} 
```

输出：

```
First Name: Mickey
Last Name: Mouse
Phone: 1-800-DISNEYWORLD 
```

# jquery-validation-engine - jQuery-Validation-Engine -- 确保字段值不相等

> ID：15014857
> 
> 赞同：0
> 
> 时间：2013-02-22T00:30:32.150
> 
> 标签：jquery-validation-engine

在将表单发送到服务器之前，我正在使用[jQuery-Validation-Engine进行一些客户端检查。](https://github.com/posabsolute/jQuery-Validation-Engine)

我知道您可以检查以确保两个字段匹配，使用`validate[equals[fieldId]]`where`fieldId`是您要匹配的字段的 id。例如，如果您想确保密码匹配，这很有用。

现在我正试图找到一种方法来确保字段*不*匹配。例如，如果我想确保密码字段与用户名字段不匹配。

有没有人能让这个工作？还有其他想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:30:38.797

经过一些研究和反复试验，我回答了我自己的问题。我将在这里发布我所做的事情，以便其他需要做同样事情的人有参考。

事实证明，您需要以与添加[自定义 regex](http://posabsolute.github.com/jQuery-Validation-Engine/#validators/custom-regex_name)相同的方式创建一个新的[自定义函数](http://posabsolute.github.com/jQuery-Validation-Engine/#validators/custom-function_name)。如何应用自定义正则表达式已得到很好的记录，但是关于如何实现自定义函数（不调用第 3 方函数）的内容并不多。

深入研究语言文件可以更好地了解如何处理它。

我必须创建一个自定义验证器，并在语言文件中附加一个函数（在本例中为 jquery.validationEngine-en.js）：

```
"notEqual":  {
    "func": function(field, rules, i, options){
        return (field.val() == $('#username').val()) ? false : true;
    },
    "alertText": "* Username and password must be different"
}, 
```

在我的 html 标记中，我像这样使用它：

```
<input type="hidden" name="username" value="yourPassword" id="username"/>
<input class="validate[custom[notEqual]]" type="password" name="confirmPassword" value=""/> 
```

希望对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T16:24:15.767

谢谢您的帮助。您也可以使用 funcCall 执行此操作。

在您的情况下，HTML 是：

```
<input class="validate[funcCall[notEqual]]" type="password" name="confirmPassword" value="">
```

功能是：

```
function notEqual(field){
    if(field.val() == $('#username').val()){
        return "* Username and password must be different";
    }
} 
```

当您拥有可以从其他库或代码的其他区域重用的验证功能时，这可能很有用。

[http://posabsolute.github.io/jQuery-Validation-Engine/#validators/funccall-methodname](http://posabsolute.github.io/jQuery-Validation-Engine/#validators/funccall-methodname)

# python - SQLite 从哪里选择 x 变量

> ID：15014858
> 
> 赞同：0
> 
> 时间：2013-02-22T00:30:38.260
> 
> 标签：python, sqlite, variables, select, where

我正在学习 SQLite（使用 python）并遇到了我迷路的问题。

我做了一张桌子：

```
dat.execute("CREATE TABLE IF NOT EXISTS User_Login(Id INTEGER PRIMARY KEY AUTOINCREMENT, 'User_Name' TEXT UNIQUE, 'Password' TEXT, 'Email' TEXT)")
    dat.execute("INSERT INTO User_Login('User_Name', 'Password', 'Email') VALUES('DM', 'pass', 'email@email.com')") 
```

现在使用一个函数，我尝试从 User_Login 检索密码（密码），并将 Login_Name 作为变量

有数据：

```
dat = data.cursor()
dat.execute("SELECT 'Password' FROM 'User_Login' WHERE 'User_Name'=?", [login])
pw = dat.fetchone()
print pw 
```

但是 pw 总是没有，我尝试了很多可能的方法，但无法让它工作。使用打印检查登录并正确存储

有人可以帮助我或指出我正确的方向吗？我会很感激的。

问候

* * *

确实需要改变，但它仍然不起作用:(

```
with data:
dat = data.cursor()
dat.execute("DROP TABLE IF EXISTS 'User_Login'")
dat.execute("CREATE TABLE IF NOT EXISTS 'User_Login'(Id INTEGER PRIMARY KEY AUTOINCREMENT, 'User_Name' TEXT UNIQUE, 'Password' TEXT, 'Email' TEXT)")
dat.execute("INSERT INTO User_Login('User_Name', 'Password', 'Email') VALUES('DM', 'Pass', 'email@email.com')") 
```

和

```
with data:
    dat = data.cursor()
    dat.execute("SELECT 'Password' FROM 'User_Login' WHERE 'User_Name'=?", [login])
    pw = dat.fetchone()
    print pw 
```

还是同样的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:35:18.187

试试这个 SQL：

```
SELECT Password FROM User_Login WHERE User_Name=? 
```

* * *

`field_name`并且`'field_name'`是不同的。

# tortoisesvn - Windows 服务器上的 TortoiseSVN 预提交挂钩

> ID：15014859
> 
> 赞同：1
> 
> 时间：2013-02-22T00:30:37.813
> 
> 标签：tortoisesvn, pre-commit-hook, svnlook

我们正在使用安装在客户端机器上的 TortoiseSVN，我正在尝试设置一个预提交挂钩以强制在我们的 TortoiseSVN 存储库中对提交进行评论。到处都有关于如何使用 svnlook 进行设置的帖子，但我在安装的任何地方都找不到它。我错过了什么吗？我需要安装某种 TortoiseSVN 服务器程序吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-12T06:19:26.250

您可以通过批处理脚本执行此操作，但对此有更简单的解决方案。

转到 Svn 属性，你会发现一个弹出窗口。单击“新建按钮”并选择“日志大小”。您将再次看到一个小的弹出窗口。在那里您可以输入最小日志大小、最大日志大小等。

我希望它对你有用。

# phpmyadmin - phpmyadmin 中隐藏/缺失的列

> ID：15014861
> 
> 赞同：3
> 
> 时间：2013-02-22T00:30:54.670
> 
> 标签：phpmyadmin

当我单击“探索”选项卡时，它通常会显示我表中的数据，但由于某种原因，它不会显示所有列。它只显示了 5 列，其余的都被隐藏了。当我使用这个查询时，会发生完全相同的事情：

```
SELECT * FROM `tabs` 
```

但是，当我专门搜索它时，我确实找到了列和其中的数据：

```
SELECT `prevpage` FROM `tabs` 
```

当我单击编辑选项上方 < T > 列上的下拉箭头时，我可以选择要显示的列。列表中有两个空列名（就像缺少两列一样），当我选择查看它们时，它们里面的所有内容都说`NULL`，而它不是。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-23T12:37:45.890

I had a similar issue. However, the resolution was **a lot different** and **EASIER to apply**.

The issue was actually caused by 'Storage Engine'. All you need to do to clear this error is to:

```
 - Go to the table that is having the trouble of hidden column-> 
     - Got to 'Operation' Tab->
     - Under 'Table Options' ->
     - For 'Storage Engine' Option, select the one that is consistent with
       the one that you are   using throughout the table. 
     - Refresh the table-> Wala! The missing column reappear in browse tab! 
```

***In the case for myself, I am using 'MyISAM' as default but was using 'InnoDB' for that specific troubled table.***

It has took my an hour to figure out what happened and NOTHING was available online for this situation. Hope it helps one who has the same problem.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-11T16:58:41.230

如果你仍然对如何解决这个问题感兴趣..最近我遇到了同样的问题..首先，您必须导出麻烦的表..然后，删除表..最后，将文件导入数据库..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-18T01:49:53.420

我的问题是索引外键。我重置了索引并解决了我的问题，因为以前的答案对我不起作用。

我已经在这里泡了很多年了……很高兴回馈一次！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-10T06:26:00.710

清除浏览器缓存。为我工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-25T17:17:21.963

我遇到了这个问题。注销并再次为我解决了这个问题。可能会帮助到这里的人。

# java - 用画布画多条线

> ID：15014862
> 
> 赞同：0
> 
> 时间：2013-02-22T00:30:59.763
> 
> 标签：java, graphics, drawing, awt, 2d

```
public static void main(String[] args) {
    Picture myPic = new Picture(600, 600);
    Graphics canvas = myPic.getOffScreenGraphics();

    canvas.setColor(Color.WHITE);
    canvas.fillRect(0, 0, 600, 600);

    canvas.setColor(Color.BLACK);
    int x1;
    int y1;
    int x2;
    int y2;
    int heading;

    x1 = 300;
    y1 = 300;
    x2 = 300;
    y2 = 300;

    heading = 0;

    String keyboard = JOptionPane.showInputDialog(null,
            "Enter your input");

    if (keyboard != null) {
        if (keyboard.isEmpty() || keyboard.contains(" ")) {
            JOptionPane.showMessageDialog(
                    null,
                    "Please enter an input",
                    "Error",
                    JOptionPane.ERROR_MESSAGE);
            main(args);
        }

        int counth = 0;
        int countg = 0;
        int countPlus = 0;
        int countMinus = 0;
        int countK = 0;
        int countR = 0;
        int countG = 0;
        int countB = 0;
        int countC = 0;
        int countO = 0;

        for (int i = 0; i < keyboard.length(); i++) {
            if (keyboard.charAt(i) == '+') {
                if (heading == 0) {
                    heading = 1;
                } else if (heading == 1) {
                    heading = 2;
                } else if (heading == 2) {
                    heading = 3;
                } else if (heading == 3) {
                    heading = 0;
                }
            }
        }
        countPlus++;

        for (int i = 0; i < keyboard.length(); i++) {
            if (keyboard.charAt(i) == '-') {
                if (heading == 0) {
                    heading = 3;
                } else if (heading == 1) {
                    heading = 0;
                } else if (heading == 2) {
                    heading = 1;
                } else if (heading == 3) {
                    heading = 2;
                }
            }
        }
        countMinus++;

        for (int i = 0; i < keyboard.length(); i++) {
            if (keyboard.charAt(i) == 'h' || keyboard.charAt(i) == 'f') {
                if (heading == 0) {
                    counth++;
                    int k = 10 * (counth);
                    canvas.drawLine(x1, y1, x2, y2 + k);

                } else if (heading == 1) {
                    counth++;
                    int k = 10 * (counth);
                    canvas.drawLine(x1, y1, x2 + k, y2);
                } else if (heading == 2) {
                    counth++;
                    int k = 10 * (counth);
                    canvas.drawLine(x1, y1, x2, y2 - k);
                } else if (heading == 3) {
                    counth++;
                    int k = 10 * (counth);
                    canvas.drawLine(x1, y1, x2 - k, y2);
                } else if (heading > 3 || heading < 0) {
                    JOptionPane.showMessageDialog(
                            null,
                            "Your heading is greater than 3 or less than 0",
                            "Error",
                            JOptionPane.ERROR_MESSAGE);
                    main(args);
                }
            }

        }

        for (int i = 0; i < keyboard.length(); i++) {
            if (keyboard.charAt(i) == 'K') {
                canvas.setColor(Color.BLACK);
            }
        }
        countK++;

        for (int i = 0; i < keyboard.length(); i++) {
            if (keyboard.charAt(i) == 'R') {
                canvas.setColor(Color.RED);
            }
        }
        countR++;

        for (int i = 0; i < keyboard.length(); i++) {
            if (keyboard.charAt(i) == 'G') {
                canvas.setColor(Color.GREEN);
            }
        }
        countG++;

        for (int i = 0; i < keyboard.length(); i++) {
            if (keyboard.charAt(i) == 'B') {
                canvas.setColor(Color.BLUE);
            }
        }
        countB++;

        for (int i = 0; i < keyboard.length(); i++) {
            if (keyboard.charAt(i) == 'C') {
                canvas.setColor(Color.CYAN);
            }
        }
        countC++;

        for (int i = 0; i < keyboard.length(); i++) {
            if (keyboard.charAt(i) == 'O') {
                canvas.setColor(Color.BLACK);
            }
        }
        countO++;

        System.out.println("h = " + counth);
        System.out.println("g = " + countg);
        System.out.println("+ = " + countPlus);
        System.out.println("- = " + countMinus);
        System.out.println("K = " + countK);
        System.out.println("R = " + countR);
        System.out.println("G = " + countG);
        System.out.println("B = " + countB);
        System.out.println("C = " + countC);
        System.out.println("O = " + countO);

        myPic.repaint();
    } else {
        System.exit(0);
    }

} 
```

我正在尝试根据用户输入绘制一些线条。

输入是 h 和 f 用于向前移动 10 个像素（两者都做同样的事情）和 + 或 - 来改变线将移动 90 度的方向，无论是顺时针移动 90 度，还是逆时针移动 -（默认是向上移动）。

例如，如果用户输入：“hhh”，则该行将向上移动 30 个像素。

我遇到的问题是我希望用户能够输入 hhh+hhh 并向上绘制 30 个像素的线，然后转向并在右侧绘制 30 个像素。然而，在我的程序中，当我输入 hhh+hhh 时，它只会使一条直线向右 60 像素。

所以我的问题是：当它在指定方向看到 + 或 - 并画另一条线时，我怎样才能让它画一条线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:49:00.947

代码完全未经测试，但我建议你：

删除 + 和 - 的两个循环。

```
for(int i =0; i < keyboard.length(); i++)
  {
 if(keyboard.charAt(i) == '+')
      heading++;
 if(keyboard.charAt(i) == '-')
      heading--;

if (heading < 0)
    heading = 3;
if (heading > 3)
    heading = 0;

 if(keyboard.charAt(i) == 'h' || keyboard.charAt(i) == 'f') 
 //Snip rest of heading code here
 } 
```

您遇到的问题是您多次循环代码，而与处理线条图代码无关。

虽然这可能无法解决您的问题，但它可能会让您走上正轨。

# perl - 如果不同的条件为真，我如何在嵌套数组中迭代？

> ID：15014866
> 
> 赞同：1
> 
> 时间：2013-02-22T00:31:37.553
> 
> 标签：perl, loops, conditional, unique-key

我的程序有这个输入：

```
miRNA127    dvex589433  131 154 -   24  87.5    atcgtaacgtatctcccacactta    32  55  98
miRNA32 dvex320240  61  83  -   23  86.9565217391304    cttctacaatggtactgtccatt 31  53  97
miRNA32 dvex623745  141 163 -   23  86.9565217391304    ggtttcttccacaatagtaattt 26  48  97
miRNA79 dvex468096  702 733 -   32  81.25   ttggttaaaaatttttttttttaattaaaaaa    6   37  55
miRNA79 dvex468096  717 743 +   27  81.4814814814815    aaaaaatttttaaccaaagaaaaaaat 13  39  55
miRNA79 dvex468096  694 718 -   25  84  tttttttaattaaaaaacaattttt   17  41  55
miRNA79 dvex468096  696 724 +   29  75.8620689655172    aaattgttttttaattaaaaaaaaaaatt   13  41  55
miRNA79 dvex219016  1103    1130    +   28  78.5714285714286    aaatttttgctaaaaaatacaaaaattt    14  41  55
miRNA79 dvex219016  3420    3446    +   27  77.7777777777778    aaaatattattaaataaataatgcaat 13  39  55
miRNA79 dvex219016  1384    1408    +   25  80  tttcgtgaaacaaaaaagtttggaa   21  45  55
miRNA79 dvex219016  4384    4424    +   25  80  tttcgtgaaacaaaaaagtttggaa   21  45  55
miRNA154    dvex573491  297 324 +   28  78.5714285714286    cagcttgattttaagcctatctgaaagc    23  50  76
miRNA154    dvex546562  232 259 +   28  78.5714285714286    cagcttgattttaagcctatttgaaagc    23  50  76
miRNA154    dvex648254  147 172 +   26  80.7692307692308    aagcctacggagtgcgaggcagagct  47  72  76
miRNA154    dvex648254  277 303 +   26  80.7692307692308    aagcctacggagtgcgaggcagagct  47  72  76 
```

如果具有相同的 $1、$2 和 $5 值，我需要分组。因此我决定使用具有不同嵌套数组的哈希：

```
$VAR1 = {
    'miRNA79 dvex219016 +' => [
        [ '1103', '1130', '14', '41', '55' ],
        [ '3420', '3446', '13', '39', '55' ],
        [ '1384', '1408', '21', '45', '55' ],
        [ '4384', '4424', '21', '45', '55' ]
    ],
    'miRNA79 dvex468096 +' => [
        [ '717', '743', '13', '39', '55' ],
        [ '696', '724', '13', '41', '55' ]
    ],
    'miRNA154 dvex546562 +' => [ [ '232', '259', '23', '50', '76' ] ],
    'miRNA79 dvex468096 -' => [
        [ '702', '733', '6',  '37', '55' ],
        [ '694', '718', '17', '41', '55' ]
    ],
    'miRNA154 dvex648254 +' => [
        [ '147', '172', '47', '72', '76' ],
        [ '277', '303', '47', '72', '76' ]
    ],
    'miRNA127 dvex589433 -' => [ [ '131', '154', '32', '55', '98' ] ],
    'miRNA154 dvex573491 +' => [ [ '297', '324', '23', '50', '76' ] ],
    'miRNA32 dvex320240 -'  => [ [ '61',  '83',  '31', '53', '97' ] ],
    'miRNA32 dvex623745 -'  => [ [ '141', '163', '26', '48', '97' ] ]
}; 
```

之后，我针对散列的每个键的嵌套数组的 [0]->[0] 值进行了组织。如果嵌套数组有 1 个数组，我会打印它。但是如果有 1< 我需要对它进行分组。接下来我展示一个分组示例：

```
'miRNA79 dvex468096 -' => [
    [ '702', '733', '6',  '37', '55' ],
    [ '694', '718', '17', '41', '55' ]
    ], 
```

整理一下：

```
$VAR1 = [ [ 696, '724', '13', '41', '55' ],
          [ 717, '743', '13', '39', '55' ] ]; 
```

如果 [1][1] 和 [0][0] 之间的差异小于或等于 [0][4] 我需要将其组合并生成这个新数组：

```
$VAR1 = [ [ 696, '743', '13', '39', '55' ], ]; 
```

并打印出来。在这种情况下：

```
$VAR1 = [
    [ 1103, '1130', '14', '41', '55' ],
    [ 1384, '1408', '21', '45', '55' ],
    [ 3420, '3446', '13', '39', '55' ],
    [ 4384, '4424', '21', '45', '55' ]
]; 
```

评估 [1][1] 和 [0][0] 是否小于或等于 [0][4]，FALSE，所以我需要提取第一个嵌套数组并打印它，然后再次迭代以评估最后一个健康）状况。如果它生成我需要组合的 TRUE 值，如果评估生成 FALSE 值，我需要提取第一个嵌套数组并打印它。接下来，我的代码：

```
#!/usr/bin/perl

use strict;
use warnings;
use Data::Dumper;
use List::Util qw/ min max /;
use List::Util qw(sum);
use Math::MatrixReal;

my %data;
my $val;
my $num;
my $start;
my $end;
my $diff;
my $start_q;
my $end_q;
my @new_data;
my @extract;
my @extract2;
my $limit;

while (<>) {
    chomp;
    my @fields = split;
    push @{ $data{"@fields[0,1,4]"} }, [ @fields[ 2, 3, 8, 9, 10 ] ];
}

foreach my $key ( sort keys %data ) {
    $val = $data{$key};
    $num = scalar @$val;
    next if $num == 0;

    if ( $num == 1 ) {    # print if the hash have 1 nested array
        print
            "$key\t $data{$key}[0][0]\t $data{$key}[0][1]\t $data{$key}[0][2]\t $data{$key}[0][3]\t $data{$key}[0][4]\n";
    }
    else {
        foreach my $keys ( @$val[0] ) {
            my @sorted = sort { $a->[0] <=> $b->[0] }
                @$val;    #organize the nested array values
            $start   = $sorted[0][0];
            $end     = $sorted[1][1];
            $limit   = $sorted[0][4];
            $diff    = $end - $start;
            $start_q = $sorted[0][2];
            $end_q   = $sorted[1][3];

            if ( $diff < $limit ) {
                @new_data = ();
                push( @new_data, $start );
                push( @new_data, $end );
                push( @new_data, $start_q );
                push( @new_data, $end_q );
                push( @new_data, $limit );
                @extract = splice( @{ $sorted[0] }, 0, 5, @new_data );
                @extract2 = splice( @{ $sorted[1] } );
            }
            else {
                my @toprint = splice( @{ $sorted[0] } );
                print
                    "$key\t$toprint[0]\t$toprint[1]\t$toprint[2]\t$toprint[3]\t$toprint[4]\n";
            }
        }
    }
} 
```

一般来说，我有这个结果：

```
miRNA127 dvex589433 -    131     154     32  55  98
miRNA154 dvex546562 +    232     259     23  50  76
miRNA154 dvex573491 +    297     324     23  50  76
miRNA154 dvex648254 +   147 172 47  72  76 
miRNA32 dvex320240 -     61  83  31  53  97
miRNA32 dvex623745 -     141     163     26  48  97
miRNA79 dvex219016 +    1103    1130    14  41  55 
```

但是在这些列表中，一些值没有出现，因为如果条件为 TRUE，我的代码不会迭代。一些建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-16T20:49:11.527

我不确定，但我认为您正在尝试将一些 RNA 序列（？）合并为一个，当它们足够接近时（结果长度小于某个限制）。您可能正在寻找这样的代码：

```
#!/usr/bin/perl

use strict;
use warnings;

# Input data format positions
use constant KEY_FIELDS => ( 0, 1, 4 );
use constant DATA_FIELDS => ( 2, 3, 8, 9, 10 );

# Entry positions (DATA_FIELDS meanings)
use constant {
    START_P => 0,
    END_P   => 1,
    START_Q => 2,
    END_Q   => 3,
    LIMIT   => 4
};

# Output formatter
use constant TO_PRINT => START_P .. LIMIT;

sub format_entry {
    my ( $key, $data ) = @_;
    join "\t", $key, @$data[TO_PRINT];
}

# Read Data
my %data;
while (<>) {
    chomp;
    my @fields = split;
    push @{ $data{"@fields[KEY_FIELDS]"} }, [ @fields[DATA_FIELDS] ];
}

# Transform data to keep only records supposed to appear in output
for my $value ( values %data ) {
    my @entries = sort { $a->[START_P] <=> $b->[START_P] } @$value;
    my @result = ( shift @entries );    # add first one as reference
    while (@entries) {
        my $ref   = $result[-1];        # reference entry
        my $entry = shift @entries;
        if ( $entry->[END_P] - $ref->[START_P] < $ref->[LIMIT] ) {

            # merge entry into reference
            @$ref[ END_P, END_Q ] = @$entry[ END_P, END_Q ];
        }
        else {
            push @result, $entry;
        }
    }
    $value = \@result;                  # rewrite value in %data hash
}

# Write output
for my $key ( sort keys %data ) {
    print format_entry( $key, $_ ), "\n" for @{ $data{$key} };
} 
```

您问题中数据的结果是：

```
miRNA127 dvex589433 -   131     154     32      55      98
miRNA154 dvex546562 +   232     259     23      50      76
miRNA154 dvex573491 +   297     324     23      50      76
miRNA154 dvex648254 +   147     172     47      72      76
miRNA154 dvex648254 +   277     303     47      72      76
miRNA32 dvex320240 -    61      83      31      53      97
miRNA32 dvex623745 -    141     163     26      48      97
miRNA79 dvex219016 +    1103    1130    14      41      55
miRNA79 dvex219016 +    1384    1408    21      45      55
miRNA79 dvex219016 +    3420    3446    13      39      55
miRNA79 dvex219016 +    4384    4424    21      45      55
miRNA79 dvex468096 +    696     743     13      39      55
miRNA79 dvex468096 -    694     733     17      37      55 
```

# html - 如何调整 DIV 页面大小以适应屏幕宽度？

> ID：15014868
> 
> 赞同：0
> 
> 时间：2013-02-22T00:31:46.940
> 
> 标签：html, resize

我在以下链接中找到了一个使用 DIV 的简单网站设计示例：

[http://www.htmlgoodies.com/img/3_column.html](http://www.htmlgoodies.com/img/3_column.html)

这种设计的问题在于它是固定宽度。我需要一个设计，其中包装器 DIV 扩展到全屏区域（100% 宽度），并且页眉、主和页脚 DIV 会随之调整大小。

如果我将包装器和页脚宽度设置为 100%，它会占用最大化浏览器窗口的整个区域，但缩短窗口会导致右侧和主 DIV 向下换行。如何防止这种缠绕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:01:26.333

I recommend looking into using [fluid960gs](http://www.designinfluences.com/fluid960gs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T01:04:26.080

Cant be done, only one attribute for DIV, which is the align attribute. Maybe consider using tables: [http://www.w3schools.com/html/html_tables.asp](http://www.w3schools.com/html/html_tables.asp) Shadowpat

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T00:47:19.637

我不确定这是否是您正在寻找的答案，但是粗暴地使用`float:right`或`float:left`在另一个 div 下的 div 上可以解决问题？

# c++ - 编译器是否优化大小为 0 的结构？

> ID：15014870
> 
> 赞同：0
> 
> 时间：2013-02-22T00:31:54.473
> 
> 标签：c++, struct, compiler-optimization, compile-time

如果我定义了一个结构，如下所示：

```
struct blank {
    int : 0;
}; 
```

编译器会在运行时优化它吗？

我问是因为[这个相当流行的 SO question](https://stackoverflow.com/questions/9229601/what-is-in-c-code)。我想在我自己的 C/C++ 代码中使用类似的编译时检查。我正在尝试使程序尽可能优化，因此如果我只想将它们用于编译时检查，我不希望这些空结构在运行时徘徊。

附带说明一下，是否有一种 C++ 惯用的方式来实现与链接中相同的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T00:41:20.857

C++ 仅在对象实现基类时才允许这种优化。（因此它被称为空基优化或 EBO。）对于一个独立的对象，或者作为另一个对象的成员`struct`，它必须至少有一个字节大，即使该字节只是填充。

至于链接问题中的构造，请不要担心。那里没有对象，只有一个类型。即使有一个对象，它也会被链接器剥离。除非您特别要求导出所有内容，否则未引用的函数和全局对象不会进入可执行文件。即使在那种情况下，它仍然可能需要保留一个名称。

正如其他人所提到的，C++11 的做法是`static_assert`. 它需要一条错误消息：

```
static_assert( condition, "Error: condition was false." ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T00:34:32.460

要看。如果通过[as-if 规则](http://en.cppreference.com/w/cpp/language/as_if)，可以完全消除此结构的所有实例，则编译器可以执行该优化。您的编译器是否这样做取决于它是哪个编译器，也可能取决于优化器设置。

在实践中，跨模块边界传递`struct`实例的地址是在 RAM 中实现实例的一种非常可靠的方法，其大小至少为一个字节（除非整个程序优化器捕获它）。使用 this`struct`作为另一个`struct`or中成员的类型也是如此`class`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T00:40:55.550

空结构保证有自己的地址，但仅此而已：您不会花时间构建它（毕竟，它是空的；没有什么可构建的）。

做同样事情的 C++ 惯用方式是使用[`static_assert`](http://en.cppreference.com/w/cpp/language/static_assert)（在符合 C++11 标准的编译器中可用）。

# ruby-on-rails - Ruby on Rails 教程（Hartl）第 7.2.3 章 RSpec 测试失败

> ID：15014872
> 
> 赞同：2
> 
> 时间：2013-02-22T00:32:05.677
> 
> 标签：ruby-on-rails, ruby

我正在完成 Hartl 的 Rails 教程。我已经读到第 7 章了，但是我的一个 RSpec 测试用例失败了，特别是处理不匹配密码的那个：

```
describe "has_password? method" do

    it "should be true if the passwords match" do
        @user.has_password?(@attr[:password]).should be_true
    end

    it "should be false if the passwords don't match" do
        @user.has_password?("invalid").should be_false
    end
end 
```

终端输出： 故障：

```
 1) User password encryption has_password? method should be false if the passwords don't match
 Failure/Error: @user.has_password?("invalid").should be_false
   expected "273725daa81e74764ea1e941a0789da7d580656cd321c64e39d1389f6a7e14d9" to be false
 # ./spec/models/user_spec.rb:111 
```

这是我的`/user.rb`代码：

```
require 'digest'
class User < ActiveRecord::Base
attr_accessor :password
attr_accessible :name, :email, :password, :password_confirmation

email_regex = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i

validates :name,  :presence => true,
                  :length   => { :maximum => 50 }
validates :email, :presence => true,
                  :format   => { :with => email_regex },
                  :uniqueness => { :case_sensitive => false }

validates :password, :presence     => true,
                     :confirmation => true,
                     :length       => { :within => 6..40}

before_save :encrypt_password

def has_password? (submitted_password)
    encrypted_password = encrypt(submitted_password)

end

private 

    def encrypt_password
        self.salt = make_salt unless has_password? (password)
        self.encrypted_password = encrypt(password)
    end

    def encrypt(string)
        secure_hash("#{salt}--#{string}")
    end

    def make_salt
        secure_hash("#{Time.now.utc}--#{password}")
    end

    def secure_hash(string)
        Digest::SHA2.hexdigest(string)
    end

end 
```

我似乎无法弄清楚我的生活出了什么问题。感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T00:42:57.643

在你的`has_password?`方法中

`encrypted_password = encrypt(submitted_password)`需要阅读： `encrypted_password == encrypt(submitted_password)`

# java - 如何从使用 API 的命令提示符运行 java 代码？

> ID：15014881
> 
> 赞同：2
> 
> 时间：2013-02-22T00:33:09.930
> 
> 标签：java, shell, command-line, jar

我为 Twitter4J API 编写了使用 jar 文件中的类的代码。我想通过命令提示符运行我的代码。我该怎么做？我试过了：

```
$ javac -cp [path-to-twitter4j-jars] MyCode.java 
```

它已成功编译，但是当我运行它时

```
$ java MyCode 
```

但它没有找到 Twitter4J 类。我正在我的代码中创建该类的一个实例。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T00:34:35.820

`.class`类路径是 Java按包在 fodler中搜索实际文件的地方。
Java 不会查看类路径文件夹中的 JAR。

您需要将 JAR 文件本身放在类路径中；不是包含它的文件夹。

（或者，您可以`folder/*.jar`将每个 JAR 放入类路径中的该文件夹中）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T00:45:59.807

将 jars 添加到类路径：

```
java -cp .:path/to/twitter4j/jars MyCode 
```

文件：

```
where options include:
-d32      use a 32-bit data model if available
-d64      use a 64-bit data model if available
-server   to select the "server" VM
              The default VM is server,
              because you are running on a server-class machine.

-cp <class search path of directories and zip/jar files>
-classpath <class search path of directories and zip/jar files>
              A : separated list of directories, JAR archives,
              and ZIP archives to search for class files.
-D<name>=<value>
              set a system property
-verbose:[class|gc|jni]
              enable verbose output
-version      print product version and exit
-version:<value>
              require the specified version to run
-showversion  print product version and continue
-jre-restrict-search | -no-jre-restrict-search
              include/exclude user private JREs in the version search
-? -help      print this help message
-X            print help on non-standard options
-ea[:<packagename>...|:<classname>]
-enableassertions[:<packagename>...|:<classname>]
              enable assertions with specified granularity
-da[:<packagename>...|:<classname>]
-disableassertions[:<packagename>...|:<classname>]
              disable assertions with specified granularity
-esa | -enablesystemassertions
              enable system assertions
-dsa | -disablesystemassertions
              disable system assertions
-agentlib:<libname>[=<options>]
              load native agent library <libname>, e.g. -agentlib:hprof
              see also, -agentlib:jdwp=help and -agentlib:hprof=help
-agentpath:<pathname>[=<options>]
              load native agent library by full pathname
-javaagent:<jarpath>[=<options>]
              load Java programming language agent, see java.lang.instrument
-splash:<imagepath>
              show splash screen with specified image 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T00:34:59.060

*运行*应用程序时，JAR 文件仍然需要位于类路径中，而不仅仅是编译时。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-22T00:36:54.233

运行 Java 应用程序时，JVM 还需要了解 jars。

```
java -cp [path-to-twitter4j-jars] MyCode 
```

这是[java 命令行选项的链接](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/java.html)。

# objective-c - 将 NSURL ** 转换为 CFURLRef *

> ID：15014887
> 
> 赞同：3
> 
> 时间：2013-02-22T00:33:59.090
> 
> 标签：objective-c, pointers, automatic-ref-counting

如何使用 ARC 编译以下代码？

```
int main() {

    NSURL *url = [NSURL new];
    NSURL * __strong *urlPointer = &url;
    CFURLRef *cfPointer = (__bridge CFURLRef *)urlPointer;
    geturl(cfPointer);
    NSLog(@"Got URL: %@", url);
    return 0;
} 
```

我收到以下错误：

```
Incompatible types casting 'NSURL *__strong *' to 'CFURLRef *' (aka 'const struct __CFURL **') with a __bridge cast 
```

我知道这`CFURLRef`已经`CFURLRef *`是一个指针，指向指针的指针也是如此，但是我正在使用的外部函数 ( `geturl`) 需要一个`CFURLRef *`as 参数。我无法控制该功能，因此无法更改。

如何将`urlPointer`转换为`CFURLRef *`指针？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T00:44:29.143

你所做的大部分只是复杂的指针健美操。为什么不这样做：

```
CFURLRef cfPointer = NULL;
geturl(&cfPointer);
NSURL *url = (__bridge NSURL *)cfPointer;
NSLog(@"Got URL: %@", url); 
```

# sql - executeQuery 立即退出

> ID：15014888
> 
> 赞同：0
> 
> 时间：2013-02-22T00:34:02.713
> 
> 标签：sql, jdbc, sybase

我正在使用 Sybase，但遇到了一个似乎无法解决的问题。我有这样的查询

```
SELECT * FROM A, B 
WHERE A.someField = B.someField
AND A.otherField = ? 
```

otherField 定义为 Char(2)

如果我代替？例如，使用 '11' 一切正常，但如果我用诸如“D1”之类的字母字符替换字符串，则 executeQuery 似乎没有任何作用。我在调用executeQuery 时设置了一个断点，并且在executeQuery 执行后使用alpha 字符串参数，它立即退出而不在语句之后调用任何代码，它不会挂起或抛出任何异常。有没有人遇到过这个问题？

# c++ - 在类中定义自定义 free()，同时仍然使用 cstdlib free

> ID：15014889
> 
> 赞同：0
> 
> 时间：2013-02-22T00:34:18.290
> 
> 标签：c++, inheritance, scope

*我在cstdlib malloc()*和*free()*函数之上创建了一个自定义内存分配器（出于性能原因）。分配器位于一个简单的类中，该类存储一些内存缓冲区和其他参数。我想命名释放内存*free* () 的方法，但是我仍然需要能够在类中使用 cstdlib 的*free()*。

```
#include <cstdlib>

inline void cstdlib_free(void * M){ free(M); } // Works, but is ugly!

class MyAllocator{

    /* ... */

    // Does internal class operations; Does NOT use stdlib's free 
    free(void * _Memory){ /* ... */ }

    // Frees buffers to system memory; USES stdlib's free
    clear(void){
        /* ... */
        cstdlib_free(Buff); // THIS is what I want to change
        /* ... */
    }
}; 
```

目前，我通过为 cstdlib 的 free() 创建一个包装器解决了这个问题，但我不禁认为必须有更好的解决方案（我也不想重命名类的 free() 方法，因为我想要名称要一致）。我希望有一个与[这个问题](https://stackoverflow.com/questions/411103/function-with-same-name-but-different-signature-in-derived-class "这个链接")的第一个答案类似的解决方案，即使用 cstdlib 的基类来访问*free()*。

C++ 是否提供任何方法来访问标准 C 函数作为类结构？有什么方法可以告诉编译器我想直接在类声明下使用作用域（而不是它的超类，在这种情况下甚至不存在！）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:59:36.627

是的，在任何情况下`free`都可以访问原件。`std::free`如果您想偏执，请添加另一个限定符并使用`::std::free`.

`::free`从全局命名空间中获取它，这应该是相同的功能，但是`std::`是首选的。`::free`不保证存在，除非你`#include <stdlib.h>`而不是`<cstdlib>`.

# web-services - Sitecore Web 服务项目的 XML 格式是什么

> ID：15014893
> 
> 赞同：1
> 
> 时间：2013-02-22T00:34:42.183
> 
> 标签：web-services, sitecore

我正在尝试使用 Sitecore 6.5 中的内置 Web 服务 (.../sitecore/shell/webservice/service.asmx)

有描述命令的[PDF](http://sdn.sitecore.net/upload/sitecore6/65/Sitecore_Web_Service_SC65_A4.pdf)，但没有指定插入/更新项目的格式。它声称在执行 GetXml 请求时可以简单地使用该格式，但我发现在我的测试中并非如此。

[我已经尝试了许多变体，无论是尝试使用此博客](http://blog.hansmelis.be/2012/05/29/sitecore-web-service-pitfalls/)建议的一个字段还是单个字段，都没有运气，不幸的是，Web 服务不会抱怨输入，它总是响应“OK”而没有任何效果。

完整的请求（正如我现在所看到的）

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope
  xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<soapenv:Body>
    <Save xmlns="http://sitecore.net/visual/">
              <xml>
     &lt;sitecore&gt;
        &lt;field   itemid=&quot;{7CCE4419-E8BD-45F4-9B9C-625E220C59A1}&quot;
                fieldid=&quot;{3F4B20E9-36E6-4D45-A423-C86567373F82}&quot; 
                language=&quot;en&quot;
                version=&quot;1&quot;&gt;
            &lt;content&gt;A title from service&lt;/content&gt;
        &lt;/field&gt;
     &lt;/sitecore&gt;
    </xml>
        <databaseName>master</databaseName>
        <credentials><!-- removed --></credentials>
    </Save>
</soapenv:Body> 
```

如果有人知道格式是什么，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T14:13:22.553

如果您使用的是 Sitecore 6.5，那么您可以使用[Item Web API](http://sdn.sitecore.net/SDN5/Products/Sitecore%20Item%20Web%20API/SitecoreItemWebApi10.aspx)，这应该可以让您通过 JSON REST 服务访问所需的一切。

[凯文·奥比（ Kevin Obee](https://stackoverflow.com/questions/14760623/creating-asp-net-mvc4-project-to-connect-to-sitecore-master-for-admin-access#answer-14798728) ）给出了很好的回应，并提供了更多链接，但也阅读了以下内容：

*   [Sitecore 项目 Web API 和 Json.Net 测试驱动器](http://weblogs.asp.net/jonelrienton/archive/2012/11/08/sitecore-item-web-api-and-json-net-test-drive.aspx)
*   [Sitecore 6.6 中的新功能 – 网络研讨会](http://larre.fixstar.net/category/cms/sitecore/item-web-api/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:48:40.240

如果我想对 Sitecore 项目进行一些修改，我通常会编写自己的 Web 服务，并发现它是一种更灵活的方式，因为我主要希望至少比标准 Web 服务提供的功能多一点。但请注意，您无法序列化 Sitecore.Data.Items.Item 类，因此通过 Soap 发送 Item 对象是行不通的。

# windows-phone-7 - WP7 - 异步更新 ListPicker 项目

> ID：15014897
> 
> 赞同：0
> 
> 时间：2013-02-22T00:35:03.120
> 
> 标签：windows-phone-7, mvvm

在这种情况下，我不应该在 ListPicker 中看到列表中的值吗？

**xml**

```
<toolkit:ListPicker
                x:Name="lpkBoards"
                ItemsSource="{Binding AllBoards}"
                DisplayMemberPath="Name" >
                </toolkit:ListPicker> 
```

**xml.cs**

```
public SettingsPage()
        {
            InitializeComponent();

            // Set the page DataContext property to the ViewModel.
            this.DataContext = App.ViewModel;

         ...

            boardsTask.ContinueWith(
                (call) =>
                {
                    App.ViewModel.AllBoards = call.Result.ToList();

                }
                ); 
```

**视图模型**

```
// All to-do items.
private List<Board> _allBoards;
public List<Board> AllBoards
{
    get { return _allBoards; }
    set
    {
        _allBoards = value;
        NotifyPropertyChanged("AllBoards");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:41:57.080

如果您尝试将其绑定到 UI 元素并希望它工作，则需要将其更改`List<Board>`为。`ObservalbeCollection<Board>`

# sockets - 是否有一种广泛使用的方法将“任何 IP 地址”写为字符串？

> ID：15014901
> 
> 赞同：0
> 
> 时间：2013-02-22T00:35:23.713
> 
> 标签：sockets, ip, ipv6

我见过`INADDR_ANY`在绑定套接字时使用“*”和“::”（对于 IPv6）来表示“任何地址”（即）的 API。我还看到使用“”或“0.0.0.0”表示相同含义的 API。是否有广泛使用的标准将“任何地址”写为字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T01:27:59.910

这是两种方式。遗憾的是，没有一种适用于 IPv4 和 IPv6。绑定套接字时，您当然应该使用 INADDR_ANY。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T18:28:06.000

这是一个好主意，有不止一种被广泛使用的写法。编程不好玩吗？

# android - ProgressDialog 不工作

> ID：15014911
> 
> 赞同：1
> 
> 时间：2013-02-22T00:36:07.623
> 
> 标签：android, progressdialog

我想显示一个 ProgresDialog 但我不知道我的代码有什么问题。ProgressDialog 未显示。请有任何想法。

```
imageBtnRouteStart.setOnClickListener(new OnClickListener() {
      public void onClick(View v) { 
          dialog = ProgressDialog.show(_activity, "", "Loading...", true, false);

          new OtherActivity().SaveR(_id, _activity, true, true);

             //** Launch the activity
             Intent showContent = new Intent(_activity.getApplicationContext(),
                        NewActivity.class);
             _activity.startActivity(showContent);

      }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:27:07.110

尝试这个。

```
ProgressDialog pDialog = new ProgressDialog(activity.this);
pDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
pDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
pDialog.setCancelable(true);
pDialog.setMessage("Loading...");
pDialog.show(); 
```

但是在您的函数中，您希望在此之后显示进度对话框并直接意图。它很可能会在不到一秒的时间内显示进度对话框，然后就会发生意图。

# google-maps - XML 和 Google 地图，仅显示一个标记（共四个）

> ID：15014913
> 
> 赞同：0
> 
> 时间：2013-02-22T00:36:17.260
> 
> 标签：google-maps

我的代码有问题。我可以从 xml 文件中加载 lat 和 lng 并将其显示在谷歌地图上，但它只显示第一条记录（总共有 4 条）。

我 100% 确信 xml 没问题，我只是不知道如何在谷歌地图上显示所有标记。

任何帮助都会很棒！

```
 function initialize() {
var myLatlng = new google.maps.LatLng(53.956086, -9.140625);
var myOptions = {
  zoom: 13,
  center: myLatlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}
var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
jQuery.get("markers.xml", {}, function(data) {
  jQuery(data).find("marker").each(function() {
    var marker = jQuery(this);
    var Lat = $(this).find('lat').text();
    var Lng = $(this).find('lng').text();
    var latlng = new google.maps.LatLng(parseFloat(sLat), parseFloat(Lng));
    var marker = new google.maps.Marker({position: latlng, map: map});
 });
}); 
```

}

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-22T00:47:31.070

使用 firebug 等工具的任何日志/错误？据我所知，看起来不错（2 个问题：您初始化标记 2 次并且未定义 sLat）。

您确定它每循环 4 次而不是仅循环一次吗？你调试过吗？

# vim - 为什么 vim 以删除模式启动？

> ID：15014923
> 
> 赞同：1
> 
> 时间：2013-02-22T00:36:55.883
> 
> 标签：vim

如问题所述，我的 vim 以删除模式开始。如果我打开一个文件并点击`j`开始导航，那将删除第一行。

我已将问题隔离到我的以下行`.vimrc`：

```
nnoremap <silent> <esc> :noh<return><esc> 
```

我不明白为什么这甚至会触发删除模式。最重要的是，我相信我添加`<silent>`了指示 vim 在不执行它的情况下进行此绑定，但似乎并非如此。

为什么会发生这种情况的解释是什么？

（旁注，这个映射是告诉vim在我按下esc时清除搜索高亮）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T00:59:29.397

如果您在终端中运行此命令：

```
$ vim file.txt -c 'nnoremap <silent> <esc> :noh' 
```

它会在底部显示：

```
:noh[>1;3201;0c 
```

`vim`以某种方式进入`change-mode`。

* * *

您可以更改`<esc>`为`<F5>`（或其他键）。如果你使用`gvim`，没有问题。这是由终端特殊键转义引起的。

# asp.net - ASP.NET 将数据源绑定到具有单个记录的整个页面

> ID：15014924
> 
> 赞同：3
> 
> 时间：2013-02-22T00:37:19.807
> 
> 标签：asp.net, data-binding, web-controls

我们目前在 aspx 页面中使用`asp:Repeater`with来显示数据。`<%#Eval("SomeField")%>`

我们想使用单个记录并将其绑定到 aspx 页面上的 asp.net 控件，以便我们可以`<%#Eval("SomeField")%>`。

我尝试过`FormView`,`DetailsView`和其他 asp.net 控件。所有这些都需要一个`.ToList()`or `IEnumerable`。然而，我们正在返回`ctx.Jobs.SingleOrDefault(j => j.ID == id);`

我们不想使用 asp:Label 或 asp:Literal ..

`<%#Eval("SomeField")%>`在返回单条记录时，我们可以做什么来使用页面中的 ？

**主持人**

> ```
>  public static Job GetByID(int id)
>     {
>         using (var ctx= new CareersEntities())
>         {
>             return ctx.Jobs.SingleOrDefault(j => j.ID == id);
>         }
>     } 
> ```

**代码隐藏**

```
protected void Page_Load(object sender, EventArgs e)
{
       Job d = new Job();
        d = JobPresenter.GetByID(ID);

        fvJob.DataSource = d;
        fvJob.DataBind();
} 
```

**ASPX 页面**

> ```
> <asp:FormView  ID="fvJob" runat="server">
>      <ItemTemplate>
>         <%#Eval("Title")%>
>      </ItemTemplate>
> </asp:FormView> 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:45:41.320

如果使用数据源控件（例如 ObjectDataSource），则两者都`DetailsView`将与单个对象一起使用。`FormView`使用 ObjectDataSource，您可以从 Select 方法返回单个元素，然后数据源会将其包装在一个列表中，只是为了编程接口——但这不是您所见过的。

如果要直接设置控件的 DataSource 属性并调用 DataBind，只需将对象包装在一个数组中，然后将其传入即可。

这是详细信息视图：

```
<asp:DetailsView runat="server" ID="DetailsView1" AutoGenerateRows="false">
    <Fields>
        <asp:TemplateField HeaderText="First name:">
            <ItemTemplate><%# Eval("FirstName") %></ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Last name:">
            <ItemTemplate><%# Eval("LastName") %></ItemTemplate>
        </asp:TemplateField>
    </Fields>
</asp:DetailsView> 
```

这是 Page_Load 中的 DetailsView 绑定代码：

```
var person = new Person { FirstName = "John", LastName = "Doe" };
DetailsView1.DataSource = new object[] { person };
DetailsView1.DataBind(); 
```

或者这里是一个 FormView：

```
<asp:FormView runat="server" ID="FormView1">
    <ItemTemplate>
        First name: <%# Eval("FirstName") %><br />
        Last name: <%# Eval("LastName") %><br />
    </ItemTemplate>
</asp:FormView> 
```

这是 Page_Load 代码：

```
var person = new Person { FirstName = "John", LastName = "Doe" };
FormView1.DataSource = new object[] { person };
FormView1.DataBind(); 
```

这是模型类型（在 DetailsView 和 FormView 中相同）：

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:40:55.033

详细信息视图需要列表？！无论如何，你为什么不使用 ctx.Jobs.SingleOrDefault(j => j.ID == id).ToList() ？

# matlab - Matlab 打印/渲染问题：跨矩形的虚线对角线打印

> ID：15014925
> 
> 赞同：2
> 
> 时间：2013-02-22T00:37:34.330
> 
> 标签：matlab, pdf, printing

当我在 MATLAB 中打印任何注释矩形时，会出现一条虚线对角线。

问题示例：

![在此处输入图像描述](../Images/872667a02b8f6d4d444c52749e97b0ef.png)

我正在尝试在图形上创建一个具有任意大小的黑色面颜色的注释矩形。在 MATLAB 图形窗口中，一切都正常显示。当我将图形打印为 pdf 时，从左下角到右上角出现一条对角虚线。我不希望出现此行，并希望您能协助将其从我的 pdf 输出中删除。

* * *

# 代码：

```
h = figure( 'Units', 'inches', 'Position', [0 0 11 8.5], ...
    'PaperPosition', [0 0 11 8.5], 'PaperOrientation', 'landscape', 'Resize', ...
    'off','Visible','on', 'Renderer', 'painters');

a = annotation('rectangle','Linestyle', 'none', 'Units', 'inches', ...
    'Position', [.25 .25 .5 .5], ...
    'FaceColor', 'k', 'EdgeColor', 'none');

print(h,'temp.pdf','-dpdf','-r600', '-painters'); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:26:15.833

似乎问题不在于 matlab 渲染器的输出，而在于 PDF 查看器的设置。也许您可以尝试更改 PDF 查看器中的一些设置，尤其是抗锯齿的设置。

我尝试在在线 PDF 查看器中打开使用您的代码创建的 pdf 文件，但对角线消失了。

另一种解决方法可能是另存为`.eps`，并将 eps 文件转换为 pdf。

来源： http: [//www.mathworks.com/matlabcentral/newsreader/view_thread/280185](http://www.mathworks.com/matlabcentral/newsreader/view_thread/280185)

# android - SimpleCursorAdapter 填充 ListView

> ID：15014926
> 
> 赞同：1
> 
> 时间：2013-02-22T00:37:34.567
> 
> 标签：android, simplecursoradapter

我正在使用数据库，并且正在尝试使用表的每一行填充 ListView。我已经成功地创建和查询了数据，但是我无法使用 SimpleCursorAdapter 在 ListView 中显示任何内容。

```
public class History extends ListActivity {
SQLiteDatabase db;
DbHelper DbHelper;
ListView lv;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.history);
    DbHelper = new DbHelper(this);
    db = DbHelper.getWritableDatabase();
    lv = getListView();

    final String[] from = { DbHelper.TYPE, DbHelper.TITLE, DbHelper.CONTENT };
    final String[] column = { DbHelper.C_ID, DbHelper.TYPE, DbHelper.TITLE,
            DbHelper.CONTENT };

    final int[] to = { R.id.list_row_title, R.id.list_row_content };
    Cursor cursor = db.query(DbHelper.TABLE_NAME, column, null, null, null,
            null, null);
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
            R.layout.history_list_row, cursor, from, to);

    lv.setAdapter(adapter);

    /*
     * Display as Toast for development purposes
     */
    // move to first row
    cursor.moveToFirst();
    // move to the next item each time
    while (cursor.moveToNext()) {
        // get string and column index from cursor
        String name = cursor
                .getString(cursor.getColumnIndex(DbHelper.TYPE));
        String title = cursor.getString(cursor
                .getColumnIndex(DbHelper.TITLE));
        String content = cursor.getString(cursor
                .getColumnIndex(DbHelper.CONTENT));

        Toast.makeText(this,
                "Title: " + title + "\n" + "Content: " + content,
                Toast.LENGTH_SHORT).show();
    }
    cursor.close();
} 
```

}

这是我的自定义 ListView 行，用于显示数据库中的 3 个字符串

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<TextView
    android:id="@+id/list_row_title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Title"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/list_row_content"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Content"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/list_row_type"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Type"
    android:textAppearance="?android:attr/textAppearanceSmall" /> 
```

Toast 消息显示完美，但 ListView 中没有出现任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:06:59.387

我注意到这里有几个问题。

第一的，

```
final int[] to = { R.id.list_row_title, R.id.list_row_content }; 
```

应该

```
final int[] to = { R.id.list_row_type, R.id.list_row_title, R.id.list_row_content }; 
```

其次，您错误地设置了适配器。您可以直接设置适配器，而不是获取列表视图和设置适配器：

```
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
        R.layout.history_list_row, cursor, from, to);
setListAdapter(adapter); 
```

第三，您在循环后关闭光标。

```
//Closes the Cursor, releasing all of its resources and making it completely invalid.
cursor.close(); 
```

因此，当列表视图显示项目时，光标不再具有与其关联的行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:38:17.623

您需要在 while 循环中设置 TextView 的文本。

```
 TextView tv1=(TextView)findViewById(R.id.list_row_content);
 tv1.setText(content); 
```

# python - 在设定的时间间隔内调用 QCoreApplications.processEvents() 安全吗？

> ID：15014932
> 
> 赞同：2
> 
> 时间：2013-02-22T00:37:55.183
> 
> 标签：python, qt, events, pyqt, pyside

我有一个用 PySide（Qt Python 绑定）编写的 Qt 应用程序。这个应用程序有一个 GUI 线程和许多不同的 QThreads，它们负责执行一些繁重的工作——一些相当长的任务。由于如此长的任务有时会卡住（通常是因为它正在等待服务器响应），因此应用程序有时会冻结。

因此，我想知道是否可以安全地`QCoreApplication.processEvents()`每隔一秒左右“手动”调用一次，以便清除（处理）GUI 事件队列？这是个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T15:54:05.363

随时调用 QCoreApplication.processEvents() 是安全的。[文档](http://harmattan-dev.nokia.com/docs/library/html/qt4/qcoreapplication.html#processEvents)明确说明了您的用例：

> 当您的程序忙于执行长时间操作（例如复制文件）时，您可以偶尔调用此函数。

但是，没有充分的理由为什么线程会阻塞主线程中的事件循环。（除非你的系统真的跟不上。）所以无论如何这都值得研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-20T21:41:33.780

人们可能会发现一些有用的提示：

A. 您需要注意以下事项：

1.  每隔一段时间，线程想要将东西发送回主线程。所以他们发布一个事件并调用 processEvents

2.  如果从事件中运行的代码也调用了 processEvents，那么 python 可以代替返回到下一条语句，而是再次调度一个工作线程，然后可以重复这个过程。

最终结果可能是成百上千个嵌套的 processEvent 语句，然后可能导致超出递归级别的错误消息。

道德 - 如果您正在运行多线程应用程序，请不要在由在主线程中运行的线程启动的任何代码中调用 processEvents。

B. 你需要知道 CPython 有一个全局解释器锁 (GIL)，它限制线程，以便在任何时候只有一个可以运行，并且 Python 决定运行哪些线程的方式是违反直觉的。从工作线程运行进程事件似乎并没有按照它所说的那样执行，并且 CPU 时间没有分配给主线程或 Python 内部线程。我仍在试验，但似乎让工作线程休眠几毫秒可以让其他线程查看。

# ftp - FTP 列表命令响应结构问题

> ID：15014944
> 
> 赞同：1
> 
> 时间：2013-02-22T00:39:37.500
> 
> 标签：ftp, filezilla

到目前为止，我一直在这个问题上撞墙。我的服务器目前响应 LIST -a 命令，如下所示：

```
drwxr-xr-x 1 owner group          1 Feb 21 04:37 test
drwxr-xr-x 1 owner group     129024 Feb 21 11:05 tardis.mp3 
```

出于某种原因，第二个在 Filezilla 中被解析为文件夹而不是文件。长话短说，不是。我知道我错过了一些东西。Filezilla 似乎无法查看文件大小。

这是一个屏幕截图： ![文件列表截图](../Images/54916f20d254ac55b3d1584b1c2f060a.png)

有人对为什么 Filezilla 无法解析文件大小有任何想法吗？我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-20T14:59:40.967

不幸的是，`LIST`命令输出是供人类阅读的，而不是机器解析的。输出格式不规范，因此不易解析。它可能适用于您的特定情况，但如果您更改 FTP 服务器软件或更改语言环境，它可能会中断。

正如您提到的 FileZilla，您可以查看[FileZilla 目录解析器](http://svn.filezilla-project.org/filezilla/FileZilla3/trunk/src/engine/directorylistingparser.cpp?view=markup)以获取`LIST`命令。

现在最好的方法是使用[Listings for Machine Processing](https://www.rfc-editor.org/rfc/rfc3659#section-7)`MLSD`命令，因为输出格式定义明确且易于解析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T01:09:29.650

清单中的第二行*是*一个目录。它`d`在权限字段的第一个字符中。大小无关紧要，目录也有大小字段。

# asp.net - 如何在 asp.net 网页中创建用于托管控件的垂直“面板”？

> ID：15014945
> 
> 赞同：1
> 
> 时间：2013-02-22T00:39:51.357
> 
> 标签：asp.net, razor, web-controls, html-table, asp.net-webpages

我需要在网页的两侧创建垂直条来容纳/托管控件（组合框、复选框或它们的 asp.net 等价物等）。这两个条带（有点类似于 Outlook 栏）需要由顶部的小横幅/页眉和小页脚（自然地在底部）限定；巨大的中间部分将由 Bing Map 组件组成。

如何做到这一点？使用 html 表格，有点像 WPF Grid？或者...？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:12:38.853

通常，部分的布局将使用 div 作为容器并使用 CSS 进行定位 以下指向一个页面，该页面列出了一些可以考虑作为可能解决方案的 CSS 框架。[http://speckyboy.com/2011/01/10/15-lightweight-and-minimal-css-frameworks/](http://speckyboy.com/2011/01/10/15-lightweight-and-minimal-css-frameworks/)

# java - 基于一列宽度的JTable水平滚动条

> ID：15014950
> 
> 赞同：3
> 
> 时间：2013-02-22T00:40:28.050
> 
> 标签：java, swing, jtable, jscrollpane, tablecolumn

我遇到了一个之前在这里讨论过的问题：让一个`JScrollPane`包含 a`JTable`来显示我想要的水平滚动条。 [这](https://stackoverflow.com/questions/2452694/jtable-horizontal-scrollbar-in-java)是我尝试关注的帖子，但由于某种原因，它似乎不适用于我的情况（我认为这是因为我已将其中一个列设置为具有固定宽度。

这是一个SSCCE：

```
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;

@SuppressWarnings("serial")
public class TableScrollTest extends JFrame
{
    public TableScrollTest() {

        DefaultTableModel model = new DefaultTableModel(new Object[]{"key", "value"},0);
        model.addRow(new Object[]{"short", "blah"});
        model.addRow(new Object[]{"long", "blah blah blah blah blah blah blah"});

        JTable table = new JTable(model) {
            public boolean getScrollableTracksViewportWidth() {
                return getPreferredSize().width < getParent().getWidth();
            }
        };        
        table.getColumn("key").setPreferredWidth(60);
        table.getColumn("key").setMinWidth(60);
        table.getColumn("key").setMaxWidth(60);
        table.setAutoResizeMode( JTable.AUTO_RESIZE_OFF );

        JScrollPane scrollPane = new JScrollPane( table );
        getContentPane().add( scrollPane );
    }

    public static void main(String[] args) {
        TableScrollTest frame = new TableScrollTest();
        frame.setDefaultCloseOperation( EXIT_ON_CLOSE );
        frame.pack();
        frame.setSize(200, 200);
        frame.setResizable(false);
        frame.setVisible(true);
    }
} 
```

简而言之，我有一个用于显示键/值对的两列表。容纳表格的容器是固定宽度的，表格的第一列也是固定宽度的（因为我知道所有键名的长度）。第二列将包含不同字符串长度的值。仅当存在的值太长而无法适应为列分配的宽度时，才应出现水平滚动条。

![在此处输入图像描述](../Images/08fa02f2cbe11255882f28e9bca455f8.png)

因为上面的第二个值有这么长的长度，所以滚动条应该是可见的。然而，事实并非如此，我所尝试的一切都只是成功地让它始终可见，这不是我想要的......我只希望它在存在“长”值的情况下可见。似乎`getScrollableTracksViewportWidth()`在表构造函数中被覆盖的方法检查了表的首选宽度是什么......所以我需要以某种方式指示表只根据第二列的内容来选择更大的宽度......但我难住了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T01:34:55.450

这是一个hackey解决方案

基本上，它所做的是根据所有行的值计算所有列的“首选”宽度。

它考虑了对模型的更改以及对父容器的更改。

完成后，它会检查“首选”宽度是否大于或小于可用空间并`trackViewportWidth`相应地设置变量。

您可以添加对固定列的检查（我没有打扰），这将使过程“稍微”更快，但是当您向表中添加更多列和行时，这会受到影响，因为每次更新都需要整个模型的行走。

您可以放入某种缓存，但就在那时，我会考虑固定宽度的列；）

```
import java.awt.Container;
import java.awt.EventQueue;
import java.awt.event.ComponentAdapter;
import java.awt.event.ComponentEvent;
import javax.swing.JFrame;
import static javax.swing.JFrame.EXIT_ON_CLOSE;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JViewport;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.TableColumnModelEvent;
import javax.swing.event.TableColumnModelListener;
import javax.swing.event.TableModelEvent;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableColumn;
import javax.swing.table.TableColumnModel;

public class TableScrollTest extends JFrame {

    public TableScrollTest() {

        DefaultTableModel model = new DefaultTableModel(new Object[]{"key", "value"}, 0);
        model.addRow(new Object[]{"short", "blah"});
        model.addRow(new Object[]{"long", "blah blah blah blah blah blah blah"});

        JTable table = new JTable(model) {
            private boolean trackViewportWidth = false;
            private boolean inited = false;
            private boolean ignoreUpdates = false;

            @Override
            protected void initializeLocalVars() {
                super.initializeLocalVars();
                inited = true;
                updateColumnWidth();
            }

            @Override
            public void addNotify() {
                super.addNotify();
                updateColumnWidth();
                getParent().addComponentListener(new ComponentAdapter() {
                    @Override
                    public void componentResized(ComponentEvent e) {
                        invalidate();
                    }
                });
            }

            @Override
            public void doLayout() {
                super.doLayout();
                if (!ignoreUpdates) {
                    updateColumnWidth();
                }
                ignoreUpdates = false;
            }

            protected void updateColumnWidth() {
                if (getParent() != null) {
                    int width = 0;
                    for (int col = 0; col < getColumnCount(); col++) {
                        int colWidth = 0;
                        for (int row = 0; row < getRowCount(); row++) {
                            int prefWidth = getCellRenderer(row, col).
                                    getTableCellRendererComponent(this, getValueAt(row, col), false, false, row, col).
                                    getPreferredSize().width;
                            colWidth = Math.max(colWidth, prefWidth + getIntercellSpacing().width);
                        }

                        TableColumn tc = getColumnModel().getColumn(convertColumnIndexToModel(col));
                        tc.setPreferredWidth(colWidth);
                        width += colWidth;
                    }

                    Container parent = getParent();
                    if (parent instanceof JViewport) {
                        parent = parent.getParent();
                    }

                    trackViewportWidth = width < parent.getWidth();
                }
            }

            @Override
            public void tableChanged(TableModelEvent e) {
                super.tableChanged(e);
                if (inited) {
                    updateColumnWidth();
                }
            }

            public boolean getScrollableTracksViewportWidth() {
                return trackViewportWidth;
            }

            @Override
            protected TableColumnModel createDefaultColumnModel() {
                TableColumnModel model = super.createDefaultColumnModel();
                model.addColumnModelListener(new TableColumnModelListener() {
                    @Override
                    public void columnAdded(TableColumnModelEvent e) {
                    }

                    @Override
                    public void columnRemoved(TableColumnModelEvent e) {
                    }

                    @Override
                    public void columnMoved(TableColumnModelEvent e) {
                        if (!ignoreUpdates) {
                            ignoreUpdates = true;
                            updateColumnWidth();
                        }
                    }

                    @Override
                    public void columnMarginChanged(ChangeEvent e) {
                        if (!ignoreUpdates) {
                            ignoreUpdates = true;
                            updateColumnWidth();
                        }
                    }

                    @Override
                    public void columnSelectionChanged(ListSelectionEvent e) {
                    }
                });
                return model;
            }
        };
        table.getColumn("key").setPreferredWidth(60);
//        table.getColumn("key").setMinWidth(60);
//        table.getColumn("key").setMaxWidth(60);
//        table.setAutoResizeMode(JTable.AUTO_RESIZE_NEXT_COLUMN);

        JScrollPane scrollPane = new JScrollPane(table);
        getContentPane().add(scrollPane);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                TableScrollTest frame = new TableScrollTest();
                frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
                frame.pack();
                frame.setSize(200, 200);
                frame.setResizable(true);
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T01:28:25.843

> 看来我的目标是强制单元格渲染器自动使单元格适合长字符串

这不是渲染器的工作。您必须手动设置列的宽度。

有关执行此操作的一种方法，请参见[表格列调整器。](http://tips4java.wordpress.com/2008/11/10/table-column-adjuster/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T01:34:54.797

[如果发布了更聪明的东西，我不一定会接受这个答案，但这是我根据迄今为止发布的评论和这篇](https://stackoverflow.com/questions/5820238/how-to-resize-jtable-column-to-string-length/5820410#5820410)文章自己想出的解决方案。唯一的问题是我想出的宽度总是太短了~1像素（在某些外观上还可以），所以我在末尾添加了这条线，`width += 5`这似乎使它可以正常工作，但是对我来说感觉很hacky。欢迎对这种方法提出任何意见。

```
import java.awt.Component;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellRenderer;

@SuppressWarnings("serial")
public class TableScrollTest extends JFrame {
    public TableScrollTest() {
        DefaultTableModel model = new DefaultTableModel(new Object[]{"key", "value"},0);
        model.addRow(new Object[]{"short", "blah"});
        model.addRow(new Object[]{"long", "blah blah blah blah blah blah blah"});

        JTable table = new JTable(model);        
        table.getColumn("key").setPreferredWidth(60);
        table.getColumn("key").setMinWidth(60);
        table.getColumn("key").setMaxWidth(60);
        table.setAutoResizeMode( JTable.AUTO_RESIZE_OFF );

        int width = 0;
        for (int row = 0; row < table.getRowCount(); row++) {
            TableCellRenderer renderer = table.getCellRenderer(row, 1);
            Component comp = table.prepareRenderer(renderer, row, 1);
            width = Math.max (comp.getPreferredSize().width, width);
        }
        width += 5;
        table.getColumn("value").setPreferredWidth(width);
        table.getColumn("value").setMinWidth(width);
        table.getColumn("value").setMaxWidth(width);

        JScrollPane scrollPane = new JScrollPane( table );
        getContentPane().add( scrollPane );
    }

    public static void main(String[] args) {
        TableScrollTest frame = new TableScrollTest();
        frame.setDefaultCloseOperation( EXIT_ON_CLOSE );
        frame.pack();
        frame.setSize(200, 200);
        frame.setResizable(false);
        frame.setVisible(true);
    }
} 
```

# ios - UITableView 带有一个简单的列表，但使部分标题像一个分组列表

> ID：15014952
> 
> 赞同：2
> 
> 时间：2013-02-22T00:40:35.380
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

我正在使用`UITableViewController`一种简单的风格。我喜欢单元格如何扩展到视图的边缘，但我讨厌部分标题如何固定在顶部。

**有没有办法让部分标题的行为类似于分组列表的工作方式？**

****使用分组样式但删除左右边距怎么样？可能的？****

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:47:20.497

我想[这个问题](https://stackoverflow.com/q/664781/442328)可能会回答你。实现这一点的一种尴尬方法是不使用 UITableView 部分并使用您的自定义设计绘制单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:14:06.510

您始终可以创建具有节标题外观的自定义单元格。这就是我过去对这类场景所做的，这样它就不会停留在视图的顶部。这当然需要额外的逻辑，例如禁用节标题，并将新的自定义节标题用作表格视图中的单个单元格部分，如果您发现我的想法。它实际上并不难，并为您提供了良好的灵活性。**

# php - 如何使用 ArangoDB 在 PHP 中进行用户注册和身份验证？

> ID：15014957
> 
> 赞同：6
> 
> 时间：2013-02-22T00:41:14.803
> 
> 标签：php, database, nosql, arangodb, arangodb-php

ArangoDB 是一个灵活的多模型数据库服务器，具有非常好的特性和大量好的文档。这是一个年轻的、非常有前途的开源项目，拥有一个不断发展的社区，但没有多少现实世界的例子可以开始。

一个常见的现实世界示例是用户注册和身份验证。大多数应用程序都需要它。

那么，如何使用 ArangoDB 在 PHP 中进行用户注册和身份验证？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T00:41:14.803

您可以直接运行以下示例代码，它将通过提供一些虚构的用户数据来运行用户注册和身份验证。
它将显示它正在执行的每个步骤。从集合创建，到用户注册、身份验证，最后再次清理集合。
还有很多评论解释了正在做什么，以使其更容易理解。

只需将此代码放在一个文件中，根据您的环境配置 autoload.php 的路径，然后使用浏览器访问其链接。此代码需要[ArangoDB 1.2 及更高](http://www.arangodb.org/)版本 以及[ArangoDB-PHP 客户端 1.2](https://github.com/triAGENS/ArangoDB-PHP/tree/1.2)及更高版本。
它希望 ArangoDB 在 localhost 上运行并在端口 8529 上侦听。

**注意 1**：脚本会自动创建“用户”集合和“用户名”上的唯一跳过列表索引。它也将最终丢弃该集合。
如果要手动创建集合而不是自动创建集合，则需要注释掉创建集合和索引的部分以及删除集合的部分。
之后打开 ArangoDB (arangosh) 的 shell 并在其中运行以下命令：

```
arangosh> db._createDocumentCollection('users');
arangosh> db.users.ensureUniqueSkiplist("username"); 
```

如果要删除集合，请键入：

```
arangosh> db.users.drop(); 
```

**Note2** : 为了简单起见，我有意避免引入更多的 OO 样式，如用户对象、地址对象等。

所以，最后是脚本。

```
<?php

namespace triagens\ArangoDb;

// use this and change it to the path to autoload.php of the arangodb-php client if you're using the client standalone...
// require __DIR__ . '/../vendor/triagens/ArangoDb/autoload.php';

// ...or use this and change it to the path to autoload.php in the vendor directory if you're using Composer/Packagist
require __DIR__ . '/../vendor/autoload.php';

// This function will provide us with our pre-configured connection options. 
function getConnectionOptions()
{
    $traceFunc = function ($type, $data) {
        print "TRACE FOR " . $type . PHP_EOL;
    };

    return array(
        ConnectionOptions::OPTION_ENDPOINT      => 'tcp://localhost:8529/',
        // endpoint to connect to
        ConnectionOptions::OPTION_CONNECTION    => 'Close',
        // can use either 'Close' (one-time connections) or 'Keep-Alive' (re-used connections)
        ConnectionOptions::OPTION_AUTH_TYPE     => 'Basic',
        // use basic authorization
        /*
        ConnectionOptions::OPTION_AUTH_USER       => '',                      // user for basic authorization
        ConnectionOptions::OPTION_AUTH_PASSWD     => '',                      // password for basic authorization
        ConnectionOptions::OPTION_PORT            => 8529,                    // port to connect to (deprecated, should use endpoint instead)
        ConnectionOptions::OPTION_HOST            => "localhost",             // host to connect to (deprecated, should use endpoint instead)
        */
        ConnectionOptions::OPTION_TIMEOUT       => 5,
        // timeout in seconds
        //ConnectionOptions::OPTION_TRACE           => $traceFunc,              // tracer function, can be used for debugging
        ConnectionOptions::OPTION_CREATE        => false,
        // do not create unknown collections automatically
        ConnectionOptions::OPTION_UPDATE_POLICY => UpdatePolicy::LAST,
        // last update wins
    );
}

// This function tries to persist the user data into the database upon registration
// it will fail if a user with the same username already exists.
function register($connection, $username, $password, $registrationData)
{
    // This would be where you call the function that encrypts your password like you did for storage earlier
    $hashedPassword = md5($password);

    // assign the collection to a var (or type it directly into the methods parameters)
    $collectionId = 'users';

    //create an example document or an array in order to pass to the following byExample method
    $document = Document::createFromArray(
        array('username' => $username, 'password' => $hashedPassword, 'data' => $registrationData)
    );

    // Get an instance of the collection handler
    $documentHandler = new DocumentHandler($connection);

    try {
        // query the given $collectionId by example using the previously declared $exampleDocument array
        $result = $documentHandler->add($collectionId, $document);

        // return the result;
        return $result;
    } catch (Exception $e) {

        if ($e->getCode()) {
            echo ('User already exists... ');
        } else {
            // any other error
            echo ('An error occured. Exception: ' . $e);
        }
    }
}

// This function tries to authenticate the user and will return an array with its data
function authenticate($connection, $username, $password)
{
    // This would be where you call the function that encrypts your password like you did for storage earlier
    $hashedPassword = md5($password);

    // assign the collection to a var (or type it directly into the methods parameters)
    $collectionId = 'users';

    //create an example document or an array in order to pass to the following byExample method
    $exampleDocumentArray = array('username' => $username, 'password' => $hashedPassword);

    // Get an instance of the collection handler
    $documentHandler = new CollectionHandler($connection);

    try {
        // query the given $collectionId by example using the previously declared $exampleDocument array
        $cursor = $documentHandler->byExample($collectionId, $exampleDocumentArray);
        // check if the count of the cursor is one or not.
        if ($cursor->getCount() == 1) {
            // do some fancy login stuff here...

            // get the current document from the cursor
            $userDocument = $cursor->current();

            // set session uid to the document key that was set automatically by ArangoDB,
            // since we didn't provide our own on registration
            $_SESSION['uid'] = $userDocument->getKey();

            // extract and return the document in form of an array
            return $userDocument->getAll();
        } else {
            return false;
        }
    } catch (Exception $e) {
        echo ('An error occured. Exception: ' . $e . '<br>');
    }
}

// register the connection to ArangoDB
$connection = new Connection(getConnectionOptions());

// register a collection handler to work with the 'users' collection
$collectionHandler = new CollectionHandler($connection);

// create the 'users' collection...
// remark those lines if you want to create the collection by hand.
echo "creating 'users' collection...";
try {
    $collection = new Collection();
    $collection->setName('users');
    $collectionHandler->create($collection);
    echo "created.<br>";
} catch (Exception $e) {
    echo ('Could not create collection. Exception: ' . $e . '<br>');
}

// create unique skip list index in 'users' collection on field ''username'...
// remark those lines if you want to create the index by hand.
echo "creating unique skip list index in 'users' collection on field ''username'... ";
try {
    $collection = new Collection();
    $collection->setName('users');
    $collectionHandler->index('users', 'skiplist', array('username'), true);
    echo "created.<br>";
} catch (Exception $e) {
    echo ('Could not create skip list index. Exception: ' . $e . '<br>');
}

// let's assume those variables hold your username / password
$userNameProvided = 'jane';
$passwordProvided = 'mysecretpassword';

// here we pass some structured registration data
$registrationData = array(
    'name'      => 'Jane',
    'surname'   => 'Doe',
    'addresses' => array(
        'email' => array('jane@doe.com', 'jane2@doe.com'),
        'home'  => array(
            array('street' => 'Brooklyn Ave.', 'number' => 10),
            array('street' => '54th Street', 'number' => 340, 'is_primary' => true)
        )
    )
);

// First register
echo "trying to register user for the first time... ";
$result = register($connection, $userNameProvided, $passwordProvided, $registrationData);
if ($result) {
    echo " " . $userNameProvided . " registered<br>";
} else {
    echo "failed<br>";
}

// Trying to register user with same username a second time
echo "trying to register user with same username a second time... ";
$result = register($connection, $userNameProvided, $passwordProvided, $registrationData);
if ($result) {
    echo "registered<br>";
} else {
    echo "failed<br>";
}

// now authenticate with the correct username/password combination
echo "trying to authenticate with the correct username/password combination... ";
if ($userArray = authenticate($connection, $userNameProvided, $passwordProvided)) {
    echo "login successful. ";
    echo '<br>';
    // do some fancy after-login stuff here...
    echo "<br>Welcome back " . $userArray['username'] . '!<br>';
    if (count($userArray['data']['addresses']['email']) > 0) {
        echo "Your primary mail address is " . $userArray['data']['addresses']['email'][0] . '<br>';
    }
    foreach ($userArray['data']['addresses']['home'] as $key => $value) {
        if (array_key_exists('is_primary', $value)) {
            $homeAddress = $userArray['data']['addresses']['home'][$key];
            echo "Your primary home address is " . $homeAddress['number'] . ', ' . $homeAddress['street'] . '<br>';
            // if found, break out of the loop. There can be only one... primary address!
            break;
        }
    }
} else {
    // re-display login form. +1 the wrong-login counter...
    echo "wrong username or password<br>";
}
echo '<br>';

// now authenticate with the wrong username/password combination
echo "trying to authenticate with the wrong username/password combination... ";
if (authenticate($connection, $userNameProvided, 'I am a wrong password')) {
    // do some fancy after-login stuff here...
    echo "login successful<br>";
} else {
    // re-display login form. +1 the wrong-login counter...
    echo "wrong username or password<br>";
}

// truncate the collection... not needed if dropping, but only here to empty the collection of its tests
// in case you decide to not create and drop the collection through this script, but by hand.
echo "truncating collection...";
try {
    $collectionHandler->truncate('users');
    echo "truncated.<br>";
} catch (Exception $e) {
    die ('Could not truncate collection. Exception: ' . $e . '<br>');
}

// finally drop the collection...
// remark those lines if you want to drop the collection by hand.
echo "dropping collection...";
try {
    $collectionHandler->drop('users');
    echo "dropped.<br>";
} catch (Exception $e) {
    die ('Could not drop collection. Exception: ' . $e . '<br>');
} 
```

# c# - 导入xml文件和SlowCheetah

> ID：15014965
> 
> 赞同：0
> 
> 时间：2013-02-22T00:41:50.977
> 
> 标签：c#, .net, xml, app-config, slowcheetah

我想在我的 app.config 文件中的一个元素内导入一个 xml 文件，但唯一适用于该任务的方法会导致 SlowCheetah 失败并出现以下错误：

> “SlowCheetah.Tasks.TransformXml”任务意外失败。System.UriFormatException：无效的 URI：URI 为空。

我尝试的导入方法是声明一个解析的外部实体，然后在我的元素声明中使用它，如该问题的最佳答案中所述：[我们可以将 XML 文件导入另一个 XML 文件吗？](https://stackoverflow.com/questions/5121052/can-we-import-xml-file-into-another-xml-file)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:01:26.037

XDT（驱动 web.config 转换的技术）不支持 XML 实体。如果您想要这种支持，最好的办法是在[http://aspnet.uservoice.com/](http://aspnet.uservoice.com/)添加一个条目。

# javascript - jquery悬停在无限循环中的项目上/开始闪烁项目

> ID：15014969
> 
> 赞同：0
> 
> 时间：2013-02-22T00:42:24.097
> 
> 标签：javascript, jquery, html, css

请在下面查看我的代码。我想要的是：

*   我所有的物品都绝对定位
*   当我将鼠标悬停在 item1 上时，我希望 item2, item3 显示
*   当我将鼠标悬停在 item2 上时，我希望 item3 隐藏
*   当我点击 item2 时，我在 item3 仍然隐藏时执行一些功能

使用下面的代码，如果我将鼠标悬停在 item2 上，它会开始闪烁 item2 和 item3。

我究竟做错了什么？

jsFiddle：

[http://jsfiddle.net/z9Unk/53/](http://jsfiddle.net/z9Unk/53/)

HTML

```
<div class="item1">
  item1
</div>
<div class="item2">
    item2
</div>
<div class="item3">
    item3
</div> 
```

CSS：

```
item1 {
    position:absolute;
    width:150px;
    height:150px;
    background-color:red;
    top:5%;
}

.item3, .item2 {
    position:absolute;
    width:50px;
    height:50px;
    background-color:green;
    top:8%;
    left:1%;
    display:none;
}

.item3 {
    top:18%;
} 
```

JS：

```
var item1 = $(".item1");
var item2 = $(".item2");
var item3 = $(".item3");

item1.hover(
    function() {
      item2.show();
      item3.show();
    },
    function() {
      item2.hide();
      item3.hide();
    }

);

item2.hover(
    function() {
      item3.hide();
    },
    function() {
    }

);

item2.click(
    function() {
        alert("Perform some function");
    }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:46:41.400

```
<div class="item1">
  item1
    <div class="item2">
        item2
    </div>
    <div class="item3">
        item3
    </div>
</div> 
```

你应该重构你的html

item2 在 item1 之外，所以当你在 item2 上移动时，item1 的 mouseleave 将触发然后触发 item1 的 mouseenter

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:46:21.157

您需要使用事件侦听器，否则您的代码只是自上而下运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T01:01:27.023

如果你不想重构你的 HTML，你可以为 item3 上的 onhover 编写另一个函数

```
item3.hover(
function() {
     item2.show();
  item3.show();
},
function() {
} 
```

);

[http://jsfiddle.net/z9Unk/55/](http://jsfiddle.net/z9Unk/55/)

干杯

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-22T00:47:38.080

增加 item1 的 z-index，或者只是将 item2+3 移动到其他任何地方

# javascript - Javascript 闭包和范围问题

> ID：15014971
> 
> 赞同：2
> 
> 时间：2013-02-22T00:42:52.137
> 
> 标签：javascript, jquery, closures

我无法绕过javascript闭包。我想要 4 个随机数，但只能将最后一个复制 4 次。

**Javascript**

```
$(function() {      

  function setNewNumber(element) {
    return function (newNumber) {
      element.text(newNumber);
    }
  }

  $('.number').each(function() {
      $.get('http://www.random.org/integers/?num=1&min=1&max=6&col=1&base=10&format=plain&rnd=new', 
        setNewNumber($(this))
      );
  });

}); 
```

**HTML**

```
<div class="number"></div>
<div class="number"></div>
<div class="number"></div>
<div class="number"></div> 
```

[一个有效的 plunker 示例](http://plnkr.co/edit/Pne7kVwwnB1G6hQriM9T)

有什么提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T00:55:06.450

`get`请求正在被缓存。

[http://jsfiddle.net/hCEbd/1/](http://jsfiddle.net/hCEbd/1/)

（也就是说你对闭包的理解是正确的，代码也能正常工作）。

从评论中，因为这是相关的：

> 您可以根据他们的 API 在同一计时器上从 random.org 请求多个数字。不要使用四个请求，而是使用`num=' + $(".number").length`然后做一点解析

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:47:17.583

您尝试使用顶级功能实现的目标有点令人困惑。如果您只想为元素设置新的随机数，则不需要其中任何一个。

用于`ajax`为您的请求指定一些参数。特别是，您希望停止缓存您的请求。您还可以提供上下文来引用您的`.number`元素。

```
$('.number').each(function() {
  $.ajax({
      type: "GET",
      url: 'http://www.random.org/integers/?num=1&min=1&max=6&col=1&base=10&format=plain&rnd=new',
      context: this,
      success: function(data) { 
        $(this).text(data); 
      },
      cache: false
  });
}); 
```

这个解决方案在这里摆弄[。](http://jsfiddle.net/VDwyg/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-22T01:03:40.780

Works: [http://plnkr.co/edit/XTOI20kGbFbzdtDaqpLZ](http://plnkr.co/edit/XTOI20kGbFbzdtDaqpLZ)

Your request is being cached. By the way, getting data in cycle - it's not a good idea.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-22T01:52:27.783

任何 jquery ajax 请求，如 $.get，都会更改范围。如果你想重用你的 setNewWord 函数，它需要在全局范围内或在 get 的结果范围内。

看看jsfiddle。 [http://jsfiddle.net/justengland/hJnXb/2/](http://jsfiddle.net/justengland/hJnXb/2/)

```
function setNewWord(element) {
$('#output').append(element + '<br>'); 
```

}

$（函数（）{

```
$(numbers).each(function () {
    var url = 'http://www.random.org/integers/?num=1&min=1&max=6&col=1&base=10&format=plain&rnd=new';
    $.get(url, setNewWord);
}); 
```

});

# java - 类中所有成员共享的私有 ArrayList

> ID：15014975
> 
> 赞同：-2
> 
> 时间：2013-02-22T00:43:03.093
> 
> 标签：java, class, arraylist, private

当我使用 setAssetWeight 方法设置存储在 ArrayList 中的对象的值时，对象的每个实例都将其 ArrayLists 中的值更改为使用 setAssetWeight 设置的值。

```
private List<Asset> assetList = new ArrayList<Asset>();
private int fitness;

public Portfolio(){    
}

public void setAssetWeight(int i, int weight){
    this.assetList.get(i).setWeight(weight);
} 
```

例如：如果我创建了两个 Portfolio 对象 pf1 和 pf2，然后执行

```
pf1.setAssetWeight(0, 10); 
```

当我打印 pf2 中包含的资产的权重时，它将显示第一个资产的权重为 10，而不是默认的 0。

为什么当我使用另一个对象调用该方法时，该对象的一个​​实例的 ArrayList 中的值会发生变化？ArrayList 被声明为私有的，这不应该意味着它只能被它所属的对象修改吗？

```
Portfolio1 pf1 = new Portfolio1();
Portfolio1 pf2 = new Portfolio1();

pf1.add(0, assetList.get(0));
pf1.add(1, assetList.get(1));
pf1.add(2, assetList.get(2));

pf1.setAssetWeight(0, 10);

System.out.println(pf2.toString()); 
```

这是我用来测试的代码部分，在这个例子中，打印语句将打印出 AssetList 中的第一个资产的权重为 10，即使我只设置了 pf1 的权重，而不是 pf2。

```
public void add(Asset asset){
    this.assetList.add(asset);
} 
```

这是用于将资产添加到列表的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:23:09.663

无法重现。毫无疑问，您在两个实例中都将相同的 Asset 实例添加到 List<Asset> 中。

# javascript - If Else 语句中的 JavaScript For 循环

> ID：15014977
> 
> 赞同：2
> 
> 时间：2013-02-22T00:43:05.360
> 
> 标签：javascript

我正在寻找一种更简单的方法来处理这些多个 If Else 语句，有数百个。我猜最好只在 If Else 中使用另一个 For 循环，但请告诉我大家的建议，谢谢！

```
var hrefs = [];
var list = document.getElementsByTagName("a");
for (var i=0; i<list.length; i++) {
    var hey = list[i].href;
    hrefs.push(hey);
}

if(window.location == 'http://') {
    tileid = <?php echo $numposts.''; ?>;
} else if (window.location == hrefs[7]) {
    tileid = 0;
} else if (window.location == hrefs[8]) {
    tileid = 1;
} else if (window.location == hrefs[9]) {
    tileid = 2;
} else if (window.location == hrefs[10]) {
    tileid = 3;
} else if (window.location == hrefs[11]) {
    tileid = 4;
} else if (window.location == hrefs[12]) {
    tileid = 5;
} else if (window.location == hrefs[13]) {
    tileid = 6;
} else if (window.location == hrefs[14]) {
    tileid = 7;
} else if (window.location == hrefs[15]) {
    tileid = 8;
} else if (window.location == hrefs[16]) {
    tileid = 9;
} else if (window.location == hrefs[17]) {
    tileid = 10;
} else if (window.location == hrefs[18]) {
    tileid = 11;
} else {
    tileid = window.history.state.projid;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T00:46:46.933

请试试这个：

```
var flag = false;

if (window.location == 'http://') {
    tileid = <?php echo $numposts.''; ?>;
} else {
    for (var i = 7; i <= 18; ++i) {
        if (window.location == hrefs[i]) {
             tileid = i - 7;
             flag = true; break;
        }
    }
    if (!flag) tileid = window.history.state.projid;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:58:40.517

没有测试过这个，我认为`i<(list.length<18?list.length:18)`可能是错误的。假设您不需要超过 18 个链接，它只是停止处理链接。

```
var hrefs = {};
var list = document.getElementsByTagName("a");
for (var i=0; i<(list.length<18?list.length:18); i++) {
    hrefs[list[i]] = i;
}

if (window.location == 'http://'( {
  tileid = <?php echo $numposts.''; ?>;
} else {
  if (!hrefs[window.location]) {
    tileid = window.history.state.projid;
  } else {
    tileid = hrefs[window.location] - 7;
  }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-22T00:48:08.117

你可以做一个switch语句。

```
switch(urlval){
    case 1:
     tileid = 1;
    break;

    case 2:
     tileid = 2;
    break;

    default:
     tileid = 0;
} 
```

# asp.net-mvc - Azure 上的 Umbraco 6：UmbracoModule 服务不可用

> ID：15014978
> 
> 赞同：2
> 
> 时间：2013-02-22T00:43:13.713
> 
> 标签：asp.net-mvc, azure, configuration, umbraco

我正在将新的 Umbraco 6 安装部署到 Azure，但遇到了一个我似乎无法诊断的问题。

以下是我为部署站点所采取的步骤：

1.  在 VS2012 中创建了新的 MVC 4 项目
2.  通过 NuGet 安装 UmbracoCms 6.0.0
3.  本地测试：**成功**
4.  在 Web.config 中为 Azure 设置正确的连接字符串（通过转换）
5.  使用 Web Deploy 部署到 Azure

不幸的是，当我导航到 Azure 实例时，我得到一个空白页面，显示“服务不可用”。我在 Azure 中启用了详细日志记录，并查看了日志文件。没有太多可以为我提供解决方案的建议。这就是详细的错误所说的：

**模块**：UmbracoModule

**通知**：ResolveRequestCache

**处理**程序：PageHandlerFactory-Integrated-4.0

**错误代码**：0x00000000

在这一点上我没有想法......有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T16:58:59.763

我刚刚完成了你描述的步骤。我创建了一个 MVC4 项目并通过 Nuget 下载了 Umbraco 6。我注意到的是，我必须在 VS 解决方案资源管理器的项目结构中“包含”相当数量的文件。

我在本地运行网站并仅使用 SQL CE 运行安装。

我在 Azure 上创建了一个网站，我下载了 .PublishSettings 文件并将其导入到 VS 的 Web Deploy 选项中。然后我“按原样”发布了该网站，只是为了看看发生了什么。我没想到数据库能正常工作，但我只是想确保应用程序运行正常并且我至少可以访问 Umbraco 登录屏幕。

当我访问该站点时，它按预期工作，我可以访问 /umbraco/ 的登录屏幕

鉴于您遇到的问题，虽然这听起来很简单，但您是否在部署之前“包含”了解决方案资源管理器中的所有文件？

如果您仍然遇到问题，我会做我所做的，只是设置另一个非常简单的站点来测试您的部署过程。老实说，我很惊讶它是多么容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:03:35.990

我刚刚通过简单的博客完成了相同的步骤，这非常困难。我没有在 Visual Studio 中包含任何内容（除了它是 2010 年并且我下载了发布配置文件）并且该站点在本地运行良好。

在将 Umbraco 6 上传到 azure 时，出现“无法加载文件或程序集 MySql.Data，”等 .net 错误。当然，它就在那里。

在重复我的部署步骤，在 Visual Studio、Web Matrix 和 Sql Azure 迁移向导之间进行交换，检查它是否是构建时的发布配置等（不是说它应该需要构建）我得到了各种“页面无法显示，因为内部服务器错误在空白屏幕上发生'，并且'无法加载 My.Sql' 错误。

第二天回来，我再次部署，我的用户在数据库中失去了角色成员资格。我再次运行了 EXEC sp_addrolemembers，瞧，该站点现在可以工作了。我希望我能更具体地说明哪里出了问题以及哪些问题得到了修复，但这有点像巫术。

我赞同 Digby 所说的 - 确保所有包含的内容都包含在内并继续部署。我认为 azure 最近有点忙，上周 2 月 23 日发生了中断。

# python - 如何在 Tkinter 文本框上设置对齐方式

> ID：15014980
> 
> 赞同：4
> 
> 时间：2013-02-22T00:43:27.427
> 
> 标签：python, python-2.7, tkinter

**问题**

1.  如何更改`ScrolledText`Tkinter 小部件中特定行的对齐方式？
2.  我最初的错误的原因是什么？

**背景**

我目前正在开发 Tkinter 文本框应用程序，并且正在寻找更改行对齐的方法。最终，我希望能够将特定行从**LEFT ALIGN**更改为**RIGHT ALIGN**等等。现在，我只需要了解如何更改整个文本框的对齐方式，尽管我们将不胜感激进一步的帮助。我一直在使用 Effbot.org 来帮助我完成任务。这是我的`ScrolledText`小部件代码：

**代码**

```
def mainTextFUN(self):
    self.maintextFrame = Frame (root, width = 50, height = 1,
                           )

    self.maintextFrame.grid(row = 1, column = 1, sticky = N, columnspan = 1,
                            rowspan = 1)

    self.write = ScrolledText(self.maintextFrame,
                              justify(CENTER),
                              width = 100, height = 35, relief = SUNKEN,
                              undo = True, wrap = WORD,
                              font = ("Times New Roman",12),
                              )
    self.write.pack() 
```

当我运行它时，我得到一个错误。

```
Traceback (most recent call last):
  File "D:\Python Programs\Text Editor\MyTextv5.py", line 132, in <module>
    app = Application(root)
  File "D:\Python Programs\Text Editor\MyTextv5.py", line 16, in __init__
    self.mainTextFUN()
File "D:\Python Programs\Text Editor\MyTextv5.py", line 57, in mainTextFUN
justify(CENTER),
NameError: global name 'justify' is not defined
>>> 
```

如果我将参数更改为`justify`参数之后`font`，我会收到消息框形式的不同错误。

```
There's an error in your program:
*** non-keyword arg after keyword arg (MyTextv5.py, line 61) 
```

**编辑**

我根据 abarnert 的建议更改了代码。我`justify = CENTER,`在之后添加`self.maintextFrame`。尽管如此，我还是遇到了另一个错误。

```
Traceback (most recent call last):
  File "D:\Python Programs\Text Editor\MyTextv5.py", line 132, in <module>
    app = Application(root)
  File "D:\Python Programs\Text Editor\MyTextv5.py", line 16, in __init__
    self.mainTextFUN()
  File "D:\Python Programs\Text Editor\MyTextv5.py", line 60, in mainTextFUN
    font = ("Times New Roman",12),
  File "C:\Python27\lib\lib-tk\ScrolledText.py", line 26, in __init__
    Text.__init__(self, self.frame, **kw)
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 2827, in __init__
    Widget.__init__(self, master, 'text', cnf, kw)
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 1974, in __init__
    (widgetName, self._w) + extra + self._options(cnf))
TclError: unknown option "-justify" 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-22T03:10:37.317

您正在使用名为 的选项`justify`，但文本小部件不存在此类选项。您是否在某处阅读了一些说明`justify`是有效选项的文档？如果是这样，您需要停止阅读该文档。

但是，有一个`justify`文本标签选项。您可以将标签配置为有理由，然后将该标签应用于一行或多行。我从未使用过`ScrolledText`小部件，所以我不知道它是否具有与纯文本小部件相同的方法，但使用纯文本小部件，您会执行以下操作：

```
t = tk.Text(...)
t.tag_configure("center", justify='center')
t.tag_add("center", 1.0, "end") 
```

在上面的示例中，我们正在创建和配置一个名为“center”的标签。标签可以具有您想要的任何名称。对于“中心”标签，我们给它一个“中心”的理由，然后将该标签应用于小部件中的所有文本。

您可以通过调整方法的参数来标记各个行`tag_add`。您还可以在使用该`insert`方法插入文本时给出标签列表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T03:06:34.627

很容易理解为什么尝试`justify=CENTER`为`Text`小部件设置失败：小部件没有这样的选项。

你想要的是创建一个带有参数的标签`justify`。然后您可以使用该标签插入一些文本（或者您可以插入任何文本，然后将标签应用于某个区域）：

```
import Tkinter

root = Tkinter.Tk()
text_widget = Tkinter.Text()
text_widget.pack(fill='both', expand=True)

text_widget.tag_configure('tag-center', justify='center')
text_widget.insert('end', 'text ' * 10, 'tag-center')

root.mainloop() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T00:57:15.250

问题是您的 Python 语法，与以下内容无关`tkinter`：

```
self.write = ScrolledText(self.maintextFrame,
                          justify(CENTER),
                          width = 100, height = 35, relief = SUNKEN, 
```

这不是您通过`justify`value传递关键字参数的方式`CENTER`；你正在传递一个位置参数，带有 value `justify(CENTER)`。因此，Python 尝试`justify(CENTER)`通过查找名为 的函数来进行计算`justify`，但没有找到，并引发了`NameError`.

移动它没有帮助，它只是意味着你在到达`SyntaxError`之前得到 a `NameError`，因为你`justify(CENTER)`在关键字参数之后有一个位置参数`font`，这是不允许的。

正确的做法与在下一行传递所有其他关键字参数的方式相同：

```
self.write = ScrolledText(self.maintextFrame,
                          justify = CENTER,
                          width = 100, height = 35, relief = SUNKEN, 
```

* * *

顺便说一句，将理由更改`CENTER`为不会将左对齐更改为右对齐；它会将其从左对齐更改为居中。你确定你不想要`RIGHT`吗？

* * *

一旦你解决了语法问题，你就会遇到一个与 tkinter 相关的新*问题*。该类`ScrolledText`只是将其关键字参数传递给`Text`该类，而`Text`小部件没有`justify`参数。

如果您阅读[文档](http://effbot.org/tkinterbook/text.htm)，`justify`则用作与一系列文本相关联的标签，而不是与小部件相关联的标签。因此，您必须使用`tag_config`该`justify`属性来创建命名标记配置，然后您可以将其应用于小部件内的文本范围，如示例所示。所以：

```
self.write.tag_config('justified', justify=RIGHT)
self.write.insert(INSERT, 'Ancients of Mu-Mu', 'justified') 
```

当然，这直接回答了您的另一个问题：

> 如何在 Tkinter 的 ScrolledText 小部件中更改特定行的对齐方式？

要么首先使用正确的标签插入它们，要么选择它们并在事后应用标签。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T13:20:52.760

可能使人们感到困惑的是，上面提到的[http://effbot.org/tkinterbook/text.htm](http://effbot.org/tkinterbook/text.htm)上的文档实际上确实`justify`列为 Text 小部件的一个选项，并且可能曾经有过，（似乎文本小部件应具有的选项）但[http://www.tcl.tk/man/tcl8.4/TkCmd/text.htm](http://www.tcl.tk/man/tcl8.4/TkCmd/text.htm)上的文档没有列出`justify`选项，只有`-justify`标签。请注意，标签小部件可以处理多行文本并且确实有一个`-justify`选项。

# sql - 短文本数据类型字段中的日期...选择查询麻烦

> ID：15014985
> 
> 赞同：0
> 
> 时间：2013-02-22T00:43:55.303
> 
> 标签：sql, database, date, ms-access

在我的 Access 数据库中，我有一个名为`customers`. 在此表中，我有一个名为`DateEntered`. 该字段的数据类型是*短文本*。

此列中的值不一致 - 它们有几种变体：

*   `MM-DD-YYYY`,
*   `MMDDYYYY`和
*   `MM/DD/YYYY`.

好像没有什么标准。

我的目标是选择 2012 年的所有客户。我试过了

```
select *
from customers
where DateEntered <('%2013') AND >('%2012'); 
```

但是当我运行它时它会出现空白。

谁能指出我做错了什么，更重要的是解释为什么这个查询在 Access 中不起作用？根据我对 SQL 的理解（不是很高级），这应该可行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:34:21.560

另一种变体）

```
select * from customers where RIGHT(DateEntered, 4) = '2012' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T01:05:17.693

If you have control over the database and application code, the best way to handle this is to use an actual Date field instead of text in the table.

One way to handle this would be to add a new field to the table, write a query or two to correctly convert the text values to actual date values, and populate the new field. At this point, you would then need to hunt down the application code the refers to this field in any way and adjust to treat the field as a date, not text. This includes your insert and update statements, report code, etc.

Finally, as a last step, I would rename the original text field (or remove it altogether) and rename the new date field to the original field name. Once you fix the problem, querying against the field will be a piece of cake.

Alternatively, if you can't alter the table and source code, you can use the date [conversion function CDATE()](http://office.microsoft.com/en-us/access-help/type-conversion-functions-HA001229018.aspx) to convert the text value to an actual date. Note that you may need to guard against non-date entries (NULL or empty string values, as well as other text values that aren't really dates in the first place). The [IsDate() function](http://office.microsoft.com/en-us/access-help/isdate-function-HA001228863.aspx) can be your friend here.

If you have the time and patience, fixing the data and code is the better approach to take, but sometimes this isn't always feasible.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T00:56:17.117

你为什么不使用`LIKE`运算符（当你有一个使用`%`and的模式时它们是合适的`_`）：

```
select * from customers where DateEntered  like '%2013' or DateEntered  like '%2012' 
```

# magento - 如何在多个位置显示 magento 块？

> ID：15014992
> 
> 赞同：0
> 
> 时间：2013-02-22T00:44:44.737
> 
> 标签：magento, block

我正在尝试在其正常位置以及页面底部显示交叉销售块。涉及的 phtml 模板文件不止一个，因此 $this->getChildHtml 在第二个位置不起作用，因为该块设置为现在仅位于 cart.phtml 文件中。

总之，如何在多个模板文件中显示相同的块？我不想将这些更改放在我的 local.xml 中，也不想修改核心 Magento 模板文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:23:21.150

该块的核心布局指令设置为**checkout.cart**块的子块：

```
<checkout_cart_index translate="label">
    <!-- ... -->
    <reference name="content">
        <block type="checkout/cart" name="checkout.cart">
            <!-- ... -->
            <block type="checkout/cart_crosssell" name="checkout.cart.crosssell" as="crosssell" template="checkout/cart/crosssell.phtml"/>
        </block>
    </reference>
 </checkout_cart_index> 
```

要将其添加到页脚，您*可能只需要在**local.xml*中建立另一个父子关系：

```
<checkout_cart_index>
    <reference name="footer">
        <action method="insert"><!-- or "append" to add to the end -->
            <child>checkout.cart.crosssell</child>
        </action>
    </reference>
</checkout_cart_index> 
```

这种方法依赖于 stock *page/html/footer.phtml*模板，该模板包含一个空调`getChildHtml()`用，这会导致它呈现所有子块。

**请注意，页脚块类`Mage_Page_Block_Html_Footer`具有永不过期的`block_html`缓存生命周期，*并且*它不会评估其缓存条目的子内容。**您可能需要禁用此块的缓存或重写块类以说明交叉销售块的不同内容。

# ios - 添加 CSS 图像 - Phonegap

> ID：15014994
> 
> 赞同：0
> 
> 时间：2013-02-22T00:44:58.843
> 
> 标签：ios, css, xcode, cordova

我正在使用 xcode 开发一个 phonegap 应用程序。对于设计，我有一些 jquery 移动图标来显示某些按钮。我想在应用程序上托管这个 jquery mobile 的东西，而不是有一个 http 链接（因此使用更多的带宽等）。

在模拟器上这工作正常并且图标显示出来，但是当放在手机上时它们没有，我想我必须告诉 xcode 将图像文件明确地放在手机上？在 .plist 或其他东西中。

任何人有任何见解？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:21:37.887

所有 phonegap 资源都应该放在路径 www。我从来没有得到你描述的东西，但我认为错误可能是由于你的图像路径而发生的。您可以更改 jqm 的文件夹，然后重试。

# elisp - Emacs Lisp（elisp）中的范围数据类型或生成器？

> ID：15014996
> 
> 赞同：19
> 
> 时间：2013-02-22T00:45:05.647
> 
> 标签：elisp, range

elisp 与 Python 的等价物是`range(start, end, [step])`什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-08-31T00:35:37.153

`number-sequence`类似于python `range`，但它的输出是完全不同的。例如：

```
(number-sequence 5)
 => (5)
(number-sequence 1 5)
 => (1 2 3 4 5)
(number-sequence 1 5 2)
 => (1 3 5) 
```

我使用这个函数给我一个类似于 python 的输出`range`：

```
(defun py-range (start &optional end step)
  (unless end
    (setq end start
      start 0))
  (number-sequence start (1- end) step)) 
```

现在一切都按预期工作：

```
(py-range 5)
 => (0 1 2 3 4)
(py-range 1 5)
 => (1 2 3 4)
(py-range 1 5 2)
 => (1 3) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-22T00:59:42.920

```
(number-sequence FROM &optional TO INC) 
```