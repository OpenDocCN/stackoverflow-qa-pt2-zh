# StackOverflow 问答 14046000-14046999

# ios - 如何向 Facebook 的 placePickerViewController 添加搜索功能？

> ID：14046000
> 
> 赞同：1
> 
> 时间：2012-12-26T20:39:13.350
> 
> 标签：ios, facebook, facebook-ios-sdk

我目前`placePickerViewController`在我的 iOS 应用程序中使用 Facebook。我想要做的是向这个控制器添加搜索功能。

`loadData`每次在搜索输入中输入新字符时，我当前的解决方案都会调用。搜索本身由该`placePickerViewController:shouldIncludePlace`方法处理。该解决方案有效，但有许多负面影响。一方面，该`loadData`方法为每个新角色往返于服务器并返回，这充其量是低效的。如果用户输入搜索查询的速度过快，它也会偶尔崩溃。

Facebook`friendPickerViewController`有一个名为的方法`updateView`，它使用预先缓存的数据更新朋友列表。不幸的是，`placePickerViewController`没有等效的方法。

有人在这个控制器中实现了搜索吗？任何建议将不胜感激。谢谢！

# python - pandas python中没有列名

> ID：14046006
> 
> 赞同：14
> 
> 时间：2012-12-26T20:40:06.520
> 
> 标签：python, pandas

关于熊猫数据框的基本问题。我有一个带有数据点的 1x1 数据框，并且没有列标题（当前）。 `df[0,0]`不起作用，因为我认为它需要一个列名。此外，`df.0`也不行`df[0,'']`。 `df.ix[0,0]`确实有效。

一般来说，我需要有一个列名吗？将列名与熊猫数据框一起使用是最佳做法吗？如果我的 sql 查询没有列标题，是否最好在此时添加它们？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-26T21:04:08.327

不，您不需要分配列名，也不需要它们来访问任何元素。

```
In [12]: df = pd.DataFrame([0])

In [13]: df.ix[0,0]
Out[13]: 0

In [14]: df[0][0]
Out[14]: 0 
```

实际上，您可以认为列已经有了名称——它是整数 0。看看当您提供名称时会发生什么

```
In [15]: df    #Before naming the column
Out[15]:
   0
0  0

In [16]: df.columns = ['ColA']
In [17]: df    #Renamed
Out[17]:
   ColA
0     0

In [18]: df['ColA'][0]    #Now you can access the column using the new name
Out[18]: 0

In [19]: df[0][0]         #... but trying the old name will not work
---------------------------------------------------------------------------
KeyError                                  Traceback (most recent call last)

KeyError: 'no item named 0' 
```

不过，您仍然可以`DataFrame.ix`像以前一样使用：

```
In [20]: df.ix[0,0]
Out[20]: 0 
```

# javascript - javascript中哪种存储和操作位域的方式最快？（200k+ 位）

> ID：14046008
> 
> 赞同：2
> 
> 时间：2012-12-26T20:40:16.973
> 
> 标签：javascript, cordova, bit-manipulation, bit-fields

我正在分析我打算在 Android (PhoneGap) 上的嵌入式浏览器上使用的 javascript 代码。

基本上，我的计算需要一个非常大的位域（200k+ 位）。

我试图将它们放入无符号整数数组中，每个项目存储 32 位 - 这确实减少了内存使用量，但执行时间*非常*慢（在现代 PC 上简单迭代和反转位域中的所有位超过 30 秒！）

比我制作好的老式布尔数组。这增加了内存使用量（但我的代码周围的整个 PhoneGap 框架在 Android 上仍然不到 15 兆）。分析向我展示了我算法的初始步骤 - 将位域的所有元素设置为 1（简单的 for 循环） - 需要一半的执行时间（在 PC 上约为 1.5 秒，在 Android 上超过几分钟）。我可以重写我的代码，所以默认值是 0 而不是 1（反转所有条件），但我仍然不知道如何将这么大的数组快速设置为 0。

*根据要求编辑*添加我的代码：

```
var count = 200000;
var myArr = [];

myArr.length = count;
for(var i = 0; i < count ; i++)
    myArr[i] = true; 
```

有人可以指出我如何清除非常大的数组，或者有没有更快的方法来存储和操作 javascript 中的大位域？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T21:25:20.383

看看这是否是创建数组的更快方法：

```
var myArray = [true];
var desiredLength = 200000;
while (myArray.length < desiredLength) {
    myArray = myArray.concat(myArray);
}
if (myArray.length > desiredLength) {
    myArray.splice(desiredLength);
} 
```

[`jsperf`我在Asad 在他的评论中链接的页面中添加了更多测试用例](http://jsperf.com/array-initialisation-comparison/2)。到目前为止，我的浏览器（Mac OS X 10.8.2 上的 Chrome 23.0.1271.101）中最快的是这个：

```
var count = 200000;
var myArr = [];
for (var i = 0; i < count; i++) {
  myArr.push(true);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T14:08:37.380

为什么首先要预先填充数组！利用`undefined`你的优势。请记住，未定义充当*虚假*值。因此，当您进行布尔检查时，它的行为与 0/false 完全相同。

```
var myArray = new Array(200000);

if (myArray[1]) {   
  //I am a truthy value
} else {
  //I am a falsey value
} 
```

所以当你以这种方式初始化数组时，没有理由预填充！这意味着无需额外处理并利用稀疏数组！

# c++ - 清空 QVariantList？

> ID：14046018
> 
> 赞同：0
> 
> 时间：2012-12-26T20:40:48.370
> 
> 标签：c++, qt

我有一个 QVariantList。我怎样才能清空它。

我试过了

```
myList.clear() 
```

和

```
myList.empty(); 
```

但没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T20:46:12.270

A`QVariantList`只是一个`QList<QVariant>`. 所以看看`QList` [文档](https://qt-project.org/doc/qt-4.8/qlist.html)：

*   [`QList::clear()`](https://qt-project.org/doc/qt-4.8/qlist.html#clear)：从列表中删除所有项目。
*   [`QList::empty()`](https://qt-project.org/doc/qt-4.8/qlist.html#empty)：提供此功能是为了兼容 STL。它等效于 isEmpty() 并且如果列表为空则返回 true。

这清楚地说明了为什么`myList.empty();`不起作用。但是，`myList.clear()`应该可以工作，因此您的代码中的其他地方可能有错误。

只是为了仔细检查，`qDebug() << list.length();`在该`list.clear();`行之后添加类似的内容：

```
QVariantList list;
list << 42;
qDebug() << list.length();
list.clear();
qDebug() << list.length(); 
```

给出：

```
1
0 
```

# php - 使用 Facebook 从 android 验证我的网站

> ID：14046020
> 
> 赞同：1
> 
> 时间：2012-12-26T20:40:57.330
> 
> 标签：php, android, facebook

我在其他应用程序中看到了这一点，所以我知道这是可能的。

我想使用本机 facebook 系统作为第一种身份验证方法。当然，好处是大多数用户已经在他们的手机上登录了他们的 Facebook 帐户，所以他们只需要允许我的应用程序访问并且他们已经登录......而且它对于 ios 相当便携。

我了解如何对 facebook 进行身份验证以在用户的​​墙上发布消息等，但我不知道如何使用此身份验证作为登录 http 服务器的一种方式。

有谁知道这方面的任何文章？

# python - 注入 Django 进行测试和调试

> ID：14046024
> 
> 赞同：0
> 
> 时间：2012-12-26T20:41:15.463
> 
> 标签：python, django, django-testing

我正在编写一个严重依赖日期和时间的应用程序。我希望能够对`now()`and有一个可注射的概念`today()`。我在想我可以编写我自己版本的这两个函数来检查一些中心设置，我将其称为`INJECTED_NOW`. 如果`INJECTED_NOW`为 None，上述函数将只返回 和 的`datetime.datetime.now()`值`datetime.date.today()`。但是，如果`INJECTED_NOW`有一个日期时间值，上述函数将使用它来获取 now() 和 today()。

我想知道如何存储 INJECTED_NOW 使其可变。我希望能够在测试用例的开头设置它并在另一个测试用例之前对其进行修改。同样，我希望能够从请求中设置它，也许使用中间件。

这种方法是否有意义，如果是，我应该如何存储 INJECTED_NOW？我想避免数据库访问。有没有解决这个问题的替代方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T21:10:41.823

最近发布了一个名为 FreezeGun 的库，可以像您描述的那样指定日期时间：

[http://stevepulec.com/freezegun/](http://stevepulec.com/freezegun/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T15:27:49.317

这是一种使用模拟的方法，有关模拟的更多信息，请参阅[文档](http://www.voidspace.org.uk/python/mock/getting-started.html)

```
# this should be the code your are testing
import datetime

def one_minute_ago():
    return (datetime.datetime.now() - datetime.timedelta(seconds=60)).time()

# this would be in your tests file
import mock
import sys
import unittest

class SomeTestcase(unittest.TestCase):

    def test_one_minute_ago(self):
        real_datetime = datetime.datetime
        fake_now = datetime.datetime(2012, 12, 21, 11, 13, 13)
        with mock.patch('datetime.datetime', spec=datetime.datetime) as datetime_mock:
            datetime_mock.now.return_value = fake_now

            self.assertEqual(one_minute_ago(), datetime.time(11, 12, 13))

if __name__ == '__main__':
    sys.exit(unittest.main()) 
```

要对其进行测试，只需将代码复制到一个文件并使用 Python 运行它。

# java - 如何为首选项中的 seekBar 设置 onChangeListener？

> ID：14046030
> 
> 赞同：1
> 
> 时间：2012-12-26T20:41:36.920
> 
> 标签：java, android, preferences, seekbar, preferenceactivity

如何为首选项中的 seekbar 设置 OnChangeListener（图片[http://img825.imageshack.us/img825/6729/prefscreen.png](http://img825.imageshack.us/img825/6729/prefscreen.png)）？我已经尝试过这段代码，但它会返回空指针异常：

偏好活动：

```
import android.os.Bundle;
import android.preference.Preference;
import android.preference.PreferenceActivity;
import android.widget.SeekBar;

public class peferences extends PreferenceActivity  {
    private SeekBar SensitivitySeekBar;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);

        SensitivitySeekBar = (SeekBar)findViewById(R.id.SeekBar2);
        SensitivitySeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {

            public void onStopTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub

            }

            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub

            }

            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
                // TODO Auto-generated method stub

            }
        });
    } 
```

首选项.xml：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
        <PreferenceCategory
            android:title="@string/pref_accelerometer_title"
            android:key="preference_accelerometer" >
            <CheckBoxPreference
                android:key="pref_key_x_axis"
                android:summary="@string/preference_x_axis_summary"
                android:title="Use x-axis"
                android:defaultValue="true" android:order="1" android:enabled="true"/>
            <CheckBoxPreference 
                android:title="Use y-axis" 
                android:key="pref_key_y_axis" 
                android:summary="@string/preference_y_axis_summary" 
                android:order="2" 
                android:enabled="true" 
                android:defaultValue="true"/>
            <CheckBoxPreference 
                android:summary="@string/preference_z_axis_summary" 
                android:title="Use z-axis" 
                android:key="pref_key_z_axis" 
                android:order="3" 
                android:enabled="true" 
                android:defaultValue="true"/>
            <CheckBoxPreference 
                android:title="Accelerometer value" 
                android:key="pref_accelerometer_value" 
                android:summary="@string/preference_show_accelerometer_value"/>
            <Preference 
                android:layout="@layout/seekbar" 
                android:order="4"
                android:key="seekbar"/>

          </PreferenceCategory>

    </PreferenceScreen> 
```

搜索栏布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/Sensitivity_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="15dp"
        android:text="@string/preference_sensitivity_title"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/Sensitivity_summary"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/Sensitivity_title"
        android:layout_below="@+id/Sensitivity_title"
        android:text="@string/preference_sensitivity_summary" />

    <SeekBar
        android:id="@+id/seekBar2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/Sensitivity_summary"
        android:max="5000" />

</RelativeLayout> 
```

日志：

```
12-26 22:55:35.204: D/dalvikvm(24291): GC_CONCURRENT freed 329K, 4% free 9212K/9572K, paused 4ms+5ms, total 29ms
12-26 22:55:36.626: D/AndroidRuntime(24291): Shutting down VM
12-26 22:55:36.626: W/dalvikvm(24291): threadid=1: thread exiting with uncaught exception (group=0x4154e930)
12-26 22:55:36.634: E/AndroidRuntime(24291): FATAL EXCEPTION: main
12-26 22:55:36.634: E/AndroidRuntime(24291): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.bluetoothc/com.example.bluetoothc.peferences}: java.lang.NullPointerException
12-26 22:55:36.634: E/AndroidRuntime(24291):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-26 22:55:36.634: E/AndroidRuntime(24291):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-26 22:55:36.634: E/AndroidRuntime(24291):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-26 22:55:36.634: E/AndroidRuntime(24291):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-26 22:55:36.634: E/AndroidRuntime(24291):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-26 22:55:36.634: E/AndroidRuntime(24291):    at android.os.Looper.loop(Looper.java:137)
12-26 22:55:36.634: E/AndroidRuntime(24291):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-26 22:55:36.634: E/AndroidRuntime(24291):    at java.lang.reflect.Method.invokeNative(Native Method)
12-26 22:55:36.634: E/AndroidRuntime(24291):    at java.lang.reflect.Method.invoke(Method.java:511)
12-26 22:55:36.634: E/AndroidRuntime(24291):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-26 22:55:36.634: E/AndroidRuntime(24291):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-26 22:55:36.634: E/AndroidRuntime(24291):    at dalvik.system.NativeStart.main(Native Method)
12-26 22:55:36.634: E/AndroidRuntime(24291): Caused by: java.lang.NullPointerException
12-26 22:55:36.634: E/AndroidRuntime(24291):    at com.example.bluetoothc.peferences.onCreate(peferences.java:23)
12-26 22:55:36.634: E/AndroidRuntime(24291):    at android.app.Activity.performCreate(Activity.java:5104)
12-26 22:55:36.634: E/AndroidRuntime(24291):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-26 22:55:36.634: E/AndroidRuntime(24291):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-26 22:55:36.634: E/AndroidRuntime(24291):    ... 11 more
12-26 22:55:39.001: I/Process(24291): Sending signal. PID: 24291 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T09:34:31.803

我遇到了同样的 NPE 问题，我通过 `SeekbarPreference`在`onBindDialogView`. 这是代码：

```
public class SeekbarPreference extends DialogPreference implements
        OnSeekBarChangeListener {

    private SeekBar mSeekbar;

    @Override
    protected void onBindDialogView(View view) {
        super.onBindDialogView(view);

        mSeekbar = (SeekBar) view.findViewById(R.id.sb_text_size);
        mSeekbar.setOnSeekBarChangeListener(this);
    }

    public SeekbarPreference(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.setDialogLayoutResource(R.layout.setting_textsize_seekbar);
    }

    @Override
    protected void onDialogClosed(boolean positiveResult) {
        if (positiveResult) {
            // save to SharedPrefs, etc
        }
    }

    @Override
    public void onProgressChanged(SeekBar seekbar, int progress, boolean fromUser) {
    }

    @Override
    public void onStartTrackingTouch(SeekBar seekBar) {
    }

    @Override
    public void onStopTrackingTouch(SeekBar seekBar) {
    }
} 
```

这是我的preference.xml：

```
<PreferenceCategory
    <com.flounder.xeniaNote.view.SeekbarPreference
        android:dialogLayout="@layout/setting_textsize_seekbar"
        android:key="@string/pref_text_size_key"
        android:title="@string/pref_text_size" />

    ...
</PreferenceCategory> 
```

我希望它有帮助！

# asp.net - 用于 asp.net 网络表单的停靠窗口/面板？

> ID：14046032
> 
> 赞同：4
> 
> 时间：2012-12-26T20:41:42.480
> 
> 标签：asp.net, vb.net, telerik, dockpanel

任何人都可以建议第三方供应商，或者我如何在 asp.net 中将 Dock 窗口实现为 Web 表单。与 Visual Studio IDE 类似，能够停靠到侧面以及固定和取消固定的选项。我试过 Telerik，但他们的 Dock 面板只能水平停靠，而不是侧面停靠。

任何建议或链接都​​会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:31:39.563

你确定你不能水平停靠 Telerik，这里的演示页面[Telerik Dock / Zone Orientation](http://demos.telerik.com/aspnet-ajax/dock/examples/zoneorientation/defaultcs.aspx)似乎表明这是可能的？

# javascript - 让 jQuery 元素在加载后执行（完成页面加载后）

> ID：14046036
> 
> 赞同：0
> 
> 时间：2012-12-26T20:42:00.697
> 
> 标签：javascript, ajax, jquery

让 jQuery 元素在加载后执行（完成页面加载后）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:59:28.953

可能会触发事件。当您使用额外的自定义事件进行初始化时，例如“重新加载”：

```
/*！-- ui-slider -- */

$(document).on('准备重新加载',function() {
        $( "#slider" ).slider({
            范围：真，
            分钟：0，
            最大：500，
            值：[ 25, 450 ]，
            幻灯片：功能（事件，用户界面）{
                $("#value").val(""+ui.values[0]+"-"+ui.values[1]);
            }
        });
        $( "#value" ).val( "" + $( "#slider" ).slider( "values", 0 ) +
            " - " + $( "#slider" ).slider( "值", 1 ) );
    });

/*！-- 切换类 -- */

$(document).on('准备重新加载',function() {
    $("#div3").on('click', '.toggle', function () {
        $(this).toggleClass("toggle_background");
    });
});
```

....那么你只需要在回调中触发 reload-event`$.load()`

```
$(文档).ready(函数(){
$("#selectbox").change(function(){
    var selectedOption = $('#selectbox :selected').val();
    $containerDiv = $('#receive_content');
    $containerDiv.html("");
        开关（选择选项）
        {
     case "Selectbox":$containerDiv.load("default",
                                  function(){ $(document).trigger('reload'); });
                                      休息;

     案例“选项1”：$containerDiv.load（“content.html #div1”，
                                  function(){ $(document).trigger('reload'); });
                                      休息;

     case "选项 2":$containerDiv.load("content.html #div2",
                                  function(){ $(document).trigger('reload'); });
                                      休息;

     case "选项 3":$containerDiv.load("content.html #div3",
                                  function(){ $(document).trigger('reload'); });
                                      休息;        
       }
    返回真；
    });
});
```

# ios - UITableView Header Override (UIView) 对滚动行为异常

> ID：14046037
> 
> 赞同：0
> 
> 时间：2012-12-26T20:42:07.180
> 
> 标签：ios, uitableview, uiview

我用一个通用的 UIView 覆盖（这是一个真实的词吗？无论如何）我的 UITableView 标头，以便在整个应用程序中使用。它没什么大不了的，只是一个坚实的背景，预先选择的字体，字体大小，字体粗细，字体颜色等。这就是它的全部。事实上继承人的 UIView

*TableSectionView.h*

```
#import <UIKit/UIKit.h>

@interface TableSectionView : UIView {
    NSString *textLabel;
    UIColor *textColor;
    UIColor *backgroundColor;
    BOOL bold;
    NSString *textFont;
    NSInteger textSize;
}

@property (nonatomic, retain) NSString *textLabel, *textFont;
@property (nonatomic, retain) UIColor *textColor, *backgroundColor;
@property (nonatomic) BOOL bold;
@property (nonatomic) NSInteger textSize;

- (id)initWithFrame:(CGRect)frame andText:(NSString*)text;

@end 
```

*TableSectionView.m*

```
#import "TableSectionView.h"

@implementation TableSectionView

@synthesize textLabel, backgroundColor, textColor, bold, textFont, textSize;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

-(id)initWithFrame:(CGRect)frame andText:(NSString *)text {

    self = [self initWithFrame:frame];
    if(self) {

        textLabel = text;
        textFont = @"Arial-BoldMT";
        textSize = 16;
        textColor = [[UIColor alloc] initWithRed:1 green:1 blue:1 alpha:1];
        backgroundColor = [[UIColor alloc] initWithRed:0 green:0 blue:0 alpha:0.8];

    }
    return self;

}

-(void)layoutSubviews {
    [super layoutSubviews];

    UILabel *title = [[UILabel alloc] initWithFrame:self.frame];

    title.text = [NSString stringWithFormat:@"  %@", textLabel];
    title.font = [UIFont fontWithName:textFont size:textSize];
    title.textColor = textColor;
    title.backgroundColor = backgroundColor;

    [self addSubview:title];

}

@end 
```

以及我如何在文件中使用它：

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    return [[TableSectionView alloc] initWithFrame:CGRectZero andText:@"Table Section Title"];
} 
```

这里没有什么奇怪或独特的。

这很有效，它显示得很好。当您滚动表格视图时会发生什么。当您向上滚动时，部分标题会向下移动并停留在那里。速度越快，部分标题越向下移动并停留在那里，直到您回到表格顶部。这个应用程序有大约 25 个单独的表视图，这个标题是分开的，我真的很想尽快解决这个渲染错误。

我想发布一个截图，但由于严格的保密协议，我不能在没有被解雇的风险的情况下发布。但这里有一些东西可以可视化这个问题。我已经把所有的文字都弄模糊了，抱歉我别无选择：\

![在此处输入图像描述](../Images/024e356e5298777ee24a30375706aa60.png)

黑条是section header，图片顶部是UITableView的顶部。请注意该部分标题下降了多少，而不是它应该在哪里？（顶部，如普通部分标题）。我只是不确定在这里做什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:18:05.290

我认为你的问题在这里：

```
-(void)layoutSubviews {
    [super layoutSubviews];

    UILabel *title = [[UILabel alloc] initWithFrame:self.frame];

    title.text = [NSString stringWithFormat:@"  %@", textLabel];
    title.font = [UIFont fontWithName:textFont size:textSize];
    title.textColor = textColor;
    title.backgroundColor = backgroundColor;

    [self addSubview:title];

} 
```

在 layoutSubviews 中添加子视图很奇怪。为什么不在 initWithFrame 中做，以免混淆 Cocoa 的渲染代码呢？

编辑：这也使您免于保存所有这些成员变量，声明所有这些属性并合成它们:)

编辑2：当您初始化时，`UILabel`您也应该使用作为参考`self.bounds`而不是`self.frame`。

# python - 抛出python对列表中的元素

> ID：14046042
> 
> 赞同：1
> 
> 时间：2012-12-26T20:43:02.093
> 
> 标签：python

我已经四处寻找有关此问题的指示，但找不到任何指示。假设我在 Python 中有一个列表：

```
list = set([((3, 2), (2, 1)),
            ((3, 2), (3, 1)),
            ((3, 1), (2, 1)), 
            ((2, 1), (1,3), (2, 3))]) 
```

我想改进这个列表，以便包含具有相同第一个元素的对的列表条目被丢弃。例如，上面列表的输出应该是

```
set([((3, 2), (2, 1)),
     ((3, 1), (2, 1))]) 
```

因为`((3, 2), (3, 1))`和`((2, 1), (1,3), (2, 3))`是其中至少两个坐标对具有相同第一个条目的元素。有没有一种快速简便的方法来做到这一点？

就目前而言，我正在考虑做类似的事情

```
[x for x in list if ... ] 
```

我通过修复`x[k][0]`并遍历列表并将每个`x[i][0]`与变化`i`的进行比较`x[k][0]`，然后遍历所有这些`k`。我觉得必须有更好的方法来做到这一点。希望我在这个问题上足够清楚，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T20:53:17.983

你可以使用

```
def throw_out_elements(iterable):
    for x in iterable:
       if len(set(y for y, _ in x)) == len(x):
            yield x 
```

然后使用这个：

```
S = set([((3, 2), (2, 1)),
            ((3, 2), (3, 1)),
            ((3, 1), (2, 1)), 
            ((2, 1), (1,3), (2, 3))])
print list(throw_out_elements(S))

output: [((3, 2), (2, 1)), ((3, 1), (2, 1))] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T20:55:01.470

这可以通过一个简单的[集合理解](http://www.youtube.com/watch?v=pShL9DCSIUw)和一个​​简单的函数很容易地完成：

```
def no_duplicates(x):
    seen = set()
    return not any(i in seen or seen.add(i) for i in x)

data = {((3, 2), (2, 1)),
        ((3, 2), (3, 1)),
        ((3, 1), (2, 1)),
        ((2, 1), (1,3), (2, 3))}

print({item for item in data if no_duplicates(first for first, _ in item)}) 
```

生产：

```
{((3, 2), (2, 1)), 
 ((3, 1), (2, 1))} 
```

如果项目中每对的第一个元素是唯一的，我们将获取每个项目。我们使用简单的`no_duplicates()`函数（从[这个很好的答案](https://stackoverflow.com/a/5281641/722121)中提取）来做到这一点，它会按照它在锡上所说的那样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T20:58:32.657

如果您对单个列表理解死心塌地，则以下内容将起作用。

```
my_list = set([((3, 2), (2, 1)),
        ((3, 2), (3, 1)),
        ((3, 1), (2, 1)),
        ((2, 1), (1,3), (2, 3))])

[x for x in my_list if len(set([y[0] for y in x])) == len(x)] 
```

编辑：第一个答案是错误的，因为我误读了这个问题。

# java - java.lang.Runtime 是报告整个 Coldfusion 服务器的内存使用情况还是只报告一页？

> ID：14046043
> 
> 赞同：9
> 
> 时间：2012-12-26T20:43:11.720
> 
> 标签：java, memory, coldfusion

我正在使用以下 ColdFusion 代码计算已用内存。

```
 runtime = CreateObject("java", "java.lang.Runtime").getRuntime(); 
```

然后在一个循环中，我执行以下操作来计算使用的内存。

```
var usedGB = (runtime.totalMemory() - runtime.freeMemory()) / 1024.^3; // bytes -> KB -> MB -> GB 
```

这告诉我从我的页面开始就使用了将近 200 MB。这是 CF 服务器使用了多少，还是只是我的页面的一些开销？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T21:08:59.810

运行时为您提供已分配的堆数量。这包括对象和 TLAB，因此实际使用的内存量略低于此。这是整个 JVM 使用的数量，包括 ColdFusion 服务器或您正在运行的任何其他应用程序或库。无法跟踪单个页面或线程的使用量，并且内存不是页面或线程的本地内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:12:39.667

两者都`totalMemory`报告`freeMemory`JVM 的使用情况——我希望它是 CF 服务器（除非你也在同一个 JVM 中运行其他东西）。当然还有任何 JVM 开销。

# php - 水平和垂直滚动定位的 URL

> ID：14046046
> 
> 赞同：0
> 
> 时间：2012-12-26T20:43:48.880
> 
> 标签：php, html, css

我试图创建一个链接，女巫一次进入两个 div。例如，我喜欢去#item4，然后直接去#item4_section10。

这是一个例子：

```
<a href="index3.php?category=manage_team_teacher2.php&id_team=<?= $row['id_team'];?>#item4#item4_section10">manage</a> 
```

id为#item4的div是水平的，id为item4_section10的div是垂直的。如果我直接进入 item4_section10 这会破坏我页面的样式。

我是新人，我需要你的帮助.. 非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:49:58.813

你需要制作你的锚点`display: block`，然后你可以给它一个高度和宽度，并根据你的意愿在其中设置你的 div`float`样式`inline-block`。

# javascript - 按钮下拉链接在移动设备上不起作用（Android、iOS）

> ID：14046049
> 
> 赞同：1
> 
> 时间：2012-12-26T20:43:54.763
> 
> 标签：javascript, ios, ipad, drop-down-menu, twitter-bootstrap

[https://github.com/twitter/bootstrap/issues/4550](https://github.com/twitter/bootstrap/issues/4550)

这个问题说它是固定的；我上传了 bootstrap.js 2.2.2 还是不行。

是否需要编写其他代码或文件？

下拉菜单在 iPad 上不起作用。

我看到了以前的 Stack Overflow 问题和解决方法。但由于这个问题应该在 2.2.2 中修复，我不想添加不必要的代码。

# android - 如何在 Android 中的 ListView 项的底部添加一个简单的条形图？

> ID：14046055
> 
> 赞同：1
> 
> 时间：2012-12-26T20:44:29.597
> 
> 标签：android, listview, dynamic, graph, progress

我正在使用自定义 XML 布局 listview_goal_item.xml 来表示我希望我的 ListView 项目如何显示。此 XML 布局按如下方式提供给适配器：

```
cursor_adapter_goals = new SimpleCursorAdapter(this,
            R.layout.listview_goal_item,
            matrix_cursor_goals, listview_fields, listview_columns); 
```

一切都很好，我可以很容易地理解如何在 listview_fields（我的值的字符串数组）和 listview_columns（我的自定义 ListView 布局中的目标小部件的字符串数组）中显示所有信息，因为这些项目之间存在直接的固定关系。

我想为 ListView 中的每个目标项显示一个固定的“进度”条形图。这个条形图将是一个简单的可视化表示用户基于他们实现目标的百分比，75% 意味着条形图将占据 ListView 宽度的 3/4，50% 1/2 宽度等。这是我感到困惑的地方。

我应该如何处理这个？我应该创建某种动态 9 补丁图像吗？我是否应该创建一个简单的表格，其中的行在黑色表格背景上使用对比色动态调整大小？

如果您能以编程方式和所需的 XML 将我推向正确的方向，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:51:56.043

**在项目**布局的底部添加一个 ProgressBar ，这是我用来作为列表视图项目的整个背景的一个（作为 FrameLayout 的一个元素，另一个元素是与列表项其余部分的布局，文本视图等）：

```
 <ProgressBar
        android:id="@+id/progressBar"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_margin="0dp"
        android:padding="0dp"
        android:progressDrawable="@drawable/progress_timer" /> 
```

`layout_*`根据您的需要更改等。

注意使用的drawable。引用的可绘制对象只是一个图层列表，其中包含`id`进度条可绘制对象所需的项目。另请注意，背景设置为透明：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
<item
    android:id="@android:id/background"
    android:drawable="@android:color/transparent"/>
<item android:id="@android:id/secondaryProgress">
    <scale
        android:drawable="@color/..."
        android:scaleWidth="100%" />
</item>
<item android:id="@android:id/progress">
    <scale
        android:drawable="@color/..."
        android:scaleWidth="100%" />
</item>
</layer-list> 
```

在您的代码中，您只需将其视为任何 ProgressBar：

```
ProgressBar progressBar = (ProgressBar) convertView.findViewById(R.id.progressBar); 
```

更新时：

```
progressBar.setMax(100); //100 for example for percent
progressBar.setProgress(20); //20% done 
```

# delphi - 来自 Windows 的文件打印反馈

> ID：14046060
> 
> 赞同：4
> 
> 时间：2012-12-26T20:44:42.937
> 
> 标签：delphi

我正在尝试使用在 Delphi 2007 中使用 shellExecute 启动的一些 Pdf 阅读器打印几个 PDF 文件。

这种方法的可靠性可能不是很好，因为实际打印可能由于多种原因而失败。我想知道我的程序是否有办法知道文件是否或何时实际发送到打印后台处理程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T21:40:59.220

要监视打印机作业，您可以使用传入参数的[`FindFirstPrinterChangeNotification`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162722%28v=vs.85%29.aspx)API 调用。这将让您知道每次作业数据通过.`PRINTER_CHANGE_WRITE_JOB``fdwFilter`[`FindNextPrinterChangeNotification`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162723%28v=vs.85%29.aspx)

完成后，不要忘记调用[`FindClosePrinterChangeNotification`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162721%28v=vs.85%29.aspx)关闭所有手柄并进行清理。

使用会变得相当复杂。[TeamB](http://www.teamb.com)的Peter below 博士在一个名为`PBPrintersMonitorU.pas`. 如果您有[EDN](http://edn.embarcadero.com)（Embarcadero 开发者网络）帐户，您可以在[此处](http://cc.embarcadero.com/item/20307)找到它。

# c# - 从 SQL 服务器更新数据网格 - 更新过程不起作用

> ID：14046061
> 
> 赞同：2
> 
> 时间：2012-12-26T20:44:54.183
> 
> 标签：c#, sql, winforms, data-binding, datagrid

我有一个 SQL 服务器，我想以我的应用程序的主要形式显示它。我遵循了一些指南，并成功尝试在 dataGrid 和 SQL 服务器表之间进行链接。

问题是当我想更新数据网格并再次从 SQL 服务器同步/重新加载表时。

`updateDatadrid()`我有一个事件处理程序，每次在数据库中添加/编辑行时都会调用一个函数。

当我第一次启动应用程序时，我正在调用此函数并且它正在工作，但之后如果我再次使用该处理程序调用它，我会遇到一些错误。

> 跨线程操作无效：控件''从创建它的线程以外的线程访问。

函数外（全局变量）：

```
SqlConnection sConDataGrid; 
DataSet dbDataSet;
SqlDataAdapter da;
BindingSource dbBind;
string sqlCommand;

EDIT - I forgot to add :
DataGridView _dbView; 
```

这是我的代码：

```
private void updateDataGrid()
{
        using (sConDataGrid = new SqlConnection("Data Source=" + SettingsForm.getAddress + ";Initial Catalog=" + SettingsForm.getDatabase + ";Integrated Security=False;User Id=" + SettingsForm.getUser + ";Password=" + SettingsForm.getPassword + ";Connect Timeout=0;"))
        {
            sConDataGrid.Open();
            sqlCommand = "select top 200 * FROM cstPackages order by _dateTime desc"; //reading the db from end to start   
            using (da = new SqlDataAdapter(sqlCommand, sConDataGrid))
            {
                da.Fill(dbDataSet, "cstPackages");
                    dbBind = new BindingSource(dbDataSet, "cstPackages");
                    _dbView.DataSource = dbBind;
                sConDataGrid.Close();
            }
        }
} 
```

我尝试使用它，仅在`da.Fill()`我第一次调用此函数后调用该函数，但它没有刷新数据网格。我试图在再次填充之前清除数据集，但它使程序崩溃。我试着去做，`_dbView.Refresh()`但它没有那么好..

**编辑** 我不明白，为什么如果我制作一个按钮，然后放置“click”事件处理程序，并且我正在从这个事件处理程序调用我的函数 - 它正在工作！如果我从`SerialPort` `dataReceived`事件处理程序调用这个函数 - 我得到这个错误！有什么不同？我想也许我没有以正确的方式创建事件处理程序，所以我只是`SerialPort`从设计器中拖动了一个控件并双击事件，同样的事情发生了。

我尝试制作一个计时器，将其置于启用状态并在函数结束时调用它`stop()`，并在接收到的串行中将其设置为`start()`但我在`SerialPort`处理程序中所做的一切就像“在”程序之外。它不会启动计时器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:50:11.707

**已解决** 阅读此内容后：http: [//msdn.microsoft.com/en-us/library/ms171728%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms171728%28VS.80%29.aspx) 我尝试使用 Invokes，它成功了！

```
new code:
        delegate void SetDataGridCallback();

        private void updateDataGrid()
        {
            if (this._dbView.InvokeRequired)
            {
                SetDataGridCallback d = new SetDataGridCallback(updateDataGrid);
                this.Invoke(d, new object[] {  });
            }
            else
            {
                using (sCon2 = new SqlConnection("Data Source=" + SettingsForm.getAddress + ";Initial Catalog=" + SettingsForm.getDatabase + ";Integrated Security=False;User Id=" + SettingsForm.getUser + ";Password=" + SettingsForm.getPassword + ";Connect Timeout=0;"))
                {
                    sCon2.Open();
                    string sqlCommand = "select top 200 * FROM cstPackages order by _dateTime desc"; //reading the db from end to start   
                    using (da = new SqlDataAdapter(sqlCommand, sCon2))
                    {
                        dbDataSet.Clear();
                        da.Fill(dbDataSet, "cstPackages");
                        BindingSource dbBind = new BindingSource(dbDataSet, "cstPackages");
                        _dbView.DataSource = dbBind;
                        _dbView.Refresh();
                         sCon2.Close();
                    }
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T00:06:06.477

试试这个 ：

```
 private void fill_grid()
    {

        SqlCommand cmd = new SqlCommand();
        cmd.CommandText = "Your sql command ";

        cmd.Parameters.Add("@param", SqlDbType.VarChar).Value = your_control.Text;

        cmd.CommandType = CommandType.Text;
        cmd.Connection = this.sqlConnection1;
        this.sqlConnection1.Open();

        SqlDataAdapter adpt = new SqlDataAdapter(cmd);
        DataSet ds = new DataSet();
        adpt.Fill(ds);

        your_grid.DataSource = ds;

        this.sqlConnection1.Close();

        this.your_grid.DataBind();

    } 
```

然后，您所要做的就是在需要“刷新”网格时调用此方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T03:49:26.047

我想很多原因。一：你的缓存不清除二：你的电脑工作缓慢thd：你的刷新不是真的刷新。四：可能有时间延迟

首先你在数据库中做你的“select sql”，确保你真的提交了两个你可以写一个 backgroundword 让你的 pragram 时间刷新。或制作一个按钮来刷新。thd 使您的操作重新打开。

# model - Phalcon\Mvc\Model::findFirst((int) $id) 是什么？

> ID：14046073
> 
> 赞同：0
> 
> 时间：2012-12-26T20:46:23.573
> 
> 标签：model, phalcon

它是通过主键获取实体..还是仅从具有指定编号的表中获取实体？

如果我喜欢

```
$model = new Phalcon\Mvc\Model();
$model->findFirst('id = 1'); 
```

天气晴朗。但如果我定义

```
$model->findFirst(1); 
```

它应该返回什么？主键=“1”的实体还是表中的第一个实体？我之所以问，是因为我在团队的代码方法中发现了诸如

```
class BaseModel extends \Phalcon\Mvc\Model
{
     public function getById($id) { /* ... */ }
} 
```

我不确定我们是否真的需要它们。

第二个问题 - 如果我们执行 findFirst($int)，它通过主键返回实体，它是否正确转义？

PS根据[https://github.com/phalcon/cphalcon/issues/265](https://github.com/phalcon/cphalcon/issues/265)它应该通过主键返回实体，对吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T18:23:59.337

如果您只将一个整数传递给 findFirst 方法，它将检查映射模型是否只有一个主键字段，然后它将执行如下查询：

```
Products::findFirst(1); //SELECT * FROM products WHERE id = 1 
```

与以下内容相同：

```
Products::findFirst("id = 1"); 
```

(int) 参数仅在第一个参数是整数有效值时才有效，使用外部数据执行此操作的安全方法是：

```
Products::findFirst([
    "id = ?0",
    "bind" => [$externalId]
]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-12T01:25:18.427

findFirst(55) 将返回主键的第一个找到的字段等于 55 的第一条记录。虽然我认为这不是一个好主意，但当您有 2 个或更多字段作为主键时可以使用它，因为它增加了 LIMIT 1到实际查询，因为使用 find(55) 没有。

与我曾经相信的相反，它不使用主键索引顺序来“选择”要使用的第一个字段。它使用在表中找到字段的顺序。

所以如果你有一张桌子：

```
CREATE TABLE `T` (
    `A` TINYINT(1) NOT NULL,
    `B` VARCHAR(50) NOT NULL,
    PRIMARY KEY (`A`, `B`)
); 
```

findFirst(66) 将产生这个查询：

```
SELECT ... WHERE `T`.`B` = 66 LIMIT 1 
```

如果要确认，请使用事件管理器记录确切的查询。（[http://docs.phalconphp.com/en/latest/reference/events.html#usage-example](http://docs.phalconphp.com/en/latest/reference/events.html#usage-example)）

findFirst($var) 也不会转义 $var，所以如果以某种方式 $var = "55 OR 1=1" 实际查询将是： SELECT (...) WHERE 55 OR 1 = 1 LIMIT 1

# entity-framework - 具有缓存的数据对象存储库

> ID：14046074
> 
> 赞同：0
> 
> 时间：2012-12-26T20:46:28.457
> 
> 标签：entity-framework, repository

我想在 EntityFramework 之上实现一个通用存储库。目的是将 DBContext 与客户端分离，并为存储库实现附加逻辑以管理对象的来源（缓存、数据库）。

*   标记实体以进行缓存的能力（通过注释、流畅的 API 或只是将其添加到列表中）
*   在第一次请求时缓存的对象
*   如果更改并重新加载到缓存中，则要更新（或标记为脏）的对象

问：我确定这一定是以前做过的，但是我无法找到好的博客或缓存存储库的示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:13:01.960

如果您想拥有 **一些缓存**==> EF 缓存（上下文）==> 源 A。
**相同的缓存**==> 提供程序 X ==> 源 B。

然后一个选项是作为**企业库**一部分的 MS 提供的工具。 **应用缓存块**

它允许您以不同的模式操作具有不同功能的缓存，以供企业使用。 [http://msdn.microsoft.com/en-us/library/ff664753%28v=pandp.50%29.aspx](http://msdn.microsoft.com/en-us/library/ff664753%28v=pandp.50%29.aspx) （从 2011 年 5 月开始的版本 5）

# sorting - 外部排序 - 特定案例的合并问题

> ID：14046076
> 
> 赞同：1
> 
> 时间：2012-12-26T20:46:35.820
> 
> 标签：sorting, file-structure, external-sorting

我已经了解外部排序的作用，它的用途；但是我有一个关于合并极端情况的问题。

[外部排序](https://stackoverflow.com/questions/5100252/external-sorting) 第一个答案解释了外部排序合并的工作原理。但如果：

> 假设我们有 10 个单位的内存大小，我们想要对 50 个单位的文件进行排序
> 
> 首先，我们将文件分成 5 个运行（每个运行 10 个单元）并单独排序
> 
> 其次，我们必须将它们与 4-way merge 合并
> 
> 和 10/4 = 2.5 ~ 2; 我们从每次运行中取出 2 个单元（块），将它们放入内存并开始合并；
> 
> 那么实际的问题是：如果（假设）第三次运行的第二和第三块有
> 
> 比其他运行的第一块更小的元素？合并过程会成功吗？

如果我对我的理解有错误，任何解释都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T15:21:56.543

好吧，在任何文件中都有更小/更大的元素是没有问题的。以下是外部排序过程的示例：

您的初始数据：

```
data = [2, 5, 3, 7, 1, 6, 4, 8, 9] 
```

考虑到您只有 3 个内存单元，您将拥有以下分片和排序结果：

```
d1 = [2, 5, 3] -> sorting -> d1 = [2, 3, 5]
d2 = [7, 1, 6] -> sorting -> d2 = [1, 6, 7]
d3 = [4, 8, 9] -> sorting -> d3 = [4, 8, 9] 
```

由于您有三个可用单元，您可以同时读取三个分片，因此，您将拥有：

```
d = [], d1 = [2, 3, 5], d2 = [1, 6, 7], d3 = [4, 8, 9] -> min(d1, d2, d3) = 1
d = [1], d1 = [2, 3, 5], d2 = [6, 7], d3 = [4, 8, 9] -> min(d1, d2, d3) = 2
d = [1, 2], d1 = [3, 5], d2 = [6, 7], d3 = [4, 8, 9] -> min(d1, d2, d3) = 3
d = [1, 2, 3], d1 = [5], d2 = [6, 7], d3 = [4, 8, 9] -> min(d1, d2, d3) = 4
d = [1, 2, 3, 4], d1 = [5], d2 = [6, 7], d3 = [8, 9] -> min(d1, d2, d3) = 5
d = [1, 2, 3, 4, 5], d1 = [], d2 = [6, 7], d3 = [8, 9] -> min(d1, d2, d3) = 6
d = [1, 2, 3, 4, 5, 6], d1 = [], d2 = [7], d3 = [8, 9] -> min(d1, d2, d3) = 7
d = [1, 2, 3, 4, 5, 6, 7], d1 = [], d2 = [], d3 = [8, 9] -> min(d1, d2, d3) = 8
d = [1, 2, 3, 4, 5, 6, 7, 8], d1 = [], d2 = [], d3 = [9] -> min(d1, d2, d3) = 9
d = [1, 2, 3, 4, 5, 6, 7, 8, 9], d1 = [], d2 = [], d3 = [] -> [] 
```

您可能担心的是，当您有足够的限制以使您不能从每个文件中读取至少一个元素时，或者即使决定只是从给定文件中读取更多元素，而留下另一个要读取的文件。

这与上面的过程相同，唯一的区别是，在读取两个文件并合并它们之间的数据之后，您必须从第三个文件**和**最后一个生成的文件中读取，即合并文件 1 和 2。

由于第三个文件和最后一个生成的文件**肯定**都已排序，因此您可以顺序扫描两个文件中的数据，将条目合并为一个唯一的结果。

# javascript - 如何以毫秒为单位将日期转换为iso格式的javascript？

> ID：14046080
> 
> 赞同：7
> 
> 时间：2012-12-26T20:46:55.873
> 
> 标签：javascript

> **可能重复：**
> [如何在 Javascript 中输出 ISO-8601 格式的字符串？](https://stackoverflow.com/questions/2573521/how-do-i-output-an-iso-8601-formatted-string-in-javascript)

如果我有一个以毫秒为单位表示日期的整数，将其转换为 iso 格式的语法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-26T20:50:27.607

查看[`Date`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)对象：

```
new Date(ms).toISOString() 
```

请注意，此方法在较旧的浏览器中可能不可用，但您可以为它们[填充它](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toISOString#Compatibility)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:49:16.390

```
new Date(value); 
```

[从这里开始](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)，其中值表示自 1970 年以来的毫秒数。然后您可以 在 yr 日期对象上调用[toISOString 。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toISOString)

# html - 文字后的图像

> ID：14046087
> 
> 赞同：4
> 
> 时间：2012-12-26T20:47:22.387
> 
> 标签：html, css

我想要一个在此文本之后具有 witdh 75 和高度 100 的图像：

```
<b>Het boek</b><br>
<p>Boek nummer: 1 <br>
Aantal punten: 6 <br>
Aantal bladzijden: 400 </p> 
```

有人能帮我吗？我知道我可能必须在它周围放一个 div，但我不知道 css。顺便说一句，图像将使用 img 标签出现在页面上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T20:50:35.353

尝试这个

```
<div style="float:left;">
your text or any other thing
</div>
<div style="float:left;">
<img src="somewhere"/>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:52:18.887

这是一个简单的页面，这是您要找的吗？

```
 <html>
  <body>
  <b>Het boek</b><br>
  <p>Boek nummer: 1 <br>
  Aantal punten: 6 <br>
  Aantal bladzijden: 400 </p>
  <img alt="Show this text when the mouse is over the image." height="75" width="100" src="test.jpg">
  </body>
  </html> 
```

“当鼠标悬停在图像上时显示此文本。” 可以更改为您想要的一些文本，或者可以完全删除 alt 属性。高度和宽度属性将强制您想要的尺寸。src 属性需要指向图像的位置。图片可以是任何 HTML 支持的图片类型，它不需要是 jpg。它可以是 jpg、png、gif 等。

关于标签和其他 HTML 资源的更多信息可以在这里找到： http: [//www.w3schools.com/tags/tag_img.asp](http://www.w3schools.com/tags/tag_img.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T20:55:18.980

尝试这个：

```
<img src="URL_IMAGE" style="margin: 5px 0px 5px 5px; float: left; " /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T21:00:59.337

这应该做你需要的：http: [//jsfiddle.net/Wexcode/emRNK/](http://jsfiddle.net/Wexcode/emRNK/)

```
<img src="http://placehold.it/75x100">
<div>
    <h1>Het boek</h1>
    <ul>
        <li>Boek nummer: 1</li>
        <li>Aantal punten: 6</li>
        <li>Aantal bladzijden: 400</li>
    </ul>
</div> 
```

这是一篇关于浮动的好文章：[http ://reference.sitepoint.com/css/float](http://reference.sitepoint.com/css/float)

这就是我包含`overflow: hidden`在`<div>`元素中的原因（请注意，如果删除它，填充将不起作用）：[http ://colinaarts.com/articles/the-magic-of-overflow-hidden/#making-room-for-floats](http://colinaarts.com/articles/the-magic-of-overflow-hidden/#making-room-for-floats)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-17T01:10:15.260

我知道这个问题已经有 8 年历史了，但如果你像我一样需要帮助，这就是你在 HTML5 上的做法：

```
<p><img src="source" alt="Example" style="float:right;width: 75px;height:100px;">Just put your paragraph here</p> 
```

很容易 ：）

在这里，只需寻找“图像浮动”以获得更好的解释
[https://www.w3schools.com/html/html_images.asp](https://www.w3schools.com/html/html_images.asp)

# jakarta-ee - 在小型 java ee 应用程序中使用 2 级缓存

> ID：14046095
> 
> 赞同：0
> 
> 时间：2012-12-26T20:48:08.707
> 
> 标签：jakarta-ee, caching

我正在开发一个库存应用程序，该应用程序将通过使用来自大约 20 个用户的 java ee 6 在 Intranet 中使用。在这种情况下我真的需要二级缓存吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:49:43.463

没有足够的信息来回答这个问题。但是任何时候你都可以提高性能。您的应用程序可能会增长，您将需要缓存。此外，缓存的使用在很大程度上取决于实现空间与时间的权衡。更多空间 = 更少时间，反之亦然。考虑以下场景：

如果不缓存系统上的每个查询，则需要 1 秒。使用缓存每个查询需要 0.5 秒，但构建/刷新缓存的时间是 20 分钟

在某些时候，缓存是无用的。数学要遵循。假设必须每小时重建缓存以提高性能，则每小时查询数必须超过每秒 80 次查询才能达到收支平衡。

```
20 minutes for the cache (60*20)  
.5 seconds per query (2 per second) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:13:11.977

使用二级缓存来加速某些 JPA 操作可以为您的应用程序带来有趣的性能提升，并且在我所知道的情况下，它几乎是零努力的配置项。但是，它会引入一些非常烦人的副作用：

*   如果您的应用程序作为多个可部署项（ear's、war's）加载，通常这些部署的应用程序中的每一个都将具有自己的二级缓存。结果是在一个应用程序中完成的更新不会立即反映在其他应用程序中，它们将继续使用其缓存但现在已过时的数据副本。
*   如果您的应用程序不是完全使用 JPA 构建的，同样的问题也会发生。

这就是为什么对经常修改的数据不应该使用二级缓存的原因。

# html - 使用 VBScript 的网页中的计时器

> ID：14046098
> 
> 赞同：0
> 
> 时间：2012-12-26T20:48:38.573
> 
> 标签：html, vbscript, hta

vbs 文件称为 Main.vbs。现在我将它嵌入到 .html 文件中，如下所示：

```
 <HTML>
<HEAD>
<script type="text/vbscript">
  sub main
    const runminimized = 7
    const wait_for_end = false
    Set wshShell = CreateObject("WScript.Shell")
    WshShell.Run "D:\VA\Main.vbs",runminimized, wait_for_end
  end sub
</script>
</HEAD>
<BODY>
  Please make sure that the reuired Excel sheet which you are giving me to process isn in the proper folder. And first sheet has all the required columns - missing any of them could leads the Scripts to be failed.
  <button onclick="vbscript:main" >Click here to Run</button>
</BODY>
</HTML> 
```

我想设置一个计时器，它将在页面上运行直到所有脚本结束。可以在这里设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:14:59.930

我在之前的回答中犯了一个小错误，如果要等待脚本结束，wait_for_end 的值必须为 True，因此不需要计时器。后处理可以放在 WshShell.Run 之后。如果你需要一个 web 脚本中的计时器，你可以使用 Window.setTimeout，来自 vbscript 的睡眠将不起作用。有关详细信息，请参阅[http://www.w3schools.com/jsref/met_win_settimeout.asp](http://www.w3schools.com/jsref/met_win_settimeout.asp)。

你在上面的脚本中自己犯了一个错误，如果你的脚本被称为test，你的按钮事件必须是vbscript:test，或者你必须将sub重命名为main

如果它是您需要的进度条，在 vbscript 中实现起来并不容易，我见过的最好的例子是这里[http://www.northatlantawebdesign.com/index.php/2009/07/16/simple-vbscript-进度条/](http://www.northatlantawebdesign.com/index.php/2009/07/16/simple-vbscript-progress-bar/)

但是，如果您不知道提前花费的时间，那么准确地显示您的脚本如何进行并不容易，通常您应该将您的流程分成几部分并在每个步骤中更新栏。

# mysql - Magento 更新脚本出现问题，如果使用撇号，则运行 MySQL 查询错误 101 连接重置？

> ID：14046101
> 
> 赞同：0
> 
> 时间：2012-12-26T20:49:11.940
> 
> 标签：mysql, zend-framework, magento, pdo, sql-injection

总的来说，我对 Magento 和 PHP 还是很陌生，因为我现在只使用了大约一个月（我是一名软件工程实习生）。我有一个问题，其他全职开发人员和我自己现在都很难过。

本质上，我正在编写一个更新脚本来更改一些 CMS 静态页面的内容。虽然我无法提供确切的示例，但我的脚本基本上如下所示：

```
$installer = $this;
$installer->startSetup();
$htmlVariable = (html for static page goes here);
$sqlQuery = 'UPDATE cms_page SET content="'.$htmlVariable.'" WHERE identifier ="pageNameHere"';

$installer->run(sqlQuery); 
```

我发现这适用于非常简单的页面，但我发现如果我在创建的 $htmlVariable 中包含以下 p 块：

```
<p>
What if I can't call toll free from the country I live in? <br/> 
Feel free to send e-mail to 
to place your order and they will advise you about the extra fees.
</p> 
```

我收到连接重置错误。如果我从“不能”中删除撇号，则查询很好。如果我在 html 变量中包含以下内容，我也会收到错误：

```
<a href='mailto:info@example.com'><span>info@example.com</span></a> 
```

但是，以下也包含撇号的代码很好：

```
<h3 id='ca_shipping'>Page</h3> 
```

如果 htmlVariable 超过 2000 个字符左右，也会发生同样的事情。

我很困惑，因为我从 MySQL Workbench 执行了完全相同的查询，并且它们运行良好，没有任何问题。我还在 Magento 的 .htaccess 文件中启用了错误消息，但除了 Web 浏览器中的通用连接重置错误之外，我没有收到任何错误。

我唯一的猜测是 MySQL 可能正在捕获撇号并退出以防止 SQL 注入。

我希望有人对为什么会发生这种情况有一些意见或想法，在此先感谢您。

# html - 如何让 div 填充固定宽度 div 左右的水平空间

> ID：14046104
> 
> 赞同：0
> 
> 时间：2012-12-26T20:49:20.687
> 
> 标签：html, css

我有 3 个 div: `divLeft`，`divCenter`并且`divRight`我想`divCenter`以 1200px 的宽度居中。左侧和右侧应具有流体宽度以填充到屏幕边缘。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T21:28:54.510

这是一个纯 CSS 解决方案：http: [//jsfiddle.net/Wexcode/BGU7V/](http://jsfiddle.net/Wexcode/BGU7V/)

您可能希望将其与[Faux Columns](http://www.alistapart.com/articles/fauxcolumns/)结合使用。

```
.divCenter { 
    width: 1200px;
    margin: 0 auto; }
.divCenter p { 
    position: absolute;
    top: 0;
    width: 1200px; }​

.divLeft { float: left; width: 50%; }
.divLeft p { margin: 0 600px 0 0; }

.divRight { float: right; width: 50%; }
.divRight p { margin: 0 0 0 600px; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T21:03:04.353

如果这些边距必须包含内容，我建议使用 javascript，如果它们是空格，则使用 margin-left: auto; 右边距：自动。

对于 jQuery，这样的事情可能适用于页面加载/调整大小：

```
<div class="marginClass" id="divLeft"></div>
<div id="divCenter"></div>
<div class="marginClass" id="divRight"></div>
$(".marginClass").css("width", ( $(window).width() - $("#divCenter").width() / 2 ) + "px"); 
```

祝你好运

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-26T21:08:57.317

我能想到的最简单的解决方案是使用`calc()`函数：

```
.center,
.side {
  float: left;
}

.center {
  width: 1200px;
}

.side {
  width: -webkit-calc((100% - 1200px) / 2));
  width: calc((100% - 1200px) / 2));
}​ 
```

# repository - 存储库、服务层和查询对象

> ID：14046108
> 
> 赞同：2
> 
> 时间：2012-12-26T20:50:08.160
> 
> 标签：repository, n-tier-architecture, service-layer

我正在尝试使用 asp.net mvc 应用程序中的存储库和服务层来实现 N 层架构。一个服务对象可以拥有多个存储库，以使用相同的工作单元收集它需要的所有数据。控制器只调用服务对象，对存储库一无所知。

存储库示例：

```
public class UsersRepository : IUsersRepository
{
     public IEnumerable<User> GetUsers(UsersQuery query)
     {
        ...
     }
} 
```

UsersQuery 对象封装了几个用于查询用户的选项，例如：

```
public class UsersQuery
{
    public bool IncludeDeleted { get; set; }
    public Expression<Func<User, object>> OrderBy { get; set; }
    //Ans so on...
} 
```

例如，我应该如何将动态 OrderBy 子句（和其他选项）传递给我的存储库？当然，可以只通过服务传递 Query 对象，但在我看来这不是真正的方式，因为会产生开销并违反 DRY 原则。

有什么建议么？提前致谢。

# opengl - glewinit() 显然成功，无论如何设置错误标志

> ID：14046111
> 
> 赞同：1
> 
> 时间：2012-12-26T20:50:32.020
> 
> 标签：opengl, opencl, glew

我最近从 Windows 迁移到 Linux（Debian，64 位）并试图启动并运行 GPGPU 开发环境，所以我正在测试一个在 Windows 下工作的程序。

编译和链接都很好，但是当我运行程序时，我得到了一些奇怪的错误。我正在使用 glew 和 freeglut。

**第一个片段：仅 OpenGL**

```
i = 1;
info = PROGRAM_NAME;
glutInitContextVersion(4,2);
glutInit(&i, &info);
glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGBA);
glutInitWindowSize(W_SIZEX, W_SIZEY);
glutInitWindowPosition(W_POSX, W_POSY);
glutCreateWindow(info);
glClearColor(1.0,1.0,1.0,0);
/**/
printf("Before glewInit: %i\n", glGetError());
/**/    
printf("glewInit returns: %i\n", glewInit());
/**/
printf("After glewInit: %i\n", glGetError());
/**/ 
```

我从中得到以下输出：

```
Before glewInit: 0
glewInit returns: 0
After glewInit: 1280 
```

这是一个无效的枚举错误。我不知道是什么原因造成的，但我怀疑它可能与我得到的下一个错误有关，稍后在程序执行中。

**第二个片段：OpenCL-OpenGL 互操作**

```
/* BUFFERS */
(*BFR).C[0] = clCreateBuffer(*CTX, CL_MEM_READ_WRITE, SD, 0, 0);
(*BFR).C[1] = clCreateBuffer(*CTX, CL_MEM_READ_WRITE, SD, 0, &i);
dcl(i);

glGenBuffers(2, (*BFR).G);

glBindBuffer(GL_ARRAY_BUFFER, (*BFR).G[0]);
glBufferData(GL_ARRAY_BUFFER, SI, 0, GL_DYNAMIC_DRAW);
(*BFR).D[0] = clCreateFromGLBuffer(*CTX, CL_MEM_WRITE_ONLY, (*BFR).G[0], &i);
dcl(i);
glBindBuffer(GL_ARRAY_BUFFER, 0); 
```

在这里，dcl(int) 方法只是解码 CL 错误代码。当我运行它时，我从 clCreateFromGLBuffer() 收到一个 CL_INVALID_GL_OBJECT 错误。但是，OpenGL 在生成、绑定或取消绑定相关缓冲区时没有问题。OpenCL 上下文显然是有效的，在创建或查询时不会产生错误。在 Windows 7 64 位的 VS2010 中一切正常。

**编译细节**

以下是相关的包括：

```
/* OPENGL */
#include "GL/glew.h"
#include "GL/freeglut.h"

/* OPENCL */
#include "CL/cl.h"
#include "CL/cl_gl.h" 
```

我正在使用 GCC 并像这样链接：

```
gcc -w -I./include CLGL.c -o ~/Templates/GOL-CLGL/run/a.out -lGLEW -lGLU -lglut -lGL -lOpenCL; 
```

编译和链接不会导致错误（大量关于指针滥用的警告，但我怀疑这是罪魁祸首）。

我目前不知道如何调试它。谁能建议进一步的步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:06:40.767

我最近也遇到了这个问题，所以这里是答案：

[OpenGL：调用 glewInit() 后 glGetError() 返回无效枚举](https://stackoverflow.com/questions/10857335/opengl-glgeterror-returns-invalid-enum-after-call-to-glewinit)

所以你可以丢弃那个错误。

# python - 使用原始输入创建 os.path.join

> ID：14046119
> 
> 赞同：0
> 
> 时间：2012-12-26T20:51:25.980
> 
> 标签：python, rename, raw-input

我想使用 raw_input 重命名文件。但是当我更改它时，它会为新名称提供文件类型的正确结尾。所以我尝试加入is，但它不起作用。帮助表示赞赏！

```
import os
Base_TXT =r"C:\file.txt"
rename = raw_input('Would you like to rename the txt?')
if rename == 'yes':
    new_name = raw_input('What is the new name?')
    os.rename(Base_TXT, new_name)
    os.path.join(new_name, '.txt')

else:
    print "no rename made"

print "done" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:18:34.697

如果您使用的文件始终是“.txt”，则简单的解决方案。

```
os.rename(Base_TXT, new_name + ".txt") 
```

其他事情：如果您不希望在脚本运行文件夹中重命名文件（您希望在原地重命名），则需要更好地构建目标。

```
if rename == 'yes':
    new_name = raw_input('What is the new name?')

    dir_name = os.path.dirname(Base_TXT)

    destination = os.path.join(dir_name, new_name + ".txt")

    os.rename(Base_TXT, destination) 
```

# c# - 将 listView.SelectedIndices 转换为 List

> ID：14046120
> 
> 赞同：6
> 
> 时间：2012-12-26T20:51:26.810
> 
> 标签：c#, listview, casting

有什么办法可以投到`listView.SelectedIndices`吗`List<int>`？
我试过这个

```
(List<int>)reListViewAllMovies.SelectedIndices.Cast<List<int>>() 
```

但它不起作用（InvalidCastException）。
如果解决方案不存在，是否有任何“单行”解决方案，例如使用 lambda 表达式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-05T20:45:31.080

老问题，但我自己正在寻找解决方案。.NET v4.5。我不知道该框架的早期版本。

```
var list = myListView.SelectedIndices.Cast<int>().ToList(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T20:54:38.403

```
reListViewAllMovies.SelectedIndices.Select(i => (int)i).ToList(); 
```

或者，您可以使用`foreach`循环来转换结果：

```
var newList = new List<int>();
foreach(int i in reListViewAllMovies.SelectedIndices)
{
    newList.Add(i);
} 
```

# git - github在使用pull命令时锁定了mac终端

> ID：14046122
> 
> 赞同：97
> 
> 时间：2012-12-26T20:51:37.030
> 
> 标签：git, github, terminal

我正在mac（命令行）上学习github，每当我这样做时，我都会`git pull origin master`得到这个

```
# Please enter a commit message to explain why this merge is necessary,
# especially if it merges an updated upstream into a topic branch.
#
# Lines starting with '#' will be ignored, and an empty message aborts
# the commit.
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
~                                                                               
".git/MERGE_MSG" 7L, 293C 
```

终端似乎被锁定并且不允许我立即输入任何内容，然后当它最终允许我输入文本时，它似乎无法识别 git 命令。

这是 git 中的错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：230
> 
> 时间：2012-12-26T20:57:02.937

你在文本编辑器中，vim！它是一个*模态*文本编辑器，因此您需要：

1.  按`i`进入*插入模式*。
2.  现在您可以键入您的消息，就像您在普通（非模态）文本编辑器中一样。
3.  按下`esc`返回*命令模式*。
4.  然后键入`:w`后跟`enter`保存。
5.  最后`:q`跟着`enter`退出了。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-01-20T08:47:20.113

让它变得简单。

类型`:wq`和`enter`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-16T12:53:07.017

更简单的是先后 `ESC` 后`:` `x`（小写）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-12T19:53:24.877

根据您的描述，编辑器看起来像*vim 。*这个控制台只是告诉你为你想要的提交写一些消息，它是强制性的。

*   只需键入`i`，您就会进入该`-- INTER --`模式，现在您可以写下您的评论了。

*   写完后，按`esc`键盘上的键，您将进入命令模式。（*见控制台底部*）

*   现在通过写入`:w`然后`enter`按键来保存更改

[![编写 <code>:w</code> 命令](../Images/3d381fb8b632d9409a20c69622613bba.png)](https://i.stack.imgur.com/KhFqt.png)

*   您现在可以通过写字`:q`然后按`enter`键退出

[![编写 <code>:q</code> 命令](../Images/52b110f932d4845ee33b467f03983cae.png)](https://i.stack.imgur.com/50SsD.png)

*   欢呼！最后你回到主控制台。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-14T10:44:23.573

运行此命令

```
git config --global core.editor "gedit" 
```

在此文件中添加您的消息并保存。现在回去拉。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-13T10:24:19.363

我通过执行以下步骤解决了这个问题

1.  删除**#MERGE_MSG#**

    `rm .git/\#MERGE_MSG#`

2.  删除**MERGE_HEAD**

    `rm .git/MERGE_HEAD`

另外，我明确地将 git 的编辑器设置为我熟悉*vim*的编辑器（你可以设置*nano*）

```
`git config --global core.editor "vim"` 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-18T13:57:11.760

你可以做 `git checkout --merge yourbranch`

当前分支、您的工作树内容和新分支之间的三向合并已完成，您将位于新分支上。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-28T10:18:32.617

当我们拼错某些东西时，通常会出现问题。
您更有可能对这个命令感兴趣：

```
git commit -m "message" 
```

如果有问题，它可能会说类似

```
Your branch and 'origin/master' have diverged,
and have 2 and 1 different commits each, respectively.
  (use "git pull" to merge the remote branch into yours) 
```

并使用：

```
git pull 
```

这应该导致：

```
Already up-to-date. 
```

然后最好检查一下：

```
git status 
```

并尝试再次推动：

```
git push 
```

# lucene - 了解 Lucene 语法

> ID：14046125
> 
> 赞同：0
> 
> 时间：2012-12-26T20:51:50.213
> 
> 标签：lucene

做这个 ...

```
+(content:#b content:#a +content:#c) 
```

意思是 ...

```
where content includes #b AND #a OR content includes #c? 
```

我通读了[Query Parsing Syntax](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html#Grouping)，但仍然不确定我的问题的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:31:18.543

不，不是这个意思。首先，外层 + 是隐含的。不会返回不匹配的结果。因此，在没有任何其他术语的情况下，该查询与

```
content:#b content:#a +content:#c 
```

或：必须匹配内容：#c，以及可选的内容：#b 和/或内容：#a

您提供的等效含义是：

```
(+content:#a +content:#b) content:#c 
```

# iphone - UIPasteboard 粘贴板应用程序 iOS iPhone

> ID：14046130
> 
> 赞同：0
> 
> 时间：2012-12-26T20:52:43.907
> 
> 标签：iphone, ios, cocoa-touch, uipasteboard

我期待为 iPhone 开发一个粘贴板应用程序。

问题是：我怎么知道什么时候被复制了？我知道我可以访问`UIPasteboard`generalPasteboard 属性。

但是我什么时候需要更新`UITableView`显示内容的（示例）？是否有通知发送到`NSNotificationCenter`我可以观察到的？还要别的吗？什么时候重新加载数据`viewDidAppear`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T21:01:17.980

您可以注册到`UIPasteboardChangedNotification`通知（[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIPasteboard_Class/Reference.html#//apple_ref/doc/uid/TP40008243-CH1-SW10)）。每次粘贴板的内容更改时都会调用它。

# ember.js - 如何从新的路由器对象中获取 ember 数据存储实例？

> ID：14046133
> 
> 赞同：1
> 
> 时间：2012-12-26T20:53:01.567
> 
> 标签：ember.js, ember-data

我正在将现有应用程序移植到新的路由器 api，但找不到有人进入路由器并抓取应用程序商店以查询数据的示例。

这是我的旧路由器

```
CodeCamp.Router = Ember.Router.extend({
  root: Ember.Route.extend({
    index: Ember.Route.extend({
      route: '/',
      connectOutlets: function(router, context) {
        router.get('applicationController').connectOutlet('sessions', router.get('store').findAll(CodeCamp.Session));
      }
    })
  })
}); 
```

这是我的新路由器的开始，但“router.get('store')”不喜欢路由器这个词，关键字“this”也返回未定义。

```
CodeCamp.Router.map(function(match) {
      match("/").to("sessions");
});

CodeCamp.SessionsRoute = Ember.Route.extend({
    renderTemplates: function() {
        this.render('sessions');
    },                                                                                                             
    setupControllers: function() {
        this.set('controller.content', this.get('store').findAll(CodeCamp.Session));
    }
}); 
```

**更新**

我可以让它与以下一起工作（它看起来很丑，我更喜欢另一种方式）

```
setupControllers: function() {
  this.set('controller.content', CodeCamp.Session.all().get('store').findAll(CodeCamp.Session));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:16:25.053

只需使用`CodeCamp.Session.find()`;)

# sql - 根据一列中的唯一值查找重复项

> ID：14046134
> 
> 赞同：-1
> 
> 时间：2012-12-26T20:53:03.547
> 
> 标签：sql

我正在寻找以下解决方案：

表 T 有 X、Y 和 Z 列。X、Y 和 Z 列之间有多个重复项，但跨列不存在。我需要查询表 T 以查找 Z 列中值为 V 的所有行，然后使用该行的 X 列和 Y 列来查找重复项。

我想在 Z 列中搜索所有带有 R 的行，并返回具有该结果的重复 X 和 Y 的任何行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:15:24.403

```
SELECT X,Y,Count(Z)
FROM T
WHERE Z=@R
HAVING Count(Z)>1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:55:46.073

要查找所有重复项：

```
select x, y, count(*)
from mytable
where z = ?
group by x, y
having count(*) > 1 
```

# asp.net - asp.net web 表单默认模板的部分类命名

> ID：14046143
> 
> 赞同：3
> 
> 时间：2012-12-26T20:53:52.580
> 
> 标签：asp.net

我公司有visual studio asp.net 网站项目。使用默认 Web 表单模板添加新 Web 表单时，它将使用您选择的路径和文件名自动创建带有部分类名的代码文件。例如，如果您向路径 User/Feature/ 添加了一个名为 Default.aspx 的新 Web 表单，则部分类名称将为 User_Feature_Default。这工作正常。问题（可能不是问题）当然是如果你移动这些文件，它不会更新部分类名。说得通。Visual Studio 只会做这么多的调整。我的问题是，当文件被移动到新文件夹中时，我们的开发组是否应该更新这些部分类名，主要是为了保持一致性？这会导致任何其他问题吗？我什么都想不出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T22:30:41.947

如果有可能在这些位置添加具有相同名称的新 .aspx 页面，我建议重命名。过去我遇到过复制+粘贴文件以从模板开始的问题。文件名更改，但类名和 .aspx Inherits 属性保持不变。

因为代码隐藏页面是部分类，它会很高兴地让您添加多个类。但我认为这些最终会被编译成一个单页类，如果你的加载/初始化逻辑应该只在其中一个页面上触发，或者你有同名的函数，这可能会导致问题。

# javascript - 静态 D3 力有向图性能

> ID：14046145
> 
> 赞同：4
> 
> 时间：2012-12-26T20:54:01.633
> 
> 标签：javascript, performance, d3.js, force-layout

所以目前我正在尝试创建一个由几千个节点和大约 30k 个链接组成的力导向图。正如您可能猜到的那样，模拟非常非常慢。我想做的是预先计算节点的所有位置，然后只渲染一个静态（但交互式）图。有没有办法使用 d3.js 计算力导向图而不渲染它（使其更快），然后只从预先计算的值渲染静态图？我的代码目前基于 Mike Bostock 的[示例。](http://bl.ocks.org/4062045)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T13:20:43.873

d3 用于力有向图布局的方法是标准的排斥力和吸引力模型，您可以在维基百科上找到伪代码（http://en.wikipedia.org/wiki/Force-based_algorithms_%28graph_drawing%29#Pseudocode）或查看 d3 源本身 (https://github.com/mbostock/d3/blob/master/src/layout/force.js)。

该算法每个滴答声（或时间片）的复杂度为 O(n^2)，大约需要 n 个滴答声才能达到平衡，因此整个布局过程的复杂度为 O(n^3)（http://www.ecs.umass .edu/ece/labs/vlsicad/ece665/presentations/Force-Directed-Adel.ppt）。对于数千个节点，这是不切实际的。

* * *

要尝试回答您的具体问题，只需在您的 SVG 容器元素上使用 CSS, display: none 即可。一旦初始模拟“最终”完成，您就可以获取 SVG 元素的 HTML 源代码，并将其用作静态但交互式表示的基础。（一旦您拥有所有元素的 html，您只需将鼠标悬停事件添加到它们上即可让它们显示其详细信息。

# javascript - 当单元格相同时制作行跨度

> ID：14046146
> 
> 赞同：4
> 
> 时间：2012-12-26T20:54:05.277
> 
> 标签：javascript, jquery, css, html-table

我有这样的表：

![在此处输入图像描述](../Images/3d84e058d1e64a6342adf2b75dd38591.png)

当单元格的内容相同时，我想要列“模型”中的行跨度。

该表具有过滤功能，这使得“固定” colspan 不是解决方案。

我发现了同样的问题：
[https](https://codereview.stackexchange.com/questions/6363/spanning-table-cells-automatically-between-same-value-cells)
://codereview.stackexchange.com/questions/6363/spanning-table-cells-automatically-between-same-value-cells 但遗憾的是对我不起作用。

非常好的示例也在这里：
[https](https://stackoverflow.com/a/1294964/1861097) : //stackoverflow.com/a/1294964/1861097 但仅适用于 colspan。

对于排序和过滤，我使用[http://datatables.net](http://datatables.net)

表可以在这里找到：http: [//ipt.czechbattlefield.info](http://ipt.czechbattlefield.info)（切换到附件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-24T22:00:25.697

我写了一个关于如何使用 jquery 对任何表进行行跨度的示例。

**请注意，代码仅在 1 个假设下有效：您希望行跨度的列已排序**

[您可以在 Codepen 上使用它](http://codepen.io/ji_in_coding/pen/YGgwdG?editors=1010) （尝试编辑 indexOfColumnToRowSpan）

JS：

```
$(function(){

  //assumption: the column that you wish to rowspan is sorted.

  //this is where you put in your settings
  var indexOfColumnToRowSpan = 0;
  var $table = $('#myTable');

  //this is the code to do spanning, should work for any table
  var rowSpanMap = {};
  $table.find('tr').each(function(){
    var valueOfTheSpannableCell = $($(this).children('td')[indexOfColumnToRowSpan]).text();
    $($(this).children('td')[indexOfColumnToRowSpan]).attr('data-original-value', valueOfTheSpannableCell);
    rowSpanMap[valueOfTheSpannableCell] = true;
  });

  for(var rowGroup in rowSpanMap){
    var $cellsToSpan = $('td[data-original-value="'+rowGroup+'"]');
    var numberOfRowsToSpan = $cellsToSpan.length;
    $cellsToSpan.each(function(index){
      if(index==0){
        $(this).attr('rowspan', numberOfRowsToSpan);
      }else{
        $(this).hide();
      }
    });
  }

})(); 
```

html:

```
<table  id="myTable">
 <tbody>
   <tr>
     <th align="left">A</th>
     <th align="left">B</th>
     <th align="left">C</th>
     <th align="left">D</th> 
   </tr>
   <tr>
     <td>Apple</td>
     <td>x</td>
     <td>y</td>
     <td>z</td>
   </tr>
   <tr>
     <td>Apple</td>
     <td>x</td>
     <td>y</td>
     <td>z</td>
   </tr>
   <tr>
     <td>Apple</td>
     <td>x</td>
     <td>y</td>
     <td>z</td>
   </tr>
   <tr>
     <td>Apple</td>
     <td>x</td>
     <td>y</td>
     <td>z</td>
   </tr>
   <tr>
     <td>Apple</td>
     <td>x</td>
     <td>y</td>
     <td>z</td>
   </tr>
   <tr>
     <td>Pear</td>
     <td>x</td>
     <td>y</td>
     <td>z</td>
   </tr>
   <tr>
     <td>Pear</td>
     <td>x</td>
     <td>y</td>
     <td>z</td>
   </tr>
   <tr>
     <td>Pear</td>
     <td>x</td>
     <td>y</td>
     <td>z</td>
   </tr>
   <tr>
     <td>Orange</td>
     <td>x</td>
     <td>y</td>
     <td>z</td>
   </tr>
   <tr>
     <td>Orange</td>
     <td>x</td>
     <td>y</td>
     <td>z</td>
   </tr>
   <tr>
     <td>Orange</td>
     <td>x</td>
     <td>y</td>
     <td>z</td>
   </tr>
   <tr>
     <td>Orange</td>
     <td>x</td>
     <td>y</td>
     <td>z</td>
   </tr>
   <tr>
     <td>Orange</td>
     <td>x</td>
     <td>y</td>
     <td>z</td>
   </tr>
   <tr>
     <td>Orange</td>
     <td>x</td>
     <td>y</td>
     <td>z</td>
   </tr>

</tbody>
</table> 
```

# php - 使用之前是否必须检查 $_SERVER 变量中是否存在“REQUEST_METHOD”？

> ID：14046148
> 
> 赞同：6
> 
> 时间：2012-12-26T20:54:12.447
> 
> 标签：php

在实际使用之前我是否必须检查`$_SERVER`变量是否有键？`REQUEST_METHOD``$_SERVER['REQUEST_METHOD']`

也就是说，*总是*检查数组变量中是否存在键是否过于防御`$_SERVER`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T20:59:57.223

由于您无法真正保证任何 PHP 数组将具有哪些键，因此您应该始终检查它们。这并不过分防御，对你来说是一种很好的做法。

为了其他有类似问题的读者，您通常会在以下三种检查数组的方法中进行选择：

```
array_key_exists("REQUEST_METHOD", $_SERVER) 
```

或者

```
isset($_SERVER['REQUEST_METHOD']) 
```

否则你应该用@来逃避警告：

```
$someVar = @$_SERVER['REQUEST_METHOD']; 
```

绝对不推荐最后一个选项，因为它往往会隐藏问题，所以我会坚持检查任何数组（甚至是全局 PHP 数组）上是否存在键的做法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T21:00:09.117

PHP 手册中关于 $_SERVER 变量[的内容如下：](http://php.net/manual/en/reserved.variables.server.php)

> 无法保证每个 Web 服务器都会提供其中任何一个；服务器可能会省略一些，或提供此处未列出的其他内容。也就是说，在 » CGI/1.1 规范中包含了大量这些变量，因此您应该能够预料到这些变量。

[CGI/1.1 规范](http://www.faqs.org/rfcs/rfc3875.html)有以下说法：

> REQUEST_METHOD 元变量必须设置为
> 脚本应该用来处理请求的方法，如
> 4.3 节所述。

和

> 在 REQUEST_METHOD 元变量中提供的请求方法标识了脚本在
> 产生响应时要应用的处理方法。脚本作者可以选择实现
> 最适合特定应用程序的方法。如果
> 脚本接收到一个不支持它的方法的请求，应该以错误拒绝它（参见第 6.3.3 节）。

如果您不进行任何 CLI 开发并且脚本只会从像 Apache 这样的服务器运行，则可能没有必要检查它的存在性。为了安全起见，您可能可以这样做，但这没有必要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T21:06:36.920

如果您的脚本对 in 的值感兴趣，`REQUEST_METHOD`那么它可能是从 Web 浏览器而不是 CLI 运行的，所以在这种情况下，我不会费心去做`isset()`检查。`REQUEST_METHOD`除非从 CLI 运行，否则将始终存在，因为根据 HTTP 的定义，浏览器无法在没有请求方法的情况下请求页面。

# python - 从文件中复制“级别”

> ID：14046158
> 
> 赞同：0
> 
> 时间：2012-12-26T20:55:08.467
> 
> 标签：python

我需要编写一个函数来读取文件并在一个单元格中列出游戏的每个级别。每个单元格都包含该级别的行作为字符串，并且每一行都是单元格的一个元素。最后的单元格应该没有出现在级别之前的数字或单词，并且没有“\n”或空单元格。我实现了这个功能，但对于看起来像这样的关卡，它并不能很好地工作。有人知道吗？

文件级别

```
; 1

####
# .#
#  ###
#*@  #
#  $ #
#  ###
#### 
```

作为列表中的单元格：

```
['####', '# .#', '#  ###', '#*@  #', '#  $ #', '#  ###', '####'] 
```

我遇到问题的级别示例：

```
; 154 'Take the long way home.'

 ############################
 #                          #
 # ######################## #
 # #                      # #
 # # #################### # #
 # # #                  # # #
 # # # ################ # # #
 # # # #              # # # #
 # # # # ############ # # # #
 # # # # #            # # # #
 # # # # # ############ # # #
 # # # # #              # # #
 # # # # ################ # #
 # # # #                  # #
##$# # #################### #
#. @ #                      #
############################# 
```

看起来像这样：

```
["54 'Take the long way home.'", '', ' ############################', ' #                          #', ' # ######################## #', ' # #                      # #', ' # # #################### # #', ' # # #                  # # #', ' # # # ################ # # #', ' # # # #              # # # #', ' # # # # ############ # # # #', ' # # # # #            # # # #', ' # # # # # ############ # # #', ' # # # # #              # # #', ' # # # # ################ # #', ' # # # #                  # #', '##$# # #################### #', '#. @ #                      #', '#############################'] 
```

我的代码：

```
def loader(filename):

    tmp=[]
    levels=[]
    f=open(filename, "r")
    f=f.read().split(';')
    for line in f:
        tmp.append(line[2:].strip())
    tmp.remove("")
    for i in tmp:
        i=i.split("\n")
        levels.append(i)
    print levels 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:25:59.550

很难准确地遵循您要完成的任务，但我认为此功能将为您提供所需的内容。

```
def loader(filename):
    f = open(filename, 'r')
    lines = f.read().split('\n')
    header = lines[0] # don't know if you need this
    level = lines[2:]
    f.close()
    return level 
```

编辑：哦，我没有意识到每个文件有多个级别。

那么这个怎么样：

```
def loader(filename):
    f = open(filename, 'r')
    levels = f.read().split(';')[1:]
    return [level.strip().split('\n')[2:] for level in levels] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:38:25.457

```
def loader(filename):

    tmp=[]
    levels=[]
    f=open(filename, "r")
    f=f.read().split(';')
    for i in f[1:]:
        i=i.split("\n")
        levels.append(i[2:-1])
    print levels 
```

对我来说很好：

测试输入.txt：

```
; 1

####
# .#
#  ###
#*@  #
#  $ #
#  ###
####
; 154 'Take the long way home.'

 ############################
 #                          #
 # ######################## #
 # #                      # #
 # # #################### # #
 # # #                  # # #
 # # # ################ # # #
 # # # #              # # # #
 # # # # ############ # # # #
 # # # # #            # # # #
 # # # # # ############ # # #
 # # # # #              # # #
 # # # # ################ # #
 # # # #                  # #
##$# # #################### #
#. @ #                      #
############################# 
```

输出：

```
[['####', '# .#', '#  ###', '#*@  #', '#  $ #', '#  ###', '####'], [' ############################', ' #                          #', ' # ######################## #', ' # #                      # #', ' # # #################### # #', ' # # #                  # # #', ' # # # ################ # # #', ' # # # #              # # # #', ' # # # # ############ # # # #', ' # # # # #            # # # #', ' # # # # # ############ # # #', ' # # # # #              # # #', ' # # # # ################ # #', ' # # # #                  # #', '##$# # #################### #', '#. @ #                      #', '#############################']] 
```

# algorithm - 查找最低共同祖先代码说明

> ID：14046161
> 
> 赞同：0
> 
> 时间：2012-12-26T20:55:28.653
> 
> 标签：algorithm

我正在查看 Programming Interviews Exposed 中的以下代码，我似乎无法理解它是如何工作的。这个方法不会总是返回null吗？

```
// Overload it to handle nodes as well
Node findLowestCommonAncestor( Node root, Node child1,
                               Node child2 ){
    if( root == null || child1 == null || child2 == null ){
        return null;
    }

    return findLowestCommonAncestor( root, child1.getValue(),
                                     child2.getValue() );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T22:53:36.033

从代码片段中，我们真的不知道 getValue 返回什么。因此，如果存在 findLowestCommonAncestor 的其他重载版本，并且 getValue 返回 Node 以外的其他内容，则代码段中对 findLowestCommonAncestor 的调用不会递归调用自身。

# python - 检测 python 程序/函数/方法可以引发的异常

> ID：14046162
> 
> 赞同：3
> 
> 时间：2012-12-26T20:55:33.700
> 
> 标签：python, exception

有没有办法“检测”什么异常函数/方法引发？举例：

```
def foo():
    print 'inside foo, next calling bar()'
    _bar()
    _baz()
    # lots of other methods calls which raise other legitimate exceptions

def _bar():
    raise my_exceptions.NotFound

def _baz():
    raise my_exceptions.BadRequest 
```

所以，假设 foo 是我的 API 的一部分并且我需要记录它，有没有办法获取可以从中引发的所有异常？

需要明确的是，我不想处理这些异常，它们应该会发生（例如，当找不到资源或请求格式错误时）。

我正在考虑创建一些工具，将代码序列转换为“内联”的东西，例如：

```
def foo():
    print 'inside foo, next calling bar()'
    # what _bar() does
    raise my_exceptions.NotFound
    # what _baz() does
    raise my_exceptions.BadRequest
    # lots of other methods calls which raise other legitimate exceptions 
```

有什么可以帮助我检测而不是浏览每个方法调用吗？（深入到几个文件中。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T21:05:18.697

由于以下几个原因，您无法使用 Python 合理地执行此操作：

1) Python 原语没有准确记录它们可以抛出的异常。Python 的精神是任何东西都可以随时抛出任何异常。

2) Python 的动态特性使得静态分析代码变得非常困难，几乎不可能知道代码“可能”做什么。

3) 各种不感兴趣的异常都必须在列表中，例如，如果你有`self.foo`，那么它*可能会*引发 AttributeError。需要非常复杂的分析器才能确定它`foo`一定存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T21:03:16.417

不，因为 Python 的动态特性。如果一个函数采用了在运行时选择的另一个函数（非常常见），或者如果代码后来被猴子补丁，你的工具将如何工作？

根本没有办法提前知道（在足够多的情况下它是有用的），解释器将通过静态分析做什么。您实际上必须运行解释器并查看会发生什么，这当然可以在运行之间改变......

# python - 数组在python中按比例调整大小

> ID：14046163
> 
> 赞同：-8
> 
> 时间：2012-12-26T20:55:35.813
> 
> 标签：python, arrays, resize

我如何在 python 中按比例调整数组的大小，例如：

原来的：

```
1 0
0 1 
```

调整大小：

```
1 1 0 0
1 1 0 0
0 0 1 1
0 0 1 1 
```

* * *

代码：

```
original = []

row1 = [1,0]
row2 = [0,1]

original.append(row1)
original.append(row2)

#how resize? 
```

多谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T21:08:22.290

如果你真的想用 Python 列表做到这一点：

```
SCALE_MULTIPLE = 2  # or any positive integer
new_array = []
for orig_row in original:
    new_row = []
    for orig_elem in orig_row:
        new_row.extend([orig_elem] * SCALE_MULTIPLE)
    new_array.extend(new_row[:] for _ in range(SCALE_MULTIPLE)) 
```

# arduino - Arduino 的气温将略有下降

> ID：14046173
> 
> 赞同：1
> 
> 时间：2012-12-26T20:56:38.970
> 
> 标签：arduino

我正在使用带有[TMP36的](http://www.analog.com/en/mems-sensors/digital-temperature-sensors/tmp36/products/product.html)[Arduino Due](http://arduino.cc/en/Main/ArduinoBoardDue)（用于读取温度）。这是我将读数转换为°F的公式：

```
tempReading = analogRead(tempPin);
voltage = tempReading * 5.0; // Saves the voltage
voltage /= 1024.0; 
tempC = (voltage - 0.5) * 100 ; //Converts to Celsius
tempF = (tempC * 9.0 / 5.0) + 32; //Converts to Fahrenheit 
```

在连续剧中，我的 Arduino 打印出 90-100°F 的温度，而我的房子设置为大约 70°F。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T06:37:02.130

来自[http://arduino.cc/en/Main/ArduinoBoardDue](http://arduino.cc/en/Main/ArduinoBoardDue)：

“与其他 Arduino 板不同，Arduino Due 板在 3.3V 下运行。I/O 引脚可以承受的最大电压为 3.3V。向 I/O 引脚提供更高的电压，如 5V 可能会损坏板。”

所以很可能你不应该乘以`tempreading`5，而是乘以 3.3。

# python - S3 存储桶策略阻止 boto 设置缓存标头

> ID：14046174
> 
> 赞同：0
> 
> 时间：2012-12-26T20:56:46.200
> 
> 标签：python, amazon-s3, boto

我开发了一个 Python 脚本，使用该`boto`库将文件上传到我的 S3 存储桶。使用该`Key.set_contents_from_filename`方法上传文件时，我指定`Cache-Control`和`Expires`标头以启用适当的浏览器缓存。这一切都很好，文件出现在我的存储桶中，并在元数据字段中设置了正确的标题。

为了防止我的文件被盗链接，我在 S3 中添加了以下存储桶策略：

```
{
    "Version": "2008-10-17",
    "Id": "MySite",
    "Statement": [
        {
            "Sid": "Deny access if not specified referrer",
            "Effect": "Deny",
            "Principal": "*",
            "Action": "s3:GetObject",
            "Resource": "arn:aws:s3:::mybucket/*",
            "Condition": {
                "StringNotLike": {
                    "aws:Referer": [
                        "http://www.mysite.com/*",
                        "http://mysite.com/*"
                    ]
                }
            }
        }
    ]
} 
```

此策略可防止盗链，但现在当我使用 boto 上传文件时，`Cache-Control`并`Expires`没有设置和标头。删除存储桶策略可以解决问题，因此我显然没有正确指定存储桶策略。

关于如何修改我的存储桶策略以允许使用 boto 上传元数据字段同时仍防止盗链的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T09:22:05.913

我自己没有测试过标题。但也许问题出在Referer 标头上。我建议您添加此策略，允许使用Referer 获取和放置对象到您的存储桶。

```
{
"Version": "2008-10-17",
"Statement": [
    {
        "Sid": "AllowFromReferer",
        "Effect": "Allow",
        "Principal": {
            "AWS": "arn:aws:iam::745684876799:user/IAM_USER"
        },
        "Action": "s3:*",
        "Resource": "arn:aws:s3:::BUCKET_NAME/*",
        "Condition": {
            "StringLike": {
                "aws:Referer": [
                    "http://mysite.com/*",
                    "http://www.mysite.com/*"
                ]
            }
        }
    }
]
} 
```

如果失败，您可以假设问题出在Referer。只使用 * 作为推荐人，如果它工作正常，那么这绝对是您的推荐人问题。

# windows - Directx 11.1 中的新等效于 D3DXCOLOR 结构？

> ID：14046179
> 
> 赞同：4
> 
> 时间：2012-12-26T20:57:20.300
> 
> 标签：windows, sdk, directx

我无法找到该`D3DXCOLOR`结构，它似乎不再存在于 DirectX 11.1 ( `d3d11_1.h`) 中。我一直在寻找它的平等，但没有运气。有人可以帮我吗？如果它发生了很大变化，你能告诉我如何使用它吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T16:18:27.483

我对此完全是个菜鸟，我也遇到了他们使用它的示例教程的问题。因此，经过数小时的网络搜索。鼓乐多田....

这是我在代码中转换它的方式

旧代码

```
// clear the back buffer to a deep blue
 devcon->ClearRenderTargetView(backbuffer, D3DXCOLOR{ 0.0f, 0.2f, 0.4f, 1.0f }; 
```

新代码

```
// clear the back buffer to a deep blue
float color[4] = { 0.0f, 0.2f, 0.4f, 1.0f };
devcon->ClearRenderTargetView(backbuffer, color); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-11T12:38:42.450

使用 XMCOLOR。它位于 DirectXPackedVector.h

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-30T23:33:09.970

声明一次怎么样

```
using RGBA = float[4]; //c++11 
```

或者

```
typedef float RGBA[4]; //pre-c++11 
```

然后像这样在需要的地方使用

```
devcon->ClearRenderTargetView(backbuffer, RGBA{0.0f, 0.2f, 0.4f, 1.0f}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-11T07:47:55.580

D3DX 或 DirectX 实用程序库已被删除，微软希望您使用 XNA 数学库对应物（使用 SSE 和东西，但在我的情况下，它有时会崩溃，所以我停止使用它）

# c# - 将文字控制从一页传递到另一页

> ID：14046181
> 
> 赞同：0
> 
> 时间：2012-12-26T20:57:52.370
> 
> 标签：c#, javascript, jquery, vb.net

我在 Page1 中有这个文字控制：

```
 string s1 = "<table>"
           + "<tr>"
           + "<td>AAA</td>"
           + "<td>AAA</td>"
           + "</tr>"
           + "<tr>"
           + "<td>BBB</td>"
           + "<td>BBB</td>"
           + "</tr>"
           + "</table>"
           + "<br />";

 string s2 = "<input type=\"button\" onclick=\"window.open('Page2.aspx','','Height=500,width=500')\" value=\"pop up\" />";

 LiteralControl lc = new LiteralControl(s1 + s2);
 Div1.Controls.Add(lc); 
```

如您所见，它是一个简单的 HTML 表格和按钮。
我要做的是单击按钮，弹出Page2.aspx，然后将不带按钮的文字控件（lc）添加到Page2.aspx（Div1）中的Div中。

我不能让它工作。
Page1 不得回发到服务器来完成此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:38:11.110

在页面之间传递数据的方式只有三种：

*   获取值

*   发布值

*   服务器变量（会话...等）

服务器变量是最灵活的解决方案，如果使用得当，不会对性能造成严重影响。但是你已经排除了这个选项。

POST 值是另一种选择。它们存储在表单内的 HiddenFields 中，但您需要提交表单才能使用它们。而且由于您使用的链接会打开一个弹出窗口，因此这不是一个好的解决方案。

这留下了 GET 值。它将值存储在 URL 的查询字符串中。这可行，*但*它的大小限制约为 8 KB。如果您可以将 HTML 的大小保持在该范围内，那么您需要做的是[Base64 编码](http://arcanecode.com/2007/03/21/encoding-strings-to-base64-in-c/)HTML（这不是加密它，它只是将它打包成一个整洁的字符串），使用编码的字符串作为URL（即“ `Page2.aspx?data=SomeString`”），然后在 Page2 中使用`Request.Params["data"]`Base64 解码它获取该值，并将该值放在本地 Literal 控件中。

但是，您的价值似乎远大于此。这样您就可以使用服务器变量，或者将您的 HTML 存储在某处并传递对它的引用。例如，您可以将生成的 HTML 保存在具有唯一标识符键的数据库中，然后将键传递给 Page2，Page2 将在数据库中查询实际的 HTML。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-26T21:04:41.167

这是一种**糟糕的编程方式**，您应该`.aspx`页面处理 HTML，而背后的代码部分处理数据。

例如，将数据（`DataTable`例如您的）添加到会话对象，或使用`GridView`您只需执行以下操作的控件：

```
myGridView.DataSource = dt;
myGridView.DataBind(); 
```

并且因为您正在重用相同的东西，所以您可以使用具有**的用户控件**`myGridView`。

这样，您就不会在代码处理页面上处理 HTML 格式，而是重用一个控件，如果明天发生任何事情，您可以轻松地只更改一个文件，并且所有具有该控件的位置都将被自动修改。

* * *

如果您仍然不太关心体面的编程规则，您可以将 Literal 控件添加到，例如，会话对象并在第二页上调用它：

```
LiteralControl lc = new LiteralControl(s1 + s2);

// Add control to a Session instance
Session["myLiteralControl"] = lc;

Div1.Controls.Add(lc); 
```

在您的其他页面中：

```
LiteralControl lc = (Literal)Session["myLiteralControl"];
Div1.Controls.Add(lc); 
```

# ios - ifndef，定义和直接分配常量

> ID：14046183
> 
> 赞同：1
> 
> 时间：2012-12-26T20:57:59.093
> 
> 标签：ios, objective-c, constants, c-preprocessor, ifndef

我只是在考虑以下方法之间的区别，同时定义常量：

**方法1：** 创建一个头文件来定义所有的常量，使用include guard：

```
#ifndef c1
#define c1 @"a123456789"
#endif 
```

然后将常量分配给函数：

```
Identity.number = c1; 
```

**方法2：** 只需简单地定义常量

```
#define c1 @"a123456789" 
```

然后将常量分配给函数：

```
Identity.number = c1; 
```

**方法3：** 不定义常量，给函数赋值即可：

```
Identity.number = @"a123456789"; 
```

以上有什么优缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:13:32.313

当您确保常量只定义一次时，第一种方法很重要。第三种方法不允许 IDE 帮助您进行自动完成，当常量的值更复杂时，这可能很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:11:22.287

**方法 1 和 2**对于较大的项目要好得多，因为您可以轻松地更改常量的值。 **方法 1**对于具有许多文件的非常大的项目可能特别有用，但对于较小的项目并不是必需的。

在**方法 3**中，您必须搜索每一行代码以找到要分配的值（如果您为其分配更多位置）。因此，我认为使用它是不好的。

# reporting-services - 连接报表服务中字段的不同行值

> ID：14046186
> 
> 赞同：1
> 
> 时间：2012-12-26T20:58:22.503
> 
> 标签：reporting-services

我在报告服务中有一个报告，我想连接以逗号分隔的列的所有不同值并将值放在文本框中。我知道我可以使用[此处](https://stackoverflow.com/questions/4670920/how-to-convert-a-recordset-to-a-delimited-string-in-sql-server/4671068#4671068)的答案之一在 SQL 中执行此操作。但如果可能的话，我宁愿不更改 sql 并在报告中进行。

示例：我有一个包含多个字段的数据集，其中一个是类别。假设值为“电话”、“服务”、“电话”、“附件”、“案例”、“案例”。我希望我的报告中的文本框以“附件、外壳、电话”的值结尾。

如果它有所作为，那就是 SSRS 2008 R2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T22:17:19.780

我想出了一个办法，虽然不是最优雅的解决方案。我添加了一个内部参数来获取所有可能类别的列表以及一个附加参数来消除重复项。我已按照[此处](http://blogs.msdn.com/b/sqlforum/archive/2011/04/28/walkthrough-how-to-get-distinct-values-of-a-column-of-a-sharepoint-list-using-sql-server-reporting-services.aspx)的步骤（从他们添加虚拟参数的部分开始）执行上述操作。

本质上，

1.  使用我想要的可用/选定值的数据集和字段创建一个多值参数。请务必在“常规”选项卡上标记为内部。
2.  [将链接](http://blogs.msdn.com/b/sqlforum/archive/2011/04/28/walkthrough-how-to-get-distinct-values-of-a-column-of-a-sharepoint-list-using-sql-server-reporting-services.aspx)中显示的 RemoveDuplicates 函数添加到报告属性中的代码选项卡
3.  创建第二个使用 RemoveDuplicates 函数的多值参数。同样，请务必标记为内部。

之后，我在第二个参数上使用了 Join 函数来创建逗号分隔列表。

# python - Python 中的 Battle-Lemarié 小波

> ID：14046194
> 
> 赞同：2
> 
> 时间：2012-12-26T20:59:37.380
> 
> 标签：python, fft, wavelet

作为项目的一部分，我必须用 Python 编写一个程序来表示 1 阶和 2 阶样条的缩放函数和 Battle-Lemarie 小波。对于 1 阶样条，我跟踪函数如下：

```
import numpy as np
import matplotlib.pyplot as plt

x=np.linspace(-1.5,1.5,1024)

def phi(x):
    p=[]
    for i in range(len(x)):
        if abs(x[i])<=1:
            p.append(1-abs(x[i]))
        else:
            p.append(0)
    return p

plt.plot(x,phi(x),'b',x,phi(2*x),'g',x,[elt/2\. for elt in phi(2*x+1)],'g',x,[elt/2\. for elt in phi(2*x-1)],'g')
plt.show() 
```

函数*phi*与其翻译不正交，它必须为函数*phi^#*改变，我们只知道由*phi_hat^# = sqrt(3) (2 * pi) ^ (-1/2) *(4定义的傅里叶变换sin^2(z/2)/( z ^ 2 (1 + 2 cos ^ 2 (z/2))*。要找到这个函数，我的代码如下：

```
def ftphidiese(x):
    ftphid=[]
    for i in range(len(x)):
        ftphid.append((np.sqrt(3.)*4.*(np.sin(x[i]/2.))**2)/(np.sqrt(2*np.pi)*(x[i]**2)*np.sqrt(1.+2.*(np.cos(x[i]/2.))**2)))
    return ftphid
phidiese=np.fft.fftshift(np.fft.ifft(np.fft.ifftshift(ftphidiese(x))))
plt.plot(x,phidiese)
plt.show() 
```

可惜结果不好，功能被“碾压”了。有人能帮我吗？

# r - R将函数作为变量传入

> ID：14046195
> 
> 赞同：13
> 
> 时间：2012-12-26T20:59:40.563
> 
> 标签：r, function, variables, arguments

我正在开发一个项目来分析函数输出，因此需要在 R 中将函数作为参数传递。为了澄清，我有不同数量的模型，并且不寻求设置模型的帮助，只是传递模型函数名称到评分函数中。

这适用于直接调用，但我想让它更通用以构建模块。这是一个简短的例子：

```
#create a test function:
model1 = function(y,X){
fit = lm(y~X)
output = data.frame(resid = fit$residuals)
}

#score function:
score = function(y,X,model){
y= as.matrix(y) 
X = as.matrix(X)
fitModel = model(y,X)
yhat = y - fitModel$residual
output = data.frame(yhat=yhat)
} 
```

我可以使用有效的 y 和 X 垫子调用此代码

```
df <- data.frame(x=rnorm(5),y=runif(5))
scoreModel1 = score(df$y,df$x,model1) 
```

但我正在寻找的是一种列出所有模型、循环和/或以通用方式调用 score 函数的方法。例如：

```
models = c("model1")
scoreModel1 = score(df$y,df$x,models[1]) 
```

我用上面的代码得到的错误是

```
Error in score(y, X, model) : 
could not find function "model" 
```

我玩过 as.function()，列出和取消列出 args，但没有任何效果。例如，以下所有参数都呈现与上述相同的错误

```
models = c(model1)
models = list(model1)
models = list("model1") 
```

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-26T21:34:23.383

您的列表对象可以直接成为函数。也许你可以从这个结构中得到一些用处，或者接受罗兰的建议并通过公式。Richiemorrisroe 的答案可能更干净。

```
fun1 <- function(x,y){
    x+y
}

fun2 <- function(x,y){
    x^y
}

fun3 <- function(x,y){
    x*y
}

models <- list(fun1 = fun1, fun2 = fun2, fun3 = fun3)

models[["fun1"]](1,2)
 [1] 3
models[[1]](1,2)
 [1] 3

lapply(models, function(FUN, x, y){ FUN(x = 1, y = 2)})
$fun1
 [1] 3

$fun2
 [1] 1

$fun3
 [1] 2 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2020-07-03T10:02:28.080

对于任何从谷歌来到这里想知道如何将函数作为参数传递的人，这里有一个很好的例子：

```
randomise <- function(f) f(runif(1e3))

randomise(mean)
#> [1] 0.5029048 

randomise(sum)
#> [1] 504.245 
```

它来自哈德利的书在[这里找到](http://adv-r.had.co.nz/Functionals.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-26T21:31:18.213

`match.fun`是你的朋友。这是`apply` `tapply`等人用于相同目的的东西。请注意，如果您需要将参数传递给模型拟合函数，那么您将需要将所有这些捆绑到一个函数中，`function(x) sum(x==0, na.rm=TRUE)`或者将它们作为列表提供并`do.call`像这样使用`do.call(myfunc, funcargs)`。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-09-27T01:10:35.430

另一个回应：

```
models = list(model1)
scoreModel1 = score(df$y,df$x,models[[1]]) 
```

将函数作为变量传递的示例：

```
f_add<- function(x,y){ x + y }
f_subtract<- function(x,y){ x - y }
f_multi<- function(x,y){ x * y }

operation<- function(FUN, x, y){ FUN(x , y)}

operation(f_add, 9,2)
#> [1] 11
operation(f_subtract, 17,5)
#> [1] 12
operation(f_multi,6,8)
#> [1] 48 
```

祝你好运

# c# - 在 C# 中以编程方式编译打字稿？

> ID：14046203
> 
> 赞同：20
> 
> 时间：2012-12-26T21:00:07.087
> 
> 标签：c#, compilation, typescript, tsc

我正在尝试用 C# 编写一个函数，该函数接受一个包含打字稿代码的字符串并返回一个包含 JavaScript 代码的字符串。有这个库函数吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-08T18:54:57.487

您可以使用`Process`来调用编译器，指定`--out file.js`到一个临时文件夹并读取编译文件的内容。

我做了一个小应用程序来做到这一点：

用法

```
TypeScriptCompiler.Compile(@"C:\tmp\test.ts"); 
```

要获得`JS string`

```
string javascriptSource = File.ReadAllText(@"C:\tmp\test.js"); 
```

带有示例和评论的完整源代码：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Linq;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            try
            {
                // compiles a TS file
                TypeScriptCompiler.Compile(@"C:\tmp\test.ts");

                // if no errors were found, read the contents of the compile file
                string javascriptSource = File.ReadAllText(@"C:\tmp\test.js");
            }
            catch (InvalidTypeScriptFileException ex)
            {
                // there was a compiler error, show the compiler output
                Console.WriteLine(ex.Message);
            }

            Console.ReadKey();
        }
    }

    public static class TypeScriptCompiler
    {
        // helper class to add parameters to the compiler
        public class Options
        {
            private static Options @default;
            public static Options Default
            {
                get
                {
                    if (@default == null)
                        @default = new Options();

                    return @default;
                }
            }

            public enum Version
            {
                ES5,
                ES3,
            }

            public bool EmitComments { get; set; }
            public bool GenerateDeclaration { get; set; }
            public bool GenerateSourceMaps { get; set; }
            public string OutPath { get; set; }
            public Version TargetVersion { get; set; }

            public Options() { }

            public Options(bool emitComments = false
                , bool generateDeclaration = false
                , bool generateSourceMaps = false
                , string outPath = null
                , Version targetVersion = Version.ES5)
            {
                EmitComments = emitComments;
                GenerateDeclaration = generateDeclaration;
                GenerateSourceMaps = generateSourceMaps;
                OutPath = outPath;
                TargetVersion = targetVersion;
            }
        }

        public static void Compile(string tsPath, Options options = null)
        {
            if (options == null)
                options = Options.Default;

            var d = new Dictionary<string,string>();

            if (options.EmitComments)
                d.Add("-c", null);

            if (options.GenerateDeclaration)
                d.Add("-d", null);

            if (options.GenerateSourceMaps)
                d.Add("--sourcemap", null);

            if (!String.IsNullOrEmpty(options.OutPath))
                d.Add("--out", options.OutPath);

            d.Add("--target", options.TargetVersion.ToString());

            // this will invoke `tsc` passing the TS path and other
            // parameters defined in Options parameter
            Process p = new Process();

            ProcessStartInfo psi = new ProcessStartInfo("tsc", tsPath + " " + String.Join(" ", d.Select(o => o.Key + " " + o.Value)));

            // run without showing console windows
            psi.CreateNoWindow = true;
            psi.UseShellExecute = false;

            // redirects the compiler error output, so we can read
            // and display errors if any
            psi.RedirectStandardError = true;

            p.StartInfo = psi;

            p.Start();

            // reads the error output
            var msg = p.StandardError.ReadToEnd();

            // make sure it finished executing before proceeding 
            p.WaitForExit();

            // if there were errors, throw an exception
            if (!String.IsNullOrEmpty(msg))
                throw new InvalidTypeScriptFileException(msg);
        }
    }

    public class InvalidTypeScriptFileException : Exception
    {
        public InvalidTypeScriptFileException() : base()
        {

        }
        public InvalidTypeScriptFileException(string message) : base(message)
        {

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T21:33:33.817

也许您可以使用 JavaScriptDotNet 之类的 JavaScript 解释[器](http://javascriptdotnet.codeplex.com/)从 C#运行 typescript 编译器[tsc.js。](http://typescript.codeplex.com/SourceControl/changeset/view/2bee84410e02#bin/tsc.js)

就像是：

```
string tscJs = File.ReadAllText("tsc.js");

using (var context = new JavascriptContext())
{
    // Some trivial typescript:
    var typescriptSource = "window.alert('hello world!');";
    context.SetParameter("typescriptSource", typescriptSource);
    context.SetParameter("result", "");

    // Build some js to execute:
    string script = tscJs + @"
result = TypeScript.compile(""typescriptSource"")";

    // Execute the js
    context.Run(script);

    // Retrieve the result (which should be the compiled JS)
    var js = context.GetParameter("result");
    Assert.AreEqual(typescriptSource, js);
} 
```

显然，该代码需要一些认真的工作。如果这*确实*可行，我当然会对结果感兴趣。

您可能还想进行修改`tsc`，以便它可以对内存中的字符串进行操作，而不是需要文件 IO。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T22:52:32.793

TypeScript 编译器文件在 node.js 或 Windows Script Host 上正式运行——它是用 TypeScript 本身编写的（并转译为 JavaScript）。它需要一个可以访问文件系统的脚本主机。

因此，本质上，您可以从任何语言运行 TypeScript，只要您可以将其包装在支持所需文件系统操作的脚本引擎中。

如果您想纯粹在 C# 中将 TypeScript 编译为 JavaScript，您最终将编写编译器的 C# 克隆。

# php - 从 mysql 中选择收藏夹并显示它们？

> ID：14046207
> 
> 赞同：1
> 
> 时间：2012-12-26T21:00:14.060
> 
> 标签：php, mysql

我在 php 中设置了一个基本的收藏脚本，用于存储用户最喜欢的用户。

所以用户a可以收藏用户b，反之亦然。

到目前为止，这是我的代码：

```
<a href="favorite.php?to=<?php echo $profile_id; ?>">+ Favorite</a> 
```

.

```
<?php

require_once('includes/session.php');
require_once('includes/functions.php');
require('includes/_config/connection.php');
include 'includes/_config/connection.php';

session_start();

    confirm_logged_in();

    if (isset ($_GET['to'])) {
    $user_to_id = $_GET['to'];

}

if (!isset($_GET['to']))
    exit('No user specified.');

$user_id = $_GET['to'];

$result = mysql_query("INSERT INTO ptb_favorites (user_id, favorite_id) VALUES (".$_SESSION['user_id'].", ".$user_to_id.")") 
or die(mysql_error());
echo 'Done.';

?> 
```

现在我只想把每个用户自己喜欢的结果都显示出来？我试过这个，但它不会回显任何东西？

```
function get_favorites() {
            global $connection;
            global $profile_id;
            $query = "SELECT f.user_id, f.favorite_id, p.user_id, p.display_name
                        FROM ptb_favorites f, ptb_profiles p
                        WHERE f.favorite_id = \"$profile_id\"
                        AND f.user_id =".$_SESSION['user_id']."";
            $get_favorites_set = mysql_query($query, $connection);
            confirm_query($query, $connection);
            return $get_favorites_set;

            }

    <?php
            $get_favorites_set = get_favorites();
            while ($favorites = mysql_fetch_array($get_favorites_set)) {

    ?>

    <div class="reviewcase" id="reviewcase">
                 <div class="forum-content">
                 <?php echo "{$favorites['display_name']}"; ?>
                 </div>
                 <div class="message_pic">
                 <?php echo "<a href=\"profile.php?id={$favorites['favorite_id']}\"><img width=\"50px\" height=\"50px\"  src=\"{$prof_photo}\"></a>";?>
                 </div>

                 <? } ?> 
```

我还在学习 php 和 mysql，所以有人可以解释我哪里出错了，我需要做什么才能成功显示这个结果。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:42:03.320

这是什么？`<?php echo "{$favorites['display_name']}"; ?>`应该是`echo $favorites['display_name'];`更快。

另外，请尝试在结尾处使用`foreach`循环而不是循环。`while`

# java - 使用泛型类执行基本算术运算

> ID：14046209
> 
> 赞同：12
> 
> 时间：2012-12-26T21:00:22.677
> 
> 标签：java, generics

我想执行基本的算术运算，如加法、减法、乘法和除法，每次操作只使用一种通用方法，用于包装类型，如`Integer`, `Float`, `Double`...（不包括`BigDecimal`and `BigInteger`）。

我尝试使用泛型类执行以下操作（用于添加）。

```
public final class GenericClass<E extends Number> {

    public E add(E x, E y) {
        return x + y; // Compile-time error
    }
} 
```

它发出编译时错误，

> 运算符 + 不能应用于 E,E

有没有办法使用这样的通用版本来实现这样的操作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-26T21:00:50.770

不，没有办法做到这一点，否则它将被内置到 Java 中。类型系统不足以表达这种事情。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-26T22:31:02.550

不，您不能这样做，因为 + 运算符不是 Number 类的一部分。您可以做的是创建一个抽象基类并从中扩展：

```
static void test() {

    MyInteger my = new MyInteger();
    Integer i = 1, j = 2, k;
    k = my.add(i, j);
    System.out.println(k);
}

static public abstract class GenericClass<E extends Number> {
    public abstract E add(E x, E y);
}

static public class MyInteger extends GenericClass<Integer> {
    @Override
    public Integer add(Integer x, Integer y) {
        return x + y;
    }       
} 
```

（我将这些类设为静态以方便测试，但您可以删除此修饰符。）

您还可以添加一个抽象函数，该函数将接受和返回 Number 类型的参数和返回值，并覆盖它和子类，但返回值所需的强制转换会破坏它的用处。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T23:27:19.843

我所能想到的就是将类型作为未知类型接收并使用实例。

就像是：

```
public class GenericClass<? extends Number>{
    public Integer add(? x, ? y){
        if(x instance of Integer && y instance of Integer){
            //Do your math with Integer class methods help
            //Return here
        }
        return (Interger)null;
    }

} 
```

但不确定：/

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T21:05:52.550

通常你不需要这个，因为使用像 double 或 BigDecimal 这样可以表示任何类型的任何值的“超级”类型更简单、更有效。

注意： a`double`使用了不到一半的空间来`Integer`引用它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-26T21:08:06.270

[Number](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Number.html)是类类型，因此基本类型运算符不适用。此外，Java 中的泛型[不支持](http://docs.oracle.com/javase/tutorial/java/generics/restrictions.html)原始类型，因此您将无法绑定 E 以仅允许原始类型。

解决此问题的一种方法是在 Add 方法中分别处理 Number 支持的每种原始类型，但我认为这会破坏您要完成的工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-27T15:26:31.990

正如 Afonso 所建议的，另一种可能性是创建一个函数并写下所有必需的可能性。以下是一些变化：

```
 // Examples with static functions:
        Integer i = addNumbers (1, 2); // OK
        Double d = addNumbers (3.0, 4.0); // OK
        String s = addObjects ("a", "b"); // OK
//
      // Example with a raw type for a class with both method
      // (or member function) and static functions:
GenericClass gc = new GenericClass();  // Raw type
//
      // Note the error if we don't add a cast:
// i = gc.add(1, 2); // Error: Cannot convert from Number to Integer
//
      // Now OK with a cast but with a Type safety warning:
        i = (Integer) gc.add (1, 2); // Type safety warning.
        i = GenericClass.add2 (1, 2); // OK
        i = GenericClass.add3 (1, 2); // OK
//    
      // Example with an instanciated type for the same class:
        GenericClass<Integer> gc1 = new GenericClass<Integer>();
//
      // Note that we don't need a cast anymore:
        i = gc1.add(1, 2); // Now OK even without casting.
//
        i = GenericClass2.add2 (1, 2); // OK
        s = GenericClass2.add2 ("a", "b"); // OK
        i = GenericClass2.<Integer>add2 (1, 2); // OK.
        d = GenericClass2.<Double>add2 (1.0, 2.0); // OK
        s = GenericClass2.<String>add2 ("a", "b"); // OK
//  
    public static<T extends Number> T addNumbers(T x, T y) {

        if (x instanceof Integer && y instanceof Integer){
            return (T) (Integer) ((Integer)x + (Integer)y);
        } else if (x instanceof Double && y instanceof Double){
            return (T) (Double) ((Double)x + (Double)y);
        } else
            return (T)null;
    }
//    
    public static<T> T addObjects(T x, T y) {

        if (x instanceof Integer && y instanceof Integer) {
      //
      // We must add an (Integer) cast because the type of the operation
      // "((Integer)x + (Integer)y))" is "int" and not "Integer" and we
      // cannot directly convert from "int" to "T".  Same thing for Double
      // but not for the type String:
      //
            return (T) (Integer) ((Integer)x + (Integer)y);
        } else if (x instanceof Double && y instanceof Double) {
            return (T) (Double) ((Double)x + (Double)y);
      } else if (x instanceof String && y instanceof String) {
            return (T) ((String)x + (String)y);            
      } else
            return (T)null;
    }
 //  
    static class GenericClass<T extends Number> {

        public T add(T x, T y) {
            if (x instanceof Integer && y instanceof Integer) {
                return (T) (Integer) ((Integer)x + (Integer)y);
            } else if (x instanceof Double && y instanceof Double) {
                return (T) (Double) ((Double)x + (Double)y);
            } else
                return (T)null;
        }
 //   
        // The type <T> here is NOT the same as the one for the class.
        // We should rename it in order to make this clearer. See add3() 
        // for an example of this.
        public static<T> T add2(T x, T y) {
            if (x instanceof Integer && y instanceof Integer) {
                return (T) (Integer) ((Integer)x + (Integer)y);
            } else if (x instanceof Double && y instanceof Double) {
                return (T) (Double) ((Double)x + (Double)y);
            } else if (x instanceof String && y instanceof String) {
                return (T) ((String)x + (String)y);
            } else
                return (T)null;
        }
 //   
        // The type here is not the same as the one for the class
        // so we have renamed it from <T> to <N> to make it clearer.
        public static<N extends Number> N add3(N x, N y) {
            if (x instanceof Integer && y instanceof Integer) {
                return (N) (Integer) ((Integer)x + (Integer)y);
            } else if (x instanceof Double && y instanceof Double) {
                return (N) (Double) ((Double)x + (Double)y);
            } else
                return (N)null;
        }
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-23T19:11:18.947

正如[Louis Wasserman](https://stackoverflow.com/users/869736/louis-wasserman)所指出的，在 Java 中没有办法做到这一点。但是，可以通过使用一些不那么棘手的编程来提供解决方案。让我们从我喜欢的解决方案开始：[SylvainL](https://stackoverflow.com/users/1444193/sylvainl)对问题的回答。但是，我相信我们可以退后一步，处理**所有类型**的`Number`. 如果您查看[Java API](https://docs.oracle.com/javase/7/docs/api/java/lang/Number.html)，您会注意到任何子类`Number`都必须覆盖几个抽象方法；即[intValue()](https://docs.oracle.com/javase/7/docs/api/java/lang/Number.html#intValue())（以及其他）。使用这些方法，我们可以利用多态性来发挥其真正的潜力。从[SylvainL](https://stackoverflow.com/users/1444193/sylvainl)的答案中获取我们的类，我们可以生成一个新类：

```
public final class EveryNumberClass<E extends Number>
{
    public static int add(E x, E y)
    {
        return x.intValue() + y.intValue();
    }

    public static int subract(E x, E y)
    {
        return x.intValue() - y.intValue();
    }
} 
```

这些运算可以扩展为乘法和除法，虽然不限于`Integer`s，但可以用于接受**任何** `Number`运算并表达给定运算的适当行为。虽然该`intValue()`方法的行为**可能不会**返回 的整数表示`Number`，但它肯定会返回（我查看了[大多数数字](http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/73d1df240259/src/share/classes/java/lang/)的源代码，包括[原子](http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/73d1df240259/src/share/classes/java/lang/)数字和[数学](http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/73d1df240259/src/share/classes/java/math)数字）。唯一的问题是从 中返回意外行为`intValue()`，这可能发生在原子序数、用户定义`Number`的 s 或大数字被迫收缩时。如果这些是您的项目（或您的图书馆）的问题，我会考虑使用`long`值，或参考[SylvainL](https://stackoverflow.com/users/1444193/sylvainl)的答案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-10T04:47:09.590

希望这可以帮助有兴趣使用泛型进行算术运算的人

```
 public < T > T add( T a, T b)
  {
      return (T) (String.valueOf((Integer.parseInt(a.toString()) + Integer.parseInt(b.toString()))));
  }
  public < T > T sub(T a, T b)
  {
      return (T) (String.valueOf((Integer.parseInt(a.toString()) - Integer.parseInt(b.toString()))));
  }
  public < T> T mul(T a,T b)
  {
      return (T) (String.valueOf((Integer.parseInt(a.toString()) * Integer.parseInt(b.toString()))));
  }
  public < T  >  T  div (T a, T b)
  {
      return (T) (String.valueOf((Integer.parseInt(a.toString()) / Integer.parseInt(b.toString()))));
  }
  public < T  > T mod(T a, T b)
  {
      return (T) (String.valueOf((Integer.parseInt(a.toString()) % Integer.parseInt(b.toString()))));
  }
  public < T  > T leftShift(T a, T b)
  {
      return (T) (String.valueOf((Integer.parseInt(a.toString()) <<  Integer.parseInt(b.toString()))));
  }
  public < T  > T rightShift(T a, T b)
  {
      return (T) (String.valueOf((Integer.parseInt(a.toString()) >> Integer.parseInt(b.toString()))));
  } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-18T02:44:10.437

```
enum Operator {
    ADD, SUBTRACT, DIVIDE, MULTIPLY;
}

public class GenericArithmeticOperation {

    public GenericArithmeticOperation() {
        // default constructor
    }

    public <E> Integer doArithmeticOperation(E operand1, E operand2, Operator operator) {
        if (operand1 instanceof Integer && operand2 instanceof Integer) {
            switch (operator) {
            case ADD:
                return (Integer) ((Integer) operand1 + (Integer) operand2);
            case SUBTRACT:
                return (Integer) ((Integer) operand1 - (Integer) operand2);
            case MULTIPLY:
                return (Integer) ((Integer) operand1 * (Integer) operand2);
            case DIVIDE:
                return (Integer) ((Integer) operand1 / (Integer) operand2);
            }
        }
        throw new RuntimeException(operator + "is unsupported");
    }

    public static void main(String[] args) {
        GenericArithmeticOperation genericArithmeticOperation = new GenericArithmeticOperation();
        System.out.println(genericArithmeticOperation.doArithmeticOperation(10, 6, Operator.ADD));
        System.out.println(genericArithmeticOperation.doArithmeticOperation(10, 6, Operator.SUBTRACT));
        System.out.println(genericArithmeticOperation.doArithmeticOperation(4, 6, Operator.MULTIPLY));
        System.out.println(genericArithmeticOperation.doArithmeticOperation(21, 5, Operator.DIVIDE));
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-01T20:37:37.507

这可能会对您有所帮助。只需使用您想要支持的类型创建不同的操作。瞧，你现在可以对泛型使用算术运算了。无需昂贵的`String`解析。

```
static <V extends Number> V add(V lhs, V rhs)
{
    if (lhs.getClass() == Integer.class && rhs.getClass() == Integer.class)
        return (V) Integer.valueOf(((Integer) lhs) + ((Integer) rhs));
    if (lhs.getClass() == Double.class && rhs.getClass() == Double.class)
        return (V) Double.valueOf(((Double) lhs) + ((Double) rhs));
    if (lhs.getClass() == Float.class && rhs.getClass() == Float.class)
        return (V) Float.valueOf(((Float) lhs) + ((Float) rhs));
    if (lhs.getClass() == Long.class && rhs.getClass() == Long.class)
        return (V) Long.valueOf(((Long) lhs) + ((Long) rhs));
    throw new IllegalArgumentException("unsupported type: " + lhs.getClass());
} 
```

`valueOf()`将结果包装到一个`Integer`对象中，然后可以将其强制转换为 V.

为了提高性能，请按使用量降序更改顺序。

switch 不起作用，因为您必须提供泛型或 a `Class<?>`，这对于 switch 语句是不可接受的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-31T07:17:31.150

```
public class GenericsDemo {

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        MathC<Number> obj1 = new MathC<>();
        System.out.println(obj1.add(2,3.4));
        System.out.println(obj1.add(2.3,3.4));

    }

}

class MathC<.T extends Number>{            //remove . before T

    public Double add(T i , T j) {
        return (i.doubleValue()+j.doubleValue());
    }
} 
```

# javascript - 在 Windows 应用商店应用中调整图像大小

> ID：14046214
> 
> 赞同：0
> 
> 时间：2012-12-26T21:00:59.120
> 
> 标签：javascript, windows-store-apps, image-resizing

我正在尝试将图像文件复制到本地存储并调整其大小（为了在动态磁贴中显示它）。我主要只是在这里修修补补，这是我的第一个 Windows 应用商店应用程序。到目前为止，这就是我所拥有的：

```
var fileStream = null;
currentPhoto.copyAsync(Windows.Storage.ApplicationData.current.localFolder, currentPhoto.name)
    .then(function (file) {
        return file.openAsync(Windows.Storage.FileAccessMode.readWrite);
    })
    .then(function (stream) {
        return Windows.Graphics.Imaging.BitmapDecoder.createAsync(stream);
    })
    .then(function (decoder) {
        fileStream = new Windows.Storage.Streams.InMemoryRandomAccessStream();
        return Windows.Graphics.Imaging.BitmapEncoder.createForTranscodingAsync(fileStream, decoder);
    })
    .then(function (encoder) {
        encoder.bitmapTransform.scaledWidth = 100;
        encoder.bitmapTransform.scaledHeight = 100;
        return encoder.flushAsync();
    })
    .then(function () {
        fileStream.close();
    })
    .done(function () {
        // do tile update
    }); 
```

在我让这部分工作后，我会计算一个合适的纵横比，现在 100x100 适合测试。我在调试时注意到编码器正确检测到它是 JPG 文件。但是，如果我在函数链中插入一个调用来读取已保存到本地存储的文件，那么我会看到它没有调整大小。因此，动态磁贴更新自然会忽略它，因为它太大了。

我是否错过了调整图像大小的步骤？或者也许有更简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:48:07.397

上面的代码应该按预期调整图像的大小。但是您不会在本地存储中调整图像的大小。您只是将原始图像复制到本地存储，从那里打开它，然后在内存流中调整图像大小，当然如果不修改代码就无法看到。

通过对代码进行少量修改，您可以将调整大小的图像保存到本地存储，如果这是您所追求的：

```
var decoder = null;
var fileStream = null;
filePicker.pickSingleFileAsync()
    .then(function(file) {
        return file.openAsync(Windows.Storage.FileAccessMode.readWrite);
    })
    .then(function(stream) {
        return Windows.Graphics.Imaging.BitmapDecoder.createAsync(stream);
    })
    .then(function(dec) {
        decoder = dec;
        return Windows.Storage.ApplicationData.current.localFolder.createFileAsync("out.jpg");
    })
    .then(function(file) {
        return file.openAsync(Windows.Storage.FileAccessMode.readWrite);
    })
    .then(function (stream) {
        fileStream = stream;
        return Windows.Graphics.Imaging.BitmapEncoder.createForTranscodingAsync(stream, decoder);
    })
    .then(function(encoder) {
        encoder.bitmapTransform.scaledWidth = 100;
        encoder.bitmapTransform.scaledHeight = 100;
        return encoder.flushAsync();
    })
    .then(function() {
        fileStream.close();
    }); 
```

如果您尝试一下，您会看到`out.jpg`在本地存储中创建了调整大小。

# box-api - 使用 v2 box api：如何获取用户 ID

> ID：14046216
> 
> 赞同：0
> 
> 时间：2012-12-26T21:01:09.010
> 
> 标签：box-api

我想使用 v2 api 添加协作 - 但它需要一个用户 ID。如果我只有登录名，如何获取用户 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:27:53.630

添加协作者时，您可以发送用户 ID 或用户的电子邮件地址：

即两者

```
curl https://api.box.com/2.0/collaborations \-H "Authorization: Bearer ACCESS_TOKEN" \
-d '{"item": { "id": "FOLDER_ID", "type": "folder"}, "accessible_by": { "id": "USER_ID"}, "role": "editor"}' \
-X POST 
```

和

```
curl https://api.box.com/2.0/collaborations \-H "Authorization: Bearer ACCESS_TOKEN" \
-d '{"item": { "id": "FOLDER_ID", "type": "folder"}, "accessible_by": { "login": "USER_EMAIL"}, "role": "editor"}' \
-X POST 
```

将工作。在第二个示例中，用户不必拥有 Box 帐户。

[http://developers.box.com/docs/#collaborations-add-a-collaboration](http://developers.box.com/docs/#collaborations-add-a-collaboration)

# php - 对 PHP 进行排序 - 2 列带有公共子标题

> ID：14046219
> 
> 赞同：0
> 
> 时间：2012-12-26T21:01:19.867
> 
> 标签：php, mysql, sorting

我的代码包含两列，如下所示：

社区 1
餐厅 1

社区 1
餐厅 2

社区 1
餐厅 3

我想要：

邻里 1
餐厅 1
餐厅 2
餐厅 3

* * *

```
$result = mysql_query("SELECT ID,RName,NHood FROM Restaurants ORDER BY NHood ASC, TRIM(LEADING 'The ' FROM RName) ASC",$connect);
$numRows = mysql_num_rows($result);
$middleIndex = (int)(($numRows+1) / 2);

$names = array();
while($row = mysql_fetch_assoc($result)) {
    $names[] = $row['RName'];
    $id[] = $row['ID'];
    $hood[] = $row['NHood'];
}

// print the left column
echo "<table>";
echo "<tr>";
echo "<td width=60%>";
echo "<div id=\"left\">\n";
for($i = 0; $i < $middleIndex; $i++) {
    echo $hood[$i];
    echo "<p><a href=\"Restaurant.php?ID=".$id[$i]."\">$names[$i]</a></p>\n";
}
echo "</div>\n";
echo "</td>";

// print the right column
echo "<td>";
echo "<div id=\"right\">\n";
for($i = $middleIndex; $i < $numRows; $i++) {
    echo $hood[$i];
        echo "<p><a href=\"Restaurant.php?ID=".$id[$i]."\">$names[$i]</a></p>\n";
}
echo "</div>\n";  
echo "</tr>";
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T02:54:34.703

这是您想要的逻辑（伪代码）：

```
SELECT
    ID,
    RName,
    NHood
FROM
    Restaurants
ORDER BY
    NHood ASC, RName ASC 
```

这应该返回首先按附近排序的结果列表，然后按餐厅名称排序。

接下来，您将逐行处理这些结果，以创建一个嵌套数组，其中包含您想要用于视图的数据结构：

```
$neighborhoods = array();

foreach($result as $row)
{
    // Add each restaurant to a list named for the current neighborhood
    $neighborhoods[$row['NHood']][] = $row['RName'];
} 
```

这将产生一个像这样的数据结构：

```
$neighborhoods = array(
    'neighborhood1' => array(
        'restaurant1',
        'restaurant2',
        'restaurant3',
    ),
    'neighborhood2' => array(
        'restaurant1',
        'restaurant2',
    ),
) 
```

然后您将通过执行以下操作来使用它：

```
foreach($neighborhoods as $neighborhood => $restaurants)
{
    echo $neighborhood;
    foreach($restaurants as $restaurant)
    {
        echo $restaurant;
    }
} 
```

如果您的列表真的很大并且您担心内存，那么实现会有所不同，但逻辑是相同的。这种技术速度更快，但读取和维护有点困难，因为表示层和数据层逻辑都混合在一起：

```
$currentNH = null;

while($row = fetch_row($results))
{
    // Detect when the neighborhood changes
    if($currentNH != $row['NHood']) {
        echo $row['NHood'];
    }

    echo $row['RName'];
} 
```

# java - 如何在Java中从父级调用方法？

> ID：14046223
> 
> 赞同：-2
> 
> 时间：2012-12-26T21:01:44.097
> 
> 标签：java

```
import java.util.Random;

class VehicleConstructor{

    private int startSpeed;

    public VehicleConstructor() {
        setSpeed();
        System.out.println("VehicleConstructor");
    }

    private void setSpeed(){
        int minSpeed = 1;
        int maxSpeed = 40;

        Random random = new Random();
        this.startSpeed = random.nextInt(maxSpeed - minSpeed + 1) + minSpeed;
    }
}

class Bicycle extends Vehicle{

    public Bicycle(){
        System.out.println(getSpeed());
    }
}

public class Vehicle{
    public static void main(String[] args){
        Bicycle bicycle = new Bicycle();
    }
} 
```

问题出在`Bicycle`课堂上，我尝试`getSpeed()`从课堂上调用方法`VehicleConstructor`。我也用`this`and试过了`super`。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:03:17.483

`getSpeed`您提供的代码中没有命名方法- 只有一个`setSpeed`- 并且该方法是`private`，这意味着它不能从任何外部类访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T21:03:19.007

您的`Bicycle`课程目前扩展`Vehicle`，而不是`VehicleConstructor`。扩展`VehicleConstructor`，并创建一个`getSpeed()`方法，您的问题应该得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T21:04:07.617

`setSpeed()`是一种方法`VehicleConstructor`，不是`Vehicle`。

但是，如果它是拼写错误并且`getSpeed()`是 的方法`Vehicle`，您仍然无法访问它，因为它被声明为`private`. 访问父方法所需的最小访问修饰符是`protected`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T21:04:53.920

似乎**getSpeed()**没有在**VehicleConstructor**类中定义！！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T21:06:12.390

也许你想要这个：

```
public class Vehicle{
    private int speed;
    public  void setSpeed(int speed){
        this.speed=speed;
    }

    public int getSpeed() {
        return speed;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-26T21:29:43.197

我想你想要更多这样的东西：

```
 class Vehicle{

    private int startSpeed;

    public Vehicle() {
        setSpeed();
        System.out.println("Vehicle");
    }

    private void setSpeed(){
        int minSpeed = 1;
        int maxSpeed = 40;

        Random random = new Random();
        this.startSpeed = random.nextInt(maxSpeed - minSpeed + 1) + minSpeed;
    }
    public int getSpeed(){ 
        return startSpeed; 
    } 
}

public class bicycle extends Vehicle{

    public Bicycle(){
        System.out.println(super.getSpeed());
    }

}

public class VehicleCostructor{

    public static void main(String[] args){
        Bicycle bicycle = new Bicycle();

    }
} 
```

假设您的 VehicleConstructor 应该只是对您的课程的测试。

一个更好的测试方法可能是使用 JUnit。是一个非常有用且易于使用的工具。

希望这有帮助！

# c# - 根据下拉选择填写表格（MVC 4）

> ID：14046224
> 
> 赞同：4
> 
> 时间：2012-12-26T21:01:50.223
> 
> 标签：c#, asp.net-mvc

我正在使用 asp.net mvc 4 有没有办法根据用户的选择来更新表单？

（在这种情况下，如果从下拉列表中选择了某些内容，我想填写地址字段，否则需要输入新地址）

我的模型：公共类 NewCompanyModel {

```
 [Required]
    public string CompanyName { get; set; }
    public bool IsSameDayRequired { get; set; }

    public int AddressID { get; set; }
    public Address RegisterOfficeAddress { get; set; }
} 
```

看法：

```
@model ViewModels.NewCompanyModel

@using (Html.BeginForm(null, null, FormMethod.Post, new { name = "frm", id = "frm" }))
{
@Html.ValidationSummary(true)

<fieldset id="test">
    <legend>Company</legend>

        <h2>Register office address</h2>

        <div class="editor-label">
            @Html.LabelFor(model => model.AddressID)
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.AddressID, (IList<SelectListItem>)ViewBag.Addresses, new {id = "address", onchange = "window.location.href='/wizard/Address?value=' + this.value;" })
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.RegisterOfficeAddress.BuildingNameOrNumber)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.RegisterOfficeAddress.BuildingNameOrNumber)
            @Html.ValidationMessageFor(model => model.RegisterOfficeAddress.BuildingNameOrNumber)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.RegisterOfficeAddress.StreetName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.RegisterOfficeAddress.StreetName)
            @Html.ValidationMessageFor(model => model.RegisterOfficeAddress.StreetName)
        </div> 
```

和控制器：

```
 public ActionResult Address(string value)
    {
      //get the address from db and somehow update the view
    } 
```

问题是你如何更新'model.RegisterOfficeAddress.StreetName'等只是为了明确这只是表格的一部分，所以我还不能提交它。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:00:46.403

谢谢你的帮助; 我决定采用不同的方法：在下拉更改时，我提交表单：

```
<div class="editor-label">
        @Html.LabelFor(model => model.ServiceAddress.AddressID)
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => model.ServiceAddress.AddressID, (IEnumerable<SelectListItem>)ViewBag.Addresses, new { onchange = "this.form.submit();" })
        @Html.ValidationMessageFor(model => model.ServiceAddress.AddressID)
    </div> 
```

然后在控制器中：

```
 [HttpPost]
        public ActionResult NewDirector(NewDirectorVM vm, string value)
        {
            ModelState.Clear();
            if (vm.ServiceAddress.AddressID > 0)
            {
               //Updates the properties of the viewModel
               vm.ServiceAddress = _Repository.GetAddress(vm.ServiceAddress.AddressID);
            }
   return View("NewDirector", vm);
} 
```

请注意`ModelState.Clear();`实际上允许从控制器更新视图（否则控制器对 viewModel 所做的所有更改都将被视图中的值覆盖）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:14:37.730

在这种情况下，常见的方法是通过 javascript 更新其他字段：

```
$('#@Html.IdFor(model => model.AddressID)').on('change',function(){
  $.get(...,function(data){
    $('#@Html.IdFor(model => model.RegisterOfficeAddress.BuildingNameOrNumber)').val(data)
  })
}) 
```

# ruby - 为什么 Bundler 认为它需要特定版本来满足 gem 的依赖关系？

> ID：14046229
> 
> 赞同：1
> 
> 时间：2012-12-26T21:02:39.697
> 
> 标签：ruby, bundler, gemfile

这不是我第一次遇到这种情况，但这里有一个具体的例子：

```
$ bundle update rails
Fetching source index for http://rubygems.org/
Bundler could not find compatible versions for gem "builder":
  In Gemfile:
    rails (~> 3.0.0) ruby depends on
      builder (~> 2.1.2) ruby

    hoptoad_notifier (>= 0) ruby depends on
      builder (3.0.0) 
```

所以 Bundler 声称 hoptoad_notifier gem 依赖于 3.0.0 版本的构建器。但事实并非如此，它只需要 builder >= 0。

```
$ gem dependency hoptoad_notifier
Gem hoptoad_notifier-2.4.11
  actionpack (>= 0, development)
  activerecord (>= 0, development)
  activesupport (>= 0, runtime)
  bourne (>= 0, development)
  builder (>= 0, runtime)
  nokogiri (>= 0, development)
  shoulda (>= 0, development) 
```

**为什么 Bundler 认为 hoptoad_notifier 依赖于 builder 3.0.0？**

从 Gemfile 和 Gemfile.lock 中选择的位：

```
source "http://rubygems.org"

gem 'rails', '~> 3.0.0'
gem 'hoptoad_notifier'
...a bunch of testing gems, custom gems, etc. 
```

Gemfile.lock

```
GEM
  remote: http://rubygems.org/
  specs:
    actionmailer (2.3.14)
      actionpack (= 2.3.14)
...
    builder (3.0.0)
...
    cucumber (1.2.0)
      builder (>= 2.1.2)
      diff-lcs (>= 1.1.3)
      gherkin (~> 2.10.0)
      json (>= 1.4.6)
...
    hoptoad_notifier (2.4.11)
      activesupport
      builder
... no other mentions of builder 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:00:13.923

我认为这更像是一种解决方法，而不是问题的答案，所以我将把这个问题留一段时间，看看是否有更好的答案。

我找到了不同的方法来解决这个问题（在特定的 gem 上使用包更新，修改 Gemfile，运行包安装），但是对于各种依赖项继续遇到这种错误的某种形式。这似乎是 Bundler 的一个问题。（我使用的是 v1.0.22，升级后情况变得更糟。）最终，让我摆脱困境的是删除 Gemfile.lock 并运行 bundle install，让 Bundler 从头开始​​解决所有依赖项。当然，这远非理想，因为您拥有锁定文件的全部原因是锁定应用程序的依赖项。但由于无论如何我都将 Rails 升级到 v3，所以在这种情况下它是可以接受的。

# android - 使用 holoeverywhere 库时，我的应用程序强制在 setcontentview 上关闭

> ID：14046232
> 
> 赞同：1
> 
> 时间：2012-12-26T21:03:12.767
> 
> 标签：android, xml, android-holo-everywhere

您好我正在尝试使用 holoeverwhere 使我的应用程序向后兼容。在我的应用程序中，我有一个选项卡活动和 3 个 holoeverywhere 活动。当我在 2.3.3 模拟器上运行我的应用程序时，它会运行并显示我的第一个选项卡，但如果我切换到第二个或第三个选项卡，它会意外关闭。错误发生在我的 setContentView 行的第二个或第三个选项卡中。该错误不是由切换选项卡引起的，因为如果我在默认情况下在第二个选项卡上启动应用程序，我仍然会收到相同的错误。如果我在 4.1.2 设备上运行我的应用程序，那么它工作得很好。

这是我的日志猫

```
12-26 13:33:03.511: E/AndroidRuntime(744): FATAL EXCEPTION: main
12-26 13:33:03.511: E/AndroidRuntime(744): java.lang.RuntimeException: Unable to start            activity ComponentInfo{com.chair49.holotimer/com.chair49.holotimer.StopWatch}:         android.view.InflateException: Binary XML file line #20: Error inflating class android.view.View
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.app.ActivityThread.startActivityNow(ActivityThread.java:1487)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:654)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.widget.TabHost.setCurrentTab(TabHost.java:326)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:132)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:456)
12-26 13:33:03.511: E/AndroidRuntime(744):  at  android.view.View.performClick(View.java:2485)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.view.View$PerformClick.run(View.java:9080)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.os.Handler.handleCallback(Handler.java:587)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.os.Looper.loop(Looper.java:123)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-26 13:33:03.511: E/AndroidRuntime(744):  at java.lang.reflect.Method.invokeNative(Native Method)
12-26 13:33:03.511: E/AndroidRuntime(744):  at java.lang.reflect.Method.invoke(Method.java:507)
12-26 13:33:03.511: E/AndroidRuntime(744):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-26 13:33:03.511: E/AndroidRuntime(744):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-26 13:33:03.511: E/AndroidRuntime(744):  at dalvik.system.NativeStart.main(Native Method)
12-26 13:33:03.511: E/AndroidRuntime(744): Caused by: android.view.InflateException: Binary XML file line #20: Error inflating class android.view.View
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.view.LayoutInflater.createView(LayoutInflater.java:518)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:549)
12-26 13:33:03.511: E/AndroidRuntime(744):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
12-26 13:33:03.511: E/AndroidRuntime(744):  at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:853)
12-26 13:33:03.511: E/AndroidRuntime(744):  at com.actionbarsherlock.app.SherlockActivity.setContentView(SherlockActivity.java:229)
12-26 13:33:03.511: E/AndroidRuntime(744):  at com.chair49.holotimer.StopWatch.onCreate(StopWatch.java:49)  // this is my setcontentview line
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
12-26 13:33:03.511: E/AndroidRuntime(744):  ... 18 more
12-26 13:33:03.511: E/AndroidRuntime(744): Caused by: java.lang.reflect.InvocationTargetException
12-26 13:33:03.511: E/AndroidRuntime(744):  at java.lang.reflect.Constructor.constructNative(Native Method)
12-26 13:33:03.511: E/AndroidRuntime(744):  at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.view.LayoutInflater.createView(LayoutInflater.java:505)
12-26 13:33:03.511: E/AndroidRuntime(744):  ... 32 more
12-26 13:33:03.511: E/AndroidRuntime(744): Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x2/d=0x101030a a=-1}
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.content.res.Resources.loadDrawable(Resources.java:1681)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.view.View.<init>(View.java:1951)
12-26 13:33:03.511: E/AndroidRuntime(744):  at android.view.View.<init>(View.java:1899)
12-26 13:33:03.511: E/AndroidRuntime(744):  ... 35 more 
```

这是我的第三个选项卡的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_weight="50"
    android:gravity="bottom"
    android:weightSum="100">

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="48dp"
        android:layout_alignParentBottom="true" >

        <View
            android:id="@+id/view1"
            android:layout_width="match_parent"
            android:layout_height="1dip"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="4dip"
            android:layout_marginRight="4dip"
            android:background="?android:attr/android:dividerVertical" />

        <View
            android:id="@+id/ViewColorPickerHelper"
            android:layout_width="1dip"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="4dip"
            android:layout_marginTop="4dip"
            android:background="?android:attr/android:dividerVertical" />

        <org.holoeverywhere.widget.Button
            android:id="@+id/bStart"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/view1"
            android:layout_alignParentTop="true"
            android:layout_toLeftOf="@+id/ViewColorPickerHelper"
             style="@style/Holo.Button.Borderless"
            android:text="Start" />

        <org.holoeverywhere.widget.Button
            android:id="@+id/bStop"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_alignParentTop="true"
            android:layout_alignRight="@+id/view1"
            android:layout_toRightOf="@+id/ViewColorPickerHelper"
             style="@style/Holo.Button.Borderless"
            android:text="Stop" />
    </RelativeLayout>
</LinearLayout>

<Chronometer
    android:id="@+id/chronometer2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="Chronometer"
    android:textSize="0px"
    android:visibility="invisible" />

<TableLayout
    android:id="@+id/tableLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="56dp" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <ImageButton
            android:id="@+id/hourup"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             style="@style/Holo.Button.Borderless"
            android:clickable="false"
            android:src="@drawable/up"
            android:visibility="invisible" />

        <ImageButton
            android:id="@+id/minuteup"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             style="@style/Holo.Button.Borderless"
            android:clickable="false"
            android:src="@drawable/up"
            android:visibility="invisible" />

        <ImageButton
            android:id="@+id/secondup"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            style="@style/Holo.Button.Borderless"
            android:clickable="false"
            android:src="@drawable/up"
            android:visibility="invisible" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <org.holoeverywhere.widget.TextView
            android:id="@+id/hour"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="00 : "
            android:textSize="35sp" />

        <org.holoeverywhere.widget.TextView
            android:id="@+id/minute"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="00 : "
            android:textSize="35sp" />

        <org.holoeverywhere.widget.TextView
            android:id="@+id/second"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="00"
            android:textSize="35sp" />

        <org.holoeverywhere.widget.TextView
            android:id="@+id/ending"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="58dp"
            android:text=".000" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <ImageButton
            android:id="@+id/hourdown"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            style="@style/Holo.Button.Borderless"
            android:clickable="false"
            android:src="@drawable/down"
            android:visibility="invisible" />

        <ImageButton
            android:id="@+id/minutedown"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            style="@style/Holo.Button.Borderless"
            android:clickable="false"
            android:src="@drawable/down"
            android:visibility="invisible" />

        <ImageButton
            android:id="@+id/seconddown"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            style="@style/Holo.Button.Borderless"
            android:clickable="false"
            android:src="@drawable/down"
            android:visibility="invisible" />
    </TableRow>
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T06:25:48.827

> ?android:attr/android:dividerVertical

它是什么？

```
?dividerVertical 
```

它：`style="@style/Holo.Button.Borderless"`
对：`style="?borderlessButtonStyle"`

它：`<org.holoeverywhere.widget.TextView />`
`<TextView />`没用？

# python - 为什么 mock 会添加 __nonzero__ 方法调用？

> ID：14046237
> 
> 赞同：12
> 
> 时间：2012-12-26T21:03:28.117
> 
> 标签：python, unit-testing, mocking

我有一些代码调用集合中每个项目的一系列方法，每个方法返回一个布尔值，指示成功 = True/failure = False。

```
def monkey(some_collection, arg1, arg2):
    for item in some_collection:
        if not item.foo(arg1, arg2):
            continue
        if not item.bar(arg1, arg2):
            continue
        if not item.baz(arg1, arg2):
            continue 
```

而且，这是我的单元测试示例：

```
import mock
def TestFoo(unittest.TestCase):
    def test_monkey(self):
        item = MagicMock()
        some_collection = [item]
        collection_calls = []
        foo_call = mock.call().foo(some_collection, 1, 2)
        bar_call = mock.call().bar(some_collection, 1, 2)
        baz_call = mock.call().baz(some_collection, 1, 2)
        collection_calls = [foo_call, bar_call, baz_call]                   
        my_module.monkey(some_collection, 1, 2)
        item.assert_has_calls(collection_calls) # requires the correct call order/sequence 
```

**实际通话**

1.  `call().foo(<MagicMock id='12345'>, 1, 2)`
2.  `call().foo.__nonzero__()`

...

*注意：此单元测试失败，因为它看到了`__nonzero__()`方法调用。*

**问题**

为什么要添加非零方法调用？

**澄清**

我正在使用[mock](http://pypi.python.org/pypi/mock)，它从 python 3.3 开始包含在 stdlib 中。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-26T21:09:26.040

## 简短的回答：

如果您的模拟函数没有返回的显式 return_value 或 side_effect，您将在 Python 尝试评估模拟的真实性时看到这一点。确保你的模拟有一个。

要么用一个初始化它：

```
item = MagicMock(return_value=True) 
```

或添加一个：

```
item.return_value = True 
```

## 解释：

当你这样做时`if not x:`，你可能正在思考`if x is False`。

Python 实际上并没有这样做——它确实这样做了`if bool(x) is False`（这是 Python 的*真实性*概念——值评估为`True`or `False`），`bool(x)`实际上是对`x.__nonzero__()`（或`x.__bool__()`在 3.x 中）的调用。

这是为了提供 Python 的良好`if`行为 - 当您这样做时`if []:`，许多语言会将任何对象视为`True`，但 Python 旨在使代码可读，因此它委托并且列表的`__nonzero__()`方法将`False`在它为空时返回。这允许更多的代码读起来更自然，并解释了为什么你会看到这些调用。

# java - Java中经过的时间？

> ID：14046242
> 
> 赞同：0
> 
> 时间：2012-12-26T21:04:05.090
> 
> 标签：java, time, elapsedtime, elapsed

我正在我的 Java 课上做家庭作业。我得到了大部分内容，除了关于经过时间的部分。我们必须使用方法。这是我的作业和代码。

> “您刚刚被一家公司雇用来完成每周的工资单。您每天必须执行的一项功能是检查员工考勤卡并计算他们“打卡”和“打卡”之间经过的时间。你有时还必须将小时转换为分钟，将天转换为小时，将分钟转换为小时，将小时转换为天。由于您刚刚完成了第一堂编程课程，因此您决定编写一个程序来帮助您完成工作。
> 
> 您决定按以下方式构建您的程序。主要功能只是一个菜单，用户可以从中选择以获取他们想要的信息。菜单上的每个选项都会调用特定的方法来解决任务和/或输出答案。
> 
> 对于这个程序，您可以假设所有经过的时间都在一天之内，但其他时间可能会更远。请务必提供足够的测试数据来证明您的解决方案是正确的。（为每个转换显示至少一个输出[对于选项#5 可能有几个]）。"

```
import java.util.*;
public class Prog671A
{
    public static void hoursToMinutes()
    {
        Scanner input = new Scanner (System.in);
        System.out.print("Enter hour(s): ");
        int hours = input.nextInt();
        System.out.println(hours + " * 60 = " + (hours * 60) + " minutes.");
        System.out.println("");
    }

    public static void daysToHours()
    {
        Scanner input = new Scanner (System.in);
        System.out.print("Enter day(s): ");
        int days = input.nextInt();
        System.out.println(days + " * 24 = " + (days * 24) + " hours.");
        System.out.println("");
    }
    public static void minutesToHours()
    {
        Scanner input = new Scanner (System.in);
        System.out.print("Enter minute(s): ");
        int minutes = input.nextInt();
        System.out.println(minutes + " / 60 = " + ((double)minutes / 60) + " hours.");
        System.out.println("");
    }
    public static void hoursToDays()
    {
        Scanner input = new Scanner (System.in);
        System.out.print("Enter hour(s): ");
        int hours = input.nextInt();
        System.out.println(hours + " / 24 = " + ((double)hours / 24) + " days.");
        System.out.println("");
    }
    public static void elapsedTime()
    {
        Scanner input = new Scanner (System.in);
        System.out.print("Enter the beginning hour: ");
        int startingHour = input.nextInt();
        System.out.print("Enter the beginning minute(s): ");
        int startingMinutes = input.nextInt();
        System.out.print("Enter AM/PM: ");
        String startingAmOrPm = input.nextLine();
        System.out.print("Enter the ending hour: ");
        int endingHour = input.nextInt();
        System.out.print("Enter the ending minute(s): ");
        int endingMinutes = input.nextInt();
        System.out.print("Enter AM/PM: ");
        String endingAmOrPm = input.nextLine();
        System.out.println("");
        System.out.println("The elapsed time is: " + );
    }
    public static void main (String args [])
    {
        int x = 1;
        while (x == 1) {
        Scanner input = new Scanner (System.in);
        System.out.println("Conversion Tasks");
        System.out.println("\t1\. Hours -> Minutes");
        System.out.println("\t2\. Days -> Hours");
        System.out.println("\t3\. Minutes -> Hours");
        System.out.println("\t4\. Hours -> Days");
        System.out.println("\t5\. Elapsed time between two times");
        System.out.println("\t6\. Exit");
        System.out.print("Enter a number: ");
        int menu = input.nextInt();
        System.out.println("");
        if (menu == 1)
            hoursToMinutes();
        if (menu == 2)
            daysToHours();
        if (menu == 3)
            minutesToHours();
        if (menu == 4)
            hoursToDays();
        if (menu == 5)
            elapsedTime();
        if (menu == 6)
            x = 0;
        }
    }
} 
```

我只是在这里需要帮助

```
public static void elapsedTime()
{
    Scanner input = new Scanner (System.in);
    System.out.print("Enter the beginning hour: ");
    int startingHour = input.nextInt();
    System.out.print("Enter the beginning minute(s): ");
    int startingMinutes = input.nextInt();
    System.out.print("Enter AM/PM: ");
    String startingAmOrPm = input.nextLine();
    System.out.print("Enter the ending hour: ");
    int endingHour = input.nextInt();
    System.out.print("Enter the ending minute(s): ");
    int endingMinutes = input.nextInt();
    System.out.print("Enter AM/PM: ");
    String endingAmOrPm = input.nextLine();
    System.out.println("");
    System.out.println("The elapsed time is: " + );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T21:15:29.977

只需将开始和结束时间转换为自一天开始（午夜）以来的分钟数。对于下午，只需在转换为分钟之前将 12 添加到小时。然后减去并转换回经过时间的小时和分钟。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-26T21:12:50.883

你为什么要手动花费时间等东西？读取用户登录时的系统日期 System.currentTimeMillis() 将此时间存储在某处

当用户存在时，同样获取系统时间。从用户登录时最初存储的时间中减去它。

我希望这就是你要找的东西？

# c# - 无法翻译表达式

> ID：14046245
> 
> 赞同：4
> 
> 时间：2012-12-26T21:04:10.277
> 
> 标签：c#, linq-to-sql

```
from p in context.ParentCompanies
where p.Name.Contains(e.Filter)
orderby p.Name
select new { Company = p.Name + "," + p.Country  }; 
```

*当我添加p.Country*或任何其他属性时，上述`linq`查询失败。

 *例外：

*`Could not translate expression 'Table(ParentCompany).Where(p => p.Name.Contains(Invoke(value(System.Func'1[System.String])))).OrderBy(p => p.Name)' into SQL and could not treat it as a local expression`.*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T23:59:37.897

LINQ to SQL 无法将您的字符串操作转换为 SQL。从数据库中选择 p.Name 和 p.Country，然后在单独的步骤中连接，如下所示：

```
var parentCompanies = (from p in context.ParentCompanies
                       where p.Name.Contains(e.Filter)
                       orderby p.Name
                       select new { p.Name, p.Country }).ToList();

var concatenated = (from c in parentCompanies
                    select new { Company = c.Name + "," + c.Country }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:17:19.390

尝试创建一个`class`并继承`ParentCompanies`

```
public ParentCompaniesEntity : ParentCompanies
{
   public string CompanyCountry {get; set;}
} 
```

这就是如何使用。

```
var parentCompanies = (from p in context.ParentCompanies
                       where p.Name.Contains(e.Filter)
                       orderby p.Name
                       select new ParentCompaniesEntity() 
                       { 
                         CompanyCountry = p.Name + ", " + p.Country
                       }).ToList(); 
```*

# types - 是否存在静态弱类型语言？

> ID：14046246
> 
> 赞同：13
> 
> 时间：2012-12-26T21:04:29.827
> 
> 标签：types, casting, programming-languages

我一直在阅读

*   *静态*（在编译时检查类型）和
*   *动态*（在运行时检查类型）类型

相对

*   *强*（无隐式转换）和
*   *弱*（隐式转换）类型

我知道它们是不同的东西（也讨论过[这里](https://stackoverflow.com/questions/2351190/static-dynamic-vs-strong-weak)）所以我一直在以这种方式考虑示例语言：

*   *静态*-*强*（C、C++、Java、..）
*   *静态*-*弱*（？？？）
*   *动态*-*强*（python、ruby、..）
*   *动态*-*弱*（perl、javascript、..）

所以我的问题是，那里有没有静态弱类型语言？（我想如果不是没有的话，这样做也没什么意义）。而且我上面的理解/例子是否正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-01T17:58:22.773

强类型和弱类型的定义没有很好的定义，尤其是在只评价一种语言的情况下。它是比较语言的常用轴，在这种情况下，强类型和弱类型获得更多意义，但重要的是要了解没有像静态和动态这样的严格定义。使类型系统变弱或变强的原因归结为程序员能够创建类型错误的方式。

## 未经检查的显式转换

很多人会认为 C 是弱类型的，因为允许程序员转换类型。如果我只是告诉 C 它们都是整数，我可以添加一个指向字符的指针。

```
int main () {
    char c = 'a';
    void *p;
    (int)c + (int)p;
} 
```

然而，在 Haskell 中，我可以显式地将一种类型转换为另一种类型，但只有某些类型可以工作。

```
ord('c') + 10
fromIntegral (2::Int) + 4.13 
```

Java 也有静态类型转换，它允许程序员例如向下转换对象。这使得静态类型系统不健全。但是 Java 正是出于这个原因而具有动态类型检查。是的，Java 有动态和静态类型检查。然而，出于这个原因，我认为很多人会认为 Java 是强类型的。

## 自动铸造

Perl 和 Javascript 将接受字符串并将它们视为数字，如果它们看起来足够像数字并自动使其工作。

```
'2 is my favorite number' + 413 == 415 # in Perl 
```

如果你想将一个字符串转换为一个数字，比如说，Scheme，你必须使用一个函数进行显式转换，如果它们的字符串不是数字，它会进行检查并引发异常。

```
(= (+ (string->number '2') 413) 415) ; In Scheme 
```

出于这个原因，很多人会认为 Scheme 是强类型的。

## 根本没有类型

在某些语言中没有任何类型。无类型的 Lambda 演算就是这样一个例子。这显然不是强类型的。一切都是函数。我可以使用教堂数字或对或字符串或任何使用各种编码的数字，但值仅表示我同意它们的含义，并且肯定存在重叠。

## 比较

就像我说的，这些术语没有很好的定义，但是当以相对的方式使用时它们会更有用一些。例如，我可以很好地声称 OCaml 比 Java 类型更强大，因为 Java 允许显式静态向下转换，而 OCaml 不允许。

## 结论

这些术语并不严格，但它们很有用。为了回答您最初的问题，在我看来，C/C++ 是静态且弱类型的，因此它们符合描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T04:23:04.380

C# 允许用户定义的隐式转换，因此它符合您对“静态”和“弱”的定义（尽管“弱点”是有界的）。

# ruby-on-rails - Cancan + 设计rescue_from 未捕获异常

> ID：14046247
> 
> 赞同：1
> 
> 时间：2012-12-26T21:04:30.613
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, cancan

我正在为用户身份验证和权限实施 Devise 和 Cancan。到目前为止，一切都很好，除了当不允许用户访问特定功能时，我无法将用户重定向到登录页面。

我的测试是：

```
feature 'A signed in user' do
  before(:each) do
    user = FactoryGirl.create(:user)
    visit "/login"
    fill_in "user_email", :with => user.email
    fill_in "user_password", :with => "ilovebananas"
    click_button "Sign in"
  end

  scenario 'should not have access to admin dashboard' do
    visit '/admin'
    page.should have_content 'Log in'
  end
end 
```

我得到以下失败：

```
Failures:
      1) A signed in user should not have access to admin dashboard
         Failure/Error: visit '/admin'
         CanCan::AccessDenied:
         You are not authorized to access this page. 
```

需要明确的是，到目前为止，我的所有权限管理都按预期工作，除了重定向到登录页面。

* * *

## 这是设置的方式：

**应用控制器：**

```
check_authorization :unless => :devise_controller? # Cancan

rescue_from CanCan::AccessDenied do |exception|
  redirect_to login_path, alert: exception.message
end 
```

**用户控制器**

```
class UsersController < ApplicationController
  load_and_authorize_resource         # Cancan
  def queue  
    ...
  end

  ...
end 
```

**管理员控制器**

```
class AdminController < ActionController::Base
  authorize_resource :class => false # Cancan, used because AdminController doesn't have an associated model
  ...
end 
```

**能力.rb**

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user, not logged in
    can :queue, User

    if user.has_permission? :super_admin
      can :manage, :all
    elsif user.has_permission? :network_admin

    end      
  end
end 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:19:00.763

您必须将类名作为字符串传递。尝试引用它。或尝试

```
rescue_from CanCan::AccessDenied , :with => :login_page
private
def login_page
   redirect_to login_path
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:19:18.660

您应该在没有条件的情况下将“controller.authorize_resource”添加到 admin/register.if 能力。

```
controller.authorize_resource 
```

示例：可以：管理，：所有

如果有条件，

```
controller do
  load_and_authorize_resource :except => [:update,:index, :show, :edit]
    def scoped_collection
      end_of_association_chain.accessible_by(current_ability)
  end
end 
```

示例：can :manage, Master::Country, :organization_branch_id => each_branch.id

我希望它对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T22:27:15.937

我的 Admins Controller 不是 < ApplicationController，因此它没有加载 ApplicationController rescue_from 方法。

进行更改解决了我的问题。

# php - imagejpeg()、imagepng() 和 imagegif() 会替换现有文件吗？

> ID：14046248
> 
> 赞同：6
> 
> 时间：2012-12-26T21:04:33.250
> 
> 标签：php, image, image-processing

标题解释得很好，如果我使用这些函数的第二个参数`imagejpeg()`，是否替换现有文件？`imagepng()``imagegif()`

第二个参数是您要存储创建的图像的位置，但是如果已经有一个我选择的名称的文件怎么办？这些函数如何处理这些情况？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-26T21:05:42.037

是的，他们将覆盖指定路径中的现有文件，如果它已经存在的话。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-28T13:37:23.207

是的，我自己测试，如果你使用这些函数的第二个参数，它会替换现有文件！</p>

# jquery - jQuery 性能 - 类选择器

> ID：14046251
> 
> 赞同：3
> 
> 时间：2012-12-26T21:05:04.653
> 
> 标签：jquery, jquery-selectors

我有以下 HTML：

```
<div class="foo">
    <div class="bar">
        <div class="target">
        </div>
    </div>
</div> 
```

哪个选择器效率更高？

*   `$('.foo > .bar > .target')`
*   `$('.foo .bar .target')`
*   `$('.target')`

我是否正确订购了它们？:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T21:13:46.923

小心不要被这些类型的问题所困扰——微优化真的会毁掉一个项目。不是时不时思考不好，而是真心的，小心谨慎。

如果您仍然想知道这三个中哪一个更快，您可以通过[http://jsperf.com](http://jsperf.com)设置一个快速性能测试，并针对该标记对所有三个进行测试。幸运的是，我为您省去了麻烦并自己设置了测试；）[http://jsperf.com/css-selector-specificity](http://jsperf.com/css-selector-specificity)

结果：

```
 Ops/Sec
----------------------------+---------+--------+------------
$('.foo > .bar > .target'); |  78,379 | ±6.54% | 65% slower
$('.foo .bar .target');     |  78,499 | ±7.72% | 66% slower
$('.target');               | 213,488 | ±0.39% | fastest 
```

如您所见，这三个中最简单的要快得多。您的结果会因浏览器而异。例如，以上来自 Chrome 版本 23。当我在 Internet Explorer 10 中运行此测试时，它甚至更快，每秒执行超过 216,000 次操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:09:37.387

$("#foo") 是最有效的，但我读过的 $('.foo').find(".target") 是最好的 [http://net.tutsplus.com/tutorials/javascript-ajax/14-有用的jQuery技巧笔记和最佳实践/](http://net.tutsplus.com/tutorials/javascript-ajax/14-helpful-jquery-tricks-notes-and-best-practices/)

# javascript - 可以在 Web 应用程序中打开多个文件

> ID：14046252
> 
> 赞同：0
> 
> 时间：2012-12-26T21:05:09.537
> 
> 标签：javascript, html, blackberry, blackberry-webworks

我在 Flex 中制作了一个文本编辑器，它一次只允许您处理一个文本文件。我想将它重做为一个 Blackberry WebWorks 应用程序，它允许您同时打开多个文件，允许用户通过操作栏在打开的文件之间切换。我可以打开一个文件，但不确定是否/如何为多个文件执行此操作。

在 Flex 中，我知道如何在屏幕之间传递数据，但是 javascript 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:24:47.953

这取决于你如何设计你的应用程序。如果您遵循 MVC 模式，您可以拥有一个 HTML 文件，并使用 JavaScript 为不同的“屏幕”加载/输出内容（例如，jQuery Mobile 使这很容易）。在这种情况下，您可以使用全局 JavaScript 变量（推荐包含变量的模块）或某种形式的 localStorage 在这些屏幕之间轻松共享数据。

否则，如果您使用单独的 HTTP 请求从不同的 HTML 文件加载内容，则需要先将状态/模型保存到 localStorage。

# c# - javascript 对象加载 C# 字典中的值（并将其作为字典传递 )

> ID：14046258
> 
> 赞同：2
> 
> 时间：2012-12-26T21:05:42.167
> 
> 标签：c#, javascript, jquery, asp.net

我可以看到他们中的许多人提出了相反的问题

我的问题是我如何*打包*价值观？

```
var KeyName = "name" or.. $(ControlId).attr("id")
var ValName = $(ControlId).val() 
```

然后在当然序列化之后使用ajax发布该值（如果需要）

```
var CS_Pckg = Sys.Serialization.JavaScriptSerializer.serialize(DictionaryLike_Package);
ajaxPost(CS_Pckg);

...some ajax function 
```

它像一个数组吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:22:14.577

jQuery 有一个“序列化”方法，可用于 HTML 表单的序列化：http: [//api.jquery.com/serialize/](http://api.jquery.com/serialize/)

但是，该方法序列化为 GET 字符串；如果您想要一组名称/值对对象，请查看 serializeArray：[http ://api.jquery.com/serializeArray/](http://api.jquery.com/serializeArray/)

如果这些都没有产生你想要的输出，你几乎只需要自己进行序列化。您可以使用 jQuery 的 each 方法遍历一组元素，然后您可以从中提取任何您想要的信息。完成后，您拥有一个包含所有数据的 Javascript 对象，您可以使用`JSON.stringify(thatObject);`.

这是一个简单的例子：

```
var serializedData = {};
$('#yourForm').children().each(function(i, elem) {
    var $elem = $(elem);
    serializedData[$elem.attr('name')] = $elem.val();
});
alert("You're serialized JSON is: " + JSON.stringify(serializedData)); 
```

（前面的选项没有例子，因为它们很简单`var serialized = $('#yourForm').children().serialize();`。）

# visual-studio-2012 - SQL Server 2012 express 是无服务器的吗

> ID：14046259
> 
> 赞同：-2
> 
> 时间：2012-12-26T21:05:42.690
> 
> 标签：visual-studio-2012, sql-server-2012-express

您好，我已经安装了**Visual Studio 2012 Express Desktop**。我不确定 Visual Studio 2012 Express Desktop 附带的 sql server 软件是否是无服务器的。我已经在工作中安装了它，并且不想在我的计算机上安装服务器，因为我确信它会打开端口，这将是一个工作中的安全问题。你知道它是否是无服务器的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:08:20.770

是的。肯定有服务器参与。

不过，您不必担心端口被打开。假设您有防火墙阻止端口，SQL Server Express 的安装不会在未经您许可的情况下修改它。

# c# - 使用 Linq 进行迭代

> ID：14046263
> 
> 赞同：3
> 
> 时间：2012-12-26T21:05:58.863
> 
> 标签：c#, linq

我试图找到一种从同一行中的 Linq 方法访问先前值的方法。

我希望能够在 Linq 中使用这种通用形式：

```
var values = Enumerable.Range( 1, 100 ).Select( i => i + [last result] ); 
```

但是如果没有多行 lambda 并将结果存储在其他地方，我无法找到一种方法来做这样的事情。

所以我在 Linq 中能做的最好的斐波那契总和是：

```
List<int> calculated = new List<int>( new int[] { 1, 2 });
var fibonacci = Enumerable.Range(2, 10).Select(i =>
    {
        int result = calculated[i - 2] + calculated[i - 1];
        calculated.Add(result);
        return result; // and how could I just put the result in fibonacci?
    }
); 
```

这看起来很丑陋。我可以用更少的代码用常规的 for 循环来做到这一点。

```
for (int i = 2; i < 10; i++)
{
    calculated.Add(calculated[i - 2] + calculated[i - 1]);
} 
```

似乎如果我能找到一种方法来做到这一点，我可以使用 Linq 来做很多线性规划并总结很多迭代公式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T21:15:52.777

如果您正在寻找一种创建斐波那契序列生成器的方法，最好编写自己的生成器函数，而不是使用 Linq 扩展方法。像这样的东西：

```
public static IEnumerable<int> Fibonacci()
{
    int a = 1;
    int b = 0;
    int last;

    for (;;) {
        yield return a;

        last = a;
        a += b;
        b = last;
    }
} 
```

`Fibonacci().Take(20)`然后，您可以将 Linq 方法应用于此可枚举以实现您想要的结果（例如，尝试迭代）。

Linq 扩展方法并不是所有编程问题的解决方案，我只能想象纯 LINQ 斐波那契数列生成器看起来会多么可怕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:15:35.257

最接近 LINQ 的方法是[IEnumerable.Aggregate](http://msdn.microsoft.com/en-us/library/bb548651.aspx)方法（又名函数式编程中的 fold）。例如，您可以使用它来总结集合的平方，例如：

```
int sumSquares = list.Aggregate(0, (sum, item) => sum + item * item); 
```

由于在 LINQ 中，值是使用枚举器从集合中检索的，也就是说，它们是一个接一个的，根据定义，没有“上一个项目”的概念。这些物品甚至可以使用一些`yield return`魔法即时生成和丢弃。也就是说，您总是可以使用一些技巧，例如：

```
long a= 1;
long b= 1;
var fibonacci = Enumerable.Range(1,20).Select(i => {
  long last= a + b;
  b = a;
  a = last;
  return last;
}); 
```

但是当您必须使用和修改外部变量以使 lambda 工作时，您就处于代码异味领域。

# client-server - 多客户端 RPC 路由守护进程

> ID：14046269
> 
> 赞同：1
> 
> 时间：2012-12-26T21:06:50.540
> 
> 标签：client-server, rpc

我花了几个星期寻找能够执行以下操作的守护进程：

*   处理来自其他网络主机的任意数量的客户端。
*   允许客户端以一个身份注册服务。
*   允许其他客户端通过可靠的错误处理对这些注册的服务进行 RPC 调用（如果为该服务注册的客户端分离，则守护程序应向调用者报告错误，而不是让它挂起）。
*   允许客户端注册以接收其他客户端可以广播的事件。
*   越简单越好。

我在 F/LOSS 世界中发现的最接近的东西是 D-Bus，它满足所有这些标准，除了第一个标准：它不能可靠地与远程连接一起工作。我已经花时间研究其他选项（ESB 和 MQ 守护程序——花费最多时间在 0MQ 和 RabbitMQ 上），它们都以某种方式不足：ESB 往往非常复杂，学习曲线高，而 MQ 守护程序倾向于提供一半的解决方案（路由），而让另一半（错误恢复）极其复杂，如果不是不可能的话。

除了一个客户说“我提供服务'foo'”和另一个客户说“我想在服务'foo'上调用方法'bar'”之外，我并没有寻找任何出色的路由功能。

似乎这样的东西已经存在了，我犹豫要不要自己动手。

用例是我将在许多主机上拥有许多进程。每个主机都有一个调控器进程/服务，它将通过控制面板控制这些进程的生命周期。流程本身也将是服务，允许直接查询状态以及来自此面板的重新配置请求。诀窍是进程会来来去去，所以端点的静态配置不是我真正想要打扰的事情。我宁愿让每个进程负责告诉守护进程“我正在为某某服务”，然后让守护进程执行客户端间路由。

开发这个系统我真正缺少的唯一部分是可以在所有这些进程之间路由 RPC 请求的东西。那里有这样的守护进程，还是有其他模型更适合我的需求？

# c++ - C++不同的子类需要不同的参数

> ID：14046270
> 
> 赞同：1
> 
> 时间：2012-12-26T21:06:51.953
> 
> 标签：c++, design-patterns, inheritance

我正在寻找完成以下任务的最佳方法：

**背景**

我有一个带有`request()`虚拟方法的基础类，不同的子类提供了执行请求的替代实现。我的想法是让客户端实例化这些子类之一并将这些对象之一传递给子系统，该子系统将`request()`在需要时调用。目标是让客户端决定如何通过实例化所需的子类来处理请求。

**问题**

但是，如果选择了某个子类实现，则它需要来自子系统的一条信息，该信息最自然地作为参数传递给请求（即`request(special_info);`）。但其他子类不需要这个。有没有一种干净的方法来隐藏这种差异或可以在这里使用的适当设计模式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:21:13.527

JB Nizet 的建议是一种可能的解决方案——它肯定会奏效。

让我有点担心的是“有些人需要更多信息”这个相当模糊的概念。这些信息来自哪里，是什么决定的？继承的一般原则是你有一个基类，它为所有对象做正确的事情。如果你不得不说“它是 A 型对象还是 B 型对象，那么就这样做，否则如果它是 C 型对象，则做一些稍微不同的事情，如果是 D 型对象，则做另一种事情”，那么你重新做错了。

可能 JB 的建议对您来说是正确的，但我也会考虑“special_info”可以传递给构造函数，或者通过一些辅助函数获取的选项。构造函数解决方案是一个理智的解决方案，因为在构造时，很明显，您需要知道您正在创建的对象是 A、B、C 还是 D 对象。辅助函数有时是一个很好的解决方案，但如果使用不当，可能会导致解决方案有点混乱，因此请谨慎使用。

通常，当事情以这种方式结束时，这是因为您将班级“错误地”分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:14:06.773

使基`request()`方法将信息作为参数，并忽略不需要的子类实现中的参数。

或者将SubSystem实例本身传递给handler，让handler从SubSystem获取它需要的信息（如果它不需要来自SubSystem的任何信息就忽略它）。这将使设计更具可扩展性：您无需在每次引入需要额外信息的新子类时传递额外的参数并重构所有方法。

# c++ - 库编译正常时出现链接器错误 (LNK2001)

> ID：14046272
> 
> 赞同：2
> 
> 时间：2012-12-26T21:07:36.477
> 
> 标签：c++, winapi, visual-c++, glew

我正在尝试编译我正在研究的小型 2D 引擎。到目前为止一切顺利，但自从我加入 GLEW（因为我想开始研究一些片段着色器）后，测试程序就拒绝构建。为了澄清，我将引擎构建为静态库 (Mage2D.lib)，然后构建使用该库的测试程序。

这是我得到的错误：

```
1>Link:
1>  libpng15.lib(pngget.obj) : MSIL .netmodule or module compiled with /GL found; restarting link with /LTCG; add /LTCG to the link command line to improve linker performance
1>LINK : warning LNK4098: defaultlib 'LIBCMT' conflicts with use of other libs; use /NODEFAULTLIB:library
1>Mage2D_D.lib(root.obj) : error LNK2001: unresolved external symbol __imp__glewIsSupported@4
1>Mage2D_D.lib(root.obj) : error LNK2001: unresolved external symbol __imp__glewInit@0
1>C:\Users\Jesse\Documents\Visual Studio 2010\Projects\Rose\Debug\MageTest.exe : fatal error LNK1120: 2 unresolved externals
1>
1>Build FAILED. 
```

现在通常我意识到这意味着我没有在我的测试程序（glew32.lib）中包含正确的库。但这不可能在这里，因为我将 glew.c 构建到 Mage2D.lib 中。GLEW 实际上是 Mage2D 源代码的一部分，因为它似乎很方便，因为它有四个文件并且无论如何都是引擎的组成部分。

我按照 GLEW 在他们网站上的说明，写了关于如何构建 GLEW 并将其包含到我的项目中的信函，但我一直收到此错误。

这到底是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T06:23:30.570

我检查了 glew.h 并且我很确定您需要在包含 glew.h 之前添加**GLEW_STATIC定义：**

```
#define GLEW_STATIC
#include "GL/glew.h" 
```

# svg - svg feComponentTransfer 线性函数

> ID：14046274
> 
> 赞同：5
> 
> 时间：2012-12-26T21:07:43.947
> 
> 标签：svg, svg-filters

SVG`feComponentTransfer`线性函数没有像我预期的那样工作。应用于灰度图像的斜率为 -1 和截距为 1 应该反转图像：黑色 -> 白色，白色 -> 黑色，25% 灰色 -> 75% 灰色，50% 灰色不变，等等。

我的期望是基于[http://www.w3.org/TR/filter-effects/#feComponentTransferElement](http://www.w3.org/TR/filter-effects/#feComponentTransferElement)，上面写着“C' = 斜率 * C + 截距”，其中“C 是初始组件（例如，'feFuncR'） , C' 是重新映射的分量；都在闭区间 [0,1] 中。”。

以下过滤器

```
<filter id="linear">
  <feComponentTransfer>
    <feFuncR type="linear" slope="-1" intercept="1" />
    <feFuncG type="linear" slope="-1" intercept="1" />
    <feFuncB type="linear" slope="-1" intercept="1" />
  </feComponentTransfer>
</filter> 
```

将黑色映射到白色，将白色映射到黑色，但中间值关闭，例如 50% 灰色映射到 90% 灰色，75% 灰色映射到 98% 灰色。有关简单示例，请参见[http://jsfiddle.net/Rpjs2/](http://jsfiddle.net/Rpjs2/)。我在 Firefox 和 Safari 中得到相同的结果。

这是我第一次尝试 SVG 过滤器，所以我怀疑我误解了规格。有人可以纠正我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T14:25:50.507

过滤器通常在线性RGB 颜色空间中工作。此用例需要 sRGB，因此您只需在过滤器元素上设置[color-interpolation-filters](http://www.w3.org/TR/SVG/painting.html#ColorInterpolationFiltersProperty) ="sRGB"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T20:55:27.697

您可以在原始文件之后使用另一个组件传输来纠正此问题 **。**

```
 <feComponentTransfer>
    <feFuncR type="gamma" offset="0" amplitude="1" exponent="4.84"/>
    <feFuncG type="gamma" offset="0" amplitude="1" exponent="4.84"/>
    <feFuncB type="gamma" offset="0" amplitude="1" exponent="4.84"/>
  </feComponentTransfer> 
```

这将使用 的“双”伽马校正更适当地扩展颜色范围`2.2 ^ 2 = 4.84`。

# android - 安卓：findViewById(R.id.btn_mAmperClear).setOnClickListener

> ID：14046276
> 
> 赞同：1
> 
> 时间：2012-12-26T21:07:48.617
> 
> 标签：android, android-intent

我的简单 Android 应用程序中的 setOnClickListener 有一些问题。我的情况：

我有 4 个按钮的主屏幕按钮 1（工作）按钮 2（工作）按钮 2（EEeeeee...rror）按钮 4（尚未连接）

我已经将 2 个第一个按钮与新活动联系起来（一切都很好）。当我创建第三个按钮时，问题就开始了。我有代码：

```
findViewById(R.id.btn_mAmperClear).setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v){

        }
    }); 
```

使用清晰的类文件（上面没有代码的java文件）一切都很好 - 我没有错误，在我添加上面的代码之后我的应用程序崩溃了:(

致命异常：main java.lang.RuntimeException：无法启动活动 ComponentInfo{package.Name.ActivityName} java.lang.NullPointerException

其他 3 种情况效果很好（上面的代码有效）。

谁能帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T13:54:54.490

调用`findViewById(R.id.btn_mAmperClear)`返回 null。这意味着您实际上在活动的 layout.xml 中没有具有该 ID 的视图。

无论是那个还是这都是“Eclipse 没有正确构建我的项目，因为它太愚蠢而无法了解依赖链并且它没有编译它应该编译的所有内容”错误之一。如果是这种情况，只需对您的项目进行“清理”并从头开始重建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:34:00.387

以这种方式这样做..

```
private Button btn1;
private Button btn2;
private Button btn3;
private Button btn4;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.yourPage);

    btn1=(Button)findViewById(R.id.btn_1);
    btn2=(Button)findViewById(R.id.btn_2);
    btn3=(Button)findViewById(R.id.btn_3);
    btn4=(Button)findViewById(R.id.btn_4);

    btn1.setOnClickListener(this);
    btn2.setOnClickListener(this);
    btn3.setOnClickListener(this);
    btn4.setOnClickListener(this);
    }

public void onClick(View v) {
    // TODO Auto-generated method stub

    switch (v.getId()) {

    case R.id.btn_1:
                    //do your stuff
        break;
    case R.id.btn_2:
                    //do your stuff
        break;
    case R.id.btn_3:
                    //do your stuff
        break;
    case R.id.btn_4:
                    //do your stuff
        break;
     }
} 
```

# java - 使用 lpr 使用 java 打印文件

> ID：14046277
> 
> 赞同：3
> 
> 时间：2012-12-26T21:07:48.783
> 
> 标签：java, android, pdf, printers, lpr

我正在**java**上编写一个 lpr 客户端，以将文件（PDF、doc 等）发送到打印机（hp laser-jet 4250dtn）客户端和服务器都在运行**UNIX**

打印机在服务器上（这就是我使用 lpr 的原因）一切都很好，我确实设法打开套接字，发送控制文件（根据 RFC 1179）并发送文件本身。

该文件正在进入打印机“队列”。

我的问题是当我想从打印机打印文件时，它出现错误并且根本无法理解（看不到任何文本，只是奇怪的符号）。

我的问题是我给出或制作什么文件类型（将文件更改为 postscript？？）以便打印机能够理解我？还是我做错了什么？

我在此处附加代码，以便您可以查看并突出显示我从文件路径打开文件的行

```
Socket socketLpr = getSocket(hostName);
    socketLpr.setSoTimeout(30000);
    OutputStream sOut = socketLpr.getOutputStream();
    InputStream sIn = socketLpr.getInputStream();

    //Open printer
    s = "\002" + printerName + "\n";
    sOut.write(s.getBytes());
    sOut.flush();
    acknowledge(sIn, "lpr Failed to open printer");

    //Send control file     
    controlFile += "H" + hostName + "\n";
    controlFile += "P" + userName + "\n";
    controlFile += ((printRaw) ? "o":"p") +"dfA" + strJobNumber + hostName + "\n";
    controlFile += "UdfA" + strJobNumber + hostName + "\n";
    controlFile += "N" + documentName + "\n";

    s = "\002" + (controlFile.length()) + " cfA" + strJobNumber + hostName + "\n";
    sOut.write(s.getBytes());

    acknowledge(sIn, "lpr Failed to send control header");

    buffer = controlFile.getBytes();
    sOut.write(buffer);
    buffer[0] = 0;
    sOut.write(buffer, 0, 1);
    sOut.flush();

    acknowledge(sIn, "jLpr Failed to send control file");

    //Send print file       
    **f = new File(fileName);** // <- here is when im oppening the file(pdf,word,etc)
    if (!(f.exists() && f.isFile() && f.canRead())) {
        throw new IOException("jLpr Error opening print file");
    }
    s = "\003" + (f.length()) + " dfA" + strJobNumber + hostName + "\n";
    sOut.write(s.getBytes());
    sOut.flush();
    acknowledge(sIn, "jLpr Failed to send print file command");

    FileInputStream fs = new FileInputStream(f);

    int readCounter;
    do {
        readCounter = fs.read(buffer);
        if (readCounter>0) {
            sOut.write(buffer, 0, readCounter);
        }
    } while (readCounter>0);
    buffer[0] = 0;
    sOut.write(buffer,0,1);
    sOut.flush();
    acknowledge(sIn, "jLpr Failed to send print file");

    socketLpr.close();
} 
```

# soundcloud - Soundcloud API / 下载集（播放列表）

> ID：14046278
> 
> 赞同：0
> 
> 时间：2012-12-26T21:07:54.560
> 
> 标签：soundcloud

我正在使用 SoundCloud API 开发一个自定义播放器小部件。我想允许下载完整的 CD/EP，该 CD/EP 由集/播放列表表示为 zip 包或类似的东西。*播放列表*REST 请求提供带有字段“可下载”的 JSON 结果，但不像轨道 REST 请求那样提供字段“ download_url *”*。

是否可以让小部件用户一次下载完整的集合，也许仅适用于高级会员？如果没有，将来对于任何高级帐户是否有可能？

我认为这对于想要提供新发行专辑作为可下载的促销礼物的用户来说非常有用。目前，用户必须分别单击每个曲目的下载按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:14:21.650

让我从一个旁注开始：我们不支持 SoundCloud，所以告诉我们你真的*很*喜欢一个功能并不能真正*实现*太多。

现在回答您的问题：我确信通过一些服务器端工作是可能的。您可以在服务器端下载曲目并为用户打包并提供给他们。

# c++ - Visual Studio 监视窗口如何知道展开`std::vector ` 并显示元素？

> ID：14046281
> 
> 赞同：4
> 
> 时间：2012-12-26T21:08:15.133
> 
> 标签：c++, visual-studio, std

如果您`std::vector<T>`在监视窗口中展开 a，您将获得“[0]”、“[1]”等项目，集合中的每个值对应一个。

在实现我自己的集合类（顺便说一下，它包装了一个动态数组）时，我想要同样的功能。

Visual Studio 如何知道要在监视窗口中显示多少元素`std::vector`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T21:10:50.773

有一个名为的文件`autoexp.dat`，调试器使用它来解释自定义类型。它不是正式的要编辑的，但我们已经在内部将它用于集合类型并且它工作正常。有一些粗糙的边缘。

[http://msdn.microsoft.com/en-us/library/zf0e8s14.aspx](http://msdn.microsoft.com/en-us/library/zf0e8s14.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T23:50:02.487

在 2012 年及以后，答案是 Debugger Type Visualizers。 [有关 2012 版本的信息，请参阅 Visual Studio 团队博客，有关](http://blogs.msdn.com/b/vcblog/archive/2012/07/12/10329460.aspx) 详细信息（如果您想实现自定义），请查看 MSDN 文档。

# jquery - 将父母的 id 添加到附加的克隆，同时将重命名的克隆附加到多个父母

> ID：14046285
> 
> 赞同：2
> 
> 时间：2012-12-26T21:08:20.017
> 
> 标签：jquery, attributes, append, clone, parent-child

是否可以克隆单个元素，将其附加到许多元素，并将每个新父级的各自 id 添加到 jQuery 一行上的每个新的各自克隆中？

我可以克隆和追加，但我不知道如何获取要追加的元素的 id。

这是据我所知：

```
$(".myClass tr td:last-child").append($("#elementToClone").clone(false).attr('id',$(this).attr('id') + ?)); 
```

`?`我在哪里迷路了。

提前谢谢了！

**少数班轮欢迎**

不知道这可能是一种可能性，但 1 比 2 或 3 好。很少有班轮可以得到支票，直到 1 班轮出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T21:32:32.273

如果使用父母 id 你的意思是`td`（*并且由于某种原因你想避免手动创建变量*），那么你可以

```
$(".myClass tr td:last-child").each(function(index, element) {
    $("#elementToClone").clone(false).attr('id', function(i, value) {
        return value + element.id;
    }).appendTo(element);
}); 
```

* * *

对于单个班轮，上述内容很容易变成

```
$(".myClass tr td:last-child").each(function(index, element) {$("#elementToClone").clone(false).attr('id', function(i, value) {return value + element.id;}).appendTo(element);}); 
```

这是没有空格的完全相同的代码..（*不知道为什么你给它重力..*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:25:07.747

试试这个：

```
$(".myClass tr td:last-child").each(function() {
    var $clone = $("#elementToClone").clone(false);
    $clone.attr('id', $clone.attr('id') + $(this).attr('id')).appendTo(this);
}); 
```

*未经测试*

# hibernate - 简单布尔字段的休眠别名

> ID：14046287
> 
> 赞同：5
> 
> 时间：2012-12-26T21:08:28.783
> 
> 标签：hibernate, alias, criteria, restrictions

我正在努力使用 Hibernate Criteria API。

在课堂`Conversation`上我有：

```
@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)
@JoinTable(name = "Conversation_ConversationParticipants",
           joinColumns = @JoinColumn(name = "ConversationID"), 
           inverseJoinColumns = @JoinColumn(name = "ConversationParticipantID"))
private List<ConversationParticipant> participants; 
```

在课堂上`ConversationParticipant`我有：

```
@OneToOne
@JoinColumn(name = "ParticipantID")
private User participant;

@Type(type = "true_false")
@Column(name = "Viewed")
private boolean viewed; 
```

在我的标准中，我有

```
 Criteria criteria = super.createCriteria();
    criteria.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY);
    criteria.createAlias("participants", "participants");  
    criteria.createAlias("participants.participant", "participant");
    criteria.add(Restrictions.eq("participant.id", user.getId()));

    return (List<Conversation>) criteria.list(); 
```

这一切正常，我可以看到给定用户的所有对话。但是，我想要查看用户尚未查看的所有对话。为此，我尝试添加：

```
 criteria.add(Restrictions.eq("participants.viewed", false)); 
```

但是，这会返回 0 个对话（如果我输入“true”，我会得到相同的结果，并且我已经检查了 db 并确保存在同时具有 true 和 false 的值）。我怎样才能做到这一点？我究竟做错了什么？

运行的查询是：

```
from
    Conversations this_ 
inner join
    Conversation_ConversationParticipants participan4_ 
        on this_.id=participan4_.ConversationID 
inner join
    ConversationParticipants participan1_ 
        on participan4_.ConversationParticipantID=participan1_.id 
inner join
    Users participan2_ 
        on participan1_.ParticipantID=participan2_.id 
where
    participan1_.Viewed=? 
    and participan2_.id=? 
```

数据库表：

```
 CREATE TABLE ConversationParticipants(ID BIGINT NOT NULL IDENTITY, Viewed CHAR(1), Type VARCHAR (255), ParticipantID BIGINT, PRIMARY KEY (ID)); 
```

根据下面的答案，我能够通过使用使其工作：

```
 criteria.add(Restrictions.eq("participants.viewed", Boolean.FALSE)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T10:01:23.240

您正在尝试做的事情在理论上是正确的，应该可以工作。尽管如此，我正在考虑一些可能被证明是错误的事情：

1.  确保正确使用您的 getter 和 setter。您的代码应如下所示：

    ```
    private boolean viewed;

    @Type(type = "true_false")
    @Column(name = "Viewed")
    public boolean isViewed() {
        return viewed;
    }

    public void setViewed(boolean viewed) {
        this.viewed = viewed;
    } 
    ```

2.  确保您的数据库字段是一个`BIT`（或您正在使用的数据库上布尔值的相应数据类型）。

3.  如果*1*和*2*都不起作用，我建议删除`@Type`注释，因为它没有必要，尽管它应该没有害处。

**编辑：**

您正在尝试将 a 映射`boolean`到 a `char`。我真的不明白你为什么要使用 a`char(1)`而不是 a `BIT`。不过，如果您想这样做，请使用`String`模型类中的 a 。

然后，如果您的 DB 列包含*0*或*1*，请使用：

```
criteria.add(Restrictions.eq("participants.viewed", "0")); 
```

或者，如果您的 DB 列包含*true/false*，请使用：

```
criteria.add(Restrictions.eq("participants.viewed", "false")); 
```

# wcf - IIS 托管的 WCF 休息服务出现 400 错误，URL 是否太长？

> ID：14046294
> 
> 赞同：1
> 
> 时间：2012-12-26T21:09:23.947
> 
> 标签：wcf, http, rest, iis, http-status-code-400

我有一个从浏览器 (IE,Chrome) 返回的 WCF rest\webHttpBinding 服务：

```
Bad Request - Invalid URL - 
HTTP Error 400\. The request URL is invalid. 
```

该服务使用 GET（我们可能应该更改为 POST，但最初我们被告知最大 url 将是 50 个字符），我很好奇问题是什么......只是为了我自己的想法。

我们之前遇到过这个问题，网址超过 300 个字符，因此在 Web 配置中我们设置了 maxUrlLength，如下所示。

```
 <system.web>
    <compilation targetFramework="4.0" />
    <httpRuntime maxUrlLength ="5000" maxQueryStringLength="2048" />
  </system.web> 
```

这在进行此更新时有效，但现在似乎不起作用，超过 300 的任何内容都会出现 400 错误。

我认为现在有其他东西阻止了请求。我说这个 b/c 之前我们在自己的日志文件和 wcf“诊断”日志文件中有信息。现在这些都没有写入......它就像服务甚至没有参与一样。以前，如果我在服务器本身上点击服务，我会收到此错误

```
The length of the URL for this request exceeds 
 the configured maxUrlLength value. 
```

但我不再得到那个错误。

我们不“拥有”服务器，即其他一些是管理员，并且之前在没有通知我们的情况下发生了变化。

我环顾四周，但大多数提到设置诊断。我从[http://social.msdn.microsoft.com获得了](http://social.msdn.microsoft.com/Forums/eu/wcf/thread/1df4e374-6f88-40d0-9bf3-54e034c7a928)[IIS 的 Http.sys 注册表设置，](http://support.microsoft.com/kb/820129)但似乎没有任何相关性。还添加一个部分，但我认为应该足够好（根据 SO 答案）

任何想法可能会发生什么？

谢谢！

.net 4.0、iis 7、windows server 2008

编辑：添加我可以将 maxUrlLength 更新为较小的值，比如 50，并使用 > 50 的 URL，但它失败但失败，并显示“此请求的 URL 长度超过了配置的 maxUrlLength 值”。信息。因此，在它到达 WCF 服务之前，我感觉有别的东西导致了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-27T12:46:12.933

我遇到了同样的问题，并且由于[这个答案](https://stackoverflow.com/questions/4419985/wcf-url-length-causing-iis-400-bad-request-error)能够通过添加以下内容来解决它：

```
<system.web>
  <httpRuntime maxUrlLength="500" />
</system.web> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-21T11:55:58.207

您的问题是您没有使用查询字符串，而是使用路径。路径的最大长度为 255。
查询字符串和调用 wcf 的路径之间的区别如下
**使用 path** = [http://testservice/service.svc/callfunction/testdata](http://testservice/service.svc/callfunction/testdata)
使用查询字符串
**使用查询字符串**- [http://testservice/ service.svc/callfunction?param1=testdata](http://testservice/service.svc/callfunction?param1=testdata)

# .net - 多个相互依赖的存储过程。应该在代码或存储过程中完成？

> ID：14046305
> 
> 赞同：0
> 
> 时间：2012-12-26T21:11:15.187
> 
> 标签：.net, sql, c#-4.0, optimization

我试图决定是否应该尝试将我的存储过程整合到我的数据库中或编写代码。基本上，我有一个表（分析），它有一个指向另一个表（Urls）的外键。当用户访问某些页面时，第一个表将尝试创建条目。在该表的存储过程（Analytics）中，如果该行已经存在，它将更新，否则创建该行。我正在考虑发回 ID，然后更新另一个表。或者我可以在同一个存储过程中更新另一个表。还会有 2 个其他表在同一页面命中会做类似的事情。

我很矛盾，因为我的面向对象方面希望每个存储过程只做一件事，但我知道这将发生在每个页面上，并且希望尽可能从优化中得到什么。

对多次调用与一次调用数据库的速度差异有何想法。它真的会引起问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T21:14:52.467

> 对多次调用与一次调用数据库的速度差异有何想法。它真的会引起问题吗？

是的，它当然可以。

对于每个数据库调用，都有连接开销、网络 IO 开销以及数据库服务器和客户端的额外工作——这些都很慢。此外，以这种方式构建存储过程很容易导致您陷入[N+1 问题](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem)。

*一般而言，如果您可以构建事物以便在一个*查询中尽可能多地完成，那么您的数据库和应用程序将更快、响应更快，因为将昂贵和缓慢的资源使用保持在最低限度。

# mysql - 带有图像表的新闻系统

> ID：14046306
> 
> 赞同：0
> 
> 时间：2012-12-26T21:11:21.447
> 
> 标签：mysql, sql

我目前有 2 张桌子。一个包含新闻，第二个女巫包含图像。

**新闻表：**

news_id

新闻头

新闻内容

**画廊桌**

画廊news_id

画廊news_newsid

画廊新闻文件名

我的问题是我如何将它们连接在一起（php/mysql），以便图像与新闻相匹配？例如。1 条新闻/故事可以包含 4 张图片。结果必须如下所示：

**新闻 1(head)**
image1.jpg、image2.jpg、image3（新闻的相关图片）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:15:52.417

```
SELECT N.*, G.*
FROM news N
LEFT JOIN gallery G ON N.news_id = G.gallerynews_newsid 
```

我使用左连接，这样如果没有图像，你仍然可以得到你的新闻。

* * *

```
SELECT N.*, GROUP_CONCAT(G.gallerynews_filename)
FROM news N
LEFT JOIN gallery G ON N.news_id=G.gallerynews_newsid 
```

# java - JSF 2 - f:selectItems 与日期键映射

> ID：14046309
> 
> 赞同：2
> 
> 时间：2012-12-26T21:11:33.987
> 
> 标签：java, validation, jsf-2, converter, selectonemenu

下面的 selectItems 来自 Session Scoped Map。当用户单击提交按钮时，应该在 Request Scoped 支持 bean 中设置一个日期字段并将其显示在页面上。

```
 <h:selectOneMenu value="#{dropDown.selectedDate}">
        <f:selectItems value="#{mapValues.dateMap.entrySet()}" var="entry" itemLabel="#{entry.value}" itemValue="#{entry.key}" />
    </h:selectOneMenu>
    <h:commandButton value="Submit" />
You selected Date #{dropDown.selectedDate} 
```

但是，收到以下转换错误：

```
Conversion Error setting value 'Wed Dec 26 15:09:32 EST 2012' for 'null Converter'. 
```

我不确定为什么会收到此错误。我尝试在 selectOneMenu 标记上设置 javax.faces.DateTime 转换器，但随后收到更神秘的验证错误。

发现[一个帖子](https://stackoverflow.com/questions/9069379/validation-error-value-is-not-valid)建议检查 equal() 方法是否可用，并且项目选择是否在下拉列表中，在这种情况下两者都应该是正确的。

我能想到的一种解决方法是将我的地图更改为字符串键控，其中日期保存为字符串。但这似乎是矫枉过正。

有关如何使此设置正常工作的任何建议？

支持豆：

```
@Named
@RequestScoped
public class DropDown {

    private Date selectedDate;

    public Date getSelectedDate() {
        return selectedDate;
    }

    public void setSelectedDate(Date selectedDate) {
        this.selectedDate = selectedDate;
    }

} 
```

地图豆：

```
@Named
@SessionScoped
public class MapValues implements Serializable {

    private Map<Date, String> dateMap;

    @PostConstruct
    public void init() {        
        dateMap = new LinkedHashMap<Date, String>();
        dateMap.put(new Date(), "DATEVALUE1");      
    }

    public Map<Date, String> getDateMap() {
        return dateMap;
    }

    public void setDateMap(Map<Date, String> dateMap) {
        this.dateMap = dateMap;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T15:41:54.690

使用日期时间转换器应该是正确的解决方案。您的“更神秘的验证错误”原来是这样的：

> *它是“表单：位置：验证错误：值无效*

`Object#equals()`当所选项目的测试没有返回`true`任何可用项目时，就会发生这种情况。因此，所选实例与任何可用实例`Date`都不匹配。`Date`

事实上，`converter="javax.faces.DateTime"`(aka `<f:convertDateTime />`) 默认忽略时间部分。它默认打印“短”日期样式，例如浏览器中的“Dec 27, 2012”右键单击页面，选择*查看源代码*自己查看。

```
<option value="Dec 27, 2012">DATEVALUE1</option> 
```

当 JSF 将该格式的字符串提交值转换回具体`Date`实例时，它基本上变成`2012-12-27 00:00:00.000`了在您的地图中提供的日期显然仍然设置了时间部分的情况下，`equals()`除非可用日期的地图是巧合生成的，否则会导致始终失败正是`00:00:00.000`午夜。

这个问题有2个解决方案：

1.  删除映射中日期的时间部分。你可以使用`java.util.Calendar`这个（或者更好的，Joda Time）。

2.  而是使用`<f:convertDateTime pattern="yyyyMMddHHmmssSSS"/>`将整个日期/时间转换为最后一毫秒。

    ```
    <h:selectOneMenu value="#{dropDown.selectedDate}">
        <f:selectItems value="#{mapValues.dateMap.entrySet()}" var="entry" itemLabel="#{entry.value}" itemValue="#{entry.key}" />
        <f:convertDateTime pattern="yyyyMMddHHmmssSSS" />
    </h:selectOneMenu> 
    ```

    这样期权价值就变成了

    ```
    <option value="20121227114627792">DATEVALUE1</option> 
    ```

    当您将 JSF 配置为使用平台特定时区而不是 GMT 作为`<f:convertDateTime>`时区时，请注意时区问题。然后，您想向`timeZone="UTC"`转换器显式添加属性。

# javascript - Javascript，在第 n 次递归后以指数方式调用函数

> ID：14046310
> 
> 赞同：-2
> 
> 时间：2012-12-26T21:11:34.147
> 
> 标签：javascript

我刚刚开始使用 Javascript 和 jQuery，在我的第一个项目中遇到了一些麻烦。我正在构建一个简单的二十一点游戏，它第一次就可以完美运行。

一旦第一手牌结束，游戏应该通过调用递归 playGame() 函数来重置并再次玩一次按钮，#playAgain，被点击。这很好用，但是在执行 playAgain 之后，我的 hitMe 函数会为用户中断。它是一个系统代码，因此用户和 PC 都在执行相同的操作，但它对用户的行为不同，并开始根据玩过的游戏数量以指数方式调用 hitMe 函数。

为什么在这种情况下，根据提供呼叫的用户/计算机，此代码的行为会有所不同，我该如何修复它？

代码可在 www.calebdwilliams.com/blackjack 上找到

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T21:18:11.313

您的问题在您的 playGame 函数中：

```
$("#hit").click(function(){ 
```

每次玩游戏时，您都会将点击功能连接到#hit 元素。好吧，通过游戏 javascript 的后续时间只是添加了额外的点击处理程序。该处理程序应仅在 playGame() 范围之外添加一次，否则应删除先前的侦听器：

```
$("#hit").unbind(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T21:21:38.903

您在方法内绑定事件处理程序`playGame`。

这意味着每次您运行它时，它都会将一个额外的处理程序绑定到您想要的元素。

因此，您需要在使用该方法绑定之前取消绑定..

每当你做`.click(...)`第`unbind('click')`一个..

```
$("#stand").unbind('click').click(function(){ 
```

和

```
$("#hit").unbind('click').click(function(){ 
```

和

```
$("#playAgain").unbind('click').click(function(){ 
```

# php - 使用php将复选框的值保存在表单中

> ID：14046312
> 
> 赞同：0
> 
> 时间：2012-12-26T21:11:47.013
> 
> 标签：php, checkbox

我需要一些帮助来保存用户选择的复选框的值。

我在表单中有两个复选框：

```
<form action="process.php" method="POST">
Option One: <input type="checkbox" name="check1" value="1"/>
Option Two: <input type="checkbox" name="check2" value="2"/>
<br>

<input type="submit" value="Submit" />
</form>

<?php

if(isset($_POST['check1'])){

//execute function A

}

elseif(isset($_POST['check2'])){

//execute function B

}

?> 
```

现在，如果用户勾选“选项一”并单击提交，则复选框保持选中状态并且 php 代码执行某些功能，否则如果用户勾选“选项二”，则执行另一个函数并且复选框 2 保持选中状态。

请有人帮我解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T21:14:59.920

如果您想在提交后保持检查：

```
Option One: <input type="checkbox" name="check1" value="1" <?php if(isset($_POST['check1'])) echo 'checked="checked"'; ?> />
Option Two: <input type="checkbox" name="check2" value="2" <?php if(isset($_POST['check2'])) echo 'checked="checked"'; ?> /> 
```

# php - 无法在返回 url 中获得 paypal post pramenters

> ID：14046318
> 
> 赞同：1
> 
> 时间：2012-12-26T21:12:34.970
> 
> 标签：php, html, paypal, paypal-ipn

我有一个用于将一些自定义变量传递给 PayPal 的代码，这些变量是在返回页面中收集的，但是在尝试获取这些值时它不起作用

我有一个这样的 PayPal 表格：

```
<form target="paypal" action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="image" src="submit.png" name="submit" alt="Make payments with PayPal - it's fast, free and secure!"/>
<input type="hidden" name="add" value="1"/>
<input type="hidden" name="custom" value="IP"/>
<input type="hidden" name="cmd" value="_cart"/>
<input type="hidden" name="business" value=""/>
<input type="hidden" name="item_name" value=""/>
<input type="hidden" name="item_number" value=""/>
<input type="hidden" name="amount" value=""/>
<input type="hidden" name="page_style" value=""/>
<input type="hidden" name="no_shipping" value="1"/>
<input type="hidden" name="return" value="index.php?action=success"/>
<input type="hidden" name="notify_url" value="index.php?action=ipn"/>
<input type="hidden" name="cancel_return" value=""/>
<input type="hidden" name="rm" value="2"/>
<input type="hidden" name="cn" value="Additional Information"/>
<input type="hidden" name="currency_code" value="AUD"/>
<input type="hidden" name="bn" value="PP-ShopCartBF"/>
</form> 
```

付款后我成功返回网址。我现在只是想打印 POST 变量，它没有给我任何值。我尝试过启用和禁用“自动返回”。在这两种情况下，我都没有得到价值。请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:20:49.153

贝宝将异步（直接）联系“notify_url”，而您与此交易无关。因此，您永远不会在浏览器中看到任何结果。您应该在脚本中使用某种登录来查看实际发送的内容。检查你的网络服务器的访问日志，看看贝宝是否真的在联系你的脚本（并确保它不是你正在尝试的“本地主机”）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-26T21:32:40.300

如果我没记错的话，只有交易 id 会被发送回 return_url。notify_url 也接收该 ID。从那里你应该能够沟通两个页面来满足你的需求。

# java - 并行 BZip2 压缩

> ID：14046319
> 
> 赞同：4
> 
> 时间：2012-12-26T21:12:37.523
> 
> 标签：java, parallel-processing, compression, bzip2, apache-commons-compress

我正在使用[Apache Commons Compress](http://commons.apache.org/compress/index.html) for Java 将**多个**日志文件压缩到一个**存档** `tar.bz2`中。

但是，压缩需要很长时间（> 12 小时），因为我每天压缩大约 20GB 的文件。

由于这个库压缩文件单线程，我想知道是否有办法做到这一点多线程。

我找到了很多解决方案（命令行 pbzip2 或一些 C++ 库），但我为 java 找到的只是这篇博文：

[https://plus.google.com/117421466255362255970/posts/3jfKVu325zh](https://plus.google.com/117421466255362255970/posts/3jfKVu325zh)

看来我不能在我的 Java 应用程序中使用它。

外面有什么吗？你会推荐什么？还是有另一种更快的解决方案，具有类似的压缩率，例如 bzip2 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:15:17.067

由于您有多个文件，您可以在不同的线程中压缩每个文件。由于您的进程受 CPU 限制，我建议创建一个固定大小的线程池，即 ExecutorService，并为每个要压缩的文件添加一个任务。

注意：如果 pbzip2 做你想做的事，我会从 Java 中调用它。您可能会发现即使是一个线程也很快，因为我看到的用于 Java 的 BZIP2 库是本机实现的（与 JAR、ZIP 和 GZIP 不同）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T22:16:55.003

如果在 Java 中没有退出 bzip2 的并行实现，您可以求助于从 Java 应用程序中调用[pbzip2 。](http://compression.ca/pbzip2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-19T07:44:24.037

尝试 BZip2OutputStream 的 at4j 实现。根据手册，它支持并行压缩。 [http://at4j.sourceforge.net/releases/current/pg/ch04.xhtml](http://at4j.sourceforge.net/releases/current/pg/ch04.xhtml)

# ios - 自定义 TabBarController 功能

> ID：14046331
> 
> 赞同：1
> 
> 时间：2012-12-26T21:13:53.763
> 
> 标签：ios, ios6, uitabbarcontroller, custom-controls

我正在尝试使用以下选项创建自定义标签栏控制器：

1.  喂养
2.  地图
3.  新的
4.  相机
5.  搜索

提要、地图、摄像头和搜索将各自拉出各自的 VC，而新的应该更像是一个功能按钮。当新的标签项被按下时，应该显示地图视图，并且地图应该开始记录用户的位置。我正在尝试使用 a`UITabBarController`来管理这些视图，但我似乎无法弄清楚如何使用“新建”选项卡实现我想要的功能。似乎我需要为“新”记录和停止功能实现一个单独的视图控制器，但这似乎不正确。

记录/停止的功能应该类似于 snapchat 的红色大按钮，按下它会拍照。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T21:24:51.617

虽然我同意[Scott](https://stackoverflow.com/users/751268/scott)的评论，即这是一个糟糕的 UX，但如果您在技术上想要这样做，您可以进行子类化`UITabBarController`，并且`viewDidLoad`可以将`UIButton`子视图添加到选项卡栏控制器的`tabBar`：

```
[self.tabBar addSubview:yourCustomButton]; 
```

因此，这个按钮可以有它自己的动作和选择器来做任何你想做的事情。

以[idevrecipes](https://github.com/boctor/idev-recipes/tree/master/RaisedCenterTabBar)为例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:16:54.853

我认为您必须自己实现容器视图控制器。我认为你不能用 UITabBarController 做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T22:40:11.287

我打算挖掘 shawnwall 指出的 idevrecipes 示例，但还有另一个可能的答案，假设您希望 New 按钮与标准 UITabBarButton 外观相匹配。我同意它可能不是最好的 UI，但它是可行的。

对于初学者，您将为新项目创建一个虚拟视图控制器。我并不是说您应该复制 Maps 控制器或任何东西，我只是说创建一个空视图控制器并将其（或它的位置）存储在一个属性中。假设您正在创建标签栏`application:didFinishLaunchingWithOptions:`，它看起来像这样。

```
self.newViewController = [[UIViewController alloc] init];
self.newViewController.title = NSLocalizedString(@"New", nil);
self.newViewController.image = [UIImage imageNamed:"new.png"]; 
```

将该视图控制器拖放到选项卡栏控制器`viewControllers`属性中的适当位置。

保存对 Maps 控制器的引用，方法与为虚拟 New 控制器保存引用的方式相同。

如果您还没有这样做，请将 tabBarController 的委托设置为您的应用委托。您可能需要声明您的应用委托符合`UITabBarControllerDelegate`.

`UITabBarDelegate`为您提供了一些用于跟踪标签栏更改的挂钩。`tabBarController:shouldSelectViewController:`看起来是我们为您的期望行为挂钩的合适场所。

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController
{
    if ([viewController isEqual:self.newViewController]) {
        self.tabBarController.selectedViewController = self.mapViewController;
        // Whatever logic you need to start the recording
        return NO;
    }

    return YES;
} 
```

用户交互的外观有点奇怪 - 用户选择了中间项目（新），但左边的项目（地图）被选中。如果您想要“标签栏触发行为”操作，我会走 idevrecipes 路线并使按钮在视觉上与众不同。但是，如果您与标签栏项目外观结婚，我相信这就是您完成它的方式。

# emacs - 将 GPG 与 org-mode 一起使用

> ID：14046333
> 
> 赞同：10
> 
> 时间：2012-12-26T21:14:06.603
> 
> 标签：emacs, org-mode, gnupg

我想要的是能够制作一个“标题”，在该标题下我可以拥有加密数据。我应该能够在 emacs 中的同一个文件中有多个标题。

我有这个工作，但不幸的是我不记得我需要做什么来加密数据。作为参考，这是我必须添加到我的 .emacs 以使其正常工作的内容：

```
(require 'org-crypt)
(org-crypt-use-before-save-magic)
(setq org-tags-exclude-from-inheritance (quote ("crypt")))
;; GPG key to use for encryption
;; Either the Key ID or set to nil to use symmetric encryption.
(setq org-crypt-key nil) 
```

到目前为止我已经尝试过：`:crypt:`在我的标题之前使用，在标题上运行`M-x org-encrypt-entry`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T06:26:36.653

您的 org-crypt 配置足以让它工作。我有相同的标题，所有带有标签的标题`:crypt:`在保存文件之前都被加密（使用不同的密码）。此外，`M-x org-encrypt-entry`手动运行会加密当前航向。此描述无法找到您的问题的答案，它需要更多详细信息。例如：如果你`M-x org-encrypt-entry`在标题上运行会发生什么？Org-crypt 应该询问密码，然后替换标题中的文本。或者带有标签的标题`:crypt:`应该在保存文件之前自动加密。

编辑：如果当前标题在语法上是正确的（有蓝色突出显示）并且命令`M-x org-encrypt-entry`产生错误“在位置的第一个标题之前......在缓冲区......”那么你可以检查变量的值`outline-regexp`（命令`C-h v outline-regexp`）。它可能具有不正确的值。

对我来说，它`"\\*+ "`位于 org-mode 缓冲区中。

# wolfram-mathematica - Mathematica 操作函数

> ID：14046337
> 
> 赞同：0
> 
> 时间：2012-12-26T21:14:25.537
> 
> 标签：wolfram-mathematica

有人知道我如何将 Manipulate 命令与 show 命令一起使用。基本上，我想在一个坐标系上显示多个功能。但是，我只希望其中一个被“操纵”（即其他应该是静态的）。我无法理清如何一起使用 Show 和 Manipulate。谢谢你的帮助！人力资源

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T02:51:37.273

如果您不想`a`在其中一个图中使用操纵变量 ，只需将其省略即可。

```
Manipulate[
 Show[
  Plot[a x, {x, 0, 3.5}],
  ListPlot[{1, 2/a, 3/a}]],
 {{a, 1}, 0, 2}] 
```

# android - 如何在意外包含 /bin 后从 egit 版本控制中删除它。.gitignore 不起作用。

> ID：14046341
> 
> 赞同：0
> 
> 时间：2012-12-26T21:14:45.650
> 
> 标签：android, eclipse, egit

使用 Eclipse Juno，用 android 开发。不知何故，我愚蠢地将我的 /bin 目录包含在了 egit 提交中，而现在，尽管 /bin 位于我的 .gitignore 中。egit 一直试图将更新后的文件包含在我的 /bin 目录中。我右键单击 bin 并尝试了“从索引中删除”、“忽略”和“取消跟踪”，但是唉..每次我提交时.. bin 中更改的文件都坐在那里等待我检查它们以进行提交. 这越来越令人厌烦，特别是因为 /bin 中的文件列表越来越大。我只使用 egit，如果可以的话，我希望远离 git 命令提示符。非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T21:17:41.267

1.  从 gitignore 中删除 'bin'
2.  git rm -f bin
3.  犯罪
4.  将“bin”添加回 gitignore

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:17:14.870

您需要删除 bin，然后将“bin”添加到您的 .gitignore。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T23:15:02.573

鉴于上述错误。我认为我能找到的唯一解决方案是使用似乎有效的“假设不变”。只需右键单击 /bin，然后选择 team/advanced/assume 不变，现在看来 bin 没有包含在每个提交中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-17T16:22:03.323

在 Eclipse中，关键是**禁用****Build Automatically**选项。

1.  禁用项目 -> 自动构建
2.  轻松删除 bin 文件夹
3.  提交并推送到服务器
4.  之后，您可以重新启用“自动构建”选项
5.  将 bin 添加到 git ignore （以避免再次提交）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-18T15:07:54.887

Marcin Gal 已经给出了正确的答案。我偶然发现了同样的问题，并在我搜索的第一个位置找到了这篇文章。但是因为问题发布者要求使用 eGit 而没有命令行的解决方案，所以我现在想弥补：

首先在eclipse中打开团队视图并选择“Git Repositories”。删除“bin”目录（或您不想再进行版本控制的任何文件）。现在提交您的更改（已删除的文件将标有灰色的“X”）。最后你必须重新编译你的项目（因为你已经删除了所有的二进制文件，当然）。顺便说一句，您不必在 .gitignore 中删除并重新插入“/bin”，因为它只影响尚未版本化的文件。通过删除和重新创建文件，它们没有版本控制，因此 .gitignore 将与它们一起使用。

![在存储库管理器中删除 bin](../Images/50d4a021e0a6cdb22591f2453f17ade4.png) ![提交已删除的文件](../Images/38405cd3007bb8f04b0c3474e4fad021.png)

# apache-flex - 使用 IntelliJ IDEA 12 进行 Flex 开发

> ID：14046352
> 
> 赞同：1
> 
> 时间：2012-12-26T21:15:35.897
> 
> 标签：apache-flex, intellij-idea, flash-builder

多年来，我一直在使用 Flex / Flash Builder。最新版本的 Flash Builder (4.7) 似乎有很多问题，其中最大的问题是：

*   不检测`ID`MXML 中的组件。例如，您无法*查找组件 ID 的用法*。将光标保持在组件的 ID 上甚至不会*标记*ID 的出现。相反，它*标记*`id`了 MXML中实际单词的出现。
*   **极慢**。

我正在认真评估迁移到 IntelliJ IDEA 12，尤其是在阅读了许多经验丰富的 Flex 开发人员对它赞不绝口并推荐它之后。

我尝试过这个。我花了一段时间才熟悉 IDE 的新术语（[这篇](http://www.jetbrains.com/idea/webhelp/intellij-idea-vs-eclipse-terminology.html)文档和 JetBrains 非常乐于助人的支持人员让我很容易理解）。

我能够使用 Adob​​e Flex 4.6 SDK 在 IDEA 中设置我的（大型）项目并让它编译得很好。但我注意到我的 AS 文件中突出显示的许多“错误”实际上都是误报。

ActionScript 编辑器似乎无法识别 MXML 中定义的对象。显然，这是 IDEA 中的一个已知错误（[在此处](http://youtrack.jetbrains.com/issue/IDEA-52598)跟踪）。**而且这个bug已经存在2年多了！**

引用 JetBrains 支持人员的话：

> 我必须承认，突出显示不包含类但包含在`mxml`as`<fx:Script source="some_file.as"/>`中的 ActionScript 文件可能是 IntelliJ IDEA 代码突出显示的唯一薄弱部分。如果您在 CDATA 中嵌入 AS 代码`<fx:Script/>`而不是作为外部`*.as`文件引用，则错误的错误突出显示将消失。虽然我知道这并不总是需要的。
> 
> 恐怕修复不会进入 12 版本，因为发布很快而且修复风险太大。问题的优先级取决于投票和用户反馈。到目前为止，我们只有 2 票 (http://youtrack.jetbrains.com/issue/IDEA-52598)，由于修复非常复杂，我们仍然没有实施它，认为这是一个罕见的用例。我希望在 12.x 更新版本之一中修复它。

我的项目是一个巨大的项目，有巨大的 MXML 文件，每个 MXML 的 AS 代码甚至更多。因此，出于组织目的，我需要在逻辑上将它们拆分为较小的文件。因此，将 AS 代码与 MXML 合并是不切实际的。错误的错误突出显示会大大降低代码的可读性。此外，它不允许在 AS 代码中*单击 Control / Command-click*组件 ID 快速导航到 MXML 中的组件定义（顺便说一句，现在在 FB 4.7 中也被破坏了，但在 FB 4.6 中运行良好）。

不幸的是，IDEA 中的这个错误对我来说是一个交易破坏者。但我想知道其他 Flex 开发人员如何能够克服/解决这个看似严重的错误。

**让我难以置信的是，只有 2 人受到了这个 bug 的影响**，尤其是在有这么多 Flex 开发人员推荐 IDEA 的情况下。也许我做错了什么？

所有 Flex 开发人员，我将不胜感激您的想法。

## 更新

这是对 RIAStar 出色而详细的回答的回应。但这并不能完全帮助我。让我解释一下为什么以及如何使用`<fx:Script source>`. 我使用的是 Flex 4.x，几乎只有 Spark 组件。

*   假设一个全新的 Flex 项目。主应用程序是一个 MXML 文件。
*   在这个 MXML 文件中，假设我有一个注册表单。
*   在编辑表单（在每个字段中）时，假设我必须运行验证并仅在表单完全有效时启用*提交按钮。*这意味着我需要将更改事件处理程序分配给表单项。事件处理程序是 AS 代码。
*   假设有一个*用户名字*段需要通过异步调用服务器*进行类型*唯一性检查。服务器通信代码也是AS代码。
*   当然，还有*提交*按钮处理程序，它也是 AS 代码。

我通常将所有 AS 代码放在单独的`.as`文件中，并使用`<fx:Script source>`. 这个 AS 代码通常很重，有很多功能和行为逻辑。很多时候，基于用户操作，甚至 MXML 中的组件和元素的布局都通过这个 AS 代码进行修改。

如果我理解你们的话，这些事件处理程序代码都不应该在这些 MXML 脚本文件中。那么，它应该在哪里呢？你们是怎么做到的？我不确定 Spark Skinning 架构与此有何关系。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-27T00:22:03.787

既然我想不出一个温和的说法，我就直言不讳：恐怕只有两个人认为这是一个严重的错误，因为大多数经验丰富的 Flex 开发人员会同意使用`<fx:Script source="some_file.as"/>`是不好的做法.
您有效地创建了代表一个类的两个文件。从您似乎担心的可读性 POV 来看，这不是一个好举措。其中一个文件（.as 文件）只是一堆无法单独存在的函数：它们与另一个文件/类紧密耦合，但仅查看 .as 文件无法知道哪个类它耦合到。当然，您可以使用某种命名约定来解决此问题，但最终 ActionScript/Flex 应该用作静态类型语言，而不是依赖于 mixins 和命名约定的脚本语言（不要误会我的意思：我并不是说脚本语言是不好的做法；这不是 ActionScript 的构思方式）。

**那么你的替代方案是什么？**
我想这种构造背后的主要原因是您希望将 MXML 与 ActionScript 代码分开，或者用更抽象的术语：将视图与逻辑分开。幸运的是，这可以通过其他一些更清洁的方式来实现。您可以使用哪些解决方案取决于我们谈论的是 Flex 3（或更早版本）还是 Flex 4。我意识到您可能没有时间将代码重构为建议的解决方案之一，但我不想离开您只是一个“这不是好的做法”的答案。

## 弹性 3 (mx)

**代码隐藏：**许多开发人员使用所谓的“代码隐藏”模式将他们的逻辑与他们的视图分开。[您可以通过谷歌搜索“flex code behind”](https://www.google.be/search?q=flex%20code%20behind)找到有关该主题的大量信息。我不需要在这里重复所有这些。我不太喜欢这个概念，因为它严重依赖于继承，并且两个生成的类仍然非常紧密耦合，但至少我们在谈论两个*类*。如果你设计好你的架构，你甚至可以重用你的一些基类。

**编写模型和控制器：**我曾经为每个 MXML 视图创建一个单独的“表示模型”类和一个“控制器”类，然后像这样使用它：

```
<!--MyView.mxml-->
<mx:VBox>
    <m:MyModel id="model"/>
    <c:MyController model="{model}" view="{this}"/>
    ...
</mx:VBox> 
```

MVC 纯粹主义者不会喜欢这样，但它在 Flex 应用程序的上下文中对我来说工作得很好。
后来当**直接注入**支持框架（如 Parsley）出现时，我可以使用注入来连接所有这些类，而不是像本例中那样硬连接它们。

**MVC 框架：**我对这个主题的了解很少（因为在我看来 Flex 是一个非常不错的 MVC 框架，不需要第三方添加，但这是另一个讨论），但简而言之：它们可以帮助您将逻辑与视图分离干净的方式。

## Flex 4（火花）

在 Flex 4 中，引入了 Spark 皮肤架构，它允许很好地分离视图和逻辑。您在包含所有行为代码的普通 ActionScript 中创建了一个所谓的“宿主组件”类，并在 MXML 中创建了一个定义组件的可视化表示的“皮肤”类。这使得设计可重用组件变得非常容易。

根据您的要求，这里有一个简化示例，说明您可以如何使用 Spark 皮肤来创建您的注册表单。
让我们从皮肤类开始，因为它很容易理解。它只是一个带有一些输入字段的表单。元`HostComponent`数据告诉皮肤它应该与 SignUp 主机组件一起工作。

```
<!--SignUpSkin.mxml: the visual representation-->
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark">

    <fx:Metadata>
        [HostComponent("net.riastar.view.SignUp")]
    </fx:Metadata>

    <s:Form>
        <s:FormHeading label="Sign up"/>

        <s:FormItem label="User name">
            <s:TextInput id="userInput"/>
        </s:FormItem>

        <s:FormItem label="Password">
            <s:TextInput id="passwordInput" displayAsPassword="true"/>
        </s:FormItem>

        <s:Button id="submitButton" label="Submit" 
                  enabled="{hostComponent.canSave}"/>
    </s:Form>

</s:Skin> 
```

现在是纯 ActionScript 中的宿主组件。它必须扩展`SkinnableComponent`才能使用我们的皮肤（还有`SkinnableContainer`我最近在这个问题中解释过的：[Flex mxml custom component - how to add uicomponents?，](https://stackoverflow.com/questions/13994928/flex-mxml-custom-component-how-to-add-uicomponents/13997864#13997864)但我们在这里不需要它）。

```
public class SignUp extends SkinnableComponent {

    [SkinPart(required="true")]
    public var userInput:SkinnableTextBase;

    [SkinPart(required="true")]
    public var passwordInput:SkinnableTextBase;

    [SkinPart(required="true")]
    public var submitButton:IEventDispatcher;

    [Bindable]
    public var canSave:Boolean;

    override protected function partAdded(partName:String, instance:Object):void {
        super.partAdded(partName, instance);

        switch (instance) {
            case userInput:
                userInput.addEventListener(TextOperationEvent.CHANGE, 
                                           handleUserInputChange);
                break;
            case passwordInput:
                passwordInput.addEventListener(TextOperationEvent.CHANGE, 
                                               handlePasswordInputChange);
                break;
            case submitButton:
                submitButton.addEventListener(MouseEvent.CLICK, 
                                              handleSubmitButtonClick);
        }
    }

    private function handleUserInputChange(event:TextOperationEvent):void {
        validateUsername(userInput.text);
    }

    ...

} 
```

这里有什么重要的？
标记为的变量`SkinPart`将自动分配给您刚刚创建的皮肤中存在的具有相同 id 的组件。例如`<s:TextInput id="userInput"/>`将被注入`public var userInput:SkinnableTextBase;`. 注意类型不同：`SkinnableTextBase`是`TextInput`;的基类 这允许我们使用例如 a`TextArea`而不是 a创建另一个皮肤，`TextInput`并且它可以在不接触主机组件的情况下工作。
`partAdded()`每当将 SkinPart 添加到显示列表时都会调用它，这就是我们连接事件侦听器的地方。在此示例中，我们将在其值更改时验证用户名。
验证完成后，您可以简单地将`canSave`属性设置为`true`或`false`. 绑定在皮肤上的这个属性会自动更新Button的`enabled`属性。

并一起使用这两个类：

```
<v:SignUp skinClass="net.riastar.skin.SignUpSkin"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T00:04:07.367

我实际上已经非常喜欢使用 RobotLegs。

在我的 MXML 视图中，我尝试将所有逻辑保留在 MXML 之外，并简单地将事件分派给中介。从那里我可以将代码放入所需的更重的 AS 的调解器中。

# sdk - 安装 TideSDK Developer Mac 和 Linux 的问题

> ID：14046354
> 
> 赞同：2
> 
> 时间：2012-12-26T21:15:41.877
> 
> 标签：sdk, tidesdk

所以，今天我花了一天时间尝试安装 TideSDK 和 Developer 应用程序。

让它在mac上运行后，我发现它不会做任何事情：新项目和导入按钮没有做任何事情。

之后，我尝试将它安装在我的“虚拟机”ubuntu 上。现在我根本无法安装它。我不断收到错误消息（由来自 sdk 的 env.py 文件的第 139 行中的异常引发）：异常：找不到 SDK 版本 1.3.1-Beta。

我将 sdk 复制到主文件夹和 Ubuntu 上的根目录，然后将其复制到 mac 上的用户端库，均无效。

现在我没有更多的想法，我真的很想让这个工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T16:37:54.403

您似乎没有将存档解压缩到目录中。使用带有 -d 选项的 unzip 执行此操作：

```
unzip -d TideSDK-1.3.1-beta-osx-x86-64.zip ~/Library/Application Support/TideSDK 
```

应该就这么简单。之后，您将在此文件夹中拥有模块、运行时和 sdk：

```
├── TideSDK
    ├── modules
    ├── runtime
    ├── sdk 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T09:51:50.053

有关于如何安装和开始使用 TideSDK 的综合文档。您能否尝试使用入门文档并按照给出的说明进行操作：

[http://tidesdk.multipart.net/docs/user-dev/generated/#!/guide/getting_started](http://tidesdk.multipart.net/docs/user-dev/generated/#!/guide/getting_started)

开发者应用程序希望文件安装在特定目录中。您需要将文件提取到适当的目录中。

如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T21:37:08.487

发现 SDK 在很多地方都有硬编码文件位置的“C”驱动器。长话短说，但我没有C盘，Windows在我的E盘上。

我通过在文本编辑器中打开 sdk\win32\1.3.1-beta\env.py 并更改第 85 和 86 行来解决此问题

```
 elif (self.target_os == 'win32'):
        self.install_dirs = [
            p.join(os.environ['APPDATA'], 'TideSDK'),
            # TODO: Is there a better way to determine this directory?
            'E:\\ProgramData\\TideSDK',
            'E:\\Documents and Settings\All Users\Application Data\TideSDK'
        ] 
```

也在 win32_app.py 第 193 和 195 行

```
def get_wix_bin_directory(self):
    path = p.join("E:\\", "Program Files", "Windows Installer XML v3", "bin")
    if not p.exists(path):
        path = p.join("E:\\", "Program Files (x86)", "Windows Installer XML v3", "bin")
    if not p.exists(path):
        raise Exception('Could not find WiX v3 bin directory')
    return path 
```

# mysql - 如何删除没有临时表的 MySQL 表中的所有重复记录

> ID：14046355
> 
> 赞同：47
> 
> 时间：2012-12-26T21:15:45.117
> 
> 标签：mysql, sql, duplicates, sql-delete, unique-index

我已经看到了这方面的许多变化，但没有什么与我想要完成的完全匹配。

我有一个表格，`TableA`其中包含用户对可配置问卷的回答。列是`member_id, quiz_num, question_num, answer_num`。

不知何故，一些成员的答案被提交了两次。所以我需要删除重复的记录，但要确保留下一行。

没有**主**列，因此可能有两三行都包含完全相同的数据。

是否有删除所有重复项的查询？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-12-27T06:49:13.123

在您的表上添加**唯一索引：**

```
ALTER IGNORE TABLE `TableA`   
ADD UNIQUE INDEX (`member_id`, `quiz_num`, `question_num`, `answer_num`); 
```

另一种方法是：

在表中添加主键，然后您可以使用以下查询轻松地从表中删除重复项：

```
DELETE FROM member  
WHERE id IN (SELECT * 
             FROM (SELECT id FROM member 
                   GROUP BY member_id, quiz_num, question_num, answer_num HAVING (COUNT(*) > 1)
                  ) AS A
            ); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-10-22T17:12:12.797

代替`drop table TableA`，您可以删除所有寄存器 ( `delete from TableA;`)，然后使用来自 TableA_Verify ( `insert into TAbleA select * from TAbleA_Verify`) 的寄存器填充原始表。这样您就不会丢失对原始表的所有引用（索引，...）

```
CREATE TABLE TableA_Verify AS SELECT DISTINCT * FROM TableA;

DELETE FROM TableA;

INSERT INTO TableA SELECT * FROM TAbleA_Verify;

DROP TABLE TableA_Verify; 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-26T22:53:41.420

这不使用 TEMP 表，而是使用真实表。如果问题只是临时表而不是表创建或删除表，这将起作用：

```
SELECT DISTINCT * INTO TableA_Verify FROM TableA;

DROP TABLE TableA;

RENAME TABLE TableA_Verify TO TableA; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-04-01T12:58:11.470

感谢 jveirasv 提供上述答案。

如果您需要删除特定列集的重复项，您可以使用它（例如，如果表中有不同的时间戳）

```
CREATE TABLE TableA_Verify AS SELECT * FROM TableA WHERE 1 GROUP BY [COLUMN TO remove duplicates BY];

DELETE FROM TableA;

INSERT INTO TableA SELECT * FROM TAbleA_Verify;

DROP TABLE TableA_Verify; 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-04-02T08:15:36.663

在您的表上添加唯一索引：

```
ALTER IGNORE TABLE TableA   
ADD UNIQUE INDEX (member_id, quiz_num, question_num, answer_num); 
```

工作得很好

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-02-24T13:06:18.340

如果您不使用任何主键，则一次执行以下查询。通过替换值：

```
# table_name - Your Table Name
# column_name_of_duplicates - Name of column where duplicate entries are found

create table table_name_temp like table_name;
insert into table_name_temp select distinct(column_name_of_duplicates),value,type from table_name group by column_name_of_duplicates;
delete from table_name;
insert into table_name select * from table_name_temp;
drop table table_name_temp 
```

1.  创建临时表并存储不同（非重复）值
2.  制作空的原始表
3.  将值从临时表插入原始表
4.  删除临时表

始终建议在使用数据库之前对其进行备份。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-21T05:41:51.283

另一种方法是创建一个具有相同结构的新临时表。

```
CREATE TABLE temp_table AS SELECT * FROM original_table LIMIT 0 
```

然后在表中创建主键。

```
ALTER TABLE temp_table ADD PRIMARY KEY (primary-key-field) 
```

最后从原始表中复制所有记录，同时忽略重复记录。

```
INSERT IGNORE INTO temp_table AS SELECT * FROM original_table 
```

现在您可以删除原始表并重命名新表。

```
DROP TABLE original_table
RENAME TABLE temp_table TO original_table 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-09-08T21:01:07.027

如评论中所述，如果项目多次重复，则必须多次运行 Saharsh Shah 答案中的查询。

这是一个不删除任何数据的解决方案，并且始终将数据保留在原始表中，允许在保持表“活动”的同时删除重复项：

```
alter table tableA add column duplicate tinyint(1) not null default '0';

update tableA set
duplicate=if(@member_id=member_id
             and @quiz_num=quiz_num
             and @question_num=question_num
             and @answer_num=answer_num,1,0),
member_id=(@member_id:=member_id),
quiz_num=(@quiz_num:=quiz_num),
question_num=(@question_num:=question_num),
answer_num=(@answer_num:=answer_num)
order by member_id, quiz_num, question_num, answer_num;

delete from tableA where duplicate=1;

alter table tableA drop column duplicate; 
```

这基本上检查当前行是否与最后一行相同，如果是，则将其标记为重复（顺序语句确保重复显示将彼此相邻）。然后你删除重复的记录。我删除了`duplicate`最后的列以使其恢复到原始状态。

看起来`alter table ignore`也可能很快就会消失：[http ://dev.mysql.com/worklog/task/?id=7395](http://dev.mysql.com/worklog/task/?id=7395)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-08-16T07:02:13.520

在mysql 5中测试。不知道其他版本。如果要保留 id 值最低的行：

```
DELETE n1 FROM 'yourTableName' n1, 'yourTableName' n2 WHERE n1.id > n2.id AND n1.member_id = n2.member_id and n1.answer_num =n2.answer_num 
```

如果要保留具有最高 id 值的行：

```
DELETE n1 FROM 'yourTableName' n1, 'yourTableName' n2 WHERE n1.id < n2.id AND n1.member_id = n2.member_id and n1.answer_num =n2.answer_num 
```

# html - 将 CSS 内边距设置为负数

> ID：14046358
> 
> 赞同：0
> 
> 时间：2012-12-26T21:16:00.237
> 
> 标签：html, css

考虑以下 HTML。我有一个`.wrap`左右填充为 50px 的 div。在那个 div 里面我有另一个 div `.full`。我想通过克服`.wrap`.

我将其填充设置为 -50px，使其宽度等于 .wrap 的宽度，但它不起作用。

**HTML：**

```
<div class="wrap">
    <div class="inner">
        <div class="normal">xx</div>
        <div class="full">should be same width (300px) as wrap</div>
    </div>
</div> 
```

**CSS：**

```
.wrap{
    height: 500px;
    width: 300px;
    margin: 0 auto;
    padding: 0 50px;
    background: yellow;
}

.full{
    background: orange;
    padding: 0 -50px;
} 
```

**演示：http:** [//jsfiddle.net/WDS6X/](http://jsfiddle.net/WDS6X/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:19:36.780

在这种情况下，您需要使用边距，填充用于内部空间。使用

```
margin: 0 -50px; 
```

而不是 .full-div 中的填充像您想要的那样工作，这里是[nienn](http://jsfiddle.net/WDS6X/1/)在评论中提供的[JSFiddle](https://stackoverflow.com/users/730122/nienn)。

为了进一步理解，请查看包含非常好的解释的[这个 SO 线程。](https://stackoverflow.com/questions/4903549/why-do-the-css-width-and-height-properties-not-adjust-for-padding/4903697#4903697)

# php - 会话变量检查器 PHP

> ID：14046359
> 
> 赞同：-1
> 
> 时间：2012-12-26T21:16:01.330
> 
> 标签：php, mysql, if-statement, login, session-variables

我正在尝试为我网站上的每个页面创建会话变量检查。下面的代码很接近，但我只是不知道我是否正确构造了 If、elseif 和 else 语句。谢谢！

```
<?php

session_start();

if (isset($_SESSION['id']) && $_SESSION['administrator'] == 'YES'){
    session_write_close();
    echo "You are logged in & you are an administrator!";
    exit();
}   elseif (isset($_SESSION['id'])){
        session_write_close();
        echo "You are logged in BUT you are NOT an administrator!";
        exit();
    }   else {
    session_write_close();
    echo "You are NOT logged in!";
    exit();
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:21:37.133

您的代码将按预期工作。但是，您可以像下面这样编写它 - 它只是节省您编写`id`两次支票的时间。

```
if(isset($_SESSION['id']))
{
     if($_SESSION['administrator'] == 'YES')
     {
         // is admin
     }
     else
     {
         // logged in but not admin
     }
}
else
{
    // not logged in
} 
```

# windows-runtime - WinRT 处理超过 5 个同时触摸输入

> ID：14046361
> 
> 赞同：0
> 
> 时间：2012-12-26T21:16:08.207
> 
> 标签：windows-runtime, multi-touch

如何使用 C# 和 XAML 在 Windows 应用商店应用程序上同时处理五个以上的触摸输入？已经尝试了不同的方法，包括来自 MS：http: [//msdn.microsoft.com/en-us/library/windows/apps/xaml/jj150606.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj150606.aspx)

有谁知道处理五个以上的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:21:51.640

五次触摸限制很可能是硬件限制。触摸屏有一个专门的处理器来处理大量的电容数据。此处理会产生一个触摸列表及其各自的位置，然后将其发送到操作系统进行处理。

在 Apple 领域，小型 iOS 设备（iPhone、iPod）有 5 次触摸限制，而大型 iOS 设备（iPad）有 10 次触摸限制。

# ms-access - VBA 中与两个不同 iSeries LPARS 的 DSN-Less 连接对其中一个生成错误 3011

> ID：14046383
> 
> 赞同：3
> 
> 时间：2012-12-26T21:18:23.823
> 
> 标签：ms-access, odbc, connection-string, ibm-midrange, dsn

这个问题与 MS Access 本身（我可以成功构建）中的 dsn-less 连接字符串无关。以下字符串上周在 Windows 7 上从 MS Access 2010 连接到我们的 iSeries 时运行良好。周末，我们的 IT 团队安装了各种防病毒系统，现在该字符串间歇性地工作。但是，这种行为非常特殊，需要一些解释。这是字符串：

```
ODBC;Driver=iSeries Access ODBC Driver;System=nnn.nnn.nnn.nnn;UID=myuid;PWD=mypwd;DBQ=mylibraryname;Initial Catalog=mylibraryname;MGDSN=0 
```

它组装在一个循环中，该循环遍历连接参数表，动态构建链接表（如果它们已经存在，则首先将它们删除，然后将它们添加到 tabledefs 集合中）。大约有 12 个链接表驻留在两个不同的 iSeries LPAR（“系统”连接参数中指定的两个不同 IP 地址）上。这些表驻留在几个不同的库中，因此参数“DBQ”、“系统”和“初始目录”在每次迭代中都不同。

今天，该循环仅适用于其中一个 LPAR（一个 IP 地址），而另一个我收到错误 3011（“MS Access 数据库引擎找不到对象 MYLIBRARYNAME.TABLENAME...”）。当以下代码行尝试执行时会发生此错误：

```
CurrentDb().TableDefs.Append tblLinked    'tblLinked is of type TableDef 
```

我可以使用 Windows ODBC 实用程序创建的命名 DSN 使用 ODBC 的 MS Access“外部数据”菜单手动创建链接表对象。我可以使用链接表管理器刷新所有链接表。我只是不能使用 VBA 将链接表添加到一个 IP 地址上的表的表集合中，然后将链接表添加到同一访问会话中的另一个 IP 地址。如果我关闭并重新打开 Access，我可以使用相同的 VBA 创建指向任一系统的链接表。我只是不能随后使用 VBA 创建到另一个 IP 地址的链接表。

我查看了 IBM 的[连接参数选项](http://ibm.co/V42vNo)，并添加了 DBQ、Initial Catalog、CONNTYPE 和 LIBVIEW 的参数，上周都不需要这些参数。我运行了压缩/修复，然后经过更多研究创建了一个新数据库并导入了所有对象，然后将数据库转换为 .mdb 格式（Access 2007）并运行压缩/修复。没有帮助。

疯狂的是，如果我关闭 Access 应用程序并重新打开，我的代码可以将 tabledef 附加到首先提到的任何 ip 地址，但是任何尝试附加链接到另一个 ip 地址的 tabledef 的尝试都会失败，并出现错误 3011。每次我关闭并重新打开，我可以链接到我想要的任何 IP 地址，但不能链接到另一个。这是 100% 可重复的。需要明确的是，我必须关闭 Access 应用程序，而不仅仅是当前数据库。重新打开后，我可以连接到我想要的任何 IP 地址，但不能连接到另一个。

该代码上周有效，但今天无效（长周末后回到办公室的第一天）。

我决定将 ODBC tabledef 附加到 tabledefs 集合会导致 Access 验证表的存在，但不是通过使用连接参数。相反， .append 方法触发了一个验证过程，该过程使用一些持续存在但我找不到它来重置其值的设置。连接信息如何被缓存而不被连接字符串重置？

谁能指出我下一步可能看的地方？

# java - 解析 QIF 文件 - .NET 移植到 Java

> ID：14046384
> 
> 赞同：1
> 
> 时间：2012-12-26T21:18:33.357
> 
> 标签：java, regex, parsing

我有使用 .NET 解析 .qif 文件的代码。我正在尝试将此代码移植到 Java，但在执行部分解析的正则表达式时遇到问题。这是文件开头的示例：

```
!Type:Tag
NAdam
DSon
^
NAllison
^
NAmber
DSabrina's Sister
^
NAnthony
^ 
```

在 .NET 中，我可以使用以下代码开始解析：

```
// Read the entire file
string input = reader.ReadToEnd();

// Split the file by header types
string[] transactionTypes = Regex.Split(input, @"^(!.*)$", RegexOptions.IgnoreCase | RegexOptions.Multiline | RegexOptions.IgnorePatternWhitespace); 
```

当我调试 .NET 解析器时，我看到以下内容：

```
transactionTypes[0] = ""
transactionTypes[1] = "!Type:Tag\r"
transactionTypes[2] = "\nNAdam\r\nDSon\r\n^\r\nNAllison\r\n^NAmber\r\nDSabrina's Sister\r\nNAnthony\r\n^ 
```

在Java中，它似乎总是跳行`!Type:Tag`，所以我不知道被解析的类型。我在 Java 中尝试了各种版本的正则表达式，包括以下内容：

```
String[] transactionTypes = dataToParse.split("!.*");
String[] transactionTypes = dataToParse.split("\\s*^(!.*)\\s*");
String[] transactionTypes = dataToParse.split("\\s*(?m)^(!.*)$\\s*"); 
```

当我说它跳过该`!Type:Tag`行时，我在调试时看到以下内容：

```
transactionTypes[0] = ""
transactionTypes[1] = "\nNAdam\r\nDSon\r\n^\r\nNAllison\r\n^NAmber\r\nDSabrina's Sister\r\nNAnthony\r\n^ 
```

任何帮助表示赞赏！先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T04:20:51.417

您确定为此需要正则表达式吗？根据我对 .qif 格式的了解，它看起来更像是为逐行阅读而制作的。读取一行，如果它以“！”开头 它是标题行，然后以下行是一个对象，其中一行由“^”组成，是对象之间的分隔符，等等。这个 SO 线程中有很多逐行文件读取示例：

[如何使用 Java 逐行读取大文本文件？](https://stackoverflow.com/questions/5868369/how-to-read-a-large-text-file-line-by-line-in-java)

[http://en.wikipedia.org/wiki/Quicken_Interchange_Format](http://en.wikipedia.org/wiki/Quicken_Interchange_Format)

# php - 我的 php 页面上有 SQL 语法错误

> ID：14046387
> 
> 赞同：0
> 
> 时间：2012-12-26T21:18:34.480
> 
> 标签：php, mysql, sql, syntax, insert

这是我在 php 中运行的 mysql 插入。我已经删除了给出错误的部分，但是我在下一个部分得到了一个错误。我没有看到导致错误的不同之处。

```
$fields="adv_exchange SET synum='".$synum."', worknum='".$_POST['worknum']."', user_id='".$current_user->ID."', f_name='".$current_user->user_firstname."', l_name='".$current_user->user_lastname."', email='".$current_user->user_email."', regnum=".$_POST['regnum'].", item='".$item."', qsver='".$_POST['qsver']."', flashrom='".$_POST['flashrom']."',expansion='".$_POST['board']."', rdisplay='". $_POST['rdisplay']."', screen_model='".$_POST['screen_model']."', p_hardware='".$_POST['cable']."', pcolor='".$_POST['pcolor']."', pname='".$_POST['pname']."', kboard='".$_POST['kboard']."', ip='".$_POST['ip']."', reg_name='".$_POST['reg_name']."', mem=".$_POST['mem'].", dt_server='".$_POST['dt_server']."', alert='".$_POST['alert']."', ows='".$_POST['ows']."', w_date='".$_POST['w_date']."', flashromver='".$_POST['flashromver']."', s_size='".$_POST['s_size']."', mag='".$_POST['mag']."', rcard='".$_POST['rcard']."', kvsid=".$_POST['kvsid'].", finger='".$_POST['finger']."', stand_alone='".$_POST['stand_alone']."', standards='".$_POST['standards']."', profile='".$_POST['profile']."', man_date='".$_POST['man_date']."', l_sn='".$_POST['l_sn']."', misc='".$_POST['misc']."', problem='".$_POST['problem']."'"; 
```

然后 $query = "插入 $fields";

我收到回

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 'item='JS900CV', qsver='', flashrom='',expansion='', rdisplay='', screen_model='' 行附近使用正确的语法1 块引用

如果我回显 $query 我得到这个：

> 插入到 adv_exchange SET synum='SY5135', worknum='123456', user_id='2', f_name='REMOVED', l_name='REMOVED', email='REMOVED', regnum=, item='JS900CV', qsver ='', flashrom='',expansion='', rdisplay='', screen_model='', p_hardware='', pcolor='', pname='', kboard='', ip='192.168.1.16 ', reg_name='', mem=, dt_server='', alert='', ows='', w_date='', flashromver='', s_size='', mag='', rcard='', kvsid=3，finger=''，stand_alone=''，standards=''，profile=''，man_date=''，l_sn=''，misc='misc test\r\n'，problem='gen test '

根据我在错误中输入的内容，我的陈述中会发生变化。并非所有字段都被使用，表单是动态的，提供数据，因此字段取决于选择的选项。附带说明一下，如果担心使用`$_POST`直接插入到 mysql 中，我会先清理数组。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T21:21:31.473

看`regnum=,`。您没有为`regnum`. 要么完全忽略它，要么将其设置为适当的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T21:23:14.687

您对 MySQL 数据库使用了一种非常非常糟糕的方法：手动创建查询。您应该真正使用准备好的语句：这个问题也将得到解决。

不要使用`mysql_*`函数，而是使用[PDO](http://php.net/pdo)。

您的代码将如下所示（简化）：

```
// This holds the query
$statement = $pdo->prepare('INSERT INTO adv_exchange SET synum=?, worknum=?, etc=?, problem=?');

// This executes it with the given arguments. It's 100% injection-proof and safe. In fact, it's also faster.
$statement->execute(array($synum, $_POST['worknum'], $_POST['therest'], $_POST['problem'])); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T21:24:08.690

regnum=".$_POST['regnum']。" 导致问题。当它未定义时，您会在 SQL 查询中获得 regnum=,

更大的担忧是您没有逃避输入。要么在它们周围使用 mysql_real_escape_string，要么更好地使用准备好的语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T21:24:58.653

您需要设置 regnum=SOMETHING。

目前它是空的。

# google-app-engine - 真空后应用引擎未同步索引

> ID：14046389
> 
> 赞同：0
> 
> 时间：2012-12-26T21:18:36.963
> 
> 标签：google-app-engine

我已经用一些索引上传了我的应用程序（只有 5 个）。但是构建需要很长时间，我等了 2 天，但它仍处于“构建”状态。谷歌搜索后，我发现了几个解决方案，一个是清理所有索引，然后重新部署索引。我做了真空索引（通过清空我的 index.yaml 文件然后运行真空命令）。我使用 update index 命令重新部署了索引，但在管理控制台中显示“您尚未为此应用程序创建索引。”。

我想知道有人遇到过这个问题吗，有什么办法可以解决吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T06:13:59.457

曾经存在一个问题，即构建索引会卡住，需要 Google 员工来解开它们。

使用您的应用 ID 提交生产问题（从下拉列表中选择“生产”）

[http://code.google.com/p/googleappengine/issues/list](http://code.google.com/p/googleappengine/issues/list)

# ocaml - ocamlyacc 的详细错误

> ID：14046392
> 
> 赞同：2
> 
> 时间：2012-12-26T21:18:45.480
> 
> 标签：ocaml, yacc

在野牛中，添加就足够了

```
%verbose-error 
```

到文件以使解析器错误更加详细。有什么方法可以通过 ocamlyacc 获得类似的功能？

[这](https://stackoverflow.com/a/1939002/1350116)是类似问题的答案，但我无法从中得出任何结论。这就是我调用词法分析器和解析器函数的方式：

```
let rec foo () =
    try
    let line = input_line stdin in
    (try
       let _ = (Parser.latexstatement lexer_token_safe (Lexing.from_string line)) in
         print_string ("SUCCESS\n")
     with
           LexerException s          -> print_string ("$L" ^ line ^ "\n")
         | Parsing.Parse_error       -> print_string ("$P" ^ line ^ "\n")
         | _                         -> print_string ("$S " ^ line ^ "\n"));
    flush stdout;
    foo ();
    with
    End_of_file -> ()
;;
foo ();; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T02:41:21.763

我认为 ocamlyacc 中没有选项可以自动执行您想要的操作，因此让我尝试在下面提供一个完整的描述，说明可以采取哪些措施来处理语法错误并获得更多有用的消息。也许这不是你问的。

错误实际上必须在词法错误和解析错误中分开，这取决于错误发生在解析过程的哪个阶段。

*   在`mll`文件`Failure`中，如果出现意外模式，将引发异常
*   在`mly`文件中，这是一个`Parsing.Parse_error`将生成的异常

所以你有几个解决方案：

*   让词法分析器和解析器代码引发它们的异常，并在调用它们的代码中捕获它们
*   在其中任何一个中实施具体的错误案例
    *   词法分析器的全部规则（或一些更具体的模式，如有必要）
    *   使用`error`解析器规则中的特殊终端来捕获特定位置的错误

在任何情况下，您都必须创建函数来获取有关源中错误位置的信息。 `Lexing`并且`Parsing`两者都使用在`location`中定义的记录，`Lexing`其中包含以下字段：

*   pos_fname : 当前处理的文件名
*   pos_lnum : 文件中的行号
*   pos_bol ：*从文件*开始到行首的字符号
*   pos_cnum : 当前位置的字符号

词法分析器使用的`lexbuf`变量有两个类似的值来跟踪当前被词法分析的标记（并`lexeme_start_p`让您访问这些数据）。解析器有四个来跟踪即将被合成的当前符号（或非终结符），以及当前规则项，可以使用函数（and ，以及and ）检索。`lexeme_curr_p``Lexing``Parsing``rhs_start_pos``rhs_end_pos``symbol_start_pos``symbol_end_pos`

这里有一些函数可以生成更详细的异常：

```
exception LexErr of string
exception ParseErr of string

let error msg start finish  = 
    Printf.sprintf "(line %d: char %d..%d): %s" start.pos_lnum 
          (start.pos_cnum -start.pos_bol) (finish.pos_cnum - finish.pos_bol) msg

let lex_error lexbuf = 
    raise ( LexErr (error (lexeme lexbuf) (lexeme_start_p lexbuf) (lexeme_end_p lexbuf)))

let parse_error msg nterm =
    raise ( ParseErr (error msg (rhs_start_p nterm) (rhs_end_p nterm))) 
```

和一些基本用例：

解析器：%token ERR

```
/* ... */

wsorword:
    WS                 { $1 }
  | WORD            { $1 }
  | error             { parse_error "wsorword" 1; ERR "" } /* a token needed for typecheck */
; 
```

词法分析器：

```
rule lexer = parse
(*  ... *)
(* catch all pattern *)
| _                      { lex_error lexbuf } 
```

剩下要做的就是修改您的顶级函数以捕获异常并处理它们。

最后，出于调试目的，有一个`set_trace`功能可以`Parsing`启用解析引擎使用的状态机的显示消息：它跟踪自动机的所有内部状态变化。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-05-20T16:36:32.020

在`Parsing`模块中（你可以[在这里查看](https://caml.inria.fr/pub/docs/manual-ocaml/libref/Parsing.html)）有一个功能`Parsing.set_trace`可以做到这一点。您可以将其用作：`Parsing.set_trace True`启用。此外，您可以使用 -v 参数运行 ocamlyacc，它将输出一个 .output，列出所有状态和 trasitions。

# ios5 - MPMoviePlayerController 媒体大小和位置

> ID：14046396
> 
> 赞同：1
> 
> 时间：2012-12-26T21:19:29.047
> 
> 标签：ios5, mpmovieplayercontroller, media

有没有办法让加载的媒体的框架（即大小*和*`MPMoviePlayerController`位置） ？我了解该`naturalSize`属性，但我也想知道媒体的位置，以便我可以覆盖`UIView`媒体上方不覆盖播放控件或媒体周围未使用空间的媒体。

或者，有没有办法检索播放控件的大小？我会满足于`UIView`涵盖除控件之外的所有播放器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:25:33.650

查看 MPMoviePlayerController 的标头源，我发现：

```
// The view in which the media and playback controls are displayed.
@property(nonatomic, readonly) UIView *view; 
```

# sql - 如何根据另一个表从一个表中计数

> ID：14046399
> 
> 赞同：0
> 
> 时间：2012-12-26T21:19:58.360
> 
> 标签：sql, join, count

我有 4 个表，我不需要“问题”表，但我只是把它放在那里，这样你就会知道我在其他表中从哪里得到问题 ID。

```
Questions
--------
ID 
Question

Question_Options
--------
ID 
Question_ID
Option_Label

Session
--------------
ID    
GENDER   

Session_Answers
-----------------
ID
Session_ID
Option_ID
Question_ID 
```

我计算了以下内容：某个问题的每个选项的投票数，就像这样

```
SELECT Q.Option_Label as Choice, COALESCE((SELECT COUNT(*) FROM Session_Answers S WHERE S.Option_ID = Q.ID),0) as Votes
FROM Question_Options Q 
     INNER JOIN Session_Answers S
       ON Q.Question_ID = S.Question_ID
WHERE Q.Question_ID = 10114<---the Question ID
GROUP BY Q.ID,Q.option_label 
```

我想要做的是在查询中添加一个新列，该列计算基于会话表选择每个选项的男性人数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:40:36.287

您可以简单地从使用 Gender 过滤的 Session 表中添加额外的计数。

```
SELECT Q.Option_Label as Choice, COALESCE((SELECT COUNT(*) FROM Session_Answers SA WHERE
SA.Option_ID = Q.ID),0) as Votes,
COALESCE((SELECT COUNT(*) FROM Session SM WHERE
S.Session_ID = SM.Session_ID AND Gender='M'),0) as MalesSessions
FROM Question_Options Q 
    INNER JOIN Session_Answers S
    ON Q.Question_ID = S.Question_ID
WHERE Q.Question_ID = 10114 ---the Question ID
GROUP BY Q.ID,Q.option_label 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:55:36.530

你可以这样做：

```
SELECT QO.Question_ID, QO.Option_Label as Choice, COUNT(*) as VotesMale
FROM Question_Options QO 
LEFT JOIN Session_Answers SA ON QO.ID = SA.Option_ID
JOIN [Session] S ON S.ID = SA.Session_ID AND S.Gender = 'M'
WHERE QO.Question_ID = 10114<---the Question ID
GROUP BY QO.Question_ID, QO.Option_label 
```

# objective-c - Objective-C 可以用于非 Apple 编程吗？

> ID：14046400
> 
> 赞同：5
> 
> 时间：2012-12-26T21:20:44.943
> 
> 标签：objective-c

Java、C、C++等可用于多种类型的计算机甚至手机。

但是，Objective-C 可以用于除 Apple 产品之外的任何东西吗？我可以为 Windows 机器（或 linux）制作一个 Objective-C 程序，就像我为 java 做的一样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T21:24:11.483

这个链接应该回答你的问题：[gnustep.org](http://gnustep.org)。

简而言之：

> 该项目的目的是为尽可能多的平台创建一个免费且开放的 Cocoa（以前称为 NeXTSTEP/OpenStep）API 和工具。

# linux - Linux程序内的偏移指令

> ID：14046404
> 
> 赞同：0
> 
> 时间：2012-12-26T21:20:50.287
> 
> 标签：linux, linux-kernel, embedded-linux, archlinux

我需要在程序中找到指令的偏移量。假设我想在程序 cat 中找到 open *system_call* 的位置。

我使用 objdump 来查找 bin 文件中的位置。

```
objdump -T /bin/cat  | grep open : 
0000000000000000      DF *UND*  0000000000000000  GLIBC_2.2.5 fdopen
0000000000000000      DF *UND*  0000000000000000  GLIBC_2.2.5 open
0000000000000000      DF *UND*  0000000000000000  GLIBC_2.2.5 iconv_ope 
```

不幸的是，分析 sible 表我无法检索该信息，因为 open 函数是动态链接的。open 函数在*glibc*中实现。

在 Glibc 库上使用相同的方法，我检索了 open 函数的偏移量，尽管这个偏移量是指内部的位置`/lib/libc.so.6`所以这对我没有用。

```
00000000000778d0 g    DF .text  00000000000004e3  GLIBC_2.2.5 _IO_file_fopen
000000000006be50 g    DF .text  000000000000000a  GLIBC_2.2.5 fopen
0000000000073540 g    DF .text  00000000000000f6  GLIBC_2.4   open_wmemstream
0000000000121cf0  w   DF .text  0000000000000107  GLIBC_2.2.5 posix_openpt
000000000006d480 g    DF .text  00000000000003bf  GLIBC_2.2.5 _IO_proc_open
00000000000e38b0 g    DF .text  0000000000000021  GLIBC_2.7   __open64_2
000000000006bfe0 g    DF .text  00000000000000fa  GLIBC_2.2.5 fopencookie
000000000006d840 g    DF .text  0000000000000098  GLIBC_2.2.5 popen
00000000000ddd30  w   DF .text  000000000000005e  GLIBC_2.2.5 __open64
000000000006be50 g    DF .text  000000000000000a  GLIBC_2.2.5 _IO_fopen
00000000000de020  w   DF .text  0000000000000020  GLIBC_2.7   __openat64_2
00000000000e84d0 g    DF .text  0000000000000066  GLIBC_2.2.5 openlog
00000000000ddd30  w   DF .text  000000000000005e  GLIBC_2.2.5 open64
00000000003aa630 g    DO .bss   0000000000000008  GLIBC_PRIVATE _dl_open_hook
00000000000ec840 g    DF .text  000000000000005e  GLIBC_2.14  open_by_handle_at
0000000000034250 g    DF .text  0000000000000254  GLIBC_2.2.5 catopen
000000000006d840 g    DF .text  0000000000000098  GLIBC_2.2.5 _IO_popen
0000000000075330 g    DF .text  0000000000000355  GLIBC_2.2.5 freopen64
0000000000075eb0 g    DF .text  00000000000001d8  GLIBC_2.2.5 fmemopen
00000000000b5b90  w   DF .text  000000000000008b  GLIBC_2.4   fdopendir
00000000000de020 g    DF .text  0000000000000020  GLIBC_2.7   __openat_2
00000000000b5640  w   DF .text  000000000000000d  GLIBC_2.2.5 opendir
00000000000e3880 g    DF .text  0000000000000021  GLIBC_2.7   __open_2
00000000000ddd30  w   DF .text  000000000000005e  GLIBC_2.2.5 __open
00000000000777f0 g    DF .text  00000000000000d2  GLIBC_2.2.5 _IO_file_open
0000000000074370 g    DF .text  00000000000000e6  GLIBC_2.2.5 open_memstream
0000000000073ab0 g    DF .text  000000000000035d  GLIBC_2.2.5 freopen
00000000000345a0 g    DF .text  0000000000000837  GLIBC_PRIVATE __open_catalog
00000000000ddd30  w   DF .text  000000000000005e  GLIBC_2.2.5 open
000000000006b540 g    DF .text  0000000000000249  GLIBC_2.2.5 fdopen
0000000000022b20 g    DF .text  000000000000020a  GLIBC_2.2.5 iconv_open
00000000000e2130 g    DF .text  0000000000000373  GLIBC_2.2.5 fts_open
00000000000ddf80  w   DF .text  0000000000000092  GLIBC_2.4   openat
000000000006be50  w   DF .text  000000000000000a  GLIBC_2.2.5 fopen64
00000000000ddf80  w   DF .text  0000000000000092  GLIBC_2.4   openat64
0000000000122f30 g    DF .text  0000000000000046  GLIBC_PRIVATE __libc_dlopen_mode
00000000000dc650 g    DF .text  00000000000000b8  GLIBC_2.2.5 posix_spawn_file_actions_addopen
000000000006b540 g    DF .text  0000000000000249  GLIBC_2.2.5 _IO_fdopen 
```

当 cat 程序调用 open 函数时，我需要偏移量来设置跟踪器。如果我在 Glibc 库上放置一个跟踪器，我将在每次调用它时跟踪该系统调用。

你能帮助我吗？我是否清楚地解释了我的问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T21:41:58.080

好吧，`cat`它本身不包含`open`系统调用。它住在`glibc.so`. `cat`调用库以使用该函数。这就是为什么当你往里看的时候`cat`，里面没有`open`函数，它是“未定义的”并且指的是`glibc.so`.

你当然可以找到 where`cat`调用`open`：

如果您在符号表中搜索该符号`open@plt`，这就是它调用 open 的地方。例如`objdump -d`which cat `|grep open@plt`shows `0000000000401910 <open@plt>:`，这是跳转到 glibc 函数的地方。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:16:29.067

具有不错的动态链接器集成的调试器应该为您处理此问题，解析您希望设置断点的符号名称。当您尝试设置断点时库尚未加载时，它甚至可以执行此操作。

但是，请注意，您可以使用用户模式调试器跟踪的系统调用并不多。您可以跟踪小 libc 存根，它可能会做一些事情，例如在平台的 C 调用约定与其通常不同的系统调用约定之间重新排序参数，或者实现一个已弃用的系统调用作为新系统调用的包装器，但实际的内核模式实现只能使用内核调试器进行跟踪。

您可能还对 strace 程序感兴趣，它打印出所有系统调用的参数和返回值。在某些情况下有用的另一件事是动态库拦截，例如使用 LD_PRELOAD。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T21:49:12.950

用于`/proc/$PID/maps`查看共享对象库的段在进程内存中的加载位置。例如：

```
# grep libc /proc/$$/maps
7f3243879000-7f3243a2e000 r-xp 00000000 08:01 270246                     /lib/x86_64-linux-gnu/libc-2.15.so
7f3243a2e000-7f3243c2d000 ---p 001b5000 08:01 270246                     /lib/x86_64-linux-gnu/libc-2.15.so
7f3243c2d000-7f3243c31000 r--p 001b4000 08:01 270246                     /lib/x86_64-linux-gnu/libc-2.15.so
7f3243c31000-7f3243c33000 rw-p 001b8000 08:01 270246                     /lib/x86_64-linux-gnu/libc-2.15.so 
```

-- 所以有4段`libc.so`加载到进程的地址空间，我们需要一个可执行的，标记为`r-xp`（“Read, no write, eXecute, Private”），它的开始是在`*0x7f3243879000`。您已经知道如何获取符号的相对偏移量，例如`freopen`，您的示例是`000000000000035d`从可执行段的开头开始，因此在我的示例中，可以在进程内存中的`7f3243879000 + 35d`=处找到符号。`*0x7f324387935d`

# css - CKEditor 4 结合css

> ID：14046408
> 
> 赞同：2
> 
> 时间：2012-12-26T21:21:17.577
> 
> 标签：css, ckeditor

我在我的网站上使用 CSS 来设置项目的样式。

在我（自己开发的）CMS 中，我使用 CKEditor 作为所见即所得的编辑器。

我希望编辑器与我网页上的内容具有相同的样式。我页面的 CSS 如下所示：

```
.content 
{
    ...
}
.content ul, .content ol 
{
    ...
}
.content p
{
    ...
} 
```

但是 CKEditor (contents.css) 的样式表是这样的：

```
body
{
    ...
}
ol,ul,dl
{
    ...
}

h1,h2,h3,h4,h5,h6
{
    ...
} 
```

有没有办法把它放到一个样式表中，或者编辑CKEditor，所以添加了一个div.content？

* * *

我找到了答案，将 config.js 更改为：

```
CKEDITOR.editorConfig = function( config ) {
    config.bodyClass = 'content'; //class that body needs to refer to
    config.contentsCss = '/css/beheer.css'; //your stylesheet 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:57:03.270

在**CKEDITOR**中，你为你的任何元素写一个`<div>`标签`ol,ul,dl,h1,etc`..

只需转到**CKEDITOR**中的源代码按钮，然后您就可以按照您想要的方式进行编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:49:43.893

就像我在 startpost 上编辑的一样，我自己找到了答案：

将 config.js 更改为：

```
CKEDITOR.editorConfig = function( config ) {
    config.bodyClass = 'content'; //class that body needs to refer to
    config.contentsCss = '/css/beheer.css'; //your stylesheet 
```

# asp.net - 如何使用 ApiController 返回原始字符串？

> ID：14046417
> 
> 赞同：138
> 
> 时间：2012-12-26T21:21:50.207
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我有一个提供 XML/JSON 的 ApiController，但我希望我的操作之一返回纯 HTML。我尝试了以下方法，但它仍然返回 XML/JSON。

```
public string Get()
{
    return "<strong>test</strong>";
} 
```

这是上面返回的内容：

```
<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">&lt;strong&gt;test&lt;/strong&gt;</string> 
```

有没有办法只返回纯的、未转义的文本，甚至没有周围的 XML 标记（可能是动作属性的不同返回类型）？

* * *

## 回答 #1

> 赞同：241
> 
> 时间：2012-12-26T21:27:39.347

您可以让您的 Web Api 操作返回一个`HttpResponseMessage`您可以完全控制其内容的内容。在您的情况下，您可以使用 StringContent 并指定正确的内容类型：

```
public HttpResponseMessage Get()
{
    return new HttpResponseMessage()
    {
        Content = new StringContent(
            "<strong>test</strong>", 
            Encoding.UTF8, 
            "text/html"
        )
    };
} 
```

或者

```
public IHttpActionResult Get()
{
    return base.ResponseMessage(new HttpResponseMessage()
    {
        Content = new StringContent(
            "<strong>test</strong>", 
            Encoding.UTF8, 
            "text/html"
        )
    });
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-10-06T15:14:39.283

另一种可能的解决方案。在 Web API 2 中，我使用了 base.Content() 方法`APIController`：

```
 public IHttpActionResult Post()
    {
        return base.Content(HttpStatusCode.OK, new {} , new JsonMediaTypeFormatter(), "text/plain");
    } 
```

我需要这样做来解决一个 IE9 错误，它一直试图下载 JSON 内容。`XmlMediaTypeFormatter`通过使用媒体格式化程序，这也应该适用于 XML 类型的数据。

希望对某人有所帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-12T21:35:57.940

只是`return Ok(value)`行不通，它会被威胁为`IEnumerable<char>`.

而是使用`return Ok(new { Value = value })`或类似。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-20T12:01:02.193

如果您使用的是 MVC 而不是 WebAPI，则可以使用 base.Content 方法：

```
return base.Content(result, "text/html", Encoding.UTF8); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-28T09:42:28.503

我从 mvc 控制器方法中调用以下 webapi2 控制器方法：

```
<HttpPost>
Public Function TestApiCall(<FromBody> screenerRequest As JsonBaseContainer) As IHttpActionResult
    Dim response = Me.Request.CreateResponse(HttpStatusCode.OK)
    response.Content = New StringContent("{""foo"":""bar""}", Encoding.UTF8, "text/plain")
    Return ResponseMessage(response)
End Function 
```

我从 asp.net 服务器上的这个例程中调用它：

```
Public Async Function PostJsonContent(baseUri As String, requestUri As String, content As String, Optional timeout As Integer = 15, Optional failedResponse As String = "", Optional ignoreSslCertErrors As Boolean = False) As Task(Of String)
    Return Await PostJsonContent(baseUri, requestUri, New StringContent(content, Encoding.UTF8, "application/json"), timeout, failedResponse, ignoreSslCertErrors)
End Function

Public Async Function PostJsonContent(baseUri As String, requestUri As String, content As HttpContent, Optional timeout As Integer = 15, Optional failedResponse As String = "", Optional ignoreSslCertErrors As Boolean = False) As Task(Of String)
    Dim httpResponse As HttpResponseMessage

    Using handler = New WebRequestHandler
        If ignoreSslCertErrors Then
            handler.ServerCertificateValidationCallback = New Security.RemoteCertificateValidationCallback(Function(sender, cert, chain, policyErrors) True)
        End If

        Using client = New HttpClient(handler)
            If Not String.IsNullOrWhiteSpace(baseUri) Then
                client.BaseAddress = New Uri(baseUri)
            End If

            client.DefaultRequestHeaders.Accept.Clear()
            client.DefaultRequestHeaders.Accept.Add(New MediaTypeWithQualityHeaderValue("application/json"))
            client.Timeout = New TimeSpan(TimeSpan.FromSeconds(timeout).Ticks)

            httpResponse = Await client.PostAsync(requestUri, content)

            If httpResponse.IsSuccessStatusCode Then
                Dim response = Await httpResponse.Content.ReadAsStringAsync
                If Not String.IsNullOrWhiteSpace(response) Then
                    Return response
                End If
            End If
        End Using
    End Using

    Return failedResponse
End Function 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-10-21T16:29:18.297

我们必须努力不返回 html，而是从我们的 API 中返回纯数据，并在 UI 中相应地格式化数据，但也许你可以使用：

```
return this.Request.CreateResponse(HttpStatusCode.OK, 
     new{content=YourStringContent}) 
```

这个对我有用

# .net - 程序在后台运行时的 WPF MediaCommands

> ID：14046419
> 
> 赞同：2
> 
> 时间：2012-12-26T21:21:53.327
> 
> 标签：.net, wpf, routed-commands

我有一个程序，我在我的 MainWindow 中将一些[.NET 媒体命令实现为路由命令，如下所示：](http://msdn.microsoft.com/en-us/library/system.windows.input.mediacommands.aspx)

```
<Window.CommandBindings>
    <CommandBinding Command="MediaCommands.TogglePlayPause"
                    Executed="ExecutePlayPause"
                    CanExecute="CanExecuteTogglePlayPause" />
</Window.CommandBindings> 
```

如果当前正在使用该程序，这将正常工作。但是，如果我切换到不同的程序并发送 TogglePlayPause MediaCommand，则不会触发该命令（永远不会调用 CanExecute）。

有没有办法确保我的程序始终响应 MediaCommands，即使它在后台运行？

FWIW 程序 Rdio 似乎能够做到这一点。我可以将它放在后台，发送 MediaCommand，音乐就会播放或暂停。

谢谢你。

# haxe - 使用 Haxe 读取 PNG 图像

> ID：14046422
> 
> 赞同：5
> 
> 时间：2012-12-26T21:22:12.593
> 
> 标签：haxe

使用 Haxe 编程语言，是否有任何跨平台的方式来读取 PNG 图像，并从图像中获取像素数据？

我有一个名为 stuff.png 的文件，我想从图像中获取一个 RGB 值数组（作为整数数组）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T03:28:26.043

这是使用 Haxe 格式库读取 PNG 文件的示例。您需要`-lib format`在编译器 args / build.hxml 中：

```
function readPixels(file:String):{data:Bytes, width:Int, height:Int} {
    var handle = sys.io.File.read(file, true);
    var d = new format.png.Reader(handle).read();
    var hdr = format.png.Tools.getHeader(d);
    var ret = {
        data:format.png.Tools.extract32(d),
        width:hdr.width,
        height:hdr.height
    };
    handle.close();
    return ret;
} 
```

下面是如何从上面获取 ARGB 像素数据的示例：

```
public static function main() {
  if (Sys.args().length == 0) {
    trace('usage: PNGReader <filename>');
    Sys.exit(1);
  }
  var filename = Sys.args()[0];
  var pixels = readPixels(filename);
  for (y in 0...pixels.height) {
    for (x in 0...pixels.width) {
      var p = pixels.data.getInt32(4*(x+y*pixels.width));
      // ARGB, each 0-255
      var a:Int = p>>>24;
      var r:Int = (p>>>16)&0xff;
      var g:Int = (p>>>8)&0xff;
      var b:Int = (p)&0xff;
      // Or, AARRGGBB in hex:
      var hex:String = StringTools.hex(p,8);
      trace('${ x },${ y }: ${ a },${ r },${ g },${ b } - ${ StringTools.hex(p,8) }');
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T11:46:27.693

您始终可以使用 BitmapData.getPixels/BitmapData.setPixels 访问像素数据。

如果您使用的是 haXe NME，则可以使用 Assets.getBitmapData() 来加载资产图像文件。

如果你想从网络加载图片，那么你可以使用 Loader 类，它可以异步加载远程图片，但在 flash 中请注意跨域问题。

对于更通用的 ByteArray -> BitmapData 转换，请使用以下代码：

```
var ldr = new Loader();
ldr.loadBytes(cast(byteArray)); // bytearray contains raw image data
var dp: DisplayObject = ldr.content; // actually ontent should be of Bitmap class
var bitmapData = new BitmapData(Std.int(dp.width), Std.int(dp.height), true, 0);
bitmapData.draw(dp); 
```

# caching - 浏览器缓存在 Chrome 中正确过期，但在 Firefox 或 IE9 中没有

> ID：14046425
> 
> 赞同：1
> 
> 时间：2012-12-26T21:22:36.757
> 
> 标签：caching, browser, cache-control

我已经搜索过这个问题的答案，但大多数问题似乎与我的相反，即缓存在其他问题中根本不起作用。我的问题是 Chrome 按预期处理图像缓存，但 Firefox 和 IE9 似乎永远缓存，即使被告知只缓存 2 分钟。

我正在生成图像并使用**Expires**和**Cache-Control: max-age**标头返回浏览器。我没有设置**Last-Modified**标头。使用 Chrome 版本 23、Firefox 版本 11 (Linux) 和 Firefox 版本 16 (Windows) 和 IE9 进行测试。

观察 HTTP 响应，所有三个浏览器都获取图像并显示正确的过期时间（未来 2 分钟）。所有显示响应 = 200。

接下来我使用 javascript 来更改 IMG SRC。更多 HTTP 响应 = 200。当我返回到以前获取的图像时，没有对服务器的请求 - 它是从浏览器缓存中加载的。这对所有 4 个浏览器都是正确的。

等待 2 分钟以上，然后重试。Chrome 向服务器发出请求并接收返回 HTTP 响应 = 200 的图像。这是我所期望的。

但是 Firefox 或 IE9 都不会再次向服务器请求图像。
如果我清除浏览器缓存（使用工具，而不是 shift-reload），Firefox 将重新加载，但 IE9*仍然*不会重新加载。好的，我们已经知道 IE9 有多蹩脚了。

我当然希望我不会因为没有发现这个问题已经得到解答而被撕碎。

# android - 警报管理器（每次重新启动后显示类）

> ID：14046428
> 
> 赞同：0
> 
> 时间：2012-12-26T21:22:43.020
> 
> 标签：android, alarmmanager

我有一个在固定时间（和日期）开始新课程的意图。此意图从固定日期开始，但也在每次重新启动时（也在过去的日期和时间之后）。在我的代码中，New.class 从 26/12/12 - 21.30 开始，但如果我在那之后重新启动模拟器，New.class 会自动启动。为什么？谢谢！

PS：此代码在 Autostart 类中 (public void onReceive(Context context, Intent intent) {)

```
Calendar cal = Calendar.getInstance(TimeZone.getDefault(), Locale.getDefault());
cal.set(Calendar.DATE,26);
cal.set(Calendar.MONTH,Calendar.DECEMBER);  
cal.set(Calendar.YEAR,2012);
cal.set(Calendar.HOUR_OF_DAY, 21);  
cal.set(Calendar.MINUTE, 30);       
cal.set(Calendar.SECOND, 00);       

Intent intent3 = new Intent(context, New.class);
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,intent3, 0);
alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:52:02.310

这是设计使然。请参阅该[方法的](https://developer.android.com/reference/android/app/AlarmManager.html#set%28int,%20long,%20android.app.PendingIntent%29)[文档`set()`](https://developer.android.com/reference/android/app/AlarmManager.html#set%28int,%20long,%20android.app.PendingIntent%29)：

“如果时间发生在过去，就会立即触发警报。”

如果您*不*希望发生这种情况，则不应安排警报。也就是说，您应该检查自己是否`set()`在 BroadcastReceiver 内调用。

# python - Python：局部变量神秘地更新全局变量

> ID：14046436
> 
> 赞同：4
> 
> 时间：2012-12-26T21:23:42.567
> 
> 标签：python, variables, global, local

我有一个使用局部变量的函数，然后在函数完成后传回最终变量。我想记录这个变量在函数之前是什么，但是全局变量与局部变量一起更新。这是我的代码的缩写版本（很长）

```
def Turn(P,Llocal,T,oflag):
    #The function here changes P, Llocal and T then passes those values back
    return(P, Llocal, T, oflag)

#Later I call the function
#P and L are defined here, then I copy them to other variables to save
#the initial values

P=Pinitial
L=Linitial
P,L,T,oflag = Turn(P,L,T,oflag) 
```

我的问题是 L 和 Linitial 都在 Llocal 更新时准确更新，但我希望 Linitial 不改变。P 没有改变，所以我对这里发生的事情感到困惑。帮助？谢谢！

勇敢的人的完整代码在这里：[https ://docs.google.com/document/d/1e6VJnZgVqlYGgYb6X0cCIF-7-npShM7RXL9nXd_pT-o/edit](https://docs.google.com/document/d/1e6VJnZgVqlYGgYb6X0cCIF-7-npShM7RXL9nXd_pT-o/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:30:18.543

问题是 P 和 L 是`names`to `bound`，`objects`而不是值本身。当您将它们作为参数传递给函数时，实际上是将绑定的副本传递给 P 和 L。这意味着，如果 P 和 L 是可变对象，则对它们所做的任何更改都将在函数调用之外可见.

您可以使用[复制](http://docs.python.org/2/library/copy.html)模块来保存名称值的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:33:38.660

列表是可变的。如果您将列表传递给函数并且该函数修改了列表，那么您将能够看到绑定到同一列表的任何其他名称的修改。

要解决此问题，请尝试更改此行：

```
L = Linitial 
```

对此：

```
L = Linitial[:] 
```

此切片制作列表的浅表副本。如果添加或删除存储在列表中的项目，`L`它不会更改列表`Lintial`。

如果要进行深层复制，请使用[`copy.deepcopy`](http://docs.python.org/2/library/copy.html#copy.deepcopy).

* * *

同样的事情不会发生，`P`因为它是一个整数。整数是不可变的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T21:35:50.263

在 Python 中，变量只是对内存中对象或值的引用。例如，当您有一个列表时`x`：

```
x = [1, 2, 3] 
```

因此，当您分配`x`给另一个变量时，我们称之为它`y`，您只是为（列表）`y`引用的对象创建一个新的引用（ ）。`x``[1, 2, 3]`

```
y = x 
```

当您更新时`x`，您实际上是在更新所指向的对象`x`，即列表`[1, 2, 3]`。由于`y`引用了相同的值，它似乎也被更新了。

请记住，变量只是对对象的引用。

如果你真的想复制一个列表，你应该这样做：

```
new_list = old_list[:] 
```

这是一个很好的解释：[http ://henry.precheur.org/python/copy_list](http://henry.precheur.org/python/copy_list)

# spring - PrimeFaces 数据表分页显示“未找到记录”

> ID：14046437
> 
> 赞同：0
> 
> 时间：2012-12-26T21:23:45.513
> 
> 标签：spring, hibernate, jsf-2, primefaces

我有一个使用 JSF2.0、Spring3 和 Hibernate4 的应用程序。

我在 Primefaces 3.4.2 数据表分页[http://www.primefaces.org/showcase-labs/ui/datatablePagination.jsf](http://www.primefaces.org/showcase-labs/ui/datatablePagination.jsf)中显示值。问题是数据表显示“没有找到记录

"![显示来自数据库的值](../Images/19da51176a4d557c16aab9a7c16baa5f.png)

当我使用没有分页的 JSF2.0 数据表时，我会检索我的记录！

![显示来自数据库的值](../Images/7606f848c46f3fb13beec81c53c3b218.png)

这是我的 Xhtml 文件：

```
<h:form prependId="false">

    <p:dataTable id="dataTable" value="#{candidatBean.candidats}" var="c"
                 paginator="true" rows="10"
                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                 rowsPerPageTemplate="5,10,15">
        <f:facet name="header">
            Ajax Pagination
        </f:facet>

        <p:column>
            <f:facet name="header">
                <h:outputText value="Nom" />
            </f:facet>
            <h:outputText value="#{c.nom}" />
        </p:column>

        <p:column>
            <f:facet name="header">
                <h:outputText value="Prenom" />
            </f:facet>
            <h:outputText value="#{c.prenom}" />
        </p:column>

        <p:column>
            <f:facet name="header">
                <h:outputText value="Ecole" />
            </f:facet>
            <h:outputText value="#{c.ecole}" />
        </p:column>

        <p:column>
            <f:facet name="header">
                <h:outputText value="Mail" />
            </f:facet>
            <h:outputText value="#{c.email}" />
        </p:column>
    </p:dataTable>

</h:form> 
```

# ruby-on-rails - 将 Rails 表单发布到 s3 上传的策略和签名问题

> ID：14046441
> 
> 赞同：7
> 
> 时间：2012-12-26T21:24:11.083
> 
> 标签：ruby-on-rails, post, upload, amazon-s3

我正在尝试遵循[此“操作方法”](http://aws.amazon.com/articles/1434)（从 POST 到 S3 存储桶），但我的策略和签名似乎失败了。

我不太确定我的保单和签名有误？但我知道我在评估我在助手中创建的方法时遇到了问题。我尝试将策略和签名值转换为符号，并且尝试了`<%= :S3_UPLOAD_SIGNATURE %>`<%=h, <%=raw, "#{<%=..}"。

我之前调用过辅助方法没有任何问题，所以我有点迷茫。

错误：

```
NameError in Proj_files#new

Showing /app/views/proj_files/new.html.erb where line #8 raised:

uninitialized constant ActionView::CompiledTemplates::S3_UPLOAD_POLICY
Extracted source (around line #8):

5:       <input type="hidden" name="AWSAccessKeyId" value= <%= ENV['AWS_ACCESS_KEY_ID'] %> > 
6:       <input type="hidden" name="acl" value="private"> 
7:       <input type="hidden" name="success_action_redirect" value="http://localhost/">
8:       <input type="hidden" name="policy" value= <%= S3_UPLOAD_POLICY %> >
9:       <input type="hidden" name="signature" value= <%= S3_UPLOAD_SIGNATURE %> >
10:       <input type="hidden" name="Content-Type" value="image/png">
11:       <!-- Include any additional input fields here --> 
```

我有一个带有相应 new.html.erb 的 proj_files 控制器：

```
<form action="https://s3.amazonaws.com/MY_BUCKET" method="post" enctype="multipart/form-data">
  <input type="hidden" name="key" value="uploads/${filename}">
  <input type="hidden" name="AWSAccessKeyId" value= <%= ENV['AWS_ACCESS_KEY_ID'] %> > 
  <input type="hidden" name="acl" value="private"> 
  <input type="hidden" name="success_action_redirect" value="http://localhost/">
  <input type="hidden" name="policy" value= <%= S3_UPLOAD_POLICY %> >
  <input type="hidden" name="signature" value= <%= S3_UPLOAD_SIGNATURE %> >
  <input type="hidden" name="Content-Type" value="image/png">
  <!-- Include any additional input fields here -->

  File to upload to S3: 
  <input name="file" type="file"> 
  <br> 
  <input type="submit" value="Upload File to S3"> 
</form> 
```

和 proj_files_helper.rb：

```
module ProjFilesHelper

  def S3_UPLOAD_POLICY options = {}
    options[:content_type] ||= ''
    options[:acl] ||= 'private'
    options[:max_file_size] ||= 500.megabyte
    options[:path] ||= ''

    Base64.encode64(
      "{'expiration': '#{10.hours.from_now.utc.strftime('%Y-%m-%dT%H:%M:%S.000Z')}',
        'conditions': [
          {'bucket': '#{ENV['S3_BUCKET']}'},
          ['starts-with', '$key', ''],
          {'acl': '#{options[:acl]}'},
          {'success_action_status': '201'},
          ['content-length-range', 0, #{options[:max_file_size]}],
          ['starts-with','$Content-Type','']
        ]
    }").gsub(/\n|\r/, '')
  end

  def S3_UPLOAD_SIGNATURE options = {}
    Base64.encode64(
      OpenSSL::HMAC.digest(
      OpenSSL::Digest::Digest.new('sha1'),
      ENV['AWS_SECRET_ACCESS_KEY'], s3_policy(options))).gsub("\n","")
  end

end 
```

谢谢参观！

**更新：** 我将方法名称更改为小写，这让我更进一步（我应该意识到这一点！）。

现在我收到一个 S3 错误：

```
<Error>
<Code>AccessDenied</Code>
<Message>
Invalid according to Policy: Policy Condition failed: ["eq", "$bucket", "MY_BUCKETS_NAME"]
</Message> 
```

似乎可能有一个 ENV 变量 $bucket 错误参考我会寻找......“MY_BUCKETS_NAME”确实显示了正确的存储桶名称......如果有人可以提供任何帮助，让 Rails 发布表单到 S3 并运行/指出我的错误，我将不胜感激。

谢谢

**UPDATE2** 根据下面的评论，我将表单操作修改为“ [https://s3.amazonaws.com/MY_BUCKET](https://s3.amazonaws.com/MY_BUCKET) ”并收到此错误：

```
Invalid according to Policy: Policy Condition failed: ["eq", "$acl", "public-read"] 
```

接近...谢谢！

**UPDATE3** 我正在战斗！

我已修改策略并形成 ACL 以具有相同的一致值（私有或公共读取）。

下面的评论使我将表单操作修改为：`http://MY_BUCKET.s3.amazonaws.com/`我收到此错误：

```
<Code>AccessDenied</Code>
<Message>
Invalid according to Policy: Policy Condition failed: ["eq", "$success_action_status", "201"]
</Message> 
```

奇怪的是，当我转到 AWS S3 管理控制台并将文件上传到我的存储桶时，它告诉我链接是“ [http://s3.amazonaws.com/MY_BUCKET](http://s3.amazonaws.com/MY_BUCKET) ”形式的。我在 amazonaws 之前和之后添加了 MY_BUCKET ，但仍然收到相同的错误...

我不确定哪里发生了错误配置...我将创建一个新存储桶，看看我是否设置错误...。

谢谢！

**现在可以使用了！！！** 我从答案中修复了所有内容......但后来不得不再做一个改变......

我的表单有一个“success_action_redirect”字段，但我的策略有一个success_action_status！

政策和表单字段必须匹配！呃！

感谢所有的帮助......是时候进一步调整它了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T21:49:49.487

1/ 要上传文件，您必须使用此 url `"http://#{bucket_name}.s3.amazonaws.com/"`。[它在文档](http://doc.s3.amazonaws.com/proposals/post.html#Form_Fields)中明确说明：

> action 定义了处理请求的 URL；这必须设置为存储桶的 URL。例如，如果您的存储桶的名称是“johnsmith”，那么 URL 将是“ [http://johnsmith.s3.amazonaws.com/](http://johnsmith.s3.amazonaws.com/) ”

2/ 您必须有一致的政策，似乎您`public-read`在签名和`private`表格中设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T16:47:18.453

我收到以下错误：根据策略无效：策略条件失败：[\"eq\", \"$bucket\"

几个小时后，我知道你不能有一个大写字母的桶。将存储桶更改为小写即可修复它。

# design-patterns - 使用 Spring MVC 对列表（保存到 XML）进行 CRUD 操作的设计模式

> ID：14046443
> 
> 赞同：0
> 
> 时间：2012-12-26T21:24:55.243
> 
> 标签：design-patterns, web-applications, spring-mvc, xml-parsing, crud

我正在尝试使用 Spring MVC、XMLBeans 和通常的 Java EE 堆栈来增强现有的 Java Web 应用程序。最终用户在各种列表（对象列表）上执行 CRUD 操作。该列表最终使用 XMLBeans 保存到一个 XML 文件中。更新后的列表再次使用 XMLBeans 从 XML 文件中拉回并显示给用户。是否有合适的设计模式来优化这些操作？

我打算将列表中每个项目的随机 ID 存储到 XML 中，并将其用作 html 表单隐藏字段来识别当前为 CRUD 修改了哪个列表元素。有什么更好的方法吗？由于数据最终存储到 XML 中，因此没有默认 ID（如在数据库中），因此我正在考虑随机生成一个 ID 并使用它进行跟踪。是否有解决此用例的设计模式？

我还试图找出一种方法来跟踪 CRUD 操作是否成功。这样最终用户可以知道请求是否通过。也许是回调消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:15:22.107

就模式使用而言，我假设您的前端通过使用漂亮的 POJO、DTO 等（参考[http://www.oracle.com/technetwork/java/dataaccessobject -138824.html](http://www.oracle.com/technetwork/java/dataaccessobject-138824.html) )。这样，您将来可以更改为任何其他持久性机制，而不会影响您的客户端。然后，您的 MVC 控制器将以通常的方式提供 POJO 或其某种表示。

关于ID创建，我的观点是不要使用随机数，主要是因为可能会产生重复的密钥。我个人倾向于更确定性的东西，例如长计数或时间戳。您没有提到后端的体系结构，因此仍有可能产生重复的密钥，但稍加注意可以将其最小化。

关于向最终用户说明操作的成功/失败，我不确定是否有足够的信息来给出明确的答案。这可能取决于最终用户的期望。如果最终用户是信息的软件消费者，他们将期望创建时的 ID 集和更新/删除时的成功指示。如果它是一个活生生的人，那么你会想要在这里做一些交互设计。例如，如果用户*真的*进行 CRUD 操作，那么他们很可能希望看到生成的 ID 以及保存的数据的内容；但如果事情比这更抽象，从视觉角度来看，前端页眉/页脚中的简单“成功”消息可能就足够了。这可能在技术上采用回调的形式（例如 AJAX/jQuery），或者它可能只是一个呈现结果的 JSP，或者两者的组合。

# java - 在java中处理文件

> ID：14046445
> 
> 赞同：3
> 
> 时间：2012-12-26T21:25:00.837
> 
> 标签：java, file-io

我有一个字符串数组。我想将这些字符串保存在文件中。问题是，我需要创建一个名为 db.txt 的新文件（仅当它不存在时），然后以某种方式向其中写入字符串。

然后稍后我希望能够从该文件中读取字符串并将它们插入到数组中。

插入和使用数组不是问题，但问题是我如何弄乱文件？如何创建一个新的文本文件（如果尚不存在），如何写入它以及如何读取它？

试图自己学习它，但我在互联网上看到了很多方法并且感到困惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T21:30:29.207

以下是写入文本文件的示例：

```
File file = new File("./db.txt");
PrintWriter pw = new PrintWriter(file, true); // true for auto-flush
pw.println("Line 1");
pw.println("Line 2");
pw.println("Line 3");
pw.close(); 
```

如果您想附加到现有的文本文件：

```
File file = new File("./db.txt");
FileWriter fw = new FileWriter(file, true); // true for appending
PrintWriter pw = new PrintWriter(fw, true); // true for auto-flush
pw.println("Line 4");
pw.println("Line 5");
pw.println("Line 6");
pw.close(); 
```

从文本文件中读取：

```
File file = new File("./db.txt");
BufferedReader br = new BufferedReader(new FileReader(file));
String line1 = br.readLine();
String line2 = br.readLine();
String line3 = br.readLine();
br.close(); 
```

* * *

还要考虑以下几点：

*   [`PrintWriter`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html)如果它不存在，则不会创建新文件，而[`FileWriter`](http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html)会。
*   要检查文件是否存在，请使用：[`file.exists()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#exists%28%29).
*   要检查文件对象是指文件还是目录，请使用:[`file.isDirectory()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#isDirectory%28%29)和[`file.isFile()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#isFile%28%29).
*   要创建新文件，请使用：[`file.createNewFile()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#createNewFile%28%29).
*   要创建目录，请使用：[`file.mkdirs()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#mkdirs%28%29)。
*   您可能需要使用构造函数[`PrintWriter(File file, String csn)`](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html#PrintWriter%28java.io.File,%20java.lang.String%29)并[`InputStreamReader(InputStream in, Charset cs)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStreamReader.html#InputStreamReader%28java.io.InputStream,%20java.nio.charset.Charset%29)确定字符集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T21:32:39.647

如果您要将字符串数组保存到文件中，那么您就是这样做的：

```
public void saveToFile(Iterable<String> stringArray, String pathName) {
    File f = new File(pathName);
    try {
        FileWriter fileWriter = new FileWriter(f);

        BufferedWriter bufferedWriter = new BufferedWriter(fileWriter);

        for (String s : stringArray) {
            bufferedWriter.write(s);
            bufferedWriter.newLine();
            bufferedWriter.flush();
        }

        bufferedWriter.close();
    } catch (IOException ex) {
        ex.printStackTrace();
    }
} 
```

此片段假定字符串数组不包含任何换行符，因为它用于分隔文件中的每个“行”。

```
public Iterable<String> loadFile(String pathName) {
    File f = new File(pathName);

    ArrayList<String> output = new ArrayList<String>();
    try {
        Scanner scanner = new Scanner(f);

        String str = scanner.nextLine();

        while (str != null) {
            output.add(str);
            scanner.nextLine();
        }

    } catch (FileNotFoundException ex) {
        ex.printStackTrace();
    }

    return output;
} 
```

如果您真的希望加载文件方法返回一个字符串数组，那么您可能需要调用该`output.toArray()`方法并将其类型转换为`String[]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-31T17:31:36.720

# 写入文件和读取文件

## 从文件中读取

如果要从文件中读取，则需要从包中导入`BufferedReader`类。`java.io.*`

现在`BufferedReader`将把 a 作为参数`FileReader`，而 a 又将要读取的文件的名称作为参数。让我用代码告诉你：

```
BufferedReader in = new BufferedReader(new FileReader("myFile.txt")); 
```

现在对象`in`现在可以对文件执行一些操作了`myFile.txt`。所以假设我想要第一行`myFile.txt`：我会使用该`readLine()`方法。

```
BufferedReader in = new BufferedReader(new FileReader("myFile.txt"));
String line1 = in.readLine(); 
```

现在`line1`包含文件的第一行`myfile.txt`。

假设您想将文件中的整行写入数组。您所要做的就是使用一个while循环和EOF作为哨兵：

```
ArrayList<String> fileLines = new ArrayList<String>();
BufferedReader in = new BufferedReader(new FileReader("myFile.txt"));
String currentLine = in.readLine();
while(currentLine != null){
    fileLines.add(currentLine);
    currentLine = in.readLine();
} 
```

这样做是读取文件的每一行并将其写入一个数组，然后可以用于进一步处理。

## 写入文件

这里`BufferedReader`我们使用 a`PrintWriter`而不是 a，我们使用 a 而不是`FileReader`a `FileWriter`。

```
PrintWriter out = new PrintWriter(new PrintWriter("output.txt")); 
```

现在如果`output.txt`没有事先制作，程序会自动制作一个新的。

那么让我们看看它是如何打印的：

```
String wiseSaying = "This is not a wise saying";
PrintWriter out = new PrintWriter(new PrintWriter("output.txt"));
out.println(wiseSaying); 
```

这会将 的值打印`wiseSaying`到文件`output.txt`中。

现在您必须在完成后关闭这两个文件。

```
in.close();
out.close(); 
```

如果您不关闭输出文件，您将不会在输出文件中看到任何内容。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T21:33:18.637

要写入文件，请使用 java.io.PrintWriter：

```
 File myFile= new File("db.txt");
    PrintWriter out = new PrintWriter(myFile);
    //Now use out.print() and out.println() just 
    //as you would use System.out.print() and System.out.println()
    out.print("test");
    out.println();
    out.close(); 
```

要从文件中读取，请使用 java.io.Scanner：

```
 File myFile = new File("db.txt");
    Scanner s = new Scanner(myFile);
    String n = s.next(); //gets you the next token;
    String n = s.nextLine(); //gets you the next line as a string;
    s.close(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T22:39:01.223

这里有两个问题：

1.  管理文件（如果不存在则创建，如果存在则追加）
2.  确保正确书写和阅读文本

* * *

1) 管理文件

[请注意，该示例假定 Java 6；如果使用 Java 7，您可以使用[try-with-resources 功能](http://docs.oracle.com/javase/7/docs/technotes/guides/language/try-with-resources.html)]

读取文件时，您必须检查文件是否存在。但是，在写入文件时，您可以使用 FileOutputStream 的构造函数，如果文件存在则追加到文件中。

* * *

2）正确读写

要获得强大的解决方案，您需要注意字符编码问题。引入了整个 Reader/Writer 框架来解决 Stream 实现（OutputStream/InputStream/etc.）的字符编码问题。

如果您总是要在默认字符编码相同的系统上运行代码，则可以使用简单的 FileWriter/FileReader 构造函数。但是，如果您要使用具有（可能）不同默认编码的不同操作系统，则需要指定要使用的编码。为此，您可以使用接受流和 Charset的[OutputStreamWriter 构造函数](http://docs.oracle.com/javase/6/docs/api/java/io/OutputStreamWriter.html#OutputStreamWriter%28java.io.OutputStream,%20java.nio.charset.Charset%29)或[InputStreamReader 构造函数。](http://docs.oracle.com/javase/6/docs/api/java/io/InputStreamReader.html#InputStreamReader%28java.io.InputStream,%20java.nio.charset.Charset%29)这允许您指定要使用的编码。

* * *

```
package org.foo;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.io.Reader;
import java.io.Writer;
import java.nio.charset.Charset;
import java.util.ArrayList;
import java.util.List;

public class FilesAndStrings {

    final static String[] STRINGS = {"One", "Two", "Three"};
    final static String FILE = "strings.txt";
    final static Charset UTF8_CHARSET = Charset.forName("UTF-8");

    public static void main(String[] args) throws IOException {
        // Single argument decides whether we write to the file or read from it
        if (args.length > 0) {
            String[] whatWeRead = readStrings();
            // Do something with whatWeRead
        }
        else {
            writeStrings();
        }
    }

    public static void writeStrings() throws FileNotFoundException {
        OutputStreamWriter out = null;
        BufferedWriter bw = null;
        PrintWriter pw = null;
        try {
            out = new OutputStreamWriter(new FileOutputStream(FILE, true), UTF8_CHARSET);
            bw = new BufferedWriter(out);
            pw = new PrintWriter(bw);
            for (String s : STRINGS) {
                pw.println(s);
            }
        }
        finally {
            tryToClose(pw);
            tryToClose(bw);
            tryToClose(out);
        }
    }

    public static String[] readStrings() throws IOException {
        InputStreamReader in = null;
        BufferedReader br = null;
        try {
            in = new InputStreamReader(new FileInputStream(FILE), UTF8_CHARSET);
            br = new BufferedReader(in);
            List<String> strings = new ArrayList<String>();
            String s = br.readLine();
            while (s != null) {
                strings.add(s);
                s = br.readLine();
            }
            return strings.toArray(new String[strings.size()]);
        }
        finally {
            tryToClose(br);
            tryToClose(in);
        }
    }

    public static void tryToClose(final Writer w) {
        try {
            w.close();
        }
        catch (IOException e) {
            // Log error
        }
    }

    public static void tryToClose(final Reader r) {
        try {
            r.close();
        }
        catch (IOException e) {
            // Log error
        }
    }
} 
```

* * *

# linux - awk shebang 不起作用

> ID：14046455
> 
> 赞同：4
> 
> 时间：2012-12-26T21:25:32.133
> 
> 标签：linux, bash, shell, unix, awk

我有一个简单的`awk`程序：

```
#!/usr/bin/awk -f
BEGIN {print "work already!"} 
```

如果我将其运行为：

```
awk -f panic 
```

在（osx）终端上它可以工作。但是如果我尝试将它作为脚本运行它会失败：

```
. panic
-bash: BEGIN: command not found 
```

我检查了 awk 使用的位置，`which awk`它确实位于`/usr/bin/awk`. 任何想法为什么它不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T21:30:25.493

Run it as `./panic`, not `. panic`，因为后者与 running 相同`source panic`，它不会做你想要的。看`man source`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T21:30:42.980

要将文件作为脚本运行，您必须键入：

```
./<script> 
```

**编辑**：

正如 William Pursell 所指出的，`.`不是 的别名`source`，而是恰恰相反。

> . 不是源的别名。. 是在当前 shell 中运行另一个脚本的 sh 标准命令。source 是一个源自 csh 的命令，并被许多 sh 克隆用作 . 的别名。如果要将 source 视为除可憎之外的任何东西，它是 . 的别名，而不是相反。

# php - 在 PHP 5.4 中对空 php 数组调用 foreach 是否安全？

> ID：14046458
> 
> 赞同：7
> 
> 时间：2012-12-26T21:25:47.817
> 
> 标签：php, arrays, php-5.4

我记得，在进行 foreach 之前，我总是必须检查 count($array)。从那时起，我总是做这个仔细检查，并想知道，现在用 php 5.4 有意义吗？

我已将 error_reporting 设置为 E_ALL 并执行以下脚本：

```
$x = [];

foreach($x as $y) {
    var_dump($y);
} 
```

并没有得到通知（我记得，以前，也许是 php5.3）我得到了通知。

现在在数组上使用 foreach 是否安全，那是空的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-26T21:27:51.780

只要它是一个数组，就不需要检查其中的项目数量。只需确保传递给它一个实际的可迭代对象：例如，不要传递随机对象或`NULL`.

但是，是的，`foreach([] as $nothing) {}`是安全的。

# python - 嵌入WebView的Gtk3窗口在取消最大化时会丢失最大化按钮

> ID：14046461
> 
> 赞同：2
> 
> 时间：2012-12-26T21:26:01.453
> 
> 标签：python, webkit, pygtk, gtk3

我在 PyGtk、Gtk3 中使用 WebKit.WebView 进行编码，遇到了一些奇怪的事情。

在从最大化状态取消最大化窗口时，窗口装饰器失去了最大化按钮并且窗口大小变得非常大。

我该如何解决这个问题？？？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:26:09.113

您必须将 WebView 放入[`GtkScrolledWindow`](http://developer.gnome.org/gtk3/3.6/GtkScrolledWindow.html)：

```
scrolled = Gtk.ScrolledWindow()
scrolled.add(webview)
window.add(scrolled) 
```

# android - usb_buffer_free 和 usb_buffer_alloc 的编译错误

> ID：14046465
> 
> 赞同：0
> 
> 时间：2012-12-26T21:26:54.317
> 
> 标签：android, linux, compiler-errors, kernel-module

嗨，我在将 usbtouchscreen.c 编译到内核驱动程序时出错。我也将 usbtouchsreen.c 文件附加到帖子中。

```
 CC      drivers/input/touchscreen/usbtouchscreen.o
drivers/input/touchscreen/usbtouchscreen.c: In function 'usbtouch_free_buffers':
drivers/input/touchscreen/usbtouchscreen.c:856: error: implicit declaration of function 'usb_buffer_free'
drivers/input/touchscreen/usbtouchscreen.c: In function 'usbtouch_probe':
drivers/input/touchscreen/usbtouchscreen.c:890: error: implicit declaration of function 'usb_buffer_alloc'
drivers/input/touchscreen/usbtouchscreen.c:891: warning: assignment makes pointer from integer without a cast
make[3]: *** [drivers/input/touchscreen/usbtouchscreen.o] Error 1
make[2]: *** [drivers/input/touchscreen] Error 2
make[1]: *** [drivers/input] Error 2
make: *** [drivers] Error 2 
```

我在这里包括了来源：http: [//pastebin.com/GTsic7Bg](http://pastebin.com/GTsic7Bg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:50:57.817

您的驱动程序是否很旧（或者可能是较旧的内核）？也许你想看看这个重命名：

[https://lkml.org/lkml/2010/4/12/132](https://lkml.org/lkml/2010/4/12/132)

它似乎至少在最新的内核中：

[http://lxr.linux.no/linux+](http://lxr.linux.no/linux+) */drivers/usb/core/usb.c#L698

事实上，它似乎已经进入 2.6.34 或附近。

# freebsd - freebsd9 jail 无法启动 jails

> ID：14046469
> 
> 赞同：1
> 
> 时间：2012-12-26T21:27:35.490
> 
> 标签：freebsd, jail

我正在尝试在 FreeBSD 9 中入狱

配置：

等/rc.conf：

```
#jails:
jail_enable="YES"
jail_interface="re0"    
jail_devfs_enable="YES"  
jail_procfs_enable="YES" 
jail_set_hostname_allow="YES"

jail_list="test"     
ifconfig_em0_alias0="inet 192.168.9.254 netmask 255.255.255.255"
jail_test_rootdir="/usr/home/jails/test.local"   
jail_test_hostname="test.local"    
jail_test_ip="192.168.9.254"   
jail_test_interface="re0"   
jail_test_devfs_enable="YES"   
jail_test_procfs_enable="YES" 

jail_test_exec_start="/bin/sh /etc/rc"
jail_test_exec_stop="/bin/sh /etc/rc.shutdown"
jail_test_flags="-l -U root" 
```

在此之后，我试图启动它：

```
mybsd#jail start 
```

或 mybsd#jail start test 但是两个命令都返回这样的错误：

```
jail: no -c or -m, so this must be an old-style command.
But it doesn't look like one. 
```

请告知如何在“新式”命令中启动监狱？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:26:40.530

```
jail_test_flags="-l -U root" 
```

似乎没有必要。

另外，为了方便使用监狱，我强烈推荐： http: [//people.virginia.edu/~ll2bf/docs/nix/freebsd_jail.html](http://people.virginia.edu/~ll2bf/docs/nix/freebsd_jail.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T02:00:19.470

我认为这不是全部问题，但是您之间存在不匹配：

```
ifconfig_em0_alias0= 
```

和

```
jail_test_interface="re0" 
```

监狱是 em0 还是 re0？

至于如何启动监狱，请尝试：

```
service jail start 
```

这应该启动所有的监狱。

另外，我建议尝试ezjail。它使事情更易于管理。

# c# - Task.WaitAll 保持循环

> ID：14046471
> 
> 赞同：3
> 
> 时间：2012-12-26T21:27:43.387
> 
> 标签：c#, async-await

我正在尝试这个异步代码只是为了测试 async 关键字：

```
public async Task<string> AsyncMethod()
{
    var link = "http://www.google.com";

    var webclient = new WebClient();
    var result = await webclient.DownloadStringTaskAsync(new Uri(link));

    return result;
}

public async Task<ActionResult> Index()
{
    var a = AsyncMethod();
    var b = AsyncMethod();

    Task.WaitAll(a, b);

    return View();
} 
```

但是当我调试它时，调试器会点击`Task.WaitAll`并且什么都不做（返回键永远不会执行）..如果我在两个'AsyncMethod'之前设置等待并删除`Task.WaitAll`它就可以了..那么我做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-26T22:30:37.960

因为您的方法看起来像 ASP.NET MVC 控制器操作，所以我假设您在 ASP.NET 上运行。

默认情况下，异步方法在它被挂起的同一上下文中恢复（即您调用的位置`await`）。在 ASP.NET 中，这意味着当前请求上下文。并且一次只能有一个线程处于特定上下文中。所以，发生的事情是执行的线程`Index()`在请求​​上下文中，被阻塞在`WaitAll()`. 另一方面， 的两个调用`AsyncMethod()`都试图在相同的上下文中恢复（在它们完成下载之后），但它们无法这样做，因为`Index()`仍在该上下文中执行。因此，这些方法处于[死锁](http://en.wikipedia.org/wiki/Deadlock)状态，因此没有任何反应。

（同样的死锁也会发生在 GUI 应用程序中，因为 GUI 上下文在这方面的行为相似。控制台应用程序没有这个问题，因为它们没有任何上下文。）

对此的修复是双重的：

1.  永远不要同步等待一个`async`方法。（可能唯一的例外是如果想从`Main()`控制台应用程序的方法中执行异步方法。）

    相反，异步等待它们。在您的情况下，这意味着使用`await Task.WhenAll(a, b)`.

2.  在您的“库”方法中使用`ConfigureAwait(false)`（即那些实际上不需要在请求上下文中执行的方法）。

使用 1 或 2 可以解决您的问题，但最好同时使用两者。

有关此问题的更多信息，请阅读 Stephen Cleary 的文章[*Don't Block on Async Code*](http://nitoprograms.blogspot.cz/2012/07/dont-block-on-async-code.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2022-01-07T10:09:53.970

确保您的`async`方法使用`CancellationToken`：

```
// the cancellation token from the request triggers 
// when the user cancels the HTTP request in the web browser
public async Task<IActionResult> Index(CancellationToken cancellationToken = default)
{
    // internal cancellation token for the timeout
    using var ctsTimeout = new CancellationTokenSource(TimeSpan.FromMilliSeconds(2000));

    // cancels when either the user cancels the request
    // or the timeout expires
    using var cts = CancellationToken.CreateLinkedTokenSource(cancellationToken, ctsTimeout.Token);

    // make sure your methods make use of the cancellation token internally
    // ie. check the token in loops and on I/O requests
    var a = AsyncMethod(cts.Token);
    var b = AsyncMethod(cts.Token);

    // optional: pass the token to the Task.WaitAll method
    // ensures the HTTP request completes
    // even when the internal tasks won't
    Task.WaitAll(new [] { a, b }, cts.Token);

    return View();
} 
```

如果调用的方法之一没有返回，那么超时将确保任务被取消并`Task.WaitAll`抛出一个`Exception`.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-26T21:53:07.440

它是这样工作的：

```
public Task<string> FakeAsyncMethod()
{
    var link = "http://google.com";
    var webclient = new WebClient();
    var t = new Task<string>(() => webclient.DownloadString(new Uri(link)));
    return t;
}

public async Task Index()
{
    var a = FakeAsyncMethod();
    var b = FakeAsyncMethod();
    a.Start();
    b.Start();
    Task.WaitAll(a, b);
}

async void AsyncCall()
{
    await Index();
} 
```

我不知道为什么它不适用于您的方法，但我怀疑这是因为用`async`关键字标记的方法返回的任务是在运行状态下创建的（更准确地说，是`Status`等于`WaitingForActivation`）。我会更多地研究它。

编辑：另一种方法是与关键字`Task.WhenAll`配对使用。`await`

```
public async Task Index()
{
    var a = AsyncMethod();
    var b = AsyncMethod();
    await Task.WhenAll(a, b);
} 
```

# vb.net - 有没有人用过jwplayer连续播放多个flv文件？使用 vb.net

> ID：14046476
> 
> 赞同：0
> 
> 时间：2012-12-26T21:28:04.573
> 
> 标签：vb.net, visual-studio-2010, flash, video-streaming, jwplayer

有没有人用过jwplayer连续播放多个flv文件？只是为了进一步澄清，我想知道的是 jwplayer 何时完成播放视频，以便我可以开始播放下一个视频。

到目前为止，我可以播放一部电影，但我不能一个接一个地播放

到目前为止的代码：

```
Imports System.IO
Imports System.Net.Sockets
Public Class Form1
    Friend WithEvents AxShockwaveFlash1 As New AxShockwaveFlashObjects.AxShockwaveFlash
    Dim PlayingFlash As Boolean = False
    Dim PlaylistHidden As Boolean = False
    Dim SettingUseJwPlayer3_16 As Boolean = True
    Sub OpenFLV(ByVal strFile As String, ByVal AxShockWaveFlash As AxShockwaveFlashObjects.AxShockwaveFlash)
        Dim strPath As String
        Dim PlayerPath As String = My.Computer.FileSystem.SpecialDirectories.Temp & "\player.swf"
        If File.Exists(PlayerPath) Then File.Delete(PlayerPath)
        File.WriteAllBytes(PlayerPath, My.Resources.player)
        strPath = "file:///" & PlayerPath & "?file="
        strPath = strPath & strFile
        strPath = Replace(strPath, "\", "/")
        With AxShockWaveFlash
            .Stop()
            .Visible = True
            .Menu = False
            .FlashVars = "&showstop=true&showdownload=false&height=" & AxShockWaveFlash.Height.ToString & "&width=" & AxShockWaveFlash.Width.ToString & "&showplay=true&autoscroll=false&autostart=true&overstretch=true&showicons=1&searchbar=false&controlbar=0"
            .LoadMovie(0, strPath)
            .Play()
        End With
        PlayingFlash = True
    End Sub
    Sub PlayJwPlayer3_16(ByVal Vid As String)
        If Not AxShockwaveFlash1.IsDisposed Then AxShockwaveFlash1.Dispose()
        AxShockwaveFlash1 = New AxShockwaveFlashObjects.AxShockwaveFlash
        AxShockwaveFlash1.BeginInit()
        AxShockwaveFlash1.Name = "AxShockwaveFlash1"
        AxShockwaveFlash1.EndInit()
        Me.Controls.Add(AxShockwaveFlash1)
        AxShockwaveFlash1.Visible = True
        AxShockwaveFlash1.Location = Panel1.Location
        AxShockwaveFlash1.BringToFront()
        PlayingFlash = True
        Panel1.Visible = False
        OpenFLV(Vid, AxShockwaveFlash1)
    End Sub
    Private Sub Play_Click(sender As Object, e As EventArgs) Handles Play.Click
        PlayJwPlayer3_16("https://dp-geography.wikispaces.com/file/view/World+Cup+in+South+Africa+-+%28IB+Geography+Study+Sports%2C+Leisure+%26amp%3B+Tourism+%29.flv")
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:48:18.633

对于重复播放列表，这将是这样的。

代替：

```
PlayJwPlayer3_16("https://dp-geography.wikispaces.com/file/view/World+Cup+in+South+Africa+-+%28IB+Geography+Study+Sports%2C+Leisure+%26amp%3B+Tourism+%29.flv") 
```

使用类似的东西：

```
PlayJwPlayer3_16("https://dp-geography.wikispaces.com/file/playlist.xml") 
```

这部分也是：

```
FlashVars = "&showstop=true&showdownload=false&height=" & AxShockWaveFlash.Height.ToString & "&width=" & AxShockWaveFlash.Width.ToString & "&showplay=true&autoscroll=false&autostart=true&overstretch=true&showicons=1&searchbar=false&controlbar=0" 
```

看起来像：

```
&showstop=true&showdownload=false&height=" & AxShockWaveFlash.Height.ToString & "&width=" & AxShockWaveFlash.Width.ToString & "&showplay=true&autoscroll=false&autostart=true&overstretch=true&showicons=1&searchbar=false&controlbar=0&repeat=list" 
```

以下是示例播放列表的样子：

```
<playlist version="1" xmlns="http://xspf.org/ns/0/">
    <title>Example XSPF playlist for the JW Player</title>
    <info>http://www.longtailvideo.com</info>
    <tracklist>

        <track>
            <title>Big Buck Bunny - FLV Video</title>
            <creator>the Peach Open Movie Project</creator>
            <info>http://www.bigbuckbunny.org/</info>
            <annotation>Big Buck Bunny is a short animated film by the Blender Institute, part of the Blender Foundation. Like the foundation's previous film Elephants Dream, the film is made using free and open source software.</annotation>
            <location>http://www.longtailvideo.com/jw/upload/bunny.flv</location>
        </track>

        <track>
            <title>Big Buck Bunny - MP3 Audio with thumb</title>
            <creator>the Peach Open Movie Project</creator>
            <info>http://www.bigbuckbunny.org/</info>
            <annotation>Big Buck Bunny is a short animated film by the Blender Institute, part of the Blender Foundation. Like the foundation's previous film Elephants Dream, the film is made using free and open source software.</annotation>
            <location>http://www.longtailvideo.com/jw/upload/bunny.mp3</location>
            <image>http://www.longtailvideo.com/jw/upload/bunny.jpg</image>
        </track>

        <track>
            <title>Big Buck Bunny - PNG Image with start</title>
            <creator>the Peach Open Movie Project</creator>
            <info>http://www.bigbuckbunny.org/</info>
            <annotation>Big Buck Bunny is a short animated film by the Blender Institute, part of the Blender Foundation. Like the foundation's previous film Elephants Dream, the film is made using free and open source software.</annotation>
            <location>http://www.longtailvideo.com/jw/upload/bunny.png</location>
            <meta rel="duration">20</meta>
            <meta rel="start">10</meta>
        </track>

        <track>
            <title>Big Buck Bunny - PNG Image with start</title>
            <creator>the Peach Open Movie Project</creator>
            <info>http://www.bigbuckbunny.org/</info>
            <annotation>Big Buck Bunny is a short animated film by the Blender Institute, part of the Blender Foundation. Like the foundation's previous film Elephants Dream, the film is made using free and open source software.</annotation>
            <location>http://www.longtailvideo.com/jw/upload/bunny.png</location>
            <meta rel="duration">20</meta>
            <meta rel="start">10</meta>
        </track>
    </tracklist>
</playlist> 
```

希望这可以帮助！

# c++ - C++ 错误 typedef 不能被重载

> ID：14046480
> 
> 赞同：-1
> 
> 时间：2012-12-26T21:28:27.997
> 
> 标签：c++, visual-studio-2005, windows-xp

我有这个 c++ 程序，由于某种原因它不会编译。我正在将 XP 与 VS 2005 一起使用。

```
#include "stdafx.h"
#include "MainThread.h"

HANDLE  hStopEvent = NULL;

int main(int argc, char *argv[])
{

    return 0;
}

error C2146: syntax error : missing ';' before identifier 'hStopEvent'
error C2377: 'HANDLE' : redefinition; typedef cannot be overloaded with any other symbol
see declaration of 'HANDLE'
error C4430: missing type specifier - int assumed. Note: C++ does not support default-int 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T21:40:57.137

该错误很可能是因为您在头文件中遇到了问题，这导致编译器将它在源文件中找到的第一件事视为标识符。

比如有一个未完成的结构或类定义：

```
struct blah {
    int a;
} // MISSING ';' 
```

如果看不到，建议贴出头文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T21:30:16.473

看起来你忘了

```
#include <Windows.h> 
```

# javascript - 循环遍历元素的数据属性

> ID：14046481
> 
> 赞同：12
> 
> 时间：2012-12-26T21:28:34.480
> 
> 标签：javascript

每，

[如何遍历 HTML 元素中的所有属性？](https://stackoverflow.com/questions/828311/how-to-iterate-through-all-attributes-in-an-html-element)

你得到一般的解决方案：

```
for (var i = 0; i < elem.attributes.length; i++) {
  var attrib = elem.attributes[i];
  if (attrib.specified) {
    alert(attrib.name + " = " + attrib.value);
  }
} 
```

我如何使这个通用解决方案更具体，只提醒 data- 属性的值。

我需要正则表达式 attrib.name 还是有更简单的方法？这是一些带有 2 个 data- 属性的示例 HTML：

```
<div id='universals' data-path='/zz/' data-load='1'></div> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2017-03-25T21:10:46.223

[`dataset`](http://caniuse.com/#search=dataset)如果下面不需要IE，支持非常好`version 11`

## 对数据集属性进行简单的“for-in”迭代：

```
var dataset = document.querySelector('div').dataset;

for( var d in dataset)
   console.log(d, dataset[d])
```

```
<div data-foo='1' data-bar='2'></div>
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-26T21:30:24.877

`.dataset`在许多现代浏览器中，我们可以通过对象上的成员访问这些特殊属性`Node`。不幸的是，这还不是一个公认的标准，因此我们看不到它在整个范围内都被采用。幸运的是，每个主要浏览器都有*部分*支持，因为这些属性仍然可以使用常见的方法（如`getAttribute`，以及循环遍历`.attributes`列表）访问。

下面的代码显示了第二种方法：

```
// Reference to our element
var element = document.getElementById("universals"), attr;

// Cycle over each attribute on the element
for (var i = 0; i < element.attributes.length; i++) {
    // Store reference to current attr
    attr = element.attributes[i];
    // If attribute nodeName starts with 'data-'
    if (/^data-/.test(attr.nodeName)) {
        // Log its name (minus the 'data-' part), and its value
        console.log(
            "Key: " + attr.nodeName.replace(/^data-/, ''),
            "Val: " + attr.nodeValue
        );
    }
} 
```

小提琴：http: [//jsfiddle.net/pGGqf/14/](http://jsfiddle.net/pGGqf/14/)

您应该会发现这种方法适用于所有主流浏览器，甚至可以追溯到 IE6。`.dataset`同样，在支持该成员的浏览器中，这不是必需的。该`.dataset`对象提供了一些额外的功能，因此您可以根据需要自由地对其进行特征检测：

```
if (element.dataset) {
    // Browser supports dataset member
} else {
    // Browser does not support dataset member
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-10-04T18:48:34.547

```
_dataToObject = function( dataset ) {
    return Object.keys( dataset ).reduce( function( object, key ) {
        object[ key ] = dataset[ key ]; 
        return object;
    }, {});
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T21:32:08.343

如果您不想使用正则表达式，您可以尝试

```
if attrib.name.startswith('data'):
    //do something 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-05-28T20:09:18.557

我在这里有一个可能对你有用的概念。

```
var el = document.getElementById("universals");
for(var i=0;i<el.attributes.length;i++){
    if((el.attributes[i].nodeName+"").indexOf("data-")>-1){
        var key=(el.attributes[i].nodeName+"").substring(5);
        var value=el.attributes[i].value;
        alert(key+": "+value);
    }
} 
```

这是我提出的基本想法，似乎效果很好。我还创建了一个函数，它使用上面的这个方法从 HTMLElements“数据”属性中返回一个 Name-Value-Pair 对象。

```
function data2Obj(id){
  var obj={};
  var el=document.getElementById(id);
  for(var i=0;i<el.attributes.length;i++){
    if((el.attributes[i].nodeName+"").indexOf("data-")>-1){
      var key=(el.attributes[i].nodeName+"").substring(5);
      var value=el.attributes[i].value;
      if(value.toLowerCase()=="true")value=true;
      else if(value.toLowerCase()=="false")value=false;
      else if((parseInt(value)+"")==value)value=parseInt(value);
      obj[key]=value;
    }
  }
  return obj;
} 
```

这可以很容易地修改为接受一个类或任何其他选择 HTMLElements 的方法。

如果您获取此函数的返回并遍历对象，您应该得到您想要的结果。

```
var datas = data2Obj("universal");
for(var k in datas){
  alert(k+": "+datas[k]);
} 
```

# gdata - 通过转置获得列标题时，如何遍历 Google 电子表格？

> ID：14046482
> 
> 赞同：1
> 
> 时间：2012-12-26T21:28:34.090
> 
> 标签：gdata

我在一个电子表格文档中有两个 Google 电子表格。第一个有一个名称列表。每行对应一个唯一的名称。

第二个文档显示第一个文档的转置。这意味着在文档一中逐行列出的名称现在显示为列标题。我使用以下等式实现了这一点：

```
=TRANSPOSE(FirstSheetName!A2:$A) 
```

在我的 python 代码中，我尝试从第二张表中读取行列表，如下所示：

```
spr_client = gdata.spreadsheet.service.SpreadsheetsService()

worksheets_feed = ... # obtain feed of worksheets
sheet_id = get_sheet_id('SecondSheetName') # method for retrieving the sheet id
sheet_feed = spr_client.GetListFeed(SPREADSHEET_KEY, sheet_id) 
```

但是，当我尝试遍历列表时，我看到了意想不到的结果。在自定义词典中，我看不到转置的标题，在通过谷歌驱动器 UI 查看工作表时可以看到这些标题。相反，我看到许多带有看起来像散列的随机键的条目。一些例子是：'_cssly'、'_auk5k'、'_a832w'。

```
sheet_feed.entry[0].custom.keys() # results don't correlate directly with column headings 
```

我的问题是，这些奇怪的键指的是什么？我怎样才能获得他们指向的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T19:51:39.163

我有一个非常相似的问题，使用 GetCellsFeed 的提示非常有帮助。

这是我的代码的样子：

```
import gdata.spreadsheet.service
import datetime
#http://www.payne.org/index.php/Reading_Google_Spreadsheets_in_Python

username = 'username@gmail.com'
passwd = "password"
spreadsheet_id = "xxxxxxx" #take it out of the url between key= and &

# Connect to Google
gd_client = gdata.spreadsheet.service.SpreadsheetsService()
gd_client.email = username
gd_client.password = passwd
gd_client.ProgrammaticLogin()

#Use this snippet to find the worksheet id given the name of the worksheet
feed = gd_client.GetWorksheetsFeed(spreadsheet_id)
for f in feed.entry:
    if f.title.text == "Worksheet Name":
        worksheet_id = f.id.text.rsplit('/',1)[1]
        print f.title.text, worksheet_id
        break

The interesting bit of code!
cells = gd_client.GetCellsFeed(spreadsheet_id,worksheet_id).entry

d = dict()
keys = []
for cell in cells:
    if cell.cell.row == '1':
        keys.append(cell.cell.text)
        d[cell.cell.text] = []
    else:
        k = keys[int(cell.cell.col)-1]
        v = cell.cell.text
        if k == "Date":
            d[k].append(datetime.datetime.strptime(v, '%m/%d/%Y'))
        else:
            d[k].append(int(v)) 
```

这将根据第一行和（在这种情况下）整数和日期列表创建一个带有键的字典。如果需要字符串，您也可以使用 float(v) 来表示浮点数，或者只使用 v 。

# rest - 将时间布局元素链接到 NDFD REST API 中的参数

> ID：14046485
> 
> 赞同：0
> 
> 时间：2012-12-26T21:29:07.553
> 
> 标签：rest, weather, ndfd

我刚开始研究 NDFD REST 服务以获取天气数据。简而言之，我不知道如何将特定参数链接到返回 XML 中的时间布局元素。

示例调用：[http ://graphical.weather.gov/xml/sample_products/browser_interface/ndfdXMLclient.php?lat=38.99&lon=-77.01&product=time-series&temp=temp&maxt=maxt&mint=mint](http://graphical.weather.gov/xml/sample_products/browser_interface/ndfdXMLclient.php?lat=38.99&lon=-77.01&product=time-series&temp=temp&maxt=maxt&mint=mint)

我正在使用此调用查找最高温度（maxt）、最低温度（mint）和 3 小时温度（temp）。

我得到的 XML 是（为了相关性而剪掉的）：

```
<?xml version="1.0"?>
<dwml version="1.0" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://graphical.weather.gov/xml/DWMLgen/schema/DWML.xsd">
  <head>
    <product srsName="WGS 1984" concise-name="time-series" operational-mode="official">
      <title>NOAA's National Weather Service Forecast Data</title>
      <field>meteorological</field>
      <category>forecast</category>
      <creation-date refresh-frequency="PT1H">2012-12-26T20:03:47Z</creation-date>
    </product>
    <source>
      <more-information>http://graphical.weather.gov/xml/</more-information>
      <production-center>Meteorological Development Laboratory<sub-center>Product Generation Branch</sub-center></production-center>
      <disclaimer>http://www.nws.noaa.gov/disclaimer.html</disclaimer>
      <credit>http://www.weather.gov/</credit>
      <credit-logo>http://www.weather.gov/images/xml_logo.gif</credit-logo>
      <feedback>http://www.weather.gov/feedback.php</feedback>
    </source>
  </head>
  <data>
    <location>
      <location-key>point1</location-key>
      <point latitude="38.99" longitude="-77.01"/>
    </location>
    <moreWeatherInformation applicable-location="point1">http://forecast.weather.gov/MapClick.php?textField1=38.99&amp;textField2=-77.01</moreWeatherInformation>
    <time-layout time-coordinate="local" summarization="none">
      <layout-key>k-p24h-n7-1</layout-key>
      <start-valid-time>2012-12-26T07:00:00-05:00</start-valid-time>
      <end-valid-time>2012-12-26T19:00:00-05:00</end-valid-time>
    </time-layout>
    <time-layout time-coordinate="local" summarization="none">
      <layout-key>k-p24h-n6-2</layout-key>
      <start-valid-time>2012-12-26T19:00:00-05:00</start-valid-time>
      <end-valid-time>2012-12-27T08:00:00-05:00</end-valid-time>
    </time-layout>
    <time-layout time-coordinate="local" summarization="none">
      <layout-key>k-p3h-n34-3</layout-key>
      <start-valid-time>2012-12-26T16:00:00-05:00</start-valid-time>
      <start-valid-time>2012-12-26T19:00:00-05:00</start-valid-time>
      <start-valid-time>2012-12-26T22:00:00-05:00</start-valid-time>
      <start-valid-time>2012-12-27T01:00:00-05:00</start-valid-time>
    </time-layout>
    <parameters applicable-location="point1">
      <temperature type="maximum" units="Fahrenheit" time-layout="k-p24h-n7-1">
        <name>Daily Maximum Temperature</name>
        <value>34</value>
      </temperature>
      <temperature type="minimum" units="Fahrenheit" time-layout="k-p24h-n6-2">
        <name>Daily Minimum Temperature</name>
        <value>34</value>
      </temperature>
      <temperature type="hourly" units="Fahrenheit" time-layout="k-p3h-n34-3">
        <name>Temperature</name>
        <value>33</value>
        <value>34</value>
        <value>34</value>
        <value>34</value>
      </temperature>
    </parameters>
  </data>
</dwml> 
```

现在，我想将`time-layout`元素和元素的子元素链接`parameters`到 maxt、mint 和 temp，以便我可以相应地填充我的模型对象。

有没有人做过类似的事情？

现在，我认为我可以发出 53 个服务调用（每个参数一个，如 maxt、mint、temp 等），但对于多个纬度/经度对（我有很多），这不会很好地扩展。

我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-08T14:14:28.817

每个元素都包含一个 layout-key 元素，它提供了用于表示该时间布局的名称。元素的每个子元素都有一个时间布局属性，该属性的值告诉您它与哪个时间布局对齐。

[http://www.nws.noaa.gov/mdl/XML/Design/MDL_XML_Design.pdf_orig](http://www.nws.noaa.gov/mdl/XML/Design/MDL_XML_Design.pdf_orig)中的第 5.2 节值得一读。这是一个示例名称：“k-p3h-n28-1”和 5.2 告诉我们“k”代表“key”，“p3h”代表 3 小时的时间段（至少最初是），n28 表示有 28 个values 提供，最后 -1 是这样，这将是一个唯一标签。通常您不想解析这些标签，只需使用 time-layout 元素中包含的实际时间列表，因为间隔可能会随着您的变化而变化通过数据移动。

相同的方案被用于将位置与数据相关联。这些元素有一个 location-key 子元素，它定义了一个像“point1”这样的标签，然后元素有一个适用的位置属性来将它们与它们的位置联系起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T13:51:29.693

我认为有两种方法可以解决这个问题：1）具有适合 NDFD 数据结果的自定义类的反序列化器。

[您可以在https://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.110%29.aspx](https://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.110%29.aspx)尝试 XML 架构定义工具 (Xsd.exe)

2）使用LINQ解析XML文档如（c#）

```
System.Xml.Linq.XDocument xmlDoc = System.Xml.Linq.XDocument.Parse(xmlData);

var recordTime = from timevalue in xmlDoc.Descendants("time-layout").Elements("start-valid-time")
                         where timevalue.Parent.Element("layout-key").Value.Contains("k-p3h")
                         select (DateTime)timevalue;

var maxTemperature = from tempvalue in xmlDoc.Descendants("temperature").Elements("value")
                             where tempvalue.Parent.Attribute("type").Value == "maximum"
                          select (double)tempvalue;

var minTemperature = from tempvalue in xmlDoc.Descendants("temperature").Elements("value")
                             where tempvalue.Parent.Attribute("type").Value == "minimum"
                          select (double)tempvalue;

var temperature = from tempvalue in xmlDoc.Descendants("temperature").Elements("value")
                       where tempvalue.Parent.Attribute("type").Value == "hourly"
                       select (double)tempvalue;

var humidity = from humvalue in xmlDoc.Descendants("humidity").Elements("value")
                       where humvalue.Parent.Attribute("type").Value == "relative"
                       select (double)humvalue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:33:47.043

规范在这里：[http](http://www.nws.noaa.gov/mdl/XML/Design/MDL_XML_Design.pdf) ://www.nws.noaa.gov/mdl/XML/Design/MDL_XML_Design.pdf您可能已经看到了。一般来说，事情应该排队。例如，在您的代码段中，您有 4 个 start-valid-time 元素，它们应该对应于 4 个温度。我注意到，特别是当它接近时间间隔更改时，数据可能会在不同时间更新，并且某些元素可能不一致或具有值 xsi:nil="true"。

# spring-batch - Spring批处理：SkipListener已实现-但onSkipInWrite（）方法为整个批处理抛出相同的消息

> ID：14046487
> 
> 赞同：1
> 
> 时间：2012-12-26T21:29:41.250
> 
> 标签：spring-batch

我正在研究 Spring Batch：我正在从 FlatFile 读取数据并使用 Jdbc 连接将从文件读取的记录保存到数据库。这样做时，我配置了一个侦听器，如果在读取或写入数据时产生错误，将调用该侦听器。我正在将 10 条记录上传到数据库中，其中 2 条记录有错误。它根据我们的需要正确插入了 8 条记录，但是 onSkipInWrite() 方法并没有给出实际跳过的 2 条记录，而是打印出了与它相同的异常的整批 10 条记录。我应该如何过滤掉哪些记录实际上没有被跳过，该方法说您将获得在整个批次中被跳过的确切记录。请帮助我......等待友好的回应......谢谢

在 Audit.xml 中配置的示例示例：

```
<step id="step1" >
        <tasklet allow-start-if-complete="true">
            <chunk reader="Reader" writer="Writer" commit-interval="10" skip-limit="10">
                <skippable-exception-classes>
                    <include class="java.lang.Exception" />
                </skippable-exception-classes>
            </chunk>
            <listeners>
                <listener ref="Listener" />
            </listeners>
        </tasklet>
    </step> 
```

我写了一个Listener类，下面是示例：

```
public class Listener implements SkipListener {

    @Override
    public void onSkipInProcess(Object item, Throwable throw) {
        System.out.print ("Error in the record :" + item.gettoString() + " Type of Error : " + throw.getClass());

    }

    @Override
    public void onSkipInRead(Throwable throw) {
    }

    @Override
    public void onSkipInWrite(Object item, Throwable throw) {

     System.out.print ("Error in the record :" + item.gettoString() + " Type of Error : " + throw.getClass());

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T15:22:23.360

代替`skip-limit="10"`

利用

```
 <batch:skip-policy>
                    <bean class="org.springframework.batch.core.step.skip.AlwaysSkipItemSkipPolicy" scope="step"/>
                </batch:skip-policy> 
```

# javascript - 是否可以从外部 JavaScript 内部更改全局变量？

> ID：14046490
> 
> 赞同：1
> 
> 时间：2012-12-26T21:30:14.663
> 
> 标签：javascript, html, global-variables, external

我有几个想要在多个不同页面上重用的 JavaScript 函数，因此我为这些函数创建了一个外部 .js 文件。我想知道是否可以在不更改实际 .js 文件的情况下更改该 javascript 的全局变量。这是我的意思的一个例子：

假设我的外部 JavaScript 有这个标签：

`<script src="myscripts.js"></script>`

`<script>`我可以像这样为标签中的脚本定义全局变量吗？

```
<script src="myscripts.js">
    sampleglobalvariable = "somevalue";
    sampleglobalvariable2 = "somevalue2";
</script> 
```

还是像这样？

```
<script src="myscripts.js"></script>
<script>
    sampleglobalvariable = "somevalue";
    sampleglobalvariable2 = "somevalue2";
</script> 
```

还是我必须在实际`myscripts.js`文件中定义它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:39:04.357

您应该认真考虑更改脚本以允许创建可用于调用库函数的上下文对象；这将消除您对全局变量的依赖（应该避免），同时还允许*在同一页面上使用**两个*不同的上下文。例如，如果你现在有这个：

 *```
var sampleGlobalVariable = 'default1';
var sampleGlobalVariable2 = 'default2';

function foo() {
    alert(sampleGlobalVariable);
} 
```

考虑这样做：

```
// Rename this function to something specific to your script, to
// prevent possible name clashes.
function createScriptContext(sampleGlobalVariable, sampleGlobalVariable2) {
    if (sampleGlobalVariable === undefined) {
        sampleGlobalVariable = 'default1';
    }
    if (sampleGlobalVariable2 === undefined) {
        sampleGlobalVariable2 = 'default2';
    }

    var that = {};

    that.foo = function () {
        alert(sampleGlobalVariable);
    };
} 
```

然后你可以在你的页面中使用这个函数来创建将被其他脚本使用的上下文：

```
<script type="text/javascript">
    var pageGlobalContext = createScriptContext('value1', 'value2');

    // ... later ...

    pageGlobalContext.foo();

    // ... or use default values ...

    var defaultPageGlobalContext = createScriptContext(undefined, undefined);
</script> 
```

更健壮的解决方案是将对象作为上下文创建函数的参数，并根据其属性初始化变量；这将使您的设置按名称而不是按位置绑定，并使它们在语法上都是可选的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:35:53.773

您不能使用 src 并拥有内容。

```
<script>
    sampleglobalvariable = "somevalue";
    sampleglobalvariable2 = "somevalue2";
</script>
<script src="myscripts.js"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T21:38:27.037

你可以这样做：

```
<script>
    var sampleglobalvariable = "somevalue";
    var sampleglobalvariable2 = "somevalue2";
</script>

<script src="myscripts.js"></script> 
```

`myscripts.js`将可以访问之前定义的全局变量。

或者，您可以`myscripts.js`转换为服务器端脚本（例如用 PHP 编写）。这会让你传递这样的参数：

```
<script src="myscripts.js?foo=1&bar=2"></script> 
```

然后，服务器端脚本必须读取`$_GET['foo']`并 `$_GET['bar']`回显自定义生成的 javascript：

```
echo 'var sampleglobalvariable = ' . json_encode($_GET['foo']) . ';';
echo 'var sampleglobalvariable2 = ' . json_encode($_GET['bar']) . ';';
echo 'alert(sampleglobalvariable);  // rest of the script, etc'; 
```*

# ruby - Ruby 自执行

> ID：14046498
> 
> 赞同：-3
> 
> 时间：2012-12-26T21:31:07.233
> 
> 标签：ruby

有没有可能让这个更短？

```
string = string.split 
```

Ruby 有一些`!`函数可以做到这一点，但是这个呢？

我想要像string.split这样的东西！但不要添加额外的 String 类方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T21:47:20.490

您必须为您的`self`类编写一个方法，该方法或多或少与您的代码行所做的完全相同。

```
def split_keywords!(sep = ' ')
    @keywords = @keywords.split(sep)
end 
```

这样做的问题是您正在更改什么`keywords`（从 a`String`到 an `Array`），因此您必须编写与之交互的所有其他方法，`keywords`以便它们无论是 a`String`还是 an都可以工作`Array`。

没有`split!`方法的原因`String`是因为它将涉及在中间方法中将变量从一个类更改为另一个类。

```
# This will raise a SyntaxError
class String
    def split!(sep = ' ')
        self = self.split(sep) # Causes self to become an Array mid-method
    end
end 
```

因此，要回答您的问题，不，您想要做的事情没有捷径可走，但我建议您重新考虑您的方法，除非`keywords`能够像 a`String`和 an一样`Array`无后顾之忧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T22:02:59.560

只是 using`"key words".split`会给你`["key", "words"]` 在一个类中使用的数组，就像你自己建议的那样

```
keywords = "key words"

class String
  def -@
    self.split
  end
end
p -keywords #=> ["key", "words"] 
```

顺便说一句，您知道`"[%s]" % keywords`会产生相同的结果吗？

# jquery-mobile - 如何将标签文本添加到 JQuery 移动滑块

> ID：14046499
> 
> 赞同：1
> 
> 时间：2012-12-26T21:31:06.927
> 
> 标签：jquery-mobile

我想在 Jquery mobile 上的滑块输入中添加低、中、高、最高等标签。或者是否有另一个具有此功能的滑块？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:35:53.367

我认为这里的示例可以帮助您：

[http://jsfiddle.net/cUNyr/1/](http://jsfiddle.net/cUNyr/1/)

```
$.fn.extend({
    sliderLabels: function(left,right) {
        var $this = $(this); 
        var $sliderdiv= $this.next("div.ui-slider[role='application']");
        $sliderdiv
        .css({'font-weight': 'normal'}); 
        $sliderdiv
        .prepend('<span class="ui-slider-inner-label"  style="position: absolute; left:0px; top:20px;">'+left+ '</span>')
        .append('<span class="ui-slider-inner-label" style="position: absolute; right:0px; top:20px;">'+right+ '</span>');         
    }
});

$('#slider').sliderLabels('LEFT','RIGHT');​ 
```

# unity3d - unity3d TCP客户端每秒或每帧检查一次

> ID：14046500
> 
> 赞同：1
> 
> 时间：2012-12-26T21:31:15.550
> 
> 标签：unity3d, tcpclient

什么是更好的或在所有游戏中常用的我的意思是检查 streamReader 每帧是否有可用数据，或者对于 FPS 等游戏每秒或更长时间检查一次？

喜欢还是不喜欢？

```
void Update() {
if(connected) {
try {
    if(theStream.DataAvailable) {
   String data = sr.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:35:26.693

我认为您最好确保不依赖于框架，而是根据计算的 ping 进行更新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:36:13.460

处理网络连接的实际应用程序通常会持续检查它们。他们要么通过阻塞连接上的线程来做到这一点，要么在无工作可做时同时阻塞连接和计时器。

# php - 检查 xdebug 是否正常工作

> ID：14046501
> 
> 赞同：96
> 
> 时间：2012-12-26T21:31:16.303
> 
> 标签：php, xdebug

如果不安装文本编辑器或 IDE，是否可以测试 xdebug 是否正常工作，即是否可以调试 php 代码？

xdebug 出现在 phpinfo() 中的唯一部分如下：

> 其他.ini文件解析/etc/php5/apache2/conf.d/mysql.ini, /etc/php5/apache2/conf.d/mysqli.ini, /etc/php5/apache2/conf.d/pdo.ini, /etc/php5/apache2/conf.d/pdo_mysql.ini, /etc/php5/apache2/conf.d/xdebug.ini

在其他任何地方的 phpinfo() 中都没有提到它。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-12-26T21:41:30.260

如果不实际进行一些调试，我想您无法*确定*调试器是否正常工作。

但是您可以非常确定——我想应该假设如果 xDebug 的某些方面正常工作，那么它就会正常工作。

鉴于此，您可以通过尝试以下操作来确认 xDebug 已安装并到位：

1) `phpinfo()`-- 这将显示所有已加载的扩展，包括 xDebug。如果它在那里，那么可以肯定它正在工作。

2）如果这对您来说还不够好，您可以尝试使用该`var_dump()`功能。xDebug 修改 的输出`var_dump()`以包含附加信息。如果这是适当的，那么 xDebug 正在工作。

3) xDebug 修改 PHP 的错误输出。如果您的程序在使用 xDebug 时崩溃，您将获得比标准 PHP 崩溃输出更多的失败信息。

4) xDebug 还为 PHP 添加了一些辅助函数。您可以尝试其中的任何一个，看看它是否有效。例如，该函数`xdebug_get_code_coverage()`应该存在并返回一个数组。如果是，则安装 xDebug。如果不是，则不是。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2014-03-27T20:10:45.377

跑

```
php -m -c 
```

在您的终端中，然后查找`[Zend Modules]`. 如果已加载，它应该在某个地方！

**注意**

如果您使用的是 Ubuntu，它可能不会显示在此处，因为您需要将`xdebug`设置添加`/etc/php5/apache2/php.ini`到`/etc/php5/cli/php.ini`.

## 我的 Xdebug 设置：

### 对于 Xdebug 3 ^(（及更高版本）)

```
[xdebug]
zend_extension = /usr/lib/php5/20121212/xdebug.so
xdebug.mode=debug
xdebug.client_host=localhost
;# The default is 9003
xdebug.client_port=9000 
```

### 对于 Xdebug 2.9 ^(（或更低版本）)

```
[xdebug]
zend_extension = /usr/lib/php5/20121212/xdebug.so
xdebug.remote_enable=on
xdebug.remote_handler=dbgp
xdebug.remote_mode=req
xdebug.remote_host=localhost
xdebug.remote_port=9000 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2015-10-01T22:59:50.997

尝试如下，将返回`xDebug does exists.`或`xDebug doesn't exists.`：

```
<?=sprintf('xDebug does%s exists.', extension_loaded('xdebug') ? '' : "n't"); 
```

在 CLI 上：

```
php -r "printf('xDebug does%s exists.' . PHP_EOL, 
extension_loaded('xdebug') ? '' : 'n\'t');" 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2015-03-08T12:40:58.150

经过近 24 小时的苦苦运行，试图让 xdebug 与 Netbeans 8.0.2 一起工作，我找到了一个解决方案，我希望它适用于所有 Ubuntu 和 Ubuntu 相关堆栈。

**问题一：PHP和xdebug版本必须兼容**

有时，如果您正在运行 Linux 设置并 apt-get 安装 xdebug，它不会为您提供正确的 xdebug 版本。就我而言，我有最新的 php 版本，但有一个旧的 xdebug 版本。那一定是由于我当前的 Xubuntu 版本。软件版本取决于存储库，而存储库又取决于您正在运行的操作系统版本。

解决方案：PHP 有一个简洁的扩展管理器，称为 PECL。按照[此处](http://www.mkfoster.com/2009/01/04/how-to-install-a-php-pecl-extensionmodule-on-ubuntu/)给出的说明启动并运行它。首先，正如评论中的一位成员所指出的，您应该安装 PHP 的开发人员包以使 PECL 工作：

```
sudo apt-get install php5-dev 
```

然后，使用 PECL，您将能够安装最新的稳定版本的 xdebug：

```
sudo pecl install php5-xdebug 
```

完成后，将安装正确版本的 xdebug，但尚未准备好使用。之后，您需要启用它。我已经看到了很多关于如何做到这一点的建议，但事实是 PHP 需要为客户端和服务器启用一些模块，在本例中为 Apache。似乎这里的最佳实践是使用启用模块的内置方法，称为 php5enmod。用法在[此处](http://www.lornajane.net/posts/2012/managing-php-5-4-extensions-on-ubuntu)描述。

**问题二：正确启用模块**

首先，您需要进入 /etc/php5 文件夹。在那里，您会找到 3 个文件夹，apache2、cli 和 mods_available。mods_available 文件夹包含带有激活给定模块的说明的文本文件。命名约定是 [module].ini。看看其中的几个，看看它们是如何设置的。

现在您必须在 mods_available 文件夹中创建您的 ini 文件。创建一个名为 xdebug.ini 的文件，并在该文件中粘贴以下内容：

```
[xdebug]
zend_extension = /usr/lib/php5/20121212/xdebug.so
xdebug.remote_enable=on
xdebug.remote_handler=dbgp
xdebug.remote_mode=req
xdebug.remote_host=localhost
xdebug.remote_port=9000 
```

确保存在指令**[xdebug]**，与上面的示例完全相同。模块必须工作。事实上，只需复制并粘贴整个代码，这样你就会成为一个更快乐的人。:D

注意：zend_extension 路径非常重要。在本例中，它指向 PHP 引擎的当前版本，但您应该首先转到 /usr/lib/php5 并确保以数字命名的文件夹是正确的。将名称调整为您在那里看到的任何内容，当您使用它时，检查文件夹内部以确保 xdebug.so 确实存在。它应该是，如果你做的一切正确。

现在，随着您的 xdebug.ini 创建，是时候启用该模块了。为此，请打开控制台并键入：

```
php5enmod xdebug 
```

如果一切顺利，PHP 会创建两个指向该文件的链接，一个在 /etc/php5/apache2/conf.d 中，另一个在 /etc/php5/cli/conf.d 中

重新启动 Apache 服务器并在控制台上输入：

```
php -v 
```

你应该得到这样的东西：

```
PHP 5.5.9-1ubuntu4.6 (cli) (built: Feb 13 2015 19:17:11) 
Copyright (c) 1997-2014 The PHP Group
Zend Engine v2.5.0, Copyright (c) 1998-2014 Zend Technologies
with Zend OPcache v7.0.3, Copyright (c) 1999-2014, by Zend Technologies
with Xdebug v2.3.1, Copyright (c) 2002-2015, by Derick Rethans 
```

这意味着 PHP 客户端确实读取了您的 xdebug.ini 文件并加载了 xdebug.so 模块。到现在为止还挺好。

现在在您的 Web 服务器上的某处创建一个 phpinfo 脚本，然后运行它。如果一切顺利，这就是你应该看到的：

![在此处输入图像描述](../Images/00de79ef705e2884064f13dd8bfab34d.png)

如果你看到这个，Apache 也加载了这个模块，你可能已经准备好了。现在让我们看看 Netbeans 是否能正确调试。创建一个非常简单的脚本，添加一些变量，给它们赋值，并在它们上设置一个断点。现在点击 CTRL+F5，点击调试器面板上的“step in”，看看你是否得到这样的结果：

![xdebug 在行动](../Images/988908ec4b46c8357ad469983e4e894b.png)

请记住在工具/选项/php 下检查 Netbeans 配置以进行调试。它应该看起来像这样：

![在 Netbeans 上调试配置](../Images/aa2353fdd5f5441f946107f7661ea600.png)

我希望这能对这个相当模糊、令人困惑的问题有所了解。

最良好的祝愿！

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2018-11-08T13:49:11.030

只是为了扩展[KsaR](https://stackoverflow.com/users/5304702/ksar)的答案并提供从命令行检查 xdebug 的可能性：

> ```
> php -r "echo (extension_loaded('xdebug') ? '' : 'non '), 'exists';" 
> ```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2020-12-16T20:41:57.603

从 xdebug 3 开始，您可以使用以下命令行：

```
php -r "xdebug_info();" 
```

它将显示有关您的 xdebug 安装的有用信息。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-06-30T09:43:07.597

你可以运行这个小`php`代码

```
<?php
phpinfo();
?> 
```

复制整个输出页面，将其粘贴到此[链接](https://xdebug.org/wizard.php)中。然后分析。它将显示是否安装了 Xdebug。它将给出完成安装的说明。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-05-17T17:47:32.327

如果您使用的是**Eclipse**，请注意在 XDebug 模式下运行时，魔术常量 __FILE__ 将始终被计算为：

```
xdebug://debug-eval 
```

因此，如果您的会话在 XDebug 下，则以下检查将返回**true ：**

```
$is_xdebug = false !== strpos(__FILE__,'xdebug'); // true while on XDebug 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-02-13T06:10:57.693

在您的问题中，您提到您的 phpinfo 说明 apache 正在 /etc/php5/apache2/conf.d/xdebug.ini 中加载 xdebug 的配置在许多在线说明中，您可能会注意到他们要求您将 xdebug 配置放入 php .ini（这就是我所做的）但是，如果配置设置为 /etc/php5/apache2/conf.d/xdebug.ini，那么您应该从 /etc/php5/apache2 中删除 [XDebug] 配置设置/php.ini 并将其放入 /etc/php5/apache2/conf.d/xdebug.ini INSTEAD。一旦我从 /etc/php5/apache2/php.ini 中删除并放入 /etc/php5/apache2/conf.d/xdebug.ini ，然后重新启动 apache，它就起作用了！

因此，在您的 /etc/php5/apache2/conf.d/xdebug.ini 中，输入以下内容：

```
[XDebug]
zend_extension="/usr/lib/php5/20121212+lfs/xdebug.so"
xdebug.remote_enable=1
xdebug.remote_port="9000"
xdebug.profiler_enable=1
xdebug.profiler_output_dir="/home/paul/tmp"

xdebug.remote_host="localhost"
xdebug.remote_handler="dbgp";
xdebug.idekey="phpstorm_xdebug" 
```

然后从 /etc/php5/apache2/php.ini 中删除它，如果你也把它放在那里。

然后做：

sudo 服务 apache2 重启

然后它应该工作！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-07-21T09:17:02.683

您可以在终端中使用此命令 php -v 检查是否安装了 xdebug

[![在此处输入图像描述](../Images/be37fb43bbb0024fb58d617fe9b4f75c.png)](https://i.stack.imgur.com/Lc5LL.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-06-11T00:57:46.867

请注意，在[xDebug 3](https://xdebug.org/download#releases)中，配置选项[已更改](https://xdebug.org/docs/upgrade_guide)。PhpStorm 手册：[配置 xDebug](https://www.jetbrains.com/help/phpstorm/2021.1/configuring-xdebug.html)也很好地解释了它（它带有一个验证器脚本，正在上传）。在弄乱了无法配置的 PECL 版本之后，答案是：

```
su
dnf remove php-xdebug
dnf install php-devel

cd /usr/src
wget https://xdebug.org/files/xdebug-3.0.4.tgz
tar -xvzf xdebug-3.0.4.tgz
cd xdebug-3.0.4/
phpize
./configure --enable-xdebug
make
make install 
```

xDebug 3 适用于这样的配置（注意该`[xdebug]`部分）：

```
; Enable xdebug extension module
zend_extension=xdebug.so

[xdebug]
xdebug.mode=debug
xdebug.client_host=localhost
xdebug.client_port=9003 
```

这进入这两个文件：

```
nano /etc/php-cli.d/xdebug.ini
nano /etc/php.d/xdebug.ini 
```

然后可以允许网络连接并重新加载 INI：

```
setsebool -P httpd_can_network_connect 1
systemctl restart php-fpm.service 
```

最后：

```
php -r "xdebug_info();" 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-10-28T09:51:08.397

我意识到这个问题有点老了，但是 xdebug 3 出来了，很多事情都发生了变化。

```
php.exe -r "xdebug_info();" 
```

仍然有效，但 php.ini 中的配置不同：

对于[xampp](https://www.apachefriends.org)安装（php 8.0.12），我有：

```
[xdebug]
zend_extension="C:\xampp\php\zend_ext\php_xdebug-3.1.1-8.0-vs16-x86_64.dll"
xdebug.output_dir="c:/xampp/xdebug"
xdebug.mode=debug
xdebug.log=c:/xampp/xdebug/xdebug.log
xdebug.log_level=7
xdebug.profiler_output_name=%p.%t.cgrind 
```

它还将编写一个`xdebug.log` 包含以下内容的文件：

```
[8028] Log opened at 2021-10-28 09:42:33.878279
[8028] [Config] INFO: Trigger value for 'XDEBUG_TRIGGER' not found, falling back to 'XDEBUG_SESSION'
[8028] [Config] INFO: No shared secret: Activating
[8028] [Step Debug] INFO: Connecting to configured address/port: localhost:9003.
[8028] [Step Debug] ERR: Time-out connecting to debugging client, waited: 200 ms. Tried: localhost:9003 (through xdebug.client_host/xdebug.client_port) :-(
[8028] Log closed at 2021-10-28 09:42:34.298475 
```

对于[wampserver](https://wampserver.aviatechno.net/?lang=english)，xdebug 包含在内并且开箱即用。这使它更容易使用。

# java - 如何使子类（单表）中的标量字段的列可以为空？

> ID：14046508
> 
> 赞同：1
> 
> 时间：2012-12-26T21:31:40.433
> 
> 标签：java, hibernate

我有一个带有单表映射的层次结构。我使用 HSQLDB 进行自动生成 DDL 功能的测试。层次结构中的子类之一具有标量长字段。

我无法保留其他子类的对象，因为第一类的 DB 行字段为空。

Hibernate 生成具有非空约束的表列。

如果将字段类型更改为 Long，问题就会消失。但是 @Nullable 注释没有帮助。

我不想使用 Long 类型而不是 long，因为这会导致经常装箱/拆箱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:39:29.890

我懂了。

只需在可嵌入类中的字段上添加 @Column(nullable = true) 即可。

```
@Embeddable
class Delay {
   @Colum(nullable = true)
   private long delay;

} 
```

# objective-c - iOS：推送通知作为 Web 服务轮询的“触发器”？

> ID：14046509
> 
> 赞同：8
> 
> 时间：2012-12-26T21:31:48.123
> 
> 标签：objective-c, ios, web-services, push-notification, polling

我刚开始学习 OBJ-C，但我确实有一个正在努力构建的最终目标应用程序；此应用程序将是 iPad 上的主/详细应用程序，需要通过网络服务“实时”保持自身更新。当多个用户之一（在不同的 iPad 上）在应用程序中执行某些操作时，它还需要将数据发送到远程 MySQL 数据库。

**编辑：正如 lxt 澄清的那样：““使用推送通知作为轮询 Web 服务的提示是否合适？” - 答案是这样的。**

我为这个问题设想的示例是一个小部件库存管理器，它具有流入表视图的“传入”库存和用户将在详细视图中拖放库存的“库存存储箱” .

像这样：

![在此处输入图像描述](../Images/61ab933d719920afd19d7023cd51c283.png)

**注意：我的应用程序不要求自己在不在前台时保持更新。它可以愉快地睡去，直到它再次发射；此时，它需要使用最新数据进行自我更新。[Kyle 使用applicationWillEnterForeground](https://stackoverflow.com/questions/4919950/applicationwillenterforeground-reload-data-from-viewcontroller)为问题的这个特定方面提供了答案：**

为了在不使我的 web 服务服务器负担过重的情况下实现这一点，我设想了一种解决方案，它结合了 web 服务轮询和推送通知，以在一个用户 (iPad) 对数据进行任何更改时触发轮询。所以，流程是这样的：

1.  无论用户可能执行任何操作，都会每分钟触发一次 Web 服务的“默认”轮询。

2.  当用户从 tableview 中拖动库存项目并将其放入存储箱时，该存储箱将向登录到同一总体帐户的任何其他 iPad 发起 PUSH 通知并触发 Web 服务轮询以刷新其数据。

简而言之：每当 iPad“A”上的用户更改任何内容时，都会向 iPad“B”、iPad“C”等发送推送通知。当 B、C、D 等收到推送时，他们会轮询服务器刷新他们的数据。

另一种方法是让帐户上的每台 iPad 每 15 秒触发一次 Web 服务轮询；这对我来说似乎带宽昂贵（并且通常不会导致数据发生变化）。

我的问题不是“我怎么……？” 以及更多的“我应该如何......？”。我意识到 StackOverflow 可能会觉得这有点“主观”，但我认为这是一个非常有价值的问题，因为我花了两天时间研究这种具体做法（使用 PUSH 通知来触发 web 服务轮询）并且发现完全零相关文章。

感谢您抽时间阅读。任何帮助，将不胜感激。示例代码和/或特定框架/工具包信息将不胜感激。但现在我只需要知道这是否是个好主意。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-26T21:43:01.853

**为 iOS 7 更新**

因此，您的问题的要点似乎是“使用推送通知作为轮询 Web 服务的提示是否合适” - 答案是肯定的，需要注意一些事项。在 iOS 7 之前，您的应用程序必须处于前台才能运行。现在，您可以在收到推送消息后使用*后台应用刷新在后台触发您的 Web 服务轮询。*

Apple 自己使用推送通知来触发 Web 服务调用——这就是 Passbook 中的通行证如何远程更新。当更新的通行证可用时，会发送推送通知，然后导致 iOS 调用链接到通行证的相应 Web 服务以下载新的有效负载。

需要记住的几件事：第一是不能保证推送通知（不一定是问题），而且您也不能保证它何时会被传递。在大多数情况下，您希望它是即时的，但并非总是如此。此外，任何选择退出推送通知的用户都不会从此功能中受益。

您想要做的并不是一个非常新颖的问题，并且您可以使用一些现有的解决方案来代替使用推送通知来触发更新。您可以使用基于套接字的系统（相当复杂）或 HTTP 长轮询（不太复杂）。还有一些第三方服务可以很容易地实现这一点——其中一项服务就是[Pusher](http://pusher.com/)。

所有这三种替代方案（套接字、长轮询、第三方服务）的一大优势是它们通常是平台中立的，您可以轻松地在其他客户端上使用它们（与 APNS 不同）。如果是我，我会在推送通知上使用其中一种方法，但是随着 iOS 7 上的后台应用刷新，您可能会发现推送可以支持您想做的所有事情。

反正只是我的两分钱 - 希望它对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T22:05:08.227

我们最近就一个项目讨论了这个问题。我们得出的结论是：NO。

原因：

*   不保证推送通知。他们可能会在 5 秒内到达，可能会在 15 分钟内到达，或者永远不会到达。
*   不能保证用户有一个活跃的数据连接，因此无论如何都需要某种万无一失的逻辑和更新过程。
*   通过推送发送敏感数据（可能与人相关的 ID）缺乏安全性。

我们还研究了某种套接字连接，但这也有局限性，包括应用程序必须在交互过程中保持打开状态以及增加电池的磨损。

最终，我们决定通过单击按钮触发此功能就足够了。这种权衡是不值得的。但是，这并不意味着它不能完成，并且在您的特定情况下它可能是最好的方法。我建议您更深入地了解您的产品设计并确定此功能对您的重要性。如果它是微不足道的，我建议不要使用推送通知。

更新：

另一种可能的选择是在用户重新打开应用程序时触发您的 Web 服务调用。尝试查看 applicationWillEnterForeground 并可能找到类似于此处找到的解决方案：[applicationWillEnterForeground: reload Data from ViewController](https://stackoverflow.com/questions/4919950/applicationwillenterforeground-reload-data-from-viewcontroller)。

# android - Android Widget - 一个动作，多个按钮

> ID：14046514
> 
> 赞同：0
> 
> 时间：2012-12-26T21:32:44.737
> 
> 标签：android, events, button, android-widget

我对 Android 完全陌生，我正在开发一个有多个按钮的小部件。必须对每个按钮执行的操作在逻辑上是相同的。我唯一需要的是知道单击了哪个按钮。我是否必须使用不同`Action`的 s 并将它们设置`Intent`为每个 Button 或者是否有更有效的方法？我尝试使用[自定义 XML 属性](http://blog.infidian.com/2008/05/02/android-tutorial-42-passing-custom-variables-via-xml-resource-files/)创建自定义按钮，但对于此目的而言，这似乎过于复杂和灵活。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:39:49.970

您可以使用 Button 的 onClick 属性在主机活动中指定一个方法，该方法将在调用按钮时调用此方法将传入一个 View 对象作为参数，该参数是被单击的按钮，基于该参数您可以更改您的根据需要的逻辑。

# unix - 在文件系统的任何位置查找正在创建的新文件

> ID：14046519
> 
> 赞同：0
> 
> 时间：2012-12-26T21:33:15.980
> 
> 标签：unix, find

我可以运行一个 Unix 命令来打印文件系统上任何地方创建的新文件的名称吗？或者按创建日期/修改日期的降序列出任何文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:54:32.257

试试[`inotifywait`](http://linux.die.net/man/1/inotifywait)or[`inotifywatch`](http://linux.die.net/man/1/inotifywatch)实用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:52:15.210

有一个名为 inotify 的 Linux 功能可能很有用，例如在这里查看[http://en.wikipedia.org/wiki/Inotify](http://en.wikipedia.org/wiki/Inotify)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T07:22:51.720

如果您运行支持 Dtrace 的操作系统：

```
syscall::creat*:entry { printf("%Y %d %s %s", walltimestamp, uid, execname, copyinstr(arg0)); } 
```

# java - 令牌“类”的语法错误

> ID：14046525
> 
> 赞同：9
> 
> 时间：2012-12-26T21:33:43.573
> 
> 标签：java, android, eclipse, syntax-error, nested-class

我正在尝试创建一个嵌套类以使用 AsyncTask，但是 eclipse 在类 SendData 上给我一个错误，说“令牌“类”上的语法错误，无效类型”为什么它给我那个错误？

```
package com.example.myfirstapp;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.os.Bundle;
import android.app.Activity;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;
import android.content.Intent;
import android.widget.TextView;

public class DisplayMessageActivity extends Activity {
    String url = "http://www.mySIte.com/phpFIle";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Intent intent = getIntent();
        String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

        TextView textView = new TextView(this);
        textView.setTextSize(40);
        textView.setText(message);

        setContentView(textView);

        new SendData().execute();
    }

    private class SendData() extends AsyncTask<Void, Void, Void>{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);

        try{
            List<NameValuePair> nameValues = new ArrayList<NameValuePair>(1);
            nameValues.add(new BasicNameValuePair("id", "12345"));
            httppost.setEntity(new UrlEncodedFormEntity(nameValues));

            System.out.println("Before response");
            HttpResponse response = httpclient.execute(httppost);
            System.out.println("After response");

        }catch(ClientProtocolException e){
            e.printStackTrace();
        }catch(IOException e){
            e.printStackTrace();
        }   
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-26T21:34:54.660

sendData() 是一种方法语法，而不是一个类

```
private class SendData() extends AsyncTask<Void, Void, Void>{ 
```

应该

```
private class SendData extends AsyncTask<Void, Void, Void>{ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T21:34:49.187

```
private class SendData() 
```

你有两个`method`和`class`语法。不确定你想要哪一个。

如果你想定义一个类然后删除`()`

# algorithm - 数据结构与数据类型有何不同

> ID：14046526
> 
> 赞同：2
> 
> 时间：2012-12-26T21:33:49.290
> 
> 标签：algorithm, data-structures

> **可能重复：**
> [复合数据类型和数据结构有什么区别？](https://stackoverflow.com/questions/4630219/what-is-the-difference-between-a-composite-data-type-and-a-data-structure)
> [解释数据*结构*和数据*类型*之间的区别](https://stackoverflow.com/questions/4630377/explain-the-difference-between-a-data-structure-and-a-data-type)

我正在读一本关于数据结构的书，这是我能理解的（如果我弄错了，请纠正我）

在计算机科学中，数据存储在 1 和 0 中，但为了程序员的方便，所有语言都有原始数据类型，数据存储为原始数据类型，而不用担心 1 和 0。

再往上一层，设计了另一种抽象，并使用复合数据（或 java 中的对象）来包含原始数据类型，这有助于轻松处理数据。

最后一层抽象是数据结构，其中数据根据不同的用例以不同的方式存储，并提供了操作数据的灵活性。

对于每种数据结构，都定义了不同的操作，以便于操作数据。

请分享您的观点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:38:53.293

**数据结构**是具有一些属性的数学对象，可以通过多种不同的方式实现为数据类型。**数据类型**只是可以具体构造和表示的一类值。

示例：**int**是数据类型，但不是**结构**。而 struct point { int x; 整数y; } 既是结构又是数据类型。

*更多信息：*

**数据结构**：是一种组织数据的方法的抽象描述，以允许对其进行有效的某些操作。例如，二叉树是一种数据结构，斐波那契堆、AVL 树或跳过列表也是如此。理论家描述数据结构并证明它们的属性是为了表明在某些假设下可以有效地解决某些算法或问题。

**数据类型**：是一个（可能是无限的）具体对象类，它们都共享一些属性。例如，“整数”是包含所有无限多个整数的数据类型，“字符串”是包含所有无限多个字符串的数据类型，而“32 位整数”是包含可以用 30 表示的所有整数的数据类型-两位。

# c# - 将值从一个对象复制到另一个对象（不同类型）

> ID：14046528
> 
> 赞同：2
> 
> 时间：2012-12-26T21:33:58.597
> 
> 标签：c#

我需要将一个对象的一些属性复制到另一个对象。但是，某些属性需要从十进制到整数的类型转换。

我发现这个问题非常有用： [将值从一个对象复制到另一个对象](https://stackoverflow.com/questions/2624823/copy-values-from-one-object-to-another)

但是，我不知道如何修改 Jon Skeet 和 Marc Gravell 的 MiscUtil 中的代码来检查属性类型，如果源是十进制而目标是 int，则调用 Convert.ToIn32()。

这是来自 MiscUtil 的代码，我想弄清楚如何修改：

```
using System;
using System.Collections.Generic;
using System.Linq.Expressions;
using System.Reflection;

namespace MiscUtil.Reflection
{
    /// <summary>
    /// Generic class which copies to its target type from a source
    /// type specified in the Copy method. The types are specified
    /// separately to take advantage of type inference on generic
    /// method arguments.
    /// </summary>
    public static class PropertyCopy<TTarget> where TTarget : class, new()
    {
        /// <summary>
        /// Copies all readable properties from the source to a new instance
        /// of TTarget.
        /// </summary>
        public static TTarget CopyFrom<TSource>(TSource source) where TSource : class
        {
            return PropertyCopier<TSource>.Copy(source);
        }

        /// <summary>
        /// Static class to efficiently store the compiled delegate which can
        /// do the copying. We need a bit of work to ensure that exceptions are
        /// appropriately propagated, as the exception is generated at type initialization
        /// time, but we wish it to be thrown as an ArgumentException.
        /// </summary>
        private static class PropertyCopier<TSource> where TSource : class
        {
            private static readonly Func<TSource, TTarget> copier;
            private static readonly Exception initializationException;

            internal static TTarget Copy(TSource source)
            {
                if (initializationException != null)
                {
                    throw initializationException;
                }
                if (source == null)
                {
                    throw new ArgumentNullException("source");
                }
                return copier(source);
            }

            static PropertyCopier()
            {
                try
                {
                    copier = BuildCopier();
                    initializationException = null;
                }
                catch (Exception e)
                {
                    copier = null;
                    initializationException = e;
                }
            }

            private static Func<TSource, TTarget> BuildCopier()
            {
                ParameterExpression sourceParameter = Expression.Parameter(typeof(TSource), "source");
                var bindings = new List<MemberBinding>();
                foreach (PropertyInfo sourceProperty in typeof(TSource).GetProperties())
                {
                    if (!sourceProperty.CanRead)
                    {
                        continue;
                    }
                    PropertyInfo targetProperty = typeof(TTarget).GetProperty(sourceProperty.Name);
                    if (targetProperty == null)
                    {
                        throw new ArgumentException("Property " + sourceProperty.Name + " is not present and accessible in " + typeof(TTarget).FullName);
                    }
                    if (!targetProperty.CanWrite)
                    {
                        throw new ArgumentException("Property " + sourceProperty.Name + " is not writable in " + typeof(TTarget).FullName);
                    }
                    if (!targetProperty.PropertyType.IsAssignableFrom(sourceProperty.PropertyType))
                    {
                        throw new ArgumentException("Property " + sourceProperty.Name + " has an incompatible type in " + typeof(TTarget).FullName);
                    }
                    bindings.Add(Expression.Bind(targetProperty, Expression.Property(sourceParameter, sourceProperty)));
                }
                Expression initializer = Expression.MemberInit(Expression.New(typeof(TTarget)), bindings);
                return Expression.Lambda<Func<TSource,TTarget>>(initializer, sourceParameter).Compile();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T21:40:16.613

如果你有

```
public class Foo
{
    public decimal Value { get; set; }
}

public class Bar
{
    public int Value { get; set; }
} 
```

然后使用[AutoMapper](http://automapper.org/)（可从 NuGet 获得），您可以将对象 Foo 映射到对象 Bar，如下所示：

```
Mapper.CreateMap<Foo, Bar>();
Foo foo = new Foo() { Value = 10.5M };
var bar = Mapper.Map<Bar>(foo);
// bar.Value = 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-13T11:03:18.050

我们可以使用 System.Reflection 来做同样的事情。遵循此功能：

```
 public static T CloneData<T>(object source)
    {
        var target = (T)Activator.CreateInstance(typeof(T));

        Type objTypeBase = source.GetType();
        Type objTypeTarget = target.GetType();

        PropertyInfo _propinfo = null;
        var propInfos = objTypeBase.GetProperties(BindingFlags.Instance | BindingFlags.Public);
        foreach (var propInfo in propInfos)
        {
            try
            {
                _propinfo = objTypeTarget.GetProperty(propInfo.Name, BindingFlags.Instance | BindingFlags.Public);
                if (_propinfo != null)
                {
                    _propinfo.SetValue(target, propInfo.GetValue(source));
                }
            }
            catch (ArgumentException aex) { if (!string.IsNullOrEmpty(aex.Message)) continue; }
            catch (Exception ex) { if (!string.IsNullOrEmpty(ex.Message)) return default(T);  }
        }

        return target; 
    } 
```

假设我们有两个类：

```
public class A
{
    public string Prop1 {get ; set; }
    public string Prop2 {get ; set; }
    public string Prop3 {get ; set; }
    public string Prop4 {get ; set; }
}

public class B
{
    public string Prop2 {get ; set; }
    public string Prop3 {get ; set; }
} 
```

我们写：

```
var a = new A
        {
            Prop1 = "A",
            Prop2 = "B",
            Prop3 = "C",
            Prop4 = "D",
        };

var b = CloneData<B>(a); 
```

我们将获得一个类 B 的实例，该实例具有从 A 复制的 Prop2 和 Prop3 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T21:51:00.263

您可以检查类型

```
 int x = 4;
        if(x.GetType()== typeof(int))
        {
            ///DO Stuff
        }

        if(x.GetType()==typeof(decimal)
           {
                ///Do stuff
             } 
```

# java - 基于多个条件的文件名过滤器

> ID：14046530
> 
> 赞同：-1
> 
> 时间：2012-12-26T21:34:17.163
> 
> 标签：java, android

我正在使用以下代码返回扩展名为“.mp4”的目录中的文件。

我想调整代码，使其返回具有 .mp4 扩展名但在文件名的其余部分不包含字符串“temp”的文件

```
final String[] vids = dir.list(new FilenameFilter() {
    public boolean accept(File dir, String name) {
        return name.endsWith(".mp4");
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T21:36:39.797

```
return name.endsWith(".mp4") && !name.contains("temp"); 
```

# java - 以编程方式更改 Ninepatch 的颜色

> ID：14046534
> 
> 赞同：2
> 
> 时间：2012-12-26T21:34:35.430
> 
> 标签：java, android, bitmap, nine-patch

> **可能重复：**
> [将位图转换为 Ninepatch 以用作背景](https://stackoverflow.com/questions/13983775/convert-bitmap-into-ninepatch-to-use-as-background)

我正在尝试在九个补丁上将特定颜色更改为不同的颜色。到目前为止，我能想到的唯一方法是 - 从资源中的 Ninepatch 创建位图，复制位图以使其可变并为其提供 rgb-8888 配置，通过更改颜色运行的方法，然后从位图创建一个新的九个补丁。但是当我尝试从位图副本“颜色更改后”获取新的九个补丁的字节 [] 块数据时，它开始活动闪烁黑色并返回到父活动。如果我“在颜色变化之前”从原始位图中获取 byte[] 块数据，它可以工作，但无论它伸展到哪里，它都会放置原始颜色。到目前为止，这是我的代码。

```
 Bitmap backMap = BitmapFactory.decodeResource(getResources(),R.drawable.outerbackground);
  byte[] chunk = backMap.getNinePatchChunk();

  backMap = backMap.copy( Bitmap.Config.ARGB_8888, true);

  backMap = getChangedColor(backMap, Color.rgb(212, 212, 212), Color.rgb(255, 50, 0));

  NinePatchDrawable np_drawable = new NinePatchDrawable(getResources(), backMap, chunk, new Rect(), null);
  np_drawable.setBounds(0, 0, backMap.getWidth(), backMap.getHeight()); 
```

我认为它以旧颜色延伸的原因是我从原始位图“在颜色变化之前”获得的字节 [] 块数据。我想我要么需要“在颜色变化之后”从位图副本中获取块数据，要么弄清楚如何更改 byte[] 块中的数据以表示颜色变化。如果有人对如何使这项工作或更好的方法有所了解，我将非常感激。我已经坚持了一周。

# java - Java 游戏 - 如何阻止玩家越过障碍物

> ID：14046535
> 
> 赞同：2
> 
> 时间：2012-12-26T21:34:37.377
> 
> 标签：java, awt, collision-detection

我制作了一个非常简单的 2D Java 游戏类，由通用的 2D 游戏方法（如渲染和更新）组成，我设置了所有 if 语句，以便玩家使用键盘箭头输入在地图上移动。我现在正在尝试设置我所读到的内容是碰撞检测，我知道我需要做的基础知识，因为在我真正来这里问这个问题之前我做了很多阅读，从我读到的内容来看像这样的东西：

制作2个矩形

```
Rectangle rectOne = new Rectangle(playerX, playerY, 40, 40); 
//keep in mind that the variables playerX and playerY are already made previously
Rectangle rectTwo = new Rectangle(50, 50, 100,100); 
```

然后根据我的更新方法我会说：

```
if(rectOne.intersects(rectTwo)){//change the player direction so that he 
can go no further} 
```

我只是不明白我的 if 语句中会出现什么，如果发生交叉点，我需要一些东西来阻止我的玩家继续前进，但是我怎么能写这个，因为玩家可以在 4 个不同的方向上移动（上、下、左、正确的）。如果它只是一维会简单得多，因为我可以将方向更改为与原来相反的方向，但它是二维的，所以有点混乱。

附加信息：

我玩游戏的视图类似于以下内容： [http ://www.2dplay.com/awesome-tanks/awesome-tanks-play.htm](http://www.2dplay.com/awesome-tanks/awesome-tanks-play.htm)

编辑 3：

```
 package javagame;

                import java.awt.Rectangle;

                IMPORTS ARE HERE

public class Play extends BasicGameState{

    Animation bucky, movingUp, movingDown, movingLeft, movingRight;
    Image worldMap;
    boolean quit = false;//gives user to quit the game
    int[] duration = {200, 200};//how long frame stays up for
    int buckyPositionX = 0;
    int buckyPositionY = 0;
    int x = buckyPositionX + 320;//keeps user in the middle of the screem
    int y = buckyPositionY + 160;//the numbers are half of the screen size

    Rectangle rectOne = new Rectangle(x, y,90,90);
    Rectangle rectTwo = new Rectangle(500 + buckyPositionX, 330 + buckyPositionY, 210, 150);

private int xSpeed, ySpeed;///////////////////////////CODE FOR COLLISION

    public Play(int state){
    }   
    public void init(GameContainer gc, StateBasedGame sbg) throws SlickException{
          worldMap = new Image("res/world.png");
          Image[] walkUp = {new Image("res/b.png"), new Image("res/b.png")}; //these are the images to be used in the "walkUp" animation
          Image[] walkDown = {new Image("res/f.png"), new Image("res/f.png")};
          Image[] walkLeft = {new Image("res/l.png"), new Image("res/l.png")};
          Image[] walkRight = {new Image("res/r.png"), new Image("res/r.png")};

    movingUp = new Animation(walkUp, duration, false);
    movingDown = new Animation(walkDown, duration, false);  
    movingLeft = new Animation(walkLeft, duration, false);  
    movingRight = new Animation(walkRight, duration, false);

    bucky = movingDown;//facing screen initially on startup
    }

    public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException{
    worldMap.draw(buckyPositionX, buckyPositionY);//position 0,0
    bucky.draw(x, y);//makes him appear at center of map
    g.fillRect(x, y,90,90);
    g.fillRect(500 + buckyPositionX, 330 + buckyPositionY, 210, 150);

    if(quit==true){
        g.drawString("Resume(R)", 250, 100);
        g.drawString("Main(M)", 250, 150);
        g.drawString("Quit Game(Q)", 250, 200);      
        if(quit==false){
            g.clear();//wipe off everything from screen
        }
    }
    }

public void setSpeedWithDirection(int speed, int direction)////////////CODE FOR COLLISION
{
xSpeed = (int) (Math.cos(direction) * speed);//////////////////////////CODE FOR COLLISION
ySpeed = (int) (Math.sin(direction) * speed);//////////////////////////CODE FOR COLLISION
}

    public void update(GameContainer gc, StateBasedGame sbg, int delta)throws SlickException{
    Input input = gc.getInput();

x += xSpeed;//////////////////////////////////////////CODE FOR COLLISION
y += ySpeed;//////////////////////////////////////////CODE FOR COLLISION

if(rectOne.intersects(rectTwo))///////////////////////CODE FOR COLLISION
{
xSpeed = 0;////////////////////////////CODE FOR COLLISION
ySpeed = 0;////////////////////////////CODE FOR COLLISION
}

    //up
    if(input.isKeyDown(Input.KEY_UP)){
        bucky = movingUp;//changes the image to his back
        buckyPositionY += 2;;//increase the Y coordinates of bucky (move him up)
        if(buckyPositionY>162){//if I reach the top 
            buckyPositionY -= 2;//stops any further movement in that direction
        }
    }

    //down
    if(input.isKeyDown(Input.KEY_DOWN)){
        bucky = movingDown;
        buckyPositionY -= 2;
        if(buckyPositionY<-550){
            buckyPositionY += 2;//basically change the direction if + make -
    }}
    //left
    if(input.isKeyDown(Input.KEY_LEFT)){
        bucky = movingLeft;
        buckyPositionX += 2;
        if(buckyPositionX>324){
            buckyPositionX -= 2;//delta * .1f
    }}
    //right
    if(input.isKeyDown(Input.KEY_RIGHT)){
        bucky = movingRight;
        buckyPositionX -= 2;
        if(buckyPositionX<-776){
            buckyPositionX += 2;
    }}

     //escape
    if(input.isKeyDown(Input.KEY_ESCAPE)){
        quit=true;
    }
    //when the menu is up
    if(quit==true){//is the menu on the screen
        if(input.isKeyDown(Input.KEY_R)){
            quit = false;//resumes the game, makes menu dissapear
        }
        if(input.isKeyDown(Input.KEY_M)){
            sbg.enterState(0);//takes you to the main menu
        }
        if(input.isKeyDown(Input.KEY_Q)){
            System.exit(0);//quits the game
        }
    }

}   

    public int getID(){
        return 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T22:11:15.360

作为先决条件，您的播放器类（或其超类之一）应该有一些描述其速度的字段（x-speed 和 y-speed 的一对字段效果很好，尽管您需要 trig 来设置播放器给定方向）。这是一个带有 x 和 y 速度字段的简单播放器类的示例：

```
public class Player
{
     //coordinates of the player 
     private int x, y;

     //horizontal and vertical components of the player's speed.
     private int xSpeed, ySpeed; 

     //call a method similar to this one every time your player updates its position
     public void updatePosition()
     {
          x += xSpeed;
          y += ySpeed;
     }

     //Converts a speed and a direction (much easier to deal with)
     //to an x speed and a y speed (much easier for actually moving) 
     //and sets the player's motion
     public void setSpeedWithDirection(int speed, float direction)
     {
         xSpeed = Math.cos(direction) * speed;
         ySpeed = Math.sin(direction) * speed;
     }
} 
```

为了真正反映玩家的速度，每次玩家更新时，将 x 速度添加到玩家的 x 坐标，并将 y 速度添加到玩家的 y 坐标。现在，发生碰撞时可能会发生很多事情。最简单的方法是通过将播放器的 x 速度和 y 速度设置为零来停止播放器。然而，这可能看起来有问题，因为无论玩家往哪个方向前进，玩家都会停止移动。更好的方法是分析交叉路口的形状（假设你正在使用`java.awt.Rectangle`你可以使用`intersection()`方法，几乎​​所有 Rectangle 类都有类似的东西）并确定是否应将 x-speed、y-speed 或两者都设置为零。例如，如果交叉点的宽度大于高度（x 轴大于 y 轴），您可能应该将 y 速度设置为零，但 x 速度不受影响。如果您希望玩家转身（180 度），只需翻转 x-speed 和 y-speed 的符号。如果您希望玩家“弹跳”而不是停止，请像前一种情况一样分析交叉点，但要反转速度而不是将其设置为零。以下是一些代码示例（可能不会完全按照所写的那样工作，因为我不知道您的类是如何设置的）：

```
//simple stop
if(rectOne.intersects(rectTwo))
{
    player.xSpeed = 0;
    player.ySpeed = 0;
}

//variable-axis stop
if(rectOne.intersects(rectTwo))
{
    //depending on Rectangle implementation may need to use other method
    Rectangle overlap = rectOne.intersection(rectTwo);
    if (overlap.height >= overlap.width)
    {
        player.xSpeed = 0;
    }
    if (overlap.width >= overlap.height)
    {
        player.ySpeed = 0;
    }
}

//simple turn-around (about face)
if(rectOne.intersects(rectTwo))
{
    player.xSpeed *= -1;
    player.ySpeed *= -1;
}

//bounce (variable-axis turn around)
if(rectOne.intersects(rectTwo))
{
    Rectangle overlap = rectOne.intersection(rectTwo);
    if (overlap.height >= overlap.width)
    {
        player.xSpeed *= -1;
    }
    if (overlap.width >= overlap.height)
    {
        player.ySpeed *= -1;
    }
} 
```

请注意，无论您选择做什么，碰撞都很难顺利进行。*我会认为所有这些选项都是可以始终*建立的良好起点。我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:04:16.153

我建议创建一个枚举`Way`。你应该知道`Way`他现在要去，然后把它改成`Way`相反的`Way`，或者你可以锁定当前`Way`并随机选择一个`Way`去。

# css - 从指南针精灵获取图像宽度和高度

> ID：14046540
> 
> 赞同：2
> 
> 时间：2012-12-26T21:35:05.380
> 
> 标签：css, sass, compass-sass, css-sprites

从指南针生成精灵时，我无法获取图像的宽度和高度。我正在使用 Scout 进行实时观看，并且已经配置了我的图像文件夹。我有我想要精灵的图像在一个名为 common 的文件夹中。

这是我的代码

```
@import "common/*.png";
.facebook { @include common-sprite(facebook); } 
```

这可以工作并生成背景位置，但我想获得宽度和高度。

任何都会很棒！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T21:39:46.380

我找到了解决方案。添加`$common-sprite-dimensions: true;`（[指向指南针精灵选项文档](http://compass-style.org/help/tutorials/spriting/customization-options/)的链接）会将宽度和高度放入输出中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:57:11.487

如果您不希望使用图像大小定义所有精灵用法，您还可以：

```
@import "common/*.png";
.facebook { @include common-sprite(facebook, true); } 
```

该`true`参数将仅在`.facebook`类定义中为图像生成宽度和高度。

# php - 解析 XML 的 PHP 帮助

> ID：14046542
> 
> 赞同：-2
> 
> 时间：2012-12-26T21:35:29.773
> 
> 标签：php, xml, parsing

我正在尝试解析 XML 并打印标签，但我收到错误消息。

致命错误：调用未定义的方法 DOMNodeList::getElementsByTagName()

```
<?
        $doc = new DOMDocument();
        $doc->load('http://www.espncricinfo.com/rss/content/story/feeds/0.xml');
        $item = $doc -> getElementsByTagName('item');
        $title = $item->getElementsByTagName('title');
        $titles = $title->item(0)->nodeValue;
        echo "<h2>$titles</h2>"
        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:40:07.333

此行返回一个[`DOMNodeList`](http://php.net/manual/en/class.domnodelist.php)：

```
$item = $doc -> getElementsByTagName('item'); 
```

`getElementsByTagName()`此行调用方法`$item`：

```
$title = $item->getElementsByTagName('title'); 
```

但是，`$item`a`DOMNodeList`没有方法`getElementsByTagName`，因此出现错误：

```
Fatal error: Call to undefined method DOMNodeList::getElementsByTagName() 
```

要使用 rss 提要，我建议您只使用 SimpleXML：

```
function h($s) {
    return htmlspecialchars($s, ENT_QUOTES, 'utf-8');
}

$u = 'http://www.espncricinfo.com/rss/content/story/feeds/0.xml';
$rss = simplexml_load_file($u);
foreach ($rss->channel->item as $item) {
    echo "<h2>",h($item->title),"</h2>\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:38:54.620

`$item`是一个 DOMNodeList，而不是 DOM 元素，使用它来访问列表中的第一个元素：

```
 $title = $item->item(0)->getElementsByTagName('title'); 
```

这使用[`item()`](http://php.net/manual/en/domnodelist.item.php)方法来获取列表中的第一个元素。

# ftp - 树莓派 FTP

> ID：14046547
> 
> 赞同：0
> 
> 时间：2012-12-26T21:35:58.467
> 
> 标签：ftp, webserver, raspberry-pi

每当我尝试将文件上传到我的 Raspberry Pi Web 服务器时，我都会收到以下消息：

```
Error:  Could not connect to server
Status: Waiting to retry...
Status: Connecting to XXXXXXXXXXX...
Status: Connection attempt failed with "ECONNREFUSED - Connection refused by server".
Error:  Could not connect to server 
```

为什么是这样？:( 我似乎无法弄清楚。我在 Debian 上运行 Apache。

是的，我的路由器上已经设置了端口转发，并且运行良好。我明白了：它有效！

```
This is the default web page for this server.

The web server software is running but no content has been added, yet. 
```

我在这里和那里调整了一些文件来修改权限，但到目前为止还没有。:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T22:40:19.217

Apache 是一个网络服务器，而不是一个 FTP 服务器 ^.^

```
sudo apt-get install vsftpd 
```

# php - 如何在 PHP 中对大文本文件进行小的更改而无需处理整个文件？

> ID：14046552
> 
> 赞同：0
> 
> 时间：2012-12-26T21:36:39.233
> 
> 标签：php, text, text-files

我正在使用 php 中的非常大的文本文件（最大 10gb），我怎样才能在文件中进行小的更改（如删除或添加一行）而不必每次都读取整个文件并将其写入磁盘？

我的意思是，我想直接更改文件的一小部分，而不必处理整个文件......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:45:18.470

您可以使用[`fopen()`](http://php.net/manual/en/function.fopen.php)它将为您的文件创建资源。然后将资源操作[`fseek()`](http://php.net/manual/en/function.fseek.php)到您想要读取/写入的位置，然后[`fgets()`](http://php.net/manual/en/function.fgets.php)操作[`fputs()`](http://php.net/manual/en/function.fputs.php)您想要对文件的该部分执行的操作。

这仅适用于更改和附加数据。如果要从文件中删除数据，则必须从要删除的点重写整个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:47:50.690

如果您需要更改文件的长度，则无法避免将文件的部分从更改位置重写到末尾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T21:48:06.560

如果您正在处理文本文件，则不能替换文件中间的“行”，因为它是字符流。除非您进行一对一的字符替换，否则您必须重写整个文件。

但是，您可能可以为该任务使用更好的工具，例如 Perl 或一些 Unix 命令行实用程序。您实际上想用这些大文本文件做什么？

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-12-26T21:41:35.830

这个问题有点模糊。通常在 php 中，您只需突出显示要删除的部分并按退格键，然后您可以根据需要对其进行编辑。通常您可以按 F3 或 CTRL + F 来搜索需要编辑的位。还有，10g？我很好奇这甚至做了什么。

# python - 访问在对话框 tkinter 中输入的数据

> ID：14046554
> 
> 赞同：0
> 
> 时间：2012-12-26T21:36:51.543
> 
> 标签：python, tkinter

我正在编写一个简单的 GUI 来使用 python 中的按钮小部件输入数字。我调用了一个按钮，按下该按钮会调用名为 NumLibs 的函数。Numlib 从我的调用 MyDialog 访问数据。我希望在我的主要 python 程序中访问存储在 d.result 中的值，但我无法这样做。有人可以帮我访问这个值吗？请在附件中找到我的代码。

```
**from Tkinter import *
import tkSimpleDialog
import sys
import os
import string
def callback():
    print "called the callback!"
class MyDialog(tkSimpleDialog.Dialog):
    def body(self, master):
        Label(master, text="No.of Libraries :").grid(row=0)
        self.e1 = Entry(master)
        self.e1.grid(row=0, column=1)
        return self.e1 # initial focus
    def apply(self):
            first = string.atoi(self.e1.get())
        self.result=first
            #print first # or something

def NumLib():
    d=MyDialog(root)
    return d.result

root = Tk()
root.title("SIMKIT")
toolbar = Frame(root, width=300, height=300, bg="grey", bd=1, relief="sunken")
b = Button(toolbar, text="Enter No. of Libraries", command=NumLib)
b.pack(padx=10, pady=10)
toolbar.pack()
root.mainloop()** 
```

提前致谢。

问候，考斯图布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:32:50.687

您必须将对话框的结果设置为主程序实例的属性。通过这种方式，您将可以访问它。
例如下面的类读取输入的值并写入到按钮中

```
class MyDialog(tkSimpleDialog.Dialog):
    -----  same code ---------

class MyToolbar(Frame):

    def __init__(self, *args, **kargs):
        Frame.__init__(self, *args, **kargs)
        self.b = Button(self, text="Enter No. of Libraries", command=self.NumLib)
        self.b.pack(padx=10, pady=10)
        self.pack()

    def NumLib(self):
        d = MyDialog(root)
        self.result = d.result            # you have your value in this instance variable
        self.b.config(text= self.result)  # for example I can use it to change the button label

root = Tk()
root.title("SIMKIT")
toolbar = MyToolbar(root, width=300, height=300, bg="grey", bd=1, relief="sunken")
root.mainloop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:13:08.840

在我看来，`MyDialogresult`仅设置在`apply()`- 按下按钮时可能会或可能不会被调用，因此在调用时变量`MyDialog.result`可能不存在`NumLib()`！

尝试`MyDialog.result`在按下按钮之前将 的值设置为某个虚拟值，可能在构造函数中或在类的顶层中，看看会发生什么。

# javascript - v8 中的和谐代理

> ID：14046561
> 
> 赞同：3
> 
> 时间：2012-12-26T21:38:06.527
> 
> 标签：javascript, v8

我在 v8 中模拟 noSuchMethod 时遇到问题。我在命令行中正确激活了和谐代理（我没有使用 Proxy() 对象出现错误，并且我能够使用*一些*代理功能）但是我发现的所有示例都不适用于 noSuchMethod。

```
var NoSuchMethodTrap = Proxy.create({
  // FIXME: don't know why I need to provide this method,
  // JS complains if getPropertyDescriptor is left out, or returns undefined
  // Apparently, this method is called twice: once for '_noSuchMethod_' and once for 'foo'
  getPropertyDescriptor: function(n){ return {} }, 
  get: function(rcvr, name) {
    if (name === '__noSuchMethod__') {
      throw new Error("receiver does not implement __noSuchMethod__ hook");
    } else {
      return function() {
        var args = Array.prototype.slice.call(arguments);
        return this.__noSuchMethod__(name, args);
      }
    }
  }
});

function MyObject() {};
MyObject.prototype = Object.create(NoSuchMethodTrap);
MyObject.prototype.__noSuchMethod__ = function(methName, args) {
  return 'Hello, '+methName;
}; 
```

我包含了我正在尝试的代码片段，但这有点毫无价值，因为无论我从哪里获得代码，情况都是一样的。我已经用谷歌搜索了一个星期了。那么问题来了：这难道根本没有在 v8 中实现吗？如果是这样，我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-18T13:59:49.663

在这里结束循环：代理规范已经发生了很大变化，V8 现在实现了完整的新规范。不再需要任何标志，并且不应缺少任何功能。

# git - 忽略父目录中的 .git 状态、分支等？

> ID：14046563
> 
> 赞同：4
> 
> 时间：2012-12-26T21:38:08.330
> 
> 标签：git

是否可以防止 git 在父目录中搜索`.git`文件夹？我`.git`在我的用户根目录中有一个备份/分支我的配置文件，但这会产生不良后果，即所有没有自己的`.git`文件夹的子目录似乎都是用户根目录的子目录。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-15T22:06:23.227

试着把它放在你的 .bashrc 中：

```
export GIT_CEILING_DIRECTORIES='/home/keflavich' 
```

如果您在 /home/keflavich 的子目录中，则 /home/keflavich 中的 .git 内容将不可见。但是如果你在 /home/keflavich，它会是可见的，我认为这就是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:40:45.363

您可以添加`.gitignore`忽略*所有*内容的 a （即其内容只是`*`）。这样，*除非*您明确告诉 Git 这样做，否则 Git 将不会跟踪或识别任何内容，即使用`git add -f filename`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T21:44:54.540

您可以使用`.gitignore`该行来忽略所有子文件夹

> `/*/`

（即正斜杠、星号、正斜杠）第一个斜杠表示它是指 repo 的根，星号表示“任何名称”，尾部斜杠表示“仅目录”。

您确实要跟踪的任何目录，都可以使用`git add -f`.

另请参见[`.gitignore`](http://git-scm.com/docs/gitignore)和的手册页[`git add`](http://git-scm.com/docs/git-add)。

# php - 如何在每个 MySQL 字段结果之间放置标记？

> ID：14046570
> 
> 赞同：0
> 
> 时间：2012-12-26T21:38:37.037
> 
> 标签：php, html, mysql

我正在为我的网站制作一个 PHP 评论框。这是代码：

```
$con = mysql_connect($hostname,$username,$password); // Connect to MySQL database
if (!$con)
  {
  die("Could not connect: " . mysql_error()); 
  }
mysql_select_db($dbname);
if(isset($_POST["submit"]))
{
    $comment=$_POST["comment"];
    $q="INSERT INTO comments_table (comments) VALUES ('$comment')"; // Could also be (\"comment\")
    mysql_query($q);
} 
$q="SELECT comments FROM comments_table";
$result=mysql_query($q);
while($row=mysql_fetch_array($result))
{
    // List the comments - how could I get some markup between each to make each have it's own area?
    echo $row['comments']."";
}
?>
<html>
<body>
<form method="post" action="/comments-test.php">
<textarea name="comment" rows=30 cols=10></textarea>
<input type="submit" name="submit" value="submit">
</form>
</body>
</html> 
```

我想知道的是我应该如何让每条评论都有自己的框或标记。每个评论之间不能是相同的HTML（例如，`,</div><div class="comment">`），否则评论的末尾会有一些评论框没有结束标签，而开头有一个杂散的结束标签。我是 SQL 新手，但不是 PHP 新手。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:41:50.047

```
 // List the comments - how could I get some markup between each to make each have it's own area?
    echo '<div class="comment">'.$row['comments']."</div>"; 
```

那行得通吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:41:58.393

我不完全明白你在说什么，但你的意思是这样的：

```
while($row=mysql_fetch_array($result))
{
    // List the comments - how could I get some markup between each to make each have it's own area?
    echo "<div class='comment'>".$row['comments']."</div>";
} 
```

如果不是，那么我不确定你在说什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T21:43:53.477

只需将您的评论包装到适当`div`的 s

```
while($row=mysql_fetch_array($result))
{
    // List the comments - how could I get some markup between each to make each have it's own area?
    echo '<div class="comment">', $row['comments'], '</div>';
} 
```

# python - 在类中的函数之间移动信息

> ID：14046572
> 
> 赞同：0
> 
> 时间：2012-12-26T21:38:52.370
> 
> 标签：python

我想编写一个函数，将用户插入到函数`plays`中的参数的所有字符串保存到函数`move()`中的字符串`undo_str`中`undo()`。我在这里想念什么？

```
class Sokoban:
        def __init__(self, board):
                self.board = board.copy()

        def move(self, plays):
             ............

        def undo(self):
                undo_str=""
                undo_str=undo_str[:]+plays
                self.undo=undo_str[:-1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:55:36.570

我希望这个对你有用。如果您添加更多的类属性来保存信息，它应该是相当容易的。这里的 init 方法会将 sokoban.plays 和 sokoban undo_str 初始化为空字符串。sokoban.move('string') 会将 sokoban.plays 更改为 'string'，并且 sokoban.undo_str() 会将当前 sokoban.plays 添加到 sokoban.undo_str

```
class Sokoban:
    def __init__(self, board):
            self.board = board.copy()
            self.plays = ''
            self.undo_str = ''

    def move(self, plays):
         self.plays = plays
         ............

    def undo(self):
            undo_str=undo_str[:]+self.plays

sokoban = Sokoban(board)
sokoban.move('play1')
sokoban.undo()
sokoban.move('play2')
sokoban.undo()

In: sokoban.plays 
Out 'play2'

In: sokoban.undo_str
Out: 'play1play2' 
```

（请注意，我去掉了'self.undo = self.undo_str[:-1]'这一行。这会与函数self.undo冲突）

# java - 填充 Android 上 FlowLayout 的空白空间

> ID：14046576
> 
> 赞同：0
> 
> 时间：2012-12-26T21:38:57.020
> 
> 标签：java, android, flowlayout, fill-parent

我正在创建一个具有流布局的应用程序。我从网上找到的`FlowLayout`实现（我不记得确切来自哪里）。现在，当我的布局宽度大于其子项宽度的总和时，我需要填充空白空间，为每个空间提供适当的宽度。我试图将它们`MATCH_PARENT`作为宽度，但没有奏效，每个元素都是从“新行”创建的。
请帮我解决我的问题。提前致谢。

这是我使用的 FlowLayout 类实现：

```
public class FlowLayout extends ViewGroup {
public static final String TAG = FlowLayout.class.getSimpleName();

private int mHorizontalSpacing = 10;
private int mVerticalSpacing = 10;

public FlowLayout(Context context) {
    super(context);
}

public FlowLayout(Context context, AttributeSet attrs) {
    super(context, attrs);

    TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.FlowLayout);
    try {
        mHorizontalSpacing = a.getDimensionPixelSize(R.styleable.FlowLayout_horizontalSpacing, 0);
        mVerticalSpacing = a.getDimensionPixelSize(R.styleable.FlowLayout_verticalSpacing, 0);
    } finally {
        a.recycle();
    }
}

@Override protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    int widthSize = MeasureSpec.getSize(widthMeasureSpec);

    int width = 0;
    int height = getPaddingTop();

    int currentWidth = getPaddingLeft();
    int currentHeight = 0;

    boolean breakLine = false;

    final int count = getChildCount();

    Log.d(TAG, "child count = " + count);

    for (int i = 0; i < count; i++) {
        View child = getChildAt(i);
        LayoutParams lp = (LayoutParams) child.getLayoutParams();
        measureChild(child, widthMeasureSpec, heightMeasureSpec);

        Log.d(TAG, "child " + i + " mw=" + child.getMeasuredWidth() + " mh=" + child.getMeasuredHeight());

        if (breakLine || currentWidth + child.getMeasuredWidth() > widthSize) {
            height += currentHeight + mVerticalSpacing;
            currentHeight = 0;
            if (currentWidth > width) width = currentWidth;
            currentWidth = getPaddingLeft();
        }

        int spacing = mHorizontalSpacing;
        if (lp.spacing != Integer.MAX_VALUE) {
            spacing = lp.spacing;
        }

        lp.x = currentWidth;
        lp.y = height;

        Log.d(TAG, "child " + i + " x=" + lp.x + " y=" + lp.y);

        currentWidth += child.getMeasuredWidth() + spacing;
        int childHeight = child.getMeasuredHeight();
        if (childHeight > currentHeight) currentHeight = childHeight;

        breakLine = lp.breakLine;
    }

    // after last row (patched by yuku)
    {
        height += currentHeight;
        if (currentWidth > width) width = currentWidth;
    }

    width += getPaddingRight();
    height += getPaddingBottom();

    Log.d(TAG, "onMeasure w=" + width + " h=" + height + " widthMeasureSpec=" + Integer.toHexString(widthMeasureSpec) + " heightMeasureSpec=" + Integer.toHexString(heightMeasureSpec));

    // don't resolve height (patched by yuku)
    setMeasuredDimension(resolveSize(width, widthMeasureSpec), resolveSize(height, heightMeasureSpec));
}

@Override protected void onLayout(boolean changed, int l, int t, int r, int b) {
    final int count = getChildCount();
    for (int i = 0; i < count; i++) {
        View child = getChildAt(i);
        LayoutParams lp = (LayoutParams) child.getLayoutParams();
        child.layout(lp.x, lp.y, lp.x + child.getMeasuredWidth(), lp.y + child.getMeasuredHeight());
    }
}

@Override protected boolean checkLayoutParams(ViewGroup.LayoutParams p) {
    return p instanceof LayoutParams;
}

@Override public LayoutParams generateDefaultLayoutParams() {
    return new LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);
}

@Override public LayoutParams generateLayoutParams(AttributeSet attrs) {
    return new LayoutParams(getContext(), attrs);
}

@Override public LayoutParams generateLayoutParams(ViewGroup.LayoutParams p) {
    return new LayoutParams(p.width, p.height);
}

public static class LayoutParams extends ViewGroup.LayoutParams {
    public boolean breakLine;
    public int spacing = Integer.MAX_VALUE;

    private int x;
    private int y;

    public LayoutParams(int width, int height) {
        super(width, height);
    }

    public LayoutParams(Context context, AttributeSet attrs) {
        super(context, attrs);

        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.FlowLayout_LayoutParams);
        try {
            spacing = a.getDimensionPixelSize(R.styleable.FlowLayout_LayoutParams_layout_spacing, Integer.MAX_VALUE);
            breakLine = a.getBoolean(R.styleable.FlowLayout_LayoutParams_layout_breakLine, false);
        } finally {
            a.recycle();
        }       
    }
}
} 
```

我想达到这个效果：

![在此处输入图像描述](../Images/daf4bc14d133dbcf8dfd54c685c469e0.png)

而不是这个：

![在此处输入图像描述](../Images/b5309c58edb29e5ef3e5912cd94d8e71.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T19:24:17.797

我想我明白了，这有点棘手，但这或多或少是你需要做的。在您原来的 for 循环中，跟踪您是否已经换行。假设您调用此变量`isOneLine`并将其初始化为 true，将 currentWidth 重置为 0 后立即将其设置为 false。然后，在您的 for 循环之外：

```
if (isOneLine) {
  //There's always N + 1 padding "spaces"
  int paddingBetween = (widthSize - currentWidth)/(count + 1); 

  for (int i = 0; i < count; i++) {
    View child = getChildAt(i);
    LayoutParams lp = (LayoutParams) child.getLayoutParams();
    measureChild(child, widthMeasureSpec, heightMeasureSpec);

    int spacing = mHorizontalSpacing;
    if (lp.spacing != Integer.MAX_VALUE) {
        spacing = lp.spacing;
    }
    //Not sure exactly what spacing is here, but I assume you have to take it into account somewhere...
    lp.x = paddingBetween + currentWidth;
    lp.y = 0;

    currentWidth += child.getMeasuredWidth() + spacing + paddingBetween;
  }
} 
```

# c# - 如何获取数据表和数据库的强类型 linq 查询

> ID：14046578
> 
> 赞同：1
> 
> 时间：2012-12-26T21:39:03.307
> 
> 标签：c#, asp.net, linq, datatable, strong-typing

我已经看到了与我的问题非常相似的其他解决方案，但不知何故它对我不起作用。

我有一个对数据库的 linq 查询，它连接到一个非强类型的数据表。我需要一个强类型的结果来返回一个视图。

我的尝试看起来像这样

```
var query = (from t in queryAllTasks
             join tL in table.AsEnumerable() on t.TaskId equals tL.Field<int>("TaskId")
             select new { t.TaskId, Kasten = tL.Field<int>("Box") }).AsEnumerable(); 
```

如果感兴趣，这是数据表：

```
//Create new DataTable.
        DataTable table = new DataTable();

        //Declare DataColumn and DataRow variables
        DataColumn column;
        DataRow row;

        //Create ne DataColumn
        //set DataType
        //ColumnName
        //add to Datatable
        column = new DataColumn();
        column.DataType = System.Type.GetType("System.Int32");
        column.ColumnName = "TaskId";
        table.Columns.Add(column);

        //Dritte Spalte
        column = new DataColumn();
        column.DataType = System.Type.GetType("System.Int32");
        column.ColumnName = "Box";
        table.Columns.Add(column); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:54:59.247

我建议使用命名自定义类型，而不是匿名类型。如果您使用的是`new { ... }`构造，那么您正在创建匿名类型，这些类型通常不会传递出去或传递到方法中。如果确实将匿名类型从方法中传递出来，则需要将其强制转换为对象或将形式参数设为动态，然后访问其字段，我不建议这样做，尤其是在视图中。我建议将您的查询更改为：

```
var query = from t in queryAllTasks
             join tL in table.AsEnumerable() on t.TaskId equals tL.Field<int>("TaskId")
             select new MyModel{ TaskId =  t.TaskId, Kasten = tL.Field<int>("Box") }; 
```

你`MyModel`被定义为

```
public class MyModel
{
    public int TaskId { get; set; }
    public int Kasten { get; set; }
} 
```

结果，您将`IEnumerable<MyModel>`在具有已知内部结构的视图中命名，您可以在视图中使用它。希望这能解决您的问题，据我了解，这是缺乏从视图访问查询结果的能力。

# css - css 媒体查询最大设备宽度

> ID：14046580
> 
> 赞同：1
> 
> 时间：2012-12-26T21:39:10.393
> 
> 标签：css, media-queries

如果我有 max-device-width 的 css 3 媒体查询，当设备的方向改变时，这会改变吗？

例如，如果 iPhone 从纵向变为横向，max-device-width 会发生变化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:44:20.360

这不同于 iPhone、iPad 等其他设备。对于 Apple 产品，这些`device-width`值保持不变，但对于其他设备更改方向可能会导致应用其他规则。

最可靠的方法是使用`min`/`max-width`而不是`min`/ `max-device-width`。这些取决于视口的大小，并且跨设备是一致的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:44:27.613

它不会改变方向

```
@media screen and (orientation:portrait) {
/* Portrait styles */
}
@media screen and (orientation:landscape) {
/* Landscape styles */
} 
```

# c# - 为 Treenode 创建一个列表

> ID：14046584
> 
> 赞同：7
> 
> 时间：2012-12-26T21:39:40.287
> 
> 标签：c#, asp.net-mvc, list, extjs4, treenode

我知道这一定很容易，但我无法让它工作......我正在尝试通过比较来自不同行的两列并将它们相应地放置为节点或叶子来为 extjs 树创建一个列表。这是我的样本数据

```
ListA  ListB  labelName
 NY           Parent1
        NY    Leaf1
 HI           Parent2
 AK           Parent3 
```

这是我的 c# 结束...所以当我匹配 NY 时，我应该将 Parent1 作为节点，Leaf1 作为它的叶子，而不是 HI 或 AK...但是这样做会将我的所有数据都作为 Parent.. 甚至叶子。

```
 SqlCommand cmd = con.CreateCommand();

            comd.CommandText = "SELECT * FROM myTable";
            con.Open();
            SqlDataReader reader = comd.ExecuteReader();
            while (reader.Read())
            {
                City MyData = new City();

                MyData.ListA = reader["ListA"].ToString().Trim();
                MyData.ListB = reader["ListB"].ToString().Trim();
                MyData.labelName = reader["labelName"].ToString().Trim();
                giveData.Add(MyData);
            }

            int count = 1;

            List<TreeNode> myNode = new List<TreeNode>();
            foreach (City MyData in giveData)
            {
                // 1st foreach
                    if (MyData.ListA != "")
                    {

                        TreeNode treeNode = new TreeNode();
                        treeNode.id = count++;
                        treeNode.name = MyData.labelName;
                        treeNode.leaf = false;

                        List<TreeNode> Level1 = new List<TreeNode>();
                        foreach (City labelName  in giveData)
                        {
                            if (labelName.ListA == labelName.ListB)
                            {// 2nd foreach
                                TreeNode node1 = new TreeNode();
                                node1.id = count++;
                                node1.name = labelName.labelName;
                                node1.leaf = true;

                                Level1.Add(node1);
                            }
                        }

                        treeNode.children = Level1;
                        myNode.Add(treeNode);
                }
            }
            return JsonConvert.SerializeObject(myNode); 
```

我是否应该使用数组来存储每条记录并比较它们...我没有想法...我相信有更好的方法来完成这个...请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T21:56:18.007

假设数据是您陈述的方式，并且“父母”将在任何叶子之前出现，这是我想出的创建树的单通道方式：

*[无关代码被剪断]*

**更新：LINQ 使用`Dictionary<string, List<TreeNode>>`**

我创建了一个新类 TreeNode 和一些用于测试的示例数据：

```
var MyData = new List<City>
                  {
                     new City {ListA = "AK", ListB = "", labelName = "Alaska"},
                     new City {ListA = "HI", ListB = "", labelName = "Hawaii"},
                     new City {ListA = "", ListB = "HI", labelName = "Hawaii Leaf 1"},
                     new City {ListA = "", ListB = "HI", labelName = "Hawaii Leaf 2"},
                     new City {ListA = "NY", ListB = "", labelName = "New York"},
                     new City {ListA = "", ListB = "NY", labelName = "New York Leaf 1"},
                     new City {ListA = "", ListB = "NY", labelName = "New York Leaf 2"}
                  }; 
```

这是基本上创建2个列表的新方法，1个用于父母，1个用于叶子。然后我遍历叶子以找到任何匹配的父母并将叶子添加到其中：

```
var index = 0;
var parents = (from p in MyData
               where p.ListB == ""
               select p).ToDictionary(p => p.ListA, p => new TreeNode { id = index++, name = p.labelName, leaf = false });

var leaves = (from l in MyData
              where l.ListA == ""
              group l by l.ListB into stateGroup
              select stateGroup).ToDictionary(g => g.Key, g => g.ToList());

foreach (var leaf in leaves.Where(leaf => parents.ContainsKey(leaf.Key)))
{
    parents[leaf.Key].children =
        leaf.Value.Select(l => new TreeNode {id = index++, name = l.labelName, leaf = true}).ToList();
}

var myNode = parents.Select(p => p.Value).ToList();

return JsonConvert.SerializeObject(myNode); 
```

我认为这应该比使用列表和`List.Find()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T22:09:59.473

你最好的选择可能是 Linq - 我创建了一个快速而肮脏的 VB.Net 解决方案，让你朝着正确的方向前进 - 主要部分是第二个 Linq 语句......

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim x As New List(Of City)

    x.Add(New City With {.ListA = "NY", .ListB = "", .Leaf = "Parent1"})
    x.Add(New City With {.ListA = "", .ListB = "NY", .Leaf = "Leaf1"})
    x.Add(New City With {.ListA = "HI", .ListB = "", .Leaf = "Parent2"})
    x.Add(New City With {.ListA = "AK", .ListB = "", .Leaf = "Parent3"})

    tv1.Nodes.AddRange((From y In x Where y.ListA <> "" Select New TreeNode With {
                                                                    .Name = y.ListA,
                                                                    .Text = y.Leaf}).ToArray)

    For Each nd As TreeNode In tv1.Nodes
        Dim Nm As String = nd.Name
        nd.Nodes.AddRange((From y In x Where y.ListB = Nm Select New TreeNode(y.Leaf)).ToArray)
    Next
End Sub 
```

简单地说，您填充父节点的第一个 ste，然后您只需遍历所有节点并使用 ListB = 节点名称的任何节点填充它们。

希望这有助于您朝着正确的方向前进

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T13:56:25.073

...我正在尝试用 C# 编写此代码，但应该这样做：

```
 int count = 1;

        List<TreeNode> myNode = new List<TreeNode>();
        foreach (City MyData in giveData)
        {
            // 1st foreach
            if (MyData.ListA != "")
            {

                TreeNode treeNode = new TreeNode();
                treeNode.id = count++;
                treeNode.name = MyData.labelName;
                treeNode.leaf = false;

                foreach (City labelName in giveData)
                {
                    if (MyData.ListA == labelName.ListB)
                    {// 2nd foreach
                        TreeNode node1 = new TreeNode();
                        node1.id = count++;
                        node1.name = labelName.labelName;
                        node1.leaf = true;

                        treeNode.Nodes.Add(node1);
                    }
                }

                myNode.Add(treeNode);
            }
        }
        return JsonConvert.SerializeObject(myNode); 
```

希望这至少能让你朝着正确的方向前进......

# javascript - 如何告诉 JavaScript 函数从 PHP while 循环中获取哪个 id？

> ID：14046588
> 
> 赞同：0
> 
> 时间：2012-12-26T21:39:58.767
> 
> 标签：javascript, jquery, html, toggle

我有一个 JavaScript 函数，它可以切换 div 以显示/隐藏，如果我只有一个切换单个 div 的链接，它就可以工作。但是我有一个 while 循环，它创建了几个这样的链接和 div，每一行一个。但只有第一个链接有效。我可以在我的 id 末尾为切换链接和 div 添加一个 $，我如何告诉 JavaScript 查找这个变量？

JavaScript：

```
$(function(){
    var id = document.getElementById();
    $('#toggleDiv').click(function(){
        $('#targetDiv').toggle();
    });
}); 
```

PHP：

```
echo "<a href=\"javascript:void(0);\" id=\"toggleDiv$ctr\">;
echo "<div id=\"targetDiv$ctr\" style=\"display:none;\">"; 
```

如您所见，$ctr 有助于个性化每个链接和 div，但我需要 java 来识别正在单击的#toggleDiv，从而允许它切换正确的#targetDiv。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:51:44.943

'如果你正确地构建你的 html 和 jQuery 选择器，你不需要所有这些元素都有自己的 ID；他们可以都共享课程。

这样的事情可以在父/子设置中起作用：

```
 $(".question").click(function() {
    $(this).parent().children(".answer").toggle();
  }); 
```

PHP

```
echo '<div class="some-parent">';
echo '<a href="javascript:void(0);" class="question">question</a>';
echo '<div class="answer" style="display:none;">';
echo 'answer';
echo '</div>'; 
```

这是一个小提琴：http: [//jsfiddle.net/VPCcZ/1/](http://jsfiddle.net/VPCcZ/1/)

或者在“下一个”情况下像这样：

```
jQuery('.question').click(function(){
    if ($(this).next().css("display") == "none") {
      $(this).next().attr('style', 'display: block !important');
    } else {
      $(this).next().attr('style', 'display: none !important');
    }
  }); 
```

PHP

```
echo '<a href="javascript:void(0);" class="question">';
echo '<div class="answer" style="display:none;">'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:46:03.963

一种幼稚且低效但可用的方法是这样的：

```
var i = 0;
while ($('#toggleDiv' + i).length) {
    (function () {
        // Copy the iteration variable, otherwise all of the links will toggle
        // the *last* targetDiv instance!
        var copy = i;

        $('#toggleDiv' + copy).click(function () {
            $('#targetDiv' + copy).toggle();
        });
    })();

    ++i;
} 
```

更好的方法是使用相同的 CSS 类标记所有切换链接 div，然后将相同的点击处理程序应用于所有这些 ( `$('.toggle-link').click(...)`)。这个处理程序应该查看目标元素的 ID 并提取数字，然后找到匹配的`targetDiv`实例并切换它。使用这种方法，您将只注册一个事件处理程序。

使用我在代码中给出的方法，您将为*每个切换 div*设置一个事件处理程序，如果您有数千个这样的链接，这可能会导致浏览器出现内存问题。对于少量的链接，它可能没问题，但如果你可能会得到很多链接，请考虑另一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T21:46:10.797

为所有 id 属性以 . 开头的链接添加点击事件监听器`toggleDiv`。在事件句柄函数中，提取 之后的子字符串`toggleDiv`，查找具有 ID 的 div`targetDiv<extracted_number>`并切换它：

```
$('a[id^=toggleDiv]').click(function() {
    var id = $(this).attr('id');
    var number = id.substring('toggleDiv'.length);
    $('#targetDiv' + number).toggle();
}); 
```

# .htaccess - .htaccess 重定向

> ID：14046591
> 
> 赞同：1
> 
> 时间：2012-12-26T21:40:13.430
> 
> 标签：.htaccess, redirect

我们正在创建一个站点复制系统，用户将能够在我们的站点上创建子域，这一切都已经开始工作了。

因此，用户可以进来创建

```
http://siteid.ourwebsite.com 
```

问题是我们还希望为用户提供他们网站的附加 URL，即：`http://ourwebsite.com/siteid`. 现在，这将与他们的子域相同。

我认为这可能的唯一方法是通过 .htaccess。

好东西...我们在根目录中只有 index.php 文件。因此，如果还有其他内容，则可以将其视为子域。

那么，我们是否可以在 .htaccess 文件中创建一个规则，如果用户尝试访问任何不以`.php`它结尾的内容，则将他们重定向到他们尝试访问的内容`http://$VAR.ourwebsite.com`？`$VAR`

这听起来可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:59:23.603

我找到了答案。

这可以完成工作。

> ```
> RewriteEngine On
> RewriteBase /
> RewriteCond %{HTTP_HOST} ^(www\.)?domain\.com
> RewriteCond %{REQUEST_FILENAME} !-d
> RewriteCond %{REQUEST_FILENAME} !-f
> RewriteRule ([a-z0-9-]+)/? http://$1.domain.com [R=301,NC,L] 
> ```

# tsql - 尝试学习 T-SQL 子查询语法

> ID：14046601
> 
> 赞同：0
> 
> 时间：2012-12-26T21:41:15.863
> 
> 标签：tsql

我是新来的，所以希望能正确发布。

我有一个 PTC_CERT_PERIOD 表，并且想要获取表中每个 PATIENT_ID 的 Max PERIOD_NO。我可以通过让我的视图查看下面的另一个视图来做到这一点：

```
SELECT TOP (100) PERCENT
    dbo.PTC_CERT_PERIOD.CERT_PERIOD_ID
,   dbo.PTC_CERT_PERIOD.PATIENT_ID
,   dbo.PTC_CERT_PERIOD.CERTIFICATION_DATE
,   dbo.PTC_CERT_PERIOD.CERT_END_DATE
,   dbo.PTC_CERT_PERIOD.PAY_SOURCE_POINTER
,   dbo.PTC_CERT_PERIOD.IS_ACTIVE
,   dbo.VW_SDH_CAS_MaxCertPeriod1.MaxCertPeriod
,   dbo.PTC_CERT_PERIOD.CREATE_DATE
FROM
    dbo.PTC_CERT_PERIOD
    INNER JOIN dbo.VW_SDH_CAS_MaxCertPeriod1
    ON dbo.PTC_CERT_PERIOD.PATIENT_ID = dbo.VW_SDH_CAS_MaxCertPeriod1.PATIENT_ID
       AND dbo.PTC_CERT_PERIOD.PERIOD_NO = dbo.VW_SDH_CAS_MaxCertPeriod1.MaxCertPeriod 
```

但在我看来，我应该能够编写一个子查询来做同样的事情，但我无法为子查询找到正确的语法。我已经尝试了几个小时，我最近失败的迭代是：

```
SELECT
    CERT_PERIOD_ID
,   PATIENT_ID
,   CERTIFICATION_DATE
,   CERT_END_DATE
,   PAY_SOURCE_POINTER
,   IS_ACTIVE
,   CREATE_DATE
,   PERIOD_NO
FROM
    dbo.PTC_CERT_PERIOD
WHERE
    (PERIOD_NO IN 
        (
            SELECT
                PATIENT_ID AS MaxPtID
            ,   MAX(PERIOD_NO) AS MaxCertPeriod
            FROM
                dbo.PTC_CERT_PERIOD AS PTC_CERT_PERIOD_1
        )
    ) 
```

似乎我尝试的任何操作都会收到一条错误消息，例如“列 dbo.PTC-CERT_PERIOD.PATIENT_ID 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。只能在当子查询没有与 EXISTS 一起引入时的选择列表。我玩过几个 EXISTS statemsnts，如果他们运行结果很差，列出患者的所有 PERIOD_NO，而不仅仅是 Max。任何人都可以指出我正确的轨道上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:48:45.523

当子查询用作表时，它们需要一个别名...只需添加任何内容...我通常使用 Z

```
SELECT  CERT_PERIOD_ID,  PATIENT_ID,  CERTIFICATION_DATE,   
   CERT_END_DATE, PAY_SOURCE_POINTER, IS_ACTIVE, 
   CREATE_DATE, PERIOD_NO
FROM dbo.PTC_CERT_PERIOD
WHERE PERIOD_NO IN 
    (SELECT PATIENT_ID MaxPtID,  
           MAX(PERIOD_NO) MaxCertPeriod
     FROM dbo.PTC_CERT_PERIOD) Z 
```

# iphone - 如何隐藏表格编辑模式||| 图标

> ID：14046608
> 
> 赞同：0
> 
> 时间：2012-12-26T21:41:44.847
> 
> 标签：iphone, ios

我正在使用带有自定义可重新排序单元格的表格，当将单元格设置为编辑模式时，单元格右侧会出现一个 3 行图标。我需要在不显示默认“拖动”图标的情况下订购单元格；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T21:44:21.590

要隐藏重新排序图标，请将UITableViewCell 上的[showsReorderControl](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/occ/instp/UITableViewCell/showsReorderControl)设置为 NO。如果你想重新排序工作，你必须实现一些东西。

相反，如果您想将重新排序图标更改为其他图标，请参阅此[SO answer](https://stackoverflow.com/questions/8603359/change-default-icon-for-moving-cells-in-uitableview/8603664#8603664)。

# ruby-on-rails - 检查是否返回 csv

> ID：14046610
> 
> 赞同：2
> 
> 时间：2012-12-26T21:41:52.030
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我会一个复选框，如果检查将返回 csv 和 html，否则。我关注这个视频并让 csv 工作 [http://railscasts.com/episodes/362-exporting-csv-and-excel?autoplay=true](http://railscasts.com/episodes/362-exporting-csv-and-excel?autoplay=true)

现在我有一个要与表单一起提交的 check_box_tag。如果复选框被选中，那么它应该呈现 csv。

```
=form_tag exams_path, method: :get do
  =text_field_tag :search, params[:search]
  =check_box_tag "csv"
  = submit_tag "Search by id", name: nil 
```

在控制器内部它有

```
...
params[:format] = "csv" if params[:csv]
respond_to do |format|
  format.html
  format.csv {render text:@exams.to_csv}
end
... 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:57:32.657

多亏了约翰，我才弄明白。

我需要：

```
request.format = :csv if params[:csv] 
```

而不是我原来的

```
params[:format] = "csv" if params[:csv] 
```

不知道更改格式是否是最好的方法，但这正是我所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T22:14:32.297

你可以这样做：

```
if params[:csv]
  render text:@exams.to_csv
else
  render
end 
```

# ruby-on-rails - 自定义 database.com 对象 ( ..."__c") 和 databasedotcom-rails

> ID：14046613
> 
> 赞同：1
> 
> 时间：2012-12-26T21:42:00.113
> 
> 标签：ruby-on-rails, ruby, databasedotcom-gem

我们正在尝试使用 databasedotcom 和 databasedotcom-rails gem 将现有的 RoR 应用程序移动到 database.com 和 heroku。但是，在 database.com 上，自定义对象的 API 名称必须以“__c”结尾，我们发现这破坏了现有代码，尤其是使用 simple_forms gem 的代码。许多领域假设模型的名称与对象的类名相同，我们未能成功地将模型名称更改为以“__c”结尾。有什么建议么？

# php - JSON 结尾问题

> ID：14046614
> 
> 赞同：0
> 
> 时间：2012-12-26T21:42:04.393
> 
> 标签：php, javascript, jquery, html, cordova

您好我正在使用 phonegap 开发一个移动应用程序，我正在通过 ajax (jsonp) 查询 MySQL 数据库。但是，当返回特殊字符时出现问题，因为它们显示为“？” 取而代之的是例如Ż。

目前在我的 PHP 中我已经添加了这个，但是它并没有成功： `header('content-type: application/json; charset=UTF-8');`

是否有人知道可以使用的任何其他字符集，其中包括上述特殊字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T06:43:50.577

第一件事是第一

a）修复数据库表确保使用正确的字符集定义的表，例如

```
CREATE TABLE `types` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=0 DEFAULT CHARSET=utf8 
```

b）连接到数据库后，确保以下事项

[设置名称'utf8';](https://stackoverflow.com/questions/2159434/set-names-utf8-in-mysql)

[我也跟着跑]

```
 SET  character_set_client  ='utf8',
 character_set_connection ='utf8',
 character_set_database  ='utf8',
 character_set_results   ='utf8',
 character_set_server    ='utf8',
 collation_connection    ='utf8_general_ci',
 collation_database      ='utf8_general_ci',
 collation_server        ='utf8_general_ci' 
```

c) 最后[为 html 页面设置正确的内容类型](https://stackoverflow.com/questions/10460349/charset-utf8-not-working-in-my-php-page)

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:51:04.913

您正在使用 MySQL 数据库？因此，尝试为数据库连接设置一个 utf8 字符集，例如：

```
$conn = mysql_connect('localhost','user1','pass1',TRUE); 
mysql_set_charset('utf8',$conn); 
```

或者尝试 UTF-8 编码

```
string utf8_encode ( string $data ) 
```

**参数：**

```
data
An ISO-8859-1 string. 
```

**返回值：**

```
Returns the UTF-8 translation of data. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T06:06:32.030

根据 JSON 实现标准，所有 JSON 数据必须以 UTF 格式编码，默认格式为 UTF-8。但您始终可以使用其他 UTF 格式，例如 UTF-32BE、UTF-16BE、UTF-32LE、UTF-16LE。

有关详细标准和信息，请访问[ietf 标准](http://www.ietf.org/rfc/rfc4627.txt "官方网站")。

# actionscript-3 - AS3 - 如何绘制和对齐一个圆？

> ID：14046615
> 
> 赞同：2
> 
> 时间：2012-12-26T21:42:11.477
> 
> 标签：actionscript-3

我想画一个圆圈并将其居中对齐。我的代码没有这样做：

```
var circle:Shape = new Shape(); // The instance name circle is created
circle.graphics.beginFill(0x990000, 1); // Fill the circle with the color 990000
circle.graphics.lineStyle(2, 0x000000); // Give the ellipse a black, 2 pixels thick line
circle.graphics.drawCircle((stage.stageWidth - 100) / 2, (stage.stageHeight - 100) / 2, 100); // Draw the circle, assigning it a x position, y position, raidius.
circle.graphics.endFill(); // End the filling of the circle
addChild(circle); // Add a child 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T22:52:28.527

```
drawCircle((stage.stageWidth - 100) / 2, (stage.stageHeight - 100) / 2, 100); 
```

[drawCircle](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html#drawCircle%28%29)的前两个参数是*圆心*的 X 和 Y 位置，而不是圆的左上角位置。

如果你想让你的圆圈在舞台的中心，你只需要把圆圈的中心放在同一个位置，所以你可以这样调用 drawCircle：

```
drawCircle(stage.stageWidth / 2, stage.stageHeight / 2, 100); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T04:18:29.867

我认为您的方法虽然可行，但只会使您的形状变得更加困难。

考虑这种方法：

```
var circle:Shape = new Shape();
circle.graphics.clear();
circle.graphics.lineStyle(2,0x000000);
circle.graphics.beginFill(0x990000);
circle.graphics.drawCircle(0,0,100);
circle.graphics.endFill();
addChild(circle);
circle.x = stage.stageWidth / 2;
circle.y = stage.stageHeight/ 2; 
```

通过在形状中以 0,0 位置为中心绘制圆，然后通过 x 和 y 属性放置它是一种更好的方法。假设你想移动那个圆圈？试图找出偏移量将是一场噩梦。

# javascript - 突出显示包含日期的 div

> ID：14046616
> 
> 赞同：0
> 
> 时间：2012-12-26T21:42:21.150
> 
> 标签：javascript, jquery

如果其中包含日期，我正在尝试编写更改 div 的颜色的代码（使用“carrythatweight”类）。

这是我正在使用的 HTML：

```
<div class="carrythateright">groan...</div>
<div class="carrythateright">what in the world is going on !!!</div>
<div class="carrythateright">stackoverflow is SO helpful. It is now 12/26/2012 !!!!</div>​ 
```

这是我正在使用的脚本，但它并没有真正起作用：

```
var currentTime = new Date()
var month = currentTime.getMonth() + 1
var day = currentTime.getDate()
var year = currentTime.getFullYear()

$(document).ready(function() {
    $(".carrythatweight:contains('' + month + '/' + day + '/' + year +'')").css("color", "#00bbbb");
});​ 
```

这是[**小提琴**](http://jsfiddle.net/37tR5/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T21:48:05.337

[http://jsfiddle.net/37tR5/2/](http://jsfiddle.net/37tR5/2/)

我在您的代码中进行了两个修复以使其正常工作：

1）我用双引号替换了一些单引号，以便选择器按预期进行插值：比较（原始）

```
"...'' + month + '/' + day + '/' + year +'')" 
```

与（固定）

```
"...'" + month + "/" + day + "/" + year +"')" 
```

2）我修改了选择器中的类以匹配`div`s中的类。

# python - TypeError：“列表索引必须是整数”在python中循环遍历元组

> ID：14046621
> 
> 赞同：1
> 
> 时间：2012-12-26T21:42:49.267
> 
> 标签：python, oracle, oracle11g, tuples

我是python新手，所以希望这个问题可以很容易地回答。

我正在从 Oracle 11g 中提取一个元组，然后想使用 for 循环从中创建矩阵。但是，我收到一条错误消息：

```
TypeError: list indices must be integers, not tuple 
```

我究竟做错了什么？代码如下：

```
import cx_Oracle
con = cx_Oracle.connect('xxx')
print con.version
cur = con.cursor()
cur.execute("select zc.latitude, zc.longitude from  orders o, zip_code zc where     o.ship_date> '24-DEC-12' and TO_CHAR(zc.ZIP_CODE)=o.CONSIGNEE_POSTAL_CODE")

output = cur.fetchall()
cur.close()
con.close()

latitudes=[]
longitudes=[]

for i in output:
    latitudes[i]=output[i][0]
    longitudes[i]=output[i][1] 
```

我想要的最终结果是将元组分成两个数组，一个带有纬度，一个带有经度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T21:44:25.227

您正在遍历结果行，而不是一系列数字。用于`.append()`添加项目，`latitudes`而`longitudes`不是：

```
for i in output:
    latitudes.append(i[0])
    longitudes.append(i[1]) 
```

循环获取的`for`每一项`output`并将其分配给变量`i`，`i`结果行元组也是如此，而不是整数。如果重命名变量可能更容易理解：

```
for row in output:
    latitudes.append(row[0])
    longitudes.append(row[1]) 
```

如果您的结果行每行仅包含 2 列，您还可以使用`zip()`技巧将列拆分为单独的列表：

```
latitudes, longitudes = zip(*output) 
```

`*output`意思是：将每个元素`output`作为一个单独的参数应用到`zip()`内置函数，所以`zip()`用`zip(output[0], output[1], output[2], ...)`. `zip()`从这些单独的行中获取每个元素，并将它们组合到新的输出列表中。每行两列意味着`zip(*output)`产生两个输出列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T21:45:05.633

您对 Python`for`循环的工作方式感到困惑 - 它循环对象而不是索引，因此您正在获取元组并尝试使用它们来索引列表。

幸运的是，如果您使用[内置功能，您尝试做的事情实际上要容易得多](http://docs.python.org/3.3/library/functions.html#zip)[，`zip()`](http://docs.python.org/3.3/library/functions.html#zip)它完全符合您的要求：

```
latitudes, longitudes = zip(*output) 
```

`zip()`可以被认为是获取数据行并返回列 - 它返回每个输入可迭代的第一项，然后是第二项，等等......例如：

```
>>> list(zip([1, 2, 3], ["a", "b", "c"]))
[(1, 'a'), (2, 'b'), (3, 'c')] 
```

这恰好是您想要的。在这种情况下，我们使用`*`操作符解包`output`作为输入迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T21:44:56.380

```
for i in output:
    latitudes[i]=output[i][0]
    longitudes[i]=output[i][1] 
```

应该...

```
for tup in output:
    latitudes.append(tup[0])
    longitudes.append(tup[1]) 
```

因为遍历元组列表时得到的东西是单个元组，而不是列表中的索引。

但是，正如 Lattyware 所提到的，您可以简单地使用`zip()`您的输出。

# python - Python猴子补丁私有函数

> ID：14046623
> 
> 赞同：7
> 
> 时间：2012-12-26T21:43:38.047
> 
> 标签：python, monkeypatching

我有一个带有函数（调用它`a()`）的模块，它调用同一模块中定义的另一个函数（调用它`__b()`）。 `__b()`是一个与网站对话`urllib2`并获取一些数据的功能。现在我正在尝试测试`a()`，但当然希望我的单元测试不与公共互联网对话。因此，我在想如果我可以`__b()`用一个返回罐头数据的函数进行修补，然后我可以为`a()`.

更具体地说，我的模块看起来有点像：

```
def a():
    return __b("someval")

def __b(args):
    return something_complex_with_args 
```

所以现在我想测试`a()`，但我需要猴子补丁`__b`。问题是 A）关于猴子补丁的绝大多数信息适用于类的方法，而不是模块中的函数，并且 B）我想要猴子补丁的函数是私有的。如果它使过程更可行，我愿意改变`__b`为非私人，但宁愿不这样做。

建议？

编辑：就目前而言，测试类看起来像：

```
from unittest import TestCase

import mymodule

def newfn(args):
    return {"a" : "b"}

mymodule._b = newfn

class TestMyModule(TestCase):
    def test_basic(self):
        print(mymodule.a('somearg')) 
```

当我运行它时，如果猴子补丁根本没有完成，我会看到输出，而不是看到`{'a': 'b'}`打印出来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-19T18:05:17.810

我似乎无法重现您的问题（我已经稍微调整了您的示例，因为它根本没有按原样运行）。你是不是打错了一些东西（比如`mymodule._b`代替`mymodule.__b`）？

**mymodule.py**：

```
def a(x):
    return __b("someval")

def __b(args):
    return "complex_thingy: {}".format(args) 
```

**mytest.py**：

```
from unittest import TestCase

import mymodule

def newfn(args):
    return {"a" : "b"}

mymodule.__b = newfn

class TestMyModule(TestCase):
    def test_basic(self):
        print(mymodule.a('somearg')) 
```

**输出**：

```
C:\TEMP>python -m unittest mytest
{'a': 'b'}
.
----------------------------------------------------------------------
Ran 1 test in 0.001s

OK

C:\TEMP> 
```

**似乎工作正常。**

* * *

或在单元测试之外：

**mytest2.py**：

```
import mymodule

def newfn(args):
    return {"a" : "b"}

mymodule.__b = newfn

print(mymodule.a('somearg')) 
```

**输出**：

```
C:\TEMP>python mytest2.py
{'a': 'b'}

C:\TEMP> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T21:52:13.963

如果您的模块被命名为“foo”，那么以下应该可以工作。

```
import foo

def patched_version():
    return 'Hello'

foo.__b = patched_version

print (foo.a()) 
```

foo.py 在哪里

```
def a():
    return __b()

def __b():
    return 'Goodbye' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:12:56.427

我面临同样的问题，但最终得到了解决方案。问题是在 unittest.TestCase 类中使用猴子补丁时。这是工作正常的解决方案：

如果您使用的是 Python 2，则需要使用 easy_install 或其他方式安装“模拟”库 (http://www.voidspace.org.uk/python/mock/)。该库已经与 Python 3 捆绑在一起。

代码如下所示：

```
from mock import patch

    class TestMyModule(TestCase):
        def test_basic(self):
            with patch('mymodule._b') as mock:
                mock.return_value={"a" : "b"} # put here what you want the mock function to return. You can make multiple tests varying these values.
                #keep the indentation. Determines the scope for the patch.
                print(mymodule.a('somearg')) 
```

虽然与制作模拟函数相比，这种方式显然不太方便，我们可以模拟实际的子函数 _b()，它具有基于不同参数返回不同值的逻辑，但随后我们不必要地增加了更多出错的机会。在这种方法中，我们只是硬编码我们希望我们的模拟函数返回并测试我们开始测试的实际函数，即 a()。

# php - 如何在不使用 array_count_values 的情况下查找数组中的重复值

> ID：14046624
> 
> 赞同：0
> 
> 时间：2012-12-26T21:43:44.383
> 
> 标签：php, javascript, html, arrays

我正在尝试使用`for`循环在数组中查找重复的值/字符串

```
 <?php
    $b=array('a','b','c','a','b');
    $c=count($b);
    $d=array();

    for($i=0;$i<=($c-1);$i++)
    {
        for($j=1;$j<=($c-1);$j++)
        {       

            if($b[$i]!=$b[$j])
            {       
             $flag=1;   
            }

        }

        if($flag==1)
        {
        $d[$i]=$b[$i];
        }

    }   

    print_R($d);
    ?> 
```

我的错误在哪里？我使用数组 $d 来显示非重复值.....

**注意：我****只**需要使用循环来尝试这个`for`- 我知道如何使用数组函数来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:48:38.903

您应该反转您的测试，因为几乎总是存在与您正在测试的值不同的值。并且您必须`$flag`在内部循环之前重置您的，否则它将始终为真。

当您想找到唯一值时，您可以只进行测试`$d`。如果该值已经在 中`$d`，请跳过它。

```
$c1 = count($b);
for ($i = 0; $i < $c1; $i++) {
    $dup = 0;
    $c2 = count($d);
    for ($j = 0; $j < $c2; $j++) {
        if ($b[$i] == $d[$j])
            $dup = 1;
    }

    if (!$dup)
        $d[] = $b[$i];
}

print_r($d); 
```

如果您想查找没有重复项的值

```
for ($i = 0; $i < $c; $i++) {
    $dup = 0;
    for ($j = 0; $j < $c; $j++) {
        if ($i != $j && $b[$i] == $b[$j])
            $dup = 1;
    }

    if (!$dup)
        $d[] = $b[$i];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:49:00.237

```
function has_dupes($array){
    $dupe = array();

    foreach($array as $val){
         if(++$dupe[$val] > 1)
             return true;
    }
    return false;
 } 
```

可以做这样的事情..这将检查欺骗，然后你可以打印唯一

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-26T21:48:59.363

你为什么要把一个简单的任务复杂化..简单

```
$b = array('a','b','c','a','b');
var_dump(customCount($b)); 
```

输出

```
array (size=3)
  'a' => int 2 //duplicate 
  'b' => int 2 //duplicate 
  'c' => int 1 
```

使用的功能

```
function customCount($array) {
    $temp = array();
    foreach ( $array as $v ) {
        isset($temp[$v]) or $temp[$v] = 0;
        $temp[$v] ++;
    }

    return $temp ;
} 
```

# java - 一种使用 Maven 构建工具在 Java 项目中将 plsql 部署到 Oracle 的方法

> ID：14046636
> 
> 赞同：3
> 
> 时间：2012-12-26T21:45:08.780
> 
> 标签：java, oracle, maven, plsql

我加入了在 Oracle DB 中开发和存储 plsql 源的项目。

有两个源副本 - 在测试服务器和生产服务器上。所以 SPOT（单点信任）规则被打破了。副本不时需要同步，并且此作业是手动执行的。

但最烦人的事情来自配置管理 - 我无法重现以前的工作项目副本，因为旧的 plsql 脚本丢失了（新版本的 API 发生了变化）。

研究完主题后，我发现了很棒的项目：[https ://code.google.com/p/plsqlmaven](https://code.google.com/p/plsqlmaven)

通过遵循[https://code.google.com/p/plsqlmaven/wiki/Basics](https://code.google.com/p/plsqlmaven/wiki/Basics)，我可以从 DB'es 转储所有 plsql 脚本（以及生产和测试之间的差异）：

```
  $ mvn plsql:extract -Dforce

```

但我坚持使用**plsql:deploy**命令（它打印有关缺少 jar 的错误，我不明白如何创建它）。我会尽快联系作者并填写一些错误报告。

但我希望社区已经解决了这个项目活力的基本任务。

如何在 Java 项目中将 plsql 脚本部署到 Oracle DB（我的项目使用 Maven 构建系统）？

**PS**我在 oracle.com 上查看 SQL Developer 教程 - 我找不到如何通过一键单击来完全部署 plsql 文件层次结构。而且我更喜欢命令行解决方案...

**PPS我向****plsqlmaven**项目报告相关错误：

*   [https://code.google.com/p/plsqlmaven/issues/detail?id=4](https://code.google.com/p/plsqlmaven/issues/detail?id=4)（需要将 plsql 文件部署到 Oracle DB 的教程。）
*   [https://code.google.com/p/plsqlmaven/issues/detail?id=5](https://code.google.com/p/plsqlmaven/issues/detail?id=5)（请向 Maven 中心发布 1.11。）
*   [https://code.google.com/p/plsqlmaven/issues/detail?id=6](https://code.google.com/p/plsqlmaven/issues/detail?id=6) ( *plsql:extract*将 plsql 代码转储到 src/main/java 默认在 1.10 中)

**PPPS我在**[http://rsdn.ru/forum/java/5011849.flat](http://rsdn.ru/forum/java/5011849.flat)（俄语）上提问

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T02:31:30.843

这是我喜欢使用[flyway](http://flywaydb.org/documentation/maven/)的情况之一，因为它可以让您管理版本和脚本。

它在测试时也很方便，因为它可以让您将数据库播种到给定状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T22:21:49.303

旧的好 SQL Plus 怎么样？创建将根据需要调用其他人的主脚本，并将其从命令行传递到`sqlplus`（尽管您需要在机器上安装 Oracle 客户端）。jisql 是一个命令行 java sql 工具 - 但不要认为它有调用子脚本的选项。使用 exec 插件从 maven 运行命令相当容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T11:04:54.390

我不会深入研究：

*   [http://flywaydb.org](http://flywaydb.org)
*   [http://www.liquibase.org/](http://www.liquibase.org/)

但似乎这些项目不仅为我的问题提供了解决方案，而且为其他相关问题提供了更复杂的解决方案。

两者都有 Maven 集成和开源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-23T13:04:11.360

你应该使用 plsql:compile 而不是 plsql:deploy:

```
mvn -Pyourdbprofile plsql:compile 
```

ps：如果您需要一种部署存档的方法，请查看[par 。](https://github.com/aaaristo/par)

# mysql - MySQL 多个 Where 子句

> ID：14046637
> 
> 赞同：27
> 
> 时间：2012-12-26T21:45:14.240
> 
> 标签：mysql, sql, where-clause

我有一张这样的桌子：

```
id  image_id  style_id  style_value
-----------------------------------
1   45        24        red
1   45        25        big
1   47        26        small
1   45        27        round
1   49        28        rect 
```

如果出现以下情况，我想使用 image_id 列：

*   `style_id = 24`和`style_value = red`
*   `style_id = 25`和`style_value = big`
*   `style_id = 26`和`style_value = round`

我做了这样的查询：

```
$query = mysql_query("SELECT image_id FROM list WHERE (style_id = 24 AND style_value = 'red') AND (style_id = 25 AND style_value = 'big') AND (style_id = 27 AND style_value = 'round') 
```

但我无法得到任何结果。当我用 OR 制作这个样本时，它运行良好。但我必须用 AND 来做到这一点。因为我需要既是“红色，又大又长”的图像 id。

我用谷歌做了很多搜索，但没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-26T22:52:18.400

我认为您在此之后：

```
SELECT image_id
FROM list
WHERE (style_id, style_value) IN ((24,'red'),(25,'big'),(27,'round'))
GROUP BY image_id
HAVING count(distinct style_id, style_value)=3 
```

您不能使用 AND，因为值不能在同一行中同时是`24 red`and `25 big`，但您需要检查多行中的存在，在相同的.`27 round``style_id, style_value``image_id`

在此查询中，我使用 IN（在此特定示例中，它等效于 OR），并且我正在计算匹配的不同行。如果 3 个不同的行匹配，这意味着所有 3 个属性都存在`image_id`，我的查询将返回它。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-26T23:48:37.580

```
SELECT a.image_id 
FROM list a
INNER JOIN list b
   ON a.image_id = b.image_id
   AND b.style_id = 25
   AND b.style_value = 'big'
INNER JOIN list c
   ON a.image_id = c.image_id
   AND c.style_id = 27
   AND c.style_value = 'round'
WHERE a.style_id = 24 
   AND a.style_value = 'red' 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-26T22:41:18.553

你永远不会得到结果，这是一个简单的逻辑错误。

您要求您的数据库返回具有`style_id = 24 AND style_id = 25 AND style_id = 26`. 由于 24 既不是 25 也不是 26，所以你不会得到任何结果。

您必须使用`OR`，然后它才有意义。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-26T22:40:32.067

这可能是您所追求的，尽管取决于有多少 style_id，实现起来会很棘手（不确定这些 style_id 是否是静态的）。如果是这种情况，那么您想要的实际上是不可能的，因为 WHERE 子句逐行工作。

```
WITH cte as (
  SELECT
    image_id,
    max(decode(style_id,24,style_value)) AS style_colour,
    max(decode(style_id,25,style_value)) AS style_size,
    max(decode(style_id,27,style_value)) AS style_shape
  FROM
    list
  GROUP BY
    image_id
)
SELECT
  image_id
FROM
  cte
WHERE
  style_colour = 'red'
  and style_size = 'big'
  and style_shape = 'round' 
```

[http://sqlfiddle.com/#!4/fa5cf/18](http://sqlfiddle.com/#!4/fa5cf/18)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T01:23:44.127

```
select unique red24.image_id from 
( 
    select image_id from `list` where style_id = 24 and style_value = 'red' 
) red24
inner join 
( 
    select image_id from `list` where style_id = 25 and style_value = 'big' 
) big25
on red24.image_id = big25.image_id
inner join 
( 
    select image_id from `list` where style_id = 27 and style_value = 'round' 
) round27
on red24.image_id = round27.image_id 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-16T07:01:52.913

可能使用此查询您没有得到任何结果或空结果。您需要在查询中使用`OR`而不是，`AND`如下所示。

```
$query = mysql_query("SELECT image_id FROM list WHERE (style_id = 24 AND style_value = 'red') OR (style_id = 25 AND style_value = 'big') OR (style_id = 27 AND style_value = 'round'); 
```

试试这个查询。

# html - 居中 CSS3 形状

> ID：14046638
> 
> 赞同：2
> 
> 时间：2012-12-26T21:45:15.217
> 
> 标签：html, css, css-shapes

我正在尝试将一个锚标记居中，该标记在 div 中显示为 CSS3 形状（一个大的“播放”箭头）。

我的标记如下：

```
<div class="element halfcol">
    <div class="inner beige-bg fullheight">
        <div class="element-content">                       
            <a href="#" class="play-button"></a>                            
         </div>
     </div>
 </div> 
```

CSS是：

```
.element {
   float: left;
   margin-right: 20px;
   margin-bottom: 20px;
 }
.element .inner {
   border: 2px solid #94111e;
   min-height: 50px;
   border-radius: 10px;
   background-color: #fcf9e3;
   height: inherit;
  -moz-box-shadow: 2px 2px 6px #646464;
  -webkit-box-shadow: 2px 2px 6px #646464;
  box-shadow: 2px 2px 6px #646464;
}
.element .inner .element-content {
  padding: 10px 15px;
  height: inherit;
}
.element .inner .no-padding {
  padding: 0px;
}
.element .beige-bg {
  background-color: #fcf9e3;
}
.element .red-bg {
  background-color: #94111e;
}
.element .transparent-bg {
  background-color: transparent;
}
.element .white-bg {
   background-color: #ffffff;
 }
 .element .smallheight,
 .element .doubleheight,
 .element .fullheight {
    overflow-y: hidden;
 }
 .element .smallheight {
    height: 90px;
  }
 .element .doubleheight {
    height: 220px;
  }
 .element .doubleheight .element-content {
   position: relative;
 }
 .element .fullheight {
    height: 350px;
 }
 .element .no-padding {
   padding: 0px !important;
 }
 /**** Shapes ****/
 .play-button {
   display: block;
   margin: 0 auto;
   border-left: 100px solid #94111e;
   border-top: 60px solid transparent;
   border-bottom: 60px solid transparent;
} 
```

这给了我这个：

![在此处输入图像描述](../Images/9eb6e26154911d4d5da984333466bf5a.png)

我正在寻找的是这个：

![在此处输入图像描述](../Images/e1a50dc863f4d3a70bf06a9fe71fb559.png)

我可以给它一个顶部/左侧边距以使其居中，但`.element`容器的高度和宽度是可变的。

任何人都知道如何实现这一目标？:-)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T22:14:51.930

你需要`.element-content`先做`position:relative`然后

添加

```
 position:absolute;
   top:50%;
   left:50%;
   margin-top:-60px;
   margin-left:-50px; 
```

到`.play-button`

演示在[http://jsfiddle.net/jKs6F/](http://jsfiddle.net/jKs6F/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:18:54.297

我改变了你的`.play-button`班级如下：

```
.play-button {
   display: block;
   margin: 0 auto;
   border-left: 100px solid #94111e;
   border-top: 60px solid transparent;
   border-bottom: 60px solid transparent;

   margin-left: -50px;  /* half border-left value */
   margin-top: -60px; /* border-top value */
   position: relative; left: 50%; top: 50%;
}​​​​​​​​​​​​​​​​​​ 
```

## [看演示](http://jsfiddle.net/k6P78/)

# xml - javax.xml.bind.UnmarshalException：意外元素（uri：“”，本地：“sRAssignments”）。预期的元素是

> ID：14046647
> 
> 赞同：2
> 
> 时间：2012-12-26T21:46:25.080
> 
> 标签：xml, jaxb, bind, unmarshalling

SRAssignments.java（包装类）：

```
@XmlRootElement
@XmlType(propOrder = {})
public class SRAssignments
{

@XmlElement(name = "srAssignments", type = SRAssignment.class) private     
List<SRAssignment> srAssignments = new ArrayList<SRAssignment>();

public SRAssignments()
{
}

@SuppressWarnings("javadoc")
public SRAssignments(List<SRAssignment> srAssignments)
{
    this.srAssignments = srAssignments;
}

@SuppressWarnings("javadoc")
public List<SRAssignment> getAssignments()
{
    return this.srAssignments;
}

@SuppressWarnings("javadoc")
public void setAssignments(List<SRAssignment> srAssignments)
{
    this.srAssignments = srAssignments;
} 
```

}

客户端代码：

```
 StringBuilder getAssignmentsResponse = 
(StringBuilder) RestClientUtil.sendGetMethod(urlGetAssignments
                + URLEncoder.encode(technician, "UTF-8"));
      Unmarshaller unmarshaller =  RestClientUtil.getUnmarshaller(SRAssignments.class);
      reader = new StringReader(new String(getAssignmentsResponse));
      assignments = (SRAssignments) unmarshaller.unmarshal(reader); 
```

getAssignmentsResponse 中的 XML 内容显示：

```
<?xml version="1.0" encoding="UTF-8"?><sRAssignments><srAssignment><assignedBy><bonus>0.0</bonus><commission>0.0</commission><educationLevel>1</educationLevel><email>email1@test.com</email><empNo>RMGR1</empNo><firstName>first1</firstName><lastName>last1</lastName><role>manager</role><salary>0.0</salary></assignedBy><assignedOn>2012-12-26T14:09:41.763-08:00</assignedOn><comment>remote agent assigning a request...</comment><employee><bonus>0.0</bonus><commission>0.0</commission><educationLevel>1</educationLevel><email>email1@ge.com</email><empNo>TN1</empNo><firstName>first1</firstName><lastName>last1</lastName><role>technician</role><salary>0.0</salary></employee><serviceRequest><customer><city>city1</city><companyName>companyName1</companyName><custNo>RCN1</custNo><email>email1@ge.com</email><firstName>first1</firstName><gender>F</gender><lastName>last1</lastName><midInit>K</midInit><phone>4082229871      </phone><state>CA</state><streetAddress>streetAddress1</streetAddress><title>S   </title><zipCode>zipCode   </zipCode></customer><dateCreated>2012-12-26T14:09:38.678-08:00</dateCreated><description>Stress testing, customer is submitting a service request for some repair request.10Request by: Thread-1</description><srNo>107824</srNo><status>2</status></serviceRequest><sraId>34974</sraId><status>1</status></srAssignment></sRAssignments> 
```

## 例外 ：

```
 javax.xml.bind.UnmarshalException: unexpected element (uri:"", local:"sRAssignments"). Expected elements are <{}customer>,<{}customerSurvey>,<{}employee>,<{}serviceRequest>,<{}srAssignment>,<{}srAssignments>,<{}surveyResponse>
        at 
com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:662)
        at com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:258)
        at com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:253)
        at com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportUnexpectedChildElement(Loader.java:120)
        at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext$DefaultRootLoader.childElement(UnmarshallingContext.java:1063)
        at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext._startElement(UnmarshallingContext.java:498)
        at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.startElement(UnmarshallingContext.java:480)
        at com.sun.xml.bind.v2.runtime.unmarshaller.SAXConnector.startElement(SAXConnector.java:150)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:501)
        at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:400)
        at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:626)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3104)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:921)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:647)
        at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
        at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
        at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:217)
        at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:189)
        at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:137)
        at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:194)
        at com.ge.dsp.iworkRemote.remoteAgents.TechnicianRemoteAgent.getAssignmentsByEmployee(TechnicianRemoteAgent.java:134)
        at com.ge.dsp.iworkRemote.remoteAgents.TechnicianRemoteAgent.execute(TechnicianRemoteAgent.java:86)
        at com.ge.dsp.iworkRemote.remoteAgents.TechnicianRemoteAgent$TechnicianAgentRunner.run(TechnicianRemoteAgent.java:256)
        at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T22:36:14.057

下面注释上的案例与从响应中读取的 xml 不同。

@XmlElement(name = **"srAssignments"** , type = SRAssignment.class)

检查你的情况。您最后的注释可能应该如下所示。

```
@XmlElement(name = "sRAssignments", type = SRAssignment.class) 
```

# rabbitmq - 队列被自动删除时是否可以响应？

> ID：14046648
> 
> 赞同：-1
> 
> 时间：2012-12-26T21:46:26.843
> 
> 标签：rabbitmq

如果您将`x-expires`队列设置为在一段时间未使用时自动删除队列，是否可以通过任何方式通知该事件？当以这种方式删除队列时，我想采取一些清理措施。理想情况下，通过将消息发布到我可以使用的某个交换/队列。

供[参考](http://www.rabbitmq.com/ttl.html)，`x-expires`使用队列：

> 控制队列在自动删除之前可以使用多长时间的`x-expires`参数。`queue.declare`未使用意味着队列没有消费者，队列没有被重新声明，basic.get 至少在过期期间没有被调用。服务器保证队列将被删除，如果至少在到期期间未使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T22:19:35.400

AFAIK, there is no built-in way to do this on the RabbitMQ-side. You would need to use the API to get a list of queues, and then compare snapshots of this list over time.

I can't think of a scenario where it would be useful to know when a queue is auto-deleted. In my view, that is already an automatic resource cleanup feature. Who would want to know about this event (client or server)? How would you expect to recover if you somehow "missed" one of these notifications? Perhaps there is a better, more deterministic way of achieving your goals.

Would you be able to provide your use-case, so possibly a more useful alternative solution can be suggested?

# reporting-services - SSAS 列计算最佳实践

> ID：14046651
> 
> 赞同：0
> 
> 时间：2012-12-26T21:46:53.450
> 
> 标签：reporting-services, ssas

我的目标是按客户细分并确定主题通过的百分比。

所以我的维度是： DimCustomer：CustomerID、CustomerName、State DimSubject：SubjectID、Subject、Category DimDate：DateKey、Year、Quarter、Month FactTestResults：TestID、CustomerID、SubjectID、DateKey、Result（通过或失败）

在数据仓库、SSAS 或 SSRS 中计算我的通过率是否更有意义？如果是 SSAS 或 SSRS，我该如何实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:46:14.670

从您的多维数据集细分来看，结果看起来像是“通过/失败”值而不是值。您将必须持有及格百分比或更通用的分数和科目最高分数（例如 59 / 70），以便您可以计算出及格百分比。如果您保留实际分数，您可以计算出所有科目的通过百分比或某个科目内所有客户的百分比。

我会向 SSAS 添加一个计算度量来计算百分比，同时将所有逻辑保留在多维数据集中。这样做的好处是将所有逻辑保留在多维数据集中，允许您使用所有客户端工具（例如 Excel、SSMS）的百分比。这还具有传输更少数据的好处，因为只有最终的 % 值将传递到 SSRS 服务器，而不是实际和主题的最高分数。

# java - 删除电子邮件地址中的无效字符

> ID：14046657
> 
> 赞同：2
> 
> 时间：2012-12-26T21:47:58.690
> 
> 标签：java, regex, string, email

我正在尝试找出如何删除电子邮件地址中的所有无效字符。

例如：email="taeo͝';st@yy.com"（. 是一个电子邮件字符），结果应该是：email = "taest@yy.com"

我正在使用以下电子邮件模式：

```
String email_pattern = "^[^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@"+ "[A-Za-z0-9-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$]";

String modifiedEmail = email.replaceAll(email_pattern,""); 
```

但是上面的代码给出了结果：email = "aest@yy.com" but expected "taest@yy.com"

任何建议或更好的方法将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-26T21:52:52.637

这是一篇很好的博客文章，说明了为什么不应该过滤电子邮件地址：http: [//davidcel.is/blog/2012/09/06/stop-validating-email-addresses-with-regex/](http://davidcel.is/blog/2012/09/06/stop-validating-email-addresses-with-regex/)

TL;DR：检查是否有 @（可选句点）并发送测试邮件。
David 建议使用这个正则表达式：

```
/.+@.+\..+/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:33:36.030

我通过使用模式匹配器解决了它。

```
email = "testo͝';@.com.my"   
String EMAIl_PATTERN = "[^a-zA-Z0-9!#$%&@'*+-/=?^_`{|}~.]+";
modifiedEmail = email.replaceAll(EMAIl_PATTERN, ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T22:36:47.023

进一步思考：您还可以测试未经身份验证使用的已知电子邮件地址提供商（例如[http://trashmail.com/](http://trashmail.com/)）。

# actionscript-3 - 使用 Flex 中的 Border 容器无法显示简单绘图

> ID：14046663
> 
> 赞同：0
> 
> 时间：2012-12-26T21:48:26.633
> 
> 标签：actionscript-3, apache-flex, flex4

刚开始在 Flex 中做一个简单的绘图工具，以适应 Flex 中的图形编码。一开始本身就有问题。

在这里，我使用 Border Container 作为绘图区域 (Flex 4) 而不是 Canvas，并且在 Mousemove 事件上绘制简单的点。是的，非常简单的基本东西。但我没有在边界容器区域看到绘制的点。但我看到鼠标事件被解雇了。不知道缺少什么。

下面是我的代码，

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<fx:Script>
    <![CDATA[
        import mx.containers.Canvas;
        import mx.skins.Border;

        import spark.components.BorderContainer;

        protected function init():void
        {
            var whiteboard:BorderContainer = new BorderContainer();
            whiteboard.width = 1000;
            whiteboard.height = 600;                
            whiteboard.addEventListener
                  (MouseEvent.MOUSE_MOVE,whiteboard_mouseMoveHandler);
            this.addElement(whiteboard);

        }

        protected function  whiteboard_mouseMoveHandler(event:MouseEvent):void
        {               

            var graph:Graphics =
                          (event.currentTarget as BorderContainer).graphics;                    
            graph.beginFill(0x000000);
            graph.drawCircle(event.localX,event.localY,3);
            trace("x:"+event.localX+":y:"+event.localY);                
        }

    ]]>
</fx:Script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:33:40.830

`BorderContainer`很可能不希望您在它的图形对象上绘图。我最近没有看代码`BorderContainer`，但我记得其他人也有类似的问题。

由于 a`BorderContainer`在其内容周围绘制了边框，因此很可能使用它的`graphics`对象来绘制该边框。所以你不应该尝试使用`graphics`边框容器的属性来绘制。

相反，将一个`UIComponent`或其他 Flex 对象添加到边框容器，然后在该对象上绘制图形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:20:28.513

使用皮肤并绘制皮肤。这就是整个行为/皮肤分离的目的。

# matlab - 如何在 libsvm 中绘制 4 维 Iris 数据的决策边界？

> ID：14046664
> 
> 赞同：1
> 
> 时间：2012-12-26T21:48:29.097
> 
> 标签：matlab, classification, libsvm

我尝试了具有 4 个功能的 svm。我使用 Libsvm 来训练分类器，然后我想绘制决策边界。我试图在 matlab 中为 1 对 3（一对一）绘制 2D 空间，并且 2D 特征是 Iris 数据的第 1 列和第 3 列，但它绘制了错误的决策边界。怎么了？我该怎么办？

```
coef1v3 = [model.sv_coef(1:7,2); model.sv_coef(27:45,1)];
SVs1v3 = [model.SVs(1:7,:); model.SVs(27:45,:)];
b=model.rho;
w1v3 = SVs1v3'*coef1v3;
b1v3=b(2);
xp=linspace(min (data(:,1)),max (data(:,1)));
yp1=(-w1v3(1)*xp+b1v3)/w1v3(3);
plot(xp , yp1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T08:02:29.940

没有错误。只需尝试维度 1 和 3。无需尝试每个维度。我做到了并得到了真实的回应。

# javascript - ng-bind-html 为空

> ID：14046665
> 
> 赞同：1
> 
> 时间：2012-12-26T21:48:32.980
> 
> 标签：javascript, angularjs

我在这里放了一个 JSfiddle，这样你就可以看到实际工作的代码......

[http://jsfiddle.net/vtKqG/1/](http://jsfiddle.net/vtKqG/1/)

不幸的是，这在我的本地机器上不起作用，即使其他一切都可以（我有其他角度代码运行良好）。

在我的本地机器上，如果我使用的话，我只会在输出中看到我的 html。

```
ng-bind-html-unsafe="message.content" 
```

代替...

```
ng-bind-html="message.content" 
```

因此，在 JSfiddle 上，当我关闭“不安全”时它可以工作，但在我的本地机器上，不安全必须在那里，从安全的角度来看，这似乎是不可取的。

我正在加载相同版本的 Angular 并以相同的顺序进行清理，我认为我的代码是相同的，只是环境似乎不同。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T22:42:22.247

您需要将您的模块添加到 ng-app：

```
<html ng-app='myApp'>
... 
```

如果你不指定这个，Angular 只会加载模块 'ng'，而不是 ng-sanitize。ng-bind-unsafe 在模块 ng 中，而不是在 ng-sanitize 中，这就是它意外工作的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-02T11:03:01.750

显然在 AngularJS 1.2+ 的新版本中他们改变了它，从那时起你必须使用 trustAsHtml() 方法来禁用 Html 转义。

[解决方案可以在这里找到](https://stackoverflow.com/questions/19415394/with-ng-bind-html-unsafe-removed-how-do-i-inject-html)

# android - Android Parcelable 和继承

> ID：14046667
> 
> 赞同：2
> 
> 时间：2012-12-26T21:48:44.603
> 
> 标签：android, parcelable

我有一个类 Drills 和几个扩展它的类，例如 AddDrill。我希望能够在活动之间传递这个钻对象“家庭”，所以我使用 Parcelable。我找到[了这个](https://stackoverflow.com/questions/4049627/parcelable-and-inheritance-in-android)答案和[这个](http://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/)例子，我创建了这个 Drill 和 AddDrill 类，我认为我做错了什么，我的实现中的每一件事都好吗？钻头：

```
package com.simplemathgame;

import android.os.Parcel;
import android.os.Parcelable;

public abstract class Drill implements Parcelable{
    protected int firstNumber;
    protected int secondNumber;
    protected int answer;
    protected int userAnswer;
    protected String userAnswerString;
    protected String symbol;
    protected int minBound, maxBound;
    protected int drillNumber;

    public String getUserAnswerString() {
        return userAnswerString;
    }

    public void setUserAnswerString(String userAnswerString) {
        this.userAnswerString = userAnswerString;
    }

    Drill(int min, int max){
        minBound = min;
        maxBound = max;
        answer = answerCalculatetion();
        userAnswerString = "";
    }

    public Drill(Parcel in) {
        readFromParcel(in);
    }

    public int getDrillNumber() {
        return drillNumber;
    }

    public void setDrillNumber(int drillNumber) {
        this.drillNumber = drillNumber;
    }

    public int getUserAnswer() {
        return userAnswer;
    }

    public void setUserAnswer(int userAnswer) {
        this.userAnswer = userAnswer;
    }

    public String getSymbol() {
        return symbol;
    }

    public void setSymbol(String symbol) {
        this.symbol = symbol;
    }

    public int getMinBound() {
        return minBound;
    }

    public void setMinBound(int minBound) {
        this.minBound = minBound;
    }

    public int getMaxBound() {
        return maxBound;
    }

    public void setMaxBound(int maxBound) {
        this.maxBound = maxBound;
    }

    //getters and setters
    public int getFirstNumber() {
        return firstNumber;
    }
    public void setFirstNumber(int firstNumber) {
        this.firstNumber = firstNumber;
    }
    public int getSecondNumber() {
        return secondNumber;
    }
    public void setSecondNumber(int secondNumber) {
        this.secondNumber = secondNumber;
    }
    public int getAnswer() {
        return answer;
    }
    public void setAnswer(int answer) {
        this.answer = answer;
    }

    protected int getRandomNumber(int high, int low){
        return (int) ((Math.random( ) * (high - low + 1)) + low);  
    }

    protected abstract int answerCalculatetion();

    protected String printDrill(){
        String FirstNumberS;
        String SecondNumberS;

        if(this.getFirstNumber() < 0){
            FirstNumberS = "(" + this.getFirstNumber() + ")";
        }
        else{
            FirstNumberS = "" + this.getFirstNumber();
        }

        if(this.getSecondNumber() < 0){
            SecondNumberS = "(" + this.getSecondNumber() + ")";
        }
        else{
            SecondNumberS = "" + this.getSecondNumber();
        }

        return (FirstNumberS + " " + this.getSymbol() + " " + SecondNumberS + " " + "="); 
    }

    protected String printDrillAnswer(){
        String FirstNumberS;
        String SecondNumberS;
        String answerS;

        if(this.getAnswer() < 0){
            answerS = "(" + this.getAnswer() + ")";
        }
        else{
            answerS = "" + this.getAnswer();
        }

        if(this.getFirstNumber() < 0){
            FirstNumberS = "(" + this.getFirstNumber() + ")";
        }
        else{
            FirstNumberS = "" + this.getFirstNumber();
        }

        if(this.getSecondNumber() < 0){
            SecondNumberS = "(" + this.getSecondNumber() + ")";
        }
        else{
            SecondNumberS = "" + this.getSecondNumber();
        }

        return (FirstNumberS + " " + this.getSymbol() + " " + SecondNumberS + " " + "=" + " " + answerS); 
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {

        // We just need to write each field into the
        // parcel. When we read from parcel, they
        // will come back in the same order
        dest.writeInt(firstNumber);
        dest.writeInt(secondNumber);
        dest.writeInt(answer);
        dest.writeInt(userAnswer);
        dest.writeString(userAnswerString);
        dest.writeString(symbol);
        dest.writeInt(minBound);
        dest.writeInt(maxBound);
        dest.writeInt(drillNumber);
    }

    /**
     *
     * Called from the constructor to create this
     * object from a parcel.
     *
     * @param in parcel from which to re-create object
     */
    protected void readFromParcel(Parcel in) {

        // We just need to read back each
        // field in the order that it was
        // written to the parcel

        firstNumber = in.readInt();
        secondNumber = in.readInt();
        answer = in.readInt();
        userAnswer = in.readInt();
        userAnswerString = in.readString();
        symbol = in.readString();
        minBound = in.readInt();
        maxBound = in.readInt();
    }

} 
```

添加钻：

```
package com.simplemathgame;

import android.os.Parcel;
import android.os.Parcelable;

public class AddDrill extends Drill {

    AddDrill(int min, int max) {
        super(min, max);
        symbol = "+";
        firstNumber = getRandomNumber(min, max);
        secondNumber = getRandomNumber(min, max);
        answer = answerCalculatetion();
    }

    private AddDrill(Parcel in) {
        super(in);
    }

    protected int answerCalculatetion() {
        return (this.getFirstNumber() + this.getSecondNumber());
    }

    public static final Parcelable.Creator<AddDrill> CREATOR = new Parcelable.Creator<AddDrill>() {
        public AddDrill createFromParcel(Parcel in) {
            return new AddDrill(in);
        }

        public AddDrill[] newArray(int size) {
            return new AddDrill[size];
        }
    };

    @Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-26T02:42:18.327

在您的 AddDrill 类中，您需要实现`writeToParcel()`方法以及来自`Parcel`. 您可能还需要同时使用`@Override`这两种方法，但您需要尝试找出最终解决方案

# string - Perl中的字符串比较与“eq”与“==”

> ID：14046669
> 
> 赞同：82
> 
> 时间：2012-12-26T21:48:55.523
> 
> 标签：string, perl

我是（一个完整的 Perl 新手）在`if`语句中进行字符串比较：

如果我执行以下操作：

```
if ($str1 == "taste" && $str2 == "waste") { } 
```

我看到了正确的结果（即如果条件匹配，它会评估“then”块）。但我看到这些警告：

> 参数“taste”在行号 x 处的数字 eq (==) 中不是数字。
> 参数“浪费”不是数字 eq (==) 中第 x 行的数字。

但如果我这样做：

```
if ($str1 eq "taste" && $str2 eq "waste") { } 
```

即使满足 if 条件，它也不会评估“then”块。

在这里，`$str1`是`taste`和`$str2`是`waste`。

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-12-26T21:54:09.233

首先，**eq**用于比较字符串；**==**用于比较数字。

> 即使满足“if”条件，它也不会评估“then”块。

我认为您的问题是您的变量不包含您认为它们所做的事情。我认为你的`$str1`or`$str2`包含“taste\n”之类的东西。**通过在if** :之前打印来检查它们`print "str1='$str1'\n";`。

可以使用该`chomp($str1);`功能删除尾随换行符。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-12-26T21:51:21.500

`==`进行数字比较：它将两个参数都转换为数字，然后将它们进行比较。只要`$str1`和`$str2`都作为数字计算为 0，则条件将被满足。

`eq`进行字符串比较：两个参数必须在词法上匹配（区分大小写）才能满足条件。

```
"foo" == "bar";   # True, both strings evaluate to 0.
"foo" eq "bar";   # False, the strings are not equivalent.
"Foo" eq "foo";   # False, the F characters are different cases.
"foo" eq "foo";   # True, both strings match exactly. 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-27T09:30:58.700

你试过咀嚼`$str1`and`$str2`吗？

我在使用（另一个）`$str1`eq 'Y' 时发现了一个类似的问题，并且在我第一次这样做时它才消失：

```
chomp($str1);
if ($str1 eq 'Y') {
....
} 
```

之后工作。

希望有帮助。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2012-12-27T11:37:36.307

也许您使用的条件不正确：

```
$str1 == "taste" && $str2 == "waste" 
```

`THEN`只有当两个陈述的条件都为真时，程序才会进入部分。

您可以尝试使用`$str1 == "taste" || $str2 == "waste"`. `THEN`如果上述任何一个条件为真，这将执行该部分。

# php - PHPMailer SMTP 错误返回

> ID：14046675
> 
> 赞同：1
> 
> 时间：2012-12-26T21:49:14.010
> 
> 标签：php, email, smtp, phpmailer

我已经接管了我公司网站的开发，但有一个密码重置表单不起作用，我无法弄清楚。它使用 PHPMailer 向用户的电子邮件地址发送重置密钥。php 查询数据库正常，并返回用户的正确电子邮件地址和重置密钥。

```
<?php
require_once('./library.php');
require_once('./PHPMailer/class.phpmailer.php');

$Trader = new CompanyTrader();

$resetdata = $Trader->resetTrader($_GET['name']);
print_arr($resetdata);

    $reset = new PHPMailer(true);
    $reset->IsSMTP();

    try {
            $reset->Host = EM_HOST;
            $reset->SMTPDebug = 2; //2 to debug
            $reset->SMTPAuth = EM_AUTH;
            $reset->AddReplyTo(CONFIRM_REPLY_EMAIL, 'Company');
            $reset->AddAddress($resetdata['traders_email_add'], $resetdata['traders_cont_name']);
            $reset->SetFrom(CONFIRM_REPLY_EMAIL, 'Company');
            $reset->Subject = 'Company Account Password Reset';
            $reset->AltBody = 'To view the message, please use an HTML compatible email viewer!';
            $body = file_get_contents('./templates/reset_email.html');
            $body = eregi_replace("\[USER_NAME\]", $resetdata['traders_user_name'], $body);
            $body = eregi_replace("\[RESET_KEY\]", $resetdata['traders_reset'], $body);
            $reset->MsgHTML($body);
            $reset->Send();
    } catch (phpmailerException $e) {
            @log_this("Pass Reset Sending Failed: ".$e->errorMessage(),"email");
            return false;
    } catch (Exception $e) {
            @log_this("Pass Reset Sending Failed: ".$e->getMessage(),"email");
            return false;
    }
?> 
```

PHPMailer 返回错误如下

```
SMTP -> FROM SERVER:220-78.109.170.70.srvlist.ukfast.net ESMTP Exim 4.80 #2 Wed, 26 Dec 2012 21:41:58 +0000 220-We do not authorize the use of this system to transport unsolicited, 220 and/or bulk e-mail. 
SMTP -> FROM SERVER: 250-78.109.170.70.srvlist.ukfast.net Hello localhost.localdomain [127.0.0.1] 250-SIZE 52428800 250-8BITMIME 250-PIPELINING 250-AUTH PLAIN LOGIN 250-STARTTLS 250 HELP 
SMTP -> FROM SERVER:250 OK 
SMTP -> FROM SERVER:250 Accepted 
SMTP -> FROM SERVER:354 Enter message, ending with "." on a line by itself 
SMTP -> FROM SERVER:250 OK id=1Tnyje-0000Kh-IL 
```

我搞不定。是因为主机限制了我们可以发送的电子邮件数量吗？如果是这样，所有其他 PHPMailer 表单都可以工作，并且整个站点的所有设置都是相同的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:47:15.500

根据您提供的 SMTP 信息，邮件显示它们正在中继。检查您的垃圾邮件文件夹或与您的邮件提供商联系以跟踪邮件。

# javascript - 在 Moment.js 中，如何获取当前的财务季度？

> ID：14046679
> 
> 赞同：33
> 
> 时间：2012-12-26T21:49:48.677
> 
> 标签：javascript, date, momentjs

是否有一种简单/内置的方法来计算当前的财务季度？

前任：

*   1-3月：1日
*   4-7月：2日
*   7-9月：3日
*   10 月至 12 月：4 日

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2014-05-01T18:57:50.933

现在立即支持此功能：

```
moment('2014-12-01').utc().quarter() //outputs 4
moment().quarter(); //outputs current quarter ie. 2 
```

[文档](https://momentjs.com/docs/#/get-set/quarter/)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-11-03T22:19:41.773

使用 2.14.1+ 版本，您可以执行以下操作：

`moment().quarter()`返回当前季度数：1、2、3、4。

```
moment().quarter(moment().quarter()).startOf('quarter'); 
```

将返回当前季度，并将日期设置为季度开始日期。

```
moment().quarter(moment().quarter()).startOf('quarter'); 
```

将返回当前季度，并将日期设置为季度结束日期。

您还可以定义一个函数，将相应的季度编号作为参数 (1,2,3,4)，并返回一个包含季度开始和结束日期的对象。

```
function getQuarterRange(quarter) {

  const start = moment().quarter(quarter).startOf('quarter');

  const end = moment().quarter(quarter).endOf('quarter');

  return {start, end};
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-08T07:13:56.843

使用这个简单的代码来获得基于 1 月和 4 月的所有季度

[演示](http://jsfiddle.net/Nishchit14/a8LMn/)

**代码 ：**

```
 // startMonth should be january or april

  function setQuarter(startMonth) {
    var obj = {};
    if(startMonth=='january'){

        obj.quarter1 = {start:moment().month(0).startOf('month'),end:moment().month(2).endOf('month')}
        obj.quarter2 = {start:moment().month(3).startOf('month'),end:moment().month(5).endOf('month')}
        obj.quarter3 = {start:moment().month(6).startOf('month'),end:moment().month(8).endOf('month')}
        obj.quarter4 = {start:moment().month(9).startOf('month'),end:moment().month(11).endOf('month')}
        console.log(obj);
        return obj;
    }
    else if(startMonth=='april'){

        obj.quarter1 = {start:moment().month(3).startOf('month'),end:moment().month(5).endOf('month')}
        obj.quarter2 = {start:moment().month(6).startOf('month'),end:moment().month(8).endOf('month')}
        obj.quarter3 = {start:moment().month(9).startOf('month'),end:moment().month(11).endOf('month')}
        obj.quarter4 = {start:moment().month(0).startOf('month').add('years',1),end:moment().month(2).endOf('month').add('years',1)}
        console.log(obj);
        return obj;
    }
}

 setQuarter('april'); 
```

[小提琴](http://jsfiddle.net/Nishchit14/a8LMn/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-07-21T07:59:15.970

**开始日期**

```
moment().quarter(moment().quarter()).startOf('quarter'); 
```

将返回当前季度，并将日期设置为季度开始日期。

```
moment("2019", "YYYY").quarter(4).startOf('quarter'); 
```

将返回“2019”年第四季度的开始日期。

```
moment().startOf('quarter'); 
```

将返回当年当前季度的开始日期。

**结束日期**

```
moment().quarter(moment().quarter()).endOf('quarter'); 
```

将返回当前季度，并将日期设置为季度结束日期。

```
moment("2019", "YYYY").quarter(4).endOf('quarter'); 
```

将返回“2019”年第四季度的结束日期。

```
moment().endOf('quarter'); 
```

将返回当年当前季度的结束日期。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-01-09T20:21:32.300

我认为这些答案中的任何一个都不能解释如何获得财务季度。他们解释了如何获得日历季度。

我没有一个明确的答案，因为这就是导致我来到这里的原因。但财政季度才是真正想要的。这是基于财政年度的开始月份。

例如，如果我公司的财政开始月份是 2 月。然后在 2017 年 1 月 9 日撰写本文时，我实际上是在 2016 年第四季度。

为了实现这一点，我们需要一种方法来获取相对于提供的起始月份整数的季度。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-26T22:03:42.513

目前没有内置任何内容，但可以为季度添加格式化标记。[https://github.com/timrwood/moment/pull/540](https://github.com/timrwood/moment/pull/540)

同时，您可以使用以下内容。

```
Math.floor(moment().month() / 3) + 1; 
```

或者，如果您希望它出现在原型上，请执行此操作。

```
moment.fn.quarter = function () {
    return Math.floor(this.month() / 3) + 1;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-26T22:18:11.910

似乎对我有用的公式是：

```
Math.ceil((moment().month() + 1) / 3); 
```

moment().month() 返回 0-11 月份格式，所以我们必须添加一个

```
THE ACTUAL MONTH = (moment().month() + 1) 
```

那么我们必须除以 3，因为一个季度有 3 个月。

```
HOW MANY QUARTERS PASSED = (THE ACTUAL MONTH) / 3 
```

然后我们必须得到它的上限（四舍五入到最近的四分之一端）

```
CEILING(HOW MANY QUARTERS PASSED) 
```

编辑：

[官方公式](https://github.com/adjohnson916/moment/commit/3540e180589c010eedbe604707f794b59c77ef86)（尚未提交）是：

```
~~((this.month()) / 3) + 1; 
```

意思是`Math.floor((this.month()) / 3) + 1;`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-07T21:56:20.527

最简单的方法是

```
Math.floor(moment.month() / 3) 
```

这将为您提供基于零的季度指数。即 0、1、2 或 3。

然后，如果您想要季度的字面数字，只需添加一个。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-31T18:50:09.010

[Nishchit Dhanani](https://stackoverflow.com/users/2837412/nishchit-dhanani)给出的答案是正确的，但在“四月”场景中有一个问题。

问题：如果您的财政年度是 4 月，那么前 3 个月，即 1 月、2 月和 3 月

```
obj.quarter1.start date returns, 1-April-CurrentYear [incorrect Value]
obj.quarter4.end date retunrs, 31-March-NextYear [incorrect Value] 
```

正确的值应该是，

```
Start = 1-April-PreviuosYear
End = 31-March-CurrentYear 
```

所以，考虑到前 3 个月，它可以写成，

```
 const obj = {};

/* 0-Jan, 1-Feb, 2-Mar */
    if (moment().month() <= 2) { 
        obj.quarter1 = { start: moment().month(3).startOf('month').add('years', -1), end: moment().month(5).endOf('month').add('years', -1) };
        obj.quarter2 = { start: moment().month(6).startOf('month').add('years', -1), end: moment().month(8).endOf('month').add('years', -1) };
        obj.quarter3 = { start: moment().month(9).startOf('month').add('years', -1), end: moment().month(11).endOf('month').add('years', -1) };
        obj.quarter4 = { start: moment().month(0).startOf('month'), end: moment().month(2).endOf('month') };    
    } else {
        obj.quarter1 = { start: moment().month(3).startOf('month'), end: moment().month(5).endOf('month') };
        obj.quarter2 = { start: moment().month(6).startOf('month'), end: moment().month(8).endOf('month') };
        obj.quarter3 = { start: moment().month(9).startOf('month'), end: moment().month(11).endOf('month') };
        obj.quarter4 = { start: moment().month(0).startOf('month').add('years', 1), end: moment().month(2).endOf('month').add('years', 1) };    
    }
    console.log(obj); 
```

# asp.net - 从 Sitecore 中的内容项获取清单项的名称

> ID：14046680
> 
> 赞同：1
> 
> 时间：2012-12-26T21:49:53.920
> 
> 标签：asp.net, sitecore, sitecore6

我在 Sitecore 中有一个项目，其中包含一个内容部分，它是一个清单。此清单包含我已输入到 Sitecore 的多个 Active Directory 组的名称。

当项目加载时，我试图遍历清单中的所有名称，以便我可以查看用户是否是这些组之一的成员（如果选中）。

在测试我的代码时，我无法获得 ID 的“显示”值（不确定这是否是正确的术语），例如“IT_Support_Group”。相反，我只能获取项目 ID。

```
Example: {80B1AEEA-D36C-416C-B5BF-AF5F428E4D31} 
```

我一直在使用以下代码的各种版本，但没有运气：

```
 Dim ADCheckList As Sitecore.Data.Fields.MultilistField = Sitecore.Context.Item.Fields("ADGroupAccess")

    If ADCheckList IsNot Nothing Then
        For Each ADListName As String In ADCheckList.Items
           'If IsInGroup(ADListName) and IsADListItemChecked(ADListName) Then
           '   Response.Write("User is in the " & ADListName & " selected group.<br/>"
           'End If
        Next
    End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:50:46.297

您非常接近..您需要调用`GetItems()`方法（而不是属性），它将项目 ID 解析为 Sitecore对象`Items`数组。`Item`

然后，您可以使用 .. 调用属性，例如`item.Name`或检索特定字段`item.Fields[FieldName].Value`。

# javascript - 最好使用“this”还是“that”（var that = this）？

> ID：14046682
> 
> 赞同：3
> 
> 时间：2012-12-26T21:50:01.183
> 
> 标签：javascript

我对 JavaScript 相当陌生，我正在清理我下载的一些 JavaScript 代码。此代码中的不一致之一是混合使用两者和引用它`this`的局部变量。`that`

示例代码片段（jQuery UI 小部件中的私有方法）：

```
_populateLists: function(options) {
    //do stuff with this

    var that = this;
    options.each(function(index) {
        //use both this AND that, they are different in this scope
    });

    //here this and that are the same thing
    //I want to be consistent, is one preferable over the other?
}, 
```

在整个代码中的许多地方`this === that`，即使在同一行代码中，也有混合使用的地方。

为了可读性和可维护性，最好使用`this`or `that`？

注意：我意识到很多这些类型的事情取决于开发人员的偏好。但是在我决定重写代码以使用一个而不是另一个之前，我想了解任何推理是否/为什么一个比另一个更受欢迎。

**编辑：**在这个脚本中，我认为分配给局部变量的*唯一*原因`this`是可以从内部闭包中引用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T22:48:43.180

通常将的值`this`分配给局部变量的原因是您可以关闭该值并在嵌套函数中使用它。

`this`是一个特殊变量，与普通的局部变量有些不同，因为它会自动设置为调用函数的对象（如果有的话）；否则，全局对象。`this`但是， jQuery 对 and 的自由使用使得 of 的这种内在价值有些混乱[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)，它[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)允许调用者*指定*的值`this`。

在嵌套函数中，`this`不会`this`以与通过作用域链继承父级局部变量相同的方式继承其父级的值。

因此，`this`如果我们需要在嵌套函数中（例如`each`您的示例中的回调），我们必须将 的值存储在局部变量中。

```
var a = { fn: function() {
    // here, `this` is the object `a`
    var x = this;
    function b() {
        // here, `this` is `window` because `b` is invoked with no context
        // ...but we still have access to `x`, whose value would be `a`
    }
    b();
}};

a.fn(); // by invoking `fn` as a property of `a`, we implicitly set `fn`'s
        // `this` to `a`.

// Compare to:
var f = a.fn;
f();    // we now invoke `fn` with no context, so its `this` will be `window`.
a.fn.call(window); // or by specifying context explicitly 
```

当然，当您仍在父范围内时，`this`仍将相等`that`（`self`或其他）。乍一看，两者之间似乎没有区别，但有一个重要的性能影响：

**缩小。** 如果分配`this`给局部变量，则对该变量的所有引用都可以减少为一个字符。引用`this`不能。比较这个缩小的输出：

```
function a() {this.w=1;this.x=2;this.y=3;this.z=4;}
function b() {var t=this;t.w=1;t.x=2;t.y=3;t.z=4;} 
```

使用 4 次引用`this`，您可以使用变量保存字节。如果您`this`无论如何都必须为内部函数进行捕获，那么使用局部变量而不是`this`在外部函数中可以为您节省成本，即使使用单个引用也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T21:55:04.627

除了一致性的标准主观理由和有意义的变量名称之外，没有任何理由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T21:52:16.723

如果您为分配`this`给局部变量而烦恼，那么使用它可能是一个好主意，特别是如果您为局部变量指定了一个有用的名称：

```
$('body').on('click', '.something', function() {
  var clicked = this;

  // now "clicked" is the element clicked on
}); 
```

对于 jQuery 示例，但无论库或原始 JavaScript 是什么，它都是相同的问题。我个人认为“that”在几乎所有情况下都是一个非常弱的变量名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T17:16:42.817

在使用 jQuery 时为变量赋值`$(this)`时，最好使用`$this`它，因为它指的是 jQuery 对象 ( `$`)。`$(this)`当在另一个函数的范围内不再引用父对象时，通常使用它。

然而，变量名并不重要，它只是指分配的对象。我们可以使用`$this`, `$that`, `$obj`, `that`,`obj`等`button`作为我们的变量名，但是`this`在 javascript 中是一个保留字，指的是当前范围内的对象，因此我们不能`this`用作变量名。您不能将任何类型的值分配给`this`or `$(this)`。

例子...

```
this = 'something'; // or
$(this) = 'something'; 
```

以上两个语句都会抛出异常。

使用示例`$this = $(this);`如下所示

**要在成功的 jQuery 发布后更改 id 为“someButton”的按钮的 html...**

```
$('#someButton').click(function() {
    var data = $('form').serializeArray();
    // some validation or something

    $this = $(this);
    // note the lack of the var command to 
    // globalize $this within the click function

    $.post('somePage',data,function(html) {
         $this.html(html); 
         // identical to $('#someButton').html(html);
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T00:55:37.800

如果分配`this`给局部变量的目的是为了实现语义，那么使用语义变量名然后使用变量而不是`this`.

但是由于在这种情况下分配给局部变量的目的是缓存它以在内部函数中使用，所以我认为在外部范围内`this`继续使用更具可读性/语义。`this`

虽然`that`通常不是一个很好的变量名，但我认为在这种情况下含义仍然很清楚。在我看来，在内部范围内*，*对*this* as *parent*对*self*。

由于这是一个 jQuery UI 小部件，我查看了一些与 jQuery UI 一起“发布”的标准小部件的来源。它似乎是`this`贯穿始终使用的标准约定，除非需要引用`this`外部范围的 。在后一种情况下，`this`缓存在名为 的变量中`that`。即使局部变量存在，它也只在内部范围内使用。

**为清楚起见的示例：**

```
_populateLists: function(options) {
    var that = this; //we'll need `this` within a closure later

    //do some stuff with `this`

    options.each(function(index) {
        //do stuff with `this` AND `that`
        //`that` is the `this` of the outer scope
    });

    //do some more stuff with `this`
}, 
```

如果一致性是目标，那么遵循标准 jQuery UI 小部件使用的相同约定是有意义的。

# sql - sql - 从 2 个选择语句更新 2 列

> ID：14046683
> 
> 赞同：0
> 
> 时间：2012-12-26T21:50:08.943
> 
> 标签：sql, select, oracle10g, sql-update

如何从另一个表中的字段更新 2 列？

在字段`DOMAIN`上`TABLE2`我有这个字符串：

```
;*.mydomain.co.il; 
```

我已经提取了`mydomain.co.il`. 现在我想：

1.  更新字段`UR`L in`TABLE1`
2.  更新中的`REDIRECT`字段`TABLE1`

    ```
    UPDATE TABLE1
       set URL = (SELECT concat('http//', trim(both ';' from DOMAIN))
                   FROM TABLE2 
                  WHERE id = 99999
                 )

           REDIRECT = (SELECT concat('http//', 
                                     trim(both ';' from  REGEXP_REPLACE(domain,
                                                                       'mydomain',
                                                                       'otherdomain'
                                                                        )
                                          )
                                    )
                         FROM TABLE2 
                        WHERE id = 88888

                      ) 
    ```

*错误消息：ORA-00933；SQL 命令未正确结束*

好的。我更新了我的查询，现在我收到了这个错误：

```
[Oracle Data Provider for .NET] Number: 971
ErrorMessage: ORA-00971: missing SET keyword 
```

为什么缺少 SET ？

```
UPDATE TABLE1 a, TABLE2 s
SET 
a.URL = concat('http//', trim(both ';' from s.DOMAIN), 
a.REDIRECT = concat('http//', trim(both ';' from  REGEXP_REPLACE(s.domain , 'mydomain', 'otherdomain'))
where s.id = 8888 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:02:10.997

如果您在 id 上具有唯一键或主键，则可更新的连接视图会执行此操作。

[http://docs.oracle.com/cd/B19306_01/server.102/b14231/views.htm#i1006232](http://docs.oracle.com/cd/B19306_01/server.102/b14231/views.htm#i1006232)

或者，MERGE 可以基于连接更新多个列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:58:15.857

您忘记了`,`两个设置之间的 a ：

```
UPDATE TABLE1
    SET URL = (SELECT CONCAT('http//', TRIM(BOTH ';' FROM DOMAIN))
            FROM TABLE2
            WHERE id = 99999),
        REDIRECT = ( SELECT CONCAT('http//', TRIM(BOTH ';' FROM REGEXP_REPLACE(domain , 'mydomain' , 'otherdomain')))
            FROM TABLE2
            WHERE id = 88888) 
```

# c++ - 设置项目根目录？

> ID：14046684
> 
> 赞同：1
> 
> 时间：2012-12-26T21:50:12.497
> 
> 标签：c++, compilation, include

如何设置我的项目根目录，以便在包含我希望它搜索的文件时，该文件将从根目录开始，类似于 Java。示例目录：

```
-project root
--main.cpp
--dir
---foo.h
---foo.cpp
--dir2
---boo.h
---boo.cpp 
```

从`foo.h`，我要能写`#include "dir2/boo.h"`。我不想使用`../`. 我应该使用某种编译标志吗？我没有使用 IDE，我在 Mac 上，目前正在使用 g++ 编译器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T21:52:42.573

通常，您可以通过在编译命令中添加*包含路径来实现此目的。*

对于 GCC，这是`-I<path>`（例如`g++ myCode.cpp -I"project root" -o executable`）。

在所有情况下，请阅读您的编译器的*文档*，许多人很乐意花费数小时编写这些文档，只是为了让您无需询问即可找到此类信息。

# c# - 如何使用 Timer 从另一个类访问成员？

> ID：14046685
> 
> 赞同：0
> 
> 时间：2012-12-26T21:50:17.550
> 
> 标签：c#, pass-by-reference

我目前正在编写一个类来计算定义时间段内的平均下载速度，并采用定义数量的样本。我认为这可行的方式是，该类运行一个 Timer 对象，该对象调用所述类中的一个方法，该方法将查看下载的字节（维护在父类 FTPDownloadFile 中），然后将该样本存储在队列中。但是，我的问题是访问下载的字节数。

我访问该信息的方法是通过在构建下载计算类时传入的引用，但是，我似乎没有正确理解/使用引用。传入的变量总是显示为 0，即使我可以看到原始变量发生变化。

谁能告诉我我做错了什么/建议一个更好的方法让我完成我想做的事情？

首先，这是处理下载速度计算的类：

```
public class SpeedCalculator
    {
        private const int samples = 5;
        private const int sampleRate = 1000; //In milliseconds
        private int bytesDownloadedSinceLastQuery;
        private System.Threading.Timer queryTimer;
        private Queue<int> byteDeltas = new Queue<int>(samples);
        private int _bytesDownloaded;

        public SpeedCalculator(ref int bytesDownloaded)
        {
            _bytesDownloaded = bytesDownloaded;
        }

        public void StartPolling()
        {
            queryTimer = new System.Threading.Timer(this.QueryByteDelta, null, 0, sampleRate);
        }

        private void QueryByteDelta(object data)
        {
            if (byteDeltas.Count == samples)
            {
                byteDeltas.Dequeue();
            }

            byteDeltas.Enqueue(_bytesDownloaded - bytesDownloadedSinceLastQuery);
            bytesDownloadedSinceLastQuery = _bytesDownloaded;
        }

        /// <summary>
        /// Calculates the average download speed over a predefined sample size.
        /// </summary>
        /// <returns>The average speed in bytes per second.</returns>
        public float GetDownloadSpeed()
        {
            float speed;
            try
            {
                speed = (float)byteDeltas.Average() / ((float)sampleRate / 1000f);
            }
            catch {speed = 0f;}

            return speed;
        } 
```

该类包含在我的 FTPDownloadFile 类中：

```
class FTPDownloadFile : IDisposable
{
    private const int recvBufferSize = 2048;
    public int bytesDownloaded;
    public SpeedCalculator Speed;
    private FileStream localFileStream;
    FtpWebResponse ftpResponse;
    Stream ftpStream;
    FtpWebRequest ftpRequest;
    public List<string> log = new List<string>();
    private FileInfo destFile;

    public event EventHandler ConnectionEstablished;

    public FTPDownloadFile()
    {
        bytesDownloaded = 0;
        Speed = new SpeedCalculator(ref bytesDownloaded);
    }

    public void GetFile(string host, string remoteFile, string user, string pass, string localFile)
    {
        //Some code to start the download...
        Speed.StartPolling();
    }

    public class SpeedCalculator {...}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:58:53.343

这是理解 C# 中的“ref”参数的常见“问题”。您会看到，与 C+ 不同，C# 中**没有真正的值引用**。

在 C++ 中，当您通过引用传递时，实际上是在内部将指针传递给变量。因此，您可以拥有一个“int&”类型的类成员变量，它是对存储在别处的整数的实际引用。

在 C# 中，'ref' 或 'out' 参数以类似的方式工作，但没有人谈论指针。您*不能*存储**参考**。你不能有一个 'ref' 类成员。看看你的类：sotrage 变量的类型是“int”，纯“int”，不是引用。

您实际上是通过引用传递该值，但随后将其复制到成员变量。“参考”在您的构造函数结束时消失了。

要四处走动，您必须保留实际的源对象，并通过接口引入强依赖或弱依赖，或者以惰性/功能方式 - 通过委托

Ex#1：强引用

```
public class SpeedCalculator
{
    private const int samples = 5;
    private const int sampleRate = 1000; //In milliseconds
    private int bytesDownloadedSinceLastQuery;
    private System.Threading.Timer queryTimer;
    private Queue<int> byteDeltas = new Queue<int>(samples);

    private FTPDownloadFile downloader; // CHANGE

    public SpeedCalculator(FTPDownloadFile fileDownloader) // CHANGE
    {
        downloader = fileDownloader;
    }

    public void StartPolling()
    {
        queryTimer = new System.Threading.Timer(this.QueryByteDelta, null, 0, sampleRate);
    }

    private void QueryByteDelta(object data)
    {
        if (byteDeltas.Count == samples)
        {
            byteDeltas.Dequeue();
        }

        byteDeltas.Enqueue(_bytesDownloaded - bytesDownloadedSinceLastQuery);

        bytesDownloadedSinceLastQuery = downloader.bytesDownloaded; // CHANGE
    }

//and in the other file

public FTPDownloadFile()
{
    bytesDownloaded = 0;
    Speed = new SpeedCalculator( this ); // CHANGE
} 
```

在 C# 中，每个对象`class MyObject`（ , ..) 和 structs ( `struct MyThing`) 总是按值传递，因此您的原件`_bytes = bytes`制作了 int 的副本）。因此，稍后，我可以查询

Ex#2：“弱”参考

```
public interface IByteCountSource
{
    int BytesDownloaded {get;}
}

public class FTPDownloadFile : IDisposable, IByteCountSource
{
    .....
    public int BytesDownloaded { get { return bytesDownloaded; } }
    .....

    public FTPDownloadFile()
    {
       bytesDownloaded = 0;
       Speed = new SpeedCalculator( this ); // note no change versus Ex#1 !
    }
}

public class SpeedCalculator
{
    ....

    private IByteCountSource bts;

    public SpeedCalculator(IByteCountSource countSource) // no "FTP" information!
    {
        this.bts = countSource;
    }

    ...

    private void QueryByteDelta(object data)
    {
        ....

        bytesDownloadedSinceLastQuery = bts.BytesDownloaded;
    } 
```

第一个例子又快又脏。一般来说，我们通常希望类尽可能少地了解所有其他类。那么为什么 SpeedCalculator 应该知道 FTPDownloadFile 呢？它只需要知道当前的字节数。所以我引入了一个界面来“隐藏”背后的实际来源。现在 SpeedCalculator 可以从任何实现该接口的对象中获取值 - 无论是 FTPDownloadFile、HTTPDownloadFile 还是一些 DummyTestDownloader

Ex#3：委托、匿名函数等

```
public class SpeedCalculator
{
    ....

    private Func<int> bts;

    public SpeedCalculator(Func<int> countSource)
    {
        this.bts = countSource;
    }

    ...

    private void QueryByteDelta(object data)
    {
        ....

        bytesDownloadedSinceLastQuery = bts();
    }

// and in the other file

private int getbytes() { return bytesDownloaded; }

public FTPDownloadFile()
{
    bytesDownloaded = 0;
    Speed = new SpeedCalculator( this.getbytes ); // note it is NOT a getbytes() !
}

// or even

public FTPDownloadFile()
{
    bytesDownloaded = 0;
    Speed = new SpeedCalculator( () => this.bytesDownloaded ); // CHANGE
} 
```

带有界面的示例很漂亮，但是界面“很小”。一个是可以的，但有时你需要引入几十个这样的单一属性或单一方法接口，它会变得有些无聊和混乱。特别是如果所有这些都是“内部实现”，无论如何都没有发布给任何其他人使用。你可以很容易地用一个短的 lambda 删除这样的小接口，如第三个示例中所示。我没有接收和存储实现接口的对象，而是将参数更改为 Func。这样我需要得到“一个返回 INT 的方法”。他们，我通过了**一些方法**。请注意，在 期间`new SpeedCalculator`，我不调用`this.getbytes()`，我传递不带括号的方法 - 这会导致方法被包装到 Func 委托中，`bts()`，并将返回当前计数器。这`getbytes`很少使用，仅在一个地方使用 - 所以我什至可以完全放弃它并在构造函数调用时编写匿名函数，正如您在“甚至”部分中看到的那样。

但是，我建议您现在坚持使用接口，它们更易于阅读和理解。

# assembly - 为什么在 ARM 汇编中使用 LDR 而不是 MOV（反之亦然）？

> ID：14046686
> 
> 赞同：34
> 
> 时间：2012-12-26T21:50:20.997
> 
> 标签：assembly, arm, immediate-operand

我正在浏览本教程：[http ://www.cl.cam.ac.uk/freshers/raspberrypi/tutorials/os/ok01.html](http://www.cl.cam.ac.uk/freshers/raspberrypi/tutorials/os/ok01.html)

组装的第一行是：

```
ldr r0,=0x20200000 
```

第二个是：

```
mov r1,#1 
```

我以为`ldr`是为了将内存中的值加载到寄存器中。但似乎这`=`意味着 0x20200000 是一个值而不是内存地址。两条线似乎都在加载绝对值。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-26T22:04:50.380

这是一个技巧/捷径。例如说

```
ldr r0,=main 
```

会发生什么情况是汇编器会在指令附近但在指令路径之外分配一个数据字

```
ldr r0,main_addr
...
b somewhere
main_addr: .data main 
```

现在将该技巧扩展到常量/立即数，尤其是那些不能适应立即移动指令的：

```
top:
add r1,r2,r3
ldr r0,=0x12345678
eor r1,r2,r3
eor r1,r2,r3
b top 
```

组装然后拆卸

```
00000000 <top>:
   0:   e0821003    add r1, r2, r3
   4:   e59f0008    ldr r0, [pc, #8]    ; 14 <top+0x14>
   8:   e0221003    eor r1, r2, r3
   c:   e0221003    eor r1, r2, r3
  10:   eafffffa    b   0 <top>
  14:   12345678    eorsne  r5, r4, #125829120  ; 0x7800000 
```

你会看到汇编器已经为你添加了数据字并将 ldr 更改为你的 pc 亲戚。

现在，如果您使用适合 mov 指令的立即数，那么可能取决于汇编程序，当然是我正在使用的 gnu，它对我来说变成了 mov

```
top:
add r1,r2,r3
ldr r0,=0x12345678
ldr r5,=1
mov r6,#1
eor r1,r2,r3
eor r1,r2,r3
b top

00000000 <top>:
   0:   e0821003    add r1, r2, r3
   4:   e59f0010    ldr r0, [pc, #16]   ; 1c <top+0x1c>
   8:   e3a05001    mov r5, #1
   c:   e3a06001    mov r6, #1
  10:   e0221003    eor r1, r2, r3
  14:   e0221003    eor r1, r2, r3
  18:   eafffff8    b   0 <top>
  1c:   12345678    eorsne  r5, r4, #125829120  ; 0x7800000 
```

所以它基本上是一个打字快捷方式，理解你让汇编程序找到一个地方来粘贴常量，它通常做得很好，有时会抱怨，不确定我是否看到它不能安全地做到这一点。有时您需要在代码中使用 .ltorg 或 .pool 来鼓励汇编程序找到位置。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-07-10T14:31:42.437

来自更接近您水平的人的较短响应，希望对您有所帮助：在 ARM 中，指令具有 32 位。一些位用于标识操作，一些位用于操作数，在 MOV 指令的情况下，一些位可用于立即值（例如#1）。

正如您[在此处](http://simplemachines.it/doc/arm_inst.pdf)看到的（第 33 页），立即数只有 12 位可用。该指令不使用每个位作为数字（范围从 0 到 2^12-1~4095），而是通过将前 8 位右移 (ROR) 后 4 位中指定的数量的两倍来计算立即数. 即，`immediate = first 8 bits ROR 2*(last four bits)`。

通过这种方式，我们可以获得比 0 到 4095 范围更广的数字（请参阅第 34 页了解可能的立即数的简要摘要）。但是请记住，对于 12 位，仍然只能指定 4096 个可能的值。

万一我们的数字不能像前一个那样转换成指令（257不能表示为8位旋转任意4位的两倍），那么，我们必须使用LDR r0，=257

在这种情况下，编译器将数字 257 保存在内存中，靠近程序代码，因此可以相对于 PC 对其进行寻址，并从内存中加载它，正如 dwelch 详细解释的那样。

注意：如果您按照该教程进行操作，那么当您尝试使用 mov r0, #257 进行“制作”时，您将收到错误消息，并且您必须手动尝试 ldr r0, =257。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-18T17:04:25.320

与其他答案一样好，我想我也许可以简化答案。

**ldr** = 加载寄存器

**移动**= 移动

两者都有效地做同样的事情，但方式不同。

区别很像

```
#define CONST 5 
```

和

```
int CONST = 5; 
```

在 C 语言中。

**mov**非常快，因为它的附带值直接存储为指令的一部分（以上述答案中描述的 12 位格式）。由于它存储值的方式，它有一些限制。为什么？因为

*   12 位不足以存储像 32 位内存地址这样的大量数字。
*   前 8 位**ROR** 2 *（后 4 位）不能代表任何数字，即使在 12 位范围内也是如此。

**另一方面，**ldr是通用的（主要是由于编译器优化）。**它是这样工作的（如反汇编例程所示）**

 ***   如果该值可以以 12 位和前 8 位**ROR** 2 *（后 4 位）格式表示，则编译器将其更改为伴随该值的**mov指令。**

*   否则，该值将作为数据保存到 RAM 中的某个位置。并通过使用程序计数器的偏移量从内存访问，将其加载到所需的寄存器中。

我希望它有所帮助。**

# grid - CS6 流体网格和高密度显示器

> ID：14046689
> 
> 赞同：0
> 
> 时间：2012-12-26T21:50:43.760
> 
> 标签：grid, dreamweaver, media-queries, fluid

我有一个关于 Dreamweaver CS6 响应式设计实施的问题。如果我使用默认的媒体查询设置（手机=480px 宽，平板电脑=768px 宽，桌面=1232px 宽），在视网膜 ipad 上查看网站时会发生什么？

视网膜 ipad 的宽度为 1536 像素，但它是平板电脑。使用 CS6 的 Fluid Grid 构建的站点是否会使用桌面站点媒体查询显示？

我的问题也适用于 Droid DNA。它的宽度为 1080 像素，但它是一部手机。使用 CS6 的 Fluid Grid 构建的站点会在 Droid DNA 上显示为平板电脑站点吗？

Dreamweaver 是否考虑了所有这些？我知道有一种方法可以将像素比率用作媒体查询的一部分，但是对于使用 CS6 的流体网格布局制作的网站是否需要这种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:01:02.667

您必须记住，像素不是绝对单位。它是相对的，例如百分比，em，rem ...因此视网膜显示器具有更高的dpi（每英寸点数）值，但应该被识别为平板电脑，因为Apple也知道这一点。

# java - 在 onCreate 调用期间重新定义 Java 类的变量？

> ID：14046693
> 
> 赞同：1
> 
> 时间：2012-12-26T21:51:00.000
> 
> 标签：java, constructor, initialization, member

```
public class Country implements ICountry {
   int stability = 2;
}

Country poland = new Country(stability = 3); 
```

我正在尝试做的是使用具有一些默认值的新类（“Country”）扩展接口（ICountry）。我想知道在创建 Country 类的新实例时是否可以重新定义其中一些默认值。我的示例中的最后一行代码是我目前尝试实现的，但我的 IDE 警告我“稳定性无法解析为变量”。

我的问题是，在不构造方法的情况下实例化类时是否可以重新定义对象的某些默认值？

我刚开始自学 Java 和 Android 编程，所以如果您认为我提到的术语有误，请纠正我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T21:56:35.530

您想要的是定义一个`Country`接受*参数*并将其分配给字段的构造函数，如下所示：

```
public class Country implements ICountry {
   int stability = 2; // the default

   public Country() {
        // no parameters, no assignments
   }

   public Country(int stability) {
       // declares parameter, assigns to field
       this.stability = stability;
   }
} 
```

然后，您可以创建此类的多个实例，如下所示：

```
Country unitedKingdom = new Country(); // 2 is the value of stability, taken from the default
Country poland = new Country(3); // 3 is the value of stability 
```

你需要有两个构造函数的原因是，如果你没有指定一个构造函数，没有参数的版本（“*默认*”或“*隐式*”构造函数）会生成，但是一旦你指定了一个构造函数，它就不会生成不再。

默认构造函数的另一种等效语法可能是：

```
public class Country implements ICountry {
   int stability; // declare field, but don't assign a value here

   public Country() {
        this.stability = 2; // instead assign here, this is equivalent
   }
} 
```

此版本和以前版本的默认构造函数都产生相同的效果，但通常是偏好问题。

有些语言使用您展示的语法，它们被称为“*命名参数*”，但 Java 没有它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:54:16.497

这就是重载构造函数的用途：

```
public Country(int stability)  
{
   this.stability=stability;
} 
```

# scala - scala中嵌套的“if”/“match”语句：更好的方法？

> ID：14046697
> 
> 赞同：4
> 
> 时间：2012-12-26T21:51:34.850
> 
> 标签：scala, if-statement

我有一系列验证函数，如果没有发现验证问题，则返回 Option[Problem]（如果有）或 None。我想编写一个简单的函数来调用每个验证函数，停止并返回第一个非无结果。

当然，我可以用“java-style”编写这个方法，但我想知道是否存在更好的方法。

**编辑**

这是最初的 Java 解决方案：

```
validate01(arg);
validate02(arg);
validate03(arg);
... 
```

如果出现问题，每个方法都会引发异常。在编写 Scala 时，我会远离异常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T22:05:03.133

例如，假设我们要验证一个`String`. 我们的验证函数接受一个`String`和一个验证器列表，它们是从`String`到的函数`Option[Problem]`。我们可以以这样的功能方式实现它：

```
def firstProblem(validators: List[String => Option[Problem]], s:String) =
  validators.view.flatMap(_(s)).headOption 
```

这通过将每个验证函数应用于字符串并仅在结果为 时才保留结果来创建一个新列表`Some`。然后我们取这个 List 的第一个元素。由于调用`view`，列表将仅根据需要计算。因此，一旦发现第一个问题，就不会调用其他验证器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-26T22:06:04.533

如果您在编译时有有限且已知的验证次数，则可以在选项上使用 .orElse：

```
def foo(x: Int): Option[Problem] = ...
def bar(x: Int): Option[Problem] = ...
...
def baz(x: Int): Option[Problem] = ...

foo(1) orElse bar(2) orElse .. baz(n) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T22:08:33.717

也许你想要——假设验证函数不带参数

```
def firstProblem(fs: (() => Option[Problem])*) = {
  fs.iterator.map(f => f()).find(_.isDefined).flatten
} 
```

如果有的话，你会得到一个现有`Option[Problem]`的，或者`None`如果他们都成功了。如果您需要将参数传递给函数，那么您需要解释这些参数是什么。例如，您可以

```
def firstProblem[A](a: A)(fs: (A => Option[Problem])*) = /* TODO */ 
```

如果您可以将相同的参数传递给所有人。你会像这样使用它：

```
firstProblem(myData)(
  validatorA,
  validatorB,
  validatorC,
  validatorD
) 
```

# html - 从由 html 表单创建的 vbscript 将变量传递给批处理文件

> ID：14046702
> 
> 赞同：0
> 
> 时间：2012-12-26T21:52:14.977
> 
> 标签：html, vbscript, batch-file

我正在为我们的 AS400 和域上的批量新用户创建创建一个门户网站，除了将变量从 HTML 表单传递到批处理文件之外，我已经能够让一切正常工作。

批处理文件已经存在，为了尽可能简单，我决定重用它们，因为这将是一个严格的内部应用程序。

我已经将我的变量声明为表单的输入，并将它们设置为在运行批处理文件时由 vb 脚本调用，但是它们不是作为变量传递，而是作为代码中所述传递。

有人可以告诉我我做错了什么，因为我无法通过在网上搜索这个问题找到很多信息吗？

如果您需要更多信息，请告诉我，我会提供。

```
<script language="VBScript">

strCode = textbox0.Value
strName = textbox1.Value
strIPMG = textbox2.Value
strServer = textbox3.Value

Sub isetup
dim shell
set shell=createobject("wscript.shell")
shell.run "N:\wwwroot\users\iSETUP01.bat strCode strName strIPGM strServer"
set shell=nothing

End Sub

Sub wsetup()
dim shell
set shell=createobject("wscript.shell")
shell.run "N:\wwwroot\users\wSETUP.bat strCode strIPGM"
set shell=nothing

End Sub

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:02:14.337

你不需要类似的东西...

```
"N:\wwwroot\users\wSETUP.bat " & strCode & " " & strIPGM 
```

# javascript - Jquery替换字符并应用类

> ID：14046709
> 
> 赞同：0
> 
> 时间：2012-12-26T21:52:32.883
> 
> 标签：javascript, jquery

我有几个以下格式的字符串

```
<span class="label">20€&lt;/span> 
```

并希望将其全部转换为以下内容：

```
<span class="label">20<small>€&lt;/small></span> 
```

我怎么能在 Jquery 中实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T21:58:53.847

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:58:04.450

> 它可以工作，但会影响其他没有 € 字符的字符串。我的意思是具有相同类的其他跨度，它会更改第一个字母或那些字符串。图我还有其他具有这种语法的字符串：`<span class="label">request price</span>`

**HTML：**

```
<span class="label currency">20€&lt;/span> 
```

**注 1：**添加了额外的类货币来标识需要修改的跨度。

**注意 2：**使用 span 而不是 small，因为所有样式元素都是重新使用的。（感谢@大卫）。阅读更多信息@MDN [https://developer.mozilla.org/en-US/docs/HTML/Element/small](https://developer.mozilla.org/en-US/docs/HTML/Element/small)

您可以使用如下替换功能，

```
$(function () {
    $('span.label.currency').html(function(i, v) {
       return v.replace('€', '<small>€&lt;/small>');
    });
}); 
```

# php - 在表单提交时，添加一个隐藏字段是否单击了某个提交按钮

> ID：14046711
> 
> 赞同：0
> 
> 时间：2012-12-26T21:52:45.350
> 
> 标签：php, javascript, jquery, forms

我是一个初级程序员，我认为这是一个非常简单的问题。我需要通过 GET 请求将隐藏值字段传递给 php 服务器代码。但是，我有两次提交（“查看所有”我的应用程序上的数据或“仅查看选定的数据”，并且仅在单击“查看选定的”按钮*时才需要添加隐藏字段值。*

这是我的代码（去掉了不必要的垃圾）：

```
<form method='get' action=''> <!--the action is blank because it just submits to the same page its on-->
     <input type='hidden' name='viewselectedwashit' value='hit'/>
     <input type='submit' value='View Selected' id='viewselectedsubmit'/>
     <input type='submit' value='View All' id='viewallsubmit'/>
</form> 
```

所以基本上，我需要的只是 jQuery 中的一种方法，用于在单击“查看选定”提交按钮后，使用该表单发送隐藏字段，但如果单击“查看全部”按钮，则它不会发送隐藏形式。

感谢您的任何帮助！如果您需要更多信息，请询问！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T21:59:30.960

不需要隐藏字段，只需为`View Selected`-button 赋予名称属性“viewselectedwashit”。

当它们具有名称属性时，单击的按钮也将被提交。

```
<form>
     <input type='submit' value='View Selected' name='viewselectedwashit' />
     <input type='submit' value='View All'/>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:58:15.670

给 hidden 一个 id `viewselectedwashit`，如果需要，您可以删除该元素。只有点击了隐藏才会出现`View Selected`。

```
$('#viewallsubmit').click(function(){
    $('#viewselectedwashit').remove();
    return true;
}); 
```

您可以将其设置为空白值，而不是使用`.val('')`.

# linux - grep 使用变量和正则表达式

> ID：14046715
> 
> 赞同：1
> 
> 时间：2012-12-26T21:53:26.303
> 
> 标签：linux, date, ssh, awk, grep

我正在尝试 grep 过去 24 小时内的条目的日志文件。我想出了以下命令：

```
grep "$(date +%F\ '%k')"\|"$(date +%F --date='yesterday')\ [$(date +%k)-23]" /path/to/log/file 
```

我知道正则表达式可以在 grep 中使用，但对正则表达式不是很熟悉。你看，我正在寻找今天或昨天在当前时间或更高时间之间的任何东西。这不起作用，我猜是由于我试图在 grep 的正则表达式中将命令作为变量传递的方式。我也不反对将 awk 与 awk 一起使用，我想出了以下内容，但它没有正确检查变量：

```
t=$(date +%F) | y=$(date +%F --date='yesterday') | hr=$(date +%k) | awk '{ if ($1=$t || $1=$y && $2>=$hr) { print $0 }}' /path/to/log/file 
```

我会假设 systime 可以与 awk 而不是设置变量一起使用，但我对 systime 一点也不熟悉。任何命令的任何建议将不胜感激！哦，这是日志格式：

```
2012-12-26 16:33:16 SMTP connection from [127.0.0.1]:46864 (TCP/IP connection count = 1)
2012-12-26 16:33:16 SMTP connection from (localhost) [127.0.0.1]:46864 closed by QUIT
2012-12-26 16:38:19 SMTP connection from [127.0.0.1]:48451 (TCP/IP connection count = 1)
2012-12-26 16:38:21 SMTP connection from [127.0.0.1]:48451 closed by QUIT
2012-12-26 16:38:21 SMTP connection from [127.0.0.1]:48860 (TCP/IP connection count = 1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:01:09.043

这是使用`GNU awk`. 像这样运行：

```
awk -f script.awk file 
```

内容`script.awk`：

```
BEGIN {
    time = systime()
}

{ 
    spec = $1 " " $2
    gsub(/[-:]/, " ", spec)
}

time - mktime(spec) < 86400 
```

或者，这是单线：

```
awk 'BEGIN { t = systime() } { s = $1 " " $2; gsub(/[-:]/, " ", s) } t - mktime(s) < 86400' file 
```

* * *

此外，传递 shell 变量的正确方法`awk`是使用`-v`标志。我对您的`awk`命令进行了一些调整以向您展示我的意思，但我建议不要这样做：

```
awk -v t="$(date +%F)" -v y="$(date +%F --date='yesterday')" -v hr="$(date +%k)" '$1==t || $1==y && $2>=hr' file 
```

* * *

解释：

所以在`awk`开始处理文件之前，首先处理`BEGIN`块。在这个块中，我们创建了一个名为`time`/的变量`t`，并使用该`systime()`函数进行设置。`systime()`简单地将当前时间作为系统纪元以来的秒数返回。然后，对于日志文件中的每一行，将创建另一个名为/的`awk`变量，并将其设置为由单个空格分隔的第一个和第二个字段。此外，其他字符喜欢并且需要全局替换为空格才能使函数正常工作，并且使用完成`spec``s``-``:``mktime()``gsub()`. 然后只需一点数学即可测试日志文件中的日期时间是否在过去 24 小时内（或恰好 86400 秒）。如果测试为真，则打印该行。也许额外阅读会有所帮助，请参阅[Time Functions](http://www.gnu.org/software/gawk/manual/html_node/Time-Functions.html)和[String Manipulation Functions](http://www.gnu.org/software/gawk/manual/html_node/String-Functions.html#String-Functions)。HTH。

# c++ - 在命名空间中定义结构的成员

> ID：14046717
> 
> 赞同：1
> 
> 时间：2012-12-26T21:53:51.310
> 
> 标签：c++, opengl, freetype

我正在使用 NeHe 的关于 FreeType 和 OpenGL 的教程，并且在命名空间 freetype 中定义 struct font_data 的成员时遇到问题。当我在命名空间中定义其成员时，它不会将 font_data 识别为结构。

CE_Text.h：

```
#ifndef CE_TEXT
#define CE_TEXT

#include <Common/Headers.h>

/////////////////// MAJOR CREDIT TO NeHe FOR HIS TUTORIAL ON FREETPYE ///////////////////

///Wrap everything in a namespace, that we can use common
///function names like "print" without worrying about
///overlapping with anyone else's code.
namespace freetype {

    //Inside of this namespace, give ourselves the ability
    //to write just "vector" instead of "std::vector"
    using std::vector;

    //Ditto for string.
    using std::string;

    //This holds all of the information related to any
    //freetype font that we want to create.  
    struct font_data{
        float h;            ///< Holds the height of the font.
        GLuint * textures;  ///< Holds the texture id's 
        GLuint list_base;   ///< Holds the first display list id

        //The init function will create a font of
        //of the height h from the file fname.
        void init(const char * fname, unsigned int h);

        //Free all the resources assosiated with the font.
        void clean();
    };

    //The flagship function of the library - this thing will print
    //out text at window coordinates x,y, using the font ft_font.
    //The current modelview matrix will also be applied to the text. 
    void print(const font_data &ft_font, float x, float y, const char *fmt) ;

}

#endif 
```

CE_Text.cpp（我的问题是在 void font_data::init）：

```
#include <Common/Headers.h>

using namespace freetype;

namespace freetype {

    ///This function gets the first power of 2 >= the
    ///int that we pass it.
    inline int next_p2 ( int a )
    {
        int rval=1;
        while(rval<a) rval<<=1;
        return rval;
    }

    ///Create a display list coresponding to the give character.
    void make_dlist ( FT_Face face, char ch, GLuint list_base, GLuint * tex_base ) {

        //The first thing we do is get FreeType to render our character
        //into a bitmap.  This actually requires a couple of FreeType commands:

        //Load the Glyph for our character.
        if(FT_Load_Glyph( face, FT_Get_Char_Index( face, ch ), FT_LOAD_DEFAULT ))
            throw std::runtime_error("FT_Load_Glyph failed");

        //Move the face's glyph into a Glyph object.
        FT_Glyph glyph;
        if(FT_Get_Glyph( face->glyph, &glyph ))
            throw std::runtime_error("FT_Get_Glyph failed");

        //Convert the glyph to a bitmap.
        FT_Glyph_To_Bitmap( &glyph, ft_render_mode_normal, 0, 1 );
        FT_BitmapGlyph bitmap_glyph = (FT_BitmapGlyph)glyph;

        //This reference will make accessing the bitmap easier
        FT_Bitmap& bitmap=bitmap_glyph->bitmap;

        //Use our helper function to get the widths of
        //the bitmap data that we will need in order to create
        //our texture.
        int width = next_p2( bitmap.width );
        int height = next_p2( bitmap.rows );

        //Allocate memory for the texture data.
        GLubyte* expanded_data = new GLubyte[ 2 * width * height];

        //Here we fill in the data for the expanded bitmap.
        //Notice that we are using two channel bitmap (one for
        //luminocity and one for alpha), but we assign
        //both luminocity and alpha to the value that we
        //find in the FreeType bitmap. 
        //We use the ?: operator so that value which we use
        //will be 0 if we are in the padding zone, and whatever
        //is the the Freetype bitmap otherwise.
        for(int j=0; j <height;j++) {
            for(int i=0; i < width; i++){
                expanded_data[2*(i+j*width)]= expanded_data[2*(i+j*width)+1] = 
                    (i>=bitmap.width || j>=bitmap.rows) ?
                    0 : bitmap.buffer[i + bitmap.width*j];
            }
        }

        //Now we just setup some texture paramaters.
        glBindTexture( GL_TEXTURE_2D, tex_base[ch]);
        glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
        glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);

        //Here we actually create the texture itself, notice
        //that we are using GL_LUMINANCE_ALPHA to indicate that
        //we are using 2 channel data.
        glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, width, height,
              0, GL_LUMINANCE_ALPHA, GL_UNSIGNED_BYTE, expanded_data );

        //With the texture created, we don't need to expanded data anymore
        delete [] expanded_data;

        //So now we can create the display list
        glNewList(list_base+ch,GL_COMPILE);

        glBindTexture(GL_TEXTURE_2D,tex_base[ch]);

        glPushMatrix();

        //first we need to move over a little so that
        //the character has the right amount of space
        //between it and the one before it.
        glTranslatef(bitmap_glyph->left,0,0);

        //Now we move down a little in the case that the
        //bitmap extends past the bottom of the line 
        //(this is only true for characters like 'g' or 'y'.
        glTranslatef(0,bitmap_glyph->top-bitmap.rows,0);

        //Now we need to account for the fact that many of
        //our textures are filled with empty padding space.
        //We figure what portion of the texture is used by 
        //the actual character and store that information in 
        //the x and y variables, then when we draw the
        //quad, we will only reference the parts of the texture
        //that we contain the character itself.
        float   x=(float)bitmap.width / (float)width,
                y=(float)bitmap.rows / (float)height;

        //Here we draw the texturemaped quads.
        //The bitmap that we got from FreeType was not 
        //oriented quite like we would like it to be,
        //so we need to link the texture to the quad
        //so that the result will be properly aligned.
        glBegin(GL_QUADS);
        glTexCoord2d(0,0); glVertex2f(0,bitmap.rows);
        glTexCoord2d(0,y); glVertex2f(0,0);
        glTexCoord2d(x,y); glVertex2f(bitmap.width,0);
        glTexCoord2d(x,0); glVertex2f(bitmap.width,bitmap.rows);
        glEnd();
        glPopMatrix();
        glTranslatef(face->glyph->advance.x >> 6 ,0,0);

        //increment the raster position as if we were a bitmap font.
        //(only needed if you want to calculate text length)
        //glBitmap(0,0,0,0,face->glyph->advance.x >> 6,0,NULL);

        //Finnish the display list
        glEndList();
    }

    void font_data::init(const char * fname, unsigned int h) {
        //Allocate some memory to store the texture ids.
        textures = new GLuint[128];

        this->h=h;

        //Create and initilize a freetype font library.
        FT_Library library;
        if (FT_Init_FreeType( &library )) 
            throw std::runtime_error("FT_Init_FreeType failed");

        //The object in which Freetype holds information on a given
        //font is called a "face".
        FT_Face face;

        //This is where we load in the font information from the file.
        //Of all the places where the code might die, this is the most likely,
        //as FT_New_Face will die if the font file does not exist or is somehow broken.
        if (FT_New_Face( library, fname, 0, &face )) 
            throw std::runtime_error("FT_New_Face failed (there is probably a problem with your font file)");

        //For some twisted reason, Freetype measures font size
        //in terms of 1/64ths of pixels.  Thus, to make a font
        //h pixels high, we need to request a size of h*64.
        //(h << 6 is just a prettier way of writting h*64)
        FT_Set_Char_Size( face, h << 6, h << 6, 96, 96);

        //Here we ask opengl to allocate resources for
        //all the textures and displays lists which we
        //are about to create.  
        list_base=glGenLists(128);
        glGenTextures( 128, textures );

        //This is where we actually create each of the fonts display lists.
        for(unsigned char i=0;i<128;i++)
            make_dlist(face,i,list_base,textures);

        //We don't need the face information now that the display
        //lists have been created, so we free the assosiated resources.
        FT_Done_Face(face);

        //Ditto for the library.
        FT_Done_FreeType(library);
    }

    void font_data::clean() {
        glDeleteLists(list_base,128);
        glDeleteTextures(128,textures);
        delete [] textures;
    }

    /// A fairly straight forward function that pushes
    /// a projection matrix that will make object world 
    /// coordinates identical to window coordinates.
    inline void pushScreenCoordinateMatrix() {
        glPushAttrib(GL_TRANSFORM_BIT);
        GLint   viewport[4];
        glGetIntegerv(GL_VIEWPORT, viewport);
        glMatrixMode(GL_PROJECTION);
        glPushMatrix();
        glLoadIdentity();
        gluOrtho2D(viewport[0],viewport[2],viewport[1],viewport[3]);
        glPopAttrib();
    }

    /// Pops the projection matrix without changing the current
    /// MatrixMode.
    inline void pop_projection_matrix() {
        glPushAttrib(GL_TRANSFORM_BIT);
        glMatrixMode(GL_PROJECTION);
        glPopMatrix();
        glPopAttrib();
    }

    ///Much like Nehe's glPrint function, but modified to work
    ///with freetype fonts.
    void print(const font_data &ft_font, float x, float y, const char *fmt, ...)  {

        // We want a coordinate system where things coresponding to window pixels.
        pushScreenCoordinateMatrix();                   

        GLuint font=ft_font.list_base;
        float h=ft_font.h/.63f;                     //We make the height about 1.5* that of

        char        text[256];                              // Holds Our String
        va_list     ap;                                     // Pointer To List Of Arguments

        if (fmt == NULL)                                    // If There's No Text
            *text=0;                                            // Do Nothing

        else {
        va_start(ap, fmt);                                  // Parses The String For Variables
            vsprintf(text, fmt, ap);                        // And Converts Symbols To Actual Numbers
        va_end(ap);                                         // Results Are Stored In Text
        }

        //Here is some code to split the text that we have been
        //given into a set of lines.  
        //This could be made much neater by using
        //a regular expression library such as the one avliable from
        //boost.org (I've only done it out by hand to avoid complicating
        //this tutorial with unnecessary library dependencies).
        const char *start_line=text;
        vector<string> lines;
        for(const char *c=text;*c;c++) {
            if(*c=='\n') {
                string line;
                for(const char *n=start_line;n<c;n++) line.append(1,*n);
                lines.push_back(line);
                start_line=c+1;
            }
        }
        if(start_line) {
            string line;
            for(const char *n=start_line;n<c;n++) line.append(1,*n);
            lines.push_back(line);
        }

        glPushAttrib(GL_LIST_BIT | GL_CURRENT_BIT  | GL_ENABLE_BIT | GL_TRANSFORM_BIT); 
        glMatrixMode(GL_MODELVIEW);
        glDisable(GL_LIGHTING);
        glEnable(GL_TEXTURE_2D);
        glDisable(GL_DEPTH_TEST);
        glEnable(GL_BLEND);
        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);  

        glListBase(font);

        float modelview_matrix[16]; 
        glGetFloatv(GL_MODELVIEW_MATRIX, modelview_matrix);

        //This is where the text display actually happens.
        //For each line of text we reset the modelview matrix
        //so that the line's text will start in the correct position.
        //Notice that we need to reset the matrix, rather than just translating
        //down by h. This is because when each character is
        //draw it modifies the current matrix so that the next character
        //will be drawn immediatly after it.  
        for(int i=0;i<lines.size();i++) {

            glPushMatrix();
            glLoadIdentity();
            glTranslatef(x,y-h*i,0);
            glMultMatrixf(modelview_matrix);

        //  The commented out raster position stuff can be useful if you need to
        //  know the length of the text that you are creating.
        //  If you decide to use it make sure to also uncomment the glBitmap command
        //  in make_dlist().
        //  glRasterPos2f(0,0);
            glCallLists(lines[i].length(), GL_UNSIGNED_BYTE, lines[i].c_str());
        //  float rpos[4];
        //  glGetFloatv(GL_CURRENT_RASTER_POSITION ,rpos);
        //  float len=x-rpos[0];

            glPopMatrix();

        }

        glPopAttrib();      

        pop_projection_matrix();
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T21:55:30.907

```
struct freetype::font_data{ 
```

应该

```
struct font_data{ 
```

`font_data`在命名空间中的事实`freetype`已经被周围的`namespace freetype { }`.

因此，事实上，在您的代码中，您*确实*从未声明任何`freetype::font_data`类型！就好像您试图声明一个`freetype::freetype::font_data`类型一样。

* * *

这类似于你不写的方式：

```
struct T
{
    void T::foo();
}; 
```

但反而：

```
struct T
{
    void foo();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:16:11.897

你必须包含`CE_Text.h`进去`CE_Text.cpp`才能工作。如果没有看到`font_data`类的定义，编译器将不允许您定义其成员。

这就是它通过“不识别`font_data`为结构”告诉您的内容。当然，它不会识别它，因为它在`CE_Text.cpp`.

* * *

根据您的评论，您以循环方式包含了头文件。这是你的问题。永远不要循环包含头文件。当然，您的包含守卫确保包含循环以某种方式被打破。但这绝不会帮助您的代码编译，正如您在示例中看到的那样。

在您从代码中完全删除任何包含循环之前，尝试修复它是一个废话。

# c# - 即使在我释放 Mutex 之后，它似乎也没有释放

> ID：14046726
> 
> 赞同：4
> 
> 时间：2012-12-26T21:55:05.530
> 
> 标签：c#, .net

我有许多读取 xml 文件的服务。为了确保没有冲突，我使用互斥锁。无论出于何种原因，如果我的所有服务都由同一用户运行，则没有问题。但是，如果有不同的用户运行这些服务，即使一个服务释放了互斥锁，另一个服务在调用 enter route mutex 时也会出现以下异常“Unhandled Exception: System.TypeInitializationException: The type initializer for 'createMutex.Program' throw an an异常。---> System.UnauthorizedAccessException：对路径“RETEST_MUTEX”的访问被拒绝。”

```
 public static readonly String ROUTE_MUTEX_STRING = "RETEST_MUTEX";
    private static Mutex _routeMutex = new Mutex(false, ROUTE_MUTEX_STRING);

    /// <summary>
    /// Thin wrapper around the static routeMutex WaitOne method
    /// Always call ExitRouteMutex when done in protected area
    /// </summary>
    /// <param name="millis_timeout"></param>
    /// <returns>true if signaled, like WaitOne</returns>
    public static bool EnterRouteMutex(int millis_timeout)
    {
        try
        {
            return _routeMutex.WaitOne(millis_timeout, false);
        }
        catch (AbandonedMutexException ame)
        {
            // swallow this exception - don't want to depend on other apps being healthy - like pre .NET 2.0 behavior
            // data integrity will be checked
            return _routeMutex.WaitOne(millis_timeout, false);
        }

    }

    public static void ExitRouteMutex()
    {
        try
        {
            _routeMutex.ReleaseMutex();
        }
        catch (ApplicationException)
        {
            // swallow, reduce complexity to client
        }
    }

    static void Main(string[] args)
    {
        Console.WriteLine("Start");
        bool get = EnterRouteMutex(1000);
        System.Console.WriteLine("Mutex created Press enter " + get.ToString());
        Console.ReadLine();            
        ExitRouteMutex();
        Console.WriteLine("Mutex Release");
        System.Console.WriteLine("Press enter");
        Console.ReadLine();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T22:32:09.970

这是一个执行跨进程互斥锁的示例。

[http://msdn.microsoft.com/en-us/library/c41ybyt3.aspx](http://msdn.microsoft.com/en-us/library/c41ybyt3.aspx)

它处理 Mutex.OpenExisting 的使用，还演示了 cdhowie 提到的安全方面。

# kinect - 我无法让 kinect sdk 同时进行语音识别和跟踪骨骼数据

> ID：14046729
> 
> 赞同：1
> 
> 时间：2012-12-26T21:55:19.260
> 
> 标签：kinect, speech-recognition, speech

我有一个女巫程序，我用它启用了语音识别..

```
 RecognizerInfo ri = GetKinectRecognizer();

        speechRecognitionEngine = new SpeechRecognitionEngine(ri.Id);

        // Create a grammar from grammar definition XML file.
        using (var memoryStream = new MemoryStream(Encoding.ASCII.GetBytes(fileContent)))
        {
            var g = new Grammar(memoryStream);
            speechRecognitionEngine.LoadGrammar(g);
        }

        speechRecognitionEngine.SpeechRecognized += new EventHandler<SpeechRecognizedEventArgs>(speechEngine_SpeechRecognized);
        speechRecognitionEngine.SpeechRecognitionRejected += new EventHandler<SpeechRecognitionRejectedEventArgs>(speechEngine_SpeechRecognitionRejected); 
```

SpeechRecognitionEngine.SetInputToAudioStream(sensor.AudioSource.Start(), new SpeechAudioFormatInfo(EncodingFormat.Pcm, 16000, 16, 1, 32000, 2, null));

```
 speechRecognitionEngine.RecognizeAsync(RecognizeMode.Multiple); 
```

..

一切正常，SpeechRecognized 事件被正确触发..

问题是，当我启用骨骼数据跟踪时，

```
 sensor.SkeletonStream.Enable();
          sensor.SkeletonStream.TrackingMode = SkeletonTrackingMode.Seated;
          sensor.SkeletonFrameReady += sensor_SkeletonFrameReady; 
```

语音识别停止工作...

我能得到你的帮助吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:30:42.617

如果在开始音频捕获后启用骨架流，则不会处理音频由于一个错误，启用或禁用 SkeletonStream 将停止 Kinect 传感器返回的 AudioSource 流。以下指令序列将停止音频流： kinectSensor.Start(); kinectSensor.AudioSource.Start(); // --> 这将创建一个音频流 kinectSensor.SkeletonStream.Enable(); // --> 这将停止音频流作为不受欢迎的副作用

解决方法是颠倒调用顺序或在更改 SkeletonStream 状态后重新启动 AudioSource。

```
 Workaround #1 (start audio after skeleton):
        kinectSensor.Start();
        kinectSensor.SkeletonStream.Enable();
        kinectSensor.AudioSource.Start();

        Workaround #2 (restart audio after skeleton):
        kinectSensor.Start();
        kinectSensor.AudioSource.Start(); // --> this will create an audio stream
        kinectSensor.SkeletonStream.Enable(); // --> this will stop the audio stream as an undesired side effect
        kinectSensor.AudioSource.Start(); // --> this will create another audio stream 
```

来源 - [http://msdn.microsoft.com/en-us/library/jj663798.aspx](http://msdn.microsoft.com/en-us/library/jj663798.aspx)

# algorithm - 最大加权跨越弱连接 DAG 的算法

> ID：14046730
> 
> 赞同：0
> 
> 时间：2012-12-26T21:55:26.627
> 
> 标签：algorithm, graph, directed-acyclic-graphs, subgraph

是否有一种算法可以找到在有向图中弱连接的 DAG 的最大权重，其中每个切割都有弱连接的集合（从一个集合到另一个集合至少有一条有向路径）？或者这是一个NP难题？关于这个主题的上一个问题没有指定[https://mathoverflow.net/questions/31864/algorithms-for-maximum-weighted-spanning-connected-dag-directed-acyclic-graph](https://mathoverflow.net/questions/31864/algorithms-for-maximum-weighted-spanning-connected-dag-directed-acyclic-graph)弱连接或强连接，所以我想成为更精确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-20T22:36:44.137

希望这不会太晚。对于上述案例，Kruskal 和 Prim 都很容易失败。考虑一个 2 节点图：A --> B（权重 10），B --> A（权重 6），B --> A（权重 6）（是：从 B 到 A 的两条边；图中没有任何内容排除了！）。Kruskal 会首先选择 A --> B 边缘并卡住。Prim 会选择从 B 到 A 的边缘之一，然后卡住。最大。加权无环子图是包含从 B 到 A 的两条边的子图。它是一个子图，它是无环的！

最好的拉维

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T00:50:08.723

您的弱连接条件似乎只是底层无向图是连接的。这很容易；您可以使用 Kruskal 或 Prim 或任何您最喜欢的最小生成树算法。

最小权重强连通子图是 NP 完全的；观察到任何这样的子图至少有 |V| 边缘并且它正好有 |V| 边当且仅当它是哈密顿循环。

您可能希望选择一个顶点作为“根”，并要求在子图中有一条从每个顶点到根的路径。这就是“最小扩展树状结构”问题。正如@matejpavouk 指出的那样，由于 Chu、Liu 和 Edmonds，有一个二次算法。

# html - 如何在浏览器中禁用 CSS 以进行测试

> ID：14046738
> 
> 赞同：137
> 
> 时间：2012-12-26T21:55:51.583
> 
> 标签：html, css, browser

有什么方法可以禁用浏览器（Firefox、Chrome ......）中的所有外部 CSS？

当使用较慢的互联网连接时，有时浏览器只加载裸 HTML 而没有 CSS 信息。看起来页面已经被放在屏幕上。你也会在 StackOverflow 上注意到这一点。

我想确保我的网页即使没有加载 CSS 文件也能正常显示。

我并不是说我想将外部 CSS 转换为内联。但我想要一种从浏览器中显式禁用所有 CSS 的方法，以便我可以以更好、更易读的方式重新定位我的元素。

我知道我可以删除 <link rel='stylesheet'> 条目，但是如果我有很多链接页面怎么办？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-07-27T00:07:44.980

在 Chrome/Chromium 中，您可以在开发者控制台中执行此操作。

1.  通过 ctrl-shift-j 或 Menu->Tools->Developer Console 调出开发者控制台。
2.  在开发者控制台中浏览到 Sources 选项卡。
3.  此选项卡的左上角是一个带有显示三角形的图标。点击它。
4.  浏览到<域>→css→<要删除的css文件>
5.  突出显示所有文本并点击删除。
6.  冲洗并重复您要禁用的每个样式表。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2012-12-26T21:58:03.810

[Firefox](https://addons.mozilla.org/firefox/addon/web-developer/)和[Chrome](https://chrome.google.com/webstore/detail/web-developer/bfbameneiokkgbdmiekhjnmfkcnldhhm)的 Web Developer 插件能够做到这一点

安装插件后，该选项在 CSS 菜单中可用。例如，`CSS > Disable Styles > Disable All Styles`

![](../Images/0d8a87783a05bc1aa7b19e1de9ab6a46.png)

或者，启用开发人员工具栏后，您可以按`Alt+Shift+A`。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-03-07T19:30:46.283

火狐（Win 和 Mac）

*   通过菜单工具栏，选择：“视图”>“页面样式”>“无样式”
*   通过 Web 开发人员工具栏，选择：“CSS”>“禁用样式”>“所有样式”

如果安装了 Web Dev Toolbar，人们可以使用这个键盘快捷键：`Command`+ `Shift`+ `S`(Mac) 和`Control`+ `Shift`+ `S`(Win)

*   Safari (Mac)：通过菜单工具栏，选择“开发”>“禁用样式”
*   Opera（Win）：通过菜单，选择“页面”>“样式”>“用户模式”
*   Chrome（Win）：通过齿轮图标，选择“CSS”选项卡>“禁用所有样式”
*   Internet Explorer 8：通过菜单工具栏，选择“查看”>“样式”>“无样式”
*   Internet Explorer 7：通过 IE 开发人员工具栏菜单：禁用 > 所有 CSS
*   Internet Explorer 6：通过 Web 辅助工具栏，选择“CSS”>“禁用 CSS”

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-09-24T12:28:04.323

这个脚本对我有用（给scrappedcola的帽子小费）

```
var el=document.getElementsByTagName('*');for(var i=0;i<el.length; i++){if (el[i].getAttribute("type")=="text/css") el[i].parentNode.removeChild(el[i]); }; 
```

内联样式保持不变，但

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-03-26T15:12:35.473

扩展 scrappedocola/renergy 的想法，您可以将[JavaScript 转换为](http://www.dev-hq.net/posts/1--create-javascript-bookmarklet)针对`javascript:`uri 执行的小书签，这样代码就可以在多个页面中轻松重复使用，而无需打开开发工具或在剪贴板上保留任何内容。

只需运行以下代码段并将链接拖到您的书签/收藏夹栏：

```
<a href="javascript: var el = document.querySelectorAll('style,link');
         for (var i=0; i<el.length; i++) {
           el[i].parentNode.removeChild(el[i]); 
         };">
  Remove Styles 
</a>
```

*   我会避免循环浏览页面上的数千个元素，`getElementsByTagName('*')`并且必须单独检查和处理每个元素。
*   `$('style,link[rel="stylesheet"]').remove()`当额外的 javascript 不是非常繁琐时，我会避免依赖页面上存在的 jQuery 。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2012-12-26T22:14:10.013

安装 Adblock Plus，然后`*.css`在过滤器选项（自定义过滤器选项卡）中添加规则。该方法仅影响**外部样式表**。它不会关闭内联样式。

> 禁用所有外部 CSS

这种方法完全符合您的要求。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2017-03-09T16:21:26.370

## `<head>`用小书签删除

对于依赖外部 CSS 的页面（现在大多数页面），您可以删除该`head`元素：

```
document.querySelector("head").remove(); 
```

用法：右键单击页面（在 Chrome/Firefox 中），选择*Inspect*，将上面的代码粘贴到 devtools 控制台中，然后按*Enter*。

可以粘贴为书签 URL 的相同代码的书签版本：

```
javascript:(function(){document.querySelector("head").remove();})() 
```

现在单击书签栏中的书签将（希望）删除所有 css 样式表。

## `<head>`通过 devtools删除

实现它的另一种方法是右键单击页面（在 Chrome/Firefox 中），选择`Inspect`，在 devtools 面板中，元素选项卡选择`<head>`标签（见截图），右键单击它，然后选择`Delete element`：

[![删除头部标签](../Images/1f0fb13d839824f98a79fc59b00386a1.png)](https://i.stack.imgur.com/kLTgT.png)

> 注意：移除头部不适用于使用内联样式的页面。

## 仅限 Safari 的解决方案

如果您碰巧在 MacOS 上使用 Safari，那么：

1.  打开 Safari 首选项 ( `cmd`+ `,`) 并在**高级**选项卡中启用复选框“在菜单栏中显示开发菜单”。
2.  现在在“**开发**”菜单下，您将找到“*禁用样式”*选项。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-10-07T15:08:49.490

以更少的步骤实现@David Baucum[解决方案的另一种方法：](https://stackoverflow.com/a/17892877/426193)

1.  右键单击-> 检查元素
2.  单击影响您的元素的样式表名称（就在声明的右侧）
3.  突出显示所有文本并点击删除。

在某些情况下它可能更方便。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-07-21T12:57:49.433

由于这里的大多数答案似乎已经很老了，引用我在流行浏览器的当前版本中似乎找不到的菜单项，这里是如何在 Firefox 开发者版的当前版本中做到这一点：

*   打开开发者工具 ( `CTRL + SHIFT + I`)
*   选择样式编辑器选项卡
*   在那里，您应该可以看到文档中的所有 CSS 来源。您可以通过单击它们旁边的眼睛图标来禁用它们中的每一个。

[![白眼图标 = 启用； 灰色眼睛图标 = 禁用](../Images/13c2cbc57d803ac456df045f6c299f1e.png)](https://i.stack.imgur.com/7B97c.png)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-07-09T17:20:55.147

您可以使用以下命令阻止来自检查器的任何请求（即使是单个 css 文件）：
    **右键单击 > 阻止请求 URL**
而不禁用其他 css 文件 > [https://umaar.com/dev-tips/68-block-requests/](https://umaar.com/dev-tips/68-block-requests/) 这是标准检查器功能，无需插件或技巧

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-03-19T16:14:09.387

我在 Chrome 开发人员工具中尝试过，该方法仅在 CSS 作为外部文件包含并且不适用于内联样式时才有效。

```
Array.prototype.forEach.call(document.querySelectorAll('link'), (element)=>element.remove()); 
```

或者

```
var linkElements = document.querySelectorAll('link');
Array.prototype.forEach.call(linkElements, (element)=>element.remove()); 
```

解释

1.  `document.querySelectorAll('link')`获取所有链接节点。这将返回 DOM 元素的数组。请注意，这不是 JavaScript 的 Array 对象。
2.  `Array.prototype.forEach.call(linkElements`循环通过链接元素
3.  `element.remove()`从 DOM 中移除元素

生成纯 HTML 页面

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-12-26T22:04:53.393

在 Firefox 上，最简单的方法是通过菜单命令 View > Page Style > No Style。但这也关闭了一些展示性 HTML 标记的效果。因此，使用@JoelKuiper 建议的插件通常会更好；它们提供了更大的灵活性（例如，只关闭一些样式表）。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-04-26T11:56:34.813

对于那些不想要任何插件或其他东西的人，我们可以使用 document.styleSheets 来禁用/启用 css。

// 禁用所有 css 的代码

```
for (const item in document.styleSheets) {
  document.styleSheets[item].disabled=true;
} 
```

如果您使用 chrome，您可以创建一个函数并添加到您的代码片段中。这样您就可以使用控制台启用/禁用任何站点的 css。

// 片段 -> DisableCSS

```
function disableCss(value = true){
  for (const item in document.styleSheets) {
    document.styleSheets[item].disabled=value;
  }  
} 
```

// 在控制台中

```
disableCss() // by default is disable
disableCss(false) // to enable 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-04-27T12:58:05.220

对于铬：

1.  打开开发工具（检查元素）。
2.  转到“网络”选项卡。
3.  选择任意 css 文件并右键单击：“阻止请求 url”。
4.  转到检查员的页脚到“网络请求阻止”选项卡。
5.  单击加号图标，然后添加一些模式，如“*.css”。
6.  重新加载网页。

此过程允许一次禁用所有 css 文件。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-12-26T22:02:12.210

事实上，这比你想象的要容易。在任何浏览器中按 F12 以调出调试控制台。这适用于 IE、Firefox 和 Chrome。不确定 Opera。然后注释掉元素窗口中的 CSS。而已。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-01-18T20:18:58.917

所有建议的答案只是消除了该页面加载的 css。根据您的用例，您可能希望根本不加载 css：

Chrome 开发工具 > 网络选项卡 > 右键单击​​有问题的样式表 > 阻止请求 url

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-12-23T22:19:36.643

在使用您喜欢的浏览器开发工具（例如 Chrome Devtools）检查 HTML 时，找到该`<head>`元素并将其完全删除。

请注意，这**也会删除 js**，但对我来说，这是让页面**裸露****的最快方法**。

 *** * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-02-21T11:16:25.290

因为没有其他人提到这种可能性。您还可以从`DevTools > Network request blocking`. 这为您提供了更多的粒度和易用性。

它很可能在第一次使用之前被隐藏起来。只需在 Devtools 中按`Command + shift + P`（我假设它在 Linux/Win 上）并输入.`ctrl + shift + P``network request blocking`

[![在此处输入图像描述](../Images/d00edb4ff00924db3815dcdd625135e2.png)](https://i.stack.imgur.com/ukLtk.png)

然后，您可以定义要阻止的资源，即。`*.css`和/或`*.js`并单击`Enable network request blocking`复选框。

[![在此处输入图像描述](../Images/d9ba26a5ad3f87032a99dd6b5f4acd61.png)](https://i.stack.imgur.com/QDoMD.png)

重新加载以加载没有指定资源的页面。**

# algorithm - 动态规划和延续传递风格

> ID：14046739
> 
> 赞同：2
> 
> 时间：2012-12-26T21:55:58.400
> 
> 标签：algorithm, recursion, f#, dynamic-programming, continuations

对于像斐波那契这样的简单问题，编写 CPS*相对*简单

```
let  fibonacciCPS n =
  let rec fibonacci_cont a cont =
    if a <= 2 then cont 1
    else
      fibonacci_cont (a - 2) (fun x ->
        fibonacci_cont (a - 1) (fun y ->
          cont(x + y)))

  fibonacci_cont n (fun x -> x) 
```

[但是，在此处](http://faculty.ycp.edu/~dbabcock/PastCourses/cs360/lecture/lecture13.html)的切杆示例 （或[算法介绍](http://en.wikipedia.org/wiki/Introduction_to_Algorithms)书）的情况下，闭包的数量并不总是等于 2，并且不能硬编码。

我想必须将中间变量更改为序列。

（我喜欢将延续视为一份合同，上面写着“当你有价值时，把它传给我，然后我会在治疗后把它传给我的老板”或类似的东西，这会推迟实际执行）

对于棒材切割，我们有

```
//rod cutting
let p = [|1;5;8;9;10;17;17;20;24;30|]

let rec r n = seq { yield p.[n-1]; for i in 1..(n-1) -> (p.[i-1] + r (n-i)) } |> Seq.max 
[1 .. 10] |> List.map (fun i -> i, r i) 
```

在这种情况下，我需要附加新创建的延续

```
let cont' = fun (results: _ array) -> cont(seq { yield p.[n-1]; for i in 1..(n-1) -> (p.[i-1] + ks.[n-i]) } |> Seq.max) 
```

返回子问题的“笛卡尔积”延续。有没有人看过 CPS 版本的切割棒/对此有任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:09:42.553

我假设你想显式地 CPS 一切，这意味着像列表理解这样的一些好东西将会丢失（也许使用异步块会有所帮助，我不太了解 F#）——所以从一个简单的递归函数开始：

```
let rec cutrod (prices: int[]) = function
    | 0 -> 0
    | n -> [1 .. min n (prices.Length - 1)] |>
           List.map (fun i -> prices.[i] + cutrod prices (n - i)) |>
           List.max 
```

很明显，我们需要使用的列表函数的 CPS 版本（map、max，如果您也想 CPS [1..(blah)] 表达式，可能还有一个列表构建函数）。map 非常有趣，因为它是一个高阶函数，所以它的第一个参数需要修改为采用 CPS ed 函数。这是 CPS List.map 的实现：

```
let rec map_k f list k = 
  match list with
    | [] -> k []
    | x :: xs -> f x (fun y -> map_k f xs (fun ys -> k (y :: ys))) 
```

请注意，map_k 像任何其他 CPS 函数一样调用其参数 f，并将 map_k 中的递归放入延续中。使用 map_k、max_k、gen_k（它构建一个从 1 到某个值的列表），cut-rod 函数可以进行 CPS 编辑：

```
let rec cutrod_k (prices: int[]) n k = 
  match n with
    | 0 -> k 0
    | n -> gen_k (min n (prices.Length - 1)) (fun indices ->
               map_k (fun i k -> cutrod_k prices (n - i) (fun ret -> k (prices.[i] + ret))) 
                     indices 
                     (fun totals -> max_k totals k)) 
```

# concurrency - Paxos 与 Snapshot Isolation 并发控制的关系

> ID：14046740
> 
> 赞同：1
> 
> 时间：2012-12-26T21:55:59.133
> 
> 标签：concurrency, database-replication, consistency, paxos, snapshot-isolation

我想知道基于 Paxos 的复制方案与快照隔离等不同并发模型之间的实际关系是什么。任何人都可以用很少的实际例子来解释这两者的关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:07:02.790

快照隔离是一种强一致性并发标准，因为它完全排序冲突更新。总订单相当于分布式系统中的共识。Paxos 是一种在有进程故障的分布式系统中达成共识的解决方案。所以你的问题的答案是：快照隔离和基于 Paxos 的复制方案之间的关系是，它们在理论上应该同样难以实现（即，在相同的假设下是可能的）。

强一致性并发标准的其他示例是可串行化、线性化和顺序一致性。相比之下，因果一致性或最终一致性等弱一致性标准不需要共识，因此与您可能已经看到的基于 Paxos 的复制方案根本不同。

# google-app-engine - e.printStackTrace(); 不在应用引擎控制台中打印

> ID：14046742
> 
> 赞同：1
> 
> 时间：2012-12-26T21:56:23.470
> 
> 标签：google-app-engine

我没有看到从 e.printStackTrace() 打印的任何堆栈跟踪；在我在 google box 上运行的 java app-engine 控制台中（不是本地控制台）。我在 logging.properties 文件中尝试过日志级别 ALL、DEBUG 和 INFO。仍然没有堆栈跟踪。我只从 _logger 语句中看到我的日志记录打印。追踪错误并没有多大帮助。如何打印堆栈跟踪？

```
 { ....
    } catch (Exception e) {
        e.printStackTrace();
        _logger.severe("Exception : " + e);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:43:14.220

我遇到过同样的问题。尝试

_logger.log(Level.SEVERE, e.getMessage(),e);

反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T21:59:24.643

如果您不提供`printStackTrace()`参数，它将打印到标准错误流。此错误输出流将是 的值`System.err`。

# python - 调用函数而不首先创建类的实例

> ID：14046745
> 
> 赞同：7
> 
> 时间：2012-12-26T21:56:44.997
> 
> 标签：python

> **可能重复：**
> [Python 中的静态方法？](https://stackoverflow.com/questions/735975/static-methods-in-python)

我认为我的问题很简单，但更清楚的是，我只是想知道，我有这个：

```
class MyBrowser(QWebPage):
    ''' Settings for the browser.'''

    def __init__(self):
        QWebPage.__init__(self)
        pass

    def userAgentForUrl(self, url=None):
        ''' Returns a User Agent that will be seen by the website. '''
        return "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.15 (KHTML, like Gecko) Chrome/24.0.1295.0 Safari/537.15" 
```

还有一些在不同的类中，即在同一个文件中，我想获得这个用户代理。

```
mb = MyBrowser()
user_agent = mb.userAgentForUrl()
print user_agent 
```

我试图做这样的事情：

```
print MyBrowser.userAgentForUrl() 
```

但收到此错误：

```
TypeError: unbound method userAgentForUrl() must be called with MyBrowser instance as first argument (got nothing instead) 
```

所以我希望你明白我的要求，有时我不想创建一个实例，而是从这种函数中检索数据。所以问题是有可能做到，或者没有，如果是的话，请给我一些关于如何实现这一点的指导。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-26T21:58:58.397

这称为*静态方法*：

```
class MyBrowser(QWebPage):
    ''' Settings for the browser.'''

    def __init__(self):
        QWebPage.__init__(self)
        pass

    @staticmethod
    def userAgentForUrl(url=None):
        ''' Returns a User Agent that will be seen by the website. '''
        return "Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.15 (KHTML, like Gecko) Chrome/24.0.1295.0 Safari/537.15"

print MyBrowser.userAgentForUrl() 
```

自然，您不能`self`在其中使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T21:58:30.087

添加[`staticmethod`装饰器](http://docs.python.org/2/library/functions.html#staticmethod)，并删除`self`参数：

```
 @staticmethod
    def userAgentForUrl(url=None): 
```

装饰器也会为您处理实例调用情况，因此您实际上可以通过对象实例调用此方法，尽管通常不鼓励这种做法。（静态调用静态方法，而不是通过实例。）

# android - GridView 滚动

> ID：14046750
> 
> 赞同：0
> 
> 时间：2012-12-26T21:57:16.307
> 
> 标签：android, gridview, scroll, duration

我正在使用包含许多项目的网格视图。我在活动中有一个按钮，可以自动滚动到gridview的顶部，使用：

```
gridView.smoothScrollToPosition (0); 
```

我正在尝试使自动滚动非常慢。有没有办法控制这个滚动的持续时间或速度？

我正在寻找但找不到简单的方法来做到这一点

我真诚地感谢任何帮助

谢谢和最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:04:28.963

您可以查看下面的示例，希望对您有所帮助

[http://www.java-samples.com/showtutorial.php?tutorialid=1515](http://www.java-samples.com/showtutorial.php?tutorialid=1515)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T00:39:29.810

尝试这个：

[Android：Horizo​​ntalScrollView smoothScroll 动画时间](https://stackoverflow.com/questions/5193678/android-horizontalscrollview-smoothscroll-animation-time/5193880#5193880)

它使用计数器一次滚动小增量，以使滚动看起来更慢。

另外（我认为更好的解决方案）是子类化您的gridview并覆盖由smoothscrollto调用的smoothscrollby方法并在那里设置持续时间：http: [//grepcode.com/file/repository.grepcode.com/ java/ext/com.google.android/android/1.5_r4/android/widget/Horizo​​ntalScrollView.java#Horizo​​ntalScrollView.smoothScrollBy%28int%2Cint%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/HorizontalScrollView.java#HorizontalScrollView.smoothScrollBy%28int%2Cint%29)

# c# - 是否可以在安卓机器上安装单声道或类似的（C# 编译器如 AIDE）？

> ID：14046752
> 
> 赞同：0
> 
> 时间：2012-12-26T21:57:59.037
> 
> 标签：c#, android, mono

我正在寻找一段时间，但没有得到解决方案。

如果你想用 c# 编写移动应用程序，你可以按照我的理解安装 mono。它可以在以下站点[http://xamarin.com/monoforandroid](http://xamarin.com/monoforandroid)上找到 。

因此它们同时支持 Windows 和 IOS。但我认为他们不支持在 android 上运行他们的软件

我的问题是：是否有任何工具可以在 android 设备上使用 c# 编写代码？

我的意思是我想编写 C# 代码并直接在我的 android 设备上编译。

我知道用于 java 的 AIDE，但似乎不存在像 AIDE for C# 这样的工具

谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T22:00:54.513

该`Mono for Android`项目允许您使用 C# 编写代码并在 Android 平台上运行它。它将与您的应用程序一起安装 Mono 运行时。

Mono 运行时与 Dalvik 虚拟机一起运行，因此性能与用 Java 编写应用程序并在 Dalvik 内部运行相当。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T21:08:39.920

看看[C# To Go](https://play.google.com/store/apps/details?id=com.gregshackles.csharptogo)，一个在 Android 上运行的简单 C# 编译器。Mono C# 编译器已被移植到 Mono for Android，并且[该端口](https://github.com/gshackles/runcs)也可供您使用。

请注意，编译器并不完美。[介绍 C# To Go](http://www.gregshackles.com/2011/07/introducing-c-to-go-a-c-compiler-for-android/)详细介绍了您可能面临的一些问题。不过，它可能足以满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T22:34:31.230

我不知道像 AIDE 这样的工具，您可以在其中使用 C# 在 Android 上编写代码、在 Android 上编译并部署到同一设备。这样的工具必须来自 Xamarin，因为他们持有 MonoDroid 的 IP 并出售许可证。

# smarty - 聪明的错误信息

> ID：14046756
> 
> 赞同：0
> 
> 时间：2012-12-26T21:58:06.213
> 
> 标签：smarty

运行代码时收到此消息：

> 注意：未定义变量：/homepages/40/d35550088/htdocs/smarty/templates_c/e67335bdbe5116dd4daf1e08d56ae4cdd2230780.file.edit.tpl.cache.php 中的 _GET 在第 99 行

编译模板的第 99 行： `<b><?php echo $_GET['Table'];?>`

我与 Get 合作： `{$smarty.get.Table}`

使用 php REQUEST 然后将变量分配给 smarty 会更好吗？

使用 smarty 构造获取 url 变量可能更有效？如何解决未定义变量问题？

关于错误报告，我使用默认值。关于ini，我使用：ini_set('display_errors', 0); 所以不应该出现任何通知，这很奇怪！

# eclipse - JBoss 工具 - .xhtml 缩进

> ID：14046771
> 
> 赞同：2
> 
> 时间：2012-12-26T21:59:31.567
> 
> 标签：eclipse, jboss-tools

我在我的项目中添加了 JBoss 工具，试图添加一些 JSF 2 bean 感知内容完成。我真的很高兴这是怎么回事。我正在使用 Eclipse for Java EE Juno 服务版本 1 Build id：20120920-0800。我在这个项目上安装了 CDI、动态 Web 模块、Java、javascript、JSF 2.1、JAX-RS 1.1 JBoss Maven Integration 1.0 和 JPA 2.0 方面。

但是现在，当我在 Eclipse 中使用 ctrl-i 正确“对齐”所有内容时，我的 .xhtml 文件会折叠标签下方的第一层标签。我真的不喜欢它的外观，而且我认为如果其他人加入该项目，这将不是标准的。这就是它的作用。

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en"
  xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Login Error</title>
    </head>
    <body>
        <h2>Invalid user name or password.</h2>

        <p>Please enter a user name or password that is authorized to access this
            application. For this application, this means a user that has been
            created in the <code>file</code> realm and has been assigned to the
            <em>group</em> of <code>TutorialUser</code>.</p>
        <p><a href="faces/index.xhtml">Return to login page</a></p>
    </body>
</html> 
```

使用 ctrl-i 后变成下面的块

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Login Error</title>
</head>
<body>
    <h2>Invalid user name or password.</h2>

    <p>
    Please enter a user name or password that is authorized to access this
    application. For this application, this means a user that has been
    created in the
    <code>file</code>
    realm and has been assigned to the <em>group</em> of
    <code>TutorialUser</code>
    .
    </p>
    <p>
        <a href="faces/index.xhtml">Return to login page</a>
    </p>
</body>
</html> 
```

请注意如何和标签都缺少缩进级别。任何有关如何解决此问题或在何处配置它的想法将不胜感激。

# html - 测试网站，出现空白页

> ID：14046773
> 
> 赞同：0
> 
> 时间：2012-12-26T21:59:57.633
> 
> 标签：html, internet-explorer, conditional-comments

当我在 IE 5.5、6.0、7.0 和 8.0 中测试网站时，会加载一个空白页面。该网站在 Firefox、Safari、Opera 和 Chrome 中运行良好。我认为这个问题与条件评论有关。

下面是我的源代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Chris Schnitzer | Home</title>
<link href="home.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery-1.7.1.min.js"></script>
<script type="text/javascript">
$(function() {
    $('.homewrap').hover(function() {
        $(this).children('.front').stop().animate({ "top" : '200px'}, 500);
    }, function() {
        $(this).children('.front').stop().animate({ "top" : '0'}, 300);
    });
});
</script>

<!--[if IE5]>
<style type="text/css">
/* place haslayout fix for IE 5* in this conditional comment */
#headerright, #mainContenttext, #mainContentrigheducation, #mainContentrightexpertise { height: 1%; }
</style>
<![endif]-->

<!--[if IE]>
<style type="text/css">
/* place css fixes for all versions of IE in this conditional comment */
#headerright, #mainContenttext, #mainContentrighteducation, #mainContentrightexpertise { zoom: 1; }
/* the above proprietary zoom property gives IE the hasLayout it needs to avoid several bugs */
</syle>
<![endif]--> 

</head>

<body>
<div id="container">
<div id="header">
         <div id="headerleft"><!-- #BeginLibraryItem "/Library/logo.lbi" -->
<a href="index.html"><img src="assets/images/logo.png"  width="135" height="77" alt="chris schnitzer logo" /></a><!-- #EndLibraryItem -->
    </div>

    <div id="headerright">
    <div id="topnav"><!-- #BeginLibraryItem "/Library/topnav.lbi" --><ul>
    <li><a href="index.html">Home</a>|<a href="Whatido/index.html">What I Do</a>|<a href="portfolio/index.html">Portfolio</a>|<a href="contactme/index.html">Contact Me</a></li>
     </ul><!-- #EndLibraryItem --></div>
    </div>
    </div>

    <div id="greetingandintrowrap">
<div id="greetingtext">Hello, Gutentag, Sawubona!</div>
    <div id="intro">
      <h4>I am Chris and thank you for taking your time to view my portfolio</h4>
    </div>
</div>

  <div id="mainContent">
<div id="mainContenthome">
  <a href="Whatido/index.html"><div class="homewrap">
    <img src="assets/images/whatidohomepgback.png" width="200" height="200" alt="What I Do" />
    <img src="assets/images/whatidohomepgfront.png" class="front" width="200" height="200" alt="What I Do" />
    </div></a>

  <a href="portfolio/index.html"><div class="homewrap"> 
    <img src="assets/images/portfoliohomepgback.png" width="200" height="200" alt="Portfolio" />
    <img src="assets/images/portfoliohomepgfront.png" class="front" width="200" height="200" alt="Portfolio" />
    </div></a>

  <a href="contactme/index.html"><div class="homewrap">
    <img src="assets/images/contactmehomepgback.png" width="200" height="200" alt="Contact Me" />
    <img src="assets/images/contactmehomepgfront.png" class="front" width="200" height="200" alt="Contact Me" />
    </div></a>
  <br class="clearfloat" />
</div>
</div>

  <div id="footercontent">
<p>I have a <span class="bolddarkblue">passion</span> for designing visually appealing content<span class="bolddarkblue"></span> 
      that <span class="bolddarkblue">communicates </span> your message whether it is for print or the web using 
      HTML,  CSS, JQuery and Flash to design <span class="bolddarkblue">Standard Compliant</span> websites.</p>
</div>
  <div id="footer"><div id="altlogo"><!-- #BeginLibraryItem "/Library/altnav.lbi" -->

<a href="index.html"><img src="assets/images/smalllogo.png" width="41" height="24" alt="chris schnitzer logo" /></a>
</div>

<div id="altnav">
<ul>

<li><a href="index.html">Home</a></li>
<li><a href="Whatido/index.html">What I Do</a></li>
<li><a href="portfolio/index.html">Portfolio</a></li>
<li><a href="contactme/index.html">Contact Me</a></li>
</ul>
</div></div><!-- #EndLibraryItem -->
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:01:57.557

在您上次的 IE 条件注释中，您没有`<style>`正确关闭元素：

```
<!--[if IE]>
<style type="text/css">
/* place css fixes for all versions of IE in this conditional comment */
#headerright, #mainContenttext, #mainContentrighteducation, #mainContentrightexpertise { zoom: 1; }
/* the above proprietary zoom property gives IE the hasLayout it needs to avoid several bugs */
**</syle>**
<![endif]-->
```

# ruby-on-rails-3 - Rails Fullcalendar 仅显示当前员工事件

> ID：14046774
> 
> 赞同：0
> 
> 时间：2012-12-26T22:00:00.413
> 
> 标签：ruby-on-rails-3, fullcalendar

我希望 arshaw.com/fullcalendar 仅显示当前用户的事件。

Fullcalendar 的代码使用以下语句选择日期：

```
 eventSources: [{
  url: '/events',
}], 
```

Events 表中有employee_id。你如何配置一个 url，以便它只获取某个员工的 json 记录？

```
url: '/events?employee_id='2' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:06:57.047

我在服务器端执行此操作。我写了一个查询，它只返回`owner_id`与`current_user.id`. 即使您决定在客户端执行此操作，您仍然应该进行服务器端验证，以检查登录的用户是否真的`employee_id`提交了完整的日历。

# mysql - YYYY 年中的两位数年份

> ID：14046776
> 
> 赞同：2
> 
> 时间：2012-12-26T22:00:27.837
> 
> 标签：mysql

是否可以将两位数的年份转换为四位数的年份。我正在尝试从以下内容中获取 YYYY。请让我知道如何通过mysql获取它？

```
SELECT Date_Format(substr("FALL94", 5), "%Y") // OUTPUT NULL 
SELECT YEAR(substr("FALL94", 5)) // OUTPUT NULL
SELECT substr("FALL94", 5) // OUTPUT 94 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T22:12:40.353

试试这个：

```
 SELECT DATE_FORMAT(STR_TO_DATE(substr("FALL94", 5), '%y'), '%Y') AS LONG_YEAR; 
```

这里`STR_TO_DATE`with`%y`将 2 位字符串转换为日期`DATE_FORMAT`，`%Y`并将日期转换回 4 位数年份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T22:09:42.670

一种可能性可能是`makedate`：

```
select year(makedate(substr('FALL94',5),1)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T22:09:05.770

怎么样[`CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)？

```
SELECT CONCAT('19', substr("FALL94", 5)) AS `year` 
```

会给你`1994`。

# c++ - 时间变量错误的 GetFieldValue

> ID：14046779
> 
> 赞同：0
> 
> 时间：2012-12-26T22:01:04.917
> 
> 标签：c++, visual-c++, mfc

我已经声明了以下结构来保存通过 getfieldvalue 从访问数据库检索到的数据：错误出现在 Spds_old->Time_old.push_back(OldTime); 在数据库中，该值为下午 3:00:00。你能告诉我错误吗？谢谢你。如果您需要更多信息，请告诉我。谢谢你-基兰

```
typedef struct {
        std::vector<CString> pname_old;
        std::vector<CDBVariant> Date_old;
        std::vector<CDBVariant> Time_old;

    } Spd_old; 
```

Spd_old *Spds_old;

然后在cpp文件中这是代码

```
 CRecordset rset(&pdatabase);
                CString pName;
                CDBVariant OldDate;
                CDBVariant  OldTime;

CString selectionStr = "SELECT I.PType,I.Date,I.Time FROM CCYX I,(select PType, MAX(Date) AS Date1";
                selectionStr += " FROM CCYX GROUP BY PType) T WHERE I.PType = T.PType AND I.Date =T.Date1"; 

                try
                {
                if(rset.Open(CRecordset::forwardOnly, selectionStr))
                {

                    try
                    {
                        while(!(rset.IsBOF()&&rset.IsEOF()))
                        {
                            m_Log->Log("Copying Previous spd Values from Access DB");
                            rset.GetFieldValue((short)0 ,pName );
                            rset.GetFieldValue((short)1 ,OldDate );
                            rset.GetFieldValue((short)2 ,OldTime);

                            Spds_old->pname_old.push_back(pName);
                            Spds_old->Date_old.push_back(OldDate);
                            Spds_old->Time_old.push_back(OldTime); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T23:08:29.717

问题是`CDBVariant`无法复制，因此不适合存储在`std::vector`. 一种解决方法是改为存储指针：

```
std::vector<std::unique_ptr<CDBVariant>> Date_old;
std::vector<std::unique_ptr<CDBVariant>> Time_old;
...
std::unique_ptr<CDBVariant> OldDate(new CDBVariant);
...
rset.GetFieldValue((short)1 , *OldDate);
...
Spds_old->Date_old.push_back(std::move(OldDate)); 
```

我`std::unique_ptr`在上面的示例中使用过，但您也可以使用其他选项。

# c++ - 在父对象的构造函数中给子对象一个指向父对象的指针？

> ID：14046783
> 
> 赞同：3
> 
> 时间：2012-12-26T22:01:46.483
> 
> 标签：c++, oop, object, this

我试图找到一种简单的方法将“this”指针的值分配给另一个指针。我希望能够做到这一点的原因是我可以拥有一个指向每个种子的父苹果对象的自动指针。我知道我可以手动将父苹果的地址分配给种子：MyApple.ItsSeed->ParentApple = &MyApple; 但我试图找到一种使用“this”指针更方便地执行此操作的方法。让我知道这是否被推荐/可能，如果是的话 - 告诉我我做错了什么。

这就是我现在所拥有的：

主.cpp：

```
#include <string>
#include <iostream>
#include "Apple.h"
#include "Seed.h"

int main()
{
///////Apple Objects Begin///////
    Apple       MyApple;
    Seed        MySeed;

    MyApple.ItsSeed = &MySeed;

    MyApple.Name = "Bob";

    MyApple.ItsSeed->ParentApple = &MyApple;

    std::cout << "The name of the apple is " << MyApple.Name <<".\n";
    std::cout << "The name of the apple's seed's parent apple is " << MyApple.ItsSeed->ParentApple->Name <<".\n";

    std::cout << "The address of the apple is " << &MyApple <<".\n";

    std::cout << "The address of the apple is " << MyApple.ItsSeed->ParentApple <<".\n";

    return 0;
} 
```

苹果.h：

```
#ifndef APPLE_H
#define APPLE_H

#include <string>

#include "Seed.h"

class Apple {
public:
    Apple();
    std::string Name;
    int Weight;
    Seed* ItsSeed;
};

#endif // APPLE_H 
```

苹果.cpp：

```
#include "Apple.h"
#include "Seed.h"

Apple::Apple()
{
    ItsSeed->ParentApple = this;
} 
```

种子.h：

```
#ifndef SEED_H
#define SEED_H

#include <string>

class Apple;

class Seed {
public:
    Seed();
    std::string Name;
    int Weight;
    Apple* ParentApple;
};

#endif // SEED_H 
```

种子.cpp：

```
#include "Seed.h"

Seed::Seed()
{

} 
```

一切都编译得很好。但是每当我取消注释 ItsSeed->ParentApple = this; 程序崩溃而不产生任何输出。这是一个人为的例子来演示这个问题。我觉得这个问题与“this”指针的滥用有关，或者它可能与某种循环循环有关。但我不确定 - 将“this”的值分配给任何东西都没有得到好的结果。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T22:04:05.847

这是意料之中的，因为此时您还没有初始化`ItsSeed`任何东西；您正在取消引用未初始化的指针。这会触发未定义的行为，在此特定情况下会导致崩溃。

在尝试取消引用之前，您需要将指针初始化为非空值。

例如，您可能会使用一对构造函数，并且仅在获得非空指针时才设置种子的 ParentApple 字段：

```
Apple::Apple() : ItsSeed(NULL)
{
}

Apple::Apple(Seed * seed) : ItsSeed(seed)
{
    if (seed) {
        seed->ParentApple = this;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:08:25.253

您的程序崩溃是因为您没有`Apple::ItSeed`使用指向有效实例的指针初始化成员`Seed`。

# asp.net - 使用代码动态加载 SSL

> ID：14046784
> 
> 赞同：1
> 
> 时间：2012-12-26T22:01:48.080
> 
> 标签：asp.net, security, ssl

到目前为止，我的问题是一个纯粹的理论问题。我想制作一个支持多个站点的 CMS。

到目前为止我无法弄清楚的问题是：如何从代码隐藏中附加 https 协议的 ssl 证书，而不是通过托管接口或 iis 本身附加它（主要问题是我想为每个站点使用不同的 ssl 证书，而不是将它们分组在一个证书上，最多允许 5 个域，并且仍然会说它们是同一个实体）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T06:58:19.740

这在 ASP.NET 级别上无法解决。

原因是对于 HTTPS 请求，SSL 握手（提供证书的地方）是在客户端发送 HTTP 请求之前执行的，您可以从中了解域。

唯一的例外是 TLS 中的 server-name-indication 扩展，它允许客户端在 SSL 请求中指定所需的域。但是许多客户端不支持此扩展，并且它不存在于仍在使用的 SSL3 协议版本中。即使有了这个扩展，决定出示哪个证书的还是 SSL 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T08:18:35.730

正如 Eugene 所说，管理 SSL 证书超出了 ASP.Net 的级别；但是，您可以创建某种形式的管理例程来执行 IIS7（及更高版本）AppCmd.exe 的命令行工具来管理证书：

即（shell命令--安全权限很重要）：appcmd.exe set config -section:system.applicationHost/sites /+"[name='Default Web Site'].bindings.[protocol='https',bindingInformation=' *:443:']" /commit:apphost

System.Security.Cryptography.X509Certificates.X509Certificate 命名空间也可能派上用场。

# python - 如何在 Django 循环模板中对已订购项目进行分组（打印标题）？

> ID：14046785
> 
> 赞同：1
> 
> 时间：2012-12-26T22:01:49.813
> 
> 标签：python, django, django-templates

我有一个看起来像这样的 Django 模型：

```
class City(models.Model):
    country = models.CharField(max_length=50)
    city = models.CharField(max_length=50)
    population = models.IntegerField() 
```

我想在我的模板中做的是打印按国家分组的城市列表，如下所示：

```
加拿大
  卡尔加里
  蒙特利尔
  多伦多
墨西哥
  华雷斯
美国
  亚特兰大
  芝加哥
  丹佛

```

我可以很容易地按国家名称订购，但我只想在第一次在 for 循环中看到模型的国家名称时将其打印为标题。在 Django 中有一种健全的方法可以做到这一点吗？

我可以在视图或查询中做些什么来为模板提供“第一次出现”的布尔值，或者在模板中以聪明的方式做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T22:11:07.240

看[`regroup`](https://docs.djangoproject.com/en/1.3/ref/templates/builtins/#regroup)，你会做这样的事情：

```
{% regroup city_list|dictsort:"country" by country as country_list %}

<ul>
{% for country in country_list %}
    <li><strong>{{ country.grouper }}</strong>
        <ul>
            {% for item in country.list %}
                <li>{{ item.city }}</li>
            {% endfor %}
        </ul>
    </li>
{% endfor %}
</ul> 
```

# ruby-on-rails-3 - javascript_include_tag ：默认值不起作用

> ID：14046787
> 
> 赞同：4
> 
> 时间：2012-12-26T22:02:05.113
> 
> 标签：ruby-on-rails-3

我正在将应用程序迁移到 Rails 3。以下 - 我在几个地方看到推荐 - 不起作用：

```
<%= javascript_include_tag :defaults %> 
```

就我而言，它扩展为：

```
<script src="/assets/defaults.js" type="text/javascript"></script> 
```

...导致 404。据我了解， :defaults 不应该包含一个名为“defaults.js”的文件；它应该包括一些基本的东西，比如prototype.js 和application.js。

请注意，在我的情况下，以下工作正常。只是如果可能的话，我宁愿使用官方推荐的方式：

```
<%= javascript_include_tag :prototype %>
<%= javascript_include_tag :application %> 
```

我正在使用 ruby​​ 1.9.3 运行 Rails 3.2.8。

我的 config/application.rb 中*没有*以下行（以任何形式）。为了迁移到 Rails 3，我创建了一个新的 Rails 3 应用程序，并使用该 application.rb 作为起点：

```
config.action_view.javascript_expansions[:defaults] = %w(foo.js bar.js) 
```

在 app/assets/javascripts 中，我有：

```
Util.js
application.js
controls.js
dragdrop.js
effects.js
prototype.js 
```

...以及一堆特定于我的应用程序的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T12:58:48.240

从 Rails 3.1 开始，它使用资产管道。这意味着您需要改变资产管理方式。

您有一个`assets/javascripts/application.rb`包含以下内容的文件：

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

看来您在 javascripts 存储库中包含 jquery、jquery_ujs 和所有其他文件。使用最后一行，您无需在此文件中执行任何其他操作。您只需在视图中包含应用程序文件，rails 将管理所有内容：

```
<%= javascript_include_tag "application" %> 
```

这与样式表完全相同。

然后在生产环境中，资产（图像、样式表、javascript）将被编译和缩小以提高效率。

[我建议你在这里](http://guides.rubyonrails.org/asset_pipeline.html)阅读更多

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-15T15:39:28.000

这里有更多关于资产管道的信息 - [http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

它的目的是使您更容易将 Javascript 分解为单独的文件进行开发，同时在生产中编译和最小化它们。

# f# - F# 是否可用于 Visual Studio 2012 Express for Desktop

> ID：14046796
> 
> 赞同：7
> 
> 时间：2012-12-26T22:03:13.533
> 
> 标签：f#, visual-studio-2012

我刚刚下载并安装了 Visual Studio 2012 express for Desktop，但无法启动 F# 项目。我看不到可以为 Visual Studio 2012 express for Desktop 安装它的在线位置。有没有解决的办法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T05:57:38.547

它实际上可用于 Visual Studio Express 2012 for Web。您需要下载适用于 Web 的 Visual Studio Express 2012 的 F# 工具（博客文章：http: [//blogs.msdn.com/b/fsharpteam/archive/2012/09/12/announcing-the-release-of-f- tools-for-visual-studio-express-2012-for-web.aspx](http://blogs.msdn.com/b/fsharpteam/archive/2012/09/12/announcing-the-release-of-f-tools-for-visual-studio-express-2012-for-web.aspx)，下载链接：[http](http://www.microsoft.com/web/gallery/install.aspx?appid=FSharpVWD11) ://www.microsoft.com/web/gallery/install.aspx?appid=FSharpVWD11 ）。我认为它不适用于 Visual Studio Express 2012 的桌面版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T20:54:28.927

虽然它仅适用于 Web 版本的 Visual Studio Express，但没有什么能阻止您使用它编写桌面应用程序：[http ://www.youtube.com/watch?v=e4R9EfFNgLU](http://www.youtube.com/watch?v=e4R9EfFNgLU)

# dll - 是否可以反编译 NSIS 脚本？

> ID：14046797
> 
> 赞同：2
> 
> 时间：2012-12-26T22:03:15.310
> 
> 标签：dll, nsis, decompiler

提取 NSIS 安装程序文件 (setup.exe) 后，我得到一个文件：

```
script.bin 
```

它是 NSIS 脚本文件。是否有任何工具或方法可以完全或部分反编译它？我从几个小时开始学习它，但没有发现任何积极的东西。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-05-03T03:44:58.557

[7-zip 版本 15.05](https://sourceforge.net/projects/sevenzip/files/7-Zip/15.05/)将反编译 NSIS 脚本。但后来的版本没有这个功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T09:25:42.220

正如[其他答案所述，由于](https://stackoverflow.com/a/3431269/317266)[7-Zip](http://www.7-zip.org/)，您可以获得 NSIS 安装程序的内容（文件，但不一定是文件夹结构），但没有工具可以获取最初编译的脚本或类似的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-12T00:21:48.960

您可以使用一个工具来提取 nsi 脚本：

[https://sourceforge.net/projects/nsidis/](https://sourceforge.net/projects/nsidis/)

# c# - 投掷 串起来？

> ID：14046799
> 
> 赞同：2
> 
> 时间：2012-12-26T22:03:35.463
> 
> 标签：c#, razor

我本质上想将多行字符串从 Razor/cshtml 视图内部传递给函数。

我希望我能用它`<text>`来完成这个。

这是我正在尝试的：

```
 @Js.Tsc(@<text>
class Greeter {
    greeting: string;
    constructor (message: string) {
        this.greeting = message;
    }
    greet() {
        return "Hello, " + this.greeting;
    }
}   

var greeter = new Greeter("world");

var button = document.createElement('button')
button.innerText = "Say Hello"
button.onclick = function() {
    alert(greeter.greet())
}

document.body.appendChild(button)
        </text>.ToString()) 
```

但我仍然得到

> 编译器错误消息：CS1660：无法将 lambda 表达式转换为类型“字符串”，因为它不是委托类型

上`@Js.Tsc(@<text>`线。

我以为`.ToString()`会正确地投射它。有没有办法做到这一点？

我知道我可以使用`@"`-style 字符串，但这使得在两者之间编写代码更加复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:30:27.473

Razor 仍然是 C# 代码，所以我想你会像传递任何其他字符串参数一样传递脚本。但是您必须转义任何特殊字符，例如双引号。而且我认为您不需要`@<text>`.

```
@Js.Tsc("class Greeter {
    greeting: string;
    constructor (message: string) {
        this.greeting = message;
    }
    greet() {
        return \"Hello, \" + this.greeting;
    }
}   

var greeter = new Greeter(\"world\");

var button = document.createElement('button')
button.innerText = \"Say Hello\"
button.onclick = function() {
    alert(greeter.greet())
}

document.body.appendChild(button);") 
```

# css - CSS字体不会加载

> ID：14046806
> 
> 赞同：1
> 
> 时间：2012-12-26T22:04:17.047
> 
> 标签：css, fonts, pyrocms

我正在尝试加载日记字体，但无论出于什么奇怪的原因，它都不会加载。

```
@font-face {  
  font-family: Brandon Grotesque;  
  src: url(/addons/shared_addons/themes/axium/fonts/brandon-grotesque.ttf) format("truetype");
}

@font-face {  
  font-family: Journal;  
  src: url(/addons/shared_addons/themes/axium/fonts/journal.ttf) format("ttf");
}

body {
  font-family: Journal;
} 
```

Brandon Grotesque 有效，但 Journal 无效

我从：[http ://www.dafont.com/journal.font 下载的](http://www.dafont.com/journal.font)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T22:06:51.163

最后的格式标识符错误：

```
format("ttf"); 
```

应该是`format("truetype")`，像布兰登怪诞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T22:53:07.490

首先，将 ttf 更改为 truetype：

```
src: url(/addons/shared_addons/themes/axium/fonts/brandon-grotesque.ttf) format("truetype"); 
```

然后，通过检查开发人员工具（chrome 中的 f12）确保它在正确的位置![在此处输入图像描述](../Images/0f0142948802a3355b87317bf5bbea22.png)

更重要的是，你要知道并不是每个浏览器都支持ttf格式，你可以在这里查看： http: [//caniuse.com/ttf](http://caniuse.com/ttf)

此外，您需要知道字体在 windows、macos/linux 中的呈现方式不同，并且字体在 windows 下的 chrome 中可能不像在 macos/linux 中那样吸引人

# functional-programming - 使用 LLVM 实现 Clean 后端是否可行

> ID：14046810
> 
> 赞同：3
> 
> 时间：2012-12-26T22:04:31.347
> 
> 标签：functional-programming, clean-language

使用 LLVM 工具包实现[Clean后端是否可行？](http://wiki.clean.cs.ru.nl/Clean)如果没有，绊脚石是什么？

此外，如果您碰巧知道 Clean 编译器用作 IR 的“ABC 汇编器”的一个很好的参考，请将其包含在您的答案中。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:05:22.807

如果没有任何关于 ABC 中级语言的文档，这将很难（我一直找不到任何东西）。

然而，这绝对是可能的。正如您自己暗示的那样，您需要实现代码生成器以使用 llvm 代替——其范围完全取决于 ABC 语言的复杂性。

Haskell 的 llvm-backend 可能会受到启发：[http ://hackage.haskell.org/trac/ghc/wiki/Commentary/Compiler/Backends/LLVM](http://hackage.haskell.org/trac/ghc/wiki/Commentary/Compiler/Backends/LLVM)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T09:34:10.880

您可能对以下文章感兴趣（由于 ST 部门搞砸了他们的服务器配置，我很难找到它们）：

Smetsers, JEW Compiling CLEAN to Abstract ABC-Machine Code，奈梅亨大学，技术报告 89-20，1989 年 10 月。描述如何将 CLEAN 转换为（中间）ABC 代码。

Koopman PWM、Eekelen MCJD van、Nöcker EGJMH、Smetsers S.、Plasmeijer MJ (1990)。“ABCmachine：用于图形重写的基于顺序堆栈的抽象机”。技术报告 90-22，奈梅亨大学。

另请参阅[http://clean.cs.ru.nl/ST_Publications](http://clean.cs.ru.nl/ST_Publications)。

# sparql - 为什么体育“团队”是通过严格的人对人查询在 dbpedia 中链接的“人”？

> ID：14046816
> 
> 赞同：1
> 
> 时间：2012-12-26T22:05:31.610
> 
> 标签：sparql, dbpedia

我有以下查询：

```
SELECT DISTINCT(?person1), ?person2
WHERE { 
   ?person1 ?p ?person2\. 
   ?person1 a foaf:Person. 
   ?person2 a foaf:Person.
}
ORDER BY ?person1
LIMIT 1000
OFFSET 0 
```

如果您在此处向下滚动查询结果：http: [//dbpedia.org/snorql/](http://dbpedia.org/snorql/)

您会看到列出的冰球队等，例如

```
:%C3%81g%C3%BAst_Hauksson   :Iceland_national_under-21_football_team 
```

为什么是这些人？我怎样才能删除它们？

我也得到如下结果：

```
:%C3%84ngelholms_FF__Jakob_Augustsson__1    :Jakob_Augustsson 
:%C3%84ngelholms_FF__Joakim_Alriksson__1    :Joakim_Alriksson 
:%C3%84ngelholms_FF__Johan_Eiswohld__1  :Johan_Eiswohld 
```

哪个只是引用同一个人 - 有没有办法在原始查询中删除这些自我引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:56:11.620

资源[http://dbpedia.org/resource/Iceland_national_under-21_football_team](http://dbpedia.org/resource/Iceland_national_under-21_football_team)的类型为 a `foaf:Person`（`dbpedia-owl:Person`等等），这就是它出现在结果集中的原因。

查看语句，我看到这个资源也是一个`dbpedia-owl:SportsTeamMember`，它是一个子类，`dbpedia-owl:Person`它是一个`owl:equivalentClass`。`foaf:Person`这显示了运动队是如何被推断为一个人的。

DBpedia 中的信息是使用模板从 Wikipedia 中提取的，如此处[所述](http://mappings.dbpedia.org/index.php/How_to_edit_DBpedia_Mappings)。通常，映射模板将 Wikipedia 信息框和其他模板中的信息映射到 DBpedia 资源属性。具有特定信息框（或对于其他映射，“普通”模板）的文章被称为特定 RDF 类。
例如，[Infobox 足球俱乐部](http://mappings.dbpedia.org/index.php/Mapping_en:Infobox_football_club)映射模板地图`dbpedia-owl:SoccerClub`从具有此信息框的文章创建类型资源。（不过，这不适用于冰岛队。）

看起来，映射[足球小队的球员](http://mappings.dbpedia.org/index.php/Mapping_en:Football_squad_player)可能对冰岛队是一个人的断言负责。该模板用于列出团队成员，但用于创建 DBpedia 资源的 Wikipedia 页面版本存在可能会破坏流程的拼写错误。我不完全确定，但它可以解释为什么不是所有的国家足球队都是打字的`foaf:Person`。

您无法从 DBpedia 中删除特定语句，但您可以更正源 Wikipedia 文章中的错误，或者更正、更新或创建 DBpedia 的映射。

要删除自我引用，您可以在子句中添加如下`FILTER`语句：`WHERE`

```
WHERE { 
    ?person1 ?p ?person2\. 
    ?person1 a foaf:Person. 
    ?person2 a foaf:Person.
    FILTER (?person1 != ?person2).
} 
```

如果您正在寻找 s 对之间特定类型的关系`foaf:Person`，您当然可以指定它们：

```
WHERE {
  ...
  ?person1 foaf:knows ?person2.
  ...
} 
```

编辑 2：我后来意识到你要求的是不同类型的自我参考。来自[DBPedia：URI 中的“__1”（双下划线）是什么意思？](https://stackoverflow.com/questions/9909369/dbpedia-whats-the-meaning-of-1-double-underscores-in-uris)我知道这些是中间节点的 URI，是为了避免使用空白节点而创建的。例如，`:%C3%84ngelholms_FF__Jakob_Augustsson__1`在 (the description of) 中 Jakob Augustsson 的（前缀）URI 是`:%C3%84ngelholms_FF`。对于足球示例，您可以添加`FILTER (?p != dbpedia-owl:currentMember)`以排除这些结果。

编辑 1：添加了一些超链接。

# powershell - 为什么错误会通过 Powershell 中的 TRY/CATCH 循环

> ID：14046820
> 
> 赞同：2
> 
> 时间：2012-12-26T22:05:50.257
> 
> 标签：powershell, exception-handling, try-catch

我有一个简单的循环，它获取服务器列表中的所有序列号；

# 开始

```
foreach ($computer in $computers) 
{
    try
    {
        Get-WmiObject -computer $computer -Class Win32_OperatingSystem|Select Serial*
    }
    catch
    {
        Write-Host "Invalid Server"
    }
} 
```

# 结尾

但是，输出看起来很丑陋，有以下错误以及少数服务器的正确输出。

Get-WmiObject : RPC 服务器不可用 Get-WmiObject : Access Denied 等（**Try/Catch**循环的目的不是消除这些吗？）

奇怪的是，有时输出也会显示“无效服务器”，那么错误之间的区别到底是什么，Try/Catch 循环的限制是什么？

我在这里做错了什么？请如果有任何问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T00:03:03.743

要使上面的代码抛出异常，您可以添加`-ErrorAction Stop`到您的`Get-WmiObject`行中，如下所示：

```
Get-WmiObject -computer $computer -Class Win32_OperatingSystem -ErrorAction Stop | Select Serial* 
```

请参阅 Keith Hill 的这篇文章：[“终止”和“非终止”错误之间的区别](http://rkeithhill.wordpress.com/2009/08/03/effective-powershell-item-16-dealing-with-errors/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:04:20.677

@Graimer 行***$ErrorActionPreference = "Stop"***成功了，输出很干净，没有错误。

# javascript - 使用 jquery 将嵌套 JSON 分配给 li

> ID：14046821
> 
> 赞同：3
> 
> 时间：2012-12-26T22:05:51.983
> 
> 标签：javascript, jquery, json, listitem

我正在尝试使用 jquery getJson 解析 json 文件。我在第一层循环没有问题，但我也需要为 li 分配一个嵌套数组。

我的 JSON 代码

```
{"Controls":[
{
    "Object":"Button",
    "ButtonAttr": [{"x": "1","y": "2","width": "3","height": "4"}]
},
{
    "Object":"Image",
    "ButtonAttr": [{"x": "5","y": "6","width": "7","height": "8"}]
},
{
    "Object":"TextField",
    "ButtonAttr": [{"x": "9","y": "10","width": "11","height": "12"}]
}
]} 
```

我的 JS/JQUERY 代码可以毫无问题地引入 JSON 的第一层并将其附加到 li。我需要弄清楚如何获得“ButtonAttr”层

```
 //Get JSON File which contains all Controls
$.getJSON('controls.json', function(data) {
    //Build Objects List
    var objectList="<ul>";
    for (var i in data.Controls) {
        objectList+="<li>" + data.Controls[i].Object +"</li>";
    }

    objectList+="</ul>";
    $('#options').append(objectList);

    //Add new Code Object based on #Options LI Index
    $(document).on('click','#options li', function() {
        var index = $('#options li').index(this);
        $('#code').append('<li>' + data.Controls[index].Object + '</li>');
        //Shows Selected LI Index
        $('#optionsIndex').text("That was div index #" + index);
    });

}); 
```

我一辈子都无法让它遍历第二个数组并列出 x、y、width 和 height 字段。

这是我想要的输出

```
<ul>
<li>Button</li>
<ul>
    <li>x:1</li>
    <li>y:2</li>
    <li>width:3</li>
    <li>height:4</li>
</ul>
<li>Image</li>
<ul>
    <li>x:5</li>
    <li>y:6</li>
    <li>width:7</li>
    <li>height:8</li>
</ul>
<li>TextField</li>
<ul>
    <li>x:9</li>
    <li>y:10</li>
    <li>width:11</li>
    <li>height:12</li>
</ul>
</ul> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:14:46.597

我在另一个问题中解决了这个问题。

[如何处理 json 中的逗号分隔对象？（[对象对象]，[对象对象]）](https://stackoverflow.com/questions/5685040/how-to-handle-comma-separated-objects-in-json-object-object-object-object)

您需要一个递归函数，它启动一个 <ul> 并为列表中的每个项目添加 <li>。它还测试项目，如果它们本身是列表，它会以该数据作为参数调用自身。每次从函数内部调用该函数时，您都会在 <ul> 中得到一个 <ul>。

```
function buildULfromOBJ(obj){
  var fragments = [];

  //declare recursion function
  function recurse(item){
    fragments.push('<ul>'); // start a new <ul>

    $.each(item, function(key, val) {  // iterate through items.

      if((val != null) && (typeof val == 'object') &&   // catch nested objects
               ((val == '[object Object]') || (val[0] == '[object Object]'))){

        fragments.push('<li>[' + key + '] =></li>'); // add '[key] =>'
        recurse(val);            // call recurse to add a nested <ul>

      }else if(typeof(val)=='string'){  // catch strings, add double quotes

        fragments.push('<li>[' + key + '] = \"' + val + '\"</li>');

      }else if($.isArray(val)){         // catch arrays add [brackets]

        fragments.push('<li>[' + key + '] = [' + val + ']</li>');

      }else{                            // default: just print it.

        fragments.push('<li>[' + key + '] = ' + val + '</li>'); 
      }
    });
    fragments.push('</ul>'); // close </ul>
  }
  // end recursion function

  recurse(obj);            // call recursion
  return fragments.join('');    // return results
}  // end buildULfromOBJ() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T05:04:22.283

为自己省去尝试使用 for 循环等的痛苦，并使用像[json2html.com这样的客户端模板](http://json2html.com)

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src='http://json2html.com/js/jquery.json2html-3.1-min.js'></script>

<ul id='out'></ul>

<script>

var data = 
{"Controls":[
    {
        "Object":"Button",
        "ButtonAttr": [{"x": "1","y": "2","width": "3","height": "4"}]
    },
    {
        "Object":"Image",
        "ButtonAttr": [{"x": "5","y": "6","width": "7","height": "8"}]
    },
    {
        "Object":"TextField",
        "ButtonAttr": [{"x": "9","y": "10","width": "11","height": "12"}]
    }
]};

var template = {"tag":"li","children":[
  {"tag":"span","html":"${Object}"},
  {"tag":"ul","children":[
    {"tag":"li","html":"x: ${ButtonAttr.0.x}"},
    {"tag":"li","html":"y: ${ButtonAttr.0.y}"},
    {"tag":"li","html":"width: ${ButtonAttr.0.width}"},
    {"tag":"li","html":"height: ${ButtonAttr.0.height}"}
   ]}
  ]};

$('#out').json2html(data.Controls,template);

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T22:09:24.303

您可以像第一个一样轻松地遍历第二个数组，如下所示：

```
$(document).on('click','#options li', function() {
    var index = $('#options li').index(this);
    $('#code').append('<li>' + data.Controls[index].Object + '</li>');

    // Create a new sub-UL to after the LI
    var $subUl = $(('<ul>')
    // Iterate through each attribute in ButtonAttr
    $.each(data.Controls[index].ButtonAttr, function(key, value){
        // Append a new LI with that attribute's key/value
        $subUl.append('<li>' + key + ':' + value + '</li>');
    });
    // Append that new sub-UL we made after the last LI we made
    $('#code li:last').after($subUl);

    //Shows Selected LI Index
    $('#optionsIndex').text("That was div index #" + index);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T22:39:06.483

你可以这样做..使用[$.each](http://api.jquery.com/jQuery.each/)和 for in 循环

```
var str = '<ul>';
$.each(data.Controls, function(k, v) {
    str += '<li>' + v.Object + '</li><ul>';
    for(var kk in v.ButtonAttr[0]){
        str += '<li>' + kk + ':' + v.ButtonAttr[0][kk] + '</li>';
    }
    str += '</ul>';
});
str += '</ul>'; 
```

[小提琴](http://jsfiddle.net/wirey00/aVKh5/)

或使用 2 个 $.each 循环

```
var str = '<ul>';
$.each(data.Controls, function(k, v) {
    str += '<li>' + v.Object + '</li><ul>';
    $.each(v.ButtonAttr[0],function(kk,vv){
      str += '<li>' + kk + ':' + vv + '</li>';
    });    
    str += '</ul>';
});
str += '</ul>'; 
```

[小提琴](http://jsfiddle.net/wirey00/ENCEE/)

# php - PHP 和外部脚本

> ID：14046826
> 
> 赞同：0
> 
> 时间：2012-12-26T22:06:28.430
> 
> 标签：php

我在一个网站上工作，我一直在玩引用外部脚本的想法。我以前用这种方式分解过其他脚本，放入像这样的代码行

```
include('scriptX.php'); 
```

我理解将这种技术用于较大块的复杂代码，但我想知道在查询用户信息或更小的位等小块时标准或最佳实践是什么。

这里有什么优点和缺点，以便我可以在将来构建时做出决定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:19:47.857

> 查询用户信息之类的小程序

erm 不确定你在这里问什么 - 数据不应该存储在 PHP 文件中。

是的，使用包含文件来拆分您的代码，特别是从通用代码中分离出可重用代码是一个好主意——在[2009 年 9 月的 PHP 架构师副本中](http://www.phparch.com/magazine/2009-2/september/)有更多关于此的内容。

一些快速提示是：

*   将文件组织到包含路径上的目录树中
*   尝试将包含文件保留在文档根目录之外 - 如果它们在文档根目录中，请确保网络服务器未提供您的源代码
*   包含文件应该定义常量、函数和类 - 但不要包含任何内联代码 - 从包含它的文件中显式调用功能
*   在极少数情况下 include() 是正确的构造 - 通常它应该是 require_once()
*   如果您编写面向对象的代码，那么使用类自动加载器可以帮助管理您的代码 - 但不要使用自动加载器，除非您启用了操作码缓存（大量文件查找 = 慢）
*   永远不要通过网络包含/要求文件。如果您*确实*需要从远程系统加载类/函数定义，请设置一个检索和缓存它的方法，并注意安全隐患。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:22:09.350

最好的做法是在您需要的时候尽可能地和合理地包含您需要的内容。

这是一个例子：

```
<?php

// We need this everywhere!
require( 'essentialClass.php' );

// Check if we need more stuff or not
if( isset( $_POST['i_want_more_info'] ) ) {

    require( 'userinfoClass.php' ); 

} else {

    require( 'userClass.php' ); 

}

?> 
```

# ios - 如何修复 iOS 视口错误？

> ID：14046827
> 
> 赞同：3
> 
> 时间：2012-12-26T22:06:35.627
> 
> 标签：ios, css, mobile-safari, viewport

想象一下以下设置：

```
<meta name="viewport" content="user-scalable=yes, width=640" /> 
```

默认 CSS：

```
body { width: 100%; } 
```

某些元素上的 CSS 更改（我们称之为`button-X`）单击：

```
body { 
    margin: 0 0 0 -webkit-calc(100% - 100px);
    min-width: 640px; 
    overflow-x: hidden; 
} 
```

**这在桌面浏览器中有什么作用？**

它将整个身体几乎 100% 向右移动。不出现水平滚动条。`body`您只能看到位于屏幕最右侧的左侧部分（100 像素） 。

**这在 iPhone 4S iOS 6.0.1 中有什么作用？**

实际上有两种行为：

1.  **错误：**如果您只是运行 Safari 并单击`button-X`它，它将开始以 1200 像素而不是 640 像素显示您的网站。移位`body`将使整个网站`viewport`有 630 像素的空白空间 + 正文宽度 = ~1200 像素。即使`body`has `position: absolute;`or `position: fixed;`which 理论上应该允许将元素定位在视口之外，但事实并非如此。iOS 使视口变得如此之大，以至于您应该在屏幕外的元素都在屏幕上。
2.  **正确：**我不会问这个问题，因为也许这就是它的工作方式并且无法更改但有修复，所以我认为这是 iOS 的错误。如果我运行 Safari 并用 2 根手指点击它并将它们一起移动（比如缩小），然后单击`button-X`它就可以完美运行。这个用两根手指敲击的动作不会改变任何视口。由于视口设置为 640 像素，因此在松开手指后它将保持 640 像素，因此文学没有任何变化……但在这个简单的动作之后它开始工作得非常好。

问题是 - 如何以编程方式执行此操作 (2)？我试过了：

1.  `jQuery(window).trigger('resize');`
2.  `-webkit-transform-origin: 0px 0px; -webkit-transform: scale3d(1,1,1); zoom: 1;`
3.  [如何在 iPhone 上更改方向时重置 Web 应用程序的比例/缩放？](https://stackoverflow.com/questions/2557801/how-do-i-reset-the-scale-zoom-of-a-web-app-on-an-orientation-change-on-the-iphon)
4.  有趣：即使你设置它也会使视口〜1200px`user-scalable: no`

这并没有改变什么。基本上我希望绝对定位的元素（或 with `overflow: hidden;`）像在桌面浏览器中一样离开视口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:21:02.767

你试过`initial-scale=1, maximum-scale=1, user-scalable=no`吗？另外，我认为您正在尝试向后修复它。你到底想做什么？不是视口或 DOM 元素的行为，而是结果网站/webapp。

无论如何 - 通常，视口是`body`. 使`body`比视口更宽并期望它`body`自己剪辑是很奇怪的。尝试将 设置`body`为固定`width`（不是最小值，因为这样它可以随心所欲地变宽），并在 中放置一个`div`容器`body`，并将您的`margin`CSS 更改应用于`div`，而不是`body`-`body`应该`width`设置和`overflow-x:hidden`.

# c# - DataGridView - 使用 DataPropertyName 显示子元素属性

> ID：14046830
> 
> 赞同：13
> 
> 时间：2012-12-26T22:06:55.563
> 
> 标签：c#, winforms, datagridview

让我们想象一下我有以下课程

```
public class Master
{
    public string MasterName = "Something";

    public List<Detail> details = new List<Detail>();
}

public class Detail 
{
    public string Foo = "Test";
} 
```

然后我想在 DataGridView 中显示 Details 对象的集合，使用下面的代码

```
DataGridViewTextBoxColumn column = new DataGridViewTextBoxColumn();
column.DataPropertyName = "Details.Foo";
column.HeaderText = "Foo header";

dgv.Columns.Add(column); 
```

该列显示在网格中，但没有值

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-03-08T09:05:26.523

如果您需要更通用（即使用`DataPropertyName = "MyProp1.MyProp2.MyProp3"`），您可以使用它

```
private void Grid_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    DataGridViewColumn column = Grid.Columns[e.ColumnIndex];
    if (column.DataPropertyName.Contains("."))
    {
        object data = Grid.Rows[e.RowIndex].DataBoundItem;
        string[] properties = column.DataPropertyName.Split('.');
        for (int i = 0; i < properties.Length && data != null; i++)
            data = data.GetType().GetProperty(properties[i]).GetValue(data);
        Grid.Rows[e.RowIndex].Cells[e.ColumnIndex].Value = data;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T01:00:46.333

您可以覆盖实体子实体中的 ToString 方法，例如：

```
public class FormulariosENT {

    #region PROPERTIES

    public int IdFromulario { get; set; }
    public string DescripcionFormulario { get; set; }

    #endregion

    #region PUBLIC METHODS
    public override string ToString() {

        return DescripcionFormulario;
    } 
```

然后绑定实体子名。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-07T10:02:34.663

如果您想使用许多这样的子元素：

```
class MyClass
{
   public int Id;
   public MyOtherClass OtherClass;
}

class MyOtherClass
{
   public string Name;
   public int Number;
} 
```

怎么样：

**第一种解决方案** 在某些事件中为每个单元格设置值（也许另一个更好），在设置数据源之后手动设置，例如：

```
private void dgv_CellFormatting( object sender, DataGridViewCellFormattingEventArgs e )
{
   MyClass data = dgv.Rows[ e.RowIndex ].DataBoundItem as MyClass;

   dgv.Rows[ e.RowIndex ].Cells[ "colName" ].Value = data.OtherClass.Name;
   dgv.Rows[ e.RowIndex ].Cells[ "colNumber" ].Value = data.OtherClass.Number;
} 
```

**第二种解决方案** 如何从数据创建适当的 DataTable 然后绑定它？

我会感谢任何意见;-)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-05T13:27:01.807

只需这样做：

使用 [Browsable(false)] 屏蔽要从中获取子值的属性，使其不会显示在数据网格中。然后在您的类中创建一个新属性，该属性包含仅具有显示子属性值的“get”方法的子对象：例如：

```
[Browsable(false)] //Because we use the CreatorUsernameProperty to do this.
public virtual User Creator { get; set; }

[DisplayName("Creator")] //shows like this in the grid
public string CreatorUsername => Creator?.Username; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T03:32:13.343

你的数据源在哪里？你必须导致源。它会找到它。你可以这样做

来源 ：

1.  ：

    ```
    List<Detail> list = new List<Detail>();
    for (int i = 0; i < 10; i++)
    {
         Detail d = new Detail();
         d.Foo = "test";
         list.Add(d);
    }

    this.dgv.DataSource = list;
    this.dgv.Columns[0].Visible = false;
    DataGridViewTextBoxColumn dgvc = new DataGridViewTextBoxColumn();
    dgvc.HeaderText = "列标题";
    dgvc.DataPropertyName = "foo";
    this.dgv.Columns.Add(dgvc); 
    ```

2.  ：

    ```
    public class Detail
    {
         private string foo;

         public string Foo
         {
             get { return foo; }
             set { foo = value; }
         }
     } 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-22T15:10:42.210

[bubi 的回答](https://stackoverflow.com/a/35863096/312407)很棒。如果您使用的是[BindingListView](https://github.com/waynebloss/BindingListView) ，我添加了一个小调整，让该方法起作用。

编辑：此方法禁用对通过子属性定位的列的排序。目前不知道如何解决这个问题。

```
if (column.DataPropertyName.Contains("."))
{
    object data = dgv.Rows[e.RowIndex].DataBoundItem;
    if (data is ICustomTypeDescriptor ictd) // support BindingListView
        data = ictd.GetPropertyOwner(null);
    string[] properties = column.DataPropertyName.Split('.');
    for (int i = 0; i < properties.Length && data != null; i++)
    data = data.GetType().GetProperty(properties[i])?.GetValue(data);
    e.Value = data;
} 
```

# java - 在 Swing GUI 中定位组件

> ID：14046837
> 
> 赞同：5
> 
> 时间：2012-12-26T22:08:09.467
> 
> 标签：java, swing, jtextfield, layout-manager, jtextarea

我有一些关于定位组件的问题以及一些关于文本字段和文本区域（Java Swing）的问题。任何帮助是极大的赞赏。

现在，我正在尝试将两个文本字段并排放置，每个文本字段上方都有一个不同的标签，描述该文本字段的作用。为了实现这一点，我将它们放在一个`GridLayout(2, 2)`.

1.  这是最好的方法吗？这是我所知道的将标签直接放在另一个组件上的唯一方法。有没有更好的办法？如果一个按钮上方只有一个标签怎么办。通过 a 定位它是否明智`GridLayout(2, 1)`？我有视力障碍，所以我不认为仅通过像素位置来定位按钮是一种选择，除非有一种简单的方法可以将组件放置在与另一个组件相对数量的像素处。

2.  这引出了我的下一个问题。拥有与上面相同的 UI 但在其下方居中的另一个组件（按钮）的最佳方式是什么。本质上，UI 应该由两个命名文本字段组成，下面有一个计算按钮。我这样做的方法是将上述组件放在面板中，然后将其加上计算按钮添加到带有`GridLayout(2, 1)`. 问题是按钮变得和它上面的面板一样大（我假设）。我该如何调整它并且仍然使按钮在文本字段/标签面板下完美对齐？与文本区域上方的标签类似。标签应该很小，但为下面的文本区域留出更大的空间。

3.  （文本字段）：再次参考上面的 UI，如果用户在第一个文本字段中输入了许多字符，这些字母会超过右侧的文本字段吗？如果是这样，我该如何防止这种情况？

4.  如果我将文本附加到文本区域并且它已经满了，它会自动允许用户滚动吗？如果不是，那么使文本区域可滚动的简单方法是什么？

5.  现在我没有设置文本区域的大小。它会随着我添加文本而增长吗？它是否具有字符数的默认大小？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-26T22:29:24.340

> 现在，我正在尝试将两个文本字段并排放置，每个文本字段上方都有一个不同的标签来描述该文本字段的作用。为此，我将它们放置在 GridLayout(2, 2) 中。这是最好的方法吗？这是我所知道的将标签直接放在另一个组件上的唯一方法。有没有更好的办法？如果一个按钮上方只有一个标签怎么办。通过 GridLayout(2, 1) 定位它是否明智？

我自己，我总是通过嵌套面板使用`BorderLayout`. 例如：

![在此处输入图像描述](../Images/9130e973884c5c5f022e45afe13fc49a.png)

```
JFrame frame = new JFrame("The Title");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

JPanel panOuter = new JPanel(new BorderLayout());
JPanel panLeft = new JPanel(new BorderLayout());
panLeft.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
JPanel panRight = new JPanel(new BorderLayout());
panRight.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));

panOuter.add(panLeft, BorderLayout.WEST);
panOuter.add(panRight, BorderLayout.EAST);

JLabel lblLeft = new JLabel("Label 1", JLabel.CENTER);
JLabel lblRight = new JLabel("Label 2", JLabel.CENTER);

JTextField txtLeft = new JTextField(10);
JTextField txtLright = new JTextField(10);

panLeft.add(lblLeft, BorderLayout.NORTH);
panLeft.add(txtLeft, BorderLayout.CENTER);

panRight.add(lblRight, BorderLayout.NORTH);
panRight.add(txtLright, BorderLayout.CENTER);

frame.setContentPane(panOuter);
frame.pack();
frame.setVisible(true); 
```

请注意，您可以通过设置空边框来操纵组件之间的间隙。此外，您可以使用`BorderLayout.LINE_START`and`BorderLayout.LINE_END`而不是使用`BorderLayout.WEST`and `BorderLayout.EAST`，这将增加对 RTL 语言（例如阿拉伯语）的支持。

* * *

> 这引出了我的下一个问题。拥有与上面相同的 UI 但在其下方居中的另一个组件（按钮）的最佳方式是什么。本质上，UI 应该由两个命名文本字段组成，下面有一个计算按钮。我这样做的方法是将上述组件放在面板中，然后将其加上计算按钮添加到带有 GridLayout(2, 1) 的周围面板。问题是按钮变得和它上面的面板一样大（我假设）。我该如何调整它并且仍然使按钮在文本字段/标签面板下完美对齐？

我会像之前那样通过嵌套面板来完成，但现在底部面板有一个`FlowLayout`布局管理器，可以为按钮获得合适的尺寸：

![在此处输入图像描述](../Images/670337e7efd70faf67ddebb44181d402.png)

```
JFrame frame = new JFrame("The Title");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

JPanel panOuter = new JPanel(new BorderLayout());
JPanel panLeft = new JPanel(new BorderLayout());
panLeft.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
JPanel panRight = new JPanel(new BorderLayout());
panRight.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
JPanel panBottom = new JPanel(); // default is FlowLayout
panBottom.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));

panOuter.add(panLeft, BorderLayout.WEST);
panOuter.add(panRight, BorderLayout.EAST);
panOuter.add(panBottom, BorderLayout.SOUTH);

JLabel lblLeft = new JLabel("Label 1", JLabel.CENTER);
JLabel lblRight = new JLabel("Label 2", JLabel.CENTER);

JTextField txtLeft = new JTextField(10);
JTextField txtLright = new JTextField(10);

JButton btnBottom = new JButton("Press it!");

panLeft.add(lblLeft, BorderLayout.NORTH);
panLeft.add(txtLeft, BorderLayout.CENTER);

panRight.add(lblRight, BorderLayout.NORTH);
panRight.add(txtLright, BorderLayout.CENTER);

panBottom.add(btnBottom);

frame.setContentPane(panOuter);
frame.pack();
frame.setVisible(true); 
```

* * *

> 与文本区域上方的标签类似。标签应该很小，但为下面的文本区域留出更大的空间。

我建议你使用`TitledBorder`：

![在此处输入图像描述](../Images/2918c09d304d1257a5e8d5e96a451f75.png)

```
JFrame frame = new JFrame("The Title");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

JPanel panOuter = new JPanel(new BorderLayout());
JPanel panLeft = new JPanel(new BorderLayout());
panLeft.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
JPanel panRight = new JPanel(new BorderLayout());
panRight.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
JPanel panBottom = new JPanel(); // default is FlowLayout
panBottom.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));

JPanel panInput = new JPanel(new BorderLayout());
panInput.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
JPanel panConsole = new JPanel(new BorderLayout());

Border outsideBorder = BorderFactory.createEmptyBorder(5, 5, 5, 5);
Border insideBorder = BorderFactory.createTitledBorder("The Console");
Border theBorder = BorderFactory.createCompoundBorder(outsideBorder, insideBorder);
panConsole.setBorder(theBorder);

panInput.add(panLeft, BorderLayout.WEST);
panInput.add(panRight, BorderLayout.EAST);
panInput.add(panBottom, BorderLayout.SOUTH);

panOuter.add(panInput, BorderLayout.NORTH);
panOuter.add(panConsole, BorderLayout.CENTER);

JLabel lblLeft = new JLabel("Label 1", JLabel.CENTER);
JLabel lblRight = new JLabel("Label 2", JLabel.CENTER);

JTextField txtLeft = new JTextField(10);
JTextField txtLright = new JTextField(10);

JButton btnBottom = new JButton("Press it!");

JTextArea txtConsole = new JTextArea(5, 10);

panLeft.add(lblLeft, BorderLayout.NORTH);
panLeft.add(txtLeft, BorderLayout.CENTER);

panRight.add(lblRight, BorderLayout.NORTH);
panRight.add(txtLright, BorderLayout.CENTER);

panBottom.add(btnBottom);

panConsole.add(txtConsole, BorderLayout.CENTER);

frame.setContentPane(panOuter);
frame.pack();
frame.setVisible(true); 
```

* * *

> 第三个（文本字段）：再次参考上面的 UI，如果用户在第一个文本字段中输入了很多字符，这些字母会不会越过右边的文本字段？如果是这样，我该如何防止这种情况？

试试上面的代码，看看它是如何工作的:)

* * *

> 第四：如果我将文本附加到文本区域并且它已经满了，它会自动允许用户滚动吗？如果不是，那么使文本区域可滚动的简单方法是什么？

你需要使用一种叫做`JScrollPane`：

![在此处输入图像描述](../Images/b4074f38fea72f4d35109824abad57eb.png)

```
JFrame frame = new JFrame("The Title");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

JPanel panOuter = new JPanel(new BorderLayout());
JPanel panLeft = new JPanel(new BorderLayout());
panLeft.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
JPanel panRight = new JPanel(new BorderLayout());
panRight.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
JPanel panBottom = new JPanel(); // default is FlowLayout
panBottom.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));

JPanel panInput = new JPanel(new BorderLayout());
panInput.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
JPanel panConsole = new JPanel(new BorderLayout());

Border outsideBorder = BorderFactory.createEmptyBorder(5, 5, 5, 5);
Border insideBorder = BorderFactory.createTitledBorder("The Console");
Border theBorder = BorderFactory.createCompoundBorder(outsideBorder, insideBorder);
panConsole.setBorder(theBorder);

panInput.add(panLeft, BorderLayout.WEST);
panInput.add(panRight, BorderLayout.EAST);
panInput.add(panBottom, BorderLayout.SOUTH);

panOuter.add(panInput, BorderLayout.NORTH);
panOuter.add(panConsole, BorderLayout.CENTER);

JLabel lblLeft = new JLabel("Label 1", JLabel.CENTER);
JLabel lblRight = new JLabel("Label 2", JLabel.CENTER);

JTextField txtLeft = new JTextField(10);
JTextField txtLright = new JTextField(10);

JButton btnBottom = new JButton("Press it!");

JTextArea txtConsole = new JTextArea(5, 10);

JScrollPane srcPane = new JScrollPane(txtConsole,
            JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,
            JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);

panLeft.add(lblLeft, BorderLayout.NORTH);
panLeft.add(txtLeft, BorderLayout.CENTER);

panRight.add(lblRight, BorderLayout.NORTH);
panRight.add(txtLright, BorderLayout.CENTER);

panBottom.add(btnBottom);

panConsole.add(srcPane, BorderLayout.CENTER);

frame.setContentPane(panOuter);
frame.pack();
frame.setVisible(true); 
```

* * *

我希望我回答了你所有的问题:)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-26T22:53:10.843

有许多布局管理器可能能够为您提供所需的内容。

*   [MigLayout](http://www.miglayout.com/)
*   [JGoodies 表单布局](http://www.jgoodies.com/freeware/libraries/forms/)
*   [网格包布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)

因为，`GridBagLayout`将是我的选择（我有偏见，因为过去 12 年来我一直在使用这个布局管理器；））

![在此处输入图像描述](../Images/5df9160461127513a70fd09a8aec98e1.png)

```
public class TestLayout17 {

    public static void main(String[] args) {
        new TestLayout17();
    }

    public TestLayout17() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.insets = new Insets(2, 2, 2, 2);

            add(new JLabel("Label 1"), gbc);
            gbc.gridx++;
            add(new JLabel("Label 2"), gbc);

            gbc.gridx = 0;
            gbc.gridy++;
            gbc.fill = GridBagConstraints.HORIZONTAL;
            add(new JTextField(10), gbc);
            gbc.gridx++;
            add(new JTextField(10), gbc);

            gbc.gridx = 0;
            gbc.gridy++;
            gbc.fill = GridBagConstraints.NONE;
            gbc.gridwidth = 2;
            add(new JButton("Click"), gbc);

        }

    }

} 
```

我也同意 Eng.Fouad 的建议，即从长远来看，使用复合容器让您的生活更轻松

您可能会发现[在容器中布局组件](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)值得一读。

# mysql - MySQL - 操作数应包含 1 列

> ID：14046838
> 
> 赞同：112
> 
> 时间：2012-12-26T22:08:15.057
> 
> 标签：mysql, sql, mysql-error-1241

在我正在创建的系统上工作时，我尝试在我的项目中使用以下查询：

```
SELECT
topics.id,
topics.name,
topics.post_count,
topics.view_count,
COUNT( posts.solved_post ) AS solved_post,
(SELECT users.username AS posted_by,
    users.id AS posted_by_id
    FROM users
    WHERE users.id = posts.posted_by)
FROM topics
LEFT OUTER JOIN posts ON posts.topic_id = topics.id
WHERE topics.cat_id = :cat
GROUP BY topics.id 
```

":cat" 在我使用 PDO 时受我的 PHP 代码的约束。2 是 ":cat" 的有效值。

该查询虽然给了我一个错误：“#1241 - 操作数应包含 1 列”

让我难过的是，我认为这个查询不会有问题。选择列，然后从另一个表中再选择两个，然后从那里继续。我只是无法弄清楚问题是什么。

是否有一个简单的解决方法，或者另一种方法来编写我的查询？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-12-26T22:10:24.627

您的子查询正在选择两列，而您正在使用它来投影一列（作为外部`SELECT`子句的一部分）。在此上下文中，您只能从此类查询中选择一列。

考虑改为加入`users`表格；在选择您想要的列时，这将为您提供更大的灵活性`users`。

```
SELECT
topics.id,
topics.name,
topics.post_count,
topics.view_count,
COUNT( posts.solved_post ) AS solved_post,
users.username AS posted_by,
users.id AS posted_by_id

FROM topics

LEFT OUTER JOIN posts ON posts.topic_id = topics.id
LEFT OUTER JOIN users ON users.id = posts.posted_by

WHERE topics.cat_id = :cat
GROUP BY topics.id 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-04-01T06:29:29.597

`AND`如果您不小心使用逗号而不是在`ON`a 的子句中，也会发生此错误`JOIN`：

```
JOIN joined_table ON (joined_table.column = table.column, joined_table.column2 = table.column2)
                                                        ^
                                             should be AND, not a comma 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-05-26T09:43:09.817

如果您不小心在子句中使用`=`了代替，也会出现此错误：`IN``WHERE`

例如：

```
WHERE product_id = (1,2,3); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2020-09-07T15:15:25.523

就我而言，问题是我错误地将我的列选择用括号括起来：

```
SELECT (p.column1, p.column2, p.column3) FROM table1 p WHERE p.column1 = 1; 
```

并且必须是：

```
SELECT p.column1, p.column2, p.column3 FROM table1 p WHERE p.column1 = 1; 
```

听起来很傻，但它导致了这个错误，花了一些时间才弄清楚。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-12-26T22:10:21.900

```
COUNT( posts.solved_post ) AS solved_post,
(SELECT users.username AS posted_by,
    users.id AS posted_by_id
    FROM users
    WHERE users.id = posts.posted_by) 
```

好吧，你不能像这样从一个子查询中获得多个列。幸运的是，第二列已经出现了`posts.posted_by`！所以：

```
SELECT
topics.id,
topics.name,
topics.post_count,
topics.view_count,
posts.posted_by
COUNT( posts.solved_post ) AS solved_post,
(SELECT users.username AS posted_by_username
    FROM users
    WHERE users.id = posts.posted_by)
... 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-15T13:28:03.763

在 Intellij 控制台中执行 MySQL 脚本时出现此错误，因为在错误的位置添加了括号：

错误的：

```
SELECT user.id
FROM user
WHERE id IN (:ids); # Do not put brackets around list argument 
```

对：

```
SELECT user.id
FROM user
WHERE id IN :ids; # No brackets is correct 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-08-21T13:04:37.300

`if`如果您不小心错过了函数名称，也会发生此错误。

例如：

```
set v_filter_value = 100;

select
    f_id,
    f_sale_value
from
    t_seller
where
    f_id = 5
    and (v_filter_value <> 0, f_sale_value = v_filter_value, true); 
```

当我错过将**if**放入`if`函数时遇到了这个问题！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-12T19:50:01.547

另一个可能发生此错误的地方是分配一个在字符串之外有逗号的值。例如：

```
SET totalvalue = (IFNULL(i.subtotal,0) + IFNULL(i.tax,0),0) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-12-08T05:53:09.397

```
(SELECT users.username AS posted_by,
users.id AS posted_by_id
FROM users
WHERE users.id = posts.posted_by) 
```

在这里您使用子查询，但此子查询必须只返回一列。分开它，否则会显示错误。

# android - 陀螺仪/指南针和设备方向

> ID：14046846
> 
> 赞同：0
> 
> 时间：2012-12-26T22:09:23.450
> 
> 标签：android, orientation, accelerometer, compass-geolocation, gyroscope

我正在为 Android 制作一个指南针应用程序，并且我已经设法通过使用陀螺仪、加速度计和磁力计来捕获方位角（请参阅[此处](http://www.thousand-thoughts.com/2012/03/android-sensor-fusion-tutorial/)了解我使用的教程）。不幸的是，只有当设备与地面平行放置（即平放在桌子上/我的手掌等）时，罗盘读数才起作用。每当我将设备倾斜到完全直立的位置（屏幕面向我）时，指南针就会给出错误的读数。我假设这是因为当设备的方向本身发生变化时轴会发生变化。我该如何防止这种情况发生？我希望指南针在这两个位置都可以工作：平行于地面和完全直立的位置。我该怎么做呢？如果有人可以推动我朝着正确的方向前进，那将非常有帮助。

感谢你的帮助！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T22:07:55.353

在 SensorFusionActivity 中添加 mDisplay 变量，如下所示：

```
private Display mDisplay = null; 
```

然后，在 onCreate 方法中添加以下代码：

```
mDisplay = ((WindowManager)context.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay(); 
```

最后，以这种方式修改 calculateAccMagOrientation：

```
// calculates orientation angles from accelerometer and magnetometer output
public void calculateAccMagOrientation() {
    if(SensorManager.getRotationMatrix(rotationMatrix, null, accel, magnet)) {

        int rotation = mDisplay.getRotation();

        if(rotation == Surface.ROTATION_0)
            SensorManager.remapCoordinateSystem(rotationMatrix, SensorManager.AXIS_MINUS_Y, SensorManager.AXIS_X, rotationMatrix);
        else if(rotation == Surface.ROTATION_180)
            SensorManager.remapCoordinateSystem(rotationMatrix, SensorManager.AXIS_Y, SensorManager.AXIS_MINUS_X, rotationMatrix);
        else if(rotation == Surface.ROTATION_270)
            SensorManager.remapCoordinateSystem(rotationMatrix, SensorManager.AXIS_MINUS_X, SensorManager.AXIS_MINUS_Y, rotationMatrix);

        SensorManager.getOrientation(rotationMatrix, accMagOrientation);
    }
} 
```

# linux - 如何列出被内核杀死的线程？

> ID：14046851
> 
> 赞同：1
> 
> 时间：2012-12-26T22:09:58.257
> 
> 标签：linux, shell, linux-kernel

有没有办法列出linux设备中所有被杀死的进程？

我看到这个[答案](https://unix.stackexchange.com/questions/10077/where-can-i-see-a-list-of-kernel-killed-processes)暗示：

报到：

```
/var/log/kern.log 
```

但它不是通用的。还有其他方法吗？

## **我想做的事：**

列出线程/进程是否被杀死。我应该编辑内核中的什么函数来列出所有被杀死的 tid/pid 及其名称，或者无论如何是否有`sysfs`它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:20:46.487

与之相反的`do_fork`是`do_exit`，这里： [do_exit kernel source](http://lxr.linux.no/linux+%2a/kernel/exit.c#L810)

我无法找到线程何时退出，除了：

[发布任务](http://lxr.linux.no/linux+%2a/kernel/exit.c#L180)

我相信“任务”和“线程”在 Linux 中（几乎）是同义词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T01:59:50.807

首先，内核中的任务和线程*上下文*是不同的。任务（使用 tasklet api）在软件中断上下文中运行（意味着您在任务 ctx 中时不能睡眠），而线程（使用 kthread api 或 workqueue api）在进程 ctx 中运行处理程序（即可以睡眠的 ctx）。

在这两种情况下，如果一个线程在 kerenl 中挂起，您就无法杀死它。如果你从 shell 运行“ps”命令，你可以在那里看到它（通常带有“[”和“]”大括号），但任何试图杀死它的尝试都行不通。

内核是受信任的代码，这种情况不应该发生，如果发生，则表明存在内核（或内核模块）错误。

通常整台机器会在一段时间后运行，因为运行该线程的核心没有响应（您将在 /var/log/messages 或控制台中看到一条消息，其中包含更多信息）在某些其他情况下，机器可能会存活但特定的核心死了。取决于内核配置。

# cuda - cuda内核警告：表达式无效

> ID：14046854
> 
> 赞同：3
> 
> 时间：2012-12-26T22:10:23.440
> 
> 标签：cuda

我是 Cuda 编程的新手，并在 Cell Code 中尝试使用 Particle 运气。但第一个问题是建立一个粒子移动器。但是，当我尝试编译此代码时，我收到如下错误消息：

> 错误：表达式必须具有整数或枚举类型/警告：表达式无效。

我的代码：

```
__global__ void kernel(int* x, int* x_1, int* E_x, int* t, int* m)
{
    int idx = 0;
    if (idx < N)
        // move particles
        x_1[idx] = (E_x[idx] / m[1]) * t[1] * t[1] + x[idx];
}

kernel<<1,1>>( dev_x , dev_x_1, dev_E_x , dev_t, dev_m ); 
```

整数定义如下：

```
int x[N], x_1[N], v_x[N], v_y[N], v_z[N], E_x[N], m[1], t[1];
int *dev_x, *dev_v_x, *dev_x_1, *dev_v_y, *dev_v_z, *dev_E_x, *dev_m, *dev_t; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T22:53:45.517

一个问题是您在内核启动参数上使用了双 V 形语法而不是正确的三 V 形语法。而不是这个：

```
kernel<<1,1>>( dev_x , dev_x_1, dev_E_x , dev_t, dev_m ); 
```

做这个：

```
kernel<<<1,1>>>( dev_x , dev_x_1, dev_E_x , dev_t, dev_m ); 
```

# ruby-on-rails-3 - google translate 和 bing translate API 在生产环境中工作，但在开发 localhost 中不工作

> ID：14046856
> 
> 赞同：0
> 
> 时间：2012-12-26T22:10:24.870
> 
> 标签：ruby-on-rails-3, api, google-translate

谁能帮我弄清楚为什么 google translate 和 bing translate API 在生产中工作，但在我的笔记本电脑上却没有开发？

谷歌的错误：“错误的请求”

Bing 的错误：“SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T22:27:30.373

原来我需要重新安装openssl。

# javascript - IE 10 上每个页面中的 Javascript 错误

> ID：14046857
> 
> 赞同：15
> 
> 时间：2012-12-26T22:10:48.183
> 
> 标签：javascript, asp.net, vb.net, internet-explorer-10

我的 asp.net 站点在 IE6、IE7、IE8、IE9、Chrome、Safari、Firefox 和 Opera 上运行良好。但它在 IE10 中根本不起作用。

如果我单击站点中的任何位置（任何按钮、任何链接等），它会返回以下错误：

```
SCRIPT5022: Sys.ArgumentOutOfRangeException: Value must be an integer.
Parameter name: x
Actual value was 5.999999523162842\. 
```

JS 的东西，比如标签，由于这个问题而不起作用。我追查了问题，它在 MicrosoftAjax.js 中，特别是在以下方法中。

```
Sys.UI.Point = function Sys$UI$Point(x, y) {
    /// <param name="x" type="Number" integer="true"></param>
    /// <param name="y" type="Number" integer="true"></param>
    /// <field name="x" type="Number" integer="true"></field>
    /// <field name="y" type="Number" integer="true"></field>
    var e = Function._validateParams(arguments, [
        {name: "x", type: Number, integer: true},
        {name: "y", type: Number, integer: true}
    ]);
    if (e) throw e;

    this.x = x;
    this.y = y; 
```

它适用于自 6 以来的所有其他 IE 版本，这是一种命运。

**我知道只有真正的浏览器才支持 HTML，不包括 Internet Explorer**，但我的客户真的希望该网站在 IE10 中运行。

需要明确的是，它在 ie6 到 9、chrome、firefox 和 opera 中运行良好。他们都没有显示javascript错误，只有ie10，每次点击都会出现这个错误。我不知道是谁在调用这个方法。这是一个大网站，我使用的所有 js 代码都没有调用它。我认为可能 MicrosoftAjax.js 框架已经绑定了点击事件并且它正在执行某些东西，但我不确定它正在执行什么。

谁能帮我？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-06-19T23:45:28.487

[我在Yuriy](https://stackoverflow.com/users/961695/yuriy-galanter)的博客中找到了一个不错的[解决方案](http://codecorner.galanter.net/2013/05/01/solution-for-ie10-error-script5022-sys-argumentoutofrangeexception-value-must-be-an-integer/)：

```
<script language="javascript">
    Sys.UI.Point = function Sys$UI$Point(x, y) {

        x = Math.round(x);
        y = Math.round(y);

        var e = Function._validateParams(arguments, [
            {name: "x", type: Number, integer: true},
            {name: "y", type: Number, integer: true}
        ]);
        if (e) throw e;
        this.x = x;
        this.y = y;
    }
</script> 
```

将此粘贴到您的页面上以覆盖 Sys$UI$Point 函数以对数字进行四舍五入。

或者，设置`<compilation debug="false">`

这些都对我有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-28T21:25:36.220

答案在以下链接中：

[http://support.microsoft.com/kb/936993](http://support.microsoft.com/kb/936993)

我不得不更改 Microsoft.Ajax.js。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-09T16:18:53.743

Just to add to [mafu josh](https://stackoverflow.com/users/119418/mafu-josh)'s answer, the bound prototype can also be the issue.

Here's the code for that

```
Sys.UI.Bounds = function Sys$UI$Bounds(x, y, width, height) {
    x = Math.round(x);
    y = Math.round(y);

    var e = Function._validateParams(arguments, [
        { name: "x", type: Number, integer: true },
        { name: "y", type: Number, integer: true },
        { name: "width", type: Number, integer: true },
        { name: "height", type: Number, integer: true }
    ]);
    if (e) throw e;
    this.x = x;
    this.y = y;
    this.height = height;
    this.width = width;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T17:40:57.003

我有一个类似的问题；遵循 nileshsaikhede [http://forums.asp.net/t/1884400.aspx/1在此处发布的解决方案后解决](http://forums.asp.net/t/1884400.aspx/1)

我所要做的就是添加

```
<meta http-equiv="X-UA-Compatible" content="IE=7" /> 
```

到我的母版页。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-01T13:14:22.947

我想出了一个选择。在返回所有区域之前，我已经修改了用于舍入点值的`MicrosoftAjax.js`and文件- 如下所示。`MicrosoftAjax.debug.js``Sys.UI.Point`

```
 if (typeof param1 === "number")
    {
        param1 = Math.round(param1);
    }

    if (typeof param2 === "number")
    {
        param2 = Math.round(param2);
    }

    return new Sys.UI.Point(param1, param2); 
```

我在 ASPX 页面的 ScriptManager 代码中使用 Script 选项引用了修改后的 js 文件。这就是它的完成方式。

我希望它对其他人有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-18T10:12:19.967

如果您使用 Internet Explorer，然后按**ALT** 选择工具 -----> 兼容性视图 --------> 然后添加您的网站以在兼容性中显示。希望它会帮助你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-17T18:45:06.827

您可以尝试以下方法：

```
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">

<meta http-equiv="X-UA-Compatible" content="requiresActiveX=true" /> 
```

# ruby-on-rails - 您可以在具有自定义 finder_sql 的对象上使用关联扩展吗？

> ID：14046858
> 
> 赞同：0
> 
> 时间：2012-12-26T22:10:54.393
> 
> 标签：ruby-on-rails, activerecord, finder-sql

我的印象是`custom_finder`ActiveRecord 中的选项意味着您可以免费获得关联扩展`.where`，`.order`例如：

```
class Dog < ActiveRecord::Base
  has_many :fleas, class_name: 'Flea', 
           finder_sql: "select fleas.* from fleas where pet_type = 'dog'"
end 
```

当然这不是一个很好的例子，因为“finder_sql”是如此微不足道，但它说明了这一点。

**生成的 SQL**

我期望以下

```
@dog = Dog.find(5)
@dog.fleas.where('num_legs > 2') 
```

***生成***

```
"select fleas.* from fleas where pet_type = 'dog' AND num_legs > 2 
```

即自定义finder_sql + where 子句

***然而它实际产生的是***

```
"SELECT "base_posts".* FROM "fleas" WHERE "fleas"."dog_id" = 5 AND (num_legs > 2) 
```

即它完全无视习惯`finder_sql`并试图将跳蚤加入当前的狗。

如果自定义`finder_sql`不会导致关联扩展尊重它，那么它有什么意义 - 它可能只是对象上的一个方法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T01:47:59.087

这是真实的。我认为自定义查找器是 Rails 中上一代查找器的遗产（在 Arel && AR::Relation 之前），它今天在关联中的存在只是为了向后兼容（恕我直言）。无论如何，它不符合 AR::Relation（扩展）的意识形态。

到目前为止，我们有**.find_by_sql()**和**:finder_sql**作为关联选项。

实际上现在，当关联有 :finder_sql 选项时，它仅用于形成记录集合（使用**.find_by_sql**）。关联创建 AR::Relation 对象，加载集合 (.target) 并将 AR::Relation 方法调用委托给关系对象，但是它不知道任何自定义 SQL 语句并且只知道主 SQL 表达式。这就是为什么：

```
@dog.fleas.class
#=> Array
@dog.fleas.to_sql # delegated to AR::Relation 
```

返回主表达式 "SELECT "base_posts".* FROM..." 和

```
@dog.fleas.where("...") # delegated to AR::Relation 
```

强加新的条件，就好像没有自定义查找器一样。

另一方面，由于**.find_by_sql**总是返回一个数组，因此可以使用 Array 的方法来施加新的条件。

```
 @dog.fleas.select {|r| ... } # delegated to Array 
```

# xml - 在 Flex 中使用 XML 填充组合框

> ID：14046862
> 
> 赞同：0
> 
> 时间：2012-12-26T22:11:06.837
> 
> 标签：xml, apache-flex, combobox, httpservice

我正在尝试用 XML 文件中的国家/地区填充组合框。不幸的是，组合框没有被填满。我应该如何解决这个问题？提前致谢！

这是我的代码：

```
protected function navigatorcontent2_creationCompleteHandler(event:FlexEvent):void
{
    fillCboCountries.addEventListener(ResultEvent.RESULT, fillCombobox);    
    fillCboCountries.send();        
}

protected function fillCombobox(event:ResultEvent):void
{           
    cboCountries.dataProvider=event.result.global.countryItem;              
}

<fx:Declarations>
<s:HTTPService id="fillCboCountries" url="https://marnixcoosemans2013.dreamhosters.com/scripts/countries_select.php"/>  
</fx:Declarations>  

<s:ComboBox id="cboCountries" x="10" y="414" width="173" labelField="countryLabel"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:40:56.553

您的代码没有错误。我已将其粘贴到我的空项目中，并且在组合框中看到了您的字段。

尽管有 https，但我唯一改变的是 http。

所以问题出在数据源上，而不是在你的源代码上！不用https试试。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           minWidth="955" minHeight="600" 
           creationComplete="navigatorcontent2_creationCompleteHandler(event)">

<fx:Declarations>
    <s:HTTPService id="fillCboCountries" url="http://marnixcoosemans2013.dreamhosters.com/scripts/countries_select.php"/>  
</fx:Declarations>  

<fx:Script>
    <![CDATA[
        import mx.events.FlexEvent;
        import mx.rpc.events.ResultEvent;

        protected function navigatorcontent2_creationCompleteHandler(event:FlexEvent):void
        {
            fillCboCountries.addEventListener(ResultEvent.RESULT, fillCombobox);    
            fillCboCountries.send();        
        }

        protected function fillCombobox(event:ResultEvent):void
        {           
            cboCountries.dataProvider=event.result.global.countryItem;              
        }
    ]]>
</fx:Script>

<s:ComboBox id="cboCountries" x="10" y="414" width="173" labelField="countryLabel"/>
</s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T14:53:30.870

谢谢大家的帮助。

我通过将我的代码复制到一个新项目中来解决它。不幸的是，我不知道原始项目中出了什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T22:24:25.913

在没有看到服务调用的 XML 响应是什么样子的情况下，我唯一可以建议的是将[resultFormat](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/http/HTTPService.html#resultFormat)上的设置`HTTPService`为“e4x”：

```
<s:HTTPService id="fillCboCountries"
    url="https://marnixcoosemans2013.dreamhosters.com/scripts/countries_select.php"
    resultFormat="e4x" /> 
```

这告诉 HTTPService 响应是 XML 并且您希望使用 e4x 表达式获取数据。

# c# - 如何在 FindWindow 中使用正则表达式？

> ID：14046864
> 
> 赞同：0
> 
> 时间：2012-12-26T22:11:13.257
> 
> 标签：c#, regex, winforms, setfocus, findwindow

我最终试图编写一些东西来检查特定窗口是否存在，并将其设置为活动状态。我能够使用 FindWindow 来查找文字窗口名称。

```
int hWnd = FindWindow(null, "121226-000377 - company -  Oracle RightNow CX Cloud Service");
            if (hWnd > 0) //If found
            {
                SetForegroundWindow(hWnd); //Activate it

            }
            else
            {
                MessageBox.Show("Window Not Found!");
            } 
```

标题前面的数字会发生变化，并且永远不会两次相同，因此我试图使用正则表达式来查找是否有任何活动窗口具有如上所示的名称结构，但数字可以改变。我有一个适用于此的常规表达式，但我不知道如何实现它。我试过：

```
int hWnd = FindWindow(null, @"^\d+-\d+\s.*?RightNow CX");
            if (hWnd > 0) //If found
            {
                SetForegroundWindow(hWnd); //Activate it

            }
            else
            {
                MessageBox.Show("Window Not Found!");
            } 
```

但它不断地失败。那么如何使用 FindWindow/SetForegroundWindow 命令同时让它们使用正则表达式进行检查呢？

更新~~~~我选择了一个最佳答案，但这里是我如何让它工作的实际代码，以防万一有人感兴趣。

```
 protected static bool EnumTheWindows(IntPtr hWnd, IntPtr lParam)
        {
            int size = GetWindowTextLength(hWnd);
            if (size++ > 0 && IsWindowVisible(hWnd))
            {
                StringBuilder sb = new StringBuilder(size);
                GetWindowText(hWnd, sb, size);

                Match match = Regex.Match(sb.ToString(), @"^\d+-\d+\s.*?RightNow CX",
               RegexOptions.IgnoreCase);

                // Here we check the Match instance.
                if (match.Success)
                {
                   ActivateRNT(sb.ToString());

                }
                else
                {
                    //this gets triggered for every single failure
                }
                //do nothing

            }
            return true;
        }

private static void ActivateRNT(string rnt)
        {
            //Find the window, using the CORRECT Window Title, for example, Notepad

            int hWnd = FindWindow(null, rnt);
            if (hWnd > 0) //If found
            {
                SetForegroundWindow(hWnd); //Activate it

            }
            else
            {
                MessageBox.Show("Window Not Found!");
            }

        } 
```

如果需要的窗口不存在，我仍然需要弄清楚如何在 EnumWindows 方法中进行测试以引发警报，但我稍后会担心。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T22:17:05.817

我想[`EnumWindows()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633497%28v=vs.85%29.aspx)这就是你要找的东西，虽然我不是 100% 确定你会如何在 C# 中使用它，因为你需要一个回调。

编辑：[pinvoke.net](http://www.pinvoke.net/default.aspx/user32.enumwindows)得到了一些代码，包括一个示例回调。编辑 2：链接的 [MSDN 示例][3] 有更多关于为什么/如何这样做的详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T22:19:36.453

如果您知道搜索的窗口的进程名称，您可以尝试使用以下方法：

```
Process[] processes = Process.GetProcessesByName("notepad");
foreach (Process p in processes)
{
    IntPtr pFoundWindow = p.MainWindowHandle;
    SetForegroundWindow(pFoundWindow);
} 
```

[GetProcessesByName 上的 MSDN](http://msdn.microsoft.com/en-us/library/z3w4xdc9%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T22:18:42.903

我认为没有用于搜索具有正则表达式模式的窗口的内置函数/方法/API。完成它的一种方法是枚举窗口[，例如这个例子](http://code.msdn.microsoft.com/windowsdesktop/Enumerate-top-level-9aa9d7c1)，然后使用正则表达式比较回调函数中的窗口文本。

# autohotkey - 在屏幕保护程序激活时运行 AutoHotKey 脚本

> ID：14046867
> 
> 赞同：1
> 
> 时间：2012-12-26T22:11:17.903
> 
> 标签：autohotkey

Windows 是否会发送任何可以由 AutoHotKey 解释的消息或命令，以在屏幕保护程序即将激活时运行特定脚本？示例：如果我的 DVR 软件在屏幕保护程序处于活动状态时运行，它会冻结/锁定我的计算机。我希望 AHK 在屏幕保护程序打开时关闭该窗口，因为这是由组策略控制的，而不是我在本地控制的。

我知道我可以创建一个 AHK 脚本，在 9 分钟不活动后关闭窗口，但如果可能的话，我想将它链接到屏幕保护程序的 Windows 激活。请指教！我已经通过 Google、SO 和 AHK 文档进行了检查。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T06:38:55.140

如果要将鼠标前后移动 1 个像素，可以使用：

```
SetTimer, MoveMouse, 60000 ; Move mouse every 60 seconds

MoveMouse:
    MouseMove, 1, 0, 1, R ;Move the mouse one pixel to the right
    Sleep, 50 ; Wait 50 ms. Not realy required, but makes the move visible
    MouseMove, -1, 0, 1, R ;Move the mouse back one pixel
return 
```

这将绕过系统/组策略定义的屏幕保护程序，并允许您定义屏幕保护程序何时启动。将鼠标前后移动 1 个像素足以停止屏幕保护程序，并且几乎不会引起注意。您可以随时使用

```
SetTimer, MoveMouse, Off 
```

命令（我认为任何正在运行的计时器都不会受到将其设置为 Off 的影响）。

# java - 以@为前缀的字符串的Java正则表达式

> ID：14046869
> 
> 赞同：-1
> 
> 时间：2012-12-26T22:11:23.387
> 
> 标签：java, regex

说我有以下字符串

```
"@apple @banna @? example@test.com" 
```

现在我想成功

```
"apple banna ? example@test.com" 
```

我的正则表达式应该是什么来删除“@”符号而不影响电子邮件地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T23:02:29.270

我认为这会奏效。

```
str = str.replaceAll("(?<!\S)@(?=\S+)"); 
```

这是这样做的：

```
(?<!\S)     // Checks to make sure that the @ is preceded by a whitespace
            // character, or is the beginning of the string. This exists to make sure we're not in an email.
@           // Literal @
(?=\S+)     // Makes sure that something besides whitespace follows. 
```

以下是一些快速测试： http: [//fiddle.re/2vmt](http://fiddle.re/2vmt)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T22:15:37.080

自最初发布以来，此问题已发生重大变化。我最初的答案虽然对最初提出的问题是正确的，但不再正确。

此代码将执行此操作：

```
String noStrayAts = input.replaceAll("(?<=\\s)@", ""); 
```

* * *

仅供参考，这是我之前的回答：

由于输入和输出都是字符串，并且被删除的东西不需要正则表达式，您只需要：

```
String noAts = input.replace("@", ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T22:13:28.347

```
String fruit = fruit.replaceAll("@", " "); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-26T22:14:58.747

一种方法如下：

```
str.replaceAll("@apple", "apple"); 
str.replaceAll("@banna", "banna"); 
str.replaceAll("@?", "?"); 
```

# javascript - 从 IE 地址栏执行 Vbscript

> ID：14046872
> 
> 赞同：0
> 
> 时间：2012-12-26T22:11:50.540
> 
> 标签：javascript, browser, vbscript

有没有办法可以直接从地址栏执行我的 vbscript 代码？我正在寻找与 JavaScript 类似的东西。

附带说明一下，从浏览器运行 vbscript 是否存在重大安全风险，因为它在运行时比 JavaScript 具有更多权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T03:30:53.263

与 Javascript 几乎相同的方式只是不能很好地工作： `vbscript:replace(document.body.innerhtml,"Address Bar","sandwich")`

本质上，这会导航到一个页面，该页面的源代码与函数调用的返回值等效。

我所做的任何尝试执行没有返回结果的命令都会导致页面上出现错误......

至于你的旁注，不是真的。浏览器限制了脚本可以做什么。例如，您可以通过 使用 VBS 自动创建对象`CreateObject("whatever")`，但如果从浏览器运行，系统将提示您允许 Active-X 控件。（你可以用 Javascript 做同样的事情）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-04T21:55:27.810

您可以像调用 Javascript 一样调用 VBScript，我的意思是“完全”。对于 VBScript 和 Javascript，语言说明符（javascript: 或 vbscript:) 之后的“命令”通过将命令字符串传递给`eval()`（相关语言的）来“执行”。Javascript 和 VBScript 之间的区别在于，对于 VBScript，参数 to`eval()`必须是有效的 VBScript 表达式，而对于 Javascript，`eval()`将解析和执行基本上任何语法上有效的 Javascript 字符串，无论它是否是单个 Javascript 表达式，并且返回该字符串中最后执行的表达式语句的值（或者`Void`如果没有）。因此，虽然

```
javascript:for(i=0;i<5;++i)alert(i) 
```

完全有效，

```
vbscript:for i = 0 to 4 : alert i : next 
```

不是。

不要绝望，有**一个**解决方法。两者`Execute`和`ExecuteGlobal`都被定义为“语句”（尽管它们实际上的行为类似于预定义的过程，也就是 Subs），因此不能用作传递给 的“表达式” `eval()`，至少不能以它们通常的句法形式使用

```
Execute <some string containing statements>
ExecuteGlobal <some string containing statements> 
```

`Execute`但是，通过“伪装” ，使其`ExecuteGlobal` *看起来*像函数调用（它们**是**表达式）

```
Execute(<some string containing statements>)
ExecuteGlobal(<some string containing statements>) 
```

VBScript 似乎很乐意“评估”它们，即使没有返回值，这对于**真正**的VBScript 函数是必需的（即使返回的“值”是 Nothing、Null 或 Empty）。没有 Javascript 中的“无效”概念。请注意，我`ExecuteGlobal`仅出于完整性考虑。从地址栏执行的任何“命令”`eval()`都已经在全局范围内。

事实上，这种“伪装”也适用于其他程序。特别是，`alert`。`alert`没有返回值，因此不是 VBScript 函数。它通常会被调用（在一个`<script>`元素内）

```
alert <some message string> 
```

但可以从地址栏调用

```
vbscript:alert(<some message string>) 
```

现在，`alert`它不是 VBscript 的一部分，而是全局（在 IE 中为`window`）对象的方法。因此，VBScript 函数和过程调用的严格语法并不适用，而是适用于 COM 对象方法调用的更宽松的实现。在这里，方法可以在表达式中作为函数调用（如果您想要返回值）或作为语句中的 Sub（如果您不想要）。如果特定方法没有返回值（即具有返回类型`Void`并且应始终作​​为 Sub 调用），则将其作为 Function 调用会返回`Empty`一个完全有效的表达式值。所以这两个 WshShell.Exec 调用都是有效的

```
<script type="text/vbscript">
dim wsh, oexec

set wsh = createobject("wscript.shell")

wsh.exec "calc"
set oexec = wsh.exec("calc")
</script> 
```

他们工作（带有“你真的想这样做吗？”警告）。因此，似乎`Execute`and `ExecuteGlobal`（以及`Eval`顺便说一句）并不是真正的“语句”（或函数），而是全局对象的方法，例如`alert`. 它们包含在 VBScript 参考中，因为每个实现都必须包含它们，就像每个 Javascript 实现都必须有一个 Global.parseInt()。但这是**个好消息**，因为它允许我们做类似的事情

```
vbscript:execute("if left(document.URL,5) <> ""https"" then alert(""NOT SECURE!!!!!"")") 
```

当然，所有这一切中最大的警告是
**它只能在 INTERNET EXPLORER 中工作，然后只能到 IE10**。
没有其他浏览器运行 VBScript（甚至是 Edge），并且从 IE11 开始它已被完全禁用。您可以通过使用开发人员工具或使用兼容模式伪造页面来使其在 IE11 中运行

```
<meta http-equiv="X-UA-COMPATIBLE" content="IE=7"> (or 8 or 9 or 10) 
```

（甚至在 Edge 中通过强制 IE 模式然后是兼容模式，但我还没有尝试过。）

所以真的，整个答案在很大程度上是学术性的（在 2020 年）。它告诉您如何做一些可能比仅仅努力学习 Javascript 更困难（并且用途更少）的事情。如果您已经可以使用 Javascript，为什么还要尝试在 VBScript 中执行此操作？再说一次，可能还有一些用户仍然在 XP 上运行 IE7，他们只知道 VBScript。我知道**我**只有在别无选择时才升级。

> 如果它没有坏，不要修理它！

是的，我知道 IE7 (IE*) 相当糟糕（和 XP），但是，嘿，如果你对你所拥有的感到满意，那么你还想要什么？

# python - Numpy：循环替代，优化

> ID：14046874
> 
> 赞同：2
> 
> 时间：2012-12-26T22:11:58.137
> 
> 标签：python, numpy

由于我是 Numpy 新手，因此在实现我用 C++ 编写的特定代码时遇到了问题

```
for(i=0;i<h;i++)
{
    for(j=0;j<w;j++)
    {
        val=0;
        for(i1=-size;i1<=size;i1++)
        {
            for(j1=-size;j1<=size;j1++)
            {
                h1=i+i1,w1=j+j1;
                if (w1<=0) w1=w1+w;
                if (h1<=0) h1=h1+h;
                if (w1>=w) w1=w1-w;
                if (h1>=h) h1=h1-h;
                val=val+sqrt(pow(data[i][j][0]-data[h1][w1][0],2)
                            +pow(data[i][j][1]-data[h1][w1][1],2)
                            +pow(data[i][j][2]-data[h1][w1][2],2));
            }
        }
    }
} 
```

如您所见，我基本上是为 [i,j] 元素添加欧几里得距离，其中每个元素都是子矩阵 [i-size to i+size][j-size to j+size] 的一部分

如何在 python 中编写代码，而不必使用循环对 numpy 数组中的每个元素执行一些操作，这些操作取决于其行和列位置。或者必须有某种优化它的方法。

这是我目前的实现，就像非常非常慢

```
for i in range(0,h):
    for j in range(0,w):
        for i1 in range(-window_size, window_size+1):
            for j1 in range(-window_size, window_size+1):
                h1=i+i1
                w1=j+j1
                if w1 <= 0:
                    w1+=w
                if  h1 <= 0:
                    h1+=h
                if w1 >= w:
                    w1-=w
                if h1 >= h:
                    h1-=h
                val[i][j] += np.sqrt(((source_pyr_down_3_Luv[i][j][0] - source_pyr_down_3_Luv[h1][w1][0])**2)
                                    +((source_pyr_down_3_Luv[i][j][1] - source_pyr_down_3_Luv[h1][w1][1])**2)
                                    +((source_pyr_down_3_Luv[i][j][2] - source_pyr_down_3_Luv[h1][w1][2])**2)) 
```

运行这段代码几乎花了 6 分钟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T22:30:29.143

访问子数组 im numpy 尝试：

```
data[i-size:i+size,j-size:j+size] 
```

编辑这个子数组（在这种情况下对每个元素简单 +1）：

```
data[i-size:i+size,j-size:j+size] += 1 
```

或获取另一个数组，其中包含 2 个数组（形状为 (n,2)）的元素之间的距离：

```
data3 = np.sqrt(np.power(data1[:,0]-data2[:,0],2)+ np.power(data1[:,1]-data2[:,1],2)) 
```

我知道这不是一个完整的答案，但我希望它可以帮助您入门。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T22:58:50.683

您可以通过预先扩展原始矩阵来避免显式内部循环并直接计算欧几里德距离矩阵，这样就不需要对元素索引进行检查：

```
# Extend the matrix to avoid modular access
h, w, _ = data.shape
exdata = numpy.zeros((h+2*size, w+2*size, 2), data.dtype)
exdata[size:-size, size:-size, :] = data[:,:,:]  # Fill central part
exdata[:size,:,:] = exdata[-size*2:-size,:,:]    # Copy last rows to begin
exdata[-size:,:,:] = exdata[size:size*2,:,:]     # Copy first rows to end
exdata[:,:size,:] = exdata[:,-size*2:-size,:]    # Copy last cols to begin
exdata[:,-size:,:] = exdata[:,size:size*2,:]     # Copy first cols to end

# Do the actual computation
val = 0
for i in xrange(h):
    for j in xrange(w):
        dx = numpy.copy(exdata[i:i+size*2+1, j:j+size*2+1, 0])  # all x values
        dy = numpy.copy(exdata[i:i+size*2+1, j:j+size*2+1, 1])  # all y values
        dx -= dx[size, size] # subtract central x
        dy -= dy[size, size] # subtract central y
        dx *= dx # square dx
        dy *= dy # square dy
        dx += dy # sum of squares
        val += numpy.sum(dx ** 0.5) 
```

# c# - 使用嵌套属性忽略“对象引用未设置为对象实例”错误的最佳方法是什么？

> ID：14046875
> 
> 赞同：5
> 
> 时间：2012-12-26T22:11:57.597
> 
> 标签：c#, asp.net-mvc

我遇到了很多我想展示一些东西的情况

```
@ev.Event.Instructor.Name 
```

但是教练属性允许为空。在这些情况下，“对象引用未设置为对象的实例”。抛出错误，但我想忽略它并且没有返回任何内容..

有没有比到处创建大量三元表达式来检查空值更好的方法来处理这个问题？

等效的 php 表达式将是

```
@$ev.Event.Instructor.Name 
```

我一直在将一些 webforms 视图转换为 MVC，等效的 Eval 语句将忽略空引用错误。

澄清一下：@ev 属性来自 linq 查询，在某些情况下我也有

```
@ev.mainContact.FirstName @ev.mainContact.LastName
@ev.mainContact.Company.Name 
```

不仅 mainContact 可以为空，而且 mainContact 的公司也可以为空。使用三元检查 null 来选择每个属性似乎是同样糟糕的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T22:14:50.127

一种方法是向 Event 添加另一个属性：

```
public string InstructorName
{
    get { return Instructor == null ? string.Empty : Instructor.Name; }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T22:16:05.800

没有“忽略异常”之类的东西。您不应该引起异常或应该处理它们。

```
public class Event {
     public Event() {
          this.Instructor = new Instructor();
     }
} 
```

或者

```
@(ev.Event.Instructor == null ? String.Empty : ev.Event.Instructor.Name) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T22:49:43.470

我认为另一种令人讨厌的方法是：

```
@{try{@ev.Event.Instructor.Name}catch{}} 
```

我决定使用这种方法，而不是在使用三元表达式的全选中添加 18 个左右的额外属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T22:14:37.657

您应该在构造函数中实例化您的对象，以避免空对象，例如：

```
public class Event{
     public Event(){
          Instructor = new Instructor();
     }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-26T22:14:35.487

就像是：

```
@$ev.Event.Instructor != null ? @$ev.Event.Instructor.Name : String.Empty 
```

# regex - 使用 sed 匹配模式并从行删除到文件末尾

> ID：14046878
> 
> 赞同：26
> 
> 时间：2012-12-26T22:12:55.457
> 
> 标签：regex, linux, bash, unix, sed

我正在尝试匹配来自管道输入和/或文件的模式，然后从匹配的行中删除到文件的末尾，包括在内。我到处寻找，但似乎找不到适合我需要的表达方式。

以下表达式允许我删除到流的开头，包括匹配的模式：

```
sed -e '1,/Files:/d' 
```

给定一些样本数据：

```
Blah blah blah
Foobar foo foo
Files:
 somefiles.tar.gz 1 2 3
 somefiles.tar.gz 1 2 3

-----THIS STUFF IS USELESS-----
BLEH BLEH BLEH
BLEH BLEH BLEH 
```

运行上面的表达式会产生：

```
Files:
 somefiles.tar.gz 1 2 3
 somefiles.tar.gz 1 2 3

-----THIS STUFF IS USELESS-----
BLEH BLEH BLEH
BLEH BLEH BLEH 
```

我想达到类似的效果，但方向相反。使用上一个表达式的输出，我想从`-----THIS STUFF IS USELESS-----`文件的末尾删除，包括在内。它应该产生（经过第一个表达式之后）：

```
Files:
 somefiles.tar.gz 1 2 3
 somefiles.tar.gz 1 2 3 
```

我也愿意使用任何其他工具，只要它在任何其他 POSIX 系统上可用并且不使用特定于版本（例如特定于 GNU）的选项。

实际文本可以在这里找到：http: [//pastebin.com/CYBbJ3qr](http://pastebin.com/CYBbJ3qr) 注意从`-----THIS STUFF IS USELESS-----`到的变化`-----BEGIN PGP SIGNATURE-----`。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-26T22:24:30.657

为什么不

```
 sed '/^-----THIS STUFF IS USELESS-----$/,$d' file 
```

在您使用的范围表达式中，',$' 将指定“到文件末尾”

```
1 is first line in file, 
$ is last line in file. 
```

**输出**

```
Files:
 somefiles.tar.gz 1 2 3
 somefiles.tar.gz 1 2 3 
```

，`GNU sed`你可以做

```
sed '/^-----THIS STUFF IS USELESS-----$/Q' file 
```

where`Q`类似于`q`quit 命令，但不打印匹配的行

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T22:26:04.193

与其试图弄清楚如何表达你不想要的东西，不如打印你想要的东西：

```
awk -v RS= '/Files:/' file 
```

编辑：鉴于您修改后的输入：

```
awk '/^Files:$/{f=1} f; /^$/{f=0}' file 
```

或者：

```
awk '/^Files:$/{f=1} f; /^-----THIS STUFF IS USELESS-----$/{f=0}' file 
```

如果你更喜欢。

您也可以使用以下任何一种：

```
awk '/^Files:$/,/^-----THIS STUFF IS USELESS-----$/' file
sed '/^Files:$/,/^-----THIS STUFF IS USELESS-----$/' file 
```

但它们以后很难扩展。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-26T22:26:11.890

```
sed -e '/^-----THIS STUFF IS USELESS-----$/,$ d' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-26T22:29:13.907

脏美工刀`grep`版：

```
cat your_output.txt | grep -B 99999999 "THIS STUFF IS USELESS" | grep -v "THIS STUFF IS USELESS" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T22:26:04.487

这是一个正则表达式，我认为它可以满足您的要求：`^(?:(?!Files:).)+|\s*-----THIS STUFF IS USELESS-----.+`确保设置 dotall 标志。

演示+说明：[http ://regex101.com/r/xF2fN5](http://regex101.com/r/xF2fN5)

您只需要运行这一个表达式。

# solr - 在相关文档中按字符串查找结果

> ID：14046882
> 
> 赞同：2
> 
> 时间：2012-12-26T22:13:12.133
> 
> 标签：solr

我有一个包含这些文档的 Solr 数据库：

```
<doc>
    <str name="document_name_s">comment</str>
    <int name="deal_id_i">1</int>
    <int name="forumuser_id_i">8</int>
    <str name="id">108</str>
    <str name="message_s">hi kone you are right...</str>
</doc>
<doc>
    <str name="document_name_s">comment</str>
    <int name="deal_id_i">1</int>
    <int name="forumuser_id_i">8</int>
    <str name="id">112</str>
    <str name="message_s">41lxlg9x abbiiiog 1rkrp 440s 7hm34 4vyvg7t wevo bmq 718am5 d3d609 zxjrkd ycklykhx 1xasj v307287</str>
</doc>
<doc>
    <str name="document_name_s">deal</str>
    <str name="content_s">o2tqtoc3ge ryjf tti ed3rr6 r1vw4wla1c 3lmu7 o72ee1fmd jv7dcn usao0 iuz cy4s91 ys52w3t 8td2hz2pgu 58pxad6l zsyov07p r2z2 doav4k u1i49k c0te79k wrdkbqkr eo8p8e0ez 65u 3syi zu870a k3pl p4v zrjurlsa3 ivg v1h00 nfhx ujcxx3 mf46s xkld0fh mkeexbyb sqpq udncpnd0 uz0922dmmj vqwn zf59gl0rc 3tn z98n kql9ry1p 02gk 0rff5lt hb0exi9cp olik492q 4ycl c9ma2zx uwghjavut2 sczpmlg qqpy tqptp5h k5qce2pj ntv 5u98bg58n mshyy8e m7ip0m m7gd8z343 a99df fhp5g5ny 51vg3mxm cfk7au mmf67x0cj hrh 7i16 0mxzaq97 ca9o 5g0ct p0b hf6h3 e9ghhrjlt dqjj x1v9 ko3a5i hoq1 44k jfhf 121bsb6ud3 cql6l ipirv2 6qhpjcb 25t0zm67 ttm5lt</str>
    <int name="forumuser_id_i">1</int>
    <str name="id">1</str>
    <str name="plainlink_s">http://www.zalando.de/adidas-performance-dfb-pu-messenger-core-green-white-ad544a0e0-602.html</str>
    <str name="title_s">g4c Schuhe vtklq50</str>
</doc>
<doc>
    <str name="document_name_s">forumuser</str>
    <str name="id">1</str>
    <str name="username_s">kone2</str>
</doc> 
```

现在我想找到所有“交易”，例如用户“kone”是交易的用户，或者评论文本包含“kone”作为单词。这在 Apache Solr 4 中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:14:38.570

您需要的是一个**Join**查询。**[Solr 4.0 文档](http://wiki.apache.org/solr/Join)**中描述了语法。我想第一个例子已经是你想要的了，所以这应该有效：

```
q={!join from=forumuser_id_i to=id}kone 
```

与“正常”查询相比，唯一的变化是连接关系的规范：

```
q={!join from=... to=...}... 
```

这允许您进一步限制结果，例如通过使用过滤查询 ( `fq`) 仅返回“交易”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:00:41.383

您在这里实际上想要实现的是不同文档之间的 JOIN。

不幸的是，此功能仅从[Solr 4.0](http://wiki.apache.org/solr/Join)开始可用。

# security - 任何身份验证日志的公共数据集？

> ID：14046883
> 
> 赞同：2
> 
> 时间：2012-12-26T22:13:19.513
> 
> 标签：security, authentication, dataset, data-mining, mail-server

我正在寻找登录日志，尤其是来自邮件服务器的登录日志，以用作示例数据。我浏览了很多公共数据集，但找不到任何类似的东西。

我希望能够查看显示登录尝试的日志，其中包含时间戳、请求者 IP 地址、用户帐户、成功/失败等字段。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:12:07.487

我对你没有发现任何东西并不感到惊讶。

1.  该**信息是敏感信息**，不应共享。例如，有人可能会不小心将他们的密码输入为登录名。在日志中，这将显示为登录失败，然后来自同一 IP 的下一次登录可能是适当的用户名。

2.  这些数据对任何人都没有什么用处，特别是如果它是历史数据或已匿名。为什么有人会费心分享这种数据？

3.  此外，登录（和攻击，假设您正在调查）模式会随着时间而变化。因此，从历史数据中得出的任何结论都可能不再成立。

因此，您必须从信任您不会滥用它的人那里获得最新数据，并根据 NDA。如果它真的*有*任何用处。

如果您要查找聚合数据，您可能会获得更好的成功。例如，用户活动与登录失败的时间模式。但无论如何，这个网站是关于*编程*问题，而不是“我从哪里获取数据”。您将不得不主要使用谷歌。

# php - CodeIgniter $this->input->get() 不工作

> ID：14046884
> 
> 赞同：6
> 
> 时间：2012-12-26T22:13:23.537
> 
> 标签：php, codeigniter

我不确定为什么这不起作用。我在配置文件中有 allow_get_array = TRUE 。这就是我想要做的..

这是用户将从他们的电子邮件中单击的链接

```
http://www.site.com/confirm?code=f8c53b1578f7c05471d087f18b343af0c3a638 
```

confirm.php 控制器：

```
$code = $this->input->get('code'); 
```

也试过

```
$code = $this->input->get('code', TRUE); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T22:17:39.123

在您的`config.php`更改中，以下内容：

```
$config['uri_protocol'] = 'AUTO';
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-';
$config['enable_query_strings'] = FALSE; 
```

至：

```
$config['uri_protocol'] = 'REQUEST_URI';
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-?';
$config['enable_query_strings'] = TRUE; 
```

您可以更改 URI 以使用诸如`http://www.site.com/confirm/code/f8c53b1578f7c05471d087f18b343af0c3a638`. 要访问您将使用的代码段`$this->uri->segment(3);`。我个人更喜欢这种方式来使用查询字符串。请参阅[URI 类](http://ellislab.com/codeigniter/user-guide/libraries/uri.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-02T20:45:25.773

用这个：

```
$code = isset($_REQUEST['code']) ? $_REQUEST['code'] : NULL; 
```

**编辑：**

在 PHP >=7.0 中，您可以这样做：

```
$code = $_REQUEST['code'] ?? NULL; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-27T01:14:35.603

我这样做了，它无需更改配置文件即可工作：

```
//put some vars back into $_GET.
parse_str(substr(strrchr($_SERVER['REQUEST_URI'], "?"), 1), $_GET);

// grab values as you would from an ordinary $_GET superglobal array associative index.
$code = $_GET['code']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T23:08:23.900

你能试试吗

```
http://www.site.com/confirm/?code=f8c53b1578f7c05471d087f18b343af0c3a638 
```

代替

```
http://www.site.com/confirm?code=f8c53b1578f7c05471d087f18b343af0c3a638 
```

没有任何配置，否则请编辑

# android - Android Viewpager 显示错误的页面

> ID：14046889
> 
> 赞同：2
> 
> 时间：2012-12-26T22:13:54.863
> 
> 标签：android, fragment, viewpagerindicator

我有一个 viewpager，在那个 viewpager 中我有 6 页。所有页面都包含 listviews。有时 viewpager 在错误的索引处显示错误的页面。这是我的 viewpager 适配器：

```
public class TestFragmentAdapter extends FragmentPagerAdapter{
    protected static final String[] CONTENT = new String[] { "a","b","c","d","e","f" };

    private int mCount = CONTENT.length;
    Fragment fragment1,fragment2,fragment3,fragment4,fragment5,fragment6;

    public TestFragmentAdapter(FragmentManager fm) {
        super(fm);
        fragment1 = new CategoryListView();
        fragment2 = CustomizedListviewRecent.newInstance(41);
        fragment3 = CustomizedListviewMostRecents.newInstance(0);
        fragment4 = CustomizedListviewPopulars.newInstance();
        fragment5 = CustomizedListviewRecent.newInstance(42);
        fragment6 = CustomizedListviewRecent.newInstance(43);

    }

    @Override
    public Fragment getItem(int position) {
        if(position == 0)
            return fragment1;
        else if(position == 1)
            return fragment2;
        else if(position == 2)
            return fragment3;
        else if(position == 3)
            return fragment4;
        else if(position == 4)
            return fragment5;
        else
            return fragment6;
    }
    @Override
    public int getCount() {
        return mCount;
    }

    @Override
    public CharSequence getPageTitle(int position) {
      return TestFragmentAdapter.CONTENT[position % CONTENT.length];
    }

    public void setCount(int count) {
        if (count > 0 && count <= 10) {
            mCount = count;
            notifyDataSetChanged();
        }
    }

} 
```

这是我创建viewpager的方式：

```
public class SampleTitlesDefault extends BaseSampleActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mAdapter = new TestFragmentAdapter(getSupportFragmentManager());

        mPager = (ViewPager)findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        mIndicator = (TitlePageIndicator)findViewById(R.id.indicator);
        mIndicator.setViewPager(mPager);
        mIndicator.setCurrentItem(1);
    }

} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:00:31.337

尝试这个：

```
public class TestFragmentAdapter extends FragmentPagerAdapter{
    protected static final String[] CONTENT = new String[] { "a","b","c","d","e","f" };
    ArrayList<Fragment> fragments;

    public TestFragmentAdapter(FragmentManager fm) {
        super(fm);
        fragments.add(new CategoryListView());
        fragments.add(CustomizedListviewRecent.newInstance(41));
        fragments.add(CustomizedListviewMostRecents.newInstance(0));
        fragments.add(CustomizedListviewPopulars.newInstance());
        fragments.add(CustomizedListviewRecent.newInstance(42));
        fragments.add(CustomizedListviewRecent.newInstance(43));
    }

    @Override
    public Fragment getItem(int position) {
        return fragments.get(position);
    }
    @Override
    public int getCount() {
        return fragments.size();
    }

    @Override
    public CharSequence getPageTitle(int position) {
      return TestFragmentAdapter.CONTENT[position % CONTENT.length];
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-21T02:39:49.003

这`mIndicator.setCurrentItem(1);` 必须用这个代替`mPager.setCurrentItem(1);`

# database - 关于如何为特定语言页面实施 CMS 的想法

> ID：14046890
> 
> 赞同：1
> 
> 时间：2012-12-26T22:13:54.177
> 
> 标签：database, internationalization, asp.net-mvc-4

我正在建立一个网上商店，我正在实施语言选择以及 CMS。我还必须为站点管理员提供能够通过 CMS 编辑页面的方法。

这不存在问题。

问题是我应该如何为这些页面建立我的表格。我已经完成了我的数据库设计，但认为网页没有通过。

对于页面（称为网页）的所有语言和特定于语言或文化的信息（称为 Webpages_local），我已经有以下表格结构。 ![数据库设计片段](../Images/2a626c1eaf234abc9195adbcddaf4a2e.png)

**我可以添加或删除哪些属性**，以便我可以轻松动态地执行 CRUD 操作？

我正在使用具有以下 url 结构的剃刀**语法的****MVC4 ：**

 **```
url: "{language}/{controller}/{action}/{id}" 
```

我现在主要担心的是，当访问者按下时，我不确定如何显示页面的特定语言内容，例如，指向“关于”页面的链接。

也许使用 url 的控制器部分并将其保存为我的网页表中的键并对其进行过滤以及选择的语言？

因此，当访问者访问[http://example.com/nl/About](http://example.com/nl/About)时，我在 AboutController 中检索“nl”和“about”，当然首先过滤它们，然后通过查询数据库选择正确的 nl ​​内容?

我应该如何从技术上解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:23:22.263

我会在您的表格中添加一个名为 language 或类似的列，而不是拥有多个表格。

然后您的控制器可以在您的菜单表中找到请求的语言键后获取正确的页面，然后它可以读取您的网页表中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T00:31:26.800

我会用它`OnActionExecuting`来处理检索语言过程，例如：

```
protected override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            #region set Language
            var lang = string.Empty;
            if (filterContext.RouteData.Values["lang"] != null && !string.IsNullOrWhiteSpace(filterContext.RouteData.Values["lang"].ToString()))
            {

                // set the culture from the route data (url {lang})
                lang = filterContext.RouteData.Values["lang"].ToString();
                switch (lang)
                {
                    case "es":
                        break;
                    case "en":
                        break;
                    default:
                        lang = "es";//default language
                        filterContext.RouteData.Values["lang"] = lang;
                        filterContext.HttpContext.Response.Redirect("/");
                        break;
                }

            }
            else
            {
                //set default language
                lang = "es";
                filterContext.RouteData.Values["lang"] = lang;
            }

            Thread.CurrentThread.CurrentUICulture = CultureInfo.CreateSpecificCulture(lang);
            Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture(lang);

            #endregion

            base.OnActionExecuting(filterContext);
        } 
```

然后在您的代码中的任何地方，您只需阅读`Thread.CurrentThread.CurrentCulture`（这将是您的全局语言指示器）以显示正确的语言。

**更新 - 知道我明白你的意思=）**

如果页面将被动态创建，那么您将不会有`ActionResult`每页，您只需要一个 ActionResult，例如：

```
public ActionResult ShowPage(int id,string slug)
{
   //Use the slug to check for url attacks and ensure 301 redirections to the correct url
   var page = db.Webpages_local.First(p=> p.id == id 
          && p.culture.name == Thread.CurrentThread.CurrentCulture);

   return View(page);
} 
```

出于 SEO 原因，我建议您定义如下路线：

```
 routes.MapRoute(
       name: "LocalizedPages",
       url: "{lang}/p/{slug}/{id}",
       defaults: new { controller = "Page", action = "Show", id = UrlParameter.Optional },
       constraints: new { lang = @"(es|en|fr|nl)" }
   ); 
```

这会给你这样的网址：

```
/nl/p/about/1 //the p is just an identifier for 'page', to differentiate this routes from others 
```**

# perl - 获取/构建草莓 perl.lib

> ID：14046892
> 
> 赞同：1
> 
> 时间：2012-12-26T22:14:05.317
> 
> 标签：perl, visual-c++, static-libraries

我为 Windows 安装了草莓 perl x64。
不幸的是，我找不到 perl.xxx.lib。只有 perl.5.16.2.dll。
我需要这个库才能用 swig 编写一个 perl-c++ 包装器。（该项目需要用于链接的库）
任何人都知道要做什么才能获得库（我可以构建它吗？）
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T00:01:07.153

运行以下命令：

```
C> perl -V 
```

这将产生大量输出，其中一些可能对您有用。例如，我的部分输出是：

```
libc=, so=dll, useshrplib=true, libperl=libperl516.a 
```

该`libperl512.a`文件位于`perl/lib/CORE`我安装草莓 Perl 的目录下。

那是你要找的吗？否则，请查看[Config](http://perldoc.perl.org/Config.html)模块，看看是否有任何感兴趣的内容。我做了以下事情：

```
use Config;

print "$Config{_a}\n"; 
```

它打印出来`.a`。

试试这个有趣的：

```
use Config;

for $key (sort keys %Config) {
    print "$key: $Config{$key}\n" if $Config{$key};
} 
```

输出中的某处应该是有趣的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:05:27.360

正如大卫 W 指出的那样：

libperl516.a

是我要找的。VC2008 可以用它来链接。

# eclipse - JBoss 工具 - 禁用可视化编辑器

> ID：14046899
> 
> 赞同：1
> 
> 时间：2012-12-26T22:14:36.003
> 
> 标签：eclipse, jboss-tools

我刚刚添加了 JBoss 工具，我喜欢从中获得的很多东西。但是，我注意到我的 .xhtml 文件加载 /lot/ 的速度比我安装 JBoss 工具之前慢（大约几秒钟）。我愿意接受一些减速（使用 Eclipse 上的工具总是有开销），但这是一个相当长的等待。我怀疑这与 JBoss 为 .xhtml 添加的可视化编辑器有关。我使用的是 Windows 64 位，无法使用此编辑器。我也试过按照这个链接的建议

[http://docs.jboss.org/tools/whatsnew/vpe/vpe-news-3.3.0.M2.html](http://docs.jboss.org/tools/whatsnew/vpe/vpe-news-3.3.0.M2.html)

并将 -Dorg.jboss.tools.vpe.loadxulrunner=false 添加到 eclipse.ini 但我没有注意到任何加速。我还卸载了 JBoss 可视化编辑器的插件，但没有看到任何结果。卸载插件后，视觉/源代码、源代码和预览选项卡仍位于 .xhtml 编辑器的底部，所以也许我卸载了错误的选项卡？

我正在使用 Eclipse for Java EE Juno 服务版本 1 Build id：20120920-0800。我在这个项目上安装了 CDI、动态 Web 模块、Java、javascript、JSF 2.1、JAX-RS 1.1 JBoss Maven Integration 1.0 和 JPA 2.0 方面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T00:56:22.257

很难说你刚刚卸载了什么。

如果你只想卸载可视化编辑器，你可以这样做：

*   只需再次安装 Eclipse，安装 JBoss Tools 时不会选择可视化编辑器
*   尝试卸载可视化编辑器。我认为（但*我从未测试过*）你应该从**org.jboss.tools.vpe开始的***插件*和*功能*目录中删除

 **我不知道是否存在依赖关系等问题 - 您应该在进行任何更改之前备份 Eclipse 目录。

也许只需使用其他编辑器打开文件就足够了：

*   您可以使用其他编辑器打开单个文件，只需右键单击文件上的*Package explorer*视图并选择*Open with...*菜单 - 然后您可以使用例如 HTML 编辑器打开文件： ![在此处输入图像描述](../Images/ffa6d01f05a551c1138de824bb80a1d1.png)

*   *您可以通过打开Window->Preferences*菜单并找到*Find associations*位置来更改所有文件的默认编辑器。应该有***.xhtml**扩展名 - 选择它并更改默认编辑器。 ![在此处输入图像描述](../Images/1bab45b792b74b1ca965bb4b0e5a0b37.png)**

# matlab - 如何产生以下随机变量？

> ID：14046902
> 
> 赞同：2
> 
> 时间：2012-12-26T22:14:45.943
> 
> 标签：matlab, random, statistics, distribution, matlab-figure

使用 MATLAB，您必须从 (0,1) 之间的均匀分布开始。您需要生成以下随机变量序列：

1.瑞利分布随机变量。（a=0，b=1）。

2.指数RV（a=0，b=1）

3.高斯RV (a=0, (σX)=2)

* * *

至少，给我第一个的 MATLAB 代码。

我厌倦了很多时间来使用这个方程来解决它：![在此处输入图像描述](../Images/e28932d62a0f3532f021d67dbb3a4eaf.png)

但它对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T22:36:13.583

以下是公式，在 Matlab 中很容易实现：

1.  [生成瑞利分布的随机变量](http://en.wikipedia.org/wiki/Rayleigh_distribution#Generating_Rayleigh-distributed_random_variates)
2.  [生成指数变量](http://en.wikipedia.org/wiki/Exponential_distribution#Generating_exponential_variates)
3.  [从高斯分布生成值](http://en.wikipedia.org/wiki/Normal_distribution#Generating_values_from_normal_distribution)

前两种方法基于[逆变换采样](http://en.wikipedia.org/wiki/Inverse_transform_sampling_method)。在第三种情况下，CDF 无法解析倒置，因此 ITS 不起作用，需要特殊技术。

**编辑**

示例（瑞利）：

```
n = 10000; % number of variates
u = rand(n, 1); % generating uniform variates
sigma = 1; % the parameter
x = sigma * sqrt(-2 * log(u)); % generating Rayleigh-distributed variates
hist(x, 50); % histogram 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T22:23:35.647

所有这些变量都可以`Matlab`使用它的`random`功能生成：http: [//www.mathworks.com/help/stats/random.html](http://www.mathworks.com/help/stats/random.html)

但是您的问题可能需要从均匀分布中获取这些数字。因此，您要寻找将均匀分布转换为所需的数学公式，很可能它们在维基百科中。

# android - 网络服务 Android 肥皂

> ID：14046908
> 
> 赞同：0
> 
> 时间：2012-12-26T22:15:07.330
> 
> 标签：android, web-services, ksoap2

如何使用 WebService？这是我的代码：

```
WebServiceParams ws = new WebServiceParams(context);

    SoapObject request = new SoapObject(ws.getWSNameSpace(), ws.getWSHelloMethod());

    SoapSerializationEnvelope soapSerializationEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    soapSerializationEnvelope.setOutputSoapObject(request);

    request.addProperty("name", "Charly");

    try {
        HttpTransportSE httpTransportSE = new HttpTransportSE(ws.getWSUrl());
        httpTransportSE.debug = true;

        httpTransportSE.call(ws.getWSNameSpace() + ws.getWSLoginMethod(), soapSerializationEnvelope);

        String xmlResult = soapSerializationEnvelope.getResponse().toString();

        return null;
    } catch (Exception e) {
        e.printStackTrace();
        return e;
    } 
```

我得到了 soapFault faultcode soapClient faultstring Unmarshalling Error unexpected element uri:"", local:"name" expected elements are <{}request>

Web服务的主要部分是：

```
<request>
      <name>?</name>
</request> 
```

如何编写请求标签并在名称内发送它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:48:34.993

我不知道你是否使用图书馆。我能够使用[Ksoap2](http://code.google.com/p/ksoap2-android/)来实现这一点。

这里有一个例子。希望能帮助到你。

```
public static int getTotalRows(){
    SoapObject request = new SoapObject(Variables.WEBSERVICE_NAMESPACE,    Variables.METHOD_GETDEALS_TOTAL);
    SoapSerializationEnvelope env = new     SoapSerializationEnvelope(SoapEnvelope.VER11);
    env.dotNet = true;
    env.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new      HttpTransportSE(Variables.WEBSERVICE_URL);
    int totalRows = 0;

    try {
        androidHttpTransport.call(Variables.SOAP_ACTION_GETDEALS_TOTALROWS, env);
        SoapPrimitive response = (SoapPrimitive)env.getResponse();
        totalRows = Integer.valueOf(response.toString());
        Log.i(Variables.TAG, response.toString());
        return totalRows;
    } catch (IOException e) {
        e.printStackTrace();
        return totalRows;
    } catch (XmlPullParserException e) {
        e.printStackTrace();
        return totalRows;
    } catch (NumberFormatException e) {
        e.printStackTrace();
        return totalRows;
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
        return totalRows;
    }
} 
```

# reporting-services - SSRS 报告 - 隐藏 Tablix 不会缩小空间并将内容向上移动

> ID：14046910
> 
> 赞同：8
> 
> 时间：2012-12-26T22:15:13.303
> 
> 标签：reporting-services, ssrs-2008, ssrs-tablix

我有一个 tablix，下面有另一个 tablix，第一个 tablix 的底部和第二个 tablix 的顶部之间有 0 个空格。当我将第一个 tablix 的 Hidden 属性更改为 true 时，它​​会隐藏带有空白的 tablix，但不会向上移动第二个 tablix。

是否可以隐藏第一个 tablix 并将第二个 tablix 向上移动？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T22:18:53.023

啊，刚刚想通了。必须将两个 tablixes 添加到同一个矩形。然后隐藏第一个 tablix 将第二个向上移动。

# javascript - 在 Symfony2 文档中显示 Yaml、Xml、PHP 的插件

> ID：14046914
> 
> 赞同：0
> 
> 时间：2012-12-26T22:15:31.620
> 
> 标签：javascript, symfony

在 symfony2.com 文档站点上经常有代码示例（默认选择 yaml）。我可以（通过小标签）切换格式以从 Yaml 显示为 Xml 或 PHP。我想知道这是否是一个javascript插件？你知道这是什么来头吗？我想在我的网站上使用类似的东西。

这是一个示例[http://symfony.com/doc/current/book/page_creation.html](http://symfony.com/doc/current/book/page_creation.html) - “步骤 1：创建路线”部分

# php - 在 PHP 中打开连接发送数据

> ID：14046917
> 
> 赞同：1
> 
> 时间：2012-12-26T22:15:49.153
> 
> 标签：php, connection, client

我正在尝试找到使用 PHP 向客户端发送数据的问题的解决方案。最大的问题是 - 我正在尝试做的是在使用 PHP 脚本的单个连接中继续发送数据。我确定还有其他方法，但目前我不知道如何解决这个问题。

我要做的是：客户端连接到 Web 服务器并保持连接打开，因此 TCP 连接“已建立”。他将每隔 X 秒继续发出例如 GET 请求，以保持此连接处于活动状态。

在某个事件的这个连接中，我想在没有他发出请求的情况下向客户端发送一些数据！所以这意味着事件是在服务器端触发的，而不是在客户端触发的。

由于我的客户端是 Arduino 模块，因此不可能使用任何 JavaScript 或任何客户端技术。我可以保持连接打开，但我需要使用 HTTP 将数据传递给客户端。

我在服务器上设置了一个数据库，当数据库内部发生变化时，PHP 会向客户端发送数据。

我试图在 PHP 脚本中循环运行 php flush()；但这不是我想要的方式。

所以任何建议表示赞赏。谢谢你。

编辑：将是完美的解决方案也适用于 Windows 机器！

edit2：将有多个客户，而不仅仅是一个（例如数百个）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:25:23.663

只要您没有很多客户端，服务器端事件听起来就可以为您工作。 [http://dsheiko.com/weblog/html5-and-server-sent-events](http://dsheiko.com/weblog/html5-and-server-sent-events)

只需阅读您将拥有数百个客户端，在这种情况下，您可能不想使用 PHP，而是使用 node.js。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T23:02:56.237

我认为您正在寻找的是 IPC - 进程间通信。在你的情况下，我会建议一个消息队列（或多个）

（在客户端）

1.  打开连接到`foo.php`
2.  收到新行时，对其进行处理。
3.  如果连接超时，请重新打开它

（在服务器上 - `foo.php`）

1.  打开[消息队列](http://php.net/manual/en/ref.sem.php)（您必须为每个用户注册一个消息队列！）
2.  注册它，以便您`bar.php`了解它。
3.  开始[*阻塞*接收](http://php.net/manual/en/function.msg-receive.php)。
4.  收到消息后，发送您要发送的任何内容，FLUSH OUTPUT BUFFERS，返回**2。**
5.  如果有任何超时，请返回**2。**

（在服务器上 - `bar.php`）

1.  当数据库发生变化时，向所有活动队列发送消息

这种方法存在一些问题：

*   服务器端仅适用于 Linux / Unix（包括 Mac）
*   消息队列数量有限
*   您可能需要做一些家务，删除旧队列等。

好处：

*   这是独立于应用程序的。消息队列是一种操作系统功能，因此您`bar.php`实际上可以说是一个 java 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T22:20:25.507

CRON 工作怎么样？

[http://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)

[http://www.cyberciti.biz/faq/how-do-i-add-jobs-to-cron-under-linux-or-unix-oses/](http://www.cyberciti.biz/faq/how-do-i-add-jobs-to-cron-under-linux-or-unix-oses/)

我认为这可能是您项目的解决方案。如果我正确理解 CRON，你要做的就是以给定的时间间隔执行给定的脚本。所以这基本上就是你想要的，每 X 秒执行一次的脚本。在您的脚本中，您的函数与数据库一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T10:40:53.430

好的，所以我想我找到了我想要的工作方式。flush() 不起作用的问题是我在刷新之前没有达到刷新缓冲区限制。此外，我正在使用 Nginx 服务器，并且禁用了 gzip（以防万一）。

我的绝对有效的测试代码如下所示：

```
<?
ob_implicit_flush(1);

for($i=0; $i<10; $i++){
  echo $i;

  //this is for the buffer achieve the minimum size in order to flush data
  echo str_repeat(' ',1024*64);

  sleep(1);
}
?> 
```

在这里找到我的答案：[PHP Flush that works... even in Nginx](https://stackoverflow.com/questions/4870697/php-flush-that-works-even-in-nginx)

如果它可以接受这样的输出，我将用我的 Arduinos 对其进行测试。感谢你的帮助。

# c# - 如何捕获 UTM Cookies 值？

> ID：14046919
> 
> 赞同：0
> 
> 时间：2012-12-26T22:15:50.413
> 
> 标签：c#, cookies, google-analytics, httpwebrequest, webrequest

`WebRequests`我正在尝试使用in登录网站`C#` 但该网站正在使用**Google-Analytics**库，这正在制作一些`UTM-Cookies`
问题是我如何捕获这些 cookie 值并将它们传递给网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:27:15.990

该类[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)具有一个[`CookieContainer`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.cookiecontainer.aspx)集合属性，您可以添加[`Cookie`](http://msdn.microsoft.com/en-us/library/system.net.cookie.aspx)该类的实例。

该类[`HttpWebResponse`](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.aspx)有一个[`Cookies`](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.cookies.aspx)包含[`Cookie`](http://msdn.microsoft.com/en-us/library/system.net.cookie.aspx)该类实例的集合属性。

提出您的请求，从响应中读取 cookie，然后根据需要将它们添加到任何后续请求中。

# python - 无法在 python 2.7 和 selenium 中导入`beautifulSoup`

> ID：14046923
> 
> 赞同：0
> 
> 时间：2012-12-26T22:16:12.140
> 
> 标签：python, selenium, beautifulsoup

我正在尝试导入`beautifulSoup`但出现错误。您能告诉我为什么会这样或指导我解决同样的问题吗？

```
Microsoft Windows [Version 6.1.7600]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\Arup Rakshit>python
'python' is not recognized as an internal or external command,
operable program or batch file.

C:\Users\Arup Rakshit>ipython
'ipython' is not recognized as an internal or external command,
operable program or batch file.

C:\Users\Arup Rakshit>cd..

C:\Users>cd..

C:\>cd Python27

C:\Python27>cd C:\Python27\selenv\Scripts

C:\Python27\selenv\Scripts>my_selenium_script.py
hello

C:\Python27\selenv\Scripts>python
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> from urllib import urlopen
>>> from beautifulSoup import BeautifulSoup
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named beautifulSoup
>>> 
```

**编辑**

```
>>> from BeautifulSoup import BeautifulSoup
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named BeautifulSoup
>>> 

from bs4 import BeautifulSoup
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named bs4 
```

> > >

**编辑1**

```
>>> from urllib import urlopen
>>> from bs4 import BeautifulSoup
>>> source = BeautifulSoup(urlopen(url))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'url' is not defined
>>> source = BeautifulSoup(urlopen(https://demo.aravo.com))
  File "<stdin>", line 1
    source = BeautifulSoup(urlopen(https://demo.aravo.com))
                                        ^
SyntaxError: invalid syntax
>>> from urllib import urlopen
>>> from bs4 import BeautifulSoup
>>> source = BeautifulSoup(urlopen(https://demo.aravo.com/))
  File "<stdin>", line 1
    source = BeautifulSoup(urlopen(https://demo.aravo.com/))
                                        ^
SyntaxError: invalid syntax
>>> source = BeautifulSoup(urlopen(demo.aravo.com/))
  File "<stdin>", line 1
    source = BeautifulSoup(urlopen(demo.aravo.com/))
                                                  ^
SyntaxError: invalid syntax
>>> source = BeautifulSoup(urlopen(demo.aravo.com))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'demo' is not defined
>>> 
```

**更新**

```
C:\>cd C:\Python27\selenv\Scripts

C:\Python27\selenv\Scripts>python
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> from urllib import urlopen
>>> from bs4 import BeautifulSoup
>>> source = BeautifulSoup(urlopen("https://demo.aravo.com/"))
>>> tables = source.findAll('td')
>>> import csv
>>> writer = csv.writer(open('filename.csv','w'))
>>> writer.writerow(rows)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'rows' is not defined
>>> 
```

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T22:18:41.457

尝试大写`BeautifulSoup`

```
from BeautifulSoup import BeautifulSoup 
```

如果您使用的是 BS4：

```
from bs4 import BeautifulSoup 
```

正如@poke 智能建议的那样，确保已`BeautifulSoup`安装是关键:) 试试这个，它讨论了 Windows 上的 BS 安装： [How to install beautiful soup 4 with python 2.7 on windows](https://stackoverflow.com/questions/12228102/how-to-install-beautiful-soup-4-with-python-2-7-on-windows)

# knockout.js - ko.mapping.toJS 不适用于子可观察数组属性

> ID：14046924
> 
> 赞同：2
> 
> 时间：2012-12-26T22:16:32.327
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0

当我在子属性Tags（一个observableArray）上调用ko.mapping.toJS 时，生成的JS 对象被映射为[{}, {}, {}]；关于为什么子属性的属性没有被映射的任何想法？

```
// Question
sv.QuestionService = function () {
    var _saveQuestion = function (question, callback) {
        var tags = [
            {
                Id: 1,
                Name: "food"
            },
            {
                Id: 2,
                Name: "career"
            },
            {
                Id: 3,
                Name: "fax"
            }
        ];

        $.each(tags, function (index, item) {
            question.Tags.push({ Id: 1, Name: "food" });
        });

        console.log(question.Tags());

        $.ajax("/Interview/saveQuestion", {
            data: ko.mapping.toJSON(question),
            dataType: "json",
            type: "post",
            contentType: "application/json",
            success: callback
        });
    };

    return {
        saveQuestion: _saveQuestion
    };
}();

// Question view model
sv.QuestionViewModel = function (data) {
    var self = this;
    if (!data.QuestionType) {
        data.QuestionType = "Not Specified";
    }
    this.Tags = ko.observableArray([]);
    ko.mapping.fromJS(data, {}, this);
    this.QuestionStatus = ko.computed(function () {
        return this.IsApproved ? "Pending Interview Question" : "Approved Interview Question"
    }, this);

    this.TagsText(this.TagsText() || "None");
};

// C#
public class InterviewQuestionViewModel {
    public long Id { get; set; }
    public string Text { get; set; }
    public string QuestionType { get; set; }
    public long? QuestionTypeId { get; set; }
    public string RequestorName { get; set; }
    public bool IsAdminApproved { get; set; }
    public bool IsActive { get; set; }
    public string TagsText { get; set; }
    public List<Tag> Tags { get; set; }

    public InterviewQuestionViewModel() {
        Tags = new List<Tag>();
    }
}

public class Tag {
    [Description("tag_id")]
    public long Id { get; set; }

    [Description("tag_name")]
    public string Name { get; set; }

    public bool IsActive { get; set; }

    public Tag() {
        IsActive = false;
    }
}

// Approved Questions view model
sv.ApprovedQuestionListViewModel = function () {
    var self = this;
    this.questions = ko.observableArray([]);

    this.questionCount = ko.computed(function () {
        return this.questions().length;
    }, this);

    this.load = function () {
        sv.QuestionService.getApprovedQuestions(function (data) {
            var mapped = ko.utils.arrayMap(data, function (item) {
                return new sv.QuestionViewModel(item);
            });
            self.questions(mapped);
        });
    }.bind(this);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:20:42.440

QuestionService.saveQuestion 函数中的 ko.mapping 代码运行良好。我无法真正说出是什么导致了您的困难，因为我看不到整个应用程序。但是，如果我行使您的 QuestionService.saveQuestion 函数，它将正确地将函数范围“tags”变量的内容推送到 question.Tags 可观察数组中，并且您对 ko.mapping.toJSON 的调用正确地生成了 JSON 格式的字符串可以通过电线。

这是我运行的用于练习 QuestionService.saveQuestion 功能的客户端代码：

```
<script>
    sv = {};
    sv.QuestionService = function () {
        var _saveQuestion = function (question, callback) {
            var tags = [
            { Id: 1, Name: "food" },
            { Id: 2, Name: "career" },
            { Id: 3, Name: "fax" }  ];
            $.each(tags, function (index, item) {
                question.Tags.push(item);
            });
            console.log(ko.mapping.toJSON(question));

           $.ajax("/Home/saveQuestion", {
                data: ko.mapping.toJSON(question),
                dataType: "json",
                type: "post",
                contentType: "application/json",
                success: sv.Completed
            });
        };
        return {
           saveQuestion: _saveQuestion
        };
    } ();
    sv.Completed = function (data) {     
        alert(data.message);
    };

    var input = { Tags : ko.observableArray([])};
    sv.QuestionService.saveQuestion(input, sv.Completed);
</script> 
```

当我运行这段代码时，我看到了正确序列化的 JSON 字符串调试窗口：

```
{"Tags":[{"Id":1,"Name":"food"},{"Id":2,"Name":"career"},{"Id":3,"Name":"fax"}]} 
```

我在服务器端看到了一个包含三个成员的 C# Tag 对象数组：

![在此处输入图像描述](../Images/f1cc3d9baf55323314f0913d38dcf52b.png)

因此，您的 QuestionService.saveQuestion 函数正确使用 ko.mapping.toJSON 将 ViewModel 的部分序列化为 JSON 字符串。您遇到的问题必须存在于代码的其他部分。

# ajax - 无法使用 jQuery 自动完成在 CodeIgniter 中显示返回的 json 数据

> ID：14046925
> 
> 赞同：0
> 
> 时间：2012-12-26T22:16:36.400
> 
> 标签：ajax, json, jquery-ui, codeigniter, jquery-ui-autocomplete

我正在尝试将一些 AJAX 代码从独立文件移动到我的控制器中的函数中，并且似乎无法让它在视图的自动完成函数中显示 JSON 数据。我已经通过直接访问函数 URL 验证了该函数确实返回了 JSON 编码的数据。

从我的角度来看，这是我的 JavaScript：

```
<script type="text/javascript">
$(document).ready(function(){
var ac_config = {
    source: <?php echo base_url() . 'admin/lookup_tmdb_movie_titles'; ?>
    select: function(event, ui){
        $("#title").val(ui.item.title);
        $("#year").val(ui.item.year);
        $("#imdb_link").val(ui.item.imdb_link);
    },
    minLength:2,
    position: {
        my: "left top",
        at: "left bottom",
        collision: "none",
        of: "#title.ui-autocomplete-input.ui-autocomplete-loading"
    }
};
$("#title").autocomplete(ac_config);
});
</script> 
```

这是管理控制器中的功能（我只是使用硬编码的测试数据，直到我让它正常工作）：

```
function lookup_tmdb_movie_titles()
{
    $term = 'test';

    // TEST DATA
    $title['title'] = 'test';
    $title['label'] = 'test (2012)';
    $title['value'] = 'test';
    $title['year'] = '2012';
    $title['imdb_link'] = 'testlink';
    $matches[] = $title;

    // convert into JSON format and output
    $matches = array_slice($matches, 0, 5);

    $this->output->set_output( json_encode($matches) );
} 
```

我还尝试通过以下两种方式输出 JSON，如果我直接通过 URL 访问该函数，所有这些方式都可以工作，但在视图本身中都不起作用。

```
 print json_encode($matches); 
```

和

```
 $data['json'] = json_encode($matches);
    $this->load->view('admin/json_view', $data); 
```

我看过很多关于 StackOverflow 和 Google 的帖子（因此上面有不同的输出方法），但似乎还没有解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:14:39.690

首先你应该试试这个：

```
 source: "<?php echo site_url(admin/lookup_tmdb_movie_titles); ?>" 
```

那么这可能是：

```
function lookup_tmdb_movie_titles()
{
    $term = 'test';

    // TEST DATA
    $title['title'] = 'test';
    $title['label'] = 'test (2012)';
    $title['value'] = 'test';
    $title['year'] = '2012';
    $title['imdb_link'] = 'testlink';
    $matches[] = $title;

    // convert into JSON format and output
    $matches = array_slice($matches, 0, 5);
   var_dump($matches); //comment this if everythings ok
// echo json_encode($matches);  ->uncomment this if everythings ok

} 
```

然后打开 firebug 启动 ajax 请求并在控制台中检查响应。

# android - ListView 中的 YouTubeThumbnailView

> ID：14046926
> 
> 赞同：7
> 
> 时间：2012-12-26T22:16:38.900
> 
> 标签：android, youtube-api

Google 已经发布了适用于 Google 的 YouTube api。在那个 api 中是一个 YouTubeThumbnailView 来显示电影的缩略图。我想在 ListView 中显示缩略图。我制作了一个适配器来制作视图。但我不确定如何处理这个问题。

在我的 ListView 适配器的 getView 中，我膨胀了一个包含 YouTubeThumbnailView 的布局。根据文档（https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubeThumbnailView），我应该调用初始化方法。

我想知道我是否需要调用一次初始化方法，或者如果视图被 ListView 重用，也调用这个方法？没有办法检查 YouTubeThumbnailView 是否已经初始化？所以我想我应该多次调用它。但我不知道这是否允许？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-27T11:23:52.697

您应该只调用一次，但在初始化后保存对加载程序的引用。解决此问题的一种方法是保留从`View`到的地图`YouTubeThumbnailLoader`。中`getView`，有 3 种情况：

1.  视图是新的，需要初始化。
2.  视图已经初始化，我们有一个对加载器的引用。
3.  视图当前正在初始化。

在情况 1 和 3 中，您需要记住加载程序在初始化时应该执行的操作。例如，您可以将视频 ID 保存在视图的标签中。

示例代码：

```
Map<View, YouTubeThumbnailLoader> loaders;

@Override
public View getView(int position, View convertView, ViewGroup parent) {
  View view = convertView;
  String videoId = getVideoId(position);

  if (view == null) {
    // Case 1 - We need to initialize the loader
    view = inflater.inflate(..., parent, false);
    YouTubeThumbnailView thumbnail = (YouTubeThumbnailView) view.findViewById(R.id.thumbnail);
    thumbnail.setTag(videoId);
    thumbnail.initialize(DeveloperKey.DEVELOPER_KEY, thumbnailListener);
  } else {
    YouTubeThumbnailView thumbnail = (YouTubeThumbnailView) view.findViewById(R.id.thumbnail);
    YouTubeThumbnailLoader loader = loaders.get(thumbnail);
    if (loader == null) {
      // Case 3 - The loader is currently initializing
      thumbnail.setTag(videoId);
    } else {
      // Case 2 - The loader is already initialized
      thumbnail.setImageResource(R.drawable.loading_thumbnail);
      loader.setVideo(videoId);
    }
  }
  return view;
} 
```

在你的 thumbnailListener 中：

```
 @Override
  public void onInitializationSuccess(YouTubeThumbnailView view, YouTubeThumbnailLoader loader) {
    String videoId = (String) view.getTag();
    loaders.put(view, loader);
    view.setImageResource(R.drawable.loading_thumbnail);
    loader.setVideo(videoId);
  } 
```

# css - 是否有任何工具可以检测实际上不再使用的 html/css 代码行？

> ID：14046929
> 
> 赞同：8
> 
> 时间：2012-12-26T22:17:02.467
> 
> 标签：css, html

我最近重新设计了我的网站，现在我有很多行代码在网站加载时不再使用。手动遍历所有行真的很乏味，有什么工具吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T22:54:36.223

看起来[http://unused-css.com/](http://unused-css.com/)将检查您网站上未使用的 CSS。

未使用的 JS 会更加困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T23:46:48.987

找到这些用于修复 html，

*   [http://fixmyhtml.com/](http://fixmyhtml.com/)
*   [http://unfuckmyhtml.com/](http://unfuckmyhtml.com/)

以及这些用于修复 css

*   [http://unused-css.com/](http://unused-css.com/)
*   [https://github.com/giakki/uncss](https://github.com/giakki/uncss)（我个人推荐这个。很棒的工具！）

# c# - 如何在 Visual Studio 2010 中为“转到定义”将“对象浏览器”转换为“元数据”？

> ID：14046933
> 
> 赞同：48
> 
> 时间：2012-12-26T22:17:21.250
> 
> 标签：c#, visual-studio-2010, resharper, keyboard-shortcuts, go-to-definition

在安装 Resharper 之前，`Ctrl`+ 左键单击 for `Go to definition`，Visual Studio 2010 使用`Metadata`. 安装后`Resharper`，当我第一次尝试`Ctrl`+左键时，`Resharper`弹出窗口询问我想去哪里，我点击`Object Browser`测试。现在我想取回这个设置，但是在 中`Resharper`，只有一个选项；

> 锐化 | 选项 -> 环境 | 搜索和导航并关闭或打开 Go to declaration on `Ctrl`+ 左键单击编辑器

![锐化选项](../Images/2ecba842e558b8db05f119a8d20b3407.png)

但如果我关闭此设置，它不会将此设置恢复为`Metadata`. 它仍然去`Object Browser`。我不想重置所有键盘快捷键，因为我使用了所有其他 Resharper 的快捷键。怎么能只改变这个设置？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-12-28T14:46:22.703

在**ReSharper > Options > Tools > External Sources**下，选择**默认 Visual Studio 导航**（或“导航到源”以获得更广泛的导航选项集，包括反编译和从符号服务器获取内容）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-18T08:44:29.550

如果有人在VS2012中有这个问题？

我只是用`Tools > Options > Environment > Keyboard`

*   选择“Visual C# 2005”
*   在“应用以下附加键盘映射方案”下。
*   然后单击“重置”。

这很生气，希望它可以帮助别人。使用 VS 2010 完美为我工作。

# qt - OpenGL 在 QGraphicsView 中绘制时的失真

> ID：14046934
> 
> 赞同：0
> 
> 时间：2012-12-26T22:17:32.213
> 
> 标签：qt, opengl

通过 QGraphicsScene 的 drawBackground() ，我向 QGraphicsScene 添加了一个 QGraphicsRectItem ，

所有的 opengl 代码都写在 QGraphicsScene 的 drawBackground() 中。

编码：

```
MTList=glGenLists(1);
glEnableClientState(GL_VERTEX_ARRAY); 
Vertex_iterator vi = model.vertices_begin(); 
glVertexPointer(3, GL_DOUBLE, sizeof(Vertex), &(vi->point()[0]));
glDisable(GL_LIGHTING); 
glNewList(MTList, GL_COMPILE); 
glColor3f(1.0,0.0,1.0);
//glLineWidth(10.0); 
//glDisable(GL_CULL_FACE); 
//glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);
glDrawElements(GL_POINTS, 3*model.size_of_facets(), GL_UNSIGNED_INT, &modelfaces[0]); glEndList();
glDisableClientState(GL_VERTEX_ARRAY); 
```

该项目正常显示。然而，在我启用这条线后： glPolygonMode(GL_FRONT_AND_BACK, GL_LINE) 项目被扭曲了。

同时，如果我更改代码： glPolygonMode(GL_FRONT, GL_LINE); 解决了这个问题，并且该项目按预期出现。

为什么会发生这种情况？

# django - Django OneToOne 关系模型保存问题

> ID：14046936
> 
> 赞同：0
> 
> 时间：2012-12-26T22:17:56.113
> 
> 标签：django, integrity

我在保存两个表单的输入时遇到问题，其中一个是用户创建表单，另一个是用户配置文件创建表单。当我尝试调用 creation_form.save() 然后调用 profile_form.save() 时，我收到一个 IntegrityError，因为配置文件没有值，当我尝试先保存配置文件表单时，我收到一个 IntegrityError，因为用户还没有身份证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:39:32.683

修复了问题！只需要从我的 models.py 中删除一个 post_save.connect(create_user_profile, sender=User)

# javascript - 全局替换页面上的文本，中断/乱码

> ID：14046938
> 
> 赞同：0
> 
> 时间：2012-12-26T22:18:19.210
> 
> 标签：javascript, internet-explorer, userscripts

我正在尝试在 Internet Explorer 上修改这个简单的用户脚本以修改我自己的变量，这看起来很简单，但是当我用自己的变量替换变量以进行搜索和替换时，除非我刷新，否则网站会完全搞砸。

```
(function(){

    var arrGoogleInstances = document.body.innerHTML.match(/google/ig);

    if (arrGoogleInstances != null)
    {
        if (arrGoogleInstances.length > 0)
        {
            document.body.innerHTML = document.body.innerHTML.replace(/google/ig,'guuuuuuuugle');
            document.body.innerHTML = document.body.innerHTML.replace(/Google /ig,'Guuuuuuugle');   
        }   
    }

})(); 
```

例如，我尝试`google`用数字替换正则表达式术语。但是，该脚本似乎还没有工作，并且似乎弄乱了我的网站。

谁能告诉我这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:46:09.807

不要使用`innerHTML`！（几乎，永远）
正在发生的事情是 HTML 结构本身的某些部分被丢弃，这取决于您发送到`.replace()`. 而且，使页面工作的所有 javascript 都被破坏或孤立。

正确的方法是使用 DOM 技术通过页面的文本节点进行递归。

代码是这样的，你可以[**在 jsfiddle 看到它的实际效果**](http://jsfiddle.net/LYLCr/)：

```
replaceTextValues (document.body, /Google/ig, "Guuuuuuugle");

//-- Internet explorer doesn't define DOM2 constants!
if (typeof Node != "undefined") {
    TEXT_NODE       = Node.TEXT_NODE;
    ELEMENT_NODE    = Node.ELEMENT_NODE;
}
else {
    TEXT_NODE       = 3;
    ELEMENT_NODE    = 1;
}

function replaceTextValues (node, regex, replaceWith) {
    if (node.nodeType === TEXT_NODE) {
        node.nodeValue  = node.nodeValue.replace (regex, replaceWith);
    }
    else if (node.nodeType === ELEMENT_NODE) {
        for (var K = 0, numNodes = node.childNodes.length;  K < numNodes;  ++K) {
            replaceTextValues (node.childNodes[K], regex, replaceWith);
        }
    }
} 
```

# c# - 任何用于桌面应用程序客户端的安全 ASP.NET Web API 身份验证？

> ID：14046944
> 
> 赞同：2
> 
> 时间：2012-12-26T22:18:55.210
> 
> 标签：c#, asp.net, asp.net-mvc, authentication, asp.net-web-api

> **可能重复：**
> [如何保护 ASPNET MVC Web API](https://stackoverflow.com/questions/11775594/how-to-secure-an-aspnet-mvc-web-api)

我在 asp.net web api 中搜索了很多关于桌面应用程序的身份验证，但似乎没有好的文档。官方网站也提供了一个无用且简短的解释。还有一些人写了关于它的博客，但已经过时了。反正。

**我有一个向 ASP.NET Web API 发送和接收数据的桌面客户端，应该首先进行身份验证。我怎样才能以安全的方式做到这一点？在这种情况下人们会怎么做？**

# php - PHP 无法在扩展类中设置私有变量

> ID：14046951
> 
> 赞同：0
> 
> 时间：2012-12-26T22:19:59.363
> 
> 标签：php, class, extend

尝试使用以下代码在 PHP 中扩展 FPDF 类：

```
class Reports extends FPDF{

        var $reporttitle = 'TEST';

        function settitle($titlename){      
            $this->$reporttitle = $titlename;
        }
        function header(){
            $this->SetMargins(.5,.5);   
            $this->Image('../../resources/images/img028.png');
            $this->SetTextColor(3,62,107);
            $this->SetFont('Arial','B',14);
            $this->SetY(.7);
            $this->Cell(0,0,$this->$reporttitle,0,0,'R',false,'');
            $this->SetDrawColor(3,62,107);          
            $this->Line(.5,1.1,10,1.1);
        }
    } 
```

我用变量 $pdf 实例化该类并尝试调用该方法：

```
 $pdf = new Reports('L','in','Letter');  
    $pdf-> settitle('Daily General Ledger');
    $pdf->AddPage(); 
```

我收到一个内部 500 错误....调试告诉我 $reporttitle 是一个空属性。谁能给我一些关于如何在扩展类中设置变量字段的见解？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T22:22:31.033

不要使用美元符号作为类属性的前缀：

```
 $this->reporttitle = $titlename; 
```

PHP 评估你的`$reporttitle`第一个，因为你使用了美元符号，所以你基本上是在做：

```
$this-> = $titlename;
//     ^ nothing 
```

演示一下，如果你先 delcared `$reporttitle = 'reporttitle'`，它会起作用。

* * *

另外值得注意的是，您的变量不是私有的，它是公共的，因为您使用了 PHP4`var`语法：

```
var $reporttitle = 'TEST'; 
```

如果您想要一个私有变量，请使用 PHP5 访问关键字。请记住，派生类无法访问私有变量，因此如果您有一个扩展类，`Reports`则将`reporttitle`无法访问。

```
private $reporttitle = 'TEST'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T22:21:57.073

```
$this->$reporttitle = $titlename; 
```

应该：

```
$this->reporttitle = $titlename; 
```

# clojure - 在 Mac OS X 上使用带有“lein repl”的 SWT

> ID：14046952
> 
> 赞同：2
> 
> 时间：2012-12-26T22:20:14.993
> 
> 标签：clojure, swt, read-eval-print-loop, leiningen

我一直无法让 nREPL 在 Mac OS X 上使用 SWT。

要重现该问题，请使用以下 project.clj 文件创建一个新的 SWT 项目：

```
(defproject swttest "0.1.0"
  :description "Foo"
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [org.eclipse.swt/org.eclipse.swt.cocoa.macosx.x86_64 "3.8"]]
  :jvm-opts ["-XstartOnFirstThread"]
  :repositories [["swt-repo" "https://swt-repo.googlecode.com/svn/repo/"]]) 
```

然后使用“lein repl”启动 REPL。最后，运行以下命令：

```
user> (org.eclipse.swt.widgets.Display.) 
```

出现以下错误：

```
SWTException Invalid thread access  org.eclipse.swt.SWT.error (:-1) 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T22:49:47.653

找到了解决方案。不要使用 nREPL，而是在“哑”REPL 中运行它，方法是修改 project.clj 文件以包含“哑铃”别名，如下所示：

```
(defproject swttest "0.1.0"
  :description "Foo"
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [org.eclipse.swt/org.eclipse.swt.cocoa.macosx.x86_64 "3.8"]]
  :jvm-opts ["-XstartOnFirstThread"]
  :aliases {"dumbrepl" ["trampoline" "run" "-m" "clojure.main/main"]}
  :repositories [["swt-repo" "https://swt-repo.googlecode.com/svn/repo/"]]) 
```

然后运行：

```
> lein dumbrepl 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T22:57:05.663

lein 命令行启动几个 jvm。只有第一个使用 -`XstartOnFirstThread`参数运行。`ps -aux|grep java`您可以通过运行并查看 lein repl 的功能来验证这一点。这就是您的“dumbrepl”有效的原因。

# jquery - 如何选择 div 包含父 div 属性？

> ID：14046956
> 
> 赞同：1
> 
> 时间：2012-12-26T22:20:52.250
> 
> 标签：jquery

我尝试选择`img`并`.sub rel='0'`触发点击，看起来像`$('.sub[rel=0] img').trigger('click')`，但它不起作用。
这个选择器代码有什么问题`$('.sub[rel=0] img')`

谢谢！

```
<div class="sub" rel="0">
    <img>
</div>
<div class="sub" rel="1">
    <img>
</div> 
```

**更新**

```
function geturlvars(){
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++){
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
return vars;
};

realid = geturlvars()["id"]
function checkstate(){
    if(realid){
        $('.sub[rel=realid] img').trigger('click');
    }
    $('.sub[rel=realid] img').click(function(){
        console.log('hi');
    });
};
checkstate(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T22:27:16.597

这种情况似乎没有什么问题......

html:

```
<div class="sub" rel="0">
 <img>
</div>
<div class="sub" rel="1">
 <img>
</div>​ 
```

js：

```
console.log($('.sub[rel=0] img')[0]);​ 
```

安慰：

```
<img> 
```

jsfiddle：http: [//jsfiddle.net/PHrRY/](http://jsfiddle.net/PHrRY/)

**而且**

这是一个触发点击事件的示例。要在该图像上触发单击事件，它必须具有附加事件。如果没有事件，则很可能什么也没有发生，这就是您的触发器实际上没有触发事件的原因。此代码将使用 触发事件`trigger`。

jsfiddle：http: [//jsfiddle.net/PHrRY/1/](http://jsfiddle.net/PHrRY/1/)

**编辑**

这是一个将`0`for rel 存储在变量中的示例：

概括： `var relNumber = "0 0"; console.log($('.sub[rel="'+relNumber+'"] img')[0]);`

[http://jsfiddle.net/PHrRY/3/](http://jsfiddle.net/PHrRY/3/)

如果 . 内部有空格，则使用额外的`"`引号`relNumber`。

**响应更新**

这段代码应该是

```
if(realid){
    $('.sub[rel="'+realid+'"] img').trigger('click');
}
$('.sub[rel="'+realid+'"] img').click(function(){
    console.log('hi');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T22:53:00.210

这就是您要查找的内容：

```
$(".sub[rel=0]").click(function(){ alert("Click Triggered!");  })

     function geturlvars(){
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++){
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    } return vars; };

realid = geturlvars()["id"] function checkstate(){

    realid = "0";  // delete this
    if(realid){
        $('.sub[rel='+realid+'] img').trigger("click");
    }
         }; 
checkstate(); ​ 
```

确保 click 函数是全局函数，并从文本中对变量进行分类

```
$('.sub[rel=realid] img')        // Wrong
$('.sub[rel='+realid+'] img')    // Correct 
```

小提琴：http: [//jsfiddle.net/javascript/T7uss/](http://jsfiddle.net/javascript/T7uss/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T22:27:58.620

我真的不知道它们是否有必要，但是`"`当我想从属性中选择一个值时，我总是使用它们：

```
$('.sub[rel="0"] img');
           -^-^- 
```

也许这可以解决问题。

# php - w3schools 的文件上传代码安全吗？

> ID：14046957
> 
> 赞同：-1
> 
> 时间：2012-12-26T22:20:52.750
> 
> 标签：php, html

```
<html>
<body>

<form action="upload-file.php" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file"><br>
<input type="submit" name="submit" value="Submit">
</form>

</body>
</html> 
```

这是文件上传的 php 代码..我想使用我从 w3schools 获得的这个 php 代码..你认为这是文件上传的安全代码吗？这是我发现的最简单的代码，效果非常好。我尝试了一些其他来源的代码，但我无法让它们工作……知道吗？

```
<?php
ini_set('display_errors', '0');
error_reporting(E_ALL | E_STRICT);
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES['file']['name']));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 2097152)
&& in_array($extension, $allowedExts))
{
if ($_FILES["file"]["error"] > 0)
{
echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
}
else
{
echo "Upload: " . $_FILES["file"]["name"] . "<br>";
echo "Type: " . $_FILES["file"]["type"] . "<br>";
echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

if (file_exists("images/" . $_FILES["file"]["name"]))
{
echo $_FILES["file"]["name"] . " already exists. ";
}
if($_FILES['file']['size'] >  2097152 )  //2mb

echo 'File over 2MB';

else
{
move_uploaded_file($_FILES["file"]["tmp_name"],
"images/" . $_FILES["file"]["name"]);
echo "Stored in: " . "images/" . $_FILES["file"]["name"];
}
}
}
else
{
echo "Invalid file";
}
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T22:23:20.627

总比没有好，但我不会说它是***安全***的。也许***比没有更安全***。

有许多恶意软件会感染图像，虽然代码会阻止您上传除带有图像扩展名的文件以外的任何内容，但它无法去除恶意软件或检查上传的实际字节。

从理论上讲，可执行文件可以从 myapp.exe 重命名为 myapp.jpg 以在您的服务器上放置一个坏文件，并且可以执行其他攻击将其重命名并感染您的服务器或一些粗心的客户端。

推荐阅读：[https ://www.owasp.org/index.php/Unrestricted_File_Upload](https://www.owasp.org/index.php/Unrestricted_File_Upload)

这种类型的保护属于“**为文件的扩展名使用白名单**”，在这个特定的 OWASP 页面上被认为是“弱”。

* * *

此外，正如 MrCode 在上面的评论中所说，您可以尝试使用[GD 库](http://php.net/manual/en/ref.image.php)读取文件并检查图像尺寸。如果它返回为 0 或无法读取图像，则它不是图像文件。这是我链接到的文章中未提及的附加安全层。这也是我在 .NET 中使用 System.Drawing 命名空间在实践中所做的事情。感谢 MrCode，因为我不是 PHP 开发人员，也不知道如何在 PHP 中执行此操作。再次感谢！

# css - CSS - 从重叠文本定位 BG 图像

> ID：14046959
> 
> 赞同：2
> 
> 时间：2012-12-26T22:21:08.240
> 
> 标签：css, positioning, background-image

我想以不同的方式定位下面的 16x16 图标。我想将它们自动定位在文本的右侧，而不是文本的后面。另外，我也想将图标稍微向上移动几个像素。

这是我下面的代码的结果：

![bgimage 位置 stafu](../Images/afdda4f05483e722328ba3965ef8245c.png)

```
<span class="ico_person">John Smith</span>
<span class="ico_phone">1-555-555-5555</span>
<span class="ico_email">somewhere@someplace.com</span> 
```

这是其中一种风格：

```
<style>
.ico_person {
  color:#067CEA;
cursor:pointer;
font-weight:bold;
background-color:#F6F6F6;

background-image:url("/images/icons/icon_admins.png");
background-repeat:no-repeat;
background-position:1px 5px;
padding: 3px;
border-radius:3px 0 3px 3px;
border: 1px solid #CCCCCC;

}
</style> 
```

如果图像是背景，我能否将其准确定位在我需要的位置？或者背景图像是否会在某些范围内停止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:28:38.630

您可以使用 设置背景的水平和垂直位置`background-position`。例如，如果您希望背景距左侧 10 像素，距顶部 20 像素，您可以编写：

`background-position:10px 20px;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T00:25:25.677

索提里斯说的是对的。但你也可以这样做：

```
.ico_person { background-position: right center; } 
```

但是，就将图像放在文本旁边而不是在其后面而言，您应该`padding-right`对您的样式有所了解。所以例如：

```
.ico_person { padding-right:20px; } 
```

相应地减少/增加填充。

# git - Git：合并具有非常不同结构的分支

> ID：14046960
> 
> 赞同：7
> 
> 时间：2012-12-26T22:21:09.893
> 
> 标签：git, version-control, github, repository, git-svn

我们有一个名为6 个月前`upgrade`分支的分支。`master`在`upgrade`分支中我们将所有项目重组为maven（`master`是ant项目），所以两个分支中的一个项目x的结构是完全不同的。

为了将项目重组为我们使用的 Maven，`git mv`因此我们保留了历史。接下来，我们对文件进行了一些代码更改，`upgrade`因为升级过程需要这些更改。

现在我想合并`master`，`upgrade`同时保留所有结构，因为它存在于`upgrade`. 我该怎么做呢？

我尝试`git merge master`在`upgrade`树枝上使用。

但这并没有让我对我们所做的代码更改产生任何冲突`upgrade`；相反，它给了我属性文件中的冲突。（我绝对确定与`upgrade`冲突的代码更改`master`） - 可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T22:30:31.327

您想要的是使用该`ours`策略（而不是该答案的先前版本中提到的策略选项）；开启时`upgrade`，使用`git merge -s ours master`. 根据[git merge 手册页](http://git-scm.com/docs/git-merge)中更详细的信息，这根本不会尝试进行实际的合并，而只是使用`ours`一侧的树作为结果并丢弃合并中的每一侧。

使用合并将保留所有历史记录，创建合并提交（显示历史记录中两个分支的融合），但使用合并一侧的所有文件。

请注意，“我们的”和“他们的”的含义仅取决于您在启动合并时所处的分支（“将升级合并到主控”与“将主控合并到升级”，两者都会产生相同的结果历史） . “我们的”是您站在的一个分支，“他们的”是/是您在`merge`命令中指定的分支。手册页中对此进行了详细说明。

**编辑：**作为解释：您（很可能）在您所做的代码更改上没有遇到任何冲突，因为 master 与通用代码库没有足够的差异。默认情况下，`git merge`使用三向合并策略，该策略采用要合并的两侧的最新共同祖先，并且仅实际查看相对于该共同祖先的更改。如果只有分支的一侧取得进展，Git 将识别那里的所有更改都会取代旧代码（在您的情况下，代码 on `master`），并且它只会`upgrade`自动使用代码（即它自动解决“冲突”）。

只有当合并的双方与共同祖先相比都发生了变化时，才会提出您必须手动解决的冲突。在这种情况下，Git 不知道哪一方“更好”——甚至可能需要将这两个方面结合起来才能工作。这就是要求用户解决此类冲突的原因。

[注意：答案已更新，因为我之前误解了 -s 和 -X 选项。]

# php - Vbulletin 3.8.7 和 PHP 5.2.17 问题

> ID：14046968
> 
> 赞同：0
> 
> 时间：2012-12-26T22:22:08.367
> 
> 标签：php, security, vbulletin

我的朋友想知道在 CentOS 上运行 vbulletin 3.8.7 和 PHP 5.2.17 时是否有任何安全问题。我看到 PHP 5.2.17 容易受到 CVE-2012-2688 和 CVE-2012-2386 的攻击，但我不知道 vbulletin 是使用 Phar 扩展还是接受用户输入的 scandir() 函数。任何熟悉 vbulletin 来源的人都可以告诉我我的朋友是否应该关注这些漏洞？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:58:43.697

虽然 vB 所做的是更适合官方 vB 论坛的问题，但我们可以轻松检查 CentOS 中任何 CVE 的状态。

CentOS 是 Red Hat Enterprise Linux 的衍生产品。任何由 RHEL 采取行动的 CVE 都将在几周内进入 CentOS。

*   [CVE-2012-2386](https://access.redhat.com/security/cve/CVE-2012-2386)被 RHEL 评为“中等”严重性。它已在`php53`RHEL5 的`php`软件包和 RHEL6 的软件包中进行了修补。vanilla RHEL5 is 5.1 中的`php`包没有更新，因为您不能在 5.1 中执行 PHAR。
*   [CVE-2012-2688](https://access.redhat.com/security/cve/CVE-2012-2688)已被 RHEL 评为“低”严重性，*尚未修补*。我尝试跟踪 CVE 链接，但它们都以严重缺乏关于漏洞是什么以及如何触发它的有用信息而告终。这一切都回到了 PHP 变更日志，它只是列出了存在错误并且已修复，而没有列出错误编号。

然而，有一个很大的脂肪刺眼问题。

*   RHEL 5 与 PHP 5.1 一起提供，并将 PHP 5.3 作为单独的包提供。
*   RHEL 6 附带 PHP 5.3。

您正在运行 PHP 5.2。 ***从来*****没有 RHEL 或 CentOS 版本提供 5.2***。您从外部来源获得了这些 RPM，因此需要检查*该*来源以查看它们是否具有反向移植的更改。假设他们没有。*

 *考虑使用[Remi 的 repo](http://blog.famillecollet.com/pages/Config-en)进行 PHP 更新。Remi 是 Fedora 发行版的 PHP 包管理器，该发行版的上游资源最终成为 RHEL。*

# python - 间隔输出beautifulsoup

> ID：14046970
> 
> 赞同：2
> 
> 时间：2012-12-26T22:22:09.787
> 
> 标签：python, python-3.x, web-scraping, beautifulsoup

我试图废弃网站的内容。然而，在输出中我得到了不需要的空间，因此我无法解释这个输出。我使用一个简单的代码：

```
 import urllib2
 from bs4 import BeautifulSoup
 html= 'http://idlebrain.com/movie/archive/index.html'
 soup = BeautifulSoup(urllib2.urlopen(html).read())
 print(soup.prettify(formatter=None)) 
```

OUTPUT::(输出非常大，所以只占一小部分，以便了解我面临的问题）

```
 <html><head><title>Telugu cinema reviews by Jeevi - idlebrain.com</title> 
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
        </head><bodybgcolor="#FFFFFF" leftmargin="0" marginheight="0" marginwidth="0" topmargin="0"><table border="0" cellpadding="0" cellspacing="0" width="96%">
    <tr>
    <td align="left"> <img alt="Idlebrain.Com" height="63" src="../../image/vox_r01_c2.gif"width="264"/></td>
   <td><div align="right"><script type="text/javascript"><!--
      g   o   o   g   l   e   _   a   d   _   c   l   i   e   n   t       =       "   c   a   -   p   u   b   -   8   8   6   3   7   1   8   7   5   2   0   4   9   7   3   9   "   ;   

       /   *       r   e   v   i   e   w   s   -   h   o   r       *   /   

       g   o   o   g   l   e   _   a   d   _   s   l   o   t       =       "   1   6   4   8   6   2   0   2   7   3   "   ;   

      g   o   o   g   l   e   _   a   d   _   w   i   d   t   h       =       7   2   8   ;   

      g   o   o   g   l   e   _   a   d   _   h   e   i   g   h   t       =       9   0   ;   

      /   /   -   -   >   

     <   /   s   c   r   i   p   t   >   

     <   s   c   r   i   p   t       t   y   p   e   =   "   t   e   x   t   /   j   a   v   a   s   c   r   i   p   t   "   

     s   r   c   =   "   h   t   t   p   :   /   /   p   a   g   e   a   d   2   .   g   o   o   g   l   e   s   y   n   d   i   c   a   t   i   o   n   .   c   o   m   /   p   a   g   e   a   d   /   s   h   o   w   _   a   d   s   .   j   s   "   >   

     <   /   s   c   r   i   p   t   >   

                           <   /   d   i   v   >   

                   <   /   t   d   >   

           <   /   t   r   >   

    <   /   t   a   b   l   e   >   

    <   t   a   b   l   e       w   i   d   t   h   =   "   9   6   %   "       b   o   r   d   e   r   =   "   0   "       c   e   l   l   s   p   a   c   i   n   g   =   "   0   "       c   e   l   l   p   a   d   d   i   n   g   =   "   0   "   >   

             <   t   r   >       

                     <   t   d       w   i   d   t   h   =   "   1   2   8   "       v   a   l   i   g   n   =   "   t   o   p   "       a   l   i   g   n   =   "   l   e   f   t   "   >       

                           <   t   a   b   l   e       b   o   r   d   e   r   =   "   0   "       c   e   l   l   p   a   d   d   i   n   g   =   "   0   "       c   e   l   l   s   p   a   c   i   n   g   =   "   0   "       w   i   d   t   h   =   "   1   1   9   "   >   

     <   /   t   r   >   

    <   /   t   a   b   l   e   >   

     <   /   b   o   d   y   >   

     <   /   h   t   m   l   >   

           </script></div></td></tr></table></body></html> 
```

谢谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-16T16:13:14.417

您可以将解析器指定为`html.parser`：

```
soup = BeautifulSoup(urllib2.urlopen(html).read(), 'html.parser') 
```

或者您可以指定`html5`解析器：

```
soup = BeautifulSoup(urllib2.urlopen(html).read(), 'html5') 
```

还没安装`html5`解析器？从命令行安装它：

```
sudo apt-get install python-html5lib 
```

您也可以使用解析器，但您可能会看到[多值属性的](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#multi-valued-attributes)`xml`一些差异，例如：`class="foo bar"`

```
soup = BeautifulSoup(urllib2.urlopen(html).read(), 'xml') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T06:31:43.743

我解决了它，但不知道确切的原因。我安装了 virtualenv 并在其中运行了我的程序。它工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T11:31:52.270

这可能是[BeautifulSoup 没有正确读取文档](https://stackoverflow.com/questions/11354521/beautifulsoup-not-reading-documents-correctly?rq=1)的副本，即由BS 4.0.2 中的[错误引起的。](https://bugs.launchpad.net/beautifulsoup/+bug/972466)

该错误已在 4.0.3 中修复。您可能想检查的输出

```
>>> import bs4
>>> bs4.__version__ 
```

我怀疑你系统的 BeautifulSoup 是 4.0.2，而你的 virtualenv 是 4.0.3（或更高版本）。因此，如果您希望您的代码在您的系统上正常运行，请将 BeautifulSoup 升级到更高版本。

# objective-c - 如何向 MKAnnotation 添加披露按钮？

> ID：14046972
> 
> 赞同：5
> 
> 时间：2012-12-26T22:22:35.733
> 
> 标签：objective-c, android-mapview, mapkit, mkannotation, disclosure

我想向 a 添加一个披露按钮以`MKAnnotation`转到另一个视图。

该按钮应如下所示：

[图片](http://i.stack.imgur.com/Ivuzn.png)

这是我的**.h**和**.m**文件。

* * *

## .h 文件

```
//
//  POI.h
//

#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface POI : NSObject <MKAnnotation> {

    NSString *title;
    NSString *subtitle;
    CLLocationCoordinate2D coordinate;
}

@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;
@property (nonatomic, assign) CLLocationCoordinate2D coordinate;

- (id)initWithCoordinate:(CLLocationCoordinate2D)_coordinate title:(NSString *)_titolo andSubTitle:(NSString *)_sottotitolo;

@end 
```

* * *

## .m 文件

```
//
//  POI.m

#import "POI.h"

@implementation POI

@synthesize title, subtitle, coordinate;
-(id)initWithCoordinate:(CLLocationCoordinate2D)_coordinate title:(NSString *)_titolo andSubTitle:(NSString *)_sottotitolo {

    [self setTitle:_titolo];
    [self setSubtitle:_sottotitolo];
    [self setCoordinate:_coordinate];

    return self;
}

@end 
```

在我的 ViewController 中，我使用以下方法调用它：

```
 pinLocation.latitude = 4.8874;
    pinLocation.longitude = 1.400;
    POI *poi = [[POI alloc] initWithCoordinate:pinLocation title:@"foo" andSubTitle:@"bar"];
    [_mapView addAnnotation:poi]; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-26T22:35:02.917

三步。

1) 在您的头文件 (.h)*或*实现文件 (.m) 的类扩展中符合`MKMapViewDelegate`：

```
@interface ViewController : UIViewController <MKMapViewDelegate> { ... } 
```

2）将您的视图控制器设置`MKMapViewDelegate`为接收委托回调的委托。通常在`viewDidLoad`：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.mapView.delegate = self;
} 
```

3）实现以下委托函数以显示披露按钮：

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation
{   
    MKPinAnnotationView *newAnnotation = [[MKPinAnnotationView alloc]     initWithAnnotation:annotation reuseIdentifier:@"pinLocation"];

    newAnnotation.canShowCallout = YES;
    newAnnotation.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

    return newAnnotation;
} 
```

以下功能将有助于确定在触摸披露按钮时采取的操作（在您的情况下，呈现视图）。

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    //launch a new view upon touching the disclosure indicator
    TestVCViewController *tvc = [[TestVCViewController alloc] initWithNibName:@"TestVCViewController" bundle:nil];
    [self presentViewController:tvc animated:YES completion:nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:27:44.120

在你的`- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation`方法中使用这个：

```
annotationView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure]; 
```

`annotationView`要返回的视图在哪里。

# java - 如何允许多个方法同时运行，而某些其他方法不运行？

> ID：14046984
> 
> 赞同：1
> 
> 时间：2012-12-26T22:23:48.200
> 
> 标签：java, concurrency

对不起，标题的措辞，没有解释清楚。如果有人可以编辑它会很好:)

我有四种方法，访问共享状态。目前它们不是线程安全的。共享状态是一个列表。其中两个方法修改列表，两个迭代它。可以简单地同步所有方法，但这会导致性能下降 - 只要没有修改方法正在运行，迭代方法在多个线程中同时运行是完全安全的。

需要一种允许多个读取器运行或单个写入器运行的锁定方法。

```
private List<T> list;
public void insert(T t) {// Write shared state
    list.add(t);
}
public void remove(T t) {// Write shared state
    list.remove(t);
}
public void doStuff(T t) {// Read shared state
    // iterate list and do stuff
}
public void doOtherStuff() {// Read shared state
    // iterate list and do stuff
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T22:45:16.287

可能[ReadWriteLock](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReadWriteLock.html)符合您的需求。线程应该获取锁，而线程应该`a`获取读一`b``write``c``d`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T22:31:24.510

您可以使用 Java 的`synchronized`关键字来执行此操作。关键字在某个对象上创建一个锁，因此除非锁打开（并且在运行它时，它会调用锁），否则您不能运行某些东西。在这种情况下，您需要两个锁，并且您必须锁定某个对象，因此您可以创建两个`Object`s 并锁定它们。你需要的是这样的：

甲/乙：

```
synchronized(lock1)
{
    synchronized(lock2)
    {
        //do stuff
    }
} 
```

C：

```
synchronized(lock1)
{
    //do stuff
} 
```

d:

```
synchronized(lock2)
{
    //do stuff
} 
```

c 和 d 分别在 lock1 和 lock2 上加锁，互不冲突，因此可以并发运行。但是，a 和 b 要求两个锁都处于空闲状态才能运行，因此不能与任何其他方法并发。

# javascript - 使用 JS 在 HTML 页面中动态显示 SWF 文件

> ID：14046986
> 
> 赞同：-1
> 
> 时间：2012-12-26T22:23:57.513
> 
> 标签：javascript, jquery, html, flash

所以基本上我需要做的是在有人按下按钮后 10 秒显示一个 swf。我目前在我的代码中有 SWF，它使用 jquery 隐藏功能在页面加载时隐藏。然后，我使用 settimeout 函数对 jquery show 函数计时，以在按下按钮 10 秒后显示 SWF。这是非常错误的。从字面上看，有些日子它有效，有些日子它不起作用。一个月前它会在我的屏幕上显示一半，现在它根本不显示。它在每个浏览器/计算机上都不同。有没有更好、不同的方法来做到这一点？我花了很多时间尝试使用这种方法使其工作。如有错别字，请见谅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:36:10.190

假设您使用`<object>`标签*：（[参考](http://www.w3schools.com/tags/tag_object.asp)）*

[jsFiddle](http://jsfiddle.net/DJDavid98/TEttF/)

HTML：

```
<object data="file.swf" type="application/x-shockwave-flash" width="[your swf's width]" height="[your swf's height]" style="display:none;" id="SWF">
    <param name="movie" value="file.swf">

    <!-- If flash is not installed -->
    <p>You need Adobe Flash Player to view this content</p>
</object>

<input type="button" value="Show .swf" id="showSWFButton"> 
```

JS：

```
$('#showSWFButton').click(function(){
    setTimeout(showSWF,10000) //10 000 milliseconds = 10 seconds
})

function showSWF(){
    $('#SWF').show();
} 
```

# java - Java 中的 Objective-C 'tag' 属性的等价物是什么？

> ID：14046987
> 
> 赞同：3
> 
> 时间：2012-12-26T22:24:16.497
> 
> 标签：java, objective-c, equivalent

所以我有两个 JSlider，每个都调用 stateChanged() 方法，我想弄清楚哪个滑块调用它。

在 Objective-C 中，我曾经使用 tag 属性来区分哪个是哪个。Java中有这样的等价物吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T22:27:16.380

确定源组件时通常不使用标签。您可以使用`ChangeEvent.getSource()`派生自[EventObject](http://docs.oracle.com/javase/7/docs/api/java/util/EventObject.html#getSource%28%29)

```
public void stateChanged(ChangeEvent event) {
   JSlider source = (JSlider)event.getSource();
   ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T22:28:46.707

我不是 Java 人，但我相信`setName()`并且`getName()`可以用于此。也许仔细检查这些没有在内部使用。

[java.awt.组件](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#setName%28java.lang.String%29)

# c# - 没有字符时如何从标准输入读取？

> ID：14046992
> 
> 赞同：0
> 
> 时间：2012-12-26T22:24:38.567
> 
> 标签：c#, .net, stdin, textreader

我正在编写一个`Scanner`类似于 Java 的基本类。这是我所拥有的（嗯，相关部分）：

```
using System.Text;
using System.Collections.Generic;

namespace System.IO
{
    /// <summary>
    ///     <remarks>
    ///         Scanner is a wrapper for a <see cref="System.IO.TextReader" />
    ///         instance, making it easier to read values of certain types. It
    ///         also takes advantage of the
    ///         <see cref="System.IO.EndOfStreamException" /> class.
    ///     </remarks>
    ///     <seealso cref="System.IO.TextReader" />
    /// </summary>
    public class Scanner
    {
        private TextReader Reader;
        private Queue<char> CharacterBuffer = new Queue<char>();

        /// <summary>
        ///     <remarks>
        ///         Defaults to reading from <see cref="Console.In"/>
        ///     </remarks>
        /// </summary>
        public Scanner() : this(Console.In)
        {
        }

        public Scanner(TextReader reader)
        {
            this.Reader = reader;
        }

        public char Peek()
        {
            if (this.CharacterBuffer.Count > 0)
                return this.CharacterBuffer.Peek();

            try
            {
                return Convert.ToChar(this.Reader.Peek());
            }
            catch (OverflowException)
            {
                throw new EndOfStreamException();
            }
        }

        public char ReadChar()
        {
            if (this.CharacterBuffer.Count > 0)
                return this.CharacterBuffer.Dequeue();

            try
            {
                return Convert.ToChar(this.Reader.Read());
            }
            catch (OverflowException)
            {
                throw new EndOfStreamException();
            }
        }
    }
} 
```

从我运行的几个测试来看，这对真实文件非常有效，但对于标准输入，它并不像预期的那样有效。如果我使用`Scanner.Peek`or `Scanner.ReadChar`，在发送换行符后，该`TextReader`实例认为它位于文件末尾（我认为）并抛出一个`EndOfStreamException`实例 since`this.Reader.Read`并`this.Reader.Peek`返回`-1`.

如何在仍然支持真实文件和`StringReader`实例的同时强制它请求新角色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:43:05.870

我更改`Peek`以反映以下代码。我不确定这是否是 100%，因为我是在这里直接从内存中输入的。

```
public char Peek()
{
    if (this.CharacterBuffer.Count > 0)
        return this.CharacterBuffer.Peek();

    char Character
    try
    {
        Character = Convert.ToChar(this.Reader.Read());
    }
    catch (OverflowException)
    {
        throw new EndOfStreamException();
    }

    this.CharacterBuffer.Enqueue(Character);
    return Character;
} 
```

# javascript - 隐藏 Facebook 喜欢点击

> ID：14046993
> 
> 赞同：1
> 
> 时间：2012-12-26T22:25:13.953
> 
> 标签：javascript, iframe, onclick

对于我的网站，我想在我的网站上添加 Facebook 赞。

这是我使用的代码：

```
document.write('<iframe id="like-box" src="http://www.facebook.com/plugins/like.php?href='+ like_url +'&amp;layout=button_count&amp;show_faces=true&amp;width=450&amp;action=like&amp;colorscheme=light&amp;height=80" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:60px; height:80px;" allowTransparency="true"></iframe>');

var popupDiv = document.getElementById('like-box');
popupDiv.onclick = function(e){
    if (!e) e = window.event;
    alert("Like button will be removed");
    document.removeChild(popupDiv);
}; 
```

`like_url`包含我的网站 url 的字符串在哪里。

我希望在用户单击 iframe 时将其删除。但是上面的代码根本不起作用。**onclick 函数永远不会被触发。**有没有办法让它正常工作？

我也尝试过像这样对 twitter 按钮做同样的事情：

```
document.write('<div id="like-box" style="left:0; top:0; width: 500px; height: 230px;">');
document.write('<scr'+'ipt type="text/javascript" src="https://apis.google.com/js/plusone.js"></scr'+'ipt>');
document.write('<g:plusone href="' + gplus_url + '"></g:plusone>');
document.write('</div>');

var popupDiv = document.getElementById('like-box');
popupDiv.onclick = function(e){
    if (!e) e = window.event;
    alert("G+ button will be removed");
    document.removeChild(popupDiv);
}; 
```

但它也不起作用！**我试图触发点击窗口**，但我得到了相同的结果。

你能帮我解决吗？

编辑：

我会尝试以更好的方式解释它。我想从主文档中检测 iframe 内部或上方的点击事件。我的意思是：我在我的网站上。我点击 facebook，点击是由我的 index.html 页面触发的，然后我在几秒钟后删除了 iframe。但是类似的已经被FB抓到了。这基本上是我想做的。我尝试了许多在单击 iframe 时触发函数的代码，但没有一个起作用。例如：

```
onload="this.contentWindow.document.onclick=function(){alert(\'test\')}" 
```

根本不起作用。

编辑 2：这看起来是一个严重的问题，因为如果我在我的窗口上使用 onclikc 函数（例如`window.onclick = function(e) {...};`，当我点击 iframe 时它不会被触发。知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:30:42.727

而不是`document.removeChild(popupDiv)`试试这个：

```
popupDiv.parentNode.removeChild(popupDiv); 
```

IIRC，您只能使用其父节点删除节点，而不是文档本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T13:19:56.483

最后我找到了方法（至少在第一次点击时）。如果有人需要代码，这里是：

```
var inIframe = false;
function checkClick()
{
    if (document.activeElement && document.activeElement === document.getElementById("iframe_id_goes_here"))
    {
        if (inIframe == false)
        {
            console.log("Clicked");
            inIframe = true;
        }
    }
    else inIframe = false;
}
setInterval(checkClick, 200); 
```

感谢那些试图帮助我的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T22:35:05.167

从体内取出：`document.body.removeChild(popupDiv);`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-26T22:31:24.027

尝试`document.getElementById(popupDiv).innerHTML = "";`

# ios - 移动 Safari 中的网页是否可以检查是否选择了“设置”>“Safari”>“接受 Cookie”“来自已访问”或“始终”？

> ID：14046997
> 
> 赞同：2
> 
> 时间：2012-12-26T22:25:35.143
> 
> 标签：ios, cookies, mobile-safari

是否有 JavaScript 函数或 iOS 提供的东西，以便我可以从网页检查 cookie 设置的严格程度？

如果没有 iOS 提供的东西，是否有行业标准流程来检测正在使用的设置？我最初的想法是放下一个cookie并检查它是否存在......但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T08:29:10.173

我高度怀疑没有办法确定用户的实际设置是什么，但 Mobile Safari 会响应`navigator.cookieEnabled`. 移动版 Safari（甚至桌面版 Safari）的默认设置是“来自访问者”。因此，如果您对通过 Cookie 进行的第 3 方跟踪感兴趣，您可能会运气不佳，除非您找到绕过它的方法（Google 显然做到了）或提醒用户将其设置更改为“始终”（公平/道德路线） . 我会说您通过设置来自 3rd 方站点的 cookie，然后检查它是否确实存在，然后根据结果采取行动，这是一个合理而简单的想法。

这篇 SO 帖子中有很多信息，[Safari 3rd 方 cookie iframe 技巧不再起作用？](https://stackoverflow.com/questions/9930671/safari-3rd-party-cookie-iframe-trick-no-longer-working)

还有来自 Gruber 的有趣读物，[http://daringfireball.net/2012/02/cookies_and_privacy](http://daringfireball.net/2012/02/cookies_and_privacy)