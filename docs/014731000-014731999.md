# StackOverflow 问答 14731000-14731999

# c++builder - TScrollBar 不会滚动到面板的末尾

> ID：14731005
> 
> 赞同：0
> 
> 时间：2013-02-06T14:05:17.067
> 
> 标签：c++builder

我使用 Borland C++ 开发我的应用程序。我有一个面板，我将在其中动态放置项目（例如标签）。在这个面板中，我添加了滚动条。我的问题是如何计算 PageSize （或其他参数）以让所有项目在滚动时可见？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:41:51.063

我建议您使用 TScrollBox 组件。只需使其成为您要创建的组件的父级，并将它们动态定位到 ScrollBox 中，确定其顶部和左侧位置。

如果您将组件（例如标签）放置在其位置超过 ScrollBox 宽度或高度的位置，则会自动为您适当地设置滚动条。

# iphone - 为越狱的 iPhone 创建调整/应用程序/脚本

> ID：14731006
> 
> 赞同：1
> 
> 时间：2013-02-06T14:05:21.010
> 
> 标签：iphone, ios

有没有一种简单的方法可以为越狱的 iPhone 编写我自己的小调整？我没有MAC，我有Windows。

有没有办法编写可以使用 Windows 计算机传输到 iPhone 的调整？需要什么工具？语言？您知道有哪些有用的资源可能对这个过程有所帮助？

我花了很长时间试图找到一种方法来做到这一点，但我发现的只是 Linux Bash 资源和 MAC 内容的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:13:01.407

> 有没有办法编写可以使用 Windows 计算机传输到 iPhone 的调整？需要什么工具？

有一个[从 Windows 到 iOS 的交叉工具链](http://code.google.com/p/mingw-and-ndk/downloads/detail?name=multiarch-darwin11-cctools127.2-gcc42-5666.3-llvmgcc42-2336.1-Windows-120614.7z&can=2&q=)，但是如果你没有使用过任何基于 Unix 的系统，你会在你的~~*ss~~ [insert any part of body here] 中感到痛苦。

所以是的，有办法。从技术上讲，您不需要 Mac 来为越狱的 iPhone 开发应用程序和调整。

此外，要获得可用于检查应用程序内部的逆向工程类和头文件，您需要使用`class-dump`(or `class-dump-z`) 实用程序。

要真正挂钩或修改应用程序的行为，您很可能会使用[MobileSubstrate](http://iphonedevwiki.net/index.php/MobileSubstrate)。

> 语言？

C（你必须在试图弄乱操作系统之前掌握它，因为如果你不这样做，你**会**搞砸你的iPhone）和Objective-C（在学习了C之后，你应该学习Objective-C和Cocoa Touch API 来了解 iOS 中的一般情况和方法）。也许一点 C++ 的气息不会造成任何伤害，所以它也值得学习。

> 您知道有哪些有用的资源可能对这个过程有所帮助？

有，肯定的。谷歌“C 教程”、“Objective-C 教程”和“移动基板调整教程”。

# python - Selenium HTMLUNIT Python 滚动页面

> ID：14731017
> 
> 赞同：1
> 
> 时间：2013-02-06T14:06:03.333
> 
> 标签：python, selenium, htmlunit, xpath

我有一个网站，当我向下滚动时会生成更多产品。与其他网站不同，在 firebug 控制台中找不到任何内容。所以，我正在使用 selenium 来模拟浏览器。我已经让它工作了，但使用了 Firefox 驱动程序。但是，由于我托管在命令行上运行的 Web 服务器，因此我使用的是 HTMLUNIT。有人可以告诉我如何使用 HTMLUNIT 滚动页面吗？这是到目前为止的代码：

```
from selenium import webdriver
from selenium.webdriver.common.keys import Keys
import time

browser = webdriver.Remote("http://127.0.0.1:4444/wd/hub",desired_capabilities=webdriver.DesiredCapabilities.HTMLUNITWITHJS)
browser.get("http://www.somewebsite.com/")
x = browser.find_elements_by_xpath("//div[@id='containeriso3']/div/a[1]")
hrefs = [i.get_attribute('href') for i in x]
print len(hrefs)
time.sleep(2)
browser.execute_script("scroll(0, 2500);")
time.sleep(2)
x = browser.find_elements_by_xpath("//div[@id='containeriso3']/div/a[1]")
hrefs = [i.get_attribute('href') for i in x]
print len(hrefs) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T15:49:14.750

您可以使用 JavaScript 滚动。从[文档](http://selenium-python.readthedocs.org/en/latest/faq.html)：

> 您可以使用 execute_script 方法在加载的页面上执行 javascript。因此，您可以调用 JavaScript API 滚动到页面的底部或任何其他位置。
> 
> 这是滚动到页面底部的示例：

```
driver.execute_script("window.scrollTo(0, document.body.scrollHeight);") 
```

> DOM 中的 window 对象有一个 scrollTo 方法可以滚动到打开的窗口的任意位置。scrollHeight 是所有元素的通用属性。document.body.scrollHeight 将给出整个页面的高度。

# c# - API：C# 方法命名约定：GetPageCount 或 GetTotalPages

> ID：14731025
> 
> 赞同：1
> 
> 时间：2013-02-06T14:06:42.100
> 
> 标签：c#, api, naming-conventions

我有一个界面`IPager`

```
public interface IPager
{
    int RecordCount { get; }
    int PageNumber { get; }
    int PageSize { get; }
}

public static class PagerExtensions
{
    public static int GetPageCount(this IPager pager)
    {
        var totalPages = pager.RecordCount / pager.PageSize;
        if (pager.RecordCount % pager.PageSize > 0)
            totalPages += 1;
        return totalPages;
    }
} 
```

`GetTotalPages`听起来比 更传统吗`GetPageCount`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T14:08:22.363

对我来说，GetPageCount 听起来更好，因为它更接近于通常使用的代码，例如`x.Count` Linq`x.Count()`扩展。

因此，它清楚地解释了自己。`Get`- 如，返回一些东西。`Page`- 有问题的变量，以及`Count`- 在应用于有问题的变量时返回返回值的方法中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T14:11:04.237

一般来说：选择最有意义的名字。

在这种情况下，我会使用`GetPageCount`它，因为它是自描述的，并且还暗示了类型`int`distinct `GetTotalPages` which 也可以返回类似`IEnumerable<Page>`.

`GetPageCount`也遵循这个顺序：

*   它是getter/setter吗？-> 获取
*   一般什么是get/set？-> 页面
*   什么是获取/设置？- >计数

此订单可让您更轻松地找到您要查找的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T14:10:00.977

为什么不简单`Count()`呢？

您已经扩展了实现的东西`IPager`，该方法可能不需要进一步扩展页面。

在`List<T>`你得到`Count`不的情况下`GetTCount()`。

真的是个人喜好。如果您将您的实现`IPager` `interface`为实际上不是 a 的不同类型`Page`怎么办？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T14:11:31.793

代码应该是“自我记录”的，因此使用任何描述其功能的名称都可以。只要下一个出现的人在不阅读 1000 页文档的情况下理解你的想法，你就完成了你的工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T14:08:38.810

老实说，我不认为有太大的区别。使用您或您的公司喜欢的任何东西。

# linux - 声明日期变量的 Shell 脚本

> ID：14731026
> 
> 赞同：0
> 
> 时间：2013-02-06T14:06:43.640
> 
> 标签：linux, shell, date, unix

下面是我写的脚本。

```
#!/usr/bin/expect -f
#!/bin/bash

# connect via scp

Y_DATE=`$(date --date yesterday "+%Y-%m-%d")`

spawn scp /apps/Train/jboss-soa-p.5.0.0/jboss-as/server/default/log/server.log.$Y_DATE  "xxxx@Tdev:/apps/software/copiedLogFiles/"

expect "password:"
send "buildadmin\$123\r"
expect "*\r"
expect "\r" 
```

我在执行脚本时遇到错误。

```
can't read "(date --date yesterday "+%Y-%m-%d")": no such variable
    while executing
"Y_DATE=`$(date --date yesterday "+%Y-%m-%d")`"
    (file "./copySITtoUAT_CDS.sh" line 6) 
```

我无法弄清楚 Y_DATE 声明中的错误是什么？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:09:17.030

也许是这样：您可以使用

```
Y_DATE=$(date --date yesterday "+%Y-%m-%d") 
```

或者

```
Y_DATE=`date --date yesterday "+%Y-%m-%d"` 
```

但不是两者兼而有之。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:05:34.557

我修改了我的脚本，如下所示，它起作用了。

```
#!/bin/sh

LOG_DIR=/apps/jboss/jboss-soa-p.5.0.0/jboss-as/server/mssql_prod1/log
SRS_HOST=XPSIT
USER_ID=xambas
PSWD=abackc
Y_DIR=`find $LOG_DIR -name "server.log*" \( -mtime -1 -and -not -daystart -mtime 0 \)`
cd $LOG_DIR
Y_FILE=`find . -name "server.log*" \( -mtime -1 -and -not -daystart -mtime 0 \)`
cd -
export Y_FILE SRS_HOST USER_ID PSWD Y_DIR

expect -c '
        spawn scp "$env(Y_DIR)" "$env(USER_ID)@$env(SRS_HOST):/apps/soft/Prod_LOG/Prod_A/$env(Y_FILE)"
        expect "password:"
        send "$env(PSWD)\r"
        expect "*\r"
        expect "\r" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-05T11:09:18.083

以下代码有效：

```
Y_DATE=`date --date yesterday +%Y-%m-%d` 
```

# python - 在 z3 中有效地查找 BitVec 权重（也就是访问位向量的位）

> ID：14731028
> 
> 赞同：1
> 
> 时间：2013-02-06T14:06:48.973
> 
> 标签：python, z3

我目前正在使用 z3 的 python api 计算位向量的权重。

在通过 python API 搜索更直接的方法之后，我正在`st1`以下列方式实现位向量的权重函数：

```
Sum([( (st1 & (2**(i)))/(2**(i)) ) for i in range(bits)]) 
```

我的问题相对简单，有没有更简单/更有效的方法？

我遇到的问题包含 1500 多个这些重量限制，并希望确保我尽可能高效地做事。

*编辑：我将添加以下说明，我试图计算的内容有一个名称（它是汉明权重），我知道有非常有效的方法可以在命令式语言中实现功能，但**最终我正在寻找什么是否有任何底层方法可以访问 z3 位向量的各个位。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:28:52.130

我对您在问题中发布的示例进行了一些操作：

*   [z3 在解析 SAT 模型时伪随机挂起](https://stackoverflow.com/questions/14712631/z3-pseudo-randomly-hangs-while-parsing-through-a-sat-model)

我相信 unsat 实例很难解决，因为这个问题似乎有很多对称性。如果是这种情况，我们可以通过包含“对称破坏约束”来提高性能。Z3 不能自动打破这种问题的对称性。

这是一个小的编码改进。该表达式`((st1 & (2**(i)))/(2**(i))`本质上是提取第 i 位。我们可以`Extract(i, i, st1)`用来提取第 i 位。结果是大小为 1 的位向量。然后，我们必须“扩展”它以避免溢出。您问题中的位向量最多有 28 位。因此，5 位足以避免溢出。因此，我们可以使用`ZeroExt(4, Extract(i, i, st1))`. 也就是说，我们替换

```
Sum([( (st1 & (2**(i)))/(2**(i)) ) for i in range(bits)]) 
```

和

```
Sum([ ZeroExt(4, Extract(i,i,st1)) for i in range(bits) ]) 
```

我得到了适度的 2 倍加速。所以，Z3 仍然无法解决 6 位 unsat 实例 :(

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T14:22:28.870

你应该尝试使用递归方法，也许你可以看看这个[动态编程](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)

# c++ - 实现从 2 个向量返回数据的自定义迭代器

> ID：14731031
> 
> 赞同：0
> 
> 时间：2013-02-06T14:07:02.693
> 
> 标签：c++, iterator, stdvector

我有一个用 3 个向量实现数据结构（某种哈希图）的类。

```
std::vector<uint64_t> keys;  // storage of keys to values (actually hash values)
std::vector<int> values; // storage for values (some integer)
std::vector<bool> allocated; // vector of allocated elements 
```

每个向量具有相同的大小（例如 8 个元素）

它看起来像这样

```
keys:      32233 52263 0     22224 0    87222  65432  0
values:    234   44    0     43    0    78     98     0
allocated: 1     1     0     1     0    1      1      0 
```

我想实现一个自定义迭代器，它可以迭代**分配**的 向量并能够返回值向量 的相应*值和**键*向量的键。应该忽略空点（在分配的向量中标记为 0），因为这些点被视为空闲点。我想我可能能够返回每个迭代分配的点的一对类型，比如`std::pair< key, value >`或这样，所以我将它们作为键`it->first`和值作为`it->second`。

我真的不知道如何开始实施这一点。这可能吗？如果有人可以给我小的示例代码，那就太好了。也许这比我想的更简单。

在此先感谢您的帮助！

# json - 在 yii 中实现无限滚动

> ID：14731032
> 
> 赞同：0
> 
> 时间：2013-02-06T14:07:02.973
> 
> 标签：json, yii, infinite-scroll

我目前正在使用 cListView 进行分页。该页面在服务器上完全呈现并发送到客户端。现在这就是我的计划：只需从服务器发送 json 格式的数据，它将使用一些模板引擎在客户端上渲染。使用无限滚动而不是分页。

使用 CListview 和 renderPartial 我可以将数据的 json 对象发送到客户端，但 CListView 将以纯 html 格式发送 ajax 页面页脚。如何在 json 中发送该部分，以便我可以使用现有功能，而无需自己在 sql 中为 OFFSET 和 LIMIT 编写琐碎的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:41:55.303

[你可以在这里](http://yii-booster.clevertech.biz/json-grid.html)查看 TbJsonGridView 。它以 json 格式发送所有数据，包括标题、寻呼机等。它仅使用自己的模板库和 CGridView。如果可能的话，您可以修改它以适应您的要求。

# c - 是否可以在 switch 语句中使用 if else 语句？

> ID：14731033
> 
> 赞同：-1
> 
> 时间：2013-02-06T14:07:03.163
> 
> 标签：c

我试图在 switch 语句中插入一个 if else 语句，但是只有 else 语句会打印出来。请问有什么帮助吗？我指的是第三个 switch 语句。

```
 num_remain= num_temp/10;

    switch (num_remain)
    {

    case 0: printf(" "); break;
    case 2: if (num=0)
                        printf("Twenty");
                        else printf(" And Twenty"); break; // If num= 0 or not, it just prints "And Twenty".
    case 3: printf(" Thirty"); break;
    case 4: printf(" Fourty"); break;
    case 5: printf(" Fifty"); break;
    case 6: printf(" Sixty"); break;
    case 7: printf(" Seventy"); break;
    case 8: printf(" Eighty"); break;
    case 9: printf(" Ninety"); break;

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T14:09:52.710

```
if (num=0) 
```

你错过了一个`=`标志，这导致这是一个分配`if(num=0)`是相同的`if(0)`，因此将永远是错误的。它应该是

```
if (num==0) 
```

或者更好：

```
if(0 == num) 
```

这将通过抛出错误来防止这样的错误。

* * *

**编辑：**
你说这不能解决问题，那么还有其他问题。这是一个可以正常工作的示例代码：

```
int i = 2;
int j = 0;

switch(i)
{
    case 0:
       printf("it's 0\n");
       break;
    case 1:
       printf("it's 1\n");
       break;
    case 2:
       printf("it's 2\n");
       if(0 == j)
           printf("j is 0\n");
       else
           printf("hit the else\n");
       break;
    default:
       printf("The default\n");
} 
```

此代码是您尝试做的概念证明。它打印“it's 2”，后跟“j is 0”，因为它有效。如果您的代码仍然无法正常工作，那么您正在做其他事情，您没有向我们展示，或者您的变量没有按照您的想法设置。检查您的变量，在输入开关之前打印它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T14:08:44.800

```
if (num==0) 
```

并不是

```
if (num=0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:20:48.053

其他人已经回答了你的问题，但为了让你更容易，你还可以引入范围，使程序员更容易阅读和写作：

```
// the braces introduce scope, and make it easier to read and find your bugs.
case 2:
{ 
  if (0 == num)
  {
    printf("Twenty");
  }
  else 
  {
    printf(" And Twenty");
  }
} break; 
```

# struts - web.xml安全约束角色组合

> ID：14731034
> 
> 赞同：3
> 
> 时间：2013-02-06T14:07:05.683
> 
> 标签：struts, tomcat7, web.xml

鉴于我无法创建任何新角色，因为它们是在 CAS 服务器中创建的，并且我对它们没有任何控制权，有没有办法保护 PDF 文件仅在用户同时拥有“客户”和“专业人士”时才能打开“角色？

换句话说，考虑以下三个用户：

user1 只有“customer”角色 user2 有“customer”和“professional”角色 user3 有“customer”和“professional”角色 user4 只有“professional”角色

只有 user2 和 user3 应该被允许查看 PDF。

基本上，我想做类似的事情：

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>auth</web-resource-name>
        <url-pattern>/doc/profesionalCustomer.pdf</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>professional,customer</role-name>
    </auth-constraint>
</security-constraint> 
```

这甚至可能吗？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T21:52:39.347

使用声明式安全（即通过 web.xml）这是不可能的。您只能列出有权访问资源的角色，如下所示：

```
<security-constraint>
<web-resource-collection>
    <web-resource-name>auth</web-resource-name>
    <url-pattern>/doc/profesionalCustomer.pdf</url-pattern>
</web-resource-collection>
<auth-constraint>
    <role-name>professional</role-name>
    <role-name>customer</role-name>
</auth-constraint> 
```

但是，在这种情况下，您将向所有具有专业或客户角色的用户授予访问权限，这不是您想要的。没有允许您为具有角色组合的用户授予访问权限的结构。

您可以采取的一种方法是以编程方式处理它：将客户端引导到一个 servlet，该 servlet 检查用户是否同时处于客户和专业角色中`HttpServletRequest#isUserInRole(String)`，如果它将请求转发到检索 pdf 的默认 servlet。此外，如果您想推迟授予哪些角色组合访问部署时间，而不是将其硬编码在 servlet 中，您可以通过web.xml 的`/web-app/servlet/init-param`or`/web-app/context-param`元素适当地参数化授予 servlet。

以下是支持这一点的 web.xml 摘录：

```
<servlet>
    <servlet-name>PDF Retriever</servlet-name>
    <servlet-class>com.stackoverflow.PDFRetrieverServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>PDF Retriever</servlet-name>
    <url-pattern>/docs/pdf/*</url-pattern>
</servlet-mapping>
<security-constraint>
    <web-resource-collection>
        <web-resource-name>PDF Docs - customer and professional only</web-resource-name>
        <url-pattern>/docs/pdf/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>*</role-name>
    </auth-constraint>
</security-constraint>
<security-constraint>
    <web-resource-collection>
        <web-resource-name>PDF Docs Private</web-resource-name>
        <url-pattern>/private/pdf/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name />
    </auth-constraint>
</security-constraint>` 
```

这是 servlet 的 doGet 的编码：

```
protected void doGet(HttpServletRequest request, 
    HttpServletResponse response) throws ServletException, IOException {
    if (request.isUserInRole("customer") && request.isUserInRole("professional")) {
         String urlSuffix = request.getPathInfo();
         RequestDispatcher rd = request.getRequestDispatcher("/private/pdf"
              + urlSuffix);
          rd.forward(request, response);
     } else {
          response.sendError(HttpServletResponse.SC_FORBIDDEN);
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T15:52:15.557

我想阅读一些关于这个主题的内容，发现下面的链接非常有用：

[http://www.devarticles.com/c/a/Java/Securing-Struts-Applications/1/](http://www.devarticles.com/c/a/Java/Securing-Struts-Applications/1/)

# iphone - MapView 中的叠加层

> ID：14731036
> 
> 赞同：0
> 
> 时间：2013-02-06T14:07:06.937
> 
> 标签：iphone, ios, mkmapview

使用 UIMapView 可以打开“显示用户位置”。这工作正常。地图上出现一个小蓝点。当我放大地图时，蓝点周围的 MapView 中会出现一个圆圈。

这个圆圈是否向我显示了 gps 信号的准确性？

在我的应用程序中，我想显示信号的准确性，这是否已经包含在 SDK 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:08:31.550

这是标准行为，是的，圆圈向您展示了当时信号的准确度，您会注意到它开始变大，然后随着准确度的增加而缩小。

# android - PhoneGap中Manifest.xml和Config.xml的区别

> ID：14731037
> 
> 赞同：4
> 
> 时间：2013-02-06T14:07:11.083
> 
> 标签：android, cordova

我正在 Android 平台上的 Eclipse 中开发我的 phonegap 应用程序，我想从 Adob​​e 的帐户（build.phonegap.com）创建 .APK 文件

所以，我的问题是**我不知道 Manifest.xml 文件和 config.xml 文件之间的区别。**

**我必须在哪个文件中为我的 phonegap 应用程序添加权限（在清单或配置文件中）？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:12:24.153

有 2 个文件 - 一个是`AndroidManifest.xml`，另一个是`config.xml`.

第一个文件 - `AndroidManifest.xml`- 用于设置有关您的应用程序的信息、它用于实际运行的主要活动（Java 类）、权限以及更多与 Android 相关的信息。此文件仅适用于 Android 设备（不是 iOS，也不是 BlackBerry 等）。

`config.xml`另一方面是PhoneGap 特定的，包含设置PhoneGap 项目的信息。您可以在此处设置插件、允许 PhoneGap 可以访问的 URL 以及其他一些设置。

# dll - Ultimate SAML Component Pro 库

> ID：14731038
> 
> 赞同：0
> 
> 时间：2013-02-06T14:07:10.680
> 
> 标签：dll, saml, saml-2.0

我们计划从 component pro 购买 SAML 组件的许可证，但我想确保它可以与 PHP Moodle 环境集成。我们将拥有 ASP.Net 网络应用程序，它将充当 IDP，并且用户点击我们的网站将转移到由其他公司维护的 Moodle PHP 网站。只有我们会使用组件 pro 的 Ultimate SAML 组件来创建 SAML 响应并将其发送给他们。但是他们如何在不使用组件专业库的情况下读取 SAML 响应，因为我发送的 SAML 响应是库中 SAMLResponse 类的对象。我从组件 pro 中检查了所有示例项目以及示例项目中的所有 IDP 和 SP，它们都使用 comp pro 库来创建和读取 SAML 响应。基本上我想使用这个库创建一个 SAML 响应，SP 可以在不使用组件 pro 库的情况下读取它，并且我们可以成功地进行 SSO 集成。如果我不清楚我的情况，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:46:06.143

SAML 是基于 XML 的标准。您正在谈论的 SAMLResponse 将在发送消息之前编组为 XML。

只要您的组件和 Moodle 正确实施 SAML，您使用什么来生成 SAML 消息都没有关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T03:24:54.013

我的基于 simplesamlphp 的 Moodle 的 SAML 插件应该与该 IdP 兼容。是免费的，许多组织都在使用它。 [https://moodle.org/plugins/view.php?plugin=auth_saml](https://moodle.org/plugins/view.php?plugin=auth_saml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T18:53:22.077

同意@Stefan。SAML 是一种协议标准——你如何实现它是无关紧要的。

这有点像以英语为标准，一侧使用记事本写信息，另一侧使用 Word 阅读。

记事本！= Word，但因为他们都使用英语，所以没关系。

只是一个警告 - SAML 是一个巨大的协议 - 并非所有实现都支持所有部分。

# javascript - 无法更新 javascript/html 函数中的全局变量

> ID：14731040
> 
> 赞同：2
> 
> 时间：2013-02-06T14:07:19.303
> 
> 标签：javascript, html

我有一个已定义的全局变量，我尝试过多种方式进行更新，但它不起作用

```
<script>
var test = 4;

 function dostuff() {

...

test=7;
or
window.test=7;
or
declare it here without the var = 7

...

}
</script> 
```

然后后来...

```
<td><script type="text/javascript">document.write(test);</script></td> 
```

输出：4！

有什么帮助吗？帮我说7！

谢谢

* * *

dostuff() 是这样调用的。

```
$(document).ready(function(){
    dostuff();
}); 
```

如果我正常调用它，它确实会正确更新全局变量，但是该程序中的其他内容会中断。从这个 $(document).ready(function() 中更新全局变量的任何提示？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:20:20.933

我不确定您在哪里调用函数，但是如果您希望变量对于页面是全局的`dostuff()`，则需要考虑一件事。`test`然后你应该像这样声明它。

```
//this one is preferd
test = 4; 
```

或者

```
window.test = 4; 
```

这应该有效，请确保您正在调用`dostuff()`.

**编辑：解决函数调用问题**

所以这里是完整的解决方案，概述了您的问题。

**问题：**您正在调用`doStuff()`（`document.ready()` **加载 DOM 后调用）**事件，并且**在 DOM 加载时打印变量的值**。

它显示**旧值**，因为`doStuff()`在您在 DOM 中打印值之前从未被调用过。

**解决方案：**有两种方法可以实现所需的输出。

1.  打电话`doStuff()`之前**开始加载**（在其声明之后）**。**
***   创建一个函数，该函数进行计算并相应地返回要打印的值。**

 ****解决方案1：**

```
 <!DOCTYPE html>
    <html>
    <head>
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
      <script>
//Should be before Body tag
       test = 4;
//Declaring function
    function doStuff()
    {

      test = 8;

    }
    //Calling right after declarion 
    doStuff();
      </script>
    <meta charset=utf-8 />
    <title>JS Bin</title>
    </head>
    <body>
/*Here value is updated and ready to print any any where in the DOM*/
      <h1><script type="text/javascript">

        document.write(test);</script></h1>
    </body>
    </html> 
```

[解决方案 1](http://jsbin.com/esonub/6/edit)的实时 URL

**解决方案2：**

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
  <script>
    /*Should be before Body tag*/
   test = 4;

function doStuff()
{
  /*Changing value and returing it.*/
  test = 8;
  return test;

}

  </script>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <h1><script type="text/javascript">
    /*Calling function and printing returned value*/
    document.write(doStuff());</script></h1>
</body>
</html> 
```

[解决方案 2](http://jsbin.com/utopiz/1/edit)的实时 URL

希望这会有所帮助，让我知道是否还有其他东西，如果没有，请接受作为答案！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:08:53.000

显然，你没有在`dostuff()`任何地方调用你的函数:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:23:59.460

头标签脚本实际上并不执行函数，它们只是定义它们。您必须使用文档中某处的函数调用来执行该函数。该函数调用可以附加到页面的 onload 事件，使其在页面加载时自动执行，也可以附加到其他事件，如 onclick，以便稍后触发它。

以您所做的方式声明全局变量缺乏描述能力；当一个全局变量被声明时，它被附加到窗口对象上。因此，当您声明一个时，请像这样声明它：

```
var window.varName = value; 
```

虽然它做了完全相同的事情，但它确实可以帮助您明确地表达实际发生的事情，这几乎总是比替代方案更好。**

# assembly - 在程序集中将字符附加到字符串

> ID：14731047
> 
> 赞同：0
> 
> 时间：2013-02-06T14:07:31.553
> 
> 标签：assembly, x86, masm

我想将'$'附加到字节数组的末尾以通过int打印我尝试使用masm使用此代码：

```
.MODEL small
.STACK 200h
.data
m2 db "gggg"
.code
_start:
    mov ax,@data
    mov ds,ax 
    m3 db m2,"$"
END _start 
```

但给了我这个错误：

```
 error A2071: initializer magnitude too large for specified size 
```

这段代码是真的吗？有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:25:21.757

`db`不是一些可以组合或连接不同对象的魔术运算符。这是一个指令，告诉汇编器静态分配空间（内存），就在此处用于随后列表中固定数量的字节值，并用这些值对其进行初始化。因此，`m2 db "gggg"`被替换为 4 个字节，每个字节都是字母 g 的 ASCII 码。

`m2`不是字节值。它是某个对象的标签、名称和地址。此标签（地址）的值通常不适合单个字节（这就是您收到错误的原因）。而且您不想要`m2`in的地址，您想要名称为,`m3 db m2`的对象的内容或值。`m2``"gggg"`

所以，`m3 db m2`不会神奇地扩展到类似`m3 db "gggg"`. 如果您想操作程序的源代码并执行文本替换，您可以使用宏，它能够在源代码转换为机器代码之前扩展为数字常量、字符串和指令。

但是，在这种情况下，您需要显式分配另一块空间（是的，`db`可以这样做），编写代码（指令）以`"gggg"`从另一个位置复制到它，然后坚持`"$"`到底。

最后，这样的事情几乎总是错误的：

```
mov ds, ax
m3 db "gggg$" 
```

当它被翻译成机器代码然后执行时，你认为 CPU 完成后会做什么`mov ds, ax`？你不认为它会尝试将“gggg$”的五个数据字节重新解释为指令字节，对它们进行解码并像处理 的字节一样执行它们`mov ds, ax`？CPU 不会知道您打算将这五个字节作为数据而不是代码。数据字节与指令字节无法区分，`db`它本身不是 CPU 指令，它只是对汇编器的指令，就像`var`Pascal 或 JavaScript 中的关键字一样。

您必须将数据移出 CPU 执行指令的位置。否则它将尝试将数据解释为指令，您的程序将无法运行。

# javascript - 可见性：隐藏 vs 显示：无 vs 不透明度：0

> ID：14731049
> 
> 赞同：88
> 
> 时间：2013-02-06T14:07:40.480
> 
> 标签：javascript, css, performance, animation, render

我目前正在开始一个动画项目。在项目中，我将拥有超过 40000`div`秒并迭代地为它们设置动画。如果任何`div`s 处于被动状态（即至少 2 秒内没有动画），我不会显示它们以提高动画性能。

问题是：哪个 css 属性最适合这个？

```
.passive1{
   display:none
}

.passive2{
    visibility:hidden;
}

.passive3{
    opacity:0;
} 
```

以及如何测量渲染性能，如 fps、gpu 使用率？

* * *

## 回答 #1

> 赞同：303
> 
> 时间：2015-12-30T12:29:41.333

虽然所有 3 个属性都使元素的框*看起来*不可见，但它们之间存在关键区别：

| 财产 | 绘 | 在布局中 | 堆叠上下文 | 指针事件 | 键盘事件 |
| --- | --- | --- | --- | --- | --- |
| [`opacity: 0;`](https://developer.mozilla.org/en-US/docs/Web/CSS/opacity) | 不 | **是的** | **新的** | **是的** | **是的** |
| [`visibility: hidden;`](https://developer.mozilla.org/en-US/docs/Web/CSS/visibility) | 不 | **是的** | *变化* | 不 | 不 |
| [`display: none;`](https://developer.mozilla.org/en-US/docs/Web/CSS/display) | 不 | 不 | *变化* | 不 | 不 |

*   “Painted”列指示浏览器是否将绘制元素的背景（例如`background-image`）、`#text`内容等。
    *   当然，如果不参与页面布局，则无法绘制元素。
    *   这对于所有 3 个属性和值都是否，因为浏览器*不需要*绘制元素的框，因为它是不可见的。
*   “布局中”列指示浏览器是否将计算元素的布局和尺寸 - 以及它的任何未从布局中排除的后代。
    *   这只是*No* for `display: none;`，与浏览器一样，`opacity: 0;`浏览`visibility: hidden;`器仍将确定元素的大小，因此它可以正确地布局相对于当前元素的其他元素（例如，如果您有`span.hidden { visibility: hidden; display: inline; }`）。
*   “堆叠上下文”列表示任何使用`opacity`(except `opacity: 1.0;`) 都会创建一个新的堆叠上下文，这会使`position`属性的使用变得复杂。
*   “指针事件”列指示元素是否会响应来自指针设备（例如鼠标、触摸屏、触控笔等）的用户交互。
    *   例如，`visibility: hidden;`然后`:hover`状态将不起作用，并且单击相同的元素将不适用`:focus`，或者`:active`两者都不适用。
    *   此外，DOM 不会引发您在 JavaScript 中处理的任何指针事件（例如`visibility: hidden;`不会引发`mouseclick`,`touchstart`等 - 请注意，`click`某些元素仍然可以引发事件，例如`<button>`用户使用非指针调用时输入法，例如用键盘或语音（无障碍）导航方式。
        *   您可以使用`pointer-events: none;`来阻止指针事件，但这**不会阻止键盘和其他非指针输入**，因此不应该用于禁用元素，因为用户仍然可以使用键盘与其交互（尤其是`<button>`、`<input />`、`<select>`和`<textarea>`） .
*   “键盘事件”列指示元素是否可以使用键盘导航（以及可能的其他导航方式）进行交互。
    *   `<form>`这包括用于导航元素的智能设备（智能手机和平板电脑）浏览器的“上一个/下一个字段”按钮（因为它使用`tabindex`）。
    *   与如何在 CSS 中使用 禁用指针事件不同`pointer-events: none;`，没有 CSS 属性可以禁用键盘交互。

* * *

此表显示了这 3 个属性的主要值之间的更完整比较：

| 财产 | 绘 | 在布局中 | 堆叠上下文 | 指针事件 | 键盘事件 | 动画 |
| --- | --- | --- | --- | --- | --- | --- |
| **不透明度** |  |  |  |  |  |  |
| `opacity: 0;` | 不 | **是的** | **新的** | **是的** | **是的** | **是的** |
| `opacity: 0.1;` | **是的** | **是的** | **新的** | **是的** | **是的** | **是的** |
| `opacity: 0.9;` | **是的** | **是的** | **新的** | **是的** | **是的** | **是的** |
| `opacity: 1;` | **是的** | **是的** | *变化* | **是的** | **是的** | **是的** |
| **能见度** |  |  |  |  |  |  |
| `visibility: hidden;` | 不 | **是的** | *变化* | 不 | 不 | 是的，有警告 |
| `visibility: visible;` | **是的** | **是的** | *变化* | **是的** | **是的** | 是的，有警告 |
| **展示** |  |  |  |  |  |  |
| `display: none;` | 不 | 不 | *变化* | 不 | 不 | 不 |
| `display: contents;` | 仅限文本和儿童 | 仅限文本和儿童 | *变化* | **是的** | **是的** | 不 |
| **其他** |  |  |  |  |  |  |
| `pointer-events: none;` | 不适用 | 不适用 | 不适用 | 不 | **是的** | 不 |

*   “Animatable”列指示该属性是否可以与 CSS 过渡 ( `transition:`) 或 CSS 动画 ( `@keyframes`) 一起使用。

    *   至关重要的是，该`display:`属性*不能被动画化*，这就是为什么我们不能`@keyframes`在动画完成后使用时间轴来完全隐藏元素。
        *   但奇怪的是，我们*可以*为属性设置动画，`visibility:`尽管它是不连续的，[尽管有一些警告](https://developer.mozilla.org/en-US/docs/Web/CSS/visibility#interpolation)。
*   另外，不要被同名的[`backface-visibility`](https://developer.mozilla.org/en-US/docs/Web/CSS/backface-visibility)和[`content-visibility`](https://developer.mozilla.org/en-US/docs/Web/CSS/content-visibility)属性混淆。

    *   `backface-visibility`仅适用于 3D`transform`操作。
    *   `content-visibility` [是在初始页面加载期间加速页面渲染的优化](https://web.dev/content-visibility/)，但首先需要 CSS Containment，这超出了本 QA 的范围。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-06T14:13:46.140

[在这里](https://stackoverflow.com/a/273076/1495728)找到的答案将回答您的第一个问题（很可能`display:none`是因为空间完全折叠了）。

~~对于您的第二个问题，诸如此类的工具[可能](http://www.kaizou.org/2011/06/effectively-measuring-browser-framerate-using-css/)对您有用。~~但是 40,000 个 div 听起来太多了，使用 canvas 或 SVG 可能会有更好的性能（例如，使用[KineticJS](http://kineticjs.com/)库来处理动画 - 转换、旋转、缩放等）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-10-21T16:39:01.347

如果使用 display:none 或 visibility:hidden ，性能将是一个问题，因为它们会在大多数浏览器中触发绘制和布局，这意味着您的浏览器将在这两个更改时重绘视口，所以我会推荐不透明度，但仍然对于那个数量的 div 它会仍然没有达到预期的性能，您可以使用名为 html-gl 的库尝试 webgl，该库在 webgl 中呈现您的 div 检查[https://github.com/PixelsCommander/HTML-GL](https://github.com/PixelsCommander/HTML-GL)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-06-09T11:22:01.367

这是来自各种答案的经过验证的信息的汇编。

这些 CSS 属性中的每一个实际上都是独一无二的。除了使元素不可见之外，它们还有以下附加效果：

1.  **折叠**元素通常占用的空间
2.  响应**事件**（例如，点击、按键）
3.  参与**标签**

```
                     折叠事件标签
不透明度：0 否 是 是
可见性：隐藏 否 否 否
可见性：折叠 * 否 否
显示：无 是 否 否

* 在表格元素内是，否则否。

```

从[链接获得](https://stackoverflow.com/questions/272360/does-opacity0-have-exactly-the-same-effect-as-visibilityhidden/273076#273076)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-02-06T14:14:27.763

`display:none`将隐藏整个元素并将其从布局空间中删除，而`visibility:hidden`隐藏一个元素但占用与以前相同的空间。
如果要创建透明度或淡入淡出效果，可以使用不透明度。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-02-06T14:10:18.703

`display:none`因为 div 被从流中取出，因此不必计算它们的位置。

话虽如此，40000 divs 听起来很疯狂。您是否考虑过 HTML5 画布或 SVG 之类的替代方案？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-06-05T17:20:55.993

有时我同时使用可见性和不透明度来达到避免点击事件的效果

例如

从屏幕上删除的正常状态/元素：

```
visibility:hidden;
opacity:0;
transition: all .3s; 
```

在屏幕上悬停状态/元素：

```
visibility:visible;
opacity:1; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-20T10:13:58.227

在调查悬停时发现了这个线程：Safari mobile 中的错误

确认这`opacity: 0`是一种有效的方法（就我而言，谢谢大家）。`opacity: 0`将其修复为可行（仍然需要在屏幕旋转 [宽度更改] 上进行烦人的 js 重绘）。

关于我修复的错误的背景信息`opacity: 0`：悬停在一个 li 上，其中包含一个 div，当悬停（或在移动设备上单击）日历条目时会显示该 div。在 Safari 移动设备中真正随机工作/不工作 - 甚至更奇怪的是屏幕旋转 ++ 上的行为变化 [nb 不涉及媒体查询，所以不是这样]。

如此烦人，因为在我尝试过的所有其他浏览器中都可以正常工作。

# canvas - jquery旋钮角度渐变

> ID：14731054
> 
> 赞同：6
> 
> 时间：2013-02-06T14:07:44.907
> 
> 标签：canvas, gradient, jquery-knob

有没有办法给jQuery[旋钮](http://anthonyterrien.com/knob/)插件添加角度渐变，让它从一种颜色开始，沿着弧线，变成另一种颜色？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T14:07:44.907

我在互联网上寻找解决方案，但没有人尝试过或发布解决方案。最后我发布一个问答。如果有人有更好的解决方案，请与我们分享。

在初始化期间，我重写了 draw 方法并检查了属性 shaded="true"。如果它在那里，则形成一个渐变，从白色开始向 fgColor 移动。要选择白色以外的起始颜色，请设置属性 shadeColor="#(color hex code)"。

```
<input class="knob" value="95" autocomplete="off" data-readOnly=true data-fgColor="#FF0000" data-bgColor="transparent" shaded="1" shadeColor="#00FF00"/>
<script>
    $(function(){
        $('.knob').knob({
            draw : function () {
                var a = this.angle(this.cv)  // Angle
                , sa = this.startAngle          // Previous start angle
                , sat = this.startAngle         // Start angle
                , ea                            // Previous end angle
                , eat = sat + a                 // End angle
                , r = 1;

                this.g.lineWidth = this.lineWidth;

                if(this.$.attr('shaded')){
                    var color1 = r ? this.o.fgColor : this.fgColor;
                    var color2 = this.$.attr('shadeColor') ? this.$.attr('shadeColor') : '#ffffff';
                    var grad = getGradient(color2, color1);

                    var saDeg = parseInt((sa * 180 / Math.PI) % 360);
                    var eatDeg = parseInt((eat * 180 / Math.PI) % 360);

                    for(var angle = saDeg;(angle % 360) != eatDeg;angle++){
                        sat = angle * (Math.PI / 180);
                        eat = (angle + 2) * (Math.PI / 180);

                        if(grad.color2[0] != grad.color1[0] && (angle + 1) % grad.steps[0] == 0){
                            grad.color1[0] += grad.adder[0];
                        }
                        if(grad.color2[1] != grad.color1[1] && (angle + 1) % grad.steps[1] == 0){
                            grad.color1[1] += grad.adder[1];
                        }
                        if(grad.color2[2] != grad.color1[2] && (angle + 1) % grad.steps[2] == 0){
                            grad.color1[2] += grad.adder[2];
                        }

                        color = '#' + toHex(grad.color1[0]) + toHex(grad.color1[1]) + toHex(grad.color1[2]);

                        this.g.beginPath();
                        this.g.strokeStyle = color;
                        this.g.arc(this.xy, this.xy, this.radius, sat, eat, false);
                        this.g.stroke();
                    }
                } else {
                    this.g.beginPath();
                    this.g.strokeStyle = r ? this.o.fgColor : this.fgColor ;
                    this.g.arc(this.xy, this.xy, this.radius, sat, eat, false);
                    this.g.stroke();
                }

                return false;
            }
        });
    });

    function getGradient(color1, color2){
        var ret = new Object();

        ret.color1 = new Array();
        ret.color2 = new Array();
        ret.steps = new Array();
        ret.adder = new Array();

        color1 = color1.replace('#','');
        ret.color1[0] = parseInt(color1.slice(0,2), 16),
        ret.color1[1] = parseInt(color1.slice(2,4), 16),
        ret.color1[2] = parseInt(color1.slice(4,6), 16);

        color2 = color2.replace('#','');
        ret.color2[0] = parseInt(color2.slice(0,2), 16),
        ret.color2[1] = parseInt(color2.slice(2,4), 16),
        ret.color2[2] = parseInt(color2.slice(4,6), 16);

        ret.steps[0] = (ret.color1[0] == ret.color2[0])? 0 : parseInt(360 / Math.abs(ret.color1[0] - ret.color2[0])),
        ret.steps[1] = (ret.color1[1] == ret.color2[1])? 0 : parseInt(360 / Math.abs(ret.color1[1] - ret.color2[1])),
        ret.steps[2] = (ret.color1[2] == ret.color2[2])? 0 : parseInt(360 / Math.abs(ret.color1[2] - ret.color2[2])),

        ret.adder[0] = (ret.color1[0] > ret.color2[0])? -1 : 1;
        ret.adder[1] = (ret.color1[1] > ret.color2[1])? -1 : 1;
        ret.adder[2] = (ret.color1[2] > ret.color2[2])? -1 : 1;

        return ret;
    }

    function toHex(number){
        number = number.toString(16);
        if(number.length < 2){
            number = '0' + number;
        }
        return number;
    }
</script> 
```

它为每一度绘制一个单独的弧（为了平滑，弧角为 2 度而不是 1 度）。弧的颜色经过从 fgColor 到 shadeColor 的过渡。

颜色混合的效果就像是颜料混合而不是光混合，所以如果你从绿色开始向红色移动，你就不会得到中间的黄色阴影。混光效果看起来很酷，但不知道该怎么做。它也不是一个很好的优化代码，它只是一个解决方案。巨大的进步空间。。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-30T12:52:26.157

太好了，正是我需要的！我也添加了“光标”选项，因为那是唯一还没有工作的东西。

```
var drawGradient = function () {

    var a = this.angle(this.cv)  // Angle
        , sa = this.startAngle          // Previous start angle
        , sat = this.startAngle         // Start angle
        , eat = sat + a                 // End angle
        , r = 1;

    this.g.lineCap = this.lineCap;
    this.g.lineWidth = this.lineWidth;

    if (this.o.bgColor !== "none") {
        this.g.beginPath();
        this.g.strokeStyle = this.o.bgColor;
        this.g.arc(this.xy, this.xy, this.radius, this.endAngle - 0.00001, this.startAngle + 0.00001, true);
        this.g.stroke();
    }

    if (this.$.attr('shaded')) {
        var color1 = r ? this.o.fgColor : this.fgColor;
        var color2 = this.$.attr('shadeColor') ? this.$.attr('shadeColor') : '#ffffff';
        var grad = getGradient(color2, color1);

        var saDeg = parseInt((sa * 180 / Math.PI) % 360);
        var eatDeg = parseInt((eat * 180 / Math.PI));

        var normalizedAngle = 0
        var normalizedEatAngle = eatDeg - saDeg;

        if(this.o.cursor == true) {
            var size = 40;
        } else if(this.o.cursor != false) {
            var size = this.o.cursor;
            this.o.cursor = true;
        }

        if(this.o.cursor) {
            if(normalizedEatAngle <= size) {
                normalizedEatAngle = size;
            }
        }
        for (var angle = saDeg; normalizedAngle < normalizedEatAngle; angle++, normalizedAngle++) {

            sat = angle * (Math.PI / 180);
            eat = (angle + 2) * (Math.PI / 180);

            if (grad.color2[0] != grad.color1[0] && (angle + 1) % grad.steps[0] == 0) {
                grad.color1[0] += grad.adder[0];
            }
            if (grad.color2[1] != grad.color1[1] && (angle + 1) % grad.steps[1] == 0) {
                grad.color1[1] += grad.adder[1];
            }
            if (grad.color2[2] != grad.color1[2] && (angle + 1) % grad.steps[2] == 0) {
                grad.color1[2] += grad.adder[2];
            }

            if(!this.o.cursor || (normalizedAngle + size) > normalizedEatAngle) {
                color = '#' + toHex(grad.color1[0]) + toHex(grad.color1[1]) + toHex(grad.color1[2]);
                this.g.beginPath();
                this.g.strokeStyle = color;
                this.g.arc(this.xy, this.xy, this.radius, sat, eat, false);
                this.g.stroke();
            }
        }
    } else {
        this.g.beginPath();
        this.g.strokeStyle = r ? this.o.fgColor : this.fgColor;
        this.g.arc(this.xy, this.xy, this.radius, sat, eat, false);
        this.g.stroke();
    }

    return false;
}; 
```

# html - 剑道 ui 数据显示不起作用

> ID：14731056
> 
> 赞同：3
> 
> 时间：2013-02-06T14:08:02.707
> 
> 标签：html, kendo-ui

我在 html5 上使用 kendo ui，每次显示页面时我都需要执行一些操作。只是为了那个是“数据显示”选项，但它不起作用。该功能仅在第一次触发，不再触发。

```
<div id="div1" data-role="view" data-show="alert(999)">
    // The content of the div
</div> 
```

警报仅触发一次。任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:19:28.790

尝试创建一个处理 show 事件的 JavaScript 函数：

```
<div id="div1" data-role="view" data-show="div1Show">
</div>

<script>
function div1Show() {
  alert(999);
}
</script> 
```

这是一个演示相同的简短演示：http: [//jsbin.com/abaveh/1/edit](http://jsbin.com/abaveh/1/edit)

# .net - 温莎城堡拦截器内存泄漏

> ID：14731058
> 
> 赞同：3
> 
> 时间：2013-02-06T14:08:13.720
> 
> 标签：.net, memory-leaks, castle-windsor

我遇到了一个问题，我的程序在使用 Castle Windsor 和拦截器时会耗尽内存。使用以下代码可以重现：

```
public interface ITest{}
public class Test : ITest {}
class TestInterceptor:IInterceptor {
    public void Intercept(IInvocation invocation) {}
}
class Program {
    static void Main(string[] args) {
        while(true) {
            using(var container = new WindsorContainer()) {
                container.Register(Component.For<TestInterceptor>());
                container.Register(Component.
                    For<ITest>().
                    ImplementedBy<Test>().
                    Interceptors(
                        InterceptorReference.ForType<TestInterceptor>()
                    ).Anywhere);

                var tst = container.Resolve<ITest>();
            }
        }
    }
} 
```

这就是内存使用的发展方式：

![内存使用情况](../Images/e3d2286e7bb6c58dfe4c208036b6e93b.png)

所以让我失望的是，我认为存在非托管代码内存泄漏，但经过大量调试后，我发现问题出在拦截器 prxoy 生成：具有代理类型的新（动态）程序集是每次解决时都会引入运行时：

![插入的拦截器代理](../Images/b314814c30e8f02d669180091ef34f6f.png)

现在，我想你可以通过以下方式解决这个问题

1.  为整个应用程序使用全局（静态）容器，但目前这对我的应用程序不可行（我读到这是这样做的首选方式，不完全清楚为什么）
2.  `ProxyGenerator`使用静态并使用生成实例的方式自己生成代理`UsingFactoryMethod`（我现在这样做）

这给我留下了3个问题：

1.  我是否正确使用了 Castle Windsor（文档并不完全清楚），如果是这样，Castle Windsor 有办法缓存代理类型吗？
2.  Castle Windsor 是否应该自动缓存代理类型（或者：当前行为是否是错误）？
3.  您将如何调试（例如，使用 perfmon）动态生成的程序集正在占用您的所有内存？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:41:30.057

> 我读到这是这样做的首选方式，不完全清楚为什么

在应用程序的整个生命周期中最好使用一个容器，因为：

*   容器针对这种情况进行了高度优化。通常使用 Reflection.Emit 生成委托，并缓存信息。这会产生一次性的性能影响（每个容器实例）并加速所有后续请求。为每个请求创建一个新实例会消耗应用程序的性能，因为所有这些反射和代码发射都会一次又一次地发生。
*   但除了这种优化之外，注册过程本身也需要时间。这可能是一次性成本，但您会一遍又一遍地这样做。
*   配置容器会变得更加困难。注册应该比请求更长的实例要困难得多。有一些方法可以解决这个问题，但这通常会导致容器配置难以掌握、难以维护并且存在错误。Castle Windsor 包含一个[容器诊断功能](http://docs.castleproject.org/Windsor.Debugger-views.ashx)，允许验证容器，但它不能进行跨容器验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-19T19:10:31.290

我今天刚遇到同样的问题。要回答原始帖子中的 #3，性能计数器 [.NET Clr Loading -> Current Assemblies] 在运行您的代码片段时，由于加载了动态代理类型，它会显示出线性增加的程序集数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T11:34:01.627

仔细阅读[文档](http://docs.castleproject.org/Windsor.Interceptors.ashx#Using_interceptors_2)。**使拦截器总是瞬态的。**

正确的代码是：

```
public interface ITest{}
public class Test : ITest {}
class TestInterceptor:IInterceptor {
     public void Intercept(IInvocation invocation) {}
}
class Program {
static void Main(string[] args) {
    while(true) {
        using(var container = new WindsorContainer()) {
            container.Register(Component.For<TestInterceptor>().LifestyleTransient());
            container.Register(Component.
                For<ITest>().
                ImplementedBy<Test>().
                Interceptors(
                    InterceptorReference.ForType<TestInterceptor>()
                ).Anywhere);

            var tst = container.Resolve<ITest>();
        }
    }
}
} 
```

# java - GroupLayout 未按预期运行

> ID：14731062
> 
> 赞同：2
> 
> 时间：2013-02-06T14:08:28.950
> 
> 标签：java, swing, layout-manager, jcomponent, grouplayout

我正在尝试创建一个扫雷类型的游戏，并围绕顶部的 GridLayout 和底部的 JPanel 设计了界面。我在底部的信息面板上安排 JComponents 时遇到问题。我正在使用 GroupLayout 来排列信息面板中的项目。

下面是它应该如何显示的基本图：

![计划](../Images/752655269e1ac20e20360a823e189c17.png)

这是实际结果：

![结果](../Images/a511b2dd4722fcfb04c5d497c09386e6.png)

我不明白为什么最底部的 JLabels（大的那些是 playerXTurnIndicator 标签）根本没有出现。当然，当默认情况下将它们添加到没有文本的组中时，它们会采用水平或垂直布局规定的区域大小吗？

```
private void createComponents() {     
    playerOneNameLabel = new JLabel("Name : ");
    playerTwoNameLabel = new JLabel("Name : ");
    playerOneScoreLabel = new JLabel("Score : ");
    playerTwoScoreLabel = new JLabel("Score : ");

    playerOneNameDataLabel = new JLabel("");
    playerTwoNameDataLabel = new JLabel("");
    playerOneScoreDataLabel = new JLabel("0");
    playerTwoScoreDataLabel = new JLabel("0");

    playerOneTurnIndicatorLabel = new JLabel();
    playerOneTurnIndicatorLabel.setBackground(Color.GREEN);
    playerOneTurnIndicatorLabel.setPreferredSize(new Dimension(100, 20));

    playerTwoTurnIndicatorLabel = new JLabel();
    playerTwoTurnIndicatorLabel.setBackground(Color.RED);
    playerTwoTurnIndicatorLabel.setPreferredSize(new Dimension(100, 20));

    infoMinesRemainingLabel = new JLabel("Mines Remaining : ");
    infoMinesRemainingData = new JLabel("0");

    infoTileCoordLabel = new JLabel("Tile : ");
    infoTileCoordDataLabel = new JLabel("0, 0");

    playerOneBombButton = new JButton("Bomb");
    playerTwoBombButton = new JButton("Bomb");

    GroupLayout layout = new GroupLayout(this);

    layout.setAutoCreateContainerGaps(true);
    layout.setAutoCreateGaps(true);

    layout.setHorizontalGroup(
            layout.createSequentialGroup()
                .addGroup(
                    layout.createSequentialGroup()
                        .addGroup(
                            layout.createParallelGroup()
                                .addGroup(
                                    layout.createSequentialGroup()
                                        .addComponent(playerOneNameLabel)
                                        .addComponent(playerOneNameDataLabel))
                                .addGroup(
                                    layout.createSequentialGroup()
                                        .addComponent(playerOneScoreLabel)
                                        .addComponent(playerOneScoreDataLabel))
                                .addComponent(playerOneTurnIndicatorLabel))
                        .addComponent(playerOneBombButton))
                .addGap(10)
                .addGroup(
                    layout.createSequentialGroup()
                        .addGroup(
                            layout.createParallelGroup()
                                .addComponent(infoMinesRemainingLabel)
                                .addComponent(infoTileCoordLabel))
                        .addGroup(
                            layout.createParallelGroup()
                                .addComponent(infoMinesRemainingData)
                                .addComponent(infoTileCoordDataLabel)))
                .addGap(10)
                .addGroup(
                    layout.createSequentialGroup()
                        .addComponent(playerTwoBombButton)
                        .addGroup(
                            layout.createParallelGroup()
                                .addGroup(
                                    layout.createSequentialGroup()
                                        .addComponent(playerTwoNameLabel)
                                        .addComponent(playerTwoNameDataLabel))
                                .addGroup(
                                    layout.createSequentialGroup()
                                        .addComponent(playerTwoScoreLabel)
                                        .addComponent(playerTwoScoreDataLabel))
                                .addComponent(playerTwoTurnIndicatorLabel))));

    layout.setVerticalGroup(
            layout.createParallelGroup()
                .addGroup(
                    layout.createParallelGroup()
                        .addGroup(
                            layout.createSequentialGroup()
                                .addGroup(
                                    layout.createParallelGroup()
                                        .addComponent(playerOneNameLabel)
                                        .addComponent(playerOneNameDataLabel))
                                .addGroup(
                                    layout.createSequentialGroup()
                                        .addGroup(
                                            layout.createParallelGroup()
                                                .addComponent(playerOneScoreLabel)
                                                .addComponent(playerOneScoreDataLabel)))
                                .addComponent(playerOneTurnIndicatorLabel))
                        .addComponent(playerOneBombButton)
                    )
                .addGap(50)
                .addGroup(
                    layout.createSequentialGroup()
                        .addGroup(
                            layout.createParallelGroup()
                                .addComponent(infoMinesRemainingLabel)
                                .addComponent(infoMinesRemainingData))
                        .addGroup(
                            layout.createParallelGroup()
                                .addComponent(infoTileCoordLabel)
                                .addComponent(infoTileCoordDataLabel)))
                .addGap(50)
                .addGroup(
                    layout.createParallelGroup()
                        .addComponent(playerTwoBombButton)
                        .addGroup(
                            layout.createSequentialGroup()
                                .addGroup(
                                    layout.createParallelGroup()
                                        .addComponent(playerTwoNameLabel)
                                        .addComponent(playerTwoNameDataLabel))
                                .addGroup(
                                    layout.createParallelGroup()
                                        .addComponent(playerTwoScoreLabel)
                                        .addComponent(playerTwoScoreDataLabel))
                                .addComponent(playerTwoTurnIndicatorLabel))));

    this.setLayout(layout);
} 
```

问候，

杰米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:40:19.873

显示了 JLabel（因此底部有可用空间），但没有颜色。请改用 JPanel（背景仅适用于不透明组件，请参阅[http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setBackground%28java.awt.Color%29](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setBackground%28java.awt.Color%29)）。

# c# - Process.Start 在哪个用户帐户下启动？

> ID：14731063
> 
> 赞同：2
> 
> 时间：2013-02-06T14:08:30.383
> 
> 标签：c#, service, process

我以管理员身份在机器上运行，但 UAC 设置为默认模式。

我启动了一个安装程序（使用“以管理员身份运行”）。从安装过程（使用 Wix）开始，我启动了一个客户端程序，该程序在光盘上创建了一些文件（C:\ProgramData...）。

```
var startInfo = new ProcessStartInfo()
            {
                WorkingDirectory = installLocation,
                FileName = fullPath
            };
Process.Start(startInfo); 
```

程序第一次运行时，我可以毫无问题地访问存储在本地磁盘上的所有数据。

如果我关闭它并重新启动它，我会收到以下错误消息：

> 拒绝访问路径“C:\ProgramData...”。

如果我使用“以管理员身份运行”再次启动应用程序，我可以从本地磁盘访问文件；这次没有错误。只有当我直接启动应用程序时才会出现访问路径错误。

这是由于 UAC 的设置，还是与在更具特权的用户帐户下创建的本地文件有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:13:10.073

是的，应用程序无需提升权限即可运行，这些权限是访问 ProgramData 和其他敏感系统文件夹或用户相关文件夹所需的权限。

您从应用程序中生成的任何进程都`will inherit`具有您的应用程序所拥有的权限。

您需要为您的应用程序创建一个清单，以便在启动时请求提升的权限，以便您可以访问这些文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:16:44.707

是的，正如您所说，本地文件是在更有特权的用户帐户下创建的。

您可以通过以下方式检查此通过管理员凭据`ProcessStartInfo`

```
var startInfo = new ProcessStartInfo()
            {
                WorkingDirectory = installLocation,
                FileName = fullPath,
                UserName = "Administrator",
                Password = "password"
            }; 
```

您可以绕过这个简单地创建具有较低权限的 ProgramData 文件夹：

[使用 C#.NET 将“所有人”权限添加到文件夹](https://stackoverflow.com/questions/5298905/add-everyone-privilege-to-folder-using-c-net)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T14:49:48.553

或者您可以强制应用程序必须以管理员权限启动..

项目 - 添加新项目 - “应用程序清单文件”。

改变

```
<requestedExecutionLevel> 
```

到

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T14:24:10.797

当启动一个新进程时，它会继承当前进程的权限。

因此，如果您的进程被提升，则创建的进程也会被提升。第二次运行程序时，如果它没有被提升，则生成的进程也不会被提升。

您可以指定`runas`动词来强制显示 UAC 弹出窗口，该弹出窗口将允许手动提升您生成的进程：

```
ProcessStartInfo startInfo = new ProcessStartInfo
{
    UseShellExecute = true,
    FileName = "cmd.exe",
    Verb = "runas"
}; 
```

# html - 在框架内居中图像 - 没有 javascript

> ID：14731066
> 
> 赞同：0
> 
> 时间：2013-02-06T14:08:32.817
> 
> 标签：html, css

我想将此图像居中在框架的中心，请参见下图：

![在此处输入图像描述](../Images/77170d25c95cab337739d646e81f861a.png)

我使用了溢出隐藏，所以你看不到框架外部的东西我需要只用 css 来完成 - 根本没有脚本，因为它用于不允许脚本的 3rd 方软件。除此之外，我需要能够调整图像的大小，因此需要将其声明为图像标签。请参阅小提琴以了解它必须包含的元素。最后但并非最不重要的一点是它必须是 css 2.1，所以（没有 css3）！

[这是框架上的小提琴](http://jsfiddle.net/QxygK/)

和 HTML：

```
<div class="frame">
    <img src="http://preview.fonqi.com/img/explain2.jpg" width="200" />
</div> 
```

的CSS：

```
.frame{
   width:200px;
   height:200px;
   border:2px solid black;
   overflow:hidden;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:12:43.380

```
.frame img { margin-top: -50%; } 
```

将图像向上移动一半的长度。

[演示](http://jsfiddle.net/NotInUse/QxygK/1/)

也可以使用定位......

```
.frame img { position: relative; top: -50%; } 
```

[演示](http://jsfiddle.net/NotInUse/QxygK/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:21:24.183

试试下面

在 CSS 中添加这一行`img{ margin: -100px 0px;}`它将起作用

更新小提琴：http: [//jsfiddle.net/QxygK/13/](http://jsfiddle.net/QxygK/13/)

# objective-c - 使用蓝牙 4.0 LE 的 ios 设备之间的距离以及在配对设备之间传递消息

> ID：14731067
> 
> 赞同：2
> 
> 时间：2013-02-06T14:08:33.817
> 
> 标签：objective-c, ios6, bluetooth-lowenergy

我正在开发一个应用程序，该应用程序需要使用 BT 4.0 LE 找出 ios 设备之间的距离，然后将消息传递给配对的设备（如果它们在范围内）。有没有可行的解决方案？？？请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:01:50.770

您可以使用 RSSI 作为距离的指示（更准确地说，该设备当前 RF 条件的质量）并提出您自己的机制来计算距离。

# matlab - 向量化查找存储在矩阵中的多项式根的代码

> ID：14731070
> 
> 赞同：-3
> 
> 时间：2013-02-06T14:08:37.047
> 
> 标签：matlab, structure

我需要一些关于如何向量化代码以查找存储在矩阵中的多项式根的技巧。我拥有的是一个多维数组，其中包含*100个**100×3*大小的矩阵。我正在粘贴下面的代码

```
one = ones ( 100, 100 );

poly.struc = reshape( [ one; gr_fac1; - gr_fac2 ], 100, 3, [] ); 

poly_roots_select = zeros ( 100, 100);

for j = 1:1:100

  poly_matrices = poly.struc ( :, :, j );

    for i = 1:1:100

      poly_select = poly_matrices ( i, : );

      poly_roots = roots ( poly_select );

      poly_roots_select ( i , j)  =  poly_roots ( real ( poly_roots) > 0 , 1 ) ; 

    end

end 
```

我想删除两个*for*循环。至少我希望能够访问存储在*poly.struc*数组中的矩阵，而无需为此设置循环。还有其他方法可以将行向量从矩阵传递到*根*函数而不需要循环吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:19:22.867

首先你可以分配一个矩阵`B=[one;gr_fact;gr_fact2]`.... *（只是让它更整洁一点）*

然后确保`M x N x P = numel(B)`....*其中 M,N,P 是新 3D 数组的维度，M,N,P = 100,3,100*

您应该将 reshape 语句修改为：

```
poly.struc = reshape(B,100,3,100); 
```

使用访问每个矩阵`poly.struc(:,:,i)`

如果您必须访问多行/多列，则无法避免循环。

# jquery-mobile - requirejs 模块不会捕获 pageinit 事件

> ID：14731074
> 
> 赞同：1
> 
> 时间：2013-02-06T14:08:40.947
> 
> 标签：jquery-mobile, requirejs, require

我正在使用 jquery mobile 开发一个应用程序，并且正在使用 RequireJS 将应用程序重构为模块。我几乎完成了任务，但遇到了一个我需要一点帮助的问题。

我正在手动加载我的脚本文件（jquery、jqm、knout 等）并将这些库定义为我的 main.js 文件中的第一个薄文件。

```
(function(){
    var root = this
    define('jquery', [], function () { return root.jQuery; });
    define('ko', [], function () { return root.ko; });
    ....
})(); 
```

接下来我加载 jquery 移动插件并启动应用程序

```
 ....
    require([
        'Scripts/lib/mobile/jquery.mobile-1.2.0'
    ], function () {
        $(document).on('pageinit' function(){ alert('page init event triggere'); });
        boot();
    }); 
```

我的问题是'pageinit'事件已经在requirejs执行工厂函数时触发，该函数附加到事件中。随后的 pageinit 事件按预期捕获，但在应用程序首次加载时我错过了初始事件。如果我将事件绑定移出 require 模块，它可以正常工作。任何想法我如何注册和处理这些 jqm 事件？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:50:32.077

我遇到了同样的问题，我发现您不应该将 jquery 移动模块加载为全局依赖项，而应直接加载到函数的核心中：

```
require(["jquery"], function($) { 
    console.log("requireJS loaded");

    require(["jquery.mobile"]);

    $( document ).on( 'pagecreate pageinit pageshow', '#mappage', function( event ) {
        var eventType = event.type;
        switch(eventType) {
            case 'pagecreate':
                console.log("mappage : pagecreate");
                break;
            case 'pageinit':
                console.log("mappage : pageinit");
                break;
            case 'pageshow':
                console.log("mappage : pageshow");
                break;
        };
    });
}); 
```

# javascript - Extjs 4 轮播

> ID：14731079
> 
> 赞同：1
> 
> 时间：2013-02-06T14:08:45.920
> 
> 标签：javascript, slideshow, extjs4.1, carousel

我需要一个可以插入到 extjs 4.1 面板中的轮播/幻灯片。我找到了 Ext 核心轮播，但它似乎无法正常工作。

有这样的事吗？如果没有，我如何修改 Ext 核心轮播以适应我的需要？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:53:47.040

我不知道这篇文章是否对你有用：[http ://www.sencha.com/forum/showthread.php?256456-an-Ext-JS-4-carousel-component&p=938789#post938789](http://www.sencha.com/forum/showthread.php?256456-an-Ext-JS-4-carousel-component&p=938789#post938789)

[http://code.google.com/p/ext-js-carousel/wiki/Introduction](http://code.google.com/p/ext-js-carousel/wiki/Introduction)

# java - 如何通过 SOAP 发送图像而不会耗尽内存？

> ID：14731086
> 
> 赞同：1
> 
> 时间：2013-02-06T14:09:12.070
> 
> 标签：java, android, memory, soap, heap-memory

我正在尝试通过 SOAP 从我的 HTC Explorer 发送图像。问题是我遇到了堆内存错误。

> 02-06 12:54:34.638: D/dalvikvm(29895): GC_FOR_MALLOC 释放 <1K, 42% 空闲 9815K/16711K, 外部 616K/4666K, 暂停 32ms
> 02-06 12:54:34.688: E/dalvikvm-heap( 29895)：分配 4177936 字节时内存不足。

我正在测试应用程序的手机有 20MB 的堆，并且图像非常大（~4MB）。

我正在对图像进行处理：

```
Bitmap bitmap = BitmapFactory.decodeFile(imagePath);
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.JPEG, 90, stream);
bitmap.recycle();
byte [] byte_arr = stream.toByteArray();

try {
    stream.close();
    stream = null;
} catch (IOException e) {
    e.printStackTrace();
}

String image_str = Base64.encodeBytes(byte_arr);
byte_arr = null; 
```

....然后我将字符串放入一个属性中以请求信封并发送信封...

```
httpTransport.call(SOAP_ACTION, envelope); 
```

错误发生在最后一行，因为这个 asynctask（做这项工作）超过了堆大小。

任何人都知道如何发送图像而不会内存不足？

这是错误前的最后一次 GC。

> 02-06 12:54:34.638: D/dalvikvm(29895): GC_FOR_MALLOC 释放 <1K, 42% 空闲 9815K/16711K, 外部 616K/4666K, 暂停 32ms
> 02-06 12:54:34.688: E/dalvikvm-heap( 29895)：分配 4177936 字节时内存不足。

# java - Spring请求范围bean

> ID：14731092
> 
> 赞同：16
> 
> 时间：2013-02-06T14:09:24.127
> 
> 标签：java, spring, spring-mvc, lifecycle

如何设置每个请求创建一次的 bean。

我试着这样做：

```
 @Component
   @Scope(value = "request")
   public class TestBean {
        @PostConstruct
        public void init() {
             System.out.println("start request");
        }

        @PreDestroy
        public void onDestroy() {
             System.out.println("ends request");
        }
   } 
```

谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-06T14:33:07.413

试试这个 `@Scope(value="request", proxyMode= ScopedProxyMode.TARGET_CLASS)`

有关更多详细信息，请参阅此[博客文章](http://whyjava.wordpress.com/2010/10/30/spring-scoped-proxy-beans-an-alternative-to-method-injection/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-29T09:23:17.247

您可以通过 xml 配置将 bean 设置为请求范围

```
 <bean id="testBean" class="com.test.TestBean" scope="request">
    <aop:scoped-proxy/>
  </bean> 
```

标签**aop:scoped-proxy** 将用于使用代理注入您的 bean。这是基于 xml 将 bean 设置为请求范围的方法。

# c# - 为标签云加权分配整数

> ID：14731093
> 
> 赞同：-1
> 
> 时间：2013-02-06T14:09:24.270
> 
> 标签：c#, algorithm, distribution, statistics

我有一个要在网页中显示为标签云的单词列表。每个词都有一个相应的“权重”，它决定了这个词应该出现在标签云中的大小。

假设这个数组包含每个单词被用来标记文档的次数，我想使用这些值作为每个单词的权重：

```
int [] ints = new int[] { 1, 2, 4, 3, 2, 1, 4, 2, 1000}; 
```

我希望权重范围在指定范围内，以便渲染代码具有一组可预测的数字来处理，但是我不想简单地标准化这些整数，因为除最后一个之外的所有整数都将基本上为零。

如果发生这种情况，那么标签云中的单个项目会非常大，而所有其他标签都会很小。我正在寻找一种将所有整数压缩到有限范围内同时保持一定程度的多样性的方法。

那么如何转换集合以使最终的大值不会使其他值变得无关紧要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:37:59.377

使用对数对数据进行预处理并降低数字的比例。根据数据值选择对数的底。出于标签云的目的，我认为使用以 2 为底的 log 是最理想的。找到日志后，将结果数字标准化。

# android - 在android上创建地图购物中心（例如）

> ID：14731094
> 
> 赞同：1
> 
> 时间：2013-02-06T14:09:25.263
> 
> 标签：android, map

我从来没有遇到过创建购物中心地图的任务（例如）我做了一个项目，使用单个图像作为地图，图像尺寸最大，但图像质量不够。我知道我需要很多小图像。如果用户滚动或缩放或翻转地图我以编程方式更改图像......

但是，我不知道从哪里开始，请帮助我您的解决方案

# jquery - 如何创建 jqGrid？

> ID：14731098
> 
> 赞同：0
> 
> 时间：2013-02-06T14:09:51.380
> 
> 标签：jquery, jqgrid, jqgrid-formatter

我想让 jqgrid 动态化。所以我有一个变量，即

```
<script type="text/javascript">
$('#ok').click(function(){
    var Str='jQuery("#list").jqGrid({ url:'server.php', datatype: "json", colNames:['...'], colModel:[ {...}], rowNum:10, rowList:[10,20,30], pager: '#pager2', sortname: 'id', viewrecords: true, sortorder: "desc", caption:"JSON Example" });'
});
</script>
<html>
<table id="list"></table>
<div id="pager"></div>
</html> 
```

如何发送 jqgrid 的请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:19:21.113

您可以通过以下方式手动强制重新加载网格：

```
jQuery('#list').jqGrid().trigger('reloadGrid', [{ page: 1}]); 
```

事实上，我可以建议您在页面加载时完全构建网格，将数据类型设置为`datatype: local`，然后在您的点击事件中，您可以

```
jQuery('#list_container').show();
jQuery('#list').jqGrid('setGridParam', { datatype: 'json', url: '/server.php' }).trigger('reloadGrid', [{ page: 1}]); 
```

这样，您的 jqGrid 就坐在那里，隐藏并等待您单击时加载。如果数据类型设置为本地，则在您单击之前不会尝试加载任何信息。

# cakephp - CakePHP 在保存之前需要知道模型 ID

> ID：14731105
> 
> 赞同：2
> 
> 时间：2013-02-06T14:10:10.907
> 
> 标签：cakephp, save

我的情况：我有一个基于几个模型链接在一起的表格。在后台，我有一个保存图像的例程，基于对特定控制器的 ajax 调用，该控制器上传图像并将其实时显示在文本区域上。当我必须第一次保存记录时，我的问题适用，因为 ajax 例程需要知道记录的 ID 才能关联图像，但这只有在调用 save() 之后才会创建。有没有办法在模型保存之前获取 ID？或其他一些解决方法

在此先感谢大家

鲁迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:11:40.143

我认为@RichardAtHome 在这方面提供了很好的意见。我将添加您可能要考虑的第三种解决方案：

Use universally unique identifiers ([UUID](http://en.wikipedia.org/wiki/Universally_unique_identifier)) for that model's primary key. CakePHP offers a way to generate them via the [`String`](http://book.cakephp.org/2.0/en/core-utility-libraries/string.html) utility. So what you would do is generate the id when the page loads with `String::uuid()` and then send it as part of the ajax requests.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T14:19:10.847

几个解决方案：

1.  更改您的工作流程，以便只有在保存主模型（并具有 id）后才能将图像链接到主模型。

2.  在创建主模型之前，不要将图像保存到数据库中。您可以将它们存储在会话中，或者在用户添加更多字段时继续将字段附加到表单的末尾。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T15:05:59.580

**选项1：**

您可以尝试使用 UUID 而不是 INT。这样，您可以只使用 CakePHP 生成一个 ID: `String::uuid();`。

创建它后，您可以填充一个 id 字段，然后使用该 id 保存项目。

如果我在做银行软件或一些关键的事情，我不确定我是否会依赖它的独特性，但是 - 它有十亿分之一的机会被复制，对于普通的网站/软件来说，这似乎就足够了。

**选项2：**

在我们的许多项目中，我们发现有一个非常简单的“创建事物”页面很有帮助，只有一个标题字段，然后，一旦保存，它会立即将它们带到更深入的“编辑”页面，其中他们可以上传文件，保存额外的数据......等等。几乎就像一个pg1，pg2。这样，文件以及任何其他动态 ajax 驱动的数据都将有一个 ID 可以使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T14:19:19.090

可能不会，因为ID将由数据库设置，而不是CakePhp，并且只有在数据库自动增加ID字段后才能知道ID...

不确定您的流程如何，但我想您可以在控制器获取页面时（当 $this->data 为空时）将一个虚拟/空行保存到数据库中而无需所有关联。您知道数据库中的空行有一个 ID，例如“12，NULL，NULL，NULL，NULL，NULL，...”。然后，您可以存储该虚拟记录的 ID（或执行 $this->set("id", $id) 将其传递给视图以在您的 ajax 调用中使用）。在页面的 POST 之后，您可以使用 ID 将所有其他信息存储在虚拟行中，或者在出现故障/用户导航离开时从数据库中删除虚拟行......

# objective-c - 只有 NSMutableArray 的第一个对象存储在 NSUserDefaults

> ID：14731111
> 
> 赞同：3
> 
> 时间：2013-02-06T14:10:36.997
> 
> 标签：objective-c, cordova, archive

我正在尝试存储 UILocalNotification 队列来解决[限制问题](https://stackoverflow.com/questions/14689661/cordova-ios-limit-for-local-notifications)。我使用[了这种方法](https://stackoverflow.com/a/537849/956397)，它会归档和取消归档我的对象，但只有第一个。

如何归档 NSMutableArray 中的所有对象？

### 代码

```
// init/unarchive queue
if (self.queue == nil)
{
    // try loading stored array
    NSUserDefaults *currentDefaults = [NSUserDefaults standardUserDefaults];
    NSData *dataRepresentingSavedArray = [currentDefaults objectForKey:@"LocalNotificationQueue"];
    if (dataRepresentingSavedArray != nil) {
        NSArray *oldSavedArray = [NSKeyedUnarchiver unarchiveObjectWithData:dataRepresentingSavedArray];
        if (oldSavedArray != nil) {
            self.queue = [[NSMutableArray alloc] initWithArray:oldSavedArray];
        }
        else
        {
            self.queue = [[NSMutableArray alloc] init];
        }
    }
    else
    {
        self.queue = [[NSMutableArray alloc] init];
    }
}
// add
[self.queue addObject:notif];

// store queue
[[NSUserDefaults standardUserDefaults] setObject:[NSKeyedArchiver archivedDataWithRootObject:self.queue] forKey:@"LocalNotificationQueue"]; 
```

如果我添加项目 1,2,3。重新启动并加载。我只有3个。

添加 1,2,3。重新启动并加载。我有 3、1、2。

如果重要的话。这是一个 Phonegap/Cordova CDVP 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:41:47.650

后

```
[[NSUserDefaults standardUserDefaults] setObject:[NSKeyedArchiver archivedDataWithRootObject:self.queue] forKey:@"LocalNotificationQueue"]; 
```

你需要打电话

```
[[NSUserDefaults standardUserDefaults] synchronize] 
```

保存用户默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:12:38.547

试试这个，没有`NSKeyedArchiver`：

```
[[NSUserDefaults standardUserDefaults] setObject: self.queue] forKey:@"LocalNotificationQueue"]; 
```

# ios - 视网膜和非视网膜设备当我们在设备中心移动时，左下角的某个点也会移动

> ID：14731116
> 
> 赞同：1
> 
> 时间：2013-02-06T14:10:51.467
> 
> 标签：ios, xcode, opengl-es, retina-display

我们通过使用 gridsize 直接划分纹理，在纹理上创建了一个网格。我们将纹理划分为 10x10。目标是使用手指修改纹理图像。当我们在设备中心移动时，我们在非视网膜设备和视网膜设备上遇到问题，左下角的某些点也会移动。不知道为什么会这样。

```
- (id)init 
{
    // Apple recommends to re-assign "self" with the "super" return value
    if( (self=[super init])) 
    {    
        [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];

        [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0     swallowsTouches:YES];
        [CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];

        if ([CocosDistort isRetinaDisplay]) 
            originalImage = [UIImage imageNamed:@"IMG_1968-hd.PNG"];

        else
            originalImage = [UIImage imageNamed:@"IMG_1968.PNG"];

        texture2D = [[CCTexture2D alloc] initWithImage:originalImage];

        [self body_init];
        self.isTouchEnabled = YES;
    }
    return self;
}

- (void)draw 
{
    glDisableClientState(GL_COLOR_ARRAY);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glColor4ub(224,224,244,200);

    [self body_redraw];

    glBlendFunc(CC_BLEND_SRC, CC_BLEND_DST);
    glEnableClientState(GL_COLOR_ARRAY);
}

- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event 
{
    isFirstTouch=YES;
    CGPoint location = [self convertTouchToNodeSpace: touch];

    if ([CocosDistort isRetinaDisplay]) 
    {
        mousex = (location.x * 2);
        mousey = (location.y * 2);
    }
    else
    {
        mousex = location.x ;
        mousey = location.y ;
    }

    firstPoint=location;
    grab = [self body_grab:mousex:mousey];
    return YES;
}

- (void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event 
{
    isFirstTouch=NO;
    CGPoint location = [self convertTouchToNodeSpace: touch];

    mousex1 = 0.0;
    mousey1 = 0.0;

    if ([CocosDistort isRetinaDisplay]) 
    {
        mousex1 =  (location.x * 2) - mousex;
        mousey1 =  (location.y * 2)  - mousey ;
    }
    else
    {
        mousex1 =  location.x  - mousex;
        mousey1 =  location.y  - mousey ;
    }

    if ([CocosDistort isRetinaDisplay]) 
    {
        mousex = (location.x * 2);
        mousey = (location.y * 2);
    }
    else
    {
        mousex = location.x ;
        mousey = location.y ;
    }
    [self body_dynamics:mousex:mousey];
}

- (void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event 
{
    grab = -1;
}

- (void)body_dynamics:(int)x:(int)y 
{
    if (mass[grab].x[0] > x && mass[grab].x[1] > y) 
    {
        grab2 = grab - GRID_SIZE_X;
        grab3 = grab2 - 1;
        grab4 = grab  - 1;
    }
    if (mass[grab].x[0] > x && mass[grab].x[1] < y) 
    {
        grab2 = grab - GRID_SIZE_X;
        grab3 = grab2 + 1;
        grab4 = grab  + 1;
    }
    if (mass[grab].x[0] < x && mass[grab].x[1] < y) 
    {
        grab2 = grab + GRID_SIZE_X;
        grab3 = grab2 + 1;
        grab4 = grab  + 1;
    }
    if (mass[grab].x[0] < x && mass[grab].x[0] > y) 
    {
        grab2 = grab + GRID_SIZE_X;
        grab3 = grab2 - 1;
        grab4 = grab  - 1;
    }
    if (grab != -1 && !mass[grab].nail &&!isFirstTouch)
    {
        mass[grab].x[0]  =  mass[grab].x[0] + mousex1;
        mass[grab].x[1]  =  mass[grab].x[1] + mousey1;
        mass[grab].x[2]  = -(CLIP_FAR - CLIP_NEAR)/4.0;

        mass[grab2].x[0] =  mass[grab2].x[0] + mousex1;
        mass[grab2].x[1] =  mass[grab2].x[1] + mousey1;
        mass[grab2].x[2] = -(CLIP_FAR - CLIP_NEAR)/4.0;

        mass[grab3].x[0] =  mass[grab3].x[0] + mousex1;
        mass[grab3].x[1] =  mass[grab3].x[1] + mousey1;
        mass[grab3].x[2] = -(CLIP_FAR - CLIP_NEAR)/4.0;

        mass[grab4].x[0] =  mass[grab4].x[0] + mousex1;
        mass[grab4].x[1] =  mass[grab4].x[1] + mousey1;
        mass[grab4].x[2] = -(CLIP_FAR - CLIP_NEAR)/4.0;
    }
}

- (int)body_grab:(int)x:(int)y 
{
    float dx[2];
    float d;
    float min_d;
    float min_i;
    int i;

    for (i = 0; i < GRID_SIZE_X*GRID_SIZE_Y; i++)
    {
        dx[0] = mass[i].x[0] - x;
        dx[1] = mass[i].x[1] - y;
        d = sqrt(dx[0]*dx[0] + dx[1]*dx[1]);
        if (i == 0 || d < min_d)
        {
            min_i = i;
            min_d = d;
        }
    }
        return min_i;
}

- (void)body_redraw 
{
    int k;
    int i, j;
    if(mass == NULL) 
        return;

    glBindTexture(GL_TEXTURE_2D, [texture2D name]);

    k = 0;
    for (i = 0; i < GRID_SIZE_X - 1; i++)
    {
        for (j = 0; j < GRID_SIZE_Y - 1; j++)
        {
            GLfloat vertices[]= {
                mass[k].x[0],mass[k].x[1],mass[k].x[2],
                mass[k + 1].x[0],mass[k + 1].x[1],mass[k + 1].x[2],
                mass[k + GRID_SIZE_Y + 1].x[0],mass[k + GRID_SIZE_Y + 1].x[1],
       mass[k + GRID_SIZE_Y + 1].x[2],
                mass[k + GRID_SIZE_Y].x[0],mass[k + GRID_SIZE_Y].x[1],mass[k + GRID_SIZE_Y].x[2]
            };
            GLfloat tex[]={
                mass[k].t[0], mass[k].t[1],
                mass[k + 1].t[0], mass[k + 1].t[1],
                mass[k + GRID_SIZE_Y + 1].t[0], mass[k + GRID_SIZE_Y + 1].t[1],
                mass[k + GRID_SIZE_Y].t[0], mass[k + GRID_SIZE_Y].t[1]
            };

            glVertexPointer(3, GL_FLOAT, 0, vertices);
            glTexCoordPointer(2, GL_FLOAT, 0, tex);
            glDrawArrays(GL_LINE_STRIP, 0,4);

            k++;
         }
         k++;
    }
}

- (void)body_init 
{
    GLint width = texture2D.contentSizeInPixels.width;
    GLint height = texture2D.contentSizeInPixels.height;
    int i, j, k;

    if (mass == NULL)
    {
        mass = (MASS *) malloc(sizeof(MASS)*GRID_SIZE_X*GRID_SIZE_Y);
        if (mass == NULL)
        {
            fprintf(stderr, "body: Can't allocate memory.\n");
            exit(-1);
        }
    }

    k = 0;
    for (i = 0; i < GRID_SIZE_X; i++)
        for (j = 0; j < GRID_SIZE_Y; j++)
        {
            mass[k].nail = (i == 0 || j == 0 || i == GRID_SIZE_X - 1
                            || j == GRID_SIZE_Y - 1);//value is 0/1

            mass[k].x[0] = i/(GRID_SIZE_X - 1.0)*width;
            NSLog(@"mass[%d].x[0]:: %f",k,mass[k].x[0]);

            mass[k].x[1] = j/(GRID_SIZE_Y - 1.0)*height;
            NSLog(@"mass[%d].x[1]:: %f",k,mass[k].x[1]);

            mass[k].x[2] = -(CLIP_FAR - CLIP_NEAR)/4.0;
            NSLog(@"mass[%d].x[2]:: %f",k,mass[k].x[2]);

            mass[k].v[0] = 0.0;
            mass[k].v[1] = 0.0;
            mass[k].v[2] = 0.0;

            mass[k].t[0] = i/(GRID_SIZE_X - 1.0);
            mass[k].t[1] = j/(GRID_SIZE_Y - 1.0);

            k++;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:55:22.903

我通过修改我的触摸移动方法解决了这个问题：

```
- (void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event 
{
    isFirstTouch=NO;
    CGPoint location = [self convertTouchToNodeSpace: touch];//[touch locationInView:touch.view];//

    int gridSizeX2 = 20;

    if ((location.x < firstPoint.x + gridSizeX2 && location.y < firstPoint.y + gridSizeX2)
    && (location.x > firstPoint.x - gridSizeX2 && location.y > firstPoint.y - gridSizeX2))
   {
        mousex1 = 0.0;
        mousey1 = 0.0;

        if ([CocosDistort isRetinaDisplay]) 
        {
            mousex1 =  (location.x * 2) - mousex;
            mousey1 =  (location.y * 2)  - mousey ;
            mousex = (location.x * 2);
            mousey = (location.y * 2);
        }
        else
        {
            mousex1 =  location.x  - mousex;
            mousey1 =  location.y  - mousey ;
            mousex = location.x ;
            mousey = location.y ;
        }
        mousex1 = mousex1 > 0 ? 1:-1;
        mousey1 = mousey1 > 0 ? 1:-1;

        [self body_dynamics:mousex:mousey];
    }    
} 
```

# sql - 如何检索列中值的一部分

> ID：14731117
> 
> 赞同：0
> 
> 时间：2013-02-06T14:10:52.160
> 
> 标签：sql, sql-server-2008, plsql

**更正**- 我只需要选择 WORK 值，列中的每个结果集都将包含逗号分隔的值，如下所示。

“生病 0.08，工作 0.08”或“生病 0.08，工作 0.08”

我只需要从中选择 WORK 0.08。

我对 SQL 很陌生

我正在使用以下脚本来获得一些结果；

```
select Work.Work_summary, Work.emp_id
  from Work 
```

一切正常。但第一列的值如下：

```
WORK 08.57, SICK 08.56 (Some columns)
SICK 07.80, WORK 06.80 , OT 02.00 (Some columns) 
```

我怎样才能只检索只有 WORK% 值的列，如果没有 WORK 值，结果应该是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:54:31.977

然后使用：这将只给出工作摘要包含工作内容的结果。

```
select Work.Work_summary, Work.emp_id
  from Work where contains(work.Work_summary ,'work'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:36:39.270

```
select replace(Work_summary,",","") as work_summary
from Work
where upper(Work_summary) like '%WORK%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:14:03.957

```
select Work_summary, emp_id 
from Work
where Work_summary like '%WORK%' 
```

这将返回`Work`表中`Work_summary`column 包含单词的行`WORK`。有关更多详细信息，请参阅[文档](http://msdn.microsoft.com/en-us/library/ms179859.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T14:16:47.947

包含比喜欢更快。

```
SELECT Work_summary, emp_id  FROM Work WHERE CONTAINS(Work_summary, 'WORK'); 
```

# android - 保持 ListView CursorAdapter 数据更新的推荐模式

> ID：14731119
> 
> 赞同：0
> 
> 时间：2013-02-06T14:11:01.267
> 
> 标签：android, android-listview, android-cursoradapter

我有一个代表待办事项列表的 SQLite 表。每行都有一个`_id`、`title`和一个`completed`标志。我有一个`ListView`，其中每一行都有标题和一个映射到`completed`标志的复选框。而且我有一个自定义`CursorAdapter`设置复选框状态`bindView`。复选框有一个`OnClick`回调，当它被切换时更新数据库状态。

问题是当一个项目被滚动并返回屏幕时复选框会丢失状态，因为视图是从过时的光标数据重建的。

我知道这里的首选解决方案是每次数据更改时转储并重新获取游标。这让我觉得非常低效。当一个复选框被切换时，实际上我的结果集中有一点数据发生了变化。扔掉整个光标感觉有点矫枉过正。

我尝试过的另一种方法是缓存`completed`标志，在切换项目时更新数据库和缓存，然后在`bindView`. 这行得通，但感觉很笨拙。

我在这里错过了什么吗？有没有比上面的更好的模式？我是否高估了每次发生微小变化时使光标过期的成本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:33:59.550

我不会担心基于用户输入的光标刷新效率。这是一个恒定的成本，你不会注意到它。

另一种方法是覆盖 setViewValue 并手动设置这些复选框。您可以在下面找到有关如何做到这一点的想法。

```
public class MyViewBinder implements SimpleCursorAdapter.ViewBinder {

  public boolean setViewValue(View view, Cursor cursor, int columnIndex) {

    int viewId = view.getId();
    switch (viewId) {
        case R.id.flag:

            // Sett the flag based on e.g. an array you have with the states

            return true;
            break;

        default:
            // There is no specific way of showing this, hence go for default
            return = false;
    }
  }
} 
```

# java - 找不到类 'org.json.simple.parser.JSONParser' - Android

> ID：14731122
> 
> 赞同：1
> 
> 时间：2013-02-06T14:11:06.100
> 
> 标签：java, android

我在一个包中有一个 Android 活动说 com.blah.blah1 和另一个包中有一个 java 类说 com.blah.blah2 ，我试图从活动中访问 java 类，但它抛出错误

> 02-06 14:35:03.360: E/dalvikvm(580): 找不到类 'org.json.simple.parser.JSONParser'，引用自方法 com.blah.blah2.Login.login

请帮忙解决

*   我正在使用日食
*   我的罐子在 libs 文件夹中
*   我已将 json jar 添加到构建路径
*   我正在使用 jar json-simple-1.1.jar
*   我在 Android 4.0.3 下工作
*   eclipse java编译器1.6版

请在下面找到活动和java类供您参考

```
public class Chat_NewActivity extends Activity {

    private String className = "Chat_NewActivity";

    /** Asyn parameters */
    private String response;

    /** login() parameters */
    LinkedHashMap<String,String> parameters ;
    String responseToAsync = null;
    UrlRequestAndResponse request = null;
    static ResponseParameters param = null;
    static String userId = null;
    static String secureKey = null;
    static String status = null;
    static String sessionId = null;

    /** Called when the activity is first created and loads main.xml content */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        Log.i(className, "Creating mail layout for the app...");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Log.i(className, "Created");
    }

    /** action for items selected in Preferences menu */
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
        case R.id.settings_menu:
            Intent settingsActivity = new Intent(getBaseContext(),
                    Chat_PreferenceActivity.class);
            startActivity(settingsActivity);
            return true;
        default:
            return super.onOptionsItemSelected(item);
        }
    }

    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return true;
    }

    /** action calling on Start Chat button is clicked */
    public void startChat(View view) {
        Log.i(className, "Start Chat button is clicked");
        Log.i(className, "performing action for staring chat");
        Log.i(className, "performing user validation");
        SharedPreferences sharedPref = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
        Chat_AppInfo.pref_email = sharedPref.getString("email",null);
        if (Chat_AppInfo.pref_email != null && Chat_AppInfo.pref_email.matches("[a-zA-Z0-9._-]+@[a-z]+.[a-z]+") 
                && Chat_AppInfo.pref_email.length() > 0) {

            /** Intent i = new Intent(getApplicationContext(), AppActivity.class); */

            Chat_AppInfo.pref_firstName = sharedPref.getString("firstName",null).toString();
            Chat_AppInfo.pref_lastName = sharedPref.getString("lastName",null).toString();
            EditText getsubject = (EditText) findViewById(R.id.subject);
            Chat_AppInfo.pref_subject = getsubject.getText().toString();
            Log.i(className, "first name : "+Chat_AppInfo.pref_firstName);
            Log.i(className, "last name : "+Chat_AppInfo.pref_lastName);
            Log.i(className, "last name : "+Chat_AppInfo.pref_email);
            Log.i(className, "subject : "+Chat_AppInfo.pref_subject);
            if(Chat_AppInfo.pref_firstName != null || 
                    Chat_AppInfo.pref_lastName != null ||
                    Chat_AppInfo.pref_subject.length() > 0) {
                Log.i(className, "validation completed!!!");
                checkNetworkConnection();
                /**i.putExtra(AppInfo.firstName, get_FirstName_From_Pref);
                i.putExtra(AppInfo.lastName, get_LastName_From_Pref);
                i.putExtra(AppInfo.email, get_MailId_From_Pref);
                i.putExtra(AppInfo.connection_Url, get_MailId_From_Pref);
                i.putExtra(AppInfo.subject, subject);
                startActivity(i);*/
            } else {
                Toast.makeText(getApplicationContext(), "Insufficient Credentials", Toast.LENGTH_SHORT).show();
            }
        } else {
            Toast.makeText(getApplicationContext(), "E-mail is Invalid!!!", Toast.LENGTH_SHORT).show();
        }
    }

    protected void checkNetworkConnection() {
        Log.i(className, "Checking for Network / wi-fi connection!!!");
        ConnectivityManager connMgr = (ConnectivityManager) 
        getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
        if (networkInfo != null && networkInfo.isConnected()) {
            Log.i(className, "Network connection available!!!");
            new AsyncConnectionEstablisher().execute(Chat_AppInfo.service_url+"LoginAction");
        } else {
            Log.i(className, "Network connection not available!!!");
            Toast.makeText(getApplicationContext(), "Network Connection Not Available", Toast.LENGTH_SHORT).show();
        }
    }

    private class AsyncConnectionEstablisher extends AsyncTask<String, Void, String> {

        protected String doInBackground(String... urls) {
            // params comes from the execute() call: params[0] is the url.
            Log.i(className, "Performing asynchronous connection...");
            String output = null;
            for (String url : urls) {
                output = getOutputFromUrl(url);
            }
            return output;
        }

        private String getOutputFromUrl(String url) {
            String output = null;
            try {
                Login createSessionObj = new Login();
                createSessionObj.login(url);
                output = createSessionObj.sessionId(Chat_AppInfo.service_url+"JoinAction");
                //output = login(url);
            } catch (Exception e) {
                e.printStackTrace();
            }
            return output;
        }
        // onPostExecute displays the results of the AsyncTask.
        protected void onPostExecute(String result) {
            Log.i(className, "response is : "+result);
        }
    }
}

import java.io.IOException;
import java.util.LinkedHashMap;

import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.json.simple.parser.ParseException;

import android.util.Log;

public class Login {

    private String className = "Login";
    LinkedHashMap<String,String> parameters ;
    String responseToAsync = null;
    UrlRequestAndResponse request = null;
    String response;
    static ResponseParameters param = null;
    static String userId = null;
    static String secureKey = null;
    static String status = null;
    static String sessionId = null;

    public void login(String url) {
        Log.i(className, "Calling login action with service URL : "+url);
        parameters = new LinkedHashMap<String,String>();
        parameters.put("firstname", Chat_AppInfo.pref_firstName);
        parameters.put("lastname", Chat_AppInfo.pref_lastName);
        parameters.put("email", Chat_AppInfo.pref_email);
        parameters.put("subject", Chat_AppInfo.pref_subject);

        request = new UrlRequestAndResponse();
        request.setUrlRequestParameters(url, parameters, null);
        request.convertStreamToJson();
        response = request.getUrlResponseJson();
        try {
            JSONObject json = (JSONObject)new JSONParser().parse(response);
            param.setUserId((String) json.get("userId"));
            param.setSecureKey ((String) json.get("secureKey"));
            param.setStatus((String) json.get("status"));

        } catch (NullPointerException e) {
            System.out.println("Properly set the setUrlRequestParameters(url, parameters, header) , convertStreamToJson() in the request...");
        } catch (ParseException e) {
            System.out.println("Parse the JSON String properly... Or Check the Servlet Response is in JSON format...");
        }

        try {
            userId  = param.getUserId();
            secureKey = param.getSecureKey();
            status = param.getStatus();
            Log.i(className, "{\"userId\":\""+userId+"\",\"secureKey\":\""+secureKey+"\", \"status\":\""+status+"\"} ");
            //sessionId(Chat_AppInfo.service_url+"JoinAction");
        } catch (NullPointerException e) {
            System.out.println("Check the parameters in response...");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:10:19.103

你确定你`org.json.simple.parser.JSONParser`的应用程序中包含了课程吗？因为它似乎不在 android 的默认 json 包中[http://developer.android.com/reference/org/json/package-summary.html](http://developer.android.com/reference/org/json/package-summary.html)所以也许你应该尝试手动包含这些类[http:// code.google.com/p/json-simple/source/browse/trunk/src/org/json/simple/parser/JSONParser.java?r=73](http://code.google.com/p/json-simple/source/browse/trunk/src/org/json/simple/parser/JSONParser.java?r=73)

# search - Solr 4 中模糊搜索的语法

> ID：14731129
> 
> 赞同：1
> 
> 时间：2013-02-06T14:11:33.487
> 
> 标签：search, drupal, solr, syntax, fuzzy-search

我一直在尝试为我们的 Solr 4.1 支持的搜索启用模糊搜索，但我只能在网上找到：

1-如何在默认的 lucene 查询语法中执行此操作，这在我的情况下没有帮助，
2-dismax 不支持它和
3-edismax 将或应该支持它

但是，我找不到任何关于如何以 edismax 查询格式使用它的文档，甚至在使用运算符 ~ 来定义倾斜因子的查询语法的默认 edsimax 页面上也找不到。我确实尝试根据一些在线链接在 qf 参数中指定它，但这没有用，我还假设 Solr 4.1 默认使用 edismax。

因此，如果有人知道它应该如何工作或什至支持它，任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T23:50:01.200

这对我有用。

尝试在您的 schema.xml 中添加此 fieldType。

这是不区分大小写的，适用于西班牙语单词，但改变它也应该对你有用。

```
<fieldType name="text_es_fuzzy" class="solr.TextField" positionIncrementGap="100">
  <analyzer>
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="lang/stopwords_es.txt" format="snowball" enablePositionIncrements="true"/>
  </analyzer>
</fieldType> 
```

之后，当您执行查询时，只需在搜索字符串的末尾添加“~0.5”。“0.5”是您可以选择的自定义值。这个值决定了你的搜索有多“模糊”。当该值接近零时，结果将“更加模糊”，反之亦然。

# linux - 当“参数列表太长”时如何删除所有超过 3 天的文件？

> ID：14731133
> 
> 赞同：89
> 
> 时间：2013-02-06T14:11:44.830
> 
> 标签：linux, file-io, resource-cleanup

我有一个日志文件目录，其中包含 82000 个文件和目录（大约一半）。

我需要删除所有超过 3 天的文件和目录。

在一个包含 37000 个文件的目录中，我可以这样做：

```
find * -mtime +3 -exec rm {} \; 
```

但是对于 82000 个文件/目录，我得到了错误：

> /usr/bin/find：参数列表太长

**如何解决此错误，以便删除所有超过 3 天的文件/目录？**

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-02-06T14:14:00.377

删除*当前目录中的所有文件**和*目录：

 *```
find . -mtime +3 | xargs rm -Rf 
```

或者，更符合 OP 的原始命令：

```
find . -mtime +3 -exec rm -Rf -- {} \; 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2014-06-02T18:29:03.863

还可以使用：

```
find . -mindepth 1 -mtime +3 -delete 
```

不删除目标目录

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-12-03T06:28:58.433

原始问题的另一种解决方案，尤其是。如果您只想删除文件夹中的一些旧文件，这很有用，就像这样：

```
find . -name "*.sess" -mtime +100 
```

等等.. 引号阻止 shell 通配符，从而允许您“找到”数百万个文件 :)*

# jsf - JSF 1.2 响应捕获，包括资源

> ID：14731135
> 
> 赞同：0
> 
> 时间：2013-02-06T14:11:48.280
> 
> 标签：jsf, resources, richfaces, wrapper

我将 JSF 1.2 与 RichFaces 一起使用。是否可以模仿 Web 浏览器客户端的“另存为”？更准确地说，我想在页面上添加一个“下载 zip”。目的是生成一个 zip 存档，其中包含 HTML 生成的页面以及所有必要的文件，以便以正确的布局打开该页面。

我过去成功地通过`HttpResponseWrapper`. 但是一旦页面包含 RichFaces 组件，就需要一些 JS 和图像才能正确显示。我怎样才能让这些资源将它们添加到 zip 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:43:40.260

使用像[Jsoup](http://jsoup.org)这样的 HTML 解析器。它可以通过类似 jQuery 的 CSS 选择器轻松找到 CSS/JS/image 元素，并返回资源 URL，以便您可以单独下载它们。

```
InputStream input = new URL(url).openStream();
// ... Save webpage itself.

Document document = Jsoup.parse(savedWebPage, "UTF-8", url);

for (Element stylesheet : document.select("link[rel=stylesheet]")) {
    InputStream input = new URL(stylesheet.absUrl("href")).openStream();
    // ... Save individual stylesheet file.
}

for (Element script : document.select("script[src]")) {
    InputStream input = new URL(script.absUrl("src")).openStream();
    // ... Save individual script file.
}

for (Element img : document.select("img[src]")) {
    InputStream input = new URL(img.absUrl("src")).openStream();
    // ... Save individual image file.
} 
```

不考虑 CSS 背景图像。您可以考虑在每个单独的 CSS 文件上使用类似[SAC的 CSS 解析器。](http://www.w3.org/Style/CSS/SAC/)

# google-chrome - 带有计时器和自动刷新的 URL 幻灯片插件/插件/应用程序

> ID：14731146
> 
> 赞同：0
> 
> 时间：2013-02-06T14:12:30.943
> 
> 标签：google-chrome, firefox, plugins, add-on

我正在寻找任何网络浏览器的插件/附加组件，它可以让我开始各种网站的幻灯片放映。例如，显示[http://page1.com](http://page1.com) 10 秒，然后显示[http://page2.com](http://page2.com) 10 秒，然后再次显示 page1.com，依此类推，循环。

我发现插件就是这样做的，Firefox 的“标签幻灯片”和 Chrome 的另一个类似插件。

但是，页面要再次显示时需要刷新。

是否有一个插件/附加组件或者为什么没有一个独立的 Windows 应用程序可以做到这一点？

提前致谢，

*   W

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T00:21:58.323

Firefox 有一个名为 Flem 的扩展程序可以很好地做到这一点。[https://addons.mozilla.org/en-US/firefox/addon/flem/](https://addons.mozilla.org/en-US/firefox/addon/flem/)

# jquery - jQuery 数据表自动刷新

> ID：14731147
> 
> 赞同：0
> 
> 时间：2013-02-06T14:12:34.203
> 
> 标签：jquery, python, datatables, web2py

我正在更新数据表 ( [http://www.datatables.net/](http://www.datatables.net/) ) 中的一行，但**成功更新后该表不会刷新。更改被传输到数据库，但用户仍然看到旧数据**。有没有办法在 makeEditable() 函数中启用自动刷新？我正在使用 Web2Py (Python) 顺便说一句..

我的 jQuery 视图：

```
 $(document).ready( function () {
var oTable = $('#data_table_wrapper').dataTable({
        "sDom": 'R<"H"lfr>t<"F"ip<',
        "bJQueryUI": true,
        "sPaginationType": "full_numbers",
        "aoColumn": [
                {},
                {},
                {}
                    ]       
    }).makeEditable({
        sUpdateURL: "update_some_row"
    }); 
```

});

我的控制器功能：

```
def update_some_row():
    some = db.some(request.vars["id"]) or redirect(URL('error'))
    column = {request.vars["columnName"].lower():request.vars["value"]}
    some.update_record(**column)
    return 'Row has been updated' 
```

有没有类似的东西

```
sAutoRefresh: "true" 
```

在 makeEditable() 函数中？感谢您的任何提示和建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:07:11.923

愚蠢的我！我应该从更改字段时输入的函数返回相同的值。所以在将控制器部分更改为

```
def update_some_row():
    some = db.some(request.vars["id"]) or redirect(URL('error'))
    column = {request.vars["columnName"].lower():request.vars["value"]}
    some.update_record(**column)
    return request.vars["value"] 
```

它开始正常工作。

# python - Python如何编辑存储在列表中的namedtuple中的数据？

> ID：14731157
> 
> 赞同：2
> 
> 时间：2013-02-06T14:12:49.950
> 
> 标签：python, arrays, struct, namedtuple

```
import struct
from collections import namedtuple

StructPageNum = namedtuple('FDResult', ['DeviceID', 'PageNum','PicSize','PicData'])
PageNumList = []

Node = StructPageNum(DeviceID='NR09', PageNum=[],PicSize=100,PicData='')
PageNumList.append(Node)

PageNumList[0].PicData = 'hello' //how to do at here? 
```

## 问题

如何编辑 PicData 的值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T14:16:40.977

在我看来，您可以使用命名元组的[`_replace`](http://docs.python.org/2/library/collections.html#collections.somenamedtuple._replace)方法很容易地做到这一点：

```
PageNumList[0] = PageNumList[0]._replace(PicData='hello') 
```

这会在您的文件中添加一个*新的 namedtuple*，`PageNumList`它看起来很像旧的 namedtuple，只是我们更改了`PicData`“属性”。你不能编辑你已经拥有的命名元组，因为`namedtuple`s 是不可变的（就像它们的未命名对应物一样`tuples`：）

# mysql - 如何构造这个 sql 查询来创建以下新表？

> ID：14731161
> 
> 赞同：0
> 
> 时间：2013-02-06T14:12:58.633
> 
> 标签：mysql

假设我有以下表格：

表A

```
a_name | age | country
Jordan | 5 | Germany
Molly | 6 | Spain
Paris | 7 | France 
```

表B

```
b_name | age | country
Kyle | 5 | Germany
Bob | 6 | Spain
Bob | 7 | Spain
Stephen | 7 | France
Kyle | 9 | France
Mario | 2 | Mexico 
```

我想让它可以生成一个包含以下内容的 tableC：

```
id (auto increment primary key) | age | country | country_marker
1 | 5 | Germany | 1
2 | 6 | Spain | 2
3 | 7 | France | 3
4 | 7 | Spain | 2
5 | 8 | France | 3
6 | 9 | France | 3
7 | 2 | Mexico | 4 
```

对于新表：

*   仅采用任何唯一的“年龄，国家”对并将它们放入表C中，“国家标记”会根据不同的“国家”自动分配递增的唯一数字

请注意，没有国家表，因为 tableC 中的“国家”只是基于 tableA 中的任何国家，而 tableB 和 country_marker 只是系统生成的标识符，用于指示表中的唯一国家/地区。输出表 C“id 和国家标记”的顺序无关紧要，只要符合上面的项目符号即可。

我已经痛苦地尝试使用 MySQL 游标来生成它，并且想知道它是否可能/我可以使用的一些 SQL 查询或一组查询是否会比使用游标更快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:18:13.843

我会通过首先在 phpmyadmin 中创建表 C 来解决这个问题。然后我会编写一个查询来从表 A 和 B 中提取我想要放入 C 的信息。然后，在 phpmyadmin 中，我会将查询结果导出到本地计算机上的 .sql 文件中。我会打开 .sql 文件对 INSERT 语句进行必要的修改，以便可以将 .sql 文件中的数据导入表 C。

这并不是最有效的方法，但它似乎是绝对可行的技术最少的方法。

# java - 从批处理运行时如何让java输出到日志？

> ID：14731162
> 
> 赞同：5
> 
> 时间：2013-02-06T14:13:00.290
> 
> 标签：java, shell, batch-file

我有一个名为“Ares.jar”的 java 文件，它通过 Windows 计划任务每​​ 5 分钟运行一次，批处理调用：

```
java -jar Ares.jar >> Ares.log 
```

我没有看到任何错误输出，是否有某种方法可以使错误（system.err.println / exception.printStackTrace(); ）转到文件？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-06T14:17:00.010

```
java -jar Ares.jar > Ares.log 2>&1 
```

该命令的第二部分将 stderr 重定向到 stdout，确保两者出现在同一个文件中。

如果您想在单独的文件中使用常规日志和错误日志，只需使用：

```
java -jar Ares.jar > Ares.log 2>Ares.error.log 
```

您可以从 Microsoft 获得的文档中获得所有可能的全部详细信息： [http ://technet.microsoft.com/en-us/library/bb490982.aspx](http://technet.microsoft.com/en-us/library/bb490982.aspx)

# java - mvn:deploy 无法调用 tomcat 管理器

> ID：14731164
> 
> 赞同：0
> 
> 时间：2013-02-06T14:13:01.010
> 
> 标签：java, jakarta-ee, spring-mvc, maven-2, maven-plugin

我正在使用 mvn2，当我尝试使用`mvn:deploy`命令部署我的项目时出现错误**无法调用 Tomcat 管理器**连接被拒绝：下面的连接是我的 pom 配置

```
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat6-maven-plugin</artifactId>
    <version>2.0</version>
    <configuration>
        <url>http://localhost/manager</url>
        <path>/scgtwitter</path>
        <server>QA</server>
    </configuration>
</plugin> 
```

可能的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:20:20.923

该错误表明要么tomcat 没有启动并运行（所以启动它），或者你的配置可能是错误的。虽然我没有使用过那个特定的插件，但我使用了一个类似的插件，我想主体基本上是相同的。这就是我所拥有的：

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>tomcat-maven-plugin</artifactId>
  <configuration>
    <server>localTomcat</server>
    <path>/</path>
  </configuration>
</plugin> 
```

在 ~/.m2/settings.xml 中，我提供了 tomcat 管理器应用程序的用户名/密码：

```
<servers>
  <server>
    <id>localTomcat</id>
    <username>tomcat</username>
    <password>tomcat</password>
  </server>
</servers> 
```

运行与

```
mvn tomcat:deploy 
```

或者

```
mvn tomcat:redeploy 
```

# c# - ZMQ 通过 C# - clrzmq 绑定 Windows XP 失败但在 Win7 上正常

> ID：14731167
> 
> 赞同：5
> 
> 时间：2013-02-06T14:13:14.900
> 
> 标签：c#, zeromq

我一直在开发一个使用 ZMQ (2.2) 作为主要通信层的平台。本周早些时候，我决定接受 zeromq 网站上的建议并升级到最新的稳定版本 3.2.2

然而，在经历了更新到新 API 的痛苦之后，我非常失望地发现 clrzmq 绑定似乎存在问题，因为它无法在 Windows XP (SP3) 机器上加载 libzmq 库。我不断收到 SEHException 异常？！

我只是想知道那里是否有人遇到过同样的问题，是否有解决方法（甚至更好的修复方法）？

干杯:)

**编辑** 只是为了澄清一下，库加载得很好，我知道这一点，因为上下文的创建没有任何问题。在上下文中调用 CreateSocket 方法时会出现问题...请参阅下面的代码片段

```
 ZmqContext context = ZmqContext.Create();

        ZmqSocket socket = context.CreateSocket(SocketType.REQ); 
```

按照 Jakob 的建议添加跟踪后，我得到以下输出

```
Assertion failed: Connection refused (..\..\..\src\signaler.cpp:310) 
```

任何想法这意味着什么？

**编辑** 我还应该提到这个问题**不会**发生在所有的 XP 机器上，**只有其中一些**。我一直在试图弄清楚可以工作的机器和不工作的机器之间有什么区别。如果不知道这一点，升级并发布到生产环境中风险太大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:28:45.050

查看您提供的示例，您正在绑定到**REQ**套接字（请求，即客户端套接字），并且还使用通配符绑定 REQ 套接字。我不确定这将如何发展，但对我来说这没有意义。我认为这不受支持，但我找不到或不记得任何有关绑定到 REQ 套接字的文档。很可能会发生奇怪的事情。

**REP**（响应）套接字是 REQ/REP 设置（请求/响应）的“服务器”端，服务器`bind`端使用 REP 套接字连接到端点，或者显式指定“tcp://127.0.0.1:5555 " 或使用通配符，例如“所有接口”、“tcp://*:5555”。然后，客户端将`connect`使用 REQ 套接字连接到明确的端点地址，“tcp://127.0.0.1:5555”，没有通配符。

服务器会这样做：

```
ZmqContext context = ZmqContext.Create();
ZmqSocket socket = context.CreateSocket(SocketType.REP);
socket.Bind("tcp://*:5501"); 
```

而客户是这样的：

```
ZmqContext context = ZmqContext.Create();
ZmqSocket socket = context.CreateSocket(SocketType.REQ);
socket.Connect("tcp://127.0.0.1:5501"); 
```

除了这些问题，您还应该确保防火墙没有阻塞，并确保端口没有被使用（例如使用 NETSTAT 命令）。

对于 ZeroMq 寻址规则，请参阅[zmq_tcp API 文档](http://api.zeromq.org/3-2%3azmq-tcp)，对于套接字，请参阅[zmq_socket API 文档](http://api.zeromq.org/3-2%3azmq-socket)。

# javascript - 使用 Javascript 即时创建嵌套对象

> ID：14731168
> 
> 赞同：0
> 
> 时间：2013-02-06T14:13:19.057
> 
> 标签：javascript

我是来自 Python 背景的 Javascript 新手，使用自定义字典和`.get`方法很容易创建嵌套数据。我想要做的是创建一个艺术家数据的嵌套对象，它采用这种形式：`artistDict[artist][albumName] = albumYear`. 我需要通过迭代专辑对象的可迭代来动态创建这个对象。这是我目前正在使用的代码：

```
albumDict = {};
albums.forEach(function(item){
albumDict[item.artist][item.name] = item.year;
});
document.write(albumDict); 
```

这不起作用，这并不奇怪，因为这样的东西在 Python 中也不起作用。但是，在 Python 中，我可以使用一种`.get`方法来检查一个条目是否在字典中，如果没有则创建它——是否有类似的东西，或者我可以使用任何其他实用程序来实现我在 JS 中的目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T14:14:46.577

这应该有效：（如果该属性不存在，您应该初始化它..）

```
albumDict = {};
albums.forEach(function(item){
    albumDict[item.artist] = albumDict[item.artist] || {};
    albumDict[item.artist][item.name] = item.year;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T14:15:41.080

试试这个：

```
albums.forEach(function(item){
    albumDict[item.artist] = albumDict[item.artist] || {};
    albumDict[item.artist][item.name] = item.year;
}); 
```

`albumDict[item.artist]`如果新对象尚不存在，则该函数的第一行设置为新对象。否则，它将其设置为自身。

然后，您可以在 dict 条目上设置年份。

# javascript - 记录文本未在 jqGrid 中更新

> ID：14731170
> 
> 赞同：0
> 
> 时间：2013-02-06T14:13:26.670
> 
> 标签：javascript, jquery, jqgrid

我在一个函数中这样做：

```
 $("#UsersGrid").jqGrid('setGridParam', { recordtext: "View {0} - " + actualRows + " of " + actualRows }); 
```

但它不会在 gridpager 的记录文本中同时更新。实际上我已经调试过，看到 的值 `$("#UsersGrid").jqGrid('getGridParam', recordtext)`正在根据我的顺序进行更新，但浏览器中没有效果。该怎么办？

这不是重复的，因为将数据库记录计数直接放在 GridPager 中是一个问题，而这与放置记录文本而不是相应地刷新有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:32:38.897

我认为这与 recordtext 属性的格式有关。网格期望格式为

`recordtext: "View {0} - {1} of {2}",`

# tomcat - 如何在 Windows 中为 Tomcat 设置 JAVA_OPTS？

> ID：14731174
> 
> 赞同：26
> 
> 时间：2013-02-06T14:13:44.743
> 
> 标签：tomcat, java-opts

我正在尝试`JAVA_OPTS`在 Windows 机器上设置 Tomcat，但如果我添加多个变量，我会不断收到错误消息。

例如，这有效：

```
set JAVA_OPTS="-Xms512M" 
```

但这不会：

```
set JAVA_OPTS="-Xms512M -Xmx1024M" 
```

它导致错误：

```
Invalid initial heap size: -Xms512M -Xmx1024M
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit. 
```

就好像我可以设置一个变量（-Xmx 也可以）但不能设置多个。

我正在使用指示`setenv.bat`文件，我的 Tomcat 是 7.0.35。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-06T14:30:24.023

显然正确的形式是没有`""`

如在

```
set JAVA_OPTS=-Xms512M -Xmx1024M 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-01-03T10:14:38.683

对于 Windows，如果变量值中有空格（“”），正确的方法实际上是在变量名之前放置引号（“），例如：

```
set "JAVA_OPTS=-Xms512M -Xmx1024M" 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-07-04T14:53:20.023

尝试

```
set JAVA_OPTS=%JAVA_OPTS% -Xms512M -Xmx1024M 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-07-14T10:20:39.537

我最喜欢 Gaurav 和 user2550946 的答案的组合，但想再添加两个方面：

1.  不要使用`JAVA_OPTS`，而是使用`CATALINA_OPTS`. 这将仅用于启动 tomcat，而不是用于关闭它。通常，您在启动 tomcat 时需要更多内存，但关闭过程（它只是启动，告诉 tomcat 关闭然后再次结束）不需要任何专门调整的资源。事实上，如果操作系统不再提供一些荒谬的内存量，关机甚至会失败。

2.  在生产系统上，我的建议是立即声明允许的最大内存。因为如果您预计迟早会需要内存，那么您不想在凌晨 3 点发现它不可用，而是在启动服务器时发现它。因此，在生产系统中设置`-Xmx`和`-Xms`设置*相同的值。*（这使我的方面 1 更加相关）

或者，在一行中，这是我的建议：

```
set "CATALINA_OPTS=%CATALINA_OPTS% -Xms1024M -Xmx1024M" 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-02-28T10:01:24.397

建议您创建一个名为 setenv.bat 的文件并将其放在 Tomcat bin 目录中。使用此文件（由 catalina.bat 和 catalina.sh 脚本运行），您可以使用 JAVA_OPTS 变量更改以下 Tomcat 环境设置：

**您可以设置最小和最大内存堆大小**

**JVM -Xms 和 -Xmx 参数**。

最佳限制取决于许多条件，例如 Integrator ETL 应执行的转换。对于信息发现转换，建议最大为 1 GB。例如，要将最小堆大小设置为 128 MB，将最大堆大小设置为 1024 MB，请使用

```
JAVA_OPTS=-Xms128m -Xmx1024m 
```

您应该将 PermGen（永久代）内存空间的最大限制设置为大于默认值。对于企业应用程序，默认的 64 MB 是不够的。合适的内存限制取决于各种标准，但在大多数情况下 256 MB 是一个不错的选择。如果 PermGen 空间最大值过低，可能会出现 OutOfMemoryError: PermGen space 错误。您可以使用以下 JVM 参数设置 PermGen 最大限制

```
 -XX:MaxPermSize=256m 
```

出于性能原因，建议应用程序在服务器模式下运行。默认情况下，Apache Tomcat 不在服务器模式下运行。您可以使用 JVM -server 参数设置服务器模式。您可以在 setenv 文件的环境变量中的 JAVA_OPTS 变量中设置 JVM 参数。

```
The following is an example of a setenv.bat file:

set "JAVA_OPTS=%JAVA_OPTS% -Xms128m -Xmx1024m -XX:MaxPermSize=256m -server" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-15T10:03:23.433

这是因为，您希望为 JVM 分配的内存量不可用，或者您分配的内存量可能超过了可用内存。尝试小尺寸然后你可以看到差异。
尝试：

```
set JAVA_OPTS=-Xms128m -Xmx512m -XX:PermSize=128m 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-11T10:08:18.800

```
SET JAVA_HOME=C:\Applications\java\java_8
SET PATH=%PATH%;C:\Applications\java\java_8\bin
SET JAVA_OPTIONS=-d64 -Xms128g -Xmx128g 
```

# android - 仅绘制自定义视图的一部分

> ID：14731176
> 
> 赞同：0
> 
> 时间：2013-02-06T14:13:52.237
> 
> 标签：android, android-custom-view, custom-draw

我有一个自定义视图，`RelativeLayout`它包含一个`ListView`（两者都设置为匹配父级 - 宽度和高度）。在列表的顶部，我有一个`View`如下图所示： ![我的自定义视图](../Images/ef2505cafcb8bb35d550e40d74d0c84a.png)

我希望唯一要绘制的部分是我的矩形`View`（用灰色标记），而视图的所有其他部分都是透明的。

有没有办法我可以做到这一点？我已经尝试扩展`RelativeLayout`和覆盖它的`onDraw()`方法，但我没有设法仅绘制特定区域（标记为灰色）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:08:10.290

最终，我通过扩展`RelativeLayout`和覆盖它的`draw()`方法来做到这一点。

```
@Override
protected void draw(Canvas canvas) {
    canvas.clipRect(magnifiedRegion.getLeft(), magnifiedRegion.getTop(), magnifiedRegion.getRight(), magnifiedRegion.getBottom());
    super.draw(canvas);
} 
```

`magnifiedRegion`正如上面问题中提到的，我的观点在哪里。

注意：你必须`this.setWillNotDraw(false);`在构造函数中设置，否则`draw()`框架不会调用方法（因为我们的根视图是一个`ViewGroup`- 这是一个Android框架默认做的优化）。

# java - 根据 cpu 周期 JAVA 重构代码

> ID：14731177
> 
> 赞同：-2
> 
> 时间：2013-02-06T14:13:55.733
> 
> 标签：java

问题：我只想问 2 个问题，如果我在 java 中编写以下代码 2，那么在 cpu 周期方面哪个更快，为什么？有人告诉我，第一个选项在 cpu 周期方面是不正确的，因为在那个 2 条件下检查，即 if 和 ！

```
boolean flag = true;

//OPTION ONE
if(!flag) {
  //error
} else {
  //got the answer
}

//OPTION TWO
if(flag) {
  //got the answer
} else {
  //error
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T14:19:03.780

现代 JVM 实现没有**实际区别**。

编译器会做正确的事，不用担心。事实上，如果它能够证明 flag 在编译时始终具有恒定值 true ，它将完全消除检查和无法访问的分支。

# sql - 创建跨 Maven 测试阶段工作的临时数据库？

> ID：14731178
> 
> 赞同：5
> 
> 时间：2013-02-06T14:13:56.820
> 
> 标签：sql, maven, junit

我加入了一个项目，该项目有很多带有 SQL 语句的文件，用于创建用于集成测试的数据库。

I'm wondering how I can use these files to create a database for unit testing (using java and maven).

I can create a HSQL in-memory database for each unit test, or even use the spring jdbc embedded-database feature, but there's so many SQL statements to execute in the test setup that this is not scalable.

So I'd like to create a temporary database (that loads the SQL statements) at the start of the maven test phase, have the unit tests access this temporary database and perform various operations, then delete the temporary database at the end of the maven test phase.

我查看了允许我执行测试阶段的 sql-maven-plugin，但我不确定如何配置一个可用于所有单元测试的临时数据库。没有要连接的服务器，内存数据库无法跨多个单元测试工作（我假设）。

一种选择是使用唯一的临时文件，例如将 JDBC 驱动程序 URL 指定为 jdbc:hsqldb:file:/path/to/temporary/file，但我不确定如何在 maven 中生成唯一的临时文件。

关于如何做到这一点的任何建议，或者是否有更好的方法可以采取？

**更新：**我决定使用在 target/db 目录中创建的基于文件的数据库。我使用 maven clean 插件在运行测试之前删除 target/db 目录，并使用 maven sql 插件从脚本创建数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:22:06.820

对于这种情况，我创建了[derby-maven-plugin](https://github.com/carlspring/derby-maven-plugin)。它可从 Maven Central 获得，因此您无需添加任何额外的存储库或任何东西。

你可以像这样使用它：

```
 <project ...>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.carlspring.maven</groupId>
                    <artifactId>derby-maven-plugin</artifactId>
                    <version>1.8</version>
                    <configuration>
                        <basedir>${project.build.directory}/derby</basedir>
                        <port>1527</port>
                    </configuration>
                    <executions>
                        <execution>
                            <id>start-derby</id>
                            <phase>pre-integration-test</phase>
                            <goals>
                                <goal>start</goal>
                            </goals>
                        </execution>
                        <execution>
                            <id>stop-derby</id>
                            <phase>post-integration-test</phase>
                            <goals>
                                <goal>stop</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </project> 
```

有关更多信息，您还可以查看[USAGE](https://github.com/carlspring/derby-maven-plugin/blob/master/USAGE)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:23:12.500

1.  为什么不创建一个磁盘 H2 数据库，并让每个测试访问它？只要测试不并行运行或相互交互，您就不需要服务器。

2.  更重要的是：只需在@Before 中创建内存数据库并在@After 中删除它们。你确定这太慢了吗？

3.  在 pre-integration-test 中，您可以启动 H2（或 derby）服务器，并在 post-integration-test 中将其关闭。

4.  您可以编写一个使用会话状态来跟踪嵌入式数据库服务的 maven 插件，但这与 (3) 大致相同。

# mysql - 如何使用两个链接表编写一个相对简单的 UPDATE 查询

> ID：14731183
> 
> 赞同：1
> 
> 时间：2013-02-06T14:14:15.737
> 
> 标签：mysql, sql

我有 2 张桌子，CARS 和 ORDERS。

两者都有一个 mileage 列，但 ORDERS 表的 mileage 列在大多数行上是空白的。

我想用 CARS.mileage 更新 ORDERS.mileage。它们由 Vrm 列链接。

有人可以帮我解决这个问题吗？

```
UPDATE orders
SET Mileage = (SELECT *
FROM `orders`
JOIN cars ON orders.Vrm = cars.Vrm
WHERE orders.mileage = '') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:16:48.930

`JOIN`在`UPDATE`'子句中使用`FROM`a，而不是尝试使用子查询。否则，您基本上有正确的想法。

```
UDPATE
  orders
  JOIN CARS ON orders.Vrm = cars.VRM
SET orders.Mileage = cars.mileage
WHERE orders.mileage = '' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:18:08.337

查询一：

```
UPDATE orders
SET Mileage = (SELECT c.mileage
               FROM cars c 
               WHERE orders.Vrm = c.Vrm)
WHERE o.mileage = '' 
```

查询 2：

```
UPDATE orders o
JOIN cars c ON o.Vrm = c.Vrm 
SET o.Mileage = c.mileage
WHERE o.mileage = '' 
```

一些[sqlfileexample](http://sqlfiddle.com/#!2/717af/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:26:41.233

根据[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/update.html)，你应该使用这个：

```
UPDATE orders, cars
SET orders.Mileage = cars.mileage
WHERE orders.Vrm = cars.Vrm AND orders.mileage = '' 
```

# excel - 在excel中查找结果将行复制到另一个工作表

> ID：14731185
> 
> 赞同：4
> 
> 时间：2013-02-06T14:14:18.783
> 
> 标签：excel, vba

我需要一些帮助，将数据从一个 Excel 工作表复制到另一个工作表。例如：

样本数据

**__ *A* __B___C**

1 aaa bbb ddd

2 bbb ccc eee

3 ccc fff rrr

4 ccc fff ttt

5 ddd eee ggg

6 aaa ddd eee

7 bbb fff hhh

8 啊啊啊啊啊

因此，对于上述记录，如果我执行“CTRL + F”并搜索所有“eee”，结果将显示 C2、B5、C6、A8、B8、C8 中的 6 个实例

现在我想将整个第 2、5、6 和 8 行复制到另一个工作表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-06-14T01:42:10.647

这对我有用......一个简单的解决方案：

1.  选择/突出显示您要搜索的数据
2.  按 ctrl +h 进行替换
3.  在“查找内容”中输入要查找的字符串。
4.  选择“替换为”格式，然后选择格式>填充并选择背景填充，无论什么颜色。然后单击[全部替换]。
5.  然后选择 Excel 菜单 > 数据 > 按“单元格颜色”排序，顺序（您从上面的步骤 4 中选择的颜色），然后选择“在顶部”或“在底部” - 无论您想要什么，单击 [确定]。

现在，您想要的所有数据都在一行中。根据需要复制并粘贴到另一个工作表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T14:33:58.050

要实现您需要的内容，请执行以下操作（假设您的数据位于从第 2 行开始的 A:C 列中，即有标题）：

1.  输入 D2（附加列）：，`=IF(OR(A2:C2="eee"),1,0)`但按`CTRL`+ `SHIFT`+`ENTER`而不是通常的`ENTER`- 这将定义一个 ARRAY 公式，并在`{}`其周围产生括号（但不要手动输入它们！）。
2.  根据需要自动填充公式。
3.  将过滤器添加到整个 A:D 范围。
4.  将过滤器应用于 D 列的值`1`。
5.  复制整个过滤的 A:C 列并粘贴到任何地方 - 只会复制过滤的行。

示例文件：[https ://www.dropbox.com/s/qscwbf5kbnwi5pa/Filtering3Columns.xlsx](https://www.dropbox.com/s/qscwbf5kbnwi5pa/Filtering3Columns.xlsx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:18:35.077

我认为您正在寻找的`VLOOKUP`只是获取 Excel 帮助，一切都已解释

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-07T23:48:38.120

The easiest way I found was this: Using the option "Sort & Filter" located in the right upper corner. Then you can filter any column by any criteria you like. By doing that only the filtered rows appear on the spread sheet (the rest are still there but just hidden). From there you can easily copy and paste the entire rows.

# jquery - 通过拖动触摸轮播中的滚动条支架来移动轮播

> ID：14731189
> 
> 赞同：0
> 
> 时间：2013-02-06T14:14:22.620
> 
> 标签：jquery, carousel

我正在使用触摸轮播。

有什么方法可以使滚动条支架可拖动？这样用户也可以拖动支架，而不仅仅是轮播的内容。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:37:59.220

使用可拖动的滚动条实现检查此滑块： [http ://www.idangero.us/sliders/swiper/plugins/scrollbar.php](http://www.idangero.us/sliders/swiper/plugins/scrollbar.php)

# ios - UIPageViewController 更改持续时间

> ID：14731191
> 
> 赞同：1
> 
> 时间：2013-02-06T14:14:23.427
> 
> 标签：ios, uipageviewcontroller

如何在 UIPageViewController 中设置更快的页面翻转（当点击边缘当前页面时）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:16:36.247

我不认为有一种简单的方法可以使用标准来做到这一点`UIPageViewController`，诀窍是简单地将框架的 UIView 动画设置为更短，但您必须在自定义 PageView 控制器中实现此行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:17:55.293

根据[Apple 的 UIPageViewController 类文档，](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)只能更改动画的样式，而不是速度。

# scala - 从 postgres ltree 列设置的异常字符串

> ID：14731200
> 
> 赞同：9
> 
> 时间：2013-02-06T14:15:13.067
> 
> 标签：scala, anorm

我有一个表，其中一个列具有 ltree 类型，以下代码从中获取数据：

```
SQL("""select * from "queue"""")()
.map(
    row =>
        {
            val queue =
                Queue(
                    row[String]("path"),
                    row[String]("email_recipients"),
                    new DateTime(row[java.util.Date]("created_at")),
                    row[Boolean]("template_required")
                )
            queue
        }
).toList 
```

这会导致以下错误：

`RuntimeException: TypeDoesNotMatch(Cannot convert notification.en.incident_happened:class org.postgresql.util.PGobject to String for column ColumnName(queue.path,Some(path)))`

队列表模式如下：

```
CREATE TABLE queue
(
  id serial NOT NULL,
  template_id integer,
  template_version integer,
  path ltree NOT NULL,
  json_params text,
  email_recipients character varying(1024) NOT NULL,
  email_from character varying(128),
  email_subject character varying(512),
  created_at timestamp with time zone NOT NULL,
  sent_at timestamp with time zone,
  failed_recipients character varying(1024),
  template_required boolean NOT NULL DEFAULT true,
  attachments hstore,
  CONSTRAINT pk_queue PRIMARY KEY (id ),
  CONSTRAINT fk_queue__email_template FOREIGN KEY (template_id)
      REFERENCES email_template (id) MATCH SIMPLE
      ON UPDATE CASCADE ON DELETE RESTRICT
)
WITH (
  OIDS=FALSE
);
ALTER TABLE queue
  OWNER TO postgres;
GRANT ALL ON TABLE queue TO postgres;
GRANT SELECT, UPDATE, INSERT, DELETE ON TABLE queue TO writer;
GRANT SELECT ON TABLE queue TO reader; 
```

这是为什么？不`notification.en.incident_happened`就是一个普通的字符串吗？还是我错过了什么？

**更新**：

这个问题仍然适用，但这里有一个解决方法：

```
SQL("""select id, path::varchar, email_recipients, created_at, template_required from "queue"""")() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-13T06:04:08.873

这看起来是一个有趣的项目，所以我实现了 ltree 列映射器。

我捎带了[anorm-postgresql](https://github.com/derek-schaefer/anorm-postgresql)，因为该项目已经在 anorm 中实现了一些 postgres 类型。它看起来不错，如果它实现了所有的 postgres 类型，它会很有用。我的代码已合并，因此您可以使用该库。或者，只需使用以下代码：

```
import org.postgresql.util.PGobject
import anorm._
object LTree {
  implicit def rowToStringSeq: Column[Seq[String]] = Column.nonNull { (value, meta) =>
    val MetaDataItem(qualified, nullable, clazz) = meta
      value match {
        case pgo:PGobject => {
          val seq = pgo.getValue().split('.')
          Right(seq.toSeq)
        }
        case x => Left(TypeDoesNotMatch(x.getClass.toString))
      }
    }
    implicit def stringSeqToStatement = new ToStatement[Seq[String]] {
      def set(s: java.sql.PreparedStatement, index: Int, aValue: Seq[String]) {
      val stringRepresentation = aValue.mkString(".")
      val pgo:org.postgresql.util.PGobject = new org.postgresql.util.PGobject()
      pgo.setType("ltree");
      pgo.setValue( stringRepresentation );
      s.setObject(index, pgo)
    }
  }
} 
```

然后您可以将 a 映射`ltree`到 a `Seq[String]`。请注意，它是一系列路径元素顺序很重要，因此它是 a `Seq[String]`，而不是`String`or `Set[String]`。如果您想要一个字符串，只需说`path.mkString(".")`. 下面的用法：

```
import LTree._

SQL("""select * from "queue"""")()
.map(
    row =>
        {
            val queue =
                Queue(
                    row[Seq[String]]("path"),
                    row[String]("email_recipients"),
                    new DateTime(row[java.util.Date]("created_at")),
                    row[Boolean]("template_required")
                )
            queue
        }
).toList 
```

# spring - Windows 环境中的 Spring Security 单点登录

> ID：14731202
> 
> 赞同：8
> 
> 时间：2013-02-06T14:15:35.110
> 
> 标签：spring, active-directory, spring-security, kerberos, spnego

我有一种跌入技术黑洞的感觉。有很多问题，但没有多少（最近的）答案。

简短的摘要：

我有一个使用域控制器和 Active Directory 实现（即将使用 Quest 的身份验证服务）运行的 Windows 环境。我有一系列基于 Spring 的 Web 应用程序，我想部署到这个环境中，我们需要它们使用域凭据通过单点登录无缝运行。

看起来答案是这样的：

[http://blog.springsource.org/2009/09/28/spring-security-kerberos/](http://blog.springsource.org/2009/09/28/spring-security-kerberos/)

一些本地 AD 管理员告知我，ktpass 是一个不安全的（存储在纯文本文件中的主体和密钥）和过时的解决方案。鉴于上面链接的博客已有 3 年历史，因此很难争论。

然后我遇到了这个：

[http://forum.springsource.org/showthread.php?134465-JDK-7-0-and-Spnego-Extension-don-t-work](http://forum.springsource.org/showthread.php?134465-JDK-7-0-and-Spnego-Extension-don-t-work)！

大约一周前发布，看起来最近集成 SPNEGO 扩展的努力表明它与 JDK 7 不兼容并且不再受支持！

这似乎是人们想要做的一件常见的事情。令我惊讶的是，对于像 Spring 这样广泛使用的框架，没有一种简单的方法可以实现这一点。我在文档中没有找到另一种方法吗？

感谢您的任何见解或建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T03:47:01.897

看看[华夫饼](http://dblock.github.com/waffle/)。

> WAFFLE 是一个本地 Windows 身份验证框架，由两个 C# 和 Java 库组成，这些库执行与 Windows 身份验证相关的功能，支持 Negotiate、NTLM 和 Kerberos。Waffle 还包括在 Windows 上运行时为流行的 Java Web 服务器启用插入式 Windows 单点登录的库。

它有一个使用 Spring Security的[教程。](http://code.dblock.org/single-sign-on-spring-security-negotiate-filter-kerberos-ntlm-wwaffle)

# php - PHP中的内爆

> ID：14731204
> 
> 赞同：-2
> 
> 时间：2013-02-06T14:15:41.443
> 
> 标签：php, implode

我有一个具有各种数字的数组：

```
$array = [1,2,3,4]; 
```

我想要一些代码来提取这些值并在它们内嵌 html 属性时添加“广告”：

```
<div class="ad1 ad2 ad3"> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T14:22:31.390

结合`implode()`以`array_map()`在内爆之前更改值。

像这样的东西：

```
$outputString = implode(' ',array_map(function($val) {return "ad{$val}";}, $inputArray)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T14:18:15.183

循环遍历您的数组，并执行您必须执行的任何操作：

```
foreach ($array as $item) {
   ...
} 
```

在你的例子中：

```
$className = "";
foreach ($array as $item) {
  $className .= "ad".$item." ";
}

echo '<div class="'.$className.'">'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T14:22:46.570

您可以按照 Mathieu 的建议对其进行循环，也可以执行 implode 语句：

```
$array = array(1,2,3,4);
if (sizeof($array)>0) {
  $class = 'ad'.implode(' ad',$array);
}
echo $class; // ad1 ad2 ad3 ad4 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-06T14:20:52.420

试试这个：

```
echo implode(' ad', $array); 
```

# python - 使用 python 和 MySQLdb 将多个字典对象插入 MySQL 数据库

> ID：14731207
> 
> 赞同：2
> 
> 时间：2013-02-06T14:15:48.063
> 
> 标签：python, mysql, database, mysql-python

我已经为此苦苦挣扎了好几个小时，现在我想哭，因为我无法弄清楚发生了什么。

这是我的数据的简化版本：

```
mydata = [ { 'id': 123, 'thing': 'ghi', 'value': 1 }, { 'id': 456, 'thing': 'xyz', 'value': 0 } ] 
```

这是我的代码：

```
import MySQLdb as mdb

con = None
con = mdb.connect('localhost', 'testing', 'anothervalue', 'andanother');
cur = con.cursor()

sql = "INSERT INTO `tablename` ( `id`, `thing`, `value` ) VALUES ( %(id)s, %(thing)s, %(value)s )"
cur.executemany( sql, ( mine for mine in mydata ) )
con.close() 
```

我期望发生的是 2 行将插入到**tablename**中。实际发生的是脚本执行没有任何错误并且没有插入任何行。

我究竟做错了什么？如果我手动执行单个 INSERT，它会正确插入表中，所以我认为这不是 MySQL 数据库的问题，而是我如何将变量传递到数据库中。

我还有一个问题是如何将**值**作为浮点数插入？目前我将表中的**值定义为****TINYTEXT NOT NULL**，我希望这是**FLOAT NOT NULL**但我不确定如何处理上面的替换。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T14:18:14.043

无需使用生成器来循环`mydata`。直接传入`mydata`即可：

```
cur.executemany(sql, mydata) 
```

数据库适配器将为`mydata`您循环，生成器表达式仅插入一个不必要的额外循环。

如果您没有收到任何错误消息但也没有任何更改，请检查以下内容：

*   确保你提交了交易；呼叫`con.commit()`后运行。`.executemany()`

*   *三重检查*不`mydata`为空。

数据库适配器将为您正确处理浮点值；如果一列被标记为`FLOAT NOT NULL`并且您为该列传递了一个 Python 浮点值，那么 Things Just Work。这就是 SQL 参数的用途，正确处理不同数据类型的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T15:22:15.020

默认情况下，在 MYSQL 中启用自动提交。要检查您设置中的当前配置，请连接到您的 MYSQL 实例并执行以下操作。

```
mysql> select @@autocommit;    
+--------------+    
| @@autocommit |    
+--------------+    
|            1 |    
+--------------+
1 row in set (0.00 sec) 
```

如果值为 1 则启用...否则不...

老实说，您的原始片段对我来说很好。所以这主要是一个自动提交问题。

`con.close()`尝试在原始代码之前添加以下行。

```
con.commit() 
```

如果启用了自动提交，您仍然可以尝试使用下面发布的我的代码片段...您可以将 mydata 列表成员从 Dictionary 更改为 Tuple 类型吗？如果是，请查看以下代码段是否对您有帮助。

```
import MySQLdb as mdb

mydata = [ { 'id': 123, 'thing': 'ghi', 'value': 1 }, { 'id': 456, 'thing': 'xyz', 'value': 0 } ]
mydata_modified=[ (123, 'ghi', 1 ), ( 456, 'xyz', 0 ) ]

con = None
con = mdb.connect('localhost', 'testing', 'anothervalue', 'andanother');
cur = con.cursor()

cur.executemany( """INSERT INTO tablename ( id, thing, value ) VALUES ( %s, %s, %s )""", mydata_modified )
con.commit()
con.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-04T18:15:34.013

只是一个在 Guddu 上扩展的 FYI，您可以通过执行以下操作将您的字典转换为元组类型：

```
mydata_modified = []
for x in mydata:
   mydata_modified.append(tuple(x.values())) 
```

# jenkins - 如何从 Jenkins 中删除用户

> ID：14731209
> 
> 赞同：28
> 
> 时间：2013-02-06T14:15:56.133
> 
> 标签：jenkins

我在 Jenkins 中有很多自动来自 SVN 的用户。我们的一位开发人员离开了项目，我将他从 SVN 中删除。但是，他的联系人没有从 Jenkins 中删除，我在 Jenkins 中找不到可以从中删除用户的地方。关于如何从 Jenkins 中删除用户的任何想法？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-08-14T11:25:19.847

我找不到删除选项。我去了这里，找到了一个相关但无用的答案。所以我只是尝试：

```
http://<jenkins.url>/user/<username>/delete 
```

我被重定向到现有页面 \o/ 有一个按钮要求确认删除。我单击并删除了用户。

希望这可以帮助

PS：我刚刚找到了正确的方法：转到“管理Jenkins”>“管理用户”，然后单击要删除的用户同一行（最右侧）的删除按钮

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-11-19T20:28:56.073

我相信您需要从作业目录下的 build.xml 文件中删除或替换用户，然后是作业名称和 builds 目录。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-06T14:53:53.937

如果您转到**人员**视图，您可以单击一个用户，然后在左侧菜单中选择**删除（如果您具有***管理*权限）。

您也可以删除该文件夹`[jenkins-root]/Users/[username]`并重新启动 Jenkins。

# c# - 为什么我的 WCF 服务代理在我使用枚举类型时会创建一个奇怪的方法？

> ID：14731212
> 
> 赞同：1
> 
> 时间：2013-02-06T14:16:06.737
> 
> 标签：c#, .net, wcf

我在 WCF 服务器端定义了以下枚举：

```
[DataContract]
public enum CarConditionEnum {
    [EnumMember]
    New,
    [EnumMember]
    Used,
    [EnumMember]
    Rental,
    [EnumMember]
    Broken,
    [EnumMember]
    Stolen
} 
```

我将使用的操作合约方法接口方法，也是服务器端：

```
[OperationContract]
string WhatEnumDidIUse(CarConditionEnum carCondition); 
```

该接口的方法实现（服务器端）：

```
public string WhatEnumDidIUse(CarConditionEnum carCondition) {
    return carCondition.ToString();
} 
```

当我动态生成此服务的代理时，它生成的方法看起来像这样（我很确定如果我使用 Web 参考生成它，它看起来会一样）：

```
/// <remarks/>
[System.Web.Services.Protocols.SoapDocumentMethodAttribute("http://tempuri.org/IService1/WhatEnumDidIUse", RequestNamespace="http://tempuri.org/", ResponseNamespace="http://tempuri.org/", Use=System.Web.Services.Description.SoapBindingUse.Literal, ParameterStyle=System.Web.Services.Protocols.SoapParameterStyle.Wrapped)]
[return: System.Xml.Serialization.XmlElementAttribute(IsNullable=true)]
public string WhatEnumDidIUse(CarConditionEnum carCondition, [System.Xml.Serialization.XmlIgnoreAttribute()] bool carConditionSpecified) {
    object[] results = this.Invoke("WhatEnumDidIUse", new object[] {carCondition, carConditionSpecified});
    return ((string)(results[0]));
} 
```

为什么现在有这个布尔值来指定已指定可枚举？

另外，为什么这个布尔值表现得很奇怪？例如，如果我将布尔参数设置为 false，我的方法将始终返回第一个可枚举项 New。如果我将布尔参数设置为 true，它将返回我实际指定的任何可枚举。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:19:32.860

这是因为布尔值指示是否提供了 enum 参数。如果不是，那么它将表现得好像您为枚举提供了整数值零。

话虽如此，我不明白为什么“*指定”在那里。根据您的代码，枚举必须始终存在。如果您指定了`CarConditionEnum?`，那么我会理解的。

你确定这是 WCF 服务吗？这看起来像是 ASMX 的序幕。

# ruby-on-rails - ERB/Rails 中的浮点数

> ID：14731214
> 
> 赞同：0
> 
> 时间：2013-02-06T14:16:14.517
> 
> 标签：ruby-on-rails, floating-point, erb

我对 Rails 很陌生，我将 2 个变量传递给一个视图，在我的控制器中将它们定义为

```
@correct = 5
@total = 40 
```

在我看来，我试图将它们标记为：

```
Score = <%=@score%>/<%=@total%> = <%=(@score/@total)%> 
```

它为除法输出 0。我是否需要明确定义该方程以输出浮点数或其他内容？如何让它输出 0.125 而不是 0

多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:21:49.360

决定是否要使用`@correct`或`@score`。还要使用双除法而不是整数`@score`乘以`1.0`：

```
<%=(1.0 * @score/@total)%> 
```

或者`@score`转换为浮动：

```
<%=(@score.to_f/@total)%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:21:16.267

您需要将整数显式转换为浮点数：

```
1.9.3p0 :001 > a = 5
 => 5 
1.9.3p0 :002 > b = 40
 => 40 
1.9.3p0 :003 > a / b
 => 0 
1.9.3p0 :005 > (a / b).to_f
 => 0.0 
1.9.3p0 :006 > a.to_f / b.to_f
 => 0.125 
```

在你的情况下：

```
Score = <%=@score%>/<%=@total%> = <%=(@score.to_f/@total.to_f)%> 
```

# azure - 使用 Async 和 Await 的异步调用

> ID：14731216
> 
> 赞同：0
> 
> 时间：2013-02-06T14:16:21.837
> 
> 标签：azure, delegates, xml-parsing, azure-sql-database, async-await

在 .Net framework 4.5 中引入了 async 和 await 关键字来进行异步调用。

我也在 Web 应用程序中使用过它们。我开始知道它也可以使用代理来完成。

下面是我的示例片段，展示了异步调用是如何完成的

```
 Public void binddata()
                {
                certificate = HelperMethods.GetStoreCertifcate(Thumbprint);
                ListHostedServices(SubscriptionId, certificate, Version);
                hostedservicesview.ActiveViewIndex = 0;
                ListStorageAccounts(SubscriptionId, certificate, Version);
                }

 public async void ListHostedServices(string subscriptionId, X509Certificate2 certificate, string version)
        {

            string hittingUri = String.Format("https://management.core.windows.net/{0}/" + "services/hostedservices",SubscriptionId);
             XmlDocument responsebody= await HelperMethods.GetXmlDocument(hittingUri, certificate, version);

             if (responsebody != null)
             {
                 var result = responsebody.GetElementsByTagName("HostedServiceProperties");

                 hostedservices = new DataTable();
                 hostedservices.Columns.Add("Url");
                 hostedservices.Columns.Add("ServiceName");

                 hostedservices.Columns.Add("Location");
                 hostedservices.Columns.Add("Label");
                 hostedservices.Columns.Add("Status");
                 hostedservices.Columns.Add("DateCreated");
                 hostedservices.Columns.Add("DateLastModified");
                 foreach (XmlNode hsnode in result)
                 {
                     DataRow hsrow = hostedservices.NewRow();
                     hsrow["Url"] = hsnode.ParentNode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "Url").Any() ?
                             hsnode.ParentNode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "Url").First().InnerText : string.Empty;
                     hsrow["ServiceName"] = hsnode.ParentNode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "ServiceName").Any() ?
                            hsnode.ParentNode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "ServiceName").First().InnerText : string.Empty;
                     hsrow["Location"] = hsnode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "Location").Any() ?
                           hsnode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "Location").First().InnerText : string.Empty;

                     // IF location is empty, it means affinity group is returned, Pull location from affinity group
                     if (String.IsNullOrEmpty(hsrow["Location"].ToString()))
                     {
                         string affnitygroup = hsnode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "AffinityGroup").Any() ?
                            hsnode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "AffinityGroup").First().InnerText : string.Empty;

                         certificate = HelperMethods.GetStoreCertifcate(Thumbprint);
                         hsrow["Location"] = await HelperMethods.GetAffinityGroupLocation(subscriptionId, certificate, Version, affnitygroup);

                     }
                     hsrow["Label"] = hsnode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "Label").Any() ?
                          hsnode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "Label").First().InnerText : string.Empty;
                     hsrow["Status"] = hsnode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "Status").Any() ?
                         hsnode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "Status").First().InnerText : string.Empty;
                     hsrow["DateCreated"] = hsnode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "DateCreated").Any() ?
                        hsnode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "DateCreated").First().InnerText : string.Empty;
                     hsrow["DateLastModified"] = hsnode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "DateLastModified").Any() ?
                       hsnode.ChildNodes.OfType<XmlElement>().Where(x => x.Name == "DateLastModified").First().InnerText : string.Empty;
                     hostedservices.Rows.Add(hsrow);

                 }
                 lbl_count.Text = hostedservices.Rows.Count.ToString();
                 HostedServicesList.DataSource = hostedservices;
                 HostedServicesList.DataBind();

             }

            else
            {

            }

        }

**XmlDocument responsebody= await HelperMethods.GetXmlDocument(hittingUri, certificate, version);**
The method definition is as follows
 public static async Task<XmlDocument> GetXmlDocument(string hittingUrl, X509Certificate2 certificate, string Version)
        {
            HttpWebRequest request;
              XmlDocument responsebody = new XmlDocument();
            // string hittingUri = "https://management.core.windows.net/{0}/" + "services/hostedservices";
            Uri uri = new Uri(hittingUrl);

            request = (HttpWebRequest)HttpWebRequest.Create(uri);

            request.Method = "GET";
            request.Headers.Add("x-ms-version", Version);

            request.ClientCertificates.Add(certificate);
            request.ContentType = "application/xml";

            HttpWebResponse webresponse= null;

            try
            {
                webresponse = (HttpWebResponse)await request.GetResponseAsync();

            }
            catch (Exception)
            {

            }

            HttpStatusCode statuscode = webresponse.StatusCode;
            if (webresponse.ContentLength > 0)
            {
                using (XmlReader reader =XmlReader.Create(webresponse.GetResponseStream()))
                {
                    responsebody.Load(reader);

                }
            }

            if (statuscode.Equals(HttpStatusCode.OK))
            {
                return responsebody;
            }
            else
            {
                return null;
            }

        } 
```

同样，上述两种方法也有相同的列表。

检索 11+19+6 条记录的数据大约需要 12-15 秒。

你们能帮我优化这段代码，这样它会更快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:56:28.660

首先，您需要分析您的代码以查看您究竟在哪里浪费时间。如果`GetXMLDocument`大部分时间都占用了，那么可能是服务器没有响应

除此之外，我的猜测是您的 foreach 循环花费的时间最多，因为您实际上是在这里搜索每个语句中的所有元素。

另一种方法可能是

```
Dictionary<string, string> nvpairsForColumns = new Dictionary { "Url", String.Empty }; // add all valid column headers here
foreach(var xelement in hsnode.ParentNode.ChildNodes.OfType<XmlElement>)
{
  if(nvparisForColumns.ContainsKey(xelement.Name)
     && String.IsNullOrEmpty(nvpairsForColumns[xlement.Name])) // assumption String.Empty is not a valid entry else keep another Dictionary<string,bool> to tag when done with first
  {
     nvpairsForColumns[xelement.Name] = xelement.InnerText;
  }

} 
```

# ruby - 有人知道是否有任何用于工业环境的红宝石PLC程序项目？

> ID：14731218
> 
> 赞同：2
> 
> 时间：2013-02-06T14:16:31.457
> 
> 标签：ruby, plc

我是 Omron 设备的 PLC 程序员，现在我发现 ruby​​ 是一种非常好的语言。我看到嵌入式设备有嵌入式红宝石。我想知道PLC是否有任何宝石，如果没有，我可能会考虑研究如何开发一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T04:55:18.407

PLC 通常使用 IEC 61131-3 语言进行编程。[看这里。](http://en.wikipedia.org/wiki/IEC_61131-3)

如果您在工业环境中进行普通的 PLC 编程，那么执行您所描述的标准方法是在服务器上编写 Ruby 应用程序，并使用 OPC 或类似的东西与 PLC 通信，并将 PLC 逻辑保留在IEC 语言。

工业控制工程师被要求从事已经在该领域工作了十年或更长时间的控制器的工作是很常见的。如果你使用 Ruby 来编写你的 PLC 程序，你可能会强迫某人在工厂关闭期间即时自学 Ruby，只是为了解决一些小的 I/O 问题。

我的建议是将 PLC 语言保留在 PLC 中，将高级语言保留在服务器上。

# linux - 它将链接到什么库 - 静态或共享对象

> ID：14731219
> 
> 赞同：1
> 
> 时间：2013-02-06T14:16:34.127
> 
> 标签：linux, makefile, shared-libraries, static-libraries

我有一个基于 C++ 的项目（许多源文件），使用 gnu make 通过 makefile 编译。我有一个链接库的应用程序，比如 mylib。现在 mylib 归其他开发者所有。我看到生成库二进制文件的路径中有 2 个文件，即 libmylib.so（共享对象）和 libmylib.a（静态库归档文件）

我的应用程序生成文件具有以下链接器选项来链接库 mylib

LDFLAGS+=-l:mylib ...

问题是什么版本的库 mylib 将链接到我的应用程序可执行文件中

共享对象 libmylib.so 还是静态版本 libmylib.a ？

将如何决定，是否有任何其他 makefile 选项来管理它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T14:25:48.400

默认情况下，在非嵌入式 Linux 上，您将获得动态链接。如果你想改变它，你可以在`LDFLAGS`;

```
LDFLAGS+= -Wl,--Bstatic -lmylib -Wl,--Bdynamic 
```

（可能需要引号）这将仅为此库切换为静态，然后返回默认动态。

# iphone - 创建一个类似于 Collectionview 的幻灯片

> ID：14731227
> 
> 赞同：0
> 
> 时间：2013-02-06T14:16:50.617
> 
> 标签：iphone, ios, objective-c, uicollectionview, uicollectionviewcell

我在水平滑动方向上创建了一个带有自定义单元格的 UICollectionView（图 1）。现在客户希望在显示器的右侧看到左端的下一个单元格（图 2）。

有人有想法吗？![![][1]](../Images/42b1a6bdc81336c10f9df27e4e8ecb6b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:37:48.513

你只需要调整单元格的大小。就我而言，我将图像显示为

![我的图片集](../Images/6871dc355e70ca33fe35961715b96ec9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:33:43.470

谢谢，但我已经使用这个[https://github.com/nicklockwood/iCarousel解决了这个问题](https://github.com/nicklockwood/iCarousel)

# python - 用python中的列表替换元素

> ID：14731228
> 
> 赞同：3
> 
> 时间：2013-02-06T14:16:50.943
> 
> 标签：python, list

在python中，用另一个列表中的元素替换列表中的元素的最佳方法是什么？

例如，我有：

```
a = [ 1, 'replace_this', 4 ] 
```

我想替换`replace_this`为`[2, 3]`. 更换后必须是：

```
a = [ 1, 2, 3, 4 ] 
```

**更新**

当然，可以进行切片（对不起，我没有在问题中写出来），但问题是`replace_this`列表中可能有多个值。在这种情况下，您需要循环进行替换，这变得不理想。

我认为使用 会更好`itertools.chain`，但我不确定。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T14:19:29.177

您可以只使用切片：

```
>>> a = [ 1, 'replace_this', 4 ]
>>> a[1:2] = [2, 3]
>>> a
[1, 2, 3, 4] 
```

正如@mgilson 指出的那样-如果您碰巧不知道要替换的元素的位置，那么您可以使用`a.index`它来找到它...（请参阅他的评论）

**与不使用切片相关的更新**

使用`itertools.chain`，确保它`replacements`具有可迭代对象：

```
from itertools import chain

replacements = {
    'replace_this': [2, 3],
    4: [7, 8, 9]
}

a = [ 1, 'replace_this', 4 ]
print list(chain.from_iterable(replacements.get(el, [el]) for el in a))
# [1, 2, 3, 7, 8, 9] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:54:14.030

我会用一个生成器来替换元素，然后用另一个生成器来[压平](https://stackoverflow.com/questions/2158395/flatten-an-irregular-list-of-lists-in-python)它。假设您有一个工作`flatten`生成器，例如在提供的链接中：

```
def replace(iterable, replacements):
    for element in iterable:
        try:
            yield replacements[element]
        except KeyError:
            yield element

replac_dict = {
    'replace_this': [2, 3],
    1: [-10, -9, -8]
}
flatten(replace(a, replac_dict))
# Or if you want a list
#list(flatten(replace(a, replac_dict))) 
```

# ruby - 哈希数组中特定键的不同出现次数

> ID：14731230
> 
> 赞同：2
> 
> 时间：2013-02-06T14:16:51.837
> 
> 标签：ruby, algorithm, data-structures, collections

我有一个这样的数组：

```
array = [{"id"=>"id1", "email"=>"name@organization.com", "sess"=>"sess1"},
{"id"=>"id2", "email"=>"name@organization.com", "sess"=>"sess2"},
{"id"=>"id3", "email"=>"name@organization.com", "sess"=>"sess2"},
{"id"=>"id4", "email"=>"name@organization.com", "sess"=>"sess3"},
{"id"=>"id5", "email"=>"name@organization.com", "sess"=>"sess2"},
{"id"=>"id6", "email"=>"name@organization.com", "sess"=>"sess3"},
{"id"=>"id7", "email"=>"name@organization.com", "sess"=>"sess2"},
{"id"=>"id8", "email"=>"name@organization.com", "sess"=>"sess5"},
{"id"=>"id9", "email"=>"name@organization.com", "sess"=>"sess2"},
{"id"=>"id10", "email"=>"name@organization.com", "sess"=>"sess2"},] 
```

我怎样才能以简洁的方式返回所有不同出现的“sess”而不重复？：

```
["sess1", "sess2", "sess3", "sess5"] 
```

我已经开始编写一个循环，它遍历所有元素并在每次“sess”值已经存在时构建一个新的哈希检查，但我确信在 Ruby 中一定有更好的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T14:18:11.287

试试看：

```
array.map{|n| n["sess"]}.uniq 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T15:01:57.340

一个简单的 #map 后跟 uniq ( *à la* [joscas](https://stackoverflow.com/users/1691515/joscas) ) 是一个很好的解决方案，但只是为了好玩，这将使用最少的内存......

```
array.inject({}) { |m, e| m[e['sess']] = :_; m }.keys 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:21:56.377

存储元素的唯一出现的数据结构称为 a `Set`。Ruby`Set`在它的“标准库”中有一个类，你可以使用它，如下面的代码片段所示（然后你可以适应你的代码）：

```
require 'set'

myset = Set.new
myset.reject(&:nil?)

myset.add('sess2')
myset.add('sess1')
myset.add('sess1') 
```

添加一个已经存在的项目在集合中不会有明显的效果。前面的代码片段将产生一个由`'sess1'`和组成的集合`'sess2'`：`<Set: {'sess1', 'sess2'}>`

此外，正如[@nicooga 指出](https://stackoverflow.com/questions/14731230/different-occurrences-of-a-specific-key-in-an-array-of-hashes#comment-20610949)`nil`的那样，如果您不需要包含丢失的`'sess'`密钥，则可以拒绝a 。

# html - XML：在 URL 中呈现为 HTML 文件

> ID：14731232
> 
> 赞同：0
> 
> 时间：2013-02-06T14:16:54.813
> 
> 标签：html, xml, url, xslt

我被赋予了通过 xsl 将 xml 文件呈现为 html 的任务。这意味着它在 URL 中显示为 /.../index.xml。

但是，该任务要求 xml 文件在 URL 中的 /.../index 处呈现。**.html** _

目前它呈现为 index.xml 而不是 .html - 我该如何实现？

任何想法/资源都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:05:04.047

满足要求的一种简单方法（毫无疑问还有其他方法）是将服务器配置为将 index.html 重定向到 index.xml。如何做到这一点取决于您使用的 Web 服务器；请查阅您的服务器的文档。如果您使用的是 Apache，您将需要阅读 .htaccess 文件和重定向。

# dojo - 推迟 Dojo Deferred

> ID：14731234
> 
> 赞同：1
> 
> 时间：2013-02-06T14:17:08.787
> 
> 标签：dojo, widget, deferred

我在从小部件中的方法返回延迟时遇到了一些问题。该方法本身返回一个 Deferred，因为它是一个 xhrPost。代码就是这样（使用dojo 1.8）

调用代码：

```
quorum = registry.byId("quorumPanel");

var deferredResponse = quorum.updateSelectionCount();

deferredResponse.then(function(data){
    console.log("Success: ", data);
}, function(err){
    console.log("Error: ", err);
}); 
```

和小部件中的代码：

```
updateSelectionCount: function() {

    var self = this;

    var deferredResponse = xhr.post({
        url: "ajxclwrp.php",
        content: [arguments here],
        handleAs: "json"});

    deferredResponse.then(function(response) {

    var anotherDeferred = new Deferred();

        var _boolA = true;
        var _boolB = true;
        dojo.forEach(response.result, function(relationshipInfo){
            [do a bunch of stuff here too set _boolA and/or _boolB]
        });

        self._sethasRequiredAttr(_hasRequired);
        self._setHasRequestedAttr(_hasRequested);
        self.quorumInfo.innerHTML = quorumHtml;

        // Below is not working 
        anotherDeferred.resolve('foo');
        return anotherDeferred;

    });

} 
```

我是否需要设置另一个 Promise 并使用 Promise/all. 我在这一点上感到困惑/沮丧。

TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:31:37.893

.then() 方法返回另一个延迟。你只需要在里面放一个return语句。

```
updateSelectionCount: function() {

    var self = this;

    var deferredResponse = xhr.post({
        url: "ajxclwrp.php",
        content: [arguments here],
        handleAs: "json"});

    return deferredResponse.then(function(response) {

        var _boolA = true;
        var _boolB = true;
        dojo.forEach(response.result, function(relationshipInfo){
            [do a bunch of stuff here too set _boolA and/or _boolB]
        });

        self._sethasRequiredAttr(_hasRequired);
        self._setHasRequestedAttr(_hasRequested);
        self.quorumInfo.innerHTML = quorumHtml;

        return "foo";
    });

} 
```

# awk - awk比较2个文件，找到最小值/最大值并存储它

> ID：14731235
> 
> 赞同：-1
> 
> 时间：2013-02-06T14:17:11.690
> 
> 标签：awk

我有 3 个文件：

File_1 是静态的，内容不变，vales 可以是 -160 到 0：

```
xdslcmd：ADSL 驱动程序和 PHY 状态
状态：空闲
再培训原因：0

音号QLN
   0 0.0000
   1 0.0000
   2 0.0000
   3 0.0000
   4 0.0000
   5 0.0000
   6 0.0000
   7 -160.0000
   8 -119.2000
   9 -128.6700
   10 -113.1200
   11 -93.1000
   12 -130.0000
   13 -120.0000
   14 -110.0000
   15 -100.0000
   16 -90.0000
   17 -100.0000
   18 -110.0000
   19 -120.0000
   20 -130.0000
   21 -140.0000
   22 -110.0000
   23 0.0000
   24 0.0000

```

File_2 看起来像 File_1 但值每次都在变化（值可以是 -160 到 0）

```
xdslcmd：ADSL 驱动程序和 PHY 状态
状态：空闲
再培训原因：0

音号QLN
   0 0.0000
   1 0.0000
   2 0.0000
   3 0.0000
   4 0.0000
   5 0.0000
   6 0.0000
   7 -160.0000
   8 -159.2000
   9 -148.6700
   10 -123.1200
   11 -83.1000
   12 -100.0000
   13 -100.0000
   14 -100.0000
   15 -80.0000
   16 -80.0000
   17 -110.0000
   18 -120.0000
   19 -130.0000
   20 -140.0000
   21 -150.0000
   22 -100.0000
   23 0.0000
   24 0.0000

```

我想比较 File_2 $2 和 File_1 $2 并将它们之间的差异存储在 File_3 中

示例：

```
File_1 包含：18 -120.0000
File_2 包含：18 -140.0000
预期输出：18 -20 0

```

File_1 包含基本值（视为“0”） File_2 每次都会更改并保存实际值。预期输出是测量期间与基值的最小/最大差异。

在同一音调中，QLN 在测量过程中可能会越来越高：

```
File_1 包含：18 -120.0000
File_2 包含：18 -140.0000
File_2 包含：18 -100.0000（在稍后的查询中）
预期输出：18 -20 +20

```

File_1 和 File_2 已排序，前 5 行不相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:28:04.787

```
awk 'FNR<6{next}NR==FNR{a[$1]=$2;next}{printf "%s\t%10f\n",$1,$2-a[$1]}' f1 f2
0     0.000000
1     0.000000
2     0.000000
3     0.000000
4     0.000000
5     0.000000
6     0.000000
7     0.000000
8   -40.000000
9   -20.000000
10  -10.000000
11   10.000000
12   30.000000
13   20.000000
14   10.000000
15   20.000000
16   10.000000
17  -10.000000
18  -10.000000
19  -10.000000
20  -10.000000
21  -10.000000
22   10.000000
23    0.000000
24    0.000000 
```

非零差异：

```
awk 'FNR<6{next}NR==FNR{a[$1]=$2;next}d=$2-a[$1]{printf "%s\t%10f\n",$1,d}' f1 f2
8   -40.000000
9   -20.000000
10  -10.000000
11   10.000000
12   30.000000
13   20.000000
14   10.000000
15   20.000000
16   10.000000
17  -10.000000
18  -10.000000
19  -10.000000
20  -10.000000
21  -10.000000
22   10.000000 
```

的使用`printf`意味着您可以更改输出的格式，例如只有两位小数`printf "%s\t%10.2f\n",$1,d`。

# ms-office - 在 ms.word 中为从右到左的语言创建多级列表

> ID：14731239
> 
> 赞同：4
> 
> 时间：2013-02-06T14:17:39.803
> 
> 标签：ms-office

我想在 microsoft word 2010 中使用波斯语的多级列表。在英语中，数字如下：

![在此处输入图像描述](../Images/bd172ac5ea469361fede4e2800ae6b82.png)

在从右到左的语言（如波斯语）中，它应该是：

![在此处输入图像描述](../Images/81169a9a48f491f02ed00f2c637d0dc1.png)

但我不知道如何改变 RTL 语言的方向。谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-09T17:39:36.813

这是一个如何为深度 2 列表执行此操作的示例：

1.  单击多级列表功能区菜单按钮的菜单部分。
2.  选择“定义新的多级列表”。
3.  转到列表的第 2 级（有 9 个级别的列表框）。
4.  在“数字格式”文本框中，将光标放在第一个点 (.) 字符之后（两个数字之间）。
5.  例如，插入一个 Unicode RLM（从右到左标记）一个空格。
6.  接受您所做的更改。

就是这样，现在数字是从右到左的顺序。显然，您需要对具有多个 RLM 的级别 3、4 等执行此操作。

# unity3d - 无法运行 AngryBots.unity

> ID：14731241
> 
> 赞同：0
> 
> 时间：2013-02-06T14:17:41.613
> 
> 标签：unity3d

我正在尝试运行 Unity 示例 Angry Bots，但出现以下错误：

资产/标准资产/相机脚本/SmoothFollow.js(32,9)：BCE0005：未知标识符：'wantedRotationAngle'。

我正在使用 Unity 版本 3.5.0f5

我已尝试从 Asset Store 重新下载/导入项目，但仍然出现错误。

这是一个屏幕截图：

![在此处输入图像描述](../Images/78d93c9f2fdf0c0785cb4406de727843.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:23:48.363

升级到 Unity 4.0.1 解决了这个问题。

# apache - .htaccess 自定义重定向

> ID：14731247
> 
> 赞同：0
> 
> 时间：2013-02-06T14:17:52.687
> 
> 标签：apache, .htaccess, redirect

我希望能够像这样在我的网站上有任何链接

邮件/asdassda2131dfdsfdsds

实际显示：

/index.php?option=com_loans&view=mail&guid=asdassda2131dfdsfdsds

使用 htaccess

没有实际看到后一个 url（即 mail/asdassda2131dfdsfdsds 保留在地址栏中）

任何人 ？

tnx SC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:29:30.467

将以下重写规则添加到 .htaccess

```
RewriteRule ^mail/ (.*)$ index.php?option=com_loans&view=mail&guid=$1 [R=301,L] 
```

# asp.net - asp.net SQLMembershipProvider 和 Umbraco 会员提供程序中的加密密码

> ID：14731252
> 
> 赞同：0
> 
> 时间：2013-02-06T14:18:02.880
> 
> 标签：asp.net, encryption, umbraco, sqlmembershipprovider

安全菜鸟在这里。

我正在尝试从 asp.net 会员转变为 Umbraco 会员。但是使用 passwordFormat="Encrypted" 似乎在 Umbraco 成员提供程序和 Microsoft 的 SQL 成员提供程序之间进行了不同的加密。

如果我向 SQL 成员资格提供程序注册了两个用户（使用 passwordFormat="Encrypted"） - 编码的密码是不同的。如果我对 Umbraco 提供商做同样的事情，他们是一样的。

虽然所有字符串都解密为相同的东西（正确的密码） - 我显然不能使用 umbraco DB 中的 SQL 成员资格提供程序加密的密码（ValidateUser 失败）。

有人有想法么？

注意：我在两个站点上使用相同的 machineKey。

编辑：在 Umbraco 会员提供者上调用 EncryptPassword() 和 EncodePassword() 会给出不同的结果 - 而 EncodePassword 是正确的调用方法。但是 EncodePassword 在 .NET Membership 提供程序上不可用。这是我困惑的另一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:21:47.130

密码可能不同，因为它们是加盐的。查看成员数据库中的 PasswordSalt 列，它应该是 Base64 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:02:49.670

Umbraco 密码使用`System.Security.Cryptography.HMACSHA1`类进行哈希处理。我猜你可以用 HMACSHA1 对 SQL 会员用户密码进行哈希处理并称之为好。

有关详细信息，请参阅[使用哈希密码添加用户。](http://our.umbraco.org/wiki/reference/api-cheatsheet/users,-user-types-and-permissions/add-user-with-hashed-password)

# entity-framework - 为什么未设置所需的关系属性时不触发 DbValidationException？

> ID：14731253
> 
> 赞同：0
> 
> 时间：2013-02-06T14:18:03.203
> 
> 标签：entity-framework, validation

我的模型：

```
public class Post
{
  public int PostId { get; set; }
  public string Name { get; set; }
  public string Content { get; set; }
  public int? BlogId { get; set; }
  public Blog Blog { get; set; }
}

public partial class PostMap : EntityTypeConfiguration<Post>
{
  public PostMap() : base()
  {
    HasKey(c => c.PostId);
    Property(c => c.Content);
    Property(c => c.Name).IsRequired();       
    HasRequired(m => m.Blog)
                      .WithMany(t => t.Posts)
                      .HasForeignKey(m => m.BlogId)
                      .WillCascadeOnDelete(false);
    ToTable("Post");
  }
} 
```

第一个例子：

```
 using (var ctx = new BlogContext())
  {
    try
    {
      Post post = new Post { Content = "Content" };

      ctx.Posts.Add(post);

      ctx.SaveChanges(); // fired DbEntityValidationException "The Name field is required"
    }
    catch (Exception e) { }
  } 
```

第二个例子：

```
 using (var ctx = new BlogContext())
  {
    try
    {
      Post post = new Post { Content = "Content", Name = "Name" };

      ctx.Posts.Add(post);

      ctx.SaveChanges(); // fired DbUpdateException "Cannot insert the value NULL into column 'BlogId', table 'EntityFramework.dbo.Post'; column does not allow nulls. INSERT fails."
    }
    catch (Exception e) { }
  } 
```

在我看来，这是一个错误。为什么没有像第一个示例中那样触发 DbEntityValidationException 而是触发了 DbUpdateException？我需要得到 DbEntityValidationException。我试图将 [Required] 属性放在 BlogId 属性中。然后我得到 DbEntityValidationException，但我不想在 Post 类中使用属​​性。是否可以在不使用 BlogId 属性上方的 Required 属性的情况下获得 DbEntityValidationException ？

# sql-server - MS Access 从 SQLServer 存储过程中获取不一致的结果

> ID：14731254
> 
> 赞同：-1
> 
> 时间：2013-02-06T14:18:05.557
> 
> 标签：sql-server, ms-access-2007

我正在为客户工作的项目遇到一个奇怪的问题。我有一个 Access 2007 数据库从 SQLServer 存储过程中获取数据。几个 SP 工作正常。一个 SP 正在工作，然后我们向它添加了一个字段。该字段已存在于源表中。

最初，该表会给我一个 school_code(key) 和一个grade_name。我们添加了一个序列号，以便以特定顺序显示grade_names 列表。在我们添加序列号之前，我会得到我期望的列表……对于给定的学校，我会得到一个像“PK”、“K”、“1”、“2”等的列表。

添加序列号后，我在列表中获得相同数量的项目，但列表中的每个项目对于给定学校都是相同的，即它们都是“PK”并且它们的序列号都是“1”。

当我使用 SQL 工具查看存储过程时，列表看起来是正确的。当我通过 Access 查看它时，列表只显示给定学校的重复项。从学校到学校，grade_name 将显示该学校的第一个 grade_name。序列列下方的每个值都是“1”。

关于如何攻击这个的任何想法？？？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:57:16.697

好的，看起来问题与 DISTINCT 关键字有关。当我包含它时，我得到了我期望的答案。当我将子句添加到“ORDER BY 序列”时，我被禁止使用 DISTINCT；两者不能一起使用。

为了解决这个问题，我删除了 ORDER BY，将结果放入一个二维数组，然后对数组进行排序并使用它。有点杂乱无章，因为我不明白为什么放弃 DISTNCT 会导致问题......

# php - PHP Soap - 逻辑、服务器和许多其他问题

> ID：14731256
> 
> 赞同：0
> 
> 时间：2013-02-06T14:18:10.270
> 
> 标签：php, soap, header, client

我们有以下场景：

1.  设置一个 web 服务 - wsdl 和所有的，应该监听客户端发送的数据，接收它，用它做一些事情，如果一切正常，发送一个响应为“ok”，如果有什么东西死了，发送一个“假”
2.  客户端运行生成soap/xml 请求位的脚本，创建soap 客户端并将请求发送到wsdl。
3.  客户端得到一个结果，表明 Web 服务未处理数据 - 错误。Web 服务根本不接收任何数据。

我无权访问网络服务——它是别人的。生成的请求正文（整个等）正在正确生成-当我通过soapUI发送它时它可以工作，但不能通过我的php soap客户端。

`SoapClient`我尝试使用带有,`__doRequest`的内置 Soap `__call`（尝试了一切），但没有任何反应 - 仍然得到`'false'`结果。我尝试重写 NuSoap 以使用 Soap 1.2，但仍然只是`'false'`返回 true 的结果。

所以，我想知道是否有人可以回答我以下问题：

1.  在服务器上，我是否需要专门安装一些东西才能使其与 Soap 1.2 一起使用？

2.  当客户端必须向 Web 服务的函数发送数据时，我应该使用 __doRequest 还是 __call？或者是其他东西？

3.  根据我的 php.ini，服务器 header_accept 值没有使用soap 1.2所需的应用程序/soap+xml - 如果是的话，这可能是问题所在 - 回到问题1，或者我如何将类型添加到header_accept？

编辑：

```
$client = new SoapClient(
    "the_wsdl_url_correct_for_sure.wsdl", 
    array(
       'soap_version' => SOAP_1_2, 
       'trace'        => 1,
    )
);

$result = $client->__doRequest(
    $the_var_i_use_to_store_the_soap_xml_thingie_that_works_through_soapUI_so_it_is_correct, $location, 
    $the_function_I_try_to_call, 
    "1.2"
); 
```

因为`$location`我是动作的命名空间（我试图调用的函数并将数据从第一个参数发送到）。对于动作/功能，我尝试仅使用在命名空间中定义的动作名称，并使用带有“full_namespace/action”的完整路径

我应该使用`__doRequest`还是`__call`尝试将数据发送到 WSDL？

编辑2：

我发送的请求是：

```
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:soapenc="http://www.w3.org/2003/05/soap-encoding" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <env:Header/>
   <env:Body>
      <ns2:FunctionName xmlns:ns2="namespace_of_the_service">
         <arg0>
              <data1>Some data</data1>
           </arg0>
       </ns2:FunctionName>
   </env:Body>
</env:Envelope> 
```

更多关于这个问题的信息可以在我之前的帖子中阅读： [PHP Soap Client - 发送错误的标头“soapenv:VersionMismatch”](https://stackoverflow.com/questions/14702240/php-soap-client-sending-the-wrong-headers-soapenvversionmismatch)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:38:48.733

您在此处提出问题的方式不适用于 Stackoverflow，我将其留在这里作为评论，而不是作为答案，只是为了向您表明您在获得这些答案方面并没有取得太大进展：

1.  > 在服务器上，我是否需要专门安装一些东西才能使其与 Soap 1.2 一起使用？

    不，带有 Soap 扩展的最新 PHP 版本就足够了。

2.  > 当客户端必须将数据发送到 Web 服务的功能时，我使用`__doRequest`还是`__call`？或者是其他东西？

    这取决于模式（WSDL 与否）以及您想要做什么。WSDL 是什么以及 WSDL 模式是什么，请[从头到尾阅读 PHP 手册中的整个 Soap 书，](http://www.php.net/book.soap.php)我也建议，因为文档并不完美，您让自己熟悉 WSDL 是什么以及一些第三方 WSDL SoapClient 示例您可以通过您选择的互联网搜索引擎找到它们。请[`__doRequest`](http://php.net/soapclient.doRequest)参阅手册您可以用它做什么。因为[`__call`](http://www.php.net/soapclient.call)该手册清楚地说明了它的用途，并且它已被弃用，因此您可能正在寻找它[`__soapCall`](http://www.php.net/soapclient.soapCall)。

3.  > 根据我的 php.ini，服务器 header_accept 值没有使用soap 1.2所需的应用程序/soap+xml - 如果是的话，这可能是问题所在 - 回到问题1，或者我如何将类型添加到header_accept？

    这可能是根据你的`php.ini`，我的意思是你可以在那里写你想要的，但是根据 PHP 文档本身，没有`header_accept`PHP ini 指令。请仔细检查 PHP.ini 中写入的内容，然后仔细检查 PHP 手册中该指令的文档，是否它控制您想要控制的内容 - 或者如果已经设置 - 它没有设置可能会妨碍你。

    据我所知，对于 SoapClient，您不需要设置任何基于 PHP ini 的标头接受指令（即使在该指令旁边实际上并不存在！）以使其正常工作。它适用于默认配置，因此您无需添加任何内容。

    这让我想知道你为什么要问？是什么让您认为您需要向该（您未进一步指定）ini 设置添加任何内容？

# java - 计算工作和假期时段 - Java & Hibernate

> ID：14731259
> 
> 赞同：0
> 
> 时间：2013-02-06T14:18:14.840
> 
> 标签：java, algorithm, spring, hibernate

我需要在我的应用程序中计算员工的工作/假期时段。

假期有一个 startDate 和一个 endDate。用户可以提供一个时间段，并且必须生成一个报告，其中包含该时间段内用户的工作和休假时段。

例如，用户从 3.02.2013 - 4.02.2013 休假，搜索时间为 1.02.2013 - 28.02.2013。

报告应如下所示：

*   1-2.02.2013 - 工作

*   3-4.02.2013 - 假期

*   5-28.02.2013 - 工作

我不确定如何以有效的方式做到这一点。我在此期间获得假期的 DAO 方法如下：

```
public List<VacationRequest> getVacationsInPeriodForUser(Long userId,
        Date startDate, Date endDate) {
    List<VacationRequest> requests = getSessionFactory()
            .getCurrentSession()
            .createQuery(
                    "select req from VacationRequest req left join fetch req.vacationType where req.requestState.description = 'APPROVED' and req.user.id= ? and req.startDate >= ? and req.endDate <= ?")
            .setParameter(0, userId).setParameter(1, startDate)
            .setParameter(2, endDate).list();

    return requests;
} 
```

但这在用户在整个供应期间都处于休假状态的情况下不起作用。例如，如果在上面的示例中搜索周期是 3.02.2013 - 4.02.2013。

谁能建议如何以有效的方式计算这些插槽？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:30:03.947

你想测试： req.startDate < endDate && req.endDate > startDate

您正在测试 req.startDate > startdate && req.endDate < endDate，这消除了在您的请求绑定之前和之后开始和结束的时间段。

编辑：假设您检查 startDates 总是在 endDates 之前

你的代码变成

```
public List<VacationRequest> getVacationsInPeriodForUser(Long userId,
        Date startDate, Date endDate) {
    List<VacationRequest> requests = getSessionFactory()
        .getCurrentSession()
        .createQuery(
                "select req from VacationRequest req left join fetch req.vacationType where req.requestState.description = 'APPROVED' and req.user.id= ? and req.startDate <= ? and req.endDate >= ?")
        .setParameter(0, userId).setParameter(1, enDate)
        .setParameter(2, startDate).list();

return requests;
} 
```

# java - 在 iReport 中的表达式时打印

> ID：14731262
> 
> 赞同：4
> 
> 时间：2013-02-06T14:18:26.560
> 
> 标签：java, jasper-reports, ireport

我试图在 iReport 中做一个简单的表达式，但无论我尝试什么似乎都给了我一个错误。这似乎是一件很简单的事情，但每当我尝试用 Java 做任何事情时，我都需要大约 20 次尝试才能做到正确。

我要做的就是在整数字段的值不为零时显示子报表。我正在为子报表控件使用 Print When Expression。

这是我尝试过的一些（许多）事情：

`$F{count}!=0`

`$F{count}!=Integer(0)`

`!$F{count}.compareTo(0)`

显然我的Java很烂。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T14:38:43.713

```
new Boolean($F{count}.intValue()!=0) 
```

很高兴我能帮上忙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:28:15.733

w00t！第 35 次是魅力。我终于得到了以下表达式。如果有人能告诉我为什么，我将不胜感激。

```
new Boolean($F{count}.compareTo(new Integer(0))!=0) 
```

# iphone - Uitableview displaying objects

> ID：14731267
> 
> 赞同：0
> 
> 时间：2013-02-06T14:18:40.617
> 
> 标签：iphone, ios, objective-c, uitableview

I want to display the values of a `NSMutableArray` in a `UITableView`. In the `NSMutableArray` are values of objects. But the `UITableView` doesn't display anything. If I use a normal `NSArray` with static values it works well.

So this is my code:

This is my object

```
@interface Getraenke_Object : NSObject {
    NSString *name;
} 
```

my `NSMutableArray`

```
NSMutableArray *getraenkeArray;

here is where I get the values into the array:
for(int i = 0; i < [getraenkeArray count]; i++)
    {    
        [_produktName addObject:[[getraenkeArray objectAtIndex:i]getName]];
        NSLog(@"test: %@",_produktName);
    } 
```

and that is how I try to display it in the `UITableView`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ProduktCell";
    ProduktTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[ProduktTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    int row = [indexPath row];

    cell.produktName.text = _produktName [row];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:22:30.330

it seems like you never allocated the NSMutableArray. you are missing:

```
_produktName = [NSMutableArray array]; 
```

and that's why the addObject is being sent to nil..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:27:20.313

Just make your getraenkeArray as member and:

```
cell.produktName.text = [[getraenkeArray objectAtIndex:indexPath.row] getName]; 
```

# facebook - 未接受好友请求的好友的 FB.ui apprequest 失败

> ID：14731271
> 
> 赞同：1
> 
> 时间：2013-02-06T14:18:59.083
> 
> 标签：facebook, facebook-graph-api, fb.ui

我有一个应用程序，允许用户根据朋友列表发送应用程序邀请请求。

我正在使用电话：

```
 FB.ui({ method: 'apprequests',
                message: 'My App Request',
                to: users,
            }, requestCallback); 
```

我遇到的问题是我向 GraphAPI /FRIENDLIST_ID/members 发出请求？它正在返回尚未接受朋友请求的成员，因此当我在上面进行 apprequests 调用时，我收到以下错误：

API 错误代码：100 API 错误描述：无效参数错误消息：只能向此应用程序的朋友或用户发送请求。

有没有办法与特定用户进行 FB.ui 调用，然后如果失败，将请求替换为 to 字段空白，以便用户可以选择他们想要发送给的用户？或者有没有办法判断某人是否接受了你的好友请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:42:43.327

我认为那是您的实现不是预期的用途。为了最方便用户，您不应该预先填写“to”部分，以便用户自己选择他想邀请的朋友。

但是，回到你的实现：

您可以检查 requestCallback，您收到的响应是什么。如果这是一个错误，您应该能够在没有“to”字段的情况下再次调用 FB.ui。

# android - 文本外观在我的主题中不起作用

> ID：14731274
> 
> 赞同：3
> 
> 时间：2013-02-06T14:19:04.140
> 
> 标签：android, xml, android-theme

我试图在我的所有应用程序中添加一个样式，所以我创建了一个包含我的样式的主题：

```
<resources>
    <style name="MyTheme" parent="android:Theme.Holo.Light">
        <item name="android:textAppearance">@style/subtitle</item>
    </style>

    <style name="subtitle parent="@android:style/TextAppearance">
        <item name="android:textColor">@color/purple</item>
        <item name="android:textSize">40sp</item>
    </style>
</resources> 
```

但`textAppearance`不起作用它保持不变，但是当我`textColor`在我的主题中加入类似的东西时，它就起作用了

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-05-25T02:29:53.450

这是一个很老的问题，但答案可能会对某人有所帮助。解决这个问题的关键是这里的“样式技术的优先顺序”：  ![不同样式技术图像的优先顺序](../Images/ea0e547454fbae12cdcc7243f4e209c0.png)

在顶部是最高优先级，在底部是最低优先级。

正如我们所看到`theme`的具有最低优先级，在您的示例中，您的`android:textAppearance`属性被`default style`接受此属性的每个视图覆盖，默认样式属性在每个接受此属性的特定视图中定义，在这种情况下`android:Theme.Holo.Light`提供textView 的默认样式为`android:textViewStyle`... 按钮是`android:buttonStyle`（从 TextView 继承的`textAppearance`），依此类推。

因此，如果您尝试将该`android:textAppearance`属性应用于 TextVew 您应该使用 `<item name="android:textViewStyle">@style/subtitle</item>`而不是`<item name="android:textAppearance">@style/subtitle</item>`inside `MyTheme`。远离将其设置`android:textViewStyle`为 null，这样您当前的代码将与textViews 一起正常工作`<item name="android:textViewStyle">null</item>`

这篇文章更深入地解释了这个优先级：

[https://medium.com/androiddevelopers/whats-your-text-s-appearance-f3a1729192d](https://medium.com/androiddevelopers/whats-your-text-s-appearance-f3a1729192d)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T20:17:14.600

取决于您的目标 API，您需要将自定义代码放在不同的 /res/values-vxx/style.xml 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:06:16.057

我可以看到，您没有在 xml 中为主题声明颜色。请在 中添加以下行`<resources>`并尝试。您的 xml 将如下所示：

```
<resources>
<style name="MyTheme" parent="android:Theme.Holo.Light">
    <item name="android:textAppearance">@style/subtitle</item>
</style>

 <color name="purple">code for your color</color>

<style name="subtitle parent="@android:style/TextAppearance">
    <item name="android:textColor">@color/purple</item>
    <item name="android:textSize">40sp</item>
</style> 
```

我认为这会做到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-18T07:37:16.797

对于 TextView，请尝试`android:textAppearanceSmall`在您的主题内。

# scala - 使用 Scala 2.10 隐式类转换为“内置”标准库类

> ID：14731281
> 
> 赞同：4
> 
> 时间：2013-02-06T14:19:20.783
> 
> 标签：scala, implicit-conversion

我正在尝试使用新的 Scala 2.10`implicit class`机制将 a 转换`java.sql.ResultSet`为`scala.collection.immutable.Stream`. 在 Scala 2.9 中，我使用以下代码，该代码有效：

```
/**
 * Implicitly convert a ResultSet to a Stream[ResultSet]. The Stream can then be
 * traversed using the usual methods map, filter, etc.
 *
 * @param resultSet the Result to convert
 * @return a Stream wrapped around the ResultSet
 */
implicit def resultSet2Stream(resultSet: ResultSet): Stream[ResultSet] = {
  if (resultSet.next) Stream.cons(resultSet, resultSet2Stream(resultSet))
  else {
    resultSet.close()
    Stream.empty
  }
} 
```

然后我可以像这样使用它：

```
val resultSet = statement.executeQuery("SELECT * FROM foo")
resultSet.map {
  row => /* ... */
} 
```

`implicit class`我想出的看起来像这样：

```
/**
 * Implicitly convert a ResultSet to a Stream[ResultSet]. The Stream can then be
 * traversed using the usual map, filter, etc.
 */
implicit class ResultSetStream(val row: ResultSet)
  extends AnyVal {
  def toStream: Stream[ResultSet] = {
    if (row.next) Stream.cons(row, row.toStream)
    else {
      row.close()
      Stream.empty
    }
  }
} 
```

但是，现在我必须调用`toStream`，`ResultSet`这会破坏“隐式”部分：

```
val resultSet = statement.executeQuery("SELECT * FROM foo")
resultSet.toStream.map {
  row => /* ... */
} 
```

我究竟做错了什么？

我还应该使用`implicit def`and`import scala.language.implicitConversions`来避免“功能”警告吗？

**更新**

`ResultSet`这是将 转换为`scala.collection.Iterator`（仅 Scala 2.10+）的替代解决方案：

```
/*
 * Treat a java.sql.ResultSet as an Iterator, allowing operations like filter,
 * map, etc.
 *
 * Sample usage:
 * val resultSet = statement.executeQuery("...")
 * resultSet.map {
 *   resultSet =>
 *   // ...
 * }
 */
implicit class ResultSetIterator(resultSet: ResultSet)
extends Iterator[ResultSet] {
  def hasNext: Boolean = resultSet.next()
  def next() = resultSet
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T14:56:43.360

I don't see a reason here to use implicit classes. Stick to you first version. Implicit classes are mainly useful (as in "concise") to add methods to existing types (the so called "enrich my library" pattern). It is just syntactic sugar for a wrapper class and an implicit conversion to this class.

But here you are just converting (implicitly) from one **preexisting** type to another **preexisting** type. There is no need to define a new class at all (let alone an implicit class).

In your case, you **could** make it work using implicit classes by making `ResultSetStream` extend `Stream` and implementing as a proxy to `toStream`. But that would really a lot fo trouble for nothing.

# r - R：“ExpressionSet”数据未加载

> ID：14731289
> 
> 赞同：-3
> 
> 时间：2013-02-06T14:19:46.370
> 
> 标签：r

我想将我的“数组数据”数据框转换为表达式集。我按照这个链接并设法得到相同的 ( [Expressionset-phenodata](https://stackoverflow.com/questions/7363991/expressionset-phenodata) )。

所以我在这里得到我的表达式集

```
> test
ExpressionSet (storageMode: lockedEnvironment)
assayData: 1000 features, 733 samples
  element names: exprs
protocolData: none
phenoData
  sampleNames: X8261 X8164 ... X7727 (733 total)
  varLabels: Batch gender
  varMetadata: labelDescription
featureData: none
experimentData: use 'experimentData(object)'
Annotation: 
```

但现在我想加载/使用这个对象/数据，以便将它用于特定的 R 包“PVCA”（[http://www.bioconductor.org/packages/2.12/bioc/vignettes/pvca/inst/doc/ pvca.pdf](http://www.bioconductor.org/packages/2.12/bioc/vignettes/pvca/inst/doc/pvca.pdf) ) ，所以我这样做：

```
> data(test)
Warning message:
In data(test) : data set âtestâ not found 
```

我收到此警告“找不到数据”。谁能帮我知道我为什么会得到这个？我能做些什么来加载我的数据并克服这个问题？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:29:23.977

`data`是一个函数，它返回包的作者已包含在包中的数据集。如果您的目标是跨 R 会话保存 ExpressionSet（这不是使用 PVCA 所必需的，只需`library(PVCA)`在您创建 ExpressionSet 的同一会话中）然后使用

```
save(test, file="test.Rda") 
```

在一个会话中和

```
load("test.Rda") 
```

在另一个。

# mobile - 优化 Firebase 在移动设备上的功耗

> ID：14731293
> 
> 赞同：1
> 
> 时间：2013-02-06T14:20:01.860
> 
> 标签：mobile, power-management, battery, firebase

对于可接受约 1 分钟（或手动同步）延迟的基于 Firebase 的移动应用程序，功耗是否最佳？调整保活等是否有可能并且有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:35:27.343

Firebase 针对实时通信进行了优化（意味着尽可能低的延迟）。虽然我没有理由怀疑它会耗电，但我们还没有（尚未）针对功耗进行优化或进行任何深入的测试。

如果您自己进行任何测试并想分享您的发现，请随时发送电子邮件至 support@firebase.com。

# android - 读取文件后字符串仍然为空

> ID：14731294
> 
> 赞同：0
> 
> 时间：2013-02-06T14:20:12.247
> 
> 标签：android, string, bufferedreader

我有一个字符串对象。我使用`bufferedReader.readline()`. 我已经注销了 s 的内容，在 logcat 中我可以看到它们，所以我知道它不为空。我后来使用 s 并调用`String.split`它，但我得到了一个 NPE，为什么，当它已经填充而不为空时？

谢谢。

```
String cachePath = getCacheDir().getAbsolutePath();
        FileReader fr = null;
        try {
            fr = new FileReader(cachePath + "/dbcache/" + "cacheTextFile.txt");
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        BufferedReader br = new BufferedReader(fr);
        String s = null;
        try {
            while((s = br.readLine()) != null) {
            Log.e(TAG, "s = " + s);
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {

            fr.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 

        HashMap<String, String> hash = new HashMap<String, String>();
        Log.e(TAG, "about to call on s"+s.length());
        String[] arr = s.split(",");

        for(int i = 0; i < arr.length; i=i+2){
            String key = arr[i].toString();
            hash.put(key, "-1");
            Log.e(TAG, "hash key = " + hash.get(key));
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:23:54.220

在中`while`，你总是覆盖`s`字符串..所以当你到达末尾时，它将是`null`

```
 while((s = br.readLine()) != null) {
    Log.e(TAG, "s = " + s);
 } 
```

改为这样做..

```
 StringBuilder stringBuilder = new StringBuilder();
 String currentLine = null;
  while((currentLine = br.readLine()) != null)
        stringBuilder.append(currentLine + "\n"); 
```

# android - protobyname 错误的任何解决方法？

> ID：14731296
> 
> 赞同：3
> 
> 时间：2013-02-06T14:20:20.690
> 
> 标签：android, linux, bash, shell

当我尝试通过 ADB 将 IP 表应用到有根的 android 设备时，我收到以下错误：

```
protoent* getprotobyname(char const*)(3) is not implemented on android 
```

我在互联网上进行了一些研究，并了解这是一个突出的错误。如果有的话，我还没有看到任何解决方法或修复？（或者至少没有用简单的英语写的）。

如果有人能解释或指出我正确的方向，将不胜感激。

问候

瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-05T21:01:26.507

这篇文章很有帮助......至少它解决了这个错误

> [https://groups.google.com/forum/#!msg/mozilla.dev.b2g/6vgCZn0s0Xw/lGiaGrS0YJIJ](https://groups.google.com/forum/#!msg/mozilla.dev.b2g/6vgCZn0s0Xw/lGiaGrS0YJIJ)

和数字代码替换名称：

> [http://www.diablotin.com/librairie/networking/tcpip/ch02_07.htm](http://www.diablotin.com/librairie/networking/tcpip/ch02_07.htm)

# jsf - 如何验证要上传的文件？

> ID：14731299
> 
> 赞同：1
> 
> 时间：2013-02-06T14:20:22.157
> 
> 标签：jsf, file-upload, liferay, portlet

我正在研究liferay项目。我必须把文件上传功能。我用过的

```
<bridge:inputFile/> 
```

但是当我尝试上传 0 字节的空白文件时，不会调用我的上传方法。实际上，我对空白文件的验证在我的上传方法中。

# c# - C#中的类转换

> ID：14731300
> 
> 赞同：2
> 
> 时间：2013-02-06T14:20:42.500
> 
> 标签：c#, asp.net, oop, casting

这是c#代码

```
class A {
   public int Foo(){ return 5;}
   public virtual int Bar(){return 5;}
}
class B : A{
   public new int Foo() { return 1;}     //shadow
   public override int Bar() {return 1;} //override
} 
```

的输出

```
Console.WriteLine(((A)clB).Foo()); // output 5 <<<--
Console.WriteLine(((A)clB).Bar()); // output 1 
```

我们如何得到这个输出。任何人都可以在这里解释类转换过程。

***更新：***

以及这如何显示阴影和覆盖之间的区别

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T14:23:00.570

我会假设

```
var clB = new B(); 
```

`Foo`和`Bar`方法之间的区别在于，虽然`Bar`使用继承和多态性来决定调用什么实现，但该`Foo`方法隐藏了它的原始实现。

总之，一个词，`A.Foo()`完全`B.Foo()`不相关，只是碰巧同名而已。当编译器看到一个类型的变量`A`调用`Foo`它时，它会进入并执行`A.Foo()`，因为该方法不是虚拟的，所以它不能被覆盖。类似地，当它看到`B`调用`Foo`它的类型的变量时，它会执行`B.Foo()`，而不管变量中包含的实例的实际类型。

另一方面，该`Bar`方法被定义为虚拟的，继承类可以（并且应该）覆盖它的实现。因此，无论何时调用`Bar`，无论是来自声明为`A`or的变量，`B`实际调用的方法都必须在调用对象本身的层次结构中作为“最新”实现找到，不受用于引用对象的变量类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:26:36.617

在类`B`中，您引入了一个与已经存在的`new`方法`Foo`（继承自 ）具有相同名称和签名的方法`A`。所以`B`有两个同名的方法。如果你能避免它，那不是你会做的事情。

调用这两种方法`Foo`中的哪一种，取决于所使用的变量或表达式（类型为or ）的*编译时类型。*`A``B`

相比之下，方法`Bar`是`virtual`。中只有一种方法`Bar`。`B`无论表达式的编译时类型是什么，它始终是被调用的“正确”覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:27:21.340

写作

```
((A)clB).Foo() 
```

就像说“把`clB`它当作一个`A`（如果可以的话）对待并给我”的结果`Foo()`。由于`A`具有非虚拟`Foo`方法，因此它执行`A.Foo`. 由于`B`'s`Foo`方法是一个 " `new`" 方法，因此在本例中不使用它。

写作

```
((A)clB).Bar() 
```

是相似的——“把`clB`它当作一个`A`（如果可以的话）对待并给我”的结果`Bar()`。现在`A`有一个*虚拟* `Bar`方法，这意味着它可以在基类中被*覆盖。*由于对象*实际上是*a `B`，它有一个`override`for `Foo()`，`B.Foo()`因此被调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T14:27:27.460

```
var clB = new B();
//Uses B's Foo method
Console.WriteLine(clB.Foo());    // output 1
//Uses A's Foo method since new was use to overload method
Console.WriteLine(((A)clB).Foo()); // output 5
//Uses B's Bar Method
Console.WriteLine(clB.Bar());    // output 1
//Uses B's Bar Method since A's Bar method was virtual
Console.WriteLine(((A)clB).Bar()); // output 1 
```

# ruby - Slim 模板：如何挽救异常？

> ID：14731301
> 
> 赞同：2
> 
> 时间：2013-02-06T14:20:45.810
> 
> 标签：ruby, erb, slim-lang

我想将以下 erb 代码转换为 slim。

```
<% begin %>
  <%= some_function %>
<% rescue Exception %>
  <%= some_other_function %>
<% end%> 
```

我的做法是：

```
- begin 
  = some_function
- rescue Exception 
  = some_other_function 
```

但这给出了一个错误：

```
index.slim:34: syntax error, unexpected keyword_ensure, expecting $end 
```

如何使用 slim 正确挽救异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T14:28:21.873

你需要做一个助手。

您应该在那个助手中放置开始/救援逻辑。

```
# my_helper.rb
class MyHelper
  def my_func
    begin
      some_function
    rescue
      some_other_func
    end
  end
end

# slim view
= my_func 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T12:55:38.540

这实际上是 slim 中的一个[错误，](https://github.com/slim-template/slim/issues/374)并且在 slim 1.3.7 以上版本中已修复（[https://github.com/slim-template/slim/commit/e4df090c2c82c3563bcc4e625cbd6ab55a60caf8](https://github.com/slim-template/slim/commit/e4df090c2c82c3563bcc4e625cbd6ab55a60caf8)）

语法现在完全按预期工作。不需要辅助方法或缩进。

# php - 正则表达式来检测冒号和两边呢？

> ID：14731303
> 
> 赞同：1
> 
> 时间：2013-02-06T14:20:48.927
> 
> 标签：php, regex

首先请看我的字符串：

```
$a = "[ child : parent ]"; 
```

我怎样才能检测到模式是：

```
 [(optional space)word or character(optional space) : (optional space)word or character(optional space)] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:26:11.513

您可以在 PHP 中按如下方式捕获：

你的正则表达式是`/\[ *\w+ *: *\w+ *]/`

您将编写如下所示的代码以查看它是否匹配。

```
if (preg_match('/regex/', $string)) {
    // do things
} 
```

**正则表达式的解释**

*   `\`左括号前 有一个反斜杠 ( )，因为`[`在正则表达式中具有特殊含义。反斜杠防止使用其特殊含义。
*   星号 ( `*`) 匹配前一个字符表达式的 0 个或多个。在这种情况下，它匹配 0 个或多个空格。如果您改为使用表达式`\s*`，它将匹配 0 个或更多空白字符（空格、制表符、换行符）。最后，如果您希望它匹配前一个字符的 0 或 1，您可以使用`?`代替`*`.
*   加号 ( `+`) 匹配前一个字符表达式的 1 个或多个。字符表达式匹配字母、`\w`数字或下划线。如果您不希望下划线匹配，则应改为使用字符类。例如，您可以使用`[A-Za-z0-9]`.

[您可以在http://www.regular-expressions.info](http://www.regular-expressions.info)和[http://www.regular-expressions.info/php.html](http://www.regular-expressions.info/php.html)找到更多关于正则表达式的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:24:20.707

我不确定 php 特定版本的正则表达式，但这应该可以工作：

```
\[ ?\w+ ? :  ?\w+ ?\] 
```

[这](http://regex.powertoy.org/)是我过去用来查找所需模式的正则表达式的站点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T14:25:23.253

使用这个正则表达式 `\[\s*\w+\s*:\s*\w+\s*\]`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T14:27:03.713

我可能会这样做

`preg_match('/^\[\s?\w+\s+:\s+\w+\s?\]$/', $string)`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T14:58:51.160

从您的示例文本中，我会说您的意思是*人类词*而不是`\w` *正则表达式词*

```
preg_match('/\[ ?([a-z]+) ?: ?([a-z]+) ?\]/i', $a, $matches); 
```

解释演示：[http ://regex101.com/r/hB2oV9](http://regex101.com/r/hB2oV9)

`$matches`将保存两个值，用`var_dump($matches);`

# .net - 为什么在同一元素上的 mouseDown 事件触发后双击事件不触发？

> ID：14731304
> 
> 赞同：11
> 
> 时间：2013-02-06T14:20:47.897
> 
> 标签：.net, vb.net

我在控件上有一个 mousedown 事件和 click 事件。mousedown 事件用于启动拖放操作。我使用的控件是一个 Dirlistbox。

```
 Private Sub Dir1_MouseDown(ByVal sender As System.Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Dir1.MouseDown

    Dim lab As New Label
    lab.Text = Dir1.DirList(Dir1.DirListIndex)
    lab.DoDragDrop(lab, DragDropEffects.Copy)

End Sub 
```

但是当我单击控件时，只有 mousedown 事件会触发，click 事件不会触发。如果我在 mousedown 事件中注释掉“lab.DoDragDrop(lab, DragDropEffects.Copy)”，那么点击事件就会触发。当我单击控件时，我该怎么做才能触发 mousedown 和 click 事件？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-06T15:39:45.533

这是设计使然。MouseDown 事件捕获鼠标，Control.Capture 属性。内置的 MouseUp 事件处理程序检查鼠标是否仍然被捕获并且鼠标没有移动太远，然后触发 Click 事件。麻烦的是调用 DoDragDrop() 将取消鼠标捕获。必须如此，因为现在使用鼠标事件来实现拖放操作。所以你永远不会得到 Click 或 DoubleClick 事件。

需要响应点击*和*拖放的控件是一个可用性问题。但是，它是可以修复的，您需要做的是确保用户已将鼠标从原来的鼠标向下位置移动了足够多，*然后*开始拖动。使您的代码如下所示：

```
Private MouseDownPos As Point

Private Sub Dir1_MouseDown(ByVal sender As System.Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Dir1.MouseDown
    MouseDownPos = e.Location
End Sub

Private Sub Dir1_MouseMove(ByVal sender As System.Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Dir1.MouseMove
    If e.Button And MouseButtons.Left = MouseButtons.Left Then
        Dim dx = e.X - MouseDownPos.X
        Dim dy = e.Y - MouseDownPos.Y
        If Math.Abs(dx) >= SystemInformation.DoubleClickSize.Width OrElse _
           Math.Abs(dy) >= SystemInformation.DoubleClickSize.Height Then
            '' Start the drag here
            ''...
        End If
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-26T21:27:29.223

谁需要带有拖放功能的 c# 版本

```
 private Point MouseDownPos;
    private void dataGridView1_MouseDown(System.Object sender, System.Windows.Forms.MouseEventArgs e)
    {
        MouseDownPos = e.Location;
    }

    private void dataGridView1_MouseMove(System.Object sender, System.Windows.Forms.MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
        {
            dynamic dx = e.X - MouseDownPos.X;
            dynamic dy = e.Y - MouseDownPos.Y;
            if (Math.Abs(dx) >= SystemInformation.DoubleClickSize.Width || Math.Abs(dy) >= SystemInformation.DoubleClickSize.Height)
            {
                DataGridView.HitTestInfo info = dataGridView1.HitTest(e.X, e.Y);
                if (info.RowIndex >= 0)
                {
                    DataRowView view = (DataRowView)
                           dataGridView1.Rows[info.RowIndex].DataBoundItem;

                    if (view != null)
                        dataGridView1.DoDragDrop(view, DragDropEffects.Move);

                }
            }
        }
    } 
```

# tfs - WCF RIA 服务中的链接文件未在 TFS 构建服务器中构建

> ID：14731314
> 
> 赞同：6
> 
> 时间：2013-02-06T14:21:06.353
> 
> 标签：tfs, wcf-ria-services, tfsbuild, using

我刚刚设置了一个 TFS (2012) 服务器，现在我正在尝试通过 TFS Build 服务器构建完整的代码（在 VS 2010 中用 .NET 4.0 编写）。但在我的解决方案中，我还有一个 WCF RIA 项目，其中包含链接文件，因为它们也在其他地方使用，并且不可能在 WCF/Silverlight 中添加对通用 .NET 二进制文件的引用。

一切都在我的开发机器上构建没有任何问题，但是当我全部签入时，创建一个标准构建定义并运行该构建定义，我遇到了以下问题。链接的文件`usings`（例如使用命名空间）到其他项目也由我们构建并在 WCF/Silverlight 之前构建，但是通过 TFS 构建服务器构建时会弹出以下错误：

> 找不到类型或命名空间“UsingNamespace”（您是否缺少 using 指令或程序集引用？）

我看过的这个问题有什么解决方案吗？

**编辑 1**

刚刚尝试将`Copy to Output Directory`链接文件的属性设置为，`Copy Always`但这仍然给了我与我预期相同的错误。问题是链接文件被放置在它可以使用的地方，`usings`但 WCF RIA 服务无法访问/找到该使用。

**编辑 2**

刚刚尝试了我的本地测试 TFS，我可以在其中做我想做的事，并在那里我使用构建链接文件所需的解决方案创建了构建定义。这没有任何问题。然后我在我们的 TFS 服务器上尝试了相同的方法，它使用了与我的测试 TFS 具有相同解决方案的新构建定义，但在这里它不起作用。我确定的唯一区别是我的测试 TFS 是 TFS 2012 Update 1，而我的生产 TFS 还没有更新 1。下周我会尝试安装它。

**编辑 3**

我刚刚将我们的生产 TFS 更新为 Update 1，但它仍然无法使用我的临时构建定义，它只包含使用链接文件构建 silverlight 应用程序所需的项目。两个服务器上的 2 个工作区相同，要构建的项目也相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:28:24.510

您需要在构建定义中指定要使用的构建的工作区信息。工作区是构建过程从源代码控制复制到构建服务器的内容。如果构建服务器的工作区中没有所有内容，则无法正确构建。

工作区选项卡中的源代码管理文件夹是您需要从 TFS 获得的文件的位置。构建代理文件夹是构建服务器预定义基本位置的相对路径。您通常会使用 $(SourceDir)\Folder 来指定构建过程所需的“文件夹”。

![在此处输入图像描述](../Images/b3f33be54efa610db07fdf3cc9af44cc.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T05:47:29.300

这听起来像一个 $(Outdir) 问题。TFS 中的构建定义会自动覆盖 Bin 文件夹。所有二进制文件在编译时都被重定向到 bin 文件夹。在我看来，您正在使用项目引用和文件引用的混合。文件引用可能是导致构建失败的原因。

例如，如果您在同一版本中编译以下解决方案

*   Solution1.sln（TFS 构建通行证）

    *   项目1.csproj
    *   project2.csproj（参考项目1）
*   Solution2.sln（TFS 构建失败）

    *   project3.csproj（引用项目 1 的二进制输出）

在不自定义工作流程的情况下，TFS 开箱即用的期望是这个简单的构建将失败。原因是在您的开发框中，所有项目都将输出生成到一个目的地，而在 tfs 构建中，您的项目将构建到 $(Outdir)。

**一些可以尝试的事情**

**简单**（我认为最佳实践）

```
 Create 1 solution and use project references instead of file references. 
```

**复杂的**

```
 Build using MSBuild project files
  Modify your windows workflow to not override the $(Outdir)
  Copy the binaries after a build is complete. 
```

**自动化构建的最佳实践**

*   从命令行构建
*   从 cmd 构建一个非 vs2010 命令行。
    *   C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe FullpathtoSolutionFile.sln

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T08:04:05.027

显然，TFS 服务器上只是缺少 WCF RIA 服务 V1.0 SP2。如果安装了，问题就解决了。

# events - 频闪媒体播放 (OSMF) 事件

> ID：14731315
> 
> 赞同：2
> 
> 时间：2013-02-06T14:21:07.210
> 
> 标签：events, adobe, osmf, strobe-media-playback

有人知道[Strobe Media Playback](http://www.osmf.org/strobe_mediaplayback.html) ( [OSMF](http://sourceforge.net/adobe/smp/wiki/Home/) ) 是否有以下事件：

1.  流式传输已结束
2.  开始流式传输
3.  流式传输错误

为了通过 JavaScript 访问它？

我试过这个，但没有快乐。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Strobe Media Playback</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
    <script type="text/javascript">         

        // Create a StrobeMediaPlayback configuration 
        // http://mediapm.edgesuite.net/strobe/content/test/AFaerysTale_sylviaApostol_640_500_short.flv
        // http://osmf.org/dev/1.6-sprint-2/hello-world-jquery-plugin.html#
        var parameters =
            {
                src: "http://stream.flowplayer.org/bauhaus/624x260.mp4"
            ,   autoPlay: true
            ,   controlBarAutoHide: false
            ,   javascriptCallbackFunction: "onJavaScriptBridgeCreated"
            };

        // Embed the player SWF:            
        swfobject.embedSWF
            ( "StrobeMediaPlayback.swf"
            , "strobeMediaPlayback"
            , 640
            , 480
            , "10.1.0"
            , {}
            , parameters
            , { allowFullScreen: "true"}
            , { name: "strobeMediaPlayback" }
            );

        function completeFunc(time, playerId) {
            //var player = document.getElementById(playerId);
            alert("!!!");
        }

        function onCurrentTimeChange(time, playerId)
        {
            document.getElementById("currentTime").innerHTML = time;        
        }

        function onDurationChange(time, playerId)
        {
            document.getElementById("duration").innerHTML = time;   
        }       
        var player = null;
        function onJavaScriptBridgeCreated(playerId)
        {
            if (player == null) {
                player = document.getElementById(playerId);

                // Add event listeners that will update the 
                player.addEventListener("currentTimeChange", "onCurrentTimeChange");
                player.addEventListener("durationChange", "onDurationChange");

                player.addEventListener("complete", "completeFunc");

                // Pause/Resume the playback when we click the Play/Pause link
                document.getElementById("play-pause").onclick = function(){
                    var state = player.getState();
                    if (state == "ready" || state == "paused") {
                        player.play2();
                    }
                    else 
                        if (state == "playing") {
                            player.pause();
                        }
                    return false;
                };
            }
        }
    </script>   
  </head>
  <body>
    <div>
        <div>
            <span id="currentTime" /> ... </span> : <span id="duration" /> ... </span>
        </div>   
        <a href="#" id="play-pause">Play/Pause</div>  
    </div>
    <div id="strobeMediaPlayback">
      <p>Alternative content</p>
    </div>
  </body>
</html> 
```

谢谢！

PS 正如我[在这里](http://www.osmf.org/dev/1.5gm/debug.html)看到的，我们可以使用**STATE**变量来检测视频的结尾。所以在视频的结尾，它进入“ **PAUSED** ”。我们可以以这种方式使用它吗？

* * *

**更新：**

我发现 onJavaScriptBridgeCreated 方法没有触发。SMP 的所有示例也是如此。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:35:22.083

就在那里。

```
function changeVidSrc(url, posterUrl, id, width, height, autoplay) {

var flashvars =
{
    src: url,
    autoPlay: autoplay,
    controlBarAutoHide: true,
    poster: posterUrl,
    skin: 'skinPath', //i just needed skin, remove if not needed
    javascriptCallbackFunction: "onJavaScriptBridgeCreated"

};

var parameters = { allowFullScreen: "true"};

var attributes = { name: id };

// Embed the player SWF:
    swfobject.embedSWF
        ('/swfs/StrobeMediaPlayback.swf',
            id, width, height,
            "10.1.0",
            '',
            flashvars,
            parameters,
            attributes
        );

} 
```

一些重要的细节：
1\. 我不能让它用 firebug 正确调试。我无法理解行为。
2.传入object`name`对于`attributes`FF来说很重要。否则回调触发器，但没有处理任何事件
我也建议将全局`var player`和处理函数放在首位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T03:30:32.760

流式传输结束：

```
var onJavaScriptBridgeCreated = function (event) {
    if (event === ''onJavaScriptBridgeCreated'') {
        var player = document.getElementById('the id of the object tag');
        var callback = function(event){console.log(event);};
        //stopped
        player.addEventListener("complete", "callback");
        //started
        player.addEventListener("playStateChange", "callback");
        //error
        player.addEventListener("mediaError", "callback");
    }
} 
```

# tridion - 在 C# TBB 中：如何将多个 SingleLineTextField 拆分为单独的字符串

> ID：14731327
> 
> 赞同：4
> 
> 时间：2013-02-06T14:21:46.163
> 
> 标签：tridion, tridion2009

我在 Tridion 中有一个可以有多个值的纯文本字段。itemtype 是 SingleLineTextField。

在 TBB 代码中，我有以下内容（删除了非必要部分）：

```
ItemFields itemFields = new ItemFields(folder.Metadata, folder.MetadataSchema);

foreach (ItemField itemField in itemFields)
{
    string itemFieldValue = string.Empty;
    switch (Utilities.GetFieldType(itemField))
    {
        case FieldType.SingleLineTextField:
            itemFieldValue = itemField.ToString();
            break;
    }
} 
```

现在，如果有两个条目，结果只是两个带有字符换行符的字符串。

```
String A
String B 
```

使用的方法是通用方法，它也适用于其他字段，所以我一直在寻找某种方法来确定 SingleLineTextField 中是否有更多值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T14:59:02.730

您可以将该字段转换为一种`SingleLineTextField`类型，然后遍历 Values 集合，如下所示：

```
SingleLineTextField field = (SingleLineTextField)itemField;
foreach(string value in field.Values)
{
    // do something with value
}
// or if all you want is the count of values
int i = field.Values.Count; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T15:39:45.737

首先，我建议不要依赖`ToString()`对象上的方法，除非它被特别记录。在这种情况下，它适用于抽象类`ItemField`，但情况可能并非总是如此。

TOM.Net API 仅定义 的定义和名称属性`ItemField`，因此您需要将 ItemField 对象转换为更具体的对象。

继承自的`TextField`抽象类定义了一个方法，还定义了更适合您尝试做的事情的属性。查看文档，我们可以看到它会给我们一个值，即使您的字段不是多值的。完美的！`SingleLineTextField``ToString()``Value``Values``Values``IList<String>`

因此，要回答您的问题，“我正在寻找某种方法来确定 SingleLineTextField 中是否包含更多值”，您需要将 ItemField 转换为 TextField 并检查它提供的值的数量，因此：

```
TextField textField = (TextField)itemField;

// If you need to deal with multi-valued fields separately
if (textField.Values.Count > 1)
{
    //Logic to deal with multiple values goes here
}
else
{
    //Logic to deal with single valued goes here
}

// Much better... If you can deal with any number of values in a generic fashion
foreach (string value in textField.Values)
{
    // Generic code goes here
} 
```

# jekyll - 如何为 octopress 博客安装 jekyll 插件？

> ID：14731330
> 
> 赞同：6
> 
> 时间：2013-02-06T14:21:52.543
> 
> 标签：jekyll, octopress

我最近发现了优秀的 Octopress 和 Jekyll 框架，我将把我的主页从 wordpress 切换到 octopress（这是相当有据可查的）。但是，我渴望向 octopress 添加几个插件。例如，生成书目的那个。Jekyll 有几个插件可以做到这一点（例如，[https://github.com/inukshuk/jekyll-scholar](https://github.com/inukshuk/jekyll-scholar)）

但是，我无法让它在 octopress 网站上运行。
我尝试按照安装说明进行操作，而不是 jekyll 插件目录，而是使用 octopress 插件目录；它没有成功。

谁能向我提供如何为简单的 octopress 博客安装 jekyll 插件的一般说明（jekyll-scholar 的示例就足够了）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T03:59:39.193

不是 100% 确定，因为我自己是 Octopress 和 Jekyll 的新手，但这里有：

# 安装

* * *

```
$ [sudo] gem install jekyll-scholar 
```

# 用法

* * *

在Octopress`ext.rb`的目录中创建一个名为的文件。`plugins`

文件的内容`ext.rb`应该是

```
require 'jekyll/scholar' 
```

要调整 Jekyll-Scholar 设置，请使用配置文件`_config.yml`

# c++ - 非虚父类析构函数

> ID：14731334
> 
> 赞同：0
> 
> 时间：2013-02-06T14:21:55.873
> 
> 标签：c++

```
class Person
{
public:
    Person(std::string& name,long id) : name_(name), id_(id) {}
    ~Person() {}
private:
    std::string& name_;
    long id_;
};

class Student : public Person
{
public:
    Student(std::string& name, long id) : Person(name,id) {}
    Student(std::string& name, long id, const std::vector<int*>& courses) : Person(name,id), courses_(courses) {}
    virtual ~Student() {
        std::vector<int*>::iterator it;
        for (it = courses_.begin(); it != courses_.end(); ++it)
        delete (*it);
    }
    const std::vector<int*>& getCourses() const { return courses_; }
private:
    std::vector<int*> courses_;
};

int main(){
    std::string name("Rina");
    std::vector<int*> courses;
    courses.push_back(new int(1345));
    Person* p = new Student(name,37,courses);
    Student* s = (Student*)p;
    std::cout << (*(s->getCourses().at(0)));
    delete p;
} 
```

据我了解

```
delete p; 
```

让我们意识到问题

```
~Person() 
```

不是虚拟的。我的问题是：为什么要

```
~Person() 
```

是虚拟的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:23:39.290

出于同样的原因，您将其他方法设为虚拟。

```
Person *p;
...

delete p; 
```

`Person`如果析构函数不是虚拟的，将无法正确处理的子类。即它只会调用`Person`组件而不是子类组件（例如`Employee`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:25:54.370

因为这就是标准所说的。`delete p;`否则是未定义的行为。

### 5.3.5 删除[expr.delete]

> 3）在第一种选择（删除对象）中，如果待删除对象的静态类型与其动态类型不同，则静态类型应为待删除对象的动态类型和静态类型的基类应具有虚拟析构函数或行为未定义。在第二种选择（删除数组）中，如果要删除的对象的动态类型与其静态类型不同，则行为未定义。

之所以会这样，可能是因为它能够处理调用派生类析构函数（如调用虚函数），而不会给不需要它的类增加开销（即`virtual`默认情况下不要通过引入析构函数来使所有类多态）只是为了处理这种特殊情况）。

# javascript - 获取任何对象的属性和函数列表

> ID：14731337
> 
> 赞同：1
> 
> 时间：2013-02-06T14:22:02.967
> 
> 标签：javascript

我想迭代任何类型的 javascript 对象（在本例中为 IDBKeyRange）的属性和函数。

我尝试使用以下代码：-

```
 <script type="text/javascript">
    var arr = Object.getOwnPropertyNames(IDBKeyRange.only(43));
    for(var i=0;i<arr.length;i++) {
    document.write(arr[i]+"</br>");
    }
  </script> 
```

但是，它没有向我显示属性和方法列表——我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:23:49.940

使用`for-in`循环：

```
for(var key in myObject){
    console.log(key, ':', myObject[key]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:53:13.020

**Object.getOwnPropertyNames 返回一个键**数组，即对象的属性名称。

您必须遍历数组并引用对象：

```
var O=// an object instance;
var A= Object.getOwnPropertyNames(O).map(function(itm){
    try{
        return itm+':'+O[itm];
    }
    catch(er){
        return itm+': ERROR!'+er.message;
    }
});

alert(A.join('\n')); 
```

如果任何键引用对象，您将需要一个递归方法 -

```
function deepProps(O){
    var arr= Object.getOwnPropertyNames(O).map(function(itm){
        var hoo= O[itm];
        try{
            if(hoo== window){
                return '\n'+itm+': window';
            }
            if(hoo){
                if(hoo.nodeName) return itm+': '+ hoo.nodeName;
                if(typeof O[itm]== 'object'){
                    return '\n\n'+itm+':\n'+deepProps(O[itm]);
                }
                return itm+': '+O[itm];
            }
            return itm+': null';
        }
        catch(er){
            return itm+': '+ 'ERROR! '+er.message;
        }
    })
    return arr.join('\n');
} 
```

# tsql - 批量插入空列 UCS-2 Little Endian

> ID：14731339
> 
> 赞同：0
> 
> 时间：2013-02-06T14:22:04.760
> 
> 标签：tsql, sql-server-2008-r2, bulkinsert

我有一个要使用批量插入命令导入的制表符分隔文件。我有一个格式文件如下。

```
8.0
9
1       SQLCHAR       0       50      "\t"                          1     Field1             "SQL_Latin1_General_CP1_CI_AS"
2       SQLCHAR       0       50      "\t"                          2     Field2             "SQL_Latin1_General_CP1_CI_AS"
3       SQLCHAR       0       50      "\t"                          3     Field3             "SQL_Latin1_General_CP1_CI_AS"
4       SQLCHAR       0       50      "\t"                          4     Field4             "SQL_Latin1_General_CP1_CI_AS"
5       SQLCHAR       0       50      "\t"                          5     Field5             "SQL_Latin1_General_CP1_CI_AS"
6       SQLCHAR       0       50      "\t"                          6     Field6             "SQL_Latin1_General_CP1_CI_AS"
7       SQLCHAR       0       50      "\t"                          7     Field7             "SQL_Latin1_General_CP1_CI_AS"
8       SQLCHAR       0       50      "\t"                          8     Field8             "SQL_Latin1_General_CP1_CI_AS"
9       SQLCHAR       0       0       "\r\n"                        9     Field9              "SQL_Latin1_General_CP1_CI_AS" 
```

这适用于 ANSI 文件，但是我将文件作为 UCS-2 Little Endian 编码接收。

我试图让这个工作是对格式文件使用以下修改。这停止了​​任何错误，但我得到了正确数量的所有空列的行数。如果可能，我想避免转换文件。

```
8.0
9
1       SQLCHAR       0       50      "\t\0"                          1     Field1             "SQL_Latin1_General_CP1_CI_AS"
2       SQLCHAR       0       50      "\t\0"                          2     Field2             "SQL_Latin1_General_CP1_CI_AS"
3       SQLCHAR       0       50      "\t\0"                          3     Field3             "SQL_Latin1_General_CP1_CI_AS"
4       SQLCHAR       0       50      "\t\0"                          4     Field4             "SQL_Latin1_General_CP1_CI_AS"
5       SQLCHAR       0       50      "\t\0"                          5     Field5             "SQL_Latin1_General_CP1_CI_AS"
6       SQLCHAR       0       50      "\t\0"                          6     Field6             "SQL_Latin1_General_CP1_CI_AS"
7       SQLCHAR       0       50      "\t\0"                          7     Field7             "SQL_Latin1_General_CP1_CI_AS"
8       SQLCHAR       0       50      "\t\0"                          8     Field8             "SQL_Latin1_General_CP1_CI_AS"
9       SQLCHAR       0       0       "\r\0\n\0"                      9     Field9               "SQL_Latin1_General_CP1_CI_AS" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-09T00:02:08.777

快到了，只需将 SQLCHAR 更改为 SQLNCHAR

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-07T16:11:57.893

你的问题帮助我得到了另一个类似问题的答案谢谢

"\t\0" 是黄金！！！（愚蠢的 UNICODE :( ）

（我已经有了 SQLNCHAR SQLNVARCHAR PART :)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:20:41.870

你的`BULK INSERT`陈述是什么样的？您可能需要添加`DATAFILETYPE`：

```
 BULK INSERT {TableName}
 FROM '{FilePath}'
 WITH (DATAFILETYPE = 'widechar', FORMATFILE = '{FormatFilePath}') 
```

# android - 网格布局和宽度

> ID：14731340
> 
> 赞同：0
> 
> 时间：2013-02-06T14:22:09.953
> 
> 标签：android

我正在创建一个 GridLayout，其中包含许多按钮。

我希望 GridLayout 的宽度与设备屏幕相匹配，但我不知道是否应该管理 GridLayout 的宽度或 GridLayout 内按钮的宽度。

我动态地将按钮添加到 GridLayout。有时按钮可能需要比屏幕提供的空间更多的空间！这就是为什么我不知道如何管理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:32:52.173

如果您想要的是 GridLayout 以匹配设备宽度，我会将布局 XML 设置为：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".GridActivity" >

     <GridLayout
         android:id="@+id/button_grid"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content" >
     </GridLayout> 

</RelativeLayout> 
```

# mysql - 使用 mysql 查找日期间隔

> ID：14731343
> 
> 赞同：5
> 
> 时间：2013-02-06T14:22:19.550
> 
> 标签：mysql

我想提取具有空 bookingId 的记录并获得最大未预订天数（从第一个空闲日开始）。预期的结果应该是：

```
id = 1, 2013-08-03, 7 days free
id = 1, 2013-08-24, 7 days free
id = 2, 2013-08-07, 10 days free
id = 2, 2013-08-24, 7 days free 
```

最好的事情是，如果我还可以查询空闲时间段：例如查询 1,2,3,4,5,6,7..14.. 空闲天数。这是我的源数据的一个例子：

```
id      bookingDate    bookingId
--------------------------------
1        2013-08-03        0
1        2013-08-04        0
1        2013-08-05        0
1        2013-08-06        0
1        2013-08-07        0
1        2013-08-08        0
1        2013-08-09        0
1        2013-08-10        112
1        2013-08-11        112
1        2013-08-12        112
1        2013-08-13        112
1        2013-08-14        112
1        2013-08-15        112
1        2013-08-16        112
1        2013-08-17        112
1        2013-08-18        112
1        2013-08-19        112
1        2013-08-20        112
1        2013-08-21        112
1        2013-08-22        112
1        2013-08-23        112
1        2013-08-24        0
1        2013-08-25        0
1        2013-08-26        0
1        2013-08-27        0
1        2013-08-28        0
1        2013-08-29        0
1        2013-08-30        0
1        2013-08-31        0
2        2013-08-03        78
2        2013-08-04        78
2        2013-08-05        78
2        2013-08-06        78
2        2013-08-07        0
2        2013-08-08        0
2        2013-08-09        0
2        2013-08-10        0
2        2013-08-11        0
2        2013-08-12        0
2        2013-08-13        0
2        2013-08-14        0
2        2013-08-15        0
2        2013-08-16        0
2        2013-08-17        39
2        2013-08-18        39
2        2013-08-19        39
2        2013-08-20        39
2        2013-08-21        39
2        2013-08-22        39
2        2013-08-23        39
2        2013-08-24        0
2        2013-08-25        0
2        2013-08-26        0
2        2013-08-27        0
2        2013-08-28        0
2        2013-08-29        0
2        2013-08-30        0
2        2013-08-31        0 
```

如果有人对更好的数据结构有一个好主意，我可以尝试实现。数据库仍在建设中:-)

编辑：

```
CREATE TABLE IF NOT EXISTS `pricesBookings` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `baseId` int(11) NOT NULL,
  `bookingDate` date NOT NULL,
  `bookingId` int(11) NOT NULL,
  `price` decimal(10,2) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `baseId` (`baseId`,`bookingDate`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T17:39:05.243

这应该给出正确的结果：

```
select
  id,
  min(startDate) as startFreeDate,
  count(*) - (endDate is null) numFreeDays
from (
  select
    pb1.id,
    pb1.bookingDate startDate,
    min(pb2.bookingDate) endDate
  from
    pricesBookings pb1 left join pricesBookings pb2
    on pb1.id=pb2.id
       and pb2.price>0
       and pb2.bookingDate>pb1.bookingDate
  where
    pb1.price=0
  group by
    pb1.id,
    pb1.bookingDate
) s
group by id, endDate
order by id, startDate 
```

[在这里](http://sqlfiddle.com/#!2/a3c1a/1)看到它。

如果您需要搜索所有空闲时段，例如 14 天，您可以添加 HAVING：

```
group by id, endDate
having count(*) - (endDate is null) >= 14
order by id, startDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T17:32:28.497

玩过这个。我可能遗漏了一些明显的东西，但我看不出用一个语句就能做到这一点的简单方法。

但是我想出了这种讨厌的方法。

```
SELECT z.baseid, z.bookingdate, 
CASE 
    WHEN j.id IS NOT NULL THEN '11+ days free'
    WHEN i.id IS NOT NULL THEN '10 days free'
    WHEN h.id IS NOT NULL THEN '9 days free'
    WHEN g.id IS NOT NULL THEN '8 days free'
    WHEN f.id IS NOT NULL THEN '7 days free'
    WHEN e.id IS NOT NULL THEN '6 days free'
    WHEN d.id IS NOT NULL THEN '5 days free'
    WHEN c.id IS NOT NULL THEN '4 days free'
    WHEN b.id IS NOT NULL THEN '3 days free'
    WHEN a.id IS NOT NULL THEN '2 days free'
    ELSE '1 day free'
END AS DaysFree
FROM pricesbookings z
INNER JOIN pricesbookings y
ON z.baseid = y.baseid AND z.bookingid = 0 AND y.bookingid != 0 AND DATE_ADD(y.bookingdate, INTERVAL 1 DAY) = z.bookingdate
LEFT JOIN pricesbookings a ON z.baseid = a.baseid AND z.bookingid = 0 AND a.bookingid = 0 AND DATE_ADD(z.bookingdate, INTERVAL 1 DAY) = a.bookingdate
LEFT OUTER JOIN pricesbookings b ON a.baseid = b.baseid AND b.bookingid = 0 AND DATE_ADD(z.bookingdate, INTERVAL 2 DAY) = b.bookingdate
LEFT OUTER JOIN pricesbookings c ON b.baseid = c.baseid AND c.bookingid = 0 AND DATE_ADD(z.bookingdate, INTERVAL 3 DAY) = c.bookingdate
LEFT OUTER JOIN pricesbookings d ON c.baseid = d.baseid AND d.bookingid = 0 AND DATE_ADD(z.bookingdate, INTERVAL 4 DAY) = d.bookingdate
LEFT OUTER JOIN pricesbookings e ON d.baseid = e.baseid AND e.bookingid = 0 AND DATE_ADD(z.bookingdate, INTERVAL 5 DAY) = e.bookingdate
LEFT OUTER JOIN pricesbookings f ON e.baseid = f.baseid AND f.bookingid = 0 AND DATE_ADD(z.bookingdate, INTERVAL 6 DAY) = f.bookingdate
LEFT OUTER JOIN pricesbookings g ON f.baseid = g.baseid AND g.bookingid = 0 AND DATE_ADD(z.bookingdate, INTERVAL 7 DAY) = g.bookingdate
LEFT OUTER JOIN pricesbookings h ON g.baseid = h.baseid AND h.bookingid = 0 AND DATE_ADD(z.bookingdate, INTERVAL 8 DAY) = h.bookingdate
LEFT OUTER JOIN pricesbookings i ON h.baseid = i.baseid AND i.bookingid = 0 AND DATE_ADD(z.bookingdate, INTERVAL 9 DAY) = i.bookingdate
LEFT OUTER JOIN pricesbookings j ON i.baseid = j.baseid AND j.bookingid = 0 AND DATE_ADD(z.bookingdate, INTERVAL 10 DAY) = j.bookingdate
ORDER BY z.baseid, z.bookingdate 
```

这最多只能计算 11 天或更多天（如果需要，可以轻松扩展，但确实需要提前知道最大数量），而且可能效率极低。

基本上，表别名 z 是第一天，它与表别名 y 连接以检查前一天是否已预订。然后 LEFT JOIN 针对加载更多的表副本，每个副本都在日期中添加了额外的一天。然后使用 CASE 语句来检查找到的最大的一个，从而为您提供免费天数。

有效，但您的数据库可能不喜欢它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T04:43:11.063

请试试这个...

```
select
  concat_ws(',',(concat("ID=",id)),
  min(startDate),
 (concat((count(*) - (endDate is null))," Days Free"))) as result
from (
  select
    pb1.id,
    pb1.bookingDate startDate,
    min(pb2.bookingDate) endDate
  from
    pricesBookings pb1 left join pricesBookings pb2
    on pb1.id=pb2.id
       and pb2.price>0
       and pb2.bookingDate>pb1.bookingDate
  where
    pb1.price=0
  group by
    pb1.id,
    pb1.bookingDate
) s
group by id, endDate
  order by id, startDateselect
  concat_ws(',',(concat("ID=",id)),
  min(startDate),
 (concat((count(*) - (endDate is null))," Days Free"))) as result
from (
  select
    pb1.id,
    pb1.bookingDate startDate,
    min(pb2.bookingDate) endDate
  from
    pricesBookings pb1 left join pricesBookings pb2
    on pb1.id=pb2.id
       and pb2.price>0
       and pb2.bookingDate>pb1.bookingDate
  where
    pb1.price=0
  group by
    pb1.id,
    pb1.bookingDate
) s
group by id, endDate
  order by id, startDate 
```

# c# - 将消息发送回客户端

> ID：14731344
> 
> 赞同：0
> 
> 时间：2013-02-06T14:22:22.863
> 
> 标签：c#, client-server, message

我有一个用 c# 编写的客户端-服务器应用程序。我的服务器监视客户端发送给它的命令。我希望在进程完成后向客户端发送“完成”消息，我只是不知道该怎么做......

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.Net.Sockets;
using System.IO;
using System.Management;
using Microsoft.Win32;

namespace RM
{
    public partial class RMFORM : Form
    {
        private Socket clientSock;
        private string userName = "";
        private string testName = "";
        private string testNameString = "";
        private string targetPath = "";
        private bool isConnected = false;
        private TestForm testForm;
        private List<string> listOfFilesToCopy = new List<string>();
        private List<string> listOfPathToCopy = new List<string>();
        private RegistryKey registryKey;

        public RMFORM ()
        {
            InitializeComponent();
            userName = RemoteUtils.getConnectedUser();
            targetPath = RemoteUtils.targetPath + userName;
            testForm = new TestForm(RemoteUtils.remoteIpAddress, userName);
        }

        private void createNewCommand(string executable, string selectedPath, bool isDirectory)
        {
            string selectedOutDir = "";

            testForm.enableFinishedButton();
            testForm.setNumOfProcessesTest();
            testForm.ShowDialog();

            while (!testForm.getIsFinished())
            {
                if (testForm.getIsFormClosed())
                {
                    testForm.Hide();
                    return;
                }
            }

            testName = testForm.getTestName();
            testNameString = testForm.getSelectedTestType();
            selectedOutDir = targetPath + "\\" + testName;

            try
            {
                if (Directory.Exists(selectedOutDir))
                {
                    DialogResult dialogResult = MessageBox.Show("Test named " + testName + " already exists.\nDo You Wish To Continue?", "Warning!", MessageBoxButtons.YesNo);
                    if (dialogResult == DialogResult.No)
                    {
                        return;
                    }
                }
                else
                    Directory.CreateDirectory(selectedOutDir);
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message, "Error!");
                this.Close();
            }

            if (testNameString.CompareTo("Mek") == 0)
            {
                addSingleTest(executable, selectedPath, selectedOutDir, "mek", isDirectory);
            }
            if (testNameString.CompareTo("Mel") == 0)
            {
                addSingleTest(executable, selectedPath, selectedOutDir, "mel", isDirectory);
            }
            if (testNameString.CompareTo("Mem") == 0)
            {
                addSingleTest(executable, selectedPath, selectedOutDir, "mem", isDirectory);
            }

        }
        private void addSingleTest(string executable, string selectedPath, string outputDir, string testType, bool isDirectory)
        {
            string commandToRun = "";

            commandToRun = targetPath + RemoteUtils.batchRunPath + executable + testForm.getTestPerformance() + " " + selectedPath + " " + outputDir;
            if (!isDirectory)
            {
                commandToRun += "\\" + Path.GetFileNameWithoutExtension(selectedPath) + "." + testType + ".pos " + testType;
            }
            else
            {
                commandToRun += " " + testType + " " + testForm.getNumOfProcess();
            }

            removeOne.Enabled = true;
            removeAll.Enabled = true;
            sendBtn.Enabled = true;

            listORequestedCommands.Items.Add(commandToRun);
            listORequestedCommands.Refresh();
        }
        private bool searchForFiles(string parentDirectory)
        {
            bool found = false;

            if (Directory.GetFiles(parentDirectory, "*" + RemoteUtils.sequenceExtenssion).Length > 0)
                return true;

            try
            {
                foreach (string subDir in Directory.GetDirectories(parentDirectory))
                {
                    if (Directory.GetFiles(subDir, "*" + RemoteUtils.sequenceExtenssion).Length > 0)
                        return true;
                    found = searchForFiles(subDir);
                }
            }
            catch (System.Exception excpt)
            {
                Console.WriteLine(excpt.Message);
                this.Close();
            }

            return found;

        }
        private void connectBtn_Click(object sender, EventArgs e)
        {
            try
            {
                if (!isConnected)
                {
                    registryKey = Registry.CurrentUser.CreateSubKey(RemoteUtils.registrySubKey);
                    clientSock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
                    connectBtn.Text = "Disconnect From Server";
                    connectBtn.Refresh();
                    clientSock.Connect(RemoteUtils.remoteIpAddress, RemoteUtils.remotePort);
                    statusColor.BackColor = Color.Green;
                    statusColor.Refresh();
                    isConnected = true;
                    buttonAddDirectory.Enabled = true;
                    buttonAddFile.Enabled = true;
                    var backgroundWorker = new BackgroundWorker();
                    backgroundWorker.DoWork += (sender1, e1) => RemoteUtils.copyDllsToServer(targetPath);
                    backgroundWorker.RunWorkerAsync();
                }
                else
                {
                    registryKey.Close();
                    connectBtn.Text = "Connect To Server";
                    isConnected = false;
                    statusColor.BackColor = Color.Red;
                    buttonAddDirectory.Enabled = false;
                    buttonAddFile.Enabled = false;
                    clientSock.Close();
                    clientSock.Dispose();
                }

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message, "Error");
                this.Close();
            }

        }
        private void sendBtn_Click(object sender, EventArgs e)
        {
            try
            {
                string [] commandsInRegistry = registryKey.GetValueNames();

                for (int i = 0; i < commandsInRegistry.Length; i++)
                {
                    registryKey.DeleteValue(commandsInRegistry[i]);
                }

                for (int i = 0; i < listORequestedCommands.Items.Count; i++)
                {
                    clientSock.Send(Encoding.Default.GetBytes(listORequestedCommands.Items[i].ToString() + " <eom> "));
                    registryKey.SetValue("Command " + (i + 1).ToString(), listORequestedCommands.Items[i].ToString());
                }

                removeAll_Click(sender, e);
                sendBtn.Enabled = false;
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message, "Error!");
                this.Close();
            }

        }
        private void buttonAddDirectory_Click(object sender, EventArgs e)
        {
            folderBrowserDialog = new FolderBrowserDialog();
            folderBrowserDialog.SelectedPath = "C:\\";

            if (folderBrowserDialog.ShowDialog() == DialogResult.OK)
            {
                string selectedPath = folderBrowserDialog.SelectedPath;

                if (!searchForFiles(selectedPath))
                {
                    MessageBox.Show("The directory: " + selectedPath + " doesn't contain sequences.", "Error!");
                    return;
                }

                testForm.enableNumOfProcesses();
                createNewCommand(RemoteUtils.runBatchScript, selectedPath, true);
            }
        }
        private void buttonAddFile_Click(object sender, EventArgs e)
        {
            openFileDialog = new OpenFileDialog();
            openFileDialog.InitialDirectory = "C:\\";
            openFileDialog.Filter = "PMD files (*" + RemoteUtils.sequenceExtenssion + ")|*" + RemoteUtils.sequenceExtenssion + "|All files (*.*)|*.*";
            if (openFileDialog.ShowDialog() == DialogResult.OK)
            {
                string selectedFile = openFileDialog.FileName;
                if (Path.GetExtension(selectedFile).CompareTo(RemoteUtils.sequenceExtenssion) != 0)
                {
                    MessageBox.Show("The file: " + selectedFile + " is not a sequence file.", "Error!");
                    return;
                }
                createNewCommand(RemoteUtils.batchRunExe, selectedFile, false);
            }
        }
        private void removeOne_Click(object sender, EventArgs e)
        {
            int iRemoveIndex = listORequestedCommands.SelectedIndex;
            if (iRemoveIndex > -1)
            {
                listORequestedCommands.Items.RemoveAt(iRemoveIndex);
                listORequestedCommands.Refresh();
                if (listORequestedCommands.Items.Count == 0)
                {
                    removeOne.Enabled = false;
                    removeAll.Enabled = false;
                    sendBtn.Enabled = false;
                }
            }
        }
        private void removeAll_Click(object sender, EventArgs e)
        {
            listORequestedCommands.Items.Clear();
            listORequestedCommands.Refresh();
            buttonAddDirectory.Enabled = true;
            buttonAddFile.Enabled = true;
            removeOne.Enabled = false;
            removeAll.Enabled = false;
            sendBtn.Enabled = false;
        }
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:41:42.690

你有没有看过

[http://www.thecodeproject.com/csharp/ZaSocks5Proxy.asp](http://www.thecodeproject.com/csharp/ZaSocks5Proxy.asp)

我们在我们的软件中使用基于此的代码，以便我们的“服务器”监视输入以将消息广播给连接到“服务器”的所有其他用户

本质上，每个工作站都监控传入的字符串。我们将字符串的第一个单词用作“命令”并进行相应处理。“完成”可能是这样的命令。

# java - 使用 java.util.Random 读取整数数组大小并填充随机数

> ID：14731348
> 
> 赞同：-1
> 
> 时间：2013-02-06T14:22:30.670
> 
> 标签：java, arrays, random

我正在寻找一个整数“数组大小为一”，然后使用 1 到 10 之间的随机数填充该数组。

以下是我到目前为止的代码。我必须读入整数才能给数组一个大小，这一事实完全让我感到困惑。如何完成用随机数填充数组？

我是数组新手，这也是我第一次使用`java.util.Random`。非常感谢有人展示我是如何完成的，这样我就可以自己阅读并做几次。谢谢。

```
public void createUI() {    
    createInput("Array size one");
    setButtonLabel("Submit");
}

public void processInput(){
    int sizeone = nextInt("Array size one");
    int [] arrayone= new int[sizeone];
    int randomNum;
    Random generator = new Random();
    randomNum = generator.nextInt(11);

    for (int i = 0; i < arrayone.length; i++) {
      arrayone[] = randomNum;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:07:42.587

您正在用相同的数字填充数组。您必须 `randomNum = generator.nextInt(11);`在之前放入 for 循环`arrayone[] = randomNum;` ，在这里您又犯了一个错误，`arrayone[i] = randomNum;`而不是 `arrayone[] = randomNum;`因为您必须定义数组的索引。

# java - Weka setClassIndex 和数据库

> ID：14731350
> 
> 赞同：1
> 
> 时间：2013-02-06T14:22:36.160
> 
> 标签：java, database, weka

我正在为 Weka API 使用某种 hello world 示例。我在从数据库创建实例时发现了一个问题。 **情况：** 我有一个包含两个表 trainset(id, value, classValue) 和 testset(id, value, classValue) 的数据库。

每个表包含 10 行一些示例数据，应该 100% 正确分类。trainset 的第一行是 (1, 5, "low")，testset 的第一行是 (1, 15, "high")。

当 Weka 创建**Instances**对象时，它似乎也自动创建了一个类 Attribute 对象。

```
train = query.retrieveInstances();
train.setClassIndex(train.numAttributes() - 1); 
```

第一组的类属性是

```
@attribute classValue {low,high} 
```

...第二个

```
@attribute classValue {high,low} 
```

当我进行评估时，它显示

```
Incorrectly Classified Instances        10              100      % 
```

这是由混淆的 classValue 属性引起的。

有什么办法可以预先告诉类属性应该是什么样子，或者我可以以某种方式更改映射？我已经试过了

```
FastVector fvClassVal = new FastVector(2);
fvClassVal.addElement("low");
fvClassVal.addElement("high");
Attribute classAttribute = new Attribute("classValue", fvClassVal);
test.setClass(classAttribute); 
```

但这似乎不起作用，它仍然想知道 classIndex 并覆盖以前的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:47:54.193

谢谢你的提示。现在似乎真的没有优雅的解决方案。如果您可以假设您的测试数据将包含训练数据具有的每个类，您可以修改查询：

SELECT value, classValue FROM trainset ORDER BY classValue

这是一个代码修改较少但性能下降的解决方案：/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:49:57.320

我以前问过并回答过同样的[问题](https://stackoverflow.com/questions/11792905/same-instances-header-arff-for-all-my-database-queries) 。您需要创建正确的 Arff 标头并在查询数据库之前使用它。

# sharepoint - Powershell 捕获返回值

> ID：14731351
> 
> 赞同：0
> 
> 时间：2013-02-06T14:22:38.110
> 
> 标签：sharepoint, powershell, foreach

我有一个 powershell 脚本，我正在尝试将 webparts 自动添加到共享点页面。下面的脚本包含在 FOREach-Object 中，它在第一次迭代中运行良好，但是在第二次迭代中，它会将一些不需要的信息返回到 powershell 屏幕（以及我正在创建的日志）。

我正在寻找一种方法来防止它返回除写主机语句之外的任何内容。我最初认为这可能是一个例外，但是看起来 Web 部件仍在添加而没有问题，我在返回信息中找不到任何对异常的引用。

到目前为止，这是我所拥有的：

```
$addCsv | ForEach-Object{

            $tempwebURL = $_.'SiteURL'
            $pageUrl = $_.'Page'
            $varWebPartZone = $_.'WebPartZone'
            $varChrome = $_.'Chrome'
            $varTitle = $_.'Title'          
            $varPosition = [int]$_.'Position'

            #get current site
            $tempweb= Get-SPWeb -Identity $tempwebURL
            Write-Host ("Adding Web Part to :"+ $tempweb.Title)

            #add webpart
            [System.Xml.XmlTextReader]$oxmlReader = new-object System.Xml.XmlTextReader("Path removed");
            $webpartmanager=$tempweb.GetLimitedWebPartManager( $pageUrl,  [System.Web.UI.WebControls.WebParts.PersonalizationScope]::Shared)    
            [System.Web.UI.WebControls.WebParts.WebPart] $oWebPart
            $err = ''
            $oWebPart = new-object $webpartmanager.ImportWebPart($oxmlReader,[ref]$_.Exception.Message)
            $oWebPart.Title = $varTitle
            $oWebPart.ChromeType=$varChrome
            $webpartmanager.AddWebPart($oWebPart, $varWebPartZone, $varPosition)| Out-Null 
            $oWebPart.Dispose() 
            $oxmlReader.Close()
            $webpartmanager.Dispose()
            $tempweb.Dispose()
            $num++

} 
```

以下是我不想要的打印到屏幕上的信息：

```
AllowClose                         : True
AllowConnect                       : True
AllowEdit                          : True
AllowHide                          : True
AllowMinimize                      : True
AllowZoneChange                    : True
AuthorizationFilter                :
CatalogIconImageUrl                :
ChromeState                        : Normal
ChromeType                         : None
ConnectErrorMessage                :
Description                        :
Direction                          : NotSet
DisplayTitle                       : Last Date Modified Explorer
ExportMode                         : None
HasUserData                        : False
HasSharedData                      : False
Height                             :
HelpMode                           : Navigate
HelpUrl                            :
Hidden                             : False
IsClosed                           : False
ImportErrorMessage                 : Cannot import this Web Part.
IsShared                           : True
IsStandalone                       : False
IsStatic                           : False
Subtitle                           :
Title                              : Last Date Modified Explorer
TitleIconImageUrl                  :
TitleUrl                           :
Verbs                              : {}
WebBrowsableObject                 : Removed
Width                              :
Zone                               :
ZoneIndex                          : 0
Controls                           :
BackImageUrl                       :
DefaultButton                      :
GroupingText                       :
HorizontalAlign                    : NotSet
ScrollBars                         : None
Wrap                               : True
AccessKey                          :
Attributes                         : System.Web.UI.AttributeCollection
BackColor                          : Color [Empty]
BorderColor                        : Color [Empty]
BorderWidth                        :
BorderStyle                        : NotSet
ControlStyle                       : System.Web.UI.WebControls.PanelStyle
ControlStyleCreated                : True
CssClass                           :
Style                              : System.Web.UI.CssStyleCollection
Enabled                            : True
EnableTheming                      : True
Font                               :
ForeColor                          : Color [Empty]
HasAttributes                      : False
SkinID                             :
TabIndex                           : 0
ToolTip                            :
ClientID                           : g_adea57ed_5d6d_40ee_b468_ce85e37f5e9a
ID                                 : g_adea57ed_5d6d_40ee_b468_ce85e37f5e9a
EnableViewState                    : True
NamingContainer                    :
BindingContainer                   :
Page                               :
TemplateControl                    :
Parent                             :
TemplateSourceDirectory            :
AppRelativeTemplateSourceDirectory :
Site                               :
Visible                            : True
UniqueID                           : g_adea57ed_5d6d_40ee_b468_ce85e37f5e9a 
```

我也欢迎任何“你可以通过......做得更好”的评论。再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:27:44.497

我的猜测是以下行是罪魁祸首：

```
[System.Web.UI.WebControls.WebParts.WebPart] $oWebPart 
```

在第一次迭代中，这不会做太多，它只是`$null`. 但在以后的迭代中，它会保留前一次迭代的值并输出它。反正你不需要那条线，因为它什么都不做。

# ios - [__NSDictionaryI setObject:forKey:]: 无法识别的选择器发送到实例

> ID：14731353
> 
> 赞同：18
> 
> 时间：2013-02-06T14:22:42.170
> 
> 标签：ios, nsdictionary, nsmutabledictionary, foundation

我正在尝试将“dateTime”添加到我的字典中，定义如下：

```
Symptom Ranking: {
    5111ef19253b4a9150000000 = 1;
    5111f029253b4add4e000000 = 1;
    5111f036253b4a123d000001 = 1;
    5111f045253b4a404f000000 = 1;
}

NSLog(@"date selected: %@", [[self.datePicker date] description])

[self.results setObject:[[self.datePicker date] description] forKey:@"dateTime"]; 
```

应用程序崩溃，我得到了这个：

```
Symptom Tracker[43134:c07] -[__NSDictionaryI setObject:forKey:]: unrecognized selector sent to instance 0x7603990
2013-02-06 08:15:58.741 Symptom Tracker[43134:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSDictionaryI setObject:forKey:]: unrecognized selector sent to instance 0x7603990'
*** First throw call stack:
(0x171b012 0x1428e7e 0x17a64bd 0x170abbc 0x170a94e 0x521e 0x143c705 0x373920 0x3738b8 0x434671 0x434bcf 0x433d38 0x3a333f 0x3a3552 0x3813aa 0x372cf8 0x2652df9 0x2652ad0 0x1690bf5 0x1690962 0x16c1bb6 0x16c0f44 0x16c0e1b 0x26517e3 0x2651668 0x37065c 0x25dd 0x2505) 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-06T14:25:12.660

你的字典是不可变的——它是一个`NSDictionary`而不是一个`NSMutableDictionary`. 修复它，它会正常工作。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-08-12T21:38:57.670

当我不小心声明了`copy`这样一个属性时，我遇到了这个错误：

```
@property (nonatomic,copy) NSMutableDictionary* downloadHandlers; 
```

当我在我的`init`：

```
self.downloadHandlers = [[NSMutableDictionary alloc] init]; 
```

我实际上有一个不可变的字典。我原以为调用`copy`可变对象也会给我一个可变对象，但显然不是。无论如何，删除`copy`关键字（我一开始就不想在那里）解决了这个问题。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-09-05T07:53:09.090

正如排名最高的答案所说，您需要使用`NSMutableDictionary`而不是`NSDictionary`. 如果您想使用文字，请使用`mutableCopy`如下：

```
NSMutableDictionary* dict = [@{@"key": @"value"} mutableCopy]; 
```

这样您就可以使用重新分配密钥

```
dict[@"key"] = @"new-value"; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-06T14:25:29.893

您需要使用`NSMutableDictionary`- 堆栈跟踪显示您正在使用不可变的`__NSDictionaryI`,( `NSDictionary`)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-04-15T13:13:50.313

当我们处理 Web 服务响应时，大多数时候都会出现此问题，因为接收到的数据是不可变的。当您尝试更改不可变数据时，应用程序肯定会崩溃。我希望下面的代码片段会有所帮助。

```
NSMutableDictionary  *headerData;

/*Every time you need to allocate memory to the corresponding MutableDictionary variable*/

headerData =[[NSMutableDictionary alloc ]initWithDictionary:response[@"Header"]]; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-12-15T07:21:00.300

在我的情况下，我有一个以 [AnyHashable:AnyObject] 格式返回值的快速代码，我必须将其转换为 NSMutableDictionary，

`NSMutableDictionary *logDict = [[NSMutableDictionary alloc]initWithDictionary:[[AnalyticsManager shared]addCommonPropertiesWithProperties:logDict]];`

其中 [[AnalyticsManager shared]addCommonPropertiesWithProperties:logDict] 这部分以 [AnyHashable:AnyObject] 格式返回。这解决了我的问题。

# java - log4j 不使用 Maven + Jetty 进行日志记录

> ID：14731358
> 
> 赞同：0
> 
> 时间：2013-02-06T14:22:48.483
> 
> 标签：java, log4j

我在使用 Maven 构建和 Jetty 作为 Web 服务器来使用我的 Web 应用程序进行日志记录时遇到问题。我的 log4j.proporties 文件如下所示：

```
#
log4j.rootLogger=debug,file
log4j.appender.file=org.apache.log4j.FileAppender
log4j.appender.file.File=C:/logs/Stats.log
log4j.appender.file.MaxFileSize=2MB
log4j.appender.file.MaxBackupIndex=2
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d %t [%5p][%c{1}] %m%n

#log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender
#log4j.appender.CONSOLE.threshold=INFO
#log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
#log4j.appender.CONSOLE.layout.ConversionPattern=%d %t [%5p][%c{1}] %m%n
#log4j.appender.CONSOLE.target=System.err

# RTS file logger
log4j.appender.RTS=org.apache.log4j.RollingFileAppender
log4j.appender.RTS.File=C:/logs/RTS.log
log4j.appender.RTS.MaxBackupIndex=10
log4j.appender.RTS.MaxFileSize=10MB
log4j.appender.RTS.append=true
log4j.appender.RTS.layout=org.apache.log4j.PatternLayout
log4j.appender.RTS.layout.ConversionPattern=%d [%t] %-m%n

# Level tuning
#log4j.logger.org.cometd=INFO
log4j.logger.com.realtime=INFO, RTS 
```

我的主要课程看起来像：

```
import org.apache.log4j.Logger;

public class Main {

    static final Logger logger = Logger.getLogger(Main.class);

    public static void main(String[] args) {
        logger.info("Info Message!");
            ...
            ...
    }
} 
```

有谁知道为什么我没有收到“信息消息！” 出现在我的 RTS.log 文件中？文件被创建，但在应用程序运行时为空。我的主要课程目前在包 com.realtime

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:25:17.280

是的，棘手的一个。[这篇文章](https://stackoverflow.com/questions/5297686/log4j-package-specific-logging)描述了如何使用该`additivity`设置来防止由于我在评论中的建议而将相同的包记录到不同的日志文件中。所以像这样的事情......

```
log4j.additivity.com.cometd=false
log4j.additivity.com.realtime=false

log4j.logger.com.cometd.file=DEBUG, file
log4j.logger.com.realtime.RTS=DEBUG, RTS 
```

# jquery - 使用 jQuery 查找具有特定 CSS 样式的 DIV

> ID：14731360
> 
> 赞同：1
> 
> 时间：2013-02-06T14:22:55.527
> 
> 标签：jquery, css, html

我有一堆 DIV，除了 1 之外，它们都具有相同的类和样式。

```
 <div id="0" class="divpage" style="display:none"></div>
    <div id="1" class="divpage" style="display:none"></div>
    <div id="2" class="divpage" style="display:none"></div>
    <div id="3" class="divpage" style="display:none"></div>
    <div id="4" class="divpage" style="display:block"></div>
    <div id="5" class="divpage" style="display:none"></div>
    <div id="6" class="divpage" style="display:none"></div> 
```

我需要找出 'display:block' 的 div 的 id。我使用了以下代码，但它只返回第一个 div 的 id。

```
var num = $(".divpage").attr("id"); 
```

如何修改它以找到正确的 ID？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T14:23:56.933

using`:visible`将找到可见的 div

你不应该使用数字作为 id，我认为它只在 html5 中有效

```
var num = $('.divpage:visible').attr('id'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T14:25:17.217

像这样 -

```
var theID = $('.divpage[style="display:block"]').attr('id'); 
```

# iphone - 推时显示底栏

> ID：14731363
> 
> 赞同：1
> 
> 时间：2013-02-06T14:23:02.310
> 
> 标签：iphone, ios, uitabbarcontroller, uitabbar

我在导航到第一个视图到第二个视图时隐藏了我的标签栏，但是如何在从第二个视图弹出到第一个视图时显示它

第一眼

```
 -(IBAction)gotoSecondView{

   VideoDetailViewController *vdoDtlPage = [[VideoDetailViewController alloc]initWithNibName:@"VideoDetailViewController" bundle:nil];

    self.hidesBottomBarWhenPushed=YES;

    [self.navigationController pushViewController:vdoDtlPage animated:YES];
    } 
```

从第二个视图

```
 -(IBAction)back:(id)sender{

   self.hidesBottomBarWhenPushed=NO;
  [self.navigationController popViewControllerAnimated:YES];

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:41:06.017

一种选择是使用[NSNotificationCenter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)

看这里的答案[IOS：后退两个视图](https://stackoverflow.com/questions/14245603/ios-move-back-two-views/14246148#14246148)

基本上，当您关闭视图时，您会向父视图控制器添加一个通知方法，您`VideoDetailViewController`调用该通知并运行一个方法让我们说

```
 -(IBAction)back:(id)sender{

    [self.navigationController popViewControllerAnimated:YES];
    [[NSNotificationCenter defaultCenter] postNotificationName:@"showTabBar" object:nil];

  } 
```

然后您在父视图控制器中的相关方法运行

```
- (void)showTabBar:(NSNotification *)notif
    {
        NSLog(@"Received Notification ");

        self.hidesBottomBarWhenPushed=NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:41:21.680

self.hidesBottom... 使 navigationController 隐藏底栏，而为其设置的 VC 在堆栈上

所以不是为根隐藏它，而是为 vdoDtlPage 隐藏它

```
-(IBAction)gotoSecondView{
    VideoDetailViewController *vdoDtlPage = [[VideoDetailViewController alloc]initWithNibName:@"VideoDetailViewController" bundle:nil];
    vdoDtlPage.hidesBottomBarWhenPushed=YES;
    [self.navigationController pushViewController:vdoDtlPage animated:YES];
} 
```

然后，当您弹出 secondView 时，firstViews 再次成为顶部 VC，并且由于它具有 hidesBottomBar=No，导航控制器将再次在栏中设置动画

# maven - 在 Maven WAR 构建中添加其他类

> ID：14731371
> 
> 赞同：2
> 
> 时间：2013-02-06T14:23:26.907
> 
> 标签：maven, maven-3, war

我目前正在使用带有[https://maven.apache.org/plugins/maven-war-plugin/](https://maven.apache.org/plugins/maven-war-plugin/)的 maven3和带有[http://mojo.codehaus的](http://mojo.codehaus.org/build-helper-maven-plugin/)[http://tomcat.apache.org/maven-plugin-2.0/](http://tomcat.apache.org/maven-plugin-2.0/) [.org/build-helper-maven-plugin/](http://mojo.codehaus.org/build-helper-maven-plugin/)`src/main/java`在like旁边添加其他源`src/mock/java`

运行`mvn tomcat7:run`这些附加类时，还存在测试资源。捆绑 WAR（通过`mvn package`）时，这些虚假资源被排除在外。在大多数情况下这很好，因为战争包是我们发布的并且正在部署在产品服务器上。

**问题 1：**但是：“假”类仍然在 WAR 构建中被授权，这对于生产性 WAR 来说是不干净的。

*但是还有另一个用例：* 使用这些额外的类和资源构建一个 WAR 文件，用于通过持续集成/部署（jenkins）在本地开发服务器上部署这似乎很棘手......

**问题 2：**当前 WAR 有假类但没有假资源；/

**问题**：如何在正常构建中排除假类，但如何在 WAR 构建中包含这些来源以及假资源？

这就是我所做的：

```
<testResources>
    <testResource>
        <directory>src/test/resources</directory>
    </testResource>
    <testResource>
        <directory>src/mock/resources</directory>
    </testResource>
</testResources>
…

… // plugins section
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-resources-plugin</artifactId>
    <version>2.5</version>
    <executions>
        <execution>
            <id>copy-resources-after-test</id>
            <phase>prepare-package</phase>
            <goals>
                <goal>resources</goal>
            </goals>
        </execution>
    </executions>
</plugin>

<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>build-helper-maven-plugin</artifactId>
    <version>1.7</version>
    <executions>
        <execution>
            <id>add-source</id>
            <phase>generate-sources</phase>
            <goals>
                <goal>add-source</goal>
            </goals>
            <configuration>
                <sources>
                    <source>${project.basedir}/src/main/java-fake</source>
                    <source>${project.basedir}/src/mock/java</source>
                </sources>
            </configuration>
        </execution>
    </executions>
</plugin>

<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.2</version>
    <configuration>
    </configuration>
</plugin> 
```

* * *

这个问题与：

*   [Maven (surefire)：从 src/test/java 复制测试资源](https://stackoverflow.com/questions/4221285)
*   [maven2：从 WAR 中排除目录](https://stackoverflow.com/questions/3750189)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:46:26.087

您应该使用不同的配置文件（请参阅[http://maven.apache.org/guides/introduction/introduction-to-profiles.html](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)）来构建您的战争。包含您的虚假来源/资源的“持续集成”配置文件，以及没有它们的“生产”配置文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:53:21.937

我是如何修复它的：

```
--- a/pom.xml
+++ b/pom.xml
@@ -20,5 +20,11 @@

      <properties>
+
+        <!-- remove fake data for normal builds -->
+        <maven.war.warSourceExcludes>staticFakeFiles/</maven.war.warSourceExcludes>
+        <exclude.fake.resources>**</exclude.fake.resources>
+        <!-- set additional fake sources to default source directory to prevent NPE -->
+        <additional.fake-sources>${project.basedir}/src/mock/java</additional.fake-sources>
     </properties>

     <organization>
@@ -328,6 +334,13 @@
                     <exclude>application.wsdl</exclude>
                 </excludes>
             </resource>
+            <resource>
+                <directory>src/mock/resources</directory>
+                <filtering>true</filtering>
+                <excludes>
+                    <exclude>${exclude.fake.resources}</exclude>
+                </excludes>
+            </resource>
         </resources>
         <testResources>
             <testResource>
@@ -382,7 +392,7 @@
                         </goals>
                         <configuration>
                             <sources>
                                 <source>${project.basedir}/src/main/java-fake</source>
-                                <source>${project.basedir}/src/mock/java</source>
+                                <source>${additional.fake-sources}</source>
                             </sources>
                         </configuration>
@@ -410,7 +420,7 @@
                 <version>2.2</version>
                 <configuration>
                     <failOnMissingWebXml>false</failOnMissingWebXml>
-                    <warSourceExcludes>fakefiles/</warSourceExcludes>
+                    <warSourceExcludes>${maven.war.warSourceExcludes}</warSourceExcludes>
                 </configuration>
             </plugin>

@@ -1353,6 +1363,11 @@

             <properties>
+
+                <!-- add fake data for fake builds -->
+                <maven.war.warSourceExcludes></maven.war.warSourceExcludes>
+                <exclude.fake.resources></exclude.fake.resources>
+                <additional.fake-sources>${project.basedir}/src/mock/java</additional.fake-sources>
             </properties>
         </profile>
         <profile> 
```

# java - 在 x 个制表符后拆分字符串

> ID：14731372
> 
> 赞同：2
> 
> 时间：2013-02-06T14:23:29.457
> 
> 标签：java, string, split

我必须从 .txt 文件中分离出一个值。我创建了一个 LineNumberReader 并使用 .split("\t") 来分隔单词，但我只需要倒数第二个值（q-value）。是否有指定 .split() 的选项？

这是我的 .txt 文件

```
test_id gene_id gene    locus   sample_1    sample_2    status  value_1 value_2 log2(fold_change)   test_stat   p_value q_value significant
XLOC_000001 XLOC_000001 TC012951    ChLG10:20399-27664  naive   BttO    NOTEST  0   0.0498691   1.79769e+308    1.79769e+308    0.210754    1   no 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:27:36.323

```
String[] array = someString.split("\t");
String secondToLast = array[array.length - 2]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:31:31.777

您可以使用该[`String#split(String regex, int limit)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)方法在要提取的列之后停止拆分，并在一行代码中获取所需的字符串：

```
 String line = "A\tB\tC\tD\tE\tF"; // tab separated content
    int column = 3; // specify the column you want (first is 1)
    String content = line.split("\t", column + 1)[column - 1]; // get content 
    System.out.println(content);  // prints C (3rd column) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:34:48.157

鉴于您有这一行：

```
XLOC_000001 XLOC_000001 TC012951    ChLG10:20399-27664  naive   BttO    NOTEST  0   0.0498691   1.79769e+308    1.79769e+308    0.210754    1   no 
```

你想要`1`（倒数第二个元素）

你可以使用这个表达式：

```
String s ="XLOC_000001 XLOC_000001 TC012951\tChLG10:20399-27664\tnaive\tBttO\tNOTEST\t0\t0.0498691\t1.79769e+308\t1.79769e+308\t0.210754\t1\tno";
Matcher m = Pattern.compile("(?:\t|^)([^\t]*?)\t[^\t]*?(?:\\n|$)").matcher(s);
if(m.find())
    System.out.println(m.group(1)); 
```

或者，包装在一个函数中：

```
private static final Pattern pattern = Pattern.compile("(?:\t|^)([^\t]*?)\t[^\t]*?(?:\\n|$)");
public static final String getPenultimateElement(String line) {
    Matcher m = pattern.matcher(line);
    if(m.find())
        return m.group(1)
    return null; // or throw exception.
} 
```

或者，调用者可以指定分隔符：

```
public static final String getPenultimateElement(String line, String separator) {
    separator = Pattern.quote(separator);
    Matcher m = Pattern.compile("(?:" separator + "|^)([^" + separator + "]*?)" + separator + "[^" + separator + "]*?(?:\\n|$)").matcher(line);
    if(m.find())
        return m.group(1)
    return null; // or throw exception.
} 
```

# logging - 使用 Twitter Storm 处理日志数据？

> ID：14731375
> 
> 赞同：7
> 
> 时间：2013-02-06T14:23:39.083
> 
> 标签：logging, bigdata, apache-storm

我们有大量的应用程序分布在多个数据中心的多台机器上。

在一天中，我们将接收到信号（内部或外部），这些信号会在每个应用程序中引发一系列事件。

因此，每个信号都会产生大量的事件日志数据。日志本身并不是特别结构化的，并且它们在应用程序之间也有很大不同。他们确实遵循基本约定：

```
<timestamp> <calling function/method> <payload> 
```

我们在日志行中有 ID 号，可以帮助将事件与信号联系起来——然而，这些并不是万无一失的，我们有时需要使用其他方式来尝试将事件拼凑在一起。

我一直在阅读有关 Twitter 的 Storm 系统的信息，我对尝试使用它来实时分析大量日志数据并将其拼凑起来非常感兴趣。

我想做这样的事情：

*   根据实时数据趋势生成报告和流图。
*   **查询一个信号，然后在所有应用程序中调出与该信号相关的整个事件链，包括链中步骤之间的延迟。**（这个很重要）。
*   查看相关事件，并深入了解应用程序在某个事件发生时还做了什么。

# 输入数据？

日志数据存储在本地日志文件中（这不太可能改变），所以我们需要一种方法将数据吞入 Storm 本身。日志文件也可以被压缩。我已经考虑过使用 Flume 或 Logstash - 人们对这些有什么看法？或者是否有其他方法可以很好地与 Storm 配合使用？

# 存储事件？

我还需要一种方法来存储实时报告和图表的数据，以及事件数据本身。

第二部分我觉得有点棘手——什么样的存储后端适合存储事件，以及它们之间的链接？某种图形数据库是否合适，是那些新奇的无模式 NoSQL 数据库之一，还是更传统的东西？

# 风暴合适吗？

最后，Storm 适合这个角色，还是其他更适合的角色？

如果我确实选择了 Storm，我可以采取什么样的方法来解决这个问题？我希望其他人有类似问题的经验。

干杯，维克多

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T21:33:51.917

> 根据实时数据趋势生成报告和流图

这听起来很合适。

> 查询一个信号，然后在所有应用程序中调出与该信号相关的整个事件链，包括链中步骤之间的延迟。（这个很重要）。

如果您的查询仅限于最近的数据（= 不是很多数据）并且您可以允许数据丢失，我可以想象只使用 Storm 来执行此操作。如果没有，我可能会将 Storm 与数据库结合起来，主要使用 Storm 进行预处理并将数据存储到数据库中。在这种情况下，使用数据库可能会更好地处理查询。

> 查看相关事件，并深入了解应用程序在某个事件发生时还做了什么。

当您知道要执行什么查询并且不需要访问大量数据以进行查询时，Storm 非常棒。例如，提供显示相关事件的提要非常合适。使用数据库提供执行即席查询（向下钻取）的方法可能会更容易。此外，如果您希望允许用户查询大量数据（例如一周的数据而不是一小时的数据等），那么您可能需要一个数据库。

至于输入数据，我会使用日志集中产品。您可以创建一个与该产品将提供的任何接口交互的 Spout。或者，如果您使用允许通过套接字、JMS 等（如 log4j）发送日志的日志框架，则可以从该套接字/JMS 队列等中读取 spout。

至于数据库的选择，这真的取决于你想做什么。如果你不知道你将记录什么样的活动并且想要关联事件，我的赌注将放在图形数据库上，因为遍历事件会很容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T19:42:51.757

这听起来很像我目前正在处理的案例，所以我会给出一些关于可以做什么的想法。

要获取数据，您可以查看[Apache Kafka](http://kafka.apache.org/)。此消息系统可以将您的日志从应用程序中移出并进入中间存储。从那里，不同的系统可以作为消费者附加，Storm 是其中之一，使用特殊的 Storm-Kafka spout 可以很好地集成。

在我们的例子中，我们有一些实时数据直接从 Kafka 代理消费到监控/仪表板和其他需要通过 Storm 处理的数据流。后者根据数据的性质存储在分布式数据库（MongoDB、Cassandra 或 Couchbase）中，然后加载到仪表板和其他系统中。

对于批处理作业，您还可以将数据从 Kafka 加载到 Hadoop 中，所有这些都可以彼此独立完成，将相同的数据从 Kafka 拉到多个系统中。

Kafka 还通过 mirror-maker 支持多个数据中心。

# .net - WPF 可互换用户控件继承接口

> ID：14731378
> 
> 赞同：1
> 
> 时间：2013-02-06T14:23:52.000
> 
> 标签：.net, wpf, interface, user-controls

我有许多用户控件可以实现不同来源的视频播放（流媒体、文件、网络等......）

我有一个 IVideoPlayer 接口，它规定了这些控件上可用的属性/方法。

因此，如果我有：UC1、UC2 和 UC3，它们都实现了 IVideoPlayer。

我有我的主应用程序，它需要有一个 IVideoPlayer，但只会在运行时知道它应该是哪个。

我需要能够绑定到主要应用程序 XAML 中使用的任何 IVideoPlayer。

# php - 尝试使用 PHP 脚本的 CSS 更改表格中替代行的颜色

> ID：14731380
> 
> 赞同：1
> 
> 时间：2013-02-06T14:23:54.323
> 
> 标签：php, html, css, tags

尝试使用 PHP 脚本的 CSS 更改表格中替代行的颜色。我得到了颜色，但这些线条在我的脚本中重复出现。有没有办法解决？

PHP 脚本：

```
<?php

ini_set('display_errors',1); 
error_reporting(E_ALL);

//print_r(PDO::getAvailableDrivers()); 

$config['db'] = array( //This is the config array with the database details
    'host'              => 'localhost',
    'username'          => 'root',
    'password'          => '',
    'dbname'            => 'website'
); 

//echo '<table, th, td {border: 2px solid black; border-collapse="collapse";} >';
echo '<table id="customers"}>';
echo '<link rel="stylesheet" type="text/css" href="style.css">';

echo '<th> one </th>';
echo '<th> two </th>';
echo '<th> three </th>';
echo '<th> four </th>';

$db = new PDO('mysql:host=' . $config['db']['host'] . ';dbname=' . $config['db']['dbname'], $config['db']['username'], $config['db']['password']); //Instanciate an PDO Object

$query = $db->query("SELECT `articles`.`title`, `articles`.`hello`, `articles`.`id`,         `articles`.`name` FROM `articles` WHERE `articles`.`title` > 1 LIMIT 5");//running a query         from the database

while ($row = $query->fetch(PDO::FETCH_ASSOC)){
echo '<tr>';
echo '<td>';
echo $row["title"];
echo '</td>';
echo '<td>';
echo $row["hello"];
echo '</td>';
echo '<td>';
echo $row["id"];
echo '</td>';
echo '<td>';
echo $row["name"];
echo '</td>';
echo '</tr>';
echo '<tr class="alt">';
echo '<td>';
echo $row["title"];
echo '</td>';
echo '<td>';
echo $row["hello"];
echo '</td>';
echo '<td>';
echo $row["id"];
echo '</td>';
echo '<td>';
echo $row["name"];
echo '</td>';
echo '</tr>';

//print_r($query); //printing a query 

};

echo '</table>';

echo '<p> Returned ', $query->rowCount(), ' results due to limit set</p>';

//$query = $db->query("SELECT `title` FROM `articles`");//running a query from the database

//$query = $db->query("SELECT * FROM articles");

//print_r($query); //printing a query

//$stmt = $db->prepare($sql);
//$stmt->execute();
//$results = $stmt->fetchAll();

/* $query = $db->query("SELECT `id` FROM `articles`");//running a query from the database

while ($row = $query->fetch(PDO::FETCH_ASSOC)){
echo $row['title'], '<br>';
echo $row['id'], '<br>';
}

}

*/ 
```

CSS 脚本：

```
#customers
{
font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
width:100%;
border-collapse:collapse;
}
#customers td, #customers th 
{
font-size:1.2em;
border:1px solid #98bf21;
padding:3px 7px 2px 7px;
}
#customers th 
{
font-size:1.4em;
text-align:left;
padding-top:5px;
padding-bottom:4px;
background-color:#A7C942;
color:#fff;
}
#customers tr.alt td 
{
color:#000;
background-color:#EAF2D3;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:08:21.917

这是**ccs3** *:)*

尝试一下

```
table tr:nth-child(even) {
    background-color: #555555;
}

table tr:nth-child(odd) {
    background-color: #FFFFFF;
} 
```

或与类

```
<table class='demo'>
<tr><td>hi</td></tr>
<tr><td>hi</td></tr>
<tr><td>hi</td></tr>
<tr><td>hi</td></tr>
<table>

.demo tr:nth-child(even) {
    background-color: #555555;
}

.demo tr:nth-child(odd) {
    background-color: #FFFFFF;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:27:17.413

给每一行一个特定的 css 类，然后继续，或者查看 jquery zebra 表。

这是一个教程[http://docs.jquery.com/Tutorials:Zebra_Striping_Made_Easy](http://docs.jquery.com/Tutorials:Zebra_Striping_Made_Easy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:28:28.363

```
$alt=0;
while ($row = $query->fetch(PDO::FETCH_ASSOC)){
 if($alt==0){
  echo '<tr>';
  $alt=1;
 }else{
  echo '<tr class="alt">';
  $alt=0;
 }
 echo '<td>';
 echo $row["title"];
 echo '</td>';
 echo '<td>';
 echo $row["hello"];
 echo '</td>';
 echo '<td>';
 echo $row["id"];
 echo '</td>';
 echo '<td>';
 echo $row["name"];
 echo '</td>';
 echo '</tr>';
} 
```

不要在 while 循环中重复行两次。只需做一次，然后交替课堂作业。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T08:40:11.620

我这样做

```
$count = 0;
while(/*statement here */) {

  if($count%2 == 0){

    $class= "odd";

  } else{

    $class = "normal";

  }

 echo "<tr class=\"$class\"></tr>";

 $count++;
} 
```

# mod-rewrite - Mod_rewrite 重定向

> ID：14731383
> 
> 赞同：3
> 
> 时间：2013-02-06T14:24:00.210
> 
> 标签：mod-rewrite

我想我终于弄清楚了 mod_rewrite 的基础知识，但我仍然遇到了一些麻烦。

我希望我的假设站点将（几乎）所有流量引导到 home.html，它将解析 SEO URL。这意味着 /home、/home.html、/index.html、/something/somethingelse/gobledegook 都转到 home.html（不用担心传递 GET 变量，home 文件稍后会解析整个 URL）。

这是当前的设置：

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !/something/I/want/to/preserve.html
RewriteRule ^(.*)$ /home.html [L] 
```

这非常有效。除非它用作重定向：浏览器中的 URL 变为“/home.html”。如何加载 home.html 页面但保持 URL 不变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:38:06.783

很简单，使用[直通（PT）标志](http://httpd.apache.org/docs/2.4/en/rewrite/flags.html#flag_pt)：

```
RewriteRule ^(.*)$ /home.html [PT,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:35:06.720

我认为你应该尝试用这个替换你的规则：

```
RewriteCond %{HTTP_HOST} =www.staging.example.com
RewriteRule ^$ /abc-sp.html [PT,L] 
```

请注意，现在在规则中完成了“空白 URL 路径”测试，因此不需要原始的 RewriteCond。

[PT] 告诉 mod_rewrite 将输出保留为“URL 格式”，而不是将其转换为文件路径。因此，重写后的 URL 请求可以被 mod_proxy 拾取并发送到您的后端。

如果它不起作用，则使用 [P] 标志而不是 [PT]，并指定后端资源的*URL*，例如“http://192.168.0.2:8080/abc-sp.jsp”。[P] 标志将生成反向代理吞吐量，就像您可能存在的配置文件 mod_alias 代码一样。

请注意，上面的代码用于 .htaccess 或用于*容器内*的配置文件。如果在任何容器或 .htaccess 之外使用，请在 RewriteRule 模式中添加一个前导斜杠。

希望我的回答有帮助！:~)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T14:40:28.043

您应该能够简单地将`P`标志添加到您的`RewriteRule`. 请参阅：[Apache mod_rewrite 手册](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_p)

```
 RewriteRule ^(.*)$ /home.html [PL] 
```

# asp.net - ASP.NET MasterPage 回发不能从主页工作

> ID：14731385
> 
> 赞同：3
> 
> 时间：2013-02-06T14:24:08.593
> 
> 标签：asp.net, master-pages, postback

我有这个文本框和提交按钮`MasterPage`

```
<telerik:RadTextBox ID="txtsearch" runat="server" EnableViewState="false" Height="23px" Width="150px"></telerik:RadTextBox>
<asp:RadioButtonList ID="searchType" runat="server" EnableViewState="False" RepeatDirection="Horizontal" RepeatLayout="Table" Width="160px">
  <asp:ListItem Selected="True" Value="1">Authors</asp:ListItem>
  <asp:ListItem Value="2">Quotes</asp:ListItem>
</asp:RadioButtonList> 
```

`MasterPage`这是用户单击搜索按钮时执行的代码

```
protected void btnSearch_Click(object sender, EventArgs e)
{
    if (searchType.SelectedValue == "1")
    {
        Response.Redirect("~/quotes/authors/search/" + HttpUtility.HtmlEncode(txtsearch.Text)+"/1");
    } 
    else 
    {
        Response.Redirect("~/quotes/search/"+ HttpUtility.HtmlEncode(txtsearch.Text)+"/1");
    }
} 
```

它适用于任何页面，除了主页。如果您使用 /Default.aspx 访问主页，它可以工作。

这是网站[http://www.quotestample.com](http://www.quotestemple.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:16:07.737

查看您的网站并尝试使用上面发布的代码重新生成那里发生的事情后，您似乎没有在搜索按钮上放置 OnClick 事件。因此，当单击按钮时，它只是在不通过代码的情况下进行回发，因此不会触发任何事件。

尝试将**OnClick="btnSearch_Click"**添加到按钮。

```
<asp:Button ID="btnSearch" runat="server" Text="Search" OnClick="btnSearch_Click"/> 
```

# c++ - 在 delphi/pascal 中使用 C++ 接口

> ID：14731390
> 
> 赞同：0
> 
> 时间：2013-02-06T14:24:25.187
> 
> 标签：c++, delphi, interface, delphi-7, pascal

我在 dll 中定义了以下接口：

```
class TestInterface
{
   public: int foo(int)=0;
}; 
```

下面的函数让我创建这种类型的对象：

```
extern "C" declspec(dllexport) TestInterface* __stdcall CreateInterface(); 
```

该接口在 dll 中实现，我可以在 C++ 中毫无问题地使用它（我还定义了该`.def`文件以确保一切正常）。但是，在帕斯卡中使用它时，我遇到了问题。
这是我尝试使用`Interface`in pascal 的方式：

```
type
  myinterface = interface(IInterface)
    function foo(param1: Integer): Integer;
  end;

TMyInterface = ^myinterface;
pCreateInterface = function: TMyInterface; stdcall;

var
  CreateInterface: pCreateInterface; 
```

在pascal中使用接口：

```
function init()
begin
  DllHandle := LoadLibrary(DLLPath);
  if DllHandle <> 0 then
  begin
    @CreateInterface := GetProcAddress(DllHandle, 'CreateInterface');
    if (@GetXYZ <> nil) then
    begin
      dllInitialized := true;
      myXYZ := CreateInterface();
      myXYZ.foo(1); // Access violation error here
    end;
  end;
end; 
```

一切似乎都很好。调试的时候，`CreateInterface`执行成功，里面有一些值`myXYZ`。但是当我尝试打电话时，`foo`我得到了访问冲突错误。
我注意到我可以从 dll 调用不在任何类内的函数，但不能调用类/接口内的函数。
难道我做错了什么？我怎样才能做到这一点？
有没有一种方法可以在不更改 C++ 源代码的情况下在 delphi 中使用 C++ dll？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T14:46:32.037

首先，您的 Delphi 代码有一个从 IInterface 派生的对象，而您的 C++ 没有。

但是，我建议您阅读 Rudy Velthuis 的这篇文章：-

[http://rvelthuis.de/articles/articles-cppobjs.html](http://rvelthuis.de/articles/articles-cppobjs.html)

基本上，您要么需要将 C++ 端实现为 COM 对象，要么将 C++ 对象“扁平化”为 C 可调用函数。

# c# - Rhino 模拟如何检查一个方法是否被同一个类中的另一个方法调用

> ID：14731391
> 
> 赞同：1
> 
> 时间：2013-02-06T14:24:29.737
> 
> 标签：c#, unit-testing, rhino-mocks

我在测试我的一门课程时遇到了一些麻烦。我有一个抽象类，其中包含一个公共方法和两个受保护的抽象。我需要测试一次天气公共方法调用的抽象之一。

下面是我的代码的示例：

```
public abstract class A
{
    public string DoSomething(stirng input)
    {
        var output = new StringBuilder();

        foreach (var currentChar in input)
        {
            output.Append(DoSomethingElse(currentChar));
        }

        return output.ToString();
    }

    protected abstract char DoSomethingElse(char charToChange);
}

public class B : A
{
    protected override char DoSomethingElse(char charToChange)
    {
        var changedChar = charToChange;
        // Some logic changing charToChange's value
        return changedChar;
    }
} 
```

因为`DoSomethingElse()`受保护我创建了一个发布该方法的类

```
public class BPublisher : B
{
    public virtual new char DoSomethingElse()
    {
        return base.DoSomethingElse()
    }
} 
```

我的问题是如何测试使用 Rhino 模拟`DoSomething()`调用的事实？`DoSomethingElse()`

PS我试过使用`Expect`但`AssertWasCalled`没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:26:21.347

你真的需要测试这个吗？单元测试应该基于一组*输入来测试**输出*。您如何实现这一点与测试无关（在*输出*中您可以包含对象的结果成员/状态）

 **例如，如果我大量重构您的课程，我仍然希望测试通过。例如，如果我给你一个输入，我仍然会得到输出。如果实现不同，我真的不希望测试失败（因为我并不真正关心实现）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:14:16.100

当您使用 声明另一个方法时`new`，它与您原来的受保护方法没有任何关系。因为它不是虚拟的，所以你不能模拟它。让它成为虚拟和模拟有点奇怪，因为你派生了一个测试类来创建一个模拟。

在这种情况下，我实际上不会尝试使用模拟。为什么不在属性中返回有用的结果？

```
public class BPublisher : B
{
    public readonly StringBuilder chars = new StringBuilder();

    public virtual new char DoSomethingElse(char charToChange)
    {
        chars.Append(charToChange);
        return charToChange;
    }
}

var a = new BPublisher();
a.DoSomething("abc");
Assert.AreEqual("abc", a.chars.ToString()); 
```

最后还是很奇怪。有时很难测试抽象基类。你也可以考虑`DoSomethingElse`公开。**

# gnuplot - gnuplot：用两个变量绘制和拟合二维函数

> ID：14731398
> 
> 赞同：2
> 
> 时间：2013-02-06T14:25:10.300
> 
> 标签：gnuplot, curve-fitting, dimension, data-fitting

是否可以在 gnuplot 中绘制和拟合具有两个变量的函数？例如，一个依赖于 hight`h`和 Temperature的物理函数，`T`其中`T`依赖关系应该只计算而不是绘制（对于`f`，`h`并且`T`存在实验数据）：

```
f(h,T) = a * h * (1 + alpha * T) + f0 
```

哪里`a`和`f0`将由拟合确定，`alpha`是已知的。最后，我需要一个`f`在 y 轴和`h`x 轴上的绘图。应该适当地处理整个`T`依赖关系，但我不需要它与`splot`.

以下是我尝试过但失败的方法。我假设是因为无法设置两个虚拟变量：

```
set term png;
set output 'test.png';
set dummy h;
set dummy T;
f(h,T) = a * h * (1 + alpha * T) + f0;
fit f(h,T) 'data.txt' using 2:4:1 via a, f0;
plot f(h,T); 
```

给`undefined variable: h`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:51:46.677

从文档中的示例：

```
Examples:
       f(x) = a*x**2 + b*x + c
       g(x,y) = a*x**2 + b*y**2 + c*x*y
       FIT_LIMIT = 1e-6
       fit f(x) 'measured.dat' via 'start.par'
       fit f(x) 'measured.dat' using 3:($7-5) via 'start.par'
       fit f(x) './data/trash.dat' using 1:2:3 via a, b, c
       fit g(x,y) 'surface.dat' using 1:2:3:(1) via a, b, c 
```

如果您只是这样做，我希望您的脚本能够正常工作：

```
set term png
set output 'test.png'
f(h,T) = a * h * (1 + alpha * T) + f0
fit f(x,y) 'data.txt' using 2:4:1:(1) via a, f0

set view 90,0  #possibly `set view 0,90` or `set view map`?
splot f(x,y) 
```

# c# - 如何将 byte[] 作为文档发送给客户端？

> ID：14731399
> 
> 赞同：2
> 
> 时间：2013-02-06T14:25:10.663
> 
> 标签：c#, .net, byte, document

我有一个 WebForm（在 .NET 3.5 上） a `byte[]`，它“代表”一个 PDF 文件。

好吧，我想在此页面的请求（回发）期间将其发送给客户端。

我该怎么做？尝试搜索，但我只找到从客户端到服务器的 byte[] 教程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T14:39:05.660

您可以这样做，但您可能必须先清除响应以删除所有其他页面控件等。

```
protected void Page_Load(object sender, EventArgs e)
{
    var byteArray = File.ReadAllBytes("test.pdf");

    Response.ContentType = "application/pdf";
    Response.AddHeader("content-disposition", "attachment;filename=test.pdf");
    Response.BinaryWrite(byteArray);
    Response.Flush();

    Response.End();
} 
```

我通常创建一个 IHttpHandler 或 WCF REST 服务来提供文件。

# java - 应用程序在使用带有 ACTION_MEDIA_MOUNTED 的 sendBroadcast 时失去焦点

> ID：14731405
> 
> 赞同：1
> 
> 时间：2013-02-06T14:25:36.447
> 
> 标签：java, android, media

我有一个应用程序，它一启动就发送广播，因此它可以有一个可用的图像刷新列表。直到今天（至少那时我注意到这一点），这一切都很好。

它仍然会启动，但一旦调用意图，焦点就会转移到主屏幕应用程序（默认或替代）并且不会回来。我没有注意到我的 Android 手机是否更新或其他任何东西。

这是导致我麻烦的行：

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"+ Environment.getExternalStorageDirectory()))); 
```

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:51:39.307

就像@User117 说的，

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"+ Environment.getExternalStorageDirectory()))); 
```

我的应用程序可能不应该使用它。我找不到专门告诉程序员不要使用这种广播的文档，但是，就像他指出的那样，Android OS 实现通常应该很好地跟踪现有项目，尤其是在表现良好的应用程序的帮助下。

最后，我从我的应用程序中消除了呼叫。

# asp.net - 使容器 div 隐藏然后可见时，Silverlight 对象重新启动

> ID：14731409
> 
> 赞同：1
> 
> 时间：2013-02-06T14:25:50.750
> 
> 标签：asp.net, silverlight

所以我有这个带有选项卡的 aspx 页面，在一个选项卡中我有一个 silverlight 对象，其中有 2 个网格。

选项卡基本上是显示或隐藏对应页面 div 的可点击 div。

因此，当我修改 silverlight 网格中的某些内容时，更改选项卡，然后返回到带有 silverlight 网格的选项卡，silverlight 应用程序会重新启动吗？但是如果我不触摸silverlight部分，应用程序不会重新启动？

为什么？没有回发会重新启动 Silverlight 应用程序。？

选择另一个选项卡时，silverlight 对象只是隐藏了？为什么会重启？

谢谢，

瞎扯

# dynamics-crm-2011 - Dynamics CRM 必填字段，在表单上出现两次，一次隐藏一次可见

> ID：14731411
> 
> 赞同：4
> 
> 时间：2013-02-06T14:25:59.413
> 
> 标签：dynamics-crm-2011, dynamics-crm

我有一个包含两个部分的表单，这两个部分都包含一个“业务所需”的特定字段。在我目前的情况下，这些部分中的第一个是隐藏的，而第二个是可见的。（基本上，两者中哪一个可见是在 JScript 中设置的，并且取决于下拉列表的值）。

问题是，如果用户没有为必填字段输入值，然后点击保存，表单会尝试在两次出现的第一次（即不可见的一次）上验证它。当它发现用户没有填写此值时，它会将隐藏部分显示在视图中，尽管事实上相同的违规字段已经在表单的下方显示。

有什么办法可以阻止它这样做，或者以另一种方式解决我的问题？

**编辑：**

好的，从下面的答案中，我想也许我没有把情况说得足够清楚。我不认为将字段设置为非强制性或用令牌值填充它会起作用，因为如果用户没有填写该字段，我确实希望验证强制性状态。

我遇到的问题是，在验证了它之后，它向用户显示了已隐藏的字段版本，而不是已经可见的字段版本。

![描绘场景的图像。 验证表单后，隐藏部分（显示为红色边框）出现，因为](../Images/bcea869f8e988dc46c8d96fe259c7128.png)

据我所知，将字段设置为必填或不设置的简单 API 同样适用于表单上该字段的任何出现，而不是一个特定的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T14:54:57.980

编辑：好的，这不是很漂亮，但应该可以。

您可以使用获取值的集合

```
var bothControls = Xrm.Page.getAttribute('transactioncurrencyid').controls 
```

并使用

```
bothControls.get(1) 
```

为您提供第二个（基于零的索引，natch），以便您可以将其禁用

```
bothControls.get(1).setDisabled(true) 
```

这意味着将跳过验证

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:56:24.737

您可以更改要求值：

```
Xrm.Page.getAttribute("FieldName").setRequiredLevel("none"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T14:57:54.010

您可以使用此调用使字段不需要`Xrm.Page.getAttribute("field_tonotbe_required").setRequiredLevel("none");` 但由于该字段在表单上出现两次，我不确定 Javscript SDK 是否会使所有字段都不需要，或者只是第一个，所以您可能需要遍历层次结构从该部分中找到该字段，然后调用`setRequiredLevel`您想要更改的确切字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T17:54:18.363

您是否考虑过使用一个脚本，该脚本会在更改时触发并将可见部分字段中输入的值填充到隐藏部分的对应项中？

假设两个业务必填字段分别称为*Hubba*和*Bubba*。将 JavaScript 代码连接到更改时将检查*Hubba*是否为空（如果是，请将*Bubba*的内容复制到其中。否则，它只会将*Hubba*中的内容复制到*Bubba*中。

我假设这些字段在性质上是对应的，因此您**可以**在它们之间复制信息。

我想到了另外两个选择（不太理想的恕我直言）。第一个是 Pedro 所说的，通过打开和关闭验证来增强。不确定它是否会起作用。我只是为了完整起见而提到它。

第二个是应用 Polaris 的流程驱动 UI。真的不确定它是否有效，但理论上应该。

# ios - XCode：无法启动“APP_X_Y”-“A”数据包返回错误：-1

> ID：14731412
> 
> 赞同：11
> 
> 时间：2013-02-06T14:26:01.627
> 
> 标签：ios, xcode4, certificate, code-signing, provisioning-profile

我正在尝试让我的应用程序在模拟器和我的设备上再次运行。在我得到这个错误之前，我经历了 XCode 签名错误的奥德赛，但我知道这似乎我真的被卡住了。

**错误：**

当我尝试在设备上启动应用程序时，它构建时没有任何错误，但在安装应用程序后我收到错误消息：

**无法启动“APP_X_Y”-“A”数据包返回错误：-1**

不幸的是，我也不能使用**模拟器**- 它**卡**在“附加到 APP_X_Y”。您也可以在[这里](https://stackoverflow.com/questions/5382968/xcode-4-hangs-at-attaching-to-app-name)查看模拟器问题- 但那里没有最终解决方案。

**到目前为止我所做的：**

在出现不同的 XCode 错误后，我完成了以下 Stackoverflow 问题，每个问题都帮助我进入下一个级别。

1.  [Xcode：无法获取进程的任务](https://stackoverflow.com/questions/11601304/xcode-failed-to-get-the-task-for-process)
2.  [配置文件错误（启动远程程序时出错：无法获取进程 XXX 的任务。）](https://stackoverflow.com/questions/4720597/profile-bug-error-launching-remote-program-failed-to-get-the-task-for-process)
3.  [代码签名错误：找不到配置文件](https://stackoverflow.com/questions/5758154/code-sign-error-provisioning-profile-cant-be-found)
4.  [配置文件“团队”为“未知”](https://stackoverflow.com/questions/13180329/provisioning-profile-team-is-unknown)

在最后一步，但我认为事情真的搞砸了：XCode 无法再找到配置文件，这就是为什么我在我的项目文件中删除了我的配置文件字符串，就像这里推荐的那样：代码[设计错误: 删除过期配置文件后找不到配置文件](https://stackoverflow.com/questions/1760518/codesign-error-provisioning-profile-cannot-be-found-after-deleting-expired-prof)

知道我正在努力处理返回的数据包 -1 错误，我在这里找不到任何输入。有谁知道如何让它再次工作？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-17T16:29:58.307

尝试将应用程序部署到三个连接设备中的第三个时出现相同的错误。

我所要做的就是退出 XCode 并重新启动它，然后它又可以正常工作了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-25T14:11:26.017

有同样的错误。清理构建文件夹，清空派生数据文件夹，从设备中删除应用程序，重新启动 xcode 并再次工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T14:57:33.700

如果从头创建一个新项目，这个新项目可以连接到模拟器吗？在这种情况下，我建议将现有代码和设置移至新项目。我记得至少有一次不得不求助于这个，因为 XCode 项目文件出现了一些可疑的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-30T19:35:40.453

其他答案都没有帮助我.. 在整理文件之前，我无法在 Xcode 5 中启动任何应用程序`/etc/hosts`- 只留下基础知识......

```
::1                     localhost
127.0.0.1               localhost
255.255.255.255         broadcasthost
fe80::1%lo0             localhost
10.0.1.100              XYZ.com
2001:470:XXXX::100      XYZ.com 
```

您必须以 root 身份编辑文件，顺便说一句...`sudo nano /etc/hosts`

# c# - 将新记录从文本框添加到数据库时出错

> ID：14731418
> 
> 赞同：0
> 
> 时间：2013-02-06T14:26:30.177
> 
> 标签：c#, winforms

将数据保存到数据库时出错。DataAdapter.Fill(ds,"Table") 在将数据类型 nvarchar 转换为数字时抛出 SqlException 错误。

```
private void btnSave_Click_1(object sender, EventArgs e)
{
    da = new SqlDataAdapter();
    da.SelectCommand = new SqlCommand("select * from Measurement where ID = @ID", con);
    da.SelectCommand.Parameters.AddWithValue("@ID", txtID.Text);
    SqlCommandBuilder cb = new SqlCommandBuilder(da);
    da.Fill(ds, "Measurement"); //(SqlException Unhandled)Error converting data type nvarchar to numeric.

    if (String.IsNullOrEmpty(txtCellNo.Text.Trim()))
    {
        MessageBox.Show("Please enter Cell Number");
    }
    else
    {
        try
        {
            dr = ds.Tables["Measurement"].Rows[0];

            dr["CellNumber"] = txtCellNo.Text.Trim();
            dr["FirstName"] = txtFirstName.Text;
            dr["LastName"] = txtLastName.Text;
            dr["Shirt"] = txtShirt.Text;
            dr["Pant"] = txtPant.Text;
            dr["DueDate"] = txtDueDate.Text;
            dr["Date"] = txtDate.Text;

            cb.GetUpdateCommand();
            da.Update(ds, "Measurement");
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:29:23.897

您将`@ID`作为字符串传递给数据库（从数据库的角度来看是 nvarchar）。设置命令参数时，您需要转换/转换`txtID.Text`为适当的数值。`@ID`我怀疑您需要调用`int.Parse(txtID.Text)`（假设 ID 是数据库中的整数）。

顺便说一句，您可能还需要防止在`txtID.Text`. 在这种情况下，您可以使用：

```
int id;
if (!int.TryParse(txtID.Text, out id))
{
    //an invalid id was supplied so stop processing and warn user
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:29:42.357

这一行：

```
da.SelectCommand.Parameters.AddWithValue("@ID",txtID.Text); 
```

`txtID.Text`是您需要转换为整数的字符串。见[Int.TryParse](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:30:29.640

看起来`txtID.Text`可能不是整数。你应该先转换它。尝试：

```
da.SelectCommand.Parameters.AddWithValue("@ID",Convert.ToInt32(txtID.Text)); 
```

# jquery-ui - 客户端验证不适用于 ASP.Net MVC Razor 和 Ajax 表单

> ID：14731419
> 
> 赞同：2
> 
> 时间：2013-02-06T14:26:31.487
> 
> 标签：jquery-ui, asp.net-mvc-4, jquery-validate, unobtrusive-validation

我在 JQuery UI 对话框中显示部分视图。部分视图包含包含 Html.ValidationMessageFor 条目的字段，并且表单本身具有 Html.ValidationSummary。我似乎根本无法让客户端验证正常工作。如果我将一个字段留空并使用选项卡转到另一个字段，我预计会看到错误消息。如果我在成功加载部分视图时包含此行，我已经能够看到验证消息...

```
$.validator.unobtrusive.parse('#theForm'); 
```

但这只是在我提交 ajax 表单时，而不是之前。

jquery 在 jquery ui 对话框中加载部分视图...

```
$('#theForm').load('/Company/Edit', function (response, status, xhr)
        {
            if (status != "success")
                $('#theForm').html('failed to load details')
            else {
                $.validator.unobtrusive.parse('#theForm');
                $('#theForm').dialog({ title: title, show: 'blind', hide: 'blind', width: '1000px' });
                $('#theForm').dialog('open');
            }
          }); 
```

局部视图...

```
 @model CompanyDetails

    @using (Ajax.BeginForm("Save", "Company", new AjaxOptions() { HttpMethod="Post", OnSuccess="closeForm" }, new {@id = "companyDetailsForm"}))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary() 
        <fieldset>
            <legend>Company Details Form</legend>
            <ol>
                <li>
                    @Html.LabelFor(c => c.Name)
                    @Html.TextBoxFor(c => c.Name)
                    @Html.ValidationMessageFor(c => c.Name)
                </li>
                <li>
                    <input type="submit" value="Save" />
                </li>
            </ol>
        </fieldset>
} 
```

这里是模型类......

```
public class CompanyDetails
{
    [Required]
    [Display(Name = "Company Name")]
    public string Name { get; set; }
} 
```

我的 web.config 中有这个...

```
<add key="UnobtrusiveJavaScriptEnabled" value="true" />
<add key="ClientValidationEnabled" value="true"/> 
```

我包含以下 javascript 文件..

*   jquery-ui-1.9.2.js
*   jquery.unobtrusive-ajax.js
*   jquery.validate.js
*   jquery.validate.unobtrusive.js

谁能发现我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T15:08:10.713

> 但这只是在我提交 ajax 表单时，而不是之前。

这就是不显眼的 javascript 验证的工作原理。如果您将某个字段留空并从中抽出标签，则在您尝试提交表单之前不会触发验证。

# session - ServiceStack 身份验证的说明/示例

> ID：14731420
> 
> 赞同：1
> 
> 时间：2013-02-06T14:26:32.840
> 
> 标签：session, authentication, memcached, servicestack

我正在尝试使用 ServiceStack 来构建一个新的移动产品。它正在慢慢整合，但文档虽然很好，但部分内容有点简短，无法提供评论和问题。

**这个问题是关于内置身份验证的。**

我一直在 SocialBootstrap 工作，这是一个很好的例子，虽然我缺乏骨干经验是一个障碍。我想同时学习它，但没有时间这样做，所以想继续传统的观点。

基于此，有一些非常有用的示例或文档扩展。

**1\. 为什么所有的属性都在`AuthUserSession`字符串上？** 我已经通过`CustomUserSession`该类看到您可以创建一个`CustomId`虽然不应该将默认属性映射到`AutoIncrement`数据库表的属性？必须解析为整数并不是很理想。我想它只做过一次，但仍然看起来很奇怪。

```
var user = session.TranslateTo<User>();
user.Id = int.Parse(session.UserAuthId); 
```

**2\. 检索会话** 我的控制器派生自`ControllerBase` 哪个实现`ServiceStackController<CustomUserSession>`，因此从控制器获取会话很容易`base.UserSession`。如果我需要访问会话，`View`那么我只需将会话填充到一个`ViewBag`属性中。

我的服务扩展`AppServiceBase`，目前我能够访问会话的唯一方法是注入`ClientCache`：

```
public ICacheClient CacheClient { get; set; } 
```

然后调用：

```
var userSession = SessionFeature.GetOrCreateSession<AuthUserSession>(CacheClient); 
```

这似乎不是最优雅的解决方案，所以我希望有一种我不知道的更好的方法。这导致..

**3\. IClientCache** 从阅读[this question](https://stackoverflow.com/questions/13817171/servicestack-authentication)听起来我需要实现一个更持久的会话缓存。每次我重新编译、保存`_layout`或任何其他应用程序重置操作时都必须进行身份验证，这很烦人。

对于更持久的缓存，推荐的解决方案是使用 Memcached 吗？不幸的是，过去我只使用过 FormsAuthentication，所以这又是一个新领域。

```
container.Register<ICacheClient>(new MemcachedClientCache("127.0.0.0[:11211]"); 
```

**4.手动注册** 这是一个奇怪的。我试图在没有互联网连接的情况下进行编码，因此我实施了手动注册以避免必须注释掉`[Authenticate]`我的控制器上的所有属性（视图也有一些登录逻辑）。

它起作用了，或者我记得它起作用了，因为我可以继续调试。然而，现在回到互联世界，它没有。API 端点似乎不存在。如果我浏览到`/api/register`然后我收到一个`NotImplementedException`. 同样，由于我没有使用骨干网，我有一个 javascript 函数来执行这项工作：

```
var gateway = new servicestack.ClientGateway(location.protocol + "//" + location.host + '/api/');

function intiRegisterUser() {
    $('#signup-button').click(function () {
        gateway.postFormDataToService({
                Register: {
                    userName: $('#Username').val(),
                    displayName: $('#Username').val(),
                    firstName: $('#FirstName').val(),
                    lastName: $('#LastName').val(),
                    email: $('#Email').val(),
                    password: $('#Password').val()
                }
            },
            function(e) {
                document.location = "/";
            },
            function(ex) {
                handleError(ex);
            });
    });
} 
```

这也返回一个`NotImplementedException`.

顺便说一句，这个文档页面很棒，但可以扩展一点以包含其中的一些内容。

[https://github.com/ServiceStack/ServiceStack/wiki/Sessions](https://github.com/ServiceStack/ServiceStack/wiki/Sessions)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T19:34:01.900

**1\. 为什么AuthUserSession字符串上的所有属性？**

[ServiceStack 的内置身份验证](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization)旨在支持多个身份验证存储库和会话提供程序后端。为了能够支持多个提供者并减少创建新提供者所需的摩擦，许多*元数据属性*仍然作为可以保存任何数据类型的字符串（与只能保存 32 位整数的 int 相对）。

**2\. 检索会话**

使用[ServiceStack 的 New API时，您可以从方便的](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)[Service](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Service.cs)基类继承，该基类允许您访问类型化的 UserAuthSession：

```
base.SessionAs<AuthUserSession>(); 
```

它还提供对动态会话包的访问：

```
base.Session["dynamicProperty"] 
```

**3.IClientCache**

如果您想要永久缓存，请使用任何[ServiceStack 的分布式缓存提供程序](https://github.com/ServiceStack/ServiceStack/wiki/Caching)。我推荐 Redis，它[比 Memcached 具有许多优势，](https://stackoverflow.com/questions/1777103/what-nosql-solutions-are-out-there-for-net/2760282#2760282)并且很[容易在 Windows 中使用 Vagrant 运行](https://github.com/JasonPunyon/redishobo)：

**4\. 手动注册**

该`/api/register`服务[仅实现 HTTP POST](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Auth/RegistrationService.cs#L97)。虽然[注册服务的自定义路由是 /register，但注册服务](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/RegistrationFeature.cs#L17)的[预定义路由](http://www.servicestack.net/ServiceStack.Hello/#predefinedroutes)（您的示例正在使用）由[注册请求 DTO](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Auth/RegistrationService.cs#L15)推断，即：

```
/api/json/syncreply/Registration 
```

或[从 v3.9.35 release 开始](https://github.com/ServiceStack/ServiceStack/wiki/Release-Notes)，较短的别名：

```
/api/json/reply/Registration 
```

因此，您的 javascript 示例需要使用**Registration**属性，例如：

```
 gateway.postFormDataToService({
    Registration: { .. }
 }); 
```

# asp.net-mvc - 在 Razor 生成的 JavaScript 字符串中输出单引号

> ID：14731421
> 
> 赞同：27
> 
> 时间：2013-02-06T14:26:33.750
> 
> 标签：asp.net-mvc, razor

我正在使用 Razor 在 JavaScript 中组装几行代码。我认为最简单的方法是先组装整个 JavaScript 块，然后输出整个内容。问题是，单引号被渲染为 & #39;。

是否可以更改最后一行以使其正确写入：

```
 var friendArray = new Array();
    @{
        int i = 0;
        string jsString="";
        foreach(var friend in friends)
        {
            jsString = jsString + "friendArray[";
            jsString = jsString + i.ToString();
            jsString = jsString + "]='";
            jsString = jsString + friend.displayname;
            jsString = jsString + "';";
            i++;
        }
        @jsString;
    } 
```

以上生成：

```
 friendArray[0]=& #39;Hollister& #39;;friendArray[1]=& #39;Festus& #39;; 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-06T14:29:44.937

您可以通过以下方式输出来关闭 HTML 的编码：

```
@Html.Raw(jsString) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-03T11:10:48.667

也许更好的解决方案是使用 JSON 序列化程序来清理您的输出，这显然会带来可能的注入安全风险。

在您的特定情况下，您将改为：

```
var friendArray = @Html.Raw(JsonConvert.SerializeObject(friends.Select(f => f.displayname))); 
```

或者如果这样对您来说更具可读性：

```
 @{
        var arr = JsonConvert.SerializeObject(friends.Select(f => f.displayname));
    }

    var friendArray = @Html.Raw(arr); 
```

`arr`将采用 JSON 数组的形式，例如`["a","b","c"]`，如果你将它加入到创建friendArray 的 JS 行，你会得到类似的东西：`var friendArray = ["a","b","c"];`它会创建与你的数组相同的数组。

请注意，行尾的分号 (;)`var friendArray`是生成有效 JS 语句所必需的。

# jquery - 使用 Yepnope.js 有条件地加载 Fancybox 资源

> ID：14731429
> 
> 赞同：0
> 
> 时间：2013-02-06T14:26:56.723
> 
> 标签：jquery, fancybox, yepnope

我正在尝试有条件地加载 Fancybox js 和 css 代码，并仅在元素存在并且我在特定页面中时才在元素上执行它。到目前为止，我一直在尝试以下代码：

```
yepnope({
test : jQuery('body').hasClass('edizioni'),
yep  : ['/assets/css/jquery.fancybox.css','/assets/js/libs/jquery.fancybox.pack.js','/assets/js/libs/jquery.mousewheel-3.0.6.pack.js',
        jQuery("#gallery a").fancybox()]
}); 
```

我得到一个`Uncaught TypeError: Object [object Object] has no method 'fancybox'`

我猜 jquery 运行正常，资源 jquery.fancybox.pack.js 被正确加载。我的实施有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:25:32.100

您需要使用 yepnope 的回调功能。您现在拥有它的方式，它尝试`jQuery("#gallery a").fancybox()`在请求`fancybox.pack.js`. 它不会按顺序加载文件。每次加载资源时都会触发回调，您需要验证 URL。

这应该有效，或者至少让你开始：

```
yepnope({
    test : jQuery('body').hasClass('edizioni'),
    yep  : ['/assets/css/jquery.fancybox.css','/assets/js/libs/jquery.fancybox.pack.js','/assets/js/libs/jquery.mousewheel-3.0.6.pack.js'],
    callback: function (url, result, key) {
        if(url === "/assets/js/libs/jquery.fancybox.pack.js"){
            // Fancybox has loaded, it's safe to call it now
            jQuery("#gallery a").fancybox();
        }
    }
}); 
```

# ios - ios中的图片翻译

> ID：14731431
> 
> 赞同：0
> 
> 时间：2013-02-06T14:27:01.950
> 
> 标签：ios, objective-c

我不是一个很好的程序员，所以如果这是一个愚蠢的问题，请原谅我！我只是在 ios 中学习图像转换我想在按钮单击事件上将图像从一个位置转换到另一个位置这是代码...

```
- (IBAction)showinfobybutton:(id)sender {
    CGFloat v1 = imageview.center.x;
    CGFloat v2 = imageview.center.y;
    CGAffineTransform trans = CGAffineTransformTranslate(imageview.transform, v1, v2);
    imageview.transform = trans; 
} 
```

代码有什么问题。它只在 y 方向上平移，而不是在 x 方向上。无论您为 v1 函数赋予多少价值，都不在乎。知道发生了什么.....我完全被困住了谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T14:32:49.350

关于你的问题`CGAffineTransform`，有几个想法：

1.  你是在`init`方法还是这样做`viewDidLoad`？如果是这样，那在视图创建过程中可能为时过早，因为（例如）的许多`UIView`相关属性在那个时候并不可靠。看一看，确保你得到 和 的非零值。如果您想查看帧坐标等，您可能希望将其推迟到或以后。`imageview``center``v1``v2``viewDidAppear`

2.  你在使用自动布局吗？打开故事板或 NIB 并查看文档属性（如下）。如果您在屏幕上移动东西，您可能需要将其关闭。

    ![在此处输入图像描述](../Images/ab6c7f42083967324cce654f5e271175.png)

3.  顺便说一句，你的设置`v1`和`v2`基于`center`的`imageview`是好奇的。您正在移动 的`center`数量`center`。通常你会看到如下内容：

    ```
    CGFloat dx = 100.0;
    CGFloat dy = 200.0;

    [UIView animateWithDuration:1.0
                     animations:^{
                         CGAffineTransform trans = CGAffineTransformTranslate(self.someView.transform, dx, dy);
                         imageview.transform = trans;
                     }]; 
    ```

    顺便说一句，我制作了 (a) 动画，因为这通常是更好的用户体验；(b) 在进行这样的诊断时，我可以更轻松地了解它的变化和变化。如果您不想要动画，显然不要使用`animateWithDuration`代码。

* * *

顺便说一句，如果你想移动一个`UIView`控件，如果你不使用自动布局，最常见的方法是使用`animationWithDuration`改变`center`或`frame`，例如：

```
[UIView animateWithDuration:1.0
                 animations:^{
                     imageview.center = CGPointMake(newX, newY); // set newX and newY to whatever you want
                 }]; 
```

如果您使用自动布局，则该过程会稍微复杂一些。自动布局中的一种技术是以编程方式更改约束，但这可能超出了这个问题的范围。

# android - Eclipse “Java 堆空间”错误，Eclipse 没有响应

> ID：14731436
> 
> 赞同：12
> 
> 时间：2013-02-06T14:27:24.447
> 
> 标签：android, eclipse

如果我尝试编辑其中一个 layout.xml，Eclipse 会变得越来越慢，大约 1 分钟后，它会显示**5-6 行“Java 堆空间”错误消息**，仅此而已：

![错误1](../Images/ce2c8192db558f9f170c9d487a58acb1.png)

**在此之后**，Eclipse**没有响应**，我强制退出它，我得到了第二个错误：

![错误2](../Images/0d5feefe85ae1d36751f481f12e977ec.png)

**每次我想编辑该特定布局**时，都会发生这种情况。

 **有人可以告诉我**任何建议我该怎么做吗？** 我无法继续我的工作，这真的很烦人，**它只是阻止了我，我什么也做不了**，我收到这个错误大约 10 次。

**编辑：**

很多人说要增加堆大小，在 .ini 文件等中将 Eclipse 配置到您的计算机上。**以防万一我现在强调问题**：**这不是配置错误**，这显然是 Eclipse 错误，即**消耗**无论你有多少，你**在几分钟内拥有的所有记忆。****配置 .ini 文件不会解决这个问题**。

**尝试关闭 Lint。**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-22T14:12:47.400

我关闭了 Lint，问题解决了。如果您遇到此类问题，请始终关闭 Lint。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T16:49:32.577

布局中的某些东西正在尝试操作大量数据，并且对其进行处理会迫使 JVM 耗尽堆。是否使用了任何转换或 XSLT？模式是否允许标签的子节点无限嵌套？

检查布局是否存在某种形式的递归或任何其他类型的无限扩展。

尝试发布一个标题为“什么会导致此 XML 耗尽内存？”的单独问题。并包含布局的 XML 代码。您可以在此处执行此操作，但添加新问题会更简洁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-28T19:43:37.933

几分钟前我遇到了同样的问题，但我所做的是我更改了我将要使用的图像，因为该属性太大了。所以尝试和你另一个图像，你将能够看到你的工作而无需触摸任何设置**

# sql - 数据库中的表关系

> ID：14731438
> 
> 赞同：0
> 
> 时间：2013-02-06T14:27:26.147
> 
> 标签：sql, database, database-design

我可以在我的数据库中有三个表并像这样将它们相互链接吗？对吗？ ![这个](../Images/195d484785abdf81883cdadc13cab072.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:50:31.670

是的，您可以通过这种方式设置数据。

*不，如果*orders.userId 应该与orders.IndexCards.UserId 相同，这可能不是一个好主意。除非您有充分的理由需要冗余，否则最好将链接仅放在一个位置。

当然，如果orders.userId与对应的IndexCards.userId无关，那么你的数据模型就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:04:29.047

您的数据库中有异常。我发现的异常在名为***Orders***的表中。由于***IndexCard***表有该列（*idfromUsers*），您应该从该表（*Orders*）中删除它并删除它与**User**表的关系。

这意味着**orders**与**IndexCards**相关，而**IndexCards**与**Users**相关。

# javascript - 如何按属性名称删除所有属性

> ID：14731439
> 
> 赞同：0
> 
> 时间：2013-02-06T14:27:26.963
> 
> 标签：javascript, jquery, jquery-selectors

我想删除具有类“只读状态”的字段中属性名称以“data-val”开头的所有属性

```
 jQuery("[data-val^='tr']" ) 
```

这将给出以“tr”开头的属性“data-val”值

> 但我需要删除匹配元素中**以“data-val”开头的所有属性。**

我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T14:36:37.970

`attributes`您可以为此使用香草 javascript ：

```
$('.read-only-state').each(function() {
   // get the native attributes object
   var attrs = this.attributes;
   var toRemove = [];
   // cache the jquery object containing the element for better performance
   var element = $(this);

   // iterate the attributes
   for (attr in attrs) {
     if (typeof attrs[attr] === 'object' && 
         typeof attrs[attr].name === 'string' && 
         (/^data-val/).test(attrs[attr].name)) {
       // Unfortunately, we can not call removeAttr directly in here, since it
       // hurts the iteration.
       toRemove.push(attrs[attr].name);
     }
   }

   for (var i = 0; i < toRemove.length; i++) {
     element.removeAttr(toRemove[i]);
   }
}); 
```

# java - 如何自定义soapUI库以从WSDL生成请求和响应？

> ID：14731441
> 
> 赞同：1
> 
> 时间：2013-02-06T14:27:26.380
> 
> 标签：java, soap, wsdl, soapui

我正在开发一个模块，该模块将`wsdl`生成请求和响应文档。为此，我正在使用此代码[帖子](https://stackoverflow.com/questions/7487699/how-to-generate-a-soap-message-with-a-fully-populated-request-from-wsdl-without)`soapui`中提到的库

```
package com.bbog.soap;
import com.eviware.soapui.impl.wsdl.WsdlInterface;
import com.eviware.soapui.impl.wsdl.WsdlOperation;
import com.eviware.soapui.impl.wsdl.WsdlProject;
import com.eviware.soapui.impl.wsdl.support.wsdl.WsdlImporter;
import com.eviware.soapui.model.iface.Operation;

public class WsdlAnalyzer {

public static void main(String[] args) throws Exception {
    WsdlProject project = new WsdlProject();
    WsdlInterface[] wsdls = WsdlImporter.importWsdl(project, "http://localhost:7000/Solicitud?wsdl");
    WsdlInterface wsdl = wsdls[0];
    for (Operation operation : wsdl.getOperationList()) {
        WsdlOperation op = (WsdlOperation) operation;
        System.out.println("OP:"+op.getName());
        System.out.println(op.createRequest(true));
        System.out.println("Response:");
        System.out.println(op.createResponse(true));
    }
}
} 
```

因此，当我使用它来生成肥皂请求和响应时，即使它不在 for 循环中，也会在后台运行一些东西（我可以在 net beans 中看到）。请帮助我自定义soapUI库以调用适当的方法来生成请求和响应并释放任何创建/初始化的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:49:44.417

这就是我处理请求和响应的方式

```
 WsdlOperation wsdlOperation = (WsdlOperation) operation;
   // create a new empty request for that operation
   WsdlRequest request = wsdlOperation.addNewRequest("My request");
   request.setTimeout("2000");                  
   requestContent = wsdlOperation.createRequest(true);
   request.setRequestContent(requestContent);
   System.out.println("REQUEST: " + requestContent);
   // submit the request
   try {
        WsdlSubmit submit = (WsdlSubmit) request.submit(new WsdlSubmitContext(request), false);
        Status status = submit.getStatus(); //FINISHED OR ERROR
        System.out.println("STATUS: " + status); 
        Response response = submit.getResponse();
        System.out.println("RESPONSE: " + response.getContentAsString());
     } catch (SubmitException ex) {
    //Catch the exception
     } 
```

希望能帮助到你

# visual-studio-2005 - 我使用 _mm_srl_epi32 错了吗？

> ID：14731442
> 
> 赞同：1
> 
> 时间：2013-02-06T14:27:28.510
> 
> 标签：visual-studio-2005, sse, simd

在这个小代码示例中：

```
__m128i twos = _mm_set_epi32(2,3,1,2);
__m128i foo = _mm_set_epi32(128,128,128,128);
__m128i shifted = _mm_srl_epi32(foo,twos); 
```

“移位”充满了零，而我希望它两个充满四个 32 位整数，其值分别为 32、16、64 和 32。我是否使用了内在错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T15:16:56.410

是的，您使用不正确。的第二个参数`_mm_srl_epi32()`指定将第一个参数移动的位数，但它不是您可能期望的矢量参数，允许您将每个 32 位整数移动不同的位数。而是将 128 位参数截断为 64 位，并使用所得计数来确定要移位的位数；第一个参数中的所有 4 个整数使用相同的移位量。在您的情况下，较低的 64 位是`0x0000000100000010`，它的计算结果是一个非常大的正数。这导致所有元素都`foo`被刷新为零，因为所有位都被移出。

[英特尔的AVX Programmer's Reference](http://software.intel.com/sites/default/files/m/c/6/7/c/4/17976-intel-avx-programming-reference-31943302.pdf)是查找每条指令的所有小细节的好地方。虽然标题可能有点用词不当，但该文档包含所有 SSE/SSE2/.../AVX/AVX2 指令的描述以及英特尔 C++ 编译器中可用的内在函数的描述（通常也可用于`gcc`和其他）。在文档中搜索可以`_mm_srl_epi32`清楚地解释该指令的确切作用。

# jquery - Jquery将第二个选项卡显示为默认活动

> ID：14731444
> 
> 赞同：0
> 
> 时间：2013-02-06T14:27:33.057
> 
> 标签：jquery, tabs

我正在尝试将我的第二个 li 标签显示为默认活动选项卡。我的jQuery代码是

```
<script type="text/javascript">    
    $(document).ready(function(){
        $('#newtabs div').hide();
        $('#newtabs div:first').show();
        $('#newtabs ul li:first').addClass('active');
        $('#newtabs ul li a').click(function(){ 
            $('#newtabs ul li').removeClass('active');
            $(this).parent().addClass('active'); 
            var currentTab = $(this).attr('href'); 
            $('#newtabs div').hide();
            $(currentTab).show();
            return false;
        });
    });
</script> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:31:15.867

根据 jQuery 文档 ( [http://api.jqueryui.com/tabs/](http://api.jqueryui.com/tabs/) )，您可以`active`在设置选项时使用该属性。例如，你可以做

```
$(".selector").tabs({ active: 1 }); 
```

这将设置第二个选项卡（基于 0 索引）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:30:28.813

尝试这个：

```
$(document).ready(function(){
    $('#newtabs div').hide();
    $('#newtabs div').eq(1).show();
    $('#newtabs ul li').eq(1).addClass('active');
    ...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:31:18.953

代替

```
$('#newtabs ul li:first').addClass('active'); 
```

尝试

```
$('#newtabs ul li').eq(1).addClass('active'); 
```

前提是#newtabs 仅包含一个 ul。如果要定位的#newtabs 内有多个 ul，则需要使用

```
$('#newtabs ul li:nth-child(2)').addClass('active'); 
```

因为它选择“所有 li 元素是其父元素的第二个子元素”（nth-child() 使用基于 1 的索引），而另一种方法将仅选择第一个 ul 的第二个 li 子元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T14:31:38.087

如果我正确理解你的问题，你应该改变

```
$('#newtabs div:first').show();
$('#newtabs ul li:first').addClass('active'); 
```

进入

```
$('#newtabs div:eq(1)').show();
$('#newtabs ul li:eq(1)').addClass('active'); 
```

过滤`eq(1)`第二个对象（索引从 0 开始）

# visual-studio - 构建应用程序的 DLL 的相对路径

> ID：14731445
> 
> 赞同：0
> 
> 时间：2013-02-06T14:27:33.527
> 
> 标签：visual-studio, reference, visual-studio-2012, relative-path

我想知道是否有可能制作这样的东西......

我有一个项目，`VS2012`它使用两个引用的`VS`项目（`DLLs`正在编译期间创建）和其他一些`DLLs`（外部库等）。现在我想清理我的编译并放在`DLLs`两个文件夹中：例如`Internals`和`Externals`.

如何使它成为可能？问题是我编译`.exe`的应用程序文件希望将`DLLs`其放置在主文件夹中（靠近它） - 所以如果它需要从`DLL`它加载库崩溃......

我试图在网上找到一些东西，但 ppl 只询问`DLLs`从参考文件夹复制到输出文件夹的问题。但这不是我想做的：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:57:33.173

好的，我找到了解决方案。我需要添加一个新项目`app.config`并指定`privatePaths`：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <probing privatePath="InternalsFolder;ExternalsFolder" />
        </assemblyBinding>
    </runtime>
</configuration> 
```

# java - 从字符串转换为整数时 int 无效

> ID：14731451
> 
> 赞同：1
> 
> 时间：2013-02-06T14:27:47.103
> 
> 标签：java, parsing

我正在尝试使用将仅包含数字的字符串转换为整数`int number = Integer.parseInt(string)`，但它返回 #

```
error: Invalid int: "number" 
```

例如，如果字符串为“10”，则返回：`Invalid int: "10"`。怎么了？

**编辑：**

```
FileInputStream fis;
        int number =0;
        String line="";
        try
        {
            fis = new FileInputStream(getFilesDir()+pathToFile);
            BufferedReader reader = new BufferedReader(new InputStreamReader(fis));
            line=reader.readLine();
            Log.e("Read Line", "Read line: *" +line+ "*"); //returns *10*
            try
            {
                number = Integer.parseInt(line.trim());
            }
            catch(NumberFormatException nfe)
            {
                Log.e("ERROR CONVERTING", nfe.getMessage()); // return above error
            }
            reader.close();

        }
        catch(Exception ex)
        {
            Log.e("ERROR OPENING FILE", "Can't open file: "+ex.getMessage());
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T18:16:05.930

我在这个问题的答案中使用了代码：[LINK](https://stackoverflow.com/questions/4030928/extract-digits-from-a-string-in-java)

```
str = str.replaceAll("\\D+",""); 
```

不知道为什么没有这个它不起作用，因为字符串中除了数字之外没有其他字符，但它不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-26T16:10:09.097

**有时它意味着“数字太大”。**

我遇到了一种情况，因为我的号码太大了。例子：

```
Integer.parseInt("201506121234567"); 
```

它导致我出现异常 NumberFormat。

为了解决，我改为：

```
Long.parseLong("201506121234567"); 
```

希望它可以帮助某人！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T14:31:36.550

你真的尝试过`"10"`或任何其他号码吗？该错误非常具体。

> 无效的整数：“数字”

这意味着在这一行

```
Integer.parseInt(string) 
```

`string`有价值`"number"`。检查您在哪里设置此值并验证您实际上是在设置数字字符串。

# wpf - 如何强制 ItemContainerGenerator 为项目生成容器或启用 UI 虚拟化时如何将 TreeView 滚动到扩展节点？

> ID：14731455
> 
> 赞同：4
> 
> 时间：2013-02-06T14:27:58.767
> 
> 标签：wpf, mvvm, treeview, ui-virtualization, itemcontainergenerator

TreeView 没有`ScrollIntoView()`方法
唯一的方法是调用`TreeVewItem.BringIntoView()`相应的数据项容器。
但是如果 node 不可见并且还没有生成容器，`ItemsControl.ItemContainerGenerator.ContainerFromItem()`将返回`null`.

所以应该有一些方法来强制 ItemContainerGenerator 为项目创建容器。

合理的问题是：*如何扩展节点并保持不可见？！*

简单的！`IsExpanded`绑定到 VM 的属性。UI 虚拟化按预期工作：
TreeViewItem.Expanded 的事件处理程序仅在手动滚动到项目时被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:41:18.340

我不能保证这个问题足够相似以提供帮助，但我想因为我找不到自己的问题的好答案，所以我会在这里发布，因为这是相似的，我想出了如何解决我的问题。

我正在使用**Canvas**控件，并且在该画布上放置了复杂的 UI 元素，并将**ItemsControl**控件作为其 XAML UI 定义的一部分。**ItemsControl**已在其**ItemTemplates**中定义了**DataTemplates**集。

 **因此，我的对象的某些方面只有在更新可视化树后才会完全生成。这不是在处理画布时拖放和使用项目的问题，因为**ItemContainerGenerator**在我需要时已经生成了项目。但是，在可视化树绘制自身之前，在 Canvas 加载时尝试从数据库重新生成项目时，这是一个问题。

我发现解决这个问题的唯一真正方法是，一旦触发了画布的 LayoutUpdated 事件，就开始在画布上放置“辅助对象”（与**ItemContainerGenerators制作的对象相关联的对象）。**

```
public class DesignerCanvas : Canvas
{
  public void LoadCanvasFromDB()
  {
    ...
    [loading items from the database, part one]
    LayoutUpdated += DesignerCanvas_LayoutUpdated;
  }

  void DesignerCanvas_LayoutUpdated(object sender, EventArgs e)
  {
    LayoutUpdated -= DesignerCanvas_LayoutUpdated;
    [loading items from the database which tie to UI elements from part one] 
```**

# github - GitHub API：在单个 GET 请求中获取所有文件夹和文件

> ID：14731459
> 
> 赞同：13
> 
> 时间：2013-02-06T14:28:09.883
> 
> 标签：github, github-api

在 GitHub API 中，我可以发出 GET 请求

`https://api.github.com/repos/owner/repo/git/trees/master?recursive=1`

递归地获取存储库的所有树。除了提供所有目录之外，它还提供了可用于下载单个文件的 URL：

```
[...]
{
    "mode": "100644",
    "type": "blob",
    "sha": "abc1234",
    "path": "path/to/file.txt",
    "size": 104361,
    "url": "https://api.github.com/repos/owner/repo/git/blobs/abc1234"
},
[...] 
```

虽然该`recursive=1`部分使我不必为存储库中的每个目录发出新的 GET 请求，但我仍然必须对每个文件进行单独调用。我浏览了[GitHub API Docs](http://developer.github.com/v3/)，但他们没有提供一种方法来做到这一点。很可能根本没有办法在一个请求中获取所有文件和文件夹，但我想在这里询问以确认我没有其他选择。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T18:39:24.133

使用单个请求执行此操作的唯一方法是将当前内容作为存档获取： [https ://docs.github.com/en/rest/reference/repos#download-a-repository-archive](https://docs.github.com/en/rest/reference/repos#download-a-repository-archive)

实际上，这是 2 个请求，因为初始响应是 302 重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:27:18.707

您必须为`GET`API 提供的每个 URL 创建单独的 s。您应该检查收到的响应的标题中的“ETag”或“Last-Modified”值，并使用它们来防止每次查询您的网站时都必须重新下载文件。假设内容已更改，您还将保存您的速率限制。

# asp.net - 如何通过appcmd.exe启动站点浏览？

> ID：14731460
> 
> 赞同：0
> 
> 时间：2013-02-06T14:28:09.177
> 
> 标签：asp.net, windows, iis, iis-7, appcmd

如何通过appcmd.exe启动站点浏览？如何通过 appcmd.exe 知道站点 url？

更新：我的站点的名称为 iis：默认网站，但在 brawse 开始时有地址 ht_tp://localhost/Site。我如何定义名称“localhost”？

通讯。“开始”到 appcmd 起始站点。我想打开网站浏览，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:33:26.300

> Site 对象提供列出、创建和删除站点实例的方法（这些是几乎所有对象上都存在的标准方法），以及停止和启动站点。每个站点实例依次包含可以检查、搜索或设置的属性，例如站点名称和站点 ID。每个命令的输出始终是对象实例的列表。

看看这里：[AppCmd.exe 入门](http://www.iis.net/learn/get-started/getting-started-with-iis/getting-started-with-appcmdexe#Working)

可以通过命令找到更多帮助：

> APPMD/?

# jpa - JPA/EclipseLink 在不同的集合上混合批量获取策略

> ID：14731464
> 
> 赞同：4
> 
> 时间：2013-02-06T14:28:18.817
> 
> 标签：jpa, eclipselink

我在 EclipseLink 2.3.2 中有一个 JPA / JPQL 查询，并且我在多个集合上提供了一个批量获取查询提示

```
hints={
  @QueryHint(name=QueryHints.BATCH, value="obj.collection1"),
  @QueryHint(name=QueryHints.BATCH, value="obj.group.members"),
  @QueryHint(name=QueryHints.BATCH_TYPE, value="IN"),
} 
```

有没有办法在不同的集合上指定不同的批量获取类型，这样我就可以`obj.collection1`使用`JOIN`and `obj.group.members`with `IN`or获得`EXISTS`？

还是它们都必须相同？

实际应用是在嵌套集合上进行提取，在不同级别可能存在不同的基数。例如，对于初始查询，可能会返回数千行，因此我无法使用“IN”for`obj.collection1`而不会破坏 Oracle 对 IN 子句的语法限制。另一方面，因为`obj.group.members`可能只有几个不同的值，`group`所以 IN 子句会更有意义。

# android - 如何在android中创建像instagram这样的分段列表视图

> ID：14731469
> 
> 赞同：0
> 
> 时间：2013-02-06T14:28:38.297
> 
> 标签：android, android-listview

我已经搜索了很多内容以制作`ListView`与 Instagram 完全相同的部分

```
Edit profile      edit
Find Friend       search
------------------------------
Friend Request
------------------------------

kumar             accept
sheila            accept
------------------------------
------------------------------ 
```

我有类似以下示例的内容：

[示例 1](http://w2davids.wordpress.com/android-sectioned-headers-in-listviews/)

[示例 2](http://androidcookbook.com/Recipe.seam?recipeId=992)

我还没有找到我想要的。我浏览过很多博客和 GitHub 存储库，但直到现在我还没有得到确切的方法。如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:40:39.027

您应该阅读 SectionIndexer。

这可能会有所帮助：

[Android：如何使用 SectionIndexer](https://stackoverflow.com/questions/6861339/android-how-to-use-sectionindexer)

[http://bartinger.at/listview-with-sectionsseparators/](http://bartinger.at/listview-with-sectionsseparators/)

# javascript - 刷新 Html 布局以重新计算滚动条

> ID：14731471
> 
> 赞同：3
> 
> 时间：2013-02-06T14:28:45.960
> 
> 标签：javascript, html, browser

我有`div`一个固定大小的显示`scrollbars`，因为内容太大。还行吧。当我调整大小`div`以`scrollbars`隐藏`scrollbars`. 这是因为`scrollbars`它们自己在`div`. 有没有办法让浏览器重新计算它的大小`div`及其内部内容，看看是否真的应该有一个可滚动的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T14:31:07.890

使用 jQuery 进行 DOM 处理：

```
$("div#yourdiv").attr("overflow", "hidden"); <-- remove scrollbars
setTimeout(function(){
   $("div#yourdiv").attr("overflow", "auto"); // auto | initial
},1); <-- 1 millisecond is enough to allow the DOM to update 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-01T17:14:07.463

我犯了同样的错误，可以安排：

```
$('body').attr('style', 'overflow: auto !important'); 
```

# javascript - Iframe AfterOnLoadLoading 循环仅显示第一个 iFrame

> ID：14731472
> 
> 赞同：0
> 
> 时间：2013-02-06T14:28:51.347
> 
> 标签：javascript, dom, iframe, youtube, appendchild

对于 domload 性能，我在 Onload 之后通过循环加载我的 2 个 ytb iframe，它适用于第一个，控制台不会抛出错误，目标 div 是 2 `<div class="ytb-holder-image"></div>`，我错过了什么吗？

```
var srcs= new Array();
    srcs[0]= "fhIHMDpbQDI";
    srcs[1]= "oMRZp7cp79g";

function createIframe(){

    for (var j = 0; j < 1; j++)
    {
      var i = document.createElement("iframe");
          i.src = 'http://www.youtube.com/embed/'+srcs[j];
          i.width = "853xp";
          i.height = "480px";
          document.getElementsByClassName("ytb-holder-image")[j].appendChild(i);
        };

    } 
```

对于文档，如果有人想以类似的方式加载他的内容，这里是 IE 的条件：

```
if (window.addEventListener)
window.addEventListener("load", createIframe, false);
else if (window.attachEvent)
window.attachEvent("onload", createIframe);
else window.onload = createIframe; 
```

# jsp - JSP：字符串到日期格式

> ID：14731473
> 
> 赞同：0
> 
> 时间：2013-02-06T14:28:51.323
> 
> 标签：jsp

我需要将字符串（从 SQL 表中提取）转换为 JSP 中的日期格式。我这样做了：

```
String PeerdateNtime="Wednesday, February 6, 2013 10:11:00 PM"; //this is the sample string
SimpleDateFormat formater = new SimpleDateFormat("E, M d, yyyy HH:mm:ss aaa");
Date newPeerdateNtime = formater.parse(PeerdateNtime); 
```

但是，出了点问题，我无法得到日期。我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:31:57.427

我想你需要`"EEE, MMM dd, yyyy hh:mm:ss aa"`

注意`hh`表示 12 小时制，而不是`HH`24 小时制。

格式化字符的*数量*很重要，因为它们决定了所解释的字符串是长格式还是短格式（例如*Wed* vs *Wednesday*）

例如来自[文档](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)：

> 月份：如果模式字母的个数为3个或更多，则将月份解释为文本；否则，它被解释为一个数字。

# oracle - Oracle 多列数据透视和排序

> ID：14731476
> 
> 赞同：1
> 
> 时间：2013-02-06T14:28:54.100
> 
> 标签：oracle, plsql, oracle11g

我正在写一份报告（为了简单起见，用户端）我想使用 oracle 查询将一些数据聚合在一起，最终将导入到 excel 中，但也可以自动运行到打印机，所以处理需要在查询本身中完成。

我正在使用 oracle，版本 10.2.0.5.0（从 v$instance 中选择版本）。

好的，所以我正在使用这个查询；

```
SELECT substr(arg_string,1,4) node,
               substr(numtodsinterval(end_time-start_time,'DAY'), 12, 8) dur,
               row_number() over (order by substr(arg_string,1,4),
                                           start_time) rn
          FROM pro.program_status
          where  prog_name like ('%v8x-6%')
      and    start_time > sysdate - 10; 
```

它返回一个类似于以下的数据集；

```
NODE DUR      RN
---- -------- ----------
s002 00:25:40 1
s002 00:27:21 2
s002 00:03:20 3
s002 00:27:44 4
...
s004 00:21:29 22
s004 00:22:19 23
s004 00:05:13 24
s004 00:22:47 25
...
s005 00:03:13 42
s005 00:00:46 43
s005 00:02:01 44
s005 00:00:45 45
...
s152 00:01:13 1840 
```

我想要的输出如下；

```
NODE DUR1     DUR2     DUR3
---- -------- -------- ----------
s002 00:25:40 00:27:21 00:03:20
s004 00:21:29 00:22:19 00:05:13
s005 00:03:13 00:00:46 00:02:01
and so on 
```

我尝试了以下查询；

```
SELECT node,
       max( CASE WHEN rn = 1 THEN dur ELSE NULL END ) dur1,
       max( CASE WHEN rn = 2 THEN dur ELSE NULL END ) dur2,
       max( CASE WHEN rn = 3 THEN dur ELSE NULL END ) dur3
  FROM (SELECT substr(arg_string,1,4) node,
               substr(numtodsinterval(end_time-start_time,'DAY'), 12, 8) dur,
               row_number() over (order by substr(arg_string,1,4),
                                           start_time) rn
          FROM pro.program_status
          where  prog_name like ('%v8x-6%')
          and    start_time > sysdate - 10)
group by node
/ 
```

但是，这会返回以下结果，因为只有 's002' 被标记为 1,2 和 3

```
NODE DUR1     DUR2     DUR3     
---- -------- -------- -------- 
s002 00:25:40 00:27:21 00:03:20 
s004
s005
s009
and so on 
```

我确定我遗漏了一些明显的东西，但是在搜索了这个网站和许多其他网站之后，我似乎无法让它正常工作。

更详细一点，我不知道每个节点会出现多少次或每天会有多少个节点。

提前致谢。汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:35:23.600

尝试：

```
SELECT node,
       max( CASE WHEN rn = 1 THEN dur ELSE NULL END ) dur1,
       max( CASE WHEN rn = 2 THEN dur ELSE NULL END ) dur2,
       max( CASE WHEN rn = 3 THEN dur ELSE NULL END ) dur3
FROM (SELECT substr(arg_string,1,4) node,
             substr(numtodsinterval(end_time-start_time,'DAY'), 12, 8) dur,
             row_number() over (partition by substr(arg_string,1,4)
                                order by substr(arg_string,1,4), start_time) rn
      FROM pro.program_status
      where  prog_name like ('%v8x-6%')
        and  start_time > sysdate - 10)
group by node 
```

# parallel-processing - HPC 上的 MPI 应用程序不在节点之间进行通信

> ID：14731480
> 
> 赞同：0
> 
> 时间：2013-02-06T14:29:11.923
> 
> 标签：parallel-processing, windows-server-2008, mpi, hpc

我正在尝试在 Windows server 2008 上运行的 HPC 上进行一些并行编程。我正在尝试使用 MPI 和特别是[MPI.NET](http://www.osl.iu.edu/research/mpi.net/documentation/index.php)在 C# 中实现 MPI 协议。现在我正在按照教程来理解这个库。

我正在尝试运行 SDK 提供的程序 pingpong.exe。如果进程在同一个节点上，它在 HPC 上可以正常工作（因此它与线程系统具有相同的实用程序）只要它在多个节点上，它就不起作用。

我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:42:35.273

好的，我已经能够理解为什么它不起作用：防火墙阻止了节点之间的消息。[源](http://social.microsoft.com/Forums/is/windowshpcmpi/thread/32a7141a-c82b-49c5-a992-d710b9bbbd7f)可以更改防火墙，使其不会阻止集群内的任何内容。

希望它可以帮助下一个人。

谢谢马克和钢铁侠。

# php - HTML 和 PHP 不工作

> ID：14731488
> 
> 赞同：0
> 
> 时间：2013-02-06T14:29:35.320
> 
> 标签：php, html, contact-form

大家好，我正在尝试让我的联系人页面正常工作，我已经输入了所有日期，但是当我点击提交时，它只会在下一页显示 php 代码。我究竟做错了什么。

**HTML 代码**：

```
 <form method="post" name="contact" action="php\html_form_send.php">

                <label for="name">Name:</label> <input type="text" id="name" name="name" class="required input_field" />
                <div class="cleaner h10"></div>

                <label for="email">Email:</label> <input type="text" id="email" name="email" class="validate-email required input_field" />
                <div class="cleaner h10"></div>

                <label for="telephone">Telephone:</label> <input type="number" name="telephone" id="telephone" class="input_field" />

                <div class="cleaner h10"></div>

                <label for="subject">Subject:</label> <input type="text" name="subject" id="subject" class="input_field" />

                <div class="cleaner h10"></div>

                <label for="text">Message:</label> <textarea id="text" name="text" rows="0" cols="0" class="required"></textarea>
                <div class="cleaner h10"></div>

                        <input type="submit" value="Send" id="submit" name="Submit" class="submit_btn float_l" />
                        <input type="reset" value="Reset" id="reset" name="reset" class="submit_btn float_r" />

                </form> 
```

**PHP代码：**

```
<body>
<?php
if(isset($_POST['email'])) {

    // CHANGE THE TWO LINES BELOW
    $email_to = "info@*********.com";

    $email_subject = "website html form submissions";

    function died($error) {
        // your error code can go here
        echo "We are very sorry, but there were error(s) found with the form you submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['name']) ||
        !isset($_POST['email']) ||
        !isset($_POST['telephone']) ||
        !isset($_POST['subject']) ||
        !isset($_POST['text'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');       
    }

    $name = $_POST['name']; // required
    $subject = $_POST['subject']; // required
    $email_from = $_POST['email']; // required
    $telephone = $_POST['telephone']; // not required
    $text = $_POST['text']; // required

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$name)) {
    $error_message .= 'The Name you entered does not appear to be valid.<br />';
  }
  if(!preg_match($string_exp,$subject)) {
    $error_message .= 'The subject you entered does not appear to be valid.<br />';
  }
  if(strlen($text) < 2) {
    $error_message .= 'The text you entered do not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "First Name: ".clean_string($name)."\n";
    $email_message .= "Last Name: ".clean_string($subject)."\n";
    $email_message .= "Email: ".clean_string($email_from)."\n";
    $email_message .= "Telephone: ".clean_string($telephone)."\n";
    $email_message .= "text: ".clean_string($text)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  
?>

<!-- place your own success html below -->

Thank you for contacting us. We will be in touch with you very soon.

<?php
}
die();
?>

</body> 
```

**错误**

```
"; echo $error."

    "; echo "Please go back and fix these errors.

    "; die(); } // validation expected data exists if(!isset($_POST['name']) || !isset($_POST['email']) || !isset($_POST['telephone']) || !isset($_POST['subject']) || !isset($_POST['text'])) { died('We are sorry, but there appears to be a problem with the form you submitted.'); } $name = $_POST['name']; // required $subject = $_POST['subject']; // required $email_from = $_POST['email']; // required $telephone = $_POST['telephone']; // not required $text = $_POST['text']; // required $error_message = ""; $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/'; if(!preg_match($email_exp,$email_from)) { $error_message .= 'The Email Address you entered does not appear to be valid.
    '; } $string_exp = "/^[A-Za-z .'-]+$/"; if(!preg_match($string_exp,$name)) { $error_message .= 'The Name you entered does not appear to be valid.
    '; } if(!preg_match($string_exp,$subject)) { $error_message .= 'The subject you entered does not appear to be valid.
    '; } if(strlen($text) < 2) { $error_message .= 'The text you entered do not appear to be valid.
    '; } if(strlen($error_message) > 0) { died($error_message); } $email_message = "Form details below.\n\n"; function clean_string($string) { $bad = array("content-type","bcc:","to:","cc:","href"); return str_replace($bad,"",$string); } $email_message .= "First Name: ".clean_string($name)."\n"; $email_message .= "Last Name: ".clean_string($subject)."\n"; $email_message .= "Email: ".clean_string($email_from)."\n"; $email_message .= "Telephone: ".clean_string($telephone)."\n"; $email_message .= "text: ".clean_string($text)."\n"; // create email headers $headers = 'From: '.$email_from."\r\n". 'Reply-To: '.$email_from."\r\n" . 'X-Mailer: PHP/' . phpversion(); @mail($email_to, $email_subject, $email_message, $headers); ?> Thank you for contacting us. We will be in touch with you very soon. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:34:20.267

PHP 代码没有被编译。它已作为普通文件提供。检查您的 PHP 安装。

# javascript - 使用 JCrop 的图形故障

> ID：14731491
> 
> 赞同：1
> 
> 时间：2013-02-06T14:29:41.410
> 
> 标签：javascript, html, jcrop

我在实施 Jcrop 时遇到了严重的麻烦。我将展示有关 Jcrop 实现的代码：

```
$("#crop-mini").Jcrop({
        onChange : updatePositions,
        onSelect : updatePositions,
        boxWidth : 500,
        boxHeight : 400,
        keySupport : false,
        setSelect : [0, 0, 999999, 999999],
        minSize : [10, 10]
}); 
```

其中#crop-mini 是`<img>`包含图像的标签。`updatePositions`只是一个功能......更新选择位置。很简单：

```
function updatePositions(coords)
{
    $(".x").val(coords.x);
    $(".y").val(coords.y);
    $(".w").val(coords.w);
    $(".h").val(coords.h);
}; 
```

我上传了一张图片，将它的 url 写入`<img>`标签，启动了一个 fancybox 并调用 JCrop。但是，当我调整选择框的大小时，会出现以下故障：

![在此处输入图像描述](../Images/1fdb9625585fb6b687b3cf1a79ecefc3.png)

看起来所选内容显示相同的图像从位置`coords.y`（`coords`是当前选择位置）变形到`coords.h+coords.y`，从变形`0`到`coords.w`。如果我把选择放在左上角，你会看到整个图像。

顺便说一句，裁剪按预期工作，并且正在传递真实坐标，所以我碰巧认为**问题出在演示文稿中，而不是处理**中。我做错什么了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:57:12.760

当您`max-width`在 css 中设置时会发生这种情况：

```
img {
    max-width: 100%
} 
```

只需添加以下规则即可修复它：

```
.image-version img {
    max-width: none;
} 
```

用 id`.image-version`包装的元素的 css 类在哪里。`<img>``#crop-mini`

# jquery - wordpress jquery 平滑滚动功能

> ID：14731493
> 
> 赞同：1
> 
> 时间：2013-02-06T14:29:43.713
> 
> 标签：jquery, wordpress, scroll

我最近将这个很棒的插件（[http://wordpress.org/extend/plugins/jquery-smooth-scroll/](http://wordpress.org/extend/plugins/jquery-smooth-scroll/)）添加到我的网站（[http://chewonbamboo.com](http://chewonbamboo.com)）以使内部链接能够很好地滚动（即[http:// /chewonbamboo.com/brand-identity](http://chewonbamboo.com/brand-identity)）但现在当我点击箭头时主页上的滑块功能不起作用。有没有办法让这两个功能相互配合？

# javascript - 无法使用 jquery/javascript 在数据表中搜索文本

> ID：14731494
> 
> 赞同：-1
> 
> 时间：2013-02-06T14:29:42.933
> 
> 标签：javascript, jquery, datatables

我有一个文本框。onkeyup() 事件，我需要在 dataTable 的每一列中搜索并显示与键入的关键字匹配的所有行。

我的jquery函数如下：

```
var myTable= $('#tbl').dataTable();

$("#txtsearch").keyup( function () {

 myTable.fnFilter( this.value, $("#txtsearch").index(this) );     

      }); 
```

但这对我不起作用。请任何人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:03:26.650

var myTable= $(#tbl").dataTable();

$("#txtsearch").keyup(function(){

```
myTable.fnFilter($(this).val()); 
```

});

# cassandra - Cassandra - 列族存在，但通过描述或 OpsCenter 不可见

> ID：14731498
> 
> 赞同：3
> 
> 时间：2013-02-06T14:29:57.983
> 
> 标签：cassandra, cql

我目前正在为即将到来的项目评估 Cassandra，并试图了解基础知识。

我有一个问题，当通过 CQL Shell 创建列族时 - 列族被创建为可用，但是当我使用 CLI 工具发出 DESCRIBE 命令或通过 DataStax OpsCenter 查看集群时，它不会出现。

我已经创建了这样的键空间：

```
CREATE KEYSPACE Testing
WITH replication = {'class': 'SimpleStrategy', 'replication_factor' : 1}; 
```

并将列族定义为：

```
CREATE TABLE SampleTable(
Id int PRIMARY KEY,
Name text,
OtherValue int
); 
```

我可以成功地从 SampleTable 插入和选择数据，但是它没有通过 Describe 命令或 OpsCenter 显示。

我可以使用 CLI 命令行或 FluentCassandra 中的 API 创建可见的列族，但我想使用 CQL 方法。

这是 Cassandra 的第一天，所以我确定我缺少一些简单的东西。任何指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T17:16:56.743

使用 thrift API 时不会显示使用 CQL3 创建的列族。有关详细信息，请参阅以下问题：

[https://issues.apache.org/jira/browse/CASSANDRA-4377](https://issues.apache.org/jira/browse/CASSANDRA-4377) [https://issues.apache.org/jira/browse/CASSANDRA-4924](https://issues.apache.org/jira/browse/CASSANDRA-4924)

# ffmpeg - FFmpeg 错误 - “必须指定至少一个输出文件”

> ID：14731501
> 
> 赞同：9
> 
> 时间：2013-02-06T14:30:09.000
> 
> 标签：ffmpeg

```
ffmpeg -ss 0 -i rawvid.flv -t 33 -vf scale=640x480 -b:21504 test.mpg 
```

运行时，这将返回“必须指定至少一个输出文件”，我错过了什么？

PS：FFmpeg 工作正常，如果我删除上面语句中的所有标志，它就可以工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T14:48:46.793

正确的命令是：

```
ffmpeg -ss 0 -i in.mp4 -filter:v scale=640:480 -b:v 21504 -t 5 test.mpg 
```

*   该`-t`选项应位于输出说明符之前。

*   `scale`输出格式是（而`w:h`不是`wxh`）

*   `-b:21504`在语法上是错误的，你错过了`:v`.

# javascript - event.cancelBubble 不适用于 .live

> ID：14731509
> 
> 赞同：1
> 
> 时间：2013-02-06T14:30:26.130
> 
> 标签：javascript, jquery

我想在所有`record_row`div onclick 的基础上执行一项操作。我正在这样做`$('.record_row').live("click",function(){})`。在 record_row div 里面我放`option_icon`了我放了一张图片的 div。我已经阻止了记录 onclick by `onclick="event.cancelBubble = true;"`。它可以正常使用`$('.option_icon').click(function(){})`但不能使用`$('.option_icon').live("click",function(){})`功能。

有什么建议么？提前致谢。

**html:-**

```
<div id="container">
    <ul>
        <li><div id="data_item_1" class="record_row">
                User record displayning here
                <div class="option_icon" onclick="event.cancelBubble = true;">
                    -----
                </div>  
            </div>  
        </li>   
        <li>
            <div id="data_item_2" class="record_row">
                 .........
                <div class="option_icon" onclick="event.cancelBubble = true;">
                    -----
                </div>  

            </div>  
        </li>
    </ul>
</div> 
```

**jQuery：-**

```
$('.record_row').live("click",function(){
    -----------
    -----------
    // working fine
});   

$('.option_icon').live("click",function(e){
       e.stopPropagation();
    -----------
    -----------
    // Not working
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:54:11.193

对于您的第一个处理程序，使用 jQuery 事件对象的[`target`](http://api.jquery.com/event.target)属性检查事件的来源。由于它也可能起源于 的子级`div.option_icon`，因此您可以使用该[`closest`](http://api.jquery.com/closest)方法来确定它是否位于其中的某个位置`<div>`。

```
$('#container').on('click', '.record_row', function (e) {

    // if event bubbled up from .option_icon, ignore
    if ( $(e.target).closest('.option_icon').length > 0 ) return;

    //your code here...

}); 
```

您的第二个处理程序将只是

```
$('#container').on('click', '.option_icon', function () {
    //your code here...    
}); 
```

此外，从 HTML 标记中删除 onclick 事件处理程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:35:43.557

我会尝试像这样处理点击事件：

```
$(document).on('click', '.option_icon', function(ev){
    ev.stopPropagation();
    ev.cancelBubble = true;

    -----------
    -----------
    // Not working
}); 
```

您可以[在此处找到有关此的更多信息](http://www.quirksmode.org/js/events_order.html)

# android - 通过activity2的textview从activity 1的textview传递数据

> ID：14731515
> 
> 赞同：0
> 
> 时间：2013-02-06T14:30:47.450
> 
> 标签：android

如何将 textview 的值从一个活动传递到另一个活动？

我的游戏得分显示在 textview 上，并且在它增加后它将打算进行下一个活动。但是第一个活动的分数值没有显示在第二个活动的文本视图上。

这是我第一次活动的代码

```
final TextView score2 = (TextView) findViewById(R.id.tvscore2);
    Button page1 = (Button) findViewById(R.id.btnDog);
    page1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            EditText etDog1 = (EditText) findViewById(R.id.etDog);
            String Dog = etDog1.getText().toString();

            if (Dog.equalsIgnoreCase("dog")) {
                global.score += 10;

                score2.setText(String.valueOf(global.score));
                Toast.makeText(getApplicationContext(), "Correct",
                        Toast.LENGTH_SHORT).show();
                Intent myIntent = new Intent(view.getContext(),
                        sound1_3pig.class);

                startActivityForResult(myIntent, 0);

            } else if (global.score <= 0) {
                global.score += 0;
                score2.setText(String.valueOf(global.score));
                Toast.makeText(getApplicationContext(), "Wrong",
                        Toast.LENGTH_SHORT).show();
            } else {

                global.score -= 5;
                score2.setText(String.valueOf(global.score));
                Toast.makeText(getApplicationContext(), "Wrong",
                        Toast.LENGTH_SHORT).show();
            }
        }

    });

} 
```

我想将分数活动 1 的结果显示到第二个活动的 textview

这是我的第二个活动

```
final TextView score1 = (TextView) findViewById(R.id.tvscore1);
    Button page1 = (Button) findViewById(R.id.btnCat);
    page1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            EditText etCat = (EditText) findViewById(R.id.etCat);
            String Cat = etCat.getText().toString();
            if (Cat.equalsIgnoreCase("cat")) {

                global.score += 10;
                score2.setText(String.valueOf(global.score));

                Toast.makeText(getApplicationContext(), "Correct",
                        Toast.LENGTH_SHORT).show();

                Intent myIntent = new Intent(view.getContext(),
                        sound1_3pig.class);
                startActivityForResult(myIntent, 0);
                finish();

            } else if (global.score <= 0) {
                global.score += 0;
                score2.setText(String.valueOf(global.score));
                Toast.makeText(getApplicationContext(), "Wrong",
                        Toast.LENGTH_SHORT).show();

            } else {
                global.score -= 5;
                score2.setText(String.valueOf(global.score));
                Toast.makeText(getApplicationContext(), "Wrong",
                        Toast.LENGTH_SHORT).show();
            }

        }
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:38:21.933

当您的第二个活动膨胀新布局时，您需要将您的值从第一个活动显式传递给第二个活动，并使用此值初始化它的 TextView。

活动一：

```
void goToSecondActivity() {
    String value = mTextView.getText();
    Intent in = new Intent(getActivity(), YourSecondClass.class);
    in.putExtra("score", value);
    startActivity(in);
} 
```

活动二：

```
void onCreate(Bundle bundle) {
    ...
    String score = getIntent().getStringExtra("score", "No score.");
    mTextView.setText(score);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:35:45.213

使用这样的东西。

活动一：

```
Intent i = new Intent(getActivity(), Activity2.class);
i.putExtra("Score", 20);

startActivity(i); 
```

活动二：

```
Intent i = getIntent();
int score = i.getIntExtra("Score", 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:01:27.287

我的回答也与其他人的建议相似。试试这个，我在你的代码中添加了一些额外的语句（我假设你想将变量的值发送`score`到下一个活动，你可以用你想发送的变量替换它）：

第一项活动：

```
score2.setText(String.valueOf(score));
Toast.makeText(getApplicationContext(), "Correct",
             Toast.LENGTH_SHORT).show();
Intent myIntent = new Intent(this,
                    sound1_3pig.class);
myIntent.putExtra("Score", global.score);
startActivityForResult(myIntent, 0); 
```

第二个活动：

把它放在第二个活动的 onCreate() 方法中：

```
Intent intent = getIntent();
int score = intent.getIntExtra("Score",0); 
```

所以现在你将在第二个活动中从上一个活动中获得分数的值。然后您可以通过调用在要显示它的 textView 中设置它

```
textView.setText(score); 
```

# c# - XmlTextWriter 将对象序列化为 XML 元素

> ID：14731516
> 
> 赞同：0
> 
> 时间：2013-02-06T14:30:52.677
> 
> 标签：c#, xml, serialization, deserialization, xmltextwriter

我想对现有 XML 文件中的一个分支执行对象序列化。阅读时使用：

```
 RiskConfiguration AnObject;

        XmlSerializer Xml_Serializer = new XmlSerializer(typeof(RiskConfiguration));
        XmlTextReader XmlReader = new XmlTextReader(@"d:\Projects\RiskService\WCFRiskService\Web.config");
        XmlReader.ReadToDescendant("RiskConfiguration");
        try
        {
            AnObject = (RiskConfiguration)Xml_Serializer.Deserialize(XmlReader);
            AnObject.Databases.Database[0].name = "NewName";
        }
        finally
        {
            XmlReader.Close();
        } 
```

有可能，我不知道如何再次编辑对象执行它可以保存文件而不擦除 XML 文件中的其他现有元素。谁能帮我？

我找到了一种显示所需项目序列化的方法。我现在如何去而不是粘贴到 XML 中的原始元素？

```
 StringWriter wr = new StringWriter();
        XmlWriterSettings settings = new XmlWriterSettings();
        settings.Indent = true;
        settings.OmitXmlDeclaration = true;
        settings.Encoding = System.Text.Encoding.Default;

        using (XmlWriter writer = XmlWriter.Create(wr, settings))
        {
            XmlSerializerNamespaces emptyNamespace = new XmlSerializerNamespaces();
            emptyNamespace.Add(String.Empty, String.Empty);
            Xml_Serializer.Serialize(writer, AnObject, emptyNamespace);
            MessageBox.Show(wr.ToString());
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:57:48.423

首先，你应该停止使用`new XmlTextReader()`. 自 .NET 2.0 以来，这已被弃用。改为使用`XmlReader.Create()`。

其次，XML 不是随机访问媒体。您不能前后移动，写入文件的中间。这是一个基于文本的文件。

如果您需要“修改”该文件，则需要编写该文件的新版本。您可以从原始文件中读取，直到需要反序列化，将节点写入文件的新版本。然后，您可以从原始文件反序列化、修改对象并序列化到新版本。然后，您可以继续从原始版本读取并将节点写入新版本。

# google-app-engine - 令牌错误？当我尝试列出谷歌驱动器阅读器的所有文件、文件夹、子文件和文件夹时

> ID：14731517
> 
> 赞同：0
> 
> 时间：2013-02-06T14:30:55.307
> 
> 标签：google-app-engine, python-2.7, google-drive-api

我使用此代码列出了使用 GAE SDK 和 google-api-python-client 的 Google Drive 阅读器的所有文件和文件夹。查询中的 reader 是一个应用引擎服务帐户：

```
page_token = None
param = {'q' : '"example@appspot.gserviceaccount.com" in readers'}
while True:
    try:
        page = service.files().list(**param).execute()
        for each in page.get('items', []):
            logging.info('File Id: %s' % each['title'])
        page_token = page.get('nextPageToken')
        if page_token:
            param['pageToken'] = page_token
            logging.info(param)
        else :
            break
    except errors.HttpError, error:
        logging.error('An error occurred: %s' %(error))
        break 
```

两页的项目总数约为 160 项。但是 while 循环永远不会停止。在“最后一个”页面项目之后，我不断收到 nextPageTokens，但下一页的项目列表是空的。

GAE SDK 日志可以在这里找到：[https ://docs.google.com/file/d/0B9-mEcXX8BPaQUJZZmVkWGxiZFk/edit?usp=sharing](https://docs.google.com/file/d/0B9-mEcXX8BPaQUJZZmVkWGxiZFk/edit?usp=sharing)

**更新，循环停止但......**

我为页面和项目添加了一些计数器。在包含 165 个文件夹和文件项的 135 页（前两页收到 165 个）之后，我收到了 None nextPageToken。所以它终于停止了。163 列表请求（页面）不报告任何项目。

读者可以访问根目录下的单个文件夹以及该文件夹下的所有子文件夹和文件。那么发生了什么。这是一个错误吗？

# ios - iOS：UIPanGesture 和框架/边界问题

> ID：14731519
> 
> 赞同：0
> 
> 时间：2013-02-06T14:30:57.673
> 
> 标签：ios, drag-and-drop, uipangesturerecognizer

我创建了一个相对简单的应用程序，它允许用户从`UIView`屏幕底部的“托盘”中拖动图像视图，当视图被删除时，它会将自身添加到“目标”的子视图中`UIView`。

我的问题是，当我将 imageview 放到目标视图中时，框架完全错误，并且 imageview 跳转（看似随机）到目标视图中的另一个位置。

我为此撕毁了我的头发，并且有一个巨大的脑屁。有没有办法在超级视图中获取拖动视图的坐标，然后将其转换为目标视图的坐标？

如您所见，我将图标从“托盘”视图中取出，并在拖动开始时进入主视图。当它结束时，我只需将图标添加到目标视图中。

```
if (gesture.state == UIGestureRecognizerStateBegan){
        if (icon.superview == viewTray) {
            [self closeTray:nil];
            [self.view addSubview:icon];
        }
    }

if (gesture.state == UIGestureRecognizerStateEnded) {
    [viewTarget addSubview:icon];
} 
```

xib基础知识的图像：

![http://i.imgur.com/obRKMaT.png](../Images/31c01b014de92856f9b2b2807dc6a083.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:40:30.730

使用手势识别器通过以下方式确定手指在 viewTarget 框架中的触摸位置：

```
CGPoint p = [gesture locationInView:viewTarget]; 
```

然后将图标的中心设置为该点，您就完成了：

```
icon.center = p;
[icon removeFromSuperView];
[viewTarget addSubview:icon]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:37:35.143

问题是框​​架在其 superView 的范围内。所以当你把它放到一个新的 superView 中时，它就不一样了。你需要转换它。

此代码会将其从 superView 坐标系转换为 targetView 坐标系。您可能应该在之后立即执行此操作`[viewTarget addSubview:icon];`

```
[viewTarget convertRect:icon.frame fromView:icon.superView]; 
```

# java - 如何解决“从内部类中访问变量 'args'”Java 错误？

> ID：14731522
> 
> 赞同：0
> 
> 时间：2013-02-06T14:31:07.097
> 
> 标签：java, syntax-error

下面引用的 Java 类使用三个数值。我想从命令行调用这个类，每次通过 args 变量传递不同的值。但是当我这样做时，我得到一个“从内部类中访问变量 'args'”Java 错误。实现我的目标最有效的方法是什么（如果有的话）？

```
class UserBaseRecommenderEvaluation {

    private UserBaseRecommenderEvaluation() {}

    public static void main(String[] args) throws Exception {

        DataModel model = new FileDataModel(new File("/home/eualin/Downloads/ml-100k/final.data"));

        RecommenderBuilder builder = new RecommenderBuilder() {
            @Override
            public Recommender buildRecommender(DataModel model) throws TasteException {
                UserSimilarity similarity = new LogLikelihoodSimilarity(model);
                UserNeighborhood neighborhood = new NearestNUserNeighborhood(2, similarity, model);
                return new GenericUserBasedRecommender(model, neighborhood, similarity);
            }
        };

        RecommenderIRStatsEvaluator evaluator = new GenericRecommenderIRStatsEvaluator();
        IRStatistics stats = evaluator.evaluate(builder,
                null,
                model,
                null,
                1,
                GenericRecommenderIRStatsEvaluator.CHOOSE_THRESHOLD,
                1);        
    }     
} 
```

**更新：**作为进一步的步骤，我怎样才能使上述函数在为每个参数分配不同值的 for 循环中工作？在这种情况下，请记住，还需要处理错误处理，否则执行将意外终止，因为某些组合将不“合适”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:33:19.607

如果您只想访问参数中的值`args`，只需将其指定为`final`. 下面的示例将很好地编译和运行：

```
public class InnerClassExample {

  public static void main(final String[] args) {

    Runnable runnable = new Runnable() {

      @Override
      public void run() {        
        for (int i = 0; i < args.length; i++) {
          System.out.println(args[i]);
        }
      }
    };

    runnable.run();
  }
} 
```

这打印：

```
1
2
3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:35:34.450

您没有完成错误消息:)“需要声明为最终的”。

为了解决这个问题，您需要声明在您的内部类中访问的所有变量`final`。所以，因为`main`它会是：

```
public static void main(final String[] args) { ... } 
```

# java - 在 Java 中将字符串转换为 10 位整数

> ID：14731524
> 
> 赞同：0
> 
> 时间：2013-02-06T14:31:10.903
> 
> 标签：java, string, integer, digit

我有这个任务应该检查三角形是否是等腰、不等边、等边、直角。

我只需要使用小于或等于 2,147,483,647（或 2^31-1 换句话说）的整数。我必须使用 Linux 及其终端来输入值并获得结果。

当我输入 1 到 9 位整数时，输出没有问题，但是如果我想用 2^31-1 等 10 位整数进行测试，那么我得到的结果是不合适的.. .

这是我的代码片段：

```
public static void main (String[] args)
{
    int a,b,c;
    a = Integer.parseInt(args[0]);
    b = Integer.parseInt(args[1]);
    c = Integer.parseInt(args[2]);
} 
```

谁能建议我如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:47:20.367

我不知道..但我尝试使用 BASH + JAVA 运行您的代码，但我没有看到输出有任何问题。

这是屏幕截图。

![在此处输入图像描述](../Images/b4af556260df4b9bc54d8f9e3b1e5d5c.png)

* * *

好的，现在解决真正的问题（这必须在情感层面上体现），即某个三角形实际上是等边三角形、不等边三角形、等腰三角形还是直角三角形。

解决问题，写下问题涉及的功能逻辑

1.  等边三角形：- 三边相等的三角形
2.  等腰三角形：- 三边中的两条相等的三角形
3.  不等边三角形：- 没有边相等的三角形

现在想想约束

1.  你只能使用整数
2.  作为参数发送的输入

现在开始编写程序，因为你已经完成了分析

```
public class BufferProblem{
   public static void main(String[] args){ 
     int a, b, c;
     a = Integer.parseInt(args[0]);
     b = Integer.parseInt(args[1]);
     c = Integer.parseInt(args[2]);

     if ((a == b) && (b == c)) { System.out.println("It is an equilateral triangle"); }
     else if (a == b || b == c || c == a) { System.out.println("It is an isosceles triangle"); }
     else if ((a != b) && (b != c) && (c != a)) { System.out.println("It is a scalene triangle");}

   }
} 
```

# python - 适用于 Linux 和 OSX 的 GUI 构建器 Python

> ID：14731528
> 
> 赞同：0
> 
> 时间：2013-02-06T14:31:20.510
> 
> 标签：python

我只想要最容易使用的东西来构建一个相对简单的 GUI，该 GUI 可以轻松移植到 OSX 和 Ubuntu Linux。

最重要的是，我只是想破解应用程序，而不是陷入制作超级精美的东西等等。

GLADE 出现了很多，但并不是最简单的，但是，如果有人建议我是开放的。

同样，主要标准是易用性和对 OSX 和 Linux 的可移植性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:49:29.960

您有很多选择：

PyQt 是一个：这是一个介绍：[http ://www.rkblog.rk.edu.pl/w/p/introduction-pyqt4/](http://www.rkblog.rk.edu.pl/w/p/introduction-pyqt4/)

PyGTK [http://pygtk.org/](http://pygtk.org/)听到了一些不错的评论，但还没有玩过。

wxPython 是另一个：[http ://wxpython.org/what.php](http://wxpython.org/what.php)

我会建议 wxPython，但它完全取决于你。

看看他们的文档，然后选择。

享受

# android - Android升级现有应用程序

> ID：14731529
> 
> 赞同：22
> 
> 时间：2013-02-06T14:31:19.407
> 
> 标签：android

我正在尝试通过更改清单文件中的以下内容来升级现有应用程序。
从改变

```
android:versionCode="1"
android:versionName="1.0" 
```

至

```
android:versionCode="2"
android:versionName="1.1" . 
```

我使用的是相同的密钥库，但是当我尝试使用 Google Play 开发者控制台发布应用程序时，我收到一条错误消息：

**“此配置无法发布，原因如下：所有可能收到版本 1 的设备都会收到版本 2。某些设备有资格运行多个 APK。在这种情况下，设备将收到更高版本的 APK代码。”**

如何升级我的应用程序。非常感谢您。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-06-03T11:41:10.017

我错误地切换到“高级”模式，它以某种方式将应用程序保存为草稿。似乎开发人员控制台不喜欢那样。

**删除应用程序，切换回“简单模式”并再次上传.apk。**

这对我有用。

高级模式用于上传和管理同一应用程序的多个 apk。简单模式用于上传单个 apk，因此在大多数情况下它应该是合适的。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-17T18:54:58.787

今晚我遇到了同样的问题。我所要做的就是转到`Archive`以前的版本，然后草稿消息消失了，`Publish`出现了一个指向新版本的按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-14T07:39:18.907

是的，我遇到了同样的问题，我这样做并解决了问题：-

只需从 prod 中停用以前的 apk，然后上传新的 apk 并发布即可。它对我有用，希望对你也有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-06T08:50:01.360

如果您看到上述消息，则无需删除新上传的 APK 并切换到“简单模式”以发布更新。措辞可能并不理想，但它告诉您有两个具有不同版本代码的*活动*APK，即使一个仍处于草稿状态，如果您打算为不同的设备提供不同的 APK，这是您不想要的. 这也显示在顶部的“生产”选项卡中，它将显示现有 APK 的版本代码以及草稿更新。

一般来说，如果您实际上为特定设备提供专用 APK，您应该只对多个活动 APK 感兴趣。不过，大多数应用程序只包含一个通用的 APK。所以假设是这种情况：

要激活您的更新（并因此发布更新的 APK）：

1.  单击当前发布的 APK 旁边的*停用。*
2.  将您的更新升级到*生产*（即先将其升级到*Beta*，然后再从那里升级到*生产*）。
3.  点击页面顶部的*发布 APK 。*

按照这些步骤，您会注意到“生产”选项卡中只保留了一个版本代码，并且错误消息消失了。完成最后一步后，您就可以随意切换回简单模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-23T06:59:53.047

重新加载页面有助于隐藏此消息。

当我不得不使用高级模式来激活单个 APK 时，我收到了这个错误。我尝试切换到简单模式以激活相同的 APK，但没有帮助。

# css - CSS：使用 Tumblr“宇航员”主题进行图像缩放

> ID：14731531
> 
> 赞同：0
> 
> 时间：2013-02-06T14:31:21.973
> 
> 标签：css, tumblr, image-scaling

我对 CSS 相当一无所知，并试图使用免费的 Tumblr 主题“宇航员”。

目前，我正在尝试弄清楚如何为博客的“脸”（采用三行样式）按比例缩放图像，同时在主要帖子本身中保持图像完整。我已经尝试弄清楚在哪里放置 width:300px （尽管这只是猜测每个“行”的最大宽度是多少）和 height:auto 标记在他们的块中，但它似乎没有工作. 这是文字帖子独有的，图片帖子可以正常工作。

[网站，供参考。](http://toku-hero-time.tumblr.com)

[和一个布局的pastebin。](http://pastebin.com/cc2s48CN)

感谢你给与我的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:59:50.470

`height: auto;`通过添加到您的 CSS中，再次尝试您在问题中提到的内容：

```
#container .box img {
    max-width: 100%;
    height: auto; /* add this! */
} 
```

如果图像较大并保持图像的正确比例，这应该将图像缩小到父元素的可用宽度。

# documentation - 如何在 Doxygen 中使用与安装选项交互的条件

> ID：14731538
> 
> 赞同：3
> 
> 时间：2013-02-06T14:31:43.803
> 
> 标签：documentation, doxygen

我在发布问题之前已经搜索了该网站，但找不到答案。

我的任务是为具有不同类型硬件安装选项的软件创建用户手册。更清楚地说，用户选择硬件 A、B 或 C 等的安装。然后会启用一些功能，而会禁用一些功能。

用户手册基本上是一个文本文件 (.txt)，其中还包括相关的 Doxygen 命令（addtogroup、defgroup、ref 等）。

我试图找出如何自动将一些信息放在用户手册上，例如硬件 A，如果安装选项 A 并排除硬件 B 的信息？

我搜索了 Doxygen 手册和各种论坛，包括这个，到目前为止，我想出了一个笨拙的想法，它不起作用。

```
*** This is my manual.txt file. The following is the relevant piece. ***

/*! \defgroup info1 Scripts
    \ingroup manual
    Several  scripts are provided to help the user perform sophisticated tasks. 

\if \$(OPTION_SETUP)=OPTION1
    <ul>
    <li> \ref option1_related_section 
    <li> \ref option1_related_example_text 
    </ul>
\endif

\if \$(OPTION_SETUP)=OPTION2
    <ul>
    <li> \ref option2_related_section
    <li> \ref option2_related_example_text
    </ul>
\endif
*/ 
```

这是行不通的。我不是开发人员，我知道我遗漏了一些东西。

我看到 \if 和 \cond 只能用于部分名称。但是我不知道如何根据安装选项使用条件来选择 manual.txt 上的文本（这是我们的用户手册，而不是开发人员）。

Doxygen 真的可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T17:25:01.720

\if 和 \cond 等仅使用在 ENABLED_SECTIONS 的 Doxyfile 中定义的变量（对于条件，您可以使用带有 &&、|| 和 ! 的简单表达式）。所以你不能在那里使用带有'='的表达式。在您的情况下，您可以制作 2 个 Doxyfile，一个用于选项 A，另一个用于选项 B，请注意，Doxyfile 可以通过 include 语句共享部分。在一个 Doxyfile 中，您将在 ENABLED_SECTIONS 和另一个 OPTION2 中定义 OPTION1，if 语句将读取 \if OPTION1 和另一个 \if OPTION2

# oracle - 低于 11g 的 Oracle 版本中的 Oracle "into" 子句

> ID：14731540
> 
> 赞同：0
> 
> 时间：2013-02-06T14:31:50.660
> 
> 标签：oracle, plsql

我有 pl/sql 匿名块，如下所示

```
declare
  v_count pls_integer := 0;
begin
  select count(1) from product_component_version
    into v_count
   where product like '%Enterprise%';
  if v_count = 0 then
    raise program_error;
  end if;
exception
  when program_error then
    raise_application_error (-20001, 'This is valid for Oracle Enterprise Edition         only!');
end; 
```

当我尝试执行上述操作时，出现以下错误

```
ORA-06550: line 5, column 5:
PL/SQL: ORA-00933: SQL command not properly ended 
```

这只不过是“进入 v_count”声明。

根据我的理解，语法是错误的，当我像下面那样更改该语句时，它工作正常。

```
select count(1) into v_count
  from product_component_version
 where product like '%Enterprise%'; 
```

我在“Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit”中对此进行了测试。

但是原始脚本在我们所有旧版本的产品中都可用。我想知道旧版 oracle 支持原始脚本中的语法吗？或者你能告诉我任何可以回答我困惑的信息吗？

谢谢，维杰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:43:15.407

使用测试块：

```
declare
    x dual.dummy%type;
begin
    select dummy from dual into x;
end;
/ 
```

在 Oracle 9iR2（Solaris 上的 9.2.0.8）、10gR2（Solaris 上的 10.2.0.5）和 11gR2（Linux 上的 11.2.0.3）中，我得到完全相同的错误：

```
 select dummy from dual into x;
                           *
ERROR at line 4:
ORA-06550: line 4, column 28:
PL/SQL: ORA-00933: SQL command not properly ended
ORA-06550: line 4, column 5:
PL/SQL: SQL Statement ignored 
```

尽管我没有 8i 或更早的数据库可供测试，但我不相信它曾经像您那样得到支持。

您说“原始脚本在我们所有旧版本的产品中都可用”，但它实际上是否曾经运行过，如果是这样，您能否确定它没有引发错误的确切版本？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T14:34:15.940

至少不是从 8i 开始： [http ://www.oracle.com/pls/tahiti/tahiti.tabbed?section=49135](http://www.oracle.com/pls/tahiti/tahiti.tabbed?section=49135)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:46:40.997

即使我不喜欢从双重选择虚拟到x；

试试这个：

```
declare
  v_count pls_integer := 0;
begin
  select count(1) into v_count from product_component_version

   where product like '%Enterprise%';
  if v_count = 0 then
    raise program_error;
  end if;
exception
  when program_error then
    raise_application_error (-20001, 'This is valid for Oracle Enterprise Edition         only!');
end; 
```

# node.js - 如何运行 CANVASENGINE 服务器和物理世界

> ID：14731544
> 
> 赞同：1
> 
> 时间：2013-02-06T14:31:56.847
> 
> 标签：node.js

你好。

我将框架**canvasengine**与**node.js**一起使用。我也在使用**box2d**框架（物理引擎）。

问题是我的**canvasengine**框架正在运行（所以它正在等待连接）。我想运行一个步进物理世界的无限循环（world.step（fps，iterations）），但node.js中似乎不存在线程。那么，我怎样才能做到这一点？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:41:06.587

最近的浏览器有一个名为 window.requestAnimationFrame 的函数。此功能用于在浏览器内制作流畅的动画。为了安全地实现该功能（您可以在任何地方运行它），请查看以下代码：

```
window.requestAnimationFrame = function() {
    return window.requestAnimationFrame    ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame    ||
        window.oRequestAnimationFrame      ||
        window.msRequestAnimationFrame     ||
        function(callback) {
            window.setTimeout(callback, 1000 / 60);
        };
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:00:51.690

```
setInterval(function(){world.step()},1000/60) 
```

应该以 60 fps 的速度踏上你的世界

# python - 格式化单选按钮表单的描述

> ID：14731549
> 
> 赞同：0
> 
> 时间：2013-02-06T14:32:31.057
> 
> 标签：python, python-2.7, flask, jinja2, flask-wtforms

我有一个从 sqlite3 数据库获得的元组列表。我试图以不同的方式获取数据库，但没有任何运气，这不是这个问题的人，但最终如果它有助于格式化我的单选按钮表单的描述，我会欣喜若狂。

我的清单如下：

```
images = [(1, u'True', u'file_Name.img', u'img', u'train', u'2013-02-0509:59:46.442660file.ext',
   u' file2.ext', u'ABC', u"[u'prod_one-prod_two']", u'name@email.com',
   u'nothing happens', u'2013-02-0509:59:46.442660', u"[u'ftp://link/file_Name.img', 
   u'ftp://link/file3.ext', u'ftp://link/file_Name.log']"),(2, u'True',u'file_Name.img', 
   u'img', u'train', u'2013-02-0509:59:46.442660file.ext', u' file2.ext', u'ABC', 
   u"[u'prod_one-prod_two']", u'name@email.com', u'nothing happens', 
   u'2013-02-0509:59:46.442660', u"[u'ftp://link/file_Name.img', 'ftp://link/file3.ext', 
   u'ftp://link/file_Name.log']")] 
```

我想做的是让选择的值成为每个元组的第一个元素

```
rows = [(str(x[0]), x) for x in images]
form.images.choices = rows 
```

然而，它看起来好像我只是用 unicode 字符和所有东西打印了那个乱七八糟的东西。

所以我试图在一个漂亮的表格中格式化它，以便很容易看到每个元组包含的内容

```
descriptionList = []
description = ''
for i in images:
    for j in i:
        description = description + '\t|' + str(j)
    descriptionList.append(description)

rows = [(str(x[0]), y) for x, y in zip(images, descriptionList)]
form.images.choices = rows 
```

但是，当我显示表单时，它在输出中没有制表符。

所以现在我正在考虑将 descriptionList 传递到模板中并将其显示在每个单选框旁边以充当表单中的描述。

```
return render_template('database.html', form=form, descriptions = descriptionList)
{% for subfield, desc in zip(form.images, descriptions) %}
        <tr>
            <td>{{ subfield }}</td>
            {# {{ subfield.label }} (this is a comment)#}
            desc <br>
        </tr>
    {% endfor %} 
```

但是我收到错误“UndefinedError：'zip'未定义”

没有它我得到：

```
{% for subfield, desc in (form.images, descriptions) %}
ValueError: too many values to unpack 
```

关于如何解决这个问题的任何建议都令人惊叹。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:37:29.120

让我从一个更简单的图像列表开始，作为一个更简洁的示例：

```
images = [
            (1, u'True', u'file_one.jpg', u'2013'),
            (2, u'False', u'file_two.jpg', u'2012'),
] 
```

然后，您将该元组列表细化为用于表单值的选择，本质上目标是为 wtforms 提供两个值元组的列表：

```
[
    (1,'file_one.jpg'), 
    (2,'file_two.jpg')
] 
```

但是你使用这个列表理解：

```
rows = [(str(x[0]), x) for x in images]
form.images.choices = rows 
```

这将产生：

```
[
    (1, (1, u'True', u'file_one.jpg', u'2013')), 
    (2, (2, u'False', u'file_two.jpg', u'2012'))
] 
```

这对 wtforms 没有用，它不知道如何处理元组中的元组。因此，您需要选择标签的值，或者更好地格式化该数据。

所以要么改变你的列表理解来选择一个更好的描述，这将使你达到目标：

```
rows = [(x[0],x[2]) for x in images] 
```

或者将所有数据连接在一起以提供更详细但可能对您有用的描述：

```
rows = [(x[0], "\t|".join([str(y) for y in x])) for x in images] 
```

这将导致：

```
[
    (1, '1\t|True\t|file_one.jpg\t|2013'), 
    (2, '2\t|False\t|file_two.jpg\t|2012')
] 
```

阅读更多关于[列表推导](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:16:26.437

尝试不在 html 模板中准备 zip(form.images, descriptions)，而是在 python 代码中，然后将其发送到模板：

```
 imgs_with_descriptions = zip(form.images, descriptionList) 
```

在模板中：

```
 {% for subfield, desc in imgs_with_descriptions %}
       <tr>
            <td>{{ subfield }}</td>
            {# {{ subfield.label }} (this is a comment)#}
            desc <br>
        </tr>
   {% endfor %} 
```

# c# - 使用托管内存进行注册 I/O RIOSend 函数调用

> ID：14731550
> 
> 赞同：5
> 
> 时间：2013-02-06T14:32:36.233
> 
> 标签：c#, sockets, c++-cli

我正在开发一个需要高速、低延迟/抖动通信的系统，它是用 C# 编写的。我们看到有一种新机制可以通过称为 Windows Registered IO 的套接字获得更好的性能[http://www.serverframework.com/asynchronousevents/2011/10/windows-8-registered-io-networking-extensions.html](http://www.serverframework.com/asynchronousevents/2011/10/windows-8-registered-io-networking-extensions.html)

...但目前 C# 不可用 ...而且根据 C++ 中的测试，它肯定似乎显示出更好的性能。

无论如何，我已经编写了托管 C++/CLI 部分来创建一个 DLL，这似乎与 C# 和改进的数字一起工作得很好。

但我想知道是否可以通过发送保存缓冲区副本......

目前 C++ 包装器看起来像这样：

```
bool ManagedSendData( array<byte> ^ buf, ULONG bufLen )
{
// must pin array memory until we're done with sending it, 
// at which point it'll be copied into the unmanaged memory

   pin_ptr<Byte> p = &buf[0];   // pinning one element of an array pins the whole array
   unsigned char * cp = p;

   return _RIObs->SendData( cp, bufLen );
} 
```

`_RIObs`实现注册 I/O 功能的非托管 C++ 对象在哪里。在该函数中，它将数据复制到启动时注册的缓冲区中`RIORegisterBuffer()`，然后调用`RIOSend()`以通知操作系统有数据要发送。

所以，我的问题是我可以让这个托管 C++ 对象的用户在启动时传入一个托管字节数组并调用`GCHandle::Alloc()`它来修复它并防止垃圾收集，`RIORegisterBuffer()`在托管应用程序中调用它，然后在使用它的同时使用它托管的 C++ 对象还活着吗？我将注册该托管缓冲区内存而不是非托管内存，当用户想要发送数据时，他们将填满他们已经引用的缓冲区，并通知我他们想要发送多少字节。这是一个阻塞发送并等待完成事件，因此在操作系统完成之前他们不会再次使用缓冲区，这与数据有关。

只要非托管应用程序可以互换使用托管或非托管内存，只要托管内存被锁定直到不再需要它，它似乎就可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-26T09:52:21.067

您可以直接从 C# 调用 RIO，而不是通过 C++/CLI；分配一个大于 85k 的大缓冲区，将其移动到 LoH 而不是干扰常规 GC，然后您可以使用类似于您建议的内容：

```
_underlyingBuffer = new byte[BufferLength];
var pinnedBuffer = GCHandle.Alloc(_underlyingBuffer, GCHandleType.Pinned);
var address = Marshal.UnsafeAddrOfPinnedArrayElement(_underlyingBuffer, 0);
var bufferId = _rio.RegisterBuffer(address, BufferLength); 
```

我已经将一个示例 http echo 服务器放在一起，使用[与注册 IO 的直接互操作](https://github.com/benaadams/benchmarks/tree/managed-rio-experimental/experimental/ManagedRIOHttpServer)并对其执行方式进行了[一些分析](http://www.ageofascent.com/azure-cloud-high-speed-networking/)（非常好）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T05:13:22.247

这听起来是个不错的策略。只需确保在创建 GCHandle 时使用 GCHandle::Pinned 以确保不会移动内存。

# playframework - Akka 远程 Actor 无法在 Play 之间进行通信！应用

> ID：14731553
> 
> 赞同：3
> 
> 时间：2013-02-06T14:32:40.577
> 
> 标签：playframework, playframework-2.0, akka, actor, playframework-2.1

我正在测试两个 Play 之间 Akka 远程演员的使用​​！v2.1-RC4 应用程序。

这是我来自 App1 的代码

```
override def onStart( app: Application ) {

val system = ActorSystem("App1System", ConfigFactory.load.getConfig("app1"))
val remoteActor = Akka.system().actorFor("akka://App2System@127.0.0.1:9003/user/app2Actor")
println(s"remote actor : ${remoteActor.path}")

val jobsActor = Akka.system.actorOf(Props(new Actor {
  def receive = {
    case "Job1" => { println("\nsending Job #1 at regular intervals to App2\n"); remoteActor ! "Job1" } 
    case "Job2" => { println("\n... sending doing job #2, 7 seconds after start, only once\n"); remoteActor ! "Job2" }
  }
}), "app1Actor")

// Repeat every 5 seconds, start 5 seconds after start
Akka.system.scheduler.schedule(
  5 seconds,
  5 seconds,
  jobsActor,
  "Job1"
)

// do only once, 7 seconds after start
Akka.system.scheduler.scheduleOnce(7 seconds, jobsActor, "Job2")
} 
```

这是App1的配置文件：

```
 akka {
  actor {
    provider = "akka.remote.RemoteActorRefProvider"
  }
  remote {
    transport = "akka.remote.netty.NettyRemoteTransport"
    netty {
      hostname = "127.0.0.1"
      port = 9002
    }
  }
}

app1 {
  include "common"
} 
```

来自 App2 的代码：

```
 override def onStart( app: Application ) {

    val system = ActorSystem("App2System", ConfigFactory.load.getConfig("app2"))
    val app2Actor = Akka.system.actorOf(Props(new Actor {
      def receive = {
        case "Job1" => println("App 2: doing Job #1 at regular intervals")
        case "Job2" => println("App 2: ... doing job #2, 7 seconds after start, only once")
        case _ => println("App 2 recieved other message")
      }
    }), "app2Actor")

    println(s"app 2 actor : ${app2Actor.path}")

  } 
```

来自 App2 的配置：

```
akka {
  actor {
    provider = "akka.remote.RemoteActorRefProvider"
  }

  remote {
  transport = "akka.remote.netty.NettyRemoteTransport"
    netty {
      hostname = "127.0.0.1"
      port = 9003
    }
  }
}

app2 {
  include "common"
} 
```

我已按照链接[Akka - Remoting中的说明进行操作](http://doc.akka.io/docs/akka/2.1.0/scala/remoting.html#remote-lookup-sample-scala)

我的 App1 控制台输出：

```
[info] application - Application started
[INFO] [02/06/2013 21:56:49.570] [New I/O  worker #1] [NettyRemoteTransport(akka://application@127.0.0.1:9002)] RemoteServerStarted@akka://application@127.0.0.1:9002
[info] play - Starting application default Akka system.
remote actor : akka://App2System@127.0.0.1:9003/user/app2Actor
[info] play - Application started (Dev)

sending Job #1 at regular intervals to App2

[INFO] [02/06/2013 21:56:54.918] [application-akka.actor.default-dispatcher-5] [NettyRemoteTransport(akka://application@127.0.0.1:9002)] RemoteClientStarted@akka://App2System@127.0.0.1:9003

... sending doing job #2, 7 seconds after start, only once 
sending Job #1 at regular intervalsto App2
sending Job #1 at regular intervalsto App2
sending Job #1 at regular intervalsto App2

[info] application - Application stopped
[info] play - Shutdown application default Akka system.
[INFO] [02/06/2013 21:57:10.619] [application-akka.actor.default-dispatcher-16] [NettyRemoteTransport(akka://application@127.0.0.1:9002)] RemoteClientShutdown@akka://App2System@127.0.0.1:9003
[INFO] [02/06/2013 21:57:10.635] [application-akka.actor.default-dispatcher-16] [NettyRemoteTransport(akka://application@127.0.0.1:9002)] RemoteServerShutdown@akka://application@127.0.0.1:9002 
```

我的 App2 控制台输出：

```
[info] play - Listening for HTTP on /0:0:0:0:0:0:0:0:9001

(Server started, use Ctrl+D to stop and go back to the console...)

[info] Compiling 6 Scala sources and 1 Java source to /home/rudy/development/projects/Actor/target/scala-2.10/classes...
[info] application - Actor Application started
[INFO] [02/06/2013 21:50:41.899] [New I/O  worker #1] [NettyRemoteTransport(akka://application@127.0.0.1:9003)] RemoteServerStarted@akka://application@127.0.0.1:9003
[info] play - Starting application default Akka system.
app 2 actor : akka://application/user/app2Actor
[info] play - Application started (Dev)
[INFO] [02/06/2013 21:56:54.961] [application-10] [NettyRemoteTransport(akka://application@127.0.0.1:9003)] RemoteClientStarted@akka://application@127.0.0.1:9002
[INFO] [02/06/2013 21:57:10.626] [application-7] [NettyRemoteTransport(akka://application@127.0.0.1:9003)] RemoteClientShutdown@akka://application@127.0.0.1:9002 
```

我可以看到 App1 能够在路径上找到 App2 Actor（没有 DeadLetter），但是我希望在 App2 控制台上看到的消息都没有出现。

不知道我哪里出错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T08:07:24.253

`Akka.system`是 Play 提供的演员系统，你把它和你自己的演员系统混在一起了。尝试仅使用您自己的参与者系统，即将代码更改为：

```
val remoteActor = system.actorFor
val jobsActor = system.actorOf
system.scheduler.schedule

val app2Actor = system.actorOf 
```

# c++ - OCaml 中的快速位数组

> ID：14731554
> 
> 赞同：6
> 
> 时间：2013-02-06T14:32:44.330
> 
> 标签：c++, performance, algorithm, ocaml, bitarray

另一个综合基准：[埃拉托色尼筛](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)

C++

```
#include <vector>
#include <cmath>

void find_primes(int n, std::vector<int>& out)
{
   std::vector<bool> is_prime(n + 1, true);
   int last = sqrt(n);
   for (int i = 2; i <= last; ++i)
   {
      if (is_prime[i])
      {
         for (int j = i * i; j <= n; j += i)
         {
            is_prime[j] = false;
         }
      }
   }

   for (unsigned i = 2; i < is_prime.size(); ++i)
   {
      if (is_prime[i])
      {
         out.push_back(i);
      }
   }
} 
```

OCaml（使用[Jane Street 的 Core](http://janestreet.github.com/)和[Res](https://bitbucket.org/mmottl/res)库）

```
open Core.Std
module Bits = Res.Bits
module Vect = Res.Array

let find_primes n =
  let is_prime = Bits.make (n + 1) true in
  let last = float n |! sqrt |! Float.iround_exn ~dir:`Zero in
  for i = 2 to last do
    if not (Bits.get is_prime i) then () else begin
      let j = ref (i * i) in
      while !j <= n; do
        Bits.set is_prime !j false;
        j := !j + i;
      done;
    end;
  done;
  let ar = Vect.empty () in
  for i = 2 to n do
    if Bits.get is_prime i then Vect.add_one ar i else ()
  done;
  ar 
```

我很惊讶 OCaml 版本（本机）比 C++ 慢 13 倍。我替换`Res.Bits`为`Core_extended.Bitarray`，但它变得慢了约 18 倍。为什么这么慢？OCaml 不为位操作提供快速操作吗？有没有其他快速实现位数组的方法？

需要明确的是：我来自 C++ 世界，并考虑将 OCaml 作为编写性能关键代码的可能替代方案。实际上，我对这样的结果有点害怕。

**编辑：**

分析结果

```
Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total           
 time   seconds   seconds    calls  ms/call  ms/call  name    
 50.81      1.26     1.26                             camlRes__pos_1113
  9.72      1.50     0.24                             camlRes__unsafe_get_1117
  6.68      1.66     0.17                             camlRes__unsafe_set_1122
  6.28      1.82     0.16                             camlNopres_impl__set_1054
  6.07      1.97     0.15                             camlNopres_impl__get_1051
  5.47      2.10     0.14 47786824     0.00     0.00  caml_apply3
  3.64      2.19     0.09 22106943     0.00     0.00  caml_apply2
  2.43      2.25     0.06   817003     0.00     0.00  caml_oldify_one
  2.02      2.30     0.05        1    50.00   265.14  camlPrimes__find_primes_64139
  1.21      2.33     0.03                             camlRes__unsafe_get_1041
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:23:18.227

在使用复杂的数据结构之前，您是否尝试过先使用简单的数据结构？

在我的机器上，以下代码仅比 C++ 版本慢 4 倍（请注意，我做了最小的更改以使用数组作为缓存，并使用列表来累积结果；您可以使用数组 get/set 语法糖）：

```
let find_primes n =
  let is_prime = Array.make (n + 1) true in
  let last = int_of_float (sqrt (float n)) in
  for i = 2 to last do
    if not (Array.get is_prime i) then () else begin
      let j = ref (i * i) in
      while !j <= n; do
        Array.set is_prime !j false;
        j := !j + i;
      done;
    end;
  done;
  let ar = ref [] in
  for i = 2 to n do
    if Array.get is_prime i then ar := i :: !ar else ()
  done;
  ar 
```

（慢 4 倍：计算 10_000_000 个第一个素数需要 4 秒，而代码中的 g++ -O1 或 -O2 需要 1 秒）

意识到您的位向量解决方案的效率可能来自经济的内存布局，我将代码更改为使用字符串而不是数组：

```
let find_primes n =
  let is_prime = String.make (n + 1) '0' in
  let last = int_of_float (sqrt (float n)) in
  for i = 2 to last do
    if not (String.get is_prime i = '0') then () else begin
      let j = ref (i * i) in
      while !j <= n; do
        String.set is_prime !j '1';
        j := !j + i;
      done;
    end;
  done;
  let ar = ref [] in
  for i = 2 to n do
    if String.get is_prime i = '0' then ar := i :: !ar else ()
  done;
  ar 
```

现在只需要 2 秒，这使得它比您的 C++ 解决方案慢 2 倍。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T18:14:20.027

像这样比较微基准并不经常有用，但基本结论可能是正确的。这是 OCaml 处于明显劣势的情况。C++ 可以访问或多或少的理想表示（机器整数向量）。OCaml 可以生成向量，但不能直接获取机器整数。所以 OCaml 必须使用 div 和 mod，而 C++ 可以使用 shift 和 mask。

我重现了这个测试（使用不同的位向量库），发现 OCaml 中相当多的时间用于构建结果，而不是位数组。因此，测试可能无法*准确*衡量您的想法。

**更新**

我尝试了一些快速测试，将 32 个布尔值打包成 63 位整数。它似乎确实让事情进展得更快，但只是一点点。这不是一个完美的测试，但它表明 Gasche 是正确的，非 2 的幂效应很小。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T23:44:45.020

杰弗里斯科菲尔德似乎是对的。这种可怕的性能下降是由于`div`和`mod`操作。

我原型化了小`Bitarray`模块

```
module Bitarray = struct
  type t = { len : int; buf : string }

  let create len x =
    let init = (if x = true then '\255' else '\000') in
    let buf = String.make (len / 8 + 1) init in
    { len = len; buf = buf }

  let get t i =
    let ch = int_of_char (t.buf.[i lsr 3]) in
    let mask = 1 lsl (i land 7) in
    (ch land mask) <> 0

  let set t i b =
    let index = i lsr 3 in
    let ch = int_of_char (t.buf.[index]) in
    let mask = 1 lsl (i land 7) in
    let new_ch = if b then (ch lor mask) else (ch land lnot mask) in
    t.buf.[index] <- char_of_int new_ch
end 
```

它使用字符串作为字节数组（每个字符 8 位）。最初我使用`x / 8`and`x mod 8`进行位提取。它比 C++ 代码慢 10 倍。然后我用`x lsr 3`and替换了它们`x land 7`。现在，它只比 C++ 慢 4 倍。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T17:58:05.623

请确保您安装的 Core 包含 .cmx 文件（.cmxa 还不够！），否则跨模块内联将不起作用。您的个人资料表明某些调用可能没有被内联，这可以解释效率的巨大损失。

遗憾的是，许多 OCaml 项目使用的 Oasis 打包工具目前存在一个错误，阻止它安装 .cmx 文件。Core 包也受到此问题的影响，可能与您使用的包管理器（Opam、Godi）无关。

# android - Eclipse Android 布局设计器 - 添加新的屏幕尺寸以进行预览

> ID：14731559
> 
> 赞同：8
> 
> 时间：2013-02-06T14:33:05.963
> 
> 标签：android, eclipse, android-layout, eclipse-adt

Eclipse ADT 中的图形布局设计器包括预览布局在各种屏幕尺寸/分辨率上的外观的能力。我的问题 - 是否可以在此列表中添加新的自定义屏幕尺寸，以适应新设备的推出？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-06T14:46:35.097

窗口 -> Android 虚拟设备管理器 -> 设备定义选项卡 -> 新设备

填写完所有属性后，它应该是布局编辑器中的可用选项。

**编辑：**如评论中所述，可能需要重新启动 Eclipse/ADT。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:55:15.960

是的，这是可能的，您需要按照以下步骤操作：

1.  您首先使用所需的规格定义新**设备**定义：Windows -> Android Virtual Device Manager -> Device Definitions Tab (New Device)；

2.  然后你会看到在你的布局编辑器中选择渲染布局的设备时，你将有 3 个类别：**通用**、**谷歌**和**用户**

3.  此外，您可以使用*手动预览*和*添加为缩略图*将此设备添加到您的设备列表中，以便在选择您的设备进行渲染时进行布局渲染。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-27T13:01:48.037

还有另一种 。只需从 xml editor -> generic -> Tablet 7.0 /Tablet 10.0 更改设备。这对我行得通。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T14:46:34.703

如果你有新版本的 ADT 插件你不能这样做，但如果你的版本是其他版本，你可以看这个问题，它可以帮助你[ScrollView - 如何在 Eclipse 中设计布局时向下滚动？](https://stackoverflow.com/questions/13007489/scrollview-how-to-scroll-down-while-designing-layout-in-eclipse)

# function - matlab中调用函数。这样有错吗？

> ID：14731562
> 
> 赞同：1
> 
> 时间：2013-02-06T14:33:18.910
> 
> 标签：function, matlab, call, fuzzy

我有以下课程`matlab`：

```
classdef floating_search
properties
    S,M;
end
methods
    function s = support(x,y)
        for i=1:length(x)
            if(y(i)~=1)
                s = x(i);
            end
        end
    end
end
end 
```

现在，在命令 winows 中，我执行了以下操作：

```
>> x=1:10;
>> floating_search.S = x;
>> y=trapmf(x,[1 3 5 9])

y =

  Columns 1 through 7

         0    0.5000    1.0000    1.0000    1.0000    0.7500    0.5000

  Columns 8 through 10

    0.2500         0         0

>> floating_search.M = y; 
>> floating_search.support(floating_search.S, floating_search.M)
??? Reference to non-existent field 'support'. 
```

对于最后一个命令，为什么会出现此错误？我是否调用了错误的函数？如何将 th 值传递给函数`floating_search.S`并`floating_search.M`检索`S`which的值`Y~=1`？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:46:01.683

你永远不会初始化你的对象。此外，我认为您应该重新考虑将代码用作非静态方法：

```
classdef floating_search

properties

   S
   M

end

methods
    function s = support(obj)
        for i=1:length(obj.S)
            if(obj.M(i)~=1)
                s = obj.S(i);

            end
        end
    end
end

end 
```

然后执行：

```
x = 1:10;
y = trapmf(x,[1 3 5 9])

myInstance = floating_search()
myInstance.S = x;
myInstance.M = y; 

myInstance.support() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:47:51.177

您的类缺少构造函数。此外，您永远不会初始化任何对象。

您的`floating_search.S = x;`语句生成一个名为`floating_search`：

```
>> whos floating_search
  Name                 Size            Bytes  Class     Attributes

  floating_search      1x1               256  struct 
```

试试这个（将文件另存为`floating_search.m`）：

```
classdef floating_search
    properties
        S;
        M;
    end

    methods

        % constructor - place to initialize things
        function obj = floating_search()
        end        

        % you need the first input argument 'obj', since this is a value class
        % see http://www.mathworks.de/de/help/matlab/matlab_oop/comparing-handle-and-value-classes.html
        function s = support(obj, x, y)
            for i=1:length(x)
                if(y(i)~=1)
                    s = x(i);
                end
            end
        end

    end
end 
```

然后运行代码：

```
% generate your data
x = 1:10; 
y = trapmf(x,[1 3 5 9]);

# initialize object
a = floating_search()
a.S = x;
a.M = y;
a.support(a.S, a.M) 
```

# ios - iOS - 查看转换打开和关闭

> ID：14731564
> 
> 赞同：1
> 
> 时间：2013-02-06T14:33:25.433
> 
> 标签：ios, iphone, ipad, animation

在最新的 iOS 版 Expedia 应用程序中，它们有一个非常有趣的效果，我正试图绕过它。

当您点击任何图块时，它会翻转和缩放动画。

你能帮我做同样的 UIView 转换吗？

![在此处输入图像描述](../Images/c24265ea9a3d55b9819e8aec3aafd546.png) ![在此处输入图像描述](../Images/c8058053dc7e916b0f0bfc4f376ca819.png) ![在此处输入图像描述](../Images/220ac972dcc787c2481eb1a3b54da40b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:29:34.123

我也想在我的应用程序中使用这种动画，所以我编写了一个简单的自定义转场来做到这一点 - 你甚至可以在多种类型的翻转之间进行选择！

它叫做*IBCellFlipSegue*，试一试，让我知道你的想法！ [https://github.com/IBLabs/IBCellFlipSegue](https://github.com/IBLabs/IBCellFlipSegue)

# java - 将图像发布到 PHP 文件

> ID：14731574
> 
> 赞同：0
> 
> 时间：2013-02-06T14:33:55.380
> 
> 标签：java, android

我正在尝试将图像从我的 android 应用程序发布到 PHP 文件，并且想知道我必须将其发布到什么格式（文件、Fileoutputstream 等）才能将其识别为文件并使用 $_FILE[' 引用它文件名'] 在我的 php 脚本中。

谢谢 ：）

**编辑：**

抱歉，我可能不清楚，我不是在寻找 PHP 脚本，我已经完成了接受 $_FILE['sample'] 并用它做我需要的事情，我只是不确定文件类型我必须发布到 php 文件（IN JAVA），以便 php 将其“视为”$_FILE

仅供参考：我正在使用 loopj 异步 http 请求库。

```
public void add_image_android(final Bitmap image, String party_id, String guest_id) 
    { 

        String url = "http://www.mysite.com/urltopost";

            /* not sure what to set fOut to for the bitmap to be passed as file */

        RequestParams params = new RequestParams();
        params.put("file", fOut);
        params.put("guest_id", guest_id);
        params.put("party_id", party_id);
        client.post(url, params, new JsonHttpResponseHandler() 
        {
            @Override
            public void onSuccess(JSONObject response)
            {
                ((ResponseListener)_mainContext).add_image_android_response(response.toString());
                return; 
            }
            @Override
            public void onFailure(Throwable e) 
            {
                fireToast("api error:"+e);
                Log.d("api error:",e.toString());
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:38:19.633

试试下面的代码，它将上传图片并提供链接。

```
<?php
$uploaddir = 'images/';
$ran = rand () ;

$file = basename($_FILES['userfile']['name']);
$uploadfile = $uploaddir .$ran.$file;

if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
        echo "http://www.domain.com/folder/{$uploadfile}";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:50:09.860

这对我有用：（非常旧的代码，希望它有帮助......）

```
ReturnObject returnObject = new ReturnObject(); 

HttpURLConnection conn = null;
DataOutputStream dos = null;
BufferedReader inStream = null;

String lineEnd = "\r\n";
String twoHyphens = "--";
String boundary =  "*****";

int bytesRead, bytesAvailable, bufferSize;

byte[] buffer;

int maxBufferSize = 1*1024*1024;

String urlString = "your url";

try{
    FileInputStream fileInputStream = new FileInputStream(photoFile);

    URL url = new URL(urlString);
    conn = (HttpURLConnection) url.openConnection();
    conn.setDoInput(true);

    conn.setDoOutput(true);
    conn.setUseCaches(false);

    conn.setRequestMethod("POST");
    conn.setRequestProperty("Connection", "Keep-Alive");
    conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

    dos = new DataOutputStream( conn.getOutputStream() );
    dos.writeBytes(twoHyphens + boundary + lineEnd);
    dos.writeBytes("Content-Disposition: form-data; name=\"image\";"
      + " filename=\"" + photoFile.getAbsolutePath() +"\"" + lineEnd);
    dos.writeBytes(lineEnd);

    bytesAvailable = fileInputStream.available();
    bufferSize = Math.min(bytesAvailable, maxBufferSize);
    buffer = new byte[bufferSize];

    bytesRead = fileInputStream.read(buffer, 0, bufferSize);

    while (bytesRead > 0){
        dos.write(buffer, 0, bufferSize);
        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);
    }

    dos.writeBytes(lineEnd);
    dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

    fileInputStream.close();
    dos.flush();
    dos.close();

}catch (MalformedURLException ex){
    ex.printStackTrace();
}catch (IOException ioe){
    ioe.printStackTrace();
} 
```

在服务器上我发现了这个：

```
$source = $_FILES['image']['tmp_name'];
move_uploaded_file($source, $target) 
```

不确定这个“tmp_name”是什么......

# c# - C# 奇怪的计时器行为

> ID：14731579
> 
> 赞同：2
> 
> 时间：2013-02-06T14:34:05.757
> 
> 标签：c#, timer, intervals

我有一个关于计时器使用的理解问题，它与错误代码没有直接关系。我想了解正在发生的事情...

我编写了一个程序，其中一部分通过 COM 端口从传感器读取数据并将其存储到变量中。这是使用 DataReceivedHandler 完成的，因此它是“在后台”完成的。现在我需要一个计时器，它每秒从该变量中获取实际值并进行一些计算。计算时间约为 50-70 毫秒，因此 1 秒应该是相当足够的时间。我尝试使用 System.Timer.Timer 和 System.Threading.Timer 乍一看似乎都可以正常工作，但是当我让程序运行几个小时时，它开始卡顿-有时没有计时器事件持续几秒钟，然后一个中有 20 个（但并非每个跳过的计时器事件都被赶上 - 许多只是迷路了）。定时器事件是否存储在某个队列中并且根本没有得到它们的时间片？据我了解，

我通过使用 BackgroundWorkers 而不是计时器解决了这个问题；我创建了一个循环来完成我的工作，然后休眠（1000 毫秒 - 工作时间）。这很完美，为什么我的计时器不能呢？

非常感谢任何提示！

# php - 将变量传递给 php 文件并执行后保持在同一页面位置

> ID：14731580
> 
> 赞同：0
> 
> 时间：2013-02-06T14:34:08.957
> 
> 标签：php, javascript, jquery, ajax

我找到了很多例子，但我不知道如何将它应用到我的代码中。我正在添加一个愿望清单按钮，并希望用户单击它，收到一个警报，表明它已添加到他们的会员页面并继续滚动浏览内容。我知道我需要使用 ajax 将变量从 url 发送到 javascript，然后使用 ajax 发送到 php。但我坚持将这些变量传递给 ajax ......可能是因为我还在学习它。在 php 中使用 GET 很容易获得多个变量，但我不知道如何在 javascript 中做到这一点。当然，我不希望页面重新加载。这就是我要传递的内容：

```
<div><a href='wish_list.php?title=".urlencode($title)."&link=".urlencode($link)."' 
onClick='wish(this.href); return false;'>Add to Wish List</a></div> 
```

如何在 javascript 中设置这些变量？我会使用的 Ajax 是：

```
$(function (){
set variables from url
$.ajax({
type: "POST",
url: "wish_list.php",
data: "$link and $title" //Need help with this here
success: function()...
});
}); 
```

我需要链接变量保持编码，因为它是一个链接。那么如何从 url 中提取标题和链接并将其传递给 php 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:44:53.987

js 无法访问 php 变量。您可以将这些值存储在隐藏的 html 输入字段中，然后使用 jquery 获取它。

```
link = $(#IdHiddenField).val(); 
```

然后在ajax函数中：

```
data: { link: link} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:45:31.960

您至少需要 javascript 和 jquery 的基础知识来处理 ajax 函数。您在 data 属性中传递的参数是一个 javascript 对象。它看起来像这样：

```
data: {"link":"value of link",  "title":"value of title", "numbers_too":1}, 
```

您必须将上面这些属性的值替换为您的服务器端值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:46:19.027

您可以使用数据属性将此数据放入标签中：

```
<div<a class="sender" data-link="<?= $link; ?>" data-title="<?= $title; ?> href="wish_list.php" ... etc. 
```

然后：

```
$(".data").click(function(e){ 
  type: "POST",
  url: $(e).attr("href"),
  data: $(e).data()
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T14:47:17.787

您可以添加 ajax 函数以直接使用链接中的“href”。

```
function wish(link){
$.ajax({
type: "POST",
url: link,
data: '',
success: function()...
});
} 
```

使用您的链接：

```
<div><a href='wish_list.php?title=".urlencode($title)."&link=".urlencode($link)."' 
onClick='wish(this.href); return false;'>Add to Wish List</a></div> 
```

然后，您使用 $_GET 从 url 获取数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T14:50:48.943

```
<div><a onClick=wish(urlencode($title),urlencode($link));>Add to Wish List</a></div>

function wish(title,link) {
    $.post("wish_list.php", { title: title, link: link }).done(function() {
        alert("Added to your member page");
    });
} 
```

# php - Magento 模板文件中的数组键值

> ID：14731581
> 
> 赞同：1
> 
> 时间：2013-02-06T14:34:15.457
> 
> 标签：php, magento, templates, mustache

在 Magento 模板文件中，如何输出数组键的值。

例如：

> {{var 奖励.UsablePoints}}

将返回

> 大批

内容如下所示：

[0] (int) => 12

* * *

使用 magento 的 mustache 语法（{{...}}）我将如何显示“12”而不是“Array”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:56:15.607

```
{{var rewards.UsablePoints.0}} 
```

# sql - 在 MSSQL 存储过程中处理来自 SELECT 的多行

> ID：14731586
> 
> 赞同：0
> 
> 时间：2013-02-06T14:34:21.950
> 
> 标签：sql, sql-server-2008, stored-procedures

我目前正在构建一个小型系统，该系统可以为我们的用户为我们的合作伙伴执行不同的任务提供奖励。为合作伙伴 Y 做 X 将奖励用户 Z 金额。与其一直转移大量的小账户变动，我们希望为所有用户一天的活动提供综合奖金。

我想构建一个可以在午夜左右由 SQL Server 代理运行的存储过程。此存储过程将汇总用户的收入并将其添加到他们的帐户中。但是，我当时只能设法让这个工作的 1 个用户。是否可以通过 1 次调用存储过程来管理 100 个用户的收入？

分解它，我想要一个存储过程，它可以在 1 个调用中处理 100 个用户的总事务，而不是调用存储过程 100 次，一次是 1 个用户。那可能吗？

提前致谢！

**编辑：**

这是我一直在处理的一些示例代码：

```
ALTER PROCEDURE [dbo].[rewards_dailybonus]
AS
BEGIN
SET NOCOUNT ON;

DECLARE @userid INT = 0
DECLARE @partnerId INT = 0
DECLARE @totalPoints INT = 0
DECLARE @theDate DATETIME = ''

    -- This SELECT should return 100 rows
    SELECT @userid = userid, @partnerId = partnerId, @totalPoints = SUM(points), @theDate = CAST(created AS DATE)
    FROM rewards_movements WITH (NOLOCK)
    WHERE
        transferred IS NULL
        AND
        CAST(created AS DATE) != CAST(GETDATE() AS DATE)
    GROUP BY userid, partnerId, CAST(created AS DATE)
    ORDER BY CAST(created AS DATE), userid ASC

    -- For each row from above SELECT, execute another Stored Procedure to add the points to a users account
    EXEC registerAccountMovement @userid, @totalPoints, 'Account movement notice'

    -- Set the points as transferred
    UPDATE rewards_movements SET transferred = GETDATE() WHERE userid = @userid AND partnerId = @partnerId
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:47:33.580

好吧，我认为代码看起来像这样：

```
with toupdate as (
      select userid, sum(earnings) as NewEarnings
      from tblEarnings e
      where e.earningdate = cast(getdate() -1 as date)
      group by userid
     )
update users
    set earnings = earnings + newearnings
    from toupdate
    where users.userid = toupdate.userid 
```

这显然只是一个草图，但它显示了如何以面向集合的方式做你想做的事情。

# android - android系统是否调用了 Fragment.setUserVisibleHint() ？

> ID：14731589
> 
> 赞同：25
> 
> 时间：2013-02-06T14:34:26.573
> 
> 标签：android

方法是`Fragment.setUserVisibleHint()`系统调用的，还是
我们手动调用的？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-12-18T11:32:56.753

查看[源代码](https://android.googlesource.com/platform/frameworks/support/+/refs/heads/master/v4/java/android/support/v4/app/Fragment.java)，看起来该系统主要用于放置在寻呼机中的片段。您（或例如片段寻呼机的实现）应将其设置为提示（“应用程序提供的提示”作为`Fragment`源中的注释说），以便它可以例如延迟其加载（初始化），如果不是可见并优先加载可见片段（再次用于寻呼机时的典型需求）。

但请注意，[FragmentPagerAdapter](https://android.googlesource.com/platform/frameworks/support/+/refs/heads/master/v4/java/android/support/v4/app/FragmentPagerAdapter.java)使用它并正确调用`setUserVisibleHint()`其片段，这就是为什么我猜你看到一些人建议例如覆盖`setUserVisibleHint()`以知道片段何时对用户可见（因此这只会在片段位于 a 内`FragmentPagerAdapter`，而不是仅放入通常的活动布局中）。

所以要清楚地回答这个问题：你手动调用它，`FragmentPagerAdapter`也手动调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:10:28.930

从文档：

向系统设置有关此片段的 UI 当前是否对用户可见的提示。此提示默认为 true，并且在片段实例状态保存和恢复中保持不变。

应用程序可以将此设置为 false 以指示 Fragment 的 UI 被滚动到不可见或不直接对用户可见。系统可以使用它来确定操作的优先级，例如片段生命周期更新或加载程序排序行为。

参数 isVisibleToUser 如果此片段的 UI 当前对用户可见，则为 true（默认），否则为 false。

听起来它默认为 True，如果需要，您可以将其设置为 False。

[文档](http://developer.android.com/reference/android/support/v4/app/Fragment.html#setUserVisibleHint%28boolean%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-07T00:39:47.773

不适用于低于 15 版的 Android 和低于 11 版的 Android 支持库。

# debugging - OCaml Trace：什么是星？

> ID：14731592
> 
> 赞同：5
> 
> 时间：2013-02-06T14:34:38.157
> 
> 标签：debugging, ocaml

在 OCaml中使用跟踪函数时`#trace`，输出可能包括以下内容：

```
subRec --> <fun>
subRec* <-- "_1"
subRec* --> <fun>
subRec** <-- Var "_1" 
```

星星/splats 是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T18:26:46.207

这用于将部分应用程序的结果标记为 currified 函数。`let f x y = ...`相当于`let f x = fun y -> ...`：应用`x`参数返回一个新函数，该函数又接受一个`y`参数进行计算。第一个函数将被跟踪为`f`，第二个函数（例如，返回`f 1`）标记为`f*`。

```
# let f x y = x + y;;
# #trace f;;
# f 1 2;;
f <-- 1
f --> <fun>
f* <-- 2
f* --> 3
- : int = 3
# let g = f 1;;
f <-- 1
f --> <fun>
val g : int -> int = <fun>
# g 2;;
f* <-- 2
f* --> 3
- : int = 3 
```

# scripting - 如何编写 VB 脚本来搜索文件并显示其版本信息？

> ID：14731595
> 
> 赞同：0
> 
> 时间：2013-02-06T14:34:51.357
> 
> 标签：scripting, vbscript

我正在尝试创建一个 vb 脚本，该脚本允许我搜索文件的目录和子目录，获取其位置和版本信息。

该文件可以是 .dll 或 .exe 等任何文件。

在命令提示符下，我可以使用 : dir /s /bc:(filename) 来搜索文件。

如何结合这两个要求？

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:44:15.567

这是一个枚举文件夹及其子文件夹并从 exe 文件中获取文件版本的示例，请注意，这不是产品版本。

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFolder = objFSO.GetFolder("C:\windows")
Set colFiles = objFolder.Files

enum_files colFiles
For Each objFolder in objFolder.Subfolders
  Set colFiles = objFolder.Files
  enum_files colFiles
Next

Sub enum_files (colFiles)
  For Each objFile in colFiles
    if lCase(objFSO.GetExtensionName(objFile)) = "exe" then
      Wscript.Echo objFile.path & " " & objFSO.GetFileVersion(objFile.path)
    end if
  Next
End sub 
```

# lua - OCRopus 文档？

> ID：14731597
> 
> 赞同：3
> 
> 时间：2013-02-06T14:34:56.410
> 
> 标签：lua, ocr, tesseract

是否有 ocropus 的文档？

我正在寻找对以下功能的解释：

```
make_SegmentPageByRAST():
segment()

RegionExtractor():
setPageLines()
extract() 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:49:04.057

[OCRopus](http://code.google.com/p/ocropus/)的 Lua API 要求已在项目的[bug-tracker](http://code.google.com/p/ocropus/issues/detail?id=68)列表中归档。

他们将很快在下一个 beta 版本中发布此文档（预计）。

> 首先，请注意您可以使用命令行工具而无需实际的 Lua 编程。
> 
> 了解如何使用 ocroscript 的一个好地方是查看 ocroscript/tests 中的测试用例和 ocroscript/scripts 中的命令行驱动程序脚本。

**注意**：Lua 绑定非常接近 C++ API（绑定大部分是自动的），因此 C++ 和 Lua 文档几乎是相同的问题。

# java - 使用 LayoutClickListener 终端替换组件

> ID：14731599
> 
> 赞同：0
> 
> 时间：2013-02-06T14:35:04.897
> 
> 标签：java, vaadin

我有一些像这样添加的字段的网格布局：

```
 private Component userDetailsTab(final User user) {
        final GridLayout details = new GridLayout(2, 1);
        details.setMargin(true);
        details.setSpacing(true);

        details.addComponent(createDetailLabel(Messages.User_Name));
        final Component username = createDetailValue(user.getName());
        details.addComponent(username);

        ... 
```

我也有布局点击监听器，它替换文本字段上的标签，它看起来像这样：

```
 final TextField tf = new TextField();

        details.addListener(new LayoutClickListener() {

            private static final long serialVersionUID = -7374243623325736476L;

            @Override
            public void layoutClick(LayoutClickEvent event) {

                Component com = event.getChildComponent();
                if (event.getChildComponent() instanceof Label) {
                    Label label = (Label)event.getChildComponent();
                    details.replaceComponent(com, tf);
                    tf.setValue(label.getValue());
                }
            }
        }); 
```

将来我想启用点击标签，编辑它并在点击其他地方（例如在不同的标签上）后将更改写入数据库。

现在，当我单击第一个标签，然后单击第二个标签时，效果是：第一个具有第二个值，第二个是第二个值的文本字段。为什么会这样？单击第一个然后第二个获得第一个标签女巫值第一个后我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:47:17.890

您无需在 Labels 和 TextFields 之间进行交换，您只需使用 TextField 并在未聚焦时将其设置为 Label 即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:51:28.910

当我尝试创建点击编辑标签时，它为我创造了大量额外的工作。我不鼓励它（并按照巴顿在评论中的建议做）。

但是，如果您要坚持尝试创建就地编辑，则需要执行以下操作：

*   创建一个扩展布局的新类（例如 Horizo​​ntalLayout），它可以将标签换成文本字段
*   使用 LayoutClickListener removeComponent(myLabel) 和 addComponent(myTextField)
*   使用 BlurListener 换回标签
*   在文本字段上使用 ValueChangeListener 将其值复制到标签

这仍然是一个坏主意，因为：

*   用户不能轻易地看到可供性（他们不知道什么是可编辑的）
*   用户无法使用键盘跳到他们想要编辑的字段
*   它增加了不必要的复杂性（维护时间等）。

我建议，如果您想要就地编辑，只需显示文本字段，然后使用 BlurListener 保存新值。

# java - 需要帮助让 Spring、Hibernate 项目再次使用 Hibernate 逆向工程创建类

> ID：14731600
> 
> 赞同：0
> 
> 时间：2013-02-06T14:35:05.587
> 
> 标签：java, mysql, spring, hibernate

我的项目已经工作了几个月，但我的公司正在转向新的模型类，需要帮助获取 Spring，Hibernate 项目再次使用 Hibernate 逆向工程创建。

下面是我过去工作的 DAO 代码

@Transactional(readOnly=true,propagation=Propagation.REQUIRED) public MemberInquiryLookup getMemberInquiryLookup(String requester) {

```
 log.debug("Looking for data for:" + requester);

    MemberInquiryLookup dr = (MemberInquiryLookup)
            sessionFactory.getCurrentSession()
            .get(MemberInquiryLookup.class, requester);
    if (dr == null) {
        log.debug("NO DATA for :" + requester + " was found.");

        dr = new MemberInquiryLookup();
    }
    return dr;

} 
```

这是我的旧模型类：

```
@Entity
@Table(name = " member_inquiry_lookup")
public class MemberInquiryInformation {

    @Id
    @Column(name = "email")
    private String email;

    @Column(name = "first_name")
    private String First_Name;

    @Column(name = "last_name")
    private String Last_Name;

    public String getFirst_Name() {
        return First_Name;
    }

    public void setFirst_Name(String first_Name) {
        First_Name = first_Name;
    }

    public String getLast_Name() {
        return Last_Name;
    }

    public void setLast_Name(String last_Name) {
        Last_Name = last_Name;
    }

    @Column(name = "member_id")
    private String member_id;

    @Column(name = "school_id")
    private String school_id;

    @Column(name = "title_id")
    private String title_id;

    @Column(name = "title_description")
    private String title_description;

    @Column(name = "school_search_name")
    private String school_search_name;

    @Column(name = "borough_description")
    private String borough_description;

    @Column(name = "district")
    private String district;

    @Column(name = "phone")
    private String phone;

    @Column(name = "file_number")
    private String file_number;

    @Column(name = "member_group")
    private String member_group;

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getMember_id() {
        return member_id;
    }

    public void setMember_id(String member_id) {
        this.member_id = member_id;
    }

    public String getSchool_id() {
        return school_id;
    }

    public void setSchool_id(String school_id) {
        this.school_id = school_id;
    }

    public String getTitle_id() {
        return title_id;
    }

    public void setTitle_id(String title_id) {
        this.title_id = title_id;
    }

    public String getTitle_description() {
        return title_description;
    }

    public void setTitle_description(String title_description) {
        this.title_description = title_description;
    }

    public String getSchool_search_name() {
        return school_search_name;
    }

    public void setSchool_search_name(String school_search_name) {
        this.school_search_name = school_search_name;
    }

    public String getBorough_description() {
        return borough_description;
    }

    public void setBorough_description(String borough_description) {
        this.borough_description = borough_description;
    }

    public String getDistrict() {
        return district;
    }

    public void setDistrict(String district) {
        this.district = district;
    }

    public String getPhone() {
        return phone;
    }

    public void setPhone(String phone) {
        this.phone = phone;
    }

    public String getFile_number() {
        return file_number;
    }

    public void setFile_number(String file_number) {
        this.file_number = file_number;
    }

    public String getMember_group() {
        return member_group;
    }

    /**
     * @return
     */
    public String getQueue() {
        if (getMember_group().equalsIgnoreCase("RT"))
            return "Retiree";

        return getBorough_description();

        /*if (getBorough_description().equalsIgnoreCase("BRONX"))
            return Constants.BRONX;

        if (getBorough_description().equalsIgnoreCase("BROOKLYN"))
            return Constants.BROOKLYN;

        if (getBorough_description().equalsIgnoreCase("QUEENS"))
            return Constants.QUEENS;

        if (getBorough_description().equalsIgnoreCase("MANHATTAN"))
            return Constants.MANATTAN;

        if (getBorough_description().equalsIgnoreCase("STATEN ISLAND"))
            return Constants.STATENISLAND;*/

    }

    public void setMember_group(String member_group) {
        this.member_group = member_group;
    }

} 
```

但是 Hibernate 逆向工程为同一个表创建了以下两个分类：

```
@Entity
@Table(name = "member_inquiry_lookup")
public class MemberInquiryLookup implements java.io.Serializable {

    private MemberInquiryLookupId id;

    public MemberInquiryLookup() {
    }

    public MemberInquiryLookup(MemberInquiryLookupId id) {
        this.id = id;
    }

    @EmbeddedId
    @AttributeOverrides({
            @AttributeOverride(name = "email", column = @Column(name = "email", nullable = false)),
            @AttributeOverride(name = "memberId", column = @Column(name = "member_id")),
            @AttributeOverride(name = "firstName", column = @Column(name = "first_name", length = 15)),
            @AttributeOverride(name = "lastName", column = @Column(name = "last_name", length = 25)),
            @AttributeOverride(name = "schoolId", column = @Column(name = "school_id", length = 10)),
            @AttributeOverride(name = "titleId", column = @Column(name = "title_id", length = 5)),
            @AttributeOverride(name = "titleDescription", column = @Column(name = "title_description", length = 60)),
            @AttributeOverride(name = "schoolSearchName", column = @Column(name = "school_search_name")),
            @AttributeOverride(name = "boroughDescription", column = @Column(name = "borough_description")),
            @AttributeOverride(name = "district", column = @Column(name = "district")),
            @AttributeOverride(name = "phone", column = @Column(name = "phone", length = 16)),
            @AttributeOverride(name = "fileNumber", column = @Column(name = "file_number", length = 9)),
            @AttributeOverride(name = "memberGroup", column = @Column(name = "member_group", length = 4)) })
    public MemberInquiryLookupId getId() {
        return this.id;
    }

    public void setId(MemberInquiryLookupId id) {
        this.id = id;
    }

} 
```

和

```
@Embeddable
public class MemberInquiryLookupId implements java.io.Serializable {

    private String email;
    private Integer memberId;
    private String firstName;
    private String lastName;
    private String schoolId;
    private String titleId;
    private String titleDescription;
    private String schoolSearchName;
    private String boroughDescription;
    private String district;
    private String phone;
    private String fileNumber;
    private String memberGroup;

    public MemberInquiryLookupId() {
    }

    public MemberInquiryLookupId(String email) {
        this.email = email;
    }

    public MemberInquiryLookupId(String email, Integer memberId,
            String firstName, String lastName, String schoolId, String titleId,
            String titleDescription, String schoolSearchName,
            String boroughDescription, String district, String phone,
            String fileNumber, String memberGroup) {
        this.email = email;
        this.memberId = memberId;
        this.firstName = firstName;
        this.lastName = lastName;
        this.schoolId = schoolId;
        this.titleId = titleId;
        this.titleDescription = titleDescription;
        this.schoolSearchName = schoolSearchName;
        this.boroughDescription = boroughDescription;
        this.district = district;
        this.phone = phone;
        this.fileNumber = fileNumber;
        this.memberGroup = memberGroup;
    }

    @Column(name = "email", nullable = false)
    public String getEmail() {
        return this.email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    @Column(name = "member_id")
    public Integer getMemberId() {
        return this.memberId;
    }

    public void setMemberId(Integer memberId) {
        this.memberId = memberId;
    }

    @Column(name = "first_name", length = 15)
    public String getFirstName() {
        return this.firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    @Column(name = "last_name", length = 25)
    public String getLastName() {
        return this.lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    @Column(name = "school_id", length = 10)
    public String getSchoolId() {
        return this.schoolId;
    }

    public void setSchoolId(String schoolId) {
        this.schoolId = schoolId;
    }

    @Column(name = "title_id", length = 5)
    public String getTitleId() {
        return this.titleId;
    }

    public void setTitleId(String titleId) {
        this.titleId = titleId;
    }

    @Column(name = "title_description", length = 60)
    public String getTitleDescription() {
        return this.titleDescription;
    }

    public void setTitleDescription(String titleDescription) {
        this.titleDescription = titleDescription;
    }

    @Column(name = "school_search_name")
    public String getSchoolSearchName() {
        return this.schoolSearchName;
    }

    public void setSchoolSearchName(String schoolSearchName) {
        this.schoolSearchName = schoolSearchName;
    }

    @Column(name = "borough_description")
    public String getBoroughDescription() {
        return this.boroughDescription;
    }

    public void setBoroughDescription(String boroughDescription) {
        this.boroughDescription = boroughDescription;
    }

    @Column(name = "district")
    public String getDistrict() {
        return this.district;
    }

    public void setDistrict(String district) {
        this.district = district;
    }

    @Column(name = "phone", length = 16)
    public String getPhone() {
        return this.phone;
    }

    public void setPhone(String phone) {
        this.phone = phone;
    }

    @Column(name = "file_number", length = 9)
    public String getFileNumber() {
        return this.fileNumber;
    }

    public void setFileNumber(String fileNumber) {
        this.fileNumber = fileNumber;
    }

    @Column(name = "member_group", length = 4)
    public String getMemberGroup() {
        return this.memberGroup;
    }

    public void setMemberGroup(String memberGroup) {
        this.memberGroup = memberGroup;
    }

    public boolean equals(Object other) {
        if ((this == other))
            return true;
        if ((other == null))
            return false;
        if (!(other instanceof MemberInquiryLookupId))
            return false;
        MemberInquiryLookupId castOther = (MemberInquiryLookupId) other;

        return ((this.getEmail() == castOther.getEmail()) || (this.getEmail() != null
                && castOther.getEmail() != null && this.getEmail().equals(
                castOther.getEmail())))
                && ((this.getMemberId() == castOther.getMemberId()) || (this
                        .getMemberId() != null
                        && castOther.getMemberId() != null && this
                        .getMemberId().equals(castOther.getMemberId())))
                && ((this.getFirstName() == castOther.getFirstName()) || (this
                        .getFirstName() != null
                        && castOther.getFirstName() != null && this
                        .getFirstName().equals(castOther.getFirstName())))
                && ((this.getLastName() == castOther.getLastName()) || (this
                        .getLastName() != null
                        && castOther.getLastName() != null && this
                        .getLastName().equals(castOther.getLastName())))
                && ((this.getSchoolId() == castOther.getSchoolId()) || (this
                        .getSchoolId() != null
                        && castOther.getSchoolId() != null && this
                        .getSchoolId().equals(castOther.getSchoolId())))
                && ((this.getTitleId() == castOther.getTitleId()) || (this
                        .getTitleId() != null && castOther.getTitleId() != null && this
                        .getTitleId().equals(castOther.getTitleId())))
                && ((this.getTitleDescription() == castOther
                        .getTitleDescription()) || (this.getTitleDescription() != null
                        && castOther.getTitleDescription() != null && this
                        .getTitleDescription().equals(
                                castOther.getTitleDescription())))
                && ((this.getSchoolSearchName() == castOther
                        .getSchoolSearchName()) || (this.getSchoolSearchName() != null
                        && castOther.getSchoolSearchName() != null && this
                        .getSchoolSearchName().equals(
                                castOther.getSchoolSearchName())))
                && ((this.getBoroughDescription() == castOther
                        .getBoroughDescription()) || (this
                        .getBoroughDescription() != null
                        && castOther.getBoroughDescription() != null && this
                        .getBoroughDescription().equals(
                                castOther.getBoroughDescription())))
                && ((this.getDistrict() == castOther.getDistrict()) || (this
                        .getDistrict() != null
                        && castOther.getDistrict() != null && this
                        .getDistrict().equals(castOther.getDistrict())))
                && ((this.getPhone() == castOther.getPhone()) || (this
                        .getPhone() != null && castOther.getPhone() != null && this
                        .getPhone().equals(castOther.getPhone())))
                && ((this.getFileNumber() == castOther.getFileNumber()) || (this
                        .getFileNumber() != null
                        && castOther.getFileNumber() != null && this
                        .getFileNumber().equals(castOther.getFileNumber())))
                && ((this.getMemberGroup() == castOther.getMemberGroup()) || (this
                        .getMemberGroup() != null
                        && castOther.getMemberGroup() != null && this
                        .getMemberGroup().equals(castOther.getMemberGroup())));
    }

    public int hashCode() {
        int result = 17;

        result = 37 * result
                + (getEmail() == null ? 0 : this.getEmail().hashCode());
        result = 37 * result
                + (getMemberId() == null ? 0 : this.getMemberId().hashCode());
        result = 37 * result
                + (getFirstName() == null ? 0 : this.getFirstName().hashCode());
        result = 37 * result
                + (getLastName() == null ? 0 : this.getLastName().hashCode());
        result = 37 * result
                + (getSchoolId() == null ? 0 : this.getSchoolId().hashCode());
        result = 37 * result
                + (getTitleId() == null ? 0 : this.getTitleId().hashCode());
        result = 37
                * result
                + (getTitleDescription() == null ? 0 : this
                        .getTitleDescription().hashCode());
        result = 37
                * result
                + (getSchoolSearchName() == null ? 0 : this
                        .getSchoolSearchName().hashCode());
        result = 37
                * result
                + (getBoroughDescription() == null ? 0 : this
                        .getBoroughDescription().hashCode());
        result = 37 * result
                + (getDistrict() == null ? 0 : this.getDistrict().hashCode());
        result = 37 * result
                + (getPhone() == null ? 0 : this.getPhone().hashCode());
        result = 37
                * result
                + (getFileNumber() == null ? 0 : this.getFileNumber()
                        .hashCode());
        result = 37
                * result
                + (getMemberGroup() == null ? 0 : this.getMemberGroup()
                        .hashCode());
        return result;
    }

} 
```

所以现在我做了一个 mvn 包，我收到以下错误：

```
Tests in error: 
  testgetMemeberRequestInformation(org.uftwf.memberinquiry.test.TestApp): Provided id of the wrong type for class org.uftwf.model.MemberInquiryLookup. Expected: class org.uftwf.model.MemberInquiryLookupId, got class java.lang.String 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:45:55.233

您正在通过休眠对请求者进行查找，我假设它是一个字符串。您在实体中的 id 是 MemberInquiryLookupId。Hibernate 不知道它应该在哪一列上匹配给定的值。

一种解决方法可能是使用标准 API 或编写 HQL：

```
FROM MemberInquiryLookup m WHERE m.id.email = :parameter 
```

在我看来，hibernate 以不正确的方式对您的表进行了反向工程。您的数据库中有复合主键吗？如果没有，您绝对应该调整您的代码以纠正错误。

# php - Magento 通讯未订阅

> ID：14731603
> 
> 赞同：1
> 
> 时间：2013-02-06T14:35:20.470
> 
> 标签：php, magento, magento-1.7, newsletter

我已将通讯订阅框移至页脚。当我尝试订阅时，页面会重新加载并将其添加到 url：?email=test%40test.nl（如果使用 test@test.nl 地址）

我在 newsletter.xml（将块移动到页脚）和 footer.phtml（在页脚中回显块）中所做的更改。

已经尝试过这个问题的解决方案：[Magento 时事通讯未发布](https://stackoverflow.com/questions/4382850/magento-newsletter-not-posting) 但什么也没做。还尝试将 this:getFormActionUrl() ?> 更改为直接 url，结果相同。

有人有这个问题的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:21:44.453

我尝试通过以下方式更改 newsletter.xml：

```
 <default>

    <!-- Mage_Newsletter -->
    <reference name="left">
        <block type="newsletter/subscribe" name="left.newsletter" template="newsletter/subscribe.phtml"/>
    </reference>

</default> 
```

到：

```
 <default> 
    <!-- Mage_Newsletter -->
    <reference name="footer">
        <block type="newsletter/subscribe" name="left.newsletter" template="newsletter/subscribe.phtml"/>
    </reference>

</default> 
```

并且通讯框显示在页脚，提交作品。无需在 footer.phtml 中添加“echo”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:21:49.637

发现了问题，其实是我一个非常愚蠢的错误......

订阅块也被包裹在另一个块中，所以它没有发布。所以anwser是上述anwsers的组合。

# jackson - Jboss 7.1.1 - 杰克逊 ContextResolver 仅适用于一个部署

> ID：14731607
> 
> 赞同：6
> 
> 时间：2013-02-06T14:35:27.150
> 
> 标签：jackson, jax-rs, jboss7.x, resteasy

我有两个想要在 Jboss 7.1.1 上部署的其余 web 应用程序。服务器。

两个应用程序中的休息请求都会产生和使用 Json。我使用杰克逊提供者来序列化和反序列化对象。

现在，我需要为每个 webapp 自定义 ObjectMapper 配置。所以为了解决这个问题，我添加了实现 ContextResolver 的 @Provider 类。每个项目一个。铁。我的一个班级看起来像这样：

```
@provider
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public class JacksonConfig implements ContextResolver<ObjectMapper> {
   private final ObjectMapper objectMapper;
   public JacksonConfig()
   {
       objectMapper = new ObjectMapper();
       objectMapper.configure(SerializationConfig.Feature.WRAP_ROOT_VALUE, true);
   }
   @Override
   public ObjectMapper getContext(Class<?> objectType) {
       return objectMapper;
   }
} 
```

当我在 jboss 上仅部署其中一个项目时，它运行良好。当我尝试部署两者时，只有第一个初始化的项目使用定义的 objectMapper。另一种从不调用 ContextResolver 类的 getContext 方法。我能做错什么？

编辑！：

经过大量试验后，我决定将解析 json 的方法从 jackson 更改为 staxon。我希望至少这种方法能很好地工作。但不是......序列化在两个部署的应用程序上都能完美运行。但同样，不知何故 jboss 决定在反序列化过程中使用 jackson 而不是 staxon。再次，我在部署后首先调用的应用程序运行良好。但是第二个使用杰克逊（不知道为什么......）调用异常。总是...

Jboss有问题吗？可能我只是做错了什么，但我不知道在哪里。有人知道我应该去哪里看吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T08:33:56.920

看起来我找到了解决这个问题的方法。这是已知的resteasy问题，可以通过内置选项删除：

为了解决这个问题，我只需将参数添加到我的项目的 web.xml 中：

```
<context-param>
    <param-name>resteasy.use.deployment.sensitive.factory</param-name>
    <param-value>false</param-value>
</context-param> 
```

我在[Resteasy jira](https://issues.jboss.org/browse/RESTEASY-748?page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel)找到了这个解决方案。对我来说真的很奇怪，在任何 jboss 或 resteasy 相关文档中都没有信息......

# java - 如何在 java 中打开文件，然后调用十六进制编辑器来检查文件类型？

> ID：14731609
> 
> 赞同：-1
> 
> 时间：2013-02-06T14:35:39.207
> 
> 标签：java, hex, hex-editors

我们真的被困在这个话题上，这是我们唯一将文件转换为十六进制的代码，但我们需要打开一个文件，然后让 java 代码读取十六进制并提取某些字节（例如前 4 个字节用于文件扩展名：

```
import java.io.*;
public class FileInHexadecimal
{        
    public static void main(String[] args) throws Exception 
    {                
     FileInputStream fis = new FileInputStream("H://Sample_Word.docx");                
     int i = 0;                
     while ((i = fis.read()) != -1) {                       
        if (i != -1) {                                
        System.out.printf("%02X\n ", i);
     } 
    }  
    fis.close();    
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T14:41:42.560

不要混淆内部和外部表示 - 转换为十六进制时所做的是您只创建相同字节的不同表示。

如果您只想从文件中读取一些字节，则无需转换为十六进制 - 只需读取它们即可。例如，要读取前四个字节，您可以使用类似

```
byte[] buffer = new byte[4];
FileInputStream fis = new FileInputStream("H://Sample_Word.docx");  
int read = fis.read(buffer);
if (read != buffer.length) {
    System.out.println("Short file!");
} 
```

如果您需要从文件中的任意位置读取数据，您可能需要检查[RandomAccessFile](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)而不是使用流。`RandomAccessFile`允许设置开始阅读的位置。

# facebook - Facebook feed 对话框下的“查看更多”和“名称”链接不可点击

> ID：14731622
> 
> 赞同：1
> 
> 时间：2013-02-06T14:36:43.087
> 
> 标签：facebook, facebook-javascript-sdk

我一直在为我的网站进行 Facebook 提要对话框集成。我正在使用 JavaScript SDK。虽然我得到了它，但我只是注意到对话框中的“查看更多”根本不可点击。同样适用于“名称”和“缩略图”。除了这两个帖子之外，在 Google 中找不到有关此错误的更多详细信息： [Facebook 'Feed' 对话框 'name' 链接不起作用](https://stackoverflow.com/questions/10250432/facebook-feed-dialog-name-link-not-working) [https://developers.facebook.com/bugs/433691090008676/](https://developers.facebook.com/bugs/433691090008676/)

有人知道更多细节吗？这是 Facebook 打算这样做的吗？

提前致谢！

# database - 在伯克利 db je 数据库中获取超出范围的实体计数

> ID：14731627
> 
> 赞同：1
> 
> 时间：2013-02-06T14:37:00.167
> 
> 标签：database, time-series, berkeley-db, berkeley-db-je

我有一个包含大量时间序列数据的 Berkeley DB JE 数据库。我希望能够计算一个时间范围内的项目数，而不必遍历它们。这可能吗？

# pushsharp - 使用 PushSharp 发送消息时我没有收到响应

> ID：14731629
> 
> 赞同：1
> 
> 时间：2013-02-06T14:37:19.360
> 
> 标签：pushsharp

我使用 PushSharp 发送推送通知。

我调用 PushService 对象的方法 StopAllServices 让它发送消息。

我假设在 PushService.StopAllServices 完成后，我得到了所有通知对象的响应。

之后我杀死了实例化 PushService 对象的线程。

```
PushService = New PushService()
...
...
...

PushService.StopAllServices(True)
...
'the thread dies here 
```

我注意到有时我在回调函数中没有得到响应。

可能是 StopAllServices 方法不等待所有响应（来自 APNS/GCM）吗？

我需要收到所有通知对象的响应。如何做到这一点？我会很高兴的 sugestions

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:14:23.480

从 Apple 推送服务 (APNS) 中，您不会收到所有成功发送的通知的响应，这是“设计使然”。 **Redth**（pushSharp 的作者）发布了对此的详细解释：[http](http://redth.info/the-problem-with-apples-push-notification-ser/)
://redth.info/the-problem-with-apples-push-notification-ser/ 所以你几乎永远不会得到一个响应-per-notification-无论如何发送，等待所有答案停止服务没有用。

请记住，将通知传递给提供者（android/apple/microsoft）并不能保证通知的有效设备传递......

# python - 如何使用 xml.etree 解析外部实体，如 lxml.etree

> ID：14731633
> 
> 赞同：5
> 
> 时间：2013-02-06T14:37:41.527
> 
> 标签：python, xml, lxml, elementtree, xml-entities

我有一个使用以下方法解析 XML 的脚本`lxml.etree`：

```
from lxml import etree

parser = etree.XMLParser(load_dtd=True, resolve_entities=True)
tree = etree.parse('main.xml', parser=parser) 
```

我需要`load_dtd=True`并且`resolve_entities=True`已经解决`&emptyEntry;`了：`globals.xml`

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE map SYSTEM "globals.xml" [
    <!ENTITY dirData "${DATADIR}"> 
]>
<map 
    xmlns:map="http://my.dummy.org/map"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsschemaLocation="http://my.dummy.org/map main.xsd"
>

  &emptyEntry; <!-- from globals.xml -->

  <entry><key>KEY</key><value>VALUE</value></entry>
  <entry><key>KEY</key><value>VALUE</value></entry>
</map> 
```

和`globals.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<!ENTITY emptyEntry "<entry></entry>"> 
```

现在我想从 non-standard`lxml`转到 standard `xml.etree`。但是我的文件失败了，因为`load_dtd=True`and`resolve_entities=True`不受`xml.etree`.

**有没有`xml.etree`办法解决这些实体？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T09:59:58.147

我的诀窍是使用外部程序 xmllint

```
proc = subprocess.Popen(['xmllint','--noent',fname],stdout=subprocess.PIPE)
output = proc.communicate()[0]
tree = ElementTree.parse(StringIO.StringIO(output)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:39:23.893

lxml 是适合这项工作的工具。

但是，如果您想使用 stdlib，那么请做好准备，看看 XMLParser 的 UseForeignDTD 方法。这是一个很好（但很老套）的例子：[Python ElementTree support for parsing unknown XML entity?](https://stackoverflow.com/questions/7237466/python-elementtree-support-for-parsing-unknown-xml-entities)

# ruby-on-rails - 主干应用程序：存储用户设置

> ID：14731634
> 
> 赞同：0
> 
> 时间：2013-02-06T14:37:42.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3, backbone.js

我最近一直在研究 rails/backbone 应用程序。到目前为止，任何时候用户对应用程序进行了一些特定的更改（例如，选择一个视图而不是其他视图，使用某些过滤器，自定义视图中显示的信息），我会将他/她的选择存储到 rails 会话变量中。使用来自这些会话变量的信息可确保当页面刷新或在同一台计算机上使用应用程序的新实例时，用户的更改仍然存在。在用户退出之前都是这种情况，这会导致会话变量的信息丢失，并在用户下次登录时恢复默认设置。

收到的反馈是，即使用户注销或使用不同的计算机（例如，只要同一用户登录，默认设置应该被他们的更改替换），他们实际上希望他们的更改保持不变。我应该如何实现这个功能？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:03:45.767

同意Mischa，您应该将数据保存在数据库中。

这是一个如何简单地向用户添加首选项的示例：

```
class User < ActiveRecord::Base
  serialize :preferences
end

u = User.new
u.preferences = {
   :view => {:controller => :dasboard, :action => :index}, 
   :filters => {
      :users => {
         :order => :email
         :page => 1
         :quantity_per_page => 20
      }
   }
} 
```

确保该字段在数据库中的类型是“文本”

# pentaho - 图表刷新避免了 pentaho CDE 中的仪表板刷新

> ID：14731637
> 
> 赞同：1
> 
> 时间：2013-02-06T14:37:56.193
> 
> 标签：pentaho, dashboard, cdf, pentaho-ctools

我正在使用 pentaho cde（来自社区 ctools）开发 3 个图表仪表板。

这 3 个图表在另一个下方显示，因此除非滚动，否则用户看不到它们。

我当前的问题是，当我想浏览仪表板下部的图表时（我必须先向下滚动），我创建的事件使我的所有仪表板刷新，因此我松开了以前的向下滚动，所以我必须再次向下滚动，或者在语法上强制它。

测试让我想到问题可能出在我创建事件的方式上。

我试过了

```
Dashboards.fireChange('parameter',variable); 
```

或者

```
 Dashboards.update(Dashboards.getComponent('myChart')); 
```

但没有成功，两者都做了一个滚动顶部。

有没有办法在图表中“导航”而不丢失卷轴？

“导航”是指使用图表显示多个层次结构，全部在同一个图表中，例如家庭 > 子家庭 > 文章，使用可点击/点击操作选项。

希望你能帮助我，谢谢。

# javascript - 多个 onclick 面板代码效率

> ID：14731642
> 
> 赞同：0
> 
> 时间：2013-02-06T14:38:12.337
> 
> 标签：javascript, jquery, performance

以下代码运行良好，但是，作为一个 jquery 初学者，即使我可以看到这段代码可以更加简化（可能只有几行）。我应该使用数组和 foreaches 吗？还是有特定的jquery函数？感谢您的知识。

```
/* 1 panel */
    $(".button_panel_1").click(function(){
        $(".panel_2, .panel_3, .panel_4, .panel_5, .panel_6, .panel_7").hide(222);          
        $(".button_main").removeClass("active");
        $(".panel_1").slideToggle(222);
        $(this).toggleClass("active"); return false;
    });
    /* 2 panel */
    $(".button_panel_2").click(function(){
        $(".panel_3, .panel_4, .panel_5, .panel_6, .panel_7, .panel_1").hide(222);      
        $(".button_main").removeClass("active");
        $(".panel_2").slideToggle(222);
        $(this).toggleClass("active"); return false;
    });
    /* 3 panel */
    $(".button_panel_3").click(function(){
        $(".panel_2, .panel_4, .panel_5, .panel_6, .panel_7, .panel_1").hide(222);          
        $(".button_main").removeClass("active");
        $(".panel_3").slideToggle(222);
        $(this).toggleClass("active"); return false;
    });
    /* 4 panel */
    $(".button_panel_4").click(function(){
        $(".panel_2, .panel_3, .panel_5, .panel_6, .panel_7, .panel_1").hide(222);          
        $(".button_main").removeClass("active");
        $(".panel_4").slideToggle(222);
        $(this).toggleClass("active"); return false;
    });
    /* 5 panel */
    $(".button_panel_5").click(function(){
        $(".panel_2, .panel_3, .panel_4, .panel_6, .panel_7, .panel_1").hide(222);          
        $(".button_main").removeClass("active");
        $(".panel_5").slideToggle(222);
        $(this).toggleClass("active"); return false;
    });
    /* 6 panel */
    $(".button_panel_6").click(function(){
        $(".panel_2, .panel_3, .panel_4, .panel_5, .panel_7, .panel_1").hide(222);          
        $(".button_main").removeClass("active");
        $(".panel_6").slideToggle(222);
        $(this).toggleClass("active"); return false;
    });
    /* 7 panel */
    $(".button_panel_7").click(function(){
        $(".panel_2, .panel_3, .panel_4, .panel_5, .panel_6, .panel_1").hide(222);          
        $(".button_main").removeClass("active");
        $(".panel_7").slideToggle(222);
        $(this).toggleClass("active"); return false;
    });
    /* Close button */
    $(".panel_header_close").click(function(){
        $(".panel_main").hide(222);         
        $(".button_main").removeClass("active"); return false;
    }); 
```

**我已经设法将代码缩小到这个范围，我想说：**

```
 $.each(['1', '2', '3', '4', '5', '6', '7'], function(index, value) {
        $(".button_panel_" + value).click(function(){               
            $(".panel_" + value).slideToggle(222);
            $(".panel_main").not(".panel_" + value).hide(222);
            $(".button_main").not(this).removeClass("active");          
      $(this).toggleClass("active"); return false;
        });
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:42:47.920

做这样的事情

```
$(".button").click(function(){
        $(".button").not(this).hide().removeClass("active");          
        $(this).addClass("active");
        $(this).find(".panel").slideToggle();
        return false;
}); 
```

或者..

```
$(".button").click(function(){
        $(this).addClass("active").siblings().hide().removeClass("active");       
        $(this).find(".panel").slideToggle();
        return false;
}); 
```

# mysql - 不重复的每月 SQL

> ID：14731647
> 
> 赞同：1
> 
> 时间：2013-02-06T14:38:22.023
> 
> 标签：mysql, sql

我有一个查询，我想返回当月登录的用户数，而不在下个月重复记录。

如果用户在 4 月和 5 月登录，则仅显示 4 月的一条记录。这就是我到目前为止所拥有的。

```
SELECT DISTINCT (a.userid), EXTRACT(MONTH FROM a.loginTime) as month 
FROM login_audit a LEFT JOIN user u on u.userid = a.userid 
WHERE a.loginTime <= '2012-12-31 11:59:59' 
AND a.loginTime >= '2012-01-01 00:00:00' 
GROUP BY month 
```

到目前为止，记录正在返回

```
userid    month
1        1
2        1
1        2
3        2 
```

在这种情况下，用户 1 将在 1 月和 2 月出现。我希望它省略那条记录。要么，要么积累。像这样：

任何一个

```
userid    month
1        1
2        1
3        2 
```

或者

```
userid    month
1        1
2        1
1        2
2        2
3        2 
```

我希望这是有道理的。如果您想进一步澄清，请问我任何事情。非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T14:41:31.583

看不到您需要表用户的位置...

对于第一个“想要的场景”：

```
SELECT 
  a.userid, 
  MIN(EXTRACT(MONTH FROM a.loginTime)) as month 
FROM login_audit a
WHERE a.loginTime <= '2012-12-31 11:59:59' AND a.loginTime >= '2012-01-01 00:00:00'
GROUP BY a.userid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:56:43.170

我会使用这种方法。

```
SELECT DISTINCT (a.userid), EXTRACT(MONTH FROM a.loginTime) as month 
FROM login_audit a 
WHERE a.loginTime <= '2012-12-31 11:59:59' 
AND a.loginTime >= '2012-01-01 00:00:00' 

and not exists
(select userid
from login_audit
where login_audit.user_id = a.user_id
and carry on with date range for the following month
) 
```

# html - Chrome 和 Firefox/IE (Joomla) 之间填充/边距差异的原因？

> ID：14731649
> 
> 赞同：2
> 
> 时间：2013-02-06T14:38:37.553
> 
> 标签：html, css

我正在一个网站[simkt.com](http://www.simkt.com)上工作，并且在重建基本主题以匹配所需的外观后刚刚转移到 joomla 2.5。

不幸的是，作为一名 Web 开发新手，我忘记查看 Chrome 以外的浏览器中的内容。该网站现已上线，我很快发现在 Firefox/IE 中该网站不太正确，经过一些调整，当我进行调整以尝试解决问题时，它们之间的间距大约有 5 个像素的差异Chrome 和 Firefox/IE（我现在在 IE 7 中进行了测试，结果……非常糟糕）。

所以，我的问题是，我做错了什么，我该如何解决这个问题？

使用 Chrome 开发人员，我将 rt-body-bg 中的顶部填充减少到 0，并且在徽标本身中，将顶部边距减少到 -30，底部边距减少到 -25，它看起来接近我想要的，但是在 Firefox 上，徽标和菜单之间有 5 像素的间隙，而在 IE 中，登录按钮开始向某个奇怪的方向移动。

我知道一些 css/php/html，但我还在学习，任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:19:27.660

Note that different browsers have different default values for the css for the different elements. A good practice when you program design with CSS is to use a reset values in the beginning of the css file. This reset is going to make sure that the unset values will be the same for every browser.

See this link for a css reset code

[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

Hope it helps

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-29T12:41:54.047

正如@Stoyan 所说，您应该在 CSS 文件的开头使用 CSS 重置。

您特别提到了边距。我刚刚必须解决一个问题，即在我们的站点中，margin-top 用于定位项目（这不是一个好主意 - 怪罪以前的开发人员）。在 IE 和 Chrome 中它很好，但在 FireFox 中，因为它有不同的上边距，它看起来很糟糕（项目 30px 太低了）。

我不想使用整个 CSS 重置，因为它可能会对整个站点产生连锁反应（例如，字体都已更改）。

我只用了一项来解决它，奇怪的是不是margin-top而是line-height：

```
body {
    line-height: 1;
} 
```

# ruby-on-rails - 没有路线匹配 {:action=>"show", :controller=>"users"}

> ID：14731654
> 
> 赞同：3
> 
> 时间：2013-02-06T14:39:00.053
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, twitter-bootstrap, controller

我正在尝试实现一个 Twitter Boostrap 登录表单，它将在每个页面上使用（因为导航栏是布局的一部分）。

但是，在尝试下面的代码时，我收到以下错误：

```
No route matches {:action=>"show", :controller=>"users"} 
```

**用户控制器：**

```
class UsersController < ApplicationController

  def index
    @users = User.all
  end

  def show
    ...
  end

  def login
    ...
  end

end 
```

**_navigation.html.erb：**

```
<div class="dropdown-menu" style="padding: 15px; padding-bottom: 0px;">
    <%= form_for("user", :url => user_path) do |f| %>
        <%= f.label :email%>
        <%= f.text_field(:email, :size => 30, :class => 'login_field', :placeholder => 'Användarnamn')%>
        <%= f.label :password%>
        <%= f.text_field(:password, :size => 30, :class => 'login_field', :placeholder => 'Lösenord')%>

        <%= f.submit "Logga in", :class => 'login_submit btn btn-primary' %>
    <% end %>
</div> 
```

**配置/路由.rb：**

```
get "home/index"

resources :users
resources :projects
resources :tickets

root :to => 'home#index' 
```

**rake 路线（与用户有关）：**

```
 users GET    /users(.:format)             users#index
          POST   /users(.:format)             users#create
 new_user GET    /users/new(.:format)         users#new
edit_user GET    /users/:id/edit(.:format)    users#edit
     user GET    /users/:id(.:format)         users#show
          PUT    /users/:id(.:format)         users#update
          DELETE /users/:id(.:format)         users#destroy 
```

我是 Rails 的新手，但奇怪的是它抱怨路由不存在，因为要在用户控制器中找到“显示”操作。

我想知道的另一件事是为什么它寻找动作“show”，而在这种情况下它应该是“login”？

为什么会发生这种情况，我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T14:48:44.407

你的错误在这一行

```
<%= form_for("user", :url => user_path) do |f| %> 
```

`user_path`期待一个 id。如果您将其更改为`users_path`，那应该可以解决它，但我认为这不是您的意图。

更新：要使用`login`用户控制器上的操作，您需要更新您的路线

```
resources :users do
  post :login, on: :collection, as: :login
end 
```

传递该`:as`选项会为您创建一个 named_route，`login_users_path`您可以在`form_for`. 既然我们想做一个帖子，我们还需要在`form_for`

```
<%= form_for("user", :url => login_users_path, :html => { :method => :post }) do |f| %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T14:49:05.483

更新你的 routes.rb 看起来像：

```
get "home/index"

resources :users do
  post :login, :on => :collection
end

resources :projects
resources :tickets

root :to => 'home#index' 
```

并在您的视图文件中将 form_for 行更改为：

```
<%= form_for("user", :url => login_users_path) do |f| %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T14:47:01.063

`resources :users`只添加默认路由。如果要添加新操作（除默认值之外），您需要使用 ' `collection`。您可以指定方法`get`或`post`. 添加到`routes.rb`. 您可以`path`通过运行获得，然后在表单`rake routes`中添加正确的路线。`action`

```
 resources :users, :collection => {:login => :post} 
```

# iphone - 如何使用 touchesMoved 移动 UIBezierPath 对象？

> ID：14731656
> 
> 赞同：1
> 
> 时间：2013-02-06T14:39:03.360
> 
> 标签：iphone, uibezierpath, touchesmoved, quartz-core

从贝塞尔路径对象绘制线条和圆圈后，我现在想在屏幕上移动这些对象。首先，当我触摸路径对象时，它应该被选中，这是我使用 containsPoint: 方法完成的。

现在我希望这个选定的对象应该在我拖动手指时移动。我想知道如何将描边的 bezierpath 对象移动到新位置？

这是我开始接触的代码：

```
 -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    startPoint = [touch locationInView:self];
    //NSLog(@"start point:- %f, %f", startPoint.x, startPoint.y);

    isHitInPath = NO;
    if(!isTextMode)
    {

        for (NSDictionary *testDict in pathArray)
        {
            if([((UIBezierPath *)[testDict objectForKey:@"path"]) containsPoint:startPoint])// if starting touch is on an object of bezierpath
            {
                NSLog(@"touch point is in path: %@ >>>>>>>>>>>>>>", [testDict objectForKey:@"path"]);
                isHitInPath = YES;

                currentSelectedPath = ((UIBezierPath *)[testDict objectForKey:@"path"]);

                CAShapeLayer *centerline = [CAShapeLayer layer];
                centerline.path = currentSelectedPath.CGPath;
                centerline.strokeColor = [UIColor whiteColor].CGColor;
                centerline.fillColor = [UIColor clearColor].CGColor;
                centerline.lineWidth = 1.0;
                centerline.lineDashPattern = [NSArray arrayWithObjects:[NSNumber numberWithInt:6], [NSNumber numberWithInt:6], nil];
                [self.layer addSublayer:centerline];

                // showing animation on line
                CABasicAnimation *dashAnimation;
                dashAnimation = [CABasicAnimation animationWithKeyPath:@"lineDashPhase"];

                [dashAnimation setFromValue:[NSNumber numberWithFloat:0.0f]];
                [dashAnimation setToValue:[NSNumber numberWithFloat:45.0f]];
                [dashAnimation setDuration:1.0f];
                [dashAnimation setRepeatCount:10000];

                [centerline addAnimation:dashAnimation forKey:@"linePhase"];

                break;
            }
        }
} 
```

移动路径对象的正确方法应该是什么（或者可能是删除旧路径对象，然后创建相同大小和图形的新路径对象，然后移动它）触摸移动的路径对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:38:57.477

抱歉回复晚了，我解决了。这是我的应用程序中的代码：

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touch = [touches anyObject];
    endPoint = [touch locationInView:self];

    if(isAnyShapeSelected) // shape is selected and getting moved
    {
                [self deselectShape];// deselect the selected shape

                // then create a new bezier path object with a new location (transformed bezierpath object)
                CGPathRef _path = currentSelectedPath.CGPath;// currentSelectedPath is a path which we have selected in touches begin (or while moving)
                CGAffineTransform transform = CGAffineTransformIdentity;
                transform = CGAffineTransformTranslate(transform, endPoint.x-startPoint.x, endPoint.y-startPoint.y);

                _path =  (CGPathCreateMutableCopyByTransformingPath(_path, &transform));

                currentSelectedPath.CGPath = _path;

//                UIBezierPath *uiPath = [UIBezierPath bezierPathWithCGPath:_path];
//                uiPath.lineWidth = currentSelectedPath.lineWidth;

                startPoint = endPoint;

                [self selectShape:currentSelectedPath];// select the shape again

                [dict_path removeAllObjects];//remove all object from current drawing dictionary

                //            NSLog(@"pathArray: %@", pathArray);

                // Add values to dictionary
                if([[pathArray objectAtIndex:selectedShapeIndex] objectForKey:@"shape"])// if key 'shape' exist for the selected shape, if filled arrow is selected
                    [dict_path setValue:@"arrow" forKey:@"shape"]; // then there must be no affect on it while moving it
                [dict_path setValue:currentSelectedPath forKey:@"path"];
                [dict_path setValue:[[pathArray objectAtIndex:selectedShapeIndex] objectForKey:@"color"] forKey:@"color"];

                [pathArray removeObjectAtIndex:selectedShapeIndex];// REMOVING object frm pathArray
                NSDictionary *tempDict = [NSDictionary dictionaryWithDictionary:dict_path];
                [pathArray insertObject:tempDict atIndex:selectedShapeIndex];// addding selected shape at every pixel movement
                [dict_path removeAllObjects];

                CGPathRelease(_path);
                [self setNeedsDisplay];
    }
}

// here is my draw rect method
- (void)drawRect:(CGRect)rect
{

    for(NSDictionary *_pathDict in pathArray)
    {
        if([_pathDict objectForKey:@"shape"])// if shape is arrow then fill it(shape key is taken for arrow)
        {
            [((UIColor *)[_pathDict valueForKey:@"color"]) setFill]; // this method will choose the color from the receiver color object (in this case this object is :strokeColor)
            [[_pathDict valueForKey:@"path"] fill];
        }
        [((UIColor *)[_pathDict valueForKey:@"color"]) setStroke]; // this method will choose the color from the receiver color object (in this case this object is :strokeColor)
        [[_pathDict valueForKey:@"path"] strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];
    }

    if([dict_path objectForKey:@"shape"])
    {
        [[dict_path objectForKey:@"color"] setFill]; // this method will choose the color from the receiver color object (in this case this object is :strokeColor)
        [[dict_path objectForKey:@"path"] fill];
    }

    [[dict_path objectForKey:@"color"] setStroke]; // this method will choose the color from the receiver color object (in this case this object is :strokeColor)
    [[dict_path objectForKey:@"path"] strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];

}

-(void)deselectShape // deselect shape
{
    [centerline removeFromSuperlayer];
    isAnyShapeSelected = NO;
    [btnResize removeFromSuperview];

    // show hide delete button
    [self.delegate showDeleteButton:isAnyShapeSelected];//delegate to active and inactive delete button
} 
```

有关如何在 touchesBegin 上选择形状，请参阅我在[如何检测 UIBezierPath 上的触摸并沿其移动球？](https://stackoverflow.com/questions/4854035/how-do-i-detect-a-touch-on-a-uibezierpath-and-move-a-ball-along-that/14728860?noredirect=1#comment22552651_14728860)

# java - GWT 开发模式不编译 Web 应用程序

> ID：14731663
> 
> 赞同：4
> 
> 时间：2013-02-06T14:39:25.607
> 
> 标签：java, eclipse, gwt, compiler-construction

当我想通过“运行方式-> GWT 应用程序”在 Eclipse 中编译我的 GWT 应用程序时，我收到以下消息：

> 00:00:00,005 [WARN] 模块声明了一个 servlet 类 'com.google.gwt.junit.server.JUnitHostImpl'，但 web.xml 没有相应的声明；请将以下几行添加到您的 web.xml 中：

```
<servlet> <servlet-name>jUnitHostImpl</servlet-name> <servlet-class>com.google.gwt.junit.server.JUnitHostImpl</servlet-class> </servlet> <servlet-mapping> <servlet-name>jUnitHostImpl</servlet-name> <url-pattern>/AdminInterface/junithost/*</url-pattern> </servlet-mapping> 
```

当我将这些行添加到我的 web.xml 时，该消息不再出现，但编译器似乎被冻结了。通常会在窗口顶部的“启动 URL”处出现一个链接，这将引导我进入我的 Web 应用程序页面。但它一直在说“计算”，并且进程本身不使用任何 CPU 时间。

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T15:44:07.090

此消息的原因是您有一个`*.gwt.xml`that `<inherits name="com.google.gwt.junit.JUnit" />`。没有理由直接包含该模块，它会在您运行时自动添加`GWTTestCase`。

众所周知，gwt-maven-plugin 原型包含这样一个模块（我不鼓励使用该原型的众多原因之一）。

删除违规并重`<inherits>`试（并且不要将建议的 servlet 添加到您的 web.xml）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:53:23.803

> 当我想通过“运行方式-> GWT 应用程序”在 Eclipse 中编译我的 GWT 应用程序时，我收到以下消息

你实际上没有编译你正在运行......

如镜像所显示，您必须使用蓝色图标编译项目。到目前为止，您正在运行。

![在此处输入图像描述](../Images/98427c44992ee290a8f3ab12485c0798.png)

在该列表中，您可以选择`GWT COMPILE PROJECT`（红色图标）并且您必须选择 yourProjectName.gwt.xml。

然后它将开始`compiling`。

关于`frozen`浏览器问题。

我认为在您单击生成的 url 后会发生此冻结问题。当您单击该链接时，应用程序将在您的默认浏览器中启动。

如果编译它不会生成任何 URL，并且 Eclipse 控制台中应该会出现一条消息“ `Compile Succeeded`”。
实际上，当时在浏览器中启动的 GWT 应用程序处于开发模式。

# c - 输入数组后程序挂起

> ID：14731667
> 
> 赞同：0
> 
> 时间：2013-02-06T14:39:40.667
> 
> 标签：c, pointers, alloc

```
#include<stdio.h>
#include<conio.h>
//#include<alloc.h>

int* mergeSort(int*,int);
int* merge(int*,int*,int);

void main()
{
  int n;int i=0;
  int *a,*b;

  scanf("%d",&n);
  a=(int)malloc(n*sizeof(int));
  for(;i<n;i++)
     scanf("%d",&a[i]);

  b=mergeSort(a,n);
  for(i=0;i<n;i++)
     printf("%d ",b[i]);

}

int* mergeSort(int *b,int n)
{
  int temp,*s;

  if(n>2)
  {
     mergeSort(b,n/2);
     mergeSort(b+n/2,n-n/2);
     s=merge(b,b+n/2,n);

     return s;
  }
  else if(n==2)
  {
     if(b[0]>b[1])
     {
         temp=b[0];
         b[0]=b[1];
         b[1]=temp; 
     }
     return;
  }
}

int* merge(int* a,int* c,int n)
{
  int i=0,j=0,k=0,
  int* x;

  while( (j ! =n/2) && (k != (n-n/2)) && (i < n))
  {
       if(a[j]<c[k])
       {
             x[i]=a[j];
             j++; 
             i++;
       }
       else
       {
             x[i]=c[k];
             k++;
             i++;
       }
   }
   for( ; j<n/2; j++,i++)
      x[i]=a[j];

   for( ; k < (n-n/2); k++,i++)
      x[i]=c[k];

   return x;
} 
```

当我运行此代码时，它在第一个 for 循环中输入数组的所有元素后挂起。请帮助我，我该如何纠正它以使其成功运行？它挂起从 main() 函数调用 mergeSort 函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:50:41.017

`it hangs after inputting all the elements of the array in first for loop.`

***挂起***？你确定......考虑到你的合并代码声明了一个指向 int 的指针，这很好：

```
int *x; 
```

并且从不初始化它，然后尝试跳转到`i`过去的偏移量（）：

```
x[i]=a[j]; 
```

将您的代码更改为：

```
int *x = malloc(n * sizeof(int)); 
```

它应该停止崩溃/挂起。

仅供参考，只要你现在`malloc()`应该`free()`有内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:58:49.497

有一些事情是错误的，不仅是基本的事情，比如`void main`代替，`int main`而且还有例如应该返回`return;`的和未初始化的。该算法还有一件重要的事情：您似乎假设它是 2 的幂：您递归地除以 2 并假设它始终是未截断的整数。`mergeSort()``int*``x``n`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:01:30.697

对于初学者，代码不能在 C++ 编译器中编译（我知道它是 C 代码，但仍然......），

几个问题是：

第 11 行：

```
a=(int)malloc(n*sizeof(int)); 
```

你为什么要投射一个指向 int 的指针？a 是一个整数 *

第 38 行：

```
return; 
```

你从没有返回值的mergeSort返回......这不好

我建议您修复所有编译器错误和警告，然后重试

# servicestack - 可插拔服务程序集。如何在 AppHost 构造函数中添加没有硬编码项的程序集列表

> ID：14731669
> 
> 赞同：2
> 
> 时间：2013-02-06T14:39:55.420
> 
> 标签：servicestack

我对如何使服务程序集可插入（从配置文件中读取它们）到 ServiceStack 有疑问。我想从配置文件中注册我的服务程序集，而不是`AppHost`像这样在构造函数中对它们进行硬编码：

```
public appHost() : base("My Pluggable Web Services", typeof(ServiceAssembly1).Assembly,  typeof(AnotherServiceAssembly).Assembly) { } 
```

我找不到在此构造函数之外注册程序集的其他方法。构造函数也接受参数并且没有重载，例如`IEnumerable<Assembly>`作为参数。这个想法是能够在不触及服务堆栈 REST 网站的情况下插入服务程序集。

我查看了`Plugin`接口，但我认为它更适合用于扩展服务堆栈而不是动态插入服务程序集。

有没有办法在当前的服务堆栈版本中实现这种可插入的服务程序集功能？您还可以添加将接受程序集数组的构造函数重载吗？

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:44:21.243

ServiceStack 的目的`AppHost`是成为为您的解决方案定制的定制类，该类具有对所有服务依赖项的硬引用。如果您在代码中声明依赖项而不是无类型配置，那么在构建时验证您的应用程序是否正确配置会容易得多。

话虽如此，您可以通过覆盖[AppHostBase.CreateServiceManager()](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/WebHost.Endpoints/AppHostBase.cs#L34)来覆盖 ServiceStack 用来发现服务类型的策略：

```
protected virtual ServiceManager CreateServiceManager(params Assembly[] assembliesWithServices)
{       
    return new ServiceManager(assembliesWithServices);
    //Alternative way to inject Container + Service Resolver strategy
    //return new ServiceManager(new Container(),
    //    new ServiceController(() => assembliesWithServices.ToList().SelectMany(x => x.GetTypes())));
} 
```

否则，您仍然可以通过将程序集传递到 AppHost 来做您想做的事情，例如：

```
var appHost = new AppHost("Service Name", MyConfig.LoadAssembliesFromConfig());
(new AppHost()).Init(); 
```

# c# - 是否可以让实体框架使用列表 而不是 ICollection 从数据库生成类时？

> ID：14731674
> 
> 赞同：0
> 
> 时间：2013-02-06T14:40:15.563
> 
> 标签：c#, .net, entity-framework, entity-framework-4, poco

标题非常不言自明。我想让我的 EF 自动生成的部分类使用 ICollection 的 List intead。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:42:08.480

是的。我已经做过很多次了。您在生成它时遇到问题吗？

前任：`public virtual List<Property> Properties { get; set; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:42:22.573

不，因为当您点击 .ToList() 时，它将返回一个 List EF 将通过查询访问数据库，所以最好在最后 cal .ToList

# vba - 当用户单击 Fx 按钮时，是否有一种方法可以使 UDF 提供类似于本机 Excel 函数的描述？

> ID：14731675
> 
> 赞同：15
> 
> 时间：2013-02-06T14:40:15.377
> 
> 标签：vba, excel

如果我`=vlookup(`在公式栏中键入（或任何其他本机 Excel 函数），然后单击公式左侧的小 Fx 按钮，我会得到一个包含所有可用参数的函数参数提示。在该提示中，函数参数下方是函数和每个参数的一两句话描述，当您将光标从每个参数的输入框中移动时。

当我输入我的 UDF 的名称并单击 Fx 时，我会得到一个输入框，用于输入我的所有参数，但仅此而已。有没有一种方法可以添加与原生 Excel 函数相同的有用类型的描述？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-02-20T19:27:57.060

我建议进一步调查 Application.MacroOptions 方法。该方法不仅允许您提供函数的描述，还允许您提供每个参数的描述。例如，如果您有一个名为“SampleFunction”的函数，它接受两个参数，您可以运行以下命令，它将很好地设置您在函数中使用 fx 按钮：

```
Private Sub RegisterMyFunction()
    Application.MacroOptions _
        Macro:="SampleFunction", _
        Description:="calculates a result based on provided inputs", _
        Category:="My UDF Category", _
        ArgumentDescriptions:=Array( _
            "is the first argument.  tell the user what it does", _
            "is the second argument.  tell the user what it does")
End Sub 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-02-06T15:15:25.117

在单元格中键入`=FormulaName(`，然后按`Ctrl+Shift+A`，它将填写参数的引用名称

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-02-06T15:15:11.390

是的，有一种隐藏的方法可以做到这一点：

在 VBA 中定义 UDF 后，转到 Visual Basic 编辑器 ( `F2`) 中的对象浏览器。在这里，在顶部下拉菜单中，选择`VBAProject`。在下面的窗口中，导航到您的 UDF 并右键单击它 - 选择`Properties`：

![在此处输入图像描述](../Images/5d31868494733cac5f35fa24abb57884.png)

在属性中，您可以提供描述。

![在此处输入图像描述](../Images/3c180eb00cbce490549622f21a3591b4.png)

如果您需要更多信息，例如如何将功能添加到某个类别，请查看这篇[OzGrid 文章](http://www.ozgrid.com/VBA/DesciptionToUDF.htm)！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-06T15:00:43.473

编辑

我刚刚注意到您正在 VBA 中创建 UDF，因此我的回复可能不适用于您的情况。

* * *

查看 Excel SDK 中名为 Generic 的示例项目之一。

它是一个可以构建的最低限度的骨架

在头包含语句之后，您会注意到二维数组的声明，其中行表示 XLL 中的 UDF 数量，列用于描述特定 UDF

第一列用于 UDF 的名称，后跟一个字符串，其中包含表示 UDF 中每个参数的数据类型的字母。

这些列可用于将每个参数的描述文本放在 UDF 中

列数由参数数量最多的 UDF 确定，参数较少的 UDF 使用空字符串作为超出此类 UDF 中参数数量的值

但随后这些描述会显示在您点击 Fx 图标时弹出的对话框中

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-02T12:11:49.503

像我在下面创建的那样创建函数：函数 CompanyNames：

```
Function CompanyNames(CompanyCode As Integer, Data As Range) As String

CompanyNames = WorksheetFunction.VLookup(CompanyCode, Data, 2, False)

End Function 
```

运行以下代码一次，您将在 Function 中获得参数描述

```
Sub DescribeFunction()

Dim FuncName As String
Dim FuncDesc As String
Dim Category As String
Dim ArgDesc(1 To 2) As String

FuncName = "CompanyNames"
FuncDesc = "Returns the Company Name"

ArgDesc(1) = "Provide the Company Code"
ArgDesc(2) = "Select Range to lookup"

Application.MacroOptions _
  Macro:=FuncName, _
  Description:=FuncDesc, _
  Category:=Category, _
  ArgumentDescriptions:=ArgDesc
End Sub 
```

# android - 为 Android 添加图像覆盖 OpenCV

> ID：14731686
> 
> 赞同：2
> 
> 时间：2013-02-06T14:40:57.637
> 
> 标签：android, opencv, image-processing, video-processing

我正在寻找一种在 Android 的 openCV(2.4.3) 中覆盖图像的方法。基本上，我正在做一些图像过滤，我希望用户能够看到干净过滤的视频流，但在上角看到过滤器正在做什么的预览：

我尝试在过滤后的图像上设置 ROI，并在这样的 JNI 代码中使用 AddWeighted

在活动中：

```
liveFrame.copyTo(mRgba); //going to be used as the unfiltered stream

//image filtering happends here...

Rect roi = new Rect(0, 0, liveFrame.cols()/4, liveFrame.rows()/4);
mProcMat = new Mat(liveFrame, roi);
AddMats(mRgba.getNativeObjAddr(),mProcMat.getNativeObjAddr()); //will add the two, assign the result to mRgba 
```

AddMats（本机方法）：

```
Mat* image1=(Mat*)mat1;
Mat* image2 = (Mat*)mat2;
float alpha = 0.5;
float beta = 0.5;
addWeighted( (InputArray)*image1, alpha, (InputArray)*image2, beta, 0.0, (OutputArray)*image1); 
```

但这不起作用，因为图像的大小必须相同，所以我似乎想不出一种方法来使它起作用。我可以在 iOS 中轻松做到这一点，因为您只需将帧应用到实时流顶部的新视图即可。据我所知，对于 Android，每个相机输入流只能有 1 个表面视图。所以这就是我在opencv中走这条路的原因，但此时我会考虑任何解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T23:17:19.673

如果我理解正确，您希望实时图像原样显示，并且在上角是对实时图像应用一些过滤器的结果，这是正确的吗？您希望过滤后的预览代表整个图像还是仅代表其中的一部分？

这是我认为可以满足您要求的算法：

**第 1 步：**调整 liveFrame 的大小（不改变它，因此您要么创建一个副本，要么使用在内部创建副本的调整大小方法），使其成为比原始图像更小的新图像（称为 mProcMat）。[你可能想检查这个问题。](https://stackoverflow.com/q/14852831/1085483)

**第 2 步：**对 mProcMat 应用图像过滤。

**第 3 步：**将 mProcMat 放置在 liveFrame 上，在 liveFrame 上创建一个 ROI，该 ROI 位于其右上角**并且与 mProcMat 具有相同的大小**。将 submat 用于 ROI，[您是否在其他问题中看到过](https://stackoverflow.com/a/14861411/1085483)，它更灵活，因为您有 3 种不同的方式来设置它。

**第4步：** `AddMats(liveFrameROI.getNativeObjAddr(), mProcMat.getNativeObjAddr());`

这听起来不错？

**编辑：** 我什至认为您不需要执行第四步的 addWeighted，要获得预览，您可以从第 3 步开始在 roi 上绘制 mProcMat。我不完全理解您使用 addWeighted 的想法。

您可能还想[检查这个线程](https://stackoverflow.com/a/13023713/1085483)，它有点相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T23:53:56.450

[我之前已经讨论过这个问题](https://stackoverflow.com/a/11335223/176769)，但是如果你想用透明度进行叠加，我建议你看一下：[OpenCV 中的透明图像叠加](http://www.aishack.in/2010/07/transparent-image-overlays-in-opencv/)。

如果您需要**调整**其中一张图片的大小，只需[查看](https://stackoverflow.com/a/11679779/176769) [此链接](https://stackoverflow.com/a/8606717/176769)。

# solr - 在 SOLR 中，如何对两个不同的字段进行 fq（过滤查询）？

> ID：14731689
> 
> 赞同：0
> 
> 时间：2013-02-06T14:41:06.920
> 
> 标签：solr

我需要过滤器查询来满足单独字段上的两个不同条件。

我尝试了以下但没有奏效

fq="颜色：红色和类型：书"

fq="+color:red +type:book"

我不能使用两个不同的 fq，因为这是我使用的 SOLRPHP 库设置的限制，它请求 $param["fq"] 作为单个参数。因此我需要将一个查询传递给这个函数。

我是 Solr 的新手，所以请不要介意我遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T17:15:35.677

尝试`fq:(color:red AND type:book)`或`fq:(+color:red +type:book)`。通过在条件周围使用引号，您是在告诉 Solr 执行短语查询，因此它无法识别短语中的字段名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:31:04.573

您可能会遇到有关 SolrPHP API 的问题。

以 SolrJ 为例，像这样传递 fq 是有益的 query.set("fq", "fieldName:" + "\"" + fieldValue + "\""); 请注意查询值周围的转义引号。

[您可能想查看 wiki 或在 Solr PHP 讨论组https://groups.google.com/forum/?fromgroups#!forum/php-solr-client](https://groups.google.com/forum/?fromgroups#!forum/php-solr-client)中提问

# ms-access - .FindFirst VBA MS Access 函数的意外行为：.NoMatch 始终返回 true

> ID：14731691
> 
> 赞同：2
> 
> 时间：2013-02-06T14:41:11.770
> 
> 标签：ms-access, duplicates, vba, findfirst

查看下面的以下代码行。

```
Dim rst As DAO.Recordset
Dim strSql As String

strSql = "SELECT * FROM MachineSettingsT;"
Set rst = DBEngine(0)(0).OpenRecordset(strSql)

rst.FindFirst "Microwave = " & "'" & Me.Microwave & "'" & " AND WashingMachine =" & "'" & Me.WashingMachine & "'" & " AND Element1 =" & "'" & Me.Element1 & "'" _
               & "AND Element3 =" & "'" & Me.Element3 & "'" & "AND Dryer =" & "'" & Me.Dryer & "'" & "AND SettingID <>" & "'" & Me.SettingID & "'"

If Not rst.NoMatch Then  
    Cancel = True
    If MsgBox("Setting already exists; go to existing record?", vbYesNo) = vbYes Then
        Me.Undo
        DoCmd.SearchForRecord , , acFirst, "[SettingID] = " & rst("SettingID")
    End If
End If
rst.Close 
```

**问题：**如果 rst.FindFirst 表达式中的任何值为 Null，则 rst.NoMatch 始终返回 true，即使在正在评估的字段中存在具有匹配 Null 值的记录。这种行为是可以预期的还是可能存在另一个潜在问题。我检查了[msdn](http://msdn.microsoft.com/en-us/library/office/ff194787.aspx)页面，但它没有提供有关此类行为的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:50:57.383

考虑一种不同的方法。请注意，这是针对一组文本数据类型字段。

```
Dim rst As DAO.Recordset
Dim strSql As String
Dim db As Database

Set db=CurrentDB

strSql = "SELECT * FROM MachineSettingsT WHERE 1=1 "
''Set rst = db.OpenRecordset(strSql)

If not IsNull(Me.Microwave) Then
   strWhere =  " AND Microwave = '" & Me.Microwave & "'" 
End if
If not IsNull(Me.WashingMachine) Then
   strWhere = strWhere & " AND WashingMachine ='" & Me.WashingMachine & "'"
End if
If not IsNull(Me.Element1) Then
   strWhere = strWhere & " AND Element1 ='" & Me.Element1 & "'" 
End if
If not IsNull(Me.Element3) Then
   strWhere = strWhere & " AND Element3 ='" & Me.Element3 & "'"  
End if
If not IsNull(Me.Dryer) Then
   strWhere = strWhere & " AND Dryer ='" & Me.Dryer & "'"
End if

Set rst = db.OpenRecordset(strSql & strWhere) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:45:15.153

当某个控件的值为 Null 时，您的`.FindFirst` *条件*必须检查相应字段是否与`Is Null`控件的值相等而不是相等。从一个更简单的示例开始，检查两个控件/字段对。

```
Dim strCriteria As String
If IsNull(Me.Microwave) Then
    strCriteria = " AND Microwave Is Null"
Else
    strCriteria = " AND Microwave = '" & Me.Microwave & "'"
End If
If IsNull(Me.WashingMachine) Then
    strCriteria = strCriteria & " AND WashingMachine Is Null"
Else
    strCriteria = strCriteria & " AND WashingMachine = '" & Me.WashingMachine & "'"
End If
If Len(strCriteria) > 0 Then
    ' discard leading " AND "
    strCriteria = Mid(strCriteria, 6)
    Debug.Print strCriteria 
    rst.FindFirst strCriteria
End If 
```

# iphone - iOS 崩溃报告：随机对象接收到错误的选择器

> ID：14731697
> 
> 赞同：0
> 
> 时间：2013-02-06T14:41:30.520
> 
> 标签：iphone, ios, debugging, crash, crash-reports

我最近使用 HockeyApp 设置了我的应用程序来跟踪崩溃报告。我收到了许多有用的报告，用于修复错误。但是，我收到了一堆崩溃报告，它们对导致崩溃的原因给出了非常奇怪的解释。例如看这个：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[_NSFaultingMutableSet alertView:didDismissWithButtonIndex:]: unrecognized selector sent to instance 0x1f2cd490' 
```

现在，我在应用程序中确实有很多我拥有的地方`alertView:didDismissWithButtonIndex:`，但我从来没有从`NSMutableSet`. 有许多类似的崩溃，其中选择器根本不附属于所谓的调用它的对象。什么可以解释这些类型的崩溃，我该如何修复它们？

* * *

编辑：

首先，正如我在对一些答案的评论中解释的那样，我使用的是 ARC。此外，这里还有一些其他示例，可以让您了解整个应用程序正在发生的事情：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSConcreteMutableAttributedString intValue]: unrecognized selector sent to instance 0x1ed29a90'

*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSMallocBlock__ myOwnInternalMethod]: unrecognized selector sent to instance 0x1edcf440' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:45:44.867

这是对象过早释放的典型症状。检查您的内存管理代码并注意引用计数（跟踪何时/多少次、、、`retain`和`copy`被调用）`mutableCopy`。`release``autorelease`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:46:00.247

这很可能是一个对象已被释放、被删除并且内存被另一个对象重用的情况

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:59:46.917

我同意 H2CO3、Daij-Djan 和 Jonathan Cichon 的观点，原因可能是消息被发送到一个已释放的对象。
发生这种情况的一个原因是如果您有一个没有设置自动释放池的线程，并且您创建了一个自动释放对象。在这种情况下，它不会被保留，因为不存在自动释放池，并在分配后立即释放。因此，如果您有多线程代码，请检查是否所有线程都有一个`@autoreleasepool{...}`或多或少覆盖整个线程代码的块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T14:45:35.610

你在用ARC吗？如果不是这样，大多数崩溃发生在您释放（或自动释放）一个对象并且之后没有将对该对象的所有引用（例如委托）设置为 nil 时。

我选择一个 ScrollView 作为示例。

```
@interface MyExampleController : UIViewController <UIScrollViewDelegate>
@property(nonatomic, strong) UIScrollView *scrollView;

@end

@implementation MyExampleController

- (UIScrollView *)scrollView
{
    if (!_scrollView) {
        _scrollView = [[UITableView alloc] initWithFrame:CGRectZero];
        [_scrollView setDelegate:self];
    }
    return _scrollView;
}

- (void)dealloc
{
    // Normaly the ScrollView should die the same time the Controller does
    // but sometimes another object might hold a reference
    // so the delegate has to be set to nil to prevent the ScrollView to call an Object no longer exist
    [_scrollView setDelegate:nil];
}

@end 
```

# java - 如何在 Java 中测量磁盘速度以进行基准测试

> ID：14731701
> 
> 赞同：4
> 
> 时间：2013-02-06T14:41:39.003
> 
> 标签：java, io, benchmarking

我想知道如何使用 Java API 测量磁盘速度。

随机读取、顺序读取和随机顺序写入。

如果有人认为这不是一个真正的问题。请在关闭之前解释一下。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-04-09T22:29:27.363

你可以看看我用java写的一个磁盘工具。它可能不是超级花哨，但它确实有效。

[https://sourceforge.net/projects/jdiskmark/](https://sourceforge.net/projects/jdiskmark/)

这是编写测量代码的片段：

```
try (RandomAccessFile rAccFile = new RandomAccessFile(testFile,mode)) {
    for (int b=0; b<numOfBlocks; b++) {
        if (App.randomEnable) {
            int rLoc = Util.randInt(0, numOfBlocks-1);
            rAccFile.seek(rLoc*blockSize);
        } else {
            rAccFile.seek(b*blockSize);
        }
        rAccFile.write(blockArr, 0, blockSize);
        totalBytesWrittenInMark += blockSize;
        wUnitsComplete++;
        unitsComplete = rUnitsComplete + wUnitsComplete;
        percentComplete = (float)unitsComplete/(float)unitsTotal * 100f;
    }
}
long endTime = System.nanoTime();
long elapsedTimeNs = endTime - startTime;
double sec = (double)elapsedTimeNs / (double)1000000000;
double mbWritten = (double)totalBytesWrittenInMark / (double)MEGABYTE;
long bwMbSec = mbWritten / sec;
System.out.println("Write IO is " + bwMbSec + " MB/s"
    + "(MB written " + mbWritten + " in " + sec + " sec)"); 
```

代码在 gitlab 上： [https ://gitlab.com/jamesmarkchan/jDiskMark/](https://gitlab.com/jamesmarkchan/jDiskMark/)

[![jDiskMark 截图](../Images/c9401d0759a89b12b55a09c7f2e828ec.png)](https://i.stack.imgur.com/5KzTw.jpg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T14:54:35.797

我会在磁盘中创建一个大文件，以确保您始终保留相同的空间，然后继续进行测试，即使用[RFA](http://docs.oracle.com/javase/tutorial/essential/io/rafs.html)读取/写入文件的块，改变这些块的大小。我还会改变块的位置（随机或在文件的初始化和结尾前后返回）。所有这些都可以让您根据块的大小等测量某些情况下的平均传输速率。

但是请注意，无论您使用 java 还是简单的 C，您都无法访问低级文件组织。您可能正在使用碎片化的 HD（越空，它越不可能非常碎片化）。该信息仅在内核级别（而不是用户级级别）可用。但是，如果您执行大量测试（不是一次读取文件的一部分，而是读取整个文件空间）并且磁盘相当空（以确保磁盘上的块没有很多碎片)，你可以从统计上得到相当合理的读/写速度指标。

我忘记的另一个会影响您的测量的重要问题是缓存。第一次从文件中读取块时，您可能不会使用缓存，但第二次则不会。为此，我建议您阅读[其他问题](https://stackoverflow.com/q/11610180/34880)的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T15:06:26.727

您是否考虑过使用[Caliper](http://code.google.com/p/caliper/)？

从网站：

> Caliper 是 Google 的开源框架，用于编写、运行和查看 JavaMicrobenchmarks 的结果。
> 
> 0.5 版本的边缘有点粗糙，但我们已经发现它非常有用，并且 API 将保持大部分稳定。
> 
> 最简单的完整 Caliper 基准测试如下所示：

```
public class MyBenchmark extends SimpleBenchmark {
  public void timeMyOperation(int reps) {
    for (int i = 0; i < reps; i++) {
      MyClass.myOperation();
    }
  }
} 
```

# asp.net - 当他的角色没有足够的权限时，将用户从 web.config 重定向到另一个页面

> ID：14731707
> 
> 赞同：3
> 
> 时间：2013-02-06T14:41:53.767
> 
> 标签：asp.net, redirect, web-config, asp.net-membership

我正在使用 ASP.NET，我希望能够将用户从 web 配置重定向到另一个页面。

我有许多限制，例如：

```
 <location path="Structures.aspx">
    <system.web>
      <authorization>
        <allow roles="Admin"/>
        <deny users="*" />
      </authorization>
    </system.web>
  </location> 
```

如果我将用户重定向到某个页面，那就太好了。我看到了 [这篇文章](https://stackoverflow.com/questions/4834387/how-to-redirect-users-to-an-asp-net-page-when-not-authorized)，但这不是我想要的。

我需要在 web.config 中而不是在后面的代码中进行。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T14:45:33.020

假设您要处理所有“未经授权”的错误：

```
<customErrors defaultRedirect="Error.aspx" mode="On">
    <error statusCode="401" redirect="Unauthorized.aspx" />
    <error statusCode="403" redirect="Forbidden.aspx" />
</customErrors> 
```

任何 401（未经授权）请求将被转发到`Unauthorized.aspx`.

或者，您需要在您的`Page_Load`活动中执行检查。如果这看起来很乏味，您总是可以为所有应该是管理员的页面创建一个基页面类并在那里执行检查。例如

```
// base class
public class AdminOnlyPage : Page
{
  /*...*/ Page_Load(Object sender, EventArgs e)
  {
    /* check if the user is admin otherwise reject and redirect */
  }
}

// Your "Structures.aspx" page
public class Structures : AdminOnlyPage
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-12T19:12:41.803

我注意到我的应用程序正在使用带有“Location”标头集的“302 Found”代码重定向回登录页面。由于我的登录页面恰好位于共享同一服务器的外部应用程序中，因此我无法对其进行修改。

**相反，我将其添加到我的 global.asax 中：**

```
 protected void Application_EndRequest(Object sender, EventArgs e)
    {
        if (Response.Status.StartsWith("302") 
            &&
            Request.IsAuthenticated 
            &&
            Response.RedirectLocation.StartsWith(System.Web.Security.FormsAuthentication.LoginUrl))
        {
            //log.Trace("Preventing redirection from app to login form since user is already logged in. It's authorization issue, not authentication.");
            Response.Clear();
            Response.Redirect("~/AccessDenied.aspx");
        }
    } 
```

# python-3.x - Matplotlib ft2font 构建错误（python3）

> ID：14731710
> 
> 赞同：1
> 
> 时间：2013-02-06T14:42:03.463
> 
> 标签：python-3.x, matplotlib

尝试为 Python3 构建 matplotlib 时遇到以下错误。我已经安装了 Numpy 和 Scipy（包括调试扩展）。我还安装了 libpng12-0 和 libfreetype6 （和调试），但仍然没有。

运行后`python3 setup.py build`我得到以下信息：

```
running build_ext
building 'matplotlib.ft2font' extension
gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Wformat-security -Werror=format-security -fPIC -DPY_ARRAY_UNIQUE_SYMBOL=MPL_ARRAY_API -DPYCXX_ISO_CPP_LIB=1 -DPYCXX_PYTHON_2TO3=1 -I/usr/local/include -I/usr/include -I/usr/lib/python3/dist-packages/numpy/core/include -I/usr/include/freetype2 -I/usr/local/include -I/usr/include -I. -I/usr/include/python3.2mu -c src/ft2font.cpp -o build/temp.linux-i686-3.2/src/ft2font.o
In file included from ./CXX/Extensions.hxx:37:0,
                 from src/ft2font.h:6,
                 from src/ft2font.cpp:3:
./CXX/WrapPython.h:58:20: fatal error: Python.h: No such file or directory
compilation terminated.
error: command 'gcc' failed with exit status 1

tom@dev-Optiplex:~/Downloads/matplotlib$ sudo find / -name "ft2font*"
/home/tom/Downloads/matplotlib/src/ft2font.cpp
/home/tom/Downloads/matplotlib/src/ft2font.h
tom@dev-Optiplex:~/Downloads/matplotlib$ 
```

我似乎无法理解它，因为它似乎无法找到 src/ft2font.* 文件，但是当我搜索它们时，它们肯定存在。我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:10:00.810

看起来您缺少 Python.h。你有安装 python3-dev 包吗？

指示是找不到的文件是`Python.h`.

```
In file included from ./CXX/Extensions.hxx:37:0,<-- (2) an include file in (1)
                 from src/ft2font.h:6,    <-- (1) an include file in (0)
                 from src/ft2font.cpp:3:  <-- (0) file gcc was trying to compile
./CXX/WrapPython.h:58:20: fatal error: Python.h: No such file or directory
  ^ (3) an include in (2) with error      ^ the actually missing file 
```

`Python.h`是 python 的开发头文件。如果您不知道缺少的标头属于哪个包，您可以为您的发行版检查包装，其中大多数具有“按文件名搜索”功能。例如[ubuntu 软件包列表](http://packages.ubuntu.com/search?searchon=contents&keywords=python.h&mode=exactfilename&suite=quantal&arch=any)。

# python - 在 Pandas 中切片时出现值错误

> ID：14731714
> 
> 赞同：5
> 
> 时间：2013-02-06T14:42:12.537
> 
> 标签：python, pandas

我有一个 DataFrame，我想使用 'str.trains()' 方法。[当我阅读pandas + dataframe - select by partial string](https://stackoverflow.com/questions/11350770/pandas-dataframe-select-by-partial-string)时，我相信我已经找到了如何做到这一点。但是，我不断收到值错误。

我的数据框如下：

```
ID,ENROLLMENT_DATE,TRAINER_MANAGING,TRAINER_OPERATOR,FIRST_VISIT_DATE
1536D,12-Feb-12,"06DA1B3-Lebanon NH",,15-Feb-12
F15D,18-May-12,"06405B2-Lebanon NH",,25-Jul-12
8096,8-Aug-12,"0643D38-Hanover NH","0643D38-Hanover NH",25-Jun-12
A036,1-Apr-12,"06CB8CF-Hanover NH","06CB8CF-Hanover NH",9-Aug-12
8944,19-Feb-12,"06D26AD-Hanover NH",,4-Feb-12
1004E,8-Jun-12,"06388B2-Lebanon NH",,24-Dec-11
11795,3-Jul-12,"0649597-White River VT","0649597-White River VT",30-Mar-12
30D7,11-Nov-12,"06D95A3-Hanover NH","06D95A3-Hanover NH",30-Nov-11
3AE2,21-Feb-12,"06405B2-Lebanon NH",,26-Oct-12
B0FE,17-Feb-12,"06D1B9D-Hartland VT",,16-Feb-12
127A1,11-Dec-11,"064456E-Hanover NH","064456E-Hanover NH",11-Nov-12
161FF,20-Feb-12,"0643D38-Hanover NH","0643D38-Hanover NH",3-Jul-12
A036,30-Nov-11,"063B208-Randolph VT","063B208-Randolph VT",
475B,25-Sep-12,"06D26AD-Hanover NH",,5-Nov-12
151A3,7-Mar-12,"06388B2-Lebanon NH",,16-Nov-12
CA62,3-Jan-12,,,
D31B,18-Dec-11,"06405B2-Lebanon NH",,9-Jan-12
20F5,8-Jul-12,"0669C50-Randolph VT",,3-Feb-12
8096,19-Dec-11,"0649597-White River VT","0649597-White River VT",9-Apr-12
14E48,1-Aug-12,"06D3206-Hanover NH",,
177F8,20-Aug-12,"063B208-Randolph VT","063B208-Randolph VT",5-May-12
553E,11-Oct-12,"06D95A3-Hanover NH","06D95A3-Hanover NH",8-Mar-12
12D5F,18-Jul-12,"0649597-White River VT","0649597-White River VT",2-Nov-12
C6DC,13-Apr-12,"06388B2-Lebanon NH",,
11795,27-Feb-12,"0643D38-Hanover NH","0643D38-Hanover NH",19-Jun-12
17B43,11-Aug-12,,,22-Oct-12
A036,11-Aug-12,"06D3206-Hanover NH",,19-Jun-12 
```

然后我运行以下代码：

```
test = pandas.read_csv('testcsv.csv')
test[test.TRAINER_MANAGING.str.contains('Han', na=False)] 
```

我收到以下错误：

```
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-54-e0c4624c9346> in <module>()
----> 1 test[test.TRAINER_MANAGING.str.contains('Han', na=False)]

.virtualenvs/ipython/lib/python2.7/site-packages/pandas/core/frame.pyc in __getitem__(self, key)
   1958 
   1959             # also raises Exception if object array with NA values
-> 1960             if com._is_bool_indexer(key):
   1961                 key = np.asarray(key, dtype=bool)
   1962             return self._getitem_array(key)

.virtualenvs/ipython/lib/python2.7/site-packages/pandas/core/common.pyc in _is_bool_indexer(key)
    685         if not lib.is_bool_array(key):
    686             if isnull(key).any():
--> 687                 raise ValueError('cannot index with vector containing '
    688                                  'NA / NaN values')
    689             return False

ValueError: cannot index with vector containing NA / NaN values 
```

我觉得我错过了一些简单的东西。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-06T14:54:18.527

您的字符串搜索仍会返回 nan 值，而切片操作仅适用于布尔值。似乎 'na=False' 不起作用（在这种情况下？），我可以使用最新（已发布）的 Pandas 版本在我的机器上复制它。

您可以通过首先将 .fillna() 函数应用于以下结果来解决它：

```
test[test.TRAINER_MANAGING.str.contains('Han').fillna(False)] 
```

返回：

```
 ID ENROLLMENT_DATE    TRAINER_MANAGING    TRAINER_OPERATOR FIRST_VISIT_DATE
2    8096        8-Aug-12  0643D38-Hanover NH  0643D38-Hanover NH        25-Jun-12
3    A036        1-Apr-12  06CB8CF-Hanover NH  06CB8CF-Hanover NH         9-Aug-12
4    8944       19-Feb-12  06D26AD-Hanover NH                 NaN         4-Feb-12
7    30D7       11-Nov-12  06D95A3-Hanover NH  06D95A3-Hanover NH        30-Nov-11
10  127A1       11-Dec-11  064456E-Hanover NH  064456E-Hanover NH        11-Nov-12
11  161FF       20-Feb-12  0643D38-Hanover NH  0643D38-Hanover NH         3-Jul-12
13   475B       25-Sep-12  06D26AD-Hanover NH                 NaN         5-Nov-12
19  14E48        1-Aug-12  06D3206-Hanover NH                 NaN              NaN
21   553E       11-Oct-12  06D95A3-Hanover NH  06D95A3-Hanover NH         8-Mar-12
24  11795       27-Feb-12  0643D38-Hanover NH  0643D38-Hanover NH        19-Jun-12
26   A036       11-Aug-12  06D3206-Hanover NH                 NaN        19-Jun-12 
```

我以前从未使用过 str.contains 函数，所以我不确定它是否不能正常工作。如果它应该像您的示例一样工作，我们应该在 github 上打开一个问题。

# c# - 日志记录：使用 try finally 块记录方法开始和结束是否可以接受？

> ID：14731715
> 
> 赞同：2
> 
> 时间：2013-02-06T14:42:13.520
> 
> 标签：c#, java, logging

考虑一种情况，需要记录具有大量返回语句的方法，而不是执行，

```
 if(condition1)
    {
      calculation here
      do log
      return a
    }
    else if(condition2)
    {
      calculation here
      do log
      return b
    }
    else 
    {
      calculation here
      do log
      return c
    } 
```

如果日志语句相同，那么以这种方式记录是否更好？

```
try
{
    if(condition1)
    {
      calculation here
      return a
    }
    else if(condition2)
    {
      calculation here
      return b
    }
    else 
    {
      calculation here
      return c
    }                
}
finally
{
    do log
} 
```

如果我们创建一个 try finally 块只是为了记录日志，会有什么影响吗？最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:47:38.040

为什么不像这样在最后返回

```
var returnValue
if(condition1)
{
  calculation here
  returnValue = a
}
else if(condition2)
{
  calculation here
  returnValue = b
}
else 
{
  calculation here
  returnValue = c
}         
do log
return returnValue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:48:26.950

作为一个纯粹主义者，我会说将业务逻辑与错误处理混合在一起总是一种不好的做法。此外，由于这是象牙塔的观点，将横切关注点（日志记录）与业务逻辑混合也是一种不好的做法。

我会以此为目标...

```
if(condition1)
    {
      calculation here
       result = a
    }
    else if(condition2)
    {
      calculation here
      result = b
    }
    else 
    {
      calculation here
      result = c
    }      
    log stuff
    return result 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T14:52:06.353

有多个 return 语句被认为是不好的风格 --> 看程序流程很复杂。（在这么小的方法中并不是真正的问题，但它会降低可读性）

因此，请考虑在计算块中设置一个 returnValue，该值将在最后返回。

这允许您在返回之前的某个时间点进行日志记录。

# jakarta-ee - Java EE 项目中的主动管理集成

> ID：14731724
> 
> 赞同：1
> 
> 时间：2013-02-06T14:42:47.560
> 
> 标签：jakarta-ee, maven, jruby, activeadmin

我有一个活动的管理项目来管理我的数据库表，我想将它集成到现有的 Java EE 项目（Maven、Spring 3、Struts 2）中。

我听说 Jruby 可以做到这一点。那么，从哪里开始呢？有教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:13:14.653

取决于您所说的“整合”是什么意思..

如果它只是在同一个 Java EE 容器中运行您的活动管理员，您基本上需要执行以下操作：

1.  安装和设置 ActiveRecord JDBC 适配器 ( [https://github.com/jruby/activerecord-jdbc-adapter#activerecord-jdbc-adapter](https://github.com/jruby/activerecord-jdbc-adapter#activerecord-jdbc-adapter) )

2.  安装莺。( [https://github.com/jruby/warbler#warbler-](https://github.com/jruby/warbler#warbler-) )

3.  通过运行创建`.war`部署`warble`

4.  将其部署`.war`到您的 Java EE 容器中。

你可以在这里找到 JRuby 文档：[https ://github.com/jruby/jruby/wiki](https://github.com/jruby/jruby/wiki)

# xml - 请检查 Xpath 更正

> ID：14731728
> 
> 赞同：0
> 
> 时间：2013-02-06T14:43:09.587
> 
> 标签：xml, xslt, xpath

## 给定 XML：

```
 <?xml version="1.0" encoding="UTF-8"?> 
     <sensor-system>
        <velocity>120.00</velocity> <!-- km/h --> 
        <temperature location="inside">24.6</temperature> 
         <temperature location="outside">-12.5</temperature>

     <seats>

     <seat location="front">
          <id>1</id> 
          <temperature>32.5</temperature> 
          <heating-is-on/>

      </seat> 
    <seat location="back">

      <id>2</id>
      <temperature>23.5</temperature>
   </seat>

</seats>
  </sensor-system> 
```

## 所需的 XML 路径：

给出一个绝对 XPATH，它标识所有前排座椅的温度大于或等于 20.0 且小于或等于 30.0 摄氏度。

## 我的解决方案请检查：

这个对吗 ：

```
/sensor-system/seats[temperature>=20 | temperature <=30]/seat[@location="front"] 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:56:38.860

您的 xpath 不太正确，因为它期望**温度**元素是**座位**元素的子元素，而您应该检查**座位**元素。

编辑：另一件事要指出的是，在您原来的 xpath 中，您使用的是 '|' 运算符，它是联合运算符，它接受两个节点集作为参数。所以它在你的例子中不起作用，因为你的论点实际上是“条件”。

试试这个

```
/sensor-system/seats/seat[temperature >= 20][temperature <= 30][@location = "front"] 
```

注意，如果您在 XSLT 中使用它，您可能必须在此处转义 <

```
/sensor-system/seats/seat[temperature >= 20][temperature &lt;= 30][@location = "front"] 
```

尽管您可能更喜欢这样做

```
/sensor-system/seats/seat[temperature >= 20][not(temperature > 30)][@location = "front"] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T14:58:44.623

尝试这样做：

```
/sensor-system/seats/seat[@location="front"]/temperature >=20 and /sensor-system/seats/seat[@location="front"]/temperature <= 30 
```

这将是`true`为了`[@location="back"]`和`false`为了`[@location="front"]`

# android - ExpandableListView - 检测所有组何时折叠

> ID：14731732
> 
> 赞同：1
> 
> 时间：2013-02-06T14:43:36.997
> 
> 标签：android, expandablelistview

扩展组时，我有一个`ExpandableListView`并执行一些操作：

```
 @Override
public void onGroupExpanded(int groupPosition) {
    super.onGroupExpanded(groupPosition);
    p = (RelativeLayout)activity.findViewById(R.id.pers);
    p.setVisibility(View.GONE);
    ExpandableListView elw = (ExpandableListView) activity
            .findViewById(android.R.id.list);

    if (groupPosition != lastExpandedGroupPosition) {
        elw.collapseGroup(lastExpandedGroupPosition);
    }
    lastExpandedGroupPosition = groupPosition;

} 
```

我需要`RelativeLayout`在所有组折叠时（或没有组展开时）设置可见。如何检测到所有组当前都已折叠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:57:57.103

您有两个等效的选择：

1.  实现`ExpandableListAdapter`方法：`onGroupCollapsed(int groupPosition)`和`onGroupExpanded(int groupPosition)`你`ExandableListView`的适配器。

2.  添加自定义`OnGroupCollapseListener`并将它们分别通过和`OnGroupExpandListener`附加到可扩展列表视图。`setOnGroupCollapseListener()``setOnGroupExpandListener()`

在这两个选项中，您基本上想要做的是跟踪当前扩展了哪些组。一个好方法是将它们保留为`Set<Integer>`. 当一个组被折叠时，您可以从该组中删除它的 ID。同样，当扩展组时，您将其 ID 添加到此集合中。每次添加/删除后，您检查集合的大小。如果它为空，则所有组都将折叠。如果不是 - 某些组被扩展。

据我所知，没有直接的方法可以找出哪些组被展开/折叠。

# java - 蔚来。多个客户端通道在同一端口上侦听

> ID：14731734
> 
> 赞同：3
> 
> 时间：2013-02-06T14:43:46.640
> 
> 标签：java, nio

使用 NIO，如何在同一台机器上注册多个客户端连接以侦听同一端口。

第一个频道我有这样的东西......

```
channel1 = DatagramChannel.open();
channel1.configureBlocking(false);
channel1.socket().bind(new InetSocketAddress(localPort));
channel1.connect(socketAddress);
SelectionKey key1 = channel1.register(readSelector, SelectionKey.OP_READ);
key1.attach(driverHandler1); 
```

现在我如何配置 channel2 来监听同一个端口，因为我不能再次绑定（）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:24:43.877

在绑定每个通道之前，您必须为每个 N 调用 channelN.socket().setReuseAddress(true)。然后您可以将它们全部绑定。

# google-maps - 给定图像的 iconAnchor 和 infowindowanchor

> ID：14731736
> 
> 赞同：0
> 
> 时间：2013-02-06T14:43:52.560
> 
> 标签：google-maps

什么是以下谷歌地图标记的 iconAnchor 和 infowindowanchor： [http ://storelocator.gizmocode.com/admin/marker/03.png](http://storelocator.gizmocode.com/admin/marker/03.png)

我仍然不明白什么是“相对于图标图像左上角的像素坐标，该图标在该位置锚定到地图”，所以我给出了一个图像并询问 iconAnchor 和 infowindowanchor ...

图像尺寸为：45 宽 x 66 高

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:51:30.203

[该图像](http://storelocator.gizmocode.com/admin/marker/03.png)具有以下尺寸：45px × 66px

锚点通常在底部的中间（点）：new google.maps.Point(22,66)

infoWindow 锚点通常位于顶部中间： new google.maps.Point(22,0); （但你可以把它放在任何对你有意义的地方）。

[示例](http://www.geocodezip.com/v3_GoogleEx_icon-complex_SOa.html)（基于[文档中的示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/icon-complex)，带有您的图标）

# git - Git合并：从“他们的”分支中获取所有内容

> ID：14731739
> 
> 赞同：9
> 
> 时间：2013-02-06T14:44:12.327
> 
> 标签：git, merge, branching-and-merging, git-merge

我有两个分支机构，“私人”和“公共”。我在私人和定期工作，我想替换“公共”分支中的所有内容，以便在“私人”中获得文件的干净副本。

因为我不希望“私人”的历史转到“公共”，所以我使用`git merge --squash`，但我仍然手动一个一个地解决合并文件。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T18:55:00.487

我认为

```
git merge -X theirs private 
```

就是你要找的。当然，您可以随意添加`--squash`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-06T15:31:43.467

如果同一行在提交的两个文件上都发生了更改，则压缩合并不会改变存在冲突的事实。

要完全丢弃“public”分支上的所有内容并接管“public”的确切状态，您可以执行以下操作之一：

1.  使用`ours`其他几个提交中指出的合并策略（不是策略选项）：
    1.a 假设您在分支“私有”（否则，做`git checkout private`）
    1.b `git merge -s ours public`
    1.c `git checkout public`
    1.d `git merge --ff-only private`
    1.e *（可选：两者分支现在指向合并提交；如果您希望“私有”指向合并之前的提交，请执行:)* `git checkout private; git reset --hard private@{1}`（请注意，这使用 reflog，并且只有在您同时没有更改“私有”时才会这样工作)

2.  手动检查“他们”的一面：
    2.a 假设您在“公共”分支上（否则，`git checkout public`）
    2.b`git merge --no-commit private`将准备合并提交，但无论是否存在合并冲突，都将在提交之前停止
    2\. c`git checkout -f private -- .`检查“私人”的当前状态
    2.d`git add .`将冲突标记为已解决（如果有）
    2.e`git commit`保存合并提交；“public”现在将具有与“private”完全相同的内容

**编辑：**请注意，这是[我如何“覆盖”而不是“合并”的倒置情况，Git 中另一个分支上的一个分支？](https://stackoverflow.com/questions/4624357/git-how-to-overwrite-rather-than-merge-a-branch-on-another-branch)

**编辑 2：**如果你想隐藏你的单个公共提交，你`--squash`当然也可以在这里使用开关（分别在步骤 1.b 和 2.b 中）

# image - 计算不规则形状多边形之间的最小距离

> ID：14731740
> 
> 赞同：0
> 
> 时间：2013-02-06T14:44:15.447
> 
> 标签：image, matlab, distance

我有这个图像。它由许多不规则的多边形组成。![在此处输入图像描述](../Images/31bb8893c6cdd9dd313c5c7fe746b039.png)

首先，我想计算两个多边形之间的最小距离。我认为可以实现的方法是首先提取每个多边形的边界像素的位置并将其存储在数组中，例如 B1 和 B2。然后计算B1中每个点到B2中每个点的距离，然后找到最小值。然后我想对图中的每个多边形重复这个。

所以，我想知道的是

*   如何提取每个多边形的边界？
*   如何将计算时间保持在最短？
*   有没有更好的方法来解决这个问题？

此外，由于多边形非常不规则，我认为稍微平滑它们也可以节省大量时间。但我又不知道怎么做？

*我发现这个[函数](http://www.mathworks.com/matlabcentral/fileexchange/22444-minimum-distance-between-two-polygons/content/min_dist_between_two_polygons/min_dist_between_two_polygons.m)是我想要的 FEX，只要我有多边形的边界点，但由于它的一般性质，我发现它非常复杂。我认为更简单的代码可以更快地完成这项工作。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:47:13.683

我几乎可以肯定（您必须检查）始终存在 X 和 Y 两点是距离实数（我的意思是， Dist(Polyg1,Polyg2)=Dist(X,Y) 并且 X 属于 P1 而 Y 属于 P2 )，其中之一是多边形的顶点。这样计算机效率就会提高。您不必仅检查 B1 与 B2 的 B1 顶点与 B2 以及 B2 的顶点与 B1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:38:37.263

可能值得研究四叉树或 b 树之类的结构。用四叉树表示你的图像可以帮助你实现你想要做的任何事情。至少您可以通过在更高级别修剪树来“平滑”。

尝试阅读： [http ://www.cs.ubc.ca/~pcarbo/cs251/welcome.html](http://www.cs.ubc.ca/~pcarbo/cs251/welcome.html)

# haskell - 将管道/代理与并发 MVar 一起使用

> ID：14731741
> 
> 赞同：4
> 
> 时间：2013-02-06T14:44:21.147
> 
> 标签：haskell

在包的`Control.Proxy`教程中`pipes-3.1.0`，作者提供了这个功能：

```
cache :: (Proxy p, Ord key) => key -> p key val key val IO r
cache = runIdentityK (loop M.empty) where
    loop _map key = case M.lookup key _map of
        Nothing -> do
            val  <- request key
            key2 <- respond val
            loop (M.insert key val _map) key2
        Just val -> do
            lift $ putStrLn "Used cache!"
            key2 <- respond val
            loop _map key2 
```

因为我想有一个并发的应用程序缓存请求，所以我有以下数据类型

`newtype Cache k v = Cache (MVar (M.Map k v))`

现在我想要一个`cache`带有签名的新函数

```
cache :: (Proxy p, Ord k) => Cache k v -> k -> p k v k v IO r
cache (Cache c) k = readMVar c >>= \m -> runIdentityK $ loop m k
    where loop m key = case M.lookup key m of
            Nothing -> do
                val <- request key
                respond val >>= loop (M.insert key val m)
            Just val -> respond val >>= loop m 
```

但是，这无法进行类型检查，因为`readMVar`它在`IO`monad 中，并且`runIdentityK`在`Proxy p => p k v k v IO r`monad 中。当然我可以`readMVar`进入这个代理单子，因为它是一个变压器`IO`，但我找不到合适的组合器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T15:07:24.983

解决方案很简单`lift`。我之前曾想过使用它，但显然没有足够努力。这是我想要的粗略的类型检查版本`cache`

```
cache = runIdentityK . loop
    where loop (Cache c) key = lift (takeMVar c) >>= \m -> case M.lookup key m of
            Nothing -> do
                val <- request key
                lift . putMVar c $ M.insert key val m
                respond val >>= loop (Cache c)
            Just val -> do
               lift $ putMVar c m 
               respond val >>= loop (Cache c) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T15:12:02.487

就像添加一样简单`lift`。但是，您的实现似乎没有达到您的预期。您`MVar`在开始时只阅读了一次，然后再也不会使用它，只需在循环中传递更新的地图。如果不同的线程应该通过 看到更改`MVar`，则您也必须对其进行更新。一个建议（编译，但我没有测试它是如何工作的）：

```
cache :: (Proxy p, Ord k) => Cache k v -> k -> p k v k v IO r
cache (Cache c) k = runIdentityK loop k
    where 
      loop key = do
        m <- lift (readMVar c)
        case M.lookup key m of
            Nothing -> do
                val <- request key
                lift $ modifyMVar_ c (return . M.insert key val)
                respond val >>= loop
            Just val -> respond val >>= loop 
```

# python - 最好在 Python 或 Go 中创建与 Google Talk 集成的聊天机器人

> ID：14731742
> 
> 赞同：2
> 
> 时间：2013-02-06T14:44:23.963
> 
> 标签：python, xmpp, go, google-talk

这个问题在不同的时间以不同的形式被问过，
但是随着时间的推移，事情已经发生了很大的变化，现有的答案一开始也不是很令人满意，我允许自己再问一次，

我想实现一个聊天机器人，让我们的团队能够回答查询和接受命令（大致类似于 Github 的 hubot），我想在 Google Talk 服务（Gmail 和其他地方的聊天服务）之上做到这一点)，我宁愿在 Python 或 Go 中，在 AWS 上（而不是使用 Google App Engine），

**我的问题**是，在过去的一年里，有没有任何 Python 或 Go out 中的 Google 聊天客户端库一直在积极开发中？
非常感谢有关实施聊天机器人的任何建议。

**我的计划**是拥有一个 Google Talk 客户端，一直运行，等待人们与之交谈并解释他们的消息/命令（而不是运行服务器并处理用户身份验证和......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:05:11.613

Google Talk 服务基于 XMPP，但使用了一些[开放但非标准的扩展](https://developers.google.com/talk/jep_extensions/extensions)，尽管这些都不是建立连接所必需的。任何符合标准的客户端都应该可以工作。

**引用自[https://developers.google.com/talk/open_communications#developer](https://developers.google.com/talk/open_communications#developer)**

> 我是 IM 客户端的开发人员。如何连接到 Google Talk 服务？
> 
> 只要您遵守 XMPP 规范的要求，您就可以连接到 Google Talk 服务。

除了支持连接到 Google Talk 所需的 XMPP-Core 和 XMPP-IM 之外，没有什么特别的。由于遗留原因，它甚至支持 SASL PLAIN 机制。

* * *

目前在 Go 中没有很好的 XMPP 支持，可以说有几个铁杆在火中，但都远未准备好生产和许多废弃的项目。使用已建立的 Python 库之一是您最好的选择。

不用过多考虑，我会选择[Twisted Words](https://twistedmatrix.com/trac/wiki/TwistedWords)或[Wokkel](http://wokkel.ik.nu/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T14:50:58.600

我知道的唯一可能符合条件的是[mattn / go-xmpp](https://github.com/mattn/go-xmpp)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T15:34:11.007

Google Talk 使用普通的[XMPP](http://www.xmpp.org) ~~，唯一的变化是它需要非标准化的身份验证方案才能作为客户端登录到*他们的*`X-GOOGLE-TOKEN`服务器（当时它是SASL 机制，[现在它被认为是 OAuth2](https://developers.google.com/talk/jep_extensions/extensions)）~~ ——与 gtalk 服务器的服务器到服务器通信无需任何调整即可工作。

请注意，您不妨考虑设置自己的 XMPP 服务器，因为有许多免费的 XMPP 服务器（ejabberd、prosody、openfire、jabberd2），并且有免费[的支持 XMPP 的网络聊天客户端](http://xmpp.org/xmpp-software/clients/)（以[JWChat](http://stefan-strigler.de/jwchat/)为例）以防万一'将希望人们能够直接从 Web UI 聊天。

至于库，我听说在为 Python 编写支持网络的应用程序时使用 Twisted 框架很流行，所以看看有[什么可用的。](https://stackoverflow.com/q/2248587/720999) `go-xmpp`@jnml 提到的似乎还不支持核心 XMPP RFC 中指定的最低要求。

# javascript - 如何将 64 位整数拆分为两个 32 位整数

> ID：14731743
> 
> 赞同：9
> 
> 时间：2013-02-06T14:44:24.377
> 
> 标签：javascript, integer, byte, bit-manipulation

我想将一个 64 位整数拆分为两个 32 位整数：

```
var bigInt = 0xffffff;

var highInt = bigInt >> 8 // get the high bits 0xfff
var lowInt = bigInt // cut of the first part (with &)?

console.log(highInt); // 0xfff
console.log(lowInt); // 0xfff

// set them together again
var reBigInt = (highInt << 8) + lowInt; 
```

不幸的是，无论是得到 highInt 还是得到 lowInt 都不起作用......有人能给我答案我需要如何使用按位运算符吗？

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T14:48:52.957

**编辑**JavaScript[使用 IEEE 双精度格式](https://stackoverflow.com/questions/2983206/bitwise-and-in-javascript-with-a-64-bit-integer)表示整数，因此无法存储任意 64 位整数而不会损失精度，除非通过自定义大整数库。对潜在裁剪值的按位运算显然没有意义。

* * *

一般来说，对于支持 64 位整数的语言：

一个 64 位的模式是`0xffffffffffffffff`. 要提取高 32 位，您需要移位 32: `>> 32`。要提取低 32 位，只需将它们与 32 个：`& 0xffffffff`.

你的原则是正确的——你关于移位或屏蔽多少位的算术是错误的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-03T05:11:26.923

在 JavaScript 中，所有数字都使用 53 位表示。JavaScript 内部使用浮点表示来存储所有数字，这意味着整数存储为浮点数（尾数有 53 位）

所以用 53 位我们可以表示最大值 2^53 = 9007199254740992。

但是，即使从 53 位数字中，您也不能使用右移和 AND 二进制运算来提取低 32 位和高 21 位。

原因是当我们对任何数字应用二元运算符时 - Javascript 首先将该数字转换为 32 位有符号数，应用二元运算并返回结果。这意味着任何高于 32 的位都将被丢弃。

我使用以下方法从正数 <= 2^53 中提取较高（21 位）和较低（32 位）部分。

```
var bigNumber = Math.pow(2, 53); // 9007199254740992
var bigNumberAsBinaryStr = bigNumber.toString(2); // '100000000000000000000000000000000000000000000000000000'
// Convert the above binary str to 64 bit (actually 52 bit will work) by padding zeros in the left
var bigNumberAsBinaryStr2 = ''; 
for (var i = 0; i < 64 - bigNumberAsBinaryStr.length; i++) {
    bigNumberAsBinaryStr2 += '0'; 
}; 

bigNumberAsBinaryStr2 += bigNumberAsBinaryStr;

var lowInt = parseInt(bigNumberAsBinaryStr2.substring(0, 32), 2);
var highInt = parseInt(bigNumberAsBinaryStr2.substring(32), 2); 
```

只是为了确认上述逻辑是正确的，让我们尝试从两部分构建 bigNumber

```
Assert((lowInt * Math.pow(2, 32) + highInt) === bigNumber); 
```

# javascript - % 在 JavaScript 中到底做了什么？

> ID：14731745
> 
> 赞同：-1
> 
> 时间：2013-02-06T14:44:33.510
> 
> 标签：javascript

我正在尝试将一些 JavaScript 代码转换为 Java，但我不知道`%`两个数字变量之间的字符的作用：

```
 testvalue = somevalue%anothervalue; 
```

这是什么意思，或者同样的语句在 Java 中是什么意思？

我在 JavaScript 中也有这个：

```
 if(somevalue%2 == 1){
    } 
```

这里是什么`%2`意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T14:48:11.333

它是**[模运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators#.25_.28Modulus.29)**。

这将返回“第一个操作数以第二个操作数为模”，这是当您从第一个操作数中减去（或添加）尽可能多的第二个操作数以尽可能接近 0 时的余数。

这是一个例子：

```
 5  % 2 ==  1  ( 5  = 2*2   +1)
 6  % 2 ==  0  ( 6  = 2*3   +0)
 12 % 5 ==  2  ( 12 = 5*2   +2)
-5  % 2 == -1  (-5  = 2*-2  -1)
-6  % 2 ==  0  (-6  = 2*-3  -0)
-12 % 5 == -2  (-12 = 5*-2  -2)
//                           ^ That's the result of the modulo. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T14:46:53.877

它是[模](https://msdn.microsoft.com/en-us/library/h6zfzfy7(v=vs.100).aspx)运算符。模运算符对两个值执行除法并将余数作为输出。

例如：

```
var testValue = 5 % 3; 
```

testValue 输出为 2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:46:04.290

它是模运算符。它给你剩下的`somevalue/anothervalue`，即`10%4 === 2`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T14:46:11.927

它是 Java 和 JavaScript 以及其他编程语言中的模运算符。

它返回除法的余数，例如，

```
5 % 2 = 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T14:46:29.290

它是“模数”或余数除法 - 换句话说，返回除法的余数。

请参阅[JavaScript 运算符](http://www.w3schools.com/js/js_operators.asp)的此页面。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T14:47:48.387

它执行模计算。即：确定[划分提醒](http://en.wikipedia.org/wiki/Modulo_operation)。是的，Java 为此使用相同的语法。

示例：5%3 = 2

因为3进5一次，还有2的提醒。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-06T15:07:03.367

```
X%5 
```

表示剩余的 x/5 所以如果 x=12 则 x%5 = 2 如果您想将循环中的数字增加到最大值

```
<button onclick="incX();">increase up to 5</button>
<script type="text/javascript">
    var x=0;
    function incX(){
        x%=5;
        x++;
        alert("X = "+x);
    }
</script> 
```

# scala - Playframework 2.1 找不到 javax.persistence 和 play.db

> ID：14731746
> 
> 赞同：8
> 
> 时间：2013-02-06T14:44:36.013
> 
> 标签：scala, playframework, playframework-2.1

我对使用播放框架（版本 2.1）创建实体的 Scala 教程有疑问。我正在尝试做：

```
import java.util._
import javax.persistence._
import play.db.jpa._ 
```

但是当我编译它告诉我 javax.persistence 不存在并且 play.db 也不存在。

我想这是版本的问题，因为在我看来，实际的 yabe 教程有点旧。你知道有什么网站有很好的解释和例子吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:15:45.733

当您使用 Scala 时，您可以看看 Slick，它似乎是 Play 的未来数据库持久性框架，并放弃您教程中的那个。

如果您有依赖项，请查看您的 Build.scala `jdbc`。

这是我的依赖项

```
val appDependencies = Seq(
    jdbc,
    "mysql" % "mysql-connector-java" % "5.1.22",
    "com.typesafe" % "slick_2.10.0-RC1" % "0.11.2",
    "org.mindrot" % "jbcrypt" % "0.3m"
  ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-08T00:59:09.143

`build.scala`现在已弃用。在 play 2.2.x 添加到 build.sbt：

```
libraryDependencies ++= Seq( javaJdbc, javaEbean) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T19:18:56.207

我遇到了同样的问题，我通过更改我的文件 Build.scala 来解决它

```
val appDependencies = Seq(
  // Add your project dependencies here,
  javaCore,
  javaJdbc,
  javaEbean,
  "mysql" % "mysql-connector-java" % "5.1.19"
) 
```

# java - 如何使 JFrame 在全屏模式下工作

> ID：14731747
> 
> 赞同：0
> 
> 时间：2013-02-06T14:44:40.343
> 
> 标签：java, fullscreen

如何？我阅读了独占模式 API 并且有这样的代码：

```
GraphicsDevice myDevice;
Window myWindow;

try {
    myDevice.setFullScreenWindow(myWindow);
    ...
} finally {
    myDevice.setFullScreenWindow(null);
} 
```

但它不起作用。我想将 JFrame 设置为全尺寸。有人可以给我写正确的代码来做到这一点吗？它应该放在框架的构造器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:49:03.813

```
frame.setExtendedState(JFrame.MAXIMIZED_BOTH);
frame.setUndecorated(true); 
```

# php - 如何在div中回显php变量

> ID：14731748
> 
> 赞同：2
> 
> 时间：2013-02-06T14:44:41.403
> 
> 标签：php, html, mysql, echo

我正在尝试从 div 中的 php 脚本中回显一个变量，但没有得到任何结果。这是我的代码：

```
<?php
session_start();
session_name();

$con = mysql_connect("localhost", "root", "") or die(mysql_error()); 
mysql_select_db("bloggers", $con) or die(mysql_error()); 

    $data = "Select * from accountprofile where Username = '" . $_SESSION['Sess_user'] . "' and Password = '" . $_SESSION['Sess_pass'] . "'";

$result = mysql_query($data);

while($row = mysql_fetch_array($result)) {
   $row['Fname'];
   $row['Username'];
   $row['Password'];

  }
  mysql_close($con);

  ?> 
```

这是我的 div，我想在其中显示变量 $row['Fname'];

```
<div class="title" style="font-size: 36px;">
    <?php echo $row['Fname']; ?>
</div> 
```

对不起，我只是 html 和 php 的新手。请帮忙谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:46:20.463

你很近。这是您的代码简化和更正：

```
<?php
session_start();
session_name();

$con = mysql_connect("localhost", "root", "") or die(mysql_error()); 
mysql_select_db("bloggers", $con) or die(mysql_error()); 

$data = "Select * from accountprofile where Username = '" . $_SESSION['Sess_user'] . "' and Password = '" . $_SESSION['Sess_pass'] . "'";

$result = mysql_query($data);
$row = mysql_fetch_assoc($result); // You're only getting one row, no need to loop.
mysql_close($con);

 ?>

<div class="title" style="font-size: 36px;">
    <?php echo $row['Fname']; ?>
</div> 
```

**仅供参考**： [请不要`mysql_*`在新代码中使用函数](https://stackoverflow.com/questions/12859942)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[红框](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](http://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T14:46:23.033

变量 $row 只是循环范围。您在 while 内创建此变量，它只会存在于那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:11:25.213

@user2047260 记住您要显示的变量必须在 while 循环中，下面是代码尝试一下

```
 <?php
    session_start();
    session_name();

    $con = mysql_connect("localhost", "root", "") or die(mysql_error()); 
    mysql_select_db("bloggers", $con) or die(mysql_error()); 

        $data = "Select * from accountprofile where Username = '" . $_SESSION['Sess_user'] . "' and Password = '" . $_SESSION['Sess_pass'] . "'";

    $result = mysql_query($data);

    while($row = mysql_fetch_array($result)) {
       $fname = $row['Fname'];
       $username = $row['Username'];
       $password =$row['Password'];
      ?>
      <div class="title" style="font-size: 36px;">
        <?php echo $fname;
          mysql_close($con);
        }
        ?>
    </div>

        enter code here 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-08-08T09:15:33.807

如果您在 echo 语句中回显一个变量，您可以执行以下操作：

```
echo "foo " . $bar . "!"; 
```

这称为连接字符串。

如果您希望稍后使用它，您可以通过在 while 循环中使用以下内容将所有结果放入一个数组中

```
while($row = mysql_fetch_array($result)) {
   $useLaterOn[] = $row;
  } 
```

希望这会有所帮助:)

# apache - php 会话 - 是否可以触发由不同用户执行的服务器脚本而不是 www-data？

> ID：14731749
> 
> 赞同：-1
> 
> 时间：2013-02-06T14:44:49.417
> 
> 标签：apache, php

我在灯 ubuntu 云服务器（亚马逊 ec2）上运行 php+mysql 站点。我使用 php 会话。

对于每个会话（SID），我需要创建一个临时文件夹，它是 www 的子目录，并以会话 ID 作为其名称（不可预测，因此无法预先创建）。例如：/var/www/fileStore/s35S10nT3Mp/。

我稍后将通过 javascript（客户端）函数访问这些文件夹中的文件。

我的工作假设是：

1.  php代码执行（或调用）的任何内容都将在用户www-data（apache php用户）下运行
2.  客户端 javascript 无法访问 OUTSIDE www 的子目录（例如：/var/outsideFileStore/s35S10nT3Mp/，其中 webroot = public_html = /var/www）

我在 www 的子目录中授予用户 www-data 写入权限时存在安全问题，因为这会使这些文件夹中的服务器和数据过于暴露。

我想知道一个 php 会话是否可以触发（或调用）在另一个用户（将在 /var/www/fileStore/ 中获得写权限）而不是 www-data 下运行的服务器脚本/进程。然后，此过程将创建（和垃圾收集）这些临时文件夹。

推论：如果这不能在 apache 下完成，tomcat 会有帮助吗（如果我在 java 下运行 php 而不是 http_server）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:10:13.507

您可以使用此备用用户拥有的身份位编译可执行文件。PHP 脚本将执行该程序，而该程序又可以简单地运行您选择的实际 PHP 脚本。

该程序也可以用 Perl 编写——它是 Linux 系统允许具有标识位的唯一脚本语言。

# c++ - MPI_Comm_spawn 和 MPI_Reduce

> ID：14731751
> 
> 赞同：4
> 
> 时间：2013-02-06T14:45:02.373
> 
> 标签：c++, mpi

我有两个程序。产生执行一些计算的“工人”的“主人”，我希望主人从工人那里得到结果并存储总和。我正在尝试使用 MPI_Reduce 从工作人员那里收集结果，工作人员使用 MPI_Reduce 发送给主人 MPI_Comm。我不确定这是否正确。这是我的程序：

掌握：

```
#include <mpi.h>
#include <iostream>
using namespace std;

int main(int argc, char *argv[]) { 
    int world_size, universe_size, *universe_sizep, flag; 

    int rc, send, recv;

    // intercommunicator
    MPI_Comm everyone;

    MPI_Init(&argc, &argv); 
    MPI_Comm_size(MPI_COMM_WORLD, &world_size); 

    if (world_size != 1) {
        cout << "Top heavy with management" << endl;
    } 

    MPI_Attr_get(MPI_COMM_WORLD, MPI_UNIVERSE_SIZE, &universe_sizep, &flag);  
    if (!flag) { 
        cout << "This MPI does not support UNIVERSE_SIZE. How many processes total?";
        cout << "Enter the universe size: ";
        cin >> universe_size; 
    } else {
        universe_size = *universe_sizep;
    }
    if (universe_size == 1) {
        cout << "No room to start workers" << endl;
    }

    MPI_Comm_spawn("so_worker", MPI_ARGV_NULL, universe_size-1,  
             MPI_INFO_NULL, 0, MPI_COMM_SELF, &everyone,  
             MPI_ERRCODES_IGNORE);

    send = 0;

    rc = MPI_Reduce(&send, &recv, 1, MPI_INT, MPI_SUM, 0, everyone);

    // store result of recv ...
    // other calculations here
    cout << "From spawned workers recv: " << recv << endl;

    MPI_Finalize(); 
    return 0; 
} 
```

工人：

```
#include <mpi.h>
#include <iostream>
using namespace std;

int main(int argc, char *argv[]) { 

    int rc, send,recv;

    int parent_size, parent_id, my_id, numprocs; 
    // parent intercomm
    MPI_Comm parent; 
    MPI_Init(&argc, &argv); 

    MPI_Comm_get_parent(&parent); 
    if (parent == MPI_COMM_NULL) {
        cout << "No parent!" << endl;
    }
    MPI_Comm_remote_size(parent, &parent_size); 
    MPI_Comm_rank(parent, &parent_id) ; 
    //cout << "Parent is of size: " << size << endl;
    if (parent_size != 1) {
        cout << "Something's wrong with the parent" << endl;
    }

    MPI_Comm_rank(MPI_COMM_WORLD, &my_id) ;     
    MPI_Comm_size(MPI_COMM_WORLD, &numprocs) ;  

    cout << "I'm child process rank "<< my_id << " and we are " << numprocs << endl;
    cout << "The parent process rank "<< parent_id << " and we are " << parent_size << endl;

    // get value of send
    send = 7; // just an example
    recv = 0;

    rc = MPI_Reduce(&send, &recv, 1, MPI_INT, MPI_SUM, parent_id, parent);
    if (rc != MPI_SUCCESS)
        cout << my_id << " failure on mpi_reduce in WORKER" << endl;

    MPI_Finalize(); 
    return 0; 
} 
```

我编译了两者并像这样执行（mpic++ for osx）：

```
mpic++ so_worker.cpp -o so_worker
mpic++ so_master.cpp -o so_master
mpirun -n 1 so_master 
```

这是运行产生工人的主人的正确方法吗？

在 master 中，我总是从 MPI_Reduce 得到 0。我可以使用来自 intercommunicators 的 MPI_reduce 还是应该使用来自 worker 的 MPI_Send 和来自 master 的 MPI_Recv？我真的不确定为什么它不起作用。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T16:30:11.267

`MPI_Comm_get_parent`返回包含原始进程和所有衍生进程的父交互器。在这种情况下，调用`MPI_Comm_rank(parent, &parent_id)`不会返回父进程的等级，而是返回当前进程在交互器的本地组中的等级：

```
I'm child process rank 0 and we are 3
The parent process **rank 0** and we are 1
I'm child process rank 1 and we are 3
The parent process **rank 1** and we are 1
I'm child process rank 2 and we are 3
The parent process **rank 2** and we are 1 
```

（观察突出显示的值有何不同——人们会期望父进程的等级应该相同，不是吗？）

这就是为什么`MPI_Reduce()`调用不会成功的原因，因为所有工作进程都为根等级指定了不同的值。由于最初有一个主进程，它在远程组中的排名`parent`将是`0`，因此所有工作人员都应指定`0`为根`MPI_Reduce`：

```
//
// Worker code
//
rc = MPI_Reduce(&send, &recv, 1, MPI_INT, MPI_SUM, 0, parent); 
```

这只是问题的一半。另一半是扎根的集体操作（例如`MPI_REDUCE`）与交互器的操作有点不同。首先必须决定两个组中的哪一个将托管根。一旦确定了根组，根进程必须作为 in 的值传递，`MPI_ROOT`并且根组中的所有其他进程都必须传递。即接收组中的进程根本不参与根集体操作。由于编写了主代码，因此主组中可能只有一个进程，因此将主代码中的调用更改为：`root``MPI_REDUCE``MPI_PROC_NULL``MPI_Reduce`

```
//
// Master code
//
rc = MPI_Reduce(&send, &recv, 1, MPI_INT, MPI_SUM, MPI_ROOT, everyone); 
```

请注意，主节点本身也不参与归约操作，例如`sendbuf`(`&send`在这种情况下) 的值是无关紧要的，因为根不会发送要归约的数据 - 它只是收集对来自的值执行的归约的结果远程组中的进程。

# php - PHP SimpleXMLIterator

> ID：14731752
> 
> 赞同：2
> 
> 时间：2013-02-06T14:45:04.960
> 
> 标签：php

我正在使用 SimpleXMLIterator 来解析一些 XML。执行 print_r 表明从 XML 创建的 SimpleXMLIterator 对象是这样的：{

```
[@attributes] => Array
    (
        [id] => abc
        [type] => a
        [timestamp] => 2001-12-12
    )

[place] => US
[name] => Pete
[dob] => SimpleXMLIterator Object
    (
        [dd] => 03
        [mm] => 05
        [yyyy] => 1973
    ) 
```

}

它还包含一个 dob SimpleXMLIterator Object - 即 XML 标记的子元素。

我使用以下代码迭代此对象，这是递归的，因为我无法确定每个 XML 标记的深度：

```
function _prepareSimpleXMLIteratorObj(SimpleXMLIterator $xmlIterator) {

foreach ($xmlIterator as $key => $value){
    // Count returns the number of children
    if ($value->count() > 0) {      
        $this->_prepareSimpleXMLIteratorObj($value);
    } else {
        $this->assocArray[$key] = (string)$value;
    }
}
} 
```

assocArray 是类的成员变量。这会从 Object 生成一个关联数组。

问题是当我使用 $value->hasChildren() 而不是 $value->count() 我得到错误，即使 $value->count() 为 dob 返回 3？任何想法我做错了什么？如果是的话

```
if (($value instanceof SimpleXMLIterator)) 
```

我得到了错误，即使 dob 显然是一个 SimpleXMLIterator 对象？

此方法有效，但我只是想知道 hasChildren 和 instanceof？

这是示例 XML

```
<tag id="abc" type="a" timestamp="2001-12-12">
    <place>US</place>
    <name>Pete</name>
    <dob>
        <dd>03</dd>
        <mm>05</mm>
        <yyyy>1973</yyyy>
    </dob>
</tag> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:14:54.537

hasChildren 方法对你不起作用，因为它没有按照你的想法做。关键在于文档中的这一行：

> 此方法检查当前 SimpleXMLIterator 元素是否具有子元素。

当它说**“当前”时，它表示****current()**函数返回的实际 SimpleXMLElement，就好像您正在使用 foreach 进行迭代一样。记住 SimpleXMLIterator 被设计成一个“迭代器”

因此，当您的算法到达 dob 节点并调用 $value->hasChildren() 时，它会真正检查项目 $value->current() 是否有任何子节点。因此，在您的示例中，它检查节点 /tag/dob/dd 是否有任何子节点，但它没有。

# matlab - 克服 FFT 瓶颈的途径？

> ID：14731756
> 
> 赞同：1
> 
> 时间：2013-02-06T14:45:20.970
> 
> 标签：matlab, optimization, fft

我花了一些时间优化我的算法，而我的准串行（无显式并行化）代码将 95% 的时间花在执行`fftn`密集单（浮点）矩阵乘法的行上

```
for k=1:10
    q = q +  x{k}.* fftn( mArray{k}.* ifftn( mOther{k} .* z ) ); 
```

尽管性能提升可以忽略不计，但我尝试为 FFT 添加一些智慧。

我不知道如何加快这段代码的速度，你认为编译 FFTW 会导致性能提升吗？我正在将 Matlab 2012b 用于第三代 i7。

**编辑**

我似乎打错了，x 取决于 k，否则就太容易了。我希望有人可以谈论优化实际的fft。

```
 q = q +  x.* fftn( mArray{k}.* ifftn( mOther{k} .* z ) );
    q = q +  x{k}.* fftn( mArray{k}.* ifftn( mOther{k} .* z ) ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:31:37.490

您应该在 fftn 转换和乘以 xeg 之前将 q 加在一起

```
A = 0;
for k=1:10
     A = A + mArray{k}.* ifftn( mOther{k} .* z );
end
q = q + x.*fftn(A); 
```

IMO 这应该是等效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:54:08.083

您是否考虑过使用卷积而不是来回 FFT？

# javascript - 从地图外部单击传单 openPopup 方法

> ID：14731757
> 
> 赞同：2
> 
> 时间：2013-02-06T14:45:24.853
> 
> 标签：javascript, jquery, leaflet

我在我的地图上使用了一个名为 Leafpile 的 Leaflet 和 Leafleat 插件。基本上它是来自数据库的结果集，该地图的 javascript 代码如下：

```
var cmAttr = '&copy; 2013 OpenStreetMap',
cmUrl = 'http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/{styleId}/256/{z}/{x}/{y}.png';

var minimal   = L.tileLayer(cmUrl, {styleId: 1, attribution: cmAttr})

var southWest = new L.LatLng(3.8642546157214084, -199.86328125);
var northEast = new L.LatLng(73.12494524712693 , -24.08203125);
var bounds = new L.LatLngBounds(southWest, northEast);

var markers = new L.LeafpileGroup();
L.marker([40.91, -74.15]).bindPopup('The html content').addTo(markers),
L.marker([37.7, -121.90]).bindPopup('The html content').addTo(markers);

var map = L.map('map', {
    center: [34.488616,-97.8692325],
    minZoom: 4,
    scrollWheelZoom: false,
    zoom: 5,
    layers: [minimal, markers]
});

map.setMaxBounds(bounds); 
```

我遇到的问题是，当我单击 html 中的结果链接时，我想在地图上打开一个弹出窗口（map.openPopup(popup) 方法或类似方法？！）。

```
<ul id="set">
<li><a href="#">RESULT #1</a></li>
<li><a href="#">RESULT #2</a></li>
</ul> 
```

我已经尝试了一切，但没有成功。我想在我的 jQuery 函数中绑定这个事件，比如：

```
$(document.body).on("click",'#set a', function(e) {
    //other code that I need
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T18:22:39.817

我对 stackoverflow 很陌生，但我找到了一个可行且看起来足够高效的解决方案。

您应该先创建一个空数组

```
var array =[] 
```

位置数组应包含您的所有坐标。我用具有相应 latlng 值的位置属性的对象填充了 locationarray。

```
locationarray= [{name:"Hotel London",location:[51.5, -0.09]},{name:"Hotel Barnaby",location:[51.49, -0.088]},{name:"Hotel Rendelliare",location:[51.51, -0.12]},{name:"Hotel Francion",location:[51.52, -0.089]},{name:"Hotel Waterloo",location:[51.5, -0.11]}] 
```

然后用标记对象填充 vararray。

```
for(i=0;i<locationarray.length;i++){

vararray[i] = L.marker(locationarray[i].location).addTo(map);
vararray[i].bindPopup('<div id="hotel'+i+'">' + locationarray[i].name + '</div>')

} 
```

然后使用 for 循环创建您的 div。在 for 循环中，为 div 分配一个 onclick 处理程序或任何您想要触发函数的内容。将您用于迭代的值传递给函数。

```
for(i=0,len = objarray.length; i<len ;i++){
$('#viewportRS').append('<div onclick="$.clicked('+i+')" class="hotels" id="'+i+'">'+ whatevervar +'</div>')} 
```

该函数应该排除数字参数并在 vararray 中的该索引处调用 openPopup()

```
$.clicked = function(id){

vararray[id].openPopup()

} 
```

我已经对其进行了多次测试，并且可以正常工作。因此，如果有什么问题，请告诉我们。

# tmux - 如何在拖尾日志时清除 tmux 屏幕？

> ID：14731760
> 
> 赞同：17
> 
> 时间：2013-02-06T14:45:30.860
> 
> 标签：tmux, iterm

我将 tmux 与 iTerm2 一起使用。

使用 Ctrl-L 清除屏幕在我使用 bash 时有效，但在我跟踪服务器日志时无效。我该如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-17T15:31:11.860

您可以使用清除当前缓冲区，`send-keys -R`但请记住，在该缓冲区内运行的应用程序不会注意到缓冲区内容已被擦除。

[参考](http://comments.gmane.org/gmane.comp.terminal-emulators.tmux.user/2492)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-12T13:20:24.637

在 OSX（终端，我相信 iTerm2）中，CMD+K 清除并删除回滚，但我不确定这在拖尾或 tmux 中是否有效。

几个链接可能有你的答案：

*   [https://coderwall.com/p/rkstvg](https://coderwall.com/p/rkstvg)
*   [https://apple.stackexchange.com/questions/31872/how-do-i-reset-the-scrollback-in-the-terminal-via-a-shell-command](https://apple.stackexchange.com/questions/31872/how-do-i-reset-the-scrollback-in-the-terminal-via-a-shell-command)

此外，@chepner 建议暂停该命令，这给了我将其添加为键绑定的想法（注意：我已经在 Linux 上对此进行了测试，但我没有 OSX。第一个链接似乎表明`clear-history`可能有效）：

```
bind-key -n C-l send-keys C-z \; send-keys " reset && fg > /dev/null" \; send-keys "Enter" 
```

将此添加到您`~/.tmux.conf`可以执行的操作`CTRL+l`中，这会将所需的键和命令发送到终端以使其自动化。

`reset && fg`以空格为前缀以将其从历史记录中排除。

停止显示`> /dev/null`原始 tail 命令，但这可能很有用，因此如果您想在清除后查看它，可以将其删除。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-06T18:52:07.150

Ctrl-L 绑定到一个`readline`命令。但是，当您运行跟踪日志的命令时，`bash`不会接收键盘输入。您可以使用 Ctrl-Z 暂停尾部，使用 Ctrl-L 清除屏幕，然后使用 恢复尾部`fg`。

这独立于`tmux`; 我不认为`tmux`有任何类似`clear-pane`命令的东西，而是依靠外壳为您处理。

# image - 使用 matlab 在扫描的 ECG 中查找局部最小值和最大值

> ID：14731771
> 
> 赞同：1
> 
> 时间：2013-02-06T14:45:51.123
> 
> 标签：image, matlab, image-processing

我正在尝试使用 matlab 处理扫描的心电图图像（我是一个完整的新手）。我想：- 1.查找并突出显示心电图中的所有局部最大值和最小值 2.计算并显示连续最小值和最大值之间的距离我使用的是来自互联网的 jpeg 图像。将其转换为灰度后，我不知道该怎么做。我已经尝试了
[如何在 MATLAB 中的图像中找到局部最大值？](https://stackoverflow.com/questions/1856197/how-can-i-find-local-maxima-in-an-image-in-matlab) [http://www.mathworks.in/matlabcentral/answers/58002-how-to-find-local-maxima-and-minima-of-a-noisy-ecg](http://www.mathworks.in/matlabcentral/answers/58002-how-to-find-local-maxima-and-minima-of-a-noisy-ecg) 但图像保留了非最大值和非最小值点.Will 在此方面的任何帮助（或关于我如何在 matlab 上更好的建议）将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:15:02.223

当您似乎正在搜索信号中的尖峰时，我建议您执行以下操作：

假设你有一个向量叫做`signal`

```
treshold = std(signal); %Multiply with a constant to get a nice result
peak = signal>mean(signal) + treshold;
dip = signal>mean(signal) - treshold; 
```

如果信号始终处于大致相同的水平，这可以为您提供所有尖峰的位置，否则您需要在信号的一部分而不是完整信号上运行它。

在你有了峰和谷的位置之后，分析它们应该不会太难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:07:29.447

要获得图像的局部最小值，我：

```
minima=I(1:end-2,2:end-1)>I(2:end-1,2:end-1) && I(3:end,2:end-1)>I(2:end-1,2:end-1) && I(2:end-1,1:end-2)>I(2:end-1,2:end-1) && I(2:end-1,3:end)>I(2:end-1,2:end-1); 
```

因此，您得到一个矩阵，最小值为 1，无最小值为 0（请注意，边框已删除）

获取 x 和 y 的最小列表

```
[x,y]=find(minima);
x=x+1;y=y+1; %Adding the removed border 
```

要获得最小值：

```
J=I(2:end-1,2:end-1);
val=J(minima(:)); 
```

对于你的第二个问题，我不明白你想要什么

# ms-access - 如果日期在未来有弹出框 - Access 2007 中的宏

> ID：14731775
> 
> 赞同：2
> 
> 时间：2013-02-06T14:46:01.273
> 
> 标签：ms-access, ms-access-2007

我需要一个宏脚本，这样如果用户在我的表单中输入一个未来的日期，那么一个消息框会通知他们他们不能输入未来的日期？

我根本不明白如何做到这一点，因为我对 Access 中的宏完全陌生！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:22:18.590

最简单的：

```
Private Sub ADate_BeforeUpdate(Cancel As Integer)
    If Me.ADate > Date Then
        ''Me.Undo
        Cancel = True
        MsgBox "Earlier date, please."
    End If
End Sub 
```

但是，如果您已经有验证集，那将具有优先权，因此您应该使用 Validation Text 属性、Form Error 事件或删除验证。

表格错误：

```
Private Sub Form_Error(DataErr As Integer, Response As Integer)
      If DataErr = 2107 Then
         MsgBox "There was an error."
         Response = acDataErrContinue
      End If
End Sub 
```

# powershell - Powershell：如何使用 select-object 获取一组动态属性？

> ID：14731782
> 
> 赞同：4
> 
> 时间：2013-02-06T14:46:22.817
> 
> 标签：powershell, powershell-2.0

我将 powershell 与 sharepoint 07 结合使用来列出一些内容。我试图允许（高级）用户指定他们想要显示的字段。
例如，我可以按如下方式运行我的代码：
.\psextractor -fields "Type|name|User
Desc想知道这是否可能。如果没有，有没有办法在不使用 create-object cmdlet 的情况下做到这一点？
我的代码：

```
#$Args
if($Args[0] -eq "-fields" -and $Args.Count -ge 2){
    $flds = $Args[1].split("|")
}

#Later in code
 $web.Lists | foreach{
    $lib = $_
    if($lib.BaseType -eq [Microsoft.SharePoint.SPBaseType]::DocumentLibrary 
           -and $lib.BaseTemplate -eq [Microsoft.SharePoint.SPListTemplateType]::DocumentLibrary){
        $lib.Items |  Select-Object DisplayName,
                  @{n=$flds[0];e={$_.Item($flds[0])}} ,
                  @{n=$flds[1];e={$_.Item($flds[1])}}
                  #, etc, etc

    }

 } 
```

**编辑：** 我在下面使用了 Graimer 的解决方案并进行了一些调整

**解决方案：**

```
param([object[]]$flds)
$props=@() #globally declared since some of this is done in functions later

$mflds = $("Author","Created","Modified","Modified By") #mandatory fields
$mflds | foreach{
    if($flds -notcontains $_){
        $flds += $_
    }
}
#had to use regular for loop because the $_ identifier was conflicting
for ($i =0; $i -lt $flds.Count; $i++) { 
    $props += @{n=$flds[$i];e=([Scriptblock]::Create("`$_[`$flds[$i]]"))}
}
#other mandatory custom fields
    #the create method could have been used here
$props += @{n="FileName";e={"$($_.Item('Name'))"}}
$props += @{n="Url";e={"$wburl/$($_.Url)"}}

#Later in code
 $web.Lists | foreach{
    $lib = $_
    if($lib.BaseType -eq [Microsoft.SharePoint.SPBaseType]::DocumentLibrary 
           -and $lib.BaseTemplate -eq [Microsoft.SharePoint.SPListTemplateType]::DocumentLibrary){
        $lib.Items |  Select-Object -property $props

    }

 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T15:19:37.307

我建议将参数作为普通`string[]`（数组）参数，并使用它来创建哈希表数组（自定义表达式`Select-Object`）。然后为哈希表提供`Select-Object`. 前任：

```
param (
    [String[]]$Fields
)

#Create property-array for Select-Object
$props = @()

#Add mandatory displayname property
$props += @{n="DisplayName";e=([Scriptblock]::Create("`$_.DisplayName"))}

#Add user-defined fields
foreach ($field in $Fields) { 
    $props += @{n=$field;e=([Scriptblock]::Create("`$_.Item($field)"))}
}

#Later in code
$web.Lists | foreach{
    $lib = $_
    if($lib.BaseType -eq [Microsoft.SharePoint.SPBaseType]::DocumentLibrary  `
    -and $lib.BaseTemplate -eq [Microsoft.SharePoint.SPListTemplateType]::DocumentLibrary)
    {
        $lib.Items | Select-Object -Property $props
    }

 }
#Usage: .\psextractor -Fields "Type", "Name", "User", "Desc"
#This will list all fields specified after '-Fields' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:17:45.437

你可以这样尝试：

```
param([object[]]$fields)

$fields += "DisplayName"

 $web.Lists | foreach{
    $lib = $_
    if($lib.BaseType -eq [Microsoft.SharePoint.SPBaseType]::DocumentLibrary 
           -and $lib.BaseTemplate -eq [Microsoft.SharePoint.SPListTemplateType]::DocumentLibrary){
        $lib.Items |  Select-Object -property $fields
    }

 } 
```

像这样调用你的函数：

```
myfunction.ps1 -fields Type,name,User,Description 
```

# python-2.7 - 在 pydev 中未检测到 VIRTUAL_ENV

> ID：14731786
> 
> 赞同：0
> 
> 时间：2013-02-06T14:46:26.950
> 
> 标签：python-2.7, pydev, virtualenv

我在 Debian Squeeze 上使用带有 Eclipse 的 pydev 和带有 python2.7 的 virtualenv 我的 python 脚本需要该变量`os.environ['VIRTUAL_ENV']`，但`VIRTUAL_ENV`调试时没有键。但是，如果我在终端中输入：

```
. /my_virtualenv/bin/activate
python
import os
os.environ['VIRTUAL_ENV'] 
```

然后我可以看到`VIRTUAL_ENV`变量中的`os.environ` 任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:16:50.993

似乎 virtualenv 将`VIRTUAL_ENV`变量设置为它的激活脚本的一部分。Pydev 不运行该激活脚本，因此它不知道该环境变量。

您可以在运行配置中设置它。

1.  单击运行图标旁边的小向下箭头。
2.  单击“运行配置...”
3.  在左侧窗格中，选择要修改的运行配置。
4.  选择右侧的“环境”选项卡。
5.  单击“新建”并`VIRTUAL_ENV`输入您想要的名称和值。

# php - 如何爬取登录保护页面？

> ID：14731787
> 
> 赞同：3
> 
> 时间：2013-02-06T14:46:28.187
> 
> 标签：php

我想抓取网站搜索信息，我的脚本适用于普通页面，但如何抓取登录保护页面？我有登录信息我如何用 url 发送这些信息？我的代码：

```
crawl_page("http://www.site.com/v3/search/results?start=1&sortCol=MyDefault");
function crawl_page($url) {
    $html = file_get_contents($url);
    preg_match_all('~<a.*?href="(.*?)".*?>~', $html, $matches);
    $str = "http://www.site.com/v3/features/id?Profile=";
    foreach($matches[1] as $newurl) {
       if (strpos($newurl, $str) !== false) {
        $my_file = 'link.txt';
        $handle = fopen($my_file, 'a') or die('Cannot open file:  '.$my_file);
        $numberNewline = $newurl  . PHP_EOL;
        fwrite($handle, $numberNewline);
       }
    }
} 
```

任何帮助谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:22:40.500

我的回答仅适用于表单身份验证（这是最常见的身份验证形式）。

基本上，当您浏览一个网站时，您会在其上打开一个“会话”。当您在网站上登录时，您的会话会得到“身份验证”，并且基于此您被授予任何地方的访问权限。

由于存储在 cookie 中的会话 ID，您的浏览器可以识别到服务器的相应会话。

所以你必须先浏览登录页面，然后再浏览你想要的页面，过程中不要忘记发送cookie。cookie 是您浏览的所有页面之间的链接。

我实际上遇到了你不久前遇到的同样的问题，并且写了一个类来做到这一点，而不必记住这个 cookie 的东西。

快看类，不重要，但看好下面的例子。它允许您提交实现 CSRF 保护的表单。

此类基本上具有以下功能： - 符合基于 CSRF 令牌的保护 - 发送“通用”用户代理。一些网站拒绝不与用户代理通信的查询 - 发送推荐人标头。一些网站拒绝不与推荐人通信的查询（这是另一种反 csrf 保护） - 在调用中存储 cookie

文件：WebClient.php

```
<?php
/**
 * Webclient
 *
 * Helper class to browse the web
 *
 * @author Bgi
 */

class WebClient
{
    private $ch;
    private $cookie = '';
    private $html;

    public function Navigate($url, $post = array()) 
    {
        curl_setopt($this->ch, CURLOPT_URL, $url);
        curl_setopt($this->ch, CURLOPT_COOKIE, $this->cookie);
        if (!empty($post)) {
            curl_setopt($this->ch, CURLOPT_POST, TRUE);
            curl_setopt($this->ch, CURLOPT_POSTFIELDS, $post);
        }
        $response = $this->exec();
        if ($response['Code'] !== 200) {
            return FALSE;
        }
        //echo curl_getinfo($this->ch, CURLINFO_HEADER_OUT);
        return $response['Html'];
    }

    public function getInputs() 
    {
        $return = array();

        $dom = new DOMDocument();
        @$dom->loadHtml($this->html);
        $inputs = $dom->getElementsByTagName('input');
        foreach($inputs as $input)
        {
            if ($input->hasAttributes() && $input->attributes->getNamedItem('name') !== NULL)
            {
                if ($input->attributes->getNamedItem('value') !== NULL)
                    $return[$input->attributes->getNamedItem('name')->value] = $input->attributes->getNamedItem('value')->value;
                else
                    $return[$input->attributes->getNamedItem('name')->value] = NULL;
            }
        }

        return $return;
    }

    public function __construct()
    {
        $this->init();
    }

    public function __destruct()
    {
        $this->close();
    }

    private function init() 
    {
        $this->ch = curl_init();
        curl_setopt($this->ch, CURLOPT_USERAGENT, "Mozilla/6.0 (Windows NT 6.2; WOW64; rv:16.0.1) Gecko/20121011 Firefox/16.0.1");
        curl_setopt($this->ch, CURLOPT_FOLLOWLOCATION, TRUE);
        curl_setopt($this->ch, CURLOPT_MAXREDIRS, 5);
        curl_setopt($this->ch, CURLINFO_HEADER_OUT, TRUE);
        curl_setopt($this->ch, CURLOPT_HEADER, TRUE);
        curl_setopt($this->ch, CURLOPT_AUTOREFERER, TRUE);
    }

    private function exec() 
    {
        $headers = array();
        $html = '';

        ob_start();
        curl_exec($this->ch);
        $output = ob_get_contents();
        ob_end_clean(); 

        $retcode = curl_getinfo($this->ch, CURLINFO_HTTP_CODE);

        if ($retcode == 200) {
            $separator = strpos($output, "\r\n\r\n");

            $html = substr($output, $separator);

            $h = trim(substr($output,0,$separator));
            $lines = explode("\n", $h);
            foreach($lines as $line) {
                $kv = explode(':',$line);

                if (count($kv) == 2) {
                    $k = trim($kv[0]);
                    $v = trim($kv[1]);
                    $headers[$k] = $v;
                }
            }
        }

        // TODO: it would deserve to be tested extensively.
        if (!empty($headers['Set-Cookie']))
            $this->cookie = $headers['Set-Cookie'];

        $this->html = $html;

        return array('Code' => $retcode, 'Headers' => $headers, 'Html' => $html);
    }

    private function close()
    {
        curl_close($this->ch);
    }
} 
```

我该如何使用它？

在这个例子中，我登录到一个网站，然后浏览到一个包含上传文件的表单的页面，然后我上传文件：

```
<?php
    require_once('WebClient.php');
    $url = 'http://example.com/administrator/index.php'; // This a Joomla admin

    $wc = new WebClient();
    $page = $wc->Navigate($url);
    if ($page === FALSE) {
         die('Failed to load login page.');
    }

    echo('Logging in...');

    $post = $wc->getInputs();
    $post['username'] = $username;
    $post['passwd'] = $passwd;

    $page = $wc->Navigate($url, $post);
    if ($page === FALSE) {
        die('Failed to post credentials.');
    }

  echo('Initializing installation...');

    $page = $wc->Navigate($url.'?option=com_installer');
    if ($page === FALSE) {
        die('Failed to access installer.');
    }

    echo('Installing...');

    $post = $wc->getInputs();
    $post['install_package'] = '@'.$file; // The @ specifies we are sending a file

    $page = $wc->Navigate($url.'?option=com_installer&view=install', $post);
    if ($page === FALSE) {
        die('Failed to upload file.');
    }

    echo('Done.'); 
```

Navigate() 方法返回 FALSE 或浏览页面的 HTML 内容。

哦，还有最后一件事：不要使用正则表达式来解析 HTML，这是错误的。对此有一个传奇的 StackOverflow 答案：请参见[此处](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:11:28.993

这在很大程度上取决于所使用的身份验证方法。最简单的一种是 HTTP Basic Auth。对于该方法，您只需要构建这样的上下文：

```
$context = stream_context_create(array(
    'http' => array(
        'header'  => "Authorization: Basic " . base64_encode("$username:$password")
    )
));
$data = file_get_contents($url, false, $context); 
```

这样，file_get_contents 将使用 HTTP 基本身份验证。

其他身份验证方法可能需要更多工作，例如通过 POST 向登录页面发送密码和存储会话 cookie。

# java - JPA：“arraylength 中操作数堆栈上的错误类型”

> ID：14731792
> 
> 赞同：0
> 
> 时间：2013-02-06T14:46:36.387
> 
> 标签：java, jpa, glassfish

我正在尝试使用 JPA 管理的以下实体在 glassfish 中部署 webapp。在数据库中，一个**int 数组**存储在**varchar**中，我在 setter/getter 中拆分/加入这个 String

```
@Entity
public class MyClass
    implements Serializable
    {
    private long id;
    private int arrayofInt[];
    (...)

    private static String join(int array[])
        {
        StringBuilder b=new StringBuilder();
        for(int i:array)
            {
            if(b.length()!=0) b.append(',');
            b.append(i);
            }
        return b.toString();
        }

    private static int[] split(String s)
        {
        String tokens[]=s.split("[,]");
        int array[]=new int[tokens.length];
        for(int i=0;i< tokens.length;++i)
            {
            array[i]=Integer.parseInt(tokens[i]);
            }
        return array;
        }

    @Column(name="fieldName")
    public String getArrayOfInt()
        {
        return join(arrayOfInt);
        }

    public void setArrayOfInt(String arrayOfInt)
        {
        this.arrayOfInt=split(arrayOfInt);
        }

    @Transient
    public int getCount()
        {
        return this.arrayOfInt.length;
        }
  (....)
  } 
```

当我的应用程序部署在 glassfish 中时，我收到以下错误：

> 远程故障：部署期间发生错误：准备应用程序时出现异常：MyClass.getCount()I 方法中数组长度中的操作数堆栈类型错误，偏移量为 12345。有关更多详细信息，请参阅 server.log。命令部署失败。

如果我将 getCount 替换为

```
 @Transient
    public int getCount()
        {
        return 0,
        } 
```

我收到另一个新错误：

> 远程故障：部署期间发生错误：准备应用程序时出现异常：MyClass.getArrayOfInt()Ljava/lang/String 方法中操作数堆栈上的类型错误；在偏移量 45678。有关更多详细信息，请参阅 server.log。命令部署失败。

我怎样才能解决这个问题 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:57:15.303

我更改了以下声明：

```
 private int arrayofInt[]; 
```

到

```
 private int _arrayofInt[];
 (...)
 public String getArrayOfInt()
        {
        return join(_arrayOfInt);
        } 
```

现在它工作正常......（？）

# c# - 一个简单的 Where 子句在 EF5 中停止工作

> ID：14731793
> 
> 赞同：2
> 
> 时间：2013-02-06T14:46:37.443
> 
> 标签：c#, entity-framework, entity-framework-5, where-clause

我有几个查询类似于下面的两个示例：

```
// Example 1:
var dataSeries = (from d in DataSeries
                  where d.Symbol == symbol
                  select d).FirstOrDefault();

// Example 2:
return Markets.Where(m => m.DataSeries == dataSeries).ToArray(); 
```

在我运行“从数据库更新模型......”之前，它工作得很好。现在，我收到了 NotSupportedException：

> 无法创建“MyTest.Symbol”类型的常量值。此上下文仅支持原始类型或枚举类型。

是的，我验证了那个*符号*和 d。*Symbol*（和 m. *DataSeries*和*dataSeries*）是相同的类型。

 *是的，我可以更改查询以使用 P/F 键关系，如下所示：

```
var dataSeries = (from d in DataSeries
                  where d.Symbol.Id == symbol.Id
                  select d).FirstOrDefault(); 
```

但是当对象关系工作得很好时，我真的不想将我的所有代码都更改为 P/F 键关系。

问题：如何让我的第一个示例再次工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:38:46.710

您不能在**针对数据库**`where`执行的 LINQ 查询中编写这样的子句。请记住，代码**将被转换为 SQL**并在数据库引擎上运行。

 ****那么，对于您的第一个示例，Entity Framework 如何知道如何比较复杂类型的两个实例`MyTest.Symbol`？EF 根本做不到，因为没有适合这种比较的 SQL。

您必须在`where`子句中指定数据库引擎能够理解的内容，这基本上是一个`WHERE`基于原始类型 ( `int`, `bigint`,...) 中的 ID 的 SQL 子句。

您*可以*使用从数据库中获取所有数据`.ToList()`，并将`where`子句应用于内存结果列表，因此`where`不必将子句转换为 SQL：

```
Markets.ToList().Where(m => m.DataSeries == dataSeries); 
```

但是您将失去数据库服务器的所有好处：大量使用内存（所有内容都在上下文中加载），性能不佳......等等。

你真的应该`where`对数据库执行，这意味着你必须使用原始类型进行比较：

```
Markets.Where(m => m.DataSeries.ID == dataSeries.ID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:57:15.787

您的示例不起作用，因为 EF 不支持 LINQ 查询中的对象比较，它不知道如何将其转换为 SQL 语句。

即使您首先使用 DataSeries.ToList() 将所有 DataSeries 提取到内存中，比较 d.Symbol == symbol 仍然不起作用，除非**symbol**属于加载的列表或者您必须覆盖 Equal 方法。这是因为默认情况下，两个对象只有在引用同一个实例时才相等。*****

# java - 缓冲图像成圆形

> ID：14731799
> 
> 赞同：1
> 
> 时间：2013-02-06T14:46:49.117
> 
> 标签：java, grails, image-processing, image-manipulation

我有一个来自字节数组的缓冲图像。怎么把图片变成圆形？庄稼？我不想要圆形，我想要原始图像变成圆形并显示

```
 def bufferedImage = imgSvc.convertByteArrayToBufferedImage(crop.image) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-02-06T16:57:29.760

如果`bufferedImage`是平方，则使用以下代码：

```
int width = bufferedImage.getWidth();
BufferedImage circleBuffer = new BufferedImage(width, width, BufferedImage.TYPE_INT_ARGB);
Graphics2D g2 = circleBuffer.createGraphics();
g2.setClip(new Ellipse2D.Float(0, 0, width, width));
g2.drawImage(bufferedImage, 0, 0, width, width, null); 
```

你得到一个圆形的裁剪图像`circleBuffer`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-09T07:36:32.307

这可以帮助

```
 g.setClip(new Ellipse2D.Float(x, y, w, h));
    g.drawImage(yourBufferedImage, x, y, w, h, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:39:47.933

您可以使用 Graphics 类的 setClip() 方法将图形上下文的绘图区域限制在特定区域。这样做的缺点是这种剪辑不会被消除锯齿。

有一些更高级的技巧可以实现更好看的结果，请参阅以下问题的答案：

[绘制图像的一部分（Java）](https://stackoverflow.com/questions/9677661/drawing-a-part-of-an-image-java)

[如何在Java中制作圆角图像](https://stackoverflow.com/questions/7603400/how-to-make-a-rounded-corner-image-in-java)

# java - android.content.contextwrapper.getsystemservice（Contextwrapper.java:386）处的 java.lang.nullpointerexception

> ID：14731803
> 
> 赞同：1
> 
> 时间：2013-02-06T14:46:57.090
> 
> 标签：java, android

我正在使用自定义日期和时间创建通知服务，但我不能这样做。我下载了这个代码[http://blog.blundell-apps.com/notification-for-a-user-chosen-time/](http://blog.blundell-apps.com/notification-for-a-user-chosen-time/)并且工作正常，但是当我在我的项目中包含代码时不起作用。

我有这个代码

```
package com.blundell.tut.service.task;

import java.util.Calendar;

import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

import com.blundell.tut.service.NotifyService;

/**
 * Set an alarm for the date passed into the constructor
 * When the alarm is raised it will start the NotifyService
 * 
 * This uses the android build in alarm manager *NOTE* if the phone is turned off this alarm will be cancelled
 * 
 * This will run on it's own thread.
 * 
 * @author paul.blundell
 */
public class AlarmTask implements Runnable{
    // The date selected for the alarm
    private final Calendar date;
    // The android system alarm manager
    AlarmManager am;
    // Your context to retrieve the alarm manager from
    private final Context contextt;

    public AlarmTask(Context context, Calendar date) {
        Log.v("AlarmTask", "AlarmTask");
        this.contextt = context;
        this.am = (AlarmManager) context.getSystemService(contextt.ALARM_SERVICE);
        this.date = date;
    }

    public void run() {
        Log.v("AlarmTask", "run");
        // Request to start are service when the alarm date is upon us
        // We don't start an activity as we just want to pop up a notification into the system bar not a full activity
        Intent intent = new Intent(contextt, NotifyService.class);
        intent.putExtra(NotifyService.INTENT_NOTIFY, true);
        PendingIntent pendingIntent = PendingIntent.getService(contextt, 0, intent, 0);

        // Sets an alarm - note this alarm will be lost if the phone is turned off and on again
        am.set(AlarmManager.RTC, date.getTimeInMillis(), pendingIntent);
    }
} 
```

在这一行我得到一个错误

```
this.am = (AlarmManager) context.getSystemService(contextt.ALARM_SERVICE); 
```

我从这个类发送de context

```
package com.blundell.tut.service;

import java.util.Calendar;

import android.app.Service;
import android.content.Intent;
import android.os.Binder;
import android.os.IBinder;
import android.util.Log;

import com.blundell.tut.service.task.AlarmTask;

public class ScheduleService extends Service {

    /**
     * Class for clients to access
     */
    public class ServiceBinder extends Binder {
        ScheduleService getService() {
            return ScheduleService.this;
        }
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        return START_STICKY;
    }

    @Override
    public IBinder onBind(Intent intent) {
        return mBinder;
    }

    // This is the object that receives interactions from clients. See
    private final IBinder mBinder = new ServiceBinder();

    /**
     * Show an alarm for a certain date when the alarm is called it will pop up a notification
     */
    public void setAlarm(Calendar c) {
        // This starts a new thread to set the alarm
        // You want to push off your tasks onto a new thread to free up the UI to carry on responding
        new AlarmTask(this, c).run();
    }
} 
```

我得到这个错误

```
java.lang.nullpointerexception 
   at android.content.contextwrapper.getsystemservice(Contextwrapper.java:386) 
```

对不起我的英语不好 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:04:18.357

如果您只想在未来的某个时间点发出通知，那么您只需要使用`AlarmManager`、设置 a`BroadcastReceiver`并`IntentService`从中开始。

以下是一些代码片段：

[如果应用程序休眠大约 1 天，则第二天不会调用 AlarmManager](https://stackoverflow.com/questions/14498171/alarmmanager-not-called-next-day-if-the-app-sleeps-for-abt-1-day/14498678#14498678)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:05:12.627

在这一行：

```
this.am = (AlarmManager) context.getSystemService(contextt.ALARM_SERVICE); 
```

您应该以静态方式访问 ALARM_SERVICE，请尝试以下操作：

```
this.am = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE); 
```

此外，您的调用上下文应该可以通过`this.getBaseContext()`或访问`this.getApplicationContext`

即你可以写：

```
this.am = (AlarmManager) this.getBaseContext.getSystemService(Context.ALARM_SERVICE); 
```

# arrays - 如何在node.js中使用aysnc模块循环两个数组

> ID：14731805
> 
> 赞同：0
> 
> 时间：2013-02-06T14:46:59.727
> 
> 标签：arrays, node.js, asynchronous

我想遍历一个数组，然后将一些数据写入数据库。下面的代码显示了我将如何使用 for 循环以非异步方式执行此操作。我知道这不是首选的方法。

```
for(var x = 0;x < tt.matches.length;x++) //Match each player with a match and a playerId     from the tournament tree
    {
        if(tt.matches[x].p[0] !== -1)
        {
            var tmId = JSON.stringify(tt.matches[x].id);
            Player.update({ _id : grUpd.players[y] },{ tournamentMatchId : tmId, treeId : tt.matches[x].p[0], opponent : tt.matches[x].p[1] },{ safe : true }, function (err) {
                if(err)
                {
                    console.log(err);
                }
            });
            y++;
        }
        if(tt.matches[x].p[0] === -1)
        {
            byes++;

        }
        if(tt.matches[x].p[1] !== -1)
        {
            var tmId = JSON.stringify(tt.matches[x].id);
            Player.update({ _id : grUpd.players[y] },{ tournamentMatchId : tmId, treeId : tt.matches[x].p[1], opponent : tt.matches[x].p[0] },{ safe : true }, function (err) {
                if(err)
                {
                    console.log(err);
                }
            });
            y++;
        }
        if(tt.matches[x].p[1] === -1)
        {
            byes++;
        }
 } 
```

然后我需要执行以下操作，再次以“传统方式”显示。

```
 for(var x = 0;x < plyrs.length;x++)
 {
     var nextMatch = JSON.stringify(tt.upcoming(plyrs[x].treeId)) ;
 Player.update({ _id : plyrs[x]._id },{ tournamentMatchId : nextMatch },{ safe : true }, function (err) {
        if(err)
            {
            console.log(err);
        }
    });
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:25:10.427

您可以通过保留打开的 DB 调用的计数器，然后在所有调用都返回时调用程序的下一阶段来做到这一点。见下文。

但是，这种方法存在一个理论上的漏洞，即如果您的任何`Player.update()`调用在 process.nextTick 之前返回，则可能会提前触发完成条件。

```
var activeCalls = 0;
for(var x = 0;x < tt.matches.length;x++) //Match each player with a match and a playerId     from the tournament tree
{
    if(tt.matches[x].p[0] !== -1)
    {
        var tmId = JSON.stringify(tt.matches[x].id);
        activeCalls++;
        Player.update({ _id : grUpd.players[y] },{ tournamentMatchId : tmId, treeId : tt.matches[x].p[0], opponent : tt.matches[x].p[1] },{ safe : true }, function (err) {
            activeCalls--;
            if(err)
            {
                console.log(err);
            }
            if ( activeCalls == 0 ) doNextThing()
        });
        y++;
    }
    if(tt.matches[x].p[0] === -1)
    {
        byes++;

    }
    if(tt.matches[x].p[1] !== -1)
    {
        var tmId = JSON.stringify(tt.matches[x].id);
        activeCalls++;
        Player.update({ _id : grUpd.players[y] },{ tournamentMatchId : tmId, treeId : tt.matches[x].p[1], opponent : tt.matches[x].p[0] },{ safe : true }, function (err) {
            activeCalls--;
            if(err)
            {
                console.log(err);
            }
            if ( activeCalls == 0 ) doNextThing()
        });
        y++;
    }
    if(tt.matches[x].p[1] === -1)
    {
        byes++;
    }
} 
```

# tomcat - 会话混合 - apache httpd 与 mod_jk、tomcat、spring security - 提供其他用户的数据

> ID：14731806
> 
> 赞同：5
> 
> 时间：2013-02-06T14:47:00.023
> 
> 标签：tomcat, spring-security, apache2, mod-jk

最近我们遇到了一个严重的问题，一个用户得到了另一个用户的数据。这个问题几乎不可能重现。

我们正在使用 Spring-security 提供的标准登录用户管理，我们确信问题不在于将用户存储在实例变量中或在我们的应用程序中存储类似的并发内容。

我们真的怀疑问题出在 SpringSecurity 或 Tomcat 本身。

我们的前端服务器是 apache httpd，通过 ajp 连接器 (mod_jk) 连接到 tomcat。我们没有做任何负载平衡（httpd 只关心 SSL、一些 url 重写和服务一些 php 模块）

这是我们的设置：

```
## OS
OS Name:        Linux 
OS Version:     2.6.32-5-686
Architecture:   i386

## Apache httpd
Server version: Apache/2.2.16 (Debian)
Server built:   Sep  4 2011 20:27:42

## mod_jk
mod_jk/1.2.30 (installed via apt-get)

## JVM
JVM Version:    1.6.0_18-b18
JVM Vendor:     Sun Microsystems Inc.

## Tomcat
Server version: Apache Tomcat/6.0.28
Server built:   February 12 2011 1443 
```

我们将此会话中的 httpd / mod_jk 混淆了，因此我们唯一的解决方案是删除 apache httpd。但在我们离开这个流行且广泛使用的配置之前，我们想知道是否有人遇到过类似的问题。

我发现的唯一类似问题是负载平衡或 mod_jk。

你有没有遇到过类似的问题？任何提示、想法、链接或经验都将受到高度赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:05:44.697

如果您排除并发会话问题，那么几乎唯一的可能性是您的业务逻辑本身存在缺陷，并且为另一个用户的数据提供服务。请发布代码示例如何确定“当前用户”，并在以后使用。

编辑：仅在生产中表现出来的错误通常是由竞争条件（[http://en.wikipedia.org/wiki/Race_condition](http://en.wikipedia.org/wiki/Race_condition)）引起的。确保您的代码尽可能使用局部变量，并在适用的情况下使用锁定/同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:22:34.893

可能的问题之一可能是第二次登录尝试。考虑以下情况：

*   用户使用两个登录表单打开两个浏览器选项卡。
*   选项卡 1：以 user_1 身份登录。将一些数据加载到 HTTP 会话中。
*   选项卡 2：以 user_2 身份登录。将一些数据加载到 HTTP 会话中。

在大多数浏览器中，它将是相同的 HTTP 会话。因此，实际上您将来自 user_1 和 user_2 的数据组合在一个 HTTP 会话中。任何使用会话对象的页面都可能受到影响。

您在这里有两个选择：

*   防止出现这种情况。检测第二次登录尝试并要求用户先注销。使用 Spring Security 很容易，请参见下面的代码。
*   如果您绝对需要每个浏览器选项卡一个帐户，那么您可以将会话数据存储在每个用户名的映射中。

由于[并发会话控制](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/springsecurity-single.html#ns-concurrent-sessions)功能，您可以防止第二次登录尝试：

```
<http>
    ...
    <session-management>
        <concurrency-control max-sessions="1" error-if-maximum-exceeded="true" />
    </session-management>
</http> 
```

它已经在您的应用程序中完成了吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T09:33:07.417

到目前为止，我们无法重现该错误，但我们发现有些人在使用 mod_jk 时遇到了同样的问题：

*   [https://issues.apache.org/bugzilla/show_bug.cgi?id=47714](https://issues.apache.org/bugzilla/show_bug.cgi?id=47714)
*   [http://grails.1312388.n4.nabble.com/Spring-Security-after-log-in-user-changed-and-session-mixed-up-td4636714.html](http://grails.1312388.n4.nabble.com/Spring-Security-after-log-in-user-changed-and-session-mixed-up-td4636714.html)（在底部）

所以现在我们正在使用以下设置运行：

*   JkOptions DisableReuse：http: [//tomcat.apache.org/connectors-doc/webserver_howto/apache.html](http://tomcat.apache.org/connectors-doc/webserver_howto/apache.html)
*   worker retries = 0：http: [//tomcat.apache.org/connectors-doc/reference/workers.html#Advanced](http://tomcat.apache.org/connectors-doc/reference/workers.html#Advanced) Worker Directives

我们计划将 mod_jk 切换为 mod_proxy_http。

我没有回答这个问题，因为我无法保证（并且没有人面临同样的问题能够保证）该解决方案修复了该错误。

如果有人可以分享任何信息，我将不胜感激！谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-04T05:12:33.803

我在 Glassfish 3.1.2.2 和 Mod_JK 1.2.19 中遇到了同样的问题

您可以使用 JMeter 脚本和良好的断言来重现该错误。

这是我的博客文章讲述这个故事：http: [//jeecookbook.blogspot.com/2013/07/modjk-session-mixed-between-users.html](http://jeecookbook.blogspot.com/2013/07/modjk-session-mixed-between-users.html)

使用带有此断言的 Mod_proxy 可以解决问题：不再检测到混合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T11:01:56.573

当您集成 JSF 和 Spring 时，JSF 依赖注入与 Spring 依赖注入发生冲突，因此 Spring 重写了处理该问题的 JSF 模块，以仅包装 Spring DI。因此，当我将 JSF ManagedBean 声明为 Session Scoped 时，我还必须给它一个`@Controller`注解，以便它也被识别为 Spring Bean。

[有关更多信息，请参阅此。](https://stackoverflow.com/a/14860933/455654)

# java - JVM 选项：Xmx 分配

> ID：14731809
> 
> 赞同：3
> 
> 时间：2013-02-06T14:47:08.067
> 
> 标签：java, jvm

虽然这个问题非常基础，但我愿意了解 JVM 的最大内存分配是如何分配给应用程序的。我有一个运行在 Windows 2008 服务器上的应用程序，该服务器托管大约 60 个虚拟托管服务器 [即 60 个 JVM]。每个托管服务器设置的最大堆为 1024m。Windows 配置有 32 GB RAM。

现在的问题是，如何为 JVM 分配最大内存？是一次性完成还是在增量增长的基础上完成？如果一口气，Windows 如何处理所有 60 台托管服务器，将我的应用程序托管在一个 32-GB-RAM 的系统中？

任何意见都非常感谢。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:26:25.407

JVM 实际上会分配`-Xmx`启动时请求的所有内存，以及用于保存 JVM 可执行文件和内部工作区的额外内存。当您创建线程时，它还会为用于这些线程的堆栈分配内存。

这是有效的，因为 (1) JVM 实际上并不*使用*该内存，并且 (2) 操作系统提供了一个分页文件。当 JVM 请求分配时，它由操作系统创建一个承诺，但实际上并没有使用所有请求的 RAM。由于它实际使用 RAM，操作系统将在页面文件之间交换页面。如果所有进程都在积极使用它们的 RAM，操作系统将不得不不断地交换页面；这被称为“颠簸”。

该`-Xms`参数指定初始堆大小，*在整体堆大小内*。JVM 将尝试将内存保持在这些范围内，但如果它无法回收足够的垃圾，则允许扩大范围。但是，这些堆的增加*并不会*逐渐向操作系统请求更多内存。如果他们这样做了，堆就会碎片化，并且大型数组分配可能会失败（因为它不适合连续内存）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:16:41.923

JVM 最初分配通过选项指定的内存量`-Xms`（据我所知，默认为 32M）。当它用完此内存时，它将开始增量分配新内存，直到达到通过`-Xmx`选项指定的数量（默认为 64M）。

发生这种情况时，`OutOfMemory`将引发错误。

PS当然，这是一个相当简化的算法。事实上，JVM 使用了一种更复杂的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T15:17:23.090

如果您希望在启动进程时分配它，则需要提供 -Xms，如果您只提供 -Xmx，VM 将增长到该值，但只会在需要更多内存时增加。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T15:19:52.267

-Xmx 参数指定 JVM 可以使用的**最大**内存，但它**不会**在启动后立即从 OS 分配。它**以增量**方式进行，通常在许多步骤中，因为它需要这样做（即，JVM 中的 Java 应用程序在运行时需要更多内存）。

当然这是默认行为，它可以通过许多其他 JVM 参数进行更改。

# java - 在 gwt 中添加大而动态的组织结构图

> ID：14731811
> 
> 赞同：3
> 
> 时间：2013-02-06T14:47:13.420
> 
> 标签：java, gwt, graph, orgchart

我需要向我的 GWT 站点添加一个动态组织结构图，其中：

1.  项目清单
2.  可以处理大量节点。
3.  可以动态更改，例如选择特定节点将绘制它的子节点，以防它们被隐藏。（最好不要重绘整个图表）
4.  一个小的方向窗口会很棒。
5.  节点必须是可点击的。

我现在正在使用[OrgChart](http://gwt-google-apis.googlecode.com/svn/javadoc/visualization/1.1/com/google/gwt/visualization/client/visualizations/OrgChart.html)，但我遇到了很多问题，例如在资源管理器中它最多显示约 100 个节点（因为表中的表列限制）。当我添加一个节点时，我需要刷新整个图表，导致用户失去方向等等。

我应该使用什么来创建它？

# linux - 如何使用 Bash 监视目录？

> ID：14731816
> 
> 赞同：0
> 
> 时间：2013-02-06T14:47:26.440
> 
> 标签：linux, bash

我正在做一个目录监控项目。我想编写一个 bash 脚本来计算目录的 md5checksum，并存储该变量以供以后比较。该脚本必须由 cronjob 运行，并且如果所述变量与先前设置的变量不匹配，则将执行命令。

当我跑

```
echo -n /path/to/directory | md5sum 
```

我确定它只是计算字符串“/path/to/directory”的 md5，而不是目录本身。

这可能吗？如果是这样，我如何存储该变量以供脚本的下一个实例稍后进行比较？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:21:59.967

`md5sum`仅处理文件，因此您必须生成文件名列表。`find`带 `-type f`参数是递归获取目录内容的好方法。

如果您将 md5sum 的输出存储在一个文件中，那么您可以使用`md5sum -c`它来检查哪些文件已更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:50:15.607

怎么样`ls /path/to/directory | md5sum`？

*然后如何存储该变量以供脚本的下一个实例进行比较？* 最简单的解决方案是将其存储在文件中。

# asp.net-mvc - Mapping routes for urls with .asp extension

> ID：14731818
> 
> 赞同：0
> 
> 时间：2013-02-06T14:47:28.227
> 
> 标签：asp.net-mvc, iis, asp.net-mvc-routing

I am trying to create a legacy route to redirect old asp links to the new urls.

My route is as follows and it's the first route in the list:

```
routes.MapRoute(
    "", // Route name
    "{*path}", // URL with parameters
    new { controller = "Legacey", action = "Legacey" },
    new { path = @".*\.asp.*" });// Parameter defaults 
```

The problem I have is IIS intercepts these and 404s them before they hit my route. I guess there's a setting in the web.config to tell IIS to stop doing this but I can't find it.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:15:55.880

You could accomplish this through URL rewriting, as explained in [this post](http://blogs.msdn.com/b/carlosag/archive/2008/09/02/iis7urlrewriteseo.aspx)

Just add something like this to your web.Config (replace Legacey/Legacey with the redirect URL for the asp pages):

```
<system.webServer> 
  <rewrite> 
    <rules> 
      <rule name="Redirect ASP Files to new URL" stopProcessing="true"> 
        <match url="*\.asp" /> 
        <action type="Redirect" url="Legacey/Legacey" appendQueryString="false" /> 
      </rule> 
    </rules> 
  </rewrite>
</system.webServer> 
```

I haven't tested this, it's just what I've understood from that post.

# responsive-design - 当您缩小时，如何阻止响应式设计变得越来越宽？

> ID：14731823
> 
> 赞同：1
> 
> 时间：2013-02-06T14:47:43.377
> 
> 标签：responsive-design

我目前正在设计我的第一个响应式网站，在进行一些研究时，我遇到了 2 个似乎做得很好的网站：1) [www.mashable.com](http://www.mashable.com) 2) [www.bostonglobe.com](http://www.bostonglobe.com)。

它们之间的主要区别在于 mashable.com 有一些如何制作一个响应式网站，当您缩小时将内容锁定在适当的位置，而 bostonglobe.com 的反应方式与我的设计相同，并且只是不断扩展。（我希望这是有道理的，如果不是，请在两个站点上按 ctrl- 并查看区别）

我很想知道 mashable 是如何做到的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:34:09.737

基本上这就是 Mashable 的工作方式......

```
@media (min-width: 640px) { 
.page-container {
    max-width: 1440px;
    margin: auto;
    position: relative;
    }
} 
```

# wkhtmltopdf - wkhtmltoimage 和图像

> ID：14731827
> 
> 赞同：0
> 
> 时间：2013-02-06T14:47:46.717
> 
> 标签：wkhtmltopdf

我正在尝试使用 wkhtmltopdf 生成带有图像的 html 文件的 PDF。有人可以让我知道如何让这个包含图像。我尝试使用以下 img 标签来做到这一点

```
<img src="logo.jpg" alt="logo" />
<img src="http:\\localhost:7272\logo.jpg" alt="logo" />
<img src="C:/inetpub/testwebsite/logo.jpg" alt=logo" /> 
```

我正在使用命令行：

```
wkhtmltopdf source.html destination.pdf 
```

html 正确呈现，但没有图像。

我的版本是 0.11.0 rc2

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:50:29.850

实际上，似乎是这个版本有问题。我安装了 0.9.9 版，它运行良好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T14:56:12.530

对，我只是尝试了一个简单的例子：

```
wkhtmltopdf http://www.google.com google.pdf 
```

从我的 linux 机器上的命令行，它工作正常，即使没有 GUI。我检查了 www.google.com 网页，它正在呈现的图片使用`<img>`标签。

我正在使用版本 0.11.0 rc1

# asp.net - Asp.net mvc3 过滤器和自定义模型绑定器执行顺序

> ID：14731830
> 
> 赞同：1
> 
> 时间：2013-02-06T14:47:52.223
> 
> 标签：asp.net, asp.net-mvc-3, session-timeout, custom-model-binder, actionfilterattribute

在我的应用程序中，我有一个顺序为 0 的操作过滤器来处理超时（我们检查会话是否为空。如果是，则将用户引导到超时页面），它在所有控制器操作上进行了装饰。但是，我看到了一种间歇性的行为，其中超时并没有一直被优雅地处理。然后我发现，在自定义模型活页夹中，我们正在检查会话是否为空，如果是，则抛出空引用异常。

有人知道为什么这是间歇性的吗？模态绑定和过滤器执行是否在不同的线程上执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:28:45.230

没有都在同一个线程上。模型绑定与会话超时无关。

如果您的会话超时，您没有引发异常。您可以重定向到 Login 或调用方法以在操作过滤器中重新填充会话变量

# facebook - Facebook Page Tab App 仅对登录 Facebook 的用户显示

> ID：14731831
> 
> 赞同：0
> 
> 时间：2013-02-06T14:47:52.550
> 
> 标签：facebook, facebook-apps, facebook-page

我知道有很多类似的问题，但没有一个真正回答我的问题。该问题不是由沙盒模式、http 与 https 或管理员用户状态引起的。

我创建了一个页面选项卡应用程序，它是实时的，任何登录 Facebook 的用户都可以查看和使用。

但是，当未登录 Facebook 时，用户仍然可以看到该页面，但该应用程序不会出现在页面上，只有照片、点赞和活动页面选项卡会出现。

这是 Facebook 处理第三方页面标签应用程序的默认/唯一方式，还是有一种设置方法，以便人们即使未登录 Facebook 也可以查看该应用程序？

该应用程序不使用任何 Facebook 用户数据，实际上只是一种通过 Facebook 展示和购买产品的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:55:24.447

在您的 Facebook 应用程序的 APP > 设置 > 高级页面中，存在国家/地区限制。这要求您拥有 Facebook 用户信息，这意味着除非用户登录，否则无法使用该应用程序。

我将“美国”作为限制，只是因为我们的主要用户群来自美国。我删除了限制，现在它显示给未登录 Facebook 的人。

我不是很肯定，但我相信在这方面设置的任何限制都会导致用户必须登录才能看到该应用程序。

# android - AutoCompleteText 下拉文本颜色

> ID：14731833
> 
> 赞同：2
> 
> 时间：2013-02-06T14:47:54.763
> 
> 标签：android, android-arrayadapter, autocompletetextview

我正在使用，`AutoCompleteTextView`但在下拉菜单中遇到了白色背景上的白色文本的问题。

如果我开始在该字段中输入，则会出现下拉菜单，如果我单击下拉菜单，它会选择正确的项目并将其放置在文本字段中。我只是看不到我在点击什么。

```
 ctAutoText = new AutoCompleteTextView( this );
        ctAutoText.setHint( "CT Ratio" );
        ctAutoText.setLayoutParams( editLP );
        ctAutoText.setId( 1001 );

        ArrayAdapter<String> adapter = new ArrayAdapter<String>( this, android.R.layout.simple_list_item_1, cTRatioList.toArray( new String[cTRatioList.size()] ) );
        ctAutoText.setAdapter( adapter ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:51:51.627

问题是我的`ArrayAdapter`. 用这个：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>( this,
             android.R.layout.simple_dropdown_item_1line, 
             cTRatioList.toArray( new String[cTRatioList.size()] ) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T08:44:16.097

如果要更改下拉列表中的文本颜色，请按照：[https ://stackoverflow.com/a/11787982/1265456](https://stackoverflow.com/a/11787982/1265456)

# mpi - D 编程语言的 MPI

> ID：14731834
> 
> 赞同：4
> 
> 时间：2013-02-06T14:47:57.433
> 
> 标签：mpi, d

这个问题与这个问题有关：[MPI and D: Linker Options](https://stackoverflow.com/questions/6944691/mpi-and-d-linker-options)

我正在尝试让 MPI 从 D 中工作。在网上可以找到几篇文章，但我发现没有一个确实有效......所以这是我到目前为止所做的：

我从这里[https://github.com/1100110/OpenMPI/blob/master/mpi.d](https://github.com/1100110/OpenMPI/blob/master/mpi.d)获取了 mpi.d并设置了一个最小程序：

```
import mpi;
import std.stdio;

void* MPI_COMM_WORLD = cast(void*)0;

int main(string[] args)
{

  int rank, size;
  int argc = cast(int)args.length;
  char *** argv = cast(char***)&args;

  MPI_Init (&argc, argv);   /* starts MPI */
  MPI_Comm_rank (MPI_COMM_WORLD, &rank);    /* get current process id */
  MPI_Comm_size (MPI_COMM_WORLD, &size);    /* get number of processes */
  writefln( "Hello world from process %d of %d", rank, size );
  MPI_Finalize();

  return 0;
} 
```

我编译

```
dmd test_mpi.d -L-L/usr/lib/openmpi -L-lmpi -L-ldl -L-lhwloc 
```

或者

```
gdc test_mpi.d -pthread -L/usr/lib/openmpi -lmpi -ldl -lhwloc -o test_mpi 
```

并运行

```
mpirun -n 2 ./test_mpi 
```

这是我得到的错误：

```
[box:1871] *** An error occurred in MPI_Comm_rank
[box:1871] *** on communicator MPI_COMM_WORLD
[box:1871] *** MPI_ERR_COMM: invalid communicator
[box:1871] *** MPI_ERRORS_ARE_FATAL: your MPI job will now abort
--------------------------------------------------------------------------
mpirun has exited due to process rank 0 with PID 1870 on
node bermuda-iii exiting improperly. There are two reasons this could occur:

1\. this process did not call "init" before exiting, but others in
the job did. This can cause a job to hang indefinitely while it waits
for all processes to call "init". By rule, if one process calls "init",
then ALL processes must call "init" prior to termination.

2\. this process called "init", but exited without calling "finalize".
By rule, all processes that call "init" MUST call "finalize" prior to
exiting or it will be considered an "abnormal termination"

This may have caused other processes in the application to be
terminated by signals sent by mpirun (as reported here).
--------------------------------------------------------------------------
[box:01869] 1 more process has sent help message help-mpi-errors.txt / mpi_errors_are_fatal
[box:01869] Set MCA parameter "orte_base_help_aggregate" to 0 to see all help / error messages 
```

显然我确实调用了 MPI_Init 和 MPI_Finalize。那么我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T16:53:42.793

在 Open MPI C 中，通信器句柄是指向实际通信器结构的指针。`MPI_COMM_WORLD`是指向预先创建的世界通信器结构的指针，而不是您定义的 NULL 指针。这就是 Open MPI 在调用中中止的原因`MPI_COMM_RANK`- 它相当于`MPI_Comm_rank(NULL, &rank)`在 C中调用。

如果您查看[第 808 行](https://github.com/1100110/OpenMPI/blob/master/mpi.d#L808)，`mpi.d`您会注意到`MPI_COMM_WORLD`已定义为：

```
MPI_COMM_WORLD      = cast(void*) &(ompi_mpi_comm_world), 
```

因此，如果您删除重新定义的行，您的代码应该可以工作`MPI_COMM_WORLD`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T14:56:15.660

你没有`string[]`向右投射`char***`。你应该这样做：

```
import std.string, std.algorithm, std.array;

char** argv = cast(char**)map!(toStringz)(args).array.ptr;
MPI_Init (&argc, &argv); 
```

以下是它的工作原理：

*   `toStringz`每个`args`元素上的映射。

*   因为 map 返回范围，所以我们使用`array`它的数组。

*   获取数组指针。

# android - 在两个不同的主题中插入自定义样式

> ID：14731837
> 
> 赞同：-1
> 
> 时间：2013-02-06T14:48:00.583
> 
> 标签：android, xml, android-theme

我想添加一种自定义样式，例如在一个主题中为紫色，在另一个主题中为红色。

```
<style name="subtitle_layout" parent="@android:style/Theme.Holo.Light">
    <item name="android:background">@color/purple</item>
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">40sp</item>
</style>

<style name="subtitle_layout2" parent="@android:style/Theme.Holo.Light">
    <item name="android:background">@color/black</item>
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">80sp</item>
</style> 
```

* * *

```
<style name="Theme1" parent="android:Theme.Holo.Light">
    <item name="android:textColor">@color/black</item>
    <item name="@style/subtitle_layout">@style/subtitle_layout</item>
</style>
<style name="Theme2" parent="android:Theme.Holo.Light">
    <item name="android:textColor">@color/white</item>
    <item name="@style/subtitle_layout">@style/subtitle_layout2</item>
</style> 
```

主题的变化有效，因为我看到了文本颜色的变化，但不是 android:textColor 我想放一个样式。但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:42:49.797

I guess you are trying to inherit existing styles to your theme, am I right? You can just set the style as your parent theme:

```
<style name="Theme1" parent="@style/subtitle_layout">
    <item name="android:textColor">@color/black</item>
</style> 
```

# android - 从日期选择器中隐藏日期

> ID：14731843
> 
> 赞同：0
> 
> 时间：2013-02-06T14:48:15.543
> 
> 标签：android

我需要从日期选择器中隐藏日期字段，我找到了这种方法，但问题出在 Android 2.3.3 版本中，工作正常，但在 android 4x 版本中没有隐藏日期字段。我猜是图书馆“ *java.lang.reflect.Field* ”已经过时了，但我不确定这一点。

我在[这里找到了这个解决方案](https://stackoverflow.com/questions/10793811/how-to-display-year-only-in-date-picker-in-android)

可能会发生在这里？

```
final DatePicker datePicker = new DatePicker(this);                                     
                LLayout.addView(datePicker);

                hideDayField(datePicker, "mDayPicker");

    private void hideDayField(DatePicker datePicker, String name) {
    try {
        java.lang.reflect.Field field = DatePicker.class.getDeclaredField(name);
        field.setAccessible(true);
        View fieldInstance = (View) field.get(datePicker);
        fieldInstance.setVisibility(View.GONE);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:09:15.373

您采用的这种方法使用反射来处理`DatePicker`-class 的一些隐藏字段。这样做的问题是，当类的内部结构发生变化时（例如，您正在更改的字段的名称），这将不再起作用。

请参阅[有关反射的文档](http://docs.oracle.com/javase/tutorial/reflect/index.html)。

在您的链接问题中，还提供了一些其他选项，可能更适合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-20T01:17:02.530

我做了类似的隐藏日期和月份的事情，在[这里找到了解决方案](https://stackoverflow.com/questions/10401915/hide-year-field-in-android-datepicker)

```
try {
    java.lang.reflect.Field[] f = picker.getClass().getDeclaredFields();
    for (java.lang.reflect.Field field : f) {
        if (field.getName().equals("mDayPicker") || field.getName().equals("mDaySpinner")
           || field.getName().equals("mMonthPicker") || field.getName().equals("mMonthSpinner")) {
           field.setAccessible(true);
           Object dmPicker = new Object();
           dmPicker = field.get(picker);
           ((View) dmPicker).setVisibility(View.GONE);
        }
    }
} 
```

希望能帮助到你。

# android - 我已经在 sdcard 中有一个声音文件如何在 android 中检索

> ID：14731847
> 
> 赞同：0
> 
> 时间：2013-02-06T14:48:37.277
> 
> 标签：android

我正在通过媒体播放器保存一些录音：

```
private void startrecording() {

        audiofile = getAudiofile();
        if (audiofile != null)
            myaudiorecoreder = new MediaRecorder();
        myaudiorecoreder.setAudioSource(MediaRecorder.AudioSource.MIC);
        myaudiorecoreder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        myaudiorecoreder.setOutputFile(audiofile.getAbsolutePath());
        myaudiorecoreder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
        try {
            myaudiorecoreder.prepare();
            setRecordstatus(true);

        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        myrecordtextview.setText("RECORDING STARTED..SPEAK NOW");
        myaudiorecoreder.start(); 
```

//其中audiofile将给出声音文件。这是我从中获取文件（空）的getAudiofile（）的代码。//

```
private File getAudiofile() {
        String extState = Environment.getExternalStorageState();
        if (extState.equals(Environment.MEDIA_MOUNTED)) {
            File mediaStorageDir = new File(
                    Environment.getExternalStorageDirectory() + "/TAUKY/AUDIO");
            if (!mediaStorageDir.exists()) {
                if (!mediaStorageDir.mkdirs()) {
                    Log.e("SDCARD", "failed to create directory");
                    Toast.makeText(getApplicationContext(),
                            "FAILED TO CREATE DIR", 0).show();
                    return null;
                }
            }
            String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss")
                    .format(new Date());
            mediaFile = new File(mediaStorageDir.getPath() + File.separator
                    + "SOUND_" + timeStamp + ".mp3");
            // Toast.makeText(getApplicationContext(), "FILE CREATION DONE",
            // 0).show();

        } else {
            Toast.makeText(getApplicationContext(), "NO SDCARD", 0).show();
        }
        return mediaFile;
    } 
```

现在在下一个活动中如何从 sdcard 的特定文件夹中检索，即 /TAUKY/AUDIO 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:12:58.563

您的问题不是很清楚，但是如果您想在将文件保存在 sdcard 后播放文件，您可以执行类似的操作，因为您知道文件的路径。

```
FileDescriptor fd = null;
File baseDir = Environment.getExternalStorageDirectory();
String audioPath = baseDir.getAbsolutePath() + /TAUKY/AUDIO/SOUND_ + timeStamp + ".mp3";
FileInputStream fis = new FileInputStream(audioPath);
fd = fis.getFD();

MediaPlayer mediaPlayer = new MediaPlayer();
mediaPlayer.setDataSource(fd);
mediaPlayer.prepare();
mediaPlayer.start(); 
```

我不能 100% 确定，因为我无法测试它，但它应该是这样的。希望这可以帮助。

# c++ - c ++对象成员析构函数被调用并且成员以默认值存在

> ID：14731848
> 
> 赞同：-3
> 
> 时间：2013-02-06T14:48:37.683
> 
> 标签：c++, pointers, reference, members

我有一个 B 类，它有一个 C 类成员。B 个对象存储在一个向量中。完整代码和输出如下：

```
#ifndef B_H
#define B_H

#include "C.h"

class B
{
public:
    B( int = 0 );           // constructor
    B( const B& );  // copy constructor
    ~B();           // destructor
    const B &operator=( const B & );    // assignment operator
    C c();          // return C object
    void val( int );// set val
    int val() const;// return val
private:
    C _c;           // C object
    int _val;       // a value
};

#include "B.h"
#include <iostream>

using namespace std;

B::B( int val )
{
    _val = val;

    cout << "B constructor called" << endl;
}

B::B( const B &other )
{
    _c = other._c;

    cout << "B copy constructor called" << endl;
}

B::~B()
{
    cout << "B destructor called" << endl;
}

const B &B::operator=( const B &other )
{
    if ( &other != this ) {     // avoid self-assignment

        _c = other._c;
    }

    return *this;
}

C B::c()
{
    return _c;
}

void B::val( int val )
{
    _val = val;
}

int B::val() const
{
    return _val;
}

#ifndef C_H
#define C_H

class C
{
public:
    C();            // constructor
    ~C();           // destructor
    void val( int );// set val
    int val() const;// return val
private:
    int _val;       // a value
};

#endif

#include "C.h"
#include <iostream>

using namespace std;

C::C()
{
    _val = 0;

    cout << "C constructor called" << endl;
}

C::~C()
{
    cout << "C destructor called" << endl;
}

void C::val( int val )
{
    _val = val;
}

int C::val() const
{
    return _val;
}

#include <vector>
#include <iostream>
#include "B.h"

using namespace std;

const int n = 5;

vector<B> v( n );

int main()
{
    for ( int i = 0; i < n; i++ )
        v[i] = B( i );

    for ( int i = 0; i < n; i++ )
        B &b = v[i];

    for ( int i = 0; i < n; i++ ) {

        B &b = v[i];

        b.c().val( 5 );
    }

    for ( int i = 0; i < n; i++ ) {

        B &b = v[i];

        cout << b.c().val() << endl;
    }

    cin.ignore( 1 );

    return 0;
}

output:

C destructor called
C destructor called
C destructor called
C destructor called
C destructor called
0
C destructor called
0
C destructor called
0
C destructor called
0
C destructor called
0
C destructor called 
```

问题：在每个周期 C 对象被破坏，并且 bc().val() 返回默认值（零）值。

问题：为什么？

输出属于最后两个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:52:57.927

您的`B::c`成员函数`C`按值返回。也就是说，它将`_c`对象所持有的`B`对象从函数中复制出来。您正在调用`val`该副本并且不影响该成员`_c`。

考虑这一行：

```
b.c().val( 5 ); 
```

`b.c()``b`返回'`_c`​​ 对象的临时副本。然后你调用`val`那个临时的。然后临时在语句结束时被销毁。在每次迭代中被破坏的正是这个临时的。那个临时正在输出`C destructor called`。

如果你想影响成员`_c`，你需要通过引用返回它：

```
C& B::c()
{
    return _c;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:52:31.487

你的问题出在这里：

```
C c();          // return C object 
```

在`B`对象中。试着理解这是在做什么。

# scala - Scala 并行无序迭代器

> ID：14731852
> 
> 赞同：3
> 
> 时间：2013-02-06T14:48:45.217
> 
> 标签：scala, parallel-processing, iterator, parallel-collections

我有一个`Iterable`需要执行的“工作单元”，没有特定的顺序，并且可以轻松地并行运行而不会相互干扰。

不幸的是，一次运行太多会超出我的可用 RAM，所以我需要确保在任何给定时间只有少数同时运行。

最基本的，我想要一个这种类型签名的函数：

```
parMap[A, B](xs: Iterator[A], f: A => B, chunkSize: Int): Iterator[B] 
```

这样输出`Iterator`不一定与输入的顺序相同（如果我想了解结果的来源，我可以输出一对与输入或其他东西。）然后消费者可以增量地使用生成的迭代器，而无需占用机器的所有内存，同时为该任务保持尽可能多的并行性。

此外，我希望该功能尽可能高效。例如，我最初的想法是按照以下方式做一些事情：

```
xs.iterator.grouped(chunkSize).flatMap(_.toSet.par.map(f).iterator) 
```

我希望它`toSet`会通知 Scala 的并行集合，一旦它们准备好，它就可以开始从其迭代器中以任何顺序生成元素，并且`grouped`调用是限制同时工作的数量。不幸的是，调用看起来并没有`toSet`达到预期的效果（在我的实验中，结果的返回顺序与没有`par`调用时的顺序相同）并且`grouped`通话是次优的。例如，如果我们的组大小为 100，其中 99 个作业立即在十几个核心上完成，但其中一个特别慢，则其余大部分核心将处于空闲状态，直到我们可以移动到下一个组。拥有一个最多与我的块大小一样大的“自适应窗口”会更干净，但不会被缓慢的工作人员阻止。

我可以设想自己用工作窃取（de）队列或类似的东西来写这样的东西，但我想在Scala的并行中已经在某种程度上为我完成了处理并发原语的许多艰苦工作收藏图书馆。有谁知道我可以重用它的哪些部分来构建这个功能，或者对如何实现这样的操作有其他建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:50:57.293

并行集合框架允许您指定用于给定任务的最大线程数。使用 scala-2.10，您需要执行以下操作：

```
def parMap[A,B](x : Iterable[A], f : A => B, chunkSize : Int) = {
  val px = x.par
  px.tasksupport = new ForkJoinTaskSupport(new scala.concurrent.forkjoin.ForkJoinPool(chunkSize))
  px map f
} 
```

`chunkSize`这将防止在任何时候运行多个操作。这使用下面的工作窃取策略来保持演员工作，因此不会遇到与`grouped`上面示例相同的问题。

但是，这样做不会将结果重新排序为第一个完成的顺序。为此，我建议将您的操作变成一个演员，并让一个小型演员池运行这些操作，然后在他们完成时将结果发送回您。

# powershell-2.0 - Powershell - 使用 CSV 文件创建文件夹

> ID：14731854
> 
> 赞同：1
> 
> 时间：2013-02-06T14:48:51.943
> 
> 标签：powershell-2.0

我刚刚创建了一个使用 CSV 文件批量创建文件夹的小脚本。但我看到有些人使用不同的方式创建文件夹。

CSV：

```
folder
4.1.1 Process
4.1.2 Score card
4.1.3 Strategy
4.1.4 Governance
4.1.5 Master plan  Calendar
4.1.6 Budget follow up
4.1.7 Budget documentation
4.1.8 Benchmarkvision
4.1.9 Std Documentation
4.1.10 Layout
4.1.11 Project
4.1.12 Training
4.1.13 Team structure
4.1.14 Work shop
4.1.15 Tools
4.1.16 Problem solving
4.1.17 Presentation
4.1.18 Working data zone
4.1.19 meeting
4.1.20 S
4.1.21 Miscellenous 
```

脚本：

```
#change the $folderlist path as it's a hard link.
$folderlist = Import-Csv "C:\folders.csv"
$rootpath = read-host "Enter the path of the root folder where the csv files will be created"

foreach ($folder in $folderlist){
    $path = $rootpath+$folder.folder
    new-item -type directory -path $path
    } 
```

`$(_$.folder)`很简单，但我看到人们使用我不理解的东西或其他功能。有没有人可以向我展示另一种使用`$_`and的方法`%{ }`？

我希望我的问题很清楚，否则我会提供更多信息。

约翰

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T15:04:41.183

我认为我会改变的唯一一件事（假设您的输入 CSV 格式正确）是您构建路径的方式。

```
foreach ($folder in $folderlist){
    $path = join-path -path $rootpath -childpath $folder.folder;
    new-item -type directory -path $path;
    } 
```

备用：

```
foreach ($folder in $folderlist){
    new-item -type directory -path $rootpath -name $folder.folder;
    } 
```

备选方案 2（源自上文）：

```
$folderlist|foreach-object {new-item -type directory -path $rootpath -name $_.folder;} 
```

备选方案 3（源自上文）：

```
$folderlist|foreach-object {new-item -type directory -path (join-path -path $rootpath -childpath $_.folder);} 
```

`%`是一个别名`foreach-object`——我总是在这样的脚本和解释中使用扩展别名，以确保一切都一清二楚。

编辑：另一种更简洁的方法，取决于 CSV 文件的大小，在内存使用方面可能会更好。

```
$rootpath = read-host "Enter the path of the root folder where the csv files will be created"
Import-Csv "C:\folders.csv"|foreach-object {new-item -type directory -path (join-path -path $rootpath -childpath $_.folder);} 
```

# java - android proguard 禁用 youtube api oauth？

> ID：14731859
> 
> 赞同：1
> 
> 时间：2013-02-06T14:49:10.067
> 
> 标签：java, android, google-api, youtube-api, proguard

我在这里使用 youtube java api 客户端[http://code.google.com/p/google-api-java-client/](http://code.google.com/p/google-api-java-client/)

当我完成编码时，应用程序在未签名时运行良好。当我签署它时，Android 用 proguard 签署了它，这使得签署的 apk。我安装了它，应用程序出错了。当我尝试登录时，它无法调用正确的方法（我猜），与未签名时不同，它运行良好。

这是 proguard-google-api-client.txt

```
# ProGuard Configuration file
#
# See http://proguard.sourceforge.net/index.html#manual/usage.html

# Needed to keep generic types and @Key annotations accessed via reflection

-keepattributes Signature,RuntimeVisibleAnnotations,AnnotationDefault

-keepclassmembers class * {
  @com.google.api.client.util.Key <fields>;
}

# Needed by Guava
# See https://groups.google.com/forum/#!topic/guava-discuss/YCZzeCiIVoI

-dontwarn sun.misc.Unsafe
-dontwarn com.google.common.collect.MinMaxPriorityQueue

# Needed by google-http-client-android when linking against an older platform version

-dontwarn com.google.api.client.extensions.android.**

# Needed by google-api-client-android when linking against an older platform version

-dontwarn com.google.api.client.googleapis.extensions.android.** 
```

这是proguard-flurry.txt（我做到了）

```
# ProGuard Configuration file
#
-keep class com.flurry.** { *; }
-keepattributes Signature,RuntimeVisibleAnnotations,AnnotationDefault

-keepclassmembers class * {
  @com.google.api.client.util.Key <fields>;
}

-dontwarn com.flurry.**

-dontwarn com.google.api.client.googleapis.extensions.android.gms.auth.**

-dontwarn com.google.common.cache.**

-dontwarn com.google.common.primitives.** 
```

这是project.properties

```
# This file is automatically generated by Android Tools.
# Do not modify this file -- YOUR CHANGES WILL BE ERASED!
#
# This file must be checked in Version Control Systems.
#
# To customize properties used by the Ant build system edit
# "ant.properties", and override values to adapt the script to your
# project structure.
#
# To enable ProGuard to shrink and obfuscate your code, uncomment this (available properties: sdk.dir, user.home):
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt:proguard-google-api-client.txt

# FlurryAgent
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt:proguard-flurry.txt

# Project target.
target=Amazon:Kindle Fire (2nd Generation):15
android.library.reference.1=../gridlayout_v7 
```

我添加了另一个罐子，所以我添加了 proguard-flurry.txt

# ruby-on-rails - 我应该为模型编写什么样的 RSpec 测试？

> ID：14731860
> 
> 赞同：2
> 
> 时间：2013-02-06T14:49:21.503
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rspec-rails

我对 Rails 和测试完全陌生，我编写了这个模型：

```
class KeyPerformanceInd < ActiveRecord::Base
  #attr_accessible :name, :organization_id, :target

  include ActiveModel::ForbiddenAttributesProtection

  belongs_to :organization
  has_many  :key_performance_intervals, :foreign_key => 'kpi_id'

  validates :name, presence: true
  validates :target, presence: true
  validates :organization_id, presence: true

end 
```

我的问题是对于这样的模型，我应该编写哪些 RSpec 测试？像这样的东西？还是有什么事情要做？我听说过**FactoryGirl**，这是我测试这个模型需要的东西还是用于测试控制器中的东西？

```
Describe KeyPerformanceInd do
  it {should belong_to(:key_performance_interval)}
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T14:58:36.603

在这种情况下，你不需要做更多的事情，你也可以使用[shoulda-matchers](https://github.com/thoughtbot/shoulda-matchers) gem 来让你的代码真正干净：

```
it { should belong_to(:organization) }
it { should have_many(:key_performance_intervals) }

it { should validate_presence_of(:name) }
it { should validate_presence_of(:target) }
it { should validate_presence_of(:organization_id) } 
```

就是这样。

在这种情况下您不需要`FactoryGirl`它，它用于创建有效且可重用的对象。但是您可以在模型测试中使用工厂。一个简单的例子：

您的工厂：

```
FactoryGirl.define do
  factory :user do
    first_name "John"
    last_name  "Doe"
  end
end 
```

你的测试：

```
it "should be valid with valid attributes" do  
  user = FactoryGirl.create(:user)
  user.should be_valid
end 
```

查看[Factory Girl 文档](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md)以获取更多信息。

# r - 合并数据帧，同时对 R 中的公共列求和

> ID：14731861
> 
> 赞同：5
> 
> 时间：2013-02-06T14:49:21.270
> 
> 标签：r, merge

[我的问题与此处](https://stackoverflow.com/questions/5769320/how-to-merge-two-data-frames-on-common-columns-in-r-with-sum-of-others)发布的问题非常相似。

不同之处在于他们知道会发生冲突的列，而我需要一个不会事先知道哪些列发生冲突的通用方法。

例子：

```
TABLE1
Date             Time    ColumnA    ColumnB
01/01/2013      08:00      10         30
01/01/2013      08:30      15         25
01/01/2013      09:00      20         20
02/01/2013      08:00      25         15
02/01/2013      08:30      30         10
02/01/2013      09:00      35         5

TABLE2
Date           ColumnA    ColumnB    ColumnC
01/01/2013      100        300         1
02/01/2013      200        400         2 
```

表 2 仅包含日期，因此适用于表 A 中与日期匹配的所有字段，而不考虑时间。

我希望合并将冲突的列总和为 1。结果应如下所示：

```
TABLE3
Date             Time    ColumnA    ColumnB    ColumnC
01/01/2013      08:00      110         330        1
01/01/2013      08:30      115         325        1
01/01/2013      09:00      120         320        1
02/01/2013      08:00      225         415        2
02/01/2013      08:30      230         410        2
02/01/2013      09:00      235         405        2 
```

目前，我的标准合并只创建了“ColumnA.x”、“ColumnA.y”、“ColumnB.x”、“ColumnB.y”的重复列。

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T16:15:37.710

如果我理解正确，您需要一种灵活的方法，除了要合并的列和要保留的列之外，不需要知道每个表中存在哪些列。这可能不是最优雅的解决方案，但这里有一个示例函数可以满足您的确切需求：

```
merge_Sum <- function(.df1, .df2, .id_Columns, .match_Columns){
    merged_Columns <- unique(c(names(.df1),names(.df2)))
    merged_df1 <- data.frame(matrix(nrow=nrow(.df1), ncol=length(merged_Columns)))
    names(merged_df1) <- merged_Columns
    for (column in merged_Columns){
        if(column %in% .id_Columns | !column %in% names(.df2)){
            merged_df1[, column] <- .df1[, column]
        } else if (!column %in% names(.df1)){
            merged_df1[, column] <- .df2[match(.df1[, .match_Columns],.df2[, .match_Columns]), column]
        } else {
            df1_Values=.df1[, column]
            df2_Values=.df2[match(.df1[, .match_Columns],.df2[, .match_Columns]), column]
            df2_Values[is.na(df2_Values)] <- 0
            merged_df1[, column] <- df1_Values + df2_Values
        }
    }
    return(merged_df1)
} 
```

此函数假定您有一个表“.df1”，它是排序大师，并且您想要合并第二个表“.df2”中的数据，该表的行与“.df1”中的一个或多个行匹配。从主表“.df1”中保留的列被接受为数组“.id_Columns”，为合并两个表提供匹配的列被接受为数组“.match_Columns”

对于您的示例，它将像这样工作：

```
merge_Sum(table1, table2, c("Date","Time"), "Date")

#   Date       Time  ColumnA ColumnB ColumnC
# 1 01/01/2013 08:00     110     330       1
# 2 01/01/2013 08:30     115     325       1
# 3 01/01/2013 09:00     120     320       1
# 4 02/01/2013 08:00     225     415       2
# 5 02/01/2013 08:30     230     410       2
# 6 02/01/2013 09:00     235     405       2 
```

用简单的语言来说，这个函数首先找到唯一列的总数，然后创建一个主表“.df1”形状的空数据框，以便稍后保存合并的数据。然后，对于“.id_Columns”，将数据从“.df1”复制到新的合并数据框中。对于其他列，将“.df1”中存在的任何数据添加到“.df2”中的任何现有数据中，其中“.df2”中的行基于“.match_Columns”进行匹配

可能有一些包可以做类似的事情，但其中大多数需要了解所有现有列以及如何处理它们。正如我之前所说，这不是最优雅的解决方案，但它灵活且准确。

**更新**：原始函数假定 table1 和 table2 之间存在多对一关系，并且 OP 也要求允许多对无关系。代码已更新为效率稍低但 100% 更灵活的逻辑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T15:14:57.790

一个`data.table`解决方案：

```
dt1 <- data.table(read.table(header=T, text="Date             Time    ColumnA    ColumnB
01/01/2013      08:00      10         30
01/01/2013      08:30      15         25
01/01/2013      09:00      20         20
02/01/2013      08:00      25         15
02/01/2013      08:30      30         10
02/01/2013      09:00      35         5"))

dt2 <- data.table(read.table(header=T, text="Date           ColumnA    ColumnB    ColumnC
01/01/2013      100        300         1
02/01/2013      200        400         2"))

setkey(dt1, "Date")
setkey(dt2, "Date")
# Note: The ColumnC assignment has to be come before the summing operations
# Else it gives out error (see below)
dt1[dt2, `:=`(ColumnC = i.ColumnC, ColumnA = ColumnA + i.ColumnA, 
                        ColumnB = ColumnB + i.ColumnB)]

#          Date  Time ColumnA ColumnB ColumnC
# 1: 01/01/2013 08:00     110     330       1
# 2: 01/01/2013 08:30     115     325       1
# 3: 01/01/2013 09:00     120     320       1
# 4: 02/01/2013 08:00     225     415       2
# 5: 02/01/2013 08:30     230     410       2
# 6: 02/01/2013 09:00     235     405       2 
```

我不确定为什么将`ColumnC`赋值放在右端会引发此错误。也许 MatthewDowle 可以解释这个错误的原因。

```
dt1[dt2, `:=`(ColumnA = ColumnA + i.ColumnA, ColumnB = ColumnB + i.ColumnB, 
                        ColumnC = i.ColumnC)]

Error in `[.data.table`(dt1, dt2, `:=`(ColumnA = ColumnA + i.ColumnA,  : 
  Value of SET_STRING_ELT() must be a 'CHARSXP' not a 'NULL' 
```

* * *

**从 v1.8.9 更新：**

> o 按组将添加新列与更新现有列混合为一个`:=`()；即，
> `DT[,`:=`(existingCol=...,newCol=...), by=...]`
> 现在可以正常工作，没有错误或段错误，#2778 和 #2528。非常感谢 Arun 用可重复的例子报告了这两个问题。添加了测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-02T23:25:35.487

我写了包[*safejoin*](https://github.com/moodymudskipper/safejoin)，它非常简洁地解决了这个问题

```
#devtools::install_github("moodymudskipper/safejoin")
library(safejoin)

safe_full_join(df1,df2, by = "Date", conflict = `+`)
#         Date  Time ColumnA ColumnB ColumnC
# 1 01/01/2013 08:00     110     330       1
# 2 01/01/2013 08:30     115     325       1
# 3 01/01/2013 09:00     120     320       1
# 4 02/01/2013 08:00     225     415       2
# 5 02/01/2013 08:30     230     410       2
# 6 02/01/2013 09:00     235     405       2 
```

在发生冲突的情况下，该函数`+`用于成对的冲突列

**数据**

```
df1 <- read.table(header=T, text="Date             Time    ColumnA    ColumnB
01/01/2013      08:00      10         30
01/01/2013      08:30      15         25
01/01/2013      09:00      20         20
02/01/2013      08:00      25         15
02/01/2013      08:30      30         10
02/01/2013      09:00      35         5")

df2 <- read.table(header=T, text="Date           ColumnA    ColumnB    ColumnC
01/01/2013      100        300         1
02/01/2013      200        400         2") 
```

# list - 从 IO Int 迭代列表创建，如何？

> ID：14731863
> 
> 赞同：7
> 
> 时间：2013-02-06T14:49:26.480
> 
> 标签：list, haskell, io, loops

我在 python 挑战中玩[链表](http://www.pythonchallenge.com/pc/def/linkedlist.php?nothing=12345)问题，需要查询下一个值（猜它是 Int）。

我创建函数来获取下一个值，如下所示

```
url = "http://www.pythonchallenge.com/pc/def/linkedlist.php?nothing=" 

getNext :: Int -> IO Int
getNext x = do
    rsp <- simpleHTTP (getRequest $ url ++ show x)
    bdy <- getResponseBody rsp
    let num = last $ splitWhen (==' ') bdy
    return (read num::Int) 
```

它工作正常（在ghci中）

```
> getNext 12345
44827
> getNext 44827
45439 
```

虽然我想*反复调用*getNext 直到找到答案，但我认为我应该像在非单子世界中那样保留历史记录，这样我就可以从最后一个值继续，以防万一发生故障。

```
> let nX x = x + 3
> :t nX
nX :: Num a => a -> a
> take 10 $ iterate nX 1
[1,4,7,10,13,16,19,22,25,28] 
```

我认为它应该是`iterateM_`从 Control.Monad.Loops 中找到的迭代的单子提升版本，但它没有按我预期的那样工作。没有显示（我认为 _ 后缀意味着丢弃结果但没有*iterateM*）

```
> :t iterate
iterate :: (a -> a) -> a -> [a]
> :t iterateM_
iterateM_ :: Monad m => (a -> m a) -> a -> m b 
```

**问题**是我怎样才能像在非单子迭代中那样获得 [Int] 。我想我想要一个返回的函数`IO [Int]`能够像这样在我的代码中提取和过滤/处理

```
main = do
    i <- getAllList
    let answer = last i -- or could be a repeated converged value, don't know yet
    putStrLn (show answer)

getAllList :: IO [Int] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T15:22:47.660

如果您希望您的函数提前终止，而不是返回一个无限的结果列表，您将需要使用`unfoldrM`而不是 `iterateM`. 这可以通过以下方式完成：

```
url = "http://www.pythonchallenge.com/pc/def/linkedlist.php?nothing=" 

start = 12345
stop  = 10000

shouldStop :: Int -> Bool
shouldStop x = x == stop

getNext :: Int -> IO (Maybe (Int, Int))
getNext prev
    | shouldStop prev = return Nothing
    | otherwise       = do
        rsp <- simpleHTTP (getRequest $ url ++ show prev)
        bdy <- getResponseBody rsp
        let num = read $ last $ splitWhen (==' ') bdy :: Int
        print (prev, num)
        return $ Just (num, num)

getAllList :: IO [Int]
getAllList = unfoldrM getNext start 
```

这将允许您定义一个停止条件，以便循环可以终止，但在满足终止条件之前您不会收到返回的结果。

该`unfoldrM`函数可以在`monad-loops`包中找到，但最新版本一直在重复使用原始种子，而不是生成器函数产生的种子（我相信这已经修复但没有上传到 Hackage）。这是`unfoldrM`您想要的版本。

```
-- |See 'Data.List.unfoldr'.  This is a monad-friendly version of that.
unfoldrM :: (Monad m) => (a -> m (Maybe (b,a))) -> a -> m [b]
unfoldrM = unfoldrM'

-- |See 'Data.List.unfoldr'.  This is a monad-friendly version of that, with a
-- twist.  Rather than returning a list, it returns any MonadPlus type of your
-- choice.
unfoldrM' :: (Monad m, MonadPlus f) => (a -> m (Maybe (b,a))) -> a -> m (f b)
unfoldrM' f z = go z
    where go z = do
            x <- f z
            case x of
                Nothing         -> return mzero
                Just (x, z)     -> do
                        xs <- go z
                        return (return x `mplus` xs) 
```

这就是您可以使用`Pipes`的方式，这将允许您将处理作为结果流进行，而无需求助于惰性 I/O。

```
import Network.HTTP
import Control.Monad
import Data.List.Split
import Control.Monad
import Control.Proxy

url = "http://www.pythonchallenge.com/pc/def/linkedlist.php?nothing="

grabber :: (Proxy p) => Int -> () -> Producer p String IO ()
grabber start () = runIdentityP $ loop $ show start where
    loop x = do
        -- Grab the next value
        x' <- lift $ getNext x
        -- Send it down stream
        respond x'
        -- Keep grabbing
        loop x'

-- Just prints the values recieved from up stream
printer :: (Proxy p, Show a) => () -> Consumer p a IO r
printer () = runIdentityP $ forever $ do
    a <- request ()  -- Consume a value
    lift $ putStrLn $ "Received a value: " ++ show a

getNext :: String -> IO String
getNext prev = do
    rsp <- simpleHTTP (getRequest $ url ++ prev)
    bdy <- getResponseBody rsp
    let num  = last $ splitWhen (== ' ') bdy
    return num

main = runProxy $ grabber start >-> printer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:08:40.697

所以你想要的基本上是

```
iterateM :: Monad m => (a -> m a) -> a -> m [a]
iterateM action a = do
   a' <- action a
   liftM (a':) $ iterateM action a' 
```

问题是这并不像人们预期的那样懒惰地工作：由于单子绑定是严格的，即使您只想评估有限数量的`a`s，您也会陷入无限循环。

# java - 仅在调试代码时出现进程中的 hsqldb 错误

> ID：14731865
> 
> 赞同：0
> 
> 时间：2013-02-06T14:49:31.130
> 
> 标签：java, debugging, hsqldb

我在我的 java 代码中运行进程 hsqldb 以测试目的，我收到以下错误：

> 用户缺少权限或找不到对象：MY_TEMP_TABLE

只有当我调试代码时。如果我在没有调试的情况下运行（junit）测试，一切正常。我确实需要其他一些领域的调试器。我收到此查询的错误：

```
INSERT INTO MY_TEMP_TABLE VALUES ('a','a','a') 
```

我不认为问题出在 sql 语法中，因为在没有调试的情况下运行测试时所有查询都可以正常工作。任何帮助都会得到帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:12:32.843

显然，当您调试代码时，您的表不存在。

一种可能性是根本没有创建表。要查看发生了什么，请将`jdbc:hsqldb:file:yourdb`用作数据库 URL 并检查`yourdb.log`文件中的 CREATE TABLE 语句。

另一种可能性是该表不在 PUBLIC（或默认）模式中，并且您没有将模式更改为包含该表的模式。

# html - 如何覆盖第 n 个孩子

> ID：14731866
> 
> 赞同：2
> 
> 时间：2013-02-06T14:49:31.973
> 
> 标签：html, css, css-selectors

假设我有这个简化的 HTML 树：

```
 <ul>
   <li>Item 1</li>
   <li>Item 2</li>         
   <li>Item 3</li>
    .
    .
    .
   <li>Item n</li>
 </ul> 
```

而这个 CSS 样式：

```
ul li:nth-child(2n){ background-color: blue; } 
```

我无权访问此选择器，因此我想将其覆盖为

```
ul li:nth-child(3n){ background-color: red; } 
```

但是，这会影响**每 2 个和每 3 个元素**。这是一个[js-fiddle](http://jsfiddle.net/opherv/ymyqx/)示例。

如何使用新公式覆盖第 n 个子伪选择器，以便只有我的新公式 (3n) 生效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T14:54:51.087

```
ul li:nth-child(3n){ background-color: transparent; }
ul li:nth-child(2n){ background-color: red; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-20T04:50:50.830

我想这就是你想要的。

```
ul li:nth-child(3n+1){
    background-color: white;
}

ul li:nth-child(3n+2){
    background-color: blue;
}

ul li:nth-child(3n){
    background-color: red;
} 
```

# makefile - Makefile：依赖列表中的 $subst

> ID：14731869
> 
> 赞同：3
> 
> 时间：2013-02-06T14:49:31.193
> 
> 标签：makefile

我有一个大致如下所示的 Makefile：

```
FIGURES = A1_B1_C1.eps A2_B2_C2.eps A3_B3_C3.eps
NUMBERS = 1 2 3

all : $(FIGURES)

%.eps : $(foreach num, $(NUMBERS), $(subst B, $(num), %).out)
    # my_program($+, $@);

%.out : 
```

关键是我的图形的文件名包含某些信息（A、B、C），并且每个图形都是由 my_program 从几个（在示例 3 中）文件创建的。虽然每个图形的文件名都有 format `Ax_Bx_Cx.eps`，但用于创建图形的数据文件的名称如下所示：

```
Ax_1x_Cx.out
Ax_2x_Cx.out
Ax_3x_Cx.out 
```

所以对于每个图，我需要一个动态创建的包含多个文件名的依赖项列表。换句话说，我对上面示例的期望输出是：

> # my_program(A1_11_C1.out A1_21_C1.out A1_31_C1.out, A1_B1_C1.eps);
> 
> # my_program(A2_12_C2.out A2_22_C2.out A2_32_C2.out, A2_B2_C2.eps);
> 
> # my_program(A3_13_C3.out A3_23_C3.out A3_33_C3.out, A3_B2_C3.eps);

不幸的是，该`subst`命令似乎被忽略了，因为输出如下所示：

> # my_program(A1_B1_C1.out A1_B1_C1.out A1_B1_C1.out, A1_B1_C1.eps);
> 
> # my_program(A2_B2_C2.out A2_B2_C2.out A2_B2_C2.out, A2_B2_C2.eps);
> 
> # my_program(A3_B3_C3.out A3_B3_C3.out A3_B3_C3.out, A3_B3_C3.eps);

我查看了[这个可能的重复项](https://stackoverflow.com/questions/13755842/makefile-string-substitution-in-dependency-not-working)，但认为答案对我没有帮助，因为我正在使用`%`and not `$@`，这在先决条件中应该没问题。

显然我在这里遇到了问题。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:22:04.553

要进行花哨的先决条件操作，您至少需要支持[二级扩展功能](http://www.gnu.org/software/make/manual/make.html#Secondary-Expansion)的 make-3.82 ：

```
FIGURES = A1_B1_C1.eps A2_B2_C2.eps A3_B3_C3.eps
NUMBERS = 1 2 3

all : $(FIGURES)

.SECONDEXPANSION:

$(FIGURES) : %.eps : $$(foreach num,$$(NUMBERS),$$(subst B,$$(num),$$*).out)
    @echo "my_program($+, $@)"

%.out :
    touch $@ 
```

输出：

```
$ make
touch A1_11_C1.out
touch A1_21_C1.out
touch A1_31_C1.out
my_program(A1_11_C1.out A1_21_C1.out A1_31_C1.out, A1_B1_C1.eps)
touch A2_12_C2.out
touch A2_22_C2.out
touch A2_32_C2.out
my_program(A2_12_C2.out A2_22_C2.out A2_32_C2.out, A2_B2_C2.eps)
touch A3_13_C3.out
touch A3_23_C3.out
touch A3_33_C3.out
my_program(A3_13_C3.out A3_23_C3.out A3_33_C3.out, A3_B3_C3.eps) 
```

# javascript - jQuery（和其他）实际上是如何在 Javascript 中执行 GET 请求的？

> ID：14731871
> 
> 赞同：-3
> 
> 时间：2013-02-06T14:49:39.727
> 
> 标签：javascript

它有点不清楚 Javascript 内部是如何执行请求的。我知道它没有使用内置

浏览器 XMLHttpRequest，但它是如何做到的呢？阅读有关 stackoverflow 的文章，他们只需创建一个 Javascript

对象并设置 var obj = document.createElement('script'); obj.src = " [http://somedomain.com?blabla=yes](http://somedomain.com?blabla=yes) "

[使用 JavaScript 执行没有 AJAX 的 GET 请求](https://stackoverflow.com/questions/4490143/using-javascript-to-perform-a-get-request-without-ajax)

这里来自 jQuery：

```
 $.ajax({
        type: 'GET',
        url: url,
        async: false,
        jsonpCallback: 'jsonCallback',
        contentType: "application/json",
        dataType: 'jsonp',
        success: function(json) {
            console.log("console. hurra");
        },
        error: function(e) {
            console.log(e.message);
        }
    }); 
```

你知道 jQuery 是如何在 Javascript 内部构建请求并提交的吗？

我在本地尝试了这个，它就像脚本被正确插入到我的页面中一样。var CampaignNs = {

```
GET: function(url) {
    var head = document.getElementsByTagName('head')[0];
    var n = document.createElement('script');
    n.src = url;
    n.type = 'text/javascript';
    n.onload = function() { // this is not really mandatory, but removes the tag when finished.
        head.removeChild(n);
    };
    head.appendChild(n);
} 
```

}

我提前谢谢

好文章在这里：http: [//johnnywey.wordpress.com/2012/05/20/jsonp-how-does-it-work/#comment-359](http://johnnywey.wordpress.com/2012/05/20/jsonp-how-does-it-work/#comment-359)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:54:13.647

使用 XHTTPRequest 或插入标签都是触发 GET 请求的有效方法。XHTTPRequests 在许多方面都更干净，因为它们不涉及在 DOM 中乱搞。

> 它有点不清楚 Javascript 内部是如何执行请求的。我知道它没有使用内置
> 
> 浏览器 XMLHttpRequest，但它是如何做到的呢？

这是没有意义的。JavaScript（即浏览器中的 JavaScript 实现）不需要依赖 XHTTPRequest，它只是在需要执行请求时调用浏览器的 HTTP API。除了通过 XHTTPRequest 之外，它不需要这样做 :-)

# html - 是否可以使用溢出来使 div 的滚动条居中：滚动

> ID：14731872
> 
> 赞同：1
> 
> 时间：2013-02-06T14:49:42.487
> 
> 标签：html, css, web-applications, telerik

```
.qsf-demo-canvas 
{ max-width: 100%;
max-height:600px;
overflow:scroll;} 
```

是否可以使用 overflow:scroll div 使水平滚动条居中。

如果内容比可用空间宽得多，则默认情况下 div 内容将居中？

用户应该仍然可以滚动。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:45:17.197

在 JS 中是可能的：这会将 div 的内部滚动滚动到它的水平中间

```
var myDiv = $("#Mydiv");
var scrollto = myDiv.offset().left + (myDiv.width() / 2);
myDiv.animate({ scrollLeft:  scrollto}); 
```

我希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-19T04:18:53.923

我取得了成功：

```
jQuery(document).ready(function() {
  jQuery(window).resize(function() {
    var myDiv = jQuery("#myDiv"),
        myChild = myDiv.find("> *:first-child");
    myDiv.animate({
      scrollLeft: (myChild.width() - myDiv.width()) / 2
    }, {
      duration: 0
    });
  });

  jQuery(window).resize();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-10T09:17:22.687

一些优化 - 将动画更改为`scrollLeft()`. 与 jQuery.slim 一起使用，根据 Chrome DevTools，速度要快得多。

```
var myDiv = $("#Mydiv");
var scrollto = myDiv.offset().left + (myDiv.width() / 2);
myDiv.scrollLeft(scrollto); 
```

# objective-c - 从 UIButton 获取图像

> ID：14731874
> 
> 赞同：1
> 
> 时间：2013-02-06T14:49:50.407
> 
> 标签：objective-c, cocoa-touch, uibutton, uiimage

我正在尝试在单击时将图像分配给按钮，以便在单击按钮时将其分配给其他内容。

我想我快到了，我已经设法从按钮获取以下信息

```
Sender info is: <UIImageView: 0x757d9b0; frame = (0 0; 100 100); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x757da10>> - image-name.png 
```

如您所见，图像名称附加在日志的末尾，但我不确定如何获得它。

我用来得到这个的代码是：

```
sender.imageView 
```

提前感谢您的帮助

**编辑：** 感谢@zoul 引导我走上正确的道路。我最终做了以下事情：

```
UIImage *image = [sender imageForState:UIControlStateNormal];
[self.newButton setImage:image forState:UIControlStateNormal]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:51:48.163

上有个`imageForState:`方法`UIButton`。

# android - 如果语句在我的代码中做错了什么

> ID：14731876
> 
> 赞同：-1
> 
> 时间：2013-02-06T14:49:52.707
> 
> 标签：android, if-statement

我在这里有按钮单击事件的代码：

```
public void register(View view) {

    EditText user = (EditText) findViewById(R.id.registerEditText);

    if("USER01".equals(user.getText().toString()) || "USER02".equals(user.getText().toString())) {

        Toast.makeText(RegisterActivity.this,"Correct username!", Toast.LENGTH_SHORT).show();
    }else{
        Toast.makeText(RegisterActivity.this, "Only USER01 and USER02 is allowed for username!", Toast.LENGTH_SHORT).show();
    }

} 
```

这是我的 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center"
android:background="@drawable/green_bg"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/first"
    android:textSize="32sp"
    android:shadowColor="#F70000"
    android:shadowDx="2.5"
    android:shadowDy="2.5"
    android:textColor="#FFFDFD"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<EditText
    android:id="@+id/registerEditText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:singleLine="true"
    android:textColor="#DDFED1"
    android:hint="@string/user"
    android:inputType="text|textCapCharacters" >
</EditText>

<Button
    android:id="@+id/button1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:onClick="register"
    android:text="@string/register" /> 
```

这是单击按钮后在我的 LogCat 中显示的内容：

```
02-07 11:10:47.155: E/AndroidRuntime(556): FATAL EXCEPTION: main
02-07 11:10:47.155: E/AndroidRuntime(556): java.lang.IllegalStateException: Could not execute method of the activity
02-07 11:10:47.155: E/AndroidRuntime(556):  at android.view.View$1.onClick(View.java:3039)
02-07 11:10:47.155: E/AndroidRuntime(556):  at android.view.View.performClick(View.java:3480)
02-07 11:10:47.155: E/AndroidRuntime(556):  at android.view.View$PerformClick.run(View.java:13983)
02-07 11:10:47.155: E/AndroidRuntime(556):  at android.os.Handler.handleCallback(Handler.java:605)
02-07 11:10:47.155: E/AndroidRuntime(556):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-07 11:10:47.155: E/AndroidRuntime(556):  at android.os.Looper.loop(Looper.java:137)
02-07 11:10:47.155: E/AndroidRuntime(556):  at android.app.ActivityThread.main(ActivityThread.java:4340)
02-07 11:10:47.155: E/AndroidRuntime(556):  at java.lang.reflect.Method.invokeNative(Native Method)
02-07 11:10:47.155: E/AndroidRuntime(556):  at java.lang.reflect.Method.invoke(Method.java:511)
02-07 11:10:47.155: E/AndroidRuntime(556):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-07 11:10:47.155: E/AndroidRuntime(556):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-07 11:10:47.155: E/AndroidRuntime(556):  at dalvik.system.NativeStart.main(Native Method)
02-07 11:10:47.155: E/AndroidRuntime(556): Caused by: java.lang.reflect.InvocationTargetException
02-07 11:10:47.155: E/AndroidRuntime(556):  at java.lang.reflect.Method.invokeNative(Native Method)
02-07 11:10:47.155: E/AndroidRuntime(556):  at java.lang.reflect.Method.invoke(Method.java:511)
02-07 11:10:47.155: E/AndroidRuntime(556):  at android.view.View$1.onClick(View.java:3034)
02-07 11:10:47.155: E/AndroidRuntime(556):  ... 11 more
02-07 11:10:47.155: E/AndroidRuntime(556): Caused by: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
02-07 11:10:47.155: E/AndroidRuntime(556):  at android.database.AbstractCursor.checkPosition(AbstractCursor.java:434)
02-07 11:10:47.155: E/AndroidRuntime(556):  at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:136)
02-07 11:10:47.155: E/AndroidRuntime(556):  at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:50)
02-07 11:10:47.155: E/AndroidRuntime(556):  at tsu.ccs.capstone.RegisterActivity.retrieveNumber(RegisterActivity.java:38)
02-07 11:10:47.155: E/AndroidRuntime(556):  at tsu.ccs.capstone.RegisterActivity.register(RegisterActivity.java:46)
02-07 11:10:47.155: E/AndroidRuntime(556):  ... 14 more 
```

这是我想出的一个简单的测试仪，用于检查我`IF statement`的工作是否正常。但不幸的是，每当我点击`register`按钮时，我的应用程序总是强制关闭。有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:35:38.007

尝试这个

```
if(user.getText().toString().equals ("USER01")|| user.getText().toString().equals ("USER02")) {
  //do your action
}else{
//do your action     
} 
```

# batch-file - 要“调用”或“不调用”批处理文件？

> ID：14731877
> 
> 赞同：75
> 
> 时间：2013-02-06T14:49:53.120
> 
> 标签：batch-file, cmd, command-line, call

如果您从一个 bat 文件中调用了另一个批处理文件但仍有一些剩余操作要完成，您如何确保对第一个 bat 文件的调用将在完成或错误后返回到第一个调用它的文件实例？

例子：

```
CD:\MyFolder\MyFiles
Mybatfile.bat

Copy afile toHere 
```

或者

```
CD:\MyFolder\MyFiles
CALL Mybatfile.bat

COPY afile toHere 
```

`CALL`使用或`START`根本不使用它们有什么区别？这会对它是否返回复制命令的结果有任何影响吗？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-02-06T15:15:52.493

正如其他人所说，`CALL`这是在 .bat 中调用另一个 bat 文件并返回给调用者的正常方法。

但是，如果 CALLed 批处理文件有致命的语法错误，或者如果 CALLed 脚本在没有 /B 选项的情况下以 EXIT 终止，则所有批处理文件处理都将停止（控制不会返回给调用者）。

如果您通过 CMD 命令执行第二个脚本，您可以保证控制权将返回给调用者（当然只要控制台窗口保持打开状态）。

```
cmd /c "calledFile.bat" 
```

但这有一个限制，即被调用的批处理设置的环境变量在返回时不会被保留。

我不知道有一个好的解决方案可以保证在所有情况下都返回并保持环境变化。

如果您在使用 CMD 时确实需要保留变量，那么您可以让“被调用”脚本将变量更改写入临时文件，然后让调用者读取临时文件并重新建立变量。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-02-06T14:52:56.947

`call`对于 .bat 或 .cmd 文件是必需的，否则控件将不会返回给调用者。
对于 exe 文件，它不是必需的。

`Start`不一样`call`，它创建一个新的 cmd.exe 实例，因此它可以异步运行一个*调用*的批处理文件

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-06T14:55:37.930

`CALL' 语句是在 MS-DOS 3.3 中引入的

它用于调用批处理文件中的其他批处理文件，而不中止调用批处理文件的执行，并且对两个批处理文件使用相同的环境。

所以在你的情况下，解决方案是使用`CALL`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-07-29T18:59:53.243

好吧，实际上我什至没有真正考虑过这样一个事实，即如果你调用一个批处理（不管是“类型”，即“.bat”或“.cmd”），如果你不调用它就不会返回使用通话。

尽管出于不同的原因，我一直在使用自己的电话，但实际上我很惊讶没有其他人提出。也许我错过了。也许我是世界上唯一一个知道的人！！:O

可能不会，但我将把这些知识放在这里，因为它非常有用。

如果您使用 call 您可以使用二进制逻辑运算符来决定如何根据 ERRORLEVEL 结果进行处理。事实上，我总是对 && 和 || 感到惊讶。存在于 DOS 中，不能以这种方式使用。嗯，这就是为什么。

最简单的测试方法是`return.cmd`使用记事本创建一个，或从命令提示符创建一个，如下所示：

```
c:\> type con >return.cmd 
```

您现在会注意到光标下降到下一行并挂起。进入：

```
@exit /B %1 
```

然后点击`ENTER`，然后`CTRL`-`Z`将创建该文件。好的！您现在可以随意尝试以下两个示例：

`call return.cmd 0 && echo Huzzah! A Complete Success! (Or cover up...)`

`call return.cmd 123 || echo Oops! Something happened. You can check ERRORLEVEL if you want the tinest amount of additional information possible.`

所以呢？好吧，在 0 和 123 交换的情况下再次运行它们，您应该会看到消息不会打印。

也许这个多行示例会更有意义。我经常用这个：

```
 call return.cmd 0 && @(
         echo Batch says it completed successfully^^!
     ) || @(
         echo Batch completed, but returned a 'falsey' value of sort.
         call echo The specific value returned was: %ERRORLEVEL%
     ) 
```

（请注意第二个“回声”之前部分中的“呼叫” `||`。我相信这就是人们在当天没有延迟扩展的方式。如果您确实启用了延迟扩展（通过批处理或启动中的 setlocal EnableDelayedExpansion一个命令提示符`cmd /v:on`然后你可以做！ERRORLEVEL！。）

......这是我必须道歉的地方，如果你`if ERRORLEVEL`过去有过创伤，你应该停止阅读。我得到它。相信我。我曾考虑在 Fiverr 上付钱让某人为我远程输入此内容，但为了完整起见，我只想为团队拿一个，并提到您还可以执行以下操作来检查错误级别：

```
 if ERRORLEVEL 123 @echo QUICK! MOTHERS, COVER YOUR CHILDREN'S EYES! FINGERS ARE BEING UNDONE! :'( 
```

如果您以前从未输入过，那就太好了！您将活得更久，而无需阅读为什么您没有得到您期望的结果。残酷是您要寻找的词，而不是“古怪”。

* * *

然而，我真正想要了解的重要部分是，如果你尝试这个并且不使用“调用”，它将始终执行“真实”分支。自己试试吧！

如果我遗漏了什么，或者您知道更好的方法，请告诉我。我喜欢学习这样的东西！

* * *

我提到的附加信息：

我已经知道很长一段时间了，您可以在命令之前放置重定向，如下所示：

```
 >nul echo. This won't be displayed! 
```

但前几天我无意中发现自己是个笨蛋，你显然也可以这样做：

```
 echo A B>file.txt C 
```

并且真的很惊讶地发现一个`file.txt`由“AB C”组成的。看来你可以把它们放在任何地方，甚至在命令里面。我从来没有见过有人这样做，也没有提到过，但我见过有人提到你可以在他们前面加上一行。

也许这是 Windows 10 独有的错误或其他问题。如果您有另一个版本并想尝试一下，请告诉我，我会对您发现的内容感兴趣。

保持书呆子！

# matplotlib - Matplotlib set_major_formatter AttributeError

> ID：14731879
> 
> 赞同：2
> 
> 时间：2013-02-06T14:50:01.503
> 
> 标签：matplotlib, formatter, attributeerror

我正在尝试使用 set_major_formatter 在 matplotlib 图上格式化 y 轴。该图生成正确，但 ax.yaxis.set_major_formatter() 引发了一些奇怪的错误。

**格式化程序：**

```
def mjrFormatter(x):
    return "{0:.0f}%".format(x * 100) 
```

**使用格式化程序的代码：**

```
 ...
 ax.yaxis.set_major_formatter(mjrFormatter)
 ... 
```

**错误：**

```
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-108-b436fe657a8b> in <module>()
----> 1 plot_func(data = data, figsize=(20,10), fig_title = 'title')

<ipython-input-107-d60ffc010a75> in plot_percent_moc(data, figsize, fig_title)
     16         _ = data2[col].plot()
     17 
---> 18     ax.yaxis.set_major_formatter(mjrFormatter)
     19 
     20     fig.suptitle(fig_title, fontsize = 14)

C:\Python27\lib\site-packages\matplotlib\axis.pyc in set_major_formatter(self, formatter)
   1396         self.isDefault_majfmt = False
   1397         self.major.formatter = formatter
-> 1398         formatter.set_axis(self)
   1399 
   1400     def set_minor_formatter(self, formatter):

AttributeError: 'function' object has no attribute 'set_axis'

---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
C:\Python27\lib\site-packages\IPython\zmq\pylab\backend_inline.pyc in show(close)
    100     try:
    101         for figure_manager in Gcf.get_all_fig_managers():
--> 102             send_figure(figure_manager.canvas.figure)
    103     finally:
    104         show._to_draw = []

C:\Python27\lib\site-packages\IPython\zmq\pylab\backend_inline.pyc in send_figure(fig)
    209     """
    210     fmt = InlineBackend.instance().figure_format
--> 211     data = print_figure(fig, fmt)
    212     # print_figure will return None if there's nothing to draw:
    213     if data is None:

C:\Python27\lib\site-packages\IPython\core\pylabtools.pyc in print_figure(fig, fmt)
    102     try:
    103         bytes_io = BytesIO()
--> 104         fig.canvas.print_figure(bytes_io, format=fmt, bbox_inches='tight')
    105         data = bytes_io.getvalue()
    106     finally:

C:\Python27\lib\site-packages\matplotlib\backend_bases.pyc in print_figure(self, filename, dpi, facecolor, edgecolor, orientation, format, **kwargs)
   2050                     orientation=orientation,
   2051                     dryrun=True,
-> 2052                     **kwargs)
   2053                 renderer = self.figure._cachedRenderer
   2054                 bbox_inches = self.figure.get_tightbbox(renderer)

C:\Python27\lib\site-packages\matplotlib\backends\backend_agg.pyc in print_png(self, filename_or_obj, *args, **kwargs)
    489 
    490     def print_png(self, filename_or_obj, *args, **kwargs):
--> 491         FigureCanvasAgg.draw(self)
    492         renderer = self.get_renderer()
    493         original_dpi = renderer.dpi

C:\Python27\lib\site-packages\matplotlib\backends\backend_agg.pyc in draw(self)
    437 
    438         try:
--> 439             self.figure.draw(self.renderer)
    440         finally:
    441             RendererAgg.lock.release()

C:\Python27\lib\site-packages\matplotlib\artist.pyc in draw_wrapper(artist, renderer, *args, **kwargs)
     52     def draw_wrapper(artist, renderer, *args, **kwargs):
     53         before(artist, renderer)
---> 54         draw(artist, renderer, *args, **kwargs)
     55         after(artist, renderer)
     56 

C:\Python27\lib\site-packages\matplotlib\figure.pyc in draw(self, renderer)
    997         dsu.sort(key=itemgetter(0))
    998         for zorder, a, func, args in dsu:
--> 999             func(*args)
   1000 
   1001         renderer.close_group('figure')

C:\Python27\lib\site-packages\matplotlib\artist.pyc in draw_wrapper(artist, renderer, *args, **kwargs)
     52     def draw_wrapper(artist, renderer, *args, **kwargs):
     53         before(artist, renderer)
---> 54         draw(artist, renderer, *args, **kwargs)
     55         after(artist, renderer)
     56 

C:\Python27\lib\site-packages\matplotlib\axes.pyc in draw(self, renderer, inframe)
   2084 
   2085         for zorder, a in dsu:
-> 2086             a.draw(renderer)
   2087 
   2088         renderer.close_group('axes')

C:\Python27\lib\site-packages\matplotlib\artist.pyc in draw_wrapper(artist, renderer, *args, **kwargs)
     52     def draw_wrapper(artist, renderer, *args, **kwargs):
     53         before(artist, renderer)
---> 54         draw(artist, renderer, *args, **kwargs)
     55         after(artist, renderer)
     56 

C:\Python27\lib\site-packages\matplotlib\axis.pyc in draw(self, renderer, *args, **kwargs)
   1046         renderer.open_group(__name__)
   1047 
-> 1048         ticks_to_draw = self._update_ticks(renderer)
   1049         ticklabelBoxes, ticklabelBoxes2 = self._get_tick_bboxes(ticks_to_draw,
   1050                                                                 renderer)

C:\Python27\lib\site-packages\matplotlib\axis.pyc in _update_ticks(self, renderer)
    933 
    934         interval = self.get_view_interval()
--> 935         tick_tups = [t for t in self.iter_ticks()]
    936         if self._smart_bounds:
    937             # handle inverted limits

C:\Python27\lib\site-packages\matplotlib\axis.pyc in iter_ticks(self)
    879         majorLocs = self.major.locator()
    880         majorTicks = self.get_major_ticks(len(majorLocs))
--> 881         self.major.formatter.set_locs(majorLocs)
    882         majorLabels = [self.major.formatter(val, i)
    883                        for i, val in enumerate(majorLocs)]

AttributeError: 'function' object has no attribute 'set_locs' 
```

**我做错了什么还是这是一个错误？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T15:34:47.150

该错误是因为`set_major_formatter`假设它正在获取一个`Formatter`对象（[doc](http://matplotlib.org/api/ticker_api.html#matplotlib.ticker.Formatter)），因此当它尝试对您的函数做一些事情时它会爆炸。

我认为您正在寻找`FormatStrFormatter`或`FuncFormatter`。（[文档](http://matplotlib.org/api/ticker_api.html#matplotlib.ticker.FuncFormatter)）

```
def mjrFormatter(x, pos):
    return "{0:.0f}%".format(x * 100)

gca().yaxis.set_major_formatter(mpl.ticker.FuncFormatter(mjrFormatter)) 
```

签名中的第二个参数是强制性的。

或（不符合您的要求，但密切相关）

```
gca().yaxis.set_major_formatter(mpl.ticker.FormatStrFormatter('%.2f%%')) 
```

# android - Android 开发者控制台上的崩溃和 ANR

> ID：14731884
> 
> 赞同：31
> 
> 时间：2013-02-06T14:50:10.990
> 
> 标签：android, crash, google-play, crash-reports, android-anr-dialog

我最近刚刚在 Google Play Store 上启动了一个应用程序，我正在探索开发者控制台并看到了`Crashes and ANR`.

ANR 代表什么？

此外，我的应用程序之前似乎在我朋友的某些手机上崩溃过，但他们无法“报告”此类崩溃。我应该如何启用这些功能，以便用户报告崩溃，以便我在开发者控制台的崩溃/ANR 选项卡下看到？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-06T14:59:07.477

ANR 代表应用程序无响应。如果您的应用在 UI 线程上做了很多工作，那么您将看到其中一个强制关闭/等待对话框。那是ANR。

至于崩溃报告，如果您的应用通过 Google Play 分发，则内置崩溃报告。当您的应用崩溃时，用户将看到一个对话框，其中包含“强制关闭”或“报告”选项。用户必须按下报告选项才能向您发送崩溃报告，否则您可能永远不会知道。

如果您不通过 Google Play 分发，您可能需要考虑像 ACRA 这样的库，它会通过电子邮件向您发送崩溃报告，将它们上传到 Google Docs 电子表格，或者您可以编写自己的自定义处理程序来处理崩溃报告。

关于 ACRA 的详细信息可以在这里找到：[http ://code.google.com/p/acra/](http://code.google.com/p/acra/)

下面是这些对话框的样例。左侧的关闭/报告对话框和右侧的 ANR。Android 3.0+ 位于顶部，较旧的对话框位于底部。

![在此处输入图像描述](../Images/3f900949ea0846a3b87b63ecc395c4d5.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T14:54:30.320

当应用程序崩溃时，会生成一个墓碑。从本质上讲，您的应用程序需要知道它的某些部分已崩溃（如果您依赖某些提供回调/状态的 API 或库）但如果它真的只是您的应用程序正在死去 - 您将很难确定它是崩溃还是不是。

“错误报告”不是您可以在 android 中使用的预制类，您可能必须自己推出一个。再说一次，还有 ACRA - [http://acra.ch/](http://acra.ch/)

一些链接：

[http://android-developers.blogspot.com/2010/05/google-feedback-for-android.html](http://android-developers.blogspot.com/2010/05/google-feedback-for-android.html)

[http://developer.android.com/distribute/googleplay/strategies/app-quality.html](http://developer.android.com/distribute/googleplay/strategies/app-quality.html)

# node.js - 亚马逊云，存储资产

> ID：14731885
> 
> 赞同：1
> 
> 时间：2013-02-06T14:50:12.533
> 
> 标签：node.js, mongodb, amazon-web-services, amazon-s3

我正在为一些共同工作创建一个网络应用程序。我有带有资产的文本（其中大多数是打印质量的图片，比如 5MB，总共大约每月 5GB）。

我将使用 EC2 实例作为 node.js 服务器和带有附加块存储的 mongodb 在亚马逊的云上托管它。

资产是对象私有的，因此不是每个人都可以访问它。

我应该如何处理资产？将它们保存为数据库中的二进制文件或将它们加载到 S3？（或任何其他亚马逊服务）

有人有这方面的经验吗？或者也许一些有用的链接。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:03:40.177

如果您需要进行访问控制，您可以做很多事情，但最明显的是通过您的 Web 服务器提供断言并让它实现所需的访问控制逻辑。您的应用程序可以通过来自 S3 或 MongoDB GridFS 的源对象进行代理。如果您已经在使用 MongoDB，在这种特殊情况下，我会使用 GridFS，除非您想要 S3 的一些成本节约功能，例如减少冗余存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T18:24:55.753

我可能会在没有公共访问权限的情况下将资产存储在 S3 上，然后您可以在需要时通过从您的网络服务器生成临时签名的 url 来授予授权用户访问权限。通过这种方式，您可以通过将存储脏工作移交给 S3 来利用服务器的复杂性，并且您仍然可以让您的文件仅由有权访问它们的人访问。

# java - 如何在 Neo4j 的密码查询中为一个键设置多个值？

> ID：14731889
> 
> 赞同：1
> 
> 时间：2013-02-06T14:50:24.763
> 
> 标签：java, neo4j, cypher

我正在使用一个我为每个用户都有记录的程序。我的用户有一个带有键的属性，`PhoneNumber`，它的值是一个字符串数组，`[454457,897356]`。例如，如果我想使用密码查询：

```
Start n=node(1)
Return n 
```

它为我的节点（一行）返回 1 条记录，列的值`PhoneNumber`是一个数组。但是我想根据我的数组中的值的数量来获得记录编号，这意味着对于我的示例，查询返回 2 条记录（2 行）并且其所有属性都相同，但在`PhoneNumber`其中一个列中具有值`454457`另一个有价值`897356`。有什么办法吗？我要更改我的密码查询还是在我的 java 代码中进行一些更改？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:02:53.127

在 Cypher 中还没有办法做到这一点。不过，我已经提交了一个请求：

[https://github.com/neo4j/neo4j/issues/30](https://github.com/neo4j/neo4j/issues/30)

# asp.net-mvc - 使用 JQuery post 提交部分视图时面临问题

> ID：14731890
> 
> 赞同：0
> 
> 时间：2013-02-06T14:50:27.650
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有一个像下面这样的区域。

![在此处输入图像描述](../Images/467484426e21a4cabb43b81bb9afab94.png)

**控制器类**

```
public class AdminController : Controller
{
    //
    // GET: /Admin/Admin/
    [HttpPost]
    public ActionResult Index_partialPost(AdminModule model)
    {
        return PartialView("_PartialPage1", model);
    }

    [HttpGet]
    public ActionResult Index_partial()
    {
        return PartialView("_PartialPage1");
    }

    [HttpGet]
    public ActionResult Index()
    {
        AdminModule model = new AdminModule();
        model.MyName = "My Name";
        return View("Index", model);
    }
} 
```

**看法**

```
@model _1.Areas.Admin.Models.AdminModule
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutPage1.cshtml";
}
<h2>
    Index</h2>
<div id="myForm">
    <p id="pid">
    </p>
</div>
<input id="BTN" type="submit" value="Button" />
<script language="javascript" type="text/javascript">
    $('#BTN').click(function(){
        $('#pid').load("@Url.Action("Index_partial", "Admin")");
    });
</script> 
```

**看法**

```
@model _1.Areas.Admin.Models.AdminModule
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutPage1.cshtml";
}
<h2>
    Index</h2>
<script src="/Scripts/jquery-1.5.1.min.js" type="text/javascript">
</script>
<div id="myForm">
    <p id="pid">
    </p>
</div>
<input id="BTN" type="submit" value="Button" />
<script language="javascript" type="text/javascript">
    $('#BTN').click(function(){
        $('#pid').load("@Url.Action("Index_partial", "Admin")");
    });
</script> 
```

**局部视图**

```
@model _1.Areas.Admin.Models.AdminModule
@using (Html.BeginForm())
{
    @Html.LabelFor(i => i.MyName)
    @Html.TextBoxFor(i => i.MyName)
    @Html.ValidationMessageFor(i => i.MyName)
    <p id="getDateTimeString">
    </p>
    <input type="submit" value="Click here" id="btn" />
}

<script language="javascript" type="text/javascript">
    $('#btn').click(function () {
        var url = '@Url.Action("Index_partialPost", "Admin")';
        $.post(url, null, function (data) {
        });
    });
</script> 
```

问题是 - 尝试使用 jQuery-post 发布部分视图时不起作用并给出 404。它使用下面提到的部分视图代码与 Ajax 一起工作

```
@model _1.Areas.Admin.Models.AdminModule
@using (Ajax.BeginForm("Index", "Admin", 
        new AjaxOptions { UpdateTargetId = "myForm", HttpMethod = "Post" }))
{
    @Html.LabelFor(i => i.MyName)
    @Html.TextBoxFor(i => i.MyName)
    @Html.ValidationMessageFor(i => i.MyName)
    <p id="getDateTimeString">
    </p>
    <input type="submit" value="Click here" id="btn" />
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:54:27.767

您应该通过单击处理程序返回 false 来取消表单的默认操作：

```
<script type="text/javascript">
    $('#btn').click(function () {
        var url = '@Url.Action("Index_partialPost", "Admin")';
        $.post(url, null, function (data) {
        });
        return false;
    });
</script> 
```

如果您不这样做，表单将提交到服务器，并且浏览器将重定向到目标 url，让您绝对没有时间执行 AJAX 请求。

请注意，订阅表单的 .submit 事件以执行 AJAX 请求而不是提交按钮的 .click 事件要好得多。原因很明显：除了单击提交按钮之外，还有其他方法可以提交表单。例如`Enter`，在输入字段内按下键。如果发生这种情况，您的 AJAX 将永远不会执行。

所以这是正确的方法。首先为您的表单提供一个唯一的 id：

```
@using (Html.BeginForm(null, null, FormMethod.Post, new { id = "myForm" }))
{
    @Html.LabelFor(i => i.MyName)
    @Html.TextBoxFor(i => i.MyName)
    @Html.ValidationMessageFor(i => i.MyName)
    <p id="getDateTimeString">
    </p>
    <input type="submit" value="Click here" id="btn" />
} 
```

然后你可以不显眼地 AJAXify 这个表单：

```
<script type="text/javascript">
    $('#myForm').submit(function () {
        $.ajax({
            url: this.action,
            type: this.method,
            data: $(this).serialize(),
            success: function(result) {

            }
        });
        return false;
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:58:17.570

我认为您需要在局部视图中定义 @Url.Action 的路由参数中的区域：

```
$('#btn').click(function () {
        var url = '@Url.Action("Index_partialPost", "Admin", new { area = "Admin"})';
        $.post(url, null, function (data) {
        });
}); 
```

否则它将被发布到您可能没有 AdminController 的主（根）区域...

您可以在呈现表单时仔细检查 JS 中的 URL 您的 HTML 源代码，它应该是“/Admin/Admin/Index_partialPost”，而不仅仅是“/Admin/Index_partialPost”

# java - Jung，以 gui/jframe 为节点的图形

> ID：14731898
> 
> 赞同：1
> 
> 时间：2013-02-06T14:50:50.787
> 
> 标签：java, user-interface, jung

我正在玩 JUNG 库，我想创建一个图形，其节点是一些 gui（大概是 jframe）项目。

我希望每个节点都有几个按钮、一个文本字段、菜单等。

我的问题是：这可能吗？

如果是，我还有两个问题：1\. 我应该如何处理它（我是 Java 新手，我不熟悉最佳实践） 2\. 我应该使用什么界面（我正在查看 .visualisation.decorators。*当前）。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:46:43.833

好的，最终我成功地创建了 JPanels 和 JFrames 的图表。我将继续使用 JPanels。结果如下：

![在此处输入图像描述](../Images/eb9e4a87e06a5477b3e78e0fb514ea5b.png)

但现在我面临一些其他问题：

1.  框架可以移动，但前提是它们在左上角被拾取。如何使整个 JPanel 区域可供选择？

2.  我需要 JPanel 可以访问，例如我应该能够按下按钮，在文本框中写一些文本（这还没有实现）并且可能调整 JPanel 的大小。目前，由于某种原因，JPanels 处于“非活动/无焦点”状态。我尝试了启用方法，没有成功。尝试了一些“专注”的方法，再次失败。

对以上两个问题有什么建议吗？

这是我的代码的样子：

```
import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.awt.geom.Point2D;

import javax.swing.BorderFactory;
import javax.swing.CellRendererPane;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

import edu.uci.ics.jung.algorithms.layout.CircleLayout;
import edu.uci.ics.jung.algorithms.layout.Layout;
import edu.uci.ics.jung.graph.DirectedSparseGraph;
import edu.uci.ics.jung.visualization.RenderContext;
import edu.uci.ics.jung.visualization.VisualizationViewer;
import edu.uci.ics.jung.visualization.control.DefaultModalGraphMouse;
import edu.uci.ics.jung.visualization.control.ModalGraphMouse;
import edu.uci.ics.jung.visualization.picking.PickedState;
import edu.uci.ics.jung.visualization.renderers.Renderer;
import edu.uci.ics.jung.visualization.transform.shape.GraphicsDecorator;

public class GraphPanel extends Container
{
    static final long serialVersionUID = 420001L;
    DirectedSparseGraph<Number, Number> graph = null;
    VisualizationViewer<Number, Number> vv = null;
    PickedState<Number> pickedState = null;

    public GraphPanel(Number[][] nodes_list)
    {
        try
        {
            graph = new DirectedSparseGraph<Number, Number>();
            construct_graph(nodes_list);

            vv = new VisualizationViewer<Number, Number>
                        (new CircleLayout<Number, Number>(graph), new Dimension(400, 400));
            vv.getRenderer().setVertexRenderer(new MyRenderer());

            // The vertex pick listener
            pickedState = vv.getPickedVertexState();
            pickedState.addItemListener(new ItemListener()
            {
                @Override
                public void itemStateChanged(ItemEvent e)
                {
                    Object subject = e.getItem();
                    if (subject instanceof Number)
                    {
                        Number vertex = (Number) subject;
                        if (pickedState.isPicked(vertex))
                        {
                            System.out.println("Vertex " + vertex + " is now selected");
                        }
                        else
                        {
                            System.out.println("Vertex " + vertex + " no longer selected");
                        }
                    }
                }
            });

            // The following code adds capability for mouse picking of
            // vertices/edges. Vertices can even be moved!
            final DefaultModalGraphMouse<Number, Number> graphMouse = new DefaultModalGraphMouse<Number, Number>();
            vv.setGraphMouse(graphMouse);
            graphMouse.setMode(ModalGraphMouse.Mode.PICKING);
        }
        catch (Exception e)
        {
            System.err.println("Failed to construct graph!\n");
            System.err.println("Caught Exception: " + e.getMessage());
        }
    }

    /*Attach the graph panel/container to a specified frame*/
    public void attach_to_frame(JFrame frame)
    {
        frame.setContentPane(vv);
    }

    /*This one should be reimplemented*/
    private void construct_graph(Number[][] nodes_list)
    {
        int i = 0;
        /*add the nodes*/
        for(i=0; i<nodes_list.length; i++)
        {
            graph.addVertex(i);
            graph.addEdge(nodes_list[i][0], nodes_list[i][1], nodes_list[i][2]);
        }
    }

    /*re-implement the render functionality to work with internal frames(JInternalFrame)*/
    static class MyRenderer extends JPanel implements Renderer.Vertex<Number, Number>
    {
        static final long serialVersionUID = 420000L;
        @Override
        public void paintVertex(RenderContext<Number, Number> rc,
                                Layout<Number, Number> layout, Number vertex)
        {
            try
            {
                GraphicsDecorator graphicsContext = rc.getGraphicsContext();
                Point2D center = layout.transform(vertex);
                Dimension size = new Dimension(100, 80);

                System.out.printf("Vertex[%d] X = %d Y = %d: Running paintVertex()\n", vertex, (int)center.getX(), (int)center.getY());

                JPanel sv = new JPanel();
                sv.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
                sv.setBackground(Color.GREEN);
                sv.setPreferredSize(size);
                sv.add(new JButton("Button1"));
                //OK
                graphicsContext.draw(sv, rc.getRendererPane(), (int)center.getX(), 
                                     (int)center.getY(), size.width, size.height, true);
            }
            catch (Exception e)
            {
                System.err.println("Failed to render images!\n");
                System.err.println("Caught Exception: " + e.getMessage());
            }
        }
    }

    public static void main(String[] args)
    {
        /*Create the window*/
        JFrame frame = new JFrame("BLABLA");
        Number[][] list = {{0, 1, 3}, {1, 3, 1}, {2, 2, 3}, {3, 2, 0}};
        GraphPanel g = new GraphPanel(list);
        g.attach_to_frame(frame);
        frame.getContentPane().setPreferredSize(new Dimension(640, 480));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }
}/*2*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:38:48.927

是的，这是可能的（我认为）。我建议您将 VertexLabeler 更改为您自己实现的。有点像...

```
VisualizationImageServer<V, E> vv = new ...;
vv.getRenderContext().setVertexLabelRenderer(new MyVertexRenderer());

class MyVertexRenderer extends JFrame implements VertexLabelRenderer {} 
```

但我不确定它在以后定位方面将如何工作。您可能还需要`VertexShapeTransofrmer`更改`vv.getRenderContext().setVertexShapeTransformer()`.

我必须说，我花了很多时间试图让 Jung 像[graphviz](http://www.graphviz.org/)一样很好地渲染图形，但收效甚微。

# formatting - Lotusscript：更改消息框的宽度

> ID：14731901
> 
> 赞同：1
> 
> 时间：2013-02-06T14:51:04.653
> 
> 标签：formatting, string-formatting, messagebox, lotusscript

简单易行：是否可以调整消息框的宽度？我在文档中找不到任何相关信息。我的消息框只使用了大约 50% 的可用屏幕宽度。但我需要这个空间才能有正确的格式。

此外，是否有可能以粗体字显示某些世界？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:01:46.253

除了可以在消息中添加行以强制对话框更高之外，您无法真正控制 messageBox，即使这样，宽度也可以被操作系统覆盖，从而导致截断，尽管我认为它不再那样做了.

如果您想显示基于表单的对话框，我建议您查看[@DialogBox](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_DIALOGBOX.html)或NotesUIWorkspace 类中的[DialogBox](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_DIALOGBOX_METHOD.html)方法。

以下是[有关正确创建这些的更多详细信息](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_DESIGNING_A_FORM_THAT_PRESENTS_A_DIALOG_BOX.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:23:11.360

感谢 Simon O'Doherty，这是对我有用的代码：

首先，我创建了一个表单`(DialogBox)`，其中包含一个名为`DIALOG_BOX_MESSAGE`

```
Set doc=db.CreateDocument
doc.Form="(DialogBox)"
Call doc.ReplaceItemValue("DIALOG_BOX_MESSAGE", "My fancy message, to be displayed")
Call ws.DialogBox("(DialogBox)", True, True, True, False, False, True, "Got a fancy title", doc) 
```

# android - 旋转设备并更改方向后重新创建活动

> ID：14731903
> 
> 赞同：0
> 
> 时间：2013-02-06T14:51:06.557
> 
> 标签：android, rotation, orientation, landscape, recreate

我在横向应用程序中使用 AndEngine。执行我的应用程序后，我将关闭设备并再次打开它。将设备旋转到纵向模式后，我正在解锁屏幕。然后我的申请就完成了。

在重新创建活动之前，我有下一个序列执行方法

```
02-06 16:13:57.317: W/OnCreate(2722): Tadammmmmmmmmm!!!
02-06 16:13:57.356: W/onLoadEngine(2722): Tadammmmmmmmmm!!!
02-06 16:13:58.270: W/onStart(2722): Tadammmmmmmmmm!!!
02-06 16:13:58.457: W/onResume(2722): Tadammmmmmmmmm!!!
02-06 16:13:58.942: W/onWindowFocusChanged(2722): Tadammmmmmmmmm!!!
02-06 16:13:58.942: W/onLoadScene(2722): Tadammmmmmmmmm!!!
02-06 16:13:59.122: W/onLoadComplete(2722): Tadammmmmmmmmm!!!
02-06 16:13:59.129: W/onResumeGame(2722): Tadammmmmmmmmm!!!
02-06 16:14:31.965: W/onPause(2722): Tadammmmmmmmmm!!!
02-06 16:14:32.137: W/onStop(2722): Tadammmmmmmmmm!!!
02-06 16:14:32.598: W/onWindowFocusChanged(2722): Tadammmmmmmmmm!!!
02-06 16:14:43.536: W/onDestroy(2722): Tadammmmmmmmmm!!! 
```

然后我在旋转设备之后有下一个序列，但在解锁屏幕之前

```
02-06 17:44:05.661: W/OnCreate(8784): Tadammmmmmmmmm!!!
02-06 17:44:05.684: W/onLoadEngine(8784): Tadammmmmmmmmm!!!
02-06 17:44:06.067: W/onStart(8784): Tadammmmmmmmmm!!!
02-06 17:44:06.122: W/onResume(8784): Tadammmmmmmmmm!!!
02-06 17:44:06.145: W/onPause(8784): Tadammmmmmmmmm!!!
02-06 17:44:07.942: W/onStop(8784): Tadammmmmmmmmm!!! 
```

然后我在解锁屏幕后有下一个序列

```
02-06 17:44:12.387: W/onStart(8784): Tadammmmmmmmmm!!!
02-06 17:44:12.450: W/onResume(8784): Tadammmmmmmmmm!!!
02-06 17:44:12.543: W/onPause(8784): Tadammmmmmmmmm!!!
02-06 17:44:12.551: W/onStop(8784): Tadammmmmmmmmm!!!
02-06 17:44:12.590: W/onDestroy(8784): Tadammmmmmmmmm!!! 
```

我不明白完全重新创建活动需要什么，并且不要将方向从横向更改为纵向。问题是 - 为什么活动没有重新创建完整和完成。

我找到了答案 - 添加清单 android:configChanges="...|screenSize" 以便不要重新创建我的活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:15:21.473

事实证明，在轮换期间，应用程序的几乎所有内容都可能发生变化。例如，考虑在 layout-port 和 layout-land 中具有不同布局的应用程序。这些布局可能有不同的字体、不同的视图树、不同的一切。在这种情况下，最有效的方法是完全重新创建 Activity。

往好的方面想！C-F11 是一种对应用程序的生命周期方法进行完整覆盖测试的方法。

# jquery - 将按钮单击转换为 require.js 样式编码

> ID：14731905
> 
> 赞同：4
> 
> 时间：2013-02-06T14:51:18.287
> 
> 标签：jquery, requirejs

我迷失了require.js。定义似乎总是在 require.js 示例页面中返回一些东西。

如何将以下内容转换为 require.js 样式编码？

```
$("button_1").click(function(event) {
    alert("button 1 has been clicked");
}); 
```

因为它`returns`什么都没有。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T17:13:32.347

我认为您缺少必需的部分。当您使用 AMD 时，您需要先“导入”其他模块，然后才能使用 em。看看下面的例子，它应该足以让你继续前进。通过使用 requrejs+jquery 下载：

**索引.html**

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <title></title>
  <script type="text/javascript" src="path/to/requirejs_jquery" data-main="path/to/main.js" ></script>
</head>
<body>
  <button id="button_1">sup</button>
</body>
</html> 
```

**主.js**

```
require(["jquery"],function($){ //import the jquery script 
  $(function(){
    $("#button_1").click(function(){
      alert("#button_1 got a click")
    })
  })
}) 
```

您还提到了定义，那就是当您想要声明一个新模块时，您可以稍后将其“导入”到您的项目中。所以让我们扩展升位并创建一个名为“my”的文件夹并将其放在主脚本旁边

**我的/module.js**

```
define(function(){
  return {
    foo: function(){alert("bar")},
    barz: function(){return "hey from barz"}
  }
}) 
```

现在我们可以简单地将它包含在主文件（或其他模块）中，如下所示：

**main.js**

```
require(["jquery", "my/module"],function($, module){ //import the jquery script 
  $(function(){
    $("#button_1").click(function(){
      alert("#button_1 got a click")
      console.log(module,"sup")
    })
  })
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T17:01:19.367

`$("button_1").click(function(event) {});`什么都不返回，因为您没有指定是否需要元素的`id`或`class`。

如果你想要元素的`id`：

例子： `<input id="button_1" type="button" />`

```
$("#button_1").click(function(event) {
    alert("button 1 has been clicked");
}); 
```

如果你想要元素的`class`：

例子： `<input class="button_1" type="button" />`

```
$(".button_1").click(function(event) {
    alert("button 1 has been clicked");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T11:46:21.760

我对您的问题的解释是：您想了解 require.js 和 AMD，并希望从一个精简到最低限度的示例开始。

我创建了[这个 jsfiddle](http://jsfiddle.net/martyk/Kk6Tb/4/)来说明您的 button_1 示例，并让您通过查看控制台和检查器的网络选项卡来玩弄 require.js 行为。

在 require.js 的核心是 main.js 文件，您可以在其中定义加载依赖项。我选择了一个简化的 shim 结构来定义依赖项：

```
requirejs.config({
    shim: {                // the shim structure controls your load dependencies
        'jquery': [],
        'sample1.amd': ['jquery'],    // the key denotes the module name, the value array lists the dependenc(y|ies)
        'sample2.amd': ['jquery']    // the key denotes the module name, the value array lists the dependenc(y|ies)
    },
    waitSeconds: 30            // maximum time to wait for the modules to load
});

require(
    [
        'jquery',
        'sample1.amd',
        'sample2.amd'
    ],
    function(
        $    // $ is the local instance of the defined module 'jquery' (see 1st plugin in dependency array above)
    ) {
        console.log("jQuery, sample1.amd.js and sample2.amd.js loaded through AMD");
    }
); 
```

您将通过指定以下内容来加载 main.js 文件（以及在 main.js 中定义的所有文件）：

```
<script src="/path-to/require-jquery.js" data-main="/path-to/main.js" ></script> 
```

您的按钮单击定义包含在 sample1.amd.js 中。出于演示目的，我*还在*sample2.amd.js 中包装了相同的按钮单击定义。这就是为什么在演示中，当您单击按钮时，您会在控制台中看到 2 条日志消息。

当您检查网络选项卡中的加载行为时，您还可以注意到使用 require.js 可能获得的积极性能影响：sample1.amd.js 和 sample2.amd.js*并行*加载- 无论依赖关系如何，require。 Node.js 总是会尽可能早地加载模块，只有它们的执行会根据它们的依赖关系排队。

这是[我的 jsfiddle](http://jsfiddle.net/martyk/Kk6Tb/4/)的链接。希望这能让你开始使用 require.js

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T16:29:27.120

[在 RequireJS 站点上](http://requirejs.org/docs/jquery.html)有一个很好的解释如何设置 RequireJS 和 jQuery 。下载[组合的 jQuery 和 RequireJS 文件](http://requirejs.org/docs/jquery.html#get)是最简单的。这不是绝对必要的，因为您应该能够正常包含 jQuery 并使用 AMD 加载其他所有内容，但我自己还没有彻底测试过。我使用组合的 jQuery + RequireJS 文件，因为一旦掌握了它就非常简单。

在您想要做的*最简单的情况下（例如，如果您有一个想要作为 jQuery 的依赖项运行的主**脚本*），您只需要包含`require.js`在您的 HTML 文件中，如下所示：

```
<script data-main="path/to/yourScript.js" src="path/to/require.js"></script> 
```

确保将您的脚本包含在 script 标签的 data-main 属性中。然后，在 中`yourScript.js`，您将像这样包装您的代码：

```
/* yourScript.js */
require(['jquery'], function($) {
    // Use jQuery normally.
    $("#button_1").click(function(event) {
        alert("button 1 has been clicked");
    });        
}); 
```

现在，这是最简单的命令式示例，根本没有真正使用 AMD 范例或动态依赖项。但它可以作为一个粗略的工作示例。现在，如果您想将`$("button_1").click`函数包装在 AMD 模块中，您可以创建一个`button1.js`文件并将其包装在`define()`调用中：

```
/* button1.js */
define(['jquery'], function($) {
    // The following code will be run when this module is loaded.
    $("#button_1").click(function(event) {
         alert("button 1 has been clicked");
    });
    return {name: "button1 module!"}; 
    // Above, I'm just illustrating that AMD modules usually 
    // return an object or a function to pass to the anonymous 
    // function that's called when they're loaded by a dependency.
});

/* yourScript.js */
require(['jquery', 'button1'], function($, button1) {
    alert(button1.name); // This will alert with "button1 module"
}); 
```

带回家的一点是，两者都`define()`采用`require()`一组依赖项（它们只是 .js 文件名，可以选择不带 .js）和一个函数作为参数。然后他们将执行在这些文件中找到的代码，将返回的值作为参数传递给他们的函数参数。这有点过于简化了加载和依赖方案，但它应该足以让您入门。

我在这里写了一个实时的工作示例：[https ://c9.io/aphazel/requirejs-simple-example](https://c9.io/aphazel/requirejs-simple-example)

PS，您可能想使用`$('#button_1')`或`$('.button_1')`:)

# android - 如何编辑android os键盘的源代码？

> ID：14731906
> 
> 赞同：9
> 
> 时间：2013-02-06T14:51:22.920
> 
> 标签：android

我使用 android 键盘，但我想添加一排键，所以我从[https://android.googlesource.com/platform/packages/inputmethods/LatinIME/](https://android.googlesource.com/platform/packages/inputmethods/LatinIME/)下载了这个键盘的源代码，但我面临以下错误

导入com.android.inputmethodcommon 无法解析

```
import com.android.inputmethodcommon.InputMethodSettingsFragment; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:56:13.583

您可以在 Android 中创建自己的自定义键盘以显示任何数字或键。使用[`Keyboard`](http://developer.android.com/reference/android/inputmethodservice/Keyboard.html),[`Keyboard.Row`](http://developer.android.com/reference/android/inputmethodservice/Keyboard.Row.html)和[`Keyboard.Key`](http://developer.android.com/reference/android/inputmethodservice/Keyboard.Key.html)

有关键盘的更多自定义，请查看此[博客文章](http://tutorials-android.blogspot.com/2011/06/create-your-own-custom-keyboard-for.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-09T08:19:16.567

我不知道你是否还需要这方面的帮助，但你不需要 imePreferences 文件，你可以删除它。您想转到 xml 文件夹和 qwerty.xml 文件，您可以在其中添加和更改行和键。只需使用您想要的键添加一行。

```
<Keyboard xmlns:android="http://schemas.android.com/apk/res/android"
android:keyWidth="10%p"
android:horizontalGap="0px"
android:verticalGap="0px"
android:keyHeight="@dimen/key_height"
>

<Row>
    <Key android:codes="113" android:keyLabel="q" android:keyEdgeFlags="left"/>
    <Key android:codes="119" android:keyLabel="w"/>
    <Key android:codes="101" android:keyLabel="e"/>
    <Key android:codes="114" android:keyLabel="r"/>
    <Key android:codes="116" android:keyLabel="t"/>
    <Key android:codes="121" android:keyLabel="y"/>
    <Key android:codes="117" android:keyLabel="u"/>
    <Key android:codes="105" android:keyLabel="i"/>
    <Key android:codes="111" android:keyLabel="o"/>
    <Key android:codes="112" android:keyLabel="p" android:keyEdgeFlags="right"/>
</Row> 
```

# file-upload - Yii 表单生成器

> ID：14731910
> 
> 赞同：2
> 
> 时间：2013-02-06T14:51:31.707
> 
> 标签：file-upload, yii, formbuilder

我一直在研究基于 Yii 的应用程序。而且我遇到了奇怪的事情...

我想要做的是将 input(type=file) 添加到表单中。表单是通过表单构建器（`CForm`类）创建的。但是输入不会出现。

我的代码。控制器/动作：

```
$model=MyModel::model()->findByPk(700);
$model->scenario='my-scenario';
$form=new CForm('path.to.forms.my-form', $model);

$this->render('view', array('form'=>$form)); 
```

看法：

```
echo $form 
```

表单配置：

```
return array(
    'attributes' => array(
        'enctype' => 'multipart/form-data',
    ),
    'elements' => array(
        'name' => array(
            'type' => 'text',
        ),
        'image' => array(
            'type' => 'file',
        ),
    ),
    'buttons' => array(
        'save' => array(
            'type' => 'submit',
            'label' => 'Save',
        ),
    ),
); 
```

模型：

```
//.....
public $image;
// ....
public function rules()
{
    return array(
    //...
        array('image', 'file', 'types'=>'png', 'on'=>'my-scenario'),

    );
} 
```

使用上面的代码，我希望看到两个字段 - 文本和文件。但只出现文本一个。

如果我将`file`验证器更改为`required`- 它可以工作，但我需要文件验证器。

我正在使用 Yii 1.1.13 版。

最有趣的是，上面的代码在早期的 Yii(1.1.9) 中可以正常工作。这是新版本中的已知错误吗？如果是 - 有解决方案吗？还是我必须回滚到以前的版本？

提前致谢。

**更新：**

> > 如果您添加第二个验证器（一个用于文件，一个用于必需），它是否有效？

不，它没有。我相信我找到了原因。见下文。

> > 这似乎是由 CForm 中的这一行引起的。

是，对的。昨天，带着调试器，我更深入了:)

`CFormElement::getVisible()`最终调用`CModel::isAttributeSafe()`and `CModel::getSafeAttributeNames()`。

[`CForm::getSafeAttributeNames()`](https://github.com/yiisoft/yii/blob/1.1.13/framework/base/CModel.php#L542) 获取所有模型验证器，只留下安全的。我们可以看到[CFileValidator 是不安全的](https://github.com/yiisoft/yii/blob/1.1.13/framework/validators/CFileValidator.php#L133)。

`required`因此，分配属性的安全验证器（或任何其他）有多少并不重要。`CForm::getSafeAttributeNames()`如果至少有一个 unsafe( `file`)，则将其从白名单中删除。自 1.1.12 版本以来，文件验证器不安全。这就是为什么它在 1.1.9 中完美地为我工作:)

因此问题出在 CFileValidator 中（或至少与它相连）而不是 CForm 中。

到目前为止我能看到的唯一一个解决方案是创建自己的验证器，它从标记为安全的 CFileValidator 扩展并使用它而不是内置的。但我什至无法想象它可能会导致什么问题（我相信 Yii 开发人员有充分的理由制作它不安全）。

我希望这对某人有所帮助。

**更新 2**

`array('image', 'file', 'safe'=>true, 'types'=>'png', 'on'=>'my-scenario')`

此验证规则（显式`safe=true`）也有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:12:57.730

如果您添加第二个验证器（一个用于文件，一个用于必需），它是否有效？我自己最近遇到了这个问题。

这似乎是由[CForm 中的这一行](https://github.com/yiisoft/yii/blob/1.1.13/framework/web/form/CForm.php#L507)引起的：

```
if($element->getVisible())
{
    ...
} 
```

getVisible 检查当前模型场景的活动验证器，并忽略当前验证器规则中未使用的任何输入。我最终在我们的系统的自定义 CForm 模型中注释掉了一些东西，但是如果你找到更适合你的东西，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T09:51:39.450

问题已在 github 上发布

[https://github.com/yiisoft/yii/issues/2089](https://github.com/yiisoft/yii/issues/2089)

# java - 使用默认编辑器工具包将文本放在系统剪贴板上

> ID：14731913
> 
> 赞同：0
> 
> 时间：2013-02-06T14:51:39.490
> 
> 标签：java, swing, clipboard

我已经尝试了一个月来可靠地在我的程序中设置系统剪贴板。目前它的工作效率约为 95/100 次。但我一直在寻找。

昨天我遇到了这个[Java DefaultEditorKit.copyAction](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/text/DefaultEditorKit.CopyAction.html)并在里面死了一点，因为已经写了一些可以做我想要的东西。

虽然问题是这是一个对话框的“动作”？

如何发出要复制到剪贴板的文本？我不希望将此“操作”附加到我的应用程序中的任何按钮/组件。我希望能够做到

```
DefaultEditorKit.copyAction("Put this on Clipboard"); 
```

但这是未定义的。我不确定如何触发这个“动作”并给它一些文本来使用？

编辑：这是我的导致异常的代码。

```
public void setClip2(String arg)
{
    while(true) 
    {
        try
        {
            sysClip.setContents(new StringSelection(arg), null);
        }
        catch(Exception e)
        {
            try {Thread.sleep(20);} catch (InterruptedException e1) {}
            continue;
        }
        break;
    }
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:45:34.607

> 我只是想知道是否有办法可靠地设置剪贴板。（如果你没有等待足够长的时间来设置它，这个方法会失败，这通常是大约 1-2 秒

不知道为什么你必须等待设置剪贴板的内容。

该程序每 200 毫秒刷新一次剪贴板没有任何问题。也就是说，每次按预期显示时，数字都会增加 1：

```
import java.awt.*;
import java.awt.datatransfer.*;
import java.io.*;

class ClipboardLoopTest
{
    public static void main(String[] args)
        throws InterruptedException
    {
        for (int i = 0; i < 100; i++)
        {
            //  add data to clipboard

            try
            {
                Clipboard c = Toolkit.getDefaultToolkit().getSystemClipboard();
                StringSelection testData;
                testData = new StringSelection( "Test: " + i );
                c.setContents(testData, testData);

                //  Get clipboard contents, as a String

                Transferable t = c.getContents( null );

                if ( t.isDataFlavorSupported(DataFlavor.stringFlavor) )
                {
                    Object o = t.getTransferData( DataFlavor.stringFlavor );
                    String data = (String)t.getTransferData( DataFlavor.stringFlavor );
                    System.out.println( "Clipboard contents: " + data );
                }
            }
            catch(Exception e)
            {
                System.out.println(e);
            }

            Thread.sleep(200);
        }

        System.exit(0);
    }
} 
```

我在 Windows 7 上使用 JDK 7。

也许您可以发布演示问题的 SSCCE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:00:15.363

`DefaultEditorKit.copyAction`实际使用（通过某些层）java.awt.datatransfer 中的功能。在那里你会找到将数据发送到剪贴板的类。

基本上，如果您只想在不使用任何 Swing 组件的情况下将字符串发送到剪贴板，则设置 a `ClipboardOwner`，创建一个`StringSelection`对象并将其提供给系统剪贴板。这是一个最基本的例子：

```
Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
clipboard.setContents( new StringSelection("Put this on Clipboard"), new ClipboardOwner() {

    @Override
    public void lostOwnership(Clipboard clipboard, Transferable contents) {
      System.out.println("I am no longer the clipboard owner.");
    }
} ); 
```

# java - 如何将某些 Web 服务方法限制为某些用户？

> ID：14731921
> 
> 赞同：0
> 
> 时间：2013-02-06T14:52:11.667
> 
> 标签：java, web-services

我的问题是，我有一个用 Java 编写的 Web 服务，我想给用户特定的授权，例如，userA 应该只访问 methodA，userB 应该只访问 methodB。我怎样才能做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:56:24.667

我认为最简单和最标准化的方法是使用 spring security，我发现它很容易使用，在这里阅读更多信息：[http ://www.mkyong.com/tutorials/spring-security-tutorials/](http://www.mkyong.com/tutorials/spring-security-tutorials/)

如果您出于某种原因不想要它，那么 javax.servlet.Filter 就是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:56:18.450

您可以通过多种方式执行此操作，这完全取决于您的部署。但就像在黑暗中拍摄一样，您可以在 web.xml 中限制它。

在 web.xml 中创建安全约束...

```
 <security-constraint>
            <web-resource-collection>
                    <web-resource-name>MRC Customer Care</web-resource-name>
                    <url-pattern>/protected/*</url-pattern>
            </web-resource-collection>
            <auth-constraint>
                    <role-name>role1</role-name>
            </auth-constraint>
    </security-constraint> 
```

然后，将此角色 (role1) 映射到用户...

```
<tomcat-users>
  <user name="role1"  password="tomcat" roles="role1"  />
</tomcat-users> 
```

假设您的 Web 服务所在的位置，有效用户将能够在 /protected/ 处访问您的 URI，无效用户将收到 403。

这是一个潜在的答案。

# c++ - 将文本文件的最后一个编号分配给变量 C++

> ID：14731924
> 
> 赞同：0
> 
> 时间：2013-02-06T14:52:26.257
> 
> 标签：c++, variables, fstream

我正在做一个用 fstream 输出素数列表的程序。

到目前为止我有这个：

```
int export_list (int lim = 50)
{
    int x;
    last_in_txt = ????????????; // assigns last number on txt

    ofstream file ("Primes.txt" , ios::app);

    if (file.is_open()) // if it opens correctly
    {
        for (x = last_in_txt ; x < lim ; x++)
        {
            if (check_prime (x)) // returns 1 when x is prime, returns 0 when not
            {
                file<< x << " ";
            }
        }
        cout << "Done!" << endl << pressenter;
        cin.get();
    }
    else
    {
        cout << "Unable to open file" << endl << pressenter;
        cin.get();
    }
    return(0);
} 
```

因此，如您所见，这应该在 Primes.txt 中附加一个素数列表，从素数 1234547 开始。

Primes.txt 看起来像这样：

```
2 3 5 7 11 13 17 19 23 29 31 37 (...) 1234543 1234547 
```

我的问题是如何将`1234547`（这是 txt 的最后一个数字）分配给变量`last_in_txt`？

其他（不那么重要）问题：我应该以我目前的方式保存数字，还是应该将每个数字存储在单独的行中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:56:59.867

一种简单的方法：继续读取并分配，直到读取整个文件。

例如，

```
int last_in_txt = 0;
{
    ifstream infile("Prime.txt");
    int k;
    while(infile >> k) {
        last_in_txt = k;
    }
}
// Now last_in_txt is assigned properly, and Prime.txt is closed 
```

无论其中的数字`Prime.txt`是由空格字符 ( `' '`) 还是由换行符 ( `'\n'`) 分隔，这都能正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:57:58.943

我的建议是您使用二进制格式写入文本文件（使用`wb`in `C`）。在这种情况下，您将知道最后一个数字占用了多少字节，并且您将能够使用`seekg`和`tellg`获取它。如果您使用纯文本格式，则必须从最后一个字符一个字符地读取，这更容易出错并且速度也较慢。

# javascript - Chrome 和 Opera 不会使用 Javascript 将文本附加到 div

> ID：14731930
> 
> 赞同：0
> 
> 时间：2013-02-06T14:52:51.030
> 
> 标签：javascript, google-chrome, opera

我遇到了 Chrome 和 Opera 的问题，我似乎不知道如何解决。我有一个带有 javascript 的弹出窗口拦截器检测器，如果启用了拦截器，它将在 div 中打印出“请为此站点启用弹出窗口”。这适用于 FF、Safari 和 IE，但不适用于 Chrome 和 Opera。在这两个浏览器中，我确实让 div 折叠并显示出来，但里面没有文本。任何人都可以解决这个问题并知道发生了什么？谢谢！

**JS**

```
function detectPopupBlocker() {
    var alertDiv = document.getElementById('popupAlert');
    console.log(alertDiv); // This prints to the console in Chrome and Opera
    var popupTest = window.open("about:blank","","directories=no,height=100,width=100,menubar=no,resizable=no,scrollbars=no,status=no,titlebar=no,top=0,location=no");
    if (!popupTest) {
        alertDiv.innerHTML += 'Your popup blocker is detected.<br />Please enable popups for this site.';
    } else {
        popupTest.close();
    }
}
window.onload = detectPopupBlocker; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:11:29.627

当启用弹出窗口阻止程序时，使 window.open() 返回一个假窗口对象有（或曾经）两个很好的理由：

1.  某些网站/应用程序可能会尝试检测弹出窗口阻止并强制用户禁用阻止程序并忍受广告和其他滥用

2.  回到我们实现弹出窗口阻止的时候，我们经常看到如果没有返回对象就会中断的脚本。即，如果他们想检查 win.closed 但“win”设置为未定义。

由于某些浏览器以不同的方式实现弹出窗口阻止，因此可能不再需要此“功能”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T17:33:59.463

Opera 和 Chrome 从 中返回一个对象`window.open()`，即使弹出窗口被阻止，因此执行将直接跳转到`else`这些浏览器中的 。这意味着，您无法使用当前代码检测 Chrome 或 Opera 中是否启用了弹出窗口阻止程序。

但是，您可以尝试`popupTest`检测`about:blank`.

```
var isPopup = false,
    popupTest = window.open(...);
try {
    if (popupTest.document.getElementById('a_known_id')) {
        isPopup = true;
    }
} catch (err) {isPopup = false;}
if (isPopup) {...} 
```

# android - 在 Android 中更改 ProgressBar fps

> ID：14731932
> 
> 赞同：2
> 
> 时间：2013-02-06T14:52:54.093
> 
> 标签：android, android-progressbar

我使用一个`ProgressBar`in xml Android 总线很慢。最佳为 60fps。是否可以更改帧速率或添加具有更多 fps 的自定义进度圈？

```
 <ProgressBar
                    android:id="@+id/progressBar1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="17dp"
                    android:layout_gravity="center" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T14:56:41.747

您可以使用以下方法修改持续时间：

```
android:indeterminateDuration=<duration in ms> 
```

[http://developer.android.com/reference/android/widget/ProgressBar.html#indeterminateDuration](http://developer.android.com/reference/android/widget/ProgressBar.html#indeterminateDuration)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:35:29.217

解决方案：添加图片并使用动画360度旋转：

```
<ImageView
  android:id="@+id/resultados_estado_carga_imagen"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:src="@drawable/cargador"
  android:layout_gravity="center" />

...

final ImageView resultados_estado_carga_imagen = (ImageView) findViewById(R.id.resultados_estado_carga_imagen);

RotateAnimation anim = new RotateAnimation(360, 0, Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);

anim.setInterpolator(new LinearInterpolator());
anim.setRepeatCount(Animation.INFINITE);
anim.setDuration(700);

resultados_estado_carga_imagen.startAnimation(anim); 
```

谢谢 ：）

# windows-phone - 视窗手机开发

> ID：14731935
> 
> 赞同：1
> 
> 时间：2013-02-06T14:53:00.067
> 
> 标签：windows-phone, voip

我想为移动电话平台（使用 Windows Mobile 7.1 或更高版本的移动电话）开发一个独立于 PBX 的软件电话应用程序，以便它可以与 Asterisk、Askozia、3CX 和任何其他类型的 VoIP PBX 一起使用，而无需需要将其他软件放入和/或 PBX。我知道这种应用程序是存在的，因为我在其他平台上使用过它，比如 3CX 客户端或 BRIA 客户端，都适用于 iOS。我拥有构建此类应用程序所需的所有 Microsoft 工具和 sdk，并正确配置并正常工作。我已经为手机平台构建了其他应用程序。

我找到了 Ozeki VoIP SIP SDK 的免费试用版，并从[http://voip-sip-sdk.com/p_21-download-ozeki-voip-sip-sdk-voip.html下载了最新版本的库](http://voip-sip-sdk.com/p_21-download-ozeki-voip-sip-sdk-voip.html)并安装它。虽然我能够轻松构建示例软件电话项目，但我不明白如何为手机构建软件电话。由于我看到与软电话相关的类在 VoIPSDK.dll 中，我还尝试在 Windows Phone 项目中添加对 VoIPSDK.dll 的引用，但 Visual Studio 给出了一个错误，抱怨“不支持的库”。所以，我现在需要做的是，因为这是我们的主要目的，这个库是否可以为移动平台构建一个软电话？万一，我可以提供有关如何在这些平台上使用 Ozeki SDK 库的示例或说明吗？也许，我应该创建另一个应用程序（媒体网关），它应该位于 pbx 和手机应用程序之间。你有使用这个库和移动应用程序的经验吗？

# java - 未指定密码的 JDBC MySQL 连接

> ID：14731937
> 
> 赞同：0
> 
> 时间：2013-02-06T14:53:13.093
> 
> 标签：java, mysql, connection

是否可以在不指定 Java 代码中的用户名和密码的情况下连接到 MySQL 数据库：

`Connection con=DriverManager.getConnection("database url","username","password");`

或者有什么方法可以使用 Java 更改用户名和密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-28T09:00:48.020

还有另一种同名匿名连接方法（无需用户名或密码）：

```
Connection con=DriverManager.getConnection("database url"); 
```

来源：[https ://docs.oracle.com/javase/7/docs/api/java/sql/DriverManager.html](https://docs.oracle.com/javase/7/docs/api/java/sql/DriverManager.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:36:37.947

我不知道你是否可以设置一个默认用户，但你肯定可以设置一个没有密码的用户。

至于第二个问题，假设您的连接在 MySQL 中具有足够的权限，您当然可以为任何用户设置密码。最基本的方法是这样做：

```
update user set password=password('new_pass') where user = 'someuser'; 
```

或者，您可能还想在 where 子句中指定主机字段。这需要在 msql 数据库中运行。

# delphi - 在delphi中使用SelectDirectory时从根目录向上搜索

> ID：14731938
> 
> 赞同：2
> 
> 时间：2013-02-06T14:53:22.517
> 
> 标签：delphi, directory

我`SelectDirectory`在delphi中使用该功能来选择一个文件夹。我将根目录设置为用户正在寻找的项目应该在的默认目录。但是，如果我希望能够在我所在的“上方”导航，那么我就无法做到。

例如：

假设默认文件夹是`C:\Program files\Default`文件夹，当我在那里时，我可以查看所有文件夹并选择我想要的文件夹。但是，如果我想返回程序文件以查找另一个文件夹，那么我不知道该怎么做。

我也考虑过使用 TOpenDialog 但我发现我无法选择文件夹并查看文件夹中存在的文件（在 中很重要的设置`SelectDirectory`）。

有没有办法在根文件夹上方导航或可能打开级联到文件夹的窗口，因为它会显示好像有人已经从计算机导航到根文件夹？

代码：

```
SelectDirectory('Please select a directory', RootSearchLocation, ChosenDirectory,
               [sdShowEdit, sdNewUI, sdShowFiles, sdValidateDir], self); 
```

其中 RootSearchLocation 是`C:\Program files\Default`文件夹，ChosenDirectory 是用户选择的目录。

需要更多信息让我知道。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T15:43:31.677

无法在浏览文件夹对话框中从指定的“根”文件夹向上导航。但是您可以指定一个空的“根”，并在“目录”参数中填写您希望对话框最初导航的目录。

# c - 在 c 中存储已知的键/值对

> ID：14731939
> 
> 赞同：16
> 
> 时间：2013-02-06T14:53:23.523
> 
> 标签：c, key-value

我目前正在学习c。我正在编写一个 Web 服务器作为练习。
现在我必须存储状态代码和原因短语。

存储这些键/值对的最佳方式是什么？

我的第一个赌注是哈希图。但是c中没有本机实现。所以我不得不使用图书馆。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T15:34:43.770

这是另一种想法，它具有速度优势，同时具有一些内存开销。

基本上，哈希表的最简单形式，其中哈希函数是身份（代码->代码），也称为查找表。

为此，知道 HTTP 状态代码限制为 5xx，您可以假设 599 将是您需要的最高值，因此您将创建一个包含 600 个元素的表。

该表可以这样完成：

```
const char * status_messages[600]; 
```

初始化非常简单：

```
/* initialize all with NULL's so invalid codes correspond to NULL pointers */
memset(status_messages, (int)NULL, 600 * sizeof(const char *));
/* ... */
status_messages[403] = "Forbidden";
status_messages[404] = "Not found";
/* ... */ 
```

查找消息也非常简单：

```
int  code = 403;
const char * message = status_messages[code]; 
```

这个数组将有 2400 字节大（在 64 位平台上为 4800），但访问时间保证为 O(1)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-06T16:41:20.253

与其他答案一样，我也建议仅使用字符串数组作为查找表。如果您假设所有状态代码都是唯一的，那么对于较小的数据集，字符串数组是迄今为止最简单的实现。

一旦您开始存储大量数据，这就是哈希图开始变得有用的时候。查找数组是这里的解决方案，但是正如您所说您正在学习 C，您实际上可以通过使用动态内存在本机 C 中实现哈希表（对于 C 而言，这是一个学习的关键概念。）该网站解释了如何在C 非常好。

[http://www.sparknotes.com/cs/searching/hashtables/section3.rhtml](http://www.sparknotes.com/cs/searching/hashtables/section3.rhtml)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-06T14:55:30.627

我会使用排序数组。

您可以按任何顺序定义数组，并在运行时（一次）使用该[`qsort()`](http://linux.die.net/man/3/qsort)函数对其进行排序。然后您可以使用[`bsearch()`](http://linux.die.net/man/3/bsearch). 响应码的总数很少，二分查找会很快。

对于像这样简单的事情，这具有不需要任何外部代码的优点。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-06T14:55:31.103

也许您可以创建一个包含 K\V 的结构。

像这样：

```
struct key_value
{
   int key;
   char* value;
};

struct key_value kv;

kv.key = 1;
kv.value = "foo"; 
```

# python - 为什么条件运算符没有给出预期的结果（在 Python 中）？

> ID：14731941
> 
> 赞同：0
> 
> 时间：2013-02-06T14:53:25.200
> 
> 标签：python

对于给定的 Python 代码，谁能帮我找出为什么我没有得到预期的结果？

```
i=1
j="Hello"
k="World"
while i<101:
    if i%15==0: # thanks for answers, this is an extra if which I forgot to remove
        print j+k if i%15==0 else j if i%3==0 else k if i%5==0 else i
    i+=1 
```

我的期望：

```
1
2
Hello
4
World
Hello
7
.
14
HelloWorld
.
. 
```

但结果是：

```
HelloWorld
HelloWorld
HelloWorld
HelloWorld
HelloWorld 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:57:41.963

```
if i%15==0:
    print j+k if i%15==0 else j if i%3==0 else k if i%5==0 else i 
```

第二行将仅在 时执行`i%15 == 0`，因此打印的第一个条件将始终为真。也就是说，每次执行第二行时，`i%15 == 0`都会`j+k if i%15==0`打印`j+k`.

如果您删除该行`if i%15==0:`，那么您应该得到您期望的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:57:21.807

因为 print 语句在模数检查中，所以 print 语句只能达到 15 的倍数。

在 print 语句中，如果 i 可以被 15 整除，则满足第一个 if 条件。

由于这些原因，将打印的唯一可能值是`j+k`或 HelloWorld。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:59:06.020

因为仅在 i%15 等于 0 的情况下才评估以`if i%15==0`开头的行`print`。在这些情况下，条件语句中的第一个“if”查询为真，这导致评估第一个“then”情况`print j+k`而不是第一个“其他”情况，即`j if i%3==0 else k if i%5==0 else i`.

编辑：请注意，仅当“if”查询为假时才执行“else”案例 - 无论“else”语句中的进一步“if”查询是否为真。

# jprofiler - JProfiler 窗口启动后不可见

> ID：14731943
> 
> 赞同：0
> 
> 时间：2013-02-06T14:53:26.390
> 
> 标签：jprofiler

JProfiler 7.2.2 启动后 - 我没有看到主窗口。我在 Windows 7 中使用 JProfiler 并继续在任务管理器中查看进程并作为启动栏中的活动按钮而没有任何错误，但窗口对我来说是隐藏的。

环境：

*   包含 JRE 的 JProfiler 7.2.2
*   视窗 7 x64
*   机器上安装的 Java 1.6.0_30

我已经尝试过的：

*   重新安装 JProfiler（从旧版本到最新的 7.x 版本）
*   重新启动操作系统
*   试图在评估模式下启动它

除了明显的问题“如何解决它？”，还有更多可以帮助我解决问题的问题：

1.  如何为 JProfiler 启用日志记录以及在哪里可以访问这些日志？
2.  JProfiler 提供了哪些其他工具来分析其行为？

JProfiler 进程有一个堆栈跟踪：

```
2013-02-07 13:58:42
Full thread dump Java HotSpot(TM) 64-Bit Server VM (23.6-b04 mixed mode):

"jprofiler_ius" prio=6 tid=0x000000000d868000 nid=0x1870 runnable [0x000000001227f000]
   java.lang.Thread.State: RUNNABLE
    at java.net.TwoStacksPlainDatagramSocketImpl.receive0(Native Method)
    - locked <0x00000000e41af968> (a java.net.TwoStacksPlainDatagramSocketImpl)
    at java.net.TwoStacksPlainDatagramSocketImpl.receive(Unknown Source)
    - locked <0x00000000e41af968> (a java.net.TwoStacksPlainDatagramSocketImpl)
    at java.net.DatagramSocket.receive(Unknown Source)
    - locked <0x00000000a1501b20> (a java.net.DatagramPacket)
    - locked <0x00000000e41af920> (a java.net.MulticastSocket)
    at com.ejt.framework.e.u.run(ejt:98)

"TimerQueue" daemon prio=6 tid=0x000000000d8b9800 nid=0x2498 waiting on condition [0x000000000fd7f000]
   java.lang.Thread.State: TIMED_WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00000000e3fb8440> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.parkNanos(Unknown Source)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(Unknown Source)
    at java.util.concurrent.DelayQueue.take(Unknown Source)
    at javax.swing.TimerQueue.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

"AWT-EventQueue-0" prio=6 tid=0x000000000d457000 nid=0x22c4 waiting on condition [0x000000000ebad000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00000000a0592e58> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(Unknown Source)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
    at java.awt.EventQueue.getNextEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.WaitDispatchSupport$2.run(Unknown Source)
    at java.awt.WaitDispatchSupport$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.awt.WaitDispatchSupport.enter(Unknown Source)
    at java.awt.Dialog.show(Unknown Source)
    at java.awt.Component.show(Unknown Source)
    at java.awt.Component.setVisible(Unknown Source)
    at java.awt.Window.setVisible(Unknown Source)
    at java.awt.Dialog.setVisible(Unknown Source)
    at com.ejt.framework.gui.at.setVisible(ejt:84)
    at com.ejt.framework.gui.fu.setVisible(ejt:82)
    at com.jprofiler.frontend.g.g.setVisible(ejt:42)
    at com.jprofiler.frontend.d.h.bk(ejt:406)
    at com.jprofiler.frontend.d.h.bg(ejt:324)
    at com.jprofiler.frontend.t.run(ejt:948)
    at com.jprofiler.frontend.cb.a(ejt:423)
    at com.jprofiler.frontend.FrontendApplication.b(ejt:944)
    at com.jprofiler.frontend.FrontendApplication.a(ejt:720)
    at com.jprofiler.frontend.FrontendApplication.a(ejt:55)
    at com.jprofiler.frontend.ae.run(ejt:654)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)

"AWT-Windows" daemon prio=6 tid=0x000000000d46d800 nid=0x448 runnable [0x000000000e9af000]
   java.lang.Thread.State: RUNNABLE
    at sun.awt.windows.WToolkit.eventLoop(Native Method)
    at sun.awt.windows.WToolkit.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

"AWT-Shutdown" prio=6 tid=0x000000000d218800 nid=0x1dac in Object.wait() [0x000000000e7af000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000e41c6ca0> (a java.lang.Object)
    at java.lang.Object.wait(Object.java:503)
    at sun.awt.AWTAutoShutdown.run(Unknown Source)
    - locked <0x00000000e41c6ca0> (a java.lang.Object)
    at java.lang.Thread.run(Unknown Source)

"Java2D Disposer" daemon prio=10 tid=0x000000000d487000 nid=0x2180 in Object.wait() [0x000000000e5af000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000e4014c40> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    - locked <0x00000000e4014c40> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at sun.java2d.Disposer.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

"Exe4JStartupThread" daemon prio=6 tid=0x000000000c561800 nid=0x2094 waiting on condition [0x000000000cb1f000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
    at java.lang.Thread.sleep(Native Method)
    at com.exe4j.Controller$StartupThread.run(Unknown Source)

"Service Thread" daemon prio=6 tid=0x000000000a7ea000 nid=0x203c runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread1" daemon prio=10 tid=0x000000000a7e9000 nid=0x2074 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread0" daemon prio=10 tid=0x000000000a7dc000 nid=0x2514 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Attach Listener" daemon prio=10 tid=0x000000000a7db000 nid=0x1f80 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Signal Dispatcher" daemon prio=10 tid=0x000000000a7d4000 nid=0x10f8 runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Finalizer" daemon prio=8 tid=0x0000000002078800 nid=0x21c8 in Object.wait() [0x000000000bc1f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000a0d8e088> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    - locked <0x00000000a0d8e088> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at java.lang.ref.Finalizer$FinalizerThread.run(Unknown Source)

"Reference Handler" daemon prio=10 tid=0x0000000002072000 nid=0x2708 in Object.wait() [0x000000000ba1f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000a0d8dbb8> (a java.lang.ref.Reference$Lock)
    at java.lang.Object.wait(Object.java:503)
    at java.lang.ref.Reference$ReferenceHandler.run(Unknown Source)
    - locked <0x00000000a0d8dbb8> (a java.lang.ref.Reference$Lock)

"main" prio=6 tid=0x0000000001e6f000 nid=0x960 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"VM Thread" prio=10 tid=0x000000000a752800 nid=0x24f8 runnable 

"GC task thread#0 (ParallelGC)" prio=6 tid=0x0000000001fc6000 nid=0x21cc runnable 

"GC task thread#1 (ParallelGC)" prio=6 tid=0x0000000001fc8000 nid=0x964 runnable 

"GC task thread#2 (ParallelGC)" prio=6 tid=0x0000000001fc9800 nid=0x1b74 runnable 

"GC task thread#3 (ParallelGC)" prio=6 tid=0x0000000001fcb000 nid=0x1f34 runnable 

"VM Periodic Task Thread" prio=10 tid=0x000000000a802800 nid=0x1db0 waiting on condition 

JNI global references: 859 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:56:40.570

现在我只看到一种解决方法 - 使用 6.2.4 版本的 JProfiler，它在我的环境中运行良好。

等待 JProfiler 7.2.3+ 检查行为。

# ruby-on-rails - 避免使用#编码：UTF-8

> ID：14731945
> 
> 赞同：2
> 
> 时间：2013-02-06T14:53:33.243
> 
> 标签：ruby-on-rails, ruby, string, unicode, character-encoding

我在使用 Unicode 字符串时遇到了 Rails 控制器的问题：

> 语法错误，意外 $end，期待 ']' ...conditions => ['url like ?', "%日本%"])

解决这个问题的方法是在控制器文件的顶部设置编码，使用

```
# encoding: UTF-8 
```

有什么办法可以全局设置吗？由于忘记将其设置在文件中，我不断遇到麻烦。或者，是否有一个默认值可以确保所有字符串都被认为是 Unicode？将所有内容设置为 Unicode 有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T15:15:39.600

在不到一个月的时间里，Ruby 2.0 将发布，它将以 UTF-8 作为默认编码。然后，您将不再需要这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T16:04:24.777

您可以尝试将环境变量设置`RUBYOPT`为`-Ku`值：

```
export RUBYOPT="-Ku" 
```

# .net - ADO.NET 访问 MySql - 无法将 MySQL 日期/时间值转换为 System.DateTime

> ID：14731946
> 
> 赞同：0
> 
> 时间：2013-02-06T14:53:33.243
> 
> 标签：.net, mysql

我正在使用 MySQL 4.1.14NT。

我正在使用 ADO.NET 和 MySQL 连接器来查询具有日期时间字段的表

当我运行查询时，我收到错误“无法将 MySQL 日期/时间值转换为 System.DateTime”

我发现的唯一解决方法是将“允许零日期时间=真”添加到数据库的连接字符串中。

这停止了​​错误，但现在在数据集中，某些日期字段返回日期为 01/01/0001 00:00:00，但是当我在查询浏览器中运行查询时，它们具有正常的日期值。

我能做些什么？

编辑：

```
CREATE TABLE `notam_status` (
  `DEMAND_ID` decimal(6,0) NOT NULL default '0',
  `NOTAM_KEY` varchar(25) NOT NULL default '',
  `AIRPORT` varchar(5) default NULL,
  `ARR_DEP` char(1) default NULL,
  `DEP_DATETIME` datetime default NULL,
  `ARR_DATETIME` datetime default NULL,
  `NOTAM_TEXT` text,
  `LAST_MOD_DATETIME` datetime default NULL,
  `STATUS` char(1) default NULL,
  `STATUS_BY` varchar(15) default NULL,
  `STATUS_DATETIME` datetime default NULL,
  `SOURCE_ID` char(1) default NULL,
  `ACCOUNT_ID` varchar(10) default NULL,
  `NOTAM_ID` varchar(9) default NULL,
  `NOTAM_PART` decimal(3,0) default NULL,
  `CNS_LOCATION_ID` varchar(10) default NULL,
  `REMARKS` text,
  `TRIPNUMBER` decimal(6,0) default NULL,
  PRIMARY KEY  (`DEMAND_ID`,`NOTAM_KEY`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='InnoDB free: 11264 kB; InnoDB free: 7168 kB'; 
```

这是我正在使用的代码：

```
 private List<Notam> GetNotamsFor(string airport)
            {
                List<Notam> result = new List<Notam>();

                string sql =
                    @"SELECT a.source_id, a.account_id, a.notam_id, a.notam_part, a.cns_location_id, cast(a.last_mod_datetime as datetime), a.notam_report, a.q_code, a.effective_datetime, a.expire_datetime
                      FROM notams a
                      WHERE (a.cns_location_id = ?airport
                         OR a.cns_location_id =  ?kairport)
                         AND a.source_id != 'F'
                         AND (a.cancel_datetime IS NULL OR a.cancel_datetime > UTC_Timestamp())
                         AND (a.delete_datetime IS NULL OR a.delete_datetime > UTC_Timestamp())
                        ";

                MySqlParameter[] parameters = new MySqlParameter[]
                {
                    new MySqlParameter
                    {
                         ParameterName="airport",
                         MySqlDbType=MySqlDbType.String,
                         Value=airport
                    },
                    new MySqlParameter
                    {
                         ParameterName="kairport",
                         MySqlDbType=MySqlDbType.String,
                         Value="k"+airport
                    }
                };

                DataSet ds = RunMySqlQuery(sql, "weather", parameters);

                // If I look at the dataset, the field "last_mod_datetime' 
                //  has the value 01/01/0001 00:00:00

                if (ds.Tables.Count > 0)
                    foreach (DataRow r in ds.Tables[0].Rows)
                    {
                        result.Add(NotamFiller.FillFrom(r));
                    }

                return result;
            }

 private DataSet RunMySqlQuery(string sql, string database, MySqlParameter[] parameters)
        {

            DataSet ds = new DataSet();
            try
            {
                MySqlCommand mc = new MySqlCommand(sql, _MySqlConnection);
                if (parameters != null)
                    mc.Parameters.AddRange(parameters);
                var adapter = new MySqlDataAdapter(mc);
                adapter.Fill(ds);
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }

            return ds;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:24:47.987

结果发现填充表格的代码中存在问题。MySQLParameter 类的 MySqlDBType 设置为 String 而不是 Timestamp

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:53:56.683

事实证明，在更新日期字段时，填充表的其他代码使用 MySqlParameter 和 MySqlDBType.String 而不是 MySqlDBType.Timestamp，并且它最终将 01-01-0001 00:00 存储在日期字段中。

# matlab - Matlab中的位级操作

> ID：14731947
> 
> 赞同：4
> 
> 时间：2013-02-06T14:53:34.063
> 
> 标签：matlab, bit-manipulation

我们如何在 Matlab 中进行这种位级操作：

```
int instructionWord;
a = (instructionWord >>> 21) & 0x1F; 
```

代码将指令字右移 21 位并获得至少 5 位。这如何在 Matlab 中等效地完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T18:21:40.593

鉴于您的输入值是一个整数，您可以执行以下操作：

```
a = mod( floor(instructionWord/2^21), 32) 
```

另一个更像位的解决方案是：

```
a = bitand( bitshift(instructionWord, -21), hex2dec('1F')) 
```

如果你给它提供除整数以外的任何东西，最后一种方法将引发错误。

顺便说一句，你的变量指令字被声明为一个有符号整数。但如果它是一个指令字或类似的东西，无符号整数会更有意义。上面的表达式期望您的输入只是积极的。如果不是，则需要更多代码来`>>>`在 matlab 中对（逻辑右移）进行建模。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T14:56:23.993

请参阅[位移](http://www.mathworks.de/de/help/matlab/ref/bitshift.html)页面：

**代码**

```
a = intmax('uint8');
s1 = 'Initial uint8 value %5d is %08s in binary\n';
s2 = 'Shifted uint8 value %5d is %08s in binary\n';
fprintf(s1,a,dec2bin(a))
 for i = 1:8
    a = bitshift(a,1);
    fprintf(s2,a,dec2bin(a))
 end 
```

**输出**

```
Initial uint8 value   255 is 11111111 in binary
Shifted uint8 value   254 is 11111110 in binary
Shifted uint8 value   252 is 11111100 in binary
Shifted uint8 value   248 is 11111000 in binary
Shifted uint8 value   240 is 11110000 in binary
Shifted uint8 value   224 is 11100000 in binary
Shifted uint8 value   192 is 11000000 in binary
Shifted uint8 value   128 is 10000000 in binary
Shifted uint8 value     0 is 00000000 in binary 
```

**编辑** 请参阅有关如何提取特定位值的[bitget页面。](http://www.mathworks.de/de/help/matlab/ref/bitget.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T19:24:16.243

> a = rem( bitshift(指令字, -21) , 2^5)

**bitshift**进行位的移位；并**rem**找到除以 32 的余数，给出最后 5 位的值。

# kendo-ui - 我的 Kendo 数据源架构必须是什么样的？

> ID：14731949
> 
> 赞同：13
> 
> 时间：2013-02-06T14:53:35.153
> 
> 标签：kendo-ui, kendo-grid

给定这个json？

```
[
 { 
  "CompanyId":20,
  "CompanyName":"Walmart",
  "CompanyContacts":[
                     {
                      "CompanyId":20,
                      "FirstName":"Bob",
                      "LastName":"Green",
                      "Email":"bob@test.com",
                      "Phone":"1234567",
                      "IsActive":false
                     }
                    ]
 }
] 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-06T19:36:44.463

KendoUI 数据源 schema.Model 目前不支持嵌套 json 或带有相关实体的 json。它需要平面数据。希望将来 schema.Model 将支持将复杂的 json 映射到模型定义中的平面。但是，您仍然可以在网格中使用复杂数据，只是无法在 schema.Model 定义中定义它。

映射实际上是在网格的字段定义中完成的。此外，请参阅[架构文档](http://docs.kendoui.com/api/framework/datasource#schema-object)，您可以使用 schema.parse 或 schema.data 函数解析数据，以手动将嵌套数据转换为平面数据。

这是您的数据的[小提琴](http://jsfiddle.net/delebash/uLkj9/3/)示例

```
{
    field : "CompanyContacts[0].FirstName",
    title: "First Name"
} 
```

另请注意，如果您不需要父记录 CompanyName 和 CompanyID，因为您的 CompanyContacts 中的 CompanyID 以当前定义数据的方式存在，那么您可以使用架构的 data 属性来指示记录的起点，如下所示

```
schema : {
    model: mySchema,
    data: "CompanyContacts"
}, 
```

# sonarqube - Eclipse 声纳插件与 findbugs+pmd+checkstyle eclip 插件

> ID：14731956
> 
> 赞同：5
> 
> 时间：2013-02-06T14:54:12.070
> 
> 标签：sonarqube, analysis, checkstyle, findbugs

我们正在尝试使用 (Jenkins,sonar,eclipse ...) 安装 CI 平台。为了让每个开发人员都可以在提交之前对他的代码进行分析，我想知道两种选择：

*   使用声纳插件运行本地分析。
*   安装声纳使用的不同插件（findbug、pmd、checkstyle ...）并配置它们以满足声纳配置。

我不确定使用哪种替代方法？我曾经在 Eclipse 中使用 findbugs、pmd、checkstyle，它们看起来很棒。你能告诉我哪个是最好的选择吗？提前致谢。

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T19:01:51.763

使用 Sonar 插件，您可以[管理以下违规行为](http://docs.codehaus.org/display/SONAR/Working+with+Sonar+in+Eclipse#WorkingwithSonarinEclipse-Manageexistingviolations)：

*   创建评论
*   将违规标记为误报或已修复
*   查看热门课程和热门违规
*   查看您的评论

如果您使用单独的插件，则必须使用声纳网络来执行此操作。声纳的巨大进步是评论。

另一个问题是您拥有和将拥有多少项目。我目前处理 70 多个项目和许多个人资料。对我来说使用一个插件运行分析更简单，因为我只需要添加服务器并找到项目。对于其他插件，您需要在每个插件配置中添加每个项目的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T21:03:42.487

为什么不安装[Sonar Eclipse](http://docs.codehaus.org/display/SONAR/Using+Sonar+in+Eclipse)插件？

这是为了解决以下问题而设计的：

*   Sonar 不支持对同一项目进行并行分析。此问题排除了每个开发人员在本地运行 Sonar 的选项。（参见[SONAR-2761](http://jira.codehaus.org/browse/SONAR-2761)、[SONAR-3306](http://jira.codehaus.org/browse/SONAR-3306)）
*   您真的不希望开发人员将指标和源代码上传到 Sonar 数据库中。他们可能在未提交的工作空间上工作，因此如果将 Sonar 用于代码审查，则会导致不准确和混乱。
*   Sonar 真正设计为从持续集成服务器（如 Jenkins）运行，构建已提交到共享代码流（或分支）的代码

使用 Eclipse 插件的最大优点是：

*   真正的本地分析，无需更新 Sonar 数据库
*   其他工具的配置从 Sonar 服务器检索并自动下载 jar。
*   声纳质量配置文件的集中管理

# jquery-mobile - 如何使基于 JQueryMobile 的应用程序在桌面浏览器中具有“触摸”行为

> ID：14731964
> 
> 赞同：0
> 
> 时间：2013-02-06T14:54:27.460
> 
> 标签：jquery-mobile, touch

我正在使用 JQueryMobile 构建一个应用程序，该应用程序主要在带有 Firefox 的基于 Linux 的触摸设备上运行。

我的问题是，对于 JQM，当页面内容无法在屏幕上显示时，Web 浏览器会显示垂直滚动条[显示垂直滚动条](http://jquerymobile.com/demos/1.2.0/docs/lists/lists-performance.html)

Sencha 和 Dojo 没有这样的问题。它们的行为就像在基于触摸的设备上运行一样，即使使用桌面网络浏览器（降低浏览器窗口的高度）：

*   [煎茶滚动列表](http://cdn.sencha.io/touch/sencha-touch-2.1.0/examples/kitchensink/index.html#demo/list)
*   [道场滚动列表](http://demos.dojotoolkit.org/demos/mobileGallery/demo-iphone.html)

那么，如何让 JQM 在桌面 Web 浏览器上运行时对触摸友好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:13:36.627

对于这个问题，似乎没有真正好的 JS 和/或 CSS 解决方案。使用 CSS ( *overflow-y: hidden;* ) 隐藏滚动条可防止滚动和弄乱 JQM 触摸事件。

我通过使用 Firefox 插件（Grab and Drag）找到了一种解决方法，这是一个可以接受的解决方案，因为我控制运行浏览器的设备。

它工作正常，但它不是一个纯粹的 JS/HTML/CSS 解决方案......

# sql - TYPO3：选择包含隐藏行的计数（*）

> ID：14731967
> 
> 赞同：2
> 
> 时间：2013-02-06T14:54:34.647
> 
> 标签：sql, select, typo3, typoscript

我使用此代码显示我在第 68 页的 tt_address 中拥有的寄存器数量，并且工作正常，只是它不显示隐藏元素。

```
# Default PAGE object:
page = PAGE
page{
  20 = CONTENT
  20 {
    table = tt_address

    select{
      selectFields = count(uid) AS count
      pidInList = 68
      where = deleted = 0
    }

    renderObj = COA
    renderObj {
      10 = TEXT
      10 {
        value = Status: {field:count}
        insertData = 1
      }
    }
  }
} 
```

我怎么能把隐藏的记录也算在内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:36:25.280

我认为使用打字稿获取隐藏记录是不可能的（不能选择来自隐藏、定时或访问受保护页面的记录！）。参考链接：[http ://wiki.typo3.org/TSref/select](http://wiki.typo3.org/TSref/select)

您可能需要使用“userfunc”，如下所示：

排版：

```
includeLibs.showHiddenElements = fileadmin/lib/showHiddenElements.php
page.20  =USER
page.20  {
 userFunc =user_showHiddenElements->main
 field = uid
 table = tt_address
 where = deleted = 0 and pid = 68
} 
```

文件管理员/lib/showHiddenElements.php：

```
<?php
class user_ShowHiddenElements {
 function main($content, $conf){
    $res=  $GLOBALS['TYPO3_DB']->exec_SELECTcountRows(
                $conf[field],         // SELECT ...
                $conf[table],     // FROM ...
                $conf[where],    // WHERE...
               '',            // GROUP BY...
               '',    // ORDER BY...
               ''            // LIMIT ...
            );
    return $res;
 }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:55:26.987

您不能以正常方式绕过“启用字段” where 子句，但 TYPO3 允许使用`UNION`查询来解决这个问题：

```
select {
    selectFields = count(uid) AS count
    pidInList = 68
    where.data = TSFE:id
    # we hack our way around the enablefields restriction
    where.wrap = 0 UNION SELECT COUNT(*) as count FROM tt_address WHERE pid = 68
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:58:17.930

另一种解决方案：

```
page{
24 = CONTENT
24.wrap = <div class="status_count">|</div>
24 {
    table = tt_address
    select {
        selectFields = count(uid) AS count
        pidInList = 68
        where.data = TSFE:id
        # we hack our way around the enablefields restriction
        where.wrap = |0 UNION SELECT COUNT(*) as count FROM tt_address WHERE pid = 68
    }
    renderObj = COA
    renderObj {
        10 = TEXT
        10.wrap = |</div><div style="display:none">
        10 {
            value = Status: {field:count}
            insertData = 1
        }
    }
}
} 
```

感谢 cweiske 给了我这个想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-26T09:50:54.457

就是这样：例如仅显示已删除或隐藏的页面

```
table = pages
select.pidInList = 1
select.where = deleted=1 or hidden=1 UNION SELECT * FROM pages WHERE 1=0 
```

这有效，因为启用字段被附加到查询中。Union with 1=0 where 子句与 enablefields 不返回任何内容。

# sql - 在 Oracle 中创建布尔属性？

> ID：14731971
> 
> 赞同：4
> 
> 时间：2013-02-06T14:54:44.350
> 
> 标签：sql, database, oracle, database-design

我必须在 Oracle 中创建一个表，并且必须将一列设为布尔类型。你能告诉我我该怎么做吗？我在互联网上搜索过，但找不到明确的答案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T14:58:32.610

SQL 中没有 BOOLEAN 数据类型。但我们可以这样表示：

```
CREATE TABLE tt
  (test NUMBER(1) NOT NULL CHECK  (test in (0,1))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T15:10:19.353

查看[CREATE TYPE](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_8001.htm) for Oracle。

在某些数据库中，可以定义自己的布尔数据类型（有人告诉我，这在 Oracle 中不起作用，但它说明了这个想法）*：*

```
CREATE DOMAIN BOOLEAN
AS NUMBER(1)
NOT NULL
CHECK (value IN (0,1)) 
```

这可以用作表格列的任何其他类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T14:55:25.220

没有布尔数据类型。你必须使用`NUMBER(1)`.

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-02-06T15:04:01.870

阅读 Oracle 文档中的 Virtual Column 并使用其他人建议的数字：0-false，1-true。Oracle 中的 CREATE 表中没有 BOOLEAN 数据类型。

# javascript - 使用javascript OOP中的方法动态获取属性

> ID：14731972
> 
> 赞同：1
> 
> 时间：2013-02-06T14:54:44.817
> 
> 标签：javascript, oop

如果我创建一个类`SONG()`并定义了许多属性，我如何创建一个使用传递的参数并获取该属性的方法？

```
function SONG(i) {

    /* properties */
    this.title      = results.title[i];
    this.artist     = results.artist[i];
    this.album      = results.album[i];
    this.info       = results.info[i];

    /* methods */
    this.getstuff = function(stuff){
        console.log(this.stuff); // doesn't work
    }
}

var song1 = new SONG(1);

song1.getstuff(title);  
// how can I have this dynamically 'get' the property passed through as an argument? 
```

非常感谢任何帮助或建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:56:58.523

您可以使用方括号表示法：

```
this[title] 
```

将获得标题变量中包含的名称的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:59:03.437

也许这就是你想要的：（[JSFiddle](http://jsfiddle.net/FloydPink/RPsgW/)）

```
function SONG(i) {
    /* properties */
    this.title      = "My Title";
    this.artist     = "My Artist";
    /* methods */
    this.getstuff = function(stuff){
        if (this.hasOwnProperty(stuff))
            return this[stuff];
        else
            return null;
    }
}

var song1 = new SONG(1);

console.log(song1.getstuff("title"));  
console.log(song1.getstuff("invalid")); 
```

但请注意，我们是`"title"`作为字符串传入的。此外，需要在内部进行检查`getstuff`以验证`SONG`确实具有正在请求的属性，因此检查`hasOwnProperty`.

# spring - Spring WebserviceTemplate 未注册

> ID：14731975
> 
> 赞同：2
> 
> 时间：2013-02-06T14:54:57.733
> 
> 标签：spring, spring-ws, webservicetemplate

我收到一个错误，我无法弄清楚它与 Spring WebserviceTemplate 有什么关系。

这是类定义：（有趣的部分是如果我删除 @Service 注释，它工作正常。）

```
@Service
public class PTSWebServicesClientStubImpl implements PTSWebServicesStub
{
    @Autowired
    @Qualifier("PTS")
    private WebServiceTemplate ptsWebServiceTemplate;
 .....//
 } 
```

这是xml配置：

```
<bean id="ptsWebServiceTemplate" class="org.springframework.ws.client.core.WebServiceTemplate">
    <qualifier value="PTS" />
    <constructor-arg ref="messageFactory" />
    <property name="marshaller" ref="ptsJaxbMarshaller" />
    <property name="unmarshaller" ref="ptsJaxbMarshaller" />
    <property name="interceptors">
        <list>
            <ref bean="loggingInterceptor" />
        </list>
    </property>
</bean> 
```

当我尝试部署它或从 Junit 测试中调用它时，我收到以下错误：

```
 Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.springframework.ws.client.core.WebServiceTemplate] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation.Qualifier(value=PTS)}
   at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:920)
   at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:789)
   at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:703)
   at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:474)
   ... 100 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:58:14.650

如果对属性和 Spring bean id 使用相同的名称，则不需要 Qualifier 注释。

如果您仍然想要，请使用“ptsWebServiceTemplate”作为限定符注释的属性值。

XML 中的 qualifier 元素用于自定义 Qualifier 注释类型（您自己的注释使用 @Qualifier 本身注释）

# backbone.js - 如何使用一个模板打印 2 个不同的值

> ID：14731977
> 
> 赞同：0
> 
> 时间：2013-02-06T14:54:59.453
> 
> 标签：backbone.js, backbone-views

在我的 json 数据中，我得到`projectName`和`assignedTo`值（它在所有数据中累积），

示例数据：

```
 [ {projectName:'project1',assignedTo:'some1'},{projectName:'project2',assignedTo:'some2'}] 
```

我的模板是：（包括我困惑的东西）

```
<script id="listTemplate" type="text/template">
    <a href="#"><%= projectName === projectName ? projectName : taskStatus%></a>//not works how can i mange?
</script> 
```

在我看来，我正在转换模型`"toJSON()"`，但我在我使用的 2 个链接中单独获取项目名称。

我的请求，是否可以使用单个模板打印两个不同的值？- 作为第一次我需要打印项目名称，稍后在某些条件下打印 taskStatus，如果有任何建议请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:06:43.297

之所以不断打印项目名称是因为，在模板中，你有...

```
<a href="#"><%= projectName === projectName ? projectName : taskStatus%></a> 
```

`projectName`总是等于`projectName`。在这种情况下，您要做的是，在您的 Backbone.View 中，当您序列化要由模板使用的模型时，您可以执行此操作...

```
Backbone.View.extend({
    events: {
        // An example on how to change the display
        'click button.change-display': 'onChangeDisplayClicked'   
    },
    template: _.template(...),

    // Controls whether project name should be shown or not.
    showProjectName: true,

    onChangeDisplayClicked: function() {
        // Flip the switch
        this.showProjectName = !this.showProjectName;

        // Re-render the View
        this.render();
    },

    serialize: function() {
        // Grab the data from model
        var data = this.model.toJSON();

        // Pass this data to the template to control what to be displayed.
        data.showProjectName = this.showProjectName;
        return data;
    },

    render: function() {
        this.$el.html(this.template(this.serialize()));
    }
}); 
```

...在您的模板中，您将...

```
<script id="listTemplate" type="text/template">
    <a href="#"><%= showProjectName ? projectName : taskStatu s%></a>
</script> 
```

# jquery-gmap3 - jQuery Gmap3：成功回调在哪里？

> ID：14731978
> 
> 赞同：0
> 
> 时间：2013-02-06T14:55:03.020
> 
> 标签：jquery-gmap3

我想知道我的 gmap 何时加载。我在文档和网络上没有看到任何回调方法。

我正在使用这个插件： http: [//gmap3.net/en/catalog/](http://gmap3.net/en/catalog/)

任何提示？谢谢

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:42:47.267

I think you will have to revert and use the google maps native function. The answer toyour question is outlined in this question: [How can I check whether Google Maps is fully loaded?](https://stackoverflow.com/questions/832692/how-to-check-if-google-maps-is-fully-loaded)

and it looks like the best answer is given with this code snippet:

```
google.maps.event.addListenerOnce(map, 'idle', function(){
    // do something only the first time the map is loaded
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-19T17:12:05.963

它似乎没有记录，但地图对象上有一个回调属性

```
 $('#map_canvas').gmap3(
  {
    map: {
      options: {
        zoom: 9,
        center: [view.lat, view.lng]
      },
      callback: function (e) {
         alert("loaded");
      }
    }
  }); 
```

# java - 弹簧型材组

> ID：14731979
> 
> 赞同：2
> 
> 时间：2013-02-06T14:55:03.457
> 
> 标签：java, spring, profiles, spring-profiles

我有一个应用程序，我可以为其指定要运行它的配置文件。但我也想将这些配置文件分组为凭据、应用程序性能、内存打印、应用程序行为等。例如。我可以运行以下配置文件

```
-Dspring.profiles.active=production,cached-local,db-connection-pooled... 
```

但我更喜欢将其初始化为

```
-Dspring.profiles.active=production,super-fast
#the above activates method level caches, db connection pooling etc
#super-fast triggered activation of cached-local, db-connection-pooled profiles 
```

或者

```
-Dspring.profiles.active=dev,low-footprint
#the above dosent enable caching, or db connection pooling 
```

这是否可以在不编写任何自定义代码的情况下实现，例如 [如何通过属性文件而不是通过环境变量或系统属性设置活动的 spring 3.1 环境配置文件](https://stackoverflow.com/questions/8587489/how-to-set-active-spring-3-1-environment-profile-via-a-properites-file-and-not-v)。即使我可以从属性文件或 spring-xml 配置中加载这些，我也很好。我在 spring 3.1 上仅使用 xml 配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T10:32:51.500

如果没有自定义代码来操作`ConfigurableEnvironment`.

我们试图在安全框架中实现与权限与角色（权限组）相同的间接模式，但由于这不是开箱即用的，我最终不得不解决它。

我保持我的配置文件通用，例如在您的情况下生产和超快速，并且对于对这些配置文件敏感的每个 bean，我设置了正确的@Profile。为了使重构更容易，我使用了两种技术。

1.  为每个配置文件创建一个元注释，例如`@Production`，`@SuperFast`并使配置文件名称成为公共常量，例如`Production.PROFILE_NAME = "production"`。
2.  在标记任何 bean 的配置文件时，如果它仅适用于一个配置文件，则使用新的元注释，或者`@Profile({Production.PROFILE_NAME, ...})`如果它适用于多个配置文件，则使用。您必须这样做，因为您不能将两个配置文件元注释应用于同一个 bean，[至少在 4.0 之前不能](https://jira.springsource.org/browse/SPR-10812)。

例如，

```
@Profile(Production.PROFILE_NAME)
public @interface Production {

    public static String PROFILE_NAME = "production";
} 
```

所有这一切的重点是，您现在可以使用您的 IDE 来查找`@Production`或`Production.PROFILE_NAME`是否需要快速了解或更改正在拉入的 bean。

# c# - 使用 HttpClient，在 301 的情况下，我将如何防止自动重定向并获取原始状态代码和转发 Url

> ID：14731980
> 
> 赞同：42
> 
> 时间：2013-02-06T14:55:07.147
> 
> 标签：c#, http, redirect, httpclient

我有以下方法返回`Http status code`给定的`Url`：

```
public static async void makeRequest(int row, string url)
{
    string result;
    Stopwatch sw = new Stopwatch(); sw.Start();

    try
    {
        using (HttpClient client = new HttpClient())
        {
            HttpResponseMessage response = new HttpResponseMessage();
            response = await client.GetAsync(url);

            // dump contents of header
            Console.WriteLine(response.Headers.ToString());

            if (response.IsSuccessStatusCode)
            {
                result = ((int)response.StatusCode).ToString();
            }
            else
            {
                result = ((int)response.StatusCode).ToString();
            }
        }
    }
    catch (HttpRequestException hre)
    {
        result = "Server unreachable";
    }

    sw.Stop();
    long time = sw.ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));

    requestComplete(row, url, result, time);
} 
```

它适用于`200`/`404`等，但是在`301`代码的情况下，我相信返回的结果是*已经重定向的*( `200`) 结果，而不是`301`应该返回的实际结果，并且它会有一个包含重定向指向的标头。

我在其他 .Net Web 请求类中看到过类似的情况，并且将某种`allowAutoRedirect`属性设置为 false 的技术。如果这是正确的路线，任何人都可以告诉我该`HttpClient`课程的正确替代方案吗？

[这篇文章有关于上述 allowAutoRedirect 概念的信息，我的意思是](https://stackoverflow.com/questions/690587/using-webclient-in-c-sharp-is-there-a-way-to-get-the-url-of-a-site-after-being-r)

否则，我怎样才能让这个方法返回`301s`而不是`200s`让我知道是真实的 Urls `301s`？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-02-06T15:16:24.890

我发现做到这一点的方法是创建一个实例[`HttpClientHandler`](https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httpclienthandler?view=netframework-4.7)并将其传递给`HttpClient`

```
public static async void makeRequest(int row, string url)
{
    string result;
    Stopwatch sw = new Stopwatch(); sw.Start();

    // added here
    HttpClientHandler httpClientHandler = new HttpClientHandler();
    httpClientHandler.AllowAutoRedirect = false;

    try
    {
        // passed in here
        using (HttpClient client = new HttpClient(httpClientHandler))
        {

        } 
```

请参阅[此处](http://blogs.msdn.com/b/henrikn/archive/2012/08/07/httpclient-httpclienthandler-and-httpwebrequesthandler.aspx)了解更多信息。

# ios - iOS，确定网络访问类型

> ID：14731982
> 
> 赞同：1
> 
> 时间：2013-02-06T14:55:23.913
> 
> 标签：ios, objective-c, networking, core-telephony

我正在尝试在 iPhone 上获取网络类型。我正在使用以下程序：

```
(NSNumber *) dataNetworkTypeFromStatusBar {

    UIApplication *app = [UIApplication sharedApplication];
    NSArray *subviews = [[[app valueForKey:@"statusBar"] valueForKey:@"foregroundView"]    subviews];
    NSNumber *dataNetworkItemView = nil;

    for (id subview in subviews) {
        if([subview isKindOfClass:[NSClassFromString(@"UIStatusBarDataNetworkItemView") class]]) {
            dataNetworkItemView = subview;
            break;
        }
    }
    return [dataNetworkItemView valueForKey:@"dataNetworkType"];
} 
```

当应用程序在前台时，我可以成功获取网络类型，但是当应用程序在后台时，网络类型不会更新。谁能告诉我如何获得在后台更新信息的程序？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-22T11:41:29.620

在 iOS 7.0+ 中，我们有`CoreTelephony`可以为我们提供有关网络类型所需详细信息的框架。

这是一个示例。

```
CTTelephonyNetworkInfo *telephonyInfo = [[CTTelephonyNetworkInfo alloc] init];
        NSString *currentRadio = telephonyInfo.currentRadioAccessTechnology;
        if ([currentRadio isEqualToString:CTRadioAccessTechnologyLTE]) {
            // LTE

        } else if([currentRadio isEqualToString:CTRadioAccessTechnologyEdge]) {
            // EDGE

        } else if([currentRadio isEqualToString:CTRadioAccessTechnologyWCDMA]){
            // 3G

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:02:59.443

恐怕你在这里做的很糟糕，你应该使用Apple的Reachability代码，你可以用它来找出是否有网络以及什么样的网络（3G，WiFi等......）

查看代码：

[http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

# android - 在 GridView 中将文本移动到应用程序图标下方

> ID：14731984
> 
> 赞同：-3
> 
> 时间：2013-02-06T14:55:27.807
> 
> 标签：android, list, icons

Hello Guys 如何在图标下排列 appname ？如果你需要我给出来源。

![在此处输入图像描述](../Images/a7c88106e1ef22329479a12af2cfa8c1.png)

您可以在此处查看用于创建此视图的代码：

```
package com.example.draw;

import java.util.List;

import android.content.Context;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class AppInfoAdapter extends BaseAdapter {
    private Context mContext;
    private List<ApplicationInfo> mListAppInfo;
    private PackageManager mPackManager;

    public AppInfoAdapter(Context c, List<ApplicationInfo> list, PackageManager pm) {
        mContext = c;
        mListAppInfo = list;
        mPackManager = pm;
    }

    @Override
    public int getCount() {
        return mListAppInfo.size();
    }

    @Override
    public Object getItem(int position) {
        return mListAppInfo.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // get the selected entry
        ApplicationInfo entry = mListAppInfo.get(position);

        // reference to convertView
        View v = convertView;

        // inflate new layout if null
        if(v == null) {
            LayoutInflater inflater = LayoutInflater.from(mContext);
            v = inflater.inflate(R.layout.activity_appinfo, null);
        }

        // load controls from layout resources
        ImageView ivAppIcon = (ImageView)v.findViewById(R.id.ivIcon);

        // set data to display
        ivAppIcon.setImageDrawable(entry.loadIcon(mPackManager));

        // return view
        return v;
    }
} 
```

文本来自 **TextView tvAppName = (TextView)v.findViewById(R.id.tvName); tvAppName.setText(entry.loadLabel(mPackManager));**

main_appinfo.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:orientation="horizontal"
    android:padding="5dip" >

  <ImageView
      android:id="@+id/ivIcon"
      android:layout_width="wrap_content"
      android:layout_height="fill_parent"
      android:layout_gravity="center"
      android:layout_weight="1"
      android:contentDescription="@string/desc"
      android:scaleType="center" 
      android:gravity="center_horizontal|center_vertical"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:02:37.377

布局文件中的`LinearLayout`水平，使其垂直。

`android:orientation="horizontal"`至`android:orientation="vertical"`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T15:02:12.100

应用图标和标题格式是android**主屏幕应用**的一部分，您无法修改其外观。

如果您愿意，您可以创建自己的主屏幕应用程序并使用它做任何您想做的事情。

这是主屏幕应用程序的示例：[Home App Android sdk Sample](http://gitorious.org/replicant/development/trees/d2f2b1d7b77d06bce8cf9340171cf6c25cd720c4/samples/Home)

# python - Django HTTP 500 错误

> ID：14731988
> 
> 赞同：9
> 
> 时间：2013-02-06T14:55:39.130
> 
> 标签：python, django, http, templates

我正在创建一个自定义 HTTP 500 错误模板。为什么 Django 在我引发异常而不是在我返回 HttpResponseServerError 时显示它（我只是得到默认浏览器 500 错误）？我觉得这种行为很奇怪......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T15:15:54.133

`HttpResponseServerError`继承自并且`HttpResponse`实际上非常简单：

```
class HttpResponseServerError(HttpResponse):
    status_code = 500 
```

那么让我们看一下`HttpResponse`构造函数：

```
def __init__(self, content='', *args, **kwargs):
    super(HttpResponse, self).__init__(*args, **kwargs)
    # Content is a bytestring. See the `content` property methods.
    self.content = content 
```

如您所见，默认情况下`content`为空。

现在，让我们看一下 Django 本身是如何调用它的（摘自 django.views.defaults）：

```
def server_error(request, template_name='500.html'):
    """
    500 error handler.

    Templates: :template:`500.html`
    Context: None
    """
    try:
        template = loader.get_template(template_name)
    except TemplateDoesNotExist:
        return http.HttpResponseServerError('<h1>Server Error (500)</h1>')
    return http.HttpResponseServerError(template.render(Context({}))) 
```

正如您所看到的，当您产生服务器错误时，使用了名为 500.html 的模板，但是当您简单地返回`HttpResponseServerError`内容为空时，浏览器会退回到它的默认页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T15:23:27.830

把它放在 urls.py 的下面。

```
#handle the errors    
from django.utils.functional import curry
from django.views.defaults import *

handler500 = curry(server_error, template_name='500.html') 
```

将 500.html 放入您的模板中。就这么简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T15:01:54.487

您是否尝试过使用其他浏览器？您的自定义错误页面是否大于 512 字节？当服务器的答案短于 512 字节时，似乎某些浏览器（包括 Chrome）会用自己的错误页面替换错误页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-29T08:07:08.393

从 Django 2+ 开始，您只需将相应的错误模板放在基本模板文件夹中即可。Django 会在呈现默认值之前自动呈现它们。

[https://docs.djangoproject.com/en/2.0/ref/views/#error-views](https://docs.djangoproject.com/en/2.0/ref/views/#error-views)

在您的情况下，只需将模板“500.html”（或“404.html”）放入 /templates

# php - SCORM 与本地数据库的集成

> ID：14731989
> 
> 赞同：4
> 
> 时间：2013-02-06T14:55:39.333
> 
> 标签：php, jquery, ajax, wordpress, drupal

我有一个 PHP Web 应用程序，我需要将 SCORM 与我的应用程序集成。我知道有用于集成 SCORM 的云选项。但我们的要求是将课程详细信息保存到我们的本地数据库中。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:58:22.627

您有几个选项可以将 SCORM 内容集成到独立（Web 或其他）应用程序中。

一种是 SCORMCloud (www.scorm.com)，它为您提供了一个集成 API。他们为 WordPress 和 Drupal 提供了基于 PHP 的插件，您可以将其用作指南。

SCORMCloud 有几种方法，您可以将学习者数据带回数据库。

课程启动完成后，SCORMCloud 将重定向回您的网站。此时，您可以点击 SCORMCloud API 并获取启动结果，然后将其写回您的数据库。

我们公司 (www.aura-software.com) 为基于云的电子学习资源（Vimeo、SCORMCloud、TinCan LRSs）生产了一个名为 Bright CloudConnect 的应用程序集成框架。根据您的集成要求，它可以执行相同的功能和其他一些功能。在现有应用程序中启用可跟踪的电子学习是 Bright 的主要功能。

# c# - 更改工具提示控件

> ID：14731991
> 
> 赞同：2
> 
> 时间：2013-02-06T14:55:43.947
> 
> 标签：c#, .net, textbox, tooltip

我有一系列`textboxes`我想与之关联的`tooltip`。`tooltip`当用户单击黑色时，它会出现`textbox`，然后在他们开始输入或离开时消失`textbox`。`tooltip`应该直接放在 上面，这`textbox`就是我使用`ToolTip.Show`方法而不是`ToolTip.SetTooltip`方法的原因（它让我可以控制放置）。

到目前为止，对于每个`textbox`我都有 3 种方法；Enter、Leave 和 TextChanged：

```
tt = new ToolTip();
String message = "some message"; //different for each textbox

private void textbox1_Enter(object sender, EventArgs e)
{
    if (textbox1.Text == String.Empty)
    {
        tt.Show(message, textbox1, new Point(0, -2 * textbox1.Height));
    }
}

private void textbox1_Leave(object sender, EventArgs e)
{
    tt.Hide(textbox1);
}

private void textbox1_TextChanged(object sender, EventArgs e)
{
    tt.Hide(textbox1);
} 
```

现在考虑两个`textboxes`。单击会按预期在预期位置`textbox1`触发，然后退出会导致它消失。尝试同样的事情也有效。现在，如果我再次单击，则会显示正确的消息，但展示位置与我单击的位置相同。不仅如此，而且 的形状与 for 相同，这意味着我的消息被截断了。（对于的消息比对于的消息长）。有谁知道这可能是什么原因造成的？`tooltip``textbox1``textbox2``textbox1``tooltip``textbox2``tooltip``textbox2``textbox1``textbox2`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:40:40.213

我认为只有当`IsBalloon`属性为真时才会发生这种情况。不幸的是，已知的错误。

试试这样：

```
private void textbox1_Enter(object sender, EventArgs e) {
  if (textbox1.Text == String.Empty) {
    tt.Show(string.Empty, textbox1, 0);
    tt.Show(message, textbox1, new Point(0, -2 * textbox1.Height));
  }
} 
```

# java - 如何找到两个或多个多边形之间的最小距离？

> ID：14731992
> 
> 赞同：1
> 
> 时间：2013-02-06T14:55:46.233
> 
> 标签：java, javascript, google-api

我想找到两个多边形之间的最小距离。但我有一些问题要找到它。我是谷歌地图的新手，你能帮帮我吗？我有这些坐标可以使用；

```
 polygonArray = [[
       new google.maps.LatLng(40.56389453066509,33.739013671875),
       new google.maps.LatLng(40.39676430557206,32.135009765625),
       new google.maps.LatLng(39.87601941962116,36.046142578125)
    ]]; 
```

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:59:47.000

您需要一个几何库来计算两点之间的距离、多边形的中心等。看看this [other question](https://stackoverflow.com/q/2115976/34880)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T15:12:21.103

如果您决定编写自己的代码：

对于 2 个不重叠的多边形，最简单的代码（从编程的角度来看）将遍历一个多边形的点并找到一个多边形中的每个点与第二个多边形中的每条线之间的距离，然后对第二个多边形执行相同的操作多边形（每个点到每条线）。

如果您不确定多边形是否重叠，您还必须检查一个多边形中的每条线是否不与第二个多边形中的任何其他线相交（只需对 1 个多边形执行此操作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-21T21:23:26.860

下面的代码部分解决了这个问题，但仍然需要通过检测更靠近另一个多边形的边缘上的点来增强，因为这部分只适用于顶点

```
 static double solve(List<List<Integer>> p, List<List<Integer>> q) {
        double minLength = 100000000;
        for (List<Integer> qq : q) {
            for (List<Integer> pp : p) {
                double current = distanceBTWPoints(pp, qq);
                if (current < minLength) {
                    minLength = current;
                }
            }
        }
        System.out.println(minLength);
        return minLength;
    }

    static double distanceBTWPoints(List<Integer> p, List<Integer> q) {
        double xDiff = q.get(0) - p.get(0);
        double yDiff = q.get(1) - p.get(1);
//        if(xDiff==0 || yDiff==0)
//            return 0;
        System.out.println(+p.get(0) + "  " + q.get(0) + "  " + p.get(1) + "  " + q.get(1) + " x:" + xDiff + "  y: " + yDiff + " p: " + ((xDiff * xDiff) + (yDiff * yDiff)) + " VAl= " + Math.sqrt((xDiff * xDiff) + (yDiff * yDiff)));
//        System.out.println("p.get(0): "+p.get(0) +"  q.get(0) :"+q.get(0) +"  p.get(1):  "+p.get(1) +"  q.get(1): "+q.get(1) +" xDiff: " + xDiff + "  yDiff: " + yDiff + " plus: "+((xDiff * xDiff) + (yDiff * yDiff))+ " VAl= " + Math.sqrt((xDiff * xDiff) + (yDiff * yDiff)));
        System.out.println("--" + Math.hypot(xDiff, yDiff));
        System.out.println("--" + Math.sqrt((xDiff * xDiff) + (yDiff * yDiff)));
        return Math.hypot(xDiff, yDiff);
    } 
```

# javascript - 拆分 Javascript 片段

> ID：14731993
> 
> 赞同：1
> 
> 时间：2013-02-06T14:55:51.540
> 
> 标签：javascript, html, matomo

开源网络分析软件 Piwik 的建议是将以下代码放在您要跟踪的页面的末尾，直接在结束`</body>`标记之前：

```
<html>
<head>
    [...]
</head>
<body>
    [...]
    <!-- Piwik -->
    <script type="text/javascript">
    var pkBaseURL = (("https:" == document.location.protocol) ? "https://piwik.example.com/" : "http://piwik.example.com/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
    </script><script type="text/javascript">
    try {
    var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 4);
    piwikTracker.trackPageView();
    piwikTracker.enableLinkTracking();
    } catch( err ) {}
    </script><noscript><p><img src="http://piwik.example.com/piwik.php?idsite=4" style="border:0" alt="" /></p></noscript>
    <!-- End Piwik Tracking Code -->
</body>
</html> 
```

在以下假设下：

1.  https 从未使用过
2.  我们不在乎页面加载速度较慢，因为脚本在 DOM 之前加载

可以将以上内容转换为以下内容：

HTML 文件：

```
<html>
<head>
    [...]
    <script src="http://piwik.example.com/piwik.js" type="text/javascript"></script>
</head>
<body>
    [...]
    <noscript><p><img src="http://piwik.example.com/piwik.php?idsite=4" style="border:0" alt="" /></p></noscript>
</body>
</html> 
```

使用 jQuery 自定义 Javascript 文件：

```
$(document).ready(function() {
    try {
        var piwikTracker = Piwik.getTracker("http://piwik.example.com/piwik.php", 4);
        piwikTracker.trackPageView();
        piwikTracker.enableLinkTracking();
    }
    catch(err) {
    }
} 
```

有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:02:20.570

您正在推迟跟踪，直到页面完全加载。内联 Javascript 会在浏览器找到它时执行，因此您将获得不同的访问次数，具体取决于您调用的位置`piwikTracker.trackPageView();`。您称之为后者，将计算较少的访问/操作次数。

现在，您认为访问/操作是什么？如果用户在页面完全加载之前点击了您页面上的链接，您认为这是一次访问吗？

# google-chrome-extension - 如何在 Webkit 通知中包含链接？

> ID：14731996
> 
> 赞同：1
> 
> 时间：2013-02-06T14:55:57.843
> 
> 标签：google-chrome-extension, html5-notifications, webkit-notifications

我正在创建一个 Chrome 扩展程序，并且正在使用 Webkit 通知 API。我需要在通知中显示一个链接，但问题是现在 Webkit HTML 通知已被弃用，所以我只能使用带有简单消息的通知。我的意思是，一年前我可以创建一个 Wbkit HTML 通知并包含“a”元素，但现在我不能。

有没有办法在 Webkit 通知中显示链接？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T06:23:31.403

是的，您可以显示，检查此代码作为参考。

### 清单.json

注册的后台页面和通知所需的权限

```
{
    "name": "Notification with Link",
    "description": "http://stackoverflow.com/questions/14731996/how-to-include-a-link-in-a-webkit-notification",
    "manifest_version": 2,
    "version": "1",
    "permissions": [
        "notifications"
    ],
    "background": {
        "scripts": [
            "background.js"
        ]
    }
} 
```

### 背景.js

创建了一个 HTML 通知

```
// create a HTML notification:
var notification = webkitNotifications.createHTMLNotification(
    'notification.html' // html url - can be relative
);

// Then show the notification.
notification.show(); 
```

### 通知.html

添加脚本标签以避免 CSP

```
<html>

    <head>
        <script src="notification.js"></script>
    </head>

    <body>
        <a id="click" href="http://www.google.co.in/">Click Me</a>
    </body>

</html> 
```

### 通知.js

只需指向点击通知，可用于扩展任何功能。

```
document.addEventListener("DOMContentLoaded", function () {
    document.getElementById("click").addEventListener("click", function () {
        console.log("Clicked");
    });
}); 
```

# 参考

*   [通知 API](http://developer.chrome.com/extensions/notifications.html)
*   [CSP](https://developer.chrome.com/extensions/contentSecurityPolicy.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-02T08:28:40.490

要使 webkit 通知成为链接，请执行以下操作（我使用 jQuery 处理事件只是因为它更容易）：

```
var notification = window.webkitNotifications.createNotification(
  "http://www.google.com/images/logo.png", // icon url - can be relative
  "Google", // notification title
  "is the best search engine. Click to find out more"  // notification body text
);
// Show the notification, I'm assuming notifications are supported and allowed
notification.show();

jQuery(notification).click(function(){
    window.location = "http://www.google.com";
}); 
```