# StackOverflow 问答 14964000-14964999

# ruby-on-rails - 如何运行 rails 服务器守护进程？

> ID：14964002
> 
> 赞同：33
> 
> 时间：2013-02-19T17:44:29.123
> 
> 标签：ruby-on-rails, start-stop-daemon

我是 rails world 的新手，需要在守护进程模式下运行我的 rails 测试服务器。

我注意到有 aa -d 标志，但它对我不起作用..

```
rails -s -d 
```

不应该是这样吗？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-02-19T17:46:59.387

它应该是：

```
rails server --daemon

# to kill the server
kill `cat tmp/pids/server.pid`

# to tail development logs for debugging
tail -f log/development.log 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-02-19T17:45:33.770

值得尝试以下命令

```
$ rails s -d 
```

# c# - 由于特殊字符，在 VB.Net 中解析 XML 失败

> ID：14964003
> 
> 赞同：3
> 
> 时间：2013-02-19T17:44:30.873
> 
> 标签：c#, xml, regex, vb.net

我有一些解析 XML 字符串的 VB.Net 代码。

XML 字符串来自 TCP 3rd Party 流，因此我们必须获取我们获得的数据并处理它。我们遇到的问题是，其中一个元素数据有时可能包含特殊字符，例如 &、$、<，因此当执行“XMLDoc.LoadXml(XML)”时它会失败 - 注意 XMLDoc 配置为“Dim XMLDoc As XmlDocument =新的 XmlDocument()"。

已尝试为此谷歌答案，但我真的很难找到解决方案。看过 RegEX，但意识到这有一些限制；或者我只是不太了解它，哈哈。

如果它在这里有帮助是 XLM 的一个例子，我们会向我们流式传输（只是为了信息，消息标签来自 SMS 消息）：-（如果它有帮助，唯一会出错的位是（我所要做的就是检查）该`<Message>O&N</Message>`部分，因此在这种情况下，消息带有 &）

```
<IncomingMessage><DeviceSendTime>19/02/2013 14:00:50</DeviceSendTime>
 <Sender>0000111111</Sender>
 <Status>New</Status>
 <Transport>Sms</Transport>
 <Id>-1</Id>
 <Message>O&N</Message>
 <Timestamp>19/02/2013 14:00:50</Timestamp>
 <ReadTimestamp>19/02/2013 14:00:50</ReadTimestamp>
</IncomingMessage> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:27:10.477

如果我们专门在`Message`元素内查看，并假设元素内没有嵌套元素`Message`：

```
Dim url = "put url here"
Dim s As String

Dim characterMappings = New Dictionary(Of String, String) From {
    {"&", "&amp;"},
    {"<", "&lt;"},
    {">", "&gt;"},
    {"""", "&quot;"}
}

Using client As New WebClient
    s = client.DownloadString(url)
End Using
s = Regex.Replace(s,
    "(?:<Message>).*?(" & String.Join("|", characterMappings.Keys) & ").*?(?:</Message>)",
    Function(match) characterMappings(match.Groups(1).Value)
)
Dim x = XDocument.Parse(s) 
```

~~`$`XML 应该不是问题，但如果是，您可以将其添加到字典中。~~

使用`WebClient`来自[这里](https://stackoverflow.com/questions/1048199/easiest-way-to-read-from-a-url-into-a-string-in-net)。

**更新**

由于`$`在正则表达式中具有特殊含义，不能简单地添加到字典中；它需要`\`在正则表达式模式中进行转义。最简单的方法是手动编写模式，而不是将键加入字典：

```
s = Regex.Replace(s,
    "(?:<Message>).*?(&|<|>|\$).*?(?:</Message>)",
    Function(match) characterMappings(match.Groups(1).Value)
) 
```

另外，我强烈推荐[Expresso](http://www.ultrapico.com/Expresso.htm)使用正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:14:37.877

您的 XML 无效，因此它不是 XML。修复生成 XML 的代码（正确方法）或假装这是文本文件并享受解析非结构化文本的所有问题。

正如您在问题中所述，`<Message>O&N</Message>`XML 无效。这种“XML”最可能的原因是使用字符串连接来构造它，而不是使用适当的 XML 操作方法。除非您使用某种[晦涩难懂的语言](http://en.wikipedia.org/wiki/Brainfuck)，否则所有实际使用的语言都已内置或库支持 XML 创建，因此正确创建 XML 应该不难。

# php - apache不呈现特殊字符

> ID：14964005
> 
> 赞同：0
> 
> 时间：2013-02-19T17:44:36.867
> 
> 标签：php, html, apache

将我们的系统迁移到 Amazon EC2 后，德语字母等特殊字符无法正确呈现。我已经阅读了几篇通过修改 .htaccess 文件来解决这个问题的文章： [http ://www.askapache.com/htaccess/setting-charset-in-htaccess.html](http://www.askapache.com/htaccess/setting-charset-in-htaccess.html)

我们的页面是动态生成的，它们都有 meta 标签 -

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

这些命令都不起作用。

```
AddDefaultCharset UTF-8

<filesMatch ".(htm|html|css|js)$">
ForceType 'text/html; charset=UTF-8'
</filesMatch>

<filesMatch ".(htm|html|css|js)$">
AddDefaultCharset UTF-8
</filesMatch> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:51:28.700

> [http://mammacare.com/Specialist_graduates.php?a_id=497](http://mammacare.com/Specialist_graduates.php?a_id=497)

该页面上的数据是“ISO Latin 1”编码的，而不是 UTF-8。通过将浏览器切换到 Latin-1（*查看 > 编码*或类似）来轻松测试。

# java - 尝试在独立模式下执行 Acceleo 模块时出现问题

> ID：14964008
> 
> 赞同：1
> 
> 时间：2013-02-19T17:44:45.930
> 
> 标签：java, eclipse, acceleo

我已经成功地创建了一个用于 M2T 的 Acceleo 模块，并试图从 Java 程序中执行它。这是我尝试过的：

```
String[] str = {"/home/hamza/workspace/HLRedundancy/model/System1.xmi", "/home/hamza/workspace/HLRedundancy/"};
Generate.main(str); 
```

`Generate`是我创建的 Acceleo 模块的名称，因此是包含 Acceleo 生成方法的 Java 类的名称。

这是我经常遇到的错误：

```
Exception in thread "main" org.eclipse.acceleo.engine.AcceleoEvaluationException: The type of the first parameter of the main template named 'generateElement' is a proxy.
at org.eclipse.acceleo.engine.service.AcceleoService.doGenerate(AcceleoService.java:566)
at org.eclipse.acceleo.engine.service.AbstractAcceleoGenerator.generate(AbstractAcceleoGenerator.java:193)
at org.eclipse.acceleo.engine.service.AbstractAcceleoGenerator.doGenerate(AbstractAcceleoGenerator.java:158)
at HighLevelGenerator.main.Generate.doGenerate(Generate.java:250)
at HighLevelGenerator.main.Generate.main(Generate.java:160)
at Execute.main(Execute.java:11) 
```

我一直在寻找有关此错误的信息，但我不知道其原因。关于解决我的问题的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:04:37.640

此问题的最常见原因是未能正确注册与您的输入模型 (System1.xmi) 对应的元模型和工厂。

如果您查看生成的类“Generate.java”中的注释，您会注意到许多地方我们指出了在独立运行时要遵循的步骤。最重要的开始 registerPackages 你需要注册你的元模型。

如果您将启动调试到加载模型的位置（在该行之后放置一个断点`model = ModelUtils.load(newModelURI, modelResourceSet);`），您可以查看`model.eResource().getErrors()`列表以查看加载模型是否存在错误。

您可能也有兴趣[观看描述该过程的视频](http://www.obeonetwork.com/page/acceleo-stand-alone-launch)（需要注册）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T07:58:43.420

查看你的 acceleo 模块的第一行，元模型的 URI 是什么？它是否以 'http://' 开头？

也许这会有所帮助： [Acceleo 独立 - 第一个参数是代理](https://stackoverflow.com/questions/15957861/acceleo-stand-alone-first-parameter-is-proxy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-04T18:01:23.600

当您的元模型包含子包并且顶级包不包含任何类时，会发生此问题。为了解决这个问题，在顶层包中添加一个 Dummy 类并重新生成元模型代码。它对我来说很好。

# jquery - Eclipse 不理解 jquery

> ID：14964010
> 
> 赞同：0
> 
> 时间：2013-02-19T17:44:49.263
> 
> 标签：jquery, eclipse, compiler-errors

我有一个使用 jquery 的项目。但是，Eclipse 认为我直接从 jquery 网站下载的完全未修改的文件中存在错误。除了重新下载一个新的 jquery js 文件外，我还尝试了以下线程中的所有内容。

[更改 Eclipse 设置以忽略特定文件上的错误](https://stackoverflow.com/questions/4282448/change-eclipse-settings-to-ignore-errors-on-a-specific-file)

还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:49:47.917

我为此使用 Aptana（基于 Elipse 构建），因为它具有 jQuery 的代码提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:55:51.280

jQuery 经常让终端`;`离线，因为它们是可选的。Eclipse 不认为它们是可选的，并且总是会报告它们。这很烦人，但除非你从 Eclipse 得到“红色”错误，否则我不会担心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T18:28:17.690

如链接问题中所述，JavaScript 验证器仅报告 Source 文件夹中 .js 文件的问题。你可以让它忽略 jQuery 作为源代码。如果您仍然希望它处理 jQuery，请将其放在 JavaScript 包含路径属性页的库选项卡上指定的文件夹中。Content Assist 将在没有 JavaScript Validator 构建器记录文件问题的情况下尽其所能。

# ruby-on-rails - Omniauth Twitter - 登录后没有重定向

> ID：14964014
> 
> 赞同：0
> 
> 时间：2013-02-19T17:45:06.943
> 
> 标签：ruby-on-rails, twitter, oauth, omniauth

Rails 3.2.11 Omniauth 1.1.3

Omniauth-facebook 工作，但 Omniauth-twitter 不使用相同的代码。[像https://github.com/railscasts/241-simple-omniauth](https://github.com/railscasts/241-simple-omniauth) cast一样，设置是最小的。

在`https://api.twitter.com/oauth/authenticate?oauth_token=u6kWqVH3qY8bg7hMP5dFcHcPGSjKWnZ3YACNP6FsK0` Twitter 将我重定向到`https://api.twitter.com/oauth/authenticate`. 什么也没有发生。

我使用 Pow 进行开发，因此在“设置”选项卡中指定[http://xxxyyy.dev/auth/twitter/callback](http://xxxyyy.dev/auth/twitter/callback)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-10T16:00:03.557

它帮助我在我的应用程序的详细信息选项卡中使用“重新创建我的访问令牌”选项。

# c# - 超链接列表，按钮，打开新浏览器窗口的任何内容

> ID：14964017
> 
> 赞同：2
> 
> 时间：2013-02-19T17:45:19.423
> 
> 标签：c#, asp.net, data-binding, hyperlink, listbox

我需要在显示用户名列表的 ASP.NET 网页（aspx）内创建一个小窗口，当您单击用户名时，我需要一个新的浏览器窗口（不是选项卡）来打开特定大小. 我可以处理打开新的浏览器窗口，假设我使用的任何控件都可以让我进入我可以调用的代码隐藏函数......

```
 string url = "http://www.dotnetcurry.com";
 ScriptManager.RegisterStartupScript(this, this.GetType(), "OpenWin", "<script>openNewWin    ('" + url + "')</script>", false); 
```

这是链接页面中的标记。

```
<script language="javascript" type="text/javascript">
        function openNewWin(url) {
            var x = window.open(url, 'mynewwin', 'width=600,height=600,toolbar=1');
            x.focus();
        }
</script> 
```

1.) 我应该使用什么控件来解决这个问题，从数据库中获取相应的用户名后结构是什么样的？

这是我最接近的......这段代码使用了一个 ASP.NET 项目符号列表，我试图将它绑定到一个 HTML 链接列表，我不想在任何地方指向它，而是让我进入代码隐藏。相反，此代码实际上在页面上呈现为 HTML（它没有被解析为超链接..）

```
 protected void Page_Load(object sender, EventArgs e)
    {
        UsersBulletedList.DataSource = theContext.GetOnlineFavorites(4);
        UsersBulletedList.DataBind();
    }

  public IQueryable<String> GetOnlineFavorites(int theUserID)
    {
        List<String> theUserList = new List<String>();
        IQueryable<Favorite> theListOfFavorites= this.ObjectContext.Favorites.Where(f => f.SiteUserID == theUserID);
        foreach (Favorite theFavorite in theListOfFavorites)
        {
            string theUserName = this.ObjectContext.SiteUsers.Where(su => su.SiteUserID == theFavorite.FriendID && su.LoggedIn == true).FirstOrDefault().UserName;
            yourOnlineFavorites.Add("<a href='RealTimeConversation.aspx?UserName=" + theUserName + "'>" + theUserName + "</a>");
           //this needs to help me get into a codebehind method instead of linking to another page.
        }
        return yourOnlineFavorites.AsQueryable();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:03:32.823

我会在您的页面上创建一个并从该方法`Repeater`绑定您的结果。`GetOnlineFavorites`在 中`Repeater`，放置一个`LinkButton`带有`ItemCommand`将您的脚本添加到页面的事件的事件。

标记：

```
<asp:Repeater ID="repeater" runat="server" OnItemCommand="repeater_ItemCommand">
    <ItemTemplate>
        <asp:LinkButton runat="server" ID="linkButton"
            Text='<%# Eval("PropertyFromBindingCollection") %>'
            CommandName="OpenWindow" 
            CommandArgument='<%# Eval("AnotherProperty") %>' />
    </ItemTemplate>
</asp:Repeater> 
```

在这里， the和 the的`Text`属性将被设置为您集合中的某些属性。`LinkButton``CommandArgument``Repeater`

代码背后：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
    {
        repeater.DataSource = theContext.GetOnlineFavorites(4);
        repeater.DataBind();
    }
}

protected void repeater_ItemCommand(object sender, RepeaterCommandEventArgs e)
{
    if(e.CommandName == "OpenWindow")
    {
        string arg = e.CommandArgument; // this could be the url, or a userID to get favorites, or...?
        //Your open window script
    }
} 
```

现在，当用户单击其中一个 LinkBut​​tons 时，它将触发 的`ItemCommand`事件`Repeater`，检查`CommandName`（在 LinkBut​​ton 上设置），然后`CommandArgument`在`LinkButton`. 如果将 设置`CommandArgument`为 URL，则可以在 OpenWin 脚本中使用它，否则使用您设置的任何数据作为参数来获取要打开的 URL。

# vim - 是否可以将 NERDTreeToggle 的行为配置为在打开时使用 NERDTreeFind？

> ID：14964020
> 
> 赞同：0
> 
> 时间：2013-02-19T17:45:52.763
> 
> 标签：vim, vim-plugin, nerdtree

如果缓冲区未打开（而不是默认的 :NERDTree），是否可以配置 NERDTree 以便 :NERDTreeToggle 的行为类似于 :NERDTreeFind ？

如果做不到这一点，是否可以创建一个映射/小脚本来检查 NERDTree 窗口的可见性，如果打开则关闭它，如果关闭则调用 NERDTreeFind ？我查看了 NERDTree 文档以查找 NERDTree 窗口的可见性是否打开，但找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:28:25.817

您可以设置`let NERDTreeQuitOnOpen=1`在选择文件时关闭树，并为查找创建映射：

```
nmap <leader>p :NERDTreeFind<CR> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T18:20:06.753

有一个功能，可以帮助您区分NERDTree是否打开。

`nerdtree#isTreeOpen()`

您可以`:echom nerdtree#isTreeOpen()`在打开/关闭 Nerdtree 时进行一些测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-25T20:54:50.913

我现在也在学习使用 Vim，并且有同样的愿望让 NERDTreeToggle 在打开时使用 NERDTreeFind。经过一番挖掘/谷歌搜索后，我尝试在下面编写一个简单的 Vim 脚本，它似乎对我有用！:]

```
function! ToggleNERDTreeFind()
    if g:NERDTree.IsOpen()
        execute ':NERDTreeClose'
    else
        execute ':NERDTreeFind'
    endif
endfunction 
```

我只是将上述函数绑定到一个快捷键，用于查找/关闭 NERDTree。希望这可以帮助。

```
nnoremap <leader>f :call ToggleNERDTreeFind()<CR> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-02-20T18:03:07.800

thomaswhyyou 提供的函数的小改进，如果当前缓冲区为空，该函数也可以工作：

```
function! ToggleNERDTreeFind()
    if g:NERDTree.IsOpen()
        execute ':NERDTreeClose'
    else
      if bufname('%') == ''
          execute ':NERDTree'
      else
          execute ':NERDTreeFind'
      endif
    endif
endfunction 
```

# mysql - 如何优化包含“in”子查询的 MySQL 更新？

> ID：14964021
> 
> 赞同：1
> 
> 时间：2013-02-19T17:45:53.673
> 
> 标签：mysql, sql

`update`由于正在为表 a 中的每一行执行子查询，我该如何优化以下内容？

```
update 
  a 
set 
  col = 1 
where 
  col_foreign_id not in (select col_foreign_id in b) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:03:18.493

您可能会使用没有匹配记录的外部联接，而不是您的`not in`：

```
update table1 a
    left join table2 b on a.col_foreign_id = b.col_foreign_id
set a.col = 1
where b.col_foreign_id is null 
```

这应该使用简单的选择类型而不是依赖子查询。

您当前的查询（或实际有效的查询，因为 OP 中的示例看起来不像它）具有潜在危险，因为 b.col_foreign_id 中的 NULL 不会导致任何内容匹配，并且您不会更新任何行。

`not exists`如果您想更换`not in`.

我不能告诉你这会让你的查询更快，但这里有一些很好的[信息](https://stackoverflow.com/questions/2246772/whats-the-difference-between-not-exists-vs-not-in-vs-left-join-where-is-null)。您必须在您的环境中进行测试。

这是一个[SQL Fiddle](http://www.sqlfiddle.com/#!2/b5dec/1)，阐明了 in、exists 和 external join 之间的区别（检查返回的行、null 处理和执行计划）。

# python - 在 fastCGI apache 服务器上安装 Django 时无法找出错误日志

> ID：14964023
> 
> 赞同：2
> 
> 时间：2013-02-19T17:46:01.703
> 
> 标签：python, django, fastcgi, mod-fcgid

尝试在 FastCGI apache 服务器上安装 Django 时，我从错误日志中收到此错误。

```
[Tue Feb 19 10:28:54 2013] [warn] [client 74.59.229.207] (104)Connection reset by peer: mod_fcgid: error reading data from FastCGI server
[Tue Feb 19 10:28:54 2013] [error] [client 74.59.229.207] Premature end of script headers: mysite.fcgi
[Tue Feb 19 10:28:54 2013] [error] [client 74.59.229.207] Premature end of script headers: 500.php 
```

我不明白问题是来自服务器设置还是我的 .fcgi 代码。

**.htaccess**

```
AddHandler fcgid-script .fcgi
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(media/.*)$ - [L]
RewriteRule ^(adminmedia/.*)$ - [L]
RewriteCond %{REQUEST_URI} !(mysite.fcgi)
RewriteRule ^(.*)$ mysite.fcgi/$1 [L] 
```

**我的网站.fcgi**

```
#!/usr/bin/python
import sys, os

sys.path.insert(0, "/home2/lacliniq/opt/python27/bin/python")
sys.path.insert(1, "/home2/lacliniq/opt/python27/lib")

os.chdir("/home2/lacliniq/public_html/checkupappdev")

os.environ['DJANGO_SETTINGS_MODULE'] = "firstaid.settings"

from django.core.servers.fastcgi import runfastcgi
runfastcgi(method="threaded", daemonize="false") 
```

我觉得 .fcgi 代码没问题，因为它在从 shell 运行时按预期运行。如果有人可以帮助我走上正确的道路，那真的会有所帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T19:47:11.450

正如乔丹所说，这是fcgi文件的问题。

我在尝试让 Django 在 bluehost 上工作时遇到了同样的问题。首先要检查的几件事是 fcgi 文件设置为 755，并使用以下命令确保您的设置文件格式正确：

```
python manage.py runserver 
```

如果一切正常，请尝试我在[https://my.hostmonster.com/cgi/help/585](https://my.hostmonster.com/cgi/help/585)找到的解决方案。从那里的方向：

```
cd <fcgi directory>
unset PYTHONPATH
./mysite.fcgi 
```

如果您收到如下错误：

```
bad interpreter: No such file or directory 
```

这意味着 shebang (#!) 行指向一个不存在的文件或目录，或者 fcgi 是通过 ftp 以二进制模式而不是 ascii 上传的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-18T19:20:37.770

尝试改变“观点”：以 apache 用户身份运行 fcgi 文件（我相信会显示一些有趣的消息）。例如

```
$ sudo su www-data
$ cd <fcgi directory>
$ ./mysite.fcgi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T18:42:46.583

这可能是您的 .fcgi 文件有问题，或者更有可能是配置 django 站点时出现问题。

尝试使用 ./mysite.fcgi 在 shell 中直接运行您的 .fcgi。它应该会吐出一些错误，这将为您提供一些解决问题的方法。

# ios - 如何符号化复制/粘贴的崩溃报告？

> ID：14964024
> 
> 赞同：9
> 
> 时间：2013-02-19T17:46:04.763
> 
> 标签：ios, crash-reports, organizer, symbolicatecrash

我有一个用户在使用 iPhone 应用程序的应用商店版本时遇到了崩溃。没有通过 iTunes 连接报告崩溃，用户无法与 iTunes 同步并获取 .crash 文件（他们没有计算机）。但是，用户可以在“设置 > 常规 > 关于 > 诊断和使用数据”下从手机复制和粘贴崩溃报告。

我把这个用户复制的崩溃报告手动粘贴到一个文本文件中，并用 .crash 扩展名重命名它。当我将此手动创建的 .crash 报告导入 XCode 的 Organizer 时，我无法对其进行符号化。我正在使用生成应用商店二进制文件的相同 XCode 副本，并且 ipa 已存档，并且我能够表示来自 iTunes 连接的崩溃。

是否预期手动创建的 .crash 文件不会象征性或我做错了什么？任何帮助将非常感激！

谢谢！

****更新**** 我也无法使用此处的步骤来符号化崩溃报告：[Symbolicating iPhone App Crash Reports](https://stackoverflow.com/questions/1460892/symbolicating-iphone-app-crash-reports)。

****更新 2**** 这是崩溃报告：

```
Incident Identifier: 3A2A3D26-1E44-46AA-9777-658EBBBEDD57
CrashReporter Key:   a9eadbf28904a2c3b4d285c7455db9ae06a5a555
Hardware Model:      iPhone5,1
Process:         MyApp [1180]
Path:            /var/mobile/Applications/0B09C692-7C36-4398-AC77-4217401E0FC/MyApp.app/MyApp
Identifier:      MyApp
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-02-12 18:45:15.066 -0500
OS Version:      iOS 6.1 (10B143)
Report Version:  104

Exception Type:  00000020
Exception Codes: 0x000000008badf00d
Highlighted Thread:  0

Application Specific Information:
com.company.MyApp failed to resume in time

Elapsed total CPU time (seconds): 0.800 (user 0.800, system 0.000), 4% CPU 
Elapsed application CPU time (seconds): 0.004, 0% CPU

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   libsystem_kernel.dylib            0x3b39ce98 0x3b39c000 + 3736
1   libdispatch.dylib                 0x3b2d7c16 0x3b2d2000 + 23574
2   CoreData                          0x330b9304 0x32f4d000 + 1491716
3   CoreData                          0x330a75f6 0x32f4d000 + 1418742
4   CoreData                          0x32f56a3e 0x32f4d000 + 39486
5   MyApp                          0x000f17b8 0xef000 + 10168
6   MyApp                          0x000f11b4 0xef000 + 8628
7   MyApp                          0x000f2f2c 0xef000 + 16172
8   MyApp                          0x0010c9c6 0xef000 + 121286
9   MyApp                          0x0010cb3c 0xef000 + 121660
10  UIKit                             0x3503e2f0 0x34fd4000 + 434928
11  UIKit                             0x3505b0b0 0x34fd4000 + 553136
12  UIKit                             0x3503e2f0 0x34fd4000 + 434928
13  UIKit                             0x3505af64 0x34fd4000 + 552804
14  UIKit                             0x3505aef0 0x34fd4000 + 552688
15  UIKit                             0x34fe0a82 0x34fd4000 + 51842
16  CoreFoundation                    0x3319d93e 0x33106000 + 620862
17  CoreFoundation                    0x3319bc34 0x33106000 + 613428
18  CoreFoundation                    0x3319bf8e 0x33106000 + 614286
19  CoreFoundation                    0x3310f238 0x33106000 + 37432
20  CoreFoundation                    0x3310f0c4 0x33106000 + 37060
21  GraphicsServices                  0x36ced336 0x36ce8000 + 21302
22  UIKit                             0x3502b2b4 0x34fd4000 + 357044
23  MyApp                          0x000f0d16 0xef000 + 7446
24  MyApp                          0x000f0ccc 0xef000 + 7372

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib            0x3b39d5d0 0x3b39c000 + 5584
1   libdispatch.dylib                 0x3b2d8d22 0x3b2d2000 + 27938
2   libdispatch.dylib                 0x3b2d4374 0x3b2d2000 + 9076

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib            0x3b39ce30 0x3b39c000 + 3632
1   libsystem_kernel.dylib            0x3b39cfd0 0x3b39c000 + 4048
2   CoreFoundation                    0x3319d2b6 0x33106000 + 619190
3   CoreFoundation                    0x3319c02c 0x33106000 + 614444
4   CoreFoundation                    0x3310f238 0x33106000 + 37432
5   CoreFoundation                    0x3310f0c4 0x33106000 + 37060
6   WebCore                           0x3910e390 0x39104000 + 41872
7   libsystem_c.dylib                 0x3b3060de 0x3b2f5000 + 69854
8   libsystem_c.dylib                 0x3b305fa4 0x3b2f5000 + 69540

Unknown thread crashed with unknown flavor: 5, state_count: 1

Binary Images:
   0xef000 -   0x134fff +MyApp armv7s  <1c1233075bd63f039b9f71f66cc1b1d3> /var/mobile/Applications/0B09C692-7C36-4398-AC77-A4217401E0FC/MyApp.app/MyApp
0x2fe7f000 - 0x2fe9ffff  dyld armv7s  <44ac9ef7642f3ba7943f6451887d3af5> /usr/lib/dyld
0x322dd000 - 0x323c3fff  AVFoundation armv7s  <56f22385ccb73e31863f1fa9e0b621dd> /System/Library/Frameworks/AVFoundation.framework/AVFoundation
0x323c4000 - 0x323c4fff  Accelerate armv7s  <f4e8c4c464953429ab6bd3160aadd176> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x323c5000 - 0x32502fff  vImage armv7s  <49d3cf19d0a23f4d836fc313e5fd6bab> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x32503000 - 0x325effff  libBLAS.dylib armv7s  <584e045442be39fc847ffe1a5e4c99b2> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x325f0000 - 0x328a6fff  libLAPACK.dylib armv7s  <30a3e7dd8c603a9d81b5e42704ba5971> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x328a7000 - 0x328fffff  libvDSP.dylib armv7s  <936354553eb93d2dafa76ffcad65f9b7> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x32900000 - 0x32912fff  libvMisc.dylib armv7s  <5fae8715a0403315bb1991b79677f916> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x32913000 - 0x32913fff  vecLib armv7s  <30275ee8819331229ba21256d7b94596> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x32914000 - 0x32925fff  Accounts armv7s  <df3255c62b0239f4995bc14ea79f106b> /System/Library/Frameworks/Accounts.framework/Accounts
0x32927000 - 0x3298bfff  AddressBook armv7s  <ea949de12ca93a6a96ef80d0cb4d9231> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x3298c000 - 0x32a46fff  AddressBookUI armv7s  <b25d9a6111d53dc48d8e5e9a30c362ad> /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x32b93000 - 0x32e1cfff  AudioToolbox armv7s  <8b8ef592d59f371783933b446a3e0e67> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x32e1d000 - 0x32ee2fff  CFNetwork armv7s  <ef41814d8641319c96cdeb1264d2d150> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x32ee3000 - 0x32f39fff  CoreAudio armv7s  <19aa715b19a93a5c8563dbc706e899be> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x32f4d000 - 0x33105fff  CoreData armv7s  <dee36bfc0c213492983c73d7bd83a27d> /System/Library/Frameworks/CoreData.framework/CoreData
0x33106000 - 0x33238fff  CoreFoundation armv7s  <bd8e6c9f94b43e3d9af96a0f03ff3011> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x33239000 - 0x33372fff  CoreGraphics armv7s  <ef057fe1c715314cabf133ec26fa718c> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x33374000 - 0x333affff  libCGFreetype.A.dylib armv7s  <163d7f8309a6350399bbb1fef6cde32c> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x33593000 - 0x335aefff  libRIP.A.dylib armv7s  <387d00a9ed55303b8936459a99869e07> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x335af000 - 0x33664fff  CoreImage armv7s  <7d7cd7998a113ed9b483e7dc9f388b05> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x33665000 - 0x336bdfff  CoreLocation armv7s  <94c4fa04ba3c3f5e9d17d75074985ce9> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x336f2000 - 0x33757fff  CoreMedia armv7s  <526b25ed6f4e31b790553bd80d46fec7> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x33758000 - 0x337e0fff  CoreMotion armv7s  <d71e40c801423c9cbb31a188120a1c58> /System/Library/Frameworks/CoreMotion.framework/CoreMotion
0x337e1000 - 0x33837fff  CoreTelephony armv7s  <bdf5f32e89073773a7fdbcc87fc6b412> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x33838000 - 0x3389afff  CoreText armv7s  <a01bc990cb483e828f7c3e08cd446daf> /System/Library/Frameworks/CoreText.framework/CoreText
0x3389b000 - 0x338aafff  CoreVideo armv7s  <851591a704dc344aa2fc397094b4c622> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x338ab000 - 0x3395ffff  EventKit armv7s  <6282cd57cf6233359489a46554a5bb15> /System/Library/Frameworks/EventKit.framework/EventKit
0x33a2f000 - 0x33bf2fff  Foundation armv7s  <0f73c35ada563c0bb2ce402d282faefd> /System/Library/Frameworks/Foundation.framework/Foundation
0x33dad000 - 0x33df6fff  IOKit armv7s  <4e5e55f27bbb35bab7af348997bfac17> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x33df7000 - 0x33fcffff  ImageIO armv7s  <e04300f6e6b232ce8a02139d8f18dfdc> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x34049000 - 0x341e3fff  MediaPlayer armv7s  <3328573c20643b02806559249c749793> /System/Library/Frameworks/MediaPlayer.framework/MediaPlayer
0x341e4000 - 0x3445efff  MediaToolbox armv7s  <1b36b1b41eca35989d2e822240a769cf> /System/Library/Frameworks/MediaToolbox.framework/MediaToolbox
0x3445f000 - 0x344e5fff  MessageUI armv7s  <2fbfe798afe130cba7360b49d0ad487c> /System/Library/Frameworks/MessageUI.framework/MessageUI
0x344e6000 - 0x3453ffff  MobileCoreServices armv7s  <b0d1162a8ab03529bb90e416895b568a> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x3462f000 - 0x34636fff  OpenGLES armv7s  <c9c8f7cbfbe5397382286b878bdf143c> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x34638000 - 0x34638fff  libCVMSPluginSupport.dylib armv7s  <b7d1ddfeb0db36d6af7293fa625b12be> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x3463c000 - 0x3463efff  libCoreVMClient.dylib armv7s  <8bcac434962435a895fa0b0a3a33b7a1> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x3463f000 - 0x34643fff  libGFXShared.dylib armv7s  <272a9de67f6632c3aebbe2407cfe716b> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x34644000 - 0x34683fff  libGLImage.dylib armv7s  <3a444257935236fab123e46e617c7a8d> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x34d83000 - 0x34e97fff  QuartzCore armv7s  <b28fd354be3c38a2965e6368fa35e0c7> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x34e98000 - 0x34ee4fff  QuickLook armv7s  <2350b507fe1b3a1a94d2824e34649b36> /System/Library/Frameworks/QuickLook.framework/QuickLook
0x34ee5000 - 0x34f13fff  Security armv7s  <e1fcc8913eba360c868f51558a01cf24> /System/Library/Frameworks/Security.framework/Security
0x34f92000 - 0x34fd1fff  SystemConfiguration armv7s  <0fb8d4a2fa8f30ce837e068a046e466b> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x34fd4000 - 0x35527fff  UIKit armv7s  <62bee9294ca13738bd7ff14365dc8561> /System/Library/Frameworks/UIKit.framework/UIKit
0x35528000 - 0x35567fff  VideoToolbox armv7s  <57487f6e3c38304ab0aa14dd16043f5c> /System/Library/Frameworks/VideoToolbox.framework/VideoToolbox
0x357fd000 - 0x35809fff  AccountSettings armv7s  <c4b7436e8ea33ffd9805905f262e4479> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x35850000 - 0x35853fff  ActorKit armv7s  <3aa66a29d9343626baa9d63d1a6efc14> /System/Library/PrivateFrameworks/ActorKit.framework/ActorKit
0x35855000 - 0x35858fff  AggregateDictionary armv7s  <6916a617625e3800bbb75a34294f4d13> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x35941000 - 0x35954fff  AirTraffic armv7s  <e2261ffe1d803bc6bbed23191c848bad> /System/Library/PrivateFrameworks/AirTraffic.framework/AirTraffic
0x35c84000 - 0x35cbffff  AppSupport armv7s  <7d6122cb42363dc981247c926e637a34> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x35cc0000 - 0x35ce4fff  AppleAccount armv7s  <668e780f91163aaca1c36294d702ae50> /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount
0x35cf1000 - 0x35cfefff  ApplePushService armv7s  <4638fab5719a3007beca5a798aa69e91> /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService
0x35d32000 - 0x35d3bfff  AssetsLibraryServices armv7s  <ec78d21573a23c34b6cec05ba56928f1> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x35d6a000 - 0x35d81fff  BackBoardServices armv7s  <36f93cef9f6830f490fe00818bcffa2e> /System/Library/PrivateFrameworks/BackBoardServices.framework/BackBoardServices
0x35d8b000 - 0x35daffff  Bom armv7s  <f35bf1c1b24a3742847383801ac37505> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x35e2f000 - 0x35e36fff  CaptiveNetwork armv7s  <e308f6a4f4bf3749b56bd6ff4dd8b30a> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x35e37000 - 0x35f01fff  Celestial armv7s  <a2f7438cb5163307a04d78bc2b8a86a9> /System/Library/PrivateFrameworks/Celestial.framework/Celestial
0x35f0e000 - 0x35f12fff  CertUI armv7s  <98e5a166bb473fa9b2840dfdad00580a> /System/Library/PrivateFrameworks/CertUI.framework/CertUI
0x35fb8000 - 0x35fd1fff  ChunkingLibrary armv7s  <cddc1ecde9723802ae441d20fe604c7e> /System/Library/PrivateFrameworks/ChunkingLibrary.framework/ChunkingLibrary
0x35fe5000 - 0x35feafff  CommonUtilities armv7s  <eb0b7e85b57e32f38dc498c0ee97aa7e> /System/Library/PrivateFrameworks/CommonUtilities.framework/CommonUtilities
0x3606f000 - 0x3609ffff  ContentIndex armv7s  <7a304e48f6213864820081df620939e9> /System/Library/PrivateFrameworks/ContentIndex.framework/ContentIndex
0x36292000 - 0x362affff  CoreServicesInternal armv7s  <373f1c58aee834698fb2e7b18660e870> /System/Library/PrivateFrameworks/CoreServicesInternal.framework/CoreServicesInternal
0x362b0000 - 0x362b1fff  CoreSurface armv7s  <55826212d8b4352b87d80f93bc9b25c6> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x3631e000 - 0x36323fff  CrashReporterSupport armv7s  <3b190badb14f3771b353fcd829719c80> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x36324000 - 0x36360fff  DataAccess armv7s  <7dcaa9fce0213cbead487fcd0980bd59> /System/Library/PrivateFrameworks/DataAccess.framework/DataAccess
0x364f5000 - 0x36507fff  DataAccessExpress armv7s  <05ed021492f2394f9d43216d8b963665> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x36546000 - 0x36547fff  DataMigration armv7s  <5e7169ad01853bd0ba0f66648a67a010> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x3654a000 - 0x36563fff  DictionaryServices armv7s  <27298e235f2c35938e1033517b1196a7> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x3656b000 - 0x36583fff  EAP8021X armv7s  <bff91efbc6ba369089b699bb50191905> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x36592000 - 0x36596fff  FTClientServices armv7s  <c158c4281a2e31d7913d9f8b0fb4417c> /System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices
0x36597000 - 0x365d5fff  FTServices armv7s  <71ca9253aee730eca6c4ca3210861a2c> /System/Library/PrivateFrameworks/FTServices.framework/FTServices
0x365d6000 - 0x369e9fff  FaceCoreLight armv7s  <432cbaeb84743441b9286532bc36c96d> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x36be1000 - 0x36bedfff  GenerationalStorage armv7s  <4e1afa8de682332ba6a042a6000c636e> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x36bee000 - 0x36ce7fff  GeoServices armv7s  <f2a20efae86a30cb8210550de0280ce7> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x36ce8000 - 0x36cf3fff  GraphicsServices armv7s  <44b33c403523309c9e930818c7fced34> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x36d62000 - 0x36dddfff  HomeSharing armv7s  <137c1fbc6a843d369038348255635111> /System/Library/PrivateFrameworks/HomeSharing.framework/HomeSharing
0x36dde000 - 0x36de8fff  IAP armv7s  <f43af100e43c3d1fac19a86cb7665c18> /System/Library/PrivateFrameworks/IAP.framework/IAP
0x36ea0000 - 0x36f18fff  IMCore armv7s  <a212f1303a4f3d47aaf21078f172e4bf> /System/Library/PrivateFrameworks/IMCore.framework/IMCore
0x36fdf000 - 0x3702bfff  IMFoundation armv7s  <55151f53b10934c3a5faac54e354f3f1> /System/Library/PrivateFrameworks/IMFoundation.framework/IMFoundation
0x37032000 - 0x37033fff  IOAccelerator armv7s  <832913083f7f347fba1340263ff13b52> /System/Library/PrivateFrameworks/IOAccelerator.framework/IOAccelerator
0x37034000 - 0x37039fff  IOMobileFramebuffer armv7s  <828a36a2325738bb8f2d4b97730d253a> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x3703a000 - 0x3703efff  IOSurface armv7s  <9925fbc4a08d3a17b72ac807cbbba8ba> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x37088000 - 0x3722ffff  JavaScriptCore armv7s  <f7be721eee903a93a7de361e5627445e> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x37255000 - 0x3725ffff  Librarian armv7s  <24168aa764823064a5b151a56a413c8d> /System/Library/PrivateFrameworks/Librarian.framework/Librarian
0x37260000 - 0x37296fff  MIME armv7s  <3f8dc502266237c6809c4d33b6e359ad> /System/Library/PrivateFrameworks/MIME.framework/MIME
0x372d5000 - 0x372dffff  MailServices armv7s  <737ace3c1c7c3ec6923095f3beadb4b2> /System/Library/PrivateFrameworks/MailServices.framework/MailServices
0x372fb000 - 0x37353fff  ManagedConfiguration armv7s  <b147c2d6f0283d988099706a2a404280> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x37354000 - 0x37359fff  Marco armv7s  <53ab26b3197135a781d55819fd80f032> /System/Library/PrivateFrameworks/Marco.framework/Marco
0x3736a000 - 0x373e0fff  MediaControlSender armv7s  <29ff7ec2b02d36ec8bf6db33c3a4ba8e> /System/Library/PrivateFrameworks/MediaControlSender.framework/MediaControlSender
0x373e1000 - 0x373eafff  MediaRemote armv7s  <0dc7c7c324d33af8b2f7d57f41123de9> /System/Library/PrivateFrameworks/MediaRemote.framework/MediaRemote
0x3745d000 - 0x37516fff  Message armv7s  <9ebc49dae1293bf8bbad64153932c756> /System/Library/PrivateFrameworks/Message.framework/Message
0x3751f000 - 0x37521fff  MessageSupport armv7s  <874f2566017b3931b4595c63d6f77098> /System/Library/PrivateFrameworks/MessageSupport.framework/MessageSupport
0x3752a000 - 0x37557fff  MobileAsset armv7s  <e3217ead58d5390395de360b3ca3a10a> /System/Library/PrivateFrameworks/MobileAsset.framework/MobileAsset
0x37584000 - 0x37593fff  MobileDeviceLink armv7s  <ed43d4db46a43db0976eeac5f3bc77a1> /System/Library/PrivateFrameworks/MobileDeviceLink.framework/MobileDeviceLink
0x3759c000 - 0x3759ffff  MobileInstallation armv7s  <7cbe167946123bbea56ae58208e09762> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x375a0000 - 0x375a6fff  MobileKeyBag armv7s  <5c7d50e11eb537ae89ea12cb7ddd3935> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x375df000 - 0x37602fff  MobileSync armv7s  <8ea08ca56ead3d77bba046811a917f79> /System/Library/PrivateFrameworks/MobileSync.framework/MobileSync
0x37603000 - 0x37606fff  MobileSystemServices armv7s  <5796fff2895f38e4b0f844269d4fbae5> /System/Library/PrivateFrameworks/MobileSystemServices.framework/MobileSystemServices
0x3761e000 - 0x37627fff  MobileWiFi armv7s  <e9ae11c07476390d9598c861658cee7d> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x37641000 - 0x37785fff  MusicLibrary armv7s  <057b076c74fd31b590bccc9b64d7f5cb> /System/Library/PrivateFrameworks/MusicLibrary.framework/MusicLibrary
0x3779d000 - 0x377b6fff  Notes armv7s  <de760fe287ee3346b61c4f4e701278f3> /System/Library/PrivateFrameworks/Notes.framework/Notes
0x377b7000 - 0x377b9fff  OAuth armv7s  <8e91174312e43ca9ac07d91d16b32d15> /System/Library/PrivateFrameworks/OAuth.framework/OAuth
0x37ede000 - 0x37f02fff  OpenCL armv7s  <87637dacbb3c3e029120369438e96fcf> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x38264000 - 0x38281fff  PersistentConnection armv7s  <c5164e016fa6340fbce9251278385105> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x38517000 - 0x3853ffff  PrintKit armv7s  <7109f645a9ca3a4997b4172aed228723> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x38540000 - 0x385b4fff  ProofReader armv7s  <e391e8d141c5352d978e5fde23afaaad> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x385b5000 - 0x385bdfff  ProtocolBuffer armv7s  <edc3f72bf38c3d81954ac85f489a17e8> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x386f9000 - 0x3870afff  SpringBoardServices armv7s  <5b94e9a529753052acde16c21e9d2566> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x3876c000 - 0x38847fff  StoreServices armv7s  <e465f24460ff3764b4fc95ebd44b2fe3> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x38895000 - 0x38897fff  TCC armv7s  <95c2aa492cc03862bd7bbfae6fa62b1b> /System/Library/PrivateFrameworks/TCC.framework/TCC
0x388b6000 - 0x388c3fff  TelephonyUtilities armv7s  <aa759d908b903f978ab6803b7947e524> /System/Library/PrivateFrameworks/TelephonyUtilities.framework/TelephonyUtilities
0x38d48000 - 0x38de8fff  UIFoundation armv7s  <e3a40cee28653c4485a4918016ff2b8e> /System/Library/PrivateFrameworks/UIFoundation.framework/UIFoundation
0x38de9000 - 0x38e01fff  Ubiquity armv7s  <99c7f2772cd63700aae2671b0b153cfe> /System/Library/PrivateFrameworks/Ubiquity.framework/Ubiquity
0x390e4000 - 0x39103fff  WebBookmarks armv7s  <ab55332c13da33fd825ea6204338fe19> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x39104000 - 0x39a34fff  WebCore armv7s  <f99b83bec11b331ab69194120917a7df> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x39a35000 - 0x39b11fff  WebKit armv7s  <02c32fdddbdc39b1848b721658a2fa51> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x39bbc000 - 0x39bc3fff  XPCObjects armv7s  <e6846a96a21d382f9fffd6a4536c0aa7> /System/Library/PrivateFrameworks/XPCObjects.framework/XPCObjects
0x39d16000 - 0x39d51fff  iCalendar armv7s  <bcc081bffdae3daea0f7d7db18ed80e8> /System/Library/PrivateFrameworks/iCalendar.framework/iCalendar
0x39e67000 - 0x39e9ffff  iTunesStore armv7s  <10c8c7e5c9f43f75af5b30fc2389c1a2> /System/Library/PrivateFrameworks/iTunesStore.framework/iTunesStore
0x3a72d000 - 0x3a733fff  libAccessibility.dylib armv7s  <9111bc894a4f3ef683f5ef4d699a861b> /usr/lib/libAccessibility.dylib
0x3a734000 - 0x3a74afff  libCRFSuite.dylib armv7s  <770ebb2f7d9a35749e6da5d1980c244f> /usr/lib/libCRFSuite.dylib
0x3a762000 - 0x3a76efff  libMobileGestalt.dylib armv7s  <efddaaea8d87321a80d4a6d3f9607a80> /usr/lib/libMobileGestalt.dylib
0x3a780000 - 0x3a780fff  libSystem.B.dylib armv7s  <12daef214fd234158028c97c22dc5cca> /usr/lib/libSystem.B.dylib
0x3a8a2000 - 0x3a8aefff  libbsm.0.dylib armv7s  <0f4a8d65b05a364abca1a97e2ae72cb5> /usr/lib/libbsm.0.dylib
0x3a8af000 - 0x3a8b8fff  libbz2.1.0.dylib armv7s  <f54b70863d9c3751bb59253b1cb4c706> /usr/lib/libbz2.1.0.dylib
0x3a8b9000 - 0x3a904fff  libc++.1.dylib armv7s  <3beff5a5233b3f51ab2fc748b68e9519> /usr/lib/libc++.1.dylib
0x3a905000 - 0x3a918fff  libc++abi.dylib armv7s  <f47a5c7bc24c3e4fa73f11b61af635da> /usr/lib/libc++abi.dylib
0x3a949000 - 0x3aa36fff  libiconv.2.dylib armv7s  <81d6972465103fa3b85b4125f0ad33f1> /usr/lib/libiconv.2.dylib
0x3aa37000 - 0x3ab80fff  libicucore.A.dylib armv7s  <642482cfc34a3a3b97bd731258dcdc6a> /usr/lib/libicucore.A.dylib
0x3ab88000 - 0x3ab88fff  liblangid.dylib armv7s  <ffb53baa33ba3642a55737311f17a672> /usr/lib/liblangid.dylib
0x3ab8b000 - 0x3ab92fff  liblockdown.dylib armv7s  <dbd4f278c71b3f219da3e895b1f6ac80> /usr/lib/liblockdown.dylib
0x3ae73000 - 0x3ae88fff  libmis.dylib armv7s  <8f0712b99e8e3f5e998f0240f75bb5ba> /usr/lib/libmis.dylib
0x3aeb1000 - 0x3afaffff  libobjc.A.dylib armv7s  <1d499765d38c3c8fa92b363f529a02dd> /usr/lib/libobjc.A.dylib
0x3b073000 - 0x3b088fff  libresolv.9.dylib armv7s  <3f7be9d397d63b8e931d21bd5f49b0eb> /usr/lib/libresolv.9.dylib
0x3b0ad000 - 0x3b133fff  libsqlite3.dylib armv7s  <758898189dca32a5a19e5200b8952110> /usr/lib/libsqlite3.dylib
0x3b134000 - 0x3b180fff  libstdc++.6.dylib armv7s  <249e8ca1717b370287bb556bbd96e303> /usr/lib/libstdc++.6.dylib
0x3b181000 - 0x3b1a7fff  libtidy.A.dylib armv7s  <96b463f0ffa0344699fce4d48aa623bc> /usr/lib/libtidy.A.dylib
0x3b1ab000 - 0x3b258fff  libxml2.2.dylib armv7s  <e87724e212573773a60bc56815cec706> /usr/lib/libxml2.2.dylib
0x3b259000 - 0x3b279fff  libxslt.1.dylib armv7s  <c52fbe01ce7b35c799630e97e8f1318b> /usr/lib/libxslt.1.dylib
0x3b27a000 - 0x3b286fff  libz.1.dylib armv7s  <b64a5c1989ba3ba4aafae83d841f9496> /usr/lib/libz.1.dylib
0x3b287000 - 0x3b28afff  libcache.dylib armv7s  <911ce99a94623ef1ae1ea786055fd558> /usr/lib/system/libcache.dylib
0x3b28b000 - 0x3b291fff  libcommonCrypto.dylib armv7s  <33140a5fa3fb3e5e8c6bb19bc0e21c5c> /usr/lib/system/libcommonCrypto.dylib
0x3b292000 - 0x3b294fff  libcompiler_rt.dylib armv7s  <cd17f0ee3dbc38f99910d12a6056bf5a> /usr/lib/system/libcompiler_rt.dylib
0x3b295000 - 0x3b29afff  libcopyfile.dylib armv7s  <5e733170766430eeaa4e7784e3c7555c> /usr/lib/system/libcopyfile.dylib
0x3b29b000 - 0x3b2d1fff  libcorecrypto.dylib armv7s  <a15c807dcb003ad69810546a578774d9> /usr/lib/system/libcorecrypto.dylib
0x3b2d2000 - 0x3b2e2fff  libdispatch.dylib armv7s  <247a388103633e17b24be038eac612c0> /usr/lib/system/libdispatch.dylib
0x3b2e3000 - 0x3b2e4fff  libdnsinfo.dylib armv7s  <f873dd712561350096b9452bf1fc4078> /usr/lib/system/libdnsinfo.dylib
0x3b2e5000 - 0x3b2e6fff  libdyld.dylib armv7s  <15676e2ee1423f598907ff49fcede85b> /usr/lib/system/libdyld.dylib
0x3b2e7000 - 0x3b2e7fff  libkeymgr.dylib armv7s  <b0a1a911d4853feba44133e9ce499bc9> /usr/lib/system/libkeymgr.dylib
0x3b2e8000 - 0x3b2edfff  liblaunch.dylib armv7s  <69dd64aba1413e75967cd4ad0afa2c15> /usr/lib/system/liblaunch.dylib
0x3b2ee000 - 0x3b2f1fff  libmacho.dylib armv7s  <5905b311c6fb376388e56a991bb3193d> /usr/lib/system/libmacho.dylib
0x3b2f2000 - 0x3b2f3fff  libremovefile.dylib armv7s  <b40e964d7c563296b38625bc7082d6a8> /usr/lib/system/libremovefile.dylib
0x3b2f4000 - 0x3b2f4fff  libsystem_blocks.dylib armv7s  <77a9976b82b73796a0bbc9783929a1e7> /usr/lib/system/libsystem_blocks.dylib
0x3b2f5000 - 0x3b37bfff  libsystem_c.dylib armv7s  <11bcf1060ec63c8b909a452e6f79be08> /usr/lib/system/libsystem_c.dylib
0x3b37c000 - 0x3b382fff  libsystem_dnssd.dylib armv7s  <94fab309ed9b35cdbc075cdda221bc70> /usr/lib/system/libsystem_dnssd.dylib
0x3b383000 - 0x3b39bfff  libsystem_info.dylib armv7s  <195d8eeb7c3f31bd916c0b5611abc0e7> /usr/lib/system/libsystem_info.dylib
0x3b39c000 - 0x3b3b2fff  libsystem_kernel.dylib armv7s  <79bea3ebfda132baba8f5b0ad6ab95f5> /usr/lib/system/libsystem_kernel.dylib
0x3b3b3000 - 0x3b3cffff  libsystem_m.dylib armv7s  <faafc8292d4935c4a78233e1d0879e13> /usr/lib/system/libsystem_m.dylib
0x3b3d0000 - 0x3b3defff  libsystem_network.dylib armv7s  <137f48e279a83d7496659c8e3d3729d4> /usr/lib/system/libsystem_network.dylib
0x3b3df000 - 0x3b3e6fff  libsystem_notify.dylib armv7s  <df14146497cb3fa0a002eedbed49da65> /usr/lib/system/libsystem_notify.dylib
0x3b3e7000 - 0x3b3e8fff  libsystem_sandbox.dylib armv7s  <85e91e99abc03db88eddc665424090b4> /usr/lib/system/libsystem_sandbox.dylib
0x3b3e9000 - 0x3b3e9fff  libunwind.dylib armv7s  <3b7ec561dbec3a199f09ea08a64e76ee> /usr/lib/system/libunwind.dylib
0x3b3ea000 - 0x3b3fffff  libxpc.dylib armv7s  <0562a59bdf8d3f7783e93f35d7e724a8> /usr/lib/system/libxpc.dylib 
```

****update 3**** 使用下面建议的 dwarfdump 命令更新

```
moliveira-> dwarfdump --uuid MyApp.app/MyApp
UUID: 208F2C67-493A-3DC7-AA74-AE08985CFC7C (armv7) MyApp.app/MyApp
UUID: 1C123307-5BD6-3F03-9B9F-71F66CC1B1D3 (12-11) MyApp.app/MyApp
[~/Desktop/symbolicate]
moliveira-> dwarfdump --uuid MyApp.app.dSYM
UUID: 208F2C67-493A-3DC7-AA74-AE08985CFC7C (armv7) MyApp.app.dSYM/Contents/Resources/DWARF/MyApp
UUID: 1C123307-5BD6-3F03-9B9F-71F66CC1B1D3 (12-11) MyApp.app.dSYM/Contents/Resources/DWARF/MyApp 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-14T17:04:17.313

One way to symbolicate a crash log is to run the following command on terminal:

**xcrun atos -o MyApp.app/MyApp -arch armv7 -l 0xb7000 -f MyApp.crash**

Replace the example hexadecimal number(0xb700) in the command above with the base load address. Base load address is the first memory address in the line immediately after

*"Binary Images:"*

To get the .app file:

1.  Right click on the xcarchive file and select *Show Package Contents*
2.  The .app file is in the *Products/Applications* directory.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-19T18:41:02.480

您必须拥有在设备上安装并生成崩溃报告的构建过程中生成的确切 dSYM。

可以在此处找到一些背景信息和确定符号化不起作用的原因的步骤：http: [//support.hockeyapp.net/kb/how-tos-faq/how-to-solve-symbolication-problems](http://support.hockeyapp.net/kb/how-tos-faq/how-to-solve-symbolication-problems)

此外，您可能希望在说以下内容时更具体：

> 当我将此手动创建的 .crash 报告导入 XCode 的 Organizer 时，我无法对其进行符号化。

符号化后的崩溃报告是什么样的？请发布完整的报告。

使用生成应用商店二进制文件的相同 Xcode 是无关紧要的，如上所述，您需要与应用程序二进制文件一起生成的 dSYM。正如上面链接的文章所解释的那样，可以通过聚光灯访问 dSYM。

[符号化 iPhone 应用程序崩溃报告](https://stackoverflow.com/questions/1460892/symbolicating-iphone-app-crash-reports)中解释的步骤并不总是有效。有关详细信息，请参阅此帖子：[https ://stackoverflow.com/a/14810920/474794](https://stackoverflow.com/a/14810920/474794)

**更新：**报告不会被符号化，因为线程的堆栈帧格式不正确！带有 2 个十六进制地址的行、+ 号和最后的数字必须位于上面行的末尾。所以进入每一行点击退格/删除键将其向上移动并保存。（不要删除库/二进制名称之后的选项卡！）然后符号应该可以工作。或者使用这个编辑过的：http: [//pastebin.com/L9r6PTXr](http://pastebin.com/L9r6PTXr)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-22T05:01:19.947

这类似于[如何手动符号化 iOS 崩溃以查看崩溃日志的问题](https://stackoverflow.com/questions/3832900/how-to-manually-symbolicate-ios-crash-to-view-crash-logs)

Product 菜单下有一个可用于 Xcode 的插件。该插件可通过[Alcatraz 包管理器](https://libraries.io/alcatraz)获得，也可以直接[从 github](https://github.com/MaheshRS/symbolication-plugin)下载。

该插件内部包含一个 shell 脚本，该脚本设置运行以下命令以进行手动崩溃符号化。

1.  为 symbolicatecrash.pl perl 脚本设置别名

> 别名 symbolicatecrash='/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/PrivateFrameworks/DTDeviceKit.framework/Versions/A/Resources/symbolicatecrash'

2.  要查找 symbolicatecrash，它应该与上面的别名不同：

> 查找 /Applications/Xcode.app -name symbolicatecrash -type f

3.  设置 DEVELOPER_DIR 变量：

> 导出 DEVELOPER_DIR='/Applications/Xcode.app/Contents/Developer'

4.  使用 dSYM，崩溃可以表示为：

> symbolicatecrash /path/to/MyApp_2012-10-01_Device.crash /path/to/MyApp.app.dSYM。

# sql-server-2008 - 慢 CTE 查询

> ID：14964026
> 
> 赞同：1
> 
> 时间：2013-02-19T17:46:07.750
> 
> 标签：sql-server-2008

我正在使用 CTE 查询来记录一列（PO_list）下的 HeaderKey 用逗号分隔的采购订单编号列表，如下所示：

```
HeaderKey       PO_list
1000215         101142-00-36, 101820-00-37, 103643-00-37, 104120-00-37, 104530-00-37,
                105095-00-37, 105700-00-37, 5062 SD, 99273-00-37, FIAT SAMPLES, S.RAPSON
                1000219 102288, 104545
1000220         104321-00-3, 104321-00-4, 104321-00-5, 105715-00-4, 105715-00-5, 105715-003 
```

当采购订单列表在 Freightcontents 表中为一个 headerkey 列出超过 15 个条目时，我遇到了吞吐量时间过长的问题。我希望有人能解决这个问题。

## 表定义如下

```
/****** Object: Table [dbo].[FreightContents] Script Date: 02/19/2013 16:21:38 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

Create TABLE [dbo].[FreightContents](

[HeaderKey] [char](35) NOT NULL,

[PurchaseOrderNumber] [char](30) NOT NULL,

) ON [PRIMARY] 

GO

SET ANSI_PADDING OFF
GO

INSERT INTO FreightContents VALUES('FJ#1000210','104001-00-3') 
INSERT INTO FreightContents VALUES('FJ#1000211','SAMPLE' ) 
INSERT INTO FreightContents VALUES('FJ#1000211','Hydraulic Cylinder' )
INSERT INTO FreightContents VALUES('FJ#1000211','99148/10182' )
INSERT INTO FreightContents VALUES('FJ#1000211','99148/101182' )
INSERT INTO FreightContents VALUES('FJ#1000211','99148' )
INSERT INTO FreightContents VALUES('FJ#1000211','99148' )
INSERT INTO FreightContents VALUES('FJ#1000211','101914' )
INSERT INTO FreightContents VALUES('FJ#1000211','101913' )
INSERT INTO FreightContents VALUES('FJ#1000211','101914' ) 
INSERT INTO FreightContents VALUES('FJ#1000211','101185' ) 
INSERT INTO FreightContents VALUES('FJ#1000211','101186' )
INSERT INTO FreightContents VALUES('FJ#1000211','101187' )
INSERT INTO FreightContents VALUES('FJ#1000211','101188' )
INSERT INTO FreightContents VALUES('FJ#1000211','101189' )
INSERT INTO FreightContents VALUES('FJ#1000211','101110' )
INSERT INTO FreightContents VALUES('FJ#1000211','101111' )
INSERT INTO FreightContents VALUES('FJ#1000211','101112' )
INSERT INTO FreightContents VALUES('FJ#1000211','101113' )
INSERT INTO FreightContents VALUES('FJ#1000211','101181' )
INSERT INTO FreightContents VALUES('FJ#1000211','101182')
INSERT INTO FreightContents VALUES('FJ#1000211','101914' ) 
INSERT INTO FreightContents VALUES('FJ#1000211','101914' ) 
INSERT INTO FreightContents VALUES('FJ#1000211','101914' ) 
INSERT INTO FreightContents VALUES('FJ#1000211','101185' ) 
INSERT INTO FreightContents VALUES('FJ#1000211','101182' ) 
INSERT INTO FreightContents VALUES('FJ#1000211','101182' ) 
INSERT INTO FreightContents VALUES('FJ#1000211','101182' ) 
INSERT INTO FreightContents VALUES('FJ#1000211','101186' ) 
INSERT INTO FreightContents VALUES('FJ#1000211','101182' ) 
INSERT INTO FreightContents VALUES('FJ#1000211','101187' ) 
INSERT INTO FreightContents VALUES('FJ#1000211','101186' ) 
INSERT INTO FreightContents VALUES('FJ#1000211','101185' ) 
INSERT INTO FreightContents VALUES('FJ#1000211','101184' ) 
INSERT INTO FreightContents VALUES('FJ#1000211','101183' ) 
```

## CTE 查询如下：

```
/****** Object: View [dbo].[CTE_POList_UK] Script Date: 02/19/2013 16:26:23 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[CTE_POList_UK] as
WITH CTE ( HeaderKey, PO_list, product_name, length )
AS ( SELECT HeaderKey, CAST( '' AS VARCHAR(8000) ), CAST( '' AS VARCHAR(8000) ), 0
FROM Database1..FreightContents with(readuncommitted)
GROUP BY HeaderKey
UNION ALL
SELECT p.HeaderKey, CAST( PO_list +
CASE WHEN length = 0 THEN '' ELSE ', ' END + rtrim(PurchaseOrderNumber) AS VARCHAR(8000) ),
CAST( PurchaseOrderNumber AS VARCHAR(8000)), length + 1
FROM CTE c
INNER JOIN Database1..FreightContents p with(readuncommitted)
ON c.HeaderKey = p.HeaderKey
WHERE p.PurchaseOrderNumber > c.product_name )
SELECT HeaderKey, PO_list
FROM ( SELECT Distinct substring(HeaderKey,4,10), PO_list,
RANK() OVER ( PARTITION BY HeaderKey ORDER BY length DESC )
FROM CTE ) D ( HeaderKey, PO_list, rank )
WHERE rank = 1 ;

GO 
```

* * *

创建后，它会通过右键单击对象资源管理器中的查询来显示结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:05:55.923

试试这个：

```
CREATE VIEW [dbo].[CTE_POList_UK2] 
AS
SELECT  DISTINCT 
        RIGHT(RTRIM(fc.HeaderKey), 7) HeaderKey
        ,
        STUFF(
        (   SELECT  ', ' + RTRIM(fc2.PurchaseOrderNumber)
            FROM    FreightContents fc2
            WHERE   fc2.HeaderKey = fc.HeaderKey
            FOR XML PATH(''), TYPE
        ).value('.', 'VARCHAR(MAX)')
        , 1, 2, '') PO_list
FROM    FreightContents fc 
```

我尝试运行您建议的 CTE，但无法完成。这可以得到你需要的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:57:57.250

尝试[本文](https://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/)中的一种方法，尤其是“黑盒 XML”方法：

```
WITH cte (HeaderKey, PO_list)
As
(
   SELECT
      H.HeaderKey,
      (SELECT ', ' + RTrim(PurchaseOrderNumber)
      FROM Database1.dbo.FreightContents As P
      WHERE P.HeaderKey = H.HeaderKey
      FOR XML PATH(''), TYPE).value('.', 'varchar(max)')
   FROM
      Database1.dbo.FreightContents As H
   GROUP BY
      H.HeaderKey
)
SELECT
   Substring(HeaderKey, 4, 10) As HeaderKey,
   Stuff(PO_list, 1, 2, '') As PO_list
FROM
   cte
; 
```

[SQL小提琴](http://www.sqlfiddle.com/#!3/a06e5/5)

# c++ - 在此 C++ 代码中找不到标识符

> ID：14964033
> 
> 赞同：-1
> 
> 时间：2013-02-19T17:46:25.603
> 
> 标签：c++

我有以下 C++ 代码，它给了我以下错误：

```
#include <iostream>
using namespace std;

int main()
{
    MyPrinter(100);
    MyPrinter(100.90);
    getchar();
    return 0;
}

template <class T> 
void MyPrinter(T arr)
{
    cout<<"Value is:  " + arr;
} 
```

![在此处输入图像描述](../Images/27b75a3539cfa913a1a5e85446915b51.png)

我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T17:48:40.577

您试图在声明或定义标识符之前使用它。

在使用之前定义它会起作用：

```
#include <iostream>
using namespace std;

template <class T> 
void MyPrinter(T arr)
{
    cout<<"Value is:  " + arr;
}

int main()
{
    MyPrinter(100);
    MyPrinter(100.90);
    getchar();
    return 0;
} 
```

或者，您可以通过将以下代码放在前面来**声明** （并将其余代码保持原样）：`MyPrinter``main`

```
template <class T>
void MyPrinter(T arr); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T17:48:50.763

模板定义应放在第一次使用之前。您需要将模板定义放在上面`main`：

```
#include <iostream>
using namespace std;

//Template Definition here
template <class T> 
void MyPrinter(T arr)
{
    cout<<"Value is:  " + arr;
}

int main()
{
    MyPrinter(100);
    MyPrinter(100.90);
    getchar();
    return 0;
} 
```

另一种方法是使用[前向声明](http://en.wikipedia.org/wiki/Forward_declaration)：

```
#include <iostream>
using namespace std;

//Forward Declaration
template <class T> void MyPrinter(T arr);

int main()
{
    MyPrinter(100);
    MyPrinter(100.90);
    getchar();
    return 0;
}

template <class T> 
void MyPrinter(T arr)
{
    cout<<"Value is:  " + arr;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T17:48:58.393

`MyPrinter`在您使用它时不可见，因为它是在源代码中声明和定义的。`MyPrinter`您可以通过移动before的定义来使其工作`main`：

```
template <class T> 
void MyPrinter(T arr)
{
    cout<<"Value is:  " + arr;
}

int main()
{
    MyPrinter(100);
    MyPrinter(100.90);
    getchar();
    return 0;
} 
```

或通过向前声明`MyPrinter`：

```
template <class T>
void MyPrinter(T arr);

int main()
{
    MyPrinter(100);
    MyPrinter(100.90);
    getchar();
    return 0;
}

template <class T> 
void MyPrinter(T arr)
{
    cout<<"Value is:  " + arr;
} 
```

# javascript - 如何将 JavaScript 数组信息导出到 csv（在客户端）？

> ID：14964035
> 
> 赞同：675
> 
> 时间：2013-02-19T16:49:24.263
> 
> 标签：javascript, csv, export, client-side, dojo-1.8

我知道有很多这种性质的问题，但我需要使用 JavaScript 来做到这一点。我正在使用`Dojo 1.8`并拥有数组中的所有属性信息，如下所示：

```
[["name1", "city_name1", ...]["name2", "city_name2", ...]] 
```

知道如何将其导出到`CSV`客户端吗？

* * *

## 回答 #1

> 赞同：1130
> 
> 时间：2013-02-19T19:51:13.533

您可以在本机 JavaScript 中执行此操作。您必须将数据解析为正确的 CSV 格式（假设您正在使用问题中描述的数据数组）：

```
const rows = [
    ["name1", "city1", "some other info"],
    ["name2", "city2", "more info"]
];

let csvContent = "data:text/csv;charset=utf-8,";

rows.forEach(function(rowArray) {
    let row = rowArray.join(",");
    csvContent += row + "\r\n";
}); 
```

或更短的方式（使用[箭头函数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)）：

```
const rows = [
    ["name1", "city1", "some other info"],
    ["name2", "city2", "more info"]
];

let csvContent = "data:text/csv;charset=utf-8," 
    + rows.map(e => e.join(",")).join("\n"); 
```

然后您可以使用 JavaScript`window.open`和`encodeURI`函数来下载 CSV 文件，如下所示：

```
var encodedUri = encodeURI(csvContent);
window.open(encodedUri); 
```

### 编辑：

如果你想给你的文件一个特定的名字，你必须做一些不同的事情，因为不支持使用该`window.open`方法访问数据 URI。为了实现这一点，您可以创建一个隐藏的`<a>`DOM 节点并设置其`download`属性，如下所示：

```
var encodedUri = encodeURI(csvContent);
var link = document.createElement("a");
link.setAttribute("href", encodedUri);
link.setAttribute("download", "my_data.csv");
document.body.appendChild(link); // Required for FF

link.click(); // This will download the data file named "my_data.csv". 
```

* * *

## 回答 #2

> 赞同：321
> 
> 时间：2014-07-23T23:32:43.067

根据上面的答案，我创建了这个我在 IE 11、Chrome 36 和 Firefox 29 上测试过的函数

```
function exportToCsv(filename, rows) {
    var processRow = function (row) {
        var finalVal = '';
        for (var j = 0; j < row.length; j++) {
            var innerValue = row[j] === null ? '' : row[j].toString();
            if (row[j] instanceof Date) {
                innerValue = row[j].toLocaleString();
            };
            var result = innerValue.replace(/"/g, '""');
            if (result.search(/("|,|\n)/g) >= 0)
                result = '"' + result + '"';
            if (j > 0)
                finalVal += ',';
            finalVal += result;
        }
        return finalVal + '\n';
    };

    var csvFile = '';
    for (var i = 0; i < rows.length; i++) {
        csvFile += processRow(rows[i]);
    }

    var blob = new Blob([csvFile], { type: 'text/csv;charset=utf-8;' });
    if (navigator.msSaveBlob) { // IE 10+
        navigator.msSaveBlob(blob, filename);
    } else {
        var link = document.createElement("a");
        if (link.download !== undefined) { // feature detection
            // Browsers that support HTML5 download attribute
            var url = URL.createObjectURL(blob);
            link.setAttribute("href", url);
            link.setAttribute("download", filename);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    }
} 
```

例如： [https ://jsfiddle.net/jossef/m3rrLzk0/](https://jsfiddle.net/jossef/m3rrLzk0/)

* * *

## 回答 #3

> 赞同：87
> 
> 时间：2015-03-27T15:29:45.267

此解决方案应适用于**Internet Explorer 10+、Edge、**新旧版本的**Chrome、FireFox、Safari、++**

接受的答案不适用于 IE 和 Safari。

```
// Example data given in question text
var data = [
  ['name1', 'city1', 'some other info'],
  ['name2', 'city2', 'more info']
];

// Building the CSV from the Data two-dimensional array
// Each column is separated by ";" and new line "\n" for next row
var csvContent = '';
data.forEach(function(infoArray, index) {
  dataString = infoArray.join(';');
  csvContent += index < data.length ? dataString + '\n' : dataString;
});

// The download function takes a CSV string, the filename and mimeType as parameters
// Scroll/look down at the bottom of this snippet to see how download is called
var download = function(content, fileName, mimeType) {
  var a = document.createElement('a');
  mimeType = mimeType || 'application/octet-stream';

  if (navigator.msSaveBlob) { // IE10
    navigator.msSaveBlob(new Blob([content], {
      type: mimeType
    }), fileName);
  } else if (URL && 'download' in a) { //html5 A[download]
    a.href = URL.createObjectURL(new Blob([content], {
      type: mimeType
    }));
    a.setAttribute('download', fileName);
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
  } else {
    location.href = 'data:application/octet-stream,' + encodeURIComponent(content); // only this mime type is supported
  }
}

download(csvContent, 'dowload.csv', 'text/csv;encoding:utf-8');
```

运行代码片段会将模拟数据下载为 csv

感谢 dandavis [https://stackoverflow.com/a/16377813/1350598](https://stackoverflow.com/a/16377813/1350598)

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2013-12-16T23:38:17.397

我来这里是为了寻找更多的 RFC 4180 合规性，但我没有找到一个实现，所以我为自己的需要做了一个（可能效率低下）。我以为我会与大家分享。

```
var content = [['1st title', '2nd title', '3rd title', 'another title'], ['a a a', 'bb\nb', 'cc,c', 'dd"d'], ['www', 'xxx', 'yyy', 'zzz']];

var finalVal = '';

for (var i = 0; i < content.length; i++) {
    var value = content[i];

    for (var j = 0; j < value.length; j++) {
        var innerValue =  value[j]===null?'':value[j].toString();
        var result = innerValue.replace(/"/g, '""');
        if (result.search(/("|,|\n)/g) >= 0)
            result = '"' + result + '"';
        if (j > 0)
            finalVal += ',';
        finalVal += result;
    }

    finalVal += '\n';
}

console.log(finalVal);

var download = document.getElementById('download');
download.setAttribute('href', 'data:text/csv;charset=utf-8,' + encodeURIComponent(finalVal));
download.setAttribute('download', 'test.csv'); 
```

希望这将有助于将来的人。这结合了 CSV 的编码以及下载文件的能力。在我关于[jsfiddle](http://jsfiddle.net/a5E9m/2/)的示例中。您可以下载文件（假设是 HTML 5 浏览器）或在控制台中查看输出。

**更新：**

Chrome 现在似乎已经失去了命名文件的能力。我不确定发生了什么或如何修复它，但每当我使用此代码（包括 jsfiddle）时，下载的文件现在名为`download.csv`.

* * *

## 回答 #5

> 赞同：37
> 
> 时间：2014-05-28T21:50:42.327

在 Chrome 35 更新中，更改了下载属性行为。

[https://code.google.com/p/chromium/issues/detail?id=373182](https://code.google.com/p/chromium/issues/detail?id=373182)

要在 chrome 中工作，请使用这个

```
var pom = document.createElement('a');
var csvContent=csv; //here we load our csv data 
var blob = new Blob([csvContent],{type: 'text/csv;charset=utf-8;'});
var url = URL.createObjectURL(blob);
pom.href = url;
pom.setAttribute('download', 'foo.csv');
pom.click(); 
```

* * *

## 回答 #6

> 赞同：35
> 
> 时间：2013-11-08T10:47:25.030

@Default 的解决方案在 Chrome 上完美运行（非常感谢！）但我遇到了 IE 问题。

这是一个解决方案（适用于 IE10）：

```
var csvContent=data; //here we load our csv data 
var blob = new Blob([csvContent],{
    type: "text/csv;charset=utf-8;"
});

navigator.msSaveBlob(blob, "filename.csv") 
```

* * *

## 回答 #7

> 赞同：32
> 
> 时间：2021-06-26T21:35:10.550

一个简约但功能完整的解决方案:)

```
/** Convert a 2D array into a CSV string
 */
function arrayToCsv(data){
  return data.map(row =>
    row
    .map(String)  // convert every value to String
    .map(v => v.replaceAll('"', '""'))  // escape double colons
    .map(v => `"${v}"`)  // quote it
    .join(',')  // comma-separated
  ).join('\r\n');  // rows starting on new lines
} 
```

例子：

```
let csv = arrayToCsv([
  [1, '2', '"3"'],
  [true, null, undefined],
]); 
```

结果：

```
"1","2","""3"""
"true","null","undefined" 
```

* * *

现在将其下载为文件：

```
 /** Download contents as a file
 * Source: https://stackoverflow.com/questions/14964035/how-to-export-javascript-array-info-to-csv-on-client-side
 */
function downloadBlob(content, filename, contentType) {
  // Create a blob
  var blob = new Blob([content], { type: contentType });
  var url = URL.createObjectURL(blob);

  // Create a link to download it
  var pom = document.createElement('a');
  pom.href = url;
  pom.setAttribute('download', filename);
  pom.click();
} 
```

下载它：

```
downloadBlob(csv, 'export.csv', 'text/csv;charset=utf-8;') 
```

[![保存对话框](../Images/56b8c897f1578bab7b177ba7158ea481.png)](https://i.stack.imgur.com/HVLeJ.png)

[![结果文件](../Images/f7b3b009aef999d9fe394a7bbefbc917.png)](https://i.stack.imgur.com/bBbhM.png)

* * *

## 回答 #8

> 赞同：31
> 
> 时间：2019-05-03T02:04:42.140

人们正在尝试创建自己的 csv 字符串，但在边缘情况下失败，例如特殊字符，这肯定是一个已解决的问题吧？

[papaparse](https://www.papaparse.com/) - 用于 JSON 到 CSV 编码。`Papa.unparse()`.

```
import Papa from "papaparse";

const downloadCSV = (args) => {  

  let filename = args.filename || 'export.csv';
  let columns = args.columns || null;

  let csv = Papa.unparse({ data: args.data, fields: columns})
  if (csv == null) return;

  var blob = new Blob([csv]);
  if (window.navigator.msSaveOrOpenBlob)  // IE hack; see http://msdn.microsoft.com/en-us/library/ie/hh779016.aspx
      window.navigator.msSaveBlob(blob, args.filename);
  else
  {
      var a = window.document.createElement("a");
      a.href = window.URL.createObjectURL(blob, {type: "text/plain"});
      a.download = filename;
      document.body.appendChild(a);
      a.click();  // IE: "Access is denied"; see: https://connect.microsoft.com/IE/feedback/details/797361/ie-10-treats-blob-url-as-cross-origin-and-denies-access
      document.body.removeChild(a);
  }

} 
```

示例用法

```
downloadCSV({ 
  filename: "filename.csv",
  data: [{"a": "1", "b": "2"}],
  columns: ["a","b"]
}); 
```

[https://github.com/mholt/PapaParse/issues/175](https://github.com/mholt/PapaParse/issues/175) - 请参阅此评论以了解浏览器支持讨论。

* * *

## 回答 #9

> 赞同：25
> 
> 时间：2018-04-20T23:07:39.377

[适用于所有语言](https://jsfiddle.net/SerdarDidan/ksq66mny/3/)

```
 function convertToCsv(fName, rows) {
        var csv = '';
        for (var i = 0; i < rows.length; i++) {
            var row = rows[i];
            for (var j = 0; j < row.length; j++) {
                var val = row[j] === null ? '' : row[j].toString();
                val = val.replace(/\t/gi, " ");
                if (j > 0)
                    csv += '\t';
                csv += val;
            }
            csv += '\n';
        }

        // for UTF-16
        var cCode, bArr = [];
        bArr.push(255, 254);
        for (var i = 0; i < csv.length; ++i) {
            cCode = csv.charCodeAt(i);
            bArr.push(cCode & 0xff);
            bArr.push(cCode / 256 >>> 0);
        }

        var blob = new Blob([new Uint8Array(bArr)], { type: 'text/csv;charset=UTF-16LE;' });
        if (navigator.msSaveBlob) {
            navigator.msSaveBlob(blob, fName);
        } else {
            var link = document.createElement("a");
            if (link.download !== undefined) {
                var url = window.URL.createObjectURL(blob);
                link.setAttribute("href", url);
                link.setAttribute("download", fName);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                window.URL.revokeObjectURL(url);
            }
        }
    }

    convertToCsv('download.csv', [
        ['Order', 'Language'],
        ['1', 'English'],
        ['2', 'Español'],
        ['3', 'Français'],
        ['4', 'Português'],
        ['5', 'čeština'],
        ['6', 'Slovenščina'],
        ['7', 'Tiếng Việt'],
        ['8', 'Türkçe'],
        ['9', 'Norsk bokmål'],
        ['10', 'Ελληνικά'],
        ['11', 'беларускі'],
        ['12', 'русский'],
        ['13', 'Українська'],
        ['14', 'հայերեն'],
        ['15', 'עִברִית'],
        ['16', 'اردو'],
        ['17', 'नेपाली'],
        ['18', 'हिंदी'],
        ['19', 'ไทย'],
        ['20', 'ქართული'],
        ['21', '中国'],
        ['22', '한국어'],
        ['23', '日本語'],
    ]) 
```

* * *

## 回答 #10

> 赞同：18
> 
> 时间：2018-09-19T21:28:21.013

您可以使用以下代码使用 Javascript 将数组导出到 CSV 文件。

这也处理特殊字符部分

```
var arrayContent = [["Séjour 1, é,í,ú,ü,ű"],["Séjour 2, é,í,ú,ü,ű"]];
var csvContent = arrayContent.join("\n");
var link = window.document.createElement("a");
link.setAttribute("href", "data:text/csv;charset=utf-8,%EF%BB%BF" + encodeURI(csvContent));
link.setAttribute("download", "upload_data.csv");
link.click(); 
```

[这](https://jsfiddle.net/vigneshvdm/02f6d4cL/)是工作 jsfiddle 的链接

* * *

## 回答 #11

> 赞同：14
> 
> 时间：2015-12-02T13:21:06.963

你去：

```
<!doctype html>  
<html>  
<head></head>  
<body>
<a href='#' onclick='downloadCSV({ filename: "stock-data.csv" });'>Download CSV</a>

<script type="text/javascript">  
    var stockData = [
        {
            Symbol: "AAPL",
            Company: "Apple Inc.",
            Price: "132.54"
        },
        {
            Symbol: "INTC",
            Company: "Intel Corporation",
            Price: "33.45"
        },
        {
            Symbol: "GOOG",
            Company: "Google Inc",
            Price: "554.52"
        },
    ];

    function convertArrayOfObjectsToCSV(args) {
        var result, ctr, keys, columnDelimiter, lineDelimiter, data;

        data = args.data || null;
        if (data == null || !data.length) {
            return null;
        }

        columnDelimiter = args.columnDelimiter || ',';
        lineDelimiter = args.lineDelimiter || '\n';

        keys = Object.keys(data[0]);

        result = '';
        result += keys.join(columnDelimiter);
        result += lineDelimiter;

        data.forEach(function(item) {
            ctr = 0;
            keys.forEach(function(key) {
                if (ctr > 0) result += columnDelimiter;

                result += item[key];
                ctr++;
            });
            result += lineDelimiter;
        });

        return result;
    }

    window.downloadCSV = function(args) {
        var data, filename, link;

        var csv = convertArrayOfObjectsToCSV({
            data: stockData
        });
        if (csv == null) return;

        filename = args.filename || 'export.csv';

        if (!csv.match(/^data:text\/csv/i)) {
            csv = 'data:text/csv;charset=utf-8,' + csv;
        }
        data = encodeURI(csv);

        link = document.createElement('a');
        link.setAttribute('href', data);
        link.setAttribute('download', filename);
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
       }
</script>  
</body>  
</html> 
```

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2020-09-04T16:35:33.680

老问题有很多很好的答案，但这是另一个简单的选择，它依赖于两个流行的库来完成它。一些答案提到了[Papa Parse](https://www.papaparse.com/docs#unparse)，但为下载部分推出了自己的解决方案。结合 Papa Parse 和[FileSaver.js](https://github.com/eligrey/FileSaver.js/)，您可以尝试以下操作：

```
const dataString = Papa.unparse(data, config);
const blob = new Blob([dataString], { type: 'text/csv;charset=utf-8' });
FileSaver.saveAs(blob, 'myfile.csv'); 
```

的`config`选项在[此处](https://www.papaparse.com/docs#unparse-config-default)`unparse`描述。

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2014-06-13T20:34:44.987

```
//It work in Chrome and IE ... I reviewed and readed a lot of answer. then i used it and tested in both ... 

var link = document.createElement("a");

if (link.download !== undefined) { // feature detection
    // Browsers that support HTML5 download attribute
    var blob = new Blob([CSV], { type: 'text/csv;charset=utf-8;' });
    var url = URL.createObjectURL(blob);            
    link.setAttribute("href", url);
    link.setAttribute("download", fileName);
    link.style = "visibility:hidden";
}

if (navigator.msSaveBlob) { // IE 10+
   link.addEventListener("click", function (event) {
     var blob = new Blob([CSV], {
       "type": "text/csv;charset=utf-8;"
     });
   navigator.msSaveBlob(blob, fileName);
  }, false);
}

document.body.appendChild(link);
link.click();
document.body.removeChild(link);

//Regards 
```

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2017-10-20T11:03:32.237

这里有很多自己动手的解决方案，用于将数据转换为 CSV，但几乎所有这些解决方案都会在数据类型方面有各种警告，因为它们将正确格式化而不会出错 Excel 等。

为什么不使用经过验证的东西：[Papa Parse](http://papaparse.com/docs#json-to-csv)

```
Papa.unparse(data[, config]) 
```

然后只需将其与此处的本地下载解决方案之一结合使用，例如。@ArneHB 的那个看起来不错。

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2016-04-08T16:16:15.720

这里有两个问题：

1.  如何将数组转换为csv字符串
2.  如何将该字符串保存到文件中

这里对第一个问题的所有答案（除了 Milimetric 的答案）似乎都是矫枉过正。而且 Milimetric 的一个不涵盖替代要求，例如用引号包围字符串或转换对象数组。

以下是我对此的看法：

对于一个简单的 csv，一个 map() 和一个 join() 就足够了：

```
 var test_array = [["name1", 2, 3], ["name2", 4, 5], ["name3", 6, 7], ["name4", 8, 9], ["name5", 10, 11]];
    var csv = test_array.map(function(d){
        return d.join();
    }).join('\n');

    /* Results in 
    name1,2,3
    name2,4,5
    name3,6,7
    name4,8,9
    name5,10,11 
```

此方法还允许您在内部连接中指定除逗号之外的列分隔符。例如一个标签：`d.join('\t')`

另一方面，如果您想正确执行此操作并将字符串括在引号“”中，那么您可以使用一些 JSON 魔术：

```
var csv = test_array.map(function(d){
       return JSON.stringify(d);
    })
    .join('\n') 
    .replace(/(^\[)|(\]$)/mg, ''); // remove opening [ and closing ]
                                   // brackets from each line 

/* would produce
"name1",2,3
"name2",4,5
"name3",6,7
"name4",8,9
"name5",10,11 
```

如果您有一组对象，例如：

```
var data = [
  {"title": "Book title 1", "author": "Name1 Surname1"},
  {"title": "Book title 2", "author": "Name2 Surname2"},
  {"title": "Book title 3", "author": "Name3 Surname3"},
  {"title": "Book title 4", "author": "Name4 Surname4"}
];

// use
var csv = data.map(function(d){
        return JSON.stringify(Object.values(d));
    })
    .join('\n') 
    .replace(/(^\[)|(\]$)/mg, ''); 
```

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2016-11-25T10:15:06.340

# ES6 的一个箭头函数：

```
const dataToCsvURI = (data) => encodeURI(
`data:text/csv;charset=utf-8,${data.map((row, index) =>  row.join(',')).join(`\n`)}`
); 
```

然后 ：

```
window.open(
  dataToCsvURI(
   [["name1", "city_name1"/*, ...*/], ["name2", "city_name2"/*, ...*/]]
  )
); 
```

如果有人需要这个[reactjs](/questions/tagged/reactjs "显示标记为“reactjs”的问题")，[`react-csv`](https://github.com/abdennour/react-csv)有没有

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2020-02-24T09:29:21.867

下面是一个原生的js解决方案。

```
function export2csv() {
  let data = "";
  const tableData = [];
  const rows = [
    ['111', '222', '333'],
    ['aaa', 'bbb', 'ccc'],
    ['AAA', 'BBB', 'CCC']
  ];
  for (const row of rows) {
    const rowData = [];
    for (const column of row) {
      rowData.push(column);
    }
    tableData.push(rowData.join(","));
  }
  data += tableData.join("\n");
  const a = document.createElement("a");
  a.href = URL.createObjectURL(new Blob([data], { type: "text/csv" }));
  a.setAttribute("download", "data.csv");
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
}
```

```
<button onclick="export2csv()">Export array to csv file</button>
```

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2015-04-21T09:09:07.260

使用 csv 数据创建一个 blob。即`var blob = new Blob([data], type:"text/csv");`

如果浏览器支持保存 blob 即`if window.navigator.mSaveOrOpenBlob)===true`，则使用以下方法保存 csv 数据： `window.navigator.msSaveBlob(blob, 'filename.csv')`

如果浏览器不支持保存和打开 blob，则将 csv 数据保存为：

```
var downloadLink = document.createElement('<a></a>');
downloadLink.attr('href', window.URL.createObjectURL(blob));
downloadLink.attr('download', filename);
downloadLink.attr('target', '_blank');
document.body.append(downloadLink); 
```

完整代码片段：

```
var filename = 'data_'+(new Date()).getTime()+'.csv';
var charset = "utf-8";
var blob = new Blob([data], {
     type: "text/csv;charset="+ charset + ";"
});
if (window.navigator.msSaveOrOpenBlob) {
     window.navigator.msSaveBlob(blob, filename);
} else {
    var downloadLink = document.element('<a></a>');
    downloadLink.attr('href', window.URL.createObjectURL(blob));
    downloadLink.attr('download', filename);
    downloadLink.attr('target', '_blank');  
    document.body.append(downloadLink); 
    downloadLink[0].click(); 
} 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2020-10-21T12:23:35.933

从[反应管理员](https://github.com/marmelab/react-admin/blob/master/packages/ra-core/src/export/downloadCSV.ts)：

```
function downloadCsv(csv, filename) {
    const fakeLink = document.createElement('a');
    fakeLink.style.display = 'none';
    document.body.appendChild(fakeLink);
    const blob = new Blob([csv], { type: 'text/csv' });
    if (window.navigator && window.navigator.msSaveOrOpenBlob) {
        // Manage IE11+ & Edge
        window.navigator.msSaveOrOpenBlob(blob, `${filename}.csv`);
    } else {
        fakeLink.setAttribute('href', URL.createObjectURL(blob));
        fakeLink.setAttribute('download', `${filename}.csv`);
        fakeLink.click();
    }
};

downloadCsv('Hello World', 'any-file-name.csv'); 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2015-09-28T18:43:18.260

以下是我在 Java GWT 应用程序的客户端下载 CSV 文件的方法。特别感谢 Xavier John 的解决方案。它已经过验证可以在 FF 24.6.0、IE 11.0.20 和 Chrome 45.0.2454.99（64 位）中运行。我希望这可以节省一些时间：

```
public class ExportFile 
{

    private static final String CRLF = "\r\n";

    public static void exportAsCsv(String filename, List<List<String>> data) 
    {
        StringBuilder sb = new StringBuilder();
        for(List<String> row : data) 
        {
            for(int i=0; i<row.size(); i++)
            {
                if(i>0) sb.append(",");
                sb.append(row.get(i));
            }
            sb.append(CRLF);
        }

        generateCsv(filename, sb.toString());
    }

    private static native void generateCsv(String filename, String text)
    /*-{
        var blob = new Blob([text], { type: 'text/csv;charset=utf-8;' });

        if (navigator.msSaveBlob) // IE 10+
        { 
            navigator.msSaveBlob(blob, filename);
        } 
        else 
        {
            var link = document.createElement("a");
            if (link.download !== undefined) // feature detection
            { 
                // Browsers that support HTML5 download attribute
                var url = URL.createObjectURL(blob);
                link.setAttribute("href", url);
                link.setAttribute("download", filename);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        }
    }-*/;
} 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-10-26T15:46:47.603

上面的答案有效，但请记住，如果您以 .xls 格式打开，列~~可能~~用`'\t'`而不是分隔`','`，答案[https://stackoverflow.com/a/14966131/6169225](https://stackoverflow.com/a/14966131/6169225)效果很好对我来说，只要我`.join('\t')`在数组上使用而不是`.join(',')`.

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2017-09-06T12:26:48.320

这是一个 Angular 友好的版本：

```
 constructor(private location: Location, private renderer: Renderer2) {}

  download(content, fileName, mimeType) {

    const a = this.renderer.createElement('a');

    mimeType = mimeType || 'application/octet-stream';

    if (navigator.msSaveBlob) {

      navigator.msSaveBlob(new Blob([content], {
        type: mimeType
      }), fileName);
    }
    else if (URL && 'download' in a) {

      const id = GetUniqueID();

      this.renderer.setAttribute(a, 'id', id);
      this.renderer.setAttribute(a, 'href', URL.createObjectURL(new Blob([content], {
        type: mimeType
      })));

      this.renderer.setAttribute(a, 'download', fileName);

      this.renderer.appendChild(document.body, a);

      const anchor = this.renderer.selectRootElement(`#${id}`);

      anchor.click();

      this.renderer.removeChild(document.body, a);
    }
    else {
      this.location.go(`data:application/octet-stream,${encodeURIComponent(content)}`);
    }
  }; 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2017-11-17T00:01:52.593

我使用此函数将一个转换`string[][]`为 csv 文件。它引用一个单元格，如果它包含 a `"`、 a`,`或其他空格（空格除外）：

```
/**
 * Takes an array of arrays and returns a `,` sparated csv file.
 * @param {string[][]} table
 * @returns {string}
 */
function toCSV(table) {
    return table
        .map(function(row) {
            return row
                .map(function(cell) {
                    // We remove blanks and check if the column contains
                    // other whitespace,`,` or `"`.
                    // In that case, we need to quote the column.
                    if (cell.replace(/ /g, '').match(/[\s,"]/)) {
                        return '"' + cell.replace(/"/g, '""') + '"';
                    }
                    return cell;
                })
                .join(',');
        })
        .join('\n'); // or '\r\n' for windows

} 
```

**注意**`map`：除非是 polyfill ，否则在 Internet Explorer < 11 上不起作用。

**注意**：如果单元格包含数字，您可以在`cell=''+cell`前面添加`if (cell.replace...`以将数字转换为字符串。

或者你可以使用 ES6 将它写在一行中：

```
t.map(r=>r.map(c=>c.replace(/ /g, '').match(/[\s,"]/)?'"'+c.replace(/"/g,'""')+'"':c).join(',')).join('\n') 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2019-03-27T06:46:28.290

只需尝试一下，这里的一些答案不处理 unicode 数据和带有逗号的数据，例如日期。

```
function downloadUnicodeCSV(filename, datasource) {
    var content = '', newLine = '\r\n';
    for (var _i = 0, datasource_1 = datasource; _i < datasource_1.length; _i++) {
        var line = datasource_1[_i];
        var i = 0;
        for (var _a = 0, line_1 = line; _a < line_1.length; _a++) {
            var item = line_1[_a];
            var it = item.replace(/"/g, '""');
            if (it.search(/("|,|\n)/g) >= 0) {
                it = '"' + it + '"';
            }
            content += (i > 0 ? ',' : '') + it;
            ++i;
        }
        content += newLine;
    }
    var link = document.createElement('a');
    link.setAttribute('href', 'data:text/csv;charset=utf-8,%EF%BB%BF' + encodeURIComponent(content));
    link.setAttribute('download', filename);
    link.style.visibility = 'hidden';
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
}; 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2019-10-15T08:22:39.487

## 下载 CSV 文件

```
 let csvContent = "data:text/csv;charset=utf-8,";
  rows.forEach(function (rowArray) {
    for (var i = 0, len = rowArray.length; i < len; i++) {
      if (typeof (rowArray[i]) == 'string')
        rowArray[i] = rowArray[i].replace(/<(?:.|\n)*?>/gm, '');
      rowArray[i] = rowArray[i].replace(/,/g, '');
    }

    let row = rowArray.join(",");
    csvContent += row + "\r\n"; // add carriage return
  });
  var encodedUri = encodeURI(csvContent);
  var link = document.createElement("a");
  link.setAttribute("href", encodedUri);
  link.setAttribute("download", "fileName.csv");
  document.body.appendChild(link);
  link.click(); 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2020-05-29T07:24:57.037

如果您正在寻找一个非常快速的解决方案，您还可以给这个小型库一个机会，它将为您创建和下载 CSV 文件：[https ://github.com/mbrn/filefy](https://github.com/mbrn/filefy)

用法很简单：

```
import { CsvBuilder } from 'filefy';

var csvBuilder = new CsvBuilder("user_list.csv")
  .setColumns(["name", "surname"])
  .addRow(["Eve", "Holt"])
  .addRows([
    ["Charles", "Morris"],
    ["Tracey", "Ramos"]
  ])
  .exportFile(); 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2016-02-03T19:49:09.993

如果有人需要这个来淘汰 js，它基本上可以与建议的解决方案一起使用：

html:

```
<a data-bind="attr: {download: filename, href: csvContent}">Download</a> 
```

查看模型：

```
// for the download link
this.filename = ko.computed(function () {
    return ko.unwrap(this.id) + '.csv';
}, this);
this.csvContent = ko.computed(function () {
    if (!this.csvLink) {
        var data = ko.unwrap(this.data),
            ret = 'data:text/csv;charset=utf-8,';

        ret += data.map(function (row) {
            return row.join(',');
        }).join('\n');

        return encodeURI(ret);
    }
}, this); 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2016-09-20T12:25:07.240

如果需要，我添加到 Xavier Johns 函数中还包括字段标题，但使用 jQuery。$.each 位将需要更改为原生 javascript 循环

```
function exportToCsv(filename, rows, headers = false) {
    var processRow = function (row) {
        row = $.map(row, function(value, index) {
            return [value];
        });
        var finalVal = '';
        for (var j = 0; j < row.length; j++) {
            if(i == 0 && j == 0 && headers == true){
                var ii = 0;
                $.each(rows[i], function( index, value ) {
                    //console.log(index);
                    var fieldName = index === null ? '' : index.toString();
                    //console.log(fieldName);
                    var fieldResult = fieldName.replace(/"/g, '""');
                    //console.log(fieldResult);
                    if (fieldResult.search(/("|,|\n)/g) >= 0){
                        fieldResult = '"' + fieldResult + '"';
                    }
                    //console.log(fieldResult);
                    if (ii > 0){
                        finalVal += ',';
                        finalVal += fieldResult;
                    }else{
                        finalVal += fieldResult;
                    }
                    ii++;
                    //console.log(finalVal);
                });
                finalVal += '\n';
                //console.log('end: '+finalVal);
            }
            var innerValue = row[j] === null ? '' : row[j].toString();
            if (row[j] instanceof Date) {
                innerValue = row[j].toLocaleString();
            };
            var result = innerValue.replace(/"/g, '""');
            if (result.search(/("|,|\n)/g) >= 0){
                result = '"' + result + '"';
            }
            if (j > 0){
                finalVal += ',';
                finalVal += result;
            }else{
                finalVal += result;
            }
        }
        return finalVal + '\n';
    };
    var csvFile = '';
    for (var i = 0; i < rows.length; i++) {
        csvFile += processRow(rows[i]);
    }
    var blob = new Blob([csvFile], { type: 'text/csv;charset=utf-8;' });
    if (navigator.msSaveBlob) { // IE 10+
        navigator.msSaveBlob(blob, filename);
    }else{
        var link = document.createElement("a");
        if (link.download !== undefined) { // feature detection
            // Browsers that support HTML5 download attribute
            var url = URL.createObjectURL(blob);
            link.setAttribute("href", url);
            link.setAttribute("download", filename);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    }
} 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2016-09-21T13:18:02.137

这是基于接受的答案的修改答案，其中数据将来自 JSON。

```
 JSON Data Ouptut:
             0 :{emails: "SAMPLE Co., peter@samplecompany.com"}, 1:{emails: "Another CO. , ronald@another.com"}

            JS:
            $.getJSON('yourlink_goes_here', { if_you_have_parameters}, function(data) {
            var csvContent = "data:text/csv;charset=utf-8,";
            var dataString = '';
             $.each(data, function(k, v) {
                dataString += v.emails + "\n";
             });

            csvContent += dataString;

            var encodedUri = encodeURI(csvContent);
            var link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "your_filename.csv");
            document.body.appendChild(link); // Required for FF

            link.click();
        }); 
```

# java - 根据键和值对地图进行排序

> ID：14964040
> 
> 赞同：0
> 
> 时间：2013-02-19T17:46:52.490
> 
> 标签：java, collections, map

`Hash Map`我开发了下面的代码，我们可以在其中根据键和值对基础进行排序。

主要逻辑是我们可以排序`Map`，无论是它`HashMap`还是`Hashtable`通过复制键而`List`不是`List`通过使用`Collections.sort()`方法进行排序，在这里您可以使用`Comparator`或`Comparable`根据您是要按自定义顺序还是自然顺序进行排序。一旦`List`对键进行排序，我们就可以创建另一个 Map，特别是`LinkedHashMap`按排序顺序插入键。`LinkedHashMap`将维护插入键的顺序，结果是基于键的排序 Map

我的疑问是，如果您提出建议，请告诉我其他更好的方法或你们可以提出的任何改进。

```
public class MapSortingExample {

    public static void main(String args[]) {

        //creating Hashtable for sorting
        Map<String, Integer> olympic2012 = new HashMap<String, Integer>();

        olympic2012.put("England", 3);
        olympic2012.put("USA", 1);
        olympic2012.put("China", 2);
        olympic2012.put("Russia", 4);
        //olympic2012.put("Australia", 4); //adding duplicate value

        //printing hashtable without sorting
        System.out.println("Unsorted Map in Java : " + olympic2012);

        //sorting Map e.g. HashMap, Hashtable by keys in Java
        Map<String, Integer> sorted = sortByKeys(olympic2012);
        System.out.println("Sorted Map in Java by key: " + sorted);

        //sorting Map like Hashtable and HashMap by values in Java
        sorted = sortByValues(olympic2012);
        System.out.println("Sorted Map in Java by values: " + sorted);

        //Sorting Map in Java by keys using TreeMap
        Map<String, Integer> sortedMapByKeys = new TreeMap<String,Integer>();
        sortedMapByKeys.putAll(olympic2012);
        System.out.println("Sorted Map in Java by key using TreeMap : " + sortedMapByKeys);

        //Sorting Map by keys in Java using Google Collections (Guava)
        //Main benefit is you can specify any ordering like natural or toString or arbitrary
        Map<String, Integer> sortingUsingGuava = Maps.newTreeMap(Ordering.natural());
        sortingUsingGuava.putAll(olympic2012);
        System.out.println("Example to sort Map in Java using Guava : " + sortingUsingGuava);

    }

    /*
     * Paramterized method to sort Map e.g. HashMap or Hashtable in Java
     * throw NullPointerException if Map contains null key
     */
    public static <K extends Comparable,V extends Comparable> Map<K,V> sortByKeys(Map<K,V> map){
        List<K> keys = new LinkedList<K>(map.keySet());
        Collections.sort(keys);

        //LinkedHashMap will keep the keys in the order they are inserted
        //which is currently sorted on natural ordering
        Map<K,V> sortedMap = new LinkedHashMap<K,V>();
        for(K key: keys){
            sortedMap.put(key, map.get(key));
        }

        return sortedMap;
    }

    /*
     * Java method to sort Map in Java by value e.g. HashMap or Hashtable
     * throw NullPointerException if Map contains null values
     * It also sort values even if they are duplicates
     */
    public static <K extends Comparable,V extends Comparable> Map<K,V> sortByValues(Map<K,V> map){
        List<Map.Entry<K,V>> entries = new LinkedList<Map.Entry<K,V>>(map.entrySet());

        Collections.sort(entries, new Comparator<Map.Entry<K,V>>() {

            @Override
            public int compare(Entry<K, V> o1, Entry<K, V> o2) {
                return o1.getValue().compareTo(o2.getValue());
            }
        });

        //LinkedHashMap will keep the keys in the order they are inserted
        //which is currently sorted on natural ordering
        Map<K,V> sortedMap = new LinkedHashMap<K,V>();

        for(Map.Entry<K,V> entry: entries){
            sortedMap.put(entry.getKey(), entry.getValue());
        }

        return sortedMap;
    }

} 
```

输出将是..

```
Unsorted Map in Java : {USA=1, England=3, Russia=4, China=2}
Sorted Map in Java by key: {China=2, England=3, Russia=4, USA=1}
Sorted Map in Java by values: {USA=1, China=2, England=3, Russia=4}
Sorted Map in Java by key using TreeMap : {China=2, England=3, Russia=4, USA=1}
Example to sort Map in Java using Guava : {China=2, England=3, Russia=4, USA=1} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:50:29.190

更好的方法是使用`TreeMap`给定的比较器，而不是“手动”排序并将结果放入`LinkedHashMap`

# php - 用一封电子邮件通知用户他们最喜欢的更新商店

> ID：14964044
> 
> 赞同：0
> 
> 时间：2013-02-19T17:47:00.493
> 
> 标签：php, mysql

我不确定这是不是问这个问题的正确地方，但我试一试。

我正在为电子商店或商店网络编写一种社交网络。

有一个表叫做关注者，它显示谁关注了哪个商店

表格1 ：

追随者

```
+-----------+---------------------+---------+---------+ 
| id        | shop_id             | user_id | date    |
+-----------+---------------------+---------+---------+
|  1        | 1                   |    23   |392185767| 
+-----------+---------------------+---------+---------+
|  2        | 1                   |    34   |392333337| 
+-----------+---------------------+---------+---------+ 
```

每次商店发布产品时，我都会将其放入更新表中（如果还没有的话）以跟踪更新的商店

表 2：

更新

```
+-----------+---------------------+----------+---------+ 
| id        | shop_id             |UPcounter | UPdate  |
+-----------+---------------------+----------+---------+
|   1       | 2                   |      1   |392185767| 
+-----------+---------------------+----------+---------+
|   2       | 1                   |      3   |392333337| 
+-----------+---------------------+----------+---------+ 
```

所以问题来了，我想通过电子邮件通知关注者他们最喜欢的商店的更新。

简单的方法是当时阅读更新的商店 1 行，获取他们的关注者并向他们发送电子邮件（我使用 cron 作业来运行它）

```
//select one updated shop
$uopdated_shop = $db->query("select updates.* , shops.* from updates  JOIN shops ON updates.shop_id = shops.id LIMIT 1");
if(!$uopdated_shos){ exit; }

// get it's followers
$followers = $db->query(" slsect f.* , u.* from followers f JOINE users u ON f.user_id = u.id
where f.shop_id = $uopdated_shop->id JOIN ");

$email->send($followers , $uopdated_shop , $sleep_betwwen_emails = 200 ); 
```

但是这样一个用户每天可能会收到多达 20-30 封电子邮件……假设他正在关注 20-30 家商店！

我正在寻找一种解决方案或算法来向每个用户发送他关注的更新商店列表，而不是为每个更新的商店发送一封电子邮件。

一种方法是遍历所有用户，让每个用户都关注商店并在更新后的商店中寻找他们，但有几千个用户可能需要几天时间才能完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:58:09.113

我认为您想将商店的名称连接在一起。就像是：

```
select u.*, group_concat(s.shop_name)
from followers f JOIN
     users u
     ON f.user_id = u.id join
     updates up
     on up.user_id = f.user_id join
     shops s
     on up.shop_id = s.shop_id
where f.update > <whatever update time>
group by u.user_id 
```

# maven - maven 忽略 findbugs suppressFBWarnings 注释

> ID：14964048
> 
> 赞同：2
> 
> 时间：2013-02-19T17:47:12.613
> 
> 标签：maven, maven-plugin, findbugs

我有 2 个项目，我正在使用`FindBugs`插件`maven`来识别错误。我还使用`@SuppressFBWarnings`注释来忽略特定的错误。

在第一个项目中，我将依赖项添加到 pom.xml 中，findbugs 报告和注释都运行良好。在第二个项目中，生成了报告，但它仍然识别出我使用注释抑制的错误。

我运行`mvn clean install site`以在构建文件夹中的计算机上生成报告。

我提到的两个项目中的每一个都有子项目，它们的子目录中有自己的 pom.xml 文件，所以在父目录中，我也有一个 pom.xml。此目录布局在两个主要项目中完全相同。

`<reporting>`这是我在标签下添加到父 pom 中的 XML ：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>findbugs-maven-plugin</artifactId>
    <version>2.3.2</version>
    <configuration>
        <xmlOutput>true</xmlOutput>
        <findbugsXmlOutput>true</findbugsXmlOutput>
        <fork>true</fork>
        <threshold>Low</threshold>
        <effort>Min</effort>
    </configuration>
</plugin> 
```

此外，在同一个父 pom 中，我将其添加到该`<dependencyManagement><dependencies>`部分：

```
<dependency>
        <groupId>com.google.code.findbugs</groupId>
        <artifactId>annotations</artifactId>
        <version>2.0.1</version>
</dependency> 
```

这在两个主要项目 pom 中是相同的。

现在，在我实际使用`@SuppressFBWarnings`注释的子项目中，并且仅在那个特定的子项目中，我在下面有这个`<dependencies>`：

```
<dependency>
    <groupId>com.google.code.findbugs</groupId>
    <artifactId>annotations</artifactId>
    <version>2.0.1</version>
</dependency> 
```

此外，这反映在其他工作项目中。我直接复制粘贴了。

一个项目完美无缺，我可以成功抑制误报。另一个项目完全忽略了`@SuppressFBWarnings`注释，我似乎无法修复它。

我在这里缺少什么吗？

我认为如果没有找到注释，而不是给出错误，它会忽略它吗？我怎么知道它是否找不到？

希望这是一个简单的修复。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-09T21:59:01.567

@SuppressFBWarnings 是在版本 3 中与注释一起引入的。这就是它应该看起来像这样的原因：

```
<dependency>
    <groupId>com.google.code.findbugs</groupId>
    <artifactId>annotations</artifactId>
    <version>3.0.1</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:22:30.437

尝试将注解 artifcat 添加到插件依赖项：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>findbugs-maven-plugin</artifactId>
    <version>2.3.2</version>
    <configuration>
        <xmlOutput>true</xmlOutput>
        <findbugsXmlOutput>true</findbugsXmlOutput>
        <fork>true</fork>
        <threshold>Low</threshold>
        <effort>Min</effort>
    </configuration>
    <dependencies>
        <dependency>
            <groupId>com.google.code.findbugs</groupId>
            <artifactId>annotations</artifactId>
            <version>2.0.1</version>
        </dependency>
    </dependencies>
</plugin> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-04T13:53:54.400

确保添加的依赖项位于依赖项标记之间。像这样：

```
<dependencies>
  <dependency>
     <groupId>something</groupId>
     <artifactId>something</artifactId>
      <version>something</version>
  </dependency>
<dependencies> 
```

# javascript - 内联 SVG 和 jQuery 选择

> ID：14964049
> 
> 赞同：3
> 
> 时间：2013-02-19T17:47:12.263
> 
> 标签：javascript, jquery, html, xhtml, svg

我在 HTML 文件中有一个内联 SVG。这个 SVG 里面有一个动画，id 为“move”。

如果我使用 jQuery 1.9.1 调用此动画来修改其属性，如下所示：

```
$("#move").attr("from", "500"); 
```

它运行良好（至少在 Firefox 16.0.1 中，我还没有测试过其他浏览器）。

如果我尝试像这样使用 jQuery 启动动画：

```
$("#move").beginElement(); 
```

它不起作用，再次在 Firefox 中。

如果我像这样使用 JavaScript 调用它：

```
var move=document.getElementById("move");
move.beginElement(); 
```

有用。

如何`beginElement()`使用 jQuery 调用函数？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T17:49:33.970

这将满足您的要求...

```
$("#move")[0].beginElement(); 
```

在不知道更多的情况下，我不能说更多。 `jQuery()[0]`返回 DOM 元素，而不是 jQuery 对象。

# xml - 将同一层次结构级别的两个节点与 PL/SQL 关联

> ID：14964051
> 
> 赞同：0
> 
> 时间：2013-02-19T17:47:17.810
> 
> 标签：xml, plsql, oracle11g

我目前正在使用 Oracle 11g 中的 Oracle PL/SQL。我有两种可以使用的 XML。

以下是两种类型的 XML 示例以及我到目前为止所做的提取。

类型 1 XML：

```
<ListItens1 xmlns=“xpto”&gt;
<item id=”1”&gt;
    <product type=”fruit”&gt;
        <model> Apple </model>
        <date>02/19/2013</date>
        <year>2013</year>
    </product>
</item >
<item id=”2”&gt;
    <product type=”notebook”&gt;
        <model> Vostro </model>
        <date>02/19/2013</date>
        <year> 2013 </year>
    </product>
</item>
</ListItens1> 
```

类型 2 XML：

```
<ListItens2 xmlns=“xpto”&gt;
 <item>1</item>
 <product type=”fruit”&gt;
    <model> Apple </model>
    <date>02/19/2013</date>
    <year>2013</year>
 </product>
 <item>2</item>
 <product type=”notebook”&gt;
    <model> Vostro </model>
    <date>02/19/2013</date>
    <year> 2013 </year>
 </product>
<ListItens2> 
```

这些 XML 被插入到具有 XMLTYPE 类型的 Archive 字段的表中。

```
CREATE TABLE XML_PRODUCT ( ID_XML NUMBER, DATA DATE, ARCHIVE XMLType); 
```

当 XML 是 1 类型时，我这样做没有问题：

```
SELECT 
  ExtractValue( value( NFe ) , '/item/@id', 'xmlns="xpto' ) ID,
  ExtractValue( value( NFe ) , '/item/product/@type', 'xmlns="xpto' ) TYPE,
  ExtractValue( value( NFe ) , '/item/product/model', 'xmlns="xpto' ) MODEL,
  ExtractValue( value( NFe ) , '/item/product/date'', 'xmlns="xpto' ) DATE,
  ExtractValue( value( NFe ) , '/item/product/year'', 'xmlns="xpto' ) YEAR,
FROM XML_PRODUCT,
  TABLE( XMLSequence( Extract ( ARCHIVE,  '/listItens1/item', 'xpto' ) ) ) NFe
WHERE ID_XML = 1; 
```

结果是：

```
 ID |  TYPE     | MODEL  |    DATE    | YEAR 
-----------------------------------------------
 1  |  fruit    | Apple  | 02/19/2013 | 2013   
 2  |  notebook | Vostro | 02/19/2013 | 2013 
```

但是对于 TYPE 2，我不知道如何在 ITEM 和 PRODUCT 之间进行关联，因为它们在 XML 中处于同一层次。

是否可以在不修改 XML 的情况下提取与项目关联的产品数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:05:39.880

您可以先提取项目计数，然后从中获取产品发生率。

```
select id_xml, 
       extractvalue(xml, '/item['||r||']', 'xmlns="xpto"' ) item,
       extractvalue(xml, '/product['||r||']/@type', 'xmlns="xpto"' ) type,
       extractvalue( xml , '/product['||r||']/model', 'xmlns="xpto"' ) model,
       extractvalue(xml , '/product['||r||']/date', 'xmlns="xpto"' ) dte,
       extractvalue( xml , '/product['||r||']/year', 'xmlns="xpto"' ) year
  from (select id_xml, extract(archive, '/ListItens2/*', 'xmlns="xpto"') xml, rownum r
           from xml_product,
                table(xmlsequence(extract(archive, '/ListItens2/item', 'xmlns="xpto"'))) nfe
          where id_xml = xxx); 
```

# elasticsearch - 使用轮胎的 Elasticsearch 查询

> ID：14964052
> 
> 赞同：2
> 
> 时间：2013-02-19T17:47:18.603
> 
> 标签：elasticsearch, tire

我有这个要求：

```
curl -XGET localhost:9200/users/_search -d '
{
  "query": {
    "filtered": {
      "query": {"match_all": {}},
      "filter": {
        "nested": {
          "path": "apps_events",
          "query":{
            "filtered": {
              "query": { "match_all": {}},
              "filter": {
                "and": [
                  {"term": {"apps_events.status": "active"}},
                  {"terms": {"apps_events.type": ["sale"]}}
                ]
              }
            }
          }
        }
      }
    }
  }
}' 
```

我没有成功将它转换成轮胎（rails gem）语言......我在轮胎测试中没有找到任何嵌套过滤器的例子......

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:59:13.583

好的，我找到了答案：

```
nested_filter = Tire::Search::Query.new do
  filtered do
    query { all }
    filter :term,  { 'apps_events.status' => 'active' }
    filter :terms, { 'apps_events.type'   => ['sale'] }
  end
end

tire.search(page: params[:page], per_page: params[:per_page], load: params[:load]) do
  query do
    filtered do
      query { all }
      # Merge the defined filter as a hash into the `nested` filter
      filter :nested, { path: 'apps_events'}.merge({ query: nested_filter.to_hash })
    end
  end
end 
```

感谢@karmiq [https://github.com/karmi/tire/issues/660](https://github.com/karmi/tire/issues/660)

# asp.net-mvc-3 - 在 MVC3 项目中管理多个表单并有条件地验证

> ID：14964055
> 
> 赞同：2
> 
> 时间：2013-02-19T17:47:28.357
> 
> 标签：asp.net-mvc-3, forms, validation, postback

我已经将两个单独的页面重构为一个页面，并且还合并了视图模型。

现在在我的项目中，登录和注册表单位于选项卡式视图的同一页面中。

我遇到的问题是验证。第一个表单有两个必填字段，另一个表单有两个其他必填字段。如果我发布第一个表单，其他两个字段的验证将失败。

我尝试了 IValidatableObject 但我不能做类似的事情：

```
 public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (PostPackOrigin == "LoginForm")
        {
            if(Username == "")
             yield return new ValidationResult("Username missing");
            if(Password == "")
             yield return new ValidationResult("Password missing");
        }
        if (PostPackOrigin == "RegistrationForm")
        {
            if(Name == "")
             yield return new ValidationResult("Name missing");
            if(Email == "")
             yield return new ValidationResult("Email missing");
        }
    } 
```

或类似的东西。我们如何检测回发的来源，或者是否有其他方法来处理验证？

非常感谢

# sql - asc和desc在sql性能上有什么区别

> ID：14964057
> 
> 赞同：0
> 
> 时间：2013-02-19T17:47:29.900
> 
> 标签：sql, sql-server-2008

我有两个非常相似的查询：

```
exec sp_executesql N'SELECT TOP (1) [t0].[Production]
FROM [dbo].[T_Production] AS [t0]
WHERE [t0].[InputID] = @p0
ORDER BY [t0].[Timestamp] DESC',N'@p0 int',@p0=1161

exec sp_executesql N'SELECT TOP (1) [t0].[Production]
FROM [dbo].[T_Production] AS [t0]
WHERE [t0].[InputID] = @p0
ORDER BY [t0].[Timestamp]',N'@p0 int',@p0=1161 
```

第一个在 1 秒内执行，另一个在 31 秒内执行，为什么？

有趣的是，如果我将第二个查询从存储过程更改为

```
SELECT TOP (1) [t0].[Production]
FROM [dbo].[T_Production] AS [t0]
WHERE [t0].[InputID] = 1161
ORDER BY [t0].[Timestamp] 
```

它也在 1 秒内执行

但令人惊奇的是，如果在 [Timestamp] 之后添加空格，使最后一行看起来像这样`ORDER BY [t0].[Timestamp] ',N'@p0 int',@p0=1161`，它的执行速度也非常快。

编辑：经过一番调查，我检查了实际的执行计划，cos 是：select cost:0 -> top cost 6 -> index scan (NonClustered)[T_Production].[_dta_index_T_Production] cost 94

所以我在 [Timestamp] 上添加了降序的新索引。花了几分钟，现在查询的执行速度与第一个查询一样快。

但是在这里我真的很困惑，我现在注意到附加索引的顺序应该是升序的，因为我已经有了降序，但是创建另一个索引有帮助吗？它让我很困惑，所以我删除了我刚刚创建的这个索引，现在这个查询仍然像第一个查询一样快地执行。也许重建索引有帮助？这个问题将再次出现。

但是现在添加和删除索引后，实际执行计划不同：select :cost 0 -> top cost: 0 -> nested loops (inner join) cost 0 -> Index seek (NonClustered)... cost 33% and密钥查找（集群）.. 成本：67%

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:51:12.510

索引在键中的列上也有 ASC 和 DESC，这可能会影响执行计划。

对于这样一个简单的查询，这似乎是一个很大的不同，但看看索引定义和执行计划，可能必须有一个代价高昂的额外排序操作。

删除索引几乎肯定会使缓存中的执行计划无效。

为避免参数嗅探，您可以使用`OPTION (RECOMPILE)`内联参数化查询或将代码移动到存储过程中，然后`OPTIMIZE FOR UNKNOWN`

# html - 是否可以在文本的任一侧放置一个按钮？

> ID：14964063
> 
> 赞同：-3
> 
> 时间：2013-02-19T17:47:44.463
> 
> 标签：html, css, button

我想在页面的一侧有一个按钮，文本，然后在文本的右侧有另一个按钮。我知道我可以创建单独的 div，但这会变得混乱。有没有更简单、更清洁的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:24:18.117

这太简单了，一定是个陷阱

[http://jsfiddle.net/ESDjH/](http://jsfiddle.net/ESDjH/)第一次尝试。

[http://jsfiddle.net/XwTZR/](http://jsfiddle.net/XwTZR/)第二版。

html:

```
<p>
    <button class="pull-left">Button 1</button>put text here<button class="pull-right">Button 2</button>
</p> 
```

CSS：

```
p {text-align:center;
    width:333px; /* some width based on button + text + button width */
    margin:auto; /* will center your P */
}
.pull-left{float:left}
.pull-right{float:right} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:02:11.930

是

```
<p><button>Button 1</button>asd<button>Button 2</button></p> 
```

你想要什么？这对你来说是不是太乱了？您始终可以使用可编译为 HTML 的语言，例如[Haml](http://haml.info/)或[Jade](http://jade-lang.com/)

# php - cakephp 格式钱到语言环境

> ID：14964069
> 
> 赞同：0
> 
> 时间：2013-02-19T17:48:09.447
> 
> 标签：php, cakephp-2.0

我有一个输入，它将工资值设置到数据库中。我的问题是，如果我输入 20,000，它会在数据库中设置为 20.00

我在爱尔兰，所以逗号表示千位，而不是小数

我已尝试更改 appController 中的语言环境设置，但它仍在发生。

```
public function beforeFilter() {  
    setlocale(LC_MONETARY, "en_GB.UTF-8"); 
} 
```

数据库字段设置为十进制 9,2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:14:14.207

CakePhp 在保存时不会自动处理这种转换。最好在模型的 beforeValidate() 回调中执行一些检查和/或转换。

一些提示可以在这里找到

[在 CakePHP 中验证和转换十进制值](https://stackoverflow.com/questions/5270284/validating-and-transforming-decimal-values-in-cakephp)

# java - 用推土机映射 Object[]

> ID：14964071
> 
> 赞同：0
> 
> 时间：2013-02-19T17:48:13.503
> 
> 标签：java, dozer

[在推土机](http://dozer.sourceforge.net)的帮助下，我想将一个映射`Object[]`到一个 DTO 类

```
<mapping>
    <class-a>com.example.myDtoClass</class-a>
    <class-b>java.lang.Object[]</class-b>
    <field>
        <a>prop</a>
            <!-- <b key="1">this</b> -->
        <b>this[1]</b>
        <b-hint>java.lang.String</b-hint>
    </field>
</mapping> 
```

但是这两个设置`<b>this[1]</b>`都`<b key="1">this</b>`不起作用，并且该`prop`字段设置为整个`Object[]`字段，因此返回的 JSON 中的结果看起来像

```
"prop": "[Ljava.lang.Object;@40147864" 
```

我错过了什么？我期望变量`Object[]`中有 1 个元素`prop`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:40:48.987

我犯了一个严重的错误。是的，我得到了一个`Object[]`映射，但它的 1 元素`Object[]`又是 type `Object[]`。我很困惑，认为这是主要因素。我确实期望一个字符串，但得到了一个必须连接回字符串的二进制代码数组。

# perl - perl文件打开api的默认字符编码？

> ID：14964072
> 
> 赞同：2
> 
> 时间：2013-02-19T17:48:15.770
> 
> 标签：perl, character-encoding

我正在使用 Perl [open](http://perldoc.perl.org/functions/open.html)在 Solaris 10 上打开新文件，如下所示：

```
open($fh, ">$filePath"); 
```

使用此调用，我的系统上的默认文件字符编码是什么？

locale 命令的输出如下所示

```
LANG=
LC_CTYPE="C"
LC_NUMERIC="C"
LC_TIME="C"
LC_COLLATE="C"
LC_MONETARY="C"
LC_MESSAGES="C"
LC_ALL= 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:04:31.743

这个问题不像我想象的那么容易回答。

默认编码为`raw`，适用于二进制数据。序数值低于 256 的任何字符都按原样传递：

```
$ perl -e 'print chr(0xFF)' | od -c
00000000 377
00000001 
```

奇怪的是当你尝试写一个高于序数值 255 的字符时会发生什么。然后看起来你得到了 UTF-8 编码。

```
$ perl -e 'print chr(0x100)' | od -c
00000000 304 200
00000002 
```

我不知道在哪里或是否记录了这种行为。

# openlayers - OpenLayers ExportMap 控件不起作用

> ID：14964076
> 
> 赞同：2
> 
> 时间：2013-02-19T17:48:23.143
> 
> 标签：openlayers

尝试实现[此示例](http://dev.openlayers.org/sandbox/camptocamp/canvas/openlayers/examples/exportMapCanvas.html)以将图像渲染到画布。继续收到此行的“未捕获的 ReferenceError：exportMap 未定义”：

```
exportMapControl = new OpenLayers.Control.ExportMap(); 
```

在 v2.11 和 2.12 中测试。不存在 ExportMap() 控件。这个功能被淘汰了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T21:47:47.707

看起来 ExportMap 控件是作为测试 HTML5 如何与 Openlayers 一起工作的一部分而创建的，并且截至 2.12 还没有经过测试和部署的功能。[来源](http://trac.osgeo.org/openlayers/wiki/Future/OpenLayersAndHTML5)。

# jquery - 表单中的实时验证是提交和取消按钮

> ID：14964079
> 
> 赞同：0
> 
> 时间：2013-02-19T17:48:34.120
> 
> 标签：jquery, livevalidation

我有两个按钮：

```
<input id="apply" type="submit" class="smgreen" name="apply" value="Apply">
<input id="cancel" type="submit" class="smred" name="cancel" value="Cancel"> 
```

我需要实时验证表单并单击应用按钮，但是当我单击取消按钮时不需要。我该怎么做？

我的 JS：

```
f = {};
$('.required').each(function() {
  var id = $(this).prop('id');
  f[id] = new LiveValidation(id, { validMessage: "ok", wait: 500 } );
  f[id].add( Validate.Presence, { failureMessage: "error" } );
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:57:07.230

您可以在提交按钮中添加处理程序事件，如下所示：

```
$('#apply').click(function(){
 f = {};
 $('.required').each(function() {
   var id = $(this).prop('id');
   f[id] = new LiveValidation(id, { validMessage: "ok", wait: 500 } );
   f[id].add( Validate.Presence, { failureMessage: "error" } );
 });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:02:06.147

我建议不要将“取消”设置为“提交”按钮。想想看……如果你想取消，你并没有真正提交任何东西。

此外，如果您坚持有多个提交按钮，请给它们一个更通用的名称：

```
<input id="apply"  type="submit" name="action" value="Apply" />
<input id="cancel" type="submit" name="action" value="Cancel" /> 
```

就您的 JavaScript 而言，不要在单击按钮时验证，而是在表单提交时验证：

```
$('#myForm').on('submit', function(e) {
    e.preventDefault();

    // do validation stuff
    if( valid ) {
        $(this).submit();
    } else {
        // do something about your errors
    }
}); 
```

# python - 更新或添加字典的键

> ID：14964082
> 
> 赞同：0
> 
> 时间：2013-02-19T17:48:40.287
> 
> 标签：python, dictionary, bigdata

我有很多听写，我给这个例子 2：

```
dict1={'green': 3, 'yellow': 5, 'blue': 1}
dict2={'green': 5, 'yellow': 1, 'blue': 3, 'purple': 10} 
```

我一直在尝试找到一种添加 2 个字典的方法，以便我可以更新现有键的值（总和），并为不存在的键添加键和值。

结果：

```
results = {'green': 8, 'yellow': 6, 'blue': 4, 'purple': 10} 
```

我试过了`dict1.update(dict2)`了，但如你所知，我只有一本包含更新值的字典，没有总结。

有什么方法可以实现这一目标？

**更新：**

已解决：实际上 collections.Counter 成功了...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:52:55.587

```
{x: dict1.get(x,0) + dict2.get(x,0) for x in set(dict1.keys() + dict2.keys())} 
```

输出：

```
{'blue': 4, 'purple': 10, 'green': 8, 'yellow': 6} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:56:49.123

呵呵，出乎意料的难……

```
dicts = [dict1, dict2]
dict([(key, sum(map(lambda x: x.get(key) or 0, dicts))) for key in set(reduce(lambda a,b: a + b, map(lambda x: x.keys(), dicts), []))]) 
```

[{'蓝色'：1，'绿色'：3，'黄色'：5}，{'蓝色'：3，'紫色'：10，'绿色'：5，'黄色'：1}]

或者更具可读性

```
dicts = [dict1, dict2]
keys = reduce(lambda a,b: a + b, map(lambda x: x.keys(), dicts), [])
dict([(key, sum(map(lambda x: x.get(key) or 0, dicts))) for key in set(keys)]) 
```

# html - HTML 定位：在不中断流程的情况下相对于第三个对象定位两个对象

> ID：14964089
> 
> 赞同：0
> 
> 时间：2013-02-19T17:48:52.473
> 
> 标签：html, css, position

好的，所以这将很难解释，所以如果我不清楚，请提出问题

在我的 html 页面中，我有一个主“容器”div，其中包含多个 div，但容器内的每个 div 都放置在两列之一中（因此，如果容器中有一个 div，它要么在左栏或右栏）

```
<div id="container">
  <div id="column1">
    <div id="item1-1"></div>
    <div id="item1-2"></div>
    <div id="item1-3"></div>
  </div column1>
  <div id="column2">
    <div id="item2-1"></div>
    <div id="item2-2"></div>
    <div id="item2-3"></div>
  </div column2>
</div container> 
```

[注意：我知道语法不正确，我只是让它更容易阅读]

所以，换句话说，我想要两列大小可以变化的 div（因此页面大小可以变化），并且 item1-2 出现在 item1-1 下方，等等。这里的问题是我想要 div 在容器出现在其中，所以我不能使用绝对或相对定位。有些东西告诉我我应该使用一张桌子，但我不知道该怎么做。

所以，我的问题是：只使用 html 和 css，有什么可以做上面的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:07:48.670

第一：make `</div column1>`and `</div column2>`just say`</div>`

第二：CSS：

```
#container {
    width: 100%;
}

#column1, #column2 {
    float: left;
    width: 50%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:40:19.287

要获得您想要的外观，您应该使用[CSS`float`属性](http://www.w3schools.com/cssref/pr_class_float.asp)。但是，为避免父容器无法正确显示的问题，请考虑采用以下两种可能的[解决方案](http://jsfiddle.net/5J8f5/1/)之一：

在浮动元素后添加一个div

```
clear: both 
```

或将下面的代码应用于您的父 div

```
overflow: hidden 
```

# php - Yii 模型中存在函数的用例是什么？

> ID：14964090
> 
> 赞同：1
> 
> 时间：2013-02-19T17:48:57.767
> 
> 标签：php, mysql, pdo, yii

Yii 有一个内置的“存在”功能，我不明白我需要使用这个功能的场景。

以下查询将导致 NULL 或活动记录。

```
Posts::model()->findByPK('100') 
```

此查询将产生一个布尔值：

```
Posts::model()->exist(sql) 
```

如果结果为真，我是否需要发出另一个查询？这不是查询的“浪费”吗？（我主要关心性能）

谢谢，丹尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:16:13.863

函数本身的原因是**性能**..`findByPk`意味着如果找到则将模型加载到变量中，`exixts`意味着检查是否找到..想象这样一种情况，您只需要找出在给定条件下是否存在记录，那么为什么要加载整个模型实例在一个变量中，然后检查它是否为空，而不是直接有一个布尔值..

如果您需要模型实例（如果它存在），那么如果 ofc 没有用，那么正如您所说，直接使用`findByPk`..

# c++ - 我正在尝试在 C++ 中的字符串中查找所有“#”字符并将它们替换为“hash”，但正则表达式无法识别字符“#”

> ID：14964092
> 
> 赞同：0
> 
> 时间：2013-02-19T17:49:01.110
> 
> 标签：c++, regex

我试图在 C++ 中的字符串中查找所有“#”字符并将它们替换为“hash”，但正则表达式无法识别字符`"#"`or`"\#"`或`"\\#"`。知道我必须放什么才能找到#吗？

```
std::string local = std::regex_replace(test, "#", "hash"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:03:48.250

正如 Robert Harvey 建议的那样，使用 std::sting::replace 效果很好。它期望一个索引而不是一个字符来替换。因此，您必须将它与类似 `std::string::find 之类的东西结合使用，如下所示：

```
int index;
while( (index = str.find("#') != std::string::npos) {
    str.replace(index, 1, "hash");
} 
```

您可以使用相同的想法来匹配更复杂的字符串，因此如果您不需要模式替换，这将起作用。

在此处运行示例：http: [//ideone.com/WqDZAl](http://ideone.com/WqDZAl)

# qt-creator - 您可以配置 Qt Creator 在构建或运行之前终止正在运行的应用程序吗？

> ID：14964093
> 
> 赞同：14
> 
> 时间：2013-02-19T17:49:06.197
> 
> 标签：qt-creator

我正在开发一个 QApplication，我发现我经常忘记在重建和重新运行它之前关闭我的应用程序。当我不小心查看了 10 分钟前构建的应用程序实例并期望看到 30 秒前的代码更改时，这会成为一个问题。

这也很烦人，因为我必须将手一直移到鼠标上，将鼠标一直移到正在运行的应用程序，并且每次我想重建时都关闭它，我很*懒惰*，我不想要做到这一点。

是否可以将 Qt Creator 配置为在我开始构建或再次运行 QApplication 时关闭它？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-06-02T10:51:55.717

在 Qt Creator 中有一个选项可以做到这一点：

1.  打开首选项 => 构建和运行 => 常规
2.  将“在构建之前停止应用程序”从“无”更改为“相同项目”</li>

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-07T14:03:28.883

对于以后可能会在这里绊倒的人来说，一个更简单的方法是在 Projects(ctrl+5) -> Build and Run 下放置一个“killall”命令（如 tangbongbong 所建议的）是第一个构建步骤

在下面的屏幕截图中，我的可执行文件名称是“Tutano”，我添加了 -9 选项以确保它会被杀死。

[截图](http://postimg.org/image/oc2pyhx3b/) - 对不起，我是新来的，所以不能直接发布图片

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-17T10:18:11.383

尝试在构建步骤顶部添加以下自定义流程步骤

![在此处输入图像描述](../Images/04cd353c7a8d626cd6f6a3d00116ac8f.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-24T14:14:31.623

我在 Windows 上，所以`killall`不起作用。但我想通了（以 Julien 作为屏幕截图发布的相同形式输入值）：

命令：`taskkill`

论据：`/FI "STATUS eq Running" /IM APPNAME.exe /F`

当然，您需要替换`APPNAME`为您的应用程序的名称。这`/FI "STATUS eq Running"`是一个过滤器，它使 qmake 在此预构建步骤之后继续进行，即使应用程序尚未运行（否则它不会找到要杀死然后退出的进程）。没有`/F`应用程序就不会关闭，至少对我来说是这样。

但是，如果您的应用程序在托盘区域中有一个图标，则该图标不会消失。当您将鼠标移到图标上时，该图标将被删除。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T05:10:47.893

是的。

一种方法是创建一个非常简单的脚本，该脚本会终止您现有的正在运行的进程并启动一个新进程。如果您的程序可执行文件`FooBarProgram`然后转到 Qt 创建的构建目录并创建此文件`FooBarProgramLauncher`

```
#!/bin/bash

killall FooBarProgram
./FooBarProgram 
```

现在更改 Qt 项目配置以运行您的启动器，而不是直接运行您的程序：

1.  在 Qt Creator 中打开项目
2.  从左侧窗格中选择“项目”
3.  如果尚未选择，请选择“构建和运行”选项卡
4.  选择“运行”子选项卡
5.  在“运行”标题下，单击“添加”按钮，选择“自定义可执行文件”
6.  在“命令行”上，单击“浏览”按钮并选择`FooBarProgramLauncher`

现在，每当您告诉 Qt 运行您的程序时，它都会运行`FooBarProgramLauncher`，这反过来会杀死任何正在运行的实例，`FooBarProgram`然后运行新编译的可执行文件。

# mysql - 明显不能正常工作

> ID：14964096
> 
> 赞同：0
> 
> 时间：2013-02-19T17:49:21.070
> 
> 标签：mysql, sql, distinct, having

我已经写了一个查询，`DISTINCT`但我仍然返回重复的记录。

```
SELECT DISTINCT
  `cuisine_types`.`id`, 
  `cuisine_types`.`name`, 
  `cuisine_types`.`image`, 
  (
    SELECT group_concat(`tagname` separator ', ') 
    FROM `cuisine_tags` 
    WHERE `cuisine_type` = `cuisine_types`.`id` 
  ) AS tags, 
  (
    3959 * acos( cos( radians(" . $dLat . ") ) * cos( radians( gps_lat ) ) * cos( radians( gps_lon ) - radians(" . $dLon . ") ) + sin( radians(" . $dLat . ") ) * sin( radians( gps_lat ) ) )
  ) AS distance 
FROM `company` 
LEFT JOIN `cuisine_types` 
ON 
    `company`.`cuisine_type_id` = `cuisine_types`.`id` 
HAVING 
    distance < " .$dMiles 
```

当我尝试使用该`GROUP BY`功能时，我的查询无法正常工作。当我使用时`GROUP BY`，我将它放在我的上方`HAVING`：

```
GROUP BY `cuisine_types`.`name` 
```

例子：

当我将它与这些值一起使用时：

```
$dLat = '52.779716';
$dLon = '21.84803';
$iKm = '30'; 
```

它返回：

```
id = 1
name = Snackbar
image = 
tags = Patat, Snacks
distance = 17.4713944772963 
```

当我`$iKm`与 3000 一起使用时，它也会返回这一行：

```
id = 1
name = Snackbar
image =
tags = Patat, Snacks
distance = 722.407714147792 
```

所以我得到了两条记录。当我将它与 groupby 和`$iKm`= 30 一起使用时；它什么也不返回。值为 3000 它返回一行。但我有一个距离为 17 英里的记录，因此低于 30。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:23:47.793

这应该可以解决您的问题，问题是距离计算阻止了该`GROUP BY`功能。通过将方程放入`HAVING`自身，问题似乎得到了解决。抱歉，我无法更详细地解释它。

```
SELECT 
            `cuisine_types`.`name`,
            `cuisine_types`.`id`,
             `cuisine_types`.`image`
            `c`.`gps_lat` as lat,
            `c`.`gps_lon` as lon,
            (SELECT group_concat(`tagname` separator ', ') FROM `cuisine_tags`  WHERE `cuisine_type`=`cuisine_types`.`id`) as tags FROM `company` as c  LEFT JOIN `cuisine_types` ON c.`cuisine_type_id`
= `cuisine_types`.`id` GROUP BY `cuisine_types`.`name` HAVING  ( 3959 * acos( cos( radians(52.779716) ) * cos( radians( lat ) ) * cos( radians( lon ) - radians(21.84803) ) + sin( radians(52.779716) ) * sin( radians( lat ) ) ) ) < 2000; 
```

# jqgrid - 使用选择框动态更改列的可编辑属性

> ID：14964099
> 
> 赞同：1
> 
> 时间：2013-02-19T17:49:26.360
> 
> 标签：jqgrid

我正在使用表单编辑。我想根据下拉框中的选择禁用添加和编辑表单中的某些字段。最好使用什么事件来触发它？我曾尝试使用 dataEvents：

```
{    name:'type_cd', 
     edittype:'select', 
     editoptions:{
        dataUrl:'functions.php',
            dataEvents:[{
                type:'change',
                fn: function(e){
                    $(this).setColProp('cntrct_id',{
                         editoptions:{editable:false}
                    });
            } 
       }]                        
    } 
}, 
```

这对我的表单字段没有明显的影响，但我知道它正在被访问，因为如果我输入一个，我可以从中收到一条警报消息。

**编辑**

如果我提交表单，下次打开它时，设置为 editable:false 的列将不会出现。这是朝着正确方向迈出的一步，但我希望它*立即*不可编辑。真的，我希望它可见，但禁用（即禁用：true）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T18:38:19.100

首先`dataEvents`允许您在编辑元素的元素上注册回调。内部回调`this`将被初始化为将被绑定的 DOM 元素。所以`$(this)`在`change`处理程序内部，它将是`<select>`元素上的包装器，而不是网格上的包装器。的用法`$(this).setColProp`将不正确。

要禁用添加/编辑表单中的某些输入字段，您可以使用所有输入元素`id`与. 因此，如果您需要禁用输入，可以将属性设置为元素`name``colModel``cntrct_id``disabled``true``id="cntrct_id"`

```
{
     name: 'type_cd', 
     edittype: 'select', 
     editoptions: {
        dataUrl: 'functions.php',
        dataEvents: [{
            type: 'change',
            fn: function (e) {
                // disable input/select field for column 'cntrct_id'
                // in the edit form
                $("#cntrct_id").prop("disabled", true);
            } 
       }]                        
    } 
} 
```

重要的是要了解`editoptions`它将用于任何现有的编辑模式（表单编辑、内联编辑和单元格编辑）。如果要编写`dataEvents`支持所有编辑模式的代码，则必须检测编辑模式并使用一些其他编辑字段的 id。代码（未测试）大概如下

```
{
     name: 'type_cd', 
     edittype: 'select', 
     editoptions: {
        dataUrl: 'functions.php',
        dataEvents: [{
            type: 'change',
            fn: function (e) {
                var $this = $(e.target), $td, rowid;
                // disable input/select field for column 'cntrct_id'
                if ($this.hasClass("FormElement")) {
                    // form editing
                    $("#cntrct_id").prop("disabled", true);
                } else {
                    $td = $this.closest("td");
                    if ($td.hasClass("edit-cell") {
                        // cell editing
                        // we don't need to disable $("#cntrct_id")
                        // because ONLY ONE CELL are edited in cell editing mode
                    } else {
                        // inline editing
                        rowid = $td.closest("tr.jqgrow").attr("id");
                        if (rowid) {
                            $("#" + $.jgrid.jqID(rowid) + "_cntrct_id")
                                .prop("disabled", true);
                        }
                    }
                }
            } 
       }]                        
    } 
} 
```

最后一句话。如果您仍然使用不支持[prop](http://api.jquery.com/prop/)方法的旧版本 jQuery（jQuery 1.6 之前），则必须改用[attr](http://api.jquery.com/attr/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-13T18:05:53.140

@Oleg：这是有效的（可以收到警报消息），但它没有禁用该字段。表单字段是否需要任何特殊值？

# python - Nuke Python - 如何单独设置 XY_Knob 的值？

> ID：14964101
> 
> 赞同：1
> 
> 时间：2013-02-19T17:49:28.780
> 
> 标签：python, coordinate, nuke

**背景**

我正在用 Python 构建一个非常酷的工具。不知何故，到目前为止，我已经能够自己弄清楚所有困难的部分，但这部分有我！

**问题** 我试图单独设置一个`(x, y)`值`XY_Knob`。这是我的问题：

如果我输入：

```
nuke.selectedNode()['pos1'].setValue(1205) 
```

它会将 X 和 Y 都设置为 1205。如果我输入：

```
nuke.selectedNode()['pos1'].setValue(1205, 1740) 
```

它不会给我一个错误，而只是`Result:`在脚本编辑器中打印，而节点上没有任何更改。

任何人都可以添加一些见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:38:28.680

您也可以以列表形式输入信息：

```
nuke.selectedNode()['pos1'].setValue([1205, 1740]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:08:04.630

想通了 - 如果有人想知道...... args 列表是 setValue(value, index, time, view) 所以将 x 设置为 1250 并将 y 设置为 650 它会：

```
nuke.selectedNode()['pos1'].setValue(1250, 0)
nuke.selectedNode()['pos1'].setValue(650, 1) 
```

# sql-server - 不同数据库中的位图索引支持

> ID：14964104
> 
> 赞同：2
> 
> 时间：2013-02-19T17:49:32.033
> 
> 标签：sql-server, database, oracle, db2, sybase

有人能说出当前哪些数据库实现支持位图索引吗？我确定的唯一答案是 Oracle，可能还有 DB2。请提供支持参考。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T19:33:34.883

[您可以在此 Wikipedia 文章比较数据库的索引部分中](https://en.wikipedia.org/wiki/Comparison_of_relational_database_management_systems#Indexes)找到一个列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T18:52:37.870

这是一个大问题，在某种程度上，答案取决于您所说的“支持”位图索引是什么意思。

虽然我对此知之甚少，但我相信 Oracle 允许您显式创建位图索引以供以后使用。

例如，其他一些数据库（包括 PostgreSQL 和 DB2）可以在查询处理期间使用位图。这些有时称为“动态”位图索引。这些是否符合“真实”位图索引的条件取决于您询问的对象。

您可以通过谷歌搜索“[数据库名称]位图索引”找到更多阅读内容。这里有一些我觉得有用的文章...

*   [http://wiki.postgresql.org/wiki/Bitmap_Indexes](http://wiki.postgresql.org/wiki/Bitmap_Indexes)
*   [https://devcenter.heroku.com/articles/postgresql-indexes](https://devcenter.heroku.com/articles/postgresql-indexes)
*   [http://www.oracle.com/technetwork/articles/sharma-indexes-093638.html](http://www.oracle.com/technetwork/articles/sharma-indexes-093638.html)
*   [http://www.zinox.com/node/16](http://www.zinox.com/node/16)
*   [http://en.wikibooks.org/wiki/Oracle_and_DB2,_Comparison_and_Compatibility/Storage_Model/Indexes/DB2](http://en.wikibooks.org/wiki/Oracle_and_DB2,_Comparison_and_Compatibility/Storage_Model/Indexes/DB2)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-19T18:26:25.390

Sybase IQ 支持位图索引。Sybase ASE 没有。

# asp.net-mvc-3 - Linq，为什么将参数设置为null会返回数据库中的所有行？

> ID：14964106
> 
> 赞同：0
> 
> 时间：2013-02-19T17:49:38.337
> 
> 标签：asp.net-mvc-3, linq, entity-framework

我目前正在学习asp.net mvc 3，并且正在观看复数视线的课程视频，并且对某个代码感到好奇：

这里是：

```
 public ActionResult Index(string state)
        {
            //var restaurants = context.Restaurants.ToList();
            var restaurants = from r in context.Restaurants
                              where r.Address.State == state || (state == null)
                              select r;
            return View(restaurants);
        } 
```

显然 state 参数是用来过滤查询的，所以如果 state = CA，那么只会检索 state 值为 CA 的行，我没有得到的部分是为什么要添加 || state == null 允许查询获取所有行。

这是另一个与上面的代码非常相似的代码：

```
var students = from s in studentRepository.GetStudents()
                           select s;
            if (!String.IsNullOrEmpty(searchString))
            {
                students = students.Where(s => s.LastName.ToUpper().Contains(searchString.ToUpper())
                                       || s.FirstMidName.ToUpper().Contains(searchString.ToUpper()));
            } 
```

在这个中，它检查参数是否为空或 null，然后通过添加 where 子句来设置不同的查询。

那么当我添加那个 state == null 时实际发生了什么

先生/女士，您的回答会很有帮助。谢谢++

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:53:33.493

这是简单的布尔逻辑：

```
r.Address.State == state || (state == null)

true || false -> true //(CA=CA)   ||(CA=null)
false|| true  -> true //(FL!=null)||(null=null)..null=null no matter the state from the database
false|| false -> false //(FL!=CA) ||(CA!=null) 
```

由于在第二种情况下，它不检查数据库内的任何内容，因此它将始终返回 true，`where`因为它更多的是对传入参数的静态检查......这就是为什么你从查询中获取所有内容的原因。

我假设这样做的目的是使参数仅在提供时才像过滤器一样起作用。如果未提供，则不应用过滤器，因为`(null==null)`

在第二个示例中，它本质上是在做与上面相同的事情。它甚至没有将静态检查构建到 LINQ 中。

它可以很容易地写成：

```
from s in studentRepository.GetStudents()
where String.IsNullOrEmpty(searchString) || 
    s.LastName.ToUpper().Contains(searchString.ToUpper()) ||                                       
    s.FirstMidName.ToUpper().Contains(searchString.ToUpper())
select s; 
```

同样，由于布尔 OR 逻辑，对参数的检查将覆盖任何数据检查

这是以与第二个类似的方式编写的第一个查询

```
var restaurants = from r in context.Restaurants
    select r;
if(state != null)
    restaurants = restaurants.Where(x=>x.Address.State == state); 
```

[这是一个关于布尔逻辑的链接，](http://www.ithacalibrary.com/sp/subjects/boolean)如果你用谷歌搜索的话，实际上有很多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:57:45.597

在第一个示例中： || 是一个 OR 运算符，如果状态为空，查询将是状态是什么或。这并不一定意味着它将返回所有记录。所以返回将是状态和那些为空的。

第二个例子只是检查是否有搜索条件可供参考。
基本上：如果我有搜索条件，则获取姓氏包含搜索条件或名字具有搜索条件的记录。

说得通？您只是试图根据某种条件撤回记录......也许他们想要拥有与某个状态匹配或为空的记录......然后对它们执行一些操作。

# javascript - 替代 PhantomJS 进行测试

> ID：14964108
> 
> 赞同：26
> 
> 时间：2013-02-19T17:49:54.977
> 
> 标签：javascript, testing, phantomjs

我目前正在尝试为 CI (Hudson) 构建一个小测试套件。我编写了一个复杂的脚本，它动态调用其他脚本并填充给定的 DIV 元素。

我的 Selenium 测试适用于琐碎的示例（加载 www.google.com，搜索 q-Element 等）

但是当我尝试在我的 PhantomJS 实例中运行一个与 Firefox-Driver 一起工作的复杂测试时，它崩溃了。发生段错误。

我的问题是，如何为我的前端 JS 编写测试，该 JS 在运行（无头）的 Hudson-Server 上运行。

或者有没有办法调试导致段错误的原因？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-07-15T14:19:15.557

Slimer.js 类似于 Phantom.js，但使用 Gecko 而不是 Webkit。

[http://slimerjs.org/](http://slimerjs.org/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-26T13:18:12.987

使用 Xvfb 作为虚拟帧缓冲区（在托管网格节点的 Linux 机器上）时，可以进行无头安装。最终使用了这个和默认的 Firefox。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-26T13:36:36.323

Phantom 是一个不断发展的产品，直到最近才获得与 Selenium 集成的能力，因此您可能遇到了一个错误；您是否尝试将其报告给 Phantom 开发人员？

*   幻影的替代品：

    没有很多。[Zombie](http://zombie.labnotes.org/)是我所知道的，但 Phantom 比任何其他无头浏览器都遥遥领先。

    您还可以尝试使用无头虚拟服务器来运行任何普通的 Web 浏览器。（这也将具有比 Phantom 更真实的测试的优势）

*   硒的替代品：

    您可以使用[Sahi](http://sahi.co.in/)作为 Selenium 的直接替代品。它可以做很多相同的事情，但工作方式却大不相同。当然，您的测试脚本需要重写。

    Phantom 是为脚本设计的，因此您实际上根本不需要使用像 Selenium 这样的驱动程序工具；你可以直接编写脚本，或者使用像[CasperJS](http://casperjs.org/)这样的工具来编写你的测试脚本。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-12-03T23:43:35.553

**jsdom**现在是一个不错的选择，它已经相当成熟了。

[https://github.com/tmpvar/jsdom/](https://github.com/tmpvar/jsdom/)

它用于无头测试。我不认为它会像 phantomjs 那样做屏幕截图，因为它没有 webkit 或 gekko 渲染器，它的纯 JS。

我发现这是因为 phantomjs segfaults 并且新版本不会构建。slimerjs 并不是真正的无头，它基于 FireFox 刚刚放弃的 XULRunner，它不适用于我当前的 FF。

jsdom 非常酷，它最初是一个 XML 解析器，现在拥有完整的网络后端和 jQuery 支持。

API 与 phantomjs 不同。

# java - 在 web.xml 中定义正确的资源路径？

> ID：14964109
> 
> 赞同：0
> 
> 时间：2013-02-19T17:49:58.000
> 
> 标签：java, rest, tomcat, jersey

我正在学习本教程：[http ://www.vogella.com/articles/REST/article.html#installation](http://www.vogella.com/articles/REST/article.html#installation)

而且我不明白它说“此属性必须指向您的资源类”的那一行。这是从这一步：

```
5.3\. Define Jersey Servlet dispatcher
You need to register Jersey as the servlet dispatcher for REST requests. Open the file web.xml and modify the file to the following.

<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>de.vogella.jersey.first</display-name>
  <servlet>
    <servlet-name>Jersey REST Service</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>de.vogella.jersey.first</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Jersey REST Service</servlet-name>
    <url-pattern>/rest/*</url-pattern>
  </servlet-mapping>
</web-app> 
The parameter "com.sun.jersey.config.property.package" defines in which package jersey will look for the web service classes. This property must point to your resources classes. The URL pattern defines part of the base URL your application will be placed. 
```

我已将球衣罐放入我的 WEB-INF/lib 文件夹中。那么我可以使用教程中提供的路径还是应该使用其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:02:12.900

他在描述`com.sun.jersey.config.property.package`房产。这应该是包含项目中 REST 资源的包。这与将 Jersey 库添加到您的 lib 文件夹无关。他在本教程的第 7.3 节中谈到了这一点。只要您将 REST 类放在同一个包中，就可以保持原样。

# qt - ui 是受保护的，但是如何在重新实现的 Qthread run() 函数中使用它

> ID：14964114
> 
> 赞同：0
> 
> 时间：2013-02-19T17:50:12.347
> 
> 标签：qt, user-interface, qthread

我想重新实现创建自己的 QThread 类的运行函数。

我创造了这个，

```
class MyThread : public QThread
{
public:
    void run();
};

void MyThread::run()
{
    gui w;
    w.listen_device(w.ui->comboBox->currentIndex());
    exec();
} 
```

我不能在主线程之外使用 QPaint，所以我将该值作为参数提供给我的 listen_device 函数。

我知道来自 gui 的 ui 是受保护的，那么我怎样才能得到这个值呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:52:26.737

`gui`在类中创建将返回的公共方法`ui->comboBox->currentIndex();`

```
public:
  int gui::getCurrentIndex() // or whatever
  { 
    return ui->comboBox->currentIndex();
  } 
```

并且不要子类化`QThread`，而是使用`moveToThread()`on `QObject`。

# php - 对于数组的数组，有什么类似内爆的吗？

> ID：14964121
> 
> 赞同：1
> 
> 时间：2013-02-19T17:50:41.627
> 
> 标签：php, arrays, multidimensional-array, implode

我了解内爆是这样工作的：

```
$array = array('value', 'value2');
echo implode(',', $array) // Gives you: value, value2 
```

我有一个看起来像这样的数组：

```
$array = array(
    array('admin_options' => 'test'),
    array('test_options' => 'test'),
) 
```

我想做与 implode 完全相同的事情，**但**输出应该如下所示：

```
array,array 
```

这样做的原因是因为我可以将这两个以逗号分隔的数组传递到参数为数组的函数或类中。

举个例子：

如果我有以下课程：

```
class Test{
    public function __construct(array $options, array $second_options){}
} 
```

那么我应该看的基本上是：

```
public function __construct(array, array){} 
```

**笔记：**

如果我有一个看起来像这样的数组，这个相同的函数应该可以工作：

```
$array = array(
    array('admin_options' => 'test'),
    array('test_options' => 'test'),
    some_param,
    some_other_param
) 
```

我的输出应该是：

```
array, array, some_param, some_other_param 
```

我希望这有助于澄清我的问题。

我知道如果我尝试使用 implode，我会得到数组的非法字符串转换。这就是为什么我也需要一个类似的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:39:48.617

我认为这样的事情会起作用：

```
$count = 0;
foreach($multiDimArray AS $name=>$value) {
    $varName = 'array'.$count++;
    $$varName = array("name"=>$value);
} 
```

我还没有运行它来检查语法，但这应该会产生几个名为 $array0 等的数组变量，它们的值与多维数组中的每个条目相同。

# java - 如何访问 Java 程序使用的内存？

> ID：14964122
> 
> 赞同：-1
> 
> 时间：2013-02-19T17:50:47.893
> 
> 标签：java, memory, operating-system, jvm, java-native-interface

我想访问 Java 变量当前使用的内存位置。我计划使用 C 或其他语言访问这些位置，并计划更改位置值。

将访问 Java 程序的程序无法控制该程序；它将通过搜索内存来完成此任务。

我需要关于如何编写第二个程序的建议。

![在此处输入图像描述](../Images/7d5380dca9fae76e6dd12d733c4905c3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:01:33.357

帕西法尔说得对。. .

那就是说JNI是你的答案。使用 JNI，您可以在 java 中调用 C 可执行文件来处理您想要共享内存的所有逻辑。那时，只需在用 C 编写的线程之间进行典型的 IPC 即可。

这可能又快又脏（调试起来很痛苦），但是您可以将数据作为参数传递而没有太多麻烦，但要准备做一些多线程。

或者，您可以使用符合 JMS 的消息传递引擎，例如 ActiveMQ。您可以将数据序列化为可用的某种消息，然后 Java 可以将其广播给正在收听的任何人。（可能是 1000 个客户端，也可能是 0——Java 不必知道它）但是这需要一些额外的设置。我相信至少 AMQ 会在本地设置一个 Jetty 服务器来做这件事。

最后（如下面评论中所建议的那样），如果您的数据足够简单，您可以随时制作一个交换文件（即一个普通的旧文件来保存您的数据。）只需在数据可用时将其写出，这样任何如果当前没有被写入，其他具有权限的进程可以访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:54:58.370

您本质上是想编写一个[调试器](http://en.wikipedia.org/wiki/Debugger)。

Java 有一个内置的调试工具，称为[JPDA](http://docs.oracle.com/javase/6/docs/technotes/guides/jpda/index.html)。但是，通常需要使用允许调试器附加的选项来启动被调试的进程。如果你能做到这一点，那就太好了。

JMap程序可以附加到正在运行的进程[。](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/tools/jmap/JMap.java)我没有深入研究它，但似乎有一种方法可以通过 Sun Tools JAR 中的类将调试代理加载到该进程中。当然，这只适用于 Sun/Oracle JVM（或 OpenJDK）。

第三种选择是完全跳出 JVM，并使用像[gdb](http://www.gnu.org/software/gdb/)这样的工具。要走这条路，您需要了解[JVM 实现](http://openjdk.java.net/)。我不确定分布式可执行文件中还剩下多少调试信息，但是一旦您对构建足够熟悉，您就可以确定一个入口点。

当然，操作系统会强制执行访问规则，因此如果要被黑客入侵的进程以另一个用户身份运行，而您不是超级用户，那么您就不走运了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T18:02:46.740

编辑：

我错过了Java方面的事情必须不知道内存访问。对于这种情况，请参阅[https://stackoverflow.com/questions/5574241/interesting-uses-of-sun-misc-unsafe](https://stackoverflow.com/questions/5574241/interesting-uses-of-sun-misc-unsafe)了解如何获取 JVM 内存的原始地址。

# c# - 动态构建 DataTemplate 时未应用窗口样式

> ID：14964132
> 
> 赞同：0
> 
> 时间：2013-02-19T17:51:15.337
> 
> 标签：c#, wpf, styles

我有一个 ResourceDictionary，其中包含我的应用程序中使用的控件的样式定义。

所有样式都正确应用于窗口中的控件。

在一种特定情况下，我需要通过代码（在代码后面）动态构建 DataTemplate 和 Grid。当我的控件显示时，所有项目和数据都正确显示，但似乎没有应用样式。当我单击屏幕的边框来调整大小时，会在这个特定时刻应用样式。

为什么？显示控件时，我可以对应用样式做些什么？

**编辑** 这是我的 Xaml：

```
<Common:MyPopUpWindow 
  ...
  ...
  >
   <Common:MyPopUpWindow.DataContext>
      <Controls:DynamicPicklistControlViewModel/>
   </Common:MyPopUpWindow.DataContext>
   <Grid x:Name="LayoutRoot" Margin="2" Behaviours:ToolbakKeyBehaviour.IsEnabled="True">
      <Grid.RowDefinitions>
         <RowDefinition Height="*"/>
         <RowDefinition Height="auto" />
      </Grid.RowDefinitions>

      <Grid x:Name="grdPicklist">
         <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="*"/>
         </Grid.RowDefinitions>

         <Common:MyBlockListBox x:Name="lbxPicklist" 
                                Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="99" />
      </Grid>
      <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right">
         ...
         ...
      </StackPanel>
   </Grid>
</Common:MyPopUpWindow  > 
```

这是我背后的代码：

```
 private void OnShowPicklist(DynamicPicklistControlViewModel.ShowPicklistMessage obj)
  {
     if (!IsVisible)
     {
        CreateDataTemplate(obj.ColumnSpecs);
        CreateGridLayout(obj.ColumnSpecs);
        ShowDialog();
     }
  }

  private void CreateDataTemplate(IEnumerable<AdmPicklistColSpec> columnSpecs)
  {
     var xaml = new StringBuilder();

     xaml.AppendLine("<ResourceDictionary xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation' ");
     xaml.AppendLine("                    xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml' ");
     xaml.AppendLine("                    xmlns:Common='clr-namespace:Xxx.Xxxxxxxxxx.Xxx.Xxxx.Client.Common'>");
     xaml.AppendLine("");
     xaml.AppendLine("   <DataTemplate x:Key='dtplPicklist'>");
     xaml.AppendLine("      <Grid x:Name='grdPicklist'>");
     xaml.AppendLine("         <Grid.ColumnDefinitions>");

     for (var i = 0; i < columnSpecs.Count(); i++)
     {
        xaml.AppendLine("            <ColumnDefinition Width='*'/>");
     }

     xaml.AppendLine("         </Grid.ColumnDefinitions>");
     xaml.AppendLine("         <Grid.RowDefinitions>");
     xaml.AppendLine("            <RowDefinition Height='{StaticResource DefaultListBoxItemHeight}' />");
     xaml.AppendLine("         </Grid.RowDefinitions>");
     xaml.AppendLine("");

     var iCol = 0;
     foreach (var colSpec in columnSpecs)
     {
        xaml.AppendLine("         <Common:MyFormTextBox x:Name='txtCol" + colSpec.DisplaySeqNbr + "' ");
        xaml.AppendLine("                                    Grid.Column='" + iCol + "' ");
        xaml.AppendLine("                                    Text='{Binding Path=Col" + colSpec.DisplaySeqNbr + "}' />");

        iCol++;
     }

     xaml.AppendLine("      </Grid>");
     xaml.AppendLine("   </DataTemplate>");
     xaml.AppendLine("</ResourceDictionary>");

     var xamlParse = (ResourceDictionary)XamlReader.Parse(xaml.ToString());
     foreach (var key in xamlParse.Keys)
     {
        Resources.Add(key, xamlParse[key]);
     }
  }

  private void CreateGridLayout(IEnumerable<AdmPicklistColSpec> columnSpecs)
  {
     var grid = grdPicklist;

     if (_multiplePicklist)
        grid.ColumnDefinitions.Add(new ColumnDefinition { Width = new GridLength(1, GridUnitType.Auto) });

     // <ColumnDefinition>
     for (var i = 0; i < columnSpecs.Count(); i++)
     {
        var colDef = new ColumnDefinition { Width = new GridLength(1, GridUnitType.Star) };
        grid.ColumnDefinitions.Add(colDef);
     }
     // Adding extra column for scrollbar
     grid.ColumnDefinitions.Add(new ColumnDefinition { Width = (GridLength)Application.Current.Resources["DefaultListBoxScrollBarWidth"] });
     // </ColumnDefinition>

     // Defines Labels
     var iCol = 0;
     foreach (var label in columnSpecs.Select(colSpec => new MyStackLabel { Content = colSpec.LabelTxt }))
     {
        Grid.SetRow(label, 0);
        Grid.SetColumn(label, iCol);
        grid.Children.Add(label);
        iCol++;
     }

     // Block list box
     lbxPicklist.ItemTemplate = Resources["dtplPicklist"] as DataTemplate;
     lbxPicklist.SetBinding(MyBlockListBox.ItemsSourceProperty, new Binding("Items"));
     var colSpan = columnSpecs.Count() + 1;
     Grid.SetColumnSpan(lbxPicklist, colSpan);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:22:37.957

我通过将属性设置`SizeToContent`为`Manual`代替并在我的 Xaml 中`WidthAndHeight`指定 a `Width`and来解决问题。`Height`

# objective-c - Property requires method to be defined

> ID：14964133
> 
> 赞同：12
> 
> 时间：2013-02-19T17:51:20.910
> 
> 标签：objective-c, properties

I was converting a code from non-ARC to ARC, and removing some unnecessary @synthesize calls. One specific class started issuing warnings for some properties:

Class.h

```
@property (strong, nonatomic) NSString *xyz; 
```

but when building, I get the warning.

```
Property 'xyz' requires method 'xyz'to be defined - use @synthesize, @dynamic or provide a method implementation in this class implementation 
```

I thought that using Xcode 4.6 and and Default Apple LLVM compiler 4.2, the @properties should be auto-synthesized.

How do I tell the compiler to auto-synthesize the property? Do I have to use a specific project configuration to remove this warning?

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-19T18:03:14.810

Is this property on an `NSManagedObject` subclass? `NSManagedObject` disables auto-synthesis precisely because most declared properties are expected to be `@dynamic`.

This is accomplished with the `NS_REQUIRES_PROPERTY_DEFINITIONS` macro placed right before the `@interface NSManagedObject`, which expands to `__attribute__((objc_requires_property_definitions))`. This could be used on other classes too, but `NSManagedObject` is the only framework class I know of that does this.

# c - fileno 将 FILE 转换为描述符 C

> ID：14964134
> 
> 赞同：2
> 
> 时间：2013-02-19T17:51:29.287
> 
> 标签：c, file-descriptor

有没有办法将 int 类型的变量（文件描述符）转换为 C 中的 FILE 类型？我有一个开放的管道 fd，我想使用需要 FILE 的函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T17:53:15.797

你不能投它，但你可以打电话[`fdopen(3)`](http://www.manpagez.com/man/3/fdopen/)，这正是你想要的：

> ```
> FILE *
> fdopen(int fildes, const char *mode); 
> ```
> 
> 该**`fdopen()`**函数将流与现有文件描述符*fildes*相关联。流的模式必须与文件描述符的模式兼容。当流通过 关闭时**`fclose(3)`**，*fildes*也关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:53:29.093

在 POSIX 系统上，您可以使用[`fdopen`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/fdopen.html)来构造`FILE *`引用文件描述符的 a。

# ios - 在 popViewControllerAnimated 之后 UINavigationBar 下的 UITableView

> ID：14964136
> 
> 赞同：0
> 
> 时间：2013-02-19T17:51:33.373
> 
> 标签：ios, uitableview, ios6, uinavigationcontroller

在 UINavigationController 下使用 UITableViews 导航 3 个级别后，最终呈现一个 UIViewController，它调用：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

我看到了这个结果，它是覆盖在 UITableView 之上的 UINavigationBar。

![在此处输入图像描述](../Images/cf00860d338eb6fc39c6cce3cf45806b.png)

**如何修复仅在弹出视图后发生的叠加层？**

*部署目标 6.0*

我见过几个类似的听起来问题，但不完全是这种情况，也没有答案。

**顺便说一句：使用导航栏后退按钮不会导致此行为。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:53:37.623

当从 UINavigationController 弹出多个视图时，我发现该视图必须完全加载，否则 UI 会混淆并显示奇怪。所以在我的情况下，我添加了一个检查并在加载后弹出视图。

```
- (void) viewDidAppear:(BOOL)animated {   
    if (self->doPopView) {
        [self.navigationController popViewControllerAnimated:YES];
    } else {
       // ...
    }
} 
```

这种方法解决了 UINavigationController 与 UITableView 的显示问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:09:46.610

您的视图没有完全卸载，因此这种奇怪的行为，您是否使用相同`UITableViewController`的所有钻取。如果它是相同的，它是否适用于二级钻取？

# html - 只有在新标签页中打开链接才有效？

> ID：14964138
> 
> 赞同：0
> 
> 时间：2013-02-19T17:51:37.697
> 
> 标签：html, tabs, hyperlink

我在页面上有一个标签，如果左键单击，它会重定向到同一页面，但如果右键单击，则会重定向到正确的页面，新标签页。如果您将鼠标悬停在链接上或复制它，它会显示正确的 URL。这有什么已知的原因吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:05:33.637

看起来您忘记了`http://`网址之前的协议或其他协议。

例如，如果您的网页上有锚链接`http://mysite.com/article/`

```
<a href='myothersite.com'>Other Site</a> 
```

如果您单击链接而不在新选项卡中打开它，浏览器会认为它是当前网站上的子目录，并将您发送到 `http://mysite.com/article/myothersite.com`

您必须在网址前添加协议，例如：

```
<a href='http://myothersite.com'>Other Site</a> 
```

# string - base64 解码 - 字符串中的 nul

> ID：14964142
> 
> 赞同：2
> 
> 时间：2013-02-19T17:51:58.070
> 
> 标签：string, r, base64, digest, rcurl

我正在尝试创建将在某些站点上运行私有 API 调用的函数。所有这些站点都使用 API 调用的签名进行身份验证，如下所示：

```
base64_encode( hash_hmac('sha512', $post_data, base64_decode($secret), true) ) 
```

使用包摘要和 RCurl 我可以很容易地写成：

```
base64Encode( hmac(key = base64Decode(secret), object = post_data, algo = 'sha512', raw = TRUE) ) 
```

我整天都在与 hmac**关键**参数输入作斗争：

```
key = base64Decode(secret) 
```

问题是 hmac 函数只接受字符串值，但 base64Decode 可能返回的不仅仅是字符串：

```
str(base64Decode(secret))
chr "îă?ľÂÜĄ\vŽĺ\022""| __truncated__ 
```

这个**__truncated__**是这里的关键问题。所以我尝试的下一件事是从 decode 函数和 rawToChar 获取原始输出：

```
str(base64Decode(secret,mode='raw'))
raw [1:64] ee e3 3f be ...

rawToChar(base64Decode(secret,mode='raw')) 
```

> rawToChar(base64Decode(secret,mode='raw')) 中的错误：字符串中的嵌入 nul：'îă?ľÂÜĄ\vŽĺ\022\0!^\026Č‹¶©wŚˇ0Î\035ë\026\r\001ňKÍ„Rř\ 003j„7¤Ň\nťä_\004m@ß\0Ă"c\0271˝ZnĚ55'v'

正如我们现在所看到的，在我的（甚至还没有）字符串的某个地方有一个神秘的**nul东西。**我不太关心nuls，我只需要将这段数据作为hmac的输入传递。

1.  是否有可能用 nul 处理字符串，只是为了将其作为输入上层函数推得更远？
2.  有没有可能让 hmac 功能**键**参数接受这样的原始对象？

我也尝试了 base64enc 包，但没有成功。我尝试了许多不同的转换，但一切都回到了这个简单的“字符串中的 nul”。

这些站点相当新，并且此身份验证过程看起来像是其中的标准 API 身份验证。在 R 中应该有某种方法来处理该过程。

如果有人想测试，

```
secret <- '7uM/vsLcpQuOmOUSACFeFsiLtql3jKEwzh3rFg0B8kvNhFL4A2qEN6TSCp3kXwRtQN8AwyJjFzG9Wm7MNTWSdg==' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:20:35.167

问题 2\. 的答案是：

*hmac 函数已经接受原始对象而不是字符串。*

这是解决方案：

```
hmac(key = base64Decode(secret, mode='raw'),
 object = post_data,
 algo = 'sha512',
 raw = TRUE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:04:46.633

我真的不确定这`truncated`是问题所在。当你应用`str`到你的输出时，你要求它显示它的结构。这就是它的作用：

```
chr "îă?ľÂÜĄ\vŽĺ\022""| __truncated__ 
```

`chr`表示对象属于类`character`（字符串）。`str`然后显示字符串的开头，put 截断它的输出。因此由`truncated`显示`str`。如果要显示完整的字符串，只需输入其名称或使用`print`：

```
secret <- '7uM/vsLcpQuOmOUSACFeFsiLtql3jKEwzh3rFg0B8kvNhFL4A2qEN6TSCp3kXwRtQN8AwyJjFzG9Wm7MNTWSdg=='
str(base64Decode(secret))
# chr "\xee\xe3?\xbe\xc2ܥ\v\x8e\x98\xe5\022" 
```

所以我认为问题不在于`base64Decode`函数，而在于脚本的其他地方。

# linux - 即使文件未更改也要重新编译

> ID：14964146
> 
> 赞同：0
> 
> 时间：2013-02-19T17:52:12.057
> 
> 标签：linux, makefile

我之前在 /usr/src/ 中编译过 linux 内核代码。cmplt 制作花了 2 小时。今天我刚刚将源代码文件夹从 /usr/src/ 移到了我的主目录。

当我再次发出 make 命令时，它开始生成 .o 文件，即使我没有更改单个文件。请帮助我，因为我不想再花两个小时做。

我认为 make 的这种行为是因为它使用了文件的修改时间...我也尝试将源代码文件放回 /usr/src/ （之前的位置），但这也不起作用。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:58:59.987

也许您只是复制了源代码而不是已经编译的文件？也永远不要在你的主目录之外编译一些东西。至少如果你必须为此扎根的话。

# ruby-on-rails - Amazon EC2 中的 Heroku 样式 `heroku config:add VAR=val`

> ID：14964160
> 
> 赞同：0
> 
> 时间：2013-02-19T17:53:06.527
> 
> 标签：ruby-on-rails, heroku, amazon-web-services, amazon-ec2

有没有办法在 EC2 中为敏感信息设置配置/环境变量，就像在 Heroku 中设置`S3_KEY`或设置一样。`S3_SECRET`

如 Heroku 网站上所述：[https ://devcenter.heroku.com/articles/config-vars](https://devcenter.heroku.com/articles/config-vars)

```
$ heroku config:add GITHUB_USERNAME=joesmith
Adding config vars and restarting myapp... done, v12
GITHUB_USERNAME: joesmith

$ heroku config
GITHUB_USERNAME: joesmith
OTHER_VAR:       production

$ heroku config:get GITHUB_USERNAME
joesmith

$ heroku config:remove GITHUB_USERNAME
Unsetting GITHUB_USERNAME and restarting myapp... done, v13 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:34:15.383

如果您使用 Elastic Beanstalk 配置您的 EC2 实例，则可以执行此操作。这是营销：[http ://aws.amazon.com/about-aws/whats-new/2012/10/02/introducing-aws-elastic-beanstalk-configuration-files/](http://aws.amazon.com/about-aws/whats-new/2012/10/02/introducing-aws-elastic-beanstalk-configuration-files/)

我猜[OpWorks](https://aws.amazon.com/opsworks/)也会这样做，但我还没有测试过。

# ruby-on-rails - act_as_tenant Rails gem 会受到竞争条件的影响吗？

> ID：14964161
> 
> 赞同：0
> 
> 时间：2013-02-19T17:53:07.053
> 
> 标签：ruby-on-rails, ruby, race-condition

act_as_tenant gem 根据每个请求根据子域设置租户。如果用户在完美的时刻点击了不同租户的页面......是否可以将其他人的操作保存到不正确的租户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T19:43:55.693

AaT uses RequestStore ([https://github.com/steveklabnik/request_store?source=c](https://github.com/steveklabnik/request_store?source=c)) to store the current tenant at the middleware level.

As far as i'm aware this makes AaT immune to the type of race conditions you describe.

# mysql - Django - 通过 python 运行 mysql 恢复

> ID：14964162
> 
> 赞同：0
> 
> 时间：2013-02-19T17:53:12.690
> 
> 标签：mysql, django

我有一个正在处理的 Django 项目，其中包含很多表和数据。我们仍处于开发模式，因此我们正在进行大量测试。我希望现在能够让一些用户访问该项目，以便使用假数据进行操作。我花时间设置所有虚假数据，以便当他们打开网络应用程序时，它已经填充了处于各种状态的记录 - 因为他们可能会在系统投入生产时找到它。

我的目标是让他们玩转一切，然后有一个很大的“重置”按钮，他们可以点击它，这将使整个事情回到原点——可以这么说。基本上，它会将所有记录和数据恢复到我将其与数据一起交给他们时的状态。这样，他们可以四处乱转，测试一些东西，然后重新开始做更多的测试。

*编辑 - 我应该说它只是一个测试人员，所以重置不会影响其他任何人*

我在运行 mysql restore 命令的 Django 中快速查看，但它挂起。我的观点是这样的：

```
def reset_db(request):
  reset = "mysql -v -u garfonzo -pMyPassword dbName < db_reset.sql"
  os.system(reset)
  return HttpResponse("success?") 
```

它应该做的就是将数据库恢复到原始状态。但是，它挂起。使用该`-v`命令，我看到它所做的最后一件事是：

```
...a whole bunch of MySQL queries.... then
--------------
/*!40000 ALTER TABLE `auth_permission` ENABLE KEYS */
--------------

--------------
UNLOCK TABLES
--------------

--------------
DROP TABLE IF EXISTS `auth_user`
-------------- 
```

它只是坐在这里......什么都不做，然后我的网络应用程序没有响应。我必须终止进程并重新开始（手动重置）。

我想我的问题是双重的：

1.  这是为用户实现重置按钮的最佳方式吗？如果没有，有什么更好的方法？
2.  如果这是实现这一目标的最佳方法，为什么代码会挂起？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:50:47.913

我建议您为所有初始数据提供固定装置，并为用户提供运行 syncdb 的视图，这将使用您的初始数据再次重置所有内容。但是我自己还没有尝试过。

```
from django.core.management import call_command

def reset_db(request):
     call_command('syncdb', interactive=False) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-29T21:37:38.497

这是我用来恢复数据库的命令。确保您在 unix 终端上。mysql -u(username) -p(password) (数据库名)

# perl - 使用 Excel::Writer::XLSX 导出大型数据集时遇到问题

> ID：14964165
> 
> 赞同：1
> 
> 时间：2013-02-19T17:53:18.683
> 
> 标签：perl, excel, export

我似乎无法使用 Excel::Writer::XLSX 将超过 85,000 行导出到 .xlsx 文件。导出超过 85,000 行数据会生成一个 5KB 的文件，其中没有数据。导出 85,000 条记录或 90,000 条记录（大约 40 秒）时，该脚本的运行时间大致相同。

85,000 行的文件是 7.9MB，但 90,000 行的文件只有 5KB。

使用 top 监控导出脚本，我的 perl 脚本仅显示大约 1% 的内存使用量，并在几秒钟后消失。我是使用 perl 的新手，所以我不确定是否应该监视另一个进程以查看它是否内存不足。

perl 脚本在导出 85,000 行或更少的行时实际上显示了大约 7% 的内存使用量，并且在导出完成之前它一直保留在进程列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:38:27.823

我尝试了以下程序来生成一个 90,000x20 的工作表，并且输出文件很好。它比您报告的要小一些（~6MB），但涉及压缩，因此它取决于输入数据：

```
#!/usr/bin/perl -w

use strict;
use warnings;
use Excel::Writer::XLSX;

my $workbook  = Excel::Writer::XLSX->new('bigfile.xlsx');
$workbook->set_optimization();

my $worksheet = $workbook->add_worksheet();

$worksheet->set_column(0, 50, 18);

for my $row (0 .. 90000 -1) {
    for my $col (0 .. 20 -1) {
        $worksheet->write($row, $col, "Row: $row Col: $col");
    }
}

__END__ 
```

我唯一的其他建议是确保您使用的是 Excel::Writer::XLSX >= 0.51 的版本，因为在此之前优化模式下存在内存泄漏。

在那之后，我认为你应该提交一个错误报告。确保附上 Excel::Writer::XLSX [bug_report.pl](http://search.cpan.org/~jmcnamara/Excel-Writer-XLSX/lib/Excel/Writer/XLSX/Examples.pm#Example%3a_bug_report.pl)程序生成的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T21:24:46.703

您可以尝试两件事来解决此问题。

1.  将显式 Workbook [close()](http://search.cpan.org/~jmcnamara/Excel-Writer-XLSX/lib/Excel/Writer/XLSX.pm#close%28%29)添加到程序末尾，以防析构函数中的隐式关闭以某种方式被阻止。
2.  如果您的进程内存不足，请尝试[set_optimisation()](http://search.cpan.org/~jmcnamara/Excel-Writer-XLSX/lib/Excel/Writer/XLSX.pm#set_optimization%28%29)模式。

# java - 设置样式图像以在 xml 中使用

> ID：14964171
> 
> 赞同：0
> 
> 时间：2013-02-19T17:53:48.567
> 
> 标签：java, android, xml, styles, themes

我正在尝试为我的应用程序制作主题更改选项。我在这里读到了一些类似的问题，但没有一个解决方案有效。

我`styles.xml`添加了：

```
<style name="themeBackground">
        <item name="android:src">@drawable/background2</item>
    </style> 
```

在我添加到layot的xml上：

```
android:background="@style/themeBackground" 
```

我得到的错误：

```
Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x1/d=0x7f060000 a=-1 r=0x7f060000} 
```

我尝试`android:theme="@style/AppTheme"`按照其他帖子中的建议从清单中删除 - 但它没有用。有任何想法吗 ？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:10:14.900

在 res/values/ 目录中创建文件 attrs.xml 并添加代码：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<attr name="themeBackground" format="reference" />
</resources> 
```

# scipy - 在 Mac os x 上安装 scikit-learn

> ID：14964176
> 
> 赞同：1
> 
> 时间：2013-02-19T17:54:05.077
> 
> 标签：scipy, scikit-learn

是否有用于在 mac os x 10.6/10.7 上安装 scikit-learn 的二进制文件？还是安装 scikit-learn 的简单方法？我已经安装了 numpy、scipy、matplotlb 并测试了它们是否按预期工作。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:24:04.240

有一些包含 scikit-learn 的二进制发行版：

*   [天篷](https://www.enthought.com/products/canopy/)

*   [蟒蛇](http://continuum.io/downloads)

如果您已经安装了 numpy / scipy 并安装了 XCode 命令行工具，那么`pip install scikit-learn`可能会通过从源代码构建它来工作。这是我通常这样做的方式（在我自己的与 HomeBrew 一起安装的 Python 2.7 版本上）。在旧版本上使用 pip 安装 SciPy 曾经是有问题的。不过，我认为从 SciPy 0.12 开始我没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-04T02:46:48.287

以下是如何`scikit-learn`轻松安装。在控制台中运行以下命令：

```
pip3 install -U numpy scipy scikit-learn 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-13T16:47:46.980

mac os x 中最简单的方法是使用 pip：

```
sudo pip install -U scikit-learn 
```

不要忘记`sudo`！

# javascript - 在 IE 中设置边框的不透明度（版本<=8）

> ID：14964177
> 
> 赞同：0
> 
> 时间：2013-02-19T17:54:05.730
> 
> 标签：javascript, html, css

我有一个 CSS 代码：

```
#mydiv{
    position:absolute;
    top:50;
    left:50px;
    border: 8px solid rgba(160,160,160,0.8);
    padding:8px;
} 
```

但问题是此代码不适用于 IE，在 IE 8.0 中测试。

我知道 ：

```
filter:alpha(opacity=80); 
```

是在 IE 中设置不透明度的属性。但我需要的是*“只为边框设置不透明度，而不是为整个 div 设置不透明度”*。有谁知道如何实现这一目标？有或没有 JScript 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:13:46.417

边框不透明度适用于 IE9 及更高版本。对于 IE 8 及更低版本，您唯一的选择是使用某种半透明 PNG 作为背景，而不是真正的边框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:15:03.347

尝试添加该`background-clip`属性以确保即使在纯色背景上边框也保持透明。

```
#mydiv {
    border: 1px solid rgba(160,160,160,0.8);
    -webkit-background-clip: padding-box; /* for Safari */
    background-clip: padding-box; /* for IE9+, Firefox 4+, Opera, Chrome */
} 
```

但问题是 IE <=8 不支持此属性。旧的 IE 版本不支持任何漂亮的东西，所以我给你的建议是接受你的 div 的边框在 IE 中没有透明度的事实。

谢谢。

# .net - Unity：将服务从父级注入子级

> ID：14964179
> 
> 赞同：0
> 
> 时间：2013-02-19T17:54:14.043
> 
> 标签：.net, unity-container, ioc-container

如果我有以下类结构：

```
public AContainer : IContainer
{
    public AContainer(ILogger log, IDataService dataService)

    ....         
}

public BContainer : IContainer
{
    public BContainer(ILogger log, IDataService dataService)

    ....         
}

public DataService : IDataService
{
    public DataService(ILogger log, ISomethingElse somethingElse, IWhatever whatever)

    ....
} 
```

我想注册同一个 DataService 的两个不同实例——一个注入 AContainer，一个注入 BContainer——同时将 AContainer 的日志注入其 DataService 并将 BContainer 的日志注入其 DataService。

一条路线似乎引导我使用 ResolvedParameter 注册完整结构，这让我感觉不舒服，因为我需要将 ISomethingElse 和 IWhatever 与 Container 一起注册。

另一条路线将我引向属性注入，这通常是不鼓励的，但在这里可能有一席之地。

那么在 IoC 中是否存在此类问题的常见模式，Unity 是否支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:07:15.333

也许 Unity`PerResolveLifetimeManager`可以帮助你。如果 ILogger 配置`PerResolveLifetimeManager`为每个注入链仅创建一个实例。

有了这个 Life-Time Manager Unity`Logger`在 a`DataService`被解析时创建一个新的（并且在你解析时`DataService`被解析为注入），并注入在.`AContainer``AContainer``Logger``AContainer`

当您解决时，将创建一个新的`DataService`和一个新的。这个新的将被注入到这个新的和中；将被注入.`Logger``BContainer``logger``DataService``BContainer``DataService``BContainer`

结果将是：

2 个不同的`Containers`:`AContainer`和`BContainer`. 2 个不同`DataServices`：每个容器中一个。2（不是 4）`Loggers`：`AContainer`与它共享记录器并与`DataService`它共享`BContainer`其他。`logger``DataService`

# group-by - 转换前后的 Pandas groupby 索引

> ID：14964183
> 
> 赞同：1
> 
> 时间：2013-02-19T17:54:32.530
> 
> 标签：group-by, dataframe, transform, pandas

我解决这个问题的动机是我试图对记录进行重复数据删除。有些字段可以删除，但我想要其他字段的总和。对于以下数据框，

```
In [48]: rand = np.random.RandomState(1)
         df = pd.DataFrame({'A': ['foo', 'bar'] * 2 + ['baz', 'qux'],
                                        'B': rand.randn(6),
                                        'C': rand.randint(0, 20, 6),
         })
In [49]: df.sort('A', inplace=1)
Out[49]:      A         B   C
         1  bar -0.611756  18
         3  bar -1.072969  10
         4  baz  0.865408  14
         2  foo -0.528172  11
         0  foo  1.624345   5
         5  qux -2.301539  18 
```

我想删除具有相同`A`值的重复记录，但保留总和`B`（可能`C`在某些情况下）。我认为 groupby 的转换应该做我想要的：

```
In [50]: df.groupby('A')[['B']].transform(sum)
Out[50]:           B
         1 -1.684725
         3 -1.684725
         4  0.865408
         2  1.096174
         0  1.096174
         5 -2.301539 
```

但是由于某种原因，我注意到当我最后索引时它并没有给我想要的东西：

```
In [51]: df.groupby('A').transform(sum)[['B']]
Out[51]:           B
         1 -0.611756
         3 -1.072969
         4  0.865408
         2 -0.528172
         0  1.624345
         5 -2.301539 
```

为什么有区别？此外，当我尝试在 2 列上进行转换时，它并没有达到我的预期：

```
In [52]: df.groupby('A')[['B', 'C']].transform(sum) #same result as df.groupby('A').transform(sum)[['B', 'C']]
Out[52]:           B   C
         1 -0.611756  18
         3 -1.072969  10
         4  0.865408  14
         2 -0.528172  11
         0  1.624345   5
         5 -2.301539  18 
```

我不介意这种情况下的差异，但在我正在处理的应用程序中，它实际上正在做相反的事情，但我找不到重现它的示例（即，`df.groupby('A').transform(sum)[['B', 'C']]`给了我想要的东西，但速度更快`df.groupby('A')[['B', 'C']].transform(sum)`没有）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:24:47.443

我认为这在于`transform`方法。如果您查看[文档](http://pandas.pydata.org/pandas-docs/stable/groupby.html#transformation)，它会说`transform`返回一个与被分组的对象索引相同（相同大小）的对象。事实上你的

```
df.groupby('A').transform(sum)[['B']] 
```

根本不做任何总结。

如果您只需要总和，那么：

```
df.groupby('A')[['B']].sum() 
```

或这个：

```
df.groupby('A').sum()[['B']] 
```

应该这样做，它们会产生相同的结果。

# google-app-engine - 如何从非用户进程访问 OAuth2

> ID：14964184
> 
> 赞同：1
> 
> 时间：2013-02-19T17:54:33.187
> 
> 标签：google-app-engine, oauth, oauth-2.0, google-analytics-api, google-oauth

我正在使用 google 的 oauth2client 库供 GAE 从 GAE 应用程序访问 google 分析数据。当我第一次从 Web 浏览器点击 URL 时，它获取了我的凭据并生成了一个令牌。我的计划是在每晚运行的 cron 作业中重新使用该令牌。

但是，该 cron 作业总是 302，我认为这意味着我的令牌未被接受。一些代码：

```
class GetGAHandler(webapp.RequestHandler):
  @decorator.oauth_required
  def get(self):
    if not decorator.has_credentials():
      logging.error("GA is asking for auth. Please visit %s" % self.request.url)
      self.redirect(decorator.authorize_url())
      return 
```

（之后我会做一些有用的事情。）

当我从浏览器中点击它时，它从不询问我的凭据，所以我认为令牌很好。但是，当我的 cron 运行时，会发生这种情况：

```
2013-02-18 20:00:00.224 /admin/getGA 302 10ms 0kb AppEngine-Google; (+http://code.google.com/appengine)
0.1.0.1 - - [18/Feb/2013:17:00:00 -0800] "GET /admin/getGA HTTP/1.1" 302 426 - "AppEngine-Google; (+http://code.google.com/appengine)" "kaon-log.appspot.com" ms=10 cpu_ms=0 cpm_usd=0.000048 queue_name=__cron task_name=ff7194e21b55970ebaf7e369504de801 instance=00c61b117cbe215d928dbc53a31f55fb06f769b5 
```

如您所见，有一个 302，但没有日志消息，所以我猜装饰器正在执行重定向。

我错过了什么？从 cron 访问 OAuth2 API 一定是很常见的事情......

# c# - 在通过 Web 服务发布 XML 之前利用 XSD 验证数据

> ID：14964187
> 
> 赞同：1
> 
> 时间：2013-02-19T17:54:35.863
> 
> 标签：c#, xml, visual-studio-2010, web-services, xsd

我正在编写一个服务，它从内存中读取一串以逗号分隔的值（及其标签）并将它们打包到一个 XML 文件中发送。数据所有者正在为每个 XML 结构生成一个关联的 XSD 文件。`.txt`在通过 Web 服务发布 XML 之前，我想阅读 XSD 文件以验证文件中的数据标签列表。如果检测到 XSD 和 txt 文件之间存在差异，我希望代码抛出异常。如果匹配成功，它会从`.txt`文件中获取值，打包并发布 XML 请求。我正在寻找如何做到这一点的整个过程（从输入到输出）的示例。

读取输入文件并收集属性和值 (TestValuesIN.txt)

```
 "test.Foo", 122; 
```

打开一个 XSD 文件并根据我的输入文件的元素列表对元素执行一对一的匹配。现在我只关心 XSD 中存在的“Test.Foo”（元素：Test.Foo val:)。(TextXSD.xsd)

```
<?xml version="1.0"?>
<!-- Generated using Flame-Ware Solutions XML-2-XSD v2.0 at http://www.flame-ware.com/Products/XML-2-XSD/ -->
<xs:schema id="batch-execution" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
    <xs:element name="batch-execution" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
        <xs:complexType>
            <xs:choice minOccurs="0" maxOccurs="unbounded">
                <xs:element name="insert">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="test.Foo" minOccurs="0" maxOccurs="unbounded">
                                <xs:complexType>
                                    <xs:sequence>
                                        <xs:element name="val" type="xs:string" minOccurs="0" />
                                    </xs:sequence>
                                </xs:complexType>
                            </xs:element>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
                <xs:element name="fire-all-rules">
                    <xs:complexType>
                        <xs:attribute name="max" type="xs:string" />
                    </xs:complexType>
                </xs:element>
                <xs:element name="get-objects">
                    <xs:complexType>
                        <xs:attribute name="out-identifier" type="xs:string" />
                    </xs:complexType>
                </xs:element>
            </xs:choice>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

然后将 XML 发布到

```
http://mycamelhump.<myurl>.com:8080/drools-camel-service/kservice/CommTestXML/execute 
```

URI

```
<batch-execution>
 <insert>
  <test.Foo>
    <val>122</val>
  </test.Foo>
</insert>
<fire-all-rules max="-1"/>
<get-objects out-identifier="also-foo"/>
</batch-execution> 
```

代码获取结果将输出打印到 (TestValuesOUT.txt)

```
"Test.Foo", 100; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:19:09.643

如果您尝试构建 xml 文档并使用 .NET XML 模式集来验证您的 xml，然后再将其发布到您的 Web 服务 - 如下所示：

```
public List<string> ValidateXml(string xml, string rootXsdName)
    {
        List<string> xsdValidationErrors = new List<string>();

        try
        {
            // Note: Don't use XDocument schema validation as this will give a false positive of a string without XSD specified       
            XmlReaderSettings settings = new XmlReaderSettings();
            settings.ValidationType = ValidationType.Schema;
            settings.ValidationFlags |= XmlSchemaValidationFlags.ProcessInlineSchema;
            settings.ValidationFlags |= XmlSchemaValidationFlags.ReportValidationWarnings;
            settings.ValidationEventHandler += ((o, e) => xsdValidationErrors.Add(e.Message));
            settings.Schemas = GetXmlSchemas(rootXsdName);

            TextReader textReader = new StringReader(xml);
            XmlReader reader = XmlReader.Create(textReader, settings);

            // Parse the file.          
            while (reader.Read())
            {
                //Empty control loop to read through entire document getting errors uaing ValidationEventHandler
            }
        }
        catch (Exception ex)
        {
            xsdValidationErrors.Add("Unable to parse XML");
        }

        return xsdValidationErrors;
    } 
```

GetXmlSchemas 的实现将如下所示...

```
 /// <summary>
    /// Generates an XmlSchema set to use to validate the xDocument
    /// </summary>
    private XmlSchemaSet GetXmlSchemas(string xsdFileName)
    {
        XmlSchemaSet schemas = new XmlSchemaSet();

        // ... build the schema set here

        return schemas;
    } 
```

所以 - GetXmlSchemaSet 将加载你所有的 xsd 文件（如果你有多个文件）

高温高压

# java - android：如何在异步中运行线程直到从 AlertDialog.Builder 获得响应

> ID：14964190
> 
> 赞同：1
> 
> 时间：2013-02-19T17:54:38.223
> 
> 标签：java, android, multithreading, android-asynctask

在我的程序中，通过 AsynchTask 从服务器收集数据并通过微调器等待用户从数据中选择（AlertDialog.Builder 用于以微调器格式显示数据）。

我的代码是：

```
public class Splash extends Activity {

    protected boolean _active = true;
    protected int _splashTime = 1500;
    protected long startTime = 0;   

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);
        startTime = System.currentTimeMillis();
        new InitialSetAsync().execute();

    }

    private class InitialSetAsync extends AsyncTask<String, Integer, String> {

        @Override
        protected String doInBackground(String... params) {
            InitialSetting ins = new InitialSetting(Splash.this);
            ins.doInitialSetting();

            try {
                while ((System.currentTimeMillis() - startTime) < _splashTime) {
                    Thread.sleep(100);
                }

            } catch (InterruptedException e) {
                e.printStackTrace();
            }

            return null;
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);
                Intent intent = new Intent(getApplicationContext(),
                        MainActivity.class);
                startActivity(intent);
                Splash.this.finish();

        }

    }

} 
```

以微调器格式显示的数据部分：

```
public class InitialSetting {

    private Context context;

    DbTransaction dbTran;
    Process checkProcess;
    String userCountry;
    String country = "";
    String[] availableCountries;
    int flag=0;
    public InitialSetting(Context context) {
        this.context = context;
    }

    public int doInitialSetting() {
            checkProcess = new Process();
        String hasVisit = checkProcess.retrieveFromPreference(context);
        if (hasVisit.equals("true")) {

        } else {
availableCountries = checkProcess.checkAvailableCountries();

            final AlertDialog.Builder ab = new AlertDialog.Builder(context);

            ((Activity) context).runOnUiThread(new Runnable() {
                public void run() {
                    ab.setSingleChoiceItems(availableCountries, -1,
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int whichButton) {

                                    country = availableCountries[whichButton];

                                    if (!country.equals("") && country != null) {

                                        Configuration.setCounty(country);

                                        checkProcess.copyDatabaseFromServer(
                                                country, context);
                                        dbTran.storePreference(country);

                                        dialog.cancel();
                                    }

                                }
                            });
                    ab.show();

                }
            });

        }
        return 0;
    }

} 
```

就我而言，线程在用户从 Spinner 中选择值并导致错误之前正在运行。如何暂停异步任务直到用户选择值。

# c - 错误：asm/uaccess.h：没有这样的文件或目录

> ID：14964191
> 
> 赞同：3
> 
> 时间：2013-02-19T17:54:40.507
> 
> 标签：c, linux, compiler-construction, struct

我正在运行linux内核没有。2.6.15.51 在 ubuntu 系统上。

我创建了一个自定义系统调用并将其添加到内核（包含一个结构）、编译并引导到新内核中。现在我正在尝试创建调用该系统调用的 ac 文件（用于测试目的）。因为我在我的系统调用文件中声明了一个结构，所以我在我的测试文件中包含了标头，所以我可以使用相同的结构。但是，当我尝试包含我的系统调用文件（它调用 access_ok() 方法）时，我收到一条错误消息，提示 asm/uaccess.h（声明 access_ok() 的文件）不存在。任何想法为什么我会遇到这个问题？谢谢！

# csv - 自动下载 Drupal 网络表单数据

> ID：14964194
> 
> 赞同：1
> 
> 时间：2013-02-19T17:55:21.853
> 
> 标签：csv, export, drupal-6, drupal-webform

我正在努力在两个不同的数据库系统之间集成我的数据——我们的网站本身在 Drupal 6.2.8 上运行，但我们的客户数据库由第三方在不同的系统上运行。它能够从 csv 导入数据。

我正在使用 Drupal 网络表单捕获数据——效果很好。我知道我可以从网络表单手动下载 csv - 但我想经常运行导入 - 至少每天。我发现了这个线程：[http](http://drupal.org/node/1276098) ://drupal.org/node/1276098，它谈到了用于导出网络表单的 drush 命令，但它似乎并不完整。

我知道我可以使用视图来创建 csv，但我似乎无法从视图中访问提交本身。同样，我知道数据模块可以以某种方式与答案相关联，但我完全不确定如何开始使用它。

如果只有一种简单的方法来安排数据的下载，我可以设置一个 rsync 或类似的东西来处理其余的 - 有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-27T14:29:43.603

以下代码可能适用于这种情况：

```
drush webform-export <Specify-WebFormID>  --completion-type=finished --delimiter="|" --file=<Specify-Filename> --format=delimited 
```

您也可以使用 --range-start 和 --range-type 选项来更精确地获得您想要获得的结果。

# c# - 我如何锁定或使某些指示列表框在进程开启时未使用？

> ID：14964195
> 
> 赞同：0
> 
> 时间：2013-02-19T17:55:23.670
> 
> 标签：c#

我有这个按钮点击事件代码：

```
private void button1_Click(object sender, EventArgs e)
        {
            offlineOnline = false;
            init();
            backgroundWorker1.RunWorkerAsync();
            button1.Enabled = false;
            this.Text = "Processing...";
            label6.Text = "Processing...";
            label6.Visible = true;
            button2.Enabled = false;
            checkBox1.Enabled = false;
            checkBox2.Enabled = false;
            numericUpDown1.Enabled = false;
            button3.Enabled = true;
            button6.Enabled = false;
            button4.Enabled = true;
            button5.Enabled = false;
            listBox1.Enabled = false;
        } 
```

我将 listBox1 Enabled 设置为 false。但它看起来不像老鼠。看起来 listBox 仍然处于活动状态，但实际上用户无法使用它。

我想要的是在进程启动时如何处理 listBox 的一些想法？（单击按钮1时）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:56:51.257

快速而肮脏：禁用它并将背景颜色更改为暗灰色。

不那么脏，子类`ListBox`化并在更改时设置颜色`Enabled`，可能基于当前的 Windows 主题。

# javascript - 如何将枚举数组序列化为 Json 字符串数组？

> ID：14964196
> 
> 赞同：6
> 
> 时间：2013-02-19T17:55:27.710
> 
> 标签：javascript, json.net, javascriptserializer

根据 Diego 在此问题中投票率最高的答案下未回答的评论：

[枚举的 JSON 序列化为字符串](https://stackoverflow.com/questions/2441290/json-serialization-of-c-sharp-enum-as-string)

所以对于一个枚举：

```
public enum ContactType
{
    Phone = 0,
    Email = 1,
    Mobile = 2
} 
```

例如。一个属性：

```
//could contain ContactType.Phone, ContactType.Email, ContactType.Mobile
IEnumerable<ContactType> AvailableContactTypes {get;set;} 
```

对于像 JSON 这样的东西：

```
{ContactTypes : ['Phone','Email','Mobile']} 
```

代替

```
{ContactTypes : [0,1,2]} 
```

与普通的 JavaScriptSerializer 一样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:21:08.960

看来，在 Json.NET 的更高版本之一中，通过[`ItemConverterType`](https://www.newtonsoft.com/json/help/html/P_Newtonsoft_Json_JsonPropertyAttribute_ItemConverterType.htm)属性的[`JsonProperty`](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_JsonPropertyAttribute.htm)属性对此进行了适当的规定，如此处所述：

[http://james.newtonking.com/archive/2012/05/08/json-net-4-5-release-5-jsonproperty-enhancements.aspx](http://james.newtonking.com/archive/2012/05/08/json-net-4-5-release-5-jsonproperty-enhancements.aspx)

当我遇到与我自己的项目相关的从 Json.NET 3.5 升级的问题时，我无法尝试。最后，我`IEnumerable<string>`按照 Shmiddty 的建议将我的视图模型转换为（尽管仍然存在阻抗不匹配，我将来会回来重构它）。

希望能帮助其他有同样问题的人！

示例用法：

```
[JsonProperty(ItemConverterType = typeof(StringEnumConverter))]
IEnumerable<ContactType> AvailableContactTypes {get;set;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T18:23:59.860

我一直发现在这些情况下添加附加属性比尝试更改 json.net 解析器的行为更容易。

```
[JsonIgnore]
IEnumerable<ContactType> AvailableContactTypes {get;set;}

IEnumerable<string> AvailableContactTypesString
{
    get { return AvailableContactTypes.Select(c => c.ToString()); }
} 
```

当然，如果您需要反序列化，您还需要该属性的设置器。

```
set { AvailableContactTypes = value
    .Select(c => Enum.Parse(typeof(ContactType), c) as ContactType); } 
```

# xml - xml添加带有实体的照片

> ID：14964199
> 
> 赞同：2
> 
> 时间：2013-02-19T17:55:36.913
> 
> 标签：xml, image, xslt, entity

我想在 xml 中添加带有实体的照片，但我不知道如何在 xsl 文件中调用它们

这是xml代码：

```
<!DOCTYPE cookbook [
  <!NOTATION JPG SYSTEM "image/jpeg">
  <!ENTITY pizza SYSTEM "images/1.jpg" NDATA JPG>
]>

<cookbook>
  <recipe id="1" authorID="1" region="southwest">
    <picture>
      <image href="pizza"/>
    </picture>
  </recipe>
</cookbook> 
```

在 xsl 我有以下内容：

```
<images>
  <xsl:for-each select="picture/image">
    <img src="href"/>
  </xsl:for-each>
</images> 
```

但它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:29:11.440

试`unparsed-entity-uri()`...

```
<img src="{unparsed-entity-uri(@href)}"/> 
```

# javascript - 如何添加 InputMask 插件？

> ID：14964206
> 
> 赞同：0
> 
> 时间：2013-02-19T17:56:11.587
> 
> 标签：javascript, plugins, extjs, ext.net

如何通过 JS 在文本字段中动态添加 InputMask 插件和掩码？

我已经尝试过：

```
field.addPlugins(new InputMask(
{
    Mask: result
})); 
```

但没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:04:13.553

这个问题是否定的，但我找到了答案。

一天可能有用！

使用前需要注册插件！为此，只需输入：

```
ResourceManager.RegisterControlResources<InputMask>(); 
```

在 PageLoad 事件中。

# sql-server - 对货币数据类型进行排序不会产生正确的结果

> ID：14964211
> 
> 赞同：0
> 
> 时间：2013-02-19T17:56:29.337
> 
> 标签：sql-server, currency

我正在尝试根据类型为**money**的列对结果进行排序。排序似乎没有产生预期的结果。

询问 ：

```
SELECT ItemID, ItemName, Total, 
       '$' + replace(convert(varchar,cast(Volume as money),1), '.00','') as Volume, 
   '$' +  replace(convert(varchar,cast(Average as money),1), '.00','') as Average,  
       FinalTotal     
FROM @FinalTabVariable
ORDER BY Average DESC 
```

谢谢

BB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:00:39.860

有几件事我看错了。

您使用的别名`Average`是您要排序的列的名称，因此您实际上是在对`varchar`值进行排序，而不是在`money`. 尝试使用：

```
SELECT ItemID, ItemName, Total, 
       '$' + replace(convert(varchar,cast(Volume as money),1), '.00','') as Volume, 
   '$' +  replace(convert(varchar,cast(Average as money),1), '.00','') as Avg,    
FROM @FinalTabVariable
ORDER BY Average DESC 
```

如果您的`Average`专栏是`money`，那么我不确定您为什么`cast(Average as money)`在查询中使用。在这种情况下，这似乎是不必要的。

# winforms - 选中列表框，文本框，输出

> ID：14964216
> 
> 赞同：1
> 
> 时间：2013-02-19T17:56:39.263
> 
> 标签：winforms, checkbox, textbox

我是编程新手，我正在寻求有关我在 Visual Basic（Visual Studio 2010）中的程序的建议。

我将描述我的程序目标以及我是如何创建模型的。

我的主界面将有几个选项卡。**在每个选项卡**中，将包含一些用于输入数据的文本框和一些带有项目列表的复选框。我想做的是收集程序用户输入和/或单击的所有信息，并将信息吸收到预先格式化的文本框中，这将使我可以选择将其输出到文件中。我希望预先格式化的文本框从不同的文本框和不同选项卡的选中列表框中收集数据。我可以举一个例子（非代码）来说明我的意思：

```
Tab 1 of application:
textbox asking for name
textbox asking for date
checkedlistbox with items ("green", "blue", "red")

Tab 2 of application:
textbox asking for name of country
textbox asking for citizenship
checkedlistbox with items ("north", "south", "east", "west")

Tab 3 of application:
textbox that is "preformatted" to grab the data from the first two tabs so that I can save it to a textfile that would look like this 

My name is Billy
Today's date is 31JAN2010.
I like: green blue red,

I come from United States of America.
I am American.
I am from the region of South 
```

到目前为止，我使用的方法效率很低。我只是没有足够的知识去做我想做的事，我采取了这个策略：

对于checkedlistitems，我将项目列表输出到文本框。我使这个框对用户不可见。然后我在我的标签 3 中调用这个框，它有一个按钮和文本区域。按钮部分自动对“预格式化”文本进行编码，并且它是引用包含已检查项目列表的不可见文本框的问题。与此有关的一个问题，或者我如何对选中列表框进行编程，是如果我选中某些内容，然后取消选中它，它仍会出现在我的选项卡 3 文本框中。

例如，如果我是使用第二个选项卡的用户，我单击“南”，然后取消单击它并单击“北”，文本框会显示

我来自南北地区

我不确定我需要更改代码中的哪个属性或位置，以便它可以删除项目。我正在使用 for 循环来获取项目并且手头没有我的代码。

一般来说，我只是在寻找这样的编程策略，与我所拥有的相比，这将是有效的。任何建议/示例/代码都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:33:50.610

对于您的选中列表框，您可以在更改选择时使用偶数 SelectedIndexChanged ，您不会遇到这个问题：

如何使用的例子：

例如，如果您有一个简单的标签：

```
Label1.Text = "I am from the region of " & checkedlistbox1.selecteditem.value 
```

顺便说一句，在您的情况下，我认为不需要 for 循环。

如果您想了解信息，请尝试 w3schools 或 msdn。

问候

# c# - 逗号分隔的 IP 列表的正则表达式，它可能具有单个或屏蔽的 IP

> ID：14964217
> 
> 赞同：-1
> 
> 时间：2013-02-19T17:56:44.173
> 
> 标签：c#, .net, regex, asp.net-mvc-3, data-annotations

我正在寻找有效的 .NET Regex 以验证包含逗号分隔的 IP 列表的字符串。IP 可以是单个 IP ( **192.168.12.5** )、掩码 IP ( **192.168.0.0;255.255.0.0** ) 或 CIDR 表示法 ( **192.168.0.0/16** )。

用户正确输入的一个示例可能是：

**192.168.12.5,192.168.15.7,19​​2.168.0.0;255.255.0.0,192.168.0.0/16**

一个样本输入不正确：

192.168.12.5, **192.168.15** ,* *192.168.0.0;255.255.0.0;255.255.0.0* *,192.168.0.0/16

该字符串也可以为空。我将使用正则表达式在 MVC3 中使用 DataAnnotation 正则表达式匹配来验证客户端/服务器端的输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:33:47.550

如果要精确，仅验证每个八位字节包含三个数字是不够的；您需要验证它是否介于 0 和 255 之间。这导致单个 IP 地址的以下表达式：

```
\b((25[0-5]|2[0-4]\d|[01]?\d{1,2})\.){3}(25[0-5]|2[0-4]\d|[01]?\d{1,2})\b 
```

要验证掩码，您需要重复表达式。要验证 CIDR 表示法后缀，您需要一个介于 0 和 32 之间的数字：

```
\/(3[0-2]|[012]?\d) 
```

然后，您需要为逗号分隔的列表重复整个组。将它们放在一起，为清楚起见添加了空格和注释：

```
# Start of line:
^
(
  (
    # An IP address:
    \b((25[0-5]|2[0-4]\d|[01]?\d{1,2})\.){3}(25[0-5]|2[0-4]\d|[01]?\d{1,2})\b

    # Optionally followed by either:
    (
      # a CIDR suffix:
      (\/(3[0-2]|[012]?\d))
    |
      # or a subnet mask:
      ;\b((25[0-5]|2[0-4]\d|[01]?\d{1,2})\.){3}(25[0-5]|2[0-4]\d|[01]?\d{1,2})\b
    )?
  )

  # Followed by a comma and optional white-space
  ,\s*
)
# Zero or more times:
*

# Followed by:
(
  # An IP address:
  \b((25[0-5]|2[0-4]\d|[01]?\d{1,2})\.){3}(25[0-5]|2[0-4]\d|[01]?\d{1,2})\b

  # Optionally followed by either:
  (
    # a CIDR suffix
    (\/(3[0-2]|[012]?\d))
  |
    # or a subnet mask:
    ;\b((25[0-5]|2[0-4]\d|[01]?\d{1,2})\.){3}(25[0-5]|2[0-4]\d|[01]?\d{1,2})\b
  )?
)
# Zero or once (to allow empty strings):
?

# End of line
$ 
```

当然，这只支持 IPv4 地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:00:13.143

此正则表达式将根据您描述的要求进行验证。

```
([\d]{1,3}.[\d]{1,3}.[\d]{1,3}.[\d]{1,3}[/]*[\d]{0,3}[,;]*)* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T18:07:48.360

你可以使用这个正则表达式

```
^(?!^;|.*,$)(;?\d{1,3}(\.\d{1,3}){3}(/\d{1,3})?,?)*$ 
```

# php - 从差异 2 日期获取过去的一天

> ID：14964220
> 
> 赞同：0
> 
> 时间：2013-02-19T17:56:52.683
> 
> 标签：php

我想从不同的 2 日期得到过去的多少天。

PHP代码：

```
$date1 = new DateTime('2013-02-20');
$date2 = new DateTime('2013-02-22');
$interval = $date1->diff($date2);
if (  $interval->days >= 0)
      echo "past day:" . $interval->days . " das "; 
```

结果是：2，如何得到-2？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T18:07:48.113

DateInterval的属性`invert`指定间隔是否为负。

因此：

```
$date1 = new DateTime('2013-02-20');
$date2 = new DateTime('2013-02-22');
$interval = $date2->diff($date1);

if ($interval->days >= 0) {
      echo 'Past day: ', (($interval->invert ? -1 : 1) * $interval->days), ' days ';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:03:14.217

尝试以下操作：

```
$date2->diff($date1); 
```

# eclipse - 配置 Eclipse JPA DDL Generation 以生成 SQL 分隔符

> ID：14964221
> 
> 赞同：3
> 
> 时间：2013-02-19T17:56:53.237
> 
> 标签：eclipse, jpa, eclipselink, ddl, dali

有没有办法配置 Eclipse JPA DDL 生成以指定尾随';' 对于输出文件上的每个语句？例如：

```
CREATE TABLE PHYSICAL_OBJECT (ID BIGINT NOT NULL, PRIMARY KEY (ID)) 
```

会成为

```
CREATE TABLE PHYSICAL_OBJECT (ID BIGINT NOT NULL, PRIMARY KEY (ID)); 
```

# ckeditor - ckeditor 4 水平拉伸

> ID：14964222
> 
> 赞同：0
> 
> 时间：2013-02-19T17:56:55.190
> 
> 标签：ckeditor

使用[Ckeditor 4](http://ckeditor.com/)有没有办法为初始加载设置编辑器的宽度，但仍然允许它水平拉伸？

右下角的小块似乎只允许垂直拉伸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:47:22.433

这是因为默认情况下调整大小插件只允许垂直调整大小。

但是有一个[config.resize_dir](http://docs.ckeditor.com/#!/api/CKEDITOR.config-cfg-resize_dir)选项，您必须将其设置为`'both'`. 还要检查其他选项，例如可能对您有用的[resize_maxWidth 。](http://docs.ckeditor.com/#!/api/CKEDITOR.config-cfg-resize_maxWidth)

# erlang - OTP 分布式应用程序接管

> ID：14964223
> 
> 赞同：2
> 
> 时间：2013-02-19T17:56:57.563
> 
> 标签：erlang, distributed, erlang-otp

我正在根据配置文件将 Erlang 应用程序动态加载到系统中，该配置文件使我无法在启动时启动分布式应用程序——我能够使故障转移工作，但不能进行故障恢复（或在 OTP 术语中，接管。 )

假设我有 NodeA 运行应用程序，NodeB 作为故障转移节点。我拉动 NodeA 上的电源线，应用程序迁移到 NodeB。这是意料之中的。但是当我让 NodeA 重新上线并尝试打电话时，`application:start(MyApp)`我得到：

`{error, {shutdown,{myapp, start, [normal,["config.xml"]]}}}` 这表明应用程序无法启动。

无论如何，它无法启动，因为我已经在另一个 NodeB 上运行了主管，并且我已经 net_adm:ping 了它们。

我想我可以在 MyApp 上调用 application:takeover/2 来重新控制节点，并杀死另一个节点上的应用程序。

`{error,{not_running_distributed, MyApp}}`

但这也不起作用。我的节点优先级列表是`[NodeA, {NodeB, NodeC}]`，所以我认为该应用程序会知道一旦重新联机就会移动到更高优先级的节点。

在这种情况下如何实施接管？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-17T09:49:10.593

您可能需要`application:takeover/2`改用。

# java - vraptor 控制器的结果（json）序列化中没有出现“String”类型的字段

> ID：14964225
> 
> 赞同：1
> 
> 时间：2013-02-19T17:57:10.367
> 
> 标签：java, json, vraptor

“String”类型的字段未出现在序列化控制器的结果中

```
result.use(Results.json()).indented().from(list).serialize(); 
```

出现一些字段，而另一个字段在 null 时不出现，我想要的字段是输入“String”并实现“get”和“sets”，这总是填充

PS：我正在使用 vraptor 框架

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:57:10.367

我使用“包含”解决了：

```
result.use(Results.json()).indented().from(list)
                .include("codigoComposto").serialize(); 
```

# php - 网址中的 PHP 帖子

> ID：14964227
> 
> 赞同：2
> 
> 时间：2013-02-19T17:57:15.627
> 
> 标签：php, post

再会，

我有一个非常简单的脚本：

```
<?php
$first=$_POST['first'];
echo "$first";
?> 
```

我希望用户能够在 url 栏中输入一些内容，比如 www.test.com/test.php?first=aa;

然后回声aa。

这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T17:58:21.257

改变

```
$first=$_POST['first']; 
```

至

```
$first=$_GET['first']; 
```

或者

```
$first=$_REQUEST['first']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T17:58:29.513

使用 GET 而不是 POST

```
$_GET["first"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T18:05:37.507

每当您尝试通过您使用的 url 获取变量的内容时：

```
$_GET['variable_name'] 
```

否则你使用

```
$_POST['variable_name'] 
```

# python - Mayavi：在 triangular_mesh 中插入面部颜色

> ID：14964230
> 
> 赞同：3
> 
> 时间：2013-02-19T17:57:38.380
> 
> 标签：python, enthought, mayavi

我将以下代码拼凑在一起，以绘制具有附加标量函数指定颜色的三角形网格：

```
#! /usr/bin/env python
import numpy as np
from mayavi import mlab

# Create cone
n = 8
t = np.linspace(-np.pi, np.pi, n)
z = np.exp(1j*t)
x = z.real.copy()
y = z.imag.copy()
z = np.zeros_like(x)
triangles = [(0, i, i+1) for i in range(n)]
x = np.r_[0, x]
y = np.r_[0, y]
z = np.r_[1, z]
t = np.r_[0, t]

# These are the scalar values for each triangle
f = np.mean(t[np.array(triangles)], axis=1)

# Plot it
mesh = mlab.triangular_mesh(x, y, z, triangles,
                            representation='wireframe',
                            opacity=0)
cell_data = mesh.mlab_source.dataset.cell_data
cell_data.scalars = f
cell_data.scalars.name = 'Cell data'
cell_data.update()

mesh2 = mlab.pipeline.set_active_attribute(mesh,
        cell_scalars='Cell data')
mlab.pipeline.surface(mesh2)

mlab.show() 
```

这工作得相当好。然而，与其让每个三角形都具有统一的颜色和三角形之间的尖锐过渡，我更愿意在整个表面上进行平滑插值。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T21:33:56.460

我认为您想使用点数据而不是单元格数据。对于单元格数据，单个标量值不会本地化到任何点。它被分配给整个面部。看起来您只想将`t`数据分配给顶点。点标量的默认渲染将在每个面上平滑插值。

```
point_data = mesh.mlab_source.dataset.point_data
point_data.scalars = t
point_data.scalars.name = 'Point data'
point_data.update()

mesh2 = mlab.pipeline.set_active_attribute(mesh,
        point_scalars='Point data') 
```

# javascript - jquery找到另一个数字的下一个/最近的多个数字

> ID：14964231
> 
> 赞同：0
> 
> 时间：2013-02-19T17:57:43.050
> 
> 标签：javascript, jquery

我有一个`<table>`动态生成的行（`<tr>’s`）。

在每一行中，我都有一个特定的单元格 ( `<td>`)，我在其中显示一个文本框。在该文本框中，我添加了一个`data-roundingrule`包含特定值的自定义属性（在每一行中，data-roundingrule 属性可能（或可能没有）具有不同的值）。

以下是这些文本框的两个示例：

```
<input type=”text” id=”txt-1” name=”txt-1” data-roundingrule=”2”&gt;
<input type=”text” id=”txt-2” name=”txt-2” data-roundingrule=”13”&gt; 
```

我的目标是在每个文本框上创建一个更改事件，以验证输入的值（由用户）是否是存储在`data-roundingrule`属性中的值的倍数。

如果用户输入的值是`data-roundingrule`属性的倍数，那就太好了！保持原样……</p>

如果用户输入的值不是`data-roundingrule`属性的倍数，则查找/获取/获取下一个最接近的数字，该数字将是`data-roundingrule`属性的倍数。

这是一个例子：

考虑上面两个文本框，在文本框1中，用户输入值1。change事件验证值1是否是data-roundingrule设置为2的倍数。既然不是这样，那我需要改变值由用户输入并将其设置为 2。

同样对于第二个文本框...假设用户在文本框中输入了值 4，4 不是 13 的倍数，所以我需要将用户的输入从 4 更改为 13。

如果用户在第二个文本框中输入了值 16，则 16 不是 13 的倍数，因此我需要将用户的输入从 16 更改为 26（这是下一个倍数）。

希望这是有道理的……</p>

真诚的，并提前感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:13:06.177

你可以这样做：

```
$('input').change(function() {
    var round     = parseInt($(this).attr('data-roundingrule'), 10);
    var value     = parseInt($(this).val(), 10);
    var remainder = value % round;

    if(remainder != 0) {
        $(this).val(value + round - remainder);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:13:55.210

添加一个 onchange 方法

```
<input type=”text” id=”txt-2” name=”txt-2” data-roundingrule=”13” onchange="roundUp(this)"> 
```

然后用Jquery像这样定义函数......

```
function roundUp(el)
{
  var num = $(this).attr("data-roundingrule");
  num = num * 1 // lazy coercion to numeric type

  var val = $(this).attr(val);

  val = val * 1;
  if(val % num === 0)
  {
    //it's good
  }
  else
  {
    while(val % num !== 0)
    {
      val += 1;
    }
  }  
} 
```

不过，您可能应该添加某种错误检查...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T18:17:15.270

```
$('input').change(function () {
    var rr = parseInt($(this).data('roundingrule'), 10);
    if ($(this).val() % rr != 0) $(this).val(Math.ceil($(this).val() / rr) * rr);
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/EMEyv/)**

# actionscript-3 - Starling 鼠标悬停检测

> ID：14964235
> 
> 赞同：0
> 
> 时间：2013-02-19T17:57:57.987
> 
> 标签：actionscript-3, hover, mouseover, starling-framework

我正在制作可点击对象的点击游戏。当玩家将鼠标移到对象上时，光标旁边会出现一个工具提示。它几乎可以按照以下代码的预期工作：

```
 private  function added():void
        {
            removeEventListener(Event.ADDED, added);
            this.addEventListener(TouchEvent.TOUCH, onTouch);
        }

protected function onTouch(e:TouchEvent):void
        {
            var touchHover:Touch = e.getTouch(this, TouchPhase.HOVER);

            if (touchHover)
            {
                trace("show");
                //mouse is hovered over this object. Therefore call Hovertext:
                if (Game.hoverText.message != name_)
                    Game.hoverText.message = name_
            }
            else
            {
                //mouse leaves the object
                trace("hide");
                Game.hoverText.hideMessage(name_);
            }

        } 
```

但是，它有一个我不明白的奇怪问题。如果我将鼠标移到对象上然后将其向下移动仍然停留在对象上，它会在每隔一帧左右触发隐藏功能。当我将光标向右移动时会发生同样的事情，但向上或向左移动时不会。

所以我的问题是我的代码有什么问题？这甚至是检测鼠标何时滚过物体以及何时滚开的最佳方法吗？

编辑：我一直在经历以下迭代，每个迭代都有相同的问题：

```
var touch:Touch = event.getTouch(this);

        if (touch == null) {
            // Set Object alpha to 0;
            //trace("pois");
            Game.hoverText.hideMessage(name_);
        }
        else if (touch.phase == TouchPhase.HOVER) {
            // Set Object alpha to 1;
            //trace("paalla");
            if (Game.hoverText.message != name_)
                Game.hoverText.message = name_;
        }
        else {
            // for a phase BEGIN/MOVE/STATIONARY case
            // see if the touch is over the bounds of the tile (assuming 'this' is the tile)
            HELPER_POINT.x = touch.globalX;
            HELPER_POINT.y = touch.globalY;
            this.globalToLocal(HELPER_POINT, HELPER_POINT);
            if(this.hitTest(HELPER_POINT, true) != null)
            {
                // Set Object alpha to 1; over tile
                trace("paalla");
            }
            else
            {
                // Set Object alpha to 0; not over tile
                trace("pois");
            } 
```

## }

```
var touchHover:Touch = e.getTouch(this);

        if (touchHover && touchHover.phase == TouchPhase.HOVER)
        {
            trace("show");
            //mouse is hovered over this object. Therefore call Hovertext:
            if (Game.hoverText.message != name_)
                Game.hoverText.message = name_
        }

        if (touchHover == null)
        {
            //mouse leaves the object
            trace("hide");
            Game.hoverText.hideMessage(name_);
        } 
```

这里还有 swf 来证明这个问题： http: [//www.students.tut.fi/~salmi26/ScorpionBox.html](http://www.students.tut.fi/~salmi26/ScorpionBox.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:31:10.067

```
private function isPressed(event:TouchEvent):void
{
    var touch:touch = event.getTouch(this);

    if(touch.phase == TouchPhase.BEGAN){
      trace("show");
      //mouse is hovered over this object. Therefore call Hovertext:
      if (Game.hoverText.message != name_)
        Game.hoverText.message = name_
    } else if(touch.phase == TouchPhase.ENDED){
        trace("release");

        //stop doing stuff
        removeEventListener(Event.ENTER_FRAME, onButtonHold);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-25T14:39:19.183

```
import starling.events.Touch;
import starling.events.TouchEvent;
import starling.events.TouchPhase;

private var touches:Vector.<Touch>;
private var touch:Touch;
private var touchStage:Touch;

private function onTouch(e:TouchEvent=null):void {

        touches= e.getTouches(DisplayObject(e.target));
        if (touches.length == 1)
        {
            touch = touches[0];

            if (touch.phase == TouchPhase.BEGAN){
                m_TouchTarget = touch.target;
                //HERE IS A MOUSE DOWN
            }

            if (touch.phase == TouchPhase.ENDED){
                m_TouchEndedPoint = new Point(touch.globalX, touch.globalY);

                    if (stage.hitTest(m_TouchEndedPoint, true) == m_TouchTarget)
                    {
                        //HERE IS A MOUSE UP
                    }
            }
            if (touch.phase == TouchPhase.MOVED){
                m_TouchEndedPoint = new Point(touch.globalX, touch.globalY);
                //HERE IS A MOUSE OUT

                    if (stage.hitTest(m_TouchEndedPoint, true) != m_TouchTarget)
                    {
                        //HERE IS A MOUSE OVER
                    }
            }

        }
    } 
```

# javascript - 如何在javascript中获取当前周数？

> ID：14964240
> 
> 赞同：0
> 
> 时间：2013-02-19T17:58:15.923
> 
> 标签：javascript, date, time

我应该如何在 javascript 中获取当前周数。以下是我尝试过的一些方法：

```
var week = new Date().week;
var week = new Date("W"); 
```

感谢您的帮助。

# c - C 打印时出现分段错误错误

> ID：14964246
> 
> 赞同：1
> 
> 时间：2013-02-19T17:58:38.323
> 
> 标签：c, string, printf, fault

在下面的带有 printf() 语句的代码中，我得到了一个分段错误： 11\. 没有它，我不会得到任何错误，但我希望能够看到正确的值在 newstring 值中。我该怎么做呢？

```
 char* newstring;
  for(int i = 0; i < len; i++)
  {
    printf("value %d\n", tempfullstring[i]);
    if (tempfullstring[i]>=97 && tempfullstring[i] <=122)
    {
      char value = tempfullstring[i];
      newstring += value;
    }
  }
  printf("The new string is %s", newstrng);
  return 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:01:57.737

我认为您对 C 字符串的工作方式有误解：

*   它们*不会*在声明时初始化（因此`char* newstring;`必须单独分配，否则会出现未定义的行为）
*   它们不能与`+=`运算符连接（因此`newstring += value;`无效）
*   C 字符串的空间需要明确管理（因此您需要`newstring`在自动存储区域中分配您的空间，或者`free`在末尾添加 a）。

修复程序的最简单方法是猜测`newstring`它会持续多长时间，并使用`strcat`它来追加数据：

```
char newstring[1000]; // some max length
newstring[0] = '\0';  // make it an empty string
...
strcat(newstring, value); // instead of newstring += value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:02:35.460

```
newstring += value 
```

您正在以非法方式附加到字符串，您实际上正在做的是更改未初始化的指针，**因此您正在将更改的地址移动到另一个无效地址**。

首先，您应该有一些空间来存储新字符串，例如

```
char newstring[64]; 
```

然后通过执行附加一个字符

```
newstring[j] = tempfullstring[i]; 
```

这不会追加 NUL 终止字符，您必须手动将其添加到末尾或使用不同的方法（例如`strncat`直接从原始字符串使用和追加：

```
strncat(newstring+j, tempfullstring+i, 1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T18:04:30.423

这是您要使其工作的代码。

```
 char* newstring = malloc (sizeof(char)*len+1);   // this will be worst case (all are >=97 o <=122
    int j=0;
      for(int i = 0; i < len; i++)
      {
        printf("value %d\n", tempfullstring[i]);
        if (tempfullstring[i]>=97 && tempfullstring[i] <=122)
        {
          char value = tempfullstring[i];
          newstring[j]= value;
          j++;
        }
      }
      newstring[j]='\0';
      printf("The new string is %s", newstrng);
      return 0; 
```

# asp.net - ListView DataPager 不工作

> ID：14964248
> 
> 赞同：0
> 
> 时间：2013-02-19T17:58:49.257
> 
> 标签：asp.net, listview, datapager

我有这个带有 DataPager 的 ListView

```
<asp:ListView ID="ProfilesList" runat="server" OnItemDataBound="ProfilesList_DataBound" >
               <LayoutTemplate>
                   <asp:DataPager runat="server" ID="ContactsDataPager" PageSize="12">
            <Fields>
              <asp:NextPreviousPagerField ShowFirstPageButton="true" ShowLastPageButton="true"
                FirstPageText="|&lt;&lt; " LastPageText=" &gt;&gt;|"
                NextPageText=" &gt; " PreviousPageText=" &lt; " />
            </Fields>
          </asp:DataPager>
              <table cellpadding="0" cellspacing="0" class="GridBody" style="padding:0; width:910px; border-bottom-style:none;">
                    <tr class="GridHeader" style="text-align:center;">
                        <td style="width:8px; padding-left:5px; border-bottom-style:none; ">
                        </td>
                        <td style="width:274px; border-bottom-style:none;">
                            Person Info
                        </td>
                        <td style="width:273px; border-bottom-style:none;">
                            Company Info
                        </td>
                        <td style="width:272px; border-bottom-style:none;">
                            User Attributes
                        </td>
                    </tr>
                </table>
                  <asp:PlaceHolder ID="itemPlaceholder" runat="server"></asp:PlaceHolder>
              </div>
            </LayoutTemplate> 
```

请记住，这只是 ListView 的第一部分，因为整个内容非常庞大。

无论如何按钮都会出现，但它们根本不做任何事情......我必须在我的代码后面做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:43:20.493

从 ListView 中提取 DataPager，设置 PagedControlID 属性并实现 PagePropertiesChanging 方法：

```
//set current page startindex, max rows and rebind to false
ContactsDataPager.SetPageProperties(e.StartRowIndex, e.MaximumRows, false);
//rebind List View
BindListView(); 
```

看看这篇文章： [http ://dotnet.dzone.com/articles/paging-listview-using](http://dotnet.dzone.com/articles/paging-listview-using)

# internet-explorer - 在 Windows 8 中使用 Internet Explorer 10 调试 ASP

> ID：14964252
> 
> 赞同：0
> 
> 时间：2013-02-19T17:59:10.350
> 
> 标签：internet-explorer, windows-8, asp-classic

刚开始在工作中使用 Windows 8，我正在尝试调试一些经典的 ASP 代码。

无论如何，如果页面上有错误，我只会得到一个通用的“页面无法显示，因为发生了内部服务器错误”。在 IE10 中。

显示友好的 HTTP 错误已关闭。

如果我在 Windows 7 机器上使用 IE9，我会得到完整的 VBScript 编译错误。

在 Chrome 和 Firefox 中出现同样的一般错误，所以我不确定发生了什么，还有其他人遇到这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:23:21.553

如果您收到 500 HTTP 响应，则服务器上发生了异常，您需要将调试器附加到主机上的 IIS 进程。

要从远程计算机（听起来像您的 Windows 8 PC）在浏览器中查看异常详细信息，请确保您的 web.config 文件具有以下设置：

```
<configuration>
    <system.web>
        <customErrors mode="Off"/>
    </system.web>
</configuration> 
```

但是，这不会让您调试代码。

# javascript - 如何动态地将新列添加到 HTML 表中

> ID：14964253
> 
> 赞同：28
> 
> 时间：2013-02-19T17:59:21.323
> 
> 标签：javascript, jquery, html

我有一个表，我目前正在向其中动态添加行：http: [//jsfiddle.net/fmuW6/5/](http://jsfiddle.net/fmuW6/5/)

现在我想通过单击一个按钮向表中添加一个新列。用户将在文本框中输入列标题。

我怎样才能做到这一点？如果用户添加 4 行，则该`Add a new Column`按钮应处理所有现有行（在每一行中添加复选框）。

**更新**

我正在寻找在行级别添加列名和复选框。

所以我添加了用户将在其中输入列名的文本框：http: [//jsfiddle.net/fmuW6/10/](http://jsfiddle.net/fmuW6/10/)

```
<input type=text placeholder='columnname'/>
<button type="button" id="btnAddCol">Add new column</button></br></br> 
```

因此，当用户单击按钮时，列名应该是文本框中的值，并且在行级别应该是复选框。所以基本上新列应该附加到`tr`表中除了第一行之外的所有列，因为那是列名

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-19T18:14:17.270

我用一个小例子更新了你的小提琴，你如何做到这一点。

[jsFiddle - 链接](http://jsfiddle.net/fmuW6/11/)

```
var myform = $('#myform'),
    iter = 0;

$('#btnAddCol').click(function () {
     myform.find('tr').each(function(){
         var trow = $(this);
         if(trow.index() === 0){
             trow.append('<td>Col+'iter+'</td>');
         }else{
             trow.append('<td><input type="checkbox" name="cb'+iter+'"/></td>');
         }
     });
     iter += 1;
}); 
```

这将为每一行添加一个新列，包括一个计数变量，该变量作为名称应用于第一行，并应用于后续行上复选框的名称属性。

考虑`th`对表头使用 - 元素，这样你就不需要我正在做的索引检查，而且它在语义上会更正确。

我省略了用户输入列名称的部分，但如您所见，您可以将`iter`- 值替换为最后的值。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-08-21T13:40:29.023

现代纯 JavaScript 解决方案：

```
function addColumn() {
    [...document.querySelectorAll('#table tr')].forEach((row, i) => {
        const input = document.createElement("input")
        input.setAttribute('type', 'text')
        const cell = document.createElement(i ? "td" : "th")
        cell.appendChild(input)
        row.appendChild(cell)
    });
 }

 document.querySelector('button').onclick = addColumn
```

```
<table id="table">
  <tr><th><input type="text" value="test 1" /><th/></tr>
  <tr><td><input type="text" value="test 2" /><td/></tr>
</table>

<button type="button">add column</button>
```

第一行将包含 a`th`而不是`td`。每个新单元格都包含一个`input`. 随意更改它以满足您的需要。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-19T18:42:17.287

答案有效，但这里仍然是我们使用 thead 和 tbody 的另一种方式！

```
JS

$('#irow').click(function(){
if($('#row').val()){
    $('#mtable tbody').append($("#mtable tbody tr:last").clone());
    $('#mtable tbody tr:last :checkbox').attr('checked',false);
    $('#mtable tbody tr:last td:first').html($('#row').val());
}
});
$('#icol').click(function(){
if($('#col').val()){
    $('#mtable tr').append($("<td>"));
    $('#mtable thead tr>td:last').html($('#col').val());
    $('#mtable tbody tr').each(function(){$(this).children('td:last').append($('<input type="checkbox">'))});
}
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-19T18:02:35.733

使用此代码添加新列：

```
$('#btnAddCol').click(function () {
    $("tr").append("<td>New Column</td>");
}); 
```

但是您需要将第一行的值更改为带有文本和其他内容的值以包含`<input type="checkbox" />`. 最好是

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-19T18:08:22.540

看看 jsFiddle ...................... [http://jsfiddle.net/fmuW6/8/](http://jsfiddle.net/fmuW6/8/)

```
 $(document).ready(function () {
        $('#btnAdd').click(function () {
              var count = 3, first_row = $('#Row2');
                while(count-- > 0)                    first_row.clone().appendTo('#blacklistgrid');
     });   

        $('#btnAddCol').click(function () {
            $("#blacklistgrid tr").each(function(){
               $(this).append("<td>test</td>");       
            })
     });      
 }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-03T15:35:36.957

使用 4 列的表：

[![在此处输入图像描述](../Images/d2126d552f23c9d3732892f57e1d80b4.png)](https://i.stack.imgur.com/Lwbap.png)

我可以像这样动态地添加值：

```
 var TableId = "table_" + id; 

 var table = $("#" + TableId );

 table.find("tbody tr").remove();

 table.append("<tr><td>" + "1" + "</td><td>" + "lorem"  + "</td><td>" + "ipsum" + "</td><td>" + "dolor" + "</td></tr>"); 
```

最终结果将是：

[![在此处输入图像描述](../Images/99c1953a363789996b0eb9b3b19837fc.png)](https://i.stack.imgur.com/5n4EH.png)

# php - 哪种类型的 URL 更适合 Laravel？

> ID：14964254
> 
> 赞同：1
> 
> 时间：2013-02-19T17:59:24.313
> 
> 标签：php, path, laravel

如果我使用相对路径，如下所示：

```
<script src="../../../public/js/jquery-1.8.3.min.js"></script> 
```

它们不适用于 Laravel！

当我像这样使用根相对路径时：

```
<script src="/sis_colgate/public/js/jquery-1.8.3.min.js"></script> 
```

一切正常，但如果我必须更改位置，我必须修改所有这些！

如果我使用 Laravel URL::base()

```
<?php echo'<script src="'.URL::base().'/js/jquery-1.8.3.min.js"></script>'; ?> 
```

它工作正常，但在客户端（Dreamweaver）我看不到我的脚本的图像或链接。

有没有其他方法可以做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T10:15:47.450

你可以`URL::to_asset('js/jquery-1.8.3.min.js');`在 Laravel 3 和`URL::asset('js/jquery-1.8.3.min.js');`Laravel 4 中使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T18:12:21.520

最正确的选择是使用 URL::base()。

但是你不应该使用dreamweaver 来查看你的前端。

您可以使用它来编写代码，但请记住，dreamweaver 不是浏览器，而且永远不会是。

要查看代码的结果，您必须设置 apache 服务器或将代码上传到服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T10:14:07.250

相对 URL 的问题在于它取决于您当前的位置。您应该考虑使用[`URL::to_asset()`](https://github.com/laravel/laravel/blob/master/laravel/url.php#L240)哪个是您当前情况的最佳选择。它使用绝对路径，并且基本路径是可配置的，以防您计划将资产托管在其他地方（例如，amazon S3/Cloudfront）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-10T11:46:28.593

**亲爱的大家**

在 Laravel 4 中也可以这样做：

```
<script src="<?php echo asset('js/main'); ?>"></script> 
```

或等效的***刀片模板***

```
<script src="{{ asset('js/main.js') }}"></script> 
```

祝你有个好的一天！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T18:16:30.487

Dreamweaver 允许您在其首选项中设置基本文件夹，因此您应该能够使用绝对路径。通常，您的基本文件夹应位于 /sis_colgate/public/ 目录中，而不是其上方的任何内容。这样它不依赖于您当前计算机的目录结构。

# math - 点击一个球体

> ID：14964257
> 
> 赞同：3
> 
> 时间：2013-02-19T17:59:59.273
> 
> 标签：math, graphics, geometry

我有一个以正交投影为中心绘制的单位球体（半径 1）。

球体可以自由旋转。

如何确定用户单击的球体上的点？

![在此处输入图像描述](../Images/d334f82d32a7b7f6dca85cdc9eae0607.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:38:43.480

鉴于：

*   显示器的高度和宽度
*   投影圆的半径，以像素为单位
*   用户点击的点的坐标

假设左上角为 (0,0)，x 值会随着您向右移动而增加，而 y 值会随着您向下移动而增加。

将用户的点击点平移到地球的坐标空间中。

```
userPoint.x -= monitor.width/2
userPoint.y -= monitor.height/2
userPoint.x /= circleRadius
userPoint.y /= circleRadius 
```

求交点的 z 坐标。

```
//solve for z
//x^2 + y^2 + z^2 = 1
//we know x and y, from userPoint
//z^2 = 1 - x^2 - y^2
x = userPoint.x
y = userPoint.y

if (x^2 + y^2 > 1){
    //user clicked outside of sphere. flip out
    return -1;
}

//The negative sqrt is closer to the screen than the positive one, so we prefer that.
z = -sqrt(1 - x^2 - y^2); 
```

现在您知道了 (x,y,z) 的交点，您可以找到纬度和经度。

假设面向用户的地球中心是0E 0N，

```
longitude = 90 + toDegrees(atan2(z, x));
lattitude = toDegrees(atan2(y, sqrt(x^2 + z^2))) 
```

如果球体旋转使得 0E 子午线不直接面向观察者，则从经度中减去旋转角度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:33:04.840

一种可能的方法是从由行和列组成的三角形生成球体。它们也可以是隐形的。然后用鼠标选择射线对这些三角形进行命中测试。

![纬度/经度网格](../Images/30b66a3e01eaa5fb6662c75bdae0421d.png)

查看这张图片的纬度/经度网格，但应用得更密集。对于每个网格单元，您需要 2 个三角形。

# java - GIWS在构造类时终止进程

> ID：14964258
> 
> 赞同：1
> 
> 时间：2013-02-19T18:00:00.247
> 
> 标签：java, c++, xml, latex

由于我在 C++ 中找不到合适的库来用于从 TeX 渲染图像，而不依赖于 LaTeX，所以我决定使用 GIWS。我也尝试了 mimeTeX，但我的项目找不到足够的它（它不容易与 C++ 一起使用，渲染的图像也不好，而且 .gif 不是 .png）
这是我的 Java 代码：

```
package clatex;

import java.io.IOException;
import org.scilab.forge.jlatexmath.TeXConstants;
import org.scilab.forge.jlatexmath.TeXFormula;
import org.scilab.forge.jlatexmath.TeXIcon;

import java.awt.image.BufferedImage;
import java.io.File;
import javax.imageio.ImageIO;

public class CLatex {
    public CLatex(){

    }

    public int turn(int a) throws IOException{
        String math = "X+X";

        TeXFormula formule = new TeXFormula(math);
        TeXIcon ti = formule.createTeXIcon(TeXConstants.STYLE_DISPLAY, 40);
        BufferedImage b = new BufferedImage(ti.getIconWidth(), ti.getIconHeight(), BufferedImage.TYPE_4BYTE_ABGR);

        File outputfile = new File("saved.png");
        ImageIO.write(b, "png", outputfile);
        return 0;
    }
}` 
```

总结这段代码：我有一个名为 clatex 的包，我正在使用 org.scilab.forge.jlatexmath。方法 int turn() 创建“saved.png”，构造函数为空。我也测试了这段代码。
这是 CLatex.giws.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<package name="CLatex">
  <object name="CLatex">
      <method name="turn" returnType="int">
        <param type="int" name="a" />
      </method>
  </object>
</package> 
```

此代码与 GIWS 相关。

GIWS 呈现此代码并生成 CLatex.cpp 和 CLatex.h。这是我的 C++ 代码：

```
#include "latex/CLatex.h"
#include <jni.h>
JavaVM* create_vm() {
    JavaVM* jvm; JNIEnv* env;

    JavaVMInitArgs args;
    JavaVMOption options[2];

    /* There is a new JNI_VERSION_1_4, but it doesn't add anything for the purposes of our example. */
    args.version = JNI_VERSION_1_4;

    args.nOptions = 2;
    options[0].optionString = "-Djava.class.path=.";

    options[1].optionString = "-Xcheck:jni";
    args.options = options;

    args.ignoreUnrecognized = JNI_FALSE;

    JNI_CreateJavaVM(&jvm, (void **)&env, &args);

    return jvm;
}

int main(){
    JavaVM* jvm = create_vm();

    CLatex::CLatex *test =
    new CLatex::CLatex(jvm);

    return test->turn(22);
} 
```

当我使用此代码时，它写道：“进程以状态 1（0 分钟，0 秒）终止”。它不编译并给出错误。
我不知道我的代码的哪一部分是错误的，Java、XML 或 C++（也许 GIWS 有问题？）。不幸的是，我不擅长 Java，但试图处理它。谢谢您的帮助。
作为说明，我使用 Code::Blocks 和 GCC for C++；和 NetBeans for Java，在 Ubuntu Quantal Quetzal 下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T17:24:12.770

我添加了一个关于如何在 git 存储库 `JLaTeXMath`中使用包装器从 C++调用的示例：http: [//forge.scilab.org/index.php/p/jlatexmath/source/tree/master/examples/GIWS](http://forge.scilab.org/index.php/p/jlatexmath/source/tree/master/examples/GIWS)`GIWS`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:52:34.267

GIWS 生成 C++ 代码。因此，我不明白如何获得 CLatex.h。

告诉您正在使用哪个版本的 GIWS 也会有所帮助。

最后，您应该使用调试器来查看发生了什么。

# ruby-on-rails - 缺少当前文件夹 Capistrano Rails 3.2

> ID：14964266
> 
> 赞同：2
> 
> 时间：2013-02-19T18:00:38.503
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, capistrano, rvm-capistrano

我需要了解为什么 capistrano 不创建当前文件夹。我正在使用以下命令：cap deploy:setup、cap deploy:check、cap deploy

但是当我检查我的应用程序目录时，我没有当前文件夹。

这是我的 deploy.rb

```
# Execute "bundle install" after deploy, but only when really needed
require 'bundler/capistrano'

# Automatically precompile assets
load "deploy/assets"

# RVM integration
require "rvm/capistrano"

# Application name
set :application, "app"

# Application environment
set :rails_env, :production

# Deploy username and sudo username
set :user, "ubuntu"
default_run_options[:pty] = true
ssh_options[:forward_agent] = true

#We don't want to use sudo (root) - for security reasons

set :use_sudo, false

#Target ruby version

set :rvm_ruby_string, '1.9.3-p374'

#System-wide RVM installation

set :rvm_type, :user

#We use sudo (root) for system-wide RVM installation

set :rvm_install_with_sudo, true

#git is our SCM

set :scm, :git

#Use github repository
set :repository, "git@github.com:.../CM.git"

#master is our default git branch

set :branch, "master"

#Deploy via github

set :deploy_to, "/var/www/app/#{application}"
set :deploy_via, :remote_cache

#We have all components of the app on the same server
server "125.156.125.125", :app, :web, :db, :primary => true

namespace :deploy do
 task :restart, :roles => :app, :except => { :no_release => true } do
  run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
 end
 task :symlink_shared do
  run "ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml"
  run "ln -nfs #{shared_path}/assets #{release_path}/public/assets"
 end
 task :assets do
     system "rsync -vr --exclude='.DS_Store' public/assets #{user}@#{application}:#      {shared_path}/"
 end
end
after 'deploy:update_code', 'deploy:symlink_shared' 
```

我不明白错误在哪里，如果有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-22T16:45:29.937

它也可能由于文件夹权限而失败。如果选项

```
set :use_sudo, false 
```

第一次部署 cap 时不存在，当前文件夹以 sudo 作为所有者。当用户更改时，它可能没有足够的权限来更新链接。我删除了符号链接并运行

```
cap deploy:create_symlink 
```

这为我更新了符号链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T22:20:21.457

Capistrano 创建一个当前符号链接（不是目录）作为其部署周期的最后一步之一，通常在应用程序服务器收到启动/重启命令之前。它无法在部署之前创建该符号链接，因为没有符号链接到（没有签出`/releases`）。

如果它仍然没有创建符号链接，请检查您的 capistrano 部署日志是否有错误，如果在到达该点之前出现错误，它将不会创建符号链接。如果有错误，请在您的问题中发布。

# android - findViewById 中的错误

> ID：14964269
> 
> 赞同：1
> 
> 时间：2013-02-19T18:00:40.653
> 
> 标签：android

嗨，我正在做一个 android gps 教程，但我遇到了一个我不明白的错误（我对 android dev 很陌生）。我得到了错误

```
position = (WebView) findViewById(R.id.activity_main); 
```

`activity_main`问题似乎出在哪里。有人可以解释问题是什么吗？谢谢。

```
import android.R;
import android.app.Activity;
import android.location.Location;
import android.os.Bundle;
import android.webkit.WebView;
import android.widget.Toast;

public class GPSActivity extends Activity
{
    WebView position;
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_list_item);

        position = (WebView) findViewById(R.id.activity_main);
        position.getSettings().setJavaScriptEnabled(true);

    }

    public void onLocationChanged(Location loc)
    {
        String Text ="My current location is: " + "Latitud="
                + loc.getLatitude() + "Longitud =" + loc.getLongitude();
        Toast.makeText(getApplicationContext(), Text, Toast.LENGTH_LONG).show();

        String url ="http://maps.google.com/staticmap?center="
                + loc.getLatitude() +loc.getLatitude()
                + "&zoom=14&size=512x512&maptype=mobile/&markers="
                + loc.getLatitude() + loc.getLongitude();
        position.loadUrl(url);

    }
} 
```

错误是activity main 无法解决或不是一个字段，我认为id 在activity_main 但如果我错了请纠正我，这里是

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
    />
    <Webview
     android:id="@+id/webview"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T18:09:19.313

将其更改为

```
position = (WebView) findViewById(R.id.webview); 
```

还要确保你设置了正确的布局

```
setContentView(R.layout.activity_main); 
```

原因是 的 id`WebView`不是`R.id.activity_main`。在您的情况下，它是`R.id.webview`. ID 值通过在您的 XML 布局中设置`android:id="@+id/webview`

另一个可能的问题。也删除`import android.R;`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T18:25:16.453

这就是它找不到您的资源的原因：

```
import android.R; 
```

它期望在预编译的 android.R 中找到与 R 相关的内容。您需要删除该行并导入包的 R 而不是预编译的 R。

## 解决方案

删除`import android.R`线。

还要确保您的项目可以编译并且可以在构建过程中生成 R.java。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T18:19:37.520

`position = (WebView) findViewById(R.id.webview);`删除导入 android.R 后。

它正在 android.R.id 中寻找 webview，但它位于 your_package_name.R.id 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T18:35:27.647

删除导入android.R；

您可能仍然会收到无法识别的错误。这是因为您在默认包而不是项目包中。你可以通过导入你的 .R 来绕过它所以如果你的包名称是 com.GPS 然后导入 com.GPS.R

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-21T11:29:33.833

```
 View v=inflater.inflate(R.layout.fragment_two, container, false);
    WebView   mWebView = (WebView) v.findViewById(R.id.webView2); 
```

我做到了:)我能够

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-29T18:09:59.743

我一直有同样的问题`findViewByID(R.id.activity_main);`，我花了几天时间尝试我在网上看到的所有解决方案。

**我使用以下方法解决了这个问题：**

我查看了 XML 文档并给了我的布局一个名称 (ID): `activity_main`。

这行代码在我的 XML 文档的 TextView 中弹出：`android:id="@+id/activity_main"`.

立即，我停止了这个`activity_main`问题。

**注意：**我也没有`import.android.R statement`.

# macos - 如何重定向 packagemaker 日志文件输出

> ID：14964285
> 
> 赞同：4
> 
> 时间：2013-02-19T18:01:25.300
> 
> 标签：macos, packagemaker

当安装程序（通过 packagemaker 构建）正在运行时......从菜单中，我们可以选择`Window > Installer Log`然后选择`Save`它......但这并不是所有运行安装程序的人都可以要求的。

安装本身应该是一个不干涉的简单过程。但是如果出现问题并且我们需要返回并挖掘日志，那么配置 packagemaker 或它生成的安装程序会很棒......每次运行时都会吐出日志文件。

如何实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T11:50:17.297

`/var/log/install.log`由安装程序编写，包含有关正在安装的软件包、正在执行的安装前/安装后脚本以及在此过程中发生的任何错误的信息。

# java - 是否有任何存档格式既支持对许多小条目进行有效压缩，又支持对单个条目的直接访问？

> ID：14964288
> 
> 赞同：0
> 
> 时间：2013-02-19T18:01:33.003
> 
> 标签：java, compression, zip

这是我的用例：

*   我想将许多大约 1K 的小条目存储到大约 8M 的存档文件中。
*   我希望能够有效地读取单个条目（无需读取整个文件）。
*   我希望能够有效地压缩档案。在我执行的测试中，TAR+ZIP 存档比 ZIP 存档小 4 倍。这一点也不奇怪，压缩单个 1K 条目的机会并不多。
*   我不需要更新存档。一旦创建，它就是不可变的。

是否有任何同时支持（全局压缩+个人访问）的存档格式？从理论上讲，这两个目标并不相互排斥。

注意：这是针对 Java 项目的，因此我仅限于具有 Java 库的格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T19:18:21.327

我不知道针对您的问题的罐装解决方案，因此您可能需要自己编写。

当然可以。我会使用 tar 格式，因为它简单且易于理解，但它需要一个包含索引信息的辅助文件到压缩存档中。您要做的是控制 tar 文件的压缩以创建不需要历史记录的入口点。这些入口点需要比 1K 相距更远才能实现良好的压缩，但它们可以足够靠近以提供对 1K 文件的相对快速的随机访问。

最简单的方法是使用 gzip 单独压缩 tar 文件的块，这些文件代表一组完整的文件，这些文件合起来大约 128K 字节。gzip 流可以简单地连接起来，生成的 .tar.gz 文件可以与 tar 实用程序一起正常工作。这是 gzip 格式的一个属性，连接的有效 gzip 流也是有效的 gzip 流。

辅助文件将包含 tar 存档中的文件列表、它们在未压缩 tar 文件中的大小和偏移量，然后分别包含每个 gzip 流起点的压缩和未压缩偏移量。然后在提取文件时，您将在未压缩的 tar 文件中查找它的偏移量，找到最大未压缩偏移量小于或等于该文件偏移量的 gzip 流，然后从相应的压缩偏移量开始解压缩，直到到达该文件.

对于此示例，平均而言，您只需解压缩 64K 即可访问存档中的任何给定文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:22:33.633

通常，构建的压缩表中散布着引用它的压缩数据。

如果一个人想自己做压缩，一种方法是：

```
[sharedcompression table]...

[compression table addition specific to file 1] [file 1]
 ,,          ,,             ,,       ,, ,,   2   ,,   2
... 
```

最后 shuffle/share 压缩表部分。

对 7zip、bzip 和其他软件是否会有所帮助是个问题。

BTW java zip 处理（仍然？）不使用文件末尾的可选文件索引。

# objective-c - 是否应该替换已弃用的委托方法到旧版本？

> ID：14964293
> 
> 赞同：2
> 
> 时间：2013-02-19T18:01:41.810
> 
> 标签：objective-c, delegates, deprecated, api-design, objective-c-protocol

我在 Objective-C 中创建了一个适当的委托协议，我正在更新它。其中一个更新需要弃用一种方法，但它在技术上暂时仍然有效。

这是原始的委托方法。请注意，它是可选的，所以它不是必要的方法，这会影响我对它是否应该保持功能的判断。

```
@protocol MyDelegate <NSObject>

@optional
- (void)requestFailedWithError:(NSError *)error;

@end 
```

它在课堂上被简单明了地用在两个地方。像这样：

```
if ([self.delegate respondsToSelector:@selector(requestFailedWithError:)]) {
    [self.delegate requestFailedWithError:error];
} 
```

现在我已经更新了。在更新中，看起来更好的选择是根据错误发生的时间将函数划分为唯一的错误返回，因为这种方法的使用增长到两个以上的地方，并且可能有非常不同的响应。这允许消费者忽略特定类型的错误，或者至少在没有大量`if`语句的情况下以不同的方式处理每个错误。这些是新的委托方法：

```
@protocol MyDelegate <NSObject>

@optional
- (void)aRequestFailedWithError:(NSError *)error;
- (void)bRequestFailedWithError:(NSError *)error;

- (void)requestFailedWithError:(NSError *)error DEPRECATED_ATTRIBUTE;

@end 
```

在类中，我按预期调用它们，但如果类没有实现较新的方法，我将故障转移到不推荐使用的方法。当然，如果他们没有任何方法，它什么也不做。

```
if ([self.delegate respondsToSelector:@selector(aRequestFailedWithError:)]) {
    [self.delegate aRequestFailedWithError:error];
} else {
    if ([self.delegate respondsToSelector:@selector(requestFailedWithError:)]) {
        [self.delegate requestFailedWithError:error];
    }
} 
```

在当时这似乎是一个好主意，但我是否只是通过在不推荐使用时保持其功能而使该方法比需要的时间更长？我觉得不推荐使用的方法应该是有用的，只是不鼓励。然后到时候，只需猛拉整个方法。

**这看起来像是常见的做法、好主意等吗？**欢迎所有评论。只是在处理此类 API 更改时寻找最佳模式。

# android - Android 在哪里存储 WiFi 网络等系统设置？

> ID：14964305
> 
> 赞同：5
> 
> 时间：2013-02-19T18:02:15.227
> 
> 标签：android, settings

在我的设备上找不到具有系统设置的数据库。它们位于哪里？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-02T03:20:23.557

wifi 网络的 SSID 和密码存储到 /data/misc/wifi/wpa_supplicant.conf

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T18:30:56.070

设置数据库位于`/data/data/com.android.providers.settings/databases/settings.db`. 除非您有 root 权限，否则您无法访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-12T16:08:06.623

如果您尝试通过 root 访问来获取所有系统配置，那么我想您应该查看一下

```
/data/system/users/0 
```

因为所有内容都将作为 xml 首选项保存在那里。

# c++ - c++ vtk xml writer (vtkImageData) - 同一个vti文件中的多个变量

> ID：14964312
> 
> 赞同：6
> 
> 时间：2013-02-19T18:02:35.547
> 
> 标签：c++, xml, vtk

我正在尝试将数据从统一网格写入 vtk XML 文件，以便我可以使用 Paraview 呈现它。我希望我的输出文件包含两个变量：一个 3 分量向量和每个点的一个标量值。我设法编写了一个仅包含向量的 .vti 文件，如下所示：

```
#include <vtkVersion.h>
#include <vtkSmartPointer.h>
#include <vtkXMLImageDataWriter.h>
#include <vtkImageData.h>    

int main()
{
    int nx = 10, ny = 10, nz = 10;

    vtkSmartPointer<vtkImageData> imageData =
        vtkSmartPointer<vtkImageData>::New();
    imageData->SetDimensions(nx, ny, nz);

#if VTK_MAJOR_VERSION <= 5
    imageData->SetNumberOfScalarComponents(3);
    imageData->SetScalarTypeToDouble();
#else
    imageData->AllocateScalars(VTK_DOUBLE, 3);
#endif

    for (int k = 0; k < nz; ++k) {
        for (int j = 0; j < ny; ++j) {
            for (int i = 0; i < nx; ++i) {
                double * voxel = static_cast<double*>(imageData->GetScalarPointer(i,j,k));
                int coord = i + j * nx + k * nx * ny;
                double t = 0.0;
                double p = 1.0;
                voxel[0] = sin(t) * cos(p);
                voxel[1] = sin(t) * sin(p);
                voxel[2] = cos(t);
            }
        }
    }

    vtkSmartPointer<vtkXMLImageDataWriter> writer = 
        vtkSmartPointer<vtkXMLImageDataWriter>::New();

    writer->SetFileName("test.vti");
#if VTK_MAJOR_VERSION <= 5
    writer->SetInputConnection(imageData->GetProducerPort());
#else
    writer->SetInputData(imageData);
#endif
    writer->Write();

    return EXIT_SUCCESS;
} 
```

如何为网格上的每个点添加额外的标量值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T18:33:55.610

根据这个答案中的python代码，我自己想出了如何做到这一点：

[https://stackoverflow.com/a/7667417/2088135](https://stackoverflow.com/a/7667417/2088135)

如果有人对如何做同样的事情感兴趣，这里是“翻译”的代码。

```
#include <vtkVersion.h>
#include <vtkSmartPointer.h>
#include <vtkXMLImageDataWriter.h>
#include <vtkImageData.h>
#include <vtkPointData.h>
#include <vtkDoubleArray.h>

int main()
{
    int nx = 10, ny = 10, nz = 10;

    vtkSmartPointer<vtkImageData> imageData =
            vtkSmartPointer<vtkImageData>::New();

    imageData->SetDimensions(nx, ny, nz);

    vtkSmartPointer<vtkDoubleArray> director =
            vtkSmartPointer<vtkDoubleArray>::New();

    director->SetNumberOfComponents(3);
    director->SetNumberOfTuples(nx * ny * nz);

    vtkSmartPointer<vtkDoubleArray> energy =
            vtkSmartPointer<vtkDoubleArray>::New();

    energy->SetNumberOfComponents(1);
    energy->SetNumberOfTuples(nx * ny * nz);

    for (int i = 0; i < director->GetNumberOfTuples(); ++i) {
        double t = 1.0;
        double p = 0.0;
        double e = 5.0;
        double x = sin(t) * cos(p),
                y = sin(t) * sin(p),
                z = cos(t);

        director->SetTuple3(i, x, y, z);
        energy->SetValue(i, e);
    }

    imageData->GetPointData()->AddArray(director);
    director->SetName("Director");

    imageData->GetPointData()->AddArray(energy);
    energy->SetName("Energy");

    vtkSmartPointer<vtkXMLImageDataWriter> writer =
            vtkSmartPointer<vtkXMLImageDataWriter>::New();

    writer->SetFileName("test.vti");
#if VTK_MAJOR_VERSION <= 5
    writer->SetInputConnection(imageData->GetProducerPort());
#else
    writer->SetInputData(imageData);
#endif
    writer->Write();

    return EXIT_SUCCESS;
} 
```

# ios - 如果设备日期和时间不准确，如何获取实际日期和时间？

> ID：14964318
> 
> 赞同：8
> 
> 时间：2013-02-19T18:02:44.377
> 
> 标签：ios, nsdate, ntp

我注意到，如果我手动设置我的设备时间，并关闭我的 iOS 设备上的自动时间同步，`[NSDate date]`返回日期和时间假设设备时间是正确的——它可能不是。

由于文档提到`NSDate`与 NTP 有某种同步，我想知道是否有任何内置方法可以获取准确的日期和时间，而不必假设设备的日期和时间是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:06:03.340

也许[https://github.com/jbenet/ios-ntp](https://github.com/jbenet/ios-ntp)可以帮助你？它是一个可以从时间服务器获取日期和时间的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-15T05:19:25.550

我尝试了 ios-ntp 但没有得到预期的结果，所以我找到了另一个运行良好且非常容易实现的库。

[NH网络时间](https://github.com/huynguyencong/NHNetworkTime)

豆荚：

```
pod 'NHNetworkTime'
pod 'CocoaAsyncSocket' 
```

使用简单，只要你想获得时间就导入这个：

```
#import "NHNetworkTime.h" 
```

在应用程序中调用同步：didFinishLaunchingWithOptions：以在启动应用程序时从服务器更新时间：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    [[NHNetworkClock sharedNetworkClock] synchronize];
    return YES;
} 
```

然后您可以在源代码中的任何位置同步完成时获取网络时间：

```
NSDate *networkDate = [NSDate networkDate]; 
```

或在时间更新时添加通知以在您想要的任何地方重新更新您的 UI：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(networkTimeSyncCompleteNotification:) name:kNHNetworkTimeSyncCompleteNotification object:nil]; 
```

干杯！！！:)

# ios5 - iOS 6 中的游戏中心问题

> ID：14964323
> 
> 赞同：1
> 
> 时间：2013-02-19T18:02:59.727
> 
> 标签：ios5, ios6, game-center, leaderboard

我正在我的应用程序中实现 Game Center，但在尝试读取 iOS 6 中的 leaderboardCategory 属性时遇到问题。

下面是我展示 GKGameCenterViewController 的方式：

```
 GKGameCenterViewController *gcViewController = [[GKGameCenterViewController alloc]init];
    [gcViewController setLeaderboardCategory:currentLeaderboard];
    [gcViewController setGameCenterDelegate:self];
    [self presentViewController:gcViewController animated:YES completion:NULL];
    [gcViewController release]; 
```

然后，当调用委托时，我检查 leaderboardCategory 属性显示的内容：

```
-(void)gameCenterViewControllerDidFinish:(GKGameCenterViewController *)gameCenterViewController{
    NSLog(@"%@", gameCenterViewController.leaderboardCategory);
} 
```

麻烦的是，无论我在关闭前切换到哪个排行榜，它总是显示我通过的第一个。

根据苹果的文档：

> 当排行榜出现时，该属性的值决定了向玩家显示的排行榜内容。当玩家更改他们查看的排行榜内容时，leaderboardCategory 属性会自动更新。例如，为了保留玩家的选择，您可以在屏幕关闭后读取 leaderboardCategory 属性，并在下次初始化视图控制器时设置该值。

现在，我也尝试使用 GKLeaderboardViewController，但没有成功。但是，当我在 iOS 5 中使用 GKLeaderboardViewController（GKGameCenterViewController 在 iOS 6 之前不可用）时，“类别”属性**会**按照 Apple 文档的建议进行更新。

我错过了什么？

# unix - 在较少的寻呼机中，有没有办法在搜索结果之前显示更多行？

> ID：14964324
> 
> 赞同：3
> 
> 时间：2013-02-19T18:03:00.477
> 
> 标签：unix

我经常在 内搜索`less`，但它会将搜索结果放在屏幕的最顶部，这使得阅读手册页变得困难，因为我正在搜索一个单词，但我真的想看到与该描述相关的标志，这可能排几行。

有没有办法在屏幕顶部显示更多行，使光标在屏幕顶部下方 5-10 行？类似`vim`的`scrolloff`选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:09:07.810

听起来你想要 -j 选项。例如，`less -j5`将搜索结果放在第 5 行。

因为`man`您需要设置`PAGER`环境变量以包含`-j`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T15:10:08.493

要在搜索结果之前显示更多的上下文行，即将搜索结果从屏幕顶部向下放置几行而不是顶行，请使用：

`less -jX`

其中`X`是您希望结果结束的屏幕顶部下方的行数。

如果您通常更喜欢这种风格的搜索结果，并且不想一直使用它（例如在 中`man`），请将选项放在`$LESS`环境变量中。例如，要始终使用 bash 将搜索结果向下放置 5 行，这将是：

`export LESS=-j5`

`less`如果您愿意，您当然也可以在`$LESS`环境变量中添加任何其他选项。

# ruby - 如何在 Ruby on Rails 中建立与用户关联的偏好记录？

> ID：14964328
> 
> 赞同：0
> 
> 时间：2013-02-19T18:03:12.030
> 
> 标签：ruby, ruby-on-rails-3, activerecord, ruby-on-rails-3.1, ruby-on-rails-3.2

在 Ruby on Rails 中，当`user`创建新的时，我想自动`preference`为该用户创建关联的记录。

这是我的控制器：

```
class UsersController < ApplicationController

  def create
    @user = User.new(params[:user])
    if @user.save
      @user.build_preference 
      redirect_to root_path, :notice => "User created."
    else
      render :new
    end
  end

end 
```

但是，由于某种原因，我无法让它工作。用户成功保存，但是当我检查数据库时没有相关`preference`记录。

我在这里想念什么？

从模型中使用`:before_create`或其他东西创建关联记录会更好吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:33:39.307

你需要`save`：

```
def create
  @user = User.new(params[:user])
  if @user.save
    pr = @user.build_preference
    pr.save!
    redirect_to root_path, :notice => "User created."
  else
    render :new
  end
end 
```

# r - 将年月日小时和分钟的数据转换为R中的日期

> ID：14964335
> 
> 赞同：12
> 
> 时间：2013-02-19T18:03:19.573
> 
> 标签：r

我正在尝试使用 R 中的“as.date”函数将日期转换为日期。我的日期格式如下

```
2008-01-01 02:30 
```

我尝试使用以下命令：

```
as.Date(mydata$Date, format="%y-%m-%d  %h:%mm") 
```

有人可以帮我吗？我能够在没有小时的情况下转换格式，但在包含小时时遇到了困难。

谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-19T18:07:00.043

您的格式字符串不正确：

```
R> strptime("2008-01-01 02:30", format="%Y-%m-%d  %H:%M")
# [1] "2008-01-01 02:30:00" 
```

有关`?strptime`可用于定义格式的详细值，请参阅。

另请注意，由于您的字符串是标准格式，您也可以直接使用`as.POSIXlt`：

```
R> as.POSIXlt("2008-01-01 02:30")
# [1] "2008-01-01 02:30:00" 
```

# php - SQL 表未在 PHP 中更新

> ID：14964342
> 
> 赞同：0
> 
> 时间：2013-02-19T18:04:08.330
> 
> 标签：php, mysql, sql-update

我正在尝试在 PHP 中创建一个更新函数，但记录似乎没有随着更新而改变。我创建了一个 JSON 对象来保存传递给这个文件的值，并且根据我运行的 Firebug Lite 控制台，这些值输出得很好，所以可能是 sql 端有问题。谁能发现问题？我会很感激帮助！

```
<?php

$var1 = $_REQUEST['action']; // We dont need action for this tutorial, but in a complex code you need a way to determine ajax action nature
$jsonObject = json_decode($_REQUEST['outputJSON']); // Decode JSON object into readable PHP object

$name = $jsonObject->{'name'}; // Get name from object
$desc = $jsonObject->{'desc'}; // Get desc from object
$did = $jsonObject->{'did'};// Get id object

mysql_connect("localhost","root","");  // Conect to mysql, first parameter is location, second is mysql username and a third one is a mysql password
@mysql_select_db("findadeal") or die( "Unable to select database"); // Connect to database called test

$query = "UPDATE deal SET dname = {'$name'}, desc={'$desc'} WHERE dealid = {'$did'}";
$add = mysql_query($query);
$num = mysql_num_rows($add);

if($num != 0) {

echo "true";

} else {

echo "false";

} 

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:06:37.000

您需要像反引号一样转义[MySQL 中的保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)`desc`

```
UPDATE deal 
SET dname = {'$name'}, `desc`= {'$desc'} ....
                       ^----^--------------------------here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:08:33.953

你需要`mysql_affected_rows()`更新后使用不是`mysql_num_rows`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T18:09:14.480

我相信你在滥用花括号。单引号应该放在它们的外面。：

```
"UPDATE deal SET dname = {'$name'}, desc={'$desc'} WHERE dealid = {'$did'}" 
```

变成

```
"UPDATE deal SET dname = '{$name}', desc='{$desc}' WHERE dealid = '{$did}'" 
```

附带说明一下，使用任何 mysql_* 函数在安全方面都不是很好。我建议查看 php 的[mysqli](http://php.net/manual/en/book.mysqli.php)或[pdo](http://php.net/manual/en/book.pdo.php)扩展。

# c# - 如何模仿 IQueryable 的功能 .Include(表达式 > 路径）在我的自定义集合中？

> ID：14964345
> 
> 赞同：4
> 
> 时间：2013-02-19T18:04:29.163
> 
> 标签：c#, linq, lambda, expression

首先，一点背景。我正在使用 ASP.NET Web API 和 Entity Framework 5 开发一个 REST API，但是系统的要求是在我的 ApiControllers 和我的 DbContext 之间存在几层逻辑。这些逻辑层涉及将我的实体从 DbContext 中分离出来，将一组假设更改应用于内存中的实体（我称之为更改集的具体化的过程*）*，然后允许用户在这些更改获得时检查系统的新状态应用。实体的新状态不会立即保存到数据库中。相反，具体化保存在 Web 服务器的内存中，用户可以检查当前数据或各种变更集的众多具体化之一。

现在解决我的问题。

```
public interface IIdentifiable
{
    long Id { get; set; }
}

public class Foo : IIdentifiable
{
    public long Id { get; set; }
    public string Name { get; set; }
    public List<Bar> Bars { get; set; } // Navigation Property
}

public class Bar : IIdentifiable
{
    public long Id { get; set; }
    public string Name { get; set; }
    public long FooId { get; set; } // Foreign Key Property
    public Foo Foo { get; set; } // Navigation Property
}

public class Materialization
{
    IEnumerable<Foo> Foos { get; set; } 
    IEnumerable<Bar> Bars { get; set; } 
}

public interface IRepository<TItem> : IQueryable<TItem>, ICollection<TItem>, IDisposable
    where TItem : class, IIdentifiable
{
    IRepository<TItem> Include<TProperty>(Expression<Func<TItem, TProperty>> path);
    // Other methods
}

public class MateriailizationRepository<TItem> : IRepository<TItem>
    where TItem : class, IIdentifiable
{
    private Materialization _materialization;

    public MateriailizationRepository(Materialization materialization)
    {
        _materialization = materialization;
    }

    public IRepository<TItem> Include<TProperty>(Expression<Func<TItem, TProperty>> path)
    {
        // Populate navigation property indicated by "path"
    }

    // Other methods
} 
```

每个 Bar 都有一个外键属性，指示`Foo`它属于哪个，但不会填充`Bar.Foo`和`Foo.Bars`导航属性，因为这会使具体化过程复杂化。因此，在物化完成后，`Materialization.Foos`包含`Materialization.Bars`通过外键属性而不是导航属性相互引用的对象集合（即所有导航属性的值都是 null 或空`List<T>`）。我希望能够在我的`ApiController`.

```
public IQueryable<Foo> Get (bool includeBars = false)
{
    Materialization materialization;

    // Materialize

    using (IRepository<Foo> repository = new MateriailizationRepository<Foo>(materialization))
    {
        IRepository<Foo> query = repository;

        if (includeBars)
            query = query.Include(f => f.Bars);

        return query;
    }
} 
```

`MateriailizationRepository<Foo>`的主要职责是获取物化`Foo`对象，但由于它引用了整个对象，因此`Materialization`我希望能够按需包含物化`Bar`对象。`Materiailization.Bars`

我将如何实施`MateriailizationRepository.Include()`以模仿`IQueryable.Include()`扩展方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T14:49:28.617

这里有几个选项：

1.  考虑使用另一个上下文来实现您的 MaterializationRepositories 并让它由内存数据库（例如[Effort](http://tflamichblog.wordpress.com/2012/06/13/introducing-effort/) ）支持，如果现在仍然有效的话。
2.  在物化上自己重新实现“包含”功能。可以分解表达式以查找导航属性的类型。使用命名约定，您可以计算出需要查询哪些外键属性才能获得正确的标识符。要找到目标存储库，您可以在 Materialization 上使用反射来查找导航属性类型的 IEnumerable 类型的公共属性。只要您知道目标实体的主键名称（例如按照惯例），您就可以使用外键值来查找它。

如果您有少量实体类型，您最好使用某种 switch 语句并手动执行其中的一些操作，而不是通过反射。

很抱歉，这不是一个完全有效的实施，但我希望它朝着正确的方向发展。

# php - mySQL 查询仅在特定时间戳时间后获取

> ID：14964346
> 
> 赞同：0
> 
> 时间：2013-02-19T18:04:29.717
> 
> 标签：php, mysql

我有一个将数据写入 SQL 表的传感器，即时间戳和值（比如温度）。

我需要一种在 PHP 中执行 SQL 的方法，这样我就可以只打印今天的值或 1 月 21 日的日期。您无需发布代码。我只需要知道如何解决这个问题。

我见过这样的代码：

```
SELECT * FROM table
WHERE timestamp BETWEEN '2012-05-05 00:00:00' AND '2012-05-05 23:59:59' 
```

我不知道如何在 PHP 中使用它，以及它会返回什么。任何人都可以提供一些帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:08:30.383

查看[http://php.net/mktime](http://php.net/mktime)和[http://php.net/date](http://php.net/date)你可以将两者结合起来

`date('Y-m-d H:i:s', mktime(1, 2, 3, 4, 5, 2006));`

# ruby-on-rails - nil:NilClass 的未定义方法“长度”

> ID：14964349
> 
> 赞同：2
> 
> 时间：2013-02-19T18:04:37.777
> 
> 标签：ruby-on-rails, form-for

当我创建一个新用户并查看用户的个人资料时，我收到以下错误，我认为是因为用户尚未创建状态：

```
undefined method `length' for nil:NilClass 
```

它来自 Status_form：

```
<%= form_for [@status], :url => user_status_path(current_user) do |f| %>
  <div class="field">
    <%= f.text_area :content, id:"status_box", maxlength:350, placeholder: "Say something." %>
  </div>
  <%= f.submit "Update", id:"status_btn", class: "btn btn-small btn-primary" %>

  <span id="counter">Characters left: <%= 350 - @status.content.length %></span> #this is the source of the error

  <script type="text/javascript">
    $('#status_box').keyup(function () {
        var left = 350 - $(this).val().length;
        if (left < 0) {
            left = 0;
        }
        $('#counter').text('Characters left: ' + left);
    });
  </script>
<% end %> 
```

用户控制器：

```
def new
  @user = User.new
end

def create
  @user = User.new(params[:user])
  if @user.save
    sign_in @user
    redirect_to root_path
  else
    render 'new'
  end
end

def show
  @user = User.find(params[:id])
  @status = @user.status || @user.build_status
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:16:25.377

这是因为您有列的默认值`nil`。`content`所以你不能打电话`length`。`nil`如果你想使用`length`on`content`你需要设置`default`value as`empty string("")`或者你可以`to_s`先使用然后`length`

```
 <%= 350 - @status.content.to_s.length %> 
```

或者

```
 <%= 350 - (@status.content.try(:length) || 0) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:12:09.130

你的控制器中有这个：

```
 @status = @user.status || @user.build_status 
```

看起来错误来自

```
@status.content.length 
```

我敢打赌@status 的“内容”是零。

# build - Web 部署 setAcl 失败

> ID：14964351
> 
> 赞同：1
> 
> 时间：2013-02-19T18:04:42.273
> 
> 标签：build, tfs, permissions, acl, web-deployment

更新：

回答最近的评论...我找到了以下信息，但没有用。

1.  转到控制面板中的程序和功能。
2.  找到“Microsoft Web Deploy 3.0 安装程序”
3.  右键单击该程序，然后单击“更改”。
4.  在三个选项中，从“更改、修复或删除安装菜单”中选择“更改”。
5.  在 IIS 部署处理程序下，有一个通常未选中的选项“为非管理员部署配置”。选中此选项并单击下一步。
6.  完成安装。

这会在管理委派 UI 下设置其他选项，这些选项应允许非管理员帐户部署到您的应用程序。它适用于一台服务器，但不适用于另一台服务器。我没有时间试图让它工作。我的另一个解决方案是这样做：

*   构建由专门的团队管理。我们限制了 TFS 中所有项目的“查看/编辑构建定义”。
*   我们让构建帐户保留为管理员。
*   我们将密码保留在定义中。

两种解决方案都有效，但我更喜欢前者。有一天我会找出两台服务器之间的区别并发布另一个更新。

参考：[http ://workinghardinit.wordpress.com/2011/07/18/wdeployconfigwriter-account-issues-trouble-shooting-web-deploy-2-0-with-lessons-learned/](http://workinghardinit.wordpress.com/2011/07/18/wdeployconfigwriter-account-issues-trouble-shooting-web-deploy-2-0-with-lessons-learned/)

* * *

进行三天的故障排除 - 我被正式难住了。

**TFS 构建日志中的错误详细信息**

> MS部署发布：
> 
> 开始 Web 部署 将应用程序/包发布到[https://XX.XX.XX.XX:8172/msdeploy.axd?site=Default%20Web%20Site](https://XX.XX.XX.XX:8172/msdeploy.axd?site=Default%20Web%20Site) ...
> 
> 从 source:package(D:\Builds\Sources\ProjectA.zip) 启动 Web 部署任务到 Destination:auto()。
> 
> **更新 setAcl（默认网站/测试）。**
> 
> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(3847,5): 错误：Web 部署任务失败。((2/19/2013 9: 58:23 AM）在远程计算机上处​​理请求时发生错误。）[D:\Builds\Sources\ProjectA.csproj]
> 
> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(3847,5)：错误：[D:\Builds\Sources\ProjectA.csproj]
> 
> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(3847,5): error : (2/19/2013 9:58:23 AM) An在远程计算机上处​​理请求时发生错误。[D:\Builds\Sources\ProjectA.csproj]
> 
> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(3847,5): 错误：服务器在处理请求时遇到问题。有关详细信息，请联系服务器管理员。[D:\Builds\Sources\ProjectAcsproj]
> 
> **发布部署失败。**
> 
> 完成构建项目“D:\Builds\Sources\ProjectA.csproj”（默认目标）——失败。完成构建项目“D:\Builds\Sources\ProjectWeb.csproj”（默认目标）——失败。
> 
> **构建失败。**

我有三个环境。开发、质量保证和生产

开发和 QA 有一个非生产构建帐户。生产有一个生产构建帐户。

部署在其中一台生产服务器以及所有开发和 QA 服务器上运行。但不是另一个。这些是托管不同 Web 应用程序的独立服务器。它不是负载平衡的，也不是网络场的一部分。

我相信这是一个权限问题，但这个问题只存在于其中一台服务器上。为了让这个部署工作，我必须以**管理员身份在盒子上设置生产 tfs 构建帐户**。或**将完全控制权授予**Web 应用程序文件夹上的每个人。两者都不是优选的。更不用说其他服务器都不是这样设置的。

在部署过程中，我确实注意到在部署的第一步中 ACL 权限是错误的。Web 应用程序文件夹授予构建帐户特殊权限。在其他环境中，该权限永远不会被设置。我不知道为什么会这样。也许这是工作流程中的一个直接步骤，但我不确定。

所有功能委托选项均根据[此网站](http://weblogs.asp.net/scottgu/archive/2010/09/13/automating-deployment-with-microsoft-web-deploy.aspx)设置。我知道它们是正确的，因为我现在已经实施了好几次了。链接中未指定的是允许在功能规则上构建帐户。所有这些都从应用程序设置到顶级站点。

如果我将 TFS 中的 QA 构建切换为部署到生产环境，它会因同样的问题而失败。所以它不是构建定义。如果我授予管理员或所有人权限，那么它就可以工作，所以它不是项目或配置。

**MSBuild 参数**

```
/p:DeployOnBuild=True /p:DeployTarget=MsDeployPublish
/p:CreatePackageOnPublish=True /p:MSDeployPublishMethod=WMSVC
/p:MSDeployServiceUrl=https://XX.XX.XX.XX:8172/msdeploy.axd 
/p:DeployIisAppPath="Default Web Site/Test"
/p:UserName=DOMAIN\ProdBuildAccount /p:Password=*******
/p:AllowUntrustedCertificate=True 
```

在排队成功构建后，将从团队资源管理器开始部署。

此外，如果我使用 package.zip 并将其手动导入 IIS，那么 ACL 是正确的并且可以完美部署。

# c# - 在 ASP.NET C# 上验证电子邮件地址以获取自定义 ac.uk 地址

> ID：14964356
> 
> 赞同：0
> 
> 时间：2013-02-19T18:04:54.730
> 
> 标签：c#, asp.net, regex, visual-studio-2010, email-validation

我知道您可以使用 ASP.NET C# 上的正则表达式验证来验证电子邮件地址。但是，对于我正在执行的程序，我需要在他们使用以 ac.uk 结尾的工作电子邮件地址的系统上注册用户。有没有办法可以修改正则表达式

> **\w+([-+.']\w+) *@\w+([-.]\w+)* .\w+([-.]\w+)***

因为它只允许人们注册拥有诸如 example@bre.ac.uk 之类的电子邮件地址的人？

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:06:10.900

尝试正则表达式电子邮件地址是一种不好的做法。接受正确的电子邮件地址并尝试向该地址发送确认电子邮件以证明其存在。

[这是jQuery UI](http://jqueryui.com/dialog/#modal-form)网站上的一个示例正则表达式（这将解释为什么电子邮件不应该是正则表达式）：

```
^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:47:21.007

终于找到了这个问题的答案，谢谢大家的帮助]

> \w+([-+.]\w+)*@bat.ac.uk

那为我做了工作

# objective-c - 发送 NSArray 到 NSTableView

> ID：14964357
> 
> 赞同：-3
> 
> 时间：2013-02-19T18:04:57.043
> 
> 标签：objective-c, macos, cocoa, nsarray, nstableview

将存储在 NSArray 中的数据发送到 NSTableView 并逐行显示的最简单方法是什么？

例如：NSArray 有数据 [a, b, c]

我想让 NSTableView 说：

一种

b

C

NSTableView 只需要 1 列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:09:12.770

你不会“发送”东西给 NSTableView。NSTableView 向您询问事情。它通过 NSTableViewDataSource 协议实现。因此，您需要做的就是实现其中的两个必需方法（-numberOfRowsInTableView: 和 -tableView:objectValueForTableColumn:row:)，并将 tableview 的数据源出口连接到您的对象。

NSTableViewDataSource 的文档在这里：[https ://developer.apple.com/DOCUMENTATION/Cocoa/Reference/ApplicationKit/Protocols/NSTableDataSource_Protocol/Reference/Reference.html](https://developer.apple.com/DOCUMENTATION/Cocoa/Reference/ApplicationKit/Protocols/NSTableDataSource_Protocol/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T18:17:58.813

您需要探索 UITableViewDelegate 和 UiTableViewDataSource 委托方法：

```
#pragma mark --- Table View Delegate Methods ----------------------------
//Handles the selection of a cell in a table view
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
}

//Defines the number of sections in a table view
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

//Defines the header of the section in the table view
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return nil; 
}

//Defines the number of rows in each section
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 1;
}

//Defines the content of the table view cells
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    cell.textLabel.text = [myDataArray objectAtIndex:[indexPath row]];//<-pay attention to this line

    return cell;
} 
```

# java - 将不同的数组列表添加到位于 JTabbedPane 中的不同 JLists

> ID：14964359
> 
> 赞同：0
> 
> 时间：2013-02-19T18:05:05.603
> 
> 标签：java, swing, arraylist, jlist, jtabbedpane

我正在编写一个有点像待办事项列表的程序，用户在其中创建他必须做的任务，并将它们添加到一个类别中，例如“工作”。

我不能发布我的程序的图像，但它基本上是一个 jtabbedpane，其中每个选项卡都有一个“创建新任务”按钮和一个 jlist。

每个选项卡代表一个类别，我创建了一个名为：“CategoryVisual”的对象，它由“Nueva Tarea（新任务）”按钮和一个带有 JList 的滚动窗格组成。在这之后，有一个对象“类别”，它本身就是一个任务的 ArrayList

现在，我想做的是知道选择了哪个选项卡（或类别），并且当用户创建任务时，该任务显示在相应的选定选项卡中，我不知道我是否清楚。

我试过这个，这个方法在CreateNewTaskAction中：

```
public void addTaskToList(){

    JTabbedPane tabbedPane = MainWindow.getTabbedPane();
    int selectedTab = tabbedPane.getSelectedIndex();

    CategoryVisual categoryVisual = NewCategoryAction.createdCategoryVisuals.get(selectedTab);

    category = NewCategoryAction.createdCategories.get(selectedTab);
    category.addTask(newTask);

    list = categoryVisual.getList();

    list.setListData(category.getTaskList().toArray()); 
```

createdCategories 和 createdCategoryVisuals 是用户创建新类别时创建的数组列表。

*问题是，当我创建了三个类别时，任务被添加到类别对象的 Arraylist 中，但我无法将这些 arraylists 添加到相应的列表或选项卡中。数组列表显示在我创建的最后一个 CategoryVisual 中，并且根据我选择的选项卡，是列表中显示的数组列表*。

# perl - 如何从 CSV 文件中删除重复值？

> ID：14964362
> 
> 赞同：0
> 
> 时间：2013-02-19T18:05:17.633
> 
> 标签：perl

我必须打开一个 csv 文件并以哈希的形式给出我的输出。我已经完成了那部分，现在我需要将我的文件的所有内容放入一个变量减去重复项。我怎样才能做到这一点....

```
open FILE, " < abc.csv" or die $!;
# Reading content from CSV file
my @genes = <FILE>;
# Removing the information header from the CSV file contents
shift (@genes); 

print "my %hash = ( \n";

foreach(@genes){
    chomp;
    my @genes = split(':',$_);
    if(@genes != 25){
        next;
    }

    my $amino_acid = join('","',split(/,/,$genes[4]));      

    print "$genes[2]=> [$genes[0],$genes[1],[$group]],\n";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:16:38.737

尝试这样做以删除*数组*中的重复项并将其转换为*字符串*：

```
sub uniq {
    return keys %{{ map { $_ => 1 } @_ }};
}

my $string = join " ", uniq @my_array;
print $string; 
```

# django - Django 外键。在模板中访问

> ID：14964363
> 
> 赞同：1
> 
> 时间：2013-02-19T18:05:20.460
> 
> 标签：django

我学习了 Django ORM。如何在我的模板中获取**照片？**

```
def index(request):    
    animal = Animal.objects.all()
    return render_to_response('animal.html',
                              {'animal':animal,},
                              context_instance=RequestContext(request)) 
```

模板：

```
{{ animal.name }}
{{ animal.photo.all }} 
```

但这不起作用。

楷模：

```
class Animal(models.Model):
    name = models.CharField(max_length=255)

class Photo(models.Model):
    photo = models.ImageField(upload_to='media/images')
    animal = models.ForeignKey(Animal) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T18:12:24.010

您需要阅读有关[以下关系](https://docs.djangoproject.com/en/1.4/topics/db/queries/#lookups-that-span-relationships)的文档以了解如何访问相关项目。

在您的情况下，每个`animal`都有一个`photo_set`获取属于该动物的所有照片对象列表的方法。

在您的模板中，您将执行以下操作：

```
{{ animal.name }}
{% for picture in animal.photo_set.all %}
   <img src="{{ picture.photo.url }}" />
{% endfor %} 
```

# dos - FASM：显示字符串的宏

> ID：14964366
> 
> 赞同：0
> 
> 时间：2013-02-19T18:05:28.240
> 
> 标签：dos, fasm

我想在 FASM 中创建宏，它可以像这样直接打印字符串（int DOS）：

```
prints 'hey there!!!!' 
```

我写了这样的代码：

```
format MZ

use16
stack 0x100
entry _TEXT@16:_start

;
macro prints str
{
    call @f
    db str, 0x24

    @@:
        pop dx
        mov ah, 9
        int 0x21
}

segment _DATA@16 use16
    msg db 'hi!', 0xd, 0xa, 0x24

segment _TEXT@16 use16
    _start:
        push _DATA@16
        pop ds

        prints 'hi there))) !!!!'
        prints 'me'

        mov ax, 0x4c00
        int 0x21
    ret 
```

问题是：当我将 _DATA@16 段留空（没有任何变量）时，一切都很好。但是当我在该段中定义新变量时，一些原始的额外符号开始出现如下：[http ://board.flatassembler.net/files/err_758.png](http://board.flatassembler.net/files/err_758.png)

那你能帮帮我吗？我的错误在哪里？也许我选择了错误的方式来实现我想要的东西？请帮忙....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:31:31.550

据我了解，这是因为 int 21h 预计 _DATA@16 段中的偏移量而不是 _CODE@16 段中的偏移量。因此，最简单的方法 - 在程序中仅使用一个段或仅使用 .com 文件。这是示例：

```
use16
org 0x100

macro prints [str*]
{
    pusha

    if str in <0xd, 0xa, 9>\
        | str eqtype ''

        call @f
        db str, 0x24

        @@:
            pop dx
    else
        mov dx, str
    end if

    mov ah, 9
    int 0x21

    popa
}

_start:
    prints 0xd, 0xa, 9
    prints 'hi!', 0xd, 0xa
    mov ax, msg
    prints ax, 0xd, 0xa
    prints msg

    int 0x20
ret

msg db 'hey there!', 0x24 
```

它可以直接接受字符串、寄存器和变量中字符串的地址。它还可以处理 3 个特殊字符 - 0xd (CR)、0xa (LF) 和 9 (TAB)。

如果我找到在多段程序中直接显示字符串的方法，我会发布答案。

# seo - Googlebot 会自动尝试为 sitemap.xml 编制索引吗？

> ID：14964367
> 
> 赞同：3
> 
> 时间：2013-02-19T18:05:29.120
> 
> 标签：seo, sitemap, googlebot

如果我的 sitemap.xml 文件未提交给 Google，Googlebot 会自动尝试为 sitemap.xml 编制索引吗？例如，如果碰巧该文件在那里，Googlebot 会尝试索引[http://www.example.com/sitemap.xml吗？](http://www.example.com/sitemap.xml)

Google 的资源说要提交，但 Googlebot 所做的是一个单独的问题。 [http://support.google.com/sites/bin/answer.py?hl=en&answer=100283](http://support.google.com/sites/bin/answer.py?hl=en&answer=100283)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:11:09.043

站点地图文件可以有任何名称和路径。所以，我不认为谷歌会寻找它，如果它没有在 robots.txt 中明确指定。

```
User-agent: *
Sitemap: sitemap.xml 
```

# javascript - 更改事件后动态选择菜单不起作用

> ID：14964372
> 
> 赞同：2
> 
> 时间：2013-02-19T18:05:43.773
> 
> 标签：javascript, meteor

我试图制作一个动态选择菜单，您可以在其中选择客户，然后过滤该客户的联系人。

当我选择客户时，它会正确过滤联系人，但客户选择菜单未显示任何已选择的内容。

```
<template name="newLeadForm">

<form id="lead">
    <fieldset>
        <legend>New Lead</legend>
        <br/>
        <select id="customer_id" class="span12">
            <option id="null" value="null">Select One</option>
            {{#each customers}}<option id="{{id}}" value="{{_id}}">{{name}} - {{city}}, {{state}} {{zip}}</option>{{/each}}
        </select>
        <select id="contact_id" class="span12">
            <option id="null" value="null">Select One</option>
            {{#each contacts}}<option id="{{id}}" value="{{_id}}">{{first_name}} {{last_name}}</option>{{/each}}
        </select>

        <input id="submit" type="submit" class="btn">
    </fieldset>
</form>

</template> 
```

这是提供给模板的数据

```
Template.newLeadForm.customers = function () {
return Customers.find();
};

Template.newLeadForm.contacts = function () {
console.log(Session.get("_customer_id"));
return Contacts.find({customer_id: Session.get("_customer_id")});
}; 
```

和事件处理程序

```
Template.insert.events({
'change form#lead #customer_id' : function (event) {
    customer = $("form#lead #customer_id").val();
    Session.set("_customer_id", $("form#lead #customer_id").val());

},

'submit form#lead' : function (event) {

    if (event.type === 'click' || event.type === 'submit') {

        event.preventDefault();

        var customer_id = $("#customer_id").val();
        var contact_id = $("#contact_id").val();
        var lead_source_id = $("#lead_source_id").val();
        var lead_number = $("#lead_number").val();

        if(Leads.insert({id: Leads.find().count() + 1, customer_id: customer_id, contact_id: contact_id})) {
            $("#customer_id").val(null);
            $("#contact_id").val(null);
            Session.set("_customer_id", null);
        }   
    }
}   
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:22:37.487

在 Meteor 重新渲染你的 select 元素中的 option 元素后，你应该告诉它设置`selectedIndex`select 元素上的属性，以便它更新。您可以对`rendered`事件执行此操作：

```
Template.newLeadForm.rendered = function() {
  $("#customer_id")[0].selectedIndex = 5; // possibly track the index so you know what to set it to
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T06:19:48.513

简单的解决方法：

```
Template.newLeadForm.rendered = function(){
  $('#customer_id').val(Session.get("_customer_id"))
} 
```

由于`newLeadForm`依赖于 Session["_customer_id"]，所以每当 Session["syntax"] 改变时都会重新渲染，因此每次 Session["syntax"] 改变时`template.hello.rendered`都会被调用。

* * *

另一种选择是，您可以为要保持更新的每个选择添加自动运行：

```
if (Meteor.isClient){
  Meteor.startup(function() {
    Deps.autorun(keep_cust_select_updated)
  })

  function keep_cust_select_updated(){
    $('#customer_id').val(Session.get("_customer_id"))
  }
} 
```

每当`Session.set("_customer_id", xxxx)`调用时，keep_select_updated 将重新运行（因为它依赖于`Session.get("_customer_id")`）并且将选择正确的值（通过 jQuery`$('#customer_id').val(...)`调用）。

后一种方法的优点是您不需要`"selected"`为每个正确添加到 html 中`<option>`

# java - Java getDesktop().open 适用于 Windows，但不适用于 Mac

> ID：14964376
> 
> 赞同：0
> 
> 时间：2013-02-19T18:05:55.150
> 
> 标签：java

我正在使用 Windows 进行编程，并且为了打开我的文件，我使用了下面的代码，它总是运行良好。

```
File file2 = new File(folderChooser + File.separator + "TargetApp" + File.separator + name + File.separator + "index.html");
                    Desktop.getDesktop().open(file2); 
```

现在我正在使用 macbook 进行编程，这段代码不再起作用，并且出现以下异常：

```
java.awt.HeadlessException
    at java.awt.Desktop.getDesktop(Desktop.java:142)
    at br.com.facilit.target.app.desktop.view.MainViewController.btnAbrirOffline(MainViewController.java:709)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1435)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:69)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:217)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:170)
    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:38)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:37)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:53)
    at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:28)
    at javafx.event.Event.fireEvent(Event.java:171)
    at javafx.scene.Node.fireEvent(Node.java:6863)
    at javafx.scene.control.Button.fire(Button.java:179)
    at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:193)
    at com.sun.javafx.scene.control.skin.SkinBase$4.handle(SkinBase.java:336)
    at com.sun.javafx.scene.control.skin.SkinBase$4.handle(SkinBase.java:329)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:64)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:217)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:170)
    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:38)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:37)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:53)
    at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:33)
    at javafx.event.Event.fireEvent(Event.java:171)
    at javafx.scene.Scene$MouseHandler.process(Scene.java:3324)
    at javafx.scene.Scene$MouseHandler.process(Scene.java:3164)
    at javafx.scene.Scene$MouseHandler.access$1900(Scene.java:3119)
    at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1559)
    at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2261)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:228)
    at com.sun.glass.ui.View.handleMouseEvent(View.java:528)
    at com.sun.glass.ui.View.notifyMouse(View.java:922) 
```

如何使用mac在浏览器中打开一个html文件？

# css - 突出显示 JavaFx 标签中的文本

> ID：14964378
> 
> 赞同：0
> 
> 时间：2013-02-19T18:05:57.187
> 
> 标签：css, colors, label, javafx-2

我正在尝试使用以下 CSS 将 JavaFx 标签文本的文本背景设置为绿色

```
label.setStyle("-fx-background-color:rgba(85, 255, 68,0.7);); 
```

并使用以下内容取消突出显示

```
label.setStyle("-fx-background-color:rgba(0,0,255,0);"); 
```

然而，当它必须背靠背完成时，这些方法在大多数情况下都不起作用。

有没有办法在不使用 CSS 的情况下设置样式，即使用 JavaFx API 本身。我发现 label.textFill(Paint p) 用于文本颜色，但没有找到背景颜色，即标签本身的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:23:46.977

> 有没有办法在不使用 CSS 的情况下设置样式，即使用 JavaFx API 本身。

对于某些样式（如文本填充）是的。对于背景颜色、背景图像、边框等 API 方法在 JavaFX 8 发布之前将不可用（有关更多信息，请参阅JavaFX 问题跟踪器中的[区域背景和边框的公共 API](http://javafx-jira.kenai.com/browse/RT-24506) - 任何人都可以注册访问）。

> 这些在大多数情况下都不起作用，因为它必须背靠背完成。

如果您只是突出显示一个标签，然后再次取消突出显示它，而不使用像[PauseTransition](http://docs.oracle.com/javafx/2/api/javafx/animation/PauseTransition.html)之类的东西来给用户一些时间来查看突出显示的标签，那么，从用户的角度来看，什么都不会发生，因为用户将看到的只是一个未突出显示的标签.

* * *

不确定您的用例，但如果您只想突出显示标签中的部分文本或让用户用鼠标突出显示文本，那么您可以使用可编辑设置为 false的[TextField 。](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TextField.html)

* * *

*可能的解决方法*

如果[Java 8 预览版](http://jdk8.java.net/download.html)不适合您，并且由于 JavaFX CSS 处理中的错误而遇到错误，请尝试在 StackPane 中放置一个窗格，然后放置一个标签。设置窗格的背景颜色以`label.setStyle("-fx-background-color:rgba(85, 255, 68,0.7););`将窗格的首选宽度和高度绑定到标签的宽度和高度，并根据需要在窗格上切换 setVisible。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T17:55:55.117

最后我找到了解决方法。我必须给一个[PauseTransition](http://docs.oracle.com/javafx/2/api/javafx/animation/PauseTransition.html)让系统在取消突出显示和突出显示之间有一些时间。如果标签已经突出显示，CSS 只有在 pausetransaction 之后才会显示效果。我认为这可能是一个错误。我会提交一个jira。暂停转换的持续时间可能低至 1 毫秒，因此从用户的角度来看没有滞后。

# c# - 通过嵌套 ListView asp.net 进行双重过滤

> ID：14964380
> 
> 赞同：0
> 
> 时间：2013-02-19T18:06:11.180
> 
> 标签：c#, asp.net, linq, entity-framework

我正在尝试`ListViews`在我的网站导航中使用嵌套来使其动态化。目标是让第一个 ListView 显示所有类别，然后嵌套一个将显示品牌。

因此，如果我们有一个产品要在哪里销售，您可以单击 Sneakers 以填充所有 Sneakers，然后单击 Nike 等品牌仅过滤 Nike Sneakers。

到目前为止，通过传入查询字符串，Category(Sneakers) 已经能够做到这一点。现在我想通过该查询字符串传递两个参数，我遇到的问题是如何从父级中提取第一个值参数`ListView`以添加到嵌套的参数中`ListView`？这可能吗？

如此简短地解释我为什么要这样做。我有一个包含类别和品牌属性的产品表。我想按类别和品牌进行过滤，并使用这些嵌套`ListViews`来传递参数。

```
 <asp:ListView ID="categoryList"
            ItemType="E_Store_Template.Models.Category"
            runat="server"
            SelectMethod="GetCategories">

            <ItemTemplate>
                <asp:HyperLink  runat="server" NavigateUrl="<%# GetCatValidUrl( Item.CategoryID ) %>"
                  ID="testlink" Text="<%#: Item.CategoryName %>" />

                <ul style="list-style-type: none;">
                    <li>
                       <asp:ListView ID="brandList" ItemType="E_Store_Template.Models.Brand" runat="server"
                            SelectMethod="GetProductsmain">
                            <ItemTemplate>
                                <ul>
                                    <li>
                                        //Below i cannot use Item.CategoryName
                                        //because of the Itemtype=my brand type.

                                <asp:HyperLink  runat="server" NavigateUrl="<%# GetCatBraValidUrl(Item.CategoryName, Item.BrandID) %>"
                  ID="testlink" Text="<%#: Item.BrandName %>" />

                                    </li>
                             </ul>
                            </ItemTemplate>
                        </asp:ListView>

                </li>
                </ul>
            </ItemTemplate>

        </asp:ListView> 
```

第一次制作其中一个，因此非常感谢任何提示。即使这是错误的方法，我也想学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:16:02.350

在你的代码隐藏中，修改

```
GetProductsmain() 
```

根据当前选中的项目返回一个列表

```
categoryList 
```

[各自的 ListView 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.aspx)

# ios - 向下钻取，UITableView 和 GridView

> ID：14964385
> 
> 赞同：1
> 
> 时间：2013-02-19T18:06:22.473
> 
> 标签：ios, objective-c, uitableview, gridview, drilldown

我有一个带有 UITableView 和 NavigationController 的 UIViewController 来实现向下钻取导航系统。用户可以浏览文件夹和文档的层次结构。

我正在使用 NSFetchedResultController 从数据库中填充 UITableView。

我想添加使用 GridView (fe: AQGridView) 浏览层次结构的选项。这个想法是在导航栏上有一个按钮，用于在 tableView 和 gridView 之间切换。

问题/问题1：

以编程方式从带有表格的控制器切换到带有网格的控制器的最佳方式是什么？

问题/问题2：

切换后，如果导航控制器中还有其他控制器被推入，用户返回，这些视图控制器将原封不动地呈现出来。如何更新这些视图控制器？例如：用户从表格切换到网格，然后返回，弹出当前控制器后，用户再次看到表格 -> 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:31:34.670

在显示层次结构的顶层（UITableView）的地方，您需要在请求时添加 UITableView 或网格视图作为子视图。

您将向视图控制器添加方法：

```
-(void)displayAsGridView {
    // hide/remove the table view
    // populate the grid view and display
}

-(void)displayAsTableView {
    // remove or hide grid view
    // make sure the table view exists, if not, create it
    [self.tableView reloadData];
} 
```

在表的数据源中：

```
-(UITableViewCell*)tableView:(UITaleView*)tableView cellForRowAtIndexPath:(IndexPath*)indexPath {
    // you populate the view cell as you would for any other table
} 
```

您可以在 IB 中或完全通过代码创建这两者，以最适合您的方式创建。关键是，您不会将其中任何一个推送到导航控制器上，只是为了重新安排信息的显示方式。

# javascript - 检测 iframe 何时关闭

> ID：14964386
> 
> 赞同：1
> 
> 时间：2013-02-19T18:06:30.837
> 
> 标签：javascript, html, dom, iframe

我们正在使用 Salesforce 并嵌入了 iframe，这些 iframe 显示了我们开发的另一个应用程序的内容。当用户在我们的 iframe 中处理字段并失去对它们的关注时，iframe 脚本会将他们的输入保存回我们的系统。但是，在某些情况下，用户在我们的某个字段中输入数据，但从未失去焦点，然后指示外部 salesforce shell 导航到不同的页面。这导致我们的字段永远不会保存，因为它永远不会失去焦点。

因此，对于 iframe，是否有某种卸载事件可以附加到并检测是否需要在页面使用另一个 Salesforce 视图刷新之前进行保存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T12:05:45.497

您可以在自定义应用程序中使用以下代码。

```
window.onbeforeunload = function(event) {
    event = event || window.event;
    var confirmClose = 'Are you sure?';
    // For IE and Firefox prior to version 4
    if (event) {
       event.returnValue = confirmClose;
    }
    // For Safari
    return confirmClose;
} 
```

# django - Django REST：此函数的关键字参数无效

> ID：14964390
> 
> 赞同：0
> 
> 时间：2013-02-19T18:06:41.663
> 
> 标签：django, django-rest-framework

使用[REST Framework](http://django-rest-framework.org)，在进行 POST 时出现以下错误...

```
TypeError at /api/profiles/
'attribute_answers' is an invalid keyword argument for this function 
```

PUT 似乎没有任何问题。

**串行器**

```
class ProfileSerializer(serializers.ModelSerializer):
    user = serializers.SlugRelatedField(slug_field='username')
    attribute_answers = serializers.PrimaryKeyRelatedField(many=True)

    class Meta:
        model = Profile
        depth = 2
        fields = ('id', 'name', 'active', 'type', 'user', 'attribute_answers')

    def restore_object(self, attrs, instance=None):
        """
        Create or update a new snippet instance.

        """
        if instance:
            # Update existing instance
            instance.name = attrs.get('name', instance.name)
            instance.active = attrs.get('active', instance.active)
            instance.type = attrs.get('type', instance.type)
            instance.attribute_answers = attrs.get('attribute_answers', instance.attribute_answers)
            return instance

        # Create new instance
        return Profile(**attrs) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T10:38:01.350

您的`restore_object`方法错误地尝试传递`attribute_answers`给`Profile`构造函数。

碰巧的是，由于您正在使用`ModelSerializer`您根本不需要该`restore_object`方法 - 模型实例恢复将为您处理。该`restore_object`方法仅对基本`Serializer`类是必需的。

# c# - 画布动画 - 不循环工作

> ID：14964391
> 
> 赞同：2
> 
> 时间：2013-02-19T18:06:46.750
> 
> 标签：c#, wpf, xaml

您好，我无法理解我遇到的问题

```
private void StartReplay(object sender, RoutedEventArgs e)
    {
        for (int i = 0; i <= 40; i++)
        {
            if (leftCounter < 20)
            {
                leftCounter++;
                leftCounter2 = leftCounter;
                Canvas.SetLeft(Kwadracik, leftCounter);
            }
            else
            {
                leftCounter2--;

                Canvas.SetLeft(Kwadracik, leftCounter2);
            }
        }
    } 
```

现在有2种方式

1）如果我删除循环而不是每次单击按钮时 leftCounter 将增加 1 并且画布将被移动。20 向右比向左尽可能多的点击我会做的。它按预期工作。先靠右比靠左

2）当我单击按钮时使用循环运行它时，循环将开始。但它不会像我期望的那样工作。我预计它会向右移动 20 次，向左移动 20 次（20+20 = 40）。但不是。它不会在两侧移动。它只是站立，因为它正在跳到最后。我看不到右边的移动。即使我会在每个循环步骤上得到小的延迟，GUI 也会冻结，并且在循环结束后它会解冻并且元素位于它所在的位置

为什么会有这种差异？我怎样才能超越它？

支持此的 XAML

```
 <Canvas x:Name="canvas" HorizontalAlignment="Center" VerticalAlignment="Center">
        <Rectangle Name="Kwadracik" Width="20" Height="20" Canvas.Left="0" Canvas.Top="0" Fill="Blue" />
    </Canvas> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:14:04.740

这是因为您可能正在从 GUI 线程调用 StartReplay。只有在您的函数完成后，线程处理才会继续。换句话说，在您的功能完成之前，GUI 无法处理您的更改。当您在也是 gui 线程的按钮单击处理程序中进行更改时，您将退出您的函数并在该 gui 反映更改之后。这就是为什么第一种方法可以点击点击的原因。

您可以做的是启动工作线程并在那里进行修改，或者因为这似乎是类似动画的行为，请使用 Timers。

**更新：** 示例 1：

DispatcherTimer 在调用线程中执行回调。

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Threading;

namespace CanvasAnimation
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        DispatcherTimer uiTimer;
        double directionDelta = 1.0;

        public MainWindow()
        {
            InitializeComponent();
            uiTimer = new DispatcherTimer(); //This timer is created on GUI thread.
            uiTimer.Tick += new EventHandler(uiTimerTick);
            uiTimer.Interval = new TimeSpan(0, 0, 0, 0, 1000/25); // 25 ticks per second
            uiTimer.Start();
        }

        private void uiTimerTick(object sender, EventArgs e)
        {
            double currentLeft = Canvas.GetLeft(Kwadracik);

            if (currentLeft < 0)
            {
                directionDelta = 1.0;
            }
            else if (currentLeft > 80)
            {
                directionDelta = -1.0;
            }

            currentLeft += directionDelta;

            Canvas.SetLeft(Kwadracik, currentLeft);
        }
    }
} 
```

示例 2：使用简单计时器

```
 using System;
using System.Threading;
using System.Windows;
using System.Windows.Controls;

namespace CanvasAnimation
{
    /// <summary>
    /// Interaction logic for WorkerTimer.xaml
    /// </summary>
    public partial class WorkerTimer : Window
    {
        Timer timer;
        double directionDelta = 1.0;

        public WorkerTimer()
        {
            InitializeComponent();
            timer = new Timer(this.timerTick, this, 0, 1000 / 25); // 25 fPS timer
        }

        protected void timerTick(Object stateInfo)
        {
            //This is not a GUI thread!!!!
            //So we need to Invoke delegate with Dispatcher
            this.Dispatcher.Invoke(new MoveCanvasDelegate(this.moveCanvas), null);
        }

        protected delegate void MoveCanvasDelegate();
        protected void moveCanvas()
        {
            //This function must be called on GUI thread!!!

            double currentLeft = Canvas.GetLeft(Kwadracik);

            if (currentLeft < 0)
            {
                directionDelta = 1.0;
            }
            else if (currentLeft > 80)
            {
                directionDelta = -1.0;
            }

            currentLeft += directionDelta;

            Canvas.SetLeft(Kwadracik, currentLeft);
        }
    }
} 
```

同样的技术适用于 BackgroundWorker 或其他非 GUI 线程。

# c++ - avr linker++ 设置头文件和 .cpp 文件

> ID：14964394
> 
> 赞同：0
> 
> 时间：2013-02-19T18:07:01.473
> 
> 标签：c++, c, eclipse, optimization, arduino

我想正确设置链接器，以便 Eclipse 项目可以正常工作。我已将我的头文件和 cpp 文件所在的文件夹添加到 c/c++ 编译器目录。我还必须设置链接器。我不知道如何导致工具设置中的链接器想要添加一个库（一个不存在的 .a 文件，因为没有一个文件），所以因为我没有任何 .a 文件，所以我在函数中出错了我可以将文件夹路径提供给链接器，但里面没有 .a 文件。我能做些什么。

# php - 如何通过 MySQL 表将 Python 列表转换为 PHP 数组

> ID：14964399
> 
> 赞同：1
> 
> 时间：2013-02-19T18:07:20.103
> 
> 标签：php, python, mysql, arrays, list

我继承了一个 MySQL 数据库，其中表中的一个字段返回一个曾经是 Python 列表的字符串，所以我得到如下内容：

```
$test = "[u'Person 1', u'Person 2']"; 
```

什么是最干净/最简单/最好/最简单（我不知道如何表达）将这些数据返回到 PHP 中的数组？我正在使用 PHP4，但如有必要，我可以升级到 PHP5.4。

我没有太多的 PHP 编程经验，我的第一个想法是做这样的事情：

```
$new = explode(",",$test); 
```

这种工作，但之后需要清理（例如，数组的每个元素前面至少有 u' ）并且如果任何元素包含逗号，显然很脆弱。

有没有更清洁/更容易/更好/更简单的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T18:18:47.973

最好的办法是编写一个 Python 脚本，用 JSON 更新 mysql 数据存储，几乎所有语言都可以轻松解析它。（正如@Hugo Dozois 指出的）

就个人而言，我不会尝试在 PHP 中阅读此内容。您展示的示例在一个平面列表中有 2 个 unicode 字符串......但随着时间的推移，您可能会遇到更多问题和边缘情况。你可能有一些 unicode 字符串、其他字节字符串、一些数字……甚至可能是嵌套列表或字典。

如果你没有继承它，并且 100% 确定发生了什么——那么当然，你可以解析东西。但是编写和运行将其转换为 JSON 并解决所有问题的 Python 脚本应该花费不到 5 分钟的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T18:16:05.117

您可以使用[`preg_match_all`](http://php.net/manual/en/function.preg-match-all.php)并执行以下操作：

```
$test = "[u'Person 1', u'Person 2']";

preg_match_all('/u\'(.*?)\'/', $test, $matches);

var_dump($matches);

/*
array(2) { 
[0]=> array(2) { 
    [0]=> string(11) "u'Person 1'" 
    [1]=> string(11) "u'Person 2'" } 
[1]=> array(2) { 
    [0]=> string(8) "Person 1" 
    [1]=> string(8) "Person 2" 
    } 
} 
*/ 
```

# vb.net - Reportviewer 缺少数据源

> ID：14964401
> 
> 赞同：0
> 
> 时间：2013-02-19T18:07:26.517
> 
> 标签：vb.net, datasource, reportviewer

我创建了一个数据集，其中包含我的 SQL 数据库中名为“BillHeaders”的表

这是我的报告查看器的样子，它将包含两个报告。一个包含工作编号和描述，另一个包含工作编号、描述和合同编号。 ![报告查看器](../Images/7522a38278ff7214ccb6953b9cee69b4.png)

这是我将执行任一报告的按钮

![两种类型的报告](../Images/b1eecac2ec4d3686853b03ebf49b831c.png)

这是我的“报告”文件夹中的报告。两者都已构建并准备就绪。 ![报告文件夹](../Images/10d8252bad8af1862df46757f37f2fc0.png)

不幸的是，当我使用此代码时（分别针对每个按钮）：

```
Private Sub btnJobNoDesc_Click(sender As System.Object, e As System.EventArgs) Handles btnJobNoDesc.Click
    'Reset the viewer
    frmReportViewer.ReportViewer1.Reset()

    'Dim the required datasources. Need a seperate ReportDatasource for each table in the report
    Dim ReportDataSource1 As Microsoft.Reporting.WinForms.ReportDataSource = New Microsoft.Reporting.WinForms.ReportDataSource

    'Give datasource name and set the specific datatables
    ReportDataSource1.Name = "dsBillHeaders_BillHeaders"
    ReportDataSource1.Value = frmReportViewer.dsBillHeaders.BillHeaders

    'Clear the datasources in the report and add the new ones
    frmReportViewer.ReportViewer1.LocalReport.DataSources.Clear()
    frmReportViewer.ReportViewer1.LocalReport.DataSources.Add(ReportDataSource1)

    frmReportViewer.ReportViewer1.LocalReport.ReportEmbeddedResource = "ReportViewer_Tutorial.rptJobNoDesc.rdlc"
    frmReportViewer.ReportViewer1.RefreshReport()

    frmReportViewer.Show()
End Sub 
```

我得到这个结果： ![结果](../Images/8f9d83c73bdeb55b194a9ced7510fbc2.png)

我的数据源做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:54:10.707

一方面，您没有将处理模式设置为本地

这是有效的代码，当我创建报告时，我确保报告中的数据源名称与我的数据集的表名称相对应，不确定是否需要这样做，但它使事情变得更简单。

```
 _reportViewerNewContracts.ProcessingMode = Microsoft.Reporting.WinForms.ProcessingMode.Local
        _reportViewerNewContracts.LocalReport.ReportPath = "Reports\NewContractsReport.rdlc"

        Dim reportDataSource1 As New Microsoft.Reporting.WinForms.ReportDataSource()
        reportDataSource1.Name = _contractDataset.NewContracts.TableName
        'Name of the report dataset in our .RDLC file
        reportDataSource1.Value = _contractDataset.NewContracts

        Me._reportViewerNewContracts.LocalReport.DataSources.Add(reportDataSource1)
        'fill data 
        _reportViewerNewContracts.RefreshReport() 
```

（我见过很多网站推荐数据集名称下划线表名，但对我来说从来没有用过）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:36:33.373

这是我发现的：

```
Private Sub btnJobNoDesc_Click(sender As System.Object, e As System.EventArgs) Handles btnJobNoDesc.Click
    'Reset the form
    Dim rv As New frmReportViewer

    'Reset the viewer
    rv.ReportViewer1.Reset()

    Dim ds As New dsBillHeaders
    Dim ta As New dsBillHeadersTableAdapters.BillHeadersTableAdapter
    ta.Fill(ds.BillHeaders)

    rv.ReportViewer1.LocalReport.ReportEmbeddedResource = "ReportViewer_Tutorial.rptJobNoDesc.rdlc"
    rv.ReportViewer1.LocalReport.DataSources.Clear()
    Dim sReportDataSource As ReportDataSource
    sReportDataSource = New ReportDataSource()
    sReportDataSource.Name = "dsBillHeaders"
    sReportDataSource.Value = ds.BillHeaders
    rv.ReportViewer1.LocalReport.DataSources.Add(sReportDataSource)

    rv.ReportViewer1.RefreshReport()
    rv.Show()
End Sub 
```

使用此代码，我只需更改 ReportEmbeddedResource、sReportDataSource.Value 和数据集上的报告名称（如有必要）即可生成多个表单。

# bash - 生成服务器并等待，在 SIGHUP 上重复

> ID：14964402
> 
> 赞同：0
> 
> 时间：2013-02-19T18:07:26.523
> 
> 标签：bash, shell, signals

我正在尝试编写一个脚本，它将启动我的（节点）开发服务器，并且每当它收到一个`SIGHUP`它应该重新启动服务器。

我已经生成了服务器，将其关闭并在`SIGHUP`. 但是因为我`wait`在生成代码中使用，`SIGHUP`处理程序永远不会真正返回，这导致信号永远不会再次触发。

这是我的脚本的精简版：

```
SERVER_PID=""

start_server() {
    npm start &
    SERVER_PID=$!
    wait $SERVER_PID
}
terminate_server() {
    [ ! "xSERVER_PID" = "X" ] && kill -SIGTERM $SERVER_PID
    SERVER_PID=""
}
refresh_server() {
    terminate_server
    start_server
}

trap refresh_server SIGHUP
start_server 
```

正如我所提到的，它可以很好地启动服务器，并且在 first 上按预期工作`SIGHUP`，但是由于in`refresh_server`永远不会返回，因此后续信号不会触发任何操作。`wait``start_server`

现在，我已经通过取出`wait`in解决了这个问题`start_server`，并在底部添加了一个无限的“while-true-sleep”循环（在初始调用之后`start_server`），但我确信必须有更好的方法来完成我想要达到的目标。此外，我不喜欢睡眠循环方法导致的信号触发延迟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:47:48.867

while-true-wait 循环怎么样？

```
#!/bin/bash
SERVER_PID=""
SERVER_NAME="npm start"

start_server() {
    $SERVER_NAME &
    SERVER_PID=$!
    SERVER_ACTIVE=true
}
terminate_server() {
    [ ! "xSERVER_PID" = "X" ] && kill -SIGTERM $SERVER_PID
    SERVER_PID=""
}
refresh_server() {
    terminate_server
    start_server
}

trap refresh_server SIGHUP
start_server
while $SERVER_ACTIVE; do
  SERVER_ACTIVE=false
  wait $SERVER_PID
done 
```

如果应该重复，则需要某种等待事件循环，无论是在脚本中显式地还是隐藏在 bash 中的某个地方

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T00:47:05.510

## bash 下的信号陷阱

### 从异常返回

就像在其他编程语言中使用信号一样，信号捕获很容易以错误的方式完成；

使用时，`trap`您不必**在****陷阱**评估中处理您的函数，而只需设置一个*标志*，*主程序可以在**陷阱异常*结束后检查，以尽可能缩短*异常执行时间。*

特别是，您不必**在**陷阱执行级别启动`fork`子进程！

### 一个正确的例子

```
#!/bin/bash

SERVER_PID=""
CMD_TRAP=""

npm() { #Doing something that could be checked from external
    if [ "$1" ] && [ "$1" == "start" ] ;then
    while :;do
        date "+%s%N" >/tmp/dummyfile.txt
        sleep .333
          done
    fi
}

start_server() {
    npm start &
    SERVER_PID=$!
}
terminate_server() {
    [ "$SERVER_PID" ] && ps $SERVER_PID &>/dev/null && kill -TERM $SERVER_PID
    SERVER_PID=""
}
refresh_server() {
    terminate_server
    start_server
}

printf "for:\n   server restart, hit: 'kill -USR2 %d'\n" $$
printf "   server stop, hit: 'kill %d' (or Ctrl+C)\n" $$

trap 'CMD_TRAP=refresh' USR2 HUP
trap 'CMD_TRAP=terminate' TERM INT

start_server
while [ "$SERVER_PID" ];do 
    wait $SERVER_PID
    case "$CMD_TRAP" in
        refresh   ) refresh_server   ;;
        terminate ) terminate_server ;;
        *         ) refresh_server   ;;        # in case server just end.
      esac;
    CMD_TRAP=""
    [ "$SERVER_PID" ] && echo "LOOP." || echo "EXIT."
  done 
```

### 特征

这个演示脚本做：

*   服务将在脚本启动时启动，
*   `USR2`如果收到一个或一个`HUP`信号，服务将重新启动，
*   如果它刚刚完成或收到任何信号，服务将重新启动并且
*   服务将正确停止`TERM`是收到信号或
    *   如果`Ctrl-C`在控制台上被击中。
*   异常处理正确（立即返回主程序）
*   没有不需要的/非托管的错误消息

### 输出样本

> ***窗口1***

```
tty
/dev/pts/0 
```

> ***窗口2***

```
ps --tty pts/0 fw
  PID TTY      STAT   TIME COMMAND
 2996 pts/0    Ss     0:01 bash
 5187 pts/0    S+     0:00  \_ bash 
```

> ***窗口1***

```
./serverScript.sh 
for:
   server restart, hit: 'kill -USR2 11469'
   server stop, hit: 'kill 11469' (or Ctrl+C) 
```

> ***窗口2***

```
ps --tty pts/0 fw
  PID TTY      STAT   TIME COMMAND
 2996 pts/0    Ss     0:01 bash
 5187 pts/0    S      0:00  \_ bash
11469 pts/0    S+     0:00      \_ /bin/bash ./servermon.sh
11470 pts/0    S+     0:00          \_ /bin/bash ./servermon.sh

cat /tmp/dummyfile.txt 
1361603642256133674

cat /tmp/dummyfile.txt 
1361603648712606114

    ps --tty pts/0 fw
  PID TTY      STAT   TIME COMMAND
 2996 pts/0    Ss     0:01 bash
 5187 pts/0    S      0:00  \_ bash
11469 pts/0    S+     0:00      \_ /bin/bash ./servermon.sh
11470 pts/0    S+     0:01          \_ /bin/bash ./servermon.sh
16814 pts/0    S+     0:00              \_ sleep .333

kill -USR2 11469 
```

> ***窗口1***

```
LOOP. 
```

> ***窗口2***

```
 ps --tty pts/0 fw
  PID TTY      STAT   TIME COMMAND
 2996 pts/0    Ss     0:01 bash
 5187 pts/0    S      0:00  \_ bash
11469 pts/0    S+     0:00      \_ /bin/bash ./servermon.sh
17152 pts/0    S+     0:00          \_ /bin/bash ./servermon.sh
17532 pts/0    S+     0:00              \_ sleep .333

cat /tmp/dummyfile.txt
1361604208069564188
cat /tmp/dummyfile.txt
1361604209103660589

kill -USR2 11469 
```

> ***窗口1***

```
LOOP. 
```

> ***窗口2***

```
cat /tmp/dummyfile.txt
1361604278583723517

cat /tmp/dummyfile.txt
1361604279605292149

kill 11469 
```

> ***窗口1***

```
EXIT.
$ 
```

窗口 1 终止循环**和**服务器子进程。

> ***窗口1***

```
./serverScript.sh 
for:
   server restart, hit: 'kill -USR2 19232'
   server stop, hit: 'kill 19232' (or Ctrl+C) 
```

然后如果`Ctrl`+`C`被按下：

> ***窗口1***

```
^CEXIT.
$ 
```

> ***窗口2***

```
ps --tty pts/0 fw
  PID TTY      STAT   TIME COMMAND
 2996 pts/0    Ss     0:01 bash
 5187 pts/0    S+     0:00  \_ bash 
```

### 解释

无法堆叠异常。因此，在执行异常时，可以忽略另一个中断：

如果对于示例，这可能变得很重要，您的`refresh_server()`函数必须在重新启动服务器之前压缩和轮换一些日志：

```
refresh_server() {
    terminate_server
    lockedfilename=-$(date +%F_%H-%M-%S-$$)
    mv /srv/logfile /srv/logfile-$lockedfilename
    gzip /srv/logfile-$lockedfilename
    start_server
} 
```

许多中断可以在主循环中汇总或忽略，但处理必须仅在主级别完成。

有一个关于问题所在的小演示：

> ***窗口1***

```
trap "echo USR2 sleep 4;sleep 4" USR2
while :;do printf "\r%s " $(date +%s%N);sleep .333;done
1361606565xxxxxxxxx 
```

（`xxxxxxxxx`改变 3x / 秒）

> ***窗口2***

```
for ((i=5;i--;));do echo KILL;kill -USR2 5187;sleep .5;done
KILL
KILL
KILL
KILL
KILL

1361606722582175969 USR2 sleep 4
USR2 sleep 4
1361606770xxxxxxxxx 
```

我的循环中只有两个超过五次的中断被困住。

如果您搜索解释：5 x 0,5 = 2,5 秒。它远少于 4 秒睡眠，那么为什么我收到第二个中断，但不是全部五个？

### 在主循环中解开陷阱

在主循环中解开陷阱有一个小技巧：

```
while [ "$SERVER_PID" ];do 
    wait $SERVER_PID

    OLDIFS="$IFS" IFS=$'\n'
    TRAPS=($(trap))                            # save traps
    IFS="$OLDIFS"
    eval "$(printf "trap -- %s\n" ${TRAPS[@]##*\'})"  # untrap

    case "$CMD_TRAP" in
        refresh   ) refresh_server   ;;
        terminate ) terminate_server ;;
        *         ) refresh_server   ;;        # in case server just end.
      esac;
    CMD_TRAP=""
    if [ "$SERVER_PID" ]
    then echo "LOOP."
    else echo "EXIT."

        eval "$(printf "%s\n" "${TRAPS[@]}")"      # restore traps
    fi
  done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T01:16:47.283

这是一个带有尾递归 start_server 的解决方案，只需对您的代码进行少量更改。（删除一行并添加三行包含`HUPPED`）

```
HUPPED=false
SERVER_PID=""

start_server() {
    npm start &
    SERVER_PID=$!
    wait $SERVER_PID
    if $HUPPED; then HUPPED=false; start_server; fi
}
terminate_server() {
    [ ! "xSERVER_PID" = "X" ] && kill -SIGTERM $SERVER_PID
    SERVER_PID=""
}
refresh_server() {
    HUPPED=true
    terminate_server
    #start_server
}

trap refresh_server SIGHUP
start_server 
```

# logic - 自动定理证明程序 - 从哪里开始？

> ID：14964406
> 
> 赞同：4
> 
> 时间：2013-02-19T18:07:47.010
> 
> 标签：logic, theorem-proving

我是一名二年级学生，我的离散数学 2 任务是制作一个自动定理证明器。我必须在 4 周内制作一个适用于命题逻辑的简单证明程序（假设证明始终存在）。到目前为止，我已经用谷歌搜索了，但那里的材料在 4 周内真的很难理解。谁能推荐我一些适合初学者的书籍/网站/开源代码或一些有用的提示？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T22:49:42.470

注意：我将其标记为将其移至计算机科学站点，因为它们更多地位于那里的 ATP 之上。

如果您可以包含您所查看的内容以及它为什么对您没有帮助，那就太好了。然后我们可以找出什么可能对你更好。此外，如果您必须编写程序，那么了解您所知道的语言会有所帮助。我对此所做的大部分工作都是使用诸如 OCaml 或 F# 之类的函数式语言或诸如 Prolog 或 Mercury 之类的逻辑语言来完成的。

您看过John Harrison[的“实用逻辑和自动推理手册](http://www.cl.cam.ac.uk/~jrh13/atp/)” [（WorldCat）吗？](http://www.worldcat.org/oclc/244767230)我添加了[（WorldCat）](http://www.worldcat.org/oclc/244767230)链接，这样您就可以在当地图书馆找到这本书，而不是等待购买它，这会占用您大部分时间。

如果你看一下，你会在页面底部找到[OCaml代码，](http://www.cl.cam.ac.uk/~jrh13/atp/)[这里是 F#](http://code.google.com/p/haskellatp/issues/searchtips) [，这里](https://github.com/jack-pappas/fsharp-logic-examples/)是Haskell 。

如果您没有在 Wikipedia 上看到[ATP](http://en.wikipedia.org/wiki/Automated_theorem_proving)或[Proof Assistant](http://en.wikipedia.org/wiki/Proof_assistant)，您可能会得到一些代码和论文的线索。

# php - php my sql insert 命令没有添加第一列

> ID：14964411
> 
> 赞同：0
> 
> 时间：2013-02-19T18:08:04.940
> 
> 标签：php, mysql, sql-insert

我有这个脚本，但是 mysql 插入部分我有一个问题，脚本没有在 sql 表中插入第一列“DNS”，但确实插入了第二和第三列。我的错误是第一列逃脱的原因是什么。

```
<?php
if ($_SERVER['REQUEST_METHOD'] == 'POST')
{
    $all = implode(",",$_POST);
    $all = explode(",",$all);

    $insert = "INSERT INTO Cname VALUES (";    

    for ($x=0;$x<3;$x++)
    {
        $all[$x] = clean($all[$x]);
        if ($all[$x] == "" || strlen($all[$x]) > 300)
            die("<p>Incorect Data Entry, Please check again! Column - " . $x);

        $insert .= "'" . $all[$x] . "',";
    }
    $insert .= "'')";

    $res = mysql_query($insert) or die(mysql_error());
    if($res)
        die("<p>Succesfully Added! <a href='index.php'>Back To View Page</a></p>");

} else {
    ?>
    <title>Add CNAME.</title>
    </head>
    <body>
    <?php include("nav.php");?>

    <div class="red"><p><h5>All fields are required.</h5></p></div>
    <table id="box-table-a"> 
    <tbody>
        <form action="" method="POST">
        <tr>
            <td>DNS</td>
            <!-- allow only the word CNAME  -->    
            <td><input type="text" name="DNS" placeholder="enter a word 'CNAME" required pattern="CNAME" title="enter a word 'CNAME' on this field"></td> 
        </tr>
        <tr>
            <td>name</td>
            <td><input type="text" name="name" placeholder="host with Full Domain Name" required  pattern="^[a-zA-Z0-9\-]*$" title="host with full Domain Name"></td>
        </tr>
        <tr>
            <td>alias</td>                                                                   
            <td><input type="text" name="alias" placeholder="only 3-15 digit are  allowed" required pattern="^[a-zA-Z0-9-_\-]{3,15}*$" title="only 3-15 digit are allowed"></td> 
        </tr>
        <tr>
            <td><input type="submit" value="Add Cname"></td>
            <td><input type="reset"></td>
        </tr>
    </tbody>
    </table>
    <?php
}
?> 
```

# java - 两个字符串语句的区别

> ID：14964419
> 
> 赞同：-3
> 
> 时间：2013-02-19T18:08:38.313
> 
> 标签：java

这两种说法究竟有什么区别

```
String s1="abc";
String s2=new String("abc"); 
```

据我所知，第一条语句将在字符串池中创建一个对象，即 s1 将冷藏它。在第二条语句中，它将创建两个对象，因为我使用了 new 关键字，而 s2 将引用字符串池中的对象

现在，如果我一个接一个地执行这两个语句。由于第一个语句，对象“abc”将在字符串池中，并且随着第二个语句的执行，s2 将引用在字符串池中已经存在的对象，如果我执行 s1= =s2 它应该返回 true，但是它返回 false。

你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T18:13:59.630

事实是`String s1="abc"`在字符串池中分配字符串，这是一个保存不可变字符串的特殊位置。您将无法直接修改，只能修改指向它`"abc"`的引用 ( )。`s1`

在第二种情况下`String s2=new String("abc")`，您正在分配一个真正的字符串对象，该对象内部有一个`char[]`存储字符串数据的缓冲区。它和第一个一样是不可变的，但它是堆上的一个对象。

当您比较时`s1 == s2`，由于您正在比较引用，因此它们是不同的，因为一个指向字符串池中的字符串（我实际上不确定是创建了包装对象还是使用了对池中对象的直接引用）而第二个指向您显式创建的对象（它包装了一个`char[]`存储数据的缓冲区）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:12:48.190

您正在创建两个不同的对象。s1 有自己的内存来保存它的引用地址。与 s2 相同。尽管这两个对象都指向字符串池中的同一个字符串，但对象本身是不同的。因此，s1==s2 将失败。

但是，s1.equals(s2) 将起作用，因为您正在比较字符串内容

# java - 使用 APPLICATION_FORM_URLENCODED 媒体类型与 Jersey 客户端进行 POST

> ID：14964420
> 
> 赞同：4
> 
> 时间：2013-02-19T18:08:37.307
> 
> 标签：java, jakarta-ee, jersey

我必须将*pojo发布到仅通过表单数据（* **MediaType.APPLICATION_FORM_URLENCODED** ）接受参数的服务器。我知道 jersey 客户端可以将对象转换为 xml、json 和其他类型，但尝试转换为 APPLICATION_FORM_URLENCODED 会出现异常，表明指定类型的正文编写器不可用。

有没有办法将对象序列化为 application_form_urlencoded MultivaluedMap，或者我必须手动逐个属性来形成结果 MultivaluedMap？根据问题上下文，创建适配器以使用球衣序列化在我看来并不是合适的解决方案。

**POST 对象**

```
@XmlRootElement
public class POSTableObject {
    private int a;
    private String b;

    public int getA() { return a; }
    public void setA(int a) { this.a = a; }
    public String getB() { return b; }
    public void setB(String b) { this.b = b; }
} 
```

**使用 Jersey 客户端发布操作**

```
ClientResponse response = client.resource(url).type(MediaType.APPLICATION_FORM_URLENCODED).accept(MediaType.APPLICATION_JSON).post(ClientResponse.class, postableObject); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T18:19:30.013

JAX-RS 提供者只需要提供到`application/x-www-form-urlencoded`for 的映射`MultivaluedMap<String,String>`。而且我很确定开箱即用的 Jersey 不会提供从`application/x-www-form-urlencoded`常规 POJO 到其他映射器的额外映射器。您可以编写自己的客户端提供程序，但根据您需要执行此操作的频率，您自己将 POJO 字段映射到 URL 字段可能更简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-20T09:56:44.110

您可以这样做，但首先您必须基于映射服务预期参数的表单 (javax.ws.rs.core.Form) 创建一个实体 (javax.ws.rs.client.Entity)：

```
Form input = new Form();
input.param("first_parameter", "value");
input.param("second_parameter", "value");
Entity<Form> entity = Entity.entity(input, MediaType.APPLICATION_FORM_URLENCODED);

ClientResponse response = client.resource(url).type(MediaType.APPLICATION_FORM_URLENCODED).accept(MediaType.APPLICATION_JSON).post(entity); 
```

# bash - 如果 ssh 不存在，bash 创建许多目录

> ID：14964422
> 
> 赞同：1
> 
> 时间：2013-02-19T18:08:46.497
> 
> 标签：bash, ssh, directory

我想在远程服务器 2 上创建许多服务器 1 上已经存在的目录。我在 server1 上的脚本：

```
LOG_DIR="/opt/server1/service/logs/"
DEST_HOST="server2"
DEST_USER="logger"
DEST_DIR="/volumes/storage/server1"

LISTEN_DIR=$(find $LOG_DIR -type d | tr '\n' ' ')

ssh $DEST_USER@$DEST_HOST " for Y in $LISTEN_DIR
                do
                    if [ ! -d  $DEST_DIR$Y ]; then
                        mkdir -p $DEST_DIR$Y;
                    fi
                done" 
```

但是在目录 /opt/server1/service/logs/ 中的 server1 上还有其他几个目录...脚本结果：

```
[20:00 root@server1:~]# bash -x script.sh
+ LOG_DIR=/opt/server1/service/logs/
+ DEST_HOST=server2
+ DEST_USER=logger
+ DEST_DIR=/volumes/storage/server1
++ find /opt/server1/service/logs/ -type d
++ tr '\n' ' '
+ LISTEN_DIR='/opt/server1/service/logs/ /opt/server1/service/logs/org.service-com.settlement.host.ui-1.0.0.SNAPSHOT /opt/server1/service/logs/com.springsource.server.repository.hosted-2.0.0.RELEASE /opt/server1/service/logs/org.service-com.xml2titp.ws-1.0.0.SNAPSHOT /opt/server1/service/logs/org.service-com.mportal.ws.oracle-1.0.0.SNAPSHOT /opt/server1/service/logs/access /opt/server1/service/logs/com.springsource.server.admin.web-2.0.0.RELEASE /opt/server1/service/logs/org.flex.web.plan-2 /opt/server1/service/logs/org.service-com.admin.host-1.0.0.SNAPSHOT /opt/server1/service/logs/org.service-com.tickets.ws-1.0.0.SNAPSHOT /opt/server1/service/logs/org.service-com.apijson.ws-1.0.0.SNAPSHOT /opt/server1/service/logs/apool_xyz.plan-2 /opt/server1/service/logs/org.service-com.json2titp.host.ui-1.0.0.SNAPSHOT /opt/server1/service/logs/server1 /opt/server1/service/logs/org.service-com.apijson.host.ui-1.0.0.SNAPSHOT /opt/server1/service/logs/org.flex.web.plan-2-org.service-com.flex.bundle.main-1.0.0.SNAPSHOT /opt/server1/service/logs/org.service-com.xyzsettlement.ws-1.0.0.SNAPSHOT /opt/server1/service/logs/org.service-com.host-1.0.0.SNAPSHOT /opt/server1/service/logs/wrapper '
+ ssh logger@server2 'IFS_OLD=  

                for Y in /opt/server1/service/logs/ /opt/server1/service/logs/org.service-com.settlement.host.ui-1.0.0.SNAPSHOT /opt/server1/service/logs/com.springsource.server.repository.hosted-2.0.0.RELEASE /opt/server1/service/logs/org.service-com.xml2titp.ws-1.0.0.SNAPSHOT /opt/server1/service/logs/org.service-com.mportal.ws.oracle-1.0.0.SNAPSHOT /opt/server1/service/logs/access /opt/server1/service/logs/com.springsource.server.admin.web-2.0.0.RELEASE /opt/server1/service/logs/org.flex.web.plan-2 /opt/server1/service/logs/org.service-com.admin.host-1.0.0.SNAPSHOT /opt/server1/service/logs/org.service-com.tickets.ws-1.0.0.SNAPSHOT /opt/server1/service/logs/org.service-com.apijson.ws-1.0.0.SNAPSHOT /opt/server1/service/logs/apool_xyz.plan-2 /opt/server1/service/logs/org.service-com.json2titp.host.ui-1.0.0.SNAPSHOT /opt/server1/service/logs/server1 /opt/server1/service/logs/org.service-com.apijson.host.ui-1.0.0.SNAPSHOT /opt/server1/service/logs/org.flex.web.plan-2-org.service-com.flex.bundle.main-1.0.0.SNAPSHOT /opt/server1/service/logs/org.service-com.xyzsettlement.ws-1.0.0.SNAPSHOT /opt/server1/service/logs/org.service-com.host-1.0.0.SNAPSHOT /opt/server1/service/logs/wrapper  
                do
                    if [ ! -d  /volumes/storage/server1 ]
                    then
                        mkdir -p /volumes/storage/server1;
                    fi;
                done;' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:12:32.563

尝试这样做：

```
find local_dir -type d -print0 |
ssh remote 'while IFS="" read -r -d "" a; do mkdir -p "remote_dir/$a"; done' 
```

或者，如果您更喜欢单线：

```
find local_dir -type d -print0 | ssh remote 'while IFS="" read -r -d "" a; do mkdir -p "remote_dir/$a"; done' 
```

## 解释

*   `find local_dir -type d`: 从 local_dir 打印所有目录所以`STDOUT`
*   `|`::最新命令到下一个命令的`Unix pipe`分支`STDOUT``STDIN`
*   `ssh remote 'remote_command'`: ssh 到远程服务器，并执行命令。需要单`'`引号以防止 shell 插入`$a`变量
*   `while read a; do mkdir -p remote_dir/$a; done`：远程命令，它会继续读取`STDIN`
*   ，`mkdir -p`无需检查任何目录的存在

# c# - SSIS 以编程方式生成 ODBC 连接

> ID：14964423
> 
> 赞同：2
> 
> 时间：2013-02-19T18:08:55.553
> 
> 标签：c#, ssis, sql-server-2012

[我正在尝试使用http://msdn.microsoft.com/en-us/library/ms345167.aspx](http://msdn.microsoft.com/en-us/library/ms345167.aspx)中描述的方法在 SSIS 包中创建 ODBC 目标源我似乎无法初始化 ODBC 连接正确。这是我用来创建 ODBC 连接的代码

```
 // Specify the connection manager.
    component1.RuntimeConnectionCollection.NewAt(0);
    if (component1.RuntimeConnectionCollection.Count > 0)
    {
        component1.RuntimeConnectionCollection[0].ConnectionManager =
          DtsConvert.GetExtendedInterface(myPackage.Connections["ODBC Connection"]);
        component1.RuntimeConnectionCollection[0].ConnectionManagerID =
          myPackage.Connections["ODBC Vertica Connection"].ID;
        component1.RuntimeConnectionCollection[0].Name = myPackage.Connections["ODBC Connection"].Name;
    } 
```

当我尝试使用此代码连接到服务器时，会引发 COM 异常。有没有人有使用 SSIS 生成创建的工作 ODBC 连接的示例

我使用代码从 component1 创建一个实例

```
CManagedComponentWrapper instance = component1.Instantiate(); 
```

当我尝试使用连接初始化对象的元数据时，会引发 COM 异常。抛出异常的行读取

```
instance.AcquireConnections(null); 
```

COM 异常本身是

> 对 COM 组件的调用已返回错误 HRESULT E_FAIL

转换为 System.Runtime.InteropServices.COMException 错误代码 -2147467259

这是完整的代码。我尝试将 ODBC 目标添加到现有数据流组件

```
 private IDTSComponentMetaData100 addODBCDest(MainPipe dataFlow_pipe, String tableName)
    {
        // ADO Net Data Source
        IDTSComponentMetaData100 component1 = dataFlow_pipe.ComponentMetaDataCollection.New();
        component1.Name = tableName + " ODBC Destination";
        Application app = new Application();

        component1.ComponentClassID = "{074B8736-CD73-40A5-822E-888215AF57DA}";
        // Get the design time instance of the component.
        CManagedComponentWrapper instance = component1.Instantiate();

        // Initialize the component
        try
        {
            instance.ProvideComponentProperties();
        }
        catch (Exception e)
        {
            Console.WriteLine(e.ToString());
        }

        // Specify the connection manager.
        component1.RuntimeConnectionCollection.NewAt(0);
        if (component1.RuntimeConnectionCollection.Count > 0)
        {
            component1.RuntimeConnectionCollection[0].ConnectionManager =
              DtsConvert.GetExtendedInterface(myPackage.Connections["ODBC Connection"]);
            component1.RuntimeConnectionCollection[0].ConnectionManagerID =
              myPackage.Connections["ODBC Vertica Connection"].ID;
            component1.RuntimeConnectionCollection[0].Name = myPackage.Connections["ODBC Connection"].Name;
        }

        // Set the custom properties.
        instance.SetComponentProperty("InsertMethod", 1);
        instance.SetComponentProperty("BatchSize", 10000);

        // Reinitialize the metadata.
        instance.AcquireConnections(null);  // crashes with COM exception -2147467259
        instance.ReinitializeMetaData();
        instance.ReleaseConnections();
        return component1;
    } 
```

# ios - ios webcal 请求 - 完成回调？

> ID：14964429
> 
> 赞同：0
> 
> 时间：2013-02-19T18:09:08.163
> 
> 标签：ios, cocoa-touch, webcal

```
NSURL *url = [NSURL URLWithString:@"valid_webcal_url"];
if (![[UIApplication sharedApplication] openURL:url])
{
    // failure callback
    NSLog(@"%@%@",@"Failed to open url:",[url description]);
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:LCHLocalizedString(@"SUBSCRIBE_ERROR", nil) message:nil delegate:self cancelButtonTitle:@"Okay" otherButtonTitles: nil];
    [alert show];
} 
```

所以我已经弄清楚如何查看加载 webcal 是否出错，但是我怎么知道 webcal 何时加载成功？当点击“订阅”按钮时，我会显示一个加载器，只需要知道何时将其关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:13:10.663

因为这是使用`openURL`webcal 协议检索项目，所以应用程序和 webcal 检索没有视觉上的分离。

我必须做的是`UIApplicationWillResignActiveNotification`在调用后监听通知`openURL`，当通知被触发时，我认为它是 webcal 从我的 openURL 调用中接管。

这是一项棘手的业务和基本的修复，但是嘿，它有效！感谢所有帮助/建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:00:07.930

如评论中所述，这会将您的应用程序置于后台，无法保证自动返回。

假设您实际上想要调用一个网页（而不是进行 Web api 调用），您可能应该创建一个`UIViewController`带有嵌入的自定义子类`UIWebView`。

将您的子类设置为的委托`UIWebView`将允许您对失败/成功做出反应。您甚至可以拦截和停止`UIWebView`呼叫`- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType`

# php - 从管道电子邮件中保存电子邮件附件

> ID：14964430
> 
> 赞同：0
> 
> 时间：2013-02-19T18:09:10.573
> 
> 标签：php, email

我正在使用管道编程将电子邮件发送到脚本。使用这个脚本，我可以成功地将整个电子邮件保存为我服务器上的 .txt 文件。剩下要做的唯一一件事就是弄清楚如何保存电子邮件附带的任何附件。（此电子邮件地址仅提供给一个受信任的来源，因此安全不是问题）

将整个电子邮件保存为 .txt 文件的工作代码：

```
$fd = fopen("php://stdin", "r");
$email = ""; // This will be the variable holding the data.
while (!feof($fd)) {
$email .= fread($fd, 1024);
}
fclose($fd);
/* Saves the data into a file */
$fdw = fopen("/home/lmshost22/public_html/pipemail.txt", "w+");
fwrite($fdw, $email);
fclose($fdw); 
```

任何人都可以帮助我简单地提取附件（将始终是 .csv 文件）并将其保存在我的服务器上的代码吗？

以下是 .txt 文件为附件显示的代码：

```
------=_NextPart_000_0133_01CE0E98.061E7400
Content-Type: application/vnd.ms-excel;
    name="leads.csv"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
    filename="leads.csv"

ApplicationDetailId,DateCreated,VehicleInfoId,FirstName,MiddleName,LastNa=
me,Suffix,Street,City,State,ZipCode,Email,HomePhoneArea,HomePhonePrefix,H=
omePhoneSuffix,CellArea,CellPrefix,CellSuffix,WorkPhoneArea,WorkPhonePreF=
ix,WorkPhoneSuffix,AmountBorrow,IsVehiclePaidOff,IsVehicleSalvaged,OweAmo=
unt,TitleOwnership,IsInBankruptcy,IsInCreditCounseling,HearOfUs,VehicleIn=
foId,Year,Make,Model,Trim,Miles,Engine,DriveTrain,Transmission,Options,Bo=
ok,ClassCode,Door,FuelType,BodyStyle
4523,2/18/2013 2:56:33 PM,4524,James,,Pruitt,,7900 =
Carmelita,Atascadero,CA,93422,,702,=3D"353",=3D"9760",=3D"",=3D"",=3D"",=3D=
"",=3D"",=3D"",=3D"2500.0000",True,False,0.0000,No =
one,False,False,Google,4524,2001,=3D"Toyota",Tacoma =
Xtracab,PreRunner,200000,V6  3.4 =
Liter,2WD,Automatic,199443~199448~199471~199480~199508~4234190~,0.0000,1,=
0,Gas,Pickup

------=_NextPart_000_0133_01CE0E98.061E7400-- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:20:05.023

1.  附件暗示消息是 MIME/Multipart 并且有一个`boundary`标头集，它将分隔不同的消息部分。例如：

    ```
    Content-Type: multipart/mixed;
        boundary="b1_bb1b331cd6dafa1dc6a19e3b2e090b07" 
    ```

    因此，您想首先通过以下方式找到它：

    ```
    preg_match('/boundary="(.*)"/', $message, $matches); 
    ```

2.  消息被`--`与边界连接，然后是特定于该部分的标题，一个空行，然后是数据。例如：

    ```
    --b1_bb1b331cd6dafa1dc6a19e3b2e090b07
    Content-Type: application/pdf; name="Invoice-37272.pdf"
    Content-Transfer-Encoding: base64
    Content-Disposition: attachment; filename="Invoice-37272.pdf"

    // base64 data here // 
    ```

    并且消息以 终止`'--' . $boundary . '--'`，例如：`--b1_bb1b331cd6dafa1dc6a19e3b2e090b07--`

因此，您可以使用这两个信息将您的消息分解为其组成部分并查找/保存附件。

# css - 控制对象在流体网格中的显示方式

> ID：14964432
> 
> 赞同：1
> 
> 时间：2013-02-19T18:09:13.353
> 
> 标签：css, twitter-bootstrap, media-queries

我一直在使用 twitter bootstrap 来设计我的主页，但有些事情一直困扰着我在 css 框架（如 twitter bootstrap）中使用媒体查询。在我的示例中，我显示了四个图像，例如

```
<div class="container">
    <div class="row">
        <section>
            <article class="span3">
                <img src="gandalf1.jpg" />
            </article>
            <article class="span3">
                <img src="gandalf2.jpg" />
            </article>
            <article class="span3">
                <img src="gandalf3.jpg" />
            </article>
            <article class="span3 last">
                <img src="gandalf4.jpg" />
            </article>
        </section>
    </div>
</div> 
```

使用行类和部分的基本重置，这工作得非常好，它对移动设备的响应很好。我觉得我对正在发生的事情没有发言权，所以我想获得一些控制权。

我想要的是强制将所有内容都`<section></section>`纳入某种合同，以使它们以某种方式运行，例如，在我的示例中，在某些时候，图像一个接一个地垂直列出。

例如，在我的合同中，我希望图像永远不会离开其原始顺序 - （原始顺序是水平的，即一行有四个图像，第二行有四个图像等等）并且应该通过调整大小来响应宽度的变化当宽度在 600px 和 980px 之间时，不会超出它们的范围

```
@media screen and (min-width:600px) and (max-width:980px) { ... } 
```

为了实现这一点，我尝试了很多东西，我想到的第一件事是制作`<section>`and `inline-block`，但未能产生预期的效果。恐怕`.row`在这些宽度上尝试重做课程将是一个非常高的要求。

我应该集中精力使用我编写的 css 代码寻找解决方案，还是应该尝试`.row`以这些宽度修改类？

# ruby - 在 DataMapper 中序列化和反序列化 Ruby 对象

> ID：14964443
> 
> 赞同：1
> 
> 时间：2013-02-19T18:09:59.797
> 
> 标签：ruby, yaml, datamapper

我刚开始使用 DataMapper，发现自己经常做这种事情：

```
class MyModel
  include DataMapper::Resource

  property :id, Serial
  property :serialized_credentials, String

  def credentials
    @credentials ||= YAML.load(self.serialized_credentials)
  end

  def credentials=(c)
    @credentials = nil
    self.serialized_credentials = YAML.dump(c)
  end

end 
```

这允许我为凭据传递一个哈希（例如）。

但是 DataMapper 是否已经为此提供了一种机制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T19:29:11.330

您可以使用`Object`DataMapper 提供的类型：

```
class MyModel
  include DataMapper::Resource

  property :id, Serial
  property :credentials, Object
end 
```

然而，这将使用`Marshal.dump`而不是`YAML.dump`，但您可以通过定义自己的类型来干燥它：

```
class YAMLObject < DataMapper::Type
  primitive String

  def self.dump(value, property)
    Base64.encode64(YAML.dump(value))
  end

  def self.load(value, property)
    value.nil? ? nil : YAML.load(Base64.decode64(value))
  end
end 
```

然后你可以像使用任何其他类型一样使用它：

```
class MyModel
  include DataMapper::Resource

  property :id, Serial
  property :credentials, YAMLObject
end 
```

最后但并非最不重要的一点是gem`Json`提供的类型，`dm-types`它使用 MultiJson 转储和加载数据。

参考资料（对象类型）：

*   [http://datamapper.rubyforge.org/dm-core/DataMapper/Types/Object.html](http://datamapper.rubyforge.org/dm-core/DataMapper/Types/Object.html)
*   [http://datamapper.org/docs/properties.html](http://datamapper.org/docs/properties.html)

参考资料（定义自己的类型）：

*   [http://datamapper.rubyforge.org/dm-core/DataMapper/Type.html](http://datamapper.rubyforge.org/dm-core/DataMapper/Type.html)

参考文献（Json 类型）：

*   [https://github.com/datamapper/dm-types](https://github.com/datamapper/dm-types)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-20T18:06:23.167

看起来您也可以使用本机 DataMapper 类型。

来自[http://datamapper.org/docs/dm_more/types.html](http://datamapper.org/docs/dm_more/types.html)：

> 序列化器
> 
> 这些使用基于文本的序列化格式将值存储在数据存储中。它们通过调用将对象转储为保存和解析文本以在加载时重新初始化它们的格式来工作。
> 
> ```
> Csv
> Json
> Yaml 
> ```

所以像

```
class MyModel
  include DataMapper::Resource

  property :id, Serial
  property :credentials, Json
end 
```

# jquery - 使用 jQuery 选择事件

> ID：14964444
> 
> 赞同：-2
> 
> 时间：2013-02-19T18:10:09.803
> 
> 标签：jquery, html

我想在选择某个值时禁用文本框。

例子

```
<select name="license" id="license">

<option value="1">Free</option>
<option value="2">Commercial</option>

</select> 
```

选择免费时，我希望文本框ID价格要禁用。

```
<input type="text" class="input" id="price" name="price" value=""/> 
```

我如何使用 jQuery 来做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:12:32.330

```
$(function(){
  $("#license").change(function(){
     $("#price").prop("disabled",$(this).val() === "1");
  });
}); 
```

[http://jsfiddle.net/j8sZf/](http://jsfiddle.net/j8sZf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:13:40.190

您可以将`change`事件与选项绑定并用于`val()`获取选定的值以对其进行条件处理。

**[现场演示](http://jsfiddle.net/J8zzr/)**

```
$('#license').change(function () {
    if ($(this).val() == "2") 
         $('#price').prop('disabled', true);
    else 
         $('#price').prop('disabled', false);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T18:18:36.770

我为你做了一个jsfiddle。

[http://jsfiddle.net/DMMFv/](http://jsfiddle.net/DMMFv/)

> $(文档).ready(函数(){
> 
> $("#license").change(function(){
> 
> ```
> if($(this).val()=="1"){
>     $(".input").attr("disabled","disabled");
> } else {
>     $(".input").removeAttr('disabled');
> }
>  }); 
> ```
> 
> });

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T18:15:44.257

这是代码

```
$(function(){
 $("#license").change(function(){
   if(parseInt($(this).val()) === 1){
        $("#price")attr("enabled");}
    else
    { 
    $("#price").removeAttr("enabled");
}
  })
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T18:19:18.860

干得好：

```
$(function(){

  //Catch when dropdown menu item was changed
  $('#license').on('change',function(){

  //Get selected item
  var selectedItem = $('#license').find(':selected').text();

  //Check what was selected
  if(selectedItem == "Free")
  {
    $('#price').attr('disabled',true);    
  } 
  else
    {
      $('#price').removeAttr('disabled');
    }

   });

  //Trigger change event so the check happens on page load as well as when list item is changed
  $('#license').change();

}); 
```

完成工作的 JSBin：http: [//jsbin.com/uwevir/1/](http://jsbin.com/uwevir/1/)

# javascript - GWT：一旦我关闭它的弹出窗口，就不能再控制窗口了

> ID：14964448
> 
> 赞同：1
> 
> 时间：2013-02-19T18:10:17.300
> 
> 标签：javascript, gwt, browser, window, reload

我的应用是：

1.  在主窗口做某事
2.  打开一个新窗口在那里做某事

    ```
    Window.open(userInfo.signInURLs.get("Google"), "Google", null); 
    ```

3.  关闭那个新窗口

    ```
    native public static void close()/*-{ $wnd.close(); }-*/; 
    ```

4.  尝试重新加载主窗口

    ```
    Window.Location.reload(); 
    ```

一切都很好，直到我关闭新窗口。我不能再控制主窗口了。我运行的操作永远不会执行。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:45:20.767

如果您使用 GWT，您希望尽可能多地重新加载页面。如果您加载数据，则使用 ajax 进行部分页面重新加载。您选择的方法不是很可行。使用 window.location.reload - 您可以重新加载整个页面。不要那样做。

您应该使用模态窗口 - 在 gwt 中非常简单。使用 DialogBox，它可以创建一个模态窗口。

[http://examples.roughian.com/index.htm#Widgets~DialogBox](http://examples.roughian.com/index.htm#Widgets~DialogBox)

# java - Java Swing - 更好的字体平滑

> ID：14964449
> 
> 赞同：6
> 
> 时间：2013-02-19T18:10:16.957
> 
> 标签：java, swing, fonts, smoothing

是否有可能在 Java swing 应用程序中调整字体平滑？

这里有一些比较：

![在此处输入图像描述](../Images/180a3b8b95369c791931585cd64c2c99.png)

差别并不大，但如果您仔细观察，Adobe Story（和许多其他 Flash 应用程序）的平滑度会更强、更好。

我用 Java 编写文本编辑器，我想在 JTextPane 和 JLabels 上的应用程序中实现这种平滑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-04T08:45:43.057

根据您用来显示文本的对象，您需要自定义一个对象并覆盖负责绘制文本的方法

这是自定义 JTextArea 的示例

```
public class CustomTextArea extends JTextArea {

    @Override
    public void paintComponent(Graphics g) {
        Graphics2D g2 = (Graphics2D) g.create();
        g2.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
        super.paint(g);
    }

} 
```

您可能需要对其进行更多修改，但这是基本概念

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-07T18:00:32.283

您可以在 Jlabel 上使用 html 标签，例如：

```
<html><body><br/><br/><body/><html/> 
```

例如，您可以制作一个按钮，如下所示：

```
button = new JButton("<html><b><u>T</u>wo</b><br>lines</html>"); 
```

这看起来像这样：![在此处输入图像描述](../Images/0be55ca9dc98768693093100d1c2e1b6.png)

但这里有更多关于 HTML 标签[LINK](http://docs.oracle.com/javase/tutorial/uiswing/components/html.html)

# php - 自定义“OpenCart”的购物车

> ID：14964451
> 
> 赞同：0
> 
> 时间：2013-02-19T18:10:43.080
> 
> 标签：php, opencart

我正在尝试对 OpenCart 中的实际购物车进行一些更改。至于现在将产品添加到购物车时，信息将通过以下方式显示：

```
Product1     Amount:
Size: XL       2 
```

如果将相同产品但尺寸不同的产品添加到购物车中，则会创建一个新行。我的愿望是得到以下设计的购物车

```
Product1     S  M  L  XL
             1        2 
```

因此，每个产品只会创建一个单行，然后在相应的尺寸类别下显示正确的数量。到目前为止，这是我的代码：

```
<?php
            $saveName = array();
            $sizesArray = array("S","M","L","XL");
            $x = 0;
                if($products || $vouchers) {
                    foreach ($products as $product){
                        foreach ($product['option'] as $option) {
                            $option['value'];
                            }

                    $saveName[$x] = $product['name'].'|'.$option['value'].'|'.$product['quantity'];
                    $seperateValues = explode("|",$saveName[$x]);
                    ?>
                    <tr>
                      <td class="image"><?php if ($product['thumb']) { ?>
                        <a href="<?php echo $product['href']; ?>"><img src="<?php echo $product['thumb']; ?>" alt="<?php echo $product['name']; ?>" title="<?php echo $product['name']; ?>" /></a>
                        <?php } ?></td>
                      <td class="name"><a href="<?php echo $product['href']; ?>"><?php echo $product['name']; ?></a></td>

                        <?php
                        foreach($sizesArray as $sizes){
                            if($sizes == $seperateValues[1]){
                                echo '<td>'.$seperateValues[0].' '.$seperateValues[2].'</td>';
                                }
                            else{
                                echo '<td>0</td>';
                                }
                        }
                        ?>

                      <td class="total"><?php echo $product['total']; ?></td>
                      <td class="remove">Remove</td>
                    </tr>

                    <?php
                    $x++;
                    } 
                    ?> 
```

代码格式化了正确类别下的金额，但我无法让它为每个产品只生成一行。任何帮助都非常受欢迎。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:27:26.140

修改模板是不行的，因为Opencart内部以product_id:serialized_array_of_options的格式将产品存储在数组中，所以id相同但选项组合不同的产品是分开存储的。您可以在 /system/library/cart.php 的 getProducts 方法中看到：

```
foreach ($this->session->data['cart'] as $key => $quantity) {

    $product = explode(':', $key);
    $product_id = $product[0];
    $stock = true;

    // Options
    if (isset($product[1])) {
        $options = unserialize(base64_decode($product[1]));
    } else {
        $options = array();
    } 
```

因此，要实现您想要的，您将对 Cart 类在会话中存储产品的方式进行更改。

# c# - ASP.NET 生成的输出不受 JQuery/Javascript 影响

> ID：14964452
> 
> 赞同：0
> 
> 时间：2013-02-19T18:10:50.557
> 
> 标签：c#, jquery, asp.net, css

我有以下代码，它以 html 列表格式动态生成目录树。当我尝试使用 javascript 操作列表项以在项目末尾添加“+”时，它不起作用。我知道 jquery 是正确的，我在同一服务器的另一个页面上使用过它。jquery 是否无法处理使用 asp.net 动态生成的服务器端的数据？

```
<script langauge="C#" runat="server">
    string output;
    protected void Page_Load(object sender, EventArgs e) {
        getDirectoryTree(Request.QueryString["path"]);
        itemWrapper.InnerHtml = output;
    }

    private void getDirectoryTree(string dirPath) {
        try {
            System.IO.DirectoryInfo rootDirectory = new System.IO.DirectoryInfo(dirPath);
            foreach (System.IO.DirectoryInfo subDirectory in rootDirectory.GetDirectories()) {
                output = output + "<ul><li>" + subDirectory.Name + "</li>";
                getDirectoryTree(subDirectory.FullName);
                if (subDirectory.GetFiles().Length != 0) {
                    output = output + "<ul>";
                    foreach (System.IO.FileInfo file in subDirectory.GetFiles()) {
                        output = output + "<li><a href='" + file.FullName + "'>" + file.Name + "</a></li>";
                    }
                }
                output = output + "</ul>";
            }
        } catch (System.UnauthroizedAccessException) {
            //This throws when we don't have access, do nothing and move one.
        }
    }
</script> 
```

然后我尝试使用以下内容操作输出：

```
<script langauge="javascript">
    $('li > ul').not('li > ul > li > ul').prev().append('+');
</script> 
```

仅供参考，div的代码如下：

```
<div id="itemWrapper" runat="server">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:18:51.967

您是否尝试在页面加载后执行您的 JS？像这样的东西...

```
$(function(){ 
    $('li > ul').not('li > ul > li > ul').prev().append('+');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:43:09.910

看起来你在这里有几个问题。首先你应该把你的 jQuery 代码放在 $(document).ready 中。这确保了 DOM 在你尝试弄乱它之前已经完全加载。其次，您的选择器正在寻找作为 li 元素的直接子元素的 ul 元素。您的代码不会生成任何此类 HTML。你有 li 在 ul 里面，但不是相反。此外，如果您的目录中有文件，您将保留一些未关闭的 ul 元素，这会弄乱您的 HTML 和 Javascript。

# android - 将标头添加到 Http 标头

> ID：14964454
> 
> 赞同：1
> 
> 时间：2013-02-19T18:11:07.110
> 
> 标签：android, http-headers, ksoap2

我正在将 ksoap2 用于 android 项目。但是服务器代码（不能更改）是旧的，需要在 HTTP 标头的标头内发送一些属性。

服务器使用soap，所以我决定将ksoap2 用于android，但我找不到任何示例如何设置ksoap2 请求的http 标头（不在soap 信封内，而是在httpheader 内）。

可能吗？

如果可能的话，谁能给我举个例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:00:14.540

HTTP 标头可以在 org.ksoap2.transport.call(String, SoapEnvelope, List, File) 方法中修改。

**编辑**

您可以在调用时直接传递额外的标头`HttpTransportSE.call()`

例子：

```
.
.
.
List<HeaderProperty> headers;
headers.add(new HeaderProperty("Content-Type", "utf8"));
headers.add(new HeaderProperty("Accept", "text/html"));

HttpTransportSE httpTransport = new HttpTransportSE(_soapAddress);

httpTransport.call(soapAction, envelope, headers);
.
.
. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:13:22.770

您可以检索连接对象并在那里添加标头。

```
HttpTransportSE transport = new HttpTransportSE(url,timeout);
ServiceConnection conn = transport.getConnection();
conn.setRequestProperty("Accept-Encoding", "utf-8");
//and others... 
```

# r - 检查是否安装了程序

> ID：14964457
> 
> 赞同：8
> 
> 时间：2013-02-19T18:11:17.193
> 
> 标签：r, pandoc

我正在编写一个通过命令行在 R 中使用 pandoc 的函数。如何使用 R 检查是否安装了 pandoc（我还假设它必须在路径上，这对 Windows 用户来说可能是个问题）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-19T18:24:28.943

我没有要安装 pandoc ，但通常我会测试是否安装了这样的程序：

```
pandoc.installed <- system('pandoc -v')==0 
```

例如测试是否安装了java：

```
 java.installed <- system('java -version') ==0

java version "1.7.0_10"
Java(TM) SE Runtime Environment (build 1.7.0_10-b18)
Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode)
> java.installed
[1] TRUE 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T19:41:59.843

这个建议完全基于我对这个问题的个人经验，即 RStudio 似乎无法读取我`.bashrc`在 Ubuntu 系统上的文件中的内容。[我已经使用此处](http://johnmacfarlane.net/pandoc/installing.html)`cabal install pandoc`描述的方法安装了 Pandoc，因为我需要从更新版本的 Pandoc 中获得的功能比 Ubuntu 的包管理器提供的功能。从终端运行 R 可以按预期使用 检测 Pandoc ，但是在使用 RStudio 时，它不能。*我不知道这是否是 Windows 用户的问题！*`Sys.which`

 **在这种情况下，一种替代/解决方法实际上是创建一个典型路径的向量，您希望在其中*找到 Pandoc 可执行文件（假设许多用户并不真正关心他们安装程序的位置）。同样，此信息可在上面链接的安装页面以及`C:\\PROGRA~1\\...`Windows 的典型路径中找到。因此，您可能有类似以下内容作为 Pandoc 的路径：

```
myPaths <- c("pandoc", 
             "~/.cabal/bin/pandoc", 
             "~/Library/Haskell/bin/pandoc", 
             "C:\\PROGRA~1\\Pandoc\\bin\\pandoc") 
             # Maybe a .exe is required for that last one?
             # Don't think so, but not a regular Windows user 
```

您可以将其与`Sys.which()`（例如，`Sys.which(myPaths)`）和已经分享的其他一些想法一起使用。

*   如果第一个选项是唯一匹配的，那么就没有问题：您可以直接使用对 Pandoc 的系统调用。
*   如果任何其他选项是唯一匹配的，您可以编写函数，以便在系统调用中粘贴到可执行文件的完整路径，而不仅仅是“pandoc”。
*   如果第一个选项和任何其他选项匹配，那么您只需选择第一个选项并继续。
*   如果不匹配，提示用户输入 Pandoc 安装路径或提供有关如何安装 Pandoc 的消息。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-19T18:21:06.880

我想您可以使用`Sys.which`并查看结果是否为空字符串。

```
pandoc.location <- Sys.which("pandoc")
if(pandoc.location == ""){
    print("pandoc not available")
}else{
    print("pandoc available")
} 
```*

# c - MPI_Isend 到随机目的地

> ID：14964458
> 
> 赞同：1
> 
> 时间：2013-02-19T18:11:28.403
> 
> 标签：c, mpi

我无法让 MPI_Isend 发送到随机目的地。如果我对目的地进行硬编码，它工作正常，但如果我尝试生成一个随机的，它不会。以下是一些相关代码：

```
 MPI_Init(&argc,&argv);
    MPI_Comm_size(MPI_COMM_WORLD,&numprocs);
    MPI_Comm_rank(MPI_COMM_WORLD,&myid);
    srand48(myid);
    request=MPI_REQUEST_NULL;
    if(myid == 0){
            buffer=drand48();
            do {
                    destination=lrand48() % numprocs;
            } while (destination == 0); //Prevent sending to self
            MPI_Isend(&buffer,1,MPI_DOUBLE,destination,1234,MPI_COMM_WORLD,&request);

    }
    else if (myid == destination) {
            MPI_Irecv(&buffer,1,MPI_DOUBLE,MPI_ANY_SOURCE,MPI_ANY_TAG,MPI_COMM_WORLD,&request);

    }
    if(myid == 0){
            printf("processor %d  sent %lf to %d\n",myid,buffer,destination);
    }
    else {
            printf("processor %d  got %lf\n",myid,buffer);
    } 
```

`mpicc main.c` 当我运行程序时，我可以编译得很好，`mpirun -np 4 ./a.out`输出是：

```
processor 0  sent 0.170828 to 2
processor 1  got 0.000000
processor 2  got 0.000000
processor 3  got 0.000000 
```

例如，如果我将目的地硬编码为 2，那么我会得到预期的输出：

```
processor 0  sent 0.170828
processor 1  got 0.000000
processor 2  got 0.170828
processor 3  got 0.000000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:17:07.313

`MPI_Isend`并`MPI_Irecv` *启动*相应的非阻塞操作。`request`无法保证在您将返回的句柄传递给`MPI_Wait`or家族的函数之前它们会完成`MPI_Test`（如果使用了测试函数，则请求的完成状态会在布尔变量中传回，并且它不完整因为布尔标志保持为假）。

不过，您的代码存在概念性问题。MPI 是一种分布式内存范例——每个 MPI 等级实际上都存在于其单独的地址空间中（尽管标准没有严格要求，但实际上所有 MPI 实现都提供了这一点）。因此`destination`，设置等级 0 不会将其值神奇地转移到其他进程。您可以先广播该值，也可以向所有其他等级发送特殊的“空”消息，例如：

```
if (myid == 0) {
   MPI_Request reqs[numprocs];

   buffer=drand48();
   do {
      destination=lrand48() % numprocs;
   } while (destination == 0); //Prevent sending to self
   for (i = 1; i < numprocs; i++) {
      if (i == destination)
         MPI_Isend(&buffer,1,MPI_DOUBLE,i,1234,MPI_COMM_WORLD,&reqs[i]);
      else
         // Send an empty message with different tag
         MPI_Isend(&buffer,0,MPI_DOUBLE,i,4321,MPI_COMM_WORLD,&reqs[i]);
   }
   reqs[0] = MPI_REQUEST_NULL;
   MPI_Waitall(numprocs, reqs, MPI_STATUSES_IGNORE);     
   printf("processor %d  sent %lf to %d\n",myid,buffer,destination);
}
else {
   MPI_Status status;

   MPI_Recv(&buffer,1,MPI_DOUBLE,MPI_ANY_SOURCE,MPI_ANY_TAG,MPI_COMM_WORLD,&status);
   if (status.MPI_TAG == 1234)
      printf("processor %d  got %lf\n",myid,buffer);
} 
```

使用广播，代码如下所示：

```
request=MPI_REQUEST_NULL;
if (myid == 0) {
   buffer=drand48();
   do {
      destination=lrand48() % numprocs;
   } while (destination == 0); //Prevent sending to self
   MPI_Bcast(&destination,1,MPI_INT,0,MPI_COMM_WORLD);
   MPI_Isend(&buffer,1,MPI_DOUBLE,destination,1234,MPI_COMM_WORLD,&request);
}
else {
   MPI_Bcast(&destination,1,MPI_INT,0,MPI_COMM_WORLD);
   if (myid == destination) {
      MPI_Irecv(&buffer,1,MPI_DOUBLE,MPI_ANY_SOURCE,MPI_ANY_TAG,MPI_COMM_WORLD,&request);
   }
}
MPI_Wait(&request, MPI_STATUS_IGNORE);
if (myid == 0) {
   printf("processor %d  sent %lf to %d\n",myid,buffer,destination);
}
else {
   printf("processor %d  got %lf\n",myid,buffer);
} 
```

# php - Shopify 单点登录

> ID：14964459
> 
> 赞同：0
> 
> 时间：2013-02-19T18:11:30.720
> 
> 标签：php, javascript, mysql, shopify, single-sign-on

我们目前有一个具有许多其他功能的电子商务网站，因此需要帐户。

我们正在将商店转移到 Shopify，但目前客户必须先登录我们的网站，然后再登录商店。我一直找不到任何单点登录文档，最好的解决方案是什么？

我正在考虑将登录表单发布到我们的后端和 Shopify 以诱骗 Shopify 创建会话，但我不确定它的可靠性。

该网站是PHP和MySQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T20:41:40.727

单点登录可用，但仅在企业计划中可用。您需要联系 Shopify 以获取这些计划并访问单点登录。

# html - 清除后定位图像：两个 div

> ID：14964461
> 
> 赞同：0
> 
> 时间：2013-02-19T18:11:31.690
> 
> 标签：html, css, image, alignment

有人可以告诉我如何在两个浮动 div 之后使用一个清晰​​的两个 div 后定位图像吗？

我已将该页面上传到[http://justinstephens.co](http://justinstephens.co)，并且“下载费率卡”图像出现问题，我想将其向上移动约 40 - 50 像素.....出于某种原因，它似乎是卡在它所在的地方。

# sql - 用于在 UPDATE 中切换布尔值的 JPA 查询

> ID：14964462
> 
> 赞同：6
> 
> 时间：2013-02-19T18:11:39.820
> 
> 标签：sql, jpa, jpql

SQL 版本可以正常工作，我可以切换名为 bar 的布尔值 ...

```
mysql> update Foo set bar = ! bar WHERE id IN (1, 7, 13);
Query OK, 3 rows affected (0.02 sec) 
```

是否有一个简单的 JPA Query 等价物，我试过了

```
final Set<Integer> ids;
final Query query = em.createQuery("UPDATE " + Foo.class.getName()
            + " a set bar= !bar"
            + " where a.id in :ids");
    query.setParameter("ids", ids);
    query.executeUpdate(); 
```

上面给出了 org.hibernate.QueryException。

在我的实体中：

```
@Column(columnDefinition = "INTEGER", nullable = false)
private boolean bar; 
```

关于 JPA 语法的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T20:06:57.557

这可以通过 case 表达式来完成：

```
UPDATE FOO a 
SET a.bar = 
  CASE a.bar 
    WHEN TRUE THEN FALSE
    ELSE TRUE END
WHERE a.id in :ids 
```

对于可为空的布尔值，需要更多：

```
UPDATE FOO a 
SET a.bar = 
  CASE a.bar 
    WHEN TRUE THEN FALSE
    WHEN FALSE THEN TRUE
    ELSE a.bar END
WHERE a.id in :ids 
```

# entity-framework - 了解实体框架乐观并发（数据库获胜）模式

> ID：14964463
> 
> 赞同：6
> 
> 时间：2013-02-19T18:11:40.823
> 
> 标签：entity-framework, optimistic-concurrency

请参阅[使用 Reload（数据库获胜）解决乐观并发异常](http://msdn.microsoft.com/en-US/data/jj592904)：

```
using (var context = new BloggingContext())
{
    var blog = context.Blogs.Find(1);
    blog.Name = "The New ADO.NET Blog";
    bool saveFailed;
    do
    {
        saveFailed = false;

        try
        {
            context.SaveChanges();
        }
        catch (DbUpdateConcurrencyException ex)
        {
            saveFailed = true;

            // Update the values of the entity that failed to save from the store
            ex.Entries.Single().Reload();
        }

    } while (saveFailed);
} 
```

为什么在`SaveChanges()`之后调用该方法`Reload()`？此调用永远不会更改数据库中的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T21:46:59.990

我同意这不是太清楚。这段代码的意图在这句话中

> 然后该实体通常以某种形式返回给用户，他们必须尝试再次进行更改并重新保存。

因此，如果他们添加评论会更好：

```
...
// User evaluates current values and may make new changes.
try
{
    context.SaveChanges();
}
... 
```

# image - 如何避免 LazyLoad 对特定类的影响？

> ID：14964475
> 
> 赞同：0
> 
> 时间：2013-02-19T18:12:24.213
> 
> 标签：image, conflict, lazy-loading

目前使用在网上找到的以下代码：

（使用 jq 而不是 $ 符号）

```
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="jquery.lazyload.mini.js"></script>
<script type="text/javascript">
var jq = jQuery.noConflict();
jq(function() {
    jq("img").lazyload({
         placeholder : "template/eis_d25_022/common/grey.gif",
         effect      : "fadeIn"
    });
});</script> 
```

上面的代码只是在我的论坛中自动“延迟加载”所有内容，而无需更改图像类或图像 src 等。但是某些具有特定类的图像有时无法加载，有时它可以工作：

```
<img src="straightlogo/what.png" class="vm" alt=" " original="straightlogo/what.png"> 
```

如何避免延迟加载对 vm 类的图像的影响？或者如何使这个 vm 类工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:37:30.393

[您可以使用.not()](http://api.jquery.com/not/)选择器排除元素。

```
jq("img").not(".vm").lazyload({ ... }); 
```

但是，如果您只指定要延迟加载的图像类别，则会更容易。例如，您可以使用 class `lazy`。另请注意，使用当前版本的插件，您可以在属性中定义占位符，在`src`属性中定义真实图像`data-original`。例如：

```
<img class="lazy" data-original=“img/example.jpg” src=“img/grey.gif” width=“640” height=“480”&gt; 
```

然后你可以做类似的事情：

```
jq("img.lazy").lazyload({ ... }); 
```

# sql - 如何检索具有多对多关系赌两个表的记录？

> ID：14964476
> 
> 赞同：0
> 
> 时间：2013-02-19T18:12:24.723
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有两张桌子：

1)`employee`有列：`e_id`, `e_name`, `address`;

2)`project`列：`p_id`, `p_name`, `start_Date`, `End_Date`.

这两个表之间存在多对多的关系。

我如何存储这种关系以及如何查询以检索“他正在工作的员工详细信息和项目详细信息”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:14:31.570

您需要一个交叉引用表：

```
EmployeeProjectXref: e_id, p_id 
```

e_id 和 p_id 的组合可以作为此外部参照表的主键。

然后，如果 @e_id 是一个保存所选员工 ID 的变量：

```
SELECT E.e_name, P.p_name
FROM EmployeeProjectXref EPX
JOIN Employee E ON E.e_id = EPX.e_id
JOIN Project P ON P.p_id = EPX.p_id
WHERE EPX.e_id = @e_id
ORDER BY P.Name 
```

有关更多详细信息，请将它们添加到 SELECT 列表中。例如：SELECT E.e_name、E.address、P.p_name、P.start_date、P.end_date等。这里的E是Employee表的别名，P是Project表的别名。此查询将为 EmployeeProjectXref 表中的每个条目返回一行（前提是它引用了 Employee 和 Project 表中的真实条目。）如果有一个员工和三个项目，您将获得三行。

# continuous-integration - Cruise Control .NET Web 仪表板未正确加载 CSS

> ID：14964477
> 
> 赞同：0
> 
> 时间：2013-02-19T18:12:27.560
> 
> 标签：continuous-integration, cruisecontrol.net, cruisecontrol, agile-processes

我无法弄清楚为什么我的巡航控制 .net 网络仪表板显示全部搞砸了（见图）。似乎无法正确加载所有样式表。

![在此处输入图像描述](../Images/e1ebd10455db2998e374da27fc947325.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:54:27.590

您使用的是什么版本的 IIS？

对于 Windows 7，您需要在图像和 css 在网站上运行之前启用 IIS7 功能：打开位于“通用 HTTP 功能”下的“静态内容”。

# iphone - 尝试以编程方式定位按钮，但根据 X，Y 不在正确位置

> ID：14964482
> 
> 赞同：0
> 
> 时间：2013-02-19T18:12:41.057
> 
> 标签：iphone, ios, cocoa-touch, cgrect, cgrectmake

我正在尝试定位一个按钮。

这是定位的代码..

```
[btnAbs setFrame:CGRectMake(57, 50, 106, 99)]; 
```

我得到的坐标来自这里：

![在此处输入图像描述](../Images/05261ddceb99efac663cda49aa58fdc4.png)

如您所见，xib 统计 x 和 y 为 57 和 192，这是我希望按钮所在的位置。

但是，当我在模拟器中运行它时，它的放置位置如下：

![在此处输入图像描述](../Images/16ecf8ec789551465b63a02194c15120.png)

显然我可以不断猜测和猜测 x 和 y 坐标，但这非常耗时。那么它是怎么做到的呢？请在查看图片时将链接连接在一起，因为我需要 10 多个代表来发布图片，或者请修改此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:22:24.353

问题在这里：

![Interface Builder 视图设置](../Images/e740c7e4b79e8cb96f1ddc256211562b.png)

Interface Builder 中的“原点”实际上并不影响视图如何以编程方式定位——它只是一个视觉辅助。如果单击该框左上角的点，X 和 Y 坐标将更改为视图的左上角，这是您要传递给的坐标`-setFrame:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:19:01.437

在我看来，就好像您让 GUI 设计器根据图像视图的中心对齐。当您在代码中执行此操作时，它将根据图像视图的左上角对齐。

此外，您的代码将其放置在 50 的任意位置，您的 GUI 设计器在此处显示任意坐标。192 个。

# php - PHP 读取受 Apache 保护的文件

> ID：14964486
> 
> 赞同：0
> 
> 时间：2013-02-19T18:12:57.627
> 
> 标签：php, apache, security

由于安全问题，我阻止了我的客户网站目录。在这些目录中有一些 pdf 文件，用户可以在登录应用程序时阅读。这样当他们点击pdf下载时，不会出现文件的URL。

顺便说一句，黑客可以找到它并读取这些文件，所以我封锁了该目录。

现在我需要让我的用户阅读 pdf。我怎么能在php中做？我的意思是，只有经过身份验证的用户才能读取这些文件。

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:16:11.307

由于 PHP 在 Apache Server 中运行，它“充当”服务器用户（例如 www-data），如果 www-data 用户具有访问权限，它将能够访问该目录。任何其他授权检查都必须通过身份验证和授权工作流程在 PHP 中完成。

# ios - 在目标视图控制器中获取 segue 的发送者

> ID：14964487
> 
> 赞同：12
> 
> 时间：2013-02-19T18:13:01.657
> 
> 标签：ios, objective-c, storyboard, segue

我有一个名为 Dashboard (D) 的 VC，它可以打开一个名为 Login (L) 的 VC 和一个名为 Register (R) 的 VC。登录也可以打开VC注册。

我尝试尽可能多地使用故事板，所以我用它创建了三个 Segue，D 到 L，D 到 R，L 到 R

因此，在 D -> L -> R 和 D -> R 的情况下，当我关闭 R 时，我必须在必要时关闭 L 并通知 D 他可以开始加载用户信息（在简而言之）。

因此，我想在目标 vc 中获取 Segue 的发件人，因为我知道我将它放在 performSegueWithIdentifier 的发件人条目中，如下所示：

```
[self performSegueWithIdentifier:@"SegueToFbRegister" sender:self]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T18:55:25.367

这听起来像是一个使用 Delegates 的好地方。在您的 RegisterViewController.h 中定义这样的协议

```
@protocol RegisterViewDelegate <NSObject>
- (void)tellRegisterDelegateSomething:(NSObject*)something;
@end 
```

然后在你的班级上保持一个指向你的代表的指针

```
@interface RegisterViewController : UIViewController
@property (weak, nonatomic) id <RegisterViewDelegate> delegate;
@end 
```

现在告诉呈现的视图控制器他们实现了你刚刚创建的新协议。这是在呈现该视图的其他视图控制器的 .h 文件中完成的。

在 LoginViewController.h

```
@interface LoginViewController : UIViewController <RegisterViewDelegate>
@end 
```

在 DashboardViewController.h

```
@interface DashboardViewController : UIViewController <RegisterViewDelegate>
@end 
```

在上述类的.m文件中，实现协议的方法

```
- (void)tellRegisterDelegateSomething:(NSObject*)something
{
} 
```

现在，当您从这样的任何一个呈现视图控制器执行转场时，您需要分配委托。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"SegueToFbRegister"])
    {
        RegisterViewController* destination = [segue destinationViewController];
        destination.delegate = self;
    }
} 
```

现在您可以调用呈现视图控制器（委托）并让它处理您需要像这样发回的任何信息（这将在您的 RegisterViewController.m 中调用）。

```
if ([self.delegate respondsToSelector:@selector(tellRegisterDelegateSomething:)])
{
    // Tell the delegate something.
    [self.delegate tellRegisterDelegateSomething:something];
} 
```

您需要通过两个控制器返回的实例遵循相同的基本模式。

```
@protocol LoginViewDelegate <NSObject>
- (void)tellLoginDelegateSomething:(NSObject*)something;
@end 
```

然后在你的班级上保持一个指向你的代表的指针

```
@interface LoginViewController : UIViewController
@property (weak, nonatomic) id <LoginViewDelegate> delegate;
@end 
```

现在告诉仪表板视图控制器它实现了协议。这是在显示此视图的仪表板视图控制器的 .h 文件中完成的。

在 DashboardViewController.h

```
@interface DashboardViewController : UIViewController <RegisterViewDelegate, LoginViewDelegate>
@end 
```

在 DashboardViewController 的 .m 文件中实现协议的方法

执行 segue 时，请遵循上述在视图控制器上设置委托的模式。现在，当在 LoginViewController 中调用委托方法时，您也在 DashboardViewController 中调用委托。

在 LoginViewController.m

```
- (void)tellRegisterDelegateSomething:(NSObject*)something
{
    if ([self.delegate respondsToSelector:@selector(tellLoginDelegateSomething:)])
    {
        // Tell the delegate something.
        [self.delegate tellLoginDelegateSomething:something];
    }
} 
```

现在你们都已连接，因此您可以通过两个控制器（或仅一个控制器）传回数据并对其进行处理。您将知道您所处的场景，因为在 DashboardViewController 中将根据可见的视图控制器调用不同的委托方法。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-19T18:30:35.313

我会通过让 R 在注册/登录完成时发送通知来做到这一点，并让 D 听它然后弹出所有内容并加载您的数据。

但是，如果您坚持获取对发件人的引用，您可以在目标 VC 上添加此属性并将其设置在源 VC 的`prepareForSegue:sender:`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T18:36:58.863

**为R**创建一个委托，并使**D**和**L**实现委托方法`prepareForSegue:sender`。用于分配**R的委托。当您在****R**中完成任务时，使用您的委托执行所需的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-27T10:22:29.763

另一种方法是使用 unwind segue。

将以下代码放在您的*仪表板*（**D**）视图控制器中。

```
@IBAction func loadUserInfoAfterRegistration(segue: UIStoryboardSegue) {

} 
```

*在 Interface Builder 中，对Register* ( **R** ) 视图控制器执行以下步骤：

1.  选择注册完成时将按下的按钮。
2.  **Ctrl** +**拖动**到视图顶部的退出符号。
3.  `loadUserInfoAfterRegistrationWithSegue:`从显示的列表中选择。

使用这种方法，*Register* ( **R** ) 视图控制器将始终导航到*Dashboard* ( **D** ) 视图控制器，无论它们之间是什么。它们之间的视图控制器不必被触及。*Dashboard* ( **D** ) 视图控制器中用户数据的加载也可以在上面声明的方法中进行自定义。

# java - 我可以将 Excel 工作表导入 Java 并按单元格信息排序吗

> ID：14964490
> 
> 赞同：2
> 
> 时间：2013-02-19T18:13:13.150
> 
> 标签：java, excel

我想知道是否通过Java我可以比较A列中的值以仅分离出每个人的姓名，然后进一步分离出B列中的最大数字是多少。

所以基本上我想为每个跑步者找到最佳时间

我主要只是想了解这个问题是否可能以及如何解决。

假设我有一个 Excel 电子表格，其中 A 列包含田径队参与者的姓名。这些名称重复多次。

B 列有每个跑步者在整个赛季中的跑步时间（以秒为单位）。

C列有时间的日期。

```
A                 B                     C
John             20                    1/26/2012
John             18                    1/27/2012
John             17                    1/28/2012
Cindy            21                    1/26/2012
Cindy            20                    1/27/2012 
Cindy            18                    1/28/2012 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:31:51.220

如果您[将 Excel 文件导出为 CSV](http://en.wikipedia.org/wiki/Comma-separated_values)，您可以：

*   用[BufferedReader加载它](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html)
*   [通过String.split( ";" )](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)将每一行文本拆分成一个字符串数组
*   [使用Integer.parseInt()](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29)将 B 列转换为整数
*   通过 String.split("/")、concat [2]+[1]+[0] 将日期转换为可排序为 YYYY/MM/DD
*   使用名称、时间和日期创建 Person（用户定义的类）的实例
*   将人员添加到[列表](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)
*   [使用用户定义的比较器](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)根据需要[对列表进行排序](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:19:43.857

[您可以使用Apache POI](http://poi.apache.org)等第三方库来加载数据。一旦你加载了你的数据模型，你可以做任何你认为合适的事情，包括排序。

# inheritance - Dojo 小部件声明字符串 - 它是临时的吗？

> ID：14964491
> 
> 赞同：3
> 
> 时间：2013-02-19T18:13:14.437
> 
> 标签：inheritance, widget, dojo, amd

我想知道这是否是临时的事情（'my.example.Widget'），现在 AMD 已经出现了，还是会出现？

```
declare('my.example.Widget', [], {

}); 
```

如果我有一个像上面定义的小部件，我如何检查小部件的类型？有没有一种适用于 AMD 的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:25:01.830

检查您的 Dijit 小部件是否继承自特定 Widget 或 Mixin 的方法是使用以下`isInstanceOf`函数：

```
var Widget = declare([_WidgetBase], {
     name: "Widget_Name",
     id: "some_id"
});
var widgetInstance = new Widget();
console.log(widgetInstance.isInstanceOf(Widget)); // True
console.log(widgetInstance.isInstanceOf(_WidgetBase)); // True
console.log(widgetInstance.isInstanceOf(_TemplatedMixin)); // False 
```

[你可以通过这个 jsfiddle](http://jsfiddle.net/kfUmu/)看到它的实际效果。

# vim - map 执行命令 vim

> ID：14964492
> 
> 赞同：1
> 
> 时间：2013-02-19T18:13:20.343
> 
> 标签：vim

我发现以下执行命令在 vim 中很有用：

```
:execute "normal! mqA;\<esc>`q" 
```

它进入正常模式，然后在光标位置标记“q”，到行尾并添加分号“;”，然后再次进入正常模式并返回原始光标位置。

我如何将所有这些命令映射到一个名为“scc”的键？

我试过了：

```
imap scc <Esc>:execute "normal! mqA;\<esc>`q"<CR> 
```

但是它没有用。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:22:44.117

你不需要`:execute - normal`，你可以简单地做（并使用“noremap”形式）：

```
inoremap scc <Esc>mqA;<Esc>`q 
```

但是您的地图键选择得不是很好（？），例如`<F3>`功能键3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:04:05.900

其他人已经处理了核心问题，但我应该这样做，而不是创建字母标记，您可以使用“上下文标记”：

```
inoremap <something> <Esc>m`A;<Esc>`` 
```

请注意，使用字母标记并没有错，但我认为它们在其他地方更有用。

# pandas - pandas 中基于 MultiIndex 的索引

> ID：14964493
> 
> 赞同：25
> 
> 时间：2013-02-19T18:13:30.553
> 
> 标签：pandas

如果我像这样定义一个分层索引的数据框：

```
import itertools
import pandas as pd
import numpy as np
a = ('A', 'B')
i = (0, 1, 2)
b = (True, False)
idx = pd.MultiIndex.from_tuples(list(itertools.product(a, i, b)),
                                names=('Alpha', 'Int', 'Bool'))
df = pd.DataFrame(np.random.randn(len(idx), 7), index=idx,
                  columns=('I', 'II', 'III', 'IV', 'V', 'VI', 'VII')) 
```

内容如下所示：

```
In [19]: df
Out[19]: 
                        I        II       III        IV         V        VI       VII
Alpha Int Bool                                                                       
A     0   True  -0.462924  1.210442  0.306737  0.325116 -1.320084 -0.831699  0.892865
          False -0.850570 -0.949779  0.022074 -0.205575 -0.684794 -0.214307 -1.133833
      1   True   0.603602  1.387020 -0.830780 -1.242000 -0.321938  0.484271  0.171738
          False -1.591730  1.282136  0.095159 -1.239882  0.760880 -0.606444 -0.485957
      2   True  -1.346883  1.650247 -1.476443  2.092067  1.344689  0.177083  0.100844
          False  0.001407 -1.127299 -0.417828  0.143595 -0.277838 -0.478262 -0.350906
B     0   True   0.722781 -1.093182  0.237536  0.457614 -2.500885  0.338257  0.009128
          False  0.321022  0.419357  1.161140 -1.371035  1.093696  0.250517 -1.125612
      1   True   0.237441  1.739933  0.029653  0.327823 -0.384647  1.523628 -0.009053
          False -0.459148 -0.598577 -0.593486 -0.607447  1.478399  0.504028 -0.329555
      2   True  -0.583052 -0.986493 -0.057788 -0.639798  1.400311  0.076471 -0.212513
          False  0.896755  2.583520  1.520151  2.367336 -1.084994 -1.233548 -2.414215 
```

我知道如何提取与给定列对应的数据。例如对于列`'VII'`：

```
In [20]: df['VII']
Out[20]: 
Alpha  Int  Bool 
A      0    True     0.892865
            False   -1.133833
       1    True     0.171738
            False   -0.485957
       2    True     0.100844
            False   -0.350906
B      0    True     0.009128
            False   -1.125612
       1    True    -0.009053
            False   -0.329555
       2    True    -0.212513
            False   -2.414215
Name: VII 
```

如何提取符合以下标准集的数据：

1.  `Alpha=='B'`
2.  `Alpha=='B'`,`Bool==False`
3.  `Alpha=='B'`, `Bool==False`, 列`'I'`
4.  `Alpha=='B'`, `Bool==False`, 列`'I'`和`'III'`
5.  `Alpha=='B'`, `Bool==False`, columns `'I'`, `'III'`, 以及`'V'`以后的所有列
6.  `Int`甚至

（顺便说一句，我做过 rtfm，甚至不止一次，但我真的觉得它难以理解。）

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-19T18:22:12.957

[xs](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.xs.html?highlight=xs#pandas.DataFrame.xs)可能是你想要的。这里有一些例子：

```
In [63]: df.xs(('B',), level='Alpha')
Out[63]:
                  I        II       III        IV         V        VI       VII
Int Bool                                                                       
0   True  -0.430563  0.139969 -0.356883 -0.574463 -0.107693 -1.030063  0.271250
    False  0.334960 -0.640764 -0.515756 -0.327806 -0.006574  0.183520  1.397951
1   True  -0.450375  1.237018  0.398290  0.246182 -0.237919  1.372239 -0.805403
    False -0.064493  0.967132 -0.674451  0.666691 -0.350378  1.721682 -0.791897
2   True   0.143154 -0.061543 -1.157361  0.864847 -0.379616 -0.762626  0.645582
    False -3.253589  0.729562 -0.839622 -1.088309  0.039522  0.980831 -0.113494

In [64]: df.xs(('B', False), level=('Alpha', 'Bool'))
Out[64]:
            I        II       III        IV         V        VI       VII
Int                                                                      
0    0.334960 -0.640764 -0.515756 -0.327806 -0.006574  0.183520  1.397951
1   -0.064493  0.967132 -0.674451  0.666691 -0.350378  1.721682 -0.791897
2   -3.253589  0.729562 -0.839622 -1.088309  0.039522  0.980831 -0.113494 
```

**编辑**：

对于最后一个要求，您可以链接`get_level_values`和`isin`：

获取索引中的偶数值（其他方法也可以这样做）

```
In [87]: ix_vals = set(i for _, i, _ in df.index if i % 2 == 0)
         ix_vals

Out[87]: set([0L, 2L]) 
```

将这些与`isin`

```
In [89]: ix = df.index.get_level_values('Int').isin(ix_vals)
In [90]: df[ix]
Out[90]:                I        II       III        IV         V        VI       VII
Alpha Int Bool                                                                       
A     0   True  -1.315409  1.203800  0.330372 -0.295718 -0.679039  1.402114  0.778572
          False  0.008189 -0.104372  0.419110  0.302978 -0.880262 -1.037645 -0.264265
      2   True  -2.414290  0.896990  0.986167 -0.527074  0.550753 -0.302920  0.228165
          False  1.275831  0.448089 -0.635874 -0.733855 -0.747774 -1.108976  0.151474
B     0   True  -0.430563  0.139969 -0.356883 -0.574463 -0.107693 -1.030063  0.271250
          False  0.334960 -0.640764 -0.515756 -0.327806 -0.006574  0.183520  1.397951
      2   True   0.143154 -0.061543 -1.157361  0.864847 -0.379616 -0.762626  0.645582
          False -3.253589  0.729562 -0.839622 -1.088309  0.039522  0.980831 -0.113494 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-14T05:29:19.000

您可以使用 pd.IndexSlice 以一种直观的方式（灵感来自[这个答案](https://stackoverflow.com/questions/29266600/how-to-slice-one-multiindex-dataframe-with-the-multiindex-of-another)）。一些示例（使用 pandas 0.18.0）：

```
df.sort_index(inplace=True)
idx = pd.IndexSlice
evens = np.arange(2,max(df.index.levels[1])+1,2)

df.loc[idx[['A','B'],evens,True],['III','V']]
Out[]: 
                     III         V
Alpha Int Bool                    
A     2   True -1.041243 -0.561155
B     2   True  0.381918 -0.148990

df.loc[idx[:,evens,:],:]
Out[]: 
                        I        II       III        IV         V        VI  \
Alpha Int Bool                                                                
A     2   False  0.791142  0.333383  0.089767 -0.584465  0.295676 -1.323792   
          True  -1.023160 -0.442004 -1.041243  1.613184 -0.561155  0.397923   
B     2   False  0.383229 -0.052715 -0.214347 -2.041429 -1.101059 -0.374035   
          True  -0.183386 -0.855367  0.381918 -0.261106 -0.148990  0.621537   

                      VII  
Alpha Int Bool             
A     2   False  0.717301  
          True  -0.133701  
B     2   False  0.166314  
          True   0.517513 
```

# excel - Excel - 检查行是否包含值*不止一次*

> ID：14964497
> 
> 赞同：0
> 
> 时间：2013-02-19T18:13:45.177
> 
> 标签：excel, excel-2010

我正在使用 Excel 2010，我在这个网站上到处搜索，但找不到答案......

我有包含学生成绩（数值）的行，其中数字 0 表示他们错过了课程。

如果该行有 3 或 4 次“0”，我希望该行以一种颜色突出显示，如果他们有 5 次或更多“0”，则以另一种颜色突出显示。

我该怎么做？我只在条件格式中看到平均值等，但我需要检查每一行的特定值 (0)，并且仅当该值出现 3 次或更多时突出显示该行。

非常感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:26:25.213

1.  选择要有条件地突出显示的所有行。
2.  使用“使用公式...”选项添加新规则
3.  要突出显示 >= 5 个零的行，请输入此公式
    `=COUNTIF(1:1,0)>=5`
4.  要突出显示具有 3 到 5 个零的行，请输入此公式`=AND(COUNTIF(1:1,0)>=3,COUNTIF(1:1,0)<5)`

这假设您的行范围从 1 开始。如果不是，您可能需要也可能不需要替换`1:1`为您想要有条件地突出显示的第一行，但我对此并不肯定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:27:24.010

您可以使用条件格式来执行此操作。

*   选择你有成绩的范围 - 我假设这从第 2 行开始
*   在主页选项卡中，转到“条件格式”>“新规则...”>“使用公式确定所需的单元格”
*   在公式框中，键入以下公式`=OR(COUNTIF(2:2,0) = 3, COUNTIF(2:21,0) = 4)`
*   选择 3 或 4 个 0 的单元格颜色

然后对 5 个 0 执行相同类型的公式 -`=COUNTIF(2:2,0) = 5`并为此选择格式。

希望这能解决问题！

# coding-style - linux中的第一个内核空间驱动程序

> ID：14964499
> 
> 赞同：1
> 
> 时间：2013-02-19T18:13:53.553
> 
> 标签：coding-style, raspberry-pi, embedded-linux, hardware-port

我能够使用 mmap 系统调用直接从用户空间控制 LED 操作来控制 GPIO。现在我想在内核空间中实现驱动程序。

我正在尝试为 ARM 控制器 RPi 在 Linux 中为 16*2 行 LCD 编写我的第一个内核空间设备驱动程序。现在我需要为此访问 GPIO。

在 AVR 中，我用这样的方式访问端口。

```
#define PORTA  *(volatile unsigned char*)0x30 
```

我正在阅读 LLD，它告诉使用 inb() 和 outb() 函数来访问 i/o 端口。
[http://www.makelinux.net/ldd3/chp-9-sect-2](http://www.makelinux.net/ldd3/chp-9-sect-2)

1>我们可以不使用#define端口地址来访问GPIO吗？

2> 使用 inb() & outb() 函数来控制 GPIO 有什么好处？

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:13:10.530

> 在 AVR 中，我用这样的方式访问端口。

```
#define PORTA  *(volatile unsigned char*)0x30 
```

这是一个不正确的定义，它使符号重载`PORTA`。
除了将端口地址定义为 0x30 之外，您还取消了对该位置的引用。
所以它实际上是一个*读取*操作，但名称中没有说明，即您确实为`READ_PORTA`.

> 1>我们可以不使用#define端口地址来访问GPIO吗？

当然你可以（而且应该）。

```
 #define PORTA (unsigned char *)0x30 
```

您会在 Linux 源代码树中的设备寄存器的头文件中找到类似的语句。在开发新的设备驱动程序时，我会为所有设备的寄存器和命令代码寻找一个头文件，`#defines`如果没有可用的文件，就开始编写一个。

> 2> 使用 inb() & outb() 函数来控制 GPIO 有什么好处？

代码是一个明确的 I/O 正在执行的声明，无论架构是使用 I/O 端口还是内存映射 I/O。
任何阅读以下内容的人都应该能够推断出发生了什么：

```
x = inb(PORTA); 
```

与使用宏时的混乱相比：

```
x = PORTA; 
```

上述使用重载宏的语句不会通过有能力的编码人员进行的代码审查。

您还应该熟悉并使用[Linux 内核编码风格](http://lxr.free-electrons.com/source/Documentation/CodingStyle)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:24:22.977

1) 使用定义经常简化您的任务。当然，你可以不为你的端口使用define，而是在你需要访问端口的任何地方使用这个结构。但是，如果您更改设备的设计，例如，如果您决定将 LED 连接到端口 B，您将不得不用另一个地址替换任何地方的 0x30。此外，它会使您的代码可读性降低。或者，您可以声明一个将访问您的端口的函数。如果声明了这样一个简单的函数`inline`（如果您的编译器支持内联），则性能没有差异。

2）使用的优点`inb()`是`outb()`你的程序的可移植性。如果这不是问题，那么直接访问您的端口就可以了。

# c# - 是否可以创建一个返回两种可能类型之一的方法？

> ID：14964502
> 
> 赞同：4
> 
> 时间：2013-02-19T18:13:55.200
> 
> 标签：c#, generics, dictionary, casting

我有 2 个数据结构：`Dictionary<string, string>`和`Multimap<string, string>`. Multimap 实际上只是引擎盖下的字典。我从[这个问题](https://stackoverflow.com/questions/380595/multimap-in-net)中提取了必须的代码。这是类定义：

```
public class Multimap<TKey, TValue> : Dictionary<TKey, HashSet<TValue>>
{ ... } 
```

两种数据结构都有一个`.Add(TKey key, TValue value)`方法。

我有一个类负责从某些文件中填充这些地图。我目前有以下两种方法：

```
 public Dictionary<string, string> PopulateDictionary(...)
    {
        Dictionary<string, string> returnDictionary = new Dictionary<string, string>();
        ...
        foreach (...)
        {
            ...
            returnDictionary.Add(key, value);
        }
        return returnDictionary;
    }

    public Multimap<string, string> PopulateMultimap(...)
    {
        Multimap<string, string> returnMultimap = new Multimap<string, string>();
        ...
        foreach (...)
        {
            ...
            returnMultimap.Add(key, value);
        }
        return returnMultimap;
    } 
```

如您所见，它们完全相同，都大约 25 行长，唯一的区别是它们的返回类型。我要做的就是将其浓缩为一种方法。我的第一次尝试是拥有该方法

```
public Dictionary<string, object> PopulateGenericDictionary(...)
{ ... } 
```

要么`object`要么。`string`_ `HashSet<string>`但是我没有太多运气从`Dictionary<string, object>`to 转换`Multimap<string, string>`。

从方法中提取逻辑是一种选择，但这不是很好。由于 foreach 循环，这两种方法中总会有一些逻辑。你最终会得到两倍小的方法，但仍然有两种相同的方法，这并不能真正解决问题。

这将是我理想的方法结构：

```
public Dictionary<string, string> PopulateDictionary(...)
{
    return MethodThatDoesAllTheLogic(...);
}
public Multimap<string, string> PopulateMultimap(...)
{
    return MethodThatDoesAllTheLogic(...);
}
public ??? MethodThatDoesAllTheLogic(...)
{ ... } 
```

我一直在摆弄铸造和泛型，但我就是无法让它工作。有任何想法吗？

**编辑**

我使用了millimoose的解决方案。这是我现在的代码：

```
 public Dictionary<string, string> GenerateDictionary(...)
    {
        Dictionary<string, string> returnMap = new Dictionary<string, string>();
        PopulateDictionary(returnMap.Add, ...);
        return returnMap;
    }

    public Multimap<string, string> GenerateMultimap(...)
    {
        Multimap<string, string> returnMap = new Multimap<string, string>();
        PopulateDictionary(returnMap.Add, ...);
        return returnMap;
    }

    private static void PopulateGenericDictionary(Action<string, string> addFunc, ...)
    {
        ...
        foreach (...)
        {
            addFunc(key, value);
        }
    } 
```

干净多了！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T18:19:34.133

要解决缺少通用接口的问题，您可以使用一堆委托类型参数来创建一个临时接口：

```
void MethodThatDoesAllTheLogic(Action<string, string> addFunc)
{
    // ...
    addFunc(key, value);
    // ...
}

public Dictionary<...> PopulateDictionary()
{
    // ...
    MethodThatDoesAllTheLogic(result.Add);
} 
```

（根据需要添加更多参数。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T18:26:47.007

我会避免让辅助方法创建实际的集合；让它只是填充现有的集合。这可以更有效地完成，因为该`Add`方法在两种情况下都具有相同的签名。我们可以只使用委托来接受该`Add`方法：

```
public static void PopulateMapping<TKey, TValue>(Action<TKey, TValue> addMethod,
    IEnumerable<TKey> data) //include other parameters needed to populate the data
{
    foreach (var key in data)
    {
        addMethod(key, default(TValue));
    }
} 
```

然后它将像这样使用：

```
public static Dictionary<string, string> PopulateDictionary()
{
    Dictionary<string, string> output = new Dictionary<string, string>();
    PopulateMapping<string, string>(output.Add, new string[] { "a" });
    return output;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T18:21:34.417

如果您只是在寻找 Add 方法，那么两个对象应该共享`IDictionary`. 但是，该[Add](http://msdn.microsoft.com/en-us/library/system.collections.idictionary.add.aspx)方法仅使用对象。这可能是您无需在方法中使用泛型即可获得的最接近的方法……但此时您再次失去了泛型的好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T18:40:47.187

看看这种方法是否有用：关键是对对象（字典或多图）的创建和获取值进行抽象——填充方法的两个区别。

```
public  Dictionary<string, TValue> Populate<TValue>( Dictionary<string, TValue> returnDict, Func<SomeType, TValue> valueProvider)
{
    string key = null;
    ...
    foreach (...)
    {
        ...
        returnDict.Add(key, valueProvider(value));
    }
    return returnDict;
} 
```

示例调用可以是：

```
public void Test()
{
    Populate(new Multimap<string, HashSet<string>>(), (t) => new HashSet<HashSet<string>>());
} 
```

我不确定 valueProvider 委托是否适合您的问题。尝试提供更多有关它的信息。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-19T18:19:39.690

如果除了 TValue 的类型之外，您的内部逻辑确实是相同的-我的意思是逐字逐句相同-那么您可以执行以下操作：

```
IDictionary<string, TValue> MethodThatDoesAllTheLogic<TValue>(whatever)
{
  // word for word-identical logic
} 
```

我使该方法将 TValue 作为其唯一的类型参数，因为这是唯一的区别（在您展示的示例中）：两种方法都将字符串作为第一个类型参数。

ETA：这假设 MultiMap 实现了`IDictionary<K,V>`. 既然你说它继承`Dictionary<K,V>`自我认为它确实如此。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-19T18:23:44.227

在具有泛型的 C# 中，您可以要求它们在我们的案例 Dictionary 中扩展或实现特定类，以下是您可能实现的方法。

```
public T Populate<T>(string val) where T : Dictionary<string, string>, new()
        {
            T returnDict = new T();
            returnDict.Add("key", "val");
            return returnDict;
        } 
```

# python - 在 python 中处理数字

> ID：14964513
> 
> 赞同：0
> 
> 时间：2013-02-19T18:14:31.323
> 
> 标签：python

我必须用 python 编写一个程序，它可以操纵串行数据输入以使其可用。

接收到的数据如下所示：

eb 90 eb 90 eb 90 00 a0 18 **d8 0a ba 17 00 00 30 00 a1 08 d7 0a 01 00 00 62 00 00 01 01 31 3e 01 00** cb 2f 7f

前 9 个字节和后 3 个字节始终相同。

所以第一步是只保留螺栓编号。

然后，因为它太容易了，将其中一些数字反转，因为有些是低字节优先但不是全部。

事实上，我需要从这个出发：

**d8 0a ba 17 00 00 30 00 a1 08 d7 0a** 01 00 00 62 00 00 01 01 31 **3e 01** 00

对此

**0ad8 17ba 0000 0030 08a1 0ad7** 01 00 00 62 00 00 01 01 31 **013e** 00

有人可以引导我至少找到正确的文档吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:33:11.450

目前我已经做到了。它的工作，但我不满意。

我评论了串行部分，并用控制器的示例答案替换了结果。

```
#!/usr/bin/env python

import serial, time

######## Serial request monitoring, always the same command
#ser = serial.Serial("/dev/ttyUSB0", 9600, timeout=0)
#ser.write("\xeb\x90\xeb\x90\xeb\x90\x01\xa0\x01\x03\xbd\xbb\x7f")
#time.sleep(1)
data = 'eb90eb90eb9000a01889091400000024017a087d0b0100002300000000320000004e4d7f'
#data = ser.readline()
#data = data.encode('hex')

######## results
sync = data[:12]                                             #6byte not needed
ident = data[12:14]                                          #1byte not needed
command = data[14:16]                                        #1byte not needed
datalength = data[16:18]                                     #1byte who care
batteryvoltage = data[20:22]+data[18:20]                     #2byte lowbyte first 
pvvoltage = data[24:26]+data[22:24]                          #2byte lowbyte first
res1 = data[26:30]                                           #2byte 
loadcurrent = data[32:34]+data[30:32]                        #2byte lowbyte first
overdischargevoltage = data[36:38]+data[34:36]               #2byte lowbyte first
batteryfullvoltage = data[40:42]+data[38:40]                 #2byte lowbyte first
loadstate = data[42:44]                                      #1byte
overload = data[44:46]                                       #1byte
loadshortcircuit = data[46:48]                               #1byte
res2 = data[48:50]                                           #1byte
batteryoverload = data[50:52]                                #1byte
overdischarge = data[52:54]                                  #1byte
fullindicator = data[54:56]                                  #1byte
chargingindicator = data[56:58]                              #1byte
batterytemp = data[58:60]                                    #1byte
chargingcurrent = data[62:64]+data[60:62]                    #2byte lowbyte first
res3 = data[64:66]                                           #1byte
check = data[66:70]                                          #2byte
exitcode = data[70:72]                                       #1byte

######## Convert
rbatteryvoltage = int(batteryvoltage, 16) / float(100)
rpvvoltage = int(pvvoltage, 16) / float(100)
rloadcurrent = int(loadcurrent, 16)  / float(100)
roverdischargevoltage = int(overdischargevoltage, 16) / float(100)
rbatteryfullvoltage = int(batteryfullvoltage, 16) / float(100)
rbatterytemp = int(batterytemp, 16) -30
rchargingcurrent= int(chargingcurrent, 16) / float(100)

######## units
amp = 'amperes'
volt = 'volts'
deg = 'degree'

######## text
tbatteryvoltage = 'Your battery voltage is:'
tpvvoltage = 'Your PV field voltage is:'
tloadcurrent = 'Your load consumption is'
toverdischargevoltage = 'Your discharged battery voltage is:'
tbatteryfullvoltage = 'Your full battery voltage is:'
tloadstate = 'the load is (1=on, 0=off)'
toverload = 'Your load is overloaded (1=yes, 0=no)'
tloadshortcircuit = 'The load is in short circuit (1=yes, 0=no)'
tbatteryoverload = 'Your battery is overloaded (1=yes, 0=no)'
toverdischarge = 'Your battery is overdischarged (1=yes, 0=no)'
tfullindicator = 'Your battery is full (1=yes, 0=no)'
tchargingindicator = 'You are charging (1=yes, 0=no)'
tbatterytemp = 'Your battery temperature is'
tchargingcurrent = 'You are charging at'

print tbatteryvoltage, rbatteryvoltage, volt
print tpvvoltage, rpvvoltage, volt
print tloadcurrent, rloadcurrent, amp
print toverdischargevoltage, roverdischargevoltage, volt
print tbatteryfullvoltage, rbatteryfullvoltage, volt
print tloadstate, int(loadstate, 16)
print toverload, int(overload, 16)
print tloadshortcircuit, int(loadshortcircuit, 16)
print tbatteryoverload, int(batteryoverload, 16)
print toverdischarge, int(overdischarge, 16)
print tfullindicator, int(fullindicator, 16)
print tchargingindicator, int(chargingindicator, 16)
print tbatterytemp, rbatterytemp, deg
print tchargingcurrent, rchargingcurrent, amp 

#ser.close() 
```

你怎么看待这件事？

# android - 需要从 sqlite 帮助中添加标记的 android 谷歌地图

> ID：14964517
> 
> 赞同：0
> 
> 时间：2013-02-19T18:14:44.057
> 
> 标签：android, sqlite, google-maps, google-maps-markers

我试图在来自 SQLite db 的谷歌地图上添加标记我有一个列表视图，我可以在其中看到来自 db 的纬度和经度。所以我知道数据库正在工作。我是 java 和 android 的新手。但我希望越来越好。我不确定我的代码是否正确，需要一些帮助。这是我写的代码：

列出 mapOverlays = mapView.getOverlays();

```
 Drawable herUAre = this.getResources().getDrawable(R.drawable.ic_launcher);

 CurrentLocationOverlay currentLocationOverlay = new CurrentLocationOverlay(herUAre);

 OverlayItem currentLocation = new OverlayItem(point, "Current Location", "Latitude : " + latitude + ", Longitude:" + longitude);

 currentLocationOverlay.addOverlay(currentLocation);

 mapOverlays.clear();

 mapOverlays.add(currentLocationOverlay);   

} 
```

上面的代码用一个针显示当前位置它可以工作:-)

下面的代码我不确定如何开始工作？？？？？？

```
 public ArrayList<OverlayItem> getLocations()
    {
        ArrayList<OverlayItem> locations = new ArrayList<OverlayItem>();

        String[] tableColumns = new String[]{"_id", "address", "description", "latitude", "longitude"};

        Cursor cursor = db.query("spots", tableColumns, null, null, null, null, null);

        cursor.moveToFirst();
        do{
    String adress = (cursor.getString(cursor.getColumnIndex("adress")));
    String description = (cursor.getString(cursor.getColumnIndex("description")));
    String lat1 = (cursor.getString(cursor.getColumnIndex("latitude")));
    Double lat = Double.parseDouble(lat1);
    String long1 = (cursor.getString(cursor.getColumnIndex("longitude")));
    Double lon = Double.parseDouble(long1);

    GeoPoint point = new GeoPoint((int) (lat * 1E6),(int) (lon * 1E6));
    locations.add(new OverlayItem(point, adress, description));     

        }
        while (cursor.moveToNext());
        return locations;

    }

// missing some code here to ad to my CurrentLocationOverlay class ore do i have to make a 
//new class for this ?? 
```

这是 CurrentLocationOverlay.class

```
public class CurrentLocationOverlay extends ItemizedOverlay<OverlayItem> {

    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();

    public CurrentLocationOverlay(Drawable defaultMarker) {
         super(boundCenterBottom(defaultMarker));
    }

     @Override
      protected OverlayItem createItem(int i) {
          return mOverlays.get(i);
      }

      @Override
      public int size() {
          return mOverlays.size();
      }

      public void addOverlay(OverlayItem item){
          mOverlays.add(item);
          setLastFocusedIndex(-1);
          populate(); // Calls the method createItem()
      }

      @Override
      protected boolean onTap(int arg0) {
          Log.d("Tapped", mOverlays.get(arg0).getSnippet());
          return true;
      }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:52:28.067

这里示例如何使用 SQLite：

公共类 DBHelper 扩展 SQLiteOpenHelper {

```
public static interface POSITION extends BaseColumns {
            String TABLE_NAME = "position";
            String LATITUDE = "latitude";
            String LONGTITUDE = "longtitude";
        } 
```

```
private static final String CREATE_TABLE = "CREATE TABLE IF NOT EXISTS "; 
```

```
private static final String CREATE_TABLE_POSITION = CREATE_TABLE + POSITION.TABLE_NAME + " (" 
                + POSITION._ID + " INTEGER PRIMARY KEY, " + POSITION.LATITUDE + " INTEGER, " 
                + POSITION.LONGTITUDE + " INTEGER);"; 
```

```
private static final String DATABASE_NAME = "Pointer";
        private static final int DATABASE_VERSION = 3; 
```

```
public DBHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        } 
```

```
@Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL(CREATE_TABLE_POSITION);
        } 
```

```
@Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + POSITION.TABLE_NAME);
            onCreate(db);
        } 
```

```
public void insertPosition(long latitde, long longtitude) {
            ContentValues values = new ContentValues();
            values.put(POSITION.LATITUDE, latitde);
            values.put(POSITION.LONGTITUDE, longtitude);
            getWritableDatabase().insert(POSITION.TABLE_NAME, null, values);
        } 
```

```
public Cursor getAllPoints() {
            return getReadableDatabase().query(POSITION.TABLE_NAME,
                    new String[] { POSITION.LATITUDE, POSITION.LONGTITUDE }, null, null, null, null, null);
        }
    } 
```

以及如何获得reqared坐标：

```
public class HelloGoogleMap extends MapActivity { 
```

```
@Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            MapView mapView = (MapView) findViewById(R.id.mapview);
            mapView.setBuiltInZoomControls(true);
            List&lt;Overlay&gt; mapOverlays = mapView.getOverlays();
            Drawable herUAre = this.getResources().getDrawable(R.drawable.ic_launcher);
            CurrentLocationOverlay currentLocationOverlay = new CurrentLocationOverlay(herUAre);
            OverlayItem[] currentLocation = new OverlayItem[10];
            DBHelper db = new DBHelper(this);
            db.insertPosition(50030936, 3622452);
            db.insertPosition(52033986, 3623859);
            db.insertPosition(56034932, 3625129);
            db.insertPosition(58039959, 3627329);
            Cursor allPoints = db.getAllPoints();
            int a = 0;
            while (allPoints.moveToNext()) {
                Log.e("" + allPoints.getLong(allPoints.getColumnIndex(DBHelper.POSITION.LATITUDE)), "" 
                        + allPoints.getLong(allPoints.getColumnIndex(DBHelper.POSITION.LONGTITUDE)));
                currentLocation[a] = new OverlayItem(new GeoPoint((int) allPoints.getLong(allPoints
                        .getColumnIndex(DBHelper.POSITION.LATITUDE)), (int) allPoints.getLong(allPoints
                        .getColumnIndex(DBHelper.POSITION.LONGTITUDE))), "Current Location", null);
                currentLocationOverlay.addOverlay(currentLocation[a]);
                a++;
            }
            allPoints.close();
            db.close(); 
```

```
mapOverlays.clear();
            mapOverlays.add(currentLocationOverlay);
        } 
```

```
@Override
        protected boolean isRouteDisplayed() {
            // TODO Auto-generated method stub
            return false;
        } 
```

```
} 
```

# mysql - sql检查选择返回null

> ID：14964519
> 
> 赞同：0
> 
> 时间：2013-02-19T18:14:52.487
> 
> 标签：mysql, sql, case-when, sql-like

我想做一个查询可以检查完全为空，例如：

```
select a where
case 
    when a like %b% 
        then a like %b% (if after search every row of table still return null) 
    else
             a like %c% (if have match in any row skip else statement) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:16:03.770

听起来您需要 COALESCE() 函数：

```
SELECT COALESCE(a, b, c, ..., 'default') 
```

这将返回参数列表中的第一个非空值，例如

```
COALESCE(null, null, 'hello') 
```

返回`hello`。

# django - 对消息实施未读/已读检查

> ID：14964520
> 
> 赞同：0
> 
> 时间：2013-02-19T18:14:54.997
> 
> 标签：django

我有一个消息模型。在这个模型中，我想添加一个已读/未读字段，我通过使用布尔字段来完成。现在，如果有人读到这条消息，我希望这个布尔字段变为真。我在我的应用程序的不同部分访问这些消息，因此手动更新字段会很乏味。

有什么方法可以根据某些条件获取一些消息，并且当从数据库中获取消息时，该字段会自动更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:25:42.180

为什么不在[自定义模型管理器](https://docs.djangoproject.com/en/1.4/topics/db/managers/)`read_message()`上创建一个方法。让此方法返回您想要的消息，同时更新返回的每条消息的字段。

您的新方法允许您替换`Message.objects.get()`为`Message.objects.read_message()`

```
class MessageManager(models.Manager):
    def read_message(self, message_id):
        # This won't fail quietly it'll raise an ObjectDoesNotExist exception
        message = super(MessageManager, self).get(pk=message_id)
        message.read = True
        message.save()
        return message 
```

然后在您的模型中包含经理 -

```
class Message(models.Model):
    objects = MessageManager() 
```

显然，您可以编写其他返回查询集的方法，同时将所有返回的消息标记为已读。

如果您不想更新代码（您调用的地方`Message.objects.get()`），那么您总是可以实际覆盖`get()`以更新该`read`字段。只需将`read_message`上面的函数名称替换为`get`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:25:06.877

根据您的数据库管理系统，您可以安装触发器：

PostgreSQL：[http ://www.postgresql.org/docs/9.1/static/sql-createtrigger.html](http://www.postgresql.org/docs/9.1/static/sql-createtrigger.html)

MySQL：[http ://dev.mysql.com/doc/refman/5.0/en/triggers.html](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)

SQLite：[http ://www.sqlite.org/lang_createtrigger.html](http://www.sqlite.org/lang_createtrigger.html)

当然，这需要在数据库中手动完成——在 Django 应用程序之外。

# ruby-on-rails - 由于某种原因无法创建 Makefile

> ID：14964525
> 
> 赞同：1
> 
> 时间：2013-02-19T18:15:04.783
> 
> 标签：ruby-on-rails, ruby, makefile, bundle, osx-mountain-lion

当我运行 bundle 或尝试单独安装它时，我无法安装 pg gem。我得到的错误是：“无法创建 Makefile。” 我正在运行 Mountain Lion，安装了 Xcode，并安装了命令行工具。我还通过自制软件安装了 Postregsql。

我相信这个错误是因为我无法创建 makefile，它已经作为阻止我做其他事情的错误浮出水面。

我得到的完整错误如下。

此错误发生在捆绑期间。其他 gem 安装得很好，或者被标记为正在使用，然后这个错误会终止包，而`installing pg (0.14.1) with native extensions`

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb 
checking for pg_config... yes
Using config values from /usr/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... no
checking for PQconnectdb() in -llibpq... no
checking for PQconnectdb() in -lms/libpq... no
Can't find the PostgreSQL client library (libpq)
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
--with-opt-dir
--without-opt-dir
--with-opt-include
--without-opt-include=${opt-dir}/include
--with-opt-lib
--without-opt-lib=${opt-dir}/lib
--with-make-prog
--without-make-prog
--srcdir=.
--curdir
--ruby=/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
--with-pg
--without-pg
--with-pg-dir
--without-pg-dir
--with-pg-include
--without-pg-include=${pg-dir}/include
--with-pg-lib
--without-pg-lib=${pg-dir}/lib
--with-pg-config
--without-pg-config
--with-pg_config
--without-pg_config
--with-pqlib
--without-pqlib
--with-libpqlib
--without-libpqlib
--with-ms/libpqlib
--without-ms/libpqlib

Gem files will remain installed in /Users/ericavirtue/.bundler/tmp/75812/gems/pg-0.14.1 for inspection.
Results logged to /Users/ericavirtue/.bundler/tmp/75812/gems/pg-0.14.1/ext/gem_make.out
An error occurred while installing pg (0.14.1), and Bundler cannot continue.
Make sure that `gem install pg -v '0.14.1'` succeeds before bundling. 
```

我真的不知道在这里做什么。我已经为此工作了两天。

编辑：

因此，当试图找到实现 Christian Rapp 建议的解决方案的路径时，我发现了这个建议：`sudo env ARCHFLAGS="-arch x86_64" gem install pg`它可以安装 pg。不幸的是，当我尝试运行`rails s`、`rake db:create:all`或`rake db:migrate`. 我将创建一个单独的问题来追踪这些问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:18:49.833

错误是这样的：

> 找不到 PostgreSQL 客户端库 (libpq)

您需要安装 PostreSQL（我建议使用[Homebrew](http://mxcl.github.com/homebrew/)，但可能还有其他可用下载）并尝试再次安装 gem。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T18:20:41.043

我没有在 MacOS 上使用自制软件，但它在哪里安装 libpq？MacPorts 正在使用 /opt 并且您的配置脚本对此一无所知。错误消息非常有用，只需提供类似的路径

> gem install pg -- --with-libpqlib=/opt/...

可能您必须使用另一个标志来提供必要的信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T18:21:56.697

**“找不到 PostgreSQL 客户端库 (libpq)”**

这就是无法创建您的 makefile 的原因。在您的路径中找不到您的 Postgres 库，特别是 libpq。我看到你安装了 Homebrew。我不使用自制软件，所以我不知道它是否为您设置了路径。

# javascript - 在尝试为另一个应用程序设置新设备时不释放 Twilio.Device 实例

> ID：14964527
> 
> 赞同：2
> 
> 时间：2013-02-19T18:15:08.707
> 
> 标签：javascript, twilio

我们正在使用 javascript 客户端开发一个会议应用程序。

**我们有一个场景，其中用户正在连接到其中一个应用程序，一段时间后需要连接到不同子帐户下的另一个 Twilio 应用程序**

第二次我们必须使用连接到另一个 Twilio 应用程序

```
 Twilio.Device.setup(token, { rtc: true,debug:true }); 
```

我们得到类似的日志

```
**[Device] Found existing Device; using new token but ignoring options**  
[Device] Unable to receive incoming calls  
[Device] Registered listener for event type "error"  
[Device] Registered listener for event type "connect"  
[Device] Registered listener for event type "disconnect"  
[Device] Registered listener for event type "ready"  
[Device] Registered listener for event type "offline"  
[Device] Invoke listeners for event type "ready"

**[Application-Ready-EvtHandler] Twilio.Device is now ready for connections : ready
[Application-Ready-EvtHandler] Twilio.Device is now ready for connections : ready (Raised Second Time for old Device)** 
```

**似乎以前的设备没有发布**

（触发就绪事件的次数 == 我们必须使用 Twilio.Device.Setup 的次数）

并且在连接到第一个 Twilio 应用程序后，我无法连接到后续的 Twilio 应用程序。

随后调用 会引发异常，即“Actionscript 中的错误。使用 try/catch 块查找错误。”**`Twilio.Device.connect({ agent: currentUserName, debug: true });`**

如何使用 twilio.js 库切换到后续的 Twilio 应用程序？

编辑： PS 请注意，这只是 IE 和 firefox 中的问题，它们不支持 web-rtc 标准。在 chrome 中，事件处理程序如前所述被调用，但它有效！

难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-10T17:50:09.530

Jash，我是来自 Twilio 的 Megan。

您在日志中看到的所有内容都是预期的行为。

如果您想在设备之间切换，则需要`.destroy()` [按照文档中的说](https://www.twilio.com/docs/api/client/device#destroy)明显式调用。这将终止活动和挂起的连接，触发离线事件处理程序。在您再次呼叫之前，设备将无法建立或接收新连接`Twilio.Device.setup()`。

# css - 宽度不同时的CSS倒梯形

> ID：14964528
> 
> 赞同：3
> 
> 时间：2013-02-19T18:15:15.323
> 
> 标签：css

我需要制作下面的形状，其中将包含一些文本。有时文本会更长，有时更短，所以我可以使用任何固定宽度。

```
**********
 *      *
  ****** 
```

这是我拥有的代码 - 我想知道是否有一种方法可以将图像标记到跨度的开头和结尾。高度不会改变，因此就跨浏览器解决方案而言，这可能是最好的......

```
<div class="trapizium_holder">
    <span id="trapizium"></span>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T19:04:57.593

## 只需要一个包装器 (IE8+)

[**这个小提琴**](http://jsfiddle.net/p7hYz/4/)表明只需要一个包装器。它使用单个伪元素来获取角度。包装器必须是浮动的或内联块。这是代码：

**HTML**

```
<div class="trapizium">
   Test text
</div> 
```

**CSS**

```
.trapizium {
    position: relative;
    float: left; /* wrap the text */
    clear: left; /* for demo */
    margin: 10px 20px; /* left/right margin will be diagonal width */
    /* needs some set height */
    font-size: 1em;
    line-height: 1em;
    padding: .2em 0;
    background-color: cyan;
}

.trapizium:before {
    content: '';
    height: 0;
    width: 100%;
    position: absolute;
    top: 0;
    left: -20px; /* stick out into margined area */
    z-index: -1; /* make it the background */
    border: 20px solid transparent; /* left/right diagonals */
    border-top: 1.4em solid cyan;
    border-bottom: 0px solid transparent;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:26:32.310

[小提琴](http://jsfiddle.net/Cs6fY/)

```
#trapizium {
    border-top: 100px solid blue;
    border-left: 50px solid transparent;
    border-right: 50px solid transparent;
    height: 0;
    width: 100px;
} 
```

您可能必须将文本绝对定位到您的形状中。这使用边框来制作形状，并且没有高度。

# bash - 有人可以在 bash 中解释这个 try/catch 替代方案吗？

> ID：14964529
> 
> 赞同：13
> 
> 时间：2013-02-19T18:15:40.510
> 
> 标签：bash, try-catch

所以我发现 bash 不处理异常（没有 try/catch）。对于我的脚本，我想知道命令是否成功。

这是我现在代码的一部分：

```
command = "scp -p$port $user:$password@$host:$from $to"
$command 2>/dev/null

if (( $? == 0 )); then
    echo 'command was successful'
else
    echo 'damn, there was an error'
fi 
```

我不明白的事情是：

*   第 3 行，为什么我必须`2`把`$command`?
*   第 5 行，这到底是什么`$`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-19T18:19:30.770

`$?`表示最后执行的命令的返回码。

`2>`意味着将`stderr`（标准错误流）输出重定向到`/dev/null`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-19T18:52:46.753

仅供参考，这也将起作用：

```
if some_command 2>/dev/null ; then
    echo 'command was successful'
else
    echo 'damn, there was an error'
fi 
```

# math - 从平面上的 2D 点转换为 3D

> ID：14964531
> 
> 赞同：3
> 
> 时间：2013-02-19T18:15:43.583
> 
> 标签：math, graphics, geometry

给定三角形表面上的 2D 点，三角形的每个角都是 3D 点，如何计算 2D 点对应的 3D 点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T18:38:10.210

要获得三角形上特定 2D 点的 3D 位置，请使用重心坐标插值 3D 顶点的位置：

```
2D coordinates:  u,v such that 0 <= u,v <= 1  and  u+v <= 1
  ->  barycentric coordinates:  add t such that  t+u+v = 1  ->  t = 1-(u+v)

3D vertices:  V1, V2, and V3
  ->  result = u*V1 + v*V2 + t*V3 
```

# java - 如何在 Spring 中搜索所有不适用于自动代理的事务方法？

> ID：14964534
> 
> 赞同：1
> 
> 时间：2013-02-19T18:15:59.060
> 
> 标签：java, spring, aspectj

我有一个使用带有 AspcetJ 的 Spring AOP 的应用程序，我想对其进行转换，以便它可以与 spring 自动代理一起使用。这意味着我需要通过代码库查找对 @Transactional 方法的调用，这些方法在同一类中调用其他 @Transactional 方法，因此不通过代理，以及私有方法上的 @Transactional 方法。

我可以使用什么工具或技术来自动查找可与 ApsectJ 一起使用但不适用于自动代理的 @Transactional 的所有用法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T22:24:30.147

好吧，您已经在使用 AspectJ，那么为什么不使用 AspectJ 动态地找出这些控制流并记录它们呢？因此，您可以通过使用 AspectJ 作为分析工具来摆脱 AspectJ。;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:30:49.443

我不知道有什么工具可以开箱即用地找到这些。因此，您可能需要自己编写；但这不是微不足道的。

您可以编写注释处理器来处理带有注释的方法/字段/类。请参阅[APT 文档](http://docs.oracle.com/javase/6/docs/technotes/guides/apt/index.html)了解如何编写和运行它。（请注意，在 Java 6 中，apt 内置在 javac 中。）

但是，找出哪些方法调用了哪些其他方法是相当困难的。由于您在谈论同一个类中的方法，所以它更容易一些。您可以为此使用字节码分析（有关一些相关库，请参阅[这篇文章](https://stackoverflow.com/questions/5205497/java-or-bytecode-ast-generators-available-so-that-i-can-run-a-couple-of-visito)`invokevirtual`）：只需解析类方法中的and`invokeinterface`指令，并查看它们是否与带有`@Transactional`注释的指令相匹配。

# sql - DB2 9.7 SQL 语法，我做错了什么？

> ID：14964538
> 
> 赞同：0
> 
> 时间：2013-02-19T18:16:06.810
> 
> 标签：sql, loops, db2, temp-tables

出于某种我无法控制的原因，我试图简单地提取过去 12 个月的数据。但是，基本上取决于数据的大小，我必须每天查询一个临时表并从那里开始。现在我是在 DB2 中编写脚本的新手，但不是一般的 SQL，所以我尝试了下面的代码（逻辑对我来说似乎很好）。

最初我只是对将生成多少记录感兴趣，但理想情况下我想运行第二个 SELECT 代码。我一直在使用 Data Studio，但我相信导出我需要通过 CLP 运行它的数据。现在我的问题是我在语法中遗漏了一些我无法弄清楚的东西，而且它正在我的脑海中。这很可能是非常基本的东西，或者我只是做错了。

如果我尝试 SELECT COUNT(*) 代码，我会收到以下错误： - 此行有多个标记 - DB2 for Linux、UNIX 和 Windows：“”应该在“FROM”之后。- DB2 for Linux、UNIX 和 Windows：“.” 是无效的。

如果我尝试其他 SELECT 代码，我会收到以下错误：- DB2 for Linux、UNIX 和 Windows：应使用“”而不是“SELECT MARKET_ID、SUPER_REGION、REGION、MARKET、POSA、DEST_ID、DEST_NAME、DEST_TYPE、STAT。 .. DB2 for Linux, UNIX, and Windows: "," 应该在 "FROM" 之后。DB2 for Linux, UNIX, and Windows: "," 应该在 "GROUP" 之后

我只是不明白。有人可以帮忙吗？之后 SESSION.l12_Dest 表似乎也无法让我尝试手动查看该表。

代码： -

```
--<ScriptOptions statementTerminator="@"/>

CREATE OR REPLACE PROCEDURE HWW.DM_CHECKLIST()
    LANGUAGE SQL
BEGIN
DECLARE GLOBAL TEMPORARY TABLE SESSION.L12_DEST 
(
    ACTUAL_DATE DATE, 
    MARKET_ID INTEGER,
    SUPER_REGION VARCHAR (100), 
    REGION VARCHAR (100), 
    MARKET VARCHAR (100),
    POSA VARCHAR (100),
    DEST_ID INTEGER,
    DEST_NAME VARCHAR (100),
    DEST_TYPE VARCHAR (30),
    STATUS_CODE SMALLINT,
    VISITORS INTEGER
)
ON COMMIT PRESERVE ROWS NOT LOGGED;
COMMIT;

FOR V_ROW AS 
    SELECT ACTUAL_DATE
    FROM DM.DATE_DIM
    WHERE ACTUAL_DATE 
        BETWEEN (CURRENT_DATE - 12 MONTHS) - DAY((CURRENT_DATE - 12 MONTHS)) DAYS + 1 DAYS 
            AND LAST_DAY((CURRENT_DATE - 1 MONTHS))
    DO           
        INSERT INTO SESSION.L12_DEST
        SELECT  B.ACTUAL_DATE,
                Z.HCOM_SRCH_DEST_PROPERTY_MKT_ID,
                Z.HCOM_SRCH_DEST_PROPERTY_MKT_SUPER_REGN_NAME,
                Z.HCOM_SRCH_DEST_PROPERTY_MKT_REGN_NAME,
                Z.HCOM_SRCH_DEST_PROPERTY_MKT_NAME,
                S.SITE_CNTRY_NAME,
                Z.HCOM_SRCH_DEST_ID,
                Z.HCOM_SRCH_DEST_NAME,
                Z.HCOM_SRCH_DEST_TYP_NAME,
                LZ.STATUS_CODE,
                COUNT(DISTINCT(F.VISITOR_KEY))AS VISITORS
        FROM DM.LODG_DEMAND_FACT F
        INNER JOIN DM.V_HCOM_SRCH_DEST_DIM Z 
            ON F.HCOM_SRCH_DEST_KEY = Z.HCOM_SRCH_DEST_KEY
        INNER JOIN DM.DATE_DIM B
            ON F.LOCAL_DEMAND_DATE_KEY = B.DATE_KEY
        INNER JOIN DM.SITE_DIM S
            ON S.SITE_KEY = F.SITE_KEY
        LEFT JOIN LZ.LZ_HCM_DESTINATION LZ
            ON Z.HCOM_SRCH_DEST_ID = LZ.DESTINATION_INT_ID
        WHERE F.BRAND_KEY = 101
            AND B.ACTUAL_DATE = V_ROW.ACTUAL_DATE
        GROUP BY    B.ACTUAL_DATE,
                    Z.HCOM_SRCH_DEST_PROPERTY_MKT_ID,
                    Z.HCOM_SRCH_DEST_PROPERTY_MKT_SUPER_REGN_NAME,
                    Z.HCOM_SRCH_DEST_PROPERTY_MKT_REGN_NAME,
                    Z.HCOM_SRCH_DEST_PROPERTY_MKT_NAME,
                    S.SITE_CNTRY_NAME,
                    Z.HCOM_SRCH_DEST_ID,
                    Z.HCOM_SRCH_DEST_NAME,
                    Z.HCOM_SRCH_DEST_TYP_NAME,
                    LZ.STATUS_CODE;
END FOR;

--SELECT COUNT(*) FROM SESSION.L12_DEST;

--EXPORT TO C:\TEMP\MARKETS.TXT OF DEL 
SELECT  MARKET_ID,
        SUPER_REGION,
        REGION,
        MARKET,
        POSA,
        DEST_ID,
        DEST_NAME,
        DEST_TYPE,
        STATUS_CODE,
        SUM(VISITORS)
FROM SESSION.L12_DEST 
GROUP BY    MARKET_ID,
            SUPER_REGION,
            REGION,
            MARKET,
            POSA,
            DEST_ID,
            DEST_NAME,
            DEST_TYPE,
            STATUS_CODE;

END @ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:35:57.503

要在存储过程中使用 EXPORT 实用程序，您必须将其包装在 ADMIN_CMD 过程中：

```
create procedure dm_checklist()
    language sql
begin

    declare global temporary table results (...) 
        on commit preserve rows;

    -- Steps to build / populate your temporary table

    call sysproc.admin_cmd('export to C:\file.del of del select * from session.results');

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T19:34:13.513

我认为您不能在存储过程中（至少在 DB2 中）执行简单的 select 语句。

当我尝试这个时，我得到了相同的结果：有史以来最无用的错误消息。（感谢 IBM）

但是，如果我在后面加上一些有效的声明`END FOR;`就没有问题。

如果您希望存储过程进行选择并向您显示答案，请执行以下操作：

```
CREATE OR REPLACE PROCEDURE DM_CHECKLIST()
    LANGUAGE SQL
    DYNAMIC RESULT SETS 1
BEGIN

DECLARE RS CURSOR FOR SELECT COUNT(*) FROM sysibm.sysdummy1;
OPEN RS;

END@ 
```

有趣的是`DYNAMIC RESULT SETS 1`生意。这告诉执行器我们将返回一个结果集并在命令行界面（cli）中显示它。

您可以拥有任意数量的结果集。您将在 cli 上看到结果，或者您可以务实地获得它们。

我确实尝试了该`EXPORT`命令，但它似乎没有用。

```
EXPORT TO "C:\TEMP\MARKETS.TXT" OF DEL SELECT COUNT(*) FROM sysibm.sysdummy1; 
```

看起来您不允许`EXPORT`在存储过程中使用，因为它是 DB2 命令而不是 SQL 语句。如果有某种方法可以做到这一点，我不会感到惊讶，但不是这样。

# perl - Perl 正则表达式和返回的匹配组数组

> ID：14964544
> 
> 赞同：2
> 
> 时间：2013-02-19T18:16:27.393
> 
> 标签：perl, regex

我是 Perl 的新手，我需要做一些正则表达式。我读到，当数组像整数值一样使用时，它会给出内部元素的计数。

所以我正在做例如

```
if (@result = $pattern =~ /(\d)\.(\d)/) {....} 
```

我在想它应该在模式匹配失败时返回空数组，但它仍然给我一个包含 2 个元素的数组，但具有未初始化的值。

那么我如何将模式匹配放入 if 条件中，这可能吗？

编辑：

```
foreach (keys @ARGV) {

    if (my @result = $ARGV[$_] =~ /^--(?:(help|br)|(?:(input|output|format)=(.+)))$/) {

        if (defined $params{$result[0]}) {
            print STDERR "Cmd option error\n";
        }

        $params{$result[0]} = (defined $result[1] ? $result[1] : 1);

    }
    else {
        print STDERR "Cmd option error\n";
        exit ERROR_CMD;
    }

} 
```

它是命令行选项的正则表达式模式，cmd 选项是长格式，前面有两个连字符，并且可能带有参数，所以 --CMD[=ARG]。我想要优雅的解决方案，所以这就是为什么我想把它放在没有一些序言等的 if 条件下。

EDIT2：哦，对不起，我在想@result 数组中的组总是从 0 开始计数，但只有来自分支的组才能访问，其中模式是成功的。因此，如果在我的代码命令中是“输入”，它应该在 $result[0] 中，但实际上它在 $result[1] 中。我想如果 $result[0] 未初始化，那么模式会失败，它会转到 if 语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:57:03.913

考虑以下：

```
use strict;
use warnings;

my $pattern = 42.42;

my @result = $pattern =~ /(\d)\.(\d)/;

print @result, ' elements'; 
```

输出：

```
24 elements 
```

上下文告诉 Perl 如何处理`@result`. 肯定没有 24 个元素！Perl 已经打印了由您的正则表达式捕获的数组元素。但是，如果我们执行以下操作：

```
print 0 + @result, ' elements'; 
```

我们得到：

```
2 elements 
```

在后一种情况下，Perl 解释 的标量上下文`@result`，因此将元素的数量添加到`0`。这也可以通过`scalar @results`.

编辑以适应修改后的发布：因此，代码中的条件：

```
if(my @result = $ARGV[$_] =~ /^--(?:(help|br)|(?:(input|output|format)=(.+)))$/) { ... 
```

`true`当且仅当匹配成功时计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T18:57:27.057

```
@results = $pattern =~ /(\d)\.(\d)/ ? ($1,$2) : (); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T18:40:23.880

试试这个：

```
@result = ();
if ($pattern =~ /(\d)\.(\d)/)
{
 push @result, $1;
 push @result, $2;
} 
```

=~ 不是等号。它正在进行正则表达式比较。

所以我上面的代码是将数组初始化为空，然后仅在正则表达式匹配时才分配值。

# sql - 创建表语法错误 - MS Access，SQL 视图

> ID：14964553
> 
> 赞同：1
> 
> 时间：2013-02-19T18:17:06.940
> 
> 标签：sql, ms-access, ms-access-2010

我不断收到 CREATE TABLE 语法错误，但我没有看到错误！是什么导致了错误？

**我的 SQL：**

```
CREATE TABLE my_employee
(
employee_id INTEGER PRIMARY KEY NOT NULL,
first_name VARCHAR(25) NOT NULL,
last_name VARCHAR(30) NOT NULL,
address VARCHAR(10) NOT NULL,
birthdate DATE,
salary NUMERIC(8,2) DEFAULT 15000,
marital_status CHAR(1)
); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T18:26:39.673

由于您的 DDL 语句包含`DEFAULT`，因此您必须使用 ADO 执行它。我将您的语句加载到一个字符串变量中，并从 Access 2007 执行它，如下所示：

```
CurrentProject.Connection.Execute strSql 
```

*工资*字段是十进制的，精度为 8，比例为 2，默认值为 15000。

`DEFAULT`是 Jet 4.0 添加的 Access SQL 功能之一。这些功能不适用于从 DAO 执行的语句。如果您使用 Access 的查询设计器来创建和执行语句，那么您使用的是 DAO。如果您使用`CurrentDb.Execute`. 但是`CurrentProject.Connection`是一个 ADO 对象，所以它可以具有`.Execute`Jet 4.0 的特性。

因为暗示`NOT NULL`之后没有必要注意。但是不会触发错误。只要您从 ADO 执行该语句，它就可以像您最初编写的那样工作。`PRIMARY KEY``PRIMARY KEY``NOT NULL``PRIMARY KEY NOT NULL`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-19T15:57:32.700

好吧，我在使用 Ms Access 2007 时遇到了同样的问题，但后来我解决了。
这是因为实际上出于安全原因，默认情况下禁用了某些功能。
当它向您显示时`syntax error`，您可以在某处或底部的菜单栏中看到消息：`Some Features Are Disabled For Security Reasons...`。
单击该消息，然后继续启用更多功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-25T11:49:24.507

正如 HansUp 所说：DDL 中的“默认”在这里不起作用。作为替代方案，您可以先创建没有默认值的表，然后通过 TableDef 添加默认值：

```
CurrentDb().Execute "create table my_employee ..."
CurrentDb().TableDefs("my_employee").Fields("salary").DefaultValue = 15000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T18:38:48.813

您的问题出在您的 PRIMARY KEY 声明中

```
CREATE TABLE my_employee
(
employee_id INTEGER NOT NULL,
first_name VARCHAR(25) NOT NULL,
last_name VARCHAR(30) NOT NULL,
address VARCHAR(10) NOT NULL,
birthdate DATE,
salary NUMERIC(8,2) DEFAULT 15000,
marital_status CHAR(1),
PRIMARY KEY (employee_id)
); 
```

# javascript - 如何更改 iframe？

> ID：14964555
> 
> 赞同：0
> 
> 时间：2013-02-19T18:17:20.700
> 
> 标签：javascript, html

我的页面中有 2 个 iframe。两者具有相同的来源。当我更改第一个 iframe 时，更改必须反映在第二个 iframe 中。它看起来像远程浏览。我怎样才能在javascript中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:21:31.513

```
var iframes = document.getElementsByTagName('iframe');

var src = iframes[0].src;
iframes[1].src = src; 
```

如果不知道您的页面做了什么或查看任何代码并不能真正为您提供更多...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:23:41.870

如果您使用 jQuery：

```
var frames = $('iframe');
frames.each(function() {
    this.attr("src", yourUrl);
}); 
```

# c# - 从 OpenXML 格式化单元格值

> ID：14964557
> 
> 赞同：1
> 
> 时间：2013-02-19T18:17:29.330
> 
> 标签：c#, excel, openxml

我将 xlsx 文件作为一个包打开并读取 xml 文件的内容。我能够获得我需要的共享字符串、边框等，并且比我使用 Interop 时快几个数量级。我遇到的唯一问题是在提取数字并根据 Excel 文件中的格式正确格式化它们时。

是否有一个通用函数接受一个值和一个格式并返回格式化的字符串？例如，如果我有值 31502008 和自定义格式 "$* #,##0_);$* (#,##0)" 是否有一种简单的方法可以获取 Excel 显示的内容（即 $31,502,008）。显然 Excel 知道如何处理它，但我有一些具有大量自定义格式的工作表，我想知道如何最好地确保我在代码中返回的字符串与 Excel 中看到的字符串相匹配。

有任何想法吗？

非常感谢您的帮助。

# php - 为 foreach() 提供的未定义索引和无效参数

> ID：14964559
> 
> 赞同：0
> 
> 时间：2013-02-19T18:17:31.740
> 
> 标签：php

如果没有从下面的代码中选择任何复选框，我正在努力生成输出。

HTML - 表单

```
<label>Item 1:</label><input type="checkbox" name="selected[]" value="Item 1"/>
<label>Item 2:</label><input type="checkbox" name="selected[]" value="Item 2"/>
<label>Item 3:</label><input type="checkbox" name="selected[]" value="Item 3"/> 
```

PHP 代码

```
<?php
foreach ($_REQUEST['selected'] as $key => $selected) {
echo "$selected";           
}         
?> 
```

代码在选择时输出正确的值，但会生成“未定义的索引：在...中选择”和“为 foreach() 提供的参数无效：”

谁能指出我正确的方向？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:22:38.687

您需要在使用之前检查该值是否已设置：

```
<?php
//$_REQUEST['selected'] is set and is array
if(isset($_REQUEST['selected']) && is_array($_REQUEST['selected'])){
    //Loop it
    foreach ($_REQUEST['selected'] as $key=>$selected) {
        echo htmlspecialchars($selected);
    }
}
?> 
```

这`Undefined index: extra`可能是其他一些错误，但您认为是这样。如果您看到一个`Undefined index`警告，这意味着您尝试访问未定义的数组键，例如未设置，则可以采取任何方式。

仅供参考：请注意，`$_REQUEST`将从 $_GET 和 $_POST 接受，如果您不希望从任何一个设置该值，最好更具体，因此如果您在表单中使用 POST，则使用`$_POST['selected']`

# objective-c - 是否可以在 Cocoa/ObjC 中“取消配对”蓝牙设备？

> ID：14964561
> 
> 赞同：10
> 
> 时间：2013-02-19T18:17:41.223
> 
> 标签：objective-c, cocoa, bluetooth, iobluetooth

我已经`IOBluetoothDevice`在我的 Mac/Cocoa 应用程序中配对了一个，并且想以编程方式“取消配对”它。也就是说，我想从系统偏好设置的蓝牙部分的左窗格中删除该设备。

我见过`[IOBluetoothDevice removeFromFavorites]`，但这只是删除了设备“收藏夹”属性旁边的心形图标——该设备仍列在左窗格中。

这可以通过 Cocoa 实现吗？

![系统偏好设置的蓝牙部分](../Images/5d90e9cb327d94ea01bee15c3882d485.png)

*在上图中，我想以编程方式从左窗格中删除“Apple Mighty Mouse”。*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-23T18:56:15.633

配对设备是系统偏好设置的一部分。

您可以在 中找到带有蓝牙首选项的文件`/Library/Preferences`，其名称为`com.apple.Bluetooth.plist`.

![com.apple.Bluetooth.plist](../Images/86e47e35a7f49ad83149e7e1ec828d3d.png)

但是，您不能直接编辑该文件。您应该使用框架中的`SCPreferences`类。`System Configuration`

请注意，用于访问/修改系统首选项的 API 非常低级。

编辑：如果在超级用户模式下运行，则以下代码有效。我自己不是 Mac OS 开发人员，但应该可以使用 an 初始化它`AuthorizationRef`并以用户模式运行它（用户将确认访问系统配置）。

```
SCPreferencesRef prefs = SCPreferencesCreate(kCFAllocatorDefault,
                                             CFSTR("Test"),
                                             CFSTR("/Library/Preferences/com.apple.Bluetooth.plist"));

const CFStringRef PAIRED_DEVICES_KEY = CFSTR("PairedDevices");

NSArray *pairedDevices = (__bridge NSArray *) SCPreferencesGetValue(prefs, PAIRED_DEVICES_KEY);

NSLog(@"Paired devices: %@", pairedDevices);

NSString *deviceToRemove = @"e4-32-cb-da-ca-2f";        

NSMutableArray *newPairedDevices = [pairedDevices mutableCopy];
[newPairedDevices removeObject:deviceToRemove];

Boolean valueSet = SCPreferencesSetValue(prefs, PAIRED_DEVICES_KEY, (__bridge CFPropertyListRef) [NSArray arrayWithArray:newPairedDevices]);

NSLog(@"Value set: %@", (valueSet) ? @"YES" : @"NO");

if (!valueSet) {
    NSLog(@"Error: %@", SCCopyLastError());
}

Boolean saved = SCPreferencesCommitChanges(prefs);

if (!saved) {
    NSLog(@"Error: %@", SCCopyLastError());
}

NSLog(@"Saved: %@", (saved) ? @"YES" : @"NO");

CFRelease(prefs); 
```

# oracle - 如何强制 where 子句中的函数在 oracle 中执行一次？

> ID：14964562
> 
> 赞同：2
> 
> 时间：2013-02-19T18:17:43.993
> 
> 标签：oracle, oracle11g

我正在尝试根据 IP 地址查询一个相当大的 IP/城市（3,000,000+ 行）表。我的源 IP 地址是点表示法，例如 127.0.0.1，并且表中有两个字段存储为整数，例如 2130706433。所以我需要像这样在 where 子句中将点表示法转换为整数；

```
select get_ip_integer('74.253.103.98') ,icb.*,icl.* 
from ip_city_block icb, ip_city_location icl 
where get_ip_integer('74.253.103.98') between  icb.startipnum and  icb.endipnum  and
      icl.locid = icb.locid; 
```

在相当快的数据库上，此查询需要 4 ~(4.33) 秒。以下查询需要 0.062 秒；

```
select 1258121058,icb.*,icl.* 
from ip_city_block icb, ip_city_location icl 
where icb.startipnum <= 1258121058 and  icb.endipnum >= 1258121058 and
      icl.locid = icb.locid; 
```

唯一的区别是我将函数 get_ip_integer 替换为函数返回的值。如果我所做的只是一次查找，我将执行第二个查询并完成它，但我不是。

我实际上想加入另一个包含许多点格式 IP 地址的表，而当我这样做时，它需要很长时间。为了好玩，我也试过；

```
select ip_integer ,icb.*,icl.* 
from (select get_ip_integer('74.253.103.98') ip_integer from dual),ip_city_block icb, ip_city_location icl 
where icb.startipnum <= ip_integer and  icb.endipnum >= ip_integer and
      icl.locid = icb.locid; 
```

这也花了大约 4.33 秒。

所以问题是如何强制 get_ip_integer 函数只执行一次并使用结果进行比较？

我将我的函数更新为 Deterministic，它似乎对原始查询有所帮助，但更复杂的查询仍然无法使用，性能明智。这里是;

```
SELECT COUNTRY, REGION,CITY, WEBLOG_USERID, WEBLOG_IP, WEBLOG_COUNT 
FROM (
  select WEBLOG_USERID,WEBLOG_IP,get_ip_integer(WEBLOG_IP) ip_integer,count(*) WEBLOG_COUNT 
  from weblog 
  where weblog_date > '20130217' 
  group by WEBLOG_USERID,weblog_ip
),ip_city_block icb, ip_city_location icl 
where ip_integer between icb.startipnum and icb.endipnum and icl.locid = icb.locid
ORDER BY 1,2,3; 
```

对此有什么想法吗？

经过我自己的一点思考，我想出了这个，虽然不是快得令人眼花缭乱，但它是可以接受的；

```
SELECT COUNTRY, REGION,CITY, WEBLOG_USERID, WEBLOG_IP, WEBLOG_COUNT 
FROM (
  select WEBLOG_USERID,WEBLOG_IP, count(*) WEBLOG_COUNT 
  from weblog 
  where weblog_date > '20130000' 
  group by WEBLOG_USERID,weblog_ip
),ip_city_block icb, ip_city_location icl 
where get_ip_integer(WEBLOG_IP) between icb.startipnum and icb.endipnum and icl.locid = icb.locid
ORDER BY 1,2,3; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:22:35.437

你为什么要为此使用 PL/SQL？根据您所说的，您正在做一些数学运算，为什么不直接在 SQL 中做呢？这也可以通过 INSTR 和 SUBSTR 的组合来实现，但使用 REGEXP_SUBSTR 看起来更漂亮。

```
select to_number(regexp_substr(ip, '[^.]+', 1, 1)) * power(2,24)
        + to_number(regexp_substr(ip, '[^.]+', 1, 2)) * power(2,16)
        + to_number(regexp_substr(ip, '[^.]+', 1, 3)) * power(2,8)
        + to_number(regexp_substr(ip, '[^.]+', 1, 4))
     , icb.*
     , icl.* 
  from ip_city_block icb
  join ip_city_location icl
    on icl.locid = icb.locid  
 where to_number(regexp_substr(ip, '[^.]+', 1, 1)) * power(2,24)
        + to_number(regexp_substr(ip, '[^.]+', 1, 2)) * power(2,16)
        + to_number(regexp_substr(ip, '[^.]+', 1, 3)) * power(2,8)
        + to_number(regexp_substr(ip, '[^.]+', 1, 4))
       between icb.startipnum and icb.endipnum 
```

[REGEXP_SUBSTR 输出的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!4/d41d8/7528)

如果你*必须*在 PL/SQL 中这样做，你应该做两件事：

1.  看看你是否可以将你的函数声明为[确定性](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/create_function.htm#LNPLS01370)的。
2.  尝试并利用[子查询缓存](http://www.oracle.com/technetwork/issue-archive/2011/11-sep/o51asktom-453438.html)。

看起来好像您已经在做 2，但您可以尝试通过使用 WITH 子句来扩展它：

```
with the_ip as ( select get_ip_integer('74.253.103.98') as ip from dual )
select the_ip.ip
     , icb.*
     , icl.* 
  from ip_city_block icb
  join ip_city_location icl
    on icl.locid = icb.locid
  join the_ip
    on the_ip.ip between icb.startipnum and icb.endipnum 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T18:27:55.007

您在双轨上走在了正确的轨道上，但是对于子查询缓存，您可以在选择中执行此操作。

```
select (select get_ip_integer('74.253.103.98') from dual) ip,
       icb.*,icl.* 
from ip_city_block icb, ip_city_location icl 
where get_ip_integer('74.253.103.98') between  icb.startipnum and  icb.endipnum  and
      icl.locid = icb.locid; 
```

你也应该用`result_cache`.

有关详细信息，请参见此处：[http ://www.oracle.com/technetwork/issue-archive/2011/11-sep/o51asktom-453438.html](http://www.oracle.com/technetwork/issue-archive/2011/11-sep/o51asktom-453438.html)

# c# - 静态字典需要是线程安全的 - 建议？

> ID：14964563
> 
> 赞同：0
> 
> 时间：2013-02-19T18:17:46.483
> 
> 标签：c#

我目前在我的班上有一本静态字典。虽然我已经在这本字典上实现了锁，但我得到了以下错误。

```
An InvalidOperationException has occurred. It reports a "collection was modified" error 
```

这样做的原因是，有时一种方法是使用 foreach 读取字典，而另一个线程正在向其中删除或添加项目。我读到添加

```
lock ( (  (IDictionary<string,string>)dict_object).SyncRoot ) 
```

在发生读取/写入/删除的所有操作上将解决问题，但是我继续收到消息

```
does not contain a definition of SyncRoot are you missing a using directive 
```

关于如何解决这个问题的任何建议？关于如何使我的静态字典线程安全的任何其他方式？我正在使用.Net 4.0

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T18:19:56.437

简单：使用`ConcurrentDictionary`类而不是`Dictionary`. 它是 .NET 4.0 中可用的线程安全字典实现。

[http://msdn.microsoft.com/en-us/library/dd287191(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd287191(v=vs.100).aspx)

您的错误的原因是在接口`SyncRoot`中定义并在类中实现。因此，为了访问它，您需要将您的实例转换为.`ICollection``explicitly``Dictionary``ICollection`

```
((ICollection)dict_object).SyncRoot 
```

# java - 在操作栏选项卡/片段之间切换时如何保持状态？

> ID：14964565
> 
> 赞同：4
> 
> 时间：2013-02-19T18:17:49.557
> 
> 标签：java, android

我有许多片段作为选项卡附加到 Android 操作栏。我可以毫无问题地在它们之间切换。但是，如果其中一个片段具有`TextView`（例如），并且我更改了 that`TextView`的文本，则如果我切换到另一个选项卡并返回，则不会保留新文本。

我已经尝试过覆盖`onSaveInstanceState()`，但是当我切换选项卡时，它似乎没有被调用，因为`savedInstanceState`每次`null`都`onActivityCreated()`被调用（即每次重新打开该选项卡时）。

我研究了改变`onPause()`它调用的方法`onSaveInstanceState()`，但`onPause()`无法访问状态包，所以我不知道该怎么做。

在选项卡之间来回切换时，在选项卡中保持状态的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T18:59:26.337

当您在片段之间切换时，不要分离片段只是隐藏。例子：

```
@Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
      FragmentManager fm = getFragmentManager(); 
      if(fm.findFragmentByTag(tab.getTag().toString()) == null){
           ft = fm.beginTransaction();
           FragmentContent contentfrag = new FragmentContent();
           ft.add(R.id.framelayout, contentfrag, tab.getTag().toString());
           ft.addToBackStack("BackStack" + tab.getTag().toString());
       }
       else{
           Fragment frag = fm.findFragmentByTag(tab.getTag().toString());
           ft.show(frag);
      }
}

    @Override
public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        Fragment frag = this.getFragmentManager().findFragmentByTag(tab.getTag().toString());
    ft.hide(frag);

} 
```

# ruby-on-rails - 如何正确执行用户设置的时间/频率的重复任务

> ID：14964567
> 
> 赞同：10
> 
> 时间：2013-02-19T18:18:07.703
> 
> 标签：ruby-on-rails, ruby, redis, whenever

用户订阅包含最新视频的电子邮件，但他们还设置了何时收到这些电子邮件。

```
Subscription(user_id, frequency, day, time, time_zone)

user_id  |  frequency  |  day    |  time   |  time_zone
1        |  daily      |  null   |  16:00  |  GMT
2        |  weekly     |  friday |  11:00  |  UTC
3        |  weekly     |  monday |  18:00  |  EST 
```

我们如何才能在用户在他们的时区选择的确切时间和频率发送电子邮件而不会搞砸（例如发送双重电子邮件或错过时间）

唯一的频率是每天和每周，如果每天，则该天为空。

我为此使用redis作为数据库，让我知道如何以正确的方式做到这一点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T09:31:35.393

我将使用[resque-scheduler gem](https://github.com/bvandenbos/resque-scheduler)扩展 fmendez 的答案。

首先，让我们创建发送电子邮件的工作人员

```
class SubscriptionWorker
  def self.perform(subscription_id)
    subscription = Subscription.find subscription_id

    # ....
    # handle sending emails here
    # ....

    # Make sure that you don't have duplicate workers
    Resque.remove_delayed(SubscriptionWorker, subscription_id)        

    # this actually calls this same worker but sets it up to work on the next
    # sending time of the subscription.  next_sending_time is a method that
    # we implement in the subscription model.
    Resque.enqueue_at(subscription.next_sending_time, SubscriptionWorker, subscription_id)
  end
end 
```

在您的订阅模型中，添加一种`next_sending_time`方法来计算下一次应发送电子邮件的时间。

```
# subscription.rb
def next_sending_time
  parsed_time = Time.parse("#{time} #{time_zone}") + 1.day

  if frequency == 'daily'
    parsed_time
  else
    # this adds a day until the date matches the day in the subscription
    while parsed_time.strftime("%A").downcase != day.downcase
      parsed_time += 1.day
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:03:17.727

这更像是一个系统级别的问题，而不是特定于 ruby​​ 的问题。

首先，将您所有的时间都存储为 GMT。时区不是真实的，除了作为偏移视图中时间的首选项设置（在用户表中）。进行数学运算的坐标系应该是一致的。

然后每个频率对应一个 cronjob 设置：每天、星期一、星期二等。实际上，从表中的数据来看，您不需要两列，除非您看到这正在发生变化。

然后，当 cron 触发时，使用调度程序（如 linux `AT`）来处理电子邮件何时发出。这更像是一个系统级别的调度问题，或者至少，我更相信系统可以处理这个问题。它需要处理系统重启的情况，包括服务和应用程序。

然而，需要注意的是，如果您要发送大量邮件，您真的不能保证邮件会根据偏好发送。实际上，您可能不得不将其限制为避免被转储/阻止（也就是说，1000 条/消息分布在一个小时内）。不同的网络会有不同的使用门槛。

所以基本上：

cron -> at -> 发送邮件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T02:39:26.420

我过去曾`delayed_job`用于类似的任务。可能您可以使用与`resque`. 本质上，您必须在当前作业结束时安排下一个作业。

```
class Subscription < ActiveRecord::Base
  after_create :send_email        
  def send_email 
    # do stuff and then schedule the next run
  ensure
    send_email
  end
  handle_asynchronously :send_email, :run_at => Proc.new{|s| s.deliver_at }

  def daily? (frequency == "daily");end
  def max_attempts 1;end

  def time_sec
    hour,min=time.split(":").map(&:to_i)
    hour.hours + min.minutes
  end

  def days_sec
    day.nil? ? 0 : Time::DAYS_INTO_WEEK[day.to_sym].days
  end

  def interval_start_time
    time = Time.now.in_time_zone(time_zone)
    daily? ?  time.beginning_of_day : time.beginning_of_week
  end

  def deliver_at
    run_at = interval_start_time + days_sec + time_sec
    if time.past?
      run_at = daily? ? run_at.tomorrow : 1.week.from_now(run_at)
    end
    run_at
  end        
end 
```

**重新安排注意事项**

更新代码以处理循环终止。您可以通过添加一个`boolean`名为`active`（`true`默认设置为）的列来处理此问题。要禁用订阅，请将列设置为 false。

```
 def send_email
    return unless active?
    # do stuff and then schedule the next run
  ensure
    send_email if active?
  end 
```

将`max_attempts`作业的 设置为 1。否则您将淹没队列。在上述解决方案中，`send_email`将尝试一次的作业。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T18:47:52.620

您可以使用**DelayedJob**或**Resque** Gems，它们将计划任务的每个*实例*表示为数据库表中的一行。有一些方法可以触发、安排和从日历中撤回任务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T18:21:05.337

我认为您可以为此目的利用此 gem：[https ://github.com/bvandenbos/resque-scheduler](https://github.com/bvandenbos/resque-scheduler)

问候，

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-24T11:46:39.567

我刚刚为我的项目实现了这个，我发现一个非常简单的方法是使用Whenever Gem（在这里找到[https://github.com/javan/whenever](https://github.com/javan/whenever)）。

要开始，请转到您的应用并输入

```
gem 'whenever' 
```

然后使用：

```
wheneverize . 
```

在终端。这将在您的配置文件夹中创建一个 schedule.rb 文件。

你把你的规则放在你的 schedule.rb 中（如下所示）并让它们调用某些方法——例如，我调用模型方法 DataProviderUser.cron 它将运行我在那里的任何代码。

创建此文件后，要在命令行上启动 cron 作业，请使用：

```
whenever
whenever -w 
```

和

```
whenever -c 
```

停止/清除 cron 作业。

github 上的 gems 文档非常有用，但我建议您将输出设置为您自己的日志文件（如下所示）。希望有帮助:)

在我的 schedule.rb 我有：

```
set :output, 'log/cron.log'
every :hour do
runner "DataProviderUser.cron('hourly')"
end

every :day do
runner "DataProviderUser.cron('daily')"
end

every '0 0 * * 0' do
runner "DataProviderUser.cron('weekly')"
end

every 14.days do
runner "DataProviderUser.cron('fortnightly')"
end

every :month do
runner "DataProviderUser.cron('monthly')"
end 
```

# function - matlab向量输出

> ID：14964569
> 
> 赞同：0
> 
> 时间：2013-02-19T18:18:13.847
> 
> 标签：function, matlab, vector, output

好吧，我尝试使用此代码进行矢量输出。只是一些我需要以矢量形式获得的功能

```
 function [smthOut] = myErf(start, wstep, final) 

     for k = start:wstep:final 
        error_func = 2/sqrt(pi) * erfTaylor(k);
        smthOut(final/wstep) = error_func;
        disp(['ON x=', num2str(k), ' RES IS f= ',  num2str(error_func)]);
     end;

  end 
```

但输出看起来像这样

```
>> s = myErf(0, 0.2, 2)
ON x=0 RES IS f= 0
ON x=0.2 RES IS f= -0.0029732
ON x=0.4 RES IS f= -0.022959
ON x=0.6 RES IS f= -0.073171
ON x=0.8 RES IS f= -0.1606
ON x=1 RES IS f= -0.28568
ON x=1.2 RES IS f= -0.44374
ON x=1.4 RES IS f= -0.62745
ON x=1.6 RES IS f= -0.82906
ON x=1.8 RES IS f= -1.042
ON x=2 RES IS f= -1.2614

s =

  Columns 1 through 8

         0         0         0         0         0         0         0         0

  Columns 9 through 10

         0   -1.2614 
```

穿什么？如何解决？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:25:39.203

由于`final/wstep`是常数（2/0.2 = 10），因此在循环的每次迭代中，数组的相同字段都会被结果填充（即`smthOut(10)`）。

你可以尝试类似的东西

```
function [smthOut] = myErf(start, wstep, final) 

   cnt = 1;
   for k = start:wstep:final 
      error_func = 2/sqrt(pi) * erfTaylor(k);
      smthOut(cnt) = error_func;
      disp(['ON x=', num2str(k), ' RES IS f= ',  num2str(error_func)]);
      cnt = cnt + 1;
   end;

end 
```

# php - 仅使用 ajax 加载新数据

> ID：14964571
> 
> 赞同：2
> 
> 时间：2013-02-19T18:18:20.743
> 
> 标签：php, jquery, mysql, ajax, pdo

我只需要使用 ajax 将新数据加载到我的 div 中。目前我正在加载所有数据，因为如果我删除数据库中的一条记录，它也会从我的聊天 div 中删除它。

这是我的js代码：

```
var chat = {}
chat.fetchMessages = function () {
    $.ajax({
        url: '/ajax/client.php',
        type: 'post',
        data:  { method: 'fetch', thread: thread},
        success: function(data) {
            $('.chat_window').html(data);
        }
    });
}    

chat.throwMessage = function (message) {
    if ($.trim(message).length != 0) {
        $.ajax({
            url: '/ajax/client.php',
            type: 'post',
            data:  { method: 'throw', message: message, thread: thread},
            success: function(data) {
                chat.fetchMessages();
                chat.entry.val('');
            }
        });
    }
}

chat.entry = $('.entry');

chat.entry.bind('keydown', function(e) {
    if(e.keyCode == 13) {

        if($(this).val() == ''){
        } else {
            chat.throwMessage($(this).val());
            e.preventDefault();
        }

    }
});

chat.interval = setInterval(chat.fetchMessages, 8000);
chat.fetchMessages(); 
```

我环顾四周，有人说如果您将时间戳传递给服务器并以这种方式加载新内容，但我似乎无法理解这一点。如果您需要php，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:24:14.333

对，所以时间戳是最有意义的。你需要做几件事：

1.  在后端，您需要让 client.php 在查询字符串中接受时间戳参数。返回数据时，不要只返回所有数据，而是让它返回自时间戳以来的所有内容（如果给定）。否则返回一切。
2.  第一次加载聊天客户端时，您应该做的第一件事是对返回当前服务器时间戳的新 PHP 文件进行 Ajax 调用。将其值作为数字存储在 Javascript 变量中。
3.  在 chat.fetchMessages() 期间，将时间戳变量的值增加自上次获取以来的时间（看起来像 8000 毫秒），并将其提供给 client.php，例如`url: '/ajax/client.php?timestamp=' + latestFetchTimestamp,`
4.  而不是替换所有 HTML 内容，而是追加。

# paint - MS 油漆克隆 - 如何存储形状

> ID：14964572
> 
> 赞同：0
> 
> 时间：2013-02-19T18:18:23.820
> 
> 标签：paint, flood-fill

我一直在尝试在 javascript 中创建一个 MS 绘画克隆。一切似乎都很完美，直到我考虑了填充桶工具。我使用的是 processing.js 库，基本上我使用的是内置的形状（椭圆、矩形和线）来绘制。我所做的是将用户绘制的每个形状的“类型”存储在一个数组中并相应地渲染它们。所以如果 shape[i]==1，那么它是一条线，shape[i]=2，它是一个椭圆等等。我这样做是为了按顺序呈现形状。即最后绘制的形状是在所有其他形状之上绘制的。

显然，这种方法不会让我有一个填充桶工具（可能是因为我不知道该怎么做）。我做了一些研究，发现我将不得不使用洪水填充算法。该算法涉及使用大量队列、堆栈和节点等。在我深入研究并考虑实际实现它之前，我想知道我是否必须取消我在这里所做的“存储在数组中”的概念。以及如何将像素表示为“节点”？因为根据洪水填充的维基百科条目，我会使用“节点”来做很多事情。任何想法/资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:07:59.753

解决了。无需重组。而且我不必使用节点或任何东西。我所要做的就是将相同颜色的像素推送并弹出到堆栈中。我在这里找到了我正在寻找的东西：

[http://www.williammalone.com/articles/html5-canvas-javascript-paint-bucket-tool/](http://www.williammalone.com/articles/html5-canvas-javascript-paint-bucket-tool/)

# linux - 永久链接到其他共享库

> ID：14964582
> 
> 赞同：0
> 
> 时间：2013-02-19T18:18:55.957
> 
> 标签：linux, shared-libraries, dynamic-linking, libtool

目前我正在使用 libtool 创建一个共享库“libmylib.so”，其语句如下：

```
libtool --mode=compile g++ -Wall -fPIC -shared $(CFLAGS) $(LFLAGS) $(LSTATIC)
libtool --mode=link g++ -shared -export-symbols-regex beam_ -rpath /usr/lib -lotherlib 
```

用它创建的库依赖于另一个（非静态）库“libotherlib.so”，这就是我使用语句“-lotherlib”的原因。

现在，当我构建一个链接到 libmylib.so 的可执行文件时，会发生一些奇怪的事情：我必须再次链接到 libotherlib.so，这意味着我也必须为这个可执行文件添加一个语句“-lotherlib”。

因此，在构建 libmylib.so 时似乎以前的 libotherlib.so 链接并不持久。但是我该如何改变呢？如何构建 libmylib.so 以便它隐含地知道它对共享库 libotherlib.so 的依赖关系？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:34:30.680

这个问题的答案似乎是一样的：**[在构建期间将静态库链接到共享库？](https://stackoverflow.com/questions/14889941/link-a-static-library-to-a-shared-one-during-build)**

很大的区别：当指定共享对象而不是静态对象进行链接时，它们不包括在内，但生成的共享库会记住它对这些 so 的依赖性。

# javascript - 用于报纸/杂志的钛加速器数据存储

> ID：14964587
> 
> 赞同：0
> 
> 时间：2013-02-19T18:19:06.037
> 
> 标签：javascript, android, titanium, appcelerator-mobile

我想使用 Titanium Appcelerator 开发用于查看报纸/杂志的应用程序，但我有一个问题，如何在手机上存储用户无法通过应用程序以外的其他方式访问的数据？该数据应该采用什么格式（blob、pdf、纯文本）？它们应该存储在数据库中，还是作为文件存储？你能在下面发表你的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:13:12.913

在 Titanium 中，您有多种存储数据的选项。首先，您应该检查作为输入获得的数据。它是 JSON 或 PDF 还是纯文本或其他什么。以下选项可用： - 使用集成数据库 (SQLite) 存储数据 - 当您的输入数据是纯文本或可以转换为文本或类似内容的 json 时，这可能是合适的。如果需要，您还可以将 blob 数据存储在数据库中。- 使用文件系统存储数据：在 iOS 和 Android（我认为不是 mobileweb）上，您可以将数据持久存储在文件存储中。如果您的输入数据是二进制文件（pdf 或类似文件），这很有用。

然而，在这两种情况下，用户都能够读取数据，也不能读取数据。- iOS：用户将能够读取保存在文件系统上的文档，也可能读取位于数据库中的数据 - Android：我认为在 android 上，这取决于设备是否具有 root 访问权限以及您存储该数据的位置（在应用程序内文件夹或外部/内部但可免费访问的存储）

在这两种情况下，访问这些数据并不容易。通常普通用户不会这样做。对于专业用户来说，阅读这些数据应该很容易。那么如何保护这些数据，使用户无法读取呢？

您可以将加密的数据存储在数据库中（默认情况下，钛中不提供数据库加密，因此您需要使用模块或自己加密数据）或者您将其加密存储（这也取决于您 - 没有现成的-to-use 方法）在文件系统上。

在我看来，第一个解决方案是更好的解决方案。我会做以下事情： - 获取数据（从服务器或其他地方，数据类型无关紧要） - 转换为 base64（对二进制文件有用且需要，但也适用于纯文本） - 使用您选择的加密算法加密 base64 - 存储在数据库中

因为这可能需要大量内存，您应该提供删除此数据以节省空间的选项。

# facebook - facebook like 按钮不适用于我的页面

> ID：14964588
> 
> 赞同：0
> 
> 时间：2013-02-19T18:19:08.677
> 
> 标签：facebook, facebook-like, facebook-javascript-sdk

这是我从开发页面获得的 facebook like 按钮的代码，但它不起作用。

JS SDK

```
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

以及要进去的HTML代码。

```
<div class="fb-like" data-href="https://www.facebook.com/Whenisdryday" data-send="true" data-width="450" data-show-faces="false"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T16:00:31.233

你的代码是对的。问题是你不是活的。.. 换句话说，将相同的代码放在您的 html5 文件中的 GoDaddy 或任何托管它的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-03T02:07:03.327

由于不工作，我认为您也希望页面中的个人资料图片也可以加载。我已经测试了您的代码，它会加载您告诉它的所有内容。这是一个基本示例，它也将加载到个人资料图片中。

```
<div class="fb-like-box" data-href="https://www.facebook.com/Whenisdryday" data-send="true" data-width="450" data-show-faces="false"></div> 
```

我所做的只是将类从 fb-like 更改为 fb-like box。

您可以通过向 div 标签添加更多数据来添加更多数据-...。这里有不同的版本，你可以玩。

```
<div id="fb-like-box" class="fb-like-box" data-href="https://www.facebook.com/Whenisdryday" data-width="450px" data-height="600px" data-colorscheme="light" data-show-faces="true" data-header="true" data-stream="true" data-show-border="true"></div> 
```

# php - 在列图中引入 php 变量

> ID：14964591
> 
> 赞同：0
> 
> 时间：2013-02-19T18:19:21.473
> 
> 标签：php, javascript, variables

如何在构建柱形图、折线图和饼图时引入 php 变量？

```
<?php $numero = 9; ?>

    <script type="text/javascript">
        var mes_I = "<?p h p echo $numero; ?>";
        var chart;
            $(function container_V () {
                var chart;
                $(document).ready(function() {
                    chart = new Highcharts.Chart({
                        chart: {
                            renderTo: 'container_V'
                        },
                        title: {
                            text: 'Média de Utilização de Animais'
                        },
                        xAxis: {
                            categories: ["mes_III", "mes_II", "mes_I"]
                        },
                        tooltip: {
                            formatter: function() {
                                var s;
                                if (this.point.name) { // the pie chart
                                    s = ''+
                                        this.point.name +': '+ this.y +'%';
                                } else {
                                    s = ''+
                                        this.x  +': '+ this.y;
                                }
                                return s;
                            }
                        },
                        labels: {
                            items: [{
                                html: 'Utilização',
                                style: {
                                    left: '40px',
                                    top: '8px',
                                    color: 'black'
                                }
                            }]
                        },
                        series: [{
                            type: 'column',
                            name: 'Mouse',
                            color: 'white',
                            data: [mes_I]
                        }, {
                            type: 'spline',
                            name: 'Average',
                            data: [3, 2.67, 3],
                            marker: {
                                lineWidth: 3,
                                lineColor: Highcharts.getOptions().colors[3],
                                fillColor: 'black'
                            }
                        }, {
                            type: 'pie',
                            name: 'Total consumption',
                            data: [{
                                name: 'LABCET',
                                y: 10,
                                color: '#006400'
                            }, {
                                name: 'LPEP',
                                y: 19,
                                color: '#00BFFF'
                            }],
                            center: [70, 75],
                            size: 100,
                            showInLegend: false,
                            dataLabels: {
                                enabled: false
                            }
                        }]
                    });
                }); 
            });

    </script> 
```

变量 mes_I ok，包含值 '9'。但是，当我输入给定的系列时，它不会出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:40:55.727

编码 PHP 变量以供在 JS 中使用的最佳方法是使用`json_encode`它们。这将处理数字、编码字符串并在它们周围加上引号，并处理嵌套对象。在这种情况下可能并不严格需要，因为它是一个数字，但这是一个养成的好习惯。

```
<script type="text/javascript">
var mes_I = <?php echo json_encode($numero); ?>; 
```

在您的示例代码中

```
<? p h p 
```

代替

```
<?php 
```

# c - C：函数在不同的实例中运行不同

> ID：14964606
> 
> 赞同：-1
> 
> 时间：2013-02-19T18:20:13.267
> 
> 标签：c, string, caesar-cipher, cs50

我正在关注 iTunes 大学：哈佛 CS50 讲座，以学习编程基础知识。我目前正在尝试为文本密码创建一个程序。这是整个程序的代码。

```
#include<stdio.h>
#include<cs50.h>
#include<stdlib.h>
#include<string.h>

int cyphmain (void);
int decyphmain (void);
int maincalc (int k);
int dmaincalc (int k);
int uppercalc (int u, int k);
int lowercalc (int u, int k);
int duppercalc (int u, int k);
int dlowercalc (int u, int k);

int 
main(void)                                  //Main Function begins by asking the user if he would like to Cypher or Decypher his text
{
    char h;
    printf("Do You Want Cypher(c) or Decypher(d)?:");
    scanf("%c",&h);                      
    if (h==99)                              //Checks ascii of "c"(99) and runs the cypher main function
        cyphmain();
    else if (h==100)                        //Checks ascii of "d"(100) and runs the decypher main function
        decyphmain();                   
    else 
        return 0;
}

int cyphmain (void)                         //Cypher Main Function
{
    int k;
    printf("What is the Cypher Number:");   //Gets the rot number
    scanf("%d",&k);
        if (k>25)                           //Ensures that the User only choses a number from 1-25
        {   while (k>25)                    //Continues to ask user for a number until they input a value <=25
            {
                printf("Sorry Please Choose A Number from 1-25 only:");
                int l=GetInt();
                k=l;
            }
            maincalc(k);                    //as soon as a valid input is received maincalc function is run
        }    
        else                                //in this case a valid input has been  recieved and maincalc runs
            maincalc(k);   
     return 0;      
}

int decyphmain (void)                       //Decypher Main Function
{
    int k;
    printf("What is the Cypher Number:");   //Gets the rot number
    scanf("%d",&k);
        if (k>25)                           //Ensures that the User only choses a number from 1-25
        {   while (k>25)                    //Continues to ask user for a number until they input a value <=25
            {
                printf("Sorry Please Choose A Number from 1-25 only:");
                int l=GetInt();
                k=l;
            }
            dmaincalc(k);                   //as soon as a valid input is received maincalc funtion is run
        }    
        else                                //in this case a valid input has been recieved and maincalc runs
            dmaincalc(k);   
        return 0;
}

int maincalc(int k)                         //The Calculation Function for Cyphering
{
    char *s;
    printf("Please enter the phrase that you would like to code:");  
    scanf("%s",&s);
    int i=0;
    int n=strlen(s);

    while(i<n)
    {
        if(s[i]>=65&&s[i]<=90)              //For Uppercase letters
        {
            int u=s[i];
            int c=uppercalc(u,k);           //Hands off the character to a function to cypher Upper Case Letters
            printf("%c",c);
        }
        else if(s[i]>=97&&s[i]<=122)        //For Lowercase letters
        {
            int u=s[i];
            int c=lowercalc(u,k);           //Hands off the character to a function to cypher Lower Case Letters
            printf("%c",c);
        }
        else 
            printf("%c",s[i]);              //For non letters
        i++;
    }    
    printf("\n");
    return 0;
}

int uppercalc(int u, int k)                 //Algorithm used to cypher Upper Case     letters
{
    if(u+k<=90)
    {
        int c=u+k;
        return (c);
    }
    else 
    {
        if (((u+k)/26)==3)
        {
            int c=((u+k)%26)+52;
            return (c);
        }
        else
        {  
            int c=((u+k)%26)+78;
            return (c);
        }
    }
}

int lowercalc(int u, int k)                 //Algorithms used to Cypher lower case     letters
{
    if(u+k<=122)
    {
        int c=u+k;
        return (c);
    }
    else
    {
        if (((u+k)/26)==4)
        {
            int c=((u+k)%26)+78;
            return (c);
        }
        else 
        {
            int c=((u+k)%26)+104;
            return (c);
        }
     }
}

int dmaincalc(int k)                         //The Calculation Function for Decyphering 
{
    char *s;
    printf("Please enter the phrase that you would like to decode:");  
    scanf("%s",&s);
    int i=0;
    int n=strlen(s);

    while(i<n)
    {
        if(s[i]>=65&&s[i]<=90)              //For Uppercase letters
        {
            int u=s[i];
            int c=duppercalc(u,k);
            printf("%c",c);
        }
        else if(s[i]>=97&&s[i]<=122)    //For Lowercase letters
        {
            int u=s[i];
            int c=dlowercalc(u,k);
            printf("%c",c);
        }
        else 
            printf("%c",s[i]);          //For non letters
        i++;
    }    
    printf("\n");
    return 0;
}

int duppercalc(int u, int k)             //Algorithm to decypher Upper Case letters
{
    if(u-k>=65)
    {
        int c=u-k;
        return (c);
    }
    else 
    {
        if (((u-k)/26)==2)
        {
            int c=((u-k)%26)+78;
            return (c);
        }
        else
        {  
            int c=((u-k)%26)+52;
            return (c);
        }
    }
}

int dlowercalc(int u, int k)             //Algorithms to decypher lower case letters
{
    if(u-k>=97)
    {
        int c=u-k;
        return (c);
    }
    else
    {
        if (((u-k)/26)==3)
        {
            int c=((u-k)%26)+104;
            return (c);
        }
        else 
        {
            int c=((u-k)%26)+78;
            return (c);
        }
     }
} 
```

该程序首先通过插入字符“c”或“d”来询问用户他是想要 Cypher 还是 Decypher，然后运行 ​​cyphmain（如果是密码）或 dcecyphmain（如果是解密）函数。这工作正常

然后程序会询问用户的 rot 编号，然后要求用户输入一个短语。这也很好用。

但是，在输入单词以（de）cypher 后，程序因分段错误而崩溃，这使我相信错误在于 maincalc/dmaincalc 函数。（请注意，每个函数本质上都有两个副本，一个用于加密，另一个用于解密，除了文本中的一些更改以及加密或解密文本所涉及的实际数学之外，它们完全相同）。

这是一个错误的例子

```
Do You Want Cypher(c) or Decypher(d)?:d
What is the Cypher Number:2
Please enter the phrase that you would like to decode: Hello
Segmentation fault (core dumped) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:37:11.410

你的错误在这里：

```
char *s;
printf("Please enter the phrase that you would like to code:");  
scanf("%s",&s); 
```

这不会为字符串分配空间。您可以使用`malloc`来分配空间，也可以将字符串放在堆栈上。

```
char *s = malloc(sizeof(char) * 50); /* option 1*/
char s[50]; /* option 2 */ 
```

对于选项 1，请注意`sizeof(char)`always `1`，我只是为了完整起见将其放在那里。也不要忘记，`free(s)`当你用完字符串时你必须打电话。

# kendo-ui - 在 Kendo UI 排行榜网格中指示关系

> ID：14964607
> 
> 赞同：0
> 
> 时间：2013-02-19T18:20:15.073
> 
> 标签：kendo-ui, kendo-grid

我正在使用 Kendo UI Grid 为比赛创建记分牌。My DataSource 从数据库中接收团队名称及其相关排名的列表。因此，每个 JSON 对象都包含一个团队名称和该团队的排名。排名是简单的整数。

为了举例，假设有四支球队，他们各自的排名是1、2、3和3。换句话说，两支球队并列第三。以下是我对 Kendo UI Grid 的要求：

*   呈现的平局排名应在排名前有一个“T”。我写了一些Javascript来完成这个：http: [//jsfiddle.net/mwassmer/4FXdc/](http://jsfiddle.net/mwassmer/4FXdc/)
*   网格中的排名列应该是可排序的。因此，我假设网格列的“字段”属性必须引用数据源中的原始排名列，而不是标记与“T”关系的排名的“演示”版本。

我假设我需要使用列模板来合并我的 Javascript“关系”代码，但我不确定如何去做。我之前成功使用过列模板，但不是这样。

下面是一些用于为平局添加“T”指标的演示 Javascript 代码。假设网格列模板是要走的路，我对如何将此代码合并到我的模板中感到困惑。

```
$(function () {
    var ranks = [1,2,3,3];    
    var counts = {};
    for(var i = 0; i< ranks.length; i++) {
        var num = ranks[i];
        counts[num] = counts[num] ? counts[num]+1 : 1;
    }

    $.each(ranks, function(index, value) {
        if (counts[value] == 1)
        {
            $("#ranksTies").append("<li>" + value + "</li>");
        }
        else
        {
            $("#ranksTies").append("<li>T" + value + "</li>");
        }            
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:49:11.027

我真的很容易为专栏模板做这项工作：

```
template:"T#= ++nameOfTheFieldd #" 
```

[这](http://jsbin.com/edamuj/451/edit)是一个可以玩的链接。

# c# - 创建泛型类以返回表

> ID：14964609
> 
> 赞同：0
> 
> 时间：2013-02-19T18:20:22.000
> 
> 标签：c#, generics, linq-to-sql

我正在尝试创建一个通用类，我可以在其中传递两个表并返回第一个表。这两个变量是我用来连接 linq 查询中的表的字符串值。我想要返回的是一个 IQueryable 值，但它一直返回一个 DataQuery 值。

这在我的 MVC 视图中失败并出现错误“方法'System.Reflection.PropertyInfo GetProperty(System.String)'没有支持的 SQL 转换”

下面的代码：

```
 var result = GetTable<Table1, Table2>("Table1id", "Table2id");

    public virtual IQueryable<T> GetTable<T, A>(string table1Variable,
                                        string table2Variable) 
                                                  where T : class
                                                  where A : class
    {
        var table1 = entityDatabaseDC.GetTable<T>();
        var table2 = entityDatabaseDC.GetTable<A>();

        return from entity in table1.AsQueryable()
               join entity2 in table2 on entity.GetType().GetProperty(table1Variable)
                                      equals  entity2.GetType().GetProperty(table2Variable)
               select entity;

    } 
```

它适用于单个表：

```
 var result = repository.GetTable<Table1>();

     public virtual IQueryable<T> GetTable<T>() where T : class
    {
           return entityDatabaseDC.GetTable<T>();
    } 
```

我想知道我正在尝试的是否可行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:48:04.960

也许你应该尝试这样的事情：

```
 public virtual IQueryable<T> GetTable<T, A>(string table1Variable,
                                        string table2Variable) 
                                                  where T : class
                                                  where A : class
    {
        var table1 = entityDatabaseDC.GetTable<T>();
        var table2 = entityDatabaseDC.GetTable<A>();

        return from entity in table1.AsQueryable()
               join entity2 in table2 on 
               entity.GetType().GetProperty(table1Variable).GetValue(table1,null)
                                      equals 
               entity2.GetType().GetProperty(table2Variable).GetValue(table2,null)
               select entity;

    } 
```

不是`.GetValue(table1,null)`在属性之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T21:26:06.983

问题是 linq-to-sql 试图将连接表达式（嗯，整个语句）翻译成 SQL。当然，没有办法`GetProperty`从 SQL 语句中进行调用。

所以我担心这永远不会奏效。但也许你可以按照这里的建议来做：[如何创建动态 LINQ 连接扩展方法](https://stackoverflow.com/questions/389094/how-to-create-a-dynamic-linq-join-extension-method)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:52:55.110

感谢您的输入。在对这个问题进行了更多研究之后，我决定退后一步，回到绘图板上思考这是否是我想要实现的正确解决方案以及它是否有益。

# c# - 在asp日历中切换多个日期

> ID：14964610
> 
> 赞同：0
> 
> 时间：2013-02-19T18:20:28.570
> 
> 标签：c#, asp.net

我正在处理一个有 12 个日历的页面。每个月一个。有没有一种方法可以让用户点击天，这会将它们从红色切换为蓝色。然后，当我在服务器上回发时，我希望能够看到标记为红色的日期。

这样的事情怎么能做到？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:25:47.373

默认的 ASP.NET 日历控件不支持这一点。

但是，有一个自定义控件可以帮助您。我自己没有使用过它，所以我不能完全保证它。

[http://forums.asp.net/p/1032656/1420001.aspx](http://forums.asp.net/p/1032656/1420001.aspx)

# javascript - javascript中定义的全局变量再次变为未定义

> ID：14964611
> 
> 赞同：1
> 
> 时间：2013-02-19T18:20:31.253
> 
> 标签：javascript

```
<!DOCTYPE html>
<html lang="en">
<head><meta charset="utf-8" />
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false&region=vi&language=vi">    
    </script>

    <script type="text/javascript" src="jquery-1.7.1.min.js"></script>
    <script type="text/javascript">
        var map;
    </script>
    <style type="text/css">
        html {
            height: 100%;
        }

        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body onload="initialize()">
    <div id="map_canvas" style="width: 100%; height: 100%"></div>

    <script type="text/javascript">
        function initialize() {
            var mapOptions = {
                center: new google.maps.LatLng(10.79, 826.694),
                zoom: 13,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("map_canvas"),
                mapOptions);
        }
    </script>    

    <script>            
        alert(map);
    </script>

</body>
</html> 
```

我的一些函数需要使用该`map`变量，但是，我不断收到抱怨`map`变量身份不明的警报。我怎样才能让浏览器记住地图是在上定义的`map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);` 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:22:55.300

那是因为您调用函数`initialize()`onLoad，这意味着映射变量被分配 onLoad。但是剧本

```
<script>            
    alert(map);
</script> 
```

`onLoad`在触发之前调用

尝试：

```
<script type="text/javascript">
    function initialize() {
        var mapOptions = {
            center: new google.maps.LatLng(10.79, 826.694),
            zoom: 13,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);

        alert(map);
    }

</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T18:22:53.920

因为

```
<script>            
    alert(map);
</script> 
```

之前被解雇

```
onload="initialize()" 
```

叫做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T18:24:47.990

`map`将`undefined`在`alert()`运行时。这是因为`alert()`将在您的`initialize()`方法之前执行。

`<script>`正文中的标签将立即运行，但`onload`您指定的函数在所有正文标签内容（及其中的脚本）都被解析和执行后才会运行。

所以一旦`initialize()`被调用，这个设置就会像你想要的那样工作，并且全局变量`map`将在任何地方都可用。

# oscommerce - osCommerce - 如何禁止客户使用邮政编码

> ID：14964613
> 
> 赞同：0
> 
> 时间：2013-02-19T18:20:45.147
> 
> 标签：oscommerce

所以我坐在朋友家，osCommerce 在线商店是这样配置的：只允许客户使用某些邮政编码。我需要添加更多邮政编码，但我找不到它们的存储位置。

它们是在数据库中还是在 csv 文件中，我现在点击了整个内容，找不到任何东西。我还尝试了 shopname/phpmyadmin.php。没有人可以在这里帮助我，谷歌也不能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:11:34.290

Out of Box osCommerce 2.x 没有在客户创建帐户时限制邮政编码选择的功能。

它可能在您正在处理的购物车上完成了一些扩展或定制。

为简单起见，我建议您下载代码并搜索正在显示的邮政编码，这将使您获得编码和一些提示。

另一种选择是下载完整的数据库并检查允许的邮政编码。这反过来会让您对与限制邮政编码的这个附加模块相关的数据库模式有所了解。

其他选项是检查 create_account.php

由于这不是标准功能，因此无法通过一些代码给出解决方案。

# javascript - Redis 消息事件中未抛出 TypeError

> ID：14964614
> 
> 赞同：0
> 
> 时间：2013-02-19T18:20:47.143
> 
> 标签：javascript, node.js, eventemitter, node-redis

我正在尝试实现一个事件系统。

Node 订阅 Redis 频道，接收消息并调用对象中不存在的方法。

完整的代码在这里。简单的。 [http://pastebin.com/8XnbaepE](http://pastebin.com/8XnbaepE) 为什么不抛出错误？

我不明白这种行为。

另一个奇怪的问题是，在下一次通过不同的通道和有效负载时，第一次向通道发布消息后，函数参数是旧的。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:55:44.937

如果你没有得到异常，这意味着 node-redis 捕获了它，并且没有重新抛出。这实际上是异步 i/o 代码中的一个好习惯，因为这将防止节点退出并杀死您的服务器。

如果您注册错误回调，您很可能会看到您的错误。

```
sub.on("error", function(err) {
  // deal with error
  // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:30:22.897

这是 node redis 模块中的一个错误。

[https://github.com/mranney/node_redis/pull/361](https://github.com/mranney/node_redis/pull/361)

# sql - Postgres 死锁

> ID：14964616
> 
> 赞同：1
> 
> 时间：2013-02-19T18:20:56.463
> 
> 标签：sql, postgresql-9.2, database-deadlocks

我在 Postgres 数据库中看到一些无法解释的死锁。简化相关查询，死锁涉及的事务之一是：

```
BEGIN;
UPDATE A SET CHUNK_ID=1, STATUS='PROCESSING' WHERE ID IN (
    SELECT ID FROM A
    WHERE CHUNK_ID IS NULL
    ORDER BY O_ID
    LIMIT 1000
    FOR UPDATE 
);
COMMIT; 
```

另一个是：

```
BEGIN;
UPDATE A SET STATUS='SENT' WHERE ID = 1; 
UPDATE A SET STATUS='SENT' WHERE ID = 2;
UPDATE A SET STATUS='SENT' WHERE ID = 3;
...
COMMIT; 
```

我的问题是这里怎么可能出现僵局？我想不出第一个事务可能导致死锁的任何情况，而不管同时运行的任何其他查询。

有没有这样的情况，即使用嵌套的 SELECT ... FOR UPDATE 的 UPDATE 可能是死锁的一部分？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:00:16.397

*（这是一个猜想，但希望是一个受过教育的猜想。）*

一切都取决于 SELECT ... ORDER BY O_ID ... FOR UPDATE 锁定行的顺序。如果O_ID的顺序和ID的顺序不同，那么完全有可能出现类似这样的情况：

```
ID    O_ID
--    ----
1     2
2     1 
```

*   事务 A 锁定 ID=2 的行。
*   事务 B 锁定 ID=1 的行。
*   事务 A 尝试锁定 ID=1 的行，但被迫等待事务 B。
*   事务 B 尝试锁定 ID=2 的行，但被迫等待事务 A。

警告：即使 O_ID 顺序与 ID 顺序相同，也有可能 ORDER BY 子句实际上并不能保证锁定的顺序（它只是保证返回结果的顺序）。不幸的是，这似乎没有记录。就其价值而言，Oracle 在锁定方面似乎并不（总是）遵守 ORDER BY，所以我在 PostgreSQL 下也要小心。

通常，解决死锁的方法是始终以相同的顺序锁定。假设 ORDER BY 实际上保证了锁定的顺序，您可以简单地在第二个事务中包含 SELECT ... ORDER BY O_ID ... FOR UPDATE 。或者，在第一个事务中使用 ORDER BY ID。

顺便说一句，您为什么首先明确锁定？你到底想用它来完成什么？

# symfony - configureShowFields 中的自定义查询

> ID：14964621
> 
> 赞同：0
> 
> 时间：2013-02-19T18:21:10.803
> 
> 标签：symfony, doctrine-orm, sonata-admin

我的问题很简单，但我没有解决方案。

如何创建自定义查询来配置 ShowFields？

所以在configureListFields中我们有一个`createQuery($context = 'list')`函数......在类似的情况下，我想创建我的自定义查询，但在configureShowFields中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:52:36.023

我解决了这个问题：

我找不到一个特定的功能来做到这一点，我也像这样在控制器中创建了一个函数 showAction：

```
public function showAction($id = null) {
    $id = $this->get('request')->get($this->admin->getIdParameter());

    $object = $this->admin->getObject($id);
    $em = $this->getDoctrine()->getManager();

    if (!$object) {
        throw new NotFoundHttpException(sprintf('unable to find the object with id : %s', $id));
    }

    if (false === $this->admin->isGranted('VIEW', $object)) {
        throw new AccessDeniedException();
    }
    $user = $em->getRepository('EsolvingEschoolUserBundle:User')->findOneByUserIdByLanguage($object->getId(), $this->getRequest()->getLocale());

    $this->admin->setSubject($object);

    return $this->render($this->admin->getTemplate('show'), array(
                'action' => 'show',
                'object' => $user,
                'elements' => $this->admin->getShow(),
    ));
} 
```

因此，在我的存储库中，我进行了自定义查询，发布了解决方案，也许有人可以帮助

# ruby - 如何在考虑假期的情况下动态生成日期？

> ID：14964622
> 
> 赞同：1
> 
> 时间：2013-02-19T18:21:17.667
> 
> 标签：ruby

我试图弄清楚如何动态生成一系列日期。我需要考虑假期。我有一个日期数组，但是对于日期数组的每个成员，我想将它与一组假期进行比较，并在必要时移动日期。

每当有假期时，我都想选择那个假期之前的日期，但我需要考虑有多个假期的情况（例如周四和周五的假期，或者可能是 3 或 4 天的假期）。

这是我的工作代码，目前无法做我想做的事；知道我做错了什么吗？

```
dates = [array of dates]
holidays = [array of holidays]

dates.each do |date|
  adjust_for_holidays(date)
end

def adjust_for_holidays
  n = 0      
  while holidays.include? date  
    n += 1
    date = date - (n-1)
  end
 date 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:16:15.647

首先，您的方法没有正确数量的参数。日期也必须是一个实例变量。我会建议一个假期哈希，其中键是日期，值是该假期的天数。例如总统日和劳动节

```
{'2/18' => 1,
 '9/2'  => 1
} 
```

如果它包括日期，那么您将采用任何值。像这样的东西

```
def adjust_for_holidays(dates)
  holidays.each do |date, value|
    @date += value if @date.include?(date)
  end
end 
```

类似的东西。不过，不确定如何将特定天数添加到字符串日期中。生病让你弄清楚:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T19:27:14.030

我认为这就是你想要的：

```
require 'date'

dates = []
(1..28).each do |i|
  dates << Date.new(2012, 02, i) 
end

@holidays = [Date.new(2012, 02, 17), Date.new(2012, 02, 18)]
puts "HOLIDAYS: " + @holidays.inspect

def adjust_for_holidays(date)
  while @holidays.include? date  
    date = date - 1
  end
 date
end

d = dates.collect do |date|
  adjust_for_holidays(date)
end 
```

请注意，您在那里设置 date = date - (n-1) 并且 n 不断增加。

# sql - 我可以从 SQL 表中获取所有行并将它们计算在相同的函数或查询中吗？

> ID：14964623
> 
> 赞同：-1
> 
> 时间：2013-02-19T18:21:23.137
> 
> 标签：sql, isqlquery

那么我可以从 getAllProduktet 进行这两个查询吗？

```
 function getAllProduktet($kataloguID)
  {
$query = "SELECT produktet.ID, Pershkrimi, Qmimi,Fotografia, TVSH, Katalogu   from      produktet, tvsh, katalogu "
." where produktet.tvshID = tvsh.ID and produktet.kataloguID = katalogu.ID "
." and Statusi = 1";
if($kataloguID != "0")
    $query .= " and kataloguID = {$kataloguID}";

   global $lidhja;
$rezultati = mysql_query($query, $lidhja);
if(!$rezultati)
    die(" Gabim ".mysql_error());
return $rezultati;
    } 
```

以及执行此操作的另一个查询

```
$query_banner = mysql_query("SELECT * FROM produktet ORDER BY ID  LIMIT     $from,$max_show") or die(mysql_error());
while($show=mysql_fetch_array($query_banner)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:22:54.300

您可以在 php 中使用 mysql_num_rows 或在查询中使用 count(field)

# android - 50% 宽度错误 Chrome Android - 发际线

> ID：14964624
> 
> 赞同：0
> 
> 时间：2013-02-19T18:21:27.143
> 
> 标签：android, google-chrome, width

在 Android 上使用 Chrome 浏览这个 jsfiddle：http: [//jsfiddle.net/6ajtK/](http://jsfiddle.net/6ajtK/)

```
#left{ width:50%;...}
#right{ width:50%, left:50%;...}
#back{backround:blue;} 
```

2 个 50% 宽度和蓝色背景的 div。只有在 Android 上的 Chrome 上，有一条小线穿过（看图片）。

![Chrome-Android](../Images/1e8b41d59ca16988590d1810c929bbd9.png)

它也不适用于 px 大小！任何其他浏览器都没有问题...有人知道吗？这是一个错误吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:40:01.693

这看起来像是由绝对定位而不是宽度引起的错误。
如果你给 body “margin:2px”，蓝线会到周围的边缘。

我在[http://crbug.com/224525提交了一个错误](http://crbug.com/224525)

# c++ - 如何调用纯虚函数？

> ID：14964625
> 
> 赞同：0
> 
> 时间：2013-02-19T18:21:31.067
> 
> 标签：c++, pure-virtual

如何在这里调用纯虚函数“pvf()”？有人可以对此有所了解吗？..................................................... ......

```
#include<iostream>

using namespace std; 

class a
{
public:
    a()
    {
        this->pvf();
        this->p();
    }

    virtual int pvf() = 0;

    virtual void p()
    {
        cout << "\n p fun";
    }
};

int a::pvf()
{
    cout<<"\n pure";
}

class b : public a
{
    int i,j,k;

    void o()
    {
        cout<<"\n der";
    }
};

int main()
{
    //b b1; 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T18:29:44.103

在类型的构造函数内部`a`，对象仍然是 type `a`。任何对虚函数的调用都**不会**`a`在层次结构中分派任何覆盖器。这意味着`this->pf();`里面的调用`a::a();`会失败。

如果你真的想打电话`a::pf`，那么你必须为那个电话禁用动态调度，你可以通过添加额外的限定来做到这一点：（`a::pf()`或`this->a::pf();`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T18:26:57.217

我假设你的意思是`pf`，因为`p`它不纯。您可以通过指定非虚拟调用来调用它：

```
this->a::pf(); 
```

或者您可能会问，为什么您观察到从构造函数调用的纯虚函数，而不是派生类中可能缺少的任何覆盖？

从构造函数或析构函数调用虚函数会根据当前构造的类而不是最终派生类来选择函数。如果函数在当前类中是纯函数，那么行为是未定义的——如果它有一个实现，它可能会调用纯函数，或者调用其他覆盖，或者崩溃，或者任何你能想象到的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T06:18:13.127

```
#include<iostream>

using namespace std; 

class a
{
public:
    a()
    {

    }

    virtual int pvf() = 0;

    virtual void p()
    {
        cout << "\n p fun";
    }
};

int a::pvf()
{
    cout<<"\n pure";
}

class b : public a
{
    public:
    int i,j,k;

    int pvf(){cout<<" b pvf ";
    }
};

int main()
{
    b b; 
    b.a::pvf();

} 
```

# ios - 带有 RSS 的 iOS 照片查看器

> ID：14964631
> 
> 赞同：1
> 
> 时间：2013-02-19T18:21:47.103
> 
> 标签：ios, rss, photo-gallery

我有一个带有照片标题和网址的 RSS 提要，我想在这些照片中进行构建。做这个的最好方式是什么？我使用 MWPhotoBrowser，插入照片的方法是：

```
self.photos = [NSMutableArray array];
[photos addObject:[MWPhoto photoWithFilePath:[[NSBundle mainBundle] pathForResource:@"photo2l" ofType:@"jpg"]]];
[photos addObject:[MWPhoto photoWithURL:[NSURL URLWithString:@"http://farm4.static.flickr.com/3629/3339128908_7aecabc34b.jpg"]]];
[photos addObject:[MWPhoto photoWithURL:[NSURL URLWithString:@"http://farm4.static.flickr.com/3590/3329114220_5fbc5bc92b.jpg"]]]; 
```

如何用 RSS 做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:26:51.840

如果您想从 RSS 提要创建照片查看器，我建议您查看[MWFeedParser](https://github.com/mwaterfall/MWFeedParser)。您可以轻松获取每个项目的标题和 url，并根据需要显示它们。

1 - 使用 MWFeedParser，解析您的提要：

```
//feedURL would be your Photo RSS Feed
feedParser = [[MWFeedParser alloc] initWithFeedURL:feedURL]; 
```

2 - 在 MWFeedParser 委托方法 didParseFeedItem 中，将项目的链接添加到您的照片数组：

```
-(void)feedParser:(MWFeedParser *)parser didParseFeedItem:(MWFeedItem *)item{
    if (item) [photos addObject:[MWPhoto photoWithURL:[NSURL URLWithString:item.link]]];
} 
```

现在照片数组包含了你所有的 MWPhoto，你可以随心所欲地使用它们！

# mysql - 选择Null语句，有可能吗？

> ID：14964632
> 
> 赞同：2
> 
> 时间：2013-02-19T18:21:49.233
> 
> 标签：mysql

我正在创建一个使用登录机制的 Java 应用程序，为了对此进行测试，我正在使用

> 从表中选择登录名，其中密码 =“abc”。

这实际上是从表中选择一个元组，我将它传递给结果语句 rs 然后测试 rs.next() 如果它是真的，那么输入的用户名和密码是正确的。

我刚刚有一个问题，是否可以运行一个不返回数据但仍标记元组的 SELECT 语句？即查询应该返回一组与匹配数相等的行，但它们都应该为空。我不想使用 COUNT 和其他功能。我只是想知道，这在技术上是否可行？

例如

> 从表中选择无，其中密码 =“abc”。

**编辑：**我正在使用 MySQL

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T18:26:21.777

这是你需要的吗

```
SELECT null FROM  table where password= 'abc' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:29:39.227

我不知道您使用的是什么 sql server，但在 sqlite3、postgresql 和 mysql 中，您可以运行查询，例如`select '' from table where password='abc';`，每个找到的结果将返回 1 行包含一个空字符串。

# web-platform-installer - 升级后 WPI 4.5 错误

> ID：14964634
> 
> 赞同：5
> 
> 时间：2013-02-19T18:21:54.960
> 
> 标签：web-platform-installer

我刚刚在两台独立的 Windows 8 机器上将 Web Platform Installer 升级到了 4.5 版。（一台是物理机，另一台是VM）。我无法运行 WPI 4.5，两者都显示以下相同的错误：

> 解析 EntityName 时出错。第 42134 行，第 81 位。

**更新：** 确认这是 Microsoft 的产品列表错误。找到这个日志文件条目：

```
DownloadManager Information: 0 : Loading product xml from: https://go.microsoft.com/?linkid=9817844
DownloadManager Information: 0 : https://go.microsoft.com/?linkid=9817844 responded with 302
DownloadManager Information: 0 : Response headers:
HTTP/1.1 302 Found
Cache-Control: private
Content-Length: 175
Content-Type: text/html; charset=utf-8
Expires: Tue, 19 Feb 2013 18:23:59 GMT
Location: https://www.microsoft.com/web/webpi/4.5/webproductlist.xml
Server: Microsoft-IIS/7.5
X-AspNet-Version: 2.0.50727
X-Powered-By: ASP.NET
Date: Tue, 19 Feb 2013 18:24:59 GMT

DownloadManager Error: 0 : Error loading downloaded product file: 'System.Xml.XmlException: An error occurred while parsing EntityName. Line 42134, position 81.
   at System.Xml.XmlTextReaderImpl.Throw(Exception e)
   at System.Xml.XmlTextReaderImpl.Throw(String res, String arg)
   at System.Xml.XmlTextReaderImpl.ParseEntityName()
   at System.Xml.XmlTextReaderImpl.ParseEntityReference()
   at System.Xml.XmlTextReaderImpl.Read()
   at System.Xml.XmlLoader.LoadNode(Boolean skipOverWhitespace)
   at System.Xml.XmlLoader.LoadDocSequence(XmlDocument parentDoc)
   at System.Xml.XmlLoader.Load(XmlDocument doc, XmlReader reader, Boolean preserveWhitespace)
   at System.Xml.XmlDocument.Load(XmlReader reader)
   at Microsoft.Web.PlatformInstaller.LineInfoDocument.Load(XmlReader reader)
   at System.Xml.XmlDocument.Load(TextReader txtReader)
   at Microsoft.Web.PlatformInstaller.ProductManager.LoadDocument(String xmlPath)
   at Microsoft.Web.PlatformInstaller.ProductManager.LoadFromXml(String xmlFile, Boolean loadEnclosures)
   at Microsoft.Web.PlatformInstaller.ProductManager.Load(Uri productFileUrl, Boolean filterByArchitectureAndOS, Boolean loadEnclosures, Boolean useCachedVersion, String cacheDirectory, Architecture architecture, Int32 majorOS, Int32 minorOS, Int32 majorSP, Int32 minorSP, Int32 osType)' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:32:41.633

我真的很高兴谷歌向我指出了这个问题。在您发布此问题 2 分钟后，我收到了同样的错误*...*

这似乎是 Microsoft 服务器端错误，因为自从我开始输入此答案以来，它已经为我更正了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:55:33.330

有同样的错误。卸载 WPI，重新启动并重新安装。现在我得到的唯一错误是无法加载提要。

但它确实启动并且可以使用。

# ejb-3.1 - 通过在 bean 上使用拦截器记录与数据库的所有交互的模式

> ID：14964640
> 
> 赞同：0
> 
> 时间：2013-02-19T18:22:19.837
> 
> 标签：ejb-3.1, mybatis

我希望能够记录任何查询在我的数据库上花费的时间。我正在使用 MyBatis 来查询数据库。

目前，我有一个无状态 bean，上面有 select、update 等方法，并且我的 bean 的客户端（通过 @EJB 注释）调用这些方法。最重要的是，我在进行日志记录的无状态数据库交互 bean 上有一个类级别的拦截器。

通过对无状态数据库交互 bean 的任何调用，我打开一个会话，运行用户的查询，然后关闭会话，所有这些都在 try finally 块中。这很好，因为这样 EJB 客户端就不必担心关闭会话或记录查询花费了多长时间。

当 EJB 客户端想要对同一个数据库进行两次查询时，就会出现问题。我不能使用 XA 数据源，因为供应商不支持它。

我有一个解决方法，我实现了一个类似的无状态数据库交互 bean，它不会在每个选择、更新等方法中打开或关闭会话，而是通过使用 openSession() 和 closeSession() 方法。

我担心这仍然是一个无状态 bean，它可能会在客户端事务的中间被破坏，从而导致回滚。是这样吗？我应该让它成为一个有状态的bean吗？

我还编写了一个拦截器来实际为用户调用 openSession() 和 closeSession()，这样他们就可以注释他们的类或方法。

这似乎是一个很好的模式，还是有一个共同的模式来处理我失踪的这种情况？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:56:32.677

如果您只查询一个数据库，则不需要 XA 事务。现在，一个事务可以跨越多个 EJB 方法调用。如果在方法上需要事务注解，并且在调用该方法时存在活动事务，则该方法将在现有事务的范围内执行。事务也关联了持久性上下文，因此如果您让容器在您需要的地方注入 EntityManager（使用 @PersistenceContext 注释），您的问题就解决了。在这种情况下，您不需要手动关闭 EntityManager。

# android - 如何获取下载的文件名？

> ID：14964643
> 
> 赞同：0
> 
> 时间：2013-02-19T18:22:27.697
> 
> 标签：android, download

我已经使用 下载了一个文件`DownloadManager`，现在我需要在下载后自动解压缩该文件，有没有办法获取该文件的名称？

关于我的问题的更多信息：下载管理器正在下载多个任务，一旦一个任务完成，它会将这个完成广播给接收器，现在我的问题是如何将该文件的名称传递给接收器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:25:26.473

您提供了下载到`DownloadManager`. 因此，您已经知道“文件名”。下载完成后，您只需保留该信息即可使用。

# asp.net - 禁用仅具有 Formview 的页面的 Viewstate

> ID：14964644
> 
> 赞同：0
> 
> 时间：2013-02-19T18:22:29.687
> 
> 标签：asp.net, viewstate

1.  我有一个带有 Formview 的页面，它显示数据库中的一行表。

除了导航到其他页面之外，我没有其他操作要执行。

我可以禁用这样的页面的查看状态吗？对于这种情况，我拥有其中的所有功能

```
if (!Page.IsPostBack)
            {
//all the functionality
    } 
```

1.  我有另一个页面，其中包含 4 个转发器，仅显示 4 个不同类别的 10 个最新标题。此页面中没有其他数据绑定控件。只有我可以通过链接导航到其他页面。我也可以禁用这样的页面的视图状态吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:27:16.413

是的。如果您不打算检索绑定到这些控件中的数据，如果您不需要在回发时访问有关它们的任何内容，则可以在这些页面上毫无困难地禁用视图状态。

# forms - 循环遍历Oracle表单中datablock的所有记录

> ID：14964649
> 
> 赞同：8
> 
> 时间：2013-02-19T18:22:35.400
> 
> 标签：forms, oracle

我正在尝试学习 Oracle 表单（v6.0）。在按下按钮时的触发器中，我试图遍历数据块中的所有记录。到目前为止，我有以下代码：

```
BEGIN
    GO_BLOCK('MY_BLOCK');
    FIRST_RECORD;
    LOOP
    MESSAGE(:MY_BLOCK.DSP_NAME);
    EXIT WHEN :SYSTEM.LAST_RECORD = 'TRUE';
    NEXT_RECORD;            
    END LOOP;   
END; 
```

当我运行代码时，除了最后一个之外，所有 DSP_NAME 值都会显示。如果我添加：

```
MESSAGE(:MY_BLOCK.DSP_NAME); 
```

循环后，显示最后一条记录的 DSP_NAME 值。为什么会这样 - 在最后一次记录检查之前显示消息？什么是循环记录的正确方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T19:20:11.690

你的循环是正确的。我怀疑最后一条消息显示在表单底部的状态栏中，而不是作为弹出窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-25T08:32:15.263

要获得弹出窗口，请使用同一行两次：

```
MESSAGE(:MY_BLOCK.DSP_NAME);

MESSAGE(:MY_BLOCK.DSP_NAME); 
```

你会这样得到它。

# excel - 错误：无法获取 Range 类的 AutoFilter 属性

> ID：14964651
> 
> 赞同：0
> 
> 时间：2013-02-19T18:22:37.520
> 
> 标签：excel, vsto, autofilter

*在以下代码中，我仅在第二次调用 AutoFilter() 时*收到上述错误。

```
string FilterValue1 = tbSysCat1.Text.FilterDoesNotContain();
string FilterValue2 = tbSysCat2.Text.FilterDoesNotContain();
string FilterValue3 = tbSysCat3.Text.FilterDoesNotContain();

string[] SysCat = new string[6];    // EDIT: originally tried object[]; still got error
SysCat[0] = FilterValue1;
SysCat[1] = FilterValue1.ToUpper();
SysCat[2] = FilterValue2;
SysCat[3] = FilterValue2.ToUpper();
SysCat[4] = FilterValue3;
SysCat[5] = FilterValue3.ToUpper();

VApplication.ActiveSheet.Range[VWorkingRange].AutoFilter(9, Missing.Value, Missing.Value, Missing.Value, true);
VApplication.ActiveSheet.Range[VWorkingRange].AutoFilter(9, SysCat, MSExcel.XlAutoFilterOperator.xlFilterValues, Missing.Value, true); 
```

*注意：FilterDoesNotContain() 是为“不包含”添加 Excel 特定通配符的扩展方法。*

根据我的其他研究，该错误表明 AutoFilter 在运行时无法与 Range 对象关联（因为它是动态类型）。但是，它在第​​一次通话中关联得很好。**这是令人费解的部分。**

第一次调用是为了清除第 9 列的过滤器。

环境：VS2010 中的 VSTO 使用 .NET 4.0 **（编辑：MS Excel 2007 Pro）**

感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:40:33.350

抱歉，我没有 Excel 可以试用。
但是，更改以下行

`VApplication.ActiveSheet.Range[VWorkingRange].AutoFilter(9, Missing.Value, Missing.Value, Missing.Value, true);`

至

`VApplication.ActiveSheet.Range[VWorkingRange].AutoFilter(Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);`

或者

`VApplication.ActiveSheet.Range[VWorkingRange].AutoFilter();`

这是清除`AutoFilter`.
即当您单击自动过滤器按钮时，所有列都会获得过滤器，而不是特定的。
结果，您将不得不清除自动过滤器（通过不告诉它列）。

编辑：以防万一，生成您想要在 VBA 中执行的宏。如果可行，请将其转换为 c#。

编辑：要添加多个条件，您可以获得对`ActiveSheet.AutoFilter`属性的引用（一旦自动过滤器生效）。对这个属性，你可以进一步判断。

看看这个[页面](http://msdn.microsoft.com/en-us/library/office/bb255835%28v=office.12%29.aspx)，特别是~~您可以使用添加标准~~`Filters`的集合~~。~~~~`Filters.Add`~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:27:23.087

在发布我的问题时，我可能遗漏了一些对于查明错误原因至关重要的信息。我没有提到我的数据正在测试**“不包含”**标准。

[在对此链接](http://social.msdn.microsoft.com/Forums/lv/isvvba/thread/b9befef0-cb6b-43be-8644-af53db78a515)进行更多研究和绊倒之后，我了解到运算符 xlFilterValues 不适用于过滤条件“不包含”。

它仅适用于单元格值的完全匹配。也许这对你们中的一些人来说是显而易见的，对我来说不是。我希望可以将过滤器值传递到包含 Excel 特殊字符的数组中以指示“不包含”（例如，“<>*data*”）

如果上面不清楚，错误是由我使用 xlFilterValues 运算符在数组中传递“<>*data*”引起的。

解决方案：我创建了一个单独的函数来手动收集所有不包含我的条件字段的列数据。该函数返回一个数组，其中包含***我想要保留的数据***。然后，我像往常一样使用 xlFilterValues 运算符将此数组传递给 AutoFilter()，一切都很好。感觉很hacky，但经过一天的研究这个问题，我对这个解决方案没问题。

**感谢 shahkalpesh 花费时间和精力帮助我。**希望这个答案也能帮助你。

# c - C malloc valgrind 无效写入大小

> ID：14964658
> 
> 赞同：3
> 
> 时间：2013-02-19T18:22:53.650
> 
> 标签：c, memory-management, malloc, valgrind

我有公平的 malloc 无效写入（以及本网站上的许多示例），但我仍然无法指出是什么原因造成的。在这里，我有一个用于图形的邻接矩阵，并且在分配时，我从 valgrind 获得了无效的写入（但在整个程序中没有分段错误）。我也得到了无效的读取，但我认为这是由之前的无效写入引起的。

仅供参考 adj_matrix 是一个类型定义的结构，其顶点数为 int 类型，头文件中声明的实际二维数组为 char**

另外，我的帖子中不包括测试文件，它所做的只是为结构分配空间并调用这些函数。

```
#include <stdlib.h>
#include <stdio.h>
#include <stdbool.h>
#include <string.h>
#include <math.h>

#include "adj_matrix.h"

void adj_matrix_init(adj_matrix *matrix, const int num_vertices) {

    int i;
    char* temp;

    matrix->num_vertices = num_vertices;

    //INVALID WRITE & READ HERE
    if(!(matrix->matrix = malloc(num_vertices * sizeof(char *)))) { 
        fprintf(stderr, "Could not allocate space for the adjacency matrix.\n");
        exit(EXIT_FAILURE);
    }

    // THIS ONE WORKS THOUGH
    if(!(temp = calloc(num_vertices * num_vertices, sizeof(char)))) {
        fprintf(stderr, "Could not allocate space for the adjacency matrix.\n");
        exit(EXIT_FAILURE);
    }

    for(i = 0; i < num_vertices; i++) {
        (matrix->matrix)[i] = temp + (i * num_vertices); // INVALID READ
    }
}

void adj_matrix_destroy(adj_matrix *matrix) {

    free(matrix->matrix[0]); // INVALID READ
    free(matrix->matrix);
    free(matrix);
}

void adj_matrix_add_edge(adj_matrix *matrix, const int from_node, const int to_node) {
    matrix->matrix[from_node - 1][to_node - 1] = 1; // INVALID READ
}

void adj_matrix_remove_edge(adj_matrix *matrix, const int from_node, const int to_node) {
    matrix->matrix[from_node - 1][to_node -1] = 0;
}

bool adj_matrix_check_edge(const adj_matrix *matrix, const int from_node, const int to_node) {
    return (matrix->matrix[from_node - 1][to_node -1] ? true : false);
}

size_t adj_matrix_min(const size_t val1, const size_t val2) {
    return (val1 <= val2) ? val1 : val2;
}

size_t adj_matrix_to_string(const adj_matrix *matrix, char *buffer, const size_t buffer_size) {
    const size_t terminator = adj_matrix_min(buffer_size, (size_t)pow((matrix->num_vertices+1) + 1, 2));
    int i, j, count = 0;

    printf("Buffer size: %zd\nMatrix size (plus null character): %f\nMinimum: %zd\n", buffer_size, pow((matrix->num_vertices + 1), 2), terminator);

    for(i = 0; i < matrix->num_vertices; i++) {
        for(j = 0; j < matrix->num_vertices; j++) {
            printf("TEST1: %s\n info: %d\n", buffer, matrix->matrix[i][1]); // JUST TESTING VALUES
            if( (count - 1) < terminator) {
                if(matrix->matrix[i][j]) {
                    printf("Got in with true\n");
                    buffer[count++] = '1';
                } else {
                    printf("Got in with false\n");
                    buffer[count++] = '0';
                }
                buffer[count] = '\0';
            }
            else {
                buffer[buffer_size - 1] = '\0';
                return terminator;
            }
            printf("TEST2: %s\n", buffer);
        }
        if( (count - 1) < terminator ) {
            buffer[count++] = '\n';
            buffer[count] = '\0';
        }
        else {
            buffer[buffer_size - 1] = '\0';
            return terminator;
        }
    }
    return terminator;
} 
```

瓦尔格林：

```
==5590== Memcheck, a memory error detector
==5590== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==5590== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==5590== Command: ./test-adj_matrix
==5590== 
==5590== Invalid write of size 8
==5590==    at 0x40080C: adj_matrix_init (adj_matrix.c:16)
==5590==    by 0x400718: main (test_adjmatrix.c:12)
==5590==  Address 0x51f10a8 is 0 bytes after a block of size 8 alloc'd
==5590==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==5590==    by 0x400703: main (test_adjmatrix.c:10)
==5590== 
==5590== Invalid read of size 8
==5590==    at 0x400814: adj_matrix_init (adj_matrix.c:16)
==5590==    by 0x400718: main (test_adjmatrix.c:12)
==5590==  Address 0x51f10a8 is 0 bytes after a block of size 8 alloc'd
==5590==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==5590==    by 0x400703: main (test_adjmatrix.c:10)
==5590== 
==5590== Invalid read of size 8
==5590==    at 0x4008A7: adj_matrix_init (adj_matrix.c:27)
==5590==    by 0x400718: main (test_adjmatrix.c:12)
==5590==  Address 0x51f10a8 is 0 bytes after a block of size 8 alloc'd
==5590==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==5590==    by 0x400703: main (test_adjmatrix.c:10)
==5590== 
==5590== Invalid read of size 8
==5590==    at 0x400925: adj_matrix_add_edge (adj_matrix.c:39)
==5590==    by 0x40072E: main (test_adjmatrix.c:14)
==5590==  Address 0x51f10a8 is 0 bytes after a block of size 8 alloc'd
==5590==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==5590==    by 0x400703: main (test_adjmatrix.c:10)
==5590== 
==5590== Invalid read of size 8
==5590==    at 0x400925: adj_matrix_add_edge (adj_matrix.c:39)
==5590==    by 0x400744: main (test_adjmatrix.c:15)
==5590==  Address 0x51f10a8 is 0 bytes after a block of size 8 alloc'd
==5590==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==5590==    by 0x400703: main (test_adjmatrix.c:10)
==5590== 
==5590== Invalid read of size 8
==5590==    at 0x400925: adj_matrix_add_edge (adj_matrix.c:39)
==5590==    by 0x40075A: main (test_adjmatrix.c:16)
==5590==  Address 0x51f10a8 is 0 bytes after a block of size 8 alloc'd
==5590==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==5590==    by 0x400703: main (test_adjmatrix.c:10)
==5590== 
Buffer size: 26
Matrix size (plus null character): 25.000000
Minimum: 26
==5590== Invalid read of size 8
==5590==    at 0x400A9F: adj_matrix_to_string (adj_matrix.c:62)
==5590==    by 0x400772: main (test_adjmatrix.c:18)
==5590==  Address 0x51f10a8 is 0 bytes after a block of size 8 alloc'd
==5590==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==5590==    by 0x400703: main (test_adjmatrix.c:10)
==5590== 
==5590== Conditional jump or move depends on uninitialised value(s)
==5590==    at 0x4E7D3B1: vfprintf (vfprintf.c:1630)
==5590==    by 0x4E858D8: printf (printf.c:35)
==5590==    by 0x400AD5: adj_matrix_to_string (adj_matrix.c:62)
==5590==    by 0x400772: main (test_adjmatrix.c:18)
==5590==  Uninitialised value was created by a heap allocation
==5590==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==5590==    by 0x4006F5: main (test_adjmatrix.c:8)
==5590== 
TEST1: 
 info: 1
==5590== Conditional jump or move depends on uninitialised value(s)
==5590==    at 0x4E7D3B1: vfprintf (vfprintf.c:1630)
==5590==    by 0x4E858D8: printf (printf.c:35)
==5590==    by 0x40078B: main (test_adjmatrix.c:20)
==5590==  Uninitialised value was created by a heap allocation
==5590==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==5590==    by 0x4006F5: main (test_adjmatrix.c:8)
==5590== 
==5590== Invalid read of size 8
==5590==    at 0x400961: adj_matrix_remove_edge (adj_matrix.c:43)
==5590==    by 0x4007A1: main (test_adjmatrix.c:22)
==5590==  Address 0x51f10a8 is 0 bytes after a block of size 8 alloc'd
==5590==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==5590==    by 0x400703: main (test_adjmatrix.c:10)
==5590== 
Buffer size: 26
Matrix size (plus null character): 25.000000
Minimum: 26
==5590== Invalid read of size 8
==5590==    at 0x400A9F: adj_matrix_to_string (adj_matrix.c:62)
==5590==    by 0x4007B9: main (test_adjmatrix.c:24)
==5590==  Address 0x51f10a8 is 0 bytes after a block of size 8 alloc'd
==5590==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==5590==    by 0x400703: main (test_adjmatrix.c:10)
==5590== 
==5590== Conditional jump or move depends on uninitialised value(s)
==5590==    at 0x4E7D3B1: vfprintf (vfprintf.c:1630)
==5590==    by 0x4E858D8: printf (printf.c:35)
==5590==    by 0x400AD5: adj_matrix_to_string (adj_matrix.c:62)
==5590==    by 0x4007B9: main (test_adjmatrix.c:24)
==5590==  Uninitialised value was created by a heap allocation
==5590==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==5590==    by 0x4006F5: main (test_adjmatrix.c:8)
==5590== 
TEST1: 
 info: 0
==5590== Invalid read of size 8
==5590==    at 0x4008E6: adj_matrix_destroy (adj_matrix.c:33)
==5590==    by 0x4007C5: main (test_adjmatrix.c:26)
==5590==  Address 0x51f10a8 is 0 bytes after a block of size 8 alloc'd
==5590==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==5590==    by 0x400703: main (test_adjmatrix.c:10)
==5590== 
==5590== Invalid read of size 8
==5590==    at 0x4008F9: adj_matrix_destroy (adj_matrix.c:34)
==5590==    by 0x4007C5: main (test_adjmatrix.c:26)
==5590==  Address 0x51f10a8 is 0 bytes after a block of size 8 alloc'd
==5590==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==5590==    by 0x400703: main (test_adjmatrix.c:10)
==5590== 
==5590== Invalid free() / delete / delete[] / realloc()
==5590==    at 0x4C2A82E: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==5590==    by 0x4007D1: main (test_adjmatrix.c:28)
==5590==  Address 0x51f10a0 is 0 bytes inside a block of size 8 free'd
==5590==    at 0x4C2A82E: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==5590==    by 0x400910: adj_matrix_destroy (adj_matrix.c:35)
==5590==    by 0x4007C5: main (test_adjmatrix.c:26)
==5590== 
==5590== 
==5590== FILE DESCRIPTORS: 3 open at exit.
==5590== Open file descriptor 2: /dev/pts/4
==5590==    <inherited from parent>
==5590== 
==5590== Open file descriptor 1: /dev/pts/4
==5590==    <inherited from parent>
==5590== 
==5590== Open file descriptor 0: /dev/pts/4
==5590==    <inherited from parent>
==5590== 
==5590== 
==5590== HEAP SUMMARY:
==5590==     in use at exit: 26 bytes in 1 blocks
==5590==   total heap usage: 4 allocs, 4 frees, 82 bytes allocated
==5590== 
==5590== 26 bytes in 1 blocks are definitely lost in loss record 1 of 1
==5590==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==5590==    by 0x4006F5: main (test_adjmatrix.c:8)
==5590== 
==5590== LEAK SUMMARY:
==5590==    definitely lost: 26 bytes in 1 blocks
==5590==    indirectly lost: 0 bytes in 0 blocks
==5590==      possibly lost: 0 bytes in 0 blocks
==5590==    still reachable: 0 bytes in 0 blocks
==5590==         suppressed: 0 bytes in 0 blocks 
```

编辑：test_adjmatrix.c

```
#include <stdlib.h>
#include <string.h>
#include <stdio.h>

#include "adj_matrix.h"

int main() {
    char* temp = malloc((5*5+1)*sizeof(char));

    adj_matrix *matrix = malloc(sizeof(matrix));

    adj_matrix_init(matrix, 4);

    adj_matrix_add_edge(matrix, 2, 1);
    adj_matrix_add_edge(matrix, 1, 2);
    adj_matrix_add_edge(matrix, 3, 4);

    adj_matrix_to_string(matrix, temp, (5*5+1) * sizeof(char));

    printf("%s", temp);

    adj_matrix_remove_edge(matrix, 1, 2);

    adj_matrix_to_string(matrix, temp, (5*5+1) * sizeof(char));

    adj_matrix_destroy(matrix);

    free(matrix);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T18:50:10.673

以下内容似乎不正确：

```
adj_matrix *matrix = malloc(sizeof(matrix)); 
```

它分配 4 个字节（假设是 32 位编译器）。大概应该是`sizeof( adj_matrix )`。

# events - 防止点击事件在淘汰模型中触发订阅

> ID：14964662
> 
> 赞同：0
> 
> 时间：2013-02-19T18:22:59.987
> 
> 标签：events, knockout.js, subscribe

我有一个类别列表，单击时会显示其相关项目。我还可以从下拉列表中选择类别。如果我更改下拉选择，则会调用相同的操作。但是当我点击一个类别时，下拉菜单不能像我那样刷新，我也想不出一个干净的方法来做到这一点。

这是一个演示我的问题的[小提琴](http://fiddle.jshell.net/BigStef/AWfE8/56/)

**更新：** 我基本上通过为类别 ID 添加另一个可观察对象并使用它来更新，如小提琴中所反映的那样，我已经设法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:51:11.513

只需将`<li>`绑定更改为：

```
<li data-bind="click: $parent.selectedCategory"> 
```

并评论：

```
self.showItems = function(category){

    // ...

    // self.selectedCategory(category);

    // ...
} 
```

[http://fiddle.jshell.net/AWfE8/60/](http://fiddle.jshell.net/AWfE8/60/)

# spring-mvc - 在 Spring MVC 应用程序中的服务器启动期间捕获错误

> ID：14964663
> 
> 赞同：1
> 
> 时间：2013-02-19T18:23:01.747
> 
> 标签：spring-mvc, error-handling

我正在开发一个 Spring MVC 应用程序，该应用程序试图在服务器启动期间通过连接到数据库来初始化某些对象。

我想通过写入日志文件（由应用程序支持团队监控）来提醒我的应用程序支持团队，只要在服务器启动期间出现由下面列出的任一情况引起的问题。

*   服务器无法自动连接 applicationContext 中指定的任何 bean。
*   数据库已关闭，无法连接。

我想知道如何以与应用程序服务器/数据库服务器/驱动程序无关的方式捕获上面列出的场景中的错误。我们在开发（jboss）和生产（web sphere）之间使用不同的服务器，还有，有没有办法以数据库服务器/驱动程序不可知的方式记录 sqlexception？

我希望在尝试连接到数据库的数据加载器类中捕获 sqlException，但我不想将所有 sqlException 作为 ALERTS 记录到应用程序支持团队。另外，如果我必须检查特定的 sqlErrorCode，那是否特定于应用程序使用的数据库驱动程序？明天，当我有另一个类加载不同的数据时，我必须再次重复这个过程。相反，当服务器没有启动或连接到数据库时，是否有一种更简单的方法可以跨应用程序执行此操作。

可以使用方面来捕获这些错误（服务器启动和数据库连接问题）吗？

我指的是例外情况，这里是

*   当自动连接失败时（在这种情况下，由无效的数据源） `22:06:51,767|FLH|||ERROR|org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:308)||Thread-3|Context initialization failed org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataLoader': Invocation of init method failed; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.jboss.util.NestedSQLException: Unable to get managed connection for jdbc/mydatasource; - nested throwable: (javax.resource.ResourceException: Unable to get managed connection for jdbc/mydatasource)`

*   当它无法连接到数据库时 `Caused by: java.sql.SQLException: The Network Adapter could not establish the connection at oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.java:70) at oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:133) at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:199) at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:480) at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:413) at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:508) at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:203) at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:33) at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:510) at org.jboss.resource.adapter.jdbc.local.LocalManagedConnectionFactory.getLocalManagedConnection(LocalManagedConnectionFactory.java:229) ... 146 more Caused by: oracle.net.ns.NetException: The Network Adapter could not establish the connection at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:328) at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:421) at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:630) at oracle.net.ns.NSProtocol.connect(NSProtocol.java:206) at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:966) at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:292) ... 151 more Caused by: java.net.UnknownHostException: server1.somewhere.com at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:195) at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:432) at java.net.Socket.connect(Socket.java:529) at java.net.Socket.connect(Socket.java:478) at java.net.Socket.<init>(Socket.java:375) at java.net.Socket.<init>(Socket.java:189) at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:127) at oracle.net.nt.ConnOption.connect(ConnOption.java:126) at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:306) ... 156 more`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T21:06:47.820

@aprajitha - 你可以通过

1.  对需要报告的错误进行分类。
2.  实施 Log4j 2 - 这为有效控制日志记录提供了许多选项

例如，您可以根据匹配的过滤条件在特定文件中放置特定错误。通过这种方式，您可以通过简单的记录器配置将异常“报告”依赖项从代码中分离出来。

我很确定您的第一个错误永远不会发生在主要区域，否则它将是部署失败；）

# java - 访问在内部存储中创建的文件

> ID：14964668
> 
> 赞同：0
> 
> 时间：2013-02-19T18:23:22.743
> 
> 标签：java, android

我决定使用内部存储将文件保存到文件夹中。我的代码是：

```
File dir = new File (getFilesDir(), "myFolder");
dir.mkdirs();
File file = new File(dir, "myData.txt");

try {
    FileOutputStream f = new FileOutputStream(file);
    PrintWriter pw = new PrintWriter(f);
    pw.println("Hi");
    pw.println("Hello");
    pw.flush();
    pw.close();
    f.close();
} catch (FileNotFoundException e) {
    e.printStackTrace();

} catch (IOException e) {
    e.printStackTrace();
}   
tv.append("\n\nFile written to "+file); 
```

显示的目录是 data/data/packageName/file/myFolder/myData.txt 但是，我想检查文件是否包含输入的字符串，但我似乎无法找到创建的文件在哪里。我试图输出文件的内容，但失败了。我知道这听起来很荒谬。我想做的就是检查内容并知道是否创建了文件。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:27:34.727

从文件中打开一个输入流并逐行读取。

```
FileInputStream f = new FileInputStream(new File(getFilesDir()+"/myFolder/"+"myData.txt"));
BufferedInputStream bis = new BufferedInputStream(fis);
DataInputStream dis = new DataInputStream(bis);
while (dis.available() != 0) {
    System.out.println(dis.readLine());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:33:12.403

在最后加上这段代码，

```
try {
        File file = new File(dir, "myData.txt");
        Scanner sc = new Scanner(file);

        while(sc.hasNext()){
            System.out.println(sc.nextLine());
        }

    } catch (FileNotFoundException ex) {
        ex.printStackTrace();
    } 
```

# .net - WCF。客户端超时异常。发送超时。负载测试显示奇怪的数字。为什么？

> ID：14964671
> 
> 赞同：1
> 
> 时间：2013-02-19T18:23:29.037
> 
> 标签：.net, wcf

**服务**

我在高负载下有 WCF 服务。响应时间平均约为 60 毫秒。服务主要使用默认配置，除了 maxConcurrentCalls="5000" 外，暴露了带有 basicHttpBinding 的端点。

**客户**

另一项服务（进一步称为“客户端”）正在使用该服务。很少（如 0.5%）有 TimeoutExceptions (*)。客户端上的 sendTimeout 设置为“00:00:05”。

**负载测试**

我可以使用 VS 负载测试重现相同的内容：

```
[TestMethod]
public void Test()
{
    using (var client = new SomeServiceClient())
    {
        // some randomization to make request more realistic
        var response = client.GetSomething(request);
    }
} 
```

**超时在以下情况下消失：**

1.  我增加sendTimeout。
2.  我创建一个通道并在整个负载测试期间重用它。

**现在奇怪的东西：**

负载测试（即使有超时）显示测试时间平均为 0.06，最长为 0.2 秒，远低于 5 秒。这也发生在生产中（日志是这样说的），但到目前为止还没有发现对客户的影响。

**问题**

*有谁知道可能出了什么问题？*

或者：您对这种情况在 WCF 配置/实例化/等方面有何建议？

就可扩展性而言，所有这些东西已经在许多主机上运行：客户端在 4 台主机上，服务以及在 4 台主机上。增加客户数量会有所帮助吗？

* * *

(*) 当我提到 TimeoutExceptions 时，我总是指客户端异常。

System.TimeoutException：请求通道在 00:00:05 之后等待回复时超时。增加传递给 Request 调用的超时值或增加 Binding 上的 SendTimeout 值。分配给此操作的时间可能是较长超时的一部分。[---> System.TimeoutException：对“ http://someservice.intranet/99.99/someendpoint.svc](http://someservice.intranet/99.99/someendpoint.svc) ”的 HTTP 请求已超过分配的超时时间 00:00:05。分配给此操作的时间可能是较长超时的一部分。---> System.Net.WebException：操作已超时

* * *

*有愿意提供帮助的 WCF 大师吗？*

# deployment - Azure 部署错误：找不到 ClientPerfCountersInstaller.exe

> ID：14964689
> 
> 赞同：6
> 
> 时间：2013-02-19T18:24:14.677
> 
> 标签：deployment, azure

我最近尝试在现有站点和部署上设置 Azure 预览缓存，但由于错误而不得不中止。但是，从那时起，当我尝试部署到 Azure 时出现以下错误...

找不到名为的文件`approot\bin\Microsoft.WindowsAzure.Caching\ClientPerfCountersInstaller.exe`

该文件确实存在于磁盘上，假设 approot 是我的 ASP 项目的基本文件夹。

任何想法和帮助都非常感谢，我现在正在撞墙！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T07:40:27.330

找到了解决方案。ServiceDefinition.csdef 文件有一个新的启动任务，该任务是在缓存设置过程中以某种方式创建的。删除这个多余的任务解决了这个问题，我看不到任何不利或负面影响。

注释掉的行如下所示...

```
<Startup priority="-2">
  <!--<Task commandLine="Microsoft.WindowsAzure.Caching\ClientPerfCountersInstaller.exe install" executionContext="elevated" taskType="simple" />-->
</Startup> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-09T09:36:44.963

在我的情况下，该文件是由 Azure SDK 工具创建的，但 TFVC 没有签入 .exe。

显式添加缺少的 .exe 后，构建成功运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-19T14:46:06.103

我通过使用**“Manage Nuget Packages for Solution...”**从我的解决方案中`Microsoft.WindowsAzure.Caching\ClientPerfCountersInstaller.exe`删除**`Microsoft.WindowsAzure.Caching`包**解决了我的问题。它没有被引用，但仍然在...中提到过，尤其是在这种缓存支持方式已停止并将被淘汰的信息之后。**`packages.config`**

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-19T14:51:13.187

我通过使用**“Manage Nuget Packages for Solution...”**从我的解决方案中`Microsoft.WindowsAzure.Caching\ClientPerfCountersInstaller.exe`删除**`Microsoft.WindowsAzure.Caching`包**解决了我的问题。它没有被引用，但仍然在...中提到过，尤其是在这种缓存支持方式已停止并将被淘汰的信息之后。**`packages.config`**

 **在其他问题中重复我的答案在[此处输入链接描述](https://stackoverflow.com/questions/14964689/azure-deployment-error-cannot-find-clientperfcountersinstaller-exe/41744670#41744670) 对于那些只是快速概述答案以在仅通过错误消息搜索后找到解决其确切问题的最合适方法的人。****

# delphi - 让 WinInet 与 Internet Explorer 共享会话/cookie

> ID：14964691
> 
> 赞同：5
> 
> 时间：2013-02-19T18:24:20.527
> 
> 标签：delphi, cookies, wininet

我想要的是以下内容：

1) 使用 Internet Explorer 登录页面

2) 让我的使用 WinInet API 抓取网站的软件重用相同的 cookie/会话（即，让爬虫“登录”）

我曾尝试使用 INDY 自己构建登录，虽然会话 cookie 登录效果很好，但现在许多网站使用更复杂的登录机制，将客户端和服务器端的东西结合起来进行初始登录。

...

我相信例如 WordPress 、 ASP.Net 等使用客户端/AJAX 的东西以及哈希/时间/用户代理代码/检查和类似的东西的原因是我可以在 30 秒后从我的自己的爬虫程序，例如在登录期间使用的 FireFox，但它不会工作。

（将此与基于会话 cookie 的正常登录进行比较，我自己的爬虫程序可以正常登录。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:16:44.300

默认情况下，IE 似乎不共享“互联网 cookie”。在**Tools** > **Internet options** > **Security**中，有不同的区域。**Internet**区域默认*启用保护模式*，您无法使用 Wininet API 访问此 cookie。但是，**本地 Intranet**区域默认情况下*未启用保护模式*，因此您可以使用 Wininet API 访问此 cookie。

保护模式 cookie 存储在**%appdata%\Microsoft\Windows\Cookies\Low**中，非保护模式 cookie 存储在**%appdata%\Microsoft\Windows\Cookies**中。

要修复您的软件，请取消选中从**Internet区域****启用保护模式**，重新启动 IE 并登录您的网站以再次获取 cookie。

# php - 读取目录中所有文件并处理文件字符串的最佳实践

> ID：14964695
> 
> 赞同：1
> 
> 时间：2013-02-19T18:24:37.457
> 
> 标签：php, string, file, directory

在 Java 中，我可以使用 File 对象来引用文件的父文件、列出子文件和其他有用的函数（方法）。这些方法可以返回 File 对象，所以我不需要处理文件的字符串。相反，我可以只管理对象。这使事情变得漂亮整洁，并且不太容易出现我的拼写错误。

在 PHP 中，我将目录字符串与文件名字符串连接起来以获取文件字符串。它工作正常，但这对我来说似乎很花哨，我想知道是否有更好的方法。是否有与内置 Java File 对象等效的 PHP？

这是我的代码，用于读取目录中的所有文件并逐行打印出它们的内容：

```
$reportDir = realpath(RESOURCE_PATH . "/userFiles/uploadedReports");
if ($dirHandle = opendir($reportDir)) {
    while (false !== ($entry = readdir($dirHandle))) {
        if ($entry != "." && $entry != ".."){
            $fileString = $reportDir . "/" . $entry;
            $fileHandle = fopen($fileString, "r");
            while (!feof($fileHandle) ) {
               $line = fgets($fileHandle);
               echo $line . "<br />";
            }
            fclose($fileHandle);
            $i++;
        }
    }
    closedir($dirHandle);
} 
```

如果您想确切地知道我想用这段代码完成什么，我将向用户显示一个 HTML 表格，其中包含来自制表符分隔文件的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:26:21.787

是的，它有一个名为 SPL 的类[`SplFileObject`](http://www.php.net/manual/en/class.splfileobject.php)，它具有处理文件内容的方法……还有它的父类[`SplFileInfo`](http://www.php.net/manual/en/class.splfileinfo.php)，它具有用于基本文件信息（mtime、路径、文件名等）的方法。还有[一系列迭代器](http://www.php.net/manual/en/spl.iterators.php)用于处理对目录/文件树等结构的迭代。

# coldfusion - 循环中的冷融合线程失去作用域

> ID：14964696
> 
> 赞同：2
> 
> 时间：2013-02-19T18:24:38.437
> 
> 标签：coldfusion, thread-safety, coldfusion-9, cfthread

我目前正在努力掌握线程。我有一种感觉，这可能与我的范围有关；但是，我看不出我哪里出了问题。

我的 CFC 包含以下功能：

```
<cfcomponent output="false" hint="thread stuff.">
    <cffunction name="threadTest" access="public" returntype="struct">
    <cfscript>
        local.lstOne            = "1,2,3,4,5,6";
        local.a                 = [];
        local.s                 = {};
        local.lst               = "";

        for(local.x = 1; local.x lte listlen(local.lstOne,','); local.x++){
            local.lst           &= (len(local.lst) gt 0) ? ',thr#local.x#' : 'thr#local.x#';

            thread action="run" name="thr#local.x#" nIndex="#local.x#" aArray="#local.a#"{

                thread.y        = attributes.nIndex;
                thread.aArray   = attributes.aArray;
                if(thread.y mod 2){
                    thread.c    = 1;
                } else {
                    thread.c    = 0;
                }

                thread.stArgs       = {};
                thread.stArgs.nMod  = thread.c;

                arrayAppend(thread.aArray, thread.stArgs);
            }
        }

        threadJoin(local.lst);

        local.s.counts          = local.a;

        return local.s;
    </cfscript>
</cffunction>
</cfcomponent> 
```

我有一个 CFM 页面，看起来有点像这样：

```
<cfscript>
theThread = createObject( "component", "ThreadStuff" ).init();
theThread.threadTest();
</cfscript> 
```

当我运行它时，coldfusion 会返回错误**Element X is undefined in LOCAL。**.

我无法弄清楚为什么在循环的第一次迭代后它会丢失**local.x**（我已经通过在循环开始和循环结束时进行转储来证明这一点，并且它无法到达本地.x = 2)。

我可能哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:02:08.040

Coldfusion 9.0.0（此问题中使用的版本：9,0,0,251028）有一个错误，即当在函数内的循环中使用线程时，本地范围会中断。

此问题已在 Coldfusion 9.0.1 中修复，请在此处查看详细信息：[http](http://helpx.adobe.com/coldfusion/kb/issues-fixed-coldfusion-9-0.html) ://helpx.adobe.com/coldfusion/kb/issues-fixed-coldfusion-9-0.html id:80153。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T23:51:08.463

如果问题是变量 local.x 没有增加，首先注释掉所有线程的东西。将其替换为本地的 writedump。在循环之前和之后也写入本地范围。

一旦你得到 local.x 递增，添加空线程。继续 writedump 本地范围，以便您可以查看这是否是导致问题的原因。如果 local.x 仍在增加，请添加非常小的代码，直到找到导致问题的位。

# vb.net - Timer.Enabled = False 不停止计时器滴答

> ID：14964697
> 
> 赞同：0
> 
> 时间：2013-02-19T18:24:43.693
> 
> 标签：vb.net, timer

我在这里有我的代码来发送短信：

```
Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    count = DataTable1DataGridView.Rows.Count
    For i As Integer = count To 1 Step -1
        Try
            If SerialPort1.IsOpen Then
                'dataGridView1()
                ' TextBox1.Text = Me.dataGridView1.Rows(0).Cells(2).Value.ToString()
                With SerialPort1
                    .Write("AT" & vbCrLf)
                    .Write("AT+CMGF=1" & vbCrLf)
                    .Write("AT+CMGS=" & Chr(34) & DataTable1DataGridView.Rows(i - 1).Cells(2).Value.ToString & Chr(34) & vbCrLf)
                    .Write(ES_MSG.Rows(0).Cells(0).Value.ToString & Chr(26))
                End With
            Else
                MsgBox("Error on the port selected")
            End If
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try
        If (i = count) Then
            Exit For
            Timer1.Enabled = False
            Timer1.Stop()
        End If
        MsgBox("Message Sent!")
    Next
    Timer1.Enabled = False
    Timer1.Stop()
End Sub 
```

我通过 button_click 启用了计时器。我的问题是无论我将 Timer.Stop() 和 Timer.Enabled = False 放在哪里，计时器似乎都不会停止。更糟糕的是，当出现错误或发送消息时，即使我的数据网格中的计数很小，弹出窗口似乎也会无限出现。任何人都可以分享想法吗？我真的需要它。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:38:26.243

首先，永远不会调用“退出”之后的代码。

其次，如果您的计时器事件相当频繁，您可能会发现您有等待处理的事件队列，并且您将其误认为是仍在触发的事件。我建议您禁用计时器作为滴答事件中的第一个操作，并在适当的情况下重新启用它作为退出时的最后一件事：

```
Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick

    Timer1.Enabled = False
    Dim enableTimer as Boolean = True

    count = DataTable1DataGridView.Rows.Count
    For i As Integer = count To 1 Step -1
        Try
            If SerialPort1.IsOpen Then
                'dataGridView1()
                ' TextBox1.Text = Me.dataGridView1.Rows(0).Cells(2).Value.ToString()
                With SerialPort1
                    .Write("AT" & vbCrLf)
                    .Write("AT+CMGF=1" & vbCrLf)
                    .Write("AT+CMGS=" & Chr(34) & DataTable1DataGridView.Rows(i - 1).Cells(2).Value.ToString & Chr(34) & vbCrLf)
                    .Write(ES_MSG.Rows(0).Cells(0).Value.ToString & Chr(26))
                End With
            Else
                MsgBox("Error on the port selected")
            End If
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try
        If (i = count) Then
            enableTimer = False
            Exit For
            ' This code is never hit
            Timer1.Enabled = False
            Timer1.Stop()
        End If
        MsgBox("Message Sent!")
    Next

    Timer1.Enabled = enableTimer

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:12:43.253

我以前一直在使用 Timer，但是如果不使用 Timer.Stop，我从来没有遇到过任何问题，此外，您可能希望将代码更改为：

```
 Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    count = DataTable1DataGridView.Rows.Count
    For i As Integer = count To 1 Step -1
        Try
            If SerialPort1.IsOpen Then 'I had doubt with this condition, you are testing the same port over and over again
                'dataGridView1()
                ' TextBox1.Text = Me.dataGridView1.Rows(0).Cells(2).Value.ToString()
                With SerialPort1
                    .Write("AT" & vbCrLf)
                    .Write("AT+CMGF=1" & vbCrLf)
                    .Write("AT+CMGS=" & Chr(34) & DataTable1DataGridView.Rows(i - 1).Cells(2).Value.ToString & Chr(34) & vbCrLf)
                    .Write(ES_MSG.Rows(0).Cells(0).Value.ToString & Chr(26))
                End With
            Else
                MsgBox("Error on the port selected")
                'Is this an error? You may want to disable your timer here then call Exit Sub
            End If

        If (i = count) Then Exit For
        MsgBox("Message Sent!")

        Catch ex As Exception
            MsgBox(ex.Message)
        End Try
    Next
    Timer1.Enabled = False
End Sub 
```

# ms-access - 我可以在 MS Access 中使用更新查询来使用其他字段中的字符自动填充唯一 ID 字段吗？

> ID：14964701
> 
> 赞同：0
> 
> 时间：2013-02-19T18:24:49.377
> 
> 标签：ms-access, unique-id

我可以在 MS Access 中使用更新查询来使用其他字段中的字符自动填充唯一 ID 字段吗？具体来说，我有一个唯一的 ID 字段，其中包括 (1) 名字的姓氏 (2) 姓氏的名字首字母 (3) 出生日期的 mm/dd 和 (4) 性别 (M/F)。所以 2 月 17 日出生的约翰·史密斯是 NS0217M。是否可以从现有字段中提取单个字符并以这种方式组合到另一个字段中？不幸的是，我正在使用 Access 2003。虽然我更愿意创建一个新的 ID 系统，但这是一个已经到位的系统，我需要定制我正在构建的数据库以适应它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:56:45.790

这是您将使用的。您需要在表单上显示 UID 字段，但将其标记为已锁定，以免意外写入。
此外，这没有错误检查，因此如果任何字段为空白，您都会收到错误消息。

```
Private Sub Form_BeforeUpdate(Cancel As Integer)
   Me.UID = Right(fname, 1) & Left(lname, 1) & Format(CDate(DOB), "mmdd") & Gender
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:34:29.377

选择 LEFT(FirstName,1) + RIGHT(LastName,1) + FORMAT(dob,'MMDD') + 性别作为 UniqueID

# java - 迭代当前链表而不显式引用它

> ID：14964704
> 
> 赞同：0
> 
> 时间：2013-02-19T18:25:01.687
> 
> 标签：java, linked-list

我有一个链表，我需要编写一个方法来将输入作为字符串并检查链表中的所有元素是否匹配，该方法必须返回匹配的数量。

问题是我需要引用当前链表而不将其作为方法的输入。

```
public int count(E elem) 
{
    int count;
    for (E list : x)
    {
        if(this.removeAtHead().equals(elem))
        {
            count++;
        }
        else{}
    }
    return count;
} 
```

我需要用当前的链表替换 x 。

使用该方法的一个例子是：

```
public static void main(String[ ] args) 
{
    LinkedList<String> first = new LinkedList<String>();

    first.insertAtTail("abc");
    first.insertAtTail("def");
    first.insertAtTail("def");
    first.insertAtTail("xyz");

    System.out.println( first.count("def") ); // prints "2"

    first.insertAtTail(null);
    first.insertAtTail("def");
    first.insertAtTail(null);

    System.out.println( first.count("def") ); // prints "3"
    System.out.println( first.count(null) ); // prints "2"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:29:58.703

就做吧`for (E list : this)`，如下：

```
public int count(E elem) 
{
    int count;
    for (E list : this)
    {
        if (removeAtHead().equals(elem))
        {
            count++;
        }
    }
    return count;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:30:42.157

您能否在您的类中创建一个包含列表/或列表列表的私有变量（如果您需要跟踪多个列表）。然后，您可以在此类的其他函数中引用该列表或使用 getter 和 setter。

# c# - 如何使用 SMO 更改表

> ID：14964707
> 
> 赞同：0
> 
> 时间：2013-02-19T18:25:15.470
> 
> 标签：c#, sql-server-2008, smo

我正在使用 SMO 在 Sqlserver 2008 中动态创建表。现在我想使用 SMO 为现有表添加新列，但我正在尝试执行代码，最终获得运行时异常为**"alter fail to table"**。我的代码片段为

```
 public static bool Altertable(DynamicTable dynamicTable)
        {

            if (myDatabase.Tables.Contains(dynamicTable.Name))
            {
                Table myalterEmpTable = myDatabase.Tables[dynamicTable.Name];

                var collist = new List<Column>();

                foreach (var item in dynamicTable.Columns)
                {
                    Column col = myalterEmpTable.Columns[item.Name];
                    if (col == null)
                    {
                        Column cols = new Column(myalterEmpTable,  item.Name , DataType.UserDefinedDataType(item.Type));
                        cols.Nullable = item.IsNullable;
                        cols.Default = "";
                        collist.Add(cols);
                    }
                }
/*Here I'm getting newly added columns only*/

                foreach (var item in collist)
                {
                    myalterEmpTable.Columns.Add(item);
                }
                try
                {

                   myalterEmpTable.Alter();
                }
                catch (SmoException ex)
                {

                    throw ex;
                }
}
} 
```

最后我得到了例外，因为**“改变失败表”**。即使谷歌搜索也没有帮助..所以我的问题是，使用 C# 做到这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:02:47.063

感谢您的帮助..

我解决了它，因为我改变了我的数据库连接字符串初始化部分。然后它工作正常..

```
 string connns = ConfigurationManager.AppSettings["conn"];
                SqlConnection sqlConn = new SqlConnection(ConfigurationManager.AppSettings["conn"]);
                SqlConnectionStringBuilder builder = new SqlConnectionStringBuilder(connns);
                string password = builder.Password;
                string userid = builder.UserID;
                ServerConnection smoConn = new ServerConnection();
                smoConn.ServerInstance = sqlConn.DataSource;
                instanceServer = new Server(smoConn);
                instanceServer.ConnectionContext.LoginSecure = false;
                instanceServer.ConnectionContext.Login = userid;
                instanceServer.ConnectionContext.Password = password;
                projectDatabase = instanceServer.Databases[sqlConn.Database]; 
```

# c# - 使用实体框架在类之间传递查询数据

> ID：14964710
> 
> 赞同：1
> 
> 时间：2013-02-19T18:25:18.313
> 
> 标签：c#, .net, entity-framework

我正在使用 Visual Studio 2012 C#，并且试图在类之间传递一些数据。所以基本上，我有两节课。一个类用于查询数据，另一个类仅用于显示数据（本质上是 UI）。

我猜我需要把它放在某种数据容器中并传递它。但是，我目前是一名学生，无法弄清楚最好的方法是什么。

```
public List<string> GetDatabyID(int ID)
{
    var context = new Site.EFModel.SiteDBEntities();
    var query = context.db.Where(x => x.ID == ID).Select(x => new {x.ID, x.Name});
    List<string> dataContainer = query.ToList();

    return dataContainer;
} 
```

在 UI 中，我想将此数据映射到 GridView 以输出它。我的代码显然是错误的。当 dataContainer 将包含一个 int 和 string 时，我显然不能将它作为 List 返回。有人有想法么？提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:32:27.347

您正在`Anonymous Object`从数据库调用的结果中创建一个。Linq 方法`Select`：

```
Select(x => new {x.ID, x.Name}); 
```

将结果投影到您选择的新对象中，在本例中为匿名对象。这应该设置为创建并返回您的 EF 实体之一的列表。

```
var query = context.db.Where(x => x.ID == ID).Select(
    x => new MyEntity {ID = x.ID, Name = x.Name});
List<MyEntity> dataContainer = query.ToList(); 
```

# python - 在 Google App Engine 上使用 python 重新翻译音频流

> ID：14964717
> 
> 赞同：1
> 
> 时间：2013-02-19T18:25:44.790
> 
> 标签：python, google-app-engine, audio-streaming

我有一个音频流的 URL 地址，如何使用我的地址 (myapp.appspot.com) 在网络中重新翻译它？让我解释一下为什么我需要它：我的渠道很窄，不能承受很多连接，所以我必须用 GAE 来做谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:36:40.860

您无法使用 App Engine 进行长时间运行的外部调用。UrlFetch 的最大期限（任务队列和 cron 作业处理程序）为 10 分钟。所以，我认为这是不可能的。

# mysql - 整数分数的Mysql舍入特殊情况

> ID：14964719
> 
> 赞同：1
> 
> 时间：2013-02-19T18:25:48.017
> 
> 标签：mysql

我想用 2 位小数从 DB 中舍入字段（项目价格）

但是当价格是整数分数（例如 10.00）时，我希望它不带小数返回（即 10）

到目前为止 ROUND（价格，2）；没有解决需求

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:50:19.110

怎么样：

```
(case when right(format(val, 2), 3) = '.00' then format(val, 0)
      else format(val, 2)
 end) 
```

这会将逗号添加到大数字中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:51:36.027

我不知道是否存在实现此目的的单一方法，但您可以尝试类似的方法。

```
SELECT CASE WHEN MOD(50.00, 50) = 0 THEN ROUND(50.00) ELSE ROUND(50.00,2) END; 
```

上面的语句返回 50

```
SELECT CASE WHEN MOD(50.10, 50) = 0 THEN ROUND(50.10) ELSE ROUND(50.10,2) END; 
```

上述语句返回 50.10

您可以使用动态列名修改数字。

# c# - 将大量 JSON 数据发布到 WCF 服务

> ID：14964720
> 
> 赞同：1
> 
> 时间：2013-02-19T18:25:53.700
> 
> 标签：c#, json, wcf

我正在使用 .NET WCF 服务，该服务接受 JSON 数据作为来自另一个 .NET 应用程序的 HTTP Post。

当我发布少量数据时，一切正常（〜最多 65kb 的数据）

但是，当我尝试发布更多内容时，我在服务端收到内部服务器错误。

一切都表明该服务仅限于接受高达 65kb 的数据。

我已经阅读了有关修改我的配置文件以使用 maxrequestmessagesize 属性接受更多数据的信息，但是我的问题是我的 web.config 没有任何我可以看到的绑定。

这是我的配置文件中与服务相关的内容

```
<system.serviceModel>

    <behaviors>

      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>

          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

我不知道该怎么做才能超过 65 k 限制 - 任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:38:57.270

在您的配置中使用它：

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_ImyService"
                maxBufferPoolSize="2147483647"
                maxReceivedMessageSize="2147483647">
            </binding>
        </basicHttpBinding>
    </bindings>

</system.serviceModel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:35:38.630

我只是快速浏览了一下，我在不同的地方有 4 个设置来为我的 WCF 服务“提高请求大小栏”：

maxarraylength (binding/readerquotas tag) maxbuffersize (binding tag) maxreceivedmessagesize (binding tag) maxrequestlength (system.web/httpruntime tag)

我不确定为什么您的配置中没有绑定。也许如果没有指定，那么使用默认值？你有任何服务/服务/端点标签吗？也许您正在通过代码设置这些？

# ajax - 列表模型没有通过 ajax 调用发布到 api？

> ID：14964722
> 
> 赞同：0
> 
> 时间：2013-02-19T18:25:59.937
> 
> 标签：ajax, asp.net-mvc, post

大家好，我在 jquery 中构建了一个 json 对象并尝试将其发布到我的 api，但数据没有发布在那里，任何人都可以在这里帮助我解决这个问题

```
this is my json object

   {"Employee":[{"EmployeeCode":"1","EmployeeName":"Sudheer","EmployeeId":"1"}]} 
```

我的模特

```
 public class Employee
  {
    public long   EmployeeId{ get; set; }
    public long   EmployeeCode{ get; set; }        
    public string EmployeeName{ get; set; }      
  } 
```

我的api方法

```
 [ActionName("InsertOrUpdateEmployee")]
     public void InsertOrUpdateEmployee(List<Employee> Employee)
    {
        new repo.InsertOrUpdateEmployee(Employee);
    } 
```

调用 API 的 JavaScript 代码

```
 PreReqisites.Employee=[];//in this i push my employee details
   var employees= JSON.stringify(PreReqisites.Employee);
   var employeedata= '{"Employee":' + jsdCustomers + '}';
   var varemployee= jQuery.parseJSON(employeedata);
    console.log(varemployee);
   alert(varemployee);
   alert(JSON.stringify(varemployee));
  $.post("api/Employee/InsertOrUpdateEmployee", {   Employee: varemployee}, function (data) {
    alert("success");
    }); 
```

当放置一个断点并检查它时，我的员工计数为零，数据没有在那里发布，任何人都可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:44:52.113

[HTTPPost] 不起作用，我正在对其进行故障排除，但是您可以使用 [HTTPGet] 进行相同的数据发布，它按预期工作。

**用于发布数据的 Javascript 代码**

```
var postData = { "Employee": [{ "EmployeeCode": "1", "EmployeeName": "Sudheer", "EmployeeId": "1"}] };
$.ajax({
    type: "GET",
    url: "api/Employee/EmployeeController",
    data: postData,
    contentType: 'application/json;charset=utf-8',
    dataType: 'json',
    success: function (data) {
        //alert(data.Result);
    }
}); 
```

**控制器动作方法**

```
public class EmployeeController : ApiController
{
    [HttpGet]
    public void InsertOrUpdateEmployee([FromUri]IList<Employee> Employee)
    {

    }
} 
```

**调试视图的屏幕截图以显示证明**

![在此处输入图像描述](../Images/f9387a9d41eea78a167f1651de634186.png)

# zend-framework - 在学说2中是否可以有一个不是主键的自动增量列？

> ID：14964725
> 
> 赞同：8
> 
> 时间：2013-02-19T18:26:05.220
> 
> 标签：zend-framework, symfony, doctrine-orm, primary-key, auto-increment

在学说 2 中，我有一个实体，它有一个从 web 服务提供的主键，并且还有一个应该是自动增量的索引。

我可以在 mysql 中手动设置，但不能在学说 2 中进行设置。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2016-01-12T17:02:38.533

`columnDefinition`我用过`INT AUTO_INCREMENT UNIQUE`

```
/**
 * @var integer
 *
 * @ORM\Column(type="integer", name="sequence", nullable=true, columnDefinition="INT AUTO_INCREMENT UNIQUE")
 */
protected $sequence = null; 
```

教义迁移包生成

```
$this->addSql('ALTER TABLE table_name_here ADD sequence INT AUTO_INCREMENT UNIQUE'); 
```

编辑：请注意，此答案来自 2016 年，它可能不再有效。请参阅已接受的答案。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-19T18:53:02.000

自动增量限制与您使用的数据库有关。在 Mysql ，[Mysql_autoincrement](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)中，它还取决于您使用的引擎。例子：

> 对于 MyISAM 和 BDB 表，您可以在多列索引中的辅助列上指定 AUTO_INCREMENT。在这种情况下，AUTO_INCREMENT 列的生成值计算为

您可以在[此处获得有关 auto_increment 的一般文档](http://www.w3schools.com/sql/sql_autoincrement.asp)

通常，auto_increment 保留给作为标识符索引一部分的数字字段（涉及一个或多个列）。

所以这适用于mysql。

然而，教义中的 auto_incriment 似乎只允许@Id（主键）

> 21.2.9。@GeneratedValue
> 
> 指定使用哪种策略为由@Id 注释的实例变量生成标识符。此注解是可选的，仅在与@Id 结合使用时才有意义。
> 
> 如果未使用 @Id 指定此注释，则默认使用 NONE 策略。
> 
> 必需的属性：
> 
> strategy：设置标识符生成策略的名称。有效值为 AUTO、SEQUENCE、TABLE、IDENTITY、UUID、CUSTOM 和 NONE。例子：

```
?php
/**
 * @Id
 * @Column(type="integer")
 * @GeneratedValue(strategy="AUTO")
 */
protected $id = null; 
```

[Doctrine_auto_increment](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html#annref-generatedvalue)

你可能想找一个工作区并张贴一张关于它的票

# z3 - Z3 Theory Plugins 拆分为子问题

> ID：14964726
> 
> 赞同：0
> 
> 时间：2013-02-19T18:26:06.710
> 
> 标签：z3

有时（或多次）会发生问题如此之大，以至于 Z3 求解器有很多超时。在这种情况下，我认为将问题拆分为更小的子问题会很有好处。

我想专门问一下`Theory Plugins`Z3中的问题。

假设我有 3 个变量`A,B and C`。我正在为他们每个人分配价值。假设由于我指定的一些约束，分配的值是`A=0`和`B=1`。现在，根据 的这些值`A and B`，`C`用另一组方程计算，可能没有编码为约束。在这种情况下，是否可以编写一个理论插件，它会说当`A and B`分配某些值时，然后回调某些函数以返回`C`.

我在示例目录中看到了一个理论示例，但是对我来说不是很清楚。我也尝试阅读文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:20:41.410

理论插件不是将问题分解为子问题的理想技术。当我们想要扩展 Z3 支持的理论集时，通常会定义一个理论插件。例如，假设我们想要包含一个可以推理字符串的模块。该模块将提供新的解释符号，例如：`substring`、`contains`等。 [本文](http://lara.epfl.ch/~psuter/articles/SuterETAL11SetsWithCardinalityConstraints.pdf)描述了集合 + 基数约束的决策过程。这个过程是作为 Z3 的理论插件实现的。

话虽如此，理论插件目前已被弃用。Z3 中仍然支持它们，但它们与新的 Solver API 不兼容。要使用插件，我们必须使用旧的（已弃用）API。

以下是一些描述 Z3 中理论插件 API 的当前状态的相关文章：

*   [将理论插件与求解器一起使用](https://stackoverflow.com/questions/13587101/using-theory-plugins-with-solvers)

*   [Z3 API 中的自定义理论求解器方法发生了什么变化？](https://stackoverflow.com/questions/14048498/what-happened-to-the-custom-theory-solver-methods-in-the-z3-api/14049024#14049024)

# c# - Double ToString - 没有科学记数法

> ID：14964737
> 
> 赞同：23
> 
> 时间：2013-02-19T18:26:46.450
> 
> 标签：c#, .net, double, tostring

我刚刚遇到了一个美妙的“功能”，如果有足够的小数位，.NET*默认*会使用科学记数法。`Double.ToString()`

```
.005.ToString() // ".005"
.00005.ToString() // "5E-05" 
```

有谁知道一种有效的方法来让它以标准（非科学）符号的形式出现？

我已经看到[了这个问题](https://stackoverflow.com/questions/1546113/double-to-string-conversion-without-scientific-notation)，但是前两个答案对我来说似乎有点 hacky，因为他们都这样做`Double.ToString()`，然后只是重新格式化结果。

谢谢你的帮助。

编辑：

所需的输出：

```
.00005.ToString() == ".00005" 
```

编辑2：

所有重复的和接近的投票是怎么回事？我**在问题**中特别说，类似的问题没有令人满意的答案。这个网站上的人们太高兴了。

我的解决方案：

如果它对任何人有用：

```
/// <summary>
/// Converts the double to a standard notation string.
/// </summary>
/// <param name="d">The double to convert.</param>
/// <returns>The double as a standard notation string.</returns>
public static String ToStandardNotationString(this double d)
{
    //Keeps precision of double up to is maximum
    return d.ToString(".#####################################################################################################################################################################################################################################################################################################################################");

} 
```

注意：这仅适用于大于 1 的值。我还没有找到一种有效的方法来为所有值执行此操作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-19T18:30:31.170

请参阅[标准](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)和[自定义数字格式字符串](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)。我想你正在寻找`".################"`：

```
.00005.ToString(".################") // returns ".00005" 
```

是的，这有点骇人听闻，但是只要小数点后的位数不超过那么多，它就可以工作。如果你这样做了，你可能想使用 a在你的字符串`StringBuilder`中构建大约 330 s（大约是 E-324）。`#``double.Epsilon`

# c# - 如何在特定时间在 c# 上显示表单？

> ID：14964745
> 
> 赞同：-1
> 
> 时间：2013-02-19T18:27:09.947
> 
> 标签：c#, service

我有 ac# 应用程序表单。将出现一个表格，显示当天要完成的所有任务。此表单将在任务开始前半小时出现。我想在程序关闭时显示此表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:35:36.453

我不太清楚确切的问题，但很明显，您希望能够在特定时间显示表单（我从标题中发现了这一点:-)）

无论如何...有多种方法可以实现这一点，这取决于您希望实现的目标。

例如，如果您计划让应用程序一直运行，您可以让应用程序设置一个计时器来关闭，然后特定时间发生并处理计时器事件。

或者，如果您不打算一直运行应用程序，请使用 Windows 任务计划程序在适当的时间自动启动您的应用程序，

如果您可以提供有关您正在尝试做什么以及您有什么限制的更多信息（并询问 Romoku 询问...您尝试过什么，请参阅[此链接](http://whathaveyoutried.com)以获取有关如何制定更好问题的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:37:21.457

您可以实现在特定时间显示表单的[Windows 服务。](http://www.codeproject.com/Articles/14353/Creating-a-Basic-Windows-Service-in-C)这必须一直运行。

或者您在应用程序关闭之前为其[安排任务。](https://stackoverflow.com/questions/7394806/creating-scheduled-tasks)

# ssis - How to set a variable using a scalar-valued tSQL function in SSIS SQL Task

> ID：14964746
> 
> 赞同：5
> 
> 时间：2013-02-19T18:27:13.620
> 
> 标签：ssis

I have a tSQL scalar-valued function

```
ALTER FUNCTION [dbo].[MyDB_GetJobId]
(
)
RETURNS [uniqueidentifier] 
```

Its results need to go into a SSIS user variable `vJobId`, declared as `String`. SqlStatementSource is `EXEC ? = dbo.MyDB_GetJobId()`; result set is as follows: `Result Name`: 0; `Variable Name`: `User::vJobId`.

It does not work, the error message is as follows

`"EXEC ? = dbo.MyDB_GetJobId()" failed with the following error: "No value given for one or more required parameters.". Possible failure reasons: Problems with the query, "ResultSet" property not set correctly, parameters not set correctly, or connection not established correctly.`

Connection is fine (a plain SQL request runs ok), no input parameters, ... Could you help? Thanks.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-19T18:50:40.840

I initially went down the path of trying to use a Parameter Mapping with a direction of Return but that was incorrect.

Instead, I have my Execute SQL Task configured as shown. My `ResultSet` is a "Single Row". My `SQLStatement` is simply "SELECT dbo.MyDB_GetJobID()"

![Execute SQL General tab](../Images/9822740fe9def9603caafd343e8e2aa6.png)

In the result set tab, since this is a ResultSet type of Single Row, then we provide a mapping per column with a zero based ordinal system.

![Execute SQL Result Set tab](../Images/a570e7c590b6ec9a9dce3c351fa08918.png)

This is an example demonstrating the result being assigned to the variable `User::SingleRow`. You can ignore `Other` as I was trying to make it work with via the Parameter Mapping tab.

![enter image description here](../Images/7d1bc3fdc434c3e66b2d97ed8be406d6.png)

# java - Jacob - 检索系统还原信息 (Java)

> ID：14964752
> 
> 赞同：1
> 
> 时间：2013-02-19T18:27:32.290
> 
> 标签：java, jacob

我的应用程序需要使用 java 列出计算机上所有可用的还原点（[链接](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378986%28v=vs.85%29.aspx)）。SystemRestore 类位于默认命名空间中，而不是 CIMV2 中。当我尝试以下代码时：

```
public class TestWMI {
    public static void main(String args[]){
        String host = "localhost";
        String connectStr = String.format("winmgmts:\\\\%s\\root\\default", host);
        String query = "SELECT * FROM SystemRestore";
        ActiveXComponent axWMI = new ActiveXComponent(connectStr);

        Variant vCollection = axWMI.invoke("ExecQuery", new Variant(query));

        EnumVariant enumVariant = new EnumVariant(vCollection.toDispatch());
        Dispatch item = null;
        while (enumVariant.hasMoreElements()) {
            item = enumVariant.nextElement().toDispatch();

            String serviceName = Dispatch.call(item,"Description").toString();
            System.out.println();

        }
    }    
} 
```

但最终出现以下错误：

```
Exception in thread "main" com.jacob.com.ComFailException: IEnumVARIANT::Next
    at com.jacob.com.EnumVariant.Next(Native Method)
    at com.jacob.com.EnumVariant.hasMoreElements(EnumVariant.java:68)
    at TestWMI.main(TestWMI.java:28)
Java Result: 1 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T23:24:24.993

在这里，我们有一个帖子说[这个错误可能是由于](http://www.arecavss.com/faq.php?PHPSESSID=eba98d7171c686d9bbb479982e645f54)没有以管理员身份运行引起的。

这是一个示例，您通过查询外部数据 WMI 别名得到相同的错误，但在使用`select`.

```
SELECT Index,InterfaceIndex,SettingID,IpAddress,ServiceName,Description
FROM NICCONFIG
WHERE IPEnabled=true 
```

它应该是：

```
SELECT Index,InterfaceIndex,SettingID,IpAddress,ServiceName,Description
FROM Win32_NetworkAdapterConfiguration
WHERE IPEnabled=true 
```

这是[使用](http://my.safaribooksonline.com/book/operating-systems-and-server-administration/microsoft-windows/9780132603041/windows-management-instrumentation-command-line/ch16lev1sec6)外部别名（来自命令行）或全名（来自 WMI API 调用）的指南。

# javascript - .selector 属性的替代品，因为它在 jQuery 1.9 中被删除了

> ID：14964760
> 
> 赞同：5
> 
> 时间：2013-02-19T18:28:12.050
> 
> 标签：javascript, jquery, jquery-selectors, deprecated, jquery-1.9

从 jQuery 1.9`.selector`开始，jQuery 对象的属性已被移除。（究竟为什么，我有点困惑）。我实际上在一些独特的场景中使用它，我知道我可以做其他事情来防止这种情况发生。**只是想知道是否有人知道从 1.9 开始获取选择器的另一种方法？**

```
$('#whatever').selector // (would of returned '#whatever') 
```

我需要*.selector*的一个例子是，当我已经有一组按**名称**的复选框时，我想在该组中查看哪个复选框被*选中*：

**[jsFiddle 演示](http://jsfiddle.net/5NDBm/)**

```
var $test = $('input[name="test"]');

console.log( $test );
console.log( $(':checked', $test).attr('id') ); // returns --undefined--

console.log( 'now with .selector: ');
console.log( $($test.selector + ':checked').attr('id') ); // returns correct 
```

* * *

> 来自文档： **jQuery 对象上的 .selector 属性**
> 
> jQuery 对象上已弃用的 .selector 属性的剩余目的是支持已弃用的 .live() 事件。在 1.9 中，jQuery 不再尝试在链式方法中维护此属性，因为 .live() 从未支持使用链式方法。不要在 jQuery 对象上使用 .selector 属性。jQuery Migrate 插件不会尝试维护此属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T18:44:36.553

*实际上需要*原始选择器的原因应该不多。在您的特定用例中，如果您想缩小所选元素的范围，可以使用[`.filter` *^([docs])*](http://api.jquery.com/filter/)：

```
$test.filter(':checked').attr('id') 
```

* * *

`$('#whatever').selector`不过似乎仍然有效。文档说*“在 1.9 中，jQuery 不再尝试**在链式方法**中维护此属性[...]”*。尽管[http://api.jquery.com/selector](http://api.jquery.com/selector)声称它已在 1.9 中删除。不知道，有点乱

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-17T09:05:06.430

我只是将选择器保存在这样的变量中：

```
var testSelector = 'input[name="test"]';
var test = $(testSelector);
console.log( $(testSelector + ':checked').attr('id') ); 
```

# jquery - 使用 Jquery 在表格中显示表格

> ID：14964763
> 
> 赞同：1
> 
> 时间：2013-02-19T18:28:26.727
> 
> 标签：jquery, html, ajax, html-table

我有一张有不同行的表。每行包含项目描述和订购项目的链接。单击链接时，我现在需要在该行下方显示一个表单。

我可以通过为每个表行使用多个表单并使用 Jquery`hide()`和`show()`函数来完成它。但这似乎不太合乎逻辑。

有没有更好的办法。就像我可以只在一个地方创建表单并在单击链接时调用它并显示在表格行下方。

```
<table>
<tr>
  <td> The Item Description </td>
  <td><a href=""> Order now </td>
</tr>
<tr>
  <!-- the form should be here , it should be initially hidden but must be displayed when the link is clicked. I will have a huge number of Items -->
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:37:47.620

您可以创建一个函数来填充表单，是的。

```
function populate(description, quantity) {
  $('#myForm').show();
  $('#description', '#myForm').val(description);
  $('#quantity', '#myForm').val(quantity);
} 
```

你应该将该函数绑定到 onclick 事件

```
$('a.order').click(function(){
  var desc = $('.description', $(this)).text(),
      quan = $('.quantity', $(this)).text();
  populate(desc,quan);
  $('#myForm').insertAfter($(this).parent()); // to 'move' the form after the <td> parent of <a>
  return false;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T18:49:15.577

我的版本。我将表单存储为隐藏并将其附加到临时行：

```
var $form  = $('.form'),
    $table = $('.table');

$table.on('click', '.link', function(e) {
    e.preventDefault();
    $table.find('tr.temp-row').remove();
    $(this).closest('tr').after(function() {
        var $tr = $('<tr class="temp-row"><td colspan="4"></td></tr>');
        return $tr.find('td').html($form).end();
    });
}); 
```

[http://jsfiddle.net/3XWUz/](http://jsfiddle.net/3XWUz/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T18:34:50.150

您可以为每个订单按钮添加一个类，然后当单击其中一个按钮时，它会切换`tr`

```
<table>
<tr>
  <td> The Item Description </td>
  <td><a href="" class="order"> Order now </td>
</tr>
<tr>
  <td> The Item Description </td>
  <td><a href="" class="order"> Order now </td>
</tr>
<tr>
  <td> The Item Description </td>
  <td><a href="" class="order"> Order now </td>
</tr>
<tr>
  <td> The Item Description </td>
  <td><a href="" class="order"> Order now </td>
</tr>
<tr id="form_tr" style="display: none;">
  <td colspan="2">
  <!-- the form should be here , it should be initially hidden but must be displayed when the link is clicked. I will have a huge number of Items -->
  </td>
</tr>
</table> 
```

jQuery：

```
$('.order').click(function() {
  $('#form_tr').toggle();
    return false;
}); 
```

您需要添加更多代码以使用正确的产品更新表单，但这是一般的想法。

# servicestack - 更改静态内容的虚拟路径

> ID：14964764
> 
> 赞同：1
> 
> 时间：2013-02-19T18:28:27.237
> 
> 标签：servicestack, static-content

我正在开发一个项目，该项目是一个托管 2 个独立“插件”的自托管服务堆栈站点。我正在尝试对其进行设置，以便我可以从插件目录中提供我的静态内容文件，以便我可以在调试时即时编辑它们，而不需要重建来将 chages 复制到 bin 目录。

通过添加以下内容，我已经为我的剃刀文件工作了：

```
Plugins.Add(new RazorFormat { VirtualPathProvider = new FileSystemVirtualPathProvider(this, "../../../Project1") });
Plugins.Add(new RazorFormat { VirtualPathProvider = new FileSystemVirtualPathProvider(this, "../../../Project2") }); 
```

我似乎无法弄清楚如何对我的静态内容文件做同样的事情。似乎我可以通过添加`EndpointHostConfig.Instance.WebHostPhysicalPath = "../../../ProjectName";`但不能同时修复一个项目来一次修复一个项目？有没有办法为所有提供的文件设置虚拟路径提供程序，而不仅仅是剃刀文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T08:19:59.300

ServiceStack 尚未切换到使用`VirtualPathProvider`来处理静态文件内容。

确定对静态文件的请求发生在 ASP.NET 请求管道的开始处（即在它到达 ServiceStack 的 IHttpHandler 之前），此时解析 a`VirtualPathProvider`并不理想（即耦合）。

我们目前正在调查使用虚拟路径的后果，因为它会使主机 Web 服务器预期的物理路径无效。

### 覆盖 ServiceStack 的默认行为

[ServiceStack 操作顺序中](https://github.com/ServiceStack/ServiceStack/wiki/Order-of-Operations)的前 2 个钩子允许您注入自定义逻辑并处理静态文件请求以覆盖 ServiceStack 的默认行为，两者都是可配置的，并且在这两种情况下，如果您想劫持请求，`AppHost.Configure()`您都可以返回：`IHttpHandler`

1) Config.RawHttpHandlers：

```
SetConfig(new EndpointHostConfig { 
    RawHttpHandlers = { (httpReq) => ... },
}); 
```

2) IAppHost.CatchAllHandlers：

```
this.CatchAllHandlers.Add((httpMethod, pathInfo, filePath) => ...); 
```

# c# - 在 .NET C# 中将 XML 发布到 Web 服务并接收响应

> ID：14964766
> 
> 赞同：0
> 
> 时间：2013-02-19T18:28:29.487
> 
> 标签：c#, asp.net, web-services

我正在使用 C# 将 XML 文件发布到 Web 服务，但是当我请求响应“服务器错误 - 500 - 您不允许访问系统”时出现错误。任何帮助将不胜感激。

```
protected void Page_Load(object sender, EventArgs e)
    {
        WebRequest req = null;
        WebResponse rsp = null;
        try
        {
            string fileName = Server.MapPath("~\\test.xml");
            string uri = "http://212.170.239.71/appservices/http/FrontendService";
            req = WebRequest.Create(uri);
            //req.Proxy = WebProxy.GetDefaultProxy(); // Enable if using proxy
            req.Credentials = new NetworkCredential("myusername", "mypassword");
            req.Method = "POST";        // Post method
            req.ContentType = "text/xml";     // content type
            // Wrap the request stream with a text-based writer
            StreamWriter writer = new StreamWriter(req.GetRequestStream());
            // Write the XML text into the stream
            writer.WriteLine(this.GetTextFromXMLFile(fileName));
            writer.Close();
            // Send the data to the webserver
            rsp = req.GetResponse(); //I am getting error over here
            StreamReader sr = new StreamReader(rsp.GetResponseStream());
            string result = sr.ReadToEnd();
            sr.Close();
            Response.Write(result);

        }
        catch (WebException webEx)
        {
            Response.Write(webEx.Message.ToString());
            Response.Write(webEx.StackTrace.ToString());
        }
        catch (Exception ex)
        {
            Response.Write(ex.Message.ToString());
            Response.Write(ex.StackTrace.ToString());
        }
        finally
        {
            if (req != null) req.GetRequestStream().Close();
            if (rsp != null) rsp.GetResponseStream().Close();
        }
    }
        //Function to read xml data from local system
  /// <summary>
  /// Read XML data from file
  /// </summary>
  /// <param name="file"></param>
  /// <returns>returns file content in XML string format</returns>
  private string GetTextFromXMLFile(string file)
  {
   StreamReader reader = new StreamReader(file);
   string ret = reader.ReadToEnd();
   reader.Close();
   return ret;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:00:00.090

500 错误来自服务本身，意味着您没有必要的访问权限，消息看起来像是自定义的并由服务的编写者返回，所以看起来您正在点击它并得到响应，但也许你的凭据是错误的？代码看起来正确 - 我要检查的第一件事是您传入的用户名和密码绝对正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-07T18:11:30.583

我有同样的问题并通过设置代理解决了它。这是我的示例工作代码，它可能对某人有所帮助:)

```
HttpWebRequest myReq = (HttpWebRequest)WebRequest.Create(WebRequestPath);
                myReq.Method = "POST";
                myReq.ContentType = "text/xml; encoding=utf-8";
                myReq.Timeout = 180000;
                myReq.KeepAlive = true;
                myReq.Headers.Add("SOAPAction", "http://tempuri.org/AmaliPostData");
                myReq.Accept = "gzip,deflate";
                byte[] PostData = Encoding.UTF8.GetBytes(xmlString.Trim());
                myReq.UseDefaultCredentials = false;
                NetworkCredential cred;
                cred = new NetworkCredential(WebRequestUname, WebRequestPassword);
                myReq.Credentials = cred;
                myReq.Host = WebRequestHost.Trim();
                myReq.Credentials = new System.Net.NetworkCredential(WebRequestUname, WebRequestPassword);
                myReq.PreAuthenticate = true;
                string SetProxy;
                SetProxy = WebRequestProxy; // something like this... "10.2.0.1:8080";
                var proxyObject = new WebProxy(SetProxy);
                myReq.Proxy = proxyObject;
                try
                {
                    var writer = myReq.GetRequestStream();
                    writer.Write(PostData, 0, PostData.Length);
                    writer.Close();
  }
                catch (Exception ex)
                {
                    WriteLog(" Writer Exception " + ex.Message + ex.InnerException + " host : " + myReq.Host);
                }

                HttpWebResponse response = (HttpWebResponse)myReq.GetResponse();
                string resp;
                using (var responseStream = response.GetResponseStream())
                {
                    using (var sr = new StreamReader(responseStream))
                    {
                        resp = sr.ReadToEnd();
                    }
                } 
```

# c# - XNA 3D 摄像机滚动

> ID：14964767
> 
> 赞同：0
> 
> 时间：2013-02-19T18:28:32.153
> 
> 标签：c#, xna

我正在使用[Seabase Alpha](http://seabasealpha.wordpress.com/2012/02/06/3d-camera-in-xna-with-pitch-roll-and-yaw/)的 XNA 相机类，效果很好，我根本不需要修改它。但是，如果我同时水平扫射和偏航，它会改变我的滚动，我无法弄清楚如何以某种方式“锁定”它，使其永远不会滚动。（类似于第一人称射击游戏，它只能扫射、推力和调整它的俯仰和偏航。）

我调用类的代码如下：

```
 if (gamepadState.ThumbSticks.Right.X != 0)
        {
            // Look Around
            camera.Yaw(-gamepadState.ThumbSticks.Right.X);
        }
        if (gamepadState.ThumbSticks.Right.Y != 0)
        {
            // Look Around
            camera.Pitch(-gamepadState.ThumbSticks.Right.Y);
        }
        if (gamepadState.ThumbSticks.Left.X != 0)
        {
            // Move Around
            camera.StrafeHorz(-gamepadState.ThumbSticks.Left.X);
        }
        if (gamepadState.ThumbSticks.Left.Y != 0)
        {
            // Move Around
            camera.Thrust(gamepadState.ThumbSticks.Left.Y);
        }
        if (gamepadState.Buttons.LeftShoulder == ButtonState.Pressed)
        {
            camera.StrafeVert(0.2f);
        }
        if (gamepadState.Buttons.RightShoulder == ButtonState.Pressed)
        {
            camera.StrafeVert(-0.2f);
        } 
```

我尝试将相机类中的 Up 向量强制为`Vector(0, 0, 1)`and `Vector(0, 1, 0)`。将 Z 设置为 1 有点帮助，但它仍然能够滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:10:13.693

如果您不打算在相机中实现滚动，最好像这样修改 seabase 代码：

```
public Matrix ViewMatrix
{
    get
    {
        return Matrix.CreateLookAt(Position, Forward+Position, Vector3.Up);//changed the 3rd param from Up toVector3.Up
    }
} 
```

这将抑制您正在经历的任意滚动。但也将阻止您实施滚动。

# facebook - FB 评论插件 App ID

> ID：14964768
> 
> 赞同：1
> 
> 时间：2013-02-19T18:28:34.640
> 
> 标签：facebook, plugins

我已按照 fb dev 网站上的说明进行操作，并在此处和 google 上搜索我的问题，但我仍然卡住了。

我设法让一个 FB 评论插件在一个网站上工作，我可以让主持人功能在该网站上工作，但我无法通过我的 facebook 帐户获得 mod 工具（即这个链接[https://developers.facebook.com /tools/comments?view=queue](https://developers.facebook.com/tools/comments?view=queue) )

它说我“无法在没有 fb:app_id 的情况下编辑全局设置或审核模式”，但我无法获得 app_id。我使用此链接[https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)生成了代码，但没有给出应用 ID。当我创建自己的应用程序时，它会询问我不准备添加的信用卡/借记卡信息。如何找出我的应用程序 ID 是什么？

非常感谢，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T18:12:43.607

我遇到了这个问题并通过以下步骤解决了它：

1.  确保您使用的是适当的 Facebook 应用程序（这也意味着要确保您没有在同一页面上使用*不同的应用程序 ID）。*
2.  确保应用设置正确（如域和网站 URL）。
3.  使用以下 HTML 标记：

    ```
    <meta property="fb:app_id" content="app_id" />
    <meta property="fb:admins" content="facebook_user_name" />
    <meta property="fb:admins" content="another_facebook_user(if you have moderators)" /> 
    ```

    您可以使用其他属性（但必须与您的网站定义的变量相匹配的高级属性）：

    ```
    <meta property="og:type" content="article" />
    <meta property="og:url" content="" />
    <meta property="og:site_name" content="" />
    <meta property="fb:admins" content="" />
    <meta property="fb:app_id" content="" /> 
    ```

# perforce - 如何在当前客户端规范的仓库中获取最新的 Perforce 变更列表

> ID：14964772
> 
> 赞同：5
> 
> 时间：2013-02-19T18:29:02.307
> 
> 标签：perforce

我想在仓库中为我当前的客户端规范获取最新的更改列表。如果我`p4 sync`在我的工作区中做了一个，这实际上就是同步到的变化。

我尝试这样做，但这会返回*通过我的客户端*`p4 changes -s submitted -m1 -c [client-name]`提交的最新更改。

 *这样做`p4 changes -s submitted -m1 //depot/path/...`会起作用，但我不想查询客户端规范来确定仓库路径是什么。另外，如果有多个映射，我将不知道如何理解这一点。

似乎必须有一个简单的方法来做到这一点，我错过了。

**编辑**

我确实必须查询客户端规范，但正如接受的答案中指出的那样，我可以使用客户端规范根作为文件路径，而无需查看视图映射。

使用 P4Python 的最终解决方案：

```
# Get client
clientspec = p4.fetch_client()
root = clientspec["Root"]

# Get latest changenum in client mapping
changes = p4.run("changes", "-s", "submitted", "-m1", root + "/...")
changenum = changes[0]['change'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:18:16.007

我认为您将不得不查询您的客户端规范以找到其本地根。如果您不需要担心`AltRoots`，那么这可能是：

```
p4 changes -s submitted -m 1 "$(p4 client -o | grep "^Root:" | cut -f 2)/..." 
```

在重击中。使用本地客户端根目录而不是库路径可以避免多个映射的问题。*

# python - python中更多嵌套的for循环

> ID：14964775
> 
> 赞同：0
> 
> 时间：2013-02-19T18:29:11.130
> 
> 标签：python, for-loop, nested

我正在尝试打开两个文件。第一个（大师）看起来像：

```
ABC0001 \t rest \t of \t line
ABC0002 \t rest \t of \t line
ABC0003 \t rest \t of \t line
... 
```

所有“ \t ”都是文件中的实际选项卡，每个项目编号后都有其他信息。

下一个文件（allp）只有项目编号，但它们被扩展了：

```
ABC0001
ABC0001.25
ABC0001.56
ABC0001.35
ABC0002
ABC0002.43
ABC0002.97
... 
```

到目前为止我的代码：

```
masters = open("masters.txt","r")
allp = open("allp.txt","r")

for line in masters:
  tabloc = line.find("\t")
  product = line[:tabloc]
  info = line[tabloc:]
  for line_2 in allp:
    if product in line_2:
      print 1
    else:
      print 0 
```

我的输出全是 0。我已经玩弄了一点，并尝试将“产品”重置为 ABCXXXX。如果我在嵌套循环之前打印出产品，那是正确的，但是如果我在嵌套循环中打印它，它会打印第一个产品多次，然后每隔一个都是 ABCXXXX。

我确信我的逻辑可以简化，但这不是必需的，我真的想不出该怎么做，因为我对 python 还是很陌生。

我需要的是从“masters”列表中取出主要产品，并在“allp”列表中找到它的所有子产品。我需要使用其主产品中的信息打印每个子产品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:37:38.650

你会想要

```
allp = open("allp.txt","r").readlines() 
```

既然你这样做了

```
for line_2 in allp: 
```

在一个循环中，第一次之后的所有后续迭代都将为空白。

***编辑***
正如 mgilson 指出的那样，`allp.seek(0)`在每次迭代结束时也是一种很好的方法，尤其是对于大文件。

# javascript - 在 Netbeans 7.2.1 中为 JavaScript 设置断点

> ID：14964779
> 
> 赞同：0
> 
> 时间：2013-02-19T18:29:41.777
> 
> 标签：javascript, debugging, netbeans-7, xdebug

是否可以在 Netbeans 7.2.1 中为 JavaScript 设置断点？我在 OpenSUSE 12.1 上运行 Netbeans 7.2.1，并且正在 PHP 模块中开发 PHP 和 JavaScript。

我正在使用两个文件：一个名为 index.php 的 php 文件和一个名为 example.js 的 JavaScript 文件。它们都运行良好，但我无法在 example.js 中设置任何断点，并且 index.php 中的断点显示为已损坏，并且在我以调试模式运行程序时无效。

我已经安装了 xdebug-2.1.1，这是我在 netbeans 中运行程序时收到错误消息后所做的。因此，我不再收到错误消息，但这对断点问题没有帮助。

谢谢，
彼得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:39:08.320

> 在 Netbeans 7.2.1 中为 JavaScript 设置断点
> 
> 我已经安装了 xdebug-2.1.1

x-debug 用于 php，与 javascript 无关，我假设您在谈论 javascript 客户端。你需要的是最新版本的 netbeans 和浏览器调试插件，在 chrome 中你有以下一个：

[https://chrome.google.com/webstore/detail/netbeans-connector/hafdlehgocfcodbgjnpecfajgkeejnaa](https://chrome.google.com/webstore/detail/netbeans-connector/hafdlehgocfcodbgjnpecfajgkeejnaa)

直接在浏览器中使用关键字 debugger 进行调试更容易；并在 chrome 中按 F12。

# asp.net-mvc - MVC 4 ajax上传文件.copyto让文件保持打开状态

> ID：14964781
> 
> 赞同：1
> 
> 时间：2013-02-19T18:29:43.330
> 
> 标签：asp.net-mvc, c#-4.0, filestream

我正在使用 MVC 4、C# 4 和 ajax 发布带有文件输入的表单。一切正常，除了我可以看到正在写入服务器的文件，但它似乎被锁定，直到我手动刷新页面。所以看起来好像有什么东西在锁定它，即在写入过程中我没有关闭什么东西等等？

在我的控制器中，我捕获文件 InputStream 并将其传递给服务层。

控制器捕获代码：

```
if (Request.Files.Count > 0)
            {
                file = Request.Files[0]; //Uploaded file
                fileName = file.FileName;
                mimeType = file.ContentType;
                fileContent = file.InputStream;
            } 
```

服务层代码，其中 fileStream 是 Stream 类型，是从控制器中的 file.InputStream 传入的。

```
//Write file to disk path
                fileStream.CopyTo(File.OpenWrite(diskPath + newfileName));
                fileStream.Flush();
                fileStream.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:52:45.040

将其包装在 using 语句中有效并且不会锁定文件

```
using (var output = File.OpenWrite(diskPath + newfileName))
                {
                    using (var input = fileStream)
                    {
                        input.CopyTo(output);
                    }
                } 
```

# android - 在 SurfaceView 中加载图像时出现问题

> ID：14964794
> 
> 赞同：0
> 
> 时间：2013-02-19T18:30:17.407
> 
> 标签：android, surfaceview

我需要加载汽车的不同图像，这些图像基本上保存在可绘制对象中以模拟 360 度旋转，当用户拖动视图时，我已经设置了拖动距离，一旦用户穿过它，我将加载下一帧。我正在使用表面视图并在画布上绘制图像。由于图像太大，我无法一次将所有图像加载到内存中，因此我通过仅将当前图像保留在内存中来动态加载图像。但是这种方法太迟钝了。谁能指出我做错了什么？或任何其他更好的方法来实现相同的目标。谢谢你的帮助。

这是我的代码

/** * @author rajeshcp * 在视图中充当顶视图的类 * CarDetailsActivity 的层次结构 * @since 2013 年 2 月 13 日 */

```
public class VirtualView extends SurfaceView implements SurfaceHolder.Callback, OnTouchListener, TweenListener {

private final int frame_width  = 1024;
private final int frame_height = 462;

private InteractionListener mInteractionListener;

private final int mSnapVelocity = 1000;

private VelocityTracker mVelocityTracker;

protected int mTouchSlop;

private int mMaxVelocity;

private Rect mViewArea;

private IQTweener mValueanimator;

private ColorVariationVO mColorVariationVO;

/**************Indicates the current frame*********************/
private int mCurrentFrameIndex;

/**********Initial touch x coordinate**************/
private int mInitialTouchX;

/***********The drag distance for frame change***********/
private int mDragInterWell = 10;

private final int mTotalFrames   = 36;

protected final int mMaxFrameSkip  = 3;

/**************Identity matrix**********************/
private Matrix mIdentityMatrix;

private Paint mPaint;

/*********The bitmap to be drawn over the canvas*********/
private Bitmap mCurrentFrame;

private ViewUpdater mViewUpdater;

/*++++++++++++++++++++++++++++++++++++++++++++++*/
/*+++++++++++++Getters and Setters++++++++++++++*/
/*++++++++++++++++++++++++++++++++++++++++++++++*/

/**
 * @param of type null
 * @return mColorVariationVO of type ColorVariationVO
 * getter function for mColorVariationVO
 * @since Feb 13, 2013 
 * @author rajeshcp 
 */
public ColorVariationVO getmColorVariationVO() {
    return mColorVariationVO;
}

/**
 * @param mColorVariationVO of type ColorVariationVO
 * @return of type null
 * setter function for mColorVariationVO
 * @since Feb 13, 2013
 * @author rajeshcp 
 */
public void setmColorVariationVO(ColorVariationVO mColorVariationVO) {
    this.mColorVariationVO = mColorVariationVO;
    loadNextFrame();
}

/**
 * @param context of type Context
 * @return of type VirtualView
 * Constructor function
 * @since Feb 13, 2013 
 * @author rajeshcp
 */
public VirtualView(Context context) {
    super(context);
    init();
}

/**
 * @param context of type Context
 * @param attrs of type AttributeSet
 * @return of type VirtualView
 * Constructor function
 * @since Feb 13, 2013 
 * @author rajeshcp
 */
public VirtualView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

/**
 * @param context of type Context
 * @param attrs of type AttributeSet
 * @param defStyle of type int 
 * @return of type VirtualView
 * Constructor function
 * @since Feb 13, 2013 
 * @author rajeshcp
 */
public VirtualView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
}

/**
 * @param of type null
 * @return of type null
 * function which will initialize the values for the view 
 * @since 13 Feb 2013
 */
private void init()
{
    setZOrderOnTop(true);  
    getHolder().setFormat(PixelFormat.TRANSPARENT);
    mPaint                                = new Paint(Paint.FILTER_BITMAP_FLAG | Paint.DITHER_FLAG | Paint.ANTI_ALIAS_FLAG);
    mIdentityMatrix                       = new Matrix(); 
    mCurrentFrameIndex                    = 0;
    mViewUpdater                          = new ViewUpdater();
    mInteractionListener                  = new InteractionListener();
    final ViewConfiguration configuration = ViewConfiguration.get(getContext());
    mTouchSlop                            = configuration.getScaledTouchSlop();
    mMaxVelocity                          = configuration.getScaledMaximumFlingVelocity();

    getHolder().addCallback(this);
    setOnTouchListener(this);
    setLayerType(View.LAYER_TYPE_HARDWARE, mPaint);
}

/**
 * @param direction of type int
 * @return of type null
 * function which will change the current frame index
 * @since Feb 13, 2013
 * @author rajeshcp
 */
private void initiateFrameChange(final int direction)
{
    mCurrentFrameIndex += Math.max(-mMaxFrameSkip, Math.min(mMaxFrameSkip, direction));

    if( mCurrentFrameIndex > (mTotalFrames - 1) )
    {
        mCurrentFrameIndex = (mCurrentFrameIndex % ( mTotalFrames - 1) );
    }else if( mCurrentFrameIndex < 0 )
    {
        mCurrentFrameIndex = (mTotalFrames - 1) + (mCurrentFrameIndex % (mTotalFrames - 1));
    }
    loadNextFrame();

}

/**
 * @param index of type int 
 * @return of type Bitmap 
 * function which will create the bitmap form the 
 * resources
 * @since Feb 13, 2013
 * @author rajeshcp
 */
@SuppressLint("UseSparseArrays")
private Bitmap getFrame(final int index)
{
    Bitmap bitmap = null;
    if( mColorVariationVO != null)
    {
        final int drawableId = getResourceId(index);
        try
        {
            bitmap = BitmapFactory.decodeResource(getResources(), drawableId);
        }catch (Exception e) {
            Log.d(getClass().getName(), e.getLocalizedMessage());
        }
    }
    return bitmap;
}

/**
 * @param index of type int 
 * @return of type int 
 * function which create the resource id 
 * from index
 * @since Feb 18, 2013
 * @author rajeshcp
 */
private int getResourceId(final int index)
{
    final String frameName = mColorVariationVO.getmCarAssetPath() + "_" + index;
    int drawableId = 0;
    try {
        @SuppressWarnings("rawtypes")
        Class res   = R.drawable.class;
        Field field = res.getField(frameName);
        drawableId  = field.getInt(null);
    }
    catch (Exception e) {
        Log.e(getClass().getName(), "Failure to get drawable id.", e);
    }
    return drawableId;
}

/* (non-Javadoc)
 * @see android.view.View#onDraw(android.graphics.Canvas)
 * @since Feb 13, 2013
 * @author rajeshcp 
 */
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    if( mCurrentFrame != null && canvas != null )
    {
        canvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.CLEAR);
        mIdentityMatrix.reset();

        //          mPaint.setStyle(Paint.Style.STROKE);
        //          mPaint.setStrokeWidth(1);
        //          mPaint.setColor(Color.MAGENTA);
        //          mPaint.setTextSize(100);
        //
        //          canvas.drawText(String.valueOf(mCurrentFrameIndex), (getWidth() / (mTotalFrames - 1) ) * mCurrentFrameIndex, (getHeight() - 100) / 2, mPaint);

        mIdentityMatrix.postTranslate(getWidth() - frame_width, (getHeight() - frame_height) / 2);
        canvas.drawBitmap(mCurrentFrame, mIdentityMatrix, mPaint);
    }
}

/* (non-Javadoc)
 * @see android.view.SurfaceHolder.Callback#surfaceChanged(android.view.SurfaceHolder, int, int, int)
 * @since Feb 13, 2013
 * @author rajeshcp 
 */
@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
}

/* (non-Javadoc)
 * @see android.view.SurfaceHolder.Callback#surfaceCreated(android.view.SurfaceHolder)
 * @since Feb 13, 2013
 * @author rajeshcp 
 */
@Override
public void surfaceCreated(SurfaceHolder holder) {

    if( mViewArea == null )
    {
        int top   = (getHeight() - frame_height) / 2;
        int left  = getWidth() - frame_width;
        mViewArea = new Rect(left, top, frame_width + left, frame_height + top);
    }

    mDragInterWell = (int)(mViewArea.width() / (2 * mTotalFrames));

    if( mViewUpdater == null)
    {
        init();
    }
    mViewUpdater.start();
    mInteractionListener.start();
}

/* (non-Javadoc)
 * @see android.view.SurfaceHolder.Callback#surfaceDestroyed(android.view.SurfaceHolder)
 * @since Feb 13, 2013
 * @author rajeshcp 
 */
@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    if(mViewUpdater != null)
    {
        mViewUpdater.setRun(false);
        mViewUpdater                    = null;
        mInteractionListener.mIsRunning = false;
        mInteractionListener            = null;
    }
}

private boolean isScrolled = false;

/* (non-Javadoc)
 * @see android.view.View.OnTouchListener#onTouch(android.view.View, android.view.MotionEvent)
 * @since Feb 13, 2013
 * @author rajeshcp 
 */
@Override
public boolean onTouch(View v, MotionEvent event) {
    mInteractionListener.queueEvent(event);
    return true;
}

/**
 * @param velocity of type int
 * @return of type null
 * function which will initiate the 
 * fling animation
 * @since Feb 15, 2013
 * @author rajeshcp
 */
private void initiateFling(int velocity)
{
    return;
    //      int maxDuration  = mMaxFrameSkip * mSnapVelocity;
    //      velocity         = Math.max(-maxDuration, Math.min(maxDuration, velocity));
    //      int end          = ((int)( velocity / mSnapVelocity )) * mTotalFrames;
    //      
    //      if( mValueanimator == null )
    //      {
    //          mValueanimator = new IQTweener(mCurrentFrameIndex, mTotalFrames - 1);
    //          mValueanimator.setmListener(this);
    //      }
    //      mValueanimator.setMduration(2000);
    //      mValueanimator.setmStart(mCurrentFrameIndex);
    //      mValueanimator.setmEnd(end);
    //      mValueanimator.start();
}

/**
 * @param of type null
 * @return of type null
 * function which will clear 
 * the touch values
 * @since Feb 15, 2013
 * @author rajeshcp
 */
private void onTouchEnd()
{
    isScrolled = false;
    mVelocityTracker.clear();
    mVelocityTracker.recycle();
    mVelocityTracker = null;
    mInitialTouchX   = 0;
}

/* (non-Javadoc)
 * @see com.inkoniq.iqpromomultitouch.animations.IQTweener.TweenListener#onUpdate(java.lang.Object)
 * @since Feb 15, 2013
 * @author rajeshcp 
 */
@Override
public void onUpdate(float mCurrent) {

    final int mIndex = (int) mCurrent;

    if( mIndex > (mTotalFrames - 1) )
    {
        mCurrentFrameIndex = (mIndex % ( mTotalFrames - 1) );
    }else if( mIndex < 0 )
    {
        mCurrentFrameIndex = (mTotalFrames - 1) + (mIndex % (mTotalFrames - 1));
    }
}

/**
 * @param of type null
 * @return of type null
 * function which will load the next frame from local storage 
 * @since Feb 13, 2013
 * @author rajeshcp
 */
private void loadNextFrame()
{
    final Bitmap frame = getFrame(mCurrentFrameIndex);

    if(mCurrentFrame != null)
    {
        Bitmap temp   = mCurrentFrame;
        mCurrentFrame = frame;
        temp.recycle();
        temp = null;
    }else
    {
        mCurrentFrame = frame;
    }
}

/**
 * @author rajeshcp
 * class which will take care of updating the view
 * @since 13 Feb 2013 
 */
private class ViewUpdater extends Thread
{
    private SurfaceHolder surface;

    private boolean run = true;

    /**
     * @param run of type boolean 
     * @return of type null 
     * setter function for run 
     * @since 13 Feb 2013
     */
    public void setRun(boolean run) {
        this.run = run;
    }

    /**
     * @param surface of type SurfaceHolder
     * @param gameView of type GameView
     * Constructor function 
     * @since 13 Feb 2013
     */
    public ViewUpdater()
    {
    }

    /*
     * (non-Javadoc)
     * @see java.lang.Thread#run()
     * @since Feb 13, 2013
     * @author rajeshcp
     */
    @Override
    public void run() {
        Canvas canvas;

        while (run) {
            canvas = null;
            try {
                surface = getHolder();
                canvas = surface.lockCanvas(null);
                synchronized (surface) {
                    onDraw(canvas);
                }
            } finally {
                if (canvas != null) {
                    surface.unlockCanvasAndPost(canvas);
                }
            }
        }
    }
}

/**
 * @author rajeshcp
 * Class which will handle the touch 
 * events 
 * @since 19 Feb 2013
 */
private class InteractionListener extends Thread 
{

    ArrayList<MotionEvent> mEventQueue;

    boolean mIsRunning = false;

    /**
     * @param of type null
     * @return of type InteractionListener
     * Constructor function
     * @since Feb 19, 2013 
     * @author rajeshcp
     */
    public InteractionListener()
    {
        init();
    }

    /**
     * @param of type null
     * @return of type null
     * @since Feb 19, 2013
     * @author rajeshcp
     */
    private void init()
    {
        mIsRunning  = true;
        mEventQueue = new ArrayList<MotionEvent>();
    }

    /**
     * @param event of type MotionEvent
     * @return of type null
     * function which will add the event to 
     * the mEventQueue
     * @since Feb 19, 2013
     * @author rajeshcp
     */
    private void queueEvent(MotionEvent event)
    {
        mEventQueue.add(event);
    }

    /**
     * @param event of type MotionEvent
     * @return of type null
     * function which will process the touch event 
     * @since Feb 19, 2013
     * @author rajeshcp
     */
    private void onTouch(MotionEvent event) {

        if( event == null )
            return;

        if( mVelocityTracker == null )
        {
            mVelocityTracker = VelocityTracker.obtain();
        }
        mVelocityTracker.addMovement(event);
        if( !mViewArea.contains((int)event.getX(), (int)event.getY()) )
        {
            return;
        }

        switch(event.getAction())
        {
        case MotionEvent.ACTION_DOWN :
        {
            if( mValueanimator != null )
            {
                mValueanimator.cancel();
            }
            isScrolled = false;
            mInitialTouchX = (int)event.getX();
            break;
        }
        case MotionEvent.ACTION_MOVE :
        {
            final int currentX        = (int)event.getX();
            final int draggedDistance = (currentX - mInitialTouchX);
            if( draggedDistance != 0 && draggedDistance % mDragInterWell == 0 )
            {
                isScrolled     = true;
                initiateFrameChange(draggedDistance / mDragInterWell);
                Log.d(getClass().getName(), "frameIndex = " + mCurrentFrameIndex);
                mInitialTouchX = currentX;
            }
            break;
        }
        case MotionEvent.ACTION_UP :
        {
            if( isScrolled )
            {
                final VelocityTracker velocityTracker = mVelocityTracker;
                velocityTracker.computeCurrentVelocity(1000, mMaxVelocity);
                int velocityX = (int) velocityTracker.getXVelocity();
                if( (velocityX > mSnapVelocity) || (velocityX < -mSnapVelocity) )
                {
                    initiateFling(velocityX);
                }
            }
            onTouchEnd();
            break;
        }
        case MotionEvent.ACTION_CANCEL :
        {
            onTouchEnd();
            break;
        }
        default :
        {
            break;
        }
        }
    }

    /* (non-Javadoc)
     * @see java.lang.Thread#run()
     * @since Feb 19, 2013
     * @author rajeshcp 
     */
    @Override
    public void run() {
        while ( mIsRunning ) {
            while ( mEventQueue.size() > 0 ) {
                onTouch(mEventQueue.remove(0));
                try
                {
                    Thread.sleep(16);
                }catch (Exception e) {
                }
            }

        }
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:45:10.553

由于尝试显示模拟 360 度视图的复杂性，您可能需要考虑使用 OpenGL 来处理此渲染。这将为您提供更多关于内容显示方式的权力，并将简化您的实施。

然而; 这并不是说这是一个简单的实现。但这将是实现这样的事情的最佳方式。

# shell - 在 shell 脚本中压缩日志文件

> ID：14964795
> 
> 赞同：0
> 
> 时间：2013-02-19T18:30:29.437
> 
> 标签：shell, cron, gzip, jboss7.x

我在 JBoss 7.1 中部署了一个应用程序。我需要以 gz 格式压缩所有旋转文件。我正在考虑创建一个shell脚本来做到这一点。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:36:52.847

Shell 脚本听起来不错。基本上，如果您想旋转所有早于 x 的文件，请执行

```
find -mtime $TIME -exec mv "{}" "$tmp_dir/" {}\; 
```

压缩 $tmp_dir 中的所有文件，删除 $tmp_dir，保留存档。:)

下次调用轮换脚本时，您可以列出所有已创建的档案，并按创建数据排序，如果存在 N 个以上的 .gz 档案，则删除最旧的档案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:30:23.463

不要重新发明轮子。可能有数百个（如果不是数千个）正在使用的日志压缩/旋转脚本，所以只需执行一点[google/git-fu](https://www.google.com/search?q=log%20rotation%20cron%20shell%20script)，您可能会找到一个可以根据您的需要进行调整的脚本。

# android - 键盘显示和横向屏幕上的布局扭曲

> ID：14964798
> 
> 赞同：1
> 
> 时间：2013-02-19T18:30:34.983
> 
> 标签：android, android-layout

找到了类似的问题，但找不到最佳答案。如何解决android中键盘显示和横向屏幕上的布局问题？以下是出现问题的图像。![初始布局](../Images/4985152a5f9607449091d713a74d9d43.png)

以上是原版图

在屏幕上的键盘下方

![键盘后布局](../Images/308efeae49dd97e2a5878a9649870ace.png)

在键盘后的第二张图片布局中，缺少半个按钮并且缺少登录文本视图

请帮助我如何解决这个问题？

这是第三张图

![横向屏幕布局](../Images/eb3d67f9e7e48898ea35738f280ccddb.png)

在横向缺少按钮和文本视图时出现问题并且没有得到任何滚动。

这是代码

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:gravity="center"
android:background="@drawable/background"
android:padding="20dp"
android:paddingEnd="0dp"
android:scrollbars="vertical|horizontal"
>

<ImageView
    android:layout_height="wrap_content"
    android:src="@drawable/logo"
    />
<TableRow
    android:id="@+id/tableRow2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:gravity="center_horizontal" 
    android:layout_marginTop="15dp">

    <EditText
        android:id="@+id/editText2"
        android:layout_width="match_parent"
        android:layout_height="40dp"
        android:ems="10"
        android:layout_weight="1"
        android:hint="Full Name"
        android:textSize="16sp"
        android:background="@drawable/radius"
        android:inputType="textPersonName"
        android:paddingLeft="10dp" >
        <requestFocus />
        </EditText>

</TableRow>
<TableRow
    android:id="@+id/tableRow2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:gravity="center_horizontal" 
    >

    <EditText
        android:id="@+id/editText2"
        android:layout_width="match_parent"
        android:layout_height="40dp"
        android:ems="10"
        android:layout_weight="1"
        android:hint="Username"
        android:textSize="16dp"
        android:background="@drawable/radius"
        android:paddingLeft="10dp"
        android:layout_marginBottom="15dp"
        android:layout_marginTop="15dp"
        android:inputType="textPersonName" />

</TableRow>
<TableRow
    android:id="@+id/tableRow1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
     >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_weight="1"
        android:layout_height="40dp"
        android:ems="10"
        android:textSize="16sp"
        android:hint="Email"
        android:background="@drawable/radius"
        android:inputType="textEmailAddress"
        android:paddingLeft="10dp"
       />

</TableRow>

<TableRow
    android:id="@+id/tableRow2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:gravity="center_horizontal" 
    >

    <EditText
        android:id="@+id/editText2"
        android:layout_width="match_parent"
        android:layout_height="40dp"
        android:ems="10"
        android:layout_weight="1"
        android:hint="Password"
        android:textSize="16sp"
        android:layout_marginTop="15dp"
        android:background="@drawable/radius"
        android:inputType="textPassword" 
        android:paddingLeft="10dp"/>

</TableRow>

<TableRow
    android:id="@+id/tableRow3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp"
    android:layout_marginBottom="20dp" >

    <Button
        android:id="@+id/button1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:background="@drawable/button_bg"
        android:text="Register" 
        android:layout_weight="1"
        android:layout_margin="2dp"
        android:textColor="#FFF"/>

</TableRow>

<TableRow
    android:id="@+id/tableRow4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="bottom|center" >

    <TextView
    android:id="@+id/signIn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal|bottom|center"
    android:linksClickable="true"
    android:textColor="#FFF"
    android:text="Sign In to addressbook"
    />

</TableRow>

</TableLayout> 
```

请帮助我将非常感谢你你好@Sam你能回答这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:57:52.707

如果您希望它可滚动，请将整个布局包装在`ScrollView`. 正如@AbdulHannan 在他的回答中提到的那样，您可以在 AndroidManifest 中定义首选行为（调整大小与平移），或者在 onCreate() 中以编程方式定义（但不能在两者中定义——这是多余的）。如果您只是将它包装在 ScrollView 中，Android 将自动使用`adjustResize`来调整您的窗口大小，假设您的 ScrollView 将适当地处理大小更改并且可以为用户滚动。

侧面设计建议：背景非常华丽；如果需要图案，请尝试使图案更加微妙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:51:58.353

在您的`Manifest.xml`, 在您的下方`<activity>`包含此内容，
`android:windowSoftInputMode="stateVisible|adjustResize|adjustPan`
并在您的`onCreate()`中添加此内容：
`getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);`如果您希望在`Activity`创建时隐藏键盘。

# wpf - 从 TabControl 的 DataTemplate 绑定到主 DataContext

> ID：14964801
> 
> 赞同：2
> 
> 时间：2013-02-19T18:30:41.063
> 
> 标签：wpf, mvvm, wpfdatagrid, datatemplate, datacontext

我正在尝试使用单个 DataGrid 作为选项卡控件中每个选项卡的内容（然后我将重新加载网格的内容，以在单击不同选项卡时显示处于不同状态的模型）。

但是，由于某种原因，DataGrid 在 TabControl 的 DataTemplate 内时无法绑定。但是，在页面的主要流程中，相同的 Datagrid XAML 和绑定可以完美地工作。

```
<!-- first grid works perfectly-->
<DataGrid ItemsSource="{Binding RANsToDisplay}" />

<TabControl>                
    <TabControl.ContentTemplate>
        <DataTemplate>
            <!-- Second grid fails to bind-->
            <DataGrid ItemsSource="{Binding RANsToDisplay}" />
        </DataTemplate>
    </TabControl.ContentTemplate>

    <TabItem Header="Calls"></TabItem>
    <TabItem Header="Collections"></TabItem>
    <TabItem Header="Receipts"></TabItem>
</TabControl> 
```

我猜这是因为选项卡控件的 DataTemplate 中的项目的 DataContext 与其外部的项目相比有所不同，但我只是在长时间休息后才重新启动我的 WPF，并且不知道如何在 DataTemplate 中获取 DataGrid正确绑定到 DataContext。

非常感谢您提供任何帮助/指示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T18:36:40.280

您需要为 DataGrid 绑定使用相对路径；

```
<!-- first grid works perfectly-->
<DataGrid ItemsSource="{Binding RANsToDisplay}" />

<TabControl>                
    <TabControl.ContentTemplate>
        <DataTemplate>
            <!-- Second grid fails to bind-->
            <DataGrid ItemsSource="{Binding DataContext.RANsToDisplay, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}" />
        </DataTemplate>
    </TabControl.ContentTemplate>

    <TabItem Header="Calls"></TabItem>
    <TabItem Header="Collections"></TabItem>
    <TabItem Header="Receipts"></TabItem>
</TabControl> 
```

只需将 UserControl 更改为包含 DataContext 的控件即可

# ios - 呈现 ViewController 时出错

> ID：14964802
> 
> 赞同：-1
> 
> 时间：2013-02-19T18:30:42.057
> 
> 标签：ios, objective-c, cocoa-touch

尝试执行此行时，位于单独的函数中：

```
[self presentViewController:selectVC_ animated:YES completion:nil]; 
```

我收到此错误：

> *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil”

我的声明和实例化位于同一个文件中

```
@class typesel_vc;
@interface
@property(nonatomic,strong)typesel_vc *selectVC;

@implementation 
@synthesize selectVC=selectVC_;

-(void)viewDidAppear:(BOOL)animated{
    selectVC_=[[typesel_vc alloc]init];
} 
```

有关如何处理此错误的任何想法？

编辑：

将分配放在我调用 presentViewController 的实际行之前

```
selectVC_=[[typesel_vc alloc]init];
[self presentViewController:selectVC_ animated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:38:49.180

首先，按照惯例，类名应该以大写字母开头。

其次，在未来加载控制器视图时，初始化模态视图控制器是没有意义的。您应该在演示之前执行此操作。

第三，从您发布的代码无法确定错误。使用日志语句和断点单步执行代码以查看 nil 对象出现的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:53:36.373

我能够通过修改这些代码行来解决这个问题：

```
selectVC_=[[typesel_vc alloc]init];
[self presentViewController:selectVC_ animated:YES completion:nil]; 
```

至：

```
selectVC_=[self.storyboard instantiateViewControllerWithIdentifier:@"typesel_vc"];
[self presentViewController:selectVC_ animated:YES completion:nil]; 
```

# bash - Bash 测试中的复合条件组

> ID：14964805
> 
> 赞同：91
> 
> 时间：2013-02-19T18:30:50.800
> 
> 标签：bash, if-statement

我想在 Bash *if*语句中有一些条件组。具体来说，我正在寻找类似以下的内容：

```
if <myCondition1 and myCondition2> or <myCondition3 and myCondition4> then... 
```

如何按照我描述的方式将条件组合在一起，以便在 Bash 中与一个*if语句一起使用？*

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2013-02-19T18:47:23.173

使用 && (and) 和 || （或）运营商：

```
if [[ expression ]] && [[ expression ]] || [[ expression ]] ; then 
```

它们也可以在单个 [[ ]] 中使用：

```
if [[ expression && expression || expression ]] ; then 
```

最后，您可以将它们分组以确保评估顺序：

```
if [[ expression && ( expression || expression ) ]] ; then 
```

# visual-studio - MS 动态 CRM 2011 和 Visual Studio 2008

> ID：14964810
> 
> 赞同：1
> 
> 时间：2013-02-19T18:31:01.467
> 
> 标签：visual-studio, dynamics-crm-2011, dynamics-crm

我正在尝试借助 SDK 示例学习 Dynamics CRM 2011 编程。我们有不能针对 .net 4.0 框架的 Visual Studio 2008

我需要购买 VS 2010 还是有任何解决方法以便我可以玩这些[示例](http://www.microsoft.com/en-us/download/details.aspx?id=24004)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:54:04.253

您将需要 VS2010 以 .NET 4.0 为目标，但如果成本是一个问题，您可以查看[express 版本。](http://www.microsoft.com/visualstudio/en-gb/express)

Express 版本不支持扩展，因此不允许您安装 SDK 中可用的开发人员工具包。然而，这不是针对 CRM 进行开发所必需的，但确实使开发人员的工作流程变得相当容易。如果您确实选择了 VS 产品系列的付费版本之一，那么值得一看。

# gnu - 使 distcheck 不复制所有源

> ID：14964811
> 
> 赞同：2
> 
> 时间：2013-02-19T18:31:02.043
> 
> 标签：gnu, autotools, autoconf, automake, libtool

我的项目结构如下：

/ subdir1 subdir2 subdir3 common_include

每个子目录为我的项目编译不同的二进制文件和库。common_include 包括我所有子目录中包含的 .h（C++ 头文件）。

这些头文件不会添加到 SOURCES 属性中的每个 Makefile.am 中。但是我将以下路径 -I../common_include 添加到 CPPFLAGS 属性

我使用 GNU 构建系统进行配置。一切正常。

但是当我想通过键入：make distcheck 以创建：my-project-1.0.tar.gz 来发布项目时，存档已成功创建。

但它包含所有子目录而不是 common_include 目录。所以最终用户无法编译..

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T11:26:43.717

听起来您有一个`Makefile.am`文件层次结构，每个目录中都有一个。解决这个问题的一个简单方法是`Makefile.am`在整个项目的顶层编辑并添加：

```
EXTRA_DIST = common_include/header.h common_include/other-header.h # ... 
```

依此类推，列出所有标题。Automake 使用 EXTRA_DIST 来命名应该包含在分发中的其他文件，即使它们没有被 Automake 知道的任何其他规则引用，并且是用于解决此类问题的良好通用机制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T18:43:20.920

您需要将头文件添加`common_include`到您的 SOURCES 某处。否则它们将不会被打包在 tarball 中`make dist`。在这种情况下`make distcheck`应该失败。正如我在评论中所说，我认为`make distcheck`确实失败了。您应该在您的工作目录中查看相关证据。可能会有一个目录`_build`和一个目录`_inst`，并且可能还有一个`my-project-1.0`不属于您的目录结构的目录。

编辑：这是我的做法：

**配置.ac**

```
AC_PREREQ([2.62])
AC_INIT([my-project], [1.0.0], [my-project@example.com], [my-project])
AC_CONFIG_SRCDIR([subdir1/foo.cc])
LT_PREREQ([2.2.4])
AC_CANONICAL_SYSTEM

AM_INIT_AUTOMAKE
LT_INIT

AC_PROG_CXX
AC_PROG_MAKE_SET
AC_SUBST([LIBTOOL_DEPS])

AC_CONFIG_FILES([Makefile])
AC_OUTPUT

```

典型的样板文件。没什么可看的，除了 C++ 编译器。

**生成文件.am**

```
AUTOMAKE_OPTIONS = 1.11 外国

bin_PROGRAMS = baz
lib_LTLIBRARIES=libfoo.la libbar.la

baz_SOURCES=$(top_srcdir)/subdir3/baz.cc \
$(top_srcdir)/common_include/bar.hpp \
$(top_srcdir)/common_include/foo.hpp
baz_CXXFLAGS=-I$(top_srcdir)/common_include
baz_LDADD=libfoo.la libbar.la

libfoo_la_CXXFLAGS=-I$(top_srcdir)/common_include
libfoo_la_SOURCES=$(top_srcdir)/subdir1/foo.cc \
$(top_srcdir)/common_include/foo.hpp

libbar_la_CXXFLAGS=-I$(top_srcdir)/common_include
libbar_la_SOURCES=$(top_srcdir)/subdir2/bar.cc \
$(top_srcdir)/common_include/bar.hpp

```

制作了两个库和一个依赖于它们的程序，并带有`common_include`. 为了打包东西，您实际上只需要为某个对象引用一次头文件。我总是明确列出它们，主要是为了记录它们。autoconf 系统足够智能，可以为标头构建正确的依赖关系。

如果您想知道，`make distcheck`确实有效：

**我的项目-1.0.0.tar.gz**

```
我的项目 1.0.0/
我的项目 1.0.0/ltmain.sh
我的项目-1.0.0/configure.ac
我的项目-1.0.0/安装-sh
我的项目 1.0.0/缺失
我的项目-1.0.0/subdir2/
我的项目-1.0.0/subdir2/bar.cc
我的项目-1.0.0/subdir3/
我的项目-1.0.0/subdir3/baz.cc
我的项目 1.0.0/Makefile.in
我的项目-1.0.0/subdir1/
我的项目-1.0.0/subdir1/foo.cc
我的项目 1.0.0/common_include/
我的项目-1.0.0/common_include/bar.hpp
我的项目-1.0.0/common_include/foo.hpp
我的项目-1.0.0/config.sub
我的项目 1.0.0/配置
我的项目 1.0.0/config.guess
我的项目-1.0.0/aclocal.m4
我的项目 1.0.0/Makefile.am
我的项目 1.0.0/depcomp

```

# php - 临时重定向阻止获取 $_POST 数组

> ID：14964812
> 
> 赞同：0
> 
> 时间：2013-02-19T18:31:03.570
> 
> 标签：php, wordpress, redirect, woocommerce

我正在从 woocommerce 插件发送表单。我调整了`thankyou.php`页面并添加了电子邮件发送功能。但是 $_POST 数组是空的。

使用 Chrome 开发工具检查我发现发布的页面有临时重定向：![Chrome 开发工具](../Images/2ffa398e5788ff82cc32b9d695d02d82.png)

重定向在哪里发起？有没有办法在重定向之前捕获 $_POST 数组？

相关表格代码：（in `/woocommerce/templates/checkout/form-checkout.php`）

```
 <form enctype="multipart/form-data" name="checkout" method="post"  id="checky" class="checky" action="http://pharma-job.shared6.lighthost.co.il/checkout/order-received">
<input type="hidden" name="admin_email" value="<?php echo get_option('admin_email'); ?>" />
    <?php if ( sizeof( $woocommerce_checkout->checkout_fields ) > 0 ) : ?>

        <?php do_action( 'woocommerce_checkout_before_customer_details'); ?>

        <div class="col2-set" id="customer_details">

            <div class="col-1">

                <?php do_action('woocommerce_checkout_billing'); ?>

            </div>

            <div class="col-2">

                <?php do_action('woocommerce_checkout_shipping'); ?>

            </div>

        </div>
        <label for="cv_file">העלה קו"ח: </label>
  <input type="file" name="cv_file"> 
        <?php do_action( 'woocommerce_checkout_after_customer_details'); ?>

        <h3 id="order_review_heading"><?php _e('Your order', 'woocommerce'); ?></h3>

    <?php endif; ?>

    <?php do_action('woocommerce_checkout_order_review'); ?>

</form> 
```

更新：我查看了生成的 HTML，发现似乎是确凿的证据：

```
<input type="hidden" name="_wp_http_referer" value="/checkout/" /> 
```

但是这个重定向背后的机制是什么？我该如何绕过它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:43:44.397

您是否尝试过将 $_POST 数据设置为 $_SESSION 数据？$_SESSION 值将被设置，直到您终止会话。

# java - 如何配置 logging.properties 以将内容放入 Java 类（没有包装模式）？

> ID：14964817
> 
> 赞同：3
> 
> 时间：2013-02-19T18:31:13.817
> 
> 标签：java, logging

我的 tomcat/conf 目录中有一个通用的 logging.properties ..

如何修改它以能够处理（使用 java 类）我的应用程序生成的所有日志？

有没有办法在不使用包装器（来自 Log API）类的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:56:07.327

您可以使用[Handler](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/logging/Handler.html)子类来处理正在记录的数据。

然后，您可以通过配置文件或通过`addHandler`Logger 类的方法以编程方式将其添加到您的根记录器。

例如，您可以创建一个 Handler 子类 FoobarHandler ，它在控制台上打印所有记录的数据，前缀为“Foobar”文本：

```
public class MyHandler extends Handler {

    @Override
    public void close() throws SecurityException {
        // housekeeping before handler close
    }

    @Override
    public void flush() {
        // not really needed as data is processed without any sort of buffering
    }

    @Override
    public void publish(LogRecord record) {
        System.out.println("Foobar " + record.getMessage().toUpperCase());
    }

} 
```

`myapp.FoobarHandler`在您的配置文件中，您将 Handler的类名（即）添加到全局处理程序配置中：

```
# Global logging properties.
# ------------------------------------------
# The set of handlers to be loaded upon startup.
# Comma-separated list of class names.
# (? LogManager docs say no comma here, but JDK example has comma.)
handlers=java.util.logging.FileHandler, myapp.FoobarHandler

# Default global logging level.
# Loggers and Handlers may override this level
.level=INFO

# Loggers
# ------------------------------------------
# Loggers are usually attached to packages.
# Here, the level for each package is specified.
# The global level is used by default, so levels
# specified here simply act as an override.
myapp.ui.level=ALL
myapp.business.level=CONFIG
myapp.data.level=SEVERE 
```

# php - 图片文件名错误

> ID：14964818
> 
> 赞同：0
> 
> 时间：2013-02-19T18:31:17.910
> 
> 标签：php

我的目录中有六张图片。他显示了 2 个图像和 1 个文件名。文件名错误，但他在目录中，但他没有显示该图像。你能帮助我吗？我希望他显示 2 个图像 + 2 个正确的文件名。

```
<!DOCTYPE html>
<?php
//path to directory to scan
$directory = "images1/";
//get all image files with a .jpg extension.
$images = glob($directory . "*.jpg");
shuffle($images);
?>
<html>
<meta http-equiv="refresh" content="60" > 
<head>
<title>Image</title>
</head>
<body>
<ul>
<?php
for($i=0;$i<2;$i++)                                              
echo"<img src=\"$images[$i]\"width=\"300\"height=\"400\">"; 
echo basename($images[$i], ".jpg");                                          
?>  
</ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:34:00.230

您的`for`说法不正确，请使用括号：

```
<?php
    for($i=0; $i<2; $i++){
        echo "<img src=\"$images[$i]\" width=\"300\" height=\"400\" />"; 
        echo basename($images[$i], ".jpg");   
    }              
?> 
```

# android - Android：远程服务中的主线程是什么？服务中的网络运营

> ID：14964819
> 
> 赞同：1
> 
> 时间：2013-02-19T18:31:24.630
> 
> 标签：android, service, network-programming

我对android中的服务（远程服务）中的主线程感兴趣。我用 2 个线程实现了服务（一个用于从套接字读取，一个用于从同一个套接字向服务器发送数据）。当我想开始连接时（我只从“读取”线程的内部进行，如果它通过，则设置特殊标志以通知“发送”线程已设置连接）我收到如下错误：

```
02-19 18:12:46.318: E/AndroidRuntime(4945): FATAL EXCEPTION: main
02-19 18:12:46.318: E/AndroidRuntime(4945): android.os.NetworkOnMainThreadException
02-19 18:12:46.318: E/AndroidRuntime(4945):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
02-19 18:12:46.318: E/AndroidRuntime(4945):     at libcore.io.BlockGuardOs.recvfrom(BlockGuardOs.java:163)
02-19 18:12:46.318: E/AndroidRuntime(4945):     at libcore.io.IoBridge.recvfrom(IoBridge.java:513)
02-19 18:12:46.318: E/AndroidRuntime(4945):     at java.net.PlainSocketImpl.read(PlainSocketImpl.java:488)
02-19 18:12:46.318: E/AndroidRuntime(4945):     at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
02-19 18:12:46.318: E/AndroidRuntime(4945):     at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)
02-19 18:12:46.318: E/AndroidRuntime(4945):     at java.io.InputStreamReader.read(InputStreamReader.java:244)
02-19 18:12:46.318: E/AndroidRuntime(4945):     at java.io.BufferedReader.fillBuf(BufferedReader.java:130)
02-19 18:12:46.318: E/AndroidRuntime(4945):     at java.io.BufferedReader.readLine(BufferedReader.java:354)
02-19 18:12:46.318: E/AndroidRuntime(4945):     at com.example.aaa.MyService.try_to_connect_with_server(MyService.java:640)
02-19 18:12:46.318: E/AndroidRuntime(4945):     at com.example.aaa.MyService.URUCHOM_SIEC(MyService.java:510)
02-19 18:12:46.318: E/AndroidRuntime(4945):    at com.example.aaa.MyService$Handler_X.handleMessage(MyService.java:219)
02-19 18:12:46.318: E/AndroidRuntime(4945):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-19 18:12:46.318: E/AndroidRuntime(4945):     at android.os.Looper.loop(Looper.java:137)
02-19 18:12:46.318: E/AndroidRuntime(4945):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-19 18:12:46.318: E/AndroidRuntime(4945):     at java.lang.reflect.Method.invokeNative(Native Method)
02-19 18:12:46.318: E/AndroidRuntime(4945):     at java.lang.reflect.Method.invoke(Method.java:511)
02-19 18:12:46.318: E/AndroidRuntime(4945):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-19 18:12:46.318: E/AndroidRuntime(4945):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-19 18:12:46.318: E/AndroidRuntime(4945):     at dalvik.system.NativeStart.main(Native Method) 
```

在下面这样的代码中（在 in.readline 行中）：

```
 ...
            socket.connect(new InetSocketAddress(ADRES, 6000), 1200);
            if (socket != null) {
                in = new BufferedReader(new InputStreamReader(
                        socket.getInputStream()));
                out = new BufferedWriter(new OutputStreamWriter(
                        socket.getOutputStream()));
                out.write("login_message\n");
                out.flush();
                response = in.readLine(); //<<<===== errors occur here
            ...

                          //setting flags about established connection
                } 
```

我不明白什么是主线程（在这种情况下），为什么有时会出现这些错误？如果我的问题是基本的，我深表歉意，但我无法（我）找到理解答案。我添加了简单而难看的流量控制图（我是业余爱好者）： ![在此处输入图像描述](../Images/11c97529b6f4ed71fa800df09f410429.png)

问候， 阿蒂克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:35:36.130

> 我不明白什么是主线程（在这种情况下）

每个进程都有所谓的主应用程序线程。在具有 UI（活动）的进程中，主应用程序线程驱动 UI。它也是用于生命周期方法（例如，`onStartCommand()`服务）的线程。

在您的情况下，您在主应用程序线程上，因为您`Handler`在服务中使用了名为`com.example.aaa.MyService`. 恕我直言，有`Handler`一个`Service`很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:33:02.077

您无法在主 UI 线程上打开网络连接。您需要转到单独的线程。

# silverlight - Visual Studio 一直要求安装最新的 silverlight 开发人员运行时，当它已经安装时

> ID：14964822
> 
> 赞同：24
> 
> 时间：2013-02-19T18:31:43.883
> 
> 标签：silverlight

我开发了一个 Silverlight 应用程序 (SL4)。该应用程序已经部署（过去 3 个月一直在工作并且仍在 IIS 中工作）。

我无法再打开解决方案了。VS2010不断提示安装最新版Silverlight Developers Runtime！我的工作笔记本电脑上已经安装了所有东西（我在工作笔记本电脑上开发了应用程序并部署了它）。我将相同的解决方案复制到我的家用笔记本电脑（离线，没有互联网连接），解决方案立即在 Visual Studio 2010 中打开，一切工作正常，所以源代码没有任何问题（没有版本冲突，没有其他聪明的猜测在这里）。

是否有任何我不知道的、破坏开发环境的 Visual Studio 或 Silverlight 更新？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2015-05-04T14:11:45.453

我有类似的问题。每次我尝试访问链接并安装东西时，我都会得到相同的结果。但是，我问了同事，他们建议我按以下顺序安装东西：

1.卸载名称为“Silverlight”的所有内容

2.安装“Silverlight_5_Toolkit_December_2011.msi”

3.安装“silverlight_5_sdk.exe”

4.安装“Silverlight5_Tools_SP1.exe”

5.安装“Silverlight_Developer_x64.exe”

我在公司下载了所有这些软件包，因此您需要自己在互联网上找到它们。据我所见，它们都是可用的。唯一的问题是安装方向。这个帮助了我。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-24T04:46:44.970

这是一个烦人的问题。类似于 Quarzy，但我不必卸载 VS 服务包。以下对我有用，我正在运行 Windows 7 Pro x64。

1.  卸载添加/删除程序中的所有“Silverlight...”项目。
2.  安装最新的 Silverlight SDK，现在是[Silverlight 5 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=28359)
3.  安装 Silverlight 开发人员工具，可在此处找到[Silverlight 下载站点](http://msdn.microsoft.com/en-us/silverlight/bb187452.aspx)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-10-07T05:48:04.173

上述所有解决方案都有效。几个月前，当您必须维护那个*古老*的Silverlight 应用程序时，当开发环境设置得很好时，您可能会神秘地遇到问题，这就是您可能神秘地遇到问题的原因。

如果您查看*Internet Explorer中的*[Microsoft Silverlight 发布历史](https://www.microsoft.com/getsilverlight/locale/en-us/html/Microsoft%20Silverlight%20Release%20History.htm)页面（请注意，它在 Chrome 中不起作用 - 看图）。您会看到，尽管 Silverlight 停止使用，Microsoft 一直在修复其中的漏洞。最新的补丁是 2017 年 6 月 13 日。

 *[Silverlight 5 Build 5.1.50907.0 2017 年 6 月 13 日发布](https://www.microsoft.com/getsilverlight/locale/en-us/html/Microsoft%20Silverlight%20Release%20History.htm#SL_5_1_50907)

这很好，但是在您的开发机器上自动安装的补丁是常规的 Silverlight 运行时，而不是 Silverlight*开发者*运行时。

当您尝试安装 Silverlight Developer Runtime 时，它​​将失败，因为您已经安装了 Silverlight Runtime。

卸载 Microsoft Silverlight，然后安装 Developer Runtime，您应该能够再次调试您的 Silverlight 应用程序。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-04-04T16:06:53.860

在“Windows 10”上，您必须将默认浏览器更改为 IE11，否则您在 Visual Studio 中的 LightSwitch 应用程序测试将无法正常工作，并且您会出现“未安装 Silverlight 开发人员运行时”消息。Edge 浏览器不支持 Silverlight。

[Windows 10 系统设置](http://i.stack.imgur.com/AgcUN.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-10-20T15:46:33.940

如果您已经安装了 Silverlight Runtime。

1.  取消选中 silverlight 调试器（属性 -> Web -> 调试器 -> Silverlight）
2.  重建解决方案
3.  检查 Silverlight 调试器并运行解决方案

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-28T23:24:48.270

这刚刚开始发生在我身上（我在 XP 上使用 SL4 和 VS2010 Pro）。我想在这台计算机上测试 Silverlight 5 应用程序，所以我第一次安装了 SL5。下次我尝试在该计算机上打开 SL4 解决方案时，我收到了与您相同的消息，所以也许这就是您的计算机上发生的情况。我几乎按照Quarzy的建议做了，但没有奏效。这个我还没解决。。。

编辑：Quarzy 的解决方案在第二次尝试时对我有用。在删除旧的 Silverlight 东西时要一丝不苟——我错过了 F# Silverlight 位。为了恢复 Silverlight，我使用 了[http://www.microsoft.com/en-us/download/details.aspx?id=18149](http://www.microsoft.com/en-us/download/details.aspx?id=18149)，之后一切正常。

我想补充一点，我通过安装 SL5 插件而不是开发的东西搞砸了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-20T07:43:02.270

这对我来说很奇怪，这个问题应该只发生在 SL5 上。我的建议仍然是：

1.  卸载您拥有的所有“Microsoft Silverlight”
2.  为 VS 安装每个服务包。
3.  直接从 Microsoft 下载中心安装每个 Silverlight 工具（不要相信来自 VS 的直接链接，因为此链接始终适用于 32 位版本，如果使用 64 位版本可能会出现问题）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-07-25T11:26:34.123

也许您需要安装基于 x64 的 SDK。从[这里下载](http://go.microsoft.com/fwlink/?LinkId=229324)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-17T15:46:43.897

我有同样的，但卸载和重新安装没有帮助。注册表中似乎存在错误的安装程序条目。

有帮助的是：

1.  从程序和功能中卸载所有 Silverlight*
2.  运行 Piriform CCleaner 的注册表功能，消除 Silverlight* 安装程序问题。
3.  重新安装 silverlight_sdk
4.  重新安装 Silverlight_Developer_x64

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-05-17T09:13:26.983

您需要重新安装silverlight

卸载“Microsoft Silverlight”
卸载“Microsoft Silverlight 3 SDK”
卸载“Microsoft Silverlight 4 SDK”
卸载“Microsoft Silverlight 5 SDK”

安装最新版本 + SDK*

# java - 从java中的文本文件中读取double

> ID：14964832
> 
> 赞同：0
> 
> 时间：2013-02-19T18:32:24.163
> 
> 标签：java, load, double

有人可以向我解释为什么我在尝试双读的那一行出现错误“InputMismatchException”吗？谢谢！

```
 int num=inFile.nextInt();
        for(int i=0;i<num;i++){
            String inName=inFile.next();
            double inPrice=inFile.nextDouble();           // <<<this line
            Book bookInFile = new Book(inName, inPrice);
            books.add(bookInFile);
        } 
```

文本文件中的数据：

```
4
War and Peace
12.99
Green Eggs and Ham
3.99
Harry Potter
5.99
james
5.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:00:15.497

试试这个方法，它会解决你的问题。

```
double d ;
        BufferedReader reader;
        try{
            reader = new BufferedReader(new FileReader("yourTextFile.txt"));
            String line= reader.readLine();       
            while(line !=null){
                try{
                    System.out.println(Integer.parseInt(line)+" is an Integer.");
                }catch(NumberFormatException e){
                try{
                    d=Double.valueOf(line);
                    System.out.println(d+" is a double.");

                }catch(NumberFormatException ex){
                    System.out.println("Not Double ' "+line+" '");
                }
                }
                line=reader.readLine();
            }

        }catch(Exception ex){
            System.out.println(ex.getMessage());
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:56:20.170

要知道你为什么会得到这个异常，你可以做一些 R & D.Like，使用 next() 而不是 nextDouble() 看看你得到了什么。如果编译器要求双精度，则使用 nextDouble。还有一件事，当接收到的令牌与模式不匹配时会发生此异常。例如，它必须在得到双倍后得到非双倍令牌，可能是下一行或回车

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T20:27:43.723

这里的问题是扫描仪将默认`whitespace`用作分隔符，所以你实际上得到的是：

```
War
and
Peace
12.99
Green
Eggs
and
Ham 
```

当`nextDouble`到达该线时，它显然无法转换`and`为双精度。

将分隔符更改为换行符，您的代码应该可以工作：

```
 Scanner sc = new Scanner(file);
     sc.useDelimiter("\n"); 
```

# java - Java 中的非阻塞 ODBC 调用

> ID：14964833
> 
> 赞同：1
> 
> 时间：2013-02-19T18:32:27.203
> 
> 标签：java, jdbc, java-6

我使用非常标准的 Java ODBC 功能——`Connection`从池中获取一个，创建一个`Statement`并执行它。

我们的用例是一个游戏，记录游戏进度 - ODBC 调用主要是对存储过程的调用，并且在大多数情况下没有返回值。所以 ODBC 调用阻塞的事实很烦人 - 游戏已经是基于回合的，但如果 DB 很慢，用户可以看到更长的暂停。

如果我不需要检查 ODBC 调用的结果，是否有任何内置功能可以异步执行语句？如果不是，那么在不编写大量代码的情况下，有什么好方法可以做到这一点？我仍然需要在 ODBC 异常发生时捕获它们。

这个问题看起来相关，但不完全相同……[异步 jdbc 调用可能吗？](https://stackoverflow.com/questions/4087696/is-asynchronous-jdbc-call-possible)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-23T16:31:56.827

假设您有一个`OdbcCaller`：

```
public class OdbcCaller {

public void callODBC() {
    // call ODBC directly
    // ...
} 
```

您可以将其包装在一个可运行的任务中并将该任务提交到线程池以使其异步执行：

```
public void asyncCallODBC() {
    // wrap the call with a runnable task
    executor.execute(new Runnable() {

        @Override
        public void run() {
            callODBC();
        }
    });
    // the above line would return immediately.
} 
```

是JDK提供的`executor`线程池实现，可以定义如下：

```
Executor executor = new ThreadPoolExecutor(/* core pool size */5,
        /* maximum pool size */10,
        /* keepAliveTime */1,
        /* time unit of keepAliveTime */TimeUnit.MINUTES,
        /* work queue */new ArrayBlockingQueue<Runnable>(10000),
        /* custom thread factory */new ThreadFactory() {
            private AtomicInteger counter = new AtomicInteger(0);

            @Override
            public Thread newThread(Runnable r) {
                Thread t = new Thread(r, "asyncCaller-" + (counter.incrementAndGet()));
                return t;
            }
        },
        /*
         * policy applied when all tasks are occupied and task
         * queue is full.
         */new ThreadPoolExecutor.CallerRunsPolicy()); 
```

它`ThreadPoolExecutor`是高度可配置的，并且在[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)中有很好的记录，您可能需要先阅读它。

以下是根据我的经验对线程池配置的一些建议：

*   正确的线程池大小取决于场景，您可能需要运行一些测试来调整它。
*   当没有可用的工作线程时，工作队列用于缓存任务。无界队列不是一个好主意，因为您可能会耗尽内存。
*   `ThreadFactory`为线程提供一个有意义的名称是一种很好的做法。`jstack`当您需要检查线程状态（使用或其他工具）时，它将非常有用。
*   当没有可用资源时应用拒绝策略。您可以选择一种内置策略（reject、discard、caller-run、discardOldest），或实施您自己的策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:45:38.503

```
public class Snippet
{
    static int i = 0;

    public static void main(String[] args) throws SQLException
    {
        ExecutorService eventExecutor = Executors.newSingleThreadExecutor();
        final Connection c = DriverManager.getConnection("jdbc:url", "user",
                "password");
        Runnable r = new Runnable()
        {

            public void run()
            {
                try
                {
                    CallableStatement s = c
                            .prepareCall("{ call your_procedure(?) }");
                    s.setInt(1, i);
                    s.execute();
                } catch (SQLException e)
                {
                    e.printStackTrace();
                }
            }
        };
        for (; i < 100; i++)
            eventExecutor.submit(r);
    }
} 
```

使用 100 个不同的参数运行对 your_procedure 的调用 100 次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T16:41:52.087

如果您使用的是 EJB 3.1，您可以创建一个`@Stateless`EJB，并标记其中一种方法`@Asynchronous`。这是企业 Java 环境的开箱即用解决方案（*不*建议外部管理`Thread`资源）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-19T18:36:09.727

对此不确定，但也许您可以使用 aynsctask？在不同的线程中处理数据库的东西

# r - 如何使用预测（）

> ID：14964836
> 
> 赞同：4
> 
> 时间：2013-02-19T18:32:28.443
> 
> 标签：r, linear-regression, poisson

想要预测一个值，但这显然不是解决方案。我正在做多项选择测试，而 0.304... 不是答案。如何正确使用 predict()？

```
library(glm2)
data(crabs)
fit= glm(Satellites~Width,data=crabs, family="poisson")
plot(Satellites~Width,data=crabs)
abline(fit)
predict(fit, newdata=data.frame(Width=c(22)))
1 
0.3042347 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T19:01:54.243

默认情况下，泊松回归的函数`predict()`（一般用于 GLM）将计算*线性预测变量 尺度上的值*，即这种情况下的对数尺度（参见帮助文件`predict.glm`）。

```
predict(fit, newdata=data.frame(Width=c(22)))
        1 
0.3042347 
```

要获得*响应变量规模*的预测值，您应该`type="response"`向函数添加参数`predict()`。

```
predict(fit, newdata=data.frame(Width=c(22)),type="response")
       1 
1.355587 
```

# c# - SelectedIndexChanged 需要很多时间

> ID：14964837
> 
> 赞同：1
> 
> 时间：2013-02-19T18:32:28.810
> 
> 标签：c#, asp.net

我已经使用下面的代码来加载和 SelectedIndexChanged 我的下拉列表。当我更改下拉列表的值时，它需要很长时间才能在我的页面标签中显示值。

```
Label1.Text = "Review Number:" + newReview + "(for preparing of Rev." + newRev;

protected void ddlProjectDocument_SelectedIndexChanged(object sender, EventArgs e)
{
    _DataContext = new EDMSDataContext();

    int newRev;
    int newReview;

    var x = ddlProjectDocument.SelectedValue;

    var MaxRev = (from rev in _DataContext.tblTransmittalls
                  where rev.DocID.ToString() == ddlProjectDocument.SelectedValue
                  select  rev.REV).Max();

    if (MaxRev == null)
    {
        newRev = 0;
    }
    else
    {
         newRev = Convert.ToInt32(MaxRev) + 1;
    }

    var MaxReview = (from rev in _DataContext.tblFiles
                     where (rev.DocId.ToString() == ddlProjectDocument.SelectedValue) &&
                           (rev.Rev.ToString() == MaxRev)
                     select rev.Review).Max();

    if (MaxReview == null)
    {
        newReview = 1;
    }
    else
    {
         newReview = Convert.ToInt32(MaxReview) + 1;
    }

    Label1.Text = "Review Number:" + newReview + "(for preparing of Rev." + newRev;       
}

protected void ddlProjectDocument_Load(object sender, EventArgs e)
{
    var query = from p in _DataContext.tblDocuments
                orderby p.DocumentNo
                select p;

    int maxs = 0;

    foreach (tblDocument v in query)
    {
        if (v.DocumentNo.Length > maxs)
            maxs = v.DocumentNo.Length;
    }

    foreach (tblDocument vv in query)
    {
        string doctitle = vv.DocumentNo;

        for (int i = vv.DocumentNo.Length; i < maxs ; i++)
        {
             doctitle += "&nbsp;";
        }

        doctitle += "&nbsp;|&nbsp;";
        doctitle += vv.TITLE;

        // Use HtmlDecode to correctly show the spaces
        doctitle = HttpUtility.HtmlDecode(doctitle);
        ddlProjectDocument.Items.Add(new ListItem(doctitle, vv.DocId.ToString()));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:54:10.723

试试下面的代码。我已经对其进行了重构，使其看起来更紧凑，并`.ToString()`从 LINQ 查询中删除了 ，避免拉下不需要的数据：

```
protected void ddlProjectDocument_SelectedIndexChanged(object sender, EventArgs e)
{
    using(_DataContext = new EDMSDataContext())
    {
        int x = Convert.ToInt32(ddlProjectDocument.SelectedValue);

        var MaxRev = _DataContext.tblTransmittalls.Where(rev => rev.DocID == x).Max(rev => rev.REV);     
        int newRev = (MaxRev == null) ? 0 : Convert.ToInt32(MaxRev) + 1;   

        var MaxReview = _DataContext.tblFiles.Where(rev => rev.DocId == x && rev.Rev == MaxRev).Max(rev => rev.Review);               
        int newReview = (MaxReview == null) ? newReview = 1 : Convert.ToInt32(MaxReview) + 1;    

        Label1.Text = "Review Number:" + newReview + "(for preparing of Rev." + newRev;       
    }
} 
```

我已将您的查询更改为 lambda 格式并处理了 DataContext。

# asp.net-mvc - kendo ui mvc网格编辑器模板问题

> ID：14964838
> 
> 赞同：1
> 
> 时间：2013-02-19T18:32:28.897
> 
> 标签：asp.net-mvc, user-interface, grid, kendo-ui

我正在尝试做的事情：

1.  我在页面的前半部分有一个带有诸如 DatePicker(s)、Dropdownlist(s)、NumericTextBox(s) 等 Kendo UI 控件的表单

2.  后半部分有一个 Kendo UI MVC Grid 控件

    *   这个 Kendo UI Grid 控件有 8 列，其中 2 列有一个 Kendo 下拉列表（EditorTemplate）和 CheckBox（EditorTemplate）。
    *   Kendo UI Grid 控件是 Ajax 绑定。
3.  单击保存按钮时，来自 Kendo UI 控件（前半部分）和 Kendo UI 网格控件（后半部分）的所有值一起作为 Json 对象通过“Ajax Post”发布到控制器。

4.  我正在为上述过程使用模型绑定

我面临的问题或问题：

带有其他 Kendo UI 控件的表单的前半部分正在正确地将它们的值发布到控制器，但是由于 Kendo UI Grid 在发布某些列值时遇到了一些问题

*   Kendo UI Grid 中数据类型为小数的列未发布值

*   EditorTemplate 控件（如 CheckBox 和 kendo 下拉菜单）在选中时显示`"[Object Object]"`下拉列表的值和布尔值的实际值，而不是复选框控件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T03:51:55.523

我怀疑您是否希望将网格作为表单的一部分。通常，网格通过 ajax 进行交互，而不是通过与其他控件一起提交的批处理表单 - 从表单中解开它。仅此一项可能会让您头疼。

上半场：

尝试使用 Kendo().DatePickerFor()、Kendo().DropDownListFor() 等。您不需要通过 .Name() 显式命名这些 Kendo 控件。这将帮助您进行模型绑定。

下半场：

使用十进制以外的其他数据类型。你觉得这很难吗？尝试使用 TimeSpan 类型来表示没有附加日期的时间（成年男子会哭）。

通常，您不需要用于布尔值/复选框的 EditorTemplate。只需使用这个技巧（假设您使用的是 Razor，因为您没有留下任何代码）。

```
columns.Bound(b => b.IsActive).ClientTemplate("<input type='checkbox' ${ IsActive == true ? checked='checked' : ''} disabled />"); 
```

Grid DDL 的最佳选择是

```
columns.ForeignKey(b => b.CustodianIdPrimary, Model.Custodians, "Id", "FullName").EditorViewData(new {ProjectId = Model.ProjectId}).EditorTemplateName("CustodianDropDownList"); 
```

其中 Model.Custodians 是所有可能项目的列表。然后，您可以将 EditorTemplate 绑定到此列表，或者如果您需要此特定 DDL 中的子集，则进行 ajax 调用以填充，如下所示

```
@model int
@(Html.Kendo().DropDownList()
    .Name(ViewData.TemplateInfo.GetFullHtmlFieldName(""))
    .DataValueField("Id")
    .DataTextField("FullName")
    .OptionLabel("Unassigned")
    .DataSource(dataSource => dataSource
        .Read(read => read.Action("ReadProjectCustodiansDdl", "SysMaint", new {projectId = ViewData["ProjectId"]}))
    )
) 
```

但这里是剑道提供的例子

```
@model object       
@(
    Html.Kendo().DropDownListFor(m => m)        
        .BindTo((SelectList)ViewData[ViewData.TemplateInfo.GetFullHtmlFieldName("") + "_Data"])
) 
```

请注意在我的初始 columns.ForeignKey 中使用 EditorViewData 参数，在此示例中用于传递整个列表。

祝你好运！

# c# - 导航浏览器转到

> ID：14964841
> 
> 赞同：0
> 
> 时间：2013-02-19T18:32:44.917
> 
> 标签：c#, watin

您好，我正在使用 watin 并尝试打开 url，但出现以下异常：

> 在 WatiN.Core.IE.CreateNewIEAndGoToUri(Uri uri, IDialogHandler loginDialogHandler, Boolean createInNewProcess) 在 WatiN.Core.IE..ctor() 在 WatinTesting.Program.Main(String[] args) 在 c:\users\admin\文档\视觉工作室 2010\Projects\WatinTesting\WatinTesting\Program.cs:line 20

早期的代码工作正常。请让我知道出了什么问题：如果请让我知道我可以用于相同使用类型的替代代码：浏览器

C#代码如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using WatiN.Core;
using WatiN.Core.Native.InternetExplorer;
using System.Threading;

namespace WatinTesting
{
    class Program
    {

        [STAThread]
        static void Main(string[] args)
        {
            try
            {               

                IE browser = new IE();
                    browser.GoTo("http://google.com");
                    browser.TextField(Find.ByName("q")).TypeText("WatiN");
                    browser.Button(Find.ByValue("Google Search")).Click();

            }
            catch (Exception e)
            {
                Console.WriteLine(e.StackTrace);
                Thread.Sleep(10000);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:44:17.100

请添加缺失的数据，例如 watin 版本，以及是否已创建浏览器实例（IE 实例）。

也许这将有助于尝试使用以下参数创建 IE 实例：

```
IE ie = new IE("http://www.google.com", true); //first param is url and the second is new process 
```

# jquery - jsTree排序功能慢得离谱

> ID：14964844
> 
> 赞同：6
> 
> 时间：2013-02-19T18:33:02.077
> 
> 标签：jquery, jstree

我正在为 Delicious 书签编写 Chrome 扩展程序。我的 background.js 文件在浏览器打开时获取书签，并创建 jsTree 构建适当树所需的对象。

如果我禁用 jsTree 的排序插件，当我单击弹出窗口时，书签会立即出现。如果我启用排序功能，点击和显示数据之间会有约 2 秒的延迟。

我尝试在后台脚本中对我的所有数据进行预排序并将其传递给预排序的弹出窗口，但 jsTree 不支持这些排序数据。

我只有~90 个标签和~400 个书签。有没有我可以用来加快速度的配置选项？这是我的 jsTree 的样子。

```
$('#jstree').jstree({
    'close_all': -1,
    'core': {
        'animation': 0
    },
        'json_data': {
        'async': true,
        'data': data
    },

    'progressive_render': true,
    'themes': {
        'theme': 'classic',
        'dots': false,
        'icons': true
    },

    'sort': function (a, b) {
        return this.get_text(a) > this.get_text(b) ? 1 : -1; 
    },

    'types': {
        'valid_children': [ 'folder' ],
        'types': {
            'folder': {
                'valid_children': [ 'file' ],
                'max_depth': 1
            },
        }
    },

    'plugins': [
        'json_data',
        'themes',
        'sort',
        'types',
    ]
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-08T07:04:39.453

jsTree 使用本机数组`sort`方法，因此唯一可以改进的是对 的调用`get_text`，但我怀疑这会变得更快。

如果您对数据进行了预排序 - 只需从`plugins`配置数组中删除排序插件即可。排序插件无法“知道”数据已经排序，只需删除插件即可。

# c# - 如何从带有特殊字符的 schema.ini 构建 DataTable 架构

> ID：14964847
> 
> 赞同：0
> 
> 时间：2013-02-19T18:33:12.077
> 
> 标签：c#, csv

我正在尝试将 schema.ini 文件（由 csv 导出创建）转换为 c# 中的类型化数据表。我无法从文件中获取表名。schema.ini 如下所示：

```
[MyTableÄ.csv]
ColNameHeader=True
CharacterSet=1201
Format=CSVDelimited
CurrencyThousandSymbol=,
DecimalSymbol=.
Col1="Id" Integer
Col2="Subscriber Equipment" Char ... 
```

但是，当我使用以下代码段读取我得到的部分名称`MyTableÃ„.csv`而不是`MyTableÄ.csv`.

```
public string[] SectionNames()
        {
        uint MAX_BUFFER = 32767;
        IntPtr pReturnedString = Marshal.AllocCoTaskMem((int)MAX_BUFFER);
        uint bytesReturned = GetPrivateProfileSectionNames(pReturnedString, MAX_BUFFER, path);
        if (bytesReturned == 0)
        {
            Marshal.FreeCoTaskMem(pReturnedString);
            return null;
        }
        string local = Marshal.PtrToStringAnsi(pReturnedString, (int) bytesReturned);
        Marshal.FreeCoTaskMem(pReturnedString);
        //use of Substring below removes terminating null for split
        return local.Substring(0, local.Length - 1).Split('\0');
    } 
```

我已经尝试了字符集：`20127, ANSI, 65001, Unicode, and 1201`无济于事。想法？解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:07:57.580

1) 使用 Unicode 保存文件。

2）以替代方式导入`GetPrivateProfileSectionNames`以满足您的要求。

```
[DllImport("kernel32.dll", EntryPoint="GetPrivateProfileSectionNamesW", CharSet=CharSet.Unicode)]
static extern uint GetPrivateProfileSectionNames(IntPtr lpszReturnBuffer, uint nSize, string lpFileName); 
```

3) 将调用更改`PtrToStringAnsi`为`PtrToStringUni`。

这些步骤实现了你想要的，整个代码是

```
[DllImport("kernel32.dll", EntryPoint="GetPrivateProfileSectionNamesW", CharSet=CharSet.Unicode)]
static extern uint GetPrivateProfileSectionNames(IntPtr lpszReturnBuffer, uint nSize, string lpFileName);

public string[] SectionNames() {
    uint MAX_BUFFER=32767;
    IntPtr pReturnedString=Marshal.AllocCoTaskMem((int)MAX_BUFFER);
    uint bytesReturned=GetPrivateProfileSectionNames(pReturnedString, MAX_BUFFER, path);
    if(bytesReturned==0) {
        Marshal.FreeCoTaskMem(pReturnedString);
        return null;
    }
    string local=Marshal.PtrToStringUni(pReturnedString, (int)bytesReturned);
    Marshal.FreeCoTaskMem(pReturnedString);
    //use of Substring below removes terminating null for split
    return local.Substring(0, local.Length-1).Split('\0');
} 
```

顺便说一句，您的代码出现在 MSDN 论坛上[[此处]。](http://social.msdn.microsoft.com/Forums/nl/netfxbcl/thread/c4168505-ab40-477c-84ad-3e06b4e18438)

# database - 如何使用 Play 2.0 和 SecureSocial 保持用户注册

> ID：14964850
> 
> 赞同：4
> 
> 时间：2013-02-19T18:33:25.223
> 
> 标签：database, playframework, securesocial

我正在使用带有**SecureSocial**的 Play 2.0.4 。我想使用**UsernamePasswordProvider**将用户注册持久化到**数据库**中。

我对 Java 和 Play 框架比较陌生，所以我不确定如何完成这项工作。我已经创建了一个名为“用户”的简单模型，但不知道如何从这里走得更远。

我希望有人可以帮助我，我相信这已经完成了。首先十分感谢！

```
@Entity
public class User extends Model {
  //
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-03T10:01:13.373

假设您已将 Play2.0 配置为使用 SecureSocial，您可以从这个问题开始：[Play SecureSocial Persistance with Java](https://stackoverflow.com/questions/16093023/play-securesocial-persistance-with-java) 我已经设法通过一些小的更正使其工作：

您需要用户的一些本地表示来负责将用户信息存储到持久层。我使用了 Ebean 和一个简单的 LocalBean。这样的事情会做到这一点：

```
package models;

import java.util.List;
import javax.persistence.Entity;
import javax.persistence.Id;
import play.db.ebean.Model;
import play.data.validation.*;
import play.data.format.*;

@Entity
public class LocalUser extends Model {

    @Id
    public String id;
    public String name;
    public String email;
    public String password;
    public String provider;
        public String firstName;
        public String lastName;

        public static Finder<String, LocalUser> find = new Finder<String, LocalUser (String.class,LocalUser.class);

/**
 * Retrieve a User using an email.
 */
    public static LocalUser findByEmail(String email) {
        return find.where().eq("email", email).findUnique();
    }
} 
```

对于我的 Token 类，我使用了与上述问题中提出的相同的类：

```
package models;

import java.util.Date;
import javax.persistence.Entity;
import javax.persistence.Id;
import play.db.ebean.Model;

@Entity
public class LocalToken extends Model {

    private static final long serialVersionUID = 1L;

    @Id
    public String uuid;
    public String email;
    public Date createdAt;
    public Date expireAt;
    public boolean isSignUp;
    public static Finder<String, LocalToken> find = new Finder<String, LocalToken>(
        String.class, LocalToken.class
    );
} 
```

对于 UserService，我必须对上述问题进行一些小的更正，以使其适用于 SecureSocial 的较新版本，其中 user().id 属性已替换为 identityId()：

```
package services;

import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.List;

import org.joda.time.DateTime;

import models.LocalToken;
import models.LocalUser;
import play.Application;
import play.Logger;
import scala.Option;
import scala.Some;
import securesocial.core.AuthenticationMethod;
import securesocial.core.Identity;
import securesocial.core.PasswordInfo;
import securesocial.core.SocialUser;
import securesocial.core.IdentityId;
import securesocial.core.java.BaseUserService;
import securesocial.core.java.Token;

public class SqlUserService extends BaseUserService {

    public SqlUserService(Application application) {
        super(application);
    }

    @Override
    public void doDeleteExpiredTokens() {
        if (Logger.isDebugEnabled()) {
            Logger.debug("deleteExpiredTokens...");
        }
        List<LocalToken> list = LocalToken.find.where().lt("expireAt", new DateTime().toString()).findList();
        for(LocalToken localToken : list) {
            localToken.delete();
        }
    }

    @Override
    public void doDeleteToken(String uuid) {
        if (Logger.isDebugEnabled()) {
            Logger.debug("deleteToken...");
            Logger.debug(String.format("uuid = %s", uuid));
        }
        LocalToken localToken = LocalToken.find.byId(uuid);
        if(localToken != null) {
            localToken.delete();
        }
    }

    @Override
    //public Identity doFind(UserId userId) {
    public Identity doFind(IdentityId identityId){
        if (Logger.isDebugEnabled()) {
            Logger.debug(String.format("finding by Id = %s", identityId.userId()));

        }
        LocalUser localUser = LocalUser.findByEmail(identityId.userId());
        if(localUser == null) return null;
        SocialUser socialUser = new SocialUser(new IdentityId(localUser.id, localUser.provider),    
            localUser.firstName, 
            localUser.lastName, 
            String.format("%s %s", localUser.firstName, localUser.lastName),
            Option.apply(localUser.email), 
            null, 
            new AuthenticationMethod("userPassword"),
            null, 
            null, 
            Some.apply(new PasswordInfo("bcrypt", localUser.password, null))
        );  
        if (Logger.isDebugEnabled()) {
            Logger.debug(String.format("socialUser = %s", socialUser));
        }
        return socialUser;
    }

    @Override
    public Identity doFindByEmailAndProvider(String email, String providerId) {
        List<LocalUser> list = LocalUser.find.where().eq("email", email).eq("provider", providerId).findList();
        if(list.size() != 1){
            Logger.debug("found a null in findByEmailAndProvider...");
            return null;
        }
        LocalUser localUser = list.get(0);
        SocialUser socialUser = 
                new SocialUser(new IdentityId(localUser.email, localUser.provider),
                        localUser.firstName, 
                        localUser.lastName, 
                        String.format("%s %s", localUser.firstName, localUser.lastName),
                        Option.apply(localUser.email), 
                        null, 
                        new AuthenticationMethod("userPassword"),
                        null, 
                        null, 
                        Some.apply(new PasswordInfo("bcrypt", localUser.password, null))
                   );  
        return socialUser;
    }

    @Override
    public Token doFindToken(String token) {
        if (Logger.isDebugEnabled()) {
            Logger.debug("findToken...");
            Logger.debug(String.format("token = %s", token));
        }
        LocalToken localToken = LocalToken.find.byId(token);
        if(localToken == null) return null;
        Token result = new Token();
        result.uuid = localToken.uuid;
        result.creationTime = new DateTime(localToken.createdAt);
        result.email = localToken.email;
        result.expirationTime = new DateTime(localToken.expireAt);
        result.isSignUp = localToken.isSignUp;
        if (Logger.isDebugEnabled()) {
            Logger.debug(String.format("foundToken = %s", result));
        }
        return result;
    }

    @Override
    public Identity doSave(Identity user) {
        if (Logger.isDebugEnabled()) {
            Logger.debug("save...");
            Logger.debug(String.format("user = %s", user));
        }
        LocalUser localUser = null;
        //localUser = LocalUser.find.byId(user.id().id());
        localUser = LocalUser.find.byId(user.identityId().userId());

        if (localUser == null) {
            Logger.debug("adding new...");
            localUser = new LocalUser();
            //here was localUser.id = user.id().id();
            localUser.id = user.identityId().userId();
            localUser.provider = user.identityId().providerId();
            localUser.firstName = user.firstName();
            localUser.lastName = user.lastName();
            localUser.email = user.email().get();
            localUser.password = user.passwordInfo().get().password();
            localUser.save();
        } else {
            Logger.debug("existing one...");
            localUser.id = user.identityId().userId();
            localUser.provider = user.identityId().providerId();
            localUser.firstName = user.firstName();
            localUser.lastName = user.lastName();
            localUser.email = user.email().get();
            localUser.password = user.passwordInfo().get().password();
            localUser.update();
        }
        return user;
    }

    @Override
    public void doSave(Token token) {
        LocalToken localToken = new LocalToken();
        localToken.uuid = token.uuid;
        localToken.email = token.email;
        try {
            SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
            localToken.createdAt = df.parse(token.creationTime.toString("yyyy-MM-dd HH:mm:ss"));
            localToken.expireAt = df.parse(token.expirationTime.toString("yyyy-MM-dd HH:mm:ss"));
        } catch (ParseException e) {
            Logger.error("SqlUserService.doSave(): ", e);
        }
        localToken.isSignUp = token.isSignUp;
        localToken.save();
    }
} 
```

就是这样。请注意，密码是使用 Bcrypt 哈希存储的，因此您需要对密码进行哈希处理才能使其工作。获得散列通行证的最简单方法是使用 SecureSocial 提供的注册过程。

希望这可以帮助。

L.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:01:07.287

您需要实现 UserService 的子类并在 play.plugins 文件中注册该插件，以便 SecureSocial 获取它。从您的 UserService 实现中，您将使用您的模型类来保存/查找信息。

有一个带有示例 UserService 的拉取请求（尽管在 Scala 中），您可以将其用作指南：[https](https://github.com/jaliss/securesocial/pull/163) ://github.com/jaliss/securesocial/pull/163 。

您还可以使用示例中的 InMemoryUserService 作为起点，并将其使用的哈希映射替换为对模型对象的调用以持久/检索事物。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T17:57:10.677

在上面的拉取请求中，[AuthenticatorStore](https://github.com/akinsella/securesocial/blob/master/module-code/app/securesocial/core/support.pgsql/PgSqlAuthenticatorStore.scala)文件的用途是什么？

# java - 使用（java编程）在hadoop中找到最大的整数值

> ID：14964853
> 
> 赞同：0
> 
> 时间：2013-02-19T18:33:33.637
> 
> 标签：java, hadoop, mapreduce

我最近开始在hadoop工作，我刚刚学习了一些关于它的基本理论知识。我正在尝试解决应在文本文件中给出输入的任务，例如 input.txt (1 10 37 5 4 98 100 等)

我需要在给定的输入中找到最大的整数（即整数类型）。我正在尝试传递数组列表中的输入，以便我可以将第一个整数与所有整数的其余部分进行比较（使用 for 循环）。

1）是否有可能以这种方式找到解决方案？如果是，我无法在 hadoop 中创建数组列表，需要一些提示:-)

2）我们可以只打印“键”而不是键值对吗？如果是这样，请帮助我。我试图在 reduce 函数中编写代码以不打印它，但我遇到了一些错误。

请指导我一些提示，我可以通过这些提示继续前进。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:00:44.107

在您的映射步骤中，您可以将所有数字映射到一个键。然后在你的减少步骤中，你可以取最大值。reduce 步骤将传递给定键的可迭代值集合——无需创建自己的 ArrayList。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T22:08:27.850

为此，您最好有一个减速器。

为了确保所有数字都到达同一个减速器，你必须做两件事：

1.  为映射器中的所有输入值发出相同的键
2.  将减少任务设置为零。

您`map()`的方法可能如下所示：

```
@Override
public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {
          context.write(new Text("MyAwesomeKey"), key); // assuming that your number is being read in the key
           } 
```

在您的`Reduce`班级中，有一个 property `max`，例如： `Long max`

该`reduce()`方法可能如下所示：

```
@Override
public void reduce(Text key, Iterable<LongWritable> values, Context context) throws IOException, InterruptedException {
          context.write(new Text("MyAwesomeKey"), key); // assuming that your number is being read in the key
           } 
```

然后在`run()`我们覆盖时也覆盖`reduce()`：

```
 public void run(Context context) throws IOException, InterruptedException {
    setup(context);
    while (context.nextKey()) {
      reduce(context.getCurrentKey(), context.getValues(), context);
    }
    context.write(new LongWritable(max),new Text("")); // write the max value
    cleanup(context);
  } 
```

要将reduce任务设置为一个，请在您的工作中执行以下操作`run()`，请注意这与上述不同`run()`：

```
job.setNumReduceTasks(1); 
```

**注意：**以上所有代码都遵循新的*mapreduce* API，我相信使用旧的*mapred* API 在 reducer 完成工作后，我们将无法拥有单点钩子，因为我们可以通过覆盖`run()`Reducer 来做到这一点。

# php - 使用 MySQL 和 PHP 的用户定义排序

> ID：14964857
> 
> 赞同：4
> 
> 时间：2013-02-19T18:33:52.603
> 
> 标签：php, mysql

这更像是一个方法论问题。说我有一张桌子

```
id int auto_increment primary key,
name text not null 
```

我有一些我想以某种任意方式订购的条目。我可以创建一个界面，允许我更改名称的顺序，就像它们出现在某些页面上一样。当我读出表格的条目时，它们将根据我的选择进行排序。我看到了三种可能的方法。第一种方法是添加一个字段

```
order int not null 
```

当我更改订单时，我将不得不更新每一行，或者至少每一行的排序高于我正在更改的最低订单。这似乎是错误的方法，因为它需要在 for 循环中执行 SQL 语句。第二种方法是创建另一个表，通过 id 链接

```
id int not null
order int not null 
```

但我会在这里遇到同样的问题。如果我添加了一个名称并想将它们放在首位，我将不得不更改每一行中的订单条目。我可以看到第三种可能的方法，即将 id 和 order 之间的一些关联存储在单个列中，甚至存储在平面文件中。我可以看到使用 JSON 格式来执行此操作。

我的问题是这个。使用 MySQL 和 PHP 执行此操作的最佳方法是什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T18:44:47.493

是的，`sorting`列工作正常。为此，您不需要 for 循环。

在执行插入时，首先增加其他排序值。

```
UPDATE foo
  SET sorting = sorting + 1
  WHERE sorting >= :sorting;

INSERT INTO foo
  SET name = :name, sorting = :sorting; 
```

## [看它工作](http://sqlfiddle.com/#!2/edfb9/1)

更新`sorting`时将特定记录的列设置为新索引，并`sorting`为其他记录增加/减少列以形成有效序列。

```
SELECT @old_sorting:=sorting FROM foo WHERE id = :id;
UPDATE foo
  SET sorting = IF(id = :id, :sorting, sorting + IF(@old_sorting > :sorting, 1, -1))
  WHERE sorting BETWEEN LEAST(@old_sorting, :sorting) AND GREATEST(@old_sorting, :sorting); 
```

## [看它工作](http://sqlfiddle.com/#!2/5ea86/2)

*和`:id`的值应该由你的 mysql 库插入`:name``:sorting`*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:40:03.447

您可以使用“重量”int，因为 Order 是保留字。至于避免不断更新，您必须编写一些逻辑来防止错误，但如果您将默认权重增量保留为 1 以外的值，您可以将内容放在其他项目之间。

IE：

id 重量项目

1 1 东西

2 10 其他

在两者之间添加一些东西：

id 重量项目

1 1 东西

3 5 someOtherThing

2 10 其他

当然，第二个表或更简单的结构更不容易出错。

# java - 将 JSON 字符串映射到没有嵌套实体的实体

> ID：14964860
> 
> 赞同：0
> 
> 时间：2013-02-19T18:34:13.333
> 
> 标签：java, json, spring-mvc

我正在使用 Spring MVC 3，我需要将 JSON 字符串映射到实体中。Json 字符串只包含嵌套实体的键引用：

我收到一个 JSON 字符串，如：

```
{"entities":
    [{
    "entityName":"User",
    "values":
    [
    {"name":"Mario","lastname":"Rossi","id_type":"1"},
    {"name":"Giuseppe","lastname":"Verdi","id_type":"1"}
    ]
    }]
} 
```

我有 2 个 java 实体：

```
User{
   String name,
   String lastname,
   UserType userType
} 
```

和

```
UserType {
   int id,
   String description
} 
```

我想使用 JSON 信息创建我的用户实体。用户类没有“id_type”参数，因此 ObjectMapper 无法将 JSON 字符串放入用户实体中。

我可以接收不同类型的实体，所以我以这种方式使用反射：

```
//READ JSON
GenericEntity entities[]=request.getEntities();
String entityName = entities[0].getEntityName();
Object rows[] = entities[0].getValues();
//MAP
Class clazz  = Class.forName(entityName);
ObjectMapper mapper = new ObjectMapper();
dbEntity = mapper.convertValue(rows[0], clazz);
//SAVE TO DB
service.save(dbEntity); 
```

我想我必须使用 CustomObjectMapper 但我不知道如何

我也有相反的问题：我得到用户类的“用户”，我必须用“id_type”创建 JSON 字符串

有人可以帮助我吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:44:33.757

您可以尝试使用 DTO 对象。例如：

```
@RequestMapping(value={"/v1/foos"}, method = RequestMethod.POST, consumes="application/json")
public void createFoo(@RequestBody FooDTO requestDTO) throws Exception {
    ...
} 
```

但无论如何都需要转换。

# ios - Facebook iOS应用授权产生黑屏

> ID：14964863
> 
> 赞同：2
> 
> 时间：2013-02-19T18:34:15.800
> 
> 标签：ios, facebook, single-sign-on

我已使用图表成功授权 Facebook 访问，如果用户安装了 Facebook 应用程序，我希望提供单点登录。
当我尝试这样做时，我启动了 Facebook 应用程序，但得到一个带有取消按钮的空白屏幕。这是我使用的网址：

fbauth://authorize?type=user_agent&display=touch&redirect_uri=fbconnect%3A%2F%2Fsuccess&sdk=ios&scope=read_friendlists%2Cfriends_website%2Cuser_website%2Cuser_relationships%2Cpublish_stream%2Cfriends_birthday%2Cfriends_interests%2Cfriends_work_history%2Cfriends_groups%2Cuser_photos%2Cfriends_photos%2Cphoto_upload%2Cread_stream%2Cstatus_update&client_id= xxxxxxxxxxx

任何帮助，将不胜感激。

# java - android ndk java.lang.UnsatisfiedLinkError: nativeStart

> ID：14964866
> 
> 赞同：1
> 
> 时间：2013-02-19T18:34:29.410
> 
> 标签：java, android, android-ndk, java-native-interface

为了播放 AAC 文件，我设置了 NDK 并下载了[http://code.google.com/p/aacplayer-android/](http://code.google.com/p/aacplayer-android/)代码

我下载的那个来源

```
 svn checkout http://aacplayer-android.googlecode.com/svn/trunk/ aacplayer-android-read-only 
```

之后我从以下代码下载了播放器

[http://aacplayer-android.googlecode.com/files/aacplayer-android-r25.zip](http://aacplayer-android.googlecode.com/files/aacplayer-android-r25.zip)

现在我必须在我的项目中使用该代码，所以我创建了新的 JNI 文件夹并复制所有代码 .c 和 .h 文件...下面是一张图片

![在此处输入图像描述](../Images/f4d88c9217c81875f38b08fa073de01d.png)

然后我运行了 ndk-build 命令并生成了如下所示的 .so 文件

![在此处输入图像描述](../Images/ddaf51a700a588c884d5300797f5d73e.png)

现在您可以看到 libs 文件夹中的这两个文件夹和 .so 文件已创建，如下所示

![在此处输入图像描述](../Images/63dce49ce5a239164110879061ee96c3.png)

现在，当我使用以下代码构建和运行应用程序时，一切正常，库正在加载，没有任何 java.lang.UnsatisfiedLinkError: nativeStart 错误

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list);

    System.loadLibrary("aacarray"); 
    System.loadLibrary("mms"); 
```

但是当我开始播放流式 AAC 文件时，会生成以下错误

```
 02-19 23:13:47.090: W/dalvikvm(847): No implementation found for native Lcom/example/xmlparsingex/ArrayDecoder;.nativeStart (ILcom/example/xmlparsingex/ArrayBufferReader;Lcom/example/xmlparsingex/Decoder$Info;)I
      02-19 23:13:47.100: W/dalvikvm(847): threadid=11: thread exiting with uncaught exception (group=0x40015560)
      02-19 23:13:47.100: E/AndroidRuntime(847): FATAL EXCEPTION: Thread-12
      02-19 23:13:47.100: E/AndroidRuntime(847): java.lang.UnsatisfiedLinkError: nativeStart
      02-19 23:13:47.100: E/AndroidRuntime(847):    at com.example.xmlparsingex.ArrayDecoder.nativeStart(Native Method)
      02-19 23:13:47.100: E/AndroidRuntime(847):    at com.example.xmlparsingex.ArrayDecoder.start(ArrayDecoder.java:100)
     02-19 23:13:47.100: E/AndroidRuntime(847):     at com.example.xmlparsingex.ArrayAACPlayer.playImpl(ArrayAACPlayer.java:114)
     02-19 23:13:47.100: E/AndroidRuntime(847):     at com.example.xmlparsingex.AACPlayer.play(AACPlayer.java:273)
     02-19 23:13:47.100: E/AndroidRuntime(847):     at com.example.xmlparsingex.AACPlayer.play(AACPlayer.java:242)
     02-19 23:13:47.100: E/AndroidRuntime(847):     at com.example.xmlparsingex.AACPlayer$1.run(AACPlayer.java:202)
     02-19 23:13:47.100: E/AndroidRuntime(847):     at java.lang.Thread.run(Thread.java:1019) 
```

请注意，我已经发布了这个具有相同错误[java.lang.UnsatisfiedLinkError: nativeStart android NDK](https://stackoverflow.com/questions/14954692/java-lang-unsatisfiedlinkerror-nativestart-android-ndk)的问题，但这个问题与此不同，所以请不要投反对票:(

我已经尝试了很多来解决这个问题，但无法成功请任何人都可以帮助我......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T09:51:59.663

您从原始包中获取 aacplayer 类`com.spoledge.aacplayer`并将它们放入您自己的包`com.example.xmlparsingex`中（可能起源于一些 Android 示例）。**你不能那样做**。纯 Java 类将继续存在（由 Eclipse 重构支持），但具有本机方法的类不会。本机方法绑定到本机库中的特定函数名称。如果原生库**libaacarray.so**导出一个函数`Java_com_spoledge_aacplayer_ArrayDecoder_nativeStart`，那么对应的 java 类一定是`com.spoledge.aacplayer.ArrayDecoder`，没有办法绕过。除非您也想调整和重新编译本机库。

# ruby-on-rails-3 - resque 调度程序新贵

> ID：14964867
> 
> 赞同：0
> 
> 时间：2013-02-19T18:34:31.353
> 
> 标签：ruby-on-rails-3, resque, upstart

我正在尝试使用 resque 调度程序，但我找不到监控进程的好方法。我想要的是在任何部署后终止调度程序作业并`upstart`重新启动它。我写了一个 capistrano 脚本来杀死 resque-scheduler

```
 task :stop_scheduler => :environment do
      pidfile = Rails.root + "tmp/pids/resque_scheduler.pid"
      if File.exists?(pidfile)
        pid = File.read(pidfile).to_i
        syscmd = "kill -s QUIT #{pid}"
        puts "Running syscmd: #{syscmd}"
        system(syscmd)
        FileUtils.rm_f(pidfile)
      else
        puts "****WARNING**** Scheduler pid file has not been found. Was scheduler running??"
     end
   end 
```

此时暴发户将重新启动它。我的问题可能与暴发户conf有关。我需要 Schduler 在 tmp/pids/resque_scheduler.pid 中写入 PID，以便能够在下次重新启动时将其杀死。

这是我的新贵 conf 重要部分：

```
respawn
respawn limit 99 5
console none

script
su -c "source 'cd /myapp/; RAILS_ENV={env} bundle exec rake resque:scheduler BACKGROUND=yes    PIDFILE=./tmp/pids/resque_scheduler.pid >> ~/resque_workers.log 2>&1" my_user
end script 
```

使用这种配置，我的效果是调度程序再次分叉，而我在 pidfile 上写的 pid 不正确。我以一个不断重生的过程结束，我不能再杀了。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T00:28:08.853

这是旧的，但你检查过： http: [//upstart.ubuntu.com/cookbook/#expect](http://upstart.ubuntu.com/cookbook/#expect)

基本上，您需要告诉 upstart 分叉多少次 - 在您的情况下，我相信您会添加`expect fork`到您的 upstart 配置文件中，因为 su -c 将分叉一次（`expect daemon`如果您的脚本分叉两次，您将使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T19:17:30.007

我有同样的问题，我发现我必须删除 Background=yes 标志。

我通过查看我的叉数来确定这一点，叉数超过 2 并且还在不断增长。有关如何执行此操作的信息，请参阅[http://upstart.ubuntu.com/cookbook/#how-to-establish-fork-count 。](http://upstart.ubuntu.com/cookbook/#how-to-establish-fork-count)

我删除了 Background=yes 作为测试并且它有效。我认为这是因为 upstart 会自动在后台启动任务，不仅不需要指示它在后台运行，而且会导致 upstart 感到困惑并不断产生新进程。

一旦我删除了 BACKGROUND=yes，上面提到的“如何建立分叉计数”的结果是 2，这意味着它是一个守护进程，因此你需要在你的 upstart 脚本中使用它：

期待守护进程

# wpf - 避免 ControlTemplate 样式继承

> ID：14964868
> 
> 赞同：0
> 
> 时间：2013-02-19T18:34:37.160
> 
> 标签：wpf, xaml, templates, tabcontrol, controltemplate

我们使用[本文](http://www.codeproject.com/Articles/155211/Building-a-control-template-style-for-the-tabContr)中描述的方法来设置“主菜单式”TabControl 的样式。不幸的是，`style`模板的一部分也适用于 TabItem 内的任何其他 TabControl。我们想尽量避免每个子 TabControl 的显式默认样式。我希望有类似的东西：

```
<TabControl Name="tabControl" Template="{StaticResource OfficeTabControl, inheritStyleToChildElements=false}"> 
```

（请注意**inheritStyleToChildElements=false**）

如何防止主 TabControl 内其他 TabControls 的样式？

任何帮助和提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:55:21.147

这篇文章我没有看完，但我可以提出两点建议：

1.  你不能给样式起个名字，然后只在你想要的地方引用它的名字吗
2.  你想要像选项卡控件一样的办公室，据我所知 Office 2010 没有选项卡控件，它有一个功能区，为此你可以使用Codeplex 上的[Fluent Ribbon 库](http://fluent.codeplex.com/)

# mysql - 用户、游戏、历史关系的数据库模式

> ID：14964872
> 
> 赞同：0
> 
> 时间：2013-02-19T18:34:47.817
> 
> 标签：mysql, database-design

我正在尝试确定我的数据库的最佳组织。我有一个 users 表，其中每个人的`current_game`. （每个用户在任何给定时间只能属于一个游戏。）有一个游戏表，其中每个特定游戏都有一个唯一的 ID。

我可以通过这种方式很好地执行我的所有查询/操作。但是，我想维护每个用户之前游戏的记录，以便他们可以访问他们的历史数据和统计数据。

由于游戏只能持续这么长时间——比如说几周——而且并非所有用户都会一直积极参与游戏，所以这是我正在考虑的模式：

`users`, `users_inactive`, `games`, `games_old`, `game_events`,`game_events_old`

我的担忧是 2：首先，两个用户表是否会在登录和注册时出现问题？其次，我是否必须`membership`为每个用户-游戏关系维护一个包含一行的两列表（所以 8 个用户每个都参加过 5 个过去的游戏意味着表中有 40 行`membership`），还是有更简单、更优雅的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:42:32.133

我的建议是引入一个布尔列来指示实体是否处于活动状态。

例如，代替“games”和“games_old”表，我会在“games”表中使用game_active（布尔列）并消除“games_old”表。在业务逻辑中，您必须将新游戏标记为活动，将旧游戏标记为非活动。

同样的逻辑也适用于其他表。

约束看起来像，

```
PRIMARY KEY (`user_id`, `game_id`),
INDEX `idx_user_id` (`user_id`),
INDEX `idx_game_id` (`game_id`),
CONSTRAINT `fk_users_user_game` FOREIGN KEY (`user_id`) REFERENCES `users` (`user_id`) ON UPDATE NO ACTION ON DELETE NO ACTION,
CONSTRAINT `fk_games_user_game` FOREIGN KEY (`game_id`) REFERENCES `games` (`game_id`) ON UPDATE NO ACTION ON DELETE NO ACTION 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:52:24.513

我将从表中删除该`current_game`列`users`并添加一个新表，该表将用户与游戏以及开始和结束时间戳连接起来。类似于以下内容：

```
CREATE TABLE user_games (
    user_id INT,
    game_id INT,
    start TIMESTAMP NOT NULL,
    end TIMESTAMP
); 
```

对于当前游戏，您将设置`end`为 NULL。当用户切换到不同的游戏时，更新`end`并为新游戏添加新行。

为了查询当前游戏，只需在条件`end`为 NULL 的情况下加入表。要查询历史游戏，只需确保时间戳在`start`和之间`end`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-19T18:45:10.020

也许是一张`GameHistory`桌子

```
UserId | GameId 

1      | 563 
```

我想开始和结束日期将存储在 Games 表中。您仍然可以将当前游戏 ID 存储在用户表中，或者在 GameHistory 表中创建一个位字段，该字段将被称为当前游戏。

# bash - bash/awk/sed/.. 连接共享条目的行，反之亦然

> ID：14964875
> 
> 赞同：1
> 
> 时间：2013-02-19T18:34:59.380
> 
> 标签：bash, awk, concatenation

我想知道如何为在第 1 列中共享相同条目的行连接文件的行（具有多列和多行，>100mb 文件）。以及如何取消连接以这种方式连接的文件。

例子：

来自文件.txt：

```
a 3494 3929 asd 12 fdfdf
b 2323 2390 kjk 32 kjkjk
b 1323 2390 kjk 32 kjkjk
c 2399 9009 dfd 90 sasd
c 9090 1212 jkk 01 kjkk
c 0900 2311 gfg 09 dkjs
d 0909 2322 kjk 98 dskk
d 0909 0903 kjk 98 dskk
d 0909 2422 fdd 98 cvcv 
```

to, concatenatedfile.txt

```
a 3494 3929 asd 12 fdfdf
b 2323 2390 kjk 32 kjkjk b 1323 2390 kjk 32 kjkjk
c 2399 9009 dfd 90 sasd c 9090 1212 jkk 01 kjkk c 0900 2311 gfg 09 dkjs
d 0909 2322 kjk 98 dskk d 0909 0903 kjk 98 dskk d 0909 2422 fdd 98 cvcv 
```

反之亦然，所以：从 concatenatedfile.txt -> file.txt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T21:20:28.640

如果字段 1 是连续顺序的，则没有数组的替代方法，请尝试：

```
awk 'END{print RS} p!=$1{if(p)print RS; p=$1}1' ORS= file 
```

对于反向尝试类似：

```
awk '{for(i=2; i<=NF; i+=1) if( $i==$1 ) $i=RS $i}1' file 
```

但是，如果其他字段中的一个可能与重建记录的第一个字段具有相同的值，那么这将失败，在这种情况下，您将需要额外的检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T22:17:58.017

Deconcatenating is fairly simple in `awk`:

```
awk 'NF % 6 != 0 { print "Garbage: ", $0 }
     NF % 6 == 0 { for (i = 1; i < NF; i += 6)
                   {
                       pad = ""
                       for (j = i; j < i+6; j++)
                       {
                           printf "%s%s", pad, $j
                           pad = " "
                       }
                       print ""
                   }
                 }' 
```

And here's my concatenation solution. It assumes that the values in column 1 are grouped together. It won't actually care if they aren't grouped; it will just generate extra lines that it would not have done had the data been grouped.

```
awk 'NF % 6 != 0 { printf "\nGarbage: %s\n", $0 }
     NF % 6 == 0 { if ($1 != old && NR > 1) print ""
                   if ($1 != old) printf "%s", $0
                   else           printf " %s", $0
                   old = $1
                 }
     END         { print "" }' 
```

You can leave out the garbage handling if you like — silently ignoring data that doesn't match.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T18:40:04.943

尝试这样做（需要 > 100MO RAM）：

```
awk '
    {for (i=2; i<=NF; i++) arr[$1]=arr[$1]" "$i}
    END{for (a in arr) print a, arr[a]}
' file.txt 
```

## 输出

```
a  3494 3929 asd 12 fdfdf
b  2323 2390 kjk 32 kjkjk 1323 2390 kjk 32 kjkjk
c  2399 9009 dfd 90 sasd 9090 1212 jkk 01 kjkk 0900 2311 gfg 09 dkjs
d  0909 2322 kjk 98 dskk 0909 0903 kjk 98 dskk 0909 2422 fdd 98 cvcv 
```

# wpf - 只读 XAML 属性

> ID：14964887
> 
> 赞同：0
> 
> 时间：2013-02-19T18:35:55.453
> 
> 标签：wpf, xaml, dependency-properties

我有一个名为 GridContainer 的 UserControl，并在 XAML 中声明了一个 DataGrid 控件。在窗口中使用时，我希望能够从 XAML 访问此 DataGrid：

```
<local:GridContainer>
   <local:GridContainer.MyDataGrid>
       .
       .
       .
   <local:GridContainer.MyDataGrid>
</local:GridContainer> 
```

如何声明一个依赖属性来访问我的 UserControl 中的嵌套 DataGrid？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:49:46.320

好吧，我不知道你到底是什么问题，但我会建议一个解决方案。为什么你不能去文件后面的 UserControl 代码并把正常的依赖属性定义放在那里。visual studio 有一个片段可以在该领域为您提供很多帮助。

# android - 带有 setOnClickPendingIntent 的 Android 自定义通知不适用于低于 3.0 的版本。有没有办法让它工作？

> ID：14964892
> 
> 赞同：2
> 
> 时间：2013-02-19T18:36:17.413
> 
> 标签：android, notifications, android-pendingintent, android-2.2-froyo

我正在使用通知，但我无法使用适用于 Froyo（或低于 3.0 的其他 android 版本）的自定义布局创建通知，就像它适用于 ICS 一样。

问题是我想将待处理的意图与任何单个视图相关联。

在我看来，有一个解决方法，因为应用程序通知切换可以做到这一点，但我不知道怎么做。

请帮我。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:38:53.667

> 我正在使用通知，但我无法使用适用于 Froyo（或低于 3.0 的其他 android 版本）的自定义布局创建通知，就像它适用于 ICS 一样。

您可以在以前的版本上创建自定义布局，但您无法可靠地响应它们的点击事件。

> 问题是我想将待处理的意图与任何单个视图相关联。

在 Android 4.1 中添加丰富的通知之前，不支持此功能。由于制造商的修改，它可能适用于某些设备，但不适用于所有设备。

> 在我看来，有一个解决方法，因为应用程序通知切换可以做到这一点，但我不知道如何

“通知切换”是设备固件（操作系统或制造商修改）的一部分，而不是 SDK 应用程序的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:53:03.093

对于 3.0 以下的 Android，Notification Toggles 使用了一种完全不同的触发方式。我也必须自己解决问题。

他们的方式（我也使用过）是创建一个不可见的 1x1 像素系统窗口，该窗口拦截所有点击，包括窗口外的点击，获取它们的 X 坐标，然后不变地传递点击事件：

```
public boolean onTouch(View v, MotionEvent event) {
    x = event.getRawX();
    return false;
} 
```

然后，当某些点击触发您的 ContentIntent（并且您知道该点击的 X 坐标）时，您会计算要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:28:54.103

GingerBread 需要一个 ContentIntent。所以我添加了一个虚拟的待处理意图，例如：

```
 pi = PendingIntent.getBroadcast(this, 0, new Intent(), PendingIntent.FLAG_UPDATE_CURRENT);
        Notification notification =  new NotificationCompat.Builder(this).setAutoCancel(true)
                                        .setContentTitle(userString)
                                        .setContentText("Queued")
                                        .setContentIntent(pi)
                                        .setSmallIcon(R.drawable.stat_sys_download_done)
                                        .setWhen(System.currentTimeMillis())
                                        .setTicker(tickerText)
                                        .build(); 
```

# asp.net-mvc - 果园和新闻/公告

> ID：14964893
> 
> 赞同：2
> 
> 时间：2013-02-19T18:36:22.093
> 
> 标签：asp.net-mvc, orchardcms

Orchard 中是否有可用于新闻和公告管理的模块？似乎是一个很常见的事情，但一直找不到任何关于它的东西。

我想把它放在我的起始页上，以提供最新消息的提示（这些项目本身将存储在 sql server compact 上）。这将在一个类似表的结构中。

*登录用户也应该能够发布新闻。*

任何关于方法的建议或我应该为此阅读哪些文件将不胜感激，因此我不会浪费时间使用错误的方法或不利用 Orchard 提供的东西。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:39:34.327

你不需要一个模块。我将创建一个名为“news”的新内容类型，并附有标题和正文部分。然后您可以添加小部件作为其原型，然后它将在小部件列表中可用。然后您可以创建这种类型的新小部件。然后您可以将此小部件放入“主页”层规则中。

# asp.net - ASP.Net WebMethod 失败，因为 ko.toJSON() 为 DateTime.MinValue 产生不同的结果

> ID：14964894
> 
> 赞同：0
> 
> 时间：2013-02-19T18:36:28.693
> 
> 标签：asp.net, json, internet-explorer, knockout.js, webmethod

由于日期格式，当我调用我的 WebMethod 时出现错误。我有一个日期等于 DateTime.MinValue。

打电话...

```
ko.toJSON({ employee: viewModel.employee });

[WebMethod]
public static string SaveEmployee(Employee employee)
{

} 
```

我得到以下结果...

```
Chrome (works):
"terminationDate":"0001-01-01T06:00:00.000Z"

IE8 (does not work):
"terminationDate":"1-01-01T06:00:00Z" 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:41:19.333

我通过在我的 JSON 中填充日期来修复它：

```
var postData = JSON.parse(JSON.stringify(ko.toJSON(viewModel)).replace(/\"1-01-01/g, "\"0001-01-01")); 
```

# android - Eclipse string.xml 在编辑器中没有正确的颜色编码

> ID：14964897
> 
> 赞同：1
> 
> 时间：2013-02-19T18:36:54.357
> 
> 标签：android, eclipse

这让我发疯了。我的 strings.xml 文件不是 Eclipse 中的颜色编码。它以这种方式开始，我拥有的其他项目很好，但不是这个。即使我删除它并创建一个新的。

我附上了屏幕截图。我也试图逐行重新插入每个项目，但我很难过。

![在此处输入图像描述](../Images/952c3484c594616955847033c9203be4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:50:24.780

右键单击该文件，选择“打开方式”菜单并确保您正在使用 XML 编辑器查看该文件。

# windows-7 - SharePoint 2010 - 添加可视 Web 部件错误：沙盒代码引发了未处理的异常

> ID：14964901
> 
> 赞同：0
> 
> 时间：2013-02-19T18:36:59.813
> 
> 标签：windows-7, sharepoint-2010, visual-studio-2012

我的 Windows 7 笔记本电脑上安装了**SharePoint 2010 。**我使用**Visual Studio 2012*创建了一个简单的 hello world** **Visual Web 部件**，其中已经包含 Visual Web 部件到沙盒解决方案。这篇文章准确地描述了我所做的： [http ://expectedexception.wordpress.com/2012/02/23/visual-studio-11-visual-web-part-in-sandboxed-solution/](http://expectedexception.wordpress.com/2012/02/23/visual-studio-11-visual-web-part-in-sandboxed-solution/)

 **我能够将 Web 部件部署到本地 SharePoint 2010 但是，当我尝试将 Web 部件添加到 SharePoint 页面时，它会出错：

**部分信任应用程序域中的沙盒代码包装器的 Execute 方法引发了未处理的异常：$Resources:core,ImportErrorMessage;**

您对如何解决此问题有任何想法吗？我怀疑这是某种权限/配置问题，但我没有东西可以尝试。我现在唯一知道要做的就是再次卸载并安装 Share Point 2010（我已将一些 SharePoint 站点从本地系统更改为网络服务以使事情正常运行），但这可能会导致其他问题。**

# svn - Nautilus 中的 Rabbitvsc git 和 svn

> ID：14964903
> 
> 赞同：3
> 
> 时间：2013-02-19T15:27:23.227
> 
> 标签：svn, git, ubuntu-12.10, nautilus

我是 Linux 新手，我有 ubuntu 12.10。我已经安装了 Rabbitvsc 0.15.2。

我们的项目中有 .git 和 .svn。我们在本地使用 git，在客户端使用 svn。这在 Windows 上效果很好，我们使用 Tortoise SVN 来实现 svn，并在命令提示符下使用 git。

在 Ubuntu 12.10 上，我的问题是：在 Nautilus 中，如果我在项目文件夹中同时拥有 .git 和 .svn，则上下文菜单仅显示 RabbitVcs GIT 选项，并且我无法选择 SVN。

我主要从终端使用 git，但我想将 gui 用于 svn。

# dojo - Worklight 5.0.5 插件中的 Dojo 调色板是否存在拖放问题？

> ID：14964906
> 
> 赞同：0
> 
> 时间：2013-02-19T18:37:20.117
> 
> 标签：dojo, ibm-mobilefirst

Dojo 小部件拖放在 Eclipse Indigo 上安装的 Worklight 5.0.5 中不起作用。
是版本不匹配还是我们需要遵循任何其他步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:16:32.067

当 Firefox (FF) 呈现设计窗口（拖动目标）时，我在 Eclipse Juno、Worklight 5.0.6、Dojo 1.8.3-20130207-IBM 上遇到了类似的问题。当我选择 IE 或 Safari (S) 时，我能够从 Dojo Mobile Widgets Palette 拖放到设计窗口。不确定这是否是您的问题。

# c++ - 如何将派生类的shared_ptrs向量转换为基类的share_ptrs向量

> ID：14964909
> 
> 赞同：11
> 
> 时间：2013-02-19T18:37:27.880
> 
> 标签：c++, stl

```
class Interface
{
};

class Class : public Interface
{
};

class Foo
{
public:
    std::vector<std::shared_ptr<Interface>>& GetInterfaces()
    {
        return *(std::vector<std::shared_ptr<Interface>>*)(&m_data);
        //return m_data;
    }

private:
    std::vector<std::shared_ptr<Class>> m_data;
}; 
```

这有效，但丑陋和可怕。**有更好/更安全的方法吗？**我不想使用`m_data`类型`std::vector<std::shared_ptr<Interface>>`，因为该模块`Foo`属于完全与`Class`'s 一起工作，`Interface`（和`Foo::GetInterfaces()`）被实现为与只应该知道`Interface`功能的单独模块交互。

如果这里有任何不清楚的地方，请告诉我，这对我来说很有意义，但我一直在努力解决这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T18:41:44.707

铸造不正确，它们是不同的类型；我很确定您正在调用未定义的行为。

您需要构造一个新向量并按值返回它。

```
std::vector<std::shared_ptr<Interface>> b (m_data.begin(), m_data.end());
return b; 
```

这应该仍然相当便宜（1 个分配）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T18:43:33.450

除了这在 的实现中是不可能的之外`vector`，问题还在于引用不转换。您的代码更糟糕，并且是未定义的行为。

您可以做的是提供一个接口来公开范围或`begin/end`代替容器本身。如果将其与进行`transform_iterator`转换的 a 结合使用，则应该进行设置。

示例代码：

```
class Interface {
  virtual ~Interface();
};

class X : public Interface {};

class C {

private:
  typedef std::shared_ptr<Interface> iptr_type;
  typedef std::shared_ptr<Class> ptr_type;
  std::vector<ptr_type> v_;

  struct F {
    iptr_type 
    operator()(ptr_type p) { return iptr_type(p); }
  };

  typedef boost::transform_iterator<
    F, std::vector<ptr_type>::iterator> iiterator;

public:
  iiterator
  begin()
  { 
    return boost::make_transform_iterator(
      begin(v_), F()); 
  }

  iiterator
  end()
  { 
    return boost::make_transform_iterator(
      end(v_), F());
  }
}; 
```

# mysql - IF(a.testcol IS NULL,'',a.testcol) IS NOT NULL 不起作用

> ID：14964921
> 
> 赞同：2
> 
> 时间：2013-02-19T18:38:09.633
> 
> 标签：mysql

这是 MySQL (5.1.41-community) 中的错误吗？

```
CREATE TEMPORARY TABLE zztest (stuff varchar(20) NULL)

INSERT INTO zztest
SELECT
    'test'
FROM (
    select '1' as testcol
    union
    select null
) a
WHERE **IF(a.testcol IS NULL,'',a.testcol)** IS NOT NULL 
```

这是一个简化的查询。** 之间的 IF 表达式应该是粗体的。它来自动态查询，其中 IF 表达式被无辜地放入查询中。

选择本身就有效。当与插​​入语句结合使用时，它不起作用。内部选择旨在显示创建的临时表在被检查的列中可以有空值。

通过用 IFNULL(a.testtool, '') 替换 IF 来“修复”该问题

其他一些替换也失败了（而选择本身起作用）：

```
1  IF (a.testcol, '', a.testcol)
2  IF (a.testcol, '', '')
3  IF ('', '', '') 
```

这个错误是否存在于其他版本的 MySQL 中？

编辑——选择查询的结果：

消息：错误代码：1292。截断不正确的整数值：''

它应该有的结果是将两个“测试”字符串输入到 zztest 表中。

编辑——大约 2 小时后我又试了一次。最后两个语句“有效”（记住将它们插入上面的查询中......）。第一个替换语句失败。然后数字 2 和 3 再次失败。

所以看起来语句 1 是罪魁祸首（原来的，它现在出错了..）.. 并且可能存在某种不良状态，其中产生相同中间结果的语句也失败了。

那么接下来的问题是——有没有办法确保查询被重置？

就在我尝试在新连接中执行查询之后，工作台崩溃了..相关吗？

编辑——发现显式演员表有效：

```
IF (a.testcol, cast('' as char), cast('' as char)) 
```

所以我找到了解决方法。问题是——为什么''（引号内有任何内容）会被解释为整数？我什至通过连接''将它解释为DOUBLE。

为什么它有时会起作用，而其他时候却不起作用？<--这部分最烂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:46:29.563

This:

```
IF(a.testcol IS NULL,'',a.testcol) 
```

never become null, and your condition:

```
WHERE IF(a.testcol IS NULL,'',a.testcol) IS NOT NULL 
```

will return always all rows.

* * *

When testcol is null you assigning empty string to it: `''`

**Empty string is diffrent from `NULL` and this is not a bug**.

You should use something like this:

```
SELECT testcol FROM
(
    SELECT '1' AS testcol
    UNION
    SELECT null
) a

WHERE IF(a.testcol IS NULL, NULL ,a.testcol) IS NOT NULL 
```

or:

```
SELECT testcol FROM
(
    SELECT '1' AS testcol
    UNION
    SELECT null
) a

WHERE ISNULL(a.testcol) = true 
```

`ISNULL` just returns "true" when argument is null.

# css - CSS DIV 高度背景图像重叠

> ID：14964924
> 
> 赞同：0
> 
> 时间：2013-02-19T18:38:20.300
> 
> 标签：css, html, overlapping

我有这两个带有背景图像的 DIV 标签。

```
<div class="content_bg">
    <div id="content">
        <div id="contentLeft">   
        </div>
        <div id="contentRight">            
        </div>
    </div>
</div>
<div class="footer_bg">
    <div id="footer">
        <div id="footerLeft">            
        </div>
        <div id="footerRight">           
        </div>
    </div>
</div> 
```

**如果我手动设置content**的高度，一切看起来都很好，但如果我将其设置为 100% 或 Auto，**footer_bg 会**重叠在**content_bg**之上。有人可以建议吗？

```
/*
====================================================================
Content Area
====================================================================
*/

.content_bg
{
    background:#dadad9 url(images/interior_content_bg_top.jpg) repeat-x center top;

}

#content
{
    width:980px;
    margin:auto;
    height:auto;   
    background:white;     

}

#contentLeft
{
    float:left;
    width:209px; 
    margin-top:50px;   
}

#contentRight
{
    float:right;
    width:770px;     
    font-family: Verdana, Arial, Sans-Serif;
    font-size: 11px;
    line-height:17px;
    border-left:1px solid;
    margin:20px 0 0 0;
}

/*
====================================================================
Footer
====================================================================
*/

.footer_bg
{
    background:#dadad9 url(images/interior_footer_bg.jpg) repeat-x center top;

}

#footer 
{
    width:980px;
    height:258px;
    margin:auto;
    background:#dadad9 url(images/interior_footer.jpg) no-repeat center top;
}
#footerLeft
{
    width:400px;
    height:50px;   
    font-family:Verdana, Arial, sans-serif;
    font-size:11px;    
    line-height:25px;
    float:left;
    padding: 20px 0 0 25px;
    color:#fff;
}

#footerRight
{
    width:100px;
    height:50px;       
    float:right;
    padding: 20px 0 0 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:44:25.860

您应该为您的内容接受它的所有父母（包括正文和 html）设置高度 100%。或者只是为内容设置 {min-height: Npx}。您的问题是#content 不知道需要什么高度）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:53:42.873

请参阅小提琴的代码和演示：http: [//jsfiddle.net/4Ly7E/1/](http://jsfiddle.net/4Ly7E/1/)

演示：http: [//jsfiddle.net/4Ly7E/1/embedded/result](http://jsfiddle.net/4Ly7E/1/embedded/result)

**注意：**由于我没有背景图片，所以我只是假设内容和页脚的边界是边界。

```
.content_bg
{
    background:#dadad9 url(images/interior_content_bg_top.jpg) repeat-x center top;
    border:1px solid red; /* for visiblity */
    overflow:hidden;

}

.footer_bg
{
    background:#dadad9 url(images/interior_footer_bg.jpg) repeat-x center top;
    border:1px solid teal; /* for visiblity */
    clear:both;
} 
```

# php - 使用 Facebook 服务器端登录登录用户不起作用

> ID：14964925
> 
> 赞同：2
> 
> 时间：2013-02-19T18:38:22.603
> 
> 标签：php, facebook, facebook-graph-api

我正在尝试 facebooks 服务器端登录（使用 PHP），除了显示我的名字之外，一切似乎都正常。所以，我一直在关注这个指南：[https](https://developers.facebook.com/docs/howtos/login/server-side-login/) ://developers.facebook.com/docs/howtos/login/server-side-login/一切都和那里写的一样。我已经检查并删除了所有内容两次以确保它是正确的。因此，当我登录我的网站时，有时会收到“状态不匹配。您可能是 CSRF 的受害者。”，但我总是收到 Hello。就在你好之后是我的名字应该在的地方，但事实并非如此。所以很明显登录和授权部分有效，但它不会显示我的名字。你们中的任何人都知道可能出了什么问题吗？

这是我的代码：

```
<?php 

$app_id = "MY_APP_ID";
$app_secret = "MY_APP_SECRET";
$my_url = "MY_URL";

session_start();

$code = $_REQUEST["code"];

if(empty($code)) {
    $_SESSION['state'] = md5(uniqid(rand(), TRUE)); // CSRF protection
    $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
        . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
        . $_SESSION['state'] . "&scope=user_birthday,read_stream";

    echo("<script> top.location.href='" . $dialog_url . "'</script>");
}

if($_SESSION['state'] && ($_SESSION['state'] === $_REQUEST['state'])) {
    $token_url = "https://graph.facebook.com/oauth/access_token?"
        . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
        . "&client_secret=" . $app_secret . "&code=" . $code;

    $response = file_get_contents($token_url);
    $params = null;
    parse_str($response, $params);

    $_SESSION['access_token'] = $params['access_token'];

    $graph_url = "https://graph.facebook.com/me?access_token=" 
        . $params['access_token'];

    $user = json_decode(file_get_contents($graph_url));
    echo("Hello " . $user->name);
}
else {
    echo("The state does not match. You may be a victim of CSRF.");
}

?>
<!DOCTYPE html>
<html>
<head>
   <title>Personal testing site</title>
</head>
<body>
  <p>This is a personal testing site, and is not related to *mysite* or any of their upcoming functions/ products. </p>
</body>
</html> 
```

**编辑1：**

我想我可能已经发现了错误在哪里，但我仍然不知道如何解决它。因此，当我在编写代码并尝试回显代码的特定部分时，我发现 access_token 是空的。因此， $token_url 有效（我认为），但是当我尝试回显 $response 或 $_SESSION['access_token'] 时，它们都是空白的。当我尝试回显 $graph_url 时，我得到“ [https://graph.facebook.com/me?access_token=](https://graph.facebook.com/me?access_token=) ”，token= 后面没有任何内容，access_token 应该被连接起来。我不知道是连接问题还是访问令牌为空，但我认为这是最后一个问题。我一次又一次地检查我的代码，而且'

觉得你们能找到什么吗？

**编辑2：**

当我回显 $token_url 并将其输入我的网络浏览器时，我收到以下错误消息：

```
{
  "error": {
    "message": "Error validating verification code. Please make sure your redirect_uri is identical to the one you used in the OAuth dialog request",
    "type": "OAuthException",
    "code": 100
  }
} 
```

你们是否认为这与facebook使用https运行但我的网站只使用http这一事实有关？

**编辑 3：**

这是我的应用设置的图片：*Deleted_Picture*

**编辑4：**

好的，所以我已经修好了。问题是应用程序设置中的 url 必须有最后一个 / ，并且我的代码中的 $my_url 必须完全等于那个。

但是，我又遇到了一个问题。看起来像 Æ Ø Å 这样的字母在某个地方被扭曲了，而 Ø（我的姓）变成了 (Ã¸)（没有括号）。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:34:55.477

您的应用设置似乎有问题。只需在“带有 FB 登录网址的网站 - 网站网址”字段中输入您的网站网址 - [http://testing123.feedlobby.com/](http://testing123.feedlobby.com/)。将“应用程序域”字段留空。我建议创建一个新应用程序并以这种方式进行设置，然后使用您的新应用程序 ID 和密码。

此外，尝试将 echo 语句包含在 html 正文中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:51:52.063

您是否检查过您的应用程序设置和注册这可能是问题之一。![在此处输入图像描述](../Images/b2383e3adce16d7c08db1d260431e102.png)

# javascript - 通过 JQuery 提交表单后缺少查询字符串参数

> ID：14964927
> 
> 赞同：0
> 
> 时间：2013-02-19T18:38:29.343
> 
> 标签：javascript, jquery

我想在所选值更改时提交表单，并添加查询字符串参数。只能提交，但参数丢失。比如提交的时候，我想把表单提交到这个url：

[http://www.example.com/myblog?year=2012](http://www.example.com/myblog?year=2012)

但是下面的url实际上是提交的，缺少参数：

[http://www.example.com/myblog](http://www.example.com/myblog)

如果我更改为提交到 google.com，它会起作用。

任何的想法？

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#newsArchiveDropDown').change(function () {
            var selectValue = $(this).val();
            var form = $('#newsArchiveForm');
            form.attr('action', form.attr('action') + '?year=' + selectValue);                 
            form.submit();
        });
    });
</script>

<form id="newsArchiveForm" method="GET" action="http://www.a.com/myblog" novalidate="novalidate">
    <select id="newsArchiveDropDown" name="">
        <option value="2012" class="">2012</option>                                          
        <option value="2011" class="">2011</option>
    </select>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:51:39.357

只需`name`在您的选择元素上将属性设置为“年份”即可产生预期的结果。jQuery 也变得更加简单。

```
$(document).ready(function () {
    $('#newsArchiveDropDown').change(function () {
        $('#newsArchiveForm').submit();
    });
}); 
```

```
<form id="newsArchiveForm" method="GET" action="http://www.a.com/myblog" novalidate="novalidate">
    <select id="newsArchiveDropDown" name="year">
            <option value="2012" class="">2012</option>
            <option value="2011" class="">2011</option>
    </select>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-09T19:59:26.590

如果未选择任何选项，则可能会出现此问题。确保在继续之前先选择一个选项。

# excel - "End if without block if error" on my updated code

> ID：14964928
> 
> 赞同：1
> 
> 时间：2013-02-19T18:38:32.697
> 
> 标签：excel, vba

I had this piece of code working fine:

its purpose is to output a new row with a data validation list in column B.

```
Sub RICH()

   Dim ws As Worksheet
   Dim fnd As Range
   Dim fndstr As String

ActiveSheet.Unprotect

   fndstr = "Targeted Premium Ads"
   Set ws = Worksheets("Inputsheet")

        Set fnd = ws.Columns(2).Find(What:=fndstr, After:=ws.Range("B11"), _
        LookIn:=xlValues, LookAt:=xlPart, SearchOrder:=xlByColumns, _
        SearchDirection:=xlNext, MatchCase:=False)

        If Not fnd Is Nothing Then

            Rows(fnd.Row - 1).Select
            Selection.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
            Range("B" & fnd.Row - 2).Select
            With Selection.Validation
                .Delete
                .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
                xlBetween, Formula1:="=USD"
                .IgnoreBlank = True
                .InCellDropdown = True
                .InputTitle = ""
                .ErrorTitle = ""
                .InputMessage = ""
                .ErrorMessage = ""
                .ShowInput = True
                .ShowError = True

            End With
        End If
End Sub 
```

However I then tired to add a data validation for column A cell of that new row, but i get the "block if error" :(

```
Sub RICH()

   Dim ws As Worksheet
   Dim fnd As Range
   Dim fndstr As String

ActiveSheet.Unprotect

   fndstr = "Targeted Premium Ads"
   Set ws = Worksheets("Inputsheet")

        Set fnd = ws.Columns(2).Find(What:=fndstr, After:=ws.Range("B11"), _
        LookIn:=xlValues, LookAt:=xlPart, SearchOrder:=xlByColumns, _
        SearchDirection:=xlNext, MatchCase:=False)

        If Not fnd Is Nothing Then

            Rows(fnd.Row - 1).Select
            Selection.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
            Range("B" & fnd.Row - 2).Select
            With Selection.Validation
                .Delete
                .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
                xlBetween, Formula1:="=USD"
                .IgnoreBlank = True
                .InCellDropdown = True
                .InputTitle = ""
                .ErrorTitle = ""
                .InputMessage = ""
                .ErrorMessage = ""
                .ShowInput = True
                .ShowError = True

            Range("A" & fnd.Row - 2).Select
            With Selection.Validation
                .Delete
                .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
                xlBetween, Formula1:="=F6:F7"
                .IgnoreBlank = True
                .InCellDropdown = True
                .InputTitle = ""
                .ErrorTitle = ""
                .InputMessage = ""
                .ErrorMessage = ""
                .ShowInput = True
                .ShowError = True

            End With
        End If
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:47:05.903

Either you need to end your first With statement or not start a second with statement:

```
 With Selection.Validation
                .Delete
                .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
                xlBetween, Formula1:="=USD"
                .IgnoreBlank = True
                .InCellDropdown = True
                .InputTitle = ""
                .ErrorTitle = ""
                .InputMessage = ""
                .ErrorMessage = ""
                .ShowInput = True
                .ShowError = True
END WITH

        Range("A" & fnd.Row - 2).Select
        With Selection.Validation
            .Delete
            .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
            xlBetween, Formula1:="=F6:F7"
            .IgnoreBlank = True
            .InCellDropdown = True
            .InputTitle = ""
            .ErrorTitle = ""
            .InputMessage = ""
            .ErrorMessage = ""
            .ShowInput = True
            .ShowError = True

        End With 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:44:56.133

Change the line ... .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _ xlBetween, Formula1:="USD"

Sub RICH()

```
 Dim ws As Worksheet
   Dim fnd As Range
   Dim fndstr As String

ActiveSheet.Unprotect

   fndstr = "Targeted Premium Ads"
   Set ws = Worksheets("Inputsheet")

        Set fnd = ws.Columns(2).Find(What:=fndstr, After:=ws.Range("B11"), _
        LookIn:=xlValues, LookAt:=xlPart, SearchOrder:=xlByColumns, _
        SearchDirection:=xlNext, MatchCase:=False)

        If Not fnd Is Nothing Then

            Rows(fnd.Row - 1).Select
            Selection.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
            Range("B" & fnd.Row - 2).Select
            With Selection.Validation
                .Delete
                .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
                xlBetween, Formula1:="USD"
                .IgnoreBlank = True
                .InCellDropdown = True
                .InputTitle = ""
                .ErrorTitle = ""
                .InputMessage = ""
                .ErrorMessage = ""
                .ShowInput = True
                .ShowError = True

            End With
        End If
End Sub 
```

# drop-down-menu - 导航栏下拉菜单中的引导超链接

> ID：14964929
> 
> 赞同：0
> 
> 时间：2013-02-19T18:38:33.310
> 
> 标签：drop-down-menu, twitter-bootstrap, hyperlink, navbar

导航栏下拉菜单中的超链接似乎不起作用。即使**“禁用”**似乎也不起作用。
这是我的代码

```
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <ul class="nav">
        <li class="dropdown">
          <a class="dropdown-toggle disabled"
           data-toggle="dropdown" href="http://www.google.com"> Link
            <b class="caret"></b> </a>
             <ul class="dropdown-menu">
               <li><a href="#">menu1</a></li>
               <li><a href="#">menu2</a></li></ul>
        </li>
             </ul>
          </div>
         </div>
      </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:33:52.077

单击您已将 Google 设置为链接的链接不会将您带到该链接，因为该链接上的单击操作会打开/关闭下拉菜单。

如果您将链接放在另一个锚标记上，您会发现它们可以正常工作。

# json - 解析中的快速枚举

> ID：14964932
> 
> 赞同：0
> 
> 时间：2013-02-19T18:38:38.547
> 
> 标签：json, parsing, ios6, enumeration

我是 iOS 新手，我正在尝试解析 JSON 数据。枚举内部不会记录任何内容，尽管 vehicleActivity 记录“车辆（空）。我有兴趣记录“LineRef”数据。我假设它在 NSString 中，但我尝试使用 id 对象但仍然没有。

```
NSDictionary *jsonParse = [NSJSONSerialization JSONObjectWithData:webData options:0 error:nil];
NSArray * vehicleActivity = [jsonParse objectForKey:@"VechicleActivity"];
NSLog(@"vehicle %@",vehicleActivity);

for (NSDictionary *dictionary in vehicleActivity ) {
    NSDictionary *monitoredVehJourney = [dictionary objectForKey:@"MonitoredVehicleJourney"];
    NSString *line = [monitoredVehJourney objectForKey:@"LineRef"];
    NSLog(@"Line # %@",line); 
```

这是通过查看器的 JSON

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:45:02.093

> 虽然 vehicleActivity 记录“车辆（空）”

这就是为什么。如果`vehicleActivity`是`NULL`(ie, `nil`)，那么快速枚举甚至不会开始。

此外，您似乎没有阅读该`NSDictionary`课程的文档。它遍历键，而不是值。所以你的 for 循环应该是

```
for (NSString *key in vehicleActivity ) {
    NSDictionary *dictionary = [vehicleActivity objectForKey:key];
    // etc.
} 
```

反而。

此外，我相信您的代码中有关于 key 的错字`VehicleActivity`。你把它写成`VechicleActivity`.

# android - 删除 ActionMode 的“完成”按钮

> ID：14964939
> 
> 赞同：21
> 
> 时间：2013-02-19T18:38:50.393
> 
> 标签：android, android-actionbar, android-actionmode

0我在我的应用程序上使用 startActionMode(ActionMode)。

默认情况下，它会在栏上添加一个“完成”按钮，我想将其删除。

另外，如果有办法改变它的文本，我也想知道，导致与“完成”不同的描述可以使操作与它所做的行为相对应。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-20T11:54:38.820

我同意@CommonsWare 的观点，即隐藏“*完成”*按钮是无效的设计。

但是，有些客户希望删除此按钮，我可以理解复选标记可能会给用户造成混淆，因为在某些情况下它实际上什么都不做。

所以，这里是如何删除带有样式的按钮：

```
<style name="AppTheme" parent="android:Theme.Holo">
    <item name="android:actionModeCloseButtonStyle">@style/NoCloseButton</item>
</style>

<style name="NoCloseButton" parent="@android:style/Widget.ActionButton.CloseMode">
    <item name="android:visibility">gone</item>
</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-25T23:24:22.683

如果您使用的是 ActionBarSherlock，您可以使用以下样式隐藏“完成”按钮：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="NoCloseButton" parent="@style/Widget.Sherlock.ActionButton.CloseMode">
        <item name="android:visibility">gone</item>
    </style>

    <style name="AppBaseTheme" parent="Theme.Sherlock.Light.DarkActionBar">
        <item name="actionModeCloseButtonStyle">@style/NoCloseButton</item>
    </style>

    <!-- Application theme. -->
    <style name="AppTheme" parent="AppBaseTheme">

    </style>
</resources> 
```

请确保将此样式放在每个样式目录中（values、value-v11、values-v14）。之后，您可以使用以下代码创建自定义菜单：

```
LayoutInflater inflater = LayoutInflater.from(getSherlockActivity());
View actionView = inflater.inflate(R.layout.actionmode, null);

ActionMode am = getSherlockActivity().startActionMode(mActionModeCallback);
am.setCustomView(actionView); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-17T10:00:41.947

即使我被困住了，我也找到了解决它的方法。

```
int doneButtonId = Resources.getSystem().getIdentifier("action_mode_close_button", "id", "android");
LinearLayout layout = (LinearLayout) findViewById(doneButtonId);
TextView doneview = (TextView) layout.getChildAt(1);
doneview.setText(""); 
```

希望这可以帮助！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-13T11:04:53.707

感[谢马蒂亚斯强盗](https://stackoverflow.com/users/1018177/matthias-robbers)，它的工作原理。但我更喜欢使用“隐形”：

```
<style name="NoCloseButtonActionModeStyle">
   <item name="android:visibility">invisible</item>
</style> 
```

因此 ActionMode 中的自定义视图位置不会缩进到父级左侧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-08T09:27:37.197

**有人找到屏幕宽度解决方案吗？– Mayur R. Amipara 2015 年 6 月 5 日在 10:27**

覆盖您的自定义视图的 onMeasure，将其宽度设置为屏幕宽度。在 onLayout 中，重新布局您的子视图。

这个对我有用。

```
import android.content.Context;
import android.util.AttributeSet;
import android.util.DisplayMetrics;
import android.view.View;
import android.widget.RelativeLayout;

import com.android.gallery3d.R;

public class SelectActionModeCustomView extends RelativeLayout {

    private View mLeftButton;
    private View mRightButton;

    private int mScreenWidth;

    private static final String TAG = "SelectActionView";

    public SelectActionModeCustomView(Context context, AttributeSet attrs) {
        super(context, attrs);

        DisplayMetrics metrics = context.getResources().getDisplayMetrics();
        mScreenWidth = metrics.widthPixels;
    }

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();
        mLeftButton = findViewById(R.id.cancel);
        mRightButton = findViewById(R.id.select_action);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        this.setMeasuredDimension(mScreenWidth, this.getMeasuredHeight());
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        super.onLayout(changed, l, t, r, b);
        int childLeft = 0;
        int childTop = 0;

        childLeft = 0;
        childTop = ((b - t) - mLeftButton.getMeasuredHeight()) / 2;
        mLeftButton.layout(childLeft, childTop, 
                childLeft + mLeftButton.getMeasuredWidth(), 
                childTop + mLeftButton.getMeasuredHeight());

        childLeft = (r - l) - mRightButton.getMeasuredWidth();
        childTop = ((b - t) - mRightButton.getMeasuredHeight()) / 2;
        mRightButton.layout(childLeft, childTop, 
                childLeft + mRightButton.getMeasuredWidth(), 
                childTop + mRightButton.getMeasuredHeight());
    }

} 
```

# storage - BTS ESB 存储端点信息

> ID：14964948
> 
> 赞同：0
> 
> 时间：2013-02-19T18:39:23.187
> 
> 标签：storage, biztalk, endpoints, biztalk2006r2, esb-toolkit-2.0

哪种方法最好将 EndPoints 信息存储在可编程存储库中，而不是在 BizTalk ESB2.0 工具包中进行硬编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:47:03.617

为此，我们可以使用 UDDI 门户并访问 UDDI 门户，我们可以配置 UDDI 解析器！

# java - 在java中通过副本传递后返回相同值的函数

> ID：14964949
> 
> 赞同：0
> 
> 时间：2013-02-19T18:39:23.913
> 
> 标签：java

我有一个代码如下，我在调用中交换`Instance variables`类`Function``SwapNames`

```
public class Sam3 
{
    public String FirstName, LastName;

    public static void main(String[] args) 
    {   
        Sam3 objSam1 = new Sam3();
        Sam3 objSam2 = new Sam3();

        objSam1.FirstName = "Name1";
        objSam2.LastName  = "Name2";        

        System.out.print(objSam1.FirstName + " " + objSam2.LastName);

        SwapNames(objSam1, objSam2);

        System.out.print(objSam1.FirstName + " " + objSam2.LastName);
    }

    public static void SwapNames(Sam3 obj1, Sam3 obj2)
    {   
        Sam3 temp = obj2; 
        obj2 = obj1;
        obj1 = temp;

        obj1.FirstName = "First Name";
        obj2.LastName  = "Last Name";
    }
} 
```

现在代码的输出如下

```
Name1 Name2
Name1 Name2 
```

我不明白的是我交换了值`obj1 and obj2`- 对他们的引用。之后`classes`我正在更改值。

为什么代码没有生效。

谢谢您的回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:41:54.650

*在 Java 中，一切都是按值传递的*。

当你调用`SwapNames(objSam1, objSam2);`reference时`objSam1`，`objSam2`会被复制到方法`SwapNames`参数`obj1`和`obj2`。

所以在交换参考值之后`obj1`and`obj2`将被交换而不是`objSam1`and `objSam2`。

`objSam1`并且`objSam2`仍然持有旧的参考对象。所以这不会影响任何事情。

* * *

为了更好地澄清

```
Sam3 temp = obj2; 
obj2 = obj1;
obj1 = temp; 
```

如果您打印对象的名字和姓氏的值。

```
System.out.print(obj1.FirstName + " " + obj2.LastName); 
```

你会看到结果是`Name2 Name1`

*因为 obj1 现在正在引用第二个对象，而 obj2 正在引用第一个对象。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:46:19.743

```
public static void SwapNames(Sam3 obj1, Sam3 obj2)
{   
    Sam3 temp = obj2; 
    obj2 = obj1;
    obj1 = temp;

    obj1.FirstName = "First Name"; //<-- is actually objSam2 
    obj2.LastName  = "Last Name";  //<-- is actually objSam1
} 
```

看看发生了什么：

```
class Test{

    public int i=2;
}

public class Main {
public static void main(String[] args) {

    Test t1 = new Test();
    t1.i=0;

    Test t2 = new Test();
    t2.i=1;

    System.out.println(t1.i+" "+t1);
    System.out.println(t2.i+" "+t2);

    test(t1,t2);

    System.out.println(t1.i+" "+t1);
    System.out.println(t2.i+" "+t2);

}

public static void test(Test a, Test b){
    Test swap=a;
    a=b;
    b=swap;

    System.out.println(a.i+" "+a);
    System.out.println(b.i+" "+b);
}

}
/*
output:
0 Test@3c56b64c
1 Test@60da5686
1 Test@60da5686
0 Test@3c56b64c
0 Test@3c56b64c
1 Test@60da5686
*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T19:23:06.653

在您的代码中，有两个 Sam3 对象引用变量
，其中包含 Sam3 类的对象。

for objSam1 first Instance of Same3 [记住 Sam3
包含两个实例变量 FirstName, LastName]
objSam1.FirstName = "Name1";
objSam1.LastName = null; // 如果你不设置或初始化，这是默认值

对于 objSam2 这是 Sam3 的第二个实例 [记住 Sam3
类包含两个实例变量 FirstName, LastName]
objSam2.FirstName = null; //如果我们不初始化 .FirstName
objSam2.LastName = "Name2";

现在调用交换方法后，对象已更改，但您正在更改

objSam2.FirstName = "First Name";
//以前 FirstName 为 null 并且 .LastName 没有变化（参见上面的代码）

对于
objSam1.LastName = "Last Name";
// 以前它是 null 并且 .FirstName 没有变化（见上面的代码）

所以计算机给出了正确的答案。

# mysql - 从插入语句返回 Query_ID

> ID：14964950
> 
> 赞同：1
> 
> 时间：2013-02-19T18:39:26.277
> 
> 标签：mysql, sql, database

我正在尝试将查询的持续时间详细信息记录到表中。我遇到的问题是第 8 行。这是因为我需要一种方法来返回从第 2 行和第 3 行创建的 QUERY_ID？

```
1)Set profiling =1;

2)INSERT INTO Master
3)VALUES ("a12t22h@hotmail.com","efheif","pwoe");

4)INSERT INTO Duration(Status,DURATION)
5)SELECT STATE, FORMAT(DURATION, 6) AS DURATION
6)FROM INFORMATION_SCHEMA.PROFILING;
7)SELECT * FROM INFORMATION_SCHEMA.PROFILING
8)WHERE QUERY_ID = 1; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:46:09.320

我猜你想返回第 2 行插入的值的 ID？您可以使用 ; 获取插入的 Id

选择 LAST_INSERT_ID();

我会将其分配给一个变量，然后在您的最后一个插入语句中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:07:02.290

试试这个。它是一个临时变量，必须在插入后的下一行使用，否则该值将被重置。

设置分析=1；

```
INSERT INTO Master
VALUES ("a12t22h@hotmail.com","efheif","pwoe");

SET @v1 = LAST_INSERT_ID()

INSERT INTO Duration(Status,DURATION)
SELECT STATE, FORMAT(DURATION, 6) AS DURATION
FROM INFORMATION_SCHEMA.PROFILING;
SELECT * FROM INFORMATION_SCHEMA.PROFILING
WHERE QUERY_ID = @v1; 
```

# java - 将方法转换为对象以通过 HTTP 发送

> ID：14964955
> 
> 赞同：0
> 
> 时间：2013-02-19T18:39:56.713
> 
> 标签：java

他们是否有任何好的教程展示如何将方法转换为对象，然后通过 HTTP 发送它并在另一端反转过程。我很久以前在 RMI 服务器上做过一次，我在网上找不到任何显示完整过程的好的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:03:35.697

而不是使用 RMI，您应该在 JAVA 中使用 RESTful Web 服务，该服务将对象转换为一侧的 JSON 对象并转换回另一侧的对象。阅读以下链接以获取 Restful 服务教程

[http://avilyne.com/?p=105](http://avilyne.com/?p=105)

[http://www.ibm.com/developerworks/library/wa-aj-tomcat/](http://www.ibm.com/developerworks/library/wa-aj-tomcat/)

[http://www.vogella.com/articles/REST/article.html](http://www.vogella.com/articles/REST/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T19:33:23.763

由于无法直接序列化方法，因此您必须在如何序列化方法信息方面具有创造性。[这](https://stackoverflow.com/questions/1769842/serialization-of-method-object-in-java-is-possible)是关于序列化方法的类似问题的链接。

关于通过 HTTP 发送内容的参考[是](http://javatidbits.blogspot.com/2004/12/sending-and-receiving-objects-over.html)一个教程，它讨论了序列化对象并通过 URL 连接发送它。

如果您结合来自两个来源的信息，您应该能够解决您的问题。我希望这个对你有用。

# java - R.string 不显示我在 res/values/strings.xml 中手动定义的字符串

> ID：14964959
> 
> 赞同：0
> 
> 时间：2013-02-19T18:40:05.213
> 
> 标签：java, android, xml

我`string`在strings.xml文件中添加了一些s，如下：

```
<string name="29">Beaf Stake"</string> 
```

我知道这是`string`从资源中检索 s 的方法：

```
getResources().getString(R.string.29); 
```

但问题是我没有`string`在`R.string`. 我导入了我的项目`R`如下：

```
import xxxx.xx.xxxx.xxx.R; 
```

我尝试重新启动 Eclipse 没有运气，那我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:44:55.157

使用数字变量名是错误的。它不会允许这样的事情，而是抛出一个错误。

我要求您更改字符串名称。可以遵循建议[是否有关于如何命名资源的约定？](https://stackoverflow.com/questions/7165582/are-there-conventions-on-how-to-name-resources)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:48:09.117

您的资源名称不能以数字开头，您必须使用转义字符转义引号或将整个字符串括起来。

```
<string name="29">Beaf Stake"</string> 
```

应该

```
<string name="29">"Beaf Stake"</string> 
```

或者

```
<string name="29">Beaf Stake/"</string> 
```

[关联](http://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling)

# coffeescript - Select2 搜索框

> ID：14964960
> 
> 赞同：3
> 
> 时间：2013-02-19T18:40:08.077
> 
> 标签：coffeescript, jquery-select2

我有以下功能的格式问题。正如您将在下面看到的，它大部分都有效，只是搜索框的格式不是我想要的（我想复制预先输入的 Twitter Bootstrap 功能）：

用户可以在搜索框中输入书名，在搜索框下方的下拉列表中选择要从中选择的书籍（通过 ajax），然后选择一本书。在下拉列表中选择一本书后，会在表格中填写书籍信息。就像这样：

![在此处输入图像描述](../Images/c2e218be2041ba389d655d2fe519afbf.png)

我的问题是 select2 会自动更改搜索输入的格式（在搜索框中的所选项目周围添加 css）。看这里：

![在此处输入图像描述](../Images/729e8986da1dabbd0617fe4b9b2e619e.png)

**问题**

我知道这不完全是 Select2 的用途，但我希望搜索框的值为“rails”，与我输入时的样子完全相同（第一个屏幕截图）。**如何保持常规输入格式？**

**细节：**

这是我到目前为止的咖啡脚本代码（它具有图片的异步加载和选择的格式）：

```
jQuery ->

  get_image = (unique_id, image_url) ->
    img = $("<img  />").load(->
      $(".#{unique_id} .typeahead_photo_wrapper").html(img)
    ).error(->
      $(".#{unique_id} .typeahead_photo_wrapper").html("No preview")
    ).addClass('typeahead_photo').attr({src: image_url}).fadeIn(500)

  format_item = (book) ->
    console.log book
    itm = ''
    itm += "<div class='typeahead_wrapper #{book.isbn}'>"
    itm += "<div class='typeahead_photo_wrapper'>"
    itm += "<div class='typeahead_photo'>...</div>"
    itm += "</div>"
    itm += "<div class='typeahead_labels'>"
    itm += "<div class='typeahead_primary'>#{book.title}</div>"
    itm += "<div class='typeahead_secondary'>#{book.author}</div>"
    itm += "</div>"
    itm += "</div>"

    get_image(book.isbn, book.image)
    itm

  update_with_item = (item) ->
    keywords = $("#learning_item_book_search").val()
    # console.log item

    $("#new-book #learning_item_unique_identifier").val(item.isbn)
    $("#new-book #learning_item_source").val(item.source)
    $("#new-book #learning_item_name").val(item.title)
    $("#new-book #learning_item_description").val(item.description)
    $("#new-book button").focus()
    item.title

  retrieve_books = (data) ->
    books = []
    $.each data, (i, item) ->
      books.push(
        id: item.id
        isbn: item.isbn
        title: item.title
        author: item.authors
        description: item.description
        image: item.volume_info.imageLinks.smallThumbnail
      )
    books

  $("#learning_item_book_search").select2({
    minimumInputLength: 2
    tags: true
    ajax:
      url: "/raw_items/fetch_books"
      dataType: 'json'
      quietMillis: 200
      data: (term, page) ->
        query: term
      results: (data, page) ->
        return {results: retrieve_books(data)}
    maximumSelectionSize:1
    formatResult: format_item
    formatSelection: update_with_item
    formatInputTooShort: (term, minLength) ->
      "Searching book on Google books"
    dropdownCssClass: 'typeahead'
  }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T19:28:03.377

您可以将 select2 置于多选模式 - 这将使它看起来像您想要的常规文本字段。使用 maximumSelectionSize:1 选项将选择限制为单个项目。在原始 html 控件上使用“更改”事件来填充表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T14:45:05.427

在`format_item`添加一行

```
$("#learning_item_book_search").select2('val', '') 
```

对于多选

```
$("#learning_item_book_search").select2('val', []) 
```

它将保留搜索词而不是添加所选项目。

# qml - 从 qml 更改上下文

> ID：14964963
> 
> 赞同：7
> 
> 时间：2013-02-19T18:40:16.727
> 
> 标签：qml, pyside

我用 PySide 和 QML 编写了某种安装程序。按照设计，它必须是多页的。而且我想将要从 QML 表单调用的插槽划分为不同的对象（理想情况下，划分为模块，但据我了解，带有插槽的对象必须继承 QObject，模块不能这样做）。因此，当页面更改时，“控制器”也必须更改，但是，当我使用 setContextProperty 在 QML 中使其可见时，我遇到了问题。有没有办法从 QML 调用 setContextProperty？或者也许存在一些更正确的方法来做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-16T10:20:03.717

我猜你需要一些“中介”对象，其函数定义为 Q_INVOKABLE。因此，您使用 setContextProperty 将其设置为对 QML 可见，并根据需要从 QML 调用这些函数。

# groovy - Groovy：命名参数构造函数

> ID：14964970
> 
> 赞同：10
> 
> 时间：2013-02-19T18:40:48.300
> 
> 标签：groovy

我发现一个人可以做的真的很酷：

```
class Foo {
    String name
}

def foo = new Foo(name:"Test") 
```

但是，它仅在我的文件名与类名匹配时才有效。如果我有一个包含一堆类的文件，例如：

```
class AllClassesInOneFile {
    class Bar {}
    class Foo {
      String name
    }
}

def foo = new Foo(name:"Test") 
```

现在，它不再起作用了我得到一个 java.lang.IllegalArgumentException: wrong number of arguments

我想知道是否仍然可以使用脚本和嵌套类调用命名参数参数样式。

问候

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T18:54:26.483

似乎 Groovy 需要显式引用外部类的实例：

```
class Baz {
    class Bar {}
    class Foo {
      String name
    }
}

def baz = new Baz()

def f = new Baz.Foo(baz, [name: "john doe"])

assert f.name == "john doe" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-03T18:09:18.813

没有外部类的实例，非静态嵌套对象就不能存在。在java中也是一样。只需将嵌套对象更改为静态。

# node.js - socket.io 不支持 express3？

> ID：14964975
> 
> 赞同：0
> 
> 时间：2013-02-19T18:41:12.233
> 
> 标签：node.js, express, socket.io

我开始学习 socket.io 和 express3 但我发现当我这样做时 -

```
var app = require('express').createServer()
var io = require('socket.io').listen(app);

app.listen(8080); 
```

它写入`express.createServer()`已弃用的控制台。

我用谷歌搜索但找不到任何答案..我该怎么办？
也许我应该降级快递或什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:47:17.870

仔细查看[文档](http://socket.io/#how-to-use)。您会在“使用 Express 3 Web 框架”与“使用 Express Web 框架”一节中看到使用 socket.io 之间的关键区别。他们给出的例子是：

```
var app = require('express')()
  , server = require('http').createServer(app)
  , io = require('socket.io').listen(server);

server.listen(80); 
```

只需遵循该模式，您就万事俱备了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:48:43.720

对此，[您](http://expressjs.com/api.html)需要更改`var app = require('express').createServer()`

```
var express = require('express')
  , app = express()
  , io = require('socket.io').listen(app); 
```

# windows-phone-7 - Windows Phone 上下文菜单

> ID：14964978
> 
> 赞同：0
> 
> 时间：2013-02-19T18:41:20.530
> 
> 标签：windows-phone-7, xaml, contextmenu

我想将上下文菜单添加到列表框。但是当我坚持到列表框项目时，什么也没有发生。谢谢..

此代码是我的列表框的定义。我将上下文菜单添加到列表框中。

```
<ListBox Grid.Row="1" Name="chList" ItemsSource="{Binding Ch.Texts}" SelectionChanged="TextChanged" Style="{StaticResource ListOfText}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <toolkit:ContextMenuService.ContextMenu>
                <toolkit:ContextMenu Name="ContextMenu">
                    <toolkit:MenuItem Name="Edit" Header="Edit" Click="Edit_Click"/>
                    <toolkit:MenuItem Name="Delete" Header="Delete" Click="Delete_Click"/>
                </toolkit:ContextMenu>
            </toolkit:ContextMenuService.ContextMenu>
        </DataTemplate>
    </ListBox.ItemTemplate>
</Listbox> 
```

在styles.xaml

```
<Style x:Key="ListOfText" TargetType="ListBoxItem">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ListBoxItem">
                <Border x:Name="RootElement" Padding="{StaticResource PhoneBorderThickness}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="10" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Border Grid.Column="0" Background="{StaticResource PhoneAccentBrush}"
                                    Opacity="{Binding IsRead,Converter={StaticResource opacityConverter}}" />
                        <Grid MinHeight="60" Grid.Column="1">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="auto" />
                                <RowDefinition Height="auto" />
                            </Grid.RowDefinitions>
                            <TextBlock Grid.Row="0" Text="{Binding Title}" TextWrapping="Wrap"
                                           Style="{StaticResource PhoneTextTitle3Style}" />
                            <Grid Grid.Row="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="{Binding PbDate, Converter={StaticResource dateConverter}}"
                                               VerticalAlignment="Center" TextWrapping="Wrap" Style="{StaticResource PhoneTextSmallStyle}" />
                                <Image Grid.Column="1" Height="{StaticResource PhoneFontSizeNormal}" HorizontalAlignment="Left"
                                           Visibility="{Binding IsStared,Converter={StaticResource visibilityConverter}}" Source="/Toolkit.Content/favs.png" />
                            </Grid>
                        </Grid>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我的解决方案中的 Styles.xaml ......但我无法解决这个问题..

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:17:47.723

您将项目设置`DataTemplate`为 a`ContextMenuService.ContextMenu`并且没有实际内容。您实际上需要在那里显示一些内容。另外，你有清单中的任何项目吗？

移动`ContextMenuService.ContextMenu`一个主模板 - 目前您正在拆分它（出于未知原因）。删除控件本身`DataTemplate`中的声明`ListBox`并使用您的预定义样式。

# javascript - 使用 .replaceWith() jQuery

> ID：14964980
> 
> 赞同：0
> 
> 时间：2013-02-19T18:41:42.143
> 
> 标签：javascript, jquery, html

我有一个具有以下元素的 div：

```
<div id = "menu">

                <a>Elemento1</a><br/>

                <a>Elemento2</a><br/>

                <a>Elemento3</a><br/>

</div> 
```

每次单击一个元素时，我都希望在此列表旁边添加一个具有不同内容的新 div，具体取决于单击的元素，它应该添加一个不同的列表。我是 web 开发的新手，我发现使用 jQuery 函数`.replaceWith()`可以做到这一点，但是有什么方法可以使用这个函数，添加我在其他 .html 文件中得到的 div 吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:45:12.370

为什么不只是`<div id="content"></div>`在菜单之后，然后使用
`$("#content").load("your_file.html");`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:47:27.433

**replaceWith**用于将某些 DOM 元素替换为不同的元素。我不认为这个功能可以解决这个问题。

您可以使用**.load**函数获取 html 文件内容并将其插入到您想要的任何位置。只需将单击事件绑定到每个链接并使用它们的**href**属性来获取相应的文件。不要忘记在事件结束时**返回 false**。

像这样的东西：

```
<div id="menu">
     <a href="page1.html">Elemento1</a>
     <a href="page2.html">Elemento2</a>
     <a href="page3.html">Elemento3</a>
</div>
<div id="content"></div>

$("#menu a").click(function(){
   $("#content").load(this.href);
   return false;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T18:53:18.917

要获取另一个 HTML 文件的某个部分，请使用[jQuery`load`](http://api.jquery.com/load/)函数。在您的情况下，基本用法是：

```
$('#result').load('ajax/test.html #container_you_want_to_load'); 
```

要在链接之后或之前添加元素，您有几个选择。问题是你是否真的需要它。也许定义一个目标 div 就足够了，您将在其中加载您的内容。在这种情况下，上面的示例将非常适合。

`<a>`但是，如果您想在标签旁边添加元素，请考虑使用[`after`](http://api.jquery.com/after/)或[`before`](http://api.jquery.com/before/)jQuery 函数。

要即使在您的一个链接上也能获得点击，请检查[`click`](http://api.jquery.com/click/)

# extjs - 如何在变量中调用 ext js 3.4 中的超类

> ID：14964984
> 
> 赞同：0
> 
> 时间：2013-02-19T18:41:45.707
> 
> 标签：extjs, extjs3

有谁知道如何在 ext js 3.4 中成功调用超类？在我的示例代码中，我似乎无法让超类在面板上工作。

```
MyWindow = Ext.extend(MyWindowUi, {
    initComponent: function() {
        MyWindow.superclass.initComponent.call(this);
        this.createTextField();
    },  
    createTextField : function() {  
        var p = new Ext.Panel({
            title: 'somepanel',
            initComponent: function() {
                console.log('init component');
                console.log(this);
                this.superclass.initComponent.call(this); //NOT WORKING??
            }
        });
        this.add(p);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:01:47.087

试试`Ext.Panel.superclass.initComponent.call(this)`吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T22:32:05.373

它不起作用，因为您在创建 p 时没有调用 Ext.Panel 的 initComponent。如果你打算用前一个方法的超类调用来覆盖一个方法，那么如果不需要范围技巧，Ext.extend 会更干净。

您还可以执行以下操作：

```
 createTextField : function() {  
    var p = new Ext.Panel({
        title: 'somepanel'
    }),
    oldInit = p.initComponent;

    p.initComponent = function() {
        console.log('init component');
        console.log(this);
        oldInit.call(this);
    }

    this.add(p);
} 
```

或类似的东西：

```
createTextField : function() {  
    var p = new Ext.Panel({
        title: 'somepanel',
        initComponent: function() {
            console.log('init component');
            console.log(this);
            Ext.Panel.prototype.initComponent.call(this);
        }
    });
    this.add(p);
} 
```

但他们都是丑陋的imo。

# c - 微控制器内存分配

> ID：14964985
> 
> 赞同：0
> 
> 时间：2013-02-19T18:41:46.943
> 
> 标签：c, memory-management, microcontroller

我一直在思考以下问题：

在普通 pc 中，当您分配一些内存时，您会要求操作系统跟踪哪些内存段已被占用，哪些未占用，并且不要让您弄乱其他程序的内存等。但是怎么样微控制器，我的意思是微控制器没有运行操作系统，所以当你要求一堆内存时发生了什么？您不能简单地访问内存芯片并访问一个随机位置，因为它可能已被占用......谁会跟踪内存的哪些部分已经被占用，并为您提供一个空闲的地方来存储一些东西？

**编辑：**

我已经用 C 编写了微控制器......我认为答案可能是“与语言无关的”。但让我更清楚一点：假设我有这个程序在微控制器上运行：

```
int i=0;
int d=3; 
```

是什么确保我的 i 和 d 变量没有存储在内存中的同一位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:37:16.077

我认为评论已经涵盖了这个......

请求内存意味着您有一些操作系统来管理您要从中分配的内存（使用术语操作系统的松散意义）。首先，作为一般规则，您不应该在微控制器中分配内存（我可能会因为这种说法而感到愤怒）。可以在某些情况下完成，但您可以控制自己的内存，您拥有应用程序的系统，要求内存意味着要求您自己。

除非您有理由不能静态分配结构或数组，或者如果存在可能都需要大量或全部空闲内存的互斥代码路径，则不能使用联合，您可以尝试动态和自由分配，但这是一个更难的系统要解决的工程问题。

内存的运行时分配和编译时间之间存在差异。您的示例与问题的其余部分无关

诠释我=0；诠释d=3；

编译器在编译时在 .data 中为每个项目分配两个位置。链接器和/或脚本管理 .data 所在的位置以及它的大小限制，如果 .data 大于可用的，您应该收到链接器警告，如果没有，那么您需要修复链接器命令或脚本以匹配您的系统。

运行时分配是在运行时管理的，它管理内存的位置和方式由该库决定，即使您有足够的内存，一个错误或编写不当的库也可能与 .text、.data、.bss 和/或堆栈重叠并导致很多问题。

堆栈的过度使用也是一个非常严重的系统工程问题，来自非嵌入式系统的这些问题现在经常被忽视，因为内存太多。在处理微控制器上的嵌入式代码时，这是一个非常现实的问题。您需要知道最坏情况下的堆栈使用情况，如果您要动态分配堆，或者即使您静态分配，请至少为那么多内存留出空间。

# c# - HTML 敏捷包和 LINQ

> ID：14964990
> 
> 赞同：1
> 
> 时间：2013-02-19T18:42:16.847
> 
> 标签：c#, linq, web-scraping, html-agility-pack

我想使用 HAP 从网站上的表中抓取数据，遍历行以在与预定义字符串匹配的列中查找值，然后仅存储匹配的行。然后我将有一个字典，其中列标题作为键，选定行的列文本作为值。

表前。

```
<table id="Table3">
<tbody><tr><td></td></tr>
<tr>
<td>ID</td>
<td>Last Name</td>
<td>First Name</td>
<td>Birth Date</td>
<td>Relation</td>
</tr>

<tr>
<td>nbsp;01&nbsp;</td>
<td>&nbsp;DUNN          &nbsp;</td>
<td>&nbsp;JOE          &nbsp;</td>
<td>&nbsp;19931209&nbsp;</font></td>
<td>&nbsp;Son&nbsp;</td>
</tr>

<tr>
<td>nbsp;02&nbsp;</td>
<td>&nbsp;SMITH          &nbsp;</td>
<td>&nbsp;MARY          &nbsp;</td>
<td>&nbsp;19950206&nbsp;</font></td>
<td>&nbsp;Daughter&nbsp;</td>
</tr>

<tr>
<td>nbsp;03&nbsp;</td>
<td>&nbsp;ROCKFORD          &nbsp;</td>
<td>&nbsp;BILL          &nbsp;</td>
<td>&nbsp;20000320&nbsp;</font></td>
<td>&nbsp;Son&nbsp;</td>
</tr>

</tbody></table> 
```

如果我想要匹配的出生日期是 20000320，那么我想要比尔的所有信息。

将标题标题添加到列表中没有问题。我知道我没有正确写下用户行。我所拥有的仍在尝试获取行列表而不是一行。我在用户行中遇到的另一个问题是内部文本将在其中返回“ ”，我不能只做一个 .Replace 所以我需要一种删除空格的方法。我愿意接受所有建议。做所有这些的更聪明的方法等等。

```
List<string> headerList = new List<string>();
List<string> userList = new List<string>();

var htmlRows = htmlDoc.DocumentNode.SelectNodes("//*[@id=\"Table3\"]/tbody/tr");
if(htmlRows != null)
{
     // Add first row which contains column headings
     htmlRows[2]
         .Elements("td")
         .Select(td => td.InnerText.Trim())
         .ToList()
         .ForEach(header => headerList.Add(header));

     // Add user rows
     htmlRows
         .Skip(3)
         .Select(tr => tr.Elements("td")
             .Where(td => td.InnerText.Trim() == dteDOB))
             .ToList()
         .ForEach(row => userList.Add(row));

    for(int i = 0; i < headerList.Count; i++)
    {
        if(headerList.Count == userList.Count && userList[i] != null)
            dictValues.Add(headerList[i], userList[i]);                 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:54:34.813

您可以尝试使用 td 中的值选择整个 tr 我认为

```
//*[@id=\"Table3\"]/tbody/tr[td//text()[contains(., 'targetString')]] 
```

看看这个

[XPath 选择具有包含指定文本的单元格的表格行](https://stackoverflow.com/questions/4608097/xpath-to-select-a-table-row-that-has-a-cell-containing-specified-text)

# java - 如何制作简化分数的 Java 方法？

> ID：14964992
> 
> 赞同：0
> 
> 时间：2013-02-19T18:42:17.187
> 
> 标签：java, simplify, fractions

我写了一个分数类，但在简化时遇到了麻烦。

当我制作 Fraction 对象时，一切正常，我只是认为我的逻辑因简化而混乱。

（num 和 den 分别是分子和分母类中的私有变量）

这是我的 GCD 和 Simplify 方法：

```
/**
 * Returns the absolute value of the greatest common divisor of this
 * fraction's numerator and denominator. If the numerator or denominator is
 * zero, this method returns 0\. This method always returns either a positive
 * integer, or zero.
 * 
 * @return Returns the greatest common denominator
 */
private int gcd() {
    int s;
    if (num > den)
        s = den;
    else
        s = num;
    for (int i = s; i > 0; i--) {
        if ((num % i == 0) && (den % i == 0))
            return i;
    }
    return -1;
}

/**
 * Changes this fraction's numerator and denominator to "lowest terms"
 * (sometimes referred to as a "common fraction"), by dividing the numerator
 * and denominator by their greatest common divisor. This includes fixing
 * the signs. For example, if a fraction is 24/-18, this method will change
 * it to -4/3\. If the numerator or denominator of the fraction is zero, no
 * change is made.
 */
public void simplify() {

    if (isZero() == false) {// Making sure num or den is not zero.
        this.fixSigns(); // Fix signs first

        if (gcd() > 1) {
            this.num = num / gcd();
            this.den = num / gcd();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:50:26.807

我马上看到两件事：对于分子和分母中的每一个，您都除以两次`num`。`gcd()`此外，一旦您更改了分子，那么调用的结果`gcd()`可能会改变。调用“gcd”一次，存储它的结果，并在以后使用它：

```
int gcd = gcd();
if (gcd > 1) {
   this.num = this.num / gcd;
   this.den = this.den / gcd;
} 
```

此外，还有更有效的获取最大公约数的方法：[Wikipedia's page](http://en.wikipedia.org/wiki/Greatest_common_divisor)。请参阅该页面上的 Euclid 算法。

# java - 麦克风打开时如何暂停 MediaPlayer？

> ID：14964993
> 
> 赞同：1
> 
> 时间：2013-02-19T18:42:20.453
> 
> 标签：java, android, android-mediaplayer

我注意到，如果我启动 Google 语音搜索，我的音乐播放器不会暂停。

我如何参考麦克风打开时的状态？所以我可以暂停 mp 并重新启动它。

# mysql - mysql：从表名构建动态别名

> ID：14964995
> 
> 赞同：0
> 
> 时间：2013-02-19T18:42:22.803
> 
> 标签：mysql

是否可以从表名动态地为列构建别名？

例如：

```
Table test with Columns:
Column c1, Column c2, Column c3, Column c4

Statement: SELECT t.* AS abc FROM test AS t 
should return the values with column names: t.c1, t.c2, t.c3, t.c4 
```

# c# - 使用来自父级的值扩展对象

> ID：14964996
> 
> 赞同：3
> 
> 时间：2013-02-19T18:42:29.187
> 
> 标签：c#, oop, inheritance

假设我有一堂课：

```
public class Parent
{
    public string Name { get; set; }
    public string City { get; set; }
} 
```

在某些函数中，我得到了父对象类型的列表，接下来我想用具有一些值的新字段来扩展这些对象，所以我声明了一个这样的扩展类：

```
public class Child : Parent
{
    public Child(Parent parent)
    {
        Name = parent.Name;
        City = parent.City;
    }
    public int Age { get; set; }
} 
```

并为每个扩展对象调用构造函数。有没有更好的方法来做到这一点？如果 Parent 中有多个属性怎么办？也许有一些更优雅的方式来实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T18:58:18.000

我想也许你正在寻找一种复制构造器模式。每个级别定义一个`protected`复制相关属性的构造函数：

```
public class Parent
{
    public string Name { get; set; }
    public string City { get; set; }

    //normal constructor
    public Parent()
    {

    }

    protected Parent(Parent copy)
    {
        this.Name = copy.Name;
        this.City = copy.City;
    }
} 
```

将`Child`继承自`Parent`，将其传递给复制构造函数，然后根据需要附加其新值：

```
public class Child : Parent
{
    public string NewInfo { get; set; }

    public Child(Parent copy)
        : base(copy)
    {

    }
} 
```

用法可能如下所示：

```
Parent parent = new Parent() { Name = "Name", City = "StackOverflow"};

Child child = new Child(parent) { NewInfo = "Something new!" };

Console.WriteLine(child.Name); //Name
Console.WriteLine(child.City); //StackOverflow
Console.WriteLine(child.NewInfo); //Something new! 
```

这样做的好处是您可以拥有多个继承级别，每个级别都管理自己的属性。

编辑：鉴于您最近的评论：

> 这个问题的动机是我得到一个包含数据的对象列表，并且想要显示这些数据但有一些额外的字段，而不涉及基类。

也许更好的方法是包装基类：

```
public class Child
{
    private readonly Parent WrappedParent;

    public string NewInfo { get; set; }

    public string Name 
    { 
        get { return WrappedParent.Name; }
        set { WrappedParent.Name = value; }
    }

    public string City 
    { 
        get { return WrappedParent.City; }
        set { WrappedParent.City = value; }
    }

    public Child(Parent wrappedParent)
    {
        this.WrappedParent = wrappedParent; 
    }
} 
```

缺点是您必须重新声明每个属性，并且您不再继承 (不能被视为 a) `"Parent"`，但是您肯定不再“接触”基类。如果这对您更好，可以将“父”属性移动到`IParent`接口中，但再次这样做是“接触”基类，因为您必须将`IParent`接口声明添加到其类定义中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T18:47:54.997

不知道我是否弄错了，但这可能是一个更标准的解决方案

```
public class Parent
{
    public Parent(string name, string city)
    {
       Name = name;
       City = city;
    }

    public string Name { get; set; }
    public string City { get; set; }
}

public class Child : Parent
{
    public Child(string name, string city, int age) : base(name, city)
    {
       Age = age;
    }
    public int Age { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T18:49:22.753

你可以这样做

```
public class Parent
{
    public string Name { get; set; }
    public string City { get; set; }

    public Parent(string name, string city)
    {
        this.Name = name;
        this.City = city;
    }

    public Parent():this(string.Empty, string.Empty)
    {
    }
}

public class Child : Parent
{
    public Child(Parent parent, int age):base(parent.Name, parent.City)
    {
        this.Age = age;
    }

    public int Age { get; set; }
} 
```