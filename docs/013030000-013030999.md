# StackOverflow 问答 13030000-13030999

# sql-server - 在 SQL Server 中替换单引号的问题

> ID：13030001
> 
> 赞同：2
> 
> 时间：2012-10-23T12:03:21.643
> 
> 标签：sql-server, visual-c++

我一直在寻找这个问题的解决方案。虽然这个特定的问题已经在这个论坛上讨论过很多次，但我没有得到任何正确的答案。

我将从第 3 方获取可以包含单引号的数据。此数据需要插入到数据库中，当它包含单引号时，它会失败并引发以下错误：

```
Msg 105, Level 15, State 1, Line 7
Unclosed quotation mark after the character string ' 
```

---以下是将 trandata 与其他参数一起作为输入传递并从 SQL 服务器调用 fn_stripsingleQuote10 函数的 C++ 代码：

```
strSQLText = "declare @returnType as varchar(max)\n EXEC @returnType = CABINET..fn_stripsingleQuote10 ";
sqlTxtParams.Format("'%s', '%s', '%s', tranData, sing_quote, double_sing_quote);

strSQLText += sqlTxtParams; 
```

----我的sql函数(fn_stripsingleQuote10)替换单引号

```
USE [cabinet]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE function [dbo].[fn_stripsingleQuote10](
 @strip varchar(Max),@patern varchar(5),@replace varchar(5)
 )
returns varchar(Max) as begin

 declare @CleanString varchar(Max)     
    SET @CleanString=(REPLACE(@strip,@patern, @replace))

 return @CleanString
end 
```

示例输出：例如：将@returnType 声明为 varchar(max) EXEC @returnType = CABINET..fn_stripsingleQuote10 'fsds'd','''',''''''

我觉得我调用该功能的方式不正确。请提供解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:09:18.260

严格来说，您正在寻找[`QUOTENAME`](http://msdn.microsoft.com/en-us/library/ms176114.aspx)，这正是您所要求的：

> `'quote_character'`是用作分隔符的单字符字符串。 **可以是单引号 ( ' )**、左括号或右括号 ( [ ] ) 或双引号 ( " )。

但是，您的代码很可能现在暴露于 SQL 注入，您应该实际使用参数。几乎从*不需要*将输入连接到结果执行的 SQL 中。

# php - 如何在今天和到期日期之间获取 WP 帖子？

> ID：13030006
> 
> 赞同：0
> 
> 时间：2012-10-23T12:03:29.673
> 
> 标签：php, wordpress

嗨，男孩/女孩需要帮助，请，

我有关于事件的 wordpress 网站，需要拉 10、20 个帖子并按自定义字段的到期日期对其进行排序。

到期日期的格式为“2012 年 12 月 31 日”（d/m/y）我需要在今天和该到期日期之间发布帖子，并按该到期日期对其进行排序，以便较早到期的帖子位于顶部。

求大神帮忙看看，谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:04:12.283

我的英语不够好，帮你写PHP代码。但您可以从 WordPress 网站下载名为 Post Expirator 的插件或单击这些链接。 [http://wordpress.org/extend/plugins/post-expirator/](http://wordpress.org/extend/plugins/post-expirator/)

如果您需要有关如何设置的更多信息，请告诉我。

# asp.net-mvc - 带有 MVC3 组件的 Daypilot

> ID：13030008
> 
> 赞同：0
> 
> 时间：2012-10-23T12:03:52.433
> 
> 标签：asp.net-mvc, daypilot

我一直在尝试将 daypilot 添加到我的项目中。

我已经添加了我认为需要的所有代码，但是我遇到的这个错误让我感到困惑。我猜我的 daypilot 版本不兼容？？

我的错误显示在这张照片中。 [http://imageshack.us/photo/my-images/854/mvc3r.png/](http://imageshack.us/photo/my-images/854/mvc3r.png/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:08:07.867

看来您在项目中使用的是 MVC 3.0，而 DayPilot 使用的是 MVC 4.0。将 MVC 包的使用更改为 4.0

# android - 从 xml 更新列表视图的问题

> ID：13030009
> 
> 赞同：0
> 
> 时间：2012-10-23T12:03:54.857
> 
> 标签：android, listview, adapter

我有一个由lazyadapter（baseadpter）从xml文件构建的列表视图

例如：urlxml --> parser ---> baseadapter ---> listview

当我在服务器上修改 xml 文件时，我想刷新列表视图并查看其中的行更改。顺便说一句，我使用 lib“拉刷新”。

当我拉动刷新时，我得到了新行和旧行。

我是否必须先删除 listview 内容并重复此操作：urlxml --> parser ---> baseadapter ---> listview

怎么了？

编辑一些代码

我的适配器

```
public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    ArrayList<ArrayList<String>> data = new ArrayList<ArrayList<String>> ();

    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapter(Activity a,  ArrayList<ArrayList<String>> d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.get(0).size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)

        vi = inflater.inflate(R.layout.elenco_articoli_items, null);

        String Tt = data.get(0).get(position);
        String URl = data.get(1).get(position);

        TextView text=(TextView)vi.findViewById(R.id.title);;
        ImageView image=(ImageView)vi.findViewById(R.id.image);
        text.setText(Html.fromHtml(Tt));
        imageLoader.DisplayImage(URl, image,1);
        return vi;
    }

} 
```

我的主要活动

```
public class Lista_articoli_categoria extends Activity {

    ArrayList<String> images = new ArrayList<String> ();
    ArrayList<String> title = new ArrayList<String> ();
    ArrayList<String> author = new ArrayList<String> ();
    ArrayList<String> description = new ArrayList<String> ();

    private LazyAdapter adapter;
    private RefreshableListView mListView;

    Parser task = new Parser(); 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.elenco_articoli);

        try {

            task.execute();
            final RefreshableListView list = (RefreshableListView) findViewById(R.id.refreshablelistview);    
            adapter= new LazyAdapter(this, fill_data(task.get()));
            mListView = list;   
            list.setAdapter(adapter);
            list.setOnUpdateTask(new OnUpdateTask() {

            public void updateBackground() {
                refresh_data(); 

                try {
                    Thread.sleep(1500);
                    } catch (InterruptedException e) {
                    e.printStackTrace();
                    }
            }

            public void updateUI() {
                    adapter.notifyDataSetChanged();
            }

            public void onUpdateStart() {

            }

            });

        } catch (InterruptedException e) {
                e.printStackTrace();
        } catch (ExecutionException e) {
                e.printStackTrace();
        }

    mListView.setOnItemClickListener(new OnItemClickListener() { 
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) { 
                /*
                TODO     
                */
      }
    });   
}

    @Override
    public void onDestroy()
    {
        mListView.setAdapter(null);
        super.onDestroy();
    }

    public ArrayList<ArrayList<String>> fill_data(ArrayList<Struttura_rss> Datidaxml){

        ArrayList<ArrayList<String>> rec = new ArrayList<ArrayList<String>> ();

           for(int i=0;i<Datidaxml.size();i++){
                    Struttura_rss p = Datidaxml.get(i);
                    title.add(p.getTitle());
                    images.add(p.getImage());
                    description.add(p.getArticolo());
                    author.add(p.getAuthor());
            }           

            rec.add (title);
            rec.add (images);       
            rec.add (description);
            rec.add (author);   

            return rec;
    }

    public void refresh_data(){

        try { 

            Parser task = new Parser(); 
            task.execute();
            adapter= new LazyAdapter(this, fill_data(task.get()));

            } catch (InterruptedException e) {
                e.printStackTrace();
            } catch (ExecutionException e) {
                e.printStackTrace();
            }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:09:58.437

如果你看这个例子，你应该很容易理解......

链接：[https ://github.com/chrisbanes/Android-PullToRefresh/blob/master/sample/src/com/handmark/pullorefresh/samples/PullToRefreshListActivity.java](https://github.com/chrisbanes/Android-PullToRefresh/blob/master/sample/src/com/handmark/pulltorefresh/samples/PullToRefreshListActivity.java)

在刷新时，您只需下载新项目（例如通过向 Web 服务发送时间戳或 id）

```
 @Override
    protected String[] doInBackground(Void... params) {
        // Simulates a background job.
        try {
            //Go to webservice
        } catch (InterruptedException e) {
        }
        return mStrings;
    } 
```

然后，仅解析新项目并将它们添加到此处：

```
 @Override
    protected void onPostExecute(String[] result) {
        mListItems.addFirst("Added after refresh...");
        mAdapter.notifyDataSetChanged();

        // Call onRefreshComplete when the list has been refreshed.
        mPullRefreshListView.onRefreshComplete();

        super.onPostExecute(result);
    } 
```

编辑：如果您不能只下载所需的项目（RSS 提要），请下载 evrything 并在 onPostExecute 中添加正确的项目。

```
if(!isALreadyInTheList(currentItem))
   mListItems.addFirst(currentItem);
else
   doNothing(); 
```

# c# - 开源 3D 几何库？

> ID：13030010
> 
> 赞同：2
> 
> 时间：2012-10-23T12:03:55.710
> 
> 标签：c#, geometry

我正在从事一个个人项目，该项目涉及寻找管子（薄壁圆柱体）的交叉点。它需要我试图在库或示例代码中找到的两个主要数学计算。1) 两条线之间的最小距离。（我已经找到了这个代码） 2）两条线上的两个对应点都最接近另一条线。

我发现很多网站都有关于如何做＃2的数学，但没有任何人实现它的示例代码。

我完全有能力根据数学从头开始编写此代码，但我更希望通过查找可以合并到我的 C# 应用程序中的现有代码来节省几个小时的编码、测试和验证。即使示例使用另一种语言，我也可以将内容移植到 C# 中，这比从头开始编写要快得多。

由于这在很大程度上是一个“已解决的问题”，我认为必须已经存在某种语言的开源库，并且重新发明轮子（并对其进行测试和验证）将是浪费时间。（而且，众所周知，我们可以为“个人项目”从生活中抽出的任何时间都是稀缺而有价值的商品。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:13:48.980

有很多开源库，如果你熟悉宽度javascript，可以试试three.js，有一个实现[https://github.com/mrdoob/three.js/blob/master/src/extras/geometries/CylinderGeometry.js](https://github.com/mrdoob/three.js/blob/master/src/extras/geometries/CylinderGeometry.js)

或者你可以找到一些 ascriptscript 库，比如 papervision3d [http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Cylinder.as](http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Cylinder.as)

# python - Django：如何用 Tastypie 创建对象

> ID：13030012
> 
> 赞同：0
> 
> 时间：2012-10-23T12:03:58.320
> 
> 标签：python, django, tastypie

我有一个与我的 BlogItem 模型一起使用的线程 mptt 评论模型：

```
class MyComment(MPTTModel, Comment):
    parent = TreeForeignKey('self', null=True, blank=True, related_name='children')
    class MPTTMeta:
        order_insertion_by=['-submit_date']
    class Meta:
        ordering=['tree_id','lft'] 
```

对于美味的派，我做了资源

```
class MyCommentResource(ModelResource):

    # i tried to use this commented strings (and of course i created related resources)
    #comment = fields.ForeignKey(CommentRosource, 'comment', null=True, full=True)
    #site = fields.ForeignKey(SiteResource, 'site', null=True, full=True)
    #content_type = fields.ForeignKey(ContentTypeResource, 'content_type', null=True, full=True)
    #children = fields.ToManyField('self', 'children', null=True, full=True)
    #content_object = GenericForeignKeyField({BlogItem: BlogItemResource}, 'content_object', null=True, full=True)

    class Meta:
        queryset = MyComment.objects.filter(level=0)
        resource_name = 'myComment'
        include_resource_uri = False
        allowed_methods = ['get', 'post', 'put']
        include_resource_uri = False
        filtering = {
            'object_pk': ALL,
            'level': ALL
        }
        authorization= Authorization() 
```

之后，我为 MyComment 模型的 GET 请求提供了工作 api（我可以看到所有评论（评论者的姓名、评论文本、mptt 级别、分页等）

但是当我尝试制作curl（或js）erquest时：

```
curl --dump-header - -H "Content-Type: application/json" -X POST --data '{"comment":"sdfsdfsdf"}' http://myhostname.com:80/api/v1/myComment/ > /tmp/err.html 
```

我收到错误“当前事务已中止，命令在事务块结束之前被忽略”或其他错误（“DoesNotExist at /api/v1/myComment/ 未提供异常”、“无法分配无：“MyComment.content_type”不允许 null值。” - 但在请求中我 POST {"content_type":{"id":"15"}} 或链接到我的 api 中的 content_type 也很好用）。

对于其他更简单的模型（没有通用关系，但使用 ForeignKeys）我可以发出 curl 请求并获得“201 created”响应，所以我认为我有与“generic”评论模型相关的错误

我做错了吗？是否有任何文档或手册-如何通过tastepie为“通用”模型创建对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:14:28.917

如果您使用的是内置`Comment`模型，则 then`GenericForeignKey`不可为空，这会引发您看到的异常。您的`GenericForeignKeyField`资源上的 指定`null=True`，导致 Tastypie 允许将空值传递给 ORM。

`GenericForeignKeyField`您可以通过它的 resource_uri指定一个值，例如`{"comment":"sdfsdfsdf", "content_object": "/api/v1/blog_item/1/"}`.

# php - 计算 mysql join 、 union >= 和 <= 中匹配条件的行数？

> ID：13030013
> 
> 赞同：0
> 
> 时间：2012-10-23T12:04:01.207
> 
> 标签：php, mysql, join, union

```
Select * FROM table WHERE a<=9 AND a>=4 AND b<=20 AND b>=16 AND c<=30 AND c>=26 
```

现在我想最终从查询 1 中选择至少满足以下两个条件的结果。

```
Select * FROM table WHERE a<=7 AND a>=5 AND B<=19 AND B>=17 AND C<=29 AND c>=27 
```

数字可以是任何数字，尽管在查询 2 中，小于等于的数字较低，大于等于的数字较高。

我希望能够用一个数字设置查询 2 中要满足的最小重合数。例如，查询 2 必须满足 5 个重合才能最终在查询 1 中进行选择。

如果有更简单的方法来实现这一目标，这与范围和匹配计数有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:32:50.980

尝试使用本机 MySQL 函数[BEETWEN](http://dev.mysql.com/doc/refman/5.0/en/range-optimization.html)：

```
SELECT * FROM t1 WHERE key_col BETWEEN '2' AND '3'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:37:23.013

认为第二个查询是这样的：-

```
Select *, CASE WHEN a<=7 THEN 1 ELSE 0 END + CASE WHEN  a>=5 THEN 1 ELSE 0 END + CASE WHEN B<=19 THEN 1 ELSE 0 END + CASE WHEN B>=17 THEN 1 ELSE 0 END + CASE WHEN C<=29 THEN 1 ELSE 0 END + CASE WHEN c>=27 THEN 1 ELSE 0 END AS MatchCount
FROM table 
WHERE a<=7 
OR a>=5 
OR B<=19 
OR B>=17 
OR C<=29 
OR c>=27
HAVING MatchCount >= 2 
```

可能使用第一个查询作为子选择而不是表。

编辑-阅读您的最新回复，我想我误解了您的要求。但是，您可能会找到每个值之间的差异，获取每个差异的绝对值并将它们加在一起以查看差异的接近/远近。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:39:46.740

我认为这种查询会完成你的工作

```
Select 
*,
(IF(a<=7 AND a>=5,1,0) + IF(B<=19 AND B>=17,1,0) + IF(C<=29 AND c>=27,1,0))
as totalmatch
FROM table
HAVING totalmatch >=2 
```

# php - 使用标题内容在 PHP 上下载创建的没有对话框的 Excel 文件

> ID：13030017
> 
> 赞同：0
> 
> 时间：2012-10-23T12:04:14.153
> 
> 标签：php, header, download

谁能知道我如何在不显示对话框（打开/保存）的情况下强制下载文件。下面的代码是我下载创建的 excel 文件的测试脚本，但出现下载文件的对话框。

```
$filename ="excelreport.xls";
$contents = "testdata1 \t testdata2 \t testdata3 \t \n";
header('Content-type: application/ms-excel');
header('Content-Disposition: attachment; filename='.$filename);
echo $contents; 
```

我想在没有对话框的情况下自动下载文件并将其保存在指定目录中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:08:23.623

您可以强制下载而不是显示它，但我认为通常无法强制浏览器在没有提示的情况下下载它

```
// fix for IE catching or PHP bug issue
header("Pragma: public");
header("Expires: 0"); // set expiration time
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
// browser must download file from server instead of cache

// force download dialog
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download"); 
```

来源：[php.net](http://php.net/manual/en/function.header.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:09:57.420

出于安全原因，您不能这样做。

# java - 推土机映射：NoSuchMethodException

> ID：13030020
> 
> 赞同：4
> 
> 时间：2012-10-23T12:04:21.747
> 
> 标签：java, spring, portlet, dozer

我正在尝试使用推土机映射将一种类型转换为另一种类型。我已经定义了一些像这样的bean：

```
public class OneBean extends TwoBean {

    private static final long serialVersionUID = 1L;

    public OneBean() {
    }

    private Short idOne;

   public final Short getIdOne() {
        return idOne;
    }

    public final void setIdOne(Short idOne) {
        this.idOne = idOne;
    }
}

public class TwoBean extends ThreeBean{

    private static final long serialVersionUID = 1L;

    public TwoBean() {
    }

    private Short idTwo;

   public final Short getIdTwo() {
        return idTwo;
    }

    public final void setIdTwo(Short idTwo) {
        this.idTwo = idTwo;
    }
}
public class ThreeBean  {

    private static final long serialVersionUID = 1L;

    public ThreeBean() {
    }

    private Short idThree;

    public final Short getIdThree() {
        return idThree;
    }

    public final void setIdThree(Short idThree) {
        this.idThree = idThree;
    }
}

public class OneTypeBean extends TwoTypeBean {

    private static final long serialVersionUID = 1L;

    public OneTypeBean() {
    }

    private Short idOne;

    public final Short getIdOne() {
        return idOne;
    }

    public final void setIdOne(Short idOne) {
        this.idOne = idOne;
    }
}

public class TwoTypeBean {

    private static final long serialVersionUID = 1L;

    public TwoTypeBean() {
    }

    private Short idTwo;
    private Short idThree;

    public final Short getIdTwo() {
        return idTwo;
    }

    public final void setIdTwo(Short idTwo) {
        this.idTwo = idTwo;
    }

    public final Short getIdThree() {
        return idThree;
    }

    public final void setIdThree(Short idThree) {
        this.idThree = idThree;
    }

} 
```

推土机文件是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<mappings xmlns="http://dozer.sourceforge.net"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="
        http://dozer.sourceforge.net 
        http://dozer.sourceforge.net/schema/beanmapping.xsd">

    <mapping>
        <class-a>mypackage.TwoTypeBean</class-a>
        <class-b>mypackage.TwoBean</class-b>
        <field>
            <a>idTwo</a>
            <b>idTwo</b>
        </field>
        <field>
            <a>idThree</a>
            <b>idThree</b>
        </field>
    </mapping>
    <mapping>
        <class-a>mypackage.OneTypeBean</class-a>
        <class-b>mypackage.OneBean</class-b>
        <field>
            <a>idOne</a>
            <b>idOne</b>
        </field>
    </mapping>
</mappings> 
```

然后，我尝试在 OneTypeBean 对象中转换 OneBean 对象，如下所示：

```
private OneTypeBean convertBeanToType(TwoBean twoBean) {

    if (twoBean instanceof OneBean) { 
        //OneBean one = (OneBean) twoBean;
        return convert(twoBean, OneTypeBean.class);
    }
} 
```

在我看来一切都很好（可能是层次结构的问题？？），但是，我发现了这个错误：

```
 [#|2012-10-23T12:45:45.542+0000|INFO|sun-appserver2.1|javax.enterprise.system.stream.out|_ThreadID=32;_ThreadName=httpSSLWorkerThread-8080-4;|un.enterprise.web.connector.grizzly.DefaultProcessorTask.process(DefaultProcessorTask.java:872)
    at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.executeProcessorTask(DefaultReadTask.java:341)
    at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.doTask(DefaultReadTask.java:263)
    at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.doTask(DefaultReadTask.java:214)
    at com.sun.enterprise.web.connector.grizzly.TaskBase.run(TaskBase.java:264)
    at com.sun.enterprise.web.connector.grizzly.ssl.SSLWorkerThread.run(SSLWorkerThread.java:106)
Caused by: org.dozer.MappingException: java.lang.NoSuchMethodException: [B.<init>()
    at org.dozer.util.MappingUtils.throwMappingException(MappingUtils.java:82)
    at org.dozer.factory.ConstructionStrategies$ByConstructor.newInstance(ConstructionStrategies.java:261)
    at org.dozer.factory.ConstructionStrategies$ByConstructor.create(ConstructionStrategies.java:245)
    at org.dozer.factory.DestBeanCreator.create(DestBeanCreator.java:65)
    at org.dozer.MappingProcessor.mapCustomObject(MappingProcessor.java:477)
    at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:434)
    at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:330)
    at org.dozer.MappingProcessor.mapField(MappingProcessor.java:276)
    at org.dozer.MappingProcessor.map(MappingProcessor.java:245)
    at org.dozer.MappingProcessor.processSuperTypeMapping(MappingProcessor.java:999)
    at org.dozer.MappingProcessor.map(MappingProcessor.java:234)
    at org.dozer.MappingProcessor.map(MappingProcessor.java:187)
    at org.dozer.MappingProcessor.map(MappingProcessor.java:124)
    at org.dozer.MappingProcessor.map(MappingProcessor.java:119)
    at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:111)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:362)
    at org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter.doHandle(AnnotationMethodHandlerAdapter.java:349)
    at org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter.handleAction(AnnotationMethodHandlerAdapter.java:283)
    at org.springframework.web.portlet.DispatcherPortlet.doActionService(DispatcherPortlet.java:641)
    at org.springframework.web.portlet.FrameworkPortlet.processRequest(FrameworkPortlet.java:519)
    at org.springframework.web.portlet.FrameworkPortlet.processAction(FrameworkPortlet.java:460)
    at com.sun.portal.portletcontainer.appengine.PortletAppEngineServlet.service(PortletAppEngineServlet.java:264)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.ApplicationFilterChain.servletService(ApplicationFilterChain.java:427)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:333)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214)
    at com.sun.portal.portletcontainer.appengine.PortletAppEngineFilter.doFilter(PortletAppEngineFilter.java:105)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:246)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214)
    at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:871)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:723)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:679)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:594)
    at com.sun.portal.portletcontainer.impl.PortletContainer.invokePAE(PortletContainer.java:819)
    at com.sun.portal.portletcontainer.impl.PortletContainer.invokePAE(PortletContainer.java:694)
    at com.sun.portal.portletcontainer.impl.PortletContainer.executeAction(PortletContainer.java:339)
    at com.liferay.portal.portletcontainer.WindowInvoker.invokeAction(WindowInvoker.java:267)
    at com.liferay.portlet.InvokerPortletImpl.processAction(InvokerPortletImpl.java:357)
    at com.liferay.portal.action.LayoutAction.processPortletRequest(LayoutAction.java:591)
    at com.liferay.portal.action.LayoutAction.processLayout(LayoutAction.java:419)
    ... 96 more
Caused by: java.lang.NoSuchMethodException: [B.<init>()
    at java.lang.Class.getConstructor0(Class.java:2706)
    at java.lang.Class.getDeclaredConstructor(Class.java:1985)
    at org.dozer.factory.ConstructionStrategies$ByConstructor.newInstance(ConstructionStrategies.java:257)
    ... 146 more

|#] 
```

我不知道我还能做什么，我找不到错误。任何帮助..？谢谢！

编辑：

正如我在[http://dozer.sourceforge.net/documentation/baseattributes.html](http://dozer.sourceforge.net/documentation/baseattributes.html)中看到的，也许我应该把我的推土机换成这样的东西......

仍然没有工作，但正在进行中......

```
<?xml version="1.0" encoding="UTF-8"?>
<mappings xmlns="http://dozer.sourceforge.net"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="
        http://dozer.sourceforge.net 
        http://dozer.sourceforge.net/schema/beanmapping.xsd">

    <mapping>
        <class-a>mypackage.TwoTypeBean</class-a>
        <class-b>mypackage.ThreeBean</class-b>
        <field>
            <a>idThree</a>
            <b>idThree</b>
        </field>
    </mapping>
    <mapping>
        <class-a>mypackage.OneTypeBean</class-a>
        <class-b>mypackage.OneBean</class-b>
        <field>
            <a>idTwo</a>
            <b>idTwo</b>
        </field>
        <field>
            <a>idOne</a>
            <b>idOne</b>
        </field>
    </mapping>
</mappings> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T12:11:39.133

这里报告了一个类似的问题，也许它可以帮助你： - [java.lang.NoSuchMethodException](http://forums.bukkit.org/threads/java-lang-nosuchmethodexception.27744/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:32:59.077

答案是我在问题中编辑的那个：

正如我在[http://dozer.sourceforge.net/documentation/baseattributes.html](http://dozer.sourceforge.net/documentation/baseattributes.html)中看到的，我应该把我的推土机换成这样的东西......

```
 <?xml version="1.0" encoding="UTF-8"?>
 <mappings xmlns="http://dozer.sourceforge.net"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="
    http://dozer.sourceforge.net 
    http://dozer.sourceforge.net/schema/beanmapping.xsd">

<mapping>
    <class-a>mypackage.TwoTypeBean</class-a>
    <class-b>mypackage.ThreeBean</class-b>
    <field>
        <a>idThree</a>
        <b>idThree</b>
    </field>
</mapping>
<mapping>
    <class-a>mypackage.OneTypeBean</class-a>
    <class-b>mypackage.OneBean</class-b>
    <field>
        <a>idTwo</a>
        <b>idTwo</b>
    </field>
    <field>
        <a>idOne</a>
        <b>idOne</b>
    </field>
</mapping> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-07T23:07:40.927

将 Dozer bean 映射器与 SOAP Web 服务一起使用时，我遇到了同样的问题。将文件附加到 SOAP 请求时出现问题。因为我只使用 bean mapper 来重定向请求，并且源对象可以被修改并没有打扰我，所以我通过声明类型转换器将原始引用作为副本返回（当前如果在 Dozer 中指定的转换器它优先于其他构造方法 - 我必须检查内部推土机逻辑）。

映射文件：

```
 <mappings xmlns="http://dozer.sourceforge.net" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://dozer.sourceforge.net
              http://dozer.sourceforge.net/schema/beanmapping.xsd">
        <configuration>
            <custom-converters> 
                <converter type="mypackage.DataHandlerCopyRefConverter">
                    <class-a>javax.activation.DataHandler</class-a>
                    <class-b>javax.activation.DataHandler</class-b>
                </converter>
            </custom-converters>
        </configuration>
    </mappings> 
```

转换器来源：

```
public class DataHandlerCopyRefConverter implements CustomConverter {

    @Override
    public Object convert(Object existingDestinationFieldValue,
            Object sourceFieldValue, Class<?> destinationClass,
            Class<?> sourceClass) {
        return sourceFieldValue;
    }
} 
```

警告！DataHandler 是临时资源，不利于克隆和序列化。

# c# - 如何在gridview中添加一行（动态）

> ID：13030021
> 
> 赞同：1
> 
> 时间：2012-10-23T12:04:33.400
> 
> 标签：c#, .net

大家晚上好。我有一个小问题。我有一个 gridview（id 是 gridview1）并将它与数组列表对象绑定。我的 gridview1 有 15 列。我想在我的网格视图中添加一个动态行，因为我想要在更改 ponumber 列（这是 gridview1 中的列）后显示金额列（gridview1 中的此列）的总数。

像这个 ponumber 数量 1 23

## 1 25

## 共 48 个

2 45

## 2 65

总计 110

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:10:31.953

有几种方法可以做到这一点。您可以修改数据源以进行子分组。您可以在 GridView 的 OnDataBound 事件上插入一些自定义数据。或者您可以使用 ASP 中继器并使用 's 和 's 写出您自己的表结构

另外，这家伙问了一个[类似的问题](https://stackoverflow.com/questions/10024761/total-up-subtotal-in-gridview)，并在动态构建自己的 GridView 上得到了很好的答案

# sql-server-2008 - 使用稀疏列而不是普通关系表有什么风险？

> ID：13030023
> 
> 赞同：1
> 
> 时间：2012-10-23T12:04:40.530
> 
> 标签：sql-server-2008, database-design, database-deployment, sparse-columns

我有三个与一个表相关的表，在我的新设计中，我想通过使用稀疏列来替换关系。你可以看下图。

![在此处输入图像描述](../Images/6a9673014148407cbc9e18f512ed98cb.png)

我知道我会有冗余。但我想知道这种设计方式的其他风险是什么？通过这种新方式，我的查询将非常简单快捷。您对此有何想法？抱歉我的英语不好，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:23:36.107

如果在三个附属表（出席、信用、replacedetail）中每个 wfdoc.id 只有一个条目，那么您的新设计是可能的，尽管会浪费磁盘空间。但是，如果一个 wfdoc.id 的出勤表中可能有多个条目，那么这是一个非常糟糕的主意。

# facebook-php-sdk - 如何在 Zend Framework 2 中使用 Facebook PHP SDK

> ID：13030026
> 
> 赞同：1
> 
> 时间：2012-10-23T12:04:43.947
> 
> 标签：facebook-php-sdk, zend-framework2

我希望能够将 Facebook PHP SDK 与新的 ZEND Framework 2 平台一起使用。怎么做？

Zend Framework 2 与以前的版本 ZF1 完全不同。

当我在主应用程序控制器 IndexController' 中尝试标准 PHP 时：

```
require_once("facebook.php");

class IndexController extends AbstractActionController
{

    public $facebook;

    public function  __construct() {

        $this->facebook = new Facebook(array(
                'appId'  => 'appId',
                'secret' => 'secret_key'
        ));

    }

    /*
    ...
    */

} 
```

我收到以下错误：致命错误：无法在第 160 行的 /../module/Application/src/Application/Controller/Facebook.php 中重新声明类 Facebook

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:46:09.563

根据该错误消息，问题是您现在在该名称空间中有两个名为 Facebook 的类。尝试确保您只有一门名为 Facebook 的课程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T09:50:12.580

当我需要在 ZF2 应用程序中包含 Facebook SDK 时，我遇到了同样的问题。

您不需要为 FB SDK 集成使用任何额外的模块。诀窍是在 ClassMapAutoloader 中包含 facebook 库，例如：

```
array(
    'Facebook' => 'vendor/FB/facebook.php',
) 
```

详细说明在[这里](http://www.loneshooter.com/zend-framework-2-how-to-use-facebook-php-sdk/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:48:22.287

我无法具体帮助您了解 ZF1 和 ZF2 之间的区别，但在 google 中进行的简单搜索给了我[这个结果](https://github.com/widmogrod/zf2-facebook-module)，我认为因为 ZF 自动加载类并且您试图再次要求它，所以它们是冲突的。

# r - 匹配模式以选择正确的绘图颜色

> ID：13030031
> 
> 赞同：0
> 
> 时间：2012-10-23T12:04:57.693
> 
> 标签：r, hierarchical-clustering

当我对我的数据进行聚类时，我遇到了一个问题。我想按疾病类型为集群的分支着色。所以我写了一个应该为我做这件事的小脚本。

```
col.int<-c("green","red","blue","deeppink")[match(fit$labels,c(".SPORADIC",".HNPCC_UV",".NA_FAM",".MUTYH"))] 
```

但问题在于，`fit$labels`它不仅仅包含疾病类型，即患者 ID。因此，如果我尝试将 SPORADIC 与我的标签名称匹配，我只会得到 NA 值。所以我想知道如何告诉脚本它应该在标签中寻找一个模式，而不是匹配整个标签名称。

Mydata 如下所示：

```
structure(list(merge = structure(c(-1L, -2L, -26L, -32L, -40L, 
-50L, -76L, -81L, -84L, -96L, -3L, -55L, -56L, -72L, -5L, -17L, 
-19L, -27L, -36L, -37L, -42L, -44L, -54L, -67L, -85L, -87L, -90L, 
-185L, -6L, -33L, -38L, -58L, -63L, -69L, -94L, -115L, -7L, -35L, 
-75L, -83L, -10L, -14L, -112L, -15L, -20L, -49L, -65L, -68L, 
-105L, -22L, -60L, -78L, -206L, -24L, -64L, -80L, -118L, -29L, 
-30L, -77L, -163L, -31L, -86L, -97L, -98L, -103L, -109L, -141L, 
-187L, -198L, -204L, -41L, -43L, -52L, -70L, -79L, -101L, -116L, 
-92L, -95L, -121L, -161L, -125L, -145L, -193L, -216L, -127L, 
-162L, -181L, -133L, -140L, -164L, -167L, -174L, -188L, -102L, 
-214L, -12L, -170L, -156L, -104L, -11L, -142L, -202L, -53L, -51L, 
-155L, -89L, -180L, -34L, -113L, -46L, -120L, 89L, -136L, 41L, 
71L, -173L, -93L, -23L, -154L, -137L, 36L, 78L, -74L, -194L, 
79L, -111L, 86L, -28L, 61L, -110L, -178L, 10L, -117L, -4L, -150L, 
115L, 93L, 58L, 108L, -138L, -114L, 113L, -168L, -39L, -186L, 
80L, 82L, -130L, -82L, -147L, -191L, 138L, 124L, 122L, -132L, 
-200L, -106L, -189L, 92L, -176L, 120L, -160L, -48L, 106L, -124L, 
126L, -165L, -171L, -179L, 129L, 148L, -100L, 1L, 98L, -131L, 
-158L, -196L, -182L, -9L, 137L, -159L, 157L, 149L, -152L, 152L, 
-126L, -128L, 153L, 150L, 163L, 180L, 156L, 160L, -157L, 107L, 
162L, 164L, 182L, 112L, 195L, 196L, 159L, 183L, 181L, 202L, 199L, 
191L, 206L, 200L, 204L, 184L, 203L, 212L, -177L, -21L, 2L, 3L, 
4L, 5L, 6L, 7L, 8L, 9L, -25L, 11L, 12L, 13L, -8L, 15L, 16L, 17L, 
18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, -18L, 29L, 
30L, 31L, 32L, 33L, 34L, 35L, -13L, 37L, 38L, 39L, -88L, -73L, 
42L, -16L, -45L, 45L, 46L, 47L, 48L, -59L, 50L, 51L, 52L, -47L, 
54L, 55L, 56L, -99L, -62L, 59L, 60L, -66L, 62L, 63L, 64L, 65L, 
66L, 67L, 68L, 69L, 70L, -57L, -61L, -108L, -203L, -91L, 76L, 
77L, -119L, -212L, -122L, 81L, -144L, 83L, 84L, 85L, -134L, 87L, 
88L, -148L, -143L, -169L, -197L, -213L, -201L, 49L, 44L, -135L, 
94L, 53L, 28L, -192L, 72L, 75L, -215L, -183L, 14L, -153L, 57L, 
-71L, -172L, -139L, 40L, 95L, -184L, 74L, 91L, -175L, -107L, 
-211L, 97L, 102L, 109L, 101L, -149L, 90L, 116L, 110L, 99L, -208L, 
121L, 103L, 118L, 73L, -123L, 131L, -207L, 117L, 123L, 96L, 136L, 
114L, 43L, 127L, -205L, -210L, 133L, 104L, 139L, 143L, 134L, 
-195L, 132L, 142L, 125L, 130L, 145L, 146L, 140L, -190L, 100L, 
-199L, 141L, -166L, -151L, 144L, 135L, 147L, 111L, 165L, 119L, 
154L, 151L, 128L, 105L, 166L, 171L, 176L, 169L, -209L, 174L, 
161L, 167L, 172L, 155L, 158L, 170L, -129L, -146L, 168L, 173L, 
185L, 186L, 192L, 188L, 177L, 178L, 179L, 189L, 190L, 175L, 198L, 
201L, 197L, 187L, 193L, 205L, 207L, 194L, 209L, 208L, 210L, 211L, 
213L, 214L), .Dim = c(215L, 2L)), height = c(0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0.00359389038634323, 0.00406394236181465, 0.00649350649350644, 
0.00912375832219081, 0.00925925925925927, 0.0118483412322275, 
0.0145454545454545, 0.0152885509601333, 0.0166566286517327, 0.0186046511627908, 
0.0208333333333334, 0.0209267563527653, 0.0214132762312634, 0.0224057413681743, 
0.0228571428571429, 0.0256410256410257, 0.025974025974026, 0.0294117647058824, 
0.0327645443307275, 0.0328947368421053, 0.0331603326665965, 0.0356567259715686, 
0.0443686006825939, 0.0475, 0.0484094052558783, 0.0518796353224032, 
0.0534487053706255, 0.0547077905882575, 0.0563718734450903, 0.0578231292517006, 
0.0613830613830613, 0.0622751723057615, 0.0634920634920635, 0.0644327567295862, 
0.0658682634730539, 0.0668128430870732, 0.0705853974392098, 0.0751236471810454, 
0.0791918615118165, 0.0814814814814815, 0.0840010548320977, 0.0875912408759124, 
0.0936648591902225, 0.0952071705226908, 0.0975452599352908, 0.101868037484979, 
0.107997171744147, 0.109056860742254, 0.11559433104575, 0.119804400977995, 
0.124629080118694, 0.140933816340968, 0.14179814636445, 0.163254725744272, 
0.163300668687379, 0.164550876331996, 0.17258883248731, 0.1728731431966, 
0.181699994974325, 0.183783241609719, 0.189923527478743, 0.193719375296218, 
0.197832447740333, 0.211200790020614, 0.211416490486258, 0.213745390488226, 
0.214849921011058, 0.215913282172105, 0.234806629834254, 0.242424242424242, 
0.246066211608438, 0.246427111438149, 0.24999095127792, 0.252724927051683, 
0.255913595401057, 0.274475840696771, 0.286483762400918, 0.287176198199807, 
0.303808873276086, 0.306025671419987, 0.328412033190212, 0.332126921889894, 
0.341734154210338, 0.34176559352234, 0.37150466045273, 0.376790317416398, 
0.381977523157772, 0.382997925922382, 0.384551895299024, 0.386213122564166, 
0.393014885652478, 0.400243405117492, 0.406593406593407, 0.432671081677704, 
0.44812132458409, 0.46358985724391, 0.513662061556124, 0.536640659139735, 
0.550285636317328, 0.602127569602188, 0.631010533104603, 0.698728773010427, 
0.72360776175643, 0.787536353244465, 0.7988812719814, 0.814115072824207, 
0.853874433030377, 0.917561212603516, 0.940247780670057, 0.943630213146685, 
1.07562939731944, 1.21827776986843, 1.34271282928207, 1.55806846198326, 
1.81384209156158, 2.12412215470848, 2.89211680358764, 3.37020319658011, 
10.5520617141179, 59.8855594110458), order = c(106L, 29L, 99L, 
102L, 105L, 68L, 65L, 49L, 20L, 45L, 155L, 72L, 56L, 55L, 3L, 
25L, 158L, 12L, 135L, 51L, 183L, 120L, 83L, 75L, 35L, 7L, 13L, 
92L, 119L, 10L, 88L, 52L, 108L, 9L, 100L, 111L, 34L, 71L, 182L, 
209L, 152L, 200L, 39L, 210L, 130L, 114L, 112L, 14L, 73L, 95L, 
212L, 202L, 70L, 203L, 82L, 96L, 84L, 81L, 76L, 50L, 40L, 32L, 
26L, 2L, 21L, 43L, 61L, 137L, 11L, 192L, 28L, 208L, 23L, 211L, 
89L, 153L, 4L, 163L, 77L, 30L, 62L, 154L, 214L, 15L, 16L, 161L, 
121L, 122L, 167L, 197L, 115L, 94L, 69L, 63L, 58L, 38L, 33L, 6L, 
18L, 180L, 118L, 80L, 64L, 24L, 47L, 116L, 101L, 79L, 91L, 104L, 
185L, 90L, 87L, 85L, 67L, 54L, 44L, 42L, 37L, 36L, 27L, 19L, 
17L, 5L, 8L, 74L, 149L, 157L, 131L, 179L, 93L, 107L, 46L, 139L, 
1L, 177L, 53L, 215L, 132L, 168L, 205L, 216L, 193L, 145L, 125L, 
144L, 170L, 174L, 213L, 136L, 184L, 204L, 198L, 187L, 141L, 109L, 
103L, 98L, 97L, 86L, 31L, 66L, 140L, 143L, 138L, 181L, 162L, 
127L, 134L, 188L, 201L, 150L, 207L, 164L, 169L, 156L, 206L, 78L, 
60L, 22L, 59L, 191L, 110L, 142L, 41L, 57L, 194L, 133L, 148L, 
186L, 178L, 173L, 175L, 160L, 166L, 128L, 146L, 189L, 190L, 126L, 
129L, 176L, 199L, 196L, 165L, 113L, 172L, 159L, 124L, 117L, 123L, 
147L, 195L, 171L, 48L, 151L), labels = c("00_11242T1 MUTYH", 
"01_677T HNPCC_UV", "106T SPORADIC", "106TV SPORADIC", "108T SPORADIC", 
"108TV SPORADIC", "124T SPORADIC", "124TV SPORADIC", "40T SPORADIC", 
"44T SPORADIC", "44TV SPORADIC", "511T SPORADIC", "511TV SPORADIC", 
"514T SPORADIC", "514TV SPORADIC", "56T SPORADIC", "92_11145T HNPCC_UV", 
"95_549T HNPCC_UV", "97_12714T1 MUTYH", "97_7999T HNPCC_UV", 
"97_8073T2 MUTYH", "99_2221T HNPCC_UV", "R01_80418T2 NA_FAM", 
"R01_81197T HNPCC_UV", "R02_80456T2 MUTYH", "R03_80586T HNPCC_UV", 
"R04_80227T NA_FAM", "R04_80577T NA_FAM", "R04_80584T HNPCC_UV", 
"R04_81371T NA_FAM", "R04_81372T1 NA_FAM", "R04_81449T NA_FAM", 
"R05_80481T NA_FAM", "R05_80611T NA_FAM", "00-04193T HNPCC_UV", 
"00-06583T HNPCC_UV", "00-06969T HNPCC_UV", "00-09107T HNPCC_UV", 
"00-10221T HNPCC_UV", "00-11063T HNPCC_UV", "00-11960T HNPCC_UV", 
"00-11963T HNPCC_UV", "00134T HNPCC_UV", "01-01171T HNPCC_UV", 
"03-05270T HNPCC_UV", "16924T1 MUTYH", "08731T6 MUTYH", "18250T1 MUTYH", 
"20699T1 MUTYH", "20699T2 MUTYH", "4497T1 MUTYH", "4497T4 MUTYH", 
"6103T MUTYH", "80-4124T1 MUTYH", "80456T1 MUTYH", "80456T2 MUTYH", 
"90-5023T1 MUTYH", "90-5023T2 MUTYH", "90-5023T3 MUTYH", "90-5023T4 MUTYH", 
"93-03554T HNPCC_UV", "93-7083T MUTYH", "95-16316T HNPCC_UV", 
"95-5959T HNPCC_UV", "97_8073T1 MUTYH", "97-07999T HNPCC_UV", 
"97-4772T2 MUTYH", "97-4772T8 MUTYH", "97-5332T1 MUTYH", "97-5332T2 MUTYH", 
"98-04559T HNPCC_UV", "98-11489T HNPCC_UV", "99-01796T HNPCC_UV", 
"99-02872T1 HNPCC_UV", "99-02872T2 HNPCC_UV", "99-10411T HNPCC_UV", 
"99-10647T2 HNPCC_UV", "H04-00107T HNPCC_UV", "R01-80145T HNPCC_UV", 
"R01-80242T HNPCC_UV", "R01-80377T HNPCC_UV", "R01-80499T HNPCC_UV", 
"R01-80748T HNPCC_UV", "R02-80670T HNPCC_UV", "R02-80744T HNPCC_UV", 
"R02-80813T HNPCC_UV", "R02-81415T1 HNPCC_UV", "R02-81415T2 HNPCC_UV", 
"R02-81709T HNPCC_UV", "R03-80064T HNPCC_UV", "R03-80732T HNPCC_UV", 
"R04-80248T1 NA_FAM", "R04-80248T2 NA_FAM", "R04-80575T NA_FAM", 
"R04-80576T1 NA_FAM", "R04-80576T2 NA_FAM", "R04-80599T2 NA_FAM", 
"R04-80599T3 NA_FAM", "R04-80599T4 NA_FAM", "R04-81767T1 NA_FAM", 
"R05-80533T NA_FAM", "R05-80546T NA_FAM", "R05-80824T HNPCC_UV", 
"t00-21127C2 SPORADIC", "t01-11711A3 SPORADIC", "t01-11711C2 SPORADIC", 
"t01-12237A3C1 SPORADIC", "t01-12237C2 SPORADIC", "t02-10005A1 SPORADIC", 
"t02-10005C2 SPORADIC", "t02-15497A2A3 SPORADIC", "t02-15497C2 SPORADIC", 
"t02-16230A1/2/3 SPORADIC", "t02-16230C2 SPORADIC", "t02-29970A3 SPORADIC", 
"t02-29970C2 SPORADIC", "t03-07016A1A2 SPORADIC", "t03-07016C1 SPORADIC", 
"t03-26385A3 SPORADIC", "t03-26385C1C2 SPORADIC", "t05-26388A2A3 SPORADIC", 
"t05-26388C2 SPORADIC", "t05-35275A2 SPORADIC", "t05-35275C2 SPORADIC", 
"GSM288035 SPORADIC", "GSM288037 SPORADIC", "GSM288039 SPORADIC", 
"GSM288041 SPORADIC", "GSM288043 SPORADIC", "GSM288045 SPORADIC", 
"GSM288047 SPORADIC", "GSM288049 SPORADIC", "GSM288051 SPORADIC", 
"GSM288053 SPORADIC", "GSM288055 SPORADIC", "GSM288057 SPORADIC", 
"GSM288059 SPORADIC", "GSM288061 SPORADIC", "GSM288063 SPORADIC", 
"GSM288065 SPORADIC", "GSM288067 SPORADIC", "GSM288069 SPORADIC", 
"GSM288071 SPORADIC", "GSM288073 SPORADIC", "GSM288075 SPORADIC", 
"GSM288077 SPORADIC", "GSM288079 SPORADIC", "GSM288081 SPORADIC", 
"GSM288083 SPORADIC", "GSM288085 SPORADIC", "GSM288089 SPORADIC", 
"GSM288091 SPORADIC", "GSM288093 SPORADIC", "GSM288095 SPORADIC", 
"GSM288097 SPORADIC", "GSM288099 SPORADIC", "GSM288101 SPORADIC", 
"GSM288103 SPORADIC", "GSM288105 SPORADIC", "GSM288107 SPORADIC", 
"GSM288109 SPORADIC", "GSM288111 SPORADIC", "GSM288113 SPORADIC", 
"GSM288115 SPORADIC", "GSM288117 SPORADIC", "GSM288119 SPORADIC", 
"GSM288121 SPORADIC", "GSM288123 SPORADIC", "GSM288125 SPORADIC", 
"GSM288127 SPORADIC", "GSM288129 SPORADIC", "GSM288131 SPORADIC", 
"GSM288133 SPORADIC", "GSM288135 SPORADIC", "GSM288137 SPORADIC", 
"GSM288139 SPORADIC", "GSM288141 SPORADIC", "GSM288143 SPORADIC", 
"GSM288145 SPORADIC", "GSM288147 SPORADIC", "GSM288149 SPORADIC", 
"GSM288151 SPORADIC", "GSM288153 SPORADIC", "GSM288155 SPORADIC", 
"GSM288157 SPORADIC", "GSM288159 SPORADIC", "GSM288161 SPORADIC", 
"GSM288163 SPORADIC", "GSM288165 SPORADIC", "GSM288167 SPORADIC", 
"GSM288169 SPORADIC", "GSM288171 SPORADIC", "GSM288173 SPORADIC", 
"GSM288175 SPORADIC", "GSM288177 SPORADIC", "GSM288179 SPORADIC", 
"GSM288181 SPORADIC", "GSM288183 SPORADIC", "GSM288185 SPORADIC", 
"GSM288189 SPORADIC", "GSM288191 SPORADIC", "GSM288193 SPORADIC", 
"GSM288195 SPORADIC", "GSM288197 SPORADIC", "GSM288199 SPORADIC", 
"GSM288201 SPORADIC", "GSM288203 SPORADIC", "GSM288205 SPORADIC", 
"GSM288207 SPORADIC", "GSM288209 SPORADIC", "GSM288211 SPORADIC", 
"GSM288213 SPORADIC", "GSM288215 SPORADIC", "GSM288217 SPORADIC", 
"GSM288219 SPORADIC", "GSM288221 SPORADIC"), method = "ward", 
    call = hclust(d = a, method = "ward"), dist.method = NULL), .Names = c("merge", 
"height", "order", "labels", "method", "call", "dist.method"), class = "hclust") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:15:37.677

它似乎`match`无法处理正则表达式（我假设`.`in`".SPORADIC"`是用于），但我们可以做一个解决方法并用它来修剪样本名称`sub`。

```
match(sub("^.*?([A-Z]+)$", "\\1", fit$labels),
      c(".SPORADIC",".HNPCC_UV",".NA_FAM",".MUTYH")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T13:14:31.947

嗯，使用 grepl：

```
 col.int <- ifelse(grepl("SPORADIC", fit$labels), "green", 
                  ifelse(grepl("HNPCC_UV", fit$labels), "red", 
                         ifelse(grepl("NA_FAM", fit$labels), "blue",
                                ifelse(grepl("MUTYH", fit$labels), "deeppink","brown")))) 
```

# mysql - 如何将@@system_time_zone 定义为MySQL 中现有表的列的默认值？

> ID：13030034
> 
> 赞同：4
> 
> 时间：2012-10-23T12:05:09.740
> 
> 标签：mysql

我正在尝试将 @@system_time_zone 定义为我尝试添加到现有表的列的默认值。例如

```
ALTER TABLE T1 ADD COLUMN TIME_ZONE CHAR(64) NOT NULL DEFAULT @@system_time_zone; 
```

这给我一个 MySQL 语法错误。我尝试将 @@system_time_zone 括在单引号内。我现在把它分成两部分，如下：

```
ALTER TABLE T1 ADD COLUMN TIME_ZONE CHAR(64) NOT NULL;

UPTATE T1 SET TIME_ZONE=@@system_time_zone; 
```

这可行，但很明显这不是一个理想的解决方案。我曾尝试搜索 Google/StackOverFlow，但无济于事。谁能让我知道是否有正确的语法可以实现这个/任何其他可以实现的替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:04:10.153

这是MySQL中的[限制：](http://dev.mysql.com/doc/refman/5.0/en/data-type-defaults.html)

`The DEFAULT value clause in a data type specification indicates a default value for a column. With one exception, the default value must be a constant; it cannot be a function or an expression`

但是`@@`and`@`是用于获取系统或局部变量值的表达式。而且它们不是恒定的。它们可以在运行时更改。

你的方法很好，但如果你真的想使用系统变量，你可以使用动态 SQL，如：

```
set @q = concat('alter table t1 add column time_zone char(64) not null default ', quote(@@system_time_zone));

prepare stmt from @q;
execute stmt;
deallocate prepare stmt; 
```

根据@lanzz 的建议：在最后一个代码块`@@system_time_zone`中成为常量而不是动态变量。如果将来更改时区，此列的默认值将保持不变。

# ios6 - settimeout 在 ios 5 中工作正常，但在 ios 6 中不起作用

> ID：13030044
> 
> 赞同：1
> 
> 时间：2012-10-23T12:05:44.570
> 
> 标签：ios6, settimeout

我有一个带有 JS 的简单 html 代码，它应该在后台登录到一个监管单元，并在超时后加载在线模式。它运行良好，但现在我的一些客户升级到 ios6，此代码不再工作。有人可以帮忙吗？

代码如下

```
<html>
<head>
<body onload="document.BLD1.submit(); setTimeout('document.load.submit()',5000);">

<form method="post" name="BLD1" action="http://77.48.234.213:8080/main.html" target="loginWindow1">
<input name="blu" type="hidden" value="5" /><input name="blp" type="hidden" size="10" maxlength="8" value="0000" /><input name="bll" type="hidden" value="logovani " /> </form>

<form style="font: 12pt;" action="http://77.48.234.213:8080/GRAFIK.htm" name="load" target="targetWINDOW">

</form>
</body>
</html> 
```

# macos - 在非个人和大型开发环境中从雪豹升级到山狮/小牛

> ID：13030045
> 
> 赞同：0
> 
> 时间：2012-10-23T12:05:50.380
> 
> 标签：macos, osx-mountain-lion, osx-snow-leopard

我的公司仍在运行 Snow Leopard，我们正在考虑尽快升级到 Mountain Lion（编辑：小牛队）。我们正在开发 iOS 和 Mac OS X 应用程序，并在旧项目和新项目之间稍作休息。这意味着，我们可以从新版本上的新应用程序重新开始。但是旧版本会发生什么？他们没有 ARC、Storyboards 等...我知道您可以关闭 ARC，但我们希望确保我们仍然能够提交对旧项目的更新，而且我们无法投入大量时间和转换过程中的努力。

我花了一些时间阅读 AppStore 上 xCode 更新下方的用户评论，并读到新版本删除了旧项目。当然我们有备份，但这让我不确定这是否是正确的一步。

有没有人体验过这在非个人环境中是如何工作的？在家里，我自己运行 Mountain Lion 和 xCode 转换的小项目。我只是不确定大型项目...

谢谢你的时间！

**编辑：我明天将升级一个系统，然后尝试发布结果，也许还有一些提示、重要步骤和需要注意的事情。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:37:03.223

**提示进行升级时要考虑的事项：**

* * *

## 在你开始之前

*   **花点时间做好备份！**- 您可以将仅位于一个硬盘上的数据视为不存在。

*   **首先从一个系统开始，**然后在进行重大升级之前尝试一切。

* * *

## 安装

*   **考虑到它比在家里花费更多的时间！**由于 对称的互联网连接， **MountainLion 下载耗时超过 5 小时。****安装时间约为 1 小时**（MacMini 2009 - 4Gigs Ram 1067）。**+ xCode 下载时间 ~1 小时**

*   在安装新的 xCode 之前，请确保备份所有项目和旧的 xCode Dev 文件夹。

*   当安装例程要求您删除旧的 xCode 时（我没有这样做，现在我必须手动将每个项目分配给新的 xCode。我也必须手动删除旧版本，这有点复杂如果您必须研究允许删除哪些文件，哪些不能删除）

*   然后你必须下载不同的 xCode 库。**至少**还有1 小时。

![下载库](../Images/599ed41dc940d20712f82b02df767f44.png)

*   **到目前为止下载和安装过程的时间：~8 小时。（请记住，我们的互联网连接速度很慢）**

* * *

## 项目

*   复制您的项目，不要在原始项目上运行您的转换和测试。
*   当您打开项目时，您可能会收到很多警告。 **不要恐慌！**
*   当单击***“验证项目设置”*警告**时，xCode 会建议为您转换您的项目。我现在已经为 3 个 iOs 应用程序（构建目标：4.3）完成了此操作，并且每次都有效。让它为您创建快照。以防万一。
*   如果您的应用程序已经过代码签名，您可能会收到 **“目标完整性”警告**。在每种情况下，我都可以编辑“entitlement.plist”的路径。（只需单击警告并在“代码签名权利”处编辑路径） ![代码签名权利](../Images/f7b026b57c98335ae7caa139f6cbfc14.png)
*   您可能需要更改部署目标。为此，请转到**Project Navigator** ( ***cmd + 1*** )，**单击您的项目名称**，然后单击**Summary**。在那里您可以编辑您的部署目标。
*   如果您收到有关**已弃用方法**的警告，则应 在[stackoverflow.com](http://stackoverflow.com)搜索您的特定情况。如果它与 ***NSURLConnection***相关，请看[这里](https://stackoverflow.com/questions/7862316/ios5-nsurlconnection-methods-deprecated)。

***未完待续...***

# apache2 - 在 Windows 上使用 Apache 配置 (mod_caucho) 的 Resin

> ID：13030046
> 
> 赞同：0
> 
> 时间：2012-10-23T12:05:58.290
> 
> 标签：apache2, resin

我有安装了 Windows x32、Apache 2.2 和 Resin 3.0.14 的 PC，我需要使用 Resin 配置 Apache。我已经红了文章[http://www.caucho.com/resin-3.0/install/cse-apache.xtp](http://www.caucho.com/resin-3.0/install/cse-apache.xtp)，但还是有问题。这是来自 Apache 的配置

```
LoadModule mod_caucho "c:/Program Files/resin-3.0.14/win32/apache-2.0/mod_caucho.dll"
ResinConfigServer localhost 6802

<VirtualHost *:80>
      ServerName myapp.com
      ResinConfigServer localhost 6802
      DocumentRoot C:/Program Files/Apache Software Foundation/Apache2.2/htdocs/myapp.com/webapps/ROOT
      DirectoryIndex default.htm index.jsp redirect.jsp index.html
      <Location /caucho-status>
         SetHandler caucho-status
      </Location>
</VirtualHost> 
```

当我重新启动 Apache 它显示以下

```
httpd.exe: Syntax error on line 494 of C:/Program Files/Apache Software Foundati
on/Apache2.2/conf/httpd.conf: Cannot load C:/Program Files/resin-3.0.14/win32/ap
ache-2.0/mod_caucho.dll into server: The specified module could not be found.
Note the errors or messages above, and press the <ESC> key to exit. 
```

我从 Resin 4.0.32 获取了用于 Apache 2.2 的 mod_caucho.dll 并将其放置到我的 Resin 文件夹中，但在这种情况下，我收到另一个错误

```
httpd.exe: Syntax error on line 494 of C:/Program Files/Apache Software Foundati
on/Apache2.2/conf/httpd.conf: Can't locate API module structure `mod_caucho' in
file C:/Program Files/resin-3.0.14/win32/apache-2.2/mod_caucho.dll: No error
Note the errors or messages above, and press the <ESC> key to exit. 
```

有没有人遇到过这样的问题？如何让它发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:36:03.443

如果您使用的是 Apache 2.2，则应该使用 Resin 3.1.x 或 Resin 4.0.x。

你不能为不同版本的 Resin 混合 mod_caucho.dll，因为协议会不时调整。

此外，当您使用 Resin 3.1.x 或 Resin 4.0.x 进行安装时，由于 mod_caucho.dll 有 win32 和 win64 的复杂性，您需要使用适当的。

# sql - 使用 SQL 的百分比

> ID：13030048
> 
> 赞同：1
> 
> 时间：2012-10-23T12:06:07.320
> 
> 标签：sql

我有一个关于 SQL 百分比的问题，我正确地获取了一个查询，我得到了这个结果：

```
 +----------+-------+---------+------+----+
 | nb_play  | group |         | percentage|
 +----------+-------+---------+------+----+
 | 55541    | group1          |           |
 | 02550    | group2          |           |
 | 12233    | group3          |           |
 +----------+-------+---------+------+----- 
```

结果是每个组的玩家数量，所以我有两个表 player 和 player_group ，我的查询是：

```
Select 
count(p.Id) as nb_play ,
pg.group
from players p 
inner join players_group pg on p.Id=pg.player_id

group by pg.group

order by pg.group; 
```

所以我希望每组有一定比例的玩家人数，也许我会拥有三个以上的组......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:11:34.950

尝试首先在变量中获取整体 COUNT：

```
DECLARE @totalCount AS INT
SET @totalCount = (SELECT COUNT(p.Id) from players p 
                   inner join players_group pg on p.Id=pg.player_id)

Select count(p.Id)/@totalCount * 100 as nb_play ,pg.group
 from players p 
 inner join players_group pg on p.Id=pg.player_id

 group by pg.group

 order by pg.group; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:20:28.523

您尚未指定 RDBMS，但假设您有一个支持分析功能的 RDBMS，您可以利用这些功能（这几乎正是它们的用途）：

```
WITH PlayerCount AS
(   SELECT  [nb_play] = COUNT(p.ID),
            pg.[Group]
    FROM    Players p
            INNER JOIN Players_Group pg
                ON pg.Player_ID = p.ID
    GROUP BY pg.[Group]
)
SELECT  [nb_play], 
        [Group],
        [Percentage] = CAST(100.0 * [nb_Play] / SUM([nb_play]) OVER() AS DECIMAL(5, 2))
FROM    PlayerCount 
```

注意，这是为 SQL-Server 编写的，但只需稍作调整即可适应支持这些功能的其他 DBMS

**编辑**

这可以在一个查询中实现（没有 CTE 或子查询），但我不确定它会更有效：

```
SELECT  DISTINCT
        [nb_play] = COUNT(p.ID) OVER(PARTITION BY pg.[Group]),
        pg.[Group],
        [Percentage] = 100.0 * COUNT(p.ID) OVER(PARTITION BY pg.[Group]) / COUNT(p.ID) OVER()
FROM    Players p
        INNER JOIN Players_Group pg
            ON pg.Player_ID = p.ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:11:19.723

这可以使用，但您可能会遇到性能问题。

```
Select 
count(p.Id) as nb_play ,
pg.group,
(count(p.Id) / (select count(1) from players) ) * 100 as percentage
from players p 
inner join players_group pg on p.Id=pg.player_id
group by pg.group
order by pg.group; 
```

# php - SimpleXML 之前添加元素

> ID：13030051
> 
> 赞同：0
> 
> 时间：2012-10-23T12:06:16.917
> 
> 标签：php, xml, xsd, simplexml

我正在使用*SimpleXML*生成基于 xml 的发票。

结构必须是这样的（高度简化）：

```
<invoice>
    <total>
        <price>100</price>
    </total>
    <items>
        <item>...</item>
    </items>
</invoice> 
```

但是，如果首先循环我的项目并将总数相加，然后插入`<total>`：

```
<invoice>
    <items>...</items>
    <total>...</total>
</invoice> 
```

但是**CUSTOM XSD**说它无效。这可能不会导致应用程序出错，但我希望它是有效的。

`<total>`那么我可以在标签*之前* 插入`<items>`标签吗？

**注意：** `<items>`标签不是`<invoice>`.

所需功能的 Jquery 等效项是*[.insertBefore()](http://api.jquery.com/insertBefore/)*

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:29:12.077

你可以这样做：

```
 $domelement = dom_import_simplexml($items);

    $new = $dom->insertBefore(
        $dom->ownerDocument->createElement("total"),
        $dom->firstChild
    );

    $newsxml = simplexml_import_dom($new); 
```

然后将项目添加到总节点中。

# actionscript-3 - 项目渲染器 - 在 flex 中渲染一行

> ID：13030054
> 
> 赞同：0
> 
> 时间：2012-10-23T12:06:33.903
> 
> 标签：actionscript-3, apache-flex, flex4, flex3, itemrenderer

我有一个包含三列的数据网格。我在不同的列上应用了两个不同的渲染器（比如第 1 列的渲染器 A 和第 3 列的渲染器 B）。

现在在 B （第三列的渲染器）的 set Data() 中，我正在根据某些条件更改 Requiredflag。在 A 的集合数据（第 1 列的渲染器）中，我正在检查 RequiredFlag 并相应地更改其样式。

问题在于行，A 在 B 之前呈现，因为它是第一列，因此它没有获得 requiredFlag 的更新值（因为 requiredFlag 在 B 中更新）。

那么我可以在渲染第三列的单元格后以某种方式再次渲染第一列的单元格吗？或者，如果我可以在第三列单元格中 requiredFlag 的值更改后再次渲染整行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:05:34.137

把itemrender看成一个视图，所以渲染器本身不做任何计算，只检查对象的值...

如果我理解正确，我会做这样的事情......

（也许您需要将检查从设置数据移动到更新显示列表）

**例子：**

```
class Test
{

   public var col1:String = "Everything";
   public var col3:String = "Cars";

   public function get color():uint
   {
     if (col1 == "Everything")
       return 0xff0000;

     return 0x000000;
   }

} 
```

**itemrendererA.mxml**

```
override public function set data(value:Object):void
{
   super.data = value;
   if (super.data != null && super.data is Test)
   {
      // do what you need to do..
      lbl1.text = (super.data as Test).col1;
      lbl1.setStyle("color", (super.data as Test).color);
   }
} 
```

**itemrendererB.mxml**

```
override public function set data(value:Object):void
{
   super.data = value;
   if (super.data != null && super.data is Test)
   {

      if ( (super.data as Test).color == 0xff0000)
         // do something
      else
        // do something else
   }
} 
```

如果这不是您要查找的内容，请添加一些代码...

# url-rewriting - IIS 7.5 URL 重写规则的优先级高于文件夹

> ID：13030056
> 
> 赞同：1
> 
> 时间：2012-10-23T12:06:49.780
> 
> 标签：url-rewriting, web-config, iis-7.5, asp.net-2.0

我在 web.config 中有这个规则。

```
<rule name="RewriteSourceCategorySuburb" stopProcessing="true">
  <match url="(news)$" />
  <conditions  logicalGrouping="MatchAll" trackAllCaptures="false">
    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
  </conditions>
  <action type="Rewrite" url="default.aspx?category={R:1}" />
</rule> 
```

问题是我的根目录中有名为“ **news** ”的文件夹名称，该文件夹中甚至没有 default.aspx，但 Web 服务器正在尝试查看文件夹“news”并显示此错误“ ***403 - 禁止：访问被拒绝。您无权使用您提供的凭据查看此目录或页面。*** “当我请求**mysite.com/news**时。是否可以使我的规则被处理得比该文件夹名称更高？谢谢。

注意：这不仅仅是新闻文件夹，所有名称都使用相同的文件夹，我需要进行大量更改才能将这些文件夹重命名为其他名称。请帮忙。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T21:56:55.113

上个月我遇到了类似的问题，它最终成为 IIS 中的身份验证设置。您可以检查的一件事是 IIS 中的身份验证设置，并将匿名身份验证更改为使用应用程序池标识**，而不是**默认的“IUSR”。

您还需要在安装 IIS 的位置安装 URL 重写模块，这是一个链接[http://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

# sqlite - WebSQL 查询优化帮助 - CASE WHEN 使查询慢 400 毫秒

> ID：13030058
> 
> 赞同：1
> 
> 时间：2012-10-23T12:06:59.343
> 
> 标签：sqlite, query-optimization

有人可以告诉我为什么“CASE WHEN”让它这么慢以及如何优化/修复它吗？

需要将固定在结果中的项目按顺序排列在首位。

我可能可以在 sql 查询之后执行此操作，但我认为如果正确完成，如果在 sql 查询中完成此排序会更快。

慢查询~490ms

```
SELECT 
    places.id AS place_id,
    url,
    title,
    thumbnails.score AS score,
    thumbnails.clipping AS clipping,
    thumbnails.lastModified AS lastModified,
    EXISTS (SELECT 1 FROM pinned pi WHERE pi.place_id = places.id) AS pinned
FROM places
    LEFT JOIN thumbnails ON (thumbnails.place_id = places.id)
    LEFT JOIN pinned j ON (j.place_id = places.id) WHERE (hidden == 0)
ORDER BY case when j.id is null then 1 else 0 end,
    j.id,
    frecency DESC LIMIT 24 
```

删除“CASE WHEN”部分：查询 ~6ms

```
SELECT
    places.id AS place_id,
    url,
    title,
    thumbnails.score AS score,
    thumbnails.clipping AS clipping,
    thumbnails.lastModified AS lastModified,
    EXISTS (SELECT 1 FROM pinned pi WHERE pi.place_id = places.id) AS pinned
FROM places
    LEFT JOIN thumbnails ON (thumbnails.place_id = places.id) WHERE (hidden == 0)
ORDER BY frecency DESC LIMIT 24 
```

表信息：

```
var Create_Table_Places =
    'CREATE TABLE places (' +
        'id INTEGER PRIMARY KEY,' +
        'url LONGVARCHAR,' +
        'title LONGVARCHAR,' +
        'visit_count INTEGER DEFAULT 0,' +
        'hidden INTEGER DEFAULT 0 NOT NULL,' +
        'typed INTEGER DEFAULT 0 NOT NULL,' +
        'frecency INTEGER DEFAULT -1 NOT NULL,' +
        'last_visit_date INTEGER,' +
        'dateAdded INTEGER,' +
        'lastModified INTEGER' +
    ')';

var Create_Table_Thumbnails =
    'CREATE TABLE thumbnails (' +
        'id INTEGER PRIMARY KEY,' +
        'place_id INTEGER UNIQUE,' +
        'data LONGVARCHAR,' +
        'score REAL,' +
        'clipping INTEGER,' +
        'dateAdded INTEGER,' +
        'lastModified INTEGER' +
    ')';

var Create_Table_Pinned =
    'CREATE TABLE pinned (' +
        'id INTEGER PRIMARY KEY,' +
        'place_id INTEGER UNIQUE,' +
        'position INTEGER,' +
        'dateAdded INTEGER,' +
        'lastModified INTEGER' +
    ')'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:36:23.907

要了解查询的执行是否存在根本差异，请使用[`EXPLAIN QUERY PLAN`](http://www.sqlite.org/lang_explain.html). 在 SQLite 3.7.almost15 中，您的查询有以下计划：

```
selectid order from detail
-------- ----- ---- ------
0        0     0    SCAN TABLE places (~100000 rows)
0        1     1    SEARCH TABLE thumbnails USING INDEX sqlite_autoindex_thumbnails_1 (place_id=?) (~1 rows)
0        2     2    SEARCH TABLE pinned AS j USING COVERING INDEX sqlite_autoindex_pinned_1 (place_id=?) (~1 rows)
0        0     0    EXECUTE CORRELATED SCALAR SUBQUERY 1
1        0     0    SEARCH TABLE pinned AS pi USING COVERING INDEX sqlite_autoindex_pinned_1 (place_id=?) (~1 rows)
0        0     0    USE TEMP B-TREE FOR ORDER BY

selectid order from detail
-------- ----- ---- ------
0        0     0    SCAN TABLE places (~100000 rows)
0        1     1    SEARCH TABLE thumbnails USING INDEX sqlite_autoindex_thumbnails_1 (place_id=?) (~1 rows)
0        0     0    EXECUTE CORRELATED SCALAR SUBQUERY 1
1        0     0    SEARCH TABLE pinned AS pi USING COVERING INDEX sqlite_autoindex_pinned_1 (place_id=?) (~1 rows)
0        0     0    USE TEMP B-TREE FOR ORDER BY 
```

这两个计划几乎相同，除了重复`pinned`查找。如果您的 SQLite 不以这种方式执行查询，请更新它。

在您的第一个查询中，您可以删除该`pinned`字段的子查询，因为您已经加入了`pinned`表，并且您正在执行与为连接完成的查找完全相同的查找；改为使用`j.id IS NOT NULL`。

您的目的是在其他值之后`CASE WHEN`对 s 进行排序。`NULL`您可以通过[将所有`NULL`s转换为](http://www.sqlite.org/lang_corefunc.html#ifnull)[在 numbers 之后排序](http://www.sqlite.org/datatype3.html#comparisons)的某个值来获得相同的效果，例如字符串：

```
... ORDER BY IFNULL(j.id, ''), frecency DESC 
```

但是，理论上，这与`CASE WHEN`.

# netty - netty ioworker 写入任务队列可能无限增长

> ID：13030062
> 
> 赞同：0
> 
> 时间：2012-10-23T12:07:22.640
> 
> 标签：netty

关于 IOworker 的 writeTaskQueue。似乎它应该包含工人负责的最大频道数量。然而，我不断重现队列被填满的场景。我在 jboss 社区上看到了一个关于它的 jira，最终被解决为非错误。这是否意味着写入任务队列可以填充的数量远远超过其负责的通道数？如果是这样，这个队列大小是否仍然存在逻辑约束？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:57:45.733

您应该检查 Channel.isWritable() 是否有足够的内存供 Channel 排队字节。可以通过 writeBufferHighWaterMark 和 writeBufferLowWaterMark 设置限制

见： [http ://static.netty.io/3.5/api/org/jboss/netty/channel/socket/nio/NioChannelConfig.html](http://static.netty.io/3.5/api/org/jboss/netty/channel/socket/nio/NioChannelConfig.html)

# c# - (Random.NextDouble() < 1) 可能有什么用途

> ID：13030070
> 
> 赞同：2
> 
> 时间：2012-10-23T12:07:57.163
> 
> 标签：c#, .net, random, mocking

我在几个应用程序中看到我支持以下句子：

```
Random rnd = new Random();
if (rnd.NextDouble() < 1)
{
    ' Do stuff
} 
```

这样做的目的是什么？rnd 将始终返回一个低于 1 的值。我唯一能想到的是，如果您模拟 Random，那么您将能够停用代码的某些部分。

你怎么看？你发现过这样的事情吗？

**编辑**：问题是这些句子位于不同但相关的代码部分，并且始终涵盖整个功能。这就是为什么我倾向于认为这是故意编码的。并且代码似乎具有一定程度的质量，这是一个错误，如果提供所有其他代码，我会感到惊讶。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T12:11:50.317

我不确定，但不需要此检查。`rnd.NextDouble`将始终在 0.0 到 1.0 的范围内返回。

[Random.NextDouble 方法 - MSDN](http://msdn.microsoft.com/en-us/library/system.random.nextdouble.aspx)

> **大于或等于 0.0 且小于 1.0**的双精度浮点数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:31:20.783

假设`Random`问题确实是[`System.Random`](http://msdn.microsoft.com/en-us/library/system.random.aspx)，我看不出有任何功能性原因。

我所能推测的是，也许作者想要一个代码块，他们可以轻松地（在调试/开发时）有条件地（通过更改`1`to `0`）或仅在某些时候（通过将 更改为 and 之间的某个`1`值）运行。但实际上，这不是一个众所周知的成语，所以你必须问写它的人，因此我投票结束，因为过于本地化。`0``1`

# c# - 如何在 EF 中对子对象的数据进行分页？

> ID：13030073
> 
> 赞同：1
> 
> 时间：2012-10-23T12:07:57.953
> 
> 标签：c#, .net, entity-framework, c#-4.0, entity-framework-4

我有个问题。

我想分页`ClassA`。

`ClassA`有一个类型的元素列表`ClassB`，并且`ClassB`有一个类型的元素列表`ClassC`。

**如何按元素数对数据进行分页`ClassC`？**

```
public class ClassA
{
    public ICollection<ClassB> ClassBCollection { get; set; }
}

public class ClassB
{
    public ICollection<ClassA> ClassACollection { get; set; }

    public ICollection<ClassC> ClassCCollection { get; set; }
}

public class ClassC
{
    public ICollection<ClassB> ClassBCollection { get; set; }
} 
```

**甲级**  | **B类**   | **C 类数据**
1 | 内部数据 | 内内数据1
          | | 内内数据2
          | | 内内数据3
          | | 内内数据4
          | | InnerInnerData5（在此处分页）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:37:19.807

您可以在 B 类 GetPageRange() 中添加一个方法

```
 public ICollection<ClassC> GetPageRange(int startingPage, int pagesPerPage)
    {
        return (from c in ClassCCollection
                select c).Skip(startingPage).Take(pagesPerPage).ToList();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-16T16:02:13.387

我可以用 System.Linq.Queryable 解决这样的解决方案：

```
var result =  from A in DataContext<A>()
              .Include(x => x.B)
              .Include(x => x.B.C)
              .Orderby(x => x.C)
              .ThenBy(x => x.B)
              .ThenBy(x => x.A)
              .Skip(pageNumber * pageSize)
              .Take(pageSize); 
```

这就是所有的人！:)

# asp.net-mvc - 为什么在 MVC 4 应用程序中使用 InitializeSimpleMembershipAttribute

> ID：13030074
> 
> 赞同：24
> 
> 时间：2012-10-23T12:08:00.857
> 
> 标签：asp.net-mvc, asp.net-mvc-4, simplemembership

我认为我的理解`SimpleMembershipProvider`几乎是 60%，剩下的就是了解它是如何在内部工作的。

`[InitializeSimpleMembership]`仅在 AccountController（默认模板）中使用过滤器时，您可以很快发现一些问题。我认为在您使用 Memberhsip API 的任何地方`WebMatrix.WebSecurity`，您都需要确保首先调用此过滤器。

以后，如果你`User.IsInRole`在我的`_Layout.cshtml`. 您需要将过滤器应用于所有控制器，然后开始在全局中注册它。

但是，我只是意识到`LazyInitializer.EnsureInitialized`每个应用程序启动只执行一次初始化。

那么为什么`SimpleMembershipInitializer`（在过滤器中）不直接在 Application_Start 中？有什么理由使用过滤器吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-02T01:36:36.993

我相信该模板使用了一个属性进行数据库初始化，因此如果初始化失败，该站点的未经过身份验证的部分仍然可以工作。

对于大多数实际目的，最好只在 App_Start 中完成此操作。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-21T18:23:19.917

如果您要将 合并`InitializeSimpleMembershipAttribute`到 中，`Global.asax.cs` `Application_Start`以便在`SimpleMembershipProvider`不调用任何`AccountController`路由的情况下对其进行初始化...

...它可能看起来像这样： [http ://aaron-hoffman.blogspot.com/2013/02/aspnet-mvc-4-membership-users-passwords.html](http://aaron-hoffman.blogspot.com/2013/02/aspnet-mvc-4-membership-users-passwords.html)

```
// The using below is needed for "UsersContext" - it will be relative to your project namespace
using MvcApplication1.Models;

using System;
using System.Data.Entity;
using System.Data.Entity.Infrastructure;
using System.Threading;
using System.Web.Http;
using System.Web.Mvc;
using System.Web.Optimization;
using System.Web.Routing;
using WebMatrix.WebData;

namespace MvcApplication1
{
    // Note: For instructions on enabling IIS6 or IIS7 classic mode, 
    // visit http://go.microsoft.com/?LinkId=9394801

    public class MvcApplication : System.Web.HttpApplication
    {
        protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            WebApiConfig.Register(GlobalConfiguration.Configuration);
            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);
            BundleConfig.RegisterBundles(BundleTable.Bundles);
            AuthConfig.RegisterAuth();

            // Ensure ASP.NET Simple Membership is initialized only once per app start
            LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
        }

        private static SimpleMembershipInitializer _initializer;
        private static object _initializerLock = new object();
        private static bool _isInitialized;

        private class SimpleMembershipInitializer
        {
            public SimpleMembershipInitializer()
            {
                Database.SetInitializer<UsersContext>(null);

                try
                {
                    using (var context = new UsersContext())
                    {
                        if (!context.Database.Exists())
                        {
                            // Create the SimpleMembership database without Entity Framework migration schema
                            ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
                        }
                    }

                    WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);
                }
                catch (Exception ex)
                {
                    throw new InvalidOperationException("The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588", ex);
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-20T20:08:18.420

如果计划确保在`InitializeSimpleMembershipAttribute`全球范围内运行，最好在 ; 中使用 MVC 4 方式`App_Start\FilterConfig.cs`。

```
public class FilterConfig
{
  public static void RegisterGlobalFilters(GlobalFilterCollection filters)
  {
    filters.Add(new HandleErrorAttribute());
    filters.Add(new InitializeMembershipAttribute());
  }
} 
```

保持 Global.asax.cs 与可能应该以 MVC 4 相对于以前版本的方式封装的代码的清洁。留下一个很好的清洁：

```
public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
        AuthConfig.RegisterAuth();
    }
} 
```

我还建议将类型更改为 AuthorizeAttribute（它确实是这样做的），因为 AuthorizeAttribute 方法在 ActionFilterAttribute 方法之前执行。（如果其他 ActionFilter 正在检查安全性并允许派生自定义 AuthorizeAttributes，这应该会产生较少的问题）。

```
[AttributeUsage(AttributeTargets.Class | 
                AttributeTargets.Method, 
                AllowMultiple = false, 
                Inherited = true)]
public class InitializeMembershipAttribute : AuthorizeAttribute
{
    private static SimpleMembershipInitializer _initializer;
    private static object _initializerLock = new object();
    private static bool _isInitialized;

    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        // Ensure ASP.NET Simple Membership is initialized only once per app start
        LazyInitializer.EnsureInitialized(ref _initializer, 
          ref _isInitialized, 
          ref _initializerLock);
        base.OnAuthorization(filterContext);
    }

    private class SimpleMembershipInitializer ...
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-17T14:27:22.007

受 Aaron 回答的启发，我实现了一个解决方案，它可以保持 Global.asax 的清洁并重用模板附带的代码。

1.  在 RegisterApp_Satrt/FilterConfig.cs 中的 RegisterGlobalFilters 方法中添加一行

    ```
    filters.Add(new InitializeSimpleMembershipAttribute());
    ```

2.  将默认构造函数添加到 Filters 文件夹中的 InitializeMembershipAttribute 类。此构造函数的内容将与 OnActionExecuting 方法的覆盖中的内容相同。（这是构造函数的样子）

    ```
    公共 InitializeSimpleMembershipAttribute()
        {
            // 确保每次应用启动时 ASP.NET 简单成员仅初始化一次
            LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
        }
    ```

3.  注释掉（或删除） OnActionExecuting 方法的覆盖。

就是这样。这个解决方案给了我两个主要好处：

1.  `FilterConfig.RegisterGlobalFilters(GlbalFilters.Filters)`在 global.asax 上执行 line后立即检查与成员资格和角色相关的事情的灵活性。

2.  确保 WebSecurity 数据库初始化只执行一次。

* * *

**编辑**：我正在使用的 InitializeSimpleMembershipAttribute。

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
public sealed class InitializeSimpleMembershipAttribute : ActionFilterAttribute
{
    private static SimpleMembershipInitializer _initializer;
    private static object _initializerLock = new object();
    private static bool _isInitialized;

    public InitializeSimpleMembershipAttribute()
    {
        // Ensure ASP.NET Simple Membership is initialized only once per app start
        LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
    }

    //public override void OnActionExecuting(ActionExecutingContext filterContext)
    //{
    //    // Ensure ASP.NET Simple Membership is initialized only once per app start
    //    LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
    //}

    private class SimpleMembershipInitializer
    {
        public SimpleMembershipInitializer()
        {
            Database.SetInitializer<UsersContext>(null);

            try
            {
                using (var context = new UsersContext())
                {
                    if (!context.Database.Exists())
                    {
                        // Create the SimpleMembership database without Entity Framework migration schema
                        ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
                    }
                }

                WebSecurity.InitializeDatabaseConnection("Database_Connection_String_Name", "Users", "UserId", "UserName", autoCreateTables: true);
            }
            catch (Exception ex)
            {
                throw new InvalidOperationException("The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588", ex);
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-23T17:22:10.610

我在这个问题上花了很多时间。但我最终得到了这个改变：

```
public class FilterConfig
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
        filters.Add(new InitializeSimpleMembershipAttribute());

    }
} 
```

我一直随机看到以下错误

System.Web.HttpException (0x80004005)：无法连接到 SQL Server 数据库。---> System.Data.SqlClient.SqlException (0x80131904)：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

我注意到，每当我看到错误时，我也会看到：

在 ASP._Page_Views_Shared__Layout_cshtml.Execute() 在 h:\root\home\btournoux-001\www\site7\Views\Shared_Layout.cshtml:line 5

这恰好是我的 _Layout.cshtml 中的以下行：

```
if (User != null && User.Identity != null && (User.IsInRole("publisher") || User.IsInRole("admin"))) 
```

因此，为了测试我的简单解决方案，我在 EnsureInitialized 调用的 InitializeSmpleMembershipAttribute 类中放置了一个断点，在 SimpleMembershipInitializer 的第一行放置了另一个断点

```
 public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        // Ensure ASP.NET Simple Membership is initialized only once per app start
        LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
    }

    private class SimpleMembershipInitializer
    {
        public SimpleMembershipInitializer()
        {
            Database.SetInitializer<DataContext>(null); 
```

除了这两个断点之外，我还在我的 _Layout.cshtml 中放置了一个断点（我将 User 的测试放在代码部分中，这样我就可以添加断点。

```
@{
    var maintenanceAccess = false;
    if (User != null && User.Identity != null && (User.IsInRole("publisher") || User.IsInRole("admin")))
   {
       maintenanceAccess = true;
   }
} 
```

放入断点后，我所做的是注释掉 filters.Add(new InitializSimpleMembershipAttribute() 然后在 Visual Studio 中启动应用程序。我可以看到我在任何其他断点之前命中了 _Layout.cshtml 中的断点。然后我取消注释该行并再次运行应用程序。这次我看到 InitializeSimpleMembershipAttribute 类中的断点发生在 _Layout.cshtml 中的断点之前。为了确保它正常工作，我登录了我的网站，然后看到InitializeSimpleMembershipAttribute 类（EnsureInitialized）中的第一个断点，但不是第二个断点 - 这是我所期望的。

所以这一切似乎都奏效了。

感谢所有发现这一点的人！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-24T14:56:39.487

我在墙上敲了一天的头，试图弄清楚为什么我的 Role.GetRoleForUser 失败了。这是因为 LazyInitializer 没有被调用。

所以，就像马特说的那样，把它放在 App_Start 中以确保你没有问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-21T18:41:39.730

InitializeSimpleMembership 过滤器及其过于复杂的代码的原因是开发人员可能决定不使用表单身份验证，然后模板生成的代码仍然可以正常工作。如果您将始终使用表单身份验证，您可以在 Global.asax 的 Application_Start 方法中初始化 SimpleMembership。此处有[有关如何执行此操作的详细说明](http://kevin-junghans.blogspot.com/2013/01/seeding-customizing-aspnet-mvc.html)。

# facebook - iOS 6 facebook Auth 应用程序状态

> ID：13030076
> 
> 赞同：9
> 
> 时间：2012-10-23T12:08:05.447
> 
> 标签：facebook, authentication

我在 iOS6 上使用 SDK 3.1 进行 Facebook 身份验证。我有一个使用旧 FB SDK 的现有应用程序。

显然，我已经实现了：

```
[FBSession openActiveSessionWithReadPermissions:permissions
                                       allowLoginUI:YES
                                  completionHandler:
     ^(FBSession *session,
       FBSessionState state, NSError *error) {
         [self sessionStateChanged:session state:state error:error];
}]; 
```

但最初我在第一次记录尝试后出现 FBSessionStateClosedLoginFailed 的“错误 2”。

没有提供身份验证对话框。应用程序最初在 iOS 设置 -> Facebook 中处于非活动状态。

我尝试了几种解决方案，但在任何配置了 Facebook 帐户的新设备上默认禁用该设置。

请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T13:43:07.720

您是否尝试过使用 Facebook SDK 3.5.1？我使用相同的 SDK 为游戏开发人员开发了一个插件，我的插件用户都没有遇到这个问题。

# c# - 从 SQL Server 并行读取

> ID：13030082
> 
> 赞同：2
> 
> 时间：2012-10-23T12:08:30.647
> 
> 标签：c#, sql-server, multithreading, parallel-processing

我浏览了数十篇文章，但找不到解决方案。

这是逻辑：

我有一个 Winform (VS2010) 应用程序，它需要从 SQL Server 2008 R2 Express 表中读取数据`A`，处理一些计算并存储在不同的表中`B`。

我想使用并行`ForEach`来缩短执行时间（否则计算+SQL过程需要几天......）

我必须从 SQL 读取，因为数据库有超过 500 万行，每次读取返回几百行。

列表定义为：

```
BindingList<ItemsClass> etqM = new BindingList<ItemsClass>();
BindingList<ItemsClass> etqC = new BindingList<ItemsClass>(); 
```

并行执行：

```
Parallel.ForEach(etqC, cv => {
            readData(ref etqM, "tableA", "WHERE ID LIKE '" + cv.Name + "%'");
            IList<ItemsClass> eResults = etqM.OrderBy(f => f.ID).ToList();

            foreach (ItemsClass R in eResults)
            {
                //calculations comes here

                etqM[rID] = R;
            }

            Parallel.ForEach(etqM, r => {
                // part 2 of calculations comes here
                }
            });
            exportList(etqM, "tableB", true);
        }); 
```

SQL读取函数：该函数获取一个List、表名+SQL从SQL读取记录的条件，并将它们转换为List格式。

```
public void readData<T>(ref BindingList<T> etqList, string tableName, string conditions)
    {
        SqlConnection myConnection = new SqlConnection();
        SqlCommand myCommand = new SqlCommand();
        myCommand.CommandTimeout = 0;
        myCommand.Connection = myConnection;

        etqList.Clear();            
        openConn(myConnection);
        SqlDataReader myReader = null;

        try
        {
            int totalResults;
            myCommand.CommandText = "SELECT COUNT (*) FROM " + tableName + " " + conditions;
            totalResults = (int)myCommand.ExecuteScalar();

            if (totalResults > 0)
            {
                myCommand.CommandText = "SELECT * FROM " + tableName + " " + conditions;
                myReader = myCommand.ExecuteReader();
                etqList = ConvertTo<T>(convertReaderToDT(myReader));
            }
        }
        catch (Exception ex) { }
        finally
        {
            try { myReader.Close(); }
            catch { }
        }
        closeConn(myConnection);
    } 
```

SQL 导出函数：此函数将给定列表导出到表名。

```
private void exportListToSql<T>(IEnumerable<T> etqList, string tableName)
{
        SqlConnection myConnection = new SqlConnection();
        SqlCommand myCommand = new SqlCommand();
        myCommand.CommandTimeout = 0;
        myCommand.Connection = myConnection;
        openConn(myConnection);

        try
        {
            actionTotalCount++;
            DataTable dt = new DataTable(tableName);
            dt = ToDataTable(etqList);//List Name
            var bulkCopy = new SqlBulkCopy(myConnection,
                SqlBulkCopyOptions.TableLock |
                SqlBulkCopyOptions.FireTriggers |
                SqlBulkCopyOptions.UseInternalTransaction,
                null
                );
            bulkCopy.DestinationTableName = tableName;
            bulkCopy.BatchSize = BATCH_SIZE;
            bulkCopy.WriteToServer(dt);
        }
        catch (Exception ex) {  }
        finally { closeConn(myConnection); }
    } 
```

SQL`openConn`和`closeConn`：

```
void openConn(SqlConnection myConnection)
{
        if (myConnection.State == ConnectionState.Open) return;
        myConnection.ConnectionString = "Data Source=" + DB_NAME + ";Initial Catalog=APPDB;Integrated Security=True;Connect Timeout=120;Asynchronous Processing=true;";

        try { myConnection.Open(); actionTotalCount++; }
        catch (System.Exception ex) { MessageBox.Show(ex.Message); }
}

void closeConn(SqlConnection myConnection)
{
        if (myConnection.State == ConnectionState.Fetching || myConnection.State == ConnectionState.Executing || myConnection.State == ConnectionState.Connecting) return;
        try { myConnection.Dispose(); }
        catch (System.Exception ex) { MessageBox.Show(ex.Message); }
} 
```

问题是：一旦我执行，我就会收到这条消息：

> *ExecuteScalar 需要一个开放且可用的连接。连接的当前状态为关闭。*

此消息到达所有线程，第一个线程除外。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:36:01.390

显然问题不在于 SQL，而在于计算。由于 List 是在 'Parallel.Foreach' 之外定义的，因此它被不同的线程同时访问，从而导致崩溃。

一旦我改变了代码如下，一切都很好：

```
Parallel.ForEach(etqC, cv => {

        BindingList<ItemsClass> etqM = new BindingList<ItemsClass>();

        readData(ref etqM, "tableA", "WHERE ID LIKE '" + cv.Name + "%'");
        IList<ItemsClass> eResults = etqM.OrderBy(f => f.ID).ToList();

        foreach (ItemsClass R in eResults)
        {
            //calculations comes here

            etqM[rID] = R;
        }

        Parallel.ForEach(etqM, r => {
            // part 2 of calculations comes here
            }
        });
        exportList(etqM, "tableB", true);
    }); 
```

# c# - 抛出什么异常来指示子进程被冻结

> ID：13030084
> 
> 赞同：0
> 
> 时间：2012-10-23T12:08:47.383
> 
> 标签：c#, exception, freeze, child-process

**问题 1 - 实用**

我在我的 C# 应用程序中使用`System.Diagnostics.Process`. 如下所示：

```
Process process = new Process();

// ... StartInfo initialization here

int timelimit_ms = 30000;
process.Start();
if (!process.WaitForExit(timelimit_ms))
{
  // What exception to throw here?
  throw new Excpetion(
    "An executing method exceeded the time limit of " + timelimit_ms.ToString() + "ms");
} 
```

我目前正在投掷`System.ComponentModel.Win32Exception`. 但我不确定这是否是最佳选择。子进程是一个简单的命令行实用程序。那么第一个问题，在这种情况下要抛出什么异常？

**问题 2 - 理论上的**

这不是我第一次问自己要抛出什么异常。而且我不知道如何选择某个人的简单指南。C# 中有很多例外，从一个命名空间深深地继承到另一个命名空间。第二个问题，如何决定在特定情况下抛出什么异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:13:53.177

[超时](http://msdn.microsoft.com/en-us/library/system.timeoutexception.aspx)异常怎么样？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T12:14:34.343

我会考虑从代码中抛出[InvalidOperationException 。](http://msdn.microsoft.com/en-us/library/system.invalidoperationexception.aspx)正如 MSDN 所述，这个例外是：

> 当方法调用对于对象的当前状态无效时引发的异常。

因此，运行并等待进程的调用者或消费者将被通知函数执行*失败*的`function`事实*。*`object`

如果你想详细说明失败原因的声明，你可以表达出来

*   或在详细信息中（如果足够的话）

*   或创建您自己的自定义异常，`InvalidOperationException`并使用调用者外部可能需要的其他数据填充它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T12:16:54.480

实际上，我会抛出一个[TimeoutException](http://msdn.microsoft.com/en-us/library/system.timeoutexception.aspx)，因为它描述了正在发生的事情

从理论上讲，如果快速谷歌/阅读文档没有引发已经描述正在发生的事情的异常，那么您可以扩展 Exception 以生成 WeirdThingThatHappensSometimesInMyApplication 异常。

但这取决于谁或什么将“阅读”您的异常。如果您的异常不是异常，那么也许您应该以不同的方式做事:-)

# objective-c - 为什么我无法扫描带有空格的完整字符串？

> ID：13030085
> 
> 赞同：0
> 
> 时间：2012-10-23T12:08:48.657
> 
> 标签：objective-c, string

我尝试扫描一个字符串并将其划分为单独的字符串。我的代码是：

```
#import <Foundation/Foundation.h>
NSArray *wordsArray;
int amount;
char input[80];
int main (int argc, const char * argv[])
{

    @autoreleasepool {
       NSString *stra=[[NSString alloc] initWithString:@""];        

    //  stra=@"this is my sentence";
       NSLog(@"Please Enter a sentence!");
       scanf("%s",&input);
       stra=[NSString stringWithCString:input encoding:NSASCIIStringEncoding];
    //   NSLog(@"words: %@",str);

         wordsArray = [stra componentsSeparatedByString:@" "];
         amount= [wordsArray count];
         NSLog(@"Number of Shows : %d", amount);

        for (int i=0; i<amount; i++) 
        {
            NSString *subString = [wordsArray objectAtIndex:i];
            NSLog(@"\n %@",[subString uppercaseString]);
        }

    }
    return 0;
} 
```

输入时：“Test1 test2 test3”

我得到：测试1

该代码不考虑空格。如何扫描大厅字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:20:40.517

这不起作用的一个原因是 scanf 没有要查找的字符串大小，因此它在第一个空格处停止。您可以使用的另一种方法是 fgets() 用于输入。
这个链接在这里提供了更多信息（我知道它说 c 但你在这里使用 c 函数） [允许空格 c](https://stackoverflow.com/questions/1247989/how-do-you-allow-spaces-to-be-entered-using-scanf)

# html - 如何使用 ul/lis 的 CSS 创建“选定效果”？

> ID：13030089
> 
> 赞同：0
> 
> 时间：2012-10-23T12:08:55.763
> 
> 标签：html, css

[这](http://cssdesk.com/bwTwX)是我到目前为止所创造的。我想增加第一`li`项的高度，使其覆盖其`ul`.

在我的应用程序中，我想使用这种方法创建“选定”效果。没有JS这可能吗？

**CSS**

```
ul, li {
    margin: 0;
    padding: 0;
    list-style: none;
}

ul {
    border: 5px solid #999;
    font-size: 0;
}

li {
    padding: 25px;
    font-size: 1rem;
    border: 5px solid orange;
    display: inline-block;
} 
```

**HTML**

```
<ul>
    <li>foo</li>
    <li>bar</li>
    <li>baz</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:26:27.090

你可以这样写：

```
li:first-child{
  margin-bottom:-5px;
  padding-bottom:30px;
  } 
```

检查这个[http://cssdesk.com/QWbvc](http://cssdesk.com/QWbvc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:22:25.047

您可以参考sandeep的答案，但也可以试试这个 - 只需将固定高度分配给父元素，看看`<li>`高度增加后它是如何工作的

ul, li { 边距：0; 填充：0；列表样式：无；}

```
ul {
    border: 5px solid #999;
    font-size: 0;
    height:79px;
}

li{
    padding: 25px;
    font-size: 1rem;
    border: 5px solid orange;
    display: inline-block;
}

li:first-child {
    height:25px;
} 
```

或者

```
li:first-child {
    padding-bottom:30px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:29:56.697

您需要为您选择的元素添加类似“活动”的类，然后为您的元素编写一些规则。检查这个 jsfiddle.net/p85Ey/

# delphi - 如何在部分透明的表单上制作不透明控件？

> ID：13030090
> 
> 赞同：1
> 
> 时间：2012-10-23T12:08:56.760
> 
> 标签：delphi, transparency

我想制作一个半透明的表格，但我想在上面放一个不透明的面板。我怎么做？

# python - 如何将请求（python）cookie保存到文件中？

> ID：13030095
> 
> 赞同：62
> 
> 时间：2012-10-23T12:09:07.587
> 
> 标签：python, cookies, python-requests

请求后如何使用库`requests`（在python中）

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
import requests
bot = requests.session()
bot.get('http://google.com') 
```

将所有 cookie 保存在文件中，然后从文件中恢复 cookie。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-10-23T13:33:01.400

没有直接的方法可以做到这一点，但这并不难。

您可以`CookieJar`从会话中获取对象`session.cookies`，并使用[`pickle`](http://docs.python.org/library/pickle.html)将其存储到文件中。

一个完整的例子：

```
import requests, pickle
session = requests.session()
# Make some calls
with open('somefile', 'wb') as f:
    pickle.dump(session.cookies, f) 
```

然后加载：

```
session = requests.session()  # or an existing session

with open('somefile', 'rb') as f:
    session.cookies.update(pickle.load(f)) 
```

该`requests`库使用[`requests.cookies.RequestsCookieJar()`子类](http://docs.python-requests.org/en/master/api/#requests.cookies.RequestsCookieJar)，它明确支持酸洗和类似字典的 API。该[`RequestsCookieJar.update()`方法](http://docs.python-requests.org/en/master/api/#requests.cookies.RequestsCookieJar.update)可用于使用从 pickle 文件加载的 cookie 更新现有会话 cookie jar。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-05-31T14:07:11.123

在诸如`r = requests.get()`,之类的调用之后`r.cookies`会直接返回一个`RequestsCookieJar`你可以直接返回的[`pickle`](http://docs.python.org/2/library/pickle.html)，即

```
import pickle
def save_cookies(requests_cookiejar, filename):
    with open(filename, 'wb') as f:
        pickle.dump(requests_cookiejar, f)

def load_cookies(filename):
    with open(filename, 'rb') as f:
        return pickle.load(f)

#save cookies
r = requests.get(url)
save_cookies(r.cookies, filename)

#load cookies and do a request
requests.get(url, cookies=load_cookies(filename)) 
```

如果你想以人类可读的格式保存你的 cookie，你必须做一些工作来`RequestsCookieJar`将[`LWPCookieJar`](http://docs.python.org/2/library/cookielib.html#cookielib.LWPCookieJar).

```
import cookielib
def save_cookies_lwp(cookiejar, filename):
    lwp_cookiejar = cookielib.LWPCookieJar()
    for c in cookiejar:
        args = dict(vars(c).items())
        args['rest'] = args['_rest']
        del args['_rest']
        c = cookielib.Cookie(**args)
        lwp_cookiejar.set_cookie(c)
    lwp_cookiejar.save(filename, ignore_discard=True)

def load_cookies_from_lwp(filename):
    lwp_cookiejar = cookielib.LWPCookieJar()
    lwp_cookiejar.load(filename, ignore_discard=True)
    return lwp_cookiejar

#save human-readable
r = requests.get(url)
save_cookies_lwp(r.cookies, filename)

#you can pass a LWPCookieJar directly to requests
requests.get(url, cookies=load_cookies_from_lwp(filename)) 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-09-15T23:50:49.380

扩展@miracle2k 的答案， requests`Session`被[记录](http://docs.python-requests.org/en/latest/api/#sessionapi)为可以与任何[cookielib 一起使用](https://docs.python.org/2/library/cookielib.html#cookielib.CookieJar) `CookieJar`。`LWPCookieJar`(and ) 可以在`MozillaCookieJar`文件中保存和加载他们的cookies。这是一个完整的代码片段，它将为请求会话保存和加载 cookie。该`ignore_discard`参数用于与 httpbin 一起进行测试，但您可能不想将其包含在实际代码中。

```
import os
from cookielib import LWPCookieJar

import requests

s = requests.Session()
s.cookies = LWPCookieJar('cookiejar')
if not os.path.exists('cookiejar'):
    # Create a new cookies file and set our Session's cookies
    print('setting cookies')
    s.cookies.save()
    r = s.get('http://httpbin.org/cookies/set?k1=v1&k2=v2')
else:
    # Load saved cookies from the file and use them in a request
    print('loading saved cookies')
    s.cookies.load(ignore_discard=True)
    r = s.get('http://httpbin.org/cookies')
print(r.text)
# Save the session's cookies back to the file
s.cookies.save(ignore_discard=True) 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2016-12-21T03:17:35.230

我通过json提供了一种方式：

保存 cookie -

```
import json
with open('cookie.txt', 'w') as f:
    json.dump(requests.utils.dict_from_cookiejar(bot.cookies), f) 
```

并加载 cookie -

```
import json
session = requests.session()  # or an existing session

with open('cookie.txt', 'r') as f:
    cookies = requests.utils.cookiejar_from_dict(json.load(f))
    session.cookies.update(cookies) 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-10-21T03:22:41.423

这将完成这项工作：

```
session.cookies = LWPCookieJar('cookies.txt') 
```

CookieJar API 要求您手动调用 load() 和 save()。如果您不关心 cookies.txt 格式，我有一个[ShelvedCookieJar](https://github.com/miracle2k/track0/blob/master/track/utils.py#L8)实现，它将在更改时持续存在。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-10-22T12:07:37.800

我发现其他答案有问题：

*   它们不适用于会话。
*   他们没有正确保存和加载。只保存了cookie名称和值，过期日期、域名等全部丢失。

这个答案解决了这两个问题：

```
import requests.cookies

def save_cookies(session, filename):
    if not os.path.isdir(os.path.dirname(filename)):
        return False
    with open(filename, 'w') as f:
        f.truncate()
        pickle.dump(session.cookies._cookies, f)

def load_cookies(session, filename):
    if not os.path.isfile(filename):
        return False

    with open(filename) as f:
        cookies = pickle.load(f)
        if cookies:
            jar = requests.cookies.RequestsCookieJar()
            jar._cookies = cookies
            session.cookies = jar
        else:
            return False 
```

然后只需调用`save_cookies(session, filename)`保存或`load_cookies(session, filename)`加载。就那么简单。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-04-16T19:28:45.363

您可以直接腌制 cookie 对象：

```
cookies = pickle.dumps(session.cookies) 
```

dict 表示遗漏了很多信息：过期、域、路径……

这取决于您打算对 cookie 进行的使用，但如果您没有关于过期的信息，例如，您应该实现手动跟踪过期的逻辑。

酸洗库返回的对象可以让您轻松地重建状态，然后您可以中继库实现。

显然，这样一来，腌制对象的消费者需要使用同一个库

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-10-26T14:04:29.633

将 cookie 转换为字典列表并保存到 json 或 db 的简单方法。这是具有`session`属性的类的方法。

```
def dump_cookies(self):
    cookies = []
    for c in self.session.cookies:
        cookies.append({
            "name": c.name,
            "value": c.value,
            "domain": c.domain,
            "path": c.path,
            "expires": c.expires
        })
    return cookies

def load_cookies(self, cookies):
    for c in cookies:
        self.session.cookies.set(**c) 
```

我们只需要五个参数，例如：`name`, `value`, `domain`, `path`,`expires`

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2019-02-25T20:07:19.907

**python 3的代码**

请注意，Internet 上的绝大多数 cookie 都是 Netscape cookie。因此，如果您想以 Mozilla cookies.txt 文件格式（Lynx 和 Netscape 浏览器也使用该格式）将 cookie 保存到磁盘，请使用 MozillaCookieJar

```
from http.cookiejar import MozillaCookieJar
import requests

s = requests.Session()
s.cookies = MozillaCookieJar('cookies.txt')
# or s.cookies = MozillaCookieJar() and later use s.cookies.filename = 'cookies.txt' or pass the file name to save method.

response = s.get('https://www.msn.com')

s.cookies.save() 
```

如果该文件已存在，则该文件将被覆盖，从而擦除其中包含的所有 cookie。保存的 cookie 可以稍后使用 load() 或 revert() 方法恢复。

> 请注意， save() 方法无论如何都不会保存会话 cookie，除非您通过传递一个真正的 ignore_discard 参数来另外询问。

```
s.cookies.save(ignore_discard=True) 
```

**使用加载方法：**

从文件加载 cookie。

旧的 cookie 会被保留，除非被新加载的覆盖。

```
s.cookies.load() 
```

**使用还原方法：**

清除所有 cookie 并从保存的文件中重新加载 cookie。

```
s.cookies.revert() 
```

您可能还需要在 load 或 revert 方法中传递一个真正的 ignore_discard 参数。

**关于使用 MozillaCookieJar 的注意事项：**

> 注意 这会丢失有关 RFC 2965 cookie 以及更新或非标准 cookie 属性（例如端口）的信息。

[更多阅读](https://docs.python.org/3.7/library/http.cookiejar.html?highlight=mozillacookiejar#module-http.cookiejar)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-05-25T15:00:53.403

dtheodor 的回答有 95%，除了这个：

```
session = requests.session(cookies=cookies) 
```

对我来说，这引发了一个异常，说 session() 不接受参数。

我通过获取 cookie.get_dict 上的键/值并将它们手动添加到会话中来解决它：

```
session.cookies.set(cookies.keys()[n],cookies.values()[n]) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-16T11:39:10.090

对于所有使用 Cookielib 的解决方案，在 Python 3.0 中将其更改为 http.cookiejar 请查找[Python 3.2 won't import cookielib](https://stackoverflow.com/questions/9857677/python-3-2-wont-import-cookielib/44894126)

# javascript - 将 SVG 复制到画布后的神秘增长

> ID：13030096
> 
> 赞同：2
> 
> 时间：2012-10-23T12:09:13.297
> 
> 标签：javascript, html, svg, html5-canvas, canvg

我的页面上有一个 svg，需要导出为 png，因此按照[此处](https://stackoverflow.com/questions/3975499/convert-svg-to-image-jpeg-png-etc-in-the-browser)的建议，我正在使用 canvg。

副本起初似乎工作正常，但随后画布高度开始神秘地增加。

我在做一些明显错误的事情吗？我试过为画布设置各种尺寸，但没有运气。在 IE 和 Chrome 中失败。

这是我的导出功能：

```
function copytocanvas()
{
    var c = document.getElementById('canvas');
    c.width = $('#svgChart').width();
    c.height = c.width;
    c.getContext = document.getElementById('canvas').getContext;

    var svg = document.getElementById('svgChart'); // or whatever you call it
    var serializer = new XMLSerializer();
    var str = serializer.serializeToString(svg);

    canvg(c, str);  
} 
```

这是一个显示问题的 jsfiddle：http: [//jsfiddle.net/LkqTU/4772/](http://jsfiddle.net/LkqTU/4772/)

滚动时问题似乎变得更糟！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:54:21.800

试试这个：

`canvg(c, str, {ignoreMouse:true, ignoreDimensions:true});`

编辑：

看起来你不需要`ignoreMouse`：

`canvg(c, str, {ignoreDimensions:true});`应该做的伎俩。

# .net - 如何确保字符串包含不超过 3 个数字？

> ID：13030100
> 
> 赞同：3
> 
> 时间：2012-10-23T12:09:17.057
> 
> 标签：.net, regex

我正在寻找一个可以验证我的字符串的正则表达式。字符串应该

1.  长度为 6 到 25 个字符（允许任何字符）
2.  不超过 3 位数字

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T12:17:53.297

您可以将否定前瞻断言用作：

```
^(?!.*[0-9].*[0-9].*[0-9].*[0-9]).{6,25}$ 
```

[**看见**](http://www.rubular.com/r/DQuIznlPx9)

这可确保您的输入中没有 4 位数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T12:17:37.757

这可以通过[前瞻断言](http://www.regular-expressions.info/lookaround.html)来实现：

```
^(?=(?:\D*\d){0,3}\D*$).{6,25}$ 
```

**解释：**

```
^           # Start of string
(?=         # Assert that the following can be matched here:
 (?:\D*\d)  # Any number of non-digits, followed by one digit
 {0,3}      # (zero to three times)
 \D*        # followed by only non-digits
 $          # until the end of the string
)           # (End of lookahead)
.{6,25}     # Match 6 to 25 characters (any characters except newlines)
$           # End of string 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T12:14:53.113

听起来您只需要排除超过三位数的字符串和不符合长度要求的字符串。

两者都不需要正则表达式，事实上，构造一个正则表达式来匹配是很棘手的，因为数字可能会四处分布。

用于`"a string".Length`检查字符数。

遍历字符并用于`char.IsDigit`检查数字计数。

```
public bool IsValid(string myString)
{
   if (myString.Length < 6 || myString.Length > 25)
      return false;

   int digitCount = 0;
   foreach(var ch in myString)
   {
      if(char.IsDigit(ch))
        digitCount;
   }

   return digitCount < 4;
} 
```

# android - 谷歌电视模拟器问题？

> ID：13030103
> 
> 赞同：1
> 
> 时间：2012-10-23T12:09:25.427
> 
> 标签：android, android-emulator, google-tv

我创建了谷歌电视模拟器并为 sdcard 分配了 1024MB 内存。但是当我运行一个基本的 Hello World 示例时，它会响应我以下错误：

> [2012-10-23 17:36:26 - SampleTest] 无法在设备 'emulator-5554' 上安装 SampleTest.apk：无法分配内存 [2012-10-23 17:36:26 - SampleTest] com.android.ddmlib .SyncException：无法分配内存 [2012-10-23 17:36:26 - SampleTest] 启动已取消！

任何人对此都有建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:17:51.297

您看到的异常/错误与内存泄漏有关。我建议创建一个新的虚拟机并只在其上安装一个应用程序。现在模拟器中安装了多少应用程序？SampleTest.apk 有多大？

如果您遇到相同的错误，那么我会检查您的主机系统中是否有足够的可用内存（有时如果您打开了很多文件，您可能会遇到文件描述符问题）。检查您是否分配了足够的 ram 和 sd 空间。

# java - 使用 JApplet 的链表

> ID：13030108
> 
> 赞同：1
> 
> 时间：2012-10-23T12:09:45.060
> 
> 标签：java, swing, japplet

这是我大学的作业之一。我有一个使用 JApplet 的链接列表，并且我首先面临 3 个问题，我希望在单击 Insert_Front 按钮后，新按钮应该放在面板上存在的任何按钮之前而不是最后（例如，一个按钮，其值为 5，它已经存在，并且在单击 Insert_Front 按钮后，创建的新按钮应该放在按钮 5 之前）第二个问题是，在单击 Del_Front 按钮后，第一个按钮是被删除而不是最后一个，最后搜索按钮无法找到面板中存在的按钮..欢迎使用解决方案..这是代码..

```
public interface BasicLinkedList1<itemtype>  
{
   public void insert_front(itemtype item);
   public void delete_front();
   public void insert_rear(itemtype item);
}
public interface listsearch<itemtype>  
{
   public void search(itemtype v);
}

import java.awt.*;
import javax.swing.*;
import java.util.*;
import java.awt.event.*;
/* <applet code="LinkedListApplet.class" height=300 width=500></applet>*/
public class LinkedListApplet extends JApplet implements listsearch<JButton>,BasicLinkedList1<JButton>
{
    JButton Insert_Front,Insert_Rear,Del_Front,search;
    JLabel label;JPanel npanel,spanel;JTextField field;
    LinkedList<JButton> linklist;
    public void init()
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                makegui();
            }
        });
    }
    void makegui()
    {
        linklist = new LinkedList<JButton>();
        npanel = new JPanel();
        spanel = new JPanel();
        label = new JLabel();
        field = new JTextField(40);
        spanel.setLayout(new FlowLayout());
        npanel.setLayout(new GridLayout(2,5));
        listener list = new listener();
        Insert_Front = new JButton("Insert_Front");
        Insert_Front.addActionListener(list);
        npanel.add(Insert_Front);
        Insert_Rear = new JButton("Insert_Rear");
        Insert_Rear.addActionListener(list);//adding listener for buttons
        npanel.add(Insert_Rear);
        Del_Front=new JButton("Del_Front");
        Del_Front.addActionListener(list);
        npanel.add(Del_Front);
        search=new JButton("search");
        search.addActionListener(list);
        npanel.add(search);
        npanel.add(field);
        npanel.add(label,SwingUtilities.CENTER);
        add(npanel,BorderLayout.NORTH);
        add(spanel,BorderLayout.CENTER);
    }
    private class listener implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
            String cmd=e.getActionCommand(),text="";
            System.out.println(cmd);
            if(cmd.equals("Insert_Front"))
            {
                text=field.getText();
                if(text.length()==0)
                    label.setText("enter some value!!!");
                else
                {
                    label.setText("node successfully created");  
                    insert_front(new JButton(text));
                }
            }
            else if(cmd.equals("Insert_Rear"))
            {
                text=field.getText();
                if(text.length()==0)
                    label.setText("enter some value!!!");
                else
                {
                    label.setText("node successfully created");  
                    insert_rear(new JButton(text));
                }
            }
            else if (cmd.equals("Del_Front"))
            {
                label.setText("node successfully destroyed");  
                delete_front();
            }
            else if(cmd.equals("search"))
                search(new JButton(text));
        }        
    }

    public void search(JButton b)
    {
        if(linklist.contains(b))
        {
            label.setText("element found:"+b.getText());
        }
        else
            label.setText("no such elements");
    }

    public void insert_front(JButton item)
    {
        linklist.addFirst(item);
        ListIterator<JButton> itr=linklist.listIterator();
        JButton b=itr.next();
        spanel.add(b);
    }

    public void delete_front()
    {
        JButton b=null;
        if(linklist.size()==0)
            label.setText("cannot delete node,list is empty!");
        else
        {
            b=linklist.removeFirst();
            spanel.remove(b);
        }
    }

    public void insert_rear(JButton item)
    {
        linklist.addLast(item);JButton s=null;
        ListIterator<JButton> itr=linklist.listIterator();
        while(itr.hasNext())
            s=itr.next();
        JButton b=s;
        spanel.add(b);
    }
} 
```

# javascript - Javascript 在输入文本中复制占位符功能

> ID：13030109
> 
> 赞同：1
> 
> 时间：2012-10-23T12:09:48.307
> 
> 标签：javascript, html

创建文本框时，默认显示灰色文本 (#888)。当它获得焦点时，该值应该消失并开始显示键入的值。我已经为这个问题编写了代码，如下所示：

```
<html>
    <script type="text/javascript">
        function Focus(i) {
            if (i.value == i.defaultValue) {
                i.value = "";
                i.style.color = "#000";
            }
        }

        function Blur(i) {
            if (i.value == "") {
                i.value = i.defaultValue;
                i.style.color = "#888";
            }
        }
    </script>

    <body>
        <input type="text" name="enter firstname" title="First Name" style="color:#888;"
        value="First Name" onfocus="Focus(this)" onblur="Blur(this)" />
        <input type="text" name="enterlastname" title="Last Name" style="color:#888;"
        value="lastname" onfocus="Focus(this)" onblur="Blur(this)" />
    </body>

</html> 
```

但是，只要文本框被聚焦，值就会消失。我应该怎么做才能纠正这个问题？即使文本框处于焦点下，该值也不应该消失，并且只有在我开始输入时该值才会消失。我是新用户，不能发截图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T12:15:45.037

你想要什么叫做`placeholder`。

像这样使用它：

```
<input type="text" name="enterfirstname" placeholder="First Name" />
<input type="text" name="enterlastname" placeholder="Last Name" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:17:20.507

尝试

```
<html>
<head>
<script type="text/javascript">
    function Focus(i) {
        if (i.value == i.defaultValue) {
            i.value = "";
            i.style.color = "#000";
        }
    }

    function Blur(i) {
        if (i.value == "") {
            i.value = i.defaultValue;
            i.style.color = "#888";
        }
    }
</script>
</head>
<body>
    <input type="text" name="enter firstname" title="First Name" style="color:#888;"
    value="First Name" onfocus="Focus(this)" onblur="Blur(this)" />
    <input type="text" name="enterlastname" title="Last Name" style="color:#888;"
    value="lastname" onfocus="Focus(this)" onblur="Blur(this)" />
</body>

</html> 
```

注意：不在 body/head 元素内的脚本标签会创建无效的 HTML

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:23:42.393

尝试使用“onkeydown”如下...

```
function Focus(cntrl,value)
{
    if (cntrl.value == value)
    {
       cntrl.value           = '';
       cntrl.style.color     = '#000';
    }
} 
function Blur(cntrl,value)
{
    if (cntrl.value == '') 
    {
       cntrl.style.color     = 'gray';
       cntrl.value           = value;                         
    }
}

<body>
     <input type="text" name="enter firstname" title="First Name" style="color:#888;"      value="First Name" onkeydown="Focus(this,'First Name')" onblur="Blur(this,'First Name')" />
     <input type="text" name="enterlastname" title="Last Name" style="color:#888;"      value="lastname" onkeydown="Focus(this,'lastname')" onblur="Blur(this,'lastname')" />
</body> 
```

# java - 致命错误：值的 java.lang.String 布局无效

> ID：13030111
> 
> 赞同：51
> 
> 时间：2012-10-23T12:09:50.357
> 
> 标签：java, android, eclipse, string, fatal-error

我在 Eclipse 中（在控制台中）遇到了一个非常严重的错误：

```
Invalid layout of java.lang.String at value

A fatal error has been detected by the Java Runtime Environment:

Internal Error (javaClasses.cpp:129), pid=15238, tid=140306591237888
fatal error: Invalid layout of preloaded class

 JRE version: 7.0_07-b10
 Java VM: Java HotSpot(TM) 64-Bit Server VM (23.3-b01 mixed mode linux-amd64 compressed ops)
 Failed to write core dump. Core dumps have been disabled. To enable core dumping, try ulimit -c unlimited" before starting Java again

 An error report file with more information is saved as:
 /home/till/workspace/Encrypt/hs_err_pid15238.log

 If you would like to submit a bug report, please visit:
   http://bugreport.sun.com/bugreport/crash.jsp 
```

[日志下载](http://w450676.open.ge.tt/1/files/6VCgc3Q/0/blob?user=uVNzm4ngFrm5DzV8HbRVumU2CTQMWe7HksD82-3t2&download=)

我无法理解这一点，因为即使 Eclipse 也不会显示任何错误（在代码编辑器中）......这是一个真正的生产力杀手，因为它会阻止所有进度。如果有人对如何解决这个问题有任何想法，请回答这个问题。

非常感谢您，

直到

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-11-03T14:30:55.147

对于**Android**项目，您必须从该特定类的启动配置中**删除** *Android Lib 。*使用下面的“演练”作为指导。

*   **项目**->**属性**->**运行/调试设置**；
*   **选择您的班级**并点击“**编辑**”；
*   打开选项卡“ **Classpath** ”并从“ *Bootstrap Entries ”***中删除** *Android Lib*；
**   **应用**一切并再次**运行**课程。*

 ** * *

## 回答 #2

> 赞同：66
> 
> 时间：2012-11-30T15:50:25.947

我遇到了同样的问题，然后（正如 Jeff Schultz[在这里](https://stackoverflow.com/a/12608436/1043882)所说）我尝试了：

> 运行方式 -> Android 应用程序

问题已解决。但我不知道导致此问题的原因。希望对您有所帮助！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-03T16:50:39.967

这发生在我身上之后：

1.  在我忘记删除`public static void main(String args[])`功能的 Android 应用程序项目中插入一个类。（之前曾对课程进行过快速测试）。
2.  在我打开并将上述类集中在 Eclipse 编辑器上时尝试运行应用程序。

有趣的是，在 Eclipse 错误之后，无论我将焦点切换到哪个类，当我再次尝试运行应用程序时，我都遇到了同样的错误。

受[Odyr Sohn](https://stackoverflow.com/users/1796606/odyr-sohn "奥迪尔·孙")解决方案的启发，我设法解决了这个问题（从**Project->Properties->Run/Debug Settings**删除错误的 Launch 配置），但是当我尝试从这个类运行应用程序时，同样的事情是再次发生。当我`public static void main(String args[])`从类中删除函数时，问题得到了很好的解决。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-07T21:43:21.280

您应该为“Android 应用程序”进行运行配置。如果您错误地将其用于“Java 应用程序”，则会显示此错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-22T00:05:32.817

同样的事情发生在我身上。我创建了一个 TestActivity，我猜它有一个 public static void main(String args[]) 函数。我进入属性，然后运行/调试并删除了 TestActivity，它工作得很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-26T01:05:51.753

`fatal error: Invalid layout of preloaded class`我在使用 Windows 7 的 Kepler Service Release 1上遇到了类似的问题。

```
Project -> Properties -> Java Build Path -> Order and Export --> check mark any 
unchecked library or Android version and then hit OK. Then run as Android application. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-21T15:26:50.130

我有同样的问题，通过以下方式解决：

运行->运行配置；

单击左侧“Android应用程序”->“新建”顶部的按钮；

然后输入名称并“浏览”项目 -> 作品！*

# jquery - jQuery Json 数组问题？

> ID：13030115
> 
> 赞同：0
> 
> 时间：2012-10-23T12:09:58.947
> 
> 标签：jquery, json

我正在使用 Blueimp [Jquery File Upload 小部件](https://github.com/blueimp/jQuery-File-Upload/wiki)，它返回的东西看起来像一个 json 数据数组。如果您查看以下示例（并非所有 json 数据以使其更易于阅读）：

```
[{"name":"10 (2).jpg","size":264843,"type":"image\/jpeg"}] 
```

现在，如果我想访问所述数组的“名称”值，我该怎么做？使用下面的方法，可以完成这项工作，但是当数组只有一个元素长时，我的日志也会充满“未定义”值：

```
 $.each(data.result, function (index, file) {
        console.log(file.name);
    }); 
```

执行 console.log(data.result) 会吐出我给出的上述数组示例，而尝试执行 console.log(data.result[0]) 只会吐出

```
[ 
```

显然我没有得到任何东西。$.each 方法适用于多个元素，但为什么它对单个项目失败？此外; 更重要的是，我如何获得“名称”值，因为在当前的应用程序中，这就是我真正需要的所有信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:19:07.430

你有一个字符串，所以 data.result[0] 会给出第一个字符。看来您必须解析字符串：

```
var data = jQuery.parseJSON( data.result ) 
```

这可能会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:26:58.900

好的，所以我添加了“BlueImp”小部件选项以包括：

```
dataType: 'json', 
```

突然 console.log(file.name); 作品。愚蠢，因为那是默认数据类型！不知道为什么它开始使用上述内容，坦率地说不在乎 - 感谢各位的帮助。

# ios - 提取 IPA 我正在访问资源文件夹中的 sqlite 文件和音频文件

> ID：13030125
> 
> 赞同：1
> 
> 时间：2012-10-23T12:10:24.770
> 
> 标签：ios, ios4

我将 ipa 文件保存到 .zip 并且在提取 zip 时，我得到了应用程序文件，其中我看到了所有资源文件。我怎样才能让这一切安全？

我的一些朋友告诉我，有人可以破解 IPA 并通过种子分发。

代码如下所示。任何机构可以帮助我吗？

```
NSBundle *bundle = [NSBundle mainBundle];
NSDictionary *info = [bundle infoDictionary];
if ([info objectForKey: @"SignerIdentity"] != nil)
{
/* do something */
} 
```

# python - MySQLdb Python 防止重复和优化多重插入

> ID：13030126
> 
> 赞同：2
> 
> 时间：2012-10-23T04:34:56.060
> 
> 标签：python, mysql

我编写了这个 python 脚本来将特定的 xls 文件导入 mysql。它工作正常，但如果它在相同的数据上运行两次，它将创建重复的条目。我很确定我需要使用 MySQL `JOIN`，但我不清楚如何做到这一点。executemany() 的开销是否与在循环中插入相同？我显然试图避免这种情况。
**这是有问题的代码...**

```
for row in range(sheet.nrows):
    """name is in the 0th col. email is the 4th col."""
    name = sheet.cell(row, 0).value  
    email =  sheet.cell(row, 4).value
    if name and email:
        mailing_list[name.lstrip()] = email.strip()

for n, e in sorted(mailing_list.iteritems()):
    rows.append((n, e))

db = MySQLdb.connect(host=host, user=user, db=dbname, passwd=pwd)
cursor = db.cursor()
cursor.executemany("""
        INSERT IGNORE INTO mailing_list (name, email) VALUES (%s,%s)""",(rows)) 
```

## 澄清...

[我在这里](http://www.packtpub.com/article/inserting-multiple-entries-mysql-python)读到...

> 可以肯定的是，executemany() 实际上与简单迭代相同。但是，它通常更快。它提供了一种优化的方法来影响跨多行的 INSERT 和 REPLACE。

我还接受了 Unodes 的建议并使用了 UNIQUE 约束。但是`IGNORE`关键字要好，`ON DUPLICATE KEY UPDATE`因为我希望它静默失败。

**TL;博士**

~~1.防止重复插入的最佳方法是什么？~~
**答案 1**： 列上的唯一约束`SELECT IGNORE`以静默方式失败或`ON DUPLICATE KEY UPDATE`增加重复值并插入它。

1.  executemany() 是否与循环中的 INSERT 一样昂贵？
    @Unode 说不是，但我的研究告诉我不然。我想要一个确定的答案。
2.  这是最好的方法还是对于更大的桌子真的很慢，我将如何测试来确定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:30:12.280

**1 - 防止重复插入的最佳方法是什么？**

根据您的情况“预防”的含义，您有两种策略和一项要求。

要求是您`UNIQUE`在要唯一的列/列上添加约束。如果尝试插入重复条目，仅此一项就会导致错误。但是，鉴于您使用`executemany`的结果可能不是您所期望的。

然后作为策略，您可以执行以下操作：

*   `SELECT`通过之前运行语句的初始过滤步骤。这意味着对行中的每个项目运行一个 SELECT 语句来检查它是否已经存在。这种策略有效但效率低下。

*   使用`ON DUPLICATE KEY UPDATE`. 如果数据已经存在，这会自动触发更新。更多信息请参考[官方文档](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)。

**2 - executemany() 是否与循环中的 INSERT 一样昂贵？**

不，`executemany`创建**一个**在执行 for 循环时批量插入的查询将创建与`rows`.

# java - 为什么 try-catch 不能解决未经检查的泛型强制转换中的警告？

> ID：13030131
> 
> 赞同：6
> 
> 时间：2012-10-23T12:10:37.530
> 
> 标签：java, generics, try-catch, clone, suppress-warnings

考虑以下[MCVE](https://stackoverflow.com/help/mcve)：

```
public class MyClass {
    private LinkedList<Foo> myList = new LinkedList<Foo>();

    // Some irrevelant stuff which includes loading myList

    public void myMethod() {
        LinkedList<Foo> newList;

        try {
             newList = (LinkedList<Foo>) myList.clone();
        } catch (ClassCastException e) {
             // do something in case java screws up
        }
    }
} 
```

我知道您可以通过使用来消除警告，`@SuppressWarnings("unchecked")`但为什么该`try/catch`块不起作用？放在那里是不是浪费时间和精力`try/catch`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T12:12:34.277

那是行不通的，因为您没有为此获得 ClassCastException。

在运行时无法检查列表的已擦除类型。

当您尝试从 List 中获取某些内容（结果不是 Foo）时，您可能会收到 ClassCastException，但 List 本身只是一个 LinkedList（不知道它的元素类型可以是什么）。

的实例`LinkedList<Foo>`看起来与`LinkedList<Bar>`运行时的 a 完全一样。

警告的原因是运行时系统不能保证你正在做的转换是正确的（它可以检查 LinkedList 部分，但不能检查泛型类型）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:13:01.803

我认为，当您显式转换任何内容时，编译器不会检查未经检查的异常。编译器依赖代码编写器进行显式类型转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:30:30.660

**-** `Erasure`是一个过程，其中**从类内部和方法等**`Type Parameters and Arguments`中删除。

 ****-** `Box<String>`变成`Box`了，这被称为**Raw Type**，其中**泛型类和接口在编译期间被剥离了它们的类型参数，**

**-**这样做是为了在**向后兼容**`Run time`期间可以获得那些**不**使用.****`Generics`****

 ******所以这就是不检查的原因。********

# e-commerce - 一种语言来存储视图

> ID：13030133
> 
> 赞同：0
> 
> 时间：2012-10-23T12:10:47.803
> 
> 标签：e-commerce, opencart

我有一个 Opencart 安装，激活了三种语言和第二个商店视图。主商店视图中的英语、德语、俄语。我的第二家店面向俄罗斯观众。是否可以只为我的第二家商店分配一种语言？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:33:04.633

默认情况下，语言选择是全局的，不能根据商店进行选择性选择。可以通过一些编码来执行此操作，但是需要进行一些核心文件编辑

# android - Android 中的 iOS DSP 库的等价物是什么？

> ID：13030134
> 
> 赞同：2
> 
> 时间：2012-10-23T12:10:53.250
> 
> 标签：android, ios, signal-processing

在 iOS 中，为各种 DSP 和图像处理功能提供了非常好的 API。（卷积、2D 过滤器等）与原生实现相比，这些 API 似乎得到了加速并且工作得非常好（根据我的经验）。

现在我即将将我的应用程序移植到 Android 上，但我找不到适用于 Android 的类似 API。Android中是否有类似的API？

# java - 同时执行 2 个任务列表

> ID：13030136
> 
> 赞同：1
> 
> 时间：2012-10-23T12:11:02.490
> 
> 标签：java, multithreading, concurrency, sms, producer-consumer

基本上，我正在构建一个 SMS 应用程序，它从数据库中读取待处理的 SMS 消息，然后将它们全部发送。SMS 消息有 2 种类型；可以随时发送的*普通消息*，以及必须在任何*普通消息之前发送的**紧急*消息。我在应用程序中使用多线程。

 *我想要 2 个*任务*队列；一个用于普通消息，一个用于紧急消息。然后池中的线程将执行两个队列中的任务，**考虑到除非没有*紧急消息，否则无法发送来自**正常消息****的 SMS 消息。*

 *实现将如下所示：

```
public class SMSApplication
{
    private Queue<SMSTask> normalMessages = new Queue<SMSTask>(); // not necessarily java.util.Queue
    private Queue<SMSTask> urgentMessages = new Queue<SMSTask>();

    // ...

    public void addNormalMessage(SMSTask task)
    {
        normalMessages.add(task);
    }

    public void addUrgentMessage(SMSTask task)
    {
        urgentMessages.add(task);
    }

    public void runApplication()
    {
        /* iterate over the queues, create new threads or select existing ones from a pool, and then execute the tasks */
    }
} 
```

实现这一目标的最佳方法是什么？我可以使用 来完成[`BlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:22:09.313

您可以使用两个 ConcurrentQueue、一个 Hi-Pri 和一个 Lo-Pri 以及一个信号量来实现。

将 SMS 消息对象推送到其中一个队列上，向信号量发出信号。

在您的 SMS 发送线程中，等待信号量。收到信号时，首先检查 Hi-Pri 队列计数。如果有一个对象，获取它并发送它。如果没有，则从 Lo-Pri 队列中获取消息（因为肯定有），然后发送。然后循环以再次等待信号量。**

# .net - 如何在 Visual Studio 的构建后事件中获取解决方案目录的动态路径

> ID：13030139
> 
> 赞同：2
> 
> 时间：2012-10-23T12:11:14.443
> 
> 标签：.net, visual-studio, post-build-event

我的解决方案中有七个代码库项目，并且我有 3 个不同类型的网站，它们使用来自 VSS 的相同代码库项目。

现在我想将构建后脚本放入我的一个参考代码库项目中，以便在构建完成时将一个特定的 DLL 放入我的网站 bin 目录中。

例如，我有一个名为“references”的参考项目，并且在其项目属性中将放置以下代码以获取解决方案网站 bin 目录。

```
xcopy /Y $(ProjectDir)Tridion $(SolutionDir)Com.Emirates.Pss.Ibe.UI\Bin 
```

以上内容对于我的一个名为“Com.Emirates.Pss.Ibe.UI”的网站项目来说工作正常，问题出现在一位用户签入“参考”项目，然后其他开发人员采用它获得的最新参考项目“ Com.Emirates.Pss.Ibe.UI”在其后期构建脚本中，但其解决方案网站目录为“Com.Emirates.Pss.MYBooking.UI”。

如何使 xcopy /Y $(ProjectDir)Tridion $(SolutionDir) **Com.Emirates.Pss.Ibe.UI** \Bin （粗体部分是动态的，以便签入用户的人可以轻松地构建应用程序而无需进行更改.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T12:17:17.053

这是所有不同[的构建后事件宏](https://docs.microsoft.com/en-us/visualstudio/ide/reference/pre-build-event-post-build-event-command-line-dialog-box#macros)的列表。

我猜你想使用**$(ProjectDir)**宏，如果我理解正确的话？

**如果您使用的是 MSBuild，则**另一个选项可以在 VS 中添加**[用户定义的宏](http://msdn.microsoft.com/en-us/library/f2t8ztwy%28v=vs.100%29.aspx)变量，创建您自己的[属性表](http://msdn.microsoft.com/en-us/library/ak4435es%28v=vs.100%29.aspx)，如示例所示：**

 **```
<PropertyGroup Label="UserMacros">
      <MyProj>Com.Emirates.Pss.Ibe.UI</MyProj>
</PropertyGroup> 
```

用法：`xcopy /Y $(ProjectDir)Tridion $(SolutionDir)$(MyProj)\Bin`

**最后一个选项**是在 MAIN 项目（将在之前运行）中设置一个具有特定项目名称的环境变量，并从`references`项目中引用它。

例如

在项目 #1 中设置一个**Pre** -Build 事件： `SETX MyProj Com.Emirates.Pss.Ibe.UI`

在参考项目中，使用复制它 `xcopy /Y $(ProjectDir)Tridion $(SolutionDir)%MyProj%\Bin`

应该注意的是，SETX 和 SET 之间的区别在于，即使在 CMD 窗口（运行 MSBuild）关闭后，SETX 也会保留变量。但是，您可能必须在第一次运行它时关闭并重新打开 Visual Studio，因为它是使用 SETX 创建的变量，仅开始在使用此命令之后创建的任何 CMD 窗口上工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:13:12.783

我只是将 $(SolutionDir) 作为参数传递给您在 PostBuild 事件命令行中调用的 .cmd 文件。同样，如果您想要 $(ProjectName) 或 PostBuild cmd 中可访问的任何其他 VS 宏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T04:34:40.450

我通过将以下代码放入“引用”项目 PostBuildEvent 中解决了我的问题：

```
if $(SolutionName) == IbeUI-Integrated  xcopy /Y $(ProjectDir)Tridion $(SolutionDir)Com.Emirates.Pss.Ibe.UI\Bin
if $(SolutionName) == MybUI-Integrated  xcopy /Y $(ProjectDir)Tridion $(SolutionDir)Com.Emirates.Pss.Myb.UI\Bin
if $(SolutionName) == OlciUI-Integrated  xcopy /Y $(ProjectDir)Tridion $(SolutionDir)Com.Emirates.Pss.Olci.UI\Bin 
```**

# asp.net-mvc-3 - .net mvc 应用程序加载错误的语言资源文件

> ID：13030140
> 
> 赞同：1
> 
> 时间：2012-10-23T12:11:15.480
> 
> 标签：asp.net-mvc-3, localization, resources

大家好，我正在编写一个小的 asp.net mvc 应用程序，我想让它本地化并支持一种以上的语言我发现了很多有用的文章

我为语言添加了路由 我使用自定义 actionfilter 属性来选择当前线程的当前文化，具体取决于 url 中的语言代码，例如英语的“site.com/en/controller/action”或“site.com/ar/controller/action” “为阿拉伯语。

我为英语创建了“Resources\Views\Shared\Layout.resex”，为阿拉伯语创建了“Resources\Views\Shared\Layout.ar.resex”。

它只卡在阿拉伯语本地化的问题，我手动将当前线程文化设置为英语并删除了 actionfilter 属性，但它仍然显示阿拉伯语内容！这是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T12:47:26.063

如果没有更多细节或代码，很难说，但一件容易错过的事情是您的 web.config 文件的配置。如果您有类似`<globalization uiCulture="auto" culture="auto" />`in 的内容`<system.web>`（使用“auto”而不是文化标识符），那么 ASP.NET 将使用由浏览器的语言设置确定的接受语言标头来自动选择线程的文化。因此，您所看到的可以通过在浏览器的语言列表中进行此配置并在英语之前使用阿拉伯语来部分解释。

**编辑**：问题是代码需要使用 Thread.CurrentThread.CurrentUICulture 来控制使用哪些本地化资源（Thread.CurrentThread.CurrentCulture 是另一回事，不影响本地化但依赖于区域设置的格式/解析，例如日期）。

# file - 在matlab中设置修改时间

> ID：13030143
> 
> 赞同：4
> 
> 时间：2012-10-23T12:11:23.390
> 
> 标签：file, matlab, octave

我可以通过以下方式在 matlab 中获取修改时间：

```
>> f = dir('my_filename.dat');
>> f.date 
```

但是我该如何改变呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T12:41:34.180

这可以使用 Java&Matlab 完成：

```
import java.io.File java.text.SimpleDateFormat
f = File('my_filename.dat');
sdf = SimpleDateFormat('HH:mm dd/MM/yyyy');
newDate = sdf.parse('12:34 10/12/2010');
f.setLastModified(newDate.getTime); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T12:19:10.607

要将日期设置为当前日期，您可以在文件中写入一些内容：

```
fid = fopen('my_filename.dat', 'r+');
byte = fread(fid, 1);
fseek(fid, 0, 'bof');
fwrite(fid, byte);
fclose(fid); 
```

在这里，我从文件开头读取了一个字节，然后将其写回。

如果要将其设置为其他内容，可以使用系统调用来完成。在 linux 上，您可以使用`touch`：

```
system('touch -d "2012-10-01" my_filename.dat'); 
```

[Win32 Console ToolBox 1.0](http://www.stevemiller.net/apps/)`Touch`中的 windows ( )也存在类似的命令

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T19:55:09.867

基于 Java 解决方案：

```
function setFileDate(fn,date)
% date needs to be UTC I think

java.io.File(fn).setLastModified(etime(datevec(date),[1970 1 1 0 0 0])*1000); 
```

或者

```
function updateFileDate(fn)
java.io.File(fn).setLastModified(java.lang.System.currentTimeMillis) 
```

# c++ - 未正确考虑 Makefile 中的依赖关系

> ID：13030144
> 
> 赞同：0
> 
> 时间：2012-10-23T12:11:23.630
> 
> 标签：c++, class, include, makefile, gnu

我对 GNU makefile 的了解有限，目前这让我很失望。

我有一个类声明文件：mdfTree.h，一个类 mdfTree.cpp 的实现，以及一个 mdfTree_x.cpp 文件，其中我创建了一个 mdfTree 类的对象并调用它的公共函数，然后调用一些私有成员mdfTree 的变量。

我正在用 Makefile 编译它：

```
CXX=g++
CXXFLAGS=-g -Wall -W -Wconversion -Wshadow -Wcast-qual -Wwrite-strings $(shell root-config --cflags --gl\
ibs)
LDFLAGS=-g $(shell root-config --ldflags)
LDLIBS=$(shell root-config --libs)

mdfTree_x: mdfTree_x.o
        g++ $(LDFLAGS) -o mdfTree_x mdfTree_x.o $(LDLIBS)

mdfTree_x.o: mdfTree_x.cpp
        g++ $(LDFLAGS) $(CXXFLAGS) -c mdfTree_x.cpp 
```

mdfTree.cpp 和 mdfTree_x.cpp 中有一个`#include mdfTree.h`。mdfTree_x.cpp 也需要`#include mdfTree.cpp`吗？

我认为我的 Makefile 是错误的，因为当我尝试编译时，来自类 mdfTree 的公共函数看不到同一类的私有变量。此外，当我在 mdfTree.h 中插入语法错误时，编译器不会选择它。如何告诉 Makefile mdfTree_x 需要使用/编译 mdfTree.h/.cpp？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:15:36.213

不，您还需要调整您的 make 文件以编译和链接 mdfTree.cpp。

像这样的东西

```
mdfTree.o: mdfTree.cpp
        g++ $(LDFLAGS) $(CXXFLAGS) -c mdfTree.cpp 
```

并将链接步骤更改为

```
mdfTree_x: mdfTree_x.o mdfTree.o
        g++ $(LDFLAGS) -o mdfTree_x mdfTree_x.o mdfTree.o $(LDLIBS) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:55:37.613

> 我有一个类声明文件：mdfTree.h，一个类 mdfTree.cpp 的实现，以及一个 mdfTree_x.cpp 文件，其中我创建了一个 mdfTree 类的对象并调用它的公共函数，然后调用一些私有成员mdfTree 的变量。

您的程序需要 mdfTree.cpp 和 mdfTree_x.cpp 中定义的功能。因此，您需要编译这两个文件，并且您的链接需要合并 mdfTree.o 和 mdfTree_x.o。

您可以编写两条规则，一条用于编译 mdfTree.cpp，另一条用于编译 mdfTree_x.cpp。这将很快失控。作恶。*一条规则将它们全部建造，一条规则找到它们，一条规则将它们全部带入并在黑暗中束缚它们。*

```
objects = mdfTree_x.o mdfTree.o
$(objects): %.o: %.cpp
   g++ $(CXXFLAGS) -c $< 
```

注意`$(LDFLAGS)`上面的编译规则中没有。编译时不应指定链接选项。

您需要链接对象以形成可执行文件：

```
mdfTree_x: $(objects)
   g++ $(LDFLAGS) -o $@ $^ $(LDLIBS) 
```

请注意，现在您确实需要指定链接器选项；你正在链接。

下一步之前的最后一点：您在生成文件中指定规则的顺序通常无关紧要。然而，有一个例外。第一条规则是默认规则，如果您在命令中根本没有指定任何目标，则将使用该规则`make`。将默认规则显式放置在 makefile 的最顶部附近是个好主意。例如，将以下内容放在 makefile 顶部附近的任何其他规则之前：

```
default: mdfTree_x 
```

> mdfTree.cpp 和 mdfTree_x.cpp 中有一个#include mdfTree.h。mdfTree_x.cpp 是否也需要#include mdfTree.cpp？

*从来没有* `#include`源文件。绝不。让链接器这样做。

然而，这里缺少一些东西。假设您更改 mdfTree.h。你需要重建。到目前为止，makefile 不会这样做。缺少的是对 mdfTree.h 的依赖。在这种情况下，这个依赖问题有一个简单的解决方案：只需指定依赖。

```
$(objects): mdfTree.h 
```

一般来说，这个头依赖问题是一个非常困难的问题。最好不要将那些头文件依赖项放在makefile中。让一些自动化工具`makedepend`为您找出这些依赖关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T12:34:04.600

您需要显式添加所有依赖项，在这种情况下，您的可执行文件依赖于已构建的 mdfTree.o，而 mdfTree.o 和 mdfTree_x.o 依赖于 mdfTree.h。你的依赖应该像

```
mdfTree_x:mdfTree_x.o mdfTree.o
mdfTree.o:mdfTree.cpp mdfTree.h
mdfTree_x.o:mdfTree_x.cpp mdfTree.h 
```

一些编译器（例如 gnu 和 intel）能够以 make 格式自动列出头文件依赖项。例如，当任何`mdfTree_x.cpp`,`mdfTree.cpp`或`mdfTree.h`被更改时，此 makefile 将重新生成可执行文件：

```
# Compiler flags...
CPPFLAGS+=-MMD -MP
mdfTree_x:mdfTree_x.o mdfTree.o
-include mdfTree_x.d mdfTree.d 
```

CPPFLAGS 将在编译时创建一个带有头文件依赖项的 .d 文件，如果存在，-include 行将尝试将它们包含到 makefile 中（如果它们不存在，源文件无论如何都会重新编译，所以额外的依赖项不要'没关系）。.d 文件的内容类似于

```
mdfTree.o:mdfTree.h 
```

此外，在大多数情况下，您不需要显式编写 make 规则 - 例如，如果您有一个文件`foo.o`列为依赖项 gnu make 的默认规则将运行

```
$(CXX) $(CPPFLAGS) $(CXXFLAGS) -c -o foo.o foo.cpp 
```

（其他语言也类似）。如果可执行文件名称与目标文件之一匹配，则类似地链接是自动的，例如

```
foo:foo.o 
```

将运行（注意 CC 不是 CXX）

```
$(CC) $(LDFLAGS) -o foo foo.o $(LDLIBS) 
```

使用默认规则使 makefile 更简单，并且还允许您使用环境变量来设置默认编译器。

# jquery-animate - 将 div 高度设置为其内容的总和

> ID：13030145
> 
> 赞同：0
> 
> 时间：2012-10-23T12:11:24.840
> 
> 标签：jquery-animate

我有一个 div 里面有四个容器，它溢出隐藏了一些内容，当它被点击时，我希望它动画到这四个容器总和的高度。现在它还没有完全达到高度，我不知道为什么。我试图将动画提升到新高度的容器是新闻。我想我有两个问题，为什么我没有将它动画到正确的高度，两个有没有更好的方法将容器的内容添加在一起？我在这里设置了一个 js bin [http://jsbin.com/elijuj/2/edit](http://jsbin.com/elijuj/2/edit)这就是我现在的代码：

HTML

```
<body>
<DIV id="container_total">
<div id="news" class="shadow blue">
  <div id="news_1">bla bla bla bla bla blabla bla bla bla bla blabla bla bla bla bla 
blabla bla bla bla bla blabla bla bla bla bla bla</div>
  <div id="news_2">bla bla bla bla bla blabla bla bla bla bla blabla bla bla bla bla 
bla</div>
  <div id="news_3">bla bla bla bla bla blabla bla bla bla bla blabla bla bla bla bla 
blabla bla bla bla bla blabla bla bla bla bla bla</div>
  <div id="news_4">bla bla bla bla bla blabla bla bla bla bla blabla bla bla bla bla  
blabla bla bla bla bla blabla bla bla bla bla bla</div>
</div>
<div id="photos" class="shadow blue">
</div>
<div id="welcome" class="shadow blue">
</div>
<div id="update_1" class="shadow blue">
</div>
<div id="update_2" class="shadow blue">
</div>
<div id="events" class="shadow blue">
</div>
<div id="directions" class="shadow blue">
</div>
</DIV>
</body> 
```

CSS

```
#container_total {
width: 489px;
position: relative;
border: 1px solid red;
}
#news {
width: 314px;
height: 165px;
position: absolute;
top: 0px;
left: 0px;
overflow: hidden;
cursor: pointer;
}
#news_1 {
 padding-top:5px;
padding-bottom:5px;
padding-left:10px;
padding-right:10px;
border:1px solid blue;
}
#news_2 {
padding-top:5px;
padding-bottom:5px;
padding-left:10px;
padding-right:10px;
border:1px solid blue;
}
#news_3 {
padding-top:5px;
padding-bottom:5px;
padding-left:10px;
padding-right:10px;
border:1px solid blue;
}
#news_4 {
padding-top:5px;
padding-bottom:5px;
padding-left:10px;
padding-right:10px;
border:1px solid blue;
}

#photos {
width: 160px;
height: 165px;
top: 0px;
right: 0px;
position: absolute;
}
#welcome {
width: 489px;
height: 200px;
top: 180px;
position: absolute;
overflow: hidden;
}
#update_1 {
width: 160px;
height: 165px;
top: 395px;
right: 175px;
position: absolute;
overflow: hidden;
}
#update_2 {
width: 160px;
height: 165px;
top: 395px;
right: 0px;
position: absolute;
overflow: hidden;
}
#events {
width: 314px;
height: 165px;
top: 575px;
left: 0px;
position: absolute;
overflow: hidden;
}
#directions {
width: 160px;
height: 165px;
top: 575px;
right: 0px;
position: absolute;
z-index: 4;
overflow: hidden;
}
.shadow {
-webkit-box-shadow: 0px 0px 6px 0px rgba(0, 0, 0, .3);
-moz-box-shadow: 0px 0px 6px 0px rgba(0, 0, 0, .3);
box-shadow: 0px 0px 6px 0px rgba(0, 0, 0, .3);
}
.blue {
background: #eff5f8;
} 
```

JS

```
$("#container_total").css("height", $("#news").height() + $("#welcome").height() +   
$("#update_1").height() + $("#directions").height() + 60);

function news_open() {

$("#container_total").animate({
"height": $("#news_1").height() + $("#news_2").height() + $("#news_3").height() +  
$("#news_4").height() + $("#welcome").height() + $("#update_1").height() +   
$("#directions").height() + 60
}, 450 );

$("#news").animate({
"height": $("#news_1").height() + $("#news_2").height() + $("#news_3").height() +     
 $("#news_4").height()
}, 450 );

$("#welcome").animate({
"top":180 + $("#news_1").height() + $("#news_2").height() + $("#news_3").height() +  
$("#news_4").height() - 165
}, 450 );

$("#update_1").animate({
"top":395 + $("#news_1").height() + $("#news_2").height() + $("#news_3").height() +  
$("#news_4").height() - 165
}, 450 );

$("#update_2").animate({
"top":395 + $("#news_1").height() + $("#news_2").height() + $("#news_3").height() +  
$("#news_4").height() - 165
}, 450 );

$("#events").animate({
"top":575 + $("#news_1").height() + $("#news_2").height() + $("#news_3").height() +  
$("#news_4").height() - 165
}, 450 );

$("#directions").animate({
"top":575 + $("#news_1").height() + $("#news_2").height() + $("#news_3").height() +  
$("#news_4").height() - 165
}, 450 );
}

$("#news").click(function() {
news_open();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:18:21.817

我认为 TweenLite 和 TweenMax 比 jQuery anmiaton 更好：http: [//www.greensock.com](http://www.greensock.com)，特别是在性能方面：http: [//www.greensock.com/js/speed.html](http://www.greensock.com/js/speed.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:51:39.360

好吧，想通了，发生了两件事，每个 div 上的 1 px 边框没有被计算在内，并且因为 div 的内容是文本 .height 需要为 news_1 到 news_4 的 .innerHeight()

# ruby - 如何使用 NGINX 部署 Ruby Rack 应用程序

> ID：13030149
> 
> 赞同：12
> 
> 时间：2012-10-23T12:11:38.023
> 
> 标签：ruby, nginx, rack

我想用 NGINX 部署一个简单的 Ruby Rack 服务。我在互联网上阅读了各种各样的东西，但没有一个足够有用。可以说我有这个（实际上它有点复杂但仍然<200行代码服务）：

```
require 'rack'

class HelloWorld
  def call(env)
    [200, {"Content-Type" => "text/plain"}, ["Hello world!"]]
  end
end

Rack::Handler::Mongrel.run HelloWorld, Port: 9292 
```

我想知道用 NGINX 部署它的最佳方法是什么。也许FCGI或别的什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T13:29:15.200

这是您要使用`unicorn`/`thin`解决方案的情况的基本 nginx 配置：

```
upstream rack_upstream {
  server 127.0.0.1:9292;
}

server {
  listen       80;
  server_name  domain.tld;
  charset UTF-8;

  location / {

    proxy_pass http://rack_upstream;
    proxy_redirect     off;
    proxy_set_header   Host             $host;
    proxy_set_header   X-Real-IP        $remote_addr;
    proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;
  }

  location ~* ^.+\.(jpg|jpeg|gif|png|css|js)$ {
    root /path/to/static/files;
  }
} 
```

如果您以 root 身份运行 nginx，您将可以在端口 80 上为您的站点提供服务。

否则更改`listen 80`为`listen SOME-AVAILABLE-PORT`

替换`domain.tld`为您的站点名称

`(jpg|jpeg|gif|png|css|js)`您还可以在正则表达式中添加要由 nginx 提供的文件的扩展名，并通过`|`

更多信息请访问：

[http://wiki.nginx.org/DirectiveIndex](http://wiki.nginx.org/DirectiveIndex)

[http://wiki.nginx.org/ServerBlockExample](http://wiki.nginx.org/ServerBlockExample)

[http://wiki.nginx.org/FullExample](http://wiki.nginx.org/FullExample)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-23T12:17:48.753

最简单的事情可能是[乘客](http://www.modrails.com/documentation/Users%20guide%20Nginx.html)，它允许 nginx 服务（除其他外）任何基于机架的应用程序。它很容易设置，但是由于 nginx 没有可加载的模块，你必须从源代码安装 nginx（安装程序会为你处理所有这些）。

另一种流行的方法是让 nginx 代理独角兽。Unicorn 是一个 ruby​​ 网络服务器，可以托管任何机架应用程序。通常，您让 nginx 处理静态资产并将其余的发送给 unicorn。与 Thin、mongrel 等相比，Unicorn 具有一些不错的功能，例如它几乎可以开箱即用地处理无缝重启。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-09T23:35:39.113

[使用预编译的乘客二进制文件（对于 Debian/Ubuntu](http://blog.phusion.nl/2013/09/11/debian-and-ubuntu-packages-for-phusion-passenger/) ）部署 nginx+passenger 非常容易。具有以下项目的目录结构很重要：

```
/var/www/my_app:
    \-- public/   <- public root of webserver
    \-- config.ru <- that's where you place hello world
    \-- tmp
        \-- restart.txt 
```

nginx 配置（可能例如 in `/etc/nginx/sites-available/my_site`）：

```
server {
  listen 80;
  server_name example.com;
  root /var/www/my_app/public;

  passenger_enabled on;
  passenger_ruby /usr/bin/ruby;    
} 
```

当您想重新启动应用程序时，只需运行

```
touch /var/www/my_app/tmp/restart.txt 
```

要在 Debian 上启用您的站点，请创建一个符号

```
ln -s /etc/nginx/sites-available/my_site /etc/nginx/sites-enabled/my_site 
```

并重新加载 nginx`/etc/init.d/nginx reload`

# php - PHP如何使用多个正则表达式分解字符串？

> ID：13030150
> 
> 赞同：1
> 
> 时间：2012-10-23T12:11:39.277
> 
> 标签：php, regex, parsing

我有一个长字符串，由一系列由单个字符分隔的段组成`~`。

例子：

```
ST*Any*Characters*are*allowed*here~optional*segment*~optional*segment*~IT1*Any*Characters*are*allowed*here~optional*segment*~IT1*Any*Characters*are*allowed*here~IT1*Any*Characters*are*allowed*here~optional*segment*~optional*segment*~TDS*Any*Characters*are*allowed*here~optional*segment*~optional*segment*~ 
```

请注意，这是一个完全没有新行的字符串。我只是为了便于阅读而对其进行了格式化。

输出应该是：

```
Array{
      [0]=>ST*Any*Characters*are*allowed*here~optional*segment*~optional*segment*

      [1]=>Array{
                 [0]=>IT1*Any*Characters*are*allowed*here~optional*segment*  
                 [1]=>IT1*Any*Characters*are*allowed*here 
                 [2]=>IT1*Any*Characters*are*allowed*here~optional*segment*~optional*segment*  
                }

      [2]=>TDS*Any*Characters*are*allowed*here~optional*segment*~optional*segment*
} 
```

如何从输入字符串生成此输出？

问题是我只能保证这些段（`ST`, `IT1`, `TDS`）的开头是强制性的，但它们后面可能跟着随机数量的可选段。

当然，分隔符`~`可能只出现在段之间而不是在段内。

**更新：**我需要将字符串分解为 3 个部分：

1.  从 开始`ST`直到第一次出现的字符串`IT1`。
2.  `IT1`以 next 开始和结束的字符串集合`IT1`。
3.  最后的字符串从字符串开始`TDS`直到字符串的结尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:17:46.907

根据您更新的问题，我会使用 preg_split：

```
$var = '~' . "ST*Any*Characters*are*allowed*here~optional*segment*~optional*segment*~IT1*Any*Characters*are*allowed*here~optional*segment*~IT1*Any*Characters*are*allowed*here~IT1*Any*Characters*are*allowed*here~optional*segment*~optional*segment*~TDS*Any*Characters*are*allowed*here~optional*segment*~optional*segment*~";

$split = preg_split('/~(ST|IT1|TDS)/', $var, -1, PREG_SPLIT_DELIM_CAPTURE);

$blocks = array('ST' => array(), 'IT1' => array(), 'TDS' => array());

for($i = 1; $i < count($split); $i+=2)
{
    $blocks[$split[$i]][] = $split[$i] . $split[$i+1];
}

var_dump($blocks); 
```

笔记：

1.  我`~`准备让事情变得更容易分裂
2.  我开始 $i 为 1 因为第一个拆分将是空的

**结果**

```
array(3) {
  ["ST"]=>
  array(1) {
    [0]=>
    string(70) "ST*Any*Characters*are*allowed*here~optional*segment*~optional*segment*"
  }
  ["IT1"]=>
  array(3) {
    [0]=>
    string(53) "IT1*Any*Characters*are*allowed*here~optional*segment*"
    [1]=>
    string(35) "IT1*Any*Characters*are*allowed*here"
    [2]=>
    string(71) "IT1*Any*Characters*are*allowed*here~optional*segment*~optional*segment*"
  }
  ["TDS"]=>
  array(1) {
    [0]=>
    string(72) "TDS*Any*Characters*are*allowed*here~optional*segment*~optional*segment*~"
  }
} 
```

# iphone - 如何在theos中使用“MSHookFunction”？

> ID：13030152
> 
> 赞同：1
> 
> 时间：2012-10-23T12:11:44.927
> 
> 标签：iphone, hook, theos

首先感谢 Dustin L. Howett 的伟大理论。但是我要hook一些C函数，所以我必须使用MSHookFunction。然而，logos 似乎不支持挂钩 C 函数。所以我写了“MSHookFunction(func1,replaced_func1,&original_func1);” 在 some.xm 文件中的“%ctor”块中。

编译它。

“错误：从 'objc_class* ( *)(NSString* , NSString*)' 到 'void*' 的无效转换正在初始化 'void MSHookFunction(void*, void*, void**)' 的参数 1”

那么我该怎么做才能用theos解决这个问题呢？

# javascript - 在页面加载时将网站翻译成任何特定语言

> ID：13030153
> 
> 赞同：19
> 
> 时间：2012-10-23T12:11:48.177
> 
> 标签：javascript, jquery, dom-events, google-translate, google-translator-toolkit

任何人都知道如何在加载时使用谷歌翻译将网页翻译成任何语言？

我不想要下拉菜单，我只想在网站加载时将其转换为特定语言。我从 [http://code.google.com/p/jquery-translate/](http://code.google.com/p/jquery-translate/)尝试了很多东西，但都是徒劳的。任何好的建议将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-06-05T21:45:49.510

```
<!--
  This code will translate page contents automatically (without user input)
  Settings located at line 9, current script will translate english to estonian
-->
<style>#google_translate_element,.skiptranslate{display:none;}body{top:0!important;}</style>
<div id="google_translate_element"></div>
<script>
    function googleTranslateElementInit() {
        new google.translate.TranslateElement({
            pageLanguage: 'en', 
            includedLanguages: 'et', 
            autoDisplay: false
        }, 'google_translate_element');
        var a = document.querySelector("#google_translate_element select");
        a.selectedIndex=1;
        a.dispatchEvent(new Event('change'));
    }
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

从这个要点： [https ://gist.github.com/artturik/15bed885bcec6faa95eb73acb2e2ae54](https://gist.github.com/artturik/15bed885bcec6faa95eb73acb2e2ae54)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-31T05:07:03.840

来自[谷歌翻译帮助](http://support.google.com/translate/#2643150)：

> 要创建一个链接，在不提示用户的情况下自动翻译您启用网站翻译器的页面，请使用参数`#googtrans(en|TARGET_LANG_CODE)`。
> 
> 例如，链接 [http://translate.google.com/support/#googtrans(en|fr)](http://translate.google.com/support/#googtrans(en|fr))会自动将页面[http://translate.google.com/support/](http://translate.google.com/support/)翻译成法语。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-23T12:21:14.573

您可以通过为您提供网站 URL从[https://translate.google.com](https://translate.google.com)获取您的谷歌翻译代码。

**像这样：**

```
<div id="google_translate_element"></div><script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'ar', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
}
</script><script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-10T11:22:20.953

它是当前正在使用的工作代码

```
<!DOCTYPE html>
<html lang="en-US">
<head>
<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
}
</script>

<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script type="text/javascript" src="//translate.google.com/#en/hi/Hello"></script>
</head>

<style>
body > .skiptranslate {
    //display: none;
}

.goog-te-banner-frame.skiptranslate {
    display: none !important;
    } 
body {
    top: 0px !important; 
    }

@media print {
  #google_translate_element {display: none;}
}
</style>

<body>
<div id="google_translate_element"></div>

<p>This example displays a simple translate button, with no text.</p>
<p>This example displays a simple translate button, with no text.</p>

<div class="notranslate">
<p >This is a paragraph.</p>
<p >
A particle is kept at rest at the top of a sphere of diameter \(42 m\). When disturbed slightly,
it slides down. At what height \( h \) from the bottom, the particle will leave the sphere <br\>
(a) \( 14m \)
(b) \( 16m \)
(c) \( 35m \)
(d) \( 70m \)

</p>
</div>

</body>
</html> 
```

它将翻译您的网页内容。如果您不想翻译任何特定的 div 内容，只需使用类 notranslate。那么谷歌翻译器将不会翻译该 div 内容。

# javascript - JSON.eval 在某台 PC 中未定义

> ID：13030155
> 
> 赞同：0
> 
> 时间：2012-10-23T12:11:52.907
> 
> 标签：javascript, json, internet-explorer, jscript

这可能听起来很愚蠢，但我无法弄清楚发生了什么，这开始成为一个大问题。

我正在开发一个 .Net Web 应用程序，该应用程序使用 JSON（不是 json2）以及其他 JS 库。在某个代理中，使用了函数 JSON.eval()。奇怪的是，这种方法似乎在我们测试团队成员的计算机中未定义。在我的计算机上（运行与她相同的服务器）我有以下 JSON 对象：

```
JSON 
{
    copyright : "(c)2005 JSON.org",
    license : ...
    stringify : ...
    eval : ...
    parse : ...
} 
```

在有问题的 PC（都是 Win7 和 IE9）中，从调试器控制台评估 JSON 只会给出：

```
JSON 
{
stringify : ...
    parse : ...
} 
```

好像我错过了一些明显的东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:23:00.317

[在某处，您似乎包含了来自http://www.json.org/js.html](http://www.json.org/js.html)的第三方 JSON 对象实现的旧版本。`JSON.eval()`不是标准方法，也不再存在于 Crockford 的 JSON 中。第二个似乎是浏览器原生实现；`.stringify()`并且`.parse()`确实是唯一有保证的方法：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON)

编辑：换句话说，最好的解决方案是更改您的代码以使用`JSON.parse()`

# java - 使用Java根据关键字解析文本

> ID：13030157
> 
> 赞同：0
> 
> 时间：2012-10-23T12:11:54.323
> 
> 标签：java, algorithm, parsing

基本上，我得到了一个文件，其中包含有关人员的详细信息，每个人用新行分隔，例如“

```
name Marioka address 97 Garderners Road birthday 12-11-1982 \n
name Ada Lovelace gender woman\n
name James address 65 Watcher Avenue 
```

“ 等等..

而且，我想将它们解析为 [Keyword : Value] 对数组，例如

```
{[Name, Marioka], [Address, 97 Gardeners Road], [Birthday, 12-11-1982]},
{[Name, Ada Lovelace], [Gender, Woman]}, and so on.... 
```

等等。关键字将是一组定义的单词，在上述情况下：姓名、地址、生日、性别等......

做这个的最好方式是什么？

我就是这样做的，它有效，但想知道是否有更好的解决方案。

```
 private Map<String, String> readRecord(String record) {
        Map<String, String> attributeValuePairs = new HashMap<String, String>();
        Scanner scanner = new Scanner(record);
        String attribute = "", value = ""; 

        /* 
         * 1\. Scan each word. 
         * 2\. Find an attribute keyword and store it at "attribute".
         * 3\. Following words will be stored as "value" until the next keyword is found.
         * 4\. Return value-attribute pairs as HashMap
         */

        while(scanner.hasNext()) {
            String word = scanner.next();
            if (this.isAttribute(word)) {
                if (value.trim() != "") {
                    attributeValuePairs.put(attribute.trim(), value.trim());
                    value = "";
                }
                attribute = word;
            } else {
                value += word + " ";
            }
        }
        if (value.trim() != "") attributeValuePairs.put(attribute, value);

        scanner.close();
        return attributeValuePairs;
    }

    private boolean isAttribute(String word) {
        String[] attributes = {"name", "patientId", 
            "birthday", "phone", "email", "medicalHistory", "address"};
        for (String attribute: attributes) {
            if (word.equalsIgnoreCase(attribute)) return true;
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:32:32.340

要从字符串中提取值，请使用正则表达式。我希望您知道如何从文件中读取每一行以及如何使用结果构建一个数组。

这仍然不是一个好的解决方案，因为如果名称或地址中包含任何关键字，它就不起作用......但这就是你要求的......

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Test {

    public static void main(String[] args) {

        Pattern p = Pattern.compile("name (.+) address (.+) birthday (.+)");

        String text = "name Marioka address 97 Garderners Road birthday 12-11-1982";

        Matcher m = p.matcher(text);

        if (m.matches()) {
            System.out.println(m.group(1) + "\n" + m.group(2) + "\n"
                    + m.group(3));
        } else {
            System.out.println("String does not match");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T13:17:42.413

试试这个：

```
ArrayList<String> keywords = new ArrayList<String>();
    keywords.add("name");
    keywords.add("address");
    keywords.add("birthday");
    keywords.add("gender");
    String s[] = "name James address 65 Watcher Avenue".trim().split(" ");
    Map<String,String> m = new HashMap<String,String>();
    for(int i=0;i<s.length;i++){

        if(keywords.contains(s[i])){
            System.out.println(s[i]);

            String key =s[i];
            StringBuilder b = new StringBuilder();
            i++;
            if(i<s.length){
            while(!(keywords.contains(s[i]))){

                System.out.println("i "+i);
                if(i<s.length-1){
                b.append(s[i] + " ");
                }
                i++;
                if(i>=s.length){
                    b.append(s[i-1]);
                    break;
                }
            }
            }
            m.put(key, b.toString());
            i--;
        }
    }
    System.out.println(m); 
```

只需将要识别的关键字添加到命名的数组列表中即可`keywords`。

已编辑：请注意，它不会生成“如果某人的姓名或地址包含其中一个关键字”的输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:19:31.190

最好的方法是将数据放入地图中，这样您就可以设置一个键值（“name”：“Marioka”）

```
Map<String,String> mp=new HashMap<String, String>();
    // adding or set elements in Map by put method key and value pair
    mp.put("name", "nameData");
    mp.put("address", "addressData")...etc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T12:25:04.747

这需要您（伪代码）：

```
1\.  >Read a line
2\.  >Split it by a delimiter(' ' in your case)
2.5 >Map<String,String> mp = new HashMap<String,String>();
3\.  >for(int i = 0; i < splitArray.length; i += 2){
      try{
        mp.put(splitArray[i],splitArray[i+1]);
      }catch(Exception e){ System.err.println("Syntax Error"); }
4\.  >Bob's your uncle, Fanny's your aunt. 
```

尽管您必须将数据文件修改为“；” =空间。如

```
name Ada;Lovelace 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T12:58:02.910

逐行读取文件并在每一行调用 getKeywordValuePairs() 方法。

```
public class S{

    public static void main(String[] args) {
        System.out.println(getKeywordValuePairs("name Marioka address 97 Garderners Road birthday 12-11-1982",
                new String[]{
                    "name", "address", "birthday", "gghghhjgghjhj"
                }));
    }

    public static String getKeywordValuePairs(String text, String keywords[]) {

        ArrayList<String> keyWordsPresent = new ArrayList<>();
        ArrayList<Integer> indicesOfKeywordsPresent = new ArrayList<>();

        // finding the indices of all the keywords and adding them to the array
        // lists only if the keyword is present
        for (int i = 0; i < keywords.length; i++) {
            int index = text.indexOf(keywords[i]);
            if (index >= 0) {
                keyWordsPresent.add(keywords[i]);
                indicesOfKeywordsPresent.add(index);
            }
        }

        // Creating arrays from Array Lists
        String[] keywordsArray = new String[keyWordsPresent.size()];
        int[] indicesArray = new int[indicesOfKeywordsPresent.size()];
        for (int i = 0; i < keywordsArray.length; i++) {
            keywordsArray[i] = keyWordsPresent.get(i);
            indicesArray[i] = indicesOfKeywordsPresent.get(i);
        }

        // Sorting the keywords and indices arrays based on the position where the keyword appears
        for (int i = 0; i < indicesArray.length; i++) {
            for (int j = 0; j < indicesArray.length - 1 - i; j++) {
                if (indicesArray[i] > indicesArray[i + 1]) {
                    int temp = indicesArray[i];
                    indicesArray[i] = indicesArray[i + 1];
                    indicesArray[i + 1] = temp;
                    String tempString = keywordsArray[i];
                    keywordsArray[i] = keywordsArray[i + 1];
                    keywordsArray[i + 1] = tempString;
                }
            }
        }

        // Creating the result String
        String result = "{";
        for (int i = 0; i < keywordsArray.length; i++) {
            result = result + "[" + keywordsArray[i] + ",";
            if (i == keywordsArray.length - 1) {
                result = result + text.substring(indicesArray[i] + keywordsArray[i].length()) + "]";
            } else {
                result = result + text.substring(indicesArray[i] + keywordsArray[i].length(), indicesArray[i + 1]) + "],";
            }
        }
        result = result + "}";
        return result;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T17:53:54.443

我有一个完全不同的解决方案，探索`Java regular expressions and Enum`读取并将其解析为 pojo 的能力，这是面向未来的解决方案。

步骤-1：定义您的枚举（您可以扩展枚举以添加所有必需的键）

```
public enum PersonEnum {
  name { public void set(Person d,String name) {  d.setName(name) ;} },
  address { public void set(Person d,String address) {  d.setAddress(address); } },
  gender { public void set(Person d,String address) {  d.setOthers(address); } };
  public void set(Person d,String others) { d.setOthers(others);  }
} 
```

第 2 步：定义您的 pojo 类（如果您不需要 pojo，您可以更改枚举以使用`HashMap`）

```
public class Person {

    private String name;
    private String address;
    private String others;

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getAddress() {
        return address;
    }
    public void setAddress(String address) {
        this.address = address;
    }
    public String getOthers() {
        return others;
    }
    public void setOthers(String others) {
        this.others = others;
    }
    @Override
    public String toString() {
        return name+"==>"+address+"==>"+others;
    } 
```

第2步：这是解析器

```
public static void main(String[] args) {

    try {
        String inputs ="name Marioka address 97 Garderners Road birthday 12-11-1982\n name Ada Lovelace gender" +
                " woman address London\n name James address 65 Watcher Avenue";
        Scanner scanner = new Scanner(inputs);
        List<Person> personList = new ArrayList<Person>();
        while(scanner.hasNextLine()){
            String line = scanner.nextLine();
            List<String> filtereList=splitLines(line, "name|address|gender");
            Iterator< String> lineIterator  = filtereList.iterator();
            Person p = new Person();
            while(lineIterator.hasNext()){
                PersonEnum pEnum = PersonEnum.valueOf(lineIterator.next());
                pEnum.set(p, lineIterator.next());
            }
            personList.add(p);
            System.out.println(p);
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
}
public static List<String> splitLines(String inputText, String pString) {
    Pattern pattern =Pattern.compile(pString);
    Matcher m = pattern.matcher(inputText);
    List<String> filteredList = new ArrayList<String>();
    int start = 0;
    while (m.find()) {
        add(inputText.substring(start, m.start()),filteredList);
        add(m.group(),filteredList);
        start = m.end();
    }
    add(inputText.substring(start),filteredList);
    return filteredList;
}
public static void add(String text, List<String> list){
    if(text!=null && !text.trim().isEmpty()){
        list.add(text);
    }
} 
```

注意：您需要在 PersonEnum 中定义可能的枚举常量，否则您需要采取措施防止`InvalidArgumentException`

```
eg: java.lang.IllegalArgumentException: No enum const class com.sa.PersonEnum.address 
```

否则，这可能是我建议干杯的最好的 java(OOP) 解决方案之一！

# python - 手动关闭 subprocess.PIPE

> ID：13030162
> 
> 赞同：1
> 
> 时间：2012-10-23T12:12:07.103
> 
> 标签：python, kill

我在用

```
std = subprocess.PIPE 
```

并检查输出的每一行中的特定术语。如果我“完成”，我会通过 os.kill 手动终止子进程：

```
p = subprocess.Popen(['vprobe' ,'/vprobe/myhello.emt'], shell = False, stdout=subprocess.PIPE, preexec_fn=os.setsid)
while True:
   line = p.stdout.readline()
   logfile.write(line)
   if re.search("done", line):
      break
   print "waiting"
os.kill(p.pid, signal.SIGINT) 
```

该进程确实被杀死（我在unix中使用'ps'命令进行了检查）但最后我得到一个错误：

```
close failed in file object destructor:
Error in sys.excepthook:
Original exception was: 
```

我认为这很可能是因为我在没有实际关闭 PIPE 的情况下终止了该进程。有什么建议我可以手动完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:15:31.190

该`Popen`对象有一个[`terminate`](http://docs.python.org/library/subprocess.html#subprocess.Popen.terminate)方法可以做到这一点。你能不改用这个方法吗？

如果真要杀人用`SIGINT`也有`send_signal`办法。

# ruby - 检查给定字符串是否作为嵌套哈希中的键存在

> ID：13030167
> 
> 赞同：1
> 
> 时间：2012-10-23T12:12:24.420
> 
> 标签：ruby, arrays, hash

给定一个哈希 -

```
hash = { 
         1 => {"ID"         => ["NUMBER", 11]   }, 
         2 => {"TITLE"      => ["VARCHAR2", 5]  },
         3 => {"FIRST_NAME" => ["VARCHAR2", 50] }, 
         4 => {"LAST_NAME"  => ["VARCHAR2", 50] },         
         5 => {"BIRTH_DATE" => ["DATE", -2]     }
       } 
```

和 2 个输入参数 -`"FIRST_NAME"`和`["VARCHAR2",50]`.

最优雅的做法是什么 -

1.  检查是否`"FIRST_NAME"`作为任何嵌套哈希的键存在。
2.  如果它的值`hash[3]["FIRST_NAME"]`是否等于第二个参数即存在`["VARCHAR2",50]`。
3.  如果这 2 个参数匹配，则返回其值为该嵌套哈希的键，即在这种情况下为 3

目前我执行以下操作 -

```
array = hash.values.map {|h| h.to_a}.flatten(2)
puts hash.key(Hash["FIRST_NAME",["VARCHAR2",50]]) if !(index = array.index("FIRST_NAME")).nil? ? array[index+1] == ["VARCHAR2",50] : false # 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:23:10.580

似乎您所做的事情违背了哈希的目的/性能。

您应该使用（我假设）唯一名称“ID”、“TITLE”、“FIRST_NAME”...作为您的顶级键；数字 1-5 似乎未使用。

按键搜索哈希映射很快，必须将所有值映射到数组中，而不是对数组进行线性搜索很慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:32:11.203

你会发现很多信息在你检查[`hash api`](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-key-3F)。

```
a = 'FIRST_NAME'
b = ['VARCHAR2', 50]

hash.each do |k, v|
  if v.key?(a)            # ①
    return k if v[a] == b # ② and ③
  end
end 
```

实际上，您也可以将其编写如下，因为如果它不包含密钥，它将永远不会匹配，只会转到下一次出现。

```
hash.each do |k, v|
  return k if v[a] == b
end 
```

您的示例仅显示一对哈希，如果您需要做更多的新`each`on `v`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T19:31:09.757

有一种方法`key`可以做到这一点：

```
hash.key({"FIRST_NAME" => ["VARCHAR2",50]}) # => 3 
```

# java - 是否可以说服 Java 应用程序在不修改其代码的情况下忽略 SSL 问题？

> ID：13030174
> 
> 赞同：7
> 
> 时间：2012-10-23T12:13:11.440
> 
> 标签：java, ssl

我有一些 Java 应用程序抱怨不同的 SSL 问题，例如自签名证书或不受信任的证书。

由于我没有这些应用程序的代码并且获得良好的证书太难了，我正在寻找一种可以让我强制连接的解决方案。

到目前为止，我尝试了这些，但似乎还不够：

```
-Dcom.sun.net.ssl.checkRevocation=false 
-Djava.security.debug=certpath 
```

我仍然看到：

*   `sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target`
*   `javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T12:45:26.803

通过完全忽略信任验证（例如，使用什么都不做的信任管理器）来忽略证书验证错误的代码修改通常不是正确的方法。它们可能会受到一些开发人员的欢迎，因为他们不必经过任何处理证书的步骤，但他们只是忽略了问题而不是修复它，从而也给 MITM 攻击带来了漏洞。（因为问题随后被消除了，所以它往往永远不会在生产版本中得到修复。）

[JSSE 参考指南](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html#Customization)中描述了配置信任管理的各种方法。

简而言之，您可以将证书显式导入 JRE 信任库（通常`cacerts`是 JRE 目录中的文件），也可以将其导入您自己的信任库（可能基于默认信任库的副本），并使用指定其路径（和相关的`javax.net.ssl.trustStore`）系统属性（参见 JSSE 参考指南）。

这些配置设置会影响所有自己使用默认设置的`SSLSocket`s和`SSLEngine`s（代码中没有具体说明`SSLContext`）。

一些应用程序使用自己的`SSLContext`为某些连接加载特定的密钥库或信任库。这通常使用独立于 JSSE 默认选项的参数进行配置，在这种情况下，您必须检查应用程序文档或代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-23T14:48:36.490

[http://code.google.com/p/misc-utils/wiki/JavaHttpsUrl](http://code.google.com/p/misc-utils/wiki/JavaHttpsUrl)提供了几种侵入式解决方案。

SSLSocketFactory 可以[被系统属性覆盖](https://stackoverflow.com/questions/6078492/how-to-create-custom-sslsocketfactory)。

但是[自定义 HostnameVerifier](https://stackoverflow.com/questions/6031258/java-ssl-how-to-disable-hostname-verification/13032654#13032654)只能通过特殊的 java 代理通过附加的启动参数或[在运行中](https://stackoverflow.com/questions/4817670/how-can-i-add-a-javaagent-to-a-jvm-without-stopping-the-jvm/13032771#13032771)得到认可。

此外，[AspectJ 编织代理](https://stackoverflow.com/questions/6811579/how-to-create-a-jvmti-agent-to-see-all-the-loaded-classes-objects-and-their-fie)可用于[覆盖任何方法行为](https://stackoverflow.com/questions/8273685/is-it-possible-to-override-a-method-at-runtime)。

还可以考虑使用[MiTM HTTPS 代理](https://stackoverflow.com/questions/8129260/man-in-the-middle-mitm-proxy-with-https-support/)的替代方法（如果应用程序允许重新配置 url 和证书）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2019-03-01T16:53:12.320

对的，这是可能的。

使用 JVM 参数：

```
-Dcom.sun.net.ssl.checkRevocation=false 
```

或以编程方式：

您可以覆盖默认的 TrustManager 和 HostnameVerifier 。这个链接给出[了可重用的代码示例](https://tutoref.com/how-to-disable-ssl-certificat-validation-in-java/)。

# database - 如何在 rapidminer 中读取数据库视图

> ID：13030177
> 
> 赞同：0
> 
> 时间：2012-10-23T12:13:14.737
> 
> 标签：database, view, rapidminer

有谁知道如何将数据库中的视图读取到 rapidminer 中？我建立了一个到 Microsoft SQL 服务器的连接，并且我正在使用读取数据库运算符，但它只显示表列表，而不是视图。已经设置好了，我可以使用 Access 看到它。我在 rapidminer 中工作时正在处理该视图，因此我需要一个指向它的实时链接，而不是在 rapidminer 中重新创建查询。有什么我遗漏的东西，还是 rapidminer 不支持视图？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T17:28:59.080

在“读取数据库”运算符中，您可以手动输入表名，即使它们不属于下拉列表 - 所以只需`myViewName`在下拉列表中输入。或者，您可以选择`query`define_query 参数，然后`SELECT * FROM myViewName`在可通过 Build SQL Query 访问的对话框中输入类似内容。

# php - symfony routing.yml 的生产服务器问题

> ID：13030183
> 
> 赞同：0
> 
> 时间：2012-10-23T12:13:43.047
> 
> 标签：php, .htaccess, symfony1, routing, symfony-1.4

我在 symfony 1.4 中有一个现有项目

对于一些新的静态页面，我在 routing.yml 文件中添加了一些规则。添加的规则是

```
homepage:
  url:   /
  param: { module: page, action: index }

career:
  url:   /career
  param: { module: page, action: career }

company:
  url:   /company
  param: { module: page, action: company }

faq:
  url:   /faq
  param: { module: page, action: faq }

presskit:
  url:   /presskit
  param: { module: page, action: presskit }

privacy:
  url:   /privacy
  param: { module: page, action: privacy }

team:
  url:   /team
  param: { module: page, action: team }

terms:
  url:   /terms
  param: { module: page, action: terms } 
```

在视图/部分上，我使用`<?PHP echo url_for('page/career') ?>`,`<?PHP echo url_for('page/index') ?>`等进行导航。它在分别生成导航链接的本地开发框上运行`domain.com/career`良好`domain.com/`。

但是在生产服务器上，导航中的链接是`domain.com/index.php/career`等`domain.com/index.php/`。开发框和生产服务器都有相同的 .htaccess 文件（Symfony 1.4 默认 .htaccess 文件）。有人可以建议可能是根本原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:20:07.960

你应该有这个`settings.yml`

```
prod (or "all", if you want):
  .settings:
    no_script_name:         true 
```

# jquery - 关闭对话框后 Jquery 微调器不起作用

> ID：13030186
> 
> 赞同：1
> 
> 时间：2012-10-23T12:13:48.020
> 
> 标签：jquery, asp.net, spinner

我遇到了关闭 dilog 后出现的问题，我页面中的微调器不再工作。在加载我的页面时，所有微调器都工作，但在打开对话框并关闭它后，微调器不工作。

我的页面中有 aspx 微调器（大约 10 个），并且 div 用作对话框，单击图像时打开对话框

我正在使用 Jquery：微调器，对话框

ASP.NET jQuery

```
//dialog
$("#Div_Com").dialog({

            autoOpen: false,
            width: 'auto',
            modal: true,
            autoResize: true,
            show: "blind",
            hide: "blind",
            open: function (type, data) {
                $(this).parent().appendTo($("#form1"));
            }
        });

//Open dialog
$('#img_open_click').live('click', function () {

            $("#Div_Com').dialog('open');
        });

//Close dialog
$('#img_Close_click').live('click', function () {
            $("#Div_Com').dialog(close);
        });

//Spinner
 $("#Spinner").spinner({
                min: -7, max: 0,
                spin: function (event, ui) {
                    alert('ok');
                    if ($("#Spinner").spinner("value") < ui.value) { alert('1'); }
                    else if ($("#Spinner").spinner("value") > ui.value) { alert('2'); }
                    else { };
                }
            });

ASPX
 // spinner declaration
  < asp:TextBox ID="Spinner"  Text="0" runat="server" style="text-align:center;"         BackColor="#D7ECFA" ReadOnly="true"></asp:TextBox> '

//Image to open dialog
      < img id="img_open_click" src="../App_Themes/oxygene/img/picto_stylo.png" alt="" />

//Div as dialog
   < div id="Div_Com" class="hide" >                                         
   < asp:TextBox ID="Com_Multi" runat="server" BackColor="#D7ECFA" Rows="9"    TextMode="MultiLine" Width="90%" Height="90%" ></asp:TextBox>

< img  src="../App_Themes/oxygene/img/button_cancel.jpg" alt="" id="img_Close_click"/>
 < /div> 
```

# java - 加载包含生成的 HTML 的 HTML 页面

> ID：13030191
> 
> 赞同：1
> 
> 时间：2012-10-23T12:14:06.493
> 
> 标签：java, javascript, html

Google 今天似乎让我失望了：我正在寻找一种将远程 html 页面加载到我的 Java 应用程序中的方法。此 HTML 页面包含一些生成大部分内容的 JavaScript。现在我认为用 Java 打开页面并查看 HTML 会相当简单。

当我使用 URL.openStream() 读取文件时，我得到了带有 JavaScript 的 HTML 源代码，而没有生成的 HTML（这是我所期望的）。那么我如何从这个获取包含生成内容的 HTML 源？我认为这会相当简单，但在 Google 上几个小时后，我完全陷入了 Rhino、EnvJs、Jsoup 中，但这并没有真正让我有任何收获。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:08:20.887

是的，基本上没有简单的解决方案，因为您需要实际呈现页面，所以您需要一个 javascript 引擎（如feeela 所说）。

一种解决方案是使用 webkit。我没有在 Java 中使用它，而是在 Python 中使用它。您可以[在多个平台上查看 Java 应用程序中的 WebKit 浏览器](https://stackoverflow.com/questions/3279337/webkit-browser-in-java-app-on-multiple-platforms)

# php - 数据表和tinymce

> ID：13030193
> 
> 赞同：0
> 
> 时间：2012-10-23T12:14:25.393
> 
> 标签：php, tinymce, datatables

如何在数据表中启用/显示 tincymce？

对于每个数据表行，我都有一个显示 html 内容的文本区域。我需要在 tincymce 而不是 textarea 中显示这个 html 内容。因此，如果我每页有十行，我将有十行显示 html 内容的 tinymces。

我正在从服务器获取 html 内容，但目前在裸 html textarea 中显示此内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:25:59.130

首先，我假设您在 asp.net 中工作，因为您没有使用任何编程语言标记它。

现在已经不碍事了，让我们首先将所有要转换为编辑器的元素放在一个数组中：

```
c = new Array('<%= ((UpdatePanel1.FindControl("FormView1")).FindControl("txteditor")).ClientID %>', '...'); 
```

然后将它们组合成一个 tinyMCE 可读的字符串：

```
var sC = c.join(); 
```

最后在 tinyMCE.init() 中告诉你想要将哪些元素变成编辑器：

```
elements: sC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:26:17.540

首先，您需要将数据库内容呈现到服务器端的 textarea 元素中或在 ajax 调用之后（这取决于您的系统和用例）。现在您需要初始化 tinymce 编辑器。

您应该[在此处](http://www.tinymce.com/wiki.php/%22For_Dummies%22)查看有关您需要做什么的详细说明。

[TinyMCE 常见问题解答](http://www.tinymce.com/wiki.php/TinyMCE_FAQ)也可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:30:22.653

像这样的东西怎么样（未测试）

向所有文本区域添加一个相同的类，并在函数的`editor_selector`属性中使用它`tinyMCE.init`：

多选示例

[类选择器/取消选择器](http://www.tinymce.com/tryit/selector_deselector.php)

```
<script type="text/javascript">
tinyMCE.init({
        mode : "textareas",
        theme : "simple",
        editor_selector : "mceEditor",
        editor_deselector : "mceNoEditor"
});
</script>

<form method="post" action="somepage">
        <textarea id="content1" name="content1" class="mceEditor" cols="85" rows="10">This will be a editor, since it has a selector class.</textarea>
        <textarea id="content2" name="content2" class="mceEditor" cols="85" rows="10">This will be a editor, since it has a selector class.</textarea>
        <textarea id="content3" name="content3" class="mceNoEditor" cols="85" rows="10">This is not a editor since it has a deselector class.</textarea>
</form> 
```

同样的事情也应该适用于数据表......

# mysql - 我如何获取回复的授权计数

> ID：13030195
> 
> 赞同：1
> 
> 时间：2012-10-23T12:14:28.213
> 
> 标签：mysql, count

我正在处理评论，我必须显示回复的数量，而评论回复的列表是第 n 级，例如

```
parent
       ->child
            -> child
                -> child
Parent
      -> child
      ->child
          ->child 
```

我的 Sql 是：

```
CREATE TABLE IF NOT EXISTS `comment` (
  `comment_id` bigint(11) NOT NULL AUTO_INCREMENT COMMENT 'This is primary key of the table',  
  `parent_comment_id` bigint(11) NOT NULL, 
  `text` text NOT NULL,
  PRIMARY KEY (`comment_id`),
  KEY `user_id` (`user_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=8 ;

INSERT INTO `comment` (`comment_id`, parent_comment_id`, `text`) VALUES
(1, 0, 'Parent'),
(2, 1, 'child'),
(3,  2, 'child'),
(4,  3, 'child'),
(5,  1, 'child2'),
(6, 0, 'Parent2'),
(7,  6,'child of parent2'); 
```

请帮助我如何获取回复的数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:24:35.133

```
SELECT COUNT (*) FROM `comment` WHERE parent_comment_id = :id 
```

会给你回复评论的数量`:id`。如果您需要整个线程中的评论数，则需要多次执行此查询，为 . 传递不同的值`:id`。或者，您可以使用[嵌套集](http://en.wikipedia.org/wiki/Nested_set_model)来存储父子关系。

# java - 如何实现滚动到底部时刷新的 JTable

> ID：13030196
> 
> 赞同：1
> 
> 时间：2012-10-23T12:14:28.887
> 
> 标签：java, swing, user-interface, jtable, tablemodel

我试图了解一个 Swing 应用程序，特别是表是如何工作的。有一个表从数据库中检索数据并将数据显示在 JTable 上。我浏览了代码并弄清楚了如何从数据库中读取数据。

我似乎在努力解决的一件事是数据如何在表格上显示以及如何更新。我知道如何在表格上显示数据，但与此表格的不同之处在于数据是动态更新的。ie 并非所有从数据库中检索到的数据都显示在表格中。

看起来应用程序显示了许多行，当用户滚动鼠标或将滚动条移动到表格的底部/末尾时，应用程序会自动更新表格并显示更多数据（我可以看到有一点延迟当这种情况发生时）。

为了让我能够弄清楚上述内容是如何实现的，我需要更多关于这种技术的信息，即这种技术称为什么以及使用的常用接口/类是什么。

指向如何实现上述目标的示例的链接将非常有用，因为我需要先查看简化版本。

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T12:20:20.613

我不确定这种技术的名称是什么，但我知道它现在在移动世界中非常普遍（例如 Twitter 和 Facebook 应用程序使用它）。出于实际目的，实现可能是具有一些修改组件的普通 JTable。

1.  自己编写`TableModel`来显示数据（这很容易做到），您可以从任何地方检索信息，并根据需要添加/删除数据。[请参阅此处](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/TableModel.html)的文档。您只需要实现少数几个方法。

    这里重要的主要事情是`getRowCount()`方法，当您从表中添加/删除数据时您将更改该`getValueAt()`方法，以及检索要在表中显示的数据的方法。

    可能会有一个类似`TableModel`数组的对象（例如`ArrayList`) 包含应在表中显示的数据。当您想从表中添加/删除数据（即“刷新”）时，您只需从该数组列表对象中添加/删除行，然后触发表上的刷新以获取更改。

    或者，如果使用数据库，您可以在要在表上显示值时调用的数据库`Cursor`中打开一个数据库。`TableModel``getValueAt()`

2.  您将需要覆盖其中一个 GUI 组件，例如`JScrollBar`，或将 a 添加`Listener`到滚动条，以便它检测您何时尝试滚动超出表格末尾并触发刷新。

3.  从视觉上看，如果您想在滚动到表格末尾时显示一些特殊的东西（例如显示“刷新”一词），则需要覆盖当前外观的一些绘画组件。如果您想在它的“高度”上添加一些刻度，您还需要覆盖`JScrollBar`它，以便您可以将滚动条实际移动到“刷新”部分（只是一个显示的东西 - 上面的监听器应该做实际刷新工作）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T13:04:47.067

这种技术称为*延迟加载*。有不同的方法可以使 JTable 变得懒惰。

实现惰性表并不像看起来那么容易，因为您将面临表的不同加载状态。我实现延迟加载表的首选方法（与 WATTO Studios 描述的略有不同）是使用/创建延迟加载列表作为 tablemodel 并使用代理对象来触发新数据的加载。因此，不是在初始化表时加载整个数据，而是只用代理对象（空数据对象，而只注入原始 id）填充表。每当向代理对象询问任何值时（例如，来自渲染器，这只会在行变得可见时发生），您从服务中获取原始数据对象 - 并且可能还会加载接下来的 50 个对象，以避免向您的服务器询问每一行 - 并用新数据替换代理对象。

乍一看，这看起来有点简单，但根据您的数据，它可能会变得非常混乱。例如，当您的数据在自己和类似的东西上使用自引用外键时。此外，该表并没有通过仅在需要时加载数据来获得额外的性能，但它仍然经常感觉有点慢，因为它只是在需要时加载数据。因此平衡性能和平滑滚动行为是这里的挑战，以及过滤和排序数据。

使用关键字*延迟加载*，您应该会找到一些有关此主题的示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T13:08:25.337

*   您的大部分观点（包括`JViewport`）在[圣诞树应用程序中得到解决](http://www.oracle.com/technetwork/java/christmastree-138396.html)

*   休息[可以在这里](https://stackoverflow.com/a/11330436/714968)

*   为了获得更好的帮助，请尽快发布[SSCCE](http://sscce.org/)，但有几种方法，必须决定......，

# drupal-6 - 需要将drupal评论导出到disqus

> ID：13030202
> 
> 赞同：1
> 
> 时间：2012-10-23T12:15:08.840
> 
> 标签：drupal-6, comments, export, disqus

我们想在我们现有的 drupa6 站点中实现 disqus 评论系统。我们已经安装了 disqus 模块并且配置良好并且工作正常。

但是我们的drupal评论表中有20万条评论。我们需要将它们导出到disqus，但我们没有得到任何示例xml格式或任何工具来导出评论。我们无法一次尝试导出它们，因为评论数量为 200k。有人可以帮我将评论导出到disqus。

谢谢，拉古

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T23:37:13.307

有一个 Ruby 脚本可以为您执行此操作。

*   [从GitHub](https://github.com)下载[这个](https://github.com/pichot/drupal6-to-disqus-xml)项目。
*   阅读 README.md 文件；您需要在 config.example 中提供您的 MYSQL 数据库信息。
*   运行脚本。如果您的评论输出超过 45MB，它甚至会为您拆分 xml。
*   转到[Disqus->Import](http://import.disqus.com/)，选择您的域并导入 XML。确保选择正确的格式。

~~对于 Drupal 7 解决方案，请使用[Disqus Migrate](http://drupal.org/sandbox/dwkitchen/1483518)模块。您需要使用 Git 检查它并将其安装为 Drupal 模块。~~

## 更新

对于 Drupal 7，[Disqus Migrate](https://www.drupal.org/project/disqus_migrate)模块现在是稳定的。像任何其他模块一样安装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:39:29.010

我认为您必须等到 D7，因为 Drupal 模块的下一个版本可以将评论导出到 Disqus。

# javascript - Magento UploaderJsObject 未定义

> ID：13030205
> 
> 赞同：19
> 
> 时间：2012-10-23T12:15:13.000
> 
> 标签：javascript, magento, object, upload, admin

我遇到了一个非常奇怪的错误，我似乎无法解决。在我想要上传/查看/删除图像的管理区域中的任何地方都没有显示任何内容。

我的“检查元素”控制台给了我这个错误：

```
Uncaught ReferenceError: id_23b2a41c446dee70b327b51065e06137_UploaderJsObject is not defined 
```

我将其追踪到具有以下代码的 gallery.phtml 文件：

```
<script type="text/javascript">
//<![CDATA[
    var <?php echo $_block->getJsObjectName(); ?> = new Product.Gallery('<?php echo         $_block->getHtmlId() ?>', <?php if ($_block->getElement()->getReadonly()):?>null<?php     else:?><?php echo $_block->getUploader()->getJsObjectName() ?><?php endif;?>, <?php echo $_block->getImageTypesJson() ?>);
//]]>
</script> 
```

我完全不知道这里出了什么问题。我没有弄乱任何核心文件。我也没有改变任何 javascript 的东西。

我希望有人可以帮助我找出问题所在。从昨天开始一直卡在这个错误上..

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-17T03:13:02.710

最近克隆了一个 repo 或尝试设置另一个 magento 环境并看到此错误？检查以下文件是否在适当的位置，这些文件可能由于是二进制文件（swf flash 文件）或被版本控制软件忽略而被遗忘：

```
/skin/adminhtml/default/default/media/uploader.swf
/skin/adminhtml/default/default/media/uploaderSingle.swf
/skin/adminhtml/default/default/media/editor.swf
/skin/adminhtml/default/default/media/flex.swf 
```

为了更好地衡量这些文件：

```
/app/design/adminhtml/default/default/template/media/uploader.phtml
/app/design/adminhtml/default/default/template/media/editor.phtml 
```

从magento 1.9开始，下面有人很高兴提到：

```
/skin/adminhtml/default/default/media/editor.swf 
```

不存在，所以不要担心那个文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-20T00:32:18.950

我有同样的问题。

在我的 php.ini 中，max_post 设置为 0 应该禁用它，但是这会破坏 JS Uploader，因为它会查询 php 的最大上传大小。

我只是将其设置为 100M，然后出现了浏览和上传按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-13T07:05:40.387

就我而言，删除文件`Dull_Uploader.xml`解决`/app/etc/modules`了这个特定问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T12:19:07.290

好的，哇，我的同事在发布这个问题后一秒钟就发现了它。

如果其他人有这个问题。

不知何故，皮肤文件夹中的某些文件丢失了。

希望有人会发现这些信息有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-05T11:22:33.210

我检查了此页面中提供的所有内容，并且所有文件都在正确的位置。进一步的调查把我带到了这个[页面](https://stackoverflow.com/questions/23467147/magento-1-8-product-image-upload-on-firefox-not-working)。

然后我意识到我在Firefox中，这可能就是原因。

安装flash player后一切正常。

希望这会对某人有所帮助。

**更新-1（以防参考链接更改）：**

```
Check for the flash player

http://helpx.adobe.com/flash-player.html
Your magento root directory should not be password protected using .htpasswd file.

Please post if you are getting any error. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-17T07:02:07.777

@danny-z 给出的答案似乎已经成功了。

我还想补充一点，所有这些文件的权限都应该设置为 0644。所以只需`cd`进入每个目录并使用`ls -l`. 它们应该显示为`-rw-r--r--`. 如果他们不这样做`chmod 0644 *`（确保在运行时您在目录中，这样它只会影响那些文件），然后再次检查它们以确保它有效。

`.gitignore`此外，@KPheasey 在排除 all的评论中提到了上述内容`media`。我理解这意味着在将站点部署到服务器时，所有内容都`media`被排除在外`.gitignore`，但`media`在`.gitignore`本地不会阻止这些文件在**本地**工作。只是想澄清一下，因为起初我对那个评论有点困惑。

这些文件对我来说丢失的原因是因为我做了`tar`一个现有网站（在我的本地机器上设置）并排除了`media`，所以我没有得到一个大文件。我的意思是排除主`media`文件夹，但错误地排除了这些（我猜可能还有其他）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-26T07:16:32.670

最后我通过在我的 ubuntu 16.04 上安装 flash 解决了这个问题：

```
sudo apt install adobe-flashplugin 
```

# javascript - onclick 事件在 iPhone 混合应用程序中发生了两次

> ID：13030210
> 
> 赞同：-2
> 
> 时间：2012-10-23T12:15:28.987
> 
> 标签：javascript, ios, dom-events

我正在开发一个 iPhone 混合应用程序。我已经使用 Javascript 插入了一个链接，并定义了应该在`onclick`事件中调用的函数。

当我单击链接函数并执行所需的操作时，如果我单击应用程序主体中的任何位置，则会再次调用相同的函数。

我的应用程序中存在的两个链接都发生了这种情况。

谁能告诉发生了什么错误？

我编写了一个函数来添加图像作为链接。代码如下：

```
// create a link for delete enquiry
var DelLink = document.createElement("a");

// setting the name of the link.
DelLink.setAttribute("name" , "DelButton"+pCurrentEnquiryID);

// image for the delete and its properties.
var DelImage = document.createElement("img");
DelImage.setAttribute("src","images/delete.png");
DelImage.setAttribute("height","30px");
DelImage.setAttribute("width","30px");

// append image to the link
DelLink.appendChild(DelImage);

//specifying onclick event of the link
DelLink.setAttribute("onclick","DeleteEnquiry(this)");
//DelLink.onclick = "DeleteEnquiry(this)";

return DelLink; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:40:24.883

好的，所以你正在设置`onclick`属性。现在，这在*“传统”*平台上运行良好（具有类似鼠标的设备，带有可用于单击对象的按钮）。触摸设备（名字里有线索）没有这个，而是通过触摸屏幕来操作的。好吧，你知道了，所以我认为你可以理解`touch`事件*非常*过载（多点触控）。

触摸屏幕一秒钟意味着与触摸屏幕一秒钟完全不同的事情。您也可以用 1、2、3 或 4 根手指触摸屏幕。每次都要以不同的方式处理。
为了使事情变得更加复杂，您可以在屏幕上*拖动*或*滑动，这也需要以不同的方式处理。*

幸运的是，我最近编写了一些代码来将某些触摸事件映射到单击处理程序，使用闭包、绑定侦听器和设置超时。因此，这可能会对您有所帮助：

```
if ('ontouchstart' in window)
{//we have a touch device
    document.body.addEventListener('touchstart',function(e)
    {//handle all touch events on the body
        e = e || window.event;
        //not sure about all mobile browsers (win mobile)
        //so I'm playing it safe
        var target = e.target || e.srcElement;
        if (target.tagName.toLowerCase() !== 'a')
        {//didn't touch on a link
            return e;//stop
        }
        //touch must end after .3 seconds, otherwise user is zooming or something
        var timer = setTimeout(function()
        {
            target.removeEventListener('touchend',endHandler,false);//unbind after .3 seconds
            clearTimeout(timer);
        },300);
        var endHandler = function(e)
        {
            e = e || window.event;
            var endTarget = e.target || e.srcElement;//get element on which the touch ended
            clearTimeout(timer);//stop timer
            target.removeEventListener('touchend',endHandler,false);//remove listener
            if (endTarget !== target)
            {//user "swiped"
                return e;
            }
            //touch ended within .3 seconds, and ended on the same element, interpret this as click
            return clickHandlerFunction.apply(target,[e]);//invoke click handler with the target as context
        };
        target.addEventListener('touchend',endHandler,false);//bind touchend listener
    },false);
} 
```

基本上，它的作用是注册*所有*touchstart 事件。首先要检查的是*用户是否触摸了感兴趣的元素*，我想用我的自定义事件处理程序来处理它。如果不是，则返回事件，没有任何变化。如果对元素 touches 感兴趣，我会为该目标上的事件
创建一个侦听器。`touchend`我还设置了一个超时，它将在 0.3 秒后删除该侦听器（以防止泄漏）。如果`touchend`事件触发，检查用户是否在原始元素上被释放，如果没有，将其解释为滑动，然后停止。
如果目标匹配，则在目标的上下文中调用单击处理程序并*传递事件对象！*所以你可以调用`stopPropagation()`和/或`preventDefault()`方法。也通过`touchhandler`清除计时器开始并自行删除（再次：防止内存泄漏）。
与以往一样，这是一个非常非常基本的片段，可以做更多的工作

触摸事件包含更多信息（例如，您可以检查有多少手指正在触摸屏幕）。我也省略了一些我的原始代码，因为那会使它变得*非常*复杂和混乱（我这里没有它，我真的不记得我是如何处理某些情况的）。然而，我可以告诉你，我倾向于检查`e.clientX`和`e.clientY`坐标，如果`touchend`事件在`touchstart`目标的 50px 范围内，我无论如何都会将其映射到点击处理程序：为冷酷和颤抖的人提供一些*软焦点*；）所以甚至因纽特人也可以浏览页面。

无论如何，看看什么对你有用。不过有几个有用的链接：
[Touch table](http://www.quirksmode.org/mobile/tableTouch.html)
[some history](http://www.scribd.com/doc/56583964/Touch-Events-Mobile-Web-Development)
[some touch libs](https://github.com/bebraw/jswiki/wiki/Touch)

# .net - WPF DataGridTemplateColumn 绑定行为

> ID：13030213
> 
> 赞同：0
> 
> 时间：2012-10-23T12:15:31.733
> 
> 标签：.net, wpf, xaml, binding, datagrid

我在下面有一个 DataGridTemplateColumn 设置。我的问题是当我使用组合框更改行员工时，我看到其他一些行也更改了值。我认为它以某种方式与绑定有关，但这很奇怪，因为我在 celleditingtemplate 中似乎看不到我的 itemsource 数据上下文（任务），但我可以在 celltemplate 中看到。

```
<UserControl.Resources>
    <CollectionViewSource x:Key="EmployeeViewSource" Source="{Binding Path=Employees}" />
</UserControl.Resources>
     <DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Path=Tasks}">
     <DataGrid.Columns>
        <DataGridTemplateColumn Header="Employee Name">
            <DataGridTemplateColumn.CellEditingTemplate>
                <DataTemplate>
                    <ComboBox DisplayMemberPath="Name" ItemsSource="{Binding Source={StaticResource EmployeeViewSource}}" SelectedValue="{Binding Path=EmployeeID}" SelectedValuePath="EmployeeID" />
                </DataTemplate>
            </DataGridTemplateColumn.CellEditingTemplate>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Path=Employee.Name, Mode=OneWay}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn> 
```

相关的 ViewModel 如下所示：

```
Class TaskViewModel : ViewModelBase
{
    public ObservableCollection<Task> Tasks { get; private set; }
    Public ObservableCollection<Employee> Employees { get; private set; }

} 
```

任务/员工模型都是具有一些字段的实体生成类。

* * *

更新：我开始认为这可能与 IsSynchronizedWithCurrentItem 属性有关。也许所有的组合框都在尝试同步，因为当前选择的绑定集合正在改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:02:02.397

在遵循“IsSynchronizedWithCurrentItem”属性的引导之后，答案似乎在于 ComboBox。这里有一个更详细的解释：

[https://stackoverflow.com/questions/2458420/wpf-combobox-binding](https://stackoverflow.com/questions/2458420/wpf-combobox-binding/)

# javascript - 页面模板中的 Wordpress 排队脚本失败

> ID：13030221
> 
> 赞同：1
> 
> 时间：2012-10-23T12:15:51.427
> 
> 标签：javascript, wordpress

我正在尝试将脚本排入特定页面模板，但它似乎只是没有在 if 语句中加载任何脚本，我尝试了 is_page 版本并且它做同样的事情。如果有人能指出我哪里出错了，我将不胜感激。

```
function di_load_javascript()  
{  
    // Deregister the included library  
    wp_deregister_script( 'jquery' );  
    // Register the library again from Google's CDN  
    wp_register_script( 'jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js', array(), null, false );  

    wp_register_script( 'jquery-masonry', get_template_directory_uri() . '/js/jquery.masonry.min.js', array( 'jquery' ), null, true );
    wp_register_script( 'blog-scripts', get_template_directory_uri() . '/js/blog.js', array( 'jquery' ), null, true );
    wp_register_script( 'home-scripts', get_template_directory_uri() . '/js/home.js', array( 'jquery' ), null, true );

    // Enqueue the scripts for all pages
    wp_enqueue_script( 'jquery' ); 

    // Enqueue the scripts for Home
    if ( is_front_page() ) {
        wp_enqueue_script('home-scripts');
    };  
    // Enqueue the scripts for Blog (is_page_template fails for some reason)
    //if ( is_page(array(2,'blog','Blog')) ) {
    if ( is_page_template('templates/blog.php') ) {
        wp_enqueue_script('jquery-masonry');    
        wp_enqueue_script('blog-scripts');
    };
} 
add_action( 'wp_enqueue_scripts', 'di_load_javascript' ); 
```

奇怪的是通过 is_front_page 加载主页的脚本很好。我很困扰 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-02-14T06:08:00.863

下面的代码完美地工作。

```
 function my_enqueue_stuff() {

 // "page-templates/about.php" is the path of the template file. If your template file is in Theme's root folder, then use it as "about.php".

        if(is_page_template( 'page-templates/about.php' ))
        {
            wp_enqueue_script( 'lightgallery-js', get_template_directory_uri() . '/js/lightgallery-all.min.js');
            wp_enqueue_script('raventours-picturefill', "https://cdn.jsdelivr.net/picturefill/2.3.1/picturefill.min.js", true, null);
        }
        }
        add_action( 'wp_enqueue_scripts', 'my_enqueue_stuff' ); 
```

# ruby - 如何在 Rails 3 中通过 http 流式传输视频

> ID：13030222
> 
> 赞同：1
> 
> 时间：2012-10-23T12:15:57.057
> 
> 标签：ruby, ruby-on-rails-3, http, video-streaming

鉴于另一台服务器将向我发送视频 http 数据包，而我只需要将它们流式传输到客户端，如何在我的 Rails 应用程序中添加视频流功能？任何指导？教程有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:16:59.860

好吧，我相信 html5 标签应该可以解决问题。因为你不需要转换任何东西，并且有一个服务器可以为你的视频流提供服务，你可以简单地使用类似的东西：

```
<video width="100" height="50" controls="controls" autobuffer="autobuffer">
    <source src="http://streaming-server.com/videos/video.ogg" type="video/ogg" />
    <source src="http://streaming-server.com/videos/video.mp4" type="video/mp4" />
</video> 
```

有两个版本都支持 chrome/safari 和 firefox `ogg`。`mp4`

# c++ - QAbstractItemModel 对索引/父级和数据函数感到困惑

> ID：13030223
> 
> 赞同：1
> 
> 时间：2012-10-23T12:16:09.893
> 
> 标签：c++, qt, qt4

我有以下简单的模型示例：

```
#include <QtGui/QApplication>
#include <QtGui/QTreeView>
#include <QAbstractItemModel>

class TestModel : public QAbstractItemModel
{
public:
    TestModel()
    {
        SetUpData();
    }

    virtual QModelIndex index(int row, int column, const QModelIndex& parent) const
    {
        if ( parent.isValid())
        {
            // child
            return createIndex( row, column, (void*)&mData[row].mChildren[column]);
        }
        // root
        return createIndex( row, column, (void*)&mData[row]);
    }

    virtual QModelIndex parent(const QModelIndex& child) const
    {
        ModelData* data = (ModelData*)child.internalPointer();

        // find out where "data" is in the mData vector structure
        for ( size_t i=0; i<mData.size(); ++i )
        {
            for ( size_t j=0; j<mData[i].mChildren.size(); ++j )
            {
                if ( &mData[i].mChildren[j] == data )
                {
                    // I think this is correct, return the parent row at col 0?
                    return createIndex( i, 0, (void*)&mData[i].mChildren[j]);
                }
            }
        }
        return QModelIndex();
    }

    virtual int rowCount(const QModelIndex& parent) const
    {
        if ( parent.isValid() )
        {
            // Per root node size
            return mData[parent.row()].mChildren.size();
        }

        // Root size
        return mData.size();
    }

    virtual int columnCount(const QModelIndex& parent) const
    {
        // The "parent" nodes should have two columns, the children should have 1
        if ( parent.isValid() )
        {
            // Root
            return 1;
        }
        // Children
        return 2;
    }

    virtual QVariant data(const QModelIndex& index, int role) const
    {
        if ( role == Qt::DisplayRole && index.isValid() )
        {
            if ( index.isValid() )
            {
                // I think col and row are the wrong way around, but will crash if swapped
                return mData[index.column()].mChildren[index.row()].mName;
            }
            else
            {
                // this never happens because "RootN" is never displayed
                return mData[index.column()].mName;
            }
        }
        return QVariant();
    }

private:
    // The "real" data that this Qt model is providing an interface to
    struct ModelData
    {
        QString mName;
        std::vector< ModelData > mChildren;
    };

    std::vector< ModelData > mData;

    void SetUpData()
    {
        for ( int i=0; i<3; ++i )
        {
            ModelData root;
            root.mName = "Root" + QString::number( i+1 );

            for ( int j=0; j<10; ++j )
            {
                ModelData node;
                node.mName = "Node" + QString::number( j+1 );
                root.mChildren.push_back( node );
            }
            mData.push_back( root );
        }
    }
};

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    TestModel* model = new TestModel();
    QTreeView* tv = new QTreeView();

    tv->setModel( model );
    tv->show();

    int ret = a.exec();

    delete tv;
    delete model;

    return ret;
} 
```

我在这里要做的是创建一个具有以下结构的模型：

```
Root1
 |-Node1-10
 |
Root2
 |-Node1-10
 |
Root3
 |-Node1-10 
```

但是我最终得到了这个：

![输出](../Images/3720c3aa5b50e65dc1ba6e1bee6c39a6.png)

我真的很困惑索引/父级和数据应该如何工作。显然我不明白，因为我的输出不正确。

我认为，例如，Root1、Node3 会导致使用 row = 0、col=2 调用索引，此时我使用 0,2 和指向该元素的指针调用 createIndex？

对于 parent()，如果 parent 有效，则返回 QModelIndex，因为这意味着它是一个 RootN 元素，如果它不是根元素，则返回 createIndex 以创建到 parent 的索引。

最后对于数据，我认为这只是返回给定行/列的 UI 的显示字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T12:28:34.963

> 我认为，例如，Root1、Node3 会导致使用 row = 0、col=2 调用索引，此时我使用 0,2 和指向该元素的指针调用 createIndex？

不，您的树只有两列：col 0 显示树层次结构，col 1 再次显示标签。所以调用 col 2 是无效的。

Root1, Node3 应该有一个 row=2 col=(1/2,every you want) 和一个父索引等于 row=0, col=(1/2) 和一个无效的父级（无效的父级意味着你在 root等级）。

`data(..)`返回的内容取决于`role`传递给它的内容，请参阅您应该感兴趣的类型的[文档。](https://qt-project.org/doc/qt-4.8/qt.html#ItemDataRole-enum)

# jquery - jQuery，获取不带扩展名的文件名，然后替换字符串

> ID：13030224
> 
> 赞同：7
> 
> 时间：2012-10-23T12:16:12.673
> 
> 标签：jquery, regex, str-replace

我有这个代码来获取文件扩展名：

```
filename1 = "a.crudely_formed.document_name.jpg"         
var fileExtension = filename1.substring(filename1.lastIndexOf('.')); 
```

现在我只需要获取文件名，而不需要扩展名。正如您在示例文件名中所看到的，用户可以随意命名文件名，这就是我必须使用 lastIndexOf() 方法的原因。我已经搜索了这样做的方法，但我一无所获。

此外，当我有文件名（不带扩展名）时，我需要与此类似的东西

```
$filename = strtolower(str_replace(array('  ', ' '), '-', preg_replace('/[^a-zA-Z0-9 s]/', '', trim($filename)))); 
```

以上基本上意味着，用破折号替换所有空格，并且只允许 az 和 AZ 字符以及所有数字。在上面的示例中，例如 åöä 被 aoa 替换。

关于如何在 jQuery 中执行此操作的任何建议？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-23T12:45:49.877

好的，只获取我使用的文件名：

```
var output = filename1.substr(0, filename1.lastIndexOf('.')) || filename1; 
```

要替换我使用的字符：

```
output = output.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-03-12T18:54:03.680

有更好的方法来获取文件名和扩展名

> 文件名 = '上传.png';

**如果您只需要文件名**

```
filename.split('.').shift(); 
```

**如果您只需要扩展**

```
filename.split('.').pop(); 
```

# python - 烧瓶框架可以将实时数据从服务器发送到客户端浏览器吗？

> ID：13030235
> 
> 赞同：20
> 
> 时间：2012-10-23T12:17:16.213
> 
> 标签：python, web-applications, comet, flask, juggernaut

我想知道（如果有的话）flask 如何执行长轮询，以便服务器可以通过连接向客户端发送数据。例如，如果服务器通过流 api 接收到 twitter 提要，将如何将其传递给客户端浏览器？

我认为您不能在这种情况下使用 flask.flash 。

谢谢

感谢您的示例。我查看了示例，当我尝试为我的代码实现它时，它仍然没有在客户端浏览器中提供实时输出。

我使用 juggernaut 和 redis 将它基于烧瓶片段（）。这是我的python代码：

```
import flask
from flask.views import MethodView
from tweetStreamsRT import StreamerRt 
from juggernaut import Juggernaut

app = flask.Flask(__name__)
app.secret_key = "xxxxx"
PORT = 8080

class View(MethodView):

    def get(self):
        return flask.render_template('index.html')

    def post(self):
        results = StreamerRt().filter(track=[flask.request.form['event']])            
        jug = Juggernaut()
        jug.publish('channel', results)
        return self.get()

app.add_url_rule('/', view_func = View.as_view('index'), methods=['GET', 'POST'])
app.debug = True

if __name__ == "__main__":
    print 'Listening on http://localhost:%s' % PORT
    app.run() 
```

我的 html 页面是从基本 html 页面继承的：

```
{% extends "base.html" %}
{% import "forms.html" as forms %}

{% block page_header %}
  <div class="page-header">
    <h1>Welcome</h1>
  </div>
{% endblock %}
{% block content %}
  <h2>Enter the Event you would like to follow</h2>
      <form action="/" method="post">
            <input type="text" name="event" />
            <input type="submit" value="Submit Query" />
          </form>
            Results:
            <pre>
                <script type="text/javascript" charset="utf-8">
                    var jug = new Juggernaut;
                    jug.subscribe("channel", function(data){
                    alert("Got data: " + data);});
                </script>

            </pre> 
{% endblock %} 
```

我仍然对为什么什么都没有发送到客户端浏览器感到困惑。

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-23T12:30:43.607

[`gevent`](http://www.gevent.org)您可以在+的帮助下这样做[`socketio`](http://socket.io)。

*   [使用带有`gevent`+`socketio`](https://github.com/kcarnold/flask-gevent-socketio-chat)的 Flask 的示例应用程序。
*   [Flask 中的 socket.io 路由](https://gist.github.com/858806)
*   [gevent-socketio](https://github.com/abourget/gevent-socketio)

# python - 如何转换熊猫 MultiIndex 系列？

> ID：13030245
> 
> 赞同：7
> 
> 时间：2012-10-23T12:17:56.163
> 
> 标签：python, time-series, pandas

在常规时间序列中，您可以及时将其向后或向前移动。

例如对于以下时间序列：

```
start = datetime(2012,1,1)
end = datetime(2012,4,1)
rng = pd.date_range(start,end)
ts = pd.Series(np.random.randn(len(rng)), index = rng) 
```

我们可以改变它：

```
ts.shift(2, freq="D") 
```

**如何仅在一个级别上为 MultiIndex 时间序列执行此操作？**

例如对于以下 MultiIndex 时间序列：

```
mi = [(dt,i) for dt in rng for i in range(5)]
ts_mi = pd.Series(np.random.randn(len(mi)), index = pd.MultiIndex.from_tuples(mi)) 
```

这可能看起来像：

```
2012-01-01  0   -0.805353
            1    1.467167
            2   -1.207204
            3    1.658394
            4    1.497559
2012-01-02  0   -0.742510
            1    0.764594
            2    0.558660
            3   -0.479370
            4    0.653849
... 
```

使用它移动它`ts_mi.shift(2, freq="D")`：

```
None   -0.805353
None    1.467167
None   -1.207204
None    1.658394
None    1.497559
None   -0.742510
None    0.764594
None    0.558660
None   -0.479370
None    0.653849
None   -0.138347
None    0.357479
None   -0.919202
None    1.300977
None   -0.360398
... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T13:31:16.120

```
ts_mi.unstack().shift(2, freq='D').stack() 
```

可以看到输出是正确的：

```
utils.side_by_side(ts_mi, ts_mi.unstack().shift(2, freq='D').stack())
2012-01-01  0    0.481555    2012-01-03  0    0.481555
            1    0.000628                1    0.000628
            2    2.509266                2    2.509266
            3    0.021571                3    0.021571
            4   -0.539981                4   -0.539981
2012-01-02  0   -1.465450    2012-01-04  0   -1.465450
            1    0.815251                1    0.815251
            2   -1.489051                2   -1.489051
            3    0.639746                3    0.639746
            4   -0.176939                4   -0.176939
2012-01-03  0   -0.441842    2012-01-05  0   -0.441842
            1   -0.792810                1   -0.792810
            2   -0.802665                2   -0.802665
            3    1.922190                3    1.922190
            4    0.165446                4    0.165446
...                          ... 
```

工作原理：`df.unstack()`将嵌套的 0、1、2、3、4 中的值移动到同音列，并`df.stack()`恢复原来的嵌套索引。

编辑：这是来自@Wes_McKinney 的 side_by_side 函数

```
def side_by_side(*objs, **kwds):
    from pandas.core.common import adjoin
    space = kwds.get('space', 4)
    reprs = [repr(obj).split('\n') for obj in objs]
    print adjoin(space, *reprs) 
```

# java - 尝试使用 JDBC 连接到 Java Derby 数据库

> ID：13030247
> 
> 赞同：4
> 
> 时间：2012-10-23T12:18:15.727
> 
> 标签：java, jdbc, derby

我有以下代码：

```
Connection conn = null;
    Statement stmt = null;

    // MySQL connection details.
    String username = ("username");
    String password = ("password");
    String url = ("jdbc:derby://localhost:1527/OnlineLibrary");

    try {

        // Connect to database. 
        Class.forName("org.apache.derby.jdbc.ClientDriver").newInstance();               
        conn = DriverManager.getConnection (url, username, password);            
        stmt = conn.createStatement();

        // Get data.
        String query = ("SELECT PersonNo, Forename, Surname FROM Person;");                       
        ResultSet rs = stmt.executeQuery(query);               
        while (rs.next()) {                
            System.out.println("Person: no: " + rs.getInt("PersonNo") + " name: " + rs.getString("Forename") + " " + rs.getString("Surname"));
        }                 

        // Disconnect from database.
        stmt.close();
        conn.close();
    }
    catch(Exception ex) {
        Java_Utils.printStackTrace("Error connecting to database", ex, true);    
    } 
```

这给了我：

```
Error connecting to database
org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(Unknown Source)
org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)
org.apache.derby.client.am.Statement.executeQuery(Unknown Source)
misc.Simple_JDBC_Test.main(Simple_JDBC_Test.java:32) 
```

在我看来一切都很好。我可以使用连接池连接到数据库，但我不明白上述错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-14T08:54:16.797

@Mr Morgan，
使用 PreparedStatement 而不是 Statement，表示替换

结果集 rs = stmt.executeQuery(query);
和

ProblemStatement pStmt = dbConnection.prepareStatement(query);

结果集 r = pStmt.executeQuery();

完成此操作后请显示您的输出！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-14T09:08:10.673

去掉分号**；**在您的陈述结束时签名：

```
String query = ("SELECT PersonNo, Forename, Surname FROM Person"); 
```

*然后直接在您的OnLineLibrary*数据库中执行相关查询以检查其输出以及其语法是否正确：

```
SELECT PersonNo, Forename, Surname FROM Person 
```

# java - 段落之间的图像使用 iText

> ID：13030250
> 
> 赞同：3
> 
> 时间：2012-10-23T12:18:27.743
> 
> 标签：java, image, text, itext

我正在使用 iText 生成我的自定义 .pdf 文档。我尝试了很多，但我无法获得我想要的包含图像的文本设计。我需要一个如下所示的输出：

![在此处输入图像描述](../Images/e5b03d31898ae49f71402ae93edf5cd8.png)

我已经尝试过 Chunk 类和 Paragraph 类，但我无法得到想要的。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T12:26:24.840

你有（至少）两个选择：

1.  使用`image.setAlignment(Image.LEFT | Image.TEXTWRAP);`图像并将其添加到文档中（而不是 a`Chunk`或`Paragraph`）。这会将图像添加到左侧并将其他文本环绕在其周围。
2.  在绝对位置添加图像，并使用不规则列添加文本`ColumnText`：*http* : //1t3xt.be/? [0b3](http://1t3xt.be/?0b3)

1 是最简单的方法，但结果可能并不总是您想要的（您可以调整一些东西，例如添加边框）；2 需要更多的工作，但允许您完全按照您想要的方式创建输出。

# objective-c - Youtube iPhone URL shemes

> ID：13030253
> 
> 赞同：0
> 
> 时间：2012-10-23T12:18:36.560
> 
> 标签：objective-c, ios, url, youtube, mobile-safari

在 Safari 中打开 YouTube URL 时，如何启动我的应用程序？我在互联网上搜索了很长时间，但我没有看到这样做的可能性，因为它是一个 http:// 链接。但是 Google YouTube 应用程序会这样做，有人可以告诉我这是如何工作的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:32:06.183

您无法在 Safari 中使用 YouTube 链接启动您自己的应用程序。与 Android Intents 不同，iOS 只有一种方式来启动其他应用程序 - url 方案。因此，当您尝试在 Safari 中打开 YouTube 链接时，它只会调用

```
[[UIApplication sharedApplication] openURL: @"some url scheme"] 
```

在内部使用“某些 url 方案”（未知）并且只有 YouTube 应用程序可以处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:44:35.897

这样做的唯一方法是创建自己的 URL 方案，如此处所述 -[实施 URL 方案](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW50)

然后，您可以检测以修改任何 YouTube 网址，以便它们使用 JavaScript 与您的应用的网址方案相匹配`[webView stringByEvaluatingJavascriptFromString:yourJavaScript]`

这是踢球者。您只能在您自己的网络浏览实例中修改页面——即在您的应用程序中创建一个 UIWebView，但是您已经在您的应用程序中，这将使整个练习变得毫无意义。

但是，您可以使用此方法在您构建的一套应用程序中进行通信，这样您就可以在 Web 浏览器中维护您的 URL 方案，这将在您的视频播放中启动应用程序。

但是，您不能使用 Mobile Safari 来执行此操作。

抱歉，我无法提供更多帮助。

# java - 从线程使用的列表中删除时出现异常

> ID：13030254
> 
> 赞同：0
> 
> 时间：2012-10-23T12:18:43.217
> 
> 标签：java, multithreading, concurrentmodification

那是我的代码的一部分：

```
public List<Integer> _list = new ArrayList<>();

public void removeInteger(Integer i)
{
    _list.remove(i);
}

public class CheckThread implements Runnable
{
    @Override
    public void run()
    {
        synchronized(_list) 
        {
            Iterator<Integer> it=_list.iterator(); 
            while(it.hasNext()) 
            {
                Integer i = it.next();
            }
        }
    }
} 
```

线程一直在运行（没有写那部分），当我使用 removeInteger 方法从列表中删除时，我得到了 ConcurrentModificationException。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:23:32.253

当你需要删除一个元素时，你应该使用[it.remove() 。](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Iterator.html#remove%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:23:42.250

**-**您**必须** `synchronize` `remove()`使用方法，否则**任何其他线程都可以访问列表并尝试从中删除元素，而其他线程正在将元素放入其中..**

```
 public  synchronized void removeInteger(Integer i)
{
    _list.remove(i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:48:44.773

*   如果您想在基于条件进行迭代时删除，请在 while 循环中写入条件，您可以使用迭代器的 it.remove() 删除对象，如下所示

    ```
     Iterator<Integer> it=_list.iterator(); 
            while(it.hasNext()) 
            {
                Integer i = it.next();
                if(i<10){
                  it.remove();
                }
            } 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T14:12:14.163

你可以试试下面的东西（你的条件可以根据你的要求做得更好）

```
public void removeInteger(Integer i)
{
    Iterator iter = _list.iterator();
    int count=0;
    while(iter.hasNext()){
         if(count==i){
             _list.remove(i);
             break;
         }
    }
} 
```

# php - 联系表格不返回任何内容？

> ID：13030256
> 
> 赞同：2
> 
> 时间：2012-10-23T12:18:55.703
> 
> 标签：php, forms, contact

我遇到了与我在这里找到的其他人类似的问题，但无法解决我的联系表问题。这是我从电子邮件中的联系表中收到的全部内容。

```
<p>$usersname has contacted you from your site.</p>
<h3>Their Message is as follows:</h3>
<p>$usersmessage</p>
<h5>Contact details</h5>
<p>Phone Number: $usersphonenumber</p>
<p>Email Address: $usersemail</p>
<?php
   if(isset($_REQUEST['contactformid']) && $_REQUEST['contactformid'] == 1){
    $youremail = "garybrowntown@gmail.com";
    $usersname = $_POST["usersname"];
    $usersemail = $_POST["usersemail"];
    $usersphonenumber = $_POST["usersphonenumber"];
    $usersmessage = $_POST["usersmessage"];
    $subject = 'Message From Your Contact Form';
    $message = '<p>$usersname has contacted you from your site.</p>
<h3>Their Message is as follows:</h3>
<p>$usersmessage</p>
<h5>Contact details</h5>
<p>Phone Number: $usersphonenumber</p>
<p>Email Address: $usersemail</p>'; 
$headers = 'From:' . $usersemail . "\r\n";
    mail($youremail, $subject, $message, $headers);

    echo '<p>Thank you for your email, a member of our staff will contact you soon regarding your email!</p>';

} else {
    echo '<p>Form could not be sent, please try again!</p>';
}

?>

    <div class="boxes-full">

            <div class="contacttitle">

                <h2>Contact Mogul</h2>

            </div>

            <div class="boxes-padding fullpadding">

            <div id="contactwarning"></div>
            <div id="contactajax"></div>

            <form action="javascript:parseResponse();" method="post" name="ajaxcontactform" id="ajaxcontactform">

                <div class="contacttextarea">
                    <input name="contactformid" id="contactformid" type="hidden" value="1" />

                    <fieldset>
                        <textarea name="comment" id="comment" cols="5" rows="5" class="contacttextarea"onfocus="if (this.value == 'Please Leave A Message') {this.value = '';}">Please Leave A Message</textarea>
                    </fieldset>

                </div>

                <div class="contacttextboxes">

                    <fieldset>
                        <input id="name" name="name" type="text" class="contacttextform" onfocus="if (this.value == 'Please Insert Your Name') {this.value = '';}"value="Please Insert Your Name">
                    </fieldset>

                    <fieldset>
                        <input id="phone" name="phone" type="text" class="contacttextform" onfocus="if (this.value == 'Please Insert Your Phone Number') {this.value = '';}"value="Please Insert Your Phone Number">
                    </fieldset>

                    <fieldset>
                        <input id="email" name="email" type="text" class="contacttextform" onfocus="if (this.value == 'Please Insert Your Email') {this.value = '';}"value="Please Insert Your Email">
                    </fieldset>

                    <fieldset>
                        <input name="send" type="submit" class="contactformbutton" value="Send">
                    </fieldset>

                </div>

            </form>

            </div>

            <span class="box-arrow"></span>

        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:25:45.167

也许如果您将返回消息包装在**php TAGS**中，它将正常工作。看一看：

```
<p>$usersname has contacted you from your site.</p>
                                <h3>Their Message is as follows:</h3>
                                <p>$usersmessage</p>
                                <h5>Contact details</h5>
                                <p>Phone Number: $usersphonenumber</p>
                                <p>Email Address: $usersemail</p> 
```

像这样使用：

```
<p><?php echo $usersname; ?> has contacted you from your site.</p>
                                <h3>Their Message is as follows:</h3>
                                <p><?php echo $usersmessage; ?></p>
                                <h5>Contact details</h5>
                                <p>Phone Number: <?php echo $usersphonenumber; ?></p>
                                <p>Email Address: <?php echo $usersemail; ?></p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:24:03.967

那是因为您使用的是单引号并且未评估变量，请尝试此代码它将起作用。

```
 $message = '<p>'.$usersname.' has contacted you from your site.</p>
                    <h3>Their Message is as follows:</h3>
                    <p>'.$usersmessage.'</p>
                    <h5>Contact details</h5>
                    <p>Phone Number: '.$usersphonenumber.'</p>
                    <p>Email Address: '.$usersemail.'</p>'; 
```

并完成本[教程](http://www.trans4mind.com/personal_development/phpTutorial/quotes.htm)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T12:23:45.183

如果要在字符串中包含变量，则必须使用双引号，因此请替换以下代码：

```
$message = '<p>$usersname has contacted you from your site.</p>
                <h3>Their Message is as follows:</h3>
                <p>$usersmessage</p>
                <h5>Contact details</h5>
                <p>Phone Number: $usersphonenumber</p>
                <p>Email Address: $usersemail</p>'; 
```

对于这个：

```
$message = "<p>$usersname has contacted you from your site.</p>
                <h3>Their Message is as follows:</h3>
                <p>$usersmessage</p>
                <h5>Contact details</h5>
                <p>Phone Number: $usersphonenumber</p>
                <p>Email Address: $usersemail</p>"; 
```

# sql-server - SQL Server：获取“无效的列名”

> ID：13030257
> 
> 赞同：1
> 
> 时间：2012-10-23T12:19:02.007
> 
> 标签：sql-server, tsql

我正在编写查询，但有一些我找不到的问题。这是我的代码

```
begin
    declare @v_max int
    declare @v_count int
    declare @sessionID int
    declare @sessionStart datetime
    declare @sessionEnd datetime

    declare my_cursor cursor local for
        select * from Test;

    open my_cursor
    fetch next from my_cursor INTO @sessionID, @sessionStart, @sessionEnd

    while @@FETCH_STATUS = 0
    begin
        select *  into **@v_count**
        from [dbo].[Test]
        WHERE **[dbo].[Test].[SessionStartTime]** > @sessionStart
        OR **[dbo].[Test].[SessionCloseTime]** < @sessionEnd

        if @v_count > @v_max 
            set @v_max = @v_count

        fetch next from my_cursor INTO @sessionID, @sessionStart, @sessionEnd
    end

    print @v_max;

    close my_cursor
    deallocate my_cursor
end 
```

粗体区域有问题：

> 消息 207，级别 16，状态 1，第 18 行
> 无效的列名称“SessionStartTime”。
> 消息 207，级别 16，状态 1，第 19 行
> 无效的列名称“SessionCloseTime”。
> 消息 102，级别 15，状态 1，第 16 行
> “@v_count”附近的语法不正确。

这是我的表

```
CREATE TABLE [dbo].[Test]( 
    [ScenarioID] [bigint] NULL, 
    [SessionStartTime] [datetime] NOT NULL, 
    [SessionCloseTime] [datetime] NULL 
) ON [PRIMARY] 
```

* * *

这是我的表

```
CREATE TABLE [dbo].[Test](
    [ScenarioID] [bigint] NULL,
    [SessionStartTime] [datetime] NOT NULL,
    [SessionCloseTime] [datetime] NULL
) ON [PRIMARY]

GO 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T12:24:43.467

`@v_count`在查询的开头声明为 an`int`而不是表。你不能`SELECT * INTO @v_count`在那里使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T12:21:53.687

[`Select into`](http://msdn.microsoft.com/en-us/library/aa225219%28v=sql.80%29.aspx)创建一个表。

你可能想要

```
select @v_count = count(*)
from [dbo].[Test] 
... 
```

您还需要在例程开始时初始化 @v_max。

```
set @v_max = 0 
```

至于您的其他问题，您的测试表中是否有名为 SessionStartTime 和 SessionCloseTime 的列？

# jquery - jsFiddle jQuery 工作...不在本地主机上工作

> ID：13030262
> 
> 赞同：1
> 
> 时间：2012-10-23T12:19:09.687
> 
> 标签：jquery, click, toggle

我有一点问题，一段时间以来一直试图解决这个问题。搜索了很多主题，但没有找到任何可以帮助我的东西。

我编辑了一个我找到的 jsFiddle，并设计了这个简单的切换导航：

[http://jsfiddle.net/liamtarpey/GzkN4/](http://jsfiddle.net/liamtarpey/GzkN4/)

唯一的问题是，我现在尝试将它集成到我的网站中，但它不起作用，我将其缩减为只是一个测试页面以尝试找出问题，但仍然没有运气。我正在使用 WAMP 服务器进行测试，我所有的 php 和其他 javascript 东西都可以正常工作。

这是我的 HTML：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>jQuery Test</title>
        <link rel="stylesheet" href="css/master.css">
        <script src="//ajax.googleapis.com/ajax/libs/jquerymin.js" type="text/javascript"></script>
        <script type="text/javascript" src="script.js"></script> 
    </head>

<body>

    <div class="alt-nav">
        <h3>Menu</h3>
            <ul>
                <li><a href="index.php">News</a></li>
                <li><a href="about.php">About</a></li>
                <li><a href="press.php">Press</a></li>
                <li><a href="gigs.php">Gigs</a></li>
                <li><a href="music.php">Music</a></li>
                <li><a href="gallery.php">Gallery</a></li>
                <li><a href="videos.php">Videos</a></li>
                <li><a href="shop.php">Shop</a></li>
                <li><a href="contact.php">Contact</a></li>
            </ul>
    </div>  

</body>
</html> 
```

这是外部 .js 文件

脚本.js：

```
$('.alt-nav').click(function() {
        $('ul').slideToggle(550, 'linear');
});? 
```

最后是 CSS：

```
.alt-nav {
    display: block;
    width: 100%;
    background: black;     
    border-bottom: 2px solid #F06;
}
.alt-nav h3, ul {
    color: white;
}
.alt-nav ul {
    display: none;
} 
```

（ ul 可以没有或只是删除，它们都应该工作，这应该只是在页面加载时隐藏它）。

事情是它在浏览器中看起来很好，但它只是不起作用，它完全是静态的，就好像它没有读取任何脚本一样。

有人可以帮我解决这个问题吗？

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:58:27.253

您为 jQuery 使用了无效的 URL。

如果您想使用 Google CDN，请使用 //ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:22:56.057

您可以将脚本推迟到 window.onload 之前，以确保在执行脚本之前加载 jQuery。

```
<script defer="defer" type="text/javascript" src="script.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:24:50.860

在您的文档准备好**之前，**您`script.js`正在加载。

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T12:26:07.730

您需要将脚本包装`script.js`在`$(document).ready()`调用中：

```
$(document).ready(function(){ // or $(function(){
    $('.alt-nav').click(function() {
        $('ul').slideToggle(550, 'linear');
    });
}); 
```

这是关于 jQuery API 的页面`.ready()`： http: [//api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T12:28:25.447

`?`在准备功能结束时从您的 js 文件中删除符号。脚本对您来说可以正常工作 将您的代码放入

```
$(document).ready(function(){
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T12:29:22.447

您的 script.js 会在 DOM 解析器知道您的文档之前加载。所以你的选择器**$('.alt-nav')**返回*null*，这就是你的事件没有发生的原因：它绑定到一个 null 对象。您需要将您的 script.js 包含语句放在 body 标记之后。

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>jQuery Test</title>
        <link rel="stylesheet" href="css/master.css">
        <script src="//ajax.googleapis.com/ajax/libs/jquerymin.js" type="text/javascript">    </script>
    </head>

<body>
    <script type="text/javascript" src="script.js"></script> 
    <div class="alt-nav">
        <h3>Menu</h3>
            <ul>
                <li><a href="index.php">News</a></li>
                <li><a href="about.php">About</a></li>
                <li><a href="press.php">Press</a></li>
                <li><a href="gigs.php">Gigs</a></li>
                <li><a href="music.php">Music</a></li>
                <li><a href="gallery.php">Gallery</a></li>
                <li><a href="videos.php">Videos</a></li>
                <li><a href="shop.php">Shop</a></li>
                <li><a href="contact.php">Contact</a></li>
            </ul>
    </div>  

</body>
</html> 
```

另外，删除那个？在 script.js 的末尾**

# url - 单击具有相同标题的新闻文章时出现错误的文章

> ID：13030264
> 
> 赞同：1
> 
> 时间：2012-10-23T12:19:13.187
> 
> 标签：url, typo3, tt-news

编辑创建了多篇具有相同标题的 tt_news 文章。如果您导航到新闻，您可以看到正确的摘录，但是当单击详细视图时，您会看到摘录中没有的文章。这是一篇较旧的文章，标题相同。网址看起来像这样

[http://yourdomain.com/news/news-detail/duplicate-article-name.html](http://yourdomain.com/news/news-detail/duplicate-article-name.html)

当前使用以下版本：

*   酷URI 1.0.29
*   tt_news 3.0.1
*   TYPO3 4.5.10

`CoolUriConf.xml_default`有以下内容

```
<uriparts>
    <part>
      <parameter>tx_ttnews[tt_news]</parameter>
      <lookindb>
        <to>SELECT title FROM tt_news WHERE uid=$1</to>
        <t3conv>1</t3conv>
      </lookindb>
    </part> 
```

现在我按照[手册](http://typo3.org/extension-manuals/cooluri/1.0.29/view/1/5/)把它改成了这个

```
 <uriparts>
    <part>
      <parameter>tx_ttnews[tt_news]</parameter>
      <lookindb>
        <to>SELECT CONCAT(tt1.title,IF(tt2.number>1,CONCAT('-',tt2.number),'')) FROM tt_news as tt1, (SELECT COUNT(*) AS number FROM tt_news WHERE title=(SELECT title FROM tt_news WHERE uid=$1)) AS tt2 WHERE tt1.uid=$1</to>
        <t3conv>1</t3conv>
      </lookindb>
    </part> 
```

我清除了所有缓存（包括 CoolURI 缓存），但现在单击 URL 可以找到最新文章。URL 没有改变。

我做错了什么？我什至用另一个浏览器尝试过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:07:04.500

尝试使用 RealUrl，它比 CoolURI 更容易配置。

好的，我正在考虑这个问题并尝试将查询更改为：

SELECT CONCAT(tt1.title,IF(tt2.number>1,CONCAT('-',tt2.number),'')) FROM tt_news as tt1, (SELECT ROW_NUMBER() OVER (ORDER BY uid) AS number FROM tt_news WHERE title=(SELECT title FROM tt_news WHERE uid=$1)) AS tt2 WHERE tt1.uid=$1

之后你应该有这样的链接：

```
http://yourdomain.com/news/news-detail/duplicate-article-name-1.html
http://yourdomain.com/news/news-detail/duplicate-article-name-2.html
http://yourdomain.com/news/news-detail/duplicate-article-name-3.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:39:38.290

我终于找到了错误。这是我编辑的错误文件。我编辑了`typo3conf/ext/cooluri/cooluri/CoolUriConf.xml_default`.

如果您进入`Extension Manager`并单击 ，您会找到正确的路径`CoolURI`。通往真实世界的路径存在一个`XML path`变量`CoolUriConf.xml`。就我而言，它是`fileadmin`。现在最新的文章有以下名称：

`http://yourdomain.com/news/news-detail/duplicate-article-name.html`

一个年长的有这个名字

`http://yourdomain.com/news/news-detail/duplicate-article-name-2.html`

等等。有更好的解决方案，但一切都`CoolURI`可以。

# msdeploy - 使用 ASP.NET 4.5 发布配置文件时如何参数化部署？

> ID：13030265
> 
> 赞同：6
> 
> 时间：2012-10-23T12:19:18.993
> 
> 标签：msdeploy, webdeploy, asp.net-4.5

ASP.NET 4.5 中的新 pubxml 文件绝对是朝着正确方向迈出的一步。我也喜欢`msdeploy`对`parameters.xml`文件的支持（尽管它们有时没有我想要的那么强大）。现在，我如何结合`msdeploy`'s 参数和 pubxml 文件？我希望 pubxml 文件允许我提供类似的设置

`<ParametersFile>productionParameters.xml</ParametersFile>`

或我的文件中的类似内容，其中包含发布到生产环境时`production.pubxml`要合并的值。`web.config`这是可能的，还是我必须回到自己的方式来确定参数文件并`msdeploy`使用 -setParamFile="productionParameters.xml" 调用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T22:47:02.823

您不能设置自己的参数文件，但可以从以下文件中声明参数值`pubxml`：

```
<ItemGroup>
  <MSDeployParameterValue Include="Parameter Name">
    <ParameterValue>Parameter Value</ParameterValue>
  </MSDeployParameterValue>
</ItemGroup> 
```

# c# - 将现有文件添加到文件夹

> ID：13030266
> 
> 赞同：1
> 
> 时间：2012-10-23T12:19:22.923
> 
> 标签：c#

我是 C# 的初学者。在我的项目中，用户通过 OpenFileDialog 框选择一个图像文件。当他/她选择图像文件时，我正在运行如下代码：

```
File.Copy(SourceFilePath, DestinationFilePath); 
```

上述代码的问题在于，每当用户尝试添加现有图像文件时，它都会引发错误。为避免此错误，我将代码更改为以下代码：

```
if (File.Exists(DestinationFilePath))
{
     intCount++;
     File.Copy(SourceFilePath,TemporaryFilePath);
     File.Copy(TemporaryFilePath, DestinationFilePath + intCount.ToString());
     File.Delete(TemporaryFilePath);                                
}
else
{
     File.Copy(SourceFilePath, DestinationFilePath);
} 
```

上面代码中的问题是它`intCount`在图像文件的最后添加了值，就像`image.gif1`改变文件扩展名一样。如何在图像文件路径中添加计数器？

而且我认为我在这里用来检查现有文件的方法不是正确的做法。

更新：**答案**：-

```
 int intCount = 1;
        while (File.Exists(Application.StartupPath + DirectoryPath + strPath))
        {
            strPath = Path.GetFileNameWithoutExtension(strPath) + intLarge.ToString() + Path.GetExtension(strPath);
            intCount++;
        }
        intCount = 1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:36:27.493

```
private string GetIndexedFilePath(string path, int index)
{
   var directoryName = Path.GetDirectoryName(path);
   var oldFileName = Path.GetFileNameWithoutExtension(path);
   var extension = Path.GetExtension(path);
   var indexedFileName = String.Format("{0}_{1}{2}", oldFileName, index, extension);
   return Path.Combine(directoryName, indexedFileName);
} 
```

顺便说一句，在将文件重命名为“file_2.gif”之类的文件后，您仍然可能与目标目录中已经存在的文件发生名称冲突。

```
string destinationPath;
int index = 0;
do
{
    destinationPath = GetIndexedFilePath(path, ++index);
}
while(File.Exists(destinationPath));
// Copy file to destinationPath 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:21:44.357

采用

```
Path.GetFileNameWithoutExtension(string destinationfilename) 
```

添加`int`到它并添加扩展名，你可以通过

```
Path.GetExtension(string destinationfilename) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T12:22:15.437

代替：

```
DestinationFilePath + intCount.ToString() 
```

您可以使用：

```
intCount.ToString() + DestinationFilePath 
```

这会将它添加到开头，导致`1image.gif`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T12:28:01.610

最好的方法是只创建一个新的文件路径。

下面的函数将给 image.gif 计数为 1 为 image1.gif

```
private string GetIncrementedFilePath(string orginalFilePath, int count)
{
    var extension = Path.GetExtension(orginalFilePath);
    var fileName = Path.GetFileNameWithoutExtension(orginalFilePath);
    var directory = Path.GetDirectoryName(orginalFilePath);

    var newFullPath = string.Format("{0}\\{1}{2}{3}", directory, fileName, count, extension);

    return newFullPath;
} 
```

请注意 Path.GetExension 会给你 '.gif' 而不是 'gif'

```
// Summary:
//     Returns the extension of the specified path string.
//
// Parameters:
//   path:
//     The path string from which to get the extension.
//
// Returns:
//     A System.String containing the extension of the specified path (including
//     the "."), null, or System.String.Empty. If path is null, GetExtension returns
//     null. If path does not have extension information, GetExtension returns Empty.
//
// Exceptions:
//   System.ArgumentException:
//     path contains one or more of the invalid characters defined in System.IO.Path.GetInvalidPathChars().
public static string GetExtension(string path); 
```

如果您想知道文件是否存在，那么 .NET 中内置了一个函数来执行此操作。

```
// Summary:
//     Determines whether the specified file exists.
//
// Parameters:
//   path:
//     The file to check.
//
// Returns:
//     true if the caller has the required permissions and path contains the name
//     of an existing file; otherwise, false. This method also returns false if
//     path is null, an invalid path, or a zero-length string. If the caller does
//     not have sufficient permissions to read the specified file, no exception
//     is thrown and the method returns false regardless of the existence of path.
File.Exists(path); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T12:39:55.183

您可以使用该类对包含文件或目录名称信息的实例`Path`执行操作，以将表示文件名的字符串与其扩展名分开`System.String`

例子

```
string Name = Path.GetFileNameWithoutExtension(DestinationFilePath); //Get the file name excluding its extension
string Extension = Path.GetExtension(DestinationFilePath); //Declare a new string representing the extension of the file
File.Copy(TemporaryFilePath,  DestinationFilePath.Replace(Path.GetFileName(DestinationFilePath), "") + Name + intCount.ToString() + Extension); //Copy from TemporaryFilePath to DestinationFilePath appending a number after the string then the Extension we gathered first 
```

上面发布的示例会将 example 的文件名复制`TemporaryFilePath\File_Name.(Extension)`到`DestinationFilePath\File_Name (intCount).(Extension)`where`(intCount)`表示数字并表示`(Extension)`文件的扩展名。因此，文件名的最终外观将如下所示 if `intCount`is equal to `1`and the `Extension`is`.exe`

*   `DestinationFilePath\File_Name 1.exe`

谢谢，
我希望你觉得这有帮助:)

# php - 在将图像发送到服务器之前压缩图像

> ID：13030269
> 
> 赞同：1
> 
> 时间：2012-10-23T12:19:40.973
> 
> 标签：php, android, base64

我正在使用此代码将**Bitmap**转换为**Base64**：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.JPEG, **quality**, baos);
byte[] b = baos.toByteArray();
base64code = Base64.encodeToString(b, Base64.DEFAULT); 
```

并以这种方式在服务器端接收它：

```
$strImage = preg_replace('!\s*!', '', trim($this->input->post('image')));
        $thefile = base64_decode($strImage);
        $img = imagecreatefromstring($thefile);
        //header('Content-Type: image/jpeg');
        header('Content-Type: bitmap; charset=utf-8');
        imagesavealpha($img, true);
        imagejpeg($img,'./images/temp/testing.jpg',100);
        imagedestroy($img); 
```

**问题：**

我从设备库中挑选并发送到服务器的实际图像大小为**344 kb**当我设置**质量 = 0**并显示一个微调器对话框时，**base64**字符串正在发送到服务器，发送需要**5 秒**，并且在服务器端接收到的图像是**344 Kb**但如果我设置**质量 = 100**发送需要**60-70 秒**，而我在服务器端接收到的图像是**1.7 Mb**

**问题：**

为什么我在使用**质量 = 0时获得实际尺寸，而在****质量 = 100**时获得近**5 倍大的**图像

 ****笔记：**

当我设置**质量 = 100**并更改

```
imagejpeg($img,'./images/temp/testing.jpg',100); 
```

至

```
imagejpeg($img,'./images/temp/testing.jpg',10); 
```

发送需要**60-70 秒**，但服务器端接收到的图像太小**67 Kb**

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:53:32.450

我认为@EJTH 是正确的，因为 0 可能意味着根本不重新压缩图像。任何其他值（1-100）可能首先将您的图像转换为位图（这将非常大），然后压缩为目标质量 jpeg。此重新压缩需要处理时间才能完成，因此对于 0 以外的值，您会看到 60-70 秒。

我之前没有使用过这种[`Bitmap#compress`](http://developer.android.com/reference/android/graphics/Bitmap.html#compress%28android.graphics.Bitmap.CompressFormat,%20int,%20java.io.OutputStream%29)方法，所以以上是猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:32:27.403

当 PHP 手册指出 0 表示可能的最低质量时，它是错误的，它实际上意味着不要接触压缩。

至于为什么压缩图片需要这么长时间很难说，您是自己托管还是使用便宜的虚拟主机？**

# java - Javadoc API：可变参数支持多远？

> ID：13030271
> 
> 赞同：5
> 
> 时间：2012-10-23T12:19:43.810
> 
> 标签：java, javadoc, variadic-functions

我想编写我的自定义 doclet。我不想阅读一些使用标准 doclet 制作的现有 javadoc。

我无法弄清楚如何查询 Javadoc API 形式参数是否是 varargs 参数。例如，如果我有以下方法：

```
public static void main(String... args) {
} 
```

如何确定形参 args 是 varargs？我调查了[com.sun.javadoc.Type](http://www.docjar.com/docs/api/com/sun/javadoc/Type.html)。但无法弄清楚如何访问这些信息。

再见

PS：反射没有帮助，因为我猜在 doclet 中反射不可用。例如，在 doclet 中，您有[MethodDoc](http://www.docjar.com/docs/api/com/sun/javadoc/MethodDoc.html)反射类，而在反射中，您有 Method 类。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T12:48:10.187

找到了，它是 MethodDoc 超类的一个属性：

```
public interface ExecutableMemberDoc {

    public boolean isVarArgs();
    // Return true if this method was declared to 
    // take a variable number of arguments.

} 
```

要使其工作，您必须将以下静态（原文如此！）
方法和返回值放入您的 doclet 类中：

```
public static LanguageVersion languageVersion() {
    return LanguageVersion.JAVA_1_5;
} 
```

奥基多基。结案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T12:36:25.397

我认为 javadoc API 清楚地显示了参数是否为可变参数。

检查下面的 APi

[http://docs.oracle.com/javase/1.5.0/docs/api/java/io/PrintStream.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/PrintStream.html)

它有一个下面给出的带有可变参数的方法

格式（区域设置，字符串格式，**对象... args**）

# c++ - 如何实现原子（线程安全）和异常安全的深拷贝赋值运算符？

> ID：13030272
> 
> 赞同：12
> 
> 时间：2012-10-23T12:20:05.183
> 
> 标签：c++, assignment-operator

我在一次采访中被问到这个问题，我回答不好。

更具体地说，赋值运算符所属的类如下所示：

```
class A {
private:
    B* pb;
    C* pc;
    ....
public:
    ....
} 
```

如何为此类实现*原子*（线程安全）和*异常安全*的深拷贝赋值运算符？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T13:20:28.800

有两个独立的问题（线程安全和异常安全），似乎最好分别解决它们。为了允许构造函数在初始化成员时将另一个对象作为参数来获取锁，无论如何都需要将数据成员分解到一个单独的类中：这样可以在初始化子对象和维护实际数据的类时获取锁可以忽略任何并发问题。因此，该类将分为两部分：`class A`处理并发问题和`class A_unlocked`维护数据。由于 的成员函数`A_unlocked`没有任何并发​​保护，因此它们不应该直接暴露在接口中，因此被设为`A_unlocked`的私有成员`A`。

利用复制构造函数，创建异常安全的赋值运算符很简单。参数被复制并且成员被交换：

```
A_unlocked& A_unlocked::operator= (A_unlocked const& other) {
    A_unlocked(other).swap(*this);
    return *this;
} 
```

当然，这意味着实现了一个合适的复制构造函数和一个`swap()`成员。处理多个资源的分配，例如在堆上分配的多个对象，最容易通过为每个对象设置一个合适的资源处理程序来完成。如果不使用资源处理程序，在引发异常的情况下正确清理所有资源会很快变得非常混乱。出于维护堆分配内存的目的`std::unique_ptr<T>`（或者`std::auto_ptr<T>`如果您不能使用 C++ 2011）是一个合适的选择。下面的代码只是复制指向的对象，尽管在堆上分配对象而不是使它们成为成员并没有多大意义。在一个真实的例子中，对象可能会实现一个`clone()`方法或一些其他机制来创建一个正确类型的对象：

```
class A_unlocked {
private:
    std::unique_ptr<B> pb;
    std::unique_ptr<C> pc;
    // ...
public:
    A_unlocked(/*...*/);
    A_unlocked(A_unlocked const& other);
    A_unlocked& operator= (A_unlocked const& other);
    void swap(A_unlocked& other);
    // ...
};

A_unlocked::A_unlocked(A_unlocked const& other)
    : pb(new B(*other.pb))
    , pc(new C(*other.pc))
{
}
void A_unlocked::swap(A_unlocked& other) {
    using std::swap;
    swap(this->pb, other.pb);
    swap(this->pc, other.pc);
} 
```

对于线程安全位，有必要知道没有其他线程在弄乱复制的对象。做到这一点的方法是使用互斥锁。也就是说，`class A`看起来像这样：

```
class A {
private:
    mutable std::mutex d_mutex;
    A_unlocked         d_data;
public:
    A(/*...*/);
    A(A const& other);
    A& operator= (A const& other);
    // ...
}; 
```

请注意，如果类型的对象打算在没有外部锁定的情况下使用，则所有成员`A`都需要做一些并发保护。`A`由于用于防止并发访问的互斥锁实际上并不是对象状态的一部分，但即使在读取对象状态时也需要更改，因此它是 make `mutable`。有了这个，创建一个复制构造函数就很简单了：

```
A::A(A const& other)
    : d_data((std::unique_lock<std::mutex>(other.d_mutex), other.d_data)) {
} 
```

这将锁定参数的互斥体并委托给成员的复制构造函数。锁在表达式结束时自动释放，与复制是否成功或抛出异常无关。正在构造的对象不需要任何锁定，因为另一个线程还没有办法知道这个对象。

赋值运算符的核心逻辑也只是委托给基，使用它的赋值运算符。棘手的一点是有两个互斥锁需要锁定：一个用于分配对象，一个用于参数。由于另一个线程可以以相反的方式分配这两个对象，因此存在死锁的可能性。方便的是，标准 C++ 库提供了`std::lock()`以适当方式获取锁的算法，以避免死锁。使用此算法的一种方法是传入未锁定的`std::unique_lock<std::mutex>`对象，每个需要获取的互斥体一个：

```
A& A::operator= (A const& other) {
    if (this != &other) {
        std::unique_lock<std::mutex> guard_this(this->d_mutex, std::defer_lock);
        std::unique_lock<std::mutex> guard_other(other.d_mutex, std::defer_lock);
        std::lock(guard_this, guard_other);

        *this->d_data = other.d_data;
    }
    return *this;
} 
```

如果在分配过程中的任何时候抛出异常，锁守卫将释放互斥体，资源处理程序将释放任何新分配的资源。因此，上述方法实现了强异常保证。有趣的是，复制分配需要做一次自分配检查，以防止两次锁定同一个互斥锁。通常，我认为必要的自赋值检查表明赋值运算符不是异常安全的，但我认为上面的代码是异常安全的。

这是对答案的重大改写。此答案的早期版本容易丢失更新或死锁。感谢 Yakk 指出问题。尽管解决问题的结果涉及更多代码，但我认为代码的每个单独部分实际上都更简单，并且可以调查其正确性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T17:37:00.430

首先，您必须了解没有操作是线程安全的，而是对给定资源的所有操作都可以是相互线程安全的。所以我们必须讨论非赋值运算符代码的行为。

最简单的解决方案是使数据不可变，编写一个使用 pImpl 类来存储不可变引用计数 A 的 Aref 类，并在 Aref 上使用变异方法导致创建新的 A。您可以通过让 A 的不可变引用计数组件（如 B 和 C）遵循类似的模式来实现粒度。基本上，Aref 成为 A 的 COW（写入时复制）pImpl 包装器（您可以包括优化以处理单引用情况以消除冗余副本）。

第二种方法是在 A 及其所有数据上创建一个整体锁（互斥锁或读写器）。在这种情况下，您要么需要对 A 实例的锁进行互斥排序（或类似技术）以创建无竞争的 operator=，要么接受可能令人惊讶的竞争条件可能性并执行 Dietmar 提到的复制交换习语。（复制移动也是可以接受的）（锁复制构造中的显式竞争条件，锁交换赋值运算符 =：线程 1 执行 X=Y。线程 2 执行 Y.flag = true，X.flag = true。之后的状态：X .flag 为假。即使 Thread2 在整个分配过程中同时锁定 X 和 Y，也可能发生这种情况。这会让许多程序员感到惊讶。）

在第一种情况下，非赋值代码必须遵守写时复制语义。在第二种情况下，非赋值代码必须服从整体锁。

至于异常安全，如果您假设您的复制构造函数是异常安全的，就像您的锁定代码一样，lock-copy-lock-swap 之一（第二个）是异常安全的。对于第一个，只要你的引用计数、锁克隆和数据修改代码是异常安全的，你就很好：无论哪种情况，operator= 代码都是相当脑死的。（确保您的锁是 RAII，将所有分配的内存存储在 std RAII 指针持有者中（如果您最终将其移交，则能够释放）等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T13:05:38.220

异常安全？对原语的操作不会抛出，所以我们可以免费获得。

原子？最简单的是 2x 的原子交换`sizeof(void*)`——我相信大多数平台都提供这个。如果他们不这样做，您将不得不求助于使用锁，或者有可以工作的无锁算法。

编辑：深拷贝，嗯？您必须将 A 和 B 复制到新的临时智能指针中，然后自动交换它们。

# three.js - 如果两个平面在three.js中太近，如何解决平面显示不正确

> ID：13030274
> 
> 赞同：0
> 
> 时间：2012-10-23T12:20:08.883
> 
> 标签：three.js

如果两个平面在three.js中太近，如何解决平面显示不正确？ [http://archive.acroidea.com/images/plane2.jpg](http://archive.acroidea.com/images/plane2.jpg) 我的飞机离地面太近了，似乎不能正常工作，我是学习 3d 的新手，有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:34:30.020

您可以将平面进一步分开。

如果您不想这样做，可以尝试将相机`near`平面移离相机更远的地方。

或者，您可以尝试将`far`飞机移近相机。

由于非线性效应，大部分深度缓冲精度接近`near`平面。

# c++ - Callgrind 内联函数

> ID：13030281
> 
> 赞同：6
> 
> 时间：2012-10-23T12:20:34.450
> 
> 标签：c++, gcc, profiling, valgrind, callgrind

我正在分析我的代码，我已经找到了其中最昂贵的部分。然而，它发生在一个内联函数中。为了衡量影响，我强制该函数不被内联。

现在我想报告准确的分析数据。如果没有内联，我们会有很大的开销（该函数基本上是一个循环，但它被非常非常频繁地调用）。

我想知道是否可以指示 valgrind 将代码的特定部分视为一个函数本身（如 makros CALLGRIND_START_INSTRUMENTATION、CALLGRIND_STOP_INSTRUMENTATION）而不强制函数不被内联。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T19:58:17.737

```
valgrind --tool=callgrind 
```

能够显示有关 cpu（以及其他成本，例如缓存）花费位置的大量详细信息。kcachegrind（可视化工具）可以轻松显示各种成本（包括内联函数）。

尝试运行例如：

```
valgrind --tool=callgrind --dump-instr=yes --collect-jumps=yes 
```

注意：要查看指令级别的成本，您必须使用 kcachegrind

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:06:21.083

也许您可以在调用函数之前和函数开始时调用 CALLGRIND_TOGGLE_COLLECT 宏，同样适用于函数退出和函数调用之后。例如

```
int main()
{
    CALLGRIND_TOGGLE_COLLECT;
    myFunction();
    CALLGRIND_TOGGLE_COLLECT;
}

__attribute__((noinline))
void myFunction()
{
    CALLGRIND_TOGGLE_COLLECT;
    //Do stuff
    CALLGRIND_TOGGLE_COLLECT;
} 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T13:26:53.383

我不确定这是否是你想要的，但我不确定它不是:)：http:
[//valgrind.org/docs/manual/cg-manual.html#cg-manual.overview](http://valgrind.org/docs/manual/cg-manual.html#cg-manual.overview)

> 此外，由于每执行一条指令都会执行一次指令缓存读取，因此您可以了解每行执行了多少条指令，这对于传统的分析很有用。

# c# - @html.password 的问题

> ID：13030289
> 
> 赞同：0
> 
> 时间：2012-10-23T12:20:49.210
> 
> 标签：c#, asp.net-mvc, popup

我`@Html.Password("Password", ViewData["password"])`用于在弹出窗口中显示密码，正在显示密码，我应该能够编辑和更新它。编辑后，当我单击保存按钮时，密码未更新。

`ModelState.IsValid`正在给予`false`并且正在跳过该方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:03:05.510

来自[密码方法](http://msdn.microsoft.com/en-us/library/dd460493%28v=vs.90%29.aspx)签名

```
public static string Password(
    this HtmlHelper htmlHelper,
    string name
) 
```

第二个论点是

```
The name of the form field and the ViewDataDictionary key that is used to look up the value. 
```

`ViewData["password"]`因此，作为第二个参数传递实际上是错误的。

MVC 会自动在 中寻找值`ViewData`，所以你可以写

```
@Html.Password("Password") 
```

或者*以正确的方式*做所有事情并使用强类型视图模型

# wpf - 如何在 WPF 中引入第二个从屏幕顶部延伸到底部的菜单栏

> ID：13030291
> 
> 赞同：0
> 
> 时间：2012-10-23T12:20:49.057
> 
> 标签：wpf

我想介绍第二个从屏幕顶部延伸到底部的菜单栏。

```
<StackPanel Orientation="Vertical" Background="Beige" VerticalAlignment="Stretch">
  <ToggleButton Content="One Button in second menubar"/>
</StackPanel> 
```

似乎 VerticalAlignment 不像我想象的那样。StackPanel 在 ToggleButton 周围最小化。我怎样才能让它从屏幕的顶部延伸到底部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:32:38.877

你的意思是这样的吗？

```
<DockPanel>
    <ToolBarTray DockPanel.Dock="Left" Orientation="Vertical" Background="Beige">
        <ToolBar>
            <ToggleButton Content="One Button in second menubar"/>
        </ToolBar>       
    </ToolBarTray>
    <Grid />       
</DockPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:07:05.940

我通过将它放在一个空窗口中来测试你的代码，它就像你想要的那样工作。确保它没有从它的父母那里得到大小限制

# java - 由于字段大小有限，数据未保存在数据库中

> ID：13030293
> 
> 赞同：0
> 
> 时间：2012-10-23T12:20:56.727
> 
> 标签：java, sql, oracle

`message`数据库表中有一个`fsr_system_log`用于 schema的列`fsr_appl`。该表应该存储系统日志消息。列的大小为 255，数据类型为`varchar2`. 保存大小大于 255 个字符的消息的逻辑是：

```
public void saveSystemLog(SystemLogRequest systemLog){
    User user = systemLog.getUser();
    String system = systemLog.getSystem();
    Log log = systemLog.getSystemLog();

    try {
        initializeDelegate();
        delegate.beginTransaction();

        LogEntry[] logEntries = log.getItemArray();
        for (LogEntry logEntry : logEntries) {
            // Save each entry
            ParamVector<Object> params = new ParamVector<Object>();

            //Check if message is greater than 255 characters
            String message = logEntry.getMsg();
            notifier.debug("Log Message is : " + message);
            if(message.length()>255){
                message = message.substring(0,255);
                notifier().debug("Message string greater than 255 characters : " + message);
            }
            params.add(message, 255, false);
} 
```

但是尽管实现了代码，我仍然面临以下错误：

> 由于 SQL 错误，无法保存系统日志：ORA-12899：“FSR_APPL”列的值太大。“FSR_SYSTEM_LOG”。“MESSAGE”（实际：257，最大：255）

正在使用的示例日志是：

```
<xbe:systemLogRequest xmlns:xbe="http://tdc.dk/fsr/common/xbean">
<user>
    <userNumber>a62267</userNumber>
</user>
<system>Client</system>
<systemLog>
    <item>
        <timestamp>2011-10-27T17:03:08.404+02:00</timestamp>
        <type>Info</type>
        <msg><![CDATA[<html><center>Din registrering er nu sendt<br><br>Tak for indmeldingen</center></html>]]></msg>
    </item>
    <item>
        <timestamp>2011-10-27T17:03:13.701+02:00</timestamp>
        <type>Info</type>
        <msg><![CDATA[<html><center>Din registrering er nu sendt<br><br>Tak for indmeldingen</center></html>]]></msg>
    </item>
    <item>
        <timestamp>2011-10-28T12:45:47.801+02:00</timestamp>
        <type>Info</type>
        <msg><![CDATA[<html><center>Din registrering er nu sendt<br><br>Tak for indmeldingen</center></html>]]></msg>
    </item>
    <item>
        <timestamp>2011-10-28T12:45:57.926+02:00</timestamp>
        <type>Info</type>
        <msg>Afsluttet uden at gemme fejlregistering</msg>
    </item>
</systemLog>
</xbe:systemLogRequest> 
```

请帮忙！

**注意：**抛出的错误仅适用于某些系统日志消息。抛出此错误时，实际值始终为常量 257。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:05:46.113

显然你有一些用一个以上字节表示的字符。

在 Java 中，您以*字符*为单位获得字符串的长度，而 Oracle 显然会根据列的定义方式检查*字节*限制。

查看表的定义，很可能该列是使用默认字符语义定义的 - 它是字节（但取决于您的 Oracle 安装），所以它默认为`VARCHAR2(255 Byte)`

如果您将列重新定义为`VARCHAR2(255 Char)`事情应该没问题。

就像是：

```
CREATE TABLE FSR_SYSTEM_LOG
(
   ...
   MESSAGE  VARCHAR2(255 Char),
   ...
); 
```

对我来说，将 XML 存储在这样一个（长度）有限的列中似乎很奇怪。你能确保你的 XML**永远不会**超过 255 个字符吗？为什么不将消息存储为`CLOB`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:52:20.283

乍一看，我怀疑是编码问题...

Java 使用 unicode：unicode 中的一个**字符**可能需要一个到*多个*字节... Java 字符串的长度可能是 1，但是当在存储上编组时，它可能需要 2 个字节，4 个字节...

要检查字节长度，也许你应该尝试：

```
if(message.getBytes("US-ASCII").length()>255){ 
```

您的 Oracle DB 的编码是什么？

另一个可能的问题是写入数据库的类将 CR/LF(0D0A) 添加到 msg 参数或其他内容......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:05:52.733

您可以将字段类型更改为 CLOB、BLOB 或 XMLType。查找 Oracle 数据类型，VARCHAR2 似乎也适用于字节。

可以理解，您可能不想更改字段类型，在这种情况下，请替换

```
if(message.length()>255){
  message = message.substring(0,255);
  notifier().debug("Message string greater than 255 characters : " + message);
} 
```

和

```
pos = 255
while (message.getBytes().size() > 255) {
  message = message.substring(0,pos--);
} 
```

# jquery - FullCalendar - 如何使其仅显示每周日历

> ID：13030294
> 
> 赞同：6
> 
> 时间：2012-10-23T12:20:59.987
> 
> 标签：jquery, html, jquery-ui, fullcalendar

我正在开展一个学校项目，在该项目中，我们将使用一个日历，在一个站点上每周查看一次，在另一个站点上每月查看一次，希望最终链接在一起，这样事件就可以同时使用两个日历。但我目前主要关心的是如何让它只显示当前的 WEEK，它应该只显示没有时间标记等的月视图中的天数。

简而言之，我只想减小日历大小，只显示当前周，与月视图使用相同的设计。希望有人可以帮助我完成这个看似简单的任务。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T06:39:35.500

试试这个 [http://arshaw.com/fullcalendar/docs/views/](http://arshaw.com/fullcalendar/docs/views/)

```
$("#weekcalender").fullCalendar({
header: {
     left   : 'prev,next',
     center : 'title',
     right  : 'agendaDay',
    },
defaultView: 'basicWeek'
}) 
```

将默认视图设置为基本周，您可以摆脱日历上的时间显示

# sharepoint - Hive 文件夹下的 web.config 文件的用途是什么

> ID：13030304
> 
> 赞同：1
> 
> 时间：2012-10-23T12:21:23.733
> 
> 标签：sharepoint, sharepoint-2010

我是 SharePoint 新手，我正在使用 SP 2010。我是 asp.net 开发人员，但我不明白我是否有 80 以下的 web.config，那么 14 文件夹下的那些 web.config 文件是什么，你能简要讨论一下吗?

到目前为止我找到了两个，在 14\Templates\Layouts 和 14\CONFIG 下有一个

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:19:42.503

SharePoint 开发类似于 ASP.NET 开发，但您需要注意一些主要差异。一种是使用 Web.config 来存储应用程序设置。

我写了一篇博客文章，其中包含几个资源的链接，以帮助新的 SharePoint 开发人员入门：[SharePoint 2010 开发入门 - 链接和资源](http://msmvps.com/blogs/windsor/archive/2011/08/01/getting-started-with-sharepoint-2010-development-links-and-resources.aspx)

我建议您首先观看[面向 ASP.NET 开发人员的 SharePoint](https://vimeo.com/29271944)谈话，以了解 SharePoint 体系结构和开发/部署模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T09:21:33.950

您会在 14 hive 中找到更多内容 :) 它们之所以存在，是因为它们是整个 sharepoint 应用程序页面不同部分的 web.config 文件。例如，“14\layouts\”中的一个用于一般应用程序页面、站点设置、区域设置……例如。14\layouts\admin 中的一个用于中央管理页面。

# java - Phonegap：从 Javascript 调用 java 函数

> ID：13030307
> 
> 赞同：0
> 
> 时间：2012-10-23T12:21:32.710
> 
> 标签：java, javascript, android, cordova

我想用 Javascript 调用我的一个 Java 函数并得到它的结果。为了做到这一点，我遵循[了本教程](https://github.com/phonegap/phonegap/wiki/How-to-show-and-hide-soft-keyboard-in-Android)和[这个问题](https://stackoverflow.com/questions/2727763/communication-between-android-java-and-phonegap-javascript)。我一步一步地跟着他们，我仍然得到这个错误

> 无法调用未定义的方法“showKeyBoard”

这是我的java类：

```
package keyboard;
import org.apache.cordova.DroidGap;
import android.content.Context;
import android.view.inputmethod.InputMethodManager;
import android.webkit.WebView;

public class KeyBoard {
  private WebView mAppView;
  private DroidGap mGap;
  public KeyBoard(DroidGap gap, WebView view) {
    mAppView = view;
    mGap = gap;
  }
  public void showKeyBoard() {
    InputMethodManager mgr = (InputMethodManager) mGap.getSystemService(Context.INPUT_METHOD_SERVICE);
    // only will trigger it if no physical keyboard is open
    mgr.showSoftInput(mAppView, InputMethodManager.SHOW_IMPLICIT);
    ((InputMethodManager) mGap.getSystemService(Context.INPUT_METHOD_SERVICE)).showSoftInput(mAppView, 0);
  }
  public void hideKeyBoard() {
    InputMethodManager mgr = (InputMethodManager) mGap.getSystemService(Context.INPUT_METHOD_SERVICE);
    mgr.hideSoftInputFromWindow(mAppView.getWindowToken(), 0);
  }
} 
```

这是我的主要课程：

```
package com.example.helloworld;
import keyboard.KeyBoard;
import android.os.Bundle;
import org.apache.cordova.*;
import android.view.Menu;
import QR.*;

public class MainActivity extends DroidGap {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.init();
    KeyBoard keyboard = new KeyBoard(this, appView);
    appView.addJavascriptInterface(keyboard, "KeyBoard");
    super.loadUrl("file:///android_asset/www/index.html");
  }

  @Override
    public boolean onCreateOptionsMenu(Menu menu) {
      getMenuInflater().inflate(R.menu.activity_main, menu);
      return true;
    }
  } 
```

我在 Javascript 中这样称呼它：

```
(function(){
  window.KeyBoard.showKeyBoard();
})(); 
```

有什么我没有做或遗漏的吗？正如我所说，我收到此错误：

> 无法调用未定义的方法“showKeyBoard”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:36:52.633

我建议您[编写一个 PhoneGap 插件](http://docs.phonegap.com/en/2.1.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)，而不是尝试使用您自己的方法。我们已经了解了 JavaScript 到 Java 通信的所有痛点。使用我们已经编写的内容，您就不会遇到我们在过去 3 年中已经解决的 Android 错误。

[http://docs.phonegap.com/en/2.1.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide](http://docs.phonegap.com/en/2.1.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-29T17:27:48.813

在 phonegap 中，我建议您使用自定义插件执行此操作，但如果您想直接调用 Java，请参阅此示例以了解一般情况

```
public class MainActivity extends DroidGap {
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            super.setIntegerProperty("loadUrlTimeoutValue", 70000);
            super.loadUrl("file:///android_asset/www/index.html");
            super.appView.addJavascriptInterface(new Bridge(), "b");
        }
    }

    class Bridge {
        @JavascriptInterface
        public String a()
        {
            Log.i("Bridge","This is from js");
            return "This is a message";

        }
    } 
```

在javascript中

```
setTimeout(function(){
      alert(b.a());
}, 1000); 
```

您的代码中需要 @JavascriptInterface 注释才能使其正常工作。

```
package keyboard;
import org.apache.cordova.DroidGap;
import android.content.Context;
import android.view.inputmethod.InputMethodManager;
import android.webkit.WebView;

public class KeyBoard {
  private WebView mAppView;
  private DroidGap mGap;
  public KeyBoard(DroidGap gap, WebView view) {
    mAppView = view;
    mGap = gap;
  }
  /*make it visible in bridge*/
   @JavascriptInterface
  public void showKeyBoard() {
    InputMethodManager mgr = (InputMethodManager) mGap.getSystemService(Context.INPUT_METHOD_SERVICE);
    // only will trigger it if no physical keyboard is open
    mgr.showSoftInput(mAppView, InputMethodManager.SHOW_IMPLICIT);
    ((InputMethodManager) mGap.getSystemService(Context.INPUT_METHOD_SERVICE)).showSoftInput(mAppView, 0);
  }
  /*make it visible in bridge*/
   @JavascriptInterface
  public void hideKeyBoard() {
    InputMethodManager mgr = (InputMethodManager) mGap.getSystemService(Context.INPUT_METHOD_SERVICE);
    mgr.hideSoftInputFromWindow(mAppView.getWindowToken(), 0);
  }
} 
```

在Javascript中这样称呼它：

```
(function(){
  KeyBoard.showKeyBoard();
})(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T20:41:58.640

我`JavascriptInterface`也在挣扎。你不能打电话的原因`showKeyboard`是恕我直言，你应该打电话`window.showKeyBoard()`而不是`window.Keyboard.showKeyBoard()`.

# c++ - 使用分隔符 ; 读取用于登录身份验证的文本文件

> ID：13030311
> 
> 赞同：4
> 
> 时间：2012-10-23T12:21:44.173
> 
> 标签：c++, input, text-files

我有一个如何使用分隔符读取文件的问题；读取和比较密码和用户名。目前我的代码只允许我读取一个用户名和一个密码，每个都在一个单独的文本文件中。

我希望我的文本文件采用这种格式，并且该函数将逐行检查文本文件，每个用户名和密码用“;”分隔

```
user;pass
user2;pass2
user3;pass3 
```

这是我当前的代码。

```
void Auth()
{
     ifstream Passfile("password.txt", ios::in);
     Passfile>>inpass;
     ifstream Userfile("username.txt", ios::in);
     Userfile>>inuser;
     //system("clear");
     cout<<"USERNAME: ";
     cin>>user;
     cout<<"PASSWORD: ";
     cin>>pass;
     Userfile.close();
     Passfile.close();
     if(user==inuser&&pass==inpass)
     {
     cout<<"\nLogin Success!!\n";
     cin.get();
     Members();
     }
     else
     {
        cout<<"\nLogin Failed!!\n";
         main();
     }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T13:04:37.963

你可以使用[getline](http://en.cppreference.com/w/cpp/string/basic_string/getline)，就像这样：

```
#include <iostream>
#include <fstream>
#include <string>

bool authenticate(const std::string &username, const std::string &password) {
    std::ifstream file("authdata.txt");
    std::string fusername, fpassword;

    while (file) {
        std::getline(file, fusername, ';'); // use ; as delimiter
        std::getline(file, fpassword); // use line end as delimiter
        // remember - delimiter readed from input but not added to output
        if (fusername == username && fpassword == password)
            return true;
    }

    return false;
}

int main() {
    std::string username, password;
    std::cin >> username >> password;
    return (int)authenticate(username, password);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T12:28:56.633

几个选项：

1.  `std::getline`需要一个终止符，因此您可以`';'`在名称之后用作 getline 的终止符，而不是常规`'\n'`

2.  将一行读入a `std::string`（使用`getline`或什至`>>`），然后使用`std::string::find`查找分号，然后您可以使用`std::string::substr()`分隔名称和密码。

3.  正则表达式或类似的，但可能不是你真正想要的。

您指定格式的方式似乎全部存储在一个文件中。

你可以

1.  加载整个文件，然后存储`std::map< std::string, std::string >`然后检查用户登录。

2.  由于您只会登录一次，因此您在此人输入用户名（和密码）后读取文件，一次一行，直到找到与他们输入的匹配的文件。

# android - 当我们在android的listview中单击另一个项目时如何取消选择选定的项目

> ID：13030313
> 
> 赞同：2
> 
> 时间：2012-10-23T12:21:49.580
> 
> 标签：android, listview

我的应用程序中有一个列表视图，并且想为每个选定的项目设置背景颜色，同时我想移动到另一个活动。然后，如果我在列表中选择另一个项目，则应该取消选择之前选择的项目。单击另一个项目时，我没有取消选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:31:59.830

```
 <ImageView
        android:id="@+id/imgfavoriteactive"
        android:layout_width="35dip"
        android:layout_height="35dip"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="10dip"
        android:src="@drawable/favorite" />

        favorite.xml set in drawable folder

       <?xml version="1.0" encoding="utf-8"?>
        <selector xmlns:android="http://schemas.android.com/apk/res/android">
          <item android:state_selected="true"
              android:drawable="@drawable/favoriteactive"/>
          <item android:state_selected="false"
              android:drawable="@drawable/favoriteinactive"/>
        </selector>

        img_nfl_favoriteactive.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                  for (int i = 0; i < listview.getChildCount(); i++) {
                    listview.getChildAt(i)
                            .findViewById(R.id.imgfavoriteactive)
                            .setSelected(false);

                }

                    img_nfl_favoriteactive.setSelected(true);
            }
        }); 
```

# iphone - 无法打开“Storyboard.storyboard”

> ID：13030314
> 
> 赞同：9
> 
> 时间：2012-10-23T12:21:51.593
> 
> 标签：iphone, xcode, storyboard

> 无法打开文档“Storyboard.storyboard”。无法读取存档。
> 
> 请使用更新版本的 Xcode。考虑更改文档的开发目标以保持兼容性。

我们不能通过对设置进行一些更改来在 xcode 4.2 上运行它。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-16T11:57:44.697

将storyboard文件作为源代码打开，然后将最开始的版本从2.0改为1.0。这次将其作为情节提要文件打开，瞧 :)

来自：[http ://www.xappsoftware.com/wordpress/2012/09/17/how-to-open-a-storyboard-created-with-xcode-4-3-or-4-4-with- xcode-4-2-workaround/](http://www.xappsoftware.com/wordpress/2012/09/17/how-to-open-a-storyboard-created-with-xcode-4-3-or-4-4-with-xcode-4-2-workaround/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T13:06:17.720

在项目导航器中选择“Storyboard.storyboard”。转到实用程序区域并打开文件检查器。在 Document versioning 部分中，将“Development”更改为 Xcode 4.2

# java - 调试慢速 Java 方法

> ID：13030317
> 
> 赞同：1
> 
> 时间：2012-10-23T12:22:05.060
> 
> 标签：java, performance, visualvm

VisualVM 向我展示了一个特定的方法需要很长时间才能执行。

是否有任何广泛使用的策略来查看 Java 方法的性能（关于时间）？

我的直觉是，缓慢的响应时间将来自 VisualVM 报告的调用层次结构中某个位置的方法，但我认为获得一些硬数字比基于假设在代码中四处寻找要好表现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:26:07.057

VisualVM 应该向您展示使用最多 CPU 的方法。如果最大的用户是您的方法，则意味着它不是您正在调用的方法，除非您正在调用许多单独看起来很小但总体上更多的方法。

我建议你把这个方法调用的方法和你的总数区别开来。这就是您的方法添加了多少被分析的内容。注意：由于分析器有开销，因此未分析时它添加的量可能会更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:27:36.290

您需要使用 JProfiler、Yourkit 等工具。您可以深入分析您的代码，并且您可以准确掌握哪个方法花费了很多时间。使用这些工具，您可以随心所欲地深入层次结构。

# ruby-on-rails - Rails，验证警告

> ID：13030326
> 
> 赞同：3
> 
> 时间：2012-10-23T12:22:43.267
> 
> 标签：ruby-on-rails, validation, model

嗨，我要做的就是创建一个“软”验证，换句话说，不是我没有通过验证而不是将数据保存到数据库中，而是希望验证向用户发出警告并允许用户如果他们愿意，请保存错误的数据。但是验证者之前会给他们一个警告。

我想做如下的事情：

```
class MyModel < ActiveRecord::Base
  warnings do
    validate :warnings_validation
  end

  def warnings_validation
    warnings.add(:name_of_element, "warning message") unless x == x
  end
end 
```

我的模型使用了很多继承，所以像[validations_scope](https://github.com/gtd/validation_scopes)这样的宝石没有任何想法我可以做什么/使用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-07-01T08:03:45.297

我相信您可以从 ActiveModel::Error[示例](https://api.rubyonrails.org/classes/ActiveModel/Errors.html)中启发自己来实现警告功能。

**说明**：

如果您查看如何在 Active Record 中验证数据，只需查看`valid?`方法：

```
 def valid?(context = nil)
    context ||= default_validation_context
    output = super(context)
    errors.empty? && output
  end 
```

上下文和输出并不重要，重要的是该`valid?`方法检查`errors`实例变量是否为空。

换句话说，在我给你的上一个链接中，只需将`errors`实例变量重命名为`warnings`就可以了。您必须使用内置的 rails 创建一个自定义验证器，然后`warnings.add(:name, "error")`在需要时简单地调用。它应该在填充`warnings`变量时保存记录。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T12:35:41.203

看到这个 -[自定义验证](http://guides.rubyonrails.org/active_record_validations.html#performing-custom-validations)

尝试这个

```
 validate :warnings_validation
  def warnings_validation
    self.name_of_element.blank?
      errors.add(:name_of_element, "warning message") unless x == x
    end
  end 
```

# c# - 问题 jquery ResolveClientUrl asp.net

> ID：13030332
> 
> 赞同：-1
> 
> 时间：2012-10-23T12:23:12.687
> 
> 标签：c#, jquery, asp.net

当我在我的 jquery url 中使用它时，它会找到；

```
 $.ajax({
                                url: '<%= ResolveClientUrl("~/TestJQueryTabStrip.aspx/DeleteRecord") %>',
                                type: "POST",
                                dataType: "json",
                                contentType: "application/json; charset=utf-8",
                                data: JSON.stringify({ id: itemId })
                            }); 
```

但是当我想把它改成这个时；

```
 url: '<%= ResolveClientUrl("~/UserControls/Order/OrderProductLicense.aspx/DeleteRecord") %>', 
```

它没有找到。我该如何解决这个问题？

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:30:32.840

我喜欢这个..

```
public static class MyUtility
{

 public static string GetAppPath()
    {

        return (System.Web.HttpRuntime.AppDomainAppVirtualPath == "/") ? string.Empty : System.Web.HttpRuntime.AppDomainAppVirtualPath;

    }
} 
```

然后像 javascript 变量一样在 jQuery 中引用

```
var myOrderUrl=<%= MyUtility.GetAppPath() %>+'/UserControls/Order/OrderProductLicense.aspx/DeleteRecord';

 $.ajax({
          url: myOrderUrl, etc.. 
```

# ios - 如何推迟处于“等待审核”状态的 iOS 应用程序

> ID：13030338
> 
> 赞同：0
> 
> 时间：2012-10-23T12:23:37.710
> 
> 标签：ios, appstore-approval

我为我的未来应用取了一个好名字，并为我的应用命名。我太忙了，这个名字已经在 iTunes Connect 中出现了将近 180 多天。所以我必须提交一个二进制文件来为我保留这个名字。现在我的 iOS 应用程序处于“等待审核”状态，但二进制文件并不适合审核。

我可以做些什么来推迟我的应用程序进行审查，同时仍然为我保留应用程序名称？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:24:36.540

只是拒绝二进制.................................................. ..................................................... ......

[拒绝状态等待审查的二进制文件（找不到拒绝二进制按钮）](https://stackoverflow.com/questions/4915584/reject-binary-with-state-waiting-for-review-cant-find-reject-binary-button)

# google-app-engine - Google App Engine 数据存储实体中文本的子字符串搜索

> ID：13030340
> 
> 赞同：3
> 
> 时间：2012-10-23T12:23:40.317
> 
> 标签：google-app-engine, google-cloud-datastore, jdo

我一直在使用 Google App Engine。我发现搜索子字符串和其他一些操作有问题。javax.jdo.Query 提供了根据需要设置过滤器的选项。有几个过滤器可用，例如包含、不等式运算符，但我找不到任何符合我需要的过滤器。

我找不到以下方法：如何将查询过滤器设置为

1.  搜索子字符串
2.  按正则表达式搜索
3.  按忽略大小写搜索

JDO 是否可以进行上述 3 种操作中的任何一种？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:37:45.307

不，这些在 App Engine 数据存储区中是不可能的，因为它们不能满足索引。App Engine 数据存储区不执行需要扫描所有实体的查询。

对于第一个选项，全文搜索可能是您想要的。第二，没有好的解决办法。最后，您只需将字符串的小写或大写版本存储在数据存储中以进行搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T13:02:26.850

您是否从 App Engine 对新的 FTA 进行了一些搜索？[https://developers.google.com/appengine/docs/java/search/](https://developers.google.com/appengine/docs/java/search/)

您必须从数据存储中创建数据索引，然后您可以使用一些通配符对索引文档进行搜索。

但请注意，这个项目目前是实验性的。

编辑：

另一种解决方案是将[Whoosh](http://pypi.python.org/pypi/Whoosh/)与App Engine 上的[后端服务一起使用。](https://developers.google.com/appengine/docs/python/backends/)然后创建一个 Web 服务。并使用 urlfetch 从您的前端调用您的后端。

# c# - 用一个按钮选择一个数据库表，然后用另一个按钮插入它

> ID：13030346
> 
> 赞同：0
> 
> 时间：2012-10-23T12:23:50.817
> 
> 标签：c#, windows, forms, frameworks, entity

我想使用带有 Windows 窗体的实体框架保存记录。在数据库上，我有许多彼此相似的表；它们都有自动增量 ID 列和一个字符串列。我想要的是创建一组按钮，当按下其中一个按钮时，它会用指定的表格填充列表框。此外，另一个固定按钮会将固定文本框中的字符串插入到先前按下的按钮选择的表中。

问题是我不能在第二个按钮中使用创建的上下文项。

这是左侧按钮之一的代码：

```
private void btnBB_Click(object sender, EventArgs e)
    {
        lbItems.DataSource = GsmContext.bbler;
        lbItems.DisplayMember = "bb";
        bb = new bbler();
        bb.bb = txtItem.Text;
        GsmContext.AddTobbler(bb);
    } 
```

这是在文本框中保存项目的代码：

```
 private void SaveItem(object sender, EventArgs e)
    {
        if (txtItem.Text == string.Empty)
        { this.errorProvider1.SetError(txtItem, "Değer girin"); }
        else
        {
            try
            {
                GsmContext.SaveChanges();
                txtItem.Clear();
            }
            catch (SqlException x)
            {
                MessageBox.Show(x.Message);
            }
        }
    } 
```

![在此处输入图像描述](../Images/789e58e08de8d0c199e7a3cd66c709ed.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:52:17.667

这就是我所拥有的。我的实体框架模型定义了数据库中的所有类。然后我创建了一个接口 IRepository 和一个 DataRepository 类。

```
public interface IRepository<T> : IDisposable where T : class
{
    IQueryable<T> Fetch();
    IEnumerable<T> GetAll();
    IEnumerable<T> Find(Func<T, bool> predicate);
    T Single(Func<T, bool> predicate);
    T First(Func<T, bool> predicate);
    void Add(T entity);
    void Delete(T entity);
    void Attach(T entity);
    void Detach(T entity);
    void UpdateChanges(T entity);
    void SaveChanges();
    void SaveChanges(SaveOptions options);

}

public class DataRepository<T> : IRepository<T> where T : class
{

    private ObjectContext _context;

    private IObjectSet<T> _objectSet;

    public DataRepository()
        : this(new ModelContainer()) //ModelContainer is the name of the EF model class.
    {
    }

    public DataRepository(ObjectContext context)
    {
        _context = context;
        _objectSet = _context.CreateObjectSet<T>();
    }

    public IQueryable<T> Fetch()
    {
        return _objectSet;
    }

    public IEnumerable<T> GetAll()
    {
        return Fetch().AsEnumerable();
    }

    public IEnumerable<T> Find(Func<T, bool> predicate)
    {
        return _objectSet.Where<T>(predicate);
    }

    public T Single(Func<T, bool> predicate)
    {
        return _objectSet.Single<T>(predicate);
    }

    public T First(Func<T, bool> predicate)
    {
        return _objectSet.First<T>(predicate);
    }

    public void Delete(T entity)
    {
        if (entity == null)
        {
            throw new ArgumentNullException("entity");
        }

        _objectSet.DeleteObject(entity);
    }

    public void Delete(Func<T, bool> predicate)
    {
        IEnumerable<T> records = from x in _objectSet.Where<T>(predicate) select x;

        foreach (T record in records)
        {
            _objectSet.DeleteObject(record);
        }
    }

    public void Add(T entity)
    {
        if (entity == null)
        {
            throw new ArgumentNullException("entity");
        }

        _objectSet.AddObject(entity);
    }

    public void Attach(T entity)
    {
        _objectSet.Attach(entity);
    }

    public void Detach(T entity)
    {
        _objectSet.Detach(entity);
    }

    public void UpdateChanges(T entity)
    {
        Add(entity);
        _context.ObjectStateManager.ChangeObjectState(entity, System.Data.EntityState.Modified);
        SaveChanges();
    }

    public void SaveChanges()
    {
        _context.SaveChanges();
    }

    public void SaveChanges(SaveOptions options)
    {
        _context.SaveChanges(options);
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    protected virtual void Dispose(bool disposing)
    {
        if (disposing)
        {
            if (_context != null)
            {
                _context.Dispose();
                _context = null;
            }
        }
    }
} 
```

然后选择这样的记录：

```
 public IList<MyDbClass> GetMyDbClassData()
    {
        IList<MyDbClass> myDbClassData = null;
        using (IRepository<MyDbClass> repository = new DataRepository<MyDbClass>())
        {
            myDbClassData = (from x in repository.GetAll()
                             select x).ToList();
        }
        return myDbClassData;
    } 
```

要创建新记录：

```
 public void CreateUser(User user)
    {
        using (IRepository<User> repository = new DataRepository<User>())
        {
            repository.Add(user);
            repository.SaveChanges();
        }
    } 
```

# load - 在应用加载时保存为用户默认值

> ID：13030348
> 
> 赞同：0
> 
> 时间：2012-10-23T12:24:13.733
> 
> 标签：load, save, nsuserdefaults, appdelegate

我最近实现了一个将许多数组、布尔值和整数保存到用户默认值中的系统。现在我目前在我的界面上使用三个按钮来测试功能并且它可以正常工作，但是我在尝试自动化保存系统时遇到了问题。

本质上，我希望应用程序在终止或被推送到后台时保存数据。然后，它仅在应用程序完全重新启动时加载数据。

我尝试使用以下 appdelegate 委托方法来运行我创建的用于保存和加载的方法：

```
didFinishLaunchingWithOptions: 
applicationWillTerminate: 
```

但它们似乎不起作用，我知道当应用程序被推回时我需要输入前台方法来保存，但目前没有任何效果。该应用程序似乎崩溃或无法保存和加载数据。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:39:15.567

我认为你应该保存你`defaults`的

`- (void)applicationDidEnterBackground:(UIApplication *)application`方法。

并且，为了再次访问`defaults`，获取数据

`- (void)applicationWillEnterForeground:(UIApplication *)application`

或在

`- (void)applicationDidBecomeActive:(UIApplication *)application` 方法。

# actionscript-3 - AS3 实例名称奇怪的行为

> ID：13030349
> 
> 赞同：0
> 
> 时间：2012-10-23T12:24:15.607
> 
> 标签：actionscript-3, flash, class, object, instance

我有一些我在开始时加载的电影剪辑，它们都是它们各自类定义的实例，添加 MOUSE_UP 侦听器来跟踪它们的名称对于不同的类对象表现不同。可能有哪些问题？

```
var ClassDefinition:Class = purchasedItems.item as Class;
var item:MovieClip = new ClassDefinition();

item.addEventListener(MouseEvent.MOUSE_UP,function(e:MouseEvent){trace(e.target.toString());}); 
```

它输出 MovieClip 的名称，如“[object bluelamp]”（必需），但其他一些为“[object MovieClip]”（不需要），而我创建的每个对象都使用类定义并且它们成功加载。

他们都假设以类似的方式输出他们的名字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:48:17.380

e.target 将指向被单击的项目，即使它是您的类中的项目（子级）。因此，如果您的 bluelamp 对象包含其他启用鼠标的项目，例如 MovieClips、Sprites 等，这些项目可能会“劫持”鼠标事件。

你可以尝试：

```
item.mouseChildren = false; 
```

或`e.currentTarget`在您的跟踪语句中使用

最好的祝福

# android - 确定位置 gps 和 wifi

> ID：13030357
> 
> 赞同：0
> 
> 时间：2012-10-23T12:24:50.380
> 
> 标签：android, location

我想在确定设备位置时显示一个对话框。我还想同时使用 wifi 和 gps 提供商。当位置发生变化时，应更新纬度和经度值。我找了一个例子，但我没有找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:36:12.667

这是一个如何定义位置管理器并获取位置更改事件的示例：

```
public class LocationChangeListener  implements LocationListener{

private LocationManager mLocationManager = null;
private static final int TWO_MINUTES = 1000 * 60 * 2;
private Location currentBestLocation = null;

public LocationChangeListener(Context context) {
    super(context);
}

public void impl(int refreshPeriod, int accuracyInMeters){

    // Get the location manager
    mLocationManager = (LocationManager) ctx.getSystemService(Context.LOCATION_SERVICE);

    currentBestLocation = getLastBestLocation();

    boolean enabled = mLocationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);

    // Check if enabled and if not send user to the GSP settings
    // Better solution would be to display a dialog and suggesting to 
    // go to the settings
    if (!enabled) {
        Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
        mContext.startActivity(intent);
    } 

    Criteria criteria = new Criteria();
    //criteria.setAccuracy(Criteria.ACCURACY_FINE);
    //criteria.setCostAllowed(false);

    String provider = mLocationManager.getBestProvider(criteria, false);
    Location location = mLocationManager.getLastKnownLocation(provider);

    LocationListener listener = this;       
    mLocationManager.requestLocationUpdates(provider, refreshPeriod, accuracyInMeters, listener);
    //mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listener);
    //mLocationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, listener);

    this.onLocationChanged(location);

    // Initialize the location fields
    if (location == null) {
        //Location not available

        mLocationManager.removeUpdates(this);
    }

}

/**
 * This method returns the last know location, between the GPS and the Network one.
 * For this method newer is best :)
 * 
 * @return the last know best location
 */
private Location getLastBestLocation() {
    Location locationGPS = mLocationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    Location locationNet = mLocationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

    long GPSLocationTime = 0;
    if (null != locationGPS) { GPSLocationTime = locationGPS.getTime(); }

    long NetLocationTime = 0;

    if (null != locationNet) {
        NetLocationTime = locationNet.getTime();
    }

    if ( 0 < GPSLocationTime - NetLocationTime ) {
        return locationGPS;
    }
    else{
        return locationNet;
    }

}

/**
 * This method modify the last know good location according to the arguments.
 * 
 * @param location      the possible new location
 */
void makeUseOfNewLocation(Location location) {
    if ( isBetterLocation(location, currentBestLocation) ) {
        currentBestLocation = location;
    }
}

public void onLocationChanged(Location location) {

    makeUseOfNewLocation(location);

    if(currentBestLocation == null){
        currentBestLocation = location;
    }

    FlowController.isTriggerEventReceived = true;       
    mCobytLocationCallback.onLocationChanged(currentBestLocation);      
}

public void onStatusChanged(String provider, int status, Bundle extras) {

}

public void onProviderEnabled(String provider) {

}

public void onProviderDisabled(String provider) {

}   

/** Determines whether one Location reading is better than the current Location fix
 * @param location  The new Location that you want to evaluate
 * @param currentBestLocation  The current Location fix, to which you want to compare the new one
 */
protected boolean isBetterLocation(Location location, Location currentBestLocation) {
    if (currentBestLocation == null) {
        // A new location is always better than no location
        return true;
    }

    // Check whether the new location fix is newer or older
    long timeDelta = location.getTime() - currentBestLocation.getTime();
    boolean isSignificantlyNewer = timeDelta > TWO_MINUTES;
    boolean isSignificantlyOlder = timeDelta < -TWO_MINUTES;
    boolean isNewer = timeDelta > 0;

    // If it's been more than two minutes since the current location, use the new location
    // because the user has likely moved
    if (isSignificantlyNewer) {
        return true;
        // If the new location is more than two minutes older, it must be worse
    } else if (isSignificantlyOlder) {
        return false;
    }

    // Check whether the new location fix is more or less accurate
    int accuracyDelta = (int) (location.getAccuracy() - currentBestLocation.getAccuracy());
    boolean isLessAccurate = accuracyDelta > 0;
    boolean isMoreAccurate = accuracyDelta < 0;
    boolean isSignificantlyLessAccurate = accuracyDelta > 200;

    // Check if the old and new location are from the same provider
    boolean isFromSameProvider = isSameProvider(location.getProvider(),
            currentBestLocation.getProvider());

    // Determine location quality using a combination of timeliness and accuracy
    if (isMoreAccurate) {
        return true;
    } else if (isNewer && !isLessAccurate) {
        return true;
    } else if (isNewer && !isSignificantlyLessAccurate && isFromSameProvider) {
        return true;
    }
    return false;
}

/** Checks whether two providers are the same */
private boolean isSameProvider(String provider1, String provider2) {
    if (provider1 == null) {
        return provider2 == null;
    }
    return provider1.equals(provider2);
}

public void destroyManager() {

    if(mLocationManager != null){
        mLocationManager.removeUpdates(this);

        mLocationManager = null;
    }       
}
} 
```

由于安卓有

`GPS_PROVIDER`您可以同时注册两者并从 2`NETWORK_PROVIDER` 开始获取事件。`onLocationChanged(Location location)`到现在为止还挺好。现在的问题是我们需要 2 个结果还是我们应该采取最好的。据我所知`NETWORK PROVIDER`，结果比`GPS`.

在我们开始监听位置变化之前，我们将实现跟随方法`private Location getLastBestLocation()`。此方法返回 GPS 和网络之间的最后一个已知位置。对于这种方法，更新的最好。

# c - gtk 中没有边框的 MessageDialog

> ID：13030363
> 
> 赞同：0
> 
> 时间：2012-10-23T12:25:01.673
> 
> 标签：c, gtk

我目前正在使用 gtk 在 c 中开发一个应用程序，但我遇到了 MessageDialog 小部件显示的问题。它几乎完全符合我的要求：它会弹出，但 MessageDialog 周围没有显示边框...（并且它在屏幕上并不真正可见）。我现在正在寻找如何找到添加此边框的方法，但我还没有找到任何东西......

这是我正在使用的简单代码：

```
GtkWidget *dialog;

dialog = gtk_message_dialog_new (window_main,
                             GTK_DIALOG_DESTROY_WITH_PARENT,
                             GTK_MESSAGE_ERROR,
                             GTK_BUTTONS_CLOSE,
                             "My message");
gtk_dialog_run (GTK_DIALOG (dialog));
gtk_widget_destroy (dialog); 
```

这是问题的图片（红色标签在背景上，对话框和此标签之间没有边框）：[图片](http://imageshack.us/a/img841/8476/messagedialognoborder.jpg)

有没有人已经面临这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:27:49.817

不知道它如何既没有边框又不可见，你的措辞在那里不是很清楚。

不过，您是否尝试添加呼叫到

```
gtk_widget_show_all(dialog); 
```

在运行对话框之前？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:06:10.323

问题来自于我没有在我的设备上使用窗口管理器。

# session - Tomcat节点之间的会话复制

> ID：13030367
> 
> 赞同：3
> 
> 时间：2012-10-23T12:25:16.650
> 
> 标签：session, tomcat, cluster-computing, tomcat7, sessionid

apache的tomcat doc说，可以通过三种方式实现tomcat节点间的会话复制——

1.  使用会话持久化，并将会话保存到共享文件系统（PersistenceManager + FileStore）
2.  使用会话持久化，并将会话保存到共享数据库（PersistenceManager + JDBCStore）
3.  使用内存复制，使用 Tomcat 6 附带的 SimpleTcpCluster (lib/catalina-tribes.jar + lib/catalina-ha.jar)

在我的应用程序中，我确实使用了具有两个 tomcat 7.0.25 节点的 SINGLE 集群。我想在这两个节点之间配置会话复制。谁能提供一些要点来描述我应该使用哪一个以及为什么？

我可以使用第 3 点设置会话复制。效果很好。

我也想玩选项 1 和 2。但无法找到任何描述第 1 点和第 2 点的链接。如果有人可以为我提供第 1 点和第 2 点的一些文档或链接，那将非常有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-14T13:58:04.327

按照本教程

[持久会话管理器和共享文件存储/JDBC 存储到 RDBMS](http://www.datadisk.co.uk/html_docs/java_app/tomcat6/tomcat6_clustering.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:41:39.737

在 Aleksa Vukotic、James Goodwil 所著的“Apache Tomcat 7”一书中有一些关于 JDBCStore 的信息：http: [//books.google.co.uk/books ?id=-1JFHBvvGBgC&lpg=PA117&ots=1UTkoEFKbP&dq=PersistenceManager%20%2B%20JDBCStore&pg =PA117#v=onepage&q=PersistenceManager%20+%20JDBCStore&f=false](http://books.google.co.uk/books?id=-1JFHBvvGBgC&lpg=PA117&ots=1UTkoEFKbP&dq=PersistenceManager%20%2B%20JDBCStore&pg=PA117#v=onepage&q=PersistenceManager%20+%20JDBCStore&f=false)

# mysql - 在 MySQL 中存储货币值的最佳数据类型

> ID：13030368
> 
> 赞同：320
> 
> 时间：2012-10-23T12:25:30.050
> 
> 标签：mysql, sqldatatypes, currency

我想在 MySQL 数据库中存储许多记录。它们都包含货币价值。但我不知道每个人要插入多少位。
为此，我必须使用哪种数据类型？
*VARCHAR*或*INT*（或其他数字数据类型）？

* * *

## 回答 #1

> 赞同：437
> 
> 时间：2012-10-23T12:26:37.320

由于金钱需要精确的表示，因此不要使用仅近似的数据类型，例如`float`. 您可以使用定点数字数据类型，例如

```
decimal(15,2) 
```

*   `15`是精度（**包括**小数位的值的总长度）
*   `2`是小数点后的位数

请参阅[MySQL 数字类型](https://dev.mysql.com/doc/refman/8.0/en/fixed-point-types.html)：

> 当保持精确的精度很重要时使用这些类型，例如**货币**数据。

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2012-10-23T12:27:11.707

您可以使用`DECIMAL`或`NUMERIC`两者相同

> DECIMAL 和 NUMERIC 类型存储精确的数字数据值。当保持精确的精度很重要时使用这些类型，例如货币数据。在 MySQL 中，NUMERIC 被实现为 DECIMAL，因此以下关于 DECIMAL 的注释同样适用于 NUMERIC。: [***MySQL***](http://dev.mysql.com/doc/refman/5.0/en/fixed-point-types.html)

*IE* `DECIMAL(10,2)`

> ![示例设置](../Images/853b2312528ef11fbf883412c5fedf0d.png)

[**好读**](http://www.craiglotter.co.za/2010/01/17/how-to-store-decimal-currency-values-in-mysql/)

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2014-09-03T07:14:13.163

我更喜欢使用`BIGINT`，并通过*乘以 100*来存储值，这样它就会变成整数。

例如，要表示 的货币值`93.49`，该值应存储为`9349`，同时显示该值我们可以*除以 100*并显示。这将占用更少的存储空间。

> **注意：**
> 大多数情况下我们不执行`currency * currency`乘法，如果我们正在执行，则将结果除以 100 并存储，以便它返回到正确的精度。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2012-10-23T12:30:27.693

这取决于您的需要。

通常使用`DECIMAL(10,2)`就足够了，但如果您需要更精确的值，您可以设置`DECIMAL(10,4)`.

如果您使用较大的值，请替换`10`为`19`.

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2014-04-28T23:40:05.840

如果您的应用程序需要处理高达一万亿的货币价值，那么这应该可以：13,2 如果您需要遵守 GAAP（公认会计原则），请使用：13,4

通常，在将输出四舍五入为 13.2 之前，您应该将您的货币价值加总为 13.4。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2018-01-06T10:34:30.657

在被问到这个问题的时候，没有人考虑过比特币的价格。在 BTC 的情况下，可能不足以使用`DECIMAL(15,2)`. 如果比特币涨到 100,000 美元或更多，我们至少需要`DECIMAL(18,9)`在我们的应用程序中支持加密货币。

`DECIMAL(18,9)`在 MySQL 中占用 12 字节空间（[每 9 位 4 字节](https://dev.mysql.com/doc/refman/5.7/en/precision-math-decimal-characteristics.html)）。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2018-04-03T07:12:28.637

## 我们使用`double`.

**喘气**

### 为什么？

因为它可以表示任何 15 位数字*，而对小数点的位置没有限制*。全部只有区区 8 个字节！

所以它可以表示：

*   `0.123456789012345`
*   `123456789012345.0`

...以及介于两者之间的任何东西。

这很有用，因为我们正在处理*全球货币*，并且`double`可以存储我们可能会遇到的各种小数位数。

单个`double`字段可以代表日元的999,999,999,999,999s，美元的9,999,999,999,999.99s，甚至比特币的9,999,999.99999999s

如果您尝试对 执行相同操作`decimal`，则需要`decimal(30, 15)`14 个字节。

### 注意事项

当然，使用`double`并非没有注意事项。

然而，正如一些人倾向于指出**的那样，这并不是准确性的损失。**即使它`double`本身在*内部可能不精确到以 10 为底的系统*，我们可以通过将我们从数据库中提取**的值四舍五入**到它的有效小数位来使其精确。如果需要的话。（例如，如果要输出，则需要以 10 为基数的表示。）

需要注意的是，任何时候我们使用它进行算术运算时，我们都需要在之前对结果进行规范化（通过将其四舍五入到有效的小数位）：

1.  对其进行比较。
2.  将其写回数据库。

另一种警告是，与`decimal(m, d)`数据库将阻止程序插入多于`m`数字的数字不同，不存在这样的验证`double`。一个程序可以插入一个用户输入的 20 位数的值，它最终会被默默地记录为一个不准确的数字。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-10-25T21:01:41.647

**如果需要 GAAP 合规性或您需要 4 个小数位：**

DECIMAL(13, 4) 支持最大值：

999,999,999.9999 美元

否则，如果 2 位小数就足够了：DECIMAL(13,2)

来源：[https ://rietta.com/blog/best-data-types-for-currencymoney-in/](https://rietta.com/blog/best-data-types-for-currencymoney-in/)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2014-09-16T07:41:39.863

实际上，这取决于程序员的偏好。我个人使用：`numeric(15,4)`符合*公认会计原则（**GAAP**）*。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-03-05T09:40:03.207

尝试使用

```
Decimal(19,4) 
```

这通常也适用于所有其他数据库

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-06-14T06:17:44.723

在所有“正常”情况下，将钱`BIGINT`乘以 100 或更多以使用更少的存储空间是没有意义的。

*   为了与 GAAP 保持一致，将货币存储在`DECIMAL(13,4)`
*   MySQL 手册读到它需要每 9 位 4 字节来存储`DECIMAL`.
    *   [https://dev.mysql.com/doc/refman/8.0/en/precision-math-decimal-characteristics.html](https://dev.mysql.com/doc/refman/8.0/en/precision-math-decimal-characteristics.html)
*   `DECIMAL(13,4)`表示 9 位 + 4 小数位（小数位）=> 4 + 2 字节 = 6 字节
*   与存储所需的 8 个字节相比`BIGINT`。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-11-08T13:09:48.180

乘以 10000 并存储为 BIGINT，如 Visual Basic 和 Office 中的“货币”。请参阅[https://msdn.microsoft.com/en-us/library/office/gg264338.aspx](https://msdn.microsoft.com/en-us/library/office/gg264338.aspx)

# database - 从 SQL Server 引导用户

> ID：13030382
> 
> 赞同：3
> 
> 时间：2012-10-23T12:26:19.367
> 
> 标签：database, sql-server-2008-r2, offline

我什至不知道如何问这个问题。我们正在运行 SQL Server 2008 R2。我不是管理员，而是程序员。我需要编写一个在晚上更新一些数据库内容的应用程序。我将设置一个标志来禁用对数据库的登录，但我想让一个特定的数据库对除我之外的任何人都不可用，即使有人已经登录到数据库。我的程序将作为批处理文件每晚运行，大概具有管理员权限。

我期望生成类似于 SQL 命令脚本的东西。我可以使数据库脱机，但我需要自己对其进行修改。不确定处理此问题的最佳方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T12:41:15.213

您基本上可以将数据库设置为“单用户”模式并独占使用它 - 此 T-SQL 将执行此操作：

```
USE master;
GO
ALTER DATABASE AdventureWorks2012
SET SINGLE_USER
WITH ROLLBACK IMMEDIATE;
GO 
```

（当然 - 替换`AdventureWorks2012`为您自己的数据库名称！）

这将使数据库成为“单用户”，例如只有您可以访问它，并且它将启动当前在线的所有用户，并回滚所有打开的事务。

[在 MSDN 上阅读有关单用户模式的更多信息](http://msdn.microsoft.com/en-us/library/ms345598.aspx)！

> 此示例将数据库设置为 SINGLE_USER 模式以获得独占访问。终止选项`WITH ROLLBACK IMMEDIATE`在第一条`ALTER DATABASE`语句中指定。这将导致所有未完成的事务被回滚，并且**与 AdventureWorks2012 数据库的任何其他连接立即断开。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:45:22.497

由于您使用管理帐户来执行更新，因此我假设该帐户具有以下角色之一：`db_owner`、`dbcreator`、`sysadmin`。在 DML 操作期间使用[`ALTER DATABASE SET ...`](http://msdn.microsoft.com/en-us/library/bb522682.aspx)语法来控制数据库访问。

**假设您要锁定的数据库用户不在上述角色中。**

```
USE master;

-- only allow members of db_owner, dbcreator, or sysadmin roles to access
-- database, allowing current transactions time to complete. if you want to
-- drop access immediately, add WITH ROLLBACK IMMEDIATE
ALTER DATABASE SET RESTRICTED_USER;

-- data load

-- return database to normal operating state
ALTER DATABASE SET MULTI_USER; 
```

# java - 如何在 JSF 中捕获未捕获的运行时异常？

> ID：13030383
> 
> 赞同：0
> 
> 时间：2012-10-23T12:26:21.970
> 
> 标签：java, jsf

最近，我花了 8 个小时调试我的 JSF 代码。失败的原因是 a `ClassNotFoundException`，它既没有出现在控制台输出中，也没有出现在日志文件中。

在普通的 Java 应用程序中，我可以`Thread.setDefaultUnhandledExceptionHandler(...)`用来记录未捕获的异常。但这对我的 JSF 应用程序没有帮助。

如何在 JSF 应用程序中实现未捕获的运行时异常的日志记录（理想情况下 - 记录文件和控制台，最低限度 - 到标准错误）？

**更新：**

*   JSF 应用程序项目`app`引用（包含 Maven 依赖项）项目`logic`和`commons`版本 1。
*   `commons`项目版本 2 包含一个类`X`。
*   `commons`项目版本 1 不包含 class `X`。
*   `logic``commons`项目需要并包含对版本 2的依赖项。
*   `ClassNotFoundException`发生在课堂上`X`。

这个测试用例可以重现问题：

```
@Test
public void test() {
    try {
        EntryPageController objectUnderTest = new EntryPageController();
        objectUnderTest.init();
        objectUnderTest.resetButtonAction();
        objectUnderTest.simulateYearButtonAction();
    } catch (Throwable exception) {
        LOGGER.error("", exception);
        Assert.fail(exception.getMessage());
    }
} 
```

`EntryPageController`JSF在哪里`ManagedBean`。

# math - 一定角度下圆的平移坐标

> ID：13030390
> 
> 赞同：0
> 
> 时间：2012-10-23T12:26:38.087
> 
> 标签：math

我有 2 个圆在某个碰撞点和某个碰撞角度下发生碰撞，我使用以下公式计算：

```
C1(x1,y1) C2(x2,y2) 
```

并且连接它们的中心的线和x轴之间的角度是

```
X = arctg (|y2 - y1| / |x2 - x1|) 
```

我想要的是在与另一个圆圈碰撞的相同角度下平移顶部的圆圈。我的意思是角度 X，我不知道我应该给出什么平移坐标才能进行正确和直接的平移！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:06:48.353

对于我认为你的意思，这里是如何干净地做到这一点。

**在向量**中思考。

假设底圆的中心有坐标`(x1,y1)`，顶圆的中心有坐标`(x2,y2)`。然后定义两个向量

```
support   = (x1,y1) 
direction = (x2,y2) - (x1,y1) 
```

现在，两个中心之间的线由参数表示完全描述

```
line = support + k*direction 
```

中的`k`任何值`(-inf,+inf)`。在最初的时候，代`k=1`入上面的等式确实给出了顶圆的坐标。在稍后的某个时间`t`， 的值`k`将会增加，并且`k`在等式中替换该新值将给出顶部圆中心的新坐标。

`k`价值增加多少`t`等于圈子的*速度*，我完全由你决定:)

这样做，您永远不需要弄乱任何角度和/或坐标变换等。它甚至可以在 3D 中工作（只要您在`z`各处添加 - 坐标）。

# java - 如何使用 Spring Security 跨多个基于 JVM 的应用程序实现单点登录

> ID：13030391
> 
> 赞同：5
> 
> 时间：2012-10-23T12:26:37.930
> 
> 标签：java, jakarta-ee, spring-security

我目前正在尝试跨多个基于 JVM（Grails、Servlets）的 Web 应用程序实现单点登录解决方案，这些应用程序当前都部署在同一个 servlet 容器中（目前是 Tomcat，但不想将我的解决方案仅限于 Tomcat）。所有 Web 应用程序共享一个公共数据库。

我查看了各种选项，从使用 CAS 或其他第三方库到创建新的 Web 服务来处理单点登录，但似乎没有一个能真正满足业务需求。我当前的实现涉及创建一个新的 jar 库，该库具有[AuthenticationProviders](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/authentication/AuthenticationProvider.html)的通用实现和基于 Spring Security 的[Pre-Authentication Filters 。](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/preauth.html)

在这种方法中，我有多个 AuthenticationProviders（当前是 Active Directory 和数据库）供应用程序进行身份验证。成功验证后，将在包含用户、到期时间和令牌的会话表中插入一行。该令牌还将作为 cookie 存储在用户的机器上，用于验证他们在预身份验证过滤器中是否有当前会话。

在我想确保我没有造成巨大的安全问题之前从未这样做过，而且我还想知道创建令牌需要什么？此时一个简单的 GUID 似乎就足够了？

目前我们正在开发 Spring Security 3.0.x，还没有升级到 3.1。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T15:16:55.970

[Spring Security Extensions](http://static.springsource.org/spring-security/site/extensions.html)网站上提供了可用于 KERBEROS、OAuth 和 SAML 的扩展。这是提供示例的博客条目：[SpringSource Blog](http://blog.springsource.org/2009/09/28/spring-security-kerberos/)

如果您使用 NTLM 作为 SSO 提供程序，请查看[jespa-spring](http://code.google.com/p/jespa-spring/)项目。

或者您可能想查看[Java Open Single Sign-On Project](http://www.josso.org/confluence/display/JOSSO1/Jossify+your+Spring+application)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-21T13:35:41.190

我最终通过执行以下操作解决了这个问题：

我创建了一个[AuthenticationSuccessHandler](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/AuthenticationSuccessHandler.html)，它将向用户会话添加一个 cookie，该会话具有识别信息和主机名，以尽可能地保护它。（该应用程序在大多数客户站点内部运行，因此这里的风险被确定为最小，但要小心 cookie 劫持。）

然后在每个需要 SSO 的应用程序上，我实现了[AbstractPreAuthenticatedProcessingFilter](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/preauth/AbstractPreAuthenticatedProcessingFilter.html)，并放置在身份验证过滤器之前，该过滤器将提取 cookie 并创建一个 Authentication 对象。最后，我创建了一个[验证](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/preauth/PreAuthenticatedAuthenticationProvider.html)来自 cookie 的信息的 AuthenticationProvider。

希望将来可以帮助其他人处理此类请求。

# regex - 正则表达式排除少数文件但包括其余文件

> ID：13030392
> 
> 赞同：0
> 
> 时间：2012-10-23T12:26:40.050
> 
> 标签：regex

我有多级目录结构，我想列出所有目录（png、jpeg 文件），除了文件，比如 sam.png、pam.jpeg 等来自任何目录

最终，我想将所有文件列为

```
a/b/c/d*.jpg (inlude all jpg, but I want to exclude sam.png from a/b/c/d directory)

a/b/c/d*.jpeg

a/b/c/d*.png

a/e/f/k/h/*.png 
```

...等等

我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T13:57:21.040

使用以下`regex`-

```
.(jpg|jpeg|gif|png)$(?<!sam.png|pam.jpeg) 
```

这使用[了负面的目光](http://www.regular-expressions.info/lookaround.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:39:30.187

我不完全确定你的问题的背景。

但是，您可以使用`find .`列表和目录下的文件（递归）。

使用`egrep`正则表达式过滤结果。

然后用于`egrep -v`以否定方式过滤（如果它不匹配停留）。

所以我想这样的事情可能会完成这项工作：

```
find . | egrep "*.(jpg|png)$" | egrep -v "*.(sam.png)" 
```

# python - python / numpy中的矩阵减法

> ID：13030396
> 
> 赞同：0
> 
> 时间：2012-10-23T12:26:52.173
> 
> 标签：python, matrix, numpy

我有一个卡尔曼滤波器的实现，我正在做矩阵运算。在某些时候，我应该减去两个 1x1 矩阵。我有一个错误，我不知道它来自哪里。在 python 中进行矩阵运算的最佳方法是什么？

```
import numpy as np
import pylab as pl
import scipy as Sci
import scipy.linalg as linalg

class GetPos(object):
    def __init__(self):
        self.Posp = 0
        self.Velp = 80
        self.z = np.matrix(0)
    def __repr__(self):
        return "from GetPos.__repr__ z=%s" % (self.z)
    def __call__(self):
        self.dt = 0.1
        self.w = 0 + 10*np.random.random()
        self.v = 0 + 10*np.random.random()            
        self.z = self.Posp + self.Velp*self.dt + self.v
        self.Posp = self.z - self.v
        self.Velp = 80 + self.w
        print 'from GetPos.__call__ z = %s' % self.z
        return self.z

class DvKalman(object):
    def __init__(self):
        self.dt = .1
        self.A = np.matrix([[1., self.dt],[0,1]])
        self.H = np.matrix([1., 0])
        self.Q = np.matrix([[1,0.],[0,3]])
        self.R = np.matrix(10)
        self.x = np.matrix([0,20]).T
        self.P = np.matrix(5*np.eye(2))
        #print 'P matrix \n%s' % self.P
        self.firstRun = 0
    def __call__(self, z):
        self.z = z
        print 'from DvKalman.__call__ slef.z = %s and z = %s' % (self.z,z)
        self.xp = self.A * self.x
        self.Pp = self.A*self.P*self.A.T  + self.Q
        self.K = self.Pp * self.H.T * linalg.inv(np.absolute(self.H*self.Pp*self.H.T + self.R));
        print 'from DvKalman.__call__  z=%s, \npreviouse x=\n%s \nH = \n%s \nand P=\n%s \nand xp=\n%s,\n Pp = \n%s,\n K=\n%s' % (self.z,self.x,self.H, self.P,self.xp,self.Pp,self.K)
        newM1 = self.H*self.xp    
        print 'This is self.H*self.xp %s and this is self.z = %s' % (newM1, self.z)
        newM2 = self.z - self.H*self.xp
        print 'This should give simple substruction %s' % newM2                 
        self.x = self.xp + self.K*(self.z - self.H*self.xp)
        self.P = self.Pp - self.K*self.H*self.Pp
        print 'new values x=%s and P=%s' % (self.x,self.P)
        return (self.x)
def TestDvKalman():
    Nsamples = np.arange(0,10,.1)

    kal = DvKalman()
    #print type(kal)
    Xsaved = []
    Zsaved = []

    for i in range(len(Nsamples)):
        z = GetPos()
        print z
        print 'from TestDvKalman zpos = %s' % z
        Zsaved.append(z)
        [position, velocity] = kal(z)
        print position, velocity
        Xsaved.append([position, velocity])
    print Zsaved
    print Xsaved
#    f1 = pl.subplot(121)
#    f1 = pl.plot(Xsaved, 'x-',label = 'Xsaved')
#    f1 = pl.legend()
#    
#    f2 = pl.subplot(122)
#    f2 = pl.title('Kalman Velocity')
#    f2 = pl.plot(Zsaved, 'o-', color = 'brown',label = 'Zsaved')
#    f2 = pl.legend()
#    
#    pl.show()

if __name__ == '__main__':  
    TestDvKalman() 
```

我添加了几`print`行代码来跟踪和调试代码，并添加`newM`了代码中不存在的新变量。矩阵打印正确`This is self.H*self.xp [[ 2.]] and this is self.z = from GetPos.__repr__ z=[[0]]`两个矩阵都是 1x1 但我仍然收到错误，不知道为什么。错误是：

```
 newM2 = self.z - self.H*self.xp
TypeError: unsupported operand type(s) for -: 'GetPos' and 'matrix' 
```

我怀疑我在某处弄乱了类型，但不知道在哪里以及如何更正它。你能指出错误在哪里以及如何构建这样的代码以避免将来出现类似的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:38:07.117

您正在将 GetPos 实例传递给 DvKalman`__call__`方法。所以你试图减去一个 GetPos 实例和一个矩阵。不是矩阵和矩阵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T12:40:36.927

中`TestDvKalman`，这条线

```
 z = GetPos() 
```

设置`z`为 的一个实例`GetPos`。`kal`您在此行中使用它作为参数：

```
 [position, velocity] = kal(z) 
```

所以给了`__call__`方法的`DvKalman`一个实例`GetPos`，你把它保存为`self.z`。这导致了这一行的错误：

```
 newM2 = self.z - self.H*self.xp 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T12:52:26.757

替换`newM2 = self.z - self.H*self.xp`为`newM2 = self.z() - self.H*self.xp`。

该程序应该可以使用（但我无法确认它是否确实需要你想要的）

# r - 数据输入错误

> ID：13030399
> 
> 赞同：1
> 
> 时间：2012-10-23T12:27:05.383
> 
> 标签：r

```
ID_REF           GSM133971          GSM133972               GSM133973
244901_at   5.95461158752441E+001   1.88836498260498E+001   1.98215045928955E+001
244902_at   7.25400314331055E+001   2.65250205993652E+001   1.95321922302246E+001
244903_at   2.23291015625000E+002   1.78133636474609E+002   5.38166885375977E+001
244904_at   3.65505447387695E+001   3.04016351699829E+000   6.80462265014648E+000
244905_at   4.07523269653320E+001   2.58869285583496E+001   1.18088026046753E+001
244906_at   1.50184860229492E+002   5.39840278625488E+001   4.14917945861816E+001
244907_at   2.65190029144287E+001   1.39808797836304E+000   2.08662915229797E+000
244908_at   3.50156021118164E+000   1.05003893375397E+000   4.57657009363174E-001
244909_at   1.02663551330566E+002   1.42618169784546E+001   1.61735534667969E+001
244910_s_at 7.20161895751953E+001   1.57578134536743E+001   1.31729679107666E+001
244911_at   3.26349411010742E+001   7.23858451843262E+000   6.47778940200806E+000 
```

以上是 MAS5.0 规范化数据，我需要读取 R 中的数据，但得到以下错误：

```
 mydat=read.csv("trans.csv",header=T)
 Error in make.names(col.names, unique = TRUE) :invalid multibyte string at '<ff><fe>I' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-29T15:38:59.643

尝试以下（根据[R：无效的多字节字符串](https://stackoverflow.com/questions/4993837/r-invalid-multibyte-string)）

```
tbl <- read.delim("dir/file.txt", fileEncoding="UCS-2LE") 
```

# python - 熊猫绘图功能忽略时间序列的时区

> ID：13030402
> 
> 赞同：9
> 
> 时间：2012-10-23T12:27:11.843
> 
> 标签：python, pandas

使用 pandas 的内置绘图功能绘制时间序列时，它似乎忽略了我的索引的时区：它始终使用 UTC 时间作为 x 轴。一个例子：

```
import numpy as np
import matplotlib.pyplot as plt
from pandas import rolling_mean, DataFrame, date_range

rng = date_range('1/1/2011', periods=200, freq='S', tz="UTC")
data = DataFrame(np.random.randn(len(rng), 3), index=rng, columns=['A', 'B', 'C'])
data_cet = data.tz_convert("CET")

# plot with data in UTC timezone
fig, ax = plt.subplots()
data[["A", "B"]].plot(ax=ax, grid=True)
plt.show()

# plot with data in CET timezone, but the x-axis remains the same as above
fig, ax = plt.subplots()
data_cet[["A", "B"]].plot(ax=ax, grid=True)
plt.show() 
```

情节没有改变，尽管索引有：

```
In [11]: data.index[0]
Out[11]: <Timestamp: 2011-01-01 00:00:00+0000 UTC, tz=UTC>
In [12]: data_cet.index[0]
Out[12]: <Timestamp: 2011-01-01 01:00:00+0100 CET, tz=CET> 
```

我应该提交一个错误，还是我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T15:58:16.873

这绝对是一个错误。我在[github](https://github.com/pydata/pandas/issues/2106)上创建了一份报告。原因是在内部，pandas 将常规频率 DatetimeIndex 转换为 PeriodIndex 以挂钩到 pandas 中的格式化程序/定位器，而目前 PeriodIndex 不保留时区信息。请继续关注修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-02T04:43:15.747

```
from pytz import timezone as ptz
import matplotlib as mpl
...
data.index = pd.to_datetime(data.index, utc=True).tz_localize(tz=ptz('<your timezone>'))
...
mpl.rcParams['timezone'] = data.index.tz.zone 
```

...之后 matplotlib 打印为该区域而不是 UTC。

然而！请注意，如果您需要注释，注释的 x 位置仍需要使用 UTC，*即使传递给 data.loc[] 或 data.at[] 的字符串将被假定在设置的时区中！*

例如，我需要显示一系列标有时间戳的垂直线：（这是在大多数情节调用之后，并注意 sels 中的时间戳字符串是 UTC）

```
sels = ['2019-03-21 3:56:28',
         '2019-03-21 4:00:30',
         '2019-03-21 4:05:55',
         '2019-03-21 4:13:40']
ax.vlines(sels,125,145,lw=1,color='grey') # 125 was bottom, 145 was top in data units
for s in sels:
    tstr = pd.to_datetime(s, utc=True)\
    .astimezone(tz=ptz(data.index.tz.zone))\
    .isoformat().split('T')[1].split('+')[0]
    ax.annotate(tstr,xy=(s,125),xycoords='data',
              xytext=(0,5), textcoords='offset points', rotation=90,
              horizontalalignment='right', verticalalignment='bottom') 
```

这会将灰色垂直线放在手动选择的时间`sels`，并以当地时区的小时、分钟和秒标记它们。（企业从字符串中`.split()[]`丢弃日期和时区信息）。`.isoformat()`

但是当我需要使用相同`s`的 in实际从数据中获取相应的值时`sels`，我不得不使用有点尴尬的：

```
data.tz_convert('UTC').at[s] 
```

而只是

```
data.at[s] 
```

失败，`KeyError`因为 pandas 解释`s`是在`data.index.tz`时区中，所以解释，时间戳超出了内容的范围`data`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-27T12:01:51.823

# 如何处理 UTC 到本地时间的转换

```
import time
import matplotlib.dates
…
tz = pytz.timezone(time.tzname[0])
…
ax.xaxis.set_major_locator(matplotlib.dates.HourLocator(interval=1, tz=tz))
ax.xaxis.set_major_formatter(matplotlib.dates.DateFormatter('%H', tz=tz)) 
```

# jquery - jquery 实时搜索

> ID：13030405
> 
> 赞同：0
> 
> 时间：2012-10-23T12:27:25.727
> 
> 标签：jquery

我想知道是否有人可以帮助我解决我遇到的 jquery 问题。下面的代码是我在另一篇文章中找到的一个片段，但我希望稍微调整一下

jQuery

```
$(document).ready(function() {
$('#criteria').on("input", function(e) {
    var words = $(this).val().toLowerCase().match(/\S+/g);
    if (!words) {
        $('.links li').show();
    } else {
        $('.links li').each(function() {
            var text = $(this).text().toLowerCase();
            var show = false;
            $.each(words, function(i, word) {
                show = show || Boolean(~text.indexOf(word));
            });
            $(this).toggle(show);

        });
    }
});

}); // end document ready 
```

和 HTML

```
<ul class="links">
<li><a href="#">link 1</a></li>
  <li><a href="#">link 2</a></li>
  <li><a href="#">link 3</a></li>
  <li><a href="#">link 4</a></li>
</ul> 
```

现在这就像它应该的那样工作，它在输入字段中查找匹配项，并通过隐藏没有匹配项的链接来相应地过滤结果。我想要做的而不是使用切换是向 li 元素添加一个类，其中没有匹配项以使它们使用 css 淡化。

我试过使用 $(show).addclass(); 而不是 $(this).toggle(show); 但它似乎没有做任何事情，我假设因为变量 show 没有被使用但是当我尝试对变量显示的一类效果时它什么也没做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:31:43.713

只需使用`.toggleClass()`add 创建一个带有 css 的类 display:none / opacity:0.0

[http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:57:14.743

我有一个小建议。为什么您使用大型编码来搜索特定`text`的`li`. 只是简单地你可以使用[contains](http://api.jquery.com/contains-selector/)来基于文本搜索元素。使用如下的[切换](http://api.jquery.com/toggleClass/)类。

您的要求可以通过以下编码来完成。

```
$('#criteria').on("input", function(e) {
     $('.links li:not(:has(a:contains("link 1")))').toggleClass("className");

}); 
```

[**演示**](http://jsfiddle.net/VwCTp/1/)

# c - 在 C 中，指针和数组之间的算术是如何工作的？

> ID：13030406
> 
> 赞同：5
> 
> 时间：2012-10-23T12:27:28.863
> 
> 标签：c, pointers

y 的值应该是多少，为什么？

```
int x[] = { 1, 4, 8, 5, 1, 4 }; 
int *ptr, y; 
ptr  = x + 4; 
y = ptr - x; 
```

我认为 y 应该是 4*sizeof(int)，但它给出了 4。为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T13:10:33.987

`I think y should be 4*sizeof(int)`

好主意，你猜怎么着？它**在**给予`4*sizeof(int)`，但你没有看对它。;)

当你玩指针时，你在看地址，所以让我们看看一些地址

```
int x[] = { 1, 4, 8, 5, 1, 4 };

//Just for fun, what is the address of each element in the array?
printf("%#x, %#x, %#x, %#x, %#x, %#x\n", x+0, x+1, x+2, x+3, x+4, x+5);

ptr = x + 4;

printf("%#x - %#x\n", ptr, x);  // Give us the address of ptr in hex
                                // and give us the address of x
y = ptr - x;                    

printf("%d\n", y); 
```

输出：

```
 x[0]         x[1]        x[2]        x[3]         x[4]       x[5]
0xbf871d20, 0xbf871d24, 0xbf871d28, 0xbf871d2c, 0xbf871d30, 0xbf871d34

   ptr           x
0xbf871d30 - 0xbf871d20

4 
```

所以 ptr 是`x+4`（实际上是`x + 4*sizeof(int)`或`x+16`在您的情况下）。我们将从那个`x`或基地址中减去，所以实际的数学是`0x30 - 0x20 = 0x10`或在 dec 中`16`。

您在输出中看到的原因`4`是因为编译器知道您正在执行操作，`int *`所以它会为您`16`除以`sizeof(int)`。不错嗯？

如果您想查看实际值，您需要执行以下操作：

```
int one, two;
...
one = (int)ptr;  //get the addresses, ignore the "type" of the pointer 
two = (int)x;
y = one - two; 
```

现在`y`会给你 0x10(hex) 或 16(dec)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-23T12:28:55.917

它应该是指向起始`x`地址和 x 的第 4 个元素的地址之间的 int 数 => 4。

从 c99 标准：

> **6.5.6 加法运算符**
> 
> 9/ 当两个指针相减时，都应指向同一个数组对象的元素，或者指向数组对象的最后一个元素；结果是两个数组元素的下标之差。

要了解更多信息，请尝试搜索**指针算术**。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-23T12:32:39.633

只需应用一些简单的代数

```
if
    ptr = x + 4
and
    y = ptr - x

therefore

y = (x + 4) - x

hence y = 4 + x - x

thus y = 4 + 0 

     y = 4 
```

编辑：解决评论

这是 C，一个 ptr 只是任何大小位的值。向其中添加一个数字（溢出的情况除外）只是某个整数+另一个整数（转换为适当的大小），因此删除原始数字会留下余数。由于我们只添加了 4（小于 int），这意味着将其隐式转换为 y int 没有问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T12:55:21.997

如果二进制“-”的操作数
都是相同类型的指针，则评估为

> (pq)/sizeof(p 或 q 的类型)

如果第二个操作数是整数
，则

> p - sizeof(p)*q

# jquery - 从 json 文件中获取数据的异常

> ID：13030409
> 
> 赞同：0
> 
> 时间：2012-10-23T12:27:44.700
> 
> 标签：jquery, json, jqxgrid

我正在使用以下代码：

```
 var source1 =
        {
            datatype: "json",
            datafields: [
                { name: 'x' },
                { name: 'y' }
            ],
            url: '..\sampledata\status.txt'
        };
        var dataAdapter = new $.jqx.dataAdapter(source1, { async: false, autoBind: true, loadError: function (xhr, status, error) { alert('Error loading "' + source1.url + '" : ' + error); } }); 
```

它抛出这个异常：

```
 [Exception... ""  nsresult: "0x805e0006 (<unknown>)"  location: "JS frame :: http://localhost:1397/scripts/jquery-1.8.2.js :: <TOP_LEVEL> :: line 8382"  data: no] 
```

对于 jquery-1.7.1.js 它显示相同的异常但在第 8068 行

我无法得到这个错误是与 jqx dataAdapter 相关还是来自 .js 文件。

我的 status.txt 包含 json 数据

```
 {
"StatusTable": [
    {
        "x": "quickydata",
        "y": "137"
    },
    {
        "x": "somestuff",
        "y": "1210"
    }
 ]
} 
```

寻找一些解决方案/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:01:32.043

它应该是：

```
 var source1 =
        {
            datatype: "json",
            datafields: [
                { name: 'x' },
                { name: 'y' }
            ],
            root: "StatusTable",
            url: '..\sampledata\status.txt'
        }; 
```

# c++ - 使用条件变量在 Linux 中实现 Windows 事件？

> ID：13030413
> 
> 赞同：10
> 
> 时间：2012-10-23T12:27:56.540
> 
> 标签：c++, linux, multithreading, synchronization, mutex

我正在尝试在 Linux 中实现非常简单的 Windows 事件。仅适用于我的场景 - 3 个线程，1 个主线程和 2 个辅助线程。每个辅助线程通过 SetEvent 引发 1 个事件，主线程等待它。例子：

```
int main()
{
    void* Events[2];
    Events[0] = CreateEvent();
    Events[1] = CreateEvent();

    pthread_start(Thread, Events[0]);
    pthread_start(Thread, Events[1]);

    WaitForMultipleObjects(2, Events, 30000) // 30 seconds timeout

    return 0;
}

int* thread(void* Event)
{
    // Do something
    SetEvent(Event);
    // Do something
} 
```

所以，为了实现它，我使用条件变量。但我的问题是 - 这是正确的方法吗？还是我做错了什么？我的实现：

```
// Actually, this function return pointer to struct with mutex and cond
// here i just simplified example
void* CreateEvent(mutex, condition)
{
    pthread_mutex_init(mutex, NULL);
    pthread_cond_init(condition, NULL);
}

bool SetEvent (mutex, condition)
{
    pthread_mutex_lock(mutex);
    pthread_cond_signal(condition);
    pthread_mutex_unlock(mutex);
}

int WaitForSingleObject(mutex, condition, timeout)
{
    pthread_mutex_lock(mutex);
    pthread_cond_timedwait(condition, mutex, timeout);
    pthread_mutex_unlock(mutex);
}

// Call WaitForSingleObject for each event. 
// Yes, i know, that its a wrong way, but it should work in my example.
int WaitForMultipleObjects(count, mutex[], condition[], timeout); 
```

一切看起来都很好，但我认为，当我在主线程中调用 WaitFor.. 函数时，会出现这个问题，然后调用辅助线程中的 SetEvent。在 Windows 中，它运行良好，但在 Linux 中 - 上面仅描述了想法。

也许你告诉我更好的解决方法？谢谢你。

**UPD：**超时非常重要，因为其中一个辅助线程可能不会通过 SetEvent()。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T13:27:29.960

基于此描述[`WaitForSingleObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)

> WaitForSingleObject*函数*检查指定对象的当前状态。如果对象的状态是无信号的，则调用线程进入等待状态，直到对象发出信号或超时间隔过去。

该行为与代码之间的区别在于代码将始终等待条件变量，因为它不检查谓词。这引入了`pthread_condt_timewait`and`pthread_cond_signal`调用之间的同步问题。

发出条件变量信号的一般习惯用法是：

```
锁定互斥锁
设置谓词
解锁互斥锁
信号条件变量

```

在等待条件变量时：

```
锁定互斥锁
而（！谓词）
{
  等待条件变量
}
解锁互斥锁
```

根据要完成的任务，`bool`可以使用单独的作为每个`Event`. 通过引入谓词，只应在未发出信号`WaitForSingleObject`时等待条件变量。`Event`代码将类似于以下内容：

```
bool SetEvent (mutex, condition)
{
    pthread_mutex_lock(mutex);                 // lock mutex
    bool& signalled = find_signal(condition);  // find predicate
    signalled = true;                          // set predicate
    pthread_mutex_unlock(mutex);               // unlock mutex
    pthread_cond_signal(condition);            // signal condition variable
}

int WaitForSingleObject(mutex, condition, timeout)
{
    pthread_mutex_lock(mutex);                         // lock mutex
    bool& signalled = find_signal(condition);          // find predicate
    while (!signalled)
    {
      pthread_cond_timedwait(condition, mutex, timeout);
    }
    signalled = false;                                 // reset predicate
    pthread_mutex_unlock(mutex);                       // unlock mutex
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T13:03:56.490

stackoverflow 上已经有类似的问题：[WaitForSingleObject and WaitForMultipleObjects equivalent in linux](https://stackoverflow.com/questions/2719580/waitforsingleobject-and-waitformultipleobjects-equivalent-in-linux)

此外，您可以使用信号量：

```
sem_t semOne  ;
sem_t semTwo  ;
sem_t semMain ; 
```

在主线程中：

```
sem_init(semOne,0,0) ;
sem_init(semTwo,0,0) ;
sem_init(semMain,0,0) ;

...

sem_wait(&semMain);

// Thread 1
sem_wait(&semOne);
sem_post(&semMain);

// Thread 2
sem_wait(&semTwo);
sem_post(&semMain); 
```

详细描述和各种示例可以在这里找到：------ [http://www.ibm.com/developerworks/linux/library/l-ipc2lin3/index.html](http://www.ibm.com/developerworks/linux/library/l-ipc2lin3/index.html)

以前的链接不再可用。The Internet Archive's Wayback Machine 的最新存档版本是： [https ://web.archive.org/web/20130515223326/http://www.ibm.com/developerworks/linux/library/l-ipc2lin3/index.html](https://web.archive.org/web/20130515223326/http://www.ibm.com/developerworks/linux/library/l-ipc2lin3/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-29T04:00:40.073

我认为信号量在这里是一个更好的解决方案，因为它可以在进程间使用。可以封装接口，如果没有提供name，则使用pthread_初始化，供进程内使用，这样可以缩短资源使用量，但是使用name时，尽量使用sem初始化，供进程内使用。

# c# - 使用c#在IE中打开一个页面

> ID：13030414
> 
> 赞同：5
> 
> 时间：2012-10-23T12:28:00.783
> 
> 标签：c#

我正在使用 c# 在 IE 中打开网页

**代码：**

`Process.Start("IExplore.exe", "www.northwindtraders.com");`

但是，如何使用以下特征调整页面大小：`toolbar=no, location=no, status=no, menubar=no, scrollbars=yes, resizable=yes, width='622', height='582'`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T12:39:51.470

对于我认为无法从命令行获得的那种细粒度控制；*添加对Microsoft Internet Controls*的引用 (COM)即可；

```
var IE = new SHDocVw.InternetExplorer();
object URL = "http://www.northwindtraders.com";

IE.ToolBar = 0;
IE.StatusBar = false;
IE.MenuBar = false;
IE.Width = 622;
IE.Height = 582;
IE.Visible = true;

IE.Navigate2(ref URL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:30:55.403

这些是从命令外壳打开 Internet Explorer 的功能：http:
[//msdn.microsoft.com/en-us/library/hh826025 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/hh826025%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T12:32:25.727

您需要使用[StartInfo](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx)属性来设置一些启动参数。

检查此[链接](http://msdn.microsoft.com/en-us/library/hh826025%28v=vs.85%29.aspx)以了解可用的选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-23T04:48:36.687

通过直接使用 COM 对象，您可以在不引用 SHDocVw 的情况下执行此操作：

```
const int FormWidth = 800;
const int FormHeight = 600;

// http://www.c-sharpcorner.com/forums/thread/51998/opening-a-browser-and-hiding-the-address-bar-help.aspx
// http://weblog.west-wind.com/posts/2005/Apr/29/Previewing-HTML-with-InternetExplorerApplication-in-C
// http://social.msdn.microsoft.com/Forums/vstudio/en-US/ab6969c7-0a34-4d88-9a74-b66888d3d88f/ie-automation-navigating-the-soup

// http://superuser.com/questions/459775/how-can-i-launch-a-browser-with-no-window-frame-or-tabs-address-bar
public void OpenBrowserWindow(string strURL)
{
    // System.Diagnostics.Process.Start(strURL)
    // For Internet Explorer you can use -k (kiosk mode):
    // iexplore.exe -k http://www.google.com/
    // Internet Explorer Command-Line Options 
    // http://msdn.microsoft.com/en-us/library/ie/hh826025(v=vs.85).aspx
    // Starts Internet Explorer in kiosk mode. The browser opens in a maximized window that does not display the address bar, 
    // the navigation buttons, or the status bar.

    System.Drawing.Rectangle rect = System.Windows.Forms.Screen.PrimaryScreen.Bounds;

    // http://stackoverflow.com/questions/5049122/capture-the-screen-shot-using-net
    int posX = rect.Width - FormWidth;
    int posY = rect.Height - FormHeight;
    posX = Convert.ToInt32 (posX / 2.0);
    posY = Convert.ToInt32 (posY / 2.0);

    posX = Math.Max (posX, 0);
    posY = Math.Max (posY, 0);

    System.Type oType = System.Type.GetTypeFromProgID ("InternetExplorer.Application");

    object o = System.Activator.CreateInstance (oType);
    o.GetType ().InvokeMember ("MenuBar", System.Reflection.BindingFlags.SetProperty, null, o, new object[] { 0 });
    o.GetType ().InvokeMember ("ToolBar", System.Reflection.BindingFlags.SetProperty, null, o, new object[] { 0 });
    o.GetType ().InvokeMember ("StatusBar", System.Reflection.BindingFlags.SetProperty, null, o, new object[] { 0 });
    o.GetType ().InvokeMember ("AddressBar", System.Reflection.BindingFlags.SetProperty, null, o, new object[] { 0 });
    o.GetType ().InvokeMember ("Visible", System.Reflection.BindingFlags.SetProperty, null, o, new object[] { true });

    o.GetType ().InvokeMember ("Top", System.Reflection.BindingFlags.SetProperty, null, o, new object[] { posY });
    o.GetType ().InvokeMember ("Left", System.Reflection.BindingFlags.SetProperty, null, o, new object[] { posX });
    o.GetType ().InvokeMember ("Width", System.Reflection.BindingFlags.SetProperty, null, o, new object[] { FormWidth });
    o.GetType ().InvokeMember ("Height", System.Reflection.BindingFlags.SetProperty, null, o, new object[] { FormHeight });

    o.GetType ().InvokeMember ("Navigate", System.Reflection.BindingFlags.InvokeMethod, null, o, new object[] { strURL });

    try 
    {
        object ohwnd = o.GetType ().InvokeMember ("hwnd", System.Reflection.BindingFlags.GetProperty, null, o, null);
        System.IntPtr IEHwnd = (System.IntPtr)ohwnd;
        // NativeMethods.SetForegroundWindow (IEHwnd);
        NativeMethods.ShowWindow(IEHwnd, NativeMethods.WindowShowStyle.ShowMaximized);
    } catch (Exception ex) {
    }

} // OpenBrowserWindow

public class NativeMethods
{
    [System.Runtime.InteropServices.DllImport("user32.dll")]
    [return: System.Runtime.InteropServices.MarshalAs(
        System.Runtime.InteropServices.UnmanagedType.Bool)]
    public static extern bool SetForegroundWindow(IntPtr hWnd);

    [System.Runtime.InteropServices.DllImport ("user32.dll")]
    [return: System.Runtime.InteropServices.MarshalAs(
        System.Runtime.InteropServices.UnmanagedType.Bool)]
    public static extern bool ShowWindow(IntPtr hwnd, WindowShowStyle nCmdShow);

    /// <summary>Enumeration of the different ways of showing a window using
    /// ShowWindow</summary>
    public enum WindowShowStyle : int
    {
        /// <summary>Hides the window and activates another window.</summary>
        /// <remarks>See SW_HIDE</remarks>
        Hide = 0,
        /// <summary>Activates and displays a window. If the window is minimized
        /// or maximized, the system restores it to its original size and
        /// position. An application should specify this flag when displaying
        /// the window for the first time.</summary>
        /// <remarks>See SW_SHOWNORMAL</remarks>
        ShowNormal = 1,
        /// <summary>Activates the window and displays it as a minimized window.</summary>
        /// <remarks>See SW_SHOWMINIMIZED</remarks>
        ShowMinimized = 2,
        /// <summary>Activates the window and displays it as a maximized window.</summary>
        /// <remarks>See SW_SHOWMAXIMIZED</remarks>
        ShowMaximized = 3,
        /// <summary>Maximizes the specified window.</summary>
        /// <remarks>See SW_MAXIMIZE</remarks>
        Maximize = 3,
        /// <summary>Displays a window in its most recent size and position.
        /// This value is similar to "ShowNormal", except the window is not
        /// actived.</summary>
        /// <remarks>See SW_SHOWNOACTIVATE</remarks>
        ShowNormalNoActivate = 4,
        /// <summary>Activates the window and displays it in its current size
        /// and position.</summary>
        /// <remarks>See SW_SHOW</remarks>
        Show = 5,
        /// <summary>Minimizes the specified window and activates the next
        /// top-level window in the Z order.</summary>
        /// <remarks>See SW_MINIMIZE</remarks>
        Minimize = 6,
        /// <summary>Displays the window as a minimized window. This value is
        /// similar to "ShowMinimized", except the window is not activated.</summary>
        /// <remarks>See SW_SHOWMINNOACTIVE</remarks>
        ShowMinNoActivate = 7,
        /// <summary>Displays the window in its current size and position. This
        /// value is similar to "Show", except the window is not activated.</summary>
        /// <remarks>See SW_SHOWNA</remarks>
        ShowNoActivate = 8,
        /// <summary>Activates and displays the window. If the window is
        /// minimized or maximized, the system restores it to its original size
        /// and position. An application should specify this flag when restoring
        /// a minimized window.</summary>
        /// <remarks>See SW_RESTORE</remarks>
        Restore = 9,
        /// <summary>Sets the show state based on the SW_ value specified in the
        /// STARTUPINFO structure passed to the CreateProcess function by the
        /// program that started the application.</summary>
        /// <remarks>See SW_SHOWDEFAULT</remarks>
        ShowDefault = 10,
        /// <summary>Windows 2000/XP: Minimizes a window, even if the thread
        /// that owns the window is hung. This flag should only be used when
        /// minimizing windows from a different thread.</summary>
        /// <remarks>See SW_FORCEMINIMIZE</remarks>
        ForceMinimized = 11
    }

} 
```

您还可以使用 VirtualScreen

```
System.Windows.Forms.SystemInformation.VirtualScreen.Width;
System.Windows.Forms.SystemInformation.VirtualScreen.Height; 
```

而不是 PrimaryScreen

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T13:01:57.337

另一种方法是使用从 PInvoke.net 抛出的窗口消息

```
void Main()
{
 Process p = Process.Start( 
    @"C:\Program Files (x86)\Internet Explorer\iexplore.exe" , "www.google.com" );

 while(p.MainWindowHandle == IntPtr.Zero )
 {
  Thread.Sleep(100);
  p.Refresh();
 }

 SetWindowPos( p.MainWindowHandle , IntPtr.Zero , 100 , 100, 800 ,400 , SetWindowPosFlags.ShowWindow ); 

}

// Define other methods and classes here
[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool SetWindowPos(IntPtr hWnd, IntPtr hWndInsertAfter, int X, int Y, int cx, int cy, SetWindowPosFlags uFlags);

static readonly IntPtr HWND_TOPMOST = new IntPtr(-1);
static readonly IntPtr HWND_NOTOPMOST = new IntPtr(-2);
static readonly IntPtr HWND_TOP = new IntPtr(0);
static readonly IntPtr HWND_BOTTOM = new IntPtr(1);

/// <summary>
/// Window handles (HWND) used for hWndInsertAfter
/// </summary>
public static class HWND
{
   public static IntPtr
   NoTopMost = new IntPtr(-2),
   TopMost = new IntPtr(-1),
   Top = new IntPtr(0),
   Bottom = new IntPtr(1);
}

/// <summary>
/// SetWindowPos Flags
/// </summary>
public static class SWP
{
   public static readonly int
   NOSIZE = 0x0001,
   NOMOVE = 0x0002,
   NOZORDER = 0x0004,
   NOREDRAW = 0x0008,
   NOACTIVATE = 0x0010,
   DRAWFRAME = 0x0020,
   FRAMECHANGED = 0x0020,
   SHOWWINDOW = 0x0040,
   HIDEWINDOW = 0x0080,
   NOCOPYBITS = 0x0100,
   NOOWNERZORDER = 0x0200,
   NOREPOSITION = 0x0200,
   NOSENDCHANGING = 0x0400,
   DEFERERASE = 0x2000,
   ASYNCWINDOWPOS = 0x4000;
}

[Flags()]
private enum SetWindowPosFlags : uint
{
    /// <summary>If the calling thread and the thread that owns the window are attached to different input queues, 
    /// the system posts the request to the thread that owns the window. This prevents the calling thread from 
    /// blocking its execution while other threads process the request.</summary>
    /// <remarks>SWP_ASYNCWINDOWPOS</remarks>
    AsynchronousWindowPosition = 0x4000,
    /// <summary>Prevents generation of the WM_SYNCPAINT message.</summary>
    /// <remarks>SWP_DEFERERASE</remarks>
    DeferErase = 0x2000,
    /// <summary>Draws a frame (defined in the window's class description) around the window.</summary>
    /// <remarks>SWP_DRAWFRAME</remarks>
    DrawFrame = 0x0020,
    /// <summary>Applies new frame styles set using the SetWindowLong function. Sends a WM_NCCALCSIZE message to 
    /// the window, even if the window's size is not being changed. If this flag is not specified, WM_NCCALCSIZE 
    /// is sent only when the window's size is being changed.</summary>
    /// <remarks>SWP_FRAMECHANGED</remarks>
    FrameChanged = 0x0020,
    /// <summary>Hides the window.</summary>
    /// <remarks>SWP_HIDEWINDOW</remarks>
    HideWindow = 0x0080,
    /// <summary>Does not activate the window. If this flag is not set, the window is activated and moved to the 
    /// top of either the topmost or non-topmost group (depending on the setting of the hWndInsertAfter 
    /// parameter).</summary>
    /// <remarks>SWP_NOACTIVATE</remarks>
    DoNotActivate = 0x0010,
    /// <summary>Discards the entire contents of the client area. If this flag is not specified, the valid 
    /// contents of the client area are saved and copied back into the client area after the window is sized or 
    /// repositioned.</summary>
    /// <remarks>SWP_NOCOPYBITS</remarks>
    DoNotCopyBits = 0x0100,
    /// <summary>Retains the current position (ignores X and Y parameters).</summary>
    /// <remarks>SWP_NOMOVE</remarks>
    IgnoreMove = 0x0002,
    /// <summary>Does not change the owner window's position in the Z order.</summary>
    /// <remarks>SWP_NOOWNERZORDER</remarks>
    DoNotChangeOwnerZOrder = 0x0200,
    /// <summary>Does not redraw changes. If this flag is set, no repainting of any kind occurs. This applies to 
    /// the client area, the nonclient area (including the title bar and scroll bars), and any part of the parent 
    /// window uncovered as a result of the window being moved. When this flag is set, the application must 
    /// explicitly invalidate or redraw any parts of the window and parent window that need redrawing.</summary>
    /// <remarks>SWP_NOREDRAW</remarks>
    DoNotRedraw = 0x0008,
    /// <summary>Same as the SWP_NOOWNERZORDER flag.</summary>
    /// <remarks>SWP_NOREPOSITION</remarks>
    DoNotReposition = 0x0200,
    /// <summary>Prevents the window from receiving the WM_WINDOWPOSCHANGING message.</summary>
    /// <remarks>SWP_NOSENDCHANGING</remarks>
    DoNotSendChangingEvent = 0x0400,
    /// <summary>Retains the current size (ignores the cx and cy parameters).</summary>
    /// <remarks>SWP_NOSIZE</remarks>
    IgnoreResize = 0x0001,
    /// <summary>Retains the current Z order (ignores the hWndInsertAfter parameter).</summary>
    /// <remarks>SWP_NOZORDER</remarks>
    IgnoreZOrder = 0x0004,
    /// <summary>Displays the window.</summary>
    /// <remarks>SWP_SHOWWINDOW</remarks>
    ShowWindow = 0x0040,
} 
```

# asp.net-mvc-3 - 如何在 Visual Studio 2012 中使用 Entity Framework 4.1？

> ID：13030416
> 
> 赞同：7
> 
> 时间：2012-10-23T12:28:01.283
> 
> 标签：asp.net-mvc-3, entity-framework-4.1, visual-studio-2012

我在网络场上有一个网络应用程序，我使用 .NET 4 和实体数据模型 4.1。

当我开始开发这个 Web 应用程序时，我使用了 Visual Studio 2010，今天我已经卸载它并安装了新版本（Visual Studio 2012）。

由于某些原因，我删除了我的 ado.net 实体数据模型以重新创建它，但我
注意 Visual Studio 2012 使用的`entity framework 5`不是 4.1。我已经更新了它，但是在旧模型中我可以使用上下文构造函数来更改我的连接字符串，但是在这个新模型中没有构造函数，这是真的吗？

我已经安装`EF 4.1`但它不起作用，并且我已将版本 5 添加到我的项目中。背景信息：我的 Web 应用程序位于共享主机上，我无法将其更新到 EF 5。

我如何在 Visual Studio 2012 中使用实体框架 4.1？那可能吗？如果是，如何？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T13:55:29.557

## 删除现有（实体框架 5）

1.  删除解决方案资源管理器中项目的“参考”部分下的现有参考（对实体框架 5）。

2.  ***从您的packages.config***文件中删除相应的条目。如果您打开 packages.config 文件，您将看到一个 xml 结构，并且您将看到一个 id属性值为`EntityFramework`的元素。删除该行（该包元素）。`version``5.0.0`

## 再次添加（实体框架 4.1）

现在转到包管理器窗口（**查看->其他窗口->包管理器控制台**）并在那里执行以下命令。

```
Install-Package EntityFramework -Version 4.1.10331.0 
```

这会将 EF 4.1 下载到您的项目中，您将看到如下所示的成功消息。

![在此处输入图像描述](../Images/b9e4f8d3c5c3d8f035efab8a53649b09.png)

参考： http: [//nuget.org/packages/EntityFramework/4.1.10331.0](http://nuget.org/packages/EntityFramework/4.1.10331.0)

请始终牢记，EF 5 中进行了很多改进。因此请考虑尽可能使用所有这些改进。

# iis-7.5 - 带有 IIS 7.5 的 ServiceStack

> ID：13030418
> 
> 赞同：9
> 
> 时间：2012-10-23T12:28:17.210
> 
> 标签：iis-7.5, asp.net-4.0, servicestack

我使用 IIS 7.5 安装了 Clean Windows Web Server 2008 R2 64 位。我在这个池中创建了 .NET v4.0 应用程序池和网站，并在其中使用 ServiceStack 服务部署了我的应用程序。当我打开 servicestack 页面时，我在 Web 浏览器中收到此错误消息：

```
HTTP Error 500.21 - Internal Server Error
Handler "ServiceStack.Factory" has a bad module "ManagedPipelineHandler" in its module list. 
```

我的应用程序在 Visual Studio 托管的 IIS 服务器中运行。IIS 7.5 安装和 servicestack 可能有问题，还是一些 asp.net 问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-23T13:52:49.120

1) 确保以下内容在 web.config 中

```
<!-- Required for IIS 7.0 -->
<system.webServer>
  <handlers>
    <add path="*" 
         name="ServiceStack.Factory"
         type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" 
         verb="*" preCondition="integratedMode"
         resourceType="Unspecified" allowPathInfo="true" />
  </handlers>
</system.webServer> 
```

[从http://www.servicestack.net/ServiceStack.Hello/](http://www.servicestack.net/ServiceStack.Hello/)复制

2）如果仍然无法正常工作，请尝试运行此命令

```
%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -i 
```

请参阅 vaclamar 发现的评论中的文章。

# php - 使用 Composer 持续集成

> ID：13030424
> 
> 赞同：14
> 
> 时间：2012-10-23T12:28:42.420
> 
> 标签：php, jenkins, composer-php

我有一个 PHP 项目，我在其中通过 Composer 加载包。我还在专用的 CI 服务器上使用 Jenkins 运行持续集成。每小时一次，Jenkins 会查询我的存储库是否有更改，如果存在，则执行测试运行。

测试运行的第一步是重新检查存储库，并使用 Phing 执行应用程序的构建。构建的步骤之一是执行

```
composer install 
```

由于 Jenkins 总是使用新的结帐，因此 composer 总是会在每次测试运行时获取所有包，即使自上次运行以来没有任何包被更改。这有几个缺点：

*   完成一次测试运行需要相对较长的时间（composer 需要获取例如 Zend Framework，它相当大
*   如果每小时获取新包，它会给包服务器带来不必要的压力
*   如果由于某种原因，作曲家安装失败，我的测试也会运行。

我正在考虑可能将 Composer 获取的包存储在 CI 服务器的中心位置，以便 Jenkins 能够在每次测试运行时访问该位置的包。当然，现在我必须重写部分应用程序来处理供应商文件夹在 CI 服务器上位于不同位置的事实。其次，我必须告诉 Jenkins 跟踪 composer.lock 文件的变化，看看他是否需要运行 composer。恐怕这两件事都不是微不足道的。

是否有人对其他/更好的方法有任何建议，或者在每次测试运行时通过 composer 获取所有包的最佳选择。诚然，这是确保您始终使用正确包的最佳方式，但感觉有点浪费带宽，当然在开发的后期阶段，包列表几乎不会再改变了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T10:41:06.637

一种加快速度的方法是使用`composer install --prefer-dist`即使是开发包也只下载 zip。这对于独特的构建是首选，因为它跳过了项目的整个历史。

至于备用 packagegist，不要太担心，与每次提交时构建在 travis 上的所有开源库相比，每小时构建一次并不会产生巨大差异。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T22:19:27.397

您可以做的一件事是将供应商存储在詹金斯项目工作区之外的位置，以便它保留在构建之间。您不一定需要更改您的应用程序。只需更新构建脚本，以便它创建到供应商位置的符号链接。

我使用 capifony 进行部署，[它使用这种方法](https://github.com/everzet/capifony/blob/master/lib/symfony2/symfony.rb#L60)来保持供应商之间的发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-01T15:30:41.120

需要注意的一件事是 Composer 会缓存它下载的包。因此，一旦第一次下载它们，即使 Packagist 已关闭（不是 100% 肯定），它们也应该可以工作，并且可以节省网络带宽（100% 肯定）。

第二件事是：你为什么要通过重新检出存储库来运行测试？完全可以在 Jenkins 的工作区中保留代码副本，并确保在每次测试运行时擦除缓存、日志和其他工件。这不仅会加快 composer install 的速度，还会加快 git pull 的速度，尤其是对于大型 repos！

旁注：对于我们自己的 Jenkins 平台，在测试之间没有清理工作空间，我们发现 composer 的主要缺点是在每个工作空间中拥有完整的供应商目录会占用大量磁盘空间。我试图通过使用符号链接和共享供应商（基于composer.lock的哈希命名）来解决这个问题，但是composer autoloader在寻找从哪里加载类时遇到了一些问题......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-01T07:58:26.450

在 Jenkins mkdir /path/to/your/project 上安装 zf2 项目的步骤 1\. 安装 composer

```
curl -sS https://getcomposer.org/installer | php
mv composer.phar /usr/local/bin/composer 
```

注意：如果上述由于权限而失败，请使用 sudo 再次运行 mv 行。一个快速复制粘贴版本，包括 sudo：

```
curl -sS https://getcomposer.org/installer | sudo php -- --install-dir=/usr/local/bin --filename=composer 
```

2.  在项目的根目录下创建一个 composer.json 文件添加你需要的所有 pacakages

    {“名称”：“amarjitsingh”，“描述”：“amarjitsingh”，“许可证”：“BSD-3-Clause”，“关键字”：[“框架”，“zf2”]，“主页”：“ [http： //domain.com/](http://domain.com/) ", "require": { "php": ">=5.5", "zendframework/zendframework": "~2.5", "phpoffice/phpword": "dev-master", "doctrine/doctrine -orm-module”：“0.7.0”，“imagine/Imagine”：“0.5.*”，“zf-commons/zfc-user”：“dev-master”}，“autoload”：{“psr.0 “ ： “/模块” }

    }

3.  运行 ' `composer install`' 来安装这些软件包。

4.  如果您使用的是 ubuntu，请在您的机器上设置 git，您可以使用以下命令设置 GIT

    sudo apt-get 更新 sudo apt-get install git

设置 Git

```
git config --global user.name "Your Name"
git config --global user.email "youremail@domain.com" 
```

检查配置列表

```
git config --list 
```

一旦你设置了 GIT 然后 c

```
cd /path/to/your/project 
```

. 一旦你安装了包，在文件中创建一个“ `.gitignore`”文件并在其中 `root`添加`'vendor'`。

```
git init
git remote add origin https://username@bitbucket.org/username/zf2ci.git 
```

将以下命令应用于添加、提交和推送文件

```
git add .
git commit -m 'Initial commit with contributors'
git push -u origin master
git pull 
```

使用云，您可以使用 AWS 。我正在使用数字海洋

1 创建一个`droplet` 2.根据需要命名它，在我的情况下它是 zf2ci 3.选择一个包 4.选择操作系统 my cas eis Ubuntu 14.04 5.在应用程序选项卡中选择 LAMP 6 完成后，您将获得 IP 地址，用户名root和密码。7\. 使用 putty 登录 ip 8\. 用户`root` 9\. 密码`pass` 10\. 一旦你进入它，它会提示你更改密码 11\. goto web root eg `/var/www/html` 12\. install GIT 13\. `apt-get install git` 14\. clone the repo 15\. `git clone https://username@bitbucket.org/username/zf2ci.git` 16.在本机上安装composer

```
curl -sS https://getcomposer.org/installer | php
mv composer.phar /usr/local/bin/composer 
```

注意：如果上述由于权限而失败，请使用 sudo 再次运行 mv 行。一个快速复制粘贴版本，包括 sudo：

```
curl -sS https://getcomposer.org/installer | sudo php -- --install-dir=/usr/local/bin --filename=composer 
```

17.  转到应用程序路径`/var/ww/html/zf2ci`
18.  运行' `composer install --no-dev`'我们正在安装它而没有开发选项，因为我们只在应用服务器上安装经过良好测试的代码

第三步

创建 Jenkins 服务器 1\. 为 Jenkins 设置另一个 Droplet 2\. image ubuntu 3.install Lamp install Jenkns

安装 Jenkins 在安装 Jenkins 之前，我们必须将密钥和源列表添加到 apt。这分两步完成，首先我们将添加密钥。

1.1

```
wget -q -O - http://pkg.jenkins-ci.org/debian/jenkins-ci.org.key | apt-key add - 
```

其次，我们将为 Jenkins 创建一个源列表。

1.2

```
echo deb http://pkg.jenkins-ci.org/debian binary/ > /etc/apt/sources.list.d/jenkins.list 
```

1.3 现在，我们只需要在安装 Jenkins 之前更新 apt 的缓存。

```
apt-get update 
```

1.4 由于缓存已经更新，我们可以继续安装 Jenkins。请注意，Jenkins 有很多依赖项，因此可能需要一些时间来安装它们。

```
apt-get install jenkins 
```

1.5 打开8080端口的ip 例如`http://127.0.0.1:8080`

1.6 在jenkins服务器上安装git

```
sudo apt-get update
sudo apt-get install git 
```

1.7 安装作曲家

```
curl -sS https://getcomposer.org/installer | php
mv composer.phar /usr/local/bin/composer 
```

1.8 启用用户认证

`enable bitbucket plugin`Jenkins 1.9.1 的 1.9 `Manage Jenkins->Manage Plugins->Bitbucket Plugin->download`并安装 1.9.2 创建作业创建作业-> 项目名称（例如 zf2ci）-> 源代码管理（git）提供 ssh url( `git@bitbucket.org:username/zf2ci.git`)-> 构建的分支（*/master）这是每次任何用户提交并将代码与主分支合并时的分支 - Jenkins 被调用

1.9.3 Build Triggers 选择选项（在推送 chnage 时构建），当我们在 bit bucket 上创建一个 POST 钩子时，这将 wok

1.9.4 构建->执行shell

```
 composer install
 ./vendor/bin/phpunit ./tests 
```

我们的测试位于 intests 目录

1.9.5 设置一个`ssh key pair`

通过putty登录jenkins Serevr

```
su jenkins
    cd
    ls -la( check what is in the jenkins home directory)
    ssh-kegen -t rsa (dsa by default but choose rsa key ,it is faster)
    press enter(on path)
    press enter(leave the pass phrase empty , the whole point here is to avoid passwords in the automated jobs)
    pres enter

 cd .ssh 
```

`ls -la`（你会发现 `id_rsa.pub`）文件在那里

```
cat id_rsa.pub 
```

（全选并复制文件内容）

1.9.6 goto bitbucket 切换到repo zf2ci goto settings 点击deployment keys->add key add label (jenkins) key*(粘贴id_rsa.pub的内容)file here save key

```
summary
`zf2ci->settings->deployment keys->add key->type` label and paste id_rsa.pub key->save 
```

1.9.7 为 repo 注册 POST hook

```
Settings->
Integrations->
Hooks->
POST(search for POST Hook)->
Add the url /IP of the Jenkins Server) (`172.62.235.100:8080/bitbucket-hook/`)
(the body of the post contanis information about the repository, branch, list of recent commits, user) 
```

1.9.8 登录Jenkins服务器

```
su jenkinks
    cd
    cd .ssh
    git ls-remote -h ssh://git@bitbucket.org:username/zf2ci.git HEAD 
```

Jenkins 1.9.10 上的1.9.9 `save`项目在 Execute Shell->command [ `rsync -y -vrzhe "ssh -o StrictMostKeyChecking=no" --exclude vendor/ . root@ipaddress:/var/www/html/zf2ci`（应用服务器的）]中添加以下命令

```
ssh root@ipaddress<<EOF
    cd /var/www/html/zf2ci
    composer install --no-dev
    EOF 
```

# c# - 使用 ResourceManager，为什么我在 GetResourceSet(...) 之前调用 GetStream(...) 时它会起作用

> ID：13030425
> 
> 赞同：0
> 
> 时间：2012-10-23T12:28:50.253
> 
> 标签：c#

我对 C# ResourceManager 有一个奇怪的问题。以下类型的失败：

```
var rm = new ResourceManager(typeof(myStrings));
var resources = rm.GetResourceSet(culture, false, false); 
```

现在“资源”为空。但以下工作：

```
rm.GetStream(""); 
var resources = rm.GetResourceSet(culture, false, false); 
```

为什么它只在我先调用 .GetStream("") 时才起作用？

# ios - 如果应用程序未运行，则安排下一个 UILocalNotification

> ID：13030435
> 
> 赞同：-1
> 
> 时间：2012-10-23T12:29:21.330
> 
> 标签：ios, uilocalnotification

我正在为一家垃圾公司开发一个应用程序。想法如下：有一个 2012/2013 年的日历，其中包含何时以及哪些垃圾桶（棕色、格力和黑色）将被拾起。我需要制作一种通知系统，它将在特定日期（从该数组）发送一个通知，其中包含一些关于本周将拾取什么容器的文本。

一次发布所有通知并不明智，因为有超过 100 条通知（我听说 iOS 中的限制是 64 条）。

我想在当前通知触发后安排下一个通知。当用户在通知处触摸操作按钮并转到应用程序时，这可以在handleNotification 方法中完成。但是，如果用户从通知窗口获得了足够的信息并且从不接触该通知，从不进入应用程序并且大部分都处于“非运行”状态怎么办？

那么如何安排下一次通知呢？也许一些聪明的头脑可以用其他方法让它在不使用 UILocalNotification 的情况下工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:00:36.087

不可能。

如果用户从不打开您的应用程序，您最多将有 64 个预定通知。当所有这些都被触发后，将不再有通知。

虽然您可以让您的通知重复。因此，如果棕色垃圾桶每周都会被捡起，您可以将重复间隔设置为每周而不是安排 52 次（从而节省 51 个通知）。

# python - 将父类的自我更改为子类

> ID：13030437
> 
> 赞同：1
> 
> 时间：2012-10-23T12:29:22.797
> 
> 标签：python, class, self

我有一个结构，

```
class Foo(object):
    def __init__(self, value=True):
        if value:
            Bar()
        else:
            Zoo()
    pass

class Bar(Foo):
    pass

class Zoo(Foo):
    pass

z = Foo(True)  # instance of Foo() class 
```

当我实例化类`Foo()`时，它将返回`Foo`类的实例，但我希望它应该返回`Bar`或`Zoo`类的实例（即根据提供给 Foo 类的值调用的任何类）

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T12:31:59.020

只需使用一个功能：

```
def foo(value=True):
    if value:
        return Bar()
    else:
        return Zoo() 
```

不需要类，因为您只想从*其他*两个类创建实例。因此，您可以只使用一个函数在两者之间进行选择。

这通常被称为工厂。

* * *

如果您希望能够为初始化程序提供自定义参数，您可以使用：

```
def foo(value=True):
    if value:
        return Bar
    else:
        return Zoo 
```

并这样称呼它：

```
z = foo(True)(params for Bar/Zoo) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T12:36:03.000

这正是`__new__()`：

```
class Foo(object):
    def __new__(cls, value=True):
        if cls != Foo:
            return super(Foo, cls).__new__(cls)
        elif value:
            return super(Foo, cls).__new__(Bar)
        else:
            return super(Foo, cls).__new__(Zoo)

class Bar(Foo):
    pass

class Zoo(Foo):
    pass

z = Foo(True)  # instance of Bar() class 
```

# asp.net - 停止扩展子文件夹目录

> ID：13030439
> 
> 赞同：0
> 
> 时间：2012-10-23T12:29:34.260
> 
> 标签：asp.net, master-pages

我的 .master 页面上有一个菜单，但我的页面位于子文件夹中。所以每次加载页面时，它都会将子文件夹目录添加到路径中。像这样：

第一次加载：Pages/Login/create.aspx 第二次加载：Pages/Login/Pages/Login/create.aspx 第三次加载：Pages/Login/Pages/Login/Pages/Login/create.aspx 以此类推。

我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:58:06.637

我猜您在菜单中的网址类似于“Pages/Login/create.aspx”，但应该是“/Pages/Login/create.aspx”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:59:14.320

使用应用程序相对路径，例如`~/Pages/Login/create.aspx`.

# php - PHP类在调用时不返回数组

> ID：13030440
> 
> 赞同：0
> 
> 时间：2012-10-23T12:29:34.853
> 
> 标签：php, arrays, class, function

我有一个 PHP 类，它应该将一个数组返回到实例化对象的位置。我试图找出问题所在，但我似乎看不到它。谁能看到我在这里出错的地方或指出我正确的方向？谢谢

这是类（在名为“feeds.php”的文件中。）

```
class updateFeed {
public function index() {
        $db = JFactory::getDBO();
        $query = "SELECT * FROM tweets";
        $db->setQuery($query);
        $result = $db->loadObject()
        if(strtotime($result->date_added) <= time() - 3200) {
            $this->updateTweets();
        }

        $query = "SELECT * FROM tweets ORDER BY tweet_date DESC LIMIT 0, 3";
        $db->setQuery($query);
        $results = $db->loadObjectList();

        $tweet_db = array();
        foreach($results as $result) {
            $tweet_db[] = array(
                'title'   =>   $result->title,
                'text'    =>   $result->text,
                'tweet_date'   =>   $result->tweet_date
            );
        }   
        return $tweet_db;

    } 
```

这里是对象被实例化的地方（在 index.php 文件中）：

```
include('feeds.php');
$tweet_dbs = new updateFeed;
print_r($tweet_dbs); 
```

索引文件中的 print_r 显示“updateFeed Object ( ) ”。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:30:38.983

您使用错误的课程。您不调用 index() 方法。试试这个：

```
include('feeds.php');

// Create class instance
$instance = new updateFeed;

// Call your class instance's method
$tweet_dbs = $instance->index();

// Check result and have fun
print_r($tweet_dbs); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:32:05.027

```
include('feeds.php');
$tweet_dbs = new updateFeed;
$tweets = $tweet_dbs->index();
print_r($tweets); 
```

您错过了调用 index() 函数..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:32:07.350

您需要使用类的对象调用该方法。

代替

```
print_r($tweet_dbs) 
```

和

```
print_r($tweet_dbs->index()) 
```

# java - 如何在免费标记模板中设置请求属性

> ID：13030441
> 
> 赞同：0
> 
> 时间：2012-10-23T12:29:44.433
> 
> 标签：java, javascript, freemarker

我正在使用 SPRING MVC 的 java 中开发 Spring Batch Web 应用程序。它使用免费的标记模板。我需要在 FTL 页面上编写的 javascript 中的请求属性中设置用户 ID。我正在使用下面的 javascript 来检索用户名。我想在请求属性中设置（WinNetwork.UserName）它并想在我的 servlet 上检索此属性。

```
<script type="text/javascript"> 
     var WinNetwork = new  ActiveXObject("WScript.Network");
     alert(WinNetwork.UserName); 
</script> 
```

请为此提供帮助。

# php - fckeditor 发生

> ID：13030442
> 
> 赞同：-1
> 
> 时间：2012-10-23T12:29:47.250
> 
> 标签：php, html, fckeditor

打开 fckeditor 的 default.html 文件时出现错误。

错误是这个

> 请打开 about:config 页面并禁用“security.fileuri.strict_origin_policy”选项；然后再次加载此页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:33:10.273

您应该将“about:config”放在浏览器上（放置 URL 的位置），然后将 security.fileuri.strict_origin_policy（来自变量列表）的值更改为禁用。

# .net - 在 WCF 应用程序中使用 MSMQ 消息时保留消息顺序

> ID：13030443
> 
> 赞同：4
> 
> 时间：2012-10-23T12:29:47.600
> 
> 标签：.net, wcf, msmq

我有一个使用来自 MSMQ 队列的消息的应用程序。该应用程序使用 MSMQ 激活使用 AppFabric 在 IIS 中托管的 WCF 服务。

保留消息的顺序至关重要。但是 MSMQ 是否保证保留消息顺序？

在我看来，如果我的应用程序无法处理消息，例如由于与数据库的连接中断，那么消息将被移至重试队列。这允许应用程序从主队列接收新消息，直到原始消息从重试队列移回主队列。在一定数量的重试间隔后，邮件被移动到毒队列。但是，如果应用程序处理新消息，那么毒队列处理根本就不是一种选择。

因此消息的顺序没有被保留。

我对如何处理应用程序错误的理解有误吗？

我是否可以设置绑定以保留消息顺序，在消息处理暂时失败的情况下也是如此？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:50:29.123

皮特，

一些经验提示：

1.  nieve 是正确的，你不应该依赖消息顺序 - 如果你有这种情况，那么第一条消息的成功执行应该触发下一条，它们不应该同时在队列中发送。
2.  对于大多数人来说，这似乎无关紧要，但有一天，它可能会变得如此——这个应用程序将如何扩展？如果有一天你发现自己被迫在队列的目的地放置多个工人 - 这将如何扩展到多台机器？由于无法并行执行消息，您的模型将失败。

我强烈建议您研究[Saga Pattern](http://kellabyte.com/2012/05/30/clarifying-the-saga-pattern/)，这是此类问题的答案，它由[NServiceBus](http://www.nservicebus.com/)和[MassTransit](http://masstransit-project.com/)等产品提供，它们都将消除您不得不直接管理 MSMQ 的困难，而您却一直在做这件事。

我了解，在您的情况下，您可能根本没有选择，也无法“丢弃”您正在使用的模型，但是触发消息然后成功执行此消息（Saga）对您来说更有优势，然后您可以插入下一条消息。

我希望这有帮助，

# macos - Bash - 将“find”结果分配给变量时的奇怪行为

> ID：13030445
> 
> 赞同：1
> 
> 时间：2012-10-23T12:29:50.347
> 
> 标签：macos, bash, shell, find

我正在尝试通过 bash 脚本进行一些简单的目录修改，但我遇到了一些奇怪的行为（OSX 10.6）。

当我在目标目录中发出以下命令时，我会`find`在尝试仅搜索目录/文件夹时从命令中获得预期的结果，即：

```
find . -iname "*" -type d

Results:
dir1
dir2
dir3 
```

但是，当我尝试将结果分配给变量并打印它时，我会得到一些非常不同的行为：

```
myvar=$(find . -iname "*" -type d)
echo $myvar

Results:
dir1
dir2
dir3
dir3
dir3
dir3 
```

最终条目重复多次是否有意义？我现在可以通过管道输出来解决这个`sort -u`问题，但我想知道这个问题的根本原因。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T13:49:15.983

采用

```
 echo "$myvar" 
```

验证输出。没有括号，`*`可能会被评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:42:29.637

我认为这与`find`命令中的输出错误有关。现在它显示以下内容：

```
myvar=$(find . -iname "*" -type d)
echo $myvar
Results:
dir1
dir2
dir3
dir3/subdir1
dir3/subdir2
dir3/subdir3 
```

之前显示的时候：

```
Results:
dir1
dir2
dir3
dir3
dir3
dir3 
```

我不确定为什么没有显示子目录，但我保证我现在不需要`sort -u`通过指定深度来使用：

```
myvar=$(find . -iname "*" -type d -maxdepth 1)
Results:
dir1
dir2
dir3 
```

# c# - 如何添加到列表中 >> 描述

> ID：13030446
> 
> 赞同：-2
> 
> 时间：2012-10-23T12:29:54.950
> 
> 标签：c#, asp.net

我需要在其中添加多个项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:32:02.137

对这个问题的直接回答是：是的，这是可能的。

间接反应：

`<asp:Label ID="lblTest" runat="server" Text="This is a test"></asp:Label>`

```
//Check weather the condition matches
if("this" != "That")
{
    //If not, it will hide the label.
    lblTest.Visible = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:43:59.887

是的，用户控件可以有条件地隐藏/显示。这是一个更完整的示例：

```
<uc1:UC1 ID="userControl1" runat="server" Visible="false" />
<uc1:uc2 ID="userControl2" runat="server" Visible="false" />
<uc1:uc3 ID="userControl3" runat="server" Visible="false" /> 
```

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (something = "a")
            userControl1.Visible = true;
        else if (something = "b")
            userControl2.Visible = true;
        else
            userControl3.Visible = true;
    } 
```

# matlab - 从文本文件映射数据并在matlab中创建多维数组

> ID：13030456
> 
> 赞同：0
> 
> 时间：2012-10-23T12:30:29.880
> 
> 标签：matlab, text, create-table

我刚刚创建了一个 matlab 文件，该文件从包含 [Term] 的文本文件中获取数据并制作向量，并包含有关 is_a 关系和部分关系的信息（生物信息学领域）

```
the code is as follows:  

    clear all;
    % This code is for opening and getting information from a text file
    s={}; 
    fid = fopen('gos.txt'); 
    tline = fgetl(fid); 
    while ischar(tline) 
       s=[s;tline]; 
       tline = fgetl(fid); 
    end 
     %To generate the GO_Terms vector from the text file
    tok = regexp(s, '^id: (GO:\w*)', 'tokens'); 
    idx = ~cellfun('isempty', tok); 
    GO_Terms   = cellfun(@(x)x{1}, {tok{idx}})'

    %To generate the is_a relations vector from the text file
    tok = regexp(s, '^is_a: (GO:\w*)', 'tokens'); 
    idx = ~cellfun('isempty', tok); 
    is_a_relations  = cellfun(@(x)x{1}, {tok{idx}})'

    %To generate the part_of relaions vector from the text file
    tok = regexp(s, '^relationship: part_of (GO:\w*)', 'tokens'); 
    idx = ~cellfun('isempty', tok); 
    part_of_relations = cellfun(@(x)x{1}, {tok{idx}})' 
```

结果如下：

```
s= 

   '[Term]'    
    'id: GO:0008150'
    'name: biological_process'
    'namespace: biological_process'
    [1x180 char]
    [1x445 char]

    '[Term]'    
    'id: GO:0016740'
    'name: transferase activity'
    'namespace: molecular_function'
    'xref: Reactome:REACT_25050 "Molybdenum ion transfer onto molybdopterin, Homo sapiens"'
    '//is_a: GO:0003674 ! molecular_function'
    'is_a: GO:0008150 ! molecular_function (added by Zaid, To be Removed Later)'
    '//relationship: part_of GO:0008150 ! biological_process'

    '[Term]'    
    'id: GO:0016787'
    'name: hydrolase activity'
    'namespace: molecular_function'
    'xref: Reactome:REACT_110436 "Hydrolysis of phosphatidylcholine, Bos taurus"'
    [1x92  char]
    'xref: Reactome:REACT_87959 "Hydrolysis of phosphatidylcholine, Gallus gallus"'
    '//is_a: GO:0003674 ! molecular_function'
    'is_a: GO:0016740 ! molecular_function (added by Zaid, to be removed later)'
    'relationship: part_of GO:0008150 ! biological_process'

    '[Term]'    
    'id: GO:0006810'
    'name: transport'
    'namespace: biological_process'
    'alt_id: GO:0015457'
    'alt_id: GO:0015460'
    [1x255 char]
    'subset: goslim_aspergillus'
    'synonym: "transport accessory protein activity" RELATED [GOC:mah]'
    'is_a: GO:0016787 ! biological_process'
    'relationship: part_of GO:0008150 ! biological_process'

    '[Term]'    
    'id: GO:0006412'
    'name: translation'
    'namespace: biological_process'
    'alt_id: GO:0006416'
    [1x522 char]
    'subset: gosubset_prok'
    'synonym: "protamine kinase activity" NARROW []'
    'is_a: GO:0016740 ! transferase activity'
    '//relationship: part_of GO:0006464 ! cellular protein modification process'

    '[Term]'    
    'id: GO:0016779'
    'name: nucleotidyltransferase activity'
    'namespace: molecular_function'
    'is_a: GO:0016740 ! transferase activity'

    '[Term]'    
    'id: GO:0004386'
    'helicases, Xenopus tropicalis"'
    [1x100 char]
    'is_a: GO:0016787 ! hydrolase activity'

    '[Term]'    
    'id: GO:0003774'
    'name: motor activity'
    'namespace: molecular_function'
    [1x178 char]
    'is_a: GO:0016787 ! hydrolase activity'
    [1x110 char]

    '[Term]'    
    'id: GO:0016298'
    'name: lipase activity'
    'namespace: molecular_function'
    'holesterol ester + H2O -> cholesterol + fatty acid, Caenorhabditis elegans"'
    'is_a: GO:0016787 ! hydrolase activity'

    '[Term]'    
    'id: GO:0016192'
    'name: vesicle-mediated transport'
    'namespace: biological_process'
    'alt_id: GO:0006899'
    [1x429 char]
    'subset: goslim_aspergillus'
    'synonym: "vesicular transport" EXACT [GOC:mah]'
    'is_a: GO:0006810 ! transport'

    '[Term]'    
    'id: GO:0005215'
    'name: transporter activity'
    'namespace: molecular_function'
    [1x92  char]
    '//is_a: GO:0003674 ! molecular_function'
    'is_a: GO:0006412 ! molecular_function (to be removed later)'
    'relationship: part_of GO:0006810 ! transport'

    '[Term]'    
    'id: GO:0030533'
    'name: triplet codon-amino acid adaptor activity'
    'namespace: molecular_function'
    'is_a: GO:0004672 ! RNA binding (added by Zaid, to be removed later)'
    'relationship: part_of GO:0005215 ! translation'

GO_Terms = 

    'GO:0008150'
    'GO:0016740'
    'GO:0016787'
    'GO:0006810'
    'GO:0006412'
    'GO:0004672'
    'GO:0016779'
    'GO:0004386'
    'GO:0003774'
    'GO:0016298'
    'GO:0016192'
    'GO:0005215'
    'GO:0030533'

is_a_relations = 

    'GO:0008150'
    'GO:0016740'
    'GO:0016787'
    'GO:0008150'
    'GO:0016740'
    'GO:0016740'
    'GO:0016787'
    'GO:0016787'
    'GO:0016787'
    'GO:0006810'
    'GO:0006412'
    'GO:0004672'

part_of_relations = 

    'GO:0008150'
    'GO:0008150'
    'GO:0006810'
    'GO:0016192'
    'GO:0006810'
    'GO:0005215' 
```

我想在一个多维数组中收集这些数据，第一列是：'GO_Term'，第二列是：'is_a_relations'，第三列是：'part_of_relations'

问题是文本文件中的所有 [Terms] 都不包含第二列和第三列（“is_a”和“部分关系”）......所以我如何通过它的 is_a 和部分关系映射每个 GO_Term（如果有）对于文本文件中的每个 [Term] 段落。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:58:45.150

在这种情况下，您必须逐个学期并在途中创建地图：

```
% find start and end positions of every [Term] marker in s 
terms = [find(~cellfun('isempty', regexp(s, '\[Term\]'))); numel(s)+1];

% for every [Term] section, run the previously implemented regexps
% and save the results into a map - a cell array with 3 columns
map = cell(0,3);
for term=1:numel(terms)-1
    % extract single [Term]  data
    s_term = s(terms(term):terms(term+1)-1);

    % match regexps
    %To generate the GO_Terms vector from the text file
    tok = regexp(s_term, '^id: (GO:\w*)', 'tokens');
    idx = ~cellfun('isempty', tok); 
    GO_Terms   = cellfun(@(x)x{1}, {tok{idx}})';

    %To generate the is_a relations vector from the text file
    tok = regexp(s_term, '^is_a: (GO:\w*)', 'tokens'); 
    idx = ~cellfun('isempty', tok); 
    is_a_relations  = cellfun(@(x)x{1}, {tok{idx}})';

    %To generate the part_of relaions vector from the text file
    tok = regexp(s_term, '^relationship: part_of (GO:\w*)', 'tokens'); 
    idx = ~cellfun('isempty', tok); 
    part_of_relations = cellfun(@(x)x{1}, {tok{idx}})';

    % map. note the end+1 - here we create a new map row. Only once!
    map{end+1,1} = GO_Terms;
    map{end,  2} = is_a_relations;
    map{end,  3} = part_of_relations;
end 
```

`map`现在是一个 3 列的元胞数组。`[Term]`有些条目是空的，这意味着该特定条目没有对应的值。

# python - 将文本与python中的多个正则表达式匹配

> ID：13030459
> 
> 赞同：4
> 
> 时间：2012-10-23T12:30:38.520
> 
> 标签：python, regex, multiple-matches

我有一个包含 11 个文件的文本语料库，每个文件大约有 190000 行。我有 10 个字符串，其中一个或多个可能出现在上述语料库的每一行中。

当我遇到这 10 个字符串中的任何一个时，我需要分别记录出现在该行中的那个字符串。为每一行循环遍历正则表达式并标记它的蛮力方式需要很长时间。有没有一种有效的方法来做到这一点？

我找到了一个帖子（[使用 Python 匹配具有多个正则表达式的行](https://stackoverflow.com/questions/8888567/match-a-line-with-multiple-regex-using-python)），它提供了 TRUE 或 FALSE 输出。但是如何从该行记录匹配的正则表达式：

```
any(regex.match(line) for regex in [regex1, regex2, regex3]) 
```

编辑：添加示例

```
regex = ['quick','brown','fox']
line1 = "quick brown fox jumps on the lazy dog" # i need to be able to record all of quick, brown and fox
line2 = "quick dog and brown rabbit ran together" # i should record quick and brown
line3 = "fox was quick an rabit was slow" # i should be able to record quick and fox. 
```

循环遍历正则表达式并记录匹配的表达式是解决方案之一，但是查看比例（11 * 190000 * 10），我的脚本现在运行了一段时间。我需要在我的工作中重复很多次。所以我正在寻找一种更有效的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T12:53:28.267

下面的方法是在您想要匹配的情况下。如果您需要触发匹配的列表中的正则表达式，那么您很不走运并且可能需要循环。

根据[您提供的链接](https://stackoverflow.com/questions/8888567/match-a-line-with-multiple-regex-using-python)：

```
import re
regexes= 'quick', 'brown', 'fox'
combinedRegex = re.compile('|'.join('(?:{0})'.format(x) for x in regexes))

lines = 'The quick brown fox jumps over the lazy dog', 'Lorem ipsum dolor sit amet', 'The lazy dog jumps over the fox'

for line in lines:
    print combinedRegex.findall(line) 
```

输出：

```
['quick', 'brown', 'fox']
[]
['fox'] 
```

这里的重点是您不要遍历正则表达式，而是将它们组合起来。循环方法的不同之处在于它`re.findall`不会找到重叠的匹配项。例如，如果您的正则表达式是：`regexes= 'bro', 'own'`，则上述行的输出将是：

```
['bro']
[]
[] 
```

而循环方法将导致：

```
['bro', 'own']
[]
[] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:36:21.873

如果您只是想匹配文字字符串，那么这样做可能更容易：

```
strings = 'foo','bar','baz','qux'
regex = re.compile('|'.join(re.escape(x) for x in strings)) 
```

然后你可以一次测试整个事情：

```
match = regex.match(line) 
```

当然，您可以从生成的 MatchObject 中获取匹配的字符串：

```
if match:
    matching_string = match.group(0) 
```

* * *

在行动：

```
import re
strings = 'foo','bar','baz','qux'
regex = re.compile('|'.join(re.escape(x) for x in strings))

lines = 'foo is a word I know', 'baz is a  word I know', 'buz is unfamiliar to me'

for line in lines:
    match = regex.match(line)
    if match:
        print match.group(0) 
```

* * *

看来您真的希望在字符串中搜索您的正则表达式。在这种情况下，无论您做什么，都需要使用`re.search`（或某些变体） 。`re.match`只要您的正则表达式没有重叠，您就可以使用我上面发布的解决方案`re.findall`：

```
matches = regex.findall(line)
for word in matches:
    print ("found {word} in line".format(word=word)) 
```

* * *

# gwt - GWT 直接链接到应用程序的一部分

> ID：13030460
> 
> 赞同：0
> 
> 时间：2012-10-23T12:30:40.610
> 
> 标签：gwt

在标准的“基于页面”的 webapps 中，很容易实现到几个页面的直接链接，fe，一个 url abc.com/app/customer/4711，它将用户直接引导到显示客户 4711 的页面。

有没有办法在 GWT-App 中重现类似的行为？

Tnk 云母

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:42:56.453

您可以使用活动和地点设计模式。它可以轻松访问应用程序中的任何“位置”：

[https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:10:47.847

每隔一段时间就会以一种或另一种形式提出这个问题，我认为对于 GWT 最适合什么存在误解。

*GWT 是一组用于创建Web 应用程序*的惊人工具：在现代 Web 浏览器中运行的 JavaScript 多屏用户界面，作为*单个*网页加载，并且通常不需要全页重新加载或页面切换来操作。

屏幕之间的导航响应触发事件（例如，用户按下按钮、计时器触发或服务器端状态更改）而发生。需要呈现的数据通过 XHR 异步获取（同样无需重新加载网页）。

GWT 为上述所有内容提供了一个精心设计的框架 - 正如 Andrei 所提到的，用于导航的活动和地点、用于数据采集和交换的 GWT-RPC 和 RequestFactory，以及更多用于制作利用处理能力的高级和高度结构化的 Web 应用程序现代机器和现代浏览器的功能。

# vb.net - GetType.GetProperties

> ID：13030461
> 
> 赞同：1
> 
> 时间：2012-10-23T12:30:42.403
> 
> 标签：vb.net

我正在尝试遍历面板中的所有控件，并查找用户为每个控件更改了哪些属性。

所以我有这个代码：

```
 Private Sub WriteProperties(ByVal cntrl As Control)

    Try
        Dim oType As Type = cntrl.GetType

        'Create a new control the same type as cntrl to use it as the default control                      
        Dim newCnt As New Control
        newCnt = Activator.CreateInstance(oType)

        For Each prop As PropertyInfo In newCnt.GetType().GetProperties
            Dim val = cntrl.GetType().GetProperty(prop.Name).GetValue(cntrl, Nothing)
            Dim defVal = newCnt.GetType().GetProperty(prop.Name).GetValue(newCnt, Nothing)

            If val.Equals(defVal) = False Then
               'So if something is different....
            End If

        Next
    Catch ex As Exception
        MsgBox("WriteProperties : " &  ex.Message)
    End Try
End Sub 
```

现在我面临三个问题：

1.  当属性引用图像（背景图像）时，我有一个错误：ImageObject 引用未设置为对象的实例。

2.  第二个问题是代码：

    ```
     If val.Equals(defVal) = False Then
               'So if something is different....
     End If 
    ```

    is 有时在 val 和 defVal 相同时执行。如果属性是像 FlatAppearance 一样的“parentProperty”（它有更多的子属性），就会发生这种情况

3.  我的循环没有查看我想要的基本属性，如大小或位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:54:01.967

回复：`Not set to an instance of an object`，做类似...

```
If val IsNot Nothing AndAlso defVal IsNot Nothing AndAlso Not val.Equals(defVal) Then 
```

`Nothing`如果两个值都不是（又名`Null`），则只会进行比较。

不幸的是，#2 是一个基本问题——`.Equals`默认情况下检查 2 个对象引用是否指向内存中的同一个对象——例如，如果你这样做了

```
Dim A As New SomeClass
Dim B As New SomeClass

If A.Equals(B) Then
    ...
End If 
```

`False`除非有一个被覆盖的相等比较器，否则将返回`SomeClass`，而许多类没有。

您可以检查有问题的值是否是您知道可以比较的类型（整数、字符串、双精度等）。如果没有，您可以遍历其属性并再次执行相同的检查。这将允许您比较任何类型的公共属性是否相等，但不能保证类的内部状态相同。

类似的东西（未经测试/伪）......

```
Function Compare (PropA, PropB) As Boolean
    Dim Match = True
    If PropA.Value Is Nothing Or PropB.Value Is Nothing
       Match = False
    Else
       If PropA.Value.GetType.IsAssignableFrom(GetType(String)) Or
          PropA.Value.GetType.IsAssignableFrom(GetType(Integer)) Or ... Then
           Match = PropB.Value.Equals(PropB.Value)
       Else
           For Each Prop In PropA.Value.GetType.GetProperties()
               Match =  Compare(Prop, PropB.Value.GetType.GetProperty(Prop.Name))
               If Not Match Then Exit For
           Next
        End If    
    End If    
    Return Match
End Function 
```

这仍然不理想，因为值的内部状态可能不同。

# java - GWT.create(Class ) 与 GIN？

> ID：13030464
> 
> 赞同：6
> 
> 时间：2012-10-23T12:30:56.300
> 
> 标签：java, gwt, guice, gwt-gin

看起来 GWT 有自己的内置 DI 机制 ( `GWT.create(Class<?>)`)。除此之外，GIN 还提供什么好处？您是否应该将它们相互结合使用，或者它们是否相互排斥？我喜欢 Guice，所以我很想使用 GIN，但如果 GWT 已经开箱即用地做同样的事情，我不想介绍它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T13:14:42.527

Gin 和`GWT.create`一些不同之处 - Gin 更多的是通过`@Inject`注解提供依赖关系，无论是在字段、设置器或构造函数上，而`GWT.create`具体是关于获取实现。Gin 将使用您提供的任何构造函数，但您必须专门提供替换类型，而`GWT.create`只能使用默认构造函数，并且您的“重新绑定规则”不需要非常精确，甚至可以导致新类成为在编译时创建。它还能够查看用户正在运行的环境，并根据该环境选择一组特定的规则，这是 Gin 无法做到的。

Gin 实际上是利用`GWT.create`来获得这些其他特性的——如果你没有定义规则，Gin 会`GWT.create`自动调用。这意味着如果您有类似的规则

```
@Inject MyRemoteServiceAsync rpcService; 
```

Gin 将调用`GWT.create`来构建该 rpc 调用。这也适用于 UiBinder、编辑器驱动程序、I18n 消息和常量等。

如果您已经了解并喜欢 Guice，那么 Gin 对您来说应该不是很大的一步，您仍然可以直接调用 GWT.create，或者隐式要求 Gin 执行此操作。事实上，为了使用 Gin，您需要调用`GWT.create(MyGinjector.class)`才能让球滚动。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-23T14:02:32.360

`GWT.create()`与依赖注入无关。这是一种*工厂*方法。

`GWT.create(SomeThing.class)`和之间的唯一区别是可以使用所谓的[*延迟绑定*](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDeferred)`new SomeThing()`替换或生成确切的类。但是，例如，为 d 对象提供依赖关系并没有什么意义。`SomeThing`[](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDeferred)*`GWT.create()``GWT.create()`*

# mod-deflate - 安装了 mod_deflate 但没有改善

> ID：13030465
> 
> 赞同：0
> 
> 时间：2012-10-23T12:30:59.033
> 
> 标签：mod-deflate

我已经在 centos 上安装了 mod_deflate。在虚拟主机文件中，我添加了以下内容

```
 SetOutputFilter DEFLATE
  SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$  no-gzip dont-vary
  SetEnvIfNoCase Request_URI  \.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary
  SetEnvIfNoCase Request_URI \.pdf$ no-gzip dont-vary

  DeflateFilterNote Input input_info
  DeflateFilterNote Output output_info
  DeflateFilterNote Ratio ratio_info
  LogFormat '"%r" %{output_info}n/%{input_info}n (%{ratio_info}n%%)' deflate
  CustomLog /var/log/httpd/deflate_log deflate 
```

它也显示了日志中的压缩，但没有显示页面加载时间的改进。

请指导相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:34:19.940

如果它仍然不起作用，可能的原因是你没有包括这个

```
LoadModule deflate_module modules/mod_deflate.so 
```

在阿帕奇

```
httpd.conf 
```

# gnuplot - gnuplot 使用垂直存储的数据文件

> ID：13030466
> 
> 赞同：1
> 
> 时间：2012-10-23T12:31:12.013
> 
> 标签：gnuplot

我正在尝试找出绘制服务器磁盘使用情况折线图的基本语法。数据存储在 Oracle 数据库中，该数据库显然将新数据存储在不同的行上，而不是在同一行上。从我目前所读到的内容来看，gnuplot 似乎更喜欢相关数据位于同一行。我的数据看起来像这样。

```
#disk date     GB_used
disk1 20121022 99
disk1 20121023 104
disk2 20121022 170
disk2 20121023 182 
```

gnuplot 可以处理这种格式的数据吗？图形输出将有 2 条线，一条用于磁盘 1，一条用于磁盘 2。数据文件只有几个disk_numbers，但最终将包含每天记录的数百行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:14:53.943

是的，它可以，但你可能不得不欺骗一下。这是基本的绘图命令：

```
plot "< sed 's/^disk//' data.dat" using ($1==1?$2:1/0):3 title 'disk 1', \
 '' using ($1==2?$2:1/0):3 title 'disk 2' 
```

首先，我运行数据文件`sed`以从每一行中删除字符串“disk”。`using`然后 gnuplot 在关键字之后进行条件比较。在第一个绘图命令中，它检查第一个数据列是否等于 1（它将用于 'disk1' - 'disk'），如果是，则绘制第二列与第三列，否则绘制 1/0 （gnuplot 忽略）。

我尝试在纯 gnuplot 中这样做：

```
plot 'data.dat' u ($1 eq 'disk1'?$2:1/0):3 t 'disk 1', \
 '' u ($1 eq 'disk2'?$2:1/0):3 t 'disk 2' 
```

但它不喜欢 plot 命令中的字符串比较。

要获得正确的时间格式，您需要执行类似的操作

```
set xdata time
set timefmt '%Y%m%d'
set format x '%F' 
```

在 plot 命令之前。

编辑：正如@mgilson 指出的那样，`strcol`如果您想要一个“纯 gnuplot”解决方案，可以使用该命令：

```
plot 'data.dat' u (strcol(1) eq 'disk1'?$2:1/0):3 t 'disk 1', \
     '' u (strcol(1) eq 'disk2'?$2:1/0):3 t 'disk 2' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T14:16:27.347

我假设您想为磁盘 1 和磁盘 2 绘制 GB_used 与日期。如果是这样的话，这*几乎*是 gnuplot 喜欢的格式：

```
#disk date     GB_used
disk1 20121022 99
disk1 20121023 104

disk2 20121022 170
disk2 20121023 182 
```

这是一个简单的 awk 脚本来转换它：

```
awk 'BEGIN{getline;x=$1;print $0}{if($1!=x){print '\n\n';print$0;x=$1}else{print $0}}' example.dat 
```

在这种情况下，gnuplot 会希望您将两个数据集分隔 1 或 2 个空白行。如果你用 1 个空行分隔，gnuplot 将绘制 2 行相同的线型

如果您用 2 个空行分隔，gnuplot 将绘制两个数据集，并且您可以使用不同的线型进行绘制：

```
plot for [idx=0:1] 'example.dat' i idx u 2:3 w lines 
```

正如@andyras 的回答所证明的那样，基本上可以通过过滤来实现相同的效果

# symfony - Symfony2实体注释断言/回调方法未调用

> ID：13030472
> 
> 赞同：3
> 
> 时间：2012-10-23T12:31:31.247
> 
> 标签：symfony, callback, annotations, assert

我的`Assert/Callback`验证有问题。我用[它](http://symfony.com/doc/current/reference/constraints/Callback.html)作为我的代码示例，但 Symfony 只是忽略了验证功能。这是我的实体代码的相关部分

```
namespace Vendor\Bundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Gedmo\Mapping\Annotation as Gedmo; // gedmo annotations
use Symfony\Component\Validator\Constraints as Assert;
use Symfony\Component\Validator\ExecutionContext;

/**
 * @Assert\Callback(methods={"isValidFirma"})
 * @ORM\Entity(repositoryClass="Vendor\Bundle\Entity\UserProfileRepository")
 * @ORM\Table(name="user_profile")
 */
class UserProfile
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    //...

    public function isValidFirma(ExecutionContext $context){
        $context->addViolationAtSubPath('Firma', 'Company name must be present', array(), null);
        // as of sf 2.3 use addViolationAt() instead [reference: https://github.com/propelorm/PropelBundle/issues/234 ]
    }    

    //...            

} 
```

`isValidFirma`永远不会被调用。我也尝试了validation.yml 文件而不是注释，但没有成功。每次更改后，我清除了大约五十次缓存，也无济于事。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T13:52:12.230

解决方案。问题出在使用过的验证器组中。断言验证器必须是该组的一部分，否则它不会触发。表单类文件中的这段代码是罪魁祸首：

```
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $vg = array('my-profile');

    $resolver->setDefaults(array(
        'validation_groups' => $vg
    ));
} 
```

将带有断言的行更改为

```
* @Assert\Callback(methods={"isValidFirma"}, groups={"my-profile"}) 
```

成功了。

# symfony - 使用 FPNTagBundle 在查询中加载标记

> ID：13030473
> 
> 赞同：2
> 
> 时间：2012-10-23T12:31:36.867
> 
> 标签：symfony, tags, symfony-2.1

捆绑文档解释了如何加载简单对象的标记：

```
$this->tagManager->loadTagging($article); 
```

但我需要加载带有标签的可标记资源列表（来自学说查询的 ArrayCollection）。然后遍历 twig 中的集合并打印： Object: tag1, tag2, tag..n

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-26T01:50:59.480

旧帖子，但希望这个答案会对某人有所帮助，因为我在尝试实现标记包时遇到了同样的问题。问题是您的实体将具有标签的私有或受保护属性，但是文档在包上读取的方式，该属性没有关联映射，并且它不是实际字段（列）。因此，无论是在控制器中还是在 Twig 中，尝试访问 tags 属性或在实体上使用 getTags 方法都行不通。我觉得捆绑包上的文档可能缺少 tags 属性上的一些映射注释，但我无法准确缩小它应该是什么。

我最终采用了其他几个人推荐的方法，通过在控制器中循环我的实体，并使用标签管理器为每个实体加载标签。我还做的结果证明是有帮助的是将 setTags 方法添加到接受 ArrayCollection 的实体中，这样当循环通过控制器中的实体时，您可以在每个实体上设置标签，然后在树枝中访问它们你想做。例如：

**将此 setTags 方法添加到您的实体：**

```
/**
 * @param ArrayCollection $tags
 * @return $this
 */
public function setTags(ArrayCollection $tags)
{
    $this->tags = $tags;

    return $this;
} 
```

这将允许您从控制器设置 tags 属性。

**然后在你的控制器中：**

```
/**
 * @param Request $request
 * @return \Symfony\Component\HttpFoundation\Response
 */
public function indexAction(Request $request)
{
    $em = $this->getDoctrine()->getManager();
    $posts = $em->getRepository('ContentBundle:Post')->findAll();

    // here's the goods... loop thru each entity and set the tags
    foreach ($posts as $post) {
        $post->setTags($this->getTags($post));
    }

    // replace this example code with whatever you need
    return $this->render('AppBundle::index.html.twig',array(
        'posts' => $posts
    ));
}

/**
 * @param Post $post
 * @return \Doctrine\Common\Collections\ArrayCollection
 */
public function getTags(Post $post) {
    $tagManager = $this->get('fpn_tag.tag_manager');
    $tagManager->loadTagging($post);

    return $post->getTags();
} 
```

此控制器中的 getTags 方法只是获取您的实体并使用 tagmanager 查找并返回它的标签。您将在 index 方法中看到将标签添加到每个实体的循环。

**然后在 Twig 中，您可以在循环中的每个帖子上访问您的标签：**

```
{% for post in posts %}
  <h2>{{ post.title }}</h2>
  {% for tag in post.tags %}
    <a href="{{ url('tag_detail',{'slug':tag.slug}) }}">{{ tag.name }}</a> 
  {% endfor %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:56:49.733

您可以遍历控制器中的集合，如下所示：

```
foreach($articles as $article){
    $this->tagManager->loadTagging($article);
} 
```

# sql-server - 数据混合 SQL Server

> ID：13030484
> 
> 赞同：1
> 
> 时间：2012-10-23T12:32:08.630
> 
> 标签：sql-server

我有三个表和两个日期的范围：

```
Services
ServicesClients
ServicesClientsDone

@StartDate
@EndDate 
```

服务：

```
ID | Name
1  | Supervisor
2  | Monitor
3  | Manufacturer 
```

服务客户：

```
IDServiceClient | IDClient | IDService
1               | 1        | 1
2               | 1        | 2
3               | 2        | 2
4               | 2        | 3 
```

服务客户完成：

```
IDServiceClient | Period 
1               | 201208
3               | 201210 
```

期间 = YYYYMM

我需要从@StartDate 到@EndDate 的月份范围内插入ServicesClientsDone。我还有一个带有以下列表的临时表（#Periods）：

```
Period
201208
201209
201210 
```

我需要的查询是返回以下列表：

```
IDServiceClient | Period
1               | 201209
1               | 201210
2               | 201208
2               | 201209
2               | 201210
3               | 201208
3               | 201209
4               | 201208
4               | 201209
4               | 201210 
```

哪些是服务端的临时表的行列，而不是那些已经插入的

这就是我所拥有的：

表期间：

```
DECLARE @i int
DECLARE @mm int
DECLARE @yyyy int,
DECLARE @StartDate datetime
DECLARE @EndDate datetime

set @EndDate = (SELECT GETDATE())
set @StartDate = (SELECT DATEADD(MONTH, -3,GETDATE()))

CREATE TABLE #Periods (Period int)

set @i = 0

WHILE @i <= DATEDIFF(MONTH, @StartDate , @EndDate )
BEGIN
    SET @mm= DATEPART(MONTH, DATEADD(MONTH, @i, @FechaInicio))
    SET @yyyy= DATEPART(YEAR, DATEADD(MONTH, @i, @FechaInicio))

    INSERT INTO #Periods (Period) 
        VALUES (CAST(@yyyy as varchar(4)) + RIGHT('00'+CONVERT(varchar(6), @mm), 2))

    SET @i = @i + 1;
END 
```

ServicesClients 和 Services 之间的关系：

```
SELECT s.Name, sc.IDClient FROM Services
    JOIN ServicesClients AS sc
      ON sc.IDService = s.ID 
```

服务已经完成以及何时：

```
SELECT s.Name, scd.Period FROM Services
    JOIN ServicesClients AS sc
      ON sc.IDService = s.ID
    JOIN ServicesClientsDone AS scd
      ON scd.IDServiceClient = sc.IDServiceClient 
```

问题是：如果没有已经完成的服务，我该如何获取客户端上安装的服务和日期范围之间的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:36:56.020

带一个`left join`.

```
select ServicePeriods.*  
from 
(
    SELECT sc.IDServiceClient, period 
    FROM Services s
    inner join ServicesClients AS sc 
    cross join #periods 
      ON sc.IDService = s.ID 
) ServicePeriods 
    left join 
(
    SELECT scd.IDServiceClient, scd.Period 
    FROM Services s
    INNER JOIN ServicesClients AS sc 
      ON sc.IDService = s.ID 
    INNER JOIN ServicesClientsDone AS scd 
      ON scd.IDServiceClient = sc.IDServiceClient
) exclude
    on ServicePeriods.IDServiceClient = exclude.IDServiceClient  
    and ServicePeriods.Period = exclude.Period 
where exclude.IDServiceClient is null 
```

或`except`查询

```
SELECT sc.IDServiceClient, period 
FROM Services s
    INNER JOIN ServicesClients AS sc 
    cross join periods 
      ON sc.IDService = s.ID 

EXCEPT

SELECT scd.IDServiceClient, scd.Period 
FROM Services s
    INNER JOIN ServicesClients AS sc 
      ON sc.IDService = s.ID 
    INNER JOIN ServicesClientsDone AS scd 
      ON scd.IDServiceClient = sc.IDServiceClient 
```

# macos - 使用 AppleScript 从 FileMaker 获取记录计数的统计信息

> ID：13030486
> 
> 赞同：1
> 
> 时间：2012-10-23T12:32:14.730
> 
> 标签：macos, applescript, filemaker

有人可以建议是否有一种好的内置方式（= AppleScript 命令）来提取数据库的统计信息：

我需要计算所有记录中特定字段中字符串的出现次数。

例如，对于具有

*   *姓名*
*   *电话*
*   *镇*

该脚本将返回相同城镇存在的记录数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T05:25:42.643

第 1 步 - 创建关系。- 文件 > 管理数据库 > 定义数据库 - 关系选项卡 - 复制您的表出现并命名（我使用过`related_towns`） - 将两者之间的关系从一个城镇拖到另一个城镇 - 单击“确定”。

![这是您的关系选项卡的外观](../Images/fc5bddb46af716a665bb6175f896534e.png)

第 2 步 - 创建一个计算字段，计算相关（重复）城镇名称的实例。

*   文件 > 管理数据库 > 定义数据库
*   字段选项卡
*   `number_of_related_towns`在屏幕底部输入新字段的名称（我用过）
*   从字段类型列表中选择“计算”
*   用这个计算计算城镇出现在你的关系中的次数：

![这就是您的计算字段的样子](../Images/40ecbf156517b63e0172214196e045ae.png)

确保将“在上下文中评估此计算”设置为您的基表的名称（您的布局所基于的）。替换`related_towns`为您命名新表出现的任何内容。

第 3 步 - 编写一个脚本来显示您的数据。

*   脚本 > 管理脚本
*   新按钮（左下）
*   重建下面的屏幕截图。我添加了评论，希望能解释一下吗？

![在此处输入图像描述](../Images/fd7b06f866313eeb159ff075230352c3.png)

如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T02:13:05.420

我会在 FileMaker 中执行此操作。它正是为此而构建的。你知道如何在 FM 中做到这一点吗？

# python - 使用 pandas 绘制带有误差线的条形图

> ID：13030488
> 
> 赞同：9
> 
> 时间：2012-10-23T12:32:19.470
> 
> 标签：python, matplotlib, pandas

我正在尝试从这样的 DataFrame 生成条形图：

```
 Pre    Post
 Measure1   0.4    1.9 
```

这些值是我从其他地方计算的中值，我也有它们的方差和标准偏差（以及标准误差）。我想将结果绘制为带有正确误差线的条形图，但指定多个错误值会`yerr`产生异常：

```
# Data is a DataFrame instance
fig = data.plot(kind="bar", yerr=[0.1, 0.3])

[...]
ValueError: In safezip, len(args[0])=1 but len(args[1])=2 
```

如果我指定一个值（不正确），一切都很好。我如何才能真正为每列提供正确的错误栏？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T13:25:25.833

你的数据形状是什么？

对于 n×1 数据向量，您需要一个 n×2 误差向量（正误差和负误差）：

```
import pandas as pd 
import matplotlib.pyplot as plt

df2 = pd.DataFrame([0.4, 1.9])
df2.plot(kind='bar', yerr=[[0.1, 3.0], [3.0, 0.1]])

plt.show() 
```

[![在此处输入图像描述](../Images/25d4468c70f2b21c78743b5cd21963ab.png)](https://i.stack.imgur.com/dICYu.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-06T14:19:11.720

# 如果卢卡斯的回答不起作用

无论出于何种原因，接受的答案对我来说都不起作用（比较我的评论）。我正在使用以下版本

**版本：** Python 3.7.6（anaconda），mpl：3.1.3，pd：1.0.1，np：1.18.1

然而，有效的是对这个[问题](https://stackoverflow.com/q/13130703/7128154)的修改。该问题的讨论也指向了不同版本和不对称误差线绘图可能存在一些问题的方向。

**代码** 围绕数据框列的平均值绘制从最小值到最大值的不对称误差线。

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
print('Versions, mpl: {:}, pd: {:}, np: {:}'.format(mpl.__version__, pd.__version__, np.__version__))

df = pd.DataFrame()
df['a'] = [1, 1, 2, 3, 3]
df['b'] = [0.5, 0.5, 2, 3, 4]
print(df)

plt.bar(np.arange(df.shape[1]), df.mean(), yerr=[df.mean()-df.min(), df.max()-df.mean()], capsize=6)
plt.grid()

plt.show() 
```

[![在此处输入图像描述](../Images/241c1668b960b6bd2272f4260bd298dd.png)](https://i.stack.imgur.com/4y7TN.png)

# java - 正则表达式括号内的括号

> ID：13030490
> 
> 赞同：0
> 
> 时间：2012-10-23T12:32:26.207
> 
> 标签：java, regex, string, windows, vbscript

我有这个逻辑编程软件，可以将结果输出为以下形式的文本文件：

```
[-a(b), +i(c), +i(d)] 
[-a(f(g(a))), -a(f(a,b)), -a(f(c)), -a(f(d)), -a(b)]
... 
```

它可以扩展到数百或数千行。

我只是希望能够通过删除包含括号内的括号（换句话说，谓词内的函数）的行来缩小这个数字，就像`-a(f(g(a)))`和`-a(f(c))`......并保留所有其他行。

任何人都可以指导我，也许可以为我提供一个简单的例子，说明如何以最简单的方式实现这一点，一点也不花哨，可能是在 VBScript 或 Batch 中（是的，我在 Windows 上），它读取文本文件的内容和删除未分配的行。

**编辑：vbs 工作示例**

```
Dim re, targetString
Set re = New RegExp
With re
  .Pattern = "\([^()]*\("
  .Global = False
  .IgnoreCase = False
End With

targetString = "[-a(f(g(a))), -a(f(a,b)), -a(f(c)), -a(f(d)), -a(b)]"

if re.Test(targetString) <> True Then
    MsgBox "valid",0,"test"
else
    MsgBox "invalid",0,"test"
end if 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:42:03.280

匹配嵌套括号对于正则表达式来说总是一件棘手的事情，因为递归结构不是规则的。但是在您的示例中，您可以简单地查找两个左括号彼此跟随而没有中间右括号的行：

```
if (/\([^()]*\(/.test(line)) {
    // discard line
} else {
    // keep line
} 
```

**解释：**

```
\(     # Match (
[^()]* # Match any number of characters except parentheses 
\(     # Match another ( 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T12:45:52.027

使用 grep

```
grep -v '([^()]*(' file.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:47:23.480

这是一个完整的 Perl 解决方案：

```
use strict;
use warnings;

open IN, 'in.txt' or die "can't open input file";
open OUT, '>out.txt' or die "can't open output file";

while (<IN>)
{
   unless (/([\(]\w*){2}/)
   {
       print OUT $_;
   }
} 
```

[在我看来，安装 Perl](http://strawberryperl.com/)并使用它来解决您的问题比尝试在 VBScript 中执行此操作要快得多。（是的，我有偏见，但 Perl 是一个非常优秀的工具）。

# c++ - 在 VS2005 中为我的 C++ 应用程序设置管理员权限

> ID：13030492
> 
> 赞同：1
> 
> 时间：2012-10-23T12:32:31.250
> 
> 标签：c++, visual-studio-2005, administrator, privilege

我目前正在对我们的一个框架进行 Windows 7 移植。在Windows-XP 64bit平台上成功运行。现在我正在 Windows 7 64 位中构建我的所有项目。但是我找不到为我的项目指定管理员权限（“需要管理员”）的正确方法。

我们已经将这些项目移植到 VS2008 中的 Windows 7 中。在 VS2008 中，可以直接从 Project Settings->Linker->Manifest File->UAC Execution Level 设置 UAC 权限。但是这个属性在 VS2005 中不可用。

我尝试通过引用[http://msdn.microsoft.com/en-us/library/ms235591.aspx](http://msdn.microsoft.com/en-us/library/ms235591.aspx)来编辑应用程序的 app.manifest 文件。它要求将清单文件转换为资源文件，但我找不到这样做的方法。所以链接对我不起作用。

我怎么能用VS2005做同样的事情，请帮忙。

问候，尼克松

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:18:35.120

您是否尝试过手动编辑清单并添加`requireAdministrator`？您可以阅读[http://msdn.microsoft.com/en-us/library/bb756929.aspx](http://msdn.microsoft.com/en-us/library/bb756929.aspx)了解更多详情。

# wpf - 如何在 WPF 中创建 Windows 8 风格的应用栏？

> ID：13030507
> 
> 赞同：4
> 
> 时间：2012-10-23T12:33:07.507
> 
> 标签：wpf, appbar

我打算创建一个 Windows 8 风格的应用程序（Metro），但发现不支持使用双屏，这是我的应用程序的需求。

现在我正在将我的应用程序重新设计为 WPF 中的桌面应用程序。但我仍然喜欢从 Windows 8 应用程序中模仿一些不错的设计功能。

设计功能之一是 Windows 8 风格应用程序中通常使用的飞出栏：

*   命令的底部应用程序栏
*   顶部导航栏
*   适用于所有应用程序的正确魅力

它们的共同设计是一个临时弹出面板，它位于当前窗口布局的顶部。

我的问题是：如何在 WPF 中创建类似的东西？

我可以毫无问题地创建一个带有隐藏底行的主网格，该主网格可以显示一些常见的命令按钮。但是让它飞到我的标准布局之上会很好，而不是挤压它。

我知道可以在当前窗口之上打开一个新窗口，但这会造成糟糕的代码设计并且很难看起来漂亮。我宁愿在同一个窗口中进行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T12:43:07.267

很酷的问题！我最近实际上已经完成了魅力酒吧..

理想情况下，您需要的是类似

```
<Grid x:Name="LayoutRoot">

 <Grid x:Name="Overlay" Panel.ZIndex="1000" Visibility="Collapsed">
    <!-- This is where your slide out control is going to go -->
  </Grid>

  <!-- Use whatever layout you need -->
  <ContentControl x:Name="MainContent" />

</Grid> 
```

现在不是挤压内容 - 覆盖网格将位于其顶部，类似于魅力栏！全部使用 XAML

如果您对此还有疑问，请给我留言！

编辑; 我的魅力实现 - 随意使用灵感！

```
public class SlidePanel : ContentControl
    {
        static SlidePanel()
        {
            DefaultStyleKeyProperty.OverrideMetadata(typeof(SlidePanel), new FrameworkPropertyMetadata(typeof(SlidePanel)));
        }

        public SlidePanel()
        {
            EventManager.RegisterClassHandler(typeof(SlidePanel), SlidePanel.MouseEnterEvent,
                                              new RoutedEventHandler(OnLocalMouseEnter));

            EventManager.RegisterClassHandler(typeof(SlidePanel), SlidePanel.MouseLeaveEvent,
                                              new RoutedEventHandler(OnLocalMouseLeave));
        }

        #region Mouse Handlers

        private static void OnLocalMouseEnter(object sender, RoutedEventArgs e)
        {
            SetExpanded(sender, true);
        }

        private static void OnLocalMouseLeave(object sender, RoutedEventArgs e)
        {
            SetExpanded(sender, false);

        }

        private static void SetExpanded(object sender, bool expanded)
        {
            SlidePanel panel = sender as SlidePanel;

            if (panel != null)
            {
                panel.IsExpanded = expanded;
            }
        }

        #endregion Mouse Handlers

        #region Panel Width

        public double PanelWidth
        {
            get { return (double)GetValue(PanelWidthProperty); }
            set { SetValue(PanelWidthProperty, value); }
        }

        // Using a DependencyProperty as the backing store for PanelWidth.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty PanelWidthProperty =
            DependencyProperty.Register("PanelWidth", typeof(double), typeof(SlidePanel), new UIPropertyMetadata(5.0));

        #endregion Panel Width

        #region Closed Width

        public double ClosedWidth
        {
            get { return (double)GetValue(ClosedWidthProperty); }
            set { SetValue(ClosedWidthProperty, value); }
        }

        // Using a DependencyProperty as the backing store for ClosedWidth.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty ClosedWidthProperty =
            DependencyProperty.Register("ClosedWidth", typeof(double), typeof(SlidePanel), new UIPropertyMetadata(5.0, new PropertyChangedCallback(OnClosedWidthChange)));

        #endregion Closed Width

        #region Expanded Property

        public bool IsExpanded
        {
            get { return (bool)GetValue(IsExpandedProperty); }
            set { SetValue(IsExpandedProperty, value); }
        }

        // Using a DependencyProperty as the backing store for IsExpanded.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty IsExpandedProperty =
            DependencyProperty.Register("IsExpanded", typeof(bool), typeof(SlidePanel), new UIPropertyMetadata(false, new PropertyChangedCallback(OnExpandedChanged)));

        #endregion Expanded Property

        #region Property Changes

        private static void OnExpandedChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            if (e.NewValue == e.OldValue)
                return;

            SlidePanel panel = d as SlidePanel;

            if (panel == null)
                return;

            bool newVal = (bool)e.NewValue;

            panel.IsExpanded = newVal;

            bool expanded = (bool)panel.GetValue(IsExpandedProperty);

            Storyboard widthAnimation = AnimationHelper.CreateDoubleAnimation<SlidePanel>(panel, expanded,
                (p, a) =>
                {
                    a.From = (double)p.GetValue(SlidePanel.ClosedWidthProperty);
                    a.To = (double)p.GetValue(SlidePanel.PanelWidthProperty);
                },
                (p, a) =>
                {
                    a.From = (double)p.GetValue(SlidePanel.WidthProperty);
                    a.To = (double)p.GetValue(SlidePanel.ClosedWidthProperty);
                }, new TimeSpan(0, 0, 0, 0, 300), WidthProperty);

            Timeline opacity = AnimationHelper.DoubleAnimation(0.0, 1.0, expanded,
                                                                      new TimeSpan(0, 0, 0, 0, 300), OpacityProperty);

            Storyboard.SetTargetName(opacity, panel.Name);

            Storyboard.SetTargetProperty(opacity, new PropertyPath(OpacityProperty));

            widthAnimation.Children.Add(opacity);

            widthAnimation.Begin(panel);

        }

        private static void OnClosedWidthChange(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            SlidePanel panel = d as SlidePanel;

            if (panel != null)
                panel.Width = (double)e.NewValue;
        }

        #endregion Property Changes
    } 
```

我发现的一个小技巧是在未展开时将不透明度设置为 0，但将宽度设置为 10，这样用户就可以将鼠标放在屏幕的一侧，然后它会在大约一秒钟后出现。 . 欢呼。

编辑 - 根据要求.. AnimationHelper。

```
 public class AnimationHelper
    {
        public static Timeline DoubleAnimation(double from, double to, bool modifier, TimeSpan duration, DependencyProperty property)
        {
            DoubleAnimation animation = new DoubleAnimation();

            if (modifier)
            {
                animation.From = from;
                animation.To = to;

            }
            else
            {
                animation.To = from;
                animation.From = to;
            }

            animation.Duration = new Duration(duration);

            return animation;
        }

        public static Storyboard CreateDoubleAnimation<T>(T control, bool modifier, double from, double to, TimeSpan duration, DependencyProperty property) where T : Control
        {
            return
             AnimationHelper.CreateDoubleAnimation<T>(control, modifier,
                (p, a) =>
                {
                    a.From = from;
                    a.To = to;
                },
                (p, a) =>
                {
                    a.From = to;
                    a.To = from;
                }, duration, property);
        }

        public static Storyboard CreateDoubleAnimation<T>(T control, bool modifier, Action<T, DoubleAnimation> onTrue, Action<T, DoubleAnimation> onFalse, TimeSpan duration, DependencyProperty property) where T : Control
        {
            if (control == null)
                throw new ArgumentNullException("control");

            DoubleAnimation panelAnimation = new DoubleAnimation();

            if (modifier)
            {
                if (onTrue != null)
                    onTrue.Invoke(control, panelAnimation);

            }
            else
            {
                if (onFalse != null)
                    onFalse.Invoke(control, panelAnimation);
            }

            panelAnimation.Duration = new Duration(duration);

            Storyboard sb = new Storyboard();

            Storyboard.SetTargetName(panelAnimation, control.Name);

            Storyboard.SetTargetProperty(panelAnimation, new PropertyPath(property));

            sb.Children.Add(panelAnimation);

            return sb;
        }
    } 
```

# firefox - Amazon Cloudfront CDN 上的视频无法在 Firefox mediaelement.js 中播放

> ID：13030511
> 
> 赞同：1
> 
> 时间：2012-10-23T12:33:31.757
> 
> 标签：firefox, video, amazon, cdn, mediaelement.js

使用 W3 Total Cache，我刚刚在 Amazon Cloudfront CDN 上分发了一个视频，并一直在使用 mediaelement.js 对其进行测试。它在 Windows 7（Chrome 和 IE9）和 Windows XP Pro（Chrome 和 IE8）上运行良好。但是，它不能在 Windows 7 或 Windows XP 上的 Firefox 16.01 版中播放。在 Win 7 / Firefox 上，我看到海报和控件，单击播放并尝试播放，显示虚线下载圈，但未完成。在 Win XP / Firefox 上，我只看到一个黑色矩形 - 没有控件或任何东西。

如果我从安装了 mediaelement.js 的源服务器播放视频，Firefox 确实在 Win 7 中工作，即不是来自 Amazon Cloudfront CDN。它在 Win XP 中仍然存在问题 - 它可以播放视频，但无法通过鼠标激活控件。因此，它播放一次然后停止并且无法再次播放。

所以这似乎是 Firefox 和 Amazon Cloudfront CDN 的问题。有谁知道为什么 Firefox 不喜欢播放来自 Amazon Cloudfront CDN 的视频？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T10:37:21.697

检查你的视频。如果这是您唯一的格式，Firefox 不支持 mp4。也转换 webm 中的视频，并以与 mp4 文件相同的方式将其添加到您的文件中。

# ruby - 使用和不使用 Rails 的快速 (Rspec) 测试

> ID：13030514
> 
> 赞同：6
> 
> 时间：2012-10-23T12:33:47.200
> 
> 标签：ruby, rspec, tdd, stub, load-path

我有两节课：

1.Sale是ActiveRecord的子类；它的工作是将销售数据保存到数据库中。

```
class Sale < ActiveRecord::Base
  def self.total_for_duration(start_date, end_date)
    self.count(conditions: {date: start_date..end_date})
  end
  #...
end 
```

2.SalesReport是一个标准的Ruby类；它的工作是生成和绘制有关销售的信息。

```
class SalesReport
  def initialize(start_date, end_date)
    @start_date = start_date
    @end_date = end_date
  end

  def sales_in_duration
    Sale.total_for_duration(@start_date, @end_date)
  end
  #...
end 
```

因为我想使用 TDD 并且我希望我的测试运行*得非常快*，所以我为不加载 Rails 的 SalesReport 编写了一个规范：

```
require_relative "../../app/models/sales_report.rb"

class Sale; end
# NOTE I have had to re-define Sale because I don't want to
# require `sale.rb` because it would then require ActiveRecord.

describe SalesReport do
  describe "sales_in_duration" do
    it "calls Sale.total_for_duration" do
      Sale.should_receive(:total_for_duration)
      SalesReport.new.sales_in_duration
    end
  end
end 
```

这个测试在我运行时**有效**`bundle exec rspec spec/models/report_spec.rb`。

`bundle exec rake spec`但是，当我运行错误时，此测试失败`superclass mismatch for class Sale (TypeError)`。我知道错误正在发生，因为 Tap 由`sale.rb`规范定义并内联。

**所以我的问题是如果没有定义一个类，有没有办法存根（或模拟或双）一个类？** 这将允许我删除 inline `class Sale; end`，这感觉就像一个黑客。

如果没有，我如何设置我的测试，以便无论我运行`bundle exec rspec`还是运行它们都能正确运行`bundle exec rake spec`？

如果不是，我编写快速测试的方法是否错误？！

最后，我不想使用Spork。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T12:53:35.053

一个简单的方法是检查是否已经定义了“销售”

```
unless defined?(Sale)
  class Sale; end
end 
```

在您的测试中，销售也不必是一个类，所以：

```
unless defined?(Sale)
  Sale = double('Sale')
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T16:46:25.090

最近添加的 RSpec`stub_const`专为以下情况而设计：

```
describe SalesReport do
  before { stub_const("Sale", Class.new) }

  describe "sales_in_duration" do
    it "calls Sale.total_for_duration" do
      Sale.should_receive(:total_for_duration)
      SalesReport.new.sales_in_duration
    end
  end
end 
```

您可能还希望使用[rspec-fire](https://github.com/xaviershay/rspec-fire)来使用测试替身，而不是在加载真实类的情况下运行测试时`Sale`自动检查真实类中存在的所有模拟/存根方法（例如，当您运行测试套件时）：`Sale``Sale`

```
require 'rspec/fire'

describe SalesReport do
  include RSpec::Fire

  describe "sales_in_duration" do
    it "calls Sale.total_for_duration" do
      fire_replaced_class_double("Sale")
      Sale.should_receive(:total_for_duration)
      SalesReport.new.sales_in_duration
    end
  end
end 
```

如果你`total_for_duration`在真实`Sale`类上重命名，当你模拟该方法时，rspec-fire 会给你一个错误，因为它在真实类中不存在。

# eclipse - Eclipse中xml和xhtml文件切换git分支时显示未保存状态

> ID：13030516
> 
> 赞同：3
> 
> 时间：2012-10-23T12:33:53.780
> 
> 标签：eclipse, git

我在 Mac 上使用 JBoss Developer Studio (Eclipse Indigo)，当我在 Git 中切换分支时，我遇到了一个问题，即我的 xhtml 文件显示为未保存（选项卡中有一个星号表示已进行更改）。

我的 java 文件刷新得很好，并且我确实在“首选项”>“常规”>“工作区”中选中了“使用本机挂钩或轮询刷新”和“访问时刷新”。

我遇到的行为如下：

1) 假设我打开了多个 .java 和 .xhtml 文件。两者都将处于已保存状态（选项卡中没有星号表示需要保存的已修改文件）

2）我将在git中切换分支

3) .java 文件将正常刷新并保持保存状态，而 .xhtml 和 .xml 文件也将刷新，但将处于修改/未保存状态（顶部会有一个星号显示修改）

然后我必须手动保存每个文件以使它们处于保存状态。以前有没有其他人遇到过这个问题，或者对如何解决这个问题有任何想法？非常感谢提前。

# actionscript-3 - 无法在 as3 中加载 SWF

> ID：13030517
> 
> 赞同：0
> 
> 时间：2012-10-23T12:34:03.237
> 
> 标签：actionscript-3, flash, actionscript

我正在使用 Flash 和 as3。我是 as3 的新手。我试图加载和卸载 SWF 文件。

我的项目包含2个文件，一个是索引文件，另一个是动物文件。在索引页面中，我有动物按钮。当我单击此按钮时，动物 SWF 开始执行。但问题是当我点击动物 SWF 的索引按钮时，它不再显示索引页面，而是显示消息为

> 无法加载 SWF

我的索引页代码是：

> ```
> var urlReq:URLRequest = new URLRequest("animal/animal.swf");
> swfLoader.load(urlReq);
> swfLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, swfLoadComplete);
> swfLoader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR,
>     swfLoadError);
> function swfLoadComplete(evt:Event):void
> {
> var loader:Loader = Loader(evt.target.loader);
> addChild(loader.content);
> swfLoader.removeEventListener(Event.COMPLETE, swfLoadComplete);
> }
> function swfLoadError(evt:IOErrorEvent):void
> { 
>   trace("Unable to load swf ");
>   swfLoader.removeEventListener(IOErrorEvent.IO_ERROR, swfLoadError);
>   } 
> ```

那么如何从动物 SWF 加载索引 SWF 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:36:36.587

您可能忘记添加到显示列表。使用`addChild`.

```
var urlReq:URLRequest = new URLRequest("animal/animal.swf");
swfLoader.load(urlReq);
this.addChild(swfLoader); 
```

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html)

更新：我看到它没有加载。你有一个`IOErrorEvent.IO_ERROR`. 大多数情况下，这意味着该文件不位于该 url。检查位置或使用 http 调试器找出您尝试打开的位置。

# php - PHP-AJAX-JSON 注意：未定义索引：

> ID：13030519
> 
> 赞同：1
> 
> 时间：2012-10-23T12:34:07.990
> 
> 标签：php, ajax, json

我正在尝试制作一个用于发送谷歌地图坐标以填充 mysql 数据库的测试页面。我正在使用 ajax 将数据发送到 php。Firebug 显示数据正在发送。但是这个php错误出来了。并且 mysql 数据库在没有地图坐标的情况下填充。

这是 Ajax 函数：

```
function sendData(geodata){
    var hr = new XMLHttpRequest();
    hr.open("POST","getdata.php",true);
    hr.setRequestHeader("Content-type","application/json");

    if(hr.readyState==4 && hr.status==200){
            var data =  JSON.parse(hr.responseText);
            alert("Data received about "+data);
            }//end if

    hr.send("geodata="+geodata);
}//close sendData 
```

这是 PHP 页面。

```
 <?php
header("Content-Type : application/json");

$loc = $_POST["geodata"];

$username="root";
$password="";
$database="location";

$connection = mysql_connect('localhost',$username,$password);
if(!$connection){
    die('Unable to connect to the server '.mysql_error());
    }

$selectdb = mysql_select_db($database);
if(!$selectdb){
    die('Unable to connect to database'.mysql_error());
    }

$query = "INSERT INTO `location_data`(`ltlng`) VALUES ('".$loc."')";
$result = mysql_query($query);
if(!$result){
    die('Invalid query : '.mysql_error());
    }
?> 
```

然后出现以下错误。

```
( ! ) Notice: Undefined index: geodata in C:\wamp\www\IndustryProject\SampleDataGen\getdata.php on line 4 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:37:27.620

当您将数据作为查询字符串发布时，请尝试使用`application/x-www-form-urlencoded`内容类型，而不是`application/json`您当前的类型：

```
hr.setRequestHeader("Content-type","application/x-www-form-urlencoded"); 
```

# date - 修改日期未在 msg * 批处理中正确传输

> ID：13030523
> 
> 赞同：0
> 
> 时间：2012-10-23T12:34:29.890
> 
> 标签：date, batch-file

我有一个显示日期的批处理文件。日期已修改为仅显示数值（即没有日期名称，例如：ma、tu、we、th、fr、sa、su）这是使用以下代码片段完成的。

```
%date:~3-10% 
```

仅现在运行良好我希望它在一个消息框中但是以下不起作用

```
MSG * %date:~3-10% 
```

我想让我的消息框说（挂起实际日期）01-01-2012 而不是 %date:~3-10%

有人知道解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:10:53.037

您的子字符串语法错误，导致错误显示。它应该是：

```
MSG * %date:~3,10% 
```

你有一个`-`你想要的地方`,`。

请注意，您的代码取决于区域设置。它不适用于所有机器。

更可靠的方法是

```
for /f "delims=ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz " %%A in ("%date%") do msg * %%A 
```

我确信可以简化 DELIMS 选项，但我不知道所有可能的语言实际上需要哪些字符。

# javascript - 显示键盘时如何在 iPad Safari 中禁用屏幕偏移

> ID：13030524
> 
> 赞同：2
> 
> 时间：2012-10-23T12:34:41.267
> 
> 标签：javascript, html, ipad, safari, mobile-safari

我有一个在 ipad 上使用的 Web 应用程序。应用程序通常会保存在主屏幕上，并将在全屏模式下工作。我使用了以下元标记来禁用滚动、缩放和拖动：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

我不希望用户能够移动屏幕、滚动或缩放。一切正常，直到用户单击输入字段并出现虚拟键盘。当显示键盘时，我现在可以移动屏幕，屏幕也会从右侧偏移大约 10-15px。这很奇怪，我不想那样。我仍然希望键盘显示，但我不希望它破坏我的屏幕固定设置......有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:06:58.707

如果您有一些内容超出页面视图区域，则可能会发生这种情况。如果您将站点包含在设置了“溢出：隐藏”的块元素中，它应该防止这种行为。

您还需要添加以下代码以防止拖动。

```
document.addEventListener('touchmove', function(e){ e.preventDefault(); }); 
```

# asp.net - 查找过滤器搜索的字段或索引？

> ID：13030526
> 
> 赞同：0
> 
> 时间：2012-10-23T12:34:44.350
> 
> 标签：asp.net

我获取了一个大集合（35k+ - 产品列表）

```
for each item_cache in products_cache
    list.Add(New Products With {
        .product_id = item_cache.id,
        .product_name = item_cache.name,
        .moreHere = item_cache.moreHere,
        .moreHere = item_cache.moreHere,
        .moreHere = item_cache.moreHere,
        .moreHere = item_cache.moreHere
        })
next

return list.Tolist 
```

我们目前拥有的参数都是字符串（home.aspx?p_name='Shirts'）。

在我拥有列表集合之后，是通过字符串搜索还是通过索引搜索更好？

```
return list.where(function(c) c.product_name = 'Shirts') 
```

或者我应该先检索字符串的索引（PK）

```
Dim p_id As Integer = dataGetIdOfProduct('Shirts')

return list.where(function(c) c.product_id = p_id) 
```

# android - 如何通过 FTP 使用 Android SeekBar 进行文件上传和下载？

> ID：13030527
> 
> 赞同：0
> 
> 时间：2012-10-23T12:34:45.347
> 
> 标签：android

当我尝试使用 FTP 从服务器下载文件时遇到问题。我需要显示下载文件的搜索栏状态和互联网的下载速度。我能够显示 HTTP 的搜索栏状态和 Internet 速度，但对于 FTP，我无法执行相同的任务。在下面的附图中，我需要显示 FTP 和 HTTP 的搜索栏和网络速度。下面是我用于 HTTP 和 FTP 的源代码。我不知道我错过了哪里？

![在此处输入图像描述](../Images/a636bf448e18f7930d50f0036e78fcbb.png)

HTTP 代码：

```
 class DownloadFileAsync extends AsyncTask<String, String, String> {     //see the summary of asyncTask

        long duration, pk;
        private boolean sleep = false;
        private HashMap<String, Object> map;
        private ProgressBar bar;
        private TextView real_time, test_avg, peak, status;
        private ImageView pp;

        //constructor
        public DownloadFileAsync(HashMap<String, Object> map) {
            this.map = map;
            bar = (ProgressBar) map.get("bar");
            // trans = (TextView) map.get("trans");
            //real_time = (TextView) map.get("real_time");
            test_avg = (TextView) map.get("test_avg");
            //peak = (TextView) map.get("peak");
            status = (TextView) map.get("status");
            pp = (ImageView) map.get("pp");
        }

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
        }

        @Override
        protected String doInBackground(String... aurl) {
            int count = 0;
            try {
                updateUI(pp, R.drawable.pause);
                updateUI(status, "Connecting");
                URL url = new URL(map.get("url").toString());
                URLConnection conexion = url.openConnection();
                conexion.connect();

                final int lenghtOfFile = conexion.getContentLength();
                InputStream input = new BufferedInputStream(url.openStream());
                updateUI(status, "Connected");
                OutputStream output = new FileOutputStream(Environment.getExternalStorageDirectory()
                                    + File.separator
                                    + Info.getInfo(con).HTTP_DOWNLOAD_FILE_NAME);
                byte data[] = new byte[1024];
                long total = 0;
                final long started = System.currentTimeMillis();
                long sleepingTime= 0;
                System.out.println("started time --"+started);
                updateUI(status, "Downloading");
                while ((count = input.read(data)) != -1) {
                    while (sleep) {
                        Thread.sleep(1000);
                        sleepingTime +=1000;
                    }
                    total += count;
                    final int progress = (int) ((total * 100) / lenghtOfFile);
                    final long speed = total;
                    duration = ((System.currentTimeMillis() - started)-sleepingTime) / 1000;
                    runOnUiThread(new Runnable() {
                        public void run() {
                            bar.setProgress(progress);
                            // trans.setText("" + progress);
                            //duration = ((System.currentTimeMillis() - started)-sleepingTime) / 1000;

                            //real_time.setText(duration + " secs");
                            if (duration != 0) {
                                test_avg.setText((speed / duration) / 1024 + " kbps");
                                if (pk <= (speed / duration) / 1024)
                                {
                                    pk = (speed / duration) / 1024;
                                }
                                //peak.setText(pk + " kbps");
                            }
                        }
                    });
                    output.write(data, 0, count);
                }
                output.flush();
                output.close();
                input.close();
                updateUI(status, "Success");
            } 
            catch (final Exception e) {
                e.printStackTrace();
                updateUI(status, "Failed");
            }
            updateUI(pp, R.drawable.resume);
            return null;
        }

        private void updateUI(final TextView tv, final String str) {
            runOnUiThread(new Runnable() {
                public void run() {
                    tv.setText(str);
                }
            });
        }

        private void updateUI(final ImageView iv, final int id) {                   // may create problem
            runOnUiThread(new Runnable() {
                public void run() {
                    iv.setImageResource(id);
                }
            });
        }

        public void gotosleep(boolean val) {
            sleep = val;
        }

        public boolean areYouSleeping() {
            return sleep;
        }

        @Override
        protected void onPostExecute(String unused) {

            try {
                //System.out.println("Info.getInfo(con).data.indexOf(map)==="+Info.getInfo(con).data.indexOf(map)+"   map  "+map);
                if (!PARALLEL_MODE       //for sequence mode
                        && (Info.getInfo(con).data.indexOf(map) + 1) <= Info.getInfo(con).data.size() 
                        && testRunning) {
                    /*System.out.println("Info.getInfo(con).data.indexOf(map) + 1 "+Info.getInfo(con).data.indexOf(map) + 1
                            +"   Info.getInfo(con).data.size()   "+Info.getInfo(con).data.size()+" testRunning   "+testRunning);
                    System.out.println("Info.getInfo(con).data.indexOf(map)==="+Info.getInfo(con).data.indexOf(map)+"   map  "+map);*/

                    System.out.println("asynclist   "+asynclist.size());
                    asynclist.remove(0);    //asynclist contains objects of (downloadAsync(map))
                    if(asynclist.size() > 0){

                        System.out.println("tlist in post execute+++"+tlist);
                        //DownloadFileAsync dfa = new DownloadFileAsync(tlist.get(0));
                        DownloadFileAsync dfa = (DownloadFileAsync) asynclist.get(0);
                        dfa.execute();
                        tlist.remove(0);
                    }
                    else{
                        startTests();
                    }
                } 
                else if (PARALLEL_MODE   && stopCount < asynclist.size() && testRunning) {  //for parallel mode
                    System.out.println("stopCount before condition= " + stopCount);
                    if (stopCount == asynclist.size() -1 && testRunning) {
                        System.out.println("stopCount inside 1st condition= " + stopCount);
                        stopCount = 0;
                        // stopTests(0);
                        startTests();
                        System.out.println("Tests Started");
                    } 
                    else {
                        stopCount++;
                        System.out.println("stopCount after increment = " + stopCount);
                        ;
                    }
                }
            } 
            catch (Exception ed) {
                ed.printStackTrace();
                go.setText(R.string.go);
                //testRunning = false;
            }
        }
    }

For FTP:--

class FTPAsync extends AsyncTask<String, String, String> {
        //private int mode = -1;
        //added
        long duration, pk;
        private boolean sleep1 = false;
        private HashMap<String, Object> map;
        private ProgressBar bar;
        private TextView real_time, test_avg, peak, status;
        private ImageView pp;
        //
        public FTPAsync(int mode) {
            //  this.mode = mode;
        }

        //added
        public FTPAsync(HashMap<String, Object> map) {
            //Toast.makeText(con, "ftpAsync constructer is called" ,Toast.LENGTH_SHORT).show();
            this.map = map;
            bar = (ProgressBar) map.get("bar");
            // trans = (TextView) map.get("trans");
            //real_time = (TextView) map.get("real_time");
            test_avg = (TextView) map.get("test_avg");
            //peak = (TextView) map.get("peak");
            status = (TextView) map.get("status");
            pp = (ImageView) map.get("pp");
        }

        //
        @Override
        protected void onPreExecute() {
            //Toast.makeText(con, "onPreExecute() is called" ,Toast.LENGTH_SHORT).show();
            super.onPreExecute();
        }

        @Override
        protected String doInBackground(String... arg0) {
            int count = 0;
            FTPClient ObjFtpCon = new FTPClient();
            //Toast.makeText(con, "FTPasync doInBackground() is called" ,Toast.LENGTH_SHORT).show();
            try {
                runOnUiThread(new Runnable() {
                    public void run() {

                        bar.setProgress(0);
                        //real_time.setText(0 + " secs");
                        //test_avg.setText(0+ " kbps");                     
                        //peak.setText(0+" kbps");
                    }
                });
                updateUI(pp, R.drawable.pause);
                //ObjFtpCon.connect("ftp.customhdclips.com");
                ObjFtpCon.connect("ftp."+map.get("url").toString());
                updateUI(status, "Connecting");

                //if (ObjFtpCon.login("fstech@customhdclips.com", "fstech123")) {
                if (ObjFtpCon.login(map.get("username").toString(), map.get("password").toString())) {  
                    updateUI(status, "Connected");
                    // toast("Connected to FTP Server : ftp.customhdclips.com");
                    ObjFtpCon.enterLocalPassiveMode(); // important!
                    ObjFtpCon.cwd("/");// to send the FTP CWD command to the server, receive the reply, and return the reply code. 

                    //if (mode == 0) {
                    if(Integer.parseInt((map.get("oprn").toString()))== 0){ 
                        // Download
                        System.out.println("download test is called");
                        File objfile = new File(
                                Environment.getExternalStorageDirectory()
                                + File.separator + "/logo.png");

                        objfile.createNewFile();
                        FileOutputStream objFos = new FileOutputStream(objfile);
                        boolean blnresult = ObjFtpCon.retrieveFile("/logo.png",
                                objFos);
                        objFos.close();
                        if (blnresult) {
                            // toast("Download succeeded");
                            // toast("Stored at : " +
                            // objfile.getAbsolutePath());
                        }

                    } 

                    else {
                        // Upload
                        System.out.println("upload test is called");
                        //Toast.makeText(con, "upload FTP test is called", Toast.LENGTH_SHORT).show();
                        //ContextWrapper context = null;
                        //assetManager= context.getAssets();

                        assetManager = getResources().getAssets();
                        input1 = assetManager.open("hello.txt");

                        final long started = System.currentTimeMillis();
                        int size = input1.available();
                        //byte[] buffer = new byte[size];
                        byte dataByte[] = new byte[1024];
                        //input1.read(buffer);

                        //String data = "ZK DATA TESTER TEST DATA1sdfsdf";
                        String data = input1.toString();
                        System.out.println("dat value is........"+data);
                        final int lenghtOfFile = data.getBytes().length;
                        //final int lenghtOfFile = input1.getBytes().length;
                        System.out.println("length of file....."+lenghtOfFile);
                        ByteArrayInputStream in = new ByteArrayInputStream(
                                data.getBytes());

                        //toast("Uploading /test.txt"); 
                        //Toast.makeText(con,"File Size : " +data.getBytes().length + " bytes",Toast.LENGTH_SHORT).show();
                        //byte b[] = new byte[1024];

                        long total = 0;
                        long sleepingTime= 0;
                        System.out.println("started time --"+started);
                        updateUI(status, "Uploading");
                        while ((count = in.read(dataByte)) != -1)
                        {   
                            System.out.println("read value is...."+in.read(dataByte));
                            while (sleep1) {
                                Thread.sleep(1000);
                                System.out.println("ftp upload is in sleeping mode");
                                sleepingTime +=1000;    
                            }
                            System.out.println("Total count --"+count);
                            total += count;

                            System.out.println("Only Total --"+total);

                            final int progress = (int) ((total * 100) / lenghtOfFile);
                            final long speed = total;
                            //duration = ((System.currentTimeMillis() - started)-sleepingTime) / 1000;

                            boolean result = ObjFtpCon.storeFile("/test.txt", input1);
                            //boolean result = ObjFtpCon.storeFile(map.get("file_address").toString()+"/test.txt", input1);

                            duration = ((System.currentTimeMillis() - started)-sleepingTime) / 1000;
                            runOnUiThread(new Runnable() {
                                public void run() {

                                    bar.setProgress(progress);
                                    // trans.setText("" + progress);
                                    //duration = ((System.currentTimeMillis() - started)-sleepingTime) / 1000;
                                    //duration = ((System.currentTimeMillis() - started)-sleepingTime) / 1000;  
                                    //real_time.setText(duration + " secs");
                                    if (duration != 0) {
                                        test_avg.setText((((speed / duration)*1000)*0.0078125)
                                                + " kbps");
                                        /*if (pk <= (speed / duration) / 1024) {
                                        pk = (speed / duration) / 1024;
                                    }*/
                                        if (pk <= ((speed / duration)*1000)*0.0078125) {
                                            pk = (long)(((speed / duration)*1000)*0.0078125);
                                        }
                                        //peak.setText(pk + " kbps");
                                    }
                                }
                            });
                            //in.close();
                            if (result) {
                                updateUI(status, "Uploaded");
                                // toast("Uploading succeeded");
                                // toast("Uploaded at /test.txt");
                                //duration = ((System.currentTimeMillis() - started)-sleepingTime) / 1000;
                                System.out.println("curreent time..... "+System.currentTimeMillis());
                                System.out.println("started time --"+started);
                                System.out.println("sleep tome...."+sleepingTime);
                                System.out.println("duration is....."+duration);
                                /*runOnUiThread(new Runnable() {
                                public void run() {
                                    bar.setProgress(progress);
                                    // trans.setText("" + progress);
                                    //duration = ((System.currentTimeMillis() - started)-sleepingTime) / 1000;

                                    real_time.setText(duration + " secs");
                                    if (duration != 0) {
                                        test_avg.setText((speed / duration) / 1024
                                                + " kbps");
                                        if (pk <= (speed / duration) / 1024) {
                                            pk = (speed / duration) / 1024;
                                        }
                                        peak.setText(pk + " kbps");
                                    }
                                }
                            });*/
                            }
                            /*while(!result){Thread.sleep(1000);}*/
                        }
                        in.close();
                    }
                }

                else{
                    System.out.println("password entered is incorrect");
                    //Toast.makeText(con, "Username or/and password is incorrect", Toast.LENGTH_SHORT).show();
                }
            } 
            catch (Exception e) {
                e.printStackTrace();
                // toast(e.getLocalizedMessage());
            }

            try {
                ObjFtpCon.logout();
                ObjFtpCon.disconnect();
            } 
            catch (IOException e) {
                e.printStackTrace();
                // toast(e.getLocalizedMessage());
            }
            return null;
        }

        @override
        protected void onPostExecute(String unused) {
            try {
                //System.out.println("Info.getInfo(con).data.indexOf(map)==="+Info.getInfo(con).data.indexOf(map)+"   map  "+map);
                if (!PARALLEL_MODE       //for sequence mode
                        && (Info.getInfo(con).data.indexOf(map) + 1) <= Info.getInfo(con).data.size() 
                        && testRunning) {

                    System.out.println("ftpasynclist   "+ftpasynclist.size());
                    ftpasynclist.remove(0);    //asynclist contains objects of (FTPAsync(map))
                    if(ftpasynclist.size() > 0){

                        System.out.println("tlist in post execute+++"+ftplist);
                        //DownloadFileAsync dfa = new DownloadFileAsync(tlist.get(0));
                        FTPAsync dfa = (FTPAsync)ftpasynclist.get(0);
                        dfa.execute();
                        ftplist.remove(0);
                    }
                    else{
                        startTests();
                    }

                } 
                else if (PARALLEL_MODE    //for parallel mode       
                        && ftpStopCount <ftpasynclist.size() 
                        && testRunning) {
                    System.out.println("stopCount before condition= " +ftpStopCount);
                    if (ftpStopCount == ftpasynclist.size() -1 && testRunning) {
                        System.out.println("stopCount inside 1st condition= " + ftpStopCount);
                        ftpStopCount = 0;
                        // stopTests(0);
                        startTests();
                        System.out.println("Tests Started");
                    } 
                    else {
                        ftpStopCount++;
                        System.out.println("stopCount after increment = " + ftpStopCount);
                        ;
                    }
                }

            } 
            catch (Exception ed) {
                ed.printStackTrace();
                go.setText(R.string.go);
                //testRunning = false;
            }
            super.onPostExecute(unused);
        }
        private void updateUI(final TextView tv, final String str) {
            runOnUiThread(new Runnable() {
                public void run() {
                    tv.setText(str);
                }
            });
        }

        private void updateUI(final ImageView iv, final int id) {                   // may create problem
            runOnUiThread(new Runnable() {
                public void run() {
                    iv.setImageResource(id);
                }
            });
        }
        public void gotosleep(boolean val) {
            sleep1 = val;
        }

        public boolean areYouSleeping() {
            return sleep1;
        }

    } 
```

# java - 错误：无法访问 org.apache.hadoop.mapred.MapReduceBase

> ID：13030530
> 
> 赞同：0
> 
> 时间：2012-10-23T12:35:00.687
> 
> 标签：java, hadoop, java-native-interface, mapreduce, javah

我编写了这个 Java hadoop 程序，它将执行文件的并行索引。该文件是在 eclipse 中创建的

```
package org.myorg;

import java.io.*;
import java.util.*;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.conf.*;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapred.*;
import org.apache.hadoop.util.*;

public class ParallelIndexation {

public static class Map extends MapReduceBase implements Mapper<LongWritable, Text, Text, IntWritable> { 
     private final static IntWritable zero = new IntWritable(0); 
     private Text word = new Text();
     public void map(LongWritable key, Text value, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException { 
        String line = value.toString();
        int CountComputers;
        //DataInputStream ConfigFile = new DataInputStream( new FileInputStream("countcomputers.txt"));
        FileInputStream fstream = new FileInputStream("/usr/countcomputers.txt"); // путь к файлу
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String result = br.readLine(); // читаем как строку
        CountComputers = Integer.parseInt(result); // переводим строку в число
        //CountComputers=ConfigFile.readInt();
        in.close();
        fstream.close();
        ArrayList<String> paths = new ArrayList<String>();
        StringTokenizer tokenizer = new StringTokenizer(line, "\n");
        while (tokenizer.hasMoreTokens()) 
        {
          paths.add(tokenizer.nextToken());
        }
        String[] ConcatPaths= new String[CountComputers];
        int NumberOfElementConcatPaths=0;
        if (paths.size()%CountComputers==0)
        {
            for (int i=0; i<CountComputers; i++)
            {
                ConcatPaths[i]=paths.get(NumberOfElementConcatPaths);
                NumberOfElementConcatPaths+=paths.size()/CountComputers;
                for (int j=1; j<paths.size()/CountComputers; j++)
                {
                    ConcatPaths[i]+="\n"+paths.get(i*paths.size()/CountComputers+j);
                }
            }
        }
        else
        {
            NumberOfElementConcatPaths=0;
            for (int i=0; i<paths.size()%CountComputers; i++)
            {
                ConcatPaths[i]=paths.get(NumberOfElementConcatPaths);
                NumberOfElementConcatPaths+=paths.size()/CountComputers+1;              
                for (int j=1; j<paths.size()/CountComputers+1; j++)
                {
                    ConcatPaths[i]+="\n"+paths.get(i*(paths.size()/CountComputers+1)+j);
                }           
            }
            for (int k=paths.size()%CountComputers; k<CountComputers; k++)
            {
                ConcatPaths[k]=paths.get(NumberOfElementConcatPaths);
                NumberOfElementConcatPaths+=paths.size()/CountComputers;                
                for (int j=1; j<paths.size()/CountComputers; j++)
                {
                    ConcatPaths[k]+="\n"+paths.get((k-paths.size()%CountComputers)*paths.size()/CountComputers+paths.size()%CountComputers*(paths.size()/CountComputers+1)+j);
                }                   
            }
        }
        //CountComputers=ConfigFile.readInt();
        for (int i=0; i<ConcatPaths.length; i++)
        {
            word.set(ConcatPaths[i]);
            output.collect(word, zero);
        }
     }
}

public static class Reduce extends MapReduceBase implements Reducer<Text, IntWritable, Text, LongWritable> { 
    public native long Traveser(String Path);
    public native void Configure(String Path);
    public void reduce(Text key, <Iterator>IntWritable value, OutputCollector<Text, LongWritable> output, Reporter reporter) throws IOException { 
        long count;
        String line = key.toString();
        ArrayList<String> ProcessedPaths = new ArrayList<String>();
        StringTokenizer tokenizer = new StringTokenizer(line, "\n");
        while (tokenizer.hasMoreTokens()) 
        {
          ProcessedPaths.add(tokenizer.nextToken());
        }       
        Configure("/etc/nsindexer.conf");
        for (int i=0; i<ProcessedPaths.size(); i++)
        {
            count=Traveser(ProcessedPaths.get(i));
        }
        output.collect(key, new LongWritable(count));
      }
    static
    {
        System.loadLibrary("nativelib");
    } 
}

public static void main(String[] args) throws Exception { 
      JobConf conf = new JobConf(ParallelIndexation.class); 
      conf.setJobName("parallelindexation");
      conf.setOutputKeyClass(Text.class);
      conf.setOutputValueClass(LongWritable.class);
      conf.setMapperClass(Map.class);
      conf.setCombinerClass(Reduce.class);
      conf.setReducerClass(Reduce.class);
      conf.setInputFormat(TextInputFormat.class);
      conf.setOutputFormat(TextOutputFormat.class);
      FileInputFormat.setInputPaths(conf, new Path(args[0]));
      FileOutputFormat.setOutputPath(conf, new Path(args[1]));
      JobClient.runJob(conf);
  } 
} 
```

我通过命令编译了程序

```
javac -classpath /export/hadoop-1.0.1/hadoop-core-1.0.1.jar -d folder/classes folder/src/ParallelIndexation.java, 
```

然后对于本机方法，我尝试创建 .h 文件

```
root@one:/export/hadoop-1.0.1/folder/classes/# javah -jni org.myorg.ParallelIndexation 
```

收到以下错误

```
Error: cannot access org.apache.hadoop.mapred.MapReduceBase
  class file for org.apache.hadoop.mapred.MapReduceBase not found 
```

在目录 /export/hadoop-1.0.1/folder/classes/org/myorg 中有 3 个文件：ParallelIndexation$Map.class、ParallelIndexation$Reduce.class、ParallelIndexation.class。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:32:51.993

`javah`找不到`org.apache.hadoop.mapred.MapReduceBase`。我猜那堂课在`/export/hadoop-1.0.1/hadoop-core-1.0.1.jar`. 因此，您还必须将其添加到`javah`的类路径中：`javah -classpath /export/hadoop-1.0.1/hadoop-core-1.0.1.jar -jni org.myorg.ParallelIndexation`

# hive - 在 hive 查询中计算 %

> ID：13030531
> 
> 赞同：2
> 
> 时间：2012-10-23T12:35:02.670
> 
> 标签：hive, hiveql

通过以下查询，我可以每天为每个客户获得批准的交易。

```
select 
    q1.client_id, 
    q1.receive_day, 
    count(q1.client_id) as cnt 
from 
    (select * from sale where response=00) q1 
group by 
    q1.client_id, q1.receive_day 
```

我想得到批准%，即approval_per，是100*(count(client_id)/response)，而count(client_id)是批准交易的客户数量。

响应是整个响应的计数，包括所有值（已批准和未批准）。我可以通过 得到响应`select count(response) from sale`，但是如何在同一查询中计算 % 是现在面临的问题。我尝试了一些选项，因为它不起作用，到达了用户组。

所以我预期的输出格式是 client_id,receive_day,count(client_id),approval_per。

非常感谢您的任何帮助

感谢和问候，

dti

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:00:38.727

您可以简单地添加另一个计算该计数的子查询。同样对于您现在拥有的查询，似乎没有必要拥有该子查询（q1）。

我还假设您希望您的百分比应该是每个客户负责的交易的百分比。即给定客户的交易数量除以总交易数量。

```
SELECT 
    s.client_id, 
    s.receive_day, 
    count(s.client_id) as cnt,
    100 * (count(s.client_id) / q1.total)  
FROM 
    sale s,
    (select count(*) total from sale) q1
WHERE
    response = 00
GROUP BY 
    s.client_id, s.receive_day 
```

# java - 来自 java 代码的工作流暂停

> ID：13030533
> 
> 赞同：1
> 
> 时间：2012-10-23T12:35:10.660
> 
> 标签：java, hadoop, workflow, oozie

我正在运行一个包含 java 代码的工作流，该代码又启动另一个 oozie 工作流。主要工作流程工作正常，但从 java 代码启动的工作流程始终处于暂停状态。我无法恢复它，因为它的用户是映射的，而不是我。知道可能是什么问题吗？

这是我的主要工作流程

```
<java>
        <job-tracker>${jobTracker}</job-tracker>
        <name-node>${nameNode}</name-node>
        <main-class>com.last.play.LaunchJob</main-class>
        <arg>currentUser=${currentUser}</arg>
     </java> 
```

这是java代码：

```
 Map<String, String> commandArgs = getActionArgs(args);

    Path appPropertyPath = new Path("/user/cmahajan/app.properties");
    Path jobPropertyPath = new Path("/user/cmahajan/job.properties");
    OozieClient wc = new OozieClient("http://host07.com:11000/oozie");

    String userName = commandArgs.get("currentUser");
    System.out.println("User Name recieved ::" + userName);
    Configuration trial = new Configuration();
    FileSystem fs = FileSystem.get(trial);

    Properties conf = wc.createConfiguration();
    Properties jobProperties = new Properties();
    Properties appProperties = new Properties();
    appProperties.load(fs.open(appPropertyPath));
    String version = appProperties.getProperty("version");
    jobProperties.load(fs.open(jobPropertyPath));

    for (Object key : jobProperties.keySet()) {
        String propValue = jobProperties.getProperty((String) key);
        propValue = propValue.replaceAll("\\$\\{user.name\\}", userName);
        conf.setProperty((String) key, propValue);
        System.out.println("Key ::" + key);
        System.out.println("Value ::" + propValue);
        System.out.println(" ===================");
    }
    String appsRoot = "${wfsBasePath}/" + version + "/apps";
    conf.setProperty("appsRoot", appsRoot);
    try {
        String jobId = wc.run(conf);

        System.out.println("Workflow job submitted");

        while (wc.getJobInfo(jobId).getStatus() == WorkflowJob.Status.RUNNING) {
            System.out.println("Workflow job running ...");
            Thread.sleep(10 * 1000);
        }
        System.out.println("Workflow job completed ...");
        System.out.println(wc.getJobInfo(jobId));
    } catch (OozieClientException oozieClientException) {
        oozieClientException.printStackTrace();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-24T12:22:43.327

您可以使用 UserGroupInformation 来设置用户。

```
UserGroupInformation ugi = UserGroupInformation.createRemoteUser(username);
ugi.doAs(new PrivilegedExceptionAction<MyMapReduceWrapperClass>() {
public Object run() throws Exception {
    MyMapReduceWrapperClass mr = new MyMapReduceWrapperClass();
    ToolRunner.run(mr, null);
    return mr;
}
}); 
```

# windows-phone-7 - WP7 页面似乎还活着

> ID：13030535
> 
> 赞同：2
> 
> 时间：2012-10-23T12:35:14.003
> 
> 标签：windows-phone-7

我读到 WP7 使用 backstack 来表示应用程序的后退导航。

在我的应用程序中，有 2 页

1.  第1页：有局部变量int count1，和DispatcherTimer timer1
2.  第2页：有局部变量int count2，和DispatcherTimer timer2

page1 中 timer1 的回调用于记录 count1++ 值

page2 中 timer2 的回调用于记录 count2++ 值。

**问题 1** 在第 1 页中，我启动 timer1，然后导航到第 2 页。

我认为 page1 被推到后台堆栈并且它处于非活动状态。但是 timer1 仍然在 count1 递增的情况下运行？

**问题2**在page2 中，我启动timer2 并返回page1。

我认为 page2 是处置。但是 timer2 仍然在 count2 递增的情况下运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:51:15.157

该页面可能不在视图中，但它仍在运行 - 只是没有在屏幕上绘制。当您返回页面时，您拥有的任何变量仍然存在。类似地，像 DispatcherTimer 这样的任何东西都将继续存在，*并*继续滴答作响，直到您停止它为止。

一个直接的问题是，如果您不保存对计时器的引用 - 如果不保存，您将无法停止它！无论如何，这样的事情会起作用：

```
protected void override OnNavigatedFrom(Object sender, NavigationEventArgs e){
    if (myTimer != null){ timer.Stop();}
    e.OnNavigatedFrom(sender,e);
}

protected void override OnNavigatedTo(Object sender, NavigationEventArgs e){
    //create, or turn on your timer, etc.
    e.OnNavigatedTo(sender,e);
} 
```

这个想法基本上就是您描述的方式：离开页面时，“暂停”计时器。当你回来时，重新打开计时器。

对于问题 2：

当你创建一个定时器时，它的*变量*可能是本地的，但是`event`从定时器创建的变量是全局的——`dispose`当你完成它时你需要它。这意味着不仅要停止它，还要移除事件本身——

```
myTimer.Tick -= onTimerTick; // where onTimerTick is the name of your Event 
```

最后，

当您的应用程序获取时`Deactivated`，您的计时器将停止并终止。您应该确保在发生这种情况时重新启动/重新创建您拥有的任何计时器。如果您要对某些内容进行*计数*，请记住存储计数，以便您可以跟踪用户离开的位置。

# javascript - Kendo UI - 无限滚动在 GET twitter user_timeline 上不起作用

> ID：13030539
> 
> 赞同：0
> 
> 时间：2012-10-23T12:35:27.567
> 
> 标签：javascript, json, kendo-ui

我正在尝试从 twitter 获取用户的时间线并将其显示在列表视图中。目前我有一个列表视图，显示用户时间轴中的前 10 条推文。但是无限滚动功能不起作用！当您到达页面底部时，不会显示任何动画，也不会通过 http 请求调用 twitter（我使用过 wireshark）。下面是我的源代码：

```
function loadTwitterFeed() {

var dataSource = new kendo.data.DataSource({
    transport: {
        read: {
            url: "http://api.twitter.com/1/statuses/user_timeline.json", // the remove service url
            dataType: "jsonp" // JSONP (JSON with padding) is required for cross-domain AJAX
        },
        parameterMap: function(options) {
            return {
                screen_name: "USER_NAME",
                count: 10,
                since_id: options.since_id, //additional parameters sent to the remote service
                max_id: options.max_id //additional parameters sent to the remove service
            };
        }
    }
});

$("#twitter-feed").kendoMobileListView({
    dataSource: dataSource,
    template: $("#twitter-template").text(),
    appendOnRefresh: true,
    pullToRefresh: true,
    //addition parameters which will be passed to the DataSource's read method
    pullParameters: function(item) { //pass first data item of the ListView
        return {
            since_id: item.id_str
        };
    },
    endlessScroll: true,
    //addition parameters which will be passed to the DataSource's next method
    endlessScrollParameters: function(firstOrigin) {
        if (firstOrigin) {
            return {
                max_id: firstOrigin.id_str
            };
        }
    }
});

} 
```

它类似于 twitter 搜索演示，但我已经从代码中删除了 serverPaging，因为 Twitter 很快就会摆脱页面，而只使用 max_id 和 since_id。我没有运气搜索过文档，它应该可以工作！

有人知道出了什么问题吗？

谢谢，托马斯

链接到 user_timeline 上的 Twitter 页面：[https ://dev.twitter.com/docs/api/1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)

示例 Json 请求在复制并粘贴到浏览器时有效（只需将 USER_NAME 替换为有效的）：[http ://api.twitter.com/1/statuses/user_timeline.json?screen_name=USER_NAME&count=10](http://api.twitter.com/1/statuses/user_timeline.json?screen_name=USER_NAME&count=10)

# jquery-ui - 使用 jQuery 进度条的奇怪事情

> ID：13030544
> 
> 赞同：2
> 
> 时间：2012-10-23T12:35:42.280
> 
> 标签：jquery-ui, colors, jquery-ui-progressbar

我试图在 jQuery 进度条中只使用一种颜色，但它填充了整个 div。

这就是问题所在，我只是使用这些功能。

```
$(document).ready(function(){
    $("#progressbar").css({ "background": '#FF0000' });
    $("#progressbar").progressbar({  value: 10  });    
}); 
```

[http://jsfiddle.net/jtf7M/1/](http://jsfiddle.net/jtf7M/1/)

我如何一步一步地正确填充？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:02:42.093

缺少 CSS 文件。将[http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css](http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css)添加到您的资源中，就可以了。

编辑：

如果您不想加载整个 CSS 文件，只需在您的页面[http://jsfiddle.net/jtf7M/21/](http://jsfiddle.net/jtf7M/21/)中添加此代码：

```
<style>
    .ui-progressbar { height:2em; text-align: left; overflow: hidden; }
    .ui-progressbar .ui-progressbar-value {margin: -1px; height:100%; }
    .ui-widget-content {
        border: 1px solid #AAA;
        background: white;
    }
    .ui-corner-all {
        -moz-border-radius: 4px/*{cornerRadius}*/;
        -webkit-border-radius: 4px/*{cornerRadius}*/;
        -khtml-border-radius: 4px/*{cornerRadius}*/;
        border-radius: 4px/*{cornerRadius}*/;
    }
    .ui-widget-header {
        border: 1px solid #AAA/*{borderColorHeader}*/;
        background: #CCC;
    }
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:42:36.163

我认为那个 jsfiddle 上没有 jQuery ui lib 加载。但你做得对。

[http://jqueryui.com/progressbar/#animated](http://jqueryui.com/progressbar/#animated)

# javascript - 如何用 jQuery 定义函数参数

> ID：13030548
> 
> 赞同：0
> 
> 时间：2012-10-23T12:35:58.377
> 
> 标签：javascript, jquery

我有一些语法问题......这是我的小脚本：

```
$('.basket_details, .advanced_search_panel, .producers_major_panel').hover(function () {
    mouse_is_inside = true;
}, function () {
    mouse_is_inside = false;
});
$("body").mouseup(function () {
    if (mouse_is_inside) {
        $('.advanced_search_panel, .producers_major_panel').fadeOut('slow');
        $('.basket_details').slideUp('slow');
    }
}); 
```

一切都很好，但我的 chrome 控制台尖叫我有语法错误，并且`mouse_is_inside`没有定义，如何纠正这个错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T12:37:45.417

尝试关闭：

```
(function() {

  var mouse_is_inside = false;

$('.basket_details, .advanced_search_panel, .producers_major_panel').hover(function () {
    mouse_is_inside = true;
}, function () {
    mouse_is_inside = false;
});
$("body").mouseup(function () {
    if (mouse_is_inside) {
        $('.advanced_search_panel, .producers_major_panel').fadeOut('slow');
        $('.basket_details').slideUp('slow');
    }
});

})(); 
```

这将允许您在函数范围内使用“mouse_is_inside”。它还阻止您使用全局变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T12:37:51.780

你必须添加

```
var mouse_is_inside = false; 
```

在代码的开头将其标记为全局变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:37:38.070

你的`mouse_is_inside`变量不是全局的。您需要在函数之外定义它，以便两组都能够访问它。

例子：

```
var mouse_is_inside = false;

$('.basket_details, .advanced_search_panel, .producers_major_panel').hover(function () {
    mouse_is_inside = true;
}, function () {
    mouse_is_inside = false;
});
$("body").mouseup(function () {
    if (mouse_is_inside) {
        $('.advanced_search_panel, .producers_major_panel').fadeOut('slow');
        $('.basket_details').slideUp('slow');
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T12:41:08.000

**在全局窗口范围内**定义变量 mouse_is_inside 。所以它可以在所有功能中访问。

**或者如果您需要受限范围**，请尝试使用@Lloyd 建议的**Closure**

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T12:43:23.013

**试试这个：**

```
$(document).on({
    mouseenter: function () {
        mouse_is_inside = true;
    },

    mouseleave: function () {
        mouse_is_inside = false;
    }
}, '.basket_details, .advanced_search_panel, .producers_major_panel');

$("body").mouseup(function () {
    if (mouse_is_inside) {
        $('.advanced_search_panel, .producers_major_panel').fadeOut('slow');
        $('.basket_details').slideUp('slow');
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T15:15:47.843

在此示例中根本不需要使用变量 mouse_is_inside（除非您在其他函数中使用它做其他事情，最好将其完全删除，因为它的效率较低并且只会使代码混乱）在任何情况下都不要使用在您的示例中，它只是通过以下方式调用另一个函数

```
$(document).ready(function(){
$('.basket_details, .advanced_search_panel, .producers_major_panel').hover(function () {
            /*add the mouse_is_inside=false; here if you need it for other functionality but dont use it for hide your panels*/
    fold(); /*calling this function works just like your example but it fixes the problem and makes you use 1 less variable which is better*/
});
function fold(){
$("body").mouseup(function () {
        $('.advanced_search_panel, .producers_major_panel').fadeOut('slow');
        $('.basket_details').slideUp('slow');
});
}

}); 
```

您也可以使用 click 实现相同的功能，因为您必须先将鼠标悬停在元素上才能单击它。（如果其他函数调用单击等，有时情况可能不正确，但希望在您的示例中它仍然可以完成工作）

```
$('.basket_details, .advanced_search_panel, .producers_major_panel').click(function(){
        $('.advanced_search_panel, .producers_major_panel').fadeOut('slow');
        $('.basket_details').slideUp('slow');
}); 
```

格鲁卡斯，

Niech Moc będzie z tobą**

# database - 清理 couchdb 并重新启动

> ID：13030551
> 
> 赞同：14
> 
> 时间：2012-10-23T12:36:16.847
> 
> 标签：database, couchdb

请问什么是清理命令`CouchDB`？如果我想`disable`和`re-start`我的 CouchDB 什么是命令？

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-23T12:41:16.160

CouchDB 可以从`/etc/init.d/couchdb`或`/etc/rc.d/couchdb`启动脚本启动/停止/重新启动。

（此启动脚本文件可能位于系统的其他位置。）

你会做这样的事情：

1.  停止：`/etc/init.d/couchdb stop`
2.  重启：`/etc/init.d/couchdb restart`

就清洁而言，我认为您的意思是压实。这最容易通过 Futon 完成，默认情况下位于此处：`http://localhost:5984/_utils`

以管理员身份登录 Futon，导航到您的数据库，将有链接以压缩数据库。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-06-15T05:32:16.387

您可以按照[此处的文档重新启动 CouchDb](http://docs.couchdb.org/en/1.6.1/api/server/common.html#post--_restart)

卷曲示例：

```
curl -X POST http://localhost:5984/_restart -H"Content-Type: application/json" 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-02-06T19:58:54.663

这可能在某种程度上取决于操作系统及其版本。例如，在 Ubuntu 14.04 上（正在从 sysvinit 过渡），/etc/ *init.d* /couchdb命令对我不起作用。我要做：

```
sudo service couchdb restart 
```

因此，请使用 user2744667 发布的 curl 方法（具有 root/管理员权限），**或**使用标准方法为您的操作系统重新启动守护程序/服务。

最后，作为最后的手段，您可以终止该进程。这不是推荐的方法，也不是您在问题中指出的“干净”。您可能会发现 CouchDB 在重生方面非常激进。但是，如果您有杀人的心情，那么所有的*杀戮*都可能只是事情。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-07-19T01:28:50.020

在 Windows 上，您不需要运行`services.msc`...这样的 GUI 键入通常更快：

```
c:\> net stop "Apache CouchDb"
c:\> net start "Apache CouchDb" 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-04-16T00:37:25.303

在 Windows 上，如果您将其安装为服务，请打开`services.msc`，找到该`Apache couchDB`服务，然后重新启动。

# fullscreen - Multiple JavaFX stages in fullscreen mode

> ID：13030556
> 
> 赞同：9
> 
> 时间：2012-10-23T12:36:28.300
> 
> 标签：fullscreen, javafx

I have an application that contains two stages which should be shown on two different screens both in fullscreen mode. I managed to position the two stages on seperate screens, and tried to set the fullscreen property to true on each Stage, but only of them is shown without decoration. It is always the one that has the fullscreen property set last that is shown in fullscreen mode.

Is it not possible in JavaFX 2.2 to have multiple stages in fullscreen mode at the same time?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T20:25:08.687

I also ran into this problem and I found an easy solution(workaround):

First we need the id of the primary monitor:

```
int primaryMon;
Screen primary = Screen.getPrimary();
for(int i = 0; i < Screen.getScreens().size(); i++){
    if(Screen.getScreens().get(i).equals(primary)){
        primaryMon = i;
        System.out.println("primary: " + i);
        break;
    }
} 
```

After this we init and show the primary stage. It is important to do this on the primary monitor (for hiding taskbars and such things).

```
Screen screen2 = Screen.getScreens().get(primaryMon);
Stage stage2 = new Stage();
stage2.setScene(new Scene(new Label("primary")));
//we need to set the window position to the primary monitor:
stage2.setX(screen2.getVisualBounds().getMinX());
stage2.setY(screen2.getVisualBounds().getMinY());
stage2.setFullScreen(true);
stage2.show(); 
```

Now the workaround part. We create the stages for the other monitors:

```
Label label = new Label("monitor " + i);
stage.setScene(new Scene(label));
System.out.println(Screen.getScreens().size());
Screen screen = Screen.getScreens().get(i); //i is the monitor id

//set the position to one of the "slave"-monitors:
stage.setX(screen.getVisualBounds().getMinX());
stage.setY(screen.getVisualBounds().getMinY());

//set the dimesions to the screen size:
stage.setWidth(screen.getVisualBounds().getWidth());
stage.setHeight(screen.getVisualBounds().getHeight());

//show the stage without decorations (titlebar and window borders):
stage.initStyle(StageStyle.UNDECORATED);
stage.show(); 
```

# mod-rewrite - Apache：如果存在外部资源，只需重写

> ID：13030557
> 
> 赞同：2
> 
> 时间：2012-10-23T12:36:35.087
> 
> 标签：mod-rewrite, url-rewriting, apache2, apache, reverse-proxy

我使用 Apache 作为反向代理。专用服务器本身没有网页内容。如果客户端请求本地 Apache 服务器上的资源，Apache 应确定该资源存在于哪个远程（代理）服务器上，并对该服务器进行代理重写。

一个片段应该（目前不起作用）应该展示我会做什么：

```
RewriteCond               http://200.202.204.11:3000%{REQUEST_URI}    -U
RewriteRule     ^(.*)$    http://200.202.204.11:3000$1                [P] 
```

我省去了我的其余配置（ProxyPass、ProxyPassReverse、其他 RewriteCond、...）来专注于我的问题：

**在重写之前如何检查外部资源是否存在/可用？**

RewriteCond的*-U*选项返回 alwas true。*-F*选项返回始终为false。我的意图是否有可行的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:41:29.710

在搜索了数周以获得解决方案后，我得出结论：如果存在外部资源，则没有可靠的 RewriteRule。

如果您通过子域在反向代理后面处理您的服务，您会做得更好。例如“gitlab.youdomain.net”，如果你想在你的反向代理后面的 gitlab 服务器上处理资源。因此，如果资源位于 gitlab 服务器的根目录 '/' 中，反向代理不会变得混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T10:18:56.570

我遇到了同样的问题，但据我所知，我得到了相同的结果：仅使用 Apache httpd 指令（至少使用 2.2 版）是不可能的。
在我的解决方案中，我使用 RewriteMap 和 PHP 脚本来检查外部资源是否存在。

在这个例子中，当一个新的请求到来时，RewriteMap 检查服务器 A 上请求的路径是否存在，如果成功找到，它将反向代理同一服务器上的请求。另一方面，如果在服务器 A 上没有找到请求的路径，它会执行一个重写规则来反向代理服务器 B 上的请求。

如前所述，我使用了一个`RewriteMap`with`MapType` `prg:`和一个 PHP 脚本。这里是 Apache 指令：

```
# Please pay attention to RewriteLock
# this directive must be defined in server config context
RewriteLock /tmp/if_url_exists.lock

RewriteEngine On

ProxyPreserveHost Off
ProxyRequests Off

RewriteMap  url_exists "prg:/usr/bin/php /opt/local/scripts/url_exists.php"
RewriteCond ${url_exists:http://serverA%{REQUEST_URI}}   >0
RewriteRule .            http://serverA%{REQUEST_URI} [P,L]

RewriteRule .            http://serverB%{REQUEST_URI} [P,L] 
```

这是有趣和棘手的部分。这是`url_exists.php`由 Apache 执行的脚本。它正在等待标准输入流并写入标准输出。`1`如果找到资源并且可读，则此脚本返回，否则返回`0`. 它是如此的轻巧，因为它只使用 HEAD 方法实现了一个 HTTP 请求。

```
<?php

function check_if_url_exists($line) {
    $curl_inst = curl_init($line);
    curl_setopt( $curl_inst, CURLOPT_CONNECTTIMEOUT, 30);
    curl_setopt( $curl_inst, CURLOPT_LOW_SPEED_LIMIT, 1);
    curl_setopt( $curl_inst, CURLOPT_LOW_SPEED_TIME, 180);
    curl_setopt( $curl_inst, CURLOPT_HEADER, true);
    curl_setopt( $curl_inst, CURLOPT_FAILONERROR, true);
    // Exclude the body from the output and request method is set to HEAD.
    curl_setopt( $curl_inst, CURLOPT_NOBODY, true);
    curl_setopt( $curl_inst, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt( $curl_inst, CURLOPT_RETURNTRANSFER, true);
    $raw = curl_exec($curl_inst);
    curl_close($curl_inst);
    return ($raw != false) ? true : false;
}

set_time_limit(0);
$keyboard = fopen("php://stdin","r");

while (true) {
    $line = trim(fgets($keyboard));
    if (!empty($line)) {
        $str = (check_if_url_exists($line)) ? "1" : "0";
        echo $str."\n";
    }
} 
```

# cloud - 如何更改 cloudControl 上的 DocumentRoot？

> ID：13030561
> 
> 赞同：3
> 
> 时间：2012-10-23T12:36:54.370
> 
> 标签：cloud, slim, cloudcontrol

我需要将一个子目录设置为 DocumentRoot 以在 slim 框架上运行我的应用程序。有没有办法做到这一点？

我尝试使用 htaccess 文件但没有成功：root：

```
RewriteEngine On
RewriteRule ^$ www/ [L]
RewriteRule (.*) www/$1 [L] 
```

子目录：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [QSA,L] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T09:01:10.263

`.ccconfig.yaml`只需在您的应用程序根目录中创建一个。

内容应该是

```
BaseConfig:
    WebContent: /www
    AdminEmail: [email] 
```

那应该行得通。如果需要，您也可以在此文件中定义自己的 PHP-config-settings。

# php - php参数传递

> ID：13030568
> 
> 赞同：3
> 
> 时间：2012-10-23T12:37:20.080
> 
> 标签：php, post, sdk

我尝试将一些文本从我的应用程序发送到 php，但不知何故我从未收到文本。这里有什么问题？

```
NSString *name = [[NSString alloc]initWithString: @"Hello World"];
NSString *email = [[NSString alloc]initWithString: @"Ohai2u"];
NSString *urlString = [NSString stringWithFormat:@"http://www.myhosturlxyz.com/tracktxt.php?name=%@ email=%@",
                       [name stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
                       [email stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

NSURL *url = [[NSURL alloc] initWithString:urlString];

NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];

NSData *urlData;
NSURLResponse *response;
urlData = [NSURLConnection sendSynchronousRequest:urlRequest returningResponse:&response error:nil];
[url release]; 
```

我做的php是

```
<?php
    $name = $_REQUEST['name'];
    $email = $_REQUEST['email'];
    $myFile = "tracktxtf.txt";
    $fh = fopen($myFile, 'a') or die("can't open file");
    fwrite($fh, "my posted var is " .$name $email "\n");
    fclose($fh);   
 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:45:24.477

只是一个疯狂的猜测，但你可能需要`&`在`name=%@`and之间`email=%a`，制作它`name=%@&email=%@`吗？

或者，您可以尝试使用`$_GET['name']`and`$_GET['email']`代替 REQUEST 吗？也许尝试写入`print_r($_REQUEST, true); print_r($_GET, true);`您的调试文件并查看它包含的内容。

# php - 数组 PHP 中的变量

> ID：13030570
> 
> 赞同：1
> 
> 时间：2012-10-23T12:37:26.073
> 
> 标签：php

我希望在数组中解析变量，所以当我回显 $head['meta_title'] 时，会显示 lol。我试过用双引号括起来，但这似乎也不起作用，有什么办法解决这个问题吗？谢谢！

我得到了意外的 T_VARIABLE 并且当我使用双引号时，我得到了意外的 ""

```
$meta_title = "lol";

public $head = array
(
    "title"        => "blah",
    "meta_title"   => $meta_title,
    "meta_content" => $meta_content
); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T12:39:40.297

您不能使用表达式来初始化类属性。这两个变量的值直到运行时才知道，因此不能在声明中使用。相反，在构造函数中定义它们。

```
public $head = array
(
    // The title as a string literal is ok...
    "title"        => "blah",
    "meta_title"   => NULL,
    "meta_content" => NULL
);
// Pass them to the constructor as parameters
public function __construct($meta_title, $meta_content)
{ 
  // Initialize them in the constructor. 
  $this->head['meta_title'] = $meta_title;
  $this->head['meta_content'] = $meta_content;
} 
```

[从文档](http://php.net/manual/en/language.oop5.properties.php)

> 类成员变量称为“属性”。您可能还会看到使用“属性”或“字段”等其他术语来提及它们，但出于本参考的目的，我们将使用“属性”。它们是通过使用关键字 public、protected 或 private 之一定义的，后跟一个普通的变量声明。**这个声明可能包括一个初始化，但是这个初始化必须是一个常量值——也就是说，它必须能够在编译时被评估，并且不能依赖于运行时信息才能被评估。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T12:40:06.210

如果这是在对象内，则不能以这种方式分配变量。您必须使用 - 方法设置它`__construct`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:42:08.240

公众需要在 $head 之前移除。我在 PHP Sandbox 中创建了一个示例。

[http://sandbox.onlinephpfunctions.com/code/d17bc90e1291f6a3b23537984df755e40446add6](http://sandbox.onlinephpfunctions.com/code/d17bc90e1291f6a3b23537984df755e40446add6)

# c++ - 将 WRL 用于 C++/CX 函数 - 链接器错误

> ID：13030578
> 
> 赞同：7
> 
> 时间：2012-10-23T12:37:40.313
> 
> 标签：c++, visual-c++, windows-runtime, wrl

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

我正在尝试制作不使用 CX 扩展的 WinRT 库。我需要获取包的名称、漫游数据文件夹等。我写了一些包装器，但是当我将此库链接到可执行项目时，出现链接器错误

```
error LNK2019: unresolved external symbol _WindowsCreateStringReference@16 referenced in function "private: void __thiscall Microsoft::WRL::Wrappers::HStringReference::CreateReference(wchar_t const *,unsigned int,unsigned int)" (?CreateReference@HStringReference@Wrappers@WRL@Microsoft@@AAEXPB_WII@Z)
error LNK2019: unresolved external symbol _WindowsDeleteString@4 referenced in function "public: __thiscall Microsoft::WRL::Wrappers::HStringReference::~HStringReference(void)" (??1HStringReference@Wrappers@WRL@Microsoft@@QAE@XZ)
error LNK2019: unresolved external symbol _WindowsGetStringRawBuffer@8 referenced in function "long __cdecl aponialib::winrt::GetFullName(class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &)" (?GetFullName@winrt@aponialib@@YAJAAV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@@Z)
error LNK2019: unresolved external symbol __imp__RoGetActivationFactory@12 referenced in function "long __cdecl Windows::Foundation::GetActivationFactory<struct ABI::Windows::Storage::IApplicationDataStatics>(struct HSTRING__ *,struct ABI::Windows::Storage::IApplicationDataStatics * *)" (??$GetActivationFactory@UIApplicationDataStatics@Storage@Windows@ABI@@@Foundation@Windows@@YAJPAUHSTRING__@@PAPAUIApplicationDataStatics@Storage@1ABI@@@Z) 
```

这是包名称包装器

```
// including in .h
#include <windows.h>
#include <string>
#include <Strsafe.h>
#include <Winstring.h>

#include <windows.storage.h>
#include <Windows.ApplicationModel.h>
#include <windows.Foundation.h>
#include <wrl/client.h>
#include <wrl/wrappers/corewrappers.h>

//...

HRESULT GetFullName(std::wstring &fullName)
{
    HRESULT hr;
    Microsoft::WRL::ComPtr<ABI::Windows::ApplicationModel::IPackageStatics> packageStatics;

    hr = Windows::Foundation::GetActivationFactory(Microsoft::WRL::Wrappers::HStringReference(RuntimeClass_Windows_ApplicationModel_Package).Get(), &packageStatics);
    if (FAILED(hr))
        return hr;

    Microsoft::WRL::ComPtr<ABI::Windows::ApplicationModel::IPackage> package;
    hr = packageStatics->get_Current(&package);
    if (FAILED(hr))
        return hr;

    Microsoft::WRL::ComPtr<ABI::Windows::ApplicationModel::IPackageId> packageId;
    hr = package->get_Id(&packageId);
    if (FAILED(hr))
        return hr;

    HSTRING name;
    hr = packageId->get_FullName(&name);
    if (FAILED(hr))
        return hr;

    UINT32 length;
    PCWSTR value = WindowsGetStringRawBuffer(name, &length);
    fullName = value;
    WindowsDeleteString(name);
    return S_OK;
} 
```

也许我没有得到 WRL，而且我用错了。

谢谢你的帮助:) 托马斯

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-10-23T13:34:23.153

链接器错误发生我可能是原因

要么找不到函数定义

或者您忘记在项目属性中添加 .lib 文件

去

```
Project properties-->Linker-->Input-->Additional Dependencies 
```

# ios - 无法在 AppStore 中加载应用程序

> ID：13030581
> 
> 赞同：0
> 
> 时间：2012-10-23T12:37:46.467
> 
> 标签：ios, app-store

我在 iTunesConnection 中创建新应用程序，然后尝试使用 Application Downloader 加载 zip-archive。但是当我推送“交付您的应用程序”时，下载器向我显示此错误：

![在此处输入图像描述](../Images/d2bfd6ab1883f7420bdfe6c81feefa69.png)

但我有 2 个应用程序，“等待下载”

![在此处输入图像描述](../Images/17fad827303b61f39500fb82d223acf6.png)

问题是什么？有任何想法吗？

UPD。XCode 向我显示了同样的错误

![在此处输入图像描述](../Images/2d8bbb5013f92ddb52d9fcf8bad55741.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:47:54.633

仔细检查您的 [project-name]-Info.plist 文件是否包含正确的包标识符。捆绑标识符应与您在应用程序的配置文件中配置的标识符相匹配。

例如：`com.mycompany.effecto`

还要确保您是否为这两个应用程序使用了正确的配置文件。

**编辑：**

您在 itunesconnect 中的应用程序需要处于“等待上传”状态，而不是“准备上传”。请在 itunesconnect 中填写所有必需的数据，然后您的状态将被更新。您可能需要单击准备上传并在其中填写所有合法内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:44:03.003

一切都好！问题出在我的代理互联网上。iTunesConnections 无法使用代理。这就是 XCode 和 AppDownloader 没有从我的帐户中看到任何信息的原因。谢谢大家的回答和评论。

# zend-framework - Zend_Pdf 字母间距

> ID：13030594
> 
> 赞同：-1
> 
> 时间：2012-10-23T12:38:42.050
> 
> 标签：zend-framework, zend-pdf

Zend_Pdf 中是否有可能增加字母间距？我似乎无法在任何地方找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:18:06.640

通过这个[是否可以使用 Zend_Pdf 将 HTML 转换为 pdf？](https://stackoverflow.com/questions/5183238/is-possible-convert-html-into-pdf-using-zend-pdf)

后来意识到你需要 CSS 来增加[字母间距](http://www.w3schools.com/cssref/pr_text_letter-spacing.asp)。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T03:49:33.880

据我所知，没有音高控制`Zend_Pdf`——它依赖于字体定义中的字形宽度。`FPDF`话虽如此，我不记得它是一个选项`TCPDF`。

# ios - 检查所有文本字段的验证类

> ID：13030595
> 
> 赞同：0
> 
> 时间：2012-10-23T12:38:49.160
> 
> 标签：ios, xcode, ios5

我正在处理一个大型 ios 项目，其中几乎每个项目都有多个 xib 和几个文本字段。我需要创建一个验证类来识别文本字段是否包含 nil 值，然后将结果发送到`BOOL`.

验证类需要在`UIKit.h framework`.

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:45:22.760

做这样的事情。

```
for(UIView* subView in [self.view subViews])
{
    if([subView isKindOfClass:[UITextView class]])
    {
        UITextView* textView = (UITextView*) subView;
        if([textView.text isEqualToString:@""])
        {
            UIAlertView* alert //alloc, initialize with text something like this "Please fill up all text."
            [alert show];
            [alert release];

            break;
        }
    }
} 
```

尽管对您的问题进行更多描述会帮助您获得更好的答案！

# c++ - std::find on std::vector< std::string > 不能在 Visual C++ 2008 中编译？

> ID：13030601
> 
> 赞同：1
> 
> 时间：2012-10-23T12:39:12.763
> 
> 标签：c++, visual-studio-2008, stl

我在 Visual C++ 2008 速成版上尝试了此代码，但无法编译：

```
#include <iostream>
#include <vector>
#include <algorithm>

int main()
{
    typedef std::string Element;
    typedef std::vector< Element > Vector;
    typedef Vector::iterator Iterator;

    Vector v;
    std::find( v.begin(), v.end(), std::string( "xxx" ) );

    return 0;
} 
```

我收到以下错误：

```
c:\programmi\microsoft visual studio 9.0\vc\include\algorithm(40) : error C2784: 'bool  std::operator ==(const std::vector<_Ty,_Alloc> &,const std::vector<_Ty,_Alloc> &)' : could not deduce template argument for 'const std::vector<_Ty,_Alloc> &' from 'std::basic_string<_Elem,_Traits,_Ax>' 
```

相同的代码由 gcc 编译并按预期工作。

它是 Visual Studio 的错误吗？我怎样才能让我的示例在 Visual C++ 2008 上运行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T12:42:06.523

你忘了`#include <string>`。

您必须始终包含代码所需的所有标头。永远不要依赖有时会起作用的神奇递归包含。对于您在代码中使用的所有内容，您必须知道它的声明位置，并保证声明在您的翻译单元中可见。

# java - 是否序列化

> ID：13030606
> 
> 赞同：1
> 
> 时间：2012-10-23T12:39:39.047
> 
> 标签：java, serialization

我有一个小型桌面应用程序，需要为单个用户保留一些简单但结构化的数据（>10K）。我想要一些关于是否应该序列化对象或构建一些 XML 数据文件的选项。为了简单起见，我开始对事物进行序列化，它确实有效，但我想我也会向社区征求一些反馈意见。是否有我可能遗漏的缺点或潜在问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T12:44:04.680

XML 是众多序列化的选择之一。你可以做 Java Serializable、XML、JSON、protobuf 或任何你喜欢的东西。我看不出任何陷阱。

XML 的一个优点是您可以使用 JAXB 来编组和解组对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T12:44:17.710

使用 Java 的序列化机制的一个主要缺点是它与 Java 类紧密耦合。如果您在应用程序的新版本中更改了 Java 类，例如添加或删除成员变量，那么您将无法再读取使用旧版本编写的文件。出于这个原因，序列化对于长期存储来说并不是那么好。

Java 序列化数据的格式是非标准格式，这意味着使用非 Java 工具很难对它做任何事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T12:45:15.410

最好的选择是使用**基于文件的数据库**。我试过的一个是 HSQLDB，它是纯粹基于 java 的。

您可以将它与 JDBC 一起使用，并有权使用 SQL。

您不需要任何数据库安装，它只需要一个 jar 文件，它会使用您的数据创建单独的文件。

示例：[http ://www.hsqldb.org/doc/guide/apb.html](http://www.hsqldb.org/doc/guide/apb.html)

注意：**序列化不是为了持久化**。如果您的课程以某种方式发生变化，反序列化将非常困难，并且与数据丢失一样好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T12:47:53.250

第三种选择是使用 JSON，使用 Jackson 解析器快速反序列化到 Java 对象/从 Java 对象序列化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T12:44:15.227

我更喜欢 XML 文件来存储数据，因为您自己实现了加载和保存系统。如果您更改对象的结构（例如添加和整数，这不会影响已使用数据的行为），所有通过序列化保存的旧对象都是无用的，因为它们不再适合您的类。但是使用自行设计的 XML 存储系统，您仍然可以从旧保存的数据创建对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T12:46:38.143

听起来你对权衡有很好的理解。序列化更容易，但不如 XML 可扩展。如果这是一个学校项目或供您自己使用的应用程序，我会亲自进行序列化。

您还应该考虑让用户能够阅读/编辑 XML 是否合适。您可能需要采取措施防止这种情况发生。

你应该看看 xStream。我在几个项目中使用过它。

# jquery - jQuery导航：一次只调用一个函数？

> ID：13030609
> 
> 赞同：0
> 
> 时间：2012-10-23T12:39:43.340
> 
> 标签：jquery

我有 3 个按钮，每个按钮调用一个将不同内容动画化到视图中的函数。如果用户很快，他们可以单击 2 个按钮，这会使动画暂时混乱。如何一次只调用一个函数？

显示从无设置为 inline-block 以使内容可见，这意味着当 2 个动画正在播放时，它们彼此对齐。

这是我的其中一个功能的代码，第二个是相同的，除了元素 ID 与我需要移动的内容相对应。每个按钮调用这些功能之一。

```
function mepage(){
var ele = document.getElementById("btn2");
var ele = document.getElementById("btn3");
var mecont = document.getElementById("mecontent");
if ($(ele).is(':visible')) 
{
    $("#btn2,#btn3").slideUp(1000, function() {
        $("#mecontent").fadeIn(800).css("display","inline-block");
    });
}
else {
    $("#mecontent").fadeOut(800, function() {
        $("#mecontent").css("display","none");
        if(ele.style.display == "none"){
            $("#btn2,#btn3").slideDown(1000);
        }});
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:42:34.317

禁用第二个按钮。
使用回调函数 或`.promise()`，在按钮 1 的动画完成时启用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:42:58.253

尝试修改为：

```
var animation_enabled = true;
function mepage(){
if(!animation_enabled )return;
animation_enabled = false;
var ele = document.getElementById("btn2");
var ele = document.getElementById("btn3");
var mecont = document.getElementById("mecontent");
if ($(ele).is(':visible')) 
{
    $("#btn2,#btn3").slideUp(1000, function() {
        $("#mecontent").fadeIn(800, function() {animation_enabled =true;}).css("display","inline-block");
    });
}
else {
    $("#mecontent").fadeOut(800, function() {
        $("#mecontent").css("display","none");
        if(ele.style.display == "none"){
            $("#btn2,#btn3").slideDown(1000, function() {animation_enabled =true;});
        }});
    }
} 
```

如果当前没有动画正在运行，这将只允许单击第二个按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T12:43:18.690

您可以在开始动画之前禁用按钮。

# soap - tcp_disconnect 上的 SIGPIPE（断管）执行客户端（WCF Soap 1.1 和服务器）

> ID：13030615
> 
> 赞同：1
> 
> 时间：2012-10-23T12:39:57.630
> 
> 标签：soap, pipe, gsoap, sigpipe

我正在使用 gSOAP lib 开发一个 Qt 客户端 (C++)，它应该与 Microsoft (WCF) 的 Web 服务讨论。我在两边都使用 SOAP 1.1。

我的客户端代码如下：

```
CustomBinding_USCOREISynchronisation service;

    soap_ssl_init(); /* init OpenSSL (just once) */

    soap_init2(service.soap, SOAP_IO_KEEPALIVE, SOAP_IO_KEEPALIVE);
    service.soap->max_keep_alive = 1000; // at most 100 calls per keep-alive session
    service.soap->accept_timeout = 6000; // optional: let server time out after ten minutes of inactivity

    if (soap_ssl_client_context(service.soap,
       SOAP_SSL_NO_AUTHENTICATION,
       NULL,    /* keyfile: required only when client must authenticate to server (see SSL docs on how to obtain this file) */
       NULL,     /* password to read the key file (not used with GNUTLS) */
       NULL, /* cacert file to store trusted certificates (needed to verify server) */    NULL,  /* capath to directory with trusted certificates */
       NULL  /* if randfile!=NULL: use a file with random data to seed randomness */
    ))
    {
       soap_print_fault(service.soap, stderr);
       exit(1);
    }

    _ns1__Connect req;
    _ns1__ConnectResponse resp;

    std::string strLogin = "tata@gmail.com";
    std::string strPassword = "681982981298192891287B0A";
    bool bInternalUser = true;

    req.login = &strLogin;
    req.password = &strPassword;
    req.isInternalUser = &bInternalUser;

    int err = service.__ns1__Connect(&req, &resp);
    if (SOAP_OK == err)
        qDebug() << ":D";
    else
    {
        qDebug() << "Error : " << err;
        soap_print_fault(service.soap, stderr);
    }

    qDebug() << "Result of Connect : " << resp.ConnectResult; 
```

问题：当我执行程序时，我在“tcp_disconnect”函数中得到一个 SIGPIPE（Broken pipe），正好在“r = SSL_shutdown (soap-> ssl);”这一行。

生成的错误消息：

错误 -1 故障：SOAP-ENV：客户端 [无子代码]“文件结束或无输入：操作中断或超时”详细信息：[无详细信息]

你知道为什么吗？如果您需要更多资源或信息，请告诉我！

提前非常感谢，

大声笑。

# c# - 开始下载链接？jQuery 或 C#

> ID：13030626
> 
> 赞同：0
> 
> 时间：2012-10-23T12:40:36.227
> 
> 标签：c#, jquery, asp.net-mvc

我需要运行下载然后继续执行代码吗？我该怎么办？

此功能正在检查文件何时被下载到我的服务器上，然后我需要运行下载到我的客户端计算机，女巫是我尝试 window.open("url") 的地方。

```
function checkSpreadsheetProgress(taskId, filename) {
        var intervalId2 = setInterval(function () {
            $.post("SpreadSheetProgress", { id: taskId }, function (SpreadSheetProgress) {
                if (SpreadSheetProgress >= 100) {
                    clearInterval(intervalId2);
                    window.open("http://formvalue.co.za/download/" + filename + ".xlsx")
   //The line above is my attempt at running the download link but it did nothing?
   //The line below pushes me to my Downloadcompleate action result.
                    window.location.href = "downloadcomplete?filename=" + filename;
                } else {

                }
            });
        }, 100);
    } 
```

我可以使用 C# 下载文件，但无法继续使用重定向方法背后的代码。

```
public ActionResult DownloadComplete(string filename)
{
    //return Redirect("http://formvalue.co.za/download/" + filename + ".xlsx");
    // The above line will download the file but then i cant return a view?
    return View();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:46:27.693

如果您想跟踪下载状态，您必须选中此项。你可以根据这篇文章有一些想法。

[http://www.codeproject.com/Articles/74654/File-Download-in-ASP-NET-and-Tracking-the-Status-o](http://www.codeproject.com/Articles/74654/File-Download-in-ASP-NET-and-Tracking-the-Status-o)

# iphone - 在自定义 UITableViewCell 中调整 UIImageView 的大小会产生不一致的结果

> ID：13030632
> 
> 赞同：4
> 
> 时间：2012-10-23T12:41:07.523
> 
> 标签：iphone, xcode, uitableview, uiimageview, resize

我正在基于我在 XIB 文件中创建的 UITableViewCell 原型构建一个表。该单元由几个标签和一个图像视图组成，需要拉伸以适应整个设备宽度。一旦宽度被拉伸，我也想将高度拉伸到相同的比例，所以我的图像被一致地缩放。

我得到的结果好坏参半。我已经能够使用以下代码适当地调整 CELL 的大小：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //pull the image from the array based on the indexPath
    NSUInteger row = [indexPath row];
    CITImage *image = [report.reportImages objectAtIndex:row];
    UIImage *img = [UIImage imageWithData:image.imageData];

    //see how we need to scale the image to make it fit within the full width of the screen
    float scale = tableView.frame.size.width /img.size.width;
    float imgHeight = img.size.height * scale;

    //return the necessary cell height
    return imgHeight;
} 
```

问题是单元格内的 UIImageView 没有正确调整大小。当准备好绘制单元格时，我正在使用以下代码设置单元格的属性：

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    //pull the image from the array based on the indexPath
    NSUInteger row = [indexPath row];
    CITImage *image = [report.reportImages objectAtIndex:row];
    UIImage *img = [UIImage imageWithData:image.imageData];

    //attempt to get a reusable cell
    CITImageCell *cell;
    cell= [tableView dequeueReusableCellWithIdentifier:@"CITImageCellIdentifier"];
    if (cell == nil) {
        // Load the top-level objects from the custom cell XIB.
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CITImageCell" owner:self options:nil];
        cell = [topLevelObjects objectAtIndex:0];
    }

    //see how we need to scale the image to make it fit within the full width of the screen
    float scale = tableView.frame.size.width /img.size.width;
    float imgHeight = img.size.height * scale;

    NSLog (@"Height %f",cell.imageView.frame.size.height);
    //size the image view
    cell.imageView.frame = CGRectMake(0,34, tableView.frame.size.width, imgHeight+34 );
    NSLog (@"Height %f",cell.imageView.frame.size.height);

    //assign the image
    cell.imageView.image = img;

    //return the cell ready to go
    return cell; 
```

}

两个 NSLog 语句验证高度值计算是否正确，但是当图像显示在屏幕上时，它的大小很少正确。大多数时候它的大小与 XIB 文件中定义的大小相同，但有时它采用正确的高度。我还没有找到一个很好的模式。它从来不是表中的第一项，总是第二项，有时是第四项和第五项。

仍在挖掘文档和其他人的故事，最让我感动的是我可以正确调整单元格大小，并且图像高度计算正确，但它仅在某些时候正确显示。

有什么帮助吗？显示我正在经历的截图的链接如下（是的，我昨晚正在观看辩论）

[未缩放的图像](http://www.dmwtec.com/content/uploads/images/photo1.png)

[正确缩放的图像](http://www.dmwtec.com/content/uploads/images/photo2.png)

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-08T11:51:49.153

我遇到同样的问题。经过一个小时的工作，我意识到发生了什么！

**问题是 UITableViewCell 已经有一个`imageView`!!**

如果您对 使用**相同**的属性名称`imageView`，`UIImageView`系统会以某种方式修改`imageView`您定义的。

所以解决方案是**不要**使用名称`imageView`，尝试使用其他名称。

前任：

```
@property (nonatomic, weak) UIImageView *myImageView; 
```

至少为我工作。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T00:35:56.400

得到它的工作！我不知道这是否是唯一的方法，但我必须在运行时创建 UIImageView 并将其手动添加到单元格中，而不是尝试调整 XIB 文件中的那个。谁能解释这是为什么？

这是我结束的代码：

```
CGRect imageFrame = CGRectMake(0,34, tableView.frame.size.width, imgHeight);
UIImageView *imgView = [[UIImageView alloc] initWithFrame:imageFrame];
[imgView setImage:img];
[cell addSubview:imgView]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T15:15:05.343

我认为我错过的另一个答案是使用 IB 将 UIImageView 的边界绑定到容器单元的底部。当时我不知道我能做到这一点，但一位朋友向我展示了如何做到这一点，我想我会在这里提到它。

# memcached - Memcached CAS 密钥未在两台服务器上正确复制

> ID：13030637
> 
> 赞同：1
> 
> 时间：2012-10-23T12:41:16.400
> 
> 标签：memcached

我们正在使用两个集群的 Memcached 服务器（主服务器，主服务器）并在其上使用 repcached 用于复制目的，用于我们的大流量网站

对于所有登录用户，我正在执行原子 Memcached cas 操作，如下所示。

```
long casVal = resp.getCas();
MemcacheClinet.cas(TOTAL_USERS, 0,value, casVal); 
```

在使用 get TOTAL_USERS 在两台服务器上使用 Memcache Stats 命令进行一些研究后，我发现此密钥在每台服务器上都有不同的值，并且它没有被正确复制并且它的行为异常

请让我知道是否可以在两台服务器上正确复制此密钥“TOTAL_USERS”？

或者有没有其他方法可以手动将数据附加到这个字符串？

我正在使用安装了 repcached 2.2 的 XMemcached 1.4.5 版本。

请分享你的想法。

# c# - 部分类和 edmx

> ID：13030638
> 
> 赞同：0
> 
> 时间：2012-10-23T12:41:28.283
> 
> 标签：c#, entity-framework, assemblies, partial, edmx

我的`edmx`文件生成一些`partial`类。我想扩展功能添加一个属性，但`edmx`文件在另一个程序集中。在这种情况下，它们就像两个不相关的类。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:47:37.100

您可以`type`从已生成的实体类型中继承另一个`edmx`属性，并将您的属性添加到继承的属性中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:48:23.327

您可以在程序集中创建一个新类，该类将扩展/继承部分类并根据需要添加属性和方法

# javascript - 如何让 jquery 在执行另一个函数之前等待一个函数完成？

> ID：13030639
> 
> 赞同：17
> 
> 时间：2012-10-23T12:41:28.270
> 
> 标签：javascript, jquery, ajax

```
function test(){
var distance=null;
       first();
       second();
       third();
alert(distance);//it shows null always because it take 2 second to complete.

}
 function first(tolat, tolon, fromlat,fromlon){

// calulating road distance between two points on the map using any other distance caluculating apis. 

distance=dis;  // update the value of distance but it takes 2 second to complete.

}
 function second(){}
 function third(){} 
```

我的代码中有这种情况，现在在第一次和第二次完成执行之前调用了很多时间函数 3，并且距离值没有更新。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-23T12:47:42.867

使用回调：

```
function first(tolat, tolon, fromlat, fromlon, callback) {
     if (typeof(callback) == 'function') {
        callback(distance);
     }
}

function second() { }
function third() { }

first("vartolat", "vartolon", "varfromlat", "varfromlon", function(distance) {
    alert(distance);
    second();
    third();
}); 
```

# jasper-reports - Jasper Reports 和 net.sf.jasperreports.export.docx.flexible.row.height 以及 DOCX 导出器格式的分页

> ID：13030640
> 
> 赞同：0
> 
> 时间：2012-10-23T12:41:30.893
> 
> 标签：jasper-reports, docx

问题开始了，在 jasper 报告和 docx 导出器中，我们调整了分页表的大小。之后表格继续在非分页页面上，并且新页面上有很多空白空间。当用户调整表中某些行的大小时，我们如何实现 net.sf.jasperreports.export.docx.flexible.row.height=true 和正确分页和动态分页？

**正确生成到 DOCX 的表：** ![正确生成到 DOCX 的表](../Images/1feffa528054049b50bb66335b6d17e2.png)

**用户在 DOCX 表中调整某些单元格的大小后分页错误：** ![用户在 DOCX 表中调整某些单元格的大小后分页错误。](../Images/904d5a5ea5af3c0e909a8d2fa5d487ff.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:12:28.040

我认为 jasper 报告没有这样的功能。由于 DOCX 导出器使用网格将数据导出到 DOCX，因此 DOCX 中的结果表不是作为 DOCX 对象的 DOCX 表，而是带有文本的小表网格。因此，当在此类文档中，用户将调整某些单元格的大小时，分页会被破坏，并且其他网格表会遍历文档页面。所以文档没有正确分页。无论如何，在大多数情况下，报告的目标是导出为只读表单以进行打印等...

# eclipse - 有没有办法调整 Eclipse 工作区中的图标大小？

> ID：13030652
> 
> 赞同：5
> 
> 时间：2012-10-23T12:42:13.603
> 
> 标签：eclipse, parallels

我在 Retina MacBook Pro 上通过 Parallels 运行 Eclipse IDE。

Parallels 自动配置 Windows 中的字体大小以处理 Retina 显示分辨率。所以这一切看起来都不错。

问题是工作区中的图标仍然是相同的大小，因此渲染得非常小，几乎不可能看到它们。

我希望能够告诉 Eclipse 调整图标的大小（可能是 x2 或 x4）。我不在乎它们是否看起来像块状，只要我能看到它们。

这样的事情可能吗？

抢占显而易见的答案：

*   我需要在 Windows 中使用 IDE（由于 JNI 库）。
*   除非我降低分辨率，否则直接重新启动进入 Bootcamp 也不会解决问题。这违背了额外屏幕空间的目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:15:45.473

参考 Eclipse 3.x 的[用户界面指南](http://wiki.eclipse.org/User_Interface_Guidelines#Icon_Size_.26_Placement)，目前这是不可能的。图标（例如工具栏）的最大尺寸为 16 像素。

> 大多数 Eclipse 风格的图标都设计在 16 x 16 像素的区域内。这是图像的最终切割尺寸。

图标可以在这里找到：

```
<eclipse-root>/plugins/org.eclipse.ui_*.jar/icons/full 
```

# vba - VBA 中的插值

> ID：13030660
> 
> 赞同：-1
> 
> 时间：2012-10-23T12:42:41.483
> 
> 标签：vba, excel

我已经编写了用于复制列并将其粘贴到用户想要代码的位置的代码

```
 Set rng = Range("A1:EO1").Find(What:=COL, LookIn:=xlValues, Lookat:=xlWhole)
If rng Is Nothing Then
 MsgBox "Value not found in row 1", vbExclamation
 Else
  Range(rng, rng.End(xlDown)).copy
  ActiveSheet.Paste Destination:=ThisWorkbook.Sheets(assume).Columns(c).Offset(, 4)
EndIf 
```

这里“COL”是保存用户给定值的变量，“c”是保存要粘贴的字符串值的变量。

它工作正常。例如：-假设excel数据像

0.25| 0.50| 0.75| 1.00| 1.25| 1.50| 1.75| 2.00|

如果用户输入值说 1.75，则上面的行是第一行，那么它将选择整列并将其粘贴到用户想要的位置。

但是当用户输入 1.90 时，它应该在 1.75 和 2.00 之间插入数据并将其粘贴到用户想要的位置

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:32:54.550

如果您真的想在没有完全匹配的两点之间进行插值，那么您可以获得的最接近的是：

```
interpolated = y1 + ((xs-x1)/(x2-x1))*(y2-y1) 
```

其中`x1`,`x2`是第一行的值，`xs`是用户输入的“搜索”值。 `y1`,`y2`是下面每一行对应的两个值。

# c# - WPF 样式自定义控件

> ID：13030661
> 
> 赞同：1
> 
> 时间：2012-10-23T12:42:41.857
> 
> 标签：c#, wpf

我有一个要设置样式的自定义控件：

它只是一个继承自 TextBox 和另一个 Interface 的类，该接口只是增加了一个额外的属性。

如何将样式应用于此自定义控件，以便在设置只读属性时，背景变为灰色？

* * *

```
public class DionysusTextBox : TextBox, IDionysusControl
  {

    public DionysusTextBox()
    {
      SetStyle();
    }

    #region IDionysusControl Members

    public bool KeepReadOnlyState
    {
      get { return (bool)GetValue(KeepReadOnlyStateProperty); }
      set { SetValue(KeepReadOnlyStateProperty, value); }
    }

    // Using a DependencyProperty as the backing store for MyProperty.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty KeepReadOnlyStateProperty =
        DependencyProperty.Register("KeepReadOnlyState", typeof(bool), typeof(DionysusTextBox), new UIPropertyMetadata(true));

    #endregion

    #region Style

    Style styleListBoxItem = new Style(typeof(DionysusTextBox));
    Trigger triggerReadonly = new Trigger { Property = DionysusTextBox.IsReadOnlyProperty, Value = true };

    private void SetStyle()
    {
      triggerReadonly.Setters.Add(new Setter(DionysusTextBox.BackgroundProperty, Brushes.Black));
      this.Triggers.Add(triggerReadonly);
    }

    #endregion

  } 
```

* * *

以上是整个类的代码，我使用样式的方式似乎是合适的方式，但是当我将此控件添加到设计器时，我收到以下错误：

```
Triggers collection members must be of type EventTrigger. 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T12:53:20.800

您可以重新定义依赖属性的默认行为，特别是，您可以定义`PropertyChangedCallback`s：

```
public class DionysusTextBox : TextBox, IDionysusControl
{
    static DionysusTextBox()
    {   
        //For the IsReadOnly dependency property    
        IsReadOnlyProperty.OverrideMetadata(
            //On the type DionysusTextBox
            typeof(DionysusTextBox), 
            //Redefine default behavior           
            new FrameworkPropertyMetadata(
                //Default value, can also omit this parameter
                null,
                //When IsReadOnly changed, this is executed 
                new PropertyChangedCallback(
                    (dpo, dpce) =>
                    {
                       //dpo hold the DionysusTextBox instance on which IsReachOnly changed
                       //dpce.NewValue hold the new value of IsReadOnly

                       //Run logic to set the background here, you are on the UI thread.

                       //Example of setting the BorderBrush from ARGB values:
                       var dioBox = dpo as DionysusTextBox;
                       //Should always be true, of course, it's just my OCD ;)
                       if (dioBox != null)                  
                       {
                          dioBox.BorderBrush = 
                              ColorConverter.ConvertFromString("#FFDDDDDD") as Color?;
                       }
                    })));

        //For the BorderBrush property
        BorderBrushProperty.OverrideMetadata(
            //On the type DionysusTextBox
            typeof(DionysusTextBox), 
            //Redefine default behavior           
            new FrameworkPropertyMetadata(
                //Default value
                ColorConverter.ConvertFromString("#FFDDDDDD") as Color?));
    }

    public DionysusTextBox()
    {
      SetStyle();
    }
} 
```

**请注意：** `UIPropertyMetadata`！=`FrameworkPropertyMetadata`

# database - DBLib 错误让我发疯

> ID：13030663
> 
> 赞同：4
> 
> 时间：2012-10-23T12:42:50.330
> 
> 标签：database, perl

我正在处理具有多个数据库调用的 perl 脚本，并且不断收到以下错误：

DB-Library 错误：尝试启动新的 SQL Server 操作，结果挂起。

在我的代码中，我有以下内容：

对数据库的第一次调用会执行一些从散列构建的插入语句：

```
while (my ($key, $value) = each(%holidays)) {

    system("log4k", "DEBUG", "$0", "Staging holiday info data for: $cal_name: $key");

    $sql = "INSERT INTO stg_holiday_data (hol_mnemonic, hol_date, hol_comment, dml_type)    VALUES (\"$cal_name\", $key, \"$value\", \"N\")";
    system("log4k", "TRACE", "$0", "SQL being executed: $sql");

    if ($test == 0) {

        $dbh->dbcmd($sql);

        ($dbh->dbsqlexec() && $dbh->dbresults)
            or &fatalError("Database error in $sql", "DB_ERROR");

        while($dbh->dbresults != NO_MORE_RESULTS) {

            while(my @dat = $dbh->dbnextrow){}
        }
    }
} 
```

完成后我立即关闭连接，并取消它以确保没有结果需要通过发出来处理：

```
$dbh->dbcancel();
$dbh->dbclose(); 
```

从那里我调用一个单独的子例程来执行一个存储过程，它将产生三行表示行号的输出：

子程序调用

```
&run_sproc() if ($test == 0); 
```

子程序：

```
sub run_sproc() {

    system("log4k", "DEBUG", "$0", "Loading staged holiday data");

    my $sql1 = "upd_holiday_data";
    system("log4k", "TRACE", "$0", "SQL being executed: $sql1");

    my($dbh2) = new Sybase::DBlib $ENV{DATABASE_USER}, $ENV{DATABASE_PASSWORD}, $ENV{DATABASE_SERVER}, "GME_calendar_sync";
    &fatalError("Failed to login imagine database", "DB_LOGIN_ERROR") unless ($dbh2);

    $dbh2->dbcmd($sql1);
    ($dbh2->dbsqlexec() && $dbh2->dbresults ) 
        or &fatalError ("Database error in $sql", "DB_ERROR");

    while ($dbh2->dbresults != NO_MORE_RESULTS) {

        while (my @d = $dbh2->dbnextrow) {

            system("log4k", "TRACE", "$0", "Next row being inserted @d");
        }
    }
    $dbh2->dbclose();
} 
```

我确实有第三个 SQL 块，它位于存储过程之后，无论有没有这个子例程都可以正常工作。

发生的事情是我在存储过程打印结果之前收到上述错误。我已经尝试了我能想象到的一切，以确保所有结果都得到处理。日志输出示例如下：

```
[Tuesday, 23 October 2012 13:30:02 BST] [DEBUG] gme_process_calendars.pl: Staging holiday info data for: CA: 20251226
[Tuesday, 23 October 2012 13:30:03 BST] [TRACE] gme_process_calendars.pl: SQL being executed: INSERT INTO stg_holiday_data (hol_mnemonic, hol_date, hol_comment, dml_type)    VALUES ("CA", 20251226, "upload", "N")
[Tuesday, 23 October 2012 13:30:03 BST] [DEBUG] gme_process_calendars.pl: Staging holiday info data for: CA: 20220103
[Tuesday, 23 October 2012 13:30:03 BST] [TRACE] gme_process_calendars.pl: SQL being executed: INSERT INTO stg_holiday_data (hol_mnemonic, hol_date, hol_comment, dml_type) VALUES ("CA", 20220103, "upload", "N")
[Tuesday, 23 October 2012 13:30:03 BST] [DEBUG] gme_process_calendars.pl: Loading staged holiday data
[Tuesday, 23 October 2012 13:30:03 BST] [TRACE] gme_process_calendars.pl: SQL being executed: upd_holiday_data
DB-Library error:
    Attempt to initiate a new SQL Server operation with results pending.
[Tuesday, 23 October 2012 13:30:03 BST] [TRACE] gme_process_calendars.pl: Next row being inserted 310107230 
```

对此的任何帮助将不胜感激，因为我已经尝试了通过互联网搜索和阅读文档所能找到的一切。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:51:41.277

我认为您的问题是您的`run_proc`方法尝试执行此 SQL：

```
my $sql1 = "upd_holiday_data"; 
```

我怀疑这是一个有效的 SQL 命令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:00:51.477

找到的解决方案：

在 run_sproc 子例程中，检查：

```
 ($dbh2->dbsqlexec() && $dbh2->dbresults ) 
        or &fatalError ("Database error in $sql", "DB_ERROR"); 
```

第二个条件 $dbh2->dbresults 是导致此错误条件的原因，一旦将其删除，该错误就不再出现。

# c# - 在 WinRT 应用程序中处理捏合、缩放、旋转手势

> ID：13030664
> 
> 赞同：2
> 
> 时间：2012-10-23T12:42:53.903
> 
> 标签：c#, .net, vb.net, xaml, windows-runtime

我可以使用控件的特定事件来处理 1-finger和手势`Tapped`，并使用和事件来处理 1-finger 滑动手势。`DoubleTapped``Holding``ManipulationDelta``ManipulationStarted`

但我不知道如何处理捏合、缩放和旋转手势。谁能详细说明如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:19:13.160

ManipulationDelta 事件为您提供 args.Delta.Scale/Rotation 值，假设您的 ManipulationMode 属性设置为

```
ManipulationMode =
    ManipulationModes.TranslateX |
    ManipulationModes.TranslateY |
    ManipulationModes.Rotate |
    ManipulationModes.Scale |
    ManipulationModes.TranslateInertia; 
```

（或一些这样的）。

# sql-server - SQL Server 变量返回数据类型（函数）

> ID：13030666
> 
> 赞同：1
> 
> 时间：2012-10-23T12:43:01.620
> 
> 标签：sql-server, function

是否可以在 SQL Server 中创建一个返回不同数据类型的函数（取决于您获得的变量）？

我搜索了 web 和 msdn，但没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:52:36.580

您可以使用 SQL_VARIANT。

[http://msdn.microsoft.com/en-us/library/ms173829(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms173829(v=sql.90).aspx)

我包含了 SQL 2005 的链接，但对于更高版本也应该是相同的。

# javascript - 修改 Wicket 的 PagingNavigator Tooltip 和 first、last、next、prev 按钮的文本

> ID：13030668
> 
> 赞同：1
> 
> 时间：2012-10-23T12:43:07.630
> 
> 标签：javascript, css, user-interface, wicket

我想修改 Wicket 中第一个、最后一个、下一个、上一个按钮的文本和工具提示。

默认情况下，按钮的文本显示为 "<<" "<" ">" ">>"
我在按钮中使用 CSS 放置了图标。但我找不到删除按钮文本的方法（那些箭头文本字符）

按钮也有标题。此标题在 PagingNavigator 类中设置。在我看来，似乎没有办法修改按钮的工具提示/标题。我们不使用属性文件，我想使用 setter 方法设置自定义 Tooltip。

有没有简单的方法来实现这一目标？

谢谢

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:39:02.587

一种快速简便的方法是创建自己的子类`PagingNavigator`，例如`MyPagingNavigator`：

```
public class MyPagingNavigator extends PagingNavigator {
  public MyPagingNavigator(final String id, final IPageable pageable) {
    super(id, pageable);
  }
} 
```

无需更改其他代码。

然后，您可以将原始标记*复制*到您自己的`MyPagingNavigator.html`文件中并自定义文本和其他任何内容（只要您保持组件层次结构不变。

# objective-c - UIWebView 使用 autoresizingMask 在旋转时发出内存警告

> ID：13030672
> 
> 赞同：1
> 
> 时间：2012-10-23T12:43:19.753
> 
> 标签：objective-c, ipad, uiwebview, autoresizingmask

我正在开发一个 iPad 应用程序，其中我有一个自定义子类，`UIView`其中包含一个`UIWebView` 显示 HTML 格式的文本（我将其命名为`EssayView`）。我`UIView`在每个页面上都有这些子类的一个实例`UIScrollView`。用户将其横向滚动以在不同文本之间进行选择，然后向下滚动以阅读文本。滚动视图有十个`EssayViews`。

我的应用程序应该支持所有方向，但是当用户旋转设备（横向到纵向，反之亦然）时，会引发内存警告，并且应用程序通常会崩溃。

我做了一些分析。在运行 iOS 5 的 iPad 3 上，应用程序在显示 EssayScrollView 时消耗 528MB 的虚拟内存，但在运行 iOS 5 的 iPad 1 上它仅消耗 193MB ......它仍然在两者上崩溃。在运行 iOS 6 的 iPad 3 上，应用程序在显示 EssayScrollView 时消耗 640MB 的虚拟内存，但在旋转时不会崩溃。所以问题似乎出在运行 iOS 5 的设备上......

以下是我初始化 EssayView 实例的方法：

**EssayView.m**

```
@interface EssayView()
@property UIWebView *essayWebView;
@property NSString *essayName;
@property int essayNumber;
@end

@implementation EssayView

- (id)initWithEssayNamed:(NSString *)theEssayName number:(int)theEssayNumber{
    self = [super initWithFrame:CGRectMake(0,0,[[UIScreen mainScreen] bounds].size.width, [[UIScreen mainScreen] bounds].size.height)];
    if(self){
        essayNumber = theEssayNumber;
        essayName = theEssayName;

        essayWebView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, self.bounds.size.width, self.bounds.size.height)];
        essayWebView.center = CGPointMake(self.bounds.size.width/2, essayWebView.center.y);
        [essayWebView setScalesPageToFit:NO];
        essayWebView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
        essayWebView.delegate = self;
    }
    return self;
} 
```

这是我在 EssayViews 父视图中的轮换代码：

**EssayScrollView.m**

```
- (BOOL)shouldAutorotate{
    return YES;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
    return YES;
}

-(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{
    [super willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:duration];
    [scrollView setContentSize:CGSizeMake([essayArray count] * scrollView.frame.size.width, scrollView.frame.size.height)];
    [scrollView setContentOffset:CGPointMake(scrollView.bounds.size.width*currentEssay, 0) animated:NO];
} 
```

我将一组分配给 in 的行`UIViewAutoresizingMasks`似乎`UIWebView`导致`EssayView`了问题。如果我将其注释掉，则 UI 旋转良好且平滑（当然 UIWebView 不会自动调整大小）。

在 iOS 5 上测试时，它会抛出内存警告，几秒钟后会旋转并经常崩溃。但是在 iOS 6 上它不会崩溃。在这两个操作系统上，旋转动画都比平时慢而且笨拙。

有没有办法让我的多个 webview 调整大小而不会导致内存警告和崩溃？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:10:02.063

那些记忆数字太高了。您基本上同时打开了 10 个浏览器选项卡并在最前面，并期望操作系统在旋转时重新渲染它们。您需要考虑重新使用 Web 视图，而不是同时使用 10 个。

据推测，用户一次只能查看一篇文章，因此无需同时加载所有文章。您可以缓存滚动位置或其他状态，并在加载视图时重新应用它。

# java - 无法使用 Jar 文件找到或加载主类

> ID：13030675
> 
> 赞同：60
> 
> 时间：2012-10-23T12:43:30.673
> 
> 标签：java, class, jar, main

我正在尝试使用

```
@echo off
java -jar Test.jar
pause 
```

随着清单

```
Manifest-Version: 1.0
Main-Class: classes.TestClass 
```

在Jar目录下，解压后可以清晰的看到一个classes\TestClass文件。

编辑：`classes.TestClass`确实有一个`public static void main(String[] args)`.

包减速`classes.TestClass`是`package classes;`

但我仍然不断收到错误消息

```
Could not find or load main class classes.TestClass 
```

我已经经历了我能找到的关于这个问题的一切，但似乎没有任何帮助。

我试过编辑类路径，重做清单，安装新的 JRE。

我还应该做什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-23T12:59:05.810

我让它像这样工作：

**测试类.Java**

```
package classes;

public class TestClass {

    public static void main(String[] args) {
        System.out.println("Test");
    }

} 
```

在命令行上使用`javac`来生成`TestClass.class`. 放在`TestClass.class`一个文件夹里`classes/`。

**清单文件**

```
Manifest-Version: 1.0
Main-Class: classes.TestClass 
```

然后运行

```
jar cfm test.jar MANIFEST.MF classes/ 
```

然后运行它

```
java -jar test.jar 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2019-08-29T20:16:33.370

即使您在单词 jar 之前错误地漏掉了“-”，也会出现此错误

**错误的命令** `java jar test.jar`

**正确的命令** `java -jar test.jar`

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-08-30T04:27:41.143

> java -cp "full-path-of-your-jar" Main

在某个包中运行具有“public static void main”的任何其他类，

> java -cp "full-path-of-your-jar" package1.package2.packages-hierarchy.ClassHavingMain

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-10-23T12:54:14.373

1.创建一个名为 Manifest.txt 的文本文件并将值提供为

> 主类：classes.TestClass

2.创建罐子为

> jar cfm test.jar Manifest.txt classes/*.class

3.运行jar

> java -jar test.jar

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-12-04T20:53:49.330

我知道这是一个老问题，但我最近遇到了这个问题，没有一个答案对我有帮助。然而，Corral 对 Ryan Atkinson 的回答的评论确实让我知道了这个问题。

我有我所有编译的类文件`target/classes`，在我的情况下不是包。我试图`jar cvfe App.jar target/classes App`从我的项目的根目录中将它打包，因为我的 App 类位于默认的未命名包中。

这不起作用，因为新创建`App.jar`的类将`App.class`在目录中`target/classes`。如果你尝试用 运行这个 jar `java -jar App.jar`，它会抱怨找不到`App`类。这是因为里面`App.jar`的包与项目中的实际包不匹配。

这可以通过直接从`target/classes`目录创建 jar 来解决，使用`jar cvfe App.jar . App`. 这在我看来是相当麻烦的。

简单的解决方案是使用该选项列出要添加的文件夹，`-C`而不是使用列出文件夹的默认方式。所以，就我而言，正确的命令是`java cvfe App.jar App -C target/classes .`. 这样会直接将目录下的所有文件添加`target/classes`到 的根目录下`App.jar`，从而解决问题。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-08-03T18:52:28.870

I had the same problem due to copying and pasting code from a Microsoft Word Document. Seems there was a slightly different type of dash `-` character used, when I replaced the longer dash character with the correct `-` the program executed properly

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-10-23T12:55:52.273

如果没有完整的信息，这很难调试。

此时最有可能发生的两件事是 jar 中的文件未存储在 JAR 内的目录中，或者它不是正确的文件。

您需要存储 TestClass.class - 这里有些新人存储源文件 TestClass.java。

您需要创建 jar 文件，以便 TestClass.class 出现一个类路径。确保它不是“/classes”。使用 zip 查看文件并确保它具有“类”路径。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-03-29T06:27:57.420

此错误消息的可能原因：

> 无法找到或加载主类

是当主类扩展（或实现）另一个不在类路径上的类（或接口）时。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-01-11T10:38:02.593

**当MANIFEST.MF 中的错误条目**导致加载失败时，我遇到了一个奇怪的问题。这是我试图启动一个非常简单的 scala 程序的时候：

不正确：

```
Main-Class: jarek.ResourceCache
Class-Path: D:/lang/scala/lib/scala-library.jar 
```

正确的：

```
Main-Class: jarek.ResourceCache
Class-Path: file:///D:/lang/scala/lib/scala-library.jar 
```

使用不正确的版本，我收到了一条神秘的消息，与 OP 一样。*在解析清单文件时*，它可能应该说类似格式错误的 url 异常。

在清单文件中使用绝对路径是 IntelliJ 用来为程序提供长类路径的方法。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-09-24T09:59:13.863

我有一个类似的问题，我可以通过授予 jar 文件所在的所有父文件夹（在 linux 系统上）的执行权限来解决。

例子：

/folder1/folder2/folder3/executable.jar

所有 3 个文件夹（文件夹 1、文件夹 2 和文件夹 3）以及可执行文件 jar 都需要当前用户的执行权限，否则返回错误“找不到或加载主类 ...”。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-10-02T00:55:04.323

至少我这样做的方式如下：

如果你有一个嵌套的 src 树（比如 com.test.myclass.MyClass）并且你正在从根目录编译，你需要执行以下操作：

1）当你创建jar时（通常把它放在一个脚本中）：jar -cvfm my.jar com/test/myclass/manifest.txt com/test/myclass/MyClass.class

2) 清单应如下所示：

Mainfest 版本：1.0 主类：com.test.myclass.MyClass 类路径：. 我的.jar

3）现在你可以像这样从任何地方运行jar：

java -jar my.jar

希望这可以帮助某人

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-05-26T21:38:13.020

我按照以下说明在 Eclipse 中创建一个可执行的 .jar。然后运行命令“java -jar .jar”来启动程序。

它负责为您创建 mainfest 并包含主类和库文件部分。

[http://java67.blogspot.com/2014/04/how-to-make-executable-jar-file-in-Java-Eclipse.html](http://java67.blogspot.com/2014/04/how-to-make-executable-jar-file-in-Java-Eclipse.html)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-11-11T11:06:33.703

在 IntelliJ 中，尝试将 lib 文件夹从主项目文件夹添加到工件时出现此错误。

在 src 文件夹中放置和使用 lib 文件夹是可行的。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-11-23T10:35:59.860

我有这个错误是因为我在我的`MANIFEST.MF`

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-04-28T16:44:43.827

如果您使用包名称，它将不适用于包含点 ( `Error: Could not find or load main class`) 的文件夹。即使它成功编译并创建了 jar 文件。

相反，它需要完整的文件夹层次结构。

失败：

```
com.example.mypackage/
    Main.java 
```

作品：

```
com/
    example/
        mypackage/
            Main.java 
```

在 Linux 中编译：

`javac `find com/ -name '*.java'` \ && jar cfe app.jar com.example.mypackage.Main `find com/ -name '*.class'``

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-09-26T20:59:35.597

我收到此错误是因为我的主类在**测试**包中，并且我正在使用 IntelliJ 创建工件。在创建工件时选中**包含测试**框后，它得到了解决。

[IntelliJ 的屏幕截图显示包含测试复选框](https://i.stack.imgur.com/R6SKR.png)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2022-01-09T05:31:13.763

如果您使用 Maven 项目进行设置——请确保以下内容与 pom.xml 文件中的 JDK 匹配。

```
<maven.compiler.source>17</maven.compiler.source>

<maven.compiler.target>17</maven.compiler.target> 
```

在我的情况下，我将它设置为 14，而我的应用程序设置为 14——冲突导致我的 jar 文件给出类未找到错误。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-01-20T17:40:04.513

我有这个错误是因为我通过 IntellijIDEA 将 JAR 文件从库中提取到目标 JAR。当我选择另一个选项“复制到输出目录...”时，它解决了问题。希望这可以帮助你

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-02-12T13:39:55.497

`<build>`通过 maven 打包时，有时可能会丢失 pom.xml 中标记下的以下行。因为**src**文件夹包含你的 java 文件

```
<sourceDirectory>src</sourceDirectory> 
```

# java - 休眠只读会话 - 更新实体

> ID：13030677
> 
> 赞同：1
> 
> 时间：2012-10-23T12:43:39.673
> 
> 标签：java, hibernate

我们已通过调用将所有会话设置为只读`setDefaultReadOnly(true)`。然而，即使我们明确调用`session.update(entity)`. 我可以看到为什么会发生这种情况，hibernate 不知道这个实体是脏的。

我的问题是，我如何告诉 hibernate 我已经对这个需要同步的实体进行了更改？我尝试合并实体，`session.merge(entity)`但没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:53:58.040

在更改实体的状态之前，使其不是只读的： [session.setReadOnly(entity, false)](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#setReadOnly%28java.lang.Object,%20boolean%29)

然后编辑实体，让刷新/提交照常进行脏检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:48:15.117

尝试这个：

[`session.refresh(entity)`](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#refresh%28java.lang.Object%29)

# magento - 在 Magento 中使用 addCss 添加带参数的 php

> ID：13030678
> 
> 赞同：4
> 
> 时间：2012-10-23T12:43:41.483
> 
> 标签：magento

我使用 php 文件作为样式表。当没有参数时，这工作得很好

```
<action method="addCss">
  <stylesheet>style.php</stylesheet>
</action> 
```

但是一旦我向请求中添加了一个参数，Magento 就不再知道该文件在我自己的主题中，而是使用默认主题的路径。当然，由于没有名为 style.php?param=val 的文件，因此使用了常见的后备。**但是我怎么能强制 Magento 使用我的主题，无论它是否在那里找到文件？**

```
<action method="addCss">
  <stylesheet>style.php?param=val</stylesheet>
</action> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T13:34:21.057

addItem 方法限制较少。addJs 和 addCss 检查文件是否存在。试试这个：

```
<action method="addItem">
   <type>link_rel</type>
   <name>style.php?param=val</name>
   <params>rel="stylesheet" type="text/css"</params>
</action> 
```

:)

# html - HTML/CSS - 无法选择的行号

> ID：13030682
> 
> 赞同：-1
> 
> 时间：2012-10-23T12:43:59.610
> 
> 标签：html, css

我想在一个块中显示一些代码，并包含行号。如何获得显示的行号，不能选择，不依赖 Javascript？

Pastebin.com 似乎能够做到这一点，但我不太清楚如何做到这一点。有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:53:46.757

Pastebin 通过将每一行内容添加为有序列表中的 LI 元素来解决此问题。

```
<ol>
  <li>public void foo() {</li>
  <li>  System.out.println("bar");</li>
  <li>}</li>
</ol> 
```

选择时不会复制此类列表中的数字：

1.  公共无效 foo() {
2.  System.out.println("bar");
3.  }

其余的是使用 css 进行样式设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:47:52.107

在 pastebin.com 的例子中，他们只使用 HTML 中的有序列表，生成行编号列表。您不能在 HTML 中选择列表项编号或项目符号...</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:48:26.583

这很简单`ol > li`（每一行都是一个有序的列表项）。

# pimcore - Pimcore pixlr api 集成

> ID：13030684
> 
> 赞同：0
> 
> 时间：2012-10-23T12:44:02.577
> 
> 标签：pimcore, pixlr

现在我正在测试 pimcore 的功能。

确实它与 pixlr 有很好的集成，但它在本地机器上显示了一些问题。

实际上我已经建立了一个虚拟主机`pmc.com`。`port 81`当我单击`edit image`编辑图像时会发生什么 pimcore 生成像 [http://pmc.com/admin/assets/..](http://pmc.com/admin/assests)这样的 url 。它没有添加，`port 81`所以我无法保存和编辑图像`localhost`。

谁能帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:42:35.513

来自 Pimcore 团队的一名成员：

> 如果您有一个封闭的系统 Pixlr 无法通过本地 url 加载您的图像。（示例`http://localhost/admin/asset/get-image-thumbnail`）通过使用 dyndns.org 可以实现一种可能性，因此 Pixlr 可以处理您的图片

[Pixlr 无法加载本地图像](http://www.pimcore.org/board/viewtopic.php?t=967&p=3586)

换句话说，您必须有一个可访问的主机，以便 Pixlr 可以加载您的图片（pcm.com 是您机器的虚拟主机，在 Internet 上不可见）。

希望这有帮助。

# cakephp - 为什么 deleteAll 使用 SELECT？

> ID：13030686
> 
> 赞同：2
> 
> 时间：2012-10-23T12:44:06.073
> 
> 标签：cakephp, sql-delete

这是我的简单代码：

```
$this->deleteAll(array('expiration <=' => CakeTime::format('Y-m-d H:i:s', time()))); 
```

我在查询结果中看到了这一点：

```
SELECT `Token`.`id` FROM `cake`.`tokens` AS `Token` WHERE `expiration` <= '2012-10-23 14:37:04'
DELETE `Token` FROM `cake`.`tokens` AS `Token` WHERE `Token`.`id` = (6) 
```

简而言之，CakePHP 似乎首先检索了与条件对应的记录的 id，然后使用检索到的 id 进行删除。

但这没有任何意义，因为它可以直接使用给定的条件进行：

```
DELETE `Token` FROM `cake`.`tokens` AS `Token` WHERE `expiration` <= '2012-10-23 14:37:04' 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T12:49:22.187

如果您想要运行模型回调或级联删除以删除相关记录，则需要单独获取和删除记录。因此，为函数传递 false`$cascade`和`$callbacks`参数，`deleteAll()`将使用单个查询删除记录，而无需先检索任何记录。

# eclipse-plugin - 如何使用 Eclipse 插件以编程方式访问 JDT 图标？

> ID：13030687
> 
> 赞同：6
> 
> 时间：2012-10-23T12:44:13.193
> 
> 标签：eclipse-plugin

我想在我的插件中使用内置的 JDT 图标：[http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fref-icons。 htm](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fref-icons.htm)

如何从我的代码中访问它们？以下代码似乎列出了一些共享图像，但仅列出了 ecrise 的标准 UI 图标，而不是特定于 JDT 的（我需要 Java 中的私有/公共/...方法/字段的图标）：

```
IWorkbench workbench = PlatformUI.getWorkbench();
ISharedImages images = workbench.getSharedImages();
Image image = images.getImage(ISharedImages.IMG_OBJ_FOLDER); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T12:57:38.217

刚刚发现：在我上面的代码中，而不是使用`org.eclipse.ui.ISharedImages`( 由返回`workbench.getSharedImages()`，只是使用`org.eclipse.jdt.ui.ISharedImages`，它返回 jdt 图像的常量。

**更新：**

上面给了我一个 NullPointerException。现在正在执行以下操作：

```
ISharedImages images = JavaUI.getSharedImages();
Image image = images.getImage(ISharedImages.IMG_WHATEVER); 
```

# c# - 为什么多行设置为true时文本位置不同。这可以避免吗？

> ID：13030692
> 
> 赞同：0
> 
> 时间：2012-10-23T12:44:36.007
> 
> 标签：c#, winforms, textbox

我有一个包含多个 TextBox 控件的表单。有些将多行设置为真，有些则设置为否。使用大字体时，文本位置很明显不同。当 multiline 为真时，文本周围会出现某种额外的边距。下面的代码片段

```
TextBox textBox = new TextBox();
textBox.Text = "Test";
textBox.Font = new Font("Segoe UI", 16);
Console.WriteLine("Single Line:" + textBox.GetPositionFromCharIndex(0));
textBox.Multiline = true;
Console.WriteLine("Multi Line:" + textBox.GetPositionFromCharIndex(0)); 
```

输出单行：{X=1,Y=0} 多行：{X=7,Y=1}

我的问题是：为什么要在多行模式下添加此边距？这可以避免/控制吗？

我已经发现多行模式下的文本是用

```
TextFormatFlags.TextBoxControl | TextFormatFlags.WordBreak | TextFormatFlags.NoClipping 
```

在单行模式下

```
TextFormatFlags.TextBoxControl | TextFormatFlags.NoPadding | TextFormatFlags.SingleLine 
```

用来。有没有办法控制 TextBox 使用的 TextFormatFlags？

感谢您为回答我的问题所做的任何努力！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:53:43.887

您必须创建自己的从 TextBox 派生的类，并通过覆盖 OnPaint 来处理 Paint 事件。

在那里，您将根据需要使用适当的 TextFormatFlags 完全控制如何为 TextBox 呈现文本。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:59:43.603

出于某种原因，我不确定 Segoe UI 似乎会抵消多行文本框中的字符。Microsof Sans Serif 没有同样的问题。

我的建议：尝试使用其他字体。

# python - Python ctypes 生成器

> ID：13030693
> 
> 赞同：0
> 
> 时间：2012-10-23T12:44:38.330
> 
> 标签：python, c++, c, ctypes

关于 Python ctypes 生成器的任何建议？我在那里看到以下内容：

这是相当老的（2005）： [http ://starship.python.net/crew/theller/ctypes/old/codegen.html](http://starship.python.net/crew/theller/ctypes/old/codegen.html)

这似乎没有什么可下载的： [http ://code.google.com/p/ctypesgen/](http://code.google.com/p/ctypesgen/)

这是一种可能性：http: [//sourceforge.net/projects/pygccxml/files/ctypes%20code%20generator/](http://sourceforge.net/projects/pygccxml/files/ctypes%20code%20generator/)

我猜我会用手来做这件事，但是，我希望能抢先一步。

谢谢，斯科特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:56:27.457

对于 ctypesgen，您可以[使用 subversion](http://code.google.com/p/ctypesgen/source/checkout)来检查主干。另一种可能性可能是[PyCParser](https://github.com/albertz/PyCParser)。

# objective-c - 添加到登录项 - 沙盒友好的解决方案

> ID：13030694
> 
> 赞同：3
> 
> 时间：2012-10-23T12:44:47.130
> 
> 标签：objective-c, macos, cocoa

好的，这是我的情况：

*   我有几个应用程序（实际上是状态栏应用程序），必须从登录开始（如果用户愿意）
*   我一直在使用 Uli Kuster 的[LoginItem](https://github.com/uliwitness/UliKit)代码，它运行良好
*   根据最新的 Apple 指南，所有新提交的应用程序都必须进行沙盒处理。

问题 ：

*   `UKLoginItem`和沙盒不能一起工作。所以，我正在寻找一种替代（和可接受的）方法来做同样的事情。

有任何想法吗？有什么可以指点我的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T12:51:22.020

您可以使用帮助工具在登录时启动应用程序。

这里有一个例子：

[http://blog.timschroeder.net/2012/07/03/the-launch-at-login-sandbox-project/](http://blog.timschroeder.net/2012/07/03/the-launch-at-login-sandbox-project/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T12:54:07.053

使用服务管理框架。具体来说，`SMLoginItemSetEnabled`。请参阅[使用服务管理框架添加登录项](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLoginItems.html "添加登录项")。

请注意，您*必须*使用服务管理框架。LaunchServices 方法在沙盒环境中不可用。

# java - 特定字符串的正则表达式

> ID：13030699
> 
> 赞同：1
> 
> 时间：2012-10-23T12:45:09.463
> 
> 标签：java, regex

如何为 char 编写正则表达式`{`？

我需要为字符串写一个模式 `{\"2\":{\"0\":abc}}...`

`{`当我从字符串中排除它的工作正常

感谢所有评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:48:28.660

要`{`在正则表达式中使用该字符，您需要像这样对其进行转义：`\{`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:59:41.043

正则表达式中的花括号具有特殊的功能。例如，如果您提到 \d{3,5} --它表示捕获长度最小为 3 到最大为 5 的任何数字。因为它在正则表达式中具有特殊功能，因此需要对其进行转义。

# database - 数据库错误中的 Codeigniter 设置值

> ID：13030700
> 
> 赞同：0
> 
> 时间：2012-10-23T12:45:11.793
> 
> 标签：database, codeigniter, insert, set

id ans1_r ans2_r ans3_r ans4_r ans5_r ans6_r

我在**anketemale** 表中有这些字段。所有字段都是整数。

**`$answer`是列名。`$id`是所选行的 id。** 因此，我想在特定行中+1，并且只是其中一个 ans 字段。我写了这段代码：

```
function upisi_malu($id,$answer)
    {
        $anketadb = $this->load->database('anketa',TRUE);

    $anketadb->select($answer);
    $anketadb->where('id', $id); 
    $q = $anketadb->get('anketemale');

    foreach ($q->result() as $row)
    {
    $ans = $row->$answer + 1;
    }
    echo $answer; //just to know I echo them, and values are right
    echo $ans;
    echo $id;
    $anketadb->set($answer, $ans); 
    $anketadb->where('id', $id); 
    $anketadb->insert('anketemale'); 
} 
```

为什么这段代码将每个更改都写入新行？我只想更改已经存在的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:26:53.460

```
foreach ($q->result() as $row)
{
    $ans = $row->$answer + 1;
    $anketadb->set($answer, $ans); 
    $anketadb->where('id', $id); 
    $anketadb->update('anketemale');
} 
```

这是我根据您的信息所能得出的最佳猜测。您正在使用`insert`而不是`update`在您的示例中。`insert`将始终创建一个新行...`update`只会更新`where`匹配时存在的行。

# ios - 尝试在设备“无法识别的目标文件格式”上测试 xcode ios 应用程序时弹出错误

> ID：13030702
> 
> 赞同：0
> 
> 时间：2012-10-23T12:45:20.070
> 
> 标签：ios, xcode, device, ipod

您好，当我尝试在 iPhone Touch 上测试我的应用程序时遇到问题！

这是错误的内容：

```
**CodeSign /Users/scerip/Desktop/Projects/Debug-iphoneos/tweejump.app cd /Users/scerip/Desktop/haqu-tweejump-9a05d35 setenv PATH "/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin" setenv _CODESIGN_ALLOCATE_ /Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/codesign_allocate /usr/bin/codesign -f -s "iPhone Developer: Jens Gleerup (4JA43UQ24Y)" --resource-rules=/Users/scerip/Desktop/Projects/Debug-iphoneos/tweejump.app/ResourceRules.plist --entitlements /Users/scerip/Desktop/Projects/tweejump.build/Debug-iphoneos/tweejump.build/tweejump.xcent /Users/scerip/Desktop/Projects/Debug-iphoneos/tweejump.app

/Users/scerip/Desktop/Projects/Debug-iphoneos/tweejump.app: object file format unrecognized, invalid, or unsuitable Command /usr/bin/codesign failed with exit code 1** 
```

该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:53:13.300

似乎您没有正确安装您的配置文件...

# mybatis - Mybatis 将属性映射到列

> ID：13030708
> 
> 赞同：2
> 
> 时间：2012-10-23T12:45:29.487
> 
> 标签：mybatis

我有一个查询映射器，如下所示：

```
<select id="searchSomething" parameterType="SomeType" resultType="SomeOtherType">
  select xxxxx
  from T_XXXX
  where 1=1
  <if test="propertyName == 'userName'">
    and USER_NAME = #{propertyValue}
  </if>
  <if test="propertyName == 'address'">
    and ADDRESS = #{propertyValue}
  </if>
  <if test="propertyName == 'taskDate'">
    and TASK_DATE = #{propertyValue}
  </if>
  <if test="propertyName == 'phone1'">
    and PHONE_1 = #{propertyValue}
  </if>
  <if test="propertyName == 'phone2'">
    and PHONE_2 = #{propertyValue}
  </if>
  ...
</select> 
```

有这么多的属性。我怎样才能简单地将属性名称映射到列名称，如下所示：

```
<select id="searchSomething" parameterType="SomeType" resultType="SomeOtherType">
  select xxxxx
  from T_XXXX
  where 1=1
    and 
    <propertyToColumn property="propertyName" />
      = #{propertyValue}
</select> 
```

MyBatis 中有类似“propertyToColumn”的东西吗？

我在 iBatis 中找到了“insertColumnName”，它是从 MyBatis 中删除的吗？

parameterType 是一个 java 类，如：

```
public class SomeType{
  private String propertyName;
  private String propertyValue;
  ... getters and setters
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T05:40:17.027

一种方法是使用：

准备两个 ArrayList，一个带有 propertyNames，另一个带有 propertyValues。确保它们的顺序正确，即propValuesList[i] 应该具有propNamesList[i] 的值。

然后将其放入 HashMap 并将其作为输入传递给映射语句：

```
Map<String,Object> map = new HashMap<String,Object>();
List<String> propNamesList = new ArrayList<String>();
List<String> propValuesList = new ArrayList<String>();
propNamesList.add(0, "USER_NAME");
propNamesList.add(1, "ADDRESS");

propValuesList.add(0, "admin");
propValuesList.add(1, "hyderabad");

map.put("propNames",propNamesList);
map.put("propValues",propValuesList); 
```

然后在映射语句中：

```
<select id="selectUsers" parameterType="hashmap" resultMap="UserResult">
    select * from users
    where 1 =1
    <if test="propNames != null and propValues != null">
       <foreach item="propName" index="index" collection="propNames">
        and #{propName} = #{propValues[${index}]}
       </foreach>
    </if>
 </select> 
```

注意使用**${index}**而不是**#{index}**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:56:32.037

我认为如果您在代码中进行“参数列”转换，并将结果列作为参数传递，可能会更好。在这种情况下，您可以执行以下操作：

```
<select id="searchSomething" parameterType="SomeType" resultType="SomeOtherType">
  select xxxxx
  from T_XXXX
  where 1=1
    and 
   ${propertyColumn} = #{propertyValue}
</select> 
```

当然，您需要将**propertyColumn**添加到您的 VO。

# iphone - 多个 UISearchDisplayController 显示相同的结果

> ID：13030709
> 
> 赞同：0
> 
> 时间：2012-10-23T12:45:29.720
> 
> 标签：iphone, ios, uitabbar, uisearchdisplaycontroller

我最近遇到了一个问题。在我的应用程序中，我有一个 tabBar，其中两个选项卡包含一个 UISearchDisplayController。当我在两个 searchDisplayController 中进行研究，然后在选项卡之间切换时，它们显示相同的结果（最后一次搜索一个或另一个 searchDisplayController）。有没有办法避免这种情况？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:01:48.143

它们对应于 UISearchDisplayDelegate 的相同委托方法。您可以为它们分配标签以防止这种情况发生，或者您可以阅读标签栏的选定索引以查看用户在里面的位置

放置断点以查看两个 searchDisplayController 是否同时重新加载表。

```
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchScope:(NSInteger)searchOption {
   //selected index of tabbar is the right one return yes
   if(self.tabBarController.selectedIndex ==1){
   return YES;
   }else{
   return NO;
   }
   //else no
 } 
```

这样您就不会重新加载错误的委托。

# powershell - CppCheck 从 Powershell 输出到 xml 文件

> ID：13030710
> 
> 赞同：1
> 
> 时间：2012-10-23T12:45:29.937
> 
> 标签：powershell, teamcity, cppcheck, teamcity-7.1

作为构建的一部分，我想在我们的代码上运行 CppCheck。但是，如果不从命令提示符执行，我无法将输出保存到文件中。

从常规（Windows）命令提示符，或在 .bat 文件中使用硬编码路径，以下工作正常：

```
"C:\Program Files\Cppcheck\CppCheck.exe" --enable=all  --xml-version=2 "<full_path_with_spaces_to_source>" 2> cppcheck_result.xml 
```

但是，我想从脚本运行它，例如 Powershell。我试过这个：

```
& 'C:\Program Files (x86)\Cppcheck\cppcheck.exe' --enable=all --xml-version=2 $CheckPath | Out-File cppcheck_ps.xml 
```

但这会将检查到 xml 文件的文件通过管道传输，并且 xml 结果显示在 Powershell 的输出窗格中。

我还尝试直接从我们的构建服务器（TeamCity）运行 exe 文件作为命令行构建步骤，但没有创建输出文件！执行检查并在构建日志中看到正常输出，但不知何故 2> 丢失了。我正在使用 TeamCity 7.1.1 版。

我已经搜索了我能想到的所有地方，我能找到的最接近的是[This](https://superuser.com/questions/282140/redirect-7-zips-command-line-output-to-dev-null-on-windows-when-extracting-a-7)。

但这对我不起作用，所以任何帮助将不胜感激。

或者，如果您知道运行 CppCheck 并获得结果的更好方法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:17:42.623

我没有这个工具，但是如果您需要从中捕获 stderr，请尝试：

```
& '.\cppcheck.exe' --enable=all --xml-version=2 $CheckPath 2>&1 | Out-File cppcheck_ps.xml 
```

注意我删除了 exe 的完整路径只是为了缩短显示命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T10:25:29.450

我对powershell的工作原理一无所知。但是如果你必须使用 2>&1 而不是 2> 那么你当然也会得到标准输出消息。但是您可以使用 cppcheck 标志 --quiet 或 -q 来跳过标准输出输出。

# git - Git：致命：当前分支master有多个上游分支，拒绝推送

> ID：13030714
> 
> 赞同：74
> 
> 时间：2012-10-23T12:45:39.437
> 
> 标签：git

我有这个奇怪的问题，每当我这样做时`git push`它拒绝做任何事情：

`fatal: The current branch master has multiple upstream branches, refusing to push.`

当我这样做`git push -u origin master`时，它似乎将其设置为跟踪分支：

`Branch master set up to track remote branch master from origin.`

但是下次我尝试`git push`它拒绝再次这样做。我试图用谷歌搜索，但问题似乎是相当新的，我找不到任何解释这种行为。想法？

**更新：** `./git/config`

```
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = gitosis@xxxx.xx:milk.git
[branch "master"]
    remote = origin
    merge = refs/heads/master 
```

**Update2：**解决`git config remote.origin.push HEAD`了以下行出现在`.git/config`部分`[remote "origin"]`：

```
 push = HEAD 
```

**更新3：**

```
$ git branch -vv
  billing      633c796 [origin/billing: behind 889] links
* master       1a0de50 [origin/master: ahead 1] more fixes
  new_master   3b880d7 [origin/new_master] branches diverged
  photo_stacks 29c8f0d [origin/photo_stacks] 1st try
  responsive   1dad980 [origin/responsive] update

$ git push
fatal: The current branch master has multiple upstream branches, refusing to push. 
```

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-10-23T14:59:43.930

您可能想要执行以下操作：

```
git config remote.origin.push HEAD 
```

在主分支上不带任何参数推送可能会导致您的错误消息。我不确定这是否是回归问题，或者是否一直如此。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-08-23T14:01:49.663

运行`git config -l`并查看是否有多个包含 branch.master* 引用的行 [branch "master"] 部分可能重复`~/.gitconfig`，并且`.git/config.` 删除其中的一个`~/.gitconfig`为我修复了多个上游分支检测。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-23T12:52:17.337

您必须指定要推送到哪个分支。`git push`将自动尝试推送本地分支正在跟踪的所有参考和标签。服务器上的在线分支可能已经向前发展。因此，您可能会遇到这种情况。你应该简单地使用

```
git push origin master 
```

并且还要协调更改，`git pull`这将使用来自服务器的本地引用更新您的本地引用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-12-13T00:38:17.047

很可能是因为`branch.master.remote`您的 git 配置中有 2 个或更多。一个来自您的全局 git 配置，另一个来自您的仓库本地 git 配置。

当在 git 配置中指定了其中的 2 个时，git 可以安全地不假设其中一个，即使后者定义的应该覆盖前者。

您克隆的现代存储库应在本地包含配置，但您的全局 git 配置很可能也已`branch.master.remote`定义。

要检查您是否在全局配置中设置了它，请使用：

```
git config --global --list | grep branch.master 
```

您可以删除或注释掉`branch`git 全局配置中的部分，您应该一切顺利。

```
git config --global --remove-section branch.master 
```

这将完全删除`[branch "master"]`部分。

如果您想将其保留在全局配置中以防万一，您可以将其重命名为您可能不会使用的其他分支。

```
git config --global --rename-section branch.master branch.someothername 
```

有了这个，当你`git push`在主分支上做的时候，你不应该得到多个上游分支错误。

`git remote show origin`也不应该再引起警告。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-31T18:51:24.640

好吧，在用全新的 repos 处理了两次之后，我有了一个答案。

git 远程 -v

git remote rm（如果您添加了任何其他遥控器，则除 origin 以外的所有内容）

git 远程 rm 起源

！警告：不止一个 b​​ranch.master.remote <-- 这很好

git remote add origin git@github.com:yourname/yourrepo

拉 + 推 = 固定

# c++ - 如何在 C++ 中转换为 utf8 字符串

> ID：13030722
> 
> 赞同：3
> 
> 时间：2012-10-23T12:46:05.600
> 
> 标签：c++, string, utf-8

我有一个字符串输出，它不一定是有效的 utf8。我必须将它传递给只接受有效 utf8 字符串的方法。
因此，我需要将输出转换为最接近的有效 utf8 字符串，删除无效字节或部分。我怎么能在 C++ 中做到这一点？我不想使用第 3 方库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:47:58.627

您应该使用这些`icu::UnicodeString`方法`fromUTF8(const StringPiece &utf8)`或`toUTF8String(StringClass &result).`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:57:51.260

如果您确定您的字符串是有效的 UTF-8，只有几个损坏的字节，[http://utfcpp.sourceforge.net/](http://utfcpp.sourceforge.net/)可以解决这个问题。从页面：

```
`#include "utf8.h"
void fix_utf8_string(std::string& str) {
    std::string temp;
    utf8::replace_invalid(str.begin(), str.end(), back_inserter(temp));
    str = temp;
}`
```

`在处理 Unicode 数据时，您几乎不可能要求不使用 3rd 方库，但 UTF8-CPP 库是仅标头，这是您可以得到的最轻量级的。`

# sql - 试图避免 RBAR！如何将相关表上的插入关联为基于集合的操作？

> ID：13030723
> 
> 赞同：6
> 
> 时间：2012-10-23T12:46:07.417
> 
> 标签：sql, sql-server, tsql, sql-server-2005, set-based

假设一个模式包含以下表：

**巴兹**

```
BazID (PK, Identity)
Description 
```

**FooTemplate**（一个 Baz 可能有零到多个 FooTemplates）

```
FooTemplateID (PK, Identity)
BazID (FK)
Description
NextGenerationDate 
```

**BarTemplate**（一个 FooTemplate 可能有零到多个 BarTemplate）

```
BarTemplateID (PK, Identity)
FooTemplateID (FK)
Description 
```

**Foo**（一个 Baz 可能有零到多个 Foo）

```
FooID (PK, Identity) 
BazID (FK)
Description 
```

**Bar**（一个 Foo 可能有零到多个 Bar）

```
BarID (PK, Identity)
FooID (FK)
Description 
```

每天将执行一个存储过程来为已超过其下一代日期的关联实体`Foo`生成`Bar`实体。`Baz`

这个过程的第一部分看起来有点像这样：

```
DECLARE @GeneratedFooIDList TABLE (INT FooID);
INSERT Foo (BazID, Description)
OUTPUT inserted.FooID INTO @GeneratedFooIDList
SELECT
  BazID
  Description
FROM
  FooTemplate
WHERE
  NextGenerationDate < GETDATE() 
```

我的问题是我现在可以执行什么语句来生成正确的`Bar`实体并使它们与新创建的`Foo`实体正确关联？

**编辑：**该过程将在运行 SQL Server 2005 的服务器上执行。

**EDIT2：**感谢大家的帮助。在仔细考虑了这些信息后，我选择了另一种解决方案。我已将 Foo 表中的主键更改为不再是自动生成的标识列，这样可以执行对临时表的中间插入以捕获相关的 FooTemplateID 以及 FooID

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:01:07.423

如果我正确理解您的架构

```
declare @GeneratedFooIDList table (FooID int, FooTemplateID int)
declare @Date datetime = getdate()

/*
insert Foo (BazID, Description)
    output inserted.FooID, FT.FooTemplateID into @GeneratedFooIDList
select
    FT.BazID,
    FT.Description
from FooTemplate as FT
where
    FT.NextGenerationDate < @Date
*/

merge into Foo using
(
    select *
    from FooTemplate as FT
    where
        NextGenerationDate < @Date
) as FT on 1 = 0
when not matched then
insert (BazID, Description)
values (BazID, Description)
output inserted.FooID, FT.FooTemplateID into @GeneratedFooIDList;

insert Bar (FooID, Description)
select
    G.FooID
    BT.Description
from BarTemplate as BT
    inner join @GeneratedFooIDList as G on G.FooTemplateID = BT.FooTemplateID 
```

好吧，如果您有 SQL Server 2005，那么这将不起作用。我可以建议另一种解决方案，它取决于表中组合`(BazID, Description)`的唯一性。`FooTemplate`如果有帮助，它也可以用 date < @Date 的 fooTemplate 变量表重写。

[http://sqlfiddle.com/#!3/ee576/29](http://sqlfiddle.com/#!3/ee576/29)

```
declare @GeneratedFooIDList table (FooID int)
declare @Date datetime = getdate()

insert Foo (BazID, Description)
    output inserted.FooID into @GeneratedFooIDList
select
    FT.BazID,
    FT.Description
from FooTemplate as FT
where
    FT.NextGenerationDate < @Date

insert Bar (FooID, Description)
select
    G.FooID,
    BT.Description
from @GeneratedFooIDList as G
    inner join Foo as F on F.FooID = G.FooID
    inner join FooTemplate as FT on FT.BazID = F.BazID and FT.Description = F.Description
    inner join BarTemplate as BT on BT.FooTemplateID = FT.FooTemplateID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T13:52:38.870

这是一个**很大**的假设，即每个 BazID 只有一个 FooTemplate，每个 FooTemplate 只有一个 BarTemplate。如果不是这种情况，则结构很难确定哪个 baz 与哪个 foo 模板一起使用，以及哪个 bartemplate 与哪个 footemplate 一起使用——您必须在描述列中折腾以确保唯一性，并且没有 PK 或 UQ你不能确定唯一性。

```
INSERT Bar (FooID, Description)
 select new.FooId, bt.Description
  from @GeneratedFooIDList new
   inner join Foo f
    on f.FooId = new.FooId
   inner join FooTemplate  ft  --  one to one assumption here
    on ft.BazID = f.BazID
   inner join BarTemplate bt  --  another one to one assumption here
    on bt.FooTemplateId = ft.FooTemplateId 
```

根据@RomanPekar，如果您可以在临时表中添加 FooTemplateId，那么以后的更新会更简单，但是您是对的，输出子句仅适用于`inserted`并且`deleted`（当您开始处理新的身份列时它会变得非常繁琐）

* * *

[添加]

以下是我总结核心问题的方式：

*   您将许多行添加到 Foo 表
*   每行都有一个新生成的代理键（FooId）
*   现在必须为这些新的 Foo 实体中的*每一个生成零个或多个 Bar 行*
*   因此，您的每个新行都必须映射回其原始 FooTemplate 行，以便获取“源”FooTemplate 的必要 BarTemplate 行
*   但是，Foo 表中没有任何内容可以启用此映射（例如，将 Foo 与其源 FooTemplate 链接。不能使用 BazId，因为可能有多个模板；不能——嗯，不应该——使用描述，因为不保证唯一性
*   INSERT... OUTPUT... 构造也不能提供此链接，因为它只能提取插入到 Foo 表中的列

我过去针对此类问题使用的一种解决方案是使用链接数据*临时*填充新表 (Foo) 中的列。在这里，我将 FooTemplateId 存储在 Foo.Description 中，基于此构建必要的 INSERT...SELECT，然后更新链接到 FooTemplate 上的 Foo 并用正确的值替换 description。它有效，但很尴尬。

基于@MikaelEriksson 不幸删除的帖子和引用链接（尤其是[我如何学会停止担心和喜欢 MERGE](http://sqlblog.com/blogs/adam_machanic/archive/2009/08/24/dr-output-or-how-i-learned-to-stop-worrying-and-love-the-merge.aspx) ）的替代解决方案是使用合并命令，该命令（谁知道？）*可以引用*插入和删除之外的列它的输出子句。使用它来用新的 FooID 和源 FooTemplateId 填充临时表，然后从那里开始工作。（没有样本数据来测试和调试，我对自己的 MERGE 技能没有足够的信心来尝试编写这个过程，但我相信它可以完成。）

# c# - ASP.NET MVC 4 Colorbox 部分视图表单未验证

> ID：13030733
> 
> 赞同：0
> 
> 时间：2012-10-23T12:47:19.543
> 
> 标签：c#, asp.net, .net, asp.net-mvc-4, jquery-validate

我有一个 ASP.NET MVC 4 应用程序，它对表单输入使用不显眼的 jQuery 验证。这适用于所有普通视图。当我使用 Colorbox 将页面加载到灯箱中时，表单将回发到控制器以运行验证，而无需在客户端运行任何验证。除了 Colorbox，我还有用户其他灯箱 API，没有任何问题。

通过修补，似乎没有针对此表单设置 jQuery 验证，这是有道理的，因为表单是在页面加载后加载的（当用户单击链接时）。我针对表单调用 validate() 并且只运行我编写的额外验证方法，而不是任何 MVC 验证方法（如Required 或RegularExpression）。此外，即使存在表单错误，表单仍会回发到服务器。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:54:57.817

页面加载时不显眼的验证初始化，当您使用 ajax 加载部分时，您需要初始化表单：

```
$.validator.unobtrusive.parse('#form_selector'); 
```

更多细节：[jquery.validate.unobtrusive 不使用动态注入元素](https://stackoverflow.com/questions/4406291/jquery-validate-unobtrusive-not-working-with-dynamic-injected-elements)

# php - dhtmlxgrid 服务器端排序和分页

> ID：13030736
> 
> 赞同：0
> 
> 时间：2012-10-23T12:47:24.397
> 
> 标签：php, javascript, jquery, dhtmlx

我有一个应该显示大数据集的网格。我使用服务器端排序对数据进行排序，但现在我的问题是数据已排序，但它只显示第一页。

通常，`GET`当页面更改时会发送变量（posStart 和 count）。但是在我进行排序之后，它不会发送这些变量。它什么也不发送，这就是其他页面不显示任何内容的原因。

**更新**

我有以下代码：

```
 mygrid.attachEvent("onBeforeSorting",function(ind,type,direction){
    window.a_direction = direction;       
    window.s_col = ind;      
    var grid = this;     
    grid.setSortImgState(true,window.s_col,window.a_direction);              
    grid.clearAndLoad("getEscalations.php?endDate="+$('#endDate').val()+"&startDate="+$('#startDate').val()+"&dir="+window.a_direction+"&ind="+window.s_col+"&surveyID="+$('#surveyID').val(),function(){
        grid.setSortImgState(true,window.s_col,window.a_direction);     
    });  
}); 
```

现在这是为了对数据进行排序，现在在我运行这个函数之后，问题就出现了，只填充第一页。

# jquery - 使用 jQuery 的图像效果

> ID：13030743
> 
> 赞同：0
> 
> 时间：2012-10-23T12:47:40.920
> 
> 标签：jquery, image, hide, fadein

有人可以帮我弄这个吗？我有一个菜单滑块，每次您将鼠标悬停在列表项上时，都会显示一个新图像，问题是：每次显示新图像时它都会加载，然后它遵循我的代码，因此，图像显示，然后它隐藏了，然后它淡入了，但我希望图像在它出现之前就被隐藏起来。

我的代码：

```
<script type="text/javascript">
$('#image_div').prepend(
    $('<img/>',{ }).load(
        function(){
            $(this).hide().delay(500).fadeIn(1000);
            $('#image_div img:first').next().animate({},0,function(){
                $(this).remove();
            });
        }
    ).attr('src',''+info_elem.find('.info_image').html())
);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:52:36.153

在没有查看您的 HTML/CSS 的情况下，我会说最简单的解决方案是使用`display:none`默认具有的 CSS 类设置图像元素。

**在 JS 中**

`$('<img class="hidden" />',{}).load(...)`

**在 CSS 中**

```
.hidden {
    display:none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:53:54.617

```
// ...
$('<img/>',{}).css('display', 'hidden').load(
// ... 
```

# java - 在一个活动android应用程序中创建多个功能

> ID：13030745
> 
> 赞同：0
> 
> 时间：2012-10-23T12:47:46.030
> 
> 标签：java, android, xml

问题 1：我有 2 个活动。我想知道如何优化它。我可以使用多个侦听器创建 2 个活动。或者为每个按钮创建多个 java 文件（onclick 监听器） 问题 2：我尝试在一个 java 中创建多个监听器，但只能让一个按钮工作。一个java文件中多个监听器的语法是什么？这是我的*更新代码：现在的问题是无论单击什么按钮都会导致相同的页面。我认为问题在这些括号 [-{}-] activity1.java 中的文本中指出

```
package install.fineline;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Button;
import android.view.View;
import android.view.View.OnClickListener;

public class Activity1 extends Activity {

Button Button1;
Button Button2;
Button Button3;
Button Button4;
Button Button5;
Button Button6;
[-{
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.fineline);
addListenerOnButton();
}
}-]

public void addListenerOnButton() {

final Context context = this;

Button1 = (Button) findViewById(R.id.autobody);

Button1.setOnClickListener(new OnClickListener() {

    public void onClick(View arg0) {

        Intent intent = new Intent(context, Activity2.class);
        startActivity(intent);   

    }

});

Button2 = (Button) findViewById(R.id.glass);

Button2.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {

        Intent intent = new Intent(context, Activity2.class);
        startActivity(intent);   

    }

});

Button3 = (Button) findViewById(R.id.wheels);

Button3.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {

        Intent intent = new Intent(context, Activity2.class);
        startActivity(intent);   

    }

});

Button4 = (Button) findViewById(R.id.speedy);

Button4.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {

        Intent intent = new Intent(context, Activity2.class);
        startActivity(intent);   

    }

});

Button5 = (Button) findViewById(R.id.sevan);

Button5.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {

        Intent intent = new Intent(context, Activity2.class);
        startActivity(intent);   

    }

}); 
```

Button6 = (Button) findViewById(R.id.towing);

Button6.setOnClickListener(new OnClickListener() {

```
@Override
public void onClick(View arg0) {

    Intent intent = new Intent(context, Activity2.class);
    startActivity(intent);   

}

});

}}

activity2.java

package install.fineline;

import android.app.Activity;
import android.os.Bundle;
import android.widget.Button;

public class Activity2 extends Activity {

Button button1;

public void onCreate1(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.autobody);
}
Button button2;

public void onCreate2(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.glass);
}
Button button3;

public void onCreate3(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.wheels);
}
Button button4;

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.speedy);
}
Button button5;

public void onCreate5(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.sevan);
}

Button button6;

public void onCreate6(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.towing);
}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:53:22.713

你的答案绝对是正确的。但是`onCreate1`, `onCreate2`, 等永远不会被调用。相反，试试这个：

```
package install.fineline;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Button;
import android.view.View;
import android.view.View.OnClickListener;

public class Activity1 extends Activity {

Button button1;
Button button2;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fineline);
    addListenerOnButton();
}

public void addListenerOnButton() {

    final Context context = this;

    button1 = (Button) findViewById(R.id.autobody);

    button1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            Intent intent = new Intent(context, AutoBodyActivity.class);
            startActivity(intent);   

        }

    });

    button2 = (Button) findViewById(R.id.glass);
    button2.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {
        Intent intent = new Intent(context, GlassActivity.class);
        startActivity(intent);   
    }
});
} 
```

并为您想要提出的每个布局单独制作`Activity`（请注意，在上面的代码中，我引用了`AutoBodyActivity`而`GlassActivity`不是`Activity2`）：

```
package install.fineline;

import android.app.Activity;
import android.os.Bundle;

public class AutoBodyActivity extends Activity {

    public void onCreate1(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.autobody);
    }
} 
```

和：

```
package install.fineline;

import android.app.Activity;
import android.os.Bundle;

public class GlassActivity extends Activity {

    public void onCreate1(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.glass);
    }
} 
```

它在创建`Activity`. `onCreate()`创建时会自动调用该方法`Activity`，但`onCreate1()`从未调用过该方法。

我认为您应该查看一些[基本的 Java 教程](http://www.tutorialspoint.com/java/java_basic_syntax.htm)以了解更多的语法，然后再学习[Android 教程](http://developer.android.com/training/basics/firstapp/starting-activity.html)。这将帮助您理解为什么您的代码`Activity2`没有按照您认为的方式工作，并让您更好地了解如何处理单独的活动。无意冒犯:) 我们都在学习。

希望我的回答对你有所帮助。

# apache - 如何通过重写引擎从 URL 中删除尾部斜杠？

> ID：13030755
> 
> 赞同：0
> 
> 时间：2012-10-23T12:48:05.183
> 
> 标签：apache, mod-rewrite, redirect, url-rewriting

在我网站的根目录中，我有一个`.htaccess`包含以下内容的文件：

```
RewriteEngine On        
RewriteRule ^blogs$ ./blogs.php 
```

因此，当访问者请求 URL时，会处理并返回`mysite.com/blogs`PHP 页面。`mysite.com/blogs.php`

这种行为很好。我想通过这个额外的行为来增强它：如果访问者请求 URL `mysite.com/blogs/`（注意尾部斜杠），我希望他被重定向到 URL `mysite.com/blogs`。（我认为重定向是必要的，因为我不希望尾部斜杠出现在访问者浏览器的地址栏中）。然后，我上面提到的重写将启动并被`blogs.php`处理。

我试过了：

```
RewriteEngine On 
RewriteRule ^blogs/$ ./blogs [R=301]
RewriteRule ^blogs$ ./blogs.php 
```

但这会导致 URL 更改为`http://mysite.loc/E:/Projects/mysite/blogs`甚至没有重定向。（我在本地主机上测试。`E:/Projects/mysite`是根。）

我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T00:42:59.987

我想通了`:-)`

问题是领先的点。我已经删除了它，现在它可以工作了。

```
RewriteRule ^blogs/$ /blogs [R=301]
RewriteRule ^blogs$ ./blogs.php 
```

# java - 谷歌应用引擎中的谷歌云存储文件位置

> ID：13030756
> 
> 赞同：0
> 
> 时间：2012-10-23T12:48:08.007
> 
> 标签：java, google-app-engine, google-api, google-api-java-client, google-cloud-storage

我使用下面的代码向我的文件谷歌云存储写入了一些东西。

```
FileService fileService = FileServiceFactory.getFileService();
    GSFileOptionsBuilder optionsBuilder = new GSFileOptionsBuilder()
       .setBucket(BUCKETNAME)
       .setKey(FILENAME)
       .setMimeType("text/html")
       .setAcl("public_read")
       .addUserMetadata("myfield1", "my field value");
    AppEngineFile writableFile =
         fileService.createNewGSFile(optionsBuilder.build());
    // Open a channel to write to it
     boolean lock = false;
     FileWriteChannel writeChannel =
         fileService.openWriteChannel(writableFile, lock);
     // Different standard Java ways of writing to the channel
     // are possible. Here we use a PrintWriter:
     PrintWriter out = new PrintWriter(Channels.newWriter(writeChannel, "UTF8"));
     out.println("The woods are lovely dark and deep.");
     out.println("But I have promises to keep.");
     // Close without finalizing and save the file path for writing later
     out.close();
     String path = writableFile.getFullPath();
     // Write more to the file in a separate request:
     writableFile = new AppEngineFile(path);
     // Lock the file because we intend to finalize it and
     // no one else should be able to edit it
     lock = true;
     writeChannel = fileService.openWriteChannel(writableFile, lock);
     // This time we write to the channel directly
     writeChannel.write(ByteBuffer.wrap
               ("And miles to go before I sleep.".getBytes()));

     // Now finalize
     writeChannel.closeFinally();
     resp.getWriter().println("Done writing...");

     // At this point, the file is visible in App Engine as:
     // "/gs/BUCKETNAME/FILENAME"
     // and to anybody on the Internet through Cloud Storage as:
     // (http://storage.googleapis.com/BUCKETNAME/FILENAME)
     // We can now read the file through the API:
     String filename = "/gs/" + BUCKETNAME + "/" + FILENAME;
     AppEngineFile readableFile = new AppEngineFile(filename);
     FileReadChannel readChannel =
         fileService.openReadChannel(readableFile, false);
     // Again, different standard Java ways of reading from the channel.
     BufferedReader reader =
             new BufferedReader(Channels.newReader(readChannel, "UTF8"));
     String line = reader.readLine();
     resp.getWriter().println("READ:" + line);

    // line = "The woods are lovely, dark, and deep."
     readChannel.close(); 
```

似乎是先写后读，但是当我检查云存储区域（使用Firefox）时，文件还没有被编辑。任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:42:46.413

这是在生产环境还是开发环境中？

当您使用开发服务器时，对 Google 存储的写入是模拟的，而不是写入真正的存储桶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:42:05.963

可能有两个问题。

1.  您可能会忘记向您的存储桶添加权限。检查[https://developers.google.com/appengine/docs/java/googlestorage/overview#Prerequisites](https://developers.google.com/appengine/docs/java/googlestorage/overview#Prerequisites)怎么做。

2.  您正在尝试更新文件。在 writeChannel.closeFinally() 之后，文件变为只读。您不能更改/更新/附加到它。

# php - 我的代码中的逻辑错误

> ID：13030759
> 
> 赞同：0
> 
> 时间：2012-10-23T12:48:09.723
> 
> 标签：php, jquery, html

我无法验证下面的文本区域，不知道我的代码有什么问题。

```
 $echo .= ' <div id="chooseForm">
                <input type="checkbox" name="ArticlesOrderForm" value="ArticlesOrderForm"> <b>Articles Order Form </b>                     

            </div>'; 
```

```
$echo .= '  <script>
        jQuery(function($) {
            $(".formGroup").hide();
            $("#chooseForm input:checkbox").on("change", function() {
                if($(this).is(":checked")) {
                    $("#" + $(this).val()).show();
                }
                else {
                    $("#" + $(this).val()).hide();
                }
            });
        });

    </script>'; 
```

```
 $echo .=  '<div id="ArticlesOrderForm" class="formGroup">
            <legend>Articles Order Form</legend>
            <b><label for="article_keywords">Keywords/Titles<span class="reqd">*</span> : </label></b> <textarea rows="6" cols="50" id="article_keywords" name="article_keywords" > </textarea>
        </div>'; 
```

```
if($_POST['ArticlesOrderForm'] == 'checked') {  

  if(!isset($_POST['article_keywords']) || empty($_POST['article_keywords'])) {
    $myerror= '<li>'.__('<strong>Keywords/Titles</strong> - missing.','article_keywords').'</li>';
    }   
} 
```

如果有人没有进入该文本区域，我应该会收到一条消息“关键字/标题 - 缺失”..

谁能告诉我的逻辑有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T12:51:00.803

您正在测试错误的条件，而不是

```
if(!isset($_POST['article_keywords']) && !empty($_POST['article_keywords'])) { 
```

尝试测试

```
if(!isset($_POST['article_keywords']) || empty($_POST['article_keywords'])) { 
```

现在您正在测试它是否为*空*，而您应该测试它*是否为*空

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:55:18.723

您还没有提供完整的表格，所以这可能是也可能不是您的第一个问题。您的第一个 if 语句正在检查似乎不存在的 $_POST 变量。

```
if($_POST['ArticlesOrderForm'] == 'checked') 
```

您在表单中有一个 id 为“ArticlesOrderForm”的 DIV，但没有表单输入，因此它不会包含在 $_POST 中。$_POST 是通过 POST 从表单提交的值数组，它不包括表单的全部内容，仅包含表单中的输入。所以第一个陈述总是错误的。

要更正此问题，您将需要一个有效的输入，其 id/名称为“ArticlesOrderForm”，值为“checked”，例如我假设您需要一个复选框的名称。

```
<input type="checkbox" name="ArticlesOrderForm" value="checked" /> 
```

请注意，id 必须是唯一的，因此您不能有两个具有相同值的 id，这就是我在示例中使用 name 属性的原因，它将在 $_POST 中显示为“ArticlesOrderForm”，但不会与 div 冲突id 为“ArticlesOrderForm”。

在该问题之后，您需要检查您的其他陈述，正如该问题的其他答案所提到的那样。

**更新**

看过您对另一个用户的另一个问题显然是什么： [使用 jQuery 获取语法错误](https://stackoverflow.com/questions/13014735/getting-syntax-error-using-jquery)

我看不到任何表单标签，jQuery 似乎也没有尝试提交数据。您应该将表单包装在`<form>`标签中。就像是 ：

```
<form method="post" action="you_page.php">
    <!-- form fields / inputs -->
</form> 
```

如果是这种情况，你真的需要在开始使用 javascript/php 之前复习一下你的 html！看看这个以帮助您入门：[HTML 表单](http://docs.webplatform.org/wiki/html/elements/form)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T12:51:36.307

您正在检查是否`$_POST['article_keywords']`未设置且不为空。这两者相互排斥。

您可以删除`empty`或`isset`检查以实现您的目标。（或者只是`&&`用 a替换`||`并删除`!`前面的`empty`）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T12:54:35.100

@Jim（或者[是鲍勃](https://stackoverflow.com/questions/13014735/getting-syntax-error-using-jquery)？），

问题的一部分（以及其他人指出的逻辑错误）是因为浏览器没有在元素`$_POST`或元素中返回值。`$_GET``<div>`

你的 HTML 有`<div id="ArticlesOrderForm">`

看起来您正在尝试查找是否已选中复选框。在这种情况下，您应该执行以下操作，*假设*您在表单中创建了一个唯一的`<input type="checkbox" id="ArticlesOrderForm">`位置！`ArticlesOrderForm`

```
if(isset($_POST['ArticlesOrderForm'])){
} 
```

* * *

**更新**

[从昨天](https://stackoverflow.com/questions/13014735)看你的问题（假设你没有改变你的代码）我可以看到你确实有`<input type="checkbox" id="ArticlesOrderForm">`一个`<div id="ArticlesOrderForm">`.

这是**无效的 HTML**，因为页面上的所有`id`属性都**必须**是唯一的 - 您不能`id`在多个元素上拥有相同的属性。

我仍然持有它来测试复选框是否被选中仍然是......

```
if(isset($_POST['ArticlesOrderForm'])){
} 
```

...因为其中包含的值**不会**`$_POST(['ArticlesOrderForm'])`设置为. 复选框仅在已选中时才会发回一个值，**如果尚未选中**，则不会发回一个值，因此不会被设置。**`checked`**`$_POST(['ArticlesOrderForm'])`****

 ****但是您**必须**`id="ArticlesOrderForm"`从`<div>`（或称其为其他名称）中删除 才能获得有效的 HTML 。****

# node.js - 将 nodejs 集成到现有站点中

> ID：13030760
> 
> 赞同：2
> 
> 时间：2012-10-23T12:48:14.197
> 
> 标签：node.js

我对nodejs有点陌生。我是自学编程的，所以我的编程程序有点乱。但这里有一件事情一直困扰着我。我已经有一个在 jquery、php 和 mysql 上运行的站点。它具有多个使用 ajax 的功能。这些功能（模块）包括个人资料模块（facebook 类型墙）、消息模块等。

现在我想让服务器推送更新到客户端，比如有新消息到达或者有人在墙上发帖。我不想再次在 nodejs 上创建所有内容。我只需要告诉客户端（dom）新的更新已经到来，因此现在可以触发获取数据的 ajax jquery 函数。

所以我的问题是，这可能吗？如果有怎么办？

编辑：我在这里找到了类似的讨论：[Node + now.js + Model-View-Control-Pattern](https://stackoverflow.com/questions/10973071/node-now-js-model-view-control-pattern)

# iphone - 在 iOS6 中通过 Facebook 分享 - 设置按钮不起作用

> ID：13030769
> 
> 赞同：3
> 
> 时间：2012-10-23T12:48:34.933
> 
> 标签：iphone, facebook, ios6, settings, social-framework

我希望通过 Facebook 分享我的应用程序。

当我没有配置我的 Facebook 帐户时，我收到以下错误。 **当我点击“设置”时，它不起作用。“设置”和“取消”给出相同的结果。**

![附上错误图片](../Images/b62232b2492118ed741a5230809c2753.png)

因此，我导入了 Social.framework。

```
#import <Social/Social.h> 
```

下面是使用的方法。

```
-(IBAction) facebookBtnCall{

NSString *facebookTxt = @"Facebook Text";
NSString *AppUrl = @"http://www.google.co.in/";
NSString *ImageUrl = @"http://www.phoolwala.com/adminpanel/uploads/small/1303380733-PHW-B-18-RP-R.jpg";

float version = [[[UIDevice currentDevice] systemVersion] floatValue];

if (version >= 6.0) {

    if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
        SLComposeViewController *fbComposer = [SLComposeViewController
                                               composeViewControllerForServiceType:SLServiceTypeFacebook];
        //set the initial text message
        [fbComposer setInitialText:facebookTxt];
        //add url
        if ([fbComposer addURL:[NSURL URLWithString:AppUrl]]) {
            NSLog(@"Blog url added");
        }

        // you can remove all added URLs as follows
        //[fbComposer removeAllURLs];

        //add image to post
        if ([fbComposer addImage:[UIImage imageNamed:ImageUrl]]) {
            NSLog(@"strong binary added to the post");
        }
        if ([fbComposer addImage:[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:ImageUrl]]]]) {
            NSLog(@"scan is added to the post");
        }

        //remove all added images
        //[fbComposer removeAllImages];

        //present the composer to the user
        [self presentViewController:fbComposer animated:YES completion:nil];

    }
}
else {
    NSLog(@"Load facebook on webview");
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:27:41.493

您是否尝试过这样做：

```
 SLComposeViewController *fbController = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
    SLComposeViewControllerCompletionHandler __block completionHandler=^(SLComposeViewControllerResult result){

        [fbController dismissViewControllerAnimated:YES completion:nil];

        switch(result){
            case SLComposeViewControllerResultCancelled:
            default:
            {
                NSLog(@"Cancelled.....");

            }
                break;
            case SLComposeViewControllerResultDone:
            {
                NSLog(@"Posted....");
            }
                break;
        }};

    //[fbController addImage:[UIImage imageNamed:@"1.jpg"]];
    [fbController setInitialText:@"Test message"];
    [fbController addURL:[NSURL URLWithString:self.asset.url]];
    [fbController setCompletionHandler:completionHandler];
    [self presentViewController:fbController animated:YES completion:nil];
} else {
    NSLog(@"no facebook setup");
} 
```

# php - PHP SOAP：已在 WSDL 文件中定义的属性

> ID：13030772
> 
> 赞同：2
> 
> 时间：2012-10-23T12:49:02.480
> 
> 标签：php, attributes, wsdl, defined

我正在使用一个 wsdl 文件，它可以与 SoapUI 一起使用，但不能与 PHP Soap 一起使用

代码：

```
<?php
$WSDL     = new SoapClient('Foo/bar.wsdl');
?> 
```

堆栈跟踪：

> 致命错误：未捕获的 SoapFault 异常：[WSDL] SOAP-ERROR：解析架构：属性 'http://url.com/LGW/2009/:unitOfMeasure' 已在 Foo.php:2 中定义 堆栈跟踪：#0 Foo.php (2): SoapClient->SoapClient('Foo/bar.wsdl', Array) #1 {main} 在第 2 行的 Foo.php 中抛出

任何人都知道 PHP-SOAP 库试图告诉我什么。WSDL 文件应该是有效的（至少 PEAR SOAP 和 SoapUI 都可以正常工作）。

WSDL 包含几`<s:attribute ref="tns:unitOfMeasure"/>`行所以我猜它指的是那些，但真的不明白如何解决这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:45:51.143

WSDL 文件有错误的指令，建议遵循 XML

```
<ns:foo unitOfMeasure="foo" ns:unitOfMeasure="invalid">
  <ns:bar unitOfMeasure="foo" ns:unitOfMeasure="invalid"></ns:bar>
</ns:foo> 
```

这给出了已经定义的错误。由于命名空间声明，ns:unitOfMeasure 属性被认为是唯一的，并且不能重新定义。

我从 WSDL 文件中删除了这些行，之后一切正常。

显然，Java、PEAR 和可能的 .NET SOAP 库将接受这种指令，尽管它们在 SOAP/WSDL 消息中无效。

# android - 权限树和权限组之间的区别？

> ID：13030773
> 
> 赞同：5
> 
> 时间：2012-10-23T12:49:05.760
> 
> 标签：android, android-permissions

`permission-tree`Android和Android有什么区别`permission-group`？

# php - 网站上的许多表单调用相同的文件来处理它们 PHP

> ID：13030780
> 
> 赞同：0
> 
> 时间：2012-10-23T12:49:27.473
> 
> 标签：php, forms, include, global-variables

我正在一个具有多种形式的网站上工作。所有这些形式都在一个 php 文件中。我只是包含文件以使用默认表单。提交默认表单后，它会转到文件中的下一个表单。事情是我需要将一些表格的数据传递给它之后的表格。我的问题是我可以将字段的值设置为全局变量，这样我就不必在隐藏字段中传递它或使用会话变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:53:23.447

**不**，这是不可能的……您将不得不使用隐藏的 OR Session。

当页面发送到客户端时，所有 PHP 页面变量都已过期，您需要将数据保存在服务器或客户端上，如果您需要在前面的页面上使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:55:16.020

我不认为你有一个选择......会话将是最好的方法，它不必很麻烦你可以通过执行以下操作来保存整个 $_POST 数组：

```
$_SESSION['previousPost'] = $_POST; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T12:56:17.270

你能举一个你试图传递的数据的例子吗？这最终取决于您希望数据保留多长时间。如果用户让会话过期，您将丢失该数据并且可能应该将其存储在隐藏字段中。否则，会话*应该*没问题。

`$_SESSION['key'] = 'val';`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T13:04:06.387

首先，您在一次 php 中设置多个表单将成为未来维护的噩梦。但这不是你的问题......如果你要走这条路，你可以发布到包含表单的同一个脚本。每次连续提交时，您都会添加到全局 $_POST 变量。

诀窍是确保您在每次后续提交时继续传递前一个表单的数据。这意味着您可能必须为先前表单的数据维护隐藏字段——它不优雅，而且容易出现问题，例如，它是一个线性工作流（单向）。

您最好在会话中维护数据，或者在会话中维护序列化对象（使用适当的访问器）。如果您有一个数据库，您总是可以分步构建一条记录，在每次提交表单时填充一条记录的列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T12:54:30.877

是的，您可以在会话中设置它您可以像这样在会话中设置它：

```
$_SESSION[key]=value; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T12:56:12.487

您最好考虑使用 MySQL 或其他数据库来存储这些值，然后在后续表单中根据需要从数据库中提取它们。根据一个大型 PHP 文件的结构，很可能需要刷新页面才能进入下一个表单，在这种情况下，如果您不需要 MySQL 数据库的数据持久性，我强烈建议创建一个会话，将第一个表单中的数据存储在会话中，将该会话带到下一个表单，并使用会话变量中的数据来访问您需要的值。

# ruby-on-rails - Rails：当你取消（ctrl+c）长时间运行的迁移时会发生什么？

> ID：13030782
> 
> 赞同：0
> 
> 时间：2012-10-23T12:49:41.420
> 
> 标签：ruby-on-rails, migration

我已经运行了几次长时间运行的迁移。就像我有一些代码部分更新了很多记录并运行了几分钟到几小时。

我从未尝试取消 (ctrl+c) 迁移，因为我不知道该迁移会发生什么。它会知道迁移已取消吗？该迁移和我的应用程序会发生什么？如果取消后我再次运行 rake db:migrate 会发生什么？

我的一个脚本看起来像这样：

```
def up
  add_column :foo, :bar, :string

  Foo.all.each do |f|
    f.bar = if f.x
      'foo'
    else
      'bar'
    end

    f.save
  end

  remove_column :foo, :something
end

def down
  * reverse of up
end 
```

我也在使用 postgres。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:00:41.150

这将取决于您使用的数据库。如果数据库支持定义更改，Rails 将围绕迁移使用事务。据我所知，PostgreSQL 会这样做，而 MySQL（至少 MyISAM 表）不会（但这可能已经改变）。

因此，如果您运行 PostgreSQL，它应该取消事务，并且应该可以简单地再次运行它并获得干净的结果（尽管我会对此进行测试，但根据您所做的更新的复杂性，事务可能会很棘手）。MySQL 将被部分更新的记录卡住，或者迁移表中的版本计数器可能不会更新，并且为了再次运行它，它会尝试再次创建新字段并因错误而失败。

# ruby-on-rails - Nokogiri找到图像src

> ID：13030786
> 
> 赞同：0
> 
> 时间：2012-10-23T12:50:00.063
> 
> 标签：ruby-on-rails, nokogiri

我需要从 Facebook 获取头像的 src 属性。

```
doc = Nokogiri::HTML(open('http://www.facebook.com/zuck')) 
```

然后我尝试了：

```
 avatar = doc.css('.photoContainer img') 
```

但收到一个空结果。我应该怎么做才能获得 img src？为什么我的方法不起作用？

我还尝试通过 XPath 查找所有 img，但仍然收到空结果：

```
Nokogiri::HTML(open('http://www.facebook.com/zuck')).xpath("//img/@src").each do |src|
  puts src                                                  
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:57:16.183

问题是`.photoContainer`您尝试访问的 div 不在页面的实际 HTML 中，它是通过 JavaScript 插入到 DOM 中的，因此 Nokogiri 看不到它。Nokogiri 只能解析静态 HTML 和 XML。

如果你想访问由 JavaScript 生成的 DOM 内容，你可能想尝试一个自动化的网页浏览工具，比如[watir](http://watir.com/)或[selenium](http://seleniumhq.org/)。另请参阅“ [Nokogiri 解析 ajax 加载的内容](https://stackoverflow.com/questions/4341387/nokogiri-parse-ajax-loaded-content)”。

更新：

如果您熟悉使用[capybara](https://github.com/jnicklas/capybara)进行集成测试，您还可以将其选择器用作 selenium 之类的浏览工具的包装器，直接使用可能有点棘手。

因此，例如，在控制台中：

```
require 'capybara'
require 'capybara/dsl'

include Capybara::DSL
Capybara.default_driver = :selenium 
```

然后就可以获取元素了，先关闭弹窗，然后通过 CSS 访问元素：

```
visit('http://www.facebook.com/zuck')
find('a.layerCancel').click
find('.photoContainer img')['src']
#=> "http://profile.ak.fbcdn.net/hprofile-ak-ash3/c23.1.285.285/s160x160/73273_773684942011_2125564_n.jpg" 
```

# php - cron 作业在 cpanel 中无法正常工作

> ID：13030787
> 
> 赞同：7
> 
> 时间：2012-10-23T12:50:25.927
> 
> 标签：php, cron, cpanel

我已经设置了 cron 作业，它工作正常，但是当我直接运行 php 文件（从路径/url）时，它成功运行，但从 cron 却没有。但是我设置了另一个非常简单的文件以确保我的 cron 命令/路径设置正确我创建了另一个文件并使用了简单的 php 邮件功能并且它运行成功。请建议我研究它的可能领域。（我正在使用 Cpanel）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-01T17:49:01.437

而不是像

```
php -f /path_to_script/script.php 
```

像这样输入命令：

```
curl http://domain.com/yourscript.php 
```

如果你想抑制输出，你可以`> /dev/null`在最后添加。

所以完整的命令将是：

```
curl http://domain.com/yourscript.php > /dev/null 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T13:36:27.840

作为 cURL 的替代方法，您可以通过基于文本的浏览器调用您的脚本。像这样的东西：

```
lynx -dump http://localhost/script.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T13:38:56.297

您不应该有任何相对路径——这包括文件*和命令*。例如，您不应仅`cp`在要复制文件时调用，而应调用命令`/bin/cp`的*完整路径*。要找出完整路径，您可以`which <cmd>`在命令行运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-02T11:42:32.767

我遇到了同样的问题。我在 cpanel 的 laravel 项目中使用任务调度。我的命令是

`/usr/local/bin/php /home/user_name/public_html/path/to/cron/script`

是版本问题。我的服务器默认 php 版本是 7.1.33，但在我的项目中，php 版本是 7.2。因此，当我运行 schedule 命令时，它采用与我的项目不兼容的 php7.1。因此，根据 cpanel 文档，该命令实际上是针对不同的 php 版本

`/usr/local/bin/ea-php99 /home/shadhinapp/domain_path/path/to/cron/script`.

我的任何 cron 作业命令都是：

`/usr/local/bin/ea-php72 /home/user_name/path_to_your_project/artisan schedule:run >> /dev/null 2>&1`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-04T08:42:07.810

```
curl http://mydomain/auto_push/task.php?p=1 
```

这是我项目中的实时工作代码。见下图：

[![在此处输入图像描述](../Images/c5dd612dab6b069a7a178761c8cee06f.png)](https://i.stack.imgur.com/DFYVn.jpg)

# c - 非常非常基本的交叉编译 C 程序

> ID：13030789
> 
> 赞同：4
> 
> 时间：2012-10-23T12:50:27.490
> 
> 标签：c, windows, macos

我有一个（*非常*基本的）C 程序，我可以在我的 mac 上用 GCC 编译。不需要代码，it `fseek`s, `fread`s, `fprintf`s 就是这样（它使用`stdlib.h`and `stdio.h`）。

有没有办法让我在我的 Mac 上编译一个可以在 Windows XP 上运行的 win32 二进制文件？

我正在寻找一个简单（不到 15 分钟）的解决方案，如果答案是“找到拥有 Visual Studio 的人”，那就太酷了 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:58:00.580

您可以使用[Mac 的 MinGW 端口](http://crossgcc.rts-software.org/doku.php)进行交叉编译。

# java - 按钮和窗口之间的空间

> ID：13030800
> 
> 赞同：3
> 
> 时间：2012-10-23T12:51:35.887
> 
> 标签：java, swing, user-interface, jbutton, layout-manager

我在这里有这段代码，我的想法是在一个主窗口中在一个文本区域旁边有两个按钮，我还没有添加。在尝试使用 GridBagLayout 并在此过程中扯掉我的头发后，我决定不使用布局并在不可调整大小的窗口内手动定位按钮。

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class Tema extends JFrame implements ActionListener {

JMenuBar menubar = new JMenuBar();
JMenu actiuni = new JMenu("Actiuni");
JMenu contact = new JMenu("Contact");
JMenu help = new JMenu("Help");
JMenuItem ntest = new JMenuItem("Nou test");
JMenuItem vizarh = new JMenuItem("Vizualizare arhiva");
JMenuItem datcon = new JMenuItem("Date de contact");
JMenuItem sendmail = new JMenuItem("Trimite e-mail");
JMenuItem instrut = new JMenuItem("Instructiuni de utilizare");
JButton b1 = new JButton("Incepe testul!");
JButton b2 = new JButton("Vezi arhiva!");
JTextArea ta = new JTextArea("Default text", 5, 30);

public void common(String s)
{
    setSize(800,450);
    setLocationRelativeTo(null);
    setResizable(false);

    setTitle(s);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    menubar.add(actiuni);
    menubar.add(contact);
    menubar.add(help);
    actiuni.add(ntest);
    actiuni.add(vizarh);
    contact.add(datcon);
    contact.add(sendmail);
    help.add(instrut);

    setJMenuBar(menubar);

}

public Tema()
{
    common("Self-Esteem- Fereastra Principala");
    JPanel cp = new JPanel();
    cp.setLayout(null);

    b1.setBounds(100,100,200,100);
    cp.add(b1);

    b2.setBounds(100,250,200,100);
    cp.add(b2);

    setContentPane(cp);
    setVisible(true);

}

public static void main(String[] args)
{
    Tema x = new Tema();
}

@Override
public void actionPerformed (ActionEvent e){           

}

} 
```

但输出是这样的： ![在此处输入图像描述](../Images/20f4689f0b118baa75d46abea931aa31.png)

我的问题是为什么第二个按钮下方的空间不等于第一个按钮上方的空间？它们不应该都是100像素吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T13:13:03.947

*   不要`JFrame`不必要地扩展课程。
*   永远不要使用`Absolute`/ `Null` `LayoutManager`。使用适当的`LayoutManager`，这包括嵌套布局以实现所需的外观。看这里的好教程：
    *   [布局管理器的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)
    *   [使用布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)
*   不要调用`JFrame#setSize(..)`，`JFrame`而只是`JFrame#pack()`在设置`JFrame`可见之前调用。
*   不要`JFrame#setContentPane(...)`只`add(..)` 在`JFrame`实例上使用
*   创建[Event Dispatch Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)以初始化和更改 UI 组件
*   不要`ActionListener`为多个组件实现单个。除非它将被其他类或组件访问，否则共享一个`Action`. 而是使用[匿名 ActionListener](http://www.leepoint.net/notes-java/GUI/events/anonymous_listener.html)

这是我制作的一个示例（基本上您的代码已*修复*）希望对您有所帮助：

![在此处输入图像描述](../Images/e46f6b035fb3539416a3f0dc3796aeca.png)

```
import java.awt.BorderLayout;
import java.awt.GridLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;

public class LayoutTest {

    private final JMenuBar menubar = new JMenuBar();
    private final JMenu actiuni = new JMenu("Actiuni");
    private final JMenu contact = new JMenu("Contact");
    private final JMenu help = new JMenu("Help");
    private final JMenuItem ntest = new JMenuItem("Nou test");
    private final JMenuItem vizarh = new JMenuItem("Vizualizare arhiva");
    private final JMenuItem datcon = new JMenuItem("Date de contact");
    private final JMenuItem sendmail = new JMenuItem("Trimite e-mail");
    private final JMenuItem instrut = new JMenuItem("Instructiuni de utilizare");
    private final JButton b1 = new JButton("Incepe testul!");
    private final JButton b2 = new JButton("Vezi arhiva!");
    private final JTextArea ta = new JTextArea("Default text", 5, 30);
    //create JFrame instance
    private final JFrame frame = new JFrame();

    public LayoutTest() {
        initComponents();
    }

    public static void main(String[] args) {
        //creat UI on EDT
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new LayoutTest();
            }
        });
    }

    private void initComponents() {
        frame.setTitle("Self-Esteem- Fereastra Principala");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        menubar.add(actiuni);
        menubar.add(contact);
        menubar.add(help);
        actiuni.add(ntest);
        actiuni.add(vizarh);
        contact.add(datcon);
        contact.add(sendmail);
        help.add(instrut);

        frame.setJMenuBar(menubar);
        JPanel textAreaJPanel = new JPanel();

        //create button panel with GridLayout(2,1) 
        JPanel buttonJPanel = new JPanel(new GridLayout(2, 1));//new GridLayout(2, 1,10,10) creates gridlayout with horixontal and vertcial spacing of 10

        //add buttons to one panel
        buttonJPanel.add(b1);
        buttonJPanel.add(b2);
        //add text area to textarea jPanel
        textAreaJPanel.add(ta);

        //add textarea panel to west of content pane (BorderLayout by default)
        frame.add(textAreaJPanel, BorderLayout.WEST);

        //add button Panel to EAST of JFrame content pane
        frame.add(buttonJPanel, BorderLayout.EAST);

        frame.pack();

        frame.setResizable(false);
        frame.setLocationRelativeTo(null);

        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-23T13:13:34.973

在上面的代码中，两个按钮之间的空间是 50px，如果你使用 b2.setBounds(100,300,200,100); 那么空间将是100px。尝试一下...

# javascript - jquery选择器ie8问题

> ID：13030804
> 
> 赞同：0
> 
> 时间：2012-10-23T12:51:39.393
> 
> 标签：javascript, jquery, css, internet-explorer-8

我在 jquery 中有以下语句，它完美地适用于 Chrome v.22 和 Firefox v.16，但不适用于 IE8；这是声明：

第一种方法：

```
$("div[aria-labelledby='myOwnAriaLabelledBy']").css('height',450); 
```

第二种方法：

```
$("div[aria-labelledby='myOwnAriaLabelledBy']").attr('id','test');
$("#test").css('height',450); 
```

这是html，我不能包含类：

```
<div style="display: block; z-index: 1006; outline: 0px none; 
position: absolute; height: 490.333px; width: 600.333px; 
top: 10px; left: 10px;" 
tabindex="-1" role="dialog" aria-labelledby="myOwnAriaLabelledBy"> 
```

有谁知道这种选择器是否存在 IE8 已知问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:01:16.633

您的页面呈现在兼容性还是怪癖模式下？

我不是 100% 确定，但我记得 IE8 对 aria 属性的支持因渲染模式而异。

尝试使用 camelCase 选择器，例如

```
$("div[ariaLabelledBy='myOwnAriaLabelledBy']").css('height',450); 
```

这*可能*只是 vanilla Javascript 的问题，但也可能是导致 jQuery 出错的原因。我认为这与“-”字符被解释为减号有关。

# php - Foreach 排序

> ID：13030808
> 
> 赞同：3
> 
> 时间：2012-10-23T12:51:44.977
> 
> 标签：php, api, sorting

我不太确定这是否可能，但无论如何我都会尝试解释它，

我们正在尝试为我们的公会创建一个页面，我们希望它显示平均装备等级以及他们的名字，例如

```
Name | iLvL 
Bob    262
Sam    159 
```

我们目前正在运行一个执行以下操作的脚本：

```
$members = $guild->getMembers(); 
```

这基本上得到了我们公会中所有成员的列表 - 然后我们使用 foreach 循环进行迭代并再次调用以获取信息

```
//Character Arrays
foreach($members as $member) {

//Get character information
$mrank = $member['rank'];
$mname = $member['character']['name'];
$mgender = $member['character']['gender'];
$mlevel = $member['character']['level'];
$mrace = $member['character']['race'];
$character = $armory->getCharacter($mname);
$gear = $character->getGear();
$milevel = $gear['averageItemLevelEquipped'];
echo '<td><div align="center" class="style1">'. $mname .'</div></td>';
echo '<td><div align="center" class="style1">'. $milevel .'</div></td> '; 
```

唯一的问题是因为我们对它们进行了单数迭代，我不太确定如何将平均项目级别排序为从最高到最低 - 我听说过 rsort 之类的东西，但我似乎无法让它工作，我想知道如果有人能对此伸出援手。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:59:30.310

您可以在 SQL 查询中对成员进行排序。如果要排序结果数组，请使用 uasort：[http ://www.php.net/manual/en/function.uasort.php](http://www.php.net/manual/en/function.uasort.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T12:59:41.540

```
$members = $guild->getMembers(); 
```

创建另一个方法；

```
$members = $guild->getMembersByiLvL(); 
```

它将该行添加`ORDER BY iLvL DESC`到 sql 查询中。

由于您没有显示 $guild 是对象的类，因此我不能说这样做有多么容易-但这似乎是一种更可取的方法。

然后，您可以继续开发该方法来执行此操作：

```
$members = $guild->getMembersSorted('iLvL'); 
```

编辑：我假设您的数据来自这里的 Mysql 数据库，所以当然可能是错误的......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T13:00:45.323

我建议从那里的数据中创建一个数组，每个人都有一个子数组。还创建一个仅包含 averageItemLevelEquipped 值的数组，然后在运行时将其用作索引数组`array_multisort`。它看起来像这样：

```
$resourcearray = array();
$indexarray = array();

foreach($members as $member) {
    //Get character information
    $mrank = $member['rank'];
    $mname = $member['character']['name'];
    $milevel = $gear['averageItemLevelEquipped'];
    //and anything else you want to add goes here, of course
    array_push($resourcearray, array('rank' => $mrank, 'charname' => $mname, 'itemlevel' => $milevel));
    array_push($indexarray, $milevel);
}

array_multisort($indexarray, $resourcearray);

foreach($resourcearray as $resource) {
    echo '<td><div align="center" class="style1">'. $resource['charname'] .'</div></td>';
    echo '<td><div align="center" class="style1">'. $resource['itemlevel'] .'</div></td> ';
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T13:16:10.367

`foreach`迭代输入数组而不对顺序进行任何修改。所以你需要`foreach`在 foreach 迭代之前或结果之前对输入进行排序。

通常最好在输入之前对输入进行排序`foreach`，或者通过

1.  从数据库中提取数据时对数据进行排序（SQL`ORDER BY`子句）
2.  对要迭代的数组（或类似数组的对象）进行排序

对于 2，PHP 中有很多数组排序函数（请查看 php.net/manual/en/ref.array.php）。例如，您可以这样使用`usort`：

```
function cmp($a, $b)
{
  if ($a['character']['level'] == $b['character']['level']) {
    return 0;
  }
  return ($a['character']['level'] < $b['character']['level']) ? -1 : 1;
}
$members = $guild->getMembers();

usort($members, 'cmp');

foreach ($members as $member) {
  //..
} 
```

如果您可以访问数据库查询并且通常需要以这种方式排序的数据，那么最好使用 SQL 中的数据库端排序（更好的性能，更好的可读性）。

# php - 通过PHP的rand代码无法在线工作

> ID：13030809
> 
> 赞同：0
> 
> 时间：2012-10-23T12:51:44.837
> 
> 标签：php, mysql, database, random

PHP代码：

```
$code=rand(1000000000,9000000000);

$sql=mysql_query("INSERT INTO `form` (`code`,date) VALUES ('$code',now())"); 
```

此代码在本地工作，但不能在线工作。保存到数据库的所有代码都是：2147483647。如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T12:54:15.913

将字段的类型从**int**更改为**bigint**

检查这个[http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html](http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html)

（11.1.4.1\. 整数类型（精确值））

Int 介于**-2147483648**和 **2147483647 之间**

BigInt 介于**-9223372036854775808**和**9223372036854775807之间**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:57:33.430

```
2147483647 = 2^31 − 1 
```

这是mysql可以表示的最后一个整数。我认为您应该将类​​型更改为“bigint”，一切都会好起来的。

# android - 在 Google Play 上更新 Android 应用 - Android 开发者控制台

> ID：13030810
> 
> 赞同：4
> 
> 时间：2012-10-23T12:51:50.910
> 
> 标签：android, google-play

我正在尝试将我的 Android 应用程序更新到最新版本。在 Google Play Android 开发者控制台 - 高级模式 - 我已经上传了新的 APK，停用了旧版本，激活了更新版本并点击了保存。

点击保存后我没有看到任何消息。

当我回到控制台时，我仍然看到旧版本处于活动状态？

我在简单模式下尝试了同样的方法，但结果相同。

SAVE 有什么问题吗？它不会显示一些消息吗？比如“已成功保存”？

还是我必须等待（30 分钟到一天左右）才能看到变化？

我一直在这里和谷歌上搜索，但找不到任何澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:58:35.520

单击保存时，按钮应更改为“保存...”约 5 到 20 秒：

![在此处输入图像描述](../Images/f805f440f8d51f5e61b350274ac5aba2.png)

之后，在屏幕中央的顶部，您应该会看到一条消息，说明更改已成功保存：

![在此处输入图像描述](../Images/8b7e24ae2b87ee6493337806b5fc5a2a.png)

很抱歉图片中的文字是荷兰语，但你明白了。

在用户可以在 Play 商店中看到更新之前，可能需要大约 12 小时。如果这仍然不起作用，请尝试使用其他浏览器，看看它是否有所作为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T09:09:02.730

我在使用 Chrome 时遇到了这个问题，发现这是因为我启用了 ABP（Ad Block Plus）。我猜它阻止了按钮下方的弹出窗口工作。我在“此站点”上禁用了 ABP，刷新后一切都很好。

# android - 微调器适配器中的空指针异常

> ID：13030812
> 
> 赞同：0
> 
> 时间：2012-10-23T12:52:01.657
> 
> 标签：android

我正在尝试在微调器上使用这个适配器，它给出了空指针异常，请给你有价值的回应

```
ArrayAdapter adapter = new ArrayAdapter(this,android.R.layout.simple_spinner_item, R.array.select_action_arrays); 
```

在我的 string.xml 文件中

```
<string-array name="select_action_arrays">
        <item>alert1</item>
        <item>alert2</item>
        <item>alert3</item>
        <item>alert4</item>
        <item>alert5</item>
    </string-array> 
```

这是完整的代码行

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, getResources().getStringArray(R.array.select_action_arrays));
        spinnerSelectAction.setAdapter(adapter);
        spinnerSelectAction = (Spinner)findViewById(R.id.spinnerSelectAction);
        spinnerSelectAction.setAdapter(adapter);
        spinnerSelectAction.setOnItemSelectedListener(new OnItemSelectedListener() {
            int count=0;
            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
                if(count >= 1){
                Toast.makeText(getBaseContext(),"inside on item selected ",Toast.LENGTH_SHORT).show();
                }
                count++;
            }
            @Override
            public void onNothingSelected(AdapterView<?> arg0) {}
        }); 
```

spinnerSelectAction 似乎已初始化

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:56:57.550

您似乎没有正确初始化适配器。它应该是这样的：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
     android.R.layout.simple_spinner_item,
     getResources().getStringArray(R.array.select_action_arrays)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:56:03.103

写在下面的代码行

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, getResources().getStringArray(R.array.select_action_arrays)); 
```

代替

```
ArrayAdapter adapter = new ArrayAdapter(this,android.R.layout.simple_spinner_item, R.array.select_action_arrays); 
```

也许它会解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T13:15:02.167

您在从视图中检索微调器之前添加到适配器，前 2 条指令应该是这样的：

```
spinnerSelectAction = (Spinner)findViewById(R.id.spinnerSelectAction);
spinnerSelectAction.setAdapter(adapter); 
```

# c# - 从注册表中读取值

> ID：13030814
> 
> 赞同：2
> 
> 时间：2012-10-23T12:52:05.793
> 
> 标签：c#, .net, registry

谷歌今天没有帮助我，所以我需要你的帮助。有没有可能从注册表中读取值的方法？例如这个位置 --> HKEY_LOCAL_MACHINE > SOFTWARE > MyKey 该列是测试键

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T12:55:43.760

64位+32位

```
 using Microsoft.Win32;
    public static string GetRegistry()
    {
        string registryValue = string.Empty;
        RegistryKey localKey = null;
        if (Environment.Is64BitOperatingSystem)
        {
            localKey = RegistryKey.OpenBaseKey(Microsoft.Win32.RegistryHive.LocalMachine, RegistryView.Registry64);
        }
        else
        {
            localKey = RegistryKey.OpenBaseKey(Microsoft.Win32.RegistryHive.LocalMachine, RegistryView.Registry32);
        }

        try
        {
            localKey = localKey.OpenSubKey(@"Software\\MyKey");
            registryValue = localKey.GetValue("TestKey").ToString();
        }
        catch (NullReferenceException nre)
        {

        }
        return registryValue;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:55:08.783

代码项目中的示例：

[使用 C# 从注册表中读取、写入和删除](http://www.codeproject.com/Articles/3389/Read-write-and-delete-from-registry-with-C)

[关于 C# 注册表的所有（您想知道的），第 1 部分，共 2 部分](http://www.codeproject.com/Articles/4808/All-you-wanted-to-know-about-the-Registry-with-C-P)

```
using Microsoft.Win32;
...

RegistryKey masterKey = Registry.LocalMachine.CreateSubKey(
            "SOFTWARE\\Test\\Preferences");
if (masterKey == null)
{
    Console.WriteLine ("Null Masterkey!");
}
else
{
    Console.WriteLine ("MyKey = {0}", masterKey.GetValue ("MyKey"));
}
masterKey.Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:54:25.327

试试这个：

```
static object GetRegistryValue(string fullPath, object defaultValue)
{
    string keyName = Path.GetDirectoryName(fullPath);
    string valueName = Path.GetFileName(fullPath);
    return Registry.GetValue(keyName, valueName, defaultValue);
} 
```

或者你可以使用`Registry.LocalMachine` 这个[http://www.csharphelp.com/2007/01/registry-ins-and-outs-using-c/](http://www.csharphelp.com/2007/01/registry-ins-and-outs-using-c/)

# jquery - 在循环中继承jquery Ajax异步调用

> ID：13030815
> 
> 赞同：0
> 
> 时间：2012-10-23T12:52:09.243
> 
> 标签：jquery

我已经在我需要的循环中创建了继承的 ajax 调用，如果 async 设置为“true”来克服这个问题，它会给出意外的输出我已经使调用同步，是否有任何方法可以等待继承的调用完成然后继续下一次迭代。我附上代码片段，如下所示。

在下面的代码中，我使用了 2 个同步调用，我需要将这些调用转换为异步，请建议我任何解决方案。

```
/// Main Loop

 $.each(AllStagesvgdata, function (idx, svgdata) {
             baseimageaspectratio = 1;
            svgEditor.changeZoomManualFluid(0);
            ///process stages and controls
            ParseStageControlsDynamic(svgdata.Id);
            var filename = '';

            var svginf = "<?xml version=\"1.0\"?>\n" + svgCanvas.getSvgString();
            ///process png image creation
            ProcessSvgImageFiledynamic(svgdata.Id, filename, svginf);

      });

///function to Create png files and html pages
function ProcessSvgImageFiledynamic(stageid, filename, svginf) {
    var bbbox = "";
    try {

        var groupLayer_new = $("#svgcontent")[0]; //.find("#groupLayer_new")[0];
        var bb = groupLayer_new.getBBox();
        if (bb != null && bb.width != 0) {
            bbbox = "" + bb.x + "," + bb.y + "," + bb.width + "," + bb.height;
        }
    }
    catch (e) { }
    $("#loadingnew").show();

    $.ajax({
        type: "post",
        url: "/FrontEndPlan/PngFileSaveFluid",   // change to full path of file on server
        data: { "svgdata": svginf, "pngfilename": filename, "boundbox": bbbox },
        dataType: "json",
        cache: false,
        async: true,
        success: function (msg) {
            $("#loadingnew").show();
            printimgcount++;
            if ($(AllStageImages).find("Plan > Stage[Id='" + stageid + "']").length > 0) {
                $(AllStageImages).find("Plan > Stage[Id='" + stageid + "']").attr({ "ImageFileName": msg.filename, "ImageSrc": msg.fullfilename });
            }
            ///check all the stages have been processed
            if (AllStagesvgdata.length == printimgcount) {
            ///Create the html pages when all the svg data have been processed
                CreateHtmlPagesForPrintPlan();
            $("#loadingnew").hide(); }

        },
        error: function () { }
    });

}

function ParseStageControlsDynamic(newtargetstageid) {
 $.ajax({
            type: "GET",
            url: "/FrontEndPlan/GetResponseText",
            data: { url: encodeURI(decodeURI(baseimage.attr("SRC").substr(0, 1) == "/" ? imgsrclocal + baseimage.attr("SRC") : baseimage.attr("SRC"))) + "?&ms=" + mytime },
            dataType: "html",
            async: false,
            success: function (svgstringeval) {
                svgCanvas.importSvgStringparentnode(svgstringeval, groupLayer_new, grouplayerdragged, 'baseimage_svg', '0');

                $(AllStageXmlList).find("Plan > Stage[Id='" + newtargetstageid + "'] > Control").each(function () {
                    $("#loadingnew").show();

                    RuleImplemetationDynamic(newtargetstageid, $(this).attr("Title"));
                });

            },
            error: function (data, status, e) {
                alert(e);
            }
        });
}

///Function for rule implementation
function RuleImplemetationDynamic(stageid, controltile) {

    $("#loadingnew").show();
    $(AllStageXmlList).find("Plan > Stage[Id='" + stageid + "'] > Control[Title='" + controltile + "'] > ControlImage").each(function () {

        if ($(this).attr("ImageInclude") == "true") {
            AfterRuleImplementDynamic($(this).attr("ControlImageId"), stageid, controltile, true);
        }
        else {
            AfterRuleImplementDynamic($(this).attr("ControlImageId"), stageid, controltile, false);
        }

    });

    $("#loadingnew").hide();

}
///End of Function for rule implementation

//Function to add image after rule read to the svg canvas
function AfterRuleImplementDynamic(id, targetstage, targetcontrol, shouldinclude) {
 var mytime = new Date().getTime();
                $.ajax({
                    type: "GET",
                    async: false,
                    url: "/FrontEndPlan/GetResponseText",
                    data: { url: encodeURI(decodeURI(imgsrc)) + "?&ms=" + mytime },

                    dataType: "html",
                    success: function (svgstringeval) {

                        svgCanvas.importSvgStringparentnode(svgstringeval, groupLayer_new, grouplayerdragged, "layerimage_" + controlid, '1');

                    }
                });
} 
```

# php - 测试期间的 Facebook 访问令牌

> ID：13030816
> 
> 赞同：0
> 
> 时间：2012-10-23T12:52:11.497
> 
> 标签：php, facebook

我在测试时遇到了这个问题。

在我的应用程序中，用户单击一个链接，该链接使他们登录并授予我的应用程序权限。

问题是我成功完成一次后，我不能再轻易地再做一次。我在 Facebook 对象中对用户的检查返回存在用户，但访问令牌无效。我收到以下错误：

```
Fatal error: Uncaught OAuthException: An active access token must be used to query information about the current user. thrown in /home/kleelof/public_html/projects/tutor_chapter/facebook_login/facebook/base_facebook.php on line 1028 
```

这是我的一些代码：

```
The variable $fb is set to the Facebook object before the following code is executed. .

     $user = $fb->getUser();    
     if ($user)
    {
        // get coupon code
        $coupon_code = file_get_contents(CODE_URL . "/facebookcoupon.php?email=$user_email");

        // check that the user has given the app permission to post on their wall.
        //try
        //{
            $permissions = $FB->api("/me/permissions");

            if (array_key_exists('publish_stream', $permissions['data'][0])) 
            {
                // build attachment
                $attachment = array(
                                    'name' => $site_name,
                                    'link' => urlencode(BASE_URL . str_replace('%code%', $coupon_code, $claim_link)),
                                    'picture' => $image_link,
                                    'description' => str_replace('%code%', $coupon_code, $description),
                                    'access_token' => $FB->getAccessToken()
                                    );

                $FB->api('/me/feed/', 'post', $attachment);

                $exit_to .= "?ce=The coupon has been posted on your Facebook timeline";
            }
            else
            {
                $exit_to .= "?ce=Unable to post the coupon";
            }
        //}catch (Exception $e) 
        //{
            /*$exit_to = $FB->getLoginUrl(  
                                    array(
                                            'scope' => FB_LOGIN_SCOPE
                                            )
                                    );
        }*/
    }
    else
    {//echo("no user");
        $exit_to = $FB->getLoginUrl(    
                                    array(
                                            'scope' => FB_LOGIN_SCOPE
                                            )
                                    );
    } 
```

你可以看到我试图捕捉我上面提到的错误并将它们发送回登录，但它只是陷入到去 FB 并被返回的循环中。

有人在逻辑中看到不正确的东西吗？

有没有更好的方法来处理异常？也许我可以做些什么来使 $user 为空。

保重，李

# java - getImage 是否总是在 imageJ 中返回一个 Image 对象

> ID：13030825
> 
> 赞同：0
> 
> 时间：2012-10-23T12:52:27.147
> 
> 标签：java, image-processing, imagej

我使用 construstor 创建了一个 ImagePlus 对象，ImagePlus(java.lang.String pathOrURL)

```
imp=new ImagePlus(imgFile.getPath()); 
```

现在我想通过调用 getImage 方法来获取 Image 对象（java.awt.Image）。

```
img=imp.getImage();
jLabel2.setIcon(new ImageIcon(imgFile.getPath()));
jPanel3.validate(); 
```

但是当我这样做时，我什么也得不到。如果我希望使用*getImage()*方法，是否必须使用构造函数`(ImagePlus(java.lang.String title, java.awt.Image img))`，它将创建一个带有*Image对象的**ImagePlus对象。*

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:47:41.100

你什么意思都没有得到回报？Null、异常或空图像？从源文件[http://imagej.nih.gov/ij/source/ij/ImagePlus.java](http://imagej.nih.gov/ij/source/ij/ImagePlus.java)来看，它应该可以工作。我建议您将源链接到您的代码，在 imp= new ImagePlus(...) 方法处设置断点，启动调试器并进入调用以查看 imageJ 调用中发生的情况。

* * ***

# android - AndEngine - onAccelerometerChanged 和 onAccelerationChanged 之间的区别

> ID：13030828
> 
> 赞同：0
> 
> 时间：2012-10-23T12:52:39.690
> 
> 标签：android, box2d, andengine

请原谅我的无知。我刚开始使用 AndEngine 并且一直在尝试理解这两种方法之间的区别；

*   onAccelerometerChanged(AccelerometerData pAccelerometerData)
*   onAccelerationChanged(final AccelerationData pAccelerationData)

两者都用于使用加速度计沿轴移动精灵。我知道的一件事是 onAccelerationChanged 方法来自 Box2d 扩展，但两者之间的主要区别是什么？Box2D 方法是否只允许特殊设置，例如线性阻尼系数等？或者两者之间是否存在更多基本差异。

（对于更有经验的 AndEngine 用户：Physics 示例使用了 Box2d 物理扩展。直到现在我还没有找到其他使用另一种方法的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:26:31.797

貌似Andengine-GLES1中使用了onAccelerometerChanged，Andengine-GLES2中使用了onAccelerationChanged。

# ios6 - IOS 6 UIView动画完成

> ID：13030831
> 
> 赞同：2
> 
> 时间：2012-10-23T12:52:54.227
> 
> 标签：ios6, uiviewanimation

知道为什么下面的代码不能在 IOS 6 下运行，而它在 IOS 5 下完美运行，但在 IOS 6（在模拟器和 iPad 中）根本不执行 NSLog！

```
[UIView animateWithDuration: 2.0f animations:^{ [self.view setAlpha:0.7f];}
                 completion:^(BOOL finished){ if(finished)  NSLog(@"Finished !!!!!!");}]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T12:58:35.443

这里是代码

```
 [UIView animateWithDuration:2.0
                      delay:0.0
                    options: UIViewAnimationOptionCurveEaseInOut
                 animations:^{
                    [self.view setAlpha:0.7f];

                 }
                 completion:^(BOOL finished){
                     if(finished)  NSLog(@"Finished !!!!!");
                     // do any stuff here if you want
                 }]; 
```

# javascript - 为什么格式化输入字段会阻止 onChange 事件发生

> ID：13030838
> 
> 赞同：1
> 
> 时间：2012-10-23T12:53:13.200
> 
> 标签：javascript, jquery, event-handling

我有一些代码基本上如下

```
.on("keyup", "input", function (e) {
    this.value = utils.formatNumber(this.value);                    
})
.on("change", "input", function(e) {
    expensiveFunctionThatUpdatesView();
}) 
```

实际上，这些值在用户键入时被正确格式化，但是当用户选择或单击离开输入字段时，不会触发 onChange 事件（因此不会更新视图）。如果我注释掉 keyup 事件处理函数的主体，一切都会按预期工作（格式化除外）。为什么会这样？

AFAIK，要触发 onchange 事件需要满足[两个条件：](https://developer.mozilla.org/en-US/docs/DOM/element.onchange)

1.  必须通过触发 onfocus 事件（存储旧值）的东西进入控制/输入字段。
2.  存在于焦点上的值与存在于“退出”/模糊上的值不同

顺便说一句，我尝试将代码更改为“模糊”，但是如果我格式化该字段也不会触发。测试时使用 Chrome。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:30:46.660

通过 javascript（或 jQuery 通过`val()`/ `text()`）设置文本框值永远不会触发浏览器更改事件。您需要保存原始值，将其与后格式值进行比较，并以编程方式触发更改：

```
.on("keyup", "input", function (e) {
    var originalValue = this.value;
    var newValue = utils.formatNumber(originalValue);

    this.value = newValue;

    if (originalValue !== newValue) {
        $(this).trigger('change');
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:59:41.403

您可以为这两个事件触发相同的回调函数以启用数字格式：

```
.on( 'keyup change', 'input', function ( e ) {
    this.value = utils.formatNumber( this.value );
    updateView();
}) 
```

# java - 替换特殊字符？在具有特定列表元素的字符串中

> ID：13030839
> 
> 赞同：0
> 
> 时间：2012-10-23T12:53:16.163
> 
> 标签：java, sql, jdbc, prepared-statement

我有一个字符串，它是一个插入语句，我需要替换特殊字符？到列表中的特定元素。查询字符串是

```
insert into OPRS_VEHICLE(VEHICLE_ID, DEPOT_ID, SERVICE_TYPE_ID, REGISTRATION_KEY,
                          REGISTRATION_NO, IS_ACTIVE,CREATED_BY, CREATED_DATE,
                          MODIFIED_BY, MODIFIED_DATE) values(?,?,?,?,?,?,?,?,?,?) 
```

现在我需要更换每个？具有列表中包含值的特定元素的字符。

我试过这个

```
int index = query.indexOf("?");
for (int j = 0; j < list.size(); j++) {
     formattedQuery = query.replace(query.substring(index, index+1), 
                                    list.get(j).toString());
} 
```

我需要更换？与列表的相应值。

编辑

```
try{
            conn.setAutoCommit(false);
            if(query != null){  
                ps = conn.prepareStatement(query);
                for (int i = 0; i < myCollection.size(); i++) {
                    List list = (List) myCollection.get(i);
                    int count = 1;
                    for (int j = 0; j < list.size(); j++) {                     
                        if(list.get(j) instanceof Timestamp) {
                            ps.setTimestamp(count,  (Timestamp) list.get(j));       
                        } else if(list.get(j) instanceof java.lang.Character) {
                            ps.setString(count, String.valueOf(list.get(j)));
                        }
                        else {
                            ps.setObject(count, list.get(j));
                        }
                        count++;
                    }
                    try {
                        ps.execute();
                    } catch (Exception e) {

                        } 
```

如果准备好的语句的执行失败，那么我需要调用一个方法来获取整个集合列表并一次插入一个语句并提交。这该怎么做 ？（或）我的想法是，因为我知道数组的大小，我可以将数组分成一半大小，然后为此准备语句并插入它？哪一个更好更安全？有可能这样做吗？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T13:03:28.807

您拥有的查询字符串实际上是如何在[JDBC](http://www.oracle.com/technetwork/java/javase/jdbc/index.html)中表示具有动态值的 SQL 语句的示例。[`PreparedStatement`请参阅文档](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html)中的以下示例，了解通常如何将`?`查询字符串中的字符替换为适当的值：

```
PreparedStatement pstmt = con.prepareStatement("UPDATE EMPLOYEES SET SALARY = ? WHERE ID = ?");
pstmt.setBigDecimal(1, 153833.00)
pstmt.setInt(2, 110592) 
```

您还可以在[此处](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)查看 Oracle 的 JDBC 基础教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T13:06:31.220

这样，您将永远无法获得格式正确的查询。因为您要替换基本`query`字符串并将其分配给 new `formattedQuery`。这`formattedQuery`将保留所有`?`占位符，但循环长度的最后一个。这不会产生您所期望的结果。

您实际上应该使用[***PreparedStatement***](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)在查询中设置值。
请参见下面的示例。

**示例**：

```
PreparedStatement pst = con.prepareStatement( query );
for ( int j = 0; j < list.size(); j++ ) {
    pst.setString( j + 1, list.get( j ).toString() );
}

pst.execute.... 
```

* * *

**更新帖子的答案**：

只需稍作更改即可执行相同的代码，以提交列表中的有效记录。
我已经部分更改了您的代码，并包含一些注释以供理解，如下所示。
它应该可以解决您的问题：

```
try {
  conn.setAutoCommit( false );
  if ( query != null ) {  
    ps = conn.prepareStatement( query );
    for ( int i = 0; i < myCollection.size(); i++ ) {
      List list = ( List ) myCollection.get( i );
      int count = 1;
      for ( int j = 0; j < list.size(); j++ ) {  
        if ( list.get( j ) instanceof Timestamp ) {
          ps.setTimestamp( count,  ( Timestamp ) list.get( j ) );       
        } else if( list.get( j ) instanceof java.lang.Character ) {
          ps.setString( count, String.valueOf( list.get( j ) ) );
        } else {
          ps.setObject( count, list.get( j ) );
        }
        count++;
      } // for inner list

      // now a record data is ready
      try {
        ps.execute();

        // no errors? then if you don't want to lose, commit this record.
        // because you are fearing if there would be error in next records to be inserted.
        conn.commit();
      } catch ( Exception specificE ) {
        // handle specific ex here
      } // try, catch

      // clear current record parameters from the prepared statement.
      // this allows to set next record parameters in loop continuation.
      ps.clearParameters();
    } // for outer collection
  } // if query
} catch( Exception e ) {
  // handle general ex here
} finally {
  // close db objects if required
} // try, catch, finally 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T13:01:40.377

如果您想继续使用 String，请尝试：

```
int index = 0;
String formattedQuery = query;
for (int j = 0; j < list.size(); j++) {
     index = query.indexOf("?",index);
     formattedQuery = formattedQuery.replaceFirst("\\?", list.get(j).toString());                        
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T13:05:46.613

您可以使用 Java [Formatter](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)类，但是这通常使用 % 作为值的占位符而不是 ? 因为它适用于 printf 格式字符串。

那么你可以这样做，

```
Formatter formatter = new Formatter()
formatter.format("INSERT INTO table_name(a_column, another_column) values(%s,%s)", value1, value2);
String formattedString = formatter.toString(); 
```

但是，是的，尝试使用 PreparedStatement。

此外，spring 类[SimpleJdbcTemplate](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jdbc/core/simple/SimpleJdbcTemplate.html)有一个`update(String sql, Object... args)`方法可以完全满足您的需求。

例如。 `jdbc.update(sql, value1, value2)`

# jquery - 如何突出显示点击的链接？

> ID：13030847
> 
> 赞同：1
> 
> 时间：2012-10-23T12:53:34.153
> 
> 标签：jquery

如果我有 3 个链接：

```
<a href="#link1">Somelink</a>
<a href="#link2">Somelink 2</a>
<a href="#link3">Somelink 3</a> 
```

我希望能够做到这一点，以便在单击 Somelink 2 时，它会使链接变为粗体。如果用户单击“Somelink”，则该链接变为粗体，而其他链接不变为粗体。（如果单击 Somelink 3 则相同）。这该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T12:56:12.590

## *[jsBin 演示](http://jsbin.com/udulon/1/edit)*

```
$('a').click(function(e){
   e.preventDefault();         // prevent default anchor behav.
   $(this).css({ fontWeight: 'bold' }).siblings().css({ fontWeight:'normal' });
}); 
```

在使用确保重置所有 adiacent元素的方法`click`更改字体样式和定位兄弟姐妹时。`this``.siblings()``<a>`

无需提及上面的代码将针对所有`a`元素，这只是示例。
而是像演示中那样使用父元素作为选择器：

```
$('#myLinks a').click(function(e){ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T12:55:48.587

**HTML**

```
<div id="mylinks">
  <a href="#link1">Somelink</a>
  <a href="#link2">Somelink 2</a>
  <a href="#link3">Somelink 3</a>
</div> 
```

**CSS**

```
.highlight{     
 font-weight:bold;
} 
```

**jQuery**

```
$(document).ready(function(){

$('#mylinks a').click(function(){
 $('#mylinks a').removeClass('highlight');
 $(this).addClass('highlight');
});

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-29T12:01:26.023

以下解决方案没有 JavasSript。

**HTML 代码：**

```
 <ul class="listNone">
                        <li class="inline">
                            <button name="planText2" type="button">The Studio</button> &nbsp;
                        </li>
                        <li class="inline">
                            <u> <button autofocus name="planText2" type="button">Deluxe Portion</button></u> &nbsp;
                        </li>
                        <li class="inline">
                            <button name="planText2" type="button">Penthouse</button> &nbsp;
                        </li>
                        <li class="inline">
                            <button name="planText2" type="button" >Top Garden</button> &nbsp;
                        </li>
                        <li style="display:inline">
                            <button name="planText2" type="button">Double Height</button> &nbsp;
                        </li>
                        <!--onclick="this.style.color='#3399ff';this.style['text-decoration']='underline'"-->
<!--onclick="window.location.href='about.html'"-->
                    </ul> 
```

**CSS：**

```
 button[name="planText2"]{
        background: none; color: #5b5f66; border: none; padding-left: 18px; padding-right: 18px; padding-top: 5px; padding-bottom: 5px; font: inherit; cursor: pointer; outline: inherit;
    }
    button[name="planText2"]:visited {
        color: #3399ff;
        text-decoration: underline;
    }
    button[name="planText2"]:focus {
        color: #3399ff;
        text-decoration: underline;
    }
    button[name="planText2"]:active {
        color: #3399ff;
        text-decoration: underline;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T12:57:23.987

**HTML**

```
<a href="#">some link 1</a>
<br>
<a href="#">some link 2</a>
<br>
<a href="#">some link 3</a> 
```

**JS**

```
$('a').click(function() { $(this).css({'font-weight':'bold'}) }) 
```

# matlab - 使用matlab在霍夫曼中链接和解码的解开函数错误

> ID：13030848
> 
> 赞同：1
> 
> 时间：2012-10-23T12:53:38.487
> 
> 标签：matlab, mex

这是我想使用霍夫曼编码解码和链接压缩图像的解开代码。

```
#包括“mex.h”
    void unrav(uint16_T *hx, double *link, double *x, double xsz,int hxsz)
    {
        诠释我=15；
        整数 j=0，k=0，n=0；
        而 (xsz-k)
        {
            if (*(link + n) >0) {
            如果 ((*(hx + j) >> i) & 0x0001)
                n=*(链接 + n);
            否则 n=*(链接 + n) - 1;
                如果 (i) 我——；否则 { j++; 我= 15;}
                    如果 (j>hxsz)
                        mexErrMsgTxt("代码已用完？？？");
                        }
                    别的 {
                            *(x + k++) =-*(链接 +n);
                            n=0；}
                        }
                        如果 (k== xsz -1)
                            *(x+ k++) =-*(链接+n);
                            }
                            无效 mexFunction（int nlhs，mxArray *plhs[]，int nrhs，const mxArray *prhs[]）
                            {
                               双*链接，*x，xsz；
                                uint16_T *hx;
                                诠释 hxsz;
                                如果（nrhs ！= 3）
                                mexErrMsgTxt("需要三个输入。");
                                否则如果 (nlhs>1)
                                        mexErrMSgTxt("输出参数太多。");
                                        if(!mxIsDouble(prhs[2]) || mxIsComplex(prhs[2]) ||
                                            mxGetN(prhs[2])*mxGetM(prhs[2]) !=1)
                                            mexErrMsgTxt("输入大小必须是标量");
                                            hx=(uint16_T *) mxGetData(prhs[0]);
                                            链接=（双*）mxGetData（prhs [1]）；
                                            xsz=mxGetScalar(prhs[2]);
                                            hxsz=mxGetM(prhs[0]);
                                            plhs[0]=mxCreateDoubleMatrix(xsz, 1, mxREAL);
                                            x=(双 *) mxGetData(plhs[0]);
                                            unrav（hx，链接，x，xsz，hxsz）；
                                 }

```

这是我的解开程序，但是在 matlab R2012a 上执行它时，它显示如下错误：

```
架构 x86_64 的未定义符号：
      “_mexErrMSgTxt”，引用自：
          unrav.o 中的 _mexFunction
    ld：未找到架构 x86_64 的符号
    collect2: ld 返回 1 个退出状态
        mex：“unrav.mexmaci64”的链接失败。

```

我正在使用 Mac OSX Lion 10.7.2 并且我有 Xcode 4.2，但我尝试在那里编译它但不支持 mex.h 文件

我知道程序没问题，但我不知道我该怎么做？请任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:20:16.397

调用的正确函数是[`mexErrMsgTxt`](http://www.mathworks.se/help/matlab/apiref/mexerrmsgtxt.html). 函数名称区分大小写。你拼错了，所以链接器找不到它：

```
mexErrMSgTxt("Too many output arguments."); 
```

# gwt - 如何获取 GWT 小部件类型

> ID：13030857
> 
> 赞同：0
> 
> 时间：2012-10-23T12:53:57.293
> 
> 标签：gwt

有什么方法可以获取 GWT 小部件的类型吗？

```
for(Widget w : widgetList)  
{  
 //if w is textbox type, read value and do something

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:32:40.230

```
for(Widget w : widgetList)
{
  if(w instanceof textbox)
        // read value and do something
} 
```

# three.js - 如何为 ThreeJS 生成文档

> ID：13030858
> 
> 赞同：1
> 
> 时间：2012-10-23T12:54:00.637
> 
> 标签：three.js

我记得threejs的文档是基于sphinx的，但是我找不到.rst文件。

Threejs的文档是怎么生成的？

是直接用html写的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:01:48.313

[直接用html写](https://github.com/mrdoob/three.js/blob/dev/docs/api/cameras/Camera.html)的。但是有一些[快捷方式的标记](https://github.com/mrdoob/three.js/blob/dev/docs/page.js#L22-28)。

# android - 在 Android 中为我的 EditText 实现 InputFilter 的问题

> ID：13030865
> 
> 赞同：1
> 
> 时间：2012-10-23T12:54:27.240
> 
> 标签：android, android-edittext, input-filtering, input-filter

我想限制我的应用程序的用户在 EditText 中输入值。值应如下所示：3/54/32

第一个数字：0..13 中间数字：0..7 最后一个数字：0..255

斜线应该在 EditText 中显示修复！

我已经有一个 IP 地址的 InputFilter，但我不明白它...... ;-)

```
 //Use a input filter for the input of the IP address
            InputFilter[] filters = new InputFilter[1];
            filters[0] = new InputFilter() {
                    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
                        if (end > start) {
                            String destTxt = dest.toString();
                            String resultingTxt = destTxt.substring(0, dstart) + source.subSequence(start, end) + destTxt.substring(dend);
                            if (!resultingTxt.matches ("^\\d{1,3}(\\.(\\d{1,3}(\\.(\\d{1,3}(\\.(\\d{1,3})?)?)?)?)?)?")) { 
                                return "";
                            } else {
                                String[] splits = resultingTxt.split("\\.");
                                for (int i=0; i<splits.length; i++) {
                                    if (Integer.valueOf(splits[i]) > 255) {
                                        return "";
                                    }
                                }
                            }
                        }
                 return null;
                 }
            };                  
            et_router_ip.setFilters(filters); 
```

如果有人可以帮助我，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:43:40.163

如果您将编辑文本除以 3 个不同的输入视图，那就更棒了。

为此准备您的一般功能，您必须在其中传递最小输入值、最大输入值和您的 Edit Text Obj Like ：

```
public void Edit_Validation(int MinLen, int MaxLen, EditText edt)
  throws NumberFormatException {
if (edt.getText().toString().length() <= 0) {
  edt.setError("Required.");
  data = null;
} else if (Double.valueOf(edt.getText().toString()) < MinLen
    || Double.valueOf(edt.getText().toString()) > MaxLen) {
  edt.setError("Out of Range " + MinLen + " or " + MaxLen);
  data = null;
} else {
  data = edt.getText().toString();
} } // END OF Edittext validation 
```

现在您检查当前值当用户使用编辑文本输入时`TextWatcher`。

```
// EditText Validateion
Your_First_EditText.addTextChangedListener(new TextWatcher() {
  @Override
  public void onTextChanged(CharSequence s, int start, int before, int count) {

  }

  @Override
  public void beforeTextChanged(CharSequence s, int start, int count, int after) {

  }

  @Override
  public void afterTextChanged(Editable s) {
    try {

      Edit_Validation(0,13, Your_First_EditText);

    } catch (Exception e) {
      Log.e("Invalid Value", "Negative Value");
    }

  }
}); 
```

现在，您可以在接下来的两个 Edit Text Watcher 中以同样的方式调用 Edit_Validation(...)。

我认为这将很容易且耗时。我也在我的一个应用程序中使用了同样的方法。

如果您得到准确的答案，请与我分享。

# php - 将从 MySQL 获取的 PHP 数组编码为使用 PHP 5.2.17 转义的 JSON unicode

> ID：13030867
> 
> 赞同：0
> 
> 时间：2012-10-23T12:54:31.887
> 
> 标签：php, json, character-encoding

我正在使用 PHP 5.2.17 服务器 + MySQL 5.1.65。

我有一个表，其中包含一个字段，`VARCHAR utf8_general_ci`并且我从该表中获取一条记录。

这就是我打开连接的方式，没什么特别的：

```
$link = mysql_connect('localhost', 'user', 'pass'); 
```

我需要使用包含特殊字符的 JSON 对象进行响应 Unicode 转义，我的意思是`\u00e1`符号。

```
 $result = mysql_query(sprintf("select * from data t where t.domain='%s'", escape($domain));

  while($row = mysql_fetch_array($result)) {
    $r[] = array(
      "tagid" => $row['DATAID'],
      "name" => $row['NAME']
    );
   )

$encoded = json_encode($r);
header('Content-type: application/json');
exit($encoded); 
```

我的问题是`null`在 JSON 响应中返回包含特殊字符 (áé..) 的字段。

谷歌搜索了一段时间后，我发现 PHP 5.2 缺少`json_encode`参数，所以我需要手动对名称字段进行 unicode-escape。但我怎么能这样做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T13:13:47.367

`json_encode()`应该能够很好地处理 UTF-8 数据 - JSON 仅是 UTF-8，因此 PHP 不具备 UTF-8 感知的这个特定功能会很奇怪。

```
$array = array('key' => 'せ');

var_dump(json_encode($array)); // string(16) "{"key":"\u305b"}" 
```

您的列*排序规则*可能是`VARCHAR utf8_general_ci`，但这并不意味着字符被*编码*为 UTF-8。您的表应使用以下内容创建：

```
CREATE TABLE ... CHARACTER SET utf8 
```

您可能应该将其作为您的第一个查询执行：

```
SET NAMES utf8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:58:52.837

您可以`json_encode`自己实现，这应该不会有问题，或者检查其他人的代码，例如[这个](http://www.php.net/manual/en/function.json-encode.php#89908)（当您发现有必要时进行可选调整）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T13:13:57.903

实际上没有必要进行这种转义。更有可能的是，您的输入数据实际上不是有效的 UTF-8。

更改表的排序规则可能无法解决此问题。你绝对确定它是有效的吗？

另外：停止使用 mysql_ 函数并使用 PDO 或 mysqli。mysql_ 函数在很久很久以前就被弃用了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-22T19:36:23.187

您可能还会发现 base64_encode(ing) 数据将使 json_encode 更可靠。在你的例子中：“标签

```
"tagid" => base64_encode($row['DATAID'])
... 
```

然后你 json_encode 整个事情。当然，您必须在另一端进行 base64_decode。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-19T23:27:12.220

如果您（像我一样）受困于 5.4 之前的`PHP`环境，这适用于`return`使用`mysql`or `mysqli`(string original `MySQL utf8`) 获取的带有拉丁重音的 multirow ：

```
$encoded = jsonEncode($r);
exit($encoded);
function jsonEncode($outputArray) {
    $outputMe = "[";
    $k = 0;
    foreach ($outputArray as $key => $valueArray) {
        if ($k) { 
            $outputMe.=","; 
        }
        $outputMe.="{";
        $l=0;
        foreach ($valueArray as $position => $value) {
            if ($l) { 
                $outputMe.=","; 
            }
            $outputMe .= '"'.$position.'":"'.$value.'"';
            $l++;
        }
        $outputMe .= "}";
        $k++;
    }
    $outputMe .= "]";
    return $outputMe;
} 
```

# python - python - 如果字符无效则删除行

> ID：13030871
> 
> 赞同：2
> 
> 时间：2012-10-23T12:54:47.440
> 
> 标签：python, regex, md5

我有一个 2GB 的 .txt 文件，其中包含超过 6000 万行的 MD5 哈希值。由于“算术错误”，我一直在将其导入软件时遇到问题，因此在此之前，我删除了任何不包含 32 个字符的行（以表示 MD5 哈希长度）。尽管如此，问题仍然存在。

手动查看文档后，有些行确实不包含有效的哈希值。因此，我希望阅读每一行，如果它包含的值不是 0-9 和 AF 之间的值，我希望删除该行。

我预计可能需要正则表达式，但不确定。

我只是在获得有关如何实现此字符串验证的一些指示？如前所述，每行应仅包含 0-9 和 AF（十六进制）之间的字符。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T13:08:57.093

```
import re
import sys
import fileinput

md5_checker = re.compile("^[a-fA-F0-9]{32}$")

for line in fileinput.input():
    if md5_checker.match(line):
        sys.stdout.write(line)
    else:
        sys.stderr.write("INVALID: %s" % line) 
```

用法：

```
$ cat testfile.txt 
0cc175b9c0f1b6a831c399e269772661
92eb5ffee6ae2fec3ad71c777531578f
asdf
0cc175b9c0f1b6a831c399e269772661
92eb5ffee6ae2fec3ad71c777531578f

$ python ~/Desktop/md5_checker.py testfile.txt > cleaned.txt
INVALID: asdf

$ cat cleaned.txt 
0cc175b9c0f1b6a831c399e269772661
92eb5ffee6ae2fec3ad71c777531578f
0cc175b9c0f1b6a831c399e269772661
92eb5ffee6ae2fec3ad71c777531578f 
```

**警告**：不要读写同一个文件（`md5_checker testfile.txt > testfile.txt`将擦除文件！）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T12:58:57.823

一个可能的正则表达式是，它当然也可能匹配其他事物。但是，它只检查字符 AF 和数字 0-9。

```
r'^[A-F\d]+$' 
```

您可以轻松添加`{32}`以检查长度，但您说您已经清除了任何非 32 长度的行，这没关系（对于正则表达式的新手来说，只会不必要地模糊事物）。作为参考，它看起来像这样：

```
r'^[A-F\d]{32}+$' 
```

您只需逐行读取文件并匹配正则表达式。如果匹配，则将其添加到输出文件中。

有关 Python re 模块的更多信息，请查看[http://docs.python.org/library/re.html](http://docs.python.org/library/re.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T13:02:14.013

[`re.match`](http://docs.python.org/library/re.html#re.match)与正确的正则表达式一起使用。

```
import re

r = re.compile(r'^[a-fA-F0-9]{32}$')

with open("hashes") as i, open("hashes_cleaned", "w") as o:
    for line in i:
        # Cheap check for 32 chars, first.
        if len(line.strip()) == 32 and r.match(line.strip()):
            o.write(line) 
```

**例子**

输入：

```
% cat hashes
c2cf0d7b2d3c5cd91a1314a2285ce53e
12524f7af3a5dad467264683d0ec6206
746518a1c63294d367c23cab37f4166c
foo
4d6deee14efe78180c698679e16f7342
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
eb9a25b6b525ae665115b43a259d2355 
```

输出：

```
% cat hashes_cleaned 
c2cf0d7b2d3c5cd91a1314a2285ce53e
12524f7af3a5dad467264683d0ec6206
746518a1c63294d367c23cab37f4166c
4d6deee14efe78180c698679e16f7342
eb9a25b6b525ae665115b43a259d2355 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T13:02:38.227

您可以使用 re 来解析该行。
试试这个代码：

```
import re
match = re.match('[0-9A-F]{32}', line)
if match:
    #valid line
else:
    #invalid line 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T13:20:24.353

不使用正则表达式的另一种可能的解决方案

```
import string
#create a set of all possible hex digits.
#in case you want only upper case hex letters, 
#convert to upper
hexchars = set(string.hexdigits.upper())
#iterate through your file
for line in somefile:
    #See if there is any chars apart from the hex char set
    if set(line) - set(hexchars):
        print "Some Invalid Message"
    else:
        #Do something useful 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T13:45:13.890

```
grep '[A-Fa-f\d]{32}' filename.txt >newfilename.txt if you have access to terminal. 
```

# sql - SQL Server 2008 big INSERT 包裹在事务中后仍然很慢

> ID：13030872
> 
> 赞同：4
> 
> 时间：2012-10-23T12:54:47.393
> 
> 标签：sql, sql-server

我一直在查看查询中的一个大 INSERT 问题：

```
INSERT table_name
SELECT .....; 
```

该表没有索引，需要大约 2000 万行才能插入其中。我在我们的一台服务器上运行 SQL Server 2008 R2 中的查询。原版表演约40分钟。然后我在这里阅读帖子，告诉我将`INSERT`in `BEGIN TRANSACTION`/包装起来`COMMIT`。我这样做了，花费的时间减少到 6 分钟。

但是，当我尝试运行接下来的几次事务包装查询时，时间又回到了 40 分钟，就像`TRANSACTION`效果消失了一样。我不知道在接下来的运行中发生了什么。任何想法？

添加：

另一篇[文章](https://stackoverflow.com/questions/521887/how-much-does-wrapping-inserts-in-a-transaction-help-performance-on-sql-server)说 TRANSACTION 旨在用于数据一致性而不是性能，建议每 5K 行批量插入。如何将单个 INSERT SELECT 语句拆分为批次？我很困惑。

更新：

事实上，我发现性能提升不是来自 TRANSACTION，而是可能来自服务器端表缓存，因为我接下来运行了几次，性能大约是 5 分钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:25:48.360

可能有很多事情会影响这一点。正在使用的日志记录类型，服务器上发生的其他事情，能够获得表排他锁的操作，硬件（主要是磁盘 IO），表上已经存在哪些索引等。

插入 2000 万条记录会产生大量的日志记录。您要确保执行最少记录的操作。为此，请考虑 SELECT INTO（如果可能）。但是，如果您坚持使用 INSERT SELECT，请考虑使 SELECT INTO 成为最小记录操作的因素。请参阅[http://msdn.microsoft.com/en-us/library/dd425070%28v=sql.100%29.aspx](http://msdn.microsoft.com/en-us/library/dd425070%28v=sql.100%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T13:58:52.223

当您`INSERT ... VALUES`在事务中包装许多语句时，可能会大幅加速，因为您不必在每次插入后将脏数据页写入磁盘。但是，当您在显式事务中包装单个`INSERT ... SELECT`事务时，并没有加速，因为甚至在此之前就有一个隐式事务并且机制并没有真正改变。很可能同时在您的环境中发生了其他变化。

逐渐的性能下降可能是由于目标表的增长，或者数据库的增长。前者永远不会停止增长，后者可能会随着您的数据库不断增长而变得更加可变/不可预测，因此它可能不是下降，而是一种趋势。

如果您始终可以确保将数据插入到空表中，请考虑更加激进并每次都将其删除。使用`SELECT INTO`而不是`INSERT ... SELECT`. 这可能会也可能不会满足您的参照完整性需求。不同语法的优点是不同的日志记录策略。

如果在下一次插入之前无法删除表，但您可以确保在`INSERT`操作过程中它永远不会被其他连接访问，则可以使用隔离级别或表提示来避免锁定；然而，实现类似目标的更安全的方法是`TABLOCK`提示。通过在开始时锁定整个表格，这种暗示走向了极端。其他所有人都被排除在外，并且没有时间花在行级锁定上。

插入按目标表的（聚集）主键排序的数据。您可以考虑在您*的*`INSERT`.

注意你的 mdf 文件大小。避免您看到它以小增量自动增长的情况。

最后一招：做一些硬件使用规划并对目标表进行分区。为此，您需要从“请快一点”的心态转变为“我需要达到这个速度”的心态。维护起来要复杂得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T13:06:09.290

要快速插入批量数据，请使用批量复制。

您可以使用 BCP 实用程序：

*   [http://technet.microsoft.com/en-us/library/ms162802.aspx](http://technet.microsoft.com/en-us/library/ms162802.aspx)

或者，从 .Net 或者您可以使用 Sql Native Client：

*   [http://technet.microsoft.com/en-us/library/ms130809(v=SQL.100).aspx](http://technet.microsoft.com/en-us/library/ms130809(v=SQL.100).aspx)

或者在数据库中进行批处理类型的复制：

```
declare @todo table( primaryKeyFieldName primary key)
insert @todo select primaryKeyFieldName from SourceTable

declare @batch table(primaryKeyFieldName primary key)
delete @batch
while exists (select 1 from @todo)
begin 
    insert @batch select top 500 primaryKeyFieldName from @todo
    delete todo from @todo todo inner join @batch b on b.primaryKeyFieldName = todo.primaryKeyFieldName 
    insert DestinationTable(fields....)
    select s.fields, ....
    from SourceTable s inner join @batch b on s.primaryKeyFieldName = b.primaryKeyFieldName
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T13:08:04.947

如果这是您需要执行的常规任务，为什么不能创建 SSIS 包并在必须执行此操作时运行它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T15:25:19.923

我刚刚用“WITH（TABLOCK）”提示进行了测试，最终得到了令人满意的性能。与原来的 40 分钟相比，整个查询运行 3 分钟。这是一个巨大的改进，因为查询正在执行初始表填充工作，所以不用担心访问冲突。

谢谢大家的有益评论。

# java - 使用 OpenJPA 时 ORM 中的死锁

> ID：13030875
> 
> 赞同：0
> 
> 时间：2012-10-23T12:54:56.037
> 
> 标签：java, jpa, orm, deadlock, openjpa

我在执行负载测试时遇到了死锁，`Soap UI`每个线程运行 10 个线程向我的 Web 服务发出 10 个请求，该 Web 服务调用 OpenJPA 实体管理器的 persits 方法。

然后我正在执行单个请求，一切都很好，但在多线程环境中它最终会出现死锁。

我得到的错误是：

```
Deadlock found when trying to get lock; try restarting transaction {prepstmnt 12796448 UPDATE Assessment SET dateCompleted = ? WHERE id = ? [params=?, ?]} [code=1213, state=40001] 
```

因死锁而崩溃的方法是：

```
@Override
public AssessmentKey update(AssessmentKey assessmentKey) {
    OpenJPAEntityManager openJpaEntityMgr = OpenJPAPersistence.cast(entityManager);
    for (Assessment assessment : assessmentKey.getAssessments()) {
        if (!entityManager.contains(assessment) && !openJpaEntityMgr.isDetached(assessment)) {
            LOGGER.debug("Persisting {}", assessment);
            entityManager.persist(assessment);
        }
    }
    return entityManager.merge(assessmentKey);
} 
```

`Assessment`是 OpenJPA 的一个实体，它只是一个包含 JPA 注释的普通实体。如果您需要它的代码，请索取。

我了解死锁是如何发生的，[这里](https://stackoverflow.com/questions/2332768/how-to-avoid-mysql-deadlock-found-when-trying-to-get-lock-try-restarting-trans)提到了如何解决它们。但是如何在 ORM 中解决它们我找不到答案。

我的`persistence.xml`文件如下所示：

```
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">
    <persistence-unit name="com.groupgti.esb.online.tests">
        <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
        <class>com.groupgti.esb.assessments.model.jpaimpl.Assessment</class>
        <exclude-unlisted-classes>true</exclude-unlisted-classes>
        <validation-mode>NONE</validation-mode>
        <properties>
            <property name="openjpa.Log" value="slf4j"/>
            <property name="openjpa.DataCache" value="false"/>
            <property name="openjpa.ReadLockLevel" value="none"/>
            <property name="openjpa.WriteLockLevel" value="pessimistic-write"/>
            <property name="openjpa.LockTimeout" value="10000"/>
            <property name="openjpa.RuntimeUnenhancedClasses" value="unsupported"/>
        </properties>
    </persistence-unit>
</persistence> 
```

整个应用程序使用`Spring`和完成事务的类被标记`@Transactional`。如何解决 ORM 中的这个死锁问题？

**编辑：**

与`AssessmentKey`有关系`Assessment`：

```
@OneToMany(fetch = FetchType.EAGER, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REMOVE}, mappedBy = "assessmentKey")
private List<Assessment> assessments = new ArrayList<Assessment>(); 
```

`Assessment` `AssessmentKey`看起来像这样：

```
@ManyToOne(fetch = FetchType.EAGER, cascade = {CascadeType.PERSIST, CascadeType.MERGE})
@Index
@Column(nullable = false)
@ForeignKey
private AssessmentKey assessmentKey; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:24:18.130

`AssessmentKey`and`Assessment`是`OneToMany`双向关系。`OneToMany`and `ManyToOne`annotations have `CascadeType.PERSIST`and others。

**要点是：**

当`EntityManager`坚持时`Assessment`，`AssessmentKey`也会坚持。您应该需要`AssessmentKey`再次持久化或合并。

让我建议 OR Mapping 如下：

评估密钥.java

```
@OneToMany(fetch = FetchType.EAGER, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REMOVE}, 
           mappedBy = "assessmentKey", orphanRemoval=true)
private List<Assessment> assessments; 
```

评估.java

```
@ManyToOne(fetch = FetchType.EAGER, cascade = {CascadeType.REFRESH})
@JoinColumn(name = "ASSESSMENT_ID", referencedColumnName = "ID")
private AssessmentKey assessmentKey; 
```

数据库操作

```
@Override
public AssessmentKey update(AssessmentKey assessmentKey) {
    OpenJPAEntityManager openJpaEntityMgr = OpenJPAPersistence.cast(entityManager);
    // there may be your operation
    return entityManager.merge(assessmentKey);
} 
```

我假设，`Assessment`当前`AssessmentKey`对象的值可能如下

```
On System                               |   In Existing Database
ID      Description                     |   ID      Descrition
1001    AAA         => No Changes       |   1001    AAA
1002    BBB         => Need to update   |   1002    BB
null    DDD         => Need to add      |   1003    CCC     => need to remove. 
```

当 EntityManager 合并`AssessmentKey`时，将完成我在上述数据结构中提到`EntityManager`的所有过程。`Assessment`

**注意：**确保`orphanRemoval=true`在`OneToMany`注释中。

# android - 当用户点击来自 Xtify 的通知时如何打开特定的活动？

> ID：13030876
> 
> 赞同：0
> 
> 时间：2012-10-23T12:54:56.600
> 
> 标签：android, push-notification, google-cloud-messaging, xtify

我正在使用 Xtify 向 Android 应用程序发送推送通知，我在使用 Xtify SDK for GCM 时遇到问题

当推送通知来自 Xtify 并且用户单击它时，它会打开应用程序的主 Activity，但我需要它来打开特定的 Activity。我应该如何使用它？

这是我的 Manifiest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.Knockbook.CookingRecipes"
android:versionCode="2"
android:versionName="1.1" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<uses-permission android:name="android.permission.INTERNET" />

<permission
    android:name="com.Knockbook.CookingRecipes.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.Knockbook.CookingRecipes.permission.C2D_MESSAGE" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity>
    <activity android:name=".AdsActivity" />

    <receiver android:name=".XtifyNotifier" >
        <intent-filter>
            <action android:name="com.xtify.sdk.NOTIFIER" />
        </intent-filter>
    </receiver>

    <provider
        android:name="com.xtify.sdk.db.Provider"
        android:authorities="com.Knockbook.CookingRecipes.XTIFY_PROVIDER"
        android:exported="false" />

    <receiver android:name="com.xtify.sdk.c2dm.C2DMBroadcastReceiver" >
        <intent-filter android:permission="com.google.android.c2dm.permission.SEND" >
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />

            <category android:name="com.Knockbook.CookingRecipes" />
        </intent-filter>
        <intent-filter android:permission="com.google.android.c2dm.permission.SEND" >
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="com.Knockbook.CookingRecipes" />
        </intent-filter>
    </receiver>
    <receiver android:name="com.xtify.sdk.NotifActionReceiver" />
    <receiver android:name="com.xtify.sdk.wi.AlarmReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>

    <service android:name="com.xtify.sdk.location.LocationUpdateService" />
    <service android:name="com.xtify.sdk.c2dm.C2DMIntentService" />
    <service android:name="com.xtify.sdk.alarm.MetricsIntentService" />
    <service android:name="com.xtify.sdk.alarm.TagIntentService" />
    <service android:name="com.xtify.sdk.alarm.RegistrationIntentService" />
    <service android:name="com.xtify.sdk.alarm.LocationIntentService" />
</application> 
```

这也是 XtifyNotifier

```
package com.Knockbook.CookingRecipes;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.PowerManager;
import android.sax.StartElementListener;
import android.util.Log;

import com.xtify.sdk.NotifActionReceiver;
import com.xtify.sdk.NotificationsUtility;
import com.xtify.sdk.api.NotificationsPreference;
import com.xtify.sdk.api.XtifyBroadcastReceiver;
import com.xtify.sdk.api.XtifySDK;

public class XtifyNotifier extends XtifyBroadcastReceiver {

@Override
protected void onC2dmError(Context arg0, String arg1) {
    // TODO Auto-generated method stub

}

@Override
protected void onMessage(Context context, Bundle bundle) {
    Log.d("XRecipes", "enter on Message");
    if(bundle !=null){
    String key = bundle.getString("key1");
    if (key != null) {
        Log.d("VVVVVVVVV ", key);
    }
}
      generateNotification(context, "zzzzz", "M<MMMMM");
}

@Override
protected void onRegistered(Context arg0) {
    // TODO Auto-generated method stub

}

 private static void generateNotification(Context context, String title,
         String message) {
     int icon = R.drawable.ic_launcher;

     NotificationManager notificationManager = (NotificationManager) context
             .getSystemService(Context.NOTIFICATION_SERVICE);
     Notification notification = new Notification(icon, title,
             System.currentTimeMillis());

     Intent notificationIntent = new Intent(context, AdsActivity.class);
     // set intent so it does not start a new activity
     notificationIntent.putExtra("message", message);
     notificationIntent.putExtra("title", title);

     PendingIntent intent=PendingIntent.getActivity(context, 0,
             notificationIntent,PendingIntent.FLAG_UPDATE_CURRENT );
     notification.setLatestEventInfo(context, title, message, intent);
     notification.flags |= Notification.FLAG_AUTO_CANCEL;
     notificationManager.notify(0, notification);
 }

} 
```

注意：我出现了两个通知，一个由 Xtify SDK 生成（不打开我想通过通知打开的 Activity），另一个由 generateNotification(context, "zzzzz", "M

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:19:07.973

在您的接收器上，例如：`<receiver android:name="com.xtify.samples.gcm.XtifyNotifier">`使用以下方法实现您自己的新消息处理`CallBack`：

```
public void onMessage(Context context, Bundle msgExtras) 
```

您可以在其中添加对通知的完整处理，或者简单地覆盖该方法：

`public static void processNotifExtras(Context context, Bundle msgExtras)`在`RichNotificationManger.java`课堂上

PS：您必须添加自己的接收器，例如：

```
<receiver android:name="com.xtify.samples.gcm.XtifyNotifier" >
            <intent-filter>
                <action android:name="com.xtify.sdk.NOTIFIER" />
            </intent-filter>
        </receiver> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-24T08:50:36.143

要禁用 xtify sdk 的默认通知，请使用以下步骤

使用 json 有效负载 {"com.xtify.sdk.NOTIF_ACTION_TYPE":"NONE"}

并将 Simple Notification Click Action: 设置为 Rich 通知。

它将禁用 xtify SDK 的默认通知。

# c# - 寻找具有持久顺序索引的数据结构

> ID：13030881
> 
> 赞同：1
> 
> 时间：2012-10-23T12:55:14.417
> 
> 标签：c#, .net, data-structures

我正在寻找一种基本上像这样工作的数据结构：

*   该结构是有序的值序列。
*   每个插入的值都声明一个大于前一个索引的索引，不会被重用，也不会移动（它是*持久*的）。
*   可以在一次操作中从结构中删除特定索引之前的所有项目。
*   所有仍然活着的项目都可以通过它们的索引来访问。
*   可以批量检索两个索引之间的所有项目。（如果可以在添加新项目时检索它们，那也很棒。）

以上是我最好的实现猜测。我真正想要的属性是能够拥有一个保存某种书签值并且可以读取新项目而不会错过的消费者，并且能够在某个时间戳之前清除项目。但是，数据结构不需要知道时间戳；能够在特定索引之前删除所有内容就可以了。

我将实现此结构的方式是保留项目计数开始位置的 int，然后直接保留项目列表或列表段列表。作为某种原始整数的索引将换行，但不会在程序生命周期的实际时间跨度的几倍内。

我所知道的最接近的结构是来自[LMAX Disruptor](http://lmax-exchange.github.com/disruptor/)的特定环形缓冲区。但是，如果消费者落后太远，这种结构也会阻塞，这不符合我的目的。消费者是面向批处理的，可能得不到频繁的 CPU 时间；Disruptor 在专门的逻辑任务上工作得最好，专门的逻辑任务不断地在环形缓冲区上工作。

所以我要问的问题是：

*   有这个名字吗？
*   是否有针对 C# 或其他语言的实现？
*   我的用例有更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:05:27.567

不知道任何与此完全一样的预设集合，但您可以创建自定义集合对象，扩展 System.Collections.CollectionBase。

```
public class MyCollection : CollectionBase
{
    public MyCollection() { } 
```

此集合基础对象包含一个 List 属性，您可以以任何您喜欢的方式公开该属性，例如，添加一个 Add() 方法

```
public int Add(Object o) // could by anything
{
    return List.Add(o);
} 
```

您可以有一个返回新集合的 GetRange(int start, int length)，就像您填充返回集合一样，从基本集合中删除

# serial-port - 无法从树莓派向 arduino mega 2560 发送“Hello World”

> ID：13030882
> 
> 赞同：1
> 
> 时间：2012-10-23T12:55:14.760
> 
> 标签：serial-port, arduino, raspberry-pi

全部 -

我已按照以下说明进行操作：

[http://www.mitchtech.net/raspberry-pi-arduino-spi/](http://www.mitchtech.net/raspberry-pi-arduino-spi/)

但是，当我到达最后一步时

```
sudo ./spidev_test 
```

即使我的波特率为 115200，我也从未在串行监视器控制台中看到“HELLO WORLD”。

我确实尝试运行以下命令

```
ls -al /lib/modules/`uname -r`/kernel/drivers/spi/ 
```

它只有两个内核驱动程序：

*   spi-bcm2708.ko
*   蜘蛛网

这可能是问题吗？根据网站，我应该还有两个：

*   spi-bitbang.ko
*   spi-gpio.ko

我如何获得这两个驱动程序的副本这是问题所在？

当我运行“spidev_test”程序时，我得到一些输出，上面写着“每字 8 位”，但没有错误消息。

# java - 让客户通过数据报/多播通知列表

> ID：13030885
> 
> 赞同：0
> 
> 时间：2012-10-23T12:55:18.307
> 
> 标签：java, networking, serialization, multicast

我正在构建一个客户端-服务器应用程序。服务器保留一个对象列表：

```
 LinkedList<MyObject> objects; 
```

每次添加或删除对象时，客户端都应该知道这一点。他们已经加入了多播组。让他们收到更改通知的最佳方式是什么？

我应该创建一个扩展 LinkedList 的类并用 Serializable 实现它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:11:17.077

每次更改时多播更新的列表当然很简单，但可能存在问题。

*   如果列表变大或更新频繁，则可伸缩性可能是一个问题。考虑将更改作为“增量”发送到列表，而不是每次都发送整个列表。

*   使用序列化`ObjectOutputStream`可能会很昂贵，尽管您可以通过编写自定义`readObject`和`writeObject`方法来提高性能。（列表的序列化已经优化......）

*   你不需要子类`LinkedList`来做到这一点。已经是了`Serializable`。

*   您很可能需要同步列表结构以避免竞争条件和混乱，但这会产生潜在的瓶颈。考虑用or`List`的并发实现替换。`Queue``Deque`

# java - SWT：如何删除或取消鼠标按下事件？

> ID：13030890
> 
> 赞同：0
> 
> 时间：2012-10-23T12:55:28.383
> 
> 标签：java, combobox, swt, mouseevent, double-click

我正在扩展一个在 mousedown 事件上进行选择的组合框，但我希望在双击时进行选择。我怎样才能做到这一点？

# java - Graphics2D 绘图性能

> ID：13030891
> 
> 赞同：1
> 
> 时间：2012-10-23T12:55:33.777
> 
> 标签：java, performance, graphics2d

我正在尝试通过`Graphics2D`在 Swing 组件中使用 Java 对象手动绘制“事物”来尝试一些事情，当我达到大约 >2000 个正方形时，我命令对象绘制它变得非常慢。

我不知道这是否“常见”。要渲染的 2000 个对象真的“很多”吗？`Graphics2D`对象只是不是很高效吗？在我尝试更复杂的东西之前，我是否应该停止现在的位置并切换到 JOGL 并且为时已晚？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:22:37.477

我编写了一个 Java Spirograph GUI，它可以在 20 毫秒或更短的时间内绘制数万条线段。

![在此处输入图像描述](../Images/2bf73ad83e727369870ad264c1b6b4d3.png)

确保您在应用程序的其他地方进行计算。您的绘图代码应该只做一件事且只做一件事：绘图。

但是，Graphics 和 Graphics2D 的速度存在实际限制。这个 Spirograph 用了 172 毫秒来绘制超过 250,000 条线段。

![在此处输入图像描述](../Images/e68134577a9664f570b22b57515aca35.png)

# java - Java WebStart 未安装在 Windows7 中

> ID：13030895
> 
> 赞同：0
> 
> 时间：2012-10-23T12:55:37.507
> 
> 标签：java, windows-7-x64, java-web-start

我的 Webstart 应用程序适用于 Windows XP。它应该自行安装并在桌面上放置一个桌面快捷方式图标：http: [//www.lehrer-werkzeug.de/start/lehwe.jnlp](http://www.lehrer-werkzeug.de/start/lehwe.jnlp)

在 Windows 7 下，应用程序启动，但桌面上没有图标，开始菜单中也没有任何图标。Java 控制面板中没有显示任何内容。同样的问题也出现在其他带有窗口 7 的计算机上。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:24:24.193

我们在这个 Windows 7 盒子上有一个“空结果”。

![在此处输入图像描述](../Images/0647c2920e438ad0641ce0a0d1a703d2.png)

## 输出。

### 安慰

```
Java Web Start 1.6.0
Using JRE version 1.7.0_09 Java HotSpot(TM) Client VM
User home directory = C:\Users\..
----------------------------------------------------
..
----------------------------------------------------
Hallo Welt! Hier ist LEHRER-WERKZEUG(9.73)
0 Assertions sind aus!
1 WebStart
2 Security-Exception: Kein Logfile möglich
3 Linux?= false
#### Java Web Start Error:
#### access denied ("java.awt.AWTPermission" "createRobot") 
```

（我制作了 JNLP 的本地副本，将代码保存在沙盒中。）

### 属性小程序

[此框的操作系统属性](http://pscode.org/prop/?prop=os.arch%2Cos.name%2Cos.version&format=TSV)。

```
Name    Value
os.arch x86
os.name Windows 7
os.version  6.1 
```

## 结论

无论问题是什么，它都不是操作系统版本。

# iphone - iOS 处理 UIBarButtonItem 的 Unwinding Segue 方式

> ID：13030896
> 
> 赞同：1
> 
> 时间：2012-10-23T12:55:42.133
> 
> 标签：iphone, objective-c, ios, storyboard

在 iOS 6 中，您可以使用 Unwinding Segue 返回到之前的视图控制器。

我现在正在使用故事板来解决这个问题。我在 iOS 5 上，我没有 Unwinding Segue。

图片说明情况： ![在此处输入图像描述](../Images/63d28d229119623147497c8b15d51dad.png)

在第三个窗口（我认为它的正式名称为故事）有一个完成按钮。

如何使该按钮在屏幕上返回一个带有文本的对象并返回到窗口 2？在那里，我的窗口 2 表应该 refries，但这超出了这个问题的范围。

我所做的是在 ThirdWindowViewController 中实现 IBOutlet（让我们称之为），它与 IBAction 方法相关联。

```
@property (nonatomic, strong) IBOutlet UITextView* textView;

@property (nonatomic, strong) Note* note;

@property (nonatomic, retain) IBOutlet UIBarButtonItem* doneButton;

- (void) configureView;
- (IBAction) doneAction:(id)sender;
- (BOOL) prepareNoteForTransition; 
```

EDIT_01

正如汤姆所写，您需要一个代表。这就是我实际做到的方式，使用我上面提到的方法。我只是认为有一些更特定于苹果的方法可以做到这一点，比如 Segues。或一些替代品。

多谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:23:10.200

您想在“故事”视图控制器中为呈现视图控制器设置委托属性：

NotesViewController.m

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"showStoryViewController"]) {
        [segue.destinationViewController setDelegate:self];
    }
}

- (void)storyViewControllerDidPressDoneWithText:(NSString *)text note:(Note *)note
{
    self.note = [NSString stringWithString:note];
    [self dismissViewControllerAnimated:YES completion:NULL];
} 
```

故事.m

```
- (IBAction)doneAction:(id)sender
{
    [self.delegate storyViewControllerDidPressDoneWithNote:self.textView.text note:self.note];
} 
```

还要确保`#import "NotesViewController.h"`在`Story.h`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T13:13:00.013

我也不确定是否理解您的问题，但如果您想要完成按钮的操作返回只需写`[self.navigationController popViewControllerAnimated:YES];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T13:04:41.233

我不确定我是否理解得很好，但你可以从你的`Done`按钮绘制一个 segue 到第二个视图控制器并实现`prepareForSegue:`. 通过这种方式，您可以将任何信息从最后一个视图控制器发送到目标控制器。

# php - php函数查找多字节字符之一的位置

> ID：13030901
> 
> 赞同：0
> 
> 时间：2012-10-23T12:55:52.027
> 
> 标签：php, multibyte

php中是否有一个标准函数可以返回一个多字节符号第一次出现的位置？

总体任务如下。我在这个字符串中有多字节字符串和位置，我需要找到其中一个符号（分隔符）的第一次出现。我编写了以下函数，但不幸的是它的运行速度很慢。

```
$delimiters = array( 
    "\r", "\n", "\t", ".", ";", "!", "?"
);

function get_cit_end($str, $end) {
    global $delimiters;
    if( $end >= mb_strlen($str) )
        return mb_strlen($str) - 1;
    $c = mb_substr($str, $end, 1);
    while( $end < mb_strlen($str) ) {
        if( in_array($c, $delimiters) )
            break;
        $end++;
        $c = mb_substr($str, $end, 1);
    }
    return $end;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:01:42.413

我会使用[`mb_strpos()`](http://php.net/mb_strpos)，像这样：

```
function get_cit_end($str, $delimeters) {
    $index = -1;
    foreach( $delimiters as $d) {
        if( ($i = mb_strpos( $str, $d)) !== false) {
            $index = $i;
            break;
        }
    }
    if( $index == -1) return mb_strlen( $str) - 1;
    return $index;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:07:08.113

如果启用`mbstring`函数重载，则可以使用`strpos()`带有多字节字符串的普通函数：

以下 mbstring-variables 应通过 php.ini 或 vhost-configuration 设置；它们不会按目录工作（即通过.htaccess）。

*   mbstring.language = 中性
*   mbstring.internal_encoding = UTF-8
*   mbstring.func_overload = 7

另见： http: [//php.net/mbstring](http://php.net/mbstring)

# regex - RegEx 用于 Unicode 字符串检查字符串不包含特定字符

> ID：13030904
> 
> 赞同：0
> 
> 时间：2012-10-23T12:56:04.727
> 
> 标签：regex, unicode, utf-16

基本上，我需要检查一个 utf-16 字符串是否不包含这些字符 /:*?<>|+。除此之外，它可以包含从英语到拉丁语的任何字符。

对于普通的 ASCII 字符串，我们会写一个 RegEx 类似 ^[^\/: *?<>|+]* $ 这个表达式对于 UTF-16 格式的字符串有什么变化？

我们可以在 RegEx 中使用 ascii 字符来表示这个表达式吗？还是我们应该有等效的 unicode 代码点来匹配任何字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:01:33.977

由于您不想允许的所有特殊字符都是普通的 ASCII 字符，请使用正则表达式模式

```
/^[^\/:*?<>|+]*$/ 
```

# php - 使用 PHP 根据请求缩小 JS/CSS 文件

> ID：13030908
> 
> 赞同：2
> 
> 时间：2012-10-23T12:56:17.347
> 
> 标签：php, javascript, css, ajax, minify

我目前正在编写一个 javascript 类，该类根据站点的需要从我的服务器加载库。很像 Google API `e.g. google.load('jquery','1.7.1')`。

我想做的一件事是将所有 JS/CSS 文件合并为一个，并使用 PHP 将它们缩小。我仔细浏览了网络，虽然我能够在 Stackoverflow 上找到一些与该主题相关的问题，但它们似乎有些过时了。因此，因此，我决定重新开始这场辩论，以获得关于这个主题的一些最新信息。

我能够在网上找到两个 PHP Javascript 缩小器，它们是

1.  [收缩](https://github.com/tedivm/JShrink)
2.  [Javascript 打包器](http://joliclic.free.fr/php/javascript-packer/en/)

*我确实找到了第三个（JSMin），但这没有维护*

我的问题很简单：

1.  这些脚本是否可靠并得到维护？他们甚至需要维护吗？
2.  他们压缩 CSS 吗？
3.  哪个脚本更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T13:10:21.107

我没有使用 JShrink 或 Javascript Packer。我认为最好的解决方案是使用[Google 的 Closure Compiler](https://developers.google.com/closure/compiler/)进行 JS 缩小。您可以在您的服务器上使用他们的命令行 Java 应用程序（如果您有权这样做）或通过 cURL 或 Zend_Request 访问他们的 RESTful API。

如果源文件没有更改，请不要忘记缓存缩小的文件并重用它们。

使用 cURL 它看起来像这样：

```
$inFile = "sample.js";
$outFile = "sample.min.js";

$ch = curl_init('http://closure-compiler.appspot.com/compile');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query(array(
  'js_code' => file_get_contents($inFile),
  'compilation_level' => 'SIMPLE_OPTIMIZATIONS',
  'output_format' => 'text',
  'output_info' => 'compiled_code'
)));

file_put_contents($outFile, curl_exec($ch)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:01:24.383

我正在使用这个，它运行良好[http://code.google.com/p/minify/](http://code.google.com/p/minify/)

如果你在windows上开发有一些问题，可能无法识别新版本，但修改文件，它会看到它

# ruby-on-rails - 如何测试 Rails ERB 模板的代码覆盖率？

> ID：13030909
> 
> 赞同：15
> 
> 时间：2012-10-23T12:56:17.763
> 
> 标签：ruby-on-rails, ruby, testing, code-coverage, erb

我只是为遗留 Rails 应用程序构建一个测试套件。gem 非常适合查找需要测试覆盖的应用程序的`simplecov`黑暗角落（或者可能完全未使用并且可以删除）。我`simplecov`只是通过在顶部包含以下内容来调用`test/test_helper.rb`：

```
require 'simplecov'
SimpleCov.start('rails') 
```

问题是这并没有检查嵌入在模板中的所有代码。里面有各种各样的垃圾，我敢肯定很多垃圾都可以删除，但是如果代码覆盖工具可以将我指向未使用的位，那就太好了。

对 Ruby 1.9 库的一些实验让我相信，如果模板以某种方式预编译为 Ruby 代码，保存在 Ruby 源文件中，然后ed 或d，而不是直接加载已编译的模板`Coverage`，它才能完成这项工作与. 或者，有可能破解 ERB 在编译过程中将日志语句添加到每个模板的每一行。`load``require``eval`

有没有人有任何其他想法如何衡量 ERB 模板的代码覆盖率？您知道可以做到这一点的现有工具吗？（或者我必须是构建和发布它的人吗？）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-29T02:45:45.280

请参阅： [如何使用 rspec、rails 和 simplecov 获取视图规范的覆盖范围？](https://stackoverflow.com/questions/10050460/how-do-i-get-coverage-for-view-specs-with-rspec-rails-and-simplecov)

答案是，你不能：

[https://github.com/colszowka/simplecov/issues/38](https://github.com/colszowka/simplecov/issues/38)

这是我希望有人能解决的关键缺陷。AFIK 对于 Ruby 1.9，没有什么比 simplecov 更好的了

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-23T13:14:01.667

试试 rake stats

它将生成一个表格，涵盖应用程序的每个部分

# java - 不正确的 gson 代码：应为 BEGIN_OBJECT 但为 STRING

> ID：13030910
> 
> 赞同：1
> 
> 时间：2012-10-23T12:56:25.950
> 
> 标签：java, android, json, gson

我编写了代码来解析来自服务器的 json 格式的响应。这是json

```
{
    "2FrontSide": {
        "back": ""
    },
    "3BackSide": {
        "back": ""
    },
    "4FrontSide": {
        "back": {
            "type": "image",
            "url": "http:\/\/www.abc.com\/sample_50.png"
        }
    }
} 
```

解析这个响应的代码是

```
Type collectionType = new TypeToken<Map<String,Map<String, VideosImages>>>(){}.getType();
Map<String,Map<String, VideosImages>> data = json.fromJson(resp, collectionType); 
```

它给

```
10-23 17:50:25.500: W/System.err(29598): com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 33
10-23 17:50:25.500: W/System.err(29598):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:180)
10-23 17:50:25.500: W/System.err(29598):    at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.read(TypeAdapterRuntimeTypeWrapper.java:40)
10-23 17:50:25.505: W/System.err(29598):    at com.google.gson.internal.bind.MapTypeAdapterFactory$Adapter.read(MapTypeAdapterFactory.java:188)
10-23 17:50:25.505: W/System.err(29598):    at com.google.gson.internal.bind.MapTypeAdapterFactory$Adapter.read(MapTypeAdapterFactory.java:146)
10-23 17:50:25.505: W/System.err(29598):    at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.read(TypeAdapterRuntimeTypeWrapper.java:40)
10-23 17:50:25.505: W/System.err(29598):    at com.google.gson.internal.bind.MapTypeAdapterFactory$Adapter.read(MapTypeAdapterFactory.java:188)
10-23 17:50:25.505: W/System.err(29598):    at com.google.gson.internal.bind.MapTypeAdapterFactory$Adapter.read(MapTypeAdapterFactory.java:146)
10-23 17:50:25.510: W/System.err(29598):    at com.google.gson.Gson.fromJson(Gson.java:755)
10-23 17:50:25.510: W/System.err(29598):    at com.google.gson.Gson.fromJson(Gson.java:721)
10-23 17:50:25.510: W/System.err(29598):    at com.google.gson.Gson.fromJson(Gson.java:670)
10-23 17:50:25.515: W/System.err(29598):    at com.putitout.buck.helpers.Network.fetchAllVideosAndImages(Network.java:47)
10-23 17:50:25.515: W/System.err(29598):    at com.putitout.buck.VideoPlayback$2.run(VideoPlayback.java:462)
10-23 17:50:25.520: W/System.err(29598):    at java.lang.Thread.run(Thread.java:856)
10-23 17:50:25.520: W/System.err(29598): Caused by: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 33
10-23 17:50:25.525: W/System.err(29598):    at com.google.gson.stream.JsonReader.expect(JsonReader.java:339)
10-23 17:50:25.525: W/System.err(29598):    at com.google.gson.stream.JsonReader.beginObject(JsonReader.java:322)
10-23 17:50:25.530: W/System.err(29598):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:168)
10-23 17:50:25.530: W/System.err(29598):    ... 12 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:03:46.070

实施 `InstanceCreator<Resp>`并`JsonDeserializer<Resp>`到您的响应和集合。

注册类型适配器`GsonBuilder`

```
GsonBuilder builder = new GsonBuilder();
builder.registerTypeAdapter(); 
```

并在反序列化方法中解析您的 json 上下文。

```
 @Override
    public YourClass deserialize(JsonElement json, Type typeOfT,
            JsonDeserializationContext context){

} 
```

# web-services - 拦截Hessian远程调用添加信息

> ID：13030911
> 
> 赞同：1
> 
> 时间：2012-10-23T12:56:25.867
> 
> 标签：web-services, aop, interceptor, hessian

我想这可能是不可能的，但以防万一......

我们有一个前端 Java 应用程序，它通过 Hessian 与（我们的）后端应用程序进行通信。出于日志记录和审计目的，我们需要将登录（在前端）的用户的 user_id 传递给后端。一个明显的解决方案当然是为所有方法调用添加一个 String 参数，但这需要大量工作并且不是很干净。

有没有办法拦截呼叫，用 user_id 装饰它（从会话中检索）并在后端获取该 user_id（然后将其设置在 ThreadLocal 等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T15:38:42.277

这是可能的：

```
public class CustomHessionProxyFactoryBean extends HessianProxyFactoryBean {

public CustomHessionProxyFactoryBean() {
    setProxyFactory(new CustomHessianProxyFactory());
}

private static class CustomHessianProxyFactory extends HessianProxyFactory {

    @Override
    public Object create(Class<?> api, URL url, ClassLoader loader) {
        return Proxy.newProxyInstance(loader, new Class[] { api, HessianRemoteObject.class }, new CustomHessianProxy(url, this, api));
    }

    private static class CustomHessianProxy extends HessianProxy {

        protected CustomHessianProxy(URL url, HessianProxyFactory factory) {
            super(url, factory);
        }

        public CustomHessianProxy(URL url, HessianProxyFactory factory, Class<?> type) {
            super(url, factory, type);
        }

        @Override
        protected void addRequestHeaders(HessianConnection conn) {
            super.addRequestHeaders(conn);

            if(StringUtils.isNotBlank(SsoIdUtil.getThreadSsoId())){
                conn.addHeader("some_key", "some_value_from_threadlocal");
            }
        }
    }
} 
```

}

# php - php反向日期函数

> ID：13030918
> 
> 赞同：0
> 
> 时间：2012-10-23T12:57:05.787
> 
> 标签：php

我想知道是否有人知道在 php.ini 中反转日期函数的方法。例如..如果我想打印日/月/年/时间，我会这样做：

```
date("d jS M, Y", strtotime("2012-01-01 12:12:12")); 
```

如果我在 2012 年 1 月 1 日星期六 12.12pm - 有没有办法扭转这个输出“2012-01-01 12:12:12”。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T12:59:02.510

试试这个

我的意思是这个问题的真正答案是[http://www.php.net/manual/en/datetime.createfromformat.php](http://www.php.net/manual/en/datetime.createfromformat.php)

```
<?php
$date = date_create_from_format('j-M-Y', '15-Oct-2012');
echo date_format($date, 'Y-m-d'); 
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T13:03:17.503

看看 PHP 的[`DateTime`类](http://www.php.net/manual/en/class.datetime.php)。它比旧式`date()`功能灵活得多，而且是朋友。

就您而言，听起来您需要[`DateTime::createFromFormat()`](http://www.php.net/manual/en/datetime.createfromformat.php). 如果您有一个已知格式的输入日期字符串，则此功能非常有用。使用旧样式`strtotime()`函数，您无法指定格式，因此它必须自己解决（并且在某些情况下它猜错了）。

此示例来自手册页：

```
$format = 'Y-m-d H:i:s';
$date = DateTime::createFromFormat($format, '2009-02-15 15:16:17');
echo "Format: $format; " . $date->format('Y-m-d H:i:s') . "\n"; 
```

接受的格式字符串`createFromFormat`与您从旧函数中知道和喜爱的类型相同`date()`，所以如果您想输出它，请弄清楚您的格式是什么，您将获得解决方案。

因此，鉴于您在问题中指定的格式，您可以这样写：

```
$inputDateString = "Sat 1st January, 2012 12.12pm";
$dateObject = DateTime::createFromFormat("D jS M, Y h.ia",$inputDateString);
print $dateObject->format('Y-m-d H:i:s'); 
```

这将输出`2012-01-01 12:12:00`

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T13:00:25.600

`strptime()`做类似的事情，但不完全是（你应该为此编写自己的函数`strptime`）

[http://www.php.net/manual/en/function.strptime.php](http://www.php.net/manual/en/function.strptime.php)

**编辑**：

或者，在 PHP 5.3+ 中：`date_parse_from_format`

[http://www.php.net/manual/en/function.date-parse-from-format.php](http://www.php.net/manual/en/function.date-parse-from-format.php)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-04-04T16:08:08.347

```
{function rev_date($date){
  $array=explode("-",$date);
            $rev=array_reverse($array);
            $date=implode("-",$rev);
            return $date;
}} 
```

# javascript - 使用 jQuery 在 x 个单词后插入 标签

> ID：13030923
> 
> 赞同：4
> 
> 时间：2012-10-23T12:57:19.940
> 
> 标签：javascript, jquery

我正在尝试`<br />`在标题中插入 5 个单词后，但我使用的这段代码不起作用。请看下面：

```
$("#post-id > h2").each(function() {
    var html = $(this).html().split(" ");
    html = html[0] + "<br />" + html.slice(1).join(" ");
    $(this).html(html);
}); 
```

此功能效果很好 - 如果您想在第一个单词之后添加**一个**标签`<br />`。但是，如果我将其更改为then 它将无法正常工作。**`html.slice(5)`**

 **我该如何解决这个问题，以便在 5 个字后正常工作？或者也许一种不同的方法会更合适？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T13:03:14.337

```
$("#post-id > h2").each(function() {
     var html = $(this).html().split(" ");
     html = html.slice(0,5).join(" ") + "<br />" + html.slice(5).join(" ");
     $(this).html(html);
});​ 
```

[http://jsfiddle.net/f4chL/](http://jsfiddle.net/f4chL/)

基本思想是您通过从索引零开始切片获取前 5 个单词，并获取数组的 5 个元素，加入它们，添加中断标记，然后在索引 5 处获取数组中的剩余元素（作为基于零的索引）并用空格加入它们并将其转储到最后

**编辑**

为了获得完整的答案，如果 OP 确实想在每 5 个单词后拆分，这是另一种方法

```
$("h2").each(function() {
var html = $(this).html().split(" ");
var newhtml = [];

for(var i=0; i< html.length; i++) {

    if(i>0 && (i%5) == 0)
        newhtml.push("<br />");

    newhtml.push(html[i]);
}

$(this).html(newhtml.join(" "));
});​ 
```

[http://jsfiddle.net/2Z2nM/](http://jsfiddle.net/2Z2nM/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T13:09:36.117

您可以将代码简化为：

```
.replace(/((\w+\W+){5})/, '$1<br/>') 
```

看到这个[FIDDLE](http://jsfiddle.net/hPRSK/3)。根据您对单词的定义，您可以将 更改`\w+`为适合您的任何内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T13:05:37.923

**将您的代码替换为：**

```
$(".map .tooltip-inner > h2").each(function() {
    var html = $(this).html().text();
    var result = html.replace(/\ /g,'<br/>'); 
    $(this).html(result);
}); 
```**

# ios - 突出显示时 UIButton 标题颜色更改 - 如何将其关闭？

> ID：13030933
> 
> 赞同：44
> 
> 时间：2012-10-23T12:57:51.027
> 
> 标签：ios, uibutton, title, textcolor

我创建了一个按钮。默认情况下，标题的颜色为黑色。但是当我按下它时，颜色变成了一点蓝色，并且再也没有变回来，这是怎么回事？谁能告诉我为什么？我希望按钮的标题一直保持黑色。我怎样才能做到这一点？我试过了

```
[button setTitleColor:[UIColor darkTextColor] forState:UIControlStateHighlighted];
[button setTitleColor:[UIColor darkTextColor] forState:UIControlStateSelected]; 
```

但是没有效果。当我在我的代码中添加它时，按钮的标题似乎总是蓝色的。

代码如下。

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button setFrame:CGRectMake(20, 360, 280, 44)];
[button setTitle:NSLocalizedString(@"Continue", @"Label: TextLabel in Continue button") forState:UIControlStateNormal];
button.titleLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:20.0f];
button.titleLabel.textColor = [UIColor darkTextColor];
button.titleLabel.shadowColor = [UIColor blackColor];
button.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleRightMargin|UIViewAutoresizingFlexibleBottomMargin|UIViewAutoresizingFlexibleWidth;

[self.view addSubview:button];
[button release]; 
```

**谢谢大家。我已经解决了这个问题。我认为根本原因是**

```
button.titleLabel.textColor = [UIColor darkTextColor]; 
```

当我删除它并使用

```
button setTitleColor:(UIColor) forState:(UIControlState); 
```

问题已经解决了！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-23T13:27:17.017

您可以使用

**[UIButton setTitleColor:forState:]**

对于所有州，所有州的标题颜色将保持不变。

```
[button setTitleColor:[UIColor redColor] forState:UIControlStateHighlighted];
[button setTitleColor:[UIColor redColor] forState:UIControlStateNormal];
[button setTitleColor:[UIColor redColor] forState:UIControlStateSelected]; 
```

**注意：为避免输入或粘贴以上代码三次，您可以使用 Will 建议的以下代码，**

```
[button setTitleColor:[UIColor redColor] forState:(UIControlStateHighlighted | UIControlStateNormal | UIControlStateSelected)]; 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-06-04T23:50:30.437

正如@null 指出的那样，到目前为止，最简单的方法是将Interface Builder（或代码）中的按钮类型设置为“自定义”。

如果您需要使用标准按钮复制此行为，请覆盖该`setHighlighted`方法以防止 titleLabel 的 alpha 通道也调整：

```
- (void)setHighlighted:(BOOL)highlighted
{
    [super setHighlighted:highlighted];
    self.titleLabel.alpha = 1.0;
} 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2015-04-01T06:38:45.040

# 0行代码：

使用 Interface Builder 和`.XIB`或，在 IB`.storyboard`中选择您的： *View > Utilities > Show Attributes Inspector*。`UIButton`

 **将State Config* (Default)选择为**Highlighted**、**Selected**或**Disabled**之一，然后更改*Text Color*属性。

![界面生成器解决方案](../Images/ac613da925477f1b722fd21a2c9eb1bb.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-06-28T19:14:00.397

有一些评论指出了这一点，但为了将其作为实际答案：

`Custom`在情节提要或代码 中将按钮类型设置为：`[UIButton buttonWithType:UIButtonTypeCustom];`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-11-19T15:10:42.143

注意，如果按钮不是自定义类型，系统将忽略 setTitleColor(_:for:)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-14T09:58:15.927

对于更可重用的东西，你可以考虑这个，因为它不违反 DRY 原则。将此添加为 UIButton 上的类别。

```
- (void)oka_setTitleColor:(UIColor *)color forStates:(NSArray *)states;
{
  [states enumerateObjectsUsingBlock:^(NSNumber *state, NSUInteger idx, BOOL *stop) {
    [self setTitleColor:color forState:[state integerValue]];
  }];
} 
```

您的案例的示例用法：

```
 [self oka_setTitleColor:[UIColor darkTextColor]
               forStates:@[@(UIControlStateNormal), @(UIControlStateHighlighted), @(UIControlStateSelected)]]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-23T13:06:04.780

我认为mayuur是对的。您是否尝试过另一种颜色而不是“darkTextColor”？[据我所知，](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIColor_Class/Reference/Reference.html) “darkTextColor”是一种系统特定的颜色，用于在浅色背景上书写文本。如果 mayuurs 的建议不起作用，也许可以试试 blackColor。

编辑：尝试将：添加`[sender setHighlighted:NO];`到您的 IBAction 中，该按钮在按下按钮时调用。它解决了吗？我建议这样做是因为`[button release];`我猜您仍在运行旧版本的 iOs SDK，并且除此之外，您无法以优雅的方式禁用按钮的突出显示。

Edit2：您正在以编程方式创建按钮，但我没有看到您将其与 IBAction 连接。在你的下面添加这个`[[UIButton alloc] init];`

```
[button addTarget:self action:@selector(myIBAction) forControlEvents:UIControlEventTouchUpInside]; 
```

然后像这样创建一个 IBAction 方法：

```
- (IBAction)myIBAction:(UIButton *)sender; /* In Header File */

- (IBAction)myIBAction:(UIButton *)sender{ /* In Implementation File */
        [sender setHighlighted:NO];
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-17T11:06:30.993

您应该使用`UIButtonTypeCustom`而不是初始化按钮`UIButtonTypeRoundedRect`*

# flash - AS2：获取 TextField 真实高度

> ID：13030938
> 
> 赞同：0
> 
> 时间：2012-10-23T12:58:12.267
> 
> 标签：flash, actionscript-2, textfield

我在运行时创建了一堆 TextField，其中包含`htmlText`的问题是获取高度`TextField`是非常不准确的。

如果我访问`TextField._height`或`TextField.height`属性，它甚至不接近准确，并且可以在 0 - 1.5 行高之间变化。

我试图将 TextField 放入一个空`MovieClip`并获取 MovieClip 的高度，但是这会返回相同的不准确性。（如示例所示）

**相关代码：**

```
var format = new TextFormat();
format.size = 14;
format.align = "left";
format.font = "Arial";
format.color = 0x000000;
format.leading = 3;

var textBoxes:Array = new Array();

function createText(htmlString:String, isOption:Boolean, name:String) {
    var textY:Number;
    if(isOption) {
        var textMC:MovieClip = target.attachMovie("option", "txt_" + textBoxes.length, target.getNextHighestDepth());
        textMC.name.text = name;
    } else {
        var textMC:MovieClip = target.createEmptyMovieClip("txt_" + textBoxes.length, target.getNextHighestDepth());
    }
    var fieldContainer:MovieClip = textMC.createEmptyMovieClip("container", textMC.getNextHighestDepth());
    var textBox:TextField = fieldContainer.createTextField("textBox", fieldContainer.getNextHighestDepth(), studySettings.margin, studySettings.margin, target._width - (studySettings.margin * 2),0);
    textBox.autoSize = true;
    textBox.wordWrap = true;
    textBox.html = true;
    textBox.multiline = true;
    textBox.htmlText = htmlString;
    textBox.setTextFormat(format);
    textBox.embedFonts = true;
    textBox.selectable = false;
    textBox.antiAliasType = "advanced";
    if(isOption) {
        textMC.option = currentOption;
        textMC.enabled = false;
        textBox._y += textMC.background._y;
        textBox._width = textMC._width - (studySettings.margin * 3);
        textMC.background._width = target._width - (studySettings.margin * 2);
        textMC.background._height = fieldContainer._height + (studySettings.margin * 2);
        textMC._x = studySettings.margin;
        textMC.onRollOver = function() {
            this.background.gotoAndStop("over");
        }
        textMC.onRollOut = function() {
            this.background.gotoAndStop("up");
        }
        textMC.onRelease = function() {
            showStudy(study.caseIndex, study.choiceIndex, false, this.option);
            clearStudy(study, false);
        }
    }
    if(textBoxes.length) {
        var prebounds:Object = textBoxes[textBoxes.length - 1].getBounds(target);
        textMC._y = (isOption) ? prebounds.yMax + studySettings.margin : prebounds.yMax;
    } else {
        textMC._y = 0;
    }
    textBoxes.push(textMC); 
```

我怎样才能可靠地获得`TextField`高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:59:47.830

TextField.textWidth/TextField.textHeight 应该返回字段*内容*的实际尺寸。

我发现如果您将这些测量值用于布局，它们并不完美，如果您将 TextField 缩放到文本内容，通常最好在每个维度上添加 10-20，或者您会截断奇数字符 - 但是这些将返回一个实际值，宽度/高度不会反映尺寸。

希望这可以帮助。

# bash - bash：使用自定义行分隔符逐行读取标准输入

> ID：13030940
> 
> 赞同：0
> 
> 时间：2012-10-23T12:58:19.537
> 
> 标签：bash, readfile

我有一个从标准输入读取行的 bash 脚本。

```
while read var
do
    echo $var
done 
```

现在，我必须修改它，以便我可以接受带有行分隔符“EndOfMessage”（几个符号的分隔符）的输入。

我怎么能那样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:22:25.167

如果我理解正确，输入将类似于“line1EndOfMessageline2EndOfMessageline3”？如果是这样，您可以这样做：

```
sed $'s/EndOfMessage/\\\n/g' | while read var; do
    echo $var
done 
```

# svn - gitk 或 hgk 的颠覆模拟

> ID：13030946
> 
> 赞同：2
> 
> 时间：2012-10-23T12:58:38.960
> 
> 标签：svn, gitk

我知道，我可以使用 gitk 来查看基于 git 的存储库的提交历史记录，我现在也可以在使用 Mercurial 的同时将 hgk 用于相同的目的。
Subversion 我需要这样的东西。我使用的是 Ubuntu，所以它必须在基于 Linux 的操作系统上工作。我知道，有[RabbitVCS](http://rabbitvcs.org/)，它允许我做我需要的事情，但我想要一个非常非常简单的 gui 客户端，它允许查看提交和合并的历史 - 仅此而已。
谁能给我看这样的工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T01:57:15.677

你用侏儒吗？Nautilus 中有一个 Subversion 插件（哎呀！正在寻找 Nautilus Subversion 插件的链接，我发现它现在称为[RabbitVCS](http://rabbitvcs.org)。）

还有一个[KDE 插件](http://kdesvn.alwins-world.de)也可以与 KDE 浏览器一起使用。（虽然我现在被告知 RabbitVCS 也可以与 KDE 以及 Mac OS X 的 Finder 插件一起使用。）

如果您只想要一个基于 Web 的 Subversion 浏览器，那么您的用户甚至不必安装 Subversion，我强烈推荐[Sventon](http://sventon.org)。它在基础 Tomcat 服务器中工作。允许您查看历史记录、做差异和查看文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:40:32.273

我认为rapidsvn 可能是你最好的选择。

# ms-access - 更新 Lazarus 中的 MS Access 数据库记录

> ID：13030954
> 
> 赞同：2
> 
> 时间：2012-10-23T12:59:13.273
> 
> 标签：ms-access, freepascal, lazarus

我正在使用带有 MS Access 数据库的 Lazarus。更新记录不起作用。代码：

```
 Form1.SQLQuery1.Edit;
  Form1.SQLQuery1.FieldByName('field1').AsString := Edit1.Text;
  Form1.SQLQuery1.FieldByName('field2').AsString := Edit2.Text;
  Form1.SQLQuery1.FieldByName('field3').AsString := Edit3.Text;
  Form1.SQLQuery1.FieldByName('field4').AsString := Edit4.Text;
  Form1.SQLQuery1.Post;
  Form1.SQLQuery1.ApplyUpdates; 
```

甚至添加

```
SQLTransaction1.Commit 
```

不起作用，更改不会保存到数据库中，特别是如果记录是最后一条记录。这应该如何在拉撒路完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:40:20.407

尝试添加更新记录。像这样的东西：

```
Form1.SQLQueryMdb.Edit;
Form1.SQLQueryMdb.UpdateRecord;
Form1.SQLQueryMdb.FieldByName('State Name').AsString:= Edit1.Text;
Form1.SQLQueryMdb.Post;
Form1.SQLQueryMdb.ApplyUpdates;
DBGrid1.Refresh; 
```

# ios - cocos2d的无限循环

> ID：13030957
> 
> 赞同：0
> 
> 时间：2012-10-23T12:59:22.577
> 
> 标签：ios, loops, cocos2d-iphone, a-star

我正在使用 sqlboy 的[A 星路径查找代码](https://github.com/sqlboy/tiled-games/tree/master/src)让我的敌人精灵跟随我的主角。. 敌人精灵应该无限地跟随主要精灵，但我不确定我该怎么做..

我为此使用以下代码..

```
curPoint = [self tileCoordForPosition:ccp(enemy.sprite.position.x, enemy.sprite.position.y)];
nextPoint = [self tileCoordForPosition:ccp(killer.sprite.position.x, killer.sprite.position.y)];

[pathFinder moveSprite:enemy.sprite from: curPoint to:nextPoint atSpeed:0.3f]; 
```

如果我在我的 init 方法中使用此代码，那么它只会被调用一次，如果我的杀手精灵移动，敌人将不会跟随它..

如果我在我的`update:(ccTime)dt`方法中使用这个代码，那么它永远不会因为某种原因移动。我在哪里可以使用这个代码让我的敌人精灵无限移动？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:00:11.660

要使用`update:`方法，请使用

```
[self scheduleUpdate]; 
```

例如，在您的 onEnter 方法中。只是不要忘记稍后取消计划更新

```
[self unscheduleUpdate]; 
```

我的意思是

```
@interface MyNode : CCNode
{
}
@end

@implementation MyNode

- (void) onEnter
{
    [super onEnter];

    [self scheduleUpdate];
}

- (void) onExit
{
    [super onExit];

    [self unscheduleUpdate];
}

- (void) update:(ccTime) dt
{
    // this method will be called every tick
    // if you need to update something, make it here
}

@end 
```

# c# - 动态linq中的乘法连接

> ID：13030960
> 
> 赞同：0
> 
> 时间：2012-10-23T12:59:35.830
> 
> 标签：c#, linq, entity-framework

我试图加入那些表我必须使用动态 linq，如果**.Join(dbcontext.Providers)有并且当我在****.Join(dbcontext.Providers)**上没有数据时返回数据 所有**queryResolts** returnig 0结果

即使其中一个连接返回 0 结果，我如何获取数据

```
var queryResolts = dbcontext.Tracks
            // Add Services
            .Join(dbcontext.Services,
                track => track.ServiceId,
                service => service.ServiceId,
                (track, service) => new { Track = track, Service = service })
            // Add ServiceInterfaces
            .Join(dbcontext.ServiceInterfaces,
                ts => ts.Track.ServiceInterfaceId,
                serviceInterface => serviceInterface.ServiceInterfaceId,
                (ts, serviceInterface) => new { Track = ts.Track, Service = ts.Service, ServiceInterfaces = serviceInterface })
            // Add Providers
            .Join(dbcontext.Providers,
                tss => tss.Track.ProviderId,
                provider => provider.ProviderId,
                (tss, provider) => new { Track = tss.Track, Service = tss.Service, ServiceInterfaces = tss.ServiceInterfaces, Providers = provider })
            .Where("ServiceInterfaces.ServiceInterfaceName == @0", "PublishPolicyInterface2")
            .Select(y => y.Track) 

            ; 
```

谢谢

三木

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:02:25.477

`Join`这里的工作方式与`join`in类似`SQL`，如果连接的表不包含结果，它将不会返回任何值。

如果您需要，请`left or right outer join`使用`GroupJoin()`.

# java - C++ 中的 Java ToString 方法

> ID：13030967
> 
> 赞同：0
> 
> 时间：2012-10-23T12:59:57.057
> 
> 标签：java, c++, tostring, type-conversion

我想知道如何在 C++ 中使用 java toString 方法来将数据类型转换为字符串。例如，通过什么方式可以在 C++ 中使用以下代码。

```
public byte[] myMsg = new byte[Length];
public int intValue;
public double doubleValue;
String out1 = new String();
String out2 = new String();
String out3 = new String();

out1 += ("X; " + Long.toString((intValue& 0x1fffffff) + 0x100000000L, 16).substring(1).toUpperCase() + ";");

out2 += (" " + (Integer.toString((this.myMsg[i] & 0xff) + 0x100, 16).substring(1)).toUpperCase());

out3 += ("; " + Double.toString(doubleValue)); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T13:01:54.213

是的，C++11 在[`std::to_string`](http://en.cppreference.com/w/cpp/string/basic_string/to_string).

在此之前，您最安全的选择是使用 a `std::stringstream`，用 填充它，然后用`operator <<`检索。`string``.str()`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T13:03:19.207

C++11**[`to_string`](http://en.cppreference.com/w/cpp/string/basic_string/to_string)**在标准库中添加了函数；去看一下

此外，Boost 库具有**[`lexical_cast`](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_lexical_cast.html)**.

`std::ostringstream`或者您可以在内部使用例如(from `<sstream>`) 或 C 库的工具编写自己的代码。后者通常更有效（在实践中）。

对于您显示的一般连接 + 格式化表达式，您应该考虑一个可以在线性时间内执行此操作的一般格式化程序。

一个简单的（不是特别有效或功能丰富的）这样的格式化程序在[另一个问题的答案](https://stackoverflow.com/questions/13021985/what-is-the-equivalent-of-cpython-string-concatenation-in-c)中完整显示。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-23T13:31:34.170

模板

代码：

```
template <typename T>
std::string toString(const T &val_p)
{
    std::stringstream x;
    x << val_p;
    return x.str();  
} 
```

如果定义了适当的 ostream 插入运算符，此函数会将任何类型的对象转换为字符串。要转换自定义对象，您只需编写一个函数：

代码：

```
std::ostream &operator<<(std::ostream &stream_p, const my_class &val_p)
{
    // ...
    return stream_p;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T15:00:05.770

是的，C++11 已经成为`to_string`它语言的一部分（作为一个自由函数）。

但是它不能代替 using `ostringstream`，如果您正在构建一个包含大量对象的字符串，最好继续使用`ostringstream`而不是将每个项目转换为字符串并将它们连接起来。

原因是当你使用时`ostringstream`，它会创建一个缓冲区来写入输出。当您调用`to_string`then concatenate 时，它​​很可能会使用自己的缓冲区`to_string`创建自己的对象。`ostringstream`

如果用户要使用 operator+ 来连接字符串，这将是非常低效的。如果他们创建了一个大的 ostringstream 开始，您不妨直接流式传输对象，而不是先在它们上调用 to_string。

我实际上预见到这主要用于日志记录和异常抛出。在后一种情况下，效率可能并不重要。

（我看到使用 boost 的日期时间库和流式传输的代码通常会遭受“为我打印/解析的每个日期创建一个新的方面和语言环境”效率低下的问题。我已经在我工作过的 2 家公司中修复了这种低效率问题）。

# python - 我如何在 Django 中不同模型的任意两个字段之间建立 OneToOne 关系？

> ID：13030972
> 
> 赞同：1
> 
> 时间：2012-10-23T13:00:11.220
> 
> 标签：python, django

```
class HmsMedicine(models.Model):
    id = models.IntegerField(primary_key=True)
    medicine_name = models.CharField(max_length=100)
    price = models.IntegerField(max_length=6)

class HmsBilling(models.Model):
    id = models.IntegerField(primary_key=True)
    regid = models.ForeignKey(HmsPatient, db_column='regid')
    medicine = models.ForeignKey(HmsMedicine, db_column='medicine')
    quantity = models.IntegerField()
    rate = models.IntegerField() 
```

我想在`price`字段中有`rate`字段的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:03:48.237

```
class HmsBilling(models.Model):
    id = models.IntegerField(primary_key=True)
    regid = models.ForeignKey(HmsPatient, db_column='regid')
    medicine = models.ForeignKey(HmsMedicine, db_column='medicine')
    quantity = models.IntegerField()
    rate = models.ForeignKey(HmsMedicine, db_column='price')

hms = HmsBilling.objects.select_related().get(id=5)
hms.rate 
```

这将为您提供 id = 5 的计费价格（请参阅[此链接](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related)以获取有关选择相关的参考）

更好的：

```
class HmsBilling(models.Model):
    id = models.IntegerField(primary_key=True)
    medicine = models.ForeignKey(HmsMedicine)
    quantity = models.IntegerField()

hms = HmsBilling.objects.select_related().get(id=5)
hms.medicine.price 
```

# android - 如何从 Android Visualizer 类中获取非零声音数据

> ID：13030973
> 
> 赞同：2
> 
> 时间：2012-10-23T13:00:12.877
> 
> 标签：android, audio, visualizer

我有以下代码：

```
mVisualizer = new Visualizer(0);
mVisualizer.setEnabled(false);
int capRate = Visualizer.getMaxCaptureRate();
int capSize = Visualizer.getCaptureSizeRange()[1];
mVisualizer.setCaptureSize(capSize);
Visualizer.OnDataCaptureListener captureListener = new Visualizer.OnDataCaptureListener() {
  public void onWaveFormDataCapture(Visualizer visualizer, byte[] bytes,
  int samplingRate) {   
    for (int i=0;i<bytes.length;i++) {
        if (bytes[i]!=-128) {
            Log.w("Morphyre", "Found Nonzero sample "+bytes[i]);
            break;
        }
    }                   
  }

  public void onFftDataCapture(Visualizer visualizer, byte[] bytes,
    int samplingRate) {
  }       
};

int status = mVisualizer.setDataCaptureListener(captureListener,
    capRate, true/*wave*/, false/*no fft needed*/);
mVisualizer.setEnabled(true); 
```

该应用程序具有 2 个必需的权限（ MODIFY_AUDIO_SETTINGS 和 RECORD_AUDIO ）

根据 API 文档，创建 Visualizer(0) 将使用“音频输出混合” - 但是我的代码似乎初始化得很好（状态 == 0），并且调用了回调，但我从来没有得到除 128 以外的数据（在波形回调的情况下）或 0（在 FFT 的情况下）每当我使用默认媒体播放器（在 HTC Sensation XE 上）播放时

我在这里做了什么愚蠢的事情 - 还是我的手机没有正确实现音频输出混音？如果我使用另一个音频播放器，那很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:42:41.340

HTC 的媒体播放器可能会应用自己的效果，在这种情况下，他们可能会专门将其应用到播放器的音频会话中。如果在另一个会话上应用了任何效果，AudioFlinger 将暂停 OUTPUT_MIX 会话上的所有效果。至少这就是它在 Jellybean 和 ICS 上的表现——这两种都可能适用于 Gingerbread。

# java - Spring：如何在 Spring 配置中注入 ENUM？

> ID：13030974
> 
> 赞同：6
> 
> 时间：2012-10-23T13:00:16.360
> 
> 标签：java, spring, enums

我有`ENUM`一个

```
package com.myorg.sparrow.s3Environment;

import javax.annotation.Nonnull;

public enum DocumentType {
    Document("document/", ".xml.gz", "binary/octet-stream", "gzip", true);

    private final String path;
    private final String suffix;
    private final String contentType;
    private final String contentEncoding;
    private final Boolean compress;

    private DocumentType(@Nonnull final String path, @Nonnull final String suffix,
                         @Nonnull final String contentType, @Nonnull final String contentEncoding,
                         @Nonnull final Boolean compress) {
        this.path = path;
        this.suffix = suffix;
        this.contentType = contentType;
        this.contentEncoding = contentEncoding;
        this.compress = compress;
    }

    @Nonnull
    public String getPath() {
        return path;
    }

    @Nonnull
    public String getSuffix() {
        return suffix;
    }

    @Nonnull
    public String getContentType() {
        return contentType;
    }

    @Nonnull
    public String getContentEncoding() {
        return contentEncoding;
    }

    @Nonnull
    public Boolean isCompress() {
        return compress;
    }
} 
```

我想`DocumentType.Document`在`Spring`配置文件中注入这个值

```
 <bean id="s3Service" class="com.myorg.sparrow.business.xml.persist.S3Service">
        <constructor-arg ref="awsCredentials" />
        <constructor-arg value="**DocumentType.DOCUMENT**" /> // how do I inject it here?
        <constructor-arg value="${com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator-destBucketName}" />
    </bean> 
```

我如何注入这个值

```
<constructor-arg value="**DocumentType.DOCUMENT**" /> // how do I inject it here? 
```

我对 Spring 框架很陌生，不知道如何实现这一点

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-23T13:04:08.783

```
 <bean id="s3Service" class="com.myorg.sparrow.business.xml.persist.S3Service">
        <constructor-arg ref="awsCredentials" />
        <constructor-arg value="Document" /> // We love Spring because it is simpler than we expect
        <constructor-arg value="${com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator-destBucketName}" />
    </bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:10:52.057

好像你需要使用“org.springframework.beans.factory.config.FieldRetrievingFactoryBean”

例子：

```
<property name="b">
  <bean class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean">
    <property name="targetClass" value="whole.package.path.A$B"></property>
    <property name="targetField" value="FIRST"></property>
  </bean>
</property> 
```

参考：

[http://forum.springsource.org/showthread.php?19396-Accessing-enum-value-defined-in-inner-class](http://forum.springsource.org/showthread.php?19396-Accessing-enum-value-defined-in-inner-class)

[http://forum.springsource.org/showthread.php?19696-Spring-1-2-3-How-do-I-inject-Java-1-5-Enums](http://forum.springsource.org/showthread.php?19696-Spring-1-2-3-How-do-I-inject-Java-1-5-Enums)

# css - IE6 绝对定位的子元素在相对定位的父元素中，带有填充

> ID：13030975
> 
> 赞同：0
> 
> 时间：2012-10-23T13:00:20.333
> 
> 标签：css, internet-explorer-6, positioning, padding

我已经为此搜索了高低，但找不到此错误的参考或如何解决它。

在 IE6 中，如果您在相对定位的父级中有一个绝对定位的子元素，并且父级上有填充。当你设置 left:0; 和顶部：0；在绝对位置上。宽度为 100% 的子级 子级不会扩展以填充其父级的宽度，它的行为就像它的宽度减去父级填充一样。是否在父项上定义宽度都没有关系。

示例代码：-

```
<div class="outer">
  <div class="inner">
  </div>
</div>

.outer {
  background:blue; 
  position:relative; 
  padding:0 40px; 
  height:200px; 
}

.inner {
  background:red; 
  position:absolute; 
  top:40px; 
  left:0px; 
  height:50px;
  width: 100%;
} 
```

# driver - opencl 重采样中 GTX480 GPU 的 nvidia 驱动程序差异 275.50 和 280.19

> ID：13030976
> 
> 赞同：11
> 
> 时间：2012-10-23T13:00:24.823
> 
> 标签：driver, opencl, gpu, resampling

使用驱动程序版本 275.50 和 280.19 为 Nvidia GTX480 GPU 重新采样图像在灰度值上几乎没有变化。也许这是一个插值问题。除了实施 OpenCL 1.1 版之外，我无法确定新版本中发生了什么变化。仅使用 OpenCL 1.0 会在灰度值上产生相同的微小变化。

下面是在驱动程序版本 275.50 和 280.19 之间给出不同结果的代码：

```
success oclInitImgData(struct _Image2d *image)
{
cl_image_format volume_format;
volume_format.image_channel_order       = CL_R;
volume_format.image_channel_data_type   = CL_UNORM_INT16;

size = len[0] * sizeof(unsigned short);
img_h = clCreateImage2D(Ocl._GPUContext, CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR,
    &volume_format, len[0], len[1], size, data, &error);

resampledImg_h = clCreateBuffer(Ocl._GPUContext, CL_MEM_READ_WRITE, size, NULL, &error);
oclResampleImg(Ocl._GPUCommandQueue[posSet], Ocl._pGPUKernels[posSet][K_IMG_RESAMPLE], img_h, resampledImg_h , Size, PixelSize, mm_per_p, vm_h);
}

__kernel void resampleImage( __read_only image2d_t IN image, __global uint OUT *resampledImage)
    {
//get resampled position
int2 posResampledImg = (int2)(get_global_id(0), get_global_id(1));

//get dimension of the image
int2 imageSize = get_image_dim(image);

//calulate image size in mm
float2 imageSizemm = convert_float2(imageSize)*imagePixelSize;
float2 posImg = (posResampledImgmm + (imageSizemm*0.5f));
float2 posImgnorm = posImg/imageSizemm;
int2 posImgpix = convert_int2(posImg/imagePixelSize);

uint sample = 0;
if(read_imageui(image, CLK_NORMALIZED_COORDS_FALSE | CLK_ADDRESS_CLAMP | CLK_FILTER_NEAREST, posImgpix).x == 1)
{
    //get grey value and store it in the resampled image
    sample = read_imagef(image, CLK_NORMALIZED_COORDS_TRUE | CLK_ADDRESS_CLAMP | CLK_FILTER_LINEAR, posImgnorm).x * 65535.0f;
}
resampledImg[posResampledImg.y*convert_int(imageSizeResampled.x)+posResampledImg.x] = sample;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:14:33.290

要获得有用的结果，您应该：

(1) 了解 OpenCL 规范是否涵盖了行为差异。

（2）如果是，创建一个测试用例来演示它

(3) 向 Nvidia 提交错误报告

(4) ？？？

(5) 利润

除了步骤 1-5，我看不到这里的人们如何为您提供帮助。

# maven - 在特定阶段运行 maven 插件

> ID：13030984
> 
> 赞同：0
> 
> 时间：2012-10-23T13:01:03.120
> 
> 标签：maven, maven-3, maven-plugin

是否可以在特定阶段运行 maven-install-plugin。

我想运行安装插件，以便 ojdbc14.jar 在尝试检查依赖项之前在我的存储库中可用。

我在下面的尝试是尝试设置流程资源阶段，但这不起作用

```
<dependencies>
    <dependency>
        <groupId>com.oracle</groupId>
        <artifactId>ojdbc14</artifactId>
        <version>10.2.0.1.0</version>            
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-install-plugin</artifactId>
            <version>2.3.1</version>
            <executions>
                <execution>
                    <phase>process-resources</phase>
                    <goals>
                        <goal>install-file</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <file>${basedir}/resources/ojdbc14.jar</file>
                <groupId>com.oracle</groupId>
                <artifactId>ojdbc14</artifactId>
                <version>10.2.0.1.0</version>
                <packaging>jar</packaging>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:28:44.923

将工件手动安装到存储库管理器中的最佳解决方案，然后将工件用作通常的依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:10:52.520

这只有在 jar 被检入到您的源存储库时才有效。我建议不要这样做，因为它会导致膨胀（尤其是分布式 SCM）。如果您坚持，请遵循此答案[https://stackoverflow.com/a/7623805/116509](https://stackoverflow.com/a/7623805/116509)

我建议安装存储库管理器，例如 Nexus，并在那里安装任何所需的库。

# xquery - MarkLogic cts：搜索节点层次结构

> ID：13030991
> 
> 赞同：3
> 
> 时间：2012-10-23T13:01:23.577
> 
> 标签：xquery, marklogic

我正在尝试解决一个问题，即我在 MarkLogic 中有一组文档，并且我想在层次结构中的特定点搜索特定节点。我想使用类似 cts:element-value-query 的东西，但它似乎没有指定层次结构级别或类似级别的选项。

我想这样做的原因是层次结构中的其他地方有相同的命名空间/命名节点，出于此特定查询的目的，我想忽略这些节点。

一个例子是这样的：

```
<rootNode xmlns="myNamespace">
    <someBooleanValue>true</someBooleanValue>
    <someSubNode> 
        <someBooleanValue>false</someBooleanValue>
    </someSubNode>
</rootNode> 
```

我想要的地方，例如 rootNodes，其中 someBooleanValue 是 true 作为根的直接子级。我知道如何专门查询 someSubNode 的 someBooleanValue 子节点，但我正试图弄清楚如何专门针对 rootNode 的子节点进行查询。

出于这个问题的目的，请假设更改 XML 结构/命名空间并不容易。这专门针对 MarkLogic 5.x。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:20:13.840

您可以将查询包装在 cts:element-query 中，但这就像祖先或自我检查，不一定是仅父检查。如果你使用这样的通用名称，那可能是不够的。

毕竟，更好的选择是考虑升级到 ML 6，其中引入了路径索引，您可以在其中指定元素的特定路径。可能只是值得。。

！

# codeigniter - 使用codeigniter验证表单后如何更改按钮的值

> ID：13030993
> 
> 赞同：0
> 
> 时间：2012-10-23T13:01:24.047
> 
> 标签：codeigniter

我正在使用 codeigniter 构建一个 CRUD 系统。

用户选择一个项目，并从数据库中查询其详细信息，并填充表单字段。

然后，用户可以决定是否要更新该项目，或者复制它并创建一个新项目。

我希望复制这样发生：单击*复制*按钮后，项目代码的值将被清除（因为项目代码是唯一的，并且是用户生成的），并且*复制*按钮的值将更改为*创建一个新项目*。然后，用户应键入新项目代码，然后单击“*创建新项目”*按钮。

上面的内容很容易用 Javascript 实现。

然后提交表单，并使用 CI 的 form_validation 库进行验证。

如果验证失败，我将重新加载表单，显示错误消息。

同样，这部分使用 CI 的 form_validation 很容易实现。

**我的问题出在这里：** 重新加载带有错误消息的失败表单后，我希望*Duplicate*按钮的值保持*Create a New Item*，而不是重置为初始*Duplicate*值。

将错误消息返回到表单后如何设置按钮的**值？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:09:38.283

一种方法是发送一些变量，作为标志来确定验证是成功还是失败。

例如：

// 从控制器

```
if ($this->form_validation->run() == FALSE)
        {
                        $data['form_validated'] = FALSE;
                $this->load->view('myform',$data);
        }
        else
        {
                        $data['form_validated'] = TRUE;
                $this->load->view('myform',$data);
        } 
```

// 在视图中

```
if($form_validated) {
 //code if form is validated
}
else {
//code if form is not validated
} 
```

最初设置 $form_validated = TRUE，当页面第一次加载时。

希望这可以帮助。

您甚至可以使用 session 来存储有关表单是否经过验证的数据

# blackberry - BlackBerry - 带单选按钮的 TreeField

> ID：13030994
> 
> 赞同：1
> 
> 时间：2012-10-23T13:01:25.103
> 
> 标签：blackberry, treeview, radio-button, treefield

是否可以在 Blackberry 的 TreeField 中添加单选按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:34:19.770

您不能在 BlackBerry 中向 TreeField 添加按钮。相反，您可以编写几行代码来创建一个可折叠的管理器，当您单击按钮时，它将删除字段：

[http://supportforums.blackberry.com/t5/Java-Development/How-to-add-radiobuttongroup-to-treefield/mp/1278907/highlight/true#M171881](http://supportforums.blackberry.com/t5/Java-Development/How-to-add-radiobuttongroup-to-treefield/m-p/1278907/highlight/true#M171881)

# jsf - rich:popupPanel 总是显示滚动条

> ID：13030998
> 
> 赞同：1
> 
> 时间：2012-10-23T13:01:39.327
> 
> 标签：jsf, richfaces, modal-popup

我的 JSF 表单包含一个弹出面板。代码在这里：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:f="http://java.sun.com/jsf/core">

<h:head>
    <title>Partner Manager</title>
    <link href="stylesheet/reset.css" rel="stylesheet" type="text/css" />
    <link href="stylesheet/style.css" rel="stylesheet" type="text/css" />
    <link rel="icon" type="image/png" href="images/icons/favicon.png" />
    <script src="script/script.js" />
</h:head>
<h:body>
    <h:outputText id="progress_bar" styleClass="progress-bar" />
    <div id="header">
        <div class="header-content">
            <img src="images/logo2.png" />
            <div class="header-message">
                <p class="links">
                    <a href="#">Sign Out</a>
                </p>
                <p class="welcome">
                    Welcome <label>John Smith</label> <span>Associate Manger</span>
                </p>
            </div>
        </div>
    </div>
    <div id="container">
        <h:form>
            <fieldset class="search-area">

                <rich:calendar value="#{partnerBean.selectedStartDate}"
                    datePattern="yyyy-MM-dd" />

                <rich:calendar value="#{partnerBean.selectedEndDate}"
                    datePattern="yyyy-MM-dd" />

                <h:selectOneMenu label="Categories" id="categories"
                    style="width:200px" styleClass="dilevery"
                    value="#{partnerBean.selectedDeliveryMethod}">
                    <f:selectItem itemLabel="Select Type" itemValue="Select Type" />
                        <f:selectItem itemLabel="Select Type" itemValue="Select Type" />
                    <f:selectItem itemLabel="Select Type" itemValue="Select Type" />
                    <f:selectItem itemLabel="Select Type" itemValue="Select Type" />
                </h:selectOneMenu>

                <a4j:commandButton id="searchButton" value="Search"
                    onbegin="showProgressBar();" oncomplete="hideProgressBar();"
                    render="@form,tableDv,transactionTable"
                    action="#{partnerBean.searchPartnersTransactions}"
                    styleClass="search-btn" />

                <a4j:commandLink href="#" styleClass="add-teller"
                    title="Add Partner">Add Partner
                    <rich:componentControl target="popup" operation="show" />
                </a4j:commandLink>
            </fieldset>

            <div class="tableDv">
                <rich:dataTable id="transactionTable"
                    value="#{partnerBean.partnerTransactions}" var="transaction">

                    <rich:column>
                        <f:facet name="header">
                            <h:outputText value="Date of Transaction" />
                        </f:facet>
                        <h:outputText value="#{transaction.dateOfTransaction}" />
                    </rich:column>

                    <rich:column>
                        <f:facet name="header">
                            <h:outputText value="Transaction ID" />
                        </f:facet>
                        <h:outputText value="#{transaction.transactionID}" />
                    </rich:column>

                    <rich:column>
                        <f:facet name="header">
                            <h:outputText value="Recipient name" />
                        </f:facet>
                        <h:outputText value="#{transaction.recipientName}" />
                    </rich:column>

                    <rich:column>
                        <f:facet name="header">
                            <h:outputText value="Amount Sent" />
                        </f:facet>
                        <h:outputText value="#{transaction.amountSent}" />
                    </rich:column>
                    <rich:column>
                        <f:facet name="header">
                            <h:outputText value="Recipient's Phone No" />
                        </f:facet>
                        <h:outputText value="#{transaction.recipientPhoneNumber}" />
                    </rich:column>
                    <rich:column>
                        <f:facet name="header">
                            <h:outputText value="Sender's name" />
                        </f:facet>
                        <h:outputText value="#{transaction.senderName}" />
                    </rich:column>

                    <rich:column>
                        <f:facet name="header">
                            <h:outputText value="Type of Delivery Method" />
                        </f:facet>
                        <h:outputText value="#{transaction.typeOfDelivery}" />
                    </rich:column>

                    <rich:column>
                        <f:facet name="header">
                            <h:outputText value="Partner Fee" />
                        </f:facet>
                        <h:outputText value="#{transaction.partnerFee}" />
                    </rich:column>

                    <rich:column>
                        <f:facet name="header">
                            <h:outputText value="Status of Transfer" />
                        </f:facet>
                        <h:outputText value="#{transaction.statusOfTransfer}" />
                    </rich:column>
                </rich:dataTable>
            </div>

            <h:panelGroup layout="block" id="container" style="overflow:scroll">
                <rich:popupPanel id="popup" modal="true" autosized="true"
                    resizeable="false" domElementAttachment="form"
                    followByScroll="true">
                    <f:facet name="header">
                        <h:outputText value="Process Teller Transaction" />
                    </f:facet>
                    <f:facet name="controls">
                        <h:outputLink value="#"
                            onclick="#{rich:component('popup')}.hide(); return false;">
                        x
                     </h:outputLink>
                    </f:facet>
                    <div id="container">
                        <fieldset class="add-form">
                            <legend>Add Account</legend>

                            <p class="choose-type">
                                <label>Account Type :</label> <select class="account-type"><option>Partner</option></select>
                            </p>
                            <p>
                                <label>Partner Name :</label><input type="text"
                                    value="Enter Partner Name" class="partner-name" />
                            </p>
                            <p>
                                <label>Email Address :</label><input type="text"
                                    value="Enter Email Address" class="email-fld" />
                            </p>
                            <p>
                                <label>Address :</label><input type="text"
                                    value="Enter Postal Address" class="address-fld" />
                            </p>
                            <p>
                                <label>City :</label><select class="city-fld"><option>Select
                                        City</option></select>
                            </p>
                            <p>
                                <label>Partner Limit :</label><select class="limit-fld"><option>Select
                                        Limit</option></select>
                            </p>
                            <p>
                                <input type="submit" value="Create Account" class="search-btn" />
                            </p>

                        </fieldset>
                    </div>
                </rich:popupPanel>
            </h:panelGroup>
        </h:form>
    </div>

    <div id="footer">
        <div class="footer-content">
            <div class="footer-liks">
                <a href="#">Home</a> | <a href="#">Company Profile</a> | <a href="#">Partner's</a>
                | <a href="#">Survey</a> | <a href="#">Jobs</a> | <a href="#">Press</a>
                | <a href="#">Contact Us</a> <span>Copyright © 2012
                    CoinFling.com. All rights reserved. <a href="#">Privacy Policy</a>
                    - <a href="#">Terms of Service</a>
                </span>
            </div>
        </div>
    </div>
</h:body>
</html> 
```

弹出窗口显示。但是，如果内容太大，则不会出现滚动条。如何让滚动条在需要时始终出现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T13:28:47.433

您是否尝试在 div 上设置样式？

```
<h:panelGroup layout="block" id="container" style="overflow:scroll"> ... </h:panelGroup> 
```

如果可行，那么最好的方法是定义一个类。

也许您还必须明确定义弹出窗口的大小以使其正常工作。

更新：

最终的解决方案是在没有任何额外样式信息的情况下使用`<h:panelGroup>..</h:panelGroup>`内部的块。`<rich:popupPanel>`已经使用其内容周围`<rich:popupPanel>`的样式呈现了一个 div，`overflow:auto`但如果其中只有纯 html 代码，则弹出窗口的大小计算似乎失败。