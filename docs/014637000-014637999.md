# StackOverflow 问答 14637000-14637999

# java - Java Web 框架适用于 Java Web 编程新手？

> ID：14637013
> 
> 赞同：2
> 
> 时间：2013-01-31T23:25:25.370
> 
> 标签：java, spring, hibernate, frameworks, playframework

我通常用 PHP 编写我的网站，但我希望转向 Java。为此，我正在寻找适合新手的 Java 框架，具有最少的配置和易于部署，以及 MVC 方法，并且可以轻松完成 AJAX。可以很快让我以最小的麻烦抛出一个网站的东西。

我看过的大多数框架看起来都非常复杂和臃肿。我似乎需要学习十几个注释和配置才能开始工作，还有十亿个术语（IoC、AOP、Beans 等）。播放似乎更好，但似乎需要一些额外的工作才能在服务器上部署/运行。（我想部署到亚马逊）。

我正在考虑跳过一个框架，并自己使用 servlet 自定义编码。但我认为这种方法会有很多安全问题。

我最好的选择是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T23:32:19.963

试试 Spring MVC

[http://static.springsource.org/docs/Spring-MVC-step-by-step/](http://static.springsource.org/docs/Spring-MVC-step-by-step/)

Struts 2 将是下一个选择。

对于一般的 AJAX 或 javascript，请使用 JQuery

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T12:53:56.537

我从 PHP 切换到 Play Framework 1.2.x 并且从未回头（很少回头）。与我使用 PHP、所有库、类型安全、休眠等相比，我实际上非常喜欢 Java。

这也迫使我在纯面向对象编程方面变得更好。Play 消除了 Java 中的大部分问题，让构建非 ajaxy Web 项目变得容易。

我经常使用 ajax，发现 Play 有点笨拙，但它仍然很好用，如果我投入时间，有很多插件声称可以让它更容易。

我对 Play 的主要抱怨是模板（视图）有时使用起来很痛苦，并且在 2.x 中从 Groovy 切换到 Scala 时解决了这个问题。但是我必须为 2.x 学习很多新语法，而我没有那种心情，所以我仍然在 1.2.x 中进行生产项目。

总而言之，在你的名单上最好的，我会选择 Play 而不是其他的，然后选择 1.2.x。未来在 2.x 中，但我认为通过转到 1.2.x 可以更好地简化从 PHP 到 JVM 语言的过渡。如果您有时间，请使用 2.x。我非常期待类型安全的模板，但还不想对所有其他更改大惊小怪。

至于托管，我在传统的 VPS 上运行。我真的不关心 AWS。我发现运行生产服务器就可以在没有太多系统管理员知识的情况下进行管理。如果你想走这条路，其他人提到了那些在 AWS 之上施展魔法的人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T23:35:03.107

如果您是 Java 人，请尝试 Play 1.2.x。Play 2.x 很棒，但 Play 1.x 的核心是 Java，你不需要学习任何新工具（看看你的 SBT）。您确实需要遵循本教程，因为它的运行方式与常规 java 库有点不同（它监视路径的更改并动态重新编译代码/类）

另一个让我印象深刻的框架是 Errai：[http](http://www.jboss.org/errai) ://www.jboss.org/errai ，值得一试。

此外，如果您想轻松部署，请尝试 Heroku（实际上在 Amazon 上运行）。部署起来真的很轻松——只需将代码提交到 Heroku git repo 就可以了。如果你害怕 git，他们甚至有 Eclipse 3.7（不是 4.x）的 Eclipse 插件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T23:50:00.947

我会推荐JSF。那里有很多反对者，但 JSF 相当可靠，它的许多缺点最终都在 JSF2 中得到解决。此外，成熟的组件有很多选择：

*   富脸
*   PrimeFaces
*   ICEFaces（不推荐）

等等

考虑它的另一个原因是因为它现在是标准的一部分：Java EE 6 将它拉到了保护伞下。我以前用过很多次并且非常满意的 RichFaces 东西。您可以非常快速地制作非常高性能、面向增量更新的页面，并且您最终不会编写 Javascript 或将代码放入页面中。

最后，RichFaces 的人有一个与 Twitter Bootstrap 集成的项目，看起来很有趣……

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T18:28:22.190

试试微。Micro 是一个非常新的基于 MVC 的 Web 开发 Java 框架。它是开源的，在 Apache 2 许可下获得许可。您可以在此处查看文档：http: [//micro-docs.simplegames.ca/](http://micro-docs.simplegames.ca/)（正在进行中）或其在 Github 上的源代码：

*   微：[https ://github.com/florinpatrascu/micro](https://github.com/florinpatrascu/micro)
*   一些例子：[https ://github.com/florinpatrascu/micro-examples](https://github.com/florinpatrascu/micro-examples)

让我知道你的想法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-07T07:38:42.367

阿帕奇检票口

*   如果你知道 Java
*   如果您想构建基于组件的 Web 应用程序
*   如果您希望能够在单元测试中测试您的所有组件
*   如果您想拥有一个安全的应用程序
*   如果你想找到一个很棒的社区
*   如果你想玩得开心

然后，看看 Apache Wicket [http://wicket.apache.org](http://wicket.apache.org)

什么是 Apache 检票口？Wicket 是一个面向组件的 Java Web 框架，拥有一个很棒的社区。

来自[http://wicket.apache.org/meet/introduction.html](http://wicket.apache.org/meet/introduction.html)

简单（简单/一致/明显）

*   以 POJO 为中心 全部用 Java 编写的代码
*   最小化“概念表面积”
*   避免过度使用 XML 配置文件
*   彻底解决后退键问题
*   轻松创建可添加书签的页面
*   最大的类型安全和编译时问题诊断
*   最大限度地诊断运行时问题
*   对特殊工具的依赖最少
*   组件、容器和约定应该是一致的

可重复使用的

*   用 Wicket 编写的组件应该是完全可重用的
*   可重用的组件应该很容易分布在普通的 JAR 文件中

非侵入式

*   HTML 或其他未被编程语义污染的标记
*   标记中只有一个简单的标记结构
*   兼容任何普通的 HTML 编辑器
*   易于图形设计人员识别和避免框架标记
*   如果设计师不小心删除了标签，很容易将标签添加回 HTML

安全的

*   代码默认是安全的
*   只有显式可添加书签的链接才能在页面或 URL 中公开状态
*   Java中的所有逻辑都具有最大的类型安全性
*   易于与 Java 安全性集成

高效/可扩展

*   高效轻量，但不以牺牲其他目标为代价
*   首选通过粘性会话进行聚类
*   通过会话复制进行集群很容易完成，并且通过使用可拆卸模型很容易调整。

完成 Wicket 团队致力于为开发 Java Web 应用程序提供一个功能完整、即用型的框架。核心框架由本文作者 Jonathan Locke 编写和贡献。目前的团队由一群经验丰富的程序员组成，其中一些人活跃于上述其他一些框架，并且都拥有构建大型 Java Web 应用程序的丰富经验。我们吃自己的狗粮，因此将从框架用户的角度在 Wicket 上工作。

阿帕奇检票口：[http ://wicket.apache.org](http://wicket.apache.org)

弗朗索瓦

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-01T00:00:23.890

任何不了解**Java Web**的明智人都会了解**Java EE**的含义，但坦率地说，它们都是从两个重要的基础系统运行的，

1.  **“JSP”**及其**JSP-scripting**及其**Java EE Servlets**（例如 Servlets 1.2 级别，不回溯到标准输入流）和称为 JSP“指令”的**JSP“标签”。**

**JSP 指令**（大致称为“JSP 标记”）不应与**“JSP 自定义标记”（一种框架）**相混淆。

1.  **JSP 本身是一个框架，它的引擎是一个“Servlet”**。**“自定义标签”是 JSP 的第一个免费基础框架**，并且 JSP 本身是另一个不可阻挡的框架，它是***所有 Java 中*****最重要的框架之一，称为“Beans”***。*

 ** * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-01T05:31:30.017

* * *

## 带弹簧的jsf

我认为它的最佳选择............

对于人脸导航和人脸 bean，使用 jsf，对于服务和数据源，使用 spring ....

...

对于 jsf，有很多面孔可用..richfaces

primefaces openfaces 全面

我的脸

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-06-02T03:36:05.810

> 我正在寻找一个适合新手的 Java 框架，具有最少的配置和易于部署，以及 MVC 方法，并且可以轻松完成 AJAX。

你所描述的存在。它的名字是HybridJava。*

# java - Android Parcelable 麻烦

> ID：14637014
> 
> 赞同：2
> 
> 时间：2013-01-31T23:25:26.257
> 
> 标签：java, android

我无法在 android 中实现 Parcelable 类。

我遇到的问题是我收到的是 BinarySearchTree 不能转换为 TreeNode。

当我打印出我收到的类型是什么时，它说树节点，所以我不完全确定问题是什么。

这是错误

```
01-31 18:13:50.986: E/AndroidRuntime(1059): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.discoverycalendar/com.discoverycalendar.DiscoveryMainMenu}: 
java.lang.ClassCastException: com.DiscoveryUtils.BinarySearchTree cannot be cast to com.DiscoveryObjects.TreeNode

private TreeNode  root = null;

@Override
public int describeContents() {

    return 0;
}

public BinarySearchTree(Parcel in){

    this();
    root = (TreeNode) in.readValue(TreeNode.class.getClassLoader());
    in.readStringList(treeCont);
    in.readStringList(treeAsString);
}

public static final Creator<BinarySearchTree> CREATOR = new Creator<BinarySearchTree>() {

    public BinarySearchTree createFromParcel(Parcel source) {

        return new BinarySearchTree(source);
    }

    public BinarySearchTree[] newArray(int size) {

        return new BinarySearchTree[size];
    }
};

@Override
public void writeToParcel(Parcel dest, int flags) {

    dest.writeValue(root);
    dest.writeStringList(treeCont);
    dest.writeStringList(treeAsString);
} 
```

我收到的错误是当我尝试将返回值转换为 TreeNode 时。我不知道为什么它认为它是一个不同的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:53:12.173

简单的原因是[TreeNode](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/tree/TreeNode.html)不是[Serializable](http://developer.android.com/reference/java/io/Serializable.html)或 Parcelable。因此，您需要创建一个自定义类来扩展 TreeNode 并执行其中之一以展平数据。这是支持类型的[文档](https://developer.android.com/reference/android/os/Parcel.html)。TreeNode 不存在。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T23:45:14.910

public static **final** Creator，如果可能的话，它需要具有相同的构造函数态射，而且因为它不是同一个包，你需要首先向上转换到一个对象，例如

```
//....
Object treeinst = (Object) BinarySearchTree[x];
TreeNode treet = (TreeNode) treeinst;
return treet; 
```

# html - 如何响应式地表示表格数据？

> ID：14637016
> 
> 赞同：0
> 
> 时间：2013-01-31T23:25:29.000
> 
> 标签：html, responsive-design

我有一张需要展示的表格。在桌面上，它很简单：4 行 10 列。

```
<table width='100%'>
<thead>
<tr><th colspan='10'>Size Chart (inches)</th></tr>
<tr><th>Size</th><th>6</th><th>8</th><th>10</th><th>12</th><th>14</th><th>16</th><th>18</th><th>20</th><th>22</th></tr>
</thead>
<tbody>
<tr><td class='head'>Bust</td><td class='odd'>35&#xbd;</td><td>36&#xbd;</td><td class='odd'>37&#xbd;</td><td>39</td><td class='odd'>40&#xbd;</td><td>42&#xbd;</td><td class='odd'>44&#xbd;</td><td>46&#xbd;</td><td class='odd'>48&#xbd;</td></tr>
<tr><td class='head'>Waist</td><td class='odd'>27&#xbd;</td><td>28&#xbd;</td><td class='odd'>29&#xbd;</td><td>31</td><td class='odd'>32&#xbd;</td><td>34</td><td class='odd'>36</td><td>38</td><td class='odd'>41&#xbd;</td></tr>
<tr><td class='head'>Hips</td><td class='odd'>38&#xbd;</td><td>39&#xbd;</td><td class='odd'>40&#xbd;</td><td>42</td><td class='odd'>43&#xbd;</td><td>45&#xbd;</td><td class='odd'>47&#xbd;</td><td>49&#xbd;</td><td class='odd'>52</td></tr>
</tbody>
</table> 
```

但是，在较小的屏幕上，我需要旋转这 90%，给出 10 行和 4 列。

我可以在服务器端执行此操作，但是您需要知道屏幕尺寸，因此必须允许浏览器嗅探，这在很多方面都被不赞成。

我可以用 javascript 做到这一点，但非 javascript 用户会受到影响。（这是我应该关心的事情吗？）

我想我什至可以使用 css“内容”属性使用媒体查询来注入表，但这似乎太错误了，我什至不想考虑它。

sizechart 将出现在电子商务网站上，让您了解目标受众。

任何建议，将不胜感激。理想情况下，我想要一个仅 HTML5/CSS 的解决方案。这样的事情是否存在，而不使用“内容”，这似乎是错误的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T00:06:15.837

最简单的可能是将表格放入 HTML 中两次，一次是 4x10 格式，一次是 10x4 格式。然后你可以使用一个简单的媒体查询来根据设备的宽度来控制两个表中的哪一个被显示，哪个被隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:04:23.470

不幸的是，仅使用 CSS/HTML5 来区分基于屏幕分辨率的视图是不可能的。

最好的解决方案是使用 javascript 来检测窗口的大小，然后执行以下操作之一：

1.  渲染两个表格（10x4 和 4x10）并根据页面宽度更改哪个表格可见。我会在页面的主体上应用像“wideBody”或“tallBody”这样的类，然后在宽的桌子上使用像“wideContent”这样的类，在高的桌子上使用像“tallContent”这样的类。根据宽度有选择地将此类应用于页面主体 - 在 CSS 中执行此操作：

    .tallBody .wideContent, .wideBody .tallContent { 显示：无；}

2.  转发到移动友好的不同页面（假设您的目标是移动用户）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T00:15:55.050

我强烈建议您看一下 Bootstrap，因为听起来这个框架可能适合您的需要。基本概念是网格会根据浏览器的窗口大小很好地调整大小，这也适用于移动设备。

[流体网格系统](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)

如今，大多数浏览器和移动设备都支持 JavaScript（除非用户决定禁用它）。与其重新编写和计算浏览器宽度，不如使用一个工具，这样您就可以更多地关注应用程序本身的其他重要方面。

# nservicebus - 混合环境中的 NServiceBus

> ID：14637018
> 
> 赞同：1
> 
> 时间：2013-01-31T23:25:43.090
> 
> 标签：nservicebus

有没有办法在系统的各个部分可以共享消息的混合环境（不是所有.NET）中使用 NSB？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T13:47:40.917

在这方面有几个选择。首先，您可以通过 WCF 公开任何 NSB 端点，以允许非 .NET 组件将消息发送到 NSB。然后，您还可以通过向网关端点发送消息来向其他组件返回消息，网关端点通过 .NET 兼容的 API 或服务对非 .NET 组件进行类似调用。

其次，可以编写自己的传输方式来连接到另一个世界。我的意思是你可以提供一个 JMS 实现来代替 MSMQ 运行。您仍然需要在另一边自行接收消息。

最后，我们看到人们在 NSB 中设置了所谓的 Satellite 来处理通过另一个 ESB/Broker 与其他系统的桥接。卫星与具有自己资源的端点一起运行。您可以考虑设置一个完整的端点来创建这个桥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T23:55:45.230

我会说是的，但是 NSB 的全部功能确实可用于您环境的 .NET 组件。您的 NSB 系统可以通过集成点扩展到系统中的其他非 .net 组件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T14:09:39.090

即将发布的 4.0 版本将支持使用 SqlServer、ActiveMQ 和 RabbitMQ 作为传输。有了这个，我们希望解决在混合环境中使用 NServiceBus 的需求。

# django - SQLite3 没有捕捉到太长的用户名

> ID：14637022
> 
> 赞同：1
> 
> 时间：2013-01-31T23:25:56.337
> 
> 标签：django, sqlite

我最近修改了我的 Django 项目的设置，使其在我运行测试而不是 PostgreSQL 时使用 SQLite3，以便我的测试运行得更快。但是，一旦我这样做了，如果我尝试创建一个用户名超过 30 个字符的用户，我的一个否定单元测试会检查以验证 Django 是否会抛出错误。直到这个时候，测试总是通过。

如果我使用 PostgreSQL 运行以下测试，则会引发异常（特别是 DatabaseError）并且测试通过。但是，如果我改用 SQLite3，则不会引发异常并且测试失败。我仔细检查了 SQLite3 auth_user 模式并确认用户名是 varchar(30) 字段。有没有其他人经历过这个？谢谢。

```
from django.test import TestCase
from django.contrib.auth.models import User

class SimpleTest(TestCase):
    def test_simple(self):
        exception_raised = True  # Exception should be raised since username > 30 chars
        try:
            user = User.objects.create_user(username='testusertestusertestusertestuser')
        except Exception as e:
            exception_raised = False
        assert not exception_raised, "Exception wasn't raised" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:51:04.263

除了 Zuko 的回答之外，我认为您的单元测试可能没有做正确的事情。

模型验证在保存之前发生似乎是一种常见的误解。请参阅[模型验证](https://docs.djangoproject.com/en/dev/ref/models/instances/?from=olddocs#validating-objects)文档。

您正在做的是期望`max_length`模型字段的参数在不通过验证功能的情况下得到兑现。当您使用`ModelForms`时，表单将确保调用模型验证并且您将获得一个`ValidationError`.

这同样适用于其他约束，例如类型的`is_blank`选项`CharField`。据我所知，这种验证只能在 Python 领域进行，因为没有可用的约束可以在数据库级别应用来检查字段是否为空白。

StackOverflow 上还有许多与此问题相关的其他问题，这些问题将解释您如何在所有情况下强制验证，例如[这个答案](https://stackoverflow.com/a/14472335/302243)

或者，让您的单元测试调用`full_clean()`实例方法以检查是否满足所有验证约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T23:32:06.493

我相信这样做的原因是 sqlite3 在后台将所有 varchar 数据类型转换为 text 数据类型。这就是 DBMS 不会捕获任何超出限制的值的原因。文档在这方面有点不清楚，但是我在文档之前和文档中都遇到了这个问题，这是我能想到的最好的答案。所以基本上，

```
CREATE TABLE A(name varchar(30)) 
```

最终将与以下内容相同：

```
CREATE TABLE A(name text) 
```

在此处查看文档（第 2.2 节）：[http ://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)

你可以做一个测试，看看这只是 DBMS 的功能：

```
sqlite> create table A(name varchar(2));
sqlite> insert into A values("hello world");
sqlite> select * from A;
hello world 
```

如您所见，没有错误，也没有截断。

希望有帮助，

# tridion - Tridion ComponentLink 无法解析

> ID：14637025
> 
> 赞同：2
> 
> 时间：2013-01-31T23:26:04.263
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我们在页面上的许多此类 ComponentLink 中只有一个 Componentlink 无法正确解析。页面上有大量类似的 Componentlinks，除了这个之外，它们也能正确解析。我们已经尝试发布链接引用的组件，该组件所在的页面，该链接没有出现的页面，单独没有错误但是这个链接没有解析为表单的锚标记

这是我们在模板生成器和渲染页面中看到的内容

模板生成器的部分输出

```
<p class="break">
    <a href="/WebUI/Editors/CME/Views/Popups/Preview/Preview.aspx#id=tcm:111-8211" >
        Learn more <span class="arrow-right"> </span>
    </a>
</p> 
```

部分渲染页面输出

```
<p class="break">
    <tridion:ComponentLink pageURI="tcm:111-3943-64" componentURI="tcm:111-8211" 
        templateURI="tcm:0-0-0" addAnchor="false" 
        linkText="Learn more &lt;span class=&#34;arrow-right&#34;&gt; &lt;/span&gt;" 
        linkAttributes="" textOnFail="true"/>
</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:16:35.030

您在页面中呈现的组件链接看起来很正常。尝试使用 URI 在组件上执行*Where Used*`tcm:111-8211`。检查它是否用于除`tcm:111-3943-64`. 如果它在其他一些页面上，请检查组件模板的优先级。至少其中一个必须设置为*Never Link*以外的优先级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T22:12:15.837

看起来你只有一个页面中的一个组件失败，它应该表现得像一个锚？那为什么我在你的输出中看到 addAnchor="false" ，你能在文件中让它为真并尝试吗？

另外，您能否确保您遵循此处提到的简单步骤？ [http://yatb.mitza.net/2012/03/component-link-samples.html](http://yatb.mitza.net/2012/03/component-link-samples.html)

# jquery - 获取点击列表项的ID

> ID：14637029
> 
> 赞同：2
> 
> 时间：2013-01-31T23:26:28.160
> 
> 标签：jquery, twitter-bootstrap, click

[http://jsfiddle.net/Ht8eP/3/](http://jsfiddle.net/Ht8eP/3/)

在前面的示例中，我通过它的 ID 明确地捕获每个单击的列表项，这对于太多的项目来说是不实用和高效的。我想要实现的是在不对所有列表项进行硬编码的情况下动态获取它。

```
$(function() {
    $("#a1").click(function()
    {
        document.getElementById("dropdown").innerHTML = "A-1";
        document.getElementById("result").innerHTML = process("a1");
    });

    $("#a2").click(function()
    {
        document.getElementById("dropdown").innerHTML = "A-2";
        document.getElementById("result").innerHTML = process("a2");
    });

    $("#a3").click(function()
    {
        document.getElementById("dropdown").innerHTML = "A-3";
        document.getElementById("result").innerHTML = process("a3");
    });
});

function process(param)
{
    // Some processing!
    return param;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T23:30:03.017

根据元素的位置选择元素：

```
$(function () {
    $(".dropdown-menu li").click(function () {
        var text = $(this).text();

        $("#dropdown").text(text);
        $("#result").text(process(text));
    });
}); 
```

因此`#a1`，您无需寻找 ，`<li>`而是寻找`<ul class="dropdown-menu">`.

**演示：http: [//jsfiddle.net/Ht8eP/5/](http://jsfiddle.net/Ht8eP/5/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T23:33:08.117

要使用现有代码，尽可能少地更改它，您可以绑定到`ul.dropdown-menu li`相反并从其中获取 HTML`a`并使用当前 ( `this`)`li`的`id`值，类似于：

```
$("ul.dropdown-menu li").click(function() {
    var $link = $(this);
    document.getElementById("dropdown").innerHTML = $("a", $link).html();
    document.getElementById("result").innerHTML = process(this.id);
}); 
```

* * *

[**演示**](http://jsfiddle.net/wxpVG/)- 用单击事件替换多个

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T23:31:49.853

您可以在所有的上使用相同的类`<li>`，然后绑定到该类。至于细节，我建议使用`id`or `data-id`：

```
$(".a").click(function()
{
    document.getElementById("dropdown").innerHTML = "A-" + $(this).data('id');;
    document.getElementById("result")
                .innerHTML = process("a" + $(this).data('id'));
}); 
```

[http://jsfiddle.net/ExplosionPIlls/Ht8eP/6/](http://jsfiddle.net/ExplosionPIlls/Ht8eP/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T23:39:20.693

为您需要处理的所有元素添加您自己的属性，并编写一个通用的 jquery 选择表达式以根据您的属性选择所有这些元素。像这样的东西......

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Untitled Page</title>
    <script src="jquery-1.6.1.min.js" type="text/javascript"></script>
    <script language="javascript">
        $(function () {
            $("[process]").click(function () {
                $("#dropdown").html($(this).attr("process"));
                $("#result").html($(this).attr("process"));
            });            
        });

        function process(param) {
            // Some processing!
            return param;
        }
    </script>
</head>
<body>
<a process="A-1" id="a1" href="#">A-1</a>
<a process="A-2" id="a2" href="#">A-2</a>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-03T03:31:33.573

代码优化

```
$(function() {

    $("li","ul.dropdown-menu").click(function(){
        $("#dropdown").html($(this).html()) ;
        $("#result").html(process($(this).attr('id')));
    });
});

function process(param){
    // Some Processing!
    return(param);
} 
```

# ios - 为什么 UICollectionView 的 UICollectionViewCell 没有在用户触摸时突出显示？

> ID：14637031
> 
> 赞同：41
> 
> 时间：2013-01-31T23:26:44.097
> 
> 标签：ios, objective-c, uicollectionview

我有一个由自定义 UICollectionViewCell 子类组成的 UICollectionView。单元格正确显示，并通过触发此方法正确响应用户的触摸：

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath 
```

但是，我的理解是，当用户触摸单元格时，它应该突出显示（蓝色），然后当用户抬起手指时突出显示应该消失。这没有发生。关于为什么的任何想法？

以下是一些相关代码：

在 UICollectionView 的数据源中：

```
@implementation SplitCheckViewCollection

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *cellIdentifier = @"ReceiptCellIdentifier";
    SplitCheckCollectionCell *cell = (SplitCheckCollectionCell *)[collectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];
    cell.cellName.text = [NSString stringWithFormat:@"%@%i",@"#",indexPath.row+1];

    return cell;
} 
```

在 UICollectionViewCell 的实现中：

```
@implementation SplitCheckCollectionCell

- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        NSArray *arrayOfViews = [[NSBundle mainBundle] loadNibNamed:@"SplitCheckCollectionCell" owner:self options:nil];

        if ([arrayOfViews count] < 1) {
            return nil;
        }

        if (![[arrayOfViews objectAtIndex:0] isKindOfClass:[UICollectionViewCell class]]) {
            return nil;
        }

        self = [arrayOfViews objectAtIndex:0];    
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-31T23:33:53.967

该类仅告诉您高亮状态，但不会更改视觉外观。您必须通过例如更改单元格的背景以编程方式执行此操作。

[CollectionView 编程指南](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UICollectionView_class/#//apple_ref/doc/uid/TP40012177-CH1-SW16)中描述了详细信息。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-02-01T23:43:17.620

正如 SAE 所说，你必须在子类中自己做。我刚刚遇到的另一个问题是，当点击一个单元格时，如果按下并按住该单元格，它将接收高亮并重绘。但是，如果快速点击，重绘就不会发生。

我在情节提要中创建了单元格，并且集合视图默认勾选了“延迟内容触摸”。我取消勾选它，它立即显示手指触摸屏幕。

我正在使用一个自定义绘制例程来检查 isHighlighted 值。您还需要在自定义单元格中覆盖 setHighlighted，如下所示，否则绘制例程永远不会被调用。

```
-(void)setHighlighted:(BOOL)highlighted
{
    [super setHighlighted:highlighted];
    [self setNeedsDisplay];
} 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-08-12T08:06:39.793

您应该实现 2 个委托方法：

```
- (void)collectionView:(UICollectionView *)colView didHighlightItemAtIndexPath:(NSIndexPath *)indexPath;
- (void)collectionView:(UICollectionView *)colView didUnhighlightItemAtIndexPath:(NSIndexPath *)indexPath; 
```

用动画突出显示集合视图单元格的完整代码：

```
- (void)collectionView:(UICollectionView *)colView didHighlightItemAtIndexPath:(NSIndexPath *)indexPath {
     UICollectionViewCell* cell = [colView cellForItemAtIndexPath:indexPath];
     //set color with animation
    [UIView animateWithDuration:0.1
                      delay:0
                    options:(UIViewAnimationOptionAllowUserInteraction)
                 animations:^{
                     [cell setBackgroundColor:[UIColor colorWithRed:232/255.0f green:232/255.0f blue:232/255.0f alpha:1]];
                 }
                 completion:nil];
 }

- (void)collectionView:(UICollectionView *)colView  didUnhighlightItemAtIndexPath:(NSIndexPath *)indexPath {
    UICollectionViewCell* cell = [colView cellForItemAtIndexPath:indexPath];
    //set color with animation
    [UIView animateWithDuration:0.1
                      delay:0
                    options:(UIViewAnimationOptionAllowUserInteraction)
                 animations:^{
                     [cell setBackgroundColor:[UIColor clearColor]];
                 }
                 completion:nil ];
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-07-09T02:55:39.853

如果要在触摸和释放触摸时具有突出显示和取消突出显示效果，则需要实现**UICollectionViewDataSource**

这是示例代码

```
#pragma mark - UICollectionView Datasource

 - (void)collectionView:(UICollectionView *)colView didHighlightItemAtIndexPath:(NSIndexPath *)indexPath {
 UICollectionViewCell* cell = [colView cellForItemAtIndexPath:indexPath];
 cell.contentView.backgroundColor = [UIColor colorWithRed:235/255.0f green:236/255.0f blue:237/255.0f alpha:.5];
 }

 - (void)collectionView:(UICollectionView *)colView didUnhighlightItemAtIndexPath:(NSIndexPath *)indexPath {
 UICollectionViewCell* cell = [colView cellForItemAtIndexPath:indexPath];
 cell.contentView.backgroundColor = nil;
 } 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-10-28T18:46:50.133

您可以通过将这些线添加到 UICellView 的设置中来获得要绘制的亮点。

```
UIView* selectedBGView = [[UIView alloc] initWithFrame:self.bounds];
selectedBGView.backgroundColor = [UIColor redColor];
self.selectedBackgroundView = selectedBGView; 
```

来自“管理选择和突出显示的视觉状态”...集合视图默认支持单项选择，并且可以配置为支持多项选择或完全禁用选择。集合视图检测其边界内的点击并相应地突出显示或选择相应的单元格。在大多数情况下，collection view 只修改单元格的属性以表明它被选中或突出显示；**它不会改变细胞的视觉外观，但有一个例外。如果单元格的 selectedBackgroundView 属性包含有效视图，则集合视图会在单元格突出显示或选中时显示该视图。**

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-07-02T14:18:43.320

正如 SAE 指出的那样，您必须在突出显示的单元格中手动执行此操作。我发现最简单的方法是使用 tableview didHighlightRowAtIndexPath 和 didUnhighlightRowAtIndexPath 方法，它们在 UICollectionCell 实例中设置一个布尔“突出显示”，然后在子类 UICollectionCell 类中覆盖该属性。这样做的美妙之处在于动画已经为您准备好了。你也可以在 UITableView/UITableViewCell 的情况下做同样的事情。

所以在你的 UICollectionView 中使用 UICollectionViewDelegate 方法：

```
func collectionView(collectionView: UICollectionView, didHighlightItemAtIndexPath indexPath: NSIndexPath) {
    collectionView.selectItemAtIndexPath(indexPath, animated: true, scrollPosition: UICollectionViewScrollPosition.None)
}

func collectionView(collectionView: UICollectionView, didUnhighlightItemAtIndexPath indexPath: NSIndexPath) {
    collectionView.deselectItemAtIndexPath(indexPath, animated: true)
} 
```

然后在你的 UICollectionViewCell 子类中添加：

```
override var highlighted:Bool{
    didSet{
        println("Highlighted is set \(highlighted)")
        if(highlighted == true){
            self.backgroundColor = UIColor.redColor()
        }else{
            self.backgroundColor = UIColor.blueColor()
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-02T10:33:40.880

你可以试试这段代码：

```
- (void)collectionView:(UICollectionView *)colView didHighlightItemAtIndexPath:(NSIndexPath *)indexPath {
UICollectionViewCell* cell = [colView cellForItemAtIndexPath:indexPath];
cell.contentView.backgroundColor = [UIColor blueColor];
} 
```

和

```
- (void)collectionView:(UICollectionView *)colView didUnhighlightItemAtIndexPath:(NSIndexPath *)indexPath {
UICollectionViewCell* cell = [colView cellForItemAtIndexPath:indexPath];
cell.contentView.backgroundColor = nil;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-08-12T05:45:20.263

`collectionViewCell`我们可以通过添加和删除具有一些背景颜色的临时对象来创建自己的突出显示和取消突出显示效果`view`，如下所示：

```
 -(void)collectionView:(UICollectionView *)collectionView didHighlightItemAtIndexPath:(NSIndexPath *)indexPath

    {

         UICollectionViewCell *collectionViewCell = (UICollectionViewCell *)  
                            [collectionView cellForItemAtIndexPath:indexPath];

     UIView *tapHighlightView = (UIView*)[collectionViewCell.contentView 
                                  viewWithTag:10];

     if (!tapHighlightView) {

                tapHighlightView = [[UIView alloc] 
                        initWithFrame:collectionViewCell.contentView.frame];
                tapHighlightView.backgroundColor =[UIColor blackColor alpha:0.4];
                tapHighlightView.tag = 10;
                [collectionViewCell.contentView addSubview:tapHighlightView];
            }
    }

    -(void)collectionView:(UICollectionView *)collectionView didUnhighlightItemAtIndexPath:(NSIndexPath *)indexPath{

        UICollectionViewCell *collectionViewCell = (UICollectionViewCell *)[collectionView cellForItemAtIndexPath:indexPath];
        UIView *tapHighlightView = (UIView*)[collectionViewCell.contentView viewWithTag:10];
        if (tapHighlightView != nil) {
            [tapHighlightView removeFromSuperview];
        }
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-14T13:45:50.820

如果要更改视觉效果，可以在 didHighlightItemAtIndexPath 上将单元格设置为选中，然后在 didHighlightItemAtIndexPath 上取消选择，如下所示：

```
- (BOOL)collectionView:(UICollectionView *)collectionView shouldHighlightItemAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}

- (void)collectionView:(UICollectionView *)collectionView didHighlightItemAtIndexPath:(NSIndexPath *)indexPath
{
    [collectionView selectItemAtIndexPath:indexPath animated:YES scrollPosition:NO];
}

- (void)collectionView:(UICollectionView *)collectionView didUnhighlightItemAtIndexPath:(NSIndexPath *)indexPath
{
    [collectionView deselectItemAtIndexPath:indexPath animated:YES];
} 
```

# visual-studio - 确定在 Visual Studio 2012 中创建什么类型的项目以构建单声道兼容的类库

> ID：14637033
> 
> 赞同：0
> 
> 时间：2013-01-31T23:26:50.757
> 
> 标签：visual-studio, mono, cross-platform, monogame

我正在构建一个多平台应用程序，利用 MonoGame，但我对 Mono 开发非常陌生。结果我有几个问题。

1.  暂时在 Visual Studio 2012 中进行所有开发是否合理，然后当我准备将非 Microsoft 环境作为目标时转移到 MonoDevelop？

2.  为了开发可以在任何运行 Mono 的目标系统上使用的类库，我需要做什么样的配置？

3.  是否建议允许 Windows 环境将应用程序作为 .NET 应用程序运行并让其他部署在 Mono 上运行，或者是否有令人信服的理由选择平面 Mono 配置（或者作为 .NET 应用程序运行确实有好处?)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:37:19.073

我刚刚完成了我的第一个针对 Android 的 MonoGame 游戏，所以我并没有声称自己是专家，但我会告诉你我所知道的。

1) 我几乎所有的游戏开发都使用 MonoDevelop。但是，我确实在 Visual Studio 中加载了几次，编译和运行它都没有问题。

2）您基本上有两个选项来开发共享库。

第一个是可移植类库，它允许您从每个项目中引用相同的 DLL。它们专为此目的而设计，但仅限于基于您定位的框架的功能子集。请参阅：http: [//msdn.microsoft.com/en-au/library/gg597391.aspx](http://msdn.microsoft.com/en-au/library/gg597391.aspx)

第二个选项是文件链接。您可以通过在除一个项目之外的所有项目中创建指向该文件的链接来将相同的代码文件包含到多个项目中。这种方法更灵活一点，但可能有点维护问题。

3) 理论上它会起作用，但不能保证 Mono 的实现与微软的相同。因此，如果您有充分的理由这样做，至少您必须对每一个都进行相当彻底的测试。虽然我真的没有看到任何优势。

# ms-access - 当我在 VB6/Access 中输入阿拉伯语时出现奇怪的字符

> ID：14637038
> 
> 赞同：1
> 
> 时间：2013-01-31T23:27:05.570
> 
> 标签：ms-access, datagrid, vb6, textbox, right-to-left

我在 VB6 中输入阿拉伯语时遇到问题。我有一个带有 ADO 连接的 Access db，每次我在文本框中键入以将其发送到数据库时，它在文本框中看起来都不错。当我导航时它看起来不错，但是当我回到网格或在 Access 中打开数据库时，我看到了奇怪的字符。

当我在网格或 Access 中用阿拉伯语键入任何内容时，它会显示在文本框中，例如`??????`

我使用的 Datagrid 也有同样的问题。

有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T04:56:26.217

You cannot use an "out of the box" VB6 textbox control. You must add a component reference to a textbox that supports Unicode. There is one freely available with Visual Basic 6 although it is not the default with within the toolbox/palette.

# c# - 计算字符串[]中的项目数量？

> ID：14637043
> 
> 赞同：-1
> 
> 时间：2013-01-31T23:27:14.390
> 
> 标签：c#, arrays, string

我用谷歌搜索了这个，找不到答案。

基本上，我有一个文本框。我想逐行阅读文本框。我有这个代码：

```
string[] lst = txt.Split(new Char[] { '\n', '\r' }, StringSplitOptions.RemoveEmptyEntries); 
```

这会拆分每一行，但我无法修改或阅读它。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T23:29:22.790

`lst.Length`将为您提供数组中元素的数量。除此之外，您将不得不在您的问题中更具体地了解您希望能够做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T23:45:27.237

您的问题不在于代码，而在于您的问题。

您需要展示更多内容，特别是在该语句之后如何使用 lst。以下属性将为您提供所需的东西。

```
lst.Length //holds the number of strings in lst. 
```

您可以使用以下命令访问每个字符串：

```
string valueInIndex_i = lst[i]; 
```

您可以通过以下方式遍历其内容：

```
foreach(string thisString in lst)
{
     //do stuff with thisString
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T23:28:07.457

如果我理解正确，您需要逐行阅读，试试这个：

```
string[] lines = TextBox.Text.Split(new char[] { '\n' });
foreach(string line in lines)
{
   // read 'line' variable
} 
```

这样，您将在 TexTbox 中获得一系列行。您还可以通过索引访问，使用`lines[index]`.

你可以使用一个`Length`属性。

```
int total = lst.Length; 
```

如果要指定要计数的字符，可以使用`Count`扩展方法。

```
// add the Linq namespace.
using System.Linq;

int total = lst.Count(c => c == "c"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T23:30:58.090

我想您的 TextBox 的`MultiLine`属性设置为 True。你可以简单地得到你的文本框的行

```
string[] lines = textBox1.Lines; 
```

已经在换行符处拆分。然后你可以迭代然后

```
for(int x=0; x<lines.Length; x++)
{
    if(!string.IsNullOrEmpty(lines[0])
         // process...
} 
```

如果需要更改行，使用 for 的循环比使用 foreach 更可取

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T23:31:38.507

```
string line = null;
using(var sr = new StringReader(txt))
    while((line=sr.ReadLine()) != null)
        Console.WriteLine(line) 
```

# actionscript-3 - 如何在 UILoader 中对齐照片中心？

> ID：14637046
> 
> 赞同：0
> 
> 时间：2013-01-31T23:27:35.430
> 
> 标签：actionscript-3, flash, hosting, dreamweaver, flash-cs5

我做了一个照片库，我使用 Flash cs5 As3 UILoader 组件，如何在中心加载所有不同尺寸的照片？左上角的Uiloader组件注册，需要make to中间吗？舞台宽 1000 像素，高 420 像素。

我的照片大小不一，有的803x400，有的580x400，uiLoader注册点在左上角，就是这个问题，如果我把580x400放在中间，803x400px的手机会在右边很远.

有没有办法解决这个问题？

[www.bradmarkel.net] 点击野生动物，你就会明白我的意思。

这是我的画廊代码，感谢您的时间！

```
import flash.utils.Timer;
import flash.events.TimerEvent;
import flash.events.MouseEvent;
import flash.events.Event;
import fl.containers.UILoader;
import flash.text.TextField;
import flash.display.SimpleButton;
import fl.transitions.Tween;
import fl.transitions.TweenEvent;
import fl.transitions.easing.*;
stage.colorCorrection = ColorCorrection.ON;
var myImage:String = "smallNews/resized web news photos/00.jpg";
var request:URLRequest = new URLRequest(myImage);
uiLoader.addEventListener(Event.COMPLETE, completeHandler);
uiLoader.addEventListener(ProgressEvent.PROGRESS, progressHandler);
uiLoader.load(request);

function progressHandler(event:ProgressEvent):void
 {

status_txt.text = "Percentage Loaded: " + Math.round(event.target.percentLoaded);
 }

function completeHandler(event:Event):void
{
var spr = new Sprite();

// Place spr anywhere on the stage
spr.x = stage.stageWidth / 6 - uiLoader.content.width / 6;
spr.y = stage.stageHeight / 235 - uiLoader.content.height / 235;
spr.addChild( uiLoader );

addChild( spr );

// Center uiLoader in spr
uiLoader.x =  -  uiLoader.width / 500;
uiLoader.y =  -  uiLoader.height / 235;
new Tween(spr,"rotationX",Elastic.easeOut,45,0,4,true);
 }
 next_btn.addEventListener(MouseEvent.CLICK, nextImage);

 //variable is a container that holds some value...;
 var imageNumber:Number = 0;

 function checkNumber():void
 {
next_btn.visible = true;
back_btn.visible = true;
//If the imageNumber is = 47, then do something...
if (imageNumber == 24)
{
    trace(imageNumber);
    next_btn.visible = false;
}
//if the imageNumber is = 1, then don't show the back button
if (imageNumber == 0)
{
    trace(imageNumber);
        back_btn.visible = false;
}
      }
      checkNumber();

      function nextImage(evtObj:MouseEvent):void
      {
//Adding to the current value +1
imageNumber++;
uiLoader.source = "smallNews/resized web news photos/0" + imageNumber + ".jpg";
checkNumber();
      }

      back_btn.addEventListener(MouseEvent.CLICK, backImage);

      function backImage(evtObj:MouseEvent):void
      {
//Subtract 1 from the current value
imageNumber--;
uiLoader.source = "smallNews/resized web news photos/0" + imageNumber + ".jpg";
checkNumber();
       }

      stop(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:54:17.603

如果我理解这样做，您必须将 uiloader 安排在其容器的中心：

```
function completeHandler(event:Event):void
{
var spr = new Sprite();

// Place spr anywhere on the stage
spr.x = stage.stageWidth / 6;
spr.y = stage.stageHeight / 235;
spr.addChild( uiLoader );

addChild( spr );

// Center uiLoader in spr
uiLoader.x =  -  uiLoader.content.width / 2;
uiLoader.y =  -  uiLoader.content.height / 2;
new Tween(spr,"rotationX",Elastic.easeOut,45,0,4,true);
 } 
```

# linux - 如何在 SVN 存储库中列出大于 1 GB 的文件

> ID：14637049
> 
> 赞同：3
> 
> 时间：2013-01-31T23:27:58.410
> 
> 标签：linux, svn

我需要一个命令来列出 SVN 存储库中大于 1GB 的文件。我如何实现这一点，如果有人可以帮助我使用确切的命令，那就太好了。

我正在使用命令行客户端来实现这一点。

谢谢你的帮助。

编辑内容：

我试过这个命令：

```
svn list --verbose --recursive file://path/to/repo | du -sh * | grep G 
```

此命令是否可以安全地返回大于 1 gig 的文件，或者我们是否有任何替代命令可以运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T01:22:46.247

`du -sh *`不是你想要的。它将在当前目录上运行，而不是在通过标准输入提供的列表上。不过，您的总体思路是正确的。

`svn list -v -R file://path/to/repo >svnlist.txt`将创建一个文本文件，其中包含有关 repo 中每个文件的详细信息。每行中的第三项是文件大小，以字节为单位。您要做的是过滤掉所有第三个字段值为 1073741824 或更大的行。

```
gig=$(( 1024*1024*1024 ))
while read line
do
    size=$(echo $line | awk '{print $3}')
    [[ $size -ge $gig ]] && echo $line
done <svnlist.txt 
```

这用于`awk`提取第三个字段，即大小（以字节为单位）。如果此值大于预先计算的千兆字节值，则打印出包含文件大小和路径的整行。目录存在问题，因为它们没有大小字段。在他们的情况下，`size`最终将包含一个月的名称。由于文本和数字在词法上的比较方式，`if`在这种情况下应该总是评估为假。

# dwolla - Dwolla API - 交易/列表“ClearingDate”

> ID：14637054
> 
> 赞同：0
> 
> 时间：2013-01-31T23:28:23.510
> 
> 标签：dwolla

我想更清楚地了解这个返回值。清算日期实际上代表什么？这对银行对账单的存款日期是否绝对准确？我猜这实际上是资金发送到银行进行存款的日期。

Dwolla 打算如何帮助客户获得对账和准确会计所需的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:20:53.240

我假设 Dwolla 使用标准的行业清算日期作为金融（支付网络）交易。在财务方面，清算日期是交易的预期结算日期。实际日期可能因围绕交易的活动而异。一旦交易状态从待处理变为已结算，结算日期（清算日期）通常与银行对帐单准确。

如果交易在流程中被搁置，清算日期可能会发生变化，但您应该期望在对帐单上看到实际的清算日期。我不知道 Dwolla 是否更新了明确的日期，但我假设他们会更新。

关于清算日期是合法允许交易多少天，还有财务规则。

这里有一些链接讨论了清算日期所代表的清算过程。

[NACHA 的 ACH（检查）系统和规则介绍](https://www.nacha.org/Intro2ACH)

[一般清算历史](http://en.wikipedia.org/wiki/Clearing_%28finance%29)

# ios - 分组 UITableView 中第一个和第二个单元格之间的 1 个像素间隙

> ID：14637057
> 
> 赞同：16
> 
> 时间：2013-01-31T23:28:27.690
> 
> 标签：ios, uitableview

这似乎是一个简单的问题，但我在寻找解决方案时遇到了困难，我希望这里有人可以提供帮助......

我正在使用 UITableViewStyleGrouped 制作 UITableView，我在表格视图的每个部分的第一行和第二行之间看到一条小的（1 像素）白线（见图）

![差距的例子](../Images/3bb727db47e9a1a1d90c2c5018ad3f9d.png)

这条线的原因似乎是每个部分中的第一个单元格比其他单元格高 1 个像素。当我将每组的初始单元格设置为 29 像素高（其他为 30 像素）时，间隙消失了，一切都很好。

虽然这是一种成功的解决方法，但我宁愿知道发生这种情况的原因，这样我就可以避免使用凌乱的黑客攻击。

供参考：

*   我已经确保这不是我使用的背景图像的问题 - 它们都是 30 像素高，我用中间图像替换了顶部图像，结果相同。
*   我通过设置 separatorStyle = UITableViewCellSeparatorStyleNone 删除了单元格之间的所有边框
*   这种效果在 UITableViewStylePlain 上不会发生

任何帮助是极大的赞赏。

谢谢

表设置代码：

```
 myTable = [[UITableView alloc] initWithFrame:CGRectMake(TABLE_SHIFT_OFFSET,
                                                          DATE_SLIDER_HEIGHT - DATE_SLIDER_SHADOW_HEIGHT,
                                                          326,
                                                          self.view.frame.size.height - DATE_SLIDER_HEIGHT + DATE_SLIDER_SHADOW_HEIGHT) style:UITableViewStyleGrouped];
  myTable.backgroundColor = [UIColor clearColor];
  myTable.backgroundView = nil;
  myTable.separatorStyle = UITableViewCellSeparatorStyleNone;
  [self.view addSubview:myTable];
  myTable.dataSource = self;
  myTable.delegate = self; 
```

单元设置代码：

```
- (float)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
  // This is a hack to make sure that a white line doesnt appear between the
  // first and second rows in the table, which happens for reasons I dont understand
  if (indexPath.row == 0) {
    return 29;
  }

  return 30;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{     
  MyTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"satCell"];
  if (!cell)
  {
    cell = [[MyTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"satCell"];
  }

  cell.backgroundView = nil;
  cell.backgroundView = [[UIView alloc] initWithFrame:CGRectZero];

  cell.backgroundColor = [UIColor whiteColor];
  int numberOfRowsInThisSection = [self tableView:tableView numberOfRowsInSection:indexPath.section];

  if (numberOfRowsInThisSection == 1)
  {
    cell.backingImage = self.singleWhite;
  }
  else if (indexPath.row == 0)
  {
    cell.backingImage = self.topWhite;
  }
  else if (indexPath.row % 2 == 0)
  {
    // Even row
    if (indexPath.row == numberOfRowsInThisSection - 1)
    {
      // Last row (even)
      cell.backingImage = self.botWhite;
    }
    else
    {
      // Normal row (even)
      cell.backingImage = self.midWhite;
    }
  }
  else if (indexPath.row % 2 == 1)
  {
    // Odd row
    if (indexPath.row == numberOfRowsInThisSection - 1)
    {
      // Last row (even)
      cell.backingImage = self.botDark;
    }
    else
    {
      // Normal row (odd)
      cell.backingImage = self.midDark;
    }
  }

  // Setup cell text [REMOVED FOR BREVITY]

  return cell;
} 
```

在 MyTableViewCell 中设置背景图像的代码：

```
- (void)setBackingImage:(UIImage *)backingImage
{
  if (self.backingImage != backingImage)
  {
    _backingImage = nil;
    _backingImage = backingImage;
    self.backingView.image = backingImage;
  }
} 
```

self.backingView 使用以下代码设置：

```
[[UIImageView alloc] initWithFrame:CGRectMake(7, 0, 307, 30)]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-20T07:55:58.467

这是一个已知问题，仅当您隐藏分组 tableView 的分隔符时才会发生，在另一个[堆栈溢出问题](https://stackoverflow.com/questions/17513989/uiedgeinsetsmake-creating-a-weird-band-on-the-cell-and-i-dont-know-how-to-fix/17586889#17586889)中发生的情况完全相同。

简单来说，上下单元格使用了一个额外的*点*，但是分隔符隐藏了它，所以解决方法是：

1.  减去额外的间距（就像你已经做过的那样）
2.  使背景成为重复图案或可拉伸图像（不是想推销自己，但[我在上一个链接线程中给出的答案](https://stackoverflow.com/a/17586889/868694)也解释了如何制作可拉伸图像）。
3.  不要隐藏分隔符，而是将颜色与单元格的背景相匹配，使其看起来像是隐藏的。

选项 2 似乎是“最干净的”，并增加了支持 tableView 单元格可变高度的好处。

为什么它有这个额外的*点*？只有苹果知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-20T01:04:03.350

如果您执行以下操作，它将解决您的问题：摆脱“backingImage”（backingView）。而是使用单元格的`backgroundView`属性，只需将 分配`UIImageView`给它。现在，当您创建`UIImageView`背景时，请确保您可以`UIImage`像这样进行拉伸：

```
UIImage *bg = [UIImage imageName:@"filename.png"];
bg = [bg resizableImageWithCapInsets:UIEdgeInsetsMake(15, 0, 15, 0)]; 
```

注意：我假设您的图像高度为 30 点。查看您正在使用的图像可以垂直拉伸，我在这个例子中正在做的事情。为了节省更多内存，您也可以水平拉伸它，但您拥有的资产可能不适合这样做。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-19T21:07:44.900

根据我的经验，分组表视图在每个部分的第一行和最后一行的高度上增加了 1 个点（不是像素！）。您应该能够通过添加调试代码来覆盖表格单元类上的 layoutSubviews，让它调用 super 然后打印 bounds.size.height 来看到这一点。

我认为这是为边框绘图提供空间，并且像您一样，我刚刚调整了为第一个和最后一个单元格的高度返回的值以抵消效果。这在 iOS 7 中很可能会改变，因为视觉外观已经改变。

[编辑] 这是一个很好的调试代码来检查视图层次结构。（您不能`recursiveDescription`直接调用，因为它是私有的，并且您的代码不会在默认的 Xcode 设置下编译。）

`NSLog(@"%@", [self.view performSelector:@selector(recursiveDescription)]);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-16T19:11:36.743

在分组表视图上没有分隔符的 iOS 8 上，我也遇到了问题。我的部分之间有 0.5f 点的差距。由于我的 tableview 后面的背景不是相同的颜色，所以非常明显。解决方案是用 1 px 高的空白 headerview 填充，然后用另一个视图溢出 1 px。奇迹般有效。

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, 1)];
    view.backgroundColor = [UIColor whiteColor];
    view.opaque = YES;
    view.clipsToBounds = NO;

    //Spill a view out by one pixel.
    UIView *subView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, 2)];
    subView.backgroundColor = [UIColor whiteColor];
    subView.opaque = YES;
    [view addSubview:subView];
    return view;
}

- (CGFloat)tableView:(UITableView *)tableView
heightForHeaderInSection:(NSInteger)section {
    return 1;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T02:38:23.247

这对我来说是尖叫的部分标题。您是否覆盖 viewForHeaderInSection 方法？我最好的猜测是，每个部分中第一个单元格的边界以某种方式与该部分标题的边界相重叠。

尝试覆盖这些方法：

```
– tableView:viewForHeaderInSection:
– tableView:viewForFooterInSection:
– tableView:heightForHeaderInSection:
– tableView:heightForFooterInSection:
– tableView:willDisplayHeaderView:forSection:
– tableView:willDisplayFooterView:forSection: 
```

和他们返回的东西一起玩。特别是 heightForHeaderInSection / viewForHeaderInSection / willDisplayHeaderView:ForSection:

# html - CSS A Hover 排除当前项目

> ID：14637062
> 
> 赞同：0
> 
> 时间：2013-01-31T23:29:08.557
> 
> 标签：html, css, wordpress

我正在尝试使用我支付的这个 Wordpress 模板，但开发人员并没有太多帮助，我被困住了......

主导航具有粉红色悬停功能，但我希望将“当前菜单项”排除在悬停时变为粉红色。证明很难找到合适的类进行编辑。

我可以看到下面的 HTML 和 CSS 样式...

[家](http://www.royalteeapparel.co.uk/wp/)

该站点位于以下位置：

[http://www.royalteeapparel.co.uk/wp](http://www.royalteeapparel.co.uk/wp)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T23:40:41.990

添加这个：

```
.menu-item a:hover {color: #FF17A6 !important;}
/* add this */
.current-menu-item a:hover {color: #4AB1D3 !important;} 
```

我还建议您尝试完全不使用`!important`并*使用*CSS 而不是反对它，但样式表似乎已经大量使用了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T23:38:45.557

您也可以包含此行。

```
.sf-menu li.current-menu-item a:hover
{
    color: #4AB1D3;
} 
```

CSS 文件已包含：

```
.sf-menu li.current-menu-item a
{
    color: #4AB1D3;
} 
```

因此，向其中添加附加行以包含 :hover 在 a 标签上将摆脱粉红色并使其与所选项目相同的蓝色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T23:34:40.177

在您的 .css 文件 [http://www.royalteeapparel.co.uk/wp/wp-content/themes/WhiteNoise/style.css](http://www.royalteeapparel.co.uk/wp/wp-content/themes/WhiteNoise/style.css) 第 452 行，

改变

```
.menu-item a:hover {
    color: #FF17A6 !important;
} 
```

任何颜色都适合您的需求。

# asp.net-mvc - 这个页面是如何用 MVC 组成的？

> ID：14637064
> 
> 赞同：0
> 
> 时间：2013-01-31T23:29:11.993
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-ajax

让我澄清一下，我是使用`MVC4`and的新手`AJAX`。

请看下图，包含两个主要视图（带有`background-color=white` ![在此处输入图像描述](../Images/a27a10a622cb169668d9435645fa6e5f.png)

在左侧部分，它有一个测试问题列表，右侧部分类似于问题编辑器视图。

我需要实现类似的东西。我最大的疑问是如何开始实现这些接口？我的意思是我认为这些是两个部分视图或编辑器模板，它们如何交互我的意思是，当我按下按钮时`NEW QUESTION`，将问题添加到列表中并在第二个中显示问题详细信息。我想当按下`DONE`按钮时，会向服务器发送一个带有创建问题的帖子，如下所示：

```
public ActionResult Done(List<Question> questions)
{

} 
```

我想这可以通过`AJAX`.

我不是要代码，我只是想要一些关于如何在网页中创建交互的解释，我真的迷路了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:15:28.190

If you'd like to call your controller from jQuery, check out this answer: [https://stackoverflow.com/a/1570138/1015010](https://stackoverflow.com/a/1570138/1015010)

# vb.net - 处理VB中的ocx错误？

> ID：14637066
> 
> 赞同：0
> 
> 时间：2013-01-31T23:29:21.077
> 
> 标签：vb.net, exception-handling, access-violation, ocx

我创建了一个 Visual Basic 应用程序，它使用 OCX 资源来存储办公文档。现在，当我使用该应用程序时，一切似乎都可以正常工作，但是当我退出该应用程序时，它会因访问冲突错误而挂起（大多数情况下）。仅当我尝试关闭整个应用程序时才会发生这种情况。

我试图调试它，尽管它只显示一个反汇编窗口在一条指令上停止，`mov eax,dword ptr [edi+4]`并且调用堆栈指向该特定 OCX。

由于特定的 OCX 是由第三方开发人员创建的，所以我无法修改它，有没有办法至少处理这个异常？或者关于这个问题的任何其他想法？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:54:08.567

没有办法处理这个错误，这听起来像是 OCX 中的一个错误，但你也许可以阻止它。确保您拥有最新版本。确保没有任何东西需要处理或关闭。确保退出应用程序时所有 OCX 功能都已完成。作为最后的手段，您可以尝试更改或注释掉对 OCX 的一些函数调用，看看是否有什么不同。

现在是开始寻找 OCX 替代品的好时机。

# java - Fast MD5 Library 不比 Java 7 MD5 快吗？

> ID：14637073
> 
> 赞同：3
> 
> 时间：2013-01-31T23:29:51.523
> 
> 标签：java, performance, md5, benchmarking

所以我一直在寻找一种更快的方法来计算 MD5 校验和并运行[Fast MD5 库](http://www.twmacinta.com/myjava/fast_md5.php)——但是当我在我的机器上使用 Java 7 对其进行基准测试时，它的运行速度比 Java 版本慢。

要么我在做一些愚蠢的事情（很可能），要么 Java 7 实现了更好的算法（也很可能）。这是我超级简单的“基准”——也许我今天没有喝足够的咖啡……

```
 MD5 digest = new MD5();
    System.out.println(MD5.initNativeLibrary(true));
    byte[] buff = IOUtils.readFully(new FileInputStream(new File("blahblah.bin")), 64000000, true);
    ByteBuffer buffer = ByteBuffer.wrap(buff);
    for (int j = 0; j < 100; j++) {
        start = System.currentTimeMillis();
        String md5Base64 = Utilities.getDigestBase64(buffer);
        end = System.currentTimeMillis();
        total = total + (end-start);
    }
    System.out.println("Took " + ((total)/100.00) + " ms. for " + buff.length+" bytes");
    total = 0;
    for (int i = 0; i < 100; i++) {
        start = System.currentTimeMillis();
        digest.Init();
        digest.Update(buff);
        digest.Final();
        end = System.currentTimeMillis();
        total = total + (end-start);
    }
    System.out.println("Took " + ((total)/100.00) + " ms. for " + buff.length+" bytes"); 
```

我得到：

```
Took 247.99 ms. for 64000000 bytes
Took 295.16 ms. for 64000000 bytes 
```

根据评论，我一遍又一遍地运行基准测试并得到最奇怪的结果。FastMD5 计算保持不变，但 Java 7 版本变慢了。？？？

```
Took 246.54 ms. for 64000000 bytes
Took 294.69 ms. for 64000000 bytes
************************************
Took 540.55 ms. for 64000000 bytes
Took 292.69 ms. for 64000000 bytes
************************************
Took 537.07 ms. for 64000000 bytes
Took 292.12 ms. for 64000000 bytes 
```

* * *

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-10T06:19:15.170

**让我们首先回答您问题的简单部分：**

我认为当您再次运行代码时，您的 Java 7 执行时间大约会加倍，因为如果您只是将发布的代码放入 for 循环中，您会忘记`total`在第 2、3、4、...运行之前重置回 0 Java 7 测试（对于第一个测试，它可能从变量初始化设置为 0）。

因此，通过简单地减去您未设置回 0 的偏移量来修复您的表格会给出：

```
Took 246.54 ms. for 64000000 bytes
Took 294.69 ms. for 64000000 bytes              <---.
************************************                |
Took 245.86 ms. for 64000000 bytes   (subtracting 294.69)
Took 292.69 ms. for 64000000 bytes              <---.
************************************                |
Took 244.38 ms. for 64000000 bytes   (subtracting 292.69)
Took 292.12 ms. for 64000000 bytes 
```

现在，事情似乎非常一致，甚至显示了其他回复之一中提到的“JVM 预热”，并且只产生了大约 1% 的差异。

**现在，为什么 Java 7 的性能优于 FastMD5？**

他们可能使用了更好的算法，该算法更适合 Java 编译器之后执行的优化。

例如，nio`ByteBuffers`专门设计用于通过使用诸如 DMA 之类的本机事物来更快地访问内存。因此，MD5 的 Java 7 实现使用 a`ByteBuffer`作为输入而不是 a的事实`byte[]`让我认为他们实际上是在利用这些功能（否则他们可能也只是采用了`byte[]`.）

再说什么，我们可能需要知道你的`Utilities`对象究竟做了什么，例如，然后比较 FastMD5 的源代码和 Java 实现。

但我想说：你的结果（给定总 = 0 修复）对我来说非常有意义，你可能会喜欢这样一个事实，即你可以减少对外部库的依赖！;)

*顺便说一句：您看到的性能差异仅对应于 3.5GHz CPU 上每个处理的数据字节大约 2-3 个 CPU 时钟周期（每个字节总共大约 15 个时钟周期）。因此，鉴于差异非常小，它很可能取决于所使用的确切平台和 JVM，两者中的哪一个最终会更快。*

**添加**

您的基准测试数据表明您可以使用两种 MD5 实现处理大约 220-260MB/s，如果您查看 Google 搜索显示的其他声称的规格（例如[http://www.zorinaq.com/papers/md5 ），这听起来很合理-amd64.html](http://www.zorinaq.com/papers/md5-amd64.html)在“结果实现”下）。因此，与您收到的所有其他回复相反，我确实觉得我会相信您的数字。

如果您想更加确定，请改变 byte[] 的大小并查看处理时间的结果变化。如果一切正常，您将看到线性关系，您可以使用此函数：

```
total/100.0 = m * buff.length + b           (your usual y = mx + b) 
```

这里，`m`是每个字节的处理时间，应该是大约 1 / 250MB/s = 4ns/byte，`b`是函数用于初始化局部变量等的设置时间，以及所`System.currentTimeMillis();`花费的时间。这个数字应该相当小（可能小于 1ms）。

然后，要确定这两种算法中哪一种更适合您，您需要比较`m`AND `b`。如果您通常处理小型数据数组，则`b`可能比`m`确定哪种算法更好更重要，而对于大型数据集，较小的算法`m`更好

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T20:07:27.520

我写了自己的基准。我的答案：

```
It Depends! 
```

这是我的结果（在 3.4-trunk-amd64 linux 和 Java 1.7.0_05 上运行）：

1.) 对于少量数据，Java 胜出。

```
TINY DATA new byte[12]      SMALL DATA new byte[123]

Java builtin MD5...         Java builtin MD5...
encode 55 MB/s              encode 217 MB/s
encode 55 MB/s              encode 215 MB/s

Java Fast-MD5...            Java Fast-MD5...
encode 31 MB/s              encode 150 MB/s
encode 32 MB/s              encode 159 MB/s

Native Fast-MD5...          Native Fast-MD5...
encode 22 MB/s              encode 133 MB/s
encode 22 MB/s              encode 133 MB/s 
```

2.) 从 1KB 数据起，Native Fast-MD5 总是胜出：

```
MEDIUM DATA new byte[1234]  LARGE DATA new byte[12345]

Java builtin MD5...         Java builtin MD5...
encode 351 MB/s             encode 366 MB/s
encode 351 MB/s             encode 369 MB/s

Java Fast-MD5...            Java Fast-MD5...
encode 300 MB/s             encode 325 MB/s
encode 298 MB/s             encode 322 MB/s

Native Fast-MD5...          Native Fast-MD5...
encode 434 MB/s             encode 582 MB/s
encode 450 MB/s             encode 574 MB/s 
```

3.) 12KB 后速度似乎趋于稳定。123KB 没有真正的变化：

```
X-LARGE DATA new byte[123456]

Java builtin MD5...
encode 367 MB/s
encode 370 MB/s

Java Fast-MD5...
encode 325 MB/s
encode 324 MB/s

Native Fast-MD5...
encode 571 MB/s
encode 599 MB/s 
```

结论：

*   在我的设置中，Java 的内置 MD5 总是优于 Fast-MD5 的后备（非本机）实现。

*   随着数据块变大，所有实现都会加快速度。

*   Fast-MD5 的原生实现是拥有更大数据（1KB 或更大）的赢家。

[甘道夫](https://stackoverflow.com/users/68612/gandalf)的问题：

*   您确定您正在设置您的 Fast-MD5 安装以正确使用本机代码（例如，Fast-MD5 能够找到 MD5.so 或 MD5.dll）吗？

我真的不可能将基准放在一起作为“sscce”——它是 150 行！你可以在这里下载它，而不是：

[http://juliusdavies.ca/base64bench/](http://juliusdavies.ca/base64bench/)

像这样运行它（在用 ant 构建之后）：

```
java ca.juliusdavies.base64bench.MD5BenchByte2Byte MD5.so 
```

这是基准源代码的直接链接：

[http://juliusdavies.ca/base64bench/exploded/base64bench/src/java/ca/juliusdavies/base64bench/MD5BenchByte2Byte.java.html](http://juliusdavies.ca/base64bench/exploded/base64bench/src/java/ca/juliusdavies/base64bench/MD5BenchByte2Byte.java.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T03:28:22.110

分析时，以下规则很重要：

1.  您关心摊销案例，而不是第一次运行。因此，在循环中重复运行测试并等待它解决。

2.  您需要小心分析本身。在您的情况下， System.currentTimeMillis 的前几次运行比后来的运行花费的时间要长得多，这可能会完全扭曲您的性能指标。

3.  始终测量大量迭代，永远不要孤立地测量单个迭代。

4.  迭代次数需要很大才能具有任何意义，并且您需要多次运行测试以获得公正的评估。

尝试运行类似于以下内容的内容：

```
MD5 digest = new MD5();
System.out.println(MD5.initNativeLibrary(true));
byte[] buff = IOUtils.readFully(new FileInputStream(new File("blahblah.bin")), 64000000, true);
ByteBuffer buffer = ByteBuffer.wrap(buff);

int iterations = 10000;

while(true)
{
   //
   // 1\. Run the first test:
   //
   start = System.currentTimeMillis();
   for (int j = 0; j < iterations; j++) {
       String md5Base64 = Utilities.getDigestBase64(buffer);
   }
   end = System.currentTimeMillis();
   System.out.println("(1) " + (start - end) );

   //
   // 2\. Run the second test:
   //
   start = System.currentTimeMillis();
   for (int i = 0; i < iterations; i++) {
      digest.Init();
      digest.Update(buff);
      digest.Final();
   }
   end = System.currentTimeMillis();

   System.out.println("(2) " + (start - end) );
} 
```

# xcode - 多个命令为一个的 LLDB 别名

> ID：14637074
> 
> 赞同：11
> 
> 时间：2013-01-31T23:29:53.780
> 
> 标签：xcode, macos, debugging, lldb

我正在尝试调试一个我没有源的库，所以我经常使用 LLDB 反汇编。我想知道是否有一种方法可以在每次调用“线程介入”后自动运行反汇编。目前，当我执行 'thread step-in' 时，LLDB 会执行指令，然后返回空白提示。要查看 EIP 移动到的位置，我需要在每次线程介入后键入 disassemble，这非常令人分心和烦人（此外，LLDB 似乎不会以 ';' 结束表达式，因此将多个命令放在一行上不会不行。）

更一般地说，我想知道是否有一种方法可以为多个 LLDB 命令连续创建别名：例如，可以打印 %rdi 内容的单个别名，然后在 EIP 周围反汇编 10 行。（是的，我可以为它编写 python 脚本，但我手头没有那么多时间 :-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T05:40:36.840

是的，正确的方法是通过 Python 脚本接口。有一个深思熟虑的决定来避免 gdb 在调试器的命令语言中塞满足够的流控制和执行逻辑以使这成为可能（或者更确切地说 - 使其成为可能......糟糕）。与这种方法不同，您需要使用 Python 来完成任务的门槛很低——但调试器的全部功能可以通过 Python 中一些非常易于使用的接口获得。lldb 将脚本语言留给了 Python，并专注于提供一个干净而强大的 API，该 API 易于从 Python 中使用。

但是为了在这里实现您的目标，为什么`stop-disassembly-count`设置不能满足您的需求？实际上，除非您`~/.lldbinit`通过更改`stop-disassembly-display`.

```
(lldb) settings show stop-disassembly-count
stop-disassembly-count (int) = 4
(lldb) settings show stop-disassembly-display
stop-disassembly-display (enum) = no-source
(lldb) 
```

lldb 的默认行为是在您单步执行程序时显示*某种上下文。*如果源代码可用，它将显示您正在单步执行的源代码。如果没有源，它将显示即将执行的汇编指令。当您有调试信息（因此调试器知道文件和行号）但源代码不可用（或在不同的路径）时，会有一个小错误——现在 lldb 会向您显示反汇编，但这不是正确的行为这个案例。用户仍在源代码级别操作（使用`s`and `n`to step，而不是`si`for`ni`指令级步进）并且 lldb 在这种情况下不应该显示任何上下文，只显示源文件名和行号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-23T17:40:39.420

如果您只想创建一个结合一两个基本命令的超级简单别名，我发现以下作为单行命令*几乎是合理的*

```
command alias ff script lldb.debugger.HandleCommand('frame info'); lldb.debugger.HandleCommand('disassemble') 
```

这有点麻烦，并且并非在所有情况下都有效，但它至少可以让您就地组合几个命令，而无需创建上下文并将其切换到单独的文件。

否则，正如@JasonMolenda 解释的那样，更通用的方法是编写一个 Python 函数，这很简单，可以让您充分利用 LLDB 的强大 Python 支持。尽管如此，有时能够定义 in-line 和 one-liner 胜过 Python 脚本的低标准仍然是件好事。

* * *

顺便说一句，LLDB 确实支持就地定义 LLDB 命令列表，例如在断点处执行

```
> breakpoint command add 1    # Execute the following on breakpoint 1
p x
p y
p z
DONE 
```

but I don't believe the same facility applies to defining new commands unless I can be corrected.

# c++ - C++：#包含 但不能使用getline？

> ID：14637081
> 
> 赞同：2
> 
> 时间：2013-01-31T23:30:13.040
> 
> 标签：c++, string, getline

我的代码：

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;
.
.
.

void function() {
    ofstream inputFile;
    .
    .
    .
    inputFile.getline (inputFile, inputField1, ",");
} 
```

出于某种原因，我无法弄清楚，使用 g++ 编译它返回

```
error: ‘struct std::ofstream’ has no member named ‘getline’ 
```

此外，作为旁注，它也会产生错误

```
error: invalid conversion from ‘void*’ to ‘char**’
error: cannot convert ‘std::string’ to ‘size_t*’ for argument ‘2’ to ‘ssize_t getline(char**, size_t*, FILE*)’ 
```

但我认为我以错误的方式获得了参数或其他东西。

任何人都可以帮助阐明任何问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T23:41:11.667

在 C++ 中有两个 getline 函数采用分隔符。

一个是在 ifstream 中：

```
istream& getline (char* s, streamsize n, char delim); 
```

另一个是字符串：

```
istream& getline (istream& is, string& str, char delim); 
```

从您的示例看来，您正在期待使用字符串中的那个。

```
#include <string>
#include <sstream>
#include <fstream>
#include <iostream>
using namespace std;

int main() {
  ifstream inputFile;
  string inputField1;

  inputFile.open("hi.txt");

  getline(inputFile, inputField1, ',');

  cout << "String is " << inputField1 << endl;

  int field1;
  stringstream ss;
  ss << inputField1;
  ss >> field1;

  cout << "Integer is " << field1 << endl;

  inputFile.close();

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T23:33:18.163

ofstream 是输出文件流。你需要一个ifstream。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T23:32:33.560

An[`ofstream`](http://en.cppreference.com/w/cpp/io/basic_ofstream)是输出流，因此`getline`方法没有意义。也许你需要[`ifstream`](http://en.cppreference.com/w/cpp/io/basic_ifstream).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T23:32:43.260

An`ofstream`是一个*输出*流，所以它没有任何输入方法。你可能想要`ifstream`：

```
void function() {
    ifstream inputFile("somefilename");
    char buf[SOME_SIZE];
    inputFile.getline (buf, sizeof buf, ',');
} 
```

# jquery - 给一个带有“text-align：center”的div一个“text-align：left”只用于包装的内容

> ID：14637083
> 
> 赞同：8
> 
> 时间：2013-01-31T23:30:28.187
> 
> 标签：jquery, html, css

使用 CSS 或 JQuery（首选 CSS），

是否可以采用 div（100% 宽度），其内容居中，并对齐任何向左环绕的内容？

想象一组以浏览器为中心的图标。如果您减小浏览器的宽度，而不是在第二行的中心显示包装图标，我希望它们左对齐。

我在发布之前尝试过在这里搜索，但找不到与我的问题完全匹配的任何内容。

**更新：**

`word-wrap: pre-wrap;`@Explosion Pills 解决了它，但这里是一个更新的 JSFiddle，它通过添加到外部来解决 IE 和 Chrome 以外的浏览器：http `div`: [//jsfiddle.net/etY4r/2/](http://jsfiddle.net/etY4r/2/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T23:34:35.293

你可以只用 CSS 来做到这一点（而且非常简单）。外部 div 可以是`text-align: center`，内部 div（包含图标）`text-align: left`可以是`display: inline-block`：

[http://jsfiddle.net/ExplosionPIlls/etY4r/](http://jsfiddle.net/ExplosionPIlls/etY4r/)

元素在整个 div的`inline-block`上下文中居中，但是当您将窗口大小减小到足够大时，它将导致元素包裹在内部元素本身的内部并且它们向左对齐。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-12T14:46:48.247

```
 $('.class').css('css property','alignment'); 
```

例子：

```
$(document).ready(function(){
   $('.myClass').css('text-align','left');
   $('.myClass2').css('text-align','center');
   $('.myClass3').css('text-align','right');
}); 
```

.css() 适用于这种格式的任何 css 属性：D

# google-maps-api-3 - 谷歌地图 v3 错误绘制编码折线

> ID：14637088
> 
> 赞同：1
> 
> 时间：2013-01-31T23:30:50.830
> 
> 标签：google-maps-api-3, google-polyline

我有一张地图，用户可以在其中绘制折线，对其进行编码，然后将其保存到 mySQL 数据库中。然后，还有另一个地图从数据库中查询编码字符串，解码折线并将其显示在地图上。

我正在使用`encodePath()`几何库中的函数，如下所示：

```
 if(overlayType == 'POLYGON'){
        newPolygonOverlay = overlaysArray[0];   //only one overlay
        newPolygonPath = newPolygonOverlay.getPath();    //get the path
        newPolygonPathCoordsStr = google.maps.geometry.encoding.encodePath(newPolygonPath);    //encode it 
```

此代码生成如下字符串：

```
 wwzhBz~|gP~mhMygvCt`cDjgiH{ohIf{fA 
```

然后我继续使用*mediumtext*类型将此字符串存储在 mySQL DB 中。

第二张地图，查询数据库以获取编码的折线字符串，这与我最初保存的完全相同。

然后我使用几何库中的解码函数解码字符串并创建折线，如下所示：

```
 var array = google.maps.geometry.encoding.decodePath(str);  //str contains the encoded string from the db
    var levels = decodeLevels("BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB");

    var Poly = new google.maps.Polyline({
      path: array,
      levels: levels,
      strokeColor: '66FF00',
      strokeOpacity: 1.0,
      strokeWeight: 2
    });

    flightPath.setMap(map); 
```

我的问题是，沿途的某个地方，一些折线点搞砸了，生成的折线与原来的不一样。

我尝试在 mySQL 中使用*blob类型。*结果相同。

我尝试通过使用编码字符串在第二个地图上声明一个字符串变量来绕过数据库。结果相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-29T12:57:39.590

（由 OP 在问题编辑中回答。转换为社区 wiki 答案。请参阅[没有答案的问题，但问题在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 问题是 javascript 解释（和删除）反斜杠字符。因此，当编码字符串到达​​数据库时，它不再包含反斜杠，从而使折线成为完全不同的折线。我尝试用双反斜杠替换单个反斜杠：“\”->“\”，但在我对编码函数进行替换之前我遇到了麻烦；像这样：

```
newRoutePathCoordsStr = google.maps.geometry.encoding.encodePath(newRoutePath).replace(/\\/g,"\\\\"); 
```

# android - Android 如何获得两个位图之间的快速差异

> ID：14637093
> 
> 赞同：1
> 
> 时间：2013-01-31T23:31:12.053
> 
> 标签：android, image, performance, android-ndk, bitmapimage

我需要尽快和尽可能高效地在 Android 中获得 2 位图图像之间的差异。我怎样才能做到这一点？该实现可以使用 Java 或 C 使用 NDK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T23:33:38.703

如果您在谈论差异，请[遵循此详细指南](https://stackoverflow.com/questions/613146/computing-the-difference-between-images)。但是，如果您在谈论距离，那么好的 ol' a^2 + b^2 = c^2 就可以了。

# sql - 在 SQL Server 中连接两个表

> ID：14637094
> 
> 赞同：0
> 
> 时间：2013-01-31T23:31:14.780
> 
> 标签：sql, sql-server, database

这两个 SQL 语句给了我如下所示的结果。我需要通过分组来连接它们`MerchantId`，`BatchId`并且`Currency`

我需要一个包含所有这些列的新表

```
MerchantId - BatchId - T1 - T2- NotSold - Sold- Currency 
```

查询：

```
select 
   MerchantId as MerchantId, 
   BatchId as BatchId, 
   COUNT(BatchId)as T1, SUM(Amount) as NotSold, 
   Currency as Currency  
from 
   [Order]
where 
   OrderStatus = 4 and MerchantId = 1
group by 
   BatchId, Currency,MerchantId

select 
   MerchantId as MerchantId, 
   BatchId as BatchId, 
   COUNT(BatchId) as T2, 
   SUM(Amount) as Sold, 
   Currency 
from 
   [Order]
where 
   OrderStatus = 1 and MerchantId = 1 
group by 
   BatchId, Currency,MerchantId 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T23:39:33.557

您将希望将聚合函数与`CASE`表达式一起使用：

```
select MerchantId as MerchantId, 
  BatchId as BatchId, 
  count(case when OrderStatus = 4 then BatchId end) T1,
  count(case when OrderStatus = 1 then BatchId end) T2,
  sum(case when OrderStatus = 4 then Amount else 0 end) NotSold,
  sum(case when OrderStatus = 1 then Amount else 0 end) Sold,
  Currency as Currency  
from [Order] 
where MerchantId = 1
group by BatchId, Currency, MerchantId 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/8a317/2)

使用您的样本数据，结果是：

```
| MERCHANTID | BATCHID | T1 | T2 | NOTSOLD | SOLD | CURRENCY |
--------------------------------------------------------------
|          1 |       1 |  1 |  1 |      11 |   11 |       TR |
|          1 |       2 |  0 |  1 |       0 |   11 |       TR |
|          1 |       3 |  1 |  1 |      11 |   11 |       TR |
|          1 |       4 |  2 |  1 |      22 |   11 |       TR |
|          1 |       1 |  2 |  2 |      22 |   22 |      USD |
|          1 |       2 |  2 |  1 |      22 |   11 |      USD |
|          1 |       4 |  0 |  1 |       0 |   11 |      USD | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T23:38:37.630

假设两个表中的货币相同，并且您想组合上述查询，这样的事情（未经测试）应该可以工作：

```
select O.MerchantId ,
   O.BatchId , 
   COUNT(O.BatchId)as T1, 
   SUM(O.Amount) as NotSold , 
   COUNT(O2.BatchId) as T2, 
   SUM(O2.Amount) as Sold , 
   O.Currency 
from [Order] O
   LEFT JOIN [Order] O2 ON O.MerchantId = O2.MerchantId 
          AND O.BatchId = O2.BatchId 
          AND O.Currency = O2.Currency 
          AND O2.OrderStatus = 1 and O2.MerchantId = 1 
where O.OrderStatus = 4 and O.MerchantId = 1
group by O.BatchId, O.Currency, O.MerchantId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T23:39:54.563

```
SELECT *
FROM t1, t2
LEFT JOIN t1.MerchantId ON t2.MerchantId = t1.MerchantId 
```

然后将其放大以在batchId上执行，并仅选择您想要的列作为结果（而不是*）

# azure - 让多个客户端共享同一个 nservicebus 数据总线通道是否存在问题？

> ID：14637097
> 
> 赞同：0
> 
> 时间：2013-01-31T23:31:25.373
> 
> 标签：azure, nservicebus

这是我的设置：我有一个 azure web 角色和一个 worker 角色，它们都配置为通过 blob 存储使用数据总线通道。我现在需要添加另一个需要数据总线的 Web 客户端。

使用相同的数据总线通道是否可以接受，或者这是否会导致与后台发生的消息清理操作相关的问题？

**更新：** 我在我的网络角色的事件日志中看到此错误：

```
An unhandled exception occurred. Type: Microsoft.WindowsAzure.StorageClient.StorageClientException Process ID: 2968
Process Name: w3wp
Thread ID: 12
AppDomain Unhandled Exception for role My.Assembly.Web_IN_4
Exception: The specified blob does not exist.
   at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.get_Result()
   at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.ExecuteAndWait()
   at Microsoft.WindowsAzure.StorageClient.CloudBlob.FetchAttributes(BlobRequestOptions options)
   at NServiceBus.DataBus.Azure.BlobStorage.BlobStorageDataBus.DeleteExpiredBlobs()
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading._TimerCallback.PerformTimerCallback(Object state)

Inner Exception: The remote server returned an error: (404) Not Found.
   at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at Microsoft.WindowsAzure.StorageClient.EventHelper.ProcessWebResponse(WebRequest req, IAsyncResult asyncResult, EventHandler`1 handler, Object sender) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:21:18.990

我认为您必须使用相同的通道，因为发送者和接收者都必须能够访问它并且您只能配置一个，这意味着它必须被共享。

它不应该导致清理问题，看到任何奇怪的东西吗？如果是这样，请告诉我！

亲切的问候，伊夫

# mysql - 从 Oracle 查询的内容生成 mysql 导入语句的问题

> ID：14637099
> 
> 赞同：0
> 
> 时间：2013-01-31T23:31:47.587
> 
> 标签：mysql, oracle, insert, export

我几乎已经完成了下面的查询，但是 qcare_end 和warranty_end 这两个字段在执行脚本时都生成了一个无效的标识符错误另外 - 我希望使用这个脚本（以及一些类似的脚本）来生成一系列操作这将从我们的 oracle 合同和零件管理数据库中获取一部分数据，并将其喷射到 mysql 数据库中，我们在记录事件时使用该数据库来支持

```
 Select
    'Insert Into mysqldbtable (system_id, customer_code,, serial_no, system_type, description, qcare_end, warranty_end) Values (''' 
    || system_id || ''',''' || customer_code || ''',''' || serial_no || ''',''' || system_type || ''',''' || description ||  ''')'
  FROM (SELECT SYSTEMS.SYSTEM_ID
               --            ,SYSTEMS.SITE_NAME
              , CUSTOMER_ADDRESSES.CUSTOMER_CODE
               --            , CUSTOMER_ADDRESSES.NAME
              , SYSTEMS.SERIAL_NO
              , SYSTEMS.SYSTEM_TYPE
              , PM.DESCRIPTION
               --            ,MAX(EI.END_DATE)
              , TO_DATE(NULL) AS "qcare_end"
              , MAX(systems.warranty_end) AS "warranty_end"
        --            ,systems.warranty_code
          FROM LEO.CUSTOMER_ADDRESSES CUSTOMER_ADDRESSES
               -- , LEO.CUSTOMERS CUSTOMERS
              , LEO.SYSTEMS SYSTEMS
               -- , LEO.EXHIBIT_ITEMS EI
              , LEO.PART_MASTER PM
         WHERE SYSTEMS.ADDRESS_CODE = CUSTOMER_ADDRESSES.ADDRESS_CODE
              -- AND CUSTOMER_ADDRESSES.CUSTOMER_CODE = CUSTOMERS.CUSTOMER_CODE 
              -- AND SYSTEMS.SYSTEM_ID = EI.SYSTEM_ID
           AND SYSTEMS.SYSTEM_TYPE = PM.PART_NO
         GROUP BY SYSTEMS.SYSTEM_ID,
                  SYSTEMS.SERIAL_NO,
                  CUSTOMER_ADDRESSES.CUSTOMER_CODE,
                  CUSTOMER_ADDRESSES.NAME,
                  SYSTEMS.SITE_NAME,
                  SYSTEMS.SYSTEM_TYPE,
                  PM.DESCRIPTION
        HAVING(SYSTEMS.SYSTEM_TYPE NOT IN('COMPLETE', 'ESSENTIAL', 'LOAN DEMO', 'LOAN CUSTOMER', 'MISC', 
        'ORPH-CHILD-SYS', 'ORPH_CHILD_SYS', 'PROD-BOM', 'QCARE', 'QSUPPORT', 'SPARES', 'STANDARD', 'WARRANTY', 'SOFT CARE')) 
        AND (SYSTEMS.SITE_NAME NOT LIKE '%DO NOT USE%' AND CUSTOMER_ADDRESSES.NAME NOT LIKE 'QUANTEL%' AND CUSTOMER_ADDRESSES.NAME NOT LIKE '%LOCATION NOT KNOWN%')
       UNION SELECT SYSTEMS.SYSTEM_ID
               --            ,SYSTEMS.SITE_NAME
              , CUSTOMER_ADDRESSES.CUSTOMER_CODE
               --            , CUSTOMER_ADDRESSES.NAME
              , SYSTEMS.SERIAL_NO
              , SYSTEMS.SYSTEM_TYPE
              , PM.DESCRIPTION
               --            ,MAX(EI.END_DATE)
              , MAX(EI.END_DATE) AS "QCare_End"
              , TO_DATE(NULL) "Warranty_End"
        --            ,MAX(systems.warranty_end)
        --            ,systems.warranty_code
          FROM LEO.CUSTOMER_ADDRESSES CUSTOMER_ADDRESSES
               -- , LEO.CUSTOMERS CUSTOMERS
              , LEO.SYSTEMS       SYSTEMS
              , LEO.EXHIBIT_ITEMS EI
              , LEO.PART_MASTER   PM
         WHERE SYSTEMS.ADDRESS_CODE = CUSTOMER_ADDRESSES.ADDRESS_CODE
              -- AND CUSTOMER_ADDRESSES.CUSTOMER_CODE = CUSTOMERS.CUSTOMER_CODE 
           AND SYSTEMS.SYSTEM_ID = EI.SYSTEM_ID
           AND SYSTEMS.SYSTEM_TYPE = PM.PART_NO
         GROUP BY SYSTEMS.SYSTEM_ID,
                  SYSTEMS.SERIAL_NO,
                  CUSTOMER_ADDRESSES.CUSTOMER_CODE,
                  CUSTOMER_ADDRESSES.NAME,
                  SYSTEMS.SITE_NAME,
                  SYSTEMS.SYSTEM_TYPE,
                  PM.DESCRIPTION
        HAVING(SYSTEMS.SYSTEM_TYPE NOT IN('COMPLETE',  'ESSENTIAL', 'LOAN DEMO', 'LOAN CUSTOMER'
        , 'MISC', 'ORPH-CHILD-SYS', 'ORPH_CHILD_SYS', 'PROD-BOM', 'QCARE', 'QSUPPORT', 'SPARES', 'STANDARD', 'WARRANTY', 'SOFT CARE')) 
        AND (SYSTEMS.SITE_NAME NOT LIKE '%DO NOT USE%' AND CUSTOMER_ADDRESSES.NAME NOT LIKE 'QUANTEL%' AND CUSTOMER_ADDRESSES.NAME NOT LIKE '%LOCATION NOT KNOWN%'))
where ROWNUM <= 10 ORDER BY SERIAL_NO; 
```

这只会返回 10 个结果，看起来很正常 - 但如果我重新添加 qcare 和保修结束日期，它会失败并出现以下错误：

> 65 其中 ROWNUM <= 10 ORDER BY SERIAL_NO; || 系统标识 || ''',''' || 客户代码 || ''',''' || 序列号 || ''',''' || 系统类型 || ''',''' || 说明 || ''',''' ||qcare_end|| ''',''' ||warranty_end|| ''')' * 第 3 行出现错误：ORA-00904：“WARRANTY_END”：标识符无效
> 
> SQL>

我不确定为什么表别名不起作用 - 在常规查询中似乎很好，但当我尝试生成导入语句时，我可以定期将其导入 mysql。

对我所缺少的有什么想法吗？干杯斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:05:15.900

斯科特，

别名不起作用，因为您已将它们放在双引号和混合大小写中（提示：不要这样做）。这意味着您必须以这种方式引用它们：

```
SELECT "qcare" FROM (your_query) 
```

您可能想要这个，这会使您的别名全部大写：

```
, TO_DATE(NULL) AS qcare_end
, MAX(systems.warranty_end) AS warranty_end 
```

和

```
, MAX(EI.END_DATE) AS QCare_End
, TO_DATE(NULL) Warranty_End 
```

从技术上讲，无论如何您都不需要联合后半部分的别名，它是联合的前半部分驱动内联视图的列名。

# ruby-on-rails - 如果条件为内联样式

> ID：14637105
> 
> 赞同：2
> 
> 时间：2013-01-31T23:32:12.893
> 
> 标签：ruby-on-rails, haml

我正在尝试使用 HAML 向元素添加内联样式。
Somwhow，样式没有显示在标签内 - 知道它有什么问题吗？

```
%span.proceed-to-checkout.four.columns.offset-by-six{ :style => (@order.empty? ? 'display: none;' : 'display: inline;)'} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T23:37:47.420

您没有正确关闭最后一个括号。我认为您甚至可以删除它们。尝试：

```
{ :style => @order.empty? ? 'display: none;' : 'display: inline;' } 
```

# java - 找不到可运行的 JAR 文件异常

> ID：14637107
> 
> 赞同：4
> 
> 时间：2013-01-31T23:32:24.093
> 
> 标签：java, embedded-resource

我想知道如何在 Eclipse 中的源包（即 /src/resources/images/ 或 /resources/images/）内部或外部的资源文件夹中创建一个可运行的 JAR，其中包含资源（图片、pdf）。目前，我的资源位于我的 eclipse 项目的源文件夹中，但我也在包中它自己的文件夹中尝试过它。该程序在 Eclipse 中构建和执行良好，但是当我将其导出为可运行的 jar 时，在桌面上运行它时不断收到文件未找到异常。我用这样的字符串声明我的文件

```
private String file =  "src/resources/orderForm.pdf"; 
```

我知道我应该使用 getResourceAsStream()，但由于一些限制，我不能（与文件的保存方式有关，我正在阅读整个 pdf 文件，而不是流）所以我想知道如何将我的文件放入 jar 中的正确位置。如果我在制作完成后将其解压缩，它们总是显示在文件夹之外的顶层。这是我当前项目结构的屏幕截图。为了说明这一点，这个项目在 eclipse 中运行良好，也在 java 构建属性中，源文件夹与所有子文件夹一起在构建路径中，我也尝试在之前的测试中对空的资源文件夹做同样的事情。 ![在此处输入图像描述](../Images/8167318cae3065d70a8c1a467f3ecae5.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T23:43:32.923

您将需要执行 getResourceAsStream，并确保将 pdf 文件构建到 jar 中。由于您将它们放在源文件夹中，因此它们应该。

假设您在 src/resources/orderForm.pdf 下有 pdf，它将以 /resources/orderForm.pdf 的形式出现在 jar 文件中。您将为 /resources/orderForm.pdf 打开一个资源流。

如果您必须有一个诚实至善的文件，那么您需要将 PDF 作为资源流读取的代码，FileOutputStreams 将其输出到一个临时文件，然后使用该文件。或者，您根本无法将 pdf 打包到 jar 中。

```
public class PDFWriter {

public static final String testDir = "C:\\pdftest\\"; 
public static final String adobePath = "\"C:\\Program Files\\Adobe\\Reader 10.0\\Reader\\AcroRd32.exe\"";

public static void main(String[] args){

    try {
        new PDFWriter().run();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public void run() throws Exception {
    InputStream in = this.getClass().getResourceAsStream("/resources/test.pdf");
    new File(testDir).mkdirs();
    String pdfFilePath = testDir + "test.pdf";
    FileOutputStream out = new FileOutputStream (pdfFilePath);
    byte[] buffer = new byte[1024];
    int len = in.read(buffer);
    while (len != -1) {
        out.write(buffer, 0, len);
        len = in.read(buffer);
    }
    out.close();

    Runtime rt = Runtime.getRuntime();
    String command = adobePath + " " + pdfFilePath;
    rt.exec(command);
}

} 
```

文件方式在 eclipse 中起作用的唯一原因是 bin 文件夹是一个真正的文件夹，但是当你构建这个东西时，它都会被压缩到一个 jar 中。

也许对源文件夹有点困惑。如果您有一个名为“src”的源文件夹，则其下的包结构不包含“src”。src/net/whatever/Class.java 在构建时会变成 net/whatever/Class.class。

因此，您可以创建第二个名为“rsrc”（资源）的源文件夹，并在其下放置您的 resources/order.pdf。构建 jar 时，rsrc/resources/order.pdf 将变为 resources.order.pdf。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T23:39:53.783

为了方便从 Eclipse 中导出而不需要经常考虑它，我建议将资源文件夹放在该文件夹下`src`。长话短说，如果你不把它放在你的`src`文件夹中，每次你创建一个 jar 时，你都需要选中`resources`文件夹旁边的框。所以只要把它放在`src`文件夹中，就可以省去一些麻烦。

至于引用文件，我会尝试

```
private String file = "resources/finished.pdf"; 
```

这允许您访问`src/resources/finished.pdf`.

# biztalk - Biztalk 订阅者错误

> ID：14637124
> 
> 赞同：0
> 
> 时间：2013-01-31T23:34:10.677
> 
> 标签：biztalk

**任何人都可以帮我解决这个错误信息吗？**

事件类型：`Error`
事件来源： `BizTalk Server 2006`
事件类别：`BizTalk Server 2006`
事件 ID： `5778`
日期： `1/02/2013`
时间： `7:15:04 AM`
用户： `N/A`
计算机： `BIZTALKSERVER`

描述：
`The Messaging engine failed to process a message submitted by adapter:SQL Source URL:SQL://SQLSERVER/SQLDB/.`

详细信息：

```
The published message could not be routed because no subscribers were found.
This error occurs if the subscribing orchestration or send port has not been enlisted,
or if some of the message properties necessary for subscription evaluation have not 
been promoted. Please use the Biztalk Administration console to troubleshoot this failure. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:22:08.090

而不是检查单个端口等 - 我会通过管理控制台查看订阅作为起点 - 在查看底层订阅时，为什么没有找到匹配订阅的答案有时非常明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:45:46.300

错误的意思是 BizTalk 无法确定该消息的订阅者。因此，您的出发点是检查发送端口或业务流程接收形状过滤器表达式上的订阅设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-08T22:45:57.817

我在已经正常工作 36 个月的系统上收到相同的错误消息。我认为这与我们重新启动主机并发送端口后的孤立消息有关。我刚刚从 Biztalk Group 页面恢复消息 -> 暂停的项目/可恢复 -> 右键单击​​恢复消息。一切都很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-14T10:22:54.813

1.  检查发送端口中的过滤器，即 BTS.ReceivePortName=“您的接收端口名称”。
2.  检查相关的发送端口是否已启动，编排是否使用正确的绑定并启用接收位置
3.  在第 1 步和第 2 步之后，转到平台设置并重新启动您的主机实例。
4.  刷新您的应用程序，现在转到 GroupHub 中的 Suspended messages 并恢复您的 serviceInstance，它应该处于可恢复状态。现在它应该可以工作了。

谢谢玛雅克

# css - CSS - 抓取元素并内联显示它们（绝对定位？）

> ID：14637128
> 
> 赞同：3
> 
> 时间：2013-01-31T23:34:38.333
> 
> 标签：css, position, inline, absolute

我有一个充满 DOM 元素的网页，我想从该页面中取出所有 h3，并在页面顶部彼此相邻地显示它们。问题是——这可能吗？

```
<h3>I want</h3>
    There are tons of other content between them so...
<h3>These headers</h3>
    Keep in mind the're separated by many DOM elements...
<h3>To be displayed</h3>
    Luckily no other h3s between them...
<h3>Inline next to</h3>
    Thank you for trying to help :)
<h3>Each other </h3> 
```

这是我尝试使用绝对定位的jsfiddle，但我很确定采用这种方式会很困难（边距）：

[http://jsfiddle.net/zLbuP/](http://jsfiddle.net/zLbuP/)

我需要代码**至少适用于 IE7**及更高版本，并且**我不能使用任何 JS/jQuery**（不过，使用 jQuery 会很容易）。当然**我也不能编辑 html 本身**。

任何想法，或不可能？;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:33:39.977

您也许可以使用 nth-child；IE

```
h3 { position:absolute; left: 0px; top: 0px; }
h3:nth-child(1) { margin-top: 15px; } 
h3:nth-child(2) { margin-top: 30px; } 
```

但是，IE7 不支持 nth-child，即使你可以让它按照你想要的方式工作，它也很老套。正如其他人所说，在 jQuery 或纯 JS 中很容易做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:34:37.357

用 jQuery/Javascript 做这件事很简单吗？

我只是搞砸了一点，想出了这个：http: [//jsfiddle.net/zLbuP/19/](http://jsfiddle.net/zLbuP/19/)

代码只是从所有 H3 中获取内容，删除它们并创建一个新的组合 H3。

```
//When then DOM is ready
jQuery(document).ready(function($) {
    //Cache the content of the headings to a variable so it may be removed before creating a new H3
    //this allows us to select the new H3 without having to use more complex selectors
    var h3text = $('#WhatIHaveNow h3').text();
    // remove the old H3's now that we have their content
    $('#WhatIHaveNow h3').remove();
    // create a new, empty H3 at the top of the parent div
    $('#WhatIHaveNow').prepend("<h3></h3>");
    //insert our cached content
    $('#WhatIHaveNow h3').text(h3text);

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T15:36:24.633

不幸的是，你无法避免使用 JS。您可以将所有`h3`标签设置为绝对位置并将它们全部放在顶部，但您需要使用 JQuery 来设置它们的边距。我制作了一个小脚本`h3`，根据前一个兄弟的宽度为每个标签动态设置边距：

```
var margin = 0;
$("#TryMe h3").each(function () {
    margin += $(this).prev().width();
    $(this).css("margin-left", margin + "px")
    margin += 20;
}); 
```

你可以在这里看到一个活生生的例子：http: [//jsfiddle.net/VezCA/2/](http://jsfiddle.net/VezCA/2/)

# python - 如何在 GAE 上将 OpenID 登录限制为一个 Google Apps 域（再次）

> ID：14637137
> 
> 赞同：0
> 
> 时间：2013-01-31T23:35:17.433
> 
> 标签：python, google-app-engine, google-openid

我想使用 OpenID 将登录到在 Google App Engine 上运行的 python 应用程序限制为特定 Google Apps 域的成员。

根据线程[How limit Google Federated Login to specific Apps domain？](https://stackoverflow.com/questions/8983934/how-limit-google-federated-login-to-specific-apps-domain) 这可以通过简单地替换普通的 google openid autentication url 来完成

> [https://www.google.com/accounts/o8/id](https://www.google.com/accounts/o8/id)

和

> [https://google.com/accounts/o8/site-xrds?hd=example.com](https://google.com/accounts/o8/site-xrds?hd=example.com)

然而，在 GAE for Python 中使用 users.create_login_url() 似乎不起作用。它会引发 500 服务器错误，该错误未显示在 google 应用程序引擎日志中（日志仅显示重定向和来自 logging.debug 的“OpenID”）。

有人对如何解决这个问题有任何建议吗？

应用程序.yaml

```
application: example
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: /_ah/login_required
  script: main.app

- url: .*
  script: main.app
  login: required 
```

主要.py：

```
import webapp2, logging
from google.appengine.api import users

# Any google account, works like a charm
#federated_identity='https://www.google.com/accounts/o8/id'

# only accounts under spefific domain, does not work
federated_identity='https://google.com/accounts/o8/site-xrds?hd=example.com'

dest_url = 'http://example.appspot.com/'

class Main(webapp2.RequestHandler):
    def get(self):
        logging.debug('Main')
        user = users.get_current_user()
        if user:
            self.response.out.write('Hello %s<p>[<a href="%s">log out</a>]' %  (user.email(),
                    users.create_logout_url(self.request.uri)))
        else:
            self.response.out.write('Not logged in')

class OpenID(webapp2.RequestHandler):
    def get(self):
        logging.debug('OpenID')
        login_url = users.create_login_url(dest_url=dest_url,
            federated_identity=federated_identity)
        self.redirect(login_url)

app = webapp2.WSGIApplication([
    ('/_ah/login_required', OpenID),
    ('/', Main)
], debug=True) 
```

**更新**
Sebastian 建议解决方案可能是对联合身份进行 url 编码。我尝试对整个 url 进行 url 编码，或者按照建议只对问号进行编码。不幸的是，这并没有改变任何东西。重定向网址如浏览器地址栏中所示或写入日志：

没有 url 编码：
[http://example.appspot.com/_ah/login_redir?claimid=https://google.com/accounts/o8/site-xrds?hd=example.com&continue=http://example.appspot。 com/](http://example.appspot.com/_ah/login_redir?claimid=https://google.com/accounts/o8/site-xrds?hd=example.com&continue=http://example.appspot.com/)

使用 url 编码：
[http://example.appspot.com/_ah/login_redir?claimid=https%3A%2F%2Fgoogle.com%2Faccounts%2Fo8%2Fsite-xrds%3Fhd%3Dexample.com&continue=http://example。 apppot.com/](http://example.appspot.com/_ah/login_redir?claimid=https%3A%2F%2Fgoogle.com%2Faccounts%2Fo8%2Fsite-xrds%3Fhd%3Dexample.com&continue=http://example.appspot.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:34:19.273

我认为（我自己还没有测试过）这个问题是因为 federated_identity 没有编码。尝试用 替换问号`%3F`。还要确保网址

```
https://google.com/accounts/o8/site-xrds?hd=example.com 
```

作品。

我做的测试是去url

```
http://testsk2012.appspot.com/_ah/login_redir?claimid=https://www.google.com/accounts/o8/site-xrds%3Fhd=somesite.com&continue=http://testsk2012.appspot.com/ 
```

它成功了。

# c# - 在 streamwriter 、 streamreader 之前使用 using 语句的好处/使用

> ID：14637139
> 
> 赞同：2
> 
> 时间：2013-01-31T23:35:22.800
> 
> 标签：c#, using-statement

> **可能重复：**
> [什么是 C# Using 块，我为什么要使用它？](https://stackoverflow.com/questions/212198/what-is-the-c-sharp-using-block-and-why-should-i-use-it)

所以我刚刚注意到，在 msdn 示例和一些 stackoverflow 问题中，在流写入器等之前使用 using 语句的地方有答案，但实际上有什么好处？因为我从来没有被教导/告诉/阅读过任何使用它的理由。

```
 using (StreamReader sr = new StreamReader(path)) 
            {
                while (sr.Peek() >= 0) 
                    Console.WriteLine(sr.ReadLine());
            } 
```

代替：

```
 StreamReader sr = new StreamReader(path);
            while (sr.Peek() >= 0) 
                Console.WriteLine(sr.ReadLine()); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T23:36:33.477

using 块调用`Dispose`自动使用的对象的方法，好处是保证被调用。因此，无论语句块中是否引发异常，都将处理该对象。它被编译成：

```
{
    StreamReader sr = new StreamReader(path);
    try
    {
        while (sr.Peek() >= 0) 
            Console.WriteLine(sr.ReadLine());
    }
    finally
    {
        if(sr != null)
            sr.Dispose();
    }
} 
```

额外的花括号用于限制 的范围`sr`，因此无法从 using 块的外部访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T23:42:10.940

using 提供了一种方便的语法，可确保正确使用 IDisposable 对象。它被编译成：

```
StreamReader sr = new StreamReader(path);
try 
{
    while (sr.Peek() >= 0) 
        Console.WriteLine(sr.ReadLine());
} finally
{
    sr.Dispose();
} 
```

[如 MSDN 中所述](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T23:38:29.877

using 语句适用于实现 IDisposable 接口的东西。

.net 将保证 StreamReader 将被处置。

您不必担心关闭或进一步管理它：只需在“使用”范围内使用您需要的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T23:40:38.370

它会自动为您调用该`StreamReader.Dispose()`方法。如果您选择不使用该`using`关键字，则在运行代码块后您最终会得到一个开放的流。如果您想保留文件（等）以供继续使用，这是有益的，但如果您不打算在完成后手动处理它，则可能是不好的做法。

# java - 为 Kafka 实现 Spring Integration InboundChannelAdapter

> ID：14637140
> 
> 赞同：0
> 
> 时间：2013-01-31T23:35:36.497
> 
> 标签：java, spring-integration, apache-kafka

我正在尝试在 spring 集成中实现自定义入站通道适配器以使用来自[apache kafka](http://kafka.apache.org/)的消息。基于spring集成示例，我发现我需要创建一个实现MessageSource接口的类并实现receive()方法，该方法将从kafka返回消费的Message。但是基于[kafka 中的消费者示例，](http://kafka.apache.org/quickstart.html) KafkaStream 中的消息迭代器由 BlockingQueue 支持。因此，如果队列中没有消息，则线程将被阻塞。

那么实现 receive() 方法的最佳方法是什么，因为该方法可能会阻塞，直到有东西要消耗..？

在更一般的意义上，我们如何为流式消息源实现自定义入站通道，直到有东西准备好消费......？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T17:12:24.477

receive() 方法可以阻塞（只要底层操作正确响应中断的线程），并且从入站通道适配器的角度来看，根据底层源的期望，最好使用固定的-延迟触发。例如，“长轮询”可以在提供非常小的延迟值时模拟事件驱动的行为。

我们的 JMS 轮询 MessageSource 实现中也有类似的情况。在那里，底层行为由 JmsTemplate 的 receive() 方法之一处理。JmsTemplate 本身允许配置超时值。这意味着，例如，您可以选择最多阻塞 5 秒，然后在每个阻塞接收调用之间有一个非常短的延迟触发。或者，您可以指定无限期接收超时。该决定最终取决于对底层资源、消息吞吐量等的期望。

另外，我想让你知道我们正在自己探索 Kafka 适配器。也许您想在 spring-integration-extensions 存储库中进行协作？

问候，马克

# opengl - 我想声明一个统一数组而不在一个着色器对象中指定它的大小，同时在另一个着色器对象中声明它

> ID：14637141
> 
> 赞同：0
> 
> 时间：2013-01-31T23:35:46.107
> 
> 标签：opengl, glsl, shader

假设以下着色器：

```
uniform float input[]
float do_stuff(int index) {
    return input[index];
} 
```

这段代码使用一些数据做一些事情，而不关心`input`. **但是**，该程序将与另一个着色器链接，该着色器将知道大小并调用它：

```
void do_stuff(int);

uniform float input[3];
void main() {
    gl_FragColor = vec4(do_stuff(input[0]),
                        do_stuff(input[1]),
                        do_stuff(input[2]),
                        1);
} 
```

显然，这段代码很愚蠢，我只是创建它来演示我需要什么。我的真实情况是：“do stuff”着色器访问的数据未预定义，每个“do stuff”着色器都将拥有它自己的数据。此外，“do stuff”着色器不知道它会被调用多少次，所以它的输入是未定义大小的数组。另一方面，“调用者”着色器将在运行时生成，它确切地知道“do_stuff”着色器将使用哪些数据以及有多少。

实际上，“do stuff”着色器是用户提供的，而“caller”着色器将它们混合在一起。

因此，通过对“do stuff”着色器进行一些预处理，我可以使用参数解决我的问题，但这对我来说会变得更加复杂（因为每个“do stuff”着色器都会有不同的函数签名）。如果我可以创建这些未定义尺寸的制服，那就更容易了。

另外，我愿意接受建议...

# jquery - 使用 nth-child 和 .after 在两个 div 之间注入 div？

> ID：14637146
> 
> 赞同：2
> 
> 时间：2013-01-31T23:36:04.627
> 
> 标签：jquery, css-selectors, insertafter

我有一堆 div，它们是通过 PHP 输出的，它们都包含图像。我有一个单独的 div，我想在第 4 个 div 之后注入，但我在实现这一点时遇到了问题。我正在使用 Isotope 对图像/div 进行网格化。

我的 jQuery 的一个例子：

```
$('.each-brewery-image:nth-child(4n)').after('<div>Test</div>'); 
```

我的 HTML 示例：

```
<div class="each-brewery-image">
   <a class="fancybox" rel="gallery1" href="#">
   <span>
       <img width="700" height="524" src="01.jpg" />
   </span>
   </a>
</div>
<div class="each-brewery-image">
   <a class="fancybox" rel="gallery1" href="#">
   <span>
       <img width="700" height="524" src="02.jpg" />
   </span>
   </a>
</div>
<div class="each-brewery-image">
   <a class="fancybox" rel="gallery1" href="#">
   <span>
       <img width="700" height="524" src="03.jpg" />
   </span>
   </a>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T23:39:27.783

`:nth-child(4n)`选择第 5、9、13 等元素。你可能想要`:eq()`：

```
$('.each-brewery-image:eq(3)').after('<div>Test</div>'); 
```

`:eq()`并且`:nth-child()`是零索引`:eq(0)`的，第一项`:eq(1)`也是如此，第二项也是如此，依此类推。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T23:40:17.573

您现有的代码应该可以使用[**nth-child(4n)**](http://api.jquery.com/nth-child-selector/)。

* * *

[**演示**](http://jsfiddle.net/6qyBP/)- 您使用 nth-child(4n) 的原始代码

* * *

但是，如果您希望只在第 4 个元素之后附加新的 div，您应该使用[**eq(3)**](http://api.jquery.com/eq/)代替，否则您可能会得到意想不到的结果。

`eq()`是`0`基于的，因此您需要`eq(0)`用于第一个元素，依此类推。所以第4个是`eq(3)`。

* * *

[**演示**](http://jsfiddle.net/aLnb9/)- 在第四张图片之后插入测试 div 使用`eq(3)`

* * *

根据您的评论，甚至`eq()`似乎不起作用：

> 不幸的是，这没有奏效。可能与PHP首先生成项目有关吗？

一般来说，尝试将您的代码包装到一个[**文档就绪**](http://api.jquery.com/ready/)函数中，以确保代码仅在 DOM 就绪后执行，类似于：

```
$(document).ready(function(){
    $('.each-brewery-image:eq(3)').after('<div>Test</div>');
}); 
```

如果您的代码在通过其他操作加载 DOM 后注入 HTML，则您需要执行所需的代码，这些元素位于 DOM 中以应用更改。

* * *

### 为什么使用`eq(3)`if`nth-child(4)/nth-child(4n)`似乎也有效？

* * *

为了总体完整性，我认为添加此部分可能对遇到此问题的任何未来用户有用，这些用户可能在使用`nth-child()`.

Using`nth-child()` 将匹配调用最后一个元素之前的选择器的**所有**`nth-child()`元素。

**nth-child(x) - 不使用`n`**

例如，如果您有 2 个，每个都有`ul`几个`li`，那么`$('ul li:nth-child(2)')`将选择**两个** `ul`s 中的第二个元素。这将与`$('li:eq(1)', 'ul')`.

* * *

[**DEMO**](http://jsfiddle.net/tcq4P/)`ul` -使用`$('ul li:nth-child(2)')`
[**DEMO**](http://jsfiddle.net/6FA3b/)选择每个元素中的第二个元素- 与上面使用相同的结果`$('li:eq(1)', 'ul')`

* * *

**nth-child(xn) - 使用`n`**

`$('ul li:nth-child(2n)')`另一方面，使用将在两个s中每秒匹配**一次。**那是因为它像计数器一样使用。`li``ul``n`

* * *

[**演示**](http://jsfiddle.net/yCyEA/)- 选择每个`ul`使用`$('ul li:nth-child(2n)')`

* * *

# .net - wcf 实例变量被单独的实例更改

> ID：14637149
> 
> 赞同：0
> 
> 时间：2013-01-31T23:36:08.137
> 
> 标签：.net, wcf, concurrency

我有一个配置为的 wcf：

```
ConcurrencyMode = ConcurrencyMode.Multiple,
InstanceContextMode = InstanceContextMode.PerSession 
```

我有一个全局定义的变量，我希望在整个会话期间保持它的值并且它保持那个值。

我有一个实例初始化这个变量并保存它的值（比如 123） 我有另一个实例初始化这个变量并保存它的值（比如 456）

但是，第二个实例初始化变量后，第一个实例（会话）的值变成了456！！没想到！！

我在这里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T06:17:04.107

它应该可以正常工作 - 重新检查您的代码，如下所示。

服务合约：

```
[ServiceContract]
public interface IService1
{       
    [OperationContract]
    string GetData();      
} 
```

服务实施

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession, ConcurrencyMode = ConcurrencyMode.Multiple)]
public class Service1 : IService1
{
    int i = 0;

    public string GetData()
    {
        i++;
        return string.Format("Instance number: {0}", i);
    }       
} 
```

现在用相同的实例调用服务将从 GetData 给出递增的**“int i”**值，但对于新实例，它将从 1 开始。

请参阅以下来自客户的电话

```
using (var client = new HttpProxy.Service1Client("NetTcpBinding_IService1"))
{
    Console.WriteLine("Response {0}", client.GetData());
    Console.WriteLine("Response {0}", client.GetData());
}

using (var client2 = new HttpProxy.Service1Client("NetTcpBinding_IService1"))
{
    Console.WriteLine("Response {0}", client2.GetData());
    Console.WriteLine("Response {0}", client2.GetData());
}

using (var client = new HttpProxy.Service1Client("WSHttpBinding_IService1"))
{
    Console.WriteLine("Response {0}", client.GetData());
    Console.WriteLine("Response {0}", client.GetData());
} 
```

使用 CreateChannel 创建代理实例

```
var binding = new NetTcpBinding();
                    var address = new EndpointAddress("net.tcp://localhost:8523/Service1");
                    var channelFactory = new ChannelFactory<WcfServLib.IService1>(binding, address);

                    WcfServLib.IService1 proxy = channelFactory.CreateChannel();

                    Console.WriteLine(proxy.GetData());
                    Console.WriteLine(proxy.GetData());

                    channelFactory = new ChannelFactory<WcfServLib.IService1>(binding, address);
                    proxy = channelFactory.CreateChannel();

                    Console.WriteLine(proxy.GetData());
                    Console.WriteLine(proxy.GetData());

                    channelFactory.Close(); 
```

服务实施

```
 [ServiceBehavior(InstanceContextMode= InstanceContextMode.PerSession, ConcurrencyMode = ConcurrencyMode.Multiple)] public class Service1 : IService1 { int i = 0; public string GetData()
    {
        return string.Format("SessionID:{0}, Local variable i:{1}", OperationContext.Current.SessionId, i++);
    }        
} 
```

# ios - 查看 iPad/iPhone 的文件系统以验证保存的文件

> ID：14637150
> 
> 赞同：11
> 
> 时间：2013-01-31T23:36:11.897
> 
> 标签：ios, filesystems, sandbox

我希望能够查看我的实际 iPad/iPhone 的文件系统，以验证文件是否正确写入。我可以通过导航到 Users/ *me* /Library/Application Support/iPhone Simulator/6.0/Applications/ *specific app* /Documents 来使用模拟器执行此操作。在这里，我可以看到我在应用程序中写入的所有文件和数据。

**如果有人知道一个应用程序或以某种方式查看我的应用程序的文件系统而无需越狱**，我将非常有帮助

 **提前致谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T23:50:09.543

看看 iExplorer： http: [//www.macroplant.com/iexplorer/](http://www.macroplant.com/iexplorer/)

另外，看看这个问题： [https ://apple.stackexchange.com/questions/54682/easyest-way-to-browse-iphone-filesystem](https://apple.stackexchange.com/questions/54682/easiest-way-to-browse-iphone-filesystem)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-24T07:06:45.120

强烈推荐[iFunbox ，在](http://blog.i-funbox.com/?p=836)[这里](http://lifehacker.com/5914638/the-best-desktop-file-explorer-for-iphone)看看 LifeHacker 的评论。易于使用，您甚至可以通过 WiFi 访问您的 iPhone。也不需要越狱。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-09T00:42:34.553

您应该尝试 DiskAid：[http](http://www.digidna.net/diskaid) ://www.digidna.net/diskaid ，它比 iExplorer 好得多。您可以通过 Wi-Fi 和 USB 连接到您的 iPhone 或 iPad，并浏览您的 iOS 文件系统、应用程序沙箱，它支持多个设备和同时传输文件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-31T23:41:32.163

我几乎 100% 肯定，如果没有越狱，这是不可能的（至少不是在设备 itlsef 上）。如果它在模拟器上工作，那么它应该在实际设备上正确保存。如果您需要验证它，只需从您的应用程序中读取文件，并将其转换为 NString，然后 NSLog 即可。

然后你就会知道它是否有效。

干杯。

编辑

当然，正如其他人所提到的，有 iExplorer，但您必须在 Mac 上查看文件。而且它不会显示系统文件。**

# mysql - mysql复杂查询

> ID：14637153
> 
> 赞同：-1
> 
> 时间：2013-01-31T23:36:35.557
> 
> 标签：mysql

我的应用中有一个出价表，我需要计算过去 6 个月内每位用户的平均出价数。表信息如下：

```
 `bid_id` int(10) 
  `catalog_item_id`
  `customer_id` int(10)  
  `amount` decimal(9,2)  
  `date_modified` datetime 
```

所以基本上我需要使用 a`where date_modified > "2012-07-31"`来限制过去 6 个月，然后以某种方式按每 6 个月分组，1）计算出价和有多少用户出价，然后我会计算出我们的总投标人的平均值.

这甚至有意义吗？我的方法错了吗？任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:08:08.990

试试这个：

```
SELECT COUNT(`bid_id`) `bids_per_month`, 
       COUNT(DISTINCT `customer_id`) `bidders_per_month`, 
       COUNT(`bid_id`)/COUNT(DISTINCT `customer_id`) `avg_per_month`,
       YEAR(`date_modified`) `year`, MONTH(`date_modified`) `month` 
  FROM bids
 WHERE DATE(`date_modified`) > DATE_SUB(CURDATE(), INTERVAL 6 MONTH)
 GROUP BY `year`, `month` 
```

明明`DATE_SUB(CURDATE(), INTERVAL 6 MONTH)`可以换成静态日期`'2012-07-31'`

# python - 对 zip 对象列表执行 len 会清除 zip

> ID：14637154
> 
> 赞同：14
> 
> 时间：2013-01-31T23:36:35.793
> 
> 标签：python, python-3.x

使用 zip() 函数时，我看到一个奇怪的行为。当我执行以下操作 len(list(z)) 其中 z 是一个 zip 对象时，结果为 0（这对我来说似乎是错误的），并且该操作似乎清除了 zip 对象。有人可以帮我了解发生了什么。

```
# python3
Python 3.2.3 (default, Sep 30 2012, 16:41:36) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> w = [11, 22, 33, 44, 55, 66]
>>> x = [1, 2, 3, 4]
>>> y = ['a', 'b', 'c']
>>> z = zip(x, y, w)
>>> z
<zip object at 0x7f854f613cb0>
>>> list(z)
[(1, 'a', 11), (2, 'b', 22), (3, 'c', 33)]
>>> len(list(z))
0
>>> list(z)
[]
>>> z
<zip object at 0x7f854f613cb0>
>>> 
```

谢谢你，艾哈迈德。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-31T23:45:32.570

在 Python 3[中，zip 是一个生成器](http://docs.python.org/3/library/functions.html#zip)。当你这样做时，发电机正在耗尽`list(z)`。您可以从生成器返回的值创建一个列表并对其进行操作。

```
l = list(z)
len(l)
# -> 3
l
# -> [(1, 'a', 11), (2, 'b', 22), (3, 'c', 33)] 
```

* * *

[发电机](http://wiki.python.org/moin/Generators)是个好东西。它们允许我们以几乎与编写处理列表的代码相同的方式编写内存高效代码。要使用链接 wiki 中的示例：

```
def double(L):
    return [x*2 for x in L] 
```

可以重写为生成器以避免在内存中创建另一个列表：

```
def double(L):
    for x in L:
        yield x*2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-31T16:35:08.403

为了完成前面的答案，有一个 Python 库调用`cardinality`来获取可迭代对象的大小。

http://cardinality.readthedocs.io/en/latest/

# python - Python for 循环没有从列表中迭代“0”

> ID：14637155
> 
> 赞同：2
> 
> 时间：2013-01-31T23:36:54.320
> 
> 标签：python, list, for-loop, iteration

Python for 循环没有从列表中迭代“0”！

我试图制作一个代码来将输入分成数字和字母（或运算符）：

```
g='10+10+20x'

t=[]
for each_g in g:
    t.append(each_g)

lol=[]
a=[]
for each_t in t:
    if each_t.isdigit():
        lol.append(each_t)
        x = t.index(each_t)
        t.pop(x)
    else:
        lol = ''.join(lol)
        a.append(lol)
        a.append(each_t)
        lol=[]
print(a) 
```

所需的输出将是：

```
['10', '+', '10', '+', '20', 'x'] 
```

但它打印

```
['1', '+', '1', '+', '2', 'x'] 
```

反而。

代码是否有任何问题或更好的解决方案使其按预期工作？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T23:40:39.403

不要修改您正在迭代的序列。`pop`在您处理它之前，每个人都在将一个字符向下移动。

在这种情况下，由于您`t`完成后没有使用，因此根本不需要`pop`- 它是多余的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T23:46:03.997

这是另一种方法（因为您的代码已经被其他人彻底讨论过）：

```
In [38]: import re

In [39]: g='10+10+20x'

In [40]: re.findall('(\d+|[a-zA-Z]+|\+)',g)
Out[40]: ['10', '+', '10', '+', '20', 'x'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T23:46:40.470

在迭代时编辑列表（或任何其他可迭代）是一个可怕的想法。

以下是迭代列表的工作原理：

当您说 时`for each_t in t`，实际发生的是依次生成了一个数字序列；首先`0`，然后`1`等等，一直到`len(t)-1`. 然后迭代器获取该索引处的元素并将其分配给`each_t`.

当您从该列表中弹出时，您正在消除索引。因此，过去在索引 3 处的内容现在在索引 2 处（如果您在小于 3 的索引处弹出某些内容）。然后发生的是迭代器访问下一个数字的元素。但是由于元素本质上已经向下移动了一个索引，所以当迭代器请求 index 处的元素时`i`，它的意思是“给我曾经在 index 处的元素`i`”。相反，它得到的是“当前位于 index 的元素`i`，这确实是曾经位于 index 的元素`i+1`”。

这就是为什么在迭代列表时从列表中删除元素时跳过元素的原因

# javascript - 如何取消设置 _id 主干模型属性？

> ID：14637156
> 
> 赞同：0
> 
> 时间：2013-01-31T23:37:08.670
> 
> 标签：javascript, backbone.js, backbone-model

我想从模型实例中获取属性，`unset()`使用**模型方法****发出****请求**。`_id`**`POST``save()`**

但我得到了`Uncaught TypeError: Object [object Object] has no method 'call' backbone-min.js`因为这条线：

```
myModel.unset('_id'); 
```

我正在使用`idAttribute: "_id"`，所以我尝试了：

```
myModel.unset('id'); 
```

但它不会取消设置`_id`属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T23:53:22.220

使用`model.unset('_id')`应该可以正常工作。我的猜测是错误是由`change`事件侦听器引发的，无论是在您的代码中还是在某些库代码中。为了不触发事件，您可以使用该`silent:true`选项。

但是，如果您只是想强制`model.save()`方法执行 a `POST`，则无需取消设置该`_id`属性。

而是覆盖该[`model.isNew`](http://backbonejs.org/#Model-isNew)方法。Backbone 使用它来确定模型是新的（应该`POST`编辑）还是现有的（应该是`PUT`）。覆盖始终返回 true 的方法将使您的模型`POST`每次都被编辑：

```
isNew: function() { return true; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:52:19.960

Backbone 将属性存储在模型中调用的对象`attributes`中。属性`_id`虽然代表该模型的 ID，但并不用于确定模型是否为新模型。

有一个名为(sibling of ) 的*属性*，用于进行确定。`id``attributes``isNew()`

如果要强制 a `POST`，则需要删除该`id`属性：

```
var id = model.id;
model.unset('_id');
delete model.id;
model.save(); // this will do a POST 
```

# objective-c - 从 NSString 创建 NSDate。

> ID：14637157
> 
> 赞同：-1
> 
> 时间：2013-01-31T23:37:20.817
> 
> 标签：objective-c, cocoa-touch, ios6, null, nsdateformatter

我已经在文本文件中存储了一个日期，我可以正确地读出它。这个字符串的输出是

“下午 6:00”

就这样。但是，当我这样做时：

```
//First, set the first datePicker
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];

     NSString *breakfastTimeStartLocation = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@"breakfastTimeStart.txt"];

    NSString *time = [NSString stringWithContentsOfFile:breakfastTimeStartLocation encoding:NSUTF16StringEncoding error:nil];
    NSLog(@"Loaded time is %@", time);
    NSDate *startDate = [dateFormatter dateFromString:time];

    NSLog(@"Start Date = %@", startDate); 
```

在此，`time`返回`"6:00 PM"`，但`startDate`返回`"(null)"`

我一定错过了一些东西，为什么这在世界上不起作用？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:53:06.503

我相信问题在于您从未设置日期格式。即使这不是唯一的问题，它也可能是一个。尝试类似：

```
 [dateFormatter setDateFormat:@"MM/dd/YYYY"]; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-31T23:39:37.713

这不是初始化 an 的正确方法`NSDateFormatter`，指定的初始化程序是`initWithDateFormat:allowNaturalLanguage:`

因此：

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc]
initWithDateFormat:@"h:mm a" allowNaturalLanguage:NO]; 
```

# php - 有没有办法在使用 HTML、JavaScript 和 CSS 构建的 Web 应用程序中识别孤立类？

> ID：14637158
> 
> 赞同：8
> 
> 时间：2013-01-31T23:37:21.363
> 
> 标签：php, javascript, html, css

我一直在尝试深入研究 Web 开发。这个过程的一部分是在我的网站上逐步调整内容，尝试通过每次增量更改来学习新的东西。

我遇到的问题是，随着网站的发展，我最终会取消并向我的 HTML 元素添加新类。显然，当我在我的 HTML 中创建这些选择器时，我会在我的 JavaScript 或我的 CSS 中定位它们，但我经常会返回并删除元素。这会在我的 JavaScript 和 CSS 中留下对这些选择器的孤立引用，以及 HTML 中不必要/未引用的类和 id。

我的问题是，是否有一些实用程序可用于在我的 CSS、HTML 和 JavaScript* 中识别这些孤立的选择器，以便我可以安全地清理这些文件？到目前为止建议的解决方案非常适合在我的 CSS 中查找不必要的选择器，但似乎无助于在我的 HTML 中识别不必要的类或 ID，这也是我想做的事情。有什么东西可以像描述的那样双向工作吗？

*听起来 JavaScript/JQuery 有方法，但就我的目的而言，我的 JavaScript 足够干净，我可以在没有帮助的情况下清理它，所以如果重点放在 CSS 和 HTML 上就可以了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T23:40:01.153

对于 CSS，有一个 Firefox 扩展可以在页面上找到未使用的 CSS 选择器。它可以选择蜘蛛整个站点。版本 3.01 应该适用于较新版本的 Firefox。

[https://addons.mozilla.org/en-US/firefox/addon/dust-me-selectors/](https://addons.mozilla.org/en-US/firefox/addon/dust-me-selectors/)

这是另一种选择。

[https://addons.mozilla.org/en-US/firefox/addon/css-usage/](https://addons.mozilla.org/en-US/firefox/addon/css-usage/)

对于 Javascript，你几乎是靠你自己的。如果您使用的是 jquery，您可以覆盖 $() 函数在该函数内调用 jQuery() 并检查/记录从 jQuery 返回的值，以确保所有选择器都返回一些结果。但它不是一种确定性的做事方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T23:40:31.920

我使用[Dust-Me 选择器](http://www.brothercake.com/dustmeselectors/)（官方网站）在我的代码中查找孤立的选择器。适用于 Firefox 和 Opera，不幸的是我不认为它可以搜索 JS 或 PHP 代码，但会搜索 HTML 输出。

# asp.net-mvc - Orchard 中的 HandleError 属性

> ID：14637163
> 
> 赞同：2
> 
> 时间：2013-01-31T23:37:59.073
> 
> 标签：asp.net-mvc, error-handling, themes, orchardcms

我在 Orchard 模块中使用 HandleError 属性。我想在发生特定异常时向用户显示自定义视图。我正在使用这段代码：

```
[HttpPost, Themed]
[HandleError(ExceptionType = typeof(LogOnException), View = "LogonError")]
public ActionResult LogOn(FbUser user)
{
  ... 
```

目前它可以工作，但视图是在没有主题的情况下呈现的。有没有办法在当前主题中渲染？谢谢

# c - 获取另一个正在运行的进程的输入/输出 [C, perl]

> ID：14637164
> 
> 赞同：0
> 
> 时间：2013-01-31T23:37:59.620
> 
> 标签：c, linux, perl

我想知道是否可以从我的 C 应用程序中启动 Linux 应用程序并能够读取数据并将数据输入到该启动的程序中。我应该研究哪些功能才能做到这一点。我知道我可以使用`popen()`C 打开应用程序并获取详细信息，但我希望能够长时间输入/输出到此应用程序（我要与之交互的应用程序询问详细信息和是/否答案直到它的任务完成）。我想做一个前端应用程序，它连接到像 IRC 这样的聊天平台，并能够从 IRC 或我使用的任何其他协议控制远程应用程序。如果可能的话，我想要任何用 Perl 或 C 编写的示例。感谢您提供任何详细信息或指向我可以使用的其他类似项目的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:01:17.187

我建议使用 Perl 解决方案，[`IPC::Open2`](https://metacpan.org/module/IPC%3a%3aOpen2)如[`Bidirectional Communication with Another Process`](http://perldoc.perl.org/perlipc.html#Bidirectional-Communication-with-Another-Process). `perldoc perlipc`大纲看起来像这样

```
use IPC::Open2;

my($chld_out, $chld_in);
my $pid = open2($chld_out, $chld_in, 'some cmd and args'); 
```

之后你可以

```
print $child_in "Input to child process\n";
my $response = <$chld_out>; 
```

# jquery - HTML表格jQuery：如果TH具有唯一的数据属性值，则确定单击单元格时单击了哪一列

> ID：14637166
> 
> 赞同：2
> 
> 时间：2013-01-31T23:38:05.093
> 
> 标签：jquery, html-table, custom-data-attribute

如果一个表是这样定义的：

```
 <colgroup>
             <col style="width:100px;">
             <col style="width:100px;">
            </colgroup>
            <thead>
             <th class="foo" data-info="zipcode10023">
             <th class="foo" data-info="zipcode60602">
            </thead> 
```

这样自定义属性中的值`data-info`是*唯一的*，当单击表中的单元格时，确定单击了哪一列的最有效方法是什么（即为了获取数据信息值，例如“zipcode60606”） ?

编辑：单击的单元格左侧可能有不可见的列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T23:41:36.980

假设在单元格上检测到点击：

```
$('td').click(function(){
    var col = $(this).index(),
        dataInfo = $('thead th').eq(col).attr('data-info');
        /* or:
        dataInfo = $('thead th').eq($(this).index()).attr('data-info');
           or:
        dataInfo = $('thead th').eq($(this).index()).data('info');
        */
}); 
```

[JS Fiddle 演示使用：`$('thead th').eq(col).attr('data-info')`](http://jsfiddle.net/davidThomas/HAAZu/5/) .

[JS Fiddle 演示使用：`$('thead th').eq($(this).index()).attr('data-info')`](http://jsfiddle.net/davidThomas/HAAZu/6/) .

[JS Fiddle 演示使用：`$('thead th').eq($(this).index()).data('info')`](http://jsfiddle.net/davidThomas/HAAZu/7/) .

当然，您可以将事件处理程序放在祖先元素上，例如`tr`，使用以下任一方法：

```
$('tr').click(function (e) {
    var dataInfo = $('thead th').eq(e.target.cellIndex).data('info');
    console.log(dataInfo);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/HAAZu/3/)。

（请注意，通常情况下，`event.target`不一定是跨浏览器兼容的，Internet Explorer 可能需要（在 jQuery 之外）一个替代方案：`window.event.srcElement`，但是 jQuery 将事件标准化，因此 IE 不仅会读取/“理解” `event`（而不是require`window.event`代替）但它也可以访问 normalized `event.target`。）

或者，[要使用足够的 jQuery](http://www.doxdesk.com/img/updates/20091116-so-large.gif)：

```
$('tr').on('click', 'td', function (e) {
    var dataInfo = $('thead th').eq($(this).index()).data('info');
    console.log(dataInfo);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/HAAZu/4/)。

以同样的方式，`click`也可以绑定到`table`元素：

```
$('table').click(function (e) {
    var dataInfo = $('thead th').eq(e.target.cellIndex).data('info');
    console.log(dataInfo);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/HAAZu/8/)。

参考：

*   [`attr()`](http://api.jquery.com/attr/).
*   [`click()`](http://api.jquery.com/click/).
*   [`data()`](http://api.jquery.com/data/).
*   [`eq()`](http://api.jquery.com/eq/).
*   [`index()`](http://api.jquery.com/index/).
*   [jQuery`event`对象](http://api.jquery.com/category/events/event-object/)。
*   [`on()`](http://api.jquery.com/on/).

# vb.net - 使用 linq 从数据表中选择一列

> ID：14637167
> 
> 赞同：1
> 
> 时间：2013-01-31T23:38:05.880
> 
> 标签：vb.net, linq, datatable

目前我正在使用 sql 并点击数据库来填充下拉列表。

```
Dim sqlStatement = "SELECT DISTINCT IMLOCN FROM table order by IMLOCN desc"
    LocationDropDown.DataSource = DB.sql(dbSalesWeb, sqlStatement)
    LocationDropDown.DataTextField = "IMLOCN"
    LocationDropDown.DataBind()
    LocationDropDown.Items.Insert(0, "ALL") 
```

DB 是一个自定义类，sql 返回一个 Datatable。我想在已经有 IMLOCN 的数据表上使用 linq

```
 Protected Sub updateDropDowns(ByVal dt As DataTable)

    Dim location = From u In dt.Rows _
                        Select u("IMLOCN") _
                        Distinct

    LocationDropDown.DataSource = location.ToList
    LocationDropDown.DataBind()

End Sub 
```

我已经尝试过 `dt.AsEnumerable()` ，`Dim location = From u In dt.AsEnumerable _ Select u.Field(Of String)("IMLOCN") _ Distinct` 我希望能够使用 linq，我想了解更多关于它的信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T01:24:25.170

不知道你得到什么错误，但这个查询应该可以正常工作：

```
Dim qLocation = (From u In dt.AsEnumerable() _
                Select u.Field(Of String)("IMLOCN")).Distinct()
LocationDropDown.DataSource = qLocation.ToList()
LocationDropDown.DataBind() 
```

# c# - 获取 VPN IP 地址

> ID：14637169
> 
> 赞同：3
> 
> 时间：2013-01-31T23:38:11.053
> 
> 标签：c#, vpn, network-interface

如何从 PPP 或 PPPT vpn 连接中获取 ip？

我知道 VPN 连接的名称，那么我该如何过滤

```
var nics = NetworkInterface.GetAllNetworkInterfaces(); 
```

只获取名称为“VPNConnection”的vpn接口，并获取给定的IP地址？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T23:43:50.117

也许：

```
using System.Linq;

var vpn = NetworkInterface.GetAllNetworkInterfaces()
                          .First(x => x.Name == "VPNConnection"); 
```

编辑：哎呀我没有完成：

```
var ip = vpn.GetIPProperties().UnicastAddresses.First(x => x.Address.AddressFamily == System.Net.Sockets.AddressFamily.InterNetwork).Address.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-27T10:59:06.567

我已经为这个案子提出了申请。使用带有以下命令的批处理文件，我创建了一个执行 .bat 文件并将 ip 存储在变量 ip 中的进程

```
 //make a batch file and write this in it
        File.WriteAllText(FolderPath + "\\getip.bat", "@echo off \r\n FOR /F \"tokens=1-6 delims=:. \" %%a in ('netsh int ip show address \"SanadConnectVPN\" ^|find \"IP Address\"') do set IP=%%c.%%d.%%e.%%f \r\n echo %IP%");

        var newProcess = new Process
        {
            StartInfo =
            {
                FileName = FolderPath + "\\getip.bat",
                WindowStyle = ProcessWindowStyle.Normal
            }
        };
        newProcess.StartInfo.RedirectStandardOutput = true;
        newProcess.StartInfo.UseShellExecute = false;
        newProcess.Start();
        string ip = newProcess.StandardOutput.ReadToEnd();
        newProcess.WaitForExit();
        MessageBox.Show(ip);
        return ip 
```

# jquery - 加载ajax html后调用jQuery函数

> ID：14637170
> 
> 赞同：2
> 
> 时间：2013-01-31T23:38:13.243
> 
> 标签：jquery, ajax, function, call

所以我将这 2 个 jQuery 函数存储在一个 .js 文件中，并且 .js 文件在 head 标签之前加载

.js 文件中的内容：

```
$(document).ready(function(){

    $("#button1").click(function(){
        $.ajax({
            type: 'GET',
            url: 'button2.php',
            success: 
                function(html){
                    $('#button_div').html(html)
                }
            ,
        });     
    });

    $("#button2").click(function(){
        $.ajax({
            type: 'GET',
            url: 'button1.php',
            success: 
                function(html){
                    $('#button_div').html(html)
                }
            ,
        });     
    });

}); 
```

所以在身体之后我有：

```
<div id="button_div"><input type="button" id="button1" value="Press"></div> 
```

当 button1 被按下时将加载名为 button2.php 的 php 文件，其中包含 div 和 button2 代码，但这里当 button2 被按下时不会执行 button2 的单击功能。

为什么？

如果我将 button2 的 jQuery 代码放在 button2.php 文件之后，元素就可以正常工作。但我不想那样。我想将 jQuery 行仅保存在 .js 文件中且仅在`</head>`标记之前。我不想在元素之后使用 jQuery 行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T23:46:01.883

当你调用`$("#button2").click()`,`#button2`还不存在，所以你什么都没有调用它。为了使点击事件起作用，您需要像这样使用事件委托（即绑定到*存在*的元素）：

```
$(document).on('click', '#button2', function () { 
```

然后，任何时间`#button2`都被添加，单击它会触发该事件回调。

（我`document`以此为例，但尝试使用更接近的祖先`#button2`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T23:44:56.317

它不起作用，因为您的选择器在您第一次调用它时不会返回元素。`$('#button2')`只调用一次并且不监视 DOM 的变化。

改用事件委托语法：

```
$('#parent').on('click', '#button2', function() {
    ...
}); 
```

您的 AJAX 请求也可以简化一点：

```
$("#button1").click(function() {
    $('#button_div').load('button2.php');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T23:45:28.500

你能发布我假设的button1.php和button2.php的内容吗

button1.php=

```
<input type="button" id="button2" value="Press"> 
```

button2.php=

```
<input type="button" id="button1" value="Press"> 
```

?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T23:45:43.397

在你里面 button1 点击功能：

```
$("#button1").click(function(){
    $.ajax({
        type: 'GET',
        url: 'button2.php',
        success: 
            function(html){
                $("#button_div").html(html) // You forgot pass the selector as a string
            }
        ,
    });     
}); 
```

这可能会解决您的问题。此外，如果在创建元素之前调用了 jQuery（记住它是自上而下的），它将不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T23:46:50.477

这是因为`#button2`在您创建点击处理程序时页面上不存在。您需要使用`on()`它对委托事件的支持来完成您想要做的事情。

```
$(document).on('click', '#button2', function() {
    $.ajax({
        type: 'GET',
        url: 'button1.php',
        success: 
            function(html){
                $('#button_div').html(html)
            }
    });     
}); 
```

理想情况下，您可以在创建`#button2`包含`#button2`您可以将事件处理程序附加到而不是`document`.

# caching - 如何（http？）缓存转发的请求/响应？

> ID：14637173
> 
> 赞同：0
> 
> 时间：2013-01-31T23:38:29.460
> 
> 标签：caching, symfony, symfony-2.1

我有这个控制器方法需要调用许多其他方法（有时在其他控制器中）`$response = $this->forward()`以生成更大的响应。

您将如何缓存所有这些响应？

例如，每个方法都应该处理自己的缓存吗？如果其他方法也需要该方法，甚至作为独立方法，那将是很好的。

无论哪种方式，我该怎么做？我猜http缓存在这种情况下不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T06:43:13.413

您可以使用 SonataCacheBundle 作为缓存提供者，并替换 forward 方法：

默认示例：

```
<?php

namespace Acme\DemoBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;

/**
 * Controller class
 */
abstract class BaseController  extends Controller
{
    /**
     * {@inheritDoc}
     */
    public function forward($controller, array $path = array(), array $query = array())
    {
        // Create a cache key
        $key = $controller . md5(serialize($path)) . md5(serialize($query));

        $cacheProvider =// Get cache provider (Can SonataCacheBundle)

        if (false !== $data = $cacheProvider->get($key)) {
            return $data;
        }

        $data = parent::forward($controller, $path, $query);
        $cacheProvider->set($key, $data, time() + 3600);

        return $data;
    }
} 
```

# mysql - 将时间戳插入shell中的mysql列

> ID：14637177
> 
> 赞同：2
> 
> 时间：2013-01-31T23:38:52.977
> 
> 标签：mysql, linux, bash, shell, unix

以下对我有用：

```
mysql -u 'root' -h 8.8.8.88 mo -e 'UPDATE `path_last_updated` 
    SET timestamp="2012-01-03 00:00:00"' 
```

但是，以下内容不会：

```
TIMESTAMP=`date "+%Y-%m-%d-%T"`
mysql -u 'root' -h 8.8.8.88 mo -e 'UPDATE `path_last_updated` 
    SET timestamp=$TIMESTAMP' 
```

如何将 unix 中的时间戳插入到我的 mysql 表中？

**更新**：

```
TIMESTAMP=`date "+%Y-%m-%d %T"`
mysql -u 'root' -h 8.8.8.88 mo -e "UPDATE `path_last_updated` 
    SET timestamp='$TIMESTAMP'"

ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual 
that corresponds to your MySQL server version for the right syntax to use near 'SET 
timestamp='2013-01-31 15:46:00'' at line 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T23:41:43.897

Shell 变量插值[仅在双引号 (") 之间起作用，而不是单引号 (')](https://stackoverflow.com/questions/6697753/difference-between-single-and-double-quotes-in-bash)。您还在那里有反引号，在双引号字符串中将被视为嵌入式 shell 命令。

尝试：

```
mysql -u 'root' -h 8.8.8.88 mo -e "UPDATE \`path_last_updated\`
    SET timestamp='$TIMESTAMP'" 
```

此外，您的日期命令格式中有一个额外的破折号 (-)，位于 %d 和 %T 之间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T23:57:43.423

`ALTER TABLE`为了更容易：

```
ALTER TABLE path_last_updated ADD date_entered timestamp DEFAULT CURRENT_TIMESTAMP 
```

然后在外壳中：

```
mysql -u 'root' -h 8.8.8.88 mo -e "UPDATE path_last_updated SET timestamp=DEFAULT" 
```

# r - R中glmm显着相互作用的简单效果测试

> ID：14637181
> 
> 赞同：1
> 
> 时间：2013-01-31T23:39:23.780
> 
> 标签：r, glm

我的 glmm 输出中有显着的交互，并且我知道我的参考类别（另一个交互）是什么，但是在将显着交互与参考类别进行对比时，我需要知道哪个变量是固定的。

我正在寻找一种称为“简单效果测试”（不是 Tukey）的事后测试。对于同时使用 R 和 JMP 的任何人，相同的测试在 JMP 中称为“测试切片”。

我到处找，但找不到简单效果测试的代码。有谁知道如何在 R 中使用这个测试？

这是我的 glmm （使用负二项分布）输出的示例：

```
Call:
glm.nb(formula = N ~ FoodCategory * Season + FoodCategory + Season + 
    (1 | Group/Animal), data = SPwg, init.theta = 0.8744631431, 
    link = log)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-1.4796  -0.9720  -0.3713  -0.0350   4.7595  

Coefficients: (2 not defined because of singularities)
                                    Estimate Std. Error z value Pr(>|z|)   
(Intercept)                           0.2763     0.2940   0.939  0.34748   
FoodCategoryFruit                     0.8849     0.3316   2.669  0.00762 **
FoodCategoryInvertebrate             -0.1962     0.5086  -0.386  0.69966   
FoodCategoryPlantMatter               0.4169     1.3153   0.317  0.75128   
SeasonHFLC                           -0.2250     0.4435  -0.507  0.61195   
SeasonLFLC                           -0.2763     0.4610  -0.599  0.54904   
1 | Group/AnimalTRUE                      NA         NA      NA       NA   
FoodCategoryFruit:SeasonHFLC          1.1511     0.4811   2.393  0.01673 * 
FoodCategoryInvertebrate:SeasonHFLC   1.6265     0.6784   2.398  0.01651 * 
FoodCategoryPlantMatter:SeasonHFLC        NA         NA      NA       NA   
FoodCategoryFruit:SeasonLFLC          1.5565     0.4997   3.115  0.00184 **
FoodCategoryInvertebrate:SeasonLFLC   0.3016     0.7822   0.386  0.69984   
FoodCategoryPlantMatter:SeasonLFLC    0.8640     1.4630   0.591  0.55479   
--- 
```

我的参考类别是“FoodCategoryOther:SeasonHFHL”。例如，我从这个输出中知道“FoodCategoryFruit:SeasonLFLC”比我的参考类别要积极得多。

但是，我不知道这是因为“FoodCategoryFruit”在“SeasonLFLC”（例如）期间明显比“FoodCategoryPlantMatter”积极，还是“FoodCategoryFruit”在“SeasonLFLC”期间比“FoodCategoryFruit”明显更积极“季节HFHL”。

一个简单的效果测试将修复其中一个变量，同时测试另一个变量的效果。这是我需要解决的问题，除非有人可以告诉我类似/更好/更合适的测试。但是，请不要告诉我 Tukey，因为这个事后测试在测试另一个变量的影响时并没有修复一个变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-06T15:18:22.047

这...不是 GLMM（广义线性混合模型）。您正在拟合仅具有固定效果的常规旧 GLM，尽管存在负二项式误差分布的皱纹。因为`glm.nb`不理解随机效应表示法，所以您的`(1 | Group/Animal)`术语已被解释为算术/逻辑表达式，即 1 ORed 与`Group`除以的结果`Animal`。1 ORed 与任何东西都是相同的 TRUE，因此这个术语的 NA 系数。

对于实际的 GLMM，您需要使用类似`glmer`in the `lme4`package 或`arm`package（可能还有其他我不知道的）的东西。

# asp.net-mvc - 导航属性可以具有 [必需] 属性吗？

> ID：14637188
> 
> 赞同：2
> 
> 时间：2013-01-31T23:39:38.133
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first

我正在使用 Code First 学习 asp.net mvc....

我有一个名为 Livro 的课程：

这是它的代码

```
 public class Livro
    {

    [Key]
    public int LivroId { get; set; }

    [Required(ErrorMessage = "E necessario titulo")]
    [MaxLength(100, ErrorMessage = "Titulo deve ter no maximo 100 caracteres")]
    public string Titulo { get; set; }

    public int AutorID { get; set; }

    public virtual Autor Autor { get; set; }
  } 
```

如您所见，它有一个名为 Navigation 的属性和一个名为 的`Autor`FK `AutorId`。但是我在`Livro`控制器上有这段代码（我没有写这段代码，VS 创建的不是我的类）。

```
 [HttpPost]
    public ActionResult Create(Livro livro)
    {
        if (ModelState.IsValid)
        {
            db.Livros.Add(livro);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        ViewBag.AutorID = new SelectList(db.Autores, "AutorId", "Nome", livro.AutorID);
        return View(livro);
    } 
```

如果我有`[Required]`该`Autor`属性，则`modelState.IsValid`变为 false 因为`livro.Autor`是*null*。所以我必须把它拿出来。

但我正在阅读 Julia Lerman 的一本书，它名为“Programming EF Code-First”，有时还有带有该属性的导航`[Required]`属性。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:54:54.353

这可能是因为 View 仅引用`Livro`字段，而不是`Autor`模型绑定器无法创建`Autor`导航属性。`Autor`您可以像这样使用 smth为 , 创建字段：

```
@Html.TextBoxFor(m => m.Autor.AutorID);
@Html.TextBoxFor(m => m.Autor.AutorName); 
```

但是，这会变得很痛苦，也许您只需要从列表中选择作者即可。我只会将`Required`属性添加到属性中`Livro.AutorID`并保持`Autor`原样。

# ios - 在 UIImage 中合并文件扩展名字符串和 NSString？

> ID：14637190
> 
> 赞同：-1
> 
> 时间：2013-01-31T23:39:50.360
> 
> 标签：ios, syntax, nsstring, uiimage

什么语法可以使这项工作？

```
 NSString *curstring = [cur description];
    UIImage *weatherimage = [UIImage imageNamed: @"@%.png", curstring];
    [weather setImage:weatherimage]; 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T23:41:56.503

你正在寻找[NSString 的](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)stringWithFormat：

```
UIImage *weatherimage = [UIImage imageNamed:[NSString stringWithFormat:@"@%.png", curstring]]; 
```

# google-chrome - Chrome 对输入的支持：选中+标签？

> ID：14637204
> 
> 赞同：0
> 
> 时间：2013-01-31T23:40:26.840
> 
> 标签：google-chrome, css, css-selectors

有没有其他人注意到 Chrome 对此的支持存在问题？

```
input:checked+label 
```

它在第一个收音机上工作正常，但在第二个收音机上失败。看我的 js bin...

[http://jsbin.com/egutap/2/edit](http://jsbin.com/egutap/2/edit)

**更新：**更新了 jsbin 链接，因为我有一个错误，但仍然看到同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T18:18:35.693

这是版本 25.0.1364.58 beta-m 的版本特定错误。好像最新版解决了。

# silverlight - 在 Silverlight 中使用 XNA 的 3D 模型抗锯齿效果不佳，如何解决？

> ID：14637213
> 
> 赞同：0
> 
> 时间：2013-01-31T23:40:59.213
> 
> 标签：silverlight, 3d, xna, antialiasing

在 Silverlight 中，我使用 XNA 嵌入了一个 3D 模型。模型在 DrawingSurface 控件中呈现。我遇到的问题是模型渲染的质量很差。即使打开了抗锯齿，模型也有锯齿状的边缘（见下面的代码），模型也很模糊。

```
Dim comp As New OffscreenCompositionMode
    comp.PreferredMultiSampleCount = 4
    comp.RenderTargetUsage = RenderTargetUsage.DiscardContents
    comp.PreferredDepthStencilFormat = DepthFormat.Depth24

    drawingSurfaceCtl.CompositionMode = comp 
```

我尝试调整 multiSampleCount、相机位置、镜头等，但没有效果。有人对如何改进抗锯齿有任何建议吗？

另请注意，这被设计为 pc 上的浏览​​器应用程序，并且 xna 游戏库不能在此解决方案中使用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:34:38.520

我偶然发现了解决方案，DrawingSurface 控件嵌入在画布中，而画布又嵌入在网格中。画布指定的高度和宽度大于网格行，网格行也指定了高度和宽度。

因此，更正画布的高度和宽度，并为 DrawingSurface 控件设置高度和宽度立即解决了这个问题。

请注意，我还尝试了 DrawingSurface 的各种尺寸，发现大约 2 倍于它所嵌入的画布尺寸的尺寸提供了最佳分辨率。

希望这对遇到这个奇怪问题的人有所帮助！

# php - 循环遍历 mysqli 查询的结果并用表列替换内容标签

> ID：14637214
> 
> 赞同：1
> 
> 时间：2013-01-31T23:41:01.977
> 
> 标签：php, content-management-system, mysqli

我在工作中使用 PL/SQL 和 Oracle DB 参与了 CMS 的开发，我希望使用 PHP 和 MySQL 为我自己的 CMS 复制相同类型的结构。我是过去程序时代的 PHP 程序员，现在我正试图掌握 OOPHP。

我有三张桌子。一个代表一页。另一个代表可以在页面中使用的模板，另一个代表内容。我已经输出了页面的页眉和页脚（存储在页表中），但是我现在需要用内容填充页面。为此，我需要查询模板表并将 html 代码分配给一个变量。然后，我需要使用内容表将分配给变量（来自模板表）的 html 代码中的特定标签替换为另一个表中的内容。因此，例如：

我查询模板表并拉出一个包含 html 结构的列。在此结构中，存在与内容表中的列相关的自生成标签，例如 [i1] [i2] [i3]。我的目标是用内容表中每个相关列的相关内容替换这些标签（因此 [i1] 将替换为相关行中 i1 列中的内容。内容中可以有多个条目每页的表格，因此这些按顺序排列。

我目前停留在从内容表中提取与特定页面相关的所有内容的数组。我知道如何使用旧的 mysql 界面在程序上执行此操作，但我找不到有关如何在 mysqli 中正确执行此操作的任何最新帖子。有小费吗？

这是我目前的课程集：

```
class Connection extends Mysqli{

    public function __construct($mysqli_host,$mysqli_user,$mysqli_pass, $mysqli_db) {
        parent::__construct($mysqli_host,$mysqli_user,$mysqli_pass,$mysqli_db);
        $this->throwConnectionExceptionOnConnectionError();     
        $this->getUser();
    }

    private function throwConnectionExceptionOnConnectionError(){

        if(!$this->connect_error){
            echo "Database connection established<br/>";
        }else{
        //$message = sprintf('(%s) %s', $this->connect_errno, $this->connect_error);
            echo "Error connecting to the database."; 
        throw new DatabaseException($message);
        }
    }
}

class DatabaseException extends Exception{

}

class Page {

    public function __construct() {
        if(isset($_GET['id'])){
            $id = $_GET['id'];
        }else{      
            $id = 1;
        }       
        get_headers($id);
        get_content($id);
        get_footer($id);
    }

    private function get_headers($pageId){ 
        $retrieveHead = $this->prepare("SELECT header FROM pages WHERE page_id=?");
        $retrieveHead->bind_param('i',$pageId);
        $retrieveHead->execute();
        $retrieveHead->bind_result($header);
        $retrieveHead->fetch();
        $retrieveHead->close();
        echo $header;   
    }

    private function get_footer($pageId){ 
        $retrieveFooter = $this->prepare("SELECT footer FROM pages WHERE page_id=?");
        $retrieveFooter->bind_param('i',$pageId);
        $retrieveFooter->execute();
        $retrieveFooter->bind_result($footer);
        $retrieveFooter->fetch();
        $retrieveFooter->close();
        echo $footer;   
    }

    private function get_content($pageId){
        $retreiveContent = $this->prepare("SELECT * FROM content WHERE page_id=? ORDER BY sequence");
        $retreiveContent->bind_param('i',$pageId);
        $retreiveContent->execute();
    }

} 
```

根据我对 mySQL 的记忆，从这里我会做一个 for 循环，但我将如何使用这种 OOP 方法进行此操作，然后我将如何进行每个模板的标签替换？

我的表结构可以在下面找到。希望这会让我更清楚我在寻找什么：

![表结构](../Images/beaf9884afdaa0ac73923e5b88b681a0.png)

我猜想以某种方式我的查询可以适应执行内部连接，以便模板表中的代码列也被检索，但我之前并没有真正使用过 MySQLi 的连接，所以我不确定是否有编写语法的特定方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:06:30.067

您仍然可以使用 fetch 循环。填充模板应该只是 str_replacing 它们的一种情况：

```
private function get_content($pageId){

        $theTemplate = grabTheTemplate();

        $retreiveContent = $this->prepare("SELECT * FROM content WHERE page_id=? ORDER BY sequence");
        $retreiveContent->bind_param('i',$pageId);
        $retreiveContent->execute();
        $retreiveContent->bind_result($foo, $bar,$baz);
        while ($retreiveContent->fetch()) {
            //$foo, $bar $baz will be populated for this row.
            //Update the tags in the template.
            $theTemplate = str_replace('tagToReplace','valueToReplaceWith',$theTemplate);
        }
        //$theTemplate is populated with content. Probably want to echo here
        echo $theTemplate;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:09:00.007

在吉姆的帮助下，我想出了最终的解决方案：

```
 private function get_content($pageId){
         $retreiveContent = $this->prepare("SELECT template_id, section_title, i1, i2 FROM content WHERE page_id=? ORDER BY sequence");
         $retreiveContent->bind_param('i',$pageId);
         $retreiveContent->execute();
         $retreiveContent->bind_result($template_id, $section_title, $i1, $i2);
            while ($retreiveContent->fetch()) {
            //Variables will be populated for this row.
            //Update the tags in the template.
         $theTemplate = grabTheTemplate($template_id);
         $theTemplate = str_replace('[i1]',$i1,$theTemplate);
         $theTemplate = str_replace('[i2]',$i2,$theTemplate);
         //$theTemplate is populated with content. Probably want to echo here
        echo $theTemplate;
    }

} 
```

由于单个页面上可能有多个内容项，每个内容项可能有不同的模板，我将 grabTheTemplate 函数调用移动到 while 循环内，以便可以使用来自 template_id 列的值来检索相关模板。我还没有在我的测试服务器上尝试过这个，但理论上它应该都可以工作。我今晚会试试，如果有任何错误，我会编辑这篇文章。

# opengl - 从 OpenGL VBO 中删除数据

> ID：14637215
> 
> 赞同：2
> 
> 时间：2013-01-31T23:41:09.847
> 
> 标签：opengl, lwjgl, vbo

我有一个包含 4096 个立方体的 VBO，我想知道是否可以编辑 VBO 以实际删除一个立方体。这是我用于渲染我的 vbo 的代码（我知道我正在以旧方式渲染它）：

```
for (int y = 0; y < 16; y++) {
        for (int x = 0; x < 16; x++) {
            for (int z = 0; z < 16; z++) {
                glPushMatrix();
                glTranslatef(x, y, z);
                glDrawArrays(GL_QUADS, 0, 24);
                glPopMatrix();
            }
        }

    }
    glDisableClientState(GL_VERTEX_ARRAY); 
```

非常简单。现在我真的可以使用一种方法从 vbo 中删除数据吗？我是否必须创建一个单独的数组列表并将所有多维数据集添加到其中并从那里删除它们？我正在使用 LWJGL，但我怀疑这很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:36:58.980

> 我想知道我是否可以编辑 VBO 以实际删除一个多维数据集。

1.  `glMapBuffer()`得到一个可写的指针。

2.  将要删除的顶点交换到 VBO 的末尾。

3.  `glUnmapBuffer()`重新上传 VBO。

4.  确保适当地减少`count`论点`glDrawElements()`（或你使用的任何东西）。

您还可以通过`glBufferSubData()`.

# windows-store-apps - 在 Direct3D 中的纹理上绘制线条

> ID：14637217
> 
> 赞同：0
> 
> 时间：2013-01-31T23:41:21.863
> 
> 标签：windows-store-apps, direct3d

我正在使用 Windows 8 应用商店应用程序在 Direct3d11 中工作。

我一直在搜索谷歌并遗漏了几点，如果有人可以为我指出，我会很高兴。

到目前为止，我已经设法创建缓冲区、着色器并使用 D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST 对纹理进行采样，并且我可以将其更改为 LINELIST 并获得我的点。

当我想绘制纹理并在纹理顶部绘制一些线条或三角形列表作为线条时，我要寻找什么。我想在它上面显示纹理和网格。

我的下一步是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:43:18.793

一种简单的方法是先渲染对象，将渲染状态设置为`D3D11_FILL_SOLID`. 然后再次渲染相同的对象，但将渲染状态设置为`D3D11_FILL_WIREFRAME`.

“线框通道”着色器可以根据您的需要非常简单，只需记住更改常规通道的阴影，否则您将无法看到线框。

# joomla2.5 - Joomla：从带有参数的模型中调用函数

> ID：14637219
> 
> 赞同：0
> 
> 时间：2013-01-31T23:41:35.617
> 
> 标签：joomla2.5, joomla-extensions

从 Joomla 2.5 开始，我现在可以使用以下代码从默认模型调用函数：

```
$result = $this->get('Data'); 
```

get 和 Data 一起导致函数名称“getData”。但我不能这样做：

```
$myModel = $this->getModel('special_model');
$result = $myModel->getData(); 
```

我也不能这样做：

```
$myModel = $this->getModel('special_model');
$result = $myModel->getData('myId'); 
```

那么，我不能直接调用方法，也不能使用参数？这是对的吗？为什么会这样？在 J!1.5 中这是可能的。

最好的问候比约恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:41:24.543

您实际拥有的将在 J2.5 中工作，但您必须再添加一个。如果您在“special_model”视图中，这应该可以正常工作。不过，根据命名，您正在尝试向视图添加第二个模型。这个模型必须从控制器添加到视图中：

```
$view = $this->getView('myview', 'html') ;
$view->setModel( $this->getModel( 'special_model' )) ; 
```

同样，将其添加到控制器中，您拥有的代码将在模型中运行。

# search - 如何显示 Smartsearch 的结果

> ID：14637229
> 
> 赞同：0
> 
> 时间：2013-01-31T23:42:28.480
> 
> 标签：search, kentico

我正在创建一个 webpart，它使用 SearchHelper 根据搜索参数获取智能搜索结果，以通过 Ajax 在实时搜索中显示。

我正在寻找一种使用数据集显示结果的方法

```
SearchHelper.Search(SearchParameters) 
```

返回的方式与 SearchResults webpart 的工作方式相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:20:49.883

好吧，没关系，找到答案了。答案是只使用 BasicRepeater。

```
var results = SearchHelper.Search(sp);
BasicRepeater br = new BasicRepeater();
br.DataSource = results;
br.ItemTemplate = CMSDataProperties.LoadTransformation(this, CMS.Root.SmartSearchResults", false); 
```

# php - 在 PHP 中向上导航数组

> ID：14637232
> 
> 赞同：1
> 
> 时间：2013-01-31T23:42:38.640
> 
> 标签：php

给定以下多维数组：

```
$family = array(
    "grandfather",
    "grandmother",    
    "father" => array(
        "parents" => array(
            "grandfather",
            "grandmother"
         )
    ),
    "mother" => array(
        "parents" => array(
            "grandfather",
            "grandmother"
         )
    ),
    "son" => array(
        "parents" => array(
            "father",
            "mother"
         )
    ),
    "daughter" => array(
        "parents" => array(
            "father",
            "mother"
         )
    ),
); 
```

您可以想象扩展此数组以包括曾祖父母、曾孙子女等。

我确信这是一种常见且有据可查的数据结构，但我不是计算机科学专业的，我不知道如何描述或命名这种特殊类型的字典。

给定我们正在寻找的“子”节点和“祖先”节点的名称，是否有内置于 PHP 中的函数可以可靠地向上导航此树？

例如：

```
getAncestor($array, $child, $ancestor); 
```

我已经尝试过了，它通常涉及嵌套在自身内部的 getAncestor() 函数的递归，但有时会遇到“死胡同”，它会一直导航到一个分支的末尾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:07:37.230

您可以尝试一种更线性的方法，而不是将所有内容相互嵌套，您只需拥有一堆指向每个对象中所有祖先的指针。否则这对我来说听起来像是一个递归问题。

指针方法：

```
<?php

$person1 = new PersonObject( 'details' );
$person2 = new PersonObject( 'details' );

$person1->father =& $person2;

?> 
```

如果您的数据集像您的示例一样给出，您可能会或可能不会从转换到这种系统中受益，这取决于您需要查找多少祖先。另外，在我看来，这种结构更干净=）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T05:01:10.060

对不起，但我无法想象你会如何在没有看到它*的情况下添加曾祖父母。*你说需要递归，但`$family`有 3 代成员，只有 2 级嵌套。如果您要像这样添加曾*祖父母*（我的最佳猜测是基于您的样本`$family`数组），那么仍然只有 2 级嵌套。

```
$family = array(
    "great-grandfather",
    "great-grandmother",    
    "grandmother" => array(
        "parents" => array(
            "great-grandmother",
            "great-grandfather"
         )
    ),
    // ...
); 
```

然后甚至不需要递归。

虽然根据您的描述不清楚它应该做什么*。*当找到匹配项时，它会回显子项和祖先项并返回一个布尔结果。

```
function getAncestor($array, $child, $ancestor)
{
    foreach($array as $_child => $_ancestor) {
        // Bail if child is not a match or ancestor is not array
        if($child != $_child ||
           !is_array($_ancestor) || !count($_ancestor))
            continue;

        // see if cur ancestor is a match for searched ancestor
        if(in_array($ancestor, $_ancestor['parents'])) {
            echo 'Child: ' . $child . PHP_EOL;
            echo 'Ancestors: ' . implode(', ', $_ancestor['parents']) . PHP_EOL;
            return true;
        }
    }

    return false;
}

getAncestor($family, 'son', 'father');
getAncestor($family, 'father', 'grandmother');
getAncestor($family, 'father', 'mother'); 
```

输出

> 孩子：儿子
> 
> 祖先：父亲、母亲
> 
> 孩子：父亲
> 
> 祖先：祖父、祖母

例子的另一个旁注`$family`，看起来*爸爸*和*妈妈*有同一个父母！

# .htaccess - .htaccess 中 PDF 和图像文件的规范标题链接

> ID：14637238
> 
> 赞同：3
> 
> 时间：2013-01-31T23:43:13.983
> 
> 标签：.htaccess, http-headers, apache2, ubuntu-12.04, canonical-link

我正在尝试为我网站上的许多 PDF 和图像文件设置规范链接。

示例文件夹结构：

```
/index.php
/docs/
    file.pdf
    /folder1/
        file.pdf
    /folder2/
        file1.pdf
        file2.pdf
/img/
    sprite.png
    /slideshow/
        slide1.jpg
        slide2.jpg 
```

规范 URL 的示例 PDF URL： `http://www.example.com/docs/folder1/file.pdf --> http://www.example.com/products/folder1/`

我试图避免将单独的 .htaccess 文件放在包含我所有图像和 PDF 的每个子文件夹中。我目前有 7 个“主”文件夹，每个文件夹都有 2-10 个子文件夹，大多数子文件夹都有自己的子文件夹。我有大约 80 个 PDF，甚至更多的图像。

我正在寻找一种（半）动态解决方案，其中某个文件夹中的所有文件都将 Canonical Link 设置为单个 url。我想尽可能多地保存在一个 .htaccess 文件中。

我知道`<Files>`并且`<FilesMatch>`不理解路径，并且`<Directory>`在`<DirectoryMatch>`.htaccess 文件中不起作用。

有没有一种相当简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:06:23.420

我不知道单独使用 apache 规则来解决这个问题的方法，因为它需要某种正则表达式匹配并在指令中重用匹配结果，这是不可能的。

但是，如果您将 php 脚本引入混合中，则非常简单：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} \.(jpg|png|pdf)$
RewriteRule (.*) /canonical-header.php?path=$1 
```

请注意，这会将所有 jpg、png 和 pdf 文件的请求发送到脚本，而不管文件夹名称如何。如果您只想包含特定文件夹，则可以添加另一个 RewriteCond 来完成此操作。

现在 canonical-header.php 脚本：

```
<?php

// Checking for the presence of the path variable in the query string allows us to easily 404 any requests that
// come directly to this script, just to be safe.
if (!empty($_GET['path'])) {
    // Be sure to add any new file types you want to handle here so the correct content-type header will be sent.
    $mimeTypes = array(
        'pdf' => 'application/pdf',
        'jpg' => 'image/jpeg',
        'png' => 'image/png',
    );

    $path         = filter_input(INPUT_GET, 'path', FILTER_SANITIZE_URL);
    $file         = realpath($path);
    $extension    = pathinfo($path, PATHINFO_EXTENSION);
    $canonicalUrl = 'http://' . $_SERVER['HTTP_HOST'] . '/' . dirname($path);
    $type         = $mimeTypes[$extension];

    // Verify that the file exists and is readable, or send 404
    if (is_readable($file)) {
        header('Content-Type: ' . $type);
        header('Link <' . $canonicalUrl . '>; rel="canonical"');
        readfile(realpath($path));
    } else {
        header('HTTP/1.0 404 Not Found');
        echo "File not found";
    }
} else {
    header('HTTP/1.0 404 Not Found');
    echo "File not found";
} 
```

请考虑此代码未经测试，并在将其发布到生产环境之前检查它是否在浏览器中按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-19T10:04:15.130

这是解决方案！

您可以使用**.htacess**文件来控制标头，这是管理标头的更简单方法。

**你能怎么办？**

> 举个例子，我有一个名为“testPDF.pdf”的 pdf，它位于我网站的根文件夹中。您所要做的就是将以下代码粘贴到 .htaccss 文件中。

`<Files testPDF.pdf > Header add Link '<http://<your_site_name>.com/ >; rel="canonical"' </Files>`

将其添加到 .htaccess 文件后，您需要测试标头以确保其正常工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-12T05:28:40.470

对于 IIS 解决方案，请尝试类似的方法。

```
Response.AppendHeader("Link", "<" + "https://" + Request.Url.Host + "/" + product.GetSeName() + ">; rel=\"canonical\""); 
```

这已添加到生成网页 PDF 版本的功能中：)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-12-22T21:12:10.357

我能够通过单个 .htacess 文件为不同目录中的文件添加规范链接。

以下代码为指向同一目录的每个文件添加了一个规范链接：

```
<FilesMatch "\.(jpg|png|pdf)$">
    RewriteRule ([^/]+)\.(jpg|png|pdf)$ - [E=FILENAME:%{HTTP_HOST}/<your-desired-location>/$1.$2]
    Header add Link '<https://%{FILENAME}e>; rel="canonical"'
</FilesMatch> 
```

下面的代码添加了一个指向文件请求 URL 的规范链接，在许多情况下，这将是它在服务器上的实际位置：

```
<FilesMatch "\.(jpg|png|pdf)$">
    RewriteRule ([^/]+)\.(jpg|png|pdf)$ - [E=FILENAME:%{HTTP_HOST}%{REQUEST_URI}]
    Header set Link '<https://%{FILENAME}e>; rel="canonical"'
</FilesMatch> 
```

# ruby - 无法连接到交换服务器以在 ruby 中通过 SMTP 发送邮件

> ID：14637239
> 
> 赞同：0
> 
> 时间：2013-01-31T23:43:27.657
> 
> 标签：ruby, smtp, exchange-server

我已经尝试了我能想到的一切。我已经尝试过所有我能想到的身份验证类型。
这是我的设置

```
delivery_method :smtp, { 
                       :address              => "xxxxxxxxx.com",
                       :port                 => port,
                       :domain               => 'xxxxxx.com',
                       :user_name            => 'username',
                       :password             => "passworde",
                       :authentication       => 'plain',
                       :enable_starttls_auto => true  } 
```

如果我使用端口 25，这是我的错误（我相信这是正确的端口）

```
c:/Ruby193/lib/ruby/1.9.1/net/smtp.rb:960:in `check_auth_response': 504 5.7.4 Unrecognized authentication type (Net::SMTPAuthenticationError) 
```

如果我使用端口 587，这是我的错误

```
c:/Ruby193/lib/ruby/1.9.1/openssl/ssl-internal.rb:121:in `post_connection_check': hostname does not match the server certificate (OpenSSL::SSL::SSLError) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:01:18.203

您传递的散列应该根据[ActionMailer::Base docs](http://api.rubyonrails.org/classes/ActionMailer/Base.html)`:plain`定义为符号而不是字符串。服务器肯定在端口 25 上响应（504 5.7.4 Unrecognized authentication type 错误来自服务器）所以坚持使用该端口。

您的服务器上也可能禁用了普通身份验证。查看[无法通过 SMTP 使 ActionMailer 与 MS Exchange 一起工作以](https://stackoverflow.com/questions/6523348/cannot-get-actionmailer-working-with-ms-exchange-via-smtp)了解更多信息。

# mysql - 带参数的 MySQL 视图

> ID：14637241
> 
> 赞同：0
> 
> 时间：2013-01-31T23:43:34.887
> 
> 标签：mysql

上周我一直在研究一个相当大的数据库。基本上我正在使用 Access 数据库并将其转换为 MySQL 数据库。我已经成功地将所有表和视图转换为 MySQL。但是，我有一个需要用户输入的视图，即日期。另一个视图是将被调用的视图。

视图 1 - `compiled_fourweeks`- 需要日期视图 2 - `metrics_fourweeks`- 在查询中使用 `compiled_fourweeks。

我正在考虑一个程序，但我将无法引用查询中的列。

在这一点上，我有点没有想法了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:07:48.237

如果我理解正确，您需要执行一个`metrics_fourweeks`需要来自另一个视图 () 的数据的视图 ( `compiled_fourweeks`)，而最后一个视图需要用户输入。

我会采用程序方法：

```
create procedure fourWeeksData(d date)
    create or replace view compiled_fourweeks
        select ... 
        from ...   
        where recordDate = f  -- Just an example; use whichever where clause you need
        ...;

    select * from metrics_fourweeks;
end 
```

如果您的数据库将仅由单个用户使用，那么您的问题就解决了。但是，如果您的数据库打算供多个用户使用...好吧，您可以使用临时表：

```
create procedure fourWeeksData2(d date)
    drop table if exists temp_compiled_fourweeks;
    create temporary table temp_compiled_fourweeks
        select ... 
        from ...   
        where recordDate = f  -- Just an example; use whichever where clause you need
        ...;
    -- You will need to create the required indexes for this new temp table

    -- Now replicate the SQL statement, using your new temp table
    select ... 
    from temp_compiled_fourweeks
    ...;
end 
```

希望这对您有所帮助。

# jquery - 将 Javascript 变量传递给 Rails 部分

> ID：14637242
> 
> 赞同：2
> 
> 时间：2013-01-31T23:43:41.947
> 
> 标签：jquery, ruby, ajax, ruby-on-rails-3, unobtrusive-javascript

我是 Rails 的新手，我正在为一项看似简单的任务而苦苦挣扎。我有一个（精简的）表格：

```
<%= form_for @order, html: { :class => 'form-inline' } do |f| %>
  <fieldset>
  <legend><%= params[:action].capitalize %> Order</legend>

  <table class="table">
    <thead>
      <tr>
        <th><%= f.label :symbol %></th>
        <th><%= f.label :price %></th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td><%= f.text_field :symbol, class: 'input-small' %></td>
        <td><%= f.text_field :price, class: 'input-small' %></td>
      </tr>
    </tbody>
  </table>

  <div id='here'></div>

  <%= f.submit "Submit", class: "btn btn-primary" %>

  </fieldset>
<% end %>

<%= link_to 'Get quote', view_quote_orders_path, remote: true %> 
```

当我单击“获取报价”并且符号文本字段失去焦点时，我想在 div $(#here) 中呈现谷歌金融中的报价。我已经编写了代码来提取 Ruby 中的引用。

在 routes.rb 我添加了：

```
 resources :orders do
    get 'view_quote', on: :collection
  end 
```

在 order_controller.rb 我添加了：

```
def view_quote
  respond_to do |format|
    format.js { render :layout => false }
  end
end 
```

在 view_quote.js.erb 中：

```
sym = $('.orders #order_symbol').val();
$('#quotes').html("<%=j render 'googlequote', symbol: sym %>"); 
```

在 _googlequote.html.erb 中（我将在其中放置提取报价的逻辑）：

```
<%= symbol %> 
```

错误在 view_quote.js.erb 中，因为 sym 未定义。如果我将第二行替换为：

```
$('#quotes').html("<%=j render 'googlequote', symbol: 'just_a_test' %>"); 
```

部分被渲染，但我当然不需要它。如何将 javascript 变量 sym 传递给部分 _googlequote.html.erb？否则，有没有更好的方法来实现我的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T00:02:32.030

你不能把它放在erb中，因为erb是在服务器上渲染的。实现此目的的一种方法是将符号用作参数`view_quote`，因此您可以使用以下内容：

```
$('#quotes').html("<%=j render 'googlequote', symbol: params[:sym] %>"); 
```

（当然，您可以更加 RESTful 地连接该参数，但这是一个很好的起点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:47:05.220

谢谢@ben-taitelbaum 和@ajcodez，最后我使用了不同的方法，在这篇[优秀文章](http://madebydna.com/all/code/2011/12/05/ajax-in-rails-3.html)的示例 4和 RyanonRails 的评论中提出了建议。

这样，在捕获符号字段更改事件后，将符号传递给执行逻辑（从谷歌金融抓取报价）的控制器。结果以 json 格式再次传递给 javascript 以插入到布局中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T00:11:18.610

您正在对 Orders 集合发出 GET 请求。这意味着所有这些。如果您想使用订单模型中的符号，请向成员提出请求。

否则，您可以将其作为参数传递（我认为您正在尝试做的事情）。如果您想在每次更改时将其传递给服务器，我建议使用 jQuery`change`方法。然后你可以发出一个ajax请求：

```
$.get('/orders', { sym: $('.orders #order_symbol').val() }, function(response) {
   $('#here').html(response);
}); 
```

在控制器中：

```
def view_quote
  @sym = params[:sym]
  # use @sym in rendering partial
end 
```

# facebook - 使用 Javascript sdk 检测 Facebook 用户是否正在使用“使用 facebook as”功能

> ID：14637245
> 
> 赞同：1
> 
> 时间：2013-01-31T23:43:48.273
> 
> 标签：facebook, login, facebook-javascript-sdk

我们遇到了一个边缘案例，有人使用我们的 facebook 应用程序从他们在新标签页中管理的 fb 页面打开通知。在新选项卡中，他们使用“使用 facebook as”模式作为页面，当他们返回应用程序（不同的选项卡）时，app_requests 开始超时，刷新显示“您正在使用 facebook as.. 切换回来”提示.

有谁知道是否有办法检测用户是否已开始使用具有“用作”功能的 facebook 作为不同的用户？我想检测更改，然后处理更改 ex: window.refresh() 以便 facebook 显示提示。

我已经尝试过使用 FB JS SDK 的 FB.getLoginStatus，但是当我复制上述场景时，我无法检测到响应对象的任何变化。

# javascript - 有没有一种优雅的方式在画布边缘绘制形状？

> ID：14637247
> 
> 赞同：1
> 
> 时间：2013-01-31T23:44:04.540
> 
> 标签：javascript, canvas

我想在画布上创建无缝图案。我将整个过程简化为简单的矩形。当靠近画布边缘绘制一个矩形并且它的一部分被切断时，我希望在另一侧重复缺失的部分。

我想我只是检查要绘制的矩形是否离边缘太近，然后再次绘制+canvas.width/height。中途我意识到这可能会变成相当多`if`的 s。

**这是我已经拥有的：**

![这就是我所拥有的](../Images/c5b80e4252b3443039a8e51c3c2ad49e.png)

这是我检查边缘的部分。

```
// this._draw(); is a convenience method that draws the rectangle with
// the center as its registration point instead of top left corner.
// which is also why I add (this.size/2) to the coordinates.
if(this.x+( this.size/2 ) > canvas.width) {
  this._draw(
    this.x+canvas.width,
    this.y
  );
}

if(this.x-( this.size/2 ) <  0){
  this._draw(
    this.x+canvas.width,
    this.y
  );
}

if(this.y+( this.size/2 ) > canvas.height) {
  this._draw(
    this.x-(this.size/2),
    this.y-canvas.height-(this.size/2)
  )
}

if(this.y-(this.size/2) < 0){
  this._draw(
    this.x,
    this.y+canvas.height
  );
} 
```

**这就是我要的**

![这就是我要的](../Images/d0262fb5824eeddb6b5158cb3d4a0a84.png)

有什么聪明的方法可以更有效地检查吗？我确信有一种比我目前所指的更优雅的方法。

**整个示例在[codepen.io](http://codepen.io/noxoc/pen/f53ea0fe9afcff0a92794e7fe514c23b)上。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:13:04.997

**[看看这段代码](http://codepen.io/anon/pen/JnFCH)**：

```
var canvas  = document.createElement('canvas');
var context = canvas.getContext('2d');

var LT = new Dot(0,     100,    290,            140);
var RT = new Dot(90,    75,     canvas.width,   0);
var RB = new Dot(180,   50,     canvas.width,   canvas.height);
var LB = new Dot(270,   25,     0,              canvas.height);

function Dot(color, size, x, y){
    this.size = size;
    this.x = x;
    this.y = y;
    this.color = "hsla("+color+", 100%, 50%, 1)";

    this.draw = function() {
        context.fillStyle = this.color;
        context.strokeStyle = "hsla(0,0%,0%, 0.5)";
        this._draw(x, y);
        this.drawBorders();
    };

    this._draw = function(centerX, centerY) {
        context.fillRect(
            centerX - size/2,
            centerY - size/2,
            size,
            size 
        );
    };

    this.drawBorders = function() {
        var borders = 0;

        var tx, ty;
        if(x - size/2 <= 0){
            tx = canvas.width + x;
        }else if(x + size/2 >= canvas.width){
            tx = canvas.width - x;
        }
        if(y - size/2 <= 0){
            ty = canvas.height + y;
        }else if(y + size/2 >= canvas.height){
            ty = y - canvas.height ;
        }

        if(x-size/2 <= 0 || x+size/2 >= canvas.width ){
            this._draw(tx, y);
        }
        if(y-size/2 <= 0 || y+size/2 >= canvas.height){
            this._draw(x, ty);
        }
        if(x+size/2 >= canvas.width ||
           y+size/2 >= canvas.height ||
           x-size/2 <= 0 ||
           y-size/2 <= 0){
            this._draw(tx, ty);
        }
    }
    this.draw();
}

document.body.appendChild(canvas); 
```

这会将正方形绘制为与角重叠，但前提是它们确实重叠。

# c# - 如何首先在 Entity Framework 5 代码中使用两个外键创建主键？

> ID：14637252
> 
> 赞同：3
> 
> 时间：2013-01-31T23:44:38.297
> 
> 标签：c#, foreign-keys, entity-framework-5, composite-primary-key

我有一个实体，其中主键由指向其他两个表的两个外键组成。我有使用以下配置的配置，但该表是使用两个 FK 引用生成的。

桌子：

```
domain.Entity1
    MorePK (PK, FK, int, not null)
    Entity2_Id (PK, FK, int, not null)
    Entity3_Id (PK, FK, int, not null)
    OtherData (varchar, null)
    Entity2_Id1 (FK, int, null)
    Entity3_Id1 (FK, int, null) 
```

生成自：

```
public Entity1
{
    public int MorePK { get; set; }
    public int Entity2_Id { get; set; }
    public int Entity3_Id { get; set; }

    public string OtherData { get; set; }

    public virtual Entity2 Entity2 { get; set; }
    public virtual Entity3 Entity3 { get; set; }
}

public Entity2
{
    public int Id { get; set; }
    public virtual List<Entity1> Entity1s { get; set; }
}

public Entity3
{
    public int Id { get; set; }
    public virtual List<Entity1> Entity1s { get; set; }
}

public class Entity1Config : EntityTypeConfiguration<Entity1>
{
    HasKey(k => new { k.MorePK, k.Entity2_Id, k.Entity3_Id });

    HasRequired(p => p.Entity2)
        .WithMany()
        .HasForeignKey(p => p.Entity2_Id);

    HasRequired(p => p.Entity3)
        .WithMany()
        .HasForeignKey(p => p.Entity3_Id);

    Property(x => x.Entity2_Id).HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);
    Property(x => x.Entity3_Id).HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);
} 
```

如果我注释掉该行

```
public virtual List<Entity1> Entity1s { get; set; } 
```

在 Entity2 和 Entity3 上，它会正确生成数据库，但我认为 EF 需要导航属性，对吗？获取正确的数据库模式的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T02:08:49.937

我想到了！将此 HasMany 添加到外部实体配置中：

```
public Entity2Config : EntityTypeConfiguration<Entity2>
{
    HasMany(x => x.Entity1s)
        .WithRequired(x => x.Entity2)
        .HasForeignKey(x => x.Entity2_Id);
}

public Entity3Config : EntityTypeConfiguration<Entity3>
{
    HasMany(x => x.Entity1s)
        .WithRequired(x => x.Entity3)
        .HasForeignKey(x => x.Entity3_Id);
} 
```

# java - 有没有办法用 Java textareas 做到这一点？

> ID：14637253
> 
> 赞同：0
> 
> 时间：2013-01-31T23:44:49.203
> 
> 标签：java, parsing, styles, textarea, save

我有一个关于 java textarea 的问题。我知道我可能可以通过使用 swing 来完成一个 textarea，但是我的 textarea 中有一个我需要的功能，我不知道 swing 中的那个是否可以为我做。我需要它以便有`boolean H = false`，`when H = true`并且有人正在键入，他们键入的文本被突出显示（只是想要一个颜色覆盖，而不是选择），我需要一种方法来保存这个突出显示并能够解析这个突出显示的文本区域. 我计划使用一些 Java`Canvas`来完成我想做的事情，不包括 textarea。我知道如果我想要我可能可以只在 中对 textarea 进行编程`canvas`，但我觉得这真的很复杂，如果我应该使用`canvas`有什么方法可以做到，所以我仍然可以单击并拖动以选择文本区域?

# java - 如何将变量添加到 ExecutorService 线程内的 ArrayList

> ID：14637255
> 
> 赞同：2
> 
> 时间：2013-01-31T23:44:59.230
> 
> 标签：java, android, adb

我有一些代码在这里

```
 public void doScan() {
    Log.i(LOG_TAG, "Start scanning");

    ExecutorService executor = Executors.newFixedThreadPool(NB_THREADS);
    for(int dest=0; dest<255; dest++) {
        String host = "192.168.5." + dest; //add net address instead of hardcoding
        executor.execute(pingRunnable(host));
    }

    Log.i(LOG_TAG, "Waiting for executor to terminate...");
    executor.shutdown();
    try { executor.awaitTermination(10*1000, TimeUnit.MILLISECONDS); } catch (InterruptedException ignored) { }
    Log.i(LOG_TAG, "Scan finished");
}

private Runnable pingRunnable(final String host) {
    return new Runnable() {
        public void run() {
            Log.v(LOG_TAG, "Pinging " + host + "...");
            try {
                Socket s = null;
                s = new Socket(InetAddress.getByName(host), ACES_PORT);

                Log.v(LOG_TAG, "conn:"+s.toString());
                if(s.isConnected()){
                    Log.v(LOG_TAG, "connected " + host);
                    foundDevicesArray.add(host);
                }

            } catch (UnknownHostException e) {
                Log.e(LOG_TAG, "Not found", e);
            } catch (IOException e) {
                Log.e(LOG_TAG, "IO Error", e);
            }
        }
    };
} 
```

如果主机在线程内连接，我正在尝试保存它。

我有一个全局的（我是 android 的新手，所以我不确定它是否是这样的）ArrayList，在我执行 ArrayList.add(host) 的线程内它崩溃了我不知道如何获取来自崩溃的常见错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:02:46.880

您需要按如下方式初始化变量以赋予其非空值：

```
static List<String> foundDevicesArray = new ArrayList<String> (); 
```

但是请注意，arraylists 不是线程安全的，因此您应该使用线程安全的集合，例如[CopyOnWriteArrayList](http://developer.android.com/reference/java/util/concurrent/CopyOnWriteArrayList.html)，以避免并发问题。

因为该集合也实现了`List`接口，所以您只需要更改声明，就可以保持其余代码不变：

```
static List<String> foundDevicesArray = new CopyOnWriteArrayList<String> (); 
```

最后，CopyOnWriteArrayList 通过在每次修改底层数组时复制底层数组来实现线程安全。如果您的数组经常被修改但竞争不激烈（您没有很多线程试图同时访问它），从内存使用的角度来看，[同步列表](http://developer.android.com/reference/java/util/Collections.html#synchronizedList%28java.util.List%3CT%3E%29)可能是更好的选择 - 您应该同时尝试衡量性能与内存使用情况以做出明智的决定：

```
static List<String> foundDevicesArray =
                 Collections.synchronizedList(new ArrayList<String> ()); 
```

# javascript - 使用 jquery 添加数据工具提示

> ID：14637256
> 
> 赞同：3
> 
> 时间：2013-01-31T23:45:02.717
> 
> 标签：javascript, jquery, html, css

我正在尝试使用 jQuery 向元素添加属性；由于我的标记是即时创建的，因此我无法直接添加该属性。为什么下面的脚本没有添加属性？为什么这个小提琴不能按预期运行？这是我试图使用包含的一些示例标记[的小提琴。](http://jsfiddle.net/fkdh8/12/)

```
// set the tooltip content
jQuery('li#menu-item-75 a:hover:before').prop('tooltipText', 'w00t');
jQuery('li#menu-item-75 a:hover:after').prop('tooltipText', 'w00t'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T23:56:55.780

您必须设置 data 属性`.attr()`才能真正影响 DOM 属性：

```
jQuery('li#menu-item-75 a').attr('data-tooltip', 'w00t'); 
```

`:hover`和`:before`/`:after`不适用于 jQuery 选择器。

**演示：http: [//jsfiddle.net/fkdh8/13/](http://jsfiddle.net/fkdh8/13/)**

# objective-c - NSMutableArray 是否在每次调用其 count 方法时实际计算项目？

> ID：14637259
> 
> 赞同：4
> 
> 时间：2013-01-31T23:45:11.080
> 
> 标签：objective-c, nsmutablearray, performance

由于 cocoa 设计模式，实例方法的名称`count`是`NSMutableArray`模棱两可的；它可以返回一个保存的变量`count`，也可以在每次调用它时计算数组中的项目，然后返回（可可规定一个简单地返回变量值的方法`foo`是`foo`，而不是`getFoo`）。**每次调用它的方法时，** **Objective C 是否真的计算项目，或者它是否返回预先计算的变量的值？`NSMutableArray``count`**如果这是 Java，我会查看源代码，但我找不到`NSMutableArray`. 我查看了 API，它所说的只是：

> 返回当前在数组中的对象数。

由于没有上下文，我无法判断这是否意味着它在其中进行任何计算。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T23:50:01.797

正如您正确指出的那样，不能保证它会以一种或另一种方式运行。

但实际上，它`-[NSArray count]`是一个恒定时间操作。您可以自己确认这一点，方法是创建一个小数组和一个大数组，并对获取它们的计数所需的时间进行基准测试。`count`像这样在核心数组类上使用 O(n) 方法是非常愚蠢的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T00:43:22.893

`NSArray`声明了一个私有 ivar `_used`，它似乎保存了数组的计数。使用`object_getInstanceVariable()`您可以验证在具体子类的情况下`__NSArrayM`，此变量会随着对象的添加和删除而递增和递减。

我使用以下程序（Mac OS X Foundation 命令行工具）来验证这一点：

```
#import <Foundation/Foundation.h>
#import <objc/runtime.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        NSMutableArray *anArray = [NSMutableArray array];
        NSLog(@"anArray's concrete class is %@", [anArray class]);
        UInt64 used = 0;
        for (NSString *toAdd in @[@"o", @"m", @"g"]) {
            object_getInstanceVariable(anArray, "_used", (void **)&used);
            NSLog(@"array = %@, used = %lld", anArray, used);
            [anArray addObject:toAdd];
        }
        for (NSString *toRemove in [anArray copy]) {
            object_getInstanceVariable(anArray, "_used", (void **)&used);
            NSLog(@"array = %@, used = %lld", anArray, used);
            [anArray removeObject:toRemove];
        }
        object_getInstanceVariable(anArray, "_used", (void **)&used);
        NSLog(@"array = %@, used = %lld", anArray, used);
    }
    return 0;
} 
```

该程序产生以下输出：

```
2013-01-31 17:40:15.376 Array[10173:303] anArray's concrete class is __NSArrayM
2013-01-31 17:40:15.378 Array[10173:303] array = (
), used = 0
2013-01-31 17:40:15.378 Array[10173:303] array = (
    o
), used = 1
2013-01-31 17:40:15.379 Array[10173:303] array = (
    o,
    m
), used = 2
2013-01-31 17:40:15.379 Array[10173:303] array = (
    o,
    m,
    g
), used = 3
2013-01-31 17:40:15.380 Array[10173:303] array = (
    m,
    g
), used = 2
2013-01-31 17:40:15.380 Array[10173:303] array = (
    g
), used = 1
2013-01-31 17:40:15.380 Array[10173:303] array = (
), used = 0 
```

# php - 获取 PHP 文件的文件名

> ID：14637261
> 
> 赞同：1
> 
> 时间：2013-01-31T23:45:16.087
> 
> 标签：php

我正在尝试获取我的 php 文件的文件名。出于好奇，我想知道是否还有其他方法可以做到这一点。

```
echo "<br/>".basename($_SERVER['PHP_SELF']); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T23:46:09.120

PHP 有一个返回文件路径的魔术常量：`__FILE__`

如果您只想要文件名，请使用`basename(__FILE__)`

优点是它甚至可以用于通过 CLI 调用的 php 脚本，而不是由 Web 服务器/cgi 执行。

[在这里查看更多](http://php.net/manual/en/language.constants.predefined.php)

# php - 拒绝所有用户的 MySQL 访问，甚至是 root

> ID：14637267
> 
> 赞同：1
> 
> 时间：2013-01-31T23:45:51.687
> 
> 标签：php, mysql, mysqli

我有一个看起来像这样的 PHP 脚本：

```
$link = mysqli_connect("localhost", "gateway7_make", "$PASSWORD$");
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
} else {
    printf("Host information: %s\n", mysqli_get_host_info($mysqli));
} 
```

这个脚本始终输出

```
Connect failed: Access denied for user 'gateway7_make'@'localhost' (using password: NO) 
```

除非我使用我的虚拟主机密码，否则它会输出

```
Connect failed: Access denied for user 'gateway7_make'@'localhost' (using password: YES) 
```

尝试使用“root@localhost”会给我与上面相同的消息。

我知道用户名和密码是有效的，因为它们与安装在同一台机器上的 phpmyadmin 一起使用。

脚本、mysql 服务器和 phpmyadmin 都在同一个 Hostmonster 服务器上。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T00:43:57.743

错误是我的密码包含一个“$”，并且没有被正确的单引号括起来。

感谢大家的帮助和时间。

# visual-studio-2008 - 通过网站上传文件

> ID：14637268
> 
> 赞同：1
> 
> 时间：2013-01-31T23:45:53.357
> 
> 标签：visual-studio-2008, file-upload, publishing

这适用于 Intranet 应用程序。用户需要通过网页上传文件，并能够通过网页访问，最好是同一个网页。它基本上可以工作，但我有几个问题。如果我在发布文件夹时在站点中创建了“上传”文件夹，则内容会被覆盖。如果我让它们上传到站点外部的文件夹，我无法链接到它。有没有办法让 Visual Studio 2008 不会覆盖文件夹和文件——或者——能够链接到网站外部文件夹中的文件？我会很高兴能够同时做到这两点。

我的代码工作正常，我的设计可能不行。做这样的事情似乎并不异常，所以我会假设我在做一些愚蠢的事情，或者只是错过了一些东西。Visual Studio 在发布之前删除所有内容让我很生气，我一定遗漏了一些东西。

感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:25:21.183

好吧，我建议将您的网站转换为 Web 应用程序。它将为您节省很多痛苦。Visual Studio IDE 以更友好的方式对待 Web 应用程序。

无论如何，看看这个类似的问题：

[从网站中排除文件在 Visual Studio 中发布](https://stackoverflow.com/questions/650875/exclude-files-from-web-site-publish-in-visual-studio)

这是网站和 Web 应用程序项目的很好的比较：

[ASP.NET 网站还是 ASP.NET Web 应用程序？](https://stackoverflow.com/questions/398037/asp-net-web-site-or-web-application)

*对我来说，毫无疑问。*

# ios - 在类级别 NSDictionary 中保留本地指针

> ID：14637270
> 
> 赞同：-2
> 
> 时间：2013-01-31T23:46:01.867
> 
> 标签：ios, pointers, nsdictionary

如果我有一个指向自定义类的本地指针，我如何将其指针存储在类级别的 NSDictionary 变量中，并在其初始创建范围终止后使用它。

如何告诉编译器保留由 new 创建的内存，直到我创建它的类超出范围？

这是 sudo 代码，用于表示相关变量的范围。

```
Class {

    NSMutableDictionary* allElements;

    SomeFunction {

       InnerClosure1 {

       DefaultElement* element = [DefaultElement new];
       [allElements setObject:element forKey:@:"Foo"];

       }

       InnerClosure2 {

          DefaultElement* element = [allElements objectForKey:@"Foo"];

      }
} 
```

问题是在尝试将指针放入字典后出现此错误：

> [__NSDictionaryI setObject:forKey:]：无法识别的选择器发送到实例 0x94421d0 2013-01-31 23:35:32.575 Muskoka-Domicile[1371:19d03] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[__NSDictionaryI setObject :forKey:]: 无法识别的选择器发送到实例 0x94421d0'

我怀疑它与转移自定义类的所有权有关？

***编辑*** 结果将 NSMutableDictionary* 初始化为 NSDictionary...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:41:35.930

您的本地指针可能会丢失。您感兴趣的是您指向的内存块（对象）。

当您将任何对象添加到 NSDictionary 时，该对象将由字典保留。您可以离开 scope1 并且您的对象会很好。事实上，如果您不使用 arc，在将元素添加到字典后，您通常会调用`[element release]`以平衡对`new`.

稍后，当您将对象从字典中拉出时，您只是用对象的内存地址更新临时指针（元素）。在“Scope2”中，由于您没有创建对象，因此完成后不会释放它。

希望这有助于澄清事情。

**编辑/更新** 我应该注意，您的代码基本上是正确的。如果要将对象放入字典中，则需要一个`NSMutableDictionary`，因此在代码顶部创建一个。接下来，您应该调用`setObject:forKey:`not `setValue`。那应该对你有用。`(DefaultElement *)`当您将元素从字典中拉出时，您可能需要添加强制转换来抑制警告。

# regex - Notepad++ 正则表达式文本替换

> ID：14637275
> 
> 赞同：0
> 
> 时间：2013-01-31T23:46:20.987
> 
> 标签：regex, notepad++

我有一个文本文件。

```
tart*)*98'bank'ksb64bank)(tart2d&f44bank 
```

我想替换为：我想搜索 tart*.*bank 并将“bank”更改为“replaced”

```
tart*)*98'replaced'ksb64bank)(tart2d&f44replaced 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T23:54:58.857

找什么：`(tart.*?)(bank)`

用。。。来代替：`\1replaced`

*   `()`用于分组，因此您可以引用组来替换`\1`第一组等字段
*   `.*`是贪婪的，它会匹配字符串的其余部分，所以`?`是为了使`.*`非贪婪和匹配，直到第一个`bank`不匹配

# javascript - 有没有办法使用 Google Chrome 开发者工具过滤网络请求？

> ID：14637278
> 
> 赞同：141
> 
> 时间：2013-01-31T23:46:35.000
> 
> 标签：javascript, google-chrome, google-chrome-devtools, filtering

是否可以使用 Chrome 开发人员工具过滤掉一些请求，比如过滤掉所有图像请求？

* * *

## 回答 #1

> 赞同：284
> 
> 时间：2015-01-04T20:40:56.657

**否定文本过滤器**- 列出与给定查询*不*匹配的结果。

*   使用**-.png**或**-.gif**或**-.jpg**作为网络面板中的过滤器。
*   许多其他负面过滤器也可以使用。例如**-mime-type:image/png**、**-larger-than:20k**、**-domain:yoursite.com**、**-status-code:404**。请参阅[Chrome 开发者文档 - 排序和过滤](https://developers.google.com/web/tools/chrome-devtools/network-performance/reference#filter)。

*自 Chrome ~42 起可用*-[问题链接，](https://bugs.chromium.org/p/chromium/issues/detail?id=444960)[在此处](https://twitter.com/addyosmani/status/549588196837695488)宣布

*另一种方法：*在“网络”面板中打开过滤器并`CTRL/CMD`单击要显示的请求类型。要仅隐藏图像请求，请在按住 时选择*除*`CTRL/CMD`图像之外的所有其他类型。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2015-03-08T13:19:25.833

您`-.png -.gif -.jp`在过滤器输入框中写入以从结果中排除所有图像。在底部，它显示了不带图像传输的数据总量。

14 年 12 月，一位“在谷歌从事 Chrome 工作的工程师”在推特上写道：

> Chrome DevTools：负面文本过滤器刚刚登陆网络面板。列出与给定查询*不*匹配的 结果[Twitter 链接](https://twitter.com/addyosmani/status/549588196837695488)

**编辑**：您甚至可以按域、mime 类型、文件大小...进行过滤，或者通过输入`-domain:cdn.sstatic.net`和组合其中任何一个`mime-type:image/png -larger-than:100K`来排除，以在网络面板中仅显示小于 100kb 的 png 文件

参见[Addy Osmani 的 DevTools：2015 年国情咨文](https://speakerdeck.com/addyosmani/devtools-state-of-the-union-2015)

**从 Chrome 42 开始**。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2019-05-27T00:09:02.137

在我构建的 Google Chrome（版本 74.0.3729.157（64 位））下，我发现以下过滤器可用（我添加了一些示例）。请注意，DevTools 具有自动完成功能（这有助于整理这些东西）。

```
domain:
-domain:
    # Use a * character to include multiple domains.
    # Ex:  *.com, domain:google.com, -domain:bing.com

has-response-header:
-has-response-header:
    # Filter resources with the specified HTTP response header.
    # Ex: has-response-header:Content-Type, has-response-header:age

is:
-is:
    # is:running finds WebSocket resources
    # I've also come across:
    #  - is:from-cache,
    #  - is:service-worker-initiated
    #  - is:service-worker-intercepted

larger-than:
-larger-than:
    # Note: larger-than:1000 is equivalent to larger-than:1k
    # Ex: larger-than:420, larger-than:4k, larger-than:100M

method:
-method:
    # method:POST, -method:OPTIONS, method:PUT, method:GET

mime-type:
-mime-type:
    # Ex: mime-type:application/manifest+json, mimetype:image/x-icon

mixed-content:
-mixed-content:
    # 2 that I've found documented: 
    #   mixed-content:all (Show all mixed-content resources) 
    #   mixed-content:displayed (Show only those currently displayed) (never used this personally)

scheme:
-scheme:
    # Ex: scheme:http, scheme:https,
    # Note that there are also scheme:chrome-extension, scheme:data

set-cookie-domain:
-set-cookie-domain:
    # 
    # Ex: set-cookie-domain:.google.com

set-cookie-name:
-set-cookie-name:
    # Match Set-Cookie response headers with name
    # Ex: set-cookie-name:WHATUP

set-cookie-value:
-set-cookie-value:
    # Match Set-Cookie response headers with value
    # Ex: set-cookie-value:AISJHD98ashfa93q2rj_94w-asd-yolololo

status-code:
-status-code:
    # Match HTTP status code
    # Ex: status-code:200, -status-code:302 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-01-31T23:49:13.390

没有非常灵活的过滤功能，但底部的栏确实允许您仅显示特定文档或连接类型的请求：

![](../Images/29b9c15f3122a2e76384c8a37a2001aa.png)

您不能只排除图像，但它应该会有所帮助。

您也可以按`Control`/ `Command`+`F`在请求列表中搜索特定字符串，并选中“过滤器”框以隐藏不匹配的请求：

![在此处输入图像描述](../Images/b8432878fc3a2b4aefe1bcd0c48d0b03.png)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2020-03-16T09:59:59.697

# 2021 年更新：

在新的更新 chrome 中，您可以轻松选择一些内容类型 JS、CSS、IMG、Font、... 进行过滤请求；请参阅：（
[![在此处输入图像描述](../Images/26d793b85f5d15bd7195dbe1112617a5.png)](https://i.stack.imgur.com/rqLVX.png) 现在我使用的是 93.0.4577.63 版本）

# 较旧的解决方案：

一个简单、简短、快速的解决方案：

就放`-.`

因为不显示任何带有扩展名的 url（静态内容），所以你在这里清楚地看到了 URL。

[![正则表达式过滤器](../Images/3c2574b76f57684c120747506bed433a.png)](https://i.stack.imgur.com/NPbJy.png)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-08-22T18:55:28.887

像 -MimeType 一样，您可以在过滤器输入中使用域，如下所示：

> 域：yourdomain.com

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-31T23:49:20.867

![在此处输入图像描述](../Images/88e74cc5e64ceb85673d0f72ac019b68.png)

如果您打开开发人员工具，请选择网络。如果您想专门查找图像请求，请从页面底部的栏中选择图像。过滤器都是独占的，因此您不能仅过滤掉图像请求。你去吧。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-10-06T19:01:36.840

添加`-MimeType:image/jpeg`过滤器对我有用。

# java - java标签计数器csv文件

> ID：14637283
> 
> 赞同：0
> 
> 时间：2013-01-31T23:47:08.673
> 
> 标签：java, csv, hashtag

我正在尝试计算主题标签在 CSV 文件中出现的次数。问题是，我跳过了每一列的最后一行，而不是计算 75 个东西，它只计算 70 个。这是代码，抱歉，我是 Java 新手，它可能很简单，但我想不通出去。

```
import java.util.Scanner;
import java.io.File;

public class HashtagCounter {

public static void main(String[] args) throws Exception {

    int total = 0;
    int count = 0;

    File file = new File("hashtags.csv");
    Scanner input = new Scanner(System.in);
    Scanner scan = new Scanner(file).useDelimiter(",\\s*");

    System.out.println("Please enter a hashtag");
    String keyboard = input.nextLine();

    while(scan.hasNext()){
        //System.out.println(scan.next());
        total = total + 1;

        if(scan.next().equals(keyboard)){
            count = count + 1;
        }
    }

    System.out.println("The hashtag " + keyboard + " appears " + count + " time(s), out of a total of " + total + " entries");
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:06:24.340

您正在将行的最后一个条目与下一行的第一个条目连接起来。这是因为您的分隔符`",\\s*"`- 它匹配逗号，但在 csv 中的最后一个条目之后没有逗号。用于`"\n|,\\s*"`匹配换行符 ( `\n`) 或逗号。模式`A|B`匹配匹配任一子模式的字符串。它记录在：[http ://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)

# bash - 用 bash 脚本编写文件

> ID：14637284
> 
> 赞同：13
> 
> 时间：2013-01-31T23:47:27.473
> 
> 标签：bash, unix

我是 bash 的新手，但我正在尝试编写一个执行以下操作的 bash 脚本：

```
write_to_file()
{
 #check if file exists
 # if not create the file
 # else open the file to edit
 # go in a while loop
 # ask input from user 
 # write to the end of the file
 # until user types  ":q"

 } 
```

如果有人能指出文献，我将非常感谢谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-31T23:54:19.167

更新：因为这是一个 bash 问题，你应该先试试这个。;)

```
cat <<':q' >> test.file 
```

要了解发生了什么，请阅读 bash 的[IO 重定向](http://www.tldp.org/LDP/abs/html/io-redirection.html)、[heredoc 语法](http://tldp.org/LDP/abs/html/here-docs.html)和[cat](http://linux.die.net/man/1/cat)命令

* * *

正如您在上面看到的，有很多方法可以做到这一点。为了解释更多 bash 命令，我还按照您的要求准备了该函数：

```
#!/bin/bash

write_to_file()
{

     # initialize a local var
     local file="test.file"

     # check if file exists. this is not required as echo >> would 
     # would create it any way. but for this example I've added it for you
     # -f checks if a file exists. The ! operator negates the result
     if [ ! -f "$file" ] ; then
         # if not create the file
         touch "$file"
     fi

     # "open the file to edit" ... not required. echo will do

     # go in a while loop
     while true ; do
        # ask input from user. read will store the 
        # line buffered user input in the var $user_input
        # line buffered means that read returns if the user
        # presses return
        read user_input

        # until user types  ":q" ... using the == operator
        if [ "$user_input" = ":q" ] ; then
            return # return from function
        fi

        # write to the end of the file. if the file 
        # not already exists it will be created
        echo "$user_input" >> "$file"
     done
 }

# execute it
write_to_file 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T23:57:59.550

带有基本参数检查的示例：

```
write_to_file()
{
    while [ "$line" != ":q" ]; do
        read line
        if [ "$line" != ":q" ]; then
            printf "%s\n" "$line" >> "$1"
        fi  
    done
}

if [ "$#" -eq 1 ]; then
    write_to_file "$1"
else
    echo "Usage: $0 FILENAME"
    exit 2
fi 
```

* * *

或者使用可能鲜为人知的[until](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_09_03.html)构造，该函数可以写得更简洁：

```
# append to file ($1) user supplied lines until `:q` is entered
write_to_file()
{
    until read line && [ "$line" = ":q" ]; do
        printf "%s\n" "$line" >> "$1"
    done
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T23:52:16.917

这个快速示例应该可以帮助您入门：

```
while true
do
    read INPUT
    if [[ "${INPUT}" == :q ]]
    then
        return
    fi
    echo "${INPUT}" >> file
done 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T00:28:54.293

这里有几个解决方案太难了*。*做就是了：

```
write_to_file() { sed '/^:q$/q' | sed '$d' >>"$1"; } 
```

其中第一个参数是文件名。也就是说，将其调用为：

```
write_to_file test.file 
```

# google-fusion-tables - 如何使用新 API 从 Java 应用程序将包含多行的 .csv 文件上传到 Google Fusion Table？

> ID：14637295
> 
> 赞同：0
> 
> 时间：2013-01-31T23:48:49.740
> 
> 标签：google-fusion-tables

我们已通过我们的 java 应用程序成功连接到融合表，但在尝试单独上传每一行时遇到了速率上传限制问题。然后我们考虑将我们的 SQL 表转储到 .csv 并上传，但我们似乎在新 API 中找不到太多关于此的文档。我们找到了 importRows API 调用，但如前所述，文档几乎没有。有没有人成功地做到了这一点或有任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:19:44.337

对不起，我只能给你指点：在 PHP API 客户端（版本 0.6.0，即当前版本）中根本不支持 importRows 方法。原因是：此调用与其他 RESTfull API 调用略有不同。您没有在正文中发布任何 JSON 对象，而是包含要上传的 CSV。这种方法不适合构建 API 客户端的逻辑。

出于同样的原因，JAVA API 客户端不支持它的可能性很高。

我能够修改 API php 代码以支持导入行方法，并在[google-php-api 问题跟踪器](https://code.google.com/p/google-api-php-client/issues/detail?id=192#c7)上共享它。看一看，也许它会给你一些关于从哪里开始的线索。

# php - 使用 DNS 获取相关 URL

> ID：14637296
> 
> 赞同：0
> 
> 时间：2013-01-31T23:49:02.723
> 
> 标签：php, reverse-dns

我正在开发一个需要确定相关 url 共享 IP 地址的 PHP 程序。例如，我有主机名，比如 www.example.com，我想确定哪些其他 url 共享该 IP。我不确定是否使用 DNS_GET_RECORD()。Gethostname() 似乎只返回一个 IP 地址。如果我使用 DNS_GET_RECORD() 不会只返回该主机名的记录吗？如您所知，我有些困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:22:49.347

你不能。没有通用的方法来查找解析为给定 IP 的所有主机名。（例如，如果我现在决定在我的 DNS 服务器上创建一个指向 的记录，`foo.example.com`除非`1.2.3.4`您碰巧查找它，否则您无法找到它。任何查找`1.2.3.4`都不会向您透露。）

有一些在线工具可以为您提供部分列表，但它们都是基于从域名注册、网络爬网等中获取主机名并跟踪它们都解析的内容。它没有魔法，只是构建数据库需要*大量*的努力。

# php - Codeigniter 在登录控制器上给出异常结果

> ID：14637299
> 
> 赞同：0
> 
> 时间：2013-01-31T23:49:18.827
> 
> 标签：php, codeigniter

我正在使用 codeigniter 框架。我有一个登录模型和一个带有视图的控制器。为了测试目的，我在我的数据库的用户表中设置了 admin 作为用户名和 admin 作为密码。但是，当我使用 admin13356 或 admindsgsd 或 adminWHATEVER 和 admin 作为密码时，登录成功。我不明白为什么。

我的控制器功能如下。

```
function check(){
        $this->load->model('loginModel');
        $query = $this->loginModel->validate();
        if($query){
            $data = array('username' => $this->input->post('username'),
                           'is_logged_in' => true
                        );
            $this->session->set_userdata($data);
            //redirecting to appropriate page 
            redirect('success');
        }else{
            $this->session->set_flashdata('loginCheck','Username/Password Comination Incorrect!');
            redirect('login');
        }
    } 
```

我的模型如下。

```
function validate(){
            $this->db->where('username', $this->input->post('username'));
            $this->db->where('password', md5($this->input->post('password')));
            $query = $this->db->get('users');
            if($query->num_rows() == 1){
                return true;
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:28:42.057

**表**中有多少条记录

 **试试这个代码

```
function validate($username,$password){
            $this->select('*');
            $this->from('table_name');
            $this->db->where('username', $username);
            $this->db->where('password', md5($password));
            $query = $this->db->get();
            if($query->num_rows() == 1){
                return true;
            }

        } 
```

将你的`username`and传递`password`给函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T00:54:54.777

```
function validate(){
           // dump all post variables recieved
           echo '<pre>';
           print_r($this->input->post());                
           echo '</pre><br>';    

            $this->db->where('username', $this->input->post('username'));
            $this->db->where('password', md5($this->input->post('password')));
            $query = $this->db->get('users');

           // Dump what the query result is
           echo '<br><pre>';
           print_r($query->result());                
           echo '</pre>';

            //if($query->num_rows() == 1){
            //    return true;
            //}

        } 
```

您的代码看起来不错，但是您能否检查它是否正确传递了正确的数据，请先尝试转储它。像上面的代码来检查数据和查询结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:51:59.687

你运行的是什么版本的PHP？我之前遇到过 PHP 的问题，它在不返回时返回 TRUE。

尝试添加`return false`到您的 validate() 方法：

```
function validate(){
    $this->db->where('username', $this->input->post('username'));
    $this->db->where('password', md5($this->input->post('password')));
    $query = $this->db->get('users');
    if($query->num_rows() == 1){
        return true;
    }

    return false;
} 
```

此外，模型的输入应该是不可知的。绝对考虑将 移动`$this->input->post()`到控制器并将值作为参数传递：

这允许您`validate()`在其他场景中使用该方法。例如（当用户名不是通过帖子而是通过会话提供时重新验证密码）。

**控制器**

```
function check(){
    $this->load->model('loginModel');
    $query = $this->loginModel->validate($this->input->post('username'), $this->input->post('password'));
    if($query){
        $data = array(
           'username' => $this->input->post('username'),
           'is_logged_in' => true
        );
        $this->session->set_userdata($data);
        //redirecting to appropriate page 
        redirect('success');
    }else{
        $this->session->set_flashdata('loginCheck', 'Username/Password Combination Incorrect!');
        redirect('login');
    }
} 
```

**模型**

```
function validate($username, $password){
    $this->db->where('username', $username);
    $this->db->where('password', md5($password));
    $query = $this->db->get('users');
    if($query->num_rows() == 1){
        return true;
    }

    return false;
} 
```**

# javascript - Angular.js：在动态网站中使用指令

> ID：14637301
> 
> 赞同：0
> 
> 时间：2013-01-31T23:49:22.723
> 
> 标签：javascript, angularjs, d3.js

所以我正在动态构建一个表，大致像这样

```
<tbody ng-repeat="d in data">
<td>{{d.name}}</td>
<td>{{d.dircleColor}}</td>   
<td id="a{{d.index}}>{{d.someOtherData}}</td>
... 
```

“data”是一个数组，控制器中的$scope.data。基本的 Angular，效果很好。

现在，我还必须在其中一个动态生成的 <td></td> 中添加一个 svg 元素（D3.js）

这些必须对应同样基于 $scope.data 的可视化，以便图表中的红色圆圈对应表格中的红色圆圈，并且用户知道在哪里查找信息。

我最大的希望是一个指令

```
.directive('dirCircle', function () {
   return function ($scope, elm, attrs) {                        
     var vis = d3.select(elm[0]).append("svg").attr("width", w).
        attr("height", h).attr("class", "circlesClass");
     node.append("svg:text")    [... more styling...] 
```

这可行，但目前我不知道如何告诉指令，我的小 svg-circle 元素应该具有哪种颜色。此信息位于 $scope.data - 数组中。但是仅仅访问 $scope 是不够的。我需要绘制“当前”元素的信息。那可能吗？

* * *

如果这是不可能的，这里有一些**可能的解决方法**：

1）如果指令可以变得“自我意识”并环顾放置它的DOM，那可能会有所帮助。注意在我上面的代码中我有`<td id="a{{d.index}}>...`

“a”就在那里，因为 id 以字母开头。d.index 标识我的数组中的相关数据，所以如果我可以从我的指令访问 $scope.data ......？

2) 像往常一样生成 D3，但将其放入动态生成的表格单元格中，如下所示：

```
for (var i = 0; i < _data.length; i++) {
var svgContainer = d3.select("#a" + _data[i].index).append("svg")  //circleData[0].ci
            .attr("width", 20)
            .attr("height", 20)
            .attr("class", "circlesOnTheRight"); 
```

但是，“html-template”（ng-repeat/{{...}} - 东西）的“编译”总是在最后。如果将新元素添加到数组中，我的函数将始终在 angular 创建新表格单元格之前触发。当我尝试它时，甚至 $scope.$on('includeContentLoaded', alert("...")); 在 angular 完成之前触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T05:01:18.080

> 我不知道如何告诉指令，我的小 svg-circle 元素应该具有哪种颜色。此信息在 $scope.data 中

将颜色作为属性传递给将使用指令的同一元素（无论在哪里）：

```
<some_element dir-circle the-color="d.color??"></some_element> 
```

然后在你的指令中：

```
return function ($scope, elm, attrs) { 
   // $scope.$eval(attrs.theColor) contains your color 
```

# meteor - Meteor：服务器端数据库插入延迟

> ID：14637302
> 
> 赞同：4
> 
> 时间：2013-01-31T23:49:26.713
> 
> 标签：meteor

有趣的问题：我有一个 MongoDb 集合，我正在更新服务器端，Meteor 客户端挂钩到同一个集合中。我注意到 mongo-cursor（服务器端）插入记录到客户端的延迟约 10 秒。

这就是问题所在：如果我通过 Meteor 客户端（通过 Chrome 控制台）进行相同的插入，客户端和所有其他附加的更新都具有亚秒级的响应时间。

服务器端插入 Mongo 与客户端之间存在很大差异 - 不知何故，客户端插入传播并推送到其他客户端*的*速度比我通过 MongoDb shell 手动插入文档要快得多。

对此有什么想法吗？我确定我错过了什么...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T02:17:15.240

Meteor mongo 驱动程序*每 10 秒轮询一次 Mongo 中的更改，*以确保从 Meteor 外部写入其中的数据向下传递到客户端。这是相关的[源代码](https://github.com/meteor/meteor/blob/master/packages/mongo-livedata/mongo_driver.js#L592)：

```
 // every once and a while, poll even if we don't think we're dirty,
  // for eventual consistency with database writes from outside the
  // Meteor universe
  var intervalHandle = Meteor.setInterval(
    _.bind(self._ensurePollIsScheduled, self), 10 * 1000 /* 10 seconds */);
    self._stopCallbacks.push(function () {
    Meteor.clearInterval(intervalHandle);
  }); 
```

[根据核心开发者之一 Matt Debergalis 的说法，](https://groups.google.com/d/msg/meteor-talk/F3Ctw_EhE24/P-nlKrFpURAJ)这种行为**可能会改变** ：

> 这种轮询是为了让 Meteor 注意到不是通过 Meteor 服务器进程来的 DB 更改。
> 
> 但是，许多应用程序不需要这个。我们正在考虑禁用它的方法。我们在漏斗中也有一个更有效的实现。

# javascript - 相对于当前窗口的 Chrome 扩展打开弹出窗口

> ID：14637312
> 
> 赞同：1
> 
> 时间：2013-01-31T23:50:11.273
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在尝试创建一个 Chrome 扩展程序，它将在相对于最近聚焦的窗口的位置弹出一个新窗口。我认为我没有正确使用`chrome.windows.getCurrent`or`chrome.windows.getLastFocused`方法来做到这一点。每次我这样做时，`undefined`当我尝试显示该窗口的属性时都会收到警报。

在我的`background.js`文件中，我有：

```
chrome.pageAction.onClicked.addListener(showPopup);
function showPopup() {
  var left = chrome.windows.getCurrent(function (w) {
    w.left - 200; 
    // also tried: return w.left - 200;
  });
  alert(left); // undefined
} 
```

阅读[chrome.windows API 文档](http://developer.chrome.com/extensions/windows.html)让我对如何实际返回窗口的属性感到困惑。任何人都可以在这里阐明一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:37:11.227

我不确定是否有另一种（或更好的）方法可以做到这一点，但我得到了这个工作：

```
chrome.pageAction.onClicked.addListener(getCurrentInfo);
function getCurrentInfo() {
  chrome.windows.getCurrent(showPopup);
}
function showPopup(win) {
  alert(win.left); // correct pixel count from left
} 
```

我最初的尝试是错误的，因为我试图从`get()`回调函数返回一个值并将其放入变量中。这基本上评估为`var left = chrome.windows.get(winId, 790)`，这是一个无效的函数调用。而不是这样，我的调用`chrome.windows.create()`需要**在**回调函数中。

此外，之前的一个失误是点击侦听器调用带有`tab`参数的函数，而不是`window`参数。所以我需要这个`getCurrentInfo()`函数传入一个`tab`然后`chrome.windows.getCurrent()`传入窗口信息。

# php - 如何在html的同一页面中显示来自数据库的结果

> ID：14637313
> 
> 赞同：-1
> 
> 时间：2013-01-31T23:50:24.207
> 
> 标签：php, mysql, html

我目前是 php 的新手。我正在尝试将数据库中的结果显示到同一个 html 页面。但是没有使用表单进行搜索，搜索是通用的。如何在同一页面中显示结果？

例如继承人我的html页面的一部分

```
 <body>
    <div class="div1>
<a href="">button to display results</a>
</div>
<div class="div2">
</div> 
```

在我的 php 中一切正常。但是我希望当用户单击“按钮显示结果”链接时，数据库中的结果应该显示在 div2 中。我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:56:09.327

试试这个：它将导致页面刷新，将 1 传递给查询字符串以指示是否显示

```
<div class="div1>
      <a href="/?display=1">button to display results</a>
    </div>
    <div class="div2">
      <?php
         $display = $_GET['display'];

         if($display)
         {
             //do some dispaly here
         }
      ?>

</div> 
```

# css - 重叠侧边栏列表 CSS

> ID：14637314
> 
> 赞同：0
> 
> 时间：2013-01-31T23:50:50.680
> 
> 标签：css

在此页面的侧边栏上：http: [//www.sandiegolawfirm.com/business/](http://www.sandiegolawfirm.com/business/)

您可以看到在左侧边栏（向下滚动）第 3 级子页面列表项与其父页面列表项重叠。我一直试图让它正确堆叠，但运气不佳。有人知道我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:54:39.980

如果您指的是“申请商标注册”部分，那么当我删除

```
.menu li ul ul {
   margin: -30px 0 0 159px;
} 
```

从`style.css`第**2356**行开始，它看起来好多了。

# css - 网站不会居中

> ID：14637320
> 
> 赞同：0
> 
> 时间：2013-01-31T23:51:35.147
> 
> 标签：css, wordpress

使用 Wordpress 主题，并且需要在调整浏览器窗口大小时使蓝色模糊背景与滑块保持一致。我已经实现了这个目标，但是我注意到当您缩小浏览器时，所有内容都不会保持居中，左侧有很大的空间。解决此问题的最佳方法是什么？

[http://www.stringcreative.ca/wp/](http://www.stringcreative.ca/wp/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:06:20.413

这是因为您将滑块居中的解决方案不优雅，并且依赖于固定宽度和绝对定位以使其看起来正确。

要修复它，您需要更改一些内容。

**将#homebgw**更改为：

```
#homebgw {
    background: url("http://www.stringcreative.ca/wp/wp-content/themes/Rbox2Pro/images/masthead.jpg") no-repeat scroll 50% -117px transparent;
    height: 411px;
    width: 100%;
} 
```

**将#header**更改为：

```
#header {
    background: url("http://www.stringcreative.ca/wp/wp-content/themes/Rbox2Pro/images/masthead.jpg") no-repeat scroll 50% 0;
    height: 100px;
    margin: 0 auto;
    padding-bottom: 35px;
    width: 1400px;
} 
```

很简单，您不需要绝对定位来解决您上面发布的问题。如果您使用绝对定位和负边距来纠正中心对齐问题，您可能做错了什么。保持简单，谷歌如何实现你想要的结果。网络上充满了有用的文档来实现这些基本结果，而无需通过修复来破坏您的代码；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:26:13.813

网站有点乱，你需要有图像的包装器，然后以相同大小的容器居中

```
#wrapper {
background: #000b1a url("http://www.stringcreative.ca/wp/wp-content/themes/Rbox2Pro/images/masthead.jpg") no-repeat fixed top center;
}

#header_container {
margin: 0 auto;
height: 117px;
width: 960px;
position: relative;
} 
```

不需要将很多位置设置为绝对位置，并将边距设置为 - 以使其适合。还可以查看 960 网格系统。我一直都在使用它，并为我节省了大量时间来适应网站。希望这可以帮助

# jquery - 显示和隐藏多个 div jquery 显示/隐藏/切换

> ID：14637323
> 
> 赞同：1
> 
> 时间：2013-01-31T23:52:06.120
> 
> 标签：jquery, hide, toggle, show

我在我的页面中使用 3 个按钮和 3 个部分。这是精简的代码。

[http://jsfiddle.net/f6P87/17/](http://jsfiddle.net/f6P87/17/)

**加载页面时：** 显示FilterBtn，隐藏ResultBtn，显示DetailsBtn。Filters div 被隐藏，Results div 被显示，Details div 被隐藏。

**如果用户点击 detailsBtn：** filterBtn 被隐藏，ResultsBtn 被显示，ResultsSection div（包括 results div 和 filters div）被隐藏，Details div 被显示。

**如果用户点击 resultsBtn：** filterBtn 显示，resultsBtn 隐藏，results div 显示，filters div 隐藏，details div 隐藏。

**如果用户点击filterBtn：** filterBtn被隐藏，resultsBtn被显示，results div被隐藏，filters div被显示，details div被隐藏。

这目前没有按我想要的方式工作。当我单击一个按钮时，无论我如何在脚本中排列它们，两个 div 都将被隐藏。有人可以帮助我使用脚本逻辑来完成这项工作吗？

这是HTML：

```
<div id="wrap">
    <div class="row">
        <div id="filterBtn"> <a href="#" class="button">Filters Button</a> 
        </div>
        <div id="resultsBtn"> <a href="#" class=" button">Results Button</a> 
        </div>
    </div>
    <div id="resultsSection" class="row" style="display:block;">
        <div id="filters">Filters Section</div>
        <div id="results">Results Section
            <div class="hide-for-small detailsBtn"> <a href="#" class=" button">Details Button</a> 
            </div>
        </div>
        <!-- Details -->
        <div id="detailSection" class="row details" style="padding-top:0px" ;>
            <div class="row">
                 <h3><small>Details Section</small></h3>

            </div>
        </div> 
```

和脚本：

```
$("#resultsBtn").click(function () {
    $("#detailSection").show("slow");
    $("#resultsSection").toggle("slow");
    $("#resultsBtn").hide("fast");
});

$(".detailsBtn").click(function () {
    $("#detailSection").show("slow");
    $("#resultsSection").hide("slow");
    $("#resultsBtn").show("fast");
      $("#filtersBtn").hide("fast");
});

$("#filterBtn").click(function () {
    $("#resultsBtn").show("fast");
    $("#filterBtn").hide("fast");
    $("#filters").show("slow");
    $("#resultsSection").hide("slow");    
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:00:13.680

根据您的 HTML，所有内容都隐藏的原因是因为您告诉它隐藏结果部分，该部分包含所有内容。

```
$("#filterBtn").click(function () {
    $("#resultsBtn").show("fast");
    $("#filterBtn").hide("fast");
    $("#filters").show("slow");

    // This hides the whole section which is wrapping around everything
    $("#resultsSection").hide("slow");    
}); 
```

我认为您必须再次满足您的期望，并确保您针对正确的元素。一旦工作，您可以优化方法。我试着把它整理出来，但这需要一点时间。

您几乎没有问题，除了`</div>`缺少一些 1 或 2 并且必须添加，过滤器按钮事件中的最后一行应该引用`#results`元素而不是`#resultsSection`并且在一些地方您有过滤器的元素 id按钮拼写错误。你写`#filtersBtn`而不是`#filterBtn`.

无论如何，以下内容现在应该符合您的期望。现在，隐藏/显示的顺序与您在期望中列出的顺序相同。

--

[**演示**](http://jsfiddle.net/AtZXw/)- 新代码

--

```
$("#resultsBtn").click(function () {
    $("#resultsSection").show("slow");
    $("#filterBtn").show("fast");
    $("#resultsBtn").hide("fast");
    $("#results").show("slow");
    $("#filters").hide("slow");
    $("#detailSection").hide("slow");
});

$(".detailsBtn").click(function () {
    $("#filterBtn").hide("fast");
    $("#resultsBtn").show("fast");
    $("#resultsSection").hide("slow");
    $("#detailSection").show("slow");
});

$("#filterBtn").click(function () {
    $("#filterBtn").hide("fast");
    $("#resultsBtn").show("fast");
    $("#results").hide("slow");
    $("#filters").show("slow");
    $("#detailSection").show("slow");
}); 
```

# ruby-on-rails-3 - 后退导航未在骨干 js 和 rails 3 应用程序中重新加载 jwplayer

> ID：14637324
> 
> 赞同：1
> 
> 时间：2013-01-31T23:52:07.610
> 
> 标签：ruby-on-rails-3, backbone.js, navigation, render, jwplayer

我的应用程序是一个 rails 3 应用程序，它使用主干.js 和 jw 播放器来播放视频播放列表。视频的 index_view 将所有视频加载到 jw 播放器的播放列表中。当我离开索引页面时，我的问题就出现了，让我们对单个视频的 show_view 说。当我单击浏览器的后退按钮时，当 jw 播放器尝试再次加载时出现错误。

```
Uncaught TypeError: Object #<Object> has no method 'setup' 
```

我认为问题在于模板没有加载播放器用来实例化自身的 html 元素。这是我目前的理论。如果您查看，`index_view.js.coffee`您会看到在`render`我使用 JQuery`$(document).read ->`方法加载播放器的方法中。如果我删除它，播放器不会加载，我会看到同样的错误。

```
Uncaught TypeError: Object #<Object> has no method 'setup' 
```

只需在不存在的 CSS id 上调用 jwplayer 即可重现此错误。即`jwplayer('non-existant-id').setup(...)`会产生同样的错误。我对主干很陌生，但我认为 JQuery document.ready 方法在索引页面的初始加载后没有任何效果。使用`#`路由后，DOM 永远不会重新加载，因此当我导航回索引页面时，id 'my-video' 尚不存在，因此调用`jwplayer('my-video')`会产生错误。有什么`Backbone.ready`方法吗？:)

所以这里有一些代码，让我知道你是否需要其他任何东西：

`index.html.erb`视频的导轨视图

```
<div id="videos"></div>

<script type="text/javascript">
  $(function() {
    // Blog is the app name
    window.router = new SeehearmeWebapp.Routers.VideosRouter({videos: <%= @videos.to_json.html_safe -%>, users: <%= @users.to_json.html_safe -%>, questions: <%= @questions.to_json.html_safe -%>});
    Backbone.history.start();
  });
</script> 
```

`videos_router.js.coffee`

```
class SeehearmeWebapp.Routers.VideosRouter extends Backbone.Router
  initialize: (options) ->
    @videos = new SeehearmeWebapp.Collections.VideosCollection()
    @videos.reset options.videos
    @users = new SeehearmeWebapp.Collections.UsersCollection()
    @users.reset options.users
    @playlist = []
    @questions = options.questions
    for i in [0..@videos.length-1]
      video = @videos.models[i]
      versions = video.attributes.versions[6]
      images = video.attributes.thumbnails[0]
      question = @questions[parseInt(video.attributes.question_id)-1]
      if !(question == undefined)
        title = question.text
      else
        title = ""

      if !(versions == undefined)
        creator_id = video.attributes.creator_id.toString()
        @playlist.push {file: versions.url, creator_id: creator_id, gender: @users.get(creator_id).attributes.gender, question: title ,  image: images.url}

  routes:
    "new"      : "newVideo"
    "index"    : "index"
    ":id/edit" : "edit"
    ":id"      : "show"
    ".*"        : "index"

  newVideo: ->
    @view = new SeehearmeWebapp.Views.Videos.NewView(collection: @videos)
    $("#videos").html(@view.render().el)

  index: ->
    @view = new SeehearmeWebapp.Views.Videos.IndexView(videos: @videos, users: @users, playlist: @playlist)
    $("#videos").html(@view.render().el)

  show: (id) ->
    video = @videos.get(id)

    @view = new SeehearmeWebapp.Views.Videos.ShowView(model: video)
    $("#videos").html(@view.render().el)

  edit: (id) ->
    video = @videos.get(id)

    @view = new SeehearmeWebapp.Views.Videos.EditView(model: video)
    $("#videos").html(@view.render().el) 
```

`index_view.js.coffee`

```
SeehearmeWebapp.Views.Videos ||= {}

class SeehearmeWebapp.Views.Videos.IndexView extends Backbone.View
  template: JST["backbone/templates/videos/index"]

  playerHeight = '360'
  playerWidth = '640'
  defaultVersion = 0
  playlist = []

  initialize: () ->
    @options.videos.bind('reset', @addAll)
    playlist = @options.playlist

  addAll: () =>
    @options.videos.each(@addOne)

  addOne: (video) =>
    view = new SeehearmeWebapp.Views.Videos.VideoView({model : video})
    @$("tbody").append(view.render().el)

  render: =>
    $(@el).html(@template(videos: @options.videos.toJSON() ))
    @addAll()

    $(document).ready ->
      player = jwplayer('my-video')
      player.setup({playlist: playlist,  width: playerWidth, height: playerHeight, skin: "/jwplayer/skins/six/six.xml"})

    return this 
```

`index.jst.ejs`

```
<div class="video-container">
    <div class="row gender-toggle-row">
        <div class="gender-toggle-label span1">Show Me: </div>
        <div class="btn-group gender-dropdown-group">
            <button class="btn btn-extra-large gender-dropdown gender-dropdown-display">Women and Men</button>
            <button class="btn btn-extra-large dropdown-toggle gender-dropdown" data-toggle="dropdown">
                <img src="assets/down-arrow.png" />
            </button>
            <ul class="dropdown-menu gender-dropdown-menu">
                <li><a class="gender-toggle-element" href="#">Women</a></li>
                <li><a class="gender-toggle-element" href="#">Men</a></li>
                <li><a class="gender-toggle-element" href="#">Women and Men</a></li>
            </ul>
        </div>
    </div>
    <div class="cinema-ribbon-sides"></div>
    <div class="cinema-ribbon"><h2 id="question-text" class="white centered-text">seehear.me</h2></div>
    <div id='my-video'></div>
    <div class="cinema-shadow"></div>
    <div class="cinema-controls">
        <a id="prev-video" class="cinema-prev"></a>
        <a href="#/71" role="button" class="meet"><div class="meet-btn-text">meet her</div></a>
        <a id="next-video" class="cinema-next"></a>
    </div>
</div>
<br /> 
```

`show_view.js.coffee`

```
SeehearmeWebapp.Views.Videos ||= {}

class SeehearmeWebapp.Views.Videos.ShowView extends Backbone.View
  template: JST["backbone/templates/videos/show"]

  render: ->
    $(@el).html(@template(@model.toJSON() ))
    return this 
```

`show_view.js.coffee`

```
<h1>THIS IS A VIDEO</h1>

<a href="#/">Back</a> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T06:15:32.303

当您以这种方式呈现 Backbone 视图并将其添加到页面时：

```
$("#videos").html(@view.render().el) 
```

您正在渲染到尚未添加到页面的 DOM 元素。由于您尝试在 中设置 jwplayer `render()`，因此 jwplayer 可能找不到该元素。

如果您先将视图添加到页面，然后渲染，它可能会起作用。

```
$("#videos").html(@view.el)
@view.render() 
```

现在，当您渲染模板时，它实际上是在 jwplayer 尝试找到该元素之前的页面上。

# ios - 将 PEM 编码的 X.509 证书导入 iOS KeyChain

> ID：14637328
> 
> 赞同：4
> 
> 时间：2013-01-31T23:52:24.280
> 
> 标签：ios, c, encryption, cryptography, openssl

我从某处收到一个包含 PEM 编码的 X.509 证书的字符串。我想将此证书导入 iOS 的 KeyChain。

我打算做以下事情：

1.  将 NSString 转换为 openssl X509
2.  创建 PKCS12
3.  将 PKCS12 转换为 NSData
4.  使用 SecPKCS12Import 导入 NSData

到目前为止，我想出了以下代码：

```
const char *cert_chars = [certStr cStringUsingEncoding:NSUTF8StringEncoding];

BIO *buffer = BIO_new(BIO_s_mem());
BIO_puts(buffer, cert_chars);

X509 *cert;
cert = PEM_read_bio_X509(buffer, NULL, 0, NULL);
if (cert == NULL) {
    NSLog(@"error");
}
X509_print_fp(stdout, cert);

EVP_PKEY *privateKey;
const unsigned char *privateBits = (unsigned char *) [privateKeyData bytes];
int privateLength = [privateKeyData length];

privateKey = d2i_AutoPrivateKey(NULL, &privateBits, privateLength);

if (!X509_check_private_key(cert, privateKey)) {
    NSLog(@"PK error");
}

PKCS12 *p12 = PKCS12_create("test", "David's Cert", privateKey, cert, NULL, 0, 0, 0, 0, 0); 
```

不幸的是，即使 X509_check_private_key 成功并且 X509_print_fp(stdout, cert) 打印了有效的证书， p12 也为零。

1.  我的方法正确吗
2.  PKCS12_create 怎么会失败？

**更新：**

调用 PKCS12_create 似乎在以下方法中失败：

```
int EVP_PBE_CipherInit(ASN1_OBJECT *pbe_obj, const char *pass, int passlen,
           ASN1_TYPE *param, EVP_CIPHER_CTX *ctx, int en_de)
{
const EVP_CIPHER *cipher;
const EVP_MD *md;
int cipher_nid, md_nid;
EVP_PBE_KEYGEN *keygen;

if (!EVP_PBE_find(EVP_PBE_TYPE_OUTER, OBJ_obj2nid(pbe_obj),
                &cipher_nid, &md_nid, &keygen))
    {
    char obj_tmp[80];
    EVPerr(EVP_F_EVP_PBE_CIPHERINIT,EVP_R_UNKNOWN_PBE_ALGORITHM);
    if (!pbe_obj) BUF_strlcpy (obj_tmp, "NULL", sizeof obj_tmp);
    else i2t_ASN1_OBJECT(obj_tmp, sizeof obj_tmp, pbe_obj);
    ERR_add_error_data(2, "TYPE=", obj_tmp);
    return 0;
    }

if(!pass)
    passlen = 0;
else if (passlen == -1)
    passlen = strlen(pass);

if (cipher_nid == -1)
    cipher = NULL;
else
    {
    cipher = EVP_get_cipherbynid(cipher_nid);
    if (!cipher)
        {
        EVPerr(EVP_F_EVP_PBE_CIPHERINIT,EVP_R_UNKNOWN_CIPHER);
        return 0;
        }
    }

if (md_nid == -1)
    md = NULL;
else
    {
    md = EVP_get_digestbynid(md_nid);
    if (!md)
        {
        EVPerr(EVP_F_EVP_PBE_CIPHERINIT,EVP_R_UNKNOWN_DIGEST);
        return 0;
        }
    }

if (!keygen(ctx, pass, passlen, param, cipher, md, en_de))
    {
    EVPerr(EVP_F_EVP_PBE_CIPHERINIT,EVP_R_KEYGEN_FAILURE);
    return 0;
    }
return 1;   
} 
```

检索密码

```
cipher = EVP_get_cipherbynid(cipher_nid); 
```

以某种方式为“RC2-40-CBC”返回 nil。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T14:20:10.433

在创建 PKCS12 之前缺少以下调用：

```
OpenSSL_add_all_algorithms();
OpenSSL_add_all_ciphers();
OpenSSL_add_all_digests(); 
```

这些解决了丢失密码的问题以及丢失摘要的后续问题。

# opengl - OpenGL中不同的缩放方式

> ID：14637334
> 
> 赞同：1
> 
> 时间：2013-01-31T23:53:02.707
> 
> 标签：opengl, matrix, zooming

目前，我通过根据一些用户输入（键盘功能）将相机位置转换为 z 方向来实现 OpenGL 中的缩放效果。现在，我查看了其他几个使用缩放的示例，并且有点困惑是否有不同的方法来执行此操作：例如，通过使用 glm::perspective 更改 FOV。更改 The fov 和我的 z 平移之间是否有区别，如果是，哪种方式更好？我也不太明白什么时候在缩放的上下文中使用 glm::scale ，因为我也没有使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T23:59:00.283

> 我通过将相机位置转换为 z 方向在 OpenGL 中实现缩放效果

那不是Zoom，那是Dolly。缩放是视场的变化，即投影参数的变化。

> 如果是这样，哪种方式更好？

两者都不是，它们是完全不同的运动。您可以结合 Dolly 和 Zoom 来实现 Dolly-Zoom Alfred Hitchcock 的著名。请参阅此站点以获取相机移动列表：

[http://www.mediacollege.com/video/shots/movement.html](http://www.mediacollege.com/video/shots/movement.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:14:56.800

我还通过缩放世界矩阵创建了缩放效果。

即缩放 5 倍，您可以将此矩阵应用于矩阵堆栈：

```
 5    0   0   0
  0    5   0   0
  0    0   5   0
  0    0   0   1 
```

# php - 当在 URL 中传递多个值时，用 PHP 重写 URL

> ID：14637335
> 
> 赞同：0
> 
> 时间：2013-01-31T23:53:07.700
> 
> 标签：php, mod-rewrite

我目前正在研究如何使用 Mod rewrite 修改 php 中的 URL。

典型的 URL 可能如下所示：

[http://www.fitness.com/find_a_pt/?county=&constituency=211&gender=&action=search](http://www.fitness.com/find_a_pt/?county=&constituency=211&gender=&action=search)

现在在上面的例子中只选择了一个选区。未指定县或性别。

现在上述选区指的是“达特福德”。

因此，如果 URL 显示为：

[http://www.fitness.com/find_a_pt/dartford](http://www.fitness.com/find_a_pt/dartford)

现在增加的复杂性是性别可能是：

1) 未选择 - 根据上面的 URL

2) 男性

[http://www.ego3fitness.com/find_a_pt/?county=&constituency=211&gender=1&action=search](http://www.ego3fitness.com/find_a_pt/?county=&constituency=211&gender=1&action=search)

3) 女性

[http://www.ego3fitness.com/find_a_pt/?county=&constituency=211&gender=&actiom=search](http://www.ego3fitness.com/find_a_pt/?county=&constituency=211&gender=&actiom=search)

因此，URL 需要阅读：

1) [http://www.fitness.com/find_a_pt/dartford](http://www.fitness.com/find_a_pt/dartford)

2) [http://www.fitness.com/find_a_pt/dartford/male](http://www.fitness.com/find_a_pt/dartford/male)

3) [http://www.fitness.com/find_a_pt/dartford/female](http://www.fitness.com/find_a_pt/dartford/female)

首先，是否有可能通过 URL 重写来做到这一点，如果可以，有人可以提供一个示例供我使用。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:09:51.990

我总是使用相同的 mode_rewrite 规则：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

有了这个规则，一切都被转发到 index.php。所以你可以自由地用 PHP 实现每一个 url 逻辑。

您可以获取请求 uri`$_SERVER['REQUEST_URI']`并做任何您想做的事情。

很高兴有一个带有正则表达式规则的路由类来解析 uri。[在这里](https://github.com/robap/php-router)查看一个示例，并阅读 Zend、Code Igniter 等大型框架如何做到这一点。（顺便说一下，我提供的重写规则来自 Zend Framework）

# php - 将 PHP Glob 与 Retina.js 一起使用会拉取所有图像，包括 @2x

> ID：14637337
> 
> 赞同：0
> 
> 时间：2013-01-31T23:53:17.697
> 
> 标签：php, glob, retina.js

我将[http://retinajs.com/](http://retinajs.com/) (Retina.js) 用于我的投资组合网站。Retina.js 要求使用相同的文件名和扩展名将 @2x 图像放置在同一目录中。例如，当retina.js 注意到设备正在使用更高的DPI 时，image01.jpg 将被替换为image01@2x.jpg。

我的问题是我还使用 PHP glob 函数来检索目录中的所有图像文件并将它们显示在页面上。这意味着即使在普通的 72 dpi 屏幕上，它也会同时拉取 @2x 图像。但是@2x 图像只应该加载到具有更高 DPI 的屏幕上。

我的简单 PHP 代码是：

```
$files = glob('images/projects/'.$filename.'/*.{jpg}', GLOB_BRACE);

    foreach($files as $file) {

        echo '<img src="'.$file.'" title="'.$title.'" />';

    } 
```

有没有办法让retina.js 和PHP glob 一起工作？我的目标是拉取目录中的所有图像，除了@2x 图像以用于正常的 72dpi 屏幕。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:08:45.670

简单的方法：

```
foreach($files as $file) {
    //check that the file doesn't have @2x in the name.
    if(strpos($file, '@2x')===false){
        echo '<img src="'.$file.'" title="'.$title.'" />';
    }
} 
```

# java - Java Persistence 与自我的多对多关系

> ID：14637343
> 
> 赞同：1
> 
> 时间：2013-01-31T23:53:46.807
> 
> 标签：java, database, annotations, many-to-many, persistence

我有一个用户类，用户应该有一个朋友列表。朋友也是用户，所以每个用户都应该有很多朋友，显然每个朋友（用户）也有很多朋友（用户）。

所以到目前为止，我已经假设了用户的多对多关系。这是目前我一直在使用的代码（带有休眠 JPA 注释）

这是我的 MyUser 代码：

```
@Entity
public class MyUser {

@Id
private String username;
private String userPassword;

@ManyToMany
  @JoinTable(
  name="USR_USR",
  joinColumns={@JoinColumn(name="USR1_ID", referencedColumnName="USERNAME")},
  inverseJoinColumns={@JoinColumn(name="USR2_ID", referencedColumnName="USERNAME")})
private List<MyUser> friends = new ArrayList<MyUser>();

public void setUsername(String username) {
    this.username = username;

public void setUserPassword(String userPassword) {
    this.userPassword = userPassword;
}

public String getUsername() {
    return username;

public String getUserPassword() {
    return userPassword;
}

public void setFriends(List<MyUser> friends) {
    this.friends = friends;
}

public List<MyUser> getFriends() {
    return friends;
} 
```

我正在尝试通过将 USERNAME 列与自身连接来创建第二个表（老实说，这对我来说听起来不太正确。）

所以我试图在我的数据库中创建一个关系，其中每个 MyUser 可以有许多 MyUser。

我非常坚持这一点，所以一些帮助将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:01:39.630

我建议将您的数据库架构更改为以下内容：

```
MyUser(id, ....);
Friends(id1, id2); 
```

其中 MyUser.id 是 MyUser 的主键，Friends id1 和 id2 是 MyUser.id 的外键。

这是一种非常常见的模式，将来会给您带来更少的问题，并且更易于维护。如果好友数据库 (1, 2) 中有一个元组，则用户 A (w/ ID 1) 是用户 B (w/ ID 2) 的好友。

希望有帮助，

# c++ - 即使模板函数在任何地方都没有调用，static_assert 也无法编译

> ID：14637356
> 
> 赞同：41
> 
> 时间：2013-01-31T23:55:00.260
> 
> 标签：c++, templates, c++11, g++, static-assert

我使用带有标志 c++0x 的 g++ 4.6.3（当前是 ubuntu 12.04 的默认包），我偶然发现了这个：

```
template <typename T>
inline T getValue(AnObject&)
{
    static_assert(false , "this function has to be implemented for desired type");
} 
```

编译错误：

```
static_assertion failed "this function has to be implemented for the desired type" 
```

**即使我还没有在任何地方调用这个函数**。

它是一个 g++ 错误吗？仅当在代码中的某处调用此函数时才应实例化此函数。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-02-01T00:11:09.520

标准在 [temp.res]/8 中说

> 对于可以生成有效特化的模板定义，不应发出诊断。如果无法为模板定义生成有效的特化，并且该模板未实例化，则模板定义格式错误，无需诊断。... *[注：*如果模板被实例化，错误将根据本标准中的其他规则进行诊断。准确诊断这些错误的时间是实施质量问题。*——尾注]*

无法实例化将编译的函数模板，因此模板定义格式错误，因此即使未实例化，编译器也允许（但不是必需）拒绝它。

你可以让它像这样工作：

```
template<typename T>
struct foobar : std::false_type
{ };

template <typename T>
inline T getValue(AnObject&)
{
    static_assert( foobar<T>::value , "this function has to be implemented for desired type");
} 
```

现在编译器不能立即拒绝函数模板，因为在它被实例化之前，它不知道是否会有`foobar`那个 has的特化`value == true`。当实例化时，相关的特化`foobar<T>`将被实例化，静态断言仍然会失败，如所愿。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-01-31T23:56:27.290

这是因为条件不以任何方式依赖于模板参数。因此，编译器甚至可以在实例化该模板之前对其进行评估，并在评估产生时产生相关的编译错误消息`false`。

换句话说，这不是一个错误。虽然很多事情只能在模板实例化后才能检查，但编译器甚至可以在之前执行其他有效性检查。例如，这就是 C++ 具有两阶段名称查找的原因。编译器只是试图帮助您找到 100% 可能发生的错误。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-01T00:09:37.243

这确实是一个注释，但需要一个代码示例。

神圣标准的措辞`static_assert`并不限制其对实例化代码的影响。

然而，代码

```
template <typename T>
inline T getValue(int&)
{
    typedef char blah[-1];  // Common C++03 static assert, no special semantics.
}

int main()
{} 
```

也无法使用 MinGW g++ 4.7.2 编译，这突出了这个问题。

我*认为*答案是 g++ 是对的，而不会为此产生编译错误的 Visual C++ 11.0 是错误的，但我很难根据神圣标准的经文提供相关分析。

编译器差异的一个实际后果是目前您不能*依赖*该行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-04T15:03:18.287

只是`-fdelayed-template-parsing`

# javascript - 这是一个错误还是 FireFox 的预期设计？

> ID：14637357
> 
> 赞同：0
> 
> 时间：2013-01-31T23:55:00.993
> 
> 标签：javascript, internet-explorer, firefox, web-applications

在 FireFox 中，使用 JavaScript，当用户在警报窗口上按下回车键选择“确定”时，`onkeyup`就会触发。在 Internet Explorer 中，这不会发生。

这段 HTML 代码演示了我在说什么。打开它，在文本字段中输入一个字符，然后按回车键选择“确定”。在 FireFox 和 IE 中试一试。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>JS example</title>
    <script type="text/javascript">
        function popup()
        {
                alert("bam")
        }
    </script>
</head>
<body>
<form>
    Each inputted character causes an alert window:<input type="text" onkeyup="popup()" />
</form>
</body>
</html> 
```

这是设计的还是这是一个问题？如何防止 FireFox 再次触发？

编辑：我[在 bugzilla 上](https://bugzilla.mozilla.org/show_bug.cgi?id=112298)找到了它， bugzilla 是否有“投票”或同等功能？当我试图解决问题时，这让我误入歧途，我在被调用的函数中寻找无限循环/递归。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:03:35.463

这是因为 Firefox 比其他浏览器更快地销毁它的警报，并且焦点可能会在 Enter 键仍然按下时返回到您的字段。通过按住 Enter 键的时间稍长，可以在其他浏览器中重现这一点。

# performance - 提高 CTE + 普通选择联合的查询性能

> ID：14637359
> 
> 赞同：7
> 
> 时间：2013-01-31T23:55:36.633
> 
> 标签：performance, postgresql, stored-procedures, common-table-expression, postgresql-9.2

在[Convert recursive function to view](https://stackoverflow.com/questions/13391457/convert-recursive-function-to-view/)的基础上，我想通过创建节点父节点的快照来加快从图中任意节点到其根节点的路径检索。这个想法是递归树遍历受中间快照的限制，这些快照避免了任何进一步的递归，从而加快了执行时间。我还没有进行负载测试，所以除了这个简单的示例之外，我不知道它的性能如何，但早期的试验已经表明存在一些瓶颈。我很乐意就如何加快/简化查询发表评论。我正在使用 Postgres 9.2.2.0 (20)。

```
DROP TABLE IF EXISTS revision CASCADE;
CREATE TABLE revision (
  id serial primary key,
  parent_revision_id int references revision(id),
  username varchar(128),
  ts timestamp without time zone
);

DROP TABLE IF EXISTS revision_snapshot CASCADE;
CREATE TABLE revision_snapshot (
  id serial primary key,
  revision_id int,
  parent_revision_id int,
  depth int
);

CREATE OR REPLACE FUNCTION create_revision_snapshot(_rev int)
  RETURNS void AS
$func$
DELETE FROM revision_snapshot WHERE revision_id=$1;
INSERT INTO revision_snapshot (revision_id, parent_revision_id, depth) 
  (SELECT $1, id, depth FROM revision_tree($1));
$func$ LANGUAGE sql;

-- Recursively return path from '_rev' to root
CREATE OR REPLACE FUNCTION revision_tree(_rev int)
 RETURNS TABLE(id int, parent_revision_id int, depth int) AS
$func$
   WITH RECURSIVE rev_list(id, parent_revision_id, depth) AS (
      SELECT t.id, t.parent_revision_id, 1
      FROM   revision t
      WHERE  t.id = $1

      UNION ALL
      SELECT t.id, t.parent_revision_id, r.depth + 1
      FROM   rev_list r
      JOIN   revision t ON t.id = r.parent_revision_id
   )
   SELECT t.id, t.parent_revision_id, t.depth
   FROM   rev_list t
   ORDER  BY t.id;
$func$ LANGUAGE sql;

-- Fast version of 'revision_tree' (to be). This version will return the 
-- revision tree making use of snapshots (recursively returning the path from 
-- specified revision id to last snapshot of the path to the root + the snapshot)
CREATE OR REPLACE FUNCTION revision_tree_perf(_rev int)
  RETURNS TABLE(parent_revision_id int) AS
$func$
BEGIN
  CREATE TEMP TABLE graph_result ON COMMIT DROP AS
  WITH RECURSIVE rev_list(id, parent_revision_id, depth) AS (
      SELECT t.id, t.parent_revision_id, 1
      FROM   revision t
      WHERE  t.id = $1
      UNION ALL
      SELECT t.id, t.parent_revision_id, r.depth + 1
      FROM   rev_list r
      JOIN   revision t ON t.id = r.parent_revision_id
      WHERE  not(t.id in (select revision_id from revision_snapshot))
   )
   SELECT t.id, t.parent_revision_id, t.depth
   FROM   rev_list t
   ORDER  BY t.id;
   RETURN QUERY
   SELECT g.parent_revision_id FROM graph_result AS g WHERE g.parent_revision_id IS NOT NULL 
   UNION
   SELECT s.parent_revision_id FROM revision_snapshot AS s WHERE 
     s.revision_id = (SELECT min(q.parent_revision_id) FROM graph_result as q) ORDER BY parent_revision_id;
END;
$func$
LANGUAGE 'plpgsql';

-- Example tree
--
--                                                   +-- <10>
--                                                  /
--                         +-- <4> -- <8> --- <9> -+- <11> --- <15> --- <16> --- <17>
--                        /                                    
--  <1> --- <2> --- <3> -+                                     
--                        \                                    
--                         +-- <5> --- <6> --- <7> --- <12> -+- <14> --- <18>
--                                                            \
--                                                             \
--                                                              \
--                                                               \
--                                                                +-- <13> --- <19> --- <20> --- <21>
--

INSERT INTO revision (username, ts, parent_revision_id) VALUES
  ('someone', now(), null)   -- 1
  ,('someone', now(), 1)     -- 2
  ,('someone', now(), 2)     -- 3
  ,('someone', now(), 3)     -- 4
  ,('someone', now(), 3)     -- 5
  ,('someone', now(), 5)     -- 6
  ,('someone', now(), 6)     -- 7
  ,('someone', now(), 4)     -- 8
  ,('someone', now(), 8)     -- 9
  ,('someone', now(), 9)     -- 10
  ,('someone', now(), 9)     -- 11
  ,('someone', now(), 7)     -- 12
  ,('someone', now(), 12)    -- 13
  ,('someone', now(), 12)    -- 14
  ,('someone', now(), 11)    -- 15
  ,('someone', now(), 15)    -- 16
  ,('someone', now(), 16)    -- 17
  ,('someone', now(), 14)    -- 18
  ,('someone', now(), 13)    -- 19
  ,('someone', now(), 19)    -- 20
  ,('someone', now(), 20);   -- 21

-- Create a revision snapsnot
select create_revision_snapshot(13);

-- This query is meant to be faster ...
select * from revision_tree_perf(21);

-- ... than this one
select * from revision_tree(21); 
```

上面的例子

```
select create_revision_snapshot(13);
select * from revision_tree_perf(21); 
```

旨在产生一个记录集，该记录集表示从 21 到根的路径，即`(21, 20, 19, 13, 12, 7, 6, 5, 3, 2, 1)`. 部分解决方案是通过遍历树（21 到 13，因为有 13 的快照，因此无需再遍历树）并使用从 13 到根的已经“缓存”路径（取自修订快照）。希望这会让它更容易理解......

更新：
我想出了一个潜在的改进。这只是在黑暗中刺伤，但我可以想象`exists`条款相当昂贵。我现在在修订表中标记了快照的存在：

```
CREATE TABLE revision (
  id serial primary key,
  parent_revision_id int references revision(id),
  username varchar(128),
  has_snapshot boolean default false,
  ts timestamp without time zone
);

CREATE OR REPLACE FUNCTION create_revision_snapshot(_rev int) RETURNS void AS $func$
  DELETE FROM revision_snapshot WHERE revision_id=$1;
  INSERT INTO revision_snapshot (revision_id, parent_revision_id, depth) 
    (SELECT $1, id, depth FROM revision_tree($1));
  -- Mark revision table to avoid costly exists/in clause
  UPDATE revision SET has_snapshot = true WHERE id=$1;
$func$ LANGUAGE sql; 
```

`revision_tree_perf`这将SP的 CTE 部分更改为

```
WITH RECURSIVE rev_list(id, parent_revision_id, depth) AS (
  SELECT t.id, t.parent_revision_id, 1 -- AS depth
  FROM   revision t
  WHERE  t.id = $1
  UNION ALL
  SELECT t.id, t.parent_revision_id, r.depth + 1
  FROM   rev_list r
  JOIN   revision t ON t.id = r.parent_revision_id
  WHERE  t.has_snapshot = false
)
SELECT t.id, t.parent_revision_id, t.depth FROM   rev_list t ORDER BY t.id; 
```

这应该很快执行。难题的另一部分是从修订 id where 返回 revision_snapshot 的内容，`has_snapshot=true`并将这两个结果连接起来。问题是如何从 CTE 获取此修订 ID。我可以将 CTE 的查询结果存储在临时表中并查询修订 ID，或者建议不要编写 CTE 并将其编写为循环。这样，人们可以跟踪循环退出的修订 id（何时`has_snapshot = true`）。但我不确定这将如何与 CTE 进行比较。

人们如何看待这种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:15:00.860

[这不是答案；不幸的是，我的天真观点比 OQ 中的物化版本**要慢得多；-]**

这是一个片段，可以稍微增加修订表的数量（显然，在插入 21 个 VALUES 之后）：

```
 -- clone the revision-table to make it larger
INSERT INTO revision (username, ts, parent_revision_id)
SELECT 'user' || src.id || 'clone' ||gs
        , src.ts+ gs*'1 min'::interval
        , src.parent_revision_id+ (21*gs)
FROM revision src
JOIN generate_series(1,10000) gs ON 1=1
        ;
-- SELECT * FROM revision;

VACUUM ANALYZE revision; 
```

更新：

我设法创建了自己的函数版本，它似乎比原始版本稍快（即使在原始版本之前调用）

```
DROP FUNCTION fnc_naive(_me INTEGER);
CREATE OR REPLACE FUNCTION fnc_naive(_me INTEGER)
RETURNS TABLE(fixed int, this int, ancestor int, depth int) AS $body$
    WITH RECURSIVE tree(fixed, this, some_ancestor, the_level) AS (
      SELECT t.id AS fixed, t.id AS this
        , t.parent_revision_id AS some_ancestor, 1 AS the_level
      FROM   revision t
      WHERE  t.id = $1
      UNION ALL
      SELECT tr.fixed AS fixed, rev.id AS this
        , rev.parent_revision_id AS some_ancestor
        , tr.the_level+1 AS the_level
      FROM   tree tr
      JOIN   revision rev ON rev.id = tr.some_ancestor
   )
   SELECT t.fixed, t.this, t.some_ancestor, t.the_level
        FROM   tree t
        ORDER  BY t.this
        ;
$body$ LANGUAGE sql;

-- Altered "Fast" version of 'revision_tree' (to be). This version will return the 
-- revision tree making use of snapshots (recursively returning the path from 
-- specified revision id to last snapshot of the path to the root + the snapshot)
-- Changes:
--      replaced the IN(subselect) by a corresponding EXISTS (subselect)
--      Replaced the = (select(min() subselect) by the corresponding NOT EXISTS
CREATE OR REPLACE FUNCTION revision_tree_perf_wp(_rev int)
RETURNS TABLE(parent_revision_id int) AS
$$
BEGIN
  CREATE TEMP TABLE tmp_graph_result_wp ON COMMIT DROP AS
  WITH RECURSIVE rev_list(id, parent_revision_id, depth) AS (
      SELECT t.id, t.parent_revision_id, 1
      FROM   revision t
      WHERE  t.id = $1
      UNION ALL
      SELECT t.id, t.parent_revision_id, r.depth + 1
      FROM   rev_list r
      JOIN   revision t ON t.id = r.parent_revision_id
      WHERE  NOT EXISTS (SELECT *
                FROM revision_snapshot nx
                WHERE t.id = nx.revision_id
                )
        )
   SELECT t.id, t.parent_revision_id, t.depth
   FROM   rev_list t
        ;
   RETURN QUERY
   SELECT g.parent_revision_id FROM tmp_graph_result_wp AS g
    WHERE g.parent_revision_id IS NOT NULL
   UNION
   SELECT s.parent_revision_id FROM revision_snapshot AS s
    WHERE NOT EXISTS ( SELECT *
          FROM tmp_graph_result_wp nx
          WHERE nx.parent_revision_id < s.revision_id
          )
   ORDER BY parent_revision_id
        ;
END;
$$
LANGUAGE 'plpgsql'; 
```

附加说明：我不了解“revision_snapshot”和表以及临时表“graph_result”的（预期）用法。在我看来，幼稚的treewalk*总是*会被执行，再加上一个额外的“存在于临时和/或缓存表中）在任何情况下：幼稚版本比“缓存”版本快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:49:08.670

这是一个**完全修改过的版本**。
在我的最小测试中，使用 的新功能`revision_snapshot`现在实际上更快了。
我做了很多改变。最重要的是：

*   不要将列添加到原始表中。这可能会稍微加快查询速度，但也会在主表中引入成本和开销。如果您对表格所做的一切都是执行此功能，则可能会付出代价，但在现实生活中，这只是众多任务之一。

*   从函数中删除临时表。只需 CTE 就可以便宜得多。

*   修复`ORDER BY`，这是错误的。

*   有关更多信息，请阅读代码中的**注释**。

也可以作为[->sqlfiddle](http://www.sqlfiddle.com/#!12/40d89/2)玩。

```
CREATE TABLE revision (
  revision_id serial PRIMARY KEY -- Don't use useless name "id", that's an anti-pattern of ORMs
 ,parent_revision_id int  NOT NULL REFERENCES revision(revision_id) DEFERRABLE
  -- must be DEFERRABLE for self-reference of root
 ,ts timestamp  NOT NULL -- all columns NOT NULL 
 ,has_snapshot boolean NOT NULL DEFAULT FALSE -- columns ordered for perfect packing and performance
 ,username text NOT NULL
);

CREATE TABLE revision_snapshot (
  depth int PRIMARY KEY
 ,revision_id int
);  -- simplified

-- Recursively return path from '_revision_id' to root
CREATE OR REPLACE FUNCTION revision_tree(_revision_id int)
  RETURNS TABLE(depth int, revision_id int) AS
$func$
   WITH RECURSIVE l AS (
      SELECT 1::int AS depth, r.parent_revision_id AS revision_id
      FROM   revision r
      WHERE  r.revision_id = $1

      UNION ALL
      SELECT l.depth + 1, r.parent_revision_id  -- AS revision_id
      FROM   l
      JOIN   revision r USING (revision_id)
      WHERE  r.parent_revision_id <> 0
   )
   SELECT *
   FROM   l
   ORDER  BY l.depth; -- NOT revision_id!
$func$ LANGUAGE sql;

CREATE OR REPLACE FUNCTION create_revision_snapshot(_revision_id int)
  RETURNS void AS
$func$
   -- for tiny tables, DELETE is faster than TRUNCATE
   DELETE FROM revision_snapshot;

   INSERT INTO revision_snapshot (depth, revision_id) 
   SELECT depth, revision_id
   FROM   revision_tree($1);
$func$ LANGUAGE sql;

-- Faster version of 'revision_tree'.
-- Stops recursion as soon as  revision_snapshot covers the "last mile" to root
CREATE OR REPLACE FUNCTION revision_tree_perf(_revision_id int)
  RETURNS TABLE(revision_id int) AS
$func$
BEGIN
   RETURN QUERY  -- works without expensive temp table
   WITH RECURSIVE l AS (
      SELECT 1::int AS depth, r.parent_revision_id AS revision_id  -- trim cruft, only two columns needed
      FROM   revision r
      WHERE  r.revision_id = $1

      UNION ALL
      SELECT l.depth + 1, r.parent_revision_id  -- AS revision_id
      FROM   l
      JOIN   revision r USING (revision_id)
      WHERE  r.parent_revision_id <> 0  -- stop condition needed, since parent_revision_id IS NOT NULL
      AND    NOT EXISTS (  -- NOT EXISTS faster than IN (SELECT...)
         SELECT 1 FROM revision_snapshot s WHERE s.revision_id = l.revision_id)
      )
   (  -- extra parens needed for separate ORDER BY in UNION ALL
   SELECT l.revision_id
   FROM   l
   ORDER  BY l.depth  -- NOT revision_id! Bug just didn't show because the test ids were ordered.
   )
   UNION ALL  -- NOT: UNION - correct and faster
   (
   SELECT s.revision_id
   FROM   revision_snapshot s
   WHERE  s.depth > (
      SELECT s0.depth
      FROM   revision_snapshot s0
      JOIN   l USING (revision_id)
      )  -- must be exactly 1 value - follows logically from CTE
   ORDER  BY s.depth
   );
END  -- no ; needed here
$func$ LANGUAGE plpgsql; -- DO NOT quote language name!

-- Example tree
--
--                                                      +-- <10>
--                                                     /
--                              +- <4> -- <8> -- <9> -+- <11> -- <15> -- <16> -- <17>
--                             /                                    
--  <0> -- <1> -- <2> -- <3> -+
--                             \                                    
--                              +- <5> -- <6> -- <7> -- <12> -+- <14> -- <18>
--                                                             \
--                                                              \
--                                                               \
--                                                                \
--                                                                 +- <13> -- <19> -- <20> -- <21>
--

INSERT INTO revision (revision_id, username, ts, parent_revision_id) VALUES
   (0, 'root',    now(), 0)  -- referencing itself
  ,(1, 'someone', now(), 0)
  ,(2, 'someone', now(), 1)
  ,(3, 'someone', now(), 2)
  ,(4, 'someone', now(), 3)
  ,(5, 'someone', now(), 3)
  ,(6, 'someone', now(), 5)
  ,(7, 'someone', now(), 6)
  ,(8, 'someone', now(), 4)
  ,(9, 'someone', now(), 8)
  ,(10,'someone', now(), 9)
  ,(11,'someone', now(), 9)
  ,(12,'someone', now(), 7)
  ,(13,'someone', now(), 12)
  ,(14,'someone', now(), 12)
  ,(15,'someone', now(), 11)
  ,(16,'someone', now(), 15)
  ,(17,'someone', now(), 16)
  ,(18,'someone', now(), 14)
  ,(19,'someone', now(), 13)
  ,(20,'someone', now(), 19)
  ,(21,'someone', now(), 20);

ANALYZE revision; 

-- Create a revision snapsnot
select create_revision_snapshot(13);

ANALYZE revision_snapshot; 
```

称呼：

这个查询现在应该更快了：

```
SELECT * FROM revision_tree_perf(21); 
```

..比这个：

```
SELECT * FROM revision_tree(21); 
```

# emacs - emacs shell-mode 遵循其默认目录到当前文件

> ID：14637367
> 
> 赞同：1
> 
> 时间：2013-01-31T23:55:59.927
> 
> 标签：emacs

当我进入`cd c:/dir/to/path`shell 模式时，shell 模式会跟随它`default-directory`，`c:/dir/to/path`这很好。但是在访问某个文件（c:/another/dir/file.ext）时，我怎样才能让现有的shell目录不进入那个目录`cd c:/antoher/dir/file.ext`呢？

在 emacs 中是否有任何预先存在的功能？搜索了很多，但不幸的是没有找到。

我在 Win7 中使用 Emacs 24.2.1。

编辑：

我写了一个不好看的函数，如下所示。任何建议/建议将不胜感激（我是 elisp 的新手）。（通过带前缀的交互式调用，它将显示带有当前目录的 shell 缓冲区。我反复思考可能已经发明了比这更好的东西）。

```
 (defun my-shell-with-current-directory (&optional arg)
  (interactive "P")
  (let* ((sp (get-process "shell"))
         (spbuf (and sp (process-buffer sp)))
         (dir (if buffer-file-name (file-name-directory buffer-file-name) default-directory)))
    (if (and arg sp spbuf dir)
        (progn 
          (comint-simple-send sp (concat "cd /d " dir))
          (display-buffer spbuf)
          (save-excursion
            (set-buffer spbuf)
            (cd dir)
            )
          )
      (progn
        (shell)
        (comint-simple-send sp "setlocal enableextensions")
        )
      )
    )
  ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:37:37.017

您可以随时使用 setq 设置默认目录。您可以将该代码作为挂钩添加到 find-file-hooks 上。您也可以建议使用所需设置的 find-file 命令。到目前为止只是我的想法...

# c++ - 如果它们只创建一次，那么使用数百个线程是否安全？

> ID：14637370
> 
> 赞同：0
> 
> 时间：2013-01-31T23:56:11.863
> 
> 标签：c++, multithreading, thread-safety, threadpool

基本上我有一个 Task 和一个 Thread 类，我创建的线程数量等于物理内核（或逻辑内核，因为在 Intel CPU 内核上它们是计数的两倍）。

所以基本上线程从任务列表中获取任务并执行它们。但是，我必须确保一切都是安全的，并且多个线程不要尝试一次执行相同的任务，当然这会带来额外的开销（和头痛） .

我将任务功能放在线程中是什么意思？我的意思是 - 而不是 4 个线程从 200 个任务池中抓取任务，为什么不是 200 个线程以 4 x 4 为一组执行，基本上我不需要同步任何东西，不锁定，什么都没有。当然，我不会在整个运行时创建线程，只是在初始化时。

这种方法有什么优缺点？我可以忽略的一个问题是 - 因为我只在初始化时创建线程，所以它们的数量是固定的，而对于任务，我可以继续在任务池中转储更多任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T23:59:13.970

线程是有代价的——每个线程至少需要空间用于 TLS 和堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:03:44.230

从长远来看，将 Task 和 Thread 类分开将是一种更清洁、更易于管理的方法，并且通过允许您限制在任何给定时间创建和运行的线程数（此外，一个 Task 可能占用比线程更少的内存，并且在需要时可以更快地创建和释放）。任务是控制完成的内容。线程控制任务何时运行。是的，您需要将任务对象存储在线程安全列表中，但是使用临界区、互斥锁、信号量等非常容易实现。特别是在 Windows 上，您也可以使用 I/O 完成端口代替将任务提交给线程，让操作系统为您处理同步和调度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T00:05:37.010

一次运行 200 个线程肯定比运行 4 个线程运行 200 个“任务”需要更长的时间。您可以通过一个简单的程序进行一些简单的数学测试（例如计算前 20000000 个素数，通过要求每个线程一次做 100000 个数字，然后抓取下一批，或者制作 200 个线程，每个线程有 100000 个数字）。

慢多少？不知道，取决于很多事情。

# ios - UITableViewHeader 上的自动布局

> ID：14637376
> 
> 赞同：7
> 
> 时间：2013-01-31T23:56:40.980
> 
> 标签：ios, objective-c, uitableview, autolayout

**我已向 Apple 提交了有关此问题的错误报告！**

我正在尝试在我的 UITableViewHeader 上使用新的 iOS 6 自动布局，但是我扔给它的所有内容都会在帖子末尾出现错误。

我的代码：

**TBMTableViewController.h**

```
#import <UIKit/UIKit.h>

@interface TBMTableViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>

@end 
```

**TBMTableViewController.m**

```
#import "TBMTableViewController.h"
#import "UIView+Constraint.h"

@implementation TBMTableViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    UITableViewController *tableViewController = [[UITableViewController alloc] initWithStyle:UITableViewStylePlain];
    [tableViewController.tableView setTranslatesAutoresizingMaskIntoConstraints:NO];

    UITableView *tableView = tableViewController.tableView;
    [tableView setTranslatesAutoresizingMaskIntoConstraints:NO];
    [tableView setDelegate:self];
    [tableView setDataSource:self];

    [self.view addSubview:tableView];

    UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 200.0f)];
    [headerView setTranslatesAutoresizingMaskIntoConstraints:NO];
    [tableView setTableHeaderView:headerView];

    UIButton *btn1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [btn1 setTranslatesAutoresizingMaskIntoConstraints:NO];
    [btn1 setTitle:@"Button 1" forState:UIControlStateNormal];
    [btn1 sizeToFit];
    [headerView addSubview:btn1];

    UIButton *btn2 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [btn2 setTranslatesAutoresizingMaskIntoConstraints:NO];
    [btn2 setTitle:@"Button 2" forState:UIControlStateNormal];
    [btn2 sizeToFit];
    [headerView addSubview:btn2];

    NSDictionary *views = NSDictionaryOfVariableBindings(tableView, headerView, btn1, btn2);

    [self.view addVisualConstraints:@"H:|[tableView]|" forViews:views];
    [self.view addVisualConstraints:@"V:|[tableView]|" forViews:views];

    [headerView addVisualConstraints:@"H:[btn1]-|" forViews:views];
    [headerView addVisualConstraints:@"V:|-[btn1]" forViews:views];
    [headerView addVisualConstraints:@"H:[btn2]-|" forViews:views];
    [headerView addVisualConstraints:@"V:[btn1]-[btn2]" forViews:views];
    [headerView addVisualConstraints:@"[btn2(==btn1)]" forViews:views];
}

@end 
```

**UIView+约束.m**

```
- (void)addVisualConstraints:(NSString *)constraintString forViews:(NSDictionary *)views {
    [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:constraintString
                                                                 options:0
                                                                 metrics:0
                                                                   views:views]];
} 
```

错误：

```
2013-02-01 00:43:34.481 ConstraintTest[10217:c07] *** Assertion failure in 
-[UITableView layoutSublayersOfLayer:], 
/SourceCache/UIKit_Sim/UIKit-2380.17/UIView.m:5776
2013-02-01 00:43:34.483 ConstraintTest[10217:c07] *** Terminating app due to 
uncaught exception 'NSInternalInconsistencyException', reason: 'Auto Layout still 
required after executing -layoutSubviews. UITableView's implementation of  
-layoutSubviews needs to call super.'

*** First throw call stack:
(0x1c94012 0x10d1e7e 0x1c93e78 0xb67665 0x6639f 0x10e56b0 0x2290fc0 0x228533c  
0x2290eaf 0x1052bd 0x4db56 0x4c66f 0x4c589 0x4b7e4 0x4b61e 0x4c3d9 0x4f2d2  
0xf999c 0x46574 0x4676f 0x46905 0x4f917 0x2b15 0x13157 0x13747 0x1494b 0x25cb5  
0x26beb 0x18698 0x1befdf9 0x1befad0 0x1c09bf5 0x1c09962 0x1c3abb6 0x1c39f44  
0x1c39e1b 0x1417a 0x15ffc 0x28dd 0x2805)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

我已经尝试了我能想到的一切。甚至谷歌也无法提供答案。我已经删除了不相关的代码，例如 UITableViewDataSource- 和 UITableViewDelegate 方法以进行澄清。不涉及任何 nib，我的 appDelegate 唯一要做的就是初始化 TBMTableViewController 并将其设置为 rootViewController。

**编辑：** 我更新了我的 viewDidLoad 方法，以澄清我想对 UITableViewHeader 内的控件使用约束，而不是标题本身。同样的错误:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T08:27:39.997

事实证明，这对我来说是一个非常愚蠢的错误。当我删除这些行时，我最终让一切正常：

```
[tableView setTranslatesAutoresizingMaskIntoConstraints:NO]; 
```

和

```
[headerView setTranslatesAutoresizingMaskIntoConstraints:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-17T12:49:56.940

我在同一个视图控制器中都使用了`viewWillLayoutSubviews`，`viewDidLayoutSubviews`在使用 single 管理之后`viewWillLayoutSubviews`，它对我有用。

# c - 如何将时间戳字符串转换为time_t？

> ID：14637378
> 
> 赞同：0
> 
> 时间：2013-01-31T23:56:54.277
> 
> 标签：c, timestamp

我有一个列出 unix 时间戳的文件（文本文件），我想将它们转换为 time_t 并将其保存到另一个文件（二进制文件）中；

```
char timestamp[12];
timestamp[11] = '\0';

while (! feof(log)) {
    time_t t;
    /* 10 character for timestamp + 1 for newline */
    fread(timestamp, sizeof(char), 11, log);

    /* Black magic goes here */

    /*save time_t into new log */
    fwrite(&t,sizeof(time_t),1,newlog);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:04:46.870

假设它`long`足够大以容纳这些值：

```
char buffer[4096];

while (fgets(buffer, sizeof(buffer), log))
{
    long v;

    if (sscanf(buffer, "%ld", &v) != 1)
        ...process error...
    else
    {
        time_t t = v;
        if (fwrite(&t, sizeof(time_t), 1, newlog) != 1)
            ...report error...
    }
} 
```

如果您担心`long`，请使用不同的类型：`long long`或`intmax_t`，并进行适当的更改（类型和`scanf()`格式）。如果您知道 的范围`time_t`，则可以根据范围检查解析的值，但是没有标准的方法来确定 的范围`time_t`（例如，没有我知道的标准宏）。

请注意，`feof()`在输入函数报告“没有更多输入”后，您应该使用来区分 EOF 和错误，而不是尝试确定是否有更多输入。它不知道没有更多的输入，直到输入函数尝试读取并发现没有更多数据（例如，`fgets()`返回 NULL）。如果您确实`feof()`在循环中使用（如在您的代码中），您还必须检查输入函数，`feof()`可以说“不在 EOF”，但下一个输入操作发现“没有更多数据 - 现在在 EOF”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T00:58:12.837

尝试这个：

```
time_t read_time(FILE* fd) {
    time_t time = 0;
    int x;

    x = getc(fd);
    while ((x != EOF) && (isnum(x)))
    {
        time = (time * 10) + (x - '0');
        x = getc(fd);
    };

    return time;
} 
```

这将读取时间戳（或任何数字序列，实际上）并将其转换为`time_t`, 一次一个数字。直接使用`time_t`意味着您不必担心输入是否会溢出 a`long`或`int`.

# javascript - jQuery - 尝试在 if 语句中执行函数

> ID：14637380
> 
> 赞同：1
> 
> 时间：2013-01-31T23:57:12.530
> 
> 标签：javascript, jquery, function, if-statement

我正在尝试向表单添加一些验证。我有一个 jQuery 函数，它完全符合我的要求：

```
 jQuery('#post').submit(function() {
                if (jQuery("#set-post-thumbnail").find('img').size() > 0) {
                    jQuery('#ajax-loading').hide();
                    jQuery('#publish').removeClass('button-primary-disabled');
                    return true;
                }else{
                    alert("Please set a Featured Image!");
                    jQuery('#ajax-loading').hide();
                    jQuery('#publish').addClass('button-primary-disabled');
                    return false;
                }
                return false;
            }); 
```

但是，我想对其进行更改，以便仅在选择页面上其他地方的单选按钮时才运行此功能。所以我尝试了这个：

```
if (jQuery('#top').checked) {
      jQuery('#post').submit(function() {
                if (jQuery("#set-post-thumbnail").find('img').size() > 0) {
                    jQuery('#ajax-loading').hide();
                    jQuery('#publish').removeClass('button-primary-disabled');
                    return true;
                }else{
                    alert("Please set a Featured Image!");
                    jQuery('#ajax-loading').hide();
                    jQuery('#publish').addClass('button-primary-disabled');
                    return false;
                }
                return false;
            });
    } 
```

这不起作用——即使检查了#top，该函数也不会被调用。谁能解释为什么？我习惯了 PHP，而 JavaScript 经常向我抛出曲线球。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:00:47.503

firebug 或 Chrome 控制台告诉你什么？你可以尝试这样的事情：

```
$('#top').is(':checked') 
```

如（感谢RET）：

```
jQuery('#post').submit(function() {
  if ($('#top').is(':checked')) {
    if (jQuery("#set-post-thumbnail").find('img').size() > 0) {
      jQuery('#ajax-loading').hide();
      jQuery('#publish').removeClass('button-primary-disabled');
      return true;
    }else{
      alert("Please set a Featured Image!");
      jQuery('#ajax-loading').hide();
      jQuery('#publish').addClass('button-primary-disabled');
      return false;
    }
  }
  return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:05:00.553

尝试

`$('#top').is(':checked')`

但是函数 submit 只绑定函数，每次点击提交时都会调用它。所以你必须把检查过的检查放在提交功能中

```
 jQuery('#post').submit(function() {

            if(!$('top').is(':checked')){ return };

            if (jQuery("#set-post-thumbnail").find('img').size() > 0) {
                jQuery('#ajax-loading').hide();
                jQuery('#publish').removeClass('button-primary-disabled');
                return true;
            }

            alert("Please set a Featured Image!");
            jQuery('#ajax-loading').hide();
            jQuery('#publish').addClass('button-primary-disabled');
            return false;

        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T00:05:34.790

是的，这种逻辑不会完全符合您的期望。尝试类似：

```
 jQuery('#post').submit(function() {
      if ($('#top').is(':checked')) {
            // all your existing code 
```

`#top`我可能是错的，但我不认为@greener 给出的答案会起作用，因为如果在页面创建时检查它只会声明提交函数。

# css - CSS3 变换：rotateY 一个 div 来对抗父级的rotateY

> ID：14637382
> 
> 赞同：5
> 
> 时间：2013-01-31T23:57:35.890
> 
> 标签：css, 3d, rotation, css-transforms

我可以`transform: rotateY`用一个 div 来对抗`transform: rotateY`他的父母吗？

**例如：**
如果我有一个父 div `rotateY(-45deg)`，他所有的孩子都将是 -45 度。
为什么我不能添加`rotateY(45deg)`到孩子，让它看起来像没有旋转影响它？

演示：http: [//jsfiddle.net/eBT4A/](http://jsfiddle.net/eBT4A/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:06:23.143

您可以将rotateY（45deg）添加到父div具有rotateY（-45deg）的孩子，使其看起来只有当您将**相同的枢轴点**设置为这两个旋转时才不会影响它，

在您的演示示例中，您没有应用相同的枢轴点，

尝试这个...

```
<html>
    <head>
        <style type="text/css">
            body {
                -webkit-perspective: 500;
            }
            #content {
                position:absolute;
                top: 0px;
                left: 0px;
                width: 300px; 
                height: 500px;
                background: #000;
                -webkit-transform-origin: 0px 0px;
                -webkit-transform: rotate(45deg);
                -moz-transform-origin: 0px 0px;
                -moz-transform: rotate(45deg);
            }
            #element {
                position:absolute;
                top: 0px;
                left: 0px;
                width: 50px; 
                height: 50px;
                background: #f00;
                -webkit-transform-origin: 0px 0px;
                -webkit-transform: rotate(-45deg);
                -moz-transform-origin: 0px 0px;
                -moz-transform: rotate(-45deg);
            }
        </style>
    </head>
    <body>
        <div id="content">
            <div id="element"></div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T15:23:42.390

您需要将 preserve-3d 添加到父级：

```
body {
    -webkit-perspective: 500;
}
#content {
    position:fixed;
    top: 20px;
    left: 0;
    width: 300px; 
    height: 500px;
    background: #000;
    -webkit-transform-origin: 0 0;
    -webkit-transform: rotateY(45deg);
    -webkit-transform-style: preserve-3d;
}
#element {
    position:fixed;
    top: 20px;
    left: 50%;
    width: 50px; 
    height: 50px;
    background: #f00;
    -webkit-transform-origin: 0 0;
    -webkit-transform: rotateY(-45deg);
} 
```

[更新的小提琴](http://jsfiddle.net/eBT4A/10/)

据我所知，这在 IE 中不起作用。

# python - e^（正态分布变量）的Python乘积不等于1.0？

> ID：14637383
> 
> 赞同：1
> 
> 时间：2013-01-31T23:57:39.247
> 
> 标签：python, statistics, distribution, normal-distribution

平均值为 0 的正态分布变量之和的平均值为零。这样可行。e 与平均值为 0 的正态分布变量的幂的乘积应该是 1。但是当我在 Python 中执行此操作时，我得到的乘积高于 1。对此有何解释？

```
sumProduct = 0.0
iterations = 100000

for j in range(iterations):

    product = 1.0
    for i in range(10):
        normalVar = numpy.random.normal(0.0, 0.1)
        product *= math.exp(normalVar)

    sumProduct += product

print sumProduct/iterations # Outputs 1.05 
```

它不应该输出1.0吗？乘积变量的期望值应为 1.0，所有乘积变量的平均值应为 1.0。那么为什么它输出 1.05 呢？（改变迭代次数和标准差会改变输出，但它总是大于一）。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T04:48:49.583

对数正态变量的平均值是 exp(mu + 1/2 sigma^2)，其中 mu 和 sigma 是相关正态分布的参数。在这种情况下，相关的正态分布是变量“product”的对数分布，其中 mu = 10 乘以 0.0 和 sigma^2 = 10 乘以 0.1^2 = 0.1。因此，对数正态变量的平均值为 exp(0.0 + 1/2 乘以 0.1) = exp(0.05)，约为 1.05。

# python - 如果 if 语句等于错误怎么办？

> ID：14637385
> 
> 赞同：0
> 
> 时间：2013-01-31T23:57:42.863
> 
> 标签：python, if-statement, python-3.x, syntax-error, dictionary

在检查友好数字时，我做了以下*if*语句（dict 是字典）：

```
if n == dict[lib[n]]:
        amic[n] = dict[n] 
```

但如果*n*值不在字典中，则返回错误；正如它应该。但我希望它继续，因为错误意味着“它不相等”，它应该继续到下一个*n*。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T01:22:15.137

您可能想要`dict.get()`which 返回`None`（或您选择的另一个默认值）。例如`n == lib.get(lib.get(n))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:16:09.823

你可以包装在一个 try 块中，并忽略异常，但考虑到更多的上下文，可能有更好的方法......（`lib[lib[n]]`看起来很奇怪......）

这将捕获一个 IndexError`lib`并且`amic`虽然......

```
try:
    if n == lib[lib[n]]:
        amic[n] = lib[n]
except IndexError as e: # or KeyError if a dict
    pass 
```

# mysql - 计算表中是否存在记录，然后更新同一个表

> ID：14637386
> 
> 赞同：0
> 
> 时间：2013-01-31T23:57:45.830
> 
> 标签：mysql, select

我有这个表“用户”，它有下表。

```
username refered refcount
 admin              3         //admin refered 3 users.(user1,user3,user6) 
 user1    admin     1
 user3    admin     0
 user4    user3     0
 user5    user1     0
 user6    admin     0 
```

我想要做的是计算用户推荐的每个人并将该计数保存到每条记录的引用计数中。但我该怎么做呢？

我试过这个但得到一个错误

```
UPDATE user
SET referrals=(SELECT COUNT(userid) AS refs FROM user WHERE refered=username   ) 
```

这是我得到的错误

```
#1093 - You can't specify target table 'user' for update in FROM clause 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:10:25.513

stackoverflow 中有几个例子。基本上你需要自己加入`user`表。另外我认为您的计数方法无效（我没有测试，但这应该非常接近）：

```
UPDATE user u1
JOIN (
     SELECT u2.userid, COUNT(u2.userid) AS refs
     FROM user u2
     JOIN user u3
     on u2.username=u3.refered
     GROUP BY u2.userid
     ) u4
ON u1.userid = u4.userid
SET u1.referrals=u4.refs 
```

u2 和 u3 的连接构建`userid`“被推荐用户”列表
u1 和 u4 的连接允许您从 u4 中进行选择并更新 u1

# c# - 返回开始页面后，Windows Store 应用程序崩溃

> ID：14637388
> 
> 赞同：2
> 
> 时间：2013-01-31T23:57:55.617
> 
> 标签：c#, windows-8, winrt-xaml, windows-store-apps, windows-store

一、流程：

我的应用程序将启动画面加载到起始页面（登录）。

从登录屏幕，加载到主页。

从主页，加载到第二页。

从第二次返回点击“返回”按钮，调用“返回”到主页

从主页点击“返回”，调用“GoBack”到登录屏幕。

*碰撞*

异常信息：异常：{“未检测到已安装的组件。（来自 HRESULT 的异常：0x800F1000）”} 消息：“无法解析 TargetName TextLabel。”

注意：如果我不进入第二个屏幕，直接从主屏幕返回，则不会出现崩溃并且应用程序运行正常。

它可能与某处的风格有关，但我似乎找不到在哪里。错误信息似乎也不想给我任何提示。

无论如何，任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T00:06:08.113

原来我已经制作了一个自定义 AppBar 按钮样式，并且没有删除引用不再存在的东西的动画。我不知道为什么它只在特定的流程中崩溃，但最终就是这样。

# java - Struts2 属性标签默认转义属性

> ID：14637389
> 
> 赞同：1
> 
> 时间：2013-01-31T23:57:57.310
> 
> 标签：java, struts2, escaping, html-escape-characters

有什么方法可以在 struts2 中将所有属性标签的默认 escapeXML 属性设置为 false？

我在网上搜索了这个，好像我只能找到一个人说这是不可能的。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:07:57.277

不，组件和属性标签的来源将默认值硬编码为`true`.

（我认为您的意思是`escapeHtml`属性，因为`escapeXml`默认为`false`。）

除了创建将其设置为 true 的自定义标签之外，我想不出一种方便的方法来做到这一点；如果您只使用标签属性的一个子集，这不会*太*繁琐。

# linq - 尝试使用表达式树过滤 Nullable 类型

> ID：14637390
> 
> 赞同：2
> 
> 时间：2013-01-31T23:57:58.133
> 
> 标签：linq, c#-4.0, lambda, expression-trees

我在下面粘贴了我的整个测试应用程序。它相当紧凑，所以我希望这不是问题。您应该能够简单地将其剪切并粘贴到控制台应用程序中并运行它。

我需要能够过滤任何一个或多个 Person 对象的属性，并且直到运行时我才知道是哪一个。我知道这已经到处讨论了，我已经研究过并且也在使用[PredicateBuilder](http://www.albahari.com/nutshell/predicatebuilder.aspx)和[Dynamic Linq Library](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=1&cad=rja&sqi=2&ved=0CDAQFjAA&url=http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx&ei=FQMLUffcLYy40QG6xoCwCw&usg=AFQjCNHoZPBhcPM76GbOEW_8WcGkfb8pKA&bvm=bv.41642243,d.dmQ)等工具，但是围绕它们的讨论往往更多地集中在排序和排序上，并且每个人都在努力解决他们的问题遇到可空类型时自己的问题。所以我想我会尝试至少构建一个可以解决这些特定场景的补充过滤器。

在下面的示例中，我试图过滤掉在某个日期之后出生的家庭成员。关键是要过滤的对象上的 DateOfBirth 字段是 DateTime 属性。

我得到的最新错误是

> 在类型“System.String”和“System.Nullable`1[System.DateTime]”之间没有定义强制运算符。

这是问题所在。我尝试了几种不同的铸造和转换方法，但都失败了。最终，这将应用于 EF 数据库，该数据库也拒绝使用 DateTime.Parse(--) 等转换方法。

任何帮助将不胜感激！

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Linq.Expressions;
using System.Reflection;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            List<Person> people = new List<Person>();
        people.Add(new Person { FirstName = "Bob", LastName = "Smith", DateOfBirth = DateTime.Parse("1969/01/21"), Weight=207 });
        people.Add(new Person { FirstName = "Lisa", LastName = "Smith", DateOfBirth = DateTime.Parse("1974/05/09") });
        people.Add(new Person { FirstName = "Jane", LastName = "Smith", DateOfBirth = DateTime.Parse("1999/05/09") });
        people.Add(new Person { FirstName = "Lori", LastName = "Jones", DateOfBirth = DateTime.Parse("2002/10/21") });
        people.Add(new Person { FirstName = "Patty", LastName = "Smith", DateOfBirth = DateTime.Parse("2012/03/11") });
        people.Add(new Person { FirstName = "George", LastName = "Smith", DateOfBirth = DateTime.Parse("2013/06/18"), Weight=6 });

            String filterField = "DateOfBirth";
            String filterOper = "<=";
            String filterValue = "2000/01/01";

            var oldFamily = ApplyFilter<Person>(filterField, filterOper, filterValue);

            var query = from p in people.AsQueryable().Where(oldFamily) 
                        select p;

            Console.ReadLine();
        }

        public static Expression<Func<T, bool>> ApplyFilter<T>(String filterField, String filterOper, String filterValue)
        {
            //
            // Get the property that we are attempting to filter on. If it does not exist then throw an exception
            System.Reflection.PropertyInfo prop = typeof(T).GetProperty(filterField);
            if (prop == null)
                throw new MissingMemberException(String.Format("{0} is not a member of {1}", filterField, typeof(T).ToString()));

            Expression convertExpression     = Expression.Convert(Expression.Constant(filterValue), prop.PropertyType);

            ParameterExpression parameter    = Expression.Parameter(prop.PropertyType, filterField);
            ParameterExpression[] parameters = new ParameterExpression[] { parameter };
            BinaryExpression body            = Expression.LessThanOrEqual(parameter, convertExpression);

            Expression<Func<T, bool>> predicate = Expression.Lambda<Func<T, bool>>(body, parameters);

            return predicate;

        }
    }

    public class Person
    {

        public string FirstName { get; set; }
        public string LastName { get; set; }
        public DateTime? DateOfBirth { get; set; }
        string Nickname { get; set; }
        public int? Weight { get; set; }

        public Person() { }
        public Person(string fName, string lName)
        {
            FirstName = fName;
            LastName = lName;
        }
    }
} 
```

**更新：2013/02/01**

然后我的想法是将 Nullabe 类型转换为它的 Non-Nullable 类型版本。因此，在这种情况下，我们希望将 <Nullable>DateTime 转换为简单的 DateTime 类型。我在调用 Expression.Convert 调用之前添加了以下代码块，以确定和捕获 Nullable 值的类型。

```
//
//
Type propType = prop.PropertyType;
//
// If the property is nullable we need to create the expression using a NON-Nullable version of the type.
// We will get this by parsing the type from the FullName of the type 
if (prop.PropertyType.IsGenericType && prop.PropertyType.GetGenericTypeDefinition() == typeof(Nullable<>))
{
    String typeName = prop.PropertyType.FullName;
    Int32 startIdx  = typeName.IndexOf("[[") + 2;
    Int32 endIdx    = typeName.IndexOf(",", startIdx);
    String type     = typeName.Substring(startIdx, (endIdx-startIdx));
    propType        = Type.GetType(type);
}

Expression convertExpression = Expression.Convert(Expression.Constant(filterValue), propType); 
```

这实际上可以从 DateTime 中删除 Nullable-ness，但会导致以下强制错误。我仍然对此感到困惑，因为我认为“Expression.Convert”方法的目的就是为了做到这一点。

*在类型“System.String”和“System.DateTime”之间没有定义强制运算符。*

继续前进，我将值显式解析为 DateTime 并将其插入混合...

```
DateTime dt = DateTime.Parse(filterValue);
Expression convertExpression = Expression.Convert(Expression.Constant(dt), propType); 
```

...这导致了一个异常，超出了我对表达式、Lambda 及其相关同类知识的任何了解...

*“System.DateTime”类型的 ParameterExpression 不能用于“ConsoleApplication1.Person”类型的委托参数*

我不确定还有什么可以尝试的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T09:40:20.593

问题是在生成二进制表达式时，操作数必须是兼容的类型。如果不是，您需要对一个（或两个）执行转换，直到它们兼容。

从技术上讲，您不能将 a`DateTime`与 a进行比较`DateTime?`，编译器会隐式地将一个提升到另一个，这允许我们进行比较。由于编译器不是生成表达式的那个，我们需要自己执行转换。

我已经将您的示例调整为更通用（并且有效：D）。

```
public static Expression<Func<TObject, bool>> ApplyFilter<TObject, TValue>(String filterField, FilterOperation filterOper, TValue filterValue)
{
    var type = typeof(TObject);
    ExpressionType operation;
    if (type.GetProperty(filterField) == null && type.GetField(filterField) == null)
        throw new MissingMemberException(type.Name, filterField);
    if (!operationMap.TryGetValue(filterOper, out operation))
        throw new ArgumentOutOfRangeException("filterOper", filterOper, "Invalid filter operation");

    var parameter = Expression.Parameter(type);

    var fieldAccess = Expression.PropertyOrField(parameter, filterField);
    var value = Expression.Constant(filterValue, filterValue.GetType());

    // let's perform the conversion only if we really need it
    var converted = value.Type != fieldAccess.Type
        ? (Expression)Expression.Convert(value, fieldAccess.Type)
        : (Expression)value;

    var body = Expression.MakeBinary(operation, fieldAccess, converted);

    var expr = Expression.Lambda<Func<TObject, bool>>(body, parameter);
    return expr;
}

// to restrict the allowable range of operations
public enum FilterOperation
{
    Equal,
    NotEqual,
    LessThan,
    LessThanOrEqual,
    GreaterThan,
    GreaterThanOrEqual,
}

// we could have used reflection here instead since they have the same names
static Dictionary<FilterOperation, ExpressionType> operationMap = new Dictionary<FilterOperation, ExpressionType>
{
    { FilterOperation.Equal,                ExpressionType.Equal },
    { FilterOperation.NotEqual,             ExpressionType.NotEqual },
    { FilterOperation.LessThan,             ExpressionType.LessThan },
    { FilterOperation.LessThanOrEqual,      ExpressionType.LessThanOrEqual },
    { FilterOperation.GreaterThan,          ExpressionType.GreaterThan },
    { FilterOperation.GreaterThanOrEqual,   ExpressionType.GreaterThanOrEqual },
}; 
```

然后使用它：

```
var filterField = "DateOfBirth";
var filterOper = FilterOperation.LessThanOrEqual;
var filterValue = DateTime.Parse("2000/01/01"); // note this is an actual DateTime object

var oldFamily = ApplyFilter<Person>(filterField, filterOper, filterValue);

var query = from p in people.AsQueryable().Where(oldFamily) 
            select p; 
```

我不知道这是否适用于所有情况，但它肯定适用于这种特殊情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T01:09:02.400

如果您询问您的`body`变量，您可以看到您正在创建的表达式的主体本质上是`DateOfBirth <= '2000/01/01'`.

虽然从表面上看这似乎是正确的，但您正试图将该主体分配给一个函数，该函数采用 a `Person`（这就是`T`您的示例中的内容）并返回一个 bool。您需要更改逻辑，以便主体将输入反映为`Person`对象，访问该`DateOfBirth`实例上的属性`Person`，然后执行比较。

换句话说，您的表达式主体必须采用 a `T`，在其上找到正确的属性，然后进行比较。

# ios - iOS tableView 单元格缓存问题未加载每个单元格

> ID：14637394
> 
> 赞同：0
> 
> 时间：2013-01-31T23:58:07.930
> 
> 标签：ios, objective-c, xcode, tableview, cell

我有点难以理解出了什么问题以及如何解决这个问题。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if(cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    NSUInteger row = [indexPath row];

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    cell.selectionStyle = UITableViewCellSelectionStyleBlue;

    UILabel *where = [[UILabel alloc] initWithFrame:CGRectMake(88.0, 0.0, 155.0, 22.0)];
    where.text = [delegate.destinationArray1 objectAtIndex:row];
    where.font = [UIFont fontWithName:@"Helvetica" size:12.0];
    where.textColor = [UIColor blueColor];
    [cell.contentView addSubview:where];
    return cell;
} 
```

这不能正常工作，但这样做：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if(cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

NSUInteger row = [indexPath row];

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    cell.selectionStyle = UITableViewCellSelectionStyleBlue;

    UILabel *where = [[UILabel alloc] initWithFrame:CGRectMake(88.0, 0.0, 155.0, 22.0)];
    where.text = [delegate.destinationArray1 objectAtIndex:row];
    where.font = [UIFont fontWithName:@"Helvetica" size:12.0];
    where.textColor = [UIColor blueColor];
    [cell.contentView addSubview:where];
    return cell;
} 
```

它们都由“delegate.destinationArray1”填充，但是当所有代码都在大括号内时

```
if(cell == nil) 
```

该列表变得无序并重复单元格并错过了一些。我不能使用后一种方式，因为它在滚动时会产生大量内存泄漏。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:15:54.690

当我开始使用 UITableViews 时，我做了同样的事情。内存泄漏的原因是，在第二个实现（有效的那个）中，您实际上每次都在创建每个单元。让我试着解释一下。

您永远不想在`(cell == nil)`. 原因是`reuseIdentifier`. 如果表格需要显示一个新单元格，它将抓取一个单元格并查看它是否已被分配/初始化。如果它有它只会使用它。如果是这种情况，内容将已经设置在您抓取的单元格中，并且您没有告诉它以任何不同的方式设置它。

之间`(cell == nil)`只有创建和建立视图。不是内容。所有内容都应该设置在之后。所以无论它抓取什么单元格，它总是可以设置内容。所以这就是你想要的：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
     static NSString *CellIdentifier = @"Cell";

     UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
     if(!cell) // or (cell == nil)
     {
          cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
          cell.selectionStyle = UITableViewCellSelectionStyleBlue;
          UILabel *where = [[UILabel alloc] initWithFrame:CGRectMake(88.0, 0.0, 155.0, 22.0)];
          where.font = [UIFont fontWithName:@"Helvetica" size:12.0];
          where.textColor = [UIColor blueColor];
          where.tag = 1;
          [cell addSubview:where];
     }

     NSUInteger row = indexPath.row;

     UILabel *where = [cell viewWithTag:1];
     where.text = [delegate.destinationArray1 objectAtIndex:row];

     return cell;
} 
```

我刚刚在 StackoverFlow 中对此进行了编码，如果有任何小的语法错误，我们深表歉意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:11:58.320

单元对象由第一条语句重用或创建。检查`cell`并`nil`创建单元后，不得再创建另一个单元。

所以删除该行

```
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]; 
```

紧随其后

```
NSUInteger row = [indexPath row]; 
```

您将使用正确的单元格对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T00:19:00.420

当 tableview 重用单元格时，它基于 CellIdentifier。表格视图不关心您在单元格上设置了什么属性。在第一种情况下，它发生了重用，它识别出它可以使用的单元格，但该单元格上有错误的信息。

我所做的是子类 UITableViewCell 并在该类中完成所有工作。这是一个快速的片段

```
@implementation AlertCell

//Custom init method
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier withHeight:(float)height {
//Whatever you need to do
}

//Place the views
- (void)layoutSubviews {
}

//Custom Setter method
- (void)setAlert:(CWAlert *)incomingAlert withAssets:(NSDictionary *)assets {
}

@end 
```

然后你做这样的事情

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *cellIdentifier;
CWAlertCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

if (!cell) {
    cell = [[AlertCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier withHeight:[self convertAssetsLengthToCellHeight:assetsLength]];

    UIView *selectedView = [[UIView alloc] init];
    selectedView.backgroundColor = [UIColor colorWithHexString:@"F6F6F6"];
    cell.selectedBackgroundView = selectedView;
}

NSDictionary *alertInfo = [AlertCell getNeededCellAssets:alert];
[cell setAlert:alert withAssets:alertInfo];
return cell;
} 
```

如果需要，我可以显示来自子类的更多代码。

# c# - 在 C# 中执行文件

> ID：14637395
> 
> 赞同：1
> 
> 时间：2013-01-31T23:58:08.743
> 
> 标签：c#, visual-studio-2010

这不是标题中的错字。我的主 bin/Debug 文件夹中有一个`execut`文件（没有“e”），我不知道它的用途。是否有必要分发解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:05:40.287

在我看来，这听起来像是编译的人工制品，或者是程序本身创建的东西。

这是你自己的代码吗？

如果您删除文件并重建，它会回来吗？

如果您在 Visual Studio 中选择 Clean 解决方案选项，它会消失吗？

最后，您始终可以将调试文件夹的内容复制到硬盘上的另一个位置，然后删除此文件。如果该程序仍然运行，那么您不需要将它与您的解决方案一起分发。

# java - 根据州级数据制作加权美国地图

> ID：14637396
> 
> 赞同：5
> 
> 时间：2013-01-31T23:58:14.773
> 
> 标签：java, python, maps, data-visualization

我有一个州级数据列表，其中包含每个州的数字，例如：

```
AL  10.5
AK  45.6
AZ  23.4
AR  15.0
... 
```

我想把它做成一个加权地图，最暗的地方数字最高，最轻的地方最低。是否有任何软件，或者 java 或 python 库可以生成这样的图像？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T00:25:45.560

如果你想自己建造它，你只需要一张好的地图，这张地图中每个州的一组位置，以及洪水填充。

使用地图[http://www.clker.com/cliparts/S/r/a/w/L/0/black-and-white-us-map-hi.png](http://www.clker.com/cliparts/S/r/a/w/L/0/black-and-white-u-s-map-hi.png)，这是我们得到的：

![在此处输入图像描述](../Images/84cd609bfcdb4b3f69dda4833de2fcbf.png)

构建上述地图的代码由下式给出

```
import sys
from PIL import Image

def floodfill(img, seed, color):
    im = img.load()
    work = [seed]
    start_color = im[seed]
    while work:
        x, y = work.pop()
        im[x, y] = color
        for dx, dy in ((-1,0), (1,0), (0,-1), (0,1)):
            nx, ny = x + dx, y + dy
            if im[nx, ny] == start_color:
                work.append((nx, ny))

USA_MAP = Image.open(sys.argv[1]).convert('1')
POINT_STATE = {'AL': (420, 260), 'AZ': (110, 240), 'AR': (350, 250)}

painted_map = USA_MAP.convert('L')
data = {'AL': 10.5, 'AZ': 23.4, 'AR': 15.0}
# Normalize data based on the minimum weight being 0+eps and maximum 30.
for k, v in data.items():
    v = v/30.
    color = int(round(255 * v))
    floodfill(painted_map, POINT_STATE[k], 255 - color)

painted_map.save(sys.argv[2]) 
```

# php - 日期时间值不正确：第 1 行的列“user_date”的“31-01-2013”

> ID：14637398
> 
> 赞同：0
> 
> 时间：2013-01-31T23:58:20.370
> 
> 标签：php, mysqli

```
$query_insert = "INSERT INTO users (user_name, user_pass, user_email, user_date, user_level, user_posts)
                        VALUES(?,?,?,?,?,?)";
$insert = $mysqli->prepare($query_insert);
                $insert->bind_param("ssssii", $username, $password_enc, $email, $date, $level_start, $post_start);
                $insert->execute();
$date = date('d-m-Y'); 
```

这些是相关的部分。唯一的事情是......当我执行它时它不会添加到表中

我环顾四周，有人说有 $insert->error; 所以我把它放进去，然后就出现了

```
Incorrect datetime value: '31-01-2013' for column 'user_date' at row 1 
```

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T23:59:15.163

它必须是`2013-01-31`，即`date('Y-m-d')`

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-types.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-types.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T00:00:55.103

在`date`数据类型上插入值时，它应该采用以下格式`yyyy-MM-dd`，因此在您的示例日期中，它应该`2013-01-31`。

不要担心保存在数据库中的日期模式。保持原样。如果您担心格式，那么您可以在投影数据期间使用名为`DATE_FORMAT`.

*   [日期格式（）](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

# android - Android：JSONObject 只解析文件中的最终对象

> ID：14637400
> 
> 赞同：0
> 
> 时间：2013-01-31T23:58:45.793
> 
> 标签：android, json

我有一个像这样格式化的 json 文件（只有实际文件没有空格）：

```
{
    "main": [
        {
            "sections": [
                "sec1",
                "sec2"
            ],
            "title": "Section List 1"
        },
        {
            "sections": [
                "sec3",
                "sec4",
                "sec5"
            ],
            "title": "Section List 2"
        }
    ],
    "sections": {
        "sec1": {
            "products": [
                "prod1",
                "prod2"
            ]
        },
        "sec2": {
            "products": [
                "prod3"
            ]
        }
    },
    "products": {
        "prod1": {
            "url": "url1.gif",
            "title": "Product 1"
        },
        "prod2": {
            "url": "url2.gif",
            "title": "Product 2"
        },
        "prod3": {
            "url": "url3.gif",
            "title": "Product 3"
        }
    }
} 
```

当我尝试将该文件的数据发送到 JSONObject 时，正在加载的 JSONObject 仅包含顶部列表中的最终对象，在本例中为“产品”。现在，我加载 JSONObject 的代码是这样的：

```
JSONObject dlResult = new JSONObject(new Scanner(cnxn.getInputStream()).nextLine()); 
```

我还尝试先将数据存储在 String 中并将其提供给 JSONObject 构造函数，我尝试先将该 String 提供给 JSONTokener，然后将该标记器提供给 JSONObject 构造函数。String 和 JSONTokener 都包含整个文件，但是一旦将其放入 JSONObject 中，它总是一样的——“main”和“sections”被删除，只剩下“products”。

这是我的其余相关代码：

```
public class MapsListFragment extends ListFragment
{
    private static JSONObject mDlResult;
    private ArrayAdapter<MapInfo> mMapListAdapter = null;

    private class MapInfo
    {
        private String mText;
        private String mURL;

        MapInfo(String inText, String inURL)
        {
            mText = inText;
            mURL = inURL;
        }

        public String URL()
        {
            return mURL;
        }

        @Override
        public String toString()
        {
            return mText;
        }
    }

public class MapsListUpdater extends AsyncTask<String, String, JSONObject>
    {
        private static final String URL = "http://jsonURL/products.json";

        private Date lastUpdate;

        @Override
        protected JSONObject doInBackground(String... inObjects)
        {
            Date ifModifiedSince = lastUpdate;

            try 
            {
                HttpURLConnection cnxn = (HttpURLConnection) new URL(URL).openConnection();
                if (ifModifiedSince != null)
                    cnxn.setIfModifiedSince(ifModifiedSince.getTime());

                cnxn.connect();
                if (cnxn.getResponseCode() != HttpURLConnection.HTTP_NOT_MODIFIED)
                {
                    mDlResult = new JSONObject(new Scanner(cnxn.getInputStream()).nextLine());
                }

                cnxn.disconnect();
            } 
            catch (Exception e) 
            {
                boolean check = true;
            }

            return mDlResult;
        }

        @Override
        protected void onPostExecute(JSONObject result)
        {
            super.onPostExecute(result);
            try 
            {
                // This is really ugly and brute-forcey, but it's the only way I could get JSONObjects populated with ALL the data!
                /*String[] tryThis = mDlResult.split(",\"sections\":");
                tryThis[0] += '}';
                tryThis[1] = tryThis[1].substring(0, tryThis[1].indexOf("]}},\"products\":"));
                tryThis[1] = "{\"sections\":" + tryThis[1] + "]}}}";*/

                JSONObject mainObj = mDlResult.getJSONObject("main");//new JSONObject(mDlResult);

                JSONArray mainArray = mainObj.getJSONArray("main");

                Vector<String> titles = new Vector<String>();

                mMapListAdapter.clear();

                for (int i = 0; i < mainArray.length(); i++)
                {
                    JSONObject object = mainArray.getJSONObject(i);

                    String title = object.getString("title");

                    if(!titles.contains(title))
                    {
                        titles.add(title);
                        mMapListAdapter.add(new MapInfo(object.getString("title"), null));
                    }
                }
            }
            catch (Exception e) 
            {
                boolean check = true;
            } 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:12:44.740

我现在觉得有点傻。事实证明，JSONObject 得到的正是我所要求的……只有其中的对象被重新排序，所以我在调试器中看不到前 2 个对象！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:03:14.937

尝试将其读入[JSONArray](http://developer.android.com/reference/org/json/JSONArray.html)并让我知道您的进展情况：

`JSONArray dlResult = new JSONArray(cnxn.getInputStream());`

# php - 无法使用自己的帐户使用 Facebook 应用程序

> ID：14637408
> 
> 赞同：0
> 
> 时间：2013-01-31T23:59:31.550
> 
> 标签：php, facebook, facebook-graph-api, facebook-login

嗨，我创建的 Facebook 应用程序有问题。我使用这个应用程序可以在我的一个网站上使用 facebook 登录。问题是，如果我使用我的帐户登录，该网站只有标准权限，但如果其他人使用他的帐户登录，他拥有网页要求的所有权限。我还尝试删除该应用程序并再次登录，但这也没有用。有谁知道我做错了什么？我要求的扩展权限是：email 和 publish_actions 我还在developers.facebook.com 上的应用设置中添加了它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:06:14.043

> 在安装应用程序之前，应用程序安装屏幕将允许您查看或控制谁可以看到应用程序代表您发布到 Facebook 的活动。
> 
> 安装应用程序后，您可以在应用程序设置中查看和管理其设置。
> 
> 要进入您的应用设置：打开 Facebook 右上角的帐户下拉菜单，然后单击帐户设置。从左列的菜单中，选择应用程序。从这里，您可以管理您添加的每个应用程序的设置。要从应用设置更改哪些人可以查看您的应用活动：单击您要更改其设置的应用旁边的编辑。在代表您的帖子旁边，使用内嵌的受众选择器修改谁可以看到应用程序代表您发布的帖子。注意：为您的应用活动选择不同的受众只会改变谁可以在您的时间线上看到应用为您发布的新故事。以前分享的故事的观众将保持不变。此设置仅控制 Facebook 上帖子的受众，而不是应用程序本身内的帖子。
> 
> 您还可以通过我的应用页面在应用中心管理您的应用设置和隐私
> 
> [http://www.facebook.com/help/262314300536014/](http://www.facebook.com/help/262314300536014/)

您可以在安装应用程序后启用权限，如上。根据您自己的隐私设置，您可能缺少某些权限

# android - 以编程方式添加的 LinearLayouts 不等间距

> ID：14637410
> 
> 赞同：0
> 
> 时间：2013-01-31T23:59:50.837
> 
> 标签：android, android-layout

在 Android 4.0 中以编程方式构建 UI 的一部分时，我遇到了一些间距问题。我正在尝试将风格化按钮添加到风格化的 LinearLayout。为了使按钮的间距相等，每个按钮都包装在一个权重为 1 的 LinearLayout 中。我从一个用 XML 定义的布局开始（有点概念证明），其呈现方式与我期望的一样：

```
<LinearLayout android:id="@+id/dialog_footer" 
        android:layout_width="500dp"
        android:layout_height="wrap_content"
        android:background="@drawable/dialog_footer">

    <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="horizontal"
            android:gravity="center">
        <Button android:id="@+id/cancel"
            style="@style/Button"
            android:layout_width="130dp"
            android:layout_height="38dp"
            android:text="Cancel" />
    </LinearLayout>

    <!-- Another LinearLayout with a nested Button like the one above -->

</LinearLayout> 
```

为了以编程方式添加按钮，我删除了内部 LinearLayouts 并将它们放在自己的布局文件中，我可以将其膨胀并添加到 Java 中的外部 LinearLayout 中。它几乎相同。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="horizontal"
        android:gravity="center" >
    <Button android:id="@+id/button"
            style="@style/Button"
            android:layout_width="130dp"
            android:layout_height="38dp" />
</LinearLayout> 
```

这大致就是我在代码中添加按钮的方式：

```
LinearLayout dialogFooter = (LinearLayout)dialogView.findViewById(R.id.dialog_footer);
LinearLayout wrappedButton = (LinearLayout)getLayoutInflater().inflate(R.layout.dialog_button_wrapped, null);

Button button = (Button)wrappedButton.findViewById(R.id.button);
button.setText(R.string.button_one_text);

// button.setOnClickListener(...);

dialogFooter.addView(wrappedButton); 
```

按钮出现，但现在它们被组合在一起并移动到左侧。如果我要添加到 dialog_footer，Android 在解析我需要自己做的布局时是否会做一些事情？由于权重在这里发挥作用，我认为在我添加到 (dialog_footer) 的容器上调用 setWeightSum() 可能是必要的，但这并没有帮助。有没有人知道什么可能导致 XML 和 Java 方法之间的差异？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-01T00:20:39.963

我相信这是你的问题：

```
LinearLayout wrappedButton = (LinearLayout)getLayoutInflater().inflate(R.layout.dialog_button_wrapped, null); 
```

null 应该替换为父视图，以便它可以获取您要为其设置的 layoutParams。

另一件事是关于您设置的重量 - 您应该将宽度/高度设置为 0px，这样重量就不会导致布局过程以奇怪/低效的方式工作。

顺便说一句，您可以删除内部布局（具有按钮）并改用单个按钮。只需将 layout_gravity 设置为 center_horizo​​ntal 。

# javascript - 如何在重试 Ajax 场景中消除这种丑陋的重复代码？

> ID：14637412
> 
> 赞同：0
> 
> 时间：2013-02-01T00:00:07.197
> 
> 标签：javascript, jquery, ajax, callback, jquery-callback

由于`getGamesByPlayerId`（恰好是 Ajax 调用）的回调调用性质，我似乎无法弄清楚如何消除以下重复代码：

```
// Load the player's games.
gc.api.getGamesByPlayerId(gc.game.player.id, gc.game.player.access_token, function(data) {

    if(data.status_code === 401) {

        // Call may have failed due to being called too fast. Retry...
        gc.api.getGamesByPlayerId(gc.game.player.id, gc.game.player.access_token, function(data) {

            if(data.status_code === 401) {

                // Call may have failed due to being called too fast. Retry...
                gc.api.getGamesByPlayerId(gc.game.player.id, gc.game.player.access_token, function(data) {

                    if(data.status_code === 401) {

                        // Call may have failed due to being called too fast. Retry...
                        gc.api.getGamesByPlayerId(gc.game.player.id, gc.game.player.access_token, function(data) {

                            if(data.status_code === 401) {

                                // OK. It's safe to assume the server is current, and that
                                // we truly are not authorized to do this.
                                alert("You are not authorized.");

                            } else {

                                // Add games to HTML.
                                for( var i = 0; i < data.length; i++ ) {

                                    var html = '<li><a href="?g=' + data[i].id + '">' + data[i].id + '</a></li>';

                                    $('#games').append(html);

                                }

                            }

                        });

                    } else {

                        // Add games to HTML.
                        for( var i = 0; i < data.length; i++ ) {

                            var html = '<li><a href="?g=' + data[i].id + '">' + data[i].id + '</a></li>';

                            $('#games').append(html);

                        }

                    }

                });

            } else {

                // Add games to HTML.
                for( var i = 0; i < data.length; i++ ) {

                    var html = '<li><a href="?g=' + data[i].id + '">' + data[i].id + '</a></li>';

                    $('#games').append(html);

                }

            }

        });

    } else {

        // Add games to HTML.
        for( var i = 0; i < data.length; i++ ) {

            var html = '<li><a href="?g=' + data[i].id + '">' + data[i].id + '</a></li>';

            $('#games').append(html);

        }

    }

}); 
```

通常，我会考虑使用 for 循环，但这不起作用，因为我不想快速连续触发 Ajax 调用。我希望仅在前面的调用失败时重试触发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T00:27:19.583

忽略需要连续多次发出相同请求的情况，您可能可以使用递归函数来完成此操作。例如，类似：

```
loadPlayerGames(4);

function loadPlayerGames(triesLeft) {
    gc.api.getGamesByPlayerId(gc.game.player.id, gc.game.player.access_token, function(data) {
        if(data.status_code !== 401) {
            // Add games to HTML.
            for( var i = 0; i < data.length; i++ ) {
                var html = '<li><a href="?g=' + data[i].id + '">' + data[i].id + '</a></li>';
                $('#games').append(html);
            }
        } else if(triesLeft <= 0) {
            // OK. It's safe to assume the server is current, and that
            // we truly are not authorized to do this.
            alert("You are not authorized.");
        } else {
            // Call may have failed due to being called too fast. Retry...
            loadPlayerGames(triesLeft - 1);
        }
    });
} 
```

# php - php 简单的 xml 过滤器属性

> ID：14637416
> 
> 赞同：2
> 
> 时间：2013-02-01T00:00:16.940
> 
> 标签：php, xml, simplexml

我想过滤一个 xml 提要，所以我只导入正确语言的数据。

结构是：

```
<profile_lang lang="en">
<description>English description</description>
</profile_lang>
<profile_lang lang="fr">
<description>French</description>
</profile_lang>
<profile_lang lang="nl">
<description>Dutch text</description>
</profile_lang> 
```

等等

我应该怎么做只导入荷兰语（lang="nl"）描述？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-07T02:09:55.530

尝试

```
$xml = <<<XML 
<profile_lang lang="en">
<description>English description</description>
</profile_lang>
<profile_lang lang="fr">
<description>French</description>
</profile_lang>
<profile_lang lang="nl">
<description>Dutch text</description>
</profile_lang>
XML; 

$xml = new SimpleXMLElement($xml); 
$nodes = $xml->xpath('//*[@lang="en"]'); 

echo 'Found ', count($nodes), ' node(s) with lang "en".'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T00:37:21.920

xpath 是一种在 XML 结构中定位/过滤/搜索特定元素的好方法

```
$xml = '<root><profile_lang lang="en"><description>English description</description></profile_lang><profile_lang lang="fr"><description>French</description></profile_lang><profile_lang lang="nl"><description>Dutch text</description></profile_lang></root>';
$simple = simplexml_load_string($xml);
$description = $simple->xpath('/root/profile_lang[@lang="nl"]/description');
echo $description[0]; // Dutch text 
```

您可以提出自己的路径结构以满足您的需求

```
/root/profile_lang[@lang="nl"]/description
//profile_lang[@lang="nl"]/description
//profile_lang[@lang="nl"]
//description[../@lang="nl"] 
```

# javascript - 扩展原型方法

> ID：14637420
> 
> 赞同：0
> 
> 时间：2013-02-01T00:00:51.477
> 
> 标签：javascript, prototype

现在我有一个原型：

```
function A() {}

A.prototype.run =  function () {
    console.log('run 1');
}; 
```

鉴于我无法更改 A 所在的任何内容（无法控制源）。我想扩展方法`run`。不仅是日志`run 1`，还有日志`run 2`。我尝试了几种不同的方法，它不起作用。

```
A.prototype.run = function () {
    this.run.call(this);
    console.log('run 2');
} 
```

或者

```
A.prototype.run = function () {
    arguments.callee.call(this);
    console.log('run 2');
} 
```

有人对此有解决方案吗？我宁愿不复制方法中的内容`run`。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:03:46.583

您可以覆盖该`run`方法，并保存对它的引用；

```
(function (orig) {

    A.prototype.run = function () {
        orig.apply(this, arguments);

        console.log('run 2');
    }

}(A.prototype.run)); 
```

这类似于您的第一次尝试，但保留 的第一个值`run`，因此您可以有效地`this.run.call(this)`按照您的尝试进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T00:03:47.620

```
A.prototype._run = A.prototype.run;
A.prototype.run = function () {
    this._run.call(this);
    console.log('run 2');
} 
```

# command-line - 使用 < sqlite3 时检查结果

> ID：14637421
> 
> 赞同：2
> 
> 时间：2013-02-01T00:00:53.543
> 
> 标签：command-line, sqlite

我需要在脚本 .sh 文件中知道此命令是成功还是失败。

```
sqlite3 database.db < database.sql 
```

我在想类似的事情：

```
$result = ('sqlite3 database.db < database.sql') 
```

如果 $result 包含某些内容，我会保释。否则，如果结果不包含任何内容，我将继续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:52:41.527

该`sqlite3`工具将返回正常的错误状态，您可以使用正常的 shell 方法（`if`、`$?`等）进行检查：

```
$ if sqlite3 test.db "select 42;"; then echo success; else echo failure; fi
42
success
$ if sqlite3 test.db "select x;"; then echo success; else echo failure; fi
Error: no such column: x
failure 
```

# c++ - 重载运算符以允许 qsort 在 C++ 中工作

> ID：14637424
> 
> 赞同：0
> 
> 时间：2013-02-01T00:00:55.327
> 
> 标签：c++, operator-overloading

我用 C++ 编写了一段代码，然后决定将其更改为面向对象，并且我的所有函数都可以正常工作，而不是 qsort。我查过它与重载运算符有关，但我无法弄清楚如何做到这一点。有人可以帮忙吗？

```
#include <iostream>
#include <fstream>
#include <string.h>
using namespace std;

class OpAmps {
private:
    char Name[20]; 
    unsigned int PinCount; 
    double SlewRate; 
public:
    void Enter(OpAmps&, unsigned long&);
    void Save(const OpAmps*, unsigned long);
    void Load(OpAmps*, unsigned long&);
    void Sort(OpAmps*, unsigned long);
    int SortName(const void*, const void*);
    int SortSlewRate(const void*, const void*);
    void Display(const OpAmps*, unsigned long);
};

#define DATABASE_MAX 10
#define DATABASE_FILENAME "database.txt"

int main()
{
    OpAmps OpAmp[DATABASE_MAX]; 
    OpAmps Menu;
    unsigned long database_length = 0; 
    char UserInput;
    while (1) {
        cout << endl;
        cout << "Op-amp database menu" << endl;
        cout << "--------------------" << endl;
        cout << "1\. Enter a new op-amp into the database" << endl;
        cout << "2\. Save the database to disk" << endl;
        cout << "3\. Load the database from disk" << endl;
        cout << "4\. Sort the database" << endl;
        cout << "5\. Display the database" << endl;
        cout << "6\. Exit from the program" << endl << endl;
        cout << "Enter your option: ";
        cin >> UserInput;
        cout << endl;
        switch(UserInput) {
            case '1':
            Menu.Enter(OpAmp[database_length], database_length);
            break;
            case '2':
            Menu.Save(OpAmp, database_length);
            break;
            case '3':
            Menu.Load(OpAmp, database_length);
            break;
            case '4':
            Menu.Sort(OpAmp, database_length);
            break;
            case '5':
            Menu.Display(OpAmp, database_length);
            break;
            case '6':
            return 0;
            default:
            cout << "Invalid entry" << endl << endl;
            break;
        }
    }
}

void OpAmps::Enter(OpAmps& Op, unsigned long& length)
{
    if (length == DATABASE_MAX) {
        cout << "The database is full" << endl;
    }
    else {
        cout << "Add new data" << endl;
        cout << "------------" << endl;
        cout << "Enter op-amp name: ";
        cin >> Op.Name;
        cout << "Enter number of pins: ";
        cin >> Op.PinCount;
        cout << "Enter slew rate: ";
        cin >> Op.SlewRate;
        cout << endl;
        length++;
    }
}

void OpAmps::Save(const OpAmps* Op, unsigned long length)
{
    fstream output_file;
    output_file.open(DATABASE_FILENAME, ios::out);
    if(output_file.good()) {
        output_file << length << endl << endl;
        for (unsigned long i=0;i<length;i++) {
            output_file << Op[i].Name << endl;
            output_file << Op[i].PinCount << endl;
            output_file << Op[i].SlewRate << endl << endl;
        }
    }
    output_file.close();
}

void OpAmps::Load(OpAmps* Op, unsigned long& length)
{
    fstream input_file; 
    input_file.open(DATABASE_FILENAME, ios::in);
    if(input_file.good()) {
        input_file >> length;
        for (unsigned long i=0;i<length;i++) {
            input_file >> Op[i].Name;
            input_file >> Op[i].PinCount;
            input_file >> Op[i].SlewRate;
        }
    }
    input_file.close();
}

void OpAmps::Sort(OpAmps* Op, unsigned long length)
{
    char UserInput;
    cout << endl;
    cout << "Sorting options" << endl;
    cout << "---------------" << endl;
    cout << "1\. To sort by name" << endl;
    cout << "2\. To sort by slew rate" << endl;
    cout << "3\. No sorting" << endl << endl;
    cout << "Enter your option: ";
    cin >> UserInput;
    cout << endl;
    switch(UserInput) {
        case '1':
        cout<<"sortName"<<endl;
        qsort(Op,length,sizeof(OpAmps),SortName);
        break;
        case '2':
        cout<<"sortslew"<<endl;
        qsort(Op,length,sizeof(OpAmps),SortSlewRate);
        break;
        case '3':
        return;
        default:
        cout << "Invalid entry" << endl << endl;
        break;
    }
}

int SortName(const void *First, const void* Second)
{
    return strcmp(((OpAmps *) First)->Name, ((OpAmps *) Second)->Name);
}

int SortSlewRate (const void *First, const void* Second)
{
    return (int) ((((OpAmps *) First)->SlewRate > ((OpAmps *) Second)->SlewRate)? 1 : -1);
}

void OpAmps::Display(const OpAmps* Op, unsigned long length)
{
    if (length == 0) {
        cout << "No elements in the database" << endl;
    }
    else {
        cout << endl;
        for (unsigned long i=0;i<length;i++) {
            cout << "Name: " << Op[i].Name <<endl;
            cout << "Number of Pins: " << Op[i].PinCount << endl;
            cout << "Slew Rate: " << Op[i].SlewRate << endl;
            cout << endl;
        }
    }
} 
```

干杯家伙：D xx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:14:52.823

我认为您在这种情况下的问题是您定义了具有相同名称的不同类型的函数。您已对 SortName 和 SortSlewRate 进行了此操作。

一个定义说“SortName”和“SortSlewRate”是 OpAmps 类的成员函数，但是，在您的代码中，SortName 和 SortSlewRate 是全局函数。

qsort 是一个 C 函数，需要函数指针而不是成员函数指针。

由于您的函数旨在成为全局函数，但要访问 OpAmps 类的私有成员，因此您应该将“friend”关键字放在它们前面。

尝试将您的声明更改为此...

```
class OpAmps {
private:
    char Name[20]; 
    unsigned int PinCount; 
    double SlewRate; 
public:
    void Enter(OpAmps&, unsigned long&);
    void Save(const OpAmps*, unsigned long);
    void Load(OpAmps*, unsigned long&);
    void Sort(OpAmps*, unsigned long);
    void Display(const OpAmps*, unsigned long);

    friend int SortName(const void*, const void*);
    friend int SortSlewRate(const void*, const void*);
}; 
```

综上所述，您最好使用 std::sort 而不是 qsort，您将获得类型安全的优势，并且在某些情况下，由于编译器可以为您进行优化，性能甚至更高。

你的定义看起来像这样

```
class OpAmps {
private:
    char Name[20]; 
    unsigned int PinCount; 
    double SlewRate; 
public:
    void Enter(OpAmps&, unsigned long&);
    void Save(const OpAmps*, unsigned long);
    void Load(OpAmps*, unsigned long&);
    void Sort(OpAmps*, unsigned long);
    void Display(const OpAmps*, unsigned long);

    friend bool SortName(const OpAmps &, const OpAmps &);
    friend bool SortSlewRate(const OpAmps &, const OpAmps &);
}; 
```

你会像这样使用“排序”......

```
 sort(Op, Op + length,SortName); 
```

和

```
 sort(Op,Op + length,SortSlewRate); 
```

请注意，排序有点不同，函数返回 true（小于）或 false（等于或大于）而不是 -1（小于）、0（等于）、-1（大于），它们不是t 传递了指针，它们传递了引用。

你会这样定义它们。

```
bool SortName(const OpAmps &First, const OpAmps &Second)
{
    return strcmp(First.Name, Second.Name) < 0;
}

bool SortSlewRate (const OpAmps &First, const OpAmps &Second)
{
    return First.SlewRate < Second.SlewRate;
} 
```

最后，为了更像 C++，你可以切换你的

```
char Name[20]; 
```

至

```
string Name; 
```

这将简化您的 SortName 函数并提供针对讨厌的缓冲区溢出错误的安全性。

```
bool SortName(const OpAmps &First, const OpAmps &Second)
{
    return First.Name < Second.Name;
} 
```

# migration - 跨多个目录迁移版本

> ID：14637429
> 
> 赞同：3
> 
> 时间：2013-02-01T00:01:09.307
> 
> 标签：migration, version, flyway

如果我想在多个目录中组织我的迁移（假设我正在使用 SQL 迁移，并且在“sql”目录下我有一个“主”目录，然后是一个“特殊”目录）。

所以在 sql/main 我有“V1.1__some_change”等。

然后我也想将其他迁移放在 sql/special 下。但是迁移版本号必须在所有目录中都不同，例如，我不能将“V1.1__some_other_change”放在 sql/special 中，因为它会导致冲突。

但是跨多个不同目录管理线性版本号并不容易。有没有解决这个问题的好方法？

希望这个问题很清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T07:01:09.770

好吧，这一切都取决于为什么 special 是**"special"**以及它**与 "main"**的关系。

如果它们具有**相同的生命周期**，您可以使用不同的编号方案（主版本中的整数，特殊版本中的点版本）或在共享资源（白板、wiki 页面等）中跟踪分配的迁移编号，以便于了解下一个可用的是。

如果它们有**单独的生命周期**，您可以使用单独的 Flyway 实例跟踪它们（每个实例都有不同的 flyway.table）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T16:37:54.570

今天我遇到了同样的问题。我将 Flyway 1.7 更新为最新版本 2.0.3。我注意到迁移不再像在 1.7 版中那样工作了。

我们使用基本文件夹 (db.migrations) 的不同子文件夹来保存不同数据库方案的迁移，这些数据库方案具有**独立的生命周期**和自己的 schema_version 表：

```
src->main->resources->db.migrations
 ->business_partitions
     -> V1_1__BUSINESS_PARTITION_INDEXES.sql
     -> V1__BUSINESS_PARTITIOS.sql
 ->tech
     -> V1_1__TECH_CERTIFICATES_AND_DECRYPTORS_TABLES.sql
     -> V1__TECH.sql
     -> V2__JMS.sql
 ->view
     -> V1__PARTITION11_DB_CREATION_SCRIPT_VIEWS.sql 
```

当我们今天使用 Java 中的以下行执行数据库迁移时：

```
Flyway flyway = new Flyway();
flyway.setDataSource(dataSource);
flyway.setLocations("db.migrations.business_partitions");
flyway.migrate(); 
```

没有进行任何迁移。

我深入研究了 flyway 源代码，发现问题是在 CompositeMigrationResolver 类的 mergeLocations() 方法中过滤掉了位置。

在那里，我的位置被过滤掉了，因为 business_partitions 是 db.migrations 的子文件夹，是 BaseDir 和 BasePackage 的默认值。

我通过明确设置 BaseDir 和 BasePackage 来解决：

```
flyway.setBaseDir("db.migrations.business_partitions");
flyway.setBasePackage("db.migrations.business_partitions"); 
```

我读到这两种方法将在 flyway 3 中被弃用，所以也许这也能解决我们的问题。

# spring-mvc - TrueZip 和 MultiPart 表单

> ID：14637430
> 
> 赞同：1
> 
> 时间：2013-02-01T00:01:14.773
> 
> 标签：spring-mvc, truezip

我目前正在使用 TrueZip 将文件添加到通过 MultiPartFile 上传到服务器的 Zip 文件中。

**问题** 附加文件后，zip 变得无效。它不能再作为 zip 文件打开。

**代码** 让我们从我的上传控制器中的相关代码开始（文件是 MultiPartFile）：

```
 // Get the file
    File dest = null;
    TFile zip = null;
    try {
        // Obtain the file locally, zip, and delete the old
        dest = new File(request.getRealPath("") + "/datasource/uploads/" + fixedFileName);
        file.transferTo(dest);

        // Validate
        zip = new TFile(dest);
        resp = mls.validateMapLayer(zip);
        // Now perform the upload and delete the temp file
        FoundryUserDetails userDetails = (FoundryUserDetails) SecurityContextHolder.getContext().getAuthentication()
                .getPrincipal();
        UserIdentity ui = userDetails.getUserIdentity();

        MapLayer newLayer = new MapLayer();

                    // generate the prj
        mls.generateProjection(resp, dest.getAbsolutePath(), projection); 
```

方法“generateProjection”是添加文件的地方：

```
public void generateProjection(UploadMapResponse resp, String fLoc, FoundryCRS proj) throws NoSuchAuthorityCodeException,
        FactoryException, IOException {
    TFile projFile = new TFile(fLoc, resp.getLayerName() + ".prj");
    CoordinateReferenceSystem crs = CRS.decode(proj.getEpsg());
    String wkt = crs.toWKT();
    TConfig config = TConfig.push();
    try {
        config.setOutputPreferences(config.getOutputPreferences().set(FsOutputOption.GROW));
        TFileOutputStream writer = new TFileOutputStream(projFile);
        try {
            writer.write(wkt.getBytes());
        } finally {
            writer.close();
        }
    } finally {
        config.close();
    }
} 
```

为了测试这是否有效，我在一个简单的 main 中尝试了它：

```
public static void main(String[] args) {
    File f = new File("C:/Data/SierritaDec2011TopoContours.zip");
    TFile tf = new TFile(f);
    tf.listFiles();

    TFile proj = new TFile(f, "test.prj");
    TConfig config = TConfig.push();
    try {
        config.setOutputPreferences(config.getOutputPreferences().set(FsOutputOption.GROW));
        TFileOutputStream writer = null;
        try {
            writer = new TFileOutputStream(proj);
        } catch (FileNotFoundException e1) {
            e1.printStackTrace();
        }

        try {
            writer.write("Hello Zip world".getBytes());
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } finally {
            try {
                writer.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    } finally {
        // Pop the current configuration off the inheritable thread local
        // stack.
        config.close();
    }
} 
```

当然，这很好用。

**问题**

有谁知道为什么在将 MultiPartFile 复制到本地文件的 Web 服务器中，TFileOutputStream 无法正确写入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:37:20.070

在长时间运行的服务器应用程序中，您可能需要添加对 TVFS.sync() 或 TVFS.umount() 的调用以同步或卸载存档文件。对于 ZIP 文件，这将触发在 ZIP 文件末尾写入中央目录，这是形成有效 ZIP 文件所必需的。

请检查 Javadoc 以确定哪个调用最适合您的用例：[http ://truezip.java.net/apidocs/de/schlichtherle/truezip/file/TVFS.html](http://truezip.java.net/apidocs/de/schlichtherle/truezip/file/TVFS.html)

另外，请注意，在每次追加操作后调用 TFVS.sync() 或 TVFS.umount() 将导致每次写入的中央目录都在增长，这会导致巨大的开销。因此，值得考虑何时需要执行此操作。一般来说，只有当您希望第三方访问 ZIP 文件时才需要这样做。第三方是不与 TrueZIP 内核交互以访问 ZIP 文件的任何人。

# android - 解析返回对象而不是对象数组的 Web 服务的响应

> ID：14637433
> 
> 赞同：0
> 
> 时间：2013-02-01T00:01:30.510
> 
> 标签：android, xml, parsing

我正在制作一个 android 应用程序女巫从 Web 服务获取信息。我需要一个解决方案来解析这个结果：

```
<Client xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://lmggroup.net/">
<ID>12805</ID>
<PersonalNumber>0</PersonalNumber>
<EntryDate>2013-01-28T14:39:01</EntryDate>
<FirstName>0</FirstName>
<LastName>0</LastName>
<Address>0</Address>
<Phone>0601231569</Phone>
<Email>aaa@aaa.com</Email>
<OrganizationalUnitID>02901</OrganizationalUnitID>
<Password>aaaaaa</Password>
<IsActive>true</IsActive>
</Client> 
```

我已经尝试使用以下代码解决此问题

```
public static ArrayList<UserContent> getUserContentList(String response)
{
    ArrayList<UserContent> result = new ArrayList<UserContent>();
    if (response != null && response.equals("") == false)
    {
        KXmlParser xmlParser = new KXmlParser();
        Document xmlDoc = new Document();

        ByteArrayInputStream bin = new ByteArrayInputStream(response.getBytes());
        InputStreamReader isr = new InputStreamReader( bin );

        try
        {
            xmlParser.setInput(isr);
            xmlDoc.parse(xmlParser);
            Element xmlRoot = xmlDoc.getRootElement();
            if(xmlRoot != null)
            {
                Element[] xmlChild = XmlParser.getChildren(xmlRoot);
                for ( int index = 0; index < xmlChild.length; ++index )
                {
                    UserContent item = new UserContent();
                    Element[] contentNodes = XmlParser.getChildren(xmlChild[index]);
                    for ( int i = 0; i < contentNodes.length; ++i )
                    {
                        if (contentNodes[i].getName().equals(StaticStrings.contentUserID))
                        {
                            item.id = contentNodes[i].getText(0);
                        }
                        else if (contentNodes[i].getName().equals(StaticStrings.contentUserPIB))
                        {
                            item.pib = contentNodes[i].getText(0);
                        }
                        else if (contentNodes[i].getName().equals(StaticStrings.contentUserPhone))
                        {
                            item.phone = contentNodes[i].getText(0);
                        }
                        else if (contentNodes[i].getName().equals(StaticStrings.contentUserMail))
                        {
                            item.email = contentNodes[i].getText(0);
                        }
                    }
                    result.add(item);
                }
            }
        }
        catch (IOException e)
        {
            Log.e(TAG, e.getMessage());
        }
        catch (XmlPullParserException e)
        {
            Log.e(TAG, e.getMessage());
        }

        try
        {
            isr.close();
        }
        catch (IOException e) {}

    }
    return result;
} 
```

但是当我调用这个方法时，我得到了所有的 xml 标签，但它们的内容是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:09:40.473

更直接的方法可能是使用 XML 序列化框架。如果您使用的是纯 Java，那可能是 JAXB，但对于 Android，[Simple XML](http://simple.sourceforge.net/)是一个不错的选择。简而言之，您创建一个 POJO，然后对其进行注释以指示您希望如何序列化/反序列化。例如，

```
@Root(name = "Client")
class Client {

  @Attribute(name = "ID")
  private String id;

  ...
} 
```

然后反序列化，

```
Serializer serializer = new Persister();
String xml = ...; // get your XML into a string, or a stream
Client client = serializer.read(Client.class, xml); 
```

# javascript - Jquery 动态窗口调整大小

> ID：14637441
> 
> 赞同：1
> 
> 时间：2013-02-01T00:02:25.853
> 
> 标签：javascript, loops, jquery, window-resize

我正在尝试从给定的整数数组调整窗口大小。这是我当前的错误代码：

```
$(window).load(function() {

var group = [0, 1, 2];

var global_i = 0;

$.each(group,function(i){

    //some code will execute here

    console.log('#');

    resize_window_width_helper(1000-(i*10));        

    $(window).on('debouncedresize.rs'+i, function() {   

        if(i == global_i){

            //execute another bit of code on resize

            console.log("Hello from " + i);

            console.log('body width = '+$('body').width());

            global_i++;

        }

    });

});

}); 
```

我的控制台的返回是：

```
#
#
#
Hello from 0
body width = 941 
Hello from 1 
body width = 941 
Hello from 2 
body width = 941 
```

我期待的回报是：

```
#
Hello from 0
body width = 961
#
Hello from 1
body width = 951
#
Hello from 2
body width = 941 
```

数组的内容`group`会有所不同。

该函数`resize_window_width_helper(input)`将简单地将窗口宽度调整为其参数值。

该事件`debouncedresize`是 Chrome 浏览器两次触发任何调整大小的修复（请参阅[http://paulirish.com/2009/throttled-smartresize-jquery-event-handler/](http://paulirish.com/2009/throttled-smartresize-jquery-event-handler/)和[https://github.com/louisremi/jquery-smartresize #minimalist-standalone-version](https://github.com/louisremi/jquery-smartresize#minimalist-standalone-version)）。所以请把这个事件当作一个简单的`$(window).resize(function() {...});`.

我正在使用谷歌 Chrome 浏览器。

我强烈怀疑我所有问题的根源在于变量`i`及其递增的方法。我非常感谢您能提供的任何帮助。

# css - 悬停 li.class 时如何显示 div.class？

> ID：14637445
> 
> 赞同：0
> 
> 时间：2013-02-01T00:02:56.450
> 
> 标签：css, html, hover

在[biztone.co](http://biztone.co)页面的左侧边栏中，当主 div(#sidebar .recent-post-thumb li) 为徘徊。我已经让它工作了，除了 div(.item .details .post-meta) 出现在悬停框下方的框中。

这是我添加的 CSS 脚本以使其工作。但是，我需要帮助弄清楚为什么它显示在下面的框中而不是悬停的框..？

```
.item .details .post-meta { display:none; }
sidebar .recent-post-thumb li:first-child:hover + .item .details .post-meta {
display:block; }
sidebar .recent-post-thumb li:hover + .item .details .post-meta {
display:block; } 
```

非常感谢任何帮助，并将教会我一些新的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:15:45.457

`#sidebar .popular-post-thumb li:hover .post-meta`是选择器所需要的，而不是使用`+`

更改`sidebar .recent-post-thumb li:hover + .item .details .post-meta`为
`#sidebar .popular-post-thumb li:hover .post-meta`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T00:16:44.190

这是因为`+`符号：它针对*下一个*元素。

删除它，它将针对`.post-meta`当前悬停的 li 内的元素。

# python - numpy数组的别名

> ID：14637453
> 
> 赞同：2
> 
> 时间：2013-02-01T00:03:44.757
> 
> 标签：python, numpy

我一直在考虑这个问题，但我无法理解这里发生了什么......希望这是简单的事情？在下面的输出中，我希望“c”的第二个条目的第一个元素中有一个“41”。

```
>>> a = np.zeros(shape = (2,2))
>>> b = np.zeros(shape = (2,2))
>>> c = [np.array(x) for x in range(3)]
>>> c[1] = np.zeros(shape=(2,2,3))
>>> c[1][:,:,0] = a.view()
>>> a
array([[ 0.,  0.],
       [ 0.,  0.]])
>>> c
[array(0), array([[[ 0.,  0.,  0.],
                   [ 0.,  0.,  0.]],

                  [[ 0.,  0.,  0.],
                   [ 0.,  0.,  0.]]]), array(2)]
>>> a[0,0] = 41
>>> a
array([[ 41.,   0.],
       [  0.,   0.]])
>>> c
[array(0), array([[[ 0.,  0.,  0.],
                   [ 0.,  0.,  0.]],

                  [[ 0.,  0.,  0.],
                   [ 0.,  0.,  0.]]]), array(2)] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T00:10:27.200

因为你做了：

`c[1][:,:] = a.view()`

这会产生浅拷贝。

如果你这样做`c[1] = a.view()`了，你会看到你期望的行为。

# php - 许多BETWEEN和AND错误答案mysql

> ID：14637456
> 
> 赞同：0
> 
> 时间：2013-02-01T00:04:00.330
> 
> 标签：php, mysql

我使用查询有点复杂。有BETWEEN and and。我选择的是具有数据库所有值的查询。字段 classe = 'Vehicule' 不再被重新识别，并且选择了孔表元素这里是简单的代码

```
$query = "SELECT
publier.classe AS 'classe',
publier.sclasse AS 'sclasse',
publier.region AS 'region',
publier.sujet AS 'sujet',
publier.prix AS 'prix',
publier.details AS 'details',
publier.pdate AS 'pdate',
publier.ptime AS 'ptime',
publier.photo1 AS 'photo1',
publier.photo2 AS 'photo2',
publier.photo3 AS 'photo3',
publier.photo3 AS 'photo4',
publier.courriel AS 'courriel',
info.Ville AS 'Ville' ,
info.Nom AS 'Nom',
info.Prenom AS 'Prenom',
info.Telephone AS 'Telephone',
info.Courriel AS 'Courriel'
FROM 
publier LEFT JOIN info 
ON
publier.courriel = info.Courriel 
        WHERE classe = 'Vehicule' AND  
        (details LIKE \"%$trimmed%\") OR 
        (sujet  LIKE \"%$trimmed%\") AND 
        (pdate BETWEEN DATE_SUB(NOW(), INTERVAL 60 DAY) AND NOW()) AND 
        (prix BETWEEN '".$pmin."' AND '".$pmax."') 
ORDER BY prix ASC"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:07:45.727

注意 WHERE 中的条件是如何分组的：

```
WHERE classe = 'Vehicule' AND  (details like \"%$trimmed%\")OR(sujet  like \"%$trimmed%\")  AND (pdate BETWEEN DATE_SUB(NOW(), INTERVAL 60 DAY) AND NOW()) AND (prix BETWEEN '".$pmin."' AND '".$pmax."') 
```

这个句子

```
WHERE A AND B OR C 
```

不一样

```
WHERE A AND (B OR C) 
```

等等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T00:09:01.107

改变

```
 (details like \"%$trimmed%\")OR(sujet  like \"%$trimmed%\") 
```

至

```
 (details like \"%$trimmed%\" OR sujet like \"%$trimmed%\") 
```

**OR**是这里的罪魁祸首，当括号外的所有前面的条件可能为假时，仍然会返回结果。

# excel - 如何使用正常摊销计算期间的利息

> ID：14637457
> 
> 赞同：0
> 
> 时间：2013-02-01T00:04:15.090
> 
> 标签：excel, equation

我有一个基本的应用程序，它使用“简单利息”来计算财务成本。

```
COF = Prt  = Principal * (Rate / 12) * nPer 
```

因此，对于 48 个月内 10%pa 的 10,000 美元贷款，COF 为 4000 美元

因此，付款固定为：

```
(Principal + COF) / nPer = Monthly Payment Amount 
```

我想做的是生成一个使用正常摊销的摊销表，以生成期限、支付中包含的利息金额、支付中包含的本金金额和剩余贷款余额。

```
Period Interest Principal Balance 
```

我无法在任何地方找到计算方法来确定每个期间付款中包含的利息和本金的百分比。

我不能使用 Excel 公式（ipmt 和 ppmt），因为它们是基于*复利公式*而不是我尝试使用的*单利公式。*例如，Excel 将 10000 美元贷款在 48 个月内以 10%pa 计算的 COF 为 2174.04 美元

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:27:32.657

鉴于您事先知道您将支付的总本金和总利息，付款很简单：

```
P = (Principal + Interest) / 48 = (10000 + 4000) / 48 = 291.666666 
```

现在，只需编写一个摊销时间表：

```
Period  |  Principal (K) | Interest (I)      | Payment | Balance (B)
-------------------------------------------------------------------------
     1  | K[1] = 10000   | K[1] * 0.1 / 12   | P       | K[1] + I[1] - P
     2  | K[2] = B[1]    | K[2] * 0.1 / 12   | P       | K[2] + I[2] - P
... 
```

这可以通过 VBA 或 Excel 公式轻松解决。

* * *

***一点资料***

据我所知（或在墨西哥已知），这种方法称为*全球利息*：计算您要收取的利息，然后将本金和应收利息除以摊销期数。

Excel（以及我知道的所有其他电子表格程序）使用考虑复合利率的*水平付款方式。*Excel得到的结果可以用下面的公式来复制：

```
P = -K / a(n,r) 
```

其中`P`是每期的平均支付额，`n`是摊销期数，`r`是每期的有效利率，是*年金*`a(n,r)`的现值：

 *```
a(n,r) = (1 + (1 + r)^(-n)) / r 
```

我建议你阅读*“兴趣理论”（凯利森）*。*

# android - 如何在 ListActivity 和 Fragment 中嵌入加载进度指示器

> ID：14637460
> 
> 赞同：2
> 
> 时间：2013-02-01T00:04:25.527
> 
> 标签：android, android-fragments, android-activity

有没有一种方法可以在 ListActivity 或 Fragment 中嵌入加载进度指示器，就像在 ListFragment 中调用[setListShown()](http://developer.android.com/reference/android/app/ListFragment.html#setListShown%28boolean%29)一样？我可以使用加载对话框，但我希望保持一致，因为我已经在其他 ListFragments 中使用了 setListShown()。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T23:39:09.257

我通过为类似于[ListFragment](http://developer.android.com/reference/android/support/v4/app/ListFragment.html)的片段类编写一个包装器来实现这一点。

```
public class AsyncFragment extends Fragment {

static final int INTERNAL_PROGRESS_CONTAINER_ID = 0x00ff0001;
static final int INTERNAL_CONTENT_CONTAINER_ID = 0x00ff0002;

View mProgressContainer;
View mContentContainer;
boolean mContentShown = true;

public AsyncFragment() {}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    final Context context = getActivity();

    FrameLayout root = new FrameLayout(context);

    // ------------------------------------------------------------------

    LinearLayout pframe = new LinearLayout(context);
    pframe.setId(INTERNAL_PROGRESS_CONTAINER_ID);
    pframe.setOrientation(LinearLayout.VERTICAL);
    pframe.setVisibility(View.GONE);
    pframe.setGravity(Gravity.CENTER);

    ProgressBar progress = new ProgressBar(context, null,
            android.R.attr.progressBarStyleLarge);
    pframe.addView(progress, new FrameLayout.LayoutParams(
            ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT));

    root.addView(pframe, new FrameLayout.LayoutParams(
            ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT));

    // ------------------------------------------------------------------

    FrameLayout lframe = new FrameLayout(context);
    lframe.setId(INTERNAL_CONTENT_CONTAINER_ID);

    root.addView(lframe, new FrameLayout.LayoutParams(
            ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT));

    // ------------------------------------------------------------------

    root.setLayoutParams(new FrameLayout.LayoutParams(
            ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT));

    return root;
}

public void setView(View v) {

    FrameLayout lframe = (FrameLayout) getView().findViewById(INTERNAL_CONTENT_CONTAINER_ID);
    lframe.addView(v, new FrameLayout.LayoutParams(
            ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT));

}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    mProgressContainer = getView().findViewById(INTERNAL_PROGRESS_CONTAINER_ID);
    mContentContainer = getView().findViewById(INTERNAL_CONTENT_CONTAINER_ID);
    setContentShown(false, false);
}

@Override
public void onDestroyView() {
    mContentShown = false;
    mProgressContainer = mContentContainer = null;
    super.onDestroyView();
}

public void setContentShown(boolean shown) {
    setContentShown(shown, true);
}

public void setContentShownNoAnimation(boolean shown) {
    setContentShown(shown, false);
}

private void setContentShown(boolean shown, boolean animate) {

    mProgressContainer = getView().findViewById(INTERNAL_PROGRESS_CONTAINER_ID);
    mContentContainer = getView().findViewById(INTERNAL_CONTENT_CONTAINER_ID);

    if (mContentShown == shown) {
        return;
    }
    mContentShown = shown;
    if (shown) {
        if (animate) {
            mProgressContainer.startAnimation(AnimationUtils.loadAnimation(
                    getActivity(), android.R.anim.fade_out));
            mContentContainer.startAnimation(AnimationUtils.loadAnimation(
                    getActivity(), android.R.anim.fade_in));
        } else {
            mProgressContainer.clearAnimation();
            mContentContainer.clearAnimation();
        }
        mProgressContainer.setVisibility(View.GONE);
        mContentContainer.setVisibility(View.VISIBLE);
    } else {
        if (animate) {
            mProgressContainer.startAnimation(AnimationUtils.loadAnimation(
                    getActivity(), android.R.anim.fade_in));
            mContentContainer.startAnimation(AnimationUtils.loadAnimation(
                    getActivity(), android.R.anim.fade_out));
        } else {
            mProgressContainer.clearAnimation();
            mContentContainer.clearAnimation();
        }
        mProgressContainer.setVisibility(View.VISIBLE);
        mContentContainer.setVisibility(View.GONE);
    }
} 
```

我将它用于异步填充的片段。要使用它，请不要覆盖 onCreateView()。相反，在 onStart() 中扩展您的视图并使用它调用 setView()。片段将从加载微调器开始。完成填充视图后调用 setContentShow(true) 以删除加载动画并显示您的内容。

# java - bufferedreader - 读入字符串缓冲区而不是字符串

> ID：14637463
> 
> 赞同：1
> 
> 时间：2013-02-01T00:04:49.833
> 
> 标签：java, stream, while-loop, bufferedreader, stringbuffer

我有以下代码。我想做的是将 BufferedReader 中的每一行直接读入 StringBuffer 以减少内存开销。一旦它到达数据流的末尾，我希望它退出 while 循环。

```
StringBuffer line = new StringBuffer();
        URL url = new URL("a url");
        BufferedReader reader = new BufferedReader(new InputStreamReader(url.openStream()));
                int count = 0;
                while(line.append(reader.readLine()) != null){
                    System.out.println(line.toString());
                    line.delete(0,line.length());
                } 
```

它可以很好地读取流，但是当我到达流的末尾时，它会返回 null 并在不退出循环的情况下继续打印 null。任何

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T00:12:39.820

这与说永远不可能发生的情况`while(line.append(reader.readLine()) != null)`基本相同。`while(line.append(reader.readLine()).toString() != null)`

您可能遇到的另一个问题`null`实际上是被翻译`String`成`"null"`. 这就是它打印“null”的原因，该值实际上并没有`null`- 混淆......

相反，尝试类似...

```
String text = null;
while((text = reader.readLine()) != null){
    line.append(text)
    System.out.println(line.toString());
    line.delete(0,line.length());
} 
```

**更新**

当我在这里时，我可能会建议您实际上并没有为自己节省任何东西。

`readLine`将创建`String`对象，您将其放入`StringBuffer`. 您实际上并没有节省任何内存，而是使过程复杂化。

如果您真的担心`String`在内存中创建大量对象，请`BufferedReader#read(char[])`改用。将生成的字符数组附加到`StringBuffer`.

此外，除非您需要同步访问 , 否则`StringBuffer`使用`StringBuilder`它会更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T00:31:56.623

这完美地工作。你只需要抓住 NUllPointerException

```
while(line.append(reader.readLine().toString()) != null){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T00:13:03.250

你可以用这个 for 循环尝试同样的方法：

```
for (String line; (line = reader.readLine()) != null;) {
    System.out.println(line); // Or whatever
} 
```

# puppet - Puppet 重复声明：Class[Mongodb] 已声明；不能重新声明

> ID：14637473
> 
> 赞同：9
> 
> 时间：2013-02-01T00:06:03.043
> 
> 标签：puppet, vagrant

可能在这里做了一些非常愚蠢的事情，但我找不到任何可能导致这种情况的文档。

使用 Puppet 设置 Vagrant VM，我正在尝试覆盖[mongodb](https://github.com/puppetlabs/puppetlabs-mongodb)模块中的特定设置。

据我所知，该仓库中的 README.md 语法不正确（尽管我也尝试过）。

我的清单：

```
include mongodb

class { 'mongodb' :
port => '1111';
} 
```

运行时`vagrant up`出现以下错误：

```
Duplicate declaration: Class[Mongodb] is already declared; cannot redeclare at /tmp/vagrant-puppet/manifests/mongodb.pp:5 on node www 
```

如果我删除配置覆盖，它会完美运行，但没有理由不这样做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T06:06:42.940

您使用两种表示法来实现相同的目的，但您只能使用带有第二种表示法的参数。简而言之，您要声明它两次。

所以，只要失去'include mongodb'，你就很好了。

更多信息：[http ://docs.puppetlabs.com/puppet/2.7/reference/lang_classes.html#declaring-a-class-with-include](http://docs.puppetlabs.com/puppet/2.7/reference/lang_classes.html#declaring-a-class-with-include)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T07:56:22.550

是的，只需简单地删除`include mongodb`线。这将起作用，但确保`class { 'mongodb': ... }`仍然存在。否则，使用`include mongodb`

# excel - 通过 ACE.OLEDB 从 Excel 中的 sqlbulkcopy 将文本截断为 255 个字符

> ID：14637474
> 
> 赞同：1
> 
> 时间：2013-02-01T00:06:06.233
> 
> 标签：excel, oledb, sqlbulkcopy

使用 SqlBulkCopy 非常直接的导入：

```
string excelConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + filePath + ";Extended Properties=\"Excel 12.0 Xml;HDR=YES;IMEX=1;\"";
using (OleDbConnection excelConnection = new OleDbConnection(excelConnectionString))
{
    excelConnection.Open();
    OleDbCommand cmd = new OleDbCommand("Select " + fileID.ToString() + " as [FileID], * from [Sheet1$] where [Text] IS NOT NULL", excelConnection);
    OleDbDataReader dReader = cmd.ExecuteReader();

    using (SqlBulkCopy sqlBulk = new SqlBulkCopy(ConfigurationManager.ConnectionStrings["DBConnection"].ConnectionString))
    {
        sqlBulk.DestinationTableName = "table_name";
        sqlBulk.ColumnMappings.Add(0, "FileID");
        sqlBulk.ColumnMappings.Add(4, "Author");
        sqlBulk.ColumnMappings.Add(3, "Title");
        sqlBulk.ColumnMappings.Add(1, "Body");
        sqlBulk.ColumnMappings.Add(2, "PublishedDate");
        sqlBulk.BulkCopyTimeout = 600;
        sqlBulk.WriteToServer(dReader);
    }
} 
```

数据进去，没问题。除了映射到正文 (nvarchar(max)) 的第一列被截断为 255 个字符。我环顾四周，发现了一些涉及[更改注册表设置的](http://support.microsoft.com/kb/281517)解决方法的参考。将值设置为 0 以强制完全扫描，而不仅仅是前 8 行，这是 Excel 的默认值，但即使在重新启动后也无济于事。寻找其他想法。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-18T17:05:32.873

我使用 ODBC 而不是 OLEDB，它不再将值截断为 255 个符号：

```
OdbcConnection con = new OdbcConnection(@"Driver={Microsoft Excel Driver
(*.xls)};DBQ=c:\temp\testbook.xls");
OdbcCommand cmd = new OdbcCommand(@"SELECT * FROM [Workbook1$]");
cmd.Connection = con;
OdbcDataAdapter da = new OdbcDataAdapter(cmd);
DataSet ds = new DataSet();
da.Fill(ds); 
```

您可以使用 2007 格式驱动程序访问 XLSX 文件： .... `Driver={Microsoft Excel Driver (*.xls, *.xlsx, *.xlsm, *.xlsb)}`...</p>

# tortoisehg - 如何浏览 Bitbucket 上的公共存储库？

> ID：14637476
> 
> 赞同：29
> 
> 时间：2013-02-01T00:06:08.770
> 
> 标签：tortoisehg, bitbucket

我正在学习使用 TortoiseHG 并希望从其他人的存储库中提取来看看一个真正的、工作的人是什么样子的——他们多久分支和合并一次，他们在每次提交中混入了多少代码。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-01T00:32:56.373

存储库的数量一定很大，我认为没有办法浏览它们。

1.  有搜索功能

    ```
    https://bitbucket.org/repo/all 
    ```

    您可能会使用它来查找有关某个主题的存储库。

2.  [主页](https://bitbucket.org/)底部有几个示例（其中[TortoiseHg](https://bitbucket.org/tortoisehg/thg/overview)）。您可能需要注销才能查看此列表。

3.  最后，`Home site:bitbucket.org`在 Google 中搜索会显示大量存储库列表，我想其他此类搜索可能会有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-09T23:11:26.577

看来此搜索功能尚不可用。请参阅[Bitbucket 问题 2934](https://jira.atlassian.com/browse/BCLOUD-2934 "比特桶问题 2934")

浏览所有存储库的另一种方法是搜索不在其停用词列表中的常用词。搜索“fork”返回 6288 个存储库（截至 2013 年 5 月 10 日）。见[分叉 Bitbucket 搜索](https://bitbucket.org/repo/all/followers?name=fork)

如果您找到更好的关键字，请告诉我，我会更新此评论。

# matrix - 如何找到二进制矩阵方程 AX = B 的解？

> ID：14637478
> 
> 赞同：0
> 
> 时间：2013-02-01T00:06:11.627
> 
> 标签：matrix, binary, xor, satisfiability, finite-field

给定一个 m*n 二进制矩阵 A，m*p 二进制矩阵 B，其中 n > m 计算 X 使得 AX=B 的有效算法是什么？

例如：

```
A = 
1  1  0  0  1  1  0  1  0  0  
1  1  0  0  1  0  1  0  0  1  
0  1  1  0  1  0  1  0  1  0  
1  1  1  1  1  0  0  1  1  0  
0  1  1  0  1  0  1  1  1  0 

B = 
0  1  0  1  1  0  1  1  0  1  0  0  1  0  
0  0  1  0  1  1  0  0  0  1  0  1  0  0  
0  1  1  0  0  0  1  1  0  0  1  1  0  0  
0  0  1  1  1  1  0  0  0  1  1  0  0  0  
1  0  0  1  0  0  1  0  1  0  0  1  1  0 
```

请注意，当我说二进制矩阵时，我指的是在字段 Z_2 上定义的矩阵，也就是说，所有算术都是模 2。

如果有任何兴趣，这是我在为随机纠错码生成合适的矩阵时面临的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T02:49:38.200

您可以通过减少行来做到这一点：将 B 放在 A 的右侧，然后交换行（在整个事物中）以在第 0 行、第 0 列中获得 1；然后将该行与第 0 列中具有“1”的任何其他行进行异或，因此第 0 列中只有一个 1。然后移至下一列；如果 [1,1] 为零，则将第 1 行与后面有 1 的行交换，然后对行进行异或以使其成为该列中唯一的 1。假设 'A' 是一个方阵并且存在一个解，那么您最终将 A 转换为单位，并将 B 替换为 Ax=B 的解。如果 n > m，则系统的未知数多于方程，因此您可以求解一些未知数，并将其他未知数设置为零。在行缩减期间，如果列中没有值为“1”的值

# selenium - 无法在 Selenium Grid 2 下运行 RC 命令

> ID：14637485
> 
> 赞同：1
> 
> 时间：2013-02-01T00:06:58.223
> 
> 标签：selenium, selenium-grid, remote-control

我已经在 selenium 2 的多个版本（从 2.24-2.28）和两个不同的系统上尝试过这个。这是一个非常简单的场景。我想通过 Selenium Grid 运行 RC 命令，我不想将我的 1000 多个测试脚本移植到 WebDriver，所以希望这不是唯一的解决方案。

测试用例：

1) 启动集线器：

```
java -jar selenium-server-standalone-2.28.0.jar -role hub 
```

2）启动节点：

```
java -jar selenium-server-standalone-2.28.0.jar -role node -hub http://localhost:4444/grid/register 
```

（我已经尝试了我能想到的所有变体，包括 -role rc）

两人之间的交流似乎很好。控制台状态为 up 并显示两者之间的连接。

3) 请求 RC 网址：

```
http://localhost:4444/selenium-server/driver/?cmd=getNewBrowserSession&1=*firefox&2=http://www.google.com 
```

输出总是：

HTTP 错误：500

访问 /selenium-server/driver/ 时出现问题。原因：

```
java.lang.NullPointerException 
```

如果我恢复到非网格模式，请求会按预期返回。

是我遗漏了什么还是 RC 在 Grid 2 下根本不支持？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T22:52:16.653

这似乎在 2.30 中作为浏览器的 *firefox 已修复，但我仍然观察到 *googlechrome 的相同行为

# java - 如何临时存储对象列表

> ID：14637489
> 
> 赞同：2
> 
> 时间：2013-02-01T00:07:20.287
> 
> 标签：java, android, sqlite, onresume, onpause

如果用户最小化应用程序，我有一个需要保留的对象列表。有没有办法在不使用 SharedPreferences 或 SQLite 数据库的情况下做到这一点（对于单个列表来说似乎有点矫枉过正）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:10:14.450

让对象实现[Parclable](http://developer.android.com/reference/android/os/Parcelable.html)或[Serializable](http://developer.android.com/reference/java/io/Serializable.html)

然后你可以把它放在Bundle中

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putParcelableArrayList(key, value);
} 
```

并根据您的需要在 onCreate(),onRestoreInstanceState() 中取回它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:07:21.087

使用我在[这里](http://android-er.blogspot.ie/2011/01/example-of-using-sharedpreferencesedito.html)找到的教程，我使用 SharedPreferences 实现了它，主要区别在于我使用索引而不是使用键“MEM1”。当我的活动加载时，我可以使用此代码检查索引的大小，

```
for(int x =0; ;x++) {
    index = x;
    if(sharedPreferences.contains(String.valueOf(x))){
        temp = gson.fromJson(sharedPreferences.getString(String.valueOf(x), null), PointOfInterest.class);
        pointList.add(temp);
    }
    else {
        break;
    }
} 
```

例子：

```
public class AndroidSharedPreferencesEditor extends Activity {

EditText editText1, editText2;
TextView textSavedMem1, textSavedMem2;
Button buttonSaveMem1, buttonSaveMem2;

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       textSavedMem1 = (TextView)findViewById(R.id.savedmem1);
       textSavedMem2 = (TextView)findViewById(R.id.savedmem2);
       editText1 = (EditText)findViewById(R.id.edittext1);
       editText2 = (EditText)findViewById(R.id.edittext2);
       buttonSaveMem1 = (Button)findViewById(R.id.save_mem1);
       buttonSaveMem2 = (Button)findViewById(R.id.save_mem2);

       buttonSaveMem1.setOnClickListener(buttonSaveMem1OnClickListener);
       buttonSaveMem2.setOnClickListener(buttonSaveMem2OnClickListener);

       LoadPreferences();
   }

   Button.OnClickListener buttonSaveMem1OnClickListener
    = new Button.OnClickListener(){

  @Override
  public void onClick(View arg0) {
   // TODO Auto-generated method stub
   SavePreferences("MEM1", editText1.getText().toString());
   LoadPreferences();
  }

   };

   Button.OnClickListener buttonSaveMem2OnClickListener
 = new Button.OnClickListener(){

  @Override
  public void onClick(View arg0) {
   // TODO Auto-generated method stub
   SavePreferences("MEM2", editText2.getText().toString());
   LoadPreferences();
  }

   };

   private void SavePreferences(String key, String value){
    SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putString(key, value);
    editor.commit();
   }

   private void LoadPreferences(){
    SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
    String strSavedMem1 = sharedPreferences.getString("MEM1", "");
    String strSavedMem2 = sharedPreferences.getString("MEM2", "");
    textSavedMem1.setText(strSavedMem1);
    textSavedMem2.setText(strSavedMem2);
   }
} 
```

# java - 具有 ActionListener 和键空间上的事件的 JButton 数组

> ID：14637492
> 
> 赞同：-3
> 
> 时间：2013-02-01T00:07:24.153
> 
> 标签：java, swing, timer, jbutton, event-dispatch-thread

我有一个数组，`JButtons`我`ActionListener`在它们上面添加了一个。

然后我放了一个`new Thread(){ public void run(){} }.start();`. 当前的背景`JButton`将是红色的，3 秒后它会变成白色，并且数组中的下一个按钮会变成红色。

现在我想添加一个`KeyEvent`for `SPACE`。这个想法是，当背景是红色并且我输入`SPACE`它应该聚焦当前按钮并为他做动作监听器。3 秒后，当我`SPACE`再次键入时，应该按下数组中的下一个按钮。

我需要一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:36:28.170

我以前见过这种类型的东西，如果我没记错的话，它是为残疾用户提供功能（如果没有，那是我以前见过的地方）。

首先...永远不要从`Thread`除事件调度线程之外的任何其他组件创建/修改任何 UI 组件。事实上，对于这个问题，我怀疑你是否真的需要任何线程。

查看[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)获取信息。

你也不应该需要任何类型的`KeyListener`。在最坏的情况下，您可能需要提供[Key Binding](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)，但在大多数外观和感觉下，`Space`支持作为“默认”接受操作，例如`Enter`.

您真正想要做的只是将焦点移到突出显示的按钮上。

```
public class TestHelpButton {

    public static void main(String[] args) {
        new TestHelpButton();
    }

    public TestHelpButton() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private JButton[] buttons = new JButton[]{
            new JButton(new BasicAction("Don't Panic")),
            new JButton(new BasicAction("Panic")),
            new JButton(new BasicAction("Cup of Tea")),
            new JButton(new BasicAction("Destory the world")),};
        private int activeIndex = -1;

        public TestPane() {
            setLayout(new GridBagLayout());
            for (JButton btn : buttons) {
                add(btn);
            }

            updateSelection();

            Timer timer = new Timer(3000, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    updateSelection();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

        protected void updateSelection() {
            if (activeIndex >= 0) {
                JButton btn = buttons[activeIndex];
                btn.setBackground(UIManager.getColor("Button.background"));
            }

            activeIndex++;
            if (activeIndex > buttons.length - 1) {
                activeIndex = 0;
            }
            JButton btn = buttons[activeIndex];
            btn.setBackground(Color.RED);
            btn.requestFocusInWindow();
        }
    }

    public class BasicAction extends AbstractAction {

        public BasicAction(String text) {
            putValue(NAME, text);
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            JOptionPane.showMessageDialog(null, getValue(NAME), "Helper", JOptionPane.INFORMATION_MESSAGE);
        }
    }
} 
```

我提供一个工作示例的唯一原因是基于我的假设，即这是为残疾用户提供额外支持。

# c#-4.0 - C# LDAP 身份验证适用于一个 DC，但不适用于另一个

> ID：14637497
> 
> 赞同：0
> 
> 时间：2013-02-01T00:08:20.567
> 
> 标签：c#-4.0, active-directory

我有一个有趣的问题，我已经尝试解决了几天。

我目前正在使用运行 Active Directory 标准实例的 Windows Server 2003 机器。

该目录包含两个域组件 (DC)，这两个域组件都包含将通过我的应用程序对目录进行授权的用户。

我正在使用 ：

*   服务器的 IP 地址作为主机名
*   通过端口 3269 的 SSL 连接
*   GSS 协商授权机制
*   作为两个 DC 的 parentDN 的 BaseDN
*   sAMAccountName 作为登录名

问题是，我无法成功授权来自 DC1 的任何用户，但属于 DC2 的所有用户都完全没问题并且工作得很好。我在 DC1 上收到此错误：

`8009030C: LdapErr: DSID-0C09043E, comment: AcceptSecurityContext error, data 0, vece System.DirectoryServices.Protocols.LdapException: The supplied credential is invalid.`

但是，使用 Softerra 的 LDAP Broswer，我可以毫无问题地连接并授权相同的用户，因此我知道凭据是正确的。

据我所知，这两个 DC 的配置相同......我已经浏览了它们两个的东西，任何不同的东西......但没有发现任何真正突出的东西。

几个月前我发布了一些关于这个特定设置的内容，我正在使用的代码也在那个线程中。

[为 System.DirectoryServices.DirectoryEntry 设置回调以处理自签名 SSL 证书？](https://stackoverflow.com/questions/12911391/set-callback-for-system-directoryservices-directoryentry-to-handle-self-signed-s/13073365#13073365)

在这里的任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:57:41.713

我能够让这个工作，但对于我的生活，我无法弄清楚为什么会这样。基本上，这个错误......

```
8009030C: LdapErr: DSID-0C09043E, comment: AcceptSecurityContext error, data 0, vece    System.DirectoryServices.Protocols.LdapException: The supplied credential is invalid. 
```

……死了。问题是在我称为 DC2 的用户下登录需要发出与域和 sAMAccountName（例如 LIB\JSmith）的绑定，而不是 DC1，它只允许输入 sAMAccountName。

我认为使这个程序化的最好方法是使用主要绑定帐户来查询用户的 DN。从那个 DN，使用一些狡猾的 RegEx，我能够捕获他们继承的域，并发出两个单独的绑定。

```
SearchResultEntry ResultEntry = userResponse.Entries[0];

//Let's get the root domain of the user now using our DN RegEx and that search result
Regex RegexForBaseDN = new Regex(config.LdapAuth.LdapDnRegex);
Match match = RegexForBaseDN.Match(ResultEntry.DistinguishedName);
string domain = match.Groups[1].Value;

//Try binding the user with their domain\username
try
{
    var thisUser = new NetworkCredential{
                                         Domain = domain, 
                                         UserName = username, 
                                         Password = Pin
                                        };

     //If this goes well, we'll continue forward
     ldapconn.Bind(thisUser);
}

//If that doesn't work, try biding them with the highest level domain
catch (LdapException ex)
{
     if (ex.ErrorCode.Equals(LdapErrorCodes.LDAP_INVALID_CREDENTIALS))
     {
          var thisUserOnce = new NetworkCredential{
                                                   Domain = config.LdapAuth.LdapDomain,
                                                   UserName = username,
                                                   Password = Pin
                                                  };

          //If this goes well, we'll continue forward
          ldapconn.Bind(thisUserOnce);
      }
 } 
```

它不像我想要的那样优雅，但它确实适用于这种特殊情况。

但是，我仍然对为什么命名约定因用户继承的 DC 不同而有所不同非常感兴趣。

# c++ - 加载 OBJ 文件，如何使用法线 (#vertices < #normals)

> ID：14637498
> 
> 赞同：2
> 
> 时间：2013-02-01T00:08:30.383
> 
> 标签：c++, opengl, normals, wavefront

我有一个 obj 文件，并且在没有使用给定法线的情况下成功地将对象加载到 opengl。
这是它的外观：
![没有法线的树](../Images/b7cb5e6c1c1dffba167d770e01701e47.png)
文件的格式是：

```
v x y z
vn x y z
f x//x' y//y' z//z' 
```

网格的显示功能是这样的：

```
glBegin(GL_TRIANGLES);
for all faces
{
    glVertex3f(.., .., ..);
    glVertex3f(.., .., ..);
    glVertex3f(.., .., ..);
}
glEnd(); 
```

结果是这样的：
![在此处输入图像描述](../Images/a64f64d62e7664741e4687f85b525355.png)

我读过由于 OpenGL 用于照明方程的默认法线向量，该对象可能看起来很平坦。
这可以用法线解决。给定的法线是 780，顶点是 155。

我在每次调用 glVertex3f 之前都尝试过使用 glNorm，但 obj 看起来很奇怪（线条等）。

我应该怎么办？

**编辑#1：** 这就是我读取文件的方式：

```
void loader(class mesh &tree)
{
int vx1, vx2, vx3, vn1, vn2, vn3;
ifstream file;
string line;
point vec, norm;
face tempface;

file.open("tree.obj"); 
if (file.is_open() == true)
{
    while(getline(file, line) )
    {
        if (line.substr(0,2) == "") continue;
        else if (line.substr(0, 2) == "v ")
        {
            istringstream numbers(line.substr(2));
            numbers >> vec.x >> vec.y >> vec.z;
            tree.vectors.push_back(vec);
        }
        else if (line.substr(0,2) == "vn")
        {
            istringstream numbers(line.substr(2));
            numbers >> norm.x >> norm.y >> norm.z;
            tree.normals.push_back(norm);
        }
        else if (line.substr(0,2) == "f ")
        {
            face f;
            line = line.substr(2,line.length());
            for (string::iterator it = line.begin(); it != line.end(); ++it)
            {
                if (*it == '/')
                {
                    //erase both of the "//"
                    line.erase(it);
                    line.erase(it);
                    //add a space between the numbers
                    line.insert(it, ' ');
                }
            }
            istringstream inp(line);
            inp >> f.vert_indices[0] >> f.norm_indices[0] >> f.vert_indices[1] >> f.norm_indices[1] >> f.vert_indices[2] >> f.norm_indices[2];
            tree.faces.push_back(f);
        }
        else 
            continue;
    }
    file.close();
}
} 
```

这就是我展示它的方式：

```
 void mesh::displayMesh()
{
    glPushMatrix();
    glBegin(GL_TRIANGLES);
    for(vector<face>::const_iterator it = faces.begin();
        it != faces.end(); ++it)
    {
        //glVertex3f(normals[it->norm_indices[0] -1 ].x, normals[it->norm_indices[0] -1 ].y, normals[it->norm_indices[0] -1 ].z);
        glVertex3f(vectors[it->vert_indices[0] -1 ].x, vectors[it->vert_indices[0] -1 ].y, vectors[it->vert_indices[0] -1 ].z);
        //glVertex3f(normals[it->norm_indices[1] -1 ].x, normals[it->norm_indices[1] -1 ].y, normals[it->norm_indices[1] -1 ].z);
        glVertex3f(vectors[it->vert_indices[1] -1 ].x, vectors[it->vert_indices[1] -1 ].y, vectors[it->vert_indices[1] -1 ].z);
        //glVertex3f(normals[it->norm_indices[2] -1 ].x, normals[it->norm_indices[2] -1 ].y, normals[it->norm_indices[2] -1 ].z);
        glVertex3f(vectors[it->vert_indices[2] -1 ].x, vectors[it->vert_indices[2] -1 ].y, vectors[it->vert_indices[2] -1 ].z);
    }
    glEnd();
    glPopMatrix();
} 
```

函数 displayMesh 在 openGL 的 Render 函数中调用，loader 函数在 Setup OpenGL 函数中调用，并且网格树对象是一个全局变量。

**编辑#2：** 这是树与法线的外观：
![有法线的树](../Images/7f9385fad39ff19a9084e4f4d0e03ae0.png) 这[也是 OpenGL 设置函数的代码](http://pastebin.com/zp7gGc7h)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-28T08:13:58.847

当您使用擦除时，它会使迭代器无效

```
//erase both of the "//"
it = line.erase(it);
it = line.erase(it);
//add a space between the numbers
it = line.insert(it, ' '); 
```

但是您可以擦除一次然后替换

```
//erase both of the "//"
it = line.erase(it);
//add a space between the numbers
*it = ' '; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:58:51.777

你不应该在你的绘图代码中有以下内容吗？

```
glNormal3f(normals[it->norm_indices[0] -1 ].x, normals[it->norm_indices[0] -1 ].y, normals[it->norm_indices[0] -1 ].z);
glVertex3f(vectors[it->vert_indices[0] -1 ].x, vectors[it->vert_indices[0] -1 ].y, vectors[it->vert_indices[0] -1 ].z);
glNormal3f(normals[it->norm_indices[1] -1 ].x, normals[it->norm_indices[1] -1 ].y, normals[it->norm_indices[1] -1 ].z);
glVertex3f(vectors[it->vert_indices[1] -1 ].x, vectors[it->vert_indices[1] -1 ].y, vectors[it->vert_indices[1] -1 ].z);
glNormal3f(normals[it->norm_indices[2] -1 ].x, normals[it->norm_indices[2] -1 ].y, normals[it->norm_indices[2] -1 ].z);
glVertex3f(vectors[it->vert_indices[2] -1 ].x, vectors[it->vert_indices[2] -1 ].y, vectors[it->vert_indices[2] -1 ].z); 
```

编辑：哎呀，你已经意识到了

如果要检查法线是否正确，请根据法线为每个顶点着色。使用`glColor3f`但提供法线。

# c - C重新分配以找到行尾，但没有得到整行？

> ID：14637499
> 
> 赞同：2
> 
> 时间：2013-02-01T00:08:34.503
> 
> 标签：c

我有一个函数可以查找文本文件中的行数并返回这些行。我必须动态调整数组的大小。但是，当我打印它时，它只显示缓冲区内每一行的最后几个字母。我是 C 新手。这是代码的主要部分：

```
char * foo( char **buffer,  FILE * infile ) 
```

...

```
int buffSizer = 10;
*buffer = calloc( buffSizer, 1);
do { 
  char * result = fgets(*buffer, buffSizer, infile); 
  if (result == NULL){ 
    free(*buffer); 
    return(NULL); 
  } 
  char * ptr = strchr(*buffer, '\n'); 
  if (ptr){ 
    return(*buffer); 
  } 
  buffSiz = buffSizer * 2;
  *buffer = realloc(*buffer, buffSizer); 
} while (1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:13:50.727

每次您需要重新分配时，您都会立即返回并覆盖到目前为止您已阅读的所有内容。您需要为`*buffer`已阅读的字符计算偏移量。

例如，您可以添加：

```
int offset = 0; 
```

连同`buffSiz`声明一起，然后像这样使用它：

```
char * result = fgets(*buffer + offset, buffSiz - offset, infile); 
```

然后当你重新分配时，添加：

```
offset = buffSiz - 1; // -1 to account for null character stored by fgets() 
```

在此行之前：

```
buffSiz = buffSiz * 2; 
```

顺便说一句，`*buffer`在将其传递给`realloc`. 如果发生错误，您将泄漏原始分配并且数据将无法恢复。这个例子更安全：

```
char *tmp = realloc(*buffer, buffSiz);
if (!tmp)
{
    free(*buffer);
    return NULL;
}
*buffer = tmp; 
```

# java - Java 测验（平均猜测）

> ID：14637501
> 
> 赞同：0
> 
> 时间：2013-02-01T00:08:39.987
> 
> 标签：java, math

我正在用 Java 编写一个问答游戏，但我不知道如何找到用户的平均猜测次数。这是简单代码的游戏：

```
import java.util.Scanner;
import java.io.File;

public class JavaQuiz 
{
    public static void main(String[] args) throws Exception
    {

        Scanner input = new Scanner(System.in);

        File file = new File("questions.txt");

        Scanner scan = new Scanner(file);
        String line;
        double lineNum = 0;
        int skip = 0;
        int correct = 0;
        double guesses = 0;

        while(scan.hasNextLine()){
            // Counting of the line number
            lineNum = lineNum + 1;
            // Scanning the next line
            line = scan.nextLine();

            // Declaring the delimeter.
            String delimiter = "\\|";
            // Splitting the line
            String[] temp = line.split(delimiter);

            // Print out the questions
            System.out.println(temp[0]);

            // Wait for the user to input
            String keyboard = input.next();
            // Take the space off the answer
            String two = temp[1].replaceAll("\\s","");

            if(keyboard.equals("q")){
                skip = skip + 1;
            }

            else{

                while(!(keyboard.equals(two)) && !(keyboard.equals("q"))){

                    keyboard = input.nextLine();

                    if(keyboard.equals("q")){
                        skip = skip + 1;
                    } else {
                        System.out.println("Incorrect. Please Try Again");
                    }

                } 

                    if(keyboard.equals(two)){
                        correct = correct + 1;
                    }
            }

        }

        System.out.println("You got " + correct + " Questions Correct.");
        System.out.println("You skipped " + skip + " questions.");
        System.out.println("And for the questions you completed, you averaged " + avg + " guesses.");        
    }
} 
```

我应该做这样的事情吗？

```
double avg = guesses / lineNum; 
```

无论如何，我得到的答案是 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:09:46.197

在此行之后：`String keyboard = input.next();` 您应该执行以下操作：

```
if(!(keyboard==null))
    guesses++; 
```

那么你是对的：`avg=guesses/lineNum;`

*tip`guesses & lineNum`应该是`int`where`guesses`代表他回答的次数，`lineNum`代表行数。这里不需要加倍

int 在 Ram 上占用的空间比 double 少

# php - 创建和应用 svn 补丁的过程

> ID：14637503
> 
> 赞同：0
> 
> 时间：2013-02-01T00:08:54.510
> 
> 标签：php, svn

我正在使用 3rd 方库作为我的代码库的一部分。它有一个错误，我有两个选择：

1.  创建和覆盖类以提供大的自由行为。
2.  为该错误创建一个 svn 补丁

我更喜欢 2 因为从逻辑上讲它更有意义，但是我不确定如何做到这一点，

我是否执行以下操作：

1.  修改第三方库代码
2.  创建补丁文件
3.  还原我的存储库
4.  应用补丁文件
5.  将补丁文件添加到存储库
6.  提交我的更改

??

如果我应该使用补丁，它将存储在存储库中的什么位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:40:47.427

检查[**供应商分支机构**](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.advanced.vendorbr)：

> 但有时您希望在自己的版本控制系统中维护对第三方代码的自定义修改。[...] 这些修改可能包括新功能或错误修复，[...]。
> 
> 现在你面临一个有趣的情况。您的项目可以以某种不连贯的方式容纳其对第三方数据的自定义修改，例如使用补丁文件或文件和目录的完整替代版本。但是这些很快成为维护难题，需要一些机制来将您的自定义更改应用到第三方代码，并且需要在您跟踪的每个后续版本的第三方代码中重新生成这些更改。

供应商分支基本上是一个目录（我们称之为 A），其中包含未修改版本的源代码。您将此目录分支到您的项目（或任何其他位置，我们称之为 X）并将您的路径应用于此分支。如果供应商更新了他的组件，您将把它导入到一个目录中（我们称之为 B）。要更新您自己修改过的库，您将在 B 和 A 之间进行合并并将其应用于 X。这样，您可以保留您的修改，但也可以获得供应商软件版本之间的所有更改。

**请记住在合并命令上使用 --ignore-ancestry 选项，**否则您将替换更改的文件而不应用差异

# c# - 获取 Streamreader 的长度

> ID：14637517
> 
> 赞同：5
> 
> 时间：2013-02-01T00:09:52.270
> 
> 标签：c#, streamreader, memorystream

我怎样才能得到 a 的长度`StreamReader`，因为我知道不会再写任何东西了。我想也许我可以将所有数据传递给 a `MemoryStream`，它有一个名为 的方法`Length`，但我被困在如何将 byte[] 附加到 a 上`MemoryStream`。

```
private void Cmd(string command, string parameter, object stream)
        {

            StreamWriter writer = (StreamWriter)stream;
            StreamWriter input;
            StreamReader output;

            Process process = new Process();

            try
            {
                process.StartInfo.UseShellExecute = false;
                process.StartInfo.CreateNoWindow = true;
                process.StartInfo.RedirectStandardOutput = true;
                process.StartInfo.RedirectStandardInput = true;
                process.StartInfo.FileName = "cmd";
                process.Start();

                input = process.StandardInput;
                output = process.StandardOutput;
                input.WriteLine(command + " " + parameter);
                input.WriteLine("exit");

                using (MemoryStream ms = new MemoryStream())
                {
                    int length = 1024;
                    char[] charbuffer = new char[length];
                    byte[] bytebuffer = new byte[length];

                    while (!output.EndOfStream)
                    {
                        output.Read(charbuffer, 0, charbuffer.Length);
                        for (int i = 0; i < length; i++)
                        {
                            bytebuffer[i] = Convert.ToByte(charbuffer[i]);
                        }
                        //append bytebuffer to memory stream here
                    }

                    long size = ms.Length;

                    writer.WriteLine(size);
                    writer.Flush(); //send size of the following message

                    //send message
                }

            }
            catch (Exception e)
            {
                InsertLog(2, "Could not run CMD command");
                writer.WriteLine("Not valid. Ex: " + e.Message);
            }
            writer.Flush();
        } 
```

那么，我怎样才能动态地将一个字节 [] 附加到一个 MemoryStream 呢？有什么比这更好的方法来获得长度，`output`所以我可以警告另一端关于将要发送的消息的大小？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-06T14:01:06.287

这对你有用吗？

```
 StreamReader sr = new StreamReader(FilePath);
        long x = sr.BaseStream.Length; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T00:23:36.267

Stream 具有[Length](http://msdn.microsoft.com/en-us/library/system.io.stream.length.aspx)属性，但如果流不支持查找操作，则会引发异常。例如，如果您尝试读取 .Length，网络流将引发异常。在您的代码中，您正在处理进程的输入流。考虑一下，如果那是用户输入——在​​你完全读完之前，你怎么知道长度？

如果你正在读取一个文件，你可以通过 stream.Length 获得长度。

在 .NET 4+ 中，您可以使用 Stream.CopyTo 将一个流复制到另一个流，例如：

```
inputStream.CopyTo(outputStream); 
```

您还可以使用以下命令将字节加载到内存中：

```
byte[] data;
using (var ms = new MemoryStream())
{
    stream.CopyTo(ms);
    data = ms.ToArray();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T00:18:53.910

`MemoryStream`有[MemoryStream.Write 方法](http://msdn.microsoft.com/en-us/library/system.io.memorystream.write.aspx)，它将一个字节数组写入流：

```
ms.Write(bytebuffer,0,bytebuffer.Length); 
```

因此，您可以调用它来将另一部分字节添加到输出流中。但是请记住，为了能够`MemoryStream`在所有写入操作结束后进行读取，您必须使用[MemoryStream.Seek 方法](http://msdn.microsoft.com/en-us/library/system.io.memorystream.seek.aspx)将当前流中的位置设置为其开头：

```
//all write operations
ms.Seek(0, SeekOrigin.Begin);
//now ready to be read 
```

这是最简单的方法。当然，您可以在读/写时在流中动态移动。但这可能容易出错。

要获得流的长度，即`ms.Length`，您不必寻找流的开头。

我想，值得注意的是，如果`bytebuffer`仅用于在将字节复制到之前存储字节`MemoryStream`，则可以改用[MemoryStream.WriteByte 方法](http://msdn.microsoft.com/en-us/library/system.io.memorystream.writebyte.aspx)。这会让你`bytebuffer`完全废除。

```
for (int i = 0; i < length; i++)
{
    ms.WriteByte(Convert.ToByte(charbuffer[i]));
} 
```

# java - 如何保护类直接实例化

> ID：14637519
> 
> 赞同：3
> 
> 时间：2013-02-01T00:09:56.140
> 
> 标签：java, uml

如何更改此实现：

```
public interface Animal()
{
   public void eat();
}

public class Dog implements Animal
{
   public void eat()
   {}
}

public void main()
{
   // Animal can be instantiated like this:
  Animal dog = new Dog();

  // But I dont want the user to create an instance like this, how can I prevent this declaration?
  Dog anotherDog = new Dog();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T00:12:33.217

创建工厂方法并保护构造函数：

```
public class Dog implements Animal {
   protected Dog () {
   }

   public static Animal createAsAnimal () {
      new Dog ();
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:21:15.997

您可以通过创建工厂方法来执行以下操作：

```
public interface Animal {
    public void eat();

    public class Factory {
    public static Animal getAnimal() {
        return new Dog();
    }
        private static class Dog implements Animal {
            public void eat() {
                System.out.println("eats");
            }
        }
    }
} 
```

Dog 类对用户不可见。跑步 ：

```
Animal dog= Animal.Factory.getAnimal();
dog.eat();//eats 
```

# android - 能够相互拥有多个 onTouch 方法吗？

> ID：14637528
> 
> 赞同：0
> 
> 时间：2013-02-01T00:10:39.400
> 
> 标签：android, overriding, ontouchlistener

`startButton`有一个 onTouchListener ，当按下它时，会启动一个媒体播放器（在`mp`我的源代码中）并使同一个按钮具有停止功能。

例如：用户点击开始按钮，音乐播放。然后用户点击相同的按钮（现在有一个 setText 为“Stop”）来停止音乐播放器。

一个方法中是否可以有多个 onTouchListener(s)？

```
startButton.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN) {

                mp.start();
                timeLeft.setText("Status: Initiated");
                startButton.setText("Stop Dreaming");

                startButton.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View arg0) {
                        mp.stop();

                    }

                }); 
```

这就是我目前拥有的......我将如何正确设置它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:43:27.753

我建议您为此尝试使用切换按钮：

```
public void onToggleClicked(View view) {
    // Is the toggle on?
    boolean on = ((ToggleButton) view).isChecked();

    if (on) {
        mp.start();
            timeLeft.setText("Status: Initiated");
            startButton.setText("Stop Dreaming");
    } else {
        mp.stop();
    }
} 
```

此处有关切换按钮的更多信息：http: [//developer.android.com/guide/topics/ui/controls/togglebutton.html](http://developer.android.com/guide/topics/ui/controls/togglebutton.html)

# ios - 在单个工作区中管理多个项目的依赖关系

> ID：14637535
> 
> 赞同：3
> 
> 时间：2013-02-01T00:11:10.160
> 
> 标签：ios, xcode, workspace, cocoapods

我有一个这样的工作区集：

```
MyAppiOS project
MyAppMacOS project
Pods
   AFNetworking 
```

Pods 项目与 podfile 一起添加到初始工作区（MyAppiOS 项目）

```
platform :ios, '5.0'

pod 'AFNetworking', '1.1' 
```

和`pod install`命令

现在我希望 MyAppMacOS 也与 AFNetworking 链接。
我已经看到了具有多个目标但具有通用平台的 podfile 示例。我找不到适用于多个平台的 podfile 示例。
我还尝试为这两个项目使用两个 podfile，但是一个`pod install`命令会创建两个工作区。

在那种情况下使用 CocoaPods 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:03:21.553

怎么样

```
MyAppiOS project with folder
    Pods
       AFNetworking
MyAppMacOS project with folder
    Pods
       AFNetworking
MyAppCommon folder 
```

您仍然可以在平台特定项目中添加来自 MyAppCommon 的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T15:24:19.753

尝试这样的事情，您可以在其中指定应创建的工作区以及每个目标/项目组合的平台。您可以调整项目文件以指向每个平台源所在的不同文件夹。

```
 workspace 'MyWorkspace.xcworkspace'
platform :ios

def import_pods
  pod 'AFNetworking'
end

target :'MyAppiOS' do
    platform :ios
  xcodeproj 'MyAppiOS.xcodeproj'
  import_pods
end

target :'MyAppOSX' do
    platform :osx
  xcodeproj 'MyAppOSX.xcodeproj'
  import_pods
end 
```

# fortran - 这是在 fortran 程序中定义线程数的正确方法吗？

> ID：14637538
> 
> 赞同：0
> 
> 时间：2013-02-01T00:11:20.787
> 
> 标签：fortran, openmp

我有一个为并行计算编写的 FORTRAN 程序。程序接受参数，线程数可以定义为参数。示例代码如下：

```
COUNT = NARGS()
      NTHREADS = 1

      ! *** GET THE COMMAND LINE ARGUMENTS, IF ANY
      IF(COUNT.GT.1)THEN
        ! *** ARGUMENT 1
        CALL GETARG(1, BUFFER, iStatus)
        IF (Buffer(1:4).EQ.'-NOP'.OR.Buffer(1:4).EQ.'-nop') THEN
          PAUSEIT=.FALSE.
        ENDIF
        IF (Buffer(1:3).EQ.'-NT'.OR.Buffer(1:3).EQ.'-nt') THEN
          READ(Buffer(4:10),*) NTHREADS
        ENDIF
        IF(COUNT.GT.2)THEN
          ! *** ARGUMENT 2
          CALL GETARG(2, BUFFER, iStatus)
          IF (Buffer(1:4).EQ.'-NOP'.OR.Buffer(1:4).EQ.'-nop') THEN
            PAUSEIT=.FALSE.
          ENDIF
          IF (Buffer(1:3).EQ.'-NT'.OR.Buffer(1:3).EQ.'-nt') THEN
            READ(Buffer(4:10),*) NTHREADS
          ENDIF
         ENDIF
      ENDIF 
```

假设我的编译文件名为“hellofortran”。我可以将线程数定义为

```
./hellofortran -nt4 
```

我的程序将使用 4 个线程读取程序。问题是我可以在任何计算机上运行尽可能多的内核。假设我有双核处理器。我只有两个内核，但我仍然可以使用 6-8 个线程或任何数量运行。如何正确定义此特定实例中的线程数？

我希望我解释了我的问题。期待很快听到关于如何改进我的程序的消息。谢谢。

贾巴巴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:20:37.443

如果您使用的是 OpenMP 并且只是想设置要使用的线程数，我只需指定环境中的线程数：

```
OMP_NUM_THREADS=4
./hellofortran 
```

并像往常一样编写 OpenMP 代码。有设置线程数的编程方式，但这对您来说可能更简单。

# c++ - CreateProcess 可以启动一个进程，但是 QProcess 不能……为什么？

> ID：14637539
> 
> 赞同：3
> 
> 时间：2013-02-01T00:11:24.313
> 
> 标签：c++, windows, qt, winapi, qt4

我正在编写一个需要启动其他应用程序的 Windows QT 应用程序。如果我使用以下窗口调用一切正常：

```
QString qsExePath = "C:\\Program Files (x86)\\Some Company\\SomeApp.exe";
QString qsCommandLine = "";

DWORD dwLastError = 0;
STARTUPINFO startupInfo;
ZeroMemory(&startupInfo, sizeof(startupInfo));
startupInfo.cb = sizeof(startupInfo);
startupInfo.dwFlags = STARTF_USESHOWWINDOW;
startupInfo.wShowWindow = (WORD)1;

PROCESS_INFORMATION processInfo;
ZeroMemory(&processInfo, sizeof(processInfo));

if (CreateProcess((TCHAR*)(qsExePath.utf16()), (TCHAR*)(qsCommandLine.utf16()), 
    NULL, NULL, FALSE, 0, NULL, NULL, 
    &startupInfo, &processInfo))
{
    CloseHandle(processInfo.hProcess);
    CloseHandle(processInfo.hThread);
}
else
{
    dwLastError = GetLastError();
} 
```

但是，如果我使用以下 QT 调用，它不起作用并因 QProcess::Unknown 错误而失败。

```
QProcess process;
bool bStarted = process.startDetached(qsExePath);
qDebug()  << process.error(); 
```

如果将 SomeApp.exe 复制到我的 %TMP% 目录并相应地更改 qsExePath ，我可以让 QProcess 工作，所以这显然是某种权限错误。我不明白为什么......如果它真的是权限，我的 CreateProcess 窗口调用不应该失败吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T00:22:26.167

您的路径中有空格。您正在调用带有单个参数的重载版本`QProcess.startDetached()`，因此它将其解释为要执行的完整命令行。因此，请尝试将路径用引号括起来，否则它会认为“C:\Program”是要执行的程序，而其他所有内容都是参数，这是错误的：

```
QString qsExePath = "\"C:\\Program Files (x86)\\Some Company\\SomeApp.exe\"";
bool bStarted = process.startDetached(qsExePath); 
```

或者，调用其他重载版本之一，`startDetached()`并让它在内部为您计算出必要的引用：

```
QString qsExePath = "C:\\Program Files (x86)\\Some Company\\SomeApp.exe";
bool bStarted = process.startDetached(qsExePath, QStringList()); 
```

# php - 将值插入 mysql 并将值从“0”设置为“1”？

> ID：14637541
> 
> 赞同：0
> 
> 时间：2013-02-01T00:11:36.143
> 
> 标签：php, mysql

我需要一些关于我的阻止用户脚本的帮助。我试图让它插入值，然后将被阻止的列从“0”设置为“1”。

它可以很好地插入值，我的意思是它在没有问题的情况下插入了 user_id 和 blocked_id，但是当我尝试将其从“0”设置为“1”时，它会导致我的语法错误。

谁能告诉我我哪里出错了，谢谢。

代码：

```
<?php

require_once('includes/session.php');
require_once('includes/functions.php');
require('includes/_config/connection.php');

session_start();

    confirm_logged_in();

    if (isset ($_GET['to'])) {
    $user_to_id = $_GET['to'];

}

if (!isset($_GET['to']))
    exit('No user specified.');

$user_id = $_GET['to'];

$result1 = mysql_query("INSERT INTO ptb_block_user (user_id, blocked_id) VALUES (".$_SESSION['user_id'].", ".$user_to_id.")")

$result2 = mysql_query("SELECT ptb_block_user SET blocked='1' WHERE id=".$_SESSION['user_id']."") 

or $result3 = mysql_query("DELETE FROM ptb_block_user WHERE user_id = ".$_SESSION['user_id']." AND blocked_id = ".$user_to_id.""); header("Location: {$_SERVER['HTTP_REFERER']}");

if($result1) 
{ 
$_SESSION['message2']="<div class=\"infobox-profile\"><strong>User Blocked</strong> - This user has successfully been blocked. You will no longer be abler to interact with each other's profiles.</div><div class=\"infobox-close\"></div>"; 
header("Location: {$_SERVER['HTTP_REFERER']}");
} 
else 
if($result3) 
{ 
$_SESSION['message2']="<div class=\"infobox-favourites\"><strong>User Unblocked</strong> - This user has successfully been unblocked. You can now interact with each other's profiles.</div><div class=\"infobox-close4\"></div>"; 
header("Location: {$_SERVER['HTTP_REFERER']}");

}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T00:21:22.270

```
$result2 = mysql_query("UPDATE ptb_block_user SET blocked='1' WHERE id=".$_SESSION['user_id']."") 
```

使用“更新”而不是“选择”来更改行。

# jquery - 为什么服务器端 DataTables 不返回任何数据？

> ID：14637544
> 
> 赞同：0
> 
> 时间：2013-02-01T00:11:54.137
> 
> 标签：jquery, ruby-on-rails-3, datatables

我正在尝试使[DataTables](http://railscasts.com/episodes/340-datatables)上的 Ryan Bates RailsCast 适应我的项目，但使用服务器端处理。当我调用索引视图时，标题显示正常，但表体显示“表中没有可用数据”；但是我有> 10K的记录。我的项目与示例的不同之处在于显示的主要对象是基因型，有两个相关的表。这是我的（初始部分）类 GenotypesDatables（类似于示例中的 ProductsDatables）：

```
class GenotypesDatatable
  delegate :params, :h, :link_to, to: :@view

  def initialize(view)
    @view = view
  end

  def as_json(options = {})
    # This is what feeds directly into DataTables
    {
      sEcho: params[:sEcho].to_i,
      iTotalRecords: Genotype.count,
      iTotalDisplayRecords: 20,
      aaData: data
    }
  end

private

  def data
    genotypes.map do |genotype|
      [
        # Note: h is shorthand for html_escape
        # Am unsure is this is correct way to call records; compare
        # to 340-datatables example.
        h(genotype.gmarker.marker),
        h(genotype.gsample.labid),
        h(genotype.gsample.subjectid),
        h(genotype.gsample.box),
        h(genotype.gsample.well),
        h(genotype.allele1),
        h(genotype.allele2),
        h(genotype.run_date)
      ]
    end
  end 
```

这是基因型控制器的（相关部分）：

```
class GenotypesController < ApplicationController
  # GET /genotypes
  # GET /genotypes.json
  def index
     respond_to do |format|
      format.html
      format.json { render json: GenotypesDatatable.new(view_context) }
    end
  end 
```

我不知道这是否足以诊断问题，但如果有人熟悉这个优秀的 gem（它非常适合我的项目），并且需要查看更多代码，请告诉我。（我一直在如此，但找不到答案..）谢谢！

[添加编辑，基于评论]

这是 GenotypeDatatables 的完整类：

```
class GenotypesDatatable
  delegate :params, :h, :link_to, to: :@view

  def initialize(view)
    @view = view
  end

  def as_json(options = {})
    # This is what feeds directly into DataTables
    {
      sEcho: params[:sEcho].to_i,
      iTotalRecords: Genotype.count,
      iTotalDisplayRecords: 20,
      aaData: data
    }
  end

private

  def data
    genotypes.map do |genotype|
      [
        # Note: h is shorthand for html_escape
        # Am unsure is this is correct way to call records; compare
        # to 340-datatables example.
        h(genotype.gmarker.marker),
        h(genotype.gsample.labid),
        h(genotype.gsample.subjectid),
        h(genotype.gsample.box),
        h(genotype.gsample.well),
        h(genotype.allele1),
        h(genotype.allele2),
        h(genotype.run_date)
      ]
    end
  end

  def genotypes
    @genotypes ||= fetch_genotypes
  end

  def fetch_genotypes
    genotypes = Genotype.order("#{sort_column} #{sort_direction}")
    genotypes = genotypes.page(page).per_page(per_page)
    if params[:sSearch].present?
      genotypes = genotypes.where("labid like :search or category like :search", search: "%#{params[:sSearch]}%")
    end
  end

  def page
    params[:iDisplayStart].to_i/per_page + 1
  end

  def per_page
    params[:iDisplayLength].to_i > 0 ? params[:iDisplayLength].to_i : 10
  end

  def sort_column
    columns = %w[allele1 allele2 run_date]
    columns[params[:iSortCol_0].to_i]
  end

  def sort_direction
    params[:sSortDir_0] == "desc" ? "desc" : "asc"
  end
end 
```

这是 /app/assets/javascript/genotypes.js.coffee 中的 javascript 文件：

```
jQuery ->
    $('#genotypes').dataTable
    bJQueryUI: true
    bProcessing: true
    bServerSide: true
    bDeferRender: true
    "sAjaxSource": $('#genotypes').data('source') 
```

这是我试图呈现我的数据表的视图：

```
<h1>Listing genotypes</h1>

<table id="genotypes" class="display" data-source="<%= genotypes_url(format: "json") %>">
  <thead>
    <tr>
      <th>Marker</th>
      <th>LabID</th>
      <th>SubjectID</th>
      <th>Box</th>
      <th>Well</th>
      <th>Allele1</th>
      <th>Allele2</th>
      <th>Run date</th>
    </tr>
  </thead>
  <tbody>
</tbody>
</table>

<br /> 
```

如果需要更多代码，请告诉我...谢谢！

# dart - 获得对同一方法的多个引用 = 多个对象？

> ID：14637549
> 
> 赞同：1
> 
> 时间：2013-02-01T00:12:33.190
> 
> 标签：dart

我是 Dart 的新手，所以也许我在这里遗漏了一些东西：

**这有效：**

在我的`main()`，我有这个：

```
var a = _someFunction;
var b = _someFunction;
print("${a == b}"); // true. correct! 
```

`_someFunction`另一个顶级函数在哪里。

**这不起作用：（**至少不是我所期望的）

鉴于这堂课...

```
class Dummy {

    void start() {
        var a = _onEvent;
        var b = _onEvent;
        print(a == b); // false. ???????
    }

    void _onEvent() {
    }
} 
```

实例化它`main()`并调用它的`start()`方法会导致`false`. 显然，每当我的代码获得对`_onEvent`.

**这是故意行为吗？**

我希望获得对同一实例的同一方法的多个引用每次都会返回相同的对象。也许这是出于某种原因。如果是这样的话; 什么原因？或者这可能是VM的错误/疏忽/限制？

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:14:15.657

目前，这种行为似乎是故意的，但自 2012 年 5 月以来存在以下缺陷： [https ://code.google.com/p/dart/issues/detail?id=144](https://code.google.com/p/dart/issues/detail?id=144)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T19:22:28.010

如果我猜的话，我会说设置“var a = _onEvent;” 创建一个绑定方法，它是某种同时包含函数和 this 的对象。您要求将绑定方法规范化。但是，这将需要团队创建它们的地图，这可能会导致对内存泄漏的担忧。

我认为他们制作了“var a = _someFunction;” 尽早工作，因为他们需要静态函数是常量，以便可以将它们分配给 const。这样他们就可以编写如下内容：

常量记录器 = someStaticLoggingFunction;

这是在静态评估之前的日子。

无论如何，我会说比较闭包是否相等是大多数语言的边缘情况。把以上所有的都和一粒盐一起吃。根据我对系统的了解，这只是我最好的猜测。据我所知，语言规范对此没有任何说明。

实际上，现在我已经阅读（[https://code.google.com/p/dart/issues/detail?id=144](https://code.google.com/p/dart/issues/detail?id=144)），讨论实际上非常好。我上面写的大致匹配它。

# html - 防止 HTML 数据单元自行调整大小？

> ID：14637551
> 
> 赞同：0
> 
> 时间：2013-02-01T00:12:35.360
> 
> 标签：html, html-table

我有一个表，我使用 Javascript 来实现允许用户添加/删除特定行的列的功能。新数据单元的内容将与之前的相同。我发现如果我只添加一列（一个数据单元到一行），一切都很好。新数据单元的内容、大小和布局与之前的数据单元（左侧的数据单元）相同。但是，如果我再添加一个，则新添加的 datacell 的布局会有所不同，并且 datacell 的大小会增加，但前两个 datacell 的布局不会改变。HTML页面跳来跳去。如果我删除第三个数据单元，一切都会恢复正常。看起来两个是极限？但我不记得硬编码任何东西。

我可以添加一个属性来解决这个调整大小本身的问题吗？我尝试将 nowrap 属性添加到 ，它解决了页面跳转问题，但数据单元的大小仍然发生变化，布局也发生变化。

编辑：事实证明，调整大小是因为单元格超出了浏览器的范围，因此它试图“压缩”它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:22:36.047

我不确定你的意思到底是什么，但我认为你的意思是，你的单元格会根据内容的数量调整大小，但是有 colgroup，你可以在其中设置列数并设置宽度、高度等在
`<colgroup>`
`<col width="200px">`
`<col width="180px">`
`<col width="220px">`
`...`
`</colgroup>`
你的前三列每行有 200px、180px 和 220px 固定。每个额外的列都将自行调整大小。

对不起，我的英语不好。我希望这能帮到您。

# c++ - 如何在不丢失数据的情况下向向量中间添加内容？

> ID：14637555
> 
> 赞同：0
> 
> 时间：2013-02-01T00:12:42.910
> 
> 标签：c++, vector

我正在尝试将字符串添加到向量的中间，但我不想丢失正在被替换的数据。我希望该元素下方的所有内容都向下移动一个。那可能吗？这是我到目前为止所拥有的

```
#include <iostream>
#include <string>
#include <vector>
using namespace std;

int main()
{
 vector<string> v;

 v.push_back("Rich");
 cout << v.back() << endl;
 v.push_back("Debbie");
 cout << v.back() << endl;
 v.push_back("Robin");
 cout << v.back() << endl;
 v.push_back("Dustin");
 cout << v.back() << endl;
 v.push_back("Philip");
 cout << v.back() << endl;
 v.push_back("Jane");
 cout << v.back() << endl;
 v.push_back("Joseph");
 cout << v.back() << endl;
 cout << "Removing Joseph from the vector"<<endl;
 v.pop_back();

 cout << "Adding my name to the vector" << endl;

 vector<string>::iterator pos = v.find(v.begin(),v.end(), "Robin");
 if (pos != v.end()) 
 {
    ++pos;
 }

 v.insert(pos, "Jimmy");

 cout << "The vector now contains the names:";
 for (unsigned i=0; i<v.size(); i++)
 cout << " " << "\n" << v.at(i);
 cout << "\n";

 return 0;
} 
```

我在这个查找功能上也遇到了错误。任何帮助，将不胜感激。

```
Error   1   error C2039: 'find' : is not a member of 'std::vector<_Ty>' d:\pf3\lab3b\lab3b\3b.cpp   28

    2   IntelliSense: class "std::vector<std::string, std::allocator<std::string>>" has no member "find"    d:\pf3\lab3b\lab3b\3b.cpp   28 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T00:13:41.437

像这样：

```
#include <vector>     // for std::vector
#include <algorithm>  // for std::find

v.insert(std::find(v.begin(), v.end(), "Robin"), "Jimmy"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T00:15:29.130

[std::vector](http://en.cppreference.com/w/cpp/container/vector)没有查找功能，请改用[std::find](http://en.cppreference.com/w/cpp/algorithm/find)：

```
vector<string>::iterator pos = std::find(v.begin(),v.end(), "Robin"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T22:09:11.040

这个操作在向量中是 O(N)。如果你会经常使用它，请使用链表。

# javascript - 跨页面传递 json 值

> ID：14637559
> 
> 赞同：1
> 
> 时间：2013-02-01T00:13:17.990
> 
> 标签：javascript, json

我已将 json 对象定义为

```
 function getPost()
   {
      var fname = document.getElementById("fname").value;
      var lname = document.getElementById("lname").value;
          var v = {
       "name": {
           "firstname": fname,
           "lastname": lname 
       }
    };
   } 
```

如何使此 JSON 变量 v 可供其他页面访问。我想跨页面传递 JSON 数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:31:17.410

您可以使用 localStorage 或 SessionStorage（[更多信息](http://www.w3schools.com/html/html5_webstorage.asp)）在用户的浏览器中本地存储数据，以访问所有页面中的数据。

看看这个例子：

```
localStorage.setItem('a', '{ "name" : "test"}');
eval("var myObj = " + localStorage.getItem('a'));
myObj.name; // test 
```

# mysql - Elastic Beanstalk 应用程序 (Tomcat 7) 中的 MySQL 连接错误

> ID：14637560
> 
> 赞同：1
> 
> 时间：2013-02-01T00:13:19.430
> 
> 标签：mysql, jdbc, tomcat7, amazon-elastic-beanstalk

我目前正在使用 Tomcat 7 的 64 位 AmazonLinux 服务器将 maven 构建的 .war 文件部署到 Elastic Beanstalk。但是，由于以下错误（堆栈跟踪位于底端）：

> javax.naming.NamingException: com.mysql.jdbc.Driver

我正在连接到外部 Xeround 实例。在网上阅读后，我尝试将我的应用程序的 context.xml 修改为：

```
<Resource auth="Container" 
    factory="org.apache.tomcat.jdbc.pool.DataSourceFactory" //<- NOT THERE BEFORE
    driverClassName="com.mysql.jdbc.Driver" 
    logAbandoned="true" 
    maxActive="100" 
    maxIdle="30" 
    maxWait="10000" 
    name="jdbc/xxxx-01292013" 
    password="xxxx" 
    removeAbandoned="true" 
    removeAbandonedTimeout="60" 
    type="javax.sql.DataSource" 
    url="jdbc:mysql://instancexxxx.db.xeround.com:xxxx/xxxx-01292013?   autoReconnect=true"
    username="xxxx-general"/> 
```

是否有其他人在将以前工作的版本上传和使用到 Elastic Beanstalk Tomcat 7 应用程序时遇到问题，并找到了让它工作的方法？

我也读过[这篇文章](https://forums.aws.amazon.com/thread.jspa?threadID=106493)，但我不知道在 Netbeans maven 项目中的 .ebextensions 文件中的何处添加，我不明白那会做什么。谢谢你的帮助。

> 1) 注入构造函数时出错，javax.persistence.PersistenceException: [PersistenceUnit: myapp-persist] Unable to build EntityManagerFactory at com.berger.jpa.EntityInitializer.(EntityInitializer.java:12)
> while locating com.berger.jpa.EntityInitializer for field在 com.nexuscop.startup.StartupListener.entityInit(StartupListener.java:40) 定位 com.nexuscop.startup.StartupListener
> 
> 在 com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:65) 在 com.google.inject.internal.InjectorImpl 的 com.google.inject.internal.Errors.throwProvisionExceptionIfErrorsExist(Errors.java:451) 出现 1 个错误.injectMembers(InjectorImpl.java:944) 在 com.nexuscop.startup.StartupListener.(StartupListener.java:41) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java: 57) 在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) 在 java.lang.reflect.Constructor.newInstance(Constructor.java:532) 在 java.lang.Class.newInstance0(Class.java:372) 在org.apache.catalina.core 中的 java.lang.Class.newInstance(Class.java:325)。DefaultInstanceManager.newInstance(DefaultInstanceManager.java:125) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4715) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273) at org .apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) 在 org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895) 在 org.apache.catalina.core.ContainerBase.addChild(ContainerBase .java:871) 在 org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615) 在 org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1099) 在 org.apache.catalina。在 java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) 在 java.util.startup.HostConfig$DeployDirectory.run(HostConfig.java:1621)。concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) 在 java.util.concurrent.FutureTask.run(FutureTask.java:166) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java .util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) at java.lang.Thread.run(Thread.java:679) 原因：javax.persistence.PersistenceException: [PersistenceUnit: nexuscop-persist] 无法在 org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:57) 在 org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:915) 在 javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:63) 构建 EntityManagerFactory ) 在 com 的 javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:47)。berger.jpa.JpaPersistService.start(JpaPersistService.java:83) 在 com.berger.jpa.EntityInitializer.(EntityInitializer.java:14) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance (NativeConstructorAccessorImpl.java:57) 在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) 在 java.lang.reflect.Constructor.newInstance(Constructor.java:532) 在 com.google.inject.internal.DefaultConstructionProxyFactory$2 .newInstance(DefaultConstructionProxyFactory.java:85) 在 com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85) 在 com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:254) 在com.google.inject.internal。SingleFieldInjector.inject(SingleFieldInjector.java:53) 在 com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:110) 在 com.google.inject.internal.MembersInjectorImpl$1.call(MembersInjectorImpl.java:75) 在com.google.inject.internal.MembersInjectorImpl$1.call(MembersInjectorImpl.java:73) 在 com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1024) 在 com.google.inject.internal.MembersInjectorImpl.injectAndNotify (MembersInjectorImpl.java:73) at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:60) ... 23 更多原因：org.hibernate.HibernateException：无法在 org.hibernate.connection 找到数据源.DatasourceConnectionProvider.configure(DatasourceConnectionProvider.java:79) 在 org.hibernate.connection。ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:143) at org.hibernate.ejb.InjectionSettingsFactory.createConnectionProvider(InjectionSettingsFactory.java:51) at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:90) at org.hibernate.cfg .Configuration.buildSettingsInternal(Configuration.java:2863) 在 org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2859) 在 org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1870) 在 org.hibernate。 ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:906) ... 42 更多原因：javax.naming.NamingException: com.mysql.jdbc.Driver at org.apache.naming.NamingContext.lookup(NamingContext.java:860)在 org.apache.naming.NamingContext.lookup(NamingContext.java:154) 在 org.apache.naming.NamingContext.lookup(NamingContext.java:831) 在 org.apache.naming.NamingContext.lookup(NamingContext.java:154) 在 org.apache.naming.NamingContext.lookup(NamingContext.java :831) 在 org.apache.naming.NamingContext.lookup(NamingContext.java:154) 在 org.apache.naming.NamingContext.lookup(NamingContext.java:831) 在 org.apache.naming.NamingContext.lookup(NamingContext. java:168) at org.apache.naming.SelectorContext.lookup(SelectorContext.java:158) at javax.naming.InitialContext.lookup(InitialContext.java:409) at org.hibernate.connection.DatasourceConnectionProvider.configure(DatasourceConnectionProvider.java :75)在 org.apache.naming.NamingContext.lookup(NamingContext.java:831) 在 org.apache.naming.NamingContext 中查找（NamingContext.java:831）在 org.hibernate.connection.DatasourceConnectionProvider 的 javax.naming.InitialContext.lookup(InitialContext.java:409) 中的 org.apache.naming.SelectorContext.lookup(SelectorContext.java:158) 中的 .lookup(NamingContext.java:168)。配置（DatasourceConnectionProvider.java:75）在 org.apache.naming.NamingContext.lookup(NamingContext.java:831) 在 org.apache.naming.NamingContext 中查找（NamingContext.java:831）在 org.hibernate.connection.DatasourceConnectionProvider 的 javax.naming.InitialContext.lookup(InitialContext.java:409) 中的 org.apache.naming.SelectorContext.lookup(SelectorContext.java:158) 中的 .lookup(NamingContext.java:168)。配置（DatasourceConnectionProvider.java:75）在 org.hibernate.connection.DatasourceConnectionProvider.configure(DatasourceConnectionProvider.java:75) 查找（InitialContext.java:409）在 org.hibernate.connection.DatasourceConnectionProvider.configure(DatasourceConnectionProvider.java:75) 查找（InitialContext.java:409）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:10:18.100

目前，许多人似乎无法让 .ebextensions 方法正常工作。这是一个解决方法，只是为了启动和运行。我不会像这样在生产环境中运行，但是当我对 .ebextensions 感到沮丧时，我用它来进行测试/调试。

您可以将mysql驱动程序直接放在您的WAR中。如果您使用的是 Maven，只需将其添加到 pom.xml：

```
 <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.6</version>
    </dependency> 
```

您也可以将其添加到 META-INF/context.xml

```
<Resource auth="Container" driverClassName="com.mysql.jdbc.Driver" factory="org.apache.commons.dbcp.BasicDataSourceFactory" type="javax.sql.DataSource" 
      url="jdbc:mysql://XXXXXXX
       ... /> 
```

并将其放在 pom.xml 中（否则找不到 BasicDataSourceFactory）：

```
 <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.4</version>
    </dependency>

    <dependency>
        <groupId>commons-pool</groupId>
        <artifactId>commons-pool</artifactId>
        <version>1.6</version>
    </dependency>

    <dependency>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
        <version>3.2.1</version>
    </dependency> 
```

# google-bigquery - 服务中断 - 用于导入的 BigQuery

> ID：14637562
> 
> 赞同：2
> 
> 时间：2013-02-01T00:13:23.597
> 
> 标签：google-bigquery

我们刚刚注意到[BigQuery](http://en.wikipedia.org/wiki/BigQuery)的导入失败并显示以下消息：

```
"status": {
    "state": "DONE",
    "errorResult": {
        "reason": "internalError",
        "message": "Unexpected. Please try again."
    },
    "errors": [
    {
        "reason": "internalError",
        "message": "Unexpected. Please try again."
    }
    ]
}, 
```

这已经发生了一个多小时。[它于太平洋标准时间](http://en.wikipedia.org/wiki/Pacific_Time_Zone)下午 2:30 开始。控制台报告没有已知问题。

服务何时恢复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:14:10.980

今天下午我们切换了我们的主数据中心，一些元数据被搞砸了。该问题应在太平洋标准时间 17:30 得到解决。我们正在进行内部尸检。

# mysql - FLOAT 中有多少位数字？

> ID：14637565
> 
> 赞同：2
> 
> 时间：2013-02-01T00:13:44.100
> 
> 标签：mysql, floating-point, limit, digits, maxlength

我已经翻遍了，找不到这个答案。

MySQL 有多少个实际数字`FLOAT`？

我知道（想？）它会截断超出`FLOAT`4 字节限制的内容，但那到底是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T00:16:16.120

从[手册](http://dev.mysql.com/doc/refman/5.0/en/floating-point-types.html)（强调我的）：

> 对于 FLOAT，SQL 标准允许在括号中的关键字 FLOAT 之后以位为单位对精度（但不是指数范围）进行可选规范。MySQL 也支持这个可选的精度规范，但精度值仅用于确定存储大小。从**0 到 23**的精度会产生一个 4 字节的单精度 FLOAT 列。从 24 到 53 的精度会产生一个 8 字节的双精度 DOUBLE 列。

因此，`23`尾数的最高精度可以存储在 FLOAT 中，这相当于大约 7 个十进制数字，因为 2^23 ~ 10^7（8,388,608 对 10,000,000）。我在[**这里**](http://www.sqlfiddle.com/#!2/727c9/1)测试过。可以看到返回了 12 位十进制数字，其中只有前 7 位是真正准确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-26T08:11:01.393

对于那些认为 MySQL 将浮点数视为与例如 JAVA 相同的人，我得到了一些令人震惊的消息：MySQL 降低了浮点数的可用精度，以便向您隐藏*可能*不正确的小数位！看一下这个：

爪哇：

```
public static void main(String[] args) {
    long i = 16777225;
    DecimalFormat myFormatter = new DecimalFormat("##,###,###");
    float iAsFloat = Float.parseFloat("" + i);
    System.out.println("long i = " + i + " becomes " + myFormatter.format(iAsFloat));
} 
```

输出是

```
long i = 16777225 becomes 16,777,224 
```

到目前为止，一切正常。我们的示例整数刚好高于 2^24 = 16777216。由于 23 位尾数，介于 2^23 和 2^24 之间，浮点数可以容纳每个整数。然后从 2^24 到 2^25，它只能容纳偶数，从 2^25 到 2^26 只能容纳能被 4 整除的数字，依此类推（反之亦然：从 2^22 到 2^23，它可以容纳 0.5 的所有倍数）。只要指数没有超出范围，这就是浮点数可以存储的规则。

16777225 是奇数，所以“浮点版本”是一个选项，因为在该范围内（从 2^24 到 2^25），浮点的“步长”为 2。

现在，MySQL 是如何做到的。

这是小提琴，以防你不相信我（我不会）

[http://www.sqlfiddle.com/#!2/a42e79/1](http://www.sqlfiddle.com/#!2/a42e79/1)

```
CREATE TABLE IF NOT EXISTS `test` (
     `test` float NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `test`(`test`) VALUES (16777225)

SELECT * FROM `test` 
```

结果：

16777200

结果是 25 而不是 1，但具有可被 100 整除的“优势”。非常感谢。

我想我理解这种胡说八道背后的“哲学”，但我不能说我赞成。这里是“原因”：

他们不希望您看到可能错误的小数位，他们通过将“实际”浮点值（如在 JAVA 中并根据行业标准）四舍五入到某个合适的 10 次方来实现。

在这个例子中，如果我们保持原样，最后一个数字是错误的，不是零，我们不能这样。

然后，如果我们四舍五入到十的倍数，正确的值将是 16777230，而“实际”浮点数将四舍五入为 16777220。现在，第 7 位是错误的（以前没有错，但现在错了。 ) 而且它不是零。我们不能这样。更好地舍入到 100 的倍数。现在正确的值和“实际”浮点值都舍入到 16777200。所以你只能看到 6 个正确的数字。您不想知道末尾的“24”，告诉您（因为该范围内的步长为 2）您的原始数字必须在 1677723 和 1677725 之间。不，您不想知道; 这两个数字在舍入到第 7 位*后*在第 7 位上有所不同，因此您无法知道“正确的”第 7 位，因此您想停在第 6 位。反正，

所以他们的目标是四舍五入到一些十进制数字（即6），这样这6位数字总是“正确的”，因为如果你四舍五入原来的确切数字，你会得到相同的6位数字（之前将其转换为浮点数）为 6 位数。而且由于 log_base10(2^23) = 6.92，向下舍入 6，我明白为什么他们认为这将始终有效。可悲的是，这甚至不是真的。

例子：

我 = 33554450

这个数字在 2^25 和 2^26 之间，所以它的“浮动版本”（即 JAVA 浮动版本，而不是 MySQL 浮动版本）是最接近 4 的倍数（较小的那个，如果它在中），所以是

i_as_float = 33554448

我四舍五入到 6 位小数（即 100 的倍数，因为它是一个 8 位数字）给出 33554500。

i_as_float 四舍五入到 6 位小数给出 33554400

哎呀！那些在第 6 位不同！但是不要告诉 MySQL 的人。他们可能刚刚开始将 16777200 “改进”为 16777000。

更新

其他数据库不会那样做。

小提琴：[http ://www.sqlfiddle.com/#!15/d9144/1](http://www.sqlfiddle.com/#!15/d9144/1)

# wpf - 尝试切换语言时功能区获得焦点

> ID：14637566
> 
> 赞同：0
> 
> 时间：2013-02-01T00:13:49.820
> 
> 标签：wpf, user-interface, ribbon

我在我的 WPF 应用程序中使用 Microsoft 的功能区控件实现。我的应用程序支持不同的语言。问题是当我尝试切换语言（使用 ALT + SHIFT 组合）以在文本框中输入数据时，例如，Ribbon steels 焦点对用户来说非常烦人。我使用 Office，它没有这个问题，因为如果您使用该组合切换语言，它将重新获得功能区的焦点，我想要类似的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:46:10.800

似乎功能区默认绑定了一个热键，我建议您尝试通过将一个空命令绑定到它来覆盖该组合键。

```
<Ribbon.InputBindings>
    <KeyBinding Command="{Binding x:Null}"
                Gesture="ALT+TAB"/>
</Ribbon.InputBindings 
```

# facebook - phonegap-plugin-facebook-connect：登录不起作用

> ID：14637568
> 
> 赞同：3
> 
> 时间：2013-02-01T00:13:55.953
> 
> 标签：facebook, cordova, phonegap-plugins

```
this.FBlogin = function() {
    console.log("TEST");

    FB.login(
            function(response) {

                console.log(response);

                if (response.session) {
                    console.log(response.session);
                } else {
                    console.log('not logged in');
                }
            },
            { scope: "user_about_me, user_activities, user_birthday, user_hometown, user_interests, user_location, user_religion_politics, user_status, user_website, offline_access, email" }
    );
} 
```

logCat 中仅打印 TEST：

```
02-01 00:09:30.616: D/CordovaLog(1489): file:///android_asset/www/js/cdv-plugin-fb-connect.js: Line 24 : Cordova Facebook Connect plugin initialized successfully.
02-01 00:09:30.616: I/Web Console(1489): Cordova Facebook Connect plugin initialized successfully. at file:///android_asset/www/js/cdv-plugin-fb-connect.js:24
02-01 00:09:32.096: D/DroidGap(1489): onMessage(spinner,stop)
02-01 00:09:33.907: D/(1489): HostConnection::get() New Host Connection established 0x93e9038, tid 1526
02-01 00:09:48.106: D/CordovaLog(1489): TEST
02-01 00:09:48.106: D/CordovaLog(1489): file:///android_asset/www/js/auth.js: Line 148 : TEST
02-01 00:09:48.106: I/Web Console(1489): TEST at file:///android_asset/www/js/auth.js:148
02-01 00:09:48.185: D/dalvikvm(1489): GC_CONCURRENT freed 56K, 2% free 10199K/10375K, paused 4ms+3ms
02-01 00:09:48.386: D/DroidGap(1489): Paused the application!
02-01 00:09:48.386: D/CordovaWebView(1489): Handle the pause
02-01 00:09:49.025: I/dalvikvm(1489): threadid=3: reacting to signal 3
02-01 00:09:49.055: I/dalvikvm(1489): Wrote stack traces to '/data/anr/traces.txt'
02-01 00:09:49.145: W/EGL_emulation(1489): eglSurfaceAttrib not implemented
02-01 00:09:49.595: D/OpenGLRenderer(1489): Flushing caches (mode 0)
02-01 00:09:55.026: D/DroidGap(1489): Resuming the App 
```

似乎我被重定向到了 FB 应用程序，但我只在顶部栏中看到 AppId 和一个显示“facebook”的警报框。我的应用程序已暂停，回来后未调用成功处理程序？有大佬知道为什么吗？或者如何调试？

PS appId 已正确添加到 strings.xml。生成密钥哈希并将其添加到 FB，以及包和类名。我错过了什么吗？

PPS 使用：Phonegap 2.2。以及 phonegap-plugin-facebook-connect 库的相应分支：[https ://github.com/davejohnson/phonegap-plugin-facebook-connect/tree/cordova-2.2-facebook-android-3.0](https://github.com/davejohnson/phonegap-plugin-facebook-connect/tree/cordova-2.2-facebook-android-3.0)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T19:32:24.530

好的，它似乎也是范围的问题。更改为仅电子邮件后，将执行成功函数回调。

```
{ scope: "email" } 
```

另见：[https ://github.com/davejohnson/phonegap-plugin-facebook-connect/issues/240](https://github.com/davejohnson/phonegap-plugin-facebook-connect/issues/240)

注意示例已过时：

```
response.session 
```

改用以下内容：

```
response.authResponse.accessToken
response.authResponse.session_key
response.authResponse.expiresIn
response.authResponse.userId
response.authResponse.sig
response.authResponse.expirationTime
response.status 
```

它是 OAuth2 处理：参见[https://developers.facebook.com/blog/post/2011/07/21/updated-javascript-sdk-and-oauth-2-0-roadmap/](https://developers.facebook.com/blog/post/2011/07/21/updated-javascript-sdk-and-oauth-2-0-roadmap/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T21:43:18.410

你在使用 Phonegap Build / Build Facebook Plugin 吗？

您是否在任何其他 Facebook 调用之前正确调用 FB.init() ？

你所有的范围都拼写正确吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T03:21:15.940

{ scope: "email" } 你必须输入回调，否则它不会被执行。这是一个工作示例

[facebook使用cordova cli 3.3连接](http://javacourseblog.blogspot.in/2014/01/facebook-login-logout-using-cordova-330.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-05T12:35:49.193

我已经完成了所有步骤，第一次登录工作完美。

登录后，应用程序不起作用，当它重新启动时，我得到 Invaid android_key 参数错误。

哈希键在 FB App 中配置。我正在使用 Phonegap Build 3.0

# ios - 更改 uilabel 的文本，然后添加新的 uilabel

> ID：14637570
> 
> 赞同：0
> 
> 时间：2013-02-01T00:14:00.040
> 
> 标签：ios, xcode, uilabel, uigesturerecognizer

我想更改标签的文本，然后让用户将其移动到屏幕上他们想要的位置（当前正在工作）（用户点击 - “添加文本”）。

一旦他们把它放在他们想要的地方。我希望“添加文本”按钮创建一个用户可以移动的新标签。我不确定如何动态创建这些以确保手势识别器与新标签一起使用。感谢您的建议。

这就是我现在所拥有的，，，还没有工作。

* * *

```
-(IBAction)addText:(id)sender
{
    textView.hidden=YES;

    labelShirt.text= textField.text;
    [textField resignFirstResponder];

    [self addTextButtonPressed];

}

-(void)addTextButtonPressed
{
// CGRect *textFrame =
    // myInitialFrame is a CGRect you choose to place your label
    UILabel *myNewLabel = [[UILabel alloc] initWithFrame:CGRectMake(50,50,100,100)];
    UIPanGestureRecognizer *panGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self
                                                                                           action:@selector(labelMoved:)];
   myNewLabel.text =textField.text;

[self.view addSubview:myNewLabel];
}

-(void)labelMoved:(UIPanGestureRecognizer *)sender
{
    CGPoint translation = [sender translationInView:self.view];
    sender.view.frame = CGRectOffset(sender.view.frame, translation.x, translation.y);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:39:49.940

```
// The action that is added to your add text button
-(void)addTextButtonPressed
{
    // myInitialFrame is a CGRect you choose to place your label
    UILabel *myNewLabel = [[UILabel alloc] initWithFrame:myInitialFrame];
    UIPanGestureRecognizer *panGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self
                                                                                           action:@selector(labelMoved:)];
    myNewLabel.text = @"My initial text";
    // EDIT
    [self.view addSubview:myNewLabel];
    [myNewLabel addGestureRecognizer:panGestureRecognizer];
}

-(void)labelMoved:(UIPanGestureRecognizer *)sender
{
    CGPoint translation = [sender translationInView:self.view];
    sender.view.frame = CGRectOffset(sender.view.frame, translation.x, translation.y);
} 
```

我不知道这是否足以解决您的问题，如果您仍然需要更多解释，请发表评论。

# sencha-touch - 重新创建的活动项目不会添加到任何容器中

> ID：14637576
> 
> 赞同：1
> 
> 时间：2013-02-01T00:14:12.407
> 
> 标签：sencha-touch, sencha-touch-2

我在我的应用程序的几个地方遇到了这个问题：

假设我在轮播中有 3 个项目。我正在查看项目#2。我需要重新加载那个轮播，所以我做了以下操作：

```
Ext.getCmp('carousel_name').removeAll();
var new_objects = (bunch of code that recreates the carousel's objects again, with the same IDs; this is the same code that was used to create the objects the first time, so it is likely not the issue)
Ext.getCmp('carousel_name').add(new_objects); 
```

在轮播对象项目列表 ( `Ext.getCmp('carousel_name').getItems()`) 中，所有三个项目都存在。但是，只有 #1 和 #3（在轮播重新加载之前不是活动项目）实际出现。#2 呈现一个空白的白色屏幕，在 HTML 中，除了项目外壳标记（没有显示我编写的代码）之外，什么都不存在。如果我这样做`Ext.getCmp('carousel_item_2').show();`，该项目确实会出现，但是是全屏的，并且我收到错误消息：

```
[DEPRECATE][Ext.Panel#show] Call show() on a component that doesn't currently belong to any container. Please add it to the the Viewport first, i.e: Ext.Viewport.add(component); 
```

当我尝试手动将该项目添加到视口或轮播时，没有任何问题是固定的。

我尝试在移除和重新插入新项目之间插入一个虚拟项目，但这不起作用。也不会在执行任何此操作之前隐藏整个视口并在之后显示它。using`setItems()`而不是`add()`. 做`Ext.getCmp('exercises_carousel').each(function(item){ item.destroy(); })`而不是`removeAll(true)`

我认为问题不在于重新创建新项目的代码片段，因为它与第一次用于创建项目的代码相同，并且第一次创建没有问题。

在这里很困惑。

**编辑：**我发现，当我到达轮播结束时，如果我在轮播的最后一项之后添加一个空项目，我不会在 N-2 处获得空白项目。不知道为什么会这样。仍然不是一个真正的解决方案，它是一个黑客。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:56:05.520

假设在您的代码片段中重新填充轮播中的新项目没有问题，那么唯一的问题是因为这个问题（我不确定这是否是 Sencha Touch 2.1 中的错误，但确实存在）：当您再次调用`yourCarousel.removeAll()`并添加一些新项目时，您的轮播将不会设置正确的活动项目。

我见过类似的问题，我在添加新项目后添加了这个，它有效：

`carousel.setActiveItem(0);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:51:06.703

好吧，这是一个 hack，所以如果有人有一个合法的解决方案，那就太棒了。但是黑客确实有效，所以这里是：

*   在轮播中添加一个空项目
*   将活动项目设置为新的空轮播项目
*   销毁所有轮播物品
*   重新创建（并重新添加）所有项目

在代码中：

```
Ext.getCmp('carousel_name').add({});
Ext.getCmp('carousel_name').setActiveItem(Ext.getCmp('carousel_name').getMaxItemIndex());
Ext.getCmp('carousel_name').removeAll(true);
var new_objects = (bunch of code that recreates the carousel's objects again, with the same IDs)
Ext.getCmp('carousel_name').add(new_objects); 
```

编辑：事实证明，由于某种原因，这在 90% 的时间里都有效；由于某些未知原因，10% 的时间它仍然没有被插入。确保正确插入所有项目的唯一方法是清除整个视口 ( `Ext.Viewport.removeAll(true)`)，在视口中重新创建所有原始项目，然后重新插入它们。我宁愿不必每次没有插入项目时都这样做。

# linux - nvcc：没有这样的文件或目录

> ID：14637578
> 
> 赞同：1
> 
> 时间：2013-02-01T00:14:32.683
> 
> 标签：linux, compiler-construction, cuda, nvcc

请原谅我的菜鸟。我们的研究小组最近购买了一台装有 2 个 NVIDIA Tesla 设备的服务器，我负责设置它。

服务器单元正在运行 Rocks 6.0。

所以我根据这个指令安装从 NVIDIA 下载的 CUDA SDK：http: [//docs.nvidia.com/cuda/cuda-getting-started-guide-for-linux/index.html](http://docs.nvidia.com/cuda/cuda-getting-started-guide-for-linux/index.html)

我尝试编译 NVIDIA 随 SDK 提供的示例代码，但遇到了一堆错误。我想也许 Makefile 可能没有配置，所以我在 Stack Overflow 上看了一圈，发现了这段测试代码：

```
using namespace std;

#include <iostream>
#include <string.h>
#include <unistd.h>

int main (int argc, const char *argv[]) {

    //our message
    const char *message = "hello world!";
    size_t size = strlen(message)+1;

    //delcare and allocate a buffer on the device
    char *d_buffer;
    if (cudaMalloc(&d_buffer,size) != cudaSuccess){
        cerr << cudaGetErrorString(cudaGetLastError()) << endl;
        exit(1);
    }

    //copy our message to the device buffer
    if (cudaMemcpy(d_buffer,message,size,cudaMemcpyHostToDevice)
        != cudaSuccess){
        cerr << cudaGetErrorString(cudaGetLastError()) << endl;
        exit(1);
    }

    //declare and allocate a buffer on the host
    char *h_buffer = (char*)malloc(size);
    if (h_buffer == 0){
        cerr << "malloc failed" << endl;
        exit(1);
    }

    //copy the device buffer back to the host
    if (cudaMemcpy(h_buffer,d_buffer,size,cudaMemcpyDeviceToHost)
        != cudaSuccess) {
        cerr << cudaGetErrorString(cudaGetLastError()) << endl;
        exit(1);
    }

    cout << h_buffer << endl;
    cudaFree(d_buffer);
    free(h_buffer);
} 
```

所以按照说明，我编译了代码：

```
nvcc -o hello_cuda hello_cuda.cu 
```

并得到以下错误：

```
In file included from /usr/local/cuda-5.0/bin/../include/cuda_runtime.h:76,
                 from <command-line>:0:
/usr/local/cuda-5.0/bin/../include/common_functions.h:76:15: error: new: No such file or directory
In file included from /usr/local/cuda-5.0/bin/../include/common_functions.h:162,
                 from /usr/local/cuda-5.0/bin/../include/cuda_runtime.h:76,
                 from <command-line>:0:
/usr/local/cuda-5.0/bin/../include/math_functions.h:7555:17: error: cmath: No such file or directory
/usr/local/cuda-5.0/bin/../include/math_functions.h:7556:19: error: cstdlib: No such file or directory
hello_cuda.cu:11:20: error: iostream: No such file or directory 
```

这些基本上与我在编译示例代码时收到的错误消息相同。我的猜测是编译器配置不正确，因为 iostream 应该只是 C 的标准库。

有什么想法或指针可以解决这个问题吗？这似乎是一个非常简单的问题，但我已经为此烦恼了好几天！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-08T07:41:08.550

看来您没有正确安装 gcc/g++。样本不需要 boost，错误消息指出它找不到标准库（new、cmath、cstdlib）。

从第 2.8.1 节[http://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html#proper-compiler-install](http://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html#proper-compiler-install)

> 在 Linux 和 Windows 上，正确安装的编译器具有某种形式的内部知识，使它们能够定位系统包含文件、系统库和 dll、与编译器安装本身相关的包含文件和库，以及实现 libc 和 libc++ 的包含文件和库。

# url - 通过 id 打开 google doc

> ID：14637581
> 
> 赞同：8
> 
> 时间：2013-02-01T00:14:55.183
> 
> 标签：url, google-apps-script, google-docs-api

我想要做的是制作模板文档的副本，将工作表数据附加到新文件中。我使用 doc URL 作为 id。但是，当我尝试访问该文件时，我收到此错误“文档丢失（也许它已被删除？）（第 21 行）”第 21 行是

```
 var templateid = "URL";
    var file = DocumentApp.openById(templateid); 
```

谁能建议问题可能是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-01T00:36:03.473

文档id不是文档的URL，而是文档创建时生成的UID，例如是id后面的值`var id = createDocWithTable("doc with table")`。

您需要单独跟踪此 ID。如果你有文档对象，你可以用它的`getId()`方法来检索它。ID 也被编码到 URL 中，`https://docs.google.com/document/d/3ckYOu8kuIfBzbu-Dtu9XwGHUnUJG32PK7wHe5xMv3VG/`文档 ID也是如此`3ckYOu8kuIfBzbu-Dtu9XwGHUnUJG32PK7wHe5xMv3VG`

# javascript - Javascript 游戏中的代码片段问题

> ID：14637583
> 
> 赞同：0
> 
> 时间：2013-02-01T00:15:00.677
> 
> 标签：javascript, jquery, logic

我最近买了一本书，开始学习用 HTML 5、CSS3 和 Javascript/Jquery 制作游戏。它推出的第一个游戏是一个简单的乒乓球游戏。其中大部分是复制和粘贴，但从那时起我一直在尝试添加其他功能。

这是我正在尝试调整的一些代码：

```
 pingpong.scoreB++;
    $("#scoreB").html(pingpong.scoreB);
    if (pingpong.scoreB == 10){
        alert("Player A Lost");
        pingpong.scoreA = 0;
        pingpong.scoreB = 0;
    } 
```

在这里，我试图在有人达到 10 后将分数重置为零。此代码在技术上确实有效，只是屏幕上的分数不会重置，直到有人在关闭警报框后再次得分。

我正在尝试调整的另一个代码：

```
if (pingpong.pressedKeys[KEY.ENTER]){
$("#ball").css({
    "left" : ballLeft + ball.speed * ball.directionX,
    "top" : ballTop + ball.speed * ball.directionY
})}; 
```

对于此代码，我试图在按一次 ENTER 后让球移动。目前，我需要按住 ENTER 以不断移动球。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:21:08.100

请注意，当您第一次更改分数时（使用`pingpont.scoreB++`），下一行将新分数写入 HTML。但是，当您将分数重置为零时，您不会使用任何代码将新分数写入 HTML。在重置分数后添加几行来更新 UI：

```
pingpong.scoreB++;
$("#scoreB").html(pingpong.scoreB);  // This line updates the UI
if (pingpong.scoreB == 10){
    alert("Player A Lost");
    pingpong.scoreA = 0;
    pingpong.scoreB = 0;  // After you change the score here, update the UI again
    $("#scoreA").html(pingpong.scoreA);
    $("#scoreB").html(pingpong.scoreB);
} 
```

# c# - DDD - 聚合根 - 处理效率和并发性

> ID：14637587
> 
> 赞同：2
> 
> 时间：2013-02-01T00:15:33.343
> 
> 标签：c#, mongodb, domain-driven-design, aggregateroot

首先，我承认我是 DDD 的新手，需要阅读“[蓝皮书](https://rads.stackoverflow.com/amzn/click/com/0321125215)”。

我正在构建一个具有“匹配”类型的 AggregateRoot 的系统。每个匹配都可以有一个“投票”集合，并且还有一个只读的“投票计数”属性，当用户对匹配进行投票或否决时，该属性会增加。

由于许多用户可能同时对匹配进行投票，因此必须从匹配中添加/删除投票，并且必须将 VoteCount 作为一个涉及写锁的原子操作增加/减少（由数据库处理锁）。（我需要 VoteCount 作为数据库中的静态值，以便其他进程/组件有效地查询。）

在我看来，如果我坚持严格的 DDD，我会这样编码这个操作：

应用程序服务将接收一个投票请求对象，然后该服务将从匹配存储库中检索匹配对象。然后，该服务将调用匹配对象上的某种方法，以将投票添加到集合中并更新 VoteCount。然后，存储库会将 Match 实例保留回数据库。但是，这种方法对我的应用程序不可行，主要有两个原因，正如我所见：

我在后端使用 MongoDB，无法将此读写操作包装到事务中，以防止对 Match 数据及其关联的 Votes 和 VoteCount 的脏读。

这是非常低效的。我拉回整个对象图只是为了添加一个投票并增加投票计数。尽管这在文档数据库中比在关系数据库中更有效，但我仍在执行不必要的读取操作。

将单个 Vote 对象发送到存储库并对 Mongo 执行一个原子更新语句时，问题 1 和 2 不是问题。

在这种情况下，投票是否可以被视为“聚合”并值得拥有自己的存储库和聚合状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:02:47.453

> 在这种情况下，投票是否可以被视为“聚合”并值得拥有自己的存储库和聚合状态？

我认为这可能是正确的答案。聚合应该是事务一致性边界。比赛投票之间是否有一致性要求？Match 聚合上的 Vote 集合的存在表明存在。然而，似乎一票与下一票无关。

Instead, I would store each vote individually. This way you can use the aggregate functionality of MongoDB to get the count, though I'm not sure whether it is still slow. If it is, then you can aggregate using the Map/Reduce functionality.

More generally, this may not be a best fit for DDD. If the domain doesn't consist of complex behavior there is hardly a reason to try to adapt the DDD tactical patterns (entity, agreggate) to this domain.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T00:35:57.817

是的，您可以将*Vote*建模为自身的聚合。在现实世界中，人们通常会同时为几件事投票。然后聚合将被称为*选票*而不是投票。你只是有一个特殊情况，一次只有一个项目可以投票。

我不能为 MongoDB 说话（也许其他人可以）——但你可以在 RavenDB 中轻松地做到这一点，例如：

```
public class Match
{
    public string Id { get; set; }
    public string Name { get; set; } // or whatever
}

public class Vote
{
    public string Id { get; set; }
    public string MatchId { get; set; }
    public string UserId { get; set; }
    public bool YeaOrNay { get; set; } // or whatever
} 
```

然后你只需在你的投票上建立一个 map/reduce 索引来计算结果。

# magento-1.7 - 更改自定义菜单扩展 Magento 中每个链接的背景

> ID：14637589
> 
> 赞同：0
> 
> 时间：2013-02-01T00:15:42.677
> 
> 标签：magento-1.7

我正在使用 Magento 1.7 CE。我正在尝试编辑自定义菜单扩展的外观。对于顶部菜单，我试图让每个主要类别都有不同的背景颜色。有没有人知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T10:51:04.597

请参阅[http://store.belvg.com/background-pages.html#product_overview](http://store.belvg.com/background-pages.html#product_overview)上的背景图片用户指南。谢谢，扎基尔

# sql - 在 Windows 中无法连接到本地主机

> ID：14637592
> 
> 赞同：0
> 
> 时间：2013-02-01T00:15:53.403
> 
> 标签：sql, phpmyadmin, xampp, localhost

如何使用我的网络浏览器访问我的本地 phpmyadmin？我在 Firefox 和 Chrome 上都试过了，都无法加载。我有 XAMPP，我正在开发 Vista。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:22:09.160

你的 XAMPP 工作正常吗？

尝试：`http://localhost/`

您应该会看到 XAMPP 控制台，然后您可以从那里转到 phpmyadmin。

如果你没有看到控制台是因为 XAMPP 没有运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:25:53.377

尝试检查您使用的端口：

1.  打开文件[XAMPP安装文件夹]/apache/conf/httpd.conf。
2.  然后搜索字符串“ServerName”</li>

例如在我的 httpd.conf 结果是： ServerName localhost:8081

然后我用`http://localhost:8081/phpmyadmin`

# c++ - iostream 线程安全，必须分别锁定 cout 和 cerr 吗？

> ID：14637595
> 
> 赞同：11
> 
> 时间：2013-02-01T00:16:00.213
> 
> 标签：c++, thread-safety, cout

我知道，为了避免输出混合，必须同步多个线程对 cout 和 cerr 的访问。在同时使用 cout 和 cerr 的程序中，单独锁定它们是否足够？还是同时写入 cout 和 cerr 仍然不安全？

编辑说明：我知道 cout 和 cerr 在 C++11 中是“线程安全的”。我的问题是，不同线程同时写入 cout 和写入 cerr 是否会以两次写入 cout 的方式相互干扰（导致交错输入等）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T15:23:43.667

如果你执行这个函数：

```
void f() {
    std::cout << "Hello, " << "world!\n";
} 
```

从多个线程中，您将获得两个字符串或多或少的随机交错，`"Hello, "`并且`"world\n"`. 那是因为有两个函数调用，就像你写的代码是这样的：

```
void f() {
    std::cout << "Hello, ";
    std::cout << "world!\n";
} 
```

为了防止这种交错，您必须添加一个锁：

```
std::mutex mtx;
void f() {
    std::lock_guard<std::mutex> lock(mtx);
    std::cout << "Hello, " << "world!\n";
} 
```

也就是说，交织的问题与**无关**`cout`。这是关于使用它的代码：有两个单独的函数调用插入文本，所以除非你阻止多个线程同时执行相同的代码，否则函数调用之间可能会发生线程切换，这就是给你的交错。

请注意，互斥锁**不会**阻止线程切换。在前面的代码片段中，它阻止了从两个线程同时**执行**的内容；`f()`其中一个线程必须等到另一个线程完成。

如果你**也在**写`cerr`，你有同样的问题，你会得到交错的输出，除非你确保你永远不会有两个线程同时进行这些插入器函数调用，这意味着两个函数必须使用相同的互斥锁：

```
std::mutex mtx;
void f() {
    std::lock_guard<std::mutex> lock(mtx);
    std::cout << "Hello, " << "world!\n";
}

void g() {
    std::lock_guard<std::mutex> lock(mtx);
    std::cerr << "Hello, " << "world!\n";
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-01T00:27:19.050

`cout`在 C++11 中，与 C++03 不同，全局流对象（ 、`cin`、`cerr`和`clog`）的插入和提取是**线程安全的**。无需提供手动同步。但是，由不同线程插入的字符可能会在输出时发生不可预测的交错；同样，当多个线程从标准输入读取时，无法预测哪个线程将读取哪个令牌。

`sync_with_stdio`全局流对象的线程安全默认是激活的，但可以通过调用流对象的成员函数并`false`作为参数传递来关闭它。在这种情况下，您将不得不手动处理同步。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-09T23:23:50.997

同时写入 cout 和 cerr**可能不安全！**这取决于 cout 是否*与*cerr 相关联。见[std::ios::tie](http://www.cplusplus.com/reference/ios/ios/tie/)。

> “绑定流是一个输出流对象，在此流对象中的每个 i/o 操作之前刷新。”

这意味着，写入 cerr 的线程可能会无意中调用 cout.flush()。我花了一些时间弄清楚，这就是我的一个项目中 cout 输出中随机缺少行尾的原因:(

对于 C++98，cout 不应与 cerr 绑定。但是，尽管有标准，但在使用 MSVC 2008（我的经验）时它是绑定的。使用以下代码时，一切正常。

```
std::ostream *cerr_tied_to = cerr.tie();
if (cerr_tied_to) {
    if (cerr_tied_to == &cout) {
        cerr << "DBG: cerr is tied to cout ! -- untying ..." << endl;
        cerr.tie(0);
    }
} 
```

另见：[为什么 cerr 刷新 cout 的缓冲区](https://stackoverflow.com/questions/6027034/why-cerr-flushes-the-buffer-of-cout)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-15T05:48:37.927

这里已经有几个答案了。我将总结并解决它们之间的相互作用。

## 通常，

`std::cout`并且`std::cerr`通常会被汇集到单个文本流中，因此将它们锁定在最有用的程序中会产生共同的结果。

如果您忽略该问题，`cout`并且`cerr`默认情况下将它们的对应物别名[为 POSIX](https://stackoverflow.com/questions/467938/stdout-thread-safe-in-c-on-linux/)`stdio`中的线程安全，直到标准 I/O 函数（C++14 §27.4.1/4，比单独的 C 更强大的保证）。如果您坚持使用这种功能选择，您会得到垃圾 I/O，但不会得到未定义的行为（语言律师可能会将其与“线程安全”联系起来，而不管有用性如何）。

但是，请注意，虽然标准格式的 I/O 函数（例如读取和写入数字）是线程安全的，但用于更改格式（例如`std::hex`用于十六进制或`std::setw`用于限制输入字符串大小）的操纵器却不是。因此，通常不能假设省略锁是安全的。

如果您选择单独锁定它们，事情会更加复杂。

## 单独锁定

为了性能，可以通过锁定`cout`和`cerr`单独减少锁定争用。它们是单独缓冲的（或无缓冲的），它们可能会刷新到单独的文件中。

默认情况下，在每次操作之前`cerr`刷新`cout`，因为它们是“绑定的”。这会破坏分离和锁定，所以记得`cerr.tie( nullptr )`在对它做任何事情之前先打电话。（这同样适用于`cin`，但不适用于`clog`。）

## 解耦`stdio`

该标准说，操作`cout`不会`cerr`引入种族，但这并不完全是它的意思。流对象并不特殊；它们的底层`streambuf`缓冲区是。

此外，该调用`std::ios_base::sync_with_stdio`旨在删除标准流的特殊方面——允许它们像其他流一样被缓冲。尽管该标准没有提到`sync_with_stdio`对数据竞争的任何影响，但快速浏览一下 libstdc++ 和 libc++（GCC 和 Clang）`std::basic_streambuf`类会发现它们不使用原子变量，因此它们在用于缓冲时可能会产生竞争条件。（另一方面，libc++`sync_with_stdio`实际上什么都不做，所以调用它也没关系。）

如果您想要额外的性能而不考虑锁定，`sync_with_stdio(false)`这是一个好主意。但是，这样做之后，锁定是必要的，`cerr.tie( nullptr )`如果锁是分开的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-02T22:40:35.423

这可能很有用；）

```
inline static void log(std::string const &format, ...) {
    static std::mutex locker;

    std::lock_guard<std::mutex>(locker);

    va_list list;
    va_start(list, format);
    vfprintf(stderr, format.c_str(), list);
    va_end(list);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-06T17:01:47.327

我使用这样的东西：

```
// Wrap a mutex around cerr so multiple threads don't overlap output
// USAGE:
//     LockedLog() << a << b << c;
// 
class LockedLog {
public:
    LockedLog() { m_mutex.lock(); }
    ~LockedLog() { *m_ostr << std::endl; m_mutex.unlock(); }

    template <class T>
    LockedLog &operator << (const T &msg)
    {
        *m_ostr << msg;
        return *this;
    }

private:
    static std::ostream *m_ostr;
    static std::mutex m_mutex;
};

std::mutex LockedLog::m_mutex;
std::ostream* LockedLog::m_ostr = &std::cerr; 
```

# web-services - 使用数字签名签署表单提交 (PDF)

> ID：14637607
> 
> 赞同：2
> 
> 时间：2013-02-01T00:17:13.147
> 
> 标签：web-services, digital-signature, digital-certificate, client-certificates

# TL;博士

*   有在线表格
*   提交时生成 PDF
*   问题：如何在浏览器中使用客户端证书对 PDF 进行数字签名？

# 背景

在欧盟和美国（以及我的国家），法律规定数字签名（由政府和政府批准的 CA 颁发的客户证书执行）具有法律约束力。

目前我有一个网络表单——相当于纸质表单——用户可以在其中提交他们的个人信息。我使用这些数据生成 PDF，他们下载、打印、签名并通过邮件邮寄给我们。至少可以说不是最佳的。

我的大多数目标用户已经拥有这些客户证书（网上银行和税收），所以我希望让拥有这些证书的用户能够签署 PDF，从而使其合法投标并节省他们去邮局的时间。

# 问题

如何使用客户端证书签署 PDF，考虑到这必须使用私钥完成，并且客户端仅将公钥发送到服务器。显然，这必须在客户端完成，但不是 Javascript，因为它无法访问证书（Java、Flash、ActiveX 可以）。我为此找到了一堆专有解决方案，但不是免费软件/开源。

webapp 是用 PHP(Symfony2) 和 Javascript 编写的，在带有 nginx 和 php-fpm 的 Ubuntu 服务器上运行。

关于如何在不重新发明轮子的情况下解决这个问题的任何建议？有谁知道可以做到这一点的免费/开放图书馆/小程序？

* * *

一些链接：

[在服务器上对 PDF 进行数字签名](https://stackoverflow.com/questions/5626639/digitally-sign-a-pdf-on-the-server) （2011，asp.net，一个答案解释了基本流程）

[使用 CA 发布的数字证书签署 PDF 文档的 Web 应用程序](https://stackoverflow.com/questions/7955410/web-application-to-sign-pdf-documents-with-digital-certificates-released-by-cas) （2011，类似问题）

# xna - 更改 HLSL 中的纹理

> ID：14637608
> 
> 赞同：2
> 
> 时间：2013-02-01T00:17:50.377
> 
> 标签：xna, textures

```
float4x4 WVP;
texture cubeTexture;

sampler TextureSampler = sampler_state
{
texture = <cubeTexture>;
MipFilter = Point;
MagFilter = Point;
MinFilter = Point;
AddressU = Wrap;
AddressV = Wrap;
MaxAnisotropy = 16;
}; 
```

因此，如果我没记错的话，这会告诉采样器状态我正在使用什么纹理。我为许多精灵使用一个效果文件，因此这允许我使用一种纹理（图集）。而且我可以将我所有的纹理图集合并到一个大爸爸图集中，但我担心会出现并发症。

有没有办法通过参数告诉像素着色器使用某个纹理？我是 HLSL 的新手，这让我很困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T01:34:25.477

如果你给你的着色器一个语义来引用一个寄存器，就像这样

```
// HLSL
sampler TextureSampler : register(s1); 
```

`GraphicsDevice.Textures`然后您可以使用游戏代码中的属性在代码中分配纹理

```
// C#
Texture2D texture2D = Content.Load<Texture2D>("contentfile");
graphicsDevice.Textures[1] = texture2D; 
```

我使用寄存器 1 而不是 0，因为纹理参数`Spritebatch.Draw()`使用寄存器 0。如果您不是 spritebatching，请随意使用寄存器 0；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:00:00.150

您可以编写一个包含多个纹理和采样器的着色器，但这不是很有效。纹理图集更可取，因为它更容易避免分支。

我建议，为了使用 4 种不同的纹理，在每个顶点上都有一个额外的颜色，其中颜色的每个部分 (r,g,b,a) 都可以用来混合纹理。然后，您将在 C# 中设置此额外颜色的值，并在着色器中使用它。

这不是最优的，因为它是 4 * 纹理采样的数量，但它可能会起作用，具体取决于具体情况。

```
var c1 = Tex2D(texture1, texcoords) * extracolor.r;
var c2 = Tex2D(texture2, texcoords) * extracolor.g;
var c3 = Tex2D(texture3, texcoords) * extracolor.b;
var c4 = Tex2D(texture4, texcoords) * extracolor.a;

output.color = c1 + c2 + c3 + c4; 
```

# ruby-on-rails-3 - 加快 RSpec 和工厂女孩模型测试？

> ID：14637609
> 
> 赞同：3
> 
> 时间：2013-02-01T00:17:54.910
> 
> 标签：ruby-on-rails-3, rspec, factory-bot

我目前正在使用 FactoryGirl 和 Rspec 来测试我的模型，这很棒，但速度非常慢。我为每个模型进行的数百次测试运行每个模型大约需要 30 秒。

核心问题是，当我创建一个要测试的对象时，我正在使用该`FactoryGirl.create()`方法。这会影响数据库，并且肯定比使用`build`or慢`build_stubbed`。但是如果我只使用构建，那么我永远不会知道我是否遇到了正确的数据库错误（例如尝试将空值写入我指定为非空的列）？

有什么办法可以两全其美？或者我应该在模型/单元测试之外的某个地方明确地测试数据库集成部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T03:40:40.363

不知道这是否适用于您的情况，但您是否考虑过调整您的**spec_helper.rb**以让您的套件运行得更快？

我在[这个 StackOverflow 答案](https://stackoverflow.com/a/12215946/567863)（具体参见编辑 4）中记录了我的**spec_helper.rb**文件的演变，并且那里列出的其他 SO 答案和博客的链接帮助我减少了套件的运行时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:15:16.350

我倾向于使用 FactoryGirl.build，或者只是`.new`在模型规范中创建实例，然后仅在测试需要检查某些需要持久实例的行为时才保存它们。

在使用必须存在行 ID 的关联或联接时，这可能会出现问题。这是一种权衡——快速测试与易于编写的测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:05:36.077

您应该在大多数情况下使用 build，我想确保某些值不会被保存为 null 只是为此做一些规范，总是在数据库上创建对象是没有意义的

如果您测试工厂创建了一次有效对象，那么您可以相信工厂将始终创建有效对象。

此外，始终在不能为 null/nil 的字段上使用存在验证，如果您的字段不是 nil，那么您可以确定 db 不会有 null 值

# linux - 命令在终端中运行，但不是通过 /bin/sh

> ID：14637612
> 
> 赞同：1
> 
> 时间：2013-02-01T00:18:00.833
> 
> 标签：linux, bash, shell

如果我运行此命令，它在终端中可以正常工作：

```
for dirname in $(ls -d dir/checkpoint/features.txt/20*);do;echo "hello";done 
```

但是当通过 /bin/sh -c 运行时，它会给出一个错误

```
/bin/sh -c "for dirname in $(ls -d dir/checkpoint/features.txt/20*);do;echo "hello";done" 
```

错误：

```
/bin/sh: -c: line 1: syntax error near unexpected token `dir/checkpoint/features.txt/201108000'
/bin/sh: -c: line 1: `dir/checkpoint/features.txt/201108000' 
```

我的默认 shell 是 /bin/bash。我似乎无法理解是什么原因造成的。我在程序中运行所有 shell 命令的默认实现是将 /bin/sh -c 附加到它们。这是我第一次看到这个问题。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:35:55.383

不要尝试解析 的输出`ls`，尤其是使用`for`构造时。有很多很多方法会出错。

这是一个使用的好地方`find`。试试这个：

```
/bin/sh -c "find dir/checkpoint/features.txt -mindepth 1 -maxdepth 1 -type d -iname '20*' -exec echo \"hello\" \;" 
```

除了消除容易出错的使用之外`ls`，您还避免了子 shell 及其带来的所有问题。

跟进您的评论：

我假设您正在使用`awk -F/ '{print $NF}'`获取文件所在文件夹的名称（即文件名之前的最后一个目录名称）。这些命令[`basename`](http://linux.die.net/man/1/basename)可[`dirname`](http://linux.die.net/man/1/dirname)用于为您执行此操作。这应该使您的脚本更容易一些。将以下内容放入脚本文件中：

```
#!/bin/sh
folder=$(basename $(dirname $1))
mkdir -p #{nfs_checkpoint}/${folder}
cat #{result_location}/${folder}/20* > #{nfs_checkpoint}/${folder}/features.txt 
```

并像这样执行它：

```
/bin/sh -c "find dir/checkpoint/features.txt -mindepth 1 -maxdepth 1 -type d -iname '20*' -exec yourscript.sh {} \;" 
```

# c++ - C++ 计算比 double 或 long double 更精确

> ID：14637621
> 
> 赞同：13
> 
> 时间：2013-02-01T00:18:59.070
> 
> 标签：c++, precision

我正在自学 C++，在[这个练习题](http://www.reddit.com/r/dailyprogrammer/comments/pp53w/2142012_challenge_6_easy/)上，它要求编写可以将 PI 计算到 30 位以上的代码。我了解到 double / long double 在我的计算机上都是 16 位精确的。

我认为这个问题的教训是能够计算超出可用精度的精度。因此，我该怎么做？是否可以？

我现在计算 Pi 的代码是

```
#include "stdafx.h"
#include <iostream>
#include <math.h>
#include <iomanip>
using namespace std;

int main(){ 

    double pi;
    pi = 4*atan(1.0);
    cout<<setprecision(30)<<pi;
    return 0;
} 
```

输出为 16 位，下面列出了 pi 到 30 位以供比较。

```
3.1415926535897931
3.141592653589793238462643383279 
```

有什么提高精度的建议吗？或者这永远都不重要了？或者，如果您认为我应该在这里学习其他课程，请随时提供。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T00:26:58.533

您将需要使用浮点以外的其他方法执行计算。有一些用于做“长数学”的库，例如[GMP](http://en.wikipedia.org/wiki/GNU_Multiple_Precision_Arithmetic_Library)。

如果这不是您要查找的内容，您也可以自己编写代码来执行此操作。最简单的方法是只使用一个字符串，并为每个字符存储一个数字。像在纸上手工做数学一样做数学。将数字加在一起相对容易，减法也是如此。做乘法和除法有点困难。

对于非整数，您需要确保将小数点对齐以进行加/减...

这是一个很好的学习经历，但不要指望它会是你在半小时内不加思索地敲出的东西[也许是加减法！]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-01T13:15:31.087

您可以在 GCC/clang 中使用[四元数学](https://gcc.gnu.org/onlinedocs/libquadmath/)、内置类型`__float128`和`q`/`Q`后缀。

```
#include <stdio.h>

#include <quadmath.h>

int main ()
{
  __float128 x = strtoflt128("1234567891234567891234567891234566", nullptr);
  auto y = 1.0q;
  printf("%.Qf", x + y); // there is quadmath_snprintf, but this also works fine
  return 0;
} 
```

# javascript - 再次在 JavaScript 中移动一个框——程序似乎检测到两个按键，即使我只按下一个

> ID：14637625
> 
> 赞同：1
> 
> 时间：2013-02-01T00:19:05.970
> 
> 标签：javascript, jquery

我试图在[这里](https://stackoverflow.com/questions/4950575/how-to-move-a-div-with-arrow-keys)通过添加“重力”来构建最佳答案，这样除非按下键，否则框总是向下移动。

我已经摆弄了几个小时了，我无法弄清楚。在前面的代码中，他将两个变量发送到 calculateNewValue 函数，分别用于 css 位置的顶部和左侧。

我想我可以简单地将这两个真/假按键测试分成四个，然后在向上箭头为假时添加 +1，因此除非你告诉它不要，否则盒子总是会掉下来。

它几乎可以工作，但盒子向下和向右移动，而不是向下移动。而重力不是那样工作的。

这一定与 top 和 left 被用来在两个方向上移动盒子有关。但是，如果事件处理程序只存储一个键的键码，那么所有其他测试不会返回 false 吗？我怎样才能让它不动？

```
$(function(){

var pane = $('#pane'),
    box = $('#box'),
    maxValue = pane.width() - box.width(),
    keysPressed = {},
    distancePerIteration = 3;

function calculateNewValue(oldValue) {
    var newValue = parseInt(oldValue, 10)
                   - (keysPressed[37] ? distancePerIteration : 0)
                   - (keysPressed[38] ? distancePerIteration : 0)
                   + (keysPressed[39] ? distancePerIteration : 0)
                   + (keysPressed[40] ? distancePerIteration : 1)
    return newValue < 0 ? 0 : newValue > maxValue ? maxValue : newValue;
}

$(window).keydown(function(event) { keysPressed[event.which] = true; });
$(window).keyup(function(event) { keysPressed[event.which] = false; });

setInterval(function() {
    box.css({
        left: function(index ,oldValue) {
            return calculateNewValue(oldValue);
        },
        top: function(index, oldValue) {
            return calculateNewValue(oldValue);
        }   
    });
}, 20);

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:40:03.660

通常你只使用 keyup() 函数。然后按键只会触发一个事件。只有在特殊情况下才需要使用 keydown()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:56:13.307

你的代码有缺陷。每 20 毫秒，您每次修改框的左侧/顶部相同的量。

根据您设置代码的方式，每次更新 CSS 时，left 和 top 值总是增加相同的量 - 因此框将始终向上或向下移动，具体取决于您是否按下左/上键。

如果您只是想上下移动框，那么您可能想要更改代码而不是修改 left 属性 - 然后将 calculateNewValue 更改为不将 ascii 用于左/右箭头。

# jquery - jQuery 和 AJAX 加载 html，在其中选择元素并附加到当前 DOM

> ID：14637627
> 
> 赞同：1
> 
> 时间：2013-02-01T00:19:12.670
> 
> 标签：jquery, ajax

我正在开发一个 jQuery 脚本，它从下一页加载 html 并将其附加到当前容器。基本上制作一个永无止境的页面。然而，该函数返回一个错误，虽然`errorThrown`是空白的。这是通过 ajax 获取 html 并将其附加到当前 DOM 的正确方法吗？

```
$.ajax({type : "GET",
        url : currentUrl + "/page/" + nextPageNumber,
        dataType : "html",
        error : function(jqXHR, textStatus, errorThrown) { alert(textStatus); alert(errorThrown); },
        success : function(data) {
            var frag = document.createDocumentFragment();
            frag.appencChild($(data)[0]);
            var $page = $(frag); 
            $("div.blueline-page-container").append($page.find('div.blueline-page-container').html());
            nextPageNumber++;
        }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T00:22:12.037

你为什么不使用：

`$("selector").load(htmlhere);`

它适用于 html。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T00:29:55.047

对于初学者来说，没有“appencChild”之类的东西。如果您正在尝试加载一个 ID，您已经可以通过在 $.load() 的 URL 字符串中使用whatever.html#yourId 来指定一个片段。如果您有更具体的需求，您可以简单地将响应 HTML 传递给 jQuery，并将其作为普通的 jQuery 对象进行操作：

```
...
success : function(data) {
    var $page = $(data);
    $("div.blueline-page-container").append($page.find('div.blueline-page-container').html());
}
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T06:10:47.743

感谢所有回答的人，这真的帮助我指明了正确的方向。对于那些从搜索中偶然发现的人，这就是我最终的做法：

```
$("div.blueline-page-container").append("<div id='blueline-page-" + nextPageNumber + "'><div>");
$("#blueline-page-" + nextPageNumber).load("/page/" + nextPageNumber + " div.blueline-page-container"); 
```

我添加一个`<div>`具有唯一 id 的页面，然后将 ajax 结果加载到`<div>`创建的。

最后简单...

# html - 在同一条上显示徽标和导航

> ID：14637630
> 
> 赞同：0
> 
> 时间：2013-02-01T00:19:25.090
> 
> 标签：html, css

我脑子里全是放屁，不知道如何在我的 html 代码的同一行上显示我的标题/徽标和导航。我希望标题/徽标位于左侧，导航位于右侧。

这是我的 HTML：

```
<div class="header">
    <div class="title">
        <h1>Homegrown</h1>
    </div><!--/.title-->
    <nav class="nav">
        <ul>
            <li>Home</li>
            <li>Services</li>
            <li>Contact</li>
        </ul>
    </nav><!--/.nav-->
</div><!--/.header--> 
```

这是我的CSS：

```
.title {display:inline; float:left; margin:0 auto;}
.nav {
    display:inline;
    float:left;
    width:100%;
    margin:0 1.7%;
    padding:25px 2%;
    margin-bottom:0;
}
ul {display:inline; float:right; list-style:none;}
li {display:inline;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:29:48.073

对于**.nav**选择器，移除宽度：100%；, 将 float: left 更改为 float: right 并且（如果需要）更改 padding:25px 2%; 填充：0 2%；

```
.nav {
    display: inline;
    float: right;
    /*width:100%;*/
    margin: 0 1.7%;
    /*padding:25px 2%;*/
    padding: 0 2%;
    margin-bottom: 0;
} 
```

演示：http: [//jsfiddle.net/4svrN/](http://jsfiddle.net/4svrN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:33:24.313

删除填充将起作用 Demo [http://jsfiddle.net/vFgke/](http://jsfiddle.net/vFgke/)

```
.title {display:inline; float:left; margin:0 auto;}
.nav {
    display:inline;
    float:right;

    margin:0 1.7%;

    margin-bottom:0;
}
ul {display:inline; float:right; list-style:none;}
li {display:inline;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T00:39:15.850

尝试

```
body {
width: 100%;
}
.title {
display:inline; 
float:left; 
margin:0 auto;
}
.nav {
display: inline;
float: right;
padding: 25px 2%;
}
}
ul {display:inline; float:right; list-style:none;}
li {display:inline;} 
```

# asp.net-mvc-3 - 将视图添加到 MVC3 时出现异常

> ID：14637632
> 
> 赞同：4
> 
> 时间：2013-02-01T00:19:46.883
> 
> 标签：asp.net-mvc-3, visual-studio-2012, ninject

我正在使用 Visual Studio 2012 Express for Web。

当我尝试添加视图时，我收到一条错误消息：

```
The templates had the following 1 error(s)

C:\Program Files\Microsoft Visual Studio
11.0\Common7\IDE\VWExpress\ItemTemplates\CSharp\Web\MV
C 3\CodeTemplates\AddView\CSHTML\Empty.tt(-1,-1): error :
There was a problem getting an AppDomain to run the
transformation from the host.  The process cannot continue. 
```

我一直在插入 Ninject（这实际上只是一个证明它正在工作的应用程序），因此它可能与其中一个启动文件有关。

我从哪里开始尝试解决这个问题？

谢谢

戴夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T04:09:35.793

尝试重新启动 Visual Studio 2012 并立即添加一个视图，这应该对您有用。

您是否复制了`Code Templates`项目的文件夹？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-02T21:13:25.850

重新启动对我不起作用。事实证明，mvc3 从未安装在我的机器上（mvc4 已经到位），而且我的 Visual Studio 副本也想安装 Service Pack 1。所以我使用控制面板重新启动了 Visual Studio，卸载了新版本的 newget。服务包 (sp1) 已成功安装。现在我的自定义 .tt 文件成功呈现新视图。

引导我走这条路的信息：

[http://forums.asp.net/t/1820254.aspx?MVC+Add+View+Model+Controller+from+template+throws+an+error](http://forums.asp.net/t/1820254.aspx?MVC+Add+View+Model+Controller+from+template+throws+an+error)

和

[http://forums.asp.net/t/1729674.aspx?Installing+MVC3+after+Installing+MVC4](http://forums.asp.net/t/1729674.aspx?Installing+MVC3+after+Installing+MVC4)

# css - 我们如何称呼为网页创建布局的人？

> ID：14637635
> 
> 赞同：0
> 
> 时间：2013-02-01T00:20:15.157
> 
> 标签：css, layout, web, webpage

几天来，我正在寻找`webdesigners`可以使我的页面看起来不错的人。我所能找到的只是制作网站.psd 文件的人，这样我就可以剪下元素并将它们放在我的页面上。我不需要那个。我想要有人访问我的页面，浏览我的 .css 文件，重新制作它，并可能在网站上添加一些图形元素 - 例如徽标和/或一些图标。

我会自己做，但我在选择/耦合颜色方面非常糟糕，所以我需要有人帮我做。

所以，重新假设：我如何通过谷歌搜索以实际找到可以通过重新制作我的 .css 文件来使我的页面看起来不错的人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:32:03.413

尽管这个领域可能看起来很灰暗，但有一些专业人士参与了您想要的不同方面的工作。

造成混淆的原因是同一专业人士可能担任多个角色。

网页设计师应该能够做到这一点。除了您的描述外，还需要 CSS/HTML 的基本知识之一。

Web Ui Engenier 是 CSS/HTML/JavaScript 方面的专家，他不会根据自己的说法设计界面，他是实现它的人。

Web UX 设计师是设计用户界面和体验的人。它的行为方式和 UI 工程师将如何实现它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T00:22:29.743

人们仍然使用 Web Designers 的总称：[http ://www.hanselman.com/blog/HireAndPayADesignerAndBeHappy.aspx](http://www.hanselman.com/blog/HireAndPayADesignerAndBeHappy.aspx)

我通常会搜索 CSS 网页设计师来缩小范围。

# asp.net - FileUpload：选择特定的文件类型

> ID：14637641
> 
> 赞同：0
> 
> 时间：2013-02-01T00:20:41.070
> 
> 标签：asp.net, .net, file-upload

我在我的用户界面 (.net) 上使用文件上传对象。我希望它在搜索文件时仅选择特定的文件类型，并且我还希望在页面的 PostBack 时不清除路径。有什么建议么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T03:38:52.377

.NET 中有许多文件上传选项。对于 .NET web 项目，我喜欢使用 Dean Brettle 的 NeatUpload，它是免费的，并且可以选择特定的类型。与内置的 .NET FileUpload 控件不同，它还会显示进度，这对于加载大文件的用户来说是一件好事。

[http://neatupload.codeplex.com/](http://neatupload.codeplex.com/)

# python - 识别非常低级别的图片并在 Python 中将其着色为纯黑色

> ID：14637642
> 
> 赞同：2
> 
> 时间：2013-02-01T00:20:43.393
> 
> 标签：python, image-processing, filter, label, gaussian

我正在研究一种自动“错误计数”算法，我想知道如果我减去，我如何才能识别出非常低的对比度（垫上没有额外的错误 - 假设相机处于相同的位置并且光照条件非常相似）两张相互的照片，我不会得到干净的黑色图像，因为光线条件会略有不同。现在我应用一个高斯滤波器和 mahotas.thresholding.otsu() 来画出有错误的地方（在顶部放一个白色斑点），然后我使用 ndimage.label() 来计算它们。

但是，如果我的输入图像“cropbugs.jpg”非常深灰色，我会在应用 otsu() 后得到一些随机输出，并且我的 label() 函数会返回一个随机错误计数。我如何识别我的图像是非常深灰色还是对比度低并且只是将错误计数设置为 0？谢谢

到目前为止，我的代码如下所示：

```
bug_img = mahotas.imread('cropbugs.jpg')
pylab.gray()

bug_img = ndimage.gaussian_filter(bug_img, 6)#8
T = mahotas.thresholding.otsu(bug_img)
pylab.imshow(bug_img > T)
labeled,nr_objects = ndimage.label(bug_img > T)
print "Bug Count: "+str(nr_objects)
pylab.imshow(labeled)
pylab.jet()
pylab.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:40:36.133

我可以看到解决这个问题的多种方法

1.  （这是评论中的建议）。根据平均值、标准差、最大值或某种组合定义某种类型的固定规则。你最终会得到一个类似以下之一的测试：

    ```
    bug_img.mean() + 2*bug_img.std() < THRESHOLD
    bug_img.std() < THRESHOLD
    bug_img.max() < THRESHOLD
    sorted(bug_img.ravel())[-10] < THRESHOLD 
    ```

2.  使用基于纹理特征的分类系统（参见[我之前对相关问题的回答](https://stackoverflow.com/a/5505754/248279)）。

3.  继续使用`label`，就好像一切都很好，然后对结果进行**后过滤**。例如：

    ```
    labeled,nr_objects = mahotas.label(bug_img > T)
    sizes = mahotas.labeled.labeled_size(labeled)
    good_objects = (MIN_BUG_SIZE <= sizes) & (sizes <= MAX_BUG_SIZE)
    print np.sum(good_objects) 
    ```

# ruby-on-rails - 编辑时在 has_many 关系的第三层使用 .build 方法

> ID：14637645
> 
> 赞同：1
> 
> 时间：2013-02-01T00:21:02.733
> 
> 标签：ruby-on-rails, nested-forms, builder

我正在建立一个目标日历，其中有以下 has_many 关系。

```
CalEntry 

  has_many :goals

Goals 
  has_many :completed_goals
  has_many :planned_goals 

CompletedGoals
  has_many :completed_times

PlannedGoals
  has_many :planned_times 
```

如您所见，每个日历日都包含许多目标，这些目标又被分解为已完成和计划的目标。这些中的每一个都有与花费在该活动上的时间块相对应的时间。当我在控制器中使用编辑操作时，会出现我的问题。如果正在编辑的 CalEntry 对象下的特定目标没有任何记录的时间，我希望能够为正在编辑的 CalEntry 构建几个时间块。这就是我所拥有的：

```
def edit
  @cal_entry = CalEntry.find(params[:id])
  @goal_id = params[:goal_ref]
  goal = @cal_entry.goal.find(@goal_id)
  completed_goal = goal.completed_goals.first
  completed_goal.completed_times.build
end 
```

这似乎不起作用，因为@cal_entry 对象似乎不包含已完成时间的新建实例。当我用 .build 替换 @cal_entry 对象上使用的 find 方法时，它会构建整个嵌套对象树的全新实例，这不是我想要的。我只希望 completed_times 构建一些额外的实例。关于如何在控制器中将新实例构建为深度嵌套的对象，我一定缺少一些简单的东西。

谢谢你的帮助！

恩

# azure - 在 co-located 缓存中，如何确定 key 的位置？

> ID：14637647
> 
> 赞同：2
> 
> 时间：2013-02-01T00:21:10.280
> 
> 标签：azure, distributed-caching, azure-caching

这是一个关于缓存组件的设计问题，我可以看到两种方法来确定数据在哪里：

*   每个角色实例维护一个包含整个键集的表，跟踪保存数据的相应实例。
*   数据的位置由密钥的哈希码决定。

在第一种情况下，这意味着保留一组合理的密钥很重要。在第二种情况下，测试密钥的存在会产生网络往返......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:00:24.690

我的猜测是 2），它利用哈希来确定位置，也许是一致的哈希。

而且我认为是的，测试密钥的存在会生成网络 I/O，但我认为它不需要调用所有的托管服务器，因为从哈希中它应该知道哪个服务器包含您的数据并且只需要连接到它。

# javascript - 为什么我不能将此字符串用作方法调用？

> ID：14637653
> 
> 赞同：0
> 
> 时间：2013-02-01T00:21:40.063
> 
> 标签：javascript, jquery

这是我的脚本，出于某种原因，当我使用`contactForm.container[contactForm.container.config.effect]();`它时说“contactForm.container.config 未定义”......我可以很好地看到它已定义！我究竟做错了什么？谢谢

```
<script>

(function(){

  $('html').addClass('js');

 var contactForm ={

     container: $('#contact'),

     config: {
          effect:'slideToggle'
            }, 

     init: function(){
        $('<button></button>',{
           text: 'Contactame'
        })
               .insertAfter('article:first')
               .on('click', this.show);

            }, 

     show: function(){
                contactForm.close.call(contactForm.container);
                contactForm.container[contactForm.container.config.effect]();
            }, 

     close: function(){
                var $this = $(this);
                  $('<span class=close>X</span>')           
                       .prependTo(this)
                       .on('click',function(){

                                  $this.hide();

                                             })
                     } 

  };
       contactForm.init();
    })();

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:23:18.827

`config`不是 的孩子`container`。他们是兄弟姐妹。

你似乎想要：

```
contactForm.config.effect 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T00:23:40.447

应该`contactForm.config`不是`contactForm.container.config`。将调用更改为：

```
contactForm.container[contactForm.config.effect](); 
```

# ruby-on-rails - 为什么 Rails flash[:notice] ="msg" 在 :notice => "msg" 不起作用的地方工作？

> ID：14637656
> 
> 赞同：2
> 
> 时间：2013-02-01T00:21:55.133
> 
> 标签：ruby-on-rails

为什么 Rails flash[:notice] ="msg" 在 :notice => "msg" 不起作用的地方工作？如果我使用以下代码，则会显示通知：

```
# Case 1 (this works)
flash[:notice] = 'Candidate was successfully registered.'
format.html { redirect_to :action => "show_matches", :id => @trial.id } 
```

这不起作用：

```
# Case 2 (this doesn't)
format.html { redirect_to :action => "show_matches", :id => @trial.id, :notice => "Candidate was successfully registered."} 
```

但在我的应用程序的其他领域，上述技术工作得很好：

```
# Case 3 (this works)
format.html { redirect_to @candidate, :notice => 'Candidate was successfully created.' } 
```

我的布局包括：

```
<section id="middle_content">
    <% flash.each do |key, value| -%>
        <div id="info_messages" class="flash <%= key %>"><%= value %></div>
        <br/>
    <% end -%>
    <%= yield -%>
</section> 
```

所以我的问题是为什么使用`:notice => ""`在一种情况下有效，而在另一种情况下无效？

我意识到我没有给你太多的背景信息，但我的感觉是我的问题实际上很简单。

ps 这似乎类似于[这个问题](https://stackoverflow.com/questions/7057024/rails-flash-notice-not-on-url-but-in-object)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T00:28:28.677

[根据文档](http://api.rubyonrails.org/classes/ActionController/Redirecting.html)，redirect_to 方法采用两个参数

第二个参数是放置`:notice`密钥的位置。

但是，在您的案例 2 中，ruby 无法判断是否涉及一个或多个哈希。只有一个哈希被认为是传递给 redirect_to 方法。

您可以通过在每个散列周围显式设置括号来强制 ruby​​ 传递第二个散列：

```
format.html { redirect_to({:action => "show_matches", :id => @trial.id}, {:notice => "Candidate was successfully registered."}) } 
```

案例 3 有效，因为这里没有不明确的哈希情况。

# java - 如何将 Play 框架项目部署到亚马逊？

> ID：14637670
> 
> 赞同：2
> 
> 时间：2013-02-01T00:23:28.553
> 
> 标签：java, deployment, playframework, amazon, war

是否可以创建在 Play 上运行的项目的 .war，以便可以轻松地部署在亚马逊上？或者是否有必要在运行应用程序的服务器本身上安装 play？

我更喜欢 .war，因为我希望所有来源的流量都能够运行应用程序，而不仅仅是在端口 9000 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T09:26:52.053

阅读此内容以了解 play 1.x，[http:](http://www.playframework.org/documentation/1.2.5/production) //www.playframework.org/documentation/1.2.5/production，阅读此内容以 了解 2.x，[http: //www.playframework.org/documentation/2.0.4/Production](http://www.playframework.org/documentation/2.0.4/Production)

为了更轻松地通过 SSH 进行部署，您可能需要查看[https://github.com/nylund/play-deploy/blob/master/documentation/manual/home.textile](https://github.com/nylund/play-deploy/blob/master/documentation/manual/home.textile)（免责声明我编写了插件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:08:44.647

你在那里混合了很少的概念。

应用程序监听的端口默认为 9000，但您可以在 application.conf 中将其更改为您想要的任何端口，甚至可以为开发/测试/生产配置不同的端口，......这与战争或没有战争无关部署。

来自能够运行应用程序的所有来源的流量，如果您的意思是流量来自哪里，那是源端​​口，而不是您的服务器运行的端口。我唯一能理解的是，您可能正在考虑通常只能访问端口 80 或 8080 的防火墙或代理后面的人。但如前所述，您可以在任何您想要的端口上收听。

您可能还指的是默认情况下 AWS 中的端口 9000 被防火墙保护，但这也是您可以设置的。

无论如何，原始问题的答案是肯定的，您可以创建一个战争，而不是安装 Play，您可以安装 Tomcat/Jboss/... 并将其部署到那里，但与您的任何问题无关，所以可能只需使用 Play 独立版，就可以省去一大堆问题。

# c# - Wix 安装项目的 exe “应用程序无法在您的 PC 上运行”

> ID：14637671
> 
> 赞同：10
> 
> 时间：2013-02-01T00:23:35.190
> 
> 标签：c#, windows-8, wix, wix3.6

在 VS2012 中，我为应用程序创建了一个 Wix3.6 安装项目。安装程序输出类型在属性选项卡上设置为**可执行程序包 (.exe) 。**安装项目按预期编译并生成 .exe。

双击 .exe 会产生以下消息：

> 此应用程序无法在您的 PC 上运行。

以管理员身份执行 .exe 并授予提升权限，机器说：

> Windows 找不到“C:\abc\xyz.exe”。请确保您输入了正确的名称，然后重试。

谷歌搜索显示错误消息可能与架构相关。

事实：

*   机器是 Windows 8，64 位。
*   安装项目设置为 x86 平台。
*   相同的设置项目产生一个工作 x86 .msi

有关要查找的不正确设置、参考或配置的任何想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-01-16T05:42:10.760

有点晚了，但我自己遇到了这个，这是我的解决方案。

基本上，可以通过尝试在项目设置中将 WIX 设置项目从“MSI”输出更改为“EXE”来创建此场景。WIX 设置项目只能从其 Product.wxs 生成 MSI。WIX 生成的 EXE 实际上是使用引导程序项目创建的，其中包含一个 Bundle.wxs，然后可以在内部将您的 MSI 捆绑到引导程序的 EXE 中。

因此，要解决此问题，请将您的安装项目更改回 MSI 输出，然后创建一个额外的引导项目（带有 EXE 输出）并在 Bundle XML 的“链式包”部分中添加安装项目的构建 MSI 输出。

# c# - 获取任意对象列表并初始化所有对象

> ID：14637673
> 
> 赞同：0
> 
> 时间：2013-02-01T00:23:38.090
> 
> 标签：c#, list, object

```
 bgList.Add(bg1);
        bgList.Add(bg2);
        bgList.Add(bg3);
        bgList.Add(bg4);
        bgList.Add(bg5);

        //Initialize all background objects
        for (int i = 0; i < bgList.Count; i++)
        {
            bgList[i] = new Sprite();
            bgList[i].Scale = 2.0f;
        } 
```

这是一种合法的方式吗？基本上，问题归结为“我可以使用 for 循环初始化对象列表吗？

我在 bg1、bg2、bg3、bg4 和 bg5 对象上收到“此对象永远不会为空”警告，这让我想知道是否不允许使用这种技术。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:26:58.617

这些语句**不**等价：

```
bg1 = new Sprite(); 
```

和

```
bgList.Add(bg1);
bgList[0] = new Sprite(); 
```

后者不会将新实例的引用分配给`bg1`. 它只是将新实例存储在第 0 个位置。

因此，使用集合和循环来实例化多个变量并不是一个可行的捷径。您必须明确地实例化每个变量，或者从一开始就使用数组或集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:27:11.277

一个 foreach 肯定会更容易，你应该能够做到，但 imo 你也可以在循环中添加类似的项目。

```
 for (int i = 0; i < bgList.Count; i++)
        {
            var bglistitem = new Sprite()
            bhlistitem.Scale = 2.0f;
            bgList.Add(bglistitem);
        } 
```

# java - 从密钥库加载证书

> ID：14637677
> 
> 赞同：1
> 
> 时间：2013-02-01T00:24:06.250
> 
> 标签：java, certificate, keystore, jks

我有一个 Base-64 编码的 X.509 (.CER) 证书，它在下面的 java 代码中导致 NullPointerException。导致它的行是`PublicKey pubKey = pubCert.getPublicKey();`

有没有办法验证 myfile.keystore 是否具有“xyz”证书？

```
final FileInputStream keyFile = new FileInputStream(filePath
                    + "myfile.keystore");
final KeyStore keyStore = KeyStore.getInstance("JKS");
String storepass = "mypass";
keyStore.load(keyFile, storepass.toCharArray());
Certificate pubCert = keyStore.getCertificate("xyz");
PublicKey pubKey = pubCert.getPublicKey(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:31:19.980

尝试`keytool`应该在 JRE 或 JDK bin 目录中的命令，请参见下面的输出：

```
@raspbmc:~$ /opt/jdk1.8.0/bin/keytool  -list -help
keytool -list [OPTION]...

Lists entries in a keystore

Options:

 -rfc                            output in RFC style
 -alias <alias>                  alias name of the entry to process
 -keystore <keystore>            keystore name
 -storepass <arg>                keystore password
 -storetype <storetype>          keystore type
 -providername <providername>    provider name
 -providerclass <providerclass>  provider class name
 -providerarg <arg>              provider argument
 -providerpath <pathlist>        provider classpath
 -v                              verbose output
 -protected                      password through protected mechanism

Use "keytool -help" for all available commands 
```

参考：

[http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/keytool.html](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/keytool.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T01:35:26.350

您能否确认密钥库在类路径中？

如上所述，如果您运行*keytool -list -v -keystore .jks*，您将看到安装在密钥库中的证书。

如果您在密钥库中看到您的证书，但您仍然遇到错误，这可能是因为证书未正确链接，我过去曾遇到过这个问题。如果您仍然遇到问题，请粘贴上述命令的输出，这将有助于我们解决您的问题

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T00:28:36.870

使用工具打开密钥库，例如 eclipse 插件或使用[http://jxplorer.org/downloads/index.html](http://jxplorer.org/downloads/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-11T06:36:28.223

编辑此行

PublicKey pubKey = pubCert.getPublicKey();

到

PublicKey pubKey = keyStore.getPublicKey();

# data-visualization - 该数据的最佳图表？

> ID：14637681
> 
> 赞同：0
> 
> 时间：2013-02-01T00:24:54.073
> 
> 标签：data-visualization

我有这些数据：[https](https://docs.google.com/spreadsheet/pub?key=0AqDm6Izoam4OdF9qekJ6dFlfVjF0QnVoLXFxYXFGTnc&single=true&gid=3&output=html) ://docs.google.com/spreadsheet/pub?key=0AqDm6Izoam4OdF9qekJ6dFlfVjF0QnVoLXFxYXFGTnc&single=true&gid=3&output=html正在通过谷歌表格收集。栏目为[Region]、[Town]、[Area]、[Sound Schedule]

[Sound Schedule] 是一个 yes|no 列，所以我想我可以制作一个图表，根据 [Sound Schedule] 数量对数据进行分组。我不确定哪个图表适合这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:29:05.957

如果地理人口规模很小，您可能希望制作该区域的地图，并为“是”和“否”（红色/蓝色）设置两种颜色，这样您就可以更好地可视化数据。类似于他们在选举期间显示的图表。

对此微笑： ![地图](../Images/58be9115e8b1a23ca5b1e91c65ac6806.png)

如果需要做一些基于线/条的事情，显示这些数据的最佳方式可能是显示它类似于谷歌已经在做的事情，为打开和关闭添加一些颜色。并可能添加一个饼图来显示城市开启和关闭的百分比。

# node.js - node-mongodb-native 周围的最小层

> ID：14637684
> 
> 赞同：2
> 
> 时间：2013-02-01T00:24:56.680
> 
> 标签：node.js, mongodb

我写了可能是 node-mongodb-native 包装器的最小包装器。但是，我觉得它需要改进。它非常小，可以舒适地放在这里：

```
function MongoWrapper() {
  this.db = null;
};

var mongoWrapper;
module.exports = exports = mongoWrapper = new MongoWrapper;

// This means that you can do `new include('mongoWrapper').MongoWrapper()`
mongoWrapper.MongoWrapper = MongoWrapper;

// ObjectId is the most handy method of all. This will work with
// native BSON or Pure BSON
mongoWrapper.ObjectId = function() {
    if (!mongo.BSONNative || !mongo.BSONNative.ObjectID) {
      return function(id) {
            return mongo.BSONPure.ObjectID.createFromHexString(id);
      };
    }
    return function(id) {
            return new mongo.BSONNative.ObjectID(id);
    };
}();

MongoWrapper.prototype.connect = function(url, options, cb ){

  var that = this;
  var MongoClient = mongo.MongoClient;

  MongoClient.connect( url, function( err, db ){

    if( err ) {
      console.log( err );
    } else {
      that.db = db; 
    }
    cb( err, db );
  });
} 
```

现在......这个“问题”是我需要将我的整个服务器包装在一个回调中：

```
mw.connect('mongodb://localhost/hotplate', {}, function( err, db ){
    app.configure(function(){
    app.set('port', process.env.PORT || 3000);
    app.set('views', __dirname + '/views');
    ...
    app.use(express.session({
      // secret: settings.cookie_secret,
      secret: 'woodchucks are nasty animals',
      store: new MongoStore({
        // db: settings.db
        // db: hotplate.get('db').client
         db: db
      })
    })); 
```

其他驱动程序（如 Mongoose，甚至 mongojs）设法不强制使用回调。我查看了他们的代码，然后……嗯，我不太明白。特别是 Mongojs 似乎使用了一个库来实现承诺，但我无法理解它。请注意，`express.session`例如，想要一个完全工作的连接作为参数（这就是我在这里所做的）。如果不使用连接，您实际上无法确定连接是否已设置。

那么：摆脱回调需求的最简单方法是什么？

我想，基本的想法是“克隆”mongodb API调用，用代码包装它们以处理“db”变量未设置的可能性。但是......这将如何工作？

任何帮助将不胜感激！

默克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:19:15.910

最终，您会遇到这样的情况：您绝对需要等待连接完成才能继续，因为它是异步的。如果没有回调，它将无法工作（因为 MongoClient 需要回调）。

您可以使用 Event 来包装它——但这实际上（从概念上）只是一种不同类型的回调。这就是 Mongoose 所做的——它在连接准备好时引发一个事件，`open`.

使用 Node.js，没有一个解决方案在某处不涉及事件或回调（这是 Node 和 MongoDB 驱动程序的有意设计选择）。这是驱动程序中的异步连接。您只需要延迟一些快速设置，直到连接打开。它只需要在应用程序启动时发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-04T23:04:06.513

意识到这个问题有点老了，但我用这个小小的包装器来做“提升”和少量的糖，所以我的数据库代码不那么冗长。`findById`诸如无需包装 ObjectId 和`findArray`无需`toArray()`查询之类的事情。一探究竟：

[https://github.com/dmcaulay/mongo-wrapper](https://github.com/dmcaulay/mongo-wrapper)

# c# - 在 C# Win Form 中实现 jQuery Tag-it 功能

> ID：14637687
> 
> 赞同：0
> 
> 时间：2013-02-01T00:25:04.330
> 
> 标签：c#, winforms, tags

我想在 C# windows 窗体中实现类似于 jQuery TagIt 的功能。这是 jQuery 的链接 - [http://aehlke.github.com/tag-it/](http://aehlke.github.com/tag-it/)

我正在考虑为此功能创建一个用户控件。

关于如何解决这个问题的任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T18:34:21.120

```
public class TagLayoutPanel : FlowLayoutPanel
{
    //local variables/controls
    private TextBox _entryBox;
    private Dictionary<string,string> _currentTags;

    //events
    public delegate void TagsUpdatedHandler(TagEventArgs e);
    public event TagsUpdatedHandler TagsUpdated;

    //constructor(s)
    public TagLayoutPanel()
    {
        Init();
    }

    public List<string> GetCurrentTags()
    {
        var lst = new List<string>();
        if (_currentTags != null)
            lst = _currentTags.Keys.ToList();
        return lst;
    }
    private void Init()
    {
        _currentTags = new Dictionary<string, string>();
        //Entry box
        this.Padding = new Padding(3);
        this.BackColor = Color.White;

        _entryBox = new TextBox();
        _entryBox.BackColor = Color.White;
        _entryBox.BorderStyle = System.Windows.Forms.BorderStyle.None;
        _entryBox.KeyUp += _entryBox_KeyUp;
        this.Controls.Add(_entryBox);
    }

    private void _entryBox_KeyUp(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Enter)
        {
            var tag = _entryBox.Text;
            if (!string.IsNullOrEmpty(tag))
            {
                this.AddTag(tag);
                _entryBox.Text = String.Empty;
            }
        }
    }

    protected override void OnGotFocus(EventArgs e)
    {
        //Set focus to the textentry box.
        base.OnGotFocus(e);
        this._entryBox.Focus();
    }
    public void AddTag(string tag)
    {
        bool added = false;
        if (!_currentTags.ContainsKey(tag))
        {
            _currentTags.Add(tag, tag);
            added = true;
        }

        if(added)
        {
            Redraw();
            Notify();
        }
    }
    private void Notify()
    {
        if(TagsUpdated != null)
            TagsUpdated(new TagEventArgs(GetCurrentTags().ToArray()));
    }
    public void Redraw()
    {
        this.Controls.Clear();
        foreach (var tag in _currentTags.Keys)
        {
            DrawTag(tag);
        }
        AddEntry();
    }
    private void AddEntry()
    {
        this.Controls.Add(_entryBox);
        _entryBox.Focus();
    }

    public void DrawTag(string tag)
    {
        var lbl = new Label();
        lbl.MouseMove += lbl_MouseMove;
        lbl.BorderStyle = System.Windows.Forms.BorderStyle.FixedSingle;
        lbl.BackColor = Color.LightGray;
        lbl.Name = "lbl_" + tag.Replace(" ", "");
        lbl.ImageAlign = ContentAlignment.TopRight;
        lbl.Text = tag;
        lbl.Tag = tag;
        lbl.Image = Resources.close_x; //Replace with your own image.
        lbl.Click += lbl_Click;
        this.Controls.Add(lbl);
    }

    private void lbl_Click(object sender, EventArgs e)
    {
        var lbl = (Label)sender;
        bool removed = false;
        foreach(var item in this.Controls)
        {
            if(item is Label)
            {
                if(((Label)item).Tag.ToString() == lbl.Tag.ToString())
                {
                    _currentTags.Remove(lbl.Tag.ToString());
                    removed = true;
                    break;
                }
            }
        }

        if(removed)
        {
            Redraw();
            Notify();
        }
    }

    private void lbl_MouseMove(object sender, MouseEventArgs e)
    {
        var lbl = (Label)sender;

        var startImgX = lbl.Width - 20;
        var endImgY = lbl.Height - 15;

        if (e.X >= startImgX && e.Y <= endImgY)
            System.Windows.Forms.Cursor.Current = System.Windows.Forms.Cursors.Hand;
        else
            System.Windows.Forms.Cursor.Current = System.Windows.Forms.Cursors.Arrow;

    }
}

public class TagEventArgs : EventArgs
{
    public string[] Tags { get; private set; }
    public TagEventArgs(string[] tags)
    {
        Tags = tags;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:45:16.310

你很幸运，因为已经有一个名为 a 的容器控件`FlowLayoutPanel`，它将为你提供 90% 的路径作为流动标签主机。

[FlowLayoutPanel 类@MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.flowlayoutpanel.aspx)

此控件可从 Visual Studio 的工具箱中获得，因此一个很好的起点是创建一个基于 a 的自定义控件`FlowLayoutPanel`，以及另一个自定义控件来表示基于 a 的标记`Label`，`Checkbox`并更新绘图和行为（在这种情况下a `Label`) 响应点击并显示 [x] 以关闭标签。

[标签类@MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.aspx)
[CheckBox 类@MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.checkbox.aspx)

制作完这两个控件后，您需要做一些额外的工作，以使您的 FlowLayoutPanel 派生控件添加/删除代表当前标签状态的基于标签的控件。

更新：我错过的一件事是，`TextBox`需要添加一个或其他输入字段以支持添加新标签。

[文本框@MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.aspx)

# redmine - 瘦服务器权限和守护进程问题

> ID：14637688
> 
> 赞同：2
> 
> 时间：2013-02-01T00:25:11.390
> 
> 标签：redmine, thin

我正在尝试通过 Thin 部署 Redmine 2.x，但遇到了几个不同的问题。首先是，通过 webrick 进行测试时，我可以成功地匿名导航 Redmine。我什至可以登录，但是在提交表单后我收到一个应用程序错误。这是production.log相关部分：

```
Successful authentication for 'admin' from 97.79.126.223 at Fri Feb 01 00:14:04 UTC 2013
Redirected to http://54.235.144.11:3000/
Completed 302 Found in 67ms (ActiveRecord: 37.3ms)

NoMethodError (undefined method `options' for {:ctime=>1359677644, :user_id=>1, :atime=>1359677644}:Hash):
rack (1.5.1) lib/rack/session/abstract/id.rb:321:in `commit_session'
rack (1.5.1) lib/rack/session/abstract/id.rb:218:in `context'
rack (1.5.1) lib/rack/session/abstract/id.rb:212:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.11) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `_run__750860825__call__4__callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `send'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.11) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `send'
activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.11) lib/rails/rack/logger.rb:32:in `call_app'
railties (3.2.11) lib/rails/rack/logger.rb:16:in `call'
activesupport (3.2.11) lib/active_support/tagged_logging.rb:22:in `tagged'
railties (3.2.11) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.5.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.5.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.11) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.5.1) lib/rack/lock.rb:17:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/static.rb:62:in `call'
rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
rack-cache (1.2) lib/rack/cache/context.rb:143:in `pass'
rack-cache (1.2) lib/rack/cache/context.rb:155:in `invalidate'
rack-cache (1.2) lib/rack/cache/context.rb:71:in `call!'
rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
railties (3.2.11) lib/rails/engine.rb:479:in `call'
railties (3.2.11) lib/rails/application.rb:223:in `call'
rack (1.5.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.11) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.5.1) lib/rack/handler/webrick.rb:60:in `service'
/usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
/usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
/usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
/usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
/usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
/usr/lib/ruby/1.8/webrick/server.rb:82:in `start'
rack (1.5.1) lib/rack/handler/webrick.rb:14:in `run'
rack (1.5.1) lib/rack/server.rb:264:in `start'
railties (3.2.11) lib/rails/commands/server.rb:70:in `start'
railties (3.2.11) lib/rails/commands.rb:55
railties (3.2.11) lib/rails/commands.rb:50:in `tap'
railties (3.2.11) lib/rails/commands.rb:50
script/rails:6:in `require'
script/rails:6 
```

我在使用 Thin 和 Webrick 部署时都收到了这个错误。无论它是如何部署的，我以前从未遇到过 redmine 的此错误。

我面临的另一个问题是如何启动瘦服务器。但是，当我在 Rails 目录中并供应`sudo thin start`Thin 成功启动时，如果我尝试通过以下方式启动 Thin，`sudo /etc/init.d/thin start`我会收到这个可爱的错误

```
>> Exiting!
/usr/lib64/ruby/gems/1.8/gems/eventmachine-1.0.0/lib/eventmachine.rb:528:in `start_unix_server': no unix-domain acceptor (RuntimeError)
    from /usr/lib64/ruby/gems/1.8/gems/eventmachine-1.0.0/lib/eventmachine.rb:528:in `start_server'
    from /usr/lib64/ruby/gems/1.8/gems/eventmachine-1.0.0/lib/eventmachine.rb:548:in `start_unix_domain_server'
    from /usr/lib64/ruby/gems/1.8/gems/thin-1.5.0/lib/thin/backends/unix_server.rb:19:in `connect'
    from /usr/lib64/ruby/gems/1.8/gems/thin-1.5.0/lib/thin/backends/base.rb:55:in `start'
    from /usr/lib64/ruby/gems/1.8/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `call'
    from /usr/lib64/ruby/gems/1.8/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'
    from /usr/lib64/ruby/gems/1.8/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run'
    from /usr/lib64/ruby/gems/1.8/gems/thin-1.5.0/lib/thin/backends/base.rb:63:in `start'
    from /usr/lib64/ruby/gems/1.8/gems/thin-1.5.0/lib/thin/server.rb:159:in `start'
    from /usr/lib64/ruby/gems/1.8/gems/thin-1.5.0/lib/thin/controllers/controller.rb:86:in `start'
    from /usr/lib64/ruby/gems/1.8/gems/thin-1.5.0/lib/thin/runner.rb:187:in `send'
    from /usr/lib64/ruby/gems/1.8/gems/thin-1.5.0/lib/thin/runner.rb:187:in `run_command'
    from /usr/lib64/ruby/gems/1.8/gems/thin-1.5.0/lib/thin/runner.rb:152:in `run!'
    from /usr/lib64/ruby/gems/1.8/gems/thin-1.5.0/bin/thin:6
    from /usr/bin/thin:19:in `load'
    from /usr/bin/thin:19 
```

这是我的 redmine.yml 瘦配置文件

```
servers: 3
chdir: /www/redmine.guidelinecentral.com
user: apache
log: /var/log/thin/redmine.log
daemonize: true
pid: /var/run/thin/redmine.pid
group: apahce
require: []

timeout: 30
wait: 30
max_persistent_conns: 100
socket: /var/run/redmine/sockets/thin.sock
max_conns: 1024
environment: production 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T21:49:41.843

I was not able to solve this issue and ended up doing a reinstall of both Thin and Redmine. I think there was a bad gem somewhere.

# python - PyGTK 在 Windows 上找不到我的 python 2.7 文件夹

> ID：14637691
> 
> 赞同：4
> 
> 时间：2013-02-01T00:25:43.800
> 
> 标签：python, windows, 64-bit, pygtk

我正在尝试在 64 位 win 7 PC 上安装 Python 2.7 PyGTK 2.24.2。我的 python 是 2.7.1 [MSC v.1500 64 位 (AMD64)]。

我从PyGTK网站下载了pygtk-all-in-one-2.24.2.win32-py2.7.msi，但是运行时弹出窗口：“Python 2.7 could not be located on your system.” 并且安装失败。

是因为我的 python 是 x64 的吗？或者，我是否必须设置任何环境变量（我已经为 PYTHONPATH 做过）？

谢谢你。

# xpages - Xpage 中的 ReadOnly 字段未提交

> ID：14637693
> 
> 赞同：1
> 
> 时间：2013-02-01T00:25:46.333
> 
> 标签：xpages, readonly

我的 Xpage 中有一个字段，我希望它是只读的并在保存时提交到数据库。该字段从 Ajax 调用中获取值

将属性 ReadOnly 设置为 true 会创建一个`<span>`而不是只读字段。

设置属性“ *Show disabled control for readonly* ”会创建一个具有 readonly=readonly 属性的输入文本字段。

```
<input type="text" class="xspInputFieldEditBox" readonly="readonly" name="view:_id1:_id2:_id3:_id28:callbackFieldControlSet:InstrumentShort" id="view:_id1:_id2:_id3:_id28:callbackFieldControlSet:InstrumentShort"> 
```

它不会被保存到数据库中。

据我所知，只读字段已提交但未禁用。

我在这里做错了什么？

/米

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T08:42:05.237

您可以使用 attr-property 添加*只读*属性：

```
<xp:inputText id="inputText2" value="#{document1.ReadOnly}">
   <xp:this.attrs>
      <xp:attr name="readonly" value="true" />
   </xp:this.attrs>
</xp:inputText> 
```

顺便说一句：*disabled*和*readonly*属性的行为是正确的，因为这是服务器端的定义。您想使用值编辑组件，这就是必须允许它接受值的原因。只是在客户端禁用它在技术上没有任何效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:22:04.503

~~我认为这是一个错误。你是对[的，只读字段应该被保存](http://www.w3.org/TR/html4/interact/forms.html#h-17.12)。~~在版本 8.5.1 中，当“显示禁用的只读控件”属性不存在时，我曾经通过 JavaScript 将该字段设置为只读。这是代码片段：

```
<xp:scriptBlock id="scriptBlock1">
    <xp:this.value><![CDATA[function makeFieldReadOnly() {
    document.getElementById("#{id:inputText2}").readOnly = true;
}
window.onload = makeFieldReadOnly;]]></xp:this.value>
</xp:scriptBlock> 
```

在上面的代码片段中，该函数在页面加载时`makeFieldReadOnly`将编辑框标记为只读。`inputText2`

# html - 包含阅读更多链接的分页符

> ID：14637694
> 
> 赞同：0
> 
> 时间：2013-02-01T00:25:47.223
> 
> 标签：html, css, page-break

我目前正在尝试弄清楚如何将分页符集的 html 转换为阅读更多链接。

```
<div style="page-break-after: always;">
<span style="display: none;">&nbsp;</span></div> 
```

我在 WordPress 中看到过类似的东西，它使换行后的内容不会出现在页面上。有谁知道如何做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:01:13.903

如果您使用的是所见即所得的编辑器，例如 tinyMCE，您可以使用水平线作为分隔符。

然后，使用 php，使用分隔符的 html 代码进行分解，并且仅将数组的第一个值显示为介绍文本。

我就是这样做的，也许有更好的方法。

# python - 列表中最长单词的长度

> ID：14637696
> 
> 赞同：7
> 
> 时间：2013-02-01T00:25:54.827
> 
> 标签：python, string, performance, list, coding-style

获取最长单词长度的更pythonic方法是什么：

`len(max(words, key=len))`

或者：

`max(len(w) for w in words)`

或者是其他东西？ `words`是一个字符串列表。我发现我需要经常这样做，并且在使用几个不同的样本大小进行计时之后，第一种方法似乎始终更快，尽管在表面价值上似乎效率较低（`len`被调用两次的冗余似乎无关紧要 - 在这种形式的C代码？）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T00:30:56.853

虽然：

```
max(len(w) for w in words) 
```

确实更容易“阅读” - 你有生成器的开销。

尽管：

```
len(max(words, key=len)) 
```

可以使用内置函数优化掉键，因为`len`通常是一个非常有效的字符串操作，会更快......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T00:42:26.043

我认为两者都可以，但我认为除非速度是`max(len(w) for w in words)`最易读的一个重要考虑因素。

当我看着他们时，我花了更长的时间才弄清楚`len(max(words, key=len))`在做什么，直到我想得更多，我还是错了。除非有充分的理由不这样做，否则代码应该立即显而易见。

从其他帖子（以及我自己的测试）中可以清楚地看出，可读性较低的帖子速度更快。但这并不像他们中的任何一个都是狗慢的。除非代码在关键路径上，否则不值得担心。

最终，我认为更具可读性的是 Pythonic。

顺便说一句，这是为数不多的 Python 2 在相同任务上明显快于 Python 3 的情况之一。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T00:51:06.067

如果将生成器表达式重写为`map`调用（或者，对于 2.x，`imap`）：

```
max(map(len, words)) 
```

…它实际上比关键版本快一点，而不是慢。

python.org 64 位 3.3.0：

```
In [186]: words = ['now', 'is', 'the', 'winter', 'of', 'our', 'partyhat'] * 100
In [188]: %timeit max(len(w) for w in words)
%10000 loops, best of 3: 90.1 us per loop
In [189]: %timeit len(max(words, key=len))
10000 loops, best of 3: 57.3 us per loop
In [190]: %timeit max(map(len, words))
10000 loops, best of 3: 53.4 us per loop 
```

苹果 64 位 2.7.2：

```
In [298]: words = ['now', 'is', 'the', 'winter', 'of', 'our', 'partyhat'] * 100
In [299]: %timeit max(len(w) for w in words)
10000 loops, best of 3: 99 us per loop
In [300]: %timeit len(max(words, key=len))
10000 loops, best of 3: 64.1 us per loop
In [301]: %timeit max(map(len, words))
10000 loops, best of 3: 67 us per loop
In [303]: %timeit max(itertools.imap(len, words))
10000 loops, best of 3: 63.4 us per loop 
```

我认为它比`key`版本更 Pythonic，原因与 genexp 相同。

它是否与 genexp 版本一样 Pythonic 是有争议的。有些人爱`map`/ `filter`/ `reduce`/等；有些人讨厌他们；我个人的感觉是，当您尝试映射一个已经存在并且具有好名字的函数时（也就是说，您不需要`lambda`或`partial`向上的东西），`map`更好，但是 YMMV（特别是如果您的名字是 Guido） .

最后一点：

> len 被调用两次的冗余似乎无关紧要 - 这种形式的 C 代码中会发生更多情况吗？

想一想：你已经调用了`len`N 次。与您必须做的任何事情相比，将其称为`N+1`时间几乎不可能有所作为`N`，除非您有*少量*的*大*字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T00:28:03.683

我会说

```
len(max(x, key=len)) 
```

看起来相当不错，因为您使用内置 ( ) 的关键字参数 ( `key`) 和`max`内置 ( `len`)。所以基本上`max(x, key=len)`你几乎可以得到答案。但你的代码变体对我来说都不是特别不符合 Python 的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T00:35:34.043

仅供参考`ipython %timeit`

```
In [150]: words
Out[150]: ['now', 'is', 'the', 'winter', 'of', 'our', 'partyhat']

In [148]: %timeit max(len(w) for w in words)
100000 loops, best of 3: 1.87 us per loop

In [149]: %timeit len(max(words, key=len))
1000000 loops, best of 3: 1.35 us per loop 
```

刚刚更新了更多的文字来展示@Omnifarious 的观点/评论。

```
In [160]: words = map(string.rstrip, open('/usr/share/dict/words').readlines())

In [161]: len(words)
Out[161]: 235886

In [162]: %timeit max(len(w) for w in words)
10 loops, best of 3: 44 ms per loop

In [163]: %timeit len(max(words, key=len))
10 loops, best of 3: 25 ms per loop 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-08-30T03:28:48.123

我知道现在已经一年了，但无论如何，我想出了这个：

'''编写一个函数find_longest_word()，它接受一个单词列表并返回最长单词的长度。'''

```
a = ['mamao', 'abacate', 'pera', 'goiaba', 'uva', 'abacaxi', 'laranja', 'maca']

def find_longest_word(a):

    d = []
    for c in a:
        d.append(len(c))
        e = max(d)  #Try "min" :D
    for b in a:
        if len(b) == e:
            print "Length is %i for %s" %(len(b), b) 
```

# javascript - 用Javascript触发蓝牙？

> ID：14637697
> 
> 赞同：0
> 
> 时间：2013-02-01T00:26:02.437
> 
> 标签：javascript, bluetooth

我有一个客户，他有几个连接到 iPad 的蓝牙设备。在那个 iPad 上，我将创建一个专为 iPad 设计的网站（iPad 将在信息亭设置中）。

是否可以仅使用 javascript 通过蓝牙触发特定设备（假设您知道蓝牙 ID 或地址）？例如，将有蓝牙控制的照明，当最终用户访问特定页面时，将通过蓝牙触发特定的灯。

这可能吗？如果是这样，请提供一些这样的资源，我可以学习如何做到这一点。

注意：该网站不是一个专用的 iPad 应用程序，只是一个标准的 HTML、CSS 和 JS 网站。此外，我的网站在托管 CMS 上运行，因此*无法*使用服务器端代码。如果有什么不同，我将使用 jQuery 1.8.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:39:17.470

简短回答：无法通过 javascript 访问本机 iPad 功能.... 更广泛的回答：无法通过 Javascript 访问硬件

# odata - 它是有效的 OData URI（并且 OData ABNF 文档中是否存在错误）？

> ID：14637698
> 
> 赞同：0
> 
> 时间：2013-02-01T00:26:06.153
> 
> 标签：odata

在与我的同事的讨论中，出现了一个问题，即是否必须`eq true`在调用`substringof`OData URL 过滤器中的方法后添加：

```
http://localhost/Collection/WorkItems()?$filter=substringof('crash',Title)
http://localhost/Collection/WorkItems()?$filter=substringof('crash',Title) eq true 
```

现在我正在咨询[ABNF for OData 于 4/27/2012 修订](http://www.odata.org/media/30002/OData%20ABNF.html)。查看`filter`表达式形式，它需要一个`boolCommonExpr`：

```
filter                      =   "$filter" [ WSP ] "=" [ WSP] boolCommonExpr 
```

A`boolCommonExpr`将`boolMethodCallExpr`其列为其替代方案之一。但是`boolMethodCallExpr`ABNF 中没有符号的定义！

所以，我猜这是 ABNF 中的一个错误，并且列出的正确替代方案必须是`boolMethodExpr`，而不是`boolMethodCallExpr`：

```
boolMethodExpr              =   endsWithMethodCallExpr /
                                startsWithMethodCallExpr /
                                substringOfMethodCallExpr /                                         
                                intersectsMethodCallExpr /
                                anyMethodCallExpr /
                                allMethodCallExpr 
```

`substringof`在这种情况下，允许在 URI 中不调用方法`eq true`（以及 with `eq true`）。

我的理解正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:25:44.837

您不需要在 URL 的末尾添加“eq true”。任何返回布尔值的内置函数都应该足够好。这看起来可能只是 ABNF 中的一个错字（尤其是在未定义 boolMethodCallExpr 的情况下）。该特定文档甚至不完整，并且其中包含多个 TODO。随着 OData 的 OASIS 标准化结合在一起，应该会出现更明确的 ABNF。

# eclipse - Eclipse 丢失透视、视图和上次打开的文件

> ID：14637700
> 
> 赞同：0
> 
> 时间：2013-02-01T00:26:13.157
> 
> 标签：eclipse

我的 Eclipse 实例（新安装的 SDK 版本：4.2.1 Build id：M20120914-1800）不保存透视设置。最后打开的文件和视图在关闭后也不会保存。

有人知道如何解决吗？（目前运行Win7）

# javascript - 如何在特定时间调用 javascript 函数

> ID：14637708
> 
> 赞同：2
> 
> 时间：2013-02-01T00:26:46.480
> 
> 标签：javascript, datetime, automation

我有大约 10 个`<div>`，并且每个`<div>`都有不同的日期时间。当客户端本地时间与该时间匹配时，我想调用 java-script 函数`<div>`。

```
<div id="a" class ="help">2/3/2013 6:39:14 PM</div>
<div id="b" class ="help">2/3/2013 2:39:14 PM</div>
<div id="c" class ="help">2/4/2013 6:39:14 PM</div>
<div id="d" class ="help">12/29/2013 10:39:14 AM</div> 
```

如果客户端机器的当前日期时间与`<div>`; 调用函数说`callMe()`

现在我只有 - 一些 php 代码：
`echo "<script type='text/javascript'>putTime(".$questionData['expiry'].",".$needAnswer[$i].")</script>";` 和 javascript：
`function putTime(x,y) {`
`var theDate = new Date(x*1000); // convert time value to milliseconds`
`var dateString = theDate.toLocaleString();`
`document.getElementById(y).innerHTML = dateString;`
`}`
这就是我所拥有的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:09:04.480

作为另一种可能性，您还可以在请求动画帧上注册一个函数，该函数将根据当前时间检查每个 div 的时间。这样你就不会遇到超时等问题。可能不是最好的解决方案，而只是一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T09:24:57.363

its so simple to do

```
var now = new Date();
var millisTill10 = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 10, 0, 0, 0) -now;

if (millisTill10 < 0) 

{
     millisTill10 += 86400000; // it's after 10am, try 10am tomorrow.

}

setTimeout(function(){alert("It's 10am!")}, millisTill10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T00:46:39.247

这应该可以满足您的要求（假设您可以使用 jQuery）：

```
var timers = [];

$('div.help').each(function() {
    var localeString = $(this).text();
    var date = new Date(localeString);
    var timestamp = date.getTime();
    timers.push({
        time: timestamp,
        div: this,
    });
});

setInterval(function() {
    var now = (new Date()).getTime();
    for(var i=0; i<timers.length; i++) {
        var timer = timers[i]
        if(timer && (now >= timer.time)) {
            callMe();
            timers[i] = false;
        }
    }
}, 500);

function callMe() {
    alert('i was called');
} 
```

**编辑：**固定代码

您可以通过打开控制台并输入：

```
timers.push({
    time: (new Date()).getTime()+1000,
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T00:32:18.710

我不知道您为什么需要它，但这是一种可能的解决方案：

```
var dates = [],
    divs = document.querySelectorAll(".help");

for (var i = 0; i < divs.length; i++) {
    dates.push(new Date(divs[i].innerHTML).toString());
}

setInterval(function() {
    for (var i = 0; i < dates.length; i++) {
        if (dates[i] === new Date().toString()) {
            callMe();
            break;
        }
    }
}, 500); 
```

看起来你的日期格式适合用 解析`new Date()`，所以上面的代码应该在大多数浏览器中都能正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T00:38:14.523

尝试使用 JavaScript 计时事件在特定时间间隔内调用函数。

```
setInterval(function(){alert("Test")},5000); 
```

替代方案——

```
setTimeout() : executes a one-time-only function, postponed by a specific number of mils 
```

祝你好运，亚历克斯

# jquery - 关闭 apache 服务器时 Jquery 不起作用

> ID：14637709
> 
> 赞同：0
> 
> 时间：2013-02-01T00:26:51.627
> 
> 标签：jquery, apache

嗯，正如标题所说。

它很奇怪。如果我尝试在关闭 apache 服务器或对其进行“双击”的情况下访问 html 文件，它只是不起作用，我不知道为什么。

我认为 jquery 不需要服务器来运行。我的意思是，它只是 JS，不是吗？

难道是我使用的是谷歌代码一而不是本地版本？

# javascript - How do you make a HTML link call a java function within your servlet

> ID：14637710
> 
> 赞同：0
> 
> 时间：2013-02-01T00:26:55.113
> 
> 标签：javascript, html, jsp, hyperlink

```
public class Test extends HttpServlet {
private static final long serialVersionUID = 1L;

public Test() {
    super();
}

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    PrintWriter out = response.getWriter();

    out.println("<HTML><HEAD><TITLE>MovieDB</TITLE></HEAD>");
    out.println("<BODY><H1>MovieDB</H1>");

    out.println("<a href = '#' onclick = 'on_Click();'> Call Function </a>");

}

public void on_Click()
{
    System.out.println("HELLO");
}
} 
```

I just want the HTML Link on my page to call my java function on_Click(), what is a good way to do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:32:14.807

The `onclick` is not [Java](https://stackoverflow.com/tags/java/info). It's [JavaScript](https://stackoverflow.com/tags/javascript/info). It's a completely different language than Java. The only things which they've in common are the first 4 characters of the language name, some keywords and a some syntax. But that's it.

Just let the link point to an URL which matches the URL pattern of the servlet mapping. Imagine that you've mapped your servlet on an URL pattern of `/foo/*`, then just use

```
<a href="foo">Call function</a> 
```

This will just call the servlet's `doGet()` method.

```
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    System.out.println("Hello");
} 
```

If you want to reuse the same servlet for multiple actions, just pass some action identifier along as request parameter

```
<a href="foo?action=bar">Call function</a> 
```

with in `doGet()` of servlet

```
String action = request.getParameter("action"); // "bar" 
```

or as path info

```
<a href="foo/bar">Call function</a> 
```

with in `doGet()` of servlet

```
String action = request.getPathInfo().substring(1); // "bar" 
```

No need for weird JavaScript approaches/workarounds.

### See also:

*   [Our Servlets wiki page](https://stackoverflow.com/tags/servlets/info)

* * *

**Unrelated** to the concrete problem, HTML belongs in [JSP](https://stackoverflow.com/tags/jsp/info), not in Servlet.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:32:29.050

A servlet runs on your server, while HTML runs on the user's computer so you'll need to use javascript/ajax to send a request to your server to execute your on_Click function.

# javascript - CakePHP REST API 为 AJAX 提供 403 但不为 cURL

> ID：14637713
> 
> 赞同：2
> 
> 时间：2013-02-01T00:26:59.050
> 
> 标签：javascript, jquery, ajax, rest, cakephp

我已经使用 CakePHP 构建了一个 REST API，但遇到了以下问题。

如果我执行

```
curl -v -H 'ACCEPT: application/json' -u sam:hello http://localhost/journeys/latest.json 
```

我得到了预期的响应：

```
{"journey":{"Journey":{"id":"17","description":null,"created":"2013-01-31 23:02:54","modified":"2013-01-31 23:02:54","user_id":"3"}}} 
```

然后，我尝试将此 API 合并到我编写的一些 JavaScript 中，我可以在其中请求最新的旅程数据，然后提取 id 以供使用。

我写的Javascript如下：

```
 Server.getLatestJourney = function() {
$.ajax({
    type: 'GET',
    contentType: 'application/json',
    url: 'http://localhost/journeys/latest.json',
    dataType: "json",
    username: 'sam',
    password: 'hello',
    success: function(data, textStatus, jqXHR){
        latestJourney = data.journey.Journey.id;
        console.log('Laters journey id = ' + latestJourney);
    },
    error: function(jqXHR, textStatus, errorThrown){
        console.log('Latest Journey error: ' + textStatus + ' Error: ' + errorThrown);
    }
});
} 
```

当那段代码执行时，我在 JavaScript 控制台中收到以下错误

```
GET http://sam:hello@localhost/journeys/latest.json 403 Forbidden 91ms 
```

我完全被这个难住了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:18:20.470

删除选项`contentType: 'application/json'`，它应该可以工作 - 在我的 REST api 中这也是一个问题，从 ajax 请求中删除这一行解决了它

# java - 正则表达式不允许字符串中有 9 位数字

> ID：14637715
> 
> 赞同：0
> 
> 时间：2013-02-01T00:27:16.450
> 
> 标签：java, regex

字符串中的任何位置都不应包含 9 位数字。它可以包含 8 位或 10 位或 9 位以外的任何数字。

有效 - 12345678、1234567891、12345678
无效 - 123456789、123456789

```
Regex - "^(?!(^|.*\\D)\\d{9}(\\D|$)).*|^(?!(^|.*\\D)\\d{16}(\\D|$)).*"; 
```

不允许 10 位字符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:24:08.913

试试这个：

```
if (input.matches("^(?!(^|.*\\D)\\d{9}(\\D|$)).*")) {
    // the input does not contain a 9-digit number
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T02:02:29.507

这个正则表达式

```
/^(\D*|\d{1,8}(\D|$)|\d{10,})*$/ 
```

或在字符串中（加倍`\`）

```
/^(\\D*|\\d{1,8}(\\D|$)|\\d{10,})*$/ 
```

处理重复的序列

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T01:51:39.647

这似乎有效：

```
bsh % pp = java.util.regex.Pattern.compile(
  "(^|\\D)+(\\d{10,2147483647}|\\d{0,8})(\\D+|$)((\\d{10,2147483647}|\\d{0,8})(\\D+|$))*");

bsh % mm = pp.matcher(".1234567890 1234567890.").matches();
<true>
bsh % mm = pp.matcher(".1234567890 123456789.").matches();
<false>
bsh % mm = pp.matcher(".123456789 123456789.").matches();
<false>
bsh % mm = pp.matcher(".123456789 12345678.").matches();
<false>
bsh % mm = pp.matcher(".12345678 12345678.").matches();
<true>
bsh % mm = pp.matcher("123456789 12345678.").matches();
<false>
bsh % mm = pp.matcher("12345678 12345678.").matches();
<true>
bsh % mm = pp.matcher("12345678 123456789").matches();
<false>
bsh % mm = pp.matcher("12345678 12345678").matches();
<true> 
```

并使用问题中的字符串：

```
bsh % mm = pp.matcher("12345678, 1234567891, a 12345678").matches();
<true>
bsh % mm = pp.matcher("123456789, 123456789 a").matches();
<false> 
```

# api - 克服虚拟机上的环回设备

> ID：14637724
> 
> 赞同：2
> 
> 时间：2013-02-01T00:28:59.433
> 
> 标签：api, networking, virtualbox, loopback

由于各种限制，我发现自己处于以下情况：

我可以访问在计算机（127.0.0.1）的环回设备上启动服务的 API。这台计算机实际上运行在客户端托管的 VM 上。客户端将使用相同的 API 进行连接（当然，它将通过回送设备进行连接）。

API 旨在成为与主机和客户端在同一台机器上执行的服务 - 它本质上是一个通信层。这两个软件组件（即端点）不兼容，因此我们以这种方式配置它们：客户端在 VM 上托管服务器。

VM 是 Virtualbox，具有桥接适配器网络设置。

他们都运行Windows XP。

我如何让他们交流？

编辑：我不能对通信服务进行更改，但我可以对 VM 或主机进行任何其他必要的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:53:41.100

扩展@EJP 使用端口转发的建议， 用户[手册](http://download.virtualbox.org/virtualbox/UserManual.pdf)*第 6.3.1 节介绍了使用 NAT 配置端口转发*所需的命令。假设您`service`的来宾“VM 名称”是侦听端口 80 的 Web 服务器。您可以将主机端口 12345 转发到来宾端口 80，如下所示：

```
VBoxManage modifyvm "VM name" --natpf1 "service,tcp,,12345,,80" 
```

当您`http://127.0.0.1:12345`在主机上浏览时，访客服务器会响应。您可以使用以下方式删除设置：

```
VBoxManage modifyvm "VM name" --natpf1 delete "service" 
```

您可以使用以下内容检查设置：

```
VBoxManage showvminfo "VM name" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:17:02.677

如果可以的话，您将不得不将服务更改为不绑定到 127.0.0.1。否则你将不得不在虚拟机中安装某种代理，或者如果可以的话组织一些端口转发。

# ruby-on-rails - 使用 ruby on rails 引导静态资产

> ID：14637727
> 
> 赞同：0
> 
> 时间：2013-02-01T00:29:09.580
> 
> 标签：ruby-on-rails, twitter-bootstrap, assets

在 bootstrap.css 中有一行

```
 background-image: url("../img/glyphicons-halflings.png"); 
```

我应该用什么替换此 url 以使其与 ruby​​ on rails 一起使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:31:11.650

您应该使用[适当的 gem](https://github.com/seyhunak/twitter-bootstrap-rails)而不是自己链接 twitter bootstrap。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:35:24.640

如果您想修改您`bootstrap.css`在 Rails 中使用资产管道，您必须找到所有类型的引用并将其替换`"../img/glyphicons-halflings.png"`为：

```
url(gliphicons-halflings.png) 
```

确保您的`.png`文件位于由资产管道管理的目录中，如[本 Rails 指南](http://guides.rubyonrails.org/asset_pipeline.html)中所述。

# wpf - 在 WPF 的 Xceed Datagrid 中创建复选框

> ID：14637728
> 
> 赞同：1
> 
> 时间：2013-02-01T00:29:12.793
> 
> 标签：wpf, binding, datagrid, checkbox, xceed

我有一个将 Xceed DataGrid 用于 WPF 的应用程序。在其中我有一列有一个复选框，我希望`IsChecked`or`Checked`事件调用一个函数。问题在于我所做的一切我要么得到一个正在运行的应用程序，除了切换复选框之外什么都不做，或者我得到以下异常：

```
Failed to create a 'Checked' from the text 'CheckBoxChecked' 
```

我想做的就是以某种方式绑定复选框以在用户切换它时调用一个函数。我对 WPF 绑定框架还是有点陌生​​。我添加了在创建 DataTemplate 时使用的与此列相关的一小段代码：

```
<DataTemplate>
    <StackPanel Orientation="Horizontal">
        <CheckBox Checked="CheckBoxChecked" />
    </StackPanel>
</DataTemplate> 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:05:58.053

我可以建议您采用更 WPF 正确的方法吗？您将复选框绑定到一个属性，然后在此属性更改时做出反应：

XAML：

```
<DataTemplate>
    <StackPanel Orientation="Horizontal">
        <CheckBox IsChecked="{Binding IsSomething}" />
    </StackPanel>
</DataTemplate> 
```

在您的 DataContext 类中：

```
 private bool isSomething;
    public bool IsSomething
    {
        get { return isSomething; }
        set
        {
            isSomething = value;
            DoSomething();
        }
    } 
```

# objective-c - 在命令行从 C 源代码创建 .dylib

> ID：14637732
> 
> 赞同：3
> 
> 时间：2013-02-01T00:29:33.917
> 
> 标签：objective-c, c, macos, command-line, dylib

## 语境：

我已经下载了“折扣”的源代码，这是一个简单的 C 程序。代码在线：[http ://www.pell.portland.or.us/~orc/Code/discount/](http://www.pell.portland.or.us/~orc/Code/discount/)

## 我需要的：

我想将此代码转换为 .dylib 文件，然后我可以将其与我的 Cocoa 应用程序捆绑在一起。一旦我有了 dylib 文件，我就没事了。我正在努力解决的是如何首先创建 dylib 文件。

在你对我大喊大叫之前，是的，我已经用谷歌搜索了我的屁股。但是我找不到一个直接的解释，我需要在命令行中将这个 C 源文件集合编译成 .dylib。我遇到的一切都是令人费解的，或者谈论在 Xcode 中构建一个 dylib 项目，或者已经过时了。（我找到了一些使用 GCC 的参考资料，但我想使用 LLVM。）

### 进行安装

据我所知，运行典型的“make install”应该将一个 .dylib 文件放入 /usr/lib，但这似乎并没有发生在我身上。

## 底线：

**下载 Discount 源代码后，我需要在命令行中做什么才能在 OS X 10.8.2 上创建 .dylib 文件？谢谢你。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:01:17.447

默认情况下，该项目不会在 Mac OS X 上创建动态库。我对似乎有效的 makefile 做了一个快速补丁：

```
From a3d6793c5f291d253b8e7aa99e5534503808c325 Mon Sep 17 00:00:00 2001
From: Carl Norum <carl@norum.ca>
Date: Thu, 31 Jan 2013 16:59:24 -0800
Subject: [PATCH] Patch to generate a dynamic library.

---
 Makefile | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/Makefile b/Makefile
index 8532e70..11805dd 100644
--- a/Makefile
+++ b/Makefile
@@ -27,6 +27,7 @@ install: $(PGMS) $(DESTDIR)$(BINDIR) $(DESTDIR)$(LIBDIR) $(DESTDIR)$(INCDIR)
    /usr/bin/install -s -m 755 $(PGMS) $(DESTDIR)$(BINDIR)
    ./librarian.sh install libmarkdown VERSION $(DESTDIR)$(LIBDIR)
    /usr/bin/install -m 444 mkdio.h $(DESTDIR)$(INCDIR)
+   /usr/bin/install -m 755 $(MKDLIB).dylib $(DESTDIR)$(LIBDIR)

 install.everything: install install.samples install.man

@@ -82,7 +83,7 @@ theme:  theme.o $(MKDLIB) mkdio.h
 mkd2html:  mkd2html.o $(MKDLIB) mkdio.h
    $(CC) $(LFLAGS) -o mkd2html mkd2html.o -lmarkdown 

-markdown: main.o pgm_options.o $(MKDLIB)
+markdown: main.o pgm_options.o $(MKDLIB) $(MKDLIB).dylib
    $(CC) $(LFLAGS) -o markdown main.o pgm_options.o -lmarkdown 

 makepage:  makepage.c pgm_options.o $(MKDLIB) mkdio.h
@@ -94,6 +95,9 @@ pgm_options.o: pgm_options.c mkdio.h config.h
 main.o: main.c mkdio.h config.h
    $(CC) -I. -c main.c

+$(MKDLIB).dylib: $(OBJS)
+   $(CC) -dynamiclib -o $(MKDLIB).dylib $(OBJS)
+
 $(MKDLIB): $(OBJS)
    ./librarian.sh make $(MKDLIB) VERSION $(OBJS)

-- 
1.7.12.1 
```

您可以在运行配置脚本之后和构建之前将其应用于您的树，它应该可以解决。如果您只想要简单的部分，请运行：

```
cc -Wno-implicit-int -I. -dynamiclib -o libmarkdown.dylib mkdio.o markdown.o dumptree.o generate.o resource.o docheader.o version.o toc.o css.o xml.o Csio.o xmlpage.o basename.o emmatch.o github_flavoured.o setup.o tags.o html5.o flags.o 
```

在构建常规包后的命令行上应该为您生成动态库。然后你可以自己安装它。

# jpa - 复合键 Netbeans 不会生成实体

> ID：14637738
> 
> 赞同：0
> 
> 时间：2013-02-01T00:30:07.167
> 
> 标签：jpa, composite-primary-key

我对 Netbeans 和实体的生成有疑问。我有这张桌子：

```
CREATE TABLE companies(

company_id      INTEGER    NOT NULL AUTO_INCREMENT,

company_name    VARCHAR(200)    NOT NULL,

company_address VARCHAR (200) NOT NULL,

company_tax_id   VARCHAR (200) NOT NULL,

company_minimun_margin FLOAT NOT NULL,

company_currency VARCHAR(20) NOT     NULL, 

company_fiscal_currency VARCHAR(20) NOT NULL,

company_max_rows INTEGER , 

company_max_file_size INTEGER,

CONSTRAINT PK18 PRIMARY KEY (company_id)

)
ENGINE=InnoDB
; 
```

然后有这张表：

```
CREATE TABLE geolocation(

geolocation_id             VARCHAR(20)    NOT NULL,

geolocation_company_id             INTEGER    NOT NULL ,

geolocation_name    VARCHAR(200)    NOT NULL,

geolocation_parent          VARCHAR(20),

geolocation_child  VARCHAR(1) NOT NULL,

CONSTRAINT PK_DEM_ID PRIMARY KEY (geolocation_id,geolocation_company_id)

)
ENGINE=InnoDB
; 
```

地理位置具有复合主键。当我尝试生成实体时，我得到了这个：

```
public class Geolocation implements Serializable {
@EmbeddedId
protected jpa.GeolocationPK geolocationPK;
private static final long serialVersionUID = 1L;
@Id
@Basic(optional = false)
@NotNull
@Size(min = 1, max = 20)
@Column(name = "geolocation_id") 
```

问题是没有生成类 jpa.GeolocationPK。该类不存在。我在哪里可以创建这个类？我刚刚更新了实体，还没有更新控制器。

提前致谢。PD：对不起，如果问题不是很清楚，英语是我的第二语言。

# ios - 如何避免 XCode 在每次运行时重置 iPhone 上的位置

> ID：14637739
> 
> 赞同：6
> 
> 时间：2013-02-01T00:30:14.227
> 
> 标签：ios, xcode, geolocation, gps

每次我运行 XCode 时，我的位置都会被重置为伦敦的某个位置。在我重置设备之前它不会恢复。

我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T00:30:14.227

这花了我一两个月的时间来发现和追踪，所以我发帖是为了他人的利益。因为 Apple 客户支持无法诊断它，甚至将我的设备换成新的——这当然没有帮助。谷歌上没有这方面的内容。

我最终通过将“查找我的朋友”设置为地理围栏我的真实位置并在它发现我离开时发送消息来诊断它。当我开始在 Xcode 上运行我的应用程序时，它立即被 ping 通。

XCode 中有一个设置可以在您运行应用程序时将 GPS 设置为选定的虚拟位置。可以通过从顶部菜单中选择 Product>Scheme>Edit Scheme 找到它，然后选择左侧的“Run appname”和顶部的“Options”。您想要的是“核心位置：允许位置模拟”。

只需取消选中该框。问题解决了。

# c - 应用程序日志级别

> ID：14637741
> 
> 赞同：1
> 
> 时间：2013-02-01T00:30:54.157
> 
> 标签：c, linux

我见过很多具有不同日志级别的应用程序，您可以使用您指定的级别号启用/禁用它们。

例如，日志级别 1 具有最多的详细信息并输出大量详细信息。级别 2 的细节更少，级别 3 的细节更少，级别 4 是完全禁用日志记录。

您能否建议如何在 C 应用程序中实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:34:16.340

这一切基本上都归结为日志记录功能。它会是这样的：

```
#define LOG_ALL       0
#define LOG_DEBUG     1
#define LOG_INFO      2
#define LOG_WARN      3
#define LOG_ERROR     4
#define LOG_FATAL     5
#define LOG_NEXTFREE  6

static unsigned int threshold = LOG_WARN;

void logIt (unsigned int level, char *message) {
    if (level >= threshold)
        puts (message);
} 
```

换句话说，只有当消息的级别足以通过日志记录阈值时，日志函数才会输出消息。你用这样的东西来称呼它：

```
logIt (LOG_INFO, "process starting");
logIt (LOG_FATAL, "cannot read boot sector"); 
```

在默认阈值（警告）下，您将看到后者，但看不到前者。

您需要添加的只是一种动态修改阈值的方法，您可以影响记录的内容。

```
void getAndChangeLevel (unsigned int newLevel) {
    if (newLevel < LOG_NEXTFREE)
        threshold = newLevel;
} 
```

当然，还有各种*其他*可能需要的功能，我试图使代码保持简单以说明您询问的特定概念。

# javascript - Object.keys 迭代数组

> ID：14637745
> 
> 赞同：2
> 
> 时间：2013-02-01T00:31:16.253
> 
> 标签：javascript, arrays, object, for-loop

我目前在我的代码中使用两种迭代：

对于对象（片段 1）：

```
for (var key in obj) {
    if (obj.hasOwnProperty(key)) {
        // do stuff with key and obj[key]
    }
} 
```

对于数组（片段 2）：

```
for (var i=0, count=arr.length;i<count;i++) {
    // do stuff with i and arr[i]
} 
```

我想简化我的代码并为对象和数组使用一个函数（片段 3）：

```
var keys=Object.keys(arrorobj);
for (var i=0, count=keys.length;i<count;i++) {
    // do stuff with keys[i] and arrorobj[keys[i]]
} 
```

我知道片段 3 适用于对象，但它是否也可以像我期望的那样对数组工作，并替换片段 1 和 2？特别是，我可以确保在所有浏览器（嗯，至少支持 Object.keys 的浏览器）中，片段 3 都会尊重键顺序（从索引 0 开始）？

[编辑] 我计划将它特别用于对象的深度合并。我当前的代码很重，因为在每个级别我都有 3 个分支，具体取决于类型（数组、对象或其他）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:33:11.290

当您的数组上唯一可枚举的属性是编号的插槽（ an 的默认值`Array`）时，它将起作用，但它不能保证返回属性的顺序，因为它们被定义为按`for ( in )`顺序排列，这并不' 并不总是以数字方式迭代（取决于属性的分配方式）。

如果您分配了另一个属性，它也会被枚举（这不会发生在更标准的迭代技术中）。

`new Array(25)`对于空槽（例如），它的行为也不会完全相同，因为`for`循环会遍历这些。

通常建议对`for`数组或`forEach()`方法（或相关）使用循环。

# android - 如何使用 javaxmail android 阅读 gmail 的已发送邮件

> ID：14637748
> 
> 赞同：1
> 
> 时间：2013-02-01T00:31:31.493
> 
> 标签：android, gmail-imap, jakarta-mail

如何从 gmail 的已发送邮件文件夹中获取邮件？我可以使用从收件箱中获取邮件

```
store = imapSession.getStore("imaps");
store.connect("imap.gmail.com", user, password);
Folder folder = store.getFolder("Inbox"); 
```

我试过了，

```
Folder folder = store.getFolder("Sent");
//and
Folder folder = store.getFolder("AllMail"); 
```

但这些都不起作用，我得到了一个`FolderNotFoundException`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:33:28.390

Sent、Drafts 等的 GMail 文件夹以 tag 为前缀`[Gmail]`，因此对于 Sent Mail，它的访问方式如下：

```
Folder folder = store.getFolder("[Gmail]/Sent Mail"); 
```

链接：
[邮件客户端中的 Gmail 文件夹](http://support.google.com/mail/bin/answer.py?hl=en&answer=82367 "邮件客户端中的 Gmail 文件夹")

# msbuild - 在 TeamCity 中使用 MSBuild 部署基于固定构建的特定修订

> ID：14637749
> 
> 赞同：0
> 
> 时间：2013-02-01T00:31:37.523
> 
> 标签：msbuild, teamcity, msdeploy

**我在 TeamCity 中的设置：**

我有一个“CI 配置”运行一个单一的构建步骤，它使用从项目签入的 MSBuild 脚本。该配置有许多子目标，例如单元测试、部署到测试站点等。

我还有一个“部署配置”，它使用另一个仅执行部署的 MSBuild 脚本（使用 msdeploy）具有单一目标。这是手动触发的。

**我的问题：**

“部署配置”需要根据“CI 配置”中的最新固定构建部署修订。整个想法本质上是获得基于 CI 中最新固定构建的一键式部署功能。有谁知道如何在 MSBuild 中使用 TeamCity 做到这一点？

我猜我需要使用“快照依赖项”来获取最新的固定修订版，但我无法弄清楚如何在 MSBuild 脚本中部署该快照商店。

此外，我想指定我想在 MSBuild 脚本中执行此操作，而不是使用 TeamCity 中的“自定义构建”对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:14:01.773

好的，我自己想通了。

您需要在“工件路径”中设置一行，如 CI 配置中的“* */* => 源”。

然后在部署配置中添加一个“工件依赖项”，指向“依赖”中的 CI 配置，选择并将“获取工件从”设置为“上次固定构建”，然后指向“工件规则”，如下所示：“源=> 来源”。

最后，在我的 MSBuild 文件中，我将“/source/”添加到目标节点中的项目路径中，并进行部署。

每次部署都像沙姆一样工作。:-)

# eclipse - Eclipse：如何禁用欢迎屏幕？

> ID：14637755
> 
> 赞同：28
> 
> 时间：2013-02-01T00:32:03.310
> 
> 标签：eclipse, eclipse-juno, eclipse-oxygen

每当我启动 Eclipse 时，我都会收到一个烦人的欢迎屏幕。当我启动它时，如何让它跳过欢迎并直接进入工作台？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2016-09-07T00:52:06.370

1.  打开日食
2.  取消选中右下角的框（每次都显示）
3.  关闭欢迎屏幕

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-03T22:36:38.523

每当您第一次使用新工作区打开 eclipse 时，都会显示欢迎屏幕。关闭欢迎屏幕后，会在工作区中记录这一点，并且在使用相同工作区重新启动 eclipse 时，您将不会再次看到它，直到您使用菜单`Help/Welcome`或切换到新工作区。

请注意，您可能必须通过标题选项卡中的“x”真正关闭欢迎屏幕；不仅仅是隐藏或最小化它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-18T13:12:12.593

为 Eclipse Neon 执行以下步骤：

1.  转到 Eclipse_Home\plugins
2.  备份下面的 jar 并将它们从上面的路径中删除
    1.  org.eclipse.ui.intro.quicklinks_.jar
    2.  org.eclipse.ui.intro.universal_.jar
    3.  org.eclipse.ui.intro_.jar
3.  第三步：重启 Eclipse

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-09-10T08:45:10.687

另一种选择是在工作区中创建文件：

```
.metadata\.plugins\org.eclipse.ui.intro\introstate 
```

并插入：

```
<?xml version="1.0" encoding="UTF-8"?>
<state reopen="false"/> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-07-22T07:03:45.257

1）转到**帮助**菜单
2）点击**“欢迎”**
3）取消选中**“欢迎页面”**右下角 的“**启动时始终显示欢迎”****[![在此处输入图像描述](../Images/0356b45447d121bfac277bc2ada2fa33.png)](https://i.stack.imgur.com/cfdXS.jpg)**

 *** * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-10-09T15:19:21.953

第 1 步：转到 eclipse 主文件夹 -> 转到插件文件夹。

第 2 步：搜索 org.eclipse.ui.intro.universal 并将其从文件夹中删除。

第 3 步：现在尝试使用新工作区启动 eclipse，您会看到欢迎屏幕不再出现。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-17T07:44:54.847

1.  以管理员身份运行 Eclipse Neon。
2.  当 Eclipse 以欢迎屏幕启动时，取消选中右下角的框。
3.  使用“x”从上方关闭欢迎屏幕。
4.  关闭 Eclipse Neon
5.  重新打开 Eclipse。您将不再看到欢迎屏幕。为我工作！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-05-17T08:06:21.487

通过在空工作区中创建以下文件：

```
workspace/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.eclipse.ui.prefs 
```

并填写：

```
eclipse.preferences.version=1
showIntro=false 
```**

# verilog - 在verilog中使用参数进行连续分配？

> ID：14637756
> 
> 赞同：1
> 
> 时间：2013-02-01T00:32:04.027
> 
> 标签：verilog, parameterized

您可以在verilog中使用参数值进行赋值吗？我可以以某种方式定义参数变量的宽度吗？

前任：

```
module mymodule #(parameter type =2)
    (...
    output [(3+type)-1:0] out);
    wire [2:0] rate;
    ...
    assign out = {rate, {1'b0{type}} };
endmodule 
```

让我们说type = 2。然后我想要比特长度为 5。速率仍然是比特长度 3（假设它是 3'b100），当我分配时我希望它是 100 000。

类似地，如果 type=6。然后我想要位长为 9。速率仍然是位长 3（再次让我们说它的 3'b100），当我分配时我希望它是 100 000000。

我没有收到任何语法错误，但是当我尝试模拟它时，我得到：“错误：连接操作数“类型”的宽度不定”

你们将如何处理这样的设计问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T01:04:32.480

您有向后的重复运算符。应该

`{type{1'b0}}`， 不是`{1'b0{type}}`

我很惊讶您没有从中看到任何语法错误。

# odata - 设置 OData Provider Toolkit 响应的作者字段

> ID：14637757
> 
> 赞同：0
> 
> 时间：2013-02-01T00:32:14.683
> 
> 标签：odata, toolkit

我们正在使用[OData Provider Toolkit](http://www.odata.org/ecosystem)将自定义数据公开为 OData 提要。我们注意到作者字段始终未设置：

```
<entry>
  <id>http://localhost/sample.svc/Entity</id>
  <title type="text"/>
  <updated>2013-01-30T01:02:28Z</updated>
  <author>
    <name/>
  </author> 
```

有没有办法使用这个工具包以编程方式设置作者？我们无法找到一种方法来访问生成结果的关联 Atom 提要的 SyndicationItems。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:19:39.710

根据您与该工具包一起使用的 WCF 数据服务版本（即 System.Data.Services.DataService），您有两个选项：

1) 使用所谓的“实体属性映射”告诉系统将特定属性的值放入作者字段中。此功能自 .NET 4.0 起就已存在（并且也可通过对 3.5SP1 的更新获得）。要打开此功能，请查看**ResourceType.AddEntityPropertyMappingAttribute** API ( [http://msdn.microsoft.com/en-us/library/system.data.services.providers.resourcetype.addentitypropertymappingattribute.aspx](http://msdn.microsoft.com/en-us/library/system.data.services.providers.resourcetype.addentitypropertymappingattribute.aspx) )。

2)使用最近添加的对包装数据服务正在使用的**ODataWriter**的支持自定义正在写出的**ODataEntry的实例。**这仅在 5.1 及更高版本中可用，可在 NuGet ( [http://nuget.org/packages/Microsoft.Data.Services/](http://nuget.org/packages/Microsoft.Data.Services/) ) 中找到。要包装编写器，您需要连接到 DataService.CreateODataWriter 委托属性。您可以在此处查看如何使用它的示例：http: [//odatasamples.codeplex.com/SourceControl/changeset/view/be77d3cacb2c#WcfDataServices101/WcfDataServices101.CustomizedEntityLinks/CustomizedEntityLinksService.svc.cs](http://odatasamples.codeplex.com/SourceControl/changeset/view/be77d3cacb2c#WcfDataServices101/WcfDataServices101.CustomizedEntityLinks/CustomizedEntityLinksService.svc.cs)。进入**WriteStart**方法后，您可以使用**ODataEntry.Atom()********扩展方法来访问特定于原子的元数据，如作者、贡献者等。******

 ******希望对您有所帮助，我可以根据需要提供更准确的代码示例。******

# c# - 使用 EntityObject Generator 模板引用外部枚举类型

> ID：14637763
> 
> 赞同：0
> 
> 时间：2013-02-01T00:33:02.467
> 
> 标签：c#, entity-framework, enums, ef-database-first, entityobject

我有以下枚举：

```
namespace Common
{
    public enum VehicleType
    {
        Car=10,
        Bike=20
    }
} 
```

我在 EF 设计器中创建了一个引用枚举类型，其名称`VehicleType`引用 Common.VehicleType。edmx 在`Models`命名空间中，所以我最终得到了两个不同的枚举：

```
Common.VehicleType
Models.VehicleType 
```

要在实体对象实例上设置枚举，我需要对其进行强制转换：

```
Vehicle vehicle = new Vehicle();
vehicle.VehicleType = (Models.VehicleType)Common.VehicleType.Bike; 
```

这有几个问题：

1.  我需要使用完全限定的名称（枚举的名称必须与我收集的名称相同）。
2.  我需要到处投。
3.  我将得到一个循环引用，因为`Models`命名空间引用`Common`并且`Common`现在需要引用`Models`才能进行转换。

这是一个简化的解释。我无法更改引用或生成器模板，因为这将在一个相当大的项目中进行大量代码更改。

我猜它的生成模板搞砸了。有没有办法解决这个问题？

**编辑**

EntityObject 模板生成器生成的 VehicleType 类型的字段变为：

```
private VehicleType _VehicleType; 
```

其中 VehicleType 是 Models.VehicleType

# regex - 分页重写规则

> ID：14637766
> 
> 赞同：0
> 
> 时间：2013-02-01T00:33:26.513
> 
> 标签：regex, .htaccess, mod-rewrite, url-rewriting

我可以在 .htaccess 文件中添加什么 ReWrite 规则

```
domain.com/directory/index.php?page=$page 
```

改写成

```
domain.com/directory/2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:35:41.500

```
RewriteRule /directory/(\d+) /directory/index.php?page=$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:48:28.570

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^directory/([0-9]+)/?$  directory/index.php?page=$1     [L] 
```

静默地图

`http://domain.com/directory/PageNumber`

到：

`http://domain.com/directory/index.php?page=PageNumber`

`directory`并`index.php`假定为固定字符串。

对于永久重定向，替换`[L]`为`[R=301,L]`

# dynamics-crm-2011 - Dynamics CRM 2011 - 记录 URL 错误

> ID：14637767
> 
> 赞同：1
> 
> 时间：2013-02-01T00:33:34.840
> 
> 标签：dynamics-crm-2011

我创建了一个工作流，它将向用户发送一封包含实体 URL 的电子邮件。不知何故，它输入了错误的 URL（特别是子域是错误的）。

有谁知道是否有一个设置可以控制它以及它是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:07:31.930

据我所知，它从部署管理器中的设置中获取服务器 URL。如果在 DM 中，您将服务器 URL 指定为：

```
mycrmserver:5555 
```

这可能会导致问题。使用 FQDN 可能会产生更好的结果：

```
mycrmserver.mydomain.com:5555 
```

但显然确保您的域上有 DNS 指向内部客户端的内部 LAN IP（如果您需要 IFD，使用 mycrmserver.internal.local 样式的 FQDN 将不起作用）我不是 100% 确定这会解决它，但肯定值得一看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-20T07:43:36.417

打开部署管理器 -> 右键单击​​ Microsoft Dynamics CRM -> 属性 -> 选择 Web 地址选项卡 -> 确保 Web 应用程序服务器下指定的域名正确

[![在此处输入图像描述](../Images/c1fee4d0ef1f4a139c7f005417a81c51.png)](https://i.stack.imgur.com/sqHDX.png)

# python - 如何知道瓶子中的客户端连接状态？

> ID：14637768
> 
> 赞同：2
> 
> 时间：2013-02-01T00:33:41.470
> 
> 标签：python, bottle, server-sent-events

我正在使用瓶子框架测试服务器发送的事件网站。问题是客户端断开连接后，服务端仍然不停的发送消息，导致断管异常。瓶子里有没有办法知道连接状态？像 ASP.NET 中的 IsClientConnected 之类的东西？

# javascript - Bind() 到动态嵌入的 soundcloud 小部件

> ID：14637770
> 
> 赞同：2
> 
> 时间：2013-02-01T00:34:00.063
> 
> 标签：javascript, api, widget, soundcloud, oembed

我正在使用以下代码嵌入 soundcloud 小部件：

```
SC.oEmbed(soundcloud_url, {color: "3C9FCE"},  document.getElementById('container_id')); 
```

如何将 SC.Widget.Events.Ready 绑定到它？我看不到任何设置嵌入 iframe 的 id 或类的方法，以便我可以选择它。也不知道是什么时候加载的，这样我就可以绑定了，比如下面这个功能失调的代码：

```
var frame = document.getElementById('container_id').getElementsByTag("iframe")[0];
frame.bind(SC.Widget.Events.Ready, listnerFucnt()); 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T19:29:13.240

如果您使用 SoundCloud JavaScript SDK 的原因是能够`SC.oembed`在只有 SoundCloud 永久链接的情况下嵌入 HTML，那么您可能不应该这样做。`/resolve` 您可以改为与其中一个或`/oembed`端点交互。

不同的是，`/oembed`endpoint 不需要`client_id` 在 request 中指定，所以我们先从这种方法开始。

### 选项1

我将使用 jQuery，但想法应该很清楚：

```
var SOUNDCLOUD_URL = 'http://soundcloud.com/georgconrad/shostakovich2',
    WIDGET_OPTIONS = '&color=3C9FCE&liking=false';

jQuery
  .getJSON( 
    'http://soundcloud.com/oembed.json?url=' + SOUNDCLOUD_URL + WIDGET_OPTIONS 
  )
  .done( function ( data ) {
    var widget;
    $('body').html( data.html );
    widget = SC.Widget($('body').find('iframe')[0]);
    widget.bind('ready', function () {
      alert('widget ready');
    });
  }); 
```

此代码实时并评论 - [http://jsbin.com/ilesum/2/edit](http://jsbin.com/ilesum/2/edit)

### 选项 2

您可以做的另一件事是使用`/resolve`端点，但您必须指定`client_id`才能与之交互，而且您需要自己构建 Widget iframe HTML（虽然这还不错）：

```
var SOUNDCLOUD_URL = 'http://soundcloud.com/georgconrad/shostakovich2',
    CLIENT_ID = 'YOUR_CLIENT_ID',
    TEMPLATE = '<iframe width="100%" height="166" scrolling="no" ' +
               'frameborder="no" src="http://w.soundcloud.com/player/?url={url}{options}" '+ 
               'class="sc-widget"></iframe>';

$.getJSON(
  'http://api.soundcloud.com/resolve.json?url=' + SOUNDCLOUD_URL + 
  '&client_id=' + CLIENT_ID
).done(function ( soundData ) {
  // I am using String.prototype.supplant from Crockford
  // (if you follow example code link you'll see what I mean)
  $('body').html(TEMPLATE.supplant({
    url: soundData.uri,
    options: '&color=3C9FCE'
  }));
  widget = SC.Widget($('body').find('iframe')[0]);
  widget.bind('ready', function () {
    alert('widget ready');
  });
}); 
```

和例子一样[http://jsbin.com/oqebuk/2/edit](http://jsbin.com/oqebuk/2/edit)

请注意，您可以禁用JSBin 上的**HTML**或**输出**窗格，以便更容易阅读示例 JavaScript 代码。

# c++ - 在多核（linux）中运行进程的命令行参数是什么

> ID：14637771
> 
> 赞同：0
> 
> 时间：2013-02-01T00:34:00.673
> 
> 标签：c++, linux, multithreading, gcc, parallel-processing

我正在尝试在多个内核中运行我的程序。我的桌面有 12 个内核，希望计算机一个一个地使用 1,2,3,4,......,11,12，并想测试程序在不同数量的内核中的执行情况。我尝试在可执行文件之后使用 -t4 或 -t 4 。

```
./a.out -t4 
```

但我无法确定它是否正好使用 4。谁能帮我理解这一点或指出我正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T00:36:26.320

您的程序必须是多线程的才能使用机器的多个内核。

这意味着程序的实际代码必须了解线程并有效地使用它们。

您不能简单地要求程序在给定数量的线程上运行。

您必须使用诸如 pthread 之类的线程库来生成线程并在它们上分配工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T06:03:48.173

您应该查看 libnuma 库。

您可以以编程方式设置希望不同线程在哪些内核上运行，也可以使用命令行选项运行它。这是一些详细文档的链接：[http ://www.halobates.de/numaapi3.pdf](http://www.halobates.de/numaapi3.pdf)

# c++ - Converting Days to Weeks in C++

> ID：14637780
> 
> 赞同：0
> 
> 时间：2013-02-01T00:34:58.537
> 
> 标签：c++

I am trying to convert a total amount of X days into X amount of weeks in C++, this is what I've seen done online and is not working:

```
int weeks = ((days % 365) / 7); 
```

For example, if days = 8, then technically it is onto week 2 so int weeks should be = 2\. Similarly 15 days should output 3.

Thanks.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T00:37:28.683

Assuming `days` is an integer type, you can use:

```
int weeks = (days + 6) / 7 
```

This works because integer division truncates any fractional part.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T00:39:28.980

Integer division will truncate the result. In order to get the number of weeks, you'll need to take the `ceil` of the division. If you only want those days that represent weeks within a year, you keep the mod, else, don't.

In other words:

```
int weeks = (int)ceil(days / 7.0); 
```

[http://www.cplusplus.com/reference/cmath/ceil/](http://www.cplusplus.com/reference/cmath/ceil/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T00:37:47.657

You just add one if there are days left

```
int weeks = days / 7 + (days % 7 ? 1 : 0); 
```

# r - 使用 plyr 和 doMC 并行化的 R 代码：错误消息：do.ply(i) 中的错误：任务 1 失败 - “找不到函数“getClass””

> ID：14637789
> 
> 赞同：2
> 
> 时间：2013-02-01T00:35:55.383
> 
> 标签：r, parallel-processing, cluster-computing

我刚刚开始学习如何使用远程超级计算机来执行并行代码。[我从上](https://stackoverflow.com/questions/14553357/parallelizing-on-a-supercomputer-and-then-combining-the-parallel-results-r)一篇文章中得到了很多初步帮助，以及一位特别乐于助人和耐心的 XSEDE 人。

我只使用一个节点（同时），但每个节点都有 32 个核心。我正在使用 doMC 而不是雪，因为超级计算机的那个人正在让 Rmpi​​ 运行。目前，32 个内核对我来说应该（超过）足够了。我的脚本是这样的：

```
define a bunch of functions
load the data
call libraries
require(doMC)
require(plyr)
registerDoMC(32)

main.function <- function(data){
    *the function*
    }

results = llply(1:500, function(idx){out<-main.function(data)},.parallel=TRUE)

save(results,file="trestles_results") 
```

这在我自己的机器上运行良好（将其设置为仅运行几次并仅注册几个内核）。但是当我在集群上运行它时，输出文件显示它运行了 500 次迭代中的每一个，但我没有得到任何输出文件，并且我收到以下错误消息：

```
Error in do.ply(i) : task 1 failed - "could not find function "getClass""
Calls: llply -> %dopar% -> <Anonymous>
Execution halted
Nodes:        trestles-10-28 
```

有人知道这里发生了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-20T18:46:58.747

为了完整起见，*ply 函数有一个内置函数`.paropts`，您可以在其中指定要发送到集群节点的变量和包

```
results = llply(1:500, 
          function(idx){out<-main.function(data)}, 
          .parallel=TRUE,
          .paropts=list(.export=c('data','main.function'),
                        .packages=.packages(all.available=T)) 
```

或者您可以对 更具选择性`.packages`，具体取决于复杂`main.function`程度。我认为因为您是`main.function`从匿名函数内部调用的，所以您也需要传递`main.function`给集群。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T21:32:52.793

发生这种情况的一个原因是环境尚未导出到核心。我在这里找到了一个解决方案，包括示例代码：

[http://www.numbertheory.nl/2011/11/14/parallelization-using-plyr-loading-objects-and-packages-into-worker-nodes/](http://www.numbertheory.nl/2011/11/14/parallelization-using-plyr-loading-objects-and-packages-into-worker-nodes/)

# c# - 是否可以在 C# 的构造函数中调用属性，这样我就不必两次编写值的验证检查？

> ID：14637792
> 
> 赞同：2
> 
> 时间：2013-02-01T00:36:13.903
> 
> 标签：c#, properties, constructor

我正在学习 Java，最近我也开始学习 C#。在 Java 中，有人告诉我编写类的某些成员的 set 方法，并进行检查以进行验证，例如，如果它是一个字符串 - 字符串不为空。然后我们在构造函数中调用 set 方法，当我使用构造函数初始化类的对象时，它会验证我的数据。

所以在 C# 中有所谓的属性，它们应该与 Java 中的 set/get 方法具有相同的逻辑，我可以在属性中验证我的数据。

如何在 C# 的构造函数中调用该设置方法/设置属性，这样我就不必编写两次验证代码——一次在属性中，一次在构造函数中？

代码：类的一些简单示例

```
class Program
{
    private int someVariable;

    public Program(int someVariable)
    {
        this.someVariable = someVariable;
    }

    public int SomeVariable
    {
        get { return someVariable; }
        set
        {
            if (value > 5)
            {
                Console.WriteLine("Error");
            }
            else
            {
                someVariable = value;
            }
        }
    }
    static void Main(string[] args)
    {
        Program pr = new Program(10);
        pr.SomeVariable = 10;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T00:39:06.340

您将调用`this.SomeVariable`您的构造函数，然后该构造函数将执行`set`您的部分属性并验证该值。现在，您通过直接设置变量`someVariable`值（有时称为“支持字段”）来绕过它

通常在 C# 中，我保持支持字段和属性彼此相邻，以便更容易阅读代码，如下所示：

```
int _someVariable;
public int SomeVariable
{
    get { return _someVariable; }
    set { /* ... */ }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T00:39:42.693

您可以从构造函数中访问该属性：

```
public Program(int someVariable)
{
    SomeVariable = someVariable;
} 
```

注意：您可能不应该直接在您的设置器中写入控制台。一个更好的方法是抛出一个异常——这样你的程序的其余部分就可以对它做点什么。或者，如果传入的值超出范围，您可以设置一个默认值。

```
public int SomeVariable
{
    get { return someVariable; }
    set
    {
        if(value > 5)
            throw new InvalidOperationException("SomeVariable cannot be greater than 5.");
        someVariable = value;
    }
} 
```

或者，

```
public int SomeVariable
{
    get { return someVariable; }
    set
    {
        someVariable = value > 5 ? 5 : value;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T00:40:25.023

去做就对了。

```
public Program(int someVariable)
{
    SomeVariable = someVariable;
} 
```

# asp.net-mvc - 使用属性路由生成特定语言的 url

> ID：14637793
> 
> 赞同：1
> 
> 时间：2013-02-01T00:36:21.360
> 
> 标签：asp.net-mvc, asp.net-mvc-4, localization, routing, attributerouting

使用 mvc4 的属性路由并对此非常满意。

不过我有一个问题，我的网站支持 2 种语言，并且我已经本地化了我所有的网址。支持的语言是法语和英语。

当网站是英文时，我想显示一个链接以切换到法文，反之亦然。

使用属性路由，有没有办法为特定的文化/语言生成 url？目前，当网站是英文时，所有的 url 都是英文本地化的。我想知道是否可以用法语生成这个链接。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-01T05:12:16.607

虽然本指南是为 MVC 2 编写的，但我认为它会有所帮助..

[http://adamyan.blogspot.com/2010/02/aspnet-mvc-2-localization-complete.html](http://adamyan.blogspot.com/2010/02/aspnet-mvc-2-localization-complete.html)

> 现在我们将使用受支持的文化超链接创建简单的用户控件。将新的局部视图添加到 Views\Shared 文件夹 CultureChooserUserControl.ascx 并粘贴以下内容
> 
> ```
> <%= Html.ActionLink("English", "ChangeCulture", "Account",  
>      new { lang = "en", returnUrl = this.Request.RawUrl }, null)%>
> <%= Html.ActionLink("Русский", "ChangeCulture", "Account",  
>      new { lang = "ru", returnUrl = this.Request.RawUrl }, null)%> 
> ```
> 
> 我们刚刚创建了两个超链接，第一个用于英语，第二个用于俄语。现在是时候将这个文化选择器用户控件放置到 Site.Master 母版页了。我将把它添加到与登录功能相对应的地方，作为一个例子。

我不是本地化专家，可能会导致您走错路

# qt - 在 Windows 上使用 MinGW 编译 Poco

> ID：14637797
> 
> 赞同：7
> 
> 时间：2013-02-01T00:36:43.107
> 
> 标签：qt, mingw, poco-libraries

我需要用 MinGW 编译 poco，以便我可以在 Qt Creator 中使用它，但不知道如何使用，我已经设法在 Visual Studio 中编译 poco，但我无法在 Qt Creator 中使用这些库。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T13:25:34.663

在这种环境下：

*   MinGW (GCC 4.7.0) + MSYS
*   Poco 1.4.6（2013 年 2 月 5 日下载）

这就是我为 MinGW 和 Windows 7 配置和编译 Poco 的方式：

1.  将 Poco 解压缩到您选择的文件夹中。C:/ 对于这个例子。
2.  应用下一条路径以避免**复制签名**错误。（来自[https://github.com/pocoproject/poco/issues/57](https://github.com/pocoproject/poco/issues/57)）。

    在文件 C:\poco-1.4.6\Foundation\include\Poco\FPEnvironment_DUMMY.h

    在此方法中删除字符串**std::：**

    ```
    inline float FPEnvironmentImpl::copySignImpl(float target, float source)
    {
    #if defined(__APPLE__) || defined(POCO_ANDROID)
        return copysignf(target, source);
    #else
        return /*std::*/copysignf(target, source);
    #endif
    } 
    ```

    这里也是：

    ```
    inline double FPEnvironmentImpl::copySignImpl(double target, double source)
    {
    #if defined(__APPLE__) || defined(POCO_ANDROID)
        return copysign(target, source);
    #else
        return /*std::*/copysign(target, source);
    #endif
    } 
    ```

3.  在 C:\poco-1.4.6\build\config\MinGW 修改 MinGW 配置。（来自[http://cidebycide.blogspot.com.es/2012/06/building-poco-c-witn-mingw.html](http://cidebycide.blogspot.com.es/2012/06/building-poco-c-witn-mingw.html)）

    您应该删除**-mno-cygwin**字符串：

    ```
    SHLIB   = $(CXX) -shared -mno-cygwin -o $@ -Wl,--out-implib=$(dir $@)$(subst cyg,lib,$(basename $(notdir $@))).a 
    ```

    和

    ```
    SYSFLAGS = -mno-cygwin -D_WIN32 -DMINGW32 -DWINVER=0x500 -DPOCO_NO_FPENVIRONMENT -DPCRE_STATIC -DPOCO_THREAD_STACK_SIZE -DFoundation_Config_INCLUDED -I/usr/local/include -I/usr/include 
    ```

    如果您不需要使用密码学和 SSL，则应删除 SYSLIBS 行中的**-lssl**和**-lcrypto**选项。

4.  在没有演示、SSL、密码学和 ODBC 支持的情况下编译 Poco：

    ```
    $ ./configure --omit=NetSSL_OpenSSL,Crypto,Data/ODBC,Data/MySQL --prefix=./_INSTALL
    $ make clean
    $ make -j4 -nodemos
    $ make install 
    ```

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T04:50:59.367

使用 MinGW 构建 POCO 应该没什么大不了的，它在过去已经完成，但核心开发人员没有动力（不是我们的“痒”），也没有人抱怨拥有和维护 MinGW 构建；我们非常欢迎有人担任这个角色。有兴趣的可以联系我。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-09T20:12:58.103

补充 Cesar 的答案（在这里，为了格式化，而不是添加评论），您需要在 .pro 文件中使用类似的内容：

```
INCLUDEPATH += "<path_to_poco_include_dir>"
LIBS += -L"<path_to_poco_lib_dir>" -l<poco_lib> -l<poco_lib> 
```

例如，在我的情况下，我会有这个（用于调试版本）：

```
INCLUDEPATH += "C:/Dev/lib/poco/poco143/Debug/include"
LIBS += -L"C:/Dev/lib/poco/poco143/lib" -lPocoFoundationd -lPocoUtild 
```

然后，您可以通过为调试和发布版本创建设置来细化这一点：

```
LIB_HOME = "C:/Dev/lib/"
POCO_HOME = $${LIB_HOME}poco/poco143/

# SEE http://www.qtcentre.org/threads/23655-Does-Qt-Creator-understand-debug-release-scopes-in-pro-files
# OR http://www.qtcentre.org/threads/30430-How-to-set-pro-file-about-debug-and-release
####
CONFIG(debug, debug|release) {
CONFIG -= debug release
CONFIG += debug
}

CONFIG(release, debug|release) {
CONFIG -= debug release
CONFIG += release
}
####

debug {
POCO_DEBUG = d
POCO_PATH = $${POCO_HOME}Debug
}

release {
POCO_DEBUG =
POCO_PATH = $${POCO_HOME}Release
}

INCLUDEPATH += "$${POCO_PATH}/include"
LIBS += -L"$${POCO_PATH}/lib" -lPocoFoundation$${POCO_DEBUG} -lPocoUtil$${POCO_DEBUG} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-05-06T12:23:54.160

有一个[MSYS2 包](https://github.com/msys2/MINGW-packages/tree/master/mingw-w64-poco)提供安装当前（在撰写本文时）POCO C++ 库 1.9.0 所需的一切。

*   要安装这个包，首先需要从 msys2.org 下载并安装[MSYS2](http://www.msys2.org/)
*   使用`pacman`（他们集成了 Arch Linux 包管理器的一个端口），您可以识别您要安装的 POCO C++ 包：为`pacman -Ss poco`您提供一个包列表，其中*poco*是名称的一部分。这可能如下所示：

```
$ pacman -Ss poco
mingw32/mingw-w64-i686-poco 1.9.0-1
    POrtable COmponents C++ Libraries (mingw-w64)
mingw64/mingw-w64-x86_64-poco 1.9.0-1
    POrtable COmponents C++ Libraries (mingw-w64) 
```

*   我想安装名为的 64 位软件包`mingw64/mingw-w64-x86_64-poco`，因此使用 pacman 来安装它：

```
$ pacman -S mingw64/mingw-w64-x86_64-poco 
```

*   但是，这会安装 POCO C++ 的预构建动态版本。在我的系统上，库位于 msys2 的安装目录中

    *   `C:\msys64\mingw64\bin`（DLL 来到这里）
    *   `C:\msys64\mingw64\lib`(.a 来到这里)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-16T03:22:42.263

可能有如下错误：

> 剥离：'/Learn/POCO/poco-1.4.6p2/lib/MinGW/ia32/libPocoFoundation.dll.exe'：没有这样的文件

我们可以通过更改文件“build\rules\global”中的行来解决问题

```
STRIPCMD = $(STRIP) $@$(BINEXT) 
```

到

```
STRIPCMD = $(STRIP) $@$ 
```

# c# - 在c#中使用forloop打印字符串数组

> ID：14637803
> 
> 赞同：-3
> 
> 时间：2013-02-01T00:37:35.117
> 
> 标签：c#

下面的代码将一个名称集合分配给一个字符串，然后使用 foreach 循环在另一个变量中显示名称集合，但是它只打印第一个名称并完全忽略其他 3 个。我看不出有什么问题它虽然 oO

继承人的代码：

```
namespace ForEach
{
class Program
{
    static void Main(string[] args)
    {
        string[] names = { "Jimbo", "UYTR", "MKHH", "Adam" };

        foreach (string person in names)
        {
            Console.WriteLine("{0} ", person);
            Console.ReadLine();

        }

    }
} 
```

}

如果有人能指出我哪里出错了，我将不胜感激。我严重认为我的编译器有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:39:00.137

它并没有忽略其他三个：它只是在等待你在控制台中输入一些东西。

尝试：

```
 foreach (string person in names)
    {
        Console.WriteLine("{0} ", person);
    }
    Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T00:38:59.160

移出`Console.ReadLine();`循环。把它放在最后。

# c++ - 为什么在这种情况下不调用赋值运算符来支持复制构造函数？

> ID：14637805
> 
> 赞同：2
> 
> 时间：2013-02-01T00:37:48.050
> 
> 标签：c++, oop

从复制构造函数的维基百科页面：

```
X a = X();     

// valid given X(const X& copy_from_me) but not valid given X(X& copy_from_me)
// because the second wants a non-const X&
// to create a, the compiler first creates a temporary by invoking the default constructor
// of X, then uses the copy constructor to initialize as a copy of that temporary. 
// For some compilers both versions actually work but this behaviour should not be relied 
// upon because it's non-standard. 
```

具体部分：

> " 编译器首先通过调用 X 的默认构造函数来创建一个临时对象，然后使用复制构造函数将其初始化为该临时对象的副本。"

我的问题是（假设这是正确的）为什么会这样？从代码中，我猜编译器会在构造一个 X 后使用赋值运算符。

我猜是因为赋值发生在与初始化相同的表达式中？

另外，使用这个公式的原因是什么，而不仅仅是正常的初始化`X a;`或者你想复制`X a(b);`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T00:40:18.703

因为代码是在**构造**一个对象。这里的 = 符号是初始化，而不是分配。您只能分配给现有对象，而不能分配给正在构建的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T00:45:41.700

这只是理解 C++ 语法的问题。该语句`X a = X();`是带有初始化程序的声明语句，而*不是*赋值表达式。该语句的语法含义是声明一个`a`类型的变量`X`并从表达式中复制初始化它`X()`。这里不涉及任何分配。

# php - 需要在 GMT 服务器上安排时间 EST

> ID：14637806
> 
> 赞同：-3
> 
> 时间：2013-02-01T00:37:50.377
> 
> 标签：php, date, time

我需要将时间从 GMT 更改为 EST，这是我正在使用的代码

```
$currenttime = date(H . ":" . i); 
```

我正在使用 PHP 4。

尝试了几件事，但由于 PHP 4 位，没有任何效果，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:39:11.150

把它放在你做任何时间计算之前 `date_default_timezone_set('EST');`

你的日期格式也是错误的，这就是你的做法：`$currenttime = date("H:i");`

# javascript - 使用 Twitter 引导窗格时，Safari 中的 VideoJS 错误

> ID：14637807
> 
> 赞同：2
> 
> 时间：2013-02-01T00:38:11.280
> 
> 标签：javascript, html, twitter-bootstrap, video.js

我在我的网站上的每个窗格中都使用 Twitter Bootstrap 可选项卡窗格。每个窗格都嵌入了一个 video.js 视频。

除了最新版本的 Safari（我使用的是 Windows）之外，所有主流浏览器都可以正常工作。

Safari 有两个问题：

1.  除非您调整浏览器窗口的大小，否则不会显示 Video.js 控件。一旦你这样做了，就很好了。注意：当我将代码直接嵌入页面时，这不是问题 - 只有放入 TBS 窗格时才会出现问题。

2.  如果我在一个页面上有多个视频（在窗格中），似乎有一些限制。一旦我到达它（有时是 2/3，有时是 6），就会播放音频，但是（a）视频是“空白”/黑色或（b）视频卡在一个帧上。

非常令人沮丧:) 任何想法或解决方案表示赞赏。

示例 URL： http: [//kickstart3d.com.au/learn/category/kickstart-leadership/induction/](http://kickstart3d.com.au/learn/category/kickstart-leadership/induction/)

示例嵌入代码：

```
<div id='pane-k3d-424' class='tab-pane active'>
<div class="video-container">
    <div class="videoWrapper">
        <video id="my_video_721961889" class="video-js vjs-default-skin" poster="http://www.liveyourown.com/video/k3d-video_starthere.jpg" controls preload="auto" width="640" height="264" data-setup="{}">
            <source src="http://www.liveyourown.com/video/k3d-induction-intro.mp4" type='video/mp4' />
        </video>
    </div>
</div> 
```

# html - Outlook 2010 在签名中不包含样式标记

> ID：14637812
> 
> 赞同：10
> 
> 时间：2013-02-01T00:38:51.943
> 
> 标签：html, outlook, responsive-design, html-email, outlook-2010

我在为 Outlook 创建 HTML 签名电子邮件时遇到问题。

我在签名之前有一个样式标签，并为响应式电子邮件添加了媒体宽度。

```
<style type="text/css">
div, p, a, li, td { -webkit-text-size-adjust:none; }

table {
min-width:650px;
}

@media only screen and (max-device-width: 480px) {
td[class=hidden-phone] {
    width: 0px !important;
    display: none !important;
    overflow: hidden !important;
    float: left !important;
}
td[class=description] {
    width: 100% !important;
}

td[class=visible-phone] {
    display: block !important;
    width: auto !important;
    height: auto !important;
    overflow: visible !important;
    float:none !important;
}
table {
    min-width: auto !important;
}
}
</style>

<table width="100%" style="font-family:'arial';">
<tr>
<td colspan="4" width="100%" style="height:10px;border-bottom:2px solid #96999e;height:0px;">&nbsp;</td>
</tr>
<tr>
<td style="padding:10px;width:80px;min-width:80px;"><img src="http://urbanangles.com/fileserver/gallery/[[ID]]_original.png" /></td>
<td class="description" valign="bottom" style="padding:10px 0 10px 10px;width:170px;color:#111;min-width:170px;line-height:11px;">
    <span style="font-size:11px"><strong>[[NAME]]</strong></span><br/>
    <span style="font-size:11px;color:#007dc3;">[[TITLE]]</span><div style="margin-bottom:5px;"></div>
    <span style="font-size:9px;">A Studio</span><br/>
    <span style="font-size:9px;">10 Somewhere St, Suburb, STA&nbsp;1234</span><br/>
    <span style="font-size:9px;margin-right:10px;">D&nbsp;&nbsp;</span><span style="font-size:9px;">[[DIRECT]]</span><br/>
    <span style="font-size:9px;margin-right:10px;">P&nbsp;&nbsp;</span><span style="font-size:9px;">[[PHONE]]</span><br/>
    <span style="font-size:9px;margin-right:9px;">M&nbsp;&nbsp;</span><span style="font-size:9px;">[[MOBILE]]</span><br/>
    <span style="font-size:9px;margin-right:10px;">E&nbsp;&nbsp;</span><span style="font-size:9px;"><a href="mailto:[[EMAIL]]" style="color:#111;text-decoration:none;">[[EMAIL]]</a></span><div style="margin-bottom:5px;height:0px;"></div>
    <span style="font-size:11px"><strong><a style="color:#111;text-decoration:none;" href="http://www.examples.com">www.examples.com</a></strong></span><br/>
</td>
<td class="hidden-phone" style="width:100%;"></td>
<td class="hidden-phone" valign="bottom" style="padding:10px 10px 10px 0;width:360px;min-width:360px;"><span style="margin-right:15px;"><a href="http://www.facebook.com/urbanangles" style="margin-right:3px;"><img src="http://william.uadev.com.au/img/facebook.jpg" /></a>&nbsp;<a href="http://www.twitter.com/urban_angles"><img src="http://william.uadev.com.au/img/twitter.jpg" /></a></span>&nbsp;&nbsp;<a href="http://www.urbanangles.com"><img src="http://william.uadev.com.au/img/logo.jpg" /></a>    </td>
 </tr>
 <!--[if !mso 9]><!-->
 <tr>
<td colspan="1" width="100%" class="visible-phone" style="max-height:0;display:none;height:0;overflow:hidden;width:0;float:left">
    <span style="margin-left:10px;margin-right:25px;">
    <a href="http://www.facebook.com/examples" style="margin-right:5px;"><img src="http://william.uadev.com.au/img/facebook.jpg" /></a>
    <a href="http://www.twitter.com/examples"><img src="http://william.uadev.com.au/img/twitter.jpg" /></a></span>
</td>
<td colspan="3" width="100%" class="visible-phone" style="max-height:0;display:none;height:0;overflow:hidden;width:0;float:left">
    <a href="http://www.urbanangles.com"><img src="http://william.uadev.com.au/img/logo" style="width:80%;margin-left:8px;" /></a>
</td>
</tr>
<!--<![endif]-->
<tr><td colspan="4" width="100%" style="height:10px;border-top:2px solid #96999e;"></td>   </tr>
</table>

<p  style="font-size:11px;font-family:'arial';margin:0 0 5px 0;padding:0"><i>Please consider the environment before printing this email.</i></p>

<p style="font-size:9px;font-family:'arial';color:#999;margin:0 0 5px 0;padding:0">This email and any attachment(s) is intended only for the exclusive and confidential use of the addressee(s). If you are not the intended recipient, any use, interference with, disclosure or copying of this material is unauthorised and prohibited. If you have received this message in error, please notify the sender by return email immediately and delete the message from your computer without making any copies. [[COMPANY]] does not guarantee the integrity of any emails or attached files.</p> 
```

我在苹果邮件上一切正常。但是，outlook 看起来对我的 html 不满意。来自 Outlook 的所有电子邮件都没有样式标签，这使我的 html 在 iphone 上看起来很奇怪。

我的问题：

1.  为什么我的电子邮件中不包含样式标签？据我所知，Outlook 支持它。请参阅[此处的参考](http://www.campaignmonitor.com/css/)

2.  有什么解决方法或修复我可以做的吗？我很想在 iPhone 上使用响应式电子邮件，如果我从 Apple Mail 发送它，我知道它可以工作。

干杯，威尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:09:17.553

该`<style>`标签已从某些电子邮件客户端（例如 Gmail）中删除（也许 Outlook 也在这样做？）

相反，您应该使用内联样式。

在您引用的同一网站上，使用样式的指南：http: [//www.campaignmonitor.com/resources/will-it-work/guidelines/](http://www.campaignmonitor.com/resources/will-it-work/guidelines/)

您可以使用[http://premailer.dialect.ca/](http://premailer.dialect.ca/)将您的签名转换为具有内联样式，并且它是免费的 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:48:00.693

如果样式标签没有出现在您的电子邮件代码中，可能是因为它不在头部。不确定 Outlook 是否需要这样做，但这可能是它被剥离的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:55:26.170

您应该查看 HTML 电子邮件样板。

[http://htmlemailboilerplate.com/](http://htmlemailboilerplate.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T14:17:58.773

您应该始终对 HTML 电子邮件使用内嵌样式，因为这样可以最大限度地兼容不同的客户端。我知道它不如单独的 CSS 块好，但它就是这样。

# c# - C# 动态方法 - IL 与表达式树

> ID：14637815
> 
> 赞同：11
> 
> 时间：2013-02-01T00:39:04.333
> 
> 标签：c#, antlr, expression-trees, dsl, il

我正在使用 ANTLR 为 .NET 构建一个简单的 DSL，将字符串中的脚本转换为动态方法，我正在玩和学习很少。我的第一个想法是转换为 IL 操作码，但现在我正在阅读有关创建 DM 的表达式树。似乎我可以使用表达式树生成任何方法，就像 IL 代码一样？

谢谢！

代码：[https ://github.com/ricardoborges/NPortugol2](https://github.com/ricardoborges/NPortugol2)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T00:41:42.173

IL Code 给你更多的力量。例如，您可以使用它来发出适合 .NET CLR 的代码，但不一定是您可以用 C# 或 VB.NET 编写的代码。

但总的来说，是的，你应该能够用表达式树做任何你想做的事情，而且它们更容易让你理解。

发出 IL 代码可能会比编译表达式树快一些。我不会担心这个（过早的优化），但值得注意。请参阅[动态变量如何影响性能？](https://stackoverflow.com/questions/7478387/dynamic-and-performance/7478557#7478557)对于一些性能规格。

# java - 我的方法输出错误：java.util.InputMismatchException

> ID：14637825
> 
> 赞同：1
> 
> 时间：2013-02-01T00:39:39.177
> 
> 标签：java, runtime-error, java.util.scanner

首先，我已经说过我对这一切都是新手，所以请对我放轻松。

我的任务是创建一个名为的方法`loadLeague()`，尽管我付出了很多努力，但事实证明它非常艰难！我想知道你是否可以帮助我。任务本身与足球联赛表有关。我的方法编译没有任何问题，但随后它在 Main（或任何其他标准输出）上输出“InputMismatchException”错误。我真的把头发扯掉了（好吧，还剩下什么），我想知道我做错了什么，因为我已经阅读了所有关于 Java 的书！请各位可爱的专家看看我下面的代码，并指出我正确的方向吗？

谢谢一群人！！

PS 我只想对这个论坛说声谢谢，因为它帮助我找到了我在 IT 领域的第一份真正的工作。我很少在这里发表评论或提问，但我每天晚上都会阅读其他人提出的评论和问题，这些对我的采访很有帮助。所以非常感谢你！

```
import java.io.*;
import java.util.*;

/**  
 * Class League - An instance of this class represents the teams in a
 * football (or similar) league. It provides a class method for creating
 * a new instance of League by reading the data for the teams from a CSV
 * file.
 * 
 * @author Lewis Jones 
 * @version 1.0
 */

public class League
{
   /* instance variables */
   private String name;  // The name of the league
   private Team[] teams; // An array to hold the teams in the league

   /**
    * Constructor for objects of class League. It sets the name of the league
    * to the String object provided as the first argument and initialises teams
    * to an array of the size provided as the second argument. This constructor 
    * is private as it is intended for use only by the class method loadLeague().
    */
   private League(String aName, int size)
   {
      super();
      this.name = aName;
      this.teams = new Team[size];
   }

   /* class method */
   /**
    * This method creates a new League object by reading the required details from
    * a CSV file. The file must be organised as follows:
    *     name(String), number of teams (int)
    *     team name(String), won(int), drawn(int), lost(int), for(int), against    (int)
    *        and so on for each team
    * Having created the new League object the method should create all the Team 
    * objects (using the data in the file to set their attributes) and add them 
    * to the teams array.
    */
   public static League loadLeague()
   {
      League theLeague = null;
      String pathname = OUFileChooser.getFilename();
      File aFile = new File(pathname);
      Scanner bufferedScanner = null;

      try
      {
         String leagueName;
         int numberOfTeams;

         String teamName;
         int won;
         int drawn;
         int lost;
         int goalsFor;
         int goalsAgainst;
         Scanner lineScanner;
         String currentLine;
         bufferedScanner = new Scanner(new BufferedReader(new FileReader (aFile)));    

         while (bufferedScanner.hasNextLine())
         {
            currentLine = bufferedScanner.nextLine();
            lineScanner = new Scanner(currentLine);
            lineScanner.useDelimiter(",");

            leagueName = bufferedScanner.next();
            numberOfTeams = bufferedScanner.nextInt();

            teamName = bufferedScanner.next();
            won = lineScanner.nextInt();
            drawn = lineScanner.nextInt();
            lost = lineScanner.nextInt();
            goalsFor = lineScanner.nextInt();
            goalsAgainst = lineScanner.nextInt();

            Team aTeam = new Team(lineScanner.next());
            aTeam.setWon(lineScanner.nextInt());
            aTeam.setDrawn(lineScanner.nextInt());
            aTeam.setLost(lineScanner.nextInt());
            aTeam.setGoalsFor(lineScanner.nextInt());
            aTeam.setGoalsAgainst(lineScanner.nextInt());
            Team[] teams = new Team[numberOfTeams];
            teams[numberOfTeams] = aTeam;
            numberOfTeams++;
            theLeague = new League(leagueName, numberOfTeams);
         }
      }  
      catch (Exception anException)
      {
         System.out.println("Error: " + anException);
      }
      finally
      {
         try
         {
            bufferedScanner.close();
         }
         catch (Exception anException)
         {
            System.out.println("Error: " + anException);
         }
      }
      return theLeague;
   }

   /* instance methods */

   /**
    * Displays the league table in tabular format to the standard output
    */
   public void display()
   {
      System.out.println(this.name);
      System.out.format("%20s %2s %2s %2s %2s %2s %2s %    2s\n","","P","W","L","D","F","A","Pt");
      for (Team eachTeam : this.teams)
      {
         System.out.format("%20s %2d %2d %2d %2d %2d %2d %2d\n",
                       eachTeam.getName(), eachTeam.getPlayed(), 
                       eachTeam.getWon(), eachTeam.getDrawn(), 
                       eachTeam.getLost(),eachTeam.getGoalsFor(), 
                       eachTeam.getGoalsAgainst(), eachTeam.getPoints());        
      }
   }

   /**
    * Arrange the elements of teams in their natural order. This will only
    * work if a natural order has been defined for the class Team.
    */
   public void sort()
   {
      // to be written later...
   }
} 
```

编辑：下面是这个任务附带的示例（输入）文件。我很抱歉。昨晚我完全忘记在我的帖子中包含这个。

```
Scottish League Division 1,10
Airdrie United ,3,2,11,14,25
Clyde          ,5,7,4,21,17
Dundee         ,7,2,7,21,18
Gretna         ,10,3,3,43,20
Hamilton Acas  ,7,5,4,19,20
Livingstone    ,6,6,4,21,15
Partick Thistle,8,4,4,25,29
Queen of South ,3,3,10,11,31
Ross County    ,4,4,8,14,24
St Johnstone   ,6,6,4,26,16 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:41:19.747

我确切地知道问题出在哪里。您的输入文件格式不正确。例如，当您期待“int”时，您正在读取不同的格式，例如字符串。由于我没有您的意见，这里有一个简单的示例，向您展示该异常是如何生成的：

示例文件包含以下几行：

**Sample.txt**
1,8,6,3
1,2，***无效***,3

如您所见，将仅打印 Sample.txt 的第一行，因为第二行会生成错误。 **输出：**
1、8、6、3

```
Exception in thread "main" java.util.InputMismatchException
    at java.util.Scanner.throwFor(Scanner.java:909)
    at java.util.Scanner.next(Scanner.java:1530)
    at java.util.Scanner.nextInt(Scanner.java:2160)
    at java.util.Scanner.nextInt(Scanner.java:2119)
    at staxpro.StAXPro.main(StAXPro.java:35) 
```

```
public static void main(String[] args) {
        try {
            Scanner bufferedScanner = new Scanner(new BufferedReader(new FileReader ("Sample.txt")));
            while (bufferedScanner.hasNextLine()) {
                String currentLine = bufferedScanner.nextLine();
                Scanner lineScanner = new Scanner(currentLine);
                lineScanner.useDelimiter(",");

                int first = lineScanner.nextInt();
                int second = lineScanner.nextInt();
                // Here is where I read a string than an int value
                // on the 2nd line of the input file
                int third = lineScanner.nextInt();
                int forth = lineScanner.nextInt();

                System.out.println(first + ", " + second + ", " + third + ", " + forth);
            }
        } catch (FileNotFoundException ex) {
            System.err.println(ex.getLocalizedMessage());
        }
    } 
```

**编辑：**

快速浏览一下您的代码+您的输入文件，我发现了另一个问题：

```
teamName = bufferedScanner.next();
            won = lineScanner.nextInt();
            drawn = lineScanner.nextInt();
            lost = lineScanner.nextInt();
            goalsFor = lineScanner.nextInt();
            goalsAgainst = lineScanner.nextInt();

            Team aTeam = new Team(lineScanner.next());
            aTeam.setWon(lineScanner.nextInt());
            aTeam.setDrawn(lineScanner.nextInt());
            aTeam.setLost(lineScanner.nextInt());
            aTeam.setGoalsFor(lineScanner.nextInt());
            aTeam.setGoalsAgainst(lineScanner.nextInt()); 
```

你能发现吗？您阅读#wins、#drawns、...等并将它们存储在**won**、**drawns**、**lost**、**goalsFor**、**goalsAgainst**中，但是当您要创建 Team 对象时，您将从扫描仪中读取 NEXT 值。所以基本上，你将永远阅读每隔一行！删除所有内容，但保留此部分：

```
 Team aTeam = new Team(lineScanner.next());
        aTeam.setWon(lineScanner.nextInt());
        aTeam.setDrawn(lineScanner.nextInt());
        aTeam.setLost(lineScanner.nextInt());
        aTeam.setGoalsFor(lineScanner.nextInt());
        aTeam.setGoalsAgainst(lineScanner.nextInt()); 
```

所以基于上述，在你的输入文件中，每一行必须有： **String**，**int**，**int**，**int**，**int**，**int**
但如果你注意到，你的输入文件的第一行是：

```
Scottish League Division 1,10 
```

这是一个**String**，**int**，**int**。修复这些，你应该很高兴。这只是我的观察，并没有真正运行你的代码。所以我可能会遗漏一些东西。如果修复后仍有问题，请告诉我。

**编辑（2）：**
我修改了您的代码并进行了更正。我针对这个输入运行它：

```
Scottish League Division 1,10
Airdrie United ,3,2,11,14,25
Clyde          ,5,7,4,21,17
Dundee         ,7,2,7,21,18
Gretna         ,10,3,3,43,20
Hamilton Acas  ,7,5,4,19,20
Livingstone    ,6,6,4,21,15
Partick Thistle,8,4,4,25,29
Queen of South ,3,3,10,11,31
Ross County    ,4,4,4,14,24
St Johnstone   ,6,6,4,26,16 
```

它工作正常。让我知道是否还有其他问题。

```
import java.io.*;
import java.util.*;

/**  
 * Class League - An instance of this class represents the teams in a
 * football (or similar) league. It provides a class method for creating
 * a new instance of League by reading the data for the teams from a CSV
 * file.
 * 
 * @author Lewis Jones 
 * @version 1.0
 */

public class League
{
   /* instance variables */
   private String name;  // The name of the league
   private Team[] teams; // An array to hold the teams in the league

   /**
    * Constructor for objects of class League. It sets the name of the league
    * to the String object provided as the first argument and initialises teams
    * to an array of the size provided as the second argument. This constructor 
    * is private as it is intended for use only by the class method loadLeague().
    */
   private League(String aName, Team[] teams)
   {
      super();
      this.name = aName;
      this.teams = teams;
   }

   /* class method */
   /**
    * This method creates a new League object by reading the required details from
    * a CSV file. The file must be organised as follows:
    *     name(String), number of teams (int)
    *     team name(String), won(int), drawn(int), lost(int), for(int), against    (int)
    *        and so on for each team
    * Having created the new League object the method should create all the Team 
    * objects (using the data in the file to set their attributes) and add them 
    * to the teams array.
    */
   public static League loadLeague()
   {
      League theLeague = null;
      String pathname = OUFileChooser.getFilename();
      File aFile = new File(pathname);
      Scanner bufferedScanner = null;

      try
      {
         String leagueName;
         int numberOfTeams;

         String teamName;
         int won;
         int drawn;
         int lost;
         int goalsFor;
         int goalsAgainst;
         Scanner lineScanner;
         String currentLine;
         bufferedScanner = new Scanner(new BufferedReader(new FileReader (aFile)));    
         boolean firstLine = true;
         List<Team> teamsList = new ArrayList<Team>();
         Team[] teams = null;
         while (bufferedScanner.hasNextLine())
         {
            currentLine = bufferedScanner.nextLine();
            lineScanner = new Scanner(currentLine);
            lineScanner.useDelimiter(",");

            if (firstLine) {
                // you originally used "bufferedScanner" which actually 
                // gets the values on the next line, not the current line
                leagueName = lineScanner.next();
                numberOfTeams = lineScanner.nextInt();
                firstLine = false;
                continue;
            }

            Team aTeam = new Team(lineScanner.next());
            aTeam.setWon(lineScanner.nextInt());
            aTeam.setDrawn(lineScanner.nextInt());
            aTeam.setLost(lineScanner.nextInt());
            aTeam.setGoalsFor(lineScanner.nextInt());
            aTeam.setGoalsAgainst(lineScanner.nextInt());
            teamsList.add(aTeam);

         }
         teams = teamsList.toArray(new Team[]{});
         theLeague = new League(leagueName, teams);
      }  
      catch (Exception anException)
      {
         System.out.println("Error: " + anException);
      }
      finally
      {
         try
         {
            bufferedScanner.close();
         }
         catch (Exception anException)
         {
            System.out.println("Error: " + anException);
         }
      }
      return theLeague;
   }

   /* instance methods */

   /**
    * Displays the league table in tabular format to the standard output
    */
   public void display()
   {
      System.out.println(this.name);
      System.out.format("%20s %2s %2s %2s %2s %2s %2s %    2s\n","","P","W","L","D","F","A","Pt");
      for (Team eachTeam : this.teams)
      {
         System.out.format("%20s %2d %2d %2d %2d %2d %2d %2d\n",
                       eachTeam.getName(), eachTeam.getPlayed(), 
                       eachTeam.getWon(), eachTeam.getDrawn(), 
                       eachTeam.getLost(),eachTeam.getGoalsFor(), 
                       eachTeam.getGoalsAgainst(), eachTeam.getPoints());        
      }
   }

   /**
    * Arrange the elements of teams in their natural order. This will only
    * work if a natural order has been defined for the class Team.
    */
   public void sort()
   {
      // to be written later...
   }
} 
```

# windows - Ack 有时不会显示行号并失去着色

> ID：14637832
> 
> 赞同：2
> 
> 时间：2013-02-01T00:40:29.283
> 
> 标签：windows, command-line, ack

ack 中的奇怪（betterthangrep.com） - 有时我得到一个行号，有时没有。

在第一个示例中，我在一些 Python 文件中寻找一个简单的短语。它工作正常，并显示第 233 行。在第二个示例中，我查找第一列以“5”结尾的所有行。

```
D:\DSWProj\2012L\src> perl D:\ack-standalone.pl  "return True"  *.py
Volume5.py
233:    return True

D:\DSWProj\2012L\data\R123> perl D:\ack-standalone.pl  "5 "  NeedMoreCoffee_n5_*.data
Volume5 FooData  coffee_n5  2013-01-29 10:14
 397125 0 0 1 0
 397135 0 0 1 0 
```

这两行正是文件中标题行之后的前两行。

为什么在第二个示例中没有行号？也没有打印文件名，也没有着色。Python 示例对输出进行着色 - 行号为黄色，文件名为绿色。（令人惊讶的是，自从我上次询问以来，被告知 Windows 命令行 shell 根本无法为任何内容着色。）这是 ack 中的错误，还是 Windows 的怪癖？除了在不同文件中明显搜索不同的东西之外，我是否在这两种情况下不知不觉地做了一些不同的事情？

在 Windows 7 64 位上运行，使用两天前（2013 年 1 月 28 日）下载的 Strawberry Perl 5.16.2，以及两天前下载的 ack 独立脚本版本 1.96。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T00:47:21.450

我相信`ack`神奇地*知道`*.py`文件是 Python 源代码，并且会显示源代码文件的行号和颜色，但不会显示`*.data`. 这被认为是一项功能，而不是错误。

如果您想要一个可预测的、可组合的替代品`grep`，请尝试`grep`. ;)

* – 当然，这并不是真正的魔法；它可以在您的`.ackrc`文件中配置。运行`ack --help-types`以获取更多信息。

**编辑：**我错了！`.py`这不是因为and之间的区别`.data`；`ack pattern f1`这是因为和之间的差异`ack pattern f1 f2 ...`。在后一种情况下，`ack`将打印*哪些*文件`f1 f2 ...`包含匹配项；在前一种（单个文件）的情况下，`ack`会表现得更像`grep`.

为了欺骗`ack`即使是为单个文件也生成行号，请在行尾添加一个假文件。对于 Cygwin，你可能会做

```
perl D:\ack-standalone.pl  "5 "  NeedMoreCoffee_n5_*.data /dev/null 
```

对于 Windows，也许这仍然有效：

```
perl D:\ack-standalone.pl  "5 "  NeedMoreCoffee_n5_*.data NUL 
```

（这实际上是字母 NUL，这是 Windows 的拼写方式`/dev/null`；另请参见 CON、LPT1 等）。

# java - Android - 无法使用 R.string 访问字符串

> ID：14637834
> 
> 赞同：0
> 
> 时间：2013-02-01T00:40:31.303
> 
> 标签：java, android

我无法访问存储在 strings.xml 中的字符串并且不知道为什么。

**res/values/strings.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="FileBrowser">FileBrowser</string>
    <string name="menu_settings">Settings</string>
    <string name="up_one_level">..</string>
    <string name="current_dir">.</string>
</resources> 
```

**代码**

```
this.directoryEntries.add(getString(R.string.current_dir)); //current_dir is not being seen 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:46:40.047

通常这意味着您的某个 XML 文件中存在错误，因此它无法重建您的资源。查看 Eclipse 中的问题选项卡，您可能会看到一个 XML 问题，可能在您的任何 XML 文件中，不一定在`strings.xml`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-12T14:37:46.723

检查您是否没有错误地添加以下导入：

```
import android.R 
```

这个星期发生在我身上好几次了。
删除此行，一切都会按预期工作。

# selector - 根据源功能选择 GStreamer 元素

> ID：14637837
> 
> 赞同：0
> 
> 时间：2013-02-01T00:40:50.350
> 
> 标签：selector, gstreamer, pipeline, skip

使用 gst-launch 是否有任何方法可以根据源元素确定的功能选择 GStreamer 元素？例如，如果我有一个可以下载 MP3、M4A 或 WAV 文件的网络源元素，我是否可以根据接收到的文件类型选择将数据传输到哪个元素？在加载网络源元素之前，文件类型实际上是未知的。有关我想到的管道，请参见下面的链接图像。有任何想法吗？

[![GStreamer 元素选择器](../Images/574e00c860df3d0857cb0635eb09a74c.png)](https://i.stack.imgur.com/04uKT.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T03:42:59.890

您可以使用 decodebin2 或 uridecodebin 元素。这些元素包含自动检测功能。

[http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-base-plugins/html/gst-plugins-base-plugins-uridecodebin.html](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-base-plugins/html/gst-plugins-base-plugins-uridecodebin.html)

# jquery - 匹配 keyup 上的输入名称

> ID：14637846
> 
> 赞同：0
> 
> 时间：2013-02-01T00:42:13.003
> 
> 标签：jquery, keyup

在此函数中，我想检查焦点输入是否是特定输入，我想通过将输入名称匹配在一起来做到这一点。

类似下面的代码片段可能吗？

```
$('body').on("keyup", "input", function() {

    if( $(this) == $('input[name="title"]'))
        alert('ok');

}); 
```

当我 console.log`$(this)`它返回一个对象。我不确定如何检查对象的输入名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:44:58.440

我不确定对象比较，但您可以改用

```
if ($(this).attr('name') == 'title')
    alert('OK'); 
```

避免创建对象进行比较；）

您还可以编写更具体的过滤器来直接监听好元素：

```
$('body').on("keyup", "input[name=title]", function() {

    // do your stuff

}); 
```

# nginx - nginx 负载均衡器偶尔会失败

> ID：14637847
> 
> 赞同：1
> 
> 时间：2013-02-01T00:42:18.553
> 
> 标签：nginx, load-balancing, reverse-proxy

我们有一个新的 nginx 负载均衡器，偶尔，nginx 会抛出以下错误消息：

“抱歉，您要查找的页面目前不可用，请稍后再试。”

似乎没有任何押韵或原因 - 链接会失败，但如果我刷新，它会起作用。这是不一致的。

我还应该提到我们的 nginx 错误日志没有显示任何内容。

有任何想法吗？

# apache - 循环 mod_rewrite 并将下划线转换为破折号

> ID：14637850
> 
> 赞同：0
> 
> 时间：2013-02-01T00:42:35.460
> 
> 标签：apache, .htaccess, mod-rewrite

我们目前在 .htaccess 文件中使用以下规则：

```
# Convert URLs with underscores into hyphens (excluding any image files)
# Keep scanning the URL as long as there are two hyphens
RewriteRule       ^(/?.*[^/]*?)-([^/]*?-[^/]*)$ $1_$2 [N,QSA] 

# Replace last hyphen and do a permanent redirect (ending the rewriting operation)
RewriteRule       ^(/?.*[^/]*?)-([^/-]*)$       $1_$2 [L,QSA] 
```

但是，我们的网络托管服务商正在关闭我们的网站，并提出以下投诉：

> 在跟踪这个问题时，我们可以发现第一条规则中 N 的 rewrite FLAG 是循环的。这导致进程以无限循环的形式运行数小时并消耗服务器的资源，因为每个进程使用数百 MB 内存的生成进程。

你们中的任何一个 mod_rewrite 专家有更好的方法来做到这一点吗？

我们只是尝试将文件中的所有下划线替换为 URL 的破折号。不幸的是，我们使用的软件无法生成文件名中带有破折号的文件。

非常感激！

谢谢，道格

# java - 我如何知道是使用标准 Java 网络还是 Java RMI？

> ID：14637851
> 
> 赞同：0
> 
> 时间：2013-02-01T00:42:40.737
> 
> 标签：java, network-programming, rmi

我正在争论是否应该为我正在开发的应用程序使用 java RMI 或标准 Java 网络。

该应用程序将是一个具有心跳传感器和故障保护功能的网络系统。所以它是一个三层系统，至少有一个 DB 和 java 应用程序。

因此，如果我的数据库在一台机器上出现故障，我希望第二台机器能够“感知”这一点。

我对 Java RMI 有点困惑，是否值得学习它。

或者如果我使用标准的 Java 网络，我可以像 RMI 一样做吗？我的意思是，如果我真的很了解 Java 网络的话。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:55:43.700

如今，使用 SOAP 或 REST 设置 Web 服务非常容易。借助 REST，您可以使用 XML 或 JSON 消息，而无需真正了解它的全部内容。所有这些类型的服务都可以通过 .NET 代码或 PHP 或 Javascript 访问。（嗯......除了 .NET 和 Java 之外，SOAP 有点痛苦。//个人意见）

Spring 可以帮助您设置服务，并且客户端接口非常容易。相当接近 bean 类和业务方法的标准注释定义接口，而 Spring 完成了繁重的工作。（我说的是 Spring Web 服务，而不是 Spring Remoting，尽管这样也可以。Spring Remoting 并不比 RMI 恕我直言。）

您还可以使用 Jersey (JAX-WS) 或 Jackson (Parse JSON) 进行远程处理。bean 类的标准注释和不构建接口的东西。CXF 也会做 JAX-WS 和 JAX-RS。这些是用于构建通过远程消息进行通信的服务和客户端的 Java 标准。

或者，有用于生成远程接口两侧的 eclipse 工具。所有这些都与某个框架相关联（其中一些是 Axis-2 或 CXS）。它有点像代码生成。

您可能想稍微研究一下，看看哪一个与您看待事物的方式产生共鸣。

我知道我更喜欢所有这些而不是使用 RMI。但是我很久没有直接使用RMI了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T02:21:21.417

与 Java 中通过 Socket 类的裸 TCP/IP 支持相比，RMI 是更高级别的协议，您似乎将其称为“Java 网络”。如果您的系统唯一要做的事情就是发送心跳并且只有几个节点，那么出于简单的原因，您应该选择 RMI。由于所有参与者都是 JVM，因此不需要任何互操作和额外的库来支持它，并且由于参与者的数量有限，因此无需考虑任何花哨的东西。

# python - 如何将字典列表输出到 Excel 工作表？

> ID：14637853
> 
> 赞同：10
> 
> 时间：2013-02-01T00:42:42.393
> 
> 标签：python, excel, list, file-io, dictionary

我有一个名为“玩家”的列表，其中包含字典。它看起来像这样：

```
players = [{'dailyWinners': 3, 'dailyFreePlayed': 2, 'user': 'Player1', 'bank': 0.06},
{'dailyWinners': 3, 'dailyFreePlayed': 2, 'user': 'Player2', 'bank': 4.0},
{'dailyWinners': 1, 'dailyFree': 2, 'user': 'Player3', 'bank': 3.1},
{'dailyWinners': 3, 'dailyFree': 2, 'user': 'Player4', 'bank': 0.32}] 
```

它要长得多，但这是摘录。如何将此字典列表输出到 Excel 文件，以便按键/值整齐地组织？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-05-20T18:14:51.270

有一种方法可以将字典列表写入 Excel 工作表。首先，确保你有`XlsxWriter package`.

```
from xlsxwriter import Workbook
players = [{'dailyWinners': 3, 'dailyFree': 2, 'user': 'Player1', 'bank': 0.06},
{'dailyWinners': 3, 'dailyFree': 2, 'user': 'Player2', 'bank': 4.0},
{'dailyWinners': 1, 'dailyFree': 2, 'user': 'Player3', 'bank': 3.1},
{'dailyWinners': 3, 'dailyFree': 2, 'user': 'Player4', 'bank': 0.32}]

ordered_list=["user", "dailyWinners", "dailyFree", "bank"] # List object calls by index, but the dict object calls items randomly

wb=Workbook("New File.xlsx")
ws=wb.add_worksheet("New Sheet") # Or leave it blank. The default name is "Sheet 1"

first_row=0
for header in ordered_list:
    col=ordered_list.index(header) # We are keeping order.
    ws.write(first_row,col,header) # We have written first row which is the header of worksheet also.

row=1
for player in players:
    for _key,_value in player.items():
        col=ordered_list.index(_key)
        ws.write(row,col,_value)
    row+=1 #enter the next row
wb.close() 
```

我尝试了代码，并且成功运行。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-08-23T06:27:15.093

**使用 Pandas 的解决方案**

```
import pandas as pd

players = [{'dailyWinners': 3, 'dailyFreePlayed': 2, 'user': 'Player1', 'bank': 0.06},
{'dailyWinners': 3, 'dailyFreePlayed': 2, 'user': 'Player2', 'bank': 4.0},
{'dailyWinners': 1, 'dailyFreePlayed': 2, 'user': 'Player3', 'bank': 3.1},
{'dailyWinners': 3, 'dailyFreePlayed': 2, 'user': 'Player4', 'bank': 0.32}]

df = pd.DataFrame.from_dict(players)

print (df)

df.to_excel('players.xlsx') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T01:06:25.580

**测试.py**

```
from csv import DictWriter

players = [{'dailyWinners': 3, 'dailyFreePlayed': 2, 'user': 'Player1', 'bank': 0.06},
{'dailyWinners': 3, 'dailyFreePlayed': 2, 'user': 'Player2', 'bank': 4.0},
{'dailyWinners': 1, 'dailyFree': 2, 'user': 'Player3', 'bank': 3.1},            
{'dailyWinners': 3, 'dailyFree': 2, 'user': 'Player4', 'bank': 0.32}]

with open('spreadsheet.csv','w') as outfile:
    writer = DictWriter(outfile, ('dailyWinners','dailyFreePlayed','dailyFree','user','bank'))
    writer.writeheader()
    writer.writerows(players) 
```

跑`python test.py`

`spreadsheet.csv`然后在 Excel 中打开生成的文件。

注意：我正在运行 Linux，因此无法使用 Microsoft Excel 对其进行测试。这在 LibreOffice Calc 中有效，并提供了一个电子表格，其中键是列名，值位于相应列下。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-23T17:35:30.087

该`xlsxwriter`库非常适合创建`.xlsx`文件（最初由 Fatih1923 提到）。

* * *

以下代码段`.xlsx`从 dicts 列表生成一个文件，同时说明**顺序**和**显示的名称**：

```
import xlsxwriter

# ...

def create_xlsx_file(file_path: str, headers: dict, items: list):
    with xlsxwriter.Workbook(file_path) as workbook:
        worksheet = workbook.add_worksheet()
        worksheet.write_row(row=0, col=0, data=headers.values())
        header_keys = list(headers.keys())
        for index, item in enumerate(items):
            row = map(lambda field_id: item.get(field_id, ''), header_keys)
            worksheet.write_row(row=index + 1, col=0, data=row) 
```

用法

```
headers = {
    'bank': 'Money in Bank',
    'dailyWinners': 'Daily Winners',
    'dailyFree': 'Daily Free',
    'user': 'User',
}

players = [
    {'dailyWinners': 3, 'dailyFreePlayed': 2, 'user': 'Player1', 'bank': 0.06},
    {'dailyWinners': 3, 'dailyFreePlayed': 2, 'user': 'Player2', 'bank': 4.0},
    {'dailyWinners': 1, 'dailyFree': 2, 'user': 'Player3', 'bank': 3.1},
    {'dailyWinners': 3, 'dailyFree': 2, 'user': 'Player4', 'bank': 0.32}
]

create_xlsx_file("my xslx file.xlsx", headers, players) 
```

> 注意 - `headers`dict 代表**顺序**和**显示的名称**。如果您不使用 Python3.6+，请使用`OrderedDict`in ，因为不会保留`headers`in 的顺序`dict`

[![在此处输入图像描述](../Images/5d27ab6053a1f2823055878450ac0bfe.png)](https://i.stack.imgur.com/7WOW5.png)

# video.js - VideoJS 只自动播放一次视频

> ID：14637856
> 
> 赞同：0
> 
> 时间：2013-02-01T00:43:41.903
> 
> 标签：video.js

我们在我们网站的首页上安装了一个 VideoJS 视频播放器，每次访问首页时，它的播放方式都很烦人。

a) 我们确实希望它自动播放

b) 是否有可能只在访问者第一次访问时播放，然后当他们再次访问首页时它不播放，这意味着他们需要点击播放按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T21:16:24.543

正如布鲁诺所暗示的那样，我认为最好的解决方案是使用一些脚本和浏览器 cookie。

例如，在 PHP 中，您可以使用它来代替 <video> 标签：

```
<?php
echo("<video *your parameters*");
$visited=$_COOKIE['seenvideo'];
if ($visited===NULL) {
    setcookie('seenvideo','yes',0);
} else {
    echo(" autoplay");
}
echo (">"); ?> 
```

（根据需要替换上面的*您的参数*）然后使用您的正常源标签并在其后关闭。

# php - 重新启动 if else 构造

> ID：14637857
> 
> 赞同：-1
> 
> 时间：2013-02-01T00:43:41.993
> 
> 标签：php

我们来看看下面的代码：

```
if ($a == 1) {
    echo "this is stage 1";
} 
else if ($a == 2) {
    echo "this is stage 2";
}
else if ($a == 3) {
    $a = 1;
    // at this point I want something that restarts the if-else construct so
    // that the output will be "this is stage 1"
} 
```

我目前正在研究 if else 构造，假设我有三个阶段，if-else 构造检查我处于哪个阶段。

现在恰好第 3 阶段中的一些活动导致跳回第 1 阶段。现在我已经通过了第 1 阶段的代码，这就是为什么我想以某种方式重新启动 if-else 构造。有没有办法做到这一点？更重要的是：有没有更好的方法来做我想做的事？因为我的想法似乎不是很好的做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:48:08.360

你是对的，这是不好的做法。

你要求[`goto`](http://php.net/goto).

例子：

```
<?php
goto a;
echo 'Foo';

a:
echo 'Bar'; 
```

以上永远不会输出'Foo'

如果不确切了解您要做什么，就很难提出更好的方法，但请考虑转换。

```
switch ($a) {

 case 3:
    // Execute 3 stuff
    // No break so it'll continue to 1
 case 1:
   // Execute 1 stuff
   break // Don't go any further
 case 2:
    // 2 stuff
    break; 

} 
```

这可能也不是你想要的。

您可能只想将代码抽象为函数并在必要时多次调用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T00:48:11.943

你可以在你的 if 周围设置一个无限循环，如果你完成了就打破

```
while (1) {
    if ($a == 1) {
        echo "this is stage 1";
        break;
    } 
    else if ($a == 2) {
        echo "this is stage 2";
        break;
    }
    else if ($a == 3) {
        $a = 1;
    }
    else {
        break;
    }
} 
```

也许你想看看[维基百科 - Finite-state machine](http://en.wikipedia.org/wiki/Finite-state_machine) and this question [PHP state machine framework](https://stackoverflow.com/q/4274031/1741542)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T00:46:43.357

简短的回答是肯定的，有办法，但更好的答案是对你的第二个问题也是肯定的。

至少，放置可以从函数中的多个位置调用的代码。例如，

```
function stageOneCode() {
    //do stuff;
} 
```

等等。我会为每个阶段推荐一个功能，但是如果没有实际看到阶段中正在执行的内容，就很难提出建议。

无论如何，在您的第三阶段函数结束时，只需调用您的第一阶段函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T00:49:00.907

**循环**是您要搜索的内容：

```
// initialize $a 
$a = 1;

// the while loop will return endless
while (true);

    // if you want to break for any reason use the 
    // break statement:

    // if ($whatever) {
    //    break;
    // }

    if ($a == 1) {
        echo "this is stage 1";
    }
    else if ($a == 2) {
        echo "this is stage 2";
    }
    else if ($a == 3) {
        $a = 1;
        // continue will go back to the head 
        // of the loop (step 1) early:
        continue;
    }

    // don't forget to increment $a in every loop
    $a++;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T00:47:19.537

递归函数对此很有帮助（但如果它总是恢复为 1 可能会有点过分）

```
function echo_stage($stage) {
    if ($a == 1) {
        return "this is stage 1";
    } 
    else if ($a == 2) {
        return "this is stage 2";
    }
    return echo_stage(1);
}

echo echo_stage(5); 
```

或者：

```
switch ($number)
{
    case 2 :
        echo "this is stage 2";
        break;
    case 1:
     default:
        echo "this is stage 1"
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T00:47:19.983

使用[switch()](http://php.net/manual/en/control-structures.switch.php)。您可以有“默认”案例以及特定案例。

# c# - 在列表视图中放置一千行 24 个整数

> ID：14637863
> 
> 赞同：0
> 
> 时间：2013-02-01T00:44:20.710
> 
> 标签：c#, listview

我`ListView`在我的主要表格上放了一个。

我在里面放了 24 列

我设置`view`为`details`

我有一个这样的整数数组

```
 public static int[] myArrayOfIntegers = new int[24];
    public static bool TheArrayIsNowReady = false;
    int i;
    int j;
    int k;
    string UserSeesThis; 
```

现在请我请求帮助。ListView 有 151 个属性和 233 个方法。有人可以帮我理解如何将我的 24 个整数放在这个列表视图中供用户查看吗？

```
 if (TheArrayIsNowReady)
        {
            for (i = 0; i < 24; i++)
            {
                UserSeesThis = myArrayOfIntegers[i].ToString();
                listView1._____what___do___I___put___here___[i] = UserSeesThis;
            }
        } 
```

完成一行后，我将不得不在列表框中再添加 500 行，并让用户滚动浏览它们。（如果重要的话，我们正在寻找虚假数字）

在我梦寐以求的应用程序中，我会让用户向后滚动五六千行。

用户要进行测试，一个外部盒子将向 PC 发送 500 组 24 个号码。我想把它们放在屏幕上供用户查看。我希望能够处理同样的五到十次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:53:55.530

1）创建一个listviewitem，`ListViewItem item = new ListviewItem("firstvalue");`

2）为每一列创建子项，`item.SubItems.add("value");`

3）将项目添加到列表中，`listView1.Items.Add(item);`

```
 public static int[] myArrayOfIntegers = new int[24];
    public static bool TheArrayIsNowReady = false;
    int i, j, k;
    string UserSeesThis = "?";
    ListViewItem item;

    private void Form1_Load(object sender, EventArgs e)
    {
        TheArrayIsNowReady = true;
        if (TheArrayIsNowReady)
        {
            for (i = 0; i < 24; i++)
            {
                myArrayOfIntegers[i] = i;
                if (i == 0) { item = new ListViewItem(myArrayOfIntegers[0].ToString()); }
                item.SubItems.Add(myArrayOfIntegers[i].ToString());
                UserSeesThis = "?";
            }
            listView1.Items.Add(item);
        }

    } 
```

# javascript - Javascript 代码在 FF 中有效，但在 IE 中无效

> ID：14637864
> 
> 赞同：0
> 
> 时间：2013-02-01T00:44:23.403
> 
> 标签：javascript, ajax, internet-explorer, firefox, prototypejs

该代码在 Firefox 中运行良好，但在 IE 中无法运行。我做了很多研究，但仍然找不到解决方案。

此函数从 Coldfusion cfc 文件上的按钮调用，以允许用户手动更新报告状态。我可以在 FF 中完全得到我想要的东西，但它在 IE 中不起作用。我添加了警报消息来调试问题。我可以得到“Review Status 1”，但不能得到“Review Status 2”。错误形式 IE 是“对象不支持此属性或方法。”。

```
function updateReviewStatus(rowNum) {    
      alert ("Review Status 1");
      var strlen= $("locFund_"+rowNum).innerHTML.split("-")[0].trim().length;
      alert("Review status 2"); 

        $("cerStatus_"+rowNum).update("Review Recommended");
         $("cerStatus_"+rowNum).style.color="green";                    
        $("cerStatus_Bn_"+rowNum).hide();   

        new Ajax.Request("?method=updateUIReviewDB",
            {
            parameters: {   
                     FiscalYear:        $("fyfp_"+rowNum).innerHTML.substr(0,4),
                    FiscalPeriod    :   $("fyfp_"+rowNum).innerHTML.substr(4,2),        
                    PIUniversalID   :   "#JSStringFormat(Arguments.PIUniversalID)#",
                    OPLocCode       :   $("locFund_"+rowNum).innerHTML.split("-")[0].trim().substr(strlen-1,1),
                    OPFund          :   $("locFund_"+rowNum).innerHTML.split("-")[1].trim()
                },
                method: "post"
            }); 

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:06:49.647

```
var strlen= $("locFund_"+rowNum).innerHTML.split("-")[0].trim().length; 
```

IE实际上有`trim()`字符串？尝试

```
var strlen= $("locFund_"+rowNum).innerHTML.split("-")[0].strip().length; 
```

# git - 如何从 Netbeans 重命名 Git 修订文件

> ID：14637865
> 
> 赞同：2
> 
> 时间：2013-02-01T00:44:37.503
> 
> 标签：git, netbeans

使用 Netbeans 7.2，如何从 Netbeans IDE 重命名（重构->重命名）类/文件，以便将其作为文件重命名/移动提交，而不是“添加”文件（实际上删除的文件将被重新拉回下一个拉）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T03:52:25.430

回答我自己的问题，这实际上是由于我的使用不当，但仍可能对其他人有所帮助......

首先： `git mv`用于移动/重命名文件实际上只对文件执行`rm`然后`add`您仍然可以通过执行[上一个问题](https://stackoverflow.com/questions/2314652/is-it-possible-to-move-rename-files-in-git-and-maintain-their-history)`git log --follow`中的解释来维护文件的修订历史记录

第二：当使用带有 git 的 Netbeans 时，重命名（使用 Refactor->Rename）文件将执行适当的 git 命令，但请确保从项目文件夹或源文件夹（在项目/文件树中右键单击）进行提交包含新旧文件/位置，以便您的提交包含相关文件的`remove`和`add/rename`操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-29T07:28:14.707

我知道这是一个旧线程，但只是为了强调 xblitx 答案并在将来帮助其他人，重构/重命名之后右键单击操作包 - > Git - > 显示更改你应该看到所有操作（删除和重命名/Modified) 提交所有这些。

# c# - 使用 IComparable 对对象进行排序

> ID：14637869
> 
> 赞同：1
> 
> 时间：2013-02-01T00:45:03.090
> 
> 标签：c#, list, icomparable

我正在尝试`IComparable`在我的自定义对象中实现接口，以便`List.Sort()`可以按字母顺序对它们进行排序。

我的对象有一个称为`_name`字符串类型的字段，我希望它以此为基础进行排序。这是我实现的方法：

```
 public int CompareTo(object obj)
    {
        //Int reference table:
        //1 or greater means the current instance occurs after obj
        //0 means both elements occur in the same position
        //-1 or less means the current instance occurs before obj

        if (obj == null)
            return 1;

        Upgrade otherUpgrade = obj as Upgrade;

        if (otherUpgrade != null)
            return _name.CompareTo(otherUpgrade.Name);
        else
            throw new ArgumentException("Passed object is not an Upgrade.");
    } 
```

不确定我是否做错了什么，或者这只是字符串的`CompareTo`工作方式，但基本上我的 List 是这样排序的：

*   测试升级
*   测试升级 10
*   测试升级 11
*   测试升级 12
*   测试升级 13
*   测试升级 14
*   测试升级 15
*   测试升级 2
*   测试升级 3
*   测试升级 4
*   测试升级 5

我希望它们像这样排序：

*   测试升级
*   测试升级 2
*   测试升级 3
*   ...ETC

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T00:57:54.653

你想要“自然顺序”——熟悉英语惯例的人会选择的排序规则——而不是你所拥有的“词典”排序规则：为每个字母分配一个严格的顺序，然后依次按每个字母排序。

Jeff 有一篇关于这里的来龙去脉的好文章，其中包含尝试解决问题的不同算法的链接：

[http://www.codinghorror.com/blog/2007/12/sorting-for-humans-natural-sort-order.html](http://www.codinghorror.com/blog/2007/12/sorting-for-humans-natural-sort-order.html)

Raymond 在这里讨论了 Windows 是如何处理它的：

[http://technet.microsoft.com/en-us/magazine/hh475812.aspx](http://technet.microsoft.com/en-us/magazine/hh475812.aspx)

基本上问题是：**自然顺序排序需要解决一个人工智能问题**；您正在尝试模仿人类会做什么，这可能会非常棘手。祝你好运！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T00:51:11.013

字符串按字典顺序排序。您必须将所有数字格式化为具有相同长度（例如：Test Upgrade 02）或在比较器中解析数字并将其合并到比较逻辑中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T00:51:15.027

发生这种情况的原因是您正在进行字符串比较，它没有明确的数字知识。它按每个字符的相应字符代码对每个字符串进行排序。

要获得您想要的效果需要更多的工作。请参阅此问题：[对可能包含数字的字符串进行排序](https://stackoverflow.com/questions/104599/sort-on-a-string-that-may-contain-a-number)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T00:58:46.143

## [字母数字排序](http://www.dotnetperls.com/alphanumeric-sorting)

```
public class AlphanumComparatorFast : IComparer
{
    public int Compare(object x, object y)
    {
    string s1 = x as string;
    if (s1 == null)
    {
        return 0;
    }
    string s2 = y as string;
    if (s2 == null)
    {
        return 0;
    }

    int len1 = s1.Length;
    int len2 = s2.Length;
    int marker1 = 0;
    int marker2 = 0;

    // Walk through two the strings with two markers.
    while (marker1 < len1 && marker2 < len2)
    {
        char ch1 = s1[marker1];
        char ch2 = s2[marker2];

        // Some buffers we can build up characters in for each chunk.
        char[] space1 = new char[len1];
        int loc1 = 0;
        char[] space2 = new char[len2];
        int loc2 = 0;

        // Walk through all following characters that are digits or
        // characters in BOTH strings starting at the appropriate marker.
        // Collect char arrays.
        do
        {
        space1[loc1++] = ch1;
        marker1++;

        if (marker1 < len1)
        {
            ch1 = s1[marker1];
        }
        else
        {
            break;
        }
        } while (char.IsDigit(ch1) == char.IsDigit(space1[0]));

        do
        {
        space2[loc2++] = ch2;
        marker2++;

        if (marker2 < len2)
        {
            ch2 = s2[marker2];
        }
        else
        {
            break;
        }
        } while (char.IsDigit(ch2) == char.IsDigit(space2[0]));

        // If we have collected numbers, compare them numerically.
        // Otherwise, if we have strings, compare them alphabetically.
        string str1 = new string(space1);
        string str2 = new string(space2);

        int result;

        if (char.IsDigit(space1[0]) && char.IsDigit(space2[0]))
        {
        int thisNumericChunk = int.Parse(str1);
        int thatNumericChunk = int.Parse(str2);
        result = thisNumericChunk.CompareTo(thatNumericChunk);
        }
        else
        {
        result = str1.CompareTo(str2);
        }

        if (result != 0)
        {
        return result;
        }
    }
    return len1 - len2;
    }
} 
```

用法 ：

```
using System;
using System.Collections;

class Program
{
    static void Main()
    {
    string[] highways = new string[]
    {
        "100F",
        "50F",
        "SR100",
        "SR9"
    };
    //
    // We want to sort a string array called highways in an
    // alphanumeric way. Call the static Array.Sort method.
    //
    Array.Sort(highways, new AlphanumComparatorFast());
    //
    // Display the results
    //
    foreach (string h in highways)
    {
        Console.WriteLine(h);
    }
    }
} 
```

输出

> 50F
> 100F
> SR9
> SR100

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T13:13:24.953

谢谢大家的回复。我做了我自己的方法，它似乎工作正常。它不适用于所有情况，但适用于我的场景。这是任何有兴趣的人的代码：

```
 /// <summary>
    /// Compares the upgrade to another upgrade
    /// </summary>
    /// <param name="obj"></param>
    /// <returns></returns>
    public int CompareTo(object obj)
    {
        //Int reference table:
        //1 or greater means the current instance occurs after obj
        //0 means both elements occur in the same position
        //-1 or less means the current instance occurs before obj

        if (obj == null)
            return 1;

        Upgrade otherUpgrade = obj as Upgrade;

        if (otherUpgrade != null)
        {
            //Split strings into arrays
            string[] splitStringOne = _name.Split(new char[] { ' ' });
            string[] splitStringTwo = otherUpgrade.Name.Split(new char[] { ' ' });

            //Will hold checks to see which comparer will be used
            bool sameWords = false, sameLength = false, bothInt = false;

            //Will hold the last part of the string if it is an int
            int intOne = 0, intTwo = 0;

            //Check if they have the same length
            sameLength = (splitStringOne.Length == splitStringTwo.Length);

            if (sameLength)
            {
                //Check to see if they both end in an int
                bothInt = (int.TryParse(splitStringOne[splitStringOne.Length - 1], out intOne) && int.TryParse(splitStringTwo[splitStringTwo.Length - 1], out intTwo));

                if (bothInt)
                {
                    //Check to see if the previous parts of the string are equal
                    for (int i = 0; i < splitStringOne.Length - 2; i++)
                    {
                        sameWords = (splitStringOne[i].ToLower().Equals(splitStringTwo[i].ToLower()));

                        if (!sameWords)
                            break;
                    }
                }
            }

            //If all criteria is met, use the customk comparer
            if (sameWords && sameLength && bothInt)
            {
                if (intOne < intTwo)
                    return -1;
                else if (intOne > intTwo)
                    return 1;
                else //Both equal
                    return 0;
            }
            //Else use the default string comparer
            else
                return _name.CompareTo(otherUpgrade.Name);            
        }
        else
            throw new ArgumentException("Passed object is not an Upgrade.");
    } 
```

将适用于使用“”字符隔开的字符串，如下所示：

测试数据：

*   你好 11
*   你好 2
*   你好 13

结果

*   你好 2
*   你好 11
*   你好 13

不适用于诸如`Hello11`和之类的数据，`Hello2`因为它无法拆分它们。不区分大小写。

# javascript - 从主页更改元素

> ID：14637874
> 
> 赞同：3
> 
> 时间：2013-02-01T00:45:43.477
> 
> 标签：javascript, jquery, html, css, dom

在我的[https://getsatisfaction.com/gsfnmichelle/products](https://getsatisfaction.com/gsfnmichelle/products)页面上，有一条面包屑痕迹显示“产品”。我正在尝试将其更改为“类别”。我可以在检查器中执行此操作，但是当我将代码放入自定义脚本（这只是我正在使用的平台上的主页 /gsfnmichelle）中时，它不起作用。

即使我能够获得正确的元素 (jQuery('.crumb_link span');) 并使用 (jQuery('.crumb_link span').text('Categories');) 更改它，我还是无法弄清楚当它位于主页面 (/gsfnmichelle) 之外的另一个页面 (/products) 中时如何更改它，因为它是我们可以插入自定义代码的唯一位置。

我认为这样的事情会检查页面并更改该元素，但它不起作用：

```
jQuery(document).ready(function () {
    if (window.location.pathname =="/gsfnmichelle/products") {
        jQuery('.crumb_link span').text('Categories');}
}; 
```

然后我尝试使用 if 语句来检查正确的元素，但这也不起作用：

```
jQuery(document).ready(function () {
    if (jQuery('.crumb_link span').text =='Products') { 
        jQuery('.crumb_link span').text('Categories');}
}; 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T00:49:09.443

您可能想使用`if (jQuery('.crumb_link span').text() == "Products")`或`jQuery('.crumb_link span:contains(Products)').text('Categories')`。

你目前的状况永远不会是真的。

# javascript - 在给定时间间隔内调整图像大小的 Web 技术

> ID：14637875
> 
> 赞同：0
> 
> 时间：2013-02-01T00:45:55.693
> 
> 标签：javascript, image, html

有没有一种技术可以在给定的时间间隔内调整图像的大小？

我想要做的是有一个图像，当鼠标滑过它时，它应该调整图像的大小使其变大。我能找到的只是简单的翻转脚本，可以立即调整图像大小。我想在大约一秒钟的时间内完成。

而且它必须不能滞后和破坏视觉体验。如果可能的话，我正在寻找一种使用 javascript、jQuery 或 HTML5 的方法；其他建议表示赞赏，但没有闪光。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T00:55:15.413

使用 CSS3 过渡非常简单：

```
.myImg
{
    width: 200px;
    transition-duration: 1s;
    -webkit-transition-duration: 1s;
}
.myImg:hover
{
    width: 300px;
} 
```

**演示：** [jsfiddle.net/yyDd4](http://jsfiddle.net/yyDd4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:52:20.170

您可以通过这种方式在 jQuery 中执行此操作。

```
var factor = 2;

$('#foo').mouseover(function() {
    $(this).animate({
        top: '-=' + $(this).height() / factor,
        left: '-=' + $(this).width() / factor,
        width: $(this).width() * factor
    });
}); 
```

其他技术在[这里](https://stackoverflow.com/questions/5870655/image-resizing-with-jquery-animate)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T02:04:12.260

您可以在纯 javascript 中执行此操作，尽管动画总是非常复杂，尤其是如果您希望图像在鼠标移开后缩小。制作一个对象来存储状态可能是最好的解决方案，而且适应性也很强（其他图像，其他类型的动画）。

[http://jsfiddle.net/VceD9/6/](http://jsfiddle.net/VceD9/6/)

```
new GrowingImage('myImage', 2, 1000);

function GrowingImage(id, factor, duration) {
    var el = document.getElementById(id),
        originalWidth = el.offsetWidth,
        originalHeight = el.offsetHeight,
        timer, 
        stage = 0,
        frameRate = 17,
        maxStage = duration / frameRate;
    el.onmouseover = function () {
        animate(1);
    };
    el.onmouseout = function () {
        animate(-1);
    };
    function animate(direction) {
        clearInterval(timer);
        timer = setInterval(function() {
            stage += direction;
            if (stage <= 0) {
                stage = 0;
                clearInterval(timer);
            } else if (stage >= maxStage) {
                stage = maxStage;
                clearInterval(timer);
            }
            var scale = 1 + (factor - 1) * stage / maxStage;
            el.style.width = originalWidth * scale + 'px';
            el.style.height = originalHeight * scale + 'px';
        }, frameRate);
    }
} 
```

如果*确切的*时间对您很重要，您可能需要调整它，以便跟踪当前动画运行的时间量。

# r - 循环 dfs 的命名列表，在 df 的列上测试条件，如果为 true，则返回列表元素的名称

> ID：14637876
> 
> 赞同：0
> 
> 时间：2013-02-01T00:45:59.953
> 
> 标签：r, list, loops, lapply, named

我有一个命名的 data.frame 对象列表（`training_data`）。每个 data.frame 对象都将基于“x”列进行测试，如果测试通过，则应该返回该 data.frame 对象的名称。

在下面的情况下，应该返回“a”和“b”：

```
df <- data.frame(x=1:10, y=1:10)
df1 <- data.frame(x=11:20, y=11:20)
training_data <- list(df, df, df1, df1)
names(training_data) <- c("a", "b", "c", "d")

pos <- lapply(training_data, function(data) {
                                 if(data$x==1)
                                    ["return the name of the data.frame object in hand"]
                              }) 
```

我的问题是如何准确地确定在 lapply 的任何迭代中当前正在处理的对象的名称以及如何返回该名称以使其进入“pos”列表。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:51:08.363

无需在`lapply`此处使用，您可以访问您的列表，例如：

```
training_data[['pos']] 
```

这将使您可以访问名为 'pos' 或 posxx 的 data.frame ...

**OP澄清后**编辑****

 **我在列表名称中使用 lapply ，我和我使用与上面相同的访问主列表的模式

```
pos <- lapply(names(training_data), function(data) {
  if(training_data[[data]]$x==1)        ## here your condition is not correct
    data

})

  [[1]]
[1] "a"

[[2]]
[1] "b"

[[3]]
NULL

[[4]]
NULL 
```

您可以使用类似的方法删除 NULL 元素

```
unlist(pos)
[1] "a" "b" 
```

但我认为如果你使用`sapply`返回命名列表的 ，你会在这里得到更好的输出。**

# matlab - 在 MATLAB 中使用 ode23：端点未给出值

> ID：14637878
> 
> 赞同：0
> 
> 时间：2013-02-01T00:46:18.213
> 
> 标签：matlab, differential-equations

我正在尝试在 MATLAB 中使用 ode23 求解微分方程，但在给定的问题中，给定的值与端点不同。例如：y'+y=2, y(0)=0, t on [-2,10]。ode23 需要 y0，但在这种情况下，我需要 y(0)=0 而不是 y(-2)=0。如何更改 ode23 的参数，以便它仍然告诉我区间 [-2,10] 上的值以及 y(0)=0 的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:00:09.197

您可以拆分问题并解决

```
 " y'(t) = f(t,y(t)) on (0,10] , y(0) = 0 "    (a) 
```

和

```
 " y'(t) = f(t,y(t)) on [-2,0) , y(0) = 0 , "    (b) 
```

其中 (a) 直接适合 ode23，而 (b) 必须通过变量变换重写`t := -t`以给出

```
 " y'(t) = -f(t,y(t)) on (0,2] , y(0) = 0 . " 
```

由于 ode23 基于单步法，分割积分区间的方法是合法的。

# javascript - JqPlot 图形未正确显示

> ID：14637883
> 
> 赞同：0
> 
> 时间：2013-02-01T00:46:49.633
> 
> 标签：javascript, graph, line, jqplot

我正在使用 JqPlot，但我的图表上的数据没有显示。我可以帮忙修复这个图表吗？

这是我的代码：

```
plot0 = $.jqplot('totalTakings', [line0,line1,line2,line3,line4,line5,line6,line7], {
            legend:{show:false}, 
            title:'<b>Total Takings</b>',
            seriesDefaults:{pointLabels:{show:false}},
            grid: {background:'#f8f8f8', gridLineColor:'#dbdbdb',borderWidth: 0,shadowDepth: 0},
            axes:{
                yaxis: {  autoscale:true, tickOptions:{formatString:'$%.0f'},label: 'NZ$', min:0},
                xaxis:{ label: 'Months', renderer:$.jqplot.DateAxisRenderer, tickInterval:'1 month',tickOptions:{formatString:'%b %#d, %Y'}  }
            },
            seriesColors: [ "#329dd5", "#0d8e17", "#f47320", "#7678ab", "#ecd77e", "#84b586","#bc8b7c", "#015253"],
            highlighter: { tooltipLocation: 'n',tooltipAxes: 'both',tooltipSeparator: ' - ',tooltipOffset: 10,sizeAdjust: 8,tooltipFadeSpeed:'slow'   }             
        });         
        plot0.series[0].show = false;       
        plot0.redraw(); 
    //toggles graph series

        $(".daycheck").click(function(){                
             $(".daycheck").each( 

                function(index) { 
                    //alert(index);
                    if ($(this).is(':checked')) {

                        plot0.series[index].show = true;                                                        
                    } else {
                        //alert(index+'unchecked');
                        plot0.series[index].show = false;
                    }       
                    plot0.replot(); 
              });
        }); 
```

以下是这些行的一些示例数据：

```
line0=[["2012-10-07",36301],["2012-10-14",42640],["2012-10-21",40977],
       ["2012-10-28",29415],["2012-11-04",41362],["2012-11-11",37982],
       ["2012-11-18",37237],["2012-11-25",40290],["2012-12-02",37203],
       ["2012-12-09",46519],["2012-12-16",10280]];

line1=[["2012-10-01",2253],["2012-10-08",3466],["2012-10-15",2657],
       ["2012-10-22",4267],["2012-10-29",2628],["2012-11-05",1815],
       ["2012-11-12",3091],["2012-11-19",2291],["2012-11-26",2672],
       ["2012-12-03",4273],["2012-12-10",3321]];

line2=[["2012-10-02",4784],["2012-10-09",5088],["2012-10-16",4544],
       ["2012-10-23",3311],["2012-10-30",4309],["2012-11-06",7498],
       ["2012-11-13",3986],["2012-11-20",5137],["2012-11-27",5792],
       ["2012-12-04",7247],["2012-12-11",6959]];

line3=[["2012-10-03",5121],["2012-10-10",6175],["2012-10-17",4073],
       ["2012-10-24",3543],["2012-10-31",2485],["2012-11-07",2437],
       ["2012-11-14",2513],["2012-11-21",5362],["2012-11-28",3848],
       ["2012-12-05",3707]];

line4=[["2012-10-04",4849],["2012-10-11",3917],["2012-10-18",3857],
       ["2012-10-25",3398],["2012-11-01",5187],["2012-11-08",5724],
       ["2012-11-15",4154],["2012-11-22",5250],["2012-11-29",3804],
       ["2012-12-06",4947]];

line5=[["2012-10-05",7139],["2012-10-12",10947],["2012-10-19",9889],
       ["2012-10-26",6164],["2012-11-02",8740],["2012-11-09",8490],
       ["2012-11-16",7615],["2012-11-23",12008],["2012-11-30",10772],
       ["2012-12-07",7921]];

line6=[["2012-10-06",9409],["2012-10-13",9382],["2012-10-20",8085],
       ["2012-10-27",5535],["2012-11-03",14852],["2012-11-10",7900],
       ["2012-11-17",10291],["2012-11-24",5752],["2012-12-01",7111],
       ["2012-12-08",13797]];

line7=[["2012-10-07",2746],["2012-10-14",3665],["2012-10-21",7873],
       ["2012-10-28",3197],["2012-11-04",3162],["2012-11-11",4118],
       ["2012-11-18",5587],["2012-11-25",4490],["2012-12-02",3203],
       ["2012-12-09",4627]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T03:09:22.423

尝试这个

```
jQuery.jqplot('totalTakings', [line0,line1,line2,line3,line4,line5,line6], {
            legend:{show:false}, 
            title:'<b>Total Takings</b>',
            seriesDefaults:{pointLabels:{show:false}},
            grid: {background:'#f8f8f8', gridLineColor:'#dbdbdb',borderWidth: 0,shadowDepth: 0},
            axes:{
                yaxis: {  autoscale:true, tickOptions:{formatString:'$%.0f'},label: 'NZ$', min:0},
                xaxis: {
                renderer: $.jqplot.DateAxisRenderer,
                //rendererOptions: {tickRenderer: $.jqplot.canvasAxisTickRenderer},//this is incorrect as tickRenderer should be outside rendererOptions
                tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                     //tickinterval:'1 month',
                     min:'Oct 1,2012',
                tickOptions: {

                   // tickinterval:'1 month',
                    formatString:'%b %#d, %Y',
                    angle: -45
                }
            }
            },
            seriesColors: [ "#329dd5", "#0d8e17", "#f47320", "#7678ab", "#ecd77e", "#84b586","#bc8b7c", "#015253"],
            highlighter: { tooltipLocation: 'n',tooltipAxes: 'both',tooltipSeparator: ' - ',tooltipOffset: 10,sizeAdjust: 8,tooltipFadeSpeed:'slow'   }             
        }); 
```

**JSFIDDLE**：[演示](http://jsfiddle.net/JWhmQ/1405/)

添加 `tickRenderer: $.jqplot.CanvasAxisTickRenderer`

# ruby-on-rails - has_many :through 上的 find(:all) 是否根本不起作用？

> ID：14637884
> 
> 赞同：0
> 
> 时间：2013-02-01T00:46:54.960
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我有一些这样的模型类：

```
class Organisation < ActiveRecord::Base
  has_many :dongles
  has_many :licences_on_owned_dongles, :through => :dongles, :source => :licences,
           :include => [:organisation, :user, :owner_organisation, :profile, :dongle,
                        {:nested_licences => [:profile]} ]
end

class Dongle < ActiveRecord::Base
  has_many :licences
  belongs_to :organisation
end

class Licence < ActiveRecord::Base
  belongs_to :dongle

  # tree-like structure. I don't remember why this had to be done but the comment says
  # "find a way to make the simpler way work again" and I tried using the simpler way
  # but tests still fail. So obviously the SQL awfulness is necessary...
  default_scope :conditions => { :parent_licence_id, nil }
  has_many :nested_licences, :class_name => 'Licence', :dependent => :destroy,
           :autosave => true,
           :foreign_key => :parent_licence_id,
           :finder_sql => proc {
             "SELECT l.* FROM licences l WHERE l.parent_licence_id = #{id}" },
          :counter_sql => proc {
             "SELECT COUNT(*) FROM licences l WHERE l.parent_licence_id = #{id}" }
end 
```

现在我可以这样做了：

```
test "getting licences on owned dongles" do
  org = organisations(:some_other_corp)
  assert_equal [licences(:licence_4)], org.licences_on_owned_dongles
end 
```

就这样愉快地过去了。既然它是一个协会，你可能会觉得你可以`find()`：

```
test "getting licences on owned dongles and then filtering further" do
  org = organisations(:some_other_corp)
  conditions = { :owner_organisation_id => nil }
  assert_equal [licences(:licence_4)],
    org.licences_on_owned_dongles.find(:all, :conditions => conditions)
end 
```

但这给出了：

```
ActiveRecord::StatementInvalid: SQLite3::SQLException: no such column: dongles.organisation_id: SELECT "licences".* FROM "licences" WHERE "licences"."parent_licence_id" IS NULL AND (("dongles".organisation_id = 72179513)) AND ("licences".parent_licence_id = 747059259)
test/unit/organisation_test.rb:123:in `test_getting_licences_on_owned_dongles_and_then_filtering_further' 
```

事实上，这甚至发生在您调用的所有内容都是`find(:all)`. 它也不仅仅是 SQLite，因为我在 MySQL 的生产（oops）中注意到了这一点。

所以我不知道。实在是太玄乎了，无法深入调查。我可能会将其搁置为“Rails 无法在关联上执行 find()”，使用块对其进行过滤并将其保留。但我想把它拿出来，以防万一有更好的选择。

（实际上，如果您查看 Rails 正在生成的查询，那完全是胡说八道。不知何故，它最终生成了一个查询，其中必须同时为 NULL 和等于一个值。即使查询有效，这也会返回0 行。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:59:21.187

不要在 Rails 3 应用程序中使用 find 。

```
org.licences_on_owned_dongles.find(:all, :conditions => conditions) 
```

应该

```
org.licences_on_owned_dongles.where(conditions) 
```

[编辑：在这里](http://m.onkey.org/active-record-query-interface)阅读它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:59:38.933

我想你正在寻找`.where`：

```
org.licenses_on_owned_dongles.where(conditions) 
```

# php - 如何更新具有多行值的一张表

> ID：14637889
> 
> 赞同：-1
> 
> 时间：2013-02-01T00:47:23.687
> 
> 标签：php, mysql

在我的情况下，我做了 INSERT 和 UPDATE 因为我做了一个条件，如果选民已经投票，它只会更新他在我的 tbl_initialVote 表上的信息。否则，它将插入。我怎样才能以更新格式做到这一点。请帮助...只是忽略变量$voter .. thnks的冗余。

```
$mysqli->query("INSERT INTO `tbl_initialVote` (`studId`, `candId`) 
                VALUES ('".$voter."', '".$chairman."'), 
                       ('".$voter."', '".$vchairman."'), 
                       ('".$voter."', '".$secretary."'), 
                       ('".$voter."', '".$treasurer."')") 
```

到彼得姆

```
//this $getinfo is base on the logged in user
 $getinfo = $mysqli->query("SELECT studId FROM`tbl_initialVote` WHERE studID = '".$voter."'"); 
    if ($getinfo->num_rows > 0 ){
          //here i know it got me error on this but this just i want to happen, make an update in the table if the user is already listed on my table. how could i suppose to do like this...@Peterm.    
              $mysqli->query(UPDATE `tbl_initialVote` set candId = VALUES('".$chairman."', '".$vchairman."', '".$secretary."', '".$treasurer."')

              } else {
       $mysqli->query("INSERT INTO `tbl_initialVote` (`studId`, `candId`) 
                VALUES ('".$voter."', '".$chairman."'), 
                       ('".$voter."', '".$vchairman."'), 
                       ('".$voter."', '".$secretary."'), 
                       ('".$voter."', '".$treasurer."')")

                   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:48:55.773

我想你正在寻找[`ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:50:29.607

谷歌搜索“用多行值 php 更新表”

产生了这个结果：[http ://snipplr.com/view/20334/](http://snipplr.com/view/20334/)

我希望这会有所帮助，兄弟！

亚历克斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T17:38:27.430

据我所见，我仍在努力理解它，恕我直言，您可以简单地按顺序执行`DELETE`，然后再执行`INSERT`新记录，而无需关心更新。

这样，您的所有代码都归结为：

```
$mysqli->query("DELETE FROM `tbl_initialVote` WHERE `studId`='" .$voter. "'");
$mysqli->query("INSERT INTO `tbl_initialVote` (`studId`, `candId`) 
                VALUES ('".$voter."', '".$chairman."'), 
                       ('".$voter."', '".$vchairman."'), 
                       ('".$voter."', '".$secretary."'), 
                       ('".$voter."', '".$treasurer."')"); 
```

# c# - 如何在没有 ListView 滚动条的情况下获取 ActualWidth

> ID：14637891
> 
> 赞同：1
> 
> 时间：2013-02-01T00:48:07.860
> 
> 标签：c#, xaml, windows-runtime, windows-store-apps, winrt-xaml

我有一个`DataTemplate`for `ListView`items。在这个内部`DataTemplate`，我有一个`Grid`控件，我需要它的实际宽度，`ListView`但没有 ScrollBar 的宽度，因为这样一些内容会在滚动条后面。我不能使用`ListViewItem`s 的宽度，因为我是用这个模板定义的。我在这里看到了一些带有祖先的 WPF 的答案，但我认为这在 WinRT 中是不可能的。

编辑：我尝试获取列表视图的滚动查看器 ViewportWidth。这是我得到的代码

```
<DataTemplate x:Key="ListViewTemplate">
      <Grid Width="{Binding RelativeSource={RelativeSource Self}, Converter={StaticResource ContainerViewportWidthConverter}}">
            <Grid.RowDefinitions>... 
```

这是我的列表视图正在使用的 DataTemplate，它位于单独的 xaml 文件中。

转换器如下所示：

```
 if (!(value is FrameworkElement)) return null;
        var ctrl = value as FrameworkElement;
        var scrollViewer = ctrl.GetFirstAncestorOfType<ScrollViewer>();
        return scrollViewer.ViewportWidth; 
```

当我尝试获取所有祖先或后代时， scrollViewer 始终变为`null`并且应用程序崩溃，返回列表也是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:46:57.817

你试过`ScrollViewer.ViewportWidth`吗？

# loops - 暂停批处理文件直到可以访问主机（使用 ping）？

> ID：14637892
> 
> 赞同：2
> 
> 时间：2013-02-01T00:48:07.950
> 
> 标签：loops, batch-file, ping, host, openvpn

我正在寻找向我一直在编写的批处理文件添加一些功能；基本上发生的事情是我使用 openvpn 拨打 VPN 连接，然后继续安装网络驱动器以及许多其他事情，我想做的是：

*   通过 OpenVPN 拨打连接（我工作正常）
*   ping VPN 另一端的主机，在可以访问该主机之前不要继续处理批处理文件。

目前我一直在使用 20 秒的睡眠命令，它有效，但不是一种非常干净或智能的方式；我想我需要某种循环来尝试无限地ping主机，直到它可以访问，然后再继续批处理文件。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T01:00:31.280

来自stackoverflow上的antoher线程......归功于paxdiablo（在[此处](https://stackoverflow.com/a/3050945/315725)找到原始帖子）

```
@setlocal enableextensions enabledelayedexpansion
@echo off
set ipaddr=%1
:loop
set state=down
for /f "tokens=5,7" %%a in ('ping -n 1 !ipaddr!') do (
    if "x%%a"=="xReceived" if "x%%b"=="x1," set state=up
)
echo.Link is !state!
ping -n 6 127.0.0.1 >nul: 2>nul:
goto :loop
endlocal 
```

这将为您提供足够的弹药来使用和解决您的问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-11T08:08:40.900

正如几年前已经提到的，输出`ping`是依赖于语言的，所以依赖像`Received`. 首选和最可靠的方法是搜索字符串`TTL=`：

```
:loop
timeout 2
ping -n 1 %ipaddress% |find "TTL=" || goto :loop
echo Answer received. 
```

`||`就像“如果之前的命令 ( `find`) 不成功，那么”

（至于`timeout`：永远不要在没有空闲时间的情况下构建循环以减少 CPU 负载）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-11T07:54:28.983

如果您使用您的语言用于单词 Received 的字符串翻译“Received”字符串，它会起作用（即意大利语是 Ricevuti）。

# algorithm - 小 o(g(n)) 是 Theta(g(n)) 和 O(g(n)) 的集合差吗？

> ID：14637896
> 
> 赞同：-1
> 
> 时间：2013-02-01T00:48:24.757
> 
> 标签：algorithm

直觉上似乎是的。谁能给个认真的证据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:20:20.240

答案是不。您需要回到每个渐近界的正式定义才能看到这一点。

Big O(g(n)) = { f(n)：存在正常数 c 和 n0 使得 0 ≤ f(n) ≤ cg(n) 对于所有 n ≥ n0}。//这是一个渐近上界。第 47 页。（见下文引文）。

Theta(g(n)) = { f(n) ：存在正常数 c1、c2 和 n0 使得 0 ≤ c1g(n) ≤ f(n) ≤ c2g(n) 对于所有 n ≥ n0}。第 44 页。 // 这是一个渐近紧界。

Little o(g(n)) = { f(n) ：对于任何正常数 c > 0，存在一个常数 n0 > 0 使得对于所有 n ≥ n0 0 ≤ f(n) < cg(n) }。第 50 页。这表示不严格的渐近上限。

Big Omega(g(n)) = { f(n)：存在正常数 c 和 n0 使得 0 ≤ cg(n) ≤ f(n) 对于所有 n ≥ n0}。第 48 页。这是一个渐近的下界。

Theta 是一个渐近紧密的上界，这意味着 Big O 和 Big Omega 必须保持，Theta 才能保持。每个定义实际上都是一个集合，因此 Theta 可以理解为集合 Big O 和 Big Omega 的并集，因此集合差异：Theta - Big O = Big Omega。不小o。

请注意，如果常量在所有集合中不保持相同，则答案会变得有点糊涂。

引文：斯坦，克利福德。“第三章功能的成长。” 算法导论。作者：Thomas H. Cormen、Charles Eric。Leiserson 和 Ronald L. Rivest。第三版。马萨诸塞州剑桥：麻省理工学院，2009 年。N. 页。打印。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T02:20:59.910

这不是真的。拿：

```
f(n) = (floor(n/2))!
g(n) = (ceil(n/2))! 
```

然后你有：

```
f  = O(g)      since f(n) <= g(n)
f != o(g)      since f(n) = g(n) for unbounded n (even)
f != Theta(g)  since f(n) * ceil(n/2) <= g(n) for unbounded n (odd) 
```

所以 f 是 in `O(g)\Theta(g)`，但不是 in `o(g)`。

# javascript - 如何将流星 collection.find() 与排序、跳过和限制一起使用

> ID：14637900
> 
> 赞同：3
> 
> 时间：2013-02-01T00:48:55.863
> 
> 标签：javascript, meteor

我正在使用 Meteor 编写一个聊天程序。我需要按升序显示最近的 10 条消息。

```
Messages.find({...}, {sort: {created: 1}, skip: getMessageCount()-10, limit: 10}); 
```

此代码仅向我显示前 10 条消息。

跳过参数是否在 Meteor 中起作用并且我犯了一个错误，或者是否有任何已知的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T05:01:34.383

它返回前 10 条消息的原因是： ，按 value属性`{sort: {created: 1}}`的升序返回。`created`

你应该写`{sort: {created: -1}}`，即。值较高的记录`created`将首先返回。

此外，假设`created`带有一个有效的日期值和时间戳，您应该插入它的[`parsed`](http://www.w3schools.com/jsref/jsref_parse.asp)值，以便有效地执行基于日期的排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-26T22:50:58.793

你只需要在服务器上形成

`Messages.find({...}, {sort: {created: -1}, limit: 10});`

然后在客户端上

`Messages.find({...}, {sort: {created: 1}})`

会发生什么：

1.  您从 Mongo 收到 10 条最后一条消息的拆分，但顺序错误
2.  您在客户端上运行格式化正确的顺序

# c# - 使用 C# 驱动程序反序列化嵌套类时 MongoDB 中的错误

> ID：14637905
> 
> 赞同：2
> 
> 时间：2013-02-01T00:49:21.597
> 
> 标签：c#, mongodb, exception, deserialization, mongodb-.net-driver

通常当我将一个对象存储到我的集合中并向我的对象添加一个新属性时，当在 MongoDB 中找不到该属性时，mongodb C# 驱动程序将使用默认值。但是，当我有一个嵌套类时，官方的 MongoDB C# 驱动程序似乎并没有以同样的方式处理它。请参阅示例代码：

```
MongoCollection<Person> peopleCollection = fd.GetCollection<Person>("peopledb");
Person p = peopleCollection.FindOne(); //errors here w/ Type Cast Exception 
```

当我向嵌套类添加新成员时发生：

```
class Address {
    string street;
    string zip;
    string state; //newly added member, causing deserialization errors/cast exceptions
}

class Person {
    ObjectId _id;
    string firstname;
    string lastname;
    Address personAddress;
} 
```

在这种情况下，当我执行 FindOneAs 时，它会出错，因为 Person.personAddress.state 不存在。

有谁知道我如何使反序列化器也以同样的方式反序列化嵌套类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:43:49.273

如果您传递特定类型以查找一个，c# 驱动程序会自动反序列化嵌套类，请使用 mongo db 测试以下示例

```
 public ActionResult Index()
        {
         //   MongoDatabase databse = MongoDatabase.Create("mongodb://localhost:27017/BeniSoftLabs");
            MongoDatabase mongodb = DBConn.DBConn.getDBConn();
            var menu = mongodb.GetCollection<Menu>("Menu").FindOne();

   }

 public class Node
    {
        public virtual string NodeTitle { get; set; }
        public virtual string Link { get; set; }
        public virtual string IconName { get; set; }
        public virtual string ClassName { get; set; }
        public virtual IList<Node> NodeList { get; set; }

    }

 public class Menu
    {
        public virtual ObjectId id { get; set; }
        public virtual IList<Node> MenuList { get; set; }
        public virtual IList<Node> RightMenuList { get; set; }
    } 
```

数据模型是

```
{
        "_id" : ObjectId("50fecb7d60df893ad0e25138"),
        "MenuList" : [
                {
                        "NodeTitle" : "About Us",
                        "Link" : "/href.html",
                        "IconName" : "icon-home",
                        "ClassName" : "active",
                        "NodeList" : null
                },
                {
                        "NodeTitle" : "Our Solution",
                        "Link" : null,
                        "IconName" : "icon-briefcase",
                        "ClassName" : "dropdown",
                        "NodeList" : [
                                {
                                        "NodeTitle" : "HTML5 Apps",
                                        "Link" : "#/HTML5Apps",
                                        "IconName" : null,
                                        "ClassName" : null,
                                        "NodeList" : null
                                },
                                {
                                        "NodeTitle" : "CSS3 Apps",
                                        "Link" : "#/CSS3Apps",
                                        "IconName" : null,
                                        "ClassName" : null,
                                        "NodeList" : null
                                },
                                {
                                        "NodeTitle" : "Single Page Apps",
                                        "Link" : "#/SPAApps",
                                        "IconName" : null,
                                        "ClassName" : null,
                                        "NodeList" : null
                                },
                                {
                                        "NodeTitle" : "Smart Phone Apps",
                                        "Link" : "#/SMartPhoneApps",
                                        "IconName" : null,
                                        "ClassName" : null,
                                        "NodeList" : null
                                },
                                {
                                        "NodeTitle" : ".Net Enterprise Apps",
                                        "Link" : "#/NETEnterprise",
                                        "IconName" : null,
                                        "ClassName" : null,
                                        "NodeList" : null
                                },
                                {
                                        "NodeTitle" : "Node.js Enterprise Apps",

                                        "Link" : "#/NodeEnterprise",
                                        "IconName" : null,
                                        "ClassName" : null,
                                        "NodeList" : null
                                }
                        ]
                },
                {
                        "NodeTitle" : "Technologies",
                        "Link" : null,
                        "IconName" : "icon-briefcase",
                        "ClassName" : "dropdown",
                        "NodeList" : [
                                {
                                        "NodeTitle" : "HTML5 & CSS3",
                                        "Link" : null,
                                        "IconName" : null,
                                        "ClassName" : null,
                                        "NodeList" : null
                                },
                                {
                                        "NodeTitle" : "Angular.js",
                                        "Link" : null,
                                        "IconName" : null,
                                        "ClassName" : null,
                                        "NodeList" : null
                                },
                                {
                                        "NodeTitle" : "Node.js",
                                        "Link" : null,
                                        "IconName" : null,
                                        "ClassName" : null,
                                        "NodeList" : null
                                },
                                {
                                        "NodeTitle" : "Asp.net MVC",
                                        "Link" : null,
                                        "IconName" : null,
                                        "ClassName" : null,
                                        "NodeList" : null
                                },
                                {
                                        "NodeTitle" : "MongoDB",
                                        "Link" : null,
                                        "IconName" : null,
                                        "ClassName" : null,
                                        "NodeList" : null
                                },
                                {
                                        "NodeTitle" : "My Sql",
                                        "Link" : null,
                                        "IconName" : null,
                                        "ClassName" : null,
                                        "NodeList" : null
                                }
                        ]
                },
                {
                        "NodeTitle" : "Why Us",
                        "Link" : null,
                        "IconName" : "icon-fire",
                        "ClassName" : null,
                        "NodeList" : null
                }
        ],
        "RightMenuList" : [
                {
                        "NodeTitle" : "Join Us",
                        "Link" : null,
                        "IconName" : "icon-eye-open",
                        "ClassName" : null,
                        "NodeList" : null
                },
                {
                        "NodeTitle" : "Contact Us",
                        "Link" : null,
                        "IconName" : "icon-user",
                        "ClassName" : null,
                        "NodeList" : null
                }
        ]
} 
```

# xml - XSD 可以用来定义内联样式表吗？（强制节点使用特定的命名空间。）

> ID：14637906
> 
> 赞同：1
> 
> 时间：2013-02-01T00:49:25.027
> 
> 标签：xml, xslt, xsd

我正在尝试构建一个 XSD，它将特定节点限制为“内联”样式表。

它可能看起来像这样：

```
<complexType name="InlineXslt">
  <sequence>
    <any minOccurs="1" maxOccurs="1" FORCE_NAMESPACE="http://www.w3.org/1999/XSL/Transform" />
  </sequence>
</complexType> 
```

也许...

```
<complexType name="InlineXslt">
  <sequence>
    <element name="stylesheet" minOccurs="1" maxOccurs="1" FORCE_NAMESPACE="http://www.w3.org/1999/XSL/Transform" />
  </sequence>
</complexType> 
```

当然没有 FORCE_NAMESPACE 属性，但想法是强制节点使用 XSL 命名空间。是否有等效的语法可以让我指定此限制？符合标准的 XML 如下所示：

```
<InlineXslt>
  <stylesheet version="1.0" xmlns="http://www.w3.org/1999/XSL/Transform">
    <... etc ...>
  </stylesheet>
</InlineXslt> 
```

如果我在第一个 XSD 示例中省略（不存在的）“FORCE_NAMESPACE”属性，它确实有效，但不强制执行。由于使用了“any”元素，用户可以在其中放置任何他们想要的东西，包括一个未命名为“stylesheet”的节点并使用他们选择的任何命名空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:36:20.790

**简短的回答：**

`FORCE_NAMESPACE`您想要的属性`xs:any`存在；它被称为`namespace`。（它可能与您的 FORCE_NAMESPACE 不同，它允许多个命名空间名称。）`FORCE_NAMESPACE`您想要的属性`xs:element`不存在，因为它不是必需的；您正在寻找的功能是使用`ref`属性和限定名称来实现的。

**更长的答案：**

如果您希望类型为 InlineXslt 的元素包含 xslt:stylesheet 元素，实现它的最简单方法是这样说：

```
<xs:complexType name="InlineXslt">
  <xs:sequence>
    <xs:element ref="xsl:stylesheet" 
      xmlns:xsl="http://www.w3.org/1999/XSL/Transform"/>
  </xs:sequence>
</xs:complexType> 
```

这将要求您的架构文档导入 XSLT 命名空间，因此在架构文档的顶部您将拥有类似以下内容：

```
<xs:import namespace="http://www.w3.org/1999/XSL/Transform"/> 
```

如果您想允许顶级元素为`stylesheet`or `transform`，请编写一个选项：

```
<xs:complexType name="InlineXslt2">
  <xs:choice 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xs:element ref="xsl:stylesheet"/>
    <xs:element ref="xsl:transform"/>
  </xs:choice>
</xs:complexType> 
```

如果您想允许任意 XSLT 元素（在您的特定情况下听起来像是一场语义噩梦，但作为示例），请使用通配符指定接受 XSLT 命名空间中的任何元素：

```
<xs:complexType name="InlineXslt3">
  <xs:choice>
    <xs:any namespace="http://www.w3.org/1999/XSL/Transform"
     maxOccurs="unbounded"/>
  </xs:choice>
</xs:complexType> 
```

# android - 跨不同版本的对话框的自定义布局？

> ID：14637907
> 
> 赞同：0
> 
> 时间：2013-02-01T00:49:35.313
> 
> 标签：android, dialog

我有一个自定义布局的对话框（非常简单）。我使用下面的代码设置它：

```
public static Dialog createGPSDialog(final Activity activity, boolean isLocationEnabled) {
    final Dialog dialog = new Dialog(activity, R.style.Theme_Sherlock_Light_Dialog);

    LinearLayout contentView = (LinearLayout) activity.getLayoutInflater().inflate(R.layout.dialog_twobutton, null);

    dialog.setContentView(contentView);
    return dialog;
} 
```

我省略了一些代码，但它不相关。无论如何，这就是姜饼中的样子：

![姜饼](../Images/87ad78058fd88aa1233089a52e3ce4c2.png)

这就是它在 jellybean 上的样子（也可能是 ics）：

![果冻豆](../Images/7f0d449df1b4d89a84ab33b23f9ad52b.png)

对话框的标题区域保留在 JB 上，即使在设置 ContentView 之后也是如此。有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:58:29.183

如果您想完全自定义并摆脱标题栏，请尝试将此行添加到您的代码中：

```
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:53:47.317

关键是为你的对话定义一个主题。Dialog 的构造函数采用主题资源 ID。只需使用 android 的 android.R.theme.xxx 之一。

使用 AlertDialog.Builder 时，您可以使用 contextthemewrapper 定义新主题。 [http://developer.android.com/reference/android/view/ContextThemeWrapper.html](http://developer.android.com/reference/android/view/ContextThemeWrapper.html)

# php - 为多列中的重复结果插入 mysql 表结果两次？

> ID：14637909
> 
> 赞同：0
> 
> 时间：2013-02-01T00:50:17.407
> 
> 标签：php, mysql

有人请帮助我，我有一个阻止用户脚本。基本上一切正常。

当用户在其他用户配置文件上单击阻止时，这会回显用户 ID，并将 user_id 和其他 profile_id 插入数据库并将列“阻止”从“0”设置为“1”。

已登录的用户现在无法看到他们已阻止的其他用户，但被阻止的其他用户仍然可以看到他们的个人资料。

我的数据库的工作方式是它需要两个列中的两个集合 id，如下所示：

```
user_id   |   blocked_id  |  blocked

   1               2            1
   2               1            1 
```

为了让两个用户都看不到对方并且都被阻止，我需要尝试插入两个 id 几乎两次。

这有点像复制插入到表中的值以两次创建相同的结果，但在表列中只是相反。

所以目前我有：

```
$sql = mysql_query("INSERT INTO ptb_block_user (user_id, blocked_id) VALUES (".$_SESSION['user_id'].", ".$user_to_id.")"); 
```

我需要将这些值插入两次，但方向相反，所以它看起来像上表。

我希望我让自己清楚，有人知道我该怎么做吗？

谢谢。

```
<?php

session_start();

    confirm_logged_in();

    if (isset ($_GET['to'])) {
    $user_to_id = $_GET['to'];

}

if (!isset($_GET['to']))
    exit('No user specified.');

$user_id = $_GET['to'];

$sql = mysql_query("INSERT INTO ptb_block_user (user_id, blocked_id) VALUES (".$_SESSION['user_id'].", ".$user_to_id.")");

$result1 = mysql_query("UPDATE ptb_block_user SET blocked='1' WHERE user_id=".$_SESSION['user_id']."") 
or die(mysql_error());

if($result1) 
{ 
$_SESSION['message2']="<div class=\"infobox-profile\"><strong>User Blocked</strong> - This user has successfully been blocked. You will no longer be abler to interact with each other's profiles.</div><div class=\"infobox-close\"></div>"; 
header("Location: {$_SERVER['HTTP_REFERER']}");
} 
else 
if($result2) 
{ 
$_SESSION['message2']="<div class=\"infobox-favourites\"><strong>User Unblocked</strong> - This user has successfully been unblocked. You can now interact with each other's profiles.</div><div class=\"infobox-close4\"></div>"; 
header("Location: {$_SERVER['HTTP_REFERER']}");

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:53:51.303

您的问题对我来说并不完全清楚，但您似乎在问如何使用相同的查询插入两个值。 `VALUES`可以采用多个元组：

```
INSERT INTO ptb_block_user (user_id, blocked_id, blocked) VALUES
    (".$_SESSION['user_id'].", ".$user_to_id.", 1),
    (".$user_to_id.", ".$_SESSION['user_id'].", 1) 
```

您的代码很容易受到 mysql 注入的影响，您不应使用`ext/mysql`：

[http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:58:14.847

```
INSERT INTO ptb_block_user
(user_id, blocked_id) 
VALUES 
(".$_SESSION['user_id'].", ".$user_to_id."),
(".$user_to_id.",".$_SESSION['user_id'].") 
```

?

# actionscript-3 - 无缘无故调用构造函数

> ID：14637910
> 
> 赞同：0
> 
> 时间：2013-02-01T00:50:18.197
> 
> 标签：actionscript-3, constructor

我有这门课，我们称之为：Klass。

Klass 类的构造函数有一个参数，该参数是一个默认值为 null 的数组。

我在另一个类中创建了一个类 Klass 的对象，我们称之为：“MotherClass”。

现在是当它变得奇怪时，在我实例化对象 Klass 之后，再次调用 Klass 的构造函数，就在 MotherClass 的构造函数结束之后（我放置了一个断点，我一步一步地跟随），构造函数参数为空。

问题是，我没有第二次调用 Klass 构造函数的任何东西的堆栈跟踪，不知道什么会再次调用该构造函数......

有任何想法吗？

谢谢。

（Klass 实现了一个接口，我正在使用数组创建一个实例，不确定这是否会影响任何东西）

按要求添加代码：

这是MotherKlass类：

```
public class Unit extends EntityVO{

    public function Unit(level:int = 1)
            {
                //init vars and stuff
                //...
                //

                initLevelData();
                applyLevel = level;

            }

            private function initLevelData():void {

                levelData[1] = [500,  [[Spawn, this.entityToSpawn.type, this.entityToSpawn.level, 120]], "unit_level1"];
                levelData[2] = [1000, [[Spawn, this.entityToSpawn.type, this.entityToSpawn.level,  90]], "unit_level2"];
                levelData[3] = [2000, [[Spawn, this.entityToSpawn.type, this.entityToSpawn.level,  80]], "unit_level3"];
                levelData[4] = [5000, [[Spawn, this.entityToSpawn.type, this.entityToSpawn.level,  60]], "unit_level4"];

            }

            override public function set applyLevel(level:int):void {

                power     = power / maxPower * levelData[level][0]; 
                maxPower  = levelData[level][0];
                behavior  = levelData[level][1];

                for (var i:int = 0; i < behavior.length; i ++){
                    _behaviorSteps[i] = new behavior[i][0](behavior[i].slice(1));
                    _behaviorReqs.push(_behaviorSteps[i].req);
                }

            }
        }
    }   
} 
```

这是克拉斯：

```
public class Spawn {

    public class Spawn implements IBehavior
        {
            private var _entityType:String;
            private var _entityLevel:int;
            private var _spawnRate:int;

            public function Spawn(params:Array = null){
                //had to put the if because of the second weird call to the constructor with null
                if(params){
                    _entityType = params[0];
                    _entityLevel = params[1];
                    _spawnRate  = params[2];
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:08:58.987

我通过 Cirrus 接收 Unit 类的实例，并使用 RegisterClassAlias 反序列化对象。当我这样做时，似乎出于某种原因必须自动实例化 Spawn 的实例。这就是为什么你不能在没有默认参数的情况下传递 ojbects。在这种情况下，它会引发错误，因为我正在使用 (params[0]) 为空的参数。我在代码的其他部分使用 Cirrus，它工作正常，因为它们的参数构造函数中有所有整数和字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:23:36.280

好的，这似乎正在发生：

你有一个 setter`applyLevel`覆盖了超类的 setter。我认为你的超级二传手也被处决了。一些观察使我得出这个结论：

*   您的 setter 方法覆盖了超类方法，但它没有在哪里做`super.applyLevel = level`。这意味着在超类中，应该保持级别值的存储变量未初始化。Actionscript 中未初始化的整数默认为 0。

*   您提到`Spawn`' 构造函数的第二次调用没有参数。发生这种情况是因为您的数组`levelData`从索引 1 开始。所以该数组的索引 0 为空。

*   所以`applyLevel`setter 方法的超类版本是从上面传入 null 元素。

我认为这些事实是 100% 正确的。

我不清楚是谁在调用超类的版本，`applyLevel`也许超类 ( `EntityVO`) 在它的构造函数中这样做......希望这足以为您指明正确的方向。

# c++ - 合并排序中的合并函数，“向量下标超出范围”

> ID：14637911
> 
> 赞同：0
> 
> 时间：2013-02-01T00:50:19.110
> 
> 标签：c++, mergesort

这是我的合并排序函数，我不明白为什么在 VC++ express 2010 中总是出现“向量下标超出范围”错误。

```
vector<int> Ordinatore::doMerge(vector<int> &v1, vector<int> &v2) {
int dimV1 = v1.size();
int dimV2 = v2.size();

int dimTotale = dimV1 + dimV2;
vector<int> merged; 

int lh, rh;
lh=0;rh=0;

while(lh < dimV1)  {

    if (rh < dimV2 && v1[lh] <= v2[rh]) {

        merged.push_back(v1[lh]);

        lh++;
        /* the trouble should start here as far as I've seen with cout & debugging */
        while (rh < dimV2  && v2[rh] <= v1[lh]) {

            merged.push_back(v2[rh]);

            rh++;

        }

    }
    else {

        while (rh < dimV2  && v2[rh] <= v1[lh]) {
            merged.push_back(v2[rh]);
            rh++;
        }
        merged.push_back(v1[lh]);

        lh++;

    }
}

return merged;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:59:48.727

问题出在循环的顶部：

```
while(lh < dimV1)  {
    if (rh < dimV2 && v1[lh] <= v2[rh]) {
        merged.push_back(v1[lh]);
        lh++;                                       // |<-- Problem
        while (rh < dimV2  && v2[rh] <= v1[lh]) {   // |
           ...
        }
    }
    else {
        ...
        lh++;
    }
} 
```

当`lh++`中的那个`else`被执行时，`lh`增加并`while(lh < dimV1)`重新启动。让我们假设它一直到`lh == dimV1 - 1`......

*   如果`if`条件评估为`true`，`lh++`则在您已标记“*问题应从这里开始*”的情况下正确执行。
*   下一行将`while (rh < dimV2 && v2[rh] <= v1[lh])`导致崩溃，因为`lh`now equals`dimV1`但您正在使用它来索引`v1`。

[您可以在此Wikipedia 文章](http://en.wikipedia.org/wiki/Merge_sort)中阅读有关合并排序的更多信息。

# ruby-on-rails-3 - Rails 3：如何从控制器的“创建”动作报告错误消息？

> ID：14637912
> 
> 赞同：0
> 
> 时间：2013-02-01T00:50:23.163
> 
> 标签：ruby-on-rails-3, forms, validation, exception, error-handling

在表单上的“创建”操作中，我成功地将 (1) MyObject 保存到我的本地数据库和 (2) OtherObject 通过其 Ruby API 保存到第三方数据库。当保存到第三方出现问题时，我会收到一个 Ruby 异常形式的错误。

我的问题是：如何停止表单提交并向客户报告异常消息？

如果这是不可能的，那么最好的选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:11:27.283

根据您是否要回滚本地数据库调用，您可能需要考虑使用[Transactions](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)。这些方面的东西：

```
def create
  ActiveRecord::Base.transaction do
    @myobject = MyObject.create!(params[:myobject])
    begin
      # call third-party
    rescue Exception => e
      flash[:exception] = e.message
      raise ActiveRecord::Rollback # Raise this to cause a rollback on MyObject
    end
  end
  # redirect_to or render... might have to pick depending on if you got an exception
end 
```

这会将异常消息存储到`flash`您可以用来向用户显示的消息中。**注意**不要将整个`Exception`对象存储到 中`flash`，如果您的异常对象太大，您肯定会看到溢出错误。

如果您不太关心回滚`MyObject`创建，那么您可以使用一个简单的`begin`...`rescue`类似于我在示例中展示的内容。您可能需要根据是否发生异常来确定是否要执行`redirect_to`或执行`render`，但您始终可以根据是否发生有条件地`flash[:exception].nil?`确定`true`。

# ios - 设置 UILabel 字符数限制？

> ID：14637916
> 
> 赞同：0
> 
> 时间：2013-02-01T00:50:33.257
> 
> 标签：ios, xcode, uilabel

我有一个显示外部温度的 UILabel，问题是，有时它显示为 XX.XXº 格式，而不是用于显示温度的正常 XXº 或 XXXº 格式，无论如何强制标签只显示温度而没有小数或至少强制它只能使用 2 个字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-13T14:54:14.747

```
 NSString *temp = [galleryEntryTree objectForKey:@"description"];
if ([temp length] > 500) {
    NSRange range = [temp rangeOfComposedCharacterSequencesForRange:(NSRange){0, 500}];
    temp = [temp substringWithRange:range];
    temp = [temp stringByAppendingString:@" …"];
}
coverView.label2.text = temp; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:01:21.373

您可以使用它来消除小数：

```
NSString* numberString = [NSString stringWithFormat:@"%.0f", d]; // 0 means no decimals 
```

否则，我相信这将有助于将字符数限制为 2：

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
formatter.usesSignificantDigits = YES;
formatter.maximumSignificantDigits = 2; 
```

不过，我并没有真正使用过 NSNumberFormatter。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-01T02:20:00.330

您也可以使用子字符串方法

```
 NSString *newformat = [NSString stringWithFormat:@"%@",[temperature substringWithRange:NSMakeRange(0,2)]]; 
```

在这种情况下，温度是您为标签设置的字符串，您仅检索前 2 位数字

# c++ - new[] 比 Win32 的 VirtualAlloc 快吗？

> ID：14637922
> 
> 赞同：5
> 
> 时间：2013-02-01T00:52:00.567
> 
> 标签：c++, winapi, memory-management

我正在测试一些字符串池分配器的性能：我考虑了[这里](http://blogs.msdn.com/b/oldnewthing/archive/2005/05/19/420038.aspx)介绍的调用`Virtual­Alloc`然后划分子分配的分配器，以及使用标准 C++（不直接调用任何 Win32 API）和`new[]`.

我希望`Virtual­Alloc`版本更快，因为我认为开销应该比 C++ 少`new[]`；但我观察到的结果是相反的：使用`new[]`似乎比使用较低级别的`Virtual­Alloc`.

我跑了几次测试（代码是用VS2010 SP1编译的），输出是这样的：

> ```
> String pool using VirtualAlloc: 1280.07 ms
> String pool using new[]: 799.193 ms 
> ```

为什么是这样？为什么`new[]`似乎比 快`VirtualAlloc`？

测试源代码如下：

```
////////////////////////////////////////////////////////////////////////////
// Testing VirtualAlloc vs. new[].
////////////////////////////////////////////////////////////////////////////

#include <string.h>
#include <wchar.h>
#include <algorithm>
#include <exception>
#include <iostream>
#include <new>
#include <ostream>
#include <stdexcept>
#include <string>
#include <vector>
#include <windows.h>
using namespace std;

//--------------------------------------------------------------------------
// String pool allocator using VirtualAlloc, based on this:
// http://blogs.msdn.com/oldnewthing/archive/2005/05/19/420038.aspx
//--------------------------------------------------------------------------
class StringPoolUsingVirtualAlloc
{
public:

    StringPoolUsingVirtualAlloc()
        : m_pchNext(nullptr), 
          m_pchLimit(nullptr), 
          m_phdrCur(nullptr)
    {
        SYSTEM_INFO si;
        GetSystemInfo(&si);
        m_dwGranularity = static_cast<DWORD>( 
            RoundUp( sizeof(HEADER) + MIN_CBCHUNK, si.dwAllocationGranularity 
            ));
    }

    ~StringPoolUsingVirtualAlloc()
    {
        HEADER* phdr = m_phdrCur;
        while (phdr) 
        {
            HEADER * phdrPrev = phdr->m_phdrPrev;
            VirtualFree(phdr, 0, MEM_RELEASE);
            phdr = phdrPrev;
        }
    }

    wchar_t* DuplicateString(const wstring& source)
    {
        return AllocString(source.c_str(), source.c_str() + source.length());
    }

private:
    union HEADER 
    {
        struct 
        {
            HEADER* m_phdrPrev;
            SIZE_T  m_cb;
        };
        wchar_t alignment;
    };

    enum 
    { 
        MIN_CBCHUNK = 32000,
        MAX_CHARALLOC = 1024*1024
    };

    wchar_t*  m_pchNext;
    wchar_t*  m_pchLimit;
    HEADER*   m_phdrCur;
    DWORD     m_dwGranularity;

    static SIZE_T RoundUp(SIZE_T cb, SIZE_T units)
    {
        return ((cb + units - 1) / units) * units;
    }

    wchar_t* AllocString(const wchar_t* pchBegin, const wchar_t* pchEnd)
    {
        SIZE_T cchTotal = pchEnd - pchBegin + 1;
        if (cchTotal > MAX_CHARALLOC) 
            throw length_error("String too big.");

        wchar_t* psz = m_pchNext;
        if (m_pchNext + cchTotal <= m_pchLimit) 
        {
            m_pchNext += cchTotal;
            lstrcpynW(psz, pchBegin, static_cast<int>(cchTotal));
            return psz;
        }

        SIZE_T cbAlloc = RoundUp(cchTotal * sizeof(wchar_t) + sizeof(HEADER), m_dwGranularity);
        BYTE* pbNext = reinterpret_cast<BYTE*>(
            VirtualAlloc(nullptr, cbAlloc, MEM_COMMIT, PAGE_READWRITE));
        if (pbNext == nullptr) 
            throw bad_alloc();

        m_pchLimit = reinterpret_cast<wchar_t*>(pbNext + cbAlloc);
        HEADER* phdrCur = reinterpret_cast<HEADER*>(pbNext);
        phdrCur->m_phdrPrev = m_phdrCur;
        phdrCur->m_cb = cbAlloc;
        m_phdrCur = phdrCur;
        m_pchNext = reinterpret_cast<wchar_t*>(phdrCur + 1);
        return AllocString(pchBegin, pchEnd);
    }

    StringPoolUsingVirtualAlloc(const StringPoolUsingVirtualAlloc &);
    StringPoolUsingVirtualAlloc & operator=(const StringPoolUsingVirtualAlloc &);
};

//--------------------------------------------------------------------------
// String pool allocator that uses standard C++ (no Win32 stuff) and new[].
//--------------------------------------------------------------------------
class StringPoolUsingNew
{
public:

    StringPoolUsingNew()
        : m_pchNext(NULL), 
          m_pchLimit(NULL), 
          m_currChunk(NULL)
    {
    }

    ~StringPoolUsingNew()
    {
        for (auto it = m_chunks.begin(); it != m_chunks.end(); ++it)
            delete *it;
    }

    wchar_t* DuplicateString(const wstring& source)
    {
        return AllocString(source.c_str(), source.c_str() + source.length());
    }

private:

    class Chunk
    {
    public:
        explicit Chunk(size_t maxCharCount)
        {
            m_data = new wchar_t[maxCharCount];
            m_maxCharCount = maxCharCount;
        }

        ~Chunk()
        {
            delete [] m_data;
        }

        wchar_t* Begin()             { return m_data; }
        const wchar_t* Begin() const { return m_data; }
        size_t Length() const        { return m_maxCharCount; }

    private:
        Chunk(const Chunk&);
        Chunk& operator=(const Chunk&);

        wchar_t * m_data;
        size_t m_maxCharCount;
    };

    static const size_t kMinChunkCharCount = 16000;
    static const size_t kMaxCharAlloc = 1024*1024;

    wchar_t*  m_pchNext;
    wchar_t*  m_pchLimit;
    Chunk*    m_currChunk;
    vector<Chunk*> m_chunks;

    wchar_t* AllocString(const wchar_t* pchBegin, const wchar_t* pchEnd)
    {
        const size_t cchTotal = pchEnd - pchBegin + 1;
        if (cchTotal > kMaxCharAlloc) 
            throw length_error("String too big.");

        wchar_t* dest = m_pchNext;
        if (m_pchNext + cchTotal <= m_pchLimit) 
        {
            m_pchNext += cchTotal;
            const size_t copyCount = cchTotal - 1;
            if (copyCount != 0)
                wmemcpy(dest, pchBegin, copyCount);
            dest[copyCount] = L'\0';
            return dest;
        }

        const size_t newChunkSize = max(cchTotal, kMinChunkCharCount);
        Chunk* newChunk = new Chunk(newChunkSize);
        m_chunks.push_back(newChunk);

        m_pchNext = newChunk->Begin();
        m_pchLimit = newChunk->Begin() + newChunk->Length();
        m_currChunk = newChunk;

        return AllocString(pchBegin, pchEnd);
    }

    StringPoolUsingNew(const StringPoolUsingNew&);
    StringPoolUsingNew& operator=(const StringPoolUsingNew&);
};

//------------------------------------------------------------------------
//                          Perf Measurement
//------------------------------------------------------------------------

long long Counter() 
{
    LARGE_INTEGER li;
    QueryPerformanceCounter(&li);
    return li.QuadPart;
}

long long Frequency() 
{
    LARGE_INTEGER li;
    QueryPerformanceFrequency(&li);
    return li.QuadPart;
}

void PrintTime(long long start, long long finish, const char * s) 
{
    cout << s << ": " << (finish - start) * 1000.0 / Frequency() << " ms" << endl;
}

//--------------------------------------------------------------------------
// Test
//--------------------------------------------------------------------------
int main()
{
    static const int kExitOk = 0;
    static const int kExitError = 1;
    try
    {
        long long start = 0;
        long long finish = 0;

        const auto shuffled = []() -> vector<wstring> 
        {
            const wstring lorem[] = {
                L"Lorem ipsum dolor sit amet, consectetuer adipiscing elit.",
                L"Maecenas porttitor congue massa. Fusce posuere, magna sed",
                L"pulvinar ultricies, purus lectus malesuada libero,",
                L"sit amet commodo magna eros quis urna.",
                L"Nunc viverra imperdiet enim. Fusce est. Vivamus a tellus.",
                L"Pellentesque habitant morbi tristique senectus et netus et",
                L"malesuada fames ac turpis egestas. Proin pharetra nonummy pede.",
                L"Mauris et orci."
            };

            vector<wstring> v;
            for (long long i = 0; i < 400*1000; ++i) 
            {
                for (auto it = begin(lorem); it != end(lorem); ++it) 
                {
                    v.push_back((*it) + L" (#" + to_wstring(i) + L")");
                }
            }
            random_shuffle(v.begin(), v.end());

            return v;
        }();

        start = Counter();
        {
            StringPoolUsingVirtualAlloc pool;
            vector<const wchar_t*> v;
            for (auto it = shuffled.begin(); it != shuffled.end(); ++it)
            {
                v.push_back( pool.DuplicateString(*it) );
            }
        }
        finish = Counter();
        PrintTime(start, finish, "String pool using VirtualAlloc");

        start = Counter();
        {
            StringPoolUsingNew pool;
            vector<const wchar_t*> v;
            for (auto it = shuffled.begin(); it != shuffled.end(); ++it)
            {
                v.push_back( pool.DuplicateString(*it) );
            }
        }
        finish = Counter();
        PrintTime(start, finish, "String pool using new[]");

        return kExitOk;
    }
    catch (const exception& e)
    {
        cerr << "*** ERROR: " << e.what() << endl;
        return kExitError;
    }
}

//////////////////////////////////////////////////////////////////////////// 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-23T04:04:19.013

是的，`new[]`重复调用比重复调用要快得多`VirtualAlloc`。

首先，重要的是要了解做什么`new T[N]`。操作员通过`new`调用来分配存储空间`operator new[]`。至少从 Visual C++ 2010 开始，`operator new[]`只需调用`malloc`，它调用 Windows API[`HeapAlloc`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366597.aspx)从 CRT 堆分配存储。在 Visual C++ 2012 之前，每个 CRT 都有自己的堆，通过[`HeapCreate`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366599.aspx). 在 Visual C++ 2012 中，CRT 使用进程堆，通过[`GetProcessHeap`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366569.aspx). 从性能的角度来看，使用哪个堆并不重要。

[`VirtualAlloc`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887.aspx)用于将内存页映射到进程的虚拟地址空间。当您需要控制整个页面时使用此功能。例如，如果要分配存储来保存可执行代码，则需要使用`VirtualAlloc`，以便可以更改该存储的权限以允许执行。 `VirtualAlloc`未针对通用内存分配进行优化。

为此，您需要一个堆，它一次映射一个大的地址空间区域，然后为来自该映射地址空间的分配请求提供服务。每次请求分配时，堆不必映射和取消映射虚拟页面（同样重要的是，每次执行分配时堆不必将内存归零）。

当我运行您的原始基准测试时，我得到以下结果：

```
String pool using VirtualAlloc: 1162.45 ms
String pool using new[]: 625.842 ms 
```

`VirtualAlloc`我用替换了你的用法`HeapAlloc`。为此，我使用 为分配器创建了一个私有堆`HeapCreate(0, 0, 0)`，然后用对这个私有堆的调用和来自这个私有堆的调用替换了调用`VirtualAlloc`和调用。（注意我没有使用进程堆，因为正如我上面解释的那样，使用那个堆，所以在这里也使用那个堆可能会改变分配器的性能。）我修改后的分配器的结果如下：`VirtualFree``HeapAlloc``HeapFree``new[]``new[]`

```
String pool using HeapAlloc: 919.853 ms
String pool using new[]: 636.515 ms 
```

嗯，这太令人失望了！我们将自定义分配器的性能提高了 21%，但仍然比`new[]`. 那是怎么回事？

分析器很有帮助地指出了问题所在：您的基准是比较苹果和橙子。`new[]`基于 - 的分配器用于复制`wmemcpy`字符串，但`VirtualAlloc`基于 - 的分配器使用`lstrcpyn`. `wmemcpy`简单的调用`memcpy`，它有一个内在的形式，所以它可以与疯狂的快速内在形式完全内联。 `lstrcpyn`是一个不能内联的 Windows API 函数。你`VirtualAlloc`的 -based 分配器没有机会！

我替换了`lstrcpyn`with的使用`wmemcpy`。结果如下：

```
String pool using HeapAlloc: 636.149 ms
String pool using new[]: 655.479 ms 
```

这些是我们所期望的结果：它们的性能大致相同，`new[]`只是稍微慢了一点，这可能是因为通过`operator new`and调用的开销很小`malloc`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-01T00:58:27.690

因为`new`会一次调用`VirtualAlloc`（或者，更有可能，`HeapAlloc`）以获得相当多的内存，然后将其用于多次调用`new`，其中调用`VirtualAlloc`将完全按照您的要求进行，准确分配您要求的内容。同样，使用它释放内存时`delete`比 快`VirtualFree`，因为一次释放了大量内存。

`fgetc`这与 using is faster than完全相同`ReadFile`- 当然，如果您一次读取 1 GB，`ReadFile`可能比调用`fgetc`gazillion 次要快得多，但是如果您一次读取一个字节，`ReadFile`则系统上会比using `fgetc`，它将一次读取多个（可能是 4KB）数据，然后一次从该缓冲区中取出一个字符，直到它为空。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T17:57:09.623

因此，[@JamesMcNellis 发现了主要问题](https://stackoverflow.com/a/15036937/1629821)，即在基于 -的池分配器`lstrcpynW`中使用的事实，而不是在基于 - 的池分配器中使用的事实。`VirtualAlloc``wmemcpy``new[]`

我修改了原代码，统一使用`wmemcpy`，多次运行测试，计算每个测试的平均执行时间（不包括第一次运行）。

我还添加了一个`HeapAlloc`基于 - 的池分配器和一个简单`vector<wstring>`的基准。

现在结果是：

> ```
> --- Tests summary ---
> VirtualAlloc : 781.671 ms
> HeapAlloc    : 806.597 ms
> new[]        : 889.792 ms
> STL strings  : 1491.36 ms 
> ```

所以，**`VirtualAlloc`**似乎是最快的（如预期的那样）。

可编译代码如下（使用 VS2010 SP1 / VC10 构建）：

```
////////////////////////////////////////////////////////////////////////////
// Testing VirtualAlloc vs. HeapAlloc vs. new[] vs. STL strings.
////////////////////////////////////////////////////////////////////////////

#include <string.h>
#include <wchar.h>
#include <algorithm>
#include <exception>
#include <iostream>
#include <new>
#include <ostream>
#include <stdexcept>
#include <string>
#include <vector>
#include <windows.h>
using namespace std;

//--------------------------------------------------------------------------
// String pool allocator using VirtualAlloc, based on this:
// http://blogs.msdn.com/oldnewthing/archive/2005/05/19/420038.aspx
//--------------------------------------------------------------------------
class StringPoolUsingVirtualAlloc
{
public:

    StringPoolUsingVirtualAlloc()
        : m_pchNext(nullptr), 
        m_pchLimit(nullptr), 
        m_phdrCur(nullptr)
    {
        SYSTEM_INFO si;
        GetSystemInfo(&si);
        m_dwGranularity = static_cast<DWORD>( 
            RoundUp( sizeof(HEADER) + MIN_CBCHUNK, si.dwAllocationGranularity 
            ));
    }

    ~StringPoolUsingVirtualAlloc()
    {
        HEADER* phdr = m_phdrCur;
        while (phdr) 
        {
            HEADER * phdrPrev = phdr->m_phdrPrev;
            VirtualFree(phdr, 0, MEM_RELEASE);
            phdr = phdrPrev;
        }
    }

    const wchar_t* DuplicateString(const wstring& source)
    {
        return AllocString(source.c_str(), source.c_str() + source.length());
    }

private:
    union HEADER 
    {
        struct 
        {
            HEADER* m_phdrPrev;
            SIZE_T  m_cb;
        };
        wchar_t alignment;
    };

    enum 
    { 
        MIN_CBCHUNK = 32000,
        MAX_CHARALLOC = 1024*1024
    };

    wchar_t*  m_pchNext;
    wchar_t*  m_pchLimit;
    HEADER*   m_phdrCur;
    DWORD     m_dwGranularity;

    static SIZE_T RoundUp(SIZE_T cb, SIZE_T units)
    {
        return ((cb + units - 1) / units) * units;
    }

    wchar_t* AllocString(const wchar_t* pchBegin, const wchar_t* pchEnd)
    {
        SIZE_T cchTotal = pchEnd - pchBegin + 1;
        if (cchTotal > MAX_CHARALLOC) 
            throw length_error("String too big.");

        wchar_t* psz = m_pchNext;
        if (m_pchNext + cchTotal <= m_pchLimit) 
        {
            m_pchNext += cchTotal;
            wmemcpy(psz, pchBegin, cchTotal);
            return psz;
        }

        SIZE_T cbAlloc = RoundUp(cchTotal * sizeof(wchar_t) + sizeof(HEADER), m_dwGranularity);
        BYTE* pbNext = reinterpret_cast<BYTE*>(
            VirtualAlloc(nullptr, cbAlloc, MEM_COMMIT, PAGE_READWRITE));
        if (pbNext == nullptr) 
            throw bad_alloc();

        m_pchLimit = reinterpret_cast<wchar_t*>(pbNext + cbAlloc);
        HEADER* phdrCur = reinterpret_cast<HEADER*>(pbNext);
        phdrCur->m_phdrPrev = m_phdrCur;
        phdrCur->m_cb = cbAlloc;
        m_phdrCur = phdrCur;
        m_pchNext = reinterpret_cast<wchar_t*>(phdrCur + 1);
        return AllocString(pchBegin, pchEnd);
    }

    StringPoolUsingVirtualAlloc(const StringPoolUsingVirtualAlloc &);
    StringPoolUsingVirtualAlloc & operator=(const StringPoolUsingVirtualAlloc &);
};

//--------------------------------------------------------------------------
// String pool allocator using HeapAlloc, 
// based on the VirtualAlloc allocator.
//--------------------------------------------------------------------------
class StringPoolUsingHeapAlloc
{
public:

    StringPoolUsingHeapAlloc()
        : m_pchNext(nullptr), 
        m_pchLimit(nullptr), 
        m_phdrCur(nullptr)
    {
        m_heap = HeapCreate(0, 0, 0);
        if (m_heap == nullptr)
            throw runtime_error("Can't create an heap with HeapCreate().");

        SYSTEM_INFO si;
        GetSystemInfo(&si);
        m_dwGranularity = static_cast<DWORD>( 
            RoundUp( sizeof(HEADER) + MIN_CBCHUNK, si.dwAllocationGranularity 
            ));
    }

    ~StringPoolUsingHeapAlloc()
    {
        HEADER* phdr = m_phdrCur;
        while (phdr) 
        {
            HEADER * phdrPrev = phdr->m_phdrPrev;
            HeapFree(m_heap, 0, phdr);
            phdr = phdrPrev;
        }
        HeapDestroy(m_heap);
    }

    const wchar_t* DuplicateString(const wstring& source)
    {
        return AllocString(source.c_str(), source.c_str() + source.length());
    }

private:
    union HEADER 
    {
        struct 
        {
            HEADER* m_phdrPrev;
            SIZE_T  m_cb;
        };
        wchar_t alignment;
    };

    enum 
    { 
        MIN_CBCHUNK = 32000,
        MAX_CHARALLOC = 1024*1024
    };

    HANDLE    m_heap;
    wchar_t*  m_pchNext;
    wchar_t*  m_pchLimit;
    HEADER*   m_phdrCur;
    DWORD     m_dwGranularity;

    static SIZE_T RoundUp(SIZE_T cb, SIZE_T units)
    {
        return ((cb + units - 1) / units) * units;
    }

    wchar_t* AllocString(const wchar_t* pchBegin, const wchar_t* pchEnd)
    {
        SIZE_T cchTotal = pchEnd - pchBegin + 1;
        if (cchTotal > MAX_CHARALLOC) 
            throw length_error("String too big.");

        wchar_t* psz = m_pchNext;
        if (m_pchNext + cchTotal <= m_pchLimit) 
        {
            m_pchNext += cchTotal;
            wmemcpy(psz, pchBegin, cchTotal);
            return psz;
        }

        SIZE_T cbAlloc = RoundUp(cchTotal * sizeof(wchar_t) + sizeof(HEADER), m_dwGranularity);
        BYTE* pbNext = static_cast<BYTE*>( HeapAlloc(m_heap, 0, cbAlloc) );
        if (pbNext == nullptr) 
            throw bad_alloc();

        m_pchLimit = reinterpret_cast<wchar_t*>(pbNext + cbAlloc);
        HEADER* phdrCur = reinterpret_cast<HEADER*>(pbNext);
        phdrCur->m_phdrPrev = m_phdrCur;
        phdrCur->m_cb = cbAlloc;
        m_phdrCur = phdrCur;
        m_pchNext = reinterpret_cast<wchar_t*>(phdrCur + 1);
        return AllocString(pchBegin, pchEnd);
    }

    StringPoolUsingHeapAlloc(const StringPoolUsingHeapAlloc &);
    StringPoolUsingHeapAlloc & operator=(const StringPoolUsingHeapAlloc &);
};

//--------------------------------------------------------------------------
// String pool allocator that uses standard C++ (no Win32 stuff) and new[].
//--------------------------------------------------------------------------
class StringPoolUsingNew
{
public:

    StringPoolUsingNew()
        : m_pchNext(NULL), 
        m_pchLimit(NULL), 
        m_currChunk(NULL)
    {
    }

    ~StringPoolUsingNew()
    {
        for (auto it = m_chunks.begin(); it != m_chunks.end(); ++it)
            delete *it;
    }

    const wchar_t* DuplicateString(const wstring& source)
    {
        return AllocString(source.c_str(), source.c_str() + source.length());
    }

private:

    class Chunk
    {
    public:
        explicit Chunk(size_t maxCharCount)
        {
            m_data = new wchar_t[maxCharCount];
            m_maxCharCount = maxCharCount;
        }

        ~Chunk()
        {
            delete [] m_data;
        }

        wchar_t* Begin()             { return m_data; }
        const wchar_t* Begin() const { return m_data; }
        size_t Length() const        { return m_maxCharCount; }

    private:
        Chunk(const Chunk&);
        Chunk& operator=(const Chunk&);

        wchar_t * m_data;
        size_t m_maxCharCount;
    };

    static const size_t kMinChunkCharCount = 16000;
    static const size_t kMaxCharAlloc = 1024*1024;

    wchar_t*  m_pchNext;
    wchar_t*  m_pchLimit;
    Chunk*    m_currChunk;
    vector<Chunk*> m_chunks;

    wchar_t* AllocString(const wchar_t* pchBegin, const wchar_t* pchEnd)
    {
        const size_t cchTotal = pchEnd - pchBegin + 1;
        if (cchTotal > kMaxCharAlloc) 
            throw length_error("String too big.");

        wchar_t* dest = m_pchNext;
        if (m_pchNext + cchTotal <= m_pchLimit) 
        {
            m_pchNext += cchTotal;
            const size_t copyCount = cchTotal - 1;
            if (copyCount != 0)
                wmemcpy(dest, pchBegin, copyCount);
            dest[copyCount] = L'\0';
            return dest;
        }

        const size_t newChunkSize = max(cchTotal, kMinChunkCharCount);
        Chunk* newChunk = new Chunk(newChunkSize);
        m_chunks.push_back(newChunk);

        m_pchNext = newChunk->Begin();
        m_pchLimit = newChunk->Begin() + newChunk->Length();
        m_currChunk = newChunk;

        return AllocString(pchBegin, pchEnd);
    }

    StringPoolUsingNew(const StringPoolUsingNew&);
    StringPoolUsingNew& operator=(const StringPoolUsingNew&);
};

//--------------------------------------------------------------------------
// This is just a simple vector<wstring>, to compare performance of this 
// simple and easy approach vs. the other pool allocators.
//--------------------------------------------------------------------------
class StringPoolVectorOfString
{
public:

    StringPoolVectorOfString()
    {
    }

    ~StringPoolVectorOfString()
    {
    }

    const wchar_t* DuplicateString(const wstring& source)
    {
        m_strings.push_back(source);
        return m_strings.back().c_str();
    }

private:
    // Simplest case: a STL vector of STL strings
    vector<wstring> m_strings;

    StringPoolVectorOfString(const StringPoolVectorOfString&);
    StringPoolVectorOfString& operator=(const StringPoolVectorOfString&);
};

//------------------------------------------------------------------------
//                          Perf Measurement
//------------------------------------------------------------------------

long long Counter() 
{
    LARGE_INTEGER li;
    QueryPerformanceCounter(&li);
    return li.QuadPart;
}

long long Frequency() 
{
    LARGE_INTEGER li;
    QueryPerformanceFrequency(&li);
    return li.QuadPart;
}

//--------------------------------------------------------------------------
// Tests
//--------------------------------------------------------------------------

// Prints the first N strings in a vector-like container.
template <typename Container>
void PrintFirst(const Container & c, const size_t firstN)
{
    const size_t n = min(firstN, c.size());
    for (size_t i = 0; i < n; i++)
        wcout << "#" << (i+1) << ": " << c[i] << '\n';
    wcout << endl;
}

// Prints the first N strings using the specified allocator.
template <typename Allocator>
void VerifyAllocator(const vector<wstring>& source, const size_t firstN, const char* allocatorName)
{
    const size_t n = min(firstN, source.size());

    Allocator alloc;
    vector<const wchar_t*> v;

    for (size_t i = 0; i < n; i++)
    {
        v.push_back( alloc.DuplicateString(source[i]) );
    }

    wcout << allocatorName << " :\n";
    PrintFirst(v, n);
}

// Tests a given allocator, returning the execution time in ms.
template <typename Allocator>
double TestAllocator(const vector<wstring>& source, const char* allocatorName)
{
    wcout << "Testing " << allocatorName << " : ";
    long long start = Counter();
    {
        Allocator alloc;
        vector<const wchar_t*> v;

        for (auto it = source.begin(); it != source.end(); ++it)
        {
            v.push_back( alloc.DuplicateString(*it) );
        }
    }
    long long finish = Counter();
    const double time = (finish - start) * 1000.0 / Frequency(); // ms

    wcout << time << " ms\n";
    return time;
}

// Calculates the average in a vector of doubles.
double Average(const vector<double>& data)
{
    if (data.empty())
        throw invalid_argument("Can't compute average of empty vector.");

    double sum = data[0];
    const size_t count = data.size();
    for (size_t i = 1; i < count; ++i)
    {
        sum += data[i];
    }
    return (sum / count);
}

// App entry-point ("test driver").
int main()
{
    static const int kExitOk = 0;
    static const int kExitError = 1;
    try
    {
        wcout << '\n';
        wcout << "Testing VirtualAlloc vs. HeapAlloc vs. new[] allocators vs STL strings.\n";
        wcout << "-----------------------------------------------------------------------\n\n"; 

        wcout << "Preparing some strings for testing...\n";

        const auto shuffled = []() -> vector<wstring> 
        {
            const wstring lorem[] = {
                L"Lorem ipsum dolor sit amet, consectetuer adipiscing elit.",
                L"Maecenas porttitor congue massa. Fusce posuere, magna sed",
                L"pulvinar ultricies, purus lectus malesuada libero,",
                L"sit amet commodo magna eros quis urna.",
                L"Nunc viverra imperdiet enim. Fusce est. Vivamus a tellus.",
                L"Pellentesque habitant morbi tristique senectus et netus et",
                L"malesuada fames ac turpis egestas. Proin pharetra nonummy pede.",
                L"Mauris et orci."
            };

            vector<wstring> v;
#ifdef _DEBUG
            static const int kLoopCount = 10;
#else
            static const int kLoopCount = 400*1000;
#endif
            for (long long i = 0; i < kLoopCount; ++i) 
            {
                for (auto it = begin(lorem); it != end(lorem); ++it) 
                {
                    v.push_back((*it) + L" (#" + to_wstring(i) + L")");
                }
            }
            random_shuffle(v.begin(), v.end());

            return v;
        }();

        wcout << "Total string count: " << shuffled.size() << "\n\n";
        wcout << "Some verification output ...\n\n";
        wcout << "Original array of strings :\n";
        PrintFirst(shuffled, 5);

        VerifyAllocator<StringPoolUsingVirtualAlloc>(shuffled, 5, "VirtualAlloc");
        VerifyAllocator<StringPoolUsingHeapAlloc>(shuffled, 5, "HeapAlloc");
        VerifyAllocator<StringPoolUsingNew>(shuffled, 5, "new[]");
        VerifyAllocator<StringPoolVectorOfString>(shuffled, 5, "vector<wstring>");

        vector<double> timeVirtualAlloc;
        vector<double> timeHeapAlloc;
        vector<double> timeNew;
        vector<double> timeStlString;

        static const int kTestCount = 10;

        // First execution tests are discarded.
        wcout << "\nWarm up... discard first tests execution.\n";
        TestAllocator<StringPoolUsingVirtualAlloc>(shuffled, "VirtualAlloc");
        TestAllocator<StringPoolUsingHeapAlloc>(shuffled, "HeapAlloc");
        TestAllocator<StringPoolUsingNew>(shuffled, "new[]");
        TestAllocator<StringPoolVectorOfString>(shuffled, "vector<wstring>");

        // Run the tests several times and compute the average for each test.
        for (int i = 0; i < kTestCount; i++)
        {
            wcout << "\nTest loop #" << (i+1) << ":\n";
            timeVirtualAlloc.push_back( TestAllocator<StringPoolUsingVirtualAlloc>(shuffled, "VirtualAlloc") );
            timeHeapAlloc.push_back( TestAllocator<StringPoolUsingHeapAlloc>(shuffled, "HeapAlloc") );
            timeNew.push_back( TestAllocator<StringPoolUsingNew>(shuffled, "new[]") );
            timeStlString.push_back( TestAllocator<StringPoolVectorOfString>(shuffled, "vector<wstring>") );
        }

        // Print average times
        wcout << "\n\n--- Tests summary ---\n";
        wcout << "VirtualAlloc : " << Average(timeVirtualAlloc) << " ms\n";
        wcout << "HeapAlloc    : " << Average(timeHeapAlloc) << " ms\n";
        wcout << "new[]        : " << Average(timeNew) << " ms\n";
        wcout << "STL strings  : " << Average(timeStlString) << " ms\n";
        wcout << '\n';

        return kExitOk;
    }
    catch (const exception& e)
    {
        wcerr << "\n*** ERROR: " << e.what() << '\n';
        return kExitError;
    }
}

//////////////////////////////////////////////////////////////////////////// 
```

# objective-c - Objective-c根据单元格文本设置单元格附件类型？iOS SDK

> ID：14637927
> 
> 赞同：0
> 
> 时间：2013-02-01T00:52:27.053
> 
> 标签：objective-c, ios6, cell, textlabel, accessorytype

我有一个包含 2 个部分的动态表视图，每个部分有 4 行，由数组填充。

应该只检查一个单元格，目前没有。

我知道要检查的单元格的文本。

所以我的问题是，我可以根据单元格包含的文本为单元格设置附件类型吗？

像 IF cell.textLabel.text 等于 THIS 然后设置该单元格附件类型检查。

任何帮助都会很棒。

## 编辑 编辑 编辑 编辑

我到目前为止的代码，考虑到下面的评论是这样的：

```
 switch (indexPath.section) {
        case standardSection:
            serverLoc.textLabel.text = [self.serverSelection objectAtIndex:indexPath.row];
            if ([[self.serverSelection objectAtIndex:indexPath.row] rangeOfString:cellValue].location != NSNotFound) {
                serverLoc.accessoryType = UITableViewCellAccessoryCheckmark;
            }
            break;
        case qualitySection:
            serverLoc.textLabel.text = [self.qServerSelection objectAtIndex:indexPath.row];
            if ([[self.qServerSelection objectAtIndex:indexPath.row] rangeOfString:cellValue].location != NSNotFound) {
                serverLoc.accessoryType = UITableViewCellAccessoryCheckmark;
            }
            break;
        default:
            break;
    } 
```

这些部分将它们设置为如下所示：

第 1 节：

伊利诺伊州芝加哥市 英国伦敦 加利福尼亚州圣何塞 华盛顿特区

第 2 节：

伊利诺伊州芝加哥 (Q) 英国伦敦 (Q) 加利福尼亚州圣何塞 (Q) 华盛顿特区 (Q)

如您所见，我正在检查 CellValue 的值。CellValue 是使用前一个视图中的委托设置的。

假设这个时间等于英国伦敦。当我进入这个视图时，英国伦敦和英国伦敦 (Q) 都被选中，我只想要没有 (Q) 的那个被选中。即使使用“isEqualToString”也会发生这种情况。如果 cellValue 等于英国伦敦 (Q)，则此方法有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:07:29.853

在`cellForRowAtIndexPath`. 创建单元格后，只需检查数组中的值（假设数组包含 NSStrings）。所以：

```
if ([[self.myArray objectAtIndex:indexPath.row] isEqualToString:@"the string I want"]) {
     cell.accessoryType = UITableViewCellAccessoryCheckmark;
} 
```

编辑：根据您的评论，所有字符串都将以相同的内容开头，但可能有所不同。你可以这样做：

```
if ([[self.myArray objectAtIndex:indexPath.row] rangeOfString:@"London,"].location != NSNotFound) {
     cell.accessoryType = UITableViewCellAccessoryCheckmark;
} 
```

这表示如果 NSString 包含“London”，则计算结果为 YES。或者换句话说，NSString 包含“London”，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:59:06.937

您应该在创建单元格时尝试设置该值（从“模型”而不是通过查看单元格的标签）。

如果某些情况导致值发生变化，则应更新模型（创建每个单元格时使用的数据）；然后打电话`[self.tableview reloadData]`。

# css - 请问[attribute~=value]和[attribute*=value]有什么区别

> ID：14637929
> 
> 赞同：2
> 
> 时间：2013-02-01T00:52:37.787
> 
> 标签：css, attributes

找不到这两个选择器之间的区别。两者似乎都在做同样的事情，即根据包含给定字符串的特定属性值选择标签。

对于 [attribute~=value]：[http ://www.w3schools.com/cssref/sel_attribute_value_contains.asp](http://www.w3schools.com/cssref/sel_attribute_value_contains.asp)

对于 [attribute*=value]：[http ://www.w3schools.com/cssref/sel_attr_contain.asp](http://www.w3schools.com/cssref/sel_attr_contain.asp)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T00:55:39.517

第一个 ( `[attribute~=value]`) 是空格分隔的搜索...

```
<!-- Would match -->
<div class="value another"></div> 
```

...而第二个 ( `[attribute*=value]`) 是子字符串搜索...

```
<!-- Would match -->
<div class="a_value"></div> 
```

W3Schools 似乎并没有把这种区别说得很清楚。使用[更好的资源](https://developer.mozilla.org/en-US/docs/CSS/Attribute_selectors)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T00:58:00.810

[attribute~="value"] 选择包含由空格分隔的给定单词的元素，而 [attribute*="value"] 选择包含给定子字符串的元素。

例如，[data-test~="value"] 不会匹配下面的 div，而 [data-test*="value"] 会匹配。

```
<div data-test="my values go here"></div> 
```

# database - 使用 Flash 将 iPad 应用程序连接到本地数据库？

> ID：14637936
> 
> 赞同：0
> 
> 时间：2013-02-01T00:53:07.933
> 
> 标签：database, ipad, flash, local

我目前正在创建一个测验应用程序，它将在 iPad 上的两个不同应用程序之间发送数据。有没有办法通过本地数据库将两个 Flash CS6 应用程序连接在一起？这些闪存应用程序将在 iPad 上使用。

信息不能在线访问是非常重要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T05:55:30.223

我记得 iOS 非常沙盒，无法在 2 个应用程序之间共享本地数据库。

您可以考虑为您的应用程序分配不同的 URL 前缀/方案，但我不确定 Flash 对这些设置的支持程度。如果你让它工作，那么理论上你可以为每个应用程序维护一个本地数据库，并使用 URL 前缀在应用程序之间进行通信。当然，维护和同步 2 个独立的数据库可能会很痛苦。

实际上，我倾向于的解决方案是将公共数据库存储在没有前端的服务器上，只是一个简单的 API。这将阻止用户在线访问数据，同时允许任意数量的应用程序随意访问它。如果您曾经扩展到 Android 或其他移动平台，这将允许相同的数据也可以轻松共享。

# ios - iOS Chrome 中未设置 window.opener

> ID：14637937
> 
> 赞同：7
> 
> 时间：2013-02-01T00:53:18.743
> 
> 标签：ios, google-chrome, chrome-ios

在一个文件中，我有

```
<a href="t2.html" target="_blank">go</a> 
```

在`t2.html`我有

```
<script>
document.write(window.opener);
</script> 
```

在 iOS 上的 Safari 上，在 Mac 上的 Chrome 上以及几乎所有其他浏览器上，它都会`[object Window]`像您期望的那样打印出来。

在 iOS 上的 Chrome 上，我得到`null`.

如何到达打开此窗口的窗口？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-05-13T22:06:16.680

此代码解决了您正在谈论的问题（特别是针对 Chrome ios 不喜欢“弹出窗口”的问题），但参考了 Paypal Adaptive Payments，它会打开“弹出窗口”并重定向到 Paypal 页面进行付款。

关键是你必须：

1.  直接从按钮/链接单击启动 window.open
2.  您必须使用 _blank 作为窗口“名称”（而不是选择您自己的）

您想要/需要的主要内容是：

```
var win;

//VERY IMPORTANT - You must use '_blank' and NOT name the window if you want it to work with chrome ios on iphone
    //See this bug report from google explaining the issue: https://code.google.com/p/chromium/issues/detail?id=136610
win = window.open(paypalURL,'_blank');

//Initiate returnFromPayPal function if the pop up window is closed
if (win && win.closed) {
    returnFromPayPal();
} 
```

这是您可以遵循的完整代码（忽略任何不适用于您正在做的事情）。

```
<div>
    <?php $payUrl = 'https://www.paypal.com/webapps/adaptivepayment/flow/pay?expType=mini&paykey=' . $payKey ?>

    <button onclick="loadPayPalPage('<?php echo $payUrl; ?>')" title="Pay online with PayPal">PayPal</button>
</div>
<script>
    function loadPayPalPage(paypalURL)
    {
        var ua = navigator.userAgent;
        var pollingInterval = 0;
        var win;
        // mobile device
        if (ua.match(/iPhone|iPod|Android|Blackberry.*WebKit/i)) {
            //VERY IMPORTANT - You must use '_blank' and NOT name the window if you want it to work with chrome ios on iphone
                //See this bug report from google explaining the issue: https://code.google.com/p/chromium/issues/detail?id=136610
            win = window.open(paypalURL,'_blank');

            pollingInterval = setInterval(function() {
                if (win && win.closed) {
                    clearInterval(pollingInterval);
                    returnFromPayPal();
                }
            } , 1000);
        }
        else
        {
            //Desktop device
            var width = 400,
                height = 550,
                left,
                top;

            if (window.outerWidth) {
                left = Math.round((window.outerWidth - width) / 2) + window.screenX;
                top = Math.round((window.outerHeight - height) / 2) + window.screenY;
            } else if (window.screen.width) {
                left = Math.round((window.screen.width - width) / 2);
                top = Math.round((window.screen.height - height) / 2);
            }

            //VERY IMPORTANT - You must use '_blank' and NOT name the window if you want it to work with chrome ios on iphone
                //See this bug report from google explaining the issue: https://code.google.com/p/chromium/issues/detail?id=136610
            win = window.open(paypalURL,'_blank','top=' + top + ', left=' + left + ', width=' + width + ', height=' + height + ', location=0, status=0, toolbar=0, menubar=0, resizable=0, scrollbars=1');

            pollingInterval = setInterval(function() {
                if (win && win.closed) {
                    clearInterval(pollingInterval);
                    returnFromPayPal();
                }
            } , 1000);
        }
    }

    var returnFromPayPal = function()
    {
       location.replace("www.yourdomain.com/paypalStatusCheck.php");
        // Here you would need to pass on the payKey to your server side handle (use session variable) to call the PaymentDetails API to make sure Payment has been successful
        // based on the payment status- redirect to your success or cancel/failed page
    }
</script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-05T17:08:02.027

这似乎是一个更大的故事。请参阅此处的错误跟踪器：

[http://code.google.com/p/chromium/issues/detail?id=136610&q=window.opener&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status%20Owner%20Summary](http://code.google.com/p/chromium/issues/detail?id=136610&q=window.opener&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status%20Owner%20Summary)

但似乎 iframe 可以处理父属性，所以也许您可以将您的应用程序从使用弹出窗口切换到使用覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-16T05:53:40.763

如果要将值从子级传递给父级，请使用以下代码。

将以下代码添加到父页面：

```
var hidden, state, visibilityChange;
        if (typeof document.hidden !== "undefined") {
            hidden = "hidden";
            visibilityChange = "visibilitychange";
            state = "visibilityState";
        } else if (typeof document.mozHidden !== "undefined") {
            hidden = "mozHidden";
            visibilityChange = "mozvisibilitychange";
            state = "mozVisibilityState";
        } else if (typeof document.msHidden !== "undefined") {
            hidden = "msHidden";
            visibilityChange = "msvisibilitychange";
            state = "msVisibilityState";
        } else if (typeof document.webkitHidden !== "undefined") {
            hidden = "webkitHidden";
            visibilityChange = "webkitvisibilitychange";
            state = "webkitVisibilityState";
        }

        // Add a listener that constantly changes the title
        document.addEventListener(visibilityChange, function () {

            if (localStorage.getItem("AccountName")) {
                $("#txtGrower").val(localStorage.getItem("AccountName"));
            }

            if (localStorage.getItem("AccountID")) {
                $("#hdnGrower").val(localStorage.getItem("AccountID"));
            }

           }, false); 
```

在子页面中添加以下内容（任何首选事件）

```
function CloseChildAndLoadValuesToParent() {

              localStorage.setItem("AccountName", 'MyAccountName');
              localStorage.setItem("AccountID", 'MyAccountID');

              window.close();

            } 
```

# scala - 在 Scala 中自动生成隐式包装器的工具

> ID：14637941
> 
> 赞同：0
> 
> 时间：2013-02-01T00:53:57.027
> 
> 标签：scala, code-generation, implicit-conversion

我发现自己编写了很多样板 scala 来在函数模块周围添加隐式类包装器。例如，如果我为 Seqs 定义了这个函数

```
def takeWhileRight[T](p: T=>Boolean)(s: Seq[T]): Seq[T] = s.reverse.takeWhile(p).reverse 
```

我需要编写这个（完全确定的）隐式包装器：

```
implicit class EnrichSeq[T](value: Seq[T]) {

    def takeWhileRight(p: T=>Boolean): Seq[T] = SeqOps.takeWhileRight(p)(value)
} 
```

这是众多例子之一。在每种情况下，隐式包装器最终都可以从它转发到的函数中机械地派生出来。

是否有人知道可以自动生成此类包装器的任何工具或代码生成器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:39:26.977

您已经在使用 Scala 2.10 的“隐式类”了吗？新语法糖的全部意义（唯一一点）是让您不必编写隐式转换方法。

# c++ - C++ 计算器跳过 Else 语句

> ID：14637942
> 
> 赞同：0
> 
> 时间：2013-02-01T00:53:59.057
> 
> 标签：c++

我正在用 C++ 制作一个简单的计算器。但是，该程序并未完全按照应有的方式运行。运行时，trig if 语句执行良好，但是基本算术 else 语句不起作用。我已经确定代码没有执行 else 语句并且想知道如何修复它。else 语句中的代码工作正常，因为我已经注释掉了 if 语句。帮助？

这是我的代码：

```
#include "stdafx.h"
#include <iostream>
#include <string>
#include <cmath>

int main()
{
    double input = 0;
    double firstnumber = 0;
    double secondnumber = 0;

    std::string function;
    std::string operation;

    std::cout << "Enter your calculation: ";
    std::cin >> function;   

    if(function == "sin" || "cos" || "tan")
    {
        if(function == "sin")
        {
            std::cin >> input;
            std::cout << "The sine is " << sin(input) << std::endl;
            system("PAUSE");
        }
        else if(function == "cos")
        {
            std::cin >> input;
            std::cout << "The cosine is " << cos(input) << std::endl;
            system("PAUSE");

        }
        else if(function == "tan")
        {
            std::cin >> input;
            std::cout << "The tangent is " << tan(input) << std::endl;
            system("PAUSE");
        }
    }
    else
    {       

        firstnumber = ::atof(function.c_str());
        std::cin >> operation;
        std::cin >> secondnumber;

        double valueadd = firstnumber + secondnumber;
        double valuesubtract = firstnumber - secondnumber;
        double valuemultiply = firstnumber * secondnumber;
        double valuedivide = firstnumber / secondnumber;

        if(operation == "+")
        {      
            std::cout << " = " << valueadd << std::endl;
            system("PAUSE");
        }
        else if(operation == "-")
        {          
            std::cout << " = " << valuesubtract << std::endl;
            system("PAUSE");
        }
        else if(function == "*")
        {
            std::cout << " = " << valuemultiply << std::endl;
            system("PAUSE");
        }
        else if(function == "/")
        {
            std::cout << " = " << valuedivide << std::endl;
            system("PAUSE");
        }

        else
        {
            std::cout << "Error" << std::endl;
            return 0;
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:55:24.537

这条线是错误的。

```
if(function == "sin" || "cos" || "tan") 
```

它应该是

```
if((function == "sin") || (function == "cos") || (function == "tan")) 
```

请注意，检查实际上是没有意义的，因为您已经分别检查了它们。`if`您可以通过在, `else if`,`else`链中执行此操作来整理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:58:59.753

由于您想为每个三角函数做一些不同的事情，所以您应该只有一个`if...else if...else if...else if...else`链。无需像您一样嵌套 if 语句。事实上，它可能效率较低，因为您检查每个条件两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T00:56:07.350

改变：

```
if(function == "sin" || "cos" || "tan") 
```

进入：

```
if ((function == "sin") || (function == "cos") || (function == "tan")) 
```

您首先计算表达式`"sin" || "cos" || "tan"`，然后尝试将字符串与之进行比较。

但是，事实上，这个两步过程并不是真正需要的。你可以简单地做这样的事情：

```
if (function == "sin") {
    std::cin >> input;
    std::cout << "The sine is " << sin (input) << std::endl;
    system ("PAUSE");
} else if (function == "cos") {
    std::cin >> input;
    std::cout << "The cosine is " << cos (input) << std::endl;
    system ("PAUSE");
} else if (function == "tan") {
    std::cin >> input;
    std::cout << "The tangent is " << tan (input) << std::endl;
    system ("PAUSE");
} else {
    // It's neither sin, cos nor tan if you get here.

    firstnumber = ::atof (function.c_str ());

    // and the rest of your stuff in here.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T00:56:08.817

您必须分别写出每个条件。以下代码行编译，但它并没有按照你的想法做：

```
if (function == "sin" || "cos" || "tan") 
```

将其更改为以下内容：

```
if (function == "sin" || function == "cos" || function == "tan") 
```

# html - 当它引用 IE=edge,chrome=1 时，什么是 X-UA-Compatible？

> ID：14637943
> 
> 赞同：56
> 
> 时间：2013-02-01T00:54:05.513
> 
> 标签：html, meta, x-ua-compatible

我刚刚在野外看到了这个元标签，想知道它确实如此，为什么要使用它？

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> 
```

阅读 About.com 上的[文档](http://webdesign.about.com/od/metataglibraries/p/x-ua-compatible-meta-tag.htm)，它说：

> “IE=edge”告诉 Internet Explorer 使用该版本 IE 可用的最高模式。Internet Explorer 8 最多可以支持 IE8 模式，IE9 可以支持 IE9 模式等等。

但是`chrome=1`标签呢？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-01T00:56:47.100

它适用于 Google 的[Chrome Frame](http://www.google.com/chromeframe)浏览器插件。

ChromeFrame 可以安装在各种版本的 IE 上（对于不能很好地配合现代网络功能的旧版本尤其方便）。*它本质上是在*IE 中运行 chrome 浏览器。

在元标记的情况下，IE 应该在标准模式下运行（最新版本“Edge”） - 如果存在，则激活 chrome 框架。

我通常为旧版本的 IE 做一些有条件的浏览器工作，允许用户安装插件作为选项。

更多信息： [chrome frame API](https://developers.google.com/chrome/chrome-frame/)

（请记住，Google Chrome Frame 不再受支持）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-09-16T19:59:19.757

此外，从 IE11 的“边缘”模式开始，它曾经是实验性的，现在是“首选”模式 - 请参阅[IE11 预览中的兼容性更改](http://msdn.microsoft.com/en-us/library/ie/bg182625%28v=vs.85%29.aspx)

此外，“文档模式”通常在 IE11 中一起被弃用，因此您可能应该尝试停止依赖它们。

# ajax - CodeIgniter 不允许使用 QUERY_STRING uri 协议的字符

> ID：14637947
> 
> 赞同：1
> 
> 时间：2013-02-01T00:54:32.030
> 
> 标签：ajax, codeigniter, query-string, encodeuricomponent

我一直在做一个项目，并在 localhost 以及免费的 Web 服务器上对其进行了测试，并且运行良好。但是，当我拥有自己的域和网络托管服务时，该网站停止工作。

为了使它工作，我不得不将 RewriteRule 更改为

```
 RewriteRule ^(.*)$ /index.php?$1 [L] 
```

然后设置

```
 $config['uri_protocol'] = 'QUERY_STRING'; 
```

但是，像这样的链接；

```
 http://www.mydomain.com/ajax/membersearch/anemail%40here.com 
```

以前可以工作，但现在它返回一个 CI 错误，说“您提交的 URI 包含不允许的字符。”

在我不得不更改 RewriteRule 和 uri_protocol 之前，这非常有效，所以我想知道是什么使它现在不起作用，以及如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:58:45.270

您可能需要更新 config.php 文件。用以下行替换默认的允许字符设置：

```
$config['permitted_uri_chars'] = 'a-z 0-9~%\.\:_\+-,'; 
```

# c++ - 当有目的地多次链接同一个对象时，如何避免多个定义错误？

> ID：14637950
> 
> 赞同：1
> 
> 时间：2013-02-01T00:55:07.500
> 
> 标签：c++, class, gcc, makefile, relationship

> 我正在使用 gnu make 和 gcc 进行编译。我在 linux (Ubuntu)

这是游戏黑杰克的图表，其中节点代表最终的目标文件。 ![在此处输入图像描述](../Images/70667558473c6b58d3471f4c68d6c111.png)

* * *

我已经组织了每个类都在它自己的文件夹中的代码。

```
tree -d
.
└── classes
    ├── dealer
    │   └── hand
    ├── deck
    │   └── card
    │       ├── card_color
    │       ├── card_suit
    │       ├── card_value
    │       └── colorizer
    ├── discard_pile
    │   └── card
    ├── user
    │   └── hand
    │       └── card
    └── user_choice 
```

为了使文件系统表现得像一个图，一些目录是符号链接。
没有重复的代码。
例如，如果实际卡片代码在目录卡组中，则 hand 和 discard_pile 文件夹在其中具有指向该目录的符号链接。

* * *

我遇到了多个定义错误，因为我的程序链接到所有子目录对象文件。
它将遵循符号链接并最终不止一次地收集一些目标文件。
我不能告诉它忽略符号链接的文件夹，因为有时需要遵循它们。例如：如果我要在庄家文件夹中制作一个驱动程序，则需要收集 hand、card、card_color、card_suit、card_value、colorizer 对象（即使 hand 文件夹是符号链接）。

* * *

有没有办法继续收集重复的目标文件，但在链接之前告诉 gcc 或 make 忽略重复项？
因为它们是符号链接，所以路径名称不同。
此外，可能存在对象名称相同但实现不同的情况。
我不确定如何识别重复的目标文件确实是同一个文件，不应多次链接。

* * *

我不想通过询问有关如何管理大型和扩展项目（实体关系复杂）的建议来使这个问题过于笼统，但是如果您认为我的结构是荒谬或有问题的，请指出问题和其他方式你会去做的。我试图避免将所有源文件放在一个目录中，因为没有类图，关系将难以派生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T01:01:26.160

仅仅因为您在不同的上下文中多次使用相同的功能并不意味着您需要多次链接它。

您`card.cpp`需要进入一个可供所有不同组件使用的公共位置。

通常，一个项目将具有一组头文件和一组源文件（例如 .cpp 或 .c）。当我处理小型项目时——不到十几个源文件，我只是将所有文件保存在一个目录中。但是把它分开一点也没有错。但是，一个文件应该只在目录结构中的一个位置 [!!NO LINKS!!]。

头文件要么与它们各自的源文件一起，要么在单独的“包含”目录中。

通常，源文件并不“关心”头文件的位置，它们只是“某处”。相反，您告诉编译器在“../some-component”中查找头文件`-I ../some-component`。

并且每个源文件只编译和链接一次，形成最终的二进制文件。

# javascript - Javascript OuterHTML：如何使用字符串文字？

> ID：14637954
> 
> 赞同：2
> 
> 时间：2013-02-01T00:55:24.677
> 
> 标签：javascript, html, string, outerhtml

首先是一些 HTML 代码：

```
<div id="content_4" class="content" style="background:url(pic1.gif)"></div>
<div id="content_4_a" class="content" style="background:url(pic2.gif);
    display:none"></div> 
```

这是JS代码：

```
function getOuterHMTL(element){
    return element.outerHTML;
}

function switchDisplayOuter(elementToHide, elementToShow, stringly){
    document.getElementsByName(elementToShow).outerHTML=stringly;
    document.getElementById(elementToHide).style.display="none";
    document.getElementsByName(elementToShow)[0].style.display="";
} 
```

现在这个 HTML 代码可以工作了（当我点击它时，div 切换并且图片改变了）：

```
<area shape="rect" coords="0,252,98,337" onMouseOver="switchDisplayOuter(
    'content_4', 'content_4_a', getOuterHMTL('content_4_a) )"> 
```

但不是这个：

```
<area shape="rect" coords="0,252,98,337" onMouseOver="switchDisplayOuter(
    'content_4', 'content_4_a', '<div id="content_4_a" class="content" 
    style="background:url(pic2.gif); display:none"></div>' )"> 
```

在 Firefox 中调试时，它只会给我一个错误代码：

```
Error: SyntaxError: unterminated string literal
'<div id= 
```

有人知道正确的代码而不使用函数 getOuterHMTL(element) 但使用“普通”字符串文字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:58:09.067

您需要将您的`"`内部`onMouseOver`属性值替换为`\'`：

```
<area shape="rect" coords="0,252,98,337" onMouseOver="switchDisplayOuter('content_4', 'content_4_a', '<div id=\'content_4_a\' class=\'content\'  style=\'background:url(pic2.gif); display:none\'></div>' )"> 
```

这是因为您的`area`标签的`onMouseOver`属性值包含在`"`.

# c++ - 使用预处理器定义在一组类型之间进行选择

> ID：14637957
> 
> 赞同：1
> 
> 时间：2013-02-01T00:55:31.780
> 
> 标签：c++, c-preprocessor

我有一个预处理代码来选择使用哪个向量类，如下所示：

```
#define USE_BOOST_VECTOR

#ifdef USE_BOOST_VECTOR
    #include <boost/container/vector.hpp>
    #define VECTOR boost::container::vector
#else
    #include <vector>
    #define VECTOR std::vector
#endif 
```

我不确定这是否是一个好方法。如果我有更多的选择，我该怎么办？

弄清楚是否有更多选择

```
#define USE_MY_VECTOR 1
#define USE_BOOST_VECTOR 2
#define USE_STD_VECTOR 3

#define CHOOSE_VECTOR USE_BOOST_VECTOR

#if CHOOSE_VECTOR == USE_MY_VECTOR
    #include "Vector.h"
    #define VECTOR Vector
#elif CHOOSE_VECTOR == USE_BOOST_VECTOR 
    #include <boost/container/vector.hpp>
    #define VECTOR boost::container::vector
#elif CHOOSE_VECTOR == USE_STD_VECTOR
    #include <vector>
    #define VECTOR std::vector
#endif 
```

但我需要定义 1、2、3 等以获得更多选项。只是为了脑力劳动，有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:09:48.377

不要使用预处理器宏，除非你别无选择——typedef、常量，如果真的需要，模板通常可以达到预期的结果，同时更安全。

现在，除非您有充分的理由更喜欢 Boost 向量而不是 std::vector，否则请使用 std::vector。为什么？因为如果你不知道自己想要什么，std 命名空间提供的东西应该绰绰有余。

编辑：就像 leemes 所说，您需要 C++11 才能使用模板类型别名。

```
#define USE_BOOST_VECTOR

#ifdef USE_BOOST_VECTOR
    #include <boost/container/vector.hpp>
    template <typename T> using VECTOR = boost::container::vector<T>;
#else
    #include <vector>
    template <typename T> using VECTOR = std::vector<T>;
#endif

// ....
// You could then use it with
VECTOR<int> vec; 
```

[最后，这里是关于模板化 typedef 别名](https://stackoverflow.com/questions/2795023/c-template-typedef)的更多信息

如果您没有 C++11 编译器，则可以使用命名空间别名：

```
#define USE_BOOST_VECTOR

#ifdef USE_BOOST_VECTOR
    #include <boost/container/vector.hpp>
    namespace Container = boost::container;
#else
    #include <vector>
    namespace Container = std;
#endif

//And use it with...
Container::vector<int> vec; 
```

我还需要在这里补充一点，上面的方法会导致一些非常混乱的结果。我强烈建议您基本上预先决定要使用哪种矢量实现，并一劳永逸地摆脱您的预处理器宏。随着时间的推移，您的代码会感谢您:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:56:28.983

这是一个坏主意，因为预处理器的用途与您使用它们的用途完全不同。更具体地说，它们用于扩展您正在使用的语言。这可能是一些简单的事情，比如为语言中的命令创建别名，也可能是复杂的事情，比如向语言中添加新的语义结构，例如添加对象面向过程语言的编程能力。无论如何，不​​要在编译时选择将哪些类库加载到您的程序中。我的建议是创建一个接口类，然后从这个类继承两个类。一个类将作为 boost 向量的包装器，而另一个作为 std::vector 的包装器。这样，您不仅可以在编译时（静态）选择实现，

有关详细信息，请参阅以下链接： [OOP 一个很好的解释](http://blog.nickbelhomme.com/php/how-i-explained-object-oriented-programming-to-my-wife_356)

# ruby-on-rails-3 - rails activerecord _id 属性中的后缀

> ID：14637963
> 
> 赞同：2
> 
> 时间：2013-02-01T00:55:46.927
> 
> 标签：ruby-on-rails-3, activerecord

在活动记录中使用“_id”后缀作为字段名称的含义是什么？

```
 t.string :foo_id 
```

这是否总是假定它是“foo”表的外键？

使用类似的东西会更好吗

```
 t.string :foo_id_value 
```

避免与导轨产生歧义？

这个想法是这个 id 值与外键无关，不一定是唯一的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-02T01:05:49.800

您可能会收到一条奇怪的验证消息。

给定具有类似验证的 Rails 3 模型`validates :foo_id, :presence => true`，当您`foo_id`留空并进行验证时，您将收到消息“Foo 不能为空白”，而不是预期的“Foo id 不能为空白”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T03:19:15.183

这是一个约定俗成的问题。根据我的经验，除非你这样做，否则你不会有任何问题`belongs_to :foo`

如果您想避免对其他开发人员产生歧义，那么是的，避免它是一个好主意。

# python - mac snow leopard Mac OS X 10.6.8安装mysql报错

> ID：14637964
> 
> 赞同：0
> 
> 时间：2013-02-01T00:55:51.563
> 
> 标签：python, mysql, django, macos

我是 Django 的新手，我不想用 SQLite 运行它，而是用我当前通过 PHP 设置的 MySQL 数据库来运行它。但是，我主要在 Mac 上编码（我的开发人员存在的祸根）并且我遇到了运行问题：

```
python setup.py build 
```

从我的 MySQL-python-1.2.4b4 文件夹中，它给了我以下错误。我尝试用谷歌搜索解决方案，但大多数结果显示 XCode4 for Mac OS Lion 或 Mountain Lion 出现错误，我正在运行 Snow Leopard。我为 Snow Leopard 找到的结果也不起作用。

```
running develop

running egg_info

writing MySQL_python.egg-info/PKG-INFO

writing top-level names to MySQL_python.egg-info/top_level.txt

writing dependency_links to MySQL_python.egg-info/dependency_links.txt

warning: manifest_maker: standard file '-c' not found

reading manifest file 'MySQL_python.egg-info/SOURCES.txt'

reading manifest template 'MANIFEST.in'

writing manifest file 'MySQL_python.egg-info/SOURCES.txt'

running build_ext

building '_mysql' extension

gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -pipe -Dversion_info=(1,2,4,'beta',4) -D__version__=1.2.4b4 -I/usr/local/mysql/include -I/System/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6 -c _mysql.c -o build/temp.macosx-10.6-universal-2.6/_mysql.o -g -Os -arch x86_64 -fno-common -D_P1003_1B_VISIBLE -DSIGNAL_WITH_VIO_CLOSE -DSIGNALS_DONT_BREAK_READ -DIGNORE_SIGHUP_SIGQUIT -DDONT_DECLARE_CXA_PURE_VIRTUAL

unable to execute gcc-4.2: No such file or directory

error: command 'gcc-4.2' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:56:16.490

由于您提到`xcodebuild`没有找到，最可能的解释是您尚未安装`Xcode`包含各种构建工具的版本，例如`gcc`构建包含在`MySQL-python`. `gcc-4.2`由于您在 OS X 10.6、Snow Leopard 上运行，因此`Xcode 3.2.6`您可以在免费注册后从 Apple Developer 网站免费下载10.6 的最新版本 Xcode 。例如，请参阅[此处的说明](https://apple.stackexchange.com/questions/25097/how-can-i-obtain-older-versions-of-xcode). 不幸的是，下载量很大。（用于更新 OS X 版本的 Xcode 的更新版本打包成更小的部分，但它们在 10.6 上不受支持。）好消息是：您只需执行一次，因为 10.6 的 Xcode 不太可能永远存在再次更新！

# iphone - ffmpeg rtmp 网络摄像头直播 iphone/pad 段大小太大

> ID：14637976
> 
> 赞同：1
> 
> 时间：2013-02-01T00:57:04.407
> 
> 标签：iphone, ffmpeg, rtmp, http-live-streaming

我正在对来自 red5 服务器的 rtmp 流进行转码，以用于在 iphone 或 ipad 设备上进行直播。我使用内置分段器从 git repo 构建了最新的 ffmpeg 版本，以使用以下内容创建 .ts 文件和 m3u8 播放列表文件：

```
ffmpeg -probesize 50k -i "rtmp://localhost/oflaDemo/red5StreamDemo live=1" \
-c:v libx264 -b:v 128k -vpre ipod320 -flags -global_header -map 0 \
-f segment -segment_time 3 -segment_list foo.m3u8 -segment_list_flags +live \
-segment_list_type m3u8 -segment_list_size 5 -segment_format mpegts foo%d.ts 
```

这工作正常，但即使设置为 3（-segment_time 3），我也无法获得小于约 12 秒的段大小。它似乎是由 libx264 vcodec 引起的。我错过了任何标志吗？

顺便说一句，您可以通过启动 red5 SimpleBroadcaster 示例来成功运行上面的 ffmpeg 命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T03:48:49.873

我怀疑这是因为共和党的规模。分段器需要 I 帧边界才能创建分段。

`ffmpeg -probesize 50k -i "rtmp://localhost/oflaDemo/red5StreamDemo live=1" \ -c:v libx264 -b:v 128k -g 90 -vpre ipod320 -flags -global_header -map 0 \ -f segment -segment_time 3 -segment_list foo.m3u8 -segment_list_flags +live \ -segment_list_type m3u8 -segment_list_size 5 -segment_format mpegts foo%d.ts`

添加 -g 90\. 可能会有所帮助。

# python - Python 列表索引错误

> ID：14637977
> 
> 赞同：0
> 
> 时间：2013-02-01T00:57:06.663
> 
> 标签：python, indexing, python-2.x

```
def getPrimeList(check):
    storedprimes = []
    i = 2
    while i <= check:
        if isPrime(check):
            storedprimes = storedprimes + [i]
        i = i + 1
    return storedprimes
def getPrimeFact(check):
    primelist = getPrimeList(check)
    prime_fact = []
    i = 0
    while check !=1:
        if check%primelist[i]==0:
            prime_fact=prime_fact+[primelist[i]]
            check = check/primelist[i]
        i = i + 1
        if i == len(primelist):
            i = 0
    return prime_fact
def getGCF(checks):
    a=0
    listofprimefacts=[]
    while a<len(checks):
        listofprimefacts=listofprimefacts+[getPrimeFact(checks[a])]
        a=a+1
    b=0
    storedprimes=[]
    while b<len(primefactlist):
        c=0
        while c<len(listofprimefacts[b]):
            if listofprimefacts[b][c] not in storedprimes:
                storedprimes=storedprimes+[listofprimefacts[b][c]]
            c=c+1
        b=b+1
    prime_exp=[]
    d=0
    while d<len(storedprimes):
        prime_exp=prime_exp+[0]
        d=d+1

    e=0
    while e<len(storedprimes):
        f=0
        while f<len(listofprimefacts):
            if f==0:
                prime_exp[e]=listofprimefacts[f].count(storedprimes[e])
            elif prime_exp[e]-(listofprimefacts[f].count(storedprimes[e]))>0:
                prime_exp[e]=listofprimefacts[f].count(storedprimes[e])                
            f=f+1
        e=e+1
    g=0
    GCF=1
    while g<len(primelist):
        GCF=GCF*(storedprime[g]**prime_exp[g])
        g=g+1
    return GCF 
```

我正在创建一个程序，该程序将使用这些函数来计算分数；但是，在 shell 中测试我的 GCF 函数后，我不断收到列表索引错误。我不知道，考虑到我 99% 确定我的索引没有问题，错误来自哪里，通常我不会在 SO 中发布这样一个“可修复”的问题，但这次我只是不知道问题是什么，再次感谢。

哦，这是确切的错误

```
File "<pyshell#1>", line 1, in <module>
    getGCF(checks)
  File "E:\CompProgramming\MidtermFuncts.py", line 31, in getGCF
    listofprimefacts=listofprimefacts+[getPrimeFact(checks[a])]
  File "E:\CompProgramming\MidtermFuncts.py", line 20, in getPrimeFact
    if check%primelist[i]==0:
IndexError: list index out of range 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:00:29.500

您可能想重新考虑如何解决这个问题。在当前形式下，您的代码真的很难使用。

这是我的做法：

```
def is_prime(n):
    for i in range(2, int(n ** 0.5) + 1):
        if n % i == 0:
            return False

    return True

def prime_factors(number):
    factors = []

    for i in range(2, number / 2):
        if number % i == 0 and is_prime(i):
            factors.append(i)

    return factors

def gcf(numbers):
    common_factors = prime_factors(numbers[0])

    for number in numbers[1:]:
        new_factors = prime_factors(number)
        common_factors = [factor for factor in common_factors if factor in new_factors]

    return max(common_factors) 
```

这一行就在这里：

```
common_factors = [factor for factor in common_factors if factor in new_factors] 
```

是一个列表理解。您可以将其展开到另一个`for`循环中：

```
temp = []

for factor in common_factors:
    if factor in new_factors:
        temp.append(factor)

common_factors = list(temp)  # Pass by value, not by reference 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:05:41.733

你混淆了你的`i`功能；你测试是否是素数，*不是*；这是正确的功能：`check``getPrimeList()``check` *`i`*

 *```
def getPrimeList(check):
    storedprimes = []
    i = 2
    while i <= check:
        if isPrime(i):  # *not* `check`! 
            storedprimes = storedprimes + [i]
        i = i + 1
    return storedprimes 
```

这`primelist`将被设置为一个空列表（`getPrimeList(check)`返回一个空列表），并且您的`primelist[i]`(for *any* `i` ) 将因索引错误而失败。

另一种为`primelist`空的方式是当`isPrime()`从不返回 True 时；您没有向我们展示该功能来验证它。

您的下一个错误在`getGCF()`; 您首先定义一个`listofprimefacts`变量（一个列表），但后来引用一个不存在的`primefactlist`变量，导致`NameError`. 下一个名称错误将`primelist`在该函数中进一步出现。

你真的很想重新阅读[Python 教程](http://docs.python.org/2/tutorial/)；您在代码中遗漏了许多 python 习语；特别是关于如何在序列上创建循环（提示：`for check in checks:`比`while`带有索引变量的循环更容易使用）以及如何将项目附加到列表中。

我的个人工具包定义了这一点：

```
from math import sqrt

def prime_factors(num, start=2):
    """Return all prime factors (ordered) of num in a list"""
    candidates = xrange(start, int(sqrt(num)) + 1)
    factor = next((x for x in candidates if (num % x == 0)), None)
    return ([factor] + prime_factors(num / factor, factor) if factor else [num]) 
```

不需要`isPrime()`测试。*

# javascript - Rally SDK2 中可编辑字段的网格返回

> ID：14637978
> 
> 赞同：1
> 
> 时间：2013-02-01T00:57:07.500
> 
> 标签：javascript, rally

我有一个像这样的列的网格：

{ text: 'Name', dataIndex: 'Name', editor: 'rallytextfield', flex: 2.5, sortable: false },

当我在文本字段中填写信息然后单击其他位置时，数据已保存；但是，当我像在自定义网格中一样按回车键或制表符时，什么也没有发生。我可以配置什么以允许我从该字段返回，从而在不单击的情况下获取要保存的值？

编辑：事实证明这与添加复选框有关。如果我添加一个 selModel，则返回不起作用。如果我把它拿走，回报是有效的！这是完整的应用程序：

```
Ext.define('CustomApp', {
    extend: 'Rally.app.App',
    componentCls: 'app',
    launch: function() {
        var store = Ext.create('Rally.data.custom.Store', {
            data:[
                { 'name': 'Lisa',  "email":"lisa@simpsons.com",  "phone":"555-111-1224"  },
                { 'name': 'Bart',  "email":"bart@simpsons.com",  "phone":"555-222-1234" },
                { 'name': 'Homer', "email":"home@simpsons.com",  "phone":"555-222-1244"  },
                { 'name': 'Marge', "email":"marge@simpsons.com", "phone":"555-222-1254"  }
            ]
        });
    this.add( Ext.create('Rally.ui.grid.Grid', {
        title: 'Simpsons',
        store: store,
        columnCfgs: [
            { text: 'Name',  dataIndex: 'name', editor: 'rallytextfield' },
            { text: 'Email', dataIndex: 'email', flex: 1 },
            { text: 'Phone', dataIndex: 'phone', editor: 'textfield' }
        ],
        height: 200,
        width: 400,
        selType: 'checkboxmodel',
        selModel: {
            injectCheckbox: 1,
            mode: 'SIMPLE'
        }
    }) );       
} 
```

});

注释掉 selType 和 selModel 并且我可以按回车键从一行到下一行，但是使用 selType 和 selModel 在那里，没有返回但选项卡确实有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:28:51.900

Return/Tab 内联编辑导航应该是内置的，无需任何额外配置。当我尝试重现这个问题时，我遇到的第一件事是：

[应用程序在调试模式下按需要运行，但在 Rally 环境中崩溃](https://stackoverflow.com/questions/14220129/app-works-as-desired-in-debug-mode-but-crashes-in-rally-environment)

这可能是根本原因，因为一旦编辑了该字段，应用程序可能只是刷新。我在 gridConfig 上的工作列配置如下所示：

```
columnCfgs: [
    'FormattedID',
    { 
        text: 'Name', 
        dataIndex: 'Name', 
        editor: 'rallytextfield', 
        flex: 2.5, 
        sortable: false 
    },
    'Owner'
], 
```

# linux - 如何在 Linux/Unix 上永久设置 $PATH

> ID：14637979
> 
> 赞同：1009
> 
> 时间：2013-02-01T00:57:08.747
> 
> 标签：linux, bash, unix, path, zsh

在 Linux 上，如何将目录添加到 $PATH 以便它在不同的会话中保持不变？

#### 背景

我正在尝试将目录添加到我的路径中，以便它始终位于我的 Linux 路径中。我试过了：

```
export PATH=$PATH:/path/to/dir 
```

这可行，但是每次我退出终端并启动一个新的终端实例时，这条路径都会丢失，我需要再次运行导出命令。

我该怎么做才能永久设置？

* * *

## 回答 #1

> 赞同：1137
> 
> 时间：2013-02-01T01:01:27.073

**您需要将其添加到您的`~/.profile`or`~/.bashrc`文件中。** 

```
export PATH="$PATH:/path/to/dir" 
```

根据您正在执行的操作，您可能还需要符号链接到二进制文件：

```
cd /usr/bin
sudo ln -s /path/to/binary binary-name 
```

**请注意，这不会在会话的其余部分自动更新您的路径。**为此，您应该运行：

```
source ~/.profile 
or
source ~/.bashrc 
```

* * *

## 回答 #2

> 赞同：346
> 
> 时间：2014-11-16T21:29:08.633

有多种方法可以做到这一点。实际的解决方案取决于目的。

变量值通常存储在分配列表或在系统或用户会话开始时运行的 shell 脚本中。对于 shell 脚本，您必须使用特定的 shell 语法和`export`/或`set`命令。

## 系统范围

1.  `/etc/environment`唯一任务列表。允许引用。非常适合添加系统范围的目录`/usr/local/something/bin`，例如`PATH`变量或定义`JAVA_HOME`. 由[PAM](https://en.wikipedia.org/wiki/Linux_PAM)和[systemd](https://en.wikipedia.org/wiki/Systemd)使用。

2.  `/etc/environment.d/*.conf`唯一任务列表。允许引用。非常适合添加系统范围的目录`/usr/local/something/bin`，例如`PATH`变量或定义`JAVA_HOME`. 配置可以拆分为多个文件，通常每个工具（Java、Go 和 Node.js）一个文件。由 systemd 使用，设计上不会将这些值传递给用户登录 shell。

3.  `/etc/xprofile`启动 X Window 系统会话时执行的 Shell 脚本。这是为每个登录到 X Window System 的用户运行的。`PATH`对于对每个用户都有效的条目来说，这是一个不错的选择，例如`/usr/local/something/bin`. 该文件包含在其他脚本中，因此请使用 POSIX shell 语法而不是用户 shell 的语法。

4.  `/etc/profile`和`/etc/profile.d/*`外壳脚本。对于纯 shell 系统，这是一个不错的选择。这些文件只能由登录模式下的 shell 读取。

5.  `/etc/<shell>.<shell>rc`. 外壳脚本。这是一个糟糕的选择，因为它是特定于单个 shell 的。在非登录模式下使用。

## 用户会话

1.  `~/.pam_environment`. 唯一分配列表，不允许引用。由 PAM 在每个用户会话开始时加载，与 X Window 系统会话或 shell 无关。您不能引用其他变量，包括`HOME`或`PATH`因此它的用途有限。由 PAM 使用。

2.  `~/.xprofile`外壳脚本。这在用户登录 X Window System 系统时执行。此处定义的变量对每个 X 应用程序都是可见的。`PATH`使用诸如`~/bin`or`~/go/bin`或定义用户特定`GOPATH`or之类的值进行扩展的完美选择`NPM_HOME`。该文件包含在其他脚本中，因此请使用 POSIX shell 语法而不是用户 shell 的语法。通过快捷方式启动的图形文本编辑器或 IDE 将看到这些值。

3.  `~/.profile`, `~/.<shell>_profile`, `~/.<shell>_login`Shell 脚本。它仅对从终端或终端仿真器启动的程序可见。对于纯 shell 系统来说，这是一个不错的选择。由 shell 在登录模式下使用。

4.  `~/.<shell>rc`. 外壳脚本。这是一个糟糕的选择，因为它是特定于单个 shell 的。由非登录模式下的 shell 使用。

## 笔记

[Wayland](https://en.wikipedia.org/wiki/Wayland_(display_server_protocol))上的[GNOME](https://en.wikipedia.org/wiki/GNOME)启动用户登录 shell 来获取环境。`~/.profile`它有效地使用`~/.<shell>_profile`了登录 shell 配置`~/.<shell>_login`文件。

## [手册页](https://en.wikipedia.org/wiki/Man_page)

*   [环境](https://linux.die.net/man/1/environment)
*   [environment.d](https://linux.die.net/man/1/environment.d) [https://linux.die.net/man/1/environment.d](https://linux.die.net/man/1/environment.d)
*   [重击](https://linux.die.net/man/1/bash)
*   [短跑](https://linux.die.net/man/1/dash)

## 特定于发行版的文档

*   [Ubuntu](https://help.ubuntu.com/community/EnvironmentVariables#Persistent_environment_variables)
*   [Arch Linux](https://wiki.archlinux.org/index.php/Environment_variables)

## 有关的

[登录外壳和非登录外壳之间的区别？](https://unix.stackexchange.com/a/46856/39410)

* * *

## 回答 #3

> 赞同：253
> 
> 时间：2014-05-27T16:27:44.623

在 Ubuntu 中，编辑`/etc/environment`. 它的唯一目的是存储*[环境变量](https://en.wiktionary.org/wiki/environment_variable)*。最初这里定义了 $PATH 变量。

这是我`/etc/environment`文件中的粘贴：

```
PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games" 
```

因此，您可以以 root 身份打开此文件并添加您想要的任何内容。

为了*立竿见影*的效果，

运行（以普通用户*和*root 身份尝试）：

```
source /etc/environment && export PATH 
```

如果您使用 Z shell ( `zsh`)，请在文件中的注释之后添加此行`/etc/zsh/zshenv`：

```
source /etc/environment 
```

*[我在Ubuntu 15.10](https://en.wikipedia.org/wiki/Ubuntu_version_history#Ubuntu_15.10_.28Wily_Werewolf.29) (Wily Werewolf)上遇到了这个小问题，但如果你的**zsh**没有得到正确的**PATH**，这可能就是原因。*

* * *

## 回答 #4

> 赞同：81
> 
> 时间：2013-02-01T00:59:39.860

对于 Bash，您可以将`export`声明放入`~/.bashrc`. 例如，我的 .bashrc 包含这一行：

```
export PATH=/var/lib/gems/1.8/bin:/home/ash/.bin:$PATH 
```

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2014-01-03T11:35:39.307

您可以`$PATH`通过两种方式永久设置。

1.  为特定用户设置路径：

    您可能需要在`.bash_profile`用户的主目录中的文件中创建条目。

    例如，在我的情况下，我将`java`在 Tomcat 用户配置文件中设置路径*

    ```
     echo "export PATH=$PATH:/path/to/dir" >> /home/tomcat/.bash_profile 
    ```

2.  *要为所有*系统用户设置公共路径，您可能需要像这样设置路径：

    ```
     echo "export PATH=$PATH:/path/to/dir" >> /etc/profile 
    ```

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2016-10-21T04:11:17.750

您可以在[CentOS](https://en.wikipedia.org/wiki/CentOS)或[Red Hat Linux](https://en.wikipedia.org/wiki/Red_Hat_Linux) (RHEL) 上为本地用户使用：

```
echo $"export PATH=\$PATH:$(pwd)" >> ~/.bash_profile 
```

这会将当前目录（或者您可以使用其他目录）添加到 PATH。这使它成为永久性的，但它会在下次用户登录时生效。

如果您不想重新登录，那么您可以使用：

```
source ~/.bash_profile 
```

这会重新加载`# User specific environment and startup programs`. 此评论存在于文件中`.bash_profile`。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2016-06-29T08:59:52.087

您也可以永久设置它，编辑以下文件之一：

`/etc/profile`（适用于所有用户）

`~/.bash_profile`（对于当前用户）

`~/.bash_login`（对于当前用户）

`~/.profile`（对于当前用户）

您也可以使用`/etc/environment`PATH 设置永久环境变量，但**它不支持变量扩展**。

摘自：*[Linux：Añadir ruta al PATH](http://www.sysadmit.com/2016/06/linux-anadir-ruta-al-path.html)*

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2017-11-04T13:40:53.067

我认为最优雅的方式是：

1.  将此添加到*~/.bashrc*文件中。

    运行此命令：

    ```
     gedit ~/.bashrc 
    ```

    在其中添加您的路径：

    ```
     export PATH=$PATH:/opt/node/bin 
    ```

2.  `source ~/.bashrc`

(Ubuntu)

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2018-11-23T09:24:45.433

1.  修改“/etc/profile”文件：

    ```
    vi /etc/profile 
    ```

    按`I`键进入编辑模式，将光标移至文件末尾。附加条目：</p>

    ```
    export PATH=$PATH:/path/to/dir; 
    ```

    按`Esc`键退出编辑模式，并`:wq`保存文件。

2.  使配置生效

    ```
    source /etc/profile 
    ```

    解释：</p>

    配置*文件*适用于所有用户。如果您希望它仅对活动用户有效，请更改“.bashrc”文件。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2017-03-04T11:09:57.563

昨天，我在寻找将包含我自己的脚本的文件夹添加到 PATH 的方法时偶然发现了这个问题 - 并且惊讶地发现我自己的`~/.profile`文件（在[Linux Mint](https://en.wikipedia.org/wiki/Linux_Mint) 18.1 上）已经包含以下内容：

```
# set PATH so it includes user's private bin if it exists
if [ -d "$HOME/bin" ] ; then
    PATH="$HOME/bin:$PATH"
fi 
```

因此，我所要做的就是创建文件夹`~/bin`并将我的脚本放在那里。

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2013-02-01T00:59:22.273

您可以将该行添加到控制台配置文件（例如*[.bashrc](https://en.wikipedia.org/wiki/Bash_(Unix_shell)#Legacy-compatible_Bash_startup_example)*或*[.profile](https://en.wikipedia.org/wiki/Bash_(Unix_shell)#Operating_system_issues_in_Bash_startup)*）。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2019-11-10T10:27:46.913

经过这么多研究，我找到了一个简单的解决方案（我使用的是[Elementary OS](https://elementary.io/)），灵感来自*[Flutter – 在 Linux – Ubuntu 上逐步安装](https://www.tutorialkart.com/flutter/flutter-install-on-linux-ubuntu/)*。

> 运行以下命令以**编辑模式打开***.bashrc*文件。（您也可以使用 vi 或任何其他编辑器）。
> 
>  **```
> ~$ sudo nano ~/.bashrc 
> ```
> 
> 在文件末尾添加以下行并保存。
> 
> ```
> export PATH="[FLUTTER_SDK_PATH]/flutter/bin:$PATH" 
> ```
> 
> 例如：
> 
> ```
> export PATH="/home/rageshl/dev/flutter/bin:$PATH" 
> ```
> 
> [![在此处输入图像描述](../Images/70a74941a283a09dbc12e4b23a9174b8.png)](https://i.stack.imgur.com/csByi.png)**

 **我相信这是在 Ubuntu 发行版中设置 Flutter 路径的**永久解决方案。**

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2015-04-10T12:12:15.397

使用以下行将脚本文件添加`[name_of_script].sh`到`/etc/profile.d`文件夹：

```
export PATH=$PATH:/dir 
```

文件夹中的每个脚本都会在登录时`/etc/profile.d`自动执行。`/etc/profile`

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2016-05-28T03:19:04.867

添加对我有用的永久路径的一种方法是：

```
cd /etc/profile.d
touch custom.sh
vi custom.sh 
export PATH=$PATH:/path according to your setting/ 
```

重新启动您的计算机，我们开始；路径将永久存在。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2016-07-11T11:31:39.887

可以使用以下命令直接添加：

```
echo 'export PATH=$PATH:/new/directory' >> ~/.zshrc
source ~/.zshrc 
```

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2017-05-04T21:13:24.050

[我的回答是参考在Ubuntu](https://en.wikipedia.org/wiki/Ubuntu_%28operating_system%29) Linux (amd64)上设置[Go](https://en.wikipedia.org/wiki/Go_%28programming_language%29)环境。我遇到了设置环境变量（和）的路径，在终端退出时丢失它并使用每次重建它的同样麻烦。`GOPATH``GOBIN``source <file_name>`

错误是将路径（`GOPATH`和`GOBIN`）放入`~/.bash_profile`文件中。浪费了几个小时后，我发现解决方案是以以下方式放入文件中`GOPATH`：`GOBIN``~/.bash_rc`

```
export GOPATH=$HOME/go
export GOBIN=$GOPATH/bin
export PATH=$PATH:$GOPATH:$GOBIN 
```

在这样做的过程中，Go 安装运行良好，并且没有路径丢失。

与此问题相关的原因是非登录 shell 的设置（例如运行 Go 代码的 Ubuntu 终端或[GNOME](https://en.wikipedia.org/wiki/GNOME)`~./bash_rc`终端）是从文件中获取的，而登录 shell 的设置是从`~/.bash_profile`文件中获取的。`~/.profile`如果`~/.bash_profile`文件无法访问，则从文件中获取。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2013-11-05T13:35:33.467

添加*导出*命令的文件取决于您是处于登录模式还是非登录模式。

如果您处于登录模式，则您要查找的文件是*/etc/bash*或*/etc/bash.bashrc*。

如果您处于非登录模式，您正在寻找文件*/.profile*或目录*/.profiles.d中的文件*

上面提到的文件是系统变量所在的位置。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2014-11-14T17:35:15.263

**永久添加到 PATH 变量**

全球的：

```
echo "export PATH=$PATH:/new/path/variable" >> /etc/profile 
```

本地（仅限当前用户）：

```
echo "export PATH=$PATH:/new/path/variable" >> ~/.profile 
```

对于**全局**，重新启动。对于**本地**，重新登录。

**例子**

**前：**

```
$ cat /etc/profile

#!/bin/sh

export PATH=/usr/bin:/usr/sbin:/bin:/sbin 
```

**后：**

```
$ cat /etc/profile

#!/bin/sh

export PATH=/usr/bin:/usr/sbin:/bin:/sbin
export PATH=/usr/bin:/usr/sbin:/bin:/sbin:/new/path/variable 
```

**或者，您可以只编辑文件“配置文件”：**

```
$ cat /etc/profile

#!/bin/sh

export PATH=/usr/bin:/usr/sbin:/bin:/sbin:/new/path/variable 
```

**另一种方式（感谢 gniourf_gniourf）：**

```
echo 'PATH=$PATH:/new/path/variable' >> /etc/profile 
```

> 你不应该在这里使用双引号！echo 'export PATH=$PATH:/new/path/variable'... 顺便说一下，export 关键字很可能没有用，因为 PATH 变量很可能已经标记为已导出。– **gniourf_gniourf**

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2019-07-04T13:25:26.790

假设您正在运行[macOS](https://en.wikipedia.org/wiki/MacOS)。您有一个您信任的二进制文件并希望在整个系统中可用，但不一定希望将二进制文件所在的目录添加到您的 PATH 中。

您可以选择将二进制文件复制/移动到`/usr/local/bin`应该已经在您的 PATH 中。这将使二进制可执行文件与您可能已经在终端中访问的任何其他二进制文件一样。

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2015-09-25T02:26:23.193

Zues77 的想法是正确的。OP没有说“我怎么能破解这个？”。OP 想知道如何永久附加到*$PATH*：

```
sudo nano /etc/profile 
```

这是为所有东西设置的地方，也是为所有需要*$PATH*的东西更改它的最佳位置。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2013-10-18T17:00:29.857

最简单的方法是以下行，

```
PATH="<directory you want to include>:$PATH" 
```

在主目录中的[.bashrc 文件中。](https://en.wikipedia.org/wiki/Bash_(Unix_shell)#Legacy-compatible_Bash_startup_example)

即使您关闭终端或重新启动 PC，它也不会被重置。它是永久性的。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2016-07-17T02:50:27.067

我认为最优雅的方式是：

1.  在*~./bashrc*文件中添加：

    ```
    if [ -d "new-path" ]; then
      PATH=$PATH:new-path
    fi 
    ```

2.  `source *~/.bashrc*`

(Ubuntu)

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2020-02-01T11:08:15.690

这是一个**单行**。它在`.bashrc`. 该行将检查目录是否已添加到路径中，如果没有则追加。这将防止您每次 source 时在路径中复制您的目录`.bashrc`。

```
echo "[[ \":\$PATH:\" != *\":$(pwd)/path/to/add:\"* ]] && export PATH=\"\${PATH:+\${PATH}}:$(pwd)/path/to/add\"" >> ~/.bashrc

source ~/.bashrc 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2017-12-27T21:18:00.280

对于[Debian](https://en.wikipedia.org/wiki/Debian)发行版，您必须：

*   编辑文件`~/.bashrc`。例如：`vim ~/.bashrc`
*   添加`export PATH=$PATH:/path/to/dir`
*   然后重新启动您的计算机。请注意，如果您`~/.bashrc`以 root 身份编辑文件，您添加的环境变量将仅适用于 root**

# jquery - 将同一行上的所有 DIVS 设置为相同的高度......但每行不同

> ID：14637981
> 
> 赞同：0
> 
> 时间：2013-02-01T00:57:21.957
> 
> 标签：jquery, css, html, height

我有一个网页，它是一系列 DIV，例如：

```
 <div class="cell upcoming">
        <img src="stills/press/press-logo-c2e2.png" class="general"><p class="one">Panelist - Chicago Comic & Entertainment Expo 2013</p>
        <p class="two">[Panel Name TBD]</p>
        <p class="three"><b>Panel Date/Location:</b> [TBD] on April 26-28, 2013 at C2E2 (Chicago, Illinois)</p>
        <p class="three"><b>Panelists:</b> [TBD]</p>
        <p class="three"><b>Panel Blurb:</b> [TBD]</p>
    </div>

    <div class="cell upcoming">
        <img src="stills/press/press-logo-wondercon-anaheim.png" class="general"><p class="one">Panelist - WonderCon 2013</p>
        <p class="two">[Panel Name TBD]</p>
        <p class="three"><b>Panel Date/Location:</b> [TBD] on March 29-31, 2013 at WonderCon (Anaheim, California)</p>
        <p class="three"><b>Panelists:</b> [TBD]</p>
        <p class="three"><b>Panel Blurb:</b> [TBD]</p>
    </div> 
```

“CELL”类设置为 45%，因此它形成了一个两列“表”。CSS是：

```
div.cell { position:relative; margin:2px; float:left; width:45%; text-align:justify; vertical-align:top; border:2px solid; padding:10px; border-radius:25px; -moz-border-radius:25px; } 
```

不幸的是，这有一个习惯，不是总是两个填充的列，因为在任何给定的行上，左条目和右条目的高度都会不同，这会产生不良结果（包括由于差异而看起来很有趣）

为了解决这个问题，我有一个 JQUERY，它将页面上的每个单元格设置为最大单元格的高度：

```
 var maxHeight = 0;
    $("div.cell").each(function(){
        maxHeight = Math.max(maxHeight, $(this).height());
    })
    $("div.cell").css("height",maxHeight); 
```

然而，我真正想要的是每一行都匹配，而不是设置每个单元格匹配。也就是说，如果网页是1 2, 3 4, 5 6；我宁愿让 1 和 2 成为 1 和 2 的最高高度。3 和 4 只是 3 和 4 中的最高点。等等。

有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T02:26:53.080

然后将每一行包装在一个div中

```
$('.row').each(function(){
  var maxHeight = 0;
  $(".cell", this).each(function(){
      maxHeight = Math.max(maxHeight, $(this).height());
  })
  $(".cell", this).css("height",maxHeight);
}) 
```

试试看。虽然没有测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:54:04.303

我一直在学习和学习，我解决了这个问题而无需设置行（这使得站点维护难以忍受，因为每次添加新单元时都需要改变所有内容）：

```
$("div.cell:nth-child(even)").each(function(){
    var cellheight = $(this).height();
    var nextheight = $(this).next("div.cell").height();
    if ( cellheight > nextheight ) {
        $(this).next("div.cell").height(cellheight)
    }
    else
    {
        $(this).height(nextheight);
    }
}); 
```

谢谢大家！

# jquery - 当我在模板中使用 jQuery.scroll 时它不起作用

> ID：14637989
> 
> 赞同：0
> 
> 时间：2013-02-01T00:58:09.833
> 
> 标签：jquery, templates, scroll

当用户在 div 中向下滚动时，我想使用 jQuery.scroll 显示阴影（如果滚动条在顶部，则隐藏此阴影）。它在这里工作得很好：http: [//jsfiddle.net/C4S6s/](http://jsfiddle.net/C4S6s/)。

当我将此 div 放入模板时，它不起作用:(我对模板不太熟悉，所以也许我错过了一些东西。

```
<script>$(".main-scroll-area").scroll(function () {

           var div = $(this);
           if (div.scrollTop() == 0)
           {
              $('.header-shadow').removeClass('shadow-scrolled');
           } else {
              $('.header-shadow').addClass('shadow-scrolled');
           }

        }); 
```

* * *

附加信息

这是阴影的css：

```
.shadow-scrolled {
   -webkit-box-shadow:0 2px 2px -1px rgba(0,0,0,.6);
   -moz-box-shadow:0 2px 2px -1px rgba(0,0,0,.6);
   box-shadow:0 2px 2px -1px rgba(0,0,0,.6);
} 
```

这是不起作用的模板代码。我还使用上面写的 jQuery 来显示或隐藏阴影。

```
<script type="text/template" id="MeetingView">
<section class="middle-column" style="background: none repeat scroll 0 0 white;bottom: 0;left: 239px;overflow: hidden;padding: 20px 0 0;position: absolute;right: 381px;top: 42px;">
    <div class="header-shadow" style="background-color: #FFFFFF;height: 61px;position: relative;width: 100%;z-index: 9;">

    </div>

    <div class="main-scroll-area" style="bottom: 0;left: 0;overflow: auto;padding-left: 20px;position: absolute;right: 0;top: 81px;height: 200px;width: 200px;">
        this is my content<br />
        when scrolldown, shadow appears<br />
        when scrollbar at 0, shadow disappears<br />
        this is my content<br />
        when scrolldown, shadow appears<br />
        when scrollbar at 0, shadow disappears<br />
        this is my content<br />
        when scrolldown, shadow appears<br />
        when scrollbar at 0, shadow disappears<br />
    </div>
</section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:41:26.253

您似乎没有等待 DOM 加载。只需将您的代码包装在`$(document).ready()`. jsfiddle 会为您执行此操作（请参阅左上角的下拉菜单，您可以在其中选择 onload、onready、no wrap 等）。

```
$(document).ready(function () {
    $(".main-scroll-area").scroll(function () {

        var div = $(this);
        if (div.scrollTop() == 0) {
            $('.header-shadow').removeClass('shadow-scrolled');
        } else {
            $('.header-shadow').addClass('shadow-scrolled');
        }

    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:33:23.853

如果将 jQuery 放入模板中，它可以正常工作。如果 jQuery 在外面，它就不起作用。

# python - 在 Python 中搜索二维数组

> ID：14637996
> 
> 赞同：1
> 
> 时间：2013-02-01T00:58:45.840
> 
> 标签：python, arrays, search

我希望能够通过 Python 在给定两个或多个参数的情况下检索大型数据集（9M 行，1.4 GB）中的特定行。

例如，从此数据集中：

```
ID1 2   10  2   2   1   2   2   2   2   2   1

ID2 10  12  2   2   2   2   2   2   2   1   2

ID3 2   22  0   1   0   0   0   0   0   1   2

ID4 14  45  0   0   0   0   1   0   0   1   1

ID5 2   8   1   1   1   1   1   1   1   1   2 
```

给定示例参数：

*   第二列必须等于 2，并且
*   第三列必须在 4 到 15 的范围内

我应该获得：

```
ID1 2   10  2   2   1   2   2   2   2   2   1

ID5 2   8   1   1   1   1   1   1   1   1   2 
```

问题是我不知道如何在 Python 中的二维数组上有效地执行这些操作。

这是我尝试过的：

```
line_list = []

# Loading of the whole file in memory
for line in file:
    line_list.append(line)

# set conditions
i = 2
start_range = 4
end_range = 15

# Iteration through the loaded list and split for each column
for index in data_list:
    data = index.strip().split()
    # now test if the current line matches with conditions
    if(data[1] == i and data[2] >= start_range and data[2] <= end_range):
        print str(data) 
```

我想多次执行这个过程，我这样做的方式真的很慢，即使数据文件加载到内存中也是如此。

我正在考虑使用 numpy 数组，但我不知道如何在给定条件下检索行。

谢谢你的帮助 ！

## 更新 ：

正如建议的那样，我使用了关系数据库系统。我选择了 Sqlite3，因为它非常易于使用且部署快速。

我的文件在大约 4 分钟内通过 sqlite3 中的导入功能加载。

我在第二列和第三列做了索引，以加快检索信息的过程。

查询是通过 Python 完成的，模块为“sqlite3”。

就是这样，更快！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:08:14.363

我会选择几乎你所拥有的（未经测试）：

```
with open('somefile') as fin:
    rows = (line.split() for line in fin)
    take = (row for row in rows if int(row[1] == 2) and 4 <= int(row[2]) <= 15)
    # data = list(take)
    for row in take:
        pass # do something 
```

# svn - 您可以将文件标记为永远不会在 SVN 中合并吗？

> ID：14637999
> 
> 赞同：2
> 
> 时间：2013-02-01T00:59:01.803
> 
> 标签：svn, merge

我有一组相互关联的几个项目，有些项目需要来自其他项目的构建文件。出于多种原因，我们已将这些先决条件构建文件提交到存储库。

每次我尝试将分支中的更改合并到主干或反之亦然时，这些文件总是会发生冲突，因为它们是二进制文件。如果需要，我可以在提交合并之前从源项目中重建文件。

然而，在进行合并时，必须始终为“mine-full”键入“mf”，这真的很烦人。

是否有可能在 SVN 中将二进制文件永久标记为不可合并，以便它始终假定我的文件已满？

如果可以的话，我愿意接受简单的脚本。

PS 请不要把它变成关于将构建文件提交到存储库是否是一个好主意的讨论。

PPS 我正在使用带有 SVN 服务器 1.7.5 的 SVN 客户端 1.7.8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:25:12.943

你至少有两个选择

*   用两个合并的序列替换哑合并：第一次合并将**只**合并带有特殊选项的二进制文件：`svn merge -q --accept 'mine-full' ...`，第二次合并合并树
*   您可以在 Subversion 特殊合并工具中定义，*在其中*您处理二进制特殊方式（与上面相同的合并）：使用[mergewrap.bat](http://svnbook.red-bean.com/en/1.7/svn.advanced.externaldifftools.html#svn.advanced.externaldifftools.merge.ex-2)和 SVNBook 中的整个“使用外部差异和合并工具”[部分](http://svnbook.red-bean.com/en/1.7/svn.advanced.externaldifftools.html)作为起点