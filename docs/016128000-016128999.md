# StackOverflow 问答 16128000-16128999

# javascript - 如何使用 Sammy.Template 检测和处理 404 错误？

> ID：16128000
> 
> 赞同：2
> 
> 时间：2013-04-21T04:31:44.280
> 
> 标签：javascript, jquery, http-status-code-404, sammy.js

我使用 Sammy.js 从路由中加载模板名称，但如果找不到该文件，我想将用户重定向到另一个页面。基本上，我有：

```
this.use(Sammy.Template, 'tpl');

this.get('#/:page', function() {

    // render a template
    // this.load()

    this.render('templates/' + this.params['page'] + '.tpl').swap();
}); 
```

如何处理 404 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T17:41:43.403

由于您可以将负载与传递选项一起使用，因此我会这样做（在我的脑海中。可能存在语法错误，但逻辑就在那里）：

```
this.load('templates/' + this.params['page'] + '.tpl', {error: function(response) { ... handle error }).interpolate(null, location).swap(); 
```

在错误功能中执行 404 检查。

# r - 是否可以附加到现有文件的第一行？

> ID：16128001
> 
> 赞同：7
> 
> 时间：2013-04-21T04:31:53.687
> 
> 标签：r, append

我查看了几个能够将文本添加到现有数据文件（.csv 或 .txt）的函数，例如 write.table、write.lines 或 sink。

当附加参数 =TRUE 时，新数据总是添加到文件的最后一个现有行之后。是否可以将数据添加到第一行（标题下方）的现有文件中 - 与追加相反？

给定一个数据框：

```
DF <- as.data.frame(matrix(seq(20),nrow=5,ncol=4))
colnames(DF) <- c("A", "B", "C", "D")
write.table(DF, "DF.csv", row.names=FALSE, sep=",") 
```

我可以像这样将新数据框附加到最后一行

```
A <- 1
A <- data.frame(A)
A$B <- 1
A$C <- 1
A$D <- 1
write.table(A, "DF.csv", row.names=FALSE, sep=",", append=TRUE, col.names=FALSE) 
```

这接近我想要的。但我真的很想将上面的行添加到 DF.csv 的第一行（标题正下方），就像这样

```
A   B   C   D
1   1   1   1
1   6   11  16
2   7   12  17
3   8   13  18
4   9   14  19
5   10  15  20 
```

需要明确的是，我不希望在 R 中的数据框中添加一行。我希望在 R 环境之外的文件开头添加一行。正如 append 可用于将数据添加到外部 .csv 文件的末尾一样，我希望将数据“追加”到 .csv 文件的开头，以便我的最新数据始终出现在第一行（到避免滚动到长文件的末尾以查看最新数据）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T04:57:57.013

编写自己的函数：

```
my.write.table <- function(df, filename, sep)
{
   ## read the existing content
   temp.df <- read.table(filename, sep)

   ## append in front
   df <- rbind(df, temp.df)

   ## write back the whole data frame
   write.table(df, filename, sep)
} 
```

# php - Codeigniter DB 类与准备好的语句

> ID：16128005
> 
> 赞同：4
> 
> 时间：2013-04-21T04:32:36.860
> 
> 标签：php, mysql, codeigniter, pdo, mysqli

您好我想知道在安全问题方面使用 Codeigniters 活动记录类是否等同于使用准备好的语句？

```
<?php
$stmt = $dbh->prepare("INSERT INTO REGISTRY (name, value) VALUES (:name, :value)");
$stmt->bindParam(':name', $name);
$stmt->bindParam(':value', $value);

// insert one row
$name = 'one';
$value = 1;
$stmt->execute();

?> 
```

对比

```
 $data = array(
   'title' => 'My title' ,
   'name' => 'My Name' ,
   'date' => 'My date'
);

$this->db->insert('mytable', $data); 

// Produces: INSERT INTO mytable (title, name, date) VALUES ('My title', 'My name', 'My date') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T05:26:10.207

CI 不支持准备好的语句，但它支持查询绑定。查询绑定和准备好的语句都可以防止 sql 注入。但我更喜欢 AR，因为它易于使用。它还使查询更具可读性。

您可以查看此[链接](http://ellislab.com/forums/viewthread/105112/#528929)以获取更多详细信息。

并从此[链接检查 CI Query Binding](http://ellislab.com/codeigniter/user-guide/database/queries.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-05T10:36:14.593

直接回答问题。是的。

这两个语句都被转义，从而提供了免受注入攻击的安全性。CodeIgniter db insert 方法为您进行转义，而 php 准备好的语句自然包含转义。

请参阅有关 php 准备语句的此[链接信息。](http://php.net/manual/en/pdo.prepared-statements.php)

否则就速度、它们的运行方式等而言，这两个语句是不等价的。

侯赛因已经涵盖了其余部分。

# dbus - 提供 DBus 对象的多个进程

> ID：16128008
> 
> 赞同：0
> 
> 时间：2013-04-21T04:33:02.773
> 
> 标签：dbus

我正在编写一个适用于单个文档的程序。如果要打开多个文档，只需为每个文档打开一个进程（是的，在这种情况下进程隔离很重要）。我们将这些进程称为服务器。

每个服务器将提供一个代表文档的对象，我希望客户端应用程序能够发现这些对象。理想情况下，客户端界面将无法判断文档是否属于不同的进程。

我模糊的解决方案是让所有进程共享一个众所周知的连接名称（org.example.MyApplication），并提供对象及其 PID 以避免重复（/org/example/MyApplication/）。但是，进程不能共享同一个众所周知的连接名称，所以这行不通。

我想我可以让客户端应用程序监视新连接，并扫描它们以查看是否存在预期的对象路径，但这似乎是个坏主意。

任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T14:18:25.477

KDE 使用的一种方法是使用以 PID 为后缀的知名名称，例如`org.kde.StatusNotifierItem-2055-1`. 客户端可以调用`org.freedesktop.DBus.ListNames`和过滤列表。

或者第一个服务器可以获取众所周知的名称，随后的服务器会调用它来注册他们的文档，以便客户端可以发现：

```
src name = :0.42 
src path = /org/example/MyApplication/2

dest name =   org.example.MyApplication
dest path =   /org/example/MyApplication/Documents
dest method = Publish(:0.42, /org/example/MyApplication/Documents/2) 
```

# database - 如何在 VB.NET（Access 数据库）中的两个不同表之间导航

> ID：16128009
> 
> 赞同：0
> 
> 时间：2013-04-21T04:33:15.560
> 
> 标签：database, vb.net, ado.net, dataset, tableadapter

在我的 VB.Net 程序中，我需要添加表格“订单”和“订单行”。如果选择了第一个订单，我只能浏览链接到第一个订单的订单行。我的“订单行”表中有 no_order，所以如果它是第一个订单，我只需要能够在 no_order 中值为“1”的订单行之间导航。

在我的程序中，我已经有了可以导航、删除、添加和修改的表“产品”。这要复杂多少，或者与我上面提到的不同？我该怎么做呢？我不知道从哪里开始。如果我从“产品”表中发布我的代码会有帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T05:10:38.887

如果您从下拉列表中选择订单并希望在同一个表单上显示订单行，那么您应该试试这个。

1.  在 formLoad 或 PageLoad 上绑定订单下拉菜单并设置`enable=false`为第二个下拉菜单（即代码行）
2.  将第一个下拉列表的 selectedIndexChanged 事件上的第二个下拉列表与类似这样的查询绑定。

```
 /* ConnectionObject, CommandObject and all that  */

  select * from LinesofCode where no_order=@no_order
  cmd.parameter.addwithValue("no_order",dropdown1st.selectedValue); 
```

# python - 如何使用 python 更改断言错误的输出？

> ID：16128013
> 
> 赞同：4
> 
> 时间：2013-04-21T04:34:35.953
> 
> 标签：python

在 Mac OS X 的终端上。

assertEqual 的输出是

```
 File "tests/test_conditions.py", line 27, in test_if_condition
    self.assertEqual(result, expected)
AssertionError: '    if (self) {\n        self.addMainLabel\n        self.addSubLabel\n        self.setupBackground\n    }\n' != '    if self\n        self.addMainLabel\n        self.addSubLabel\n        self.setupBackground\n    end\n' 
```

但是我想通过评估换行符'\n'并在'AssertionError：'之后添加换行符来获得以下输出。

```
 File "tests/test_conditions.py", line 27, in test_if_condition
    self.assertEqual(result, expected)
AssertionError: 
'    if (self) {
        self.addMainLabel
        self.addSubLabel
        self.setupBackground
    }
' != 
'    if self
        self.addMainLabel
        self.addSubLabel
        self.setupBackground
    end
' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T05:24:20.797

我不认为你可以，至少，不容易。

转义的换行符来自`assertEqual`调用`repr`两个字符串中的每一个。没有它，你也不会得到引号。如果您的任何一个字符串包含`!=`，它会变得非常混乱。

如果你真的想捏造断言的文本，你可以抓住它，操纵它的属性，然后重新提出它。我不建议这样做，但有可能：

```
try:
    self.assertEquals(result, expected)
except AssertionError as e:
    e.args = (e.args[0].replace("\\n", "\n"),) # edit the exception's message
    raise 
```

这并不能完全给出您想要的输出（在字符串的开头没有添加额外的换行符），但它非常接近。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T06:58:23.703

使用换行符获得*类似*输出的最简单方法是直接调用`assertMultiLineEqual`每个`str`相等比较或将其注册为`assertEqual`. 您可以通过在您的设置中使用它来完成后者，

```
self.addTypeEqualityFunc(str, 'assertMultiLineEqual') 
```

然后当你调用`assertEqual`你的两个字符串时，你会得到类似的东西，

```
Traceback (most recent call last):
  File "tests.py", line 10, in test1
    self.assertEqual(result, expected)
AssertionError: '    if (self) {\n        self.addMainLabel\n        self.addSubLabel\n        s [truncated]... != '    if self\n        self.addMainLabel\n        self.addSubLabel\n        self. [truncated]...
-     if (self) {
?        -    ---
+     if self
          self.addMainLabel
          self.addSubLabel
          self.setupBackground
-     }
+     end 
```

`unittest`使用[`difflib`](http://docs.python.org/2/library/difflib.html)，以便输出突出显示两个字符串不同的地方，您可能会或可能不会觉得更可取。

# shell - Unix shell脚本以月数转换年龄

> ID：16128014
> 
> 赞同：-3
> 
> 时间：2013-04-21T04:34:47.637
> 
> 标签：shell, unix

我想编写输入年龄并将该年龄转换为 no 的 shell 脚本。几个月; 然后根据年龄显示该人是儿童、青少年、成人或老年人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:47:57.077

请在此处阅读：[http ://www.gnu.org/software/bash/manual/bashref.html](http://www.gnu.org/software/bash/manual/bashref.html)

这是一个示例，用于检查年龄是否为数字是否为高中：

```
printf "Enter age: "
read age
if [[ "$age" =~ ^[0-9]+$ ]] ; then
   months=$(expr $age \* 12)
   echo "$age years is $months months"
   if [ $age -lt 11 ]; then
      echo "child."
   elif [ $age -lt 20 ]; then
      echo "teenager."
   elif [ $age -lt 100 ]; then
      echo "less than 100, and so on..."
   fi
else
   echo "Enter number." 
fi 
```

编辑：Barmar 指出 expr 是一种老式的方法。你可以`let "months=$age * 10"`改用。

# git - 提交并自动添加所有未跟踪的文件

> ID：16128018
> 
> 赞同：63
> 
> 时间：2013-04-21T04:36:14.903
> 
> 标签：git

我经常忘记我有一些新文件并直接做，

```
git commit -a -m "My commit message" 
```

这只会提交更改的文件，我必须在新提交中添加剩余的文件。这意味着有两个单独的提交，尽管从逻辑上讲它们是同一任务的一部分。

我知道通过两个连续命令在提交中包含未跟踪文件的最简单方法：

```
git add -A
git commit -a -m "My commit message" 
```

是否可以在一个命令中产生与上述相同的效果？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-21T04:47:37.363

在您的执行路径中创建一个名为（无扩展名）的文件：`git-add-commit-untracked`

把这个放进去：

```
#!/bin/bash
message=${0}
git add -A
git commit -am "$message" 
```

然后： `git-add-commit-untracked "Commit message"`

不过，您可以为文件使用较短的名称。为了说明的目的，我把它写得很长。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-03-24T22:21:20.280

You can define an alias to add all before commit. Just put this lines into your ~/.gitconfig file :

```
[alias]
        ca = !sh -c 'git add -A && git commit -m \"$1\"' - 
```

Then use your alias like this :

```
$ git ca 'Your commit message' 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-21T05:22:51.213

这里有几个选项：

*   使用`git commit --amend`以便在添加未跟踪的文件后最终只有一次提交（但如果您已经推送了上一次提交，则不会）；
*   使用`git commit --interactive`；
*   创建一个自动添加新文件的别名或脚本（其他答案中的示例）。以下是我为此目的使用的两个别名：

    ```
    [alias]
        untracked = ls-files --other --exclude-standard
        add-untracked = !git add $(git untracked) 
    ```

*   使用`git rebase -i`,`git reset <commit prior to first commit>`和`git commit`,将你的两个提交压缩`git merge --squash`到另一个分支上。

但是，您不能*覆盖*内置命令（例如`commit`使用别名），因此您仍然需要记住在提交之前将您想要的文件添加到索引中。

不幸的是，您不能同时指定路径`git commit -a`；我刚试过`git commit -a $(git untracked)`，它告诉我`fatal: Paths with -a does not make sense.` 所以要回答你的基本问题，我认为 git 脚本将是唯一的非交互式方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T04:43:29.017

`git`使用默认界面是不可能的。但是，`git`支持**别名**。

使用别名，可以调用不同的 git 命令，甚至可以运行任意 shell 脚本。创建一个包含这两个命令的脚本，并为其设置别名。

有关别名的更多信息，请参阅[wiki](https://git.wiki.kernel.org/index.php/Aliases) ，以及针对此特定场景的[这个问题。](https://stackoverflow.com/questions/1309430/how-to-embed-bash-script-directly-inside-a-git-alias)

编辑：请注意，这不是一个好主意。您最终可能会错误地添加不必要的文件，或者由于树中的非版本控制文件而具有无用的别名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T05:11:55.543

是的，我以前也遇到过和你一样的问题。我更喜欢使用 git 命令，但我遇到了很大的麻烦，因为 rails 中的守卫在没有警报的情况下更改了许多文件 :)

所以现在，每当我提交新代码时，我都会尝试使用 UI 来执行此操作（git gui）并记住永远不要使用`git commit -a`，因为您不确定哪些文件被修改了！在 rebase 新代码之后，请您`gitk`查看 git 树，这样您就可以知道最后的承诺、提交者、提交文件等。

# java - 用变量字符串命名对象

> ID：16128021
> 
> 赞同：1
> 
> 时间：2013-04-21T04:36:47.837
> 
> 标签：java, class, variables, object

我的问题类似于：

[使用字符串值创建变量名](https://stackoverflow.com/questions/8631935/creating-a-variable-name-using-a-string-value#new-answer)。

但我希望从不同的角度来看待它。

想要命名每个对象的原因是我可以稍后专门调用，并使用相同的语句创建多个对象。理想情况下，这就是我想要的工作。

```
String dogName = reader.nextLine();

int legs  = reader.nextInt();

char beenFed = reader.nextChar();

new dogName = dog(dogName, legs, fed) ` 
```

我知道java不能接受变量作为对象名。但是假设我要创建三只狗，“Red”、“Blue”和“Jeff”，我该如何配置它，以便以后用户可以进入

```
Red.getLegCount();

Blue.hasBeenFed(); 
```

等等

我还能如何创建这个场景？如果我想制作许多不同名称的 Dog 对象，我该怎么做？如果这不是一个好主意，我能做些什么呢？

PS - Stack Overflow 上的第一篇文章。请指导礼仪/格式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T04:43:59.153

你为什么不使用一个`HashMap`？您基本上需要的是一组键值对。这正是 HashMap 所做的。一个很好的开始链接：http: [//tutorialswithexamples.com/java-map-and-hashmap-tutorial-with-examples/](http://tutorialswithexamples.com/java-map-and-hashmap-tutorial-with-examples/)

`Dog`使用 dogName、legs、beforeFed 和其他属性创建您的类。接下来，定义一个`HashMap<String,Dog>`键为 as 的类`dogName`，Dog 是具有所有属性的整个`Dog`对象。例如

```
Dog red = new Dog("red",5,true);
hashmap.put(red.dogName, red); 
```

稍后如果您想访问 Dog 对象，请执行`olddog = hashmap.get("red").` Now，您可以执行任何操作 - `olddog.getLegs()`...

# android - Android开发初学者 - 错误

> ID：16128026
> 
> 赞同：0
> 
> 时间：2013-04-21T04:38:25.797
> 
> 标签：android

好吧，我做这个应用程序只是为了试用。还有这个错误。它说：

```
04-21 04:11:41.618: E/AndroidRuntime(333): FATAL EXCEPTION: main
04-21 04:11:41.618: E/AndroidRuntime(333): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.windteste/com.example.windteste.MainActivity}: java.lang.NullPointerException
04-21 04:11:41.618: E/AndroidRuntime(333):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
04-21 04:11:41.618: E/AndroidRuntime(333):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-21 04:11:41.618: E/AndroidRuntime(333):  at android.app.ActivityThread.access$2300(ActivityThread.java:125) 
```

..还有更多的错误行。因此，这是两种方法（`Dfig`和`MainActivity`）：

```
package com.example.windteste;

import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;

public class Dfig extends Activity{

    @Override
    protected void onCreate(Bundle blablu) {
        // TODO Auto-generated method stub
        super.onCreate(blablu);
        setContentView(R.layout.activity_main);
        MediaPlayer windsound = MediaPlayer.create(Dfig.this, R.raw.windsound);
        windsound.start();
        Thread timer = new Thread(){
            public void run(){
                try{
                    sleep(4000);
                }catch (InterruptedException e){
                    e.printStackTrace();
                }finally{
                    Intent openMain = new Intent("com.example.windteste.MAIN");
                    startActivity(openMain);
                }
            }
        };
        timer.start();
        windsound.release();
    }

}

 package com.example.windteste;

import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.app.Activity;
import android.text.InputType;

----------------------------------------------------------------------------------

public class MainActivity extends Activity {

    Button check = (Button) findViewById(R.id.calculator);
    final EditText UserInput = (EditText) findViewById(R.id.windspeed);
    final TextView P = (TextView) findViewById(R.id.potencia);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout2);

    UserInput.setInputType(InputType.TYPE_CLASS_NUMBER);

    check.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

        Number Ws = (Number) UserInput.getText();
        P.setText("Your total is " + Ws);

        }
    });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    } 

} 
```

好吧，我希望你能帮助我。
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T04:40:20.060

尝试：

```
public class MainActivity extends Activity {

    Button check;
    final EditText UserInput;
    final TextView P;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout2);

        check = (Button) findViewById(R.id.calculator);
        UserInput = (EditText) findViewById(R.id.windspeed);
        P = (TextView) findViewById(R.id.potencia);

    //Rest is same 
```

在调用 setContentView() 之前，您不能使用 findViewById()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T04:46:36.663

确保清单中列出了这两个活动。看起来 MainActivity 没有在您的清单文件中列出。

# django - 如何使用 Django 表单实现添加多个对象？

> ID：16128033
> 
> 赞同：1
> 
> 时间：2013-04-21T04:40:01.663
> 
> 标签：django, forms

如何使用 Django 从单个表单添加多个对象？

例如：如果我有一个销售表格，其中存储了销售产品的登记册。

想象一下表格：

```
datetime: [_____________]
customer: [_____________]
product: [______________] ---> How should I implement adding multiple products
                               in the same form?
cost: [_________________] 

Save (button) 
```

提示：这只是一个问题，如果你有一些想法请告诉我，因为我不知道该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T05:35:40.987

一种方法是使用[**Formset**](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)。例如，您可能已经在 Django admin 中看到过用于将多个相关对象显示为内联的表单集。

另一种方法可能涉及**AJAX**，示例解决方案：

*   “添加的产品”是一个简单的`<ul>`列表，其中包含添加到订单的产品
*   “搜索产品”是一个纯文本字段，用户在其中输入产品名称或 SKU
*   用户输入通过 AJAX 发送到服务器，服务器返回相关产品列表
*   这些产品建议显示给用户
*   当用户单击产品名称时，会发出另一个 AJAX 请求以将给定产品与订单相关联
*   请求完成后，通过AJAX刷新“已添加产品”列表，并出现新添加的产品

这将要求您首先创建一个临时订单，稍后您可以通过单独的请求附加产品。Formsets没有这个要求，但是我个人用的不多，看起来有点麻烦。

# ember.js - 如何访问 hasMany 的子控制器

> ID：16128034
> 
> 赞同：0
> 
> 时间：2013-04-21T04:40:03.653
> 
> 标签：ember.js, ember-data

我想在父视图中触发子元素的 ArrayController 上的操作。我该怎么做呢？

具体来说，我正在尝试向 hasMany 关系添加一个新的子元素。在子元素的视图中使用 {{action new}} 可以正常工作，但我不确定如何从父视图执行此操作。

```
<script type="text/x-handlebars" data-template-name="parents">
    <b>List</b><br />
    {{#each parent in controller}}
        {{ parent.name }} <br />    
        {{ render "kids" parent.children }}
    <a href="#" {{ action parent.children.new target="controller" }}>Parent View Make Kid</a<br/>
    <br />
    {{/each}}
</script>

<script type="text/x-handlebars" data-template-name="kids">
    {{#each kid in controller}}
        > {{ kid.name }} <br />
    {{/each}}
    <a href="#" {{ action new }}> Kid Controller Make Kid</a><br />
</script> 
```

在上面的“Kid Controller Make Kid”中工作正常，“Parent Controller Make Kid”不能。

请在此处找到说明问题的小提琴：http: [//jsfiddle.net/chopper/zHnQC/2/](http://jsfiddle.net/chopper/zHnQC/2/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:44:30.130

从父母的角度来看，您不能像那样直接访问孩子的控制器。我认为最好的选择是实施一种负责在其模型上创建新记录的`newKid`方法。`ParentsController`

我已经分叉了你的小提琴并实现了一个工作示例：http: [//jsfiddle.net/pxkys/1/](http://jsfiddle.net/pxkys/1/)

希望这可以帮助！

# jquery - 与视口大小相同的 Div 无法正确调整大小

> ID：16128035
> 
> 赞同：0
> 
> 时间：2013-04-21T04:40:06.650
> 
> 标签：jquery, window-resize

在初始页面加载时，我希望 div 占据视口空间（如[本示例](http://weareapostrophe.com.au/#intro)）。我正在使用以下代码：

```
$("#intro").height($(window).height());
$(window).resize(function(){
    $("#intro").height($(window).height());
}); 
```

它可以很好地拉伸 div，但问题是当我调整浏览器窗口的大小或在手机/平板电脑上从纵向变为横向时，div 保持相同的宽度和高度。我必须重新加载页面以使 div 适应新的视口大小。

我尝试查看示例站点的代码，但结果更加困惑。我还尝试了我在这里找到的其他一些建议，但到目前为止没有一个对我有用。

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:58:15.710

我认为您应该使用*CSS Media Queries*或 jQuery mobile 的`orientationchange`事件来为您完成工作。

您可以使用`orientationchange`jQuery mobile 的插件，添加以下脚本：

```
 <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js">
  </script> 
```

并更新到这个脚本：

```
$(window).on('resize, orientationchange', function(){
    $("#intro").height($(window).height());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T23:51:11.353

谢谢你的建议。调查一下，这就是我最终要做的（并且有效）：

HTML

```
<body id="container">
    <div id="intro">
        Content that will occupy the whole viewport
    </div>
</body> 
```

CSS

```
#container {height: 100%;}
#container #intro {height: 100%;}
#intro {width: 100%;overflow: hidden;} 
```

它对我有用。希望它可以帮助别人=）

# dart - 如何存储 Future 的结果以供以后使用

> ID：16128043
> 
> 赞同：2
> 
> 时间：2013-04-21T04:41:34.607
> 
> 标签：dart

假设我们的目标是构建一个`List`我们称之为`storedResult`.

我们有一个`Future<List>`多次调用的返回函数：

```
Future<List> getList()... 
```

假设我们将`getList()`多次调用未知函数，并希望将每次的结果存储`List`到我们的`storedResult`：

```
List storedResult = [];

someOtherList.forEach((element)){
    getList().then((resultingList)){
        storedResult.addAll(resultingList);
    }
}

print(storedResult); 
```

如果我们运行此代码，它将打印为`[]`. 我们如何表达这一点，以便结果是：

```
[resultingList, resultingList, ..., ] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T05:42:32.137

请记住，Future 会立即返回，但它们关联的回调异步运行。具体来说，在执行返回事件循环之前`getList()`，所做的工作（以及所做的一切`then`）不会发生。

您的问题是您正在尝试同步打印异步操作的结果，这是行不通的。

如果你想使用存储的结果，那么你应该做的是：

```
Future<List<List>> globFutures(List someOtherList) {
  List<Future> futures = [];
  someOtherList.forEach((element) {
    futures.add(getList());
  });

  // Automatically completes to a List containing all the
  // results of all of the futures.
  return Future.wait(futures);
}

main() {
  var storedResults = [];

  globFutures(someOtherList)
    .then((List<List> results) {
      storedResults = results;

      // Run code in here that depends on storedResults being available.
      print(storedResults);
    });

  // Do **NOT** use storedResults here, as it will be [].
  // The Future functions have not yet run!
  assert(storedResults == []);
}; 
```

# firebase - 推送 ID 的路径是否重要？

> ID：16128046
> 
> 赞同：2
> 
> 时间：2013-04-21T04:42:05.043
> 
> 标签：firebase

我一直在创建一个消费者，当他们执行某些任务时，他们会“授予”客户 ID。`.push().name()`在某个时候我突然想到，在我创建新 ID之前担心路径可能是完全多余的。

我在什么路径上运行 .push().name() 以创建唯一 ID 是否重要？Firebase 是否完全根据时间戳生成 ID，而不考虑 ID 将分配到的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T05:20:12.327

目前，push() ids 是基于时间戳（以及一些随机性）生成的。推送 id 的路径不用作 id 的一部分。

# java - 数组中的 GUI 按钮

> ID：16128048
> 
> 赞同：0
> 
> 时间：2013-04-21T04:42:40.563
> 
> 标签：java, swing, user-interface, compiler-errors, jbutton

我正在做一个项目，我们正在学习数组。我需要创建一个有 12 个按钮但需要在数组中的 GUI。我的代码还没有完成，因此它可能会因此出现错误。

我收到错误的地方在我的

```
JButton[] = { new Jbutton("1"), ...}; 
```

第二个]下面有一条红线，给了我错误

```
Syntax error on token "]" VariableDeclaratorld expected after this token 
```

到目前为止，这是我的代码：

```
public class TextButtonsHW extends JFrame implements ActionListener {
private JButton[] buttons;  
private JTextArea textArea; 
private final int ENTER;    
private final int SPACE;    
private final int CLEAR;    

public TextButtonsHW(String title) {
    super(title); 
    JButton[] = { new JButton("A"), new JButton("B"), new JButton("C"),
                  new JButton("1"), new JButton("2"), new JButton("3"),
                  new JButton("X"), new JButton("Y"), new JButton("Z"),
                  new JButton("Enter"), new JButton("Space"), new JButton("Clear")};
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T04:55:51.353

```
JButton[] = { 
```

应该是这样的：

```
JButton[] buttonArray = { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T04:57:31.540

您已声明`buttons`为实例变量：

```
private JButton[] buttons; 
```

因此，您需要像这样设置该变量：

```
buttons = new JButton[] { new JButton("A") ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T04:58:30.627

变量名在哪里？？？

```
 JButton[] buttons = { new JButton("A"), new JButton("B"), new JButton("C"),
              new JButton("1"), new JButton("2"), new JButton("3"),
              new JButton("X"), new JButton("Y"), new JButton("Z"),
              new JButton("Enter"), new JButton("Space"), new JButton("Clear")}; 
```

# javascript - 由于使用了 innerHTML，JavaScript onclick 函数未绑定

> ID：16128050
> 
> 赞同：1
> 
> 时间：2013-04-21T04:42:48.330
> 
> 标签：javascript, html, dom

我在 javascript 中有一个函数，我打算使用它来创建/添加指向“subLink”div 的链接，并向该链接添加一个 onclick 事件，将关联的“content”加载到 contentDiv：

```
function addSubLink(text, name, content) {
// append programLink span to subLinks:
    document.getElementById("subLinks").innerHTML += "<span class=\"programLink\" id=\"" + name + "\">" + text + "</span>";
// load program content onclick:
    document.getElementById(name).onclick = function () {
        // set value of programContent to content's value
        document.getElementById("programContent").innerHTML = content;
    }
} 
```

这个函数会被调用，例如，由 loadAboutPage() 来填充 subLink div

```
var whatContent = "<p>A website!</p>";
var whyContent = "<p>Recreation!</p>";
var howContent = "<p>Kludges.</p>";
addSubLink("WHAT", "whatLink", whatContent);
addSubLink("WHY", "whyLink", whyContent);
addSubLink("HOW", "howLink", howContent); 
```

问题是只有最后一个 subLink 附加了一个 onclick 事件（加载了内容并更改了 css 类）。也就是说，它创建 WHAT、WHY 和 HOW 链接，但仅将 onclick 函数附加到最后调用的：HOW，在这种情况下。

当谈到 JavaScript 时，我非常生疏，所以我不知道这是因为我对匿名函数缺乏了解，还是错误地使用了本地“名称”变量，或者其他完全不同的东西。我已经搜索了一段时间，但似乎我太无知了，甚至无法弄清楚类似的问题会是什么！

无论如何，我非常感谢您的帮助！提前致谢！

编辑：

这是一个完整的 HTML 示例：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

        <title>Stack Overflow Example</title>
        <script type="text/javascript">

            function addSubLink(text, name, content) {
                document.getElementById("subLinks").innerHTML += "<span class=\"programLink\" id=\"" + name + "\">" + text + "</span>";
                document.getElementById(name).onclick = function () {
                    document.getElementById("program").innerHTML = content;
                }
            }

            window.onload = function() {
                var whatContent = "<p>A website!</p>";
                var whyContent = "<p>Recreation!</p>";
                var howContent = "<p>Kludges.</p>";
                addSubLink("WHAT", "whatLink", whatContent);
                addSubLink("WHY", "whyLink", whyContent);
                addSubLink("HOW", "howLink", howContent);
            }

        </script>
    </head>

    <body>
        <div id="container">
            <div id="programWindow">
                <div id="subLinks"> </div>
                <div id="program"> </div>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T05:16:29.097

问题是由于：

```
....innerHTML += "..."; 
```

通过设置`innerHTML`，首先删除所有现有的子元素，然后解析标记以创建新元素。因此，虽然*最初*的“WHAT”和“WHY”跨度确实有`onclick`绑定，但它们已被没有的*类似*元素所取代。

要添加新元素*并*保持状态，您需要使用 DOM 方法，如[`createElement()`](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)、 [`appendChild()`](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)和[`createTextNode()`](https://developer.mozilla.org/en-US/docs/DOM/document.createTextNode)（或 set [`textContent`](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)/ [`innerText`](http://msdn.microsoft.com/en-us/library/ie/ms533899.aspx)）：

```
function addSubLink(text, name, content) {
    var span = document.createElement('span');
    span.className = 'programLink';
    span.id = name;
    span.appendChild(document.createTextNode(text));

// append programLink span to subLinks:
    document.getElementById('subLinks').appendChild(span);

// load program content onclick:
    span.onclick = function () {
        // set value of programContent to content's value
        document.getElementById("programContent").innerHTML = content;
    };
} 
```

示例：http: [//jsfiddle.net/bG7Dt/](http://jsfiddle.net/bG7Dt/)

# jakarta-ee - 如何保护 BIRT 报告查看器

> ID：16128051
> 
> 赞同：4
> 
> 时间：2013-04-21T04:42:53.477
> 
> 标签：jakarta-ee, struts, birt

我需要在打开报表时为 birt 报表查看器实现用户身份验证，这样我们应该无法运行报表，并且在打开报表之前也应该进行用户身份验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T01:08:53.160

正如 Iswanto San 在他的评论中已经提到的那样——我也会使用[Spring Security](http://static.springsource.org/spring-security/site/start-here.html)。

但这实际上取决于您的技能组合 - 以及您将查看器部署到什么。

[如果您使用 Tomcat - 您可以按照Deron Eriksson 在 avajava.com 上的分步指南](http://www.avajava.com/tutorials/lessons/how-do-i-use-form-authentication-with-tomcat.html)创建简单的表单身份验证。

另一种选择是遵循 Birt-Exchange 的建议，遵循[有关与 Actuate BIRT 查看器的安全集成的 Birt-Exchange 指南。](http://www.birt-exchange.org/org/wiki/index.php?title=Security_Integration_with_the_Actuate_BIRT_Viewers)

**或者！**[您可以按照Balendra15.Wordpress.com 的这个简单指南](http://balendra15.wordpress.com/2011/05/19/adding-security-to-birt-reports/) 将安全性直接集成到报告本身中。

我希望这对您有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T13:54:56.727

您还可以简单地将 NTLM 身份验证 (LDAP) 过滤器添加到 BIRT 的 web.xml（基本 Tomcat 配置）。

更多信息：[https ://sites.google.com/site/dynamicdatamining/birt/birt-viewer-security](https://sites.google.com/site/dynamicdatamining/birt/birt-viewer-security)

# ssh - 将 SSH 设置为仅使用密钥，而不是密码

> ID：16128060
> 
> 赞同：0
> 
> 时间：2013-04-21T04:44:15.340
> 
> 标签：ssh

所以我们有一个服务器，你可以通过 ssh 进入它。但是，我们设置了公共加密密钥。我们希望唯一的登录方式是使用经过身份验证的密钥。无法使用密码登录。有没有办法做到这一点？

编辑：

```
passwd -l account 
```

似乎无法在没有 ssh 密钥的情况下登录帐户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T04:53:23.070

`no`在 中设置所有其他身份验证类型`sshd_config`。

```
RSAAuthentication no
PasswordAuthentication no
UsePAM no
KerberosAuthentication no
GSSAPIAuthentication no 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T04:52:54.823

您可以尝试将该行添加`PasswordAuthentication no`到 /etc/ssh/sshd_config。可能取决于操作系统

# django - Django dict 最多期望 1 个参数，得到 3 个错误

> ID：16128068
> 
> 赞同：1
> 
> 时间：2013-04-21T04:45:53.760
> 
> 标签：django

我有一个名为 Picture 的模型，它有 2 个图像场。一个叫做 Image ，一个叫做 small 。我有 2 个图像字段的主要原因是，我模型下的函数将调整图像大小并根据它们的位置保存。

我的主要目标是最小化不需要的代码，因为我有 2 个重复的函数，它们执行相同的操作但针对不同的字段。我们可以创建一个执行相同操作但针对不同字段的函数，而不是拥有 2 个函数。

```
class Picture(models.Model):

    small = models.ImageField(upload_to="small/",blank=True)
    image = models.ImageField(upload_to="images/",blank=True)

    def save(self , force_insert=False,force_update=False):
        super (Picture,self).save(force_insert,force_update)

        pw = self.image.width
        ph = self.image.height
        mw = 500
        mh = 500

        if (pw > mw) or (ph > mh):
            filename = str(self.image.path)
            imageObj = img.open(filename)
            ratio = 1

            if ( pw > mw):
                ratio = mw / float(pw)
                pw = mw
                ph = int(math.floor(float(ph)* ratio))
            if ( ph > mh):
                ratio = ratio * ( mh /float(ph))
                ph = mh 
                pw = int(math.floor(float(ph)* ratio))

            imageObj = imageObj.resize((pw,ph),img.ANTIALIAS)
            imageObj.save(filename)

    def small(self , force_insert=False,force_update=False):
        super (Picture,self).save(force_insert,force_update)

        pw = self.small.width
        ph = self.small.height
        mw = 1500
        mh = 1500

        if (pw > mw) or (ph > mh):
            filename = str(self.small.path)
            imageObj = img.open(filename)
            ratio = 1

            if ( pw > mw):
                ratio = mw / float(pw)
                pw = mw
                ph = int(math.floor(float(ph)* ratio))
            if ( ph > mh):
                ratio = ratio * ( mh /float(ph))
                ph = mh 
                pw = int(math.floor(float(ph)* ratio))

            imageObj = imageObj.resize((pw,ph),img.ANTIALIAS)
            imageObj.save(filename) 
```

我试图做的是创建一个名为 Resizier 的类，其参数为 field 。因此，如果我在小字段中上传图像，我的模型将使用 If 语句确定是否小。转换为图像变量并调用 Resizier 类。

问题是我明白了

```
 error dict expect at most 1 argument , got 3 
```

我的模型.py

```
from pet.fields import Resizier

class Picture(models.Model):

    small = models.ImageField(upload_to="small/",blank=True)
    image = models.ImageField(upload_to="images/",blank=True)

    if image:
        Resizier(image)
    else:
        small = image
        Resizier(image) 
```

我的领域.py

```
from PIL import Image as img
import math

image = {}
class Resizier(image):

    def save(self , force_insert=False,force_update=False):
        super (Picture,self).save(force_insert,force_update)

        pw = self.image.width
        ph = self.image.height
        mw = 400
        mh = 400

        if (pw > mw) or (ph > mh):
            filename = str(self.image.path)
            imageObj = img.open(filename)
            ratio = 1

            if ( pw > mw):
                ratio = mw / float(pw)
                pw = mw
                ph = int(math.floor(float(ph)* ratio))
            if ( ph > mh):
                ratio = ratio * ( mh /float(ph))
                ph = mh 
                pw = int(math.floor(float(ph)* ratio))

            imageObj = imageObj.resize((pw,ph),img.ANTIALIAS)
            imageObj.save(filename) 
```

错误

```
 from pet.fields import Resizier
  File "C:\o\17\mysite\pet\fields.py", line 5, in <module>
    class Resizier(image):
TypeError: Error when calling the metaclass bases
    dict expected at most 1 arguments, got 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T05:24:21.520

你的问题在这里：

```
from PIL import Image as img
import math

image = {}
class Resizier(image): # you are inheriting from `image`, which is a dict,
                       # you probably want `Picture` here. 
```

但是，您还有其他一些问题。我是否可以建议不要尝试重新发明轮子，而是使用已经可用的东西。以下是提供此功能[的软件包列表。](https://www.djangopackages.com/grids/g/photos/)

# tfs - TFS 服务团队项目的最大数量？

> ID：16128069
> 
> 赞同：1
> 
> 时间：2013-04-21T04:46:21.983
> 
> 标签：tfs, azure-devops

团队基础服务 ( [http://tfs.visualstudio.com/](http://tfs.visualstudio.com/) ) 您可以在免费版本上创建的团队项目的最大数量是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T04:49:07.993

[根据定价](http://tfs.visualstudio.com/en-us/pricing/information)页面，目前是无限制的。就在顶部，上面写着“它包括什么”，“无限数量的项目”。

# javascript - 使函数仅在活动/聚焦输入/按钮/文本区域上工作的 jQuery 或 javaScript 语法是什么？

> ID：16128072
> 
> 赞同：2
> 
> 时间：2013-04-21T04:47:42.210
> 
> 标签：javascript, jquery, function, syntax, webforms

我是一个初学者和自我感兴趣的网络编码员。

我一直在测试、询问、重新测试、尝试、阅读 javaScript 中的不同功能解决方案到一个在线表格，`<textarea>'s`一旦我完成，该表格将包含大量内容。

我很好，目前的功能状态是基于几个 js 事件。示例代码将是（*写得很有趣，所以在论坛中更容易阅读，实际代码显然是一行*）：

```
<textarea
    data-id="0"
    class="classOne classTwo"
    id="dataInput_0"
    name="xInput_row_1"
        onFocus="functionOne();"
        onBlur="functionTwo();"
        onKeyUp="functionThree();">
</textarea> 
```

我构建并测试了所有专门用于`id="dataInput_0"`using的功能`getElementById`。例子：

```
var d = document.getElementById("dataInput_0"); 
```

所以我的问题是如何让函数触发其他`"dataInput"`id 的？

换句话说：

```
var d = document.getElementById('whichever dataInput that is active/focused'); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T04:53:33.573

使用当前代码的最简单方法是执行以下操作：

```
onFocus="functionOne(this);" 
```

...然后定义你的功能：

```
function functionOne(el) {
   // el is the element in question, used e.g.:
   alert(el.name);
} 
```

在`onFocus=...`浏览器中设置`this`有问题的元素，因此您可以将其作为参数传递给您的函数。然后，您的函数只需直接使用它，而不必通过`getElementById()`.

但是既然你提到了 jQuery，你可以从你的 html 中删除内联`onFocus`和其他`onXYZ`处理程序，并在你的 JS 中按如下方式完成所有操作：

```
$("textarea").focus(function() {
   // here this is the element in question, e.g.:
   alert(this.value);
}); 
```

这为页面上的所有 textareas 定义了一个焦点处理程序 - 将其缩小到仅具有类 "classOne" do 的 textareas `$("textarea.classOne")`。函数内`this`指的是焦点元素。您可以使用`.blur()`and`keyup()`方法为代码中显示的其他事件分配处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T05:22:34.347

我的建议是为此使用属性选择器`$('input[id^="dataInput_"]')`并以这种方式使用 jQuery 的`.on()`处理程序：

```
$('input[id^="dataInput_"]').on({
    focus: function{
       functionOne($(this));
    },
    blur:  function(){
       functionTwo($(this));
    },
    keyup: function(){
       functionThree($(this));
    }
}); 
```

和功能：

```
functionOne(obj){
   console.log(obj.val());
}
functionTwo(obj){
   console.log(obj.val());
}
functionThree(obj){
   console.log(obj.val());
} 
```

# java - 实例初始化块和子类

> ID：16128076
> 
> 赞同：2
> 
> 时间：2013-04-21T04:48:52.443
> 
> 标签：java, inheritance, initialization, initialization-block

我对实例初始化块何时应该运行感到困惑。根据 Kathy Sierra 的书：

> 每次创建类实例时都会运行实例初始化块

因此，根据[这个问题](https://stackoverflow.com/questions/488727/inheritance-in-java-creating-an-object-of-the-subclass-invokes-also-the-constr)和 java 的文档，考虑有两个类：父类和子类：

> 实例化子类对象只会创建 1 个子类类型的对象，但会调用其所有超类的构造函数。

根据上述： **为什么每次实例化子类的对象时都会调用位于超类中的实例初始化块？**它不像超类的新对象被实例化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T05:02:46.127

编译后实例 init 块成为构造函数的一部分。`javac`只需将 init 块添加到每个构造函数，即：

```
public class Test1 {
    int x;
    int y;

    {
        x = 1;
    }

    Test1() {
        y = 1;
    }
} 
```

相当于这个：

```
public class Test1 {
    int x;
    int y;

    Test1() {
        x = 1;
        y = 1;
    }
} 
```

所以初始化块在构造函数运行时运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T04:52:21.350

> 它不像超类的新对象被实例化。

实际上，就是这样。

子类的每个实例都隐含地包含其超类的一个实例。

超类构造函数总是作为任何构造函数的第一步被调用（并且反过来运行超类的任何实例初始化程序块）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-20T13:26:31.460

虽然这是一篇旧文章，但我遇到了这个值得分享的概念

因为我们在这里讨论的是实例块，所以实例代码流在父子关系类中是如何执行的 // Child extends Parent 如果我们为 Child 创建一个对象

1）从父到子识别类的实例成员

2) 仅在父类上执行实例变量赋值和实例块

3）父构造函数的执行

4）仅在子类上执行实例变量赋值和实例块

5)子构造函数的执行

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-21T04:52:37.110

因为在子的构造函数中总是存在`super()`对父构造函数的隐式调用（如果没有显式调用）。

# class - 一个 OverFlowException 的 Contract.Ensures

> ID：16128081
> 
> 赞同：0
> 
> 时间：2013-04-21T04:51:13.503
> 
> 标签：class, pex, contract, overflowexception

我有一个简单的方法，它返回给定数字的指数值：

```
 public int Exp(int num)
    {
        return Convert.ToInt32(System.Math.Exp(num));
    } 
```

运行 Pex 时，我在 Summary/Exception 字段中得到一个 OverFlowException，用于某个大数字：1969057606。

如何使用创建后置条件`Contract.Ensure()`？我尝试了以下但它没有做任何事情：

```
Contract.Ensures(Contract.Result<int>() < 2147483647);

// This is because the max value an int variable can hold is 2147483647 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:54:41.723

Contract.Ensures 用于在函数运行后断言你的类的状态，或者在这种情况下，不管输入是什么，函数的结果。您需要添加一个 Contract.Requires 使得*e* ^num <= int.MaxValue，例如

```
Contract.Requires<ArgumentOutOfRangeException>(num <= Math.Floor(Math.Log(int.MaxValue))) 
```

尽管您可能希望将最大值计算拉到一个常数中。

```
public static readonly int MAX_EXPONENT = Math.Floor(Math.Log(int.MaxValue));
...
Contract.Requires<ArgumentOutOfRangeException>(num <= MAX_EXPONENT) 
```

# android - 设置警报管理器正在创建我的主要活动的 2 个实例

> ID：16128091
> 
> 赞同：1
> 
> 时间：2013-04-21T04:52:56.557
> 
> 标签：android, alarmmanager, start-activity

我有 2 个活动，一个主要活动和 SetAlarm 活动。我从 Main 调用 SetAlarm Activity。当我设置警报时，我创建了一个我的 main 实例。如何在不创建 Main 的另一个实例的情况下设置警报，或者在设置警报之前杀死 main？对此很陌生。我已经阅读了几个警报管理器示例，但它们似乎都建立了一个新的意图，我认为这就是创建我的 2 个实例的原因。这就是你设置闹钟的方式。它确实熄灭了。

这是我从 Main 调用 SetAlarm 的方式：

```
public void setAlarm(View view) {
    Intent intent = new Intent(this, SetAlarmActivity.class);
    startActivityForResult(intent, 2);  
} 
```

这是我设置警报的方法：

```
public void setUpAlarm() {
    if (VERBOSE) Log.v(TAG, "+++ IN setUpAlarm +++");                   
        PLAY_MUSIC = "Y";
        Intent intentAlarm = new Intent(this, MainActivity.class);
        intentAlarm.putExtra("playMusic",PLAY_MUSIC);
        intentAlarm.putExtra("mPos", mPos);
        intentAlarm.putExtra("result",ALARM_SET);
        setResult(RESULT_OK,intentAlarm);
        pIntent = PendingIntent.getActivity(this, 12345, 
                intentAlarm, PendingIntent.FLAG_UPDATE_CURRENT);
        AlarmManager am = (AlarmManager)(this.getSystemService( Context.ALARM_SERVICE ));
        am.set(AlarmManager.RTC_WAKEUP, calSet.getTimeInMillis(), pIntent );
    } // setAlarmPlaySong 
```

我主要切断了警报：

```
@Override
public void onResume() {
    if (VERBOSE) Log.v(TAG, "+++ IN onResume +++");
    super.onResume();  
    Intent intent = getIntent()
    if (intent.hasExtra("playMusic")  && intent.hasExtra("mPos")) {
   playMusicFlag = intent.getStringExtra("playMusic"); 
   mPos = intent.getIntExtra("mPos", 0);   
   if (playMusicFlag.equalsIgnoreCase("Y")) {
       if (VERBOSE) Log.v(TAG, "+++ playMusicFlag is SET+++");
           playSongs();
               showStopAlarmButton();
       } // if    
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T06:01:46.090

如果您希望您的 startActivity 不应该启动多个 alam 活动实例，您应该转到您的清单，并且必须为您的警报活动添加一个名为 launchMode 的属性并将其设置为 SingleTop，这将确保只有一个实例保留在 taskk 回栈中（每个活动都以 LIFO 方式进行的地方）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:51:22.477

我不知道为什么你有 SetAlarm Activity，你不需要一个活动来设置警报。无论如何，AlarmManager 工作起来很痛苦。我花了一段时间才启动并运行它。这就是我现在在我的代码中运行的内容。

```
 Calendar cal = Calendar.getInstance();
        cal.add(Calendar.SECOND, 5);
        AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
        Intent notifyintent = new Intent(this, OnAlarmReceiver.class);
        notifyintent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        notifyintent.setAction("android.intent.action.NOTIFY");
        PendingIntent notifysender = PendingIntent.getBroadcast(this, 0, notifyintent,
                PendingIntent.FLAG_UPDATE_CURRENT);
        am.setInexactRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), 20 * 1000,
                notifysender); 
```

报警接收器

```
public class OnAlarmReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        // PullPendingRequests.acquireStaticLock(context)
        try {
            lock = getLock(context);
            lock.acquire();
            context.startService(new Intent(context, UpdateCustomerRequests.class));
        } finally {
            if (lock.isHeld()) {
                lock.release();
            }
        }
    }

    private static final String NAME = "com.commonsware.cwac.wakeful.WakefulIntentService";
    private static volatile PowerManager.WakeLock lockStatic = null;
    private static PowerManager.WakeLock lock;

    synchronized private static PowerManager.WakeLock getLock(Context context) {
        if (lockStatic == null) {
            PowerManager mgr = (PowerManager) context.getSystemService(Context.POWER_SERVICE);

            lockStatic = mgr.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, NAME);
            lockStatic.setReferenceCounted(true);
        }

        return (lockStatic);
    }
} 
```

OnAlarmReceiver 调用的 IntentService

```
public class UpdateCustomerRequests extends IntentService {
@Override
    final protected void onHandleIntent(Intent intent) {
        //
        //Your stuff here
        //
    }

    public class LocalBinder extends Binder {
        public UpdateCustomerRequests getService() {
            return UpdateCustomerRequests.this;
        }
    }

    @Override
    public IBinder onBind(Intent intent) {
        return bindToHomeScreen;
    }
} 
```

安卓清单

*   清单标签内

`<uses-permission android:name="android.permission.WAKE_LOCK" />`

*   内部应用程序标签

    ```
     <receiver
            android:name="com.taxeeta.support.OnAlarmReceiver"
            android:exported="true" >
            <intent-filter>
                <action android:name="android.intent.action.NOTIFY" />
            </intent-filter>
        </receiver> 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T06:06:49.320

默认情况下，`Activity`可以在多个任务上多次实例化 an。如果您想保持单一，请`android:launchMode="singleTask"`在 AnroidManifest.xml 中的活动声明中指定并覆盖`Activity#onNewIntent()`您的主要活动以接收新的意图，`AlarmManager`如果主要活动已经实例化。

请参阅[任务和返回堆栈](http://developer.android.com/guide/components/tasks-and-back-stack.html)以了解更多信息。您面临的情况几乎与*图 3*相同。

# javascript - 使用 javascript 构造函数重新初始化现有对象

> ID：16128097
> 
> 赞同：2
> 
> 时间：2013-04-21T04:54:26.267
> 
> 标签：javascript, firefox, html5-canvas

我正在使用这个函数为我的粒子系统创建一个粒子：

```
function particle()
{
    this.speed = {x: -1.5+Math.random()*3, y: -12+Math.random()*12};
    this.location = {x: 50, y: 150};
    this.radius = 5+Math.random()*8;
    this.life = 4+Math.random()*8;
    this.remaining_life = this.life;
    this.r = 255;
    this.g = 140;
    this.b = 30;
} 
```

我正在使用此功能在动画过程中更新粒子特征：

```
particle.prototype.updateparticle = function()
{
    this.remaining_life--;
    this.radius--;
    this.location.x += this.speed.x;
    this.location.y += this.speed.y;

    if(this.remaining_life < 0 || this.radius < 0)
    {
        this.speed = {x: -1.5+Math.random()*3, y: -12+Math.random()*12};
        this.location = {x: 50, y: 150};
        this.radius = 5+Math.random()*8;
        this.life = 4+Math.random()*8;
        this.remaining_life = this.life;
        this.r = 255;
        this.g = 140;
        this.b = 30;    
    }
} 
```

有没有办法可以避免冗余代码？

我也试过使用`this = new particle()`，但没有用。我想不出它不应该工作的原因。为什么不呢？

在完全不相关的情况下，Firefox 无法处理粒子动画吗？Chrome 使用了我 5% 的 CPU。Firefox 使用了大约 30 个，但仍然滞后！我有一个i5 2500k，所以这应该不是问题。我正在运行两者的最新版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T04:59:38.977

[应用](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)函数，将当前对象作为`this`参数传递：

```
particle.prototype.updateparticle = function()
{
    this.remaining_life--;
    this.radius--;
    this.location.x += this.speed.x;
    this.location.y += this.speed.y;

    if(this.remaining_life < 0 || this.radius < 0)
    {
        particle.apply(this);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T04:59:44.927

创建一个原型函数来初始化值

```
function particle() {
    this.init();
}

particle.prototype.init = function(){
    this.speed = {x: -1.5+Math.random()*3, y: -12+Math.random()*12};
    this.location = {x: 50, y: 150};
    this.radius = 5+Math.random()*8;
    this.life = 4+Math.random()*8;
    this.remaining_life = this.life;
    this.r = 255;
    this.g = 140;
    this.b = 30;
}

particle.prototype.updateparticle = function() {
    this.remaining_life--;
    this.radius--;
    this.location.x += this.speed.x;
    this.location.y += this.speed.y;

    if(this.remaining_life < 0 || this.radius < 0) {
        this.init();  
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T04:59:46.957

您可以将其设为另一个函数并在需要时调用。

```
function particle()
{
    this.initialize();
}

particle.prototype.initialize = function(){
    this.speed = {x: -1.5+Math.random()*3, y: -12+Math.random()*12};
    this.location = {x: 50, y: 150};
    this.radius = 5+Math.random()*8;
    this.life = 4+Math.random()*8;
    this.remaining_life = this.life;
    this.r = 255;
    this.g = 140;
    this.b = 30;    
}

particle.prototype.updateparticle = function()
{
    this.remaining_life--;
    this.radius--;
    this.location.x += this.speed.x;
    this.location.y += this.speed.y;

    if(this.remaining_life < 0 || this.radius < 0)
    {
        this.initialize();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T05:10:27.420

```
function particle(x, y, r, g, b) {
  this.location = {x: x, y: y};
  this.r = r;
  this.g = g;
  this.b = b;

  // Group everything that randomises in update()
  this.update = function() {
    this.speed = {x: -1.5+Math.random()*3, y: -12+Math.random()*12};
    this.radius = 5+Math.random()*8;
    this.life = 4+Math.random()*8;
    this.remaining_life = this.life;
  }

  this.update();
}

particle.prototype.updateparticle = function() {
  this.remaining_life--;
  this.radius--;
  this.location.x += this.speed.x;
  this.location.y += this.speed.y;

  if(this.remaining_life < 0 || this.radius < 0) {
    this.update();
  }
}

//Instantiation
var p1 = new particle(50, 150, 255, 140, 30); 
```

# php - 功能发送带有附件错误的电子邮件

> ID：16128098
> 
> 赞同：0
> 
> 时间：2013-04-21T04:55:02.097
> 
> 标签：php, html, email, mime, email-attachments

我正在尝试通过 PHP 发送带有附件文件的邮件来创建，但是有一个错误，当邮件发送到邮箱时，邮件到达这里没有任何附件邮箱的屏幕截图

![在此处输入图像描述](https://i.stack.imgur.com/dRAYk.png)

```
<?php
function mail_file($to, $from, $subject, $body, $file){

    $boundary = md5(rand());

    $headers = array(
        'MIME-Version: 1.0',
        "From: {$from}",
        "Content Type : multipart/mixed; boundary=\"{$boundary}\""

                    );

$message = array(
"--{$boundary}",
'Content-Type: text/html; charset="utf-8"',
'Content-transfer-Encoding: 7-bit',
'',
chunk_split($body),
"--{$boundary}",
"Content-Type: {file['type']}; name=\"{$file['name']}\"",
"Content-Disposition: attachment; filename=\"{$file['name']}\"",
"Content-Transfer-Encoding: base64",
'',
@chunk_split(base64_encode(file_get_contents($file['path']))),
"--{$boundary}--"
);

@mail($to, $subject, implode("\r\n", $message), implode("\r\n", $headers));     

        }

        if($_SERVER['REQUEST_METHOD'] =='POST'){
    $file = array (

    'name' => $_FILES['file']['name'],
    'size' => $_FILES['file']['size'],
    'type' => $_FILES['file']['type'],
    'path' => $_FILES['file']['tmp_name']
    );

    mail_file('fahmy.farahat@gmail.com', 'File from <fahmy.farahat@gmail.com>', 'a file up', $body, $file);
    }

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>send mail</title>
</head>

<body>

<form action="" method="post" enctype="multipart/form-data">
<label>Name</label><br />

<input type="text" name="name" id="name" />
<br /><br />

<input type="file" name="file" id="file"/>
<br />

<input type="submit" value="email file" />

</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T05:56:54.800

邮件标题应该`Content-Type`是，而不是`Content Type`。

# html - 将下拉列表放在另一个下拉列表中

> ID：16128099
> 
> 赞同：0
> 
> 时间：2013-04-21T04:55:42.257
> 
> 标签：html

使用 HTML，我试图创建一个嵌套的下拉菜单，但到目前为止没有成功。我在第一个下拉列表的第二个项目中放置了一个下拉列表，但内部下拉列表根本没有显示，[如下所示](http://jsfiddle.net/L6n5E/)：

```
<select id="myList">
  <option></option>
  <option>Item 1</option>
    <option>Item 2 with a dropdown list inside it
        <select id="myList">
            <option></option>
            <option>Item 1</option>
            <option>Item 2</option>
        </select>
    </option>
</select> 
```

甚至可以将一个 HTML 下拉列表放在另一个 HTML 下拉列表中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T04:58:03.090

这是不可能的，选择选项不能包含任何其他 html 标签。

> 最终转义字符（如`&eacute;`）的文本只允许在选择选项中使用。

`[See Reference](https://developer.mozilla.org/en-US/docs/HTML/Element/option)`

可能你想使用/创建一些 JS 插件。以下可能适合您的需要。 [http://twitter.github.io/bootstrap/javascript.html#dropdowns](http://twitter.github.io/bootstrap/javascript.html#dropdowns)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T04:59:14.953

你不能有一个嵌套的下拉菜单。标准下拉列表不支持任意 html，因此您必须创建自己的自定义下拉列表才能实现此目的。一种技术是使用带有 z-index 的 div 并添加展开/折叠逻辑来创建下拉效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T05:13:20.323

我找到[了一个名为 Droppy 的 JQuery 插件](http://onehackoranother.com/projects/jquery/droppy/#)，它似乎是为了解决我在这里描述的问题。

Dynamic Drive 也制作[了一个具有相同目的的类似脚本](http://www.dynamicdrive.com/style/csslibrary/item/suckertree-menu-horizontal/#)。

# html - 无论容器高度如何，如何创建一个将粘在屏幕底部的页脚？

> ID：16128100
> 
> 赞同：0
> 
> 时间：2013-04-21T04:55:44.203
> 
> 标签：html, css, containers, footer

我似乎无法弄清楚这一点。我有一个页脚，无论容器的高度和屏幕大小如何，我都想在页面底部显示。似乎在一些较大的屏幕上，背景一直滚动到页面底部，页脚在中间，在普通的 13 英寸 17 英寸屏幕上没问题。

CSS：

```
#container {
background-color: #ffffff;
min-height: 320px;
margin: 100px auto;
width: 960px;
max-width: 100%;
}
#footer {
background-color: #FFFFFF;
width: 100%;
height: 50px;
position:absolute;
margin-top: 140px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T05:15:44.797

这应该让你开始：

[http://twitter.github.io/bootstrap/examples/sticky-footer.html](http://twitter.github.io/bootstrap/examples/sticky-footer.html)

看起来他们正在设置

```
min-height: 100%
height: auto !important 
```

在主要内容部分，然后在其后添加页脚元素。

# c# - Windows 服务，并使其每天从上午 10 点到晚上 10 点运行，有间隔

> ID：16128105
> 
> 赞同：0
> 
> 时间：2013-04-21T04:57:14.667
> 
> 标签：c#, service

我有一个.NET EXE。我希望将其设置为 Windows 服务，并使其每天从上午 10 点到晚上 10 点运行，每 3 小时间隔一次：上午 10 点、下午 1 点、下午 4 点、晚上 7 点和晚上 10 点

如何做到这一点？请帮我。EXE里面有个方法，需要联系数据库，获取表的count。

注意：时间的值是有变化的，它来自后端。我的意思是从上午 10 点到晚上 10 点和频率 3 小时。以便他们可以根据需要进行更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T05:11:42.730

您不需要为此提供服务（这不是服务的设计目的）。

为此，请使用 Windows 计划任务，并让它在您需要运行的时候运行您的正常可执行文件。您可以使用[`Task Scheduler`](http://windows.microsoft.com/en-US/windows7/schedule-a-task)(in `Start->Programs->Accessories->Administrative Tools`) 来执行此操作。

# python - listproperty GAE 转字符串方法

> ID：16128106
> 
> 赞同：0
> 
> 时间：2013-04-21T04:57:30.157
> 
> 标签：python, json, google-app-engine

所以我下面的问题是，当它发送 json 对象时，可以说我在列表中有多个项目？好吧，它发送了很多对象，除了在我上面创建的字典中更改该字段一次。出于某种原因，即使我使用上面的 for 循环从列表中创建一个字符串，它实际上并没有做到这一点，我得到 15 个对象而不是 1 个对象，其中可能包含一个由逗号分隔的 15 个对象的字段。我的预期输出应该是 name,special1,special2,special3..etc,review1,review2

相反，我得到 name,special1,review1 name,special2,review1 name,special3,review1 etc.. name,special1,review2 name,special1,review3

我的主要问题是如何将列表转换为数组甚至只是字符串（如 toString 方法），以便我的 json 转储不会吐出倍数？

```
 class store(db.Model):
    mykey = db.StringProperty(db.Key)
    storeSpecial = db.ListProperty(item_type=str)
    reviews = db.ListProperty(item_type=str)
    storeName = db.StringProperty()

#later in the code
    qy1 = GqlQuery("SELECT storeName,storeSpecial,reviews FROM store WHERE mykey =:1",dataInput)

    records_to_send = []
    for i in qy1:
        rev =""
        for k in i.review:
            rev = rev + str(k) + ","
        spec = ""
        for k2 in i.storeSpecial:
            spec = spec + str(k2) + ","
        output = {"store name": i.storeName,"specials": spec,"reviews":rev}
        records_to_send.append(output)
    self.response.out.write(json.dumps(records_to_send)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T05:28:41.210

我不确定您想要什么，您的示例令人困惑。如果您使用 JSON，为什么不将其保留为列表？为什么要改成字符串？

看来你想要这样的东西

```
for store in qy1:
    records_to_send.append({'store name': store.storeName, 'specials': store.storeSpecial}, 'reviews': store.reviews}) 
```

# android - android 版本详细信息中的 ABIs: armeabi-v7a 是什么意思？请提供如何使用的内部细节？

> ID：16128109
> 
> 赞同：25
> 
> 时间：2013-04-21T04:58:03.270
> 
> 标签：android, arm, terminology, abi

运行 android list 目标时，我得到了 ABI：armeabi-v7a

这是什么意思？请提供如何使用的内部细节？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-21T05:22:25.923

ARM 是一种通常用于移动设备的 CPU 指令集。

armeabi 代表 ARM 嵌入式应用程序二进制接口，这意味着 android 正在运行的映像是使用 EABI 支持构建的。armeabi-v7a 代码是扩展的 armeabi 代码，可以包含额外的 CPU 指令，并支持硬件浮点运算。

您将在以下位置找到更详细的答案：[为什么使用 armeabi-v7a 代码而不是 armeabi 代码？](https://stackoverflow.com/questions/7080525/why-use-armeabi-v7a-code-over-armeabi-code)关联。

# python - 调用参数时statsmodles AR模型错误

> ID：16128116
> 
> 赞同：0
> 
> 时间：2013-04-21T04:59:01.047
> 
> 标签：python, pandas, time-series, statsmodels

statsmodels 新手，尝试使用 statsmodels.tsa.ar_model 来拟合 pandas 时间序列。

```
#pull one series from dataframe
y=data.sentiment
armodel=sm.tsa.ar_model.AR(y, freq='D').fit()
armodel.params() 
```

得到以下错误：

```
C:\Python27\lib\site-packages\pandas\lib.pyd in pandas.lib.SeriesIndex.__set__ (pandas\lib.c:27817)()
AssertionError: Index length did not match values 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:19:34.667

如果可以的话，你应该升级到当前的 master。这是固定[在这里](https://github.com/statsmodels/statsmodels/pull/722)。

# git - SmartGit 是否支持 git-svn？

> ID：16128118
> 
> 赞同：2
> 
> 时间：2013-04-21T04:59:18.703
> 
> 标签：git, svn, git-svn, smartgit

如果 SmartGit 甚至支持 git-svn，我将如何使用它？我会先克隆我的 svn 存储库，然后以某种方式将其链接到我的 git 存储库，反之亦然？我发现 git-svn 在 SmartGit 文档中非常简短地提到，但它没有描述如何在实际客户端中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:27:53.097

以下教程解释了 SmartGit 的 SVN 集成是如何工作的：

[https://www.syntevo.com/doc/display/SG/SmartGit+as+SVN+Bridge](https://www.syntevo.com/doc/display/SG/SmartGit+as+SVN+Bridge)

# python-2.7 - 井字游戏类型错误：“NoneType”对象没有属性“__getitem__”

> ID：16128124
> 
> 赞同：2
> 
> 时间：2013-04-21T04:59:46.663
> 
> 标签：python-2.7

我正在编写井字游戏。我已经完成了大部分程序。但我不断收到以下错误，我不明白我做错了什么。我试过以不同的方式格式化它。

```
Traceback (most recent call last):
  File "C:/Users/Akshay Sastry/Documents/CS 303E/Tic-Tac-Toe.py", line 66, in <module>
    main()
  File "C:/Users/Akshay Sastry/Documents/CS 303E/Tic-Tac-Toe.py", line 3, in main
    while isWinner(board) == 0 and movesLeft(board) == True:
  File "C:/Users/Akshay Sastry/Documents/CS 303E/Tic-Tac-Toe.py", line 20, in isWinner
    if (b[0][0]=='x') and (b[0][0]==b[0][1]==b[0][2]):
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

这是我的代码：

```
def main():
    board = makeBoard()
    while isWinner(board) == 0 and movesLeft(board) == True:
        printBoard(board)
        p1row, p1col = input("Enter a row and column for x: ")
        board[p1row][p1col] = 'x'
        if isWinner(board) == 0 and movesLeft(board) == True:
            printBoard(board)
            p2row, p2col = input("Enter a row and column for o: ")
            board[p2row][p2col] = 'o'
    if isWinner(board) != 0:
        print isWinner(board), 'won!'
    else:
        print 'Tie game.'

def makeBoard():
    board = [['*','*','*'],['*','*','*'],['*','*','*']]

def isWinner(b):
    if (b[0][0]=='x') and (b[0][0]==b[0][1]==b[0][2]):
        return 'x'
    elif (b[1][0]=='x') and (b[1][0]==b[1][1]==b[1][2]):
        return 'x'
    elif (b[2][0]=='x') and (b[2][0]==b[1][1]==b[2][2]):
        return 'x'
    elif (b[0][0]=='x') and (b[0][0]==b[1][0]==b[2][0]):
        return 'x'
    elif (b[0][1]=='x') and (b[0][1]==b[1][1]==b[2][1]):
        return 'x'
    elif (b[0][2]=='x') and (b[0][2]==b[1][2]==b[2][2]):
        return 'x'
    elif (b[0][0]=='x') and (b[0][0]==b[1][1]==b[2][2]):
        return 'x'
    elif (b[0][2]=='x') and (b[0][2]==b[1][1]==b[2][0]):
        return 'x'
    elif (b[0][0]=='o') and (b[0][0]==b[0][1]==b[0][2]):
        return 'o'
    elif (b[1][0]=='o') and (b[1][0]==b[1][1]==b[1][2]):
        return 'o'
    elif (b[2][0]=='o') and (b[2][0]==b[1][1]==b[2][2]):
        return 'o'
    elif (b[0][0]=='o') and (b[0][0]==b[1][0]==b[2][0]):
        return 'o'
    elif (b[0][1]=='o') and (b[0][1]==b[1][1]==b[2][1]):
        return 'o'
    elif (b[0][2]=='o') and (b[0][2]==b[1][2]==b[2][2]):
        return 'o'
    elif (b[0][0]=='o') and (b[0][0]==b[1][1]==b[2][2]):
        return 'o'
    elif (b[0][2]=='o') and (b[0][2]==b[1][1]==b[2][0]):
        return 'o'
    else:
        return 0

def printBoard(board):
    for i in range(3):
        for j in range(3):
            print board[i][j],
        print

def movesLeft(board):
    if board[0].count("*") != 0 or board[1].count("*") != 0 or board[2].count("*") != 0:
        return True
    else:
        return False
main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T05:05:07.893

您的`makeBoard()`函数返回`None`. 你应该这样：

```
def makeBoard():
    return [['*','*','*'],['*','*','*'],['*','*','*']] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T05:20:07.380

您的`isWinner`函数可以缩小 3 倍，如下所示

```
def isWinner(b):
    for i in range(3):
        if (b[i][0] != '*') and (b[i][0]==b[i][1]==b[i][2]): # all rows
            return b[i][0]
        if (b[0][i] != '*') and (b[0][i]==b[1][i]==b[2][i]): # all cols
            return b[0][i]
    if (b[0][0] != '*') and (b[0][0]==b[1][1]==b[2][2]): # tl-br diag
        return b[0][0]
    elif (b[0][2] != '*') and (b[0][2]==b[1][1]==b[2][0]): # bl-tr diag
        return b[0][2]
    else:
        return 0 
```

但是，对于像 connect 4 这样的较大板，您将遍历板上的所有点并编写一个方法，在循环中检查每个方向上的任意距离，而不是对一行可以所在的每个位置进行硬编码。

# python - 在不使用循环的情况下翻译 Django 中的选择？

> ID：16128128
> 
> 赞同：0
> 
> 时间：2013-04-21T05:00:02.073
> 
> 标签：python, django

我在 Python 中绝对是新手，如果给出我很好奇：

```
ENROLLMENT_STATUS = (
                         (1, 'Enrolled'),
                         (2, 'Promoted'),
                         (3, 'Dropped'),
                         (4, 'Failed'),
                     ) 
```

我可以在不使用循环的情况下将整数 1..4 转换为其 str 对应项，例如：

```
for i in Enrollment.ENROLLMENT_STATUS:
    if i[0] == self.enrollment_status:
        status = i[1]
        break 
```

感谢大家的帮助。

问候，乍得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T05:08:03.397

您可以使用该[`get_FOO_display`](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.get_FOO_display)方法，如下所示：

```
self.get_enrollment_status_display() 
```

`Enrolled`如果状态为，它将打印`1`，依此类推。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T05:16:19.073

您可以像这样将它们转换为字典

```
try:
    {k: v for k, v in ENROLLMENT_STATUS}[self.enrollment_status]
except ValueError:
    raise # or whatever 
```

或像这样：

```
try:
    dict(ENROLLMENT_STATUS)[self.enrollment_status]
except ValueError:
    raise # or whatever 
```

# php - PHP图像上传代码在本地主机上工作但在服务器上不工作

> ID：16128130
> 
> 赞同：-1
> 
> 时间：2013-04-21T05:00:11.800
> 
> 标签：php, image-upload

```
<?php
$con=mysqli_connect("localhost","root","","namkaran");
if(isset($_FILES['files'])){
    $errors= array();
    foreach($_FILES['files']['tmp_name'] as $key => $tmp_name ){
    $file_name = $key.$_FILES['files']['name'][$key];
    $file_size =$_FILES['files']['size'][$key];
    $file_tmp =$_FILES['files']['tmp_name'][$key];
    $file_type=$_FILES['files']['type'][$key];  
    if($file_size > 2097152){
        $errors[]='File size must be less than 2 MB';
    }       
    $query="INSERT into upload_data (`FILE_NAME`,`FILE_SIZE`,`FILE_TYPE`)
    VALUES('$file_name','$file_size','$file_type'); ";
    $desired_dir="user_data";
    if(empty($errors)==true){
        if(is_dir($desired_dir)==false){
            mkdir("$desired_dir", 0700); // Create directory if it does not exist
        }
        if(is_dir("$desired_dir/".$file_name)==false){
            move_uploaded_file($file_tmp,"$desired_dir/".$file_name);
        }else{              // rename the file if another one exist
            $new_dir="$desired_dir/".$file_name.time();
             rename($file_tmp,$new_dir) ;               
        }
     mysql_query($query);           
    }else{
            print_r($errors);
    }
}
if (!mysqli_query($con,$query))
{
 die('Error: ' . mysqli_error());
  }
if(empty($error)){
    echo "Photos Uploaded Succesfully !!";
}
 }
 ?> 
```

这是我的图片上传代码，它在本地主机上运行良好，但在服务器上上传时无法正常工作。该代码将上传的图像保存到一个名为 user_data 的文件夹中，如果它不存在，代码将自行创建该文件夹。然后将图像保存在文件夹中。在本地主机上，它创建了一个文件夹，它本身开始将图像保存到文件夹中，但在线它没有创建文件夹，当我手动创建文件夹时，它仍然没有将图像保存在文件夹中。该代码没有给出任何错误消息，而是给了我成功消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:54:25.710

1.  确保您的数据库连接成功并且所有查询都正确

2.  确保您的脚本在服务器上具有写入权限

3.  如果没有帮助，请尝试调试代码以找出问题所在

# c# - 在 ASP.NET MVC 中将对象数组发送到服务器时出现问题

> ID：16128131
> 
> 赞同：0
> 
> 时间：2013-04-21T05:00:16.147
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我正在使用`ASP.NET MVC 4`. 我正在尝试将对象数组发送到控制器。我的观点包含：

```
<input type="hidden" id="1" name="Persons" value='[
 {"Id":1,"Name":"Abc","Description":"this is desc"},
 {"Id":2,"Name":"def","Description":"this is desc"},         
 {"Id":4,"Name":"ghi","Description":"this is desc"}]'
/> 
```

我的控制器动作是这样的：

```
public ActionResult create(List<Person> Persons)
{
  //Here the Persons count is always 0, why ?
} 
```

当我发布我的表格时，我总是得到人数 0。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T06:35:35.897

尝试将您的输入值更改为：

```
{Persons: [
    {"Id":1,"Name":"Abc","Description":"this is desc"},
    {"Id":2,"Name":"def","Description":"this is desc"},         
    {"Id":4,"Name":"ghi","Description":"this is desc"}
]} 
```

# java - 程序在 Android 上的 .connect() 处崩溃，无法连接

> ID：16128132
> 
> 赞同：4
> 
> 时间：2013-04-21T05:00:23.447
> 
> 标签：java, android, connect, httpconnection

我已经试图弄清楚这几个小时了。我已经搜索了答案，但我找不到答案。我以前从来没有费心问过，这是我第一次问问题。基本上我正在做的是为了组织目的而分解我的编码。下面的代码片段工作得很好，但是当我把它放到另一个类中时， urlConnect(); 连接得很好。我在下面做了标记。

```
public String downloadUrl(String strUrl) throws IOException{
    String data = "";
    InputStream iStream = null;
    HttpURLConnection urlConnection = null;

    try{
        URL url = new URL(strUrl);
        String line = "";

        // Creating an http connection to communicate with url 
        urlConnection = (HttpURLConnection) url.openConnection();

        /* Connecting to url */
        urlConnection.connect(); <-------------------------works in this snippet

        /* Reading data from url */
        iStream = urlConnection.getInputStream();
        BufferedReader br = new BufferedReader(new InputStreamReader(iStream));
        StringBuffer sb  = new StringBuffer();

        while((line = br.readLine()) != null){
            sb.append(line);
        }
        data = sb.toString();
        br.close();
    }
    catch(Exception e){
        Log.d("Exception while downloading url", e.toString());
    }
    finally {
        iStream.close();
        urlConnection.disconnect();
    }
    return data;
} 
```

因此，以下代码段几乎相同。但由于某种原因，它不想连接：

```
public String getJSONobject(String strUrl) throws IOException{
    String data = "";
    InputStream iStream = null;
    HttpURLConnection urlConnection = null;

    try{
        URL url = new URL(strUrl);
        String line = "";
        urlConnection = (HttpURLConnection) url.openConnection();
        urlConnection.connect();    <------------------ Does not work

        iStream = urlConnection.getInputStream();
        BufferedReader br = new BufferedReader(new InputStreamReader(iStream));
        StringBuffer sb  = new StringBuffer();

        while((line = br.readLine()) != null){
            sb.append(line);
        }
        data = sb.toString();
        br.close();
        iStream.close();    
    }               
    catch (MalformedURLException e1) {
        e1.printStackTrace();
    } 
    catch (IOException e1) {
        e1.printStackTrace();
    } 
    finally {
        if(null != urlConnection) { urlConnection.disconnect(); 
    }
    return data; 
```

日志猫：

```
>at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1131)
>at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
>at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
>at java.net.InetAddress.getAllByName(InetAddress.java:214)
>at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
>at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
>at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340)
>at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
>at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
>at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
>at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:461)
>at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:433)
>at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
>at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
>at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
>at libcore.net.http.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:165)
>at com.navsquad.shsu.katlas2.RouteJSONobject.getJSONobject(RouteJSONobject.java:57)
>at com.navsquad.shsu.katlas2.CreateRoute.create(CreateRoute.java:41)
>at com.navsquad.shsu.katlas2.MainActivity$3.onMapClick(MainActivity.java:84)
>at com.google.android.gms.maps.GoogleMap$6.onMapClick(Unknown Source)
>at com.google.android.gms.internal.t$a.onTransact(Unknown Source)
>at android.os.Binder.transact(Binder.java:326)
>at com.google.android.gms.maps.internal.IOnMapClickListener$Stub$Proxy.onMapClick(IOnMapClickListener.java:93)
>at maps.i.s.b(Unknown Source)
>at maps.y.v.c(Unknown Source)
>at maps.y.bf.onSingleTapConfirmed(Unknown Source)
>at maps.d.v.onSingleTapConfirmed(Unknown Source)
>at maps.d.j.handleMessage(Unknown Source)
>at android.os.Handler.dispatchMessage(Handler.java:99)
>at android.os.Looper.loop(Looper.java:137)
>at android.app.ActivityThread.main(ActivityThread.java:5059)
>at java.lang.reflect.Method.invokeNative(Native Method)
>at java.lang.reflect.Method.invoke(Method.java:511)
>at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:792)
>at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:555)
>at dalvik.system.NativeStart.main(Native Method) 
```

所以再次澄清一下，我所做的只是为我自己的组织开设一个单独的课程。最初我有一个解析器，但我现在将它分成不同的类，所以我可以将其他解析器与字符串/JSON 对象一起使用。如果您能帮助我弄清楚与以前有什么不同，我将不胜感激。原始类在一个已实现的 AsyncTask 类中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T05:09:32.473

```
android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1131) 
```

您似乎试图在应用程序的 UI 线程上调用阻塞网络 API。

在 Android 3.0 及以上版本中，有一个新的应用程序策略不允许在主线程上执行网络调用。

请通过[http://developer.android.com/reference/android/os/StrictMode.html](http://developer.android.com/reference/android/os/StrictMode.html)。

您可以通过放置以下代码片段来禁用严格模式。**（我不会在生产环境中推荐这种方法。）**

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

# javascript - 如何更改 jquery 函数变量？

> ID：16128139
> 
> 赞同：0
> 
> 时间：2013-04-21T05:02:40.747
> 
> 标签：javascript, jquery, datatables

如何更改 jQuery 函数中的变量？我必须覆盖整个功能吗？
下面是在 jquery.dataTable.js 中找到的一个函数 如何将“，”添加到 sValidChars 变量。

```
 $.extend(DataTable.ext.aTypes, [
    function (sData) {
    ....
        var sValidChars = "0123456789.";
        ....
    }
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T05:05:52.467

您将不得不覆盖整个函数/更改实际文件中的代码。

因为`sValidChars`是匿名函数的局部变量，所以不能在函数作用域外访问。

# c++ - 如何使用 libpqxx 中的 pqxx::stateless_cursor 类？

> ID：16128142
> 
> 赞同：4
> 
> 时间：2013-04-21T05:02:52.203
> 
> 标签：c++, postgresql, libpqxx

我正在学习 libpqxx，这是 PostgreSQL 的 C++ API。我想使用 pqxx::stateless_cursor 类，但是 1) 我发现 Doxygen 输出在这种情况下没有帮助，2) pqxx.org 网站已经关闭了一段时间。

有谁知道如何使用它？

我相信这就是我构建的方式：

```
pqxx::stateless_cursor <pqxx::cursor_base::read_only, pqxx::cursor_base::owned>
    cursor( work, "SELECT * FROM mytable", ?, ? ); 
```

最后两个参数称为`cname`and `hold`，但没有记录。

一旦创建了游标，我将如何在 for() 循环中使用它来获取每一行，一次一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T22:07:32.033

感谢@Eelke 对`cname`和的评论`hold`。

我想出了如何使 pqxx::stateless_cursor 工作。我不知道是否有更清洁或更明显的方法，但这里有一个例子：

```
pqxx::work work( conn );
pqxx::stateless_cursor<pqxx::cursor_base::read_only, pqxx::cursor_base::owned>
    cursor( work, "SELECT * FROM mytable", "mycursor", false );

for ( size_t idx = 0; true; idx ++ )
{
    pqxx::result result = cursor.retrieve( idx, idx + 1 );
    if ( result.empty() )
    {
        // nothing left to read
        break;
    }

    // Do something with "result" which contains a single
    // row in this example since we told the cursor to
    // retrieve row #idx (inclusive) to idx+1 (exclusive).
    std::cout << result[ 0 ][ "name" ].as<std::string>() << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T06:11:38.597

我不知道 pqxx 库，但我猜是基于 postgresql 的底层 DECLARE 命令

该 cname 是游标的名称，因此它可以是 postgresql 通常接受的任何游标名称。

该保持指的是游标的 WITH HOLD 选项，来自文档：

> WITH HOLD 指定游标在创建它的事务成功提交后可以继续使用。WITHOUT HOLD 指定游标不能在创建它的事务之外使用。如果既未指定 WITHOUT HOLD 也未指定 WITH HOLD，则 WITHOUT HOLD 为默认值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-17T22:25:08.083

这是另一个游标示例，使用 do-while() 循环：

```
 const std::conStr("user=" + opt::dbUser + " password=" + opt::dbPasswd + " host=" + opt::dbHost + " dbname=" + opt::dbName);                                            

      pqxx::connection conn(connStr);
      pqxx::work txn(conn);
      std::string selectString = "SELECT id, name FROM table_name WHERE condition";

      pqxx::stateless_cursor<pqxx::cursor_base::read_only, pqxx::cursor_base::owned> 
      cursor(txn, selectString, "myCursor", false);

      //cursor variables
      size_t idx = 0;       //starting location
      size_t step = 10000;  //number of rows for each chunk
      pqxx::result result;
      do{
        //get next cursor chunk and update the index
        result = cursor.retrieve( idx, idx + step );
        idx += step;

        size_t records = result.size();
        cout << idx << ": records pulled = " << records << endl;

        for( pqxx::result::const_iterator row : result ){
          //iterate over cursor rows
        }
      }
      while( result.size() == step ); //if the result.size() != step, we're on our last loop
      cout << "Done!" << endl; 
```

# android - 访问android调用的日志文件时光标返回零记录，但在模拟器上工作正常

> ID：16128149
> 
> 赞同：0
> 
> 时间：2013-04-21T05:03:47.707
> 
> 标签：android, android-contentprovider, android-contentresolver, android-cursor

在这里，我正在使用 CallLogs.Call 并尝试使用从日志文件中获取通话历史记录`contentResolver.query()`，当我在模拟器上执行它时，它会显示记录，但在实际设备上运行时，Cursor 会给我零（0）条记录。我试图用实际设备调试它，但我不知道这里出了什么问题。帮助

```
 package com.example.billtrimmerfinal;

    import java.text.SimpleDateFormat;
    import java.util.Date;

    import android.app.Activity;
    import android.content.Context;
    import android.content.Intent;
    import android.database.Cursor;
    import android.net.ParseException;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.RadioButton;
    import android.widget.RadioGroup;
    import android.widget.Toast;

    public class callHistorySearch  extends Activity{

    private EditText txtStartDate;
    private EditText txtEndDate;
    private EditText txtNumber;
    private Button btnSearch;
    private RadioGroup radioLogType;
    private RadioButton radioSelected;
    private Date startDate;
    private Date endDate;
    private long Number;
    private String callType;
    private String callFrom;
    private long duration;
    private long DateOfCall;
    private StringBuilder data;
    int selectedId;
    private static String[] strFields = {
                    android.provider.CallLog.Calls.NUMBER, 
                    android.provider.CallLog.Calls.TYPE,
                    android.provider.CallLog.Calls.CACHED_NAME,
                    android.provider.CallLog.Calls.DURATION,
                    android.provider.CallLog.Calls.DATE,
                  };
    private Cursor cur=null;
    //private String[] strField={"NUMBER","TYPE","CACHED_NAME","DURATION,DATE"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.call_history_search1);
        btnSearch=(Button)findViewById(R.id.btnSearch);
        btnSearch.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                data=new StringBuilder("hello sonu");
                // TODO Auto-generated method stub
                radioLogType=(RadioGroup)findViewById(R.id.radioLogType);
                txtNumber=(EditText)findViewById(R.id.txtNumber);

                     selectedId=radioLogType.getCheckedRadioButtonId();//radioGroup
                radioSelected=(RadioButton)findViewById(selectedId);//radioButton
                int idx = radioLogType.indexOfChild(radioSelected);

                if(radioSelected==null)
                {
                    Toast.makeText(getApplicationContext(),"Please Select any of call types",5000).show();
                    return;
                }
                else if((txtNumber.getText().toString().trim().length()<0) ||(txtNumber.getText().equals("Number")))
                {
                    Toast.makeText(getApplicationContext(), "Please Select a Number", 5000).show();
                    return;
                }

                else
                {

                //Retrieving dates from the EditText
                txtStartDate=(EditText)findViewById(R.id.txtStartDate);
                txtEndDate=(EditText)findViewById(R.id.txtEndDate);
                SimpleDateFormat sdf=new SimpleDateFormat("dd/mm/yyyy");
                try
                {
                startDate=sdf.parse(txtStartDate.getText().toString());
                endDate=sdf.parse(txtEndDate.getText().toString());
                }

                catch (java.text.ParseException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                String strOrder = android.provider.CallLog.Calls.DATE + " DESC"; 
                String condition="TYPE=? AND NUMBER=? AND DATE >= ? "; 
                try{
                 cur = getContentResolver().query(
                        android.provider.CallLog.Calls.CONTENT_URI,
                        null,
                        condition,
                        new String[]{Integer.toString(idx+1),txtNumber.getText().toString(),Long.toString(startDate.getTime())},
                        strOrder
                        );
                int count=cur.getCount();
                Toast.makeText(getApplicationContext(),Long.toString(count),5000).show();
                while(cur.moveToNext())
                {   

                    Number=Long.parseLong(cur.getString(cur.getColumnIndex(strFields[0])));
                    Toast.makeText(getApplicationContext(),Long.toString(Number),5000).show();
                    callFrom=cur.getString(cur.getColumnIndex(strFields[2]));
                    callType=cur.getString(cur.getColumnIndex(strFields[1]));
                    duration=Long.parseLong(cur.getString(cur.getColumnIndex(strFields[3])));
                    DateOfCall=Long.parseLong(cur.getString(cur.getColumnIndex(strFields[4])));

                    int sec=(int)(duration);
                        int min=(int)(sec/60);
                         sec=sec%60;
                         int hour=min/60;
                         min=min%60;

                        data.append("\n"+"Number:-->"+Number+"\n");
                        data.append("Call From:-->"+ callFrom +"\n");
                        data.append("Call Type:-->Incoming"+"\n");
                        data.append("Call Duration:-->"+hour+" hr:"+min+" min:"+sec+" sec"+"\n");
                        data.append("Call Date:-->"+new Date(DateOfCall).toString()+"\n");
                        data.append("----------------------------------"+"\n\n");

                        }
                }
                catch(Exception ee)
                {
                    ee.printStackTrace();
                }

                //Toast.makeText(callHistorySearch.this, data.toString(),5000).show();

                Intent intent=new Intent(callHistorySearch.this,showCallRecord.class);
                intent.putExtra("data", data.toString());
                startActivity(intent);
                }

        }});
    }

} 
```

# php - 如果数据不存在则隐藏表格行

> ID：16128160
> 
> 赞同：0
> 
> 时间：2013-04-21T05:07:09.207
> 
> 标签：php, wordpress

如果自定义字段中没有数据，我想知道是否有可以用来防止表格行形成的代码。

例如这是我的表：

```
 <tr>
            <td><?php echo $place_1; ?></td>
            <td><?php echo $person_1; ?></td>
            <td><?php echo $status_1; ?></td>
            <td><a href="<?php echo $website_1; ?>"></a></td>
        </tr>
        <tr>
            <td><?php echo $place_2; ?></td>
            <td><?php echo $person_2; ?></td>
            <td><?php echo $status_2; ?></td>
            <td><a href="<?php echo $website_2; ?>"></a></td>
        </tr>
        <tr>
            <td><?php echo $place_3; ?></td>
            <td><?php echo $person_3; ?></td>
            <td><?php echo $status_3; ?></td>
            <td><a href="<?php echo $website_3; ?>"></a></td>
        </tr> 
```

我怎样才能做到“如果 $place_2 为空，隐藏 2 和 3 的所有表行？”

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T05:12:39.990

您可以简单地使用 PHP 仅在该行不为空时输出该行：

```
...
</tr>
<?php if ($place_2 != "") { ?>
<tr>
    <td><?php echo $place_2; ?></td>
    <td><?php echo $person_2; ?></td>
    <td><?php echo $status_2; ?></td>
    <td><a href="<?php echo $website_2; ?>"></a></td>
</tr>
<?php } ?>
<tr>
... 
```

这种方法将`tr`元素包装在一个`if`块中。还有其他许多方法可以达到相同的结果，这可能会出现在其他答案中。根据您的问题，您似乎也想在为空`$place_3`时进行压制。`$place_2`我假设`$place_3`在这种情况下会是空的，所以你可以对那个`tr`元素应用相同的方法，`$place_2`用`$place_3`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T05:38:45.350

您也可以使用 WHILE 循环。这适用于任意数量的行。只需将 4 替换为要在`While`条件中检查的行数

```
<?php
 $i=0;
 while($i<4)
 {
   if($place_.$i == "")
      break; // if $place_ variable is empty no further rows are printed.
   else
   {
?>
    <tr>
        <td><?php echo $place_.$i; ?></td>
        <td><?php echo $person_.$i; ?></td>
        <td><?php echo $status_.$i; ?></td>
        <td><a href="<?php echo $website_.$i; ?>"></a></td>
    </tr> 
<?php
   } // closing bracket of else
  $i = $i + 1;
 } //end of while loop
?> 
```

# ios - 头文件中的typedef没有被xcode拾取

> ID：16128176
> 
> 赞同：0
> 
> 时间：2013-04-21T05:12:07.833
> 
> 标签：ios, cocoa, typedef, xcode4.6

我在 Ah 文件中有一个 typedef，我在 Bh 中导入了使用相同 typedef 的 Ah 文件。

在最长的时间内一切正常，但现在它抱怨它无法识别 typedef 并在 xcode 中给出“预期类型”错误，即使 xcode 在第二个文件中突出显示 typedef，这意味着它知道它们是在其他地方定义的在哪里。

如果我手动重新定义该 typedef 那么错误就会消失。但我收到警告说我正在重新定义 typedef 并且它是 C11 功能。

我尝试删除派生数据，但错误仍然存​​在。看起来 xcode 正在尝试在插入导入文件之前查找 typedef。有什么线索吗？我正在使用 xcode 4.6

```
//WebService.h
#import <Foundation/Foundation.h>
#import "AppDelegate.h"

@interface WebService : NSObject

typedef void(^loginUserWithUserNameandPaswordCompletion)(NSDictionary *, NSError*);

+(void)createUserWithName:(NSString*)name
                 andEmail:(NSString*)email
              andPassword:(NSString*)password
             onCompletion:(loginUserWithUserNameandPaswordCompletion) complete;
@end

//DataCenter.h
#import <Foundation/Foundation.h>
#import "WebService.h"
#import "AppDelegate.h"

typedef void(^loginUserWithUserNameandPaswordCompletion)(NSDictionary *, NSError*);
@interface DataCenter : NSObject

+(void) logInUserWithEmail:(NSString*) email
               andPassword:(NSString*)password
              onCompletion:(loginUserWithUserNameandPaswordCompletion)complete;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T08:35:05.103

尝试将 typedef 放在您的`@interface`in之前`WebService.h`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T04:57:23.017

使用了 gberginc 提到的 @class

# java - Java：将布尔网格设置为全部 true 时出现“无效的行号”

> ID：16128179
> 
> 赞同：-1
> 
> 时间：2013-04-21T05:13:13.980
> 
> 标签：java, grid, boolean

我正在尝试将以下 Grid 设置为全部 true，但出现错误

> “2685 不是 java.util.Arrays 中的有效行号”

```
public class Grid {

    static boolean[][] gridCon;
    boolean white = true;
    boolean black = false;
    private static int Height;
    private static int Width;

    public Grid(int height, int width) {

        Height = height;
        Width = width;
        Arrays.fill(gridCon, true);

    }
} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T05:22:08.967

Arrays.fill 不适用于二维数组，试试这个

```
gridCon = new boolean[Height][Width]; 
for(boolean [] e : gridCon) {
    Arrays.fill(e, true);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T05:16:20.613

尝试初始化数组`gridCon = new boolean[Height][Width];` 如果这不起作用，请发布完整的错误

# javascript - 元素随机定位不正确？

> ID：16128182
> 
> 赞同：0
> 
> 时间：2013-04-21T05:13:32.830
> 
> 标签：javascript, jquery, html, css

我有大量使用 javascript 的样式（是的，我知道它需要优雅地降级），并且有一个特定元素 -randomly - 没有正确定位。更改其左边距属性的行似乎被跳过了。所以，我使用了一个while循环来确保它正在改变，如果不改变它。现在发生率大大降低，但仍未消除！这是 javascript 的一个已知问题吗？这部分之前/之后的整个代码块不超过 30 行！

```
while (sloganCheck != 1) {
    if ($('#homepage_homestrip_slogan').css('margin-left') != (browserWidth-$('#homepage_homestrip_slogan').width())/2) {
        $('#homepage_homestrip_slogan').css('margin-left',(browserWidth-$('#homepage_homestrip_slogan').width())/2);
        sloganCheck = 1;
    }
} 
```

# c# - 如何将不同的xml文件绑定到wpf中的数据网格？

> ID：16128183
> 
> 赞同：1
> 
> 时间：2013-04-21T05:14:10.630
> 
> 标签：c#, wpf, c#-4.0, wpf-controls

我们有 40 个 xml 文件。我们想动态绑定到数据网格。例如，不同结构的 40 个 xml 文件

```
a xml file :
<a>
<at1="val1" at2="val2"  >
<at1="val4" at2="val5" >
<at1="val7" at2="val8" >
<at1="val10" at2="val11" >
</a>

b xml file:
<b>
<at1="val1" at2="val2" at3="val3" >
<at1="val4" at2="val5" at6="val6">
<at1="val7" at2="val8" at3="val9">
<at1="val10" at2="val11" at3="val12">
</b>

c xml file:
<c>
<at1="val1" at2="val2" at3="val3"  at13="vall3">
<at1="val4" at2="val5" at6="val6"  at14="val14">
<at1="val7" at2="val8" at3="val9" at15="val15">
<at1="val10" at2="val11" at3="val12"  at16="val16">
</c> 
```

动态代码：

```
XElement TrackList = XElement.Parse("a.xml");

                    var atributs = TrackList.Descendants("a").Attributes();
                    foreach (var item in atributs)
                    {
                        DataGridTextColumn cc=new DataGridTextColumn();
                        cc.Header = item.Name;

                        Binding myBinding = new Binding("Attribute[" + item.Name.ToString() + "].Value");
                        myBinding.Source = datagrid1;
                        //LibViadat.SetBinding(TextBlock.TextProperty, myBinding);
                        cc.Binding = myBinding;
                        datagrid1.Columns.Add(cc);

                    }

                    datagrid1.DataContext = TrackList;
                    datagrid1.Visibility = Visibility.Visible; 
```

# c - 文件扫描多行时跳过行

> ID：16128187
> 
> 赞同：0
> 
> 时间：2013-04-21T05:14:35.600
> 
> 标签：c, file, line, skip, fault

只要文件是这种格式，此代码就会读取文件并打印它

```
word,12,34
words,40,20
another,20,11 
```

如果它之间有这样的空行，我该如何让它做同样的事情，因为现在它只是给我一个分段错误

```
word,12,34

words,40,20

another,20,11

#include <stdio.h>
#include <string.h>
#include <stdlib.h>
int main (int argc, char *argv[])
{
    FILE *pdata;
    char buffer[1000];
    char *token, *del=",";
    int value1;
    double value2;

    pdata = fopen ("file.data", "r");

    if(pdata == NULL)
    {
        printf("unable to open file \n");
        exit(1);
    }

    while( fgets(buffer, sizeof(buffer), pdata) != NULL )
    {
        token = strtok(buffer, del);
        value1 = atoi( strtok(NULL, del) );
        value2 = atof( strtok(NULL, del) );

        printf("%s is %.3lf\n", token, value1 + value2);

    }

    fclose( pdata );

return 0;
} 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T05:31:41.093

我会做出两个改变：

```
char *del = ", "; // test for either space or comma 
```

并且（根据我之前对问题的评论）：

```
while( fgets(buffer, sizeof(buffer), pdata) != NULL )
{
    char *temp;
    token = strtok(buffer, del);
    if (token != NULL) {
      temp = strtok(NULL, del);
      if (temp) value1 = atoi( temp );
      temp = strtok(NULL, del);
      if (temp) {
        value2 = atof( temp );
        printf("%s is %.3lf\n", token, value1 + value2);
      }
} 
```

`strtok`如果没有找到令牌，将返回 NULL 。传递一个 NULL 字符串`atoi`是什么给你的段错误，我猜。像这样，我们绝对确保不会发生这种情况。我对此进行了测试，并且可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T05:20:53.027

```
while( fgets(buffer, sizeof(buffer), pdata) != NULL )
{
    if (buffer[0] == '\n') {
        /* empty line */
        continue;
    }
    token = strtok(buffer, del);
    value1 = atoi( strtok(NULL, del) );
    value2 = atof( strtok(NULL, del) );

    printf("%s is %.3lf\n", token, value1 + value2);

} 
```

# java - JEdi torPane 将一些样式变为蓝色

> ID：16128191
> 
> 赞同：2
> 
> 时间：2013-04-21T05:15:39.057
> 
> 标签：java, css, swing, jeditorpane

我一直在使用 JEditorPane，试图显示 CSS，但它似乎没有正确地这样做。查看其他示例，它似乎应该是正确的，但似乎没有正确渲染。据我所知，CSS 和 Swing 不能很好地结合使用。

这就是我目前正在尝试做的事情：

```
// List variables...
public JEditorPane diff_view = new JEditorPane();
public static HTMLEditorKit kit = new HTMLEditorKit();
public static StyleSheet ss = kit.getStyleSheet();

public Frame() {
// Adding a list...
try {
    ss.importStyleSheet(new URL("http://slot1.wikia.com/load.php?debug=true&lang=en&"
                    + "modules=mediawiki.action.history.diff&only=styles"));
    } catch (MalformedURLException ex) { }
JScrollPane jsp2 = new JScrollPane(diff_view);
jsp2.setSize(909, 650);
jsp2.setLocation(153, 100);
diff_view.setContentType("text/html");
diff_view.setEditable(false);
diff_view.setLocation(153, 100);
diff_view.setSize(909, 650);
diff_view.setEditorKit(kit);
add(diff_view);
}
// Retrieving the pages.. 
```

没有错误出现，只是一个蓝色的编辑器窗格。这是最初检索到的内容：[http](http://runescape.wikia.com/index.php?diff=prev&oldid=7886038&diffonly=1&action=render) ://runescape.wikia.com/index.php?diff=prev&oldid=7886038&diffonly=1&action=render 。

我应该尝试更改样式表、jeditorpane 还是其他东西？

为了清楚起见，这是一张正在发生的事情的图片：

![蓝色 JEditorPane](https://i.stack.imgur.com/3Kj3D.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:02:43.423

`JEditorPane`样式支持有限。您可以尝试，例如[https://code.google.com/p/flying-saucer/](https://code.google.com/p/flying-saucer/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T06:56:48.330

您不应该为此使用 jeditorpane。

# html - 为什么有一个永无止境的行（文本超过其容器的 div 宽度时不会放置到下一行）

> ID：16128193
> 
> 赞同：0
> 
> 时间：2013-04-21T05:16:03.663
> 
> 标签：html, css

我无法摆脱这个。我正在使用包装器以固定宽度包装内容`div`。这是[我的网站](http://go.theshashwat.com)。如果文本的长度太长，那么剩余的文本不会像往常一样显示在下一行。

我只是新手`CSS`。我`overflow:hidden`在 header中使用`div`只是为了删除一些无法使用`margin: 0`. `overflow`如果有任何事情要做，我尝试删除财产，但没有运气。

我正在使用`ddsmoothmenu`动态驱动器。我也尝试过删除它，但仍然没有什么好处。

### 稍后添加

**这里的另一个问题**是，如果我缩放太多以至于浏览器窗口比包装器的宽度短，并且水平滚动似乎包装器的宽度也在减小。我在[nuget](http://nuget.org)中看到的行为相同。

这是我写的一些CSS：

```
body {
    background-color: #EEEEEE;
    color: #333;
    font-size: .85em;
    font-family: "Open Sans";
    margin:0 0;
    font-family:'Segoe UI';
}

.wrapper, #main-menu {
    width:1000px;
    margin:0 auto;
}
#page {
    background-color:white;
}

#main {
    min-height:200px;
}
#header {
    height: 80px;
    overflow:hidden;
    background: #80b8dd;
    font-weight:bold;
    color:white;
    background: -moz-linear-gradient(top, #80b8dd 0%, #188edd 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#80b8dd), color-stop(100%,#188edd));
    background: -webkit-linear-gradient(top, #80b8dd 0%,#188edd 100%);
    background: -o-linear-gradient(top, #80b8dd 0%,#188edd 100%);
    background: -ms-linear-gradient(top, #80b8dd 0%,#188edd 100%);
    background: linear-gradient(to bottom, #80b8dd 0%,#188edd 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#80b8dd', endColorstr='#188edd',GradientType=0 );
}

#navigation {
    height:37px;
    background-color:#414141;
}

#logo {
    margin:10px 0 10px 10px;
} 
```

请帮忙 ！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T05:19:50.597

您的文本中没有空格。使用 lorem ipsum 进行测试。以下是一些生成器：

*   [http://generator.lorem-ipsum.info/](http://generator.lorem-ipsum.info/)
*   [http://hipsteripsum.me/](http://hipsteripsum.me/)（时髦的 ipsum）
*   [http://cupcakeipsum.com/](http://cupcakeipsum.com/)（如果你想要更甜一点的纸杯蛋糕 ipsum）

`word-break`在您必须处理[巨大](http://en.wikipedia.org/wiki/Lopado%C2%ADtemacho%C2%ADselacho%C2%ADgaleo%C2%ADkranio%C2%ADleipsano%C2%ADdrim%C2%ADhypo%C2%ADtrimmato%C2%ADsilphio%C2%ADparao%C2%ADmelito%C2%ADkatakechy%C2%ADmeno%C2%ADkichl%C2%ADepi%C2%ADkossypho%C2%ADphatto%C2%ADperister%C2%ADalektryon%C2%ADopte%C2%ADkephallio%C2%ADkigklo%C2%ADpeleio%C2%ADlagoio%C2%ADsiraio%C2%ADbaphe%C2%ADtragano%C2%ADpterygon)的单词的情况下，您可以使用 CSS属性来破坏单词：

```
word-break: break-all; 
```

如果您只想在适当的连字符点断词，则可以选择：

```
word-break: hyphenate; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T07:00:40.550

将此添加到您的 CSS 中：

```
#page {
    background-color: #fff;
    word-break: break-all;
}

#main {
    min-height: 200px;
    word-break: break-all;
} 
```

# javascript - HTML 5 画布运动

> ID：16128194
> 
> 赞同：0
> 
> 时间：2013-04-21T05:16:13.583
> 
> 标签：javascript, html, html5-canvas

我正在尝试制作一个简单的 html 游戏，但在让角色跳跃时遇到了问题。一切动作都很好，左右和向下，但是一旦我尝试调用跳跃，我的屏幕就会冻结并且没有任何动作发生。我可能正在听一些非常简单的东西，但我似乎无法理解。我还尝试在跳转函数中省略绘制/清除调用，但这也没有奏效。

```
<script>
var isJumping = false;
var isFalling = false; 
var recwidth = 400;
var recheight = 400;
var xpos = 200;
var ypos = 200;
window.onload = function() {
var FPS = 30;
setInterval(function() {
  clear();
  draw();
}, 1000/FPS);
};
function jump()
 {
 isJumping=true;
 while (isJumping == true)
 {
    ypos=ypos-3;
    clear();
    draw();
    if(ypos==297)
    {
        isJumping == false;
    }

 }

 }

function changex(x){
xpos = xpos + (x);
}
function changey(y){
ypos = ypos + (y);
}

function draw(){
var canvas = document.getElementById('canvas')
var  context = canvas.getContext('2d');
var img=new Image()
    img.src="character.png"
    img.onload = function() { 
    context.drawImage(img,xpos,ypos)}
}

function clear(){
var canvas = document.getElementById('canvas')
var  context = canvas.getContext('2d');
context.clearRect(0,0,);
}

  document.onkeydown = function(event) {
var keyCode; 

if(event == null)
{
  keyCode = window.event.keyCode; 
}
else 
    {
 keyCode = event.keyCode; 
   }

   switch(keyCode)
   {
     // left 
     case 37:
    //left
    changex(-5);
       break; 

 // up 
 case 38:
 // action when pressing up key
 jump();
   break; 

 // right 
 case 39:
 // action when pressing right key
 changex(5);
  break; 

 // down
 case 40:
 // action when pressing down key
 changey(5);
   break; 

 default: 
   break; 
   } 
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T06:09:37.857

是的，你没有给处理器喘息的时间。这通常使用 setTimeout 或 setInterval 完成，因为 while 循环太紧而无法进行连续的屏幕更新

我不确定使用 setTimeout 会有多顺利 - 我通过循环动画画布搜索找到了这个[http://script-tutorials.com/html5-animation-patterns-with-loops](http://script-tutorials.com/html5-animation-patterns-with-loops)

# linux - Cmake错误设置编译器

> ID：16128199
> 
> 赞同：4
> 
> 时间：2013-04-21T05:17:07.883
> 
> 标签：linux, cmake

出于某种原因，CMake 的 C 和 C++ 编译器默认设置为`/usr/bin/qcc`. 我已经关注[了这篇文章](https://stackoverflow.com/questions/9699930/cmake-complains-the-cxx-compiler-identification-is-unknown)并尝试了命令

> cmake -D CMAKE_C_COMPILER=/usr/bin/gcc -D CMAKE_CXX_COMPILER=/usr/bin/g++

但我得到了错误

> CMake错误：源目录[当前目录]/CMAKE_CXX_COMPILER=/usr/bin/g++" 不存在。

为什么 CMake 将我的命令解释为目录，以及设置 CMake 编译器的正确方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T14:03:57.610

你有正确的想法，但是你想要的命令行是：

```
cmake -DCMAKE_C_COMPILER=/usr/bin/gcc -DCMAKE_CXX_COMPILER=/usr/bin/g++ <path_to_source> 
```

差异是微妙的。和要设置的变量之间不应有空格`-D`，这就是 CMake 将您的变量分配解释为目录的原因。CMake 还`CXX`用于 C++ 特定变量，这使其与 Make 保持一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T05:53:06.833

是`CMAKE_CXX_COMPILER`，不是`C++`。

# windows-8 - 如何动态更改出现在应用栏按钮下方的文本？

> ID：16128203
> 
> 赞同：2
> 
> 时间：2013-04-21T05:18:11.927
> 
> 标签：windows-8, windows-runtime

我有一个应用栏按钮，我想通过代码隐藏动态更改其下方显示的文本。我尝试更改其 Content 属性，但它更改了图标。

我无法在stackoverflow上或通过互联网找到答案......

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T13:37:41.383

在代码中，编写以下内容：

```
AutomationProperties.SetName(myAppBarButton, "New text"); 
```

如果您查看标题的工作方式，他们会`AutomationProperties.Name`为此目的“劫持”附加属性，然后将其绑定到内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:36:03.657

转到standardstylesheet.xaml 并添加一个新的键，就像已经在那里找到的键一样！

```
<Style x:Key="SkipBackAppBarButtonStyle" TargetType="ButtonBase" BasedOn="{StaticResource AppBarButtonStyle}">
    <Setter Property="AutomationProperties.AutomationId" Value="SkipBackAppBarButton"/>
    <Setter Property="AutomationProperties.Name" Value="Skip Back"/>
    <Setter Property="Content" Value="&#xE100;"/>
</Style> 
```

# visual-c++ - 未处理的异常

> ID：16128204
> 
> 赞同：-1
> 
> 时间：2013-04-21T05:18:35.333
> 
> 标签：visual-c++, opencv, knn

我正在尝试通过论坛的帮助代码来实现 KNN 算法。代码如下。

```
#include <opencv\cv.h>
#include <opencv\ml.h>
#include <opencv\highgui.h>
#include <opencv\cxcore.h>

#include <iostream>
#include <stdlib.h>
#include <stdio.h>
#include <time.h>

using namespace std;
using namespace cv;

//typedef unsigned char BYTE;

int readFlippedInteger(FILE *);

int main()
{
    FILE *fp = fopen("D:\\KNN\\train-images.idx3-ubyte", "rb");
        FILE *fp2 = fopen("D:\\KNN\\train-labels.idx1-ubyte", "rb");

    if(!fp || !fp2)
    {
        cout<<"Files not Found"<<endl;
        return 0;
    }

    int magicNumber = readFlippedInteger(fp);
    int numImages = readFlippedInteger(fp);
    int numRows = readFlippedInteger(fp);
    int numCols = readFlippedInteger(fp);

    fseek(fp2, 0x08, SEEK_SET);

    int size = numRows*numCols;
    CvMat *trainingVectors = cvCreateMat(numImages, size, CV_32FC1);
    CvMat *trainingLabels = cvCreateMat(numImages, 1, CV_32FC1);

    //BYTE *temp = new BYTE[size];
    unsigned char *temp =  (unsigned char *) malloc(size);

    unsigned char tempClass=0;

    for(int i=0; i < numImages; i++)
    {
        fread((void*)temp, size, 1, fp);
        fread((void*)(tempClass), sizeof(unsigned char*), 1, fp2);

        trainingLabels->data.fl[i] = tempClass;

        for(int k=0; k < size; k++)
            trainingVectors->data.fl[i*size+k] = temp[k];
    }

    KNearest knn(trainingVectors, trainingLabels);
    printf("Maximum k: %d\n", knn.get_max_k());  

    fclose(fp);
    fclose(fp2);

    cvReleaseMat(&trainingVectors);
    cvReleaseMat(&trainingLabels);

    return 0;
}

int readFlippedInteger(FILE *fp)
{
    int ret = 0;
    unsigned char *temp;

    temp = (unsigned char*)(ret);
    fread(&temp[3], sizeof(unsigned char*), 1, fp);
    fread(&temp[2], sizeof(unsigned char*), 1, fp);
    fread(&temp[1], sizeof(unsigned char*), 1, fp);
    fread(&temp[0], sizeof(unsigned char*), 1, fp);

    return ret;
} 
```

我使用 unsigned char 而不是 BYTE，我认为它应该做同样的工作。如果我在这里错了，请纠正我。

尽管如此，我不是编程专家，但是当我运行代码时出现此错误

> * K-Nearest Neighbour.exe 中 0x000007FEE68F7450 (msvcr110d.dll) 处未处理的异常：0xC0000005：访问冲突写入位置 0x0000000000000003

有人可以帮我构建此代码..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T05:31:47.003

您错过了“地址”运算符，并且 sizeof 似乎是错误的：

```
int readFlippedInteger(FILE *fp)
{
    int ret = 0;
    unsigned char *temp = (unsigned char*)(&ret);
    fread(&temp[3], sizeof(unsigned char), 1, fp);
    fread(&temp[2], 1, 1, fp);  // should be equivalent to above
    ...    
} 
```

另一个问题可能是 4 字节的假设`int`，因为您正在使用 64 位进行编译，这从错误消息中可以明显看出。

# android - Android - ScrollView 内的 WebView 在底部留下空白

> ID：16128211
> 
> 赞同：5
> 
> 时间：2013-04-21T05:20:28.943
> 
> 标签：android, android-webview, android-scrollview

我想在滚动容器中添加多个 WebView。为了做到这一点，我以编程方式将它们添加到 LinearLayout 中。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/scrollView"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent">

 <LinearLayout
        android:id="@+id/webViewContainer"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        />

 </ScrollView> 
```

现在的问题是，当我使用 loadDataWithBaseURL() 方法在 WebViews 中加载数据时，WebViews 在底部留下了一些额外的空间。无法为这个问题找到合适的解决方案。谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-02T08:34:41.150

```
WebView webView = new WebView(this);
        webView.loadDataWithBaseURL("about:blank",
                Utils.getHtmlData(article.getContent()), "text/html",
                "utf-8", null);
        rl_wrapper.removeAllViews();
        rl_wrapper.addView(webView); 
```

我使用包装器代替 webview，英语不是我的母语，但也希望它可以帮助你。

# c++ - 向向量添加新对象，每次都返回相同的地址

> ID：16128218
> 
> 赞同：0
> 
> 时间：2013-04-21T05:22:26.800
> 
> 标签：c++

我有代码：

我的载体：`std::vector<spreadsheet> spreadsheets;`

```
//create a new spreadsheet if it doesn't already exist. Link the session to the spreadsheet.
bool server::createSpreadsheet(session* session, std::string name, std::string password)
{
    std::cout << "beginning" << std::endl;

    bool found = false;
    for(int i = 0; i < spreadsheets.size(); i++)
    {

      spreadsheet test = spreadsheets.at(i);
      std::cout << "spreadsheet name = " << &test << std::endl;
      if(spreadsheets.at(i).name == name) //spread sheet already exists
      {
          found = true;

      }
    }
    std::cout << "After For found = " << found << std::endl;

    if(!found) //create a spreadsheet
    {
      spreadsheet * spr = new spreadsheet(name, password);
      spr->linkSession(session);
      spreadsheets.push_back(*spr);
    }
    else
    {
      std::cout << "in else" << std::endl;
      return false;
    }
    return true;
} 
```

我希望这会每次都创建一个新的电子表格对象`found`并将`false`其放置在向量中。但是根据我得到的输出，它似乎每次都放同一个对象？我不知道这里发生了什么？

运行多次后输出：

```
beginning
spreadsheet name = 0x7fff568bce10
spreadsheet name = 0x7fff568bce10
spreadsheet name = 0x7fff568bce10
spreadsheet name = 0x7fff568bce10
spreadsheet name = 0x7fff568bce10
spreadsheet name = 0x7fff568bce10
spreadsheet name = 0x7fff568bce10
spreadsheet name = 0x7fff568bce10
spreadsheet name = 0x7fff568bce10 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T05:27:56.593

您将电子表格复制到局部变量。然后输出局部变量的地址。

如果您想在向量本身中输出电子表格的地址，您可以执行以下操作：

std::cout << "电子表格名称 = " << &spreadsheets[i] << std::endl;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T05:27:45.997

```
spreadsheet test = spreadsheets.at(i); 
```

是复制初始化。这意味着`test`创建了一个新的电子表格对象，并将其中的任何内容按`spreadsheets.at(i)`值**复制到其中**。

然后你不断地获取新`test`对象的地址。**不是向量中值的地址。**

并且范围`test`在 for 循环内。因此，编译器在每次迭代时都会将其分配在相同的地址中，并向您显示相同的地址。

如果您想要其中的地址，`at(i)`则`spreadsheets`必须直接获取其地址

```
std::cout << "spreadsheet name = " << &spreadsheets.at(i) << std::endl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T05:32:26.523

> 似乎每次都放同一个物体？

不，只是临时的局部变量 ( `test`) 位于内存中的一个特定位置，当然该地址不会改变。您必须检查对象的内容才能区分它们。

此外，您使用的方式`vector`至少`new`是非常错误的。您正在推回已分配的电子表格对象的**副本**，`new`多余地调用复制构造函数，然后您松开指向原始对象的指针，泄漏内存。当您从向量中检索对象时，您将再次复制它。为什么不使用参考？

```
spreadsheet spr(name, password);
spr.linkSession(session);
spreadsheets.push_back(spr); // this copies too, but at least only once

// ...

/* optionally: const */ spreadsheet &test = spreadsheets.at(i); 
```

此外，鼓励使用**迭代器**遍历向量：

```
for (vector<spreadsheet>::iterator it = spreadsheets.begin(); it != spreadsheets.end(); it++) {
    // use `*it` to access the current element
} 
```

# objective-c - UIView 不自动调整子视图

> ID：16128220
> 
> 赞同：3
> 
> 时间：2013-04-21T05:22:34.843
> 
> 标签：objective-c, cocoa-touch, uiview

我有一个`a`已`autoresizing subviews`启用的 UIView。它的大小是：

```
 <UIView: 0x7650180; frame = (0 0; 320 394); clipsToBounds = YES; autoresize = LM+RM+H; layer = <CALayer: 0x7650230>> 
```

我有另一个 UIView`b`添加到视图`a`中。视图`b`具有灵活的宽度/高度。当我添加它时，我希望它的高度会更改为，但它与 nib ( )`394`中的保持相同：`420`

```
<UIView: 0x764f720; frame = (0 0; 320 460); autoresize = LM+W+RM+TM+H+BM; layer = <CALayer: 0x764f320>> 
```

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T07:46:05.743

子视图的自动调整大小仅适用于已添加到父视图的子视图。你该怎么办：

1.  创建父视图。
2.  添加子视图。
3.  为它们设置自动调整大小的蒙版。
4.  调整父视图的大小。

只有这样，您才会看到子视图正在自动调整大小。

调整大小后添加子视图将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T05:29:47.390

Autoresize 仅在父视图的框架发生更改时影响子视图。如果您希望子视图与父视图具有相同的高度，则必须在将其添加为子视图之前或之后将高度设置为相等。

# google-maps-api-3 - 我在使用 Google Map Api Zoom in 以适应所有标记时遇到问题

> ID：16128221
> 
> 赞同：0
> 
> 时间：2013-04-21T05:22:45.593
> 
> 标签：google-maps-api-3, google-maps-markers

我已附上我正在使用的 google API 的源代码。我创建了一个数组，其中包含我要查看的标记列表。我在网上找到了一个链接（[http://blog.shamess.info/2009/09/29/zoom-to-fit-all-markers-on-google-maps-api-v3/](http://blog.shamess.info/2009/09/29/zoom-to-fit-all-markers-on-google-maps-api-v3/)），显示我可以使用fit bound 方法查看所有标记。我尝试实现它，但不能查看所有标记，但在我可以查看所有标记之前，现在我无法查看任何标记。如果有人能在这里指导我，我将不胜感激。我对js很陌生，所以如果我犯了一个非常愚蠢的错误，请原谅我。

```
function initApp() {
APIKey = {
'bing': '',
'leaflet': ''
};

console.log('app initialized');
startGeolocation();

 }

 /**
  *  google maps
   */

  // initialize the map
   function initGoogleMaps() {
    myLocation = new google.maps.LatLng(myLat, myLong);

   var mapOptions = {
zoom: 13,
center: myLocation,
mapTypeId: google.maps.MapTypeId.ROADMAP,
zoomControl: true,
mapTypeControl: false,
streetViewControl: false
 };
 googleMap = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    }

    // search for nearby places
        function initGooglePlaces() {
       //searchForPlaces(googlePlacesCallback);
         findMe();

          }

         // search callback
            function googlePlacesCallback(results) {
          for(var i = 0; i < results.length; i++) {
            createGoogleMarker(results[i]);
      }
           }

           // create a marker / push-pin
            function createGoogleMarker(place) {
         var placeLoc = place.geometry.location;
            var marker = new google.maps.Marker({
           map: googleMap,
      position: place.geometry.location
          });
           }

        function multiMe(){ }
function findMe() {
var multiArray = new Array (5);
multiArray [0] = new Array(2);
multiArray [1] = new Array(2);
multiArray [2] = new Array(2);
multiArray [3] = new Array(2);
multiArray [4] = new Array(2);  
multiArray [0][0] = "43.9651";
multiArray [0][1] = "-78.8917";
multiArray [1][0] = "43.9551";
multiArray [1][1] = "-78.8917";
multiArray [2][0] = "43.9451";
multiArray [2][1] = "-78.8917";
multiArray [3][0] = "43.9351";
multiArray [3][1] = "-78.8917";
multiArray [4][0] = "43.951";
multiArray [4][1] = "-78.8917";
for(i=0; i<5; i++){
    var tLat =  multiArray [i][0];
    var tLong = multiArray [i][1];
    var newLatLng = new google.maps.LatLng(tLat,tLong );
    var bounds = new google.maps.LatLngBounds ();
    bounds.extend (newLatLng[i]);
    var marker = new google.maps.Marker({
        map: googleMap,
        position: newLatLng
    });
    map.fitBounds (bounds);
}
     }
         /**
          * search for POI
          */

       // example of seraching for places using google
      function searchForPlaces(callback) {
     var request = {
      location: myLocation,
      radius: 2000,
       types: ['bar']
       };

        infowindow = new google.maps.InfoWindow();
          var service = new google.maps.places.PlacesService(googleMap);
        service.search(request, callback);
        return;
        }

      /**
        *  geolocation
        */

       // we use HTML5 Geolocation to pin-point where the user is
      function startGeolocation() {
       var options;
        navigator.geolocation.getCurrentPosition(geoSuccess, geoFail, options);
        }

        // geolocation success callback
        function geoSuccess(position) {
         var gpsPosition = position;
        var coordinates = gpsPosition.coords;
        myLat = coordinates.latitude;
        myLong = coordinates.longitude;
        bb.pushScreen('google.html', 'google');
        }

        // geolocation failure callback
        function geoFail() {
       alert('Error getting your position. Using defaults instead');

         // set default position upon failure
       myLat = 44.465187;
       myLong = -80.522372;
       bb.pushScreen('google.html', 'google');
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T06:04:00.110

将 google.maps.LatLngBounds 视为一个矩形（4 个经纬度坐标确定它的边缘）。当您调用 bounds.extend(location) 时，您正在更改边界的边缘，以便该位置包含在矩形中。在您的情况下，您需要更改

```
for(i = 0; i < 5; i++){
var tLat =  multiArray [i][0];
var tLong = multiArray [i][1];
var newLatLng = new google.maps.LatLng(tLat,tLong );
var bounds = new google.maps.LatLngBounds ();
bounds.extend (newLatLng[i]);
var marker = new google.maps.Marker({
    map: googleMap,
    position: newLatLng

}); 
```

和

```
var bounds = new google.maps.LatLngBounds ();
for(i = 0; i < 5; i++){
var tLat =  multiArray [i][0];
var tLong = multiArray [i][1];
var newLatLng = new google.maps.LatLng(tLat,tLong );
bounds.extend (newLatLng[i]);
var marker = new google.maps.Marker({
    map: googleMap,
    position: newLatLng

}); 
```

# visual-studio-2010 - 显示文本文件中的某些项目

> ID：16128231
> 
> 赞同：0
> 
> 时间：2013-04-21T05:24:32.987
> 
> 标签：visual-studio-2010, listbox, text-files

所以我有一个带有菜单栏和 lstbox 的表单。菜单栏上是显示选项，有 3 个选项；全部，小说或非小说。文本文件按顺序包含书名、作者、类别（小说或非小说）、库存、价格。当用户单击全部显示时，我希望所有标题都显示在列表框中。如果他们点击非小说，只有非小说标题，与小说相同。到目前为止，这是我的代码：

```
Private Sub menuDisplay_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles menuDisplay.Click

    Dim books() As String = IO.File.ReadAllLines("Books.txt")
    Dim data() As String
    Dim allBooksTitle, allNonFicTitle, allFicTitle As String

    For i As Integer = 0 To books.Count - 1
        data = books(i).Split(","c)
        allBooksTitle = data(2)
        If data(2).Trim = "N" Then
            allNonFicTitle = data(0)
        ElseIf data(2).Trim = "F" Then
            allFicTitle = data(0)
        End If
    Next

    ' show result
    If menuDisplayAll.Checked Then
        lstBox.Items.Add(allBooksTitle)
    ElseIf menuDisplayFic.Checked Then
        lstBox.Items.Add(allFicTitle)
    ElseIf menuDisplayNonFic.Checked Then
        lstBox.Items.Add(allNonFicTitle)
    End If
End Sub 
```

我不太确定如何编写代码来显示小说或非小说书籍标题以及列表框在每个按钮之间刷新而不是添加到列表框中。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T21:47:15.897

在此代码中显示数据的最佳方式是将显示代码移到处理循环中。

```
Private Sub menuDisplay_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles menuDisplay.Click

    Dim books() As String = IO.File.ReadAllLines("Books.txt")

    lstbox.Items.Clear() 'remove all items from the listbox

    For i As Integer = 0 To books.Count - 1
        Dim data() As String 'Moved inside to limit scope
        Dim allBooksTitle, allNonFicTitle As String

        data = books(i).Split(","c)
        allBooksTitle = data(2) 'store the two fields
        allNonFicTitle = data(0)

        If menuDisplayAll.Checked Then 'check for each item
            lstBox.Items.Add(allBooksTitle)
        ElseIf menuDisplayFic.Checked AndAlso data(2).Trim = "F" Then
            lstBox.Items.Add(allNonFicTitle) 
        ElseIf menuDisplayNonFic.Checked AndAlso data(2).Trim = "N"Then
            lstBox.Items.Add(allNonFicTitle)
        End If
    Next
End Sub 
```

但是，如果您使用 .net 3.5 或更高版本，使用 LINQ 可能会更干净

```
Private Sub menuDisplay_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles menuDisplay.Click

    Dim books() As String = IO.File.ReadAllLines("Books.txt")

    lstbox.Items.Clear()
    Dim query As IEnumerable(Of String)
    If menuDisplayAll.Checked Then 'check for each item 
            query = From book As String In books let data As String() = book.Split(',') Select data(0)
    ElseIf menuDisplayFic.Checked
            query = From book As String In books let data As String() = book.Split(',')  Where data(2).Trim = "F" Select data(2)
    ElseIf menuDisplayNonFic.Checked
            query = From book As String In books let data As String() = book.Split(',')  Where data(2).Trim = "N" Select data(2)
    End If

    lstBox.Items.AddRange(query)
End Sub 
```

# python - 天气 API、Python 或 JavaScript

> ID：16128232
> 
> 赞同：0
> 
> 时间：2013-04-21T05:25:24.633
> 
> 标签：python, django, weather-api

我正在尝试让天气 API 正常工作。但是我怎样才能得到 C° 和天气图标？没有其他的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T05:42:09.493

使用 pip安装[pywapi](http://code.google.com/p/python-weather-api/)后，打开 ipython shell 并探索`pywapi`可以做什么。这是一个实际上为您提供所需内容的示例：-

```
In [1]: import pywapi

In [2]: pywapi.
pywapi.GOOGLE_CITIES_URL                   pywapi.YAHOO_WEATHER_URL                   pywapi.get_weather_from_weather_com        pywapi.urlopen
pywapi.GOOGLE_COUNTRIES_URL                pywapi.getText                             pywapi.get_weather_from_yahoo              pywapi.wind_beaufort_scale
pywapi.NOAA_WEATHER_URL                    pywapi.get_cities_from_google              pywapi.minidom                             pywapi.wind_direction
pywapi.URLError                            pywapi.get_countries_from_google           pywapi.quote                               pywapi.xml_get_attrs
pywapi.WEATHER_COM_URL                     pywapi.get_everything_from_yahoo           pywapi.re                                  pywapi.xml_get_ns_yahoo_tag
pywapi.YAHOO_WEATHER_NS                    pywapi.get_weather_from_noaa               pywapi.sys                                 pywapi.yield_all_country_city_codes_yahoo

In [2]: pywapi.get_weather_from_yahoo?
Type:       function
String Form:<function get_weather_from_yahoo at 0x10daeb9b0>
File:       /Users/calvin/.virtualenvs/myweather/lib/python2.7/site-packages/pywapi.py
Definition: pywapi.get_weather_from_yahoo(location_id, units='metric')
Docstring:
Fetches weather report from Yahoo! Weather

Parameters:
  location_id: A five digit US zip code or location ID. To find your location ID,
  browse or search for your city from the Yahoo! Weather home page (http://weather.yahoo.com/)
  The weather ID is in the URL for the forecast page for that city. You can also get
  the location ID by entering your zip code on the home page. For example, if you
  search for Los Angeles on the Weather home page, the forecast page for that city
  is http://weather.yahoo.com/forecast/USCA0638.html. The location ID is USCA0638.

  units: type of units. 'metric' for metric and '' for non-metric
  Note that choosing metric units changes all the weather units to metric,
  for example, wind speed will be reported as kilometers per hour and
  barometric pressure as millibars.

Returns:
  weather_data: a dictionary of weather data that exists in XML feed.
  See http://developer.yahoo.com/weather/#channel

In [3]: pywapi.get_weather_from_yahoo('USCA0638')
Out[3]:
{'astronomy': {'sunrise': u'6:16 am', 'sunset': u'7:28 pm'},
 'atmosphere': {'humidity': u'67',
  'pressure': u'1013.7',
  'rising': u'1',
  'visibility': u'16.09'},
 'condition': {'code': u'33',
  'date': u'Sat, 20 Apr 2013 9:46 pm PDT',
  'temp': u'18',
  'text': u'Fair',
  'title': u'Conditions for Los Angeles, CA at 9:46 pm PDT'},
 'forecasts': [{'code': u'31',
   'date': u'20 Apr 2013',
   'day': u'Sat',
   'high': u'26',
   'low': u'15',
   'text': u'Clear'},
  {'code': u'32',
   'date': u'21 Apr 2013',
   'day': u'Sun',
   'high': u'26',
   'low': u'14',
   'text': u'Sunny'},
  {'code': u'34',
   'date': u'22 Apr 2013',
   'day': u'Mon',
   'high': u'22',
   'low': u'13',
   'text': u'Mostly Sunny'},
  {'code': u'30',
   'date': u'23 Apr 2013',
   'day': u'Tue',
   'high': u'21',
   'low': u'14',
   'text': u'Partly Cloudy'},
  {'code': u'30',
   'date': u'24 Apr 2013',
   'day': u'Wed',
   'high': u'19',
   'low': u'13',
   'text': u'Partly Cloudy'}],
 'geo': {'lat': u'34.05', 'long': u'-118.23'},
 'html_description': u'\n[![][5]][5]<br />\n<b>Current Conditions:</b><br />\nFair, 18 C<BR />\n<BR /><b>Forecast:</b><BR />\nSat - Clear. High: 26 Low: 15<br />\nSun - Sunny. High: 26 Low: 14<br />\nMon - Mostly Sunny. High: 22 Low: 13<br />\nTue - Partly Cloudy. High: 21 Low: 14<br />\nWed - Partly Cloudy. High: 19 Low: 13<br />\n<br />\n<a href="http://us.rd.yahoo.com/dailynews/rss/weather/Los_Angeles__CA/*http://weather.yahoo.com/forecast/USCA0638_c.html">Full Forecast at Yahoo! Weather</a><BR/><BR/>\n(provided by <a href="http://www.weather.com" >The Weather Channel</a>)<br/>\n',
 'link': u'http://us.rd.yahoo.com/dailynews/rss/weather/Los_Angeles__CA/*http://weather.yahoo.com/forecast/USCA0638_c.html',
 'location': {'city': u'Los Angeles', 'country': u'US', 'region': u'CA'},
 'title': u'Yahoo! Weather - Los Angeles, CA',
 'units': {'distance': u'km',
  'pressure': u'mb',
  'speed': u'km/h',
  'temperature': u'C'},
 'wind': {'chill': u'18', 'direction': u'0', 'speed': u'0'}} 
```

正如您在结果中看到的，您可以在`html_description`( [http://l.yimg.com/a/i/us/we/52/33.gif](http://l.yimg.com/a/i/us/we/52/33.gif) ) 和`temp`. 由于返回给您的结果就是一切，您需要像使用 python 字典一样提取/访问它。

**更新**

1.  转到[http://weather.yahoo.com/](http://weather.yahoo.com/)并输入您的邮政编码（或您的城市）。
2.  如果有多个选择，请选择您想要的一个。
3.  在“6-10 天”栏下找到“扩展预测”链接。点击它。
4.  查看 URL 地址栏，那里的数字是您所在城市的邮政编码。

**所有城市代码**

这是帮助您获取所有国家、城市代码的功能

```
In [4]: pywapi.yield_all_country_city_codes_yahoo?
Type:       function
String Form:<function yield_all_country_city_codes_yahoo at 0x10daebaa0>
File:       /Users/calvin/.virtualenvs/myweather/lib/python2.7/site-packages/pywapi.py
Definition: pywapi.yield_all_country_city_codes_yahoo(country_code, cities)
Docstring:
Yield all cities codes for a specific country.

Parameters:
  country_code: A four letter code of the necessary country. For example 'GMXX' or 'FRXX'.
  cities: The number of cities to yield

Returns:
  country_city_codes: A generator containing the city codes 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T20:56:26.020

您可以使用 Metwit[天气 API](http://metwit.com/developers/)。
如果您可以在客户端实现它们：每天 200 个请求（基于 ip 的限制）不需要身份验证。覆盖全球，符合 JSON 和 REST 标准。您可以免费注册额外的 API 调用，如果您仍然需要在服务器端调用它们，基本计划非常便宜。

这里有一个 jQuery 中的小例子：http: [//jsbin.com/isukam/1](http://jsbin.com/isukam/1)使用我们的[天气资源](http://metwit.com/developers/docs/resources/weather/)。

完全披露：我拥有这个可爱的 API。

# java - 协助我的 Java AndroidOS 游戏

> ID：16128236
> 
> 赞同：-1
> 
> 时间：2013-04-21T05:27:45.870
> 
> 标签：java, android, libgdx

我目前正在尝试使用 libGDX 在 Android 操作系统上制作游戏，并且正在为它开发屏幕管理器。我基于我在 VB.NET 中使用的屏幕管理器并尝试将其转换为 java。这是我到目前为止所拥有的，我会告诉你我的确切问题是什么。

管理器.java

```
package rawct.gamename.Screen;

    import java.util.ArrayList;
    import java.util.Iterator;
    import java.util.List;

    import com.badlogic.gdx.Gdx;

    import rawct.gamename.GameName;
    import rawct.gamename.Screen.Screens.*;

    public class Manager extends GameName {
    private static List<Screen> Screens = new ArrayList<Screen>();
    private static List<Screen> NewScreens = new ArrayList<Screen>();
    private Screen Debug = new Debug("Debug");

    public Manager() {
        //Gdx.app.log("Manager", "New Instance!");
        AddScreen(Debug);
        //Testing to see which screens were loaded and testing unload
        UnloadScreen();
    }

    public void AddScreen(Screen NewScreen){
        NewScreens.add(NewScreen);
    }

    public void Draw(){ 
    }

    public void UnloadScreen(){
        Gdx.app.log("UnloadScreen", "Start");
        for(Iterator<Screen> s = NewScreens.iterator(); s.hasNext();){
            Gdx.app.log("Screen", ""+s.next().Name);
            //Should output Debug.Name but isn't, outputting Screen.Name
        }
        Gdx.app.log("UnloadScreen", "End");
    }

    public void Update(){
    }
} 
```

屏幕.java

```
package rawct.gamename.Screen;

public interface Screen {
    enum ScreenState {
        Active,
        Hidden,
        ShutDown
    }

    public static String Name = null;
    public ScreenState State = ScreenState.Active;
    public float Position = 0;
    public boolean Focused = false;
    public boolean GrabFocus = true;

    public void HandleInput();
    public void Update();
    public void Draw();
    public void Unload();
} 
```

和我的测试屏幕

调试.java

```
package rawct.gamename.Screen.Screens;

import com.badlogic.gdx.Gdx;

import rawct.gamename.Screen.Screen;

public class Debug implements Screen {
    public Debug(String sName){
        // TODO Constructor
        Gdx.app.log("Debug", "New Instance!");
        Name = sName;
        //Won't let me set name, says "The final sfield Screen.Name cannot be assigned"
    }

    @Override
    public void HandleInput() {
        // TODO Auto-generated method stub
    }

    @Override
    public void Update() {
        // TODO Auto-generated method stub
    }

    @Override
    public void Draw() {
        // TODO Auto-generated method stub
    }

    @Override
    public void Unload() {
        // TODO Auto-generated method stub
    }

} 
```

好的，现在我已经发布了所有代码，我要做的是访问每个屏幕的每个 .Name 变量，我将添加到屏幕列表（列表）中，但它不允许我以这种方式设置/访问我的屏幕我想要。但它适用于 VB.NET 我知道这并不意味着什么，但我只是想知道如何在 Java 中实现这一点。

我希望能够将新屏幕添加到屏幕列表中，并为它们命名并使用列表访问每个屏幕中的每个方法和变量。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T05:44:01.897

默认情况下，接口中的变量是静态的和最终的。删除 Screen 界面中的所有变量。

Make`Screen`是一个具体的类，具有私有变量并为其生成 getter 和 setter。

# java - JPanel 大小问题，当我调整大小时

> ID：16128243
> 
> 赞同：0
> 
> 时间：2013-04-21T05:29:13.400
> 
> 标签：java, image, swing, resize, jpanel

我有以下代码来显示和绘制`JPanel`缓冲图像。

我将其大小设置为缓冲图像的大小，但实际上并没有设置。

当我调整大小时它会显示滚动条，但是当我调整大小`JFrame`大于面板大小`BufferedImage`时，当我点击面板大小之外时，我仍然会收到鼠标事件。

我省略了额外的代码。

```
 public class PaintFrame extends JFrame{    
        private JScrollPane paintScrollPane;
        private Painter painter;
        private JPanel paintPanel;
        private BufferedImage paintImage;
        private Color forgroundColor;

        public PaintFrame(){
            super("Paint");
            setDefaultCloseOperation(EXIT_ON_CLOSE);
            setPreferredSize(new Dimension(800, 600));
            setLocationByPlatform(true);
            getContentPane().setBackground(Color.black);

            paintImage = new BufferedImage(700, 500, BufferedImage.TYPE_3BYTE_BGR);

            paintPanel = new JPanel(){
                @Override
                public void paint(Graphics g){
                    if(paintImage != null){
                        g.drawImage(paintImage, 0, 0, paintImage.getWidth(), paintImage.getHeight(), null);
                    }
                }
            };
            paintPanel.setBackground(Color.white);
            paintPanel.addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent me){
                    mouseClickedOnPaint(me);
                }
            });
            paintPanel.setPreferredSize(new Dimension(paintImage.getWidth(), paintImage.getHeight()));
            paintScrollPane = new JScrollPane(paintPanel, JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED, JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);

            getContentPane().add(paintScrollPane);

            pack();
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T06:15:26.050

正如 Quirlom 所指出的， s 可能会根据实现的需要`LayoutManager`选择忽略该值`getPreferredSize`

如果您只担心鼠标事件，您可以通过确定鼠标事件是否在图像中单击来过滤掉它们。

否则你需要找到一个更能满足你需求的布局管理器......

下面的示例简单地确定鼠标事件是否落在图像的范围内......

![在此处输入图像描述](https://i.stack.imgur.com/nVDyM.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class ClickImage {

    public static void main(String[] args) {
        new ClickImage();
    }

    public ClickImage() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ImagePane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class ImagePane extends JPanel {

        private BufferedImage background;
        private List<Point> goodPoints;
        private List<Point> badPoints;

        public ImagePane() {
            try {
                background = ImageIO.read(new File("/Volumes/Disk02/Dropbox/MegaTokyo/url.jpg"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }
            goodPoints = new ArrayList<>(5);
            badPoints = new ArrayList<>(5);
            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    if (getImageBounds().contains(e.getPoint())) {
                        goodPoints.add(e.getPoint());
                    } else {
                        badPoints.add(e.getPoint());
                    }
                    repaint();
                }
            });
        }

        @Override
        public void invalidate() {
            goodPoints.clear();
            badPoints.clear();
            super.invalidate();
        }

        public Rectangle getImageBounds() {
            Rectangle bounds = new Rectangle();
            if (background != null) {
                bounds.x = (getWidth() - background.getWidth()) / 2;
                bounds.y = (getHeight() - background.getHeight()) / 2;
                bounds.width = background.getWidth();
                bounds.height = background.getHeight();
            }

            return bounds;            
        }

        @Override
        public Dimension getPreferredSize() {
            return background == null ? super.getPreferredSize() : getImageBounds().getSize();
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (background != null) {
                Graphics2D g2d = (Graphics2D) g.create();
                Rectangle bounds = getImageBounds();
                g2d.drawImage(background, bounds.x, bounds.y, this);

                g2d.setColor(Color.GREEN);
                drawPoints(g2d, goodPoints);
                g2d.setColor(Color.RED);
                drawPoints(g2d, badPoints);

                g2d.dispose();
            }
        }

        protected void drawPoints(Graphics2D g2d, List<Point> points) {
            for (Point p : points) {
                g2d.drawLine(p.x - 4, p.y - 4, p.x + 4, p.y + 4);
                g2d.drawLine(p.x + 4, p.y - 4, p.x - 4, p.y + 4);
            }
        }
    }
} 
```

您可能还想看看[A Visual Guide to Layout Managers](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

# wpf - 在事件 Keydown 中获取发件人文本框名称

> ID：16128244
> 
> 赞同：2
> 
> 时间：2013-04-21T05:29:21.133
> 
> 标签：wpf, c#-4.0, textbox, onkeydown

我正在使用 WPF 和 C# 开发应用程序。在一个窗口上，我有许多文本框排列在 5 列和 5 行的网格中，与用户需要的数量一样多。它的工作原理如下：最初，5 个文本框的第一行是可见的，用户输入适当的值，一旦他点击`ENTER`该行的第 5 个文本框，就会为较新的条目生成一个新的类似的文本框行。这种情况不断发生。每个文本框都有一个使用`RegisterName`方法和循环的唯一名称。

现在我的问题是假设我已经在窗口上创建了 5 行大约 25 个文本框。我专注于第三行的文本框之一，并键入一些触发它的相应 KeyDown 事件。在此 keydown 事件中，我需要导致此事件的所有文本框的**名称**。我怎样才能做到这一点？

完成后，这也将帮助我访问该行的所有其他文本框，因为我知道它们使用的命名法。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:47:34.423

您可以尝试以下方法：

请注意，我们还将`Name`属性与[FrameworkContentElement.RegisterName](http://msdn.microsoft.com/en-gb/library/system.windows.frameworkcontentelement.registername.aspx)函数一起设置。

```
var box = new TextBox();
var itemName = "Unique Identifier";  // Change this to your unique name per box
this.RegisterName(itemName, box);
box.Name = itemName;
box.KeyDown += (sender, args) => {
  var textBox = sender as TextBox;
  if (textBox != null)
    MessageBox.Show(textBox.Name);  // Would show "Unique Identifier"
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T05:43:10.217

嗨，请将此事件用于文本框

```
TextBox_PreviewKeyDown(object sender, KeyEventArgs e) 
```

并获取文本框的 id，使用 sender 参数与标签组合。

```
 i.e.     TextBox textbox = (TextBox)sender; 
```

# image - Spring 3 - 图像未出现在 JSP 中

> ID：16128245
> 
> 赞同：0
> 
> 时间：2013-04-21T05:29:34.183
> 
> 标签：image, spring

这可能是我做错的一些简单的小事情，但无论如何我都会问。我的 JSP 中没有显示几个图像。我的图像存储在 WEB-INF/pages/images。这是我在 JSP 中如何引用它们的示例。

```
<img src="images/guestbook.jpg" alt="Guest Book" /> 
```

我的控制台中也出现此错误。

```
WARNING: No mapping found for HTTP request with URI [/ghs1986/images/guestbook.jpg] in DispatcherServlet with name 'ghs1986' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T05:34:50.963

在您的 spring-config.xml 中，添加：

```
<mvc:resources location="/images/" mapping="/images/**" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T08:05:31.377

检查您的图像文件夹路径并在指向您的图像时尝试使用应用程序上下文。尝试使用 ${pageContext.request.contextPath}。

例如

```
<img src="${pageContext.request.contextPath}/images/guestbook.jpg" alt="Guest Book" /> 
```

根据您的路径/需要更改此设置。

# java - 如何使用 java 将 unicode 字符串保存到数据存储区 google appengine

> ID：16128247
> 
> 赞同：2
> 
> 时间：2013-04-21T05:29:53.090
> 
> 标签：java, google-app-engine, unicode, google-cloud-datastore

我正在使用 Java 使用 Google App Engine，我从表单字段接收数据并保存到数据存储中。我收到`HttpServletRequest`这样的 Unicode 字符串：

```
URLDecoder.decode(request.getParameter("text"),"UTF-8") 
```

它正确返回 Unicode 字符串，然后我将此字符串保存到数据存储中

```
DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
Entity entity = new Entity("TextEntity");
entity.setProperty("text", URLDecoder.decode(
                req.getParameter("name"), "UTF-8"));
entity.setProperty("createdOn", new Date());
datastore.put(entity); 
```

我看到如下图： ![在此处输入图像描述](https://i.stack.imgur.com/pBQ0i.png) ![在此处输入图像描述](https://i.stack.imgur.com/Jtngn.png)

如您所见，文本字段包含不可读的字符。我怎么解决这个问题？请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:50:49.887

这是开发服务器的数据存储查看器的问题。我刚刚遇到了同样的问题，但是在生产服务器上，这些值是可以的。

# ajax - simple_form 的问题：has_many 和 belongs_to 没有创建 ID 列？

> ID：16128248
> 
> 赞同：0
> 
> 时间：2013-04-21T05:29:59.230
> 
> 标签：ajax, ruby-on-rails-3, simple-form

我有三个模型，，`Neo`（`User`由设计自动生成）和`Observation`。

每个`User` `has_many` `Neo`s 和`Observation`s。每个`Neo` `has_many`观察和`belongs_to`一个`User`. 一一`Observation` `belongs_to`一一。`Neo`_`User`

我需要为 Neo 创建一个 simple_form，它应该允许我动态添加 Observations（a la Polldaddy 投票选项）。这是我的表单代码：

```
- title "Add a NEO"

= simple_form_for @neo do |nf|
    = nf.input :name
        = nf.simple_fields_for :observations do |of|
            = of.input :ra
            = of.input :dec

    = nf.button :wrapped 
```

这会返回一个`ActiveRecord::UnkownAttributeError`说法“未知属性`neo_id`”。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T06:23:29.017

我的缩进是错误的：

```
- title "Add a NEO"

= simple_form_for @neo do |nf|
    = nf.input :name
        = nf.simple_fields_for :observations do |of|
            = of.input :ra
            = of.input :dec

    = nf.button :wrapped 
```

本来应该：

```
- title "Add a NEO"

= simple_form_for @neo do |nf|
    = nf.input :name
    = nf.simple_fields_for :observations do |of|
        = of.input :ra
        = of.input :dec

    = nf.button :wrapped 
```

# angularjs - Angular：从视图调用函数

> ID：16128250
> 
> 赞同：6
> 
> 时间：2013-04-21T05:30:07.950
> 
> 标签：angularjs

嗨，我有下一个问题：

在我看来，我调用了一个函数 prepareDynamicData(itemMenu);

```
<div ng-repeat="itemMenu in menuDetailsData.categories" class="headDetails fontH2">
            <div style="display: none">{{prepareDynamicData(itemMenu)}}</div>
            <a href="#" ng-show="dynamicData.expand">{{itemMenu.name}}</a>
            <div ng-repeat="cat in dynamicData.data">
                <p>{{cat.name}}</p>
                <div class="articles">
                    <div ng-repeat="art in cat.items" class="article">
                        <div class="price">
                            <div></div>
                            <span><i>₪&lt;/i>{{art.price}}</span>
                        </div>
                        <div class="artDescr">
                            <span class="fontTitle">{{art.title}}</span>
                            <p class="fontDetails">{{art.description}}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div> 
```

我知道顶部循环仅重复 2 次（已验证），但函数 prepareDynamicData(itemMenu) 调用了 4 次，不知道为什么！？这是我的控制器：

```
function MenuItemCtrl($scope, $routeParams, $http, $location, sharedData) {
if (sharedData.getMenuDetails() == null) {
    $location.path('/menu');
    return;
}
else {
    $scope.menu = sharedData.getMenu();
    $scope.menuDetailsData = sharedData.getMenuDetailsData($routeParams.itemId);
}

$scope.dynamicData = {
    data : new Array(),
    expand : false
};

$scope.prepareDynamicData = function (itemMenu) {
    if (itemMenu.items != null) {
        $scope.dynamicData.data[0] = itemMenu;
        $scope.dynamicData.expand = false;
    }
    else {
        $scope.dynamicData.data = itemMenu.categories;
        $scope.dynamicData.expand = true;
    }
} 
```

}

你能帮我解释一下为什么会这样吗！谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T05:42:25.303

AngularJS 使用脏跟踪来确保视图保持最新。这意味着 AngularJS 将评估视图绑定的值，直到它们稳定为止；因此，每当绑定的关联范围更新时，每个绑定都会至少执行两次此操作。（例如，如果循环内部的特定项目发生更改，它可能会额外运行两次。）这就是为什么必须注意确保视图中绑定的函数没有副作用并快速运行。

一般来说，将数据准备任务移动到控制器加载时运行的代码中，或者移动到从控制器调用的服务中，是一个很好的实践——查看相关代码应该很少有副作用！但是，如果您必须/真的想从视图中调用这样的函数，只需跟踪是否已经为给定项目调用了该函数。

[如果您有兴趣，](https://stackoverflow.com/a/9693933/62082)这里有一些关于 Angular 中脏跟踪的附加读物。

# haskell - 具有函数组合的类型推理列表

> ID：16128251
> 
> 赞同：3
> 
> 时间：2013-04-21T05:30:11.950
> 
> 标签：haskell, ghci, function-composition

我正在尝试使用折叠来取 Haskell 中整数和的平方。但是，我从 GHCi 收到了一个神秘的错误。这是我的单行：

```
((^2) . foldl) (+) 0 [1..100] 
```

我从 GHCi 得到的是：

```
Prelude> ((^2) . foldl) (+) 0 [1..100]

<interactive>:19:3:
    No instance for (Num (b0 -> [b0] -> b0))
      arising from a use of `^'
    Possible fix:
      add an instance declaration for (Num (b0 -> [b0] -> b0))
    In the first argument of `(.)', namely `(^ 2)'
    In the expression: (^ 2) . foldl
    In the expression: ((^ 2) . foldl) (+) 0 [1 .. 100] 
```

我认为问题出在我基于此类型声明最后传入的列表中。

```
Prelude> :t ((^2) . foldl) (+) 0 [1..100]
((^2) . foldl) (+) 0 [1..100]
  :: (Enum b, Num b, Num (b -> [b] -> b)) => b 
```

任何人都可以让我了解为什么这种类型需要一种`Enum`以及任何方式来显式转换列表以便我可以调试这个函数吗？提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T05:39:24.350

是的，这仍然是 GHC 产生的最荒谬和无用的错误消息之一。

首先，忽略消息，考虑`foldl`and的类型`(.)`：

```
foldl :: (a -> b -> a) -> a -> [b] -> a
(.) :: (b -> c) -> (a -> b) -> a -> c 
```

请注意，`(.)`仅使用第一个参数组成。由于柯里化，具有“多个”参数的函数实际上是一个返回另一个函数的参数的函数。所以在表达式`((^2) . foldl)`中的“返回类型”`foldl`是`a -> [b] -> a`，这是它试图与 组合`(^ 2)`。

而且由于错误消息是愚蠢的，它抱怨没有`Num`实例`a -> [b] -> a`来组合它`(^2) :: Num a => a -> a`并建议您添加一个。

你想要的是这样的：`((^2) . foldl (+) 0)`. 也就是说，在`foldl`这里使用 (lazy) 可能是个坏主意。最好使用严格的`foldl'`，或者更好的是，使用内置`sum`函数：`(^2) . sum`

此外，`Enum`类型中提到的约束是无关紧要的，实际上是正确的——`Enum`类型类提供了用于解释范围表示法的函数。所以`(Enum b, Num b) => ...`意味着这`b`是一个可以枚举的数字类型，这正是你需要的表达式`[1 .. 100]`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-21T05:37:35.877

正确的写法是`(^2) . foldl (+) 0 :: Num a => [a] -> a`or `(^2) . foldl (+) 0 $ [1..100] :: (Num a, Enum a) => a`。当您自己这样做时`(^2) . foldl`，您会尝试将*第一个*返回类型的参数平方`foldl`，这是一个函数`a -> [a] -> a`。该错误声明了这一点：它没有`Num`此类函数的实例，因此无法调度适当的 power function `(^)`。

通常，将组合`(.)`视为仅适用于单个输入的功能的东西。类型表明了这一点

```
(.) :: (b -> c) -> (a -> b) -> a -> c 
```

虽然它有更一般的用途，但它们有点难以找到。

`foldl`所以我的解决方案有效，因为我在编写它之前直接应用了参数。这些参数构成`foldl (+) 0 :: Num a => [a] -> a`单个输入参数的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:55:33.517

已经给出了很好的答案，但也许写起来更直接

`(^2) $ foldl (+) 0 [1..100]`

该表达式`foldl (+) 0 [1..100]`自行工作，如果您试图了解 foldl 的工作原理，这会有所帮助，然后将结果传递给`(^2)`. 写成函数

`f list = (^2) $ foldl (+) 0 list`

# django - django - 选择多对多关系匹配的额外数据

> ID：16128255
> 
> 赞同：0
> 
> 时间：2013-04-21T05:30:30.137
> 
> 标签：django, orm, django-models

我有这两个模型

```
class SubGroupEvent(models.Model):
    class Meta:
        unique_together = ('subscription', 'group', 'event')
    subscription = models.ForeignKey(Subscription, null=True, blank=True)
    group = models.ForeignKey(AbstractGroup)
    event = models.ForeignKey(Event) 
```

和

```
class Events
    title = models.CharField(max_length=255) 
```

要获取组 id 中的所有事件，我使用

```
events = events.filter(subgroupevent__group_id=groupID) 
```

但我需要能够获得`subscription`WHERE subgroupevent__group_id=groupID 以及事件数据。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T05:54:31.810

# 过滤相关模型：

尝试跨越关系的标准[查找，](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)如果您遇到问题，请尝试[Q 对象](https://docs.djangoproject.com/en/1.5/topics/db/queries/#complex-lookups-with-q-objects)。但请注意，并非每个 sql 查询都可以使用 ORM 完成，可能存在需要回退到[原始 sql](https://docs.djangoproject.com/en/dev/topics/db/sql/)的情况，但即使这样，您也可以将原始 sql 中的字段映射到模型字段（此功能实际上非常酷） ）。

# 检索相关模型

要使用单个查询检索对象，您可能会发现有用的[select_related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related)和 [prefetch-related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T05:55:21.347

```
subgroupevent_list = SubGroupEvent.objects.filter(group_id=groupID)

for subgroupevent in subgroupevent_list:
    event = subgroupevent.event 
```

# clips - CLIPS 规则以降序打印消息

> ID：16128257
> 
> 赞同：2
> 
> 时间：2013-04-21T05:30:59.450
> 
> 标签：clips

我需要一些关于 CLIPS 问题的帮助。这就是问题：

“假设 CLIPS 数据库包含以下模板的实例化事实：

```
(deftemplate recommendation
     (slot name)
     (slot message)
     (slot rating)
) 
```

编写 CLIPS 规则以根据评级降序打印消息。每条消息都将与其关联的名称和评级一起打印。”

当有一个列表时，我知道排序规则，例如：

```
(deffacts testlist
        (list 1 4 2 3 5 8 7 6 9 0)
    ) 

(defrule sort

         ?f <- (list $?head ?a ?b&:(< ?b ?a) $?tail)
=>
    (retract ?f)

    (assert (list $?head ?b ?a $?tail))
) 
```

但我不确定什么时候是 deftemplate 格式。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:19:07.407

CLIPS`do-for-all-facts`使执行此类操作变得更容易，但不幸的是，默认情况下它在许多系统上不可用，并且需要重新编译 CLIPS 才能使其可用。

如果您为所有需要打印的项目断言事实，那么您可以使用`forall`来确定评分最高的项目：

```
(defrule assert-unprinted "Asserts each item that needs to be printed."
  (print-sorted)
  (recommendation (name ?n))
  =>
  (assert (unprinted ?n)))

(defrule retract-print-sorted "Retract print-sorted after all items enumerated."
  (declare (salience -10))
  ?f <- (print-sorted)
  =>
  (retract ?f))

(defrule print-greatest "Prints the unprinted item with the greatest rating."
  (not (print-sorted))
  ?u <- (unprinted ?name)
  (recommendation (name ?name) (rating ?rating))
  (forall (and (unprinted ?n) (recommendation (name ?n) (rating ?r)))
          (test (<= ?r ?rating)))
  =>
  (retract ?u)
  (printout t ?name " has rating " ?rating "." crlf)) 
```

以下是一些示例事实：

```
(deffacts recommendations
  (recommendation (name chocolate) (rating 10.0))
  (recommendation (name vanilla) (rating 6.8))
  (recommendation (name strawberry) (rating 8.5))) 
```

它们按降序打印，如下所示：

```
CLIPS> (reset)
CLIPS> (assert (print-sorted))
<Fact-4>
CLIPS> (run)
chocolate has rating 10.0.
strawberry has rating 8.5.
vanilla has rating 6.8.
CLIPS> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-20T00:38:45.970

```
CLIPS> 
(deftemplate recommendation
   (slot name)
   (slot message)
   (slot rating))
CLIPS>      
(deffacts recommendations
   (recommendation (name chocolate) (rating 10.0))
   (recommendation (name vanilla) (rating 6.8))
   (recommendation (name strawberry) (rating 8.5)))
CLIPS> 
(deffunction rating-sort (?f1 ?f2)
   (< (fact-slot-value ?f1 rating) (fact-slot-value ?f2 rating)))
CLIPS>    
(defrule print
   =>
   (bind ?facts (find-all-facts ((?f recommendation)) TRUE))
   (bind ?facts (sort rating-sort ?facts))
   (progn$ (?f ?facts)
      (printout t (fact-slot-value ?f name) " has rating " (fact-slot-value ?f rating) "." crlf)))
CLIPS> (reset)
CLIPS> (run)
chocolate has rating 10.0.
strawberry has rating 8.5.
vanilla has rating 6.8.
CLIPS> 
```

# loops - 循环遍历所有子文件夹并执行bat文件？

> ID：16128258
> 
> 赞同：2
> 
> 时间：2013-04-21T05:31:33.297
> 
> 标签：loops, batch-file, call, directory

我试图在父目录中有一个 bat 文件，该文件循环遍历子文件夹并运行一个名为 .bat 的 bat 文件`callshow.bat`。

这是我到目前为止所得到的。我不太擅长这些，所以任何帮助都会很棒！

```
for /r %%f in (*) do Call callshow.bat 
```

这是文件夹结构：

```
Example:
Parent:(Where new Bat file will be)
Sub Folder 1\folder1\callshow.bat
Sub Folder 2\folder2\callshow.bat
Sub Folder 3\folder3\callshow.bat
Sub Folder 4\folder4\callshow.bat
Sub Folder 5\folder5\callshow.bat
etc....... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T05:37:42.933

```
@echo off
for /r /d %%f in (*) do pushd "%%f" & Call "callshow.bat" & popd 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T07:29:32.733

文件夹结构使它更清晰，试试这个：

```
for /d /r %%i in (*) do if exist "%%i\callshow.bat" call "%%i\callshow.bat" 
```

**编辑：**这可能有效：

```
for /r %%f in (callshow.b?t) do call "%%f" 
```

为了从通配符中获得一致的结果，`for /r`需要使用，因此`b?t`，即使它会匹配`callshow.bit`等`callshow.bbt`。

**编辑2：**`callshow.bat`如果不引用它所在文件夹中的任何文件，或者用于`%~dp0`引用它们，则可以使用此方法（编辑后的方法：） 。使用此方法尤其是如果`callshow.bat`需要使用位于`call`ing 批处理文件所在文件夹中的文件。否则，可以使用 foxidrive 的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-04T19:51:16.790

C:\test\batfiletorun.bat C:\test\folder1\ C:\test\folder2\

在文件夹 1 和文件夹 2 中运行 batfiletorun.bat：

从命令提示符：

for /r /d %f in (*) do pushd "%f" & Call C:\test\batfiletorun.bat & popd

或者，使用 .bat 文件运行 batfiletorun.bat 将只有 %% 而不是 % 并且看起来像下面的 runbatfileinsubdirectories.bat 包含以下行：

for /r /d %%f in (*) do pushd "%%f" & Call C:\test\batfiletorun.bat & popd

现在您的输入如下所示： C:\test\batfiletorun.bat C:\test\runbatfileinsubdirectories.bat C:\test\folder1\ C:\test\folder2\

希望这可以为外面的人简化事情。我用它在子目录中运行重命名 bat 文件。

# php - 如何浏览媒体播放器主题上的下一条和上一条消息按钮？

> ID：16128260
> 
> 赞同：0
> 
> 时间：2013-04-21T05:31:36.870
> 
> 标签：php, javascript, jquery, jquery-ui, navigation

编辑：由于版权，问题的主体已被隐藏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:56:33.160

好的，评论中的讨论提供了问题中应该存在的其他信息。有了这些额外的信息，答案是可能的：

您必须确保消息存在于html标记中，否则您无法通过js直接显示它们。请记住，php 在请求后仅执行一次。如果您只将第一条消息嵌入到 html 标记中，那么其余的就会*丢失*。因此，要么您必须稍后获取它们，要么您必须将*所有*消息嵌入到 html 标记中。嵌入所有消息更容易，但您无法访问页面加载后编写的较新消息。

像这样更改 html 脚本的底部以嵌入*所有*消息，而不仅仅是第一个：

```
<div class="flash_text">
    <input type="hidden" id="mg_msg_key" value="0">
    <?php 
        foreach ($player_msg as $key=>$val)
            sprintf('<marquee scrollamount="1" id="mq_msg_%s" class="%s">&diams;%s</marquee>'."\n", 
                    $key, (0==$key)?'':'mg_msg_hidden', htmlspecialchars($val) );
    ?>
</div> 
```

请注意，还有一个额外的隐藏输入字段保存当前可见消息的键。此外，除了第一个消息之外的所有消息都有一个额外的 css 类`mg_msg_hidden`。您现在可以在 css 级别使用该类来隐藏除第一个消息之外的所有消息，方法是添加到您的 css 规则集：

```
.mg_msg_hidden{
    display: none;
} 
```

这样做只有第一条消息是可见的，其余的都存在（检查 html 标记！）但不可见。这是您现在可以使用 js 控制单个消息的可见性的起点。将您的 js 更改为以下内容：

```
<script language="javascript">
    function showMessage(key){
        $('html div.flash_text marquee').addClass('mg_msg_hidden');
        $('html div.flash_text marquee#mq_msg_'+key).removeClass('mg_msg_hidden');
    }
    function nextMessage(){
        var key='html div.flash_text input#mg_msg_key';
        $(key).val($(key).val()+1);
        showMessage($(key).val());
    }
    function previousMessage(){
        var key='html div.flash_text input#mg_msg_key';
        $(key).val($(key).val()-1);
        showMessage($(key).val());
    }
</script> 
```

这显然只是你的一个起点。我没有测试过这些行，而是从头开始编写的。它们可能包含语法错误等。您必须根据需要调整和扩展该方法。

我还使用[JQuery](http://jquery.com)表示法以更方便的方式访问元素。您应该考虑在您的项目中使用这样的 js 库：当您的脚本变得更复杂时，它可以为您节省很多麻烦。

# asp.net-mvc-4 - 带有 Hottowel SPA 的 Durandal js 1.2.0 不会在 iPhone 上滚动

> ID：16128265
> 
> 赞同：1
> 
> 时间：2013-04-21T05:32:15.973
> 
> 标签：asp.net-mvc-4, visual-studio-2012, durandal, hottowel

我已经在详细信息页面中启动了一个新的 MVC4 HotTowel SPA 测试项目，其中包含一个列表（ul 元素）。这在使用 iPhone 观看时工作正常 - 它滚动正常。然后我使用 nuget 更新了模板中的 3 个 durandal 包（从 1.1.1 到 1.2.0）。之后，详细信息页面将不会在 iphone 上滚动。

这是 durandal 更新代码中的错误还是设计使然（在这种情况下我应该如何实现滚动）？

此外，刚刚检查了 Durandal 入门套件项目 - 这也不会在 iPhone 上滚动

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-18T11:09:37.977

打开 durandal/app.js 并注释掉以下内容：

```
adaptToDevice: function() {
    //document.ontouchmove = function (event) {
    //    event.preventDefault();
    //};
} 
```

希望这会有所帮助 - 这个是个混蛋。

# redirect - 使用 CNAME A NS AAAA TXT MX 记录将子域重定向到域

> ID：16128268
> 
> 赞同：1
> 
> 时间：2013-04-21T05:32:34.090
> 
> 标签：redirect, dns

我想知道是否有任何方法可以将子域重定向到域，其工作方式类似于停车站点。

假设我有 www.example.com 并且有一个 URL www.example.com/article.html。现在我想设置 blog.example.com 仅使用 CNAME、A、NS、AAAA、TXT 或 MX 记录，以便如果有人点击 blog.example.com/article.html 以重定向到 www.example.com/article。 html。

我不想为每个 URL 输入一条记录，我希望这适用于 example.com 下的所有 html。另外，我无权在 hsoting 服务器上使用 .htaccess，我只能访问 DNS 设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T05:36:19.370

使用通配符 CNAME 记录：

```
*.example.com. IN CNAME www.example.com. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T05:37:22.757

单独使用 DNS，您将无法指定要重定向的目录或文件。记录仅适用于没有特定目录或文件名（主机名之后的部分）的域。

如果您想使用指定的目录或文件名将子域重定向到另一个子域（即不是域级重定向，例如 blog.x.tld 到 www.x.tld 而是 blog.x.tld/file.html 到 www.x .tld/file.html 例如），最好的解决方案是在服务器级别使用重写。使用 Apache Web 服务器，mod_rewrite 允许您以您期望的粒度将特定 URL 重定向到另一个 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-29T20:45:27.103

使用简单的 DNS 记录配置域重定向和 URL 转发

[http://redirect.name/](http://redirect.name/)

# php - Kendo UI 填充网格

> ID：16128270
> 
> 赞同：0
> 
> 时间：2013-04-21T05:33:21.360
> 
> 标签：php, jquery, html, kendo-ui, kendo-grid

我试图通过引入我自己的数据来模仿这个例子（ [http ://demos.kendoui.c​​om/web/grid/column-menu.html），但是当我运行页面时，它在每一列中显示“未定义”。](http://demos.kendoui.com/web/grid/column-menu.html)

当我在浏览器中键入数据源链接时，它会为我提供表中的所有数据。不知道我在这里做错了什么。

代码：

```
<html>
<head>
<link rel="stylesheet" href="http://cdn.kendostatic.com/2012.2.710/styles/kendo.common.min.css" />
<link rel="stylesheet" href="http://cdn.kendostatic.com/2012.2.710/styles/kendo.blueopal.min.css" />
<script type="text/javascript" src="http://cdn.kendostatic.com/2012.2.710/js/jquery.min.js"></script>
<script type="text/javascript" src="http://cdn.kendostatic.com/2012.2.710/js/kendo.all.min.js"></script>
</head>

<div id="example" class="k-content">
            <div id="grid"></div>

            <script>
                $(document).ready(function() {
                    $("#grid").kendoGrid({
                        dataSource: {
                            type: "data",
                            transport: {
                                read: "http://localhost:8888/stationslist.php"
                            },
                            schema: {
                                model: {
                                    fields: {
                                        Region: { type: "string" },
                                        City: { type: "string" },
                                        State: { type: "string" },
                                        Country: { type: "string" }                                        
                                    }
                                }
                            },
                            pageSize: 30,
                            serverPaging: true,
                            serverFiltering: true,
                            serverSorting: true
                        },
                        height: 430,
                        sortable: true,
                        filterable: true,
                        columnMenu: true,
                        pageable: true,
                        columns: [ {
                                field: "Region",
                                title: "Region",
                                width: 100
                            }, {
                                field: "City",
                                title: "City",
                                width: 130
                            }, {
                                field: "State",
                                title: "State",
                                width: 200
                            },  {
                                field: "Country",
                                filterable: false
                            }
                        ]
                    });
                });
            </script>
        </div>

</body>
</html> 
```

PHP：

-

```
$link = mysql_pconnect("127.0.0.1", "root", "admin") or die("Unable To Connect To Database Server");

mysql_select_db("MainDatabase") or die("Unable To Connect To Database");

$arr = array();

$rs = mysql_query("SELECT City, State, Region, Country FROM MainDatabase.Stations");

while($obj = mysql_fetch_object($rs)) {

    $arr[] = $obj;

}

// add the header line to specify that the content type is JSON
header("Content-type: application/json");

echo "{\"data\":" .json_encode($arr). "}";

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T05:56:06.907

尝试这个 ：

```
$(document).ready(function() {
                    $("#grid").kendoGrid({
                        dataSource: {
                            //type: "data",
                            transport: {
                                read: "http://localhost:8888/stationslist.php",
                                dataType: "json"
                            },
                            schema: {
                                 data: "data"
                            },
                            //pageSize: 30,
                            //serverPaging: true,

                            ... 
```

# android - 尽管值在 getPreviewFpsRange 的范围内，但 setPreviewFpsRange 不起作用

> ID：16128271
> 
> 赞同：4
> 
> 时间：2013-04-21T05:33:57.307
> 
> 标签：android, android-camera, frame-rate, nexus-4

这个简单的代码：

```
Camera.Parameters params = currentCamera.getParameters();
params.setPreviewFpsRange( 10000, 15000 );
currentCamera.setParameters( params ); 
```

不适用于我的 Nexus 4（或我的摩托罗拉 Atrix），尽管允许的值在 5000 到 120000 的允许范围内。

当我尝试分别使用不同于 5000 和 120000 的任何最小值或最大值时，我得到：

```
setPreviewFpsRange(const android::QCameraParameters&): error: FPS range 
value not supported 
```

这很愚蠢。此外，我在旧的 Motorola Atrix 上尝试了此代码（显示有效的 fps 范围在 10000 到 30000 之间），但它也不起作用。有什么可以做的吗？

从我对该主题的搜索中，我发现 a) 任何地方都没有关于该主题的材料，并且 b) 某些平台可能根本不支持此功能。有点奇怪，谷歌目前的旗舰手机 Nexus 4 不支持它，不过……

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-22T02:02:53.737

啊啊！因此，作为我寻找答案的一部分，我用我的应用检查了我的 Nexus 10 的操作。事实证明，getSupportedFpsRange 函数返回的值是表示可以输入到 setPreviewFpsRange 的精确双精度的范围，并且不支持任何其他双精度（据我所知，无论如何。）

我发现这一点是因为 Nexus 10 从 getSupportedFpsRange 返回了多个副本。我在这里复制了三个设备的 getSupportedFpsRange 返回值。

### 支持的范围值示例

LG Nexus 4：

> 预览-fps-range-values=(5000,120000);

摩托罗拉 Atrix：

> 预览-fps-范围值=(10000,30000);

三星 Nexus 10：

> 预览-fps-范围值=(15000,15000),(24000,24000),(25000,25000),(15000,30000),(30000,30000);

### 结论

我们做不到

```
params.setPreviewFpsRange( 29000, 29000 ); 
```

强制预览为 29fps，除非设备已经特别支持该双精度。

当然，我研究这个功能的最初原因是希望在我自己的应用程序中复制 Nexus 4 丝般流畅的相机预览。这似乎最终证明，至少在 Nexus 4 上，setPreviewFpsRange 无济于事。

是时候继续搜索了。（：

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-07-09T11:19:14.177

我发现如果 getSupportedPreviewFpsRange 列表只有一对支持的值，例如 (2000, 35000)，即 2fp 到 35fps，那么它将接受该范围之间的任何值。

如果列表包含更多对，那么您需要使用其中之一

```
List<int[]> fpsRange = param.getSupportedPreviewFpsRange();

if (fpsRange.size() == 1) {
    //fpsRange.get(0)[0] < CAMERA_PREVIEW_FPS < fpsRange.get(0)[1]
    param.setPreviewFpsRange(CAMERA_PREVIEW_FPS, CAMERA_PREVIEW_FPS);
} else {
    //pick first from list to limit framerate or last to maximize framerate
    param.setPreviewFpsRange(fpsRange.get(0)[0], fpsRange.get(0)[1]);
} 
```

# java - BorderLayout.NORTH 行为异常

> ID：16128272
> 
> 赞同：3
> 
> 时间：2013-04-21T05:34:06.277
> 
> 标签：java, swing, layout, components, border-layout

我有一个带有 JMenuBar 的 JFrame 后代窗口 a 和两个存储在 JPanel 中的组件。一个是 JTabbedPane，它占据了屏幕的大部分，另一个是小的 JPanel，它又包含一系列按钮。它们是这样构造的：

```
//in constructor:
menubar = new BFIDEMenuBar(this);

setJMenuBar(menubar);

content = new JPanel();
add(content);

buttons = new BFIDEButtonBar();

editors = new JTabbedPane();

content.add(buttons, BorderLayout.NORTH);
content.add(editors, BorderLayout.CENTER); 
```

当窗口小于一定大小时，组件按预期排列：JTabbedPane 占据中心，“按钮”JPanel 居中： ![看起来不错。](https://i.stack.imgur.com/LS7Nd.png)

但是，如果重新调整窗口大小超过某个阈值，则 JPanel 会更改位置：

![不好看。](https://i.stack.imgur.com/Fifns.png)

缩小窗口会导致它跳回到之前的（正确的）位置。

我已经阅读了[BorderLayout 的 javadoc](http://docs.oracle.com/javase/6/docs/api/java/awt/BorderLayout.html)并且我之前使用过它，但是我还没有遇到过这种现象。javadoc 说“NORTH 和 SOUTH 组件可以水平拉伸；” 但我不；这算作拉伸。

除了添加一些侦听器和强制性的 , 等之外，不会从构造函数中调用其他`setVisible`方法`setEnabled`。

关于为什么会发生这种情况或如何纠正它的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T05:52:13.823

`JPanel`默认情况下使用`FlowLayout`.

尝试使用

```
content = new JPanel(new BorderLayout()); 
```

反而

# perl - 面向学生的 perl oops 计划、他们的分数和百分比

> ID：16128274
> 
> 赞同：2
> 
> 时间：2013-04-21T05:34:47.610
> 
> 标签：perl, oop, class

我是perl的新手。我有一个程序要做。

1.我想创建一个简单的班级，其中包含学生姓名、卷号和6个科目分数的信息。
2.我还想创建一个子程序来计算分数的百分比。
3.还想通过创建子类来演示用户继承，该子类将具有滚动编号、父类的名称以及添加新字段地址和电话号码。
4.为百分比子例程创建一个方法覆盖。

我浏览了许多 perl 文档，但仍然无法通过这个，我也无法解决 2、3 和 4。

我到现在为止的代码粘贴在下面，但这似乎也不起作用。谁能让我知道我该如何做这个程序，以便我可以学习这一切？

我的代码：

```
class.pm  

package class;

#constructor
sub new 
{
#my ($class) = @_;
my ($class, %arg) = @_;
my $self = 
{
    _name => $arg{_name}    ,
    _roll_no => $arg{_roll_no}    ,
    _sub1 => $arg{_sub1}    ,
    _sub2 => $arg{_sub2}    ,
    _sub3 => $arg{_sub3}    ,
    _sub4 => $arg{_sub4}    ,
    _sub5 => $arg{_sub5}    ,
    _sub6 => $arg{_sub6}    
};
, $class;
}  

sub name        { $_[0] -> {_name}     }
sub roll_no     { $_[0] -> {_roll_no} }
sub sub1    { $_[0] -> {_sub1}}
sub sub2    { $_[0] -> {_sub2}}
sub sub3    { $_[0] -> {_sub3}}
sub sub4    { $_[0] -> {_sub4}}
sub sub5    { $_[0] -> {_sub5}}
sub sub6    { $_[0] -> {_sub6}}

1; 
```

我还创建了 class1.pm

```
class1.pm

use class;

print "Object 1:\n\n";

my $obj1 = class->new(
name => "sam"    ,
roll_no => "1"    ,
sub1 => "99"    ,
sub2 => "98"    ,
sub3 => "97"    ,
sub4 => "96"    ,
sub5 => "95"    ,
sub6 => "96" 
);

print $obj1->name, "\n";
print $obj1->roll_no, "\n";
print $obj1->sub1, "\n";
print $obj1->sub2, "\n";
print $obj1->sub3, "\n";
print $obj1->sub4, "\n";
print $obj1->sub5, "\n";
print $obj1->sub6, "\n"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T08:19:01.697

这是使您的测试代码工作的固定类：

```
package class;

sub new {
    my ($class, %arg) = @_;

    my $self = {
        _name    => $arg{name},
        _roll_no => $arg{roll_no},
        _sub1    => $arg{sub1},
        _sub2    => $arg{sub2},
        _sub3    => $arg{sub3},
        _sub4    => $arg{sub4},
        _sub5    => $arg{sub5},
        _sub6    => $arg{sub6}
    };
    return bless $self, $class;
}

sub name    { $_[0]->{_name} }
sub roll_no { $_[0]->{_roll_no} }
sub sub1    { $_[0]->{_sub1} }
sub sub2    { $_[0]->{_sub2} }
sub sub3    { $_[0]->{_sub3} }
sub sub4    { $_[0]->{_sub4} }
sub sub5    { $_[0]->{_sub5} }
sub sub6    { $_[0]->{_sub6} } 
```

有两件事需要解决：

*   您没有[祝福](http://perldoc.perl.org/functions/bless.html)实例-这确实使引用属于该类
*   from 的参数`%args`有额外的下划线 - 在你的例子中，你正在传递`name => "sam"`，而不是`_name => "sam"`

几个注意事项：

*   perl 中的小写包名通常由 pragma 使用。更好的做法是使用 CamelCase 进行类命名
*   有大量的模块可以帮助您进行类定义，如上面的[Class::Accessor](http://search.cpan.org/perldoc?Class%3A%3AAccessor)到更复杂的 OO 构建器，如[Moose](http://search.cpan.org/perldoc?Moose)。使用后者，您的类定义将如下所示：

    ```
    package class;
    use Moose;

    has name    => (is => 'ro');
    has roll_no => (is => 'ro');
    has sub1    => (is => 'ro');
    has sub2    => (is => 'ro');
    has sub3    => (is => 'ro');
    has sub4    => (is => 'ro');
    has sub5    => (is => 'ro');
    has sub6    => (is => 'ro'); 
    ```

`has`为你声明一个属性，你就可以免费获得构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T06:14:17.060

您只是忘记使用[bless](http://perldoc.perl.org/functions/bless.html)来`$self`祝福`new`. 可以在[此处](http://www.cs.cf.ac.uk/Dave/PERL/node125.html#SECTION001562000000000000000)找到正确 ctor 定义的简单示例。

# marklogic - transform-to-json -- 自定义配置删除元素？没有数组？

> ID：16128276
> 
> 赞同：2
> 
> 时间：2013-04-21T05:34:55.983
> 
> 标签：marklogic

我有以下xml

```
<foods
  xmlns="http://example.com/agt"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>
  <food id="1" name="celery">
    <price>50.2</price>
  </food>
  <food id="2" name="beets">
    <price>23.3</price>
  </food>
  <food id="3" name="goat cheese">
    <price>0.5</price>
  </food>
</foods> 
```

使用以下 xsd：

```
<xs:schema
  targetNamespace="http://example.com/agt"
  attributeFormDefault="unqualified"
  elementFormDefault="unqualified"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
>
  <xs:element name="price" type="xs:decimal"/>
  <xs:element name="food">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="price"/>
      </xs:sequence>
      <xs:attribute name="id" type="xs:integer"/>
      <xs:attribute name="name" type="xs:string"/>
    </xs:complexType>
  </xs:element>
  <xs:element name="foods">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="food" maxOccurs="unbounded" minOccurs="0"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

当我在控制台中执行以下查询时：

```
xquery version "1.0-ml";
import module namespace json = "http://marklogic.com/xdmp/json" at "/MarkLogic/json/json.xqy";
declare namespace agt = "http://example.com/agt";
let   $c := json:config("custom")
      , $_ := map:put($c,"array-element-names", "food")
return
  json:transform-to-json( doc("foods.xml") , $c ) 
```

...我得到：

```
{"foods":{"food":{"id":3, "name":"goat cheese", "price":0.5}}} 
```

有什么不适合我。食物元素怎么了？没有数组，只有最后一个进入输出。请注意，取出数组元素名称并*不能解决*缺少的食物元素。

这是一个错误还是我做错了？我刚开始使用 MarkLogic Server，所以我很可能做错了。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T11:52:51.700

您需要指出 food 是一个数组元素。由于您现在已将食物放在名称空间中，因此您的数组元素名称没有找到它。您要么需要使用 xs:QName() 来给出“食物”的全名，要么使用声明配置的默认命名空间

例如，这应该工作

```
 , $_ := map:put($c,"array-element-names", xs:QName("agt:food") ) 
```

或者

```
 , $_ := map:put($c,"element-namespace","http://example.com/agt") 
```

它具有使转换可逆的良好副作用。

# android - Android webview链接使用精灵图像未对齐

> ID：16128278
> 
> 赞同：0
> 
> 时间：2013-04-21T05:35:11.170
> 
> 标签：android, android-layout, android-webview

我有一个非常奇怪的问题，不一致。我的页面中有一个标题，`webview`它是我网站中的常规 html。图像链接到页面。有时链接不起作用，有时它们会起作用。如果我将手指移到图像下方，有时您会看到矩形突出显示颜色框出现，但与实际图像相去甚远。它只是在一个随机的位置，但总是在图像下方的某个地方。所以链接href和图像不同步。如果我重新加载页面，它将再次处于正确的位置并且图像/按钮可以工作。它并不总是发生。在桌面和移动浏览器中运行良好。只是很奇怪`webview`。无论如何，有一个建议或经验，为什么它如此随机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:44:01.443

像这样使用它

```
String s="<head><meta name=viewport content=target-densitydpi=medium-dpi, width=device-width/></head>";  

webview.loadDataWithBaseURL(null,s+htmlContent,"text/html" , "utf-8",null); 
```

更多参考

[http://developer.android.com/guide/webapps/targeting.html](http://developer.android.com/guide/webapps/targeting.html)

在三星 s3 之类的手机中，有时这不起作用。为此，为 xhdpi 手机创建单独的布局，并将 webview 的高度更改为 40dp 或根据您避免空白的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T05:34:39.780

问题不仅仅在于 webview，它通常是移动的，特别是我相信 webview 使用的 Android 浏览器。我的标题是`position:fixed`，经过大量研究后，我发现它`position:fixed`在移动设备上出现故障并导致奇怪的事情发生。`clickable location`即使图像从未移动，这也会导致滚动时链接的位置不正确。因此，当您单击图像/链接时，它不起作用，因为链接的位置位于页面上的其他位置，通常位于图像下方的某个位置。

正如描述我的问题的博客解决方案所述。 [http://suratpyari.wordpress.com/2011/09/30/fixed-position-problem-with-android-webkit/](http://suratpyari.wordpress.com/2011/09/30/fixed-position-problem-with-android-webkit/)

但是，我使用的解决方案根本不使用`position:fixed`，因为我不想要 css hack，而是使用下面 SO 链接中使用的解决方案`position:absolute`来使内部`div`可滚动。它实际上工作得很好，现在滚动更加流畅和流畅。

[CSS 100% 高度，然后滚动 DIV 不页面](https://stackoverflow.com/questions/2731496/css-100-height-and-then-scroll-div-not-page)

所以其他任何可能有这个问题的人，它可能是你的固定标题。对于否决我的问题的人来说，这是“真正的”问题。：/

# c++ - 如何测试 std::thread 是否被移出？

> ID：16128279
> 
> 赞同：1
> 
> 时间：2013-04-21T05:35:24.770
> 
> 标签：c++, multithreading, c++11, move-semantics

我有一个带有 std::thread 成员的可移动不可复制类。

当类析构函数运行时，我需要做一些清理工作并加入线程。如果该类被移出，我需要析构函数来跳过清理和线程连接。我可以通过存储一个 bool 来实现这一点，但这似乎有点浪费。

如果 std::thread 成员被移出，那么我知道这个类实例被移出。是否可以检查 std::thread 成员是否已移出？

```
class Widget
{
    Widget()
    {
        // initialize
    }

    Widget( Widget&& rhs )
    {
        t = std::move(rhs.t);
    }

    ~Widget()
    {
        if ( t_is_not_moved_from() )
        {
            // do cleanup
            t.join();
        }
    }

    inline friend void swap( Widget& lhs, Widget& rhs )
    {
        lhs.t.swap( rhs.t );
    }

private:
    std::thread t;

    // noncopyable
    Widget( const Widget& );
    const Widget& operator=( const Widget& );
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T06:01:45.800

与大多数标准库对象不同，`std::thread`的移动构造函数确实明确规定了从移动的状态`thread`。它相当于一个空线程：`thread.joinable`will be `false`.

# maven - Maven apache-maven-3.0.5 中的 Selenium2 构建错误

> ID：16128284
> 
> 赞同：0
> 
> 时间：2013-04-21T05:36:05.523
> 
> 标签：maven, selenium-webdriver

运行命令时，我在 Maven 中遇到了以下错误

```
C:\Users\Man\SelProj>mvn clean install
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building SelProj 1.0
[INFO] ------------------------------------------------------------------------
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.pom
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.735s
[INFO] Finished at: Sun Apr 21 15:25:23 EST 2013
[INFO] Final Memory: 6M/106M
[INFO] ------------------------------------------------------------------------
[ERROR] Plugin org.apache.maven.plugins:maven-clean-plugin:2.4.1 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:m
aven-clean-plugin:jar:2.4.1: Could not transfer artifact org.apache.maven.plugins:maven-clean-plugin:pom:2.4.1 from/to central (http://repo.maven.apache.org/maven2): Connection to
http://repo.maven.apache.org refused: connect: Address is invalid on local machine, or port is not valid on remote machine -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginResolutionException
C:\Users\Man\SelProj> 
```

我的 POM.xml 文件如下，我将 POM 文件放在运行 >mvn clean install cmmand 的文件夹中

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
        <modelVersion>4.0.0</modelVersion>
        <groupId>SelProj</groupId>
        <artifactId>SelProj</artifactId>
        <version>1.0</version>
        <dependencies>
        <!-- Selenium2 dependency -->
            <dependency>
                <groupId>org.seleniumhq.selenium</groupId>
                <artifactId>selenium-java</artifactId>
                <version>2.32.0</version>
            </dependency>
            <dependency>
                <groupId>org.seleniumhq.selenium</groupId>
                <artifactId>selenium-chrome-driver</artifactId>
                <version>2.5.0</version>
            </dependency>
        </dependencies>
</project> 
```

可能是什么原因。我在 Windows 8（64 位）上运行它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:46:14.377

我也有同样的问题。尝试使用`>mvn install`不带`clean`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T03:35:38.473

由于您可以通过网络浏览器访问它，我知道互联网连接没有任何问题。

有两个重要的可能根本原因如下： -

### 1.代理

如果您在代理后面，请将`proxy`配置添加到`settings.xml`例如

```
<settings>
  .
  .
  <proxies>
   <proxy>
      <active>true</active>
      <protocol>http</protocol>
      <host>proxy.somewhere.com</host>
      <port>8080</port>
      <username>proxyuser</username>
      <password>somepassword</password>
      <nonProxyHosts>www.google.com|*.somewhere.com</nonProxyHosts>
    </proxy>
  </proxies>
  .
  .
</settings> 
```

请参阅[Maven - 使用代理指南](http://maven.apache.org/guides/mini/guide-proxies.html)了解更多信息。

### 2\. 防病毒/防火墙问题

`Firewall`有时`Anti-virus` **会阻止** `Java`正常运行，或者`Windows Firewall`（和各种其他防火墙）**主动阻止** `Java.exe`访问 Internet 以“下载东西”，这是 Maven 的关键部分。***您可能需要配置防火墙或防病毒软件以添加例外以允许此类操作***。

有关详细信息，请参阅[Maven - Windows 上](http://maven.apache.org/guides/getting-started/windows-prerequisites.html)的 Maven 。

我希望这可能会有所帮助。

# javascript - 使用 jquery 创建某些 html 内容的新实例

> ID：16128293
> 
> 赞同：0
> 
> 时间：2013-04-21T05:38:23.247
> 
> 标签：javascript, jquery, html

我正在尝试创建一个模式框，从那开始加载某些 html 内容

假设我有一个链接

```
<a href='#'>LINK</a> 
```

现在，我有要使用模式加载的内容，该模式隐藏并在单击 LINK 时加载

```
<div id='modal'>
// more content goes here

</div> 
```

现在我有 jQuery，当点击 LINK 时它会附加更多内容

```
$('#modal').live('click',function(){
// more appending done here
}); 
```

上面的工作正常，只有一个链接在使用，但有多个这样的链接

```
 <a href='#'>LINK</a>
 <a href='#'>LINK</a>
 <a href='#'>LINK</a> 
```

如果我单击它们中的每一个，它们每次都会单独添加相同的内容，现在我知道我可以`.empty()`在每次使用开始时使用，但我想知道如何使用`<script type = "text/template"> // content </script>`或任何其他创建实例的方式来执行此操作

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:19:17.433

```
$("body").on("click","a",function(){
    var modal = $("<div id="modal"></div>");
    modal.html(<content goes here>);
    return false;
}) 
```

因此，每次单击标签时，都会在模态变量中获得一个新对象。

# c# - C#中数据表的更新命令不起作用

> ID：16128294
> 
> 赞同：0
> 
> 时间：2013-04-21T05:38:33.057
> 
> 标签：c#, database

我对数据库和 C# 的世界还比较陌生，并且在根据我通过 C# 程序所做的更改来更新我的数据表时遇到了问题。我正在使用 TableAdapter 向数据库发出命令。

在我的程序中，我有一个表单，允许将新行添加到数据表中。据我所知，这是可行的，因为我的程序的其余部分可以通过查询数据库来访问新信息。

```
 this.patientInfoTableTableAdapter.InsertNewPatient(
                this.FirstName, this.LastName, this.StreetAddress, this.City, this.State, this.Zip,
                this.Email, this.Phone, this.DOB, this.Gender); 
```

我什至可以停止程序的运行并重新启动它，并且仍然可以访问添加的数据。但是，当我直接查看数据表时，添加的行不存在，并且下次运行程序时，表也恢复到程序眼中的未修改状态。

我确实有一个 Update 方法，每次我完成这个过程时都会使用它，但它对保留添加的行或对现有行的任何更改都没有影响：

```
 this.Validate();
    this.patientInfoTableBindingSource.EndEdit();
    this.tableAdapterManager.UpdateAll(this.eMRSDatabaseDataSet);
    MessageBox.Show("Update Successful"); 
```

我总是看到 MessageBox 出现并且我没有收到任何错误。

我得出的结论是我的数据库的某些设置或属性有问题，我可以使用一些帮助来解决我的问题。

如果有帮助，相关代码的数据库查询如下：

```
 INSERT INTO [PatientInfoTable] ([First_Name], [Last_Name], [Street_Address], [City], [State], [Zip], [Email], [Phone], [DOB], [Gender]) VALUES (@fName, @lName, @sAddress, @city, @state, @zip, @email, @phone, @dob, @gender) 
```

和

```
 UPDATE       PatientInfoTable
    SET                Street_Address = @saddress, City = @city, State = @state, Zip = @zip, Email = @email, Phone = @phone, Gender = @gender
    WHERE        (Patient_ID = @p11) 
```

这些查询是使用 Visual Studio 查询生成器生成的。

我将不胜感激任何建议！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-23T12:07:37.433

```
query = "Update mcm_class Set class_status='" + 
dgv.Rows[i].Cells[1].ToString() + "' where class_id ='" + 
dgv.Rows[i].Cells[0].ToString() + "'"+ "AND"+" med_id='" + 
lst_med.SelectedValue.ToString() + "'";
cmd = new SqlCommand(query, con);
con.Open();
cmd.ExecuteNonQuery();
con.Close(); 
```

# linq - linq 中的错误无法从“System.Collections.Generic.IEnumerable”转换 ' 到 'System.Linq.IQueryable

> ID：16128300
> 
> 赞同：0
> 
> 时间：2013-04-21T05:39:20.627
> 
> 标签：linq, entity-framework, c#-4.0, entity-framework-4.1

包含有错误：

> linq 中的错误无法从“System.Collections.Generic.IEnumerable”转换为“System.Linq.IQueryable”

为什么？

```
public class ListQuestionAssessor
{
        public string sum  { get; set; }
        public int QuestionsID { get; set; }
        public int AssessorID { get; set; }
        public int AssessID { get; set; }
}

List<ListQuestionAssessor> objList = new List<ListQuestionAssessor>();

        var lisaAddAssessor = (from p in objList
                               where
                                   !
                                   (from assessor in ObjNotIn
                                    select new
                                    {
                                        assessor.id
                                    }).Contains(new { p.QuestionsID })
                               select new QuestionAssessor()
                               {
                                   QuestionsID = initQuestionerId

                               }).ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:15:11.697

我会说问题是您正在尝试检查

```
.Contains(new { p.QuestionsID }) 
```

Contains 期望与集合具有相同类型的参数。由于该集合是匿名的，因此这可能是导致错误的原因。

将其重写为

```
.Any(a => a.id == p.QuestionsID) 
```

# codeigniter - Zip 和 rar 扩展的文件上传在 Codeigniter 中不起作用

> ID：16128305
> 
> 赞同：0
> 
> 时间：2013-04-21T05:40:34.070
> 
> 标签：codeigniter

我正在使用 codeigniter 为我的博客创建文件上传功能。因为我接受两种格式的 zip|rar。

它给出错误，因为**不允许您尝试上传的文件类型。**. 如果将其更改为其他格式（如 image 或 txt ），它工作正常。

请找到代码片段

```
$config['upload_path'] = './public/';
        $config['allowed_types'] = 'zip';
        $config['max_size'] = '6000';       
        //$config['file_name'] = $authorName.$config['file_ext'];
        $config['overwrite'] = TRUE;

        $this->load->library('upload', $config);

        if ( ! $this->upload->do_upload()){         
            $data['serverMessage'] = "E75";
            $data['uploadError'] = $this->upload->display_errors();
            $data['message'] =$this->upload->display_errors();

        }else{
            $data['message'] ="Thanks you";
        }

        $this->output->set_header("HTTP/1.0 200 OK");
        $this->output->set_header("HTTP/1.1 200 OK");

        $this->output->set_header("Cache-Control: no-store, no-cache, must-revalidate");
        $this->output->set_header("Cache-Control: post-check=0, pre-check=0");
        $this->output->set_header("Pragma: no-cache");

        $this->load->view('guestpost', $data); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-15T05:44:54.880

在 config/mimes.php 的 zip 末尾添加 'application/octet-stream' ...

```
'zip'   =>  array('application/x-zip', 'application/zip', 'application/x-zip-compressed', 'application/s-compressed', 'multipart/x-zip', 'application/octet-stream') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T08:36:15.690

这个[答案](https://stackoverflow.com/questions/20300354/uploading-zip-and-rar-file-not-working-in-codeigniter)可能会对你有所帮助

尝试更改 MIME.php 配置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-22T12:42:54.493

$config['allowed_types'] = '应用程序/zip';

尝试这个..

# qt - 在具有不同相对路径的多个 .pro 项目文件中包含一个 .pri 文件

> ID：16128306
> 
> 赞同：0
> 
> 时间：2013-04-21T05:41:14.150
> 
> 标签：qt, qmake

嗨，我在一个名为 COMMON_SRC 的目录中有一些文件和一个用于这些 src 文件的 .pri 文件：Common.pri 和两个位于公共文件不同相对路径的项目。我只想使用一个 Common.pri 文件。谁能帮我？我可以在每个 .pro 文件中使用一些变量来告诉 Common.pri 文件项目的相对路径吗？像 $$PWD 之类的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T08:29:26.427

`_PRO_FILE_PWD_`是你想要的（[文档](https://qt-project.org/doc/qt-4.8/qmake-variable-reference.html#pro-file-pwd)）。

# php - 通过 localhost 发送邮件

> ID：16128307
> 
> 赞同：0
> 
> 时间：2013-04-21T05:41:17.257
> 
> 标签：php, email, localhost

我花了很多时间，但未能通过 localhost 发送邮件。我阅读了很多博客并按照他们的建议进行了尝试，但我无法解决我的问题。那么我能做些什么来解决这个问题。我也尝试过像 sendmail、phpmailer 等第三方......我的 php.ini 文件配置是：

```
[mail function]
; For Win32 only.
; http://php.net/smtp
SMTP = smtp.gmail.com
; http://php.net/smtp-port
smtp_port = 25

; For Win32 only.
; http://php.net/sendmail-from
sendmail_from = ******224401@gmail.com

; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
; http://php.net/sendmail-path
;sendmail_path ="C:\wamp\sendmail\sendmail.exe -t -i" 
```

任何想法将不胜感激...thanx提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T05:48:33.750

我认为您需要取消注释此行

```
;sendmail_path ="C:\wamp\sendmail\sendmail.exe -t -i" 
```

只需删除分号

```
sendmail_path ="C:\wamp\sendmail\sendmail.exe -t -i" 
```

并重新启动你的 apache

# jquery - Chosen/Select2 jQuery 插件不适用于 IE10

> ID：16128308
> 
> 赞同：7
> 
> 时间：2013-04-21T05:41:35.213
> 
> 标签：jquery, asp.net-mvc, jquery-plugins, internet-explorer-10

以下针对 ASP.NET MVC 4 的代码在 Firefox 和 Chrome 上正常工作（页面加载没有错误，下拉列表显示/响应正确），但是 IE10 在页面加载时抛出以下内容：

**> 0x800a01b6 - JavaScript 运行时错误：对象不支持“选择”的属性或方法**

这是 SELECT html 标记：

```
<select class="chzn-select" data-placeholder="Group" name="Group">
    @foreach(var group in @Model.Groups)
    {
      <option value="@group">@group</option>
    }
</select> 
```

以及它下面的JavaScript：

```
 <script type="text/javascript">
    $(function () {
        $(".chzn-select").chosen();
    });
</script> 
```

我已将 selected.css 和 selected.*.js 文件添加到适当的样式和脚本包中，然后将它们包含在我的母版页中。

（页面请求上的开发工具屏幕） ![在此处输入图像描述](https://i.stack.imgur.com/YFqPN.png)

此外，我尝试使用 select2 并在 IE 中遇到相同的错误，其他浏览器运行正常。（我更新了捆绑包以包含对 .css 和 .js 的引用）我更改的代码是：

```
<select class="GroupDropdown" name="Group">
      @foreach(var group in @Model.Groups)
      {
         <option value="@group">@group</option>
      }
 </select>
 <script type="text/javascript">
      $(function () {
           $(".GroupDropdown").select2();
      });
 </script> 
```

以下适用于所有浏览器（文件位于根目录并正确命名）

```
<!DOCTYPE html>
<html>
<head>
    <title>Dropdown Test</title>
    <script src="jquery.js" type="text/javascript"></script>
    <script src="select2.js" type="text/javascript"></script>
    <link href="select2.css" rel="stylesheet" />
</head>
<body>
    <select>
        <option value="A">A</option>
        <option value="B">B</option>
        <option value="C">C</option>
    </select>
</body>
<script type="text/javascript">
    $(function(){
        $("select").select2();
    });
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T15:38:51.230

我最近遇到了同样的问题，请确保您使用的是 1.8.1 之后的稳定 jquery 版本

# javascript - 无法在 Chrome 扩展程序中获取选定的文本

> ID：16128310
> 
> 赞同：0
> 
> 时间：2013-04-21T05:41:37.873
> 
> 标签：javascript, json, google-chrome, google-chrome-extension, manifest

我正在编写一个 chrome 扩展，它应该能够对上下文菜单中的选定文本做一些工作。当我在正常的 html 页面中运行代码时，我用来获取所选文本的代码在正常情况下工作。但是当我尝试在我的扩展中使用相同的代码时，它不会返回选定的文本。这是我在扩展中用来获取所选文本的代码：

```
function myClick2(){
  var txt = '';
  if (chrome.extension.getBackgroundPage().window.getSelection)
    txt = chrome.extension.getBackgroundPage().window.getSelection();
  else if (chrome.extension.getBackgroundPage().document.getSelection)
    txt = chrome.extension.getBackgroundPage().document.getSelection();
  else if (chrome.extension.getBackgroundPage().document.selection)
    txt = chrome.extension.getBackgroundPage().document.selection.createRange().text;
  console.log("this is the console message");
  console.log("txt: " + txt);
} 
```

这是我的清单和另一个链接中的完整脚本文件：[Getting text selection in Chrome extension background page](https://stackoverflow.com/questions/15988728/getting-text-selection-in-chrome-extension-background-page)

# java - 如何在 Map 数据上做一个 sql 基础

> ID：16128311
> 
> 赞同：0
> 
> 时间：2013-04-21T05:41:40.903
> 
> 标签：java, sql

我有下面的方法，它接受两个参数-

`userId and attributes Map`

属性 Map 将具有列名和列值-

举个例子，如果我在上面的地图中有 5 列，那么也会有 5 个键和 5 个值。

那么我的 SQL 将如下所示 -

`String sql = "INSERT INTO PROFILE(userId, colA, colB, colC, colD, colE) VALUES ( ?, ?, ?, ?, ?, ?) ";`

同样，我的查询语句看起来像 -

`BoundStatement query = prBatchInsert.bind(userId, colAValue, colBValue, colCValue, colDValue, colEValue);`

但在某些情况下，属性映射可能有 20 列。所以在此基础上，我需要制作sql和查询语句。

下面的代码几乎假设表格只有四列，这是不正确的。

```
public void upsertAttributes(final String userId, final Map<String, String> attributes) {

    try {
        String[] keys = (String[])attributes.keySet().toArray();

        String sql = "INSERT INTO PROFILE(userId, "+keys[0]+", "+keys[1]+", "+keys[2]+", "+keys[3]+") VALUES ( ?, ?, ?, ?, ?) "; 

        BoundStatement query = prBatchInsert.bind(userId, attributes.get(keys[0]), attributes.get(keys[1]), attributes.get(keys[2]), attributes.get(keys[3]));

    } catch (Exception e) {
        LOG.error(e);
    }

} 
```

我怎样才能把上面的方法写得更通用`attributes Map`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T05:47:40.117

您应该使用 Spring jdbctemplate，它为此提供了大量的 api。查看此链接：[http ://static.springsource.org/spring/docs/2.0.8/api/org/springframework/jdbc/core/JdbcTemplate.html](http://static.springsource.org/spring/docs/2.0.8/api/org/springframework/jdbc/core/JdbcTemplate.html)

编辑：

检查此链接：[http ://www.mkyong.com/spring/spring-named-parameters-examples-in-simplejdbctemplate/](http://www.mkyong.com/spring/spring-named-parameters-examples-in-simplejdbctemplate/)

它正是你想要的。

编辑：如果您不想使用 Spring，那么为了实现这一点，您需要动态生成完整的 sql 字符串。不会使用绑定。

看到这段代码[我没有运行这段代码，但这是实现这个的基本思想]：

```
public void upsertAttributes(final String userId, final Map<String, String> attributes) {

    try {
        String[] keys = (String[])attributes.keySet().toArray();

        String sql = "INSERT INTO PROFILE(userId, "+keys[0]+", "+keys[1]+", "+keys[2]+", "+keys[3]+") VALUES ( ?, ?, ?, ?, ?) "; 
        StringBuffer keysStmt = new StringBuffer("INSERT INTO PROFILE("+userId);
        StringBuffer valuesStmt = new StringBuffer("  VALUES (" );

        Iterator itr = attributes.keySet().iterator();

        while(itr.hasNext()){
            String key = itr.next();
            keysStmt.append(","+key);
            valuesStmt.append(attributes.get(key)+",");          
        }

       //remove last comma
       valuesStmt = new StringBuffer(valuesStmt.toString().substring(0,valuesStmt.length-1));

       sql = keysStmt.append(")")+valuesStmt.append(")");

    } catch (Exception e) {
        LOG.error(e);
    }

} 
```

# c# - 如何在 FMOD Ex 中实现 VST 插件？

> ID：16128317
> 
> 赞同：0
> 
> 时间：2013-04-21T05:42:35.637
> 
> 标签：c#, fmod, vst

标题说明了一切。我正在尝试使用 FMOD Ex 实现 VST 插件。我能找到的唯一指南是 FMOD Studio，但不是实际的编码实现。我有 FMOD 的 C++ 文档，所以我可以播放声音，甚至可以通过翻译它来应用库存的 DSP 效果，但是 VST 插件的文档对我来说似乎很不清楚（我可能只是遗漏了一些东西）。

当资源可用时，我是一位出色的研究人员，因此即使有人能指出我正确的方向，这也会有所帮助（谷歌没有返回任何富有成果的东西，可能是因为“fmod vst”这个词太含糊了）。

谢谢！！

〜杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T07:19:07.663

VST.NET允许您在 .NET 中构建 VST (2.x) 插件[。](https://vstnet.codeplex.com/)我对 FMod 不熟悉，但由于您已经用“C#”标记了您的问题，我假设您可以从 .NET 接口它。

我想您可以使用 VST.NET 创建 VST 插件并使用 FMod 实现插件的功能（和 UI？）。

希望能帮助到你。Marc Jacobi（VST.NET 的作者）

# asp.net-mvc - 如何在 ASP.NET MVC 中实现流利的 api？

> ID：16128323
> 
> 赞同：6
> 
> 时间：2013-04-21T05:43:43.723
> 
> 标签：asp.net-mvc, razor, fluent-interface

我想在我的 mvc 站点上实现 fluent api。我掌握了基础知识。所以实现对象库，例如：

```
public class UIElement{/*...*/}
public class ButtonBase : UIElement{/*...*/}
public class LinkButton : ButtonBase {/*...*/}

  public static class Extensions
  {
    public static T UIElementMethod<T>(this T element, string title)
      where T : UIElement
    {
      return element;
    }

    public static T ButtonBaseMethod<T>(this T element, string title)
      where T : ButtonBase
    {
      return element;
    }

    public static T LinkButtonMethod<T>(this T element, string title)
      where T : LinkButton
    {
      return element;
    }
  } 
```

但是如何在没有一些刷新方法调用的情况下在剃刀视图中使用它。

```
@Html.UIproject().LinkButton()
    .UIElementMethod("asd")
    .ButtonBaseMethod("asd")
    .LinkButtonMethod("asd") 
```

但它返回类的名称。我试图为 MvcHtmlString 创建一个隐式运算符，但它没有被调用。任何想法如何实现这一点。如何知道它是链条的和。我喜欢 [剑道 UI](http://demos.kendoui.com/web/)的工作方式。

谢谢，
彼得

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T06:27:16.503

您的`UIElement`类需要实现`IHtmlString`接口。这个接口的`ToHtmlString`方法被 Razor 调用并且应该返回一个 HTML 编码的字符串。

所以我会在抽象基础上实现它`UIElement`并创建`RenderHtml`可以由具体`LinkButton`等类实现的方法：

```
public abstract class UIElement : IHtmlString 
{
    public string ToHtmlString()
    {
        return RenderHtml(); // This should return an HTML-encoded string.
    }

    public override string ToString()
    {
        return ToHtmlString();
    }

    protected abstract string RenderHtml();
} 
```

如果您在课程中检查 Reflector/JustDecompile/dotPeek 中的 KendoUI，`WidgetBase`您将看到相同的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T05:51:26.050

在这种特殊情况下，我没有尝试过，但您可以使用隐式转换从流利的构建器转换为您需要的对象（请参阅此[博客](http://msmvps.com/blogs/peterritchie/archive/2010/12/09/fluent-builders-part-2.aspx)）。

# windows - 如何使用符号树文件夹结构将我的私有 PDB 复制到我的符号缓存中？

> ID：16128328
> 
> 赞同：1
> 
> 时间：2013-04-21T05:44:31.617
> 
> 标签：windows, windbg, symbols, pdb

我有一组 PDB，我想将它们存储在我的缓存中，以便它们可供各种工具（windbg.exe、wpa.exe）使用，这样我就知道它们会被备份到*某个地方*，而不是冒险覆盖对应于我前一天获取的重要 ETL 跟踪的 PDB。使用 symchk.exe 将 PDB 拉入缓存很容易，但我想将自己的 PDB 推入其中。

必须有一个快速简单的命令和一些调试工具来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T05:44:31.617

这是我最终使用的：（例如）

```
C:\Debuggers\symstore.exe add /f C:\Users\marcusl\Desktop\ieframe.pdb /s C:\symbols /t "" 
```

# ios - 如何在 -(NSString *)description 方法中显示数组的换行符 \n？

> ID：16128331
> 
> 赞同：0
> 
> 时间：2013-04-21T05:44:58.250
> 
> 标签：ios, objective-c, nsstring, nsmutablearray

我是一名遵循 iOS 编程的新程序员：The Big Nerd Ranch Guide Chapter 2 - Gold Challenge。

我有一堂课`BNRItem`。和 的一个子`BNRItem`类`BNRContainer`。

我的`BNRContainer`包含 11 个项目。前十项是`BNRItems`。第 11 项是另一个`BNRContainer`也包含 10 项的项目。

在 main.m 中：

```
NSLog(@"%@", container); 
```

在 BNRContainer.m 中：

```
- (NSString *)description
{
    NSString *descriptionString = [[NSString alloc] initWithFormat:@"%@: Total Value = $%d: %@", [self containerName], [self valueInDollars], subItems];
    return descriptionString;
} 
```

subItems 是指向 NSMutableArray 的指针，它包含我要打印的所有 BNRItems：

```
@interface BNRContainer : BNRItem
{
    NSString *containerName;
    NSMutableArray *subItems;
} 
```

打印出来的内容：

```
My Container contains 11 items
My Container: Total Value = $1096: (
    "Undead Goblin (8Q2U8): Worth $73, recorded on 2013-04-21 13:17:54 +0800",
    "Flaming Troll (5Y2V3): Worth $40, recorded on 2013-04-21 13:17:54 +0800",
    "Undead Human (2F9Z7): Worth $40, recorded on 2013-04-21 13:17:54 +0800",
    "Flying Elf (8G5V6): Worth $99, recorded on 2013-04-21 13:17:54 +0800",
    "Undead Orc (3P9B1): Worth $10, recorded on 2013-04-21 13:17:54 +0800",
    "Undead Goblin (6R5C1): Worth $93, recorded on 2013-04-21 13:17:54 +0800",
    "Stone Giant (3E4O0): Worth $1, recorded on 2013-04-21 13:17:54 +0800",
    "Stone Goblin (3A6T4): Worth $30, recorded on 2013-04-21 13:17:54 +0800",
    "Shiny Troll (8S3I1): Worth $77, recorded on 2013-04-21 13:17:54 +0800",
    "Flying Orc (4F6F9): Worth $65, recorded on 2013-04-21 13:17:54 +0800",
    "Dublicate Container: Total Value = $568: (\n    \"Flying Elf (1P5F4): Worth $29, recorded on 2013-04-21 13:17:58 +0800\",\n    \"Shiny Elf (3R2Q6): Worth $88, recorded on 2013-04-21 13:17:58 +0800\",\n    \"Shiny Dwarf (4X7P8): Worth $38, recorded on 2013-04-21 13:17:58 +0800\",\n    \"Undead Goblin (7E4L1): Worth $77, recorded on 2013-04-21 13:17:58 +0800\",\n    \"Flying Human (8K9Y2): Worth $35, recorded on 2013-04-21 13:17:58 +0800\",\n    \"Flying Human (8J8T0): Worth $94, recorded on 2013-04-21 13:17:58 +0800\",\n    \"Shiny Dwarf (5E2Z1): Worth $42, recorded on 2013-04-21 13:17:58 +0800\",\n    \"Flying Troll (1K1G7): Worth $71, recorded on 2013-04-21 13:17:58 +0800\",\n    \"Shiny Troll (9X6C8): Worth $40, recorded on 2013-04-21 13:17:58 +0800\",\n    \"Flying Elf (3H0R6): Worth $54, recorded on 2013-04-21 13:17:58 +0800\"\n)"

) 
```

我如何让它像这样打印出 \n ？

```
My Container contains 11 items
My Container: Total Value = $1096: (
    "Undead Goblin (8Q2U8): Worth $73, recorded on 2013-04-21 13:17:54 +0800",
    "Flaming Troll (5Y2V3): Worth $40, recorded on 2013-04-21 13:17:54 +0800",
    "Undead Human (2F9Z7): Worth $40, recorded on 2013-04-21 13:17:54 +0800",
    "Flying Elf (8G5V6): Worth $99, recorded on 2013-04-21 13:17:54 +0800",
    "Undead Orc (3P9B1): Worth $10, recorded on 2013-04-21 13:17:54 +0800",
    "Undead Goblin (6R5C1): Worth $93, recorded on 2013-04-21 13:17:54 +0800",
    "Stone Giant (3E4O0): Worth $1, recorded on 2013-04-21 13:17:54 +0800",
    "Stone Goblin (3A6T4): Worth $30, recorded on 2013-04-21 13:17:54 +0800",
    "Shiny Troll (8S3I1): Worth $77, recorded on 2013-04-21 13:17:54 +0800",
    "Flying Orc (4F6F9): Worth $65, recorded on 2013-04-21 13:17:54 +0800",
    "Dublicate Container: Total Value = $568: (
        "Flying Elf (1P5F4): Worth $29, recorded on 2013-04-21 13:17:58 +0800\",
        "Shiny Elf (3R2Q6): Worth $88, recorded on 2013-04-21 13:17:58 +0800\",
        "Shiny Dwarf (4X7P8): Worth $38, recorded on 2013-04-21 13:17:58 +0800\",
        "Undead Goblin (7E4L1): Worth $77, recorded on 2013-04-21 13:17:58 +0800\",
        "Flying Human (8K9Y2): Worth $35, recorded on 2013-04-21 13:17:58 +0800\",
        "Flying Human (8J8T0): Worth $94, recorded on 2013-04-21 13:17:58 +0800\",
        "Shiny Dwarf (5E2Z1): Worth $42, recorded on 2013-04-21 13:17:58 +0800\",
        "Flying Troll (1K1G7): Worth $71, recorded on 2013-04-21 13:17:58 +0800\",
        "Shiny Troll (9X6C8): Worth $40, recorded on 2013-04-21 13:17:58 +0800\",
        "Flying Elf (3H0R6): Worth $54, recorded on 2013-04-21 13:17:58 +0800\"
    )"
) 
```

感谢所有帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:13:57.413

打印日志时，可以在打印的内容中添加 \n\r。例如

```
NSLog(@"This is the first Line \n\r This is the Second Line"); 
```

将打印：

这是第一行 这是第二行

因此，请尝试使用此功能随时换行。

# c++ - 是否有任何应用程序具有 HWND？

> ID：16128332
> 
> 赞同：2
> 
> 时间：2013-04-21T05:45:07.840
> 
> 标签：c++, windows, hwnd

我正在学习 C++。我想知道是否有任何 C++ 应用程序具有`HWND`. 示例波纹管应用程序，没有创建窗口。如果有，我怎样才能得到它的 HWND？非常感谢！

```
#include <windows.h>

int WINAPI WinMain( HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR szCmdLine, int iCmdShow )
{
    MSG msg;
    while( GetMessage( &msg, NULL, 0, 0 ) )
    {
        TranslateMessage( &msg );
        DispatchMessage( &msg );
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T05:57:44.223

“我正在学习 C++。我想知道任何 C++ 应用程序都有 HWND。” 最短的答案是**否定**的。HWND 是用于编写 Windows 应用程序的库中定义的类型。C++ 是一种可以用来执行此操作的语言，只要您拥有为您提供函数的库（包括 HWND 类型）。

您可以为 CMD 提示符或 Unix 编写与 Windows 无关的程序。试试这个 C 风格的程序。将下面的文本复制到 a.cpp 文件中，并编译生成 a.exe：

```
#include <stdio.h>
int main()
{
    printf( "Hello world\n" ) ;
    return 0 ;
} 
```

当你运行cmd时，将目录切换到a.exe所在的位置，然后运行a.exe，你会看到：

```
Hello world 
```

如果您打算学习 C++，则无需编写 Windows 应用程序。您可以编写 CMD 或 Linux 程序。找一本关于 C++ 主题的好书。祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T05:49:47.587

您需要创建一个。

查看[CreateWindowEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632680%28v=vs.85%29.aspx)和[ShowWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548%28v=vs.85%29.aspx)

# codeigniter - codeigniter 分页类中的自定义查询

> ID：16128334
> 
> 赞同：0
> 
> 时间：2013-04-21T05:45:27.437
> 
> 标签：codeigniter, pagination

我正在使用 codeigniter 分页类并被困在这段代码中！以下代码从 employees 表中读取整个列，但我的查询包含一个联接。我真的不知道如何使用配置设置运行我自己的查询！

```
$config['per_page'] = 20; 
$view_data['view_data'] = $this->db->get('employees', $config['per_page'], $this->uri->segment(3)); 
```

我自己的查询：

```
$this->db->select('emp.code as emp_code,emp.fname as emp_fname,emp.lname as emp_lname,emp.faname as emp_faname,emp.awcc_phone as emp_phone,emp.awcc_email as emp_email,position as position,dep.title as department');
$this->db->from('employees as emp');
$this->db->join('departments as dep','dep.code=emp.department_code');
$this->db->where('emp.status = 1');
$employees_list = $this->db->get();
return $employees_list; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T07:09:30.980

你的做法是完全错误的。在控制器中这样做

```
$this->load->model('mymodel');
$config['per_page']     =   20; 
$view_data['view_data'] = $this->mymodel->getEmployees($config['per_page'], $this->uri->segment(3)); 
```

模型功能

```
function getEmployees($limit = 10 , $offset = 0)
{
    $select =   array(
                    'emp.code as emp_code',
                    'emp.fname as emp_fname',
                    'emp.lname as emp_lname',
                    'emp.faname as emp_faname',
                    'emp.awcc_phone as emp_phone',
                    'emp.awcc_email as emp_email',
                    'position as position',
                    'dep.title as department'
    );

    $this->db->select($select);
    $this->db->from('employees as emp');
    $this->db->join('departments as dep','dep.code=emp.department_code');
    $this->db->where('emp.status',1);
    $this->db->limit($offset , $limit);
    return $this->db->get()->result();
} 
```

使用方法见[本](http://phpmaster.com/pagination-with-codeigniter/) 教程

# c# - Show 和 ShowDialog 不起作用

> ID：16128338
> 
> 赞同：2
> 
> 时间：2013-04-21T05:46:14.587
> 
> 标签：c#, .net, multithreading, winforms

它不像我以前见过的任何东西。
当我调用 (new System.Windows.Forms.Form()).ShowDialog() 时，表单会显示一毫秒左右，然后消失。
我追踪了电话并得到了这个：

> System.Windows.Forms.Form.Dispose
> System.ComponentModel.Component.Dispose
> System.Windows.Forms.Application.ThreadWindows.Dispose
> System.Windows.Forms.Application.ThreadContext.DisposeThreadWindows
> System.Windows.Forms.Application.ComponentManager.System。 Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop
> System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner
> System.Windows.Forms.Application.ThreadContext.RunMessageLoop
> System.Windows.Forms.Form.ShowDialog Esfand.Program.Main C#

我已经尝试了任何想到的方法来解决这个问题。

尽管在尝试显示此表单之前我已经显示了一个登录表单。
我不认为登录表单有什么特别的（通常无聊的东西，连接到服务器，发送凭据，接收数据）。
我正在为表单使用主线程。我有消息传递和消息循环的经验。我在登录表单中使用了线程。

编辑：澄清科迪格雷的建议：

这就是我所拥有的`void Main(string[])`：

```
LoginForm login = new LoginForm ();
login.ShowDialog ();//works
if (login.DialogResult == DialogResult.OK)
{
    MainForm f = new MainForm ();
    f.ShowDialog ();//won't work
} 
```

在新线程中创建和显示 MainForm 使一切重新开始工作。但是每个表单上都会出现随机错误，这使得该解决方案不够好。

编辑 2：
FormClosing 事件甚至不会触发。

```
System.Windows.Forms.Form A;
A = new Form();
A.FormClosing += new FormClosingEventHandler((sender, e) => { System.Diagnostics.Debugger.Break();/*won't work. tried Breakpoints and other stuff too*/ });
A.ShowDialog(); 
```

编辑 3： HandleDestroyed 事件堆栈跟踪：

```
>   Esfand.exe!Esfand.Program.Main.AnonymousMethod__1(object sender = {System.Windows.Forms.Form}, System.EventArgs e = {System.EventArgs}) Line 50 + 0x6 bytes C#
    System.Windows.Forms.dll!System.Windows.Forms.Control.OnHandleDestroyed(System.EventArgs e) + 0x9e bytes    
    System.Windows.Forms.dll!System.Windows.Forms.Form.OnHandleDestroyed(System.EventArgs e) + 0x13 bytes   
    System.Windows.Forms.dll!System.Windows.Forms.Control.WmDestroy(ref System.Windows.Forms.Message m) + 0x54 bytes    
    System.Windows.Forms.dll!System.Windows.Forms.Control.WndProc(ref System.Windows.Forms.Message m) + 0x547 bytes 
    System.Windows.Forms.dll!System.Windows.Forms.Form.WndProc(ref System.Windows.Forms.Message m) + 0x6d bytes 
    System.Windows.Forms.dll!System.Windows.Forms.NativeWindow.DebuggableCallback(System.IntPtr hWnd, int msg = 2, System.IntPtr wparam, System.IntPtr lparam) + 0x15e bytes    
    [Native to Managed Transition]  
    [Managed to Native Transition]  
    System.Windows.Forms.dll!System.Windows.Forms.NativeWindow.DestroyHandle() + 0xf7 bytes 
    System.Windows.Forms.dll!System.Windows.Forms.Control.DestroyHandle() + 0x3e3 bytes 
    System.Windows.Forms.dll!System.Windows.Forms.Control.Dispose(bool disposing) + 0x347 bytes 
    System.Windows.Forms.dll!System.Windows.Forms.ContainerControl.Dispose(bool disposing) + 0x19 bytes 
    System.Windows.Forms.dll!System.Windows.Forms.Form.Dispose(bool disposing) + 0x26a bytes    
    System.dll!System.ComponentModel.Component.Dispose() + 0x1b bytes   
    System.Windows.Forms.dll!System.Windows.Forms.Application.ThreadWindows.Dispose() + 0xb3 bytes  
    System.Windows.Forms.dll!System.Windows.Forms.Application.ThreadContext.DisposeThreadWindows() + 0x12d bytes    
    System.Windows.Forms.dll!System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(System.IntPtr dwComponentID, int reason, int pvLoopData) + 0x58e bytes    
    System.Windows.Forms.dll!System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(int reason = 4, System.Windows.Forms.ApplicationContext context = {System.Windows.Forms.Application.ModalApplicationContext}) + 0x593 bytes 
    System.Windows.Forms.dll!System.Windows.Forms.Application.ThreadContext.RunMessageLoop(int reason, System.Windows.Forms.ApplicationContext context) + 0x81 bytes    
    System.Windows.Forms.dll!System.Windows.Forms.Form.ShowDialog(System.Windows.Forms.IWin32Window owner) + 0x765 bytes    
    Esfand.exe!Esfand.Program.Main(string[] a = {string[0]}) Line 51 + 0x10 bytes   C# 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-12T11:32:53.747

> 这件事使我的程序中的每一个表单都引发了一个独特的错误（例如，“无法注册拖放事件处理程序”）

这是对代码中核心问题的强烈暗示。当您有任何控件的 AllowDrop 属性设置为 true 时，将调用 RegisterDragDrop() 本机函数。创建表单的本机窗口时调用它。不幸的是，如果您拥有 64 位版本的 Windows 并且您强制您的程序以 32 位模式运行，那么对于引发任何异常都是一个非常糟糕的时机。[这个答案](https://stackoverflow.com/a/4934010/17034)的主题。

RegisterDragDrop() 失败的充分理由很少。但是一个。我们已经可以从您的代码段中看出您一直在修改 Program.cs。它的样板版本如下所示：

```
static class Program {
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]                // <=== Here!!!
    static void Main() {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());
    }
} 
```

我在重要的代码行放了一个大箭头。[STAThread] 属性在任何 GUI 程序中都是必不可少的。它告诉 CLR 它应该初始化 COM 并将程序的主线程配置为单线程单元。公寓是一个非常重要的 COM 实现细节，其范围有点超出这个答案。如果缺少该属性，则程序的主线程将加入 MTA，即多线程单元。非线程安全的代码（如拖放、剪贴板和 shell 对话框）的不利位置。

忘记使用该属性可能会导致令人困惑的异常。当您的开发机器启动 64 位版本的 Vista 或 Win7 时尤其糟糕，Windows 版本在关键时刻引发异常时遇到问题，如链接答案中所述。

您的 Program.Main() 方法的正确版本没有此问题，并且使用推荐的做法：

```
 [STAThread]                // <=== Don't forget this
    static void Main() {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        using (var login = new LoginForm()) {
            if (login.ShowDialog() != DialogResult.OK) return;
        }
        Application.Run(new MainForm());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T06:06:05.743

尝试检查是否抛出了线程异常错误。检查您是否在 Application_ThreadException 事件中看到任何内容。

```
static void Main()
{
    Application.ThreadException += new System.Threading.ThreadExceptionEventHandler(Application_ThreadException);
    try
    {
        //Your existing code
    }
    catch (Exception ex)
    {
    }
}

private static void Application_ThreadException(object sender, System.Threading.ThreadExceptionEventArgs e)
{
} 
```

**编辑：** 另一种选择是将 MainForm 显式设置为正在创建的 newForm 的所有者。

```
newForm.ShowDialog(MainForm); 
```

我有一种感觉，默认情况下所有者被设置为您的登录表单，该表单已关闭，这将自动关闭您的新表单

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-12T20:05:54.097

当事件队列上有 WM_QUIT 消息时，它看起来`IMsoComponentManager.FPushMessageLoopP()`会调用。`Application.ThreadContext.DisposeThreadWindows()`

您是否有机会在您`LoginForm`的按钮事件处理程序中发布退出消息？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-13T07:19:36.237

尝试将表单定义为类成员。不在函数内部。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-14T16:06:46.657

我的理解是表单需要在应用程序上下文中运行。

我继承了一些从 Main 上下文中启动多个表单的代码，方式如下：

```
var form1 = Form1();
Application.Run(form1);

// form returns, check public method form.ButtonPushed etc
if (form.Button1Pushed)
{
    var form2 = Form2();
    Application.Run(form2);
} 
```

这将成功启动几种形式。

这感觉不是一种非常优雅的做事方式，但它确实有效......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-14T08:56:00.300

你的`Main`方法看起来很奇怪。我认为您错过了对`Application.Run()`. 由于您不希望应用程序在登录表单关闭后立即退出，您可能需要一个`ApplicationContext`. MSDN 有一个例子：http: [//msdn.microsoft.com/en-us/library/ms157901.aspx](http://msdn.microsoft.com/en-us/library/ms157901.aspx)

另一种可能性是`Application.Run()`使用不可见的表单作为参数调用，然后显示其他表单（并且在应用程序退出之前永远不会关闭），但在我看来这是一个非常丑陋的黑客攻击。

# xml - 我想使用带有星号服务器的 sipp 工具（需要集成）

> ID：16128340
> 
> 赞同：0
> 
> 时间：2013-04-21T05:46:19.597
> 
> 标签：xml, csv, asterisk

我正在为星号服务器实现故障转移，所以我有两台服务器（主动和被动）最初星号服务在主动上运行，但如果主动失败，被动服务器应该启动服务。这是完美的，因为我已经使用 x-lite 软件电话进行了检查。但是因为我想使用 sipp 工具生成批量调用，但它直接生成调用，这意味着如果我的星号服务器关闭，那么它也会生成并且也可以使用任何扩展，所以我想将 sipp 与星号服务器集成，即 sipp 应该生成如果只有星号服务器正在运行，则调用。提前致谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:31:22.350

您已经通过外部脚本检查星号是否正在运行并在 sipp 中更改 ip。其他选项是创建 ip 故障转移配置（因此一个 ip 将从一个移动到另一个星号服务器）。

请参阅[http://www.voip-info.org/wiki/view/Asterisk+High+Availability+Solutions](http://www.voip-info.org/wiki/view/Asterisk+High+Availability+Solutions)

# c++ - Project Euler #23，在程序中找不到问题

> ID：16128345
> 
> 赞同：5
> 
> 时间：2013-04-21T05:47:20.290
> 
> 标签：c++, perfect-numbers

链接：[http ://projecteuler.net/problem=23](http://projecteuler.net/problem=23)

> 完美数是一个数，其真因数之和正好等于该数。例如，28 的真因数之和为 1 + 2 + 4 + 7 + 14 = 28，这意味着 28 是一个完美数。
> 
> 一个数 n 如果其真因数之和小于 n 则称为不足数，如果该数之和超过 n 则称为丰富数。
> 
> 由于 12 是最小的丰度数，1 + 2 + 3 + 4 + 6 = 16，所以可以写成两个丰度数之和的最小数是 24。通过数学分析，可以证明所有大于28123 可以写成两个丰富数之和。但是，即使已知不能表示为两个丰富数之和的最大数小于该上限，也无法通过分析进一步降低该上限。
> 
> 找出所有不能写成两个丰富数之和的正整数之和。

* * *

问题的答案是4179871，我的程序显示3797954。

首先，我创建了一个函数，用 28124 以下的所有丰富数字填充数组丰富[]。这非常好，因为我搜索了丰富的数字，它们与我的数组完全匹配。

其次，我有另一个包含所有数字 1-28123 的数组，我假设所有这些“不能写成两个丰富数字的总和”。这些都被写入数组hold[]。

最后，我去掉了可以写成两个丰富数字之和的数字，方法是将丰富[]中的所有数字与丰富[]中的所有数字相加，并将保持[]的值设置为0。（保持[丰富[0 to n]+abundant[0 to n]] = 0) 把所有剩余的数加到hold[]中，我只得到3797954

我知道这个程序效率不高，因为它将所有丰富的数字添加到所有丰富的数字中，但它应该可以正常工作。它出什么问题了？

* * *

```
#include <iostream>
#include <cmath>

using namespace std;

int hold[28124];
int abundant[7000]; //hold abundant numbers, there are only 6919 abundant numbers below 28123

bool abundance(int x){  //returns true if x is abundant
    int counter = 1;    //holds "proper divisors" of numbers, default by 1 because every int is divisible by 1
    for (int i = 2; i < sqrt(x); i++){   //finds all divisors 2 - sqrt(n)
        if (x % i == 0){
            counter += i;
            counter += x / i;
        }
    }
    int y = sqrt(x);   
    if (x % y == 0){   //adds sqrt(n) if its modulus to n is 0
            counter += sqrt(x);
        }
    if (counter > x){
        return true;
    } else {
        return false;
    }
}

int main()
{
    int counter = 0;
    for (int i = 0; i < 28124; i++){ //assumes every number cannot be written as the sum of two abundant numbers,
        hold[i] = i;                 //goes up to 28123 because "it can be shown that all integers greater
    }                                //than 28123 can be written as the sum of two abundant numbers." - project euler
    for (int j = 10; j < 28124; j++){ 
        if (abundance(j) == true){  //copies all abundant numbers up to 28123 to abundant[]
            abundant[counter] = j;
            counter++;
        }
    }

    for (int m = 0; m < counter; m++){  //adds all numbers in abundant[], with all numbers in abundant[]
        for (int n = 0; n < counter; n++){
            if (abundant[m]+abundant[n] < 28124){
                hold[abundant[m]+abundant[n]] = 0; //sum of the abundant numbers in hold[] is set to 0
            } //hold[] now holds all numbers that cannot be written as the sum of 2 abundant numbers
        }
    }
    int counter2 = 0;
    for (int x = 0; x < 28124; x++){
        counter2 += hold[x];
    }
    cout << counter2 << endl;

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T06:31:16.273

问题出在您的`abundance`功能中，特别是这部分：

```
int y = sqrt(x);   
if (x % y == 0){   //adds sqrt(n) if its modulus to n is 0
    counter += sqrt(x);
} 
```

`x % (int)sqrt(x) == 0`并不意味着它`sqrt(x)`是一个整数。一个简单的反例是 2.`sqrt(2)`大约是`1.414`，或者只是`1`一个整数。但是`2 % 1 == 0`，即使它不是平方根。

因此，要修复您的代码，请将该部分更改为：

```
int y = sqrt(x);   
if (y * y == x){   //adds sqrt(n) if sqrt(n) is an integer
    counter += y;
} 
```

你会得到正确的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T06:04:31.800

您可能会看一下[此处](https://stackoverflow.com/questions/12036502/euler-23-in-c-0-2-seconds-in-f-30-5-seconds-why?rq=1)显示的代码- 如果只是因为它得到了正确的答案。在不复制那里所做的事情的情况下，您可以例如确认问题出在您的大量数字生成器中还是在其他部分。它可能会帮助您找出哪里出错了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-26T02:33:47.770

```
my_set = set([i for i in range(1, 28123)])
print ('original sum',sum(my_set))
my_list = list(my_set)
my_l1 =[]
for k in range(12, int(my_list[-1]/2+1)):
    a = 0
    for j in range(1, int(k/2+1)):
        if k%j == 0:
            a += j

    if a > k:
        my_l1.append(k)
        my_set.remove(k*2)
#Calculating the sum of all the numbers which can be written as the sum of two abundant numbers   
l = 0
my_l2 = set([])
for d in my_l1:
    l += 1
    k = l
    while k < len(my_l1):
        a_s = d + my_l1[k]
        my_l2.add(a_s)
        k += 1
my_set.difference_update(my_l2)
print ('sum of all abbundant numbers:',sum(my_set)) 
```

这是我的problem23 Project Euler的代码，这有什么问题？我现在不关心运行时，我只想要正确的答案。

# Python

# coldfusion - 通过 CFLOOP 将变量动态设置到结构中

> ID：16128350
> 
> 赞同：0
> 
> 时间：2013-04-21T05:48:40.050
> 
> 标签：coldfusion, cfml

我正在尝试通过 CFLOOP 将变量动态设置为结构。我已阅读[Ben Nadal 的](http://www.bennadel.com/blog/152-Dynamic-ColdFusion-Variables-Via-Quoted-Naming.htm)博客文章，但似乎无法正确完成作业。我想使用点表示法并使 VIN 成为值的子结构。

这是我的代码：

```
<cfloop query="VINs">
    <cfquery name="carsQue" datasource="carsData">
      SELECT VIN, MODEL, MAKE, etc
      FROM CarsDB
      WHERE (VIN = #VIN#)
    </cfquery>

     <cfset carsStruct= StructNew()>
     <cfset carsStruct.[VIN].MAKE = '#carsQue.MODEL#'>
     <cfset carsStruct.[VIN].MODEL = '#carsQue.MAKE#'>
</cfloop> 
```

任何指导将不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T06:12:10.807

在循环外创建结构并在循环内设置变量可以解决问题。在当前场景中，每次循环运行它都会创建一个新结构。

你可以做这样的事情

```
 <cfset carsStruct= StructNew()>
 <cfloop query="VINs">
   <cfquery name="carsQue" datasource="carsData">
   SELECT VIN, MODEL, MAKE, etc
   FROM CarsDB
   WHERE VIN = <cfqueryparam cf_sql_type="cf_sql_varchar" value="#VINs.VIN#">
   </cfquery>

   <cfset carsStruct[VINs.VIN].MAKE = carsQue.MODEL>
   <cfset carsStruct[VINs.VIN].MODEL = carsQue.MAKE>
 </cfloop> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T11:49:45.747

在循环中运行查询几乎总是一个坏主意。在您的情况下，更好的选择是：

```
<cfif ListLen(valuelist(vins.vin)) gt 0>
<cfquery name=CarsQue datasource = "carsData">
select vin, model, make, etc
from carsDB
where vin in (<cfqueryparam cfsqltype="cf_sql_varchar"
value="#valuelist(vins.vin)#" list="true">)
</cfquery>

<cfset carsStruct = StructNew()>

<cfloop query="carsQue">
code for your struct
</cfloop>

<cfelse>
code for vins query returning no data
</cfif> 
```

更好的是通过一次查询获取所有数据。您没有提供足够的信息来确定这是否可行，但通常是这样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T12:36:54.080

根据您提供的有限信息，您应该能够运行一个查询并循环通过该查询以添加到您的结构中。

```
<cfset carsStruct= {}> //new struct
<cfif VINs.RecordCount> //your VINs query has records
  <cfquery name="carsQueue" datasource="carsData">
  SELECT VIN, MODEL, MAKE, etc
  FROM CarsDB
  // Quoted list of all your VINs. cfqueryparam prevents against SQL injection 
  WHERE VIN IN (<cfqueryparam cf_sql_type="cf_sql_varchar" value="#ValueList(VINs.VIN)#" list="true">
  </cfquery>

  <cfloop query="carsQueue">
    <cfset carsStruct.[carsQueue.VIN].MAKE = carsQueue.MODEL>
    <cfset carsStruct.[carsQueue.VIN].MODEL = carsQueue.MAKE>
  </cfloop>
<cfelse>
   // if VINs query return nothing a blank struct will be returned.
   //You do NOT need this <cfelse> unless you are returning something when the query is blank
</cfif> 
```

# wordpress - 静态 Jquery HTML 菜单到动态 Wordpress 菜单

> ID：16128352
> 
> 赞同：1
> 
> 时间：2013-04-21T05:49:39.967
> 
> 标签：wordpress, menu

首先，非常感谢所有在这里尝试提供帮助的人，其中一些答案让我很头疼。其次，请假设我几乎没有任何语言知识。

我正在尝试使用**apycom.com/menus/12-forest-green.html**菜单作为 wordpress 动态菜单，使用此处解释的方法**cssmenumaker.com/blog/wordpress-3-drop-down-menu-tutorial**。

一切看起来都很棒，但是子菜单不起作用。这是一张图片[http://i.imgur.com/LHGhYyn.jpg](http://i.imgur.com/LHGhYyn.jpg)。

**编辑**
也许我不是很清楚。让我详细解释一下

第 1 步：我将此自定义 walker 类添加到我的 functions.php

```
class CSS_Menu_Maker_Walker extends Walker {

  var $db_fields = array( 'parent' => 'menu_item_parent', 'id' => 'db_id' );

  function start_lvl( &$output, $depth = 0, $args = array() ) {
    $indent = str_repeat("\t", $depth);
    $output .= "\n$indent<ul>\n";
  }

  function end_lvl( &$output, $depth = 0, $args = array() ) {
    $indent = str_repeat("\t", $depth);
    $output .= "$indent</ul>\n";
  }

  function start_el( &$output, $item, $depth = 0, $args = array(), $id = 0 ) {

    global $wp_query;
    $indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';
    $class_names = $value = ''; 
    $classes = empty( $item->classes ) ? array() : (array) $item->classes;

    /* Add active class */
    if(in_array('current-menu-item', $classes)) {
      $classes[] = 'active';
      unset($classes['current-menu-item']);
    }

    /* Check for children */
    $children = get_posts(array('post_type' => 'nav_menu_item', 'nopaging' => true, 'numberposts' => 1, 'meta_key' => '_menu_item_menu_item_parent', 'meta_value' => $item->ID));
    if (!empty($children)) {
      $classes[] = 'has-sub';
    }

    $class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item, $args ) );
    $class_names = $class_names ? ' class="' . esc_attr( $class_names ) . '"' : '';

    $id = apply_filters( 'nav_menu_item_id', 'menu-item-'. $item->ID, $item, $args );
    $id = $id ? ' id="' . esc_attr( $id ) . '"' : '';

    $output .= $indent . '<li' . $id . $value . $class_names .'>';

    $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
    $attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) .'"' : '';
    $attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';
    $attributes .= ! empty( $item->url )        ? ' href="'   . esc_attr( $item->url        ) .'"' : '';

    $item_output = $args->before;
    $item_output .= '<a'. $attributes .'>';
    $item_output .= $args->link_before . apply_filters( 'the_title', $item->title, $item->ID ) . $args->link_after;
    $item_output .= '</a>';
    $item_output .= $args->after;

    $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
  }

  function end_el( &$output, $item, $depth = 0, $args = array() ) {
    $output .= "</li>\n";
  }
} 
```

第 2 步：将图像文件夹、menu.js 和 jquery.js 添加到我的主题文件夹中。还将以下菜单 css 添加到我的主题样式表中。

```
/**
 *********************************************
 * Prototype of styles for horizontal CSS-menu
 * @data 30.06.2009
 *********************************************
 * (X)HTML-scheme:
 *  <div id="menu">
 *      <ul class="menu">
 *          <li><a href="#" class="parent"><span>level 1</span></a>
 *              <ul>
 *                  <li><a href="#" class="parent"><span>level 2</span></a>
 *                      <ul><li><a href="#"><span>level 3</span></a></li></ul>
 *                  </li>
 *              </ul>
 *          </li>
 *          <li class="last"><a href="#"><span>level 1</span></a></li>
 *      </ul>
 *  </div>
 *********************************************
 */

/* menu::base */
div#menu {
    height: 46px;
    padding-left: 24px;
    background: url(images/left.png) no-repeat;
    _background: url(images/left.gif) no-repeat;
    width:auto;
}

div#menu ul {
    margin: 0;
    padding: 0;
    list-style: none;
    float: left;
}
div#menu ul.menu {
    padding-right: 24px;
    background: url(images/right.png) no-repeat right 0;
    _background: url(images/right.gif) no-repeat right 0;    
}

div#menu li {
    position: relative;
    margin: 0;
    padding: 0;
    display: block;
    float: left;
    z-index: 9;
    width: auto;
}
div#menu ul ul li {
    z-index: 9;
}
div#menu li div {
    list-style: none;
    float: left;
    position: absolute;
    z-index: 11;
    top: 39px;
    left: -18px;
    -left: 4px;
    visibility: hidden;
    width: 180px;
      margin: 0px 0 0 -4px;
    padding: 0; 
    background: url(images/submenu-top.png) no-repeat 0px 0;
    -background: url(images/submenu-top.gif) no-repeat 0px 0; 
}
div#menu ul ul {
      z-index: 12;
      width: 180px;
    padding: 0px 0px 12px 0px;
    -padding: 0px 0px 3px 0px;    
    background: url(images/submenu-bottom.png) no-repeat 0px bottom;
    -background: #E4E4E2 none;        
    margin: 14px 0 0 0;   
    -margin: 5px 0 0 0;      
}
div#menu li:hover>div {
    visibility: visible;
}

div#menu a {
    position: relative;
    z-index: 10;
    height: 38px;
    display: block;
    float: left;
    line-height: 38px;
    text-decoration: none;
    margin-top: 1px;
    white-space: nowrap;
    width: auto;
    padding-right:5px;
    text-align:center;
}
div#menu span {
    margin-top: 2px;
    padding-left: 15px;
    color: #fff;
    font: normal 13px Tahoma;
    background: none;
    line-height: 38px;  
    display: block;
    cursor: pointer;
    background-repeat: no-repeat;
    background-position: 95% 0;
    text-align: center;
}

/* menu::level1 */
div#menu a {
    padding: 0 15px 0 0;
    line-height: 38px;
    height: 46px;
    _margin-right: 1px;
    background: none;
    font-weight:bold;    

}
div#menu span {
    font-weight:bold; 
}
div#menu a:hover{
    background-image: url(images/selected-sub.png);
    background-repeat: repeat-x;
    background-position: right -1px;    
    -background: url(images/selected-sub.gif) repeat-x right -1px; 
}
div#menu li.current a,
div#menu ul.menu>li:hover>a {
    background-image: url(images/selected-sub.png);
    background-repeat: repeat-x;
    background-position: right -1px;  
    -background: url(images/selected-sub.gif)  repeat-x right -1px; 
}
div#menu a:hover span{
      color: #000000;
}   
div#menu ul.menu>li:hover>a span {
      color: #000000;
}
div#menu li {}
div#menu li.last { background: none; }

/* menu::level2 */
div#menu ul ul li {
    background-image: url(images/sep-sub.png);
    background-repeat: repeat-x;
    background-position: left bottom;
    margin: 0;
    padding: 0;
}
div#menu ul ul li:hover {
    background-image: url(images/sub-item-hover.gif);
    background-color: #717171;
    background-repeat: repeat-x;
    background-position: left top;
}
div#menu ul ul a {
      color: #000000;   
    height: auto;
    float: none;
    display: block;
    line-height: 25px;
    font-size: 13px;
    z-index: -1;
    padding: 6px 0 6px 0px;
    white-space: normal;
    width: 166px;
    margin: 0 0px 0 13px;
    background: none;
}

div#menu ul ul a span {
    color: #000000; 
      padding: 0 3px;
    line-height: 25px;
    font-size: 13px;
    font-weight: normal;
    margin:0;    
}
div#menu li.current ul a,
div#menu li.current ul a span {
    background: none;
}
div#menu ul ul a:hover {
    background: none;
  color: #fff;
}
div#menu ul ul a:hover span {
  background: none;
  color: #fff;
}
div#menu ul ul a.parent {
  background: url(images/submenu-pointer.png) no-repeat right top;
  -background: url(images/submenu-pointer.gif) no-repeat right top;  
  margin-right: -1px;
}
div#menu ul ul a.parent span {
  padding-right: 26px;
}
div#menu ul ul a.parent:hover {
  background: url(images/submenu-pointer-hover.gif) no-repeat right top;
  -background: url(images/submenu-pointer.gif) no-repeat right top;  
}
div#menu ul ul a.parent:hover span {
}
div#menu ul ul span {

    margin-top: 0;
    text-align: left;
}
div#menu ul ul li.last { background: none; }
div#menu ul ul li {
    width: 100%;
}

/* menu::level3 */

div#menu ul ul div {
      width: 180px;
      padding: 0;
    background: url(images/subsubmenu-top.png) no-repeat 0px 0;
    -background: url(images/subsubmenu-top.gif) no-repeat 0px 0;      
    margin: -32px 0 0 198px !important;
    margin: -32px 0 0 176px;
}
div#menu ul ul ul {
    padding: 11px 0px 9px 0px;  
    margin: 20px 0 0 0; 
}
div#menu ul ul div li {
    position:relative;
    top:-10px;
}

/* lava lamp */
div#menu li.back {
    background: url(images/selected-sub.png) no-repeat 0 0;
    -background: url(images/selected-sub.gif) no-repeat 0 0;    
    width: 5px;
    height: 46px;
    z-index: 8;
    position: absolute;
    padding: 0;
    margin: 0px 0 0 0;
}

div#menu li.back .left {
    padding:0;
    width:auto;
    background: url(images/selected-sub.png) repeat-x right 0;
    -background: url(images/selected-sub.gif) repeat-x right 0;     
    height: 46px;
    margin: 0 0 0 5px;
    float: none;
    position: relative;
    top: 0;
    left: 0;
    visibility: visible;
} 
```

第 3 步：在外观 > 菜单中创建一个菜单并将其命名为“菜单”并将此代码添加到我的模板中以打印菜单

```
<?php 
wp_nav_menu(array(
  'menu' => 'menu', 
  'container_id' => 'menu', 
  'link_before' => '<span>',
  'link_after' => '</span>',
  'walker' => new CSS_Menu_Maker_Walker()
)); 
?> 
```

现在从上图可以看出，子菜单卡在菜单顶部并且始终可见。但是，如果没有子菜单，则菜单可以完美运行，包括 lavalamp 效果。

我希望我现在已经足够清楚了。不幸的是，@5wordpressthemes 的回答没有帮助。感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:36:42.390

我找到了适合我的解决方案。我把它贴在这里，以防其他人正在寻找它。由于我对代码一点也不熟悉，因此不得不为此而奋斗。

我注意到对于子菜单，wordpress 使`<ul class="sub-menu">`我改变了我的助行器

```
 function start_lvl( &$output, $depth = 0, $args = array() ) {
    $indent = str_repeat("\t", $depth);
    $output .= "\n$indent<ul>\n";
  }

  function end_lvl( &$output, $depth = 0, $args = array() ) {
    $indent = str_repeat("\t", $depth);
    $output .= "$indent</ul>\n";
  } 
```

至

```
 function start_lvl( &$output, $depth = 0, $args = array() ) {
    $indent = str_repeat("\t", $depth);
    $output .= '<div><ul class="sub-menu">';
  }

  function end_lvl( &$output, $depth = 0, $args = array() ) {
    $indent = str_repeat("\t", $depth);
    $output .= '</ul></div>';
  } 
```

可能不是一个好的解决方案，但现在我可以从外观>菜单制作子菜单和子子菜单。

但是，现在我的箭头图像 css 不再工作了，但我想我可以忍受。

```
div#menu ul ul a.parent {
  background: url(images/submenu-pointer.png) no-repeat right top;
  -background: url(images/submenu-pointer.gif) no-repeat right top;  
  margin-right: -1px;
}
div#menu ul ul a.parent span {
  padding-right: 26px;
}
div#menu ul ul a.parent:hover {
  background: url(images/submenu-pointer-hover.gif) no-repeat right top;
  -background: url(images/submenu-pointer.gif) no-repeat right top;  
} 
```

**快速提问** 我的下拉菜单隐藏在我的内容后面。我尝试增加 z-index，但它不起作用，当我更改`position: absolute`或`position: relative`删除它时，它会破坏子菜单。

对此的任何帮助将不胜感激。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T11:45:15.520

**1.在您的 Worpress 仪表板中，转到 **外观 - 菜单****屏幕并开始创建菜单。**

*   单击 + 选项卡创建一个新的自定义菜单
*   命名你的菜单
*   点击“保存”

**2.从左栏添加菜单项**

*   选择所需的项目
*   点击“添加到菜单”
*   单击并拖动以重新排列菜单上的项目
*   保存菜单

**3.将此代码添加到您的页面以显示菜单**

```
<?php $defaults = array(
    'theme_location'  => '',
    'menu'            => 'Your menu name', 
    'container'       => 'ul', 
    'container_class' => 'menu-{menu slug}-container', 
    'container_id'    => 'div',
    'menu_class'      => 'menu', 
    'menu_id'         => 'menu-{menu slug}[-{increment}]',
    'echo'            => true,
    'fallback_cb'     => 'wp_page_menu',
    'before'          => '',
    'after'           => '',
    'link_before'     => '',
    'link_after'      => '',
    'items_wrap'      => '<ul id="%1$s" class="%2$s">%3$s</ul>',
    'depth'           => 0,
    'walker'          => ''
); ?>
                  <?php wp_nav_menu( $defaults ); ?> 
```

**4\. 将 css 代码保存在 .css 文件中，如 menu.css 并将此文件链接到 header.php**

```
<link rel="stylesheet" href="<?php bloginfo('template_url'); ?>/menu.css" type="text/css" media="screen" /> 
```

所有文件都必须在您的主题文件夹中

有关 Wordpress 菜单的更多信息：http: [//codex.wordpress.org/Appearance_Menus_Screen](http://codex.wordpress.org/Appearance_Menus_Screen)

# c# - 在泛型类中需要一个真正的静态字段，或者如何保护它的可见性？

> ID：16128358
> 
> 赞同：3
> 
> 时间：2013-04-21T05:50:38.550
> 
> 标签：c#, generics, static, singleton

我想要一个像这样的课程：

```
public class Forest<S, T>
{
    static IList<Animal> coolGuys = new List<Animal>();
} 
```

但我想要`coolGuys`真正保持静态，这意味着它必须在应用程序的整个生命周期中都是独一无二的。而现在不是。ReSharper 警告说，MS 不鼓励这种模式，**但是如何才能真正实现我想要的呢？**

可能我将不得不通过创建**另一个静态类**并在那里有一个公共静态字段*或***另一个单例类**中的公共实例字段来做更多的工作。可以有一个冗余的公共类来保存一个静态字段，但我要避免的是该**字段是 public/internal**。我的意思`coolGuys`只是为了`Forest<,>`，为什么要把不连贯的东西暴露给外界。

```
public class Forest
{
    public static IList<Animal> coolGuys = new List<Animal>(); //want to avoid
}

public class Forest<S, T>
{
    Forest.coolGuys.Add(cutie);
} 
```

有更好的图案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T06:10:56.573

## 方法 1 - 注入一个状态提供者

1.  创建一个类型来存储数据。
2.  使用接口对其进行抽象，因此您可以根据需要注入不同的提供程序（例如，用于测试）。
3.  消费类不关心实现，除了它保证有状态。
4.  并发字典负责线程安全。

```
public interface IStateProvider
{
    void Store( string key, object value );
    object Get( string key );
}

public class StateProvider : IStateProvider
{
    private static ConcurrentDictionary<string, object> _storage = new ConcurrentDictionary<string, object>();

    public void Store( string key, object value )
    {
        // add to storage
    }

    public object Get( string key )
    {
        // get from storage
    }
}

public class Forest<T1, T2>
{
    private IStateProvider _stateProvider;

    public Forest( IStateProvider stateProvider )
    {
        _stateProvider = stateProvider;
    }

    public void Foo()
    {
        // do something with the stateful value
    }
}

// of course, you could do this with a DI framework
var stateProvider = new StateProvider();
var forest = new Forest<Foo, Bar>( stateProvider ); 
```

## 方法 2 - 基类

这种方法不太优雅，但更简单一些。

```
public abstract class ForestBase
{
    private static List<object> _staticList = new List<object>();

    protected List<object> StaticList
    {
        get { return _staticList; }
    }
}

public class Forest<T1, T2> : ForestBase
{
    public void Foo()
    {
        StaticList.Add( 12345 );
    }
} 
```

这隐藏了内部数据，应该只给你一个静态列表的实例，而不是每个通用参数组合一个实例。

# c++ - 二叉搜索树中的双重删除（？）

> ID：16128359
> 
> 赞同：1
> 
> 时间：2013-04-21T05:50:51.137
> 
> 标签：c++, data-structures, recursion, binary-search-tree

我正在编写一个代码来测试两个二叉搜索树是否相等。

但是，每当我释放内存时，我都会遇到访问冲突错误。通过它，我看到我正在我的释放函数上访问内存地址 0xfeefee。我在 Cell 析构函数中遇到访问冲突。

另外我真的不知道这个功能是否有效，但是我并没有真正寻求帮助——尽管仍然会受到帮助。

释放函数：

```
~Cell(void) {
    if (left) { delete left; }
    if (right) { delete right; }
} 
```

功能：

```
bool BST::isEqualTo(const BST& that) const{
    if(root <= 0 && that.root <= 0){
        return true;
    }else if(root <= 0 || that.root <= 0){
        return false;
    }
    if(root->val != that.root->val){
        false;
    }
    /*Cell* saved_node1 = new Cell(*root);
    Cell* saved_node2 = new Cell(*that.root);*/
    BST a, b, c, d;
    a.root = root->left;
    b.root = that.root->left;
    c.root = root->right;
    d.root = that.root->right;
    if(a.isEqualTo(b) && c.isEqualTo(d)){
        /*a.root = saved_node1;
        b.root = saved_node2;
        c.root = saved_node1;
        d.root = saved_node2;*/
        return true;
    }
    return false;
} 
```

树析构函数：

```
void BST::destroy(void) {
    length = 0;
    delete root;
    root = nullptr;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:06:35.887

所以，在这部分代码中

```
BST a, b, c, d;
a.root = root->left;
b.root = that.root->left;
c.root = root->right;
d.root = that.root->right; 
```

您创建`BST`对象，该对象将在函数完成后立即销毁。在这之后，分配给`root`指针的所有内存将被释放。

我建议你写另一个这样的比较函数：

```
bool _is_equal(Cell* c1, Cell* c2)
{
    if(c1 == nullptr && c2 == nullptr)
        return true;
    else if(c1 == nullptr || c2 == nullptr)
        return false;

    return  (c1 -> val == c2 -> val) &&
            _is_equal(c1 -> left,  c2 -> left) &&
            _is_equal(c1 -> right, c2 -> right);
} 
```

并在你的函数中调用它

```
bool BST::isEqualTo(const BST& that) const
{
    return _is_equal(root, that.root);
} 
```

而且，当然，您应该重载`operator==`来比较两个对象。它看起来会更漂亮。

# ios - 为什么 UIViewController.UIView 对子 UIViewLabel 的约束会引发错误“布局属性配对无效”？

> ID：16128372
> 
> 赞同：2
> 
> 时间：2013-04-21T05:52:48.347
> 
> 标签：ios, objective-c, autolayout

我正在尝试定位标签，使标签顶部位于 UIViewController 下方的 2/3 处。所以我写了这个约束，但它给了我下面的错误。

```
NSLayoutConstraint *labelTopConstraint = [NSLayoutConstraint constraintWithItem:self.myLabel
                                         attribute:NSLayoutAttributeTop
                                         relatedBy:NSLayoutRelationGreaterThanOrEqual
                                            toItem:self.view
                                         attribute:NSLayoutAttributeHeight
                                        multiplier:0.66
                                          constant:0]; 
```

错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: '*** +[NSLayoutConstraint 
constraintWithItem:attribute:relatedBy:toItem:attribute:multiplier:constant:]: 
Invalid pairing of layout attributes' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T07:11:09.067

是的，这很烦人是不是。假设您的视图控制器是屏幕的全高，您可以使用 NSLayoutAttributeBottom 而不是 height，这应该会给您相同的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T10:49:27.530

您可以添加此约束：

```
[self.view addConstraints:
   [NSLayoutConstraint constraintsWithVisualFormat:@"V:|-(>=topSpace)-[topLabel]"
                                           options:0
                                           metrics:@{@"topSpace":@(self.view.bounds.size.height*0.66f)}
                                             views:NSDictionaryOfVariableBindings(topLabel)]]; 
```

我建议您在此`viewDidAppear:`之前或之后调用它，因为在此之前高度将为零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T21:55:32.583

这不正确 - self.myLabel 的顶部应该 >= 0.66 * self.view.height？self.myLabel 的高度是一回事，它的顶部是另一回事。如果您可以将 self.myLabel 的底部边缘固定到超级视图的底部边缘，那么我认为如果您设置这样的约束：

```
NSLayoutConstraint *labelHeightConstraint = [NSLayoutConstraint constraintWithItem:self.myLabel
                                         attribute:NSLayoutAttributeHeight
                                         relatedBy:NSLayoutRelationGreaterThanOrEqual
                                            toItem:self.view
                                         attribute:NSLayoutAttributeHeight
                                        multiplier:0.66
                                          constant:0]; 
```

这应该确保 self.myLabel 的高度始终至少是根视图高度的 2/3。

# php - 如何在 WooCommerce 上设置 Paypal？

> ID：16128374
> 
> 赞同：2
> 
> 时间：2013-04-21T05:52:52.630
> 
> 标签：php, wordpress, woocommerce, paypal

我已经努力在 WooCommerce 上设置 Paypal，但没有成功。

我想知道在 WooCommerce 上设置 PayPal 的实际步骤是什么？

我的问题是：

1.  我用我的沙箱对其进行了测试，但付款后，它不会从 PayPal 重定向回我的网站。（我已经有商业 Paypal 帐户，并且 Paypal 上的重定向 url 已经设置）

2.  结帐后的订单状态仍为“待处理”（未付款）。结帐后它不会自动更改状态。我不知道如何使它工作？

3.  支付网关设置中的“PayPal Email”和“Receiver Email”有什么区别？

4.  我必须做些什么才能使 IPN 正常工作吗？

5.  没有向店主发送通知电子邮件...

注意：我的状态`page -> wp_remote_post()`是成功的 - PayPal IPN 正在工作。

提前感谢您的帮助！

[http://wordpress.org/extend/plugins/woocommerce/](http://wordpress.org/extend/plugins/woocommerce/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T11:39:31.483

听起来第 3 部分可能是您的问题。在[文档的 IPN 调试部分中，](http://docs.woothemes.com/document/paypal-standard/#section-6)它具有以下内容：

> ### 检查电子邮件地址
> 
> 检查电子邮件地址（在贝宝网关设置中）是否与 IPN 传回的电子邮件地址匹配。您应该使用您的主要电子邮件地址作为您的贝宝帐户。不这样做将意味着 IPN 响应将被拒绝。

# java - 传输 DataOutputStream

> ID：16128376
> 
> 赞同：0
> 
> 时间：2013-04-21T05:53:08.023
> 
> 标签：java, dataoutputstream

我有一个程序通过套接字将客户端线程连接到电影院。客户传输他的详细信息（客户编号，所需门票）电影院在另一个线程中处理请求，以确保有足够的可用座位。正如您将在代码中看到的那样，我在弄清楚如何从电影院（服务器）向客户端发送反馈时遇到了一个小问题，提供的代码尚未完成，我只是想让您了解一下它的外观. **我的想法是将dataOutputStream传输到cinemaThread，完成后，影院线程将通过流将反馈返回给客户端**，这可能吗？

**客户端**

```
import java.util.Random;
/**
 * this class in designed to define client properties
 * @author David and Adam
 *
 */
public class Client extends Thread{

    private int serialNumber;
    private int NumberOfTickets;
    private String creditNumber;
    private String serverPort;
    private int rowNumber;

    /**
     * full constructor
     * @param serialNumber
     * @param NumberOfTickets
     * @param creditNumber
     */
    public Client(int serialNumber){
        this.serialNumber = serialNumber;
        this.NumberOfTickets = generateTicketNumber();
        this.creditNumber = generateCreditNumber();
        this.rowNumber = -1;
    }

    /**
     * returns a value in the required number of ticket range.
     * @return
     */
    private int generateTicketNumber(){
        return (new Random()).nextInt(Constants.MaxNumberOfTickets-1)+Constants.MinNumberOfTickets;
    }

    /**
     * returns a random credit number constructed of 16 digits.
     * @return
     */
    private String generateCreditNumber(){
        String s = String.valueOf((new Random()).nextInt(9)+1);
        for(int i=0 ; i<16 ; i++){
            s = (new Random()).nextInt()+s;
        }
        return s;
    } 
```

**服务器端**

```
import java.io.DataInputStream;
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

/**
 * an implementation of server side defined as cinema hall
 * @author David
 *
 */
public class Cinema {
    private int[][] cinemaHall;
    private int ticketPrice;
    private int securedPort;
    private int numberOfRequests;

    /**
     * full constructor
     * 
     */
    public Cinema(){
        this.numberOfRequests = 0;
        initializeCinemaHall();
        setTicketPrice();
        setSecuredPort();
    }

    /**
     * initializes cinema hall to 0's
     */
    private void initializeCinemaHall(){
        this.cinemaHall = new int[10][10];
        for(int i=0 ; i<cinemaHall.length ; i++)
            for(int j=0 ; j<cinemaHall.length ; j++)
                this.cinemaHall[i][j] = 0;
    }

    /**
     * generates the ticket price on sale
     */
    private void setTicketPrice(){
        this.ticketPrice = Constants.TicketSalePrice;
    }
    /**
     * sets the secured port 
     * 
     */
    private void setSecuredPort(){
        this.securedPort = Constants.SecuredPort;
    }
        public int[][] getCinemaHall() {
        return cinemaHall;
    }

    public void setCinemaHall(int[][] cinemaHall) {
        this.cinemaHall = cinemaHall;
    }

    public int getTicketPrice() {
        return ticketPrice;
    }

    public void setTicketPrice(int ticketPrice) {
        this.ticketPrice = ticketPrice;
    }

    public int getNumberOfRequests() {
        return numberOfRequests;
    }

    public void setNumberOfRequests(int numberOfRequests) {
        this.numberOfRequests = numberOfRequests;
    }

    /**
     * main function for establishing communication between cinema and customers
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException{
        Cinema cinema = new Cinema();

        ServerSocket server = new ServerSocket(Constants.ServerPort);
        System.out.println("**********Yes Planet server in listening**********");

        // create a connection to clients
        while(cinema.numberOfRequests<Constants.MaxClientNumber){
            try {

                //wait for client
                Socket s = server.accept();
                System.out.println("Client connected to socket");
                // get client info
                DataInputStream dis = new DataInputStream(s.getInputStream());

                String clientInfo = dis.readLine();
                String[] details = clientInfo.split("/");

                try {
                    // parse data to correct type and send data to cinema thread
                    Thread cinemaThread = new CinemaThread(cinema, Integer.parseInt(details[0])
                            , Integer.parseInt(details[1]), details[2]);
                    cinemaThread.start();
                }
                catch (Exception e){
                    System.out.println("An error has occured, client request have been canceled");
                }

            } catch (IOException e) {
                System.out.println("Connection error ");
                e.printStackTrace();
            }

        }
    }
} 
```

**电影院线**

```
public class CinemaThread extends Thread{
    private int clientNumber;
    private Cinema cinema;
    private int requiredTickets;
    private String clientCreditNumber;
    private boolean occupied;
    private int lineNumber;
    private boolean alive;
    /**
     * full constructor
     * @param clientNumber
     * @param cinema
     * @param requiredTickets
     * @param clientCreditNumber
     */
    public CinemaThread(Cinema cinema, int clientNumber, int requiredTickets, String clientCreditNumber){
        this.clientNumber = clientNumber;
        this.cinema = cinema;
        this.requiredTickets = requiredTickets;
        this.clientCreditNumber = clientCreditNumber;
        this.occupied = false;
        this.lineNumber = -1;
        this.alive = true;
    }

    /**
     * the method checks for available seats to each individual required client.
     * in case an available sequence is found, cinema hall is updated with client details and a connection 
     * with the credit company is established forwarding the data needed to proceed.
     */
    public void run(){
        int ticketCount=0;
        int startSeat = -1;
        int endSeat = -1;
        for(int i=0 ; i<cinema.getCinemaHall().length && !occupied; i++){
            for(int j=0 ; j<cinema.getCinemaHall().length && !occupied; j++){
                if(cinema.getCinemaHall()[i][j]>0)
                    ticketCount++;
                else
                    ticketCount=0;
                if(ticketCount == requiredTickets){
                    lineNumber = i;
                    startSeat = j-requiredTickets+1;
                    endSeat = j;
                    occupied=true;
                }
            }
            for(int k=startSeat ;k<=endSeat ; k++)
                cinema.getCinemaHall()[lineNumber][k] = clientNumber;
            }
        if(occupied){
            // connection with credit company

        }
        this.alive = false;
    }
    public boolean status(){
        return this.alive;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T06:05:36.053

您不需要**传输**DataOutputStream。使用`Socket.getOutputStream()`.

**服务器端**

```
public static void main(String[] args) throws IOException{
    // ... ...
    // Socket s = server.accept();
    DataOutputStream dos = new DataOutputStream(s.getOutputStream());
    // ... ...
    Thread cinemaThread = new CinemaThread( /* ... */, dos);
    // ... ...
}

public CinemaThread(/* ... */, DataOutputStream dos){
    // ... ...
    this.dos = dos;
}

public void run(){
    // ... ...
    if(occupied)
        dos.writeBoolean(true);
    else
        dos.writeBoolean(false);
    // ... ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T05:56:56.950

流通常是“出”或“入”的一种方式，因此根据我对问题的阅读，不，不可能对两者都使用一个流。

# ios - 将单元格插入到 uitableview 顶部会导致问题

> ID：16128380
> 
> 赞同：1
> 
> 时间：2013-04-21T05:54:27.420
> 
> 标签：ios, objective-c, uitableview

这让我发疯，我的 . 中有部分`UITableView`，但是当我没有部分时，此插入有效。

基本上我在做：

```
[self.tableView insertRowsAtIndexPaths:array withRowAnimation:UITableViewRowAnimationRight]; 
```

我收到此错误：

> 更新后表视图中包含的节数（5）必须等于更新前表视图中包含的节数（4），加上或减去插入或删除的节数（0插入，0已删除）。

我以为它会起作用，但这没有意义。你们能对此有什么看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:07:05.513

`numberOfSectionsInTableView:`您在发送方法之前和之后从您的方法返回不同的值`insertRowsAtIndexPaths:withRowAnimation:`。

如果您在表格视图中创建一个全新的部分，您必须通过向`insertSections:withRowAnimation:`表格视图发送消息来插入它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T06:50:40.200

每当您`insertRowsAtIndexPaths:withRowAnimation`拨打电话时，您还需要通过类似的添加来修改支持该表的数据源。这确保了在添加之前和添加之后`tableView:numberOfRowsInSection:`返回。除了与您描述的错误一致的结果之外的任何内容。 `n``n+1`

# vba - 如何在 Word VBA 中获取标题 1 之后的列表？

> ID：16128382
> 
> 赞同：1
> 
> 时间：2013-04-21T05:54:38.950
> 
> 标签：vba, ms-word

下面显示了一个很长的文档的模式：

```
<heading1>
<numberedlist>
<heading2>
<numberedlist>
<heading3>
<numberedlist> 
```

当我使用时，`Document.Lists`我会得到文档中的所有列表。当使用我得到所有标题的`Document.Paragraphs`地方进行迭代时 。`Document.Paragraphs(i).Style = "Heading 1"`

但我想要的是紧随“标题1”之后的列表（不是列表的段落）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T07:39:53.793

假设您的文档可能如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/o8Oxk.jpg)

使用这个提议的代码，您将能够选择第一个列表（紧跟在标题之后）和位于标题下方的其他类似列表，但不能选择第二个（标题和列表之间有额外的段落 - 对于这种情况，请参阅代码中的其他注释）。

```
Sub List_after_Heading()

    Dim rngLIST As Range
    Set rngLIST = ActiveDocument.Content

    With rngLIST.Find
        .Style = "Heading 1"   '<--change into your Heading name
        .Forward = True
        .Wrap = wdFindStop
    End With

    Do
        rngLIST.Find.Execute
        If rngLIST.Find.Found Then

            'I assume that list start in NEXT paragraph, if not, it wouldn't be found
            'or you need to change part of line into .Next.Next paragraphs,
            'alternatively some looping would be needed here

            'we check if paragraph next to Heading contains a list
            If rngLIST.Paragraphs(1).Next.Range.ListParagraphs.Count > 0 Then
                'we have the list, but it's not easy to select at once
                Dim iLIST As List
                For Each iLIST In ActiveDocument.Lists
                    If iLIST.Range.Start = rngLIST.Paragraphs(1).Next.Range.Start Then
                        'here we have it... selected
                        iLIST.Range.Select

                        'or any other of your code here
                    End If
                Next
            End If
        End If
    Loop While rngLIST.Find.Found

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T07:47:16.823

我使用书签来识别标题，然后简单地返回它们之间的文本。但我不确定你的意思是什么`But What I want is the List (not paragraph of the list)`

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/Vr8X1.png)

**代码**

```
Option Explicit

Sub Sample()
    Dim MyRange As Range

    Selection.HomeKey Unit:=wdStory

    On Error Resume Next
    ActiveDocument.Bookmarks("MYStartBookMark").Delete
    ActiveDocument.Bookmarks("MYEndBookMark").Delete
    On Error GoTo 0

    '~~> Find Heading 1
    With Selection.Find
        .ClearFormatting
        .Style = ActiveDocument.Styles("Heading 1")
        .Text = ""
        .Replacement.Text = ""
        .Forward = True
        .Wrap = wdFindContinue
        .Format = True
        .Execute
    End With

    '~~> Move one space to the right
    Selection.MoveRight Unit:=wdCharacter, Count:=1

    '~~> Insert the start Book mark
    With ActiveDocument.Bookmarks
        .Add Range:=Selection.Range, Name:="MYStartBookMark"
        .DefaultSorting = wdSortByName
        .ShowHidden = False
    End With

    '~~> Find Heading 2
    With Selection.Find
        .ClearFormatting
        .Style = ActiveDocument.Styles("Heading 2")
        .Text = ""
        .Replacement.Text = ""
        .Forward = True
        .Wrap = wdFindContinue
        .Format = True
        .Execute
    End With

    '~~> Move one space to the left
    Selection.MoveLeft Unit:=wdCharacter, Count:=1

    '~~> Insert the end Book mark
    With ActiveDocument.Bookmarks
        .Add Range:=Selection.Range, Name:="MYEndBookMark"
        .DefaultSorting = wdSortByName
        .ShowHidden = False
    End With

    '~~> Identify the range between the Start BookMark and End BookMark
    Set MyRange = ActiveDocument.Range
    MyRange.Start = MyRange.Bookmarks("MYStartBookMark").Range.End
    MyRange.End = MyRange.Bookmarks("MYEndBookMark").Range.Start

    '~~> This gives you that text
    Debug.Print MyRange.Text

    '~~> Delete the BookMarks
    On Error Resume Next
    ActiveDocument.Bookmarks("MYStartBookMark").Delete
    ActiveDocument.Bookmarks("MYEndBookMark").Delete
    On Error GoTo 0
End Sub 
```

**结果**

![在此处输入图像描述](https://i.stack.imgur.com/cna2d.png)

**其他测试**

有人可能会说，如果我们不知道下一个标题是什么怎么办？这是一个公平的观点，因为我们可以有另外两种情况。让我一起覆盖它们

1.  在标题 1 之后，我们有标题 3
2.  文档中的最后一个标题是标题 1，之后没有标题。

**修改后的代码**

```
Option Explicit

Sub Sample()
    Dim MyRange As Range
    Dim MyArray
    Dim strOriginal As String, strTemp As String
    Dim numDiff As Long, i As Long, NextHd As Long
    Dim NoNextHeading As Boolean

    Selection.HomeKey Unit:=wdStory

    On Error Resume Next
    ActiveDocument.Bookmarks("MYStartBookMark").Delete
    ActiveDocument.Bookmarks("MYEndBookMark").Delete
    On Error GoTo 0

    '~~> Get all the headings in the array
    NoNextHeading = True

    For i = LBound(MyArray) To UBound(MyArray)
        strOriginal = RTrim$(MyArray(i))
        strTemp = LTrim$(strOriginal)
        numDiff = Len(strOriginal) - Len(strTemp)
        numDiff = (numDiff / 2) + 1
        '~~> If heading one is found and it is not the last heading
        '~~> in the array then find what is the next heading
        If numDiff = 1 And i <> UBound(MyArray) Then
            strOriginal = RTrim$(MyArray(i + 1))
            strTemp = LTrim$(strOriginal)
            numDiff = Len(strOriginal) - Len(strTemp)
            numDiff = (numDiff / 2) + 1
            NextHd = numDiff
            NoNextHeading = False
            Exit For
        End If
    Next i

    '~~> Find Heading 1
    With Selection.Find
        .ClearFormatting
        .Style = ActiveDocument.Styles("Heading 1")
        .Text = ""
        .Replacement.Text = ""
        .Forward = True
        .Wrap = wdFindContinue
        .Format = True
        .Execute
    End With

    '~~> Move one space to the right
    Selection.MoveRight Unit:=wdCharacter, Count:=1

    '~~> Insert the start Book mark
    With ActiveDocument.Bookmarks
        .Add Range:=Selection.Range, Name:="MYStartBookMark"
        .DefaultSorting = wdSortByName
        .ShowHidden = False
    End With

    If NoNextHeading = False Then
        '~~> Find Heading NextHd
        With Selection.Find
            .ClearFormatting
            .Style = ActiveDocument.Styles("Heading " & NextHd)
            .Text = ""
            .Replacement.Text = ""
            .Forward = True
            .Wrap = wdFindContinue
            .Format = True
            .Execute
        End With

        '~~> Move one space to the left
        Selection.MoveLeft Unit:=wdCharacter, Count:=1
    Else
        '~~> Move to the end of the document
        ActiveDocument.Characters.Last.Select
        Selection.Collapse
    End If

    '~~> Insert the end Book mark
    With ActiveDocument.Bookmarks
        .Add Range:=Selection.Range, Name:="MYEndBookMark"
        .DefaultSorting = wdSortByName
        .ShowHidden = False
    End With

    '~~> Identify the range between the Start Book Mark and End BookMark
    Set MyRange = ActiveDocument.Range
    MyRange.Start = MyRange.Bookmarks("MYStartBookMark").Range.End
    MyRange.End = MyRange.Bookmarks("MYEndBookMark").Range.Start

    '~~> This give you that text
    Debug.Print MyRange.Text

    '~~> Delete the BookMarks
    On Error Resume Next
    ActiveDocument.Bookmarks("MYStartBookMark").Delete
    ActiveDocument.Bookmarks("MYEndBookMark").Delete
    On Error GoTo 0
End Sub 
```

# sql-server-2008 - 如何在sql server用户定义函数中循环查询结果集？

> ID：16128383
> 
> 赞同：0
> 
> 时间：2013-04-21T05:54:41.833
> 
> 标签：sql-server-2008, user-defined-functions

我想在 sql server 的用户定义函数的查询结果集中应用循环。这是查询：

```
select acc_no, balance from sav_acc_mcg where scheme_id ='001' 
```

这个查询给出了一个否。acc_no 的行数。现在我需要做的是遍历该结果并对结果做一些工作。但问题是遍历查询的结果集。所以帮帮我吧。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:06:36.453

听起来你需要交叉申请。参见@Quasnoi 的博客（搜索“TVF”）：[http ://explainextended.com/2009/07/16/inner-join-vs-cross-apply/](http://explainextended.com/2009/07/16/inner-join-vs-cross-apply/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T06:45:18.823

```
select sum(balance) as Total from sav_acc_mcg where scheme_id ='001' 
```

# java - 如何使 Java 协议缓冲区类型可变？Protoc.exe 不生成设置器？

> ID：16128384
> 
> 赞同：5
> 
> 时间：2013-04-21T05:54:44.263
> 
> 标签：java, protocol-buffers

如何使 Java 协议缓冲区类型可变？

Protoc.exe 不生成设置器？

基本上我需要创建一个对象然后更改一个字段值。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T07:04:01.823

这不是图书馆的预期用途。您将在构建器阶段设置值，然后从构建器创建不可变 DTO。如果您想要不同的值：更改构建器中的值并重新生成 DTO。

或者，请注意有多个库提供对 protobuf 线路规范的支持。IIRC“protostuff”适用于可变 POJO 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T06:55:16.013

我的理解是，你不能用标准的 protoc 工具和标准的生成器插件来做到这一点。

AFAIK，您唯一的选择是编写自己的生成器（或修改现有的生成器）来满足您的需要。

或者，您可以使用“讨厌的”反射技巧来进入对象并以这种方式修改状态。

（为什么觉得创建对象后还需要修改字段值？不能直接在builder里修改字段值`build`再调用吗？）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T09:00:29.380

您可以在仍然希望对象可变的任何地方简单地使用构建器。它们既有 getter 又有 setter。

# android - 关于如何打开现有的android应用程序的困惑

> ID：16128389
> 
> 赞同：1
> 
> 时间：2013-04-21T05:55:22.993
> 
> 标签：android, file

我一直在到处寻找一个多小时来解释如何打开现有项目并按照步骤进行操作，但它不起作用！

如果我将 File -> Import -> Android -> Existing android code into work space，我会得到一个窗口，允许我浏览我的项目，但是当我选择文件夹并单击 ok 时，我无法做任何其他事情。 ..它说无法导入 BeginerApp，因为该项目正在使用中...但是没有任何东西打开！？！我应该选择包含我项目所有内容的文件作为根目录吗？

老实说，我对正在发生的事情一无所知，而且我对 android 编程完全陌生。我试图在android开发网站上做第一个培训教程，然后我关闭了应用程序，现在我想打开它，这样我就可以在我的手机上测试它了……叹息，这是进入Android编程世界的一个艰难的开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:06:57.510

好吧，如果我过去理解你的话，你用“相同”`.Project`文件导入了同一个项目。

要导入您导入的旧项目的副本，请转到您的新项目并编辑`.Project`文件：

```
<projectDescription>
<name>PutHereYourNewName</name>
.... 
```

导入之前的 Eclipse 会检查此文件`projectDescription name`，即使您更改了项目文件夹，Eclipse 也会感觉您尝试导入同一个项目，直到您更改上述文件。

之后，它应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T06:05:01.633

检查工作空间文件夹中的磁盘上是否已经存在项目文件夹。在这种情况下，项目文件在 Eclipse 窗口中不可见，但不允许将它们复制到工作空间中，因为它仍然存在于磁盘上。

如果您仍然遇到问题，最坏的情况是创建一个新工作区，然后导入您的项目。

# node.js - 什么是Procfile？和 Web 和 Worker

> ID：16128395
> 
> 赞同：68
> 
> 时间：2013-04-21T05:56:26.457
> 
> 标签：node.js, mongodb, heroku, procfile

是否有必要在 Procfile 中提供“工人”信息？如果是，那么它实际上是什么？我已经`web: node server/server.js`在`Procfile`.

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-04-21T06:01:54.030

> Procfile 是一种机制，用于声明应用程序的 dyno 在 Heroku 平台上运行的命令。

来自[Process Types 和 Procfile](https://devcenter.heroku.com/articles/procfile)，这是一个很好的介绍，但基本上你使用 Procfile 来告诉 Heroku 如何运行你的应用程序的各个部分。每行冒号左边的部分是进程类型；右边的部分是运行以启动该进程的命令。

进程类型可以是任何东西，虽然很特殊，因为 Heroku 会将 HTTP 请求路由到以该名称`web`开头的进程。`web`其他进程，例如后台工作进程，可以任意命名，您可以使用 Heroku 工具带通过引用其名称来启动或停止这些进程。

因此，简而言之，没有必要，除非您想通过使用[命令](https://devcenter.heroku.com/articles/procfile#scaling-a-process-type)[控制进程](https://devcenter.heroku.com/articles/procfile#scaling-a-process-type)`worker`在后台运行其他进程。[`heroku ps`](https://devcenter.heroku.com/articles/procfile#scaling-a-process-type)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-21T06:01:45.787

`Procfile`如果您计划使用某种后台作业系统（即为以后排队长时间运行的任务），您只需要一个“工人”条目。Heroku 在这里有更多信息：

[https://devcenter.heroku.com/articles/procfile](https://devcenter.heroku.com/articles/procfile)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-08T20:17:22.903

我正在关注有关 Nestjs 和 aws Elastic Beanstalk 部署的 Udemy 课程，但是在我创建 Procfile 之前它一直无法部署：

网络：npm install && npm run-script build && npm run-script start:prod

# solr - 在 Solrping 中过滤结果

> ID：16128399
> 
> 赞同：0
> 
> 时间：2013-04-21T05:56:57.973
> 
> 标签：solr

我想要独特的建议。场景是这样的：

```
Area 
abc
cde
efg
abc
abc 
```

区域字段被索引，ngramed。

现在假设，用户查询是“abc”，那么我在建议中得到了 3 次“abc”。

我听说过字段折叠和分组，但我了解到它只能应用于非 NGRAMED 的字段。

确认了吗？如果是，那么我应该采用什么方法来获得独特的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:20:01.660

检查 Solr [faceting](http://wiki.apache.org/solr/SimpleFacetParameters)，您可以通过它在 Area 字段上进行刻面。还可以使用[facet.prefix](http://wiki.apache.org/solr/SimpleFacetParameters#facet.prefix)查询来过滤以术语开头的术语的结果。这将适用于 ngramed 术语，并返回具有您可以忽略的术语出现计数的唯一术语。

# string - 最长公共前缀属性

> ID：16128400
> 
> 赞同：0
> 
> 时间：2013-04-21T05:57:02.407
> 
> 标签：string, algorithm

我正在研究后缀数组及其用于计算两个后缀的最长公共前缀。

消息来源说：

> “两个后缀之间的 lcp 是阵列上它们之间的所有相邻后缀对中 lcp 的最小值”

即`lcp(x,y)=min{ lcp(x,x+1),lcp(x+1,x+2),.....,lcp(y-1,y) }` 其中 x 和 y 是字符串的两个索引，从字符串的两个后缀开始。

我不相信字符串示例中的陈述`"abca"`。

`lcp(1,4)=1`（考虑基于 1 的索引）

但是如果我应用上面的等式，那么

`lcp(1,4)=min{lcp(1,2),lcp(2,3),lcp(3,4)}`

我认为`lcp(1,2)=0`。

所以答案必须`0`根据方程。

我在某处弄错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T06:04:44.433

我认为源引用的索引不是字符串本身的索引，而是排序后缀的索引。

```
a
abca
bca
ca 
```

因此

```
lcp(1,2) = lcp(a, abca) = 1
lcp(1,4) = min(lcp(1,2), lcp(2,3), lcp(3,4)) = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T06:34:18.207

您无法通过简单地计算数组上它们之间的所有相邻后缀对的 lcp 的最小值来找到任何两个后缀的 LCP。

我们可以在以下帮助下计算任何后缀 (i,j) 的 LCP：

```
LCP(suffix i,suffix j)=LCP[RMQ(i + 1; j)] 
```

还要注意`(i<j)`as`LCP (suff i,suff j)` 不一定相等`LCP (Suff j,suff i)`。RMQ 是**Range Minimum Query** 。

[本文](http://arxiv.org/pdf/1012.4263.pdf)第 3 页。

```
Details: 
```

**步骤1：** 首先计算相邻/连续后缀对的LCP。

n = 字符串的长度。

suffixArray[] 是后缀数组。

```
void calculateadjacentsuffixes(int n)
{
    for (int i=0; i<n; ++i) Rank[suffixArray[i]] = i;
    Height[0] = 0;
    for (int i=0, h=0; i<n; ++i)
    {
        if (Rank[i] > 0)
        {
            int j = suffixArray[Rank[i]-1];
            while (i + h < n && j + h < n && str[i+h] == str[j+h])
            {
                h++;
            }
            Height[Rank[i]] = h;
            if (h > 0) h--;
        }
    }
} 
```

**注意：Height[i]=（后缀 i-1 ,后缀 i）的 LCPs 即。高度数组包含相邻后缀的 LCP。**

**第2步：**

使用 RMQ 概念计算任意两个后缀 i,j 的 LCP。RMQ预计算功能：

```
void preprocesses(int N)
{
    int i, j;

    //initialize M for the intervals with length 1
    for (i = 0; i < N; i++)
        M[i][0] = i;

    //compute values from smaller to bigger intervals
    for (j = 1; 1 << j <= N; j++)
    {
        for (i = 0; i + (1 << j) - 1 < N; i++)
        {
            if (Height[M[i][j - 1]] < Height[M[i + (1 << (j - 1))][j - 1]])
            {
                M[i][j] = M[i][j - 1];
            }
            else
            {
                M[i][j] = M[i + (1 << (j - 1))][j - 1];
            }
        }
    }
} 
```

第三步：计算任意两个后缀 i,j 之间的 LCP

```
int LCP(int i,int j)
{
    /*Make sure we send i<j always */
    /* By doing this ,it resolve following
    suppose ,we send LCP(5,4) then it converts it to LCP(4,5)
    */
    if(i>j)
        swap(i,j);

    /*conformation over*/

    if(i==j)
    {
        return (Length_of_str-suffixArray[i]);
    }
    else
    {
        return Height[RMQ(i+1,j)];
        //LCP(suffix i,suffix j)=LCPadj[RMQ(i + 1; j)] 
        //LCPadj=LCP of adjacent suffix =Height.
    }
} 
```

其中 RMQ 函数为：

```
int RMQ(int i,int j)
{
    int k=log((double)(j-i+1))/log((double)2);
    int vv= j-(1<<k)+1 ;
    if(Height[M[i][k]]<=Height[ M[vv][ k] ])
        return M[i][k];
    else
        return M[ vv ][ k];
} 
```

请参阅RMQ 的**[Topcoder 教程](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lowestCommonAncestor)**。

**[您可以在我的博客](http://riteshkumarnitw.webs.com/mycoderepository.htm)**上查看 C++ 中的完整实现。

# android - Android SlidingMenu 未与 SlidingFragmentActivity 一起显示

> ID：16128402
> 
> 赞同：1
> 
> 时间：2013-04-21T05:57:49.240
> 
> 标签：android, actionbarsherlock, slidingmenu

问题：我的滑动菜单只显示空视图（白色背景）

我使用广泛用于类似 facebook 的菜单的滑动菜单。( [https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu) )

但在我的项目中，滑动菜单不显示任何布局，只显示白色背景。

我之前在其他项目中使用过滑动菜单没有任何问题。

最大的不同是我在我的新项目（和寻呼机适配器）中使用了 actionbarsherlock。

下面是我的主要活动的类定义：

```
public class MainActivity extends SlidingFragmentActivity { 
```

并修改如下滑动菜单库以支持操作栏

```
public class SlidingFragmentActivity extends SherlockFragmentActivity implements SlidingActivityBase { 
```

并在我的主要活动中设置如下滑动菜单：

```
private void setupSlidingMenu(){

    setBehindContentView(myMenu);

    menu = getSlidingMenu();
    menu.setMode(SlidingMenu.LEFT);
    menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_NONE);
    menu.setShadowWidthRes(R.dimen.shadow_width);
    menu.setShadowDrawable(R.drawable.shadow);
    menu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
    menu.setFadeDegree(0.35f);
} 
```

我还用一个 textview 和一个简单的 Fragment 测试了非常简单的布局，但两个试验都显示了相同的结果。

我的项目和滑动菜单库都依赖于 ActionbarSherlock 库。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:14:49.317

我自己解决我的问题。

问题是我在主要活动中使用了以下主题。

```
<style name="WhiteTheme.VPI" parent="Theme.Sherlock.Light"> 
    <item name="vpiTabPageIndicatorStyle">@style/CustomTabPageIndicator</item> 
    <item name="actionBarStyle">@style/WhiteTheme.ActionBarStyle</item> 
    <item name="android:actionBarStyle">@style/WhiteTheme.ActionBarStyle</item>
    <item name="android:background">#ffffff</item> 
</style> 
```

`<item name="android:background">#ffffff</item>`并使整个滑动菜单变白并隐藏每个布局。真的不明白为什么这个属性会隐藏一切。

# c++ - 在 ELF 文件中找不到 .debug_str？

> ID：16128404
> 
> 赞同：0
> 
> 时间：2013-04-21T05:58:32.820
> 
> 标签：c++, gcc, elf

我正在做一个使用 ELF 文件的项目。现在我使用以下作为示例输入 -

```
class C {
public:
    C();
    C(int x, int y);
    int getX();
private:
    int x;
    int y;
};

class SubC : public C {
    int z;
};

int f() {return 0;}

C c;
SubC subC;

int i;
double d; 
```

然后我跑

```
gcc test.cpp -g -c -o test.o 
```

我得到了 test.o 的预期。然后我将 test.o 输入我发现的一个名为[peter-dwarf](https://code.google.com/p/peter-dwarf/)的库中。我的问题是库说“在 test.o 中没有找到 .debug_str 部分”

我在编译过程中做错了吗？还是图书馆不工作？

编辑：应该是 -g 在那里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:02:09.197

在 gcc 中使用`-g`以生成调试符号。您也可以在[此处](http://gcc.gnu.org/onlinedocs/gcc-4.8.0/gcc/Debugging-Options.html#Debugging-Options)参考 gcc 的调试选项文档。

如果您的`-g`系统以某种方式配置，则单独的可能不包含 DWARF 信息。有许多与 DWARF 相关的开关，所以如果`-g`单独不起作用，您可能需要去那里并与其他开关一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T06:01:40.633

可能您需要在启用调试信息的情况下进行编译。尝试：

```
gcc -g test.cpp -c -o test.o 
```

# javascript - How do I remove the javascript blocking from some links?

> ID：16128408
> 
> 赞同：0
> 
> 时间：2013-04-21T05:59:03.203
> 
> 标签：javascript, greasemonkey, tampermonkey

For example, I am trying to change this:

```
<a href="javascript: void(null)" class="jv-redirectCandidate" 
    key="pcxe7gwP"
>Some Name</a> 
```

Into this:

```
<a href="https://www.foo.com/something.aspx?p=pcxe7gwP">Some Name</a> 
```

I need the string "pcxe7gwP" that is currently part of

```
key="pcxe7gwp" 
```

and then I want to attach it to part of a URL

```
https://www.foo.com/something.aspx?p= 
```

and the use that as the `href` in place of the current

```
"javascript: void(null)" 
```

I am using the Tampermonkey Chrome extension and trying to create a userscript to accomplish this. I am new to userscripts and would love any help. Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T06:21:48.060

If I understood right, this is what you are looking for:

```
<html>
<script type="text/javascript">
function changeHREF(element){
    element.href = "https://www.foo.com/something.aspx?p=" + element.key;
}
</script>
<body>
<a href="#" onclick="javascript:changeHREF(this);" class="jv-redirectCandidate" key="pcxe7gwP" id="myId">Some Name</a>
</body></html> 
```

Another possible solution:

```
<html>
<script type="text/javascript">
function changeHREF(){
    elements = document.getElementsByClassName("jv-redirectCandidate");
    for(i = 0; i<elements.length; i++) {
        elements[i].href = "https://www.foo.com/something.aspx?p=" + elements[i].getAttribute("key");
    }
}
</script>
<body onload="javascript:changeHREF()">
<a href="javascript:void(null);" class="jv-redirectCandidate" key="pcxe7gwP">Some Name</a>
</body></html> 
```

Well, there are other solutions to achieve the same results. But, I think that it is out of topic.

Cheers

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T06:46:12.230

Here is **a complete script** that will work in either Tampermonkey or Greasemonkey. It use's [jQuery](http://jquery.com/) for ease and power:

```
// ==UserScript==
// @name     _De-javascript links
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/
//-- Get links with the class "jv-redirectCandidate".
var linksToFix = $("a.jv-redirectCandidate");

//-- Loop through the links
linksToFix.each ( function () {
    var jThis   = $(this);  //-- An individual link
    var key     = jThis.attr ("key");

    jThis.attr ("href", "https://www.foo.com/something.aspx?p=" + key);
} ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T05:05:09.953

Test in Greasemonkey, don't need jquery.

```
// ==UserScript==
// @name        Change link href with it's key
// @namespace   test
// @grant       none
// @version     1
// @include     http://localhost:8000/*.html
// ==/UserScript==

var prefix = 'https://www.foo.com/something.aspx?p=';
var links = document.querySelectorAll('a.jv-redirectCandidate[key]');
for (var i = 0; i < links.length; i += 1) {
    var link = links[i];
    link.href = prefix + link.getAttribute('key');
} 
```

# android - ViewPager 的 instanceiteItem 中的类强制转换异常

> ID：16128410
> 
> 赞同：2
> 
> 时间：2013-04-21T05:59:32.190
> 
> 标签：android, android-fragments, android-viewpager, fragment

我想在 ViewPager 内的片段中设置一些 TextView。我在实例化页面时将我的 TextViews 设置在我的片段的 onActivityCreated 函数中。根据在 getItemPosition 中返回**POSITION_NONE**的一些帖子解决了我的问题，但是因为每次删除所有视图都不是一种有效的方法。所以我将其更改为**instatiateItem(ViewGroup container, int position)**但是当我返回我的 Fragments 的视图时它会抛出：

```
ClassCastException : android.Widget.LinearLayout cannot be cast to android.support.v4.app.Fragment 
```

这是我的 instantiateItem(ViewGroup container, int position) 函数，有人知道我该如何管理这个异常吗？或者如何刷新 ViewPager 内的 Fragment 中的 TextView？提前致谢

```
@Override
    public Object instantiateItem(ViewGroup container, int position) 
    {
        LayoutInflater inflater = (LayoutInflater) mContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        if (position == 3) {
            view = inflater.inflate(R.layout.projecttracking_detail_customerproject_fragment, null);
            ((ViewPager) container).addView(view, 0);
        }
        else if(position == 2) {
            view = inflater.inflate(R.layout.projecttracking_detail_projectinformation_fragment, null);
            ((ViewPager) container).addView(view, 0);
        }

        return view;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:04:47.090

如果您有一个基于片段，`ViewPager`那么您不能覆盖`instantiateItem()`以返回 a`View`因为该返回的对象将被视为`Fragment`稍后处理（异常告诉您什么）。

我不完全理解你想要什么，如果你想从片段更新一些视图（来自所有片段？），那么你可以使用该`POSITION_NONE`选项。

您也可以从 更新当前存储的片段，并在用户向它们滑动时重新创建数据时`ViewPager`让其他查询数据（在 中）。`onCreateView()`对于`FragmentPagerAdapter`您可以使用它来访问当前存储的可见片段：

```
PageFragment pf = (PageFragment) getSupportFragmentManager().findFragmentByTag("android:switcher:" + R.id.theIdOfTheViewPager + ":" + viewPager.getCurrentItem());
pf.updateViews(); 
```

`viewPager.getCurrentItem()`您可以通过使用 -/+1;修改返回的值来获取另外两个存储的片段（可见片段的每一侧都有一个） 。您的片段将需要修改，因此在`onCreateView()`您测试中是否有新数据并使用它。

如果您使用 a `FragmentStatePagerAdapter`，还有一些方法可以获取当前存储的片段。

# python - 使用 python 修复格式错误的 XML

> ID：16128415
> 
> 赞同：3
> 
> 时间：2013-04-21T06:00:25.023
> 
> 标签：python, xml

我有 50 个标签不匹配的 XML 文件，我想使用 python 修复它们。开始标签`<names>`与结束标签不同`</name>`。谁能指导我。

```
 <breakfast_menu>
      <food>
        <names>Belgian Waffles</name>
        <price>$5.95</price>
        <calories>650</calories>
     </food>
    </breakfast_menu> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T06:04:10.860

[`BeautifulSoup`](http://www.crummy.com/software/BeautifulSoup/)做这个：

```
>>> from bs4 import BeautifulSoup
>>> myxml = # Your posted XML
>>> soup = BeautifulSoup(myxml,'xml')
>>> print soup
<?xml version="1.0" encoding="utf-8"?>
<breakfast_menu>
<food>
<names>Belgian Waffles</names>
<price>$5.95</price>
<calories>650</calories>
</food>
</breakfast_menu> 
```

如果您正在寻找`<name></name>`：

```
>>> for i in soup.findAll('names'):
...     i.name = 'name'
...
>>> print soup
<?xml version="1.0" encoding="utf-8"?>
<breakfast_menu>
<food>
<name>Belgian Waffles</name>
<price>$5.95</price>
<calories>650</calories>
</food>
</breakfast_menu> 
```

# android - Android 4.0.3 键盘超出底部显示边框

> ID：16128417
> 
> 赞同：0
> 
> 时间：2013-04-21T06:01:20.610
> 
> 标签：android, view, keyboard

在我自己基于目标和模拟器的 AOSP 构建中，我遇到了 Android 键盘超出底部显示边框的问题。带有空格键的第 4 行仅显示一半，并被屏幕底部边框截断。

在标准的谷歌模拟器上可以看到同样的问题。只需按搜索栏即可重现它。

我正在为模拟器使用 320x480 mdpi 显示布局，例如“3.2”HVGA 滑块 (ADP1) 的预定义定义”

与 Android 4.2.2 一样，这似乎是 Android 4.0.3 的问题，我无法重现它。

这是已知的并且有可用的解决方案吗？

非常感谢任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T19:06:45.220

同时自己找到了解决方案。可能对其他人有用：

请参阅包/输入方法/LatinIME/java/res/values/dimens.xls

Android 4.0.3/4 对 key_preview_backing_height 使用 240dip 高度（最多 6 个预览行，每行 40dip）。连同 40dip 的 more_suggestions_row_height 已经使用了 280dip 的显示。

与状态栏 (~25dip) 一起，具有 320x480 像素的 3.2 英寸显示屏无法提供足够的高度来显示整个键盘。

将预览行数减少到 5 为我解决了这个问题。这会将 key_preview_backing_height 减少到 200dip，并为键盘提供足够的空间。

BR, klo ZwoFünf

# java - java - 如何在java fx中每2秒更新一次标签框？

> ID：16128423
> 
> 赞同：8
> 
> 时间：2013-04-21T06:01:49.740
> 
> 标签：java, swing, javafx-2, javafx

我正在尝试在应用程序 GUI 中模拟基本恒温器。

我想用新的温度值每 2 秒更新一次标签框值。

例如，我的初始温度将显示为 68 度，然后每 2 秒更新到 69、70 等，直到 75。

这是我用 Java fx 编写的一段代码。 `controlpanel`是存在标签框的形式的对象。它仅将最终值更新为 75。它不会每 2 秒更新一次。我写了一个方法 pause 导致 2 秒延迟。所有标签都用它们的最终值更新，但不是每 2 秒更新一次。当我调试时，我可以看到这些值每 2 秒增加一个。这段代码写在按钮 onClick 事件中

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    int i=0;
    Timer asd = new Timer(1000,null);

    asd.setDelay(1000);

    while(i < 10)
    {
         jTextField1.setText(Integer.toString(i));
         i++;

         asd.start();
    }
 } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-21T23:39:33.000

要使用 Timer 解决您的任务，您需要`TimerTask`使用您的代码实现并使用`Timer#scheduleAtFixedRate`方法重复运行该代码：

```
Timer timer = new Timer();
    timer.scheduleAtFixedRate(new TimerTask() {
        @Override
        public void run() {
            System.out.print("I would be called every 2 seconds");
        }
    }, 0, 2000); 
```

另请注意，调用任何 UI 操作必须在 Swing UI 线程（或 FX UI 线程，如果您使用 JavaFX）上完成：

```
private int i = 0;
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    Timer timer = new Timer();
    timer.scheduleAtFixedRate(new TimerTask() {
        @Override
        public void run() {
            SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                    jTextField1.setText(Integer.toString(i++));
                }
            });
        }
    }, 0, 2000);
} 
```

在 JavaFX 的情况下，您需要在“FX UI 线程”而不是 Swing 上更新 FX 控件。实现该使用`javafx.application.Platform#runLater`方法而不是`SwingUtilities`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-22T02:01:03.977

这是使用 JavaFX 动画时间轴而不是计时器的替代解决方案。

我喜欢这个解决方案，因为动画框架确保一切都发生在 JavaFX 应用程序线程上，因此您无需担心线程问题。

![温度探针](https://i.stack.imgur.com/kakW3.png)

```
import javafx.animation.*;
import javafx.application.Application;
import javafx.beans.binding.Bindings;
import javafx.beans.property.*;
import javafx.event.*;
import javafx.scene.*;
import javafx.scene.control.*;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;
import javafx.util.Duration;

import java.util.Random;

public class ThermostatApp extends Application {
  @Override public void start(final Stage stage) throws Exception {
    final Thermostat       thermostat       = new Thermostat();
    final TemperatureLabel temperatureLabel = new TemperatureLabel(thermostat);

    VBox layout = new VBox(10);
    layout.getChildren().addAll(temperatureLabel);
    layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 20; -fx-font-size: 20;");

    stage.setScene(new Scene(layout));
    stage.show();
  }

  public static void main(String[] args) throws Exception {
    launch(args);
  }
}

class TemperatureLabel extends Label {
  public TemperatureLabel(final Thermostat thermostat) {
    textProperty().bind(
      Bindings.format(
        "%3d \u00B0F",
        thermostat.temperatureProperty()
      )
    );
  }
}

class Thermostat {
  private static final Duration PROBE_FREQUENCY = Duration.seconds(2);

  private final ReadOnlyIntegerWrapper temperature;
  private final TemperatureProbe       probe;
  private final Timeline               timeline;

  public ReadOnlyIntegerProperty temperatureProperty() {
    return temperature.getReadOnlyProperty();
  }

  public Thermostat() {
    probe       = new TemperatureProbe();
    temperature = new ReadOnlyIntegerWrapper(probe.readTemperature());

    timeline = new Timeline(
        new KeyFrame(
          Duration.ZERO,
          new EventHandler<ActionEvent>() {
            @Override public void handle(ActionEvent actionEvent) {
              temperature.set(probe.readTemperature());
            }
          }
        ),
        new KeyFrame(
          PROBE_FREQUENCY
        )
    );
    timeline.setCycleCount(Timeline.INDEFINITE);
    timeline.play();
  }
}

class TemperatureProbe {
  private static final Random random = new Random();

  public int readTemperature() {
    return 72 + random.nextInt(6);
  }
} 
```

该解决方案基于以下倒数计时器解决方案：[JavaFX：如何绑定两个值？](https://stackoverflow.com/questions/15746474/javafx-how-to-bind-two-values)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-12T18:09:09.357

通话`Platform.runLater`对我有用：

```
Platform.runLater(new Runnable() {

    @Override
    public void run() {

    }
}); 
```

# mouseevent - KineticJS - 用新的鼠标位置更新文本层

> ID：16128431
> 
> 赞同：1
> 
> 时间：2013-04-21T06:03:37.827
> 
> 标签：mouseevent, kineticjs

我正在使用以下内容来获取鼠标位置：

```
 var coordinate = 0;
............
           canvas1.addEventListener('mousemove', function (evt) {
            var mousePos = getMousePos(canvas1, evt);
            var nY = Math.round(mousePos.y);
            var nX = Math.round(mousePos.x);
            coordinate = "x=" + nX + ", y=" + nY;
            $('#pValue').val(coordinate);
        }, false); 
```

如果我在文本字段中显示值，效果会很好；但是我无法更新文本图层：

```
dlayerA1Text = new Kinetic.Layer();
            var simpleTextRight = new Kinetic.Text({
                x: lOffset + (lOffset * 0.25),
                y: 15,
                text: coordinate,
                fontSize: 12,
                fontFamily: 'Calibri',
                fill: 'white',
                align: 'left'
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T06:23:04.903

**[编辑 - 再次！对不起，我昨晚的回答不完整——我困了！]**

要获取 Kinetic Text 以显示舞台上鼠标移动的坐标……</p>

舞台本身不会发出鼠标事件，但我们可以使用它`stage.getContent`来获取舞台的 DIV，以便我们可以在该 div 上监听鼠标事件：

```
$(stage.getContent()).on('mousemove', function(event){ onMousemove(event)}); 
```

然后在 onMousemove 处理函数中，我们可以得到鼠标在舞台上的坐标：

```
var pos=stage.getMousePosition();
var mouseX=parseInt(pos.x);
var mouseY=parseInt(pos.y); 
```

最后我们更新动力学文本以显示该坐标：

```
simpleTextRight.setText("Mouse: x="+mouseX+", y="+mouseY); 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/KamDV/](http://jsfiddle.net/m1erickson/KamDV/)

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Prototype</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.3-beta.js"></script>

<style>
    #container{ border:solid 1px #ccc; margin-top: 10px; }
    canvas{border:1px solid red;}
</style>        
<script>
$(function(){

        // create a stage and a layer
        var stage = new Kinetic.Stage({
            container: 'container',
            width: 300,
            height: 300
        });
        var layer = new Kinetic.Layer();
        stage.add(layer);

        // a kinetic text object to display coordinates
        var mouseToText=new Kinetic.Text({
            x:20,
            y:30,
            fontFamily:"Arial",
            fontSize:18,
            fill:"blue",
            stroke:null,
            text:"Mouse position"
        });
        layer.add(mouseToText);

        // Start listening to mousemove events
        // The stage does not emit mouse events
        // So stage.getContent() will get a reference to the stage <div>
        // This will let us get mouseevents even on areas not filled with kinetic nodes
        $(stage.getContent()).on('mousemove', function(event){ onMousemove(event)}); 

        // on mousemove...
        // Find the current mouse position
        // Update the kinetic text for the new coordinate
        // And redraw the layer
        function onMousemove(event) {

            // Find the position of the mouse relative to the stage
            var pos=stage.getMousePosition();
            mouseX=pos.x;
            mouseY=pos.y;

            // update the kinetic text with the current coordinate
            mouseToText.setText("Mouse: x="+mouseX+", y="+mouseY);

            // draw the layer with the new text
            layer.drawScene();
        }

}); // end $(function(){});

</script>       
</head>

<body>
    <div id="container"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-31T06:59:08.547

这很有帮助。但是，最新版本的 kinetic.js 不再具有“getMousePosition”，它们使用的是“getPointerPosition”。

这很好，因为我无法让 hand.js 与 kinetic.js 一起工作。看来他们已经想到了。

# arrays - 在两个数组中找到方程的解

> ID：16128433
> 
> 赞同：1
> 
> 时间：2013-04-21T06:03:53.003
> 
> 标签：arrays, algorithm

如果给定两个数组 A 和 B，每个数组都有 n 个正数和等式：

```
x^8 = y^6 + x^2y^2 + 10 
```

设计一个在 nlog(n) 时间内运行的算法，在 A 中找到一个 x，在 B 中找到一个 ay，使得前面的等式成立。

首先要做的是对两个数组进行排序，因为我们稍后要使用二进制搜索，但问题是术语

```
x^2y^2 
```

哪个不能在等式的不同边分开？还是我在这里走错了路？有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T06:15:38.527

首先要注意的是 x 和 y 都具有偶数幂。这意味着，当您进行排序时，您应该按绝对值排序（仍然是 nlogn）。

然后，遍历array1 的每个元素并对数组2 执行二进制搜索。您应该能够执行二进制搜索，因为该函数是单调递增的。这一步是nlogn。

如果您不理解我的回答，我可以详细说明。

让我知道 ：）

# java - 设置理想的线程池大小

> ID：16128436
> 
> 赞同：35
> 
> 时间：2013-04-21T06:04:08.027
> 
> 标签：java, multithreading, concurrency, cpu-cores, processors

有什么区别-

`newSingleThreadExecutor vs newFixedThreadPool(20)`

从操作系统和编程的角度来看。

每当我使用我的程序运行我的程序时，`newSingleThreadExecutor`我的程序运行良好并且端到端延迟（第 95 个百分位）出现`5ms`。

但是，一旦我开始使用-运行我的程序-

`newFixedThreadPool(20)`

我的程序性能下降，我开始看到端到端延迟为`37ms`.

所以现在我试图从架构的角度来理解线程数在这里意味着什么？以及如何确定我应该选择的最佳线程数是多少？

如果我使用更多的线程，那么会发生什么？

如果有人可以用外行语言向我解释这些简单的事情，那对我来说将非常有用。谢谢您的帮助。

我的机器配置规范-我正在从 Linux 机器运行我的程序-

```
processor       : 0
vendor_id       : GenuineIntel
cpu family      : 6
model           : 45
model name      : Intel(R) Xeon(R) CPU E5-2670 0 @ 2.60GHz
stepping        : 7
cpu MHz         : 2599.999
cache size      : 20480 KB
fpu             : yes
fpu_exception   : yes
cpuid level     : 13
wp              : yes
flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good xtopology tsc_reliable nonstop_tsc aperfmperf pni pclmulqdq ssse3 cx16 sse4_1 sse4_2 popcnt aes hypervisor lahf_lm arat pln pts
bogomips        : 5199.99
clflush size    : 64
cache_alignment : 64
address sizes   : 40 bits physical, 48 bits virtual
power management:

processor       : 1
vendor_id       : GenuineIntel
cpu family      : 6
model           : 45
model name      : Intel(R) Xeon(R) CPU E5-2670 0 @ 2.60GHz
stepping        : 7
cpu MHz         : 2599.999
cache size      : 20480 KB
fpu             : yes
fpu_exception   : yes
cpuid level     : 13
wp              : yes
flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good xtopology tsc_reliable nonstop_tsc aperfmperf pni pclmulqdq ssse3 cx16 sse4_1 sse4_2 popcnt aes hypervisor lahf_lm arat pln pts
bogomips        : 5199.99
clflush size    : 64
cache_alignment : 64
address sizes   : 40 bits physical, 48 bits virtual
power management: 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-21T06:14:10.560

行。理想情况下，假设您的线程没有锁定，因此它们不会相互阻塞（彼此独立）并且您可以假设工作负载（处理）是相同的，那么事实证明，池大小`Runtime.getRuntime().availableProcessors()`为`availableProcessors() + 1`最好的结果。

但是，如果线程相互干扰或涉及 I/O，那么 Amadhal 定律可以很好地解释。从维基，

> Amdahl 定律指出，如果 P 是程序可以并行化的比例（即，从并行化中受益），并且 (1 - P) 是不能并行化的比例（仍然是串行的），那么最大加速比可以是通过使用 N 个处理器实现的是

![阿玛达尔法](https://i.stack.imgur.com/SXWue.png)

在您的情况下，根据可用内核的数量，以及它们究竟做了什么工作（纯计算？I/O？持有锁？为某些资源阻塞？等等），您需要提出基于上述的解决方案参数。

例如：几个月前，我参与了从数字网站收集数据的工作。我的机器是 4 核的，我的池大小为`4`. 但是因为操作很纯粹`I/O`，而且我的网速​​也不错，我意识到我在池大小为`7`. 那是因为，线程不是为了计算能力而战，而是为了 I/O。所以我可以利用更多线程可以积极竞争核心的事实。

PS：我建议，通过 Brian Goetz 的书 - Java Concurrency in Practice 中的性能一章。它详细处理了这些问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-21T06:17:06.030

> 所以现在我试图从架构的角度来理解线程数在这里意味着什么？

每个线程都有自己的堆栈内存、程序计数器（如指向下一步执行指令的指针）和其他本地资源。将它们交换出来会损害单个任务的延迟。好处是当一个线程空闲时（通常在等待 i/o 时）另一个线程可以完成工作。此外，如果有多个处理器可用，如果任务之间没有资源和/或锁定争用，它们可以并行运行。

> 以及如何确定我应该选择的最佳线程数是多少？

交换价格与避免空闲时间的机会之间的权衡取决于您的任务看起来像什么的小细节（多少 i/o，何时，在 i/o 之间有多少工作，使用多少内存完全的）。实验永远是关键。

> 如果我使用更多的线程，那么会发生什么？

首先，吞吐量通常会呈线性增长，然后是相对平坦的部分，然后是下降（可能非常陡峭）。每个系统都是不同的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-21T21:48:09.193

查看阿姆达尔定律很好，特别是如果您确切知道 P 和 N 有多大。由于这永远不会真正发生，您可以监控性能（无论如何您都应该这样做）并增加/减少线程池大小以优化对您而言重要的任何性能指标。

# android - ProgressDialog 仅适用于横向（不是纵向）

> ID：16128443
> 
> 赞同：1
> 
> 时间：2013-04-21T06:05:03.377
> 
> 标签：android, android-holo-everywhere

我试图在用户单击图标后弹出一个进度对话框，以便他们知道下一个活动（标签扫描程序）正在启动。问题是只有当手机处于横向并且微调器没有旋转时才会弹出进度对话框。我注意到对话框有时会以纵向弹出，但这种情况很少见，而且通常是失焦的。我无法控制 Tag Scanner 代码（第二个 Activity），因此无法启动进度对话框。这是相关代码，有什么想法吗？我尝试从 onOptionsItemSelected 方法启动进度对话框，但我遇到了同样的问题。我也尝试从 myTask 和相同的问题中启动它。真的在这里迷路了，任何帮助将不胜感激

```
public boolean onOptionsItemSelected (MenuItem item){
switch (item.getItemId()){
      case R.id.menu_scanner:
          ProgressDialog progress = new ProgressDialog(this,R.style.MyDialog);  
          new MyTask(progress).execute();
      break;
}
return false;
}

public class MyTask extends AsyncTask<Void, Void, Void> {
      private ProgressDialog progress;

    public MyTask(ProgressDialog progress) {
        this.progress = progress;
      }

      public void onPreExecute() {
          progress.setMessage("Loading Tag Scanner...");
          progress.show();
          progress.setCancelable(true);

      }

      public void onPostExecute(Void unused) {

          TagContext.getInstance().initialize(APP_KEY, APP_VERSION, getApplicationContext());
          TagContext.getInstance().launchViewfinder(                
                    MainActivity.this,   //Pass the parent activity for the viewfinder
                    listener,       //Pass the listener to use for handling callbacks.
                    null);
          progress.dismiss();             
      }

    @Override
    protected Void doInBackground(Void... arg0) {       
        return null;
    }
    } 
```

# php - 为页面上的动态表单创建拆分选择输入并将值发送到表单

> ID：16128444
> 
> 赞同：0
> 
> 时间：2013-04-21T06:05:08.430
> 
> 标签：php, javascript, jquery, forms

我需要将选择输入分成两部分，以便将一部分用于在同一页面上创建动态表单，将第二部分发送到接收表单。

这就是我现在必须根据选择输入选择动态创建下面的 div：

```
$a = 0;
while ($row = mysql_fetch_array($result)) {
  $people_array[$a] = array(
    "ID"          => $row['ID'],
    "event"       => $row['name'],
    "time_needed" => $row['time_needed'],
  );
$a = $a + 1; 
}
$count = count($people_array);

<form>
<?php for($p=0,$p<$count,p++){
  $segment_id = $people_array[$p][ID]; ?>
  <select name="name_segment" id="name_segment">
    <option value="female" >
      <?php echo $people_array[$p][name]; ?>
    </option>
    <option value="male" >
      <?php echo $people_array[$p][name]; ?>
    </option>
  </select>
<?php } ?>
</form>

<div id="name_segment_female" class="name_segment_input" style="display:none;">
  Allow at least 30 extra minutes for bathroom usage.
</div>
<div id="name_segment_male" class="name_segment_input" style="display:none;">
  No extra bathroom time needed.
</div> 
```

和 javascript

```
<script>
$("#name_segment").change(function() {
  var name_segment = $(this).val();
  $(".name_segment_input").hide();
  $("#name_segment_" + name_segment).show("slow");
});
</script> 
```

在stackoverflow上搜索，我发现[这篇文章](https://stackoverflow.com/questions/3245967/can-an-option-in-select-tag-carry-multiple-values)让我开始这样做：`<option value="{type:'amount',segment_id:'<?php echo $segment_id; ?>'} >`。我只需要知道如何在提交页面之前用 javascript 拆分这个对象。我需要使用选项输入中的相同值作为更具体的值动态显示隐藏的 div，该值将发送到表单的接收页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:22:36.073

首先，为简单起见，我将选项值全部更改为相同的长度。
例如，我将“男性”保持不变，但将女性更改为“fmle”然后我更改了 javascript：

```
$("#name_segment").change(function() {
  var name_segment = $(this).val();
  var local_segment = name_segment.slice(0,4);
  $(".name_segment_input").hide();
  $("#name_segment_" + local_segment).show("slow");
}); 
```

只解析出四个字母部分并使用与原始设计类似的方法。然后我将选项值更改为`<option value="fmle_<?php echo $segment_id; ?>" >`. `segment_id`提交表单后将被解析出服务器端。

如果完全有必要，我们可以做更多的工作，只发送`segment_id`原始问题，但这将达到预期的目标。

# html - 每次页面加载时如何更改html页面的一部分

> ID：16128445
> 
> 赞同：0
> 
> 时间：2013-04-21T06:05:10.630
> 
> 标签：html, css

我正在寻找一种在每次页面加载时更改一段 html 的方法。

例子。

我有三个链接：

```
<a href="http://www.google.com/test1">google test one</a>
<a href="http://www.google.com/test2">google test two</a>
<a href="http://www.google.com/test3">google test three</a> 
```

每次有人加载页面时，链接都会改变。

页面版本 1：

```
<table style="border: 1px solid black"><td>  <a href="http://www.google.com/test1">google test one</a></td></table> 
```

页面版本 2：

```
 <table style="border: 1px solid black"><td>  <a href="http://www.google.com/test2">google test two</a></td></table> 
```

页面版本 3：

```
<table style="border: 1px solid black"><td>  <a href="http://www.google.com/test3">google test three</a></td></table> 
```

有没有办法做到这一点？也许是JavaScript？我只知道html，所以我不太擅长这种事情。我试过在谷歌上搜索，但我不知道要搜索什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T06:30:56.800

记住这种动态行为需要客户端（[javascript](/questions/tagged/javascript "显示标记为“javascript”的问题")）或服务器端（[ruby](/questions/tagged/ruby "显示标记为“红宝石”的问题")、[php](/questions/tagged/php "显示标记为“php”的问题")等）解决方案，实现您想要的最简单的方法是以下方法：

```
var linksList = [
    'http://google.com/',
    'http://stackoverflow.com/',
    'http://slashdot.org/'
    ],
    el = document.getElementById('demo'),
    randomNumber = Math.floor(Math.random() * linksList.length);

el.href = linksList[randomNumber];
el.textContent = linksList[randomNumber]; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/kgGMh/)。

下面稍微复杂一点（它做同样的事情，但使用对象数组为每个链接提供更多可配置选项）：

```
var linksList = [{
    'url': 'http://google.com/',
        'text': 'Google.com'
}, {
    'url': 'http://stackoverflow.com/',
        'text': 'Programming Q&A'
}, {
    'url': 'http://slashdot.org/',
        'text': 'Slashdot: News for Nerds'
}],
    el = document.getElementById('demo'),
    randomNumber = Math.floor(Math.random() * linksList.length);

el.href = linksList[randomNumber].url;
el.textContent = linksList[randomNumber].text; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/kgGMh/1/)。

一个稍微*复杂*一点（尽管此时它变得更易于维护）的方法是开始使用可以在多个项目上调用的函数：

```
function randomiseLinks(el, list) {
    if (!el || !list) {
        return false;
    } else {
        var randomNumber = Math.floor(Math.random() * list.length);
        el.href = list[randomNumber].url;
        el.textContent = list[randomNumber].text;
    }
}

var linksList = [{
    'url': 'http://google.com/',
        'text': 'Google.com'
}, {
    'url': 'http://stackoverflow.com/',
        'text': 'Programming Q&A'
}, {
    'url': 'http://slashdot.org/',
        'text': 'Slashdot: News for Nerds'
}],
    links = document.getElementsByTagName('a');

for (var i = 0, len = links.length; i < len; i++) {
    randomiseLinks(links[i], linksList);
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/kgGMh/3/)。

以下方法具有上述函数方法的优点，但由于它扩展了`Object`原型，这意味着它可以直接在由`document.getElementById()`or `document.getElementsByTagName()`（以及其他）返回的元素或 nodeList 上调用：

```
Object.prototype.randomiseLinks = function (list) {
    var test = this.length,
        that = test ? [] : [this],
        randomNumber;
    if (test){
        for (var i = 0, len = this.length; i < len; i++){
            that[i] = this[i];
        }
    }
    for (var i = 0, len = that.length; i < len; i++){
        randomNumber = Math.floor(Math.random() * list.length);
        that[i].href = list[randomNumber].url;
        that[i].textContent = list[randomNumber].text;
    }
    return this;
};

var linksList = [{
    'url': 'http://google.com/',
    'text': 'Google.com'
}, {
    'url': 'http://stackoverflow.com/',
    'text': 'Programming Q&A'
}, {
    'url': 'http://slashdot.org/',
    'text': 'Slashdot: News for Nerds'
}]; 
```

可以如下调用：

[`document.getElementById('test').randomiseLinks(linksList);`](http://jsfiddle.net/davidThomas/kgGMh/8/)

或者：

[`document.getElementsByTagName('a').randomiseLinks(linksList);`](http://jsfiddle.net/davidThomas/kgGMh/7/)

# assembly - 请帮助我理解这个 nios2 代码

> ID：16128451
> 
> 赞同：0
> 
> 时间：2013-04-21T06:06:28.587
> 
> 标签：assembly, nios

我们为 nios2 提供了一些我不完全理解的[程序集。](http://www.ict.kth.se/courses/IS1500/2012/nios2int/nios2int1main.s)如果我们可以从这条指令开始，那么我不明白它的用途：

`.set noat # required since we push r1`

这是什么意思？我查看了手册，但没有与此匹配的内容。

除了上面的说明之外，我认为我可以理解个别说明，但我仍然无法真正掌握该程序的用途。我们将它与我们的 C 代码一起用于计算机工程课程的实验室练习，现在我有点忘记了代码的作用，我想知道您是否可以提供帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:30:56.773

根据[这篇文章](https://stackoverflow.com/a/7912203/278976)，当用户使用 $at 寄存器时，它会禁用/启用警告。

```
.set noat           # required since we push r1
.macro PUSHMOST
    PUSH  at        # push assembler-temporary register r1
    PUSH  r2
    PUSH  r3
    PUSH  r4 
```

请参阅 PUSH 右侧的评论

根据[这个文件](http://refcards.com/docs/waetzigj/mips/mipsref.pdf)，它：

> 如果后续指令使用 $at，则防止 SPIM 抱怨

# eclipse - 运行我的 Eclipse 插件最终会出现 ClassNotFoundException

> ID：16128453
> 
> 赞同：0
> 
> 时间：2013-04-21T06:06:46.540
> 
> 标签：eclipse, eclipse-plugin, osgi-bundle

我正在尝试开发一个 Eclipse 插件，可以在右键菜单中添加一个动作。我用 plugin.xml 创建了一个 java 项目，并添加了相关的 java 类，该类调用对 java 文件的操作（ActionDelegate）。当我将此代码作为“eclipse 应用程序”运行时，正在调用该类并且一切都按我预期的那样工作。

问题是当我通过 eclipse 将此项目转换为“插件项目”以创建插件，并作为“eclipse 应用程序”再次运行时，然后我在创建的 java 类上得到 ClassNotFoundException。

在将此项目转换为“插件项目”的过程中，eclipse 添加了一个与 OSGI 捆绑包相关的 MANIFEST.MF。如果我删除这个文件 - 一切正常，如果我添加 MANIFEST.MF 文件 - 我再次得到上面的 ClassNotFoundException，所以 MANIFEST.MF 和作为插件的项目表示可能有问题。

此外，当我尝试将此插件导出为“可部署插件和片段”并将其安装到主机存储库中时，我收到以下错误：找不到带有 id 的导出单元：MyReloader 版本：1.0.0.201304210902。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:07:24.017

看起来这是一个eclipse版本问题，或者使用了jre。一旦我切换到不同的 jre，它运行良好

# matlab - matlab中两个以上二进制多项式的最小公倍数（lcm）

> ID：16128458
> 
> 赞同：0
> 
> 时间：2013-04-21T06:07:08.840
> 
> 标签：matlab, binary, lcm

你好考虑二进制数组：

```
 A =
 1     0     0
 0     1     0
 0     0     1
 1     0     1
 1     1     1
 1     1     0
 0     1     1
 1     0     0 
```

我想将此数组的所有奇数行的 lcm 提高到 2x，其中 x = 3。这意味着我需要为第 1、第 3 和第 5 行获取 lcm。

但我需要一个可以应用于 ny x 和 A 的通用代码，因为两者可能不同。（无论 A 和 xi 给出什么，都应该获得 A 的奇数行高达 2x 的 lcm。

# jboss5.x - Jboss 服务器启动问题

> ID：16128460
> 
> 赞同：0
> 
> 时间：2013-04-21T06:07:14.110
> 
> 标签：jboss5.x

我无法启动 Jboss 服务器。

下面一个是错误：org.jboss.deployers.spi.DeploymentException 服务器是：JBoss_5_1_0_GA

完整的日志文件：

```
536)
        at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:228)
        at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtensio
n.java:32)
        at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:521)
        at org.jboss.resource.adapter.jdbc.local.LocalManagedConnectionFactory.g
etLocalManagedConnection(LocalManagedConnectionFactory.java:207)
        ... 126 more
Caused by: oracle.net.ns.NetException: The Network Adapter could not establish t
he connection
        at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:375)
        at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.j
ava:422)
        at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:678)
        at oracle.net.ns.NSProtocol.connect(NSProtocol.java:238)
        at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1054)
        at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:308)
        ... 131 more
Caused by: java.net.ConnectException: Connection timed out: connect
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
        at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
        at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
        at java.net.Socket.connect(Socket.java:529)
        at oracle.net.nt.TcpNTAdapter.connect(TcpNTAdapter.java:209)
        at oracle.net.nt.ConnOption.connect(ConnOption.java:123)
        at oracle.net.nt.ConnStrategy.execute(ConnStrategy.java:353)
        ... 136 more
19:11:48,777 ERROR [StandardContext] Error listenerStart
19:11:48,777 ERROR [StandardContext] Context [/yadweb] startup failed due to pre
vious errors
19:11:48,782 INFO  [[/yadweb]] Closing Spring root WebApplicationContext
19:11:48,814 ERROR [AbstractKernelController] Error installing to Start: name=jb
oss.web.deployment:war=/yadweb state=Create mode=Manual requiredState=Installed
org.jboss.deployers.spi.DeploymentException: URL file:/D:/ProgramFiles/JBoss5YCC
/server/yad/deploy/yadweb.war/ deployment failed
        at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy
Internal(TomcatDeployment.java:331)
        at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy
(TomcatDeployment.java:142)
        at org.jboss.web.deployers.AbstractWarDeployment.start(AbstractWarDeploy
ment.java:461)
        at org.jboss.web.deployers.WebModule.startModule(WebModule.java:118)
        at org.jboss.web.deployers.WebModule.start(WebModule.java:97)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatch
er.java:157)
        at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
        at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
        at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.
java:264)
        at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
        at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java
:206)
        at $Proxy38.start(Unknown Source)
        at org.jboss.system.microcontainer.StartStopLifecycleAction.installActio
n(StartStopLifecycleAction.java:42)
        at org.jboss.system.microcontainer.StartStopLifecycleAction.installActio
n(StartStopLifecycleAction.java:37)
        at org.jboss.dependency.plugins.action.SimpleControllerContextAction.sim
pleInstallAction(SimpleControllerContextAction.java:62)
        at org.jboss.dependency.plugins.action.AccessControllerContextAction.ins
tall(AccessControllerContextAction.java:71)
        at org.jboss.dependency.plugins.AbstractControllerContextActions.install
(AbstractControllerContextActions.java:51)
        at org.jboss.dependency.plugins.AbstractControllerContext.install(Abstra
ctControllerContext.java:348)
        at org.jboss.system.microcontainer.ServiceControllerContext.install(Serv
iceControllerContext.java:286)
        at org.jboss.dependency.plugins.AbstractController.install(AbstractContr
oller.java:1631)
        at org.jboss.dependency.plugins.AbstractController.incrementState(Abstra
ctController.java:934)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:1082)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:984)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractContro
ller.java:822)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractContro
ller.java:553)
        at org.jboss.system.ServiceController.doChange(ServiceController.java:68
8)
        at org.jboss.system.ServiceController.start(ServiceController.java:460)
        at org.jboss.system.deployers.ServiceDeployer.start(ServiceDeployer.java
:163)
        at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.jav
a:99)
        at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.jav
a:46)
        at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.i
nternalDeploy(AbstractSimpleRealDeployer.java:62)
        at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(
AbstractRealDeployer.java:50)
        at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(Deployer
Wrapper.java:171)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(Deployer
sImpl.java:1439)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFi
rst(DeployersImpl.java:1157)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFi
rst(DeployersImpl.java:1178)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.install(Deployers
Impl.java:1098)
        at org.jboss.dependency.plugins.AbstractControllerContext.install(Abstra
ctControllerContext.java:348)
        at org.jboss.dependency.plugins.AbstractController.install(AbstractContr
oller.java:1631)
        at org.jboss.dependency.plugins.AbstractController.incrementState(Abstra
ctController.java:934)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:1082)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:984)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractContro
ller.java:822)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractContro
ller.java:553)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.process(Deployers
Impl.java:781)
        at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeploye
rImpl.java:702)
        at org.jboss.system.server.profileservice.repository.MainDeployerAdapter
.process(MainDeployerAdapter.java:117)
        at org.jboss.system.server.profileservice.repository.ProfileDeployAction
.install(ProfileDeployAction.java:70)
        at org.jboss.system.server.profileservice.repository.AbstractProfileActi
on.install(AbstractProfileAction.java:53)
        at org.jboss.system.server.profileservice.repository.AbstractProfileServ
ice.install(AbstractProfileService.java:361)
        at org.jboss.dependency.plugins.AbstractControllerContext.install(Abstra
ctControllerContext.java:348)
        at org.jboss.dependency.plugins.AbstractController.install(AbstractContr
oller.java:1631)
        at org.jboss.dependency.plugins.AbstractController.incrementState(Abstra
ctController.java:934)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:1082)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:984)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractContro
ller.java:822)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractContro
ller.java:553)
        at org.jboss.system.server.profileservice.repository.AbstractProfileServ
ice.activateProfile(AbstractProfileService.java:306)
        at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(
ProfileServiceBootstrap.java:271)
        at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:
461)
        at org.jboss.Main.boot(Main.java:221)
        at org.jboss.Main$1.run(Main.java:556)
        at java.lang.Thread.run(Thread.java:662)
19:11:48,825 ERROR [AbstractKernelController] Error installing to Real: name=vfs
file:/D:/ProgramFiles/JBoss5YCC/server/Lad/deploy/Ladweb.war/ state=PreReal mode
=Manual requiredState=Real
org.jboss.deployers.spi.DeploymentException: URL file:/D:/ProgramFiles/JBoss5YCC
/server/Lad/deploy/yadweb.war/ deployment failed
        at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy
Internal(TomcatDeployment.java:331)
        at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy
(TomcatDeployment.java:142)
        at org.jboss.web.deployers.AbstractWarDeployment.start(AbstractWarDeploy
ment.java:461)
        at org.jboss.web.deployers.WebModule.startModule(WebModule.java:118)
        at org.jboss.web.deployers.WebModule.start(WebModule.java:97)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatch
er.java:157)
        at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
        at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
        at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.
java:264)
        at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
        at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java
:206)
        at $Proxy38.start(Unknown Source)
        at org.jboss.system.microcontainer.StartStopLifecycleAction.installActio
n(StartStopLifecycleAction.java:42)
        at org.jboss.system.microcontainer.StartStopLifecycleAction.installActio
n(StartStopLifecycleAction.java:37)
        at org.jboss.dependency.plugins.action.SimpleControllerContextAction.sim
pleInstallAction(SimpleControllerContextAction.java:62)
        at org.jboss.dependency.plugins.action.AccessControllerContextAction.ins
tall(AccessControllerContextAction.java:71)
        at org.jboss.dependency.plugins.AbstractControllerContextActions.install
(AbstractControllerContextActions.java:51)
        at org.jboss.dependency.plugins.AbstractControllerContext.install(Abstra
ctControllerContext.java:348)
        at org.jboss.system.microcontainer.ServiceControllerContext.install(Serv
iceControllerContext.java:286)
        at org.jboss.dependency.plugins.AbstractController.install(AbstractContr
oller.java:1631)
        at org.jboss.dependency.plugins.AbstractController.incrementState(Abstra
ctController.java:934)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:1082)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:984)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractContro
ller.java:822)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractContro
ller.java:553)
        at org.jboss.system.ServiceController.doChange(ServiceController.java:68
8)
        at org.jboss.system.ServiceController.start(ServiceController.java:460)
        at org.jboss.system.deployers.ServiceDeployer.start(ServiceDeployer.java
:163)
        at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.jav
a:99)
        at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.jav
a:46)
        at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.i
nternalDeploy(AbstractSimpleRealDeployer.java:62)
        at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(
AbstractRealDeployer.java:50)
        at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(Deployer
Wrapper.java:171)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(Deployer
sImpl.java:1439)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFi
rst(DeployersImpl.java:1157)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFi
rst(DeployersImpl.java:1178)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.install(Deployers
Impl.java:1098)
        at org.jboss.dependency.plugins.AbstractControllerContext.install(Abstra
ctControllerContext.java:348)
        at org.jboss.dependency.plugins.AbstractController.install(AbstractContr
oller.java:1631)
        at org.jboss.dependency.plugins.AbstractController.incrementState(Abstra
ctController.java:934)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:1082)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:984)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractContro
ller.java:822)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractContro
ller.java:553)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.process(Deployers
Impl.java:781)
        at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeploye
rImpl.java:702)
        at org.jboss.system.server.profileservice.repository.MainDeployerAdapter
.process(MainDeployerAdapter.java:117)
        at org.jboss.system.server.profileservice.repository.ProfileDeployAction
.install(ProfileDeployAction.java:70)
        at org.jboss.system.server.profileservice.repository.AbstractProfileActi
on.install(AbstractProfileAction.java:53)
        at org.jboss.system.server.profileservice.repository.AbstractProfileServ
ice.install(AbstractProfileService.java:361)
        at org.jboss.dependency.plugins.AbstractControllerContext.install(Abstra
ctControllerContext.java:348)
        at org.jboss.dependency.plugins.AbstractController.install(AbstractContr
oller.java:1631)
        at org.jboss.dependency.plugins.AbstractController.incrementState(Abstra
ctController.java:934)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:1082)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:984)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractContro
ller.java:822)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractContro
ller.java:553)
        at org.jboss.system.server.profileservice.repository.AbstractProfileServ
ice.activateProfile(AbstractProfileService.java:306)
        at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(
ProfileServiceBootstrap.java:271)
        at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:
461)
        at org.jboss.Main.boot(Main.java:221)
        at org.jboss.Main$1.run(Main.java:556)
        at java.lang.Thread.run(Thread.java:662)
19:11:48,864 ERROR [ProfileServiceBootstrap] Failed to load profile: Summary of
incomplete deployments (SEE PREVIOUS ERRORS FOR DETAILS):

DEPLOYMENTS IN ERROR:
  Deployment "vfsfile:/D:/ProgramFiles/JBoss5YCC/server/Lad/deploy/yadweb.war/"
is in error due to the following reason(s): org.jboss.deployers.spi.DeploymentEx
ception: URL file:/D:/ProgramFiles/JBoss5YCC/server/Lad/deploy/yadweb.war/ deplo
yment failed

19:11:48,873 INFO  [Http11Protocol] Starting Coyote HTTP/1.1 on http-0.0.0.0-968
0
19:11:48,885 INFO  [ServerImpl] JBoss (Microcontainer) [5.1.0.GA (build: SVNTag=
JBoss_5_1_0_GA date=200905221634)] Started in 1m:1s:782ms 
```

请给我一些建议，因为我是 Jboss 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:59:04.370

> 原因：oracle.net.ns.NetException：网络适配器无法建立连接
> 
> 引起：java.net.ConnectException：连接超时：连接

这告诉您原因 - 您无法连接到您的 Oracle 数据库。例如，可能存在网络问题或 oracle 侦听器可能未启动。或者只是数据源配置错误。

# php - PHP MYSQL SET 在 while 循环中给出错误

> ID：16128462
> 
> 赞同：1
> 
> 时间：2013-04-21T06:07:50.380
> 
> 标签：php, mysql, while-loop, set

我有这个查询：

```
$result2 = mysql_query("SET @total=0;
SELECT *,
@total:= @total+ `companyearned` AS `total`
FROM `recordedhours` WHERE `group` = '$uid'
ORDER BY `unixdate` DESC, `idnum` DESC
LIMIT $from, $max_results");

while ($rowb = mysql_fetch_array($result2)) {
//DO STUFF
} 
```

但是 SET @total=0; 使while行给我一个错误：警告：mysql_fetch_array（）：提供的参数不是有效的MySQL结果资源查询在phpmyadmin中工作正常，而没有SET @total = 0的while工作正常；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T06:11:50.070

由于您不能在 中使用多个查询`mysql_query()`，但您可以将两个查询合并为一个。

试试这个查询..

```
SELECT *,
@total:= @total+ `companyearned` AS `total`
FROM `recordedhours`, (SELECT @total:=0) r WHERE `group` = '$uid'
ORDER BY `unixdate` DESC, `idnum` DESC
LIMIT $from, $max_results 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T06:16:02.893

使用两个调用`mysql_query()`：

```
mysql_query("SET @total=0");

$result2 = mysql_query("SELECT *,
@total:= @total+ `companyearned` AS `total`
FROM `recordedhours` WHERE `group` = '$uid'
ORDER BY `unixdate` DESC, `idnum` DESC
LIMIT $from, $max_results"); 
```

我认为该变量应该保持不变，因为它是相同的数据库连接。

# ember.js - 余烬或摊牌：未捕获的类型错误：无法调用未定义的方法“替换”

> ID：16128463
> 
> 赞同：0
> 
> 时间：2013-04-21T06:08:16.693
> 
> 标签：ember.js, showdown

Tom Dayle 的讲座：Ember 简介
[http://www.youtube.com/watch?feature=player_embedded&v=Ga99hMi7wfY](http://www.youtube.com/watch?feature=player_embedded&v=Ga99hMi7wfY)

我同时使用了 github.com/cmoel/tom_dale_ember_screencast github.com/cmoel/tom_dale_ember_screencast 和
github.com/jielimanyili/tom-dale-screencast_building-an-app-with-ember-js_code

在 Chrome 开发中： 未捕获的**类型错误：**无法调用未定义的方法“替换”（showdown.js:62）
如果我从模板中删除“markdown”的使用.. 应用程序有效。

在 FireBug 中： **a 未定义**（showdown.js：62）

不确定是 Ember 还是 Showdown 导致了这种情况。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T11:25:43.857

我也关注了 Tom Dale 的 youtube 视频，并且似乎只有当我在 #/posts/1（posts/post 路线）上刷新页面时才会出现此错误。

我设法通过跳过 registerBoundHelper 中的摊牌转换来解决这个问题，如下所示：

```
var showdown = new Showdown.converter();
Ember.Handlebars.registerBoundHelper('markdown', function(input) {

  // Add this part
  if (typeof input == 'undefined')  return;

  return new Ember.Handlebars.SafeString(showdown.makeHtml(input));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:40:08.107

我认为您会...有点生气...我认为这只是一个错字...在您引用的模板中`{{extended}}`，但是在固定装置中，属性是`extentded`. 所以很明显 Showdown 插件会抱怨，因为你试图将它与 undefined 一起使用。

[http://jsfiddle.net/Sly7/7vfLD/7/](http://jsfiddle.net/Sly7/7vfLD/7/)

# c++ - 并行 std::lists，根据列表 B 中项目的状态删除列表 A 中的项目？

> ID：16128464
> 
> 赞同：0
> 
> 时间：2013-04-21T06:08:17.007
> 
> 标签：c++, stdlist

我将如何完成以下任务？

> 列表 A 是一系列`Foo`s，列表 B 是一系列`double`s，表示直到移除列表 A 的第 th 位置的剩余`Foo`时间`i`。也就是说，如果列表 B 中的双精度数小于零，则列表 A 中与列表 B 中小于零的`Foo`双精度数相同的位置从列表 A 中删除，然后小于零的双精度数从列表 B 中删除.

```
List A:
A B C D E

List B (in seconds):
1.0 0.33 0.0 5.0 0.01

//1 tick of 0.33 seconds

List B:
0.67 0.0 -0.33 4.67 -0.32

//Remove offending List A elements based on state of List B
List A:
A B D

//Remove invalid List B elements
List B:
0.67 0.0 4.67 
```

我正在考虑类似于`std::remove_if`List B 的内容，但是如果我这样做，我将如何删除 List A 的项目？可悲的是，不同列表的迭代器不兼容，并且除了使用手动实现之外，没有办法遍历列表并知道每个值的索引。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T06:13:01.193

您可能需要考虑使用结构列表而不是两个列表。然后你可以使用 remove_if 和其他列表函数。

# jquery - 在加载检查一些子节点的树时部分选择父节点

> ID：16128468
> 
> 赞同：1
> 
> 时间：2013-04-21T06:09:11.300
> 
> 标签：jquery, jstree

我正在使用具有三种状态的 jstree 复选框 - 已选中、未确定和未选中。当我检查父节点时，子节点会自动检查。当我选择一个子节点时，父节点被部分选中。我已在数据库中将已检查、未确定的状态保存为 1，未选中状态保存为 0。

```
$('#btnSubmit').bind('click', function (e) {
    e.preventDefault();
    var checked_ids = [];
    $('.jstree-checked, .jstree-undetermined').each(function () {
        var id = $(this).children('a').attr('id');
        checked_ids.push(id);
    });

    $.ajax({
        url: '@Url.Action("Action", "Controller")',
        type: 'POST',
        traditional: true,
        data: { AccessIds: checked_ids },
        success: function () {
            checked_ids.length = 0;
            alert('success!');
        },
        error: function () {
            alert('Error!');
        }
    });
    return false;
}); 
```

现在我想以三态加载树。如果选择了孩子，我如何部分选择父母。我正在做这样的事情：

```
$(function () {
    $('.divchkboxtree #divtree').jstree({
        "plugins": ["themes", "html_data", "checkbox", "sort", "ui"]
    })
    .bind('loaded.jstree', function () {
        $('.Node').each(function () {
            var id = $(this).attr('id');
            $('.divchkboxtree #divtree').jstree("check_node", '#' + id);
        });
    })
}); 
```

这里 '.Node' 类保存检查的 id。现在，当我加载树时，问题是检查了所有节点，因为我已将部分选择的值保存为 1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T04:05:04.433

最后我得到了答案。我从后端维护它。`Object`如果它是父母，我有一个为空的字段。所以我所做的是提取不是父级的数据，即我提取了那些`IsSelected is 1 i.e. true`最终上述代码有效的子级。上面的代码没有变化。

# linux - 如何使用 AWK 从 Web 日志中收集 IP 和用户代理信息？

> ID：16128472
> 
> 赞同：4
> 
> 时间：2013-04-21T06:09:57.143
> 
> 标签：linux, ubuntu, sed, awk, log-analysis

我有一个日志文件，其中包含如下文本：

```
66.249.74.18 - - [21/Apr/2013:05:55:33 +0000] 200 "GET /1.jpg HTTP/1.1" 7691 "-" "Googlebot-Image/1.0" "-"
220.181.108.96 - - [21/Apr/2013:05:55:33 +0000] 200 "GET /1.html HTTP/1.1" 17722 "-" "Mozilla/5.0 (兼容;百度蜘蛛/2.0; +http:// /www.baidu.com/search/spider.html)" "-"

```

我想将所有 ip 和用户代理信息收集到一个文件中：

```
66.249.74.18“谷歌机器人图像/1.0”
220.181.108.96 "Mozilla/5.0（兼容；Baiduspider/2.0；+http://www.baidu.com/search/spider.html）"

```

我怎么能用awk做到这一点？

我知道`awk '{print $1}'`可以列出所有 ip 并且`awk -F\" '{print $6}'`可以列出所有用户代理，但我不知道如何将它们组合成输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:43:29.550

```
awk -F' - |\\"' '{print $1, $7}' temp1 
```

输出：

```
66.249.74.18 Googlebot-Image/1.0
220.181.108.96 Mozilla/5.0 (compatible;Baiduspider/2.0;+http://www.baidu.com/search/spider.html) 
```

temp1 文件：

```
66.249.74.18 - - [21/Apr/2013:05:55:33 +0000] 200 "GET /1.jpg HTTP/1.1" 7691 "-" "Googlebot-Image/1.0" "-"
220.181.108.96 - - [21/Apr/2013:05:55:33 +0000] 200 "GET /1.html HTTP/1.1" 17722 "-" "Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)"     "-" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T07:00:50.020

```
awk '{print $1,$6}' FPAT='(^| )[0-9.]+|"[^"]*"' 
```

*   定义一个字段为
    *   从行首或空格开始
    *   其次是`[0-9.]+`或`"[^"]*"`
*   然后打印字段 1 和 6

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T10:16:51.943

一种不使用 GNU 扩展的可移植方法：

```
awk '{printf "%s ",$1;for(i=12;i<NF;i++)printf "%s ",$i;printf "\n"}' file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-19T04:35:19.997

使用`perl`：

```
perl -nle '/^((?:\d+\.?){4})(?:.+?"){4}\s+(".*?")/ && print "$1 $2"' access_log 
```

诀窍在于计算*不是双引号 + 双引号的字符*: `(?:.+?"){4}`。这是正则表达式的直观描述：[https ://regex101.com/r/xP0kF4/4](https://regex101.com/r/xP0kF4/4)

正则表达式比以前的答案更复杂，但我们可以*轻松*解析其他属性。

# java - 尝试添加到 List 时出现 UnsupportedOperationException，仅当不强制转换为 Arraylist 时

> ID：16128474
> 
> 赞同：-2
> 
> 时间：2013-04-21T06:10:20.423
> 
> 标签：java, arraylist

尝试添加到列表时出现奇怪的 UnsupportedOperationException。

我的代码如下：

```
if( map.containsKey(c)){
    map.get(c).add(b);
} else {
    temp = new ArrayList<MyClass>();
    temp.add(b);
    map.put(c, temp);
} 
```

List 是一个以 List 作为值的 HashMap。

当我运行这个自然循环迭代的代码时，我得到一个 UnsupportedOperation 异常。

如果我将其更改为：

```
List<ArrayList> list = (ArrayList<MyClass>) map.get(c);
list.add(b); 
```

我没有例外。

谁能解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:21:59.633

你所描述的*似乎*是不可能的。

类型转换`List<ArrayList> list = (ArrayList<MyClass>) map.get(c);`应该对调用时调用的方法没有影响`add`。这不是方法覆盖的工作原理！（只有一种`add`方法带有一个参数，因此您不能使用该类型转换影响重载决议。）

`add`同样，在您可以投射到的列表上`ArrayList`throw也没有任何意义`UnsupportedOperationException`。（理论上是可能的......但你需要创建一个子类`ArrayList`才能发生这种情况。而且你肯定知道你已经做到了......并且你会告诉我们！）

我能想到的最好的解释是：

*   类型转换失败并出现异常（这是我所期望的......因为我的猜测是你在这里有一个“不可修改”的包装类），并且
*   您没有注意到该异常，因为它被“压扁”了。

（其他可能的解释是您误读了堆栈跟踪，您正在运行尚未正确重建的“陈旧”代码等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T06:12:50.507

在进行添加调用之前，您需要将 Map 值类型转换为 ArrayList，例如`((ArrayList<MyClass>)(map.get(c))).add(b);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T06:17:27.060

在定义`List`of 时`Map`，将其定义为

```
List<Map<String, ArrayList<MyClass>>> 
```

代替

```
List<Map<String, List<MyClass>>> 
```

**或者**

类型转换`List`到`ArrayList`

```
((ArrayList<MyClass>)map.get(c)).add(b); 
```

并非每个`List`实现都支持该`add()`方法。请参阅[List#add() API](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#add%28E%29)文档，其中明确指出**UnsupportedOperationException** -*如果此列表不支持添加操作*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T06:28:43.670

改变：

```
map.get(c).add(b); 
```

至：

```
System.out.println(map.get(c).getClass());
map.get(c).add(b); 
```

它真的是您拥有的 ArrayList 吗？

# javascript - 烧瓶无法读取静态路径并加载 Javascript 文件

> ID：16128482
> 
> 赞同：3
> 
> 时间：2013-04-21T06:11:55.373
> 
> 标签：javascript, python, flask

我的应用程序结构是

```
project/
       configuration/__init__.py
       core/
       static
             /app
                 /css
                 /img
                 /js/app.js
                 /lib/angular/angular.js
                 /partials
             index.html 
```

我的文件`configuration/__init__.py`有

```
# setting up template directory
TEMPLATE_DIR = os.path.join(os.path.dirname(os.path.abspath(__file__)), '../static/app')

app = Flask(__name__, template_folder=TEMPLATE_DIR, static_folder=TEMPLATE_DIR) 
```

当我加载页面`localhost/index.html`时，我看到 javascript 错误为

```
GET http://127.0.0.1:5000/js/app.js 404 (NOT FOUND) home:8
GET http://127.0.0.1:5000/lib/angular/angular.js 404 (NOT FOUND) home:8 
```

即使我知道这些文件在那里，我猜 static_folder 无法找到这些文件，我在这里做错了什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T06:20:03.150

我通过放入相对网址来修复它`index.html`

**配置/_*初始化*_.py**

```
# setting up template directory
ASSETS_DIR = os.path.join(os.path.dirname(os.path.abspath(__file__)), '../static/app')

app = Flask(__name__, template_folder=ASSETS_DIR, static_folder=ASSETS_DIR) 
```

**索引.html**

```
 <script src="../app/lib/angular/angular.js"></script>
  <script src="../app/js/app.js"></script> 
```

# .htaccess - 在 htaccess rewrite 中重复变量

> ID：16128483
> 
> 赞同：0
> 
> 时间：2013-04-21T06:12:02.767
> 
> 标签：.htaccess, mod-rewrite

我有一个需要修改的 htaccess。我的网站能够在一个 URL 中显示多个类别，以便可以同时向用户显示不同类别的项目。例如 domain.com/fans.php?cat[]=1&cat[]=2&cat[]=3

为了使这个 URL 友好，我在我的 htaccess 中添加了一行用于 1 类别，另一行用于 2 类别，另一行用于 3 类别等等。如下所示

```
RewriteRule ^fans/category/([a-zA-Z0-9\-]+)$ fans.php?cat=$1 
```

**以上将变为 domain.com/fans/category/1**

```
RewriteRule ^fans/category/([a-zA-Z0-9\-]+)&([a-zA-Z0-9\-]+)$ fans.php?cat[]=$1&cat[]=$2 
```

**以上将变为 domain.com/fans/category/1&2**

```
RewriteRule ^fans/category/([a-zA-Z0-9\-]+)&([a-zA-Z0-9\-]+)&([a-zA-Z0-9\-]+)$ fans.php?cat[]=$1&cat[]=$2&cat[]=$3 
```

**以上将变为 domain.com/fans/category/1&2&3**

我的问题是，如果我需要显示 4 个类别甚至 10 个类别怎么办？有没有办法简化 htacesss 中的重写规则，允许 n 次类别组合？还是我必须像上面所做的那样不断重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T07:30:53.687

只要有足够多的可选正则表达式组，就可以有一个规则，并且空键 ( `cat[]=`) 不是问题。最多 3 个参数的示例：

要求：`http://example.com/fans/category/1&2&3`

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteRule ^fans/category/([^&]+)&?([^&]+)?&?([^&]+)?$ /fans.php?cat1=$1&cat2=$2&cat3=$3 [L,NC] 
```

但是，当有很多参数时，使用单个重写规则将带有参数的完整 URI 路径传递给脚本会更好、更通用。像这样：

```
RewriteRule ^fans/category/(.*) /fans.php?$1 [L,NC] 
```

并使用类似于此的代码获取脚本中的参数：

```
<?php 
$Query = $_SERVER['QUERY_STRING'];
$Parameters = explode ('&', $Query);
echo "cat1 = ". $Parameters[0] . "<br />";
echo "cat2 = ". $Parameters[1] . "<br />";
echo "cat3 = ". $Parameters[2] . "<br />";
...
?> 
```

有几种方法可以在 php 中实现相同的结果，也许有更好的方法，这只是一个示例。

# android - 如何从 Android 调用 web2py 控制器？

> ID：16128484
> 
> 赞同：0
> 
> 时间：2013-04-21T06:12:10.063
> 
> 标签：android, web2py

我确切地知道 MVC 模式如何与 web2py 一起工作，以及视图如何在“浏览器”上呈现。

我现在想在 Android 项目上渲染视图。例如，我有我的 Andriod 应用程序，它需要一个用户名（电子邮件）、密码，并且我想使用 web2py 框架（auth）来验证凭据。我可以很容易地使用浏览器作为视图来完成上述操作。

对于 Andriod 应用程序，我正在努力使其正确。如何将控制器（或控制器功能）暴露给 Andriod 设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T06:15:53.363

您只是不能将控制器暴露给 Android。但是您可以做的是在 web2py 上构建 REST Web 服务以使用身份验证模块，并从 Android 应用程序调用 Web 服务。

# java - 处理数据存储最终一致性的技术

> ID：16128486
> 
> 赞同：3
> 
> 时间：2013-04-21T06:12:11.947
> 
> 标签：java, google-app-engine, nosql

GAE 的现有持久性框架，如*Objectify*、*Datanucleus*、*Twig*等，如何处理数据存储的“最终一致”性质？

我正在使用`DatastoreService`层中的数据存储（我现在没有使用这样的持久性框架）。

在我的单元测试期间，我有时会得到正确的对象计数，有时不会。这是预期的。

这是我的 JUnit 助手配置：

```
private final LocalServiceTestHelper helper =
    new LocalServiceTestHelper(new LocalDatastoreServiceTestConfig()
        .setDefaultHighRepJobPolicyUnappliedJobPercentage(50)); 
```

现在，即使我已将 put/get 方法放置在重试的 do-while 循环中（重试次数为 4），它仍然会错过 put/get 实体。

那么现在，对于那些指定的框架，他们是否能够保证如果我放置 3 个对象，我将得到 3 个对象？如果是这样，它是如何实施的？

我唯一能想到的就是使用 Memcache，也就是说，我的方法会首先尝试从中获取实体，如果它错过了，它会检查数据存储区。这是一种合理的方法，还是有更好的方法或正确的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:34:22.233

如果您想要查询的强一致性，那么有两种选择：

1.  ) 使用 [祖先](https://developers.google.com/appengine/docs/python/datastore/queries#Ancestor_Queries) 查询。

2.  ) 使用[数据存储获取](https://developers.google.com/appengine/docs/python/datastore/usingmasterslave) 操作而不是查询，它们是强一致的。

如果您仔细构造键名，通常可以使用获取而不是查询。如果您需要查询以使给定用户“显示”一致，您的另一个选择是应用一个小技巧：将用户更改注入结果中。因此，如果他们更改了姓名并且您重定向到他们的个人资料页面，请在发送之前将他们的更改注入结果中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T08:00:29.510

Objectify 不**以**任何方式、形状或形式处理最终的一致性。作为开发人员，您在使用 Objectify 或任何其他库时必须牢记这一点。

围绕查询的 do/while 循环或添加 wait() 无法保证强一致性。充其量你会增加获得最新结果的可能性，但这还远不能确定。

Memcache 在这里也没有真正提供任何保证，因为它是不可靠的存储。memcache put() 函数作为 NO-OP 是完全合法的，即什么也不做。

为了解决您的核心问题，您需要以使用强一致性的方式设计您的应用程序。因此，您可以使用高度一致的数据存储读取操作，例如获取或祖先查询。或者您可以通过 HTTP 传递一些数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T15:00:28.567

如果您需要 Objectify 中的强一致性，那么您可以执行祖先查询，[请参阅本文以获取解释和示例](https://developers.google.com/appengine/docs/java/datastore/structuring_for_strong_consistency)。但是，这比最终一致的查询更昂贵，因此尽可能支持最终一致的查询。

# jquery - 获取两个日期日期选择器和手动选择之间的天数

> ID：16128488
> 
> 赞同：1
> 
> 时间：2013-04-21T06:12:40.293
> 
> 标签：jquery, jquery-ui

我正在尝试计算 2 个日期选择器字段之间的天数，并在输入字段中显示该值。

如何获取两个日期日期选择器和手动选择之间的天数？

本工作手册仅选择：

```
$(function() {
$("#arrdatepicker").datepicker({
    showOn: "button",
    buttonImage: "calendar-ico.gif",
    buttonImageOnly: true,
    onSelect: function(dateText, inst) {
        //dateText comes in as MM/DD/YY
        var datePieces = dateText.split('/');
        var month = datePieces[0];
        var day = datePieces[1];
        var year = datePieces[2];
        //define select option values for
        //corresponding element
        $('select#arrmonth').val(month);
        $('select#arrday').val(day);
        $('select#arryear').val(year);

    }
});
$("#depdatepicker").datepicker({
    showOn: "button",
    buttonImage: "calendar-ico.gif",
    buttonImageOnly: true,
    onSelect: function(dateText, inst) {
        //dateText comes in as MM/DD/YY
        var datePieces = dateText.split('/');
        var month = datePieces[0];
        var day = datePieces[1];
        var year = datePieces[2];
        //define select option values for
        //corresponding element
        $('select#depmonth').val(month);
        $('select#depday').val(day);
        $('select#depyear').val(year);

    }
});
});

function dateDifference() {
    var ev,honap,nap;
    var datDate1 = new Date();
    var datDate2 = new Date();
    var napok;
    ev = document.booking.arrivalyear.value;
    honap = document.booking.arrivalmonth.value-1;
    nap = document.booking.arrivalday.value;
    datDate1.setFullYear(ev,honap,nap);
    ev = document.booking.departureyear.value;
    honap = document.booking.departuremonth.value-1;
    nap = document.booking.departureday.value;
    datDate2.setFullYear(ev,honap,nap);
    napok = Math.floor((datDate2-datDate1)/(24*60*60*1000));
    document.getElementById('label').innerHTML=napok+" nights";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T07:20:45.890

```
function dateDifference() {
    // check if both is not empty
    if($("#depdatepicker").val()=='' || $("#depdatepicker").val()=='') return;

    var diff = ($("#depdatepicker").datepicker("getDate") - 
                $("#arrdatepicker").datepicker("getDate")) /
               1000 / 60 / 60 / 24; // days
    $('#label').html(diff+" nights");
} 
```

获取两个日期，从到达中减去 dep，得到毫秒数差异。

除以 1000 毫秒、60 秒、60 分钟、24 小时 - 你得到天数。

[http://jsfiddle.net/samliew/5SCM5/9/](http://jsfiddle.net/samliew/5SCM5/9/)

# java - 如何显示两个对象相邻？

> ID：16128494
> 
> 赞同：-4
> 
> 时间：2013-04-21T06:14:14.943
> 
> 标签：java

我今天早些时候问过这个问题，但答案对我的问题没有帮助。以为我可以再次询问更新并希望更接近解决我的问题。

我如何证明 Q 与 X 相邻，R 与 X 相邻（也），P 与 R 相邻，等等……？文本文件

```
Q   X
R   X
P   R
P   W
W   S
S   T
T   W
W   Y
Y   R
Y   Z 
```

所以它会打印到屏幕上：

```
Q is adjacent to X
R is adjacent to X
P is adjacent to R (tab or spaces) W
etc etc etc 
```

读取文件并将它们存储到两个不同的 ListArray 中的代码段

```
 while (theFlightFile.hasNext()) {
        String cityFrom = theFlightFile.next();
        String cityTo = theFlightFile.next();
        City cityA = new City(cityFrom);
        City cityB = new City(cityTo);

        cityToList.add(cityA);
        cityFromList.add(cityB);
        //testing input reading...
        //System.out.println(cityFrom + " -----> " + cityTo);
    }

/**
 * Displays to the screen, a list of all cities served by the airline
 * along with the names of cities to which each is adjacent.
 */
public void displayFlightMap() {
    int i = 0;
    while (!cityStack.isEmpty() && topCity.equals(destinationCity)) {
        displayAdjacentCities(cityFromList.get(i));
        i++;
    }
}

/**
 * Displays to the screen, the names of all cities which are are adjacent
 * to aCity; aCity is assumed to be a valid city served by the airline.
 * @param aCity The city for which the adjacency list is desired.
 */
public void displayAdjacentCities(City aCity) {
    String str = "";
    for (City cityA : cityToList) {
        for (City cityB : cityFromList) {
            if (cityA != cityB) {
                str = cityA + " is adjacent to " + cityB;
            }
        }
        System.out.println(str);
    }
} 
```

打印的内容看起来像 cityToList 打印 10 次，并且都说它与“Z”相邻

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:49:05.867

@trama
如果您有兴趣，这里是使用`HashMap`.

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Set;
import java.util.logging.Level;
import java.util.logging.Logger;

public class TestAdj {

    HashMap<String, ArrayList<String>> map;

    public TestAdj() {
        BufferedReader br = null;

        try {
            br = new BufferedReader(new FileReader("input.txt"));
            map = new HashMap<String, ArrayList<String>>();
            String line = null;
            while ((line = br.readLine()) != null) {
                String[] set = line.split("\t");
                if (map.containsKey(set[0])) {
                    map.get(set[0]).add(set[1]);
                } else {
                    ArrayList lst = new ArrayList<String>();
                    lst.add(set[1]);
                    map.put(set[0], lst);
                }
            }
        } catch (Exception ex) {
            Logger.getLogger(TestAdj.class.getName()).log(Level.SEVERE, null, ex);
        } finally {
            try {
                br.close();
            } catch (IOException ex) {
                Logger.getLogger(TestAdj.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }

    public void displayAdj() {
        Object[] sources=map.keySet().toArray();

        for (int i = 0; i < sources.length; i++) {
            System.out.print(sources[i]+" -->");
            System.out.println(map.get(sources[i]));
        }
    }

    public static void main(String[] args) {
        new TestAdj().displayAdj();
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-21T06:56:14.170

您尝试使用某种地图来存储您的列表怎么样？

```
// Storing the cities:
HashMap<City, LinkedList<City>> cityList = new HashMap<City, LinkedList<City>>();
String cityFrom = theFlightFile.next();
String cityTo = theFlightFile.next();
City cityA = new City(cityFrom);
City cityB = new City(cityTo);

LinkedList<City> currentFollowers;
if (!cityList.containsKey(cityA)) {
     currentFollowers = new LinkedList<City>();
     cityList.put(cityA, currentFollowers);
} else {
     currentFollowers = cityList.get(cityA);
}

currentFollowers.add(cityB);
cityList.put(cityA, currentFollowers);

// For the output you could still use a String:
public void displayAdjacentCities(City aCity) {
     String output = aCity + " is adjacent to";
     for(City cityTo : cityList.get(aCity)) {
          output += " " + cityTo;
     }
     System.out.println(output);
}

// and your displayFlightMap-Method could look like:    
for(City from : cityList.keySet()) {
    displayAdjacentCities(from);
} 
```

# c# - 如何在 c# Visual Studio 中创建 UPDATE 语句并访问

> ID：16128495
> 
> 赞同：0
> 
> 时间：2013-04-21T06:14:15.577
> 
> 标签：c#, visual-studio, ms-access, visual-studio-2012

我试过以下代码：

```
OleDbConnection My_Connection = new OleDbConnection("Provider=Microsoft.Jet...
My_Connection.Open();
string sql = " UPDATE Rooms SET [Room Status] = 'Taken', [Available] = 'No' WHERE [RoomNumber] = " + textBox5.Text;
OleDbCommand My_Command = new OleDbCommand(sql, My_Connection);
My_Command.ExecuteNonQuery();
My_Connection.Close(); 
```

错误是：标准表达式中的数据类型不匹配

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T07:31:38.927

如上面的评论所示，该`Available`字段是“是/否”，因此您不能`'No'`在其中存储字符串。

因此，解决方案是使用“`-1`是”和`0`“否”的值。没有引号。

注意：不建议使用评论中的解决方法来更改数据库本身的列类型。

另一件事是通过使用变量的参数而不是直接使用用户输入来避免 SQL 注入的可能性。所以最终的代码变成了

```
OleDbConnection My_Connection = new OleDbConnection("Provider=Microsoft.Jet...
My_Connection.Open();
string sql = " UPDATE Rooms SET [Room Status] = 'Taken', [Available] = 0"+
             " WHERE [RoomNumber] = ?";
OleDbCommand My_Command = new OleDbCommand(sql, My_Connection);
My_Command.Parameters.AddWithValue("RoomNumber",  Convert.ToInt32(textBox5.Text));
My_Command.ExecuteNonQuery();
My_Connection.Close(); 
```

安全多了！

# java - 使用条件时如何防止在急切关系中加入表

> ID：16128501
> 
> 赞同：0
> 
> 时间：2013-04-21T06:15:05.357
> 
> 标签：java, hibernate, hibernate-criteria

我有三个班级说，`A`如下所示：`B``C`

类`A`与 有`OneToOne`关系`B`：

```
Class A {
   @OneToOne
   B b;
} 
```

并与`B`有着热切的关系`C`。

```
Class B {
    @ManyToOne(fetch=fetchType.EAGER)
    C c;
} 
```

我想有一个标准（on `A`）并将其加入`B`以从这两个表中检索一些数据。但是当我使用`createAlias`（或任何其他特定连接）时`C`，表也会被连接。`B`（显然是因为和之间的急切关系`C`）。像这样的东西：

```
Criteria aCrit = session.createCriteria(A.class, "a");
aCrit.createAlias("a.b", "b");
aCrit.setProjection(Projections.property("b.name");
aCrit.list(); 
```

问题是，因为我不需要`C`，我不希望它加入。如何手动防止此类操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T06:40:29.790

您应该能够为您的查询动态指定获取模式：

```
Criteria aCrit = session.createCriteria(A.class, "a");
aCrit.createAlias("a.b", "b");
aCrit.setFetchMode("b.c", FetchMode.SELECT)
aCrit.setProjection(Projections.property("b.name");
aCrit.list(); 
```

# haskell - 在 mac 上安装 cabal 时遇到问题

> ID：16128503
> 
> 赞同：1
> 
> 时间：2013-04-21T06:15:16.773
> 
> 标签：haskell, cabal-install

```
wget http://www.haskell.org/cabal/release/cabal-install-0.14.0/cabal-install-0.14.0.tar.gz
tar -xvzf cabal-install-0.14.0.tar.gz
cd cabal-install-0.14.0
sh bootstrap.sh 
```

有我使用的命令，当我运行时`bootstrap.sh`，我收到此错误：

```
Configuring cabal-install-0.14.0...
Setup: At least the following dependencies are missing:
mtl >=2.0 && <3

Error during cabal-install bootstrap:
Configuring the cabal-install package failed 
```

这就是我在 sshed 到我的学校 linux 计算机时得到的，

但在我的本地机器上，

我收到此错误：

```
Configuring cabal-install-1.16.0.2...
Building cabal-install-1.16.0.2...
Preprocessing executable 'cabal' for cabal-install-1.16.0.2...
<command line>: cannot satisfy -package-id HTTP-4000.2.5-f347025199b192c3cf6b1cde4d698a13
    (use -v for more information)

Error during cabal-install bootstrap:
Building the cabal-install package failed 
```

有什么解决办法吗？我在谷歌上尝试了一些解决方案，但都没有奏效......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:11:14.430

我在安装了 Haskell 平台的 Mac 上遇到了同样的问题。

运行`ghc-pkg recache`解决了它。

# asp.net-mvc - Asp.net MVC 4 + WEB API - 自定义身份验证令牌

> ID：16128505
> 
> 赞同：5
> 
> 时间：2013-04-21T06:15:27.597
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我正在.NET 4.0 上开发一个 ASP.NET MVC 4 站点。我正在尝试向 WEB API 验证站点。现在该站点将传递用户名和密码，WEB API 将对其进行身份验证。如果通过身份验证，WEB API 将返回一个带有角色、生存时间等的令牌。我正在寻找一些关于此的指针。

1.)如何生成这个令牌？我不想使用 STS 或其他任何东西。即使是非万无一失的方法也可以。2.）在 MVC 端，我必须接收此令牌并将当前会话设置为经过身份验证，并确保一旦 TTL 过期我将用户重定向到登录页面？同样在所有 WEB API 请求中，我需要发送这个令牌。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T08:51:59.277

通常，您可以手动生成令牌并实现其验证逻辑，也可以使用一些 3rd 方工具。

对于手动实施，请查看[此处](http://blog.stevienova.com/2008/04/19/oauth-getting-started-with-oauth-in-c-net/)或[此处](http://www.hoonzis.com/using-dotnetopenauth-to-create-oauth/)的博客文章，这对您来说可能是一个很好的起点。它基于[http://oauth.googlecode.com/svn/code/csharp/OAuthBase.cs](http://oauth.googlecode.com/svn/code/csharp/OAuthBase.cs)类。

对于客户端和 OAuth 概念，您可以[在此处](https://stackoverflow.com/questions/4002847/oauth-with-verification-in-net)阅读一个很好的答案。

对于第 3 方来说，一个不错的选择可能是[DotNetOpenAuth](http://dotnetopenauth.net/)。这是一个很好的库，但在使用 OAuth 时很复杂。尝试查看其[Web API OAuth2 示例](https://github.com/DotNetOpenAuth/DotNetOpenAuth/tree/master/samples/OAuth2ProtectedWebApi)

第二个问题 - 答案是肯定的。您验证令牌并将请求设置为已验证。无论如何，您可以查看实施它的 Wep API OAuth 示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-06T23:54:06.060

您可以考虑使用我目前正在开发的**WebAPI Token Auth Bootstrap Package - 可在****[GitHub](http://dgandalf.github.io/WebApiTokenAuthBootstrap)**或**[NuGet](https://www.nuget.org/packages/WebApiTokenAuth/)**获得。

[**GitHub Wiki 上**](https://github.com/Dgandalf/WebApiTokenAuthBootstrap/wiki)提供的文档和代码示例。

> WebAPI 应用程序的简单令牌和用户身份验证和授权引导程序。提供“TokenAuthApiController”，它内置支持登录和注销（基于 cookie）以及自动令牌解析和身份验证（内部查询字符串、表单数据或 cookie）。

此引导程序允许您使用适当的: 、或简单地对操作具有`[TokenAuthentication]`属性。`AccessLevel``Admin``User``Public``Annonymous`

此引导程序还提供`TokenAuthApiController`了继承自传统的并添加了**[此处](https://github.com/Dgandalf/WebApiTokenAuthBootstrap/wiki/TokenAuthApiController--and-TokenAuthentication-Attribute)**`ApiController`详述的额外功能。

*随意拉请求，报告问题或贡献*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T07:51:28.277

这将是开始的好地方之一，这与 asp.net 成员关系很好

[https://stackoverflow.com/a/7217957/989679](https://stackoverflow.com/a/7217957/989679)

您基本上将信息存储在 authCookie 的 userData 中，并且与 WebAPI 配合得很好

# php - 在第二个斜线后剥离所有内容

> ID：16128510
> 
> 赞同：0
> 
> 时间：2013-04-21T06:16:02.847
> 
> 标签：php, character, strpos

如果我有以下网址：

[http://www.mysite.com/games/topgame](http://www.mysite.com/games/topgame)

我如何使用 php 删除最后一个“/”之后的所有内容？

所以我会留下：

[http://www.mysite.com/games/](http://www.mysite.com/games/)

我试过这个：

```
 $currentUrl = 'http://www.mysite.com/games/topgame';     
    $newstr = substr($currentUrl, 0, strpos($currentUrl, '/', strpos($currentUrl, '/')+4)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:23:36.510

尝试这个：

```
<?php
print_r (dirname('http://www.mysite.com/games/topgame'));
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T06:20:30.973

试试这个代码...

```
$currentUrl = 'http://www.mysite.com/games/topgame';     
$newstr = substr($currentUrl, 0, strrpos($currentUrl, '/')); 
```

请参阅**[键盘](http://codepad.org/re9X0G7c)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T06:22:33.343

```
 $newstr = substr($currentUrl, 0, strrchr($currentUrl, '/'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T07:19:08.297

有几个函数可以从路径中挑选出部分。

喜欢：

*   basename() - 返回路径的尾随名称组件
*   pathinfo() - 返回有关文件路径的信息
*   realpath() - 返回规范化的绝对​​路径名

但也许***pathinfo()***最适合您的需求：

```
<?php
$file = 'http://www.mysite.com/games/topgame/cool.php';

$path_parts = pathinfo($file);

echo $path_parts['dirname'] . "<br />";
echo $path_parts['basename'] . "<br />";
echo $path_parts['extension'] . "<br />";
echo $path_parts['filename'] . "<br />"; // since PHP 5.2.0

?> 
```

输出：

```
http://www.mysite.com/games/topgame
cool.php
php
cool 
```

从这里开始搜索... [http://se1.php.net/manual/en/function.pathinfo.php](http://se1.php.net/manual/en/function.pathinfo.php)

# ios - 对象 C 中的 Unicode 字符

> ID：16128514
> 
> 赞同：0
> 
> 时间：2013-04-21T06:16:55.850
> 
> 标签：ios, objective-c, emoji

我想在目标 C 中打印 Unicode 字符，例如`NSString s="\ue415"`. [http://www.easyapns.com/iphone-emoji-alerts](http://www.easyapns.com/iphone-emoji-alerts) 现在我有了代码`e415`，如何附加此代码`\u`以打印情感，我尝试附加但我只能得到`NSString` `\ue415`不是 unicode 字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T06:26:48.667

一段时间以来，Xcode 和 clang 工具链允许使用 UTF-8 编码的源文件。因此，只需使用字符串文字输入表情符号。

只需打开您的源文件并输入类似...

```
NSString *message = @"  "; 
```

您可以使用系统范围的特殊字符面板输入表情符号。使用 ⌘⌥ T 在 Xcode 中打开它。

# handlebars.js - 使用未加载预编译模板的车把

> ID：16128518
> 
> 赞同：0
> 
> 时间：2013-04-21T06:17:28.740
> 
> 标签：handlebars.js

我有以下代码，但加载 templates.js 时仍然出现以下错误：

```
Uncaught ReferenceError: Handlebars is not defined 
```

这是我加载所需脚本的方式（首先是把手，然后是预编译的模板）：

```
 var scripts = [
      '//cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.0.0-rc.3/handlebars.min.
js'
      , '/templates/templates.js'
    ];

    $.each(scripts, function(i, script){
      var el = document.createElement( 'script' );
      el.src = script;

      $body.append(el);
    }); 
```

但是在控制台中我得到了这个错误：

```
Uncaught ReferenceError: Handlebars is not defined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:06:07.283

这不是那么简单。并非所有浏览器都会按照您指定的顺序加载和使用这些 js 文件（[动态脚本加载](http://www.amirharel.com/2012/03/12/loading-scripts-sync-or-async/)）

考虑使用[requirejs](http://requirejs.org/)

# jsf-2 - p:effect 不适用于 h:outputLink

> ID：16128519
> 
> 赞同：0
> 
> 时间：2013-04-21T06:17:41.323
> 
> 标签：jsf-2, primefaces

我在**h:outputLink中有一个****p:effect**如下：

 **```
 <h:panelGrid id="closed_notebook" styleClass="book_wrapper"
    style="width:455px;margin-left: 400px;" columns="2"
    columnClasses="middle,cover">

    <h:panelGroup id="middle_closed" layout="block">

    </h:panelGroup>

    <h:panelGroup id="left_closed" layout="block">

        <h:outputLink value="javascript:void(0)">   
           <h:graphicImage value="/resources/images/book.png" />
           <p:effect for="closed_notebook"  type="clip" event="click" />                           
        </h:outputLink>

    </h:panelGroup>

</h:panelGrid> 
```

我想在单击包含图像的链接时，所有的 panelGrid 都会消失，但它不起作用，我没有采取任何行动。

另外，我想在panelGrid消失后显示另一个带有动画的隐藏panelGrid，该怎么做？

请指教，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T07:07:12.100

尝试使用`<f:param name="mode" value="'hide'" />`

另一个重要的事情可能是添加和`id`归因于`<h:outputLink`

> 注意：对于将效果组件作为子组件的组件分配 id 很重要，因为如果您没有明确地给它们一个 id，某些组件不会呈现它们的 clientId。（Primefaces 手册）

像这样：

```
<h:outputLink id="someUniqeIdMightBeAMust" value="javascript:void(0)">  
    <p:effect for="closed_notebook"  type="clip" event="click">    
        <f:param name="mode" value="'hide'" />  
    </p:effect>
</h:outputLink> 
```

至于显示另一个隐藏的 panelGrid 的另一部分，

您可以尝试使用`speed`和`delay`属性，将第一个动画限制为 1000 并在 1001 毫秒后从第二个动画开始...

```
<h:outputLink id="someUniqeIdMightBeAMust" value="javascript:void(0)">  
    <p:effect for="closed_notebook"  type="clip" event="click" speed="1000">    
        <f:param name="mode" value="'hide'" />  
    </p:effect>
    <p:effect for="middle_closed" type="clip" event="click" delay="1001">    
        <f:param name="mode" value="'show'" />  
    </p:effect>
</h:outputLink> 
```**

# ember.js - 自定义 Ember Data 发送到服务器的内容？

> ID：16128525
> 
> 赞同：1
> 
> 时间：2013-04-21T06:19:24.500
> 
> 标签：ember.js, ember-data

我的应用程序中的两个模型是`projects`和`users`。项目可以有许多用户分配给他们，反之亦然。我正在使用 Ember Data，所以我的模型如下所示：

```
App.Project = DS.Model.extend({
  name: DS.attr('string'),
  created: DS.attr('date'),
  users: DS.hasMany('App.User')
}); 
```

在服务器上创建项目时，API 期望接收项目的名称和与项目用户对应的 ID 数组。所以，基本上，是这样的：

```
POST /projects
{
  project: {
    name: 'My Project',
    users: [1, 10, 14]
  }
} 
```

但是，Ember Data 在发送 POST 或 PUT 请求时不包括用户 ID 数组。默认情况下，它只包含 name 属性。如何修改 Ember 数据以包含我需要的内容？是否值得做，还是我应该走 Discourse 路线并暂时放弃 Ember Data？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T09:57:16.057

假设您使用的是最新版本和 RESTAdapter/RESTSerializer，您可以覆盖序列化程序的 addHasMany 方法。

因此，这是一个如何执行此操作的示例：

```
App.CustomSerializer = DS.RESTSerializer.extend({
  addHasMany: function(hash, record, key, relationship) {
    var ids = record.get(relationship.key).map(function(item) {
      return item.get('id');
    });

    hash[relationship.key] = ids;
  },
});

App.Store = DS.Store.extend({
  adapter: DS.RESTAdapter.extend({
    serializer: App.CustomSerializer.create()
  })
}); 
```

请注意，addHasMany 实现取自[https://github.com/emberjs/data/blob/master/packages/ember-data/lib/serializers/fixture_serializer.js#L41](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/serializers/fixture_serializer.js#L41)

# .htaccess - .htaccess（我认为） - RewriteRule

> ID：16128527
> 
> 赞同：0
> 
> 时间：2013-04-21T06:19:44.663
> 
> 标签：.htaccess, mod-rewrite

我有多个 URL，我想指向单个页面，但需要在页面打开时显示相关 URL，而不是页面的实际 URL；

例如页面地址是`http://example.com/pagename.php`

但我也有 url 的`aaa.com`,`bbb.com`等`ccc.com`。

当某些用途`aaa.com`我想显示`http://example.com/pagename.php`但`aaa.com`在浏览器中显示时。

我确信这是一个“简单”`RewriteRule`但我不玩`.htaccess`，任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:23:49.720

尝试这个：

```
RewriteEngine On
RewriteRule ^aaa.com$ example.com/pagename.php [NC,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T06:41:03.660

我会尽力提供帮助，只需确保您的网络托管帐户上有一个**Apache HTTP 服务器**，然后在根目录中的隐藏文件中使用这些配置指令：`mod_rewrite``.htaccess`

```
# once per htaccess file
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{HTTP_HOST} ([a-zA-Z0-9-]+)\.com$
RewriteRule ^/?$ http://example.com/pagename.php [P] 
```

但请记住，这种问题属于[Server Fault](https://serverfault.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T07:51:02.747

您还可以使用绝对路径，假设所有站点都在同一台服务器上...对于`aaa.com`：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www\.)?aaa\.com$ [NC]
RewriteRule ^(.*)$ /Absolute/Path/To/Root/Directory/For/example.com/$1 
```

对于`bbb.com`：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www\.)?bbb\.com$ [NC]
RewriteRule ^(.*)$ /Absolute/Path/To/Root/Directory/For/example.com/$1 
```

... ETC。

注意：这也假设`example.com`' 的根目录的绝对路径是`/Absolute/Path/To/Root/Directory/For/example.com/`（但也许这很明显）......;）

# amazon-elastic-beanstalk - 如何在 Elastic Beanstalk 上设置 supervisord？

> ID：16128533
> 
> 赞同：3
> 
> 时间：2013-04-21T06:20:15.053
> 
> 标签：amazon-elastic-beanstalk, dotcloud, supervisord

我正在从 DotCloud 迁移到 Elastic Beanstalk。

使用 DotCloud，他们清楚地解释了如何设置[Python Worker](http://docs.dotcloud.com/services/python-worker/)以及如何使用[supervisord](http://docs.dotcloud.com/guides/daemons/)。

转向 Elastic Beanstalk，我不知道如何做到这一点。

我有一个脚本`myworker.py`，想确保它始终在运行。如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:21:49.247

Elastic Beanstalk 只是一个基于 EC2、ELB 和自动缩放的堆栈配置工具。您可以使用的一种方法是创建自己的 AMI，但自去年 10 月以来，还有另一种方法可能更适合您的需求：ebextensions。

.ebextension 只是您的应用程序中的一个目录，一旦您的应用程序被 AWS 加载，它就会被检测到。

这是完整的文档：[http ://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers.html](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-19T14:42:00.943

对于[Amazon Linux 2](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features.migration-al.html)，您需要使用 .platform 文件夹来为弹性 beanstalk 提供安装脚本。

> 我们建议使用平台挂钩在您的环境实例上运行自定义代码。您仍然可以在 .ebextensions 配置文件中使用命令和容器命令，但使用起来并不容易。例如，在 YAML 文件中编写命令脚本可能很麻烦且难以测试。

因此，您应该在.platform 文件夹中添加一个 prebuild 挂钩（示例）来安装主管，并在每次部署后添加一个[postdeploy 挂钩（](https://github.com/rennokki/laravel-aws-eb/blob/master/.platform/hooks/prebuild/install_supervisor.sh)[示例）来重新启动主管。](https://github.com/rennokki/laravel-aws-eb/blob/master/.platform/hooks/postdeploy/restart_supervisorctl.sh)

脚本中使用了一个[ini文件（示例） ；](https://github.com/rennokki/laravel-aws-eb/blob/master/.platform/files/supervisor.ini)这是为 laravel 特定的。

`.platform`在部署项目之前，确保文件夹中的 .sh 文件是可执行的：

```
$ chmod +x .platform/hooks/prebuild/*.sh
$ chmod +x .platform/hooks/postdeploy/*.sh 
```

# sql - 我有一个包含字母和数字的代数公式，我想评估并返回结果

> ID：16128537
> 
> 赞同：-1
> 
> 时间：2013-04-21T06:21:07.083
> 
> 标签：sql

有人知道在 SQL Server 中求解代数方程的能力吗

一张表包含问题和答案

问题 答案 宽度 700 长度 200

另一个表包含公式 (WIDTH + 100) / LENGTH

我正在寻找的返回值是 4

这些问题是一个动态列表，因此每次运行时问题都会略有不同，而且列表会增长，因此我必须能够独立添加到列表中而不会影响 sql 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:26:16.150

SQL 完全能够进行简单的数学运算。这是一个例子：

```
SELECT (WIDTH + 100) / LENGTH
FROM DIMENSIONS 
```

因此，如果您有一个包含作为字符串的数学表达式的表，您可以查询该字符串，将其组合成一个新的 SQL 查询，然后执行新的查询。例如：

```
SELECT 'SELECT ' || Expression || ' FROM DIMENSIONS'
FROM Expressions 
```

如果`Expressions`是一个表，其列`Expression`具有 value `(WIDTH + 100) / LENGTH`，则结果将是我的第一个示例中的 SQL 查询。然后只需执行返回的 SQL。

**注意**：*如果表达式来自不受信任的来源（例如 Internet 上的用户），则直接执行他们的输入是不安全的。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T06:44:18.677

我认为你必须建立一个字符串然后执行它。例如在 puedo SQL 中，类似的东西；

```
 declare SQLSTR varchar2(2000)

    set SQLSTR = select 'select '''+REPLACE(
                                      REPLACE(<column name holding formal>), 'WIDTH', <column holding width>), 
                                                                             'LENGTH', <column name holding length>) '''
    + ' from <table holding width and length columns> '
    + ' where <predicate>'
from <table holding formula.
where <predicate>

    exec (SQLSTR) 
```

# if-statement - forloop.index 作为 shopify 中 if 语句中的条件

> ID：16128546
> 
> 赞同：4
> 
> 时间：2013-04-21T06:22:37.497
> 
> 标签：if-statement, for-loop, shopify, liquid

**我正在尝试做一些非常简单的事情。**我写：

```
{% for product in collection.products %}
   {{ if forloop.index = 1 }}
        Hello World!
   {{ endif }}
{% endfor %} 
```

**问题：** “Hello World！” 每次迭代都会出现。这里有什么问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-21T06:26:29.837

看起来在循环的每一轮中，您都将索引覆盖为始终等于 1。尝试

```
{% if forloop.index == 1 %} 
```

反而。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T15:35:37.700

所以这里又是**正确的版本**，回答我自己的问题......；）

```
{% for product in collection.products %}
   {% if forloop.index == 1 %}
        Hello World!
   {% endif %}
{% endfor %} 
```

# shell - 将文件从 AWS EC2 上传到 S3 的 Shell 脚本

> ID：16128547
> 
> 赞同：6
> 
> 时间：2013-04-21T06:22:40.843
> 
> 标签：shell, amazon-web-services, amazon-s3, amazon-ec2, jmeter

我在 AWS EC2 上执行 jmeter，其结果以 csv 文件的形式返回。

我需要将此 csv 文件上传到 AWS S3 存储桶。

由于我正在动态创建多个 EC2 实例并在这些实例上执行 jmeter，因此最好自动化此过程。

因此，为此我想编写 shell 脚本（作为用户数据）来执行 jmeter 并将结果 CSV 文件从每个 EC2 实例上传到 S3 存储桶。

我如何为此编写脚本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T09:26:05.483

考虑使用命令行 s3 客户端。

[S3 命令行工具](http://s3tools.org/s3cmd)

还可以浏览其中一些网站：

[从 Amazon S3 存储桶传输文件的 Shell 脚本。](http://arunsasidhar.blogspot.in/2011/07/shell-script-to-transfer-files-from.html)

[aws 命令行工具](http://timkay.com/aws/)

[python脚本将文件上传到s3](https://code.google.com/p/s3afe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-17T06:21:13.523

您可以使用此库通过 shell 脚本管理 AWS S3 上的对象。

[Universal Docs Manager](https://github.com/aishwarydhare/universal-docs-manager)是基于纯 shell 脚本的对象管理器，目前支持本地磁盘、MySQL 和 AWS S3

# webforms - 填写一个使用 javascript 和 python 的网络表单

> ID：16128552
> 
> 赞同：-1
> 
> 时间：2013-04-21T06:23:45.653
> 
> 标签：webforms, python-3.3

我正在尝试通过提交特定值来使用 python 程序填写网络表单。问题是它使用javascript。我将发布我要填写的值的示例。

```
fo.addVariable("email","email@yahoo.com")
fo.addVariable("age","19")
fo.addVariable("gender","M")
fo.addVariable("line","hello") 
```

这是页面上的值的示例。我想要做的是提交一个值并改变它。我目前正在尝试的是：

```
data = urllib.parse.urlencode({"line": "hello", "age": "50", "email":  "email@yahoo.com", "gender": "M"}).encode()
resp = urlreq.urlopen("http://url.com/update", data) 
```

这通常适用于大多数网络表单。但对于这个它不会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:23:10.790

在 python 2.7 中，urllib 没有属性 urllib.parse 并且末尾的 .encode() 函数是不必要的。

我认为你应该写的是

```
data = urllib.urlencode({"line": "hello", "age": "50", "email":  "email@yahoo.com", "gender": "M"}) 
```

# sql-server - T-SQL 创建 ID 列

> ID：16128554
> 
> 赞同：3
> 
> 时间：2013-04-21T06:23:54.013
> 
> 标签：sql-server, sql-server-2008, rank, row-number, contiguous

我正在使用 SQL Server 2008 R2，并且我有以下数据集：

```
+---------+--------------+--------------+----------+------------+------------+
| Dossier | refmouvement | refadmission | refunite |  datedeb   |  datefin   |
+---------+--------------+--------------+----------+------------+------------+
| P001234 |         2567 |         1234 |      227 | 2012-01-01 | 2012-01-02 |
| P001234 |         2568 |         1234 |      227 | 2012-01-02 | 2012-01-03 |
| P001234 |         2569 |         1234 |      224 | 2012-01-03 | 2012-01-06 |
| P001234 |         2570 |         1234 |      232 | 2012-01-06 | 2012-01-10 |
| P001234 |         2571 |         1234 |      232 | 2012-01-10 | 2012-01-15 |
| P001234 |         2572 |         1234 |      232 | 2012-01-15 | 2012-01-20 |
| P001234 |         2573 |         1234 |      232 | 2012-01-20 | 2012-01-25 |
| P001234 |         2574 |         1234 |      224 | 2012-01-25 | 2012-01-29 |
| P001234 |         2575 |         1234 |      227 | 2012-01-29 | 2012-02-05 |
| P001234 |         2576 |         1234 |      227 | 2012-02-05 | 2012-02-10 |
| P001234 |         2577 |         1234 |      232 | 2012-02-10 | 2012-02-15 |
| P001234 |         2578 |         1234 |      201 | 2012-02-15 | 2012-02-26 |
+---------+--------------+--------------+----------+------------+------------+ 
```

此数据集按 排序`datedeb`，也称为`startdate`。

如您所见，这是一个连续的数据集，`datefin`等于下一行的`datedeb`

我需要创建一个`ID`列，该列将根据`refunite`和`datedeb`列给出一个唯一的 ID，如下所示：

```
+----+---------+--------------+--------------+----------+------------+------------+
| ID | Dossier | refmouvement | refadmission | refunite |  datedeb   |  datefin   |
+----+---------+--------------+--------------+----------+------------+------------+
|  1 | P001234 |         2567 |         1234 |      227 | 2012-01-01 | 2012-01-02 |
|  1 | P001234 |         2568 |         1234 |      227 | 2012-01-02 | 2012-01-03 |
|  2 | P001234 |         2569 |         1234 |      224 | 2012-01-03 | 2012-01-06 |
|  3 | P001234 |         2570 |         1234 |      232 | 2012-01-06 | 2012-01-10 |
|  3 | P001234 |         2571 |         1234 |      232 | 2012-01-10 | 2012-01-15 |
|  3 | P001234 |         2572 |         1234 |      232 | 2012-01-15 | 2012-01-20 |
|  3 | P001234 |         2573 |         1234 |      232 | 2012-01-20 | 2012-01-25 |
|  4 | P001234 |         2574 |         1234 |      224 | 2012-01-25 | 2012-01-29 |
|  5 | P001234 |         2575 |         1234 |      227 | 2012-01-29 | 2012-02-05 |
|  5 | P001234 |         2576 |         1234 |      227 | 2012-02-05 | 2012-02-10 |
|  6 | P001234 |         2577 |         1234 |      232 | 2012-02-10 | 2012-02-15 |
|  7 | P001234 |         2578 |         1234 |      201 | 2012-02-15 | 2012-02-26 |
+----+---------+--------------+--------------+----------+------------+------------+ 
```

我只是无法围绕一个`RANK()`,`ROW_NUMBER()`或`DENSE_RANK()`函数或它们的组合来实现这一点，我到处寻找，但我找不到任何东西，也许我没有使用正确的关键字，但我就是想不通

任何帮助将不胜感激

谢谢。

这是我到目前为止尝试过的代码：

```
SELECT 
   ROW_NUMBER() over(order by t1.[datedeb])  as [ID1],
   dense_Rank() over(partition by t1.[refunite]   order by t1.[datedeb])  as [ID2],
   t1.[Dossier]
   ,t1.[refmouvement]
   ,t1.[refadmission]
   ,t1.[refunite]
   ,t1.[datedeb]
   ,t1.[datefin]
   ,t2.[refmouvement] as [prev_refmouvement]
   ,t2.refunite as prev_refunite
FROM [sometable] t1
LEFT OUTER JOIN [sometable] t2  /*self join*/
     ON t2.datefin = t1.datedeb
        AND t1.[refadmission] = t2.[refadmission]
ORDER BY
   t1.[datedeb] 
```

这就是它给我的：

```
+-----+-----+---------+--------------+--------------+----------+------------+------------+-------------------+---------------+
| ID1 | ID2 | Dossier | refmouvement | refadmission | refunite |  datedeb   |  datefin   | prev_refmouvement | prev_refunite |
+-----+-----+---------+--------------+--------------+----------+------------+------------+-------------------+---------------+
|   1 |   1 | P001234 |         2567 |         1234 |      227 | 2012-01-01 | 2012-01-02 | NULL              | NULL          |
|   2 |   2 | P001234 |         2568 |         1234 |      227 | 2012-01-02 | 2012-01-03 | 2567              | 227           |
|   3 |   1 | P001234 |         2569 |         1234 |      224 | 2012-01-03 | 2012-01-06 | 2568              | 227           |
|   4 |   1 | P001234 |         2570 |         1234 |      232 | 2012-01-06 | 2012-01-10 | 2569              | 224           |
|   5 |   2 | P001234 |         2571 |         1234 |      232 | 2012-01-10 | 2012-01-15 | 2570              | 232           |
|   6 |   3 | P001234 |         2572 |         1234 |      232 | 2012-01-15 | 2012-01-20 | 2571              | 232           |
|   7 |   4 | P001234 |         2573 |         1234 |      232 | 2012-01-20 | 2012-01-25 | 2572              | 232           |
|   8 |   2 | P001234 |         2574 |         1234 |      224 | 2012-01-25 | 2012-01-29 | 2573              | 232           |
|   9 |   3 | P001234 |         2575 |         1234 |      227 | 2012-01-29 | 2012-02-05 | 2574              | 224           |
|  10 |   4 | P001234 |         2576 |         1234 |      227 | 2012-02-05 | 2012-02-10 | 2575              | 227           |
|  11 |   5 | P001234 |         2577 |         1234 |      232 | 2012-02-10 | 2012-02-15 | 2576              | 227           |
|  12 |   1 | P001234 |         2578 |         1234 |      201 | 2012-02-15 | 2012-02-26 | 2577              | 232           |
+-----+-----+---------+--------------+--------------+----------+------------+------------+-------------------+---------------+ 
```

沙兹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T10:33:29.370

```
DECLARE @Results TABLE(
    RowNum INT PRIMARY KEY,
    refunite INT NOT NULL,
    datedeb DATETIME NOT NULL
);

INSERT  @Results (RowNum, refunite, datedeb)
SELECT  ROW_NUMBER() OVER(ORDER BY datedeb) AS RowNum,
        refunite, 
        datedeb
FROM    dbo.MyTable;

WITH CTERecursive
AS (
    SELECT  crt.RowNum,
            crt.refunite,
            crt.datedeb,
            1 AS Rnk -- Starting rank
    FROM    @Results crt
    WHERE   crt.RowNum = 1
    UNION ALL
    SELECT  crt.RowNum,
            crt.refunite,
            crt.datedeb,
            CASE WHEN prev.refunite = crt.refunite THEN prev.Rnk ELSE prev.Rnk + 1 END
    FROM    @Results crt INNER JOIN CTERecursive prev ON crt.RowNum = prev.RowNum + 1
)
SELECT  *
FROM    CTERecursive
-- OPTION(MAXRECURSION 1000); -- Uncomment this line if you change the number of recursion levels allowed (default 100) 
```

结果：

```
RowNum      refunite    datedeb                 Rnk
----------- ----------- ----------------------- ---
1           227         2012-01-01 00:00:00.000 1
2           227         2012-01-02 00:00:00.000 1
3           224         2012-01-03 00:00:00.000 2
4           232         2012-01-06 00:00:00.000 3
5           232         2012-01-10 00:00:00.000 3
6           232         2012-01-15 00:00:00.000 3
7           232         2012-01-20 00:00:00.000 3
8           224         2012-01-25 00:00:00.000 4
9           227         2012-01-29 00:00:00.000 5
10          227         2012-02-05 00:00:00.000 5
11          232         2012-02-10 00:00:00.000 6
12          201         2012-02-15 00:00:00.000 7 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T12:07:32.553

You could, of course, have multiple tables in the WITH, eliminating the table variable. Based on Bogdan Sahleans answer, you could rewrite like this:

```
WITH CTEHelper AS 
    (SELECT ROW_NUMBER() OVER(ORDER BY datedeb) AS RowNum,
            refunite, 
            datedeb
    FROM    dbo.Sometable),
CTERecursive AS (
        SELECT  crt.RowNum,
                crt.refunite,
                crt.datedeb,
                1 AS Id -- Starting rank
        FROM    CTEHelper crt
        WHERE   crt.RowNum = 1
        UNION ALL
        SELECT  crt.RowNum,
                crt.refunite,
                crt.datedeb,
                CASE WHEN prev.refunite = crt.refunite THEN prev.Id ELSE prev.Id + 1 END
        FROM    CTEHelper crt INNER JOIN CTERecursive prev ON crt.RowNum = prev.RowNum + 1
    )
SELECT  crt.id, 
        s.*
FROM    CTERecursive crt
    JOIN Sometable s ON s.refunite = crt.refunite AND s.datedeb = crt.datedeb 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T14:15:52.790

```
with sometable as (
    select *
    from (
        values ('P001234', 2567, 1234, 227, cast('2012-01-01' as date), cast('2012-01-02' as date)),
        ('P001234', 2568, 1234, 227, cast('2012-01-02' as date), cast('2012-01-03' as date)),
        ('P001234', 2569, 1234, 224, cast('2012-01-03' as date), cast('2012-01-06' as date)),
        ('P001234', 2570, 1234, 232, cast('2012-01-06' as date), cast('2012-01-10' as date)),
        ('P001234', 2571, 1234, 232, cast('2012-01-10' as date), cast('2012-01-15' as date)),
        ('P001234', 2572, 1234, 232, cast('2012-01-15' as date), cast('2012-01-20' as date)),
        ('P001234', 2573, 1234, 232, cast('2012-01-20' as date), cast('2012-01-25' as date)),
        ('P001234', 2574, 1234, 224, cast('2012-01-25' as date), cast('2012-01-29' as date)),
        ('P001234', 2575, 1234, 227, cast('2012-01-29' as date), cast('2012-02-05' as date)),
        ('P001234', 2576, 1234, 227, cast('2012-02-05' as date), cast('2012-02-10' as date)),
        ('P001234', 2577, 1234, 232, cast('2012-02-10' as date), cast('2012-02-15' as date)),
        ('P001234', 2578, 1234, 201, cast('2012-02-15' as date), cast('2012-02-26' as date))
    ) t (Dossier, refmouvement, refadmission, refunite, datedeb, datefin)
), pos as (
    select d.*, (case when d2.refunite is null then null 
                        when d2.refunite != d.refunite then d2.datedeb 
                        else d.datedeb end) as forward, 
                (case when d3.refunite is null then null 
                        when d3.refunite != d.refunite then d3.datedeb 
                        else d.datedeb end) as backward
    from sometable d
    left outer join sometable d2 on d.refadmission = d2.refadmission and d.datefin = d2.datedeb
    left outer join sometable d3 on d.refadmission = d3.refadmission and d.datedeb = d3.datefin
)
select dense_rank() over (order by isnull((select min(datedeb) 
                                            from pos 
                                            where refadmission = t.refadmission 
                                            and refunite = t.refunite 
                                            and datedeb > t.datedeb 
                                            and datedeb = backward
                                            and ((t.datedeb = t.backward and t.datedeb = t.forward) 
                                                    or t.datedeb != t.backward or t.backward is null)
                                            and datedeb != forward), datedeb)) as ID, 
       Dossier, refmouvement, refadmission, refunite, datedeb, datefin
from pos t
order by datedeb 
```

# mysql - 打开包含 Blob 的脚本时出现文件编码问题

> ID：16128558
> 
> 赞同：3
> 
> 时间：2013-04-21T06:24:49.767
> 
> 标签：mysql, mysql-workbench

当我将文件（图像）中的值加载到数据类型为 Blob 的字段中时，然后通过 Admin Tab -> Data Export 将其导出并在 SQL 选项卡中打开它，我会收到一条文件编码问题消息。

> **未知文件编码** 该文件具有未知的字符集编码。请选择文件的编码，然后按 OK 让 Workbench 转换并打开它。请注意，由于 Workbench 使用 UTF-8 文本，如果您保存回原始文件，其内容将替换为转换后的数据。

下面我可以输入一个字符集编码名称。当我接受建议的“Latin1”-Encoding 之后，图像将被损坏。

模式的排序规则是 utf8 但是当我在上面提到的对话框中输入 utf8 时它说

> **无法转换文本数据 无法将**文件从“UTF-8”转换为 UTF-8：转换输入中的字节序列无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T02:33:22.843

我有几个没有正确转储的 VARBINARY(16) 列。我将 --hex-blob 行添加到我的 mysqldump 批处理文件中，以及 -r "filename.sql" 这为我解决了问题。我没有任何其他 blob 类型。

# android - 如何从 ftp 服务器下载 .txt 文件

> ID：16128559
> 
> 赞同：-1
> 
> 时间：2013-04-21T06:25:27.747
> 
> 标签：android

我必须从我的服务器下载一个 .txt 格式的文件到我的安卓机器上。但我不知道如何从服务器下载包含用户名和密码的文件以下载文件。有没有人帮助我。我是android编程的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:36:56.260

寻找 commons net apache 库 - [http://commons.apache.org/proper/commons-net/](http://commons.apache.org/proper/commons-net/)。它提供了使用 FTP 的工具。

代码示例

```
 FileOutputStream videoOut;
    File targetFile = new File("path");

    FTPClient ftpClient = new FTPClient();
    try {
        ftpClient.connect("your.ftp.address", 21);
        ftpClient.enterLocalPassiveMode();
        ftpClient.login("login", "password");

        ftpClient.setFileType(FTPClient.BINARY_FILE_TYPE);// Used for video
        targetFile.createNewFile();
        videoOut = new FileOutputStream(targetFile);
        boolean result=ftpClient.retrieveFile("/" + "filename-to-download", videoOut);

        ftpClient.disconnect();
        videoOut.close();    

    } catch (IOException e) {
        e.printStackTrace();
    } catch (Exception e){
        e.printStackTrace();
    } 
```

# ios - WordPress菜单项向右浮动和垂直对齐问题

> ID：16128561
> 
> 赞同：0
> 
> 时间：2013-04-21T06:26:13.190
> 
> 标签：ios, css, wordpress, css-float, vertical-alignment

我希望你们中的一位 CSS 专家可以帮助我查明为什么我的代码不起作用！这是我的网站：

[http://ledvideowall.net](http://ledvideowall.net)

当浏览器窗口大于 600 像素时，“呼叫我们”菜单项​​在菜单栏中向右浮动并垂直居中。（在 FireFox 和 Chrome 上）

但是，当浏览器 < 600 像素时，菜单项不再向右浮动。而且，在 Chrome 和 iOS 设备上，菜单项垂直放置在菜单栏下方。（很难看到！）

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T06:53:45.117

添加`width:100%`到`.nav-menu`css文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T06:52:28.577

好吧，我没有得到这个问题。然而，

您不应该将其包含在同一个`ul`. 相反，您应该单独制作一个`div`并将其浮动到右侧（`float:right;`），并将实际菜单单独浮动到左侧（`float:left;`）。

ps**不要**添加`width: 100%`到`.nav-menu`. 这只能解决一个**症状**而不是**主要问题**。

# linux - 链接的汇编子例程无法按预期工作

> ID：16128563
> 
> 赞同：0
> 
> 时间：2013-04-21T06:26:23.317
> 
> 标签：linux, assembly, ld, system-calls, fasm

我正在 FASM 中编写一个简单的子程序来将 32 位无符号整数打印到 STDOUT。这就是我想出的：

```
format elf
public uprint

section ".text" executable
uprint:
    push ebx
    push ecx
    push edx
    push esi
    mov  ebx, 10
    mov  ecx, buf + 11
    xor  esi, esi
do:
    dec ecx
    xor edx, edx
    div ebx
    add dl, 0x30
    mov [ecx], dl
    inc esi
    test eax, 0
    jnz do
    mov eax, 4
    mov ebx, 1
    mov edx, esi
    int 0x80
    pop esi
    pop edx
    pop ecx
    pop ebx
    ret

section ".data" writeable
    buf rb 11 
```

然后我又写了一个程序来测试上面的子程序是否正常工作：

```
format elf
extrn uprint
public _start

section ".text" executable
_start:
    mov eax, 1337
    call uprint
    mov eax, 4
    mov ebx, 1
    mov ecx, newline
    mov edx, 1
    int 0x80
    mov eax, 1
    xor ebx, ebx
    int 0x80

section ".data"
    newline db 0x0A 
```

我将这两个程序编译为它们相应的目标文件，并将它们链接起来以创建可执行文件。

然而，在执行程序时，它只显示`7`而不是`1337`. 事实证明，无论数字本身如何，都只显示数字的最后一位。

~~这很奇怪，因为我的`uprint`子程序是正确的。事实上，如果我将这两个程序组合成一个程序，那么它会`1337`正确显示。~~

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:11:51.230

我发现了我的错误。我正在使用`test eax, 0`它总是设置零标志。因此只处理第一个数字。Intead 我需要使用`test eax, eax`或`cmp eax, 0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T07:31:56.870

我获得了明显的印象，即您的 LINK 操作正在构建`uprint`之前，`_start`而您实际上正在进入`UPRINT`，而不是`_start`您期望的那样。

# php - Laravel 3：从包中扩展控制器

> ID：16128567
> 
> 赞同：0
> 
> 时间：2013-04-21T06:26:57.927
> 
> 标签：php, laravel, bundle, laravel-3

是否可以通过命名空间从应用程序控制器开始从捆绑包中扩展控制器？我尝试了很多不同的方法，但没有一个主题有效。

这就是我想要开始的工作：

:: 应用程序 - 控制器：

```
News_Controller extends Bundle_News_Controller 
```

:: 捆绑控制器

```
Bundle_News_Controller extends Bundle_Base_Controller 
```

# python - 使用 python 从微笑格式中获取分子名称

> ID：16128572
> 
> 赞同：2
> 
> 时间：2013-04-21T06:28:04.143
> 
> 标签：python, bioinformatics

我有许多微笑格式的分子，我想从分子的微笑格式中获取分子名称，我想使用 python 进行转换。

例如 ：

```
CN1CCC[C@H]1c2cccnc2 - Nicotine  
OCCc1c(C)[n+](=cs1)Cc2cnc(C)nc(N)2 - Thiamin 
```

哪个 python 模块将帮助我进行此类转换？
请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T19:25:18.963

我不知道有哪个模块可以让你做到这一点，我不得不在 data wrangler 上玩，试图得到一个满意的答案。

我使用 Wikipedia 解决了这个问题，该 Wikipedia 越来越多地用于结构化生物信息学/化学信息学数据，但事实证明我的程序显示很多数据是不正确的。

我使用 urllib 向 dbpedia 提交了一个 SPARQL 查询，首先搜索微笑字符串，然后搜索化合物的分子量失败。

```
import sys
import urllib
import urllib2
import traceback
import pybel
import json

def query(q,epr,f='application/json'):
    try:
        params = {'query': q}
        params = urllib.urlencode(params)
        opener = urllib2.build_opener(urllib2.HTTPHandler)
        request = urllib2.Request(epr+'?'+params)
        request.add_header('Accept', f)
        request.get_method = lambda: 'GET'
        url = opener.open(request)
        return url.read()
    except Exception, e:
        traceback.print_exc(file=sys.stdout)
        raise e 

url = 'http://dbpedia.org/sparql'

q1 = '''
select ?name where {
    ?s <http://dbpedia.org/property/smiles> "%s"@en.
    ?s rdfs:label ?name.
    FILTER(LANG(?name) = "" || LANGMATCHES(LANG(?name), "en"))
}
limit 10
'''
q2 = '''
select ?name where {
    ?s <http://dbpedia.org/property/molecularWeight> '%s'^^xsd:double.
    ?s rdfs:label ?name.
    FILTER(LANG(?name) = "" || LANGMATCHES(LANG(?name), "en"))
}
limit 10
'''

smiles = filter(None, '''

CN1CCC[C@H]1c2cccnc2
CN(CCC1)[C@@H]1C2=CC=CN=C2

OCCc1c(C)[n+](=cs1)Cc2cnc(C)nc(N)2

Cc1nnc2CN=C(c3ccccc3)c4cc(Cl)ccc4-n12

CN1C(=O)CN=C(c2ccccc2)c3cc(Cl)ccc13

CCc1nn(C)c2c(=O)[nH]c(nc12)c3cc(ccc3OCC)S(=O)(=O)N4CCN(C)CC4

CC(C)(N)Cc1ccccc1

CN(C)C(=O)Cc1c(nc2ccc(C)cn12)c3ccc(C)cc3

COc1ccc2[nH]c(nc2c1)S(=O)Cc3ncc(C)c(OC)c3C

CCN(CC)C(=O)[C@H]1CN(C)[C@@H]2Cc3c[nH]c4cccc(C2=C1)c34
'''.splitlines())

OBMolecules = {}
for smile in smiles:
    try:
        OBMolecules[smile] = pybel.readstring('smi', smile)
    except Exception as e:
        print e

for smi in smiles:
    print '--------------'
    print smi
    try:
        print "searching by smiles string.."
        results = json.loads(query(q1 % smi, url))
        if len(results['results']['bindings']) == 0:
            raise Exception('no results from smiles')
        else:
            print 'NAME: ', results['results']['bindings'][0]['name']['value']

    except Exception as e:
        print e

        try:
            mol_weight = round(OBMolecules[smi].molwt, 2)
            print "search ing by molecular weight %s" % mol_weight
            results = json.loads(query(q2 % mol_weight, url))
            if len(results['results']['bindings']) == 0:
                raise Exception('no results from molecular weight')
            else:
                print 'NAME: ', results['results']['bindings'][0]['name']['value']
        except Exception as e:
            print e 
```

输出...

```
--------------
CN1CCC[C@H]1c2cccnc2
searching by smiles string..
no results from smiles
search ing by molecular weight 162.23
NAME:  Anabasine
--------------
CN(CCC1)[C@@H]1C2=CC=CN=C2
searching by smiles string..
no results from smiles
search ing by molecular weight 162.23
NAME:  Anabasine
--------------
OCCc1c(C)[n+](=cs1)Cc2cnc(C)nc(N)2
searching by smiles string..
no results from smiles
search ing by molecular weight 267.37
NAME:  Pipradrol
--------------
Cc1nnc2CN=C(c3ccccc3)c4cc(Cl)ccc4-n12
searching by smiles string..
no results from smiles
search ing by molecular weight 308.76
no results from molecular weight
--------------
CN1C(=O)CN=C(c2ccccc2)c3cc(Cl)ccc13
searching by smiles string..
no results from smiles
search ing by molecular weight 284.74
NAME:  Mazindol
--------------
CCc1nn(C)c2c(=O)[nH]c(nc12)c3cc(ccc3OCC)S(=O)(=O)N4CCN(C)CC4
searching by smiles string..
no results from smiles
search ing by molecular weight 460.55
no results from molecular weight
--------------
CC(C)(N)Cc1ccccc1
searching by smiles string..
no results from smiles
search ing by molecular weight 149.23
NAME:  Phenpromethamine
--------------
CN(C)C(=O)Cc1c(nc2ccc(C)cn12)c3ccc(C)cc3
searching by smiles string..
no results from smiles
search ing by molecular weight 307.39
NAME:  Talastine
--------------
COc1ccc2[nH]c(nc2c1)S(=O)Cc3ncc(C)c(OC)c3C
searching by smiles string..
no results from smiles
search ing by molecular weight 345.42
no results from molecular weight
--------------
CCN(CC)C(=O)[C@H]1CN(C)[C@@H]2Cc3c[nH]c4cccc(C2=C1)c34
searching by smiles string..
no results from smiles
search ing by molecular weight 323.43
NAME:  Lysergic acid diethylamide 
```

如您所见，*应该*是尼古丁的前两个结果是错误的，这是因为尼古丁的维基百科条目报告了分子量字段中的分子量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T19:52:45.273

在[打开的 babel 文档](http://openbabel.org/docs/dev/Fingerprints/fingerprints.html#similarity-searching)中有一个关于相似性搜索的部分您可能想要查看，您可以将其与从[Chembl](https://www.ebi.ac.uk/chembl/downloads)派生的 sdl 文件结合使用。

我稍后会试一试，因为它比我之前的回答更有成效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-05T12:05:47.463

参考：[NCI/CADD](https://cactus.nci.nih.gov/chemical/structure) from urllib.request import urlopen

```
def CIRconvert(smi):
    try:
        url ="https://cactus.nci.nih.gov/chemical/structure/" + smi+"/iupac_name" 
        ans = urlopen(url).read().decode('utf8')
        return ans
    except:
        return 'Name Not Available'

smiles  = 'CCCCC(C)CC'
print(smiles, CIRconvert(smiles)) 
```

输出：CCCCC(C)CC - **3-甲基庚烷**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-15T22:52:52.923

下载 RDkit 模块并使用如下内容：

```
ms_smis = [["CN1CCC[C@H]1c2cccnc2", "Nicotine"],
           ["OCCc1c(C)[n+](=cs1)Cc2cnc(C)nc(N)2", "Thiamin"]]
ms = [[Chem.MolFromSmiles(x[0]), x[1]] for x in ms_smis]

for m in ms: Draw.MolToFile(m[0], m[1] + ".png", size=(800, 800)) 
```

这是文档： [https ://www.rdkit.org/docs/GettingStartedInPython.html](https://www.rdkit.org/docs/GettingStartedInPython.html)

# php - 使用 AJAX 和 Codeigniter 从数据库中删除用户

> ID：16128574
> 
> 赞同：3
> 
> 时间：2013-04-21T06:28:45.920
> 
> 标签：php, jquery, ajax, codeigniter

我正在尝试使用 AJAX 和 Code Igniter 从数据库中删除用户。当我单击删除链接时，用户被删除，但页面被重定向并显示成功消息。AJAX 似乎在我的代码中不起作用。这是HTML：

```
<table class="table table-hover">
<thead>
<tr>
<th>#</th>
<th>First Name</th>
<th>Last Name</th>
<th>Email</th>
<th>Username</th>
<th>Password</th>
<th>Action</th>
</tr>
</thead>
<tbody>

<?php foreach($users as $u){?>
<tr>

<td><?php echo $u['id']; ?></td>

<td><?php echo $u['firstname']; ?></td>

<td><?php echo $u['lastname']; ?></td>

<td><?php echo $u['email']; ?></td>

<td><?php echo $u['username']; ?></td>

<td><?php echo $u['password']; ?></td>

<td>

<a href="#" >Edit</a>  |
<?php  $id=$u['id'];?>
<a  href="<?php echo site_url("users/delete/$id")?>" class="delete">Delete</a>

</td>
<?php }?>
</tr>

</tbody>
</table> 
```

这是 AJAX：

```
 $(document).ready(function(){

     $(".delete").click(function(){
       alert("Delete?");
         var href = $(this).attr("href");
         var btn = this;

        $.ajax({
          type: "GET",
          url: href,
          success: function(response) {

          if (response == "Success")
          {
             $(btn).closest('tr').fadeOut("slow");
          }
          else
          {
            alert("Error");
          }

       }
    });

   })
  }); 
```

最后是在 Codeigniter 中删除用户的控制器功能

```
 public function delete($id)//for deleting the user
  {
    $this->load->model('Users_m');

    $delete=$this->Users_m->delete_user($id);
      if($delete)
        {
          echo "Success";
        }
     else
        {
          echo "Error";
        }

  } 
```

我在哪里犯错？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T06:54:54.387

只是为了扩展这里已经给出的正确答案。

基本上，您的 JS 代码应如下所示：

```
$(document).ready(function(){

 $(".delete").click(function(event){
     alert("Delete?");
     var href = $(this).attr("href")
     var btn = this;

      $.ajax({
        type: "GET",
        url: href,
        success: function(response) {

          if (response == "Success")
          {
            $(btn).closest('tr').fadeOut("slow");
          }
          else
          {
            alert("Error");
          }

        }
      });
     event.preventDefault();
  })
}); 
```

这`event.preventDefault()`部分在这里很重要。因为它会阻止浏览器在您单击元素时采取默认操作。

在链接的情况下，这会将您重定向到`href`参数中定义的 url。这就是你所看到的。

您手动定义的事件总是首先触发，因此确实启动了 ajax 请求，但在您的事件处理程序之后，浏览器开始处理默认操作，中断 ajax 请求，并导航到单击的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T06:32:09.583

不应触发事件的默认操作。

为此使用[event.preventDefault()](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T06:33:41.747

确保将正确的对象设置为 'btn' var：

```
var btn = $(this); 
```

看看是不是这个问题！顺便说一句，您在以下位置缺少分号：

```
 var href = $(this).attr("href") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T06:48:26.093

```
$(".delete").click(function(e){
e.preventDefault();
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T10:30:58.563

您不会阻止锚点的默认行为，因此它将重定向您并发出 ajax 请求

```
$(document).ready(function(){

     $(".delete").click(function(e){
       alert("Delete?");
         e.preventDefault(); 
         var href = $(this).attr("href");
         var btn = this;

        $.ajax({
          type: "GET",
          url: href,
          success: function(response) {

          if (response == "Success")
          {
             $(btn).closest('tr').fadeOut("slow");
          }
          else
          {
            alert("Error");
          }

       }
    });

   })
  }); 
```

我希望这可以帮助:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-02T07:57:16.223

首先，您将*href*属性更改为另一个属性，例如名称或值，因为它第一次加载，另一次将值存储在*href*中，然后将其写入刷新页面

```
window.reload('true'); 
```

这肯定会帮助你

# jquery - Jquery模板未对齐

> ID：16128576
> 
> 赞同：1
> 
> 时间：2013-04-21T06:28:50.287
> 
> 标签：jquery, html, asp.net-mvc-4, signalr, jquery-templates

我有一个 html `table`。

```
<table id="blogPostContainer">
</table> 
```

`signalR`我使用and在此表中附加了一些值`tmpl`。

```
$.connection.hub.start().done(function () {
                booking.server.getAllDates().done(function (data) {
                    debugger;
                    for (var i = 0; i < data.length; i++) {
                        DateTempl = DateTempl.concat(data[i].Dates);
                    }
                    var blogPosts = { Date: [DateTempl] }
                    $("#blogPostTemplate").tmpl(blogPosts).appendTo("#blogPostContainer");

                });
            }); 
```

我正在`table tr td`使用 jquery taemplate 对齐格式

```
<script id="blogPostTemplate" type="text/x-jQuery-tmpl"> 

        <tr>
            <td>
            Date
            </td>
             {{each Date}} <td> ${$value} </td> {{/each}}
        </tr>

    </script> 
```

第一个`tr`和`td`标签正在工作。但是在每个循环`td`标签内部不起作用

请在下面查看我的结果 ![在此处输入图像描述](https://i.stack.imgur.com/GFFch.jpg)

第一个`Td`工作但第二个`td`不工作。我希望我的每个日期都在`td`标签内。任何人帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:23:17.997

尽管您尚未发布`DateTempl`声明，但它似乎是一个数组。并通过`[DateTempl]`调用将其包装到以下语句中的另一个数组中

```
var blogPosts = { Date: [DateTempl] }; 
```

因此，在查询模板中，`${$value}`将在一个表格单元格中显示您的整个数组。

您只需要删除`[]`它，它应该可以正常工作：

```
var blogPosts = { Date: DateTempl }; 
```

# java - 如何使用 `regex` 修剪已解析的字符串？

> ID：16128577
> 
> 赞同：2
> 
> 时间：2013-04-21T06:29:12.140
> 
> 标签：java, regex, string

我本可以使用，但在这种情况下`Decimal Format`我必须使用。`regex`我有以下 String myString = "0.44587628865979384"; 我需要将它修剪到小数点后三位，所以看起来像 0.445

我尝试了以下方法：

```
String myString = "0.44587628865979384";
String newString = myString.replaceFirst("(^0$.)(\\d{3})(\\d+)","$1$2");
// But this does not work. What is the problem in here? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T06:44:59.127

不是`(^0$.)`。它是`(\\d*.)`

```
String newString = myString.replaceAll("(\\d*.)(\\d{3})(\\d+)", "$1$2"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T06:42:25.230

好吧，一种合适的模式可能是“^\d\.\d{3}”，尽管您必须进行匹配才能检索它（即您正在获取您需要的内容，而不是替换您不需要的内容在你的例子中）。

...但是，您为什么要使用正则表达式来完成这项工作？

正则表达式用于查找文本中的常见模式，并让您提取/删除/列出它们。它不打算处理字符串测量

您需要使用 substring 方法将字符串切成字符子集*：*

```
myString.substring(5); 
```

如果小数点位置不同：

```
myString.substring(myString.indexOf(".") + 4); 
```

记住：“有些人在遇到问题时会想“我知道，我会使用正则表达式。”现在他们有两个问题。（[http://www.codinghorror.com/blog/2008/06/regular-expressions-now-you-have-two-problems.html](http://www.codinghorror.com/blog/2008/06/regular-expressions-now-you-have-two-problems.html)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T06:40:46.720

尝试这个：

```
String newString = myString.replaceAll"(.*\\....).*", "$1"); 
```

# c - 拖放、motion_notify_event、鼠标坐标晃动

> ID：16128578
> 
> 赞同：2
> 
> 时间：2013-04-21T06:30:24.500
> 
> 标签：c, drag-and-drop, gtk

然后我开始拖动一个图标（下面的代码），它开始在 2 个位置之间跳跃。

谁能帮我解决这个震动问题？

代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <gtk/gtk.h>
#include <gdk-pixbuf/gdk-pixbuf.h>
#include <string.h>

#define ICON_BUFFER 5

struct Icon {
  GtkWidget *image;
  int x,y,width,height;
};

GtkWidget *window;
GtkWidget *fixed;
struct Icon icons[ICON_BUFFER];

gboolean drag = FALSE;

static gboolean handleMove( GtkWidget *widget, GdkEventButton *event, gpointer data ){
  struct Icon *icon = (struct Icon*) data;

  icon->x = (int)event->x;
  icon->y = (int)event->y;
  gtk_fixed_move (GTK_FIXED (fixed), widget, icon->x, icon->y); 
  printf("move (%d , %d) %d\n", icon->x, icon->y,event->time);
  return TRUE;
}

static gboolean handleRelease( GtkWidget *widget, GdkEventButton *event, gpointer data ){
  g_signal_handlers_disconnect_by_func(widget, handleMove, data);
  printf("%s\n", "disconnect_handleMove");
  struct Icon *icon = (struct Icon*) data;
  printf("position (%d , %d)\n", icon->x, icon->y);
  drag = FALSE;
  return TRUE;
}

static gboolean handleClick( GtkWidget *widget, GdkEventButton *event, gpointer data ){
  //g_print ("Event box clicked at coordinates %f,%f\n", event->x, event->y);
  struct Icon *icon = (struct Icon*) data;

  if(!drag){
    drag = TRUE;
    printf("%s\n", "connect_handleMove");
    g_signal_connect (G_OBJECT (widget), "motion_notify_event" ,G_CALLBACK(handleMove), data);
    g_signal_connect (G_OBJECT (widget), "button-release-event",G_CALLBACK(handleRelease), data);
    printf("position (%d , %d)\n", icon->x, icon->y);
    return TRUE;
  }else
     return TRUE;

}

int main( int   argc, char *argv[] ){
  /* GtkWidget is the storage type for widgets */
  GtkWidget *event;
  GtkWidget *image;
  GtkWidget *background;
  GtkStyle *style;
  GdkPixbuf *pixbuf;

  gint i;

  gtk_init (&argc, &argv);
  window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  gtk_window_set_title (GTK_WINDOW (window), "Fixed Container");
  g_signal_connect (window, "destroy", G_CALLBACK (gtk_main_quit), NULL);
  gtk_container_set_border_width (GTK_CONTAINER (window), 0);

  fixed = gtk_fixed_new ();
  gtk_container_add (GTK_CONTAINER (window), fixed);
  gtk_widget_set_size_request(fixed,480,480);
  gtk_widget_show (fixed);

  for (i = 0 ; i < 4 ; i++) {
    event = gtk_event_box_new ();
    image = gtk_image_new_from_file("test2.jpg");

    icons[i].image = image;
    icons[i].x = i*50;
    icons[i].y = i*50;
    icons[i].width = 50;
    icons[i].height = 50;

    gtk_container_add (GTK_CONTAINER (event), image);
    gtk_fixed_put (GTK_FIXED (fixed), event, i*50, i*50);
    gtk_event_box_set_above_child(GTK_EVENT_BOX(event), FALSE);
        g_signal_connect (G_OBJECT (event), "button_press_event",
                          G_CALLBACK (handleClick), (gpointer) &icons[i]);
    gtk_event_box_set_visible_window(GTK_EVENT_BOX(event),(gboolean)FALSE);
    gtk_widget_show (image);
    gtk_widget_show (event);
  }

  gtk_widget_show (window);
  gtk_main ();
  return 0;
} 
```

可以使用（或 gtk+-2.0 而不是 gtk+-3.0）编译和运行代码：

cc pkg-config --cflags --libs gdk-pixbuf-2.0 gtk+-3.0 FixedDragAndDrop.c -o FixedDragAndDrop.o && ./FixedDragAndDrop.o

# android - 在 WebView 中按下视频链接时如何启动视频播放器

> ID：16128583
> 
> 赞同：0
> 
> 时间：2013-04-21T06:31:00.323
> 
> 标签：android, webview, media-player

我现在正在做 Kid ABC 歌曲，我将 YouTube 链接（例如：lUJpRSLQ2kg）注册到我的数据库中，我使用 PHP 将视频作为“videolist.php”重试，然后将其放入 WebView Activity 然后我需要播放视频播放器用户在 Android WebView Activity 中执行超链接点击 youtube 视频 id 时的 Activity。

WebView 中的 video_list.php （仅列出 youtube 链接 id 示例：7mOQb3E8ob0。不是这样的完整链接[http://www.youtube.com/watch?v=7mOQb3E8ob0](http://www.youtube.com/watch?v=7mOQb3E8ob0)）

```
<a href=\"kidabcsong://MediaPlayer_Activity/vid=<?=$sqlVideoResultList['fileurl']?>\">
<img src=\"<?=$sqlVideoResultList['imageurl']?>\">
</a> 
```

我的问题是：如何让视频播放器活动从 WebView 获取视频 ID 并播放？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T06:38:52.943

您可以使用youtube播放器，首先，注册并获取ID，然后

```
Intent intent = YouTubeStandalonePlayer.createVideoIntent(args);
startActivity(intent); 
```

# c# - 鼠标单击组合框会调用其下方控件上的鼠标单击事件

> ID：16128586
> 
> 赞同：1
> 
> 时间：2013-04-21T06:31:21.130
> 
> 标签：c#, silverlight

我正在使用 Silverlight 组合框。一旦我打开组合框并单击它调用的最后一个项目（除了所需的行为）组合框覆盖的网格的单击事件（打开时）。

（我尝试了 e.Handled 技术，在组合框事件处理程序上设置为 true，但它仍然在 Handled = false 的网格中停止）

（我还在网格处理程序中尝试了 e.OriginalSource 技术，但在这两种情况下 - 当直接单击网格或单击调用网格 habdler 的组合框时 - OriginalSource 是系统边框）

我怎样才能避免这种情况

# apache-flex - 如何使用链接类型：FlexBuilder 中的外部

> ID：16128589
> 
> 赞同：1
> 
> 时间：2013-04-21T06:32:09.167
> 
> 标签：apache-flex

，我想在flashbuilder中使用带有外部链接类型的swc库，但它总是报告找不到类的错误。有人知道如何使用这种链接类型吗？

# c# - 从其他模块棱镜设置属性

> ID：16128591
> 
> 赞同：0
> 
> 时间：2013-04-21T06:32:14.007
> 
> 标签：c#, wpf, mvvm, prism

我在 1 个模块中有带有 Prism 和 mvvm 架构的 wpf 应用程序，我有一个树视图，在其他模块中我有文本框。两个模块都正确加载。我想做的是-单击树视图节点。- 在视图模型中设置当前选定的对象。- 也触发一个事件（或其他东西）并将节点值设置为其他模块中的文本框

前两点工作正常。这是我想不通的第三个。

这是我的树视图代码。

```
 <TreeView Name="TreeViewTest" Grid.Row="1" Grid.Column="0"  ItemsSource="{Binding Path= TestObservable}">

        <TreeView.ItemContainerStyle>
            <Style TargetType="{x:Type TreeViewItem}">                
                    <Setter Property="IsSelected" Value="{Binding IsSelected}" />
            </Style>
        </TreeView.ItemContainerStyle>
        <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                    <TextBlock Text="{Binding Name}" Tag="{Binding Id}" />
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate>
    </TreeView> 
```

我设置选定对象的代码。

```
 private bool _selected = false;
    public bool IsSelected
    {
        get
        {
            return _selected;
        }
        set
        {
            if (_selected == value) return;
            _selected = value;
            NotifyPropertyChanged("IsSelected");
            this._selectedItem = this;               
            RaisePropertyChanged(() => Name);

        }
    } 
```

并且 viewmodel isSelected 是实际绑定树视图模块的主视图模型的子视图模型。

所以如下

```
public interface ITreeViewModel
{
    ITreeViewModelView { get; }
    ObservableCollection<IChildTreeViewModel> TestObservable{ get; set; }

} 
```

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:34:15.477

嗯，Prism 说我有四种模块之间的通信方式：（事件聚合器、共享服务、区域上下文和命令），我添加了另一种通过容器共享对象的方式。但是，我相信在您的情况下最好的是（事件聚合器或通过容器共享。

**事件聚合器：**

1）在项目中定义一个所有模块都可以访问它的事件（Infrastructure.dll 用于实例）。此事件必须继承表单 CompositePresentationEvent。YourObjectClass 是您希望在模块之间传输的数据类：

```
namespace Infrastructure
{
 public class ObjectChangedEvent: CompositePresentationEvent<YourObjectClass>
 {       
 } 
```

2）将事件聚合器注入源模块和目标模块的视图模型

```
 IEventAggregator _eventAggregator;
    private readonly IRegionManager _regionManager;
    private readonly IUnityContainer _container;
    private Creator _creator;

    public NavigationViewModel(IEventAggregator eventAggregator, IRegionManager regionManager, IUnityContainer container)
    {
        _eventAggregator = eventAggregator;
        _regionManager = regionManager;
        _container = container;
    } 
```

3）从源视图模型发布定义的事件，因为目标视图模型已经订阅了它。在目标视图模型中：

```
 eventAggregator.GetEvent<UnCheckEvent>().Subscribe(CheckHandler); 
```

在源视图模型中：

```
eventAggregator.GetEvent<UnCheckEvent>().Publish(YourObject); 
```

4）很明显，最后你应该实现 CheckHandler 方法来获取你的对象，你可以将它设置为绑定到你的 textbox 的属性。

我希望这会有所帮助

# c# - C# 处理标准输出。如何从运行的 EXE 发送输出？

> ID：16128592
> 
> 赞同：1
> 
> 时间：2013-04-21T06:32:46.260
> 
> 标签：c#, winforms, process, output

我有两个程序，一个是游戏，一个是游戏的启动器。我首先创建了启动器，以接收来自游戏的基本信息并检测任何类型的退出（崩溃、任务管理器进程停止等）

我将附上我当前的进程运行器代码，它似乎是互联网上的所有解决方案，**但我不知道如何让游戏向启动器发送信息。我试过 Console.WriteLine("login=..."); 但它似乎没有发送任何东西。**

```
 private void button1_Click(object sender, EventArgs e)
     {
        using (Process exeProcess = Process.Start(new ProcessStartInfo() { UseShellExecute = false,
        FileName = "Game.exe",
        WorkingDirectory = Environment.CurrentDirectory,
        RedirectStandardOutput = true}))
        {
            string output = "";
            while (!exeProcess.HasExited)
            {
                try
                {
                    output += exeProcess.StandardOutput.ReadToEnd() + "\r\n";
                }
                catch (Exception exc)
                {
                    output += exc.Message + "::" + exc.InnerException + "\r\n";
                }
            }

            MessageBox.Show(output);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:59:36.887

关于您的代码，通过添加以下行，您可以获得游戏抛出的错误消息。

```
RedirectStandardError = true, 
```

如果您在 .NET 中开发游戏，您可以返回相应的错误代码，如下所示。根据错误代码，您可以在启动器中显示适当的消息

```
 enum GameExitCodes
    {
        Normal=0,
        UnknownError=-1,
        OutOfMemory=-2
    }

    //Game Application
    static void Main(string[] args)
    {
        try
        {
            // Start game

            Environment.ExitCode = (int)GameExitCodes.Normal;
        }
        catch (OutOfMemoryException)
        {
            Environment.ExitCode = (int)GameExitCodes.OutOfMemory;
        }
        catch (Exception)
        {
            Environment.ExitCode = (int)GameExitCodes.UnknownError;
        }
    } 
```

**注意：**您可以查看这个用 C# 开发的[**开源游戏启动器**](https://github.com/painejake/GameLauncher)作为参考，或根据您的需要对其进行修改。

**编辑：根据评论添加信息**

有多种方法可以在 2 个 .NET 进程之间启用通信。他们是

1.  [匿名管道](http://msdn.microsoft.com/en-us/library/bb546102.aspx)
2.  [命名管道](http://msdn.microsoft.com/en-us/library/bb546085.aspx)
3.  [使用 Win32 WM_COPYDATA](http://www.codeproject.com/Articles/19570/Inter-Process-Communication-with-C)
4.  [MSMQ](http://fransiscuss.com/2012/06/01/msmq-basic-tutorial/)

# python - 字符串在另一个字符串中出现多少次

> ID：16128593
> 
> 赞同：4
> 
> 时间：2013-04-21T06:33:28.273
> 
> 标签：python, algorithm, full-text-search

我有一个不变的大型静态二进制文件（10GB）。

我希望能够将小字符串（每个 15 字节或更低）作为输入，然后确定哪个字符串频率最低。

我知道如果不实际搜索整个二进制文件，我将无法准确确定这一点，所以我知道这将是一个近似值。

构建树/哈希表是不可行的，因为它需要大约 256^15 个字节，这非常多。

我有大约 100GB 的磁盘空间和 8GB 的​​ RAM 将专用于这项任务，但我似乎找不到任何方法来完成这项任务而无需实际检查文件。

我有尽可能多的时间来准备大二进制文件，然后我需要多次确定哪个是最不频繁的字符串。

有任何想法吗？

谢谢！丹尼尔。

（顺便说一句：如果重要的话，我正在使用 Python）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:49:10.913

也许构建一个哈希表，其中包含尽可能多的 n 元组的计数，因为您可以负担得起存储？您可以修剪不再出现的树木。我不会将其称为“近似值”，但可以称为“上限”，以确保检测到未出现的字符串。

因此，假设您可以构建所有 4 元组。

然后要计算“ABCDEF”的出现次数，您将拥有 count(ABCD)、count(BCDE)、count(CDEF) 的最小值。如果其中任何一个为零，则保证不会出现该字符串。如果是一个，它最多会出现一次（但可能根本不会出现）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T11:38:10.203

因为您有一个不会更改的大型静态字符串，您可以将预处理此字符串的一次性工作与回答查询的工作区分开来。在更强大的机器上完成一次性工作可能会很方便。

如果你能找到一台具有一个数量级或更多内部存储的机器，你可以构建一个后缀数组——一个偏移量数组，按照从偏移量开始的后缀的排序顺序排列到流中。这可以存储在外部存储中以进行查询，您可以将其与二进制搜索一起使用，以按排序顺序查找查询字符串出现的第一个和最后一个位置。显然，两者之间的距离将为您提供出现次数，假设 16GB 为 2^34 字节，二进制搜索将需要大约 34 次二进制切碎来执行 16GB，因此每个查询应该花费大约 68 次磁盘寻道。

期望您找到这么多的内部存储空间可能不合理，但我刚刚以大约 50 英镑的价格购买了一个 1TB USB 硬盘，所以我认为您可以增加一次工作的外部存储空间。外部存储器中有用于后缀数组构造的算法，但由于您的查询字符串限制为 15 个字节，因此您不需要任何复杂的东西。只需写出在每个偏移处找到的 15 字节字符串，后跟 5 字节偏移编号，即可创建 200GB 数据，然后使用外部排序对这些 20 字节记录进行排序。这将为您提供 50GB 的按排序顺序排列的字符串索引，以便您放入外部存储以回答查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T15:07:33.707

如果您事先知道所有查询，或者准备将它们批量处理，另一种方法是从它们构建[http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)树。这需要与查询的总大小成线性关系的时间。然后，您可以按时间将 10GB 数据流过它们，这与该数据大小的总和以及任何字符串找到匹配项的次数成正比。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T15:24:12.340

由于您正在寻找频率最低的，并且愿意接受近似解决方案。您可以使用一系列[Bloom 过滤器](http://en.wikipedia.org/wiki/Bloom_filter)而不是哈希表。如果您使用足够大的查询，则无需担心查询大小，因为您可能可以将误报率保持在较低水平。

这个想法是遍历所有可能的查询大小并从中制作子字符串。例如，如果查询将介于 3 和 100 之间，那么它将花费 (N * ((i) 从 i = 3 到 i = 100 的总和))。然后将子集一一添加到其中一个布隆过滤器中，以使过滤器中不存在查询，如果需要，创建一个具有相同哈希函数的新布隆过滤器。您可以通过遍历每个过滤器并检查其中是否存在查询来获得计数。然后，每个查询都简单地通过每个过滤器并检查它是否存在，如果存在，它将计数加 1。

您需要尝试平衡误报率和过滤器的数量。如果其中一个过滤器的误报率太高，它就没有用，同样，如果您有数万亿个布隆过滤器（如果每个子字符串一个过滤器，则很有可能）。有几种方法可以处理这些问题。

*   要减少过滤器的数量：
    1.  随机删除过滤器，直到只剩下这么多。这可能会增加假阴性率，这可能意味着最好简单地删除具有最高预期假阳性率的过滤器。
    2.  随机合并过滤器，直到只剩下这么多。理想情况下，避免过于频繁地合并过滤器，因为它会增加误报率。实际上，如果不使用可扩展版本（见下文），您可能有太多事情要做，因为管理误报率可能已经够难了。
    3.  在添加到布隆过滤器时避免贪婪的方法也可能不是一件坏事。相当有选择性地将某些东西添加到哪个过滤器中。

您可能最终不得不实现[可扩展的布隆过滤器](http://en.wikipedia.org/wiki/Bloom_filter#Scalable_Bloom_filters)以保持事情的可管理性，这听起来与我的建议相似，所以应该可以正常工作。

# paypal - 贝宝标准 - 时间限制

> ID：16128596
> 
> 赞同：0
> 
> 时间：2013-04-21T06:34:11.237
> 
> 标签：paypal, e-commerce, standards

我正在使用 Paypal Standard 和经典的 html 表单将客户发送到 Paypal。我需要确保客户在 10 分钟内付款。我希望为一个变量提供资金，该变量允许我设置一个日期时间，超过该日期时间，Paypal 将不再接受交易。[我浏览了https://cms.paypal.com/mx/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables](https://cms.paypal.com/mx/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables)上的变量 我没有找到任何东西

有人知道如何设置这样的时间限制吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:51:55.177

PayPal 按钮变量中没有允许您设置买家付款时间限制的变量。唯一可能接近为您工作的事情，这也取决于您将创建多少个按钮，并且在他们准备好支付时，一次性创建托管按钮。您可以使用[BMCreateButton API](https://www.x.com/developers/paypal/documentation-tools/api/bmcreatebutton-api-operation-nvp)创建按钮。然后让您的系统在您的网站上生成代码，以便买家可以点击按钮。创建按钮后，将其与时间戳一起存储在数据库中。然后将您的设置设置为每隔一段时间运行一个 cron 作业，检查时间戳。如果时间戳超出您希望买家能够单击按钮的时间段，请让您的系统使用[BMManageButtonStatus API](https://www.x.com/developers/paypal/documentation-tools/api/bmmanagebuttonstatus-api-operation-nvp)从您的帐户中删除按钮。然后，这将阻止买家点击它并使用按钮进行付款。

# javascript - 如何设置永久禁用/启用 chrome 扩展样式表的选项？

> ID：16128599
> 
> 赞同：2
> 
> 时间：2013-04-21T06:34:48.033
> 
> 标签：javascript, google-chrome, google-chrome-extension, popup, toggle

我发现this other question是哪种答案但没有。我很想做同样的事情。

但是该问题的答案不会**永久**更改样式表，因为在页面重新加载时，样式表会恢复并且没有任何更改。

[对于 Google Chrome 扩展，如何在弹出窗口中定义样式表切换？](https://stackoverflow.com/questions/9646999/for-a-google-chrome-extension-how-do-i-define-a-stylesheet-toggle-within-the-po)

> 当用户单击扩展的浏览器图标时，它会弹出已定义的弹出窗口。
> 
> 当用户单击弹出窗口中的按钮时，我需要创建一个切换按钮来打开/关闭特定页面/域的样式表。
> 
> 例如，当用户使用 Adblock 扩展程序时，当用户单击浏览器图标时，它会弹出包含一系列链接的弹出窗口。一个这样的链接是“不要在这个页面上运行”，然后它会变成“启用”，用户可以点击它来重新打开它。
> 
> 另一个例子（更好的例子）：经典弹出窗口拦截器在弹出窗口上有一个按钮，上面写着“将此页面添加到黑名单”，一旦点击更改为“从黑名单中删除”。
> 
> image1 i.stack.imgur.com/92gVx.jpg
> 
> image2 i.stack.imgur.com/Xvyyp.jpg

这是我目前在 HTML 文件中的内容。通过这种方式，有一个简单的复选框，如果选中它，它将运行 javascript：

```
<script type="text/javascript">
  $("#button").click(function(){
    chrome.extension.sendRequest({ msg: "toggle" });
    });
</script>
<input type="checkbox" checked="checked" id="button" /> TOGGLE IT 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T06:56:11.097

您可以基于某种切换来注入它，而不是基于用户交互来注入它。只需为该`chrome.tabs.onUpdated`事件添加一个侦听器并针对您想要受影响的网站过滤它，然后如果您的切换设置为 true，则注入 css。例如：

```
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab){
  //assuming `cssToggle` is defined
  if(tab.url && cssToggle == "true"){
    // assuming `url` is the url you want to change
    if(tab.url.indexOf(url) >-1)
      chrome.tabs.insertCSS(tabId, {file:"style.css", runAt: "document_start"});
  }
}); 
```

使用选项页面切换样式表的示例：

**清单.json**

```
"options_page": "options.html", 
```

**选项.html**

```
<script src="options.js"></script>
[...]
<select id="cssSelect">
  <option value="true">Enabled</option>
  <option value="false">Disabled</option>
</select> 
```

**选项.js**

```
$('#cssSelect').change(function(){
  chrome.runtime.sendMessage({method: 'setCSS', css:$(this).val()});
}); 
```

**背景.js**

```
chrome.runtime.onMessage.addListener(function(message,sender,sendResponse){
  if(message.method == 'setCSS')
    cssToggle = message.css;
}); 
```

原谅我使用的 jQuery，我不想将它转换为纯 JS 并给你不正确的代码。所以我在清单中定义了一个选项页面，在该选项页面上我有一个带有启用/禁用选项的选择。当它发生变化时，我将新值发送到我的后台页面并`cssToggle`相应地更新 var。请注意，我现在正在针对字符串进行测试，因为那是我在消息中发送的内容，它只会减少代码。

至于有多个样式切换。如果只是几个，那么你可以只拥有多个，但如果不止于此，我建议做一些不同的事情。也许将它定义为一个带有 url、toggle 和要注入的文件的对象数组，如下所示：

```
[{url:url1,toggle:toggle1,file:file1},{url:url2, toggle:toggle2, file:file2},...] 
```

# php - 检查 BIT 字段的条件

> ID：16128600
> 
> 赞同：0
> 
> 时间：2013-04-21T06:34:49.483
> 
> 标签：php, mysql, boolean, conditional-statements

![在此处输入图像描述](https://i.stack.imgur.com/sbHa6.png)

...我正在检查这个字段，如下所示：

`if((bool)$website['IsDeleted']) { }`

但它总是返回一个空字符串，无论 MySQL 字段中的值是它`0`还是`1`：

`["IsDeleted"]=> string(1) "" }`

请告诉我我在这里做什么？条件`if`需要修改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T06:37:46.780

我看不出你的 if 语句有什么问题。

```
<?php
$website['IsDeleted'] = 1;
if((bool)$website['IsDeleted']) { echo 'found you';}
?> 
```

会输出找到你

```
<?php
$website['IsDeleted'] = 1;
if((bool)$website['IsDeleted']) { echo $website['IsDeleted'];}
?> 
```

将输出 1

如果您的值为 NULL，则它将不起作用。然后您还必须检查 NULL 值。

```
<?php
$website['IsDeleted'] = null;
if((bool)$website['IsDeleted'] || $website['IsDeleted'] === null) { echo 'found you';}
?> 
```

会输出找到你。

# python - 从 SQL 转换为 SQLAlchemy

> ID：16128602
> 
> 赞同：0
> 
> 时间：2013-04-21T06:35:25.337
> 
> 标签：python, sql, sqlalchemy

我有以下 sql 脚本。

```
SELECT *
FROM movies
LEFT JOIN possession
ON movies.id = possession.movie_id
AND possession.master_id = ?
WHERE possession.id is NULL
ORDER BY movies.id DESC 
```

并需要帮助在 sqlalchemy 中进行说明。请问有人可以帮我吗？

以下不起作用：

```
movies = movie.Movie.query.join(possession.Possession, movie.Movie.id == possession.Possession.movie_id)\
            .filter(possession.Possession.master_id == session.get('userId'))\
            .filter(not_(possession.Possession.id)).order_by(movie.Movie.id.desc()).all() 
```

非常感谢！

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:30:53.250

翻译 SQL 查询最直接的方法是下面的 ORM 查询：

```
qry = (session.query(Movie)
        .outerjoin(Possession, and_(Movie.id == Possession.movie_id, Possession.master_id == master_id))
        .filter(Possession.id == None)
        .order_by(desc(Movie.id))
        )
movies = qry.all() 
```

产生：

```
SELECT movies.id AS movies_id, movies.name AS movies_name
FROM movies LEFT OUTER JOIN possessions ON movies.id = possessions.movie_id AND possessions.master_id = :master_id_1
WHERE possessions.id IS NULL ORDER BY movies.id DESC 
```

我还认为，与使用的替代方法[`any`](http://docs.sqlalchemy.org/en/rel_0_8/orm/internals.html#sqlalchemy.orm.properties.RelationshipProperty.Comparator.any)（见下文）相比，这将是更快的实现，它更简洁，但`SQL`它产生的不是。这也假设存在关系`Movie.possessions = relationship(Possession)`：

```
qry = (session.query(Movie)
        .filter(~Movie.possessions.any(Possession.master_id == master_id))
        .order_by(desc(Movie.id))
        )
movies = qry.all() 
```

产生：

```
SELECT movies.id AS movies_id, movies.name AS movies_name
FROM movies
WHERE NOT (EXISTS (SELECT 1
FROM possessions
WHERE movies.id = possessions.movie_id AND possessions.master_id = :master_id_1)) ORDER BY movies.id DESC 
```

# javascript - div内的可滚动画布

> ID：16128604
> 
> 赞同：27
> 
> 时间：2013-04-21T06:35:54.027
> 
> 标签：javascript, jquery, css, html

我有一个 html5 画布。我需要在 div( `Div1`) 中显示它的固定部分。当我向内滑动时`Div1`，我需要滚动画布。所以当我滚动时，我会看到画布的相应部分。

![在此处输入图像描述](https://i.stack.imgur.com/3wAW6.png)

我试过这样的事情：

```
<div id="Div1" style=" float: left; width: 50px; overflow:hidden; ">
   <canvas id="myCanvas1" width="200px" style="border: 1px solid #ff0000; position: absolute;">
   </canvas>
</div> 
```

[jsFiddled here](http://jsfiddle.net/9g3GG/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T06:47:47.547

它不起作用（在某些“设计”条件下从 div 内部滚动画布），首先您的溢出被隐藏。尝试滚动画布内的**内容。**

或者，试试这个：http: [//jsfiddle.net/9g3GG/2/](http://jsfiddle.net/9g3GG/2/)

```
<div id="Div1" style=" float: left; width: 150px; overflow:scroll; ">
        <canvas id="myCanvas1" width="200" style="border:1px solid #ff0000;">asdf asd as asfqwe asd asdfasdf asd as asfqwe asd asdfasdf asd as asfqwe asd asdf</canvas>
    </div>
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-04-09T00:34:01.900

这是一个使用超大画布的演示，并通过调整 CSS 边距来滚动鼠标移动：[https ://jsfiddle.net/ax7n8944/](https://jsfiddle.net/ax7n8944/)

HTML：

```
<div id="canvasdiv" style="width: 500px; height: 250px; overflow: hidden">
    <canvas id="canvas" width="10000px" height="250px"></canvas>
</div> 
```

JS：

```
var canvas = document.getElementById("canvas");
var context = canvas.getContext('2d');
var dragging = false;
var lastX;
var marginLeft = 0;

for (var i = 0; i < 1000; i++) {
    context.beginPath();
    context.arc(Math.random() * 10000, Math.random() * 250, 20.0, 0, 2 * Math.PI, false);
    context.stroke();
} 

canvas.addEventListener('mousedown', function(e) {
    var evt = e || event;
    dragging = true;
    lastX = evt.clientX;
    e.preventDefault();
}, false);

window.addEventListener('mousemove', function(e) {
    var evt = e || event;
    if (dragging) {
        var delta = evt.clientX - lastX;
        lastX = evt.clientX;
        marginLeft += delta;
        canvas.style.marginLeft = marginLeft + "px";
    }
    e.preventDefault();
}, false);

window.addEventListener('mouseup', function() {
    dragging = false;
}, false); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-12T19:32:20.637

最好在画布内滚动，请参阅此 Phaser 插件来做到这一点[https://jdnicholsc.github.io/Phaser-Kinetic-Scrolling-Plugin/](https://jdnichollsc.github.io/Phaser-Kinetic-Scrolling-Plugin/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-20T14:13:15.703

1.  画布中的“滚动”，您需要处理 2 种情况：
    *   在此画布中绑定事件“mousedown”并在“mousedown”绑定函数中绑定事件“mouseup”。
    *   在此画布中绑定事件“DOMmouseup”。用户可以在鼠标滚轮按钮滚动。
2.  像滚动一样显示画布
    1.  重绘画布
    2.  在画布中使用 clip()。重新设置此剪辑的矩形以显示您的画布
3.  请在 canvas 的 css 中删除“position:absolute”。并为您的“div”设置高度

希望它会帮助你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-29T18:10:42.727

绘制了 div 的线条。将行大小设置为 0：

```
DIVofCanvas {
    line-height: 0px;
} 
```

# android - 相机预览处于纵向模式，但拍摄的图像已旋转

> ID：16128608
> 
> 赞同：18
> 
> 时间：2013-04-21T06:36:40.500
> 
> 标签：android, android-camera

我正在尝试使用相机拍摄照片。默认情况下预览处于横向模式，我可以使用将其更改为纵向模式

```
 setCameraDisplayOrientation(this,1,  mCamera);
    public static void setCameraDisplayOrientation(Activity activity,
         int cameraId, android.hardware.Camera camera) {
     android.hardware.Camera.CameraInfo info =
             new android.hardware.Camera.CameraInfo();
     android.hardware.Camera.getCameraInfo(cameraId, info);
     int rotation = activity.getWindowManager().getDefaultDisplay()
             .getRotation();
     int degrees = 0;
     switch (rotation) {
         case Surface.ROTATION_0: degrees = 0; break;
         case Surface.ROTATION_90: degrees = 90; break;
         case Surface.ROTATION_180: degrees = 180; break;
         case Surface.ROTATION_270: degrees = 270; break;
     }

     int result;
     if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
         result = (info.orientation + degrees) % 360;
         result = (360 - result) % 360;  // compensate the mirror
     } else {  // back-facing
         result = (info.orientation - degrees + 360) % 360;
     }
     camera.setDisplayOrientation(result);
 } 
```

捕获的图像存储在 myImages 文件夹下。但是图像是旋转的。（看起来图像是在横向模式下拍摄的）

那么如何旋转捕获的图像并保存它呢？

```
public class MainActivity extends Activity {

private static final int REQUEST_CODE = 1; 
ImageView imageView;
Button b;
private Camera mCamera;
private CameraPreview mPreview;
private Bitmap bitmap;
private PictureCallback mPicture;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    boolean check =checkCameraHardware(MainActivity.this);
    if(check)
    {
         mCamera = getCameraInstance();

        // mCamera.setDisplayOrientation(90);
         setCameraDisplayOrientation(this,
                 1,  mCamera);//requires min sdk 9
    }
    // Create an instance of Camera
    mPicture = new PictureCallback() {

        @Override
        public void onPictureTaken(byte[] data, Camera camera) {

            File imagesFolder = new File(Environment.getExternalStorageDirectory(), "MyImages");
            if(!imagesFolder.exists())
            imagesFolder.mkdirs();   
            File pictureFile = new File(imagesFolder, "image.jpg");

            try {
                FileOutputStream fos = new FileOutputStream(pictureFile);

                System.out.println("hello");
                fos.write(data);
                fos.close();
            } catch (FileNotFoundException e) {
                Log.d("No File", "File not found: " + e.getMessage());
            } catch (IOException e) {
                //Log.d(TAG, "Error accessing file: " + e.getMessage());
            }
        }
    };

    // Create our Preview view and set it as the content of our activity.
    mPreview = new CameraPreview(this, mCamera);
    FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
    preview.addView(mPreview);
     b = (Button) findViewById(R.id.button_capture);
     b.setOnClickListener(new OnClickListener()
      {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
                 mCamera.takePicture(null, null, mPicture);
                 Toast.makeText(MainActivity.this, "Called",1000).show();

        }

      });
  }
 public static void setCameraDisplayOrientation(Activity activity,
         int cameraId, android.hardware.Camera camera) {
     android.hardware.Camera.CameraInfo info =
             new android.hardware.Camera.CameraInfo();
     android.hardware.Camera.getCameraInfo(cameraId, info);
     int rotation = activity.getWindowManager().getDefaultDisplay()
             .getRotation();
     int degrees = 0;
     switch (rotation) {
         case Surface.ROTATION_0: degrees = 0; break;
         case Surface.ROTATION_90: degrees = 90; break;
         case Surface.ROTATION_180: degrees = 180; break;
         case Surface.ROTATION_270: degrees = 270; break;
     }

     int result;
     if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
         result = (info.orientation + degrees) % 360;
         result = (360 - result) % 360;  // compensate the mirror
     } else {  // back-facing
         result = (info.orientation - degrees + 360) % 360;
     }
     camera.setDisplayOrientation(result);
 }
private boolean checkCameraHardware(Context context) {
    if (context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA)){
        // this device has a camera
         Toast.makeText(this, "Phone has camera", Toast.LENGTH_LONG).show();
        return true;
    } else {
        // no camera on this device
         Toast.makeText(this, "Phone has no camera", Toast.LENGTH_LONG).show();
        return false;
    }
}
public static Camera getCameraInstance(){
    Camera c = null;
    try {
        c = Camera.open(); // attempt to get a Camera instance
    }
    catch (Exception e){
        // Camera is not available (in use or does not exist)
    }
    return c; // returns null if camera is unavailable
}

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    mCamera.release();
}
  } 
```

CameraPreview 类与开发者网站[http://developer.android.com/guide/topics/media/camera.html中的相同](http://developer.android.com/guide/topics/media/camera.html)

注意：我使用的是后置摄像头而不是前置摄像头。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-06-05T13:11:27.817

在人像模式下从相机拍照时，我遇到了同样的问题。下面的代码行解决了我的问题：

```
public static void setCameraDisplayOrientation(Activity activity, int cameraId, android.hardware.Camera camera) {
    android.hardware.Camera.CameraInfo info = new android.hardware.Camera.CameraInfo();
    android.hardware.Camera.getCameraInfo(cameraId, info);
    int rotation = activity.getWindowManager().getDefaultDisplay().getRotation();
    int degrees = 0;
    switch (rotation) {
    case Surface.ROTATION_0:
            degrees = 0;
            break;
    case Surface.ROTATION_90:
            degrees = 90;
            break;
    case Surface.ROTATION_180:
            degrees = 180;
            break;
    case Surface.ROTATION_270:
            degrees = 270;
            break;
    }

    int result;
    if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
            result = (info.orientation + degrees) % 360;
            result = (360 - result) % 360; // compensate the mirror
    } else { // back-facing
            result = (info.orientation - degrees + 360) % 360;
    }
    camera.setDisplayOrientation(result);
} 
```

在surfaceCreated回调中调用`setCameraDisplayOrientation()`方法如下：

```
@Override
public void surfaceCreated(SurfaceHolder holder) {
    camera = Camera.open();
    setCameraDisplayOrientation(getActivity(), CameraInfo.CAMERA_FACING_BACK, camera);
} 
```

我不得不在相机`onPictureTaken()`回调中旋转图像：

```
camera.takePicture(null, null, new PictureCallback() {

        @Override
        public void onPictureTaken(byte[] data, Camera camera) {

            if (data != null) {
                int screenWidth = getResources().getDisplayMetrics().widthPixels;
                int screenHeight = getResources().getDisplayMetrics().heightPixels;
                Bitmap bm = BitmapFactory.decodeByteArray(data, 0, (data != null) ? data.length : 0);

                if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) {
                    // Notice that width and height are reversed
                    Bitmap scaled = Bitmap.createScaledBitmap(bm, screenHeight, screenWidth, true);
                    int w = scaled.getWidth();
                    int h = scaled.getHeight();
                    // Setting post rotate to 90
                    Matrix mtx = new Matrix();
                    mtx.postRotate(90);
                    // Rotating Bitmap
                    bm = Bitmap.createBitmap(scaled, 0, 0, w, h, mtx, true);
                }else{// LANDSCAPE MODE
                    //No need to reverse width and height
                    Bitmap scaled = Bitmap.createScaledBitmap(bm, screenWidth,screenHeight , true);
                    bm=scaled;
                }
                photoPreview.setImageBitmap(bm);
            }
            isImageCaptured = true;
            photoPreview.setVisibility(View.VISIBLE);
            surfaceView.setVisibility(View.GONE);
        }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-17T11:55:42.303

下面的代码适用于前置摄像头。

```
if (data != null) {
                try {
                    int screenWidth = getResources().getDisplayMetrics().widthPixels;
                    int screenHeight = getResources().getDisplayMetrics().heightPixels;
                    bm = BitmapFactory.decodeByteArray(data, 0,
                            (data != null) ? data.length : 0);
                    CameraInfo info = new CameraInfo();
                    Camera.getCameraInfo(cameraFace, info);
                    if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) {
                        // Notice that width and height are reversed
                        // Bitmap scaled = Bitmap.createScaledBitmap(bm,
                        // screenHeight, screenWidth, true);
                        // int w = scaled.getWidth();
                        // int h = scaled.getHeight();
                        // Setting post rotate to 90
                        Matrix mtx = new Matrix();
                        mtx.postRotate(90);
                        if (cameraFace == CameraInfo.CAMERA_FACING_FRONT)
                            mtx.postRotate(180);
                        // Rotating Bitmap
                        bm = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),
                                bm.getHeight(), mtx, true);
                    } else {// LANDSCAPE MODE
                        Bitmap scaled = Bitmap.createScaledBitmap(bm,
                                screenWidth, screenHeight, true);
                        bm = scaled;
                    }
                } catch (Exception e) {
                } catch (Error e) {
                }
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-22T07:04:16.290

是的，我尝试了答案中的方式，它适用于后置摄像头，前置摄像头，它需要旋转 270 而不是 90。:)

# android - 如何在 Android 中添加 3...2...1...GO 的倒数计时器？

> ID：16128616
> 
> 赞同：-1
> 
> 时间：2013-04-21T06:38:52.533
> 
> 标签：android, audio, stopwatch, countdowntimer

我目前正在开发一个秒表，但我不明白如何向它添加一个有动画的倒数计时器。它应该在点击秒表的开始按钮时触发，同时我有一个 mp3 声音剪辑 3 ...2...1...Go 应该与倒计时一起玩.. 之后应该触发秒表...

很抱歉提出这么多要求，但请详细给出您的答案，如在哪个文件中放置哪个命令......

PS :- 我使用的是 Google Inc. 提供的 ADT Eclipse。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T06:49:53.280

尝试这个

```
long minute = 1000*60;//convert millescond to minute 
long close_minutes = 5*minute;//set for 5 minutes

         Handler handler = new Handler();
         Runnable r=new Runnable() {
              @Override
              public void run() {
                  //do something count down is finished
             }
         };
        handler.postDelayed(r, close_minutes); 
```

# c - 与gcc中的共享库链接时如何为可执行文件生成位置相关代码？

> ID：16128617
> 
> 赞同：2
> 
> 时间：2013-04-21T06:38:52.520
> 
> 标签：c, linux, gcc, elf, pic

我正在学习ELF。我想在链接共享库时找到位置相关的可执行文件和位置无关的可执行文件之间的elf格式的区别。

但是在与共享库链接时，我无法为可执行文件生成与位置相关的代码。

```
/*Lib.c*/
static int a;
extern int b;
int c=1;
extern void exit();
void set_value()
{
    a=1;
    b=1;
    c=1;
}
void run()
{
    set_value();
    exit();
} 
```

拳头，使用 gcc 生成共享动态库：

```
gcc -m32 -nostdlib -o Lib.so Lib.c 
```

请注意，我不使用 -fpic 为 Lib.so 生成与位置无关的代码。

现在，我有另一个文件 main.c 需要与 Lib.so 链接：

```
/*main.c*/
extern void run();
int b=2;
void nomain()
{
    run();
}
void exit()
{
    asm("int $0x80 \n\t"
        ::"a"(1),"b"(42));

} 
```

使用以下命令将 main.c 与 Lib.so 链接：

```
gcc  -m32 -e nomain  -nostartfiles  -fno-builtin  -o a.out main.c ./Lib.so 
```

但是，当与共享库链接时，gcc 默认会将 main.c 编译为与位置无关的代码，即使此库不使用 pic。

我想知道 gcc 是否有一些选项可以为可执行文件生成位置相关？

我发布了 Lib.so 和 a.out 的部分信息。我们可以看到 a.out 中有 '.plt' 和 '.got.plt' 部分，这意味着 a.out 使用 PIC。

```
 /*Section for Lib.so*/
  Section Headers:
  [Nr] Name              Type            Addr     Off    Size   ES Flg Lk Inf Al
  [ 0]                   NULL            00000000 000000 000000 00      0   0  0
  [ 1] .gnu.hash         GNU_HASH        000000b4 0000b4 00003c 04   A  2   0  4
  [ 2] .dynsym           DYNSYM          000000f0 0000f0 000090 10   A  3   1  4
  [ 3] .dynstr           STRTAB          00000180 000180 000030 00   A  0   0  1
  [ 4] .rel.dyn          REL             000001b0 0001b0 000028 08   A  2   0  4
  [ 5] .text             PROGBITS        000001d8 0001d8 000033 00  AX  0   0  4
  [ 6] .dynamic          DYNAMIC         0000120c 00020c 000078 08  WA  3   0  4
  [ 7] .got.plt          PROGBITS        00001284 000284 00000c 04  WA  0   0  4
  [ 8] .data             PROGBITS        00001290 000290 000004 00  WA  0   0  4
  [ 9] .bss              NOBITS          00001294 000294 000004 00  WA  0   0  4
  [10] .comment          PROGBITS        00000000 000294 00002e 00      0   0  1
  [11] .shstrtab         STRTAB          00000000 0002c2 00006a 00      0   0  1
  [12] .symtab           SYMTAB          00000000 00055c 000170 10     13  15  4
  [13] .strtab           STRTAB          00000000 0006cc 000057 00      0   0  1
  /*Section for a.out*/
  Section Headers:
  [Nr] Name              Type            Addr     Off    Size   ES Flg Lk Inf Al
  [ 0]                   NULL            00000000 000000 000000 00      0   0  0
  [ 1] .interp           PROGBITS        080480f4 0000f4 000013 00   A  0   0  1
  [ 2] .gnu.hash         GNU_HASH        08048108 000108 000034 04   A  3   0  4
  [ 3] .dynsym           DYNSYM          0804813c 00013c 000070 10   A  4   1  4
  [ 4] .dynstr           STRTAB          080481ac 0001ac 000037 00   A  0   0  1
  [ 5] .rel.plt          REL             080481e4 0001e4 000008 08   A  3   6  4
  [ 6] .plt              PROGBITS        080481ec 0001ec 000020 04  AX  0   0  4
  [ 7] .text             PROGBITS        0804820c 00020c 000020 00  AX  0   0  4
  [ 8] .dynamic          DYNAMIC         0804922c 00022c 000090 08  WA  4   0  4
  [ 9] .got.plt          PROGBITS        080492bc 0002bc 000010 04  WA  0   0  4
  [10] .data             PROGBITS        080492cc 0002cc 000004 00  WA  0   0  4
  [11] .comment          PROGBITS        00000000 0002d0 00002e 00      0   0  1
  [12] .shstrtab         STRTAB          00000000 0002fe 00006d 00      0   0  1
  [13] .symtab           SYMTAB          00000000 0005c4 000160 10     14  15  4
  [14] .strtab           STRTAB          00000000 000724 000051 00      0   0  1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T07:17:57.310

你应该`Lib.so`用`gcc -Wall -Wextra -m32 -shared -Wl,-soname,Lib.so -o Lib.so Lib.c`.

您在这里所做的只是生成一个没有重定位信息的正常程序。

查看本[教程](http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html#AEN95)以了解有关动态库的更多信息。

**注意**：另外，不要忘记设置`LD_LIBRARY_PATH`环境变量以指向`Lib.so`.

# javascript - jQuery scrolltop 没有移动到底部

> ID：16128618
> 
> 赞同：1
> 
> 时间：2013-04-21T06:39:36.590
> 
> 标签：javascript, jquery, scrolltop

我正在使用 scrolltop 移动到滚动的底部：

```
 // Auto-scroll to the bottom
 $("#test_div").scrollTop($("#test_div")[0].scrollHeight); 
```

这是 div 元素：

```
<div class="dialog">
    <div id="test_div" class="conversation">
    </div>​
</div> 
```

由于某些原因，滚动条没有移动到列表的底部。我不确定这里是否有什么问题。

# java - 如何从字节的字符串表示创建一个字节

> ID：16128619
> 
> 赞同：0
> 
> 时间：2013-04-21T06:40:18.773
> 
> 标签：java, jakarta-ee, codec

我正在开发一个项目（带有 java 2 ee 的 Web 应用程序），我需要`OutputStream`在`COM`端口上发送一个，其中的数据类型`OutputStream`是`byte[]`，该数据的一个字节是我试图与之通信的目标硬件的地址. 问题是硬件的地址必须由用户在网页中提供。那么如何将字节的字符串表示形式转换为实数`byte`？我希望下面的代码可以使问题更加生动

```
String data1 = "0xA1";
String data2 = "0xAB"; 
```

我需要将以下行放在 OutputStream 中。

```
byte[] b = new byte[]{0xA1,0xAB}; 
```

有人说使用`org.apache.commons.codec.binary.Base64`可以解决问题，但我没有任何线索。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T06:49:31.833

这简单：

```
byte b = Integer.decode("0xA1").byteValue(); 
```

链接到[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#decode%28java.lang.String%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T06:48:08.090

您可以使用以下方法将字符串转换为其字节值表示，但您只需要发送字符串中没有“0x”的部分

```
public static byte convertStringToByte(String str){
    return (byte)Integer.parseInt(str, 16);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T07:11:19.073

如果您想自己动手而不是通过函数调用来获得乐趣，请
执行以下操作

获取 ASCII 值
除以 2 收集提醒（将是 1 或 0 ）
最后反转整个序列

例如，对于十进制 32，您应该得到 0100000

如果你正在初始化 COM 端口，你也可以
直接使用一些序列（ASCII 序列）而不是二进制，查看手册。

# jetty - 启动码头 9 失败 ubuntu 12.04

> ID：16128626
> 
> 赞同：0
> 
> 时间：2013-04-21T06:41:23.950
> 
> 标签：jetty, ubuntu-12.04

我从这些链接一步一步地在 ubuntu 服务器 12.04 上安装了 jetty (distribution-9.0.2)

[http://degreesofzero.com/article/19](http://degreesofzero.com/article/19)

[http://pietervogelaar.nl/ubuntu-12-04-install-jetty-9/](http://pietervogelaar.nl/ubuntu-12-04-install-jetty-9/)

最后，当我使用以下命令启动码头时：

```
sudo /etc/init.d/jetty start 
```

或者

```
sudo service jetty start 
```

我收到以下错误

```
Starting Jetty: grep: /var/run/jetty.state: No such file or directory 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:46:46.133

我面临同样的问题，但在 Debian 6 服务器上。从我的角度来看，此问题和上述文章的解决方法是：

1.  使用**JETTY_ARGS=jetty.port=8080**代替**JETTY_PORT**
2.  **将属性添加**到 /etc/init.d/jetty：JETTY_PID=/opt/jetty/jetty.state

 **请让我知道，如果你有任何问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:48:00.807

我已经用最新版本的 jetty 彻底测试了它，它工作正常。jetty.sh 脚本最近发生了一些变化。但是，这些更改对我来说看起来不错，并且在最新版本中对我来说效果很好。

Evgenly 是对的，JETTY_PORT 已被弃用（有关详细信息，请参阅 jetty.sh 中的注释），但它也适用于我使用 JETTY_PORT 而不是 JETTY_ARGS 来定义非标准端口。

如果您还没有这样做，请从这里尝试最新版本：http: [//download.eclipse.org/jetty/](http://download.eclipse.org/jetty/)

如果 jetty.sh 报告启动失败，您通常会在 JETTY_HOME/logs 目录内的 stderrout.log 中找到原因（除非您更改了日志记录配置）。**

# android - 在android应用程序上设置用户代理

> ID：16128627
> 
> 赞同：2
> 
> 时间：2013-04-21T06:41:31.887
> 
> 标签：android, user-agent

我正在通过 Eclipse 为 android 开发一个无线电流应用程序，我想更改我的应用程序的用户代理，因此当有人在播放喊播流时，我可以在 icecast/shoutcast 管理员上远程看到用户代理，即 xxxx怯场 1.2

我正在使用 MediaPlayer 播放流

我发现了以下

“你需要覆盖HTTPDataSource.cpp（参见HTTPDataSource::read_at）。然后将其注入到媒体播放器的核心。:) 先看这个研究——Android框架中媒体播放器创建过程中的事件流”

但是 HTTPDataSource.cpp 的位置在哪里，有人做过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T10:52:23.880

MediaPlayer 类提供`setDataSource()`：

```
public void setDataSource (Context context, Uri uri, Map<String, String> headers); 
```

在您控制 MediaPlayer 实例的应用程序中，在标头映射中传递用户代理，如下所示：

```
Map<String, String> headerMap = new HashMap<String, String>();;
headerMap.put("User-Agent", "my user agent value");
mediaPlayer.setDataSource(context, uri, headerMap); 
```

它会覆盖默认的用户代理字符串 (stagefright/1.x (Linux; Android xx))。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:04:27.420

如果您使用 MediaPlayer 直接流式传输您的媒体内容，则无法直接设置用户代理。MediaPlayer 内部可能正在使用 HTTPDataSource.cpp 来获取流式传输的内容。如果是这种情况，那么您需要对其进行修改并将框架刷新重新编译到您的设备中然后运行它（如果您只是提供服务，这是无用的，许多用户不会为了运行应用程序而刷新他们的设备）。

您可以尝试一种更痛苦的方法，但这可能会也可能不会成功，当您使用 http-stream 时，您可以获取 http 内容并将有效负载数据写入设备（制作 mp3 文件或其他），然后使用该 mp3 来伪造流媒体播放器。您可以在接收 http 内容时将标头字符串添加到 HttpHost（用户代理字符串？）。

希望这可以帮助。

# f# - 在 F# 中查找堆栈“临界点”

> ID：16128633
> 
> 赞同：0
> 
> 时间：2013-04-21T06:42:50.337
> 
> 标签：f#, limit, stack-overflow

假设我有一个 int -> int 类型的递归函数 f(x)。预计 x 越大，f(x) 将执行的递归调用越多。

给定一个递增顺序的无限整数序列，我对序列中的第一个整数感兴趣，当在其上使用 f 时会导致 StackOverflowException 。

我怎样才能做到这一点？

到目前为止，我已经尝试制作一个简单的函数来测试在给定整数上使用给定函数时是否抛出了 StackOverflowException。它看起来像这样：

```
let overflows f x = 
    try 
        ignore (f x) in false
    with
        | :? System.StackOverflowException -> true 
```

但是，它似乎在抛出 StackOverflowException 时无法捕获它，即使这是本意。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:58:44.870

您可以尝试 using ，如果您几乎用完所有堆栈[`System.Runtime.CompilerServices.RuntimeHelpers.EnsureSufficientExecutionStack`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.runtimehelpers.ensuresufficientexecutionstack.aspx)，它会抛出一个可捕获的。[`InsufficientExecutionStackException`](http://msdn.microsoft.com/en-us/library/system.insufficientexecutionstackexception.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T12:54:58.303

在 .NET 2.0 及更高版本中，无法捕获`StackOverflowException`- 进程将被终止：

[http://msdn.microsoft.com/en-us/library/system.stackoverflowexception.aspx](http://msdn.microsoft.com/en-us/library/system.stackoverflowexception.aspx)

如果您只是为了测试函数而这样做，则有一种更简单的方法来获取您想要的信息：编写一些代码，将计数器（甚至只是换行符）写入文本文件，并在每次迭代时调用它. 确保每次写入文件时都调用`.Flush()`TextWriter（或其他），以便实际写入数据而不仅仅是缓冲。当您运行程序时，它会崩溃（如预期的那样），但文件中的行数将与崩溃前函数执行的迭代次数相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T11:39:19.170

捕获的替代方法`StackOverflowException`是返回`(new StackTrace()).FrameCount`测量当前堆栈帧数。

在比较方法时必须注意确保有相同数量的开销帧。特别是，lambda 表达式`fun ...`将分别添加一个堆栈帧。

# php - 使用重力形式“gform_field_validation”

> ID：16128634
> 
> 赞同：1
> 
> 时间：2013-04-21T06:42:52.040
> 
> 标签：php, forms, gravity

我想使用`gform_field_validation`我找到的[这个文档](http://www.gravityhelp.com/documentation/page/Gform_field_validation)来验证该字段 ，但没有那么有用

```
 add_filter("gform_field_validation", "custom_validation", 10, 4);
    function custom_validation($result, $value, $form, $field){
       $number = GFCommon::to_number($value,"");

       if (($field["id"] == 1) && ($field["id"] == 1))
           if( ($result["is_valid"]) && ($number >= 1000) && ($number <= 1999)){
               $result["is_valid"] = false;
               $result["message"] = "INCORRECT NUMBER";
           }
       return $result;
    } 
```

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:13:15.510

@GDB非常感谢，在这里我找到了如下解决方案

```
add_filter("gform_field_validation", "custom_validation", 10, 4);

function custom_validation($result, $value, $form, $field){

   if (($field["id"] == 1) && ($field["id"] == 1))
       if( ((intval($value) > 999) || (intval($value) < 2000)){
           $result["is_valid"] = false;
           $result["message"] = "INCORRECT NUMBER";
       }
   return $result;
} 
```

# android - SQLiteOpenHelper 空指针异常

> ID：16128636
> 
> 赞同：2
> 
> 时间：2013-04-21T06:43:23.170
> 
> 标签：android, sqlite

我正在为我的 android 应用程序实现缓存并使用 SQLite 数据库来存储服务器响应。处理 DB 的类定义如下。它还有一个用作数据库助手的 SQLiteOpenHelper 类。

从 public static CacheDB cacheDB = new CacheDB(context); 调用类 CacheDB

我也在调用方法 cacheDB.fetchDatafromDB("songs");

下面给出了类的代码。

```
package com.songs.lookup;

import java.util.ArrayList;
import java.util.List;

import android.annotation.SuppressLint;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteStatement;

public class CacheDB {

    public CacheDB(Context context){
        System.out.println("Before constructing ");
        this.context = context;
        this.dbHelper = new CacheDBHelper(context, DATABASE_NAME, null, DATABASE_VERSION);
        System.out.println("After constructing ");

    }
    private Context context;
    private CacheDBHelper dbHelper;
    private static final String DATABASE_NAME = "";
       private static final int DATABASE_VERSION = 1;
       private static final String song_TABLE_NAME = "songs";
       private static final String tune_TABLE_NAME = "tunes";
       private static final String person_TABLE_NAME = "persons";
       private static final String COLUMN_NAME = "name";

       private static final String song_TABLE_CREATE =
                "CREATE TABLE " + song_TABLE_NAME + " (" +
                COLUMN_NAME + " TEXT);";

       private static final String tune_TABLE_CREATE =
                        "CREATE TABLE " + tune_TABLE_NAME + " (" +
                        COLUMN_NAME + " TEXT);";

       private static final String person_TABLE_CREATE =
                        "CREATE TABLE " + person_TABLE_NAME + " (" +
                        COLUMN_NAME + " TEXT);";
   class CacheDBHelper extends SQLiteOpenHelper{    
   public CacheDBHelper(Context context, String name, CursorFactory factory,
            int version) {
       super(context, DATABASE_NAME, null, DATABASE_VERSION);

//     System.out.println("Before the cachedbhelper");
       System.out.println("After the cachedbhelper");

    }

        @Override
        public void onCreate(SQLiteDatabase db) {
            System.out.println("Here inside the oncreate of cacheDBHelper");
            db.execSQL(song_TABLE_CREATE);
            db.execSQL(tune_TABLE_CREATE);
            db.execSQL(person_TABLE_CREATE);

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        }
   }

   @SuppressLint("NewApi")
public void performOperation(String Operation, String table, ArrayList<String> array1)
   {
       SQLiteDatabase db = dbHelper.getWritableDatabase();

       String INSERT = "insert into "   
                + table + " (" + COLUMN_NAME + ") values (?)";

       String DELETE = "delete from " + table; 

       String FETCH = "select DISTINCT(" + COLUMN_NAME + "from " + table + ")";

       db.beginTransaction();

       SQLiteStatement dbStmt = db.compileStatement(Operation == "INSERT" ? INSERT : DELETE);

       if(Operation == "INSERT")
       {  
            int aSize = array1.size();

                for (int i = 0; i < aSize; i++) {
                    dbStmt.bindString(1, array1.get(i));
                    dbStmt.executeInsert();

            }
       }

       if(Operation == "DELETE")
       {
           dbStmt.executeUpdateDelete();

       }

       if(Operation == "SELECT")
       {
           fetchDatafromDB(table);
       }

       db.setTransactionSuccessful();
       db.endTransaction();

       try {
            db.close();
           } catch (Exception e) {
            e.printStackTrace();
           }
        }

   public List<String> fetchDatafromDB(String table) {
        CacheDBHelper dbHelper = new CacheDBHelper(context, DATABASE_NAME, null, DATABASE_VERSION);
        SQLiteDatabase db = dbHelper.getWritableDatabase();

        List<String> list = new ArrayList<String>();
        // Select All Query
        String selectQuery = "SELECT  * FROM " + table;

        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                cursor.getString(0);
            } while (cursor.moveToNext());
        }
        // return contact list
        return list;
    }
} 
```

我得到以下堆栈跟踪

```
04-21 00:55:15.188: E/AndroidRuntime(790): Caused by: java.lang.NullPointerException
04-21 00:55:15.188: E/AndroidRuntime(790):  at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:224)
04-21 00:55:15.188: E/AndroidRuntime(790):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
04-21 00:55:15.188: E/AndroidRuntime(790):  at com.songs.lookup.CacheDB.fetchDatafromDB(CacheDB.java:124)
04-21 00:55:15.188: E/AndroidRuntime(790):  at com.songs.lookup.LookUpData.getData(LookUpData.java:25)
04-21 00:55:15.188: E/AndroidRuntime(790):  at com.songs.MainActivity2.onCreate(MainActivity2.java:64)
04-21 00:55:15.188: E/AndroidRuntime(790):  at android.app.Activity.performCreate(Activity.java:5008)
04-21 00:55:15.188: E/AndroidRuntime(790):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
04-21 00:55:15.188: E/AndroidRuntime(790):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023) 
```

这里的问题在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-10T12:25:21.083

我之前遇到过类似的问题，我的问题是因为我试图在之前已经打开数据库的方法中打开数据库。我不知道这是否有意义，但我可以在这里看到您`dbHelper.getWritableDatabase()`在第一次之后没有关闭数据库的情况下调用该方法两次。我认为这可能是您的问题的原因，因为数据库被以前的方法锁定，因此错误

```
at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:224) 
```

不太确定我在这里是否 100% 正确，但希望这会有所帮助。干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-07T12:01:18.013

您传递给`SQLiteOpenHelper`构造函数的上下文为空。

# opencv - Opencv Haarlike 眼睛检测

> ID：16128637
> 
> 赞同：3
> 
> 时间：2013-04-21T06:43:25.637
> 
> 标签：opencv

我已经通过 C++ Visual Studio 2010 的这个链接运行了这个 Opencv Haarlike 眼睛检测

[http://docs.opencv.org/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html](http://docs.opencv.org/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html)

而且我的相机运行不顺畅。所以我删除了for循环（这段代码），只运行相机。相机运行平稳。

问题是我是否要修改此代码以检测眼睛和面部。

如何修改此代码以顺利运行？

请显示修改此代码的示例。

最好的感谢和抱歉糟糕的语言Chairat（泰国）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T13:51:42.823

一般来说，这不是一个微不足道的问题，但一个基本的想法（我用于我的 BSc 论文）非常简单。这不是我使用的全部解决方案，但现在应该足够了，如果没有的话 - 让我知道我会写更多关于它的内容。
对于第一帧：

1.  找脸（我用过`haarcascade_frontalface_default.xml`级联，但你可以尝试不同的）并记住它的位置。
2.  在面部矩形内找到眼睛（使用 Haar 级联作为眼睛对 ( `haarcascade_mcs_eyepair_big.xml`)，而不是一只眼睛 - 这是更快、更简单的解决方案）并记住位置。

对于其他框架：

1.  展开（大约 20-50%）您最近发现人脸的矩形。
2.  在扩展的矩形中查找人脸。
3.  在脸上找到眼睛。如果您在上一步中没有找到人脸，您可以尝试在之前眼睛位置的扩展矩形中搜索眼睛。

几个重要的事情：

*   在搜索使用`CV_HAAR_FIND_BIGGEST_OBJECT`标志时。
*   在搜索之前将帧转换为灰度 - 在搜索期间，opencv 仅使用灰度图像，因此转换整个图像一次比转换整个图像（对于第一次搜索 - 面部）和只转换包含面部的矩形（对于第二次搜索 - 眼睛）更快
*   有人说在搜索之前均衡直方图可能会改善结果，我不确定，但如果你愿意，你可以试试这个 - 使用`equalizeHist`函数。请注意，它仅适用于灰度图像。

# powershell - 每次我的应用程序（如记事本、escipe）启动时如何启动 .vbs 或 Window powershell

> ID：16128638
> 
> 赞同：0
> 
> 时间：2013-04-21T06:43:46.197
> 
> 标签：powershell, vbscript, window, registry, alternate-data-stream

每次我的应用程序（如记事本、escipe）启动时如何启动 *.vbs。这样我就不必每次启动 esclipse 时手动单击 vbs 我也不想将它们放在启动中，因为每次我的任一记事本启动时我都必须运行脚本。

WMI 事件轮询是否有帮助？自定义事件或替代数据流！替代数据流的问题是它会一次启动一个应用程序，无论是我的 vbs 还是我的记事本。我想要两者+或注册表可以提供任何帮助吗？

*操作系统：Window 7 32 和 64 位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:52:26.353

您可以创建一个事件侦听器并在记事本启动时启动您的 vbs 文件：

```
Register-WmiEvent -Class Win32_ProcessStartTrace -SourceIdentifier ProcessStart -Action {

    $proc = $event.SourceEventArgs.NewEvent

    if($proc.ProcessName -eq 'notepad.exe')
    {
        wscript "C:\test.vbs"
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T12:13:10.220

或者，您可以使用 .bat/.cmd 启动 .vbs 和 .exe（按您喜欢的顺序）。

或者 - 再想一想 - 为什么不将 .exe 的开头合并到 .vbs 中？

# algorithm - 优化算术表达式序列的快速算法

> ID：16128645
> 
> 赞同：10
> 
> 时间：2013-04-21T06:45:07.930
> 
> 标签：algorithm, optimization, numbers, set

**编辑：澄清问题的描述**

是否有解决以下问题的快速算法？ ~~而且，也适用于将自然数替换为 Z/(2^n Z) 的问题的扩展版本？~~（这个问题太复杂了，无法在一个地方添加更多问题，IMO。）

## 问题：

对于给定的一组自然数，如 {7, 20, 17, 100}，所需的算法返回*最短*的加法、乘法和幂计算所有给定数字的序列。序列的每一项都是（正确的）方程式，符合以下模式：

```
<number> = <number> <op> <number> 
```

其中 <number> 是一个自然数，<op> 是 {+, *, ^} 之一。

在序列中，<op> 的每个操作数都应该是

*   1
*   已经出现在等号左侧的数字。

## 例子：

```
Input: {7, 20, 17, 100}
Output:
2 = 1 + 1
3 = 1 + 2
6 = 2 * 3
7 = 1 + 6
10 = 3 + 7
17 = 7 + 10
20 = 2 * 10
100 = 10 ^ 2 
```

* * *

我在 Haskell 中编写了回溯算法。它适用于像上面这样的小输入，但我的真实查询是在 [0,255] 中随机分布约 30 个数字。对于真正的查询，以下代码在我的电脑中需要 2~10 分钟。

（[实际代码](https://gist.github.com/minkless/5451060)， [很简单的测试](https://gist.github.com/minkless/5451090)）

## 我当前的（伪）代码：

```
-- generate set of sets required to compute n.
-- operater (+) on set is set union.
requiredNumbers 0 = { {} }
requiredNumbers 1 = { {} }
requiredNumbers n =
      { {j, k} | j^k == n, j >= 2, k >= 2 }
    + { {j, k} | j*k == n, j >= 2, k >= 2 }
    + { {j, k} | j+k == n, j >= 1, k >= 1 }

-- remember the smallest set of "computed" number
bestSet := {i | 1 <= i <= largeNumber}

-- backtracking algorithm
-- from: input
-- to:   accumulator of "already computed" number
closure from to =
    if (from is empty)
        if (|bestSet| > |to|)
            bestSet := to
            return
    else if (|from| + |to| >= |bestSet|)
        -- cut branch
        return
    else
        m := min(from)
        from' := deleteMin(from)
        foreach (req in (requiredNumbers m))
            closure (from' + (req - to)) (to + {m}) 

-- recoverEquation is a function converts set of number to set of equation.
-- it can be done easily.
output = recoverEquation (closure input {}) 
```

## 附加说明：

像这样的答案

*   没有快速的算法，因为...
*   有一种启发式算法，它是...

也受到欢迎。现在我觉得没有快速准确的算法......

我认为，答案 #1 可以用作启发式方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:48:30.733

我建议将其转换为某种图最短路径算法。

*   对于每个数字，您计算（并存储）*最短*的操作路径。从技术上讲，一步就足够了：对于每个数字，您可以存储运算和两个操作数（左右，因为幂运算不可交换），以及权重（**“节点”**）
*   最初您注册`1`的权重为零
*   每次注册一个新数字时，您都必须使用该数字（所有加法、乘法、幂）和所有已注册的数字生成所有计算。（**“边缘”**）
    *   计算过滤器：如果计算结果已经注册，您不应该存储它，因为有更简单的方法可以获取该数字
    *   只存储 1 个可交换操作 (1+2=2+1)
    *   预过滤电源操作，因为这甚至可能导致溢出
*   您必须将此列表排序到最短的总和路径（**边缘的权重**）。权重=（操作数1的权重）+（操作数2的权重）+（1，也就是操作的权重）
    *   您可以排除所有大于我们必须找到的最大数字的结果数字（例如，如果我们已经找到 100，则可以排除任何大于 20 的数字） - 这可以进行改进，以便您也可以检查操作的成员.
*   如果您达到了目标数字之一，那么您找到了计算目标数字*之一*的最短方法，您必须重新生成：
    *   重新计算目标数的最大值
    *   返回当前找到的数字的路径，将它们的权重设置为 0（它们将从现在开始，*因为*它们的成本已经支付）
    *   重新计算生成列表中操作的权重，因为源操作数权重可能已更改（这会导致最后重新排序） - 在这里您可以排除任一操作数大于新最大值的操作数
*   如果所有数字都命中，则搜索结束

您可以为每个目标编号使用“反向链接”（操作、左操作数和右操作数）构建表达式。

重点是我们始终关注目标函数，即**操作的总数必须尽可能少**。为了得到这个，我们总是计算到某个数字的最短路径，然后将该数字（以及路上的所有其他数字）视为给定的数字，然后将我们的搜索扩展到剩余的目标。

从理论上讲，该算法只处理（注册）每个数字一次。应用适当的过滤器会削减不必要的分支，因此不会计算两次（队列中元素的权重除外）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T15:35:52.123

如果您从排序输入中的最高数字向后工作，检查是否/如何在其构造中使用较小的数字（以及正在引入的数字）怎么办？

例如，虽然这可能不能保证最短的序列......

```
input: {7, 20, 17, 100}

(100) = (20) * 5 => 
(7) = 5 + 2      => 
(17) = 10 + (7)  =>
(20) = 10 * 2    =>
10 = 5 * 2       =>
5 = 3 + 2        =>
3 = 2 + 1        =>
2 = 1 + 1 
```

# c# - 发生参照完整性约束违规

> ID：16128664
> 
> 赞同：7
> 
> 时间：2013-04-21T06:49:49.837
> 
> 标签：c#, asp.net-mvc, entity-framework-4

我正在尝试更新现有实体。

我有以下代码：

```
public MamConfiguration_V1 Save(MamConfiguration_V1 item)
{
    mMaMDBEntities.MamConfiguration_V1.Attach(item);
    mMaMDBEntities.ObjectStateManager.ChangeObjectState(item, System.Data.EntityState.Modified);
    mMaMDBEntities.SaveChanges();
    return item;
} 
```

但是这些`Attach`方法会引发异常：

> 发生参照完整性约束冲突：定义参照约束的属性值在关系中的主体对象和从属对象之间不一致。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T07:12:21.040

似乎您与 中的外键字段和导航属性有某种关系`item`，并且这些字段具有冲突的值。当您加载实体及其相关实体、更改一端的关系、仅将该端标记为`Modified`并尝试保存时，就会发生这种情况。确保在两端修改关系并像`Modified`调用之前一样标记所有受影响的实体`SaveChanges`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-28T21:38:04.570

我在不同的情况下遇到了这个异常，并在这里发布，因为在搜索错误消息时会出现这个问题。

`IObjectContextAdapter.ObjectContext.AttachTo(entitySetName, entity)`使用部分加载的实体调用时引发异常。定义了实体上的外键，但未加载导航属性。（也就是说，`O.ItemID`有一个值，但`O.Item`为空）。具体情况不允许`O.Item`加载。

问题原来是对象状态管理器已将对象加载到单独的方法中，并且已经在跟踪使用相同键定义的对象。由于单独的方法不需要跟踪对象状态，因此通过`IQueryable.AsNoTracking()`在该方法中调用来解决问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-21T09:16:49.877

item 对象的定义是什么？似乎在其与其他实体建立关系的某些集合中存在某种类型的冲突。您可以尝试清除所有集合以查看问题是否仍然存在，但在这种情况下您丢失了外键分配。但也许它可以帮助您找到问题所在。

这可能是一个提示。当我尝试将现有实体附加到上下文时，我会执行以下操作：

```
mMaMDBEntities.Entry<MamConfiguration>(item).State = System.Data.EntityState.Modified; 
```

您可以添加 System.Data 的使用以避免一直需要编写它。

这会将实体附加到您想要的状态，在这种情况下进行修改并跟踪更改。这是一行而不是两行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-21T16:14:47.943

The issue for me was that entity framework had loaded my object in multiple places, so when I updated a foreign key, there were now two references to the same object, one with a foreign key pointing to record a and one with a foreign key pointing to record b, which caused an error since my relationship is one to one. To resolve it, I used context.Entry(Object).State = EntityState.Detached, reloaded the object, made the foreign key change and then saved my changes

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-07T18:07:00.777

Lets say you have the following schema: [![schema](https://i.stack.imgur.com/0v1xr.png)](https://i.stack.imgur.com/0v1xr.png)

If you want to edit the CurrentLocationId in Person, you also need to edit the CurrentLocation object embedded in the Person object. EF will automatically populate the CurrentLocation object because CurrentLocationId has a foreign key in the CurrentLocation's table. When you edit the CurrentLocationId without updating the CurrentLocation object as well, they become out of sync. This is what causes the exception in this case.

So let's say you needed to update the Person object's CurrentLocationId. We'll assume you pre-fetched the Person data and the Location data.

```
public class DbData 
{
    List<Person> PersonList;
    List<Location> LocationList;
    public DbData()
    {
        using (var context = new MyContext())
        {
             PersonList = context.Persons.ToList();
             LocationList = context.Locations.ToList();
        }
    }

    public void UpdatePersonLocation(Person person, int newLocationId)
    {
        using (var context = new MyContext())
        {
            var location = LocationList.Where(l=>l.id==newLocationId).Single();
            //you need to update both the id and the location for this to not throw the exception
            person.CurrentLocationId == newLocationId;
            person.CurrentLocation == location;  
            context.Entry(person).State = System.Data.Entity.EntityState.Modified;
            context.SaveChanges();
        }
    }
    //or if you're giving it the location object...
    public void UpdatePersonLocation(Person person, Location location)
    {
        using (var context = new MyContext())
        {
            //you need to update both the id and the location for this to not throw the exception
            person.CurrentLocationId == location.id;
            person.CurrentLocation == location;  
            context.Entry(person).State = System.Data.Entity.EntityState.Modified;
            context.SaveChanges();
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-25T20:34:00.587

This might be an old post but the following worked for me

set the `SaveOptions option` to `SaveOptions.DetectChangesBeforeSave`

# networking - 为什么不使用 UDP 进行视频点播会导致串扰？

> ID：16128669
> 
> 赞同：0
> 
> 时间：2013-04-21T06:50:05.637
> 
> 标签：networking, tcp, youtube, udp, file-transfer

在阅读 Behrouz Forouzan 的“数据通信和网络”中的一个作业问题时，其中一个问题是使用 UDP 进行文件传输有任何不利影响，请牢记进程崩溃现象。

对此的解决方案是，如果进程 A 从服务器 X 请求文件内容，并且在请求后不久，A 崩溃并且另一个进程 B 出现在同一台机器上的同一端口上（给它相同的套接字地址）并向同一服务器发送另一个文件的请求，但请求丢失，这使得服务器不知道进程 A 崩溃和请求丢失，因此，它将 A 请求的文件内容发送给 B。

为什么在you-tube或likes这样的视频点播频道中不会出现这个问题？

我得到的最接近的答案之一是这个，但它似乎没有解决我的问题：

*   [什么时候适合使用 UDP 而不是 TCP？](https://stackoverflow.com/questions/1099672/when-is-it-appropriate-to-use-udp-instead-of-tcp)

**更新：**对于想要阅读书中给出的问题的人，我找到了所需部分的在线版本，请查看 PDF 的第 8 个问题：

*   [http://ceng334.cankaya.edu.tr/uploads/files/file/network%20sample.pdf](http://ceng334.cankaya.edu.tr/uploads/files/file/network%20sample.pdf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T02:11:33.193

理论上这个问题*可能会*发生，但在现实生活中呢？不是机会。

假设用户想要使用浏览器从 Youtube 流式传输视频。

1.  浏览器必须崩溃 - 实际上不会经常发生。
2.  新的浏览器实例采用完全相同的源 UDP 端口 - 几乎不会发生。
3.  用户决定看一个不同的视频 - 没有意义。
4.  虽然这一切都发生了，但服务器端并没有超时——我不这么认为。

这就像争论应该使用 TCP，因为当两台计算机使用一米长的以太网电缆背靠背连接时，数据包可能会被丢弃在网络上。

# mysql - 用phpmyadmin上传两列excel数据

> ID：16128670
> 
> 赞同：1
> 
> 时间：2013-04-21T06:50:34.630
> 
> 标签：mysql, phpmyadmin

当它只有一列时，我可以将 .csv 文件上传到我的数据库中，但是当它有两列时，我不断收到错误消息。

1.我选择 CSV 并保持选项不变，因此字段由 ; 终止 由“”括起来，由由自动终止的 \ 行转义。

```
Invalid field count in CSV input on line 1. 
```

2.我使用 LOAD DATA 选择 CSV 并保持选项不变

```
#1045 - Access denied for user 'aXXXXXX_apps'@'localhost' (using password: YES) 
```

3.我使用 LOAD DATA 选择 CSV 并选择*使用 LOCALE 关键字*

```
#1148 - The used command is not allowed with this MySQL version 
```

4.我使用 LOAD DATA 选择 CSV 并选择使用 LOCALE 关键字并选择以 结尾的字段，因为我想如果我在记事本中打开 .csv 我会看到一行中的两个字段由逗号分隔，并且行由新行终止例如

```
427982779,3050771
974082772,5093681
853347161,4809015
556910392,3195360

#1148 - The used command is not allowed with this MySQL version 
```

我试图将字段*终止的行*更改为 \r, \n, \r\n 但我一直收到相同的错误。

我还尝试在 .csv 中插入标题行，然后在*列名字*段中输入 ID，USERNAME

表结构：

```
ID  varchar(10) utf8_general_ci
USERNAME    varchar(15) utf8_general_ci 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:39:41.060

选择 CSV 选项并将“字段终止于”更改为`,`

# java - JAVA 中的 SOAP 读取器和写入器？

> ID：16128674
> 
> 赞同：1
> 
> 时间：2013-04-21T06:50:53.210
> 
> 标签：java, soap-client

我想制作一个 Web 服务客户端，需要一个可以读/写肥皂消息的免费阅读器/编写器，我很容易设置/获取消息参数。

我有自己的网络基础设施，我想和他们一起工作，我只需要一些可以读/写字节数组、ByteBuffer 或其他东西的东西……

有什么好的提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:17:40.737

[SAAJ](http://docs.oracle.com/javase/7/docs/api/javax/xml/soap/package-summary.html)应该可以完成这项工作，它是 Java 6 的标准配置。

从输入流中读取：

```
ByteArrayInputStream in = ...;
MessageFactory mf = MessageFactory.newInstance();
SOAPMessage message = mf.createMessage(new MimeHeaders(), in);
System.out.println(message.getSOAPBody().getElementsByTagNameNS("http://tempuri.org", "MyOperation")); 
```

写作：

```
SOAPMessage message = ...;
ByteArrayOutputStream out = new ByteArrayOutputStream();
message.writeTo(out);
System.out.println(out); 
```

# java - 从 AsyncTask 调用另一个活动

> ID：16128675
> 
> 赞同：1
> 
> 时间：2013-04-21T06:51:08.767
> 
> 标签：java, android, android-asynctask, android-activity

我是 android 新手，我对这段代码有疑问。我正在尝试获取 JSON 字符串并启动另一个活动以将其显示为 ListView。
我无法开始活动。它说***构造函数 Intent(RequestJsonString, Class) 是未定义***的，***而构造函数 Intent(RequestJsonString, Class) 是未定义的***。

这里： `Intent intent = new Intent(RequestJsonString.this,DisplayResults.class);` 和这里： `RequestJsonString.this.startActivity(intent);`

我在 stackoverflow 上阅读了很多关于此的帖子，并尝试使用`activity`,`context`和`this`. 但我仍然没有做对。我想我应该遗漏一些东西。任何帮助表示赞赏。

```
public class RequestJsonString extends AsyncTask<String, Void, JSONObject> {

@Override
protected JSONObject doInBackground(String... urls) {
    // Code HTTP Get Request and get JSONObject
            return jsonObject;
}

protected void onPostExecute(JSONObject jsonObj){
    try {

        Intent intent = new Intent(RequestJsonString.this,DisplayResults.class);
        intent.putExtra("JSON_Object", jsonObj.toString());
        RequestJsonString.this.startActivity(intent);

    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    Log.v("Json_OutPut","Done");

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T06:52:38.193

> 从 AsyncTask 启动活动。

```
Intent intent = new Intent(YourActivityName.this,DisplayResults.class); 
```

或者你可以像下面一样做。

声明`context`实例变量并在`onCreate`方法中初始化它。

```
private Context context;
public void onCreate(Bundle bundle) {
   ............
   context = this;
   ........
} 
```

像这样开始活动。

```
Intent intent = new Intent(context,DisplayResults.class);
intent.putExtra("JSON_Object", jsonObj.toString());
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T06:53:12.600

在您的情况下，您指的是 asynctask 类上下文

```
Intent intent = new Intent(RequestJsonString.this,DisplayResults.class); 
```

使用活动上下文

```
Intent intent = new Intent(ActivityName.this,DisplayResults.class); 
```

检查链接以了解何时使用 getApplicationContext() 以及何时使用 Activity Context

[何时调用活动上下文或应用程序上下文？](https://stackoverflow.com/questions/7298731/when-to-call-activity-context-or-application-context)

编辑：

将 Activity 上下文传递给 asynctask 构造函数

```
 new RequestJsonString(ActivityName.this).execute(params..); 
```

在您的 asynctask 构造函数中

```
 Context c;
 public  RequestJsonString( Context context)
 {
        c= context;
 } 
```

然后

```
 Intent intent = new Intent(c,DisplayResults.class);
   startActivity(intent); 
```

# iphone - JSON字符串拆分/解析

> ID：16128676
> 
> 赞同：-4
> 
> 时间：2013-04-21T06:51:25.373
> 
> 标签：iphone, json

我有一个看起来像这样的字符串：

```
"[{"ImageTagID":78,"Xpixel":408,"Ypixel":69,"Xpercent":17,"Ypercent":68,"ImageID":45617}]" 
```

我如何将它分解成碎片？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T07:00:38.693

这是一本字典。字典中有键和值。如果您需要特定值，则必须使用密钥获取它。

在 iOS 中是这样完成的，

```
int tagID = [yourdictionary objectForKey:@"ImageTagID"]; 
```

希望这可以帮助您开始。如果您有更多问题，请问我。

拆分字符串：

例子：`NSArray *stringArray = [string componentsSeparatedByString: @","];`

# string - 查找没有特定子字符串的字符串数

> ID：16128677
> 
> 赞同：3
> 
> 时间：2013-04-21T06:51:41.020
> 
> 标签：string, algorithm, substring

问题是给定长度不超过6的N（1 <= N <= 10）字符串，我如何计算长度为L（1 <= L <= 1000000）的字符串数，而没有任何n个字符串作为子字符串. 每个字符串只包含大写字母。

我能想到的最好的方法是使用 dp L * (26^5) 但我认为这不会超过时间限制 :( 任何人都可以分享一些想法吗？顺便说一句，这是最初的问题[http://www.spoj.com/问题/GEN/](http://www.spoj.com/problems/GEN/)如果你不明白我上面写的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T07:24:20.690

首先，创建一个接受所有“坏”字符串的 NFA（非确定性有限自动机）。然后使用子集构造将其转换为 DFA。然后计算该 DFA 的补码。

计算 DFA 接受的字符串数量相当简单；以给定状态结束的长度为 k+1 的字符串的数量可以通过将在每个前导状态结束的长度为 k 的字符串的数量相加来计算。

如果你有一个体面的实现，这可能会及时运行。但是，如果没有，您可以使用[Aho-Corasick](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)预处理中的自动机而不是 DFA。

# java - Java程序中的异常

> ID：16128679
> 
> 赞同：-2
> 
> 时间：2013-04-21T06:51:57.653
> 
> 标签：java

当我运行下面给出的代码时，出现了以下消息。这是什么意思，在这种情况下我该如何克服它？

> 线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 0 at ifDemo.main(ifDemo.java:5)

```
public class ifDemo {
public static void main (String [] args)

{
    int x= Integer.parseInt(args[0]);
    double half=0.0;
    if (x!=0)
    {
        half=x/2.0;
        System.out.println(x+ "/2 = "+half);
    }
    if (x==0)
    {
        System.out.println("The value of x is "+x);
    }
    int y=x*5;
    char grade='F';
    if(y>=85)
    {
        grade='A';
    }
    if (y>=70 && y<85)
        grade='C';
    System.out.println("y=  "+y+ "and grade equal to  "+grade);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T06:54:01.100

本质上，这意味着您正在尝试访问 args 数组中不存在的索引。

在您的代码中，您有：

```
int x= Integer.parseInt(args[0]); 
```

这个错误是抱怨你的 args 数组中实际上没有索引 0，即数组是空的。

为了解决这个问题，您需要在程序运行时传递程序命令行参数，换句话说，将其作为 java ifDemo *Some Integer Here运行*

进一步阅读试试[这个](http://docs.oracle.com/javase/6/docs/api/java/lang/ArrayIndexOutOfBoundsException.html)，谷歌也是你的朋友

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T06:54:19.200

在运行代码时，您可能没有传递任何`x`可以从 arg[0] 获取值的值。

在运行代码时传递值，这将解决问题。

您是否使用命令行来执行它？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T06:54:34.573

当您从命令行运行程序时，您忘记添加参数，如下所示：

`java ifDemo.class 1`

所以本质上，变量`args`绝对不包含任何内容。因此，当您尝试获取它的值时`args[0]`，会抛出`ArrayIndexOutOfBoundsException`. [你可以在这里](http://docs.oracle.com/javase/6/docs/api/java/lang/ArrayIndexOutOfBoundsException.html)阅读更多关于它的信息。

您可以添加一种验证形式，检查用户是否输入了数字，如果没有，告诉他们。代码看起来像这样：

```
if(args == null || args.length == 0) {
    System.out.println("Please enter a number as a command line argument.");
    System.exit(0);
} 
```

或者您可以考虑[从控制台获取输入](http://docs.oracle.com/javase/tutorial/essential/io/cl.html)并使用[do while 循环](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html)进行验证。如果您想要一个代码示例，请告诉我！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-21T06:55:24.890

如果您尝试在命令提示符中运行程序，请确保提供命令行参数。我尝试运行该程序并没有出现错误。

![截屏](https://i.stack.imgur.com/Q0cTB.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-21T06:54:28.820

```
int x= Integer.parseInt(args[0]); 
```

在上面的那一行中，您正在索引一个数组，假设它至少有 1 个元素。你确定它有一个元素吗？你是在调用你的java程序并传入一个数字吗？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-21T06:54:39.530

> int x= Integer.parseInt(args[0]);

这是试图读取第一个命令行参数。它会失败，除了你描述的没有例外。

您应该通过检查命令行参数来更新程序，并在它们有误时添加错误消息。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-21T06:55:21.080

运行它作为`java ifDemo xxx`一个`xxx`整数。

`args`是一个字符串数组，称为[命令行参数](http://docs.oracle.com/javase/tutorial/essential/environment/cmdLineArgs.html)。因此，如果您从命令行运行程序 as `java ifDemo 10 12`，则 args 将包含`[10,12]`、`args[0]`10、12`args[1]`和`args.length`2。

此行引发错误，因为您没有使用命令行参数运行程序。

```
int x= Integer.parseInt(args[0]); 
```

`args`是空的，并且您试图访问导致[ArrayIndexOutOfBoundsException](http://docs.oracle.com/javase/6/docs/api/java/lang/ArrayIndexOutOfBoundsException.html)的数组的第一个元素，*抛出以指示已使用非法索引访问了数组。索引为负数或大于或等于数组的大小。*

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-21T06:56:39.347

您没有将整数作为命令行参数传递`int x= Integer.parseInt(args[0]);`

args[0] 通过命令行参数赋值。

按以下方式编译和运行程序：

```
javac ifDemo.java

java ifDemo 23 
```

运行程序时，args[0] 为 23。

早些时候，由于您没有通过命令行提供任何参数，因此未设置 args[0] 并且您得到了**array-outofbound-exception**。

# c++ - 从此指针复制后尝试访问基类成员的段错误

> ID：16128683
> 
> 赞同：1
> 
> 时间：2013-04-21T06:52:35.563
> 
> 标签：c++, oop, c++11

我要提前为巨大的代码块道歉——我尽我所能把它归结为一个测试用例。

`vectorTest.cpp`我的程序在标有注释的行中抛出了一个段错误。`Matrix.h::Matrix< T >::operator[]`正如那里的评论所示，我已经将段错误一直追踪到 inside 。

问题似乎是我无法访问`O.rref()::rrefMatrix._values`. 这很奇怪，因为正如您从其他部分看到的那样，我访问、或`vectorTest.cpp`没有问题。只有当我使用*后面*的函数时，我才会遇到错误。`M._values``M.rref()::rrefMatrix._values``O._values``append()`*`Matrix< T >::rref()`*

 *我快走到尽头了。有人可以指出我的解释吗？

矢量测试.cpp：

```
#include "Vector.h"
#include "Polynomial.h"
#include "Matrix.h"

#include <iostream>

using namespace std;

int main( int argc, char* argv[] )
{
    Matrix< float > M( 3, 3 );
    M.setValues( { 1, 2, 3, 4, 5, 6, 7, 8, 8 } );

    cout << M << endl;

    cout << M.rref() << endl;

    Matrix< float > N( 3, 1 );
    N.setValues( { 2, -2, 5 } );

    Matrix< float > O = append( M, N );

    cout << O << endl;

    cout << O.rref() << endl; //Segfault!

    return 0;
} 
```

矩阵.h：

```
#ifndef __INCL_MATRIX_H__
#define __INCL_MATRIX_H__

#include "Vector.h"
#include <iterator>
#include <algorithm>
#include <utility>
#include <initializer_list>
#include <type_traits>
#include <iomanip>
#include <sstream>
#include <cassert>

template < class T >
class Matrix
    : Vector< T >
{
public:
    Matrix() :
        Vector< T >::Vector()
        {};
    Matrix( const Matrix< T >& cMatrix ) :
        Vector< T >::Vector( cMatrix ),
        _numRows( cMatrix._numRows ),
        _numColumns( cMatrix._numColumns )
        {};
    Matrix( const unsigned int r, const unsigned int c ) :
        _numRows( r ),
        _numColumns( c )
        {
            _values.reserve( r * c );
            for( unsigned int r = 0; r < _numRows; r++ )
                for( unsigned int c = 0; c < _numColumns; c++ )
                    _values[ r * _numColumns + c ] = T( 0 );
        }

    Matrix< T >& operator= ( const Matrix< T >& );

    template < class InputIterator >
        typename std::enable_if< std::is_same< T, typename std::iterator_traits< InputIterator >::value_type >::value, void >::type
            setValues( InputIterator, InputIterator );

    void setValues( std::initializer_list< T > );

    T* operator[] ( const unsigned int );
    const T* operator[] ( const unsigned int ) const;

    unsigned int numRows() const;
    unsigned int numColumns() const;

    Matrix< T > rref() const;

protected:
    void swapRows( const unsigned int, const unsigned int );

private:
    using Vector< T >::_values;

    unsigned int _numRows;
    unsigned int _numColumns;
};

template < class T >
Matrix< T >& Matrix< T >::operator= ( const Matrix< T >& cMatrix )
{
    _numRows = cMatrix._numRows;
    _numColumns = cMatrix._numColumns;
    _values = cMatrix._values;

    return *this;
}

template < class T >
template < class InputIterator >
typename std::enable_if< std::is_same< T, typename std::iterator_traits< InputIterator >::value_type >::value, void >::type Matrix< T >::setValues( InputIterator begin, InputIterator end )
{
    _values.clear();
    for( auto it = begin; it != end; it++ )
        if( _values.size() < _numRows * _numColumns )
            _values.push_back( *it );
}

template < class T >
void Matrix< T >::setValues( std::initializer_list< T > iList )
{
    setValues( iList.begin(), iList.end() );
}

template < class T >
T* Matrix< T >::operator[] ( const unsigned int r )
{
    return &( _values[ r * _numColumns ] ); //This is the thorn in my paw.
}

template < class T >
const T* Matrix< T >::operator[] ( const unsigned int r ) const
{
    return &( _values[ r * _numColumns ] );
}

template < class T >
unsigned int Matrix< T >::numRows() const
{
    return _numRows;
}

template < class T >
unsigned int Matrix< T >::numColumns() const
{
    return _numColumns;
}

template < class T >
constexpr T abs( const T a )
{
    return ( a < 0 ) ? -a : a;
}

template < class T >
constexpr T gcd( const T a, const T b )
{
    return ( a == b || b == 0 ) ? a : ( ( a < b ) ? gcd( abs( b ), abs( a ) ) : gcd( abs( a ) - abs( b ), abs( b ) ) );
}

template < typename T, typename... Ts >
constexpr T gcd( const T a, const T b, const Ts... others )
{
    return gcd( gcd( a, b ), others... );
}

template < class T >
Matrix< T > Matrix< T >::rref() const
{
    Matrix< T > rrefMatrix = (*this);
    unsigned int p = rrefMatrix._numColumns;
    T mult = 0, mult1 = 0, mult2 = 0;

    for( unsigned int r1 = 0; r1 < rrefMatrix._numRows; r1++ )
    {
        p = rrefMatrix._numColumns;
        for( unsigned int r2 = r1; r2 < rrefMatrix._numRows; r2++ )
        {
            for( unsigned int c = 0; c < rrefMatrix._numColumns; c++ )
            {
                if( rrefMatrix[r2][c] != T( 0 ) ) // Why is this segfaulting?
                {
                    p = c;
                    break;
                }
            }
            if( p != rrefMatrix._numColumns )
            {
                if( r2 > r1 )
                {
                    rrefMatrix.swapRows( r1, r2 );
                }
                break;
            }
        }
        if( p == rrefMatrix._numColumns )
            break;

        for( unsigned int r2 = 0; r2 < rrefMatrix._numRows; r2++ )
        {
            if( r1 == r2 ) continue;

            mult = gcd( rrefMatrix[r1][p], rrefMatrix[r2][p] );

            mult1 = mult * rrefMatrix[r2][p];
            mult2 = mult * rrefMatrix[r1][p];

            for( unsigned int c = 0; c < rrefMatrix._numColumns; c++ )
            {
                rrefMatrix[r1][c] *= mult1;
                rrefMatrix[r2][c] *= mult2;
            }

            for( unsigned int c = 0; c < rrefMatrix._numColumns; c++ )
            {
                rrefMatrix[r2][c] -= rrefMatrix[r1][c];
                rrefMatrix[r1][c] /= mult1;
            }
        }
    }

    for( unsigned int r = 0; r < rrefMatrix._numRows; r++ )
    {
        p = _numColumns;
        for( unsigned int c = 0; c < rrefMatrix._numColumns; c++ )
        {
            if( rrefMatrix[r][c] != 0 )
            {
                p = c;
                break;
            }
        }

        if( p == rrefMatrix._numColumns ) continue;

        mult = rrefMatrix[r][p];

        for( unsigned int c = 0; c < rrefMatrix._numColumns; c++ )
            rrefMatrix[r][c] /= mult;
    }

    return rrefMatrix;
}

template < class T >
void Matrix< T >::swapRows( const unsigned int r1, const unsigned int r2 )
{
    for( unsigned int c = 0; c < _numColumns; c++ )
        std::swap( (*this)[r1][c], (*this)[r2][c] );
}

template < class T >
unsigned int strLength( T& item )
{
    std::stringstream ss;
    ss << item;
    return ss.str().length();
}

template < class T >
std::ostream& operator<< ( std::ostream& out, const Matrix< T >& cMatrix )
{
    unsigned int maxLength = 0, currLength = 0;

    for( unsigned int r = 0; r < cMatrix.numRows(); r++ )
        for( unsigned int c = 0; c < cMatrix.numColumns(); c++ )
        {
            currLength = strLength( cMatrix[r][c] );
            if( currLength > maxLength )
                maxLength = currLength;
        }

    for( unsigned int r = 0; r < cMatrix.numRows(); r++ )
    {
        for( unsigned int c = 0; c < cMatrix.numColumns(); c++ )
            out << std::setw( maxLength ) << cMatrix[r][c] << ' ';
        out << std::endl;
    }

    return out;
}

template < class T >
Matrix< T > append( const Matrix< T >& lhs, const Matrix< T >& rhs )
{
    Matrix< T > appendMatrix( lhs.numRows(), lhs.numColumns() + rhs.numColumns() );

    for( unsigned int r = 0; r < appendMatrix.numRows(); r++ )
    {
        for( unsigned int c = 0; c < lhs.numColumns(); c++ )
        {
            appendMatrix[r][c] = lhs[r][c];
        }

        for( unsigned int c = 0; c < rhs.numColumns(); c++ )
        {
            appendMatrix[r][ c + lhs.numColumns() ] = rhs[r][c];
        }
    }

    return appendMatrix;
}

#endif 
```

矢量.h：

```
#ifndef __INCL_VECTOR_H__
#define __INCL_VECTOR_H__

#include <vector>
#include <iostream>
#include <iterator>
#include <initializer_list>
#include <type_traits>
#include <assert.h>

struct VectorBase {};

template < class T >
class Vector
    : public VectorBase
{
public:
    Vector()
        {};
    Vector( const Vector< T >& cVector ) :
        _values( cVector._values )
        {};
    template < class InputIterator >
        Vector( InputIterator first, InputIterator last ) :
            _values( first, last )
            {};
    Vector( std::initializer_list< T > iList ) :
        _values( iList.begin(), iList.end() )
        {};

protected:
    std::vector< T > _values;
};

#endif 
```

输出：

```
1 2 3 
4 5 6 
7 8 8 

 1 -0 -0 
-0  1 -0 
 0  0  1 

 1  2  3  2 
 4  5  6 -2 
 7  8  8  5 

Segmentation fault (core dumped) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T07:13:00.867

在这个构造函数中：

```
Matrix( const unsigned int r, const unsigned int c ) :
    _numRows( r ),
    _numColumns( c )
    {
        _values.reserve( r * c );
        for( unsigned int r = 0; r < _numRows; r++ )
            for( unsigned int c = 0; c < _numColumns; c++ )
                _values[ r * _numColumns + c ] = T( 0 );
    } 
```

改变这个：

```
 _values.reserve( r * c ); 
```

对此：

```
 _values.resize( r * c ); 
```

有关原因，请参阅[std::vector<>::reserve()](http://en.cppreference.com/w/cpp/container/vector/reserve)的文档。它设置容量；不是大小。这只是意味着您可以将向量增加到规定的容量，而不会触发内部重新分配和潜在的对象被复制。

注意：我会认真考虑重新工具来*构造*具有基于`r`和的预定大小的向量`c`。*

# python - 打印时间线，后勤问题

> ID：16128685
> 
> 赞同：0
> 
> 时间：2013-04-21T06:52:38.447
> 
> 标签：python, printing, python-2.7

我有一个字典。键是 0 到 60 之间的数字。这是分钟。示例字典如下所示：

```
{u'31': 1, u'2': 0, u'30': 1} 
```

我想将键（数字）打印为所有键之间带有连字符的时间线，所有键均以逗号分隔。连字符的数量由字典中每个键的数量表示。

净结果应该是：

```
-,-,0,-,-,-,-,-,-,-,-,-,-,1,1,-,-,-,-,-,- 
```

（以上只是为了说明，中间的连字符数不正确，但你得到了图片。这意味着在位置`2`（dict的键），有`0`（dict的值），在位置`30`有值`1`等等）。

我有这个代码

```
for k, v in time_events.iteritems():
    print '-,'*int(k) + str(v)+',', 
```

但这会导致

```
-,-,0,-,-,-,-,-,-,1,-,-,-,-,-,-,-1 
```

它将每个事件打印为单独的时间线（因此在 and 之间会有 30 个连字符`30`，`31`并且应该没有）

我的猜测是，首先通过键对字典进行排序，然后从当前键中减去前一个键号，这将给出剩余的连字符数，但尚未在数字之间打印。但是如何实际访问`previous key`我的`for`循环中的？

希望我的问题可以理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T06:55:56.433

你可以这样做：

```
>>> dct={u'31': 1, u'2': 0, u'30': 1}
>>> ','.join(str(dct.get(str(i), '-')) for i in range(60))
'-,-,0,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,1,1,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-,-' 
```

`dct.get(str(i), '-')`基本上试图访问`dct[str(i)]`. 如果不存在，则返回第二个参数（默认值）。[这](http://docs.python.org/2/library/stdtypes.html#dict.get)是相关文档。

# javascript - 使用 Sequelize 保存对象

> ID：16128688
> 
> 赞同：2
> 
> 时间：2013-04-21T06:52:58.870
> 
> 标签：javascript, sequelize.js

我正在努力完成 Sequelize 的第 1 步。我已经阅读了本教程，但我必须缺少一些基本的东西，因为我已经花了一天多的时间试图找出我做错了什么。

以下是我使用 Mocha 编写的单元测试。

```
var db = require("../../db.js").sequelize;
var DataTypes = require("sequelize");

var _table = db.define('users', {
      name: DataTypes.STRING,
      email: DataTypes.STRING
    }, { 
      timestamps: false
    });

var assert = require("assert")
describe('Users', function(){
  describe('#save()', function(){
    it('should save a user', function(){
        _table
        .build({name: 'test', email: 'a@a.com'})
        .save()
        .success(function(o){
            console.log("saved");
            console.log(o.values);
        }).error(function(error) {
            console.log("++++++++++");
            console.log(error);
        });

    })
  })
}) 
```

它运行良好，我现在已经删除了断言。问题是，我没有看到任何控制台日志，不是成功也不是错误。另外，数据库中没有行。

db.js 只是一个实用文件，它有助于使用 db 配置创建 Sequelize JS 的实例 - 我已经完成了一个 console.dir 并查看了该实例，它看起来如下：

```
{ options: 
   { dialect: 'mysql',
     host: 'localhost',
     port: 3306,
     protocol: 'tcp',
     define: {},
     query: {},
     sync: {},
     logging: [Function],
     omitNull: false,
     queue: true,
     native: false,
     replication: false,
     pool: { maxConnections: 10, minConnections: 0, maxIdleTime: 1000 } },
  config: 
   { database: 'beacon',
     username: 'beacon',
     password: 'beacon',
     host: 'localhost',
     port: 3306,
     pool: { maxConnections: 10, minConnections: 0, maxIdleTime: 1000 },
     protocol: 'tcp',
     queue: true,
     native: false,
     replication: false,
     maxConcurrentQueries: undefined },
  daoFactoryManager: { daos: [ [Object], [Object] ], sequelize: [Circular] },
  connectorManager: 
   { sequelize: [Circular],
     client: null,
     config: 
      { database: 'beacon',
        username: 'beacon',
        password: 'beacon',
        host: 'localhost',
        port: 3306,
        pool: [Object],
        protocol: 'tcp',
        queue: true,
        native: false,
        replication: false,
        maxConcurrentQueries: undefined },
     disconnectTimeoutId: null,
     queue: [],
     activeQueue: [ [Object] ],
     maxConcurrentQueries: 50,
     poolCfg: { maxConnections: 10, minConnections: 0, maxIdleTime: 1000 },
     pendingQueries: 0,
     useReplicaton: false,
     useQueue: true,
     pool: 
      { destroy: [Function],
        acquire: [Function],
        borrow: [Function],
        release: [Function],
        returnToPool: [Function],
        drain: [Function],
        destroyAllNow: [Function],
        getPoolSize: [Function],
        getName: [Function],
        availableObjectsCount: [Function],
        waitingClientsCount: [Function] },
     isConnecting: false },
  importCache: {},
  queryInterface: 
   { sequelize: [Circular],
     QueryGenerator: 
      { createTableQuery: [Function],
        dropTableQuery: [Function],
        renameTableQuery: [Function],
        showTablesQuery: [Function],
        addColumnQuery: [Function],
        removeColumnQuery: [Function],
        changeColumnQuery: [Function],
        renameColumnQuery: [Function],
        selectQuery: [Function],
        insertQuery: [Function],
        updateQuery: [Function],
        deleteQuery: [Function],
        incrementQuery: [Function],
        addIndexQuery: [Function],
        showIndexQuery: [Function],
        removeIndexQuery: [Function],
        getWhereConditions: [Function],
        hashToWhereConditions: [Function],
        attributesToSQL: [Function],
        findAutoIncrementField: [Function],
        addQuotes: [Function],
        removeQuotes: [Function],
        options: [Object] } } } 
```

现在我在屏幕上记录了 INSERT 语句，但该实例从未进入数据库。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T10:40:09.593

问题不在于续集，而在于它是异步代码这一事实。要解决此问题，只需修改测试：

```
var db = require("../../db.js").sequelize;
var DataTypes = require("sequelize");

var _table = db.define('users', {
      name: DataTypes.STRING,
      email: DataTypes.STRING
    }, { 
      timestamps: false
    });

var assert = require("assert")
describe('Users', function(){
  describe('#save()', function(){
    it('should save a user', function(done){
        _table
        .build({name: 'test', email: 'a@a.com'})
        .save()
        .success(function(o){
            console.log("saved");
            console.log(o.values);
            done();
        }).error(function(error) {
            console.log("++++++++++");
            console.log(error);
            done();
        });

    })
  })
}) 
```

添加回调（完成）有帮助！

# html - jquery点击事件，li标签内的href

> ID：16128689
> 
> 赞同：1
> 
> 时间：2013-04-21T06:53:08.133
> 
> 标签：html, html-lists, jquery

我有一个 UL，我按以下方式填充：

```
$("#dropdownFloorplanGroups").append("<li><a href='#'>" + value.Name + "</a></li>"); 
```

这在我的浏览器上正确显示

但是我似乎无法触发 click 事件，然后它会提醒我在`<li></li>`

我试过这个，但没有任何东西被解雇。

```
$('li a').click(function (e) {
                alert($(this).find("a").text());                
            }); 
```

jquery点击事件应该是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T06:54:44.810

您必须使用事件委托：

```
$('#dropdownFloorplanGroups').on('click', 'li a', function(e) {
    alert($(this).text());                
}); 
```

`$('li a')`不会考虑新创建的元素。

# prolog - 为什么这个查询在序言中成功和失败？

> ID：16128690
> 
> 赞同：0
> 
> 时间：2013-04-21T06:53:08.690
> 
> 标签：prolog

在我的序言程序中，它成功地找到了爱德华八世国王出生时的统治者，但由于某种原因也失败了。这是我的一小部分代码：

```
reigned('Queen Victoria', 1819, 1901).
reigned('King Edward VII', 1901, 1910).
reigned('Queen Elizabeth II', 1952, 2013).
born('King George V', 1865).
born('King Edward VIII', 1894).
born('King George VI', 1895).
born('Prince Henry', 1984).

regentWhenBorn(X, Y) :- reigned(X, Begin, End), born(Y, Born), 
                        Begin =< Born, Born =< End. 
```

这是 prolog 显示的内容：

```
?- regentWhenBorn(Who, 'King Edward VIII').
Who = 'Queen Victoria' ;
false. 
```

或为不同的人..

```
?- regentWhenBorn(Who, 'Prince Henry').
Who = 'Queen Elizabeth II' ;
Who = 'Queen Elizabeth II'. 
```

这是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T07:16:08.363

当有一个变量（在本例中为 Who）时，它会假设所有可能的值（在本例中为“维多利亚女王”、“爱德华七世国王”和“伊丽莎白二世女王”），并尝试所有这些值以找到一个真值。因此，如果最后一个结果为真，那么它不会显示假（你的第一种情况），否则它会显示结果并继续查找（因为可能有多个结果），当它找不到任何结果时，它会显示假.

# asp.net - ASP.net 获取硬件信息

> ID：16128691
> 
> 赞同：2
> 
> 时间：2013-04-21T06:53:12.330
> 
> 标签：asp.net, web, bios, cpuid, hardware-id

如果我创建一个 ASP.net 页面，我能否获得当前用户的 CPUID 和 BIOS 序列号？还是因为安全原因不允许这样做？

我目前有一个获取这些值的 Visual Basic.net 应用程序，我只是想知道我是否可以在网页上做同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-27T22:15:55.717

简而言之，不，您无法仅使用常规的 html 和 JavaScript 网页来获取此信息。

然而，这不是说这是不可能的。

如果您的客户端计算机安装了 Java、Flash 或 Silver-light，那么让这些插件架构之一以某种方式查询客户端 PC 并收集这些数据并不是不可能的。我确实知道它可以通过 Java Applet 实现，因为许多公司（如 Nvidia 和 AMD）在让您选择要下载的驱动程序时使用它来获取硬件信息。

虽然这些人可能不是在寻找 BIOS 序列号之类的东西，但他们的本质就是使用与阅读您所寻找的信息所需的方法和方法相同的方法和方法。

就我个人而言，我也使用 Silver-light 完成了它，但在受控环境中，我对客户端计算机上运行的内容有发言权。

现在，除了最初的问题之外，大多数人都会提出这种性质的问题，因为他们正在寻找一种方法来唯一地识别他们网站的访问者，而无需保存 cookie 或类似的东西。

我之前在我编写的代码大师的 .NET Nuts and bolts 列的帖子中概述了一些方法（[链接在这里](http://www.codeguru.com/columns/dotnet/)），当前最常见的方法之一是指纹技术。

本质上，指纹技术的工作原理是将大多数现代浏览器现在提供给 Web 服务器的所有标准数据组合在一起，然后使用这些数据形成某种散列令牌或唯一标识符。

但是，如果您要使用此方法，您需要确保的是，您不会选择可能过于频繁更改的数据位。用户代理、屏幕分辨率、操作系统版本、java 版本等通常是不错的选择。您也可以使用 IP 地址来获取，但我会小心，因为现在大多数消费者都处于动态状态，因此它可能会发生意外变化。

如果你要指纹，你应该避免的事情是当前日期和时间，浏览器名称是否存在特定标题（当然，除非它是你提供的标题），任何会给你一个可以与许多人广泛匹配的答案的东西其他系统或频繁变化的系统是一个糟糕的选择。

您还可以在客户端使用 JavaScript，使用客户端本身的本地信息创建散列，然后使用 ajax 调用或隐藏形式或 url 参数将该散列发送给您。

## 2021 年 1 月更新

1.  参考上面的链接，我不再为代码大师写作。我所有的原创文章都还在网上，但你必须搜索它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T06:56:49.580

如果您在网页上执行此操作，您将获得服务器的 BIOS 序列号。因为VB.NET函数运行在服务器上。

您无法从简单的 HTML/JS/CSS 网页访问这些数据。对不起，这是一个安全问题。在访问某些 Internet 页面时，您不希望任何人知道您的硬件规格。

# c++ - VS C++ 死代码消除

> ID：16128696
> 
> 赞同：2
> 
> 时间：2013-04-21T06:53:56.427
> 
> 标签：c++, visual-studio-2010, static-linking, dead-code

我在 C++ VS 2010 中有一个小项目，它使用了几个静态链接库（.lib 文件）。

此选项已打开：OPT:REF、OPT:ICF、/GL、GR-

当我将未使用的方法添加到使用静态库中的一些代码的类中时，编译器会生成更大的代码（即在最终可执行文件中包含此方法）

为什么？我究竟做错了什么？

# javascript - 在javascript中创建一个对象数组

> ID：16128700
> 
> 赞同：-1
> 
> 时间：2013-04-21T06:54:29.837
> 
> 标签：javascript, json

为什么下面的 javascript 代码对我不起作用？我应该在下面的代码中进行哪些更改？

```
function person(firstname, lastname, age, eyecolor)
{
    this.firstname = firstname;
    this.lastname = lastname;
    this.age = age;
    this.eyecolor = eyecolor;
}

for(var i = 0; i < 10; i++)
{
    myFather[i] = new person("John", "Doe", i, "blue");
}

for(var i = 0; i < 10; i++)
{
    document.write(myFather[i].firstname + " is " +
                   myFather[i].age + " years old.");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T06:56:59.117

我看不到`myFather`在任何地方被初始化。在将数组值分配给它之前，您需要这样做。

```
var myFather = []; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T06:58:23.603

myFather 变量未初始化：

```
var myFather = new Array(); 
```

# bash - 将多个文件复制到多个目的地

> ID：16128713
> 
> 赞同：0
> 
> 时间：2013-04-21T06:55:42.670
> 
> 标签：bash, ssh

当通过 SSH 从一个 UNIX 系统复制到另一个系统时，是否可以在一个操作中将每个文件复制到不同的目标（即避免为每个文件设置新的 SSH 连接的开销），例如通过在像这样的文件：

```
/Users/apple/a --> /home/orange/.
/etc/var/b --> /usr/local/var/.
/other/c --> /wildly/different/. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:08:44.637

我想你可以这样写：

```
mkdir ./tmp/
ln -s /Users/apple/a /etc/var/b /other/c ./tmp/
# Now ./tmp/ has symbolic links to all these files.
# Tar the files to STDOUT, and pipe that over SSH to a
# tar that's reading from STDIN:
tar -ch tmp/* \
  | ssh USER@HOST ' tar -xf -
                    mv tmp/a /home/orange/
                    mv tmp/b /usr/local/var/
                    mv tmp/c /wildly/different/
                    rmdir tmp/
                  '
rm -r tmp/ 
```

. . . 不是很优雅，但它只需要一个 SSH 连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T06:58:57.667

您可以采取的一种策略是在您的本地系统（发送方）上构建一个“根”目录，模仿您希望在接收机器上拥有的文件结构，然后将其复制到`/`另一台机器上的根目录（）。例如，您可以将以下临时目录构建为“根”：

```
/tmp/root
/tmp/root/home/orange/a
/tmp/root/usr/local/var/b
/tmp/root/wildly/different/c 
```

然后只需复制`/tmp/root`到`/`远程计算机上，这将只是一次复制操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T08:13:18.810

您可能需要考虑[SSH 会话共享](https://stackoverflow.com/questions/15949316/can-i-use-an-existing-ssh-connection-and-execute-scp-over-that-tunnel-without-re/15949814)。不再需要重新验证，所以速度很快。

# php - 使用 PHP 和 Ajax 在同一页面上打开图库图片

> ID：16128718
> 
> 赞同：0
> 
> 时间：2013-04-21T06:56:02.137
> 
> 标签：php, ajax

PHP 和 AJAX 代码：

```
<div id = "galleryContainer"></div> 
```

```
var linkArray = document.getElementByTagName('a');

for (var i = 0; i > linkArray.length; i++)
{
    if (linkArray[i].getAttribute('class') == 'myLinks')
    {
        linkArray[i].onclick = function ()
        {
            var url = (this.href);

            var xmlhttp;

            if (window.XMLHttpRequest)
            {
                xmlhttp = new XMLHttpRequest ();
            }
            else
            {
                xmlhttp = new ActiveXObject ("Microsoft.XMLHTTP");
            }

            xmlhttp.onreadystatechange = function()
            {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
                {
                    document.getElementById ("galleryContainer").innerHTML = xmlhttp.responseText;
                }
            }

            xmlhttp.open ("GET", "stubs/storage.php?theurl="+url, true);
            xmlhttp.send()

            return (false);

        }
    }
} 
```

目前我正在本地主机上对此进行测试，发生的情况是我的 HTML 中显示了链接。单击时，它们会正确打开，但是 URL 会更改为图像的实际位置

```
http://localhost/images/gallery/image-name.extension. 
```

为了返回页面，您实际上必须点击返回按钮。我正在尝试使链接直接在 HTML 链接所在的下方显示图片。

我正在尝试调用另一个名为 storage.php 的文件，但它似乎不起作用。我尝试使用警报，甚至使用了另一个文件，但它就是无法打开它。到目前为止，我不认为我链接文件的错误位置有问题，而是我调用文件有问题。我正在使用 W3 示例中的一些代码。

像往常一样，我做了我的研究，并尝试遵循其他 stackoverflow 示例，其中人们想在新窗口中打开某些内容并尝试将其逆向工程到我的代码中，但是它不起作用。我对 Ajax 还很陌生，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T07:05:56.497

如果您只需要页面上的一张图片。我建议将 galleryContainer 制作为图像：

```
<img src="" id="galleryContainer" /> 
```

使用它作为 JS：

```
for (var i = 0; i > linkArray.length; i++)
{
    if (linkArray[i].getAttribute('class') == 'myLinks')
    {
        linkArray[i].onclick = function ()
        {
            var url = (this.href);

            document.getElementById('galleryContainer').src = url;
            return false;
        }
    }
} 
```

每次更改源时，图像都会重新加载，我认为这可以达到您想要达到的效果。

也就是说，正如人们在评论中提到的那样，[fancybox](http://fancyapps.com/fancybox/#examples)可能更有可能是您想要实现的目标，因此可能值得研究。

# javascript - 我的 Jquery 无法识别变量值有什么问题

> ID：16128722
> 
> 赞同：0
> 
> 时间：2013-04-21T06:56:35.253
> 
> 标签：javascript, jquery, jquery-load

所以我使用加载函数将数据传递到另一个名为 compare_proc.php 的文件。我创建了存储要传递的数据的变量，这些数据是数字。当我提醒这些变量时，数据就在那里，但是，当我通过加载函数传递数据，变量的内容会丢失..下面是相关代码

```
<script type="text/javascript">

        jQuery(document).ready(function() {
            jQuery('#mycarousel').jcarousel();
          $("a.inline").colorbox({iframe:true, width:"80%", height:"80%"});
              $("#opposition a").click(function(e) {
              var first_id  = $(this).attr('id'); // value of first_id is 10 
              var second_id = $("h1").attr('id'); // value of second_id is 20
              $("div#test").load('compare_proc.php','id=first_id&id2= second_id');
              e.preventDefault();
                });
    }); 
```

但是，加载函数将 first_id 而不是 10 传递给 id，将 second_id 而不是 20 传递给 id2 .. 我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T06:58:29.327

您需要进行字符串连接，因为`first_id`和`second_id`是您需要创建连接字符串的变量，`'id=' + first_id + '&id2=' + second_id`如参数

```
jQuery(document).ready(function() {
    jQuery('#mycarousel').jcarousel();
    $("a.inline").colorbox({iframe:true, width:"80%", height:"80%"});

    $("#opposition a").click(function(e) {
        var first_id  = $(this).attr('id'); // value of first_id is 10 
        var second_id = $("h1").attr('id'); // value of second_id is 20
        $("div#test").load('compare_proc.php','id=' + first_id + '&id2=' + second_id);
        e.preventDefault();
    });
}); 
```

另一种选择是将数据作为对象而不是字符串传递，如下所示，我更喜欢这种方法

```
jQuery(document).ready(function() {
    jQuery('#mycarousel').jcarousel();
    $("a.inline").colorbox({iframe:true, width:"80%", height:"80%"});

    $("#opposition a").click(function(e) {
        var first_id  = $(this).attr('id'); // value of first_id is 10 
        var second_id = $("h1").attr('id'); // value of second_id is 20
        $("div#test").load('compare_proc.php',{
            id:first_id, 
            id2:second_id
        });
        e.preventDefault();
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T07:01:07.503

只需替换这一行：

```
$("div#test").load('compare_proc.php','id=first_id&id2= second_id'); 
```

有了这个：

```
$("div#test").load('compare_proc.php','id=' + first_id + '&id2=' + second_id); 
```

# ajax - asp.net MVC - Ajax 更新图像

> ID：16128733
> 
> 赞同：2
> 
> 时间：2013-04-21T06:57:22.097
> 
> 标签：ajax, asp.net-mvc, image

我正在尝试使用 Ajax 更新图像 scr，首先在控制器中：

```
 public ActionResult GenerateMIPImage(float pX = 0, float pY = 0, float pZ = 0)
    {
        FileContentResult result;
      ...
        im.SetViewPlane(new Point3D(pX, pY, pZ), new Vector3D(0, 0, 1), new Vector3D(0, 1, 0));
   ...
        objImage = im.Bitmap(outputSize, PixelFormat.Format24bppRgb, m);
        using (var memStream = new MemoryStream())
        {
            objImage.Save(memStream, ImageFormat.Png);
            result = this.File(memStream.GetBuffer(), "image/png");
        }

        return result;
    } 
```

我第一次使用以下方式显示图像：

```
<img src='<%=Url.Action("GenerateMIPImage")%>' alt="" id="dImage"/> 
```

然后我使用这个 Ajax 来更改其中一个变量：

```
$('#Zup').click(function () {
                pointZF++;
                //                alert(pointZF);
                $.ajax({
                    url: '/Home/GenerateMIPImage',
                    type: 'POST',
                    data: {
                        pX: pointXF,
                        pY: pointYF,
                        pZ: pointZF
                    },
                    success: function (data) {
                        dImage.src = data;
                    },
                    error: function () {

                    }
                });
            }); 
```

图像消失，当它检查它的属性时，我得到：

```
http://localhost:59601/�PNG 
```

我会很感激你的建议，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:53:58.650

在您的 ajax 中，您尝试将 img 的 src 设置为图像数据而不是图像 uri。
而是将 img 的 src 设置为 ajax 请求的 url，将参数添加到地址，并在服务器端将请求方法从 post 更改为 get。

```
dImage.src = '/Home/GenerateMIPImage?'+$.param({
                    pX: pointXF,
                    pY: pointYF,
                    pZ: pointZF
                }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-21T08:16:02.053

请按以下方式更改您请求的数据部分

```
 data: JSON.stringify({
                    pX: pointXF,
                    pY: pointYF,
                    pZ: pointZF
                }), 
```

# c# - C# - 替换多行字符串并复制到另一个文本框

> ID：16128735
> 
> 赞同：0
> 
> 时间：2013-04-21T06:58:00.727
> 
> 标签：c#, .net, windows, winforms, multiline

我有一个脑痛的问题，希望大家能帮忙。

我有一个包含多行字符串的**textBox1**，如下所示：

```
filewith.dl_
somefiles.sy_
morewith.ex_ 
```

textBox1 包含当用户浏览到包含压缩的 Windows 安装文件的文件夹时 GetFiles 找到的文件。

我想要做的是在 textBox2 中显示相同的多行文本，但`.dl_`用`.dll`、`sy_`with`sys`和`ex_`with替换`exe`。

我努力了：

```
 private void buttonExpandAll_Click(object sender, EventArgs e)
    {
        textBox2.Text = textBox1.Text.Replace(".dl_", "dll");
    } 
```

但显然这是非常有限的，因为它只能将 .dl_ 替换为 dll 而忽略其他 sy_ 和 dl_。

我也试过`Regex.Replace`了，但它只做 .dl_ 而不是其他两个。

有没有办法一次性替换这些字符？对不起，如果这很简单，但我是新手！

先感谢您！

奈杰尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:01:31.983

一种简单的方法是将调用链接到`Replace`这样的：

```
textBox2.Text = textBox1.Text
    .Replace(".dl_", ".dll")
    .Replace(".ex_", ".exe")
    .Replace(".sy_", ".sys"); 
```

# java - 在java中管理数据的简单方法

> ID：16128753
> 
> 赞同：-1
> 
> 时间：2013-04-21T07:01:27.520
> 
> 标签：java

我还没有做过这样的事情，所以我只需要一点帮助来指导我应该去的方向。我有一个我正在用java开发的应用程序。它有很多变量是指基于购买量的价格金额。一种产品有大约四十个基于数量的值。还有选择用户名的选项。选择用户名后，信息将附加到所选名称的工作表中。

我想知道的是处理这样的数据的最佳方法是什么。我希望它在单独的工作表中，以便如果值发生更改，我可以在工作表中而不是在代码本身中更改它。用户信息也是如此。我也想把它分开。我对很多这些东西还是很陌生。我不想使用数据库，所以我想知道最好的方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T07:07:05.370

任何其他名称的数据库仍然是数据库，只是效率不高。您可以将数据保存在 Excel 电子表格中，将其保存为 .csv 文件，然后在 java 中打开文件并解析信息。在单独的文件中，您可以保留用户名列表，每次新用户注册时附加一个新名称。

但实际上——这最终看起来就像一个有两个表的数据库；除非你重新发明了一堆代码。

如果您决定走那条路，请查看[Embedded java databases](https://stackoverflow.com/questions/57102/embedded-java-databases)。投票最多的建议是使用[Apache Derby](http://db.apache.org/derby/)。

# vb.net - 在 VB.net 中创建子子注册表项

> ID：16128755
> 
> 赞同：0
> 
> 时间：2013-04-21T07:01:38.533
> 
> 标签：vb.net, registry

我正在使用注册表来存储我正在开发的应用程序的一些配置数据，并且我正在努力研究如何创建子文件夹。

这是一个例子：

在`HKEY_CURRENT_USER`我为我的公司名称创建了一个文件夹，然后我的应用程序之一是这样的：

`HKEY_CURRENT_USER/Company/App_Name`

我可以在该文件夹中创建一个密钥，但我似乎无法在其中创建另一个文件夹，例如

`HKEY_CURRENT_USER/Company/App_Name/midiDevice`

这样我就可以存储与特定设备相关的密钥。这是我想要实现的目标：

```
HKEY_CURRENT_USER/公司/App_Name
HKEY_CURRENT_USER/Company/App_Name/useMidi
HKEY_CURRENT_USER/Company/App_Name/activeMidiDevice

HKEY_CURRENT_USER/公司/App_Name/midiDevice1/
HKEY_CURRENT_USER/Company/App_Name/midiDevice1/setting1
HKEY_CURRENT_USER/Company/App_Name/midiDevice1/setting2
HKEY_CURRENT_USER/Company/App_Name/midiDevice1/setting3

HKEY_CURRENT_USER/公司/App_Name/midiDevice2/
HKEY_CURRENT_USER/Company/App_Name/midiDevice2/setting1
HKEY_CURRENT_USER/Company/App_Name/midiDevice2/setting2
HKEY_CURRENT_USER/Company/App_Name/midiDevice2/setting3

```

这是我的代码：

```
' Set flag to indicate that we need to use MIDI to control program and store device name
Dim registryPath As String = "HKEY_CURRENT_USER\Software\CompanyName\App_Name\"
My.Computer.Registry.SetValue(registryPath, "useMidi", True)
My.Computer.Registry.SetValue(registryPath, "activeMidiDevice", deviceName)

' Create device specific path to store settings
registryPath = "HKEY_CURRENT_USER\Software\CompanyName\App_Name\" & deviceName & "\"
Console.WriteLine("Path: " & registryPath)

' Write this to the registry
My.Computer.Registry.CurrentUser.CreateSubKey(registryPath)
My.Computer.Registry.SetValue(registryPath, "setting1", value1)
My.Computer.Registry.SetValue(registryPath, "setting2", value2)
My.Computer.Registry.SetValue(registryPath, "setting3", value3) 
```

此代码仅在同一注册表文件夹中创建所有键：`HKEY_CURRENT_USER\Software\CompanyName\App_Name\`

我确信这是微不足道的（我从检查注册表中知道）这是可能的，但我做错了什么？

# ios - 使用 NSRange 获取子字符串

> ID：16128757
> 
> 赞同：0
> 
> 时间：2013-04-21T07:01:54.040
> 
> 标签：ios, objective-c, nsstring, substring, nsrange

我尝试从此链接中读出 youtubevideos 的网址：[http ://gdata.youtube.com/feeds/api/videos?author=channelname](http://gdata.youtube.com/feeds/api/videos?author=channelname)

我试过这样：

```
NSRange startRange = [ret rangeOfString:@"<media:content url='http"];
NSRange endRange = [ret rangeOfString:@"'"];

NSRange searchRange = NSMakeRange(startRange.location , endRange.location);
NSLog(@"Link: %@",[ret substringWithRange:searchRange]); 
```

输出只是：`<media:content`

我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:08:40.833

> 我的错误在哪里？

错误在于您没有使用[正确的工具](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)来完成任务。

无论如何，您似乎混淆了范围的长度和结束位置。`NSMakeRange()`需要一个位置和一个长度，而不是开始和结束位置。

此外，不要期望`- [NSString rangeOfString:]`神奇地猜测您要做什么。它将返回给定子字符串的第一次出现，这不是你想要的。

# c - 用 C 和汇编编写一个简单的线程

> ID：16128759
> 
> 赞同：9
> 
> 时间：2013-04-21T07:02:48.157
> 
> 标签：c, assembly, x86-64

我正在尝试编写一个简单的用户级线程库作为我的操作系统课程的练习。作为第一步，我试图运行一个程序并跳转到离开第一个程序的函数。到目前为止的代码是这样的：

初始程序：

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <assert.h>

#define STACK_SIZE (sizeof(void *) * 512)

void proc2() //This is the function that should run as the thread.
{
    int i;
    for(i=0;i<30;i++)
    {
        printf("Here I am!\n");
        sleep(0.5);
    }
    exit(0);
}

void* malloc_stack() //used to malloc the stack for the new thread. 
{
    void *ptr = malloc(STACK_SIZE + 16);
    if (!ptr) return NULL;
        ptr = (void *)(((unsigned long)ptr & (-1 << 4)) + 0x10); //size align
    return ptr;
}

int main()
{
    int *bp, *sp; 
    sp = malloc_stack();
    bp  = (int*) ((unsigned long)sp + STACK_SIZE);
    proc1(&proc2,sp,bp); //the actual code that runs the thread. Written in assembly
    assert(0);
} 
```

然后我编写了一个名为 proc1 的简单汇编代码，它接受三个参数，指向函数的指针（用作指令指针）、堆栈指针和基指针，并用这些值替换当前寄存器。我写的代码是：

```
.globl  proc1
proc1:   
movq    %rdx, %rbp        #store the new base pointer
movq    %rsi,%rsp         #store the new stack pointer  
jmp     %rdi              #jump to the new instruction pointer. 
```

但是当我运行这段代码时，我得到的是一个分段错误。请帮我在这里找到错误。

好吧，当我使用以下命令在 GDB 下运行它时，它工作正常：

```
gcc -g test.c switch.s
gdb a.out
run 
```

但是当它像 ./a.out 一样单独运行时，它不起作用！！！！请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T10:17:16.630

尝试更改代码以将汇编指令直接包含在 C 源代码中，如下所示：

```
void proc1(void (*fun)(), int *sp, int *bp){
    register int *sptr asm ("%rsi") = sp;
    register int *bptr asm ("%rdx") = bp;
    register void (*fptr)() asm ("%rdi") = fun;

    asm (
        "mov %rdx, %ebp\n"
        "mov %rsi, %esp\n"
        "jmp *%rdi\n"
    );
} 
```

上面的代码确保参数`proc1`在正确的寄存器中（尽管您的代码在 abi 中似乎是正确的）。请注意参数`*`前面的`jmp`参数，当我第一次尝试您的代码时，我的 gnu 版本警告过它。

使用上面的函数，和`-g`你一起编译的代码应该可以正常调试（使用`breakpoint`指令`proc1`和`info registers`检查cpu的内容）。

* * *

**问题**实际上出在`%rsp`指针上，它必须始终等于或大于`%rbp`（堆栈向下增长）。只需将 bp 而不是 sp 传递给`proc1`in main 即可解决问题：

```
 proc1(&proc2, bp, bp); 
```

2个小备注：

*   不要忘记`proc1`在 asm 版本的 C 代码中给出原型：

    ```
    extern void proc1(void (*)(), int *, int *); 
    ```

*   `sleep`libc 函数只取`unsigned long`，不取`float`。

    ```
    sleep(1); 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T08:06:04.617

您`movq`在程序集的顶部是（好吧，在您编辑之前“是”:-)）写成

```
movq dst,src 
```

但是您`movq`之前的`jmp`内容已被写入`movq %rax,%rsp`，并且`%rsp`显然是所需的 dst。这显然是错误的，不确定其他任何事情。

# jquery - What is the correct jQuery syntax for making a function specific to one input apply to all inputs?

> ID：16128765
> 
> 赞同：0
> 
> 时间：2013-04-21T07:04:02.787
> 
> 标签：jquery, function, syntax, webforms, listeners

This is a continuing issue related to my question [[HERE]](https://stackoverflow.com/questions/16128072/what-is-the-jquery-or-javascript-syntax-to-make-functions-work-only-on-the-activ?noredirect=1#comment23037370_16128072), if you are looking for a little background.

I am a beginner & self interested web coder looking to put functions in jQuery in order to make the functions work in any focused input/element.

I began here, with three functions which worked but only on the `<textarea>`: `id="dataInput_0"`.

```
<textarea
    data-id="0"
    class="classOne classTwo"
    id="dataInput_0"
    name="xInput_row_1"
        onFocus="functionOne();"
        onBlur="functionTwo();"
        onKeyUp="functionThree();">
</textarea> 
```

I asked and received good tips and information on how to use jQuery listeners, which would apply the functions to any `<textarea>` cells with a given class. However I could only figure out how to apply the focus and blur functions as here:

```
<script type="text/javascript">
$(document).ready(function(){
    $('.classOne').keypress(function(e){
        if (e.which == 13) 
        {
            alert ( "message-return key not allowed");
            return false;
        }
    });
    $('.classOne').focus(function() {
        var d = this;
            d.className = d.className + " InFocus";
   });
    $('.classOne').blur(function() {
        var d = this;
            d.className = "classOne";
   });
})
</script> 
```

And the `<textarea>` code now is:

```
<textarea
    data-id="0"
    class="classOne classTwo"
    id="dataInput_0"
    name="xInput_row_1"
        onKeyUp="functionThree();">
</textarea> 
```

functionThree() is the trick bag here. Because of my limited (non existant?) understanding of syntax, I am having troubles moving the javaScript function to jQuery.

The javaScript function is related to identifying delimiters and splitting data copied from Excel which is then pasted in the multitude of `<textarea>`s.

Code:

```
<script type="text/javascript">
     function functionThree() {
        var x = document.forms["formName"]["dataInput_0"].value;
        if (x.indexOf('\t') > 0 && x.indexOf('\n') > 0) {
        alert ("Can't paste rows & Columns in blocks, blah, blah, blah message");
        document.forms["formName"]["dataInput_0"].value = "";
        return false;
        }
        else 
         if (x.indexOf('\t') > 0) {
             var delimiterT = x.split('\t');
             for (var i = 0; i < delimiterT.length ; i++)
                document.getElementById("dataInput_" + i).value = (delimiterT[i]);
         }
         else
             if (x.indexOf('\n') > 0) {
                 var delimiterN = x.split('\n');
                 var j = 0;
                 for (var i = 0; i < delimiterN.length ; i++) {

                     document.getElementById("dataInput_" + j).value = (delimiterN[i]);
                     j += 4;
                 }
             }
             else
                 return false;
     }
</script> 
```

The `j += 4;` was because I was presuming an example form with 4 columns. If I had 24 columns, obviously i would be `j += 24;` to get to the next `<textarea>` under the focused one.

So the above javaScript works for only `["dataInput_0"]`, and I am wanting it to work for any focused `<textarea>`.

What might the correct jQuery syntax be?

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:49:08.830

you can bind keyup event handler in the similar way, but in your functionThree just use $(this).val() to get textarea value. having jquery you can also get rid of all those getElementById's

```
$('.classOne').on({ 
keypress: function(){...},
focus: function(){...},
blur: function(){...},
keyup:function(){
var x = $(this).val();
    if (x.indexOf('\t') > 0 && x.indexOf('\n') > 0) {
    alert ("Can't paste rows & Columns in blocks, blah, blah, blah message");
    $(this).val("");
    return false;
    }
    else 
     if (x.indexOf('\t') > 0) {
         var delimiterT = x.split('\t');
         for (var i = 0; i < delimiterT.length ; i++)
            $("#dataInput_" + i).val(delimiterT[i]);
     }
     else
         if (x.indexOf('\n') > 0) {
             var delimiterN = x.split('\n');
             var j = 0;
             for (var i = 0; i < delimiterN.length ; i++) {

                 $("#dataInput_" + j).val(delimiterN[i]);
                 j += 4;
             }
         }
         else
             return false;
}
}) 
```

# c++ - 使用简单 XOR 操作的视频加密

> ID：16128766
> 
> 赞同：1
> 
> 时间：2013-04-21T07:04:36.630
> 
> 标签：c++, opencv

我正在处理视频处理项目，该项目涉及使用关键图像和`XOR`操作对视频帧进行一些加密。表达式应如下所示，

```
videoframe XOR key_image= modified_video stored in DIVX format

modified_video XOR key_image= not getting original video frame 
```

我发现这`DIVX`就是`lossy compression`为什么在用相同的关键图像文件对修改后的视频进行异或运算后我没有得到原始视频的原因。

现在我需要对视频帧进行简单的加密（如果可能，使用图像作为密钥文件）。

# admob - AdMob eCPM 保底测试版发布商 ID

> ID：16128767
> 
> 赞同：1
> 
> 时间：2013-04-21T07:04:44.820
> 
> 标签：admob

在我创建了新的 AdMob eCPM 底价并选择了我已经拥有的应用程序/网站后，我得到了名为“中介 ID”的新发布商 ID。我应该将 Play 商店中已有应用程序上的网站 ID 更改为这个新的吗？或 eCPM 底价可能会起作用？

因为我现在有 2 个发布者 ID，App ID 和 eCPM ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T10:58:42.273

您应该有一个 mediationID，它是 Admob 中介屏幕中的 ID。您可能有 2 个 Admob publisherId，一个用于 eCPM 保底，一个用于非保底。

您的应用应使用 mediationId。您的中介配置（在 Admob 中介页面上）应参考另外 2 个 publisherId。

# javascript - jQuery AJAX 在 200 成功响应中以 404 失败

> ID：16128769
> 
> 赞同：2
> 
> 时间：2013-04-21T07:05:19.463
> 
> 标签：javascript, ruby, ajax

我有一个简单的 API，用 Rails 编写，应该与 jQuery 的 AJAX 一起使用。

这是我的控制器方法的样子：

```
 user = User.find_by_email_and_password(params[:email], params[:password])
  if ! user
    user = User.new
    user.email = params[:email]
    user.password = params[:password]
    user.save
  end

  respond_with user, status: 200 
```

这是 AJAX 处理程序：

```
$.ajax({
    url: Service.url + 'login.json',
    data: {
      email: 'email@server.com',
      password: 'pass'
    },
    type: 'POST',
    dataType: 'json',
    success: function(json) {
      if (json.id) {
        this.is_logged_in = true;
        this.data = json;
        $('#finilizeModal').modal('show');
        return $('#signInModal').modal('hide');
      }
    },
    error: function(xhr, status) {
      return alert('An error occured while executing AJAX request');
    },
    complete: function() {}
  }); 
```

以下只是警告：`An error occured while executing AJAX request`并且错误代码为 404。但 Chrome Inspector 显示请求成功并且输出是有效的 JSON。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:20:53.387

尝试在 rails 中生成没有 '.json' 的页面，因为：rails 中的 URL '/somepage?email=emsil&password=pass.json'，jQuery 发送 '/somepage.json?email=email&password=pass'。

# google-visualization - Google 可视化仪表板表中的总计

> ID：16128770
> 
> 赞同：3
> 
> 时间：2013-04-21T07:05:25.570
> 
> 标签：google-visualization, dashboard

我有一个简单的 Google 可视化仪表板示例，其中包含一个类别选择器控件和一个表格。我的代码如下。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load('visualization', '1.1', {packages: ['controls']});
    </script>
    <script type="text/javascript">
      function drawVisualization() {
        // Prepare the data.
        var data = google.visualization.arrayToDataTable([
          ['Metric', 'Value'],
          ['CPU' , 12],
          ['Memory', 20],
          ['Disk', 7],
          ['Network', 54]
        ]);

        // Define a category picker for the 'Metric' column.
        var categoryPicker = new google.visualization.ControlWrapper({
          'controlType': 'CategoryFilter',
          'containerId': 'control',
          'options': {
            'filterColumnLabel': 'Metric',
            'ui': {
              'allowTyping': false,
              'allowMultiple': true,
              'selectedValuesLayout': 'belowStacked'
            }
          },

        });

        // Define a table.
        var table = new google.visualization.ChartWrapper({
          'chartType': 'Table',
          'containerId': 'chart',
          'options': {
            'width': 400,
            'height': 180
          }
        });

        // Create the dashboard.
        var dashboard = new google.visualization.Dashboard(document.getElementById('dashboard')).
          // Configure the category picker to affect the table
          bind(categoryPicker, table).
          // Draw the dashboard
          draw(data);
      }

      google.setOnLoadCallback(drawVisualization);
    </script>
  </head>
  <body style="font-family: Arial;border: 0 none;">
    <div id="dashboard">
      <table>
        <tr style='vertical-align: top'>
          <td style='width: 300px; font-size: 0.9em;'>
            <div id="control"></div>
          </td>
          <td style='width: 600px'>
            <div style="float: left;" id="chart"></div>
          </td>
        </tr>
      </table>
    </div>
  </body>
</html> 
```

我遇到了一个问题，我想要最后的总价值。如何在表格末尾再添加一行，以便显示第二列中所有值的总计。即，最初它应该显示所有四行的总数，当应用过滤器时，它应该显示过滤后的行值的总数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T00:07:19.187

您可以在“绘制”显示总数的图表之前添加一行：

例如：

```
 var data = google.visualization.arrayToDataTable([
    ['Year', 'Austria', 'Belgium', 'Czech Republic', 'Finland', 'France', 'Germany'],
    ['2003',  1336060,   3817614,       974066,       1104797,   6651824,  15727003],
    ['2004',  1538156,   3968305,       928875,       1151983,   5940129,  17356071],
    ['2005',  1576579,   4063225,       1063414,      1156441,   5714009,  16716049],
    ['2006',  1600652,   4604684,       940478,       1167979,   6190532,  18542843],
    ['2007',  1968113,   4013653,       1037079,      1207029,   6420270,  19564053],
    ['2008',  1901067,   6792087,       1037327,      1284795,   6240921,  19830493]
  ]);

  function getSum(data, column) {
    var total = 0;
    for (i = 0; i < data.getNumberOfRows(); i++)
      total = total + data.getValue(i, column);
    return total;
  }

  alert(getSum(data, 1)); 
```

这会给你一个很好的警报框说`9920627`

`1336060+1538156+1576579+1600652+1968113+1901067=9920627`

您可以在末尾添加一行，如下所示：

`addRow('Total', getSum(data, 1));`

如果问题是关于如何获得由滑块等过滤的列的总和，那是另一种野兽，而[asgallant 的这个 jsfiddle](http://jsfiddle.net/asgallant/rEhUp/)可能更适合：

> ```
> google.load('visualization', '1.1', {packages: ['controls']});
> google.setOnLoadCallback(drawVisualization);
> 
> function drawVisualization() {
>     // Prepare the data
>     var data = google.visualization.arrayToDataTable([
>         ['Name', 'RoolNumber', 'Gender', 'Age', 'Donuts eaten'],
>         ['Michael', 1, 'Male', 12, 5],
>         ['Elisa', 2, 'Female', 20, 7],
>         ['Robert', 3, 'Male', 7, 3],
>         ['John', 4, 'Male', 54, 2],
>         ['Jessica', 5, 'Female', 22, 6],
>         ['Aaron', 6, 'Male', 3, 1],
>         ['Margareth', 7, 'Female', 42, 8],
>         ['Miranda', 8, 'Female', 33, 6]
>     ]);
> 
>     // Define a slider control for the Age column.
>     var slider_rn = new google.visualization.ControlWrapper({
>         controlType: 'NumberRangeFilter',
>         containerId: 'control2',
>         options: {
>             filterColumnLabel: 'RoolNumber',
>             ui: {
>                 labelStacking: 'vertical'
>             }
>         }
>     });
> 
>     var slider = new google.visualization.ControlWrapper({
>         controlType: 'NumberRangeFilter',
>         containerId: 'control1',
>         state: {
>             lowValue: 10,
>             highValue: 40,
>             highThumbAtMax: true
>         },
>         options: {
>             filterColumnLabel: 'Age',
>             ui: {
>                 labelStacking: 'vertical'
>             }
>         }
>     });
> 
>     // Define a category picker control for the Gender column
>     var categoryPicker = new google.visualization.ControlWrapper({
>         controlType: 'CategoryFilter',
>         containerId: 'control3',
>         options: {
>             filterColumnLabel: 'Gender',
>             ui: {
>                 labelStacking: 'vertical',
>                 allowTyping: false,
>                 allowMultiple: false
>             }
>         }
>     });
> 
>     // Define a Pie chart
>     var pie = new google.visualization.ChartWrapper({
>         chartType: 'PieChart',
>         containerId: 'chart1',
>         options: {
>             width: 300,
>             height: 300,
>             legend: 'none',
>             title: 'Donuts eaten per person',
>             chartArea: {
>                 left: 15,
>                 top: 15,
>                 right: 0,
>                 bottom: 0
>             },
>             pieSliceText: 'label'
>         },
>         // Instruct the piechart to use colums 0 (Name) and 3 (Donuts Eaten)
>         // from the 'data' DataTable.
>         view: {
>             columns: [0, 4]
>         }
>     });
> 
>     // Define a table
>     var table = new google.visualization.ChartWrapper({
>         chartType: 'Table',
>         containerId: 'chart2',
>         options: {
>             width: '500px'
>         }
>     });
> 
>     // get average and geometric mean values
>     google.visualization.events.addListener(table, 'ready', function () {
>         var group = google.visualization.data.group(table.getDataTable(), [{
>             // we need a key column to group on, but since we want all rows grouped into 1, 
>             // then it needs a constant value
>             column: 0,
>             type: 'number',
>             modifier: function () {
>                 return 1;
>             }
>         }], [{
>             // get the average age
>             column: 3,
>             label: 'Average Age',
>             type: 'number',
>             aggregation: google.visualization.data.avg
>         }, {
>             // get the geometric mean of age
>             column: 3,
>             label: 'Geometric Mean of Age',
>             type: 'number',
>             aggregation: function (values) {
>                 var product = 1;
>                 var n = values.length;
>                 for (i = 0; i < n; i++) {
>                     product = product * values[i];
>                 }
>                 return nthroot(product, n);
>             }
>         }]);
>         document.getElementById('avg').innerHTML = group.getValue(0, 1);
>         document.getElementById('geomean').innerHTML = group.getValue(0, 2);
>     });
> 
>     // Create a dashboard
>     new google.visualization.Dashboard(document.getElementById('dashboard')).
>     // Establish bindings, declaring the both the slider and the category
>     // picker will drive both charts.
>     bind([slider, slider_rn, categoryPicker], [table, pie]).
>     // Draw the entire dashboard.
>     draw(data);
> }
> 
> // nthroot function courtesy of http://gotochriswest.com
> // see http://gotochriswest.com/blog/2011/05/06/cube-root-an-beyond/
> // special function necessary because Math.pow(-8, 1/3) returns NaN instead of -2
> function nthroot(x, n) {
>     try {
>         var negate = n % 2 == 1 && x < 0;
>         if (negate) {
>             x = -x;
>         }
>         var possible = Math.pow(x, 1 / n);
>         n = Math.pow(possible, n);
>         if (Math.abs(x - n) < 1 && (x > 0 == n > 0)) {
>             return negate ? -possible : possible;
>         }
>     } catch(e){}
> } 
> ```

# javascript - 将鼠标位置存储为变量并与值进行比较以触发事件

> ID：16128772
> 
> 赞同：0
> 
> 时间：2013-04-21T07:05:30.683
> 
> 标签：javascript, jquery, mouseover, mouseout, bounding-box

我处于不能简单地使用悬停事件的位置，但是当鼠标位于给定元素的区域内以及离开该区域时，我需要触发 mouseover 和 mouseout。它可以是 javascript、jquery 或混合。我还没有成功地将鼠标位置存储为变量或找出一种方法来判断鼠标何时离开给定区域。我的每个问题都由'????'表示 在代码中。

```
function targetMouse() {
    var box = document.getElementById('CleanBox'),
        top = box.offsetTop,
        left = box.offsetLeft,
        right = left + box.offsetWidth,
        bottom = top + box.offsetHeight,
        mouseX = ????;
        mouseY = ????;

    if (left < mouseX > right && top < mouseY > bottom) {
        $('#CleanBox').mouseover();
    }
    else if (????) {
        $('#CleanBox').mouseout();
    }
} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:40:14.913

像这样的东西？

。盒子 {

```
 width:300px;
    height:100px;
    position: absolute;
    top: 30%;
    left: 30%;
    background-color:yellow;
    border:2px solid;
}

<div id="popup">Mouse is on box</div>
<div id="box" class="box"></div>

var box = document.getElementById("box");
var top = box.offsetTop;
var left = box.offsetLeft;
var right = left + box.offsetWidth;
var bottom = top + box.offsetHeight;
var hoverState = false;
var popup = document.getElementById("popup");

popup.hidden = true;

function hoverCheck(evt) {
    var x = evt.clientX;
    var y = evt.clientY;

    if (x >= left && x <= right && y >= top && y <= bottom) {
        if (hoverState === false) {
            hoverState = true;
            console.log("mouseon");
        }
    } else {
        if (hoverState === true) {
            hoverState = false;
            console.log("mouseoff");
        }
    }

    popup.hidden = !hoverState;
}

document.addEventListener("mousemove", hoverCheck, false); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/4W3ku/)

# android - 在您的应用程序中硬编码数组的最佳方法是什么？

> ID：16128773
> 
> 赞同：3
> 
> 时间：2013-04-21T07:05:48.067
> 
> 标签：android, arrays

我的应用程序需要三个 per-defiend 数组才能运行：一个字符串数组和两个整数数组。每个数组的长度为 100。为了将这些数组添加到我的应用程序中，我想到了以下两种方法：

*   将它们硬编码在一个`Utils.java`类中作为静态最终变量，并在我需要它们时在我的活动中引用它们。
*   将它们放在文件夹中，并在我需要时`res`构造数组（使用 [getStringArray() ）。](http://developer.android.com/guide/topics/resources/string-resource.html#StringArray)

现在，我想知道：

1.  就内存和效率而言，最好的方法是什么？
2.  第一种方法会增加我的应用程序所需的内存吗？第二个会导致延迟和响应问题吗？
3.  我应该考虑更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T07:27:15.413

如果每种语言的数组都相同等。我会在你的 Utils 类中进行硬编码。这肯定是最快的方式，因为如果您将它们作为资源，您的应用程序必须在运行时读取文件，这比已经在代码中拥有它要慢得多。您的应用程序的整体大小不会像每种方法一样发生太大变化，您将在应用程序包中的某个位置拥有数据。无论是在代码中还是在资源中的文本文件中。实际上，由于代码中的硬编码整数以二进制形式存储为整数，因此它们需要的内存略少（Java 中的每个整数需要 4 个字节来存储，而文本文件中像 1000000000 这样的整数需要 10 个字节。

只有当这些数组对于不同的语言是不同的时，您才应该使用具有资源的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T07:17:01.760

将数据存储在文本文件或属性文件中。一旦有对这些细节的请求，就在数组中读取它们。

然后您可以根据需要将其保存在内存中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T07:32:55.950

我认为将它们放在文件外部是更好的做法，主要是因为您可以更轻松地更改它们而无需推出新代码和兼容性原因。例如，您可以在启动时将它们读入，或者在需要时将它们读入（动态）Utils 类，以获得更高的效率。

如果您需要（或想要）应用程序的快速响应，如果字符串相对较小，我无疑会选择更高效率的选择（硬编码/启动时加载一次）。200`Integers`和 100（小）`Strings`占用的空间真的很小。平均 100 个字符中的A`String[100]`将占用大约 24 kB，而 200 `int`s 将占用 824 字节的内存（包括数组对象开销）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T07:32:01.933

这是通常的时间与空间权衡。我会结合你提到的两种方法。从资源文件加载数组并通过一些预定义的 getter 方法访问它们。这允许您稍后更改您的方法，如果时间或空间成为问题，我猜它不会，而无需触及使用数组的代码

# android - 如何将单个 HTML 文件用于不同的屏幕尺寸？

> ID：16128780
> 
> 赞同：-1
> 
> 时间：2013-04-21T07:06:24.450
> 
> 标签：android, html, css

我正在开发一个使用 HTML 文件的应用程序。在我的应用程序中，对于一项活动，我启用了标题栏，在此活动中，我在 webview 中加载了一个 HTML 文件，并且 HTML 页面适合模拟器屏幕。在另一个活动中，我隐藏了标题栏并在此活动中加载了相同的 HTML 文件。在第二种情况下，屏幕底部有一些空间。谁能告诉我这个问题的解决方案？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:19:55.800

在 CSS 中使用针对自定义宽度的媒体查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T07:45:31.253

你的问题的问题在于它是无关紧要的。

您可以将单个 HTML 文件用于不同的屏幕尺寸，因为它没有区别。CSS 在这里很重要。

您可以定义多个 css 样式表，每个屏幕大小一个，并定义 javascript 来监听以查看屏幕大小。

但是，如果您不会构建移动版本（非常小的屏幕），那么您应该简单地使用使用相对定位和百分比宽度的**流畅 css 布局。**

随屏幕尺寸变化的流体动态布局的一个超级基本的快速示例可能是：

HTML

```
<html>
  <body>
   <div id="first"></div>
   <div id="second"></div>
  </body>
</html> 
```

CSS

```
html, body {
  width: 100%;
}
#first {
  float: left;
  width: 50%;
  background: #eee;
}
#second {
  float: right;
  width: 50%;
  background: #ccc;
} 
```

# wordpress - 如何在不使用任何主题的情况下在 WordPress 上托管 HTML 网站？那可能吗？

> ID：16128782
> 
> 赞同：7
> 
> 时间：2013-04-21T07:06:56.007
> 
> 标签：wordpress

我想在没有任何主题的 WordPress 上托管我的 HTML 编码网站（它只是 HTML），这可能吗？要删除主题但仍使用 WordPress 托管和访问 HTML 页面，该怎么做？如果我删除主题，我会在哪里粘贴 HTML？

我还注意到，当我尝试手动删除主题时，它会折叠 WordPress，并且我无法访问 WP-admin 控制面板。那么如何在没有安装主题的情况下保持 WordPress 的状态和可访问性呢？

请看这个 1:50 秒的快速视频：http: [//youtu.be/5Jd_KV3p5Kw](http://youtu.be/5Jd_KV3p5Kw)（它显示了它的演示）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T07:31:01.640

WordPress 要求您使用主题。因此，没有*充分*的理由尝试删除主题功能。

但是，听起来您想集成一个静态 HTML 页面来代替使用 WYSIWYG 编辑器和功能的标准动态生成的 WordPress 页面。只需修改“ `home.php`”或“ `index.php`”即可更改主页的显示方式。本质上，您可以在其中粘贴所有正常的 HTML，而无需使用 WordPress 的动态功能。您还可以在 WordPress 的后端生成页面，并通过在名为 的活动主题文件夹中创建文件来自定义各个页面的 HTML `page-{slug}.php`，其中 slug 是您要控制的页面的 slug。从那里，您可以使用 WordPress 的*简码*来显示各种插件数据，如果插件支持简码（您始终可以自己编程）。

WordPress 试图通过准备一系列预构建的功能来简化开发体验，这些功能可以帮助您*避免重复自己*。听起来，您想跳过大部分 WordPress 魔法，并打破让 WordPress 仅使用*一些*WordPress 插件功能的许多目的。

1.  自定义活动主题文件夹中的`index.php`、`page-{slug}.php`、`404.php`、`header.php`和`footer.php`页面，并去除任何 WordPress 功能。*注意：除了缺乏 WordPress 主题集成方面的知识外，我没有看到这样做的好处*。

2.  使用`do_shortcode` [http://codex.wordpress.org/Function_Reference/do_shortcode](http://codex.wordpress.org/Function_Reference/do_shortcode)*在循环外*直接调用插件函数，无需渲染页面的所见即所得内容。

虽然这可能需要更多的努力，但从长远来看，花几个小时学习 WordPress HTML -> 主题集成的基础知识是值得的。它不仅是一项有价值的技能（您实际上已经在路上了），而且它会在以后为您节省时间，否则本来可以避免的。知识会为自己付出代价。

我希望这有帮助。

# windows - 如何更改 node.js 中的默认目录？（视窗）

> ID：16128785
> 
> 赞同：5
> 
> 时间：2013-04-21T07:07:19.790
> 
> 标签：windows, node.js

当我尝试在节点上调整我的项目时，我必须为我的 javascript 文件编写完整路径，因为节点使用的默认值是`C:\Users\MyUser`并且我拒绝使用它。

我一直在试图找到如何改变这一点，但在任何地方都没有找到。我什至尝试手动搜索目录并没有找到它。

谁能指点我如何解决我遇到的这个烦人的小问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-08-22T05:36:38.610

您可以在启动时更改“Node.js 命令提示符”的默认目录。如果是这样，那么（Windows 案例）

1.  转到安装 NodeJS 的目录
2.  查找文件 nodevars.bat
3.  以管理员身份使用编辑器打开它
4.  更改行中的默认路径，如下所示

    ```
    if "%CD%\"=="%~dp0" cd /d "%HOMEDRIVE%%HOMEPATH%" 
    ```

用你的路径。例如，它可能是

```
 if "%CD%\"=="%~dp0" cd /d "c://MyDirectory/" 
```

如果您的意思是在启动“Node.js 命令提示符”时更改目录一次，那么您可以在 NodeJS 命令提示符的命令行中运行：

```
 cd c:/MyDirectory/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:46:23.500

Node 的“默认”目录是 Windows 主目录。[注意，您可以使用process.chdir(directory)](http://nodejs.org/api/process.html#process_process_chdir_directory)更改节点的主目录

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-04-02T15:56:04.893

在程序文件夹中有一个 nodevars.bat 文件，用于启动命令外壳。

# ios - 如何在 iOS6 的选项卡式应用中切换视图？

> ID：16128788
> 
> 赞同：0
> 
> 时间：2013-04-21T07:08:13.270
> 
> 标签：ios, objective-c

假设您有一个作为“选项卡式应用程序”启动的项目，默认情况下会创建两个选项卡式视图。现在，您有了另一个独立于这些选项卡的 NIB（也就是说，您不希望它成为选项卡项的一部分，而是将其作为一组单独的 .m、.h、.xib 文件）。

你如何把这个视图带到前面？然后你怎么隐藏它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:12:45.037

使用名为 bringSubviewToFront 的函数

例子：`[self.view bringSubviewToFront:newView];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T08:39:35.607

如果要向 UIViewController 添加另一个视图：
Files: `View.h`, `View.m`,`View.xib`

在 View.h 中：

```
@property (retain, nonatomic) UIView *customView; 
```

在 View.m 中：

```
#import "View.h"

- (void)addSubView
{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"View" owner:nil options:nil];
    self.customView = nib[0];
    [self.view addSubview:self.customView];
}

- (void)removeSubView
{
    [self.customView removeFromSuperView];
} 
```

# c - 为什么在使用共享内存的生产者-消费者范式的缓冲区中只允许 BUFFER_SIZE-1 项？

> ID：16128798
> 
> 赞同：4
> 
> 时间：2013-04-21T07:09:20.737
> 
> 标签：c, operating-system, producer-consumer, circular-buffer

以下是硬拷贝本身的“操作系统概念”第 7 版 Galvin，Gagne 第 3 章的摘录：

* * *

以下变量驻留在生产者和消费者进程共享的内存区域中：

```
#define BUFFER_SIZE 10

typedef struct {
 . . .
} item;

item buffer[ BUFFER_SIZE ];
int in = 0;
int out = 0; 
```

共享缓冲区实现为具有两个逻辑指针的循环数组：**in**和**out**。变量**in**指向缓冲区中的下一个空闲位置；**out**指向缓冲区中的第一个完整位置。当`in==out;`缓冲区已满时，缓冲区为空`((in+1)%BUFFER_SIZE)==out`。

**该方案最多允许同时`BUFFER_SIZE-1`在缓冲区中的最多项目。**

* * *

我用**粗体**突出了我的困惑。这是该章在线幻灯片的链接（但它已经编辑了本书的几行）。转到*“使用共享内存的生产者-消费者示例”部分*

[http://www.cs.uic.edu/~jbell/CourseNotes/OperatingSystems/3_Processes.html](http://www.cs.uic.edu/~jbell/CourseNotes/OperatingSystems/3_Processes.html)

`BUFFER_SIZE-1`为什么缓冲区中可以有项目？如果我们从`buffer[0]`to开始`buffer[BUFFERSIZE-1]`，它不等于`BUFFER_SIZE`项目数吗？作者的意思是说缓冲区的索引不能超过`BUFFER_SIZE-1`吗？但是后来，他明明写了同时不能超过的**项**`BUFFER_SIZE-1`数。请解释整个事情。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-21T07:19:54.787

When you have ring buffer, you typically have 2 pointers or offsets, which signify `start` and `end` of the data in the buffer. Typical convention to tell if buffer is empty when `start` == `end`.

This convention leads to `BUFFER_SIZE - 1` limitation on total numbers of items in ring buffer. If we were to allow to fill it to `BUFFER_SIZE`, this would mean that `start` == `end`, and thus would be impossible to tell if buffer is completely empty or completely full.

If you create one more variable that keeps number of items in the buffer, this would be possible to tell apart and allow to fill buffer to the max. But it is easier to not do that and simply reduce max number of items by 1.

# visual-studio-2012 - 如何找到调用某个方法的所有地方？

> ID：16128799
> 
> 赞同：0
> 
> 时间：2013-04-21T07:09:26.740
> 
> 标签：visual-studio-2012, visual-assist

我在一个文件中有这样的方法：

```
virtual void addValue(FieldIdentityCPtr & identity, ValueType::Type type, const unsigned char * value, size_t length) = 0; 
```

我想找到调用此方法的所有地方。即**所有用法**。

我尝试使用 VisualAssistX“查找引用 Alt+Shift+G”快捷方式。而且我实际上收到了对**任何**（！）方法的**所有引用。****`addValue`**

 **我不仅收到用法，还收到方法声明实现等。

我收到对所有同名方法的引用。就我而言，我还有大约 10 种方法，并且还包括对所有这些方法的引用：

```
virtual void addValue(FieldIdentityCPtr & identity, ValueType::Type type, const int64 value) = 0;
virtual void addValue(FieldIdentityCPtr & identity, ValueType::Type type, const uint64 value) = 0;
virtual void addValue(FieldIdentityCPtr & identity, ValueType::Type type, const int32 value) = 0;
etc. 
```

结果 95% 的结果是垃圾，只有 5% 是我正在寻找的东西。

是否可以找到某种方法的**用法？**如果无法使用，`VisualAssistX`那么您可以推荐另一个插件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:34:05.837

将函数重命名为`addValueXXXX`并重新编译。

编译器将向您展示该函数的所有用法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T18:04:21.877

JetBrains 非常擅长这些东西，他们的 IDE 是很棒的代码编辑器，具有强大的功能。

他们没有 C# IDE，但他们有一个名为 Resharper 的 Visual Studio 插件，它提供了完整的查找使用功能，并克服了 VS 代码编辑器的其他缺点。

[https://www.jetbrains.com/resharper/](https://www.jetbrains.com/resharper/)

安装后，查找用法功能将在右键单击上下文菜单中。**

# ios - 有没有在drawRect:之后直接调用的方法？

> ID：16128801
> 
> 赞同：1
> 
> 时间：2013-04-21T07:09:51.020
> 
> 标签：ios, objective-c, animation, uiimageview, drawrect

我有两个 UIView 子类，比如“A 类”和“B 类”。A 类在其初始化程序中具有代码`[self addSubview:instanceOfClassB];`。在 B 类中`drawRect:`是代码行`[self addSubview:imageViewInstance];`。同样在 B 类中`drawRect:`，我将值分配给该 imageView 实例的`animationImages`、`animationDuration`和`animationRepeatCount`属性。但是，我也调用`startAnimating`了这个 UIImageView 实例，但它总是使应用程序崩溃。然后，我尝试从B 类的超视图 A 类调用`startAnimating`该 UIImageView 实例。但是，它仍然因错误而崩溃：`drawRect:`

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“ *** -[__NSArrayM insertObject:atIndex:]: object cannot be nil”

并且在代码行上有“线程 1：信号 SIGABRT”消息`[imageView startAnimating];`。

我怀疑它在这里崩溃是因为`drawRect`B 类在 A 类之后被调用`drawRect`，所以当我告诉图像视图开始制作动画时它会崩溃，因为图像视图尚未创建。所以基本上我要问的是我**可以用什么方法告诉图像视图开始动画而不会崩溃**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T07:28:20.130

从内部修改状态或调用与绘图无关的方法`drawRect:`听起来是个非常糟糕的主意 -`drawRect:`除了绘图之外，您不应该做任何事情。

`drawRect:`每当视图或视图的一部分需要重新绘制时，都会自动调用。重绘操作的​​频率和顺序由系统决定，并取决于几个方面（视图层次结构、遮挡等） - 因此您也不能依赖于`drawRect:`调用的特定顺序。

您可以将对象的设置从绘图代码中移出，并根据用户交互启动动画。

# java - 当我尝试替换标准 TreeView 时出现异常

> ID：16128802
> 
> 赞同：0
> 
> 时间：2013-04-21T07:09:59.863
> 
> 标签：java, treeview, javafx

当我尝试用我的扩展版本替换标准 TreeView 时，我遇到了这个异常，以简化我创建一个简单项目的事情。当然有一个简单的解决方案。

例外：

```
Can not set testtreeviewwithitems.MyTestTree field testtreeviewwithitems.Sample.treeView to javafx.scene.control.TreeView
/C:/Users/Vlad/Documents/NetBeansProjects/TestTreeViewWithITems/build/classes/testtreeviewwithitems/Sample.fxml:10
  at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:164)
  at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:168)
  at sun.reflect.UnsafeObjectFieldAccessorImpl.set(UnsafeObjectFieldAccessorImpl.java:81)
  at java.lang.reflect.Field.set(Field.java:680)
  at javafx.fxml.FXMLLoader$ValueElement.processValue(FXMLLoader.java:659)
  at javafx.fxml.FXMLLoader$ValueElement.processStartElement(FXMLLoader.java:572)
  at javafx.fxml.FXMLLoader.processStartElement(FXMLLoader.java:2314)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2131)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2028)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2742)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2721)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2707)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2694)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2683)
  at testtreeviewwithitems.TestTreeViewWithITems.start(TestTreeViewWithITems.java:25)
  at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:319)
  at com.sun.javafx.application.PlatformImpl$5.run(PlatformImpl.java:206)
  at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:173)
  at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
  at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
  at com.sun.glass.ui.win.WinApplication$2$1.run(WinApplication.java:67)
  at java.lang.Thread.run(Thread.java:722) 
```

示例.java：

```
package testtreeviewwithitems;

import java.net.URL;
import java.util.ResourceBundle;
import javafx.fxml.FXML;
import javafx.fxml.Initializable;

public class Sample implements Initializable {

 @FXML
 private MyTestTree taskTreeView = new MyTestTree();

 @Override
 public void initialize(URL url, ResourceBundle rb) {
 } 

} 
```

测试树视图.java：

```
package testtreeviewwithitems;

import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.stage.Stage;

public class TestTreeView extends Application {

    public static void main(String[] args) {
    Application.launch(TestTreeView.class, args);
    }

    @Override
    public void start(Stage stage) throws Exception {
        Parent root = FXMLLoader.load(getClass().getResource("Sample.fxml"));

        stage.setScene(new Scene(root));
        stage.show();
    }
} 
```

MyTestTree.java：

```
package testtreeviewwithitems;

import javafx.scene.control.TreeView;

public class MyTestTree extends TreeView {

} 
```

示例.fxml：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<AnchorPane id="AnchorPane" prefHeight="200.0" prefWidth="320.0" xmlns:fx="http://javafx.com/fxml"     fx:controller="testtreeviewwithitems.Sample">
  <children>
    <TreeView fx:id="treeView" editable="true" focusTraversable="false" layoutY="0" prefHeight="50.0" prefWidth="100.0" showRoot="false" />

  </children>
</AnchorPane> 
```

Java版本：

```
java version "1.7.0_11"
Java(TM) SE Runtime Environment (build 1.7.0_11-b21)
Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode) 
```

更新：看来我找到了解决方案，我稍后会发布答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:04:51.690

[首先，我使用 fxml 创建了自定义控件](http://docs.oracle.com/javafx/2/fxml_get_started/custom_control.htm)，然后将其包含在主 fxml 文件中，如下所示：`<fx:include fx:id="treeView" source="MyTreeView.fxml"/>`

# c++ - 在同一个 VBO OpenGL 上绘制具有不同纹理的不同对象

> ID：16128803
> 
> 赞同：3
> 
> 时间：2013-04-21T07:10:18.313
> 
> 标签：c++, opengl, textures, draw, vbo

我正在使用 OpenGL 并在我的程序中绘制各种几何形状（正方形、三角形等），每个对象具有不同的纹理。

我测试了使用 VBO 和着色器执行渲染，这很好地为每个对象创建了一个 VBO。当大量对象（150 到 200 之间）时会出现问题......这意味着对函数的调用非常多`glDrawElements()`：

```
glDrawElements (GL_TRIANGLES, 6, GL_UNSIGNED_INT, 0); 
```

我发现最好的方法是创建一个包含所有要绘制的顶点（顶点、纹理坐标、索引等）的单个 VBO。

这样做的问题是我不能为每个对象使用不同的纹理，因为 VBO 绘制所有几何图形一次。

问题是.. 执行我需要的最佳方式（最佳方式）是什么？不使用已被弃用为`glBegin ()`/`glEnd ()`或的函数或方法`glDrawArrays ()`（我正在使用 open GL 3.0 及更高版本）。

PD：我使用 OpenGL 和 C++。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-17T19:54:38.680

如果你想先用一个纹理渲染一个 VBO，然后再用另一个：

1.  绑定第一个纹理
2.  渲染 VBO
3.  绑定第二个纹理
4.  再次渲染 VBO

如果你想用一种纹理绘制 VBO 的一部分，用另一种纹理绘制一部分，你有几个选择：

*   将您的 VBO 拆分为两个独立的 VBO 并分别渲染它们，
*   将两个纹理合并为一个更大的纹理，并相应地调整纹理坐标，或
*   **使用阵列纹理并在着色器中选择正确的图层**。如果您的目标硬件支持，这可能是您的最佳选择。为了获得更大的灵活性，请考虑*稀疏*纹理数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-17T19:27:32.160

**使用平铺纹理**

在一个纹理图像中的含义您有更多对象的纹理。有时它也被称为**纹理图集**。所以相应地改变纹理坐标。

如果在单个图像中使用 4x4 纹理，则单个**VBO**中可以有 16 个不同的对象。当然，您会受到您想要使用的纹理图像的最大尺寸和纹理质量的限制。

**3D 纹理和纹理数组**

随着 gfx HW 的发展，现在也可以使用 3D 纹理和纹理数组，因此您现在可以为每个对象拥有一片纹理……无需在纹理之间切换……

# opengl - 具有不同转换的批量绘图对象的最佳实践是什么？

> ID：16128808
> 
> 赞同：18
> 
> 时间：2013-04-21T07:10:56.640
> 
> 标签：opengl, graphics, 3d, opengl-es-2.0

我正在构思一种在 OpenGL 中通过一次绘制调用渲染尽可能多的不连贯几何体的好方法，而当每一块都具有不同的平移和旋转时，我所面对的墙是最好的方法，因为您没有在单个对象绘制之间更新模型视图制服的奢侈。我在这里和其他地方读过其他一些问题，似乎人们所指出的方向是多种多样的。最好列出执行此操作的主要方法并尝试隔离最常见或推荐的方法。以下是我考虑过的想法：

[编辑：删除了对实例化的提及，因为它在这里并不真正适用]

1.  在着色器中创建矩阵变换。在这里，我将发送一个平移向量或者一个旋转角度或四元数作为属性的一部分。优点是它可以跨平台工作，包括移动设备。但是为对象中的每个顶点发送完全相同的转换数据作为属性似乎有点浪费。如果没有实例化，我必须在 VBO 中多次重复这些相同的向量或标量，作为交错数组的一部分，对吗？另一个缺点是我依靠着色器来做数学运算。我不知道这是否明智。

2.  与 1) 类似，但不是依靠着色器进行矩阵计算，而是在客户端进行这些计算，但仍将最终模型视图矩阵作为 VBO 中的 16 个浮点流发送。但据我所知，如果没有实例化，我必须为 VBO 中的每个顶点重复这个相同的流，对吗？只是看起来很浪费。与上面 2) 的权衡是，我在每个顶点的 VBO 中发送了更多数据（16 个浮点数而不是 3 个浮点数向量用于平移，可能是 4 个浮点数四元数），但需要着色器做更少的工作。

3.  跳过所有上述限制，而是通过为每个对象单独绘制调用来妥协。这是我正在阅读的书中通常“教授”的内容，毫无疑问是为了简单起见。

除了这些还有其他常用的方法吗？

作为一个学术问题，我很好奇以上所有内容是否可行且“可以接受”，或者其中一个是否明显胜过其他？如果我要专门使用桌面 GL，实例化是实现这一目标的主要方式吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-27T04:10:48.470

两个考虑：

> 一般来说，如果你有多个对象，每个对象都使用独立的变换，你会使用多个绘制调用。这就是他们的目的。旧的 NVIDIA“Batch Batch Batch”演示文稿引用了 1GHz GPU 的每帧 10,000 到 40,000 个绘制调用（在 D3D 中。在 GL 中更多）。如今，您所关注的远不止这些。因此，除非您要处理数以万计的单个对象，而且它们都是不同的（因此没有实例化），否则您会没事的可能性很大。

另一个想法：

> 将模型视图矩阵计算完全从着色器中取出，并在乘法后传递顶点。这允许对许多不同方向和平移的对象进行一次绘制调用。成本仅来自所有 CPU 计算，但我想如果该瓶颈没有多个绘制调用的瓶颈那么大，那将是值得的。

（取自[这里](http://www.opengl.org/discussion_boards/showthread.php/181519-What-is-best-practice-for-batch-drawing-objects-with-different-transformations?p=1250196#post1250196)。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-29T01:53:51.590

这是另一种想法：

给每个顶点一个通过属性传入的对象 ID。然后在顶点着色器中，使用此 ID 在存储变换矩阵的纹理中进行查找。

# django - 部署到 Heroku 时出错

> ID：16128809
> 
> 赞同：0
> 
> 时间：2013-04-21T07:11:01.060
> 
> 标签：django, heroku, django-wsgi

我在 Heroku 上部署了一个 Django 项目。该项目在我的本地服务器上运行。但是部署后我看到以下错误：“内部服务器错误”

Heroku的日志堆栈如下：

```
 2013-04-20T23:40:14.546579+00:00 heroku[web.1]: Idling
2013-04-20T23:40:17.581159+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2013-04-20T23:40:18.345471+00:00 app[web.1]: 2013-04-20 18:40:18 [7] [INFO] Worker exiting (pid: 7)
2013-04-20T23:40:18.346329+00:00 app[web.1]: 2013-04-20 23:40:18 [2] [INFO] Handling signal: term
2013-04-20T23:40:18.477876+00:00 app[web.1]: 2013-04-20 23:40:18 [2] [INFO] Shutting down: Master
2013-04-20T23:40:19.736712+00:00 heroku[web.1]: Process exited with status 0
2013-04-20T23:40:19.745601+00:00 heroku[web.1]: State changed from up to down
2013-04-21T06:01:40.398237+00:00 heroku[web.1]: State changed from down to starting
2013-04-21T06:01:40.395347+00:00 heroku[web.1]: Unidling
2013-04-21T06:01:44.127852+00:00 heroku[web.1]: Starting process with command `gunicorn dreamport.wsgi`
2013-04-21T06:01:44.947306+00:00 app[web.1]: 2013-04-21 06:01:44 [2] [INFO] Listening at: http://0.0.0.0:16642 (2)
2013-04-21T06:01:44.947410+00:00 app[web.1]: 2013-04-21 06:01:44 [2] [INFO] Using worker: sync
2013-04-21T06:01:44.946487+00:00 app[web.1]: 2013-04-21 06:01:44 [2] [INFO] Starting gunicorn 0.17.2
2013-04-21T06:01:44.951885+00:00 app[web.1]: 2013-04-21 06:01:44 [7] [INFO] Booting worker with pid: 7
2013-04-21T06:01:45.319576+00:00 heroku[web.1]: State changed from starting to up
2013-04-21T06:01:46.272244+00:00 app[web.1]:     self.load_middleware()
2013-04-21T06:01:46.272244+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/workers/sync.py", line 125, in handle_request
2013-04-21T06:01:46.272244+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/core/handlers/base.py", line 53, in load_middleware
2013-04-21T06:01:46.272244+00:00 app[web.1]: 2013-04-21 01:01:46 [7] [ERROR] Error handling request
2013-04-21T06:01:46.272244+00:00 app[web.1]:     raise exceptions.ImproperlyConfigured('Error importing middleware %s: "%s"' % (mw_module, e))
2013-04-21T06:01:46.272244+00:00 app[web.1]: Traceback (most recent call last):
2013-04-21T06:01:46.272244+00:00 app[web.1]: ImproperlyConfigured: Error importing middleware django.contrib.auth.middleware: "No module named psycopg2.extensions"
2013-04-21T06:01:46.272244+00:00 app[web.1]:     respiter = self.wsgi(environ, resp.start_response)
2013-04-21T06:01:46.272244+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 236, in __call__
2013-04-21T06:01:46.276829+00:00 heroku[router]: at=info method=GET path=/crawl/ host=whispering-sierra-7921.herokuapp.com fwd="1.22.41.124" dyno=web.1 connect=1ms service=33ms status=500 bytes=135
2013-04-21T06:01:46.454282+00:00 heroku[router]: at=info method=GET path=/crawl/ host=whispering-sierra-7921.herokuapp.com fwd="1.22.41.124" dyno=web.1 connect=1ms service=7ms status=500 bytes=135
2013-04-21T06:01:46.453789+00:00 app[web.1]: ImproperlyConfigured: Error importing middleware django.contrib.auth.middleware: "cannot import name utils"
2013-04-21T06:01:46.453789+00:00 app[web.1]: 2013-04-21 01:01:46 [7] [ERROR] Error handling request
2013-04-21T06:01:46.453789+00:00 app[web.1]: Traceback (most recent call last):
2013-04-21T06:01:46.453789+00:00 app[web.1]:     raise exceptions.ImproperlyConfigured('Error importing middleware %s: "%s"' % (mw_module, e))
2013-04-21T06:01:46.453789+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/core/handlers/base.py", line 53, in load_middleware
2013-04-21T06:01:46.453789+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/workers/sync.py", line 125, in handle_request
2013-04-21T06:01:46.453789+00:00 app[web.1]:     respiter = self.wsgi(environ, resp.start_response)
2013-04-21T06:01:46.453789+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 236, in __call__
2013-04-21T06:01:46.453789+00:00 app[web.1]:     self.load_middleware()
2013-04-21T06:01:46.919825+00:00 app[web.1]:     self.load_middleware()
2013-04-21T06:01:46.919825+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/workers/sync.py", line 125, in handle_request
2013-04-21T06:01:46.919825+00:00 app[web.1]: 2013-04-21 01:01:46 [7] [ERROR] Error handling request
2013-04-21T06:01:46.919825+00:00 app[web.1]: Traceback (most recent call last):
2013-04-21T06:01:46.919825+00:00 app[web.1]:     respiter = self.wsgi(environ, resp.start_response)
2013-04-21T06:01:46.919825+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 236, in __call__
2013-04-21T06:01:46.919825+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/core/handlers/base.py", line 53, in load_middleware
2013-04-21T06:01:46.919825+00:00 app[web.1]:     raise exceptions.ImproperlyConfigured('Error importing middleware %s: "%s"' % (mw_module, e))
2013-04-21T06:01:46.919825+00:00 app[web.1]: ImproperlyConfigured: Error importing middleware django.contrib.auth.middleware: "cannot import name utils"
2013-04-21T06:01:46.922735+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=whispering-sierra-7921.herokuapp.com fwd="1.22.41.124" dyno=web.1 connect=2ms service=7ms status=500 bytes=135
2013-04-21T06:01:47.159726+00:00 app[web.1]:     raise exceptions.ImproperlyConfigured('Error importing middleware %s: "%s"' % (mw_module, e))
2013-04-21T06:01:47.159726+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/workers/sync.py", line 125, in handle_request
2013-04-21T06:01:47.159726+00:00 app[web.1]:     self.load_middleware()
2013-04-21T06:01:47.159726+00:00 app[web.1]: ImproperlyConfigured: Error importing middleware django.contrib.auth.middleware: "cannot import name utils"
2013-04-21T06:01:47.159726+00:00 app[web.1]: 2013-04-21 01:01:47 [7] [ERROR] Error handling request
2013-04-21T06:01:47.159726+00:00 app[web.1]:     respiter = self.wsgi(environ, resp.start_response)
2013-04-21T06:01:47.159726+00:00 app[web.1]: Traceback (most recent call last):
2013-04-21T06:01:47.159726+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 236, in __call__
2013-04-21T06:01:47.159726+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/core/handlers/base.py", line 53, in load_middleware
2013-04-21T06:01:47.163309+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=whispering-sierra-7921.herokuapp.com fwd="1.22.41.124" dyno=web.1 connect=1ms service=7ms status=500 bytes=135
2013-04-21T06:11:38.726802+00:00 app[web.1]:     raise exceptions.ImproperlyConfigured('Error importing middleware %s: "%s"' % (mw_module, e))
2013-04-21T06:11:38.726802+00:00 app[web.1]: Traceback (most recent call last):
2013-04-21T06:11:38.726802+00:00 app[web.1]:     respiter = self.wsgi(environ, resp.start_response)
2013-04-21T06:11:38.726802+00:00 app[web.1]: ImproperlyConfigured: Error importing middleware django.contrib.auth.middleware: "cannot import name utils"
2013-04-21T06:11:38.726802+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 236, in __call__
2013-04-21T06:11:38.726802+00:00 app[web.1]: 2013-04-21 01:11:38 [7] [ERROR] Error handling request
2013-04-21T06:11:38.726802+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/workers/sync.py", line 125, in handle_request
2013-04-21T06:11:38.726802+00:00 app[web.1]:     self.load_middleware()
2013-04-21T06:11:38.726802+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/core/handlers/base.py", line 53, in load_middleware
2013-04-21T06:11:38.729075+00:00 heroku[router]: at=info method=GET path=/ host=dreamport.herokuapp.com fwd="1.22.41.124" dyno=web.1 connect=0ms service=5ms status=500 bytes=135
2013-04-21T06:11:39.020870+00:00 app[web.1]:     respiter = self.wsgi(environ, resp.start_response)
2013-04-21T06:11:39.020870+00:00 app[web.1]:     self.load_middleware()
2013-04-21T06:11:39.020870+00:00 app[web.1]: ImproperlyConfigured: Error importing middleware django.contrib.auth.middleware: "cannot import name utils"
2013-04-21T06:11:39.020870+00:00 app[web.1]: 2013-04-21 01:11:39 [7] [ERROR] Error handling request
2013-04-21T06:11:39.020870+00:00 app[web.1]: Traceback (most recent call last):
2013-04-21T06:11:39.020870+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/core/handlers/base.py", line 53, in load_middleware
2013-04-21T06:11:39.020870+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/workers/sync.py", line 125, in handle_request
2013-04-21T06:11:39.020870+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 236, in __call__
2013-04-21T06:11:39.020870+00:00 app[web.1]:     raise exceptions.ImproperlyConfigured('Error importing middleware %s: "%s"' % (mw_module, e))
2013-04-21T06:11:39.243692+00:00 app[web.1]:     respiter = self.wsgi(environ, resp.start_response)
2013-04-21T06:11:39.243692+00:00 app[web.1]: 2013-04-21 01:11:39 [7] [ERROR] Error handling request
2013-04-21T06:11:39.243692+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 236, in __call__
2013-04-21T06:11:39.243692+00:00 app[web.1]: Traceback (most recent call last):
2013-04-21T06:11:39.243692+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/workers/sync.py", line 125, in handle_request
2013-04-21T06:11:39.246133+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=dreamport.herokuapp.com fwd="1.22.41.124" dyno=web.1 connect=0ms service=6ms status=500 bytes=135
2013-04-21T06:11:39.243692+00:00 app[web.1]:     self.load_middleware()
2013-04-21T06:11:39.243692+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/core/handlers/base.py", line 53, in load_middleware
2013-04-21T06:11:39.243692+00:00 app[web.1]:     raise exceptions.ImproperlyConfigured('Error importing middleware %s: "%s"' % (mw_module, e))
2013-04-21T06:11:39.243692+00:00 app[web.1]: ImproperlyConfigured: Error importing middleware django.contrib.auth.middleware: "cannot import name utils"
2013-04-21T06:12:04.120575+00:00 app[web.1]: 2013-04-21 01:12:04 [7] [ERROR] Error handling request
2013-04-21T06:12:04.120575+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/core/handlers/base.py", line 53, in load_middleware
2013-04-21T06:12:04.120575+00:00 app[web.1]:     respiter = self.wsgi(environ, resp.start_response)
2013-04-21T06:12:04.120575+00:00 app[web.1]: Traceback (most recent call last):
2013-04-21T06:12:04.120575+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/workers/sync.py", line 125, in handle_request
2013-04-21T06:12:04.120575+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 236, in __call__
2013-04-21T06:12:04.120575+00:00 app[web.1]:     self.load_middleware()
2013-04-21T06:12:04.120575+00:00 app[web.1]: ImproperlyConfigured: Error importing middleware django.contrib.auth.middleware: "cannot import name utils"
2013-04-21T06:12:04.120575+00:00 app[web.1]:     raise exceptions.ImproperlyConfigured('Error importing middleware %s: "%s"' % (mw_module, e))
2013-04-21T06:12:04.123292+00:00 heroku[router]: at=info method=GET path=/ host=dreamport.herokuapp.com fwd="1.22.41.124" dyno=web.1 connect=2ms service=11ms status=500 bytes=135
2013-04-21T07:14:21.517338+00:00 heroku[web.1]: Idling
2013-04-21T07:14:25.228488+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2013-04-21T07:14:26.207781+00:00 app[web.1]: 2013-04-21 02:14:26 [7] [INFO] Worker exiting (pid: 7)
2013-04-21T07:14:26.207991+00:00 app[web.1]: 2013-04-21 07:14:26 [2] [INFO] Handling signal: term
2013-04-21T07:14:26.340352+00:00 app[web.1]: 2013-04-21 07:14:26 [2] [INFO] Shutting down: Master
2013-04-21T07:14:27.603296+00:00 heroku[web.1]: Process exited with status 0
2013-04-21T07:14:27.615792+00:00 heroku[web.1]: State changed from up to down 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T07:50:19.680

似乎没有为您的实例正确配置 postgresql `"No module named psycopg2.extensions"`：. 阅读Heroku 开发中心上的[这篇优秀文章，其中详细介绍了如何为您的实例启用 postgresql。](https://devcenter.heroku.com/articles/heroku-postgresql)它甚至包括 django 的特定步骤。

# python - Enthought Python Distribution 中的 Ipython 自动完成功能

> ID：16128815
> 
> 赞同：1
> 
> 时间：2013-04-21T07:12:03.437
> 
> 标签：python, python-2.7, autocomplete, ipython

我已经在我的 64 位 Windows 机器上安装了 Enthought Python Distribution（学术许可证）。由于我使用的是学术许可证，因此安装的是完整的 EPD 包（专业版）。尽管所有的包和功能（至少我尝试过的）都运行良好，但我在 Ipython 中遇到了自动完成的问题。按下自动完成的选项即将到来，但再次按下时，它不会突出显示选项。由于没有突出显示，因此也无法选择选项。

我已经阅读了 stackoverflow 中的其他类似问题。解决方案似乎是：安装 pyreadline。尽管我已经完成了 Ipython 自动完成功能，但仍然没有为我提供按 .

**更新：**我刚刚检查了 Enthought 网站。他们推出了一个名为 Canopy 的更新版本。但是，我现在不想升级到 Canopy，因为我有一些项目正在进行中，我现在不想冒险破坏事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:42:06.213

1.  确保您已使用 enpkg 更新 ipython，如下所述： https: [//support.enthought.com/entries/22415022](https://support.enthought.com/entries/22415022)

2.  EPD 已经带有 pyreadline。如果单独安装 pyreadline 会有所帮助，我会感到惊讶。

3.  你期待什么亮点？我可能误解了你，但 IPython 终端的自动完成是终端风格的（按 Tab，查看你的选项，输入更多字符，再次按 Tab，等等）。突出显示不是此过程所固有的。

4.  您可以按照此处所述并行运行 EPD 和 Canopy：https: [//support.enthought.com/entries/23614903](https://support.enthought.com/entries/23614903)

# html - Wordpress 网站源代码显示大量反斜杠

> ID：16128816
> 
> 赞同：3
> 
> 时间：2013-04-21T07:12:09.390
> 
> 标签：html, wordpress

我在查看这个网站[http://perfoto.com](http://perfoto.com)的源代码时注意到 HTML 包含超过 1MB 的数据，其中大部分是`\`隐藏在`<script>`标签中的反斜杠字符 ( )。

我的问题是 - 反斜杠的目的是什么？它是某种黑客或只是无关的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T07:16:14.823

该站点上的代码已损坏。如果您仔细查看代码，这些斜杠周围的 jQuery 函数并不完整并且不会运行。

简单的回答，没有目的。

这是删除斜杠的代码：

```
(function() {
    var ga = document.createElement('script'); 
    ga.type = 'text/javascript'; 
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script%5
<script type='text/javascript' src='http://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201316'></script> 
```

# android - Android 软件堆栈的哪一部分通过耳机插孔处理命令？（例如使用耳机接听电话）

> ID：16128817
> 
> 赞同：13
> 
> 时间：2013-04-21T07:12:09.347
> 
> 标签：android

Android 在哪里处理通过耳机插孔连接的耳机发送的命令？具体来说，播放/暂停和接听电话？这是隐藏在操作系统中还是可以通过 API 访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:29:49.193

这实际上与任何 android 特性或功能无关，它只是与硬件相关，3.5 没有有限且明确定义的连接数量，您可以使用单声道、立体声、3 通道或甚至其他配置。

据我所知，这种硬件（插孔插槽）甚至没有在获得谷歌商业版 Android 的要求列表中命名，所以你甚至无法描绘出一套基于 android 版本的清晰设备你的目标。

# winapi - 汇编 - 放入缓冲寄存器值

> ID：16128823
> 
> 赞同：0
> 
> 时间：2013-04-21T07:13:03.257
> 
> 标签：winapi, assembly, x86, masm32

我的`eax`寄存器具有以下值

`EAX DDCCBEE6`

我想将 的值放入`eax`缓冲区，以便可以将其用作它，我的意思是如果我使用`SetDlgItemText`它必须将编辑控件的文本值设置为`eax`值，即`DDCCBEE6`

的值`eax`是数学指令的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:40:04.217

您可以`wsprintf`为此目的使用：

```
.data
format  db "%X",0

.data?
buffer  db 256 dup (?)

.code
invoke wsprintfA,ADDR buffer,ADDR format,eax 
```

请注意，有更安全的替代方法`wsprintf`，但我不知道是否可以在 masm32 包含文件和导入库中找到它们。

# .net - 在 .NET 2.0 中从 asmx 下载大文件

> ID：16128825
> 
> 赞同：0
> 
> 时间：2013-04-21T07:13:57.353
> 
> 标签：.net, wcf, web-services, .net-2.0, asmx

我们有一个用**.NET 2.0**编写的客户端（并且无法更改）。此客户端与用 .NET 4.0 编写的 Web 服务（没有 WCF，只是纯 asmx）进行通信。现在我们需要从 Web 服务中下载相当大的文件（ **200 MB ）。**可以有大约。1000个客户端同时连接并下载。ws 方法的当前实现**非常幼稚**。整个文件（顺便说一下 si XML）作为字符串在内存中读取并**返回字符串**。

[稍微好一点的方法是按照这里](http://www.codeproject.com/Articles/13339/File-Download-using-Web-Service)的建议将其读取为**字节数组**：但我认为这仍然是错误的方法。大文件将仍在内存中（乘以 base64 等）

最好的方法是使用**流**。我知道 WCF 能够流式传输（例如[这里](http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP?msg=4187161#xx4187161xx)），但 WCF 对我们来说可能是不可能的，因为客户端（.NET 2,0）必须以某种方式使用 .NET 3.0 的功能（通过使用它的程序集来自 WCF），这可能很讨厌。

还有另一种可能性，如何确保服务器能够处理如此大文件的大量下载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:05:10.323

好的，也许这些帖子会有帮助（我没有测试它们，但看起来很有帮助）：

[.NET 2.0 中的 Web 服务和大型内容](http://blogs.msdn.com/b/yassers/archive/2004/11/10/255212.aspx)

[如何：从 Web 服务流式传输大量数据](http://msdn.microsoft.com/en-us/library/aa528818.aspx)

# javascript - 更改javascript数组中元素的文本

> ID：16128828
> 
> 赞同：2
> 
> 时间：2013-04-21T07:14:40.987
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T07:22:06.933

你没有一个锚元素数组，你有一个字符串数组。而且你有一个很大的语法错误，因为你试图在双引号字符串中包含双引号而不转义它们。反正：

```
var array = ["<a href=\"#\" id=\"id1\">First anchor<a>", "<a href=\"#\" id=\"id2\">Second anchor<a>", "<a href=\"#\" id=\"id3\">Third anchor<a>"];

array[2] = array[2].replace(/^(<[^>]+>)([^<]*)(<)/,
                            "$1" + "yourreplacementtexthere" + "$3"); 
```

演示：http: [//jsfiddle.net/byQcW/](http://jsfiddle.net/byQcW/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T07:20:50.317

数组中与 using 相关的语法问题很少，`'`并且`"`结束标记 for`a`是错误的

```
array = ['<a href="#" id="id1">First anchor</a>', '<a href="#" id="id2">Second anchor</a>', '<a href="#" id="id3">Third anchor</a>'];
array[2] = array[2].replace(/(<a[^>]*?>)(.*)(<\/a>)/, '$1' + 'replacerstring' + '$3'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T07:24:51.323

尝试这个：

```
var arr = ['<a href="#" id="id1">First anchor<a>', '<a href="#" id="id2">Second anchor<a>', '<a href="#" id="id3">Third anchor<a>']  
arr[2] = $(arr[2]).text('Your text here').prop('outerHTML'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T09:22:14.947

如果你想要一个锚标签数组，那么 jQuery 的`map`方法会让这个变得微不足道：

```
var strings = ["<a href='#' id='id1'>First anchor</a>", "<a href='#' id='id2'>Second anchor</a>", "<a href='#' id='id3'>Third anchor</a>"];

var anchor_elements = $.map(strings, function(el){
  return $(el).get();
}); 
```

您现在可以使用 jQuery 轻松更改任何元素的文本：

```
$(anchor_elements[2]).text('New text'); 
```

# c# - EntityCollection 已经被初始化

> ID：16128829
> 
> 赞同：2
> 
> 时间：2013-04-21T07:14:45.503
> 
> 标签：c#, asp.net-mvc, database, entity-framework

我正在尝试更新现有实体

```
private void UpdateEfItem(MamConfiguration_V1 itemFromDb, MamConfiguration_V1 item)
{
    itemFromDb.UpdatedDate = DateTime.Now;
    itemFromDb.Description = item.Description;

   //references
   itemFromDb.MamConfigurationToBrowser_V1 = item.MamConfigurationToBrowser_V1;
   itemFromDb.MamConfigurationToGroups_V1 = item.MamConfigurationToGroups_V1;
} 
```

将 Ui-Item 分配给 Ef-item 时出现以下错误：

```
itemFromDb.MamConfigurationToBrowser_V1 = item.MamConfigurationToBrowser_V1; 
```

> `EntityCollection`已经初始化。`InitializeRelatedCollection`仅应`EntityCollection`在对象图的反序列化期间调用该 方法来初始化一个新方法。

**更新：**

我试过@Gert的方式：

```
 private void UpdateEfItem(MamConfiguration_V1 itemFromDb, MamConfiguration_V1 item)
    {
        itemFromDb.UpdatedDate = DateTime.Now;

        itemFromDb.Description = item.Description;

        itemFromDb.StatusId = item.StatusId;

        itemFromDb.Name = item.Name;

        itemFromDb.NumericTraffic = item.NumericTraffic;

        itemFromDb.PercentageTraffic = item.PercentageTraffic;

        itemFromDb.Type = item.NumericTraffic;

        itemFromDb.MamConfigurationToBrowser_V1.Clear();

        for (int i = 0; i < item.MamConfigurationToBrowser_V1.Count; i++)
        {
            var elementToAdd = item.MamConfigurationToBrowser_V1.ElementAt(i);

            elementToAdd.Browser = mMaMDBEntities.Browsers.Single(browserItem => browserItem.BrowserID == elementToAdd.BrowserID);

            elementToAdd.MamConfiguration_V1 = itemFromDb;

            itemFromDb.MamConfigurationToBrowser_V1.Add(elementToAdd);
        } 
```

并得到以下错误：

仅在添加`clear`and`add`命令时

操作失败：无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:15:35.543

尝试：

```
itemFromDb.MamConfigurationToBrowser_V1.Clear();

foreach (var item in item.MamConfigurationToBrowser_V1)
{
     itemFromDb.MamConfigurationToBrowser_V1.Add(item);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-14T05:59:02.043

可能发生的情况是 SignalData 在循环期间间接更改了订阅者字典并导致该消息。您可以通过更改来验证这一点

尝试这个

```
 itemFromDb.MamConfigurationToBrowser_V1.Clear();

 foreach (var item in item.MamConfigurationToBrowser_V1.ToList()) //.ToList()
 {
    itemFromDb.MamConfigurationToBrowser_V1.Add(item);
 } 
```

# php - 表中的行数等于结果的平方

> ID：16128830
> 
> 赞同：-2
> 
> 时间：2013-04-21T07:14:58.500
> 
> 标签：php, mysql

我需要一些关于在 PHP 中创建表的帮助。在我的代码中，我的表格打印了太多次。出于某种原因，代码的输出是任何结果数的计数为 ^2。所以，如果我在实际数据库中有 4 个结果，那么输出中有 16 个结果。我想在论坛发帖之前做更多的研究，但我是 php 新手，不知道从哪里开始。

```
//Count the number of rows returned
$count = mysql_num_rows($result);
echo $count;
//Table header
echo "<div><table id=\"tableheader\" bgcolor=\"#4382b5\">\n";
echo "<tr>\n";
echo "<td>&nbsp;3-4 ID:</td>\n";
echo "<td>&nbsp;First Name:</td>\n";
echo "<td>&nbsp;Last Name:</td>\n";
echo "<td>&nbsp;HCA:</td>\n";
echo "<td>&nbsp;File:</td>\n";
echo "<tr>";
echo "</table></div>";
if ($count !== 0) {
            while($row = mysql_fetch_array($result)) {
                echo "<div class=\"addform\"><form method='get' action=\"update.php\">\n";
                echo "  <input type=\"text\" value=\"".$row['tfid']."\" name=\"column1\">\n";
                echo "  <input type=\"text\" name=\"column2\" value=\"".$row['fname']."\"/>\n";
                echo "  <input type=\"text\" name=\"column3\" value=\"".$row['lname']."\"/>\n";
                echo "  <input type=\"text\" name=\"column4\" value=\"".$row['hca']."\"/>\n";
                echo "  <input type=\"text\" name=\"column5\" value=\"".$row['file']."\"/>\n";
                echo "  <input type=\"image\" src=\"images/update.png\" alt=\"Update Row\" class=\"update\" title=\"Update Row\">\n";
                echo "<a href=\"delete.php?tfid=".$row['tfid']."\"><img title='Delete Row' alt=\"Delete\" class='del' src='images/delete.png'/></a></form></div>\n";

            }
        echo "</table><br />\n";
    } else {
        echo "<b><center>NO DATA</center></b>\n";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T07:43:24.887

根据您的最新评论：

```
SELECT staff.tfid, staff.lname, staff.fname, staff.hca, pic.file ". "FROM staff, pic 
```

您正在使用 2 张桌子`staff`和`pic`. 但是您没有任何加入标准。你应该有类似的东西`staff.id=pic.id`

这就是为什么你得到两个结果集的***笛卡尔积***，即平方结果集。4`staff`表乘以 4`pic`表

您的查询应该是：

```
SELECT staff.tfid, staff.lname, staff.fname, staff.hca, pic.file ". " 
FROM staff, pic
where staff.id=pic.id 
```

考虑到您`id`在这两个表之间具有相关属性。

# python - 在python中使用继承

> ID：16128833
> 
> 赞同：4
> 
> 时间：2013-04-21T07:15:44.550
> 
> 标签：python, class, inheritance

这是我的家庭作业，我之前在网站上看到过它，但看起来它没有解决，而且我收到的错误信息与之前提出该问题的人不同。

问题的第一部分是定义子类 Worker，它继承自 Employee 并包含一个属性，该属性引用另一个作为工人经理的雇员。您应该定义一个返回工人经理的方法 get_manager。

例子：

```
worker = Worker("Fred", 52000, myboss) 
```

问题的第二部分是定义继承自 Employee 的子类 Executive，并包含一个引用年度奖金的属性。

您应该覆盖工资方法以根据他/她的薪水和奖金计算高管薪酬。您应该在Executive 类的工资方法定义中使用Employee 的工资方法。

例子：

```
executive = Executive("Kerry", 520000, 1040000) 
```

我的代码写在下面，我得到的错误消息是：'global name'salary' is not defined' in line 'Employee. **init**（self，name，salary）'对于Executive类（它适用于Worker类）。为什么我会收到该错误，我该如何解决？

谢谢您的帮助！

```
class Employee(object):
    def __init__(self, name, salary):
        self._name = name
        self._salary = salary

    def my_name(self):
        return self._name

    def wage(self):
        return self._salary/26   # fortnight pay

class Worker(Employee):
    def __init__(self, name, salary, manager):
        Employee.__init__(self, name, salary)
        self._manager = manager

    def getManager(self):
        return self._manager

class Executive(Employee):
    def __init__(self, name, wage, yearlyBonus):
        Employee.__init__(self, name, salary) 
        self._yearlyBonus = yearlyBonus

    def wage(self):
        return Employee.wage(self) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T07:19:39.070

错误很明显。的方法中`salary`没有定义。`__init__``Executive`

您用作`wage`的参数`__init__`，但是`salary`在调用`__init__`父类时，您应该坚持使用一个变量名：

```
class Executive(Employee):
    def __init__(self, name, salary, yearlyBonus):
        Employee.__init__(self, name, salary) 
```

此外，您可以使用以下方法绕过每次键入所有这些参数`*args`：

```
class Executive(Employee):
    def __init__(self, *args, yearlyBonus):
        super(Executive, self).__init__(*args) 
```

使用`super()`而不是调用父类的`__init__`方法。它使多重继承更容易一些。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-21T07:19:26.343

只需查看发生错误的代码，然后继续查看，直到发现不匹配的代码：

```
def __init__(self, name, wage, yearlyBonus):
    Employee.__init__(self, name, salary) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-21T07:21:07.850

是的，您的 init 函数没有名为salary 的变量，当您将其传递给Employee 时会出错。**初始化**。

```
class Executive(Employee):
    def __init__(self, name, wage, yearlyBonus):
        Employee.__init__(self, name, salary) 
```

当你这样做时

```
executive = Executive("Kerry", 520000, 1040000) 
```

哪一项与薪水有关？将其作为员工初始化方法传递。最好用 super 调用 Employee 构造函数

从这个方法猜测

```
def wage(self):
        return self._salary/26 
```

也许这就是你想要的（虽然不知道如何计算yearlyBonus）

```
 class Executive(Employee):
        def __init__(self, name, wage, yearlyBonus):
            Employee.__init__(self, name, wage * 26) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-21T07:19:51.990

看声明`Executive.__init__`：

```
def __init__(self, name, wage, yearlyBonus): 
```

它没有在其中声明一个名为`salary`. 但是当你调用超类的构造函数时，

```
 Employee.__init__(self, name, salary) 
```

您要求 Python 传递名为`salary`第三个参数的变量的值。Python 只是抱怨这个变量不存在。

我想你可以弄清楚如何从那里修复它。:-)

# python - 一一训练scikit svm（在线或随机训练）

> ID：16128834
> 
> 赞同：6
> 
> 时间：2013-04-21T07:15:58.510
> 
> 标签：python, machine-learning, svm, scikit-learn

我正在使用 scikit 库来使用 svm。我有大量数据无法一起读取以提供[`fit()`功能](http://scikit-learn.org/stable/modules/generated/sklearn.svm.libsvm.fit.html#sklearn.svm.libsvm.fit)。
我想对文件中的所有数据进行迭代并一一训练 svm。有没有办法做到这一点。文档并不清楚，在他们的教程中，他们`fit`立即提供了完整的数据。
有没有办法一一训练它（手段可能类似于调用`fit`训练数据的每个输入模式）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-21T08:15:05.630

支持向量机（至少在 scikit-learn 封装的 libsvm 中实现）本质上是一种批处理算法：它需要一次访问内存中的所有数据。因此它们不可扩展。

相反，您应该使用支持增量学习的模型`partial_fit`。例如一些线性模型如`sklearn.linear_model.SGDClassifier`支持`partial_fit`方法。您可以对数据集进行切片并将其加载为具有 shape 的小批量序列`(batch_size, n_features)`。`batch_size`可以为 1 但效率不高，因为 Python 解释器开销（+ 数据加载开销）。因此，建议以至少 100 的 minitache 为单位引导样品。

# nfc - 关于 python nfcpy“找不到任何可用的 nfc 阅读器”

> ID：16128838
> 
> 赞同：1
> 
> 时间：2013-04-21T07:16:48.593
> 
> 标签：nfc

我是初学者。安装libUSB、Python和PyUSB包后，我的ACR122U连接电脑。然后我想实现代码如下：

```
import os
import sys
import time

sys.path.insert(1, os.path.split(sys.path[0])[0])

import nfc
import nfc.ndef

def main():
    clf = nfc.ContactlessFrontend()

    print "Please touch a tag to send a hello to the world"
    while True:
        tag = clf.poll()
        if tag and tag.ndef:
            break

    text_en = nfc.ndef.TextRecord(language="en", text="Hello World")
    text_de = nfc.ndef.TextRecord(language="de", text="Hallo Welt")
    text_fr = nfc.ndef.TextRecord(language="fr", text="Bonjour tout le monde")
    message = nfc.ndef.Message( [text_en, text_de, text_fr] )

    tag.ndef.message = str(message)

    print "Remove this tag"
    while tag.is_present:
        time.sleep(1)

    print "Now touch it again to receive a hello from the world"
    while True:
        tag = clf.poll()
        if tag and tag.ndef:
            break

    message = nfc.ndef.Message( tag.ndef.message )
    for record in message:
        if record.type == "urn:nfc:wkt:T":
            text = nfc.ndef.TextRecord( record )
            print text.language + ": " + text.text

if __name__ == '__main__':
    main() 
```

当我到达线路时

```
clf= nfc.ContactlessFrontend()" 
```

那么问题来了：

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "D:\tools\python\nfc\clf.py", line 58, in __init__
raise LookupError("couldn't find any usable nfc reader")
LookupError: couldn't find any usable nfc reader 
```

我不知道如何解决它。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T19:44:36.547

我按照“Petesh”在他的评论中说的跑了

```
python -d helloworld.py 
```

在输出中有

```
Exception usb.USBError: 'error submitting URB: Operation not permitted' 
```

使用“sudo”运行相同的命令后，它起作用了。

# javascript - 调用函数位置

> ID：16128845
> 
> 赞同：2
> 
> 时间：2013-04-21T07:18:00.717
> 
> 标签：javascript, dom

我有一段代码，其中一个特定的函数被称为：

```
this.m_panel.form.submit(data); 
```

我试图找到这个函数的实际位置，但我找不到它。如何找到函数定义的位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T07:19:46.250

`HTMLFormElement`它是(Mozilla Developer Network: [DOM >`form.submit`](https://developer.mozilla.org/en/docs/DOM/form.submit) )的内置功能

W3C[将方法定义为](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-76767676)：

> `submit`
> 
> 提交表格。它执行与提交按钮相同的操作。
> 
> **无参数**
> **无返回值**
> **无异常**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T07:20:02.387

`form.submit``HTMLFormElement`是大多数 DOM 实现中的内置函数。例如，参见[Mozilla 的文档](https://developer.mozilla.org/en-US/docs/DOM/form.submit)。

# javascript - 从父对象继承会执行其父构造函数吗？

> ID：16128847
> 
> 赞同：-1
> 
> 时间：2013-04-21T07:19:05.023
> 
> 标签：javascript

全部，在经典的继承语言中。例如Java，c#等，确实子类的新实例初始化会导致基类构造函数在子类的构造函数执行之前执行。但我不确定它在 javascript 继承中是否相同。让我们举个例子。说你有如下代码。

```
function Shape() {
    this.x = 0;
    this.y = 0;
}; 
```

如果有一个对象名`rect`继承自`Shape`. 假设的构造函数`Rectangle`看起来像这样。

```
function Rectangle(){

};
Rectangle.prototype = Object.create(Shape.prototype);
var rect= new Rectangle(); 
```

构造函数`Shape`执行时会执行构造函数`Rectangle`吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:15:13.257

这就是你通常在 JavaScript 中进行继承的方式：

```
function Shape() {
    this.x = 0;
    this.y = 0;
}

function Rectangle() {
    Shape.call(this);
}

Rectangle.prototype = Object.create(Shape.prototype); 
```

请注意，您是`Shape.call(this)`从构造函数内部调用的`Rectangle`。这就像在其他语言中调用基类/超类构造函数一样。如果不这样做，您的`Rectangle`对象将不会在构造函数中定义`x`and`y`属性。`Shape`

有关更多详细信息，请阅读以下答案：[https ://stackoverflow.com/a/15497685/783743](https://stackoverflow.com/a/15497685/783743)

# mongodb - GeoJSON 和 MongoDB：将点存储为 GeoJSON.Point 是否值得？

> ID：16128851
> 
> 赞同：17
> 
> 时间：2013-04-21T07:19:33.723
> 
> 标签：mongodb, gis, wgs84, database

随着`2.3 >`MongoDB 的引入，位置数据处理和查询变得更加有用。MongoDB 将文档存储为 BSON，因此每个文档都具有所有文档字段，这显然可能导致比我们传统的 RMDBS 更大的数据库。

我曾经将折线和多边形存储为一系列索引点，并使用一个额外的字段表示每条线的顺序（我这样做是为了确保在使用 JavaScript 时的一致性，因此点并不总是以正确的顺序存储）。是这样的：

```
polyline: {
  [
    point: [0,0],
    order: 0
  ],
  [
    point: [0,1],
    order: 1
  ]
} 
```

而现在我使用：

```
polyline: {
  type: 'LineString',
  coordinates: [
    [0,0],
    [1,0]
  ]
} 
```

我已经看到文档大小有所改进，因为一些折线可以有多达 500 个点。

但是，我想知道按原样存储所有`Point`数据有什么好处`GeoJSON`。我对文档大小的增加感到沮丧，例如：

```
loc: [1,0] 
```

比

```
loc: {
  type: 'Point',
  coordinates: [0,1]
} 
```

因此会更容易使用。

我的问题是：

**将点存储为`GeoJSON`对象而不是 2 点数组是否更好/推荐？**

我考虑过的是：

*   大小限制：我可能有数百万个带有位置的文档，这可能会影响集合的大小，并可能影响我的口袋。
*   一致性：最好处理`lng, lat`格式中的每一组坐标，而不是坚持`lat, lng`点，前者用于我的所有其他位置特征。
*   方便：如果我抓住一个点，并使用`$geoWithin`它`$geoIntersects`，我不需要先将它转换为 GeoJSON，然后再将它用作`query`参数。

我不确定的是：

*   未来是否`loc: [x,y]`会在 MongoDB 上放弃对 的支持
*   任何索引都受益`2dsphere`于`2d`
*   对 MongoDB 的任何计划`GeoJSON`添加是否可能导致需要上述一致性。

我宁愿`GeoJSON`在我的数据仍然可以管理的时候搬到那里，而不是在未来承受很大压力的情况下切换。

*请我请求一个彻底（即使是稍微）深思熟虑的答案。我不会很快选择正确的答案，所以我可以评估任何回复*。

*我也不确定 SO 是否是提出问题的正确位置，所以如果 DBA 是一个更合适的位置，我会将问题移到那里。我之所以选择 SO，是因为这里有很多与 MongoDB 相关的活动*。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-28T09:55:35.793

我建议使用新的 GeoJSON 格式。虽然我不相信有任何关于放弃对旧格式的支持的公告，但他们将其称为旧格式这一事实应该表明他们的观点。

使用 2dsphere 而不是 2d 有一些索引优势。

*   首先，它实际上基于地球是一个球体来计算查询。2d 索引的一个缺点是它没有考虑到这意味着如果您对查询所涵盖的实际区域而不是基本的纬度/经度感兴趣，则必须自己处理转换。
*   使用复合索引的能力，如果你想做一些事情，比如“首先从这个区域获取 100 个结果”，那么 2dsphere 是你唯一的选择。
*   使用 geoIntersects 查询的能力。
*   geoWithin 几何查询要求您使用 geoJSON 格式。

另一件需要注意的重要事情是，您需要确保您使用的查询受您使用的索引的支持。例如，如果您使用 2dsphere，则不能使用 $box 查询，因为它不会被索引 - 但是**mongo 不会警告您**- 结果只会执行表扫描并且会非常慢！

[Mongo 提供了哪些查询可以与哪些索引一起使用的兼容性图表](http://docs.mongodb.org/manual/reference/operator/query-geospatial/#geospatial-query-compatibility-chart)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-16T23:59:22.787

是的，我认为这是值得的。根据我对地理空间信息系统的经验，最好将您的位置数据存储在一个有用且可转移的标准中。MongoDB 中的 GeoJSON 支持[WGS84](http://docs.mongodb.org/manual/reference/glossary/#term-wgs84)数据标准。

在 MongoDB 中，[$near](http://docs.mongodb.org/manual/reference/operator/near/#op._S_near)运算符可以搜索传统的 2d 坐标和 GeoJSON 坐标。在旧的二维坐标集合上，$near 返回最接近的第一个排序集合。[$geoNear](http://docs.mongodb.org/manual/reference/command/geoNear/#dbcmd.geoNear)返回距离搜索点元数据最近的第一个排序集合。

另一个好处是能够使用其他地理空间查询*（即 $geoWithin 和 $geoIntersect），*特别是如果您存储其他 GeoJSON 类型*（折线、多边形）*

最后[，虽然 2d 索引支持使用球面距离的基本查询，但如果您的数据主要是经度和纬度，请考虑移动到 2dsphere 索引。](http://docs.mongodb.org/manual/tutorial/calculate-distances-using-spherical-geometry-with-2d-geospatial-indexes/)

我希望这些信息能给您一些关于如何处理您的位置数据的思考点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-26T23:25:04.160

如果您仅在数据库中**存储点几何图形**，但希望支持对该数据的多个不同**GeoJSON 查询**，请注意，可以以旧坐标对格式存储点**并**使用`2dsphere`索引。

mongoose 的**GeoJSON 支持 (MongoDB >= 2.4)**的[发行说明](https://github.com/LearnBoost/mongoose/wiki/3.6-Release-Notes#geojson-support-mongodb--24)给出了以下示例：

 ****`2dsphere`旧坐标对的索引：**

```
new Schema({ 
    loc: { type: [Number], index: '2dsphere'}
}); 
```

**`GeoJSON``2dsphere`使用索引查询旧坐标对：**

```
var geojsonPoly = { 
    type: 'Polygon', 
    coordinates: [[[-5,-5], ['-5',5], [5,5], [5,-5],[-5,'-5']]] 
};

Model.find({ loc: { $within: { $geometry: geojsonPoly }}}); 
```**

# python - 在应用引擎中处理大型云存储文件

> ID：16128864
> 
> 赞同：3
> 
> 时间：2013-04-21T07:20:43.943
> 
> 标签：python, google-app-engine, google-cloud-storage

我需要在 GAE 中处理高达 2GB 的大文件（我正在使用 Python）。当然，我将在后端运行代码，但是由于本地存储不可用，因此数据需要在内存中。

是否有像 boto 或其他云存储支持协议的包装器这样的文件描述符？或其他推荐的技术？

谢谢， 谢伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:32:09.987

您可能对[“Google Cloud Storage Python API 概述”](https://developers.google.com/appengine/docs/python/googlestorage/overview "谷歌云存储 Python API 概述")感兴趣。它像普通的本地文件一样工作。我已经在我的项目中使用它并且没有遇到任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T19:49:36.380

数据文件“不需要在内存中”，如果您尝试这样做，您将运行 oom. 如果您可以按顺序处理它，请将其作为文件流打开。我已经用blobstore做到了，应该是相似的

# c# - C#代码重用公共类Foo 方法参数

> ID：16128868
> 
> 赞同：0
> 
> 时间：2013-04-21T07:21:19.013
> 
> 标签：c#, types, constructor, code-reuse

我希望有人可以帮助我解决问题。我正在尝试创建一个新的类型：

```
public class Foo<T> 
```

其唯一方法的工作是遍历另一个类的属性。大约有 20 个类，定义了不同数量的属性：

```
public class Bar {
    public int Id { get; set; }
    public string Name { get; set; }
}

public class Shirt {
    public string Color { get; set; }
    public string Size { get; set; }
    public string Brand { get; set; }
}

public class Pants {
    public string Color { get; set; }
    public string Waist { get; set; }
    public string Length { get; set; }
    public string Inseam { get; set; }
} 
```

而公共类Foo的方法是：

```
public class Foo<T> {
    public string FooMethod(T before, T after /* other variables? */) {
        // compare before & after
    }
} 
```

每个名称相同的类将进入`Foo`的主要方法两次，但具有不同的属性值。所以`Bar` *之前的 Id & Name*可能是`1 & "Bar"`，而`Bar` *after 的 Id & Name*可能是`2 & "BarBar"`。

从这里开始，将执行其他操作来比较*before 和 after*中的每个属性。但是，由于每个类中的属性数量各不相同，而且我只想使用一种方法，所以我进退两难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T07:29:12.753

如果您想在 FooMethod 中比较多种类型的对象，您可以在所有类（Bar、Shirt、Pants ...）中覆盖 Equals 和 GetHashcode 方法，并在那里进行比较。这样你的 FooMethod 只会调用`before.Equals(after)`来比较它们。

# windows - 如何通过在 Windows 中使用批处理替换子字符串来重命名文件

> ID：16128869
> 
> 赞同：27
> 
> 时间：2013-04-21T07:21:33.413
> 
> 标签：windows, string, file, batch-file, rename

我想 使用 Windows 批处理文件将“how-to *- **rename** -file.jpg”*等文件名重命名为*“how-to- **reuse** - file.jpg”*

即我只想替换文件名中的一两个单词。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-21T07:40:10.387

```
@echo off

Set "Filename=how-to-rename-file.jpg"
Set "Pattern=rename"
Set "Replace=reuse"

REM Call Rename "%Filename%" "%%Filename:%Pattern%=%Replace%%%"

Call Echo %%Filename:%Pattern%=%Replace%%%
:: Result: how-to-reuse-file.jpg

Pause&Exit 
```

我给你另一个文件循环的例子：

> 更新：

我错过了语法中的一些内容，因为我上次编辑时快速输入，这里是更正的代码：

```
@echo off
Setlocal enabledelayedexpansion

Set "Pattern=rename"
Set "Replace=reuse"

For %%# in ("C:\Folder\*.jpg") Do (
    Set "File=%%~nx#"
    Ren "%%#" "!File:%Pattern%=%Replace%!"
)

Pause&Exit 
```

PS：您可以在这里阅读以了解有关子字符串的更多信息：http: [//ss64.com/nt/syntax-substring.html](http://ss64.com/nt/syntax-replace.html) [http://ss64.com/nt/syntax-replace.html](http://ss64.com/nt/syntax-substring.html)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-04-21T08:54:26.453

上面的代码没有重命名文件 - 路径有问题，源文件名不正确。

这将适用于当前文件夹中的文件 - 除了带有 ! 在名称将是一个问题。

```
@echo off
Setlocal enabledelayedexpansion

Set "Pattern=rename"
Set "Replace=reuse"

For %%a in (*.jpg) Do (
    Set "File=%%~a"
    Ren "%%a" "!File:%Pattern%=%Replace%!"
)

Pause&Exit 
```

# ocaml - OCaml 使用参数化模块

> ID：16128870
> 
> 赞同：0
> 
> 时间：2013-04-21T07:21:42.697
> 
> 标签：ocaml

在 OCaml 中，我正在处理一个模块和一个仿函数。

我为输入模块和函子设置了签名和结构。然后我使用上面的模块制作了一个新模块。原来我的新模块不包含输入模块中的函数。

我应该能够在我的新模块中使用功能吗？顺便说一句，仿函数中的函数工作正常。另外，我怎样才能确定它是否是一个有效的模块？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T09:20:10.357

让我们举一个真实的例子：

```
module type MONAD = sig
  type 'a t
  val return : 'a -> 'a t
  val (>>=) : 'a t -> ('a -> 'b t) -> 'b t
end

module MonadOps (M : MONAD) = struct
  open M (* values from M visible in scope *)
  let rec mapM f = function
    | [] -> return []
    | x::xs ->
        f x >>= fun y -> 
        mapM f xs >>= fun ys ->
        return (y :: ys)
end

module Option = struct
  type 'a t = 'a option
  let return x = Some x
  let (>>=) m f = match m with
    | None -> None
    | Some x -> f x
end

module OptionOps = MonadOps(Option)

let test = OptionOps.mapM
(* val test : ('a -> 'b Option.t) -> 'a list -> 'b list Option.t = <fun> *)
let test = OptionOps.return x
(* Error: Unbound value OptionOps.return *) 
```

functor`MonadOps`提供了一些建立在任何 monad 之上的通用特性，但它本身并不包含基本的 monad 特性。它提供了额外的东西，而不包括现有的东西。

您可以通过使用该`include`项目将现有模块的内容包含在正在定义的模块值中来更改它：

```
module MonadOps (M : MONAD) = struct
  include M (* values from m *included* in the module *)
  let rec mapM f = function
    [...]
end 
```

但是，我不一定建议这样做。您正在引入一些在某些情况下很方便的冗余（例如，如果您`open`只想一个模块并将所有内容都包含在范围内），但也可能在其他情况下产生一些问题，例如。如果你想组合两个模块扩展函子，你必须想知道以什么顺序应用它们，你可能会遇到奇怪的模块系统黑客。机器学习模块系统内部是复杂的野兽，我建议让你的使用保持简单以避免陷入困境。

请注意，通过不将 M 包含在仿函数中，您可以让仿函数的用户随时选择执行此操作：如果您决定将其直接包含在仿函数中，他们有更多选择。我使用这样一个仿函数的方式是这样的

```
(* file 'option.ml' *)
type 'a option = None | Some of 'a

module Monad = struct
  ...
end

module Ops = MonadOps(Monad)

include (Monad : MONAD with type 'a t := 'a option)
include Ops 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T20:28:43.980

`M`在更简单的设置中，任何由函子中绑定的模块导出的值`F`都可以通过使用`M.`限定符来访问（就像任何模块一样）：

```
(* out there M does not exist *)
module F (M : sig val v : int end) =
struct
    (* in there M is defined *)
    let m_v = M.v
end 
```

或`open M`在任何访问`M`.

```
module  F (M : sig val v : int end) =
struct
    open M
    let m_v = v
end 
```

如果您想`M`从 生成的模块中获取的值`F`，您必须以某种方式导出它，或者：

*   `M`直接通过为新模块中的某些值起别名，

    ```
    module F (...) = struct
        let v = M.v
    end 
    ```

*   通过包含整个模块

    ```
    module F (...) = struct
        include M
    end 
    ```

    不一定总是可能或易于使用包含，因为您可能希望定义类型名称与`M`.

*   通过使模块成为新模块的一部分

    ```
    module F (....) = struct
        module M' = M
    end

    module G = F(struct let v = 5 end);;
    print_int G.M.v;; 
    ```

包括还是不包括？它取决于函子的客户端，以及生成的模块的客户端。您可能在一个程序上工作，该程序必须只知道生成的模块，或者只知道函子。如果模块`M`内容是操作模块所必需的`G`，它是现成的，那么你必须以`M`某种方式提供。

# azure - 在本地文件夹和 Azure BlobContainer、etag、自 ect 修改后进行文件同步

> ID：16128873
> 
> 赞同：0
> 
> 时间：2013-04-21T07:22:23.303
> 
> 标签：azure

我正在将文件从本地存储同步到 Azure blob 存储。除了有关 MSDN 文档站点上的属性的默认信息之外，我找不到一些信息。

我以前使用 eTag 属性来查看文件是否已更改以同步到我的本地计算机。（我们只讨论一种方式同步）。是否有任何关于 etag 属性的文档？它是文件 MD5 哈希还是其他东西。

我看到了另一种实现，它将文件的 md5 哈希保存在本地文件的内存中，并将其存储在容器上的文件元数据中，并且想知道这是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:45:18.777

您对 Etag 使用的方法是我见过的最常见的方法。当 blob 更改时，Etag 会更改......但是 - 它不会告诉您该更改是否真的没有改变任何东西（MD5 哈希会）。

例如：

如果你上传一张图片，然后用另一张图片代替第一张。Etag 和 MD5 都不同。但是，如果您现在将该图像更改回第一个图像，则 Etag 将再次不同，但 MD5 将与您拥有的第一个图像相同。

# google-app-engine - 使用文档 api 不可靠地获取谷歌文档

> ID：16128876
> 
> 赞同：1
> 
> 时间：2013-04-21T07:23:24.133
> 
> 标签：google-app-engine, google-docs-api

我在谷歌应用引擎上有一个应用程序，在一段代码中我使用文档 API 阅读了谷歌文档。代码如下所示：

```
GoogleOAuthParameters oauthParameters = new GoogleOAuthParameters();
            oauthParameters.setOAuthConsumerKey(Constants.CONSUMER_KEY);
            oauthParameters.setOAuthConsumerSecret(Constants.CONSUMER_SECRET);
            oauthParameters.setOAuthToken(Constants.ACCESS_TOKEN);
            oauthParameters.setOAuthTokenSecret(Constants.ACCESS_TOKEN_SECRET);
            DocsService client = new DocsService("sakshum-YourAppName-v1");
            client.setOAuthCredentials(oauthParameters,
                    new OAuthHmacSha1Signer());
            URL feedUrl = new URL("https://docs.google.com/feeds/default/private/full/");
            DocumentQuery dquery = new DocumentQuery(feedUrl);
            dquery.setTitleQuery(title);
            dquery.setTitleExact(true);
            dquery.setMaxResults(10);
            DocumentListFeed resultFeed = client.getFeed(dquery,
                    DocumentListFeed.class); 
```

它失败了，但有例外：

```
vik.sakshum.sakshumweb.server.common.CommonServiceCode getGoogleDoc: Exception is :Unable to complete the HTTP request 
```

这种情况并非总是发生，但有时会发生。那么，处理这种故障情况的正确方法应该是什么？GAE api非常不可靠是一个问题吗？这是一个代码问题，我可以修复它以更好的方式或其他方式处理它？

# ios - 从 shell 脚本向 Xcode 添加可本地化的语言

> ID：16128878
> 
> 赞同：1
> 
> 时间：2013-04-21T07:23:37.443
> 
> 标签：ios, xcode, localization

我正在尝试从 shell 脚本向项目添加新的本地化字符串。
有什么方法可以添加它们，
例如当您按下项目信息中本地化下的 + 按钮时？

我试图在构建之前将文件复制到项目文件夹中。
但是 Xcode 没有检测到它们。

谢谢！

# php - 如何使用 imap_ping 在新电子邮件到达时获得通知

> ID：16128879
> 
> 赞同：3
> 
> 时间：2013-04-21T07:23:38.510
> 
> 标签：php, imap

我已经研究了如何在新电子邮件通过 IMAP 到达邮箱时获得通知。显然有几种方法可以这样做，一种是运行 cron-job（我不想这样做），另一种是使用名为 IMAP-IDLE 的函数。我在 PHP API 中找不到任何关于它的信息，但我确实发现了[imap_ping](http://php.net/manual/en/function.imap-ping.php)方法，它假设可以做到这一点。在上面的描述中，它说“它可能会发现新邮件”有人可以解释一下\给我看一个关于如何这样做的代码示例。如果只有在连接有效的情况下得到 TRUE \ FALSE，我怎么知道有新邮件到达？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:24:53.797

# 使用 PHP 即时检查新邮件

尝试使用[`imap_ping()`](http://php.net/manual/en/function.imap-ping.php)检查服务器上的新邮件的问题是该功能实际上只有两个目的：

*   检查流是否仍处于活动状态
*   保持流活着

现在，如果有新邮件，这个函数`stream` *可能会*返回`true`，但你仍然需要在后面获取它。

## **真正的问题**

PHP 是一种脚本语言 - 一旦脚本完成执行，它`unset`就是所有变量，让您在下次运行时重新开始。也就是说，PHP 中的**任何**函数都无法帮助您立即检查是否有新邮件进来，除非您分叉运行您想要的脚本并延长执行时间的 PHP 进程。然而，你*真的，**真的***不应该那样做，这是一种不好的做法，而且真的不是 PHP 的设计初衷。

***可能的解决方案***

要做你想做的事，最好的办法是制作 ac/c++ 守护进程或类似的东西，它会在后台不断运行。您可以让它检查新邮件，然后用它通知移动设备，或者如果您使用 PHP 比使用 c/c++ 更好，您*可以*创建一个脚本，当守护程序发现新邮件时为您发出通知. 实现取决于您，但检查何时收到新邮件的解决方案不是用 PHP 可行（也不应该）完成的。

# c++ - gdb 调试问题：gdb 调试步骤中看到的幻像值

> ID：16128882
> 
> 赞同：0
> 
> 时间：2013-04-21T07:23:58.840
> 
> 标签：c++, gdb

当我越过第 22 行时，我仍然可以看到来自 y 的奇怪值，这让我认为 y 没有正确初始化。但是当我再走 2 步到达返回线时，数字就正确了。

这里发生了什么？我试图关闭优化，但它不起作用

```
 1#include <iostream>
 2#include <cstring>
 3#include <cmath>
 4using namespace std;
 5
 6const int MD = 10;
 7struct BigNumber{
 8  int digits[MD];
15  }
16
17  BigNumber(){
18    memset( digits, 0, sizeof(digits));
19  }
20
***21  BigNumber test(){
22    BigNumber p,c,y;// on this line , y is seen as garbage
23    p=c;// on this line , y is seen as garbage
24    c=y;
25    //y=p;                                                                                                                      
26    return y; // on this line, y returned to correct number
27=>}***
28
29
30  friend ostream& operator<<(ostream& out, const BigNumber& b );
31};
32
33ostream& operator<<(ostream& out, const BigNumber& b){
34  for( int i=MD-1; i>=0; i-- ){
35     out << b.digits[i];
36  }
37  return out;
38}
39
40
41
42int main( ){
43  BigNumber l("4");
44  BigNumber r;
45  BigNumber p,c,y;
46
47  r=l.test();
48  cout << r << endl;
49  cout << l.test() << endl;
50  return 0;
51}
28
(gdb) p p
$8 = {digits = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0}}
(gdb) p c
$9 = {digits = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0}}
(gdb) p y
$10 = {digits = {1171907, 1235664, -1208027616, 1, 1, 0, 1, 134513360, 134520860, 0}}
(gdb) n
(gdb) n
(gdb) p y
$11 = {digits = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:23:58.377

它可能与编译器中的错误有关....当我使用它时，它开始抛出错误。 [gdb 错误消息：DW_OP_reg、DW_OP_piece 和 DW_OP_bit_piece](https://stackoverflow.com/questions/3721097/gdb-error-message-dw-op-reg-dw-op-piece-and-dw-op-bit-piece)

我还必须明确一点，这不是由数组成员引起的，因为编译器应该为它做成员元素的明智复制。[请参阅对数组成员的默认副本分配的](https://stackoverflow.com/questions/3681265/default-copy-assignment-with-array-members)确认

# android - 如何以编程方式依次拨打3个电话？

> ID：16128886
> 
> 赞同：3
> 
> 时间：2013-04-21T07:24:39.030
> 
> 标签：android, android-intent

我是android的新手。我写这段代码是为了打电话

```
Intent intent = new Intent(Intent.ACTION_CALL);
intent.setData(Uri.parse("tel:" + bundle.getString("mobilePhone")));
context.startActivity(intent); 
```

我知道有一个侦听器可以使用此代码查找手机的状态。

```
 private PhoneStateListener mPhoneListener = new PhoneStateListener() {
  public void onCallStateChanged(int state, String incomingNumber) {
  try {
  switch (state) {
  case TelephonyManager.CALL_STATE_RINGING:
  Toast.makeText(CaptureCall.this, "CALL_STATE_RINGING", Toast.LENGTH_SHORT).show();
  break;
  case TelephonyManager.CALL_STATE_OFFHOOK:
  Toast.makeText(CaptureCall.this, "CALL_STATE_OFFHOOK", Toast.LENGTH_SHORT).show();
  break;
  case TelephonyManager.CALL_STATE_IDLE:
  Toast.makeText(CaptureCall.this, "CALL_STATE_IDLE", Toast.LENGTH_SHORT).show();
  break;
  default:
  Toast.makeText(CaptureCall.this, "default", Toast.LENGTH_SHORT).show();
  Log.i("Default", "Unknown phone state=" + state);
   }
  } catch (Exception e) {
   Log.i("Exception", "PhoneStateListener() e = " + e);
  }
 }
}; 
```

实际上，我拨打第一个号码并听取电话的状态。如果电话状态变为`IDLE`我拨打第二个号码。但它不起作用。

任何人请建议我如何完成这项任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T16:40:28.350

您可以使用以下方式拨打第一个号码吗？

```
 Intent intent = new Intent(Intent.ACTION_CALL);
       intent.setData(Uri.parse("tel:" + bundle.getString("mobilePhone")));
       context.startActivity(intent); 
```

如果没有，也添加以下内容。

```
 intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

并使用相同的代码拨打第二个电话号码以拨打处于空闲状态的第一个号码。

但请注意，即使在您开始呼叫第一个号码之前，IDLE 状态也会为真，在这种情况下，您的第二个号码将首先被呼叫。在空闲状态下，如果第一个号码被呼叫，您可以设置一个标志，然后开始呼叫第二个号码。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-08T15:48:54.210

如果我正确理解您的问题，您正在尝试在完成之前的通话后拨打号码。

**这是**顺序调用n个数字的算法

1.  制作要呼叫的号码队列
2.  为 PhoneState 创建和注册广播接收器
3.  出列元素并触发调用意图
4.  在第 2 点创建的广播接收器将侦听空闲状态的呼叫丢弃状态，
5.  如果队列中有更多元素，请重复步骤 3-4
6.  否则，取消注册广播接收器。

**C# 代码片段：**

```
 Queue phoneNumbers = new Queue();

                foreach (var contact in emergencyContacts)
                    phoneNumbers.Enqueue(contact.contactNo);

                ShareUtils.CallToNumber(context, phoneNumbers.Dequeue().ToString());
                var callReceiver = new CallReceiver();
                callReceiver.onReceive += (intent) =>
                {
                    if (intent.Extras.GetString(TelephonyManager.ExtraState).Equals(TelephonyManager.ExtraStateIdle))
                    {
                        if (phoneNumbers.Count > 0)
                        {
                            var phNumber = phoneNumbers.Dequeue().ToString();
                            ShareUtils.CallToNumber(context, phNumber);
                            Toast.MakeText(this.Activity, $"Calling {phNumber}", ToastLength.Long).Show();
                        }
                        else
                        {
                            context.UnregisterReceiver(callReceiver);
                            ((LandingActivityNew)this.Activity)?.LoadSOS_SuccessFragment();
                        }
                    }
                };
                context.RegisterReceiver(callReceiver, new IntentFilter("android.intent.action.PHONE_STATE")); 
```

# java - 编写使用较早版本的可选库的 Java 程序

> ID：16128887
> 
> 赞同：-3
> 
> 时间：2013-04-21T07:24:44.000
> 
> 标签：java, time, jfreechart, zone

各位开发者您好！

我编写了一个使用早期版本的 JFreeChart 的 Java 程序（巧合的是，我在下载 Android SDK 时发现它已经在我的计算机上）来创建一些图表。我想知道的是两件事（是的，这是一个双重问题）：

1.) 该程序能否在可能（或可能没有）安装了 JFreeChart 版本（或根本没有）的其他计算机上运行。我想我可能知道这个问题的答案：JAR 文件是 Java 代码编译成的字节码的压缩版本。

2.) 我在使用这个程序时遇到了问题；我使用了一个 Time 对象来表示经过的时间（这是范围轴），它把 Time 当作一天中的时间！我正在考虑获取用户的时区，然后截断作为补救时间的长数字，但这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T07:30:04.073

> 该程序是否可以在可能（或可能没有）安装了 JFreeChart 版本（或根本没有）的其他计算机上运行。

不可以。Java 程序需要随它们一起提供它们的依赖项（JVM 本身及其库除外）。您可以将它们全部捆绑在一个可执行的 jar 文件中。

# image - Magento 更新产品以在前端显示图像

> ID：16128888
> 
> 赞同：1
> 
> 时间：2013-04-21T07:24:45.300
> 
> 标签：image, magento, dynamic

我通过执行脚本（自动）在magento中添加了产品。所有产品都是可配置的。

所有产品都正确分配到类别，类别并在管理区域正确显示，但有些产品显示在客户端，也显示图像。

为了解决这个问题，我必须“编辑”产品而不是“分配图像”和“保存”。因此它可以工作并在客户端显示带有图像的产品。

现在，有谁知道如何自动“保存”产品或 Magento 中可用的任何方法以编程方式保存此产品

我是 magento 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T09:11:25.870

如果我正确理解了您的问题，那么您正在寻找这个：

[http://ka.lpe.sh/2013/02/26/magento-cant-see-product-images-in-category-page/](http://ka.lpe.sh/2013/02/26/magento-cant-see-product-images-in-category-page/)

# java - 无法在小程序中实现并发动画

> ID：16128890
> 
> 赞同：-2
> 
> 时间：2013-04-21T07:24:49.970
> 
> 标签：java, multithreading, applet

这是我对小程序动画的第一手经验。我创建了一个小游戏，其中在小程序的上部，一列块必须保持移动，而在底部 derz 上，块 dat 必须将子弹击中 d 块移动的火车中的一个。问题是 dat每当我按下向上方向键时，子弹开始向上但火车停止（虽然我知道它为什么会发生）。但我需要子弹和火车移动（根据他们自己的速度）.....赫兹代码：

```
//<applet code=abyss.java width=500 height=500></applet>
import java.awt.*;
import java.applet.Applet;
import java.awt.event.*;

public class abyss extends Applet implements Runnable,KeyListener{
int l,i=0,n,c,ct=450,cl=225,y,f,bl,bw,fr;
Thread v=null;
public void init() {
setBackground(Color.black);
addKeyListener(this);
                      }
public void start() {
       v=new Thread(this);
       v.start();
                         }
public void run() {
try{
while(true) {
if(y==1) {
bl=cl+25;
bw=4;
f=446;
while(f>41)
 {
repaint(bl,f,bw,bw);
f--;
v.sleep(5);
    }
y=0;
bw=0;
          }
System.out.println("in thread");
repaint(); 
v.sleep(1000);
i=i+40; 
c=1; 
System.out.println("after sleep");
n=i/40;              

 } 

  }
catch(Exception e){}

                      }

public void paint(Graphics g) {
g.setColor(Color.darkGray);
g.fillRect(0,200,30,300);
g.fillRect(470,200,30,300);
g.fillRect(0,470,500,30);
g.setColor(Color.blue);
g.fillRect(cl,ct,50,20);
setBackground(Color.black);
System.out.println("in paint()");
for(int j=n;j>=0;j--)
{  l=j*40;
if((c%2)==0)
{g.setColor(Color.orange);
g.fillRect(l,0,50,40);}
else
{g.setColor(Color.cyan);
g.fillRect(l,0,50,40);}
c++;
System.out.println("in for"); 
}

g.setColor(Color.yellow);
g.fillOval(bl,f,bw,bw);                            
                                           }

public void keyPressed(KeyEvent e) {
if(e.getKeyCode()==KeyEvent.VK_LEFT){
cl=cl-10;}
if(e.getKeyCode()==KeyEvent.VK_RIGHT){
cl=cl+10;}
if(e.getKeyCode()==KeyEvent.VK_UP){
y= 1;}
}
public void keyReleased(KeyEvent e) {}
public void keyTyped(KeyEvent e) {}
public void stop() {
try{wait();}
catch(Exception e) {}
}
public void destroy() {}
} 
```

我需要的是为同一个小程序使用两个单独的paint（）或为同一个小程序使用两个单独的run（）........但我找不到两者的实现。PLz尽快帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:47:56.873

修改你的`run`方法：

```
public void run() {
    try {
        int trainDelay = 0;

        while (true) {
            if (y == 1) {
                if (f > 41 == false) {
                    bl = cl + 25;
                    bw = 4;
                    f = 446;
                }
                if (f > 41) {
                    repaint(bl, f, bw, bw + 1);
                    if (--f > 41 == false) {
                        y = 0;
                        bw = 0;
                    }
                }
            }
            if (trainDelay <= 0) {
                repaint();
                i = i + 40;
                c = 1;
                n = i / 40;
                trainDelay = 200;
            }
            Thread.sleep(5);
            trainDelay--;
        }
    } catch (Exception e) {
    }
} 
```

# java - 在 Android 中发送多部分表单数据

> ID：16128892
> 
> 赞同：3
> 
> 时间：2013-04-21T07:24:55.547
> 
> 标签：java, android, http, multipartform-data

我使用以下代码（取自 SO）将一些数据发布到 PHP 脚本：

```
HttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(Web.API_PREFIX_GENERAL + "ajax/process.AL.php");

MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
reqEntity.addPart("mail", new StringBody("abcd@abcd.com"));
reqEntity.addPart("remote", new StringBody("1"));
reqEntity.addPart("altitle", new StringBody("GHI"));
reqEntity.addPart("aldesc", new StringBody("JKL"));
reqEntity.addPart("t", new StringBody("N"));
reqEntity.addPart("lat", new StringBody(lati));
reqEntity.addPart("long", new StringBody(longi));
reqEntity.addPart("p", new StringBody("all"));

httpPost.setEntity(reqEntity);
httpClient.execute(httpPost); 
```

**...这不会产生任何东西。没有错误，但也没有发布任何内容。**

但是，如果我使用类似下面的东西并且没有添加任何部件`reqEntity`，

```
String url = Web.API_PREFIX_GENERAL + "ajax/process.AL.php?mail=abcd@abcd.com&remote=1&altitle=GHI" +
                    "&aldesc=JKL&t=N&lat=" + lati + "&long=" + longi + "&p=all";

HttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(url);

MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

httpPost.setEntity(reqEntity);
httpClient.execute(httpPost); 
```

**...这行得通**

我还设置了所有必需的 Apache 库。所以知道为什么会这样吗？

我需要使用`MultipartEntity`，因为稍后我还必须发布图像。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T12:54:50.333

我认为问题不在客户端，而在服务器端。在第二个示例中，您发送的是 HTTP POST，但您发送的是 GET 等参数。

通常在您发送数据文件（即上传文件）时使用多部分请求，但在我看来，在您的代码中您没有发送任何数据文件，因此您不应该使用多部分请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T13:05:18.890

整数到字符串的转换可能有问题。尝试这个：

```
reqEntity.addPart("lat", new StringBody(Integer.toString(lati)));
reqEntity.addPart("long", new StringBody(Integer.toString(longi))); 
```

您可以使用`lati + ""`而不是`Integer.toString(lati)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T12:42:52.570

我测试了您的代码并使用 http 代理工具监视了 http 请求。有用。也许您的 php 代码中出现了一些错误。

```
class MyTask extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... params) {
        testUpload();
        return null;
    }

}

public void testUpload() {  
    HttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost("http://www.google.com/" + "ajax/process.AL.php");

    try {
        MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
        reqEntity.addPart("mail", new StringBody("abcd@abcd.com"));
        reqEntity.addPart("remote", new StringBody("1"));
        reqEntity.addPart("altitle", new StringBody("GHI"));
        reqEntity.addPart("aldesc", new StringBody("JKL"));
        reqEntity.addPart("t", new StringBody("N"));
        reqEntity.addPart("p", new StringBody("all"));

        httpPost.setEntity(reqEntity);
        httpClient.execute(httpPost);
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

# ios - 当视图保持在另一个视图上时 iOS 火手势识别器

> ID：16128893
> 
> 赞同：0
> 
> 时间：2013-04-21T07:24:56.710
> 
> 标签：ios, uigesturerecognizer

我想这个问题说明了一切，但我想做的是在一个 UIView 被拖动并保持在另一个 UIView 上时触发一个长按手势识别器。如果长按直接在下面的视图上，它会正常工作。但是，当视图位于目标视图上方时，我还需要识别器触发，而我对此无能为力。

有什么建议么？

TIA

# shell - save terminal command to file that runs command in terminal when opened

> ID：16128895
> 
> 赞同：4
> 
> 时间：2013-04-21T07:25:50.563
> 
> 标签：shell, command-line, terminal, command

I have a series of commands that I run in terminal and I am wondering how I can store those commands in a file and of what file type so that on open of that file, in terminal, the commands run?

But the commands require two sources of input that I would manually type in when running the command.

Is there a way on file open, it can ask me for these two inputs and then insert them into the command and then run the command?

the commands inside the file, if needed to help me, are:

```
$ cd scripts/x
$ python x.py -i input -o output 
```

So on file open I need it to first change the dir to scripts/x, then ask me for the value of input, then the value of output, and then run the second command.

How can I do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T07:59:49.243

First, create this file (`x.sh`) in your favourite editor:

```
#!/bin/bash

# the variable $# holds the number of arguments received by the script,
# e.g. when run as "./x.sh one two three" -> $# == 3
# if no input and output file given, throw an error and exit
if (( $# != 2 )); then
        echo "$0: invalid argument count"
        exit 1
fi

# $1, $2, ... hold the actual values of your arguments.
# assigning them to new variables is not needed, but helps
# with further readability
infile="$1"
outfile="$2"

cd scripts/x

# if the input file you specified is not a file/does not exist
# throw an error and exit
if [ ! -f "${infile}" ]; then
        echo "$0: input file '${infile}' does not exist"
        exit 1
fi

python x.py -i "${infile}" -o "${outfile}" 
```

Then, you need to make it *executable* (type `man chmod` for further info):

```
$ chmod +x ./x.sh 
```

Now you can run this script from the same folder with `./x.sh`, e.g.

```
$ ./x.sh one
x.sh: invalid argument count

$ ./x.sh one two
x.sh: input file 'one' does not exist

$ ./x.sh x.sh foo
# this is not really printed, just given here to demonstrate 
# that it would actually run the command now
cd scripts/x
python x.py -i x.sh -o foo 
```

Note that if your output file name is somehow based on the input file name, you could avoid having to specify it on the command line, for example:

```
$ infile="myfile.oldextension"
$ outfile="${infile%.*}_converted.newextension"
$ printf "infile:  %s\noutfile: %s\n" "${infile}" "${outfile}"
infile:  myfile.oldextension
outfile: myfile_converted.newextension 
```

As you can see, there is room for improvement here. For example, we don't check if the `scripts/x` directory actually exists. And if you really want the script to *ask* you for the filenames and don't want to specify them on the command line at all, see `man read`.

If you want to learn more about shell scripting, you might want to read the [BashGuide](http://mywiki.wooledge.org/BashGuide) and the [Bash Guide for Beginners](http://www.tldp.org/LDP/Bash-Beginners-Guide/html/) in which case you should also check the [BashPitfalls](http://mywiki.wooledge.org/BashPitfalls).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T07:59:18.877

```
usage ()
{
  echo usage: $0 INPUT OUTPUT
  exit
}

[[ $2 ]] || usage
cd scripts/x
python x.py -i "$1" -o "$2" 
```

# java - JSoup 选择器内部文本

> ID：16128896
> 
> 赞同：1
> 
> 时间：2013-04-21T07:25:54.890
> 
> 标签：java, css, jsoup

我需要仅使用选择器获取“此处的文本”而不​​是“段落”我如何仅使用 JSoup 的选择器来执行此操作？

```
<div>
   Text Here
   <p>Paragraph</p>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T08:18:28.877

您可以尝试使用“getElemntById()”获取请求的元素。这是一个例子：

```
String html="<html><body><div id='div1'>Text Here<p>Paragraph</p></div></body></html>";

Document doc = Jsoup.parse(html);
Element div = doc.getElementById("div1");
String str = div.ownText();

System.out.println(str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:48:46.033

```
public static void main(String... args) throws IOException {

    Document document = Jsoup.parse("<div>Text Here<p>Paragraph</p></div>");

    Element elem = document.select("div p").first();
    String text = elem.text();

    System.out.println(text);
} 
```

输出

```
Paragraph 
```

# android - 处理室内 GPS 地图

> ID：16128899
> 
> 赞同：0
> 
> 时间：2013-04-21T07:26:59.177
> 
> 标签：android

我有自己的用户定义的地图（地图图像），我想在 Android 设备上显示它，并结合了谷歌地图的功能，例如放大和缩小功能、标记等，所以我有点卡住了我应该以哪种方式继续，是否有任何功能可以让我们在谷歌地图视图上集成自定义图像，或者我应该选择其他方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:00:40.137

谷歌地图在某一点后停止放大。根据您拥有的结构的大小和您想要覆盖的细节，这可能意味着谷歌地图是不可能的。

我建议您构建自己的页面 (html)，在其中包含地图照片，并使用 html 图像地图和 javascript 来处理用户点击。然后在 webview 中加载此页面。这将为您提供放大/缩小功能。

由于它是室内地图（可能是商场），您将无法获得可用（准确）的位置，因此您实际上不必坚持使用“真实”地图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T07:43:18.480

看看[Google Maps for Android API v2](https://developers.google.com/maps/documentation/android/)的[TileOverlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/TileOverlay)。这应该做你想要实现的目标：

> 瓦片叠加是一组显示在基本地图瓦片顶部的图像。这些图块可能是透明的，允许您向现有地图添加功能。

# google-apps-script - Google Apps 脚本：从私人电子表格中读取

> ID：16128903
> 
> 赞同：0
> 
> 时间：2013-04-21T07:27:54.923
> 
> 标签：google-apps-script

我有一个成绩簿 Web 应用程序脚本，它查看登录的学生的电子邮件地址，在成绩簿中找到电子邮件，然后根据电子邮件所在的列显示学生的成绩。唯一的问题是，这只有在 spreadhseet 是公开。我怎样才能保持电子表格的私密性并且仍然使这个脚本工作？我知道，如果我选择“知道链接的任何人”，则不太可能有人会找到该电子表格，但我希望它保持私密。另外，从“Deploy as Web App”界面来看，应用程序必须以用户身份执行，而不是我自己。有任何想法吗？

```
var ss = SpreadsheetApp.openByUrl('https://docs.google.com/spreadsheet/ccc?key=ID');
var sh1 = ss.getSheetByName('StudentGrades');
var logsheet = ss.getSheetByName('logsheet');
var data = sh1.getDataRange().getValues();
var user = Session.getEffectiveUser()
Logger.log(user)

function doGet() {
       var app = UiApp.createApplication();
       if(!getcol(user)){
          var warn = app.createTextBox().setWidth('500').setValue("Your results are not available or you don't have permission to view these data");// if user is not in the list, warning + return
app.add(warn)
return app
          }
  var grid = app.createGrid(data.length, 2).setWidth('300px').setBorderWidth(1).setCellPadding(0).setCellSpacing(0).setStyleAttribute('borderCollapse','collapse').setId('grid');
       var text = app.createLabel(user).setWidth('300px');
       var col = getcol(user)
       grid.setWidget(0,1,text).setText(0, 0, 'Results for');
       grid.setStyleAttribute('textAlign','center')
       for(n=1;n<data.length;++n){
         grid.setText(n, 0, string(data[n][0]));
         grid.setText(n, 1, string(data[n][col]));
         grid.setStyleAttributes(n-1, 0, {'fontWeight':'bold','background':'#fff','border':'1px solid #000'});//left column css attributes
         grid.setStyleAttributes(n-1, 1, {'fontWeight':'bold','background':'#fff','border':'1px solid #000'});//right column css attributes
       }
       app.add(grid);
       return app
    }

function string(value){
Logger.log(typeof(value))
if (typeof(value)=='string'){return value};// if string then don't do anything
if (typeof(value)=='number'){return Utilities.formatString('%.1f / 20',value)};// if number ther format with 1 decimal
if (typeof(value)=='object'){return Utilities.formatDate(value, Session.getTimeZone(), "MM-dd")};//object >> date in this case, format month/day
return 'error'
}

function getcol(mail){
  if(data[0].toString().indexOf(mail.toString())!=-1){
  for(zz=1;zz<data[0].length;++zz){
    if(data[0][zz] == mail){var colindex=zz;break}
  }
   return colindex
  }
  return false
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:32:50.437

正如我在您的另一篇文章中所建议的那样，您可以设置一个“手动登录”，这将允许您在自己运行 web 应用程序时保持电子表格的私密性。

这意味着您必须创建一个用户/密码键/值列表，并且每个学生都必须输入他的用户名和密码（您必须通过电子邮件向他们发送该信息以及指向 webapp 的链接) 在他们访问结果显示部分之前，在前端登录屏幕中。

我想保存该列表的最佳位置是以键：值的形式在脚本属性中。

如果您需要更多这个来实施该解决方案（并且如果您认为您会这样做），请随时询问。

* * *

**根据您的评论进行编辑**：

好的，我知道这可能会令人不快:)

只是想知道，将这些数据存储在脚本本身中的脚本数据库中是否更容易[，](https://developers.google.com/apps-script/scriptdb?hl=en)您可以使用电子表格值自动更新？更新必须由您执行（或由您创建的计时器触发器执行，以便它在您的帐户上运行），因此电子表格将保持私密。

然后，学生可以使用他们的帐户访问 web 应用程序，而无需访问电子表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:27:18.823

从以用户身份访问的服务中，通过 urlget 调用另一个以您自己身份发布的应用程序脚本服务。那个做与ss相关的工作。不过，服务调用可能会超时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-14T02:05:09.470

我是运行 Google Apps for Education 套件的域管理员，其中包含许多类似的应用程序。您没有提及您是否拥有该域的管理权限，但我假设您这样做？

我将所有电子表格保密并以我自己的身份运行网络应用程序（为脚本提供必要的访问权限），我认为这正是您的目标？

我认为您的主要问题源于使用`.getEffectiveUser()`which 没有为您提供所需的东西。我使用`Session.getActiveUser.getEmail()`然后遍历学生对象（这实际上只是一张使用标准 getRowsData 函数作为对象返回的学生详细信息）以匹配电子邮件值（如果未找到用户 = 未知）。

这对我来说非常适合拥有超过 2000 名学生，所有数据都是私有的，应用程序响应迅速，提供个性化信息。

如果您想查看示例应用程序，请告诉我，此处发布的内容有点大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-10T11:41:57.527

为什么不为您的每个课程设置一个 google 组？然后将 google 组添加到相应电子表格的 SHARE 权限中。这将有一个额外的好处，允许您通过适当的谷歌组轻松地向您的各个班级发送电子邮件。在这种情况下，您的成绩电子表格将保持私密，只有您和您的 google 群组中列出的电子邮件地址才能访问。

# javascript - 获取剑道列表视图中选定的项目数量

> ID：16128904
> 
> 赞同：0
> 
> 时间：2013-04-21T07:27:57.253
> 
> 标签：javascript, jquery, kendo-ui

如何获得所选项目的总数？

这行不通。

```
var listView = $("#listView").data("kendoListView");
alert(floorPlanlistView.select().length()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T07:36:47.850

尝试

```
alert(floorPlanlistView.select().length); 
```

# ruby - 创建加密保存文件

> ID：16128905
> 
> 赞同：-1
> 
> 时间：2013-04-21T07:27:59.773
> 
> 标签：ruby, encryption, loading, save

我正在尝试用 Ruby 制作游戏，我最近添加的是保存文件，但是，我在加密它们时遇到了一个大问题。

我已经设置了保存和加载方法，但我不想以纯文本格式保存它们，因为那是在乞求作弊。无论如何，我用来尝试加密、压缩等存储它们的方法似乎都给我带来了一些错误。

将文本保存在文件中的最佳方法是什么？唯一重要的是该文件无法打开和编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:50:04.343

您可以使用[crypt gem](http://crypt.rubyforge.org/)来加密/解密您的文件。

但请记住，如果您的用户可以查看您的 Ruby 脚本，则基本上无法隐藏您的数据，因为任何加密都需要某种密钥。

# c# - C# Mono Console.ReadLine 退出

> ID：16128909
> 
> 赞同：2
> 
> 时间：2013-04-21T07:28:15.300
> 
> 标签：c#, linux, ubuntu, mono

我正在 linux mint 14 上使用 MONO (C#) 构建应用程序，但我有一些问题。我在选项中启用了外部控制台，并且在调试时它工作得很好，但是在部署之后（在调试文件夹中打开 .exe），应用程序在 Console.ReadLine(); 之后立即退出。有什么想法吗？

```
public static void InitializeUI() 
        {
            Console.WriteLine("On the bottom line enter the command \"START\" followed by a space and a number representing on how many hours to check for new posts. You can always stop the execution with Ctrl+C \r\n \r\nExample : START 6");
            ParseCMD();
            Console.ReadLine ();
        }
        private static void ParseCMD()
        {
            string cmd = Console.ReadLine();
            string[] commands = cmd.Trim().Split(new string[] {" "},StringSplitOptions.RemoveEmptyEntries);
            int delay = 0;
            if (commands[0].ToLower() == "start" && int.TryParse(commands[1],out delay))
            {
                MainLogic.StartLogic(delay);
            }
            else
            {
                Console.WriteLine("Wrong command");
                ParseCMD();
            }
        } 
```

后退出

```
string cmd = Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-16T14:38:25.347

```
 public static void Main(string[] args)
    {
        Console.WriteLine("On the bottom line enter the command \"START\" followed by a space and a number representing on how many hours to check for new posts. You can always stop the execution with Ctrl+C \r\n \r\nExample : START 6");

        if(!ParseCMD(readKeey()))
        {
            ParseCMD(readKeey());
        }

    }private static string readKeey()
    {
        ConsoleKeyInfo cki;
        Console.TreatControlCAsInput = true;

        string temp="";
        do
        {
            cki = Console.ReadKey();
            temp=temp+cki.KeyChar;

        } while (cki.Key != ConsoleKey.Enter);
        return temp;
    }

    private static bool ParseCMD(string text)
    {
        try{
            string cmd = text;
            string[] commands = cmd.Trim().Split(new string[] {" "},StringSplitOptions.RemoveEmptyEntries);
            int delay = 0;
            if (commands[0].ToLower() == "start" && int.TryParse(commands[1],out delay))
            {
                Console.WriteLine("Right command you enter:" + commands[0] + commands[1]);
                return true;
            }
            else
            {
                Console.WriteLine("Wrong command");

                return false;
            }
        }
        catch(Exception ex)
        {
            Console.WriteLine("ex.Message:"+ex.Message);
            return false;
        }
    }
}} 
```

我想这与 Mono 无关，请您尝试使用 Console.ReadKey()。

# mvvm - 可移植视图模型中的 MVVM 和模态

> ID：16128913
> 
> 赞同：1
> 
> 时间：2013-04-21T07:29:20.913
> 
> 标签：mvvm, viewmodel, modal-dialog, mvvmcross, portable-class-library

我的应用程序（使用 MvvmCross 编写并考虑到 MVVM 模式）需要显示弹出窗口，用户可以在其中选择确认某些选项。所以基本上它是一个经典的模态对话框，但由于应用程序的视图模型是在可移植类库中实现的，它需要在广义上处理模态——一些平台根本没有与模态对话框完全匹配。

有几个线程讨论 MVVM 中的对话框（[在 WPF MVVM 中打开对话框](https://stackoverflow.com/questions/1805778/open-dialog-in-wpf-mvvm)，[WPF MVVM 对话框示例](https://stackoverflow.com/questions/1667888/wpf-mvvm-dialog-example)）。按照他们的建议，我可能可以通过引入 DialogService 并为每个平台实现它来解决这个问题。但是我会像其他服务一样处理对话框——存储服务、地图服务等。但是对话框是表示概念的一部分，所以我想知道它是否可以更像一个视图，而不是调用一个实例一个不起眼的 IDialogService 我可以使用我选择的 MVVM 框架（在我的例子中为 MvvmCross）导航到它。

我检查了 MvvmCross 实现和示例，但几乎没有发现与对话框相关的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T09:37:03.257

在 MvvmCross 中，`presenter`负责在使用`ShowViewModel`.

此演示者是一个视图/UI 级别的对象 - 最终是 UI 的工作来决定是否应将视图显示为页面、控件、选项卡、拆分视图、对话框等。

v3 确实引入了一个演示提示，ViewModel 可以帮助建议应如何显示视图 - 但由每个平台上的演示者决定如何（如果）使用此提示。

* * *

或者，可以使用 MvxMessenger 消息从 ViewModel 到 View 轻松显示 Dialogs/flyouts/etc，并在后面添加一点代码。

* * *

对于“模态”，还请考虑 Greg 关于“返回结果”的帖子 - 参见[http://www.gregshackles.com/2012/11/returning-results-from-view-models-in-mvvmcross/](http://www.gregshackles.com/2012/11/returning-results-from-view-models-in-mvvmcross/)

# java - 如何将 [搜索] 结果作为文件位置返回？

> ID：16128923
> 
> 赞同：-2
> 
> 时间：2013-04-21T07:31:38.603
> 
> 标签：java, android, sqlite

我正在研究可搜索的字典。它使用 SQLite 数据库。字典格式如下（2 列用“-”分隔）

```
Apple - One kind of fruit
Cricket - One type of game
Titanic - One type of Movie 
```

这`Apple`是列`A`，`One kind of fruit`是列`B`

我已经更新了我的数据库，如下所示

```
Apple - res/raw/Apple.txt
Titanic- res/raw/Titanic.txt 
```

我想`Apple.txt`在用户搜索时打开文件并显示文本`Apple`。但我使用的示例代码仅适用于 TextView，而不是打开文件、缓冲区和 ViewText。

这是我的代码，它在我的应用程序中显示 B 列

```
TextView details = (TextView) findViewById(R.id.details);
details.setMovementMethod(new ScrollingMovementMethod()); 
```

请建议我如何通过替换上述代码从搜索查询中打开 Apple.txt？

[发布更新]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:41:55.587

您可以根据以下内容使用拆分`-`：

```
String[] res = line.split("\\s+-\\s+"); 
```

现在你会有类似的东西：

```
[Apple, One kind of fruit] 
```

现在，因为您`Apple`在 A 列中有，所以您知道必须显示 的位置`apple.txt`。

或者（更好的方法），您可以将路径存储在 B 列中，如评论中所述的@Egor：

```
Apple - the_path_to_open.txt 
```

现在，当您拆分时，您将在数组的第**一个**元素（即 B 列）中获得路径，您可以打开它以显示其结果。

# bash - bash getops 不传递电子邮件或 IP 地址

> ID：16128925
> 
> 赞同：1
> 
> 时间：2013-04-21T07:31:53.593
> 
> 标签：bash, getopts

我一直在努力解决这个问题。想看看我做错了什么，这可能是我的全部。我正在ping一个IP，然后当它下降或上升时，它会发送通知。我的问题是getops。我正在使用它来尝试解析电子邮件地址和 IP。这些都没有被解析。如何使用 getopts 解析我的两个变量，我需要让我的脚本正常运行。先感谢您 ：）

```
#!/bin/bash
# Variable(s)
# --------
EMAIL_DOWN_SENT="0";
EMAIL_UP_SENT="0";
PING_FAILED="0";
PING_UP_AGAIN="0";

# FUNctions
# ---------
# 
# Echo a string value that is passed
echo_text() {
   echo -e >&2 "$@";
}

echo_help() {
echo_text "Usage: $(basename "$0") [-e] [EMAIL][-h] [-i] [IP]\n\nScript to ping ip address to see if it's up and send an alert on status changes.\n
        -e Enter email: user@domain.tld
        -h This help screen
        -i IP to ping";
   exit;
}

# Main body
# ---------
#
# Get command line options
# ------------------------
while getopts ":e:hi:" OPTIONS 
do
  case $OPTIONS in
     e) EMAIL=$OPTARGS ;;
  h|\?) echo_help ;;
     i) IP= $OPTARGS | grep -E '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'; if [ "$?" != "0" ]; then echo_text "Please enter a valid IP"; exit 1; fi; ;;
     *) echo_text "$OPTARGS is invalid, try again";
        exit 1 ;;
  esac
  shift $((OPTIND-1))
done
echo_text "Your email is: $EMAIL";
echo_text "Your ip to ping is: $IP";

# Ping me
# -------
trap "echo You hit ctrl-c, now exiting..; exit" SIGINT
while :
do
   ping -i 2 -c 2 $IP > /dev/null
   if [ $? -ne 0 ]; then
      let PING_DOWN+=1
      echo_text "Down! Abandon all hope who enter here...";
      PING_FAILED="1";
      # If greater than 3 cycles send an email...
      if [[ $PING_DOWN -ge 3 && $EMAIL_DOWN_SENT -eq 0 ]]; then
         echo "$IP Down!"|mutt -s "Ping Failed!" $EMAIL;
         EMAIL_DOWN_SENT="1";
      fi
   else
      let PING_UP+=1
      echo_text "Up! Ahoy! Host alive!";
      # If greater than 3 cycles send an email...
      if [[ $PING_UP -ge 3 && $EMAIL_UP_SENT -eq 0 && $PING_FAILED -eq 1 ]]; then
         echo "$IP up!"|mutt -s "Ping succeeded!" $EMAIL;
         EMAIL_UP_SENT="1";
         PING_UP_AGAIN="1";
      fi
      # Reset checks
      if [ $PING_UP_AGAIN -eq 1 ]; then
         PING_FAILED="0";
         PING_UP="0";
         PING_DOWN="0";
         EMAIL_UP_SENT="0";
         EMAIL_DOWN_SENT="0";
      fi
   fi
done 
```

* * *

```
if [ ! `echo "$OPTARG" | grep -qE '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'` ]; then
    echo_text "Please enter a valid IP"
    exit 1
fi
IP="$OPTARG" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:30:40.473

您的脚本中有两个主要错误：

首先，是`$OPTARG`，不是`$OPTARGS`。

第二，

```
IP= $OPTARGS | grep -E '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'; 
```

你不能这样做。将整个段落更改为以下内容

```
if ! echo "$OPTARG" | grep -qE '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'; then
    echo_text "Please enter a valid IP"
    exit 1
fi
IP="$OPTARG" 
```

还值得注意的是，除非您使用的是 Ancient ，否则您`bash`的 shell 应该有一个`=~`运算符（请参见[此处](http://www.gnu.org/software/bash/manual/bashref.html#Conditional-Constructs)），您可以将外部替换为`grep`：

> 使用时，运算符右侧的字符串被视为扩展正则表达式并进行相应匹配（如在 regex3 中）。如果字符串与模式匹配，则返回值为 0，否则为 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T16:39:30.907

除了 Adrian Frühwirth 指出的问题之外，您还需要将 shift 命令移到循环*之后。*您编写它的方式`getopts`是在解析脚本的同时删除脚本的参数，这会使事情完全混淆。

```
while getopts ":e:hi:" OPTIONS 
do
    ...
done
shift $((OPTIND-1))  # This must be after the "done" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-21T14:16:05.203

尝试用 "" 将 $OPTARGS 括起来：

e) EMAIL="$OPTARGS" ;;

# python - 如何通过 HTTPS 使用 python 请求

> ID：16128929
> 
> 赞同：1
> 
> 时间：2013-04-21T07:32:16.767
> 
> 标签：python, python-requests

我有这个代码：

```
import requests

url = 'https://mobile.twitter.com/session/new'

payload = {
       'username': 'username',
       'password': 'password',
       }
with requests.Session() as c:
    c.post(url, data=payload)
    r = c.get('https://mobile.twitter.com/account')
    print 'username' in r.content 
```

目标是登录 twitter mobile（我知道有一个 API，这只是为了好玩）......我已经使用 mechanize 创建了一个类似的脚本，它可以工作！

我的代码有什么问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T09:25:03.133

如果您查看登录表单隐藏字段，您会发现那里`authenticity_token`是必需的。另外，你`url`错了。

这是完整的例子：

```
import requests
from lxml.html import fromstring

with requests.Session() as c:
    url = 'https://mobile.twitter.com/session'
    response = c.get(url)

    html = fromstring(response.content)
    payload = dict(html.forms[0].fields)

    payload.update({
       'username': '<username>@gmail.com',
       'password': '<password>',
    })

    print payload

    c.post(url, data=payload)
    r = c.get('https://mobile.twitter.com/account')
    print '<username>' in r.content 
```

# file - 如何通过 RTP 接收 H264 流并存储到文件？

> ID：16128930
> 
> 赞同：2
> 
> 时间：2013-04-21T07:32:30.933
> 
> 标签：file, stream, store, h.264, rtp

我正在尝试制作一个从 android 客户端接收 RTP/H264 视频流并将这些存储到文件的服务器。

目前我在服务器中使用 VLC，效果很好。但是，我担心 VLC 是一种重量级的解决方案，可能无法很好地扩展。由于我实际上并没有播放视频，只是将其保存到文件中，因此我认为必须有一个更有效的解决方案。

目前我正计划使用 Amazon ec2 实例，因此目标是为每个实例提供尽可能多的客户服务。

我在语言方面很灵活（愿意学习），我想为工作选择合适的语言。

那么，有没有人知道将这些流存储到文件的一种好的、可扩展的方式？

提前致谢！

* * *

**编辑**

FFmpeg 或 libav 看起来很有希望。现在调查他们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:17:18.687

基本上，您需要一个支持 rtp 堆栈服务器端的库，因此您可以提取有效负载并在文件出现时附加到文件中。ffmpeg 是一个不错的选择，它确实有 rtp 堆栈，它也可以为你生成容器（M​​P4，...）；如果需要的话。实际上 VLC 在后台使用 ffmpeg 的 libav 库。

# ios - Cocoa Touch，设置变换标识等于当前变换状态

> ID：16128936
> 
> 赞同：0
> 
> 时间：2013-04-21T07:33:46.853
> 
> 标签：ios, cocoa, touch, cgaffinetransform

如何更改 transformIdentity。我们如何将变换设置为“零”，或者将视图的 transformIdentity 更改为所述视图的变换的当前状态。

换句话说，我想缩放一个视图，然后将当前状态（比如 2.5 的比例）设置为视图的默认比例（1 的比例）。

示例代码：

```
 view.transform = CGAffineTransformMakeScale(1, 2.5); 
```

我想做的伪代码：

```
 view.transform = setTransformIdentityTo:view.currentState; 
```

如果我正确理解 transformIdentity 是比例为 1 或旋转为零的状态，则默认为“零”变换。

注意：我想这样做的原因是，我可以只在视图的一个轴上设置负比例变换，并始终获得相对于调用翻转之前视图的最后状态的翻转视图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T08:09:28.323

`CGAffineTransformIdentity`确实将视图或图层重置为其原始的未转换状态，因此无法重新定义。
但是，如果您想要您的“个人”重置转换，例如使用不同的比例，为什么不简单地定义它，例如使用`CGAffineTransform myCGAffineTransformIdentity = CGAffineTransform CGAffineTransformMakeScale (sx,sy);`，并将其应用于您的视图？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T07:38:43.263

```
selectedSticker.transform = CGAffineTransformIdentity; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T21:04:22.200

如果你想让你的视图仍然被变换，即使它自己的变换是恒等变换，你可以做的就是把它放在另一个被变换的视图中。为外部视图提供您想要的默认转换；内部视图是您进行实际工作的视图。

因此，假设您希望您的“身份”水平缩放 2 倍。您将外部视图的变换设置为该变换，然后保持不变，而内部视图保持不变。当您想添加进一步的转换时，将其添加到内部视图中，并且当您想将其重置为默认值时，将内部视图的转换设置回（真实）身份。您的内部视图仍将通过外部视图的变换缩放（或其他）。

* * *

注意：我简单地尝试了一下，发现（a）自动布局在它上面，（b）缩放是从锚点向外的，这意味着我的外部视图的水平比例推动了我的内部视图有点越界，并且(c) 改变外部视图的锚点以`CGPointZero`产生更多的欢闹。

因此，虽然这在理论上是一个不错、简单、优雅的解决方案，但它实际上可能比它的价值更大，在这种情况下，我推荐[Reinhard Männer 建议](https://stackoverflow.com/a/16129182/30461)的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T08:08:47.737

似乎这适用于我想做的事情：

```
CGAffineTransform trans = CGAffineTransformMakeScale(1, 2.5);

view.transform = CGAffineTransformConcat(selectedSticker.transform, trans); 
```

# c++ - 我可以使用我所谓的“原始 OpenGL”吗？

> ID：16128938
> 
> 赞同：1
> 
> 时间：2013-04-21T07:34:51.943
> 
> 标签：c++, opengl, dll, native

我想知道OpenGL的主界面。简单来说，OpenGL DLL是如何调用图形函数的？C++中有一些隐藏的隐藏渲染代码吗？如果它可以从 DLL 调用 GPU，那么它应该可以在任何 C++ 程序中使用。如果是这样，我可以为我的程序制作一些自己的 API 吗？或者是什么？我希望这里有人知道。有人可以对这个主题有所了解吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T07:54:05.520

OpenGL DLL 像任何其他应用程序模块一样与 Ring 0 通信，调用如`DeviceIoControl`. 传递给这些调用的数据的确切细节没有公开记录，而且不太可能改变。GPU 制造商只是不愿意随意放弃这些信息。虽然您**可以**创建自己的 API，但与驱动程序对话的详细信息并不容易获得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T08:00:58.767

首先也是最重要的：现代 OpenGL 不是一个库，在 Windows 上，DLL 不包含与硬件对话的 OpenGL 实现。opengl32.dll 仅充当占位符，驱动程序将其低级函数（称为 ICD）挂接到其中。

我在这里详细回答了：[https ://stackoverflow.com/a/6401607/524368](https://stackoverflow.com/a/6401607/524368)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T08:00:22.490

一般来说，答案是“是”，但要使其可行，必须在某种程度上“依赖硬件”

您在最底层称为“图形功能”（您认为 OGL 所基于的东西）取决于硬件将图像帧构造成自身并与处理器通信的方式。

有些硬件只是一个平面帧缓冲区，有些硬件能够自行管理矢量场景的光栅化过程。

有操作系统 API 是平面 2d 矢量和成像支持（如 GDI）甚至是三维建模系统（如 direc3d）。

OGL 只是一个 API：它定义了一组一致的函数原型来完成一项任务（描述一个 3D 场景）。renderimg 进程被实现到不同的 DLLS 中，这取决于它们必须使用的系统的性质。

其中一些只是在自己的缓冲区上操作，这些缓冲区将位图的原始数据视为通过 OS 本机 api 在屏幕上进行 Blit-ted（请参阅[BitBlit](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183370%28v=vs.85%29.aspx)），其他一些将 OGL 调用转换为对特定操作码的调用到特定 io-硬件设备的端口。

由于 OGL 的流行，也有制造商正在标准化库和设备之间的“语言”。所以事情并不像看起来那样“线性”......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T08:07:07.823

直接写入硬件寄存器是在引入 OpenGL 和其他标准化图形 API 之前完成图形编程的方式。

一般来说，编写它是一场噩梦，几乎不可能调试。发明更高级别的 API 是有原因的。

如今，您最接近硬件的是在控制台上，您在控制台上的访问权限仍然比在 PC 上低得多，但即使是这种访问权限也比过去更加抽象。

如果你真的想这样做，你可以，但如果你不编写自己的操作系统，你基本上是在编写自己的驱动程序，而且你不会在现代 GPU 上找到很多公开可用的文档。

# django - Openshift：安装 Django 1.5 导致服务器 500 错误

> ID：16128939
> 
> 赞同：1
> 
> 时间：2013-04-21T07:35:01.523
> 
> 标签：django, python-2.7, openshift, django-1.5

我在 Openshift 上创建了一个 Django 1.3 应用程序。我想升级到 Django 1.5。所以我更新了 setup.py 来安装 Django 1.5

```
#!/usr/bin/env python

from setuptools import setup

setup(
    name='<Application name>',
    version='1.0',
    description='',
    author='',
    author_email='',
    url='http://www.python.org/sigs/distutils-sig/',
    install_requires=['Django>=1.5'],
) 
```

服务器返回 http 500。

如果 setup.py 有`install_requires=['Django<=1.4']`它工作正常。

如何在 Openshift 上安装 Django 1.5？

**更新**：我可以看到一个 github[提交](https://github.com/iepathos/django-example/commit/82a2e477bb82658a42d7ba188c9cd098abcea394)，其中 Django 的 install_requires 从 >=1.3 更改为 <=1.4 以处理相同的问题。但我仍然无法弄清楚导致服务器 500 的原因以及我们如何在 openshift 上安装 Django 1.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:51:19.367

它可能来自您的代码，您是否检查了发行[说明](http://docs.djangoproject.com/en/dev/releases/1.5/#backwards-incompatible-changes-in-1-5)中提到的向后不兼容性（主要是您的 settings.py 中需要的 ALLOWED_HOSTS）

它也可能来自`{% url %}`标签语法更改，请参见[此处](https://stackoverflow.com/questions/14882491/django-release-1-5-url-requires-a-non-empty-first-argument-the-syntax-change)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T09:30:20.757

我遇到了同样的问题：从您的屏幕截图中您使用的是**python2.6**吗？

尝试使用 python2.7 并将此配置放在**应用程序**文件中：

```
#!/usr/bin/env python

import os
import sys

sys.path.append(os.path.join(os.environ['OPENSHIFT_REPO_DIR']))

os.environ['DJANGO_SETTINGS_MODULE'] = 'mywebsite.settings'

virtenv = os.environ['OPENSHIFT_HOMEDIR'] + 'python/virtenv/'
os.environ['PYTHON_EGG_CACHE'] = os.path.join(virtenv, 'lib/python2.7/site-packages')

virtualenv = os.path.join(virtenv, 'bin/activate_this.py')
try:
    execfile(virtualenv, dict(__file__=virtualenv))
except IOError:
    pass
#
# IMPORTANT: Put any additional includes below this line.  If placed above this
# line, it's possible required libraries won't be in your searchable path
#

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

正如@Charles L 所指，尝试使用[允许的主机设置设置](https://stackoverflow.com/questions/15128135/setting-debug-false-causes-500-error)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T22:32:10.593

当我在 OpenShift 上安装 Django 应用程序时，Django 版本是 1.5.1。我认为 OpenShift 安装了最后一个版本的 Django，因为条件 Django >= 1.4，即没有低于这个版本。

那是屏幕截图，当我安装应用程序时 ![在此处输入图像描述](https://i.stack.imgur.com/1Ngny.png)

# publish - 发布带有密码限制的 google play

> ID：16128944
> 
> 赞同：0
> 
> 时间：2013-04-21T07:35:27.993
> 
> 标签：publish, google-play, password-protection

我想在 google play 中发布一个应用程序，但我想限制使用密码或类似的方式下载。可能吗？有没有其他选择？

提前谢谢了，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T07:42:13.917

*简短的回答：*

不。

*有点长答案：*

**只有在**用户进行身份验证后，才能下载 Google Play 上可用的应用程序。任何此类功能都必须在**您的**应用程序中实现。充其量，如果出于金钱原因需要此功能，请发布付费应用程序。

由于 OP 的描述性超出了您正在寻找的功能，因此很难提出*可能*适合您要求的选项/替代方案。但是，如果您有一个可以与应用程序通信的服务器设置，您可以实施一项功能，该功能要求用户在安装和运行您的应用程序时*注册*一个新帐户和/或*登录*（如果已经注册）。

再次，我将回到原点。任何此类功能都必须在应用程序**本身****内**实现。Google Play 没有**这样**的功能。

# javascript - 如何保留一些对象并删除其他对象

> ID：16128948
> 
> 赞同：2
> 
> 时间：2013-04-21T07:35:48.157
> 
> 标签：javascript, jquery, html

我正在尝试使用`num`类删除一些对象。

html:

```
<a class='num'>1</a>
<a class='num'>2</a>
<a class='num'>3</a>
<a class='num numa'>4</a>
<a class='num'>5</a>
<a class='num'>6</a>
<a class='num'>7</a>
<a class='num'>8</a>
<a class='num'>9</a>
<a class='num'>10</a> 
```

但我也想保持周围的物体`numa`。

我想在`numa`plus之前保留三个对象和三个对象`numa`。

这是我的尝试：

```
<script>
    var ind = $('.num:contains("4")').index();
    for(i=0; i<$('.num').size(); i++)
    {
        if(i<ind-3 || i>ind+3) $('.page_num:eq('+ind+')').remove();
    }
</script> 
```

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T07:41:05.880

您可以使用`slice`方法并使用方法排除元素`not`。由于`index`使用了方法，如果元素不是页面中的兄弟元素，它也会选择并删除它们。

```
var $e = $('a.num'),
    $t = $e.filter('.numa'),
    i  = $e.index($t), 
    $k = $e.slice(i-3, i+4);

$e.not($k).remove(); 
```

[http://jsfiddle.net/WnDS2/](http://jsfiddle.net/WnDS2/)

编辑：正如您的小提琴演示的那样，如果传递给`slice`方法的第一个参数是负数，`slice`则方法不会过滤元素，您可以检查所选元素的长度以及减法的结果是否为负数集它为 0。

[http://jsfiddle.net/WnDS2/5/](http://jsfiddle.net/WnDS2/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T08:17:20.513

首先使用属性选择器获取特定锚标记的索引，然后使用[.each](http://api.jquery.com/jQuery.each/)函数遍历所有 a 元素并使用以下逻辑删除所需的东西，试试这个，

```
 var xIndex=$("a[class='num numa']").index()

      $("a").each(function(i)
                  {
             if(xIndex - 3 > i || xIndex + 3 < i)
                {
                  $(this).remove();
                }
                  }) 
```

## [演示](http://jsfiddle.net/LpqAS/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T07:55:10.060

```
Try This: 
var index = $(".numa").index();
$(".numa").siblings().slice(index,index + 3).remove();
$(".numa").siblings().slice(index - 3, index).remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T08:07:14.850

您可以使用[:nth-child](https://developer.mozilla.org/en-US/docs/CSS/%3anth-child)选择器：

```
var ind = $('.numa').index();
$('.num:nth-child(-n+'+(ind-3 >= 0 ? ind-3 : 0)+'), .num:nth-child(n+'+(ind+5)+')').remove(); 
```

[http://jsfiddle.net/AgbAU/1/](http://jsfiddle.net/AgbAU/1/)

*该部分`ind-3 >= 0 ? ind-3 : 0`防止出现`nth-child(-n+-1)`语法不正确的情况。*

filter 方法也很有用：

```
var ind = $('.numa').index();
$('.num').filter(function() {
    var i = $(this).index();
    return i < ind - 3 || i > ind + 3;
}).remove(); 
```

[http://jsfiddle.net/AgbAU/2/](http://jsfiddle.net/AgbAU/2/)

# wix - 使用 WiX 创建注册表项失败

> ID：16128952
> 
> 赞同：2
> 
> 时间：2013-04-21T07:36:47.920
> 
> 标签：wix

以下代码无法在 Windows 7 上创建注册表项。

```
<Component Id='RegistryEntry1' Guid='1BECF977-A7A1-448E-8EC8-843A10E7F6D7' Directory='TARGETDIR'>
  <RegistryKey Root='HKLM'
               Key="SOFTWARE\Microsoft\Microsoft SDKs\Silverlight\v5.0\AssemblyFoldersEx\SimpleMvvmToolkit_2012.SL"
               ForceCreateOnInstall="yes"
               ForceDeleteOnUninstall="yes">            
      <RegistryValue Type="string" 
                     Value="C:\Program Files\SimpleMvvmToolkit_2012\Binaries\Silverlight\v5.0\"
                     KeyPath="yes"/>
  </RegistryKey>
</Component> 
```

![注册表快照](https://i.stack.imgur.com/KOHnc.png)

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:52:06.840

如果未创建注册表项，则很可能未安装组件。检查安装中的详细日志文件，例如：

```
msiexec /i path\to\your.msi /l*v install.txt 
```

在该日志文件中，您将看到如下行：

```
Component: RegistryEntry1; Installed: Absent;   Request: Local;   Action: Local 
```

我预计`Action`会`None`或不会`Local`。然后在日志文件中查找未安装组件的原因。

PS：`ForceCreateOnInstall`和`ForceCreateOnUninstall`不是必需的，除非您希望在卸载时必须删除的注册表项下创建随机值。

# java - 使用正则表达式解析日志文件

> ID：16128954
> 
> 赞同：0
> 
> 时间：2013-04-21T07:36:49.160
> 
> 标签：java, regex, parsing, logfile

我需要为日志文件编写一个解析器。我正在做正则表达式，但我发现了一些问题。这是第一行：

```
s0001 | smich | 02-03-2013 13:55:42 (Tue Mar 2013) | 2 
```

这是条目标题，我写了这样的正则表达式， `r\\d+ (\\| .*){3}`但它不起作用。

评论区呢？？“添加了一个新的状态接口”我这样写：`(\\w+\\s\\w+:)`

语言是Java。我希望程序能够识别这是一个条目标题。如果是，则解析它。通过解析我没有问题，但我无法找到正确的正则表达式。

它不起作用，请您纠正它们吗？

# h.264 - 直接访问 StageFright.so 以在 Android 中从 JNIlayer 解码 H.264 流

> ID：16128960
> 
> 赞同：6
> 
> 时间：2013-04-21T07:37:17.053
> 
> 标签：h.264, stagefright

有没有办法`libstagefright.so`直接从Android 2.3 或更高版本`H.264`的层访问解码流？`JNI`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T16:30:00.603

如果您的目标是解码基本`H.264`流，那么您的代码将必须确保提取流，并将`codec-specific-data`其提供给主要的编解码器，`SPS`并将`PPS`数据和帧数据以及时间戳一起提供给编解码器。在所有`Android`版本中，最常见的接口`OMXCodec`是对底层`OMX`组件的抽象。

在 Gingerbread (Android 2.3) 和 ICS (Android 4.0.0) 中，如果您想创建一个解码器，最好的方法是创建一个`OMXCodec`组件并通过`MediaSource`接口抽象您的代码，即您的包装器代码被建模为`MediaSource`并`OMXCodec` **从**此源并执行解码。

链接到 Android 2.3 视频解码器创建：[http ://androidxref.com/2.3.6/xref/frameworks/base/media/libstagefright/AwesomePlayer.cpp#1094](http://androidxref.com/2.3.6/xref/frameworks/base/media/libstagefright/AwesomePlayer.cpp#1094)

链接到 Android 4.0.0 视频解码器创建：[http ://androidxref.com/4.0.4/xref/frameworks/base/media/libstagefright/AwesomePlayer.cpp#1474](http://androidxref.com/4.0.4/xref/frameworks/base/media/libstagefright/AwesomePlayer.cpp#1474)

主要挑战如下：

1.  将输入建模为`MediaSource`.

2.  读取包装器代码以从编解码器读取缓冲区并对其进行处理并将其释放回编解码器。

为简化起见，您可以查看`stagefright`命令行可执行代码，如[http://androidxref.com/4.0.4/xref/frameworks/base/cmds/stagefright/stagefright.cpp#233](http://androidxref.com/4.0.4/xref/frameworks/base/cmds/stagefright/stagefright.cpp#233)

但是，如果您的程序基于 JellyBean (Android 4.1.x, 4.2.x) 及更高版本，那么这些会稍微简化一些。从您的 JNI 代码中，您可以创建一个`MediaCodec`组件并使用它进行解码。要将其集成到您的程序中，您可以参考[http://androidxref.com/4.2.2_r1/xref/frameworks/av/cmds/stagefright/SimplePlayer.cpp#316](http://androidxref.com/4.2.2_r1/xref/frameworks/av/cmds/stagefright/SimplePlayer.cpp#316)`SimplePlayer`中的实现

# javascript - Sencha Touch - 从数字字段中获取价值

> ID：16128961
> 
> 赞同：1
> 
> 时间：2013-04-21T07:37:44.320
> 
> 标签：javascript, ajax, html, dom, sencha-touch

我刚刚开始使用 Sencha Touch 2 框架，并且在跨设备复制表单行为方面遇到了一些困难。我有一个简单的搜索栏，用户在其中输入一个值（所有数字），然后选择它代表的内容（帐户、订单或电话号码）。当用户单击/点击搜索按钮时，它会获取输入字段的值和当前按下的数据类型按钮，并对 PHP 脚本进行 AJAX 查询。在 PC 上，它可以正常工作。在 iPad (6.1.3) 上，GET 请求不会到达服务器，并且 getValue 函数会报告 NULL，即使该字段已填充。我在这里想念什么？

```
Ext.define('bazooka.view.Main', {
extend: 'Ext.tab.Panel',
requires: ['Ext.form.Panel', 'Ext.form.FieldSet', 'Ext.field.Text', 'Ext.field.Email', 'Ext.field.TextArea', 'Ext.field.Number', 'Ext.SegmentedButton'],

config: {
    fullscreen: true,
    tabBar: {
        ui: Ext.filterPlatform('blackberry') || Ext.filterPlatform('ie10') ? 'dark' : 'light',
        layout: {
            pack : 'center',
            align: 'center'
        },
        docked: 'bottom'
    },
    items: [
        {
            title: 'Home',
            iconCls: 'home',
            html: 'This will have news and updates for the department of the currently authenticated user.'
        },
        {
            title: 'Lookup',
            iconCls: 'search',
            items: [
                {
                    xtype: 'toolbar',
                    ui: Ext.filterPlatform('blackberry') || Ext.filterPlatform('ie10') ? 'dark' : 'light',
                    docked: 'top',
                    items: [
                        {
                            xtype: 'numberfield',
                            id: 'viki_searchbox',
                            autoComplete: false,
                            autoCorrect: false,
                            docked: 'left',
                            maxWidth: '40%'
                        },
                        {
                            xtype: 'segmentedbutton',
                            id: 'viki_seg_btn',
                            allowDepress: true,
                            items: [
                                {
                                    id: 'account',
                                    iconCls: 'user'
                                },
                                {
                                    id: 'workorder',
                                    iconCls: 'time'
                                },
                                {
                                    id: 'telephone',
                                    iconCls: 'more'
                                }
                            ]
                        },
                        {
                            xtype: 'button',
                            id: 'viki_searchbutton',
                            docked: 'right',
                            iconCls: 'search',
                            handler: function() {
                                var searchtype = Ext.getCmp('viki_seg_btn').getPressedButtons()[0]["id"];
                                var searchvalue = Ext.getCmp('viki_searchbox').getValue();
                                Ext.Viewport.setMasked({
                                    xtype: 'loadmask',
                                    message: 'Searching...'
                                });
                                Ext.Ajax.request({
                                    url: 'viki.php',
                                    method: 'GET',
                                    headers: {
                                        "Content-Type": "application/xml"
                                    },
                                    disableCaching: false,
                                    params: {
                                        type: searchtype,
                                        sv: searchvalue
                                    },
                                    timeout: 3000,
                                    failure: function(response) {
                                        console.log("oops");
                                    }
                                });
                                Ext.Viewport.setMasked(false);
                            }
                        }
                    ]
                }
            ]
        }
    ]
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-27T06:47:21.150

看起来您的视图是一个数字字段。如果用户输入包含非数字字符，数字字段将返回 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T16:36:01.283

我不经常使用处理程序，我更喜欢点击事件。

问题可能是那个选择。

另外，如果我是你，我会使用 ItemId 而不是 Id 和 getComponent() 而不是 getCmp()。

由于您的搜索按钮位于相同的视图表单中，因此您将能够检索值

```
searchbutton.getParent().getComponent('itemId').value; 
```

我提出这些建议，在使用全局对象（如 id 或 getCmp）时，我是否在 sencha 中遇到过很多奇怪的行为。使用 itemId 和 getComponent() 会更安全。

# matlab - 在 matlab 中查找的替代方法

> ID：16128966
> 
> 赞同：0
> 
> 时间：2013-04-21T07:39:35.750
> 
> 标签：matlab

我有一个简单的问题。我想用常数替换向量中大于限制的所有值。我不想使用循环或查找选项。

```
AA=rand(10,4)
AA(AA(:,4)>0.5)=1;  % want to replace all values in 4th column % NOT WORKING 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T07:46:28.590

您需要为作业中的第 4 列添加下^标：

```
AA(AA(:,4)>0.5, 4) = 1; 
```

# javascript - 简单的事件聚合器

> ID：16128970
> 
> 赞同：3
> 
> 时间：2013-04-21T07:39:52.203
> 
> 标签：javascript, events, requirejs, eventaggregator

我正在寻找一个与 require.js 一起使用的简单事件聚合器。我有两个模块，一个包含视图模型，另一个包含某种“侦听器”：

```
// view model
define(['lib/knockout-2.2.1', 'events/aggregator'], function(ko, events){

    var squareViewModel = function(contents) {
        this.click = function(){
            events.publish('squareClicked', this);
        };
    };

    return squareViewModel;
});

// some listener of some kind
define(['events/aggregator'], function(events){
    events.subscribe('squareClicked', function(e){
        alert("hurrah for events");
    });
}); 
```

有什么东西可以做到这一点吗？这种架构甚至是一个好主意吗？这是我第一次涉足客户端架构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T01:04:30.777

这与您发布的内容相似，但是我在扩展 Backbone 事件方面很幸运（实际上，您不必使用有关 Backbone 的任何其他东西来工作），如下所示：

```
define(['underscore', 'backbone'], function( _, Backbone ) {
    var _events = _.extend({}, Backbone.Events);
    return _events;
}); 
```

然后您的所有视图模型（或任何代码）都可以使用它：

```
define(['knockout', 'myeventbus'], function(ko, eventBus){

    return function viewModel() {
        eventBus.on('someeventname', function(newValue) { 
        // do something
        });

        this.someKOevent = function() {
            eventBus.trigger('someotherevent', 'some data');
        };

    };
}); 
```

最初的想法来自[Derick Bailey 的这篇文章](http://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/)。我最喜欢的客户端活动[之一是 Jim Cowart 的这个](http://freshbrewedcode.com/jimcowart/2013/02/07/client-side-messaging-essentials/)

同样，它与您发布的内容几乎相同。但是，我不喜欢将其绑定到 jQuery 文档 DOM 节点的方法的一件事是，您可能还会有其他类型的事件从那里飞过，从子节点冒泡等等。而通过扩展主干事件，您可以拥有自己的专用事件总线（如果您想拥有单独的数据事件与 UI 事件，甚至可以拥有多个）。

关于此示例中的 RequireJS 的注意事项：Backbone 和 Underscore 与 AMD 不兼容，因此您需要使用[shim config](http://requirejs.org/docs/api.html#config-shim)加载它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T05:51:12.773

我最终使用 jQuery 来制作我自己的：

```
define([], function(){
    return {

        publish: function (type, params){
            $(document.body).trigger(type, params);
        },

        subscribe: function(type, data, callback){
            $(document.body).bind(type, data, callback);
        },
    };
}); 
```

它适用于我想要的用途，但尚未经过广泛测试。

[正如 explunit 在他的回答](https://stackoverflow.com/a/16159207/614523 "解释的答案")中指出的那样，这将捕获任何事件`document.body`。`this`在访问传递的回调函数内部时，我还发现了一个范围问题。

# ruby-on-rails - 未找到自定义验证

> ID：16128977
> 
> 赞同：0
> 
> 时间：2013-04-21T07:40:49.753
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, customvalidator

我正在关注官方[文档](http://guides.rubyonrails.org/active_record_validations_callbacks.html)以创建一个简单的自定义验证，以检查电子邮件地址的格式是否正确。

在应用程序 lib 文件夹中，我创建了名为**email_format_validator.rb**的文件，其中包含以下代码：

```
class EmailFormatValidator < ActiveModel::EachValidator

  def validate_each(object, attribute, value)
    unless value =~ /\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\z/i
      object.errors[attribute] << (options[:message] || "is not formatted properly")
    end
  end

end 
```

在我的模型中，我进行了以下检查：

```
validates :email, presence: true, email_format: true 
```

如果我评论**email_format: true**部分，则视图是可访问的，否则，将在该行生成错误，因为它显示在下面的屏幕截图中：

![在此处输入图像描述](https://i.stack.imgur.com/6MeGL.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:44:26.287

`lib`不会自动添加到`LOAD_PATH`. 要解决此问题，请附加`lib`文件夹`config.autoload_paths`或在模型开头添加要求

```
require 'lib/email_format_validator' 
```

# jquery - 当用户滚动过去时更改 div css，使用 jQuery

> ID：16128979
> 
> 赞同：3
> 
> 时间：2013-04-21T07:41:05.187
> 
> 标签：jquery, html, css, scroll

当用户滚动经过一个 div 时，我需要将它的 css 更改为 position:fixed。就像这里所做的一样：http: [//imakewebthings.com/jquery-waypoints/shortcuts/sticky-elements/](http://imakewebthings.com/jquery-waypoints/shortcuts/sticky-elements/)但只有普通的jquery，没有插件。
一旦用户滚动到另一个 div，该 div 也必须停止滚动。
例如：

```
<div id="stuff"></div>
<div id="this"></div>//must start scrolling with user when user reaches it.
<div id="footer"></div>// when #this reaches within say, 10px, of #footer it must stop in it's current position, in order to prevent overlap 
```

我假设我会使用 `.scroll()`and `.css()`，但我不知道从那里去哪里。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T11:37:46.570

我注意到，`#this`一旦你开始，你的答案就会突然消失`#footer`。我已经调整了您的答案，以允许`#this`坚持`#footer`和滚动更顺畅。

我的演示使用了稍微不同的标记并且更加冗长，所以跳到 jsFiddle 并检查一下。

## **演示：** [jsfiddle.net/Marcel/e9hyw/](http://jsfiddle.net/Marcel/e9hyw/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T09:10:19.853

这最终对我有用：

```
 jQuery(document).ready(function() {
    var topOfrel = jQuery("#this").offset().top;
    var topOffooter = jQuery("#footer").offset().top - jQuery(window).height(); 
    var topOffootero = topOffooter ;
    var boxheight = jQuery(window).height() - 130;//adjusting for position below
    jQuery(window).scroll(function() {
        var topOfWindow = jQuery(window).scrollTop();
        if (topOfrel < topOfWindow && topOffooter > topOfWindow) {
            jQuery("#this").css("position", "fixed").css("top", "130px").css("overflow","auto").css("height", boxheight + "px");

        } else {
            jQuery("#this").css("position", "static");
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T08:06:52.877

您引用的页面使用 jQuery：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"> 
```

并且还包含其他我们看不到的 Javascript

顺便说一句，您可以在这里查看：

```
http://imakewebthings.com/jquery-waypoints/waypoints.js
http://imakewebthings.com/jquery-waypoints/shortcuts/sticky-elements/waypoints-sticky.js 
```

他使用的功能可以在那里看到，但我不会说这是一个快速的答案。根据他的脚本，他在页面加载后将侦听器附加到元素：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('.my-sticky-element').waypoint('sticky');
    });
</script> 
```

如果你有具体的问题可以问，但我怀疑很多人会为你解释整个脚本。

# php - 在 php 脚本中嵌入 Web 浏览器

> ID：16128988
> 
> 赞同：1
> 
> 时间：2013-04-21T07:42:15.760
> 
> 标签：php, javascript

在我的项目中，我必须进行一些屏幕抓取。源页面在执行嵌入其中的 javascript 后返回数据。在我的 php 脚本中，我使用 file_get_contents() 获取页面，并且像往常一样，它以文本形式返回页面。我的问题就是这样，有没有办法从网页获取最终输出（执行javascript后的输出）。

我知道你们中的一些人可能会建议在其中嵌入一个网络浏览器并使用它来执行页面。但是如何做到这一点？是否有可用的工作浏览器。或者是否有可执行的非 GUI 版本的开源浏览器，例如铬，所以我可以将其作为 CGI 脚本或其他东西运行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T07:58:12.660

为此，您必须拥有一些真正的浏览器，例如客户端，仅 php 无法解决。出于自动化目的，您很可能需要像[PhantomJS](http://phantomjs.org/)（新热点）这样的“无头”（没有 gui）浏览器。看看[这个答案。](https://stackoverflow.com/a/814929/1515540)

# c# - 从控制台应用程序返回数据

> ID：16128990
> 
> 赞同：2
> 
> 时间：2013-04-21T07:42:23.463
> 
> 标签：c#, console

是否有可能以某种方式从控制台应用程序“对象”返回？对象的 Xml 或 Json 表示。我知道 CLR 会在执行控制台应用程序期间寻找它应该是 void 或 int 的入口点静态函数。

但是有什么常见的方法可以返回某种对象吗？标准输出流？有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T07:45:04.747

您可以将对象以序列化形式写入控制台。其他应用程序可以读取此控制台输出并反序列化对象。

就像是：

应用程序1：

```
 Console.Write(Json.Serialize(obj)); 
```

应用 2：

```
var p = Process.Start("app1.exe");
var obj = Json.Deserialize(p.StandardOutput.ReadToEnd()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T07:52:43.257

您可以重定向到 File 或其他 Memory Stream 对象。您可以从那里创建您的 XML 或 JSON 对象。请参阅此链接： http: [//www.dotnetperls.com/redirectstandardoutput](http://www.dotnetperls.com/redirectstandardoutput)

# wso2 - wso2：如何处理对非活动服务故障消息的访问？

> ID：16128991
> 
> 赞同：1
> 
> 时间：2013-04-21T07:42:29.090
> 
> 标签：wso2, wso2esb, endpoint, fault

**如何处理导致访问非活动服务的故障消息？**

我有 N 个端点。insequence 将消息发送到 endpint1 并将 Insequece 的 OnError 设置为 Seqerhandler。在 Seqerhandler 中，我将消息发送到另一个端点。当我将端点密钥设置为错误时，密钥消息传递给 seqerhandler 但是当我使用 Jconsole 消息处于非活动状态的端点1 时不会传递给 seqerhandler 并将下面的错误消息发送给客户端。

```
 <faultcode>soapenv:Server</faultcode>

     <faultstring>The system is attempting to access an inactive service 
```

我如何处理 Seqerhandler 的此故障消息与另一个故障相同？

请指导我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:53:04.913

故障处理程序将仅针对调解错误而不针对端点错误执行。对于端点错误处理，请遵循[本指南](http://wso2.org/library/articles/wso2-enterprise-service-bus-endpoint-error-handling)；

# php - Jquery 扩展不适用于多个 PHP 要求

> ID：16128993
> 
> 赞同：-1
> 
> 时间：2013-04-21T07:42:49.207
> 
> 标签：php, javascript, jquery, require

在我的 main.php 中，我有这样的东西。

```
<?php require 'require/display1.php';?>
<?php require 'require/display2.php';?>
<?php require 'require/display3.php';?> 
```

每个 PHP 扩展都包含如下内容：

```
<div class="hover_me">
   <p>Paragraph</p>
</div> 
```

在我的 main.php 页面的底部。

我有我的 JS 扩展名。

```
<script src="js/jquery.js"></script>
<script>
  $('.hover_me').mouseover(function(){
   alert('Hello!');
});
</script> 
```

Everthing 工作得非常好，仅在 require/display1.php 上而不是在其他两个 PHP 扩展上。谁能告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T07:48:27.750

准备好文件后试一下

```
$(function() {
   $('.hover_me').mouseover(function(){
      alert('Hello!');
   });
}); 
```

# c - 二叉树递归搜索c代码[不是二叉搜索树]

> ID：16128999
> 
> 赞同：0
> 
> 时间：2013-04-21T07:43:30.430
> 
> 标签：c, search, recursion, binary-tree

我的代码的问题是，当搜索左孩子值时，由于递归级别，它会返回并检查右孩子。并且返回不正确。我找不到克服它的方法。

```
node * search(node *ptr,int key)
{
    if(ptr->data==key)
        return ptr;
    else
    {
        if(ptr->lchild!='\0')
            search(ptr->lchild,key);
        else
            return '\0';
        if(ptr->rchild!='\0')
            search(ptr->rchild,key);
        else
            return '\0';
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T07:53:25.290

或许像这样

```
node * search(node *ptr,int key)
{
    node *pwk;
    if(ptr == NULL) return NULL;
    if(ptr->data==key)
        return ptr;
    if(NULL!=(pwk=search(ptr->lchild,key)))
        return pwk;
    if(NULL!=(pwk=search(ptr->rchild,key)))// or return search(ptr->rchild,key);
        return pwk;
    return NULL;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T11:26:30.480

```
Node *search(Node *ptr, int key)
{
    Node *found;
    if ( !ptr || ptr->data == key) return ptr;

    found = search(ptr->lchild, key);

    return (found) ? found : search(ptr->rchild, key);
} 
```

注意：两者都使用 和`||`短路[评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)，这使我可以将条件数量减少到一个。`?:``if(...)`

更新：如果允许我们使用“残缺三元”运算符 gnu-extension，我们也可以避免使用该变量：

```
Node *search2(Node *ptr, int key)
{
    if ( !ptr || ptr->data == key) return ptr;

    return search2(ptr->lchild, key) ?: search2(ptr->rchild, key);
} 
```

添加另一个三元会完全删除`if(...)`：

```
Node *search3(Node *ptr, int key)
{
    return ( !ptr || ptr->data == key) 
        ? ptr
        : search3(ptr->lchild, key) ?: search3(ptr->rchild, key);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T07:52:45.643

这是正确的。尝试这个：

```
node * search(node *ptr,int key)
{
    if(ptr->data==key)
        return ptr;
    else
    {
        node *current = NULL;
        if(ptr->lchild != NULL)
            current = search(ptr->lchild,key);

        if(current == NULL) /* not found in the left subtree */
        {
            if(ptr->rchild != NULL)
                current = search(ptr->rchild,key);
        }
        return current;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T07:52:38.983

```
node * search(node *ptr,int key)
{
    Node * p;

    // Found the key, return the pointer to the node
    if (ptr->data==key)
        return ptr;

    if (ptr->lchild != NULL)
    {
        p = search(ptr->lchild,key);
        // Found the key, return the pointer to the node
        if(p != NULL)
            return p;
    }
    // Didn't find it in the lchild, so search rchild
    if (ptr->rchild != NULL)
    {
        p = search(ptr->rchild,key);
        // Found the key, return the pointer to the node
        if(p != NULL)
            return p;
    }

    // Not found in left or right child, return NULL
    return NULL;
} 
```

避免`\0`在这种情况下使用。`\0`用于空字符。`NULL`用于空指针。虽然两者通常都是 0，但最好`NULL`用于指针。检查此问题以获取更多详细信息 - [NULL、'\0' 和 0 之间有什么区别](https://stackoverflow.com/questions/1296843/what-is-the-difference-between-null-0-and-0)