# StackOverflow 问答 12622000-12622999

# php - 根据 PHP 数组格式化 HTML 页面

> ID：12622001
> 
> 赞同：0
> 
> 时间：2012-09-27T13:00:24.887
> 
> 标签：php, sorting, logic

我在 php 中有一个未排序且动态变化的数组，其中我的值存储为“蓝色”、“红色”、“绿色”。数组的其余部分由诸如“湿”、“干”、“湿”之类的字符串组成。现在我想在将字符串打印到我的 html 页面之前打印相应的标题。我怎样才能做到这一点？

上面的代码会产生问题，因为如果 else 触发，在所有三种颜色都回显出来之前，它会再次打印标题。

编辑：

阵列：蓝色、潮湿、绿色、潮湿、干燥、红色。

```
echo "<h3>Color</h3><br>";
foreach($array as $value){
if ($value == "blue" || $value == "red" || $value == "green") {
    echo $value;
}
echo "<h3>Weather</h3><br>";
foreach($array as $value){
if ($value != "blue" || $value != "red" || $value != "green") {
    echo $value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:04:04.500

是的，因为您的布尔表达式不正确。它应该是

```
if($file == 'blue' || $file == 'red' || $file == 'green') 
```

你写它的方式将等于

```
if($file == 'blue' || true || true) 
```

并且在逻辑`OR`表达式中，`TRUE`如果只有一个变量等于`TRUE`。
**编辑**
在第二次阅读时，循环`echo`前的标题。`foreach`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:03:55.060

`if`语句语法错误。它需要是`if ($file == "blue" || $file == "red" || $file == "green") {`

`echo "<h1>Colours</h1>";`在 foreach 循环之前回显标题，如下所示：

```
 echo "<h1>Colours</h1>";      
       foreach($file_list as $file) {

      if ($file == "blue" || "red" || "green") {        
         echo $file;
        }
      else { ...} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:27:31.810

我自己得到了。在第二个 foreach 循环中更改逻辑 OR 确实只打印出预期的天气状况。

```
echo "<h3>Color</h3><br>";
foreach($array as $value){
if ($value == "blue" || $value == "red" || $value == "green") {
    echo $value;
}
echo "<h3>Weather</h3><br>";
foreach($array as $value){
if ($value != "blue" && $value != "red" && $value != "green") {
    echo $value;
} 
```

# sql - 具有 Connect BY 内部连接和更新的树结构

> ID：12622003
> 
> 赞同：2
> 
> 时间：2012-09-27T13:00:27.043
> 
> 标签：sql, oracle, join, tree, connect

我有 3 张桌子。表和。`Test`_`Folder``Iteration`

每个`test`都与一个`Folder`. `Folder`与 相关的是`test`许多其他 的子`folders`。

从这些`folders`层次结构顶部的一个与表相关联`Iteration`。

现在我想**更新**表中的**Iteration_ID**`Test`。这样我就有了测试和迭代之间的“快速”连接。这是我的尝试：

```
 update Test a set a.Iteration_ID =
(nvl((
--The Select Part
 select b.ID from Iteration b inner join Folder c on b.Folder_ID = c.ID 
    where c.ID = 
    (
        select * from 
        (
            SELECT d.ID FROM Folder d START WITH d.ID =  135196 CONNECT BY PRIOR d.parent_id = d.id
            order by LEVEL desc 
        )
        where rownum= 1
    )

--End Select Part
),0)); 
```

上面的查询有效，但我在 d.ID 有一个静态 ID。我想在那里设置**a.Folder_ID** ：

```
 update Test a set a.Iteration_ID =
(nvl((
--The Select Part
 select b.ID from Iteration b inner join Folder c on b.Folder_ID = c.ID 
    where c.ID = 
    (
        select * from 
        (
            SELECT d.ID FROM Folder d START WITH d.ID =  a.Folder_ID CONNECT BY PRIOR d.parent_id = d.id
            order by LEVEL desc 
        )
        where rownum= 1
    )

--End Select Part
),0)); 
```

问题是 Oracle 不知道 a.folder_id

```
ORA-00904: "A"."FOLDER_ID": ungültiger Bezeichner
00904\. 00000 -  "%s: invalid identifier" 
```

有人知道解决问题或改进查询的更好方法吗？

例如，使用`select * from and rownum = 1`?

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:13:35.163

我不确定我的数据库结构是否正确，但我希望我的想法在任何一种情况下都能对你有所帮助。所以我建议提供更多关于数据库结构的信息，例如`Iterations`，a可以有很多`Test`吗？

所以，这是我的建议：

```
UPDATE test a set a.Iteration_ID =
(nvl((
 SELECT i.ID
 FROM Iteration i,
  (SELECT id, first_value(id) over(partition by connect_by_root(id)) first_id
   FROM Folder
   START WITH parent_id IS NULL
   CONNECT BY parent_id = PRIOR id) folder_flat
 WHERE a.TEST_ID   = folder_flat.first_id
   and i.Folder_ID = folder_flat.ID 
),0)); 
```

总体思路是扁平化子查询中的层次结构，以便可以轻松连接。

# java - 如何将日期时间字符串放入日历对象？

> ID：12622006
> 
> 赞同：-1
> 
> 时间：2012-09-27T13:00:39.317
> 
> 标签：java

> **可能重复：**
> [如何将日期字符串转换为日期或日历对象？](https://stackoverflow.com/questions/43802/how-to-convert-a-date-string-to-a-date-or-calendar-object)

我怎么能做这样的事情

```
GregorianCalendar cal = new GregorianCalendar("2012-08-02 12:04:03"); 
```

或者

```
Calendar cal = Calendar.getInstance();
cal.setDateTime("2012-08-02 12:04:03"); 
```

**注意**：上面的代码片段实际上是不可能的，我想模拟这种行为。

**进一步澄清**

假设我有一个日期和时间字符串，例如“2012-08-02 12:04:03”。有没有一种有效的方法可以将此信息放入日历对象中，而无需手动将其分解为月、年和日字符串，然后将它们转换为整数，然后调用 set(Calendar.HOUR) 等？

目前，我有一个表单，可以输入年、月、小时、日等，我将它们单独传递到日历对象中，但如果我可以使用单个日期和时间字符串，例如“2012- 08-02 12:04:03"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:02:46.043

您必须使用[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)它为您提供一个`Date`对象。使用该`Date`对象，您可以初始化您的`Calendar`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:05:13.467

```
 String dateString=new SimpleDateFormat("dd/MM/yyyy HH:mm:ss").parse("2012-08-02 12:04:03");
            Calender cal = Calender.getInstance();
            cal.setTime(new SimpleDateFormat("dd/MM/yyyy HH:mm:ss").format(dateString).getTime()); 
```

将它包裹在 try catch 周围，因为 parse 方法会抛出 ParseException。并研究@user714965 提供的链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:15:28.773

**使用 .parse() 方法将 String 转换为 Date 对象：**

`String dateString=new SimpleDateFormat("dd/MM/yyyy HH:mm:ss").parse("2012-08-02 12:04:03");`

**getInstance() 将创建抽象日历类的子类之一的实例：**

`Calender cal = Calender.getInstance();`

**setTime() 将采用 Date 对象：**

`cal.setTime(new SimpleDateFormat("dd/MM/yyyy HH:mm:ss").fomat(dateString).getTime());`

# json - wcf 数据服务是否可以返回 json 格式的元数据？

> ID：12622008
> 
> 赞同：0
> 
> 时间：2012-09-27T13:00:40.820
> 
> 标签：json, wcf-data-services, odata

wcf 数据服务是否可以返回 json 格式的元数据？

服务器从此请求返回错误 415 ->

GET [http://services.odata.org/V3/(S(plcxuejnllfvrrecpvqbehxz))/OData/OData.svc/](http://services.odata.org/V3/(S(plcxuejnllfvrrecpvqbehxz))/OData/OData.svc/) $metadata HTTP/1.1 DataServiceVersion: 3.0; 主机：services.odata.org 内容长度：0 接受：application/json;odata=verbose 内容类型：application/json;odata=verbose

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:53:55.813

没有什么可以阻止该服务提供这种功能，但 OData 目前没有为元数据端点响应定义 JSON 格式。所以服务器必须拿出一个（专有的）。这适用于 WCF 数据服务，我对普通的 WCF 服务（以及是否有 WSDL 的 JSON 版本）了解不够。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:08:42.270

WCF 可以从方法返回 json，但服务元数据始终是 xml (wsdl)。

# ruby-on-rails - 来自关联模型的 ID 列表

> ID：12622009
> 
> 赞同：0
> 
> 时间：2012-09-27T13:00:53.780
> 
> 标签：ruby-on-rails, activerecord, associations

我有 3 个模型：用户、文章和评论。

*   文章有很多评论。
*   评论属于文章。
*   用户有很多评论。

课本案例：）

我想列出用户发表评论的文章 ID。我怎么做？

我已经在控制台中尝试了 User.find(1).comments.articles_ids 的变体，但这给了我一个未定义的方法错误。

我确定这很简单，但我无法弄清楚:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:21:17.877

一种方法，适用于您当前的设置：

```
user.comments.collect(&:article_id).uniq 
```

或者我想你可以添加`has_many :through`一个`User`：

```
class User < ActiveRecord::Base
  has_many :articles, :through => :comments
end 
```

那么你可以通过`user.articles.collect(&:id)`（也许也可以`user.article_ids`，但我不确定）获取ID。

# php - 将大型 CSV 文件导入 MySQL

> ID：12622013
> 
> 赞同：4
> 
> 时间：2012-09-27T13:01:05.563
> 
> 标签：php, mysql, load-data-infile, fgetcsv

我正在尝试将 csv 文件导入到 mysql 表中，并且我目前有一个正在逐行运行的脚本，因为我需要将一个 id 与另一个 id 结合起来，并将日期格式化为 mysql 格式。

csv 文件的列比我当前导入的要多。只导入所有列更容易吗？

我正在阅读有关 LOAD DATA INFILE (http://dev.mysql.com/doc/refman/5.1/en/load-data.html) 的信息，但我想知道如何使用它并散列 id 并格式化日期无需逐行执行。我当前的脚本花费的时间太长，并在运行时导致站点性能问题。

这是我所拥有的：

```
$url = 'http://www.example.com/directory/file.csv';
if (($handle = fopen($url, "r")) !== FALSE) 
{
fgetcsv($handle, 1000, ",");
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) 
{
    $EvID = $data[0];
    $Ev = $data[1];
    $PerID = $data[2];
    $Per = $data[3];
    $VName = $data[4];
    $VID = $data[5];
    $VSA = $data[6];
    $DateTime = $data[7];
    $PCatID = $data[8];
    $PCat = $data[9];
    $CCatID = $data[10];
    $CCat = $data[11];
    $GCatID = $data[12];
    $GCat = $data[13];
    $City = $data[14];
    $State = $data[15];
    $StateID = $data[16];
    $Country = $data[17];
    $CountryID = $data[18];
    $Zip = $data[19];
    $TYN = $data[20];
    $IMAGEURL = $data[21];
    $URLLink = $data[22];

        $data[7] = strtotime($data[7]);
        $data[7] = date("Y-m-d H:i:s",$data[7]);

    if((($PCatID == '2') && (($CountryID == '217') or ($CountryID == '38'))) || (($GCatID == '16') or ($GCatID == '19') or ($GCatID == '30') or ($GCatID == '32'))) 
    {
            if(!mysql_query("INSERT IGNORE INTO TNDB_CSV2 
                (id, EvID, Event, PerID, Per, VName,
                     VID, VSA, DateTime, PCatID, PCat,                
                CCatID, CCat, GCatID, GCat, City,
                     State, StateID, Country, CountryID, Zip,
                TYN, IMAGEURL) VALUES
                ('".md5($EventID.$PerformerID)."','".addslashes($data[0])."','".addslashes($data[1])."','".addslashes($data[2])."','".addslashes($data[3])."','".addslashes($data[4])."',
                    '".addslashes($data[5])."','".addslashes($data[6])."','".addslashes($data[7])."','".addslashes($data[8])."','".addslashes($data[9])."',
                '".addslashes($data[10])."','".addslashes($data[11])."','".addslashes($data[12])."','".addslashes($data[13])."','".addslashes($data[14])."',
                    '".addslashes($data[15])."','".addslashes($data[16])."','".addslashes($data[17])."','".addslashes($data[18])."','".addslashes($data[19])."',
                '".addslashes($data[20])."','".addslashes($data[21])."')"))
            {                    
                exit("<br>" . mysql_error());
            }
    }
}
fclose($handle);
} 
```

任何帮助总是非常感谢。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T13:09:34.463

首先尝试优化您的脚本。首先，除非您别无选择，否则在导入时切勿运行单个查询，网络开销可能是一个杀手。

尝试类似（显然未经测试并在 SO 文本框中编码，检查括号匹配等）：

```
$url = 'http://www.example.com/directory/file.csv';
if (($handle = fopen($url, "r")) !== FALSE) 
{
fgetcsv($handle, 1000, ",");

$imports = array();

while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) 
{
    $EvID = $data[0];
    $Ev = $data[1];
    $PerID = $data[2];
    $Per = $data[3];
    $VName = $data[4];
    $VID = $data[5];
    $VSA = $data[6];
    $DateTime = $data[7];
    $PCatID = $data[8];
    $PCat = $data[9];
    $CCatID = $data[10];
    $CCat = $data[11];
    $GCatID = $data[12];
    $GCat = $data[13];
    $City = $data[14];
    $State = $data[15];
    $StateID = $data[16];
    $Country = $data[17];
    $CountryID = $data[18];
    $Zip = $data[19];
    $TYN = $data[20];
    $IMAGEURL = $data[21];
    $URLLink = $data[22];

        $data[7] = strtotime($data[7]);
        $data[7] = date("Y-m-d H:i:s",$data[7]);

    if((($PCatID == '2') && (($CountryID == '217') or ($CountryID == '38'))) || (($GCatID == '16') or ($GCatID == '19') or ($GCatID == '30') or ($GCatID == '32'))) 
    {

    $imports[] = "('".md5($EventID.$PerformerID)."','".addslashes($data[0])."','".addslashes($data[1])."','".addslashes($data[2])."','".addslashes($data[3])."','".addslashes($data[4])."',
                    '".addslashes($data[5])."','".addslashes($data[6])."','".addslashes($data[7])."','".addslashes($data[8])."','".addslashes($data[9])."',
                '".addslashes($data[10])."','".addslashes($data[11])."','".addslashes($data[12])."','".addslashes($data[13])."','".addslashes($data[14])."',
                    '".addslashes($data[15])."','".addslashes($data[16])."','".addslashes($data[17])."','".addslashes($data[18])."','".addslashes($data[19])."',
                '".addslashes($data[20])."','".addslashes($data[21])."')";

    }
}

$importarrays = array_chunk($imports, 100);
foreach($importarrays as $arr) {

 if(!mysql_query("INSERT IGNORE INTO TNDB_CSV2 
                (id, EvID, Event, PerID, Per, VName,
                     VID, VSA, DateTime, PCatID, PCat,                
                CCatID, CCat, GCatID, GCat, City,
                     State, StateID, Country, CountryID, Zip,
                TYN, IMAGEURL) VALUES ".implode(',', $arr)){

     die("error: ".mysql_error());

 }

 }

fclose($handle);
} 
```

玩弄array_chunk中的数字，太大，可能会导致查询太长（是的，my.cnf中有一个可配置的限制），太小和不必要的开销等问题。

您也可以放弃使用将 $data[x] 分配给变量，因为它是一种浪费，因为脚本有多小，只需在您的查询等中直接使用 $data[x] （不会有很大的改进，但取决于您的导入大小可以节省一点）。

接下来是使用低优先级的插入/更新，请查看此以获取更多信息以帮助您入门：[如何优先考虑某些查询？](https://stackoverflow.com/questions/12253963/how-to-give-priority-to-certain-queries/12254148)

毕竟，您可能会想到 mysql 配置优化，但这是 google 真正要解释的一个，因为每个人及其独特情况的最佳设置都不同

**编辑：**我之前做过的另一件事是，如果您设置了很多导入不需要的密钥，您可以暂时删除这些密钥，并在脚本完成后将它们添加回来。这也可以带来很好的时间改进，但是当你在一个实时数据库上工作时，如果你走这条路，就会有一些陷阱需要解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:05:30.180

尝试使用[implode()](http://php.net/manual/en/function.implode.php)函数进行批量插入。有关进一步的解释和示例，请参阅此线程[通过 php 数组将多行插入 mysql](https://stackoverflow.com/questions/779986/insert-multiple-rows-via-a-php-array-into-mysql)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-06T19:16:46.050

我使用了这个查询

```
$sql = "
        LOAD DATA LOCAL INFILE 'uploads/{$fileName}'
        REPLACE INTO TABLE `order`
        FIELDS
            TERMINATED BY '\t'
        LINES
            TERMINATED BY '\r\n'
        IGNORE 1 LINES
        (product_id, `date`, quantity)
        "; 
```

超级快

# iphone - 如何在 Xcode 4.2 中添加 entitlements.plist？

> ID：12622014
> 
> 赞同：0
> 
> 时间：2012-09-27T13:01:06.937
> 
> 标签：iphone, ios, xcode, xcode4

我知道在 xcode 3.2 中添加权利很容易。但我的疑问是我们如何在 xcode 4.2 中添加它。我知道在目标摘要选项卡下有一个部分权利。但是任何人都可以帮助我知道如何添加就像我们在 Xcode 3.2 中所做的那样，将该文件放到我们的资源文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:06:07.420

右键单击出现在窗口左侧的项目“您的项目名称”（称为项目导航器），然后选择“将文件添加到 MyProject”选项

# algorithm - 归并排序中为什么要在阈值交叉后使用插入排序

> ID：12622015
> 
> 赞同：6
> 
> 时间：2012-09-27T13:01:08.697
> 
> 标签：algorithm, sorting, quicksort, mergesort, divide-and-conquer

我到处读到，对于像`Merge-Sort`and这样的分而治`Quicksort`之的排序算法，与其递归直到只剩下一个元素，不如转移到`Insertion-Sort`达到某个阈值（比如 30 个元素）时。这很好，但为什么只有`Insertion-Sort`？为什么不`Bubble-Sort`或`Selection-Sort`，两者具有相似的`O(N^2)`性能？`Insertion-Sort`只有在对许多元素进行预排序时才应该派上用场（尽管这种优势也应该伴随着`Bubble-Sort`），但除此之外，为什么它应该比其他两个更有效？

其次，在[这个链接](https://stackoverflow.com/questions/8101546/why-is-insertion-sort-better-than-quick-sort-for-small-list-of-elements)上，在第二个答案及其随附的评论中，它说与upto a certain`O(N log N)`相比表现不佳。怎么来的？应该总是表现得比 差，因为对于所有 N >= 2，对吧？`O(N^2)``N``N^2``N log N``N > log N`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T14:28:06.803

如果您在分治法快速排序的每个分支达到阈值时退出，您的数据将如下所示：

```
[the least 30-ish elements, not in order] [the next 30-ish ] ... [last 30-ish] 
```

插入排序具有相当令人愉悦的属性，您可以在整个数组上只调用一次，并且它的执行基本上与为每个 30 块调用一次时相同。因此，您不必在循环中调用它，而是最后调用它的选项。这可能不会*更快*，特别是因为它通过缓存拉取整个数据额外的时间，但取决于代码的结构，它可能很方便。

冒泡排序和选择排序都没有这个属性，所以我认为答案可能很简单，就是“方便”。如果有人怀疑选择排序可能更好，那么举证责任就在于他们“证明”它更快。

请注意，这种插入排序的使用也有一个缺点——如果你这样做并且你的分区代码中有一个错误，那么只要它不会丢失任何元素，只是将它们分区不正确，你永远*不会注意到*。

编辑：显然这个修改是由 Sedgewick 完成的，他于 1975 年在 QuickSort 上写了博士学位。Musser（Introsort 的发明者）最近对其进行了分析。参考[https://en.wikipedia.org/wiki/Introsort](https://en.wikipedia.org/wiki/Introsort)

> Musser 还考虑了 Sedgewick 的延迟小排序对缓存的影响，其中小范围在最后一次插入排序中进行排序。他报告说它可以使缓存未命中的数量增加一倍，但它的双端队列性能要好得多，应该保留给模板库，部分原因是在其他情况下立即进行排序的收益并不大。

无论如何，我不认为一般建议是“无论你做什么，都不要使用选择排序”。建议是，“插入排序胜过快速排序，因为输入的大小非常小”，当你实现快速排序时，这很容易向你自己证明。如果你想出另一种在相同的小数组上明显优于插入排序的排序，那么这些学术资料都没有告诉你不要使用它。我想令人惊讶的是，该建议始终针对插入排序，而不是每个来源都选择自己喜欢的来源（坦率地说，入门教师有一个*令人惊讶的*对冒泡排序的喜爱——如果我再也没有听说过它，我不会介意）。插入排序通常被认为是小数据的“正确答案”。问题不在于它是否“应该”快，而在于它是否真的快，而且我从来没有特别注意到任何基准消除了这个想法。

寻找此类数据的一个地方是 Timsort 的开发和采用。我很确定 Tim Peters 选择插入*是有原因的*：他没有提供一般性建议，他正在优化库以供实际使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-27T13:46:27.437

1.  在实践中，插入排序至少比冒泡排序更快。它们的渐近运行时间是相同的，但插入排序具有更好的常数（每次迭代的操作更少/更便宜）。最值得注意的是，它只需要线性数量的元素对交换，并且在每个内部循环中，它执行每个*n* / 2 元素和可以存储在寄存器中的“固定”元素之间的比较（而冒泡排序必须从内存中读取值）。即插入排序在其内部循环中的工作比冒泡排序少。
2.  答案声称 10000 *n* lg *n* > 10 *n* ² 对于“合理的” *n*。对于大约 14000 个元素，这是正确的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-09T13:47:17.590

我很惊讶没有人提到插入排序对于“几乎”排序的数据要快得多的简单事实。这就是它被使用的原因。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-27T14:26:02.707

第一个更容易：为什么插入排序优于选择排序？因为对于最优输入序列，插入排序在**O(n)**中，即如果序列已经排序。选择排序总是在**O(n^2)**中。

为什么插入排序优于冒泡排序？对于已经排序的输入序列，两者都只需要一次通过，但插入排序会更好地降级。更具体地说，插入排序在反转次数较少的情况下通常比冒泡排序表现更好。[这可以解释，因为冒泡](http://en.wikipedia.org/wiki/Bubble_sort#Performance)排序总是在第 i 次迭代中迭代 Ni 元素，而插入排序更像“查找”，并且只需要平均迭代 (Ni)/2 个元素（在第 Ni-1 次迭代中）以找到插入位置。因此，平均而言，插入排序预计比插入排序快两倍左右。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-27T14:13:54.857

这是一个**经验证明，插入排序比冒泡排序更快**（对于 30 个元素，在我的机器上，附加实现，使用 java ...）。

我运行了附加的代码，发现冒泡排序平均运行了 6338.515 ns，而插入则需要 3601.0

我使用[wilcoxon 签名测试](http://en.wikipedia.org/wiki/Wilcoxon_signed-rank_test)来检查这是一个错误的概率，它们实际上应该是相同的 - 但结果低于数值错误的范围（实际上是 P_VALUE ~= 0）

```
private static void swap(int[] arr, int i, int j) { 
    int temp = arr[i];
    arr[i] = arr[j];
    arr[j] = temp;
}

public static void insertionSort(int[] arr) { 
    for (int i = 1; i < arr.length; i++) {
        int j = i;
        while (j > 0 && arr[j-1] > arr[j]) { 
            swap(arr, j, j-1);
            j--;
        }
    }
}
public static void bubbleSort(int[] arr) { 
    for (int i = 0 ; i < arr.length; i++) { 
        boolean bool = false;
        for (int j = 0; j < arr.length - i ; j++) { 
            if (j + 1 < arr.length && arr[j] > arr[j+1]) {
                bool = true;
                swap(arr,j,j+1);
            }
        }
        if (!bool) break;
    }
}

public static void main(String... args) throws Exception {
    Random r = new Random(1);
    int SIZE = 30;
    int N = 1000;
    int[] arr = new int[SIZE];
    int[] millisBubble = new int[N];
    int[] millisInsertion = new int[N];
    System.out.println("start");
    //warm up:
    for (int t = 0; t < 100; t++) { 
        insertionSort(arr);
    }
    for (int t = 0; t < N; t++) { 
        arr = generateRandom(r, SIZE);
        int[] tempArr = Arrays.copyOf(arr, arr.length);

        long start = System.nanoTime();
        insertionSort(tempArr);
        millisInsertion[t] = (int)(System.nanoTime()-start);

        tempArr = Arrays.copyOf(arr, arr.length);

        start = System.nanoTime();
        bubbleSort(tempArr);
        millisBubble[t] = (int)(System.nanoTime()-start);
    }
    int sum1 = 0;
    for (int x : millisBubble) {
        System.out.println(x);
        sum1 += x;
    }
    System.out.println("end of bubble. AVG = " + ((double)sum1)/millisBubble.length);
    int sum2 = 0;
    for (int x : millisInsertion) {
        System.out.println(x);
        sum2 += x;
    }
    System.out.println("end of insertion. AVG = " + ((double)sum2)/millisInsertion.length);
    System.out.println("bubble took " + ((double)sum1)/millisBubble.length + " while insertion took " + ((double)sum2)/millisBubble.length);
}

private static int[] generateRandom(Random r, int size) {
    int[] arr = new int[size];
    for (int i = 0 ; i < size; i++) 
        arr[i] = r.nextInt(size);
    return arr;
} 
```

* * *

**编辑：**
（1）优化冒泡排序（上面更新）将冒泡排序的总时间减少到：6043.806 不足以做出重大改变。Wilcoxon 检验仍然是结论性的：插入排序更快。

(2) 我还添加了一个选择排序测试（附加代码）并将其与插入进行比较。结果是：选择花费了 4748.35，而插入花费了 3540.114。
wilcoxon 的 P_VALUE 仍低于数值误差范围（实际上 ~=0）

使用的选择排序代码：

```
public static void selectionSort(int[] arr) {
    for (int i = 0; i < arr.length ; i++) { 
        int min = arr[i];
        int minElm = i;
        for (int j = i+1; j < arr.length ; j++) { 
            if (arr[j] < min) { 
                min = arr[j];
                minElm = j;
            }
        }
        swap(arr,i,minElm);
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-27T14:00:20.343

**编辑：**正如 IVlad 在评论中指出的那样，选择排序对任何数据集只进行 n 次交换（因此只有 3n 次写入），因此插入排序不太可能因为交换次数较少而击败它——但它可能会大幅比较少。下面的推理更适合与冒泡排序的比较，冒泡排序将进行相似数量的比较，但平均会有更多的交换（因此更多的写入）。

* * *

插入排序往往比冒泡排序和选择排序等其他 O(n^2) 算法更快的一个原因是，在后一种算法中，*每一个数据移动都需要一个 swap*，它可能是内存的 3 倍如果交换的另一端需要稍后再次交换，则根据需要进行复制。

使用插入排序OTOH，如果要插入的下一个元素还不是最大元素，则可以将其保存到一个临时位置，并通过从右侧开始并使用单个数据副本（即没有交换）将所有较低的元素向前分流. 这为放置原始元素打开了一个空白。

不使用交换的插入排序整数的 C 代码：

```
void insertion_sort(int *v, int n) {
    int i = 1;
    while (i < n) {
        int temp = v[i];         // Save the current element here
        int j = i;

        // Shunt everything forwards
        while (j > 0 && v[j - 1] > temp) {
            v[j] = v[j - 1];     // Look ma, no swaps!  :)
            --j;
        }

        v[j] = temp;
        ++i;
    }
} 
```

# javascript - 调整大小或方向更改后调用或取消调用功能

> ID：12622016
> 
> 赞同：0
> 
> 时间：2012-09-27T13:01:13.067
> 
> 标签：javascript, mobile

我正在开发一个移动网络项目，该项目根据屏幕大小在两列或单列视图之间进行。对于某些设备尺寸，从纵向更改为横向会在单列和双列之间切换。页面底部有三个并排的特征图像，用于两列视图，但我们希望变成单列中的内容滑块。

我的问题：
当屏幕宽度低于某个宽度时，我调用的 javascript 条件函数。但是，如果您更改屏幕的方向/大小，它不会调用该功能或​​重新评估屏幕宽度。

我有的：

```
if( $(window).width() < 570) { 
    $(window).load(function() { 
        $('.flexslider').flexslider(); 
    }); 
} 
```

在调整大小事件之后观察调整大小和调用/调用函数的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:07:39.057

在窗口上使用 jQuery 调整大小事件。[jsfiddle](http://jsfiddle.net/YZzKy/1/)

```
$(window).resize(function(){
 //your code

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:58:52.320

按照 Shusl 所说的，你需要在 $(window).resize(); 中创建函数。

我要做的是创建函数并确保也触发它。所以它会像 -

```
$(window)resize(function() {

    winWidth = $(window).width();
    winHeight = $(window).height();

    if (winWidth < 570) {

       $(window).load(function() { $('.flexslider').flexslider(); });

    }
   else {
      // do something else
   } 

   }).trigger("resize"); 
```

# ssl - 在 Mule (CXF) 中使用 https/ssl Web 服务

> ID：12622017
> 
> 赞同：1
> 
> 时间：2012-09-27T13:01:14.703
> 
> 标签：ssl, https, cxf, mule

我在 MULE 3.3.0 CE 中通过 https/ssl 使用 .NET Web 服务时遇到了这个问题。我希望有人有一个好主意来解决这个问题。这在 Mule 之外运行良好，使用 CXF 库 (2.5.1) 和相同的 JRE (7) Mule 使用。然后我想 Mule 还使用我安装了信任证书的 jre 密钥库。

我已经用 wsdl2java 生成了代理类。该服务使用 Web 服务安全用户名令牌，配置文件 1.1。服务和服务器不在我的控制范围内（这是一项公共服务）。

我知道我不使用 mule 出站传输连接到服务。我只是想从 java 类内部创建和使用服务。尝试过其他骡子配置，但没有运气。

这是我的骡子配置：

```
<flow name="flow1" >
        <http:inbound-endpoint exchange-pattern="request-response" address="http://localhost:8080/server" doc:name="HTTP endpoint"/>
        <jersey:resources doc:name="ServerResources RESTful service">
            <component class="my.code.ServerResourceImpl"/>
        </jersey:resources>
</flow> 
```

Innside ServerResourceImpl 类我这样做：

```
service = new xWebService();
port = service.getBasicHttpBindingBalanseWebService();

Map<String, Object> reqContext = ((BindingProvider)port).getRequestContext();
            reqContext.put("ws-security.username", "username");
            reqContext.put("ws-security.password", "password");

String s = port.test(); 
```

我可以成功创建服务，但是我对测试方法的调用失败并出现以下错误： `javax.xml.ws.soap.SOAPFaultException: An error occurred when verifying security for the message`

非常感谢任何有用的提示或想法。谢谢

# javascript - 阻止 Firefox 重新加载确认

> ID：12622019
> 
> 赞同：17
> 
> 时间：2012-09-27T13:01:19.680
> 
> 标签：javascript, firefox, google-chrome, reload, onbeforeunload

我在可编辑的表格中显示某些记录。用户在编辑记录时尝试重新加载表时，会弹出一个警告该记录有关未保存数据的记录。

```
function cancelProcess()
{
    if(noEditedRecords !=0)//number of edited records in the table
    {
        var processConfirmation = confirm("You've Edited "+ noEditedRecords +" Records. Are You sure to undo the Changes made?");

        if (processConfirmation ==true){
            window.onbeforeunload = null;
            window.location.reload();
        }
    }
} 
```

当他单击“确定”重新加载页面时，Firefox 提示为

> 要显示此页面，Firefox 必须发送将重复之前执行的任何操作（例如搜索或订单确认）的信息。

并且在 Chrome 中打开同一页面时，不会出现这样的提示。

我试图通过设置来避免这种情况`window.onbeforeunload = null;`，但提示窗口仍然出现在那里。

我也尝试通过更改 Firefox 配置：

`browser.sessionstore.postdata`

*按照 Mozilla 支持页面中的建议*将 0 更改为 1 。**

 *但没有任何效果..如何防止提示？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-08-19T18:58:26.377

使用

```
window.location=window.location; 
```

代替

```
location.reload(); 
```

为我工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-04T12:06:20.367

我解决了这个问题，并仅以**GET**而不是**POST**发送数据，

它不适合所有需求，但它有效....

我也在使用**location.reload();**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-10-20T16:07:10.530

使用 Firefox 82 (mac) 我发现（运气好）正确的参数可以改变：

将 **dom.confirm_repost.testing.always_accept**设置 为 true

确认请求窗口将消失。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-24T07:40:58.763

```
window.opener.location.href = window.opener.location; 
```

我在[这里找到了决定](http://www.codeproject.com/Tips/55968/Reload-page-for-refresh-data-without-retry-cancel)

（在 Firefox 32 和 Chrome 38 上测试成功。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-13T13:48:29.593

行为是正确的。根据 w3schools reload 有一个默认为 false 的参数**forceGet**，因此如果您有 POST 提交，浏览器将尝试重新发送该 POST 数据，因此需要您的确认。Firefox 做到了这一点，谷歌浏览器的行为就像它对**forceGet的默认值为 true**

[http://www.w3schools.com/jsref/met_loc_reload.asp](http://www.w3schools.com/jsref/met_loc_reload.asp)

虽然`window.location=window.location`或`window.location=window.location.href`（或任何其他变体）在大多数情况下都有效，但当您使用[http://www.google.com#test](http://www.google.com#test)之类的锚 URL 时，此方法不会刷新。当您已经在 google.com 上并通过添加#test 更改 url 时，浏览器将执行完全相同的操作。浏览器只会尝试在名称为 test 的页面中找到锚标记，然后向下滚动到它，而不刷新浏览器。

在这种情况下以及我遇到的任何其他情况下有效的解决方案是`window.location.reload(true);`

希望这可以帮助，

亚历山德鲁·科索伊

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T04:31:39.663

避免该提示的方法是不要创建用户尝试重新加载 POST 结果页面的情况。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-20T23:19:50.680

尝试这个。

```
setTimeout (function () {
    window.location.reload();
},0); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-02T19:37:47.010

该解决方案对我有用：

-> 将 POST 请求转换为 GET 请求。

-> location.reload() 到 window.location=window.location*

# css - 左右溢出？

> ID：12622022
> 
> 赞同：0
> 
> 时间：2012-09-27T13:01:24.107
> 
> 标签：css, overflow

我听说过`overflow-x`，`overflow-y`但还没有听说过任何你可以在左边或右边控制它的东西。

**编辑：**我要做的是确保内容右侧没有溢出，但我希望左侧允许溢出，因为我有一个应用了 CSS 框阴影的图像，除非我显示它才显示溢出。

有没有类似的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:06:04.590

没有像控制溢出左/右或滚动条的位置（纯css）这样的事情。唯一的事情是，将文本方向从滚动条的位置切换到也会发生变化`LTR`。`RTL`

编辑：澄清你的问题后：你不能只在一侧隐藏溢出，而不能在另一侧隐藏。我目前看到的唯一简单的解决方法是调整父容器的宽度（例如，通过向左添加一些填充）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:03:58.307

我想您是在问是否有办法使用 CSS 将滚动条放在左侧。如果是这样，不，没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:12:16.997

你能再具体说明一下这个问题吗？
`overflow-x`如果这是您的要求，将为左侧和右侧设置溢出。`

编辑：在编辑你的问题之后，我明白你想要做什么。对容器 div 应用更大的左侧边距如何？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-28T17:35:11.670

在我的情况下，我有一个标题图像，其中嵌入了需要在所有屏幕尺寸下都可见的图像中的文本，这意味着该`overflow: hidden`属性需要同时出现在图像的左侧和右侧（默认情况下，它只隐藏随着屏幕变小，图像的右侧）

我最终做的是将图像设置为`position: absolute`，然后我使用媒体查询将图像定位到左侧负数像素（像这样）：

```
@media screen and (max-width: 899px) { 
    left: -90px;
} 
```

# javascript - array.splice 不工作

> ID：12622023
> 
> 赞同：2
> 
> 时间：2012-09-27T13:01:26.507
> 
> 标签：javascript, jquery, html, textarea

我想删除数组元素，但在使用拼接时出错，

我使用 myAra 作为全局变量的以下函数，但在控制台中，它给了我一个错误，TypeError: myAra.splice is not a function

```
var myAra = Array();
function charCounts(e,textAreaId)
{
    myAra = $("#"+textAreaId).val();
    var countNewLines = stringOccurrences(myAra, "\n");

    if(myAra.length>75)
    {
        for (var i = 75; i >myAra.length; i++) 
        {
            myAra.splice(i, 1);

        }

        $("#"+textAreaId).val(myAra);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:03:03.720

`myAra`是 a `String`，而不是a `Array`，当你打电话时`splice`。它具有元素的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:06:12.573

这是一个很好的例子，说明了为什么全局变量是*EVIL*，确定你将变量声明为数组（很糟糕）：（`var myAra = Array()`我将在最后解释这有什么不好），但稍后：

```
myAra = $("#"+textAreaId).val();//returns a string, variable is now a string, not an array 
```

您已将字符串重新分配给数组，因此该变量现在引用字符串常量，并且不能用作数组（不安全，至少在 X 浏览器中）。

`Array()`不好，为什么？好吧，对于初学者来说，您正在调用构造函数，但您没有使用`new`关键字。数组不是什么大问题（它同样会返回一个新实例），但是当您开始定义自己的对象和构造函数时，您会发现自己在全局变量中处于劣势。
另外，假设您想要一个数组并将第一个元素初始化为 int: `var anArray = new Array(2);`，您将不会得到如下所示的数组：`anArray[0] === 2`，您将得到`anArray === [undefined,undefined]`. 将其与`var anArray('2')`--> ['2'] 进行比较。鉴于 JS 是松散类型的，并且您在初始化数组时经常会使用变量，因此很难判断您是否将数字字符串或数字传递给构造函数。
初始化数组的最佳方法是使用文字符号：`[2,3,4]`，作为额外的好处，它也需要更少的打字

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T13:25:07.657

替换以下内容：

```
if(myAra.length>75)
{
    for (var i = 75; i >myAra.length; i++) 
    {
        myAra.splice(i, 1);

    }

    $("#"+textAreaId).val(myAra);
} 
```

使用以下代码：

```
if(myAra.length>75)
{
    var moreNum = myAra.length - 75;
    myAra.splice(75, moreNum ); // remove all items after the 75th item

    $("#"+textAreaId).val(myAra);
} 
```

**注意**-`splice`更改实际数组，这就是循环失败的原因。希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T13:06:04.293

您正在将字符串值直接分配给 myAra，以便它将其转换为字符串 ..typeOf myAra。使用 myAra[0]=$("#"+textAreaId).val();...因为 javascript 是一种松散耦合的语言

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T13:08:06.933

在您使用的第一行中`var myAra = Array()`，但 jQuery`val()`函数返回一个字符串。

编辑：另外我认为在 JS 中创建数组的首选方法是`var myArray = []`, 而不是使用`var myArray = new Array()`表达式。

# android - onclick 按钮在列表视图中不起作用

> ID：12622028
> 
> 赞同：1
> 
> 时间：2012-09-27T13:01:43.893
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我的项目包含**listView(homelistView)**，其中包含**button(btnList)**。

当我单击**按钮（btnList）**时，它必须转到另一个活动。我尝试了很多，但我没有找到一个很好的例子。

请给我一个很好的例子。

下面是我的代码：

这是我的列表视图包含按钮。单击按钮时，它必须转到其他活动

```
 --------------------------------A--
  text  text      button(btnList) B
  --------------------------------C---
  text  text      BUTTON(btnList) D
  --------------------------------E-- 
```

homempleb.xml

在我在 xml 中使用此代码之前。根据以下代码，按钮列表对我来说很好

```
 <ListView              
            android:id="@+id/homelistView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1.04"
            android:dividerHeight="0dip" >

      </ListView> 

  EfficientAdapter.java

public EfficientAdapter(Context context) {
        mInflater = LayoutInflater.from(context);
this.context=context;
    }

     In your ViewHolder class you need to add `Button btnList.`

holder.btnList.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent next=new Intent(context, SeviceDetails.class);
                context.startActivity(next);
            }
        }); 
```

homempleb.xml

目前我在我的列表视图中添加了滚动索引并更改了代码如下.. Listbutton 现在对我不起作用.. 请帮助我你可以在 EfficientAdapter.JAVA-----> getview 方法中查看快速参考的代码-- ->持有人.btnList。

```
 <com.woozzu.android.widget.IndexableListView

            android:id="@+id/homelistView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1.04"
            android:dividerHeight="0dip" >
    </com.woozzu.android.widget.IndexableListView> 
```

MainActivity.java

```
 public class MainActivity extends Activity implements
    SearchView.OnQueryTextListener, SearchView.OnCloseListener {

private ListView listView;
// private IndexableListView listView;
private SearchView search;
EfficientAdapter objectAdapter;
// EfficientAdapter2 objectAdapter1;
int textlength = 0;
private CheckBox checkStat, checkRoutine, checkTat;
private ArrayList<Patient> patientListArray;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.homempleb);
    Log.i("scan", " txtScanResult ");

    ActionItem nextItem = new ActionItem();
    final QuickAction quickAction = new QuickAction(this,
            QuickAction.VERTICAL);
    quickAction.addActionItem(nextItem);
    quickAction.setOnDismissListener(new QuickAction.OnDismissListener() {
        @Override
        public void onDismiss() {
            Toast.makeText(getApplicationContext(), "Dismissed",
                    Toast.LENGTH_SHORT).show();
        }
    });

    search = (SearchView) findViewById(R.id.searchView1);
    search.setIconifiedByDefault(false);
    search.setOnQueryTextListener(this);
    search.setOnCloseListener(this);
    search.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            quickAction.show(v);
        }
    });
    checkStat = (CheckBox) findViewById(R.id.checkBoxStat);
    checkRoutine = (CheckBox) findViewById(R.id.checkBoxRoutine);
    checkTat = (CheckBox) findViewById(R.id.checkBoxTat);
    checkStat.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            if (((CheckBox) v).isChecked()) {
                checkStat.setChecked(true);
                Toast.makeText(MainActivity.this, "STAT",
                        Toast.LENGTH_SHORT).show();
                checkRoutine.setChecked(false);
                checkTat.setChecked(false);
            }
        }
    });
    checkRoutine.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            if (((CheckBox) v).isChecked()) {
                checkRoutine.setChecked(true);
                Toast.makeText(MainActivity.this, "ROUTINE",
                        Toast.LENGTH_SHORT).show();
                checkStat.setChecked(false);
                checkTat.setChecked(false);
            }
        }
    });
    checkTat.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            if (((CheckBox) v).isChecked()) {
                checkTat.setChecked(true);
                Toast.makeText(MainActivity.this, "TAT Effeciency",
                        Toast.LENGTH_SHORT).show();
                checkRoutine.setChecked(false);
                checkStat.setChecked(false);
            }
        }
    });

    // listView = (IndexableListView) findViewById(R.id.homelistView);
    listView = (ListView) findViewById(R.id.homelistView);
    listView.setTextFilterEnabled(true);
    listView.setFastScrollEnabled(true);
    listView.setFastScrollAlwaysVisible(true);
    objectAdapter = new EfficientAdapter(this);
    listView.setAdapter(objectAdapter);

    Button refreshButton = (Button) findViewById(R.id.refreshButton);
    refreshButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // objectAdapter1 = new EfficientAdapter2(MainActivity.this);
            objectAdapter = new EfficientAdapter(MainActivity.this);// adapter
                                                                    // with
                                                                    // new
                                                                    // data
            listView.setAdapter(objectAdapter);

            Log.i("notifyDataSetChanged", "data updated");
            // objectAdapter1.notifyDataSetChanged();
            objectAdapter.notifyDataSetChanged();

        }
    });

}

@Override
public boolean onClose() {
    return false;
}

@Override
public boolean onQueryTextChange(String newText) {
    return false;
}

@Override
public boolean onQueryTextSubmit(String query) {
    return false;
} 
```

}

高效适配器.JAVA

```
 public class EfficientAdapter extends BaseAdapter implements SectionIndexer {

private String mSections = "#ABCDEFGHIJKLMNOPQRSTUVWXYZ";
ArrayList<Patient> patientListArray;

private LayoutInflater mInflater;
private Context context;
        ViewHolder holder;
public EfficientAdapter(Context context) {
    mInflater = LayoutInflater.from(context);
    this.context = context;

    String patientListJson = CountriesList.jsonData;
    JSONObject jssson;
    try {
        jssson = new JSONObject(patientListJson);
        patientListJson = jssson.getString("PostPatientDetailResult");
    } catch (JSONException e) {
        e.printStackTrace();
    }
    Gson gson = new Gson();
    JsonParser parser = new JsonParser();
    JsonArray Jarray = parser.parse(patientListJson).getAsJsonArray();
    patientListArray = new ArrayList<Patient>();
    for (JsonElement obj : Jarray) {
        Patient patientList = gson.fromJson(obj, Patient.class);
        patientListArray.add(patientList);
        Log.i("patientList", patientListJson);

    }
}

/**
 * sorting the patientListArray data
 */
public void sortMyData() {
    // sorting the patientListArray data
    Collections.sort(patientListArray, new Comparator<Object>() {
        @Override
        public int compare(Object o1, Object o2) {
            Patient p1 = (Patient) o1;
            Patient p2 = (Patient) o2;
            return p1.getName().compareToIgnoreCase(p2.getName());
        }

    });
}

public int getCount() {

    return patientListArray.size();
}

public Object getItem(int position) {

    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {

    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.homemplebrowview, null);
        holder = new ViewHolder();
        holder.text1 = (TextView) convertView.findViewById(R.id.name);
        holder.text2 = (TextView) convertView.findViewById(R.id.mrn);
        holder.text3 = (TextView) convertView.findViewById(R.id.date);
        holder.text4 = (TextView) convertView.findViewById(R.id.age);
        holder.text5 = (TextView) convertView.findViewById(R.id.gender);
        holder.text6 = (TextView) convertView.findViewById(R.id.wardno);
        holder.text7 = (TextView) convertView.findViewById(R.id.roomno);
        holder.text8 = (TextView) convertView.findViewById(R.id.bedno);
        holder.btnList = (Button) convertView.findViewById(R.id.listbutton);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.text1.setText(Util.formatN2H(patientListArray.get(position)
            .getName()));
    holder.text2.setText(patientListArray.get(position).getMrnNumber());
    holder.text3.setText(Util.formatN2H(patientListArray.get(position)
            .getRoom()));
    holder.text4.setText(Util.formatN2H(patientListArray.get(position)
            .getAge()));
    holder.text5.setText(Util.formatN2H(patientListArray.get(position)
            .getGender()));
    holder.text6.setText(Util.formatN2H(patientListArray.get(position)
            .getWard()));
    holder.text7.setText(Util.formatN2H(patientListArray.get(position)
            .getRoom()));
    holder.text8.setText(Util.formatN2H(patientListArray.get(position)
            .getBed()));
            holder.btnList.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {                   
                Toast.makeText(context, "STAT", Toast.LENGTH_SHORT).show();
                Intent next = new Intent(context, Home.class);
                Log.i("next23", "next");
                context.startActivity(next);
            }
        });

    return convertView;
}

static class ViewHolder {
    public Button btnList;
    public TextView text8;
    public TextView text7;
    public TextView text6;
    public TextView text5;
    public TextView text4;
    public TextView text1;
    public TextView text2;
    public TextView text3;
}

@Override
public void notifyDataSetChanged() {
    super.notifyDataSetChanged();
}

public int getPositionForSection(int section) {
    // sorting the patientListArray data
    sortMyData();
    // If there is no item for current section, previous section will be
    // selected
    for (int i = section; i >= 0; i--) {
        for (int j = 0; j < getCount(); j++) {
            if (i == 0) {
                // For numeric section
                for (int k = 0; k <= 9; k++) {
                    if (StringMatcher.match(
                            String.valueOf(patientListArray.get(j)
                                    .getName().charAt(0)),
                            String.valueOf(k)))
                        return j;
                }
            } else {
                if (StringMatcher.match(
                        String.valueOf(patientListArray.get(j).getName()
                                .charAt(0)),
                        String.valueOf(mSections.charAt(i))))
                    return j;
            }
        }
    }
    return 0;
}

public int getSectionForPosition(int position) {
    return 0;
}

public Object[] getSections() {
    String[] sections = new String[mSections.length()];
    for (int i = 0; i < mSections.length(); i++)
        sections[i] = String.valueOf(mSections.charAt(i));
    return sections;
}

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-23T21:09:56.313

问题出在 onInterceptTouchEvent 方法中。您正在使用[woozzu](https://github.com/woozzu/IndexableListView/blob/master/src/com/woozzu/android/widget/IndexableListView.java)中的 IndexableListView，并且此类覆盖 onInterceptTouchEvent 以返回 true。这意味着 IndexableListView 总是从您孩子的视图中窃取触摸事件，以便将其提供给[IndexScroller](https://github.com/woozzu/IndexableListView/blob/master/src/com/woozzu/android/widget/IndexScroller.java)。如果您输入以下条件而不是返回 true，则可以更改此行为：

```
@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
    if (mScroller != null && mScroller.contains(ev.getX(), ev.getY()))
        return true;
    return super.onInterceptTouchEvent(ev);
} 
```

这样，只有与 IndexScroller 交互的事件才会被使用。其他事件将传播到孩子的视图，并且您的按钮将是可点击的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T04:59:01.167

在您的高效适配器类`ViewHolder holder`中，在 getView 方法之外声明并按照 MoshErsan 所说的那样做。

也改变你的

```
convertView = mInflater.inflate(R.layout.homemplebrowview, null); 
```

到

```
convertView = mInflater.inflate(R.layout.homemplebrowview, parent,false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:05:32.533

在您的适配器中，只需移动

```
holder.btnList.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {                   
                Toast.makeText(context, "STAT", Toast.LENGTH_SHORT).show();
                Intent next = new Intent(context, Home.class);
                Log.i("next23", "next");
                context.startActivity(next);
            }
        }); 
```

就在`return convertView;` 您需要在每次适配器返回视图时设置侦听器之前。

# mongodb - CloudFoundry 上的 Grail 和 MongoDB

> ID：12622033
> 
> 赞同：0
> 
> 时间：2012-09-27T13:01:55.657
> 
> 标签：mongodb, grails, cloud-foundry

我正在尝试使用eclipse cloudfoundry插件在cloudfoundry上部署一个带有mongodb后端的grails应用程序，问题是在部署之后当我执行一个命中数据库的操作时我得到一个连接被拒绝的异常，任何人都可以帮忙，堆栈跟踪是紧随其后。

```
Sep 27, 2012 12:28:42 PM com.mongodb.DBTCPConnector fetchMaxBsonObjectSize
WARNING: Exception determining maxBSON size using0
java.io.IOException: couldn't connect to [/127.0.0.1:27017] bc:java.net.ConnectException: Connection refused
        at com.mongodb.DBPort._open(DBPort.java:228)
        at com.mongodb.DBPort.go(DBPort.java:112)
        at com.mongodb.DBPort.go(DBPort.java:93)
        at com.mongodb.DBPort.findOne(DBPort.java:146)
        at com.mongodb.DBPort.runCommand(DBPort.java:157)
        at com.mongodb.DBTCPConnector.fetchMaxBsonObjectSize(DBTCPConnector.java:457)
        at com.mongodb.DBTCPConnector.checkMaster(DBTCPConnector.java:444)
        at com.mongodb.DBTCPConnector.call(DBTCPConnector.java:209)
        at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:305)
        at com.mongodb.DB.command(DB.java:160)
        at com.mongodb.DB.command(DB.java:183)
        at com.mongodb.DBCollection.getCount(DBCollection.java:852)
        at com.mongodb.DBCursor.size(DBCursor.java:646)
        at org.grails.datastore.mapping.mongo.query.MongoQuery$36.doInDB(MongoQuery.java:517)
        at org.grails.datastore.mapping.mongo.query.MongoQuery$36.doInDB(MongoQuery.java:479)
        at org.springframework.data.mongodb.core.MongoTemplate.execute(MongoTemplate.java:352)
        at org.grails.datastore.mapping.mongo.query.MongoQuery.executeQuery(MongoQuery.java:479)
        at org.grails.datastore.mapping.query.Query.list(Query.java:486)
        at org.grails.datastore.mapping.query.Query.singleResult(Query.java:517)
        at org.grails.datastore.mapping.query.Query$singleResult.call(Unknown Source)
        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:112)
        at org.grails.datastore.gorm.GormStaticApi$_count_closure13.doCall(GormStaticApi.groovy:332)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
        at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1071)
        at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:901)
        at groovy.lang.Closure.call(Closure.java:415)
        at org.codehaus.groovy.runtime.ConvertedClosure.invokeCustom(ConvertedClosure.java:51)
        at org.codehaus.groovy.runtime.ConversionHandler.invoke(ConversionHandler.java:82)
        at $Proxy22.doInSession(Unknown Source)
        at org.grails.datastore.mapping.core.DatastoreUtils.execute(DatastoreUtils.java:301)
        at org.grails.datastore.mapping.core.DatastoreUtils$execute.call(Unknown Source)
        at org.grails.datastore.gorm.AbstractDatastoreApi.execute(AbstractDatastoreApi.groovy:34)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:231)
        at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:52)
        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
        at org.grails.datastore.gorm.GormStaticApi.count(GormStaticApi.groovy:328)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
        at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1071)
        at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:901)
        at org.codehaus.groovy.runtime.InvokerHelper.invokePogoMethod(InvokerHelper.java:793)
        at org.codehaus.groovy.runtime.InvokerHelper.invokeMethod(InvokerHelper.java:776)
        at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodN(ScriptBytecodeAdapter.java:164)
        at org.grails.datastore.gorm.StaticMethodInvokingClosure.call(GormEnhancer.groovy:285)
        at org.codehaus.groovy.runtime.metaclass.ClosureStaticMetaMethod.invoke(ClosureStaticMetaMethod.java:59)
        at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:148)
        at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.call(StaticMetaMethodSite.java:88)
        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:112)
        at test.BookController.list(BookController.groovy:15)
        at test.BookController.list(BookController.groovy)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.codehaus.groovy.grails.web.servlet.mvc.MixedGrailsControllerHelper.invoke(MixedGrailsControllerHelper.java:69)
        at org.codehaus.groovy.grails.web.servlet.mvc.AbstractGrailsControllerHelper.handleAction(AbstractGrailsControllerHelper.java:331)
        at org.codehaus.groovy.grails.web.servlet.mvc.AbstractGrailsControllerHelper.executeAction(AbstractGrailsControllerHelper.java:212)
        at org.codehaus.groovy.grails.web.servlet.mvc.AbstractGrailsControllerHelper.handleURI(AbstractGrailsControllerHelper.java:178)
        at org.codehaus.groovy.grails.web.servlet.mvc.AbstractGrailsControllerHelper.handleURI(AbstractGrailsControllerHelper.java:117)
        at org.codehaus.groovy.grails.web.servlet.mvc.SimpleGrailsController.handleRequest(SimpleGrailsController.java:72)
        at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
        at org.codehaus.groovy.grails.web.servlet.GrailsDispatcherServlet.doDispatch(GrailsDispatcherServlet.java:323)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
        at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
        at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
        at org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:312)
        at org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:277)
        at org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:268)
        at org.codehaus.groovy.grails.web.mapping.filter.UrlMappingsFilter.doFilterInternal(UrlMappingsFilter.java:209)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.codehaus.groovy.grails.web.sitemesh.GrailsPageFilter.obtainContent(GrailsPageFilter.java:200)
        at org.codehaus.groovy.grails.web.sitemesh.GrailsPageFilter.doFilter(GrailsPageFilter.java:151)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:112)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
        at org.codehaus.groovy.grails.plugins.springsecurity.RequestHolderAuthenticationFilter.doFilter(RequestHolderAuthenticationFilter.java:40)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.codehaus.groovy.grails.plugins.springsecurity.MutableLogoutFilter.doFilter(MutableLogoutFilter.java:79)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.codehaus.groovy.grails.web.servlet.mvc.GrailsWebRequestFilter.doFilterInternal(GrailsWebRequestFilter.java:69)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.codehaus.groovy.grails.web.filters.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:69)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:18:28.323

使用[http://grails.org/plugin/cloud-foundry](http://grails.org/plugin/cloud-foundry)插件。它根据当前绑定的 Cloud Foundry 服务处理重新配置 MongoDB（以及 JDBC、Redis 或 RabbitMQ）配置。

# java - DOMParsing (Antisamy) 的哪种编码

> ID：12622036
> 
> 赞同：1
> 
> 时间：2012-09-27T13:02:01.723
> 
> 标签：java, encoding, character-encoding, antisamy

我正在将 antisamy 用于一个新项目，以防止 xss 漏洞。在应用程序中，用户可以通过简单的（ansi 编码）excel 文件上传内容。应该可以插入一些 html 但不能插入 javascript 等等。

当我用 antisamy 扫描我的输入时，我得到了这个错误： a 标签包含一个我们无法处理的属性。href 属性的值为“https 8; 7; 7;bla 6;bla 6;com 7;bla 7;...”。出于安全原因，无法接受此值。我们选择过滤 a 标签以继续处理输入。

我在实体中添加了一些空格，您可以看到它。

（但它应该像[https://bla.bla.com/bla/](https://bla.bla.com/bla/) ...）

当我通过代码调试时，“受污染的 Html 输入”及其 href 属性似乎是正确的（因此 excel 文件的编码没有问题）。

antisamy-policy 文件如下所示：

```
...
<regexp name="onsiteURL" value="([\w\\/\.\?=&amp;;#-~]+|#(\w)+)"/>
<regexp name="offsiteURL" value="(\s)*((ht|f)tp(s?)://|mailto:)[A-Za-z0-9]+[~a-zA-Z0-9-_\.@#$%&amp;;:,\?=/\+!]*(\s)*"/>
...
<attribute name="href">
  <regexp-list>
    <regexp name="onsiteURL"/>
    <regexp name="offsiteURL"/>
  </regexp-list>
  <literal-list>
    <literal value="javascript:void(0)"/>
  </literal-list>
</attribute>
... 
```

我还测试了正则表达式模式，因为我认为链接是有效的。当然不是，当它由 html 实体编码时。

所以有什么问题？

非常感谢提前

* * *

我通过 AntiSamy 代码进行了一些调试，现在我看到了问题，但我仍然无法解决问题。*htmlentities 是在验证后*由 antisamy 添加的（如果我将它打印在 HTML 页面上..）。但是我的输入将由 AntiSamy 库中的 org.cyberneko.html.parsers.DOMFragmentParser 使用以下语句解析： parser.parse(new InputSource(new StringReader(html)), dom); 在我的 a 标签中， href 属性现在包含如下内容： https://bla.bla.com/bla?frame=Frameset[undefinable character]lang=en insted of [https://bla.bla.com/bla?frame =框架集&lang=zh](https://bla.bla.com/bla?frame=Frameset&lang=en)

所以这似乎是一个编码问题，＆符号将不再是＆符号。如何找出我应该使用哪种编码？

编辑：字符是 E2 8C A9 -> ⟨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T06:45:05.863

我通过将“&”替换为“&”做了一些解决方法。我不知道为什么，但它有效。这是唯一不能正常工作的角色。

# python - 在 Python 中通过 ZeroMQ 发送原始字节

> ID：12622038
> 
> 赞同：6
> 
> 时间：2012-09-27T13:02:11.193
> 
> 标签：python, sockets, tcp, zeromq

我正在将一些使用原始 TCP 套接字的 Python 代码移植到 ZeroMQ，以获得更好的稳定性和更简洁的界面。

马上，我可以看到一个原始字节包没有按我的预期发送。

在原始套接字中：

```
import socket
sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
sock.connect((HOST, PORT))
sock.send('\x00\x01\x02 and some more raw bytes') 
```

这是当前的工作代码。这是使用 ZeroMQ 的相同代码：

```
import zmq
context = zmq.Context()
sock = context.socket(zmq.REQ)  # this connection utilizes REQ/REP
sock.connect('tcp://{0}:{1}'.format(HOST, PORT))
sock.send('\x00\x01\x02 and some more raw bytes') 
```

但是当我检查通过网络传输的数据包时，它们绝对不是我所期望的。我在这里想念什么？

此外，在使用虚拟服务器在环回接口 ( ) 上测试此代码时，`127.0.0.1`它似乎工作得很好。

如果重要，请使用 Python 2.7（unicode 或其他）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T13:50:07.023

哦。哇。我在测试中忽略了一个重大缺陷，我正在测试的远程服务器期望的是原始 TCP 连接，而不是 ZMQ 连接。

当然，ZMQ 无法传输消息，甚至没有成功协商连接。当我在本地测试时，我正在使用虚拟 ZMQ 服务器进行测试，所以它运行良好。

如果我已经发布了服务器代码，那么这就是问题所在。

无论如何，对于虚惊一场，我们深表歉意。

# php - PHP 库：app_key 错误

> ID：12622039
> 
> 赞同：0
> 
> 时间：2012-09-27T13:02:16.157
> 
> 标签：php, oauth, eventbrite

当我尝试使用 oAuth PHP 示例脚本 (oauth2-login-example.php) 登录时出现此错误

```
Please provide your Application Key in the URL as "?app_key=". 
```

我已经用我的代码替换了默认`app_key`值`client_secret`。

你可以在这里测试它：[http ://www.daysofthedead.net/hub/examples/oauth2-login-example.php](http://www.daysofthedead.net/hub/examples/oauth2-login-example.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:54:23.710

您需要从 Eventbrite 为您的帐户申请一个 API 密钥。只需前往[https://www.eventbrite.com/api/key](https://www.eventbrite.com/api/key)并创建一个。然后用 Eventbrite 提供的值替换“YOUR_APP_KEY”和“YOUR_CLIENT_SECRET”。

```
$login_widget_html = Eventbrite::loginWidget(array( 'app_key' => 'YOUR_APP_KEY',
                                                    'client_secret' => 'YOUR_CLIENT_SECRET')); 
```

# android - 开始意图 package_removed

> ID：12622045
> 
> 赞同：1
> 
> 时间：2012-09-27T13:02:34.527
> 
> 标签：android, android-intent, uninstallation

我有这个代码来检查应用程序卸载：

```
 public void onReceive(Context context, Intent intent){
    final String action = intent.getAction();
        if("android.intent.action.PACKAGE_REMOVED".equals(action)){
        // some action
    } 
```

现在我想从已卸载的应用程序中获取启动意图。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:21:14.990

参考以下网址：

*   [在android中执行卸载任务](https://stackoverflow.com/questions/3013823/perform-a-task-on-uninstall-in-android)
*   [如何在我的应用程序被卸载之前显示活动（Android）](https://stackoverflow.com/questions/10219328/how-to-show-an-activity-before-my-app-is-uninstalled-android)

Janusz 的帖子在这里很有帮助。

> 遗憾的是，Android 目前无法让您在卸载应用程序时执行代码。
> 
> 通过 SharedPreferences 设置的所有设置连同 Aplication Data an Cache 文件夹中的所有内容都将被删除。
> 
> 唯一会保留的是写入 SD 卡的数据以及对手机设置所做的任何更改。我不知道通过您的应用程序同步到联系人的数据会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:27:18.707

我想发现这一点的唯一方法是测试它。您可以使用以下代码来查找应用程序的启动意图：

```
final Intent launchIntent = pm.getLaunchIntentForPackage(packageName); 
```

其中 pm - 是 PackageManager。

在我看来，这是不可能的，你会收到 launchIntent 等于`null`. 但是你应该自己检查一下。

# jquery-mobile - jquery mobile提交按钮的双重显示

> ID：12622046
> 
> 赞同：2
> 
> 时间：2012-09-27T13:02:34.903
> 
> 标签：jquery-mobile

我需要帮助来纠正我的一些 jQuery 提交按钮上的以下问题。单个提交按钮显示两个按钮，一个在另一个之上。

[![双提交按钮](../Images/9433b77eecff4cb80685571512b37d0b.png)](https://i.stack.imgur.com/GrTZ8.png)
[（来源：[nyumbanipap.com](http://nyumbanipap.com/nyumbanipap/images/double_submit.png)）]

任何帮助将不胜感激。

html:

```
<input type="submit" name="confirmpayment" value="Confirm Payment" data-theme="a" /> 
```

它是表单上的普通提交按钮。

**编辑**

我注意到从非 ajax 页面返回时会发生这种情况。例如，我正在使用 PayPal，当我从 Paypal 重定向回来时，当按钮被双重显示时。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T22:32:15.087

我只是有同样的问题。结果我两次包含了jquery mobile js文件。也许这对某人有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-08T00:59:37.500

我在使用 jQuery mobile 的 rails 应用程序中遇到了同样的问题（我也不*总是*使用 AJAX）。添加`data-role="none"`到表单上的提交标签对我有用。

```
<input type="submit" value="Next Question" class="ui-btn ui-state-disabled btn" data-role="none"> 
```

转到底部阅读：http: [//demos.jquerymobile.com/1.0/docs/forms/docs-forms.html](http://demos.jquerymobile.com/1.0/docs/forms/docs-forms.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-30T04:38:11.237

我知道这是旧的，但不要使用标签。它应该看起来像这样

<p><a href="#whatever you are named your form or submit area" DATA-ROLE="button">提交</a></p>

# php - 为什么 IE 用户代理字符串在表单 POST 上变化如此之大？

> ID：12622051
> 
> 赞同：3
> 
> 时间：2012-09-27T13:02:47.940
> 
> 标签：php, user-agent, google-chrome-frame

我正在运行一个投票系统。会话密钥部分是使用浏览器用户代理字符串的哈希生成的。一些用户由于奇怪的用户代理字符串更改而遇到错误，如下面的页面跟踪所示。

在每个页面加载开始时，在 PHP 中的以下庄园中检测到用户代理。

```
function useragent()
{
    static $user_agent = null;
    if($user_agent === null)
    {
        $user_agent = getenv('HTTP_USER_AGENT');
        if(empty($user_agent) === true)
        {
            $user_agent = $_SERVER['HTTP_USER_AGENT'];
        } 
    }
    return $user_agent;
} 
```

页面操作跟踪如下。

```
[2012-09-27 13:20:50] => Array
(
   [uri] => /start
   [ua] => Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0; Sky Broadband; DS_desktopsmiley; GTB7.4; chromeframe/21.0.1180.89; SLCC1; .NET CLR 2.0.50727; Media Center PC 5.0; .NET CLR 3.5.30729; .NET CLR 3.0.30618; playbrytetoolbar_playbryte; AskTB5.6; 789905664603; lib/6.02324)
)

[2012-09-27 13:20:50] => Array
(
   [uri] => /nominees
   [ua] => Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0; Sky Broadband; DS_desktopsmiley; GTB7.4; chromeframe/21.0.1180.89; SLCC1; .NET CLR 2.0.50727; Media Center PC 5.0; .NET CLR 3.5.30729; .NET CLR 3.0.30618; playbrytetoolbar_playbryte; AskTB5.6; 789905664603; lib/6.02324)
)

[2012-09-27 13:21:10] => Array
(
   [uri] => /nominees-save
   [post] => Array
       (
           [category] => talent_show
           [talent_show] => 5
       )
   [ua] => Mozilla/5.0 (Windows NT 6.0; chromeframe/21.0.1180.89) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1
)
[2012-09-27 13:21:10] => Array
(
   [uri] => /vote-error
   [ua] => Mozilla/5.0 (Windows NT 6.0; chromeframe/21.0.1180.89) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1
)

[2012-09-27 13:21:16] => Array
(
   [uri] => /vote-start
   [ua] => Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0; Sky Broadband; DS_desktopsmiley; GTB7.4; chromeframe/21.0.1180.89; SLCC1; .NET CLR 2.0.50727; Media Center PC 5.0; .NET CLR 3.5.30729; .NET CLR 3.0.30618; playbrytetoolbar_playbryte; AskTB5.6; 789905664603; lib/6.02324)
) 
```

我注意到三件事。1）这个人安装了大量的工具栏。2) Chromeframe 已安装。3) MSIE 存在于普通页面上，但不存在于 POST 请求和后续请求中。

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

被添加到 HTML 并返回标题。chromeframe是这里的责任方吗？如果是这样，为什么 chromeframe 会像这样劫持 POST 请求标头？如果不是 chromeframe，为什么会有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:18:16.787

用户代理字符串不应该被依赖于任何重要的事情。这是一个可以经常更改并被代理等其他系统更改的值。

您的会话密钥只能生成一次并通过 cookie 共享。因此，单个用户的用户代理的更改无论如何都应该没有影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:22:48.203

我的猜测肯定是 ChromeFrame。用户代理字符串被它扩充的原因可能有很多。以下是我可以猜到的一些*（这些都取决于 ChromeFrame 可能仅在它认为需要时介入的事实）*：

1.  ChromeFrame - 启用时 - 不知道或无法访问原始浏览器用户代理字符串，因此生成它自己的。

2.  它可以帮助开发服务器端。

3.  ChromeFrame 是一个完全不同的用户代理，因此很容易认为它应该以不同的方式向服务器端报告。（尤其是从 Mozilla 4.0 更改为 5.0）

[http://www.chromium.org/developers/how-tos/chrome-frame-getting-started#TOC-Detecting-Google-Chrome-Frame-and-Prompting-to-Install](http://www.chromium.org/developers/how-tos/chrome-frame-getting-started#TOC-Detecting-Google-Chrome-Frame-and-Prompting-to-Install)

基本上用户代理字符串是不可靠的。你应该找到其他方法。

# android - Android ListView TouchListener 在滚动时调用

> ID：12622052
> 
> 赞同：1
> 
> 时间：2012-09-27T13:02:48.793
> 
> 标签：android, listview, scroll, ontouchlistener

在我的项目中，我有一个每个视图`ListView`都有一个`touchListener`in`getView`方法`adapter`。

我的问题是`touchListener`当我滚动列表时激活。

当用户滚动列表时，我如何**禁用**触摸，关于侦听器设置在`getView()`方法上？

谢谢

更新：列表适配器的代码如下所示：

```
 package com.example;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;
import android.widget.Toast;

import java.util.ArrayList;

public class MyCustomAdapter extends BaseAdapter {
    private ArrayList<String> mListItems;
    private LayoutInflater mLayoutInflater;
    private Context context;

    public MyCustomAdapter(Context context, ArrayList<String> arrayList){

        mListItems = arrayList;

        //get the layout inflater
        mLayoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        this.context = context;
    }

    @Override
    public int getCount() {
        //getCount() represents how many items are in the list
        return mListItems.size();
    }

    @Override
    //get the data of an item from a specific position
    //i represents the position of the item in the list
    public Object getItem(int i) {
        return null;
    }

    @Override
    //get the position id of the item from the list
    public long getItemId(int i) {
        return 0;
    }

    @Override

    public View getView(int position, View view, ViewGroup viewGroup) {

        //check to see if the reused view is null or not, if is not null then reuse it
        if (view == null) {
            view = mLayoutInflater.inflate(R.layout.list_item, null);
        }

        view.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View view, MotionEvent event) {
                Toast.makeText(context, "ON TOUCH ACTIVATED", 0).show();
                return true;
            }
        });

        //get the string item from the position "position" from array list to put it on the TextView
        String stringItem = mListItems.get(position);
        if (stringItem != null) {

            TextView itemName = (TextView) view.findViewById(R.id.list_item_text_view);

            if (itemName != null) {
                //set the item name on the TextView
                itemName.setText(stringItem);
            }
        }

        //this method must return the view corresponding to the data at the specified position.
        return view;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T06:11:44.233

毕竟，我已经解决了我的问题，通过添加声明 ListView 的 xml 布局`android:descendantFocusability="blocksDescendants"`并且它现在正在工作。

# jquery - jQuery - 手风琴（去折叠）

> ID：12622069
> 
> 赞同：1
> 
> 时间：2012-09-27T13:03:48.163
> 
> 标签：jquery, html, jquery-ui, accordion, jquery-ui-accordion

好吧，这个问题是我[**之前的问题**](https://stackoverflow.com/questions/12621550/accordion-dont-want-to-make-first-cell-active)的下一个版本。

由于我的所有链接都已折叠，我想创建一个按钮或链接说“全部显示”，单击它将使所有链接在手风琴中处于活动状态，即我想查看所有链接的数据。还需要创建一个按钮或链接，上面写着“全部隐藏”，这将使折叠状态如前所述。

折叠状态

```
+++++++++++++++++++++++++++++++++++++++
+   Link 1                            +
+   Link 2                            +
+   Link 3                            +
+   Link 4                            +
+++++++++++++++++++++++++++++++++++++++ 
```

单击“显示全部”后应该得到

```
+++++++++++++++++++++++++++++++++++++++
+   Link 1                            +
+     Link 1 line 1                   +
+     Link 1 line 2                   +
+     Link 1 line 3                   +
+   Link 2                            +
+     Link 2 line 1                   +
+     Link 2 line 2                   +
+     Link 2 line 3                   +
+   Link 3                            +
+     Link 3 line 1                   +
+     Link 3 line 2                   +
+   Link 4                            +
+     Link 4 line 1                   +
+     Link 4 line 2                   +
+++++++++++++++++++++++++++++++++++++++ 
```

这该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:52:47.967

作为***黑客***（*最后的手段*），你可以使用

```
// highlight headers
$("#accordion001").find('h3.ui-accordion-header')
                  .removeClass('ui-state-default')
                  .addClass('ui-state-active');

//open content panels
$("#accordion001").find('div.ui-accordion-content')
                  .addClass('ui-accordion-content-active')
                  .show(); 
```

但是您还需要处理关闭（*撤消我们所做*的操作），因为当前代码与默认行为相混淆..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:24:00.693

这是您展开和折叠所有内容面板的解决方案。

```
function expandAll() {
    $('#accordion h3').removeClass('ui-state-default')
        .addClass('ui-state-active')
        .removeClass('ui-corner-all')
        .addClass('ui-corner-top')
        .attr('aria-expanded', 'true')
        .attr('aria-selected', 'true')
        .attr('tabIndex', 0)
    .find('span.ui-icon')
        .removeClass('ui-icon-triangle-1-e')
        .addClass('ui-icon-triangle-1-s')
    .closest('h3').next('div')
        .show();

    $('.expand').text('collapse all').unbind('click').bind('click', collapseAll);

    $('#accordion h3').bind('click.collapse', function() {
        collapseAll();
        $(this).click();
    });
}

function collapseAll() {
    $('#accordion h3').unbind('click.collapse');

    $('#accordion h3').removeClass('ui-state-active')
            .addClass('ui-state-default')
            .removeClass('ui-corner-top')
            .addClass('ui-corner-all')
            .attr('aria-expanded', 'false')
            .attr('aria-selected', 'false')
            .attr('tabIndex', -1)
        .find('span.ui-icon')
            .removeClass('ui-icon-triangle-1-s')
            .addClass('ui-icon-triangle-1-e')
        .closest('h3').next('div')
            .hide();

    $('.expand').text('expand all').unbind('click').bind('click', expandAll);

    $('#accordion').accordion('destroy').accordion();
} 
```

和小提琴

[http://jsfiddle.net/wa9Dz/1/](http://jsfiddle.net/wa9Dz/1/)

# android - 保护apk

> ID：12622078
> 
> 赞同：0
> 
> 时间：2012-09-27T13:04:15.890
> 
> 标签：android, apk, protection

我已经开发了一个应用程序并创建了 apk。现在我想避免该应用程序的盗版意味着如果我在我的设备上安装了 apk 并且如果我试图在另一台设备上安装相同的 apk 那么它不应该被安装另一个设备。有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:11:48.117

好吧，您正在寻找的是个性化的 APK，这意味着您必须为每个设备构建一次 APK，并且您需要将 APK 只能安装在一个设备上的逻辑；为此，您可以在 APK 中提供一个 NUMBER，安装后您可以调用 Web 服务将该 NUMBER 存储在云数据库中。

每次安装后，您需要做两件事...

使用 Web 服务查询数据库，如果是，则特定数字已经存储在云上，然后设置一个标志，该标志永远不允许用户再次查看应用程序数据......

如果现在发现将其存储在服务器上。

这只是**您需要思考的逻辑为什么您需要为每个设备提供唯一的 APK？**

如果您不想使用 Web 服务和云数据库，您可以使用 GetDeviceId() 它返回唯一的设备 ID，例如，GSM 的 IMEI 和 CDMA 手机的 MEID。如果设备 ID 不可用，则返回 null。

因此，在您的 APK 中，您需要检查 IF XYZ == GetDeviceId() Result 然后允许用户访问 APPS；否则写您无权查看此消息的消息。

为此，您需要在向您的用户询问他们的 DeviceID() 后构建 APK

# asp.net-mvc-3 - Asp.Net MVC3 为页面上传新徽标

> ID：12622079
> 
> 赞同：1
> 
> 时间：2012-09-27T13:04:15.823
> 
> 标签：asp.net-mvc-3, image, redirect, file-upload

在我正在处理的应用程序中，我需要能够从设置页面上传网站的新徽标。截至目前，代码替换了磁盘上的徽标文件，但`redirect`相同的设置页面仍显示旧图像。虽然刷新页面后我得到了正确的图像。

我想`Redirect`加载新图像。我为 ImageHeaders 设置了这些值：

```
 response.Cache.SetCacheability(HttpCacheability.Public);
    response.Cache.SetExpires(Cache.NoAbsoluteExpiration);
    response.Cache.SetLastModified(File.GetLastWriteTime(FileName)); 
```

是否有某种“更强”`redirect`或其他方式使这成为可能？

# javascript - 在我的 HTML 文件中定义 jQuery 原型的顺序是否重要？

> ID：12622085
> 
> 赞同：0
> 
> 时间：2012-09-27T13:04:47.740
> 
> 标签：javascript, jquery

我在一个文件中有以下内容：

```
<script type="text/javascript">

function refreshGridSetup() {

    $.extend($.fn.dataTableExt.oStdClasses, {
        sWrapper: 'no-margin last-child'
    });

</script> 
```

然后在此之后我有：

```
<script src="/Scripts/admin/jquery.dataTables.js"></script> 
```

我是否正确地说第一个代码是扩展数据表的原型？

在定义数据表的代码之前有这个可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:09:20.183

不，因为`$.fn.dataTableExt.oStdClasses`还不存在。您必须首先包含 dataTables 脚本，因为 jQuery 原型在运行之前不会被扩展。

通过在 dataTables 创建它的命名空间之前运行您的代码，您将收到如下错误：

> 未捕获的类型错误：无法读取未定义的属性“oStdClasses”

**编辑**：对不起，我没有注意到这个`refreshGridSetup`功能（我猜缺少的右花括号只是问题中的一个错字？）。如果在包含 dataTables*之后*才调用该函数，则不会有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:09:12.037

在上述情况下没关系，因为在页面加载时，定义的函数没有调用。我们需要在调用某个事件时加载原型或函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T13:18:01.990

```
 $.extend($.fn.dataTableExt.oStdClasses, {
        sWrapper: 'no-margin last-child'
    }); 
```

上面的代码在您调用时执行，`refreshGridSetup`因此您的代码很好。`refreshGridSetup`但是一旦加载了所需的所有资源，您就应该调用。

但是您忘记关闭函数 refreshGridSetup 的主体。你的代码应该是

```
<script type="text/javascript">

function refreshGridSetup() {

    $.extend($.fn.dataTableExt.oStdClasses, {
        sWrapper: 'no-margin last-child'
    });
}// missing
</script> 
```

# php - 如何从同一个表中引用多个查找？

> ID：12622093
> 
> 赞同：1
> 
> 时间：2012-09-27T13:05:04.143
> 
> 标签：php, mysql, sql, join, alias

这是我的第一篇文章，但我在这里阅读了很多年，并从中获得了很多重要信息。

请耐心等待我试图解释我的困境。我什至不确定如何给我的问题贴上标签，因为我真的不知道我正在尝试做什么的术语。我是 PHP/MySQL 的初学者（当您看到我的问题时，这将变得非常明显），但我渴望学习。

无论如何，这里是：

我有两个表，名为`Games`和`Teams`。

```
mysql> describe games;

+-----------+---------------+------+-----+---------+----------------+
| Field     | Type          | Null | Key | Default | Extra          |
+-----------+---------------+------+-----+---------+----------------+
| id        | int(11)       | NO   | PRI | NULL    | auto_increment |
| homeTeam  | int(11)       | NO   |     | NULL    |                |
| awayTeam  | int(11)       | NO   |     | NULL    |                |
| homeScore | int(11)       | NO   |     | NULL    |                |
| awayScore | int(11)       | NO   |     | NULL    |                |
| homeOdds  | decimal(10,2) | NO   |     | NULL    |                |
| drawOdds  | decimal(10,2) | NO   |     | NULL    |                |
| awayOdds  | decimal(10,2) | NO   |     | NULL    |                |
| gameDate  | date          | NO   |     | NULL    |                |
+-----------+---------------+------+-----+---------+----------------+ 
```

和

```
mysql> describe teams;

+-------+--------------+------+-----+---------+----------------+
| Field | Type         | Null | Key | Default | Extra          |
+-------+--------------+------+-----+---------+----------------+
| id    | int(11)      | NO   | PRI | NULL    | auto_increment |
| team  | varchar(255) | NO   |     | NULL    |                |
+-------+--------------+------+-----+---------+----------------+ 
```

我想要这些字段`Games.homeTeam`并在和字段`Games.awayTeam`中查找它们的值。基本上应该在. 很简单。但是，我希望两者都在同一个 SQL 语句中查看表。`Teams.id``Teams.team``Games.homeTeam``Teams.id``Games.homeTeam``Games.awayTeam``Teams`

我想也许这样的事情会起作用：

```
$result = mysql_query("SELECT * FROM Games g, Teams ht, Teams at where g.homeTeam = ht.id AND g.awayTeam = at.id ORDER BY g.gameDate") or die(mysql_error()); 
```

然后拿起行：

```
while($row = mysql_fetch_array($result)) { echo "Home Team: " . $row['ht.team'];} 
```

那是不行的，因为我收到一个 mysql 错误，说没有名为`ht.team`.

我希望我在这里想要达到的目标相当清楚。我该怎么办？我假设我必须使用某种别名，但我无法理解 SQL 语句应该是什么样子才能完成我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:08:41.367

不要`SELECT *`与连接查询一起使用！始终明确说明列表中需要的`SELECT`列，并提供列别名：

```
SELECT 
  /* Only select the columns you actually need, and 
   * supply aliases to those with similar names
   */
  ht.team AS ht_team,
  ht.id AS ht_id,
  at.team AS at_team,
  at.id AS at_id
  g.homeScore,
  g.awayScore,
  g.homeOdds,
  g.drawOdds,
  g.awayOdds,
  g.gameDate
FROM 
  Games g, 
  Teams ht, 
  Teams at 
where g.homeTeam = ht.id AND g.awayTeam = at.id 
ORDER BY g.gameDate 
```

在您的 PHP 中，通过它们的别名访问它们，例如：

```
echo "Home Team: {$row['ht_team']}"; 
```

顺便说一句，虽然您的隐式（逗号分隔的表和`WHERE`子句中的条件）连接方法会起作用，但通常建议使用显式连接。它是一种较新的语法，可以在需要时更容易`LEFT JOIN`扩展`RIGHT JOIN`：

```
SELECT 
  ht.team AS ht_team,
  ht.id AS ht_id,
  at.team AS at_team,
  at.id AS at_id
  g.homeScore,
  g.awayScore,
  g.homeOdds,
  g.drawOdds,
  g.awayOdds,
  g.gameDate
FROM 
  /* Explicit JOIN syntax */
  Games g, 
  JOIN Teams ht ON g.homeTeam = ht.id 
  JOIN Teams at ON g.awayTeam = at.id 
ORDER BY g.gameDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:09:21.880

我认为问题是你只给表格一个别名，而不是列
如果在 Games 表格中没有名为 team 的列，你可以在循环中调用它

$row['团队'];

但是，如果两个表都具有与团队相同的名称列，那么您应该这样做。 `select ht.team as htTeam , g.team as gTeam` 来自 Teams ht inner join Games on ht.Id = .....

然后你可以达到每个团队任期

```
$row['htTeam']
and $row['gTeam']; 
```

我认为习惯于决定表及其列的前缀

# iphone - MFMailComposer 地方谢谢，附件图片后的文字

> ID：12622095
> 
> 赞同：0
> 
> 时间：2012-09-27T13:05:08.547
> 
> 标签：iphone, objective-c, ios, cocoa-touch, mfmailcomposeviewcontroller

嗨，我正在使用 MFMailComposer 在我的应用程序中发送邮件，我在其中附加了图像，并且在正文中存在 html 内容，最后我添加了谢谢，问候消息到邮件，但所有的文本内容，包括谢谢，问候即将到来作为一组，然后是我的图像附件，然后从我的 iPhone 发送的签名文本即将到来。我想感谢，关于从我的 iPhone 签名文本发送之前的文本，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:19:49.210

我已经使用**Matt Gallagher**的 NSData+Base64 将图像转换为 base64，所以在你的项目中添加：

首先像这样创建emailBody：

```
NSMutableString *emailBody = [[NSMutableString alloc] initWithString:@"<html><body>"] ;

[emailBody appendString:@"<p>Check Attachment</p>"];
UIImage *emailImage = [UIImage imageNamed:@"myImageName.png"];
 //Convert the image into data
NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation(emailImage)];
 //Create a base64 string representation of the data using NSData+Base64
NSString *base64String = [imageData base64EncodedString];
 //Add the encoded string to the emailBody string
 //Don't forget the "<b>" tags are required, the "<p>" tags are optional
[emailBody appendString:[NSString stringWithFormat:@"<p><b><img src='data:image/png;base64,%@'></b></p>",base64String]];
 //You could repeat here with more text or images, otherwise
[emailBody appendString:[NSString stringWithFormat:@"<p><b>%@</b></p>",yourString]];// yourString after image here
 //close the HTML formatting
[emailBody appendString:@"</body></html>"]; 
```

像这样使用

```
 [MFMailDialog setMessageBody:emailBody isHTML:YES]; 
```

归功于[这个](https://stackoverflow.com/questions/1527351/how-to-add-an-uiimage-in-mailcomposer-sheet-of-mfmailcomposeviewcontroller-in-ip/2461451#2461451)答案。

# jquery - Access-Control-Allow-Origin 不允许来源 http://example.com

> ID：12622104
> 
> 赞同：1
> 
> 时间：2012-09-27T13:05:50.753
> 
> 标签：jquery, asp.net, ajax

我正在尝试从给定的ajax调用中调用webservice方法。我的 Web 服务托管在同一个应用程序中。

```
$.ajax({
    type: "POST",
    url: "http://1.1.1.1/demo/sblead.asmx/SBLeadsSave",
    data: "{'whenNeeded':'" + whenNeeded + "','howLong': '" + howLong + "','size': '" + Size + "','customerName': '" + name + "','mobile': '" + mobile + "','email': '" + email + "','comments': '" + comments + "','nextContract': '','unitLocation': '" + unitLocation + "'}",
    contentType: "application/json; charset=utf-8",

    dataType: "jsonp",
    callback: '?',
    crossDomain: true,

    success: function (response) {
        // debugger;
        var res = response.d;
        if (res == "True") {
            location.href = "http://1.1.1.1/SBleadSuccess.htm";
        } else {
            alert('Data Saving failed please try again');
        }
    },
    failure: function (result) {
        alert(result.status + ' ' + result.statusText);
    },
    beforeSend: setHeader 
```

Web 服务方法没有被调用，当我使用 Chrome 开发人员工具看到它时 --> 网络我可以看到响应为 Origin [http://www.example.com](http://www.example.com)是 Access-Control-Allow-Origin 不允许的。

它在测试服务器中工作，但不在生产服务器中。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:10:04.410

您需要在响应标头中允许您的生产服务器：

```
Access-Control-Allow-Origin: <production origin> | * 
```

您可以在 MDN 上查看更多信息[：HTTP 访问控制 (CORS)](https://developer.mozilla.org/en-US/docs/HTTP_access_control#Access-Control-Allow-Origin)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:10:51.707

这是因为您正在调用`http://1.1.1.1/demo/sblead.asmx/SBLeadsSave`，但这不是您的生产服务器位置。

放置您的生产服务器位置，或者只是`/demo/sblead.asmx/SBLeadsSave`.

# c# - 从类型中获取 ValueType

> ID：12622106
> 
> 赞同：0
> 
> 时间：2012-09-27T13:05:56.363
> 
> 标签：c#

我的代码：

```
Type type = GetType(long?); 
```

或者

```
Type type = typeof(long?); 
```

给定“类型”，我怎样才能得到字符串“long”？背部？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T13:09:09.480

你无法得到它是用什么写的。它只是一种语言速记。

`ToString()`应该产生“System.Nullable`1[System.Int64]”

如果你需要它作为一个字符串，你可以建立一个字典。

```
var types = new Dictionary<Type, string>(); 
types.Add(typeof(long?), "long?"); 
```

但是，您无法检测到这一点。

```
types.Add(typeof(System.Nullable<long>), "System.Nullable<long>"); 
```

自从`typeof(long?) == typeof(System.Nullable<long>)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:08:20.930

你试过这个吗

```
Type type = typeof(long?);
Console.WriteLine(type.FullName); 
```

但是你不会得到字符串 Long 因为每个原始类型都有别名。并且这些别名不会出现在类型系统上。

您应该为此语句获取 System.Nullable`1[System.Int64]。您必须自定义代码以获得正确的输出字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:10:32.890

您可以使用 Type 的 Name 属性，但这不会返回“long?”。long 是 System.Int64 类型的语言语法糖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T13:10:35.187

您想询问类型的泛型参数，例如：

```
typeof(long?).GetGenericArguments().First().Name 
```

但是，这将返回系统类型名称，而不是 c# 名称。

即，`Int64`不`long`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T13:11:28.010

这是不可能的。

`Type type = typeof(long?);`

只是与`ValueType`.

`System.ValueType`源自`System.Object`，而不是`System.Type`。

`long?`只是一种奇特的写作方式，`System.Nullable<long>`因此它的 type is not `long?`，如果你想得到它是哪种类型，那么你必须自己解析它。

如果您想从类型中获取`System.Nullable<T>`类型，`T`则此代码将起作用：

```
Type t = typeof(long?);
t = t.FullName.StartsWith("System.Nullable") ? t.GenericTypeArguments[0] : t;
// t == typeof(long); 
```

# python - 使用下面的代码，我收到错误 AttributeError: 'str' object has no attribute 'items' ，

> ID：12622116
> 
> 赞同：0
> 
> 时间：2012-09-27T13:06:17.853
> 
> 标签：python, django

```
import json
import simplejson
import urllib2

data = urllib2.urlopen('www.example.com/url/where/i/get/json/data').read()

j = ""
j = simplejson.loads(data)

dump_data=simplejson.dumps(j)

for data in j["facets"]:
    print data.items()
    print "\n----------------\n" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T13:09:04.783

错误消息说明了一切。显然`j["facets"]`是一个可迭代的，它至少包含一些字符串，而不是包含一些其他具有`items`方法的数据类型。（也许你期待一个字典）？

尝试打印`j["facets"]`以查看您实际到达那里的内容。然后你可能会弄清楚为什么你得到一个字符串而不是预期的对象（`dict`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:12:02.050

标题包含答案

`j["facets"]`可能是字符串项的列表

# java - Java Regex 不适用于特殊字符

> ID：12622123
> 
> 赞同：0
> 
> 时间：2012-09-27T13:06:39.210
> 
> 标签：java, regex

我的解析器有问题。我想阅读网站上的图片链接，这通常可以正常工作。但是今天我得到了一个包含特殊字符的链接，并且通常的正则表达式不起作用。

这就是我的代码的样子。

```
Pattern t = Pattern.compile(regex.trim());

Matcher x = t.matcher(content[i].toString());
if(x.find())
{
    values[i] = x.group(1);
} 
```

这是html的一部分，会引起麻烦

```
<div class="open-zoomview zoomlink" itemscope="" itemtype="http://schema.org/Product"> 
<img class="zoomLink productImage" src="

http://tnm.scene7.com/is/image/TNM/template_335x300?$plus_335x300$&amp;$image=is{TNM/1098845000_prod_001}&amp;$ausverkauft=1&amp;$0prozent=1&amp;$versandkostenfrei=0" alt="Produkt Atika HB 60 Benzin-Heckenschere" title="Produkt Atika HB 60 Benzin-Heckenschere" itemprop="image" /> 
</div> 
```

这是我用来获取 src 属性中的部分的正则表达式：

```
<img .*src="(.*?)" .*> 
```

我相信它与链接中的所有特殊字符有关。但我不确定如何逃脱所有这些。我已经试过了

```
Pattern.quote(content[i].toString()) 
```

但结果是一样的：什么也没找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:19:32.117

该`.`字符通常只匹配*除*换行符之外的所有内容。因此，如果 img-tag 中有换行符，您的模式将不匹配。

使用`Pattern.compile(..., Pattern.DOTALL)`或在您的模式前添加`(?s)`.

> 在 dotall 模式下，表达式 . 匹配任何字符，包括行终止符。默认情况下，此表达式不匹配行终止符。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html#DOTALL](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html#DOTALL)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:14:44.330

您实际上应该使用`<img\\s\\.*?\\bsrc=["'](\\.*?)["']\\.*?>`with`(?s)`修饰符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:21:21.493

你的正则表达式应该是这样的：

```
String regex = "<img .*src=\"(.*?)\" .*>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T13:22:24.600

这可能是由标签中的换行引起的。这 。字符不会匹配它。

您是否考虑过不使用正则表达式来解析 HTML？使用正则表达式进行 HTML 解析是出了名的脆弱结构。请考虑为此使用解析库，例如 JSoup。

# android - 如何使用调试日志在 Facebook API 中查找 Android 应用程序签名

> ID：12622129
> 
> 赞同：0
> 
> 时间：2012-09-27T13:07:08.590
> 
> 标签：android, facebook, single-sign-on

我一直在关注[https://developers.facebook.com/docs/mobile/android/build/#sig](https://developers.facebook.com/docs/mobile/android/build/#sig)上的 Facebook API 指南，在第 5 步中它说

有两种方法可以找到您的 Android 应用程序签名：

1) 来自签名不匹配时在单点登录期间生成的调试日志。

2) 从 Java JDK 密钥工具。

如何使用调试日志找到它？正如他们所说，我已经启用了日志，使用`private static boolean ENABLE_LOG = true;`. 我想知道这一点，因为我试图在第 2 步之后得到它，但[没有成功](https://stackoverflow.com/questions/12620601/facebook-sso-doesnt-work-on-android-device)。我在日志中找不到任何可以告诉我正确密钥哈希的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:22:44.553

设置私有静态布尔值后 ENABLE_LOG = true; 运行单点登录，如果您根本没有在错误日志中找到密钥，则将这行代码添加到下面提到的回调函数之一中

```
 onFacebookError(FacebookError error)
          {

                  System.out.println(error);

          } 
```

现在运行它检查错误日志，您将能够找到密钥。

# mysql - mySQL $REQUEST 默认值

> ID：12622130
> 
> 赞同：0
> 
> 时间：2012-09-27T13:07:09.703
> 
> 标签：mysql, html

mySQL NOOB 问题：

表有一个列 = AgeGroup。它填充了以下数据选项：U40、40-44、45-49、50-54、55-59、60+。

我有一个表单，允许用户选择他们希望查看的“性别”和“年龄组”。然后使用“SELECT”SQL 查询的“WHERE”子句。它使用以下格式：

```
FROM 
   #__test1
WHERE
   EventName = '2011EoSummer' AND
   Gender = {$REQUEST:Gender};
   if(isset($_REQUEST['Age'])) AND AgeGroup = {$_REQUEST['Age']} 
```

在表格中，有一个选项可以通过“Overall”获取所有年龄，但 AgeGroup 列中没有名为“Overall”的数据。总体上应该默认为所有年龄组，但我不知道这将如何在 SQL 查询中读取。

示例 1 URL：/&Gender=Men&AgeGroup=U40 => 将在 'U40' 'Men' 中显示数据

示例 2 URL：/&Gender=Men&Age=Overall => 将显示所有年龄数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:49:21.653

如果我没看错，当您选择“整体”时，您想返回所有年龄段（以免受到任何年龄段的限制）？

如果是这样，您需要删除 SQL 语句中的 AgeGroup 子句。

```
<?PHP

$sql = "SELECT * FROM tbl WHERE Gender = {$_REQUEST['gender']}";

if(isset($_REQUEST['age']))
{      
  $sql.= " AND AgeGroup = {$_REQUEST['age']}"
}

?> 
```

这将默认为整体，因此您可能需要适当地更改逻辑，希望我得到您想要的，如果不忽略它！

另外作为旁注 $_REQUEST 不是最好的使用，如果您使用表单作为动作收集器将其设置为发布并使用 $_POST 代替，如果您不能使用 $_GET 将数据从 url 中提取出来而不是要求。

编辑：在括号中添加以使其更易于阅读。

# iphone - 将 UITabBarController 添加到窗口 iOS 6 时崩溃

> ID：12622131
> 
> 赞同：0
> 
> 时间：2012-09-27T13:07:11.713
> 
> 标签：iphone, objective-c, xcode, ios6

应用程序运行良好，直到我将 XCode 更新到 4.5 版和 iOS 6 SDK。

应用程序因以下输出而崩溃：

```
*** Terminating app due to uncaught exception 'UIViewControllerHierarchyInconsistency',    reason: 'A view can only be associated with at most one view controller at a time! View   <UIView: 0xad397b0; frame = (0 20; 320 460); autoresize = W+H; layer = <CALayer: 0xad39810>> is associated with <UIViewController: 0xad39940>. Clear this association before associating this view with <RootViewController: 0x9e62f00>.'
*** First throw call stack:
(0xda012 0x1ea7e7e 0xd9deb 0xbc9309 0xc605ac 0xc5ca90 0x1661e8e 0x16619b7 0x168c428     0xd980cc 0x1ebb663 0xd545a 0xd96bcf 0xc5be37 0xc5c418 0xc5c648 0xc5c882 0xc5cb2a 0xc73ef5   0xc73fdb 0xc74286 0xc74381 0xc74eab 0xc74fc9 0xc75055 0xd7a3ab 0xbcb92d 0x1ebb6b0 0x405fc0   0x3fa33c 0x3fa150 0x3780bc 0x379227 0x41bb50 0xb9152f 0xa2afe 0xa2a3d 0x807c2 0x7ff44 0x7fe1b 0x2bef7e3 0x2bef668 0xb7b65c 0x2a6b 0x29d1)
libc++abi.dylib: terminate called throwing an exception 
```

应用程序正在添加到窗口登录视图，然后是带有以下代码的标签栏视图：

```
/* LOGIN VIEW ADD */

[window addSubview:[loginVC view]];
[window makeKeyAndVisible];

/* LOGIN VIEW REMOVE AND ADD TAB BAR CONTROLLER */

[loginVC.view removeFromSuperview];
[window addSubview:[tabBarController view]];
[window makeKeyAndVisible]; 
```

应用程序在删除和添加后崩溃。

苹果在 iOS 6 上做了什么？为什么这会崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:42:41.583

您不再应该在主窗口中将视图添加为子视图。现在，正确的做法是将您的设置`rootController`为`UIViewController`您想要的，即根目录。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    UIViewController *myViewController = [[UIStoryboard storyboardWithName:@"RandomStoryboard" bundle:nil] instantiateInitialViewController];
    window.rootViewController = myViewController;
    return YES;
} 
```

大多数应用程序都可以通过简单的方式做到这一点。如果您的项目中有一个主故事板（在项目文件中设置），它将自动从该故事板实例化初始视图控制器。

# drupal - Drupal 7：向内容类型添加视图

> ID：12622136
> 
> 赞同：2
> 
> 时间：2012-09-27T13:07:27.077
> 
> 标签：drupal, drupal-7, drupal-views, drupal-theming, drupal-panels

我一直在为特定的内容类型制作模板，但遇到了一个问题：我需要将视图嵌入到内容类型中。

我知道这可以通过几种不同的方法来完成，但我没有看到一种完全符合我需求的方法：

*   我需要为该内容类型的所有页面自动添加视图。
*   在区域中使用块不是一种选择，因为我想避免在页面中间定义一个仅适用于特定内容类型的区域。
*   可翻译的标签。
*   可以自由地将模板应用于内容类型中的所有字段（不包括嵌入视图）。

我尝试通过页面布局（面板）并简单地将节点内容字段和视图添加到我的布局区域，但是我遇到了另一个问题：如果不做一些看起来有点过头的事情，我就无法设置我的内容字段的样式：

目前，我在内容类型中有大约 20 个不同的内容字段，它们用 HTML 包装并在我的模板文件中设置样式。我在模板文件中为每一个都有一个翻译标签。据我所知，我必须为每个包含内容字段的窗格添加一个模板，以添加我翻译的标签和设置每个字段样式所需的 HTML。

我不太喜欢制作 20 个模板、20 个主题挂钩建议以使模板正常工作以及面板布局中的 20 个区域只是为了在内容类型中插入一个视图。

我在这里做错了什么吗？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:17:55.800

您可能想尝试[Viewfield 模块](http://drupal.org/project/viewfield)或类似模块（搜索“view field”或“view reference”）。

如果您正在做一些更复杂的事情，例如根据内容类型中的某些值更改/过滤视图，那么您可能必须将 Viewfield 模块与其他有助于填充过滤器值的东西结合使用。

我以前从未做过这样的事情，所以我不确定哪种模块组合会起作用，但我会想到[规则](http://drupal.org/project/rules)或[计算字段](http://drupal.org/project/computed_field)作为可能的帮助者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T13:07:10.873

您必须使用“视图节点字段” [http://drupal.org/project/viewsnodefield](http://drupal.org/project/viewsnodefield)，安装此模块后，您必须在显示中选择“节点内容”（如块，页面）。然后单击添加显示。如果你想显示这个页面[http://www.richtown.ae/?q=content/arabian-ranches](http://www.richtown.ae/?q=content/arabian-ranches)的内容，那么你必须下载 views_galleriffic 模块并安装它并选择样式选项“Galleriffic Gallery”。您可以使用视图中的过滤器来选择内容类型。

就是这样欢呼

我在我的网站richtown.ae 中实现了这个，如果你仍然不清楚，请给我发邮件 social@richtown.ae 我会回复你并准备帮助你我们可以分享我在 drupal 6 中使用这个模块的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-18T21:06:02.677

除了 Woodgnome 的回答之外，
假设您有一个名为“产品”的内容类型，您想为其附加一个视图。以下是使用[eva](https://www.drupal.org/project/eva)模块的步骤： 在您的视图编辑页面上：

**部分显示**
+Add : Eva 字段

**部分实体内容设置**
实体类型：节点
捆绑：产品

就是这样，转到节点产品类型现在将显示视图

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T09:13:15.847

我求助于使用 EVA 模块（[http://drupal.org/project/eva](http://drupal.org/project/eva)）。

# javascript - `constructor` 属性真正用于什么？

> ID：12622137
> 
> 赞同：5
> 
> 时间：2012-09-27T13:07:29.240
> 
> 标签：javascript, constructor, prototype

在 JavaScript 中，每个函数的原型对象都有一个`constructor`指向函数的不可枚举属性（[EcmaScript §13.2](http://ecma-international.org/ecma-262/5.1/#sec-13.2)）。它不用于任何本机功能（例如`instanceof`仅检查原型链），但是我们[鼓励](https://stackoverflow.com/a/4944389/1048572)在覆盖`prototype`函数的属性以进行继承时对其进行调整：

```
SubClass.prototype = Object.create(SuperClass.prototype, {
    constructor: {value:SubClass, writable:true, configurable:true}
}); 
```

但是，我们（包括我）这样做只是为了清晰和整洁吗？是否有任何依赖于该[`constructor`属性](https://stackoverflow.com/q/4012998/1048572)的实际用例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T14:17:37.207

我真的不明白为什么该`constructor`属性是 JS 中的属性。我偶尔会发现自己使用它来获取 IE < 9 中的对象原型（如 Event 对象）。但是我确实认为它允许一些人模仿经典的 OO 编程结构：

```
function Foo()
{
    this.name = 'Foo';
}
function Bar()
{
    this.name = 'Bar';
}
function Foobar(){};
Foo.prototype = new Foobar;
Foo.prototype.constructor = Foo;
Bar.prototype = new Foobar;
Bar.prototype.constructor = Bar;
var foo = new Foo();
var bar = new Bar();
//so far the set-up
function pseudoOverload(obj)
{
    if (!(obj instanceof Foobar))
    {
        throw new Error 'I only take subclasses of Foobar';
    }
    if (obj.constructor.name === 'Foo')
    {
        return new obj.constructor;//reference to constructor is quite handy
    }
    //do stuff with Bar instance
} 
```

所以AFAIK，构造函数属性的*“优点”*是：

*   轻松地从实例实例化新对象
*   能够将您的对象*分组*为某个类的子类，但仍然能够检查您正在处理的特定类型的子类。
*   正如你所说：保持整洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:11:30.003

我理解的构造函数属性用于查看特定对象是否由哪个功能构造函数创建或构造。

这是一个很好的例子： [http ://www.klauskomenda.com/code/javascript-inheritance-by-example/](http://www.klauskomenda.com/code/javascript-inheritance-by-example/)

# php - PHP mysql表创建不起作用

> ID：12622138
> 
> 赞同：-6
> 
> 时间：2012-09-27T13:07:37.603
> 
> 标签：php, mysql, create-table

PHP mysql 表创建不起作用！为什么这段代码不起作用？

```
<?php
$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db('allheight', $con);

$sql = 'CREATE TABLE Posts
(
PostID int NOT NULL AUTO_INCREMENT,
Title varchar(15),
Picture varchar(2000),
Description text,
Height text
)'; 

mysql_query($sql, $con);
mysql_close($con);
?> 
```

这里的问题是代码似乎无法创建表“帖子”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:11:00.230

如果您查看了 MySQL 错误消息，就会很明显：

> 1075 - 不正确的表定义；只能有一个自动列，并且必须将其定义为键

因此，将您的 SQL 更改为

```
CREATE TABLE Posts (
PostID int NOT NULL AUTO_INCREMENT,
Title varchar(15),
Picture varchar(2000),
Description text,
Height text,
PRIMARY KEY(PostId)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:12:01.390

此 sql 查询产生以下错误：

**表定义不正确；只能有一个自动列，并且必须将其定义为键。**

将此添加到查询的末尾：

```
CREATE TABLE Posts
(
PostID int NOT NULL AUTO_INCREMENT,
Title varchar(15),
Picture varchar(2000),
Description text,
Height text,
KEY (PostID)
) 
```

# node.js - Socket.IO + Node.js + SSL

> ID：12622141
> 
> 赞同：2
> 
> 时间：2012-09-27T13:07:39.790
> 
> 标签：node.js, socket.io, ssl

我想使用 Node.js (0.5.11) 和 Socket.IO 进行简单的聊天。我一直在使用纯 HTTP，但我需要启动 SSL。我在 wiki 中生成了密钥和证书：[http ://nodejs.org/api/tls.html#tls_tls_ssl](http://nodejs.org/api/tls.html#tls_tls_ssl)

我使用的代码：

**应用程序.js：**

```
var tls = require('tls');
var fs = require('fs');

var options = {
  key: fs.readFileSync('key.pem'),
  cert: fs.readFileSync('cert.pem'),
};

var server = tls.createServer(options, function(cleartextStream) {
  console.log('server connected',
              cleartextStream.authorized ? 'authorized' : 'unauthorized');
  cleartextStream.write("welcome!\n");
  cleartextStream.setEncoding('utf8');
  cleartextStream.pipe(cleartextStream);
});
server.listen(8000, function() {
  console.log('server bound');
}); 
```

服务器启动良好。当我想在 index.php 上引用 socket.io 时，问题就开始了：

```
<script src="https://localhost:8000/socket.io/socket.io.js"></script> 
```

Firebug 给了我状态 Aborted 并且我不能使用“io”对象，因为它没有加载。我还在 src 属性中尝试了“http://local...”，但没有任何变化。我究竟做错了什么？有人可以给我一个建议或好的教程如何使用 SSL 运行 Socket.IO 吗？

已经感谢您的回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:55:55.237

```
<script src='/socket.io/socket.io.js'></script> 
```

您只需要它，因为它会自动发现，以防万一您在连接到另一个地址时忘记更新端口和地址。

您的服务器中包含 socketio 的位置？这似乎是问题所在

```
var sockio = require("socket.io");
var io = sockio.listen(server); 
```

# sharepoint-2010 - 如何检测 SharePoint 日历项目是否已在 Outlook 中或通过浏览器更改？

> ID：12622147
> 
> 赞同：0
> 
> 时间：2012-09-27T13:07:50.333
> 
> 标签：sharepoint-2010, sharepoint-designer, sharepoint-workflow

我有一个 SharePoint 日历，用户可以连接到该日历并在 Outlook 中查看/编辑。我希望能够创建一个在更改或更新项目时触发的工作流，然后使用 If 语句来确定更改是在 Outlook 中还是通过用户的浏览器进行的。这甚至可能吗？我无法使用基于代码的解决方案（就像我想要的那样），因为我无权使用一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:45:34.400

淘完网后，似乎没有。我以前使用过的唯一方法是创建一个只能在 SharePoint 中编辑的字段和一个包含先前版本的相同表，但它很笨重。工作流可以检测仅 SharePoint 字段相对于另一个表中保存的先前值是否已更改，并根据需要使用它来定向到仅 SharePoint 或仅 Outlook 代码。

# arrays - 从 C# 到 F#：从 F# 调用的外部函数中的固定数组和 Stringbuilder

> ID：12622160
> 
> 赞同：5
> 
> 时间：2012-09-27T13:08:42.670
> 
> 标签：arrays, f#, pinvoke, external, pass-by-reference

我正在尝试从 F# 访问外部 DLL 函数。这个真的让我汗流浃背。

C头文件是：

```
ext_def(int32) swe_calc_ut(double tjd_ut, int32 ipl, int32 iflag, 
double *xx, char *serr); 
```

我相应地在 F# 中导入了它：

```
extern int32 ext_swe_calc_ut(double tjd_ut, int32 ipl, int32 iflag, double *xx, StringBuilder serr); 
```

问题是数组部分。我尝试了 F# Powerpack 中的 PinnedArray，但调用仍然失败。char 数组可能没问题，即使由于调用失败我无法检查。

到目前为止是：

```
open System
open System.Runtime.InteropServices
open System.Text
open Microsoft.FSharp.NativeInterop

#r "FSharp.PowerPack.dll" 
#nowarn "51"

module Sweph =

    [<DllImport(@"swedll32.dll", CharSet = CharSet.Ansi, EntryPoint = "swe_calc_ut")>]
    extern int32 ext_swe_calc_ut(double tjd_ut, int32 ipl, int32 iflag, double *xx, StringBuilder serr);
    /// <param name="jdnr">Julian day</param>
    /// <returns>Array with 6 doubles: 0:longitude, 1:latitude, 2:distance,3:speel in longitude, 
    ///          4: speed in latitude, 5: speed in distance </returns>

let ar: double array = Array.zeroCreate 6
let argx = PinnedArray.of_array ar

printfn "  ar: %A" ar

// This fails with a "FileLoadException"
printfn "ar: %A" argx

// Details of FileLoadException:
(* 
```

“FSharp.Core，版本=2.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a”不匹配程序集（Ausnahme von HRESULT：0x80131040）*）

```
// However, if I leave the printfn for argx out, code continues and does not display this error again.

let sb = new StringBuilder(50)          // Vgl. Expert F#, S. 515

Console.ReadKey(true)

// Application crashes here:
let ret_calc = Sweph.ext_swe_calc_ut(4700.0,1,1,argx.Ptr,sb) 
```

程序此时崩溃（控制台窗口消失，在调试中，它只是跳回第一行。

我知道我可以使用“use”而不是“let”和“let argx = PinnedArray.of_array ar”，但编译器不会让我拥有它，因为顶部有一个模块声明。

在 C# 中有这样的实现：

```
 public static double[] getPlanet(int ipl, double jdnr) {
        //   String ephePath = "Q:\\sweph\\";
        //   Sweph.setEphePath(ephePath);
        double[] xx2 = new double[8];
        double[] xx = new double[6];
        String serr = "";
        int iflag = Constants.SEFLG_SPEED;
        long iflgret = ext_swe_calc_ut(jdnr, ipl, iflag, xx, serr);
        for (int i = 0; i < 6; i++) { 
            xx2[i] = xx[i]; 
        }
        iflag = Constants.SEFLG_SWIEPH | Constants.SEFLG_SPEED | Constants.SEFLG_EQUATORIAL;
        iflgret = ext_swe_calc_ut(jdnr, ipl, iflag, xx, serr);
        xx2[6] = xx[0];
        xx2[7] = xx[1];

        return xx2;
    } 
```

也许整个问题可以追溯到 FileLoad 异常（即使它没有显示在 dll 调用中）——可能是因为 FSharp Powerpack？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T21:56:54.093

这是我的猜测，基于我找到的 C 类型签名和[函数文档](http://www.astro.com/swisseph/swephprg.htm#_Toc335137304)。它可以编译，但你必须告诉我它是否真的有效，因为我没有`swedll32.dll`程序集。此外，我的代码不需要 F# Powerpack 程序集。

编辑：只需阅读@kvb 答案下的评论——他提出了我在代码中包含的相同内容，即`[<MarshalAs(...)>]`具有`SizeConst`属性集的属性。我还添加了`[<Out>]`，因为最后两个参数用作返回值；IIRC，它也会影响编组行为。

编辑 2：根据@wolfgang 的报告，`ExactSpelling = true`从属性中删除了 。`MarshalAs`

```
[<DllImport(@"swedll32.dll",
    CharSet = CharSet.Ansi,
    EntryPoint = "swe_calc_ut")>]
extern int32 swe_calc_ut (
    float tjd_ut,
    int32 ipl,
    int32 flag,
    [<Out; MarshalAs(UnmanagedType.LPArray, SizeConst = 6)>]
    float[] xx,
    [<Out; MarshalAs(UnmanagedType.LPStr, SizeConst = 256)>]
    System.Text.StringBuilder serr)

// Wrapper function for swe_calc_ut
let swe_calc_ut_wrapper (tjd_ut, ipl, flag) =
    let positions = Array.zeroCreate 6
    let errorSB = System.Text.StringBuilder (256)
    let result = swe_calc_ut (tjd_ut, ipl, flag, positions, errorSB)
    if result < 0 then
        // Error
        Choice2Of2 (result, errorSB.ToString ())
    else
        Choice1Of2 positions 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T14:35:57.003

您可能会尝试使用`System.Runtime.Interop`命名空间中的功能，而不是依赖 F# PowerPack。我想你会想尝试类似的东西：

```
let hndl = GCHandle.Alloc(ar, GCHandleType.Pinned)
let ptr : double nativeptr = 
    hndl.AddrOfPinnedObject() 
    |> NativePtr.ofNativeInt

let ret_calc = Sweph.ext_swe_calc_ut(4700.0,1,1,ptr,sb)

hndl.Free() 
```

但是，看起来 C# 代码正在使用不同的互操作签名 - 它`xx`作为 a`double[]`和`serr`a编组`string`（并且看起来它可能返回一个`int64`）。如果该代码有效，您可能只想在 F# 中做同样的事情......

# kohana-2 - 将 kohana 安装到另一个网站

> ID：12622161
> 
> 赞同：1
> 
> 时间：2012-09-27T13:08:45.357
> 
> 标签：kohana-2

我有一个用 kohana 构建的网站和另一个没有任何框架的网站。我想将第一个站点作为应用程序包含在第二个站点中（您只能用它编写报告）。

第一个网站不是我的（我从未使用过 kohana），所以我对所有内容都不太了解。在一个文件夹内（我们称之为 KOHANA）我有 index.php 一个 .htaccess 文件和其他 3 个文件夹：

*   应用，
*   系统，
*   模块。

我已将 kohana 文件夹放在我的网站内（在 public_html 文件夹内），但没有任何效果...首先我遇到了魔术引号错误，然后是日志目录，其他错误...我一直在寻找解决方案并修复错误，但我不断收到其他错误。最后一个是：logs你提交的URI有不允许的字符。这是旧版的Kohana。如何在我的网站中设置 kohana 而不会出现任何新错误。我不知道我是否说清楚了。谢谢你。

# entity-framework - 具有存储库/工作单元的实体框架：导航属性在处理上下文后引发异常

> ID：12622166
> 
> 赞同：0
> 
> 时间：2012-09-27T13:09:02.860
> 
> 标签：entity-framework, repository-pattern, unit-of-work

我将 EF 与存储库模式和工作单元一起使用。我正在用内部对象就业拉一个对象人。以下是类的构造方式：

```
 class Person
    {
       Employment employments;
    }

   class Employment
   {
          int ID {get;set;}
          string Employer {get;set;}
   } 
```

延迟加载已启用。以下是我如何获取 Person 对象：

```
 Person p;
     using (unitOfWork = new UnitOfWork())
     {
        p=unitOfWork.PersonRep.Single(s => s.Id== Id);
     }
   return p; 
```

在此代码之外 p.employments 不可访问。这种架构的最佳实践是什么？为什么导航属性不持久？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:13:19.770

您的导航属性导致错误的原因是您在加载导航属性之前处理了上下文。

如果您考虑正在发生的事情：

*   您正在打开一个数据库连接，并检索一个人员对象。
*   然后，您关闭此连接。
*   接下来，你问那个人反对，你的雇主是谁？它尝试返回您的数据库，但连接不存在并且中断。

您要么需要使用[include](http://msdn.microsoft.com/en-us/library/gg671236%28v=vs.103%29.aspx)急切地为您的人加载 Employer ，从您的上下文来看，这将`context.Persons.Include(p => p.employments)`很难说，因为您没有发布该代码。

或者，让您的数据库连接保持更长时间。访问该人的雇主信息似乎都将在同一个单元中处理，因此也许您应该考虑在整个方法中保持工作单元的活力。

# asp.net - SSIS - 跨多个 SSIS 包共享 .net dll

> ID：12622175
> 
> 赞同：0
> 
> 时间：2012-09-27T13:09:21.990
> 
> 标签：asp.net, .net, dll, ssis, class-library

我创建了一个用于 SSIS 项目的 .Net 库。我们已经使用相同的 dotnet 库创建了许多 SSIS 模板。

有人可以分享 - 我们如何确保如果我们对我们的 DLL 进行更改，然后它会反映到我们创建的所有 SSIS 模板。

意味着集中存储DLL，每个人都可以参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-05T16:43:04.687

确保您对 DLL 进行了严格签名并将其部署到 GAC。然后在您的 SSIS 模板中引用它。

# jquery - 悬停时触发单击选择框

> ID：12622191
> 
> 赞同：8
> 
> 时间：2012-09-27T13:10:31.820
> 
> 标签：jquery, click, hover, mouseover, drop-down-menu

我试图让一个`select`框在用户悬停在它上面时自动弹出，就好像他们点击了它一样。这可能吗？

我想我可以用 jQuery 轻松做到这一点......

```
$("#settings-select").mouseover(
    function(){
        $(this).trigger("click");
    }
); 
```

但这无济于事。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T15:31:48.193

我终于让这个工作了！你需要[被选中](http://harvesthq.github.com/chosen/)；正如其他人所指出的那样，您不能使用正常的方式执行此操作，`select`因为没有可用的事件。但这会在鼠标悬停时弹出菜单并在鼠标悬停时`select`关闭菜单，这正是我想要的效果。

HTML：

```
<select id="dropdown" data-placeholder="Choose&hellip;">
    <option value="one">Option 1</option>
    <option value="two">Option 2</option>
    <option value="three">Option 3</option>
</select> 
```

JS：

```
$("#dropdown").chosen().next(".chzn-container").hover(
    function(){
        $("#dropdown").trigger("liszt:open");
    },
    function(){
        $(this).trigger("click");
    }
); 
```

`$("#dropdown").trigger("liszt:open");`是打开菜单的内容。`liszt:close`当您想关闭它时（据我所知），没有可以触发的等效事件，但是触发`click`它具有相同的效果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-15T18:04:04.650

已经有一段时间了，但有一个我在这里看不到的解决方案，`hover`用于更改 的长度`select`：

```
$('select').hover(function() {

  $(this).attr('size', $('option').length);
}, function() {

  $(this).attr('size', 1);
}); 
```

[http://codepen.io/anon/pen/avdavQ](http://codepen.io/anon/pen/avdavQ)

这是一支笔，它不仅仅是必需品，而且有一些风格：

[演示](http://codepen.io/anon/pen/ojbVya?editors=001)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T13:19:01.853

[trigger](http://api.jquery.com/trigger/)只调用通过 jQuery 的绑定函数之一绑定的函数。

没有跨浏览器的方式可以从 javascript 打开选择（*可能*可以`this.click()`在某些版本的 IE 上调用，但我无法测试，而且我确信在其他浏览器上没有办法）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T13:22:12.630

这是不可能的。您只能实现自己的选择框或[选择](http://harvesthq.github.com/chosen/)插件，但这不利于可用性。也想想`trigger('focus')`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-04T17:22:25.073

不幸的是，选择的方法对我不起作用。

但我认为我可以在 jQuery 上制作自己的选择器。

HTML：

```
<div class='select'>
  <p class='input'>Select option</p>
  <input type='hidden' name='some_name_to_form' />
  <div class='hidden'>
    <p value='id_1' >option long value</p>
    <p value='id_2' >option 2</p>
    <p value='id_3' >option 3</p>
  </div>
</div> 
```

JS：

```
$('.hidden p').click(function(){
  $(this).closest('.select').find('.input').text($(this).text());
  $(this).closest('.select').find('input').val($(this).attr('value'));
  $(this).closest('.select').trigger("change");
});

$('.select').change(function(){
  // ... do stuff
}); 
```

[https://codepen.io/qwer643/pen/LebKpo](https://codepen.io/qwer643/pen/LebKpo)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-19T13:11:32.110

工作示例

```
 $(function(){
    $(".chosen-select").chosen();
        $(".chosen-container-single").hover(function(){
            $(this).addClass("chosen-with-drop");
            $(this).addClass("chosen-container-active");
            $('.chosen-select').trigger("chosen:open");
        },function(){
            $(this).removeClass("chosen-with-drop");
            $(this).removeClass("chosen-container-active");
        });
    }); 
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.4.2/chosen.jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.4.2/chosen.min.css">

<div>
<select data-placeholder="Choose a Country..." class="chosen-select"  style="width:350px;" tabindex="4">
            <option value=""></option>
            <option value="Any">[Any]</option>
            <option value="United States">United States</option>
            <option value="United Kingdom">United Kingdom</option>
            <option value="Afghanistan">Afghanistan</option>
            <option value="Aland Islands">Aland Islands</option>
            <option value="Albania">Albania</option>
            <option value="Algeria">Algeria</option>
            <option value="American Samoa">American Samoa</option>

          </select>    
</div>
```

# objective-c - 如何使用最少的代码从 NSMutableArray 中仅选择不同的项目（删除所有双打）

> ID：12622198
> 
> 赞同：-1
> 
> 时间：2012-09-27T13:10:48.980
> 
> 标签：objective-c, xcode4

我试图将它们更改为 NSSet，然后制作一个可变副本。

```
keyIds = [[[NSSet setWithArray:keyIds] array]mutableCopy]; 
```

结果是这个错误：2012-09-27 19:57:36.465 BadgerNew[81030:1303] -[__NSSetI array]: unrecognized selector sent to instance 0x9f968b0

这是一件如此简单的事情，但我不知道有什么直接的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T13:19:31.713

问题是在名为数组的 NSSet 上没有方法。

将 NSSet 转换为 NSArray 的一种方法是使用 allObjects 方法：

```
keyIds = [[[NSSet setWithArray:keyIds] allObjects] mutableCopy] 
```

但是，您将失去最初使用 keyIds 的所有排序，因为 Set 本质上是没有排序的，因此如果是这种情况，您最好首先将 keyIds 存储为一个集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:22:58.377

试试这个 -

```
NSSet *uniqueItems = [NSSet setWithArray:myArrayWithLotsOfDuplicates];
NSArray *newArrayWithUniqueItems = [NSArray arrayWithArray:[uniqueItems allObjects]]; 
```

它不会有你原来的顺序，但每个项目都是独一无二的......

# android - 如何从非活动类访问活动视图？

> ID：12622211
> 
> 赞同：-4
> 
> 时间：2012-09-27T13:11:27.100
> 
> 标签：android

我正在尝试从非活动类访问视图，但我不知道该怎么做

在查看了其他一些来源后，我知道我必须像这样传递上下文

```
public Manager(Context c) {
        context = c;

    } 
```

但是当我尝试 c.findViewById() 它不起作用。你怎么做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:13:25.057

试试这个

```
public Manager(Activity a) {
        Activity = a;
    } 
```

然后做

```
a.findViewById 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:16:40.530

如果您将视图设为公共静态变量，则可以从应用程序中的任何位置访问它。

例如：在您的 Activity 类中，使用

```
public static TextView mTextView = null; 
```

在其中`onCreate()`，初始化`TextView`.

现在从任何其他类，你总是可以使用：

```
myActivity.mTextView 
```

访问`TextView`

# extjs - ExtJS4：从哪个类派生？

> ID：12622218
> 
> 赞同：0
> 
> 时间：2012-09-27T13:11:51.110
> 
> 标签：extjs, extjs4

我正在研究自定义组件，它将包含组合和显示字段。它应该是一个带有验证消息的组合框。我想知道，从哪个基类派生该基类以具有诸如商店绑定等这样的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:28:26.087

为什么不使用标准的 ExtJs 验证机制？它将产生您想要的确切结果 - 组合框旁边的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:36:30.100

最终我发现它可以是一个简单的Ext.panel.Panel。

# r - 在R中将一列拆分为中间有空格

> ID：12622219
> 
> 赞同：1
> 
> 时间：2012-09-27T13:11:59.090
> 
> 标签：r

我有一个数据框，其前 20 个 obs 是这样的：

```
 userID                      appName           startTime             endTime endResult Handset Gender   Age Telecom
1  007qkrtk               com.kakao.talk 2012-07-28 00:58:05 2012-07-28 00:59:17         2  Others Female 20-29      KT
2  007qkrtk               com.kakao.talk 2012-07-19 16:09:16 2012-07-19 16:09:30         2  Others Female 20-29      KT
3  007qkrtk          com.facebook.katana 2012-07-03 14:16:25 2012-07-03 14:16:55         1  Others Female 20-29      KT
4  007qkrtk cn.jingling.motu.photowonder 2012-07-29 17:10:18 2012-07-29 17:11:15         3  Others Female 20-29      KT
5  007qkrtk          com.android.browser 2012-07-14 16:09:09 2012-07-14 16:10:59         1  Others Female 20-29      KT
6  007qkrtk                com.htc.album 2012-07-13 15:41:36 2012-07-13 15:41:56         1  Others Female 20-29      KT
7  007qkrtk               com.kakao.talk 2012-07-28 12:46:15 2012-07-28 12:46:23         3  Others Female 20-29      KT
8  007qkrtk              com.android.mms 2012-07-29 14:23:42 2012-07-29 14:23:45         2  Others Female 20-29      KT
9  007qkrtk             com.htc.launcher 2012-07-14 15:21:31 2012-07-14 15:21:34         2  Others Female 20-29      KT
10 007qkrtk               com.kakao.talk 2012-07-09 20:36:45 2012-07-09 20:37:14         3  Others Female 20-29      KT
11 007qkrtk               com.kakao.talk 2012-07-05 07:44:44 2012-07-05 07:45:18         2  Others Female 20-29      KT
12 007qkrtk          com.facebook.katana 2012-07-23 14:47:51 2012-07-23 14:49:21         1  Others Female 20-29      KT
13 007qkrtk                     my.Frank 2012-07-09 13:14:40 2012-07-09 13:15:11         3  Others Female 20-29      KT
14 007qkrtk          com.facebook.katana 2012-07-17 17:10:08 2012-07-17 17:10:37         2  Others Female 20-29      KT
15 007qkrtk          com.facebook.katana 2012-07-20 14:36:08 2012-07-20 14:36:38         1  Others Female 20-29      KT
16 007qkrtk               com.kakao.talk 2012-07-11 09:31:28 2012-07-11 09:32:16         2  Others Female 20-29      KT
17 007qkrtk                com.show.mini 2012-07-09 16:55:30 2012-07-09 16:56:53         2  Others Female 20-29      KT
18 007qkrtk               com.kakao.talk 2012-07-11 08:36:34 2012-07-11 08:37:35         2  Others Female 20-29      KT
19 007qkrtk          com.facebook.katana 2012-07-12 17:27:11 2012-07-12 17:28:37         2  Others Female 20-29      KT
20 007qkrtk            com.android.phone 2012-07-27 14:47:32 2012-07-27 14:48:38         2  Others Female 20-29      KT 
```

startTime 和 endTime 具有日期和时间组件，它们由空格分隔。我需要从这两列中分离日期和时间，并将其中任何一个保存在新列中，用于 startTime 和 endTime。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:32:43.987

用于`strftime`处理您想要的时间戳，例如：

```
strftime("2012-07-28 00:58:05","%Y-%m-%d")
[1] "2012-07-28"
strftime("2012-07-28 00:58:05","%H:%M:%S")
[1] "00:58:05" 
```

它是矢量化的，因此您可以使用：

```
dfr$start.date <- strftime(dfr$startTime,"%Y-%m-%d")
dfr$start.time <- strftime(dfr$startTime,"%H:%M:%S") 
```

# jquery - JQuery - 显示/隐藏 css 类，使用什么选择器

> ID：12622220
> 
> 赞同：0
> 
> 时间：2012-09-27T13:11:59.783
> 
> 标签：jquery, jquery-selectors

目标是在错误数组中的元素旁边显示星号：

[http://jsfiddle.net/ygFYh/5/](http://jsfiddle.net/ygFYh/5/)

显然使用 nth-child 不是合适的选择器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:15:03.053

使用`:eq`代替`:nth-child`

但使用 (x-1) 因为它们是基于 0 的..

演示在[http://jsfiddle.net/ygFYh/7/](http://jsfiddle.net/ygFYh/7/)

# jquery - jQuery模糊操作

> ID：12622227
> 
> 赞同：-2
> 
> 时间：2012-09-27T13:12:15.470
> 
> 标签：jquery

我有多个 div。每个 div 包含一个文本以及一个“编辑”按钮。单击按钮时，文本框将附加到 div。我的要求是当我单击任何地方接受文本框时，文本框变得不可见，并且只有 div “编辑”按钮将按原样显示。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:25:59.467

给定以下 HTML：

```
<div class="outer">
    <div>
        <span>text</span><input class="edit" type="button" value="Edit" />
    </div>
    <div>
        <span>text</span><input class="edit" type="button" value="Edit" />
    </div>
    <div>
        <span>text</span><input class="edit" type="button" value="Edit" />
    </div>
</div>​ 
```

你可以像这样使用javascript：

```
$(".edit").click(function() {
    var $new = "<input type='text' class='edittext'></input>";
    $(this).parent().append($new);
    $(this).parent().find(".edittext").focus();

});

$(".outer").on("focusout", ".edittext", function() {
    $(this).remove();
});​ 
```

小提琴样本：http: [//jsfiddle.net/johnkoer/mrJcp/9/](http://jsfiddle.net/johnkoer/mrJcp/9/)

# iphone - xcode 4.? + ios 6 适用于 lion 10.7.2？

> ID：12622235
> 
> 赞同：0
> 
> 时间：2012-09-27T13:12:34.107
> 
> 标签：iphone, xcode, osx-lion, ios6

我有一个工作的 mac os lion 10.7.2 系统，我不想升级到山狮，所以我可以开始 ios 6 开发。我应该安装哪个 Xcode 版本才能让 ios 6 正常工作？我目前的 Xcode 是 4.2，如何在其中安装 ios 6 sdk 和模拟器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:16:55.227

如果您有开发人员帐户，请下载最新版本的 xcode 及其 .dmg 文件，并且您还发现旧版本的 xcode 我更愿意安装新版本的 xcode 4.5 来构建 IOS 6 应用程序。

```
https://developer.apple.com/downloads/index.action?name=Xcode 
```

在这里下载xcode的版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:15:43.487

要进行 iOS 6 开发，您需要 Xcode 4.5。它仍然可以在 Lion 上运行，并且可以通过 Mac App Store 安装。iOS 6 SDK 和模拟器将自动安装。

另请参阅：http: [//www.iclarified.com/24572/apple-releases-xcode-45-featuring-sdks-for-ios-6-mountain-lion-108](http://www.iclarified.com/24572/apple-releases-xcode-45-featuring-sdks-for-ios-6-mountain-lion-108)

# linux - 停止孤立石英调度程序

> ID：12622238
> 
> 赞同：0
> 
> 时间：2012-09-27T13:12:44.173
> 
> 标签：linux, jakarta-ee, tomcat, quartz-scheduler

我已经为我的 Tomcat 服务器设置了石英调度程序并多次重新启动服务器。

调度程序开始给出这样的错误（经常顺便说一句 - 每 30 秒）：

```
DEBUG org.quartz.core.QuartzSchedulerThread  - batch acquisition of 0 triggers
log4j:ERROR Error occured while converting date.
java.lang.NullPointerException
        at java.lang.System.arraycopy(Native Method)
        at java.lang.AbstractStringBuilder.getChars(AbstractStringBuilder.java:328)
        at java.lang.StringBuffer.getChars(StringBuffer.java:201)
        at org.apache.log4j.helpers.ISO8601DateFormat.format(ISO8601DateFormat.java:130)
        at java.text.DateFormat.format(DateFormat.java:316)
        at org.apache.log4j.helpers.PatternParser$DatePatternConverter.convert(PatternParser.java:444)
        at org.apache.log4j.helpers.PatternConverter.format(PatternConverter.java:65)
        at org.apache.log4j.PatternLayout.format(PatternLayout.java:502)
        at org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:302)
        at org.apache.log4j.WriterAppender.append(WriterAppender.java:160)
        at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)
        at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66)
        at org.apache.log4j.Category.callAppenders(Category.java:206)
        at org.apache.log4j.Category.forcedLog(Category.java:391)
        at org.apache.log4j.Category.log(Category.java:856)
        at org.slf4j.impl.Log4jLoggerAdapter.debug(Log4jLoggerAdapter.java:209)
        at org.quartz.core.QuartzSchedulerThread.run(QuartzSchedulerThread.java:268) 
```

我想我解决了这个问题，但现在我面临另一个问题：前几次我重新启动 Tomcat，我没有关闭石英调度程序。现在我将以下代码添加到我的调度程序中：

```
public class QuartzListener implements ServletContextListener {
    private Scheduler scheduler;

    @Override
    public void contextDestroyed(ServletContextEvent arg0) {
        if (scheduler != null) {
            try {
                scheduler.shutdown();
           } catch (SchedulerException e) {
               e.printStackTrace();
           }
       }
   }
...
} 
```

这似乎正在停止新的石英实例，但旧的实例继续记录相同的旧错误。所以我的问题是：如何停止我不小心忘记通过优雅停止的石英实例`shutdown()`？

我在 linux 上运行，但我在运行时从未见过石英进程/守护进程`ps aux`，也许我错过了一些东西。

# c# - 即使 C# 中的两个字符串相同，String Equals() 方法也会失败？

> ID：12622243
> 
> 赞同：21
> 
> 时间：2012-09-27T13:13:06.007
> 
> 标签：c#

我想使用字符串类的 Equals() 方法比较两个字符串在 C# 中是否相等。但即使两个字符串相同，我的条件检查也失败了。

我已经看到两个字符串是相等的，并且也在[http://text-compare.com/](http://text-compare.com/)站点上验证了这一点。我不知道这里有什么问题......

我的代码是：

```
protected string getInnerParaOnly(DocumentFormat.OpenXml.Wordprocessing.Paragraph currPara, string paraText)
        {
            string currInnerText = "";
            bool isChildRun = false;

        XmlDocument xDoc = new XmlDocument();
        xDoc.LoadXml(currPara.OuterXml);
        XmlNode newNode = xDoc.DocumentElement;

        string temp = currPara.OuterXml.ToString().Trim();

        XmlNodeList pNode = xDoc.GetElementsByTagName("w:p");
        for (int i = 0; i < pNode.Count; i++)
        {
            if (i == 0)
            {
                XmlNodeList childList = pNode[i].ChildNodes;
                foreach (XmlNode xNode in childList)
                {
                    if (xNode.Name == "w:r")
                    {
                        XmlNodeList childList1 = xNode.ChildNodes;
                        foreach (XmlNode xNode1 in childList1)
                        {
                            if (xNode1.Name == "w:t" && xNode1.Name != "w:pict")
                            {
                                currInnerText = currInnerText + xNode1.InnerText;
                            }
                        }
                    }
                }
              if (currInnerText.Equals(paraText))
              {
                  //do lot of work here...
              }
   }
} 
```

当我在其中设置一个断点并逐步进行时，观察每个字符，然后 currInnerText 最后一个索引有所不同。它看起来像一个空字符。但我已经使用了 Trim() 函数。这是在调试过程中捕获的图片。

删除 currInnerText 字符串末尾的空字符或任何其他虚假字符的解决方案是什么？

![在此处输入图像描述](../Images/02c1e9166a9368eba710eb892687b082.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-27T13:23:17.890

试试这个

```
String.Equals(currInnerText, paraText, StringComparison.InvariantCultureIgnoreCase); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-11-30T18:08:33.280

就我而言，区别在于空格字符的编码不同，一个字符串包含不间断空格（160），另一个字符串包含普通空格（32）

它可以通过

```
string text1 = "String with non breaking spaces.";
text1 = Regex.Replace(text1, @"\u00A0", " ");
// now you can compare them 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-09-27T13:16:04.720

尝试放置一个断点并检查长度。此外，在某些情况下，如果语言环境不同，equals 函数不会返回 true。您可以尝试的另一种方法（检查长度）是像这样打印---string1---，---string2---，这样，您可以查看是否有任何尾随空格。要解决此问题，您可以使用 string1.trim()

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-27T13:43:37.773

在调用 .Equals 之前，请尝试以下操作：

```
if (currInnerText.Length != paraText.Length)
    throw new Exception("Well here's the problem");

for (int i = 0; i < currInnerText.Length; i++) {
    if (currInnerText[i] != paraText[i]) {
        throw new Exception("Difference at character: " + i+1);
    }
} 
```

如果 Equals 返回 false，那应该会引发异常，并且应该让您知道发生了什么。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-24T19:10:57.270

除了使用看起来像其他角色但实际上不同的角色之外，使用反射时可能会发生这种情况。反射将值两次装箱到新对象中，`==`并将通过引用进行比较。尝试`object.Equals(currentValue, newValue)`改用。

# javascript - jQuery 可选导致 ASP.NET Ajax 应用程序中的完整回发

> ID：12622249
> 
> 赞同：4
> 
> 时间：2012-09-27T13:13:22.873
> 
> 标签：javascript, jquery, asp.net, asp.net-ajax

I want my selectable to work as an autopostback control, when something is selected the script clicks on a button and postback the values of the selectable. 但它不能很好地与我的 ASP.NET Ajax 和 UpdatePanels 配合使用。有时会发生完整的回发，而不是部分回发。

我从调试中得出的结论是，当停止函数运行时，jQuery 在幕后做了一些事情。如果我添加警报以停止停止功能，则部分回发可以正常工作。

为了增加一些混乱，这适用于`IE9`and `Chrome`，但不适用于`IE7`or `IE8`。所以它也可能是特定于浏览器的。

jQuery版本为：v1.6.2

## 脚本：

```
<script language="javascript">
    $('.selectable').live("mouseover", function () {
        if (!$(this).data("selectable-init")) {
            $(this).data("selectable-init", true);

            $(this).selectable({
                filter: '.item',
                stop: function () {
                    $("#<% =btnPostback.ClientID %>").click();                        
                }
            });
        }
    });    
</script> 
```

## HTML：

```
<div class="selectable">
    <div class="item">1</div>
    <div class="item">2</div>
    <div class="item">3</div>
    <div class="item">4</div>
</div>

<asp:UpdatePanel runat="server">
    <ContentTemplate>
        <asp:Literal ID="litIsPostback" runat="server"></asp:Literal>
        <asp:Button ID="btnPostback" runat="server" OnClick="btnPostback_OnClick" />
    </ContentTemplate>
</asp:UpdatePanel> 
```

## 后面的代码：

```
protected void btnPostback_OnClick(object sender, EventArgs e)
{
    litIsPostback.Text = ScriptManager.GetCurrent(this).IsInAsyncPostBack.ToString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:43:57.003

这是最接近我提出的解决方案。

```
 $('.selectable').selectable({
            filter: '.item',
            stop: function (event, ui) {
                $('.ui-selectable-helper').remove();

                setTimeout(function () {
                    $("#<% =btnPostback.ClientID %>").click();
                }, 1);
            }
        }); 
```

通过在回发之前删除助手（套索），我可以从上到下拖动，但我不能以其他方式进行。在 jQuery 中，帮助器在停止事件之后被删除。

我不确定为什么 setTimeout 有效，但它也解决了完整回发的问题。

# algorithm - 如果 n > 3，求关系 T (n) =T (n-1)+T(n-2)+T(n-3) 的时间复杂度

> ID：12622258
> 
> 赞同：3
> 
> 时间：2012-09-27T13:13:55.650
> 
> 标签：algorithm, computer-science, big-o, time-complexity, fibonacci

有点类似于斐波那契数列

算法的运行时间由下式给出

```
T (n) =T (n-1)+T(n-2)+T(n-3) if n > 3 
```

= n 否则这个算法的顺序是？

如果用归纳法计算那么

```
T(n) = T(n-1) + T(n-2) + T(n-3) 
```

让我们假设 T(n) 是某个函数 aⁿ<br> 然后 aⁿ = a ^(n-1) + a ^(n-2) + a ^(n-3)
=> a³ = a² + a + 1

根据我的计算，它给出了复杂的解决方案也是上述方程的根

```
a = 1.839286755
a = 0.419643 - i ( 0.606291) 
a = 0.419643 + i ( 0.606291) 
```

现在，我该如何进一步进行，或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:21:18.603

如果我没记错的话，当你确定了特征方程的根时，那么 T(n) 可以是这些根的幂的线性组合

```
T(n)=A1*root1^n+A2*root2^n+A3*root3^n 
```

所以我猜这里的最大复杂度将是 (maxroot)^n 其中 maxroot 是你的根的最大绝对值。所以对于你的情况，它是 ~ 1.83^n

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:52:12.180

对程序的运行时间进行了渐近分析，这让我们知道运行时间将如何随着输入而增长。

对于重复关系（就像您提到的那样），我们使用两步过程：

1.  使用递归树方法估计运行时间。
2.  使用替代方法验证（确认）估计。

您可以在任何算法文本（例如 Cormen）中找到这些方法的解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-27T17:27:01.403

它可以近似为 3+9+27+......3^n 即 O(3^n)

# asp.net - 自定义中继器不会在某些项目上触发 ItemCommand

> ID：12622260
> 
> 赞同：0
> 
> 时间：2012-09-27T13:14:03.463
> 
> 标签：asp.net, data-binding, custom-controls, asp.net-customcontrol

我用两个单独的 ItemTemplates 创建了一个自定义中继器控件。第一个模板用于显示特色项目，第二个模板用于显示非特色项目，以便将它们选为特色项目。特色模板还呈现可以添加选择为特色的项目的空“槽”。

我遇到的问题是特色模板中的按钮触发转发器命令事件没问题，但是普通项目模板中的按钮根本不会触发事件，而是回发导致普通项目模板呈现空白，但特色项目模板中的项目仍然正常呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:19:12.467

问题是由于我**没有**使用虚拟数据源进行往返。即使没有要绑定的数据，我也在执行相同的数据绑定。它适用于特色列表的原因是，即使没有数据，也会呈现空的 solt。所以基本上我需要再次循环遍历这些项目并在回发后呈现它们而不进行数据绑定。

# apache - 如何设置将删除 Apache 上的 URL 参数的通配符 301 重定向

> ID：12622261
> 
> 赞同：1
> 
> 时间：2012-09-27T13:14:05.023
> 
> 标签：apache, mod-rewrite, url-rewriting

好的，我已经看到了很多例子，但我似乎仍然无法正确理解。我有来自旧电子平台的旧网址，这些网址在引擎中被大量索引，这些引擎具有非 seo 友好的参数，我需要 301 重定向到我的根目录。

我需要全局 301 将任何内容从 /store/ 重定向到我们的根目录。这是我到目前为止所得到的。

```
RewriteRule ^store/.*$ / [R=301,NE,NC,L] 
```

它部分完成了工作，但没有删除参数。这是我遇到问题的参数示例。`store/index.php?cPath=1`

希望我们能尽快修复，因为这让我对这些 url 感到悲痛。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T18:01:59.193

为了摆脱自动附加到 mod_alias 和 mod_rewrite 重定向末尾的查询字符串，您需要创建自己的查询字符串，但将其设为空。因此，您只需将 a 添加`?`到重定向/重写目标的末尾。例子：

使用 mod_rewrite：

```
RewriteRule ^store/ /? [R=301,L] 
```

使用 mod_alias：

```
RedirectMatch 301 ^/store/ /? 
```

请注意，使用 mod_alias，`?`将显示在 URL 地址栏中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:07:12.860

好了朋友们！这次我们明白了。

正如乔恩·林（Jon Lin）所说，我们缺少一个？某处。对于任何试图设置通配符重定向并且必须从 url 中删除参数的人，这是我们的解决方案。

重写规则 ^store/.*$ /? [R=301,NE,NC,L]

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:20:13.820

尝试以下一种：

```
RewriteRule ^store/([^\.]+\.[^?]+) /$1 [R=301,NE,NC,L] 
```

这将从 url 中排除所有参数，因此`/store/index.php?cPath=1`将转换为`/index.php`

# c# - c# KeyUpEvent 发生在 KeyDownEvent 之前

> ID：12622265
> 
> 赞同：1
> 
> 时间：2012-09-27T13:14:28.537
> 
> 标签：c#, winforms

## 编辑

好的，我想我有问题。我忘记了我在全球范围内挂钩 keyUpEvent。由于首先处理全局关键事件，因此可能会发生这种现象。

## 原来的

我有一个小问题。keyup 事件发生在 keydown 事件之前。

我的程序应该做的是：当用户按下一个键时，正在记录麦克风输入。当用户松开按键时，录音停止，wav 文件正在保存。

如果用户一个接一个地按下一个键，一切都很好。但是在短时间内按下几个键会导致上述行为。我添加了一些代码，以便我可以看到会发生什么。这是这种情况的输出。

```
Key down NumPad4, NumPad4, 100
128 = KeyDownTime
Key up NumPad4, NumPad4, 100
117 = KeyUpTime
Key up NumPad5, NumPad5, 101
0 = KeyUpTime
Key up NumPad6, NumPad6, 102
0 = KeyUpTime
Key down NumPad5, NumPad5, 101
58 = KeyDownTime
Key down NumPad6, NumPad6, 102
0 = KeyDownTime 
```

如您所见， numpad5 和 numpad6 的 keyup 事件发生在它们的 keydown 事件之前。是否会发生 2 个事件但第二个事件更早完成？我想过用 thread.sleep 将 leyup 事件延迟 50 毫秒。但我希望有更好的解决方案。

我没有添加任何代码，因为它是微不足道的，我不知道什么可以帮助你帮助我。但是，如果您需要查看它，请告诉我我将发布哪一部分。

编辑这里是代码的一部分：这里是 KeyDownEvent

```
private void UserControl_KeyDown(object sender, KeyEventArgs e)
        {
            richTextBox1.AppendText("Key down"+e.KeyCode.ToString() + ", " + e.KeyData.ToString() + ", " + e.KeyValue.ToString()+"\n");
            StWt1 = new Stopwatch();
            StWt1.Start();
            try
            {                
                if (ready && !keyPressed)
                {
                    switch (e.KeyData)
                    {
                        case Keys.D0:
                            keyPressed = true;
                            calib = 10.0;
                            calib2 = mySaver.ID;
                            adjustLabelDisplay(10);
                            break;
                            // this is all the same with different value for calib depending on the pressed key
                        case Keys.Decimal:
                            keyPressed = true;
                            calib = 100.0;
                            calib2 = mySaver.ID;
                            adjustLabelDisplay(100);
                            break;
                        default:
                            break;
                    }
                }
                else if (!ready)
                {
                    MessageBox.Show("Missing at least one calibration value!");
                    labelDisplay.ForeColor = Color.Red;
                    labelDisplay.Text = "--------";
                }
            }
            catch (Exception ex)
            {
                richTextBox1.Visible = true;
                buttonHideRTB.Visible = true;
                richTextBox1.AppendText("Exception:\n");
                if (e == null)
                    richTextBox1.AppendText("Eventargs are Zero");
                if (sender == null)
                    richTextBox1.AppendText("Sender is null");
                if (calib == null)
                    richTextBox1.AppendText("calib is null");
                if (calib2 == null)
                    richTextBox1.AppendText("calib2 is null");
                richTextBox1.AppendText("Exception Message: " + ex.Message + "\n");
                richTextBox1.AppendText("Exception source: " + ex.Source + "\n");
                richTextBox1.AppendText("Exception Stack Trace: " + ex.StackTrace + "\n");
                richTextBox1.AppendText("Exception Traget Site: " + ex.TargetSite + "\n");
                MessageBox.Show("Exception was thrown. Check The Rich Text Box for further information.");
            }
            richTextBox1.AppendText(StWt1.ElapsedMilliseconds.ToString() + " = KeyDownTime\n");
            StWt1.Stop();
        } 
```

Switch部分中KeyDownevent调用的方法：

```
private void adjustLabelDisplay(int x)
        {
            calib_ValueChangedEvent();
            calib2_ValueChangedEvent();
            currentKey = x;
            labelDisplay.Text = "Key: " + x;
            labelDisplay.BackColor = Color.FromArgb(255,128,0);
            this.labelDisplay.BorderStyle = System.Windows.Forms.BorderStyle.Fixed3D;
            if (labelCB1.Text[0] != x.ToString()[0])
            {
                MessageBox.Show("Change to working page!");
            }
            if (checkBoxMode.Checked)
                enhRec.startRec();
            else
            {
                recorder.startRecordVoice();
                startTime = DateTime.Now;
            }
        } 
```

和关键事件：

```
private void UserControl_KeyUp(object sender, KeyEventArgs e)
        {
            richTextBox1.AppendText("Key up" + e.KeyCode.ToString() + ", " + e.KeyData.ToString() + ", " + e.KeyValue.ToString()+"\n");
            StWt2 = new Stopwatch();
            StWt2.Start();
            if (ready)
            {
                if (keyPressed)
                {
                    calib2=0;
                    calib=0;
                    labelCB1.Text = "0";
                    labelCB2.Text = "0";
                    keyPressed = false;
                    labelDisplay.Text = "Key: ";
                    labelDisplay.BackColor = Color.FromArgb(100, 255, 255, 255);
                    this.labelDisplay.BorderStyle = System.Windows.Forms.BorderStyle.None;
                    if (checkBoxMode.Checked)
                        enhRec.saveRec(getSaveString());
                    else
                        recorder.stopRecordVoice(getSaveString(), startTime, (int)numericUpDown1.Value);
                }
            }
            else
            {
                labelDisplay.ForeColor = Color.Black;
                labelDisplay.Text = "Key: ";
            }
            richTextBox1.AppendText(StWt2.ElapsedMilliseconds.ToString() + " = KeyUpTime\n");
            StWt2.Stop();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:44:46.227

如果我没记错的话，这些事件是在两个不同的地方处理的，这就解释了为什么按键越快，结果就越零星。您会看到，处理`KeyUp`事件的控件没有事件处理程序，`KeyDown`因此当消息泵开始进入时，您将在`KeyUp`事件之前获取`KeyDown`事件，因为某些`KeyDown`事件正在等待其他事件完成。

这是一个竞赛条件。

在一个班级中处理事件，你会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:43:27.303

您正在使用全局状态（`keyPressed`成员）来存储键盘状态信息。在您的代码中，**任何** `KeyUp`事件都会停止您的录制会话。这意味着您可以按下一个键（开始录制），然后按下另一个键并释放它，同时仍然按住第一个键，您的录制将停止。

# android - LocationManager注册的持久性是什么

> ID：12622277
> 
> 赞同：1
> 
> 时间：2012-09-27T13:15:29.803
> 
> 标签：android, android-intent, android-location, android-pendingintent

可以说我有一个`app`并且在它的活动中我将注册`pendingIntent`每`LocationManager`10 分钟触发一次。

就像在这个例子中： [Android: How to get location information from intent bundle extras when using LocationManager.requestLocationUpdates()](https://stackoverflow.com/questions/1990855/android-how-to-get-location-information-from-intent-bundle-extras-when-using-lo)

如果用户关闭`app`还会`LocationManager`继续开火`pendingIntent`吗？

这样当我的应用程序未运行时，我就可以从`BroadcastReciver`我的应用程序的（清单版本）调用通知。`pendingIntent`

如果是，那么当 LocationManager 实际被清理时，手机重启后？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:48:50.183

如果您希望在应用退出后获得可靠的位置更新，请考虑使用`AlarmManager`（[示例](https://stackoverflow.com/questions/4459058/alarm-manager-example)）每 10 分钟唤醒一次设备。每次警报触发时注册和取消注册您的位置监听器，以便 GPS 可以闲置。

您可能还想使用类似`WakefulIntentService`（请参阅[此处](https://github.com/commonsguy/cwac-wakeful)）这样的东西，以便在您的应用程序等待位置更新时设备保持唤醒状态。如果它花费`BroadcastReceiver`的`onReceive()`时间太长并且没有持有`WakeLock`.

# python - Python：如何使用 pprocess 修改函数中的全局变量

> ID：12622281
> 
> 赞同：4
> 
> 时间：2012-09-27T13:15:46.210
> 
> 标签：python, function, parallel-processing, global-variables

当使用从 pprocess 调用的函数时，我似乎无法在 Python 中修改全局变量。这是我的例子：

```
import pprocess
import time

numbers=[0,0,0,0,0,0,0,0,0,0]

# find system time and store in global variable
def find_time(index):
    global numbers
    x=time.time()
    print "Setting element %s of numbers to %f" % (index, x)
    numbers[index]=x
    return x

# parallel execution of the function
results=pprocess.pmap(find_time, [0,1,2,3,4,5,6,7,8,9], limit=6)

for y in results:
    print '%f' % y

# this list is unchanged
print numbers

# serial execution of the function
for x in [0,1,2,3,4,5,6,7,8,9]:
    find_time(x)

# now it seems to work
print numbers 
```

“数字”只是一个零列表，为了演示，我试图将每个列表元素设置为当前系统时间。当使用 pprocess 调用时，这不起作用，但是当我使用简单的 for 循环调用函数时，全局变量会被更改。

我花了一些时间阅读有关全局变量的信息，并真诚地希望这不是一个微不足道的问题。有人可以向我解释发生了什么吗？

非常感谢，

远野

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:18:51.883

我的理解是在引擎盖下`pprocess`使用。`subprocessing`如果是这种情况，那么每次运行该函数时，它实际上都是一个单独的进程。因此，当您的函数返回时，这些更改不会出现。

您可能需要将列表设为[`multiprocessing.Manager`](http://docs.python.org/library/multiprocessing.html#multiprocessing.managers.SyncManager.list).

例如

```
numbers = multiprocessing.Manager().list([0]*10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:18:00.653

`pprocess`创建另一个进程。这意味着它不与调用代码共享内存。并行进程修改的任何内容都将在其自己的内存空间中进行修改，因此调用代码的内存空间将保持不变。也就是说 - 它们不共享全局变量。

您必须通过管道或任何`pprocess`提供或套接字等显式地在两者之间进行所有通信。

# java - activepivot 是否支持分发？

> ID：12622282
> 
> 赞同：1
> 
> 时间：2012-09-27T13:15:50.687
> 
> 标签：java, activepivot

假设我有太多历史数据（2012 年和 2011 年的数据）无法使用 activepivot 放在一台计算机上。我可以在两台计算机之间拆分数据（一台使用 2011 年的数据，另一台使用 2012 年的数据）并且仍然具有全局视图（即 2011 年和 2012 年的事实总数）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:34:29.803

答案是肯定的！ActivePivot 可以按行（您建议的水平分布）或按列（多态分布）拆分数据，这可能是一台机器上的销售列和另一台机器上的价格列。

[http://quartetfs.com/en/activepivot-distributed-architecture](http://quartetfs.com/en/activepivot-distributed-architecture)

[http://quartetfs.com/products/activepivot/in-memory-computing](http://quartetfs.com/products/activepivot/in-memory-computing) - “水平可扩展。ActivePivot 可随着您的业务增长而扩展，并允许您从实时和历史数据的洞察中受益。ActivePivot 可以部署在集群和广域网等分布式架构上。”

# iphone - 检索 json 数组对象的几个参数并在另一个函数中显示它们

> ID：12622284
> 
> 赞同：0
> 
> 时间：2012-09-27T13:16:01.123
> 
> 标签：iphone, objective-c

我在 cellForRow 方法中有一个 json 响应对象，如下所示：

```
{
geofenceType="a";
resourceType="b";
requestType="c";
monitoringType="d";
},
{
geofenceType="a1";
resourcetype="b1";
requestType="c1";
monitoringType="d1";
}, ...and so on for different users. 
```

我在每个用户面前都有一个按钮，这样只有所选用户的详细信息才能通过。所以我通过以下标签来做到这一点：

```
CellForRow:
{
myAray=json; (now this has the values of all users and myArray is declared in the .h file)
UIButton *b=[[UIButton alloc] initWithFrame:CGRectMake(230,0,40,40)];
[b addTarget:self action:@selector(buttonPressed:withEvent:)forControlEvents:UIControlEventsTouchUpInside];
b.tag=indexPath.row;
[cell addSubview:b];
}
-(void) buttonPressed:(id) sender withEvent: (UIEvent*) event{
UIButton *mybtn=(UIButton*) sender;
NSMutableArray * localArray;
localArray=[myArray objectAtIndex:mybtn.tag];
} 
```

问题：抛出异常并且 localArray 不被打印。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:19:20.480

你看到这些是不同的 ivars：

```
myAray=json;

[myArray objectAtIndex:mybtn.tag]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:20:33.990

myArray 可能由 dataType "Dictionary" 组成

试试这个而不是 NSMutableArray *localArray;

```
NSDictionary *dict =[myArray objectAtIndex:btn.tag];
NSLog(@"%@",dict); 
```

# android - android - 相机权限 - Google Play？

> ID：12622288
> 
> 赞同：0
> 
> 时间：2012-09-27T13:16:07.687
> 
> 标签：android, permissions, android-camera

在我的应用程序中，我使用此权限：

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera.flash" /> 
```

当我启动应用程序时，我会检查`flashlight support`. 当设备支持时`Flashlight`，我显示布局“ `Flashlight`”，否则我显示布局“ `No_Flashlight`”。

一切都很好。

现在我的问题是`Google Play`。我必须使用智能手机。一个带手电筒，一个不带手电筒。当我使用手电筒智能手机访问 Google Play 时，我看到了我的应用程序。

但是当我带着我的没有手电筒的智能手机去谷歌玩时，我看不到这个应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:21:22.837

使用以下：

```
<uses-feature android:name="android.hardware.camera.flash"
              android:required="false" /> 
```

该元素提供了一个 required 属性，可让您指定应用程序是否需要并且在没有声明的功能的情况下无法运行，或者它是否更喜欢拥有该功能但可以在没有它的情况下运行。

因为 Google Play 过滤了对用户可见的应用程序，所以用户只能看到和下载那些与其设备兼容的应用程序。它过滤应用程序的方法之一是通过功能兼容性。

详细解释请看：http: [//developer.android.com/guide/topics/manifest/uses-feature-element.html](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)

# java - 如何检测 Scanner 收到的 BlankLine？

> ID：12622290
> 
> 赞同：1
> 
> 时间：2012-09-27T13:16:11.010
> 
> 标签：java, java.util.scanner

我想获取数据形式的文本文件，我使用扫描仪获取数据形式的文本文件。这是个人资料保存模式

```
name
status
friend
friend
.
.
(Blank line) 
```

空白行是每个配置文件分开的。（朋友会循环直到下一行是空白行）

```
john 
happy
james

james
sad
john 
```

我编写代码来获取这样的文件表单文本

```
try{
    Scanner fileIn = new Scanner(new FileReader("testread.txt"));
    while(fileIn.hasNextLine()){           
         String line = fileIn.nextLine();
         String linename = fileIn.nextLine();
         String statusline = fileIn.nextLine();
         println("name "+linename);
         println("status "+statusline);
         while(/*I asked at this*/)){
             String friendName = fileIn.nextLine();
             println("friend "+friendName); 
         }                              
    }
}catch(IOException e){
    println("Can't open file");
} 
```

我应该使用什么条件来检测配置文件之间的空白行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:37:39.880

您可以实现如下所示的自定义函数，`nextLine`如果它不为空，它将返回您。

```
 public static String skipEmptyLines(Scanner fileIn) {
    String line = "";
    while (fileIn.hasNext()) {
        if (!(line = fileIn.nextLine()).isEmpty()) {
            return line;
        }
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:19:49.563

您可以简单地检查您`scanner.nextLine()`的换行符`"\n"`（我的意思是`""`，因为`nextLine()`不会`"\n"`在任何行的末尾读取）..如果它相等，它将是一个空行..

```
if (scanner.nextLine().equals("")) {
    /** Blank Line **/
} 
```

顺便说一句，您的代码有问题：-

```
while(fileIn.hasNextLine()){          
         String line = fileIn.nextLine();
         String linename = fileIn.nextLine();
         String statusline = fileIn.nextLine(); 
```

您假设您`fileIn.hasNextLine()`将确认接下来的三行是`not null`.

每次你做一个`fileIn.nextLine()`你需要检查它是否可用..否则你会得到异常......

***编辑： -** 哦..我看到你已经处理了异常..那么就不会有问题了..但是你仍然应该修改上面的代码..它看起来不漂亮..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:21:23.890

试试这个...

```
while(scanner.hasNextLine()){

    if(scanner.nextLine().equals("")){

            // end of profile one...

       }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T13:23:59.017

在使用方法检查现有行后`scanner.hasNextLine()`，您可以使用此条件：

```
String line = null;
if((line = scanner.nextLine()).isEmpty()){
   //your logic when meeting an empty line
} 
```

并在您的逻辑中使用该`line`变量。

# iphone - 应用内购买订阅续订未按预期工作

> ID：12622292
> 
> 赞同：4
> 
> 时间：2012-09-27T13:16:17.833
> 
> 标签：iphone, in-app-purchase, subscription, auto-renewing

我在我的应用程序中实现了应用内购买。
它第一次要求 iTunes 身份验证和购买确认。
我将成功收据存储在 NSUserDefaults 中。
到期时间后（我在 Sandbox 中测试，所以 5 分钟），当我接受申请时，我会验证收据。有时它返回状态 21006，有时返回 0。我不明白为什么会发生这种情况。
苹果会自动续订订阅吗？如果是，那么为什么有时它会返回状态 21006。我应该为订阅功能做更多的事情吗？
请帮我。我真的坚持这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-24T15:54:03.187

我有过类似的经历。我不确定您是否知道，但沙盒中的持续时间不仅减少了，而且续订限制为 5 次（我认为）。因此，如果您在首次购买（例如）后 25 分钟验证订阅应该过期。我发现沙盒很挑剔，并不完全一致。

# php - 将 XML 记录解析为多个选项卡（使用 PHP 或 jQuery）

> ID：12622298
> 
> 赞同：1
> 
> 时间：2012-09-27T13:16:46.613
> 
> 标签：php, jquery, parsing, tabs, xml-parsing

我目前在一个 DJ 的网站上工作，他使用 GigaTools 进行演出。目前，我有用 php 解析的 GigaTools 提要（即 xml），并在网站上显示一个表格。但这仅限于显示的最大记录数 (12)，因为这适合网站。

这是我目前正在使用的脚本：

```
 <?php 

    $gigatools = simplexml_load_file('http://gigs.gigatools.com/user/MikeRavelli.xml');
    echo "<table id='gigs_parse'>\n";

    for($i = 0; $i < 12; $i++) {
      $event = $gigatools->event[$i];
      $day=$event->day;
      $month=$event->month;
      $name=$event->name;
      $venue=$event->venue;
      $city=$event->city;
      $country=$event->country;

      if($month == 1){
        $maand = 'JAN';
      } else if($month == 2){
        $maand = 'FEB';
      } else if($month == 3){
        $maand = 'MAR';
      } else if($month == 4){
        $maand = 'APR';
      } else if($month == 5){
        $maand = 'MAY';
      } else if($month == 6){
        $maand = 'JUN';
      } else if($month == 7){
        $maand = 'JUL';
      } else if($month == 8){
        $maand = 'AUG';
      } else if($month == 9){
        $maand = 'SEP';
      } else if($month == 10){
        $maand = 'OCT';
      } else if($month == 11){
        $maand = 'NOV';
      } else if($month == 12){
        $maand = 'DEC';
      }

      echo "<tr class='row'><td class='date'><span>",$day,"</span><br/>",$maand,"</td>\n";
      echo "<td class='party'><a href='",$url,"' target='_blank'>",$name,"</td>\n";
      echo "<td class='location'>",$venue,", ",$city,", ",$country,"</td>\n";
    }
    echo "</table>";
    ?> 
```

我希望 xml 提要显示在多个选项卡中，以便可以显示更多的演出然后 12。例如，如果提要中有 15 个演出，我希望前 12 个在第一个选项卡上，另外 3 个在第二个标签。我想根据提要中的演出数量显示尽可能多的标签。因此，选项卡的数量必须根据提要中的演出数量自动更改。所以我不会得到任何空标签。

我现在搜索了半天，在互联网上找不到任何好的解决方案。我不擅长编程，所以我真的需要一个可以调整的教程或脚本。

有人可以通过例如教程为我指明正确的方向或帮助我为此编写脚本吗？

提前致谢！顺便说一句，对不起我的英语不好；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:29:36.593

您可以使用[JQuery UI Tabs](http://jqueryui.com/demos/tabs/)。

[您可以在此处](http://jqueryui.com/demos/tabs/default.html)找到一个非常简单的示例。更改脚本以生成这样的表应该很容易

```
<div id="tabs">
<ul>
    <li><a href="#tabs-1">First</a></li>
    <li><a href="#tabs-2">Second</a></li>
    <li><a href="#tabs-3">Third</a></li>
</ul>
<div id="tabs-1">
    <p>First tab contents</p>
</div>
<div id="tabs-2">
    <p>Second tab contents</p>
</div>
<div id="tabs-3">
    <p>Third tab contents</p>
</div>
</div> 
```

`<head>`之后，您必须在文档中添加 JQuery UI 所需的所有 js 和 css ：

```
<link rel="stylesheet" href="../../themes/base/jquery.ui.all.css">
<script src="../../jquery-1.8.0.js"></script>
<script src="../../ui/jquery.ui.core.js"></script>
<script src="../../ui/jquery.ui.widget.js"></script>
<script src="../../ui/jquery.ui.tabs.js"></script>
<link rel="stylesheet" href="../demos.css"> 
```

最后，只需调用实际创建选项卡的函数

```
<script>
$(function() {
    $( "#tabs" ).tabs();
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-26T17:21:27.687

谢啦！正在为 Gigatools 搜索 PHP XML 解析器...

我也是 PHP 新手，但这样会不会更好：

```
<?php 

    $feed = 'http://gigs.gigatools.com/user/MikeRavelli2.xml';
    $gigatools = simplexml_load_file($feed)or
          die ("Fehler beim Laden des Feeds: ".$feed."\n");;
    $countgigs = count($gigatools->event);
    echo "<table id='gigs_parse'>\n";
    if ($countgigs > 12) {
        $gigs = 12;
    } else {
        $gigs = $countgigs;
    }

    for($i = 0; $i < $gigs; $i++) {
      $event = $gigatools->event[$i];
      $day=$event->day;
      $month=$event->month;
      $name=$event->name;
      $venue=$event->venue;
      $city=$event->city;
      $country=$event->country;

      if($month == 1){
        $maand = 'JAN';
      } else if($month == 2){
        $maand = 'FEB';
      } else if($month == 3){
        $maand = 'MAR';
      } else if($month == 4){
        $maand = 'APR';
      } else if($month == 5){
        $maand = 'MAY';
      } else if($month == 6){
        $maand = 'JUN';
      } else if($month == 7){
        $maand = 'JUL';
      } else if($month == 8){
        $maand = 'AUG';
      } else if($month == 9){
        $maand = 'SEP';
      } else if($month == 10){
        $maand = 'OCT';
      } else if($month == 11){
        $maand = 'NOV';
      } else if($month == 12){
        $maand = 'DEC';
      }

      echo "<tr class='row'><td class='date'><span>",$day,"</span><br/>",$maand,"</td>\n";
      echo "<td class='party'><a href='",$url,"' target='_blank'>",$name,"</td>\n";
      echo "<td class='location'>",$venue,", ",$city,", ",$country,"</td>\n";
    }
    echo "</table>";
    ?> 
```

# iphone - UIActivityIndi catorView 正确使用

> ID：12622301
> 
> 赞同：1
> 
> 时间：2012-09-27T13:17:02.323
> 
> 标签：iphone, ios, uiactivityindicatorview

我的问题是关于在 iPhone 项目中使用活动指示器的问题。我有一个包含 UIActivityIndi​​catorView 的类

```
@interface StatusView : UIView 
{
    UIActivityIndicatorView *indicator;
    UILabel *textLabel;

}

- (id)initWithFrame:(CGRect)frame Text:(NSString*)text andShowIndicator:(BOOL)value; 
```

在我的业务逻辑代码中，我调用 [indicator startAnimating] 并且框架出现在屏幕底部。该代码还包含一个释放指标的 dealloc 方法

```
- (void)dealloc 
{
    [indicator release];

    [super dealloc];
} 
```

大多数情况下，该指标运行良好，但也有少数情况永远不会消失。

我是否总是需要显式调用 stopAnimating 方法？发布是否处理它？正确的用法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:26:51.213

`stopAnimating:`方法停止`UIActivityIndicatorView`和`release`释放对象的轮子。
在 Objective-C 中，每个对象都有一个内部计数器，用于跟踪对象或对象所使用的所有引用。`[object retain]`将计数器加 1 并将`[object release]`计数器减 1。当计数器达到零时，将调用 dealloc。`release`是关于内存管理`stopAnimating:`的，而`UIActivityIndicatorView`. 因此，如果您想停止为您的动画制作动画`UIActivityIndicatorView`，则必须调用`stopAnimating:`方法。在**ARC**中不必`release`这样做更好地使用`ARC`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:11:20.223

使用此对象时最好的方法是 stopAnimating 当您想停止时，从超级视图中删除（ [activityObject removeFromsuperview] ）并最终释放它。[活动对象释放]；

# css - 可以控制自动生成的标签的方式 显示？

> ID：12622302
> 
> 赞同：3
> 
> 时间：2012-09-27T13:17:02.993
> 
> 标签：css, jsf

我有一个显示在 a 中的选项的动态列表`<h:selectOneRadio>`，我想控制标签布局，因此当标签大于一行时，它的行为如下：

实际行为：

```
 [ ] Label 1

    [ ] This label really 
    bugs me!

    [ ] Label 3 
```

期望的行为：

```
 [ ] Label 1

        Now...This is a nice     
    [ ] Label, Label, label, 
        Label, Label, label ...

    [ ] Label 3 
```

JSF 生成的简化 HTML：

```
<table>
    <tbody>
        <tr>
            <td>
                <input id="radio 1" type="radio"> 
                <label for="radio 1"> Label 1 </label>
            </td>
            <td>
                <input id="radio 2" type="radio"> 
                <label for="radio 2"> This Label really bugs me! </label>
            </td>
            <td>
                <input id="radio 3" type="radio"> 
                <label for="radio 3"> Label 3 </label>
            </td>
        </tr>
    </tbody>
</table> 
```

更新：对不起=X，我需要一些稍微不同的东西......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:33:50.297

假设您正在使用`layout="pageDirection"`垂直放置列表并且可以使列表具有固定宽度，您可以执行以下操作：

[**免责声明：**仅在 FF 和 Chrome 中测试]

```
<style>
.select-one {
   width: 200px;
}
.select-one label {
   float: right;
   width: 170px;
}
</style>
...
<h:selectOneRadio value="#{myBacking.ola}" layout="pageDirection"
     styleClass="select-one">
        <f:selectItem itemLabel="This label really bugs me" itemValue="one" />
        <f:selectItem itemLabel="This label really, really, REALLY bugs me!!
                                 And let's add more stuff into this"
                      itemValue="two" />
</h:selectOneRadio> 
```

这是它在 Firefox 中的呈现方式：

![在 Firefox Nightly 中渲染](../Images/95ad1b774e7309506b0766f45c15aa1f.png)

您可能需要`width`稍微调整一下 CSS 定义的值，以使其符合您的口味。

# autocomplete - 为什么我在编辑源代码时无法使用全能自动完成？

> ID：12622305
> 
> 赞同：-1
> 
> 时间：2012-09-27T13:17:07.463
> 
> 标签：autocomplete, vim, vim-plugin, omnicomplete

vim.py

输入：

```
impo 
```

然后按： **Cx Co**

omin 自动完成功能失败并显示以下消息，为什么？

```
Error: Required vim compiled with +python                                                                                                                      E117: Unknown function: pythoncomplete#Complete
Press ENTER or type command to continue

vim --version | grep python
-python +quickfix +reltime -rightleft -ruby +scrollbind -signs +smartindent 
```

这个问题与[让 Omni complete 在 windows 上的 vim 7.2 上工作不同](https://stackoverflow.com/questions/2897022/getting-omni-complete-to-work-on-vim-7-2-on-windows)，因为我在 linux 上使用 vim，而不是 windows。

**编辑1：**

我现在可以在另一台主机上使用omni自动完成，**但是我不能为urlopen自动完成，为什么？**

```
from urllib import url 
```

按 CxCo，然后出现错误消息：

```
-- Omni completion (^O^N^P) Pattern not found 
```

**编辑 2**

不知道为什么omni不能再次工作，令人困惑......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:20:06.080

vim 是在没有 python 支持的情况下编译的。你可以说是因为`vim --version`输出`-python`而不是`+python`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T13:42:11.640

原因已为您说明：Vim 未在 Python 支持下编译，解决方案是安装正确的构建。

假设您使用的是 Ubuntu 或其他 Debian 衍生产品，您可能只需要执行以下操作：

```
$ sudo apt-get install vim-gnome 
```

如果您通过 SSH 在无头服务器上工作，请替换`vim-gnome`为`vim-nox`.

# c# - 使用 C# var 隐式键入 System.Data.Datarow

> ID：12622307
> 
> 赞同：18
> 
> 时间：2012-09-27T13:17:27.063
> 
> 标签：c#, datarow, implicit-typing

```
foreach (var row in table.Rows)
{
     DoSomethingWith(row);
} 
```

假设我正在使用一个标准`System.Data.DataTable`（它有一个`System.Data.DataRow`对象集合），上面的变量 'row' 解析为一个`object`类型，而不是一个`System.Data.DataRow`.

```
foreach (DataRow row in table.Rows)
{
     DoSomethingWith(row);
} 
```

按我的预期工作。这有什么特别的原因吗？

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-27T13:20:32.523

那是因为`Rows`is `DataRowCollection`，而 is`IEnumerable`和 not `IEnumerable<DataRow>`，这意味着推断的类型将是`object`。

当您明确声明 type in 时`foreach`，您指示 c# 为每个调用添加强制转换，这就是它起作用的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T13:21:33.397

发生隐式转换。另请注意，如果无法进行强制转换，则可能会引发**InvalidCastException 。**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-27T13:21:52.417

`table.Rows`是一个 DataRowCollection ，它是`IEnumberable`（而不是`IEnumerable<T>`T 是`DataRow`），所以它不是强类型的 a `DataRow`，而是一个对象，即它是一个对象的集合。

您可以使用一个`DataTable`扩展 - [http://msdn.microsoft.com/en-us/library/system.data.datatableextensions.asenumerable.aspx](http://msdn.microsoft.com/en-us/library/system.data.datatableextensions.asenumerable.aspx)

```
foreach (var row in table.AsEnumerable())
{

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T13:26:30.283

试试这个：

```
System.Data.DataTable dt = new System.Data.DataTable();

foreach (var row in dt.Rows.Cast<System.Data.DataRow>())
{

} 
```

要使用 Rows.Cast，您必须使用 System.Linq。

# html - CSS 元素悬停只影响第一个

> ID：12622310
> 
> 赞同：0
> 
> 时间：2012-09-27T13:17:34.197
> 
> 标签：html, css, css-selectors

我有以下 CSS 和 HTML：

```
.moods a#Action:hover{background: red;};
.moods a#Comedy:hover{background: orange;};

 <div class='moods'>
     <a id='Comedy'>want to laugh</a>
     <a id='Action'>edge of the seat</a>
     <a id='Science Fiction'>it's all fantasy</a>

</div> 
```

出于某种原因，css 仅影响第一个选择，例如在这种情况下，只有 Action 在悬停时变为红色。但是，如果我把喜剧放在行动之前，那么喜剧在悬停时会变成橙色。

有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T13:18:50.187

去掉右括号后的分号。他们干扰了你的第二条规则，而且他们不应该在那里：

```
.moods a#Action:hover{background: red;}
.moods a#Comedy:hover{background: orange;} 
```

# linux - 2.6 内核中的 EXPORT_SYMTAB

> ID：12622311
> 
> 赞同：2
> 
> 时间：2012-09-27T13:17:38.547
> 
> 标签：linux, linux-kernel, linux-device-driver

注意在我们的 makefile`EXPORT_SYMTAB`中的使用如[here](http://people.netfilter.org/rusty/unreliable-guides/kernel-hacking/sym-exportsymtab.html)中所述。

它仍然与 2.6 及更高版本的内核相关吗？我找不到参考它的当前状态，但在 LXR 中找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T21:22:22.720

自 2.6 内核以来，这个`EXPORT_SYMTAB`名称本身似乎一劳永逸。但是，相关宏`EXPORT_SYMTAB_STROPS`似乎与[此处](http://www.spinics.net/lists/sparclinux/msg05715.html)解释的 SPARC 体系结构的相关性仍然很小。直接从邮件列表中引用：

> > > 鉴于 EXPORT_SYMTAB 已经从内核树中删除了很久
> > > 时间过去了，这个相关的宏还有什么用处吗？只是
> > >问。
> 
> 它仅由 sparc 使用，以便它可以导出符号，例如`memcpy()`， `memset()`等。适当地
> 
> 在构建 ksyms.c 时如果没有这种`ifdef`保护，string*.h 会将这些函数定义为宏，这会产生如下情况：
> 
> ```
> EXPORT_SYMBOL(memcpy) 
> ```
> 
> 和类似的不起作用，因为`memcpy`宏会扩展并因此破坏语法错误的构建。

`EXPORT_SYMTAB_STROPS`宏仍然存在于 3.4.9 内核中。

```
#> find . \( -name '*.c' -o -name '*.h' \) -exec grep -inH EXPORT_SYMTAB {} \;
./arch/sparc/lib/ksyms.c:6:#define EXPORT_SYMTAB_STROPS
./arch/sparc/include/asm/string_64.h:18:#ifndef EXPORT_SYMTAB_STROPS
./arch/sparc/include/asm/string_64.h:58:#endif /* !EXPORT_SYMTAB_STROPS */
./arch/sparc/include/asm/string_32.h:20:#ifndef EXPORT_SYMTAB_STROPS
./arch/sparc/include/asm/string_32.h:127:#endif /* !EXPORT_SYMTAB_STROPS */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T03:27:18.213

找不到任何直接参考。虽然在 2.6 内核中发现了以下提交..

```
commit fe4f699c6fb886a8deaf1120fd52402c3bd7c459
Author: Robert P. J. Day <rpjday@crashcourse.ca>
Date:   Sun Jul 5 05:19:29 2009 -0400

    Staging: vt6655: Remove Makefile refs to EXPORT_SYMTAB

    Given that EXPORT_SYMTAB was removed long ago, remove the Makefile
    references to it.

    Signed-off-by: Robert P. J. Day <rpjday@crashcourse.ca>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1fad810473423bbf0626fab2fbeb27a4663fa2d5
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jul 30 12:49:56 2005 -0700

    [PATCH] hostap update

    EXPORT_SYMTAB does nothing. There's no need to define something if it
    doesn't have any effect.

    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jouni Malinen <jkmaline@cc.hut.fi>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com> 
```

这表明 EXPORT_SYMTAB 不再使用。

# c++ - 如何找到鼠标事件的来源？

> ID：12622312
> 
> 赞同：0
> 
> 时间：2012-09-27T13:17:37.440
> 
> 标签：c++, c, windows, mouse

有没有办法找出鼠标事件来自哪里？我的意思是，如果我在 Windows 上编写 C/C++ 程序并在其上获得鼠标单击事件，我如何才能确定该事件是来自鼠标驱动程序、触摸板还是由应用程序发送（鼠标事件通过发送适当的消息（如 WM_LBUTTONDOWN）进行模拟。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:25:56.617

This is not possible for an application in user mode - mouse events generally don't provide documented info on event source. There is the way to obtain some message extra info by Win32 API function [GetMessageExtraInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644937%28v=vs.85%29.aspx) but there is no safe way to interpret this data. It is very device specific, undocumented and never guaranteed to ever present.

To solve this task you need to develop your own [Mouse Filter driver](http://msdn.microsoft.com/en-us/library/ff542386%28v=vs.85%29.aspx) basing on Windows DDK sample.

Its callback has input parameter [`MOUSE_INPUT_DATA`](http://msdn.microsoft.com/en-us/library/ff542403%28v=vs.85%29.aspx) - structure containing mouse event info. There is the field `UnitId`:

> **UnitId** Specifies the unit number of the mouse device. A mouse device name has the format `\Device\PointerPortN`, where the suffix N is the unit number of the device. For example, a device, whose name is `\Device\PointerPort0`, has a unit number of zero, and a device, whose name is `\Device\PointerPort1`, has a unit number of one.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T00:08:40.410

GetAsyncKeyState 函数可用于检查按钮是否被按下，不幸的是 SendInput 无法欺骗该函数。所以你可以模拟鼠标点击，但程序可以检查按钮是否真的被按下。

因此，创建自己的鼠标驱动程序会更好。[我需要一种安全的方法来模拟我的机器人的鼠标/键盘行为，我在我的博客http://poker-botting.blogspot.fr/2012/11/how-to-simulate-mouse-and-](http://poker-botting.blogspot.fr/2012/11/how-to-simulate-mouse-and-keyboard.html)上写了一篇详细的文章[键盘.html](http://poker-botting.blogspot.fr/2012/11/how-to-simulate-mouse-and-keyboard.html)

# ubuntu - 在 Ubuntu 中将库添加到 Java CLASSPATH

> ID：12622313
> 
> 赞同：9
> 
> 时间：2012-09-27T13:17:45.273
> 
> 标签：ubuntu, java

我不确定我的问题是否与 Ubuntu 或 Java 更相关，所以请原谅我！

我正在尝试编译 java 程序，但出现以下错误：

```
package javax.comm does not exist 
```

我已经下载了所需的软件包`comm.jar`，但我不知道我应该如何/在哪里安装/复制这个文件。

我在某处读到这应该在`CLASSPATH` 文件夹中，但我没有这个文件夹。

这就是我得到的，`java -version`我想这意味着我已经在我的系统中安装了 Java：

```
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.4) (6b24-1.11.4-1ubuntu0.12.04.1)
OpenJDK Server VM (build 20.0-b12, mixed mode) 
```

我也有这些文件夹`/usr/lib/jvm/`：

```
default-java             java-1.7.0-openjdk-i386  java-6-openjdk-i386
java-1.6.0-openjdk       java-6-openjdk           java-7-openjdk-common
java-1.6.0-openjdk-i386  java-6-openjdk-common    java-7-openjdk-i386 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-27T13:23:57.807

通常，您在使用开关启动 java 程序时指定类路径 `java -cp your.jar xxxx.java`

但是您也可以通过将 jar 复制到 default-java/jre/lib/ext 文件夹来将其永久添加到您的 java 安装中。

最后看看这个问题：[Setting multiple jars in java classpath](https://stackoverflow.com/questions/219585/setting-multiple-jars-in-java-classpath)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-27T13:24:34.883

环境变量 CLASSPATH 包含一个以冒号分隔的 Java 应该搜索类的位置列表。尝试

```
export CLASSPATH=$CLASSPATH:/path/to/comm.jar 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T13:21:54.547

您可以尝试如下操作：

1.  `javac -cp comm.jar XXXXX.java` 或者
2.  `export CLASSPATH=comm.jar:$CLASSPATH`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T13:33:34.810

如果你想编译一个名为 的类`foo.bar.Baz`，你必须把`Baz.java`文件放在一个目录中 `foo/bar`并`javac`从`foo`的父目录启动，即如果你列出当前目录的内容，你可以看到`foo`列出的内容。或者，还有`-sourcepath`命令行开关：

```
javac -sourcepath .:/home/asdf/qwerty foo.bar.Baz.java 
```

假设您的类声明如下

```
import foo.bar.*;
public class Baz {} 
```

您必须将此代码放在一个文件中，并在调用编译器之前`/home/raf/foo/bar/Baz.java`切换到该目录。`/home/raf`

如果 javac 在其源路径中找不到目录树，它将输出*“包 foo.bar 不存在”错误。*`foo/bar`所以你要么切换到正确的目录，要么使用`-sourcepath`开关指向项目的根目录，即包含`javax/comm`. 将您的源代码放在这样的目录中：

```
+ /home/raf/project/src
|
+-/javax
  |
  +-/comm 
```

并从`src`目录调用 javac

```
cd /home/raf/project/src
javac $filenames 
```

或使用上述开关

```
javac -sourcepath /home/raf/project/src $filenames 
```

您需要调整`CLASSPATH`以让 javac 针对现有档案进行编译。

# ios5 - 如何在 iOS6 中从我的应用程序跳转到系统设置？

> ID：12622322
> 
> 赞同：1
> 
> 时间：2012-09-27T13:18:03.277
> 
> 标签：ios5, settings, system, ios6

为什么我不能使用类似的语法

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs://"]] 
```

在 iOS6 中从我的应用程序跳转到系统设置，但在 iOS5 中可以？是否有任何官方信息（例如来自 developer.apple.com）？谢谢！

# flash - RobotLegs 域逻辑 - 放置位置

> ID：12622323
> 
> 赞同：2
> 
> 时间：2012-09-27T13:18:12.037
> 
> 标签：flash, apache-flex, model-view-controller, command, robotlegs

在[Robotlegs](http://www.robotlegs.org/)中，域逻辑是否需要在命令（控制器）或模型中？

示例：假设我正在构建一个“[井字游戏](http://en.wikipedia.org/wiki/Tic-tac-toe)”游戏。我有：GameMadiatore、CellSelectedCommand、BoardModel。

在用户单击一个单元格后，“GameMadiatore”会触发一个启动“CellSelectedCommand”的事件。“find 3 in row”获胜逻辑是否需要在“BoardModel”或“CellSelectedCommand”或其他命令中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T23:26:27.620

正如@DennisJaamann 所说——一个命令应该只做一件事。但是，它不应该**包含**实际的域逻辑。它既不应该在模型中，也不应该在视图类中。

原因如下：如果您将游戏逻辑放入特定于框架的类中，您将永远将您的游戏与这个特定的框架联系起来（即使它确实是一个很好的框架）。然而，井字游戏的游戏规则应该始终保持不变，无论它们是与 RobotLegs、PureMVC 还是您选择的任何其他技术一起使用。例如，如果在几个月后，您决定为一些花哨的新移动设备创建一个游戏版本，并且您想使用供应商特定的 MVC 框架和组件，否则您将不得不从头开始做所有事情。此外，将游戏逻辑分布在多个命令类上会使得代码更难遵循、阅读和理解——这让调试变得非常痛苦。

[正如 Bob Martin 叔叔所说](http://blog.8thlight.com/uncle-bob/2011/11/22/Clean-Architecture.html)： 框架是一种*交付机制*。不多也不少。它应该用于传递信息，即将信息呈现给用户，并处理用户交互事件。但是实际的领域逻辑应该在具有反向依赖关系的框架不可知用例类中，因此与交付机制完全解耦。

所以，我会创建一个游戏接口，也许只是调用它`ITicTacToe`，然后在一个游戏类中实现它`TicTacToe`，它包含状态（即哪些单元格已被标记）和逻辑（即检查是否连续三个）执行和监控单轮井字游戏。这些东西是在一起的，因为它们用于相同的目的，并且它们有相同[的改变理由](http://en.wikipedia.org/wiki/Single_responsibility_principle)：当且仅当井字游戏的规则改变时！

使用 TDD 来实现游戏的行为，并让游戏类在游戏输赢时调度事件，而不是跟踪分数等 - 这些是*围绕*游戏的应用程序逻辑的一部分，而不是游戏本身。

然后，您可以将游戏注入您的`CellSelectedCommand`，让该命令调用游戏类上的适当方法，侦听本地游戏事件（如果有），然后通过中央调度程序调度应用程序范围的事件。然后，您可以使用这些来触发单独的`GameWonCommand`和`GameLostCommand`类以将分数添加到分数并将其保留在`ScoreModel`. 模型应该只包含*共享*状态，即多个任务需要的数据。我喜欢把模型想象成一个大架子上的抽屉和盒子：你取出一些执行任务所需的数据（即开始游戏之前的一些用户信息），处理它（玩），然后将其存储起来（保存分数）。

总结一下，这里有一条经验法则：**始终尝试让您的核心应用程序逻辑与框架和交付机制无关**——如果您愿意，它们应该是扩展、插件，而不是系统的中心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:50:59.100

我建议您创建原子命令。

这意味着一个命令应该只做一件事和一件事。这使您可以轻松地重新连接应用程序逻辑，而无需在以后进行太多重构。

在上述情况下，您的想法是正确的，另一个命令就可以了。例如：

*   单元格选择命令
*   Check3InRow 命令
*   开始新游戏命令
*   PlayerWinsCommand
*   ..

关于 MVCS 的更多原则：

*   调解员：应该被视为邮递员。它将充当您的视图和应用程序之间的中间人。如果你愿意，可以称它为 ViewController，但这样更基本。
*   命令：可以认为是控制器逻辑，所有的决策都可以在这里完成。从这里更新您的模型。
*   模型：应该只反映应用程序状态。例如一个布尔值，指示游戏是否已赢。

干杯

# api - 获取在线单词表

> ID：12622327
> 
> 赞同：0
> 
> 时间：2012-09-27T13:18:32.613
> 
> 标签：api, list, words

我需要一个在线资源，我可以在其中使用具有特定配置的 API 获取单词列表，例如，单词的最小/最大长度、单词的数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-13T19:10:26.397

我想你的意思是一个提供*英语*单词的 API。基于[SOWPODS](http://www.freescrabbledictionary.com/sowpods.txt)单词列表，我[为我的 Wordfeud 作弊引擎创建了这个 API](http://api.wordfeuds.com/feed.php?q=pan&position=0&lang=en&min=0&max=15)。使用基于反向链接到域首页。随意使用它并评论功能。

# windows - 当代码在工作程序中运行时，在 IIS7 中查询 IIS 应用程序池配置失败

> ID：12622328
> 
> 赞同：1
> 
> 时间：2012-09-27T13:18:34.790
> 
> 标签：windows, winapi, iis-7

查询 iis7 配置数据时，它在工作进程中运行时失败，并且在控制台应用程序中正常。

```
 COSERVERINFO     csiMachineName;

        csiMachineName.pAuthInfo     = NULL;
        csiMachineName.dwReserved1 = 0;
        csiMachineName.dwReserved2 = 0;
        csiMachineName.pwszName      = L"localhost";

        hr = CoGetClassObject(
            __uuidof( AppHostAdminManager ),
            CLSCTX_SERVER,
            &csiMachineName,
            IID_IClassFactory,
            (void**) &(pClassFactory.GetInterfacePtr()));

        hr = pClassFactory->CreateInstance(
            NULL, __uuidof( IAppHostAdminManager ), (void **) &(iisAdmin.GetInterfacePtr()));

        bstr_t bstrSectionName("system.applicationHost/applicationPools");
        bstr_t bstrPath("MACHINE/WEBROOT/APPHOST");

        hr = iisAdmin->GetAdminSection(bstrSectionName, bstrPath, &(sitesElement.GetInterfacePtr()) );

        hr = sitesElement->get_Collection(&(sitesElementCollection.GetInterfacePtr()));

    DWORD sitesCount = 0;
        hr = sitesElementCollection->get_Count(&sitesCount); 
```

`sitesCount`当此代码在 IIS 模块中运行时为 0，但在 Windows 应用程序中运行时正常。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:47:51.437

最有可能的问题是应用程序池标识没有适当的权限来管理 IIS。尝试将应用程序池标识设置为与您在运行控制台应用程序时使用的用户相同，看看是否会有所不同。如果是这样，您可能需要将此代码设置在以提升用户身份运行的单独 AppPool 中，以让代码运行，同时限制以提升用户身份运行的代码。

# vb.net - 删除控件集合

> ID：12622329
> 
> 赞同：3
> 
> 时间：2012-09-27T13:18:36.590
> 
> 标签：vb.net, controls

我有一个表单 (Form1)，它有 30 个控件。当我点击一个按钮时，我想删除这 30 个按钮并将其他控件放在表单上。现在，我的问题是这太慢了。

我有这个列表，其中包含要删除的控件，并使用 For Each 遍历它们。

```
Private Sub ClearControls()
    'removing the controls from Me.Controls
    For Each Control As Control In ListToDelete
        Me.Controls.Remove(Control)
    Next
    ListToDelete = New List(Of Control)
End Sub 
```

现在，如果您查看表单，您会看到控件被一一删除。此操作大约需要 0.4 秒（使用内置秒表计时），这太长了。

是否有任何解决方案可以更快地删除控件，或者只能逐个删除控件？

也许一个重要的事实是一切都与数据库相连。这些控件是由我自己定义的一个类（TableDrawer）创建的，它创建一个矩形或圆形（取决于数据库中的信息）。我将自制控件添加到表单中，当我想删除它们时，需要 0.4 秒才能获取表单上的其他控件 - 以及我的数据库中的信息。

希望这可以解决一些问题，我希望你能帮助我......它真的必须快一点（我希望得到 0.1 秒或更低）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T14:35:24.427

Hiding the Panel first seems to make the controls disappear quicker than just clearing the Panel. See this code:

```
Option Strict On

Public Class Form1

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Panel1.Visible = False

        If Not Panel1.Controls.OfType(Of Button).Any() Then
            For x As Integer = 1 To 10
                For y As Integer = 1 To 10
                    Dim btn As New Button()
                    btn.Size = New Size(45, 45)
                    btn.Location = New Point((x - 1) * 45, (y - 1) * 45)
                    btn.Text = (x * y).ToString()
                    Panel1.Controls.Add(btn)
                    btn.Visible = True
                Next
            Next
        End If

        Panel1.Visible = True
    End Sub

    Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
        Panel1.Visible = False
        Panel1.Controls.Clear()
        Panel1.Visible = True
    End Sub
End Class 
```

This code has 2 buttons, and a Panel. Button1 generates 100 buttons, places them on a Panel. Button2 hides the panel before removing them. Perhaps you can experiment with this idea.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T13:24:53.260

这不是删除往往需要时间 - 它每次都重新绘制表单。尝试用调用来包围你的删除代码[`SuspendLayout`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.suspendlayout.aspx)和[`ResumeLayout`](http://msdn.microsoft.com/en-us/library/y53zat12.aspx)

```
Private Sub ClearControls()
    'removing the controls from Me.Controls
    Me.SuspendLayout()
    For Each Control As Control In ListToDelete
        Me.Controls.Remove(Control)
    Next
    Me.ResumeLayout()
    ListToDelete = New List(Of Control)
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T13:25:31.443

将控件放在面板容器控件中。移除面板容器会移除所有子控件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-19T15:21:14.667

kindly never used remove and panel.removeat to remove any controls. It won't be able to delete last control in panel layout.Especially for panel.removeat will return out of index error once delete the last end control in panels. I'm also wondering need to know why this is problem appears?

Stored all the control name in string array, find those controls in panel and delete them, Try below code will help you delete all control in panel for one short. Try using with find and removeBykey function will make your task easier.

```
Dim ctrllist() as string
Dim counts = 0

For each control in Me.panel1.controls
redim Preserve ctrllist(0 to counts) 
ctrllist(counts)=control.name  
counts+=1
Next

For counts=Lbound(ctrllist) to Ubound(ctrlllist)
  If me.panel1.controls.find(ctrllist(counts),True).Length>0 then

     me.panel1.controls.removeBykey(ctrllist(counts))

  End If
Next 
```

Hope it will help.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-17T08:20:14.397

Thanks user1884888! The technique helps me.

If I use Me.ScrollPanelControl.Controls.Clear() then the application goes unresponsive and there's no choice to terminate it from Task Manager but using this technique helps me.

This code is to help some one having the same problem.

```
 While (True)
                    Dim count = Me.ScrollPanelControl.Controls.Count
                    If count <= 0 Then
                        Exit While
                    End If
                    Dim firstCtrl = CType(Me.ScrollPanelControl.Controls(0), MyControl)
                    If Not firstCtrl.IsMoving Then
                        If Me.ScrollPanelControl.Controls.Find(firstCtrl.Name, True).Length > 0 Then
                            Me.ScrollPanelControl.Controls.RemoveByKey(firstCtrl.Name)
                        End If
                    ElseIf count > 1 Then
                        firstCtrl = CType(Me.ScrollPanelControl.Controls(1), MyControl)
                        If Me.ScrollPanelControl.Controls.Find(firstCtrl.Name, True).Length > 0 Then
                            Me.ScrollPanelControl.Controls.RemoveByKey(firstCtrl.Name)
                        End If
                    Else
                        Exit While
                    End If
                End While 
```

# php - 从日期字符串获取年份

> ID：12622331
> 
> 赞同：4
> 
> 时间：2012-09-27T13:18:42.293
> 
> 标签：php, html

我想检查当前年份是否大于日期字符串（DMY）这是我的代码

```
$OldDate = "09-30-2011";
$OldYear = strtok($OldDate, '-');
$NewYear = date("Y");

if ($OldYear < $NewYear) {
    echo "Year is less than current year"   
} else {
    echo "Year is greater than current year";
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T13:20:29.793

您可以使用[`strtotime()`](http://php.net/manual/en/function.strtotime.php)：

```
$OldDate = "2011-09-30";

$oldDateUnix = strtotime($OldDate);
if(date("Y", $oldDateUnix) < date("Y")) {
    echo "Year is less than current year";
} else {
    echo "Year is greater than current year";
} 
```

**更新**

因为您使用的是非常规的日期戳，所以您必须使用不同的方法，例如：

```
$OldDate = "09-30-2011";
list($month, $day, $year) = explode("-", $OldDate);
$oldDateUnix = strtotime($year . "-" . $month . "-" . $day);
if(date("Y", $oldDateUnix) < date("Y")) {
    echo "Year is less than current year";
} else {
    echo "Year is greater than current year";
} 
```

**注意：**如果您想**始终**确保您的日期被 正确理解`strtotime`，请使用**YYYY-MM-DD**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:21:12.540

使用日期函数获取年份

```
$OldDate = date("Y",strtotime("09-30-2011"));
$NewYear = date("Y",strtotime("now"));

if($OldYear<$NewYear)
{
echo "Year is less than current year"   
}
else
{
 echo "Year is greater than current year";
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-12T06:53:17.120

您可以通过以下方式实现您的目标：

```
$input_date = date("09-30-2011");
$input_date_arr = explode("-", $input_date);
$currYear = date("Y");
$inputYear = $input_date_arr[2];

if ($currYear > $inputYear) {
echo "Current year is greater than given year!";
} else {
echo "Current year is not greater than given year!";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T13:21:27.330

```
 $OldDate = "09-30-2011";
       $OldYear = date('Y',strtotime($OldDate));
       $NewYear = date("Y");
       if($OldYear<$NewYear)
        {
         echo "Year is less than current year"   
          }
        else
         {
          echo "Year is greater than current year";
         } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T13:26:07.530

您可以将字符串转换为时间戳，并使用当前时间戳进行检查

```
if(time($OldDate) < time()){
// do stuff
} else {
// do other stuff
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-05T16:09:33.830

做这个，

```
$dateString = '2021-02-24';                     

$yr = date("Y", strtotime($dateString)); 
$mon = date("m", strtotime($dateString)); 
$date = date("d", strtotime($dateString)); 
```

# highcharts - Highcharts 向下钻取 Y 轴最小值和最大值

> ID：12622337
> 
> 赞同：0
> 
> 时间：2012-09-27T13:18:56.613
> 
> 标签：highcharts, drilldown

任何人都可以举一个`drilldown`Y 轴标签的最小值和最大值的图表示例吗？这是来自[Highcharts 网站](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-drilldown/)的示例的[jsfiddle](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-drilldown/)。

我一直在试图弄清楚如何为 Y 轴标签设置最小值和最大值。因此，例如，我不想从 0 开始，而是从 88 开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:07:06.517

To get the desired result - for example, start yAxis values at 88, you should use this settings:

```
new Highcharts.Chart({
    ....
    yAxis: {
        min: 88,
        startOnTick: false // To prevent rounding of this value.
    },
    ....
}); 
```

Hope this helps.

# ms-access - 如何在表单中仅显示 1 条记录？

> ID：12622339
> 
> 赞同：0
> 
> 时间：2012-09-27T13:19:03.837
> 
> 标签：ms-access, ms-access-2007

我在 Access 2007 项目中有一个模式弹出表单。

表格中有 1 行，`Config`表格中的每个文本框都绑定到`Config`.

**表格 > 属性 > 日期：**

```
Record Source = SELECT TOP 1 * FROM Config

Allow Edits = Yes 
```

使用`Allow Additions = No`，表单只显示背景 - 没有文本框。

使用`Allow Additions = Yes`，表单每次都会显示一条新记录。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:29:34.613

我发现了问题：

*属性 > 数据 > 数据输入*是`Yes`- 更改它以`No`解决问题！

# php - 使用 Laravel 的 Fluent 插入忽略

> ID：12622341
> 
> 赞同：12
> 
> 时间：2012-09-27T13:19:11.383
> 
> 标签：php, mysql, laravel

有没有一种快速的方法来修改由[Laravel 的 Fluent](http://laravel.com/docs/database/fluent)生成的 SQL 查询，使其具有一个`INSERT IGNORE`而不是通常的`INSERT`?

我正在尝试插入一个包含五十个元素的数组。手动写出整个查询会使代码膨胀并使其更容易受到人为错误的影响。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-08-24T13:43:34.423

在你的模型中试试这个魔法：

```
public static function insertIgnore($array){
    $a = new static();
    if($a->timestamps){
        $now = \Carbon\Carbon::now();
        $array['created_at'] = $now;
        $array['updated_at'] = $now;
    }
    DB::insert('INSERT IGNORE INTO '.$a->table.' ('.implode(',',array_keys($array)).
        ') values (?'.str_repeat(',?',count($array) - 1).')',array_values($array));
} 
```

像这样使用：

```
Shop::insertIgnore(array('name' => 'myshop')); 
```

如果该“名称”属性是唯一键，则这是防止在多用户环境中使用 firstOrCreate 可能发生的约束冲突的好方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-17T18:58:50.773

我无法按照 Rastislav 的回答中的建议进行修补。

这对我有用：

1.  自定义查询语法类中的重写`compileInsert`方法，它扩展了框架的 MySqlGrammar 类。

2.  `setQueryGrammar`通过从数据库连接实例调用方法来使用此自定义语法类的实例。

所以，类代码是这样的：

```
<?php

namespace My\Namespace;

use Illuminate\Database\Query\Builder;
use Illuminate\Database\Query\Grammars\MySqlGrammar;

/**
 * Changes "INSERT" to "INSERT IGNORE"
 */
class CustomMySqlGrammar extends MySqlGrammar
{
    /**
     * Compile an insert statement into SQL.
     *
     * @param  \Illuminate\Database\Query\Builder  $query
     * @param  array  $values
     * @return string
     */
    public function compileInsert(Builder $query, array $values)
    {
        // Essentially we will force every insert to be treated as a batch insert which
        // simply makes creating the SQL easier for us since we can utilize the same
        // basic routine regardless of an amount of records given to us to insert.
        $table = $this->wrapTable($query->from);

        if (! is_array(reset($values))) {
            $values = [$values];
        }

        $columns = $this->columnize(array_keys(reset($values)));

        // We need to build a list of parameter place-holders of values that are bound
        // to the query. Each insert should have the exact same amount of parameter
        // bindings so we will loop through the record and parameterize them all.
        $parameters = collect($values)->map(function ($record) {
            return '('.$this->parameterize($record).')';
        })->implode(', ');

        return "insert ignore into $table ($columns) values $parameters";
    }
} 
```

我从框架的类中复制了`compileInsert`方法，然后在方法内部，我只更改`insert`为`insert ignore`. 其他一切都保持不变。

然后，在代码的特定位置，在应用程序（计划任务）中，我需要“插入忽略”，我简单地做了如下：

```
<?php

use DB;
use My\Namespace\CustomMySqlGrammar;

class SomeClass
{
    public function someMethod()
    {
        // Changes "INSERT" to "INSERT IGNORE"
        DB::connection()->setQueryGrammar(new CustomMySqlGrammar());

        // et cetera... for example:
        ModelClass::insert($data);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-07-19T20:14:25.257

## 2018 年 Laravel Eloquent 的更新答案

这也处理多个同时插入（而不是一次一个记录）。

> 警告：[埃里克在下面的评论](https://stackoverflow.com/questions/12622341/insert-ignore-using-laravels-fluent/51431044?noredirect=1#comment99055565_51431044)可能是正确的。此代码适用于我过去的项目，但在再次使用此代码之前，我会仔细查看它并添加测试用例并调整功能，直到它始终按预期工作。这可能就像将 TODO 行向下移动到`if`大括号外一样简单。

将其放入模型的类或模型扩展的 BaseModel 类中：

```
/**
 * @see https://stackoverflow.com/a/25472319/470749
 * 
 * @param array $arrayOfArrays
 * @return bool
 */
public static function insertIgnore($arrayOfArrays) {
    $static = new static();
    $table = with(new static)->getTable(); //https://github.com/laravel/framework/issues/1436#issuecomment-28985630
    $questionMarks = '';
    $values = [];
    foreach ($arrayOfArrays as $k => $array) {
        if ($static->timestamps) {
            $now = \Carbon\Carbon::now();
            $arrayOfArrays[$k]['created_at'] = $now;
            $arrayOfArrays[$k]['updated_at'] = $now;
            if ($k > 0) {
                $questionMarks .= ',';
            }
            $questionMarks .= '(?' . str_repeat(',?', count($array) - 1) . ')';
            $values = array_merge($values, array_values($array));//TODO
        }
    }
    $query = 'INSERT IGNORE INTO ' . $table . ' (' . implode(',', array_keys($array)) . ') VALUES ' . $questionMarks;
    return DB::insert($query, $values);
} 
```

像这样使用：

`Shop::insertIgnore([['name' => 'myShop'], ['name' => 'otherShop']]);`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-08-19T15:57:28.217

# Laravel 5.8.33+ 的答案

如果现在有人读到这个：不需要任何黑客或查询生成器扩展。查询构建器本机提供了一个`insertOrIgnore`方法来做到这一点。

只需使用

```
DB::table('tablename')->insertOrIgnore([
    ['column_name' => 'row1', 'column2_name' => 'row1'],
    ['column_name' => 'row2', 'column2_name' => 'row2']
]); 
```

[有关详细信息，请参阅文档](https://laravel.com/docs/7.x/queries#inserts)或[API 文档](https://laravel.com/api/7.x/Illuminate/Database/Query/Builder.html#method_insertOrIgnore)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T13:31:49.383

对于这项工作，您需要创建一个新的语法，其中包含正确的字符串：

[语法.php](https://github.com/laravel/laravel/blob/4d3c68129b89c6bc8131aca765a63dba8fee92b0/laravel/database/query/grammars/grammar.php#L375) ^((1))

语法是`DB`or 在这种情况下`Database`存储连接的公共属性。这不是很直接，但从属性的可见性，您应该能够将您的特殊语法注入数据库层。

我还建议您提出该项目的问题，他们可能对如何使此类情况更加灵活有更好的想法。

* * *

^((1))这是以前的，到答案参考日期为止。如果你今天看到这个，你需要适应你使用的 Laravel 版本，例如[Grammar.php for 4.0](https://github.com/laravel/framework/blob/4.0/src/Illuminate/Database/Query/Grammars/Grammar.php#L545)，这些类已经移到`laravel/framework`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-02T02:53:16.753

将以下方法 insertIgnore 添加到您的模型

```
<?php

namespace App;

use Illuminate\Auth\Authenticatable;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Auth\Passwords\CanResetPassword;
use Illuminate\Foundation\Auth\Access\Authorizable;
use Illuminate\Contracts\Auth\Authenticatable as AuthenticatableContract;
use Illuminate\Contracts\Auth\Access\Authorizable as AuthorizableContract;
use Illuminate\Contracts\Auth\CanResetPassword as CanResetPasswordContract;

class User extends Model implements AuthenticatableContract,
                                    AuthorizableContract,
                                    CanResetPasswordContract
{
    use Authenticatable, Authorizable, CanResetPassword;

    /**
     * The database table used by the model.
     *
     * @var string
     */
    protected $table = 'users';

    /**
     * The attributes that are mass assignable.
     *
     * @var array
     */
    protected $fillable = ['name', 'email', 'password'];

    /**
     * The attributes excluded from the model's JSON form.
     *
     * @var array
     */
    protected $hidden = ['password', 'remember_token'];

    public static function insertIgnore(array $attributes = [])
    {
        $model = new static($attributes);

        if ($model->usesTimestamps()) {
            $model->updateTimestamps();
        }

        $attributes = $model->getAttributes();

        $query = $model->newBaseQueryBuilder();
        $processor = $query->getProcessor();
        $grammar = $query->getGrammar();

        $table = $grammar->wrapTable($model->getTable());
        $keyName = $model->getKeyName();
        $columns = $grammar->columnize(array_keys($attributes));
        $values = $grammar->parameterize($attributes);

        $sql = "insert ignore into {$table} ({$columns}) values ({$values})";

        $id = $processor->processInsertGetId($query, $sql, array_values($attributes));

        $model->setAttribute($keyName, $id);

        return $model;
    }
} 
```

您可以使用：

```
App\User::insertIgnore([
    'name' => 'Marco Pedraza',
    'email' => 'mpdrza@gmail.com'
]); 
```

它将执行的下一个查询：

```
insert ignore into `users` (`name`, `email`, `updated_at`, `created_at`) values (?, ?, ?, ?) 
```

如果您已启用或禁用，此方法会自动添加/删除 Eloquent 时间戳。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-16T16:09:13.997

不确定是否对任何人有帮助，但最近我已经将 hakre 的方法应用于 Laravel 5：

您必须更改以下 3 个文件才能使插入忽略工作：

1.  在 Builder.php (vendor/laravel/framework/src/illuminate/database/query/Builder.php) 中，您必须克隆函数 insert，将名称更改为 insertIgnore，并将语法调用函数更改为：`$sql = $this->grammar->compileInsertIgnore($this, $values);)`

2.  在 Grammar.php (vendor/laravel/framework/src/illuminate/database/query/grammars/Grammar.php) 中，您必须克隆 compileInsert 函数并将其重命名为 compileInsertIgnore，您将在此处更改返回：`return "insert ignore into $table ($columns) values $parameters";`

3.  在 Connection.php (vendor/laravel/framework/src/illuminate/database/Connection.php) 你必须简单地克隆函数 insert 并将其重命名为 insertIgnore

现在您应该完成了，connection 能够识别函数 insertIgnore，builder 能够将其指向正确的语法，并且语法在语句中包含“ignore”。请注意，这适用于 MySQL，但对于其他数据库可能不那么顺利。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-10T05:05:13.360

我终于找到了这个[https://github.com/yadakhov/insert-on-duplicate-key](https://github.com/yadakhov/insert-on-duplicate-key)这对我有很大帮助

用户::insertIgnore($users); 这是我正在使用的方法，为其提供行数组及其返回的受影响行

通过 composer 安装它： composer require yadakhov/insert-on-duplicate-key

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-07-15T09:45:52.903

避免编写代码的选项是： [https ://github.com/guidocella/eloquent-insert-on-duplicate-key](https://github.com/guidocella/eloquent-insert-on-duplicate-key)

我刚刚测试过它 - 它一次可以与我的 5000 个插入一起使用，有时会重复......

有了它，您将获得以下功能：

```
User::insertOnDuplicateKey($data);
User::insertIgnore($data); 
```

* * *

## 回答 #10

> 赞同：-18
> 
> 时间：2012-09-27T13:26:40.647

```
$your_array = array('column' => 'value', 'second_column' => 'value');

DB::table('your_table')->insert($your_array); 
```

请记住，我不知道您的数据来自哪里，但您应该始终对其进行清理。如果您有多个记录，只需在循环中进行迭代。

至于`INSERT IGNORE`，在 fluent 库中找到`INSERT`方法，创建一个名为 insert_ignore 的新方法，方法与 insert 完全相同，只需使用`IGNORE`.

# javascript - Amazon S3 CORS PUT 失败

> ID：12622343
> 
> 赞同：6
> 
> 时间：2012-09-27T13:19:20.137
> 
> 标签：javascript, html, amazon-s3, xmlhttprequest, cors

我正在尝试使用 REST Api 和 HTML5 文件切片将一个大文件 (1.5GB) 上传到 Amazon S3。以下是上传代码的样子（为了便于阅读，代码被剥离）：

```
File.prototype.slice = File.prototype.webkitSlice || File.prototype.mozSlice || File.prototype.slice;

var length = u.settings.chunk_size; // 6MB
var start = chunk * length;
var end = Math.min(start + length, u.file.size);

var xhr = new XMLHttpRequest();
var path = "/" + u.settings.key;

path += "?partNumber=" + chunk + "&uploadId=" + u.upload_id;

var method = "PUT";
var authorization = "AWS " + u.settings.access_key + ":" + signature;
var blob = u.file.slice(start, end);

xhr.upload.addEventListener("progress", progress_handler, true);
xhr.addEventListener("readystatechange", handler, true);
xhr.addEventListener("error", error_handler, true);
xhr.addEventListener("timeout", error_handler, true);

xhr.open(method, u.settings.host + path, true);

xhr.setRequestHeader("x-amz-date", date);
xhr.setRequestHeader("Authorization", authorization);
xhr.setRequestHeader("Content-Type", u.settings.content_type);
xhr.setRequestHeader("Content-Disposition", "attachment; filename=" + u.file.name);

xhr.send(blob); 
```

`chunk_size`是 6MB。在一个块完成上传后，下一个块将紧随其后，依此类推。但有时（每 80 块左右），`PUT`请求失败，出现`e.type == "error"`, `e.target.status == 0`（令我惊讶）和`e.target.responseText == ""`. 在一个块失败后，代码重新尝试上传它，并得到完全相同的错误。当我刷新页面并继续上传（相同的块！）时，它就像一个魅力（对于 80 块左右，当它再次卡住时）。以下是请求在 chrome 开发工具中的外观：

![在此处输入图像描述](../Images/5faf7ed62ca9627b33629ba4b91cdac8.png) ![在此处输入图像描述](../Images/18ac97d22cc41a316db82baffbe70f5d.png) ![在此处输入图像描述](../Images/64cd7ea5ec7a2d36b41ebea63132d7b6.png)

任何想法为什么会发生这种情况，或者如何调试这样的事情？

编辑：这是`OPTIONS`回复：

![在此处输入图像描述](../Images/f06cb402318314d0ea08045ff4cafcf1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T08:18:23.290

我终于通过嗅探数据包发现了问题：有两个问题：

1.  对于`PUT`获得 a 的请求`4xx`（未测试其他非`2xx`响应），xhr 请求返回为 aborted (status = 0)；仍然没有找到解释，请查看[为什么 PUT 403 显示为已中止？](https://stackoverflow.com/questions/12634167/why-does-a-put-403-show-up-as-aborted)

2.  Amazon S3 回复`403`说`RequestTimeTooSkewed`，因为我的签名是在上传开始时生成的，并且在 15 分钟（触发`RequestTimeTooSkewed`错误的超时）后，它失败了，必须重新生成签名。由于第一个问题，在开发工具控制台或 js 代码中从未见过 403 错误。

重新生成签名后，一切都像魅力一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T23:41:25.333

您是否验证浏览器是否正在发出任何“选项”请求。如果是，则响应标头是什么。

# spring - 为什么我的 Spring PreAuthFilter 总是被调用？

> ID：12622348
> 
> 赞同：2
> 
> 时间：2012-09-27T13:19:39.263
> 
> 标签：spring, spring-mvc, configuration, spring-security

我的 Spring 3.1 应用程序配置如下

```
<http use-expressions="true" entry-point-ref="http401UnauthorizedEntryPoint">

    <intercept-url pattern="/app/demo" access="hasRole('Demo')" />
    <intercept-url pattern="/app/**" access="isAuthenticated()" />
    <intercept-url pattern="/admin/**" access="hasRole('Admin')" />

    <custom-filter position="PRE_AUTH_FILTER"
        ref="currentWindowsIdentityAuthenticationFilter" />

    <logout invalidate-session="true" delete-cookies="JSESSIONID"
        logout-url="/logout" logout-success-url="/logout-success" />

</http> 
```

我写了一个自定义的 preauth 过滤器。当我在根 URL 调用我的应用程序时，`/`过滤器链会挂接并运行 preauth 过滤器，尽管此资源不受保护。这意味着注销无法按设计工作。注销后再次执行登录。

我的实现是基于`org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter`类的。

这是正常行为还是可以通过某种方式解决？我希望仅在受保护的 URL 上执行身份验证。

正如我的旁注，我不打算配置`security='none'`，因为我想维护所有页面上的安全上下文。

[我已经在pastebin](http://pastebin.com/UsMBq2qi)上发布了适当的注销。过于冗长，无法包含在此处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:37:09.993

似乎您想要的是在`<http>`没有任何注销 URL 过滤器的情况下创建特殊的：

```
<http pattern="/logout/**" security="none" />

<http use-expressions="true" entry-point-ref="http401UnauthorizedEntryPoint">

    <intercept-url pattern="/app/demo" access="hasRole('Demo')" />
    <intercept-url pattern="/app/**" access="isAuthenticated()" />
    <intercept-url pattern="/admin/**" access="hasRole('Admin')" />

    <custom-filter position="PRE_AUTH_FILTER"
        ref="currentWindowsIdentityAuthenticationFilter" />

    <logout invalidate-session="true" delete-cookies="JSESSIONID"
        logout-url="/logout" logout-success-url="/logout-success" />

</http> 
```

[在此处](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#request-matching)阅读有关请求匹配机制的更多信息。

**编辑：**

@LukeTaylor 提到，*如果您想创建另一个过滤器链，那么该模式应该进入元素中*（这是否明确记录在某处？），所以我使用单独链的想法`PRE_AUTH_FILTER`显然行不通。`<http>`在`/logout`没有任何过滤器的情况下添加，这应该会阻止在注销请求时进行授权。

不过，我不知道如何防止像`/other`应用 PRE_AUTH_FILTER 这样的请求。一种方法可能是放弃`<http>`命名空间配置以使用两种模式[手动`filterChainProxy`](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#filter-chain-proxy)`<sec:filter-chain>`配置，但我不知道这是否值得。

@Michael-O：关于异常`IllegalArgumentException: A universal match pattern ('/**') is defined before other patterns`- 很奇怪，它是您的整个 XML 安全配置吗？或者也许这只是卢克所说的结果（另一个`<http>`元素应该有模式）......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T22:09:22.123

我能够确定问题，但由于整个链条的工作方式，它无法以现在的方式解决。

这是交易：

当您定义一个`<http>`元素时，`/**`您要求 Spring Security 在您定义的模式下的所有路径上触发整个过滤器链。其中一个人是否需要保护并不重要。Rob Winch 发布了一个非常[有用的视频](http://www.youtube.com/watch?v=if6EMTVZ200&feature=share&list=UU7yfnfvEUlXUIfm8rGLwZdA)。如果您仔细查看[默认过滤器堆栈](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#filter-stack)，您将应用哪些过滤器。其中有我的过滤器。

我的日志文件的前十行显示整个链都被触发，因为`/`与`<http>`配置匹配。最后，`FilterSecurityInterceptor`发现该资源不需要保护。此外，您会看到 也`CurrentWindowsIdentityAuthenticationFilter`被触发并执行了不需要的身份验证。

为什么？与基于标头的过滤器或 URL 处理过滤器相比，您没有触发/入口点来故意开始身份验证，无论 URL 是否需要保护，您都无需挑战客户端即可。定义这样`<http pattern="/unprotected-url" security="none" />`的内容绝对不会为您节省任何费用，因为您会丢失未受保护路径上的安全上下文。无论 URL 保护如何，您都希望让您的客户保持登录状态。

现在如何解决这个问题？你有两个选择：

1.  在 上定义一个`<http>`元素`/app/**`，`/admin/**`依此类推，但这确实很麻烦，并且到处都包含重复。我不会推荐这样的解决方案。此外，您可能不会在`/**`. 这是不希望的。
2.  将 preauth 过滤器拆分为两个过滤器：
    1.  `CurrentWindowsIdentityPreAuthenticationFilter`
    2.  `CurrentWindowsIdentityUrlAuthenticationFilter`

第二个选项解决了这个问题。

`CurrentWindowsIdentityPreAuthenticationFilter`：保持原样并始终执行身份验证。对于脚本访问或 REST 请求等 M2M 通信非常有帮助。 `CurrentWindowsIdentityUrlAuthenticationFilter`: 非常适合人际交往。它的工作原理基本上类似于基于表单的过滤器。如果定义一个 URL，比如说`/login`，当您请求受保护的资源时，您将被重定向到，并且在成功自动验证后，您将被重定向回您的实际资源。认证完成。公共资源保持未经身份验证，因为 preauth 过滤器`/login`仅像基于表单一样被触发。如果您退出，您将保持退出状态。

如果 Spring 的任何人能证实我的分析，我会很高兴。

# c# - 为什么，第一个 query.ToList() 工作，但第二个不工作？

> ID：12622353
> 
> 赞同：6
> 
> 时间：2012-09-27T13:20:01.083
> 
> 标签：c#, entity-framework, linq

我的问题是 ToLinq() 方法：

我不明白为什么第一个请求没有问题，但第二个给了我一个例外，例如：

（LINQ to Entities 不支持 LINQ 表达式 arrayIndex n 的节点类型）

```
 var q = from a in ctx.ImmImmobilisations select a;
            q = q.Where(x => x.CodeEntite      == "EDEF");
            q = q.Where(x => x.CodeAffectation == "000001");
            q = q.Where(x => x.Unite           == "ITS");
            q = q.OrderBy(x => x.CodeImmobilisation);
            List<ImmImmobilisation> res = q.ToList();

            var query = from e in ctx.ImmImmobilisations select e;
            if (!string.IsNullOrEmpty(args[0])) query = query.Where(x => x.CodeEntite      == args[0]);
            if (!string.IsNullOrEmpty(args[1])) query = query.Where(x => x.CodeAffectation == args[1]);
            if (!string.IsNullOrEmpty(args[2])) query = query.Where(x => x.CodeFamille     == args[2]);
            if (!string.IsNullOrEmpty(args[3])) query = query.Where(x => x.CodeCCout       == args[3]);
            if (!string.IsNullOrEmpty(unite))   query = query.Where(x => x.Unite      == unite);
            query = query.OrderBy(x => x.CodeImmobilisation);
            var ress = query.ToList(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:22:01.340

您不能将索引器与 LINQ to 实体一起使用。您需要将该索引的值存储在一个新变量中。

像这样：

```
var arg1 = args[0];    
if (!string.IsNullOrEmpty(arg1)) query = query.Where(x => x.CodeEntite == args1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:21:56.363

您的异常非常明确地说明了您的问题：您不能在 L2Entities 表达式中使用数组元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:28:12.207

您也可以通过以下方式使用 Equals 方法来实现它：

```
if (!string.IsNullOrEmpty(args[0])) 
   query = query.Where(x => Equals(x.CodeEntite, args[0]) ); 
```

# servicestack - 记录 Servicestack 错误请求

> ID：12622355
> 
> 赞同：3
> 
> 时间：2012-09-27T13:20:03.267
> 
> 标签：servicestack

当您启用 ValidationFeature 插件时，有没有办法记录在 ResponseStatus 中填充的验证结果？

据我所知，任何进来的请求都会得到验证，如果验证通过，就会进入服务。使用请求过滤器我可以记录进来的请求，但是使用响应过滤器我只能记录有效的请求。

我试图记录所有响应，尤其是由于验证错误而返回的 HttpStatus 400 (Bad request)。

我也尝试过使用 RequestLog 插件，但据我了解，记录的内容只是有效的请求（即发送到服务的请求）。

我希望你明白我想说什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T16:27:16.073

查看[7digital 如何自定义 ServiceStack 的验证功能](http://developer.7digital.com/blog/lessons-learnt-whilst-using-servicestack)以支持日志记录。

## 相关功能

新的 API 支持`ServiceRunner`您可以覆盖的概念，以添加您自己的事件和异常挂钩，您可以[在 wiki 中阅读](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)。

还有内置的[请求记录器](https://github.com/ServiceStack/ServiceStack/wiki/Request-logger)，可让您了解最近处理的请求的详细信息。

如果您想查看验证功能的日志记录，请在 GitHub 项目上创建一个[问题。](https://github.com/ServiceStack/ServiceStack/issues)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-23T20:58:29.190

从 ValidationFeature 插件记录错误的快速方法就是这样：

```
public override void Configure(Container container)
{
    ...etc...

    Plugins.Add(new RequestLogsFeature() { etc });
    Plugins.Add(new ValidationFeature()
    {
        ErrorResponseFilter = MyValidationError
    });

    ...etc...
}

public object MyValidationError(ValidationResult validationResult, object errorDto)
{
    Container.Resolve<IRequestLogger>().Log(null, null, errorDto, TimeSpan.Zero);
    return errorDto;
} 
```

但是，就我而言，我意识到在服务本身中记录验证错误不是合适的地方。相反，我将这些错误记录在使用该服务的应用程序中。

# css - 如附图所示，如何在 CSS 中进行截断？

> ID：12622358
> 
> 赞同：0
> 
> 时间：2012-09-27T13:20:18.577
> 
> 标签：css

如何在 CSS3 的帮助下制作这种样式？我知道如何做圆角，但我也需要设计一个小切口，如附图所示。我怎样才能做到这一点？

![像这样](../Images/049977f4f64b1767856a039c6c0e548f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:26:12.397

如果我没有误解……这只是一个简单的例子。

一个例子：http: [//jsfiddle.net/JJ8ZB/7/](http://jsfiddle.net/JJ8ZB/7/)

```
.cnt{ 
    background-image: url('myimage');
    background-repeat:none;
    background-color:#xxxxxx;
}

.ff, .ss{
    border-radius:x px;

}
.ff{
    border-bottom-right-radius: 0px;
}
.ss{
    border-top-right-radius: 0px;
    height:x px;
}​

<div class="cnt">
    <div class="ff">Latest news....</div>
    <div class="ss">Click here...</div>
</div> 
```

# reporting-services - 如何在 SSRS 中获取当前月份名称？

> ID：12622359
> 
> 赞同：15
> 
> 时间：2012-09-27T13:20:18.607
> 
> 标签：reporting-services

我需要当前月份名称作为我的 ssrs 报告中的默认参数名称。如何使用 ssrs 表达式获取当前月份名称？

例如“27-09-2012”会变成“September”
，我还需要一个....

27-09-2012 到上个月的名称以及（八月）

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-27T14:48:20.253

第一个问题：

```
=MonthName(Month(Fields!datefield.Value)) 
```

第二个问题：

```
=MonthName(Month(DateAdd("m", -1, Today()))) 
```

我认为第二个问题的答案可能是这样的，首先将日期转换为月份，然后从月份值中减去 1，然后将其转换为月份名称。

进一步阅读：

*   [SSRS 报告从月份索引或日期获取月份名称](http://praveenbattula.blogspot.com.br/2010/02/ssrs-reports-get-month-name-from-month.html)
*   [在报告服务中将月份编号转换为月份名称](http://social.msdn.microsoft.com/Forums/is/sqlreportingservices/thread/d9c4f60d-3961-4e46-960a-e7c86a50f201)

关闭：我会更改您使用的日期格式，`2012-09-27`因为它适用于每种设置，并且在转换日期格式时应该让您高枕无忧。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-06T14:57:14.343

不要减去 1 b/c 它不会在一月份工作。使用这个： MonthName(Month(DateAdd("m", -1, CDate(Today))))

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-03T17:53:23.197

作为说明，我尝试了 =MonthName(Month(today())) 的建议。对于表达式所在的任何字段，我会得到#error。但是， =MonthName(str(Month(today()))) 对我有用。我不确定 MonthName 方法是否更改为需要字符串，或者我的程序是否存在问题。只是想我会发布这个，以防其他人遇到同样的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-18T04:56:51.440

对于上个月，我找到了通用方式： =MonthName(Month(CDate(Today()))-1,False) 对于 SEPTEMBER（全月名称）'OR' =MonthName(Month(CDate(Today()))-1， True) 对于 SEP（短月份名称）

# python - 在 python 中混合线程/进程的问题

> ID：12622365
> 
> 赞同：0
> 
> 时间：2012-09-27T13:20:34.053
> 
> 标签：python, multithreading, queue, multiprocessing

我刚开始尝试做多线程/多处理器的东西，遇到了一些问题。我想要做的是生成一些对应该从远程数据库下载的数据的请求。这些存储在 Queue.Queue 中（我们称之为 in_q）。一旦生成了所有请求，我就会启动有限数量的线程类，该线程类将 in_q 和另一个队列 (out_q) 作为输入。然后我从 q_in 获取（）作业并将结果输出到 q_out。所以这部分是 IO-bound 因此我认为线程是一个不错的选择。来自 q_out 的结果被进程池消耗，这些进程池对进程执行一些工作。这部分受 CPU 限制，因此我认为进程将是一个不错的选择。

现在这似乎工作正常，除了我遇到了我在下面演示的奇怪行为。

```
import threading
import Queue
import multiprocessing as mp

class TestThread(threading.Thread):

    def __init__ ( self, threadnr,resultPool,jobPool ):
      self.threadnr = threadnr
      self.resultPool = resultPool
      self.jobPool = jobPool
      threading.Thread.__init__ ( self )    

    def run(self):
        while True:
            job = self.jobPool.get()
            if job != None:
                for a in range(10):
                    for i in xrange(1000000):
                        pass
                print "Thread nr %d finished job %d" % (self.threadnr,job)
                self.resultPool.put([self.threadnr,job+1])
                self.jobPool.task_done()           

def test(i):
    print mp.current_process().name,"test",i
    return mp.current_process().name,"test",i

if __name__ == '__main__':        
    q_in = Queue.Queue()   
    q_out = Queue.Queue() 
    nr_jobs = 20
    res = []
    nr_threads = 4
    threads = []

    for i in range(nr_jobs):
        q_in.put(i)

    for i in range(nr_threads):
        t = TestThread(i,q_out,q_in)
        t.start()
        threads.append(t)

    p_pool = mp.Pool(4)   

    for i in range(nr_jobs):
        job = q_out.get(block=True)
        print "Got job",job
        res.append(p_pool.apply_async(test,(job,)))

    p_pool.close()
    p_pool.join()

    for r in res:
        print r.get()

    for t in threads:
        t.join() 
```

这个的输出是：

```
Thread nr 2 finished job 2
Got job [2, 3]
Thread nr 0 finished job 0
Got job [0, 1]
Thread nr 1 finished job 1
Got job [1, 2]
Thread nr 3 finished job 3
Got job [3, 4]
Thread nr 2 finished job 4
Got job Thread nr 0 finished job 5[
2, 5]
Got job [0, 6]
Thread nr 1 finished job 6
Got job [1, 7]
Thread nr 3 finished job 7
Got job [3, 8]
Thread nr 2 finished job 8
Got job [2, 9]
Thread nr 0 finished job 9
Got job [0, 10]
PoolWorker-4 test [1, 2]
PoolWorker-4 test [1, 7]
PoolWorker-3 test [3, 4]
PoolWorker-3 test [3, 8]
PoolWorker-2 test [0, 1]
PoolWorker-2 test [0, 6]
PoolWorker-2 test [0, 10]
PoolWorker-1 test [2, 3]
PoolWorker-1 test [2, 5]
PoolWorker-1 test [2, 9]
('PoolWorker-1', 'test', [2, 3])
('PoolWorker-2', 'test', [0, 1])
('PoolWorker-4', 'test', [1, 2])
('PoolWorker-3', 'test', [3, 4])
('PoolWorker-1', 'test', [2, 5])
('PoolWorker-2', 'test', [0, 6])
('PoolWorker-4', 'test', [1, 7])
('PoolWorker-3', 'test', [3, 8])
('PoolWorker-1', 'test', [2, 9])
('PoolWorker-2', 'test', [0, 10]) 
```

这是一个测试程序，在很大程度上就像我的真实程序一样工作。我觉得奇怪的是，即使线程需要相对较长的时间来完成进程，在线程全部完成工作之前不会打印出来。看起来工作是连续消耗的，但进程的输出直到所有线程都完成后才会出现。

在这个例子中它是相当无害的（如果烦人的话），但是在我的真实程序中这个......输出排队似乎会导致内存错误，因为进程的所有输出都被延迟到最后一个线程完成。

作为一个附加问题，混合线程和进程是否是一个好主意，或者我应该坚持一个或另一个？

我将不胜感激对此事的任何想法。

# asp.net - 307 重定向规则与 Microsoft Rewrite Module 2.0

> ID：12622367
> 
> 赞同：1
> 
> 时间：2012-09-27T13:20:47.857
> 
> 标签：asp.net, redirect, iis-7, url-rewriting, url-rewrite-module

是否可以使用 Microsoft Rewrite Module 2.0 for IIS 7 在 web.config 中创建 307 重定向规则？目标是将一些发布表单请求重定向到同一域中的另一个路径。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T13:53:23.560

将动作**标签的****redirectType**属性设置为**“临时”**

 ****例如。

```
<rewrite>
      <rules>
        <rule name="RedirectRule" stopProcessing="true">
          <match url="(.*)" ignoreCase="true" />
          <action type="Redirect" url="http://www.newdomain.com/{R:1}" redirectType="Temporary" />
            <conditions>
                <add input="{HTTP_HOST}" pattern="www\.old-domain\.com" />
            </conditions>
        </rule>
      </rules>
    </rewrite> 
```****

# vb.net - 在电子表格中使用列名没有索引，使用 vb,net

> ID：12622368
> 
> 赞同：1
> 
> 时间：2012-09-27T13:20:50.793
> 
> 标签：vb.net, excel

我一直在编写一些代码来从应用程序中提取数据并将其解析为电子表格。

我的电子表格如下所示：

```
Scenario     ClientName         ClientNumber

5555        Smith               s0001

6776        Charles           d6666 
```

我有这个代码：

Dim ObjExcel As New Excel.Application Dim sWindow As New WinWindow ObjExcel.Visible = False Dim stext As String

```
 ObjExcel.Workbooks.Open("c:\data\calcresults.xlsx")
            Dim ObjWS As Excel.Worksheet = ObjExcel.Worksheets("IP")

            Dim iNextRow As Integer = ObjWS.UsedRange.End(Excel.XlDirection.xlDown).Row + 1

            ObjWS.Cells(iNextRow,1 ) = "d66666"
            ObjWS.Cells(iNextRow, 2) = "s77898" 
```

想使用列名而不是索引，例如：

ObjWS.Cells(iNextRow,"Scenario" ) = "新行数据，第一列"

有什么想法我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:04:51.280

我从您的帖子中猜测您正在打开工作簿并每次都更新相同的列值？

您可以做的是通过选择工作表中的单元格并将名称输入到名称框中来命名 Excel 中的范围，如下所示：

![Excel](../Images/fdb1b4dcbd3fa8df42dab3c5d90fc8ed.png)

然后您可以按如下方式操作：

```
Dim r1 As Range
Set r1 = ActiveSheet.Range("Scenario")

r1.Value = "OOps, changed it!"
r1.Offset(1, 0).Value = "This is A2" 
```

此外，您可以只参考范围：

```
Dim r As Range
Set r = ActiveSheet.Range("A1")
r.Value = "gello" 
```

您还可以为多个单元格设置范围名称 - 即多行/多列。然后操作：

```
Dim r2 As Range
Set r2 = ActiveSheet.Range("SomethingElse")
r2.Cells(1) = "Summit Else 0"
r2.Cells(2) = "Summit Else 1"
r2.Cells(3) = "Summit Else 2" 
```

仅访问行/列索引我看不出有什么问题。

# c++ - COBOL 到 C++ 数据转换

> ID：12622372
> 
> 赞同：0
> 
> 时间：2012-09-27T13:21:05.613
> 
> 标签：c++, cobol

我有需要转换的要求 -

将高值移至 W005-TEMP1。
将低值移至 W005-TEMP2。

我如何在 C++ 中编写这两个代码？

谢谢阿克谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T13:53:50.037

在 COBOL 中，HIGH-VALUES 表示在所使用的整理序列中具有最高序号位置的字符出现一次或多次。类似地，LOW-VALUES 表示在所使用的整理顺序中具有最低序号位置的字符。

这里的关键是“使用的整理顺序”。**SPECIAL-NAMES**段落可用于指定自定义的整理顺序，但通常不会这样做（仍然检查一下）。在没有自定义整理顺序的情况下，对于 EBCDIC 和 ASCII 字符集，HIGH-VALUES 等于 X'FF'，LOW-VALUES 是 X'00'。

要将 W005-TEMP1 设置为 HIGH-VALUES，您需要用 X'FF' 填充它占用的每个字节。要将 W005-TEMP2 设置为 LOW-VALUES，您需要用 X'00' 填充它占用的每个字节。

# c# - MVC 文本框不接受可为空的 int 为空

> ID：12622373
> 
> 赞同：1
> 
> 时间：2012-09-27T13:21:10.573
> 
> 标签：c#, model-view-controller, validation

模型

```
public int? SizeLength { get; set; } 
```

看法

```
<div class="editor-field">
    @Html.TextBoxFor(p => p.SizeLength, new { @style = "Width: 75px" })
    @Html.ValidationMessageFor(p => p.SizeLength)
</div> 
```

问题：

当我将字段留空时，我得到“字段 SizeLength 必须是数字。”。将字段留空应在返回的模型中转换为空值。为什么我的字段类型是可为空的 int 时会收到此消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:28:31.257

尝试`EditorFor`，而不是`TextBoxFor`

不确定它是否会起作用，因为对象的内容（EditorFor 或 TextBoxFor）是一个空字符串，而不是 null，因此您必须处理转换问题，可能会添加一个默认值。

# image - 在 Matlab 中将 canny 边缘添加到原始图像中

> ID：12622382
> 
> 赞同：0
> 
> 时间：2012-09-27T13:21:30.327
> 
> 标签：image, matlab

我在 matlab 中使用了 edge(I,'canny') 函数来查找图像 I 的 canny 边缘。该函数返回一个由 0 和 1 组成的逻辑数组，它指示在特定像素处是否存在边缘。

现在我想将基于 canny 的图像添加到原始图像中，例如 IF = I +（I 的 canny 图像）。有人可以帮我在 Matlab 中执行此功能吗？我的意思是建议一种启发式方法来实现我打算做的事情

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:24:05.600

将两个图像都转换为双倍，以某种方式标准化并使用`+`. 如果原始图像有 3 个通道，则使用`bsxfun`代替`+`

# perl - 了解操作系统/平台是否支持 IPv6 套接字以在 Perl 中侦听 IPv4 的最佳方法是什么？

> ID：12622387
> 
> 赞同：3
> 
> 时间：2012-09-27T13:21:44.173
> 
> 标签：perl, sockets, ipv6

（如果重复，请关闭此线程，我努力了，但找不到任何匹配的问题）

似乎某些操作系统/平台在绑定到 IPv6 通配符地址时会同时监听 IPv6 和 IPv4 (tcp) 连接，而有些操作系统/平台仅监听 IPv6，如下所述：

[对于 V6Only 参数](http://search.cpan.org/~pevans/IO-Socket-IP-0.17/lib/IO/Socket/IP.pm)

使用以下几行：

> 如果您的平台不支持禁用此选项，但您仍想同时侦听 AF_INET 和 AF_INET6 连接，则必须创建两个侦听套接字，一个绑定到每个协议

在“ [IPv6 如何在 Java 平台上工作](http://docs.oracle.com/javase/1.5.0/docs/guide/net/ipv6_guide/index.html)”一节中

[根据这个 SO question 中的](https://stackoverflow.com/questions/1618240/how-to-support-both-ipv4-and-ipv6-connections)正确答案

现在我想编写一些 Perl 代码，它可以确定底层操作系统/平台是否同时监听 IPv6 和 IPv4（如果绑定到 IPv6），如果是，我将只绑定到 IPv6，如果没有，我将创建 2 个套接字（ 1 个用于 IPv4，另一个用于 IPv6）。

我想知道这可能是最好的方法吗？

如[IO::Socket::IP](https://metacpan.org/pod/IO::Socket::IP)中所述，我可以使用

```
if( IO::Socket::IP->CAN_DISABLE_V6ONLY ) {
    ...
}
else {
    ...
} 
```

但是，我不确定它是否会准确地告诉我

> 如果底层操作系统/平台同时监听 IPv6 和 IPv4（如果绑定到 IPv6）

或者它只会告诉

> 不能禁用 IPV6_V6ONLY 套接字选项

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T14:27:36.620

> 它只是告诉“不能禁用 IPV6_V6ONLY 套接字选项”

这是对的。

您可以尝试创建一个 PF_INET6 套接字，然后如果成功，请检查其 IPV6_V6ONLY 套接字选项。如果这是真的，那么套接字只监听 IPv6 而不是 IPv4，所以你必须创建另一个。如果为 false，则套接字将同时捕获 IPv6 和 IPv4，而这一个套接字就足够了。

# clearcase - 如何使用 CCRC 递归检出文件和子目录

> ID：12622388
> 
> 赞同：1
> 
> 时间：2012-09-27T13:21:50.043
> 
> 标签：clearcase, clearcase-remote-client

我正在使用以下版本的 clearcase - Rational ClearCase Remote Client 版本：7.1.2

在我尝试递归检出文件和文件夹时，我阅读了这些链接：

*   [如何使用 ClearCase 执行递归结帐？](https://stackoverflow.com/questions/33577/how-do-i-perform-a-recursive-checkout-using-clearcase)
*   [http://www.ibm.com/developerworks/rational/library/4687.html](http://www.ibm.com/developerworks/rational/library/4687.html)

问题是我无法找到这些文章中使用的这些 bin 文件：

1.  `cleartool.exe`不在 ( `c:\Program Files\Rational\ClearCase\bin\cleartool.exe`)
2.  `clearmenuadmin.exe`不在 ( `C:\Program Files\Rational\ClearCase\bin\clearmenuadmin.exe`)

更不用说 Windows 搜索无法在`C:\Program Files`.
请建议我在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:54:57.750

您不能对 CCRC 使用 cleartool 命令，只能使用 GUI 和 CCRC/Teamapi（如“ [Rational clear case CM API failed to checkout source code](https://stackoverflow.com/questions/4930151/rational-clear-case-cm-api-fail-to-checkout-source-code) ”）。

CCRC 是一个 ClearCase*远程*客户端，没有完整的 ClearCase 客户端的可执行文件。

也许最简单的方法是使用“Environment -> ClearCase Search”GUI，搜索所有元素，然后全部选中以检出它们。

# php - 克鲁莫白屏死机

> ID：12622394
> 
> 赞同：1
> 
> 时间：2012-09-27T13:21:56.363
> 
> 标签：php, var-dump, krumo

我正在尝试在我正在调试的 PHP 脚本上使用[Krumo](http://krumo.sourceforge.net/)，但是当我实际调用 Krumo 时，我遇到了白屏死机。

这是我的代码的样子。据我所知，我正在按照说明正确安装和使用 Krumo ......

```
<?php ini_set('include_path', '/krumo/');?>

<?php krumo($invoice); ?> 
```

作为参考，我已经确认`$invoice`数组有数据。如果我这样做`var_dump`，我可以很好地抓取数据。我只是更喜欢使用 Krumo。

# sharepoint - 通过 CAML 查询获取项目时出现奇怪的异常

> ID：12622396
> 
> 赞同：0
> 
> 时间：2012-09-27T13:22:06.660
> 
> 标签：sharepoint, sharepoint-2010, caml

尝试通过查询获取项目时，出现奇怪的共享点异常和空消息：

```
<Where>
<Eq>
<FieldRef Name='Taxonomy' LookupId='TRUE' /><Value Type='Lookup'>-1</Value>
</Eq>
</Where>
<OrderBy>
<FieldRef Name='Title' Ascending='True'/>
</OrderBy> 
```

![在此处输入图像描述](../Images/b31ea4b3ca8e0fce57416445f3119c03.png) 我查询有什么问题？

PS -1 表示用户选择了无效标签，不应选择任何内容。而且我无权访问其他代码来编写“如果”我只能覆盖当前查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:01:08.537

我在我的环境中运行了这个，看起来问题是 -1 不被视为有效输入。看起来有效范围是从 0 到 int.MaxValue 的整数。

您可以进行始终为假的查询（例如，该字段为空且不为空），或者，如果您唯一可以控制的是可以尝试 2147483647 (int.MaxValue) 的数字，这不太可能是一个有效的值。

# php - 相邻列表的递归函数

> ID：12622404
> 
> 赞同：0
> 
> 时间：2012-09-27T13:22:23.337
> 
> 标签：php

我在创建递归函数以将列表转换为对象时遇到问题：

```
 location :
       12 : 
         label : 'city 1'
         children:
              13 :
                label:'city2'
                children :
                   14 : 
                     label : 'city3'
                   15 : 
                     label : 'city4'
                     children :
                            16 : 
                                  .....
                                 .....

              122 :
                label : 'city 100'

    ........ 
```

所以我希望创建一个递归函数来返回一个包含我上面所有列表的对象，如下所示：

```
 public static function getLocation($config , $id )
 {
    $id= current($config['id'])
    $label =   $config['id']['label']
    $children = $config['id']['label']['children']
    ....
    if(!empty($children) ){

    }else{

       foreach( ){
           getLocation($config , $id );
       }
    }
    return $obj;

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:29:17.183

如果要将数组转换为 std 类，可以使用[此脚本](http://www.if-not-true-then-false.com/2009/php-tip-convert-stdclass-object-to-multidimensional-array-and-convert-multidimensional-array-to-stdclass-object/)：

```
function arrayToObject($d) {
    if (is_array($d)) {
        /*
        * Return array converted to object
        * Using __FUNCTION__ (Magic constant)
        * for recursive call
        */
        return (object) array_map(__FUNCTION__, $d);
    }
    else {
        // Return object
        return $d;
    }
} 
```

# encoding - 如何设置 Visual Studio 2008 SSIS 项目的 SSIS“脚本任务”文件的编码

> ID：12622405
> 
> 赞同：1
> 
> 时间：2012-09-27T13:22:22.883
> 
> 标签：encoding, ssis

在我的 SSIS 脚本任务中，我需要参考包含特殊欧洲字符的资源（例如数据库表）。如何强制使用另一种编码（例如 UTF-8）存储我的脚本文件（C# 代码）。

目前，我必须使用几乎不可读的 \uXXX 转义字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T14:59:48.140

当我在等待复制时，我*认为*您将如何完成此操作与您在 VS/SSMS 中使用编码保存任何文件的方式相同

我在那里添加了一些看起来像阿拉伯文的文本，假设它符合 UTF-8 的条件

![文件，另存为](../Images/8c9c332184c1fd815aa442d10dfa726a.png)

![另存为](../Images/4b46a3b2df50d539a6b07444f9f0b29d.png)

![编码](../Images/4e519d65bc51f795b7b77024b655a405.png)

关闭并重新打开脚本任务会保留脚本。

# c# - 在应用程序配置文件中找不到名为“MyEntities”的连接字符串

> ID：12622408
> 
> 赞同：262
> 
> 时间：2012-09-27T13:22:27.260
> 
> 标签：c#, entity-framework, asp.net-mvc-4

我正在使用实体框架和 ASP.NET MVC 4 来构建应用程序

我的解决方案分为两个项目；

*   一个包含我的数据模型 (.edmx) 文件和一些自定义接口的类库
*   引用上述类库的“容器”MVC 项目

我的问题是，当我尝试使用“MyEntites” **DbContext**时，出现以下错误：

> 在应用程序配置文件中找不到名为“MyEntities”的连接字符串。

我猜这个问题与连接字符串位于类库的 app.config 中而不是 MVC 项目中的事实有关。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：321
> 
> 时间：2012-09-27T13:25:05.050

尝试将连接字符串复制到 MVC 项目中的 .config 文件。

* * *

## 回答 #2

> 赞同：155
> 
> 时间：2013-05-09T08:29:30.787

你是对的，这是因为类库（.edmx 文件所在的位置）不是你的启动/主项目。

您需要将连接字符串复制到主项目配置文件。

如果您的启动/主项目没有配置文件（就像在我的控制台应用程序案例中一样），只需添加一个（启动项目 - 添加新项目 -> 应用程序配置文件）。

更多相关信息可以在这里找到： [MetadataException: Unable to load the specified metadata resource](https://stackoverflow.com/questions/689355/metadataexception-unable-to-load-the-specified-metadata-resource)

* * *

## 回答 #3

> 赞同：107
> 
> 时间：2016-02-08T22:03:11.427

**确保将项目（使用 DbContext）作为启动**

[![在项目上右键单击并选择](../Images/70e1a9ea7e3dc611f913718af4d9d631.png)](https://i.stack.imgur.com/F0gAs.jpg)

或者

在 app.config（或 web.config）中将连接字符串添加到设置为启动的项目中

或者

像这样调用命令

`Update-Database -Script -ProjectName '<project name>' -StartupProjectName '<project name>' -ConnectionString 'data source=.;initial catalog=<db name>;integrated security=True;MultipleActiveResultSets=True' -ConnectionProviderName 'System.Data.SqlClient'`

然后再试一次

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2013-10-04T19:53:46.237

您可以将连接字符串传递给`EntityFramework`并继续您的生活：

```
public partial class UtilityContext : DbContext
{
    static UtilityContext()
    {
        Database.SetInitializer<UtilityContext>(null);
    }

    public UtilityContext()
        : base("Data Source=SERVER;Initial Catalog=DATABASE;Persist Security Info=True;User ID=USERNAME;Password=PASSWORD;MultipleActiveResultSets=True")
    {
    }

    // DbSet, OnModelCreating, etc...
} 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-10-29T11:22:22.063

将连接字符串复制到已设置为“设置为项目”的项目中的文件`app.config`或文件，如果在数据层项目中使用实体框架 - 请在主项目中安装**实体框架 nuget 。**`web.config``StartUp`

 *** * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-09-27T13:24:15.067

正如您所猜测的，这与类库的 app.config 中的连接字符串有关。

将 app.config 类中的条目复制到容器的`app.config`或`web.config`文件中

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-04-03T22:57:44.613

如果您在解决方案中有多个项目，则在您拥有真实 App.config 的位置开始设置项目。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-12-19T20:51:59.333

1.  添加 App.Config 文件
2.  将项目设置为启动项目。
3.  **确保在部分之后添加连接字符串`entityFramework`：**

    ```
    <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>

    </configSections>

    <connectionStrings>
       <!-- your connection string goes here, after configSection -->
    </connectionString> 
    ```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-11-27T16:09:04.757

如果将启动项目**更改**为**没有****连接字符串**的项目，也会发生这种情况。

1.  右键单击解决方案 - 单击属性
2.  在 Common Properties 下，选择启动项目
3.  在右侧窗格中选择具有连接字符串的项目（在大多数情况下，它将是 MVC 项目 - 启动解决方案的项目）

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-03-01T08:56:42.343

是的，这很愚蠢。您可以通过使用连接构建器来避免复制连接字符串。VB.Net 代码（用于生产，但此处稍作修改，因此视为未经测试，乐于帮助解决任何问题），其中我有一个 serverName 变量、一个 databaseName 变量，我将它们传递给一个方法并让它生成连接为了我：

```
 Dim EfBuilder As New System.Data.EntityClient.EntityConnectionStringBuilder("metadata=res://*/VMware.VmEf.csdl|res://*/VMware.VmEf.ssdl|res://*/VMware.VmEf.msl;provider=System.Data.SqlClient;provider connection string=""data source=none;initial catalog=none;integrated security=True;multipleactiveresultsets=True;App=EntityFramework""")
   Dim SqlBuilder As New Data.SqlClient.SqlConnectionStringBuilder(EfBuilder.ProviderConnectionString)
                        SqlBuilder.DataSource = serverName
                        SqlBuilder.InitialCatalog = databaseName
                        EfBuilder.ProviderConnectionString = SqlBuilder.ConnectionString
                        Using vmCtx As New VmEfConn(EfBuilder.ConnectionString) 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-09-27T13:25:50.603

您是否在解决方案中使用了多个项目？

因为如果您是，您必须检查的 Web 配置是与 de .edmx 文件在同一个项目中的配置

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-10-05T06:14:33.857

这是因为您的上下文类是从 DbContext 继承的。我猜你的ctor是这样的：

```
public MyEntities()
    : base("name=MyEntities") 
```

`name=...`应更改为您的连接字符串的名称

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-01-06T10:36:40.050

将 ConnectionString 添加到 MVC 项目 Web.config 文件

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-11-27T20:30:28.270

当我使用多个项目时，我遇到了这个问题，使用 web.config 和 app.config 启动 EntityFramework 项目的项目。

为避免此问题，您必须：

1.  您需要启动的 *.config 文件中的连接字符串。
2.  您需要将 EntityFramework DLL 安装到您的引用中

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-07-06T03:35:16.970

我遇到了同样的问题。当我从其他层执行数据访问操作时，我错过了将连接字符串放入启动项目。此外，如果您的启动项目中没有 app.config，则添加 app.config 文件，然后将连接字符串添加到该配置文件。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-03-06T22:03:31.383

正如另一个答案所示，我没有将项目设置为启动就得到了这个。我对此的贡献 - 在执行 Add-Migrations 和 Update-Database 时，将启动项目指定为 Nuget 包管理器控制台中命令的一部分（不包括 '[' 或 ']' 字符，这只是为了向您展示您需要将位于那里的文本更改为您的项目名称）：

1.  启用迁移
2.  Add-Migrations -StartupProject [包含数据上下文类的项目名称]
3.  Update-Database -StartupProject [与上述相同的项目名称]

那应该这样做。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-08-02T20:18:05.633

包含 .edmx 文件的项目生成的连接字符串会生成连接字符串，这似乎是 app.config 类文件的保留，这些文件被复制到输出目录并由可执行文件引用以存储运行时配置信息。

这会中断 web 项目，因为没有自动过程将随机 .config 信息添加到 web 项目的 web.config 文件中。

最简单的方法是将配置文件中的连接字符串复制到 web.config 文件的连接部分，而忽略配置文件的内容。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-02-02T16:58:49.107

我刚刚发现解决此问题的最佳方法是将该项目（很可能是类库）临时设置为启动项目。这会强制包管理器控制台将该项目用作其配置源。以这种方式设置的部分原因是因为 econfig 文件通常遵循自上而下的模型。经验法则是最接近客户端的项目（例如 MVC 应用程序）是将使用的 web.config 或 app.config。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-05-25T12:11:40.680

**确保您已将连接字符串放在启动项目的 ROOT web.config 中。**

我知道我在这里说明了一些显而易见的事情，但它也发生在我身上——尽管我已经在我的 MVC 项目的 Web.Config 中拥有连接字符串（.edmx 文件被放置在不同的类库项目中）并且我不能'不知道为什么我不断收到异常......长话短说，我错误地将连接字符串复制到 Views\Web.Config 中，这是一种奇怪的疲倦和不滚动到底部的组合-the-solution-explorer 场景。是的，这些事情也会发生在资深开发人员身上:)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-10-05T12:03:22.163

当您在项目中使用图层并在 DataLayer 中定义或安装实体框架并尝试运行您的项目时，会发生此问题

因此，为了克服这个问题，从 Edmx 文件所在的层复制连接字符串，并将连接字符串粘贴到主 web.config 中。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-07-06T10:25:18.117

在引用类库的“容器”MVC 项目的根 web.config 文件中添加连接字符串，如下所示：

```
 <connectionStrings>

  <add name="MyEntities" connectionString="complete connection string here" providerName="System.Data.SqlClient" />

  </connectionStrings> 
```

如果您不想使用“MyEntities”作为连接名称，请根据需要更改它，但在 MyEntities DbContext 类中进行以下更改：

```
MyEntities: DbContext
 {
   public MyEntities():base("Name-Of-connection-string-you wish to connect"){ }
 } 
```

* * *

此错误的原因是，如果我们不指定连接字符串的名称或 DbConext 派生类中的连接字符串（在您的情况下是 MyEntities），则 DbContext 将自动在根 web.config 文件中搜索名称为的连接字符串与派生类名称相同（在您的情况下，它是我的实体）。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-11-17T00:11:51.153

我在运行 MSTest 时遇到了这个问题。没有“noisolation”标志，我无法让它工作。

希望这可以帮助某人。我花了很多时间来弄清楚这一点。一切从 IDE 运行良好。在这种情况下，实体框架有些奇怪。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-11-28T09:27:20.433

## 定期迁移

有两个选项——这里大家建议的第一个是确保连接字符串在项目的 Web.config 文件中。使用 Azure 应用程序设置中的连接字符串时，这意味着使用 Azure 值覆盖 Web.config 值。

## Azure 或自动迁移（程序化）

如果您以编程方式运行迁移，则可以使用第二个选项，它允许您使用动态（或通过 Azure 应用程序设置）获得的连接字符串来运行迁移，而无需将其存储在 Web.config 中：

设置配置的**TargetDatabase**时，使用接受连接字符串和提供程序名称的**DbConnectionInfo**构造函数，而不是只接受连接名称的构造函数。如果您的连接字符串没有提供程序名称并且您使用的是 SQL Server / Azure SQL，则使用**“System.Data.SqlClient”**

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-04-23T20:37:43.210

这也可能导致调用代码中引用的 dll 引用不足。一个小小的笨拙的黑客可以挽救你的一天。

我遵循 DB First 方法并在 DAL 类库项目中创建了 EDMX 文件，这是对 BAL 类库的引用，而 BAL 类库又被 WCF 服务引用。

由于我在 BAL 中遇到此错误，因此我尝试了上述方法从 DAL 项目的 App.config 中复制配置详细信息，但没有解决。最终，在朋友的提示下，我刚刚向 WCF 项目添加了一个虚拟 EDMX 文件（具有相关的 DB 连接等），因此它导入了所有必要的内容，然后我删除了 EDMX 文件，它就解决了这个问题一个干净的构建。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-10-10T01:09:33.523

[@RyanMann对最佳答案](https://stackoverflow.com/a/12622474/848668)的评论表明：

> 将连接字符串存储在一个配置文件中，然后在其他项目中引用它们`<connectionString configSource="../ProjectDir/SharedConnections.config" />`

这是一个很棒的建议！

它还可以在 App.config 和 Web.config 文件之间共享连接字符串！

任何想要遵循这个建议的人，都应该前往[这个 SO answer](https://stackoverflow.com/a/40450836/848668)。它有一个非常棒的分步指南，用于在解决方案中的多个项目之间共享连接字符串。

唯一需要注意的是`configSource`必须存在于同一目录或子目录中。上面的链接解释了如何使用“添加为链接”来解决这个问题。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2020-02-14T00:39:41.420

尝试在 AutoCAD 插件中使用 EF 时出现此错误。CAD 插件从 acad.exe.config 文件中获取连接字符串。将上面提到的连接字符串添加到 acad 配置文件中，它就可以工作了。

信用来自 ADN.Network 的 Norman.Yuan。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2020-05-24T16:35:14.043

如果您使用的是 MVVM 模型，请尝试将连接字符串复制到项目的所有部分。

例如，如果您的解决方案包含两个项目，类库项目和 wpf 项目，您必须复制后端项目（库类 porject）的连接字符串，并将副本放在 wpf 项目的 App.config 文件中。

```
<connectionStrings>
  <add name="DBEntities" ... />
</connectionStrings> 
```

希望它对你有帮助:)

* * *

## 回答 #28

> 赞同：-2
> 
> 时间：2014-08-02T20:09:22.913

在 web.config 文件中添加 Connectoinstrnig

```
<ConnectionStiring> <add name="dbName" Connectionstring=" include provider name too"  ></ConnectionStiring> 
```**

# ios - iOS 移动应用程序中的 Paypal 集成

> ID：12622410
> 
> 赞同：3
> 
> 时间：2012-09-27T13:22:32.450
> 
> 标签：ios, paypal, paypal-sandbox

我已经使用最新的 MPL 库将 paypal 集成到我的 iOS 应用程序中。应用程序在离线 (ENV_NONE) 模式下运行良好。当我尝试在沙盒 (ENV_SANDBOX) 模式下测试应用程序时，在模拟器和设备中都出现以下错误：

```
Checking Error********************
Posting Error: 2147483647
DEVELOPER ERROR: This app not using a supported version of the PayPal library. 
```

我正在使用沙盒测试APP ID“APP-80W284485P519543T”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T05:02:25.707

我遇到了同样的问题，通过电子邮件发送了 PayPal 支持并得到了这个 -

> 关于“发布错误：2147483647”错误，这似乎是一个已知问题，目前正在调查中。一旦我得到更多更新，我会通过这张票更新你。

希望它会很快得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:43:32.690

也许这会有所帮助

> PayPal 沙盒已配置为拒绝任何没有带有 HTTP 400 错误的“Host”标头的 HTTP 请求。商户可以使用沙盒环境来验证其 IPN 和 PDT 脚本的更改。

[https://www.x.com/node/320404](https://www.x.com/node/320404)

# java - 垃圾收集器在几个小时后发疯

> ID：12622412
> 
> 赞同：1
> 
> 时间：2012-09-27T13:22:37.953
> 
> 标签：java, jboss

我们的 JBoss 3.2.6 应用程序服务器存在一些性能问题，在打开详细的 GC 日志记录并使用 GCViewer 分析这些日志后，我们注意到一段时间后（服务器重新启动后 7 到 35 小时）GC 变得疯狂。似乎最初 GC 工作正常并且每隔一小时左右执行一次 GC，但在某个时候它开始变得疯狂并每分钟执行一次完整的 GC。由于这仅在我们的生产环境中发生，因此无法尝试关闭显式 GC (-XX:-DisableExplicitGC) 或修改 RMI GC 间隔，但由于这发生在几个小时后，它似乎不是由已知引起的RMI GC 问题。

有任何想法吗？

更新：

我还不能发布 GCViewer 输出，但它似乎根本没有达到最大堆限制。在 GC 发疯之前，它的 GC-ing 很好，但是当 GC 发疯时，堆不会超过 2GB（最大 24GB）。除了 RMI，还有其他方法可以触发显式 GC 吗？（我检查了我们的代码，没有调用 System.gc()）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:35:22.703

你的堆填满了吗？有时，当 VM 可以释放足够的内存以防止真正的 OutOfMemoryError 但不足以真正保持应用程序稳定运行时，VM 会陷入“GC 循环”。

通常这会触发“OutOfMemoryError：超出 GC 开销限制”，但在发生这种情况之前必须超过某个阈值（98% 的 CPU 时间花在 GC 上，这超出了我的想象）。

您是否尝试过扩大堆大小？您是否检查过您的代码/使用分析器来检测内存泄漏？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:36:49.237

您几乎可以肯定有内存泄漏，如果您让应用程序服务器继续运行，它最终会因 OutOfMemoryException 而崩溃。您需要使用一种内存分析工具——一个例子是[VisualVM——](http://visualvm.java.net/)并确定问题的根源。通常内存泄漏是由一些从不释放它们存储的对象引用的静态或全局对象引起的。

祝你好运！

更新：

重读你的问题，听起来一切都很好，然后你突然陷入了这种情况，GC 更加努力地回收空间。这听起来像是发生了一些特定的操作，消耗（并且不释放）大量的堆。

也许，正如@Tim 建议的那样，您的堆需求刚好处于最大堆大小的阈值，但根据我的经验，您需要非常幸运才能准确地达到这一点。无论如何，一些分析应该确定它是泄漏还是您只需要增加堆的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T14:07:31.867

我建议您在发生这种情况时**[执行堆栈转储](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jstack.html)**。

我经常或没有看到这种情况发生在线程数量激增的情况下。

无论如何查看堆栈转储文件并查看正在运行的内容。您可以轻松设置一些 cron 作业或监视脚本以`jstack`定期运行。

您还可以比较堆栈转储的大小。如果它变得非常大，那么您就会有很多线程。

如果它没有变大，您至少可以看到哪些对象（调用堆栈）正在运行。

如果这不起作用，您可以稍后使用 VisualVM 或一些花哨的 JMX 废话，但首先要开始使用，`jstack`因为它易于使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T13:56:29.833

除了在您的应用程序中更可能发生内存泄漏之外，可能还有 1-2 个其他原因。

在 Solaris 环境中，当我将几乎所有可用的 4GB 物理内存分配给 JVM 时，我曾经遇到过这样的问题，而只给操作系统留下了大约 200-300MB。这会导致每当操作系统负载增加时，VM 进程就会突然交换到磁盘。解决方案是不超过 3.2GB。一个真正的极端案例，但也许它与您的问题相同？

这导致 GC 活动增加的原因是，大量交换会减慢 JVM 的内存管理速度，这会导致许多短期对象逃离幸存者空间，最终进入永久空间，而这又会更快地被填满。

# android - 奇怪：Android 菜单图标只出现一个可见图标

> ID：12622413
> 
> 赞同：0
> 
> 时间：2012-09-27T13:22:38.203
> 
> 标签：android, android-fragments, android-menu

我发现一些关于 android 菜单图标的奇怪行为。当我通过 onCreateOptionsMenu 添加图标时

```
setVisible(false) 
```

图标不会显示，如果我打电话也不会出现

```
setVisible(true) 
```

在以后的电话中。看我的例子：

```
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
  ...
  entryOne = menu.add("menuOne");
  entryOne.setIcon(...);
  entryOne.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
  entryOne.setVisible(false); 

  entryTwo = menu.add("menuTwo");
  entryTwo.setIcon(...);
  entryTwo.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
  entryTwo.setVisible(false); 

  // entryThree = menu.add("menuThree");
  // entryThree.setIcon(...);
  // entryThree.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
  // entryThree.setVisible(true); 

  super.onCreateOptionsMenu(menu, inflater);
}

...

public void onItemClick(...) {
...
  entryOne.setVisible(true);
  entryTwo.setVisible(true);
...
} 
```

当然我设置

```
setHasOptionsMenu(true); 
```

奇怪的是，当我取消注释*onCreateOptionsMenu*中的最后几行时，一切正常。

```
<uses-sdk android:minSdkVersion="11"
          android:targetSdkVersion="14" /> 
```

这是一个错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:28:49.433

当我使用处理程序时，它对我有用......

```
public void onItemClick(...) {
...
handler.postDelayed(new Runnable() {
                        public void run() {
                            entryOne.setVisible(true);
                                     entryTwo.setVisible(true);
                        }
                    }, 100);  
...
} 
```

# bash - bash - 对于文件夹中的每个目录，在不同的位置创建一个目录

> ID：12622415
> 
> 赞同：2
> 
> 时间：2012-09-27T13:22:46.253
> 
> 标签：bash

我有一个包含多个文件夹的目录。我想制作一个 bash 脚本来在不同的位置创建具有相同名称的目录。

请注意，我不想复制文件夹结构，也不想复制或移动文件夹。我只想在不同的位置创建具有相同名称的文件夹。

我被困住了。使用这个：

```
for d in "template/modules/*"
do
    # mkdir $(basename "$d");
    echo $d;
    echo "$d";
    echo $(basename "$d");
done 
```

输出：

```
template/modules/introduction template/modules/kitchen template/modules/test
template/modules/*
add_module.sh template 
```

有任何想法吗？

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T14:39:19.363

您需要将星号放在引号之外：

```
for d in "template/modules/"* 
```

在第一个`echo`,`$d`是[扩展](http://mywiki.wooledge.org/glob)的，但当你引用它时，它不是。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T14:00:29.133

要复制目录结构，您可以这样做：

```
$ cd template/modules
$ find . -type d -maxdepth 1 -exec mkdir -p ../../{} \; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T13:28:22.860

试试这个：

```
for d in "template/modules/*"
do
   mkdir $(basename "$d")
done 
```

# java - java swing ios之类的滑动菜单

> ID：12622419
> 
> 赞同：0
> 
> 时间：2012-09-27T13:22:53.163
> 
> 标签：java, ios, swing, animation

我想使用java（可能还有swing，但欢迎其他人）构建一个桌面应用程序，我想拥有类似iOS的动画。例如，我想要一个滑入式面板菜单，其显示方式类似于 iOS 中 facebook 应用程序的滑入式菜单。

我还希望有类似弹出式的面板，这些面板显示动画，如 iOS 的 facebook 应用程序中的通知子视图。

有这方面的工作示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:20:19.893

我会看看一些动画框架

*   [时序框架](http://java.net/projects/timingframework/pages/Home)
*   [三叉戟](http://kenai.com/projects/trident/pages/Home)

我个人更喜欢 TomingFrameowkr，但这主要是因为它是我使用的第一个，而且我有一堆支持代码。您需要评估每一个并做出自己的选择

我还想看看[JLayer](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)（Java 7）或[JXLayer](http://java.net/projects/jxlayer/)（早期的 Jave 版本）和/或对[玻璃窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)和绝对布局之类的东西有很好的理解

# python - 文件读/写意外行为

> ID：12622420
> 
> 赞同：3
> 
> 时间：2012-09-27T13:22:55.847
> 
> 标签：python, file-io

当一些奇怪的事情发生时，我只是在用 python 读写文本文件。当我跑

```
f = open('test.txt', 'w+')
f.write('hello')
print f.read() 
```

而不是预期`hello`的，输出是：

```
hellodف('test.txt', 'w+')
f.write('hello')
print f.read()
)

 i   LOGNAMEt   USERt   LNAMEt   USERNAMEi    (   R9   R:   R;   R<   (   R   t   environt   gett   pwdt   getpwuidt   getuid(   R   t   namet   userR?   (    (    s   E:\Python\lib\getpass.pyR   ̀  s    
(   t   AskPassword(   t   __doc__R   R   R3   t   __all__t   UserWarningR   R   R(   R1   R   R   R   R   R   R   t   ImportErrorR   R+   t   EasyDialogsRD   R    (    (    (    s   E:\Python\lib\getpass.pyt   <module>   s,   $?       

sued when getpass() cannot prevent
                 echoing of the password contents while reading.

On Windows, the msvcrt module will be used.
On the Mac EasyDialogs.AskPassword is used, if available.

i   getpasst   getusert   GetPassWarningc           B   s   e  Z RS(    (   t   __name__t
   __module__(    (    (    s   E:\Python\lib\getpass.pyR      s    s
   Password: c   
      C   ś  d } d } yJ t j d t j t j BÂ } t j | d d Ã } | } | sU | } n  Wnj t k
 r} y t j j  À } Wn& t
 t f k
 rÀt |  | Â } n Xt j } | sÀt j
 } qÀn X| d k    rہd } yÀt j | Á } | } | d c t j M<t j }     t t d Â r*|     t j O}  n  z, t j | |   | Ã t |  | d | Â} Wd t j | |    | Ã | j À XWqہt j k
 rׁ} | d k   r߁ n  ~ ~ t |  | Â } qہXn  | j d Á | S(       s  Prompt for a password, with echo turned off.

    Args:
      prompt: Written on stream to ask for the input.  Default: 'Password: '
      stream: A writable file object to display the prompt.  Defaults to
              the tty.  If no tty is available defaults to sys.stderr.
    Returns:
      The seKr3t input.
    Raises:
      EOFError: If our input tty or stdin was closed.
      GetPassWarning: When we were unable to turn echo off on the input.

    Always restores terminal settings before returning.
    s   /dev/ttys   w+i   i   t   TCSASOFTt   inputNs   
(   t   Nonet   ost   opent   O_RDWRt   O_NOCTTYt   fdopent   EnvironmentErrort   syst   stdint   filenot   AttributeErrort
   ValueErrort   fallback_getpasst   stderrt   termiost    tcgetattrt   ECHOt      TCSAFLUSHt   hasattrR   t       tcsetattrt
   _raw_inputt   flusht   errort   write(
   t   promptt   streamt   fdt   ttyR   t   et   passwdt   oldt   newt   tcsetattr_flags(    (    s   E:\Python\lib\getpass.pyt   unix_getpass   sJ    

c         C   sӀ  t  j t  j k    r t |  | Â Sd d l } x |  D] } | j | Á q2 Wd } xc | j À } | d k sv | d k rz Pn  | d k rπt  n  | d k rȀ| d  } qR | | } qR | j d Á | j d Á | S(   s9   Prompt for password with echo off, using Windows getch().i    s   
s   
s   s   (   R   R   t      __stdin__R   t   msvcrtt   putcht   getcht   KeyboardInterrupt(   R   R    R+   t   ct   pw(    (    s   E:\Python\lib\getpass.pyt   win_getpassY   s$    

c         C   s?   t  j d t d d Â| s( t j } n  | d IJt |  | Â S(   Ns%   Can not control echo on the terminal.t
   stackleveli   s&   Warning: Password input may be echoed.(   t   warningst   warnR   R   R   R   (   R   R    (    (    s   E:\Python\lib\getpass.pyR   p   s    
R)   c         C   s̀  | s t  j } n  | s$ t  j } n  t |  Á }  |  rP | j |  Á | j À n  | j À } | sk t  n  | d d k rȀ| d  } n  | S(   Niﳁ   
(   R   R   R   t   strR   R   t   readlinet   EOFError(   R   R    R   t   line(    (    s   E:\Python\lib\getpass.pyR   y   s    

c          C   s\   d d l  }  x* d D]" } |  j j | Á } | r | Sq Wd d l } | j |  j À Á d S(      s  Get the username from the environment or password database.

    First try various environment variables, then the password
    dat 
```

我知道我应该做

```
with open('test.txt', 'w') as f:
    f.write('hello')

with open('test.txt', 'r') as f:
    print f.read() 
```

这确实给出了预期的结果`hello`，但为什么在第一种情况下没有发生这种情况，`getpass.py`模块在那里做什么？

我正在使用 python 2.7.3 运行 Windows 7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:29:45.500

“hello”还没有被刷新到磁盘（它仍然在你的计算机内存中），所以`.read()`它可能正在读取刚刚分配给文件的磁盘块上的内容，或者为文件分配的内存缓冲区。这种行为很奇怪，但通过刷新文件很容易避免。

```
f.flush() 
```

您还需要告诉文件回到开头，这样您就可以从中读出“你好”。（否则，当您开始阅读时，您已经在文件末尾了。）

```
f.seek(0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:30:52.013

这是因为当您写入时，您将文件指针提前写入文件的字节数，并且当您进行读取时，您正在读取超过这一点，直到`eof`找到 a。我无法准确说明为什么您正在阅读似乎是另一个文件的内容，但以下内容应该可以解决该错误。

```
>>f = open('test.txt', 'w+')
>>f.write('hello')
>>f.flush()
>>f.seek( 0 )
>>print f.read() 
```

以上将产生我认为是您预期的输出。

至于错误，我可以猜测发生了什么。创建的文件对象`open`仍在内存中，缓冲区也在同一内存中，它包含在 python 解释器内部，输出的第一部分看起来像 python 帮助文件和二进制文件中包含的一些字符串值本身。

这种行为没有任何意义。

# ios - 如何为约束更改设置动画？

> ID：12622424
> 
> 赞同：1018
> 
> 时间：2012-09-27T13:23:06.300
> 
> 标签：ios, objective-c, animation, autolayout, ios6

我正在用一个更新旧的应用程序，`AdBannerView`当没有广告时，它会滑出屏幕。当有广告时，它会在屏幕上滑动。基本的东西。

旧样式，我将帧设置在动画块中。新样式，我有一个`IBOutlet`确定`Y`位置的自动布局约束，在这种情况下它是距超级视图底部的距离，并修改常量：

```
- (void)moveBannerOffScreen {
    [UIView animateWithDuration:5 animations:^{
        _addBannerDistanceFromBottomConstraint.constant = -32;
    }];
    bannerIsVisible = FALSE;
}

- (void)moveBannerOnScreen {
    [UIView animateWithDuration:5 animations:^{
        _addBannerDistanceFromBottomConstraint.constant = 0;
    }];
    bannerIsVisible = TRUE;
} 
```

横幅移动，完全符合预期，但*没有*动画。

* * *

**更新：**我重新观看了[WWDC 12 演讲“掌握自动布局的最佳实践”，](https://developer.apple.com/videos/play/wwdc2012/228/)其中涵盖了动画。它讨论了如何使用**CoreAnimation**更新约束：

![](../Images/4c0858beb48797730ebc862000d6c8de.png) ![](../Images/21015be0f73750d9df054ee8caa68fc6.png)

我尝试使用以下代码，但得到完全相同的结果：

```
- (void)moveBannerOffScreen {
    _addBannerDistanceFromBottomConstraint.constant = -32;
    [UIView animateWithDuration:2 animations:^{
        [self.view setNeedsLayout];
    }];
    bannerIsVisible = FALSE;
}

- (void)moveBannerOnScreen {
    _addBannerDistanceFromBottomConstraint.constant = 0;
    [UIView animateWithDuration:2 animations:^{
        [self.view setNeedsLayout];
    }];
    bannerIsVisible = TRUE;
} 
```

附带说明一下，我已经检查了很多次，这是在*主*线程上执行的。

* * *

## 回答 #1

> 赞同：1776
> 
> 时间：2012-09-30T19:00:58.860

两个重要说明：

1.  您需要`layoutIfNeeded`在动画块内调用。苹果实际上建议你在动画块之前调用一次，以确保所有待处理的布局操作都已完成

2.  您需要在**父视图**（例如`self.view`）上专门调用它，而不是在附加了约束的子视图上调用它。这样做将更新*所有*受约束的视图，包括为可能被约束到您更改约束的视图的其他视图设置动画（例如，视图 B 附加到视图 A 的底部，而您刚刚更改了视图 A 的顶部偏移量并且您想要视图 B用它制作动画）

试试这个：

**Objective-C**

```
- (void)moveBannerOffScreen {
    [self.view layoutIfNeeded];

    [UIView animateWithDuration:5
        animations:^{
            self._addBannerDistanceFromBottomConstraint.constant = -32;
            [self.view layoutIfNeeded]; // Called on parent view
        }];
    bannerIsVisible = FALSE;
}

- (void)moveBannerOnScreen { 
    [self.view layoutIfNeeded];

    [UIView animateWithDuration:5
        animations:^{
            self._addBannerDistanceFromBottomConstraint.constant = 0;
            [self.view layoutIfNeeded]; // Called on parent view
        }];
    bannerIsVisible = TRUE;
} 
```

**斯威夫特 3**

```
UIView.animate(withDuration: 5) {
    self._addBannerDistanceFromBottomConstraint.constant = 0
    self.view.layoutIfNeeded()
} 
```

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2014-01-22T00:35:50.280

我很欣赏提供的答案，但我认为更进一步会很好。

### 文档中的基本块动画

```
[containerView layoutIfNeeded]; // Ensures that all pending layout operations have been completed
[UIView animateWithDuration:1.0 animations:^{
     // Make all constraint changes here
     [containerView layoutIfNeeded]; // Forces the layout of the subtree animation block and then captures all of the frame changes
}]; 
```

但实际上这是一个非常简单的场景。如果我想通过该 `updateConstraints`方法为子视图约束设置动画怎么办？

### 调用子视图 updateConstraints 方法的动画块

```
[self.view layoutIfNeeded];
[self.subView setNeedsUpdateConstraints];
[self.subView updateConstraintsIfNeeded];
[UIView animateWithDuration:1.0f delay:0.0f options:UIViewAnimationOptionLayoutSubviews animations:^{
    [self.view layoutIfNeeded];
} completion:nil]; 
```

updateConstraints 方法在 UIView 子类中被重写，并且必须在方法结束时调用 super。

```
- (void)updateConstraints
{
    // Update some constraints

    [super updateConstraints];
} 
```

[AutoLayout Guide](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/AutolayoutPG/)有很多不足之处，但值得一读。我自己将其用作 a 的一部分，`UISwitch`它使用一对`UITextField`带有简单而微妙的折叠动画（0.2 秒长）的 s 来切换子视图。如上所述，子视图的约束在 UIView 子类 updateConstraints 方法中处理。

* * *

## 回答 #3

> 赞同：81
> 
> 时间：2015-11-13T00:33:16.050

通常，您只需要更新约束并`layoutIfNeeded`在动画块内调用。这可以是更改`.constant`an 的属性`NSLayoutConstraint`、添加删除约束 (iOS 7) 或更改`.active`约束的属性 (iOS 8 和 9)。

### 示例代码：

```
[UIView animateWithDuration:0.3 animations:^{
    // Move to right
    self.leadingConstraint.active = false;
    self.trailingConstraint.active = true;

    // Move to bottom
    self.topConstraint.active = false;
    self.bottomConstraint.active = true;

    // Make the animation happen
    [self.view setNeedsLayout];
    [self.view layoutIfNeeded];
}]; 
```

### 示例设置：

[![Xcode Project 示例动画项目。](../Images/8efcfa9982cf6aaf56a7dadff1ccec7d.png)](https://i.stack.imgur.com/EuPOs.jpg)

### 争议

关于是否应该在动画块***之前或******内部***更改约束存在一些问题（请参阅之前的答案）。

以下是教 iOS 的 Martin Pilkington 和编写 Auto Layout 的 Ken Ferry 之间的 Twitter 对话。Ken 解释说，虽然在动画块之外更改常量**目前可能**有效，但这并不安全，它们确实应该在动画块 ***内进行更改。***[https://twitter.com/kongtomorrow/status/440627401018466305](https://twitter.com/kongtomorrow/status/440627401018466305)

### 动画片：

![](../Images/3e5f415ff77dd0160a362f2370d67a86.png)

### 示例项目

这是一个简单的项目，展示了如何为视图设置动画。它使用 Objective C 并通过更改`.active`几个约束的属性来为视图设置动画。 [https://github.com/shepting/SampleAutoLayoutAnimation](https://github.com/shepting/SampleAutoLayoutAnimation)

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2013-12-23T14:29:37.213

```
// Step 1, update your constraint
self.myOutletToConstraint.constant = 50; // New height (for example)

// Step 2, trigger animation
[UIView animateWithDuration:2.0 animations:^{

    // Step 3, call layoutIfNeeded on your animated view's parent
    [self.view layoutIfNeeded];
}]; 
```

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2018-02-16T11:09:32.773

**斯威夫特 4 解决方案**

**[UIView.animate](https://developer.apple.com/documentation/uikit/uiview/1622418-animate)**

三个简单的步骤：

1.  更改约束，例如：

    ```
    heightAnchor.constant = 50 
    ```

2.  告诉容器`view`它的布局是脏的，并且自动布局应该重新计算布局：

    ```
    self.view.setNeedsLayout() 
    ```

3.  在动画块中告诉布局重新计算布局，相当于直接设置帧（在这种情况下自动布局将设置帧）：

    ```
    UIView.animate(withDuration: 0.5) {
        self.view.layoutIfNeeded()
    } 
    ```

完成最简单的例子：

```
heightAnchor.constant = 50
self.view.setNeedsLayout()
UIView.animate(withDuration: 0.5) {
    self.view.layoutIfNeeded()
} 
```

**边注**

有一个可选的第 0 步 - 在更改您可能想要调用的约束之前，`self.view.layoutIfNeeded()`以确保动画的起点来自应用了旧约束的状态（以防有一些其他不应该包含在动画中的约束更改):

```
otherConstraint.constant = 30
// this will make sure that otherConstraint won't be animated but will take effect immediately
self.view.layoutIfNeeded()

heightAnchor.constant = 50
self.view.setNeedsLayout()
UIView.animate(withDuration: 0.5) {
    self.view.layoutIfNeeded()
} 
```

**[UIViewPropertyAnimator](https://developer.apple.com/documentation/uikit/uiviewpropertyanimator)**

由于在 iOS 10 中我们获得了新的动画机制 - `UIViewPropertyAnimator`，我们应该知道基本上相同的机制适用于它。步骤基本相同：

```
heightAnchor.constant = 50
self.view.setNeedsLayout()
let animator = UIViewPropertyAnimator(duration: 0.5, timingParameters: UICubicTimingParameters(animationCurve: .linear))
animator.addAnimations {
    self.view.layoutIfNeeded()
}
animator.startAnimation() 
```

由于`animator`是对动画的封装，我们可以一直引用它，稍后调用。然而，由于在动画块中我们只是告诉自动布局重新计算帧，我们必须在调用之前更改约束`startAnimation`。因此，这样的事情是可能的：

```
// prepare the animator first and keep a reference to it
let animator = UIViewPropertyAnimator(duration: 0.5, timingParameters: UICubicTimingParameters(animationCurve: .linear))
animator.addAnimations {
    self.view.layoutIfNeeded()
}

// at some other point in time we change the constraints and call the animator
heightAnchor.constant = 50
self.view.setNeedsLayout()
animator.startAnimation() 
```

更改约束和启动 animator 的顺序很重要 - 如果我们只是更改约束并将 animator 留到稍后的某个时间点，下一个重绘周期可以调用自动布局重新计算，并且更改不会被动画化。

另外，请记住，单个动画师是不可重复使用的——一旦你运行它，你就不能“重新运行”它。所以我想没有一个很好的理由让动画师留在身边，除非我们用它来控制交互式动画。

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2016-08-11T08:42:41.200

快速解决方案：

```
yourConstraint.constant = 50
UIView.animate(withDuration: 1.0, animations: {
    yourView.layoutIfNeeded
}) 
```

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2015-12-11T01:49:37.490

## 故事板、代码、提示和一些陷阱

其他答案都很好，但这个答案使用最近的一个例子突出了一些相当重要的动画约束的陷阱。在我意识到以下几点之前，我经历了很多变化：

将您想要定位的约束设置为类变量以保持强引用。在 Swift 中，我使用了惰性变量：

```
lazy var centerYInflection:NSLayoutConstraint = {
       let temp =  self.view.constraints.filter({ $0.firstItem is MNGStarRating }).filter ( { $0.secondItem is UIWebView }).filter({ $0.firstAttribute == .CenterY }).first
        return temp!
}() 
```

经过一些实验后，我注意到必须从定义约束的两个视图**上方**的视图（也称为超级视图）中获取约束。在下面的示例中（MNGStarRating 和 UIWebView 都是我在它们之间创建约束的两种类型的项目，它们是 self.view 中的子视图）。

**过滤器链接**

我利用 Swift 的过滤器方法来分离将用作拐点的所需约束。一个也可能变得更复杂，但过滤器在这里做得很好。

**使用 Swift 动画约束**

> Nota Bene - 此示例是情节提要/代码解决方案，并假设已在情节提要中设置了默认约束。然后可以使用代码对更改进行动画处理。

假设您创建了一个属性以使用准确的标准进行过滤并到达动画的特定拐点（当然，如果您需要多个约束，您也可以过滤数组并循环遍历）：

```
lazy var centerYInflection:NSLayoutConstraint = {
    let temp =  self.view.constraints.filter({ $0.firstItem is MNGStarRating }).filter ( { $0.secondItem is UIWebView }).filter({ $0.firstAttribute == .CenterY }).first
    return temp!
}() 
```

……

一段时间以后...

```
@IBAction func toggleRatingView (sender:AnyObject){

    let aPointAboveScene = -(max(UIScreen.mainScreen().bounds.width,UIScreen.mainScreen().bounds.height) * 2.0)

    self.view.layoutIfNeeded()

    //Use any animation you want, I like the bounce in springVelocity...
    UIView.animateWithDuration(1.0, delay: 0.0, usingSpringWithDamping: 0.3, initialSpringVelocity: 0.75, options: [.CurveEaseOut], animations: { () -> Void in

        //I use the frames to determine if the view is on-screen
        if CGRectContainsRect(self.view.frame, self.ratingView.frame) {

            //in frame ~ animate away
            //I play a sound to give the animation some life

            self.centerYInflection.constant = aPointAboveScene
            self.centerYInflection.priority = UILayoutPriority(950)

        } else {

            //I play a different sound just to keep the user engaged
            //out of frame ~ animate into scene
            self.centerYInflection.constant = 0
            self.centerYInflection.priority = UILayoutPriority(950)
            self.view.setNeedsLayout()
            self.view.layoutIfNeeded()
         }) { (success) -> Void in

            //do something else

        }
    }
} 
```

## 许多错误的转弯

这些笔记实际上是我为自己写的一组技巧。我个人和痛苦地做了所有不该做的事情。希望本指南可以避免其他人。

1.  注意 zPositioning。有时当什么都没有发生时，您应该隐藏一些其他视图或使用视图调试器来定位您的动画视图。我什至发现了用户定义的运行时属性在故事板的 xml 中丢失并导致动画视图被覆盖（在工作时）的情况。

2.  总是花一点时间阅读文档（新旧）、快速帮助和标题。Apple 不断进行大量更改以更好地管理 AutoLayout 约束（请参阅堆栈视图）。或者至少是[AutoLayout Cookbook](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/AutolayoutPG/LayoutUsingStackViews.html#//apple_ref/doc/uid/TP40010853-CH11-SW1)。请记住，有时最好的解决方案是在较旧的文档/视频中。

3.  使用动画中的值并考虑使用其他 animateWithDuration 变体。

4.  不要将特定布局值硬编码为确定其他常量更改的标准，而是使用允许您确定视图位置的值。`CGRectContainsRect`是一个例子

5.  如果需要，请不要犹豫，使用与参与约束定义的视图关联的布局边距 `let viewMargins = self.webview.layoutMarginsGuide`：例如
6.  不要做你不必做的工作，情节提要上所有具有约束的视图都有附加到属性 self.viewName.constraints 的约束
7.  将任何约束的优先级更改为小于 1000。我在情节提要上将我的设置为 250（低）或 750（高）；（如果您尝试将 1000 优先级更改为代码中的任何内容，则应用程序将崩溃，因为需要 1000）
8.  考虑不要立即尝试使用 activateConstraints 和 deactivateConstraints （它们有它们的位置，但是当只是学习或者如果你正在使用情节提要时，使用这些可能意味着你做的太多了~它们确实有一个位置，如下所示）
9.  考虑不要使用 addConstraints / removeConstraints ，除非你真的在代码中添加了一个新的约束。我发现大多数时候我在情节提要中使用所需的约束来布局视图（将视图放置在屏幕外），然后在代码中，我为先前在情节提要中创建的约束设置动画以移动视图。
10.  我花了很多时间来建立新的 NSAnchorLayout 类和子类的约束。这些工作很好，但我花了一段时间才意识到我需要的所有约束都已经存在于情节提要中。如果您在代码中构建约束，那么肯定会使用此方法来聚合您的约束：

**使用情节提要时避免使用的快速解决方案示例**

```
private var _nc:[NSLayoutConstraint] = []
    lazy var newConstraints:[NSLayoutConstraint] = {

        if !(self._nc.isEmpty) {
            return self._nc
        }

        let viewMargins = self.webview.layoutMarginsGuide
        let minimumScreenWidth = min(UIScreen.mainScreen().bounds.width,UIScreen.mainScreen().bounds.height)

        let centerY = self.ratingView.centerYAnchor.constraintEqualToAnchor(self.webview.centerYAnchor)
        centerY.constant = -1000.0
        centerY.priority = (950)
        let centerX =  self.ratingView.centerXAnchor.constraintEqualToAnchor(self.webview.centerXAnchor)
        centerX.priority = (950)

        if let buttonConstraints = self.originalRatingViewConstraints?.filter({

            ($0.firstItem is UIButton || $0.secondItem is UIButton )
        }) {
            self._nc.appendContentsOf(buttonConstraints)

        }

        self._nc.append( centerY)
        self._nc.append( centerX)

        self._nc.append (self.ratingView.leadingAnchor.constraintEqualToAnchor(viewMargins.leadingAnchor, constant: 10.0))
        self._nc.append (self.ratingView.trailingAnchor.constraintEqualToAnchor(viewMargins.trailingAnchor, constant: 10.0))
        self._nc.append (self.ratingView.widthAnchor.constraintEqualToConstant((minimumScreenWidth - 20.0)))
        self._nc.append (self.ratingView.heightAnchor.constraintEqualToConstant(200.0))

        return self._nc
    }() 
```

如果您忘记了这些技巧中的一个或更简单的技巧，例如在哪里添加 layoutIfNeeded，很可能什么都不会发生：在这种情况下，您可能会有一个半生不熟的解决方案，如下所示：

> 注意 - 花点时间阅读下面的 AutoLayout 部分和原始指南。有一种方法可以使用这些技术来补充您的动态动画师。

```
UIView.animateWithDuration(1.0, delay: 0.0, usingSpringWithDamping: 0.3, initialSpringVelocity: 1.0, options: [.CurveEaseOut], animations: { () -> Void in

            //
            if self.starTopInflectionPoint.constant < 0  {
                //-3000
                //offscreen
                self.starTopInflectionPoint.constant = self.navigationController?.navigationBar.bounds.height ?? 0
                self.changeConstraintPriority([self.starTopInflectionPoint], value: UILayoutPriority(950), forView: self.ratingView)

            } else {

                self.starTopInflectionPoint.constant = -3000
                 self.changeConstraintPriority([self.starTopInflectionPoint], value: UILayoutPriority(950), forView: self.ratingView)
            }

        }) { (success) -> Void in

            //do something else
        }

    } 
```

AutoLayout Guide 中的片段（注意第二个片段用于使用 OS X）。**顺便说一句-据我所知，这不再在当前指南中。** 首选技术不断发展。

**自动布局所做的动画更改**

如果您需要完全控制自动布局所做的动画更改，则必须以编程方式进行约束更改。iOS 和 OS X 的基本概念相同，但有一些细微差别。

在 iOS 应用程序中，您的代码如下所示：

```
[containerView layoutIfNeeded]; // Ensures that all pending layout operations have been completed
[UIView animateWithDuration:1.0 animations:^{
     // Make all constraint changes here
     [containerView layoutIfNeeded]; // Forces the layout of the subtree animation block and then captures all of the frame changes
}]; 
```

在 OS X 中，使用支持图层的动画时使用以下代码：

```
[containterView layoutSubtreeIfNeeded];
[NSAnimationContext runAnimationGroup:^(NSAnimationContext *context) {
     [context setAllowsImplicitAnimation: YES];
     // Make all constraint changes here
     [containerView layoutSubtreeIfNeeded];
}]; 
```

当您不使用支持图层的动画时，您必须使用约束的动画器为常量设置动画：

```
[[constraint animator] setConstant:42]; 
```

对于那些在视觉上学习得更好的人，请查看[Apple 的这个早期视频](https://developer.apple.com/videos/play/wwdc2012-232/)。

## 密切关注

通常在文档中会有一些小注释或代码片段会导致更大的想法。例如，将自动布局约束附加到动态动画师是一个好主意。

~~祝你好运，愿原力与你同在。~~

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2017-06-12T08:41:17.343

**工作解决方案 100%** Swift 5.3

我已经阅读了所有答案，并希望分享我在所有应用程序中使用的代码和行的层次结构以正确设置它们的动画，这里的一些解决方案不起作用，你应该在较慢的设备上检查它们，例如 iPhone 5。

```
self.btnHeightConstraint.constant = 110
UIView.animate(withDuration: 0.27) { [weak self] in 
     self?.view.layoutIfNeeded()
} 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2014-11-25T08:24:33.327

我试图为约束设置动画，但很难找到一个好的解释。

其他答案所说的是完全正确的：您需要致电`[self.view layoutIfNeeded];`inside `animateWithDuration: animations:`。然而，另一个重要的一点是为每个`NSLayoutConstraint`你想要动画的指针。

[我在 GitHub 中创建了一个示例](https://github.com/GabrielMassana/AnimatedConstraint)。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-07-19T12:17:43.800

使用 Xcode 8.3.3 为 Swift 3 工作且刚刚测试过的解决方案：

```
self.view.layoutIfNeeded()
self.calendarViewHeight.constant = 56.0

UIView.animate(withDuration: 0.5, delay: 0.0, options: UIViewAnimationOptions.curveEaseIn, animations: {
        self.view.layoutIfNeeded()
    }, completion: nil) 
```

请记住，self.calendarViewHeight 是一个引用 customView (CalendarView) 的约束。我在 self.view 而不是 self.calendarView 上调用了 .layoutIfNeeded()

希望这有帮助。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-09-13T08:35:13.060

有一篇文章谈论这个： [http ://weblog.invasivecode.com/post/42362079291/auto-layout-and-core-animation-auto-layout-was](http://weblog.invasivecode.com/post/42362079291/auto-layout-and-core-animation-auto-layout-was)

其中，他这样编码：

```
- (void)handleTapFrom:(UIGestureRecognizer *)gesture {
    if (_isVisible) {
        _isVisible = NO;
        self.topConstraint.constant = -44.;    // 1
        [self.navbar setNeedsUpdateConstraints];  // 2
        [UIView animateWithDuration:.3 animations:^{
            [self.navbar layoutIfNeeded]; // 3
        }];
    } else {
        _isVisible = YES;
        self.topConstraint.constant = 0.;
        [self.navbar setNeedsUpdateConstraints];
        [UIView animateWithDuration:.3 animations:^{
            [self.navbar layoutIfNeeded];
        }];
    }
} 
```

希望能帮助到你。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-04-15T15:54:27.237

在约束动画的上下文中，我想提一下我在keyboard_opened 通知中立即对约束进行动画处理的特定情况。

约束定义了从文本字段到容器顶部的顶部空间。打开键盘后，我只需将常数除以 2。

我无法直接在键盘通知中实现一致的平滑约束动画。大约一半的时间视图只会跳转到新位置 - 没有动画。

我突然想到，由于键盘打开，可能会发生一些额外的布局。添加一个具有 10 毫秒延迟的简单 dispatch_after 块使动画每次都运行 - 没有跳跃。

# performance - CreateProcess 的快速替代方案

> ID：12622425
> 
> 赞同：2
> 
> 时间：2012-09-27T13:23:07.753
> 
> 标签：performance, delphi, exe, pascal, createprocess

我正在寻找 Delphi 中 CreateProcess 的快速替代方案，以在 exe 中执行某些计算，包括 XML 中的几个返回值。目前，我正在调用带有某些参数的 C#-exe。其中一个电话大约需要。0.5s - 这是*一种*昂贵的方式，因为这个 exe 需要被调用几百次（不幸的是迭代调用，即多线程不会加速工作）。

我当前的代码看起来像这样（在 StackOverflow 上找到了获取 exe somwhere 的控制台输出的解决方案）。

```
IsExecutable := CreateProcess(
            nil,
            PChar(WorkDir + Exe + CommandLine),
            nil,
            nil,
            True,
            HIGH_PRIORITY_CLASS,
            nil,
            nil,
            StartupInfo,
            ProcessInformation);
CloseHandle(StdOutPipeWrite);
    if IsExecutable then
      try
        repeat
          WasOK := ReadFile(StdOutPipeRead, Buffer, 255, BytesRead, nil);
          if BytesRead > 0 then
          begin
            Buffer[BytesRead] := #0;
            Result := Result + Buffer;
          end;
        until not WasOK or (BytesRead = 0);
        WaitForSingleObject(ProcessInformation.hProcess, INFINITE);
      finally
        CloseHandle(ProcessInformation.hThread);
        CloseHandle(ProcessInformation.hProcess);
      end 
```

顺便说一句，我不是很好的德尔福 - 实际上，我有点像“我不知道我在做什么”狗模因的东西......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T13:29:11.177

创建新流程的成本很高。没有其他方法可以使用`CreateProcess`. 这里没有快速修复。没有神奇的按钮可以让流程创建变得超级快。

您的问题的解决方案将是完全停止创建新流程。在您的流程中执行此任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T13:57:46.970

您是否需要每次都创建一个新流程？或者你可以重复使用同一个实例吗？您可以使用一些低级控制台输入/输出管道（您的代码看起来像您现在正在尝试这样做:)），或者您可以使用某种 IPC（互斥+共享内存，在 2 个进程之间复制数据)，或者您可以通过 TCP/IP 通信来使用更多的 n 层（或客户端/服务器）方法（RemObjects SDK 非常适合这一点，具有.Net 和 Delphi 库，它们通过 TCP/IP 进行通信，或者Windows 消息、命名管道等）。然而，由于抽象，最后一种方法增加了一些延迟/开销，但比自己在.Net和Delphi中实现双方更容易使用（顺便说一句，这并不难）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T17:04:59.367

就像[大卫写](https://stackoverflow.com/a/12622558/29290)的和[安德烈写](https://stackoverflow.com/a/12623122/29290)的一样，你无法改变这一点。

这是[Windows 和 Linux 之间真正的巨大差异](https://stackoverflow.com/questions/47845/why-is-creating-a-new-process-more-expensive-on-windows-than-linux)之一。`CreateProcess`在 Windows 中非常昂贵，而`fork`在 Linux 中则很便宜。另一方面，Linux`fork`通常紧随其后的`exec`是昂贵的。这就是[.NET 引入`AppDomain`which is faster](http://www.hanselman.com/blog/MicrosoftIE8AndGoogleChromeProcessesAreTheNewThreads.aspx)的原因。

有几个方向可以将 .NET 代码集成到您的流程中，就像[Arnaud 所写](https://stackoverflow.com/a/12625141/29290)的那样。

您可以做的另一件事是在 Delphi 进程和 .NET 进程之间进行 IPC（例如使用命名管道），并让 .NET 进程对每个请求使用 AppDomains。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T15:43:26.513

这里缓慢的是创建一个新进程，并且每次运行可执行文件时都会启动整个 .Net 框架进程。

为了获得最佳性能，您最好将您的 C# 进程公开为 COM，然后直接从 Delphi 调用它。

我猜在这种情况下，通过 TCP/IP 进行远程连接是不值得的。几年前，在这种情况下，我在本地机器上使用 RemObjects 进行了糟糕的速度实验。

您需要的是调用 COM 互操作，您可能对以下内容感兴趣：

*   [向 COM 公开 .Net 组件](http://www.codeproject.com/Articles/3511/Exposing-NET-Components-to-COM)；
*   [托管 VCL](http://interop.managed-vcl.com/netinterop_managedvcl.php)；
*   [九头蛇](http://www.remobjects.com/hydra/default.aspx)。

Delphi 很好地处理 COM 对象，您可以很容易地从 Delphi 代码中调用 C# 方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T20:45:00.253

改用线程池还是 IOCP？是的，它有点复杂和消耗资源，但消除了执行外部进程的需要。新的 ThreadPool API（Vista 和更高版本）为您提供了更多的机会和灵活性（您甚至可以标记长时间运行的任务）：

*   [线程池概述](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686760%28v=vs.85%29.aspx)
*   [TP API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686766%28v=vs.85%29.aspx)
*   [SetThreadpoolCallbackRunsLong](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686263%28v=vs.85%29.aspx)

# c - 通过C在sqlite3中插入数据

> ID：12622427
> 
> 赞同：0
> 
> 时间：2012-09-27T13:23:10.183
> 
> 标签：c, sqlite

我在将数据插入 sqlite3 数据库时遇到问题。数据库权限设置为 777（仅用于开发环境），目录也是如此。

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/time.h>
#include <sqlite3.h>
#include <string.h>

#define MAXLENGTH 255

int random_add(int base, int mod, int interval)
{
        int addend;
        struct timeval tv;
        gettimeofday(&tv, NULL);
        srand((unsigned)tv.tv_usec);

        addend = base + rand() % mod + (interval);

        return addend;
}
int random_wlvl(int own_lvl)
{
        int     wlvl = random_add(own_lvl, 7, -3);
        return wlvl;
}
int random_wstat(int pstat, int wlvl, int mod, int interval)
{
        int     wstat = random_add(pstat,11,-5);
        while(--wlvl) {
                wstat = random_add(wstat,mod,interval);
        }
        return wstat;
}

int main(void)
{
        int own_id  = 2;
        int error = 0;
        sqlite3 *conn;
        sqlite3_stmt *res;
        error = sqlite3_open("whorl.sl3", &conn);
        if (error) {
                puts("Cannot open database");
                exit(0);
        }
        char    temp[MAXLENGTH];
        int     i,battle_id;
        // Start of Wild Nemesis Selection
        int     wlvl,whp,watk,wdef;     //wild nemesis stats
        int     wpid = random_add(0,13,1);
        int     own_lvl,nem_id, own_hp;
        sprintf(temp, "select nem_hp,nem_atk,nem_def from nemesis where nem_id = %d union all select own_lvl,nem_id, own_hp from owned where own_id = %d;",wpid,own_id);
        error = sqlite3_prepare_v2(conn, temp, MAXLENGTH, &res, NULL);
        if (error != SQLITE_OK) {
                puts("Did not receive data from nemesis,owned");
                exit(0);
        }
        i = 0;
        while (sqlite3_step(res) == SQLITE_ROW) {
            if (i == 0){
                    whp = sqlite3_column_int(res,0);
                    watk = sqlite3_column_int(res,1);
                    wdef = sqlite3_column_int(res,2);
            } else {
                    own_lvl = sqlite3_column_int(res,0);
                    nem_id = sqlite3_column_int(res,1);
                    own_hp = sqlite3_column_int(res,2);
            }
            i++;
    }
    sqlite3_finalize(res);
    //randomize wstats
    wlvl = random_wlvl(own_lvl);
    whp = random_wstat(whp,wlvl,5,6);
    watk = random_wstat(watk,wlvl,5,1);
    wdef = random_wstat(wdef,wlvl,5,1);
    //create battle
    sprintf(temp,"insert into battles(own_id,nem_id,own_hp,wpid,wlvl,whp,watk,wdef,wmaxhp) values(%d,%d,%d,%d,%d,%d,%d,%d,%d);",own_id,nem_id,own_hp,wpid,wlvl,whp,watk,wdef,whp);
    error = sqlite3_exec(conn,temp,0,0,0);
    if (error) {
            puts("Cannot insert into battles");
            exit(0);
    }
    sprintf(temp,"select battle_id from battles where own_id = %d;",own_id);
    error = sqlite3_prepare_v2(conn,temp,MAXLENGTH,&res,NULL);
    if (error != SQLITE_OK) {
            puts("Cannot get battle_id");
    }
    while(sqlite3_step(res) == SQLITE_ROW) {
            battle_id = sqlite3_column_int(res,0);
    }
    sqlite3_finalize(res);
    sqlite3_close(conn);

    printf("battle_id = %d\n", battle_id);
    return 0;
} 
```

编译，然后运行会产生以下结果：

```
$ ./a.out
Cannot insert into battles 
```

这是我的战斗模式

```
sqlite> .schema battles
CREATE TABLE battles(battle_id integer primary key autoincrement, own_id integer, pok_id integer, wpid integer, wlvl integer, whp integer, watk integer, wdef integer, wmaxhp integer); 
```

怎么了？为什么我不能插入一些数据？

# delphi - TListView (Delphi) 中的边框颜色

> ID：12622428
> 
> 赞同：2
> 
> 时间：2012-09-27T13:23:11.183
> 
> 标签：delphi, tlistview

我正在尝试使用 OnCustomDrawItem 事件自定义 ListView 项目的背景颜色和字体颜色。但是 subitem 的边框颜色始终是 ListView 的背景颜色。有谁知道如何解决这一问题？这是我正在使用的代码：

```
procedure TForm1.ListView1CustomDrawItem(Sender: TCustomListView;
  Item: TListItem; State: TCustomDrawState; var DefaultDraw: Boolean);
var
  lst: TListView;
  i: integer;
  f1, f2, c1, c2: TColor;
begin
  if (TListView(Sender).ViewStyle = vsIcon) then
    Exit;
  lst := Sender as TListView;
  lst.Canvas.Brush.Style := bsSolid;
  i := lst.Items.Count;
  if (i mod 2) <> 0 then
  begin
    c1 := clWhite;
    c2 := $00F8F8F8;
    f1 := clBlue;
    f2 := clBlack;
  end else
  begin
    c1 := $00F8F8F8;
    c2 := clWhite;
    f1 := clBlack;
    f2 := clBlue;
  end;
  // Painting...
  if (Item.Index mod 2) = 0 then
  begin
    lst.Canvas.Brush.Color := c2;
    lst.Canvas.Font.Color := f2;
  end else
  begin
    lst.Canvas.Brush.Color := c1;
    lst.Canvas.Font.Color := f1;
  end;
end; 
```

编辑：

SubItems 列之间存在 GAP。这个 GAP 是 ListView 的背景颜色。

我使用 Delphi XE2 和操作系统：Windows 7 bit bit。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:50:57.753

尝试 OnAdvancedCustomDrawItem 而不是您的 CustomDrawItem 过程

```
procedure TForm1.ListView1AdvancedCustomDrawItem(Sender: TCustomListView;
Item: TListItem; State: TCustomDrawState; Stage: TCustomDrawStage;
var DefaultDraw: Boolean);
var
  lst: TListView;
  i: integer;
  f1, f2, c1, c2: TColor;
  r: TRect;
begin
  if Stage = cdPostPaint then
  begin
    lst := Sender as TListView;
    lst.Canvas.Brush.Style := bsSolid;
    i := lst.Items.Count;
    if not Odd(i) then
    begin
      c1 := clWhite;
      c2 := $00F8F8F8;
      f1 := clBlue;
      f2 := clBlack;
    end else
    begin
      c1 := $00F8F8F8;
      c2 := clWhite;
      f1 := clBlack;
      f2 := clBlue;
    end;
    // Painting...
    if Odd(Item.Index) then
    begin
      lst.Canvas.Brush.Color := c2;
      lst.Canvas.Pen.Color := c2;
      lst.Canvas.Font.Color := f2;
    end else
    begin
      lst.Canvas.Brush.Color := c1;
      lst.Canvas.Pen.Color := c1;
      lst.Canvas.Font.Color := f1;
    end;

    r:=Item.DisplayRect(drBounds);

    if cdsSelected in State then
    begin
      lst.Canvas.Brush.Color:=clHighlight;
      lst.Canvas.Pen.Color:=clHighlight;
      lst.Canvas.Font.Color:=clBlack;
    end;

    lst.Canvas.Rectangle(r);

    if cdsSelected in State then
      lst.Canvas.DrawFocusRect(r);

    lst.Canvas.TextOut(r.Left, r.Top + (r.Bottom - r.top - lst.Canvas.TextHeight(Item.Caption)) div 2, Item.Caption);
    for i := 0 to Item.SubItems.Count - 1 do
    begin
      r.Left:=r.Left + lst.Columns[i].Width;
      lst.Canvas.TextOut(r.Left, r.Top + (r.Bottom - r.top - lst.Canvas.TextHeight(Item.Caption)) div 2, Item.SubItems[i]);
    end;
  end;
end; 
```

希望这可以帮助。

# json - Jquery cookie在删除时保留最后一个值

> ID：12622434
> 
> 赞同：0
> 
> 时间：2012-09-27T13:23:19.600
> 
> 标签：json, cookies, jquery

请查看我的网站：[moskah.nl](http://moskah.nl/)

如果您在字段中键入内容，请保存并刷新。您会注意到 cookie 保存了该值。现在，如果您单击列表，它将被删除。现在尝试存储多个列表并再次删除它们。您将看到最后单击的列表项不会被删除（刷新时）

我不知道为什么会这样。我也不能给你一个关于 jsfiddle 的例子，因为它在那里不起作用。请查看网站的源代码（它非常小）以了解发生了什么。

这件作品持有 cookie 价值

```
 $('.fields a').click(function(e) {
        var text = $('#inputBox').val();
        var values = $.parseJSON($.cookie('myDemoCookie'));
        if (!values) {
            values = [];
        }
        values.push(text);

        $.cookie('myDemoCookie',JSON.stringify(values),{expires: 7, path: '/' });

$(".jq-text").append('<li><a href="' + text + '">' + text + '</a></li>');

        e.preventDefault();

    }); 
```

这是用于删除列表：

```
$('.jq-text li').live('click', function(e) {
    var values = [];

    $(".jq-text").find('a').each(function(i, item) {

        values.push($(item).text());
    });

    $.cookie('myDemoCookie', JSON.stringify(values), {
        expires: 7
    });
    $(this).remove();
    e.preventDefault();

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:37:27.897

试试这个：[https ://github.com/tantau-horia/jquery-SuperCookie](https://github.com/tantau-horia/jquery-SuperCookie)

设置cookie：

```
$.super_cookie().create("name_of_the_cookie",{name_field_1:"value1",name_field_2:"value2"}); 
```

插入值：

```
$.super_cookie().add_value("name_of_the_cookie","name_field_3","value3"); 
```

删除值：

```
$.super_cookie().remove_value("name_of_the_cookie","name_field_1")); 
```

# c# - TCP 数据偶尔接收顺序错误且不完整

> ID：12622435
> 
> 赞同：3
> 
> 时间：2012-09-27T13:23:28.260
> 
> 标签：c#, java, sockets, tcp, corrupt

我在 Java 中创建了 TCP 服务器应用程序，并在 C# 中创建了客户端应用程序。当我发送数据时，客户端有时会乱序接收数据，有时部分会完全丢失。基本上，我在服务器（java）中使用的代码看起来像这样（剥离）：

```
ServerSocket welcomeSocket = new ServerSocket(port);
Socket connectionSocket = welcomeSocket.accept();

outputStream = new DataOutputStream(socket.getOutputStream()); //Create stream
outputStream.writeBytes(message + "\n");
outputStream.flush(); 
```

我使用“\n”作为分隔符。在客户端（C#）我使用以下代码：

```
private const char Delimiter = '\n';

tcpclnt = new TcpClient();
tcpclnt.NoDelay = true;
tcpclnt.Client.DontFragment = true;
tcpclnt.Connect(ip, port);

//This function is executed in a separate thread
public void Receive() 
{
try
{
    stream = tcpclnt.GetStream();
    streamreader = new StreamReader(stream);
    this.Connected = true;
    while (Connected)
    {
        string line = ReadLine(streamreader);
        Console.WriteLine("Received data: " + line);
    }
}
}

private string ReadLine(StreamReader reader)
{
    bool finished = false;
    string line = "";

    while (finished == false)
    {
        int asciiNumber = reader.Read();
        char character = Convert.ToChar(asciiNumber);

        if (!character.Equals(Delimiter))
            line += character;
        else finished = true;
    }

    return line;
} 
```

代码不是很复杂。但是，从服务器发送的数据并不总是在客户端正确接收。例如，我应该收到以下两个字符串：“5_8_1”和“6_LEVELDATA”

然而，我（有时）得到的是：“5_8_61”和“_LEVELDATA”

另一个例子：“5_4_1”和“6_LEVELDATA”产生一个字符串：“5_6_LEVELDATA”

这似乎是一个小问题，但实际上它确实毁了我的应用程序。我读过很多帖子，但我读过的唯一答案是“这不应该发生在 TCP 上”或“首先发送 tcp 消息的长度”在这种情况下没有任何帮助，因为问题是不是数据被分成多个包，它根本没有以正确的顺序到达，这是 TCP 应该做的事情。

我 100% 确定字符串在 Java 应用程序发送之前始终是完整的。

我真的想知道我在这里做错了什么。我的代码中有什么不好的地方吗？我将不胜感激有关此问题的任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T14:38:29.093

尝试 Wireshark 后，似乎我的问题存在于服务器中。显然，每个 TCP 消息都是在单独的线程中发送的。感谢您的所有评论！我的问题现在解决了。

# database - 从 LINQ 查询中生成我的文本框视图结果

> ID：12622436
> 
> 赞同：2
> 
> 时间：2012-09-27T13:23:39.680
> 
> 标签：database, linq, textbox

大家好，我试图让我的文本框查看我点击下拉框的每个项目的名称。所以我想将结果与下拉列表匹配，然后将其显示在文本框中。

我已经这样做了，它似乎不起作用。

```
 var sql = (from query in dwe.VW_CustumAddress
                       where query.Postal == DropDownListPostal.SelectedItem.ToString()
                       select query);

            if (sql != null)
            {
                NavnBox.Text = data.Name;
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:32:03.207

尝试调试这个。

```
var selectedItem = DropDownListPostal.SelectedItem;
if (selectedItem != null) {
   var postal = selectedItem.ToString();//check if it looks like something you want
   var data = dwe.VW_CustumAddress.FirstOrDefault(m => m.Postal == postal);
   if (data != null)
      NavnBox.Text = data.Name;
} 
```

# jquery - jQuery 在用户不活动的 15 秒内更改页面上所有位置的类

> ID：12622438
> 
> 赞同：0
> 
> 时间：2012-09-27T13:23:42.400
> 
> 标签：jquery, time, fancybox, sleep, python-idle

我有一个 html 页面，页面上有几个小窗口（未定义窗口数量）。每个窗口都有`.ticking`类。`.ticking`用于 jQuery 的类，用于在用户浏览器上显示服务器时间 +。有些窗口看起来一样，但没有 .ticking 类。在这样的窗口中什么都不会发生。

我想要：

1) 在 15 秒不活动时显示弹出窗口，并从页面上的任何地方删除滴答类

2) 在页面上单击时返回所有内容，即将 .ticking 类返回给拥有它的那些。

任何想法如何做到这一点？

据我了解，我应该将`.ticking`类重命名为`.ticking-sleep`一个并重命名`.ticking-sleep`为`.ticking`用户关闭弹出窗口时。但是，我仍然不知道如何实现这一点以及使用什么事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:27:45.113

我假设用户活动主要包括鼠标移动。您可以在重命名类等的函数上使用 setTimeout。您可以使用 mousemove 处理程序始终将该超时重置为 15 秒。一旦用户停止移动超时函数调用将执行并更改类，显示您的弹出窗口等。

未经测试，但类似这样：

```
var inactiveTimeout = setTimeout(handleInactiveUser, 15000);

$(document).mousemove(function(){
    //clear the timeout and reset
    clearTimeout(inactiveTimeout);
    inactiveTimeout = setTimeout(handleInactiveUser, 15000);
});

function handleInactiveUser(){
    // change the classes
    // show the popup
} 
```

**[更新：演示](http://jsfiddle.net/yke3P/)**很好地说明了我认为的原理。

# java - Apache Commonfs VFS 避免增长临时目录

> ID：12622439
> 
> 赞同：3
> 
> 时间：2012-09-27T13:23:44.740
> 
> 标签：java, vfs, temporary-directory, apache-commons-vfs

我对 VFS 有疑问。我开发了一个 Web 应用程序来将部署包（zip 文件）的 URL 粘贴到 textarea 中。您可以查看部署脚本并在最后部署应用程序。它在小型机器上的 tomcat 上运行。部署包大约 5-100 MB。我现在的问题是，临时目录会随着时间的推移而增长。VFS 似乎没有从临时目录中删除文件。我为 tomcat 编写了一个启动脚本，用于清理 vfs 临时目录。但这根本不是很好。

1.  有没有办法在不关闭的情况下通过 VFS 删除它们`FileSystemManager`？

2.  似乎临时目录是一个缓存，但是当文件更改时，它不会再次从 Intranet 加载它。

我曾经设置

```
 ((DefaultFileSystemManager) VFS.getManager()).setFilesCache(new NullFilesCache());
        ((DefaultFileSystemManager) VFS.getManager()).setCacheStrategy(CacheStrategy.ON_CALL); 
```

但似乎 VFS 没有将临时目录视为缓存。我理解错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:01:16.777

我通过修改我的核心项目以通过工厂获取 FileSystemManager 并通过我的 Web 项目（会话绑定和手动销毁方法）处理内部的 FileSystemManager 解决了这个问题。在销毁时，我只需关闭 FileSystemManager 并创建一个新的。这整理了临时目录。

# c# - 摆脱进度条控件的透明度

> ID：12622440
> 
> 赞同：2
> 
> 时间：2012-09-27T13:23:45.357
> 
> 标签：c#, .net, winforms, windows-xp, progress-bar

虽然有几个关于如何使 WinForms[`ProgressBar`控件](http://msdn.microsoft.com/en-us/library/4z6ak4h9.aspx)透明的问题，但我正面临相反的问题：

![Windows XP下的进度条](../Images/e6525b970a2b5f19aee072db15b07e10.png)

即我有一个包含进度条的 WinForms 表单（从[Add-in Express Outlook 加载项调用）。](http://www.add-in-express.com/)

在 Windows 7 上，一切看起来都很好，但在 Windows XP 上，进度条的背景似乎闪耀着光芒（如您在屏幕截图中所见）。

一件特别的事情是表单的[`FormBorderStyle`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formborderstyle.aspx)设置为`None`。

**我的问题是：**

有谁知道这种（不需要的）透明度的原因以及如何摆脱它？

**更新/解决方案：**

感谢[约翰的回答](https://stackoverflow.com/questions/12622440/get-rid-of-the-transparency-of-a-progress-bar-control#comment17018342_12622440)，我发现表单的[`TransparencyKey`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.transparencykey.aspx)被设置为一些奇怪的值。完全清除后，它就像一个魅力：

![正确显示](../Images/7f013cc2c04614a6e73989c4a97d29c4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:47:03.467

您的透明度键设置为控件的背景颜色。将其更改为您不会使用的颜色，例如洋红色。

# css - 当透视应用于父元素时，为什么隐藏的背面可见性在 IE10 中不起作用？

> ID：12622441
> 
> 赞同：52
> 
> 时间：2012-09-27T13:23:45.530
> 
> 标签：css, css-transforms, internet-explorer-10

好的，这是另一个 IE10 故障。问题是对父元素应用透视会破坏背面可见性隐藏设置。请看这个小提琴：http: [//jsfiddle.net/2y4eA](http://jsfiddle.net/2y4eA)

当您将鼠标悬停在红色方块上时，它会在 x 轴上旋转 180°，即使将背面可见性设置为隐藏，也会显示背面，至少在达到 180° 之前，它会消失。去掉perspective 属性，你会看到它按预期工作，背面根本不可见，但当然失去了3d 效果。

可以通过在变换属性中应用透视来解决这个问题：http: [//jsfiddle.net/M2pyb](http://jsfiddle.net/M2pyb)但这会导致与变换原点-z结合的问题，当z设置为0以外的任何东西时，整个事情变得“缩放”： http: [//jsfiddle.net/s4ndv](http://jsfiddle.net/s4ndv)所以不幸的是这不是一个解决方案。

背面可见性的东西可能是一个错误？如果是这样，除了我提到的之外，还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-04T07:20:20.370

我也遇到了这个故障，这绝对是一个故障。

解决方法是对子元素应用透视变换。我在这里更新了你的小提琴：http: [//jsfiddle.net/jMe2c/](http://jsfiddle.net/jMe2c/)

```
.item {
    backface-visibility: hidden;
    transform: perspective(200px) rotateX(0deg);
}
.container:hover .item {
    transform: perspective(200px) rotateX(180deg);
} 
```

（另请参阅[https://stackoverflow.com/a/14507332/2105930](https://stackoverflow.com/a/14507332/2105930)上的答案）

我认为这是因为在 IE 10 中，父元素 3d 属性不会传播到子元素。这是一个已知的不受支持的功能。查看[http://msdn.microsoft.com/en-us/library/ie/hh673529%28v=vs.85%29.aspx#the_ms_transform_style_property](http://msdn.microsoft.com/en-us/library/ie/hh673529%28v=vs.85%29.aspx#the_ms_transform_style_property)：

> 目前，Internet Explorer 10 不支持**preserve-3d**关键字。除了子元素的正常变换之外，您可以通过手动将父元素的变换应用于每个子元素来解决此问题。

因此，*Microsoft*推荐的解决方案是手动传播您的 3d 属性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-06T19:15:39.593

我挣扎了好几个小时。这是唯一对我有用的跨浏览器解决方案：[http ://www.cssplay.co.uk/menu/css3-3d-card.html](http://www.cssplay.co.uk/menu/css3-3d-card.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T14:08:37.787

我想的一种解决方法是为不透明度添加一个过渡，它的时间为 0，并且延迟了你的透视过渡的一半。

```
.container, .item {
    width: 200px;
    height: 200px;
    opacity:1;
}
.container {
    perspective: 200px;
}
.container:hover .item {
    transform: rotateX(180deg);
    opacity:0;
}
.item {
    background-color: #ff0000;
    backface-visibility: hidden;
    transition: transform 3000ms, opacity 0ms 1500ms;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-25T10:08:26.877

我建议停止使用在所有转换元素上设置的透视属性与 IE 作斗争，并开始测试对 preserve-3d 的支持。我跟着这个人通过属性测试扩展了 Modernizr：[https ://coderwall.com/p/qctclg?comment=This+was+awesome%21+And+exactly+what+i+needed.+Thanks%21+](https://coderwall.com/p/qctclg?comment=This+was+awesome%21+And+exactly+what+i+needed.+Thanks%21+)

这样，它可以为 IE 缺乏 3d 转换的实现做一个后备，并开始在其他浏览器中使用更前沿的可能性。

否则 IE 会使您的代码过于混乱，并且仍然无法为您提供相同的可能性——比如旋转多面 3d 对象。

..只是我的2美分。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-23T01:52:17.033

我有一个很好的不合逻辑的解决方案，我尝试了上述所有解决方案，但都没有奏效。但是，发生了错误。我将卡片翻转时的背面可见性设置为可见。适用于 IE 和 Chrome。

它在 Chrome 中效果更好，IE 还可以。

```
var flipcard = document.getElementsByClassName("flipcard");
var i;

for (i = 0; i < flipcard.length; i++) {
    flipcard[i].addEventListener("click", function() {
        this.classList.toggle("is-flipped");
    });
}
```

```
.card_scene {
    width: 180px;
    height: 234px;
    margin: 10px 5px;
    perspective: 600px;
    float:left;
  }

  .flipcard {
    height: 100%;
    transition: transform 1s;
    transform-style: preserve-3d;
    cursor: pointer;
    position: relative; 
  }

  .flipcard.is-flipped {
    transform: rotateY(180deg);
  }

  .flipcard.is-flipped .card__face {
    backface-visibility: visible;                        
}

 .card__face {
    position: absolute;
    max-width: 100%;
    max-height: 100%;
    line-height: 234px;
    backface-visibility: hidden;
  }

.card__face--front {
	transform: rotateY(0deg);
}

.card__face--back {
	background: white;
	transform: rotateY(-180deg);
	border: 1px solid #CCC; 
	width: 100%;
}

.cardtext {
	margin: 6px;
    font-size:14px;
    line-height: 1.2em;
    display: inline-block;
    width: 100%;
    white-space: pre;
}

.flipcard-breakfloat {
 clear: left;   
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<!-- start of flipcard tempalte -->
<div class="build-only">
<h2>question text here</h2>
<p>Flip the pictures to...</p>
<div>
<div class="card_scene">
<div class="flipcard">
<div class="card__face card__face--front"><picture class="card__image"><img width="180" height="234" id="yui_3_17_2_1_1534724749880_198" src="https://media.gettyimages.com/photos/world-heritage-listed-rainforest-in-dorrigo-national-park-new-south-picture-id936315116" /> </picture></div>
<div class="card__face card__face--back">
<p class="cardtext">** max width of feedback **<br />Add feedback text here use <br />shift+enter for line breaks. <br />don't use just use enter or <br />break will appear below  <br />iamge, and overlay the text. <br />note the class <br />".nsw-td-flipcard-breakfloat" <br />this breaks the float: left so <br /> following text appears <br />as normal <br />Image size is width: <br />"180" height: "234"</p>
</div>
</div>
</div>
<div class="card_scene">
<div class="flipcard">
<div class="card__face card__face--front"><picture class="card__image"> <img width="180" height="234" alt="" src="https://media.gettyimages.com/photos/lonely-single-tree-in-the-field-picture-id680917092" /> </picture></div>
<div class="card__face card__face--back">
<p class="cardtext">** max width of feedback ** <br />Add feedback text here use <br />shift+enter for line breaks. <br />don't use just use enter or <br />break will appear below  <br />iamge, and overlay the text. <br />note the class <br />".nsw-td-flipcard-breakfloat" <br />this breaks the float: left so <br /> following text appears <br />as normal <br />Image size is width: <br />"180" height: "234"</p>
</div>
</div>
</div>
<div class="card_scene">
<div class="flipcard">
<div class="card__face card__face--front"><picture class="card__image"> <img width="180" height="234" alt="" src="https://media.gettyimages.com/photos/old-tree-picture-id173501312" /> </picture></div>
<div class="card__face card__face--back">
<p class="cardtext">** max width of feedback ** <br />Add feedback text here use <br />shift+enter for line breaks. <br />don't use just use enter or <br />break will appear below  <br />iamge, and overlay the text. <br />note the class <br />".nsw-td-flipcard-breakfloat" <br />this breaks the float: left so <br /> following text appears <br />as normal <br />Image size is width: <br />"180" height: "234"</p>
</div>
</div>
</div>
</div>
<div class="flipcard-breakfloat"></div>
</div>
<!-- end of flipcard tempalte -->
<p></p>
<p></p>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-28T21:16:05.960

[我在这个jsfiddle](http://jsfiddle.net/jMe2c/505/)中实现了 @torbonaut 和 @chowey 提出的解决方案

html

```
<div id='container'>
<div class='backhide bottom'>bottom</div>
<div class='backhide top'>top</div>
</div> 
```

css

```
 #container, .bottom, .top {
    width: 200px;
    height: 300px;
    position: absolute;
    -webkit-transition: 1.5s ease-in-out;
    -moz-transition: 1.5s ease-in-out;
    -ms-transition: 1.5s ease-in-out;
    -o-transition: 1.5s ease-in-out;
    transition: 1.5s ease-in-out;
  }

  .backhide{

    -moz-backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }

  #container:hover .bottom {
    -moz-transform: perspective(800px) rotateY(0);
    -webkit-transform: perspective(800px) rotateY(0);
    transform: perspective(800px) rotateY(0);
  }
  #container:hover .top {
    -webkit-transform: perspective(800px) rotateY(-180deg);
    -moz-transform: perspective(800px) rotateY(-180deg);
    transform: perspective(800px) rotateY(-180deg);
  }

  .bottom {
    background-color: #ff0000;
    -moz-transform: perspective(800px) rotateY(180deg);
    -webkit-transform: perspective(800px) rotateY(180deg);
    transform: perspective(800px) rotateY(180deg);
  }

  .top {
    background-color: #e0e0e0;

    -moz-transform: perspective(800px) rotateY(0deg);
    -webkit-transform: perspective(800px) rotateY(0deg);
    transform: perspective(800px) rotateY(0deg);

  } 
```

# unix - 文件中的精确替换

> ID：12622445
> 
> 赞同：0
> 
> 时间：2012-09-27T13:23:58.310
> 
> 标签：unix

我的数据如下：

```
abc aabcd abcd Abc
ABCjj abcdef abc abcGHI abc 
```

我希望它为：

PQR 替换 abc: 输出：

```
PQR aabcd abcd Abc
ABCjj abcdef PQR abcGHI PQR 
```

这里只有精确的**abc**被替换为**PQR**，并且 **abcdef,abcGHI 是原样的**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:42:46.560

```
printf ',s/\<abc\>/PQR/g;w;' | tr \; \\012 | ed input-file 
```

你也可以这样写（也许更易读）：

```
ed input-file << EOF
,s/\<abc\>/PQR/g
w
EOF 
```

# c - 有没有办法在源文件之间共享“结构”而不将其暴露在头文件中？

> ID：12622449
> 
> 赞同：4
> 
> 时间：2012-09-27T13:24:05.000
> 
> 标签：c, struct, typedef, private

假设我有一个头文件**foo.h**，它声明了一个结构变量

```
#include <stdio.h>

typedef struct foo_struct foo_s;

foo_s foo_function(int a);
foo_s bar_function(int b); 
```

和一个实际定义结构的源文件**foo.c**

```
#include "foo.h"

struct foo_struct
{
   int a;
   int b;
};

foo_s foo_function(int a)
{
    foo_s fs;
    fs.a = a;
    return fs;
} 
```

现在我想在另一个源文件**bar.c中访问****foo.c**中定义的结构，所以我尝试以下操作：

 **```
#include "foo.h"

foo_s bar_function(int b)

{
  foo_s fb;
  fb.b = b;

  return fb;
} 
```

...并以*bar.c:3:7 失败：错误：返回类型是不完整的类型*

我有点理解问题所在，但有解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T14:10:08.717

您需要了解`struct foo_struct`foo.c 外部的定义，从而打破了您的抽象。使结构定义对特定源文件“私有”的全部*目的*是使其他源文件不知道也不能`struct foo_struct`直接操作其成员。

您要么需要`bar`进入 foo.c，*要么*需要将结构定义放入`foo.h`（使其公开），*或者*您需要定义一个接口，允许其他翻译单元分配、设置、读取和解除分配类型的项目，`foo_s`而无需暴露其类型的细节，类似于`stdio.h`操作类型对象的例程`FILE`，例如

```
foo_s *create_foo(int a, int b);
void set_foo(foo_s *f, char *property, int value);
int get_foo(foo_s *f, char *property);
void destroy_foo(foo_s **f);  // sets f to NULL after deallocation. 
```

您可以将上述接口添加到 foo.h 并在 foo.c 中实现它；其他翻译单元（源文件）中的函数会像这样使用它：

```
void blah(void)
{
  foo_s *f = create_foo(0,0);
  if (f)
  {
    set_foo(f, "a", 1);
    set_foo(f, "b", 2);

    printf("a = %d, b = %d\n", get_foo(f, "a"), get_foo(f, "b");
    destroy_foo(&f);
    assert(f == NULL);
  }
} 
```

可能有一百种更好的方法可以做到这一点，但你应该明白这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T14:09:48.940

不，没有简单的解决方法。

在这段代码中

```
typedef struct foo_struct foo_s; 

foo_s fb;
fb.b = b; 
```

编译器只知道这`foo_s`是一个结构，但它不知道是否`b`是该结构的成员，或者结构有多大。而且它绝对不知道它是您要为其分配值的第二个成员，因此它不起作用。

如果您包含结构的定义，编译器只能告诉代码应该做什么。**

# video - 通过 API 限制 youtube 视频访问

> ID：12622452
> 
> 赞同：2
> 
> 时间：2012-09-27T13:24:12.657
> 
> 标签：video, youtube, video-streaming, youtube-api

我正在开发一个 Web 应用程序，用户将在该应用程序中注册我的应用程序，并且能够看到仅为该注册观众上传的某些视频。我个人更喜欢像 youtube 这样的视频专家网站。

现在，我们可以通过 youtube API 添加允许观看这些视频的用户吗？如果没有，那么请建议一个允许这样做的好的视频托管服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:40:37.870

您可以通过 API 将视频标记为私有、公开或不公开。

但是，您不能将特定帐户添加/删除到允许使用 API 观看私人视频的访问控制列表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T13:31:01.153

您可以使用 Vimeo，它允许更多隐私和限制选项

# domain-driven-design - CQRS 还是应用服务？

> ID：12622455
> 
> 赞同：5
> 
> 时间：2012-09-27T13:24:26.397
> 
> 标签：domain-driven-design, cqrs

所以我喜欢在我们的应用程序中使用 CQRS 的概念，主要是因为我们已经支持事件溯源（从概念上讲，不遵循你看到的任何规定）。然而，CQRS 似乎真的是面向大数据、最终一致性之类的东西。我们总是会成为一个关系数据库应用程序，所以我不确定它是否合适。

我也有顾虑，因为我认为我需要在我的应用层做一些特殊的事情。在进行读取时，我需要强制执行安全性和过滤数据，这些都是传统上在应用层中实现的东西。

我的第一个问题是，我的应用程序是否适合（传统的 MVC / 关系数据库应用程序）？还是拥有传统的应用程序层并使用 DTO 映射器更有意义？

我的第二个问题是，从传统应用层向域模型发出命令是否有意义？我喜欢命令/命令处理程序和事件的想法。

让我澄清一下我的问题。我担心与授权相关的数据过滤。当用户请求数据时，必须有一个过滤器来限制对某些数据元素的访问，方法是将它们全部删除（因此它们不会返回给调用者）、隐藏值或对数据应用掩码。在一个人为的示例中，对于社会安全号码，发出请求的用户可能只能看到最后 4 个数字，因此结果将显示为 ###-##-1234。

我的断言是，这个责任在应用层。我认为这是一个方面，对查询或命令的所有响应都必须通过这种过滤机制。这就是我的 CQRS 天真的地方，也许是命令从不返回数据，只是指向通过读取模型查找的数据的指针？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T15:38:25.393

首先也是最重要的：**CQRS**和**关系数据库**不会相互排斥。在高级场景中，将基于 SQL 的 DB 替换为其他存储方式可能是有意义的，但 CQRS 作为一个概念并不关心持久性机制。

在依赖于角色和/或用户的多个视图的情况下，**精简读取层**可能应该提供多个结果集：

1.  一个包含被授权访问该信息的用户的完整 SSN。
2.  为无权查看该信息的用户提供不同的信息
3.  ...

这些可以存储在单独的数据存储中，但如果您使用单个基于 SQL 的数据库，它们也可以通过 SQL 视图提供。

在 CQRS 中，**Application Service**仍然以**Command Handlers**的形式存在。这些可以嵌套，即首先处理授权，然后将命令发布到包含的命令处理程序。

```
public class AuthorizationHandler {

    public CrmAuthorizationService(CrmCommandHandler handler) {
        _next = handler;
    }

    public void Handle(SomeCommand c) {
        if (authorized) _next.Handle(c);
    }
}

// Usage:
var handler = new CrmAuthorizationService(new CrmCommandHandler());
bus.Register<SomeCommand>(handler.Handle); 
```

通过这种方式，您可以嵌套多个处理程序，例如作为*REST 信封*，用于*日志记录*、*事务*等。

**要回答您的问题：**

**第一：** CQRS 是否适合您的应用程序？如果不真正深入研究具体要求，谁也说不出来。就 CQRS 的优缺点而言，仅仅因为您使用 MVC 和关系数据库并没有任何意义。

**第二**：是的，在某些情况下，让您的应用程序层以经典方式与客户端交互并处理身份验证、授权等事情，然后在内部发出命令是有意义的。这在将基于 MVC 的 UI 或 REST API 放在应用程序之上时会很有用。

**更新以回应评论：**

在一个理想的、纯粹的 CQRS 场景中，Sally 会为每个视图拥有自己的非规范化数据，例如 NoSQL DB 中名为*CustomerListForSally*、*CustomerDetailsForSally*等的几个文档。这些文档填充了她允许查看的内容。

一旦她得到提升——这将是一个重要的领域事件——她所有的非规范化数据将被自动覆盖，并扩展为包含她现在可以看到的内容。

当然，我们必须保持理性和务实，但这个理想应该是我们前进的大方向。

实际上，您可能拥有某种基于用户/角色或用户/组的系统。为了能够查看敏感信息，您必须是特定角色或组的成员。这些中的每一个都可以有它们定义的视图和命令集。这不需要去噪数据它可以像 SQL-Views 一样简单：

*   *CustomerDetailsForSupportStaff*
*   *具有未屏蔽 SSN 的*CustomerDetailsForSupportExecutive**
**   *支持人员的客户名单**   *CustomerListForSupportExecutive*与客户总收入*   等等*

# visual-studio-2010 - 加密或解密 web.config 中的配置部分

> ID：12622456
> 
> 赞同：0
> 
> 时间：2012-09-27T13:24:31.273
> 
> 标签：visual-studio-2010, web-config, encryption

对 VS 2010 的 web.config 文件中的配置部分进行加密或解密的最简单和最好的方法是什么。 vs2005 和 vs2010 中使用的方法有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:30:49.057

该方法很长时间没有改变 - 使用[`aspnet_regiis.exe`](http://msdn.microsoft.com/en-us/library/zhhddkxy.aspx)带有加密参数的命令行工具。

# redirect - 使用 CAS 的 JMeter 测试未重定向到服务

> ID：12622463
> 
> 赞同：4
> 
> 时间：2012-09-27T13:24:41.987
> 
> 标签：redirect, jmeter, cas

我正在使用 CAS 进行 jmeter 测试，但遇到了问题。

我使用完整的 CAS 参数（用户名/密码/lt/service/_eventId）成功登录，但响应数据不是我在参数“服务”中指定的页面。

它没有被重定向。

为什么？有谁知道这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T01:01:23.457

我承认我对CAS不是很熟悉......

在阅读了 CAS 的协议后，我发现：（来自[http://www.jasig.org/cas/protocol](http://www.jasig.org/cas/protocol)）

2.2.4。响应 /login 作为凭证​​接受器运行时，必须提供以下响应之一。

成功登录：将客户端重定向到“service”参数指定的 URL，不会导致客户端的凭据被转发到服务。此重定向必须导致客户端向服务发出 GET 请求。请求必须包含一个有效的服务票据，作为 HTTP 请求参数“票据”传递。有关详细信息，请参阅附录 B。如果未指定“服务”，CAS 必须显示一条消息，通知客户端它已成功启动单点登录会话。

因此，我使用带有两个参数的 GET 添加了一个新请求：service、ticket（其值与 lt 相同）。

然后脚本成功运行并最终重定向..

# sql - 如何在单击时从 Column(0) 中的列表框中引用值？

> ID：12622464
> 
> 赞同：1
> 
> 时间：2012-09-27T13:24:42.317
> 
> 标签：sql, database, vba, ms-access

我有一个基于先前过滤器（文本框）填充的列表框。这意味着列表框中没有预定义的项目数量，因此无法使用索引。

我正在寻找的是一种选择列（0）的值的方法，因为我的列表框中有 3 列，被单击的选定行。

```
Private Sub listSource_Click()

Dim strSource As String

strSource = "SELECT [Product Code],[Stock Level],[Description] FROM [products/stock] " & _
"WHERE Mid([Product Code],1,5) = " & Me.listSource.Column(0).Value & ";"

Me.listResult.RowSource = strSource
Me.listResult = vbNullString

End Sub 
```

我认为我需要的只是一小段代码，它应该是“Me.listSource.Column(0).Value”所在的位置。

在此先感谢，鲍勃 P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T14:00:13.853

我想你想要：

```
strSource = "SELECT [Product Code],[Stock Level],[Description] " & _
"FROM [products/stock] " & _
"WHERE Mid([Product Code],1,5) = '" & Me.listSource & "';" 
```

注意 Me.listSource 前后的单引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:43:44.060

`Me.listresult`给出绑定列

然后，您必须为其他列附加`.Column(0)`, `.Column(1)`...。

要找出您需要查看的列表中的哪一个，`.ItemsSelected.Count`将告诉您选择了多少（1 表示简单的列表框），以及`.ItemsSelected(0)`选择的第一个项目的索引，因此，第一列的完整行第一个选定的行将是：

```
Me.listSource.ItemData(Me.ListSource.ItemsSelected(0)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:42:52.330

您应该能够使用 Me.ListSource.Column(0) 来获取所选行的第一列的值。

另请参阅：[检索多列访问列表框的选定行的列值](https://stackoverflow.com/questions/4649000/retrieve-column-values-of-the-selected-row-of-a-multicolumn-access-listbox)

# javascript - 在javascript中的div元素内创建一个div元素

> ID：12622465
> 
> 赞同：44
> 
> 时间：2012-09-27T13:24:46.330
> 
> 标签：javascript, dom, createelement

我正在尝试一个非常基本的示例来创建一个`div`已经存在的`div`.

当我使用时，它似乎不起作用：

```
document.getElementbyId('lc').appendChild(element) 
```

但是当我这样做时效果很好：

```
document.body.appendChild(element) 
```

我需要添加`windows.onload`功能吗？虽然即使那样也行不通！

HTML 代码：

```
<body>
    <input id="filter" type="text" placeholder="Enter your filter text here.." onkeyup = "test()" />

    <div id="lc">  
    </div>
</body> 
```

JS代码：

```
function test()
{
    var element = document.createElement("div");
    element.appendChild(document.createTextNode('The man who mistook his wife for a hat'));
    document.getElementbyId('lc').appendChild(element);
    //document.body.appendChild(element);
} 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-09-27T13:33:48.383

您的代码运行良好，您只是输入了这行代码：

~~`document.getElementbyId('lc').appendChild(element);`~~

用这个改变它：（**“ *B* ”应该大写。）**

```
document.getElementById('lc').appendChild(element); 
```

**这是我的例子：**

```
<html>
<head>

<script>

function test() {

    var element = document.createElement("div");
    element.appendChild(document.createTextNode('The man who mistook his wife for a hat'));
    document.getElementById('lc').appendChild(element);

}

</script>

</head>
<body>
<input id="filter" type="text" placeholder="Enter your filter text here.." onkeyup = "test()" />

<div id="lc" style="background: blue; height: 150px; width: 150px;
}" onclick="test();">  
</div>
</body>

</html>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T13:35:09.757

`document.getElementById` 'b' 在修改后的代码[jsfiddle](http://jsfiddle.net/p5hzA/)中应为大写字母

```
function test()
{

var element = document.createElement("div");
element.appendChild(document.createTextNode('The man who mistook his wife for a hat'));
document.getElementById('lc').appendChild(element);
 //document.body.appendChild(element);
 } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-27T13:30:38.937

是的，当元素已经在文档的 DOM 树中找到时，您要么需要执行此操作，要么需要`onload`在结束`<script>`标记*之后的标记中执行此操作。*`</body>``lc`

# javascript - 头文件中的jquery冲突

> ID：12622466
> 
> 赞同：0
> 
> 时间：2012-09-27T13:24:48.853
> 
> 标签：javascript, jquery, conflict

嗨，我正在使用 jquery 周历和 php 日历，但如果像这样放置查询文件，我会遇到冲突。

在我的 header.phtml 文件中，代码是

```
<head>  
<?php
echo $this->headTitle('dddd');
$this->headMeta()
        ->setHttpEquiv('Content-Type', 'text/html;charset=utf-8')
        ->appendName('keywords', '')
        ->appendName('author', '')
        ->appendName('copyright', '')
        ->appendName('description', '');
$this->headLink()->headLink(array('rel' => 'favicon', 'href' => '/favicon.ico'), 'PREPEND');
$this->headLink()                
            ->appendStylesheet($this->baseUrl.'/styles/layout.css', 'all')
            ->appendStylesheet($this->baseUrl.'/scripts/jquery/jquery.css', 'all');

$this->headScript()->appendFile('http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js');
$this->headScript()->appendFile('http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js);           

$oFront = Zend_Controller_Front::getInstance(); 
if($oFront->getRouter()->getCurrentRouteName() == "template-schedules-edit-template-schedule" ){
    $this->headScript()->appendFile($this->baseUrl.'/scripts/jquery/plugins/weekcalendar/jquery-ui.min.js');
}else{
    $this->headScript()->appendFile('http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.19/jquery-ui.min.js');
}        

echo $this->headMeta();
echo $this->headLink();
echo $this->headScript();
?> 
</head> 
```

在这里，我将 jquery/1.3.2/jquery.min.js 用于 jquery 周历，将 jquery/1.7.2/jquery.js 用于 php canlender ..

请帮帮我。这是我在堆栈溢出中的第一个问题。

/uday

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:27:07.037

您不需要两个版本的 jQuery。只需使用一个，你应该没问题。摆脱以下行：

```
$this->headScript()->appendFile('http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:28:17.877

如果您正在创建新代码，您应该避免使用 2 个版本的 jQuery（使用最新版本并根据需要进行调整）。如果由于某种原因你被两者都困住了（难以处理的遗留代码），有关于同时存在 2 个版本的信息：同时[运行多个版本的 jQuery](https://stackoverflow.com/q/9813311/1655332)

# awk - AWK，getline - 删除最后一个字段

> ID：12622467
> 
> 赞同：1
> 
> 时间：2012-09-27T13:24:50.240
> 
> 标签：awk, getline

我有一个文件：

```
Srednia ocen Wojciech Zieba: 3.83
Srednia ocen Jakub Pelc: 3.76
Srednia ocen Jan Resiak: 3.90 
```

我想改进命令：

1.

```
$ awk 'BEGIN{ while( getline $0 < "file") sub($NF,"",$0); print $0}' 
Srednia ocen Jan Resiak: 
userpc@userpc-desktop:~ 
```

2.

```
$ awk 'BEGIN{ while( getline a < "file") sub($NF,"", a); print a}' 
Srednia ocen Jan Resiak: 3.90 
userpc@userpc-desktop:~/Pulpit$ 
```

我必须通过 getline 来完成。我的示例只是脚本的一部分。我想删除最后一个字段并打印结果：

```
Srednia ocen Wojciech Zieba: 
Srednia ocen Jakub Pelc: 
Srednia ocen Jan Resiak: 
```

谢谢您的帮助。

**编辑：**

但是这种方式不会打印剩余的字段：

```
$ awk 'BEGIN{ while( getline a < "file") {sub(/[^:]*$/,"",a); print a, $1, $3}}'
Srednia ocen Wojciech Zieba:  
Srednia ocen Jakub Pelc:  
Srednia ocen Jan Resiak:  
bolek@bolek-desktop:~/Pulpit$ 
```

此命令打印所有字段：

```
$ awk 'BEGIN{ while( getline $0 < "file") {sub($NF,"",$0); print $0, $1, $3}}'
Srednia ocen Wojciech Zieba:  Srednia Wojciech
Srednia ocen Jakub Pelc:  Srednia Jakub
Srednia ocen Jan Resiak:  Srednia Jan
bolek@bolek-desktop:~/Pulpit$ 
```

如何改进第一个命令？我想首先命令还共享字段上的行。

**编辑-1：**

我想改进命令：

```
awk 'BEGIN{ while( getline a < "file") {sub(/[^:]*$/,"",a); print a, $1, $3}}' 
```

我想打印结果：

```
Srednia ocen Wojciech Zieba:  Srednia Wojciech
Srednia ocen Jakub Pelc:  Srednia Jakub
Srednia ocen Jan Resiak:  Srednia Jan 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:43:32.467

因为它是您`a`依次将变量设置为每一行，但如果您省略`a` `$0`将被设置并执行自动拆分，这将允许您执行此操作：

```
awk 'BEGIN{ while( getline < "file") { $NF = ""; print $0, $1, $3 } }' 
```

输出：

```
Srednia ocen Wojciech Zieba:  Srednia Wojciech
Srednia ocen Jakub Pelc:  Srednia Jakub
Srednia ocen Jan Resiak:  Srednia Jan 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:40:17.490

一个 awk 方式：

```
awk -F':' '$0=$1 ":"' file 
```

**测试**

```
kent$  echo "Srednia ocen Wojciech Zieba: 3.83
Srednia ocen Jakub Pelc: 3.76
Srednia ocen Jan Resiak: 3.90"|awk -F':' '$0=$1 ":"'
Srednia ocen Wojciech Zieba:
Srednia ocen Jakub Pelc:
Srednia ocen Jan Resiak: 
```

**更新**

我不知道你真正想做什么，但你的 while{} 范围有问题。也许你想要这个？

```
kent$  awk 'BEGIN{ while( getline $0 < "file") {sub($NF,"",$0); print $0}}' 
Srednia ocen Wojciech Zieba: 
Srednia ocen Jakub Pelc: 
Srednia ocen Jan Resiak: 
```

如果你想引入你自己的变量，比如说a，它不知道$NF。根据您的示例，您可以执行以下操作：

```
kent$  awk 'BEGIN{ while( getline a < "file") {sub(/[^:]*$/,"",a); print a}}' 
Srednia ocen Wojciech Zieba:
Srednia ocen Jakub Pelc:
Srednia ocen Jan Resiak: 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T13:28:06.267

不需要 awk，使用 cut 和 sed：

```
$ cat in.txt 
Srednia ocen Wojciech Zieba: 3.83
Srednia ocen Jakub Pelc: 3.76
Srednia ocen Jan Resiak: 3.90
$ cut -d: -f1 in.txt | sed 's/$/:/'
Srednia ocen Wojciech Zieba:
Srednia ocen Jakub Pelc:
Srednia ocen Jan Resiak: 
```

# apache-flex - Flex 项目中的 AIR Stage3D

> ID：12622469
> 
> 赞同：1
> 
> 时间：2012-09-27T13:24:52.257
> 
> 标签：apache-flex, actionscript, air, stage3d

我有一个 Flex 4.5 AIR 项目，我想创建一个使用 stage3D 的组件。我可以设法让三角形示例在 Flash 播放器的 Actionscript 项目中工作，但我也无法让它与干净的 Flex 项目一起工作。它进入渲染循环，但不可见：

主要的mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark"  creationComplete="application1_initializeHandler(event)"
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
<fx:Script>
    <![CDATA[
        import mx.events.FlexEvent;

        protected function application1_initializeHandler(event:FlexEvent):void
        {
            addEventListener(Event.ADDED_TO_STAGE, init)

        }

        protected function init(e:Event=null):void {
            addElement(new triangle1(stage))
        }

    ]]>
</fx:Script> 
```

triangle.as: 包 { 导入 com.adobe.utils.AGALMiniAssembler;

```
import flash.display.Sprite;
import flash.display.Stage;
import flash.display3D.Context3D;
import flash.display3D.Context3DProgramType;
import flash.display3D.Context3DVertexBufferFormat;
import flash.display3D.IndexBuffer3D;
import flash.display3D.Program3D;
import flash.display3D.VertexBuffer3D;
import flash.events.Event;
import flash.geom.Matrix3D;
import flash.geom.Rectangle;
import flash.geom.Vector3D;
import flash.utils.getTimer;

import mx.core.UIComponent;

public class triangle1 extends UIComponent
{
    protected var context3D:Context3D;
    protected var program:Program3D;
    protected var vertexbuffer:VertexBuffer3D;
    protected var indexbuffer:IndexBuffer3D;

    public function triangle1(stage:Stage)
    {           
        super();
        stage.stage3Ds[0].addEventListener( Event.CONTEXT3D_CREATE, initMolehill );
        stage.stage3Ds[0].requestContext3D();

        addEventListener(Event.ENTER_FRAME, onRender);

    }

    protected function initMolehill(e:Event):void
    {
        context3D = stage.stage3Ds[0].context3D;            
        context3D.configureBackBuffer(800, 600, 1, true);

        var vertices:Vector.<Number> = Vector.<Number>([
            -0.3,-0.3,0, 1, 0, 0, // x, y, z, r, g, b
            -0.3, 0.3, 0, 0, 1, 0,
            0.3, 0.3, 0, 0, 0, 1]);

        // Create VertexBuffer3D. 3 vertices, of 6 Numbers each
        vertexbuffer = context3D.createVertexBuffer(3, 6);
        // Upload VertexBuffer3D to GPU. Offset 0, 3 vertices
        vertexbuffer.uploadFromVector(vertices, 0, 3);              

        var indices:Vector.<uint> = Vector.<uint>([0, 1, 2]);

        // Create IndexBuffer3D. Total of 3 indices. 1 triangle of 3 vertices
        indexbuffer = context3D.createIndexBuffer(3);           
        // Upload IndexBuffer3D to GPU. Offset 0, count 3
        indexbuffer.uploadFromVector (indices, 0, 3);           

        var vertexShaderAssembler : AGALMiniAssembler = new AGALMiniAssembler();
        vertexShaderAssembler.assemble( Context3DProgramType.VERTEX,
            "m44 op, va0, vc0\n" + // pos to clipspace
            "mov v0, va1" // copy color
        );          

        var fragmentShaderAssembler : AGALMiniAssembler= new AGALMiniAssembler();
        fragmentShaderAssembler.assemble( Context3DProgramType.FRAGMENT,

            "mov oc, v0"
        );

        program = context3D.createProgram();
        program.upload( vertexShaderAssembler.agalcode, fragmentShaderAssembler.agalcode);
    }   

    protected function onRender(e:Event):void
    {
        if ( !context3D ) 
            return;

        context3D.clear ( 1, 1, 1, 1 );

        // vertex position to attribute register 0
        context3D.setVertexBufferAt (0, vertexbuffer, 0, Context3DVertexBufferFormat.FLOAT_3);
        // color to attribute register 1
        context3D.setVertexBufferAt(1, vertexbuffer, 3, Context3DVertexBufferFormat.FLOAT_3);
        // assign shader program
        context3D.setProgram(program);

        var m:Matrix3D = new Matrix3D();
        m.appendRotation(getTimer()/40, Vector3D.Z_AXIS);
        context3D.setProgramConstantsFromMatrix(Context3DProgramType.VERTEX, 0, m, true);

        context3D.drawTriangles(indexbuffer);

        context3D.present();            
    }
}
} 
```

有任何想法吗？没有错误，它跟踪 onRender，所以它只是不可见..：S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:39:35.650

```
 <s:Application ....  backgroundAlpha="0" 
```

解决它 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-04T07:32:45.693

mx:Container 中 Stage3D 的好主意，我不需要担心 mx:Application with backgroundAlpha 0 .. 可能吗？谢谢你。

我将 PaperVision 3D 改进为 Stage3D……因为它比 Away3D 快得多……

# model-view-controller - 机器人腿-计时器是服务还是模型？

> ID：12622477
> 
> 赞同：0
> 
> 时间：2012-09-27T13:25:15.513
> 
> 标签：model-view-controller, service, model, timer, robotlegs

在[robotlegs](http://www.robotlegs.org/)中，Timer 可以在模型中，或者应该封装在服务中。

示例：假设我正在机器人腿中实现数字时钟。更新时钟的 Timer 应该是 ClockModel 的一部分，还是应该在 TimerService 中创建一个更新 ClockModel 的命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:22:22.223

查看[机器人腿最佳实践指南。](https://github.com/robotlegs/robotlegs-framework/wiki/Best-Practices)

我会总结一下，但所有信息都在那里。

*   [模型](https://github.com/robotlegs/robotlegs-framework/wiki/Best-Practices#wiki-models)：用于存储内部应用程序状态
*   [服务](https://github.com/robotlegs/robotlegs-framework/wiki/Best-Practices#wiki-services)：用于存储来自外部源的状态（db、rest service、..）

[上面的区别在robotlegs类图](http://www.robotlegs.org/diagram/)中也很清楚

因此，为了回答您的问题，计时器可以在服务或模型中使用，具体取决于您使用它的上下文。

他们的最佳实践指南真的是一流的，他们还有一个很棒的[支持论坛](http://knowledge.robotlegs.org/)，里面有很多问答

我真的可以推荐你通读[这本书](http://shop.oreilly.com/product/0636920021216.do)

干杯

# php - 防止重复随机代码生成？

> ID：12622479
> 
> 赞同：2
> 
> 时间：2012-09-27T13:25:25.037
> 
> 标签：php, recursion

我需要防止生成的代码产生重复。这是正确的方法还是有更有效的方法？

```
function generate_code ()
{       
    $s = get_random_code();

    // check if code is already in db
    if (is_in_db($s))
        return generate_code();
    else
        return $s;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:33:14.593

无需检查数据库，

```
<?php

    uniqid (rand(), true); 

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:29:10.603

您可以使用 while 循环，以避免可能的递归深度限制：

```
function generate_code ()
{       
    $s = get_random_code();

    // check if code is already in db
    while (is_in_db($s))
        $s = get_random_code();

    return $s;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T13:29:15.123

如果在生成代码后，又生成了另一个重复的代码怎么办？

```
function generate_code () 
{        
    $s = get_random_code(); 

    // check if code is already in db 
    while (is_in_db($s)) { 
      $s = get_random_code(); 
    } 

    return $s; 
} 
```

无需进行递归。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T13:31:59.337

是的，有。如果需要，连接您的主键，添加一些唯一的列。并对其进行哈希处理。我不完全确定，但从 2 个不同的值获得相同哈希的风险非常低。有人说，你更有可能赢得乐透，同时被小行星摧毁并被闪电击中。

# xpages - 主题不适用于按钮

> ID：12622480
> 
> 赞同：3
> 
> 时间：2012-09-27T13:25:27.737
> 
> 标签：xpages

我开始玩主题。我能够创建 CSS 并将 CSS 与各种表格元素相关联。工作正常。

现在我试图用一个按钮做同样的事情。但这似乎不起作用。如果我将样式类应用于按钮，那么它就可以工作。

```
<theme extends="oneuiv2.1"> 

<resource>
    <content-type>text/css</content-type>
    <href>app.css</href>
</resource>

<resource>
    <content-type>text/css</content-type>
    <href>viewpicklistCC.css</href>
</resource>

<control>
    <name>Button</name>
    <property>
        <name>styleClass</name>
        <value>MyButton</value>
    </property>
</control>

<control>
    <name>HtmlTable</name>
    <property>
        <name>styleClass</name>
        <value>PNCTable</value>
    </property>
</control>

<control>
    <name>HtmlTd</name>
    <property>
        <name>styleClass</name>
        <value>PNCTableCell</value>
    </property>
</control>

</theme>

.MyButton {
width:179.0px;
font-family:Arial,sans-serif;
font-size:18pt;
color:rgb(255,128,0);
font-weight:bold
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T14:30:52.587

在主题中，您需要使用控件的主题 ID 来定位它。这与 CSS 样式类不同。

您可以在控件上手动设置主题 id（在样式 - 主题中，或在所有属性 - 样式 - 主题 id 中），然后通过引用此主题 id 来定位控件。

或者，您可以使用控件的默认主题 ID。XPageswiki 包含核心控件的默认主题 ID 列表：http: [//xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/Work_with_themes#themeID+values+for+core+controls](http://xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/Work_with_themes#themeID+values+for+core+controls)

因此，在您的情况下，您需要使用以下主题 ID 之一来定位您的按钮：

```
Button: Button.Command
Button with type=submit: Button.Submit
Button with type=cancel: Button.Cancel 
```

# python - 用于 nethack/pong 游戏混合的 Python 交互式输入

> ID：12622481
> 
> 赞同：1
> 
> 时间：2012-09-27T13:25:30.707
> 
> 标签：python, shell, input, console, game-loop

基本上，我正在尝试构建一个在 shell 中玩的乒乓球游戏。到目前为止，阻止我的是用户输入。代码必须响应按键，而无需在之后按 Return。我曾尝试使用 msvcrt，但它没有产生我需要的结果。是否可以在无需编码和事件监听器的情况下完成？这是代码：

```
import os
import msvcrt

#fixed parameters here
resolution_x=16
resolution_y=8
line_position = 4
char_position = 4

def line_draw(char_position, line_length):
    #draws a line with # in it marking the ball
    line = ""
    if char_position == 0:
        for i in range(line_length):
            line+="_"
        print(line)
    if char_position:
        for i in range(char_position-1):
            line+="_"
        line+="#"
        for j in range(line_length-char_position):
            line+="_"
        print(line)

def scr_draw(num_lines, line_position, char_position, line_length):
    # draws the court with the ball
    # line by line with line_draw()
    for i in range(line_position):
        line_draw(0,line_length)
    line_draw(char_position, line_length)
    for i in range(num_lines-line_position):
        line_draw(0, line_length)

def draw_paddle(line_length, paddle_position):
    # this is the paddle positioning
    padline=""
    for i in range(paddle_position-3):
        paddline+="-"
    paddline+="==="
    for i in range(line_length-paddle_position):
        paddline+="-"
    print(paddline)

while 1:
    #this loop draws everything, then erases it
    #so it can draw it again with updates
    scr_draw(resolution_y, line_position, char_position, resolution_x) # draw
    os.system("CLS") # clears the screen in a really stupid way , to be changed 
```

# javascript - 谷歌地图上的 D3 图（带链接）

> ID：12622484
> 
> 赞同：5
> 
> 时间：2012-09-27T13:25:32.860
> 
> 标签：javascript, google-maps, d3.js

我正在尝试通过添加节点之间的链接（[相关](https://stackoverflow.com/questions/12500189/extend-google-maps-d3-example-to-add-a-path-or-line)）来修改[此示例。](http://bl.ocks.org/899711)

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js?1.29.1"></script>
    <style type="text/css">

html, body, #map {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
}

.stations, .stations svg {
  position: absolute;
}

.stations link {
  position: absolute;
 stroke: black;
 stroke-width: 2px;
}

.stations svg {
  width: 60px;
  height: 20px;
  padding-right: 100px;
  font: 10px sans-serif;
}

.stations circle {
  fill: brown;
  stroke: black;
  stroke-width: 1.5px;
}

    </style>
  </head>
  <body>
    <div id="map"></div>
    <script type="text/javascript">

// Create the Google Map…
var map = new google.maps.Map(d3.select("#map").node(), {
  zoom: 7,
  center: new google.maps.LatLng(44.331216, 23.927536),
  mapTypeId: google.maps.MapTypeId.TERRAIN
});

// Load the station data. When the data comes back, create an overlay.
d3.json("test-graph.json", function(json) {
  var overlay = new google.maps.OverlayView();

  // Add the container when the overlay is added to the map.
  overlay.onAdd = function() {
    var layer = d3.select(this.getPanes().overlayLayer).append("div")
        .attr("class", "stations");

    // Draw each marker as a separate SVG element.
    // We could use a single SVG, but what size would it have?
    overlay.draw = function() {
      var projection = this.getProjection(),
          padding = 10;

      var markerLink = layer.selectAll("link")
      .data(json.links)
      .each(pathTransform) // update existing markers
    .enter().append("line")
      .each(pathTransform)
      .attr("class", "link");

      var marker = layer.selectAll("svg")
          .data(json.nodes)
          .each(transform) // update existing markers
        .enter().append("svg:svg")
          .each(transform)
          .attr("class", "marker");

      // Add a circle.
      marker.append("svg:circle")
          .attr("r", 5)
          .attr("cx", padding)
          .attr("cy", padding);

      // Add a label.
      marker.append("svg:text")
          .attr("x", padding + 7)
          .attr("y", padding)
          .attr("dy", ".37em")
          .text(function(d) { return d.id; });

      function pathTransform(d) {

        dsrc = new google.maps.LatLng(d.source.lat, d.source.lng);
        dtrg = new google.maps.LatLng(d.target.lat, d.target.lng);
        dsrc = projection.fromLatLngToDivPixel(dsrc);
        dtrg = projection.fromLatLngToDivPixel(dtrg);
        return d3.select(this)
            .attr("x1", dsrc.x - padding)
            .attr("y1", dsrc.y - padding)
            .attr("x2", dtrg.x - padding)
            .attr("y2", dtrg.y - padding);

        }

      function transform(d) {

        d = new google.maps.LatLng(d.lat, d.lng);
        d = projection.fromLatLngToDivPixel(d);

        return d3.select(this)
            .style("left", (d.x - padding) + "px")
            .style("top", (d.y - padding) + "px");
      }
    };
  };

  // Bind our overlay to the map…
  overlay.setMap(map);
});

    </script>
  </body>
</html> 
```

和 JSON 文件：

```
 {"directed": true, "graph": [], "nodes": [
{"lat": 44.391643516091975, "lng": 23.159677682342053, "id": "1:a"}, 
{"lat": 44.315988, "lng": 23.818359, "id": "a:a::"}, 
{"lat": 44.29844994776969, "lng": 24.402314492323608, "id": "b:b"}, 
{"lat": 44.351118152120485, "lng": 23.341791630955303, "id": "a:c"}, 
{"lat": 44.889424527442685, "lng": 23.960970697645276, "id": "e:d"}, 
{"lat": 43.46084400349923, "lng": 23.975774627524885, "id": "d:6104:1"}, 
{"lat": 44.64680010013528, "lng": 23.20292820976948, "id": "c:6104:2"}, 
{"lat": 44.40446080879215, "lng": 23.953536570796015, "id": "b:6104:3"}, 
{"lat": 44.18593375168617, "lng": 23.769879901486856, "id": "af:6104:4"}, 
{"lat": 44.09051846584001, "lng": 24.14130778735744, "id": "aaaa3bab:3d:7305"}, 
{"lat": 44.66376251969314, "lng": 23.77379490100736, "id": "aaaa3bab:3d:5507"}, 
{"lat": 44.6240449587762, "lng": 24.08347249542858, "id": "aaaa3bab:3d:6f06"}, 
{"lat": 45.00138334367271, "lng": 24.092331272179138, "id": "aaaa3bab:3d:1306"}, 
{"lat": 44.55033831045195, "lng": 24.312914121854526, "id": "aaaa3bab:3c:ef05"}, 
{"lat": 44.74421652327631, "lng": 24.728457702115804, "id": "aaaa3bab:3c:ea03"}, 
{"lat": 43.79401723931746, "lng": 23.77846416630604, "id": "aaaa3bab:3d:7200"}, 
{"lat": 43.67351687345779, "lng": 23.00140978137842, "id": "aaaa3bab:3d:5d07"}, 
{"lat": 43.87692500855015, "lng": 24.28543591328852, "id": "aaaa3bab:3d:550b"}, 
{"lat": 44.28189405244278, "lng": 23.972410391551893, "id": "aaaa3bab:3d:2706"}, 
{"lat": 43.94916218711252, "lng": 23.9733463072956, "id": "aaaa3bab:3d:2704"}, 
{"lat": 44.61479884874806, "lng": 24.27581898293906, "id": "aaaa3bab:3d:2608"}, 
{"lat": 44.92223011339065, "lng": 23.505887513934034, "id": "aaaa3bab:3d:6502"}, 
{"lat": 44.20117807597118, "lng": 23.70555450810448, "id": "aaaa3bab:3d:2603"}, 
{"lat": 43.547714841247966, "lng": 24.56985383484244, "id": "aaaa3bab:3d:2601"}, 
{"lat": 43.92116991202797, "lng": 22.82805535024416, "id": "aaaa3bab:3d:5803"}, 
{"lat": 44.56587414638437, "lng": 22.970799697228976, "id": "aaaa3bab:3d:7406"}, 
{"lat": 44.10230727065641, "lng": 23.701204095342597, "id": "aaaa3bab:3d:7407"}, 
{"lat": 45.25416535851712, "lng": 24.434312172789625, "id": "aaaa3bab:3d:7404"}, 
{"lat": 44.91647619491961, "lng": 23.678252259828515, "id": "aaaa3bab:3d:7405"}, 
{"lat": 45.03473433359779, "lng": 24.07596179597473, "id": "aaaa3bab:3d:7402"}, 
{"lat": 45.16855171992733, "lng": 23.435986773864467, "id": "aaaa3bab:3d:7403"}, 
{"lat": 44.553669079256146, "lng": 23.05123326220677, "id": "aaaa3bab:3d:7400"}, 
{"lat": 43.32871087231798, "lng": 23.325707869122013, "id": "aaaa3bab:3d:5308"}, 
{"lat": 43.40444516345915, "lng": 23.485798521785892, "id": "aaaa3bab:3c:f107"}, 
{"lat": 43.9435337313432, "lng": 22.968285824722354, "id": "aaaa3bab:3d:7401"}, 
{"lat": 44.74549949495889, "lng": 22.832034225254052, "id": "aaaa3bab:3d:7408"}, 
{"lat": 44.34901730307382, "lng": 24.33506529636527, "id": "aaaa3bab:3d:7409"}, 
{"lat": 43.53125851464172, "lng": 24.763229039168245, "id": "aaaa3bab:3d:6602"}, 
{"lat": 44.155575603194634, "lng": 23.250881840942217, "id": "aaaa3bab:3c:e300"}], 
"links": [
{"source": 1, "target": 25}, 
{"source": 1, "target": 26}, 
{"source": 1, "target": 27}, 
{"source": 1, "target": 28}, 
{"source": 1, "target": 29}, 
{"source": 1, "target": 30}, 
{"source": 1, "target": 31}, 
{"source": 1, "target": 34}, 
{"source": 1, "target": 35}, 
{"source": 1, "target": 36}, 
{"source": 3, "target": 5}, 
{"source": 3, "target": 6}, 
{"source": 4, "target": 15}, 
{"source": 4, "target": 9}, 
{"source": 5, "target": 19}, 
{"source": 5, "target": 23}, 
{"source": 6, "target": 18}, 
{"source": 6, "target": 20}, 
{"source": 7, "target": 22}, 
{"source": 8, "target": 37}, 
{"source": 8, "target": 3}, 
{"source": 10, "target": 11}, 
{"source": 17, "target": 21}, {"source": 18, "target": 13}, {"source": 18, "target": 14}, {"source": 19, "target": 33}, {"source": 19, "target": 38}, {"source": 23, "target": 2}, {"source": 25, "target": 10}, {"source": 28, "target": 4}, {"source": 28, "target": 17}, {"source": 29, "target": 32}, {"source": 32, "target": 25}, {"source": 34, "target": 24}, {"source": 35, "target": 8}, {"source": 35, "target": 16}, {"source": 37, "target": 7}, {"source": 37, "target": 12}], "multigraph": false} 
```

编辑：现在我可以通过数组访问坐标。我仍然有一个问题：显示链接（SVG）。

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js?1.29.1"></script>
    <style type="text/css">

html, body, #map {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
}

.stations, .stations svg {
  position: absolute;
}

.stations line {
  position: absolute;
 stroke: black;
 stroke-width: 2px;
}

.stations svg {
  width: 60px;
  height: 20px;
  padding-right: 100px;
  font: 10px sans-serif;
}

.stations circle {
  fill: brown;
  stroke: black;
  stroke-width: 1.5px;
}

    </style>
  </head>
  <body>
    <div id="map"></div>
    <script type="text/javascript">

// Create the Google Map…
var map = new google.maps.Map(d3.select("#map").node(), {
  zoom: 7,
  center: new google.maps.LatLng(44.331216, 23.927536),
  mapTypeId: google.maps.MapTypeId.TERRAIN
});

// Load the station data. When the data comes back, create an overlay.
d3.json("test-graph.json", function(json) {
  var overlay = new google.maps.OverlayView();

  // Add the container when the overlay is added to the map.
  overlay.onAdd = function() {
    var layer = d3.select(this.getPanes().overlayLayer).append("div")
        .attr("class", "stations");

    // Draw each marker as a separate SVG element.
    // We could use a single SVG, but what size would it have?
    overlay.draw = function() {
      var projection = this.getProjection(),
          padding = 10;

        var node_coord = {};

      var marker = layer.selectAll("svg")
          .data(json.nodes)
          .each(transform) // update existing markers
        .enter().append("svg:svg")
          .each(transform)
          .attr("class", "marker");
     marker.append("svg:circle")
          .attr("r", 5)
          .attr("cx", padding)
          .attr("cy", padding);

      // Add a label.
      marker.append("svg:text")
          .attr("x", padding + 7)
          .attr("y", padding)
          .attr("dy", ".37em")
          .text(function(d) { return d.id; });

    var markerLink = layer.selectAll("link")
      .data(json.links)
      .each(pathTransform) // update existing markers
    .enter().append("svg:svg")
      .each(pathTransform)
      .attr("class", "line")
     .append("svg:line")
     .style("stroke-width", 5);   

      // Add a circle.

  function pathTransform(d) {
        console.log(node_coord[d.source-1 + "," + 1]);
        dsrc = new google.maps.LatLng(node_coord[d.source-1 + "," + 1], node_coord[d.source-1 + "," + 0]);
        dtrg = new google.maps.LatLng(node_coord[d.target-1 + "," + 1], node_coord[d.target-1 + "," + 0]);
        console.log(dsrc);
        console.log(dtrg);
        console.log("source" + d.source);
        console.log("target" + d.target);
        dsrc = projection.fromLatLngToDivPixel(dsrc);
        dtrg = projection.fromLatLngToDivPixel(dtrg);
        console.log(dsrc);
        console.log(dtrg);

        return d3.select(this)
            .attr("x1", dsrc.x - padding)
            .attr("y1", dsrc.y - padding)
            .attr("x2", dtrg.x - padding)
            .attr("y2", dtrg.y - padding);

        }

      function transform(d,i) {
            node_coord[i + "," + 0] = d.lng;
            node_coord[i + "," + 1] = d.lat;

        d = new google.maps.LatLng(d.lat, d.lng);
        d = projection.fromLatLngToDivPixel(d);

        return d3.select(this)
            .style("left", (d.x - padding) + "px")
            .style("top", (d.y - padding) + "px");
      }
    };
  };

  // Bind our overlay to the map…
  overlay.setMap(map);
});

    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:49:32.170

终于搞定了。

我必须包含 jQuery 以在重绘时删除旧的 svg:line 元素。

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js?1.29.1"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.1.min.js"></script> 
```

添加了一个 .links 类：

```
<style type="text/css">
html, body, #map {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
}

.stations, .stations svg {
  position: absolute;
}

.links {
  //width: 100%;
  //height: 100%;

 position: absolute;
}

.stations svg {
  width: 60px;
  height: 20px;
  padding-right: 100px;
  font: 10px sans-serif;
}

.stations circle {
  fill: brown;
  stroke: black;
  stroke-width: 1.5px;
}

    </style> 
</head> 
```

创建 Google 地图……</p>

```
 <body>
    <div id="map"></div>
    <script type="text/javascript">

var map = new google.maps.Map(d3.select("#map").node(), {
  zoom: 7,
  center: new google.maps.LatLng(44.331216, 23.927536),
  mapTypeId: google.maps.MapTypeId.TERRAIN
});

// Load the station data. When the data comes back, create an overlay.
d3.json("test-graph.json", function(json) {
  var overlay = new google.maps.OverlayView();

  // Add the container when the overlay is added to the map.
  overlay.onAdd = function() {

    var layer = d3.select(this.getPanes().overlayLayer)
        .append("div")
        .attr("height", "100%")
        .attr("width", "100%")
        .attr("class", "stations"); 
```

将每个标记绘制为单独的 SVG 元素。我们可以使用单个 SVG，但它的大小是多少？

```
overlay.draw = function() {
  var radius = 5;
  var projection = this.getProjection(),
      padding = 10;

  var node_coord = {};

      var marker = layer.selectAll("svg")
      .data(json.nodes)
      .each(transform) // update existing markers
    .enter().append("svg:svg")
      .each(transform)
      .attr("class", "marker");
 marker.append("svg:circle")
      .attr("r", radius)
      .attr("cx", padding)
      .attr("cy", padding);

  // Add a label.
  marker.append("svg:text")
      .attr("x", padding + 7)
      .attr("y", padding)
      .attr("dy", ".37em")
      .text(function(d) { return d.id; });

var markerLink = layer.selectAll(".links")
  .data(json.links)
  .each(pathTransform) // update existing markers       
.enter().append("svg:svg")
 .attr("class", "links")
  .each(pathTransform); 
```

链接变换功能（感谢[他的](https://stackoverflow.com/questions/12500189/extend-google-maps-d3-example-to-add-a-path-or-line)问题）。

```
 function pathTransform(d) {
        var t, b, l, r, w, h, currentSvg;
        $(this).empty(); // get rid of the old lines (cannot use d3 .remove() because i cannot use selectors after ... )

        dsrc = new google.maps.LatLng(node_coord[d.source-1 + "," + 1], node_coord[d.source-1 + "," + 0]);
        dtrg = new google.maps.LatLng(node_coord[d.target-1 + "," + 1], node_coord[d.target-1 + "," + 0]);
        d1 = projection.fromLatLngToDivPixel(dsrc);
        d2 = projection.fromLatLngToDivPixel(dtrg);
        if ( d1.y < d2.y ) {
            t = d1.y;
            b = d2.y;
        } else {
            t = d2.y;
            b = d1.y;
        }
        if ( d1.x < d2.x ) {
            l = d1.x;
            r = d2.x;
        } else {
            l = d2.x;
            r = d1.x; 
        }
        currentSvg = d3.select(this)

            .style("left", (l + radius) + "px")
            .style("top", (t + radius) + "px")
            .style("width", (r - l - radius) + "px")
            .style("height", (b - t - radius) + "px");
    // drawing the diagonal lines inside the svg elements. We could use 2 cases instead of for but maybe you will need to orient your graph (so you can use some arrows)
    if (( d1.y < d2.y) && ( d1.x < d2.x)) {
        currentSvg.append("svg:line")
            .style("stroke-width", 1)
            .style("stroke", "black")
            .attr("y1", 0)
            .attr("x1", 0)
            .attr("x2", r-l)
            .attr("y2", b-t);
        } else if ((d1.x > d2.x) && (d1.y > d2.y)){
        currentSvg.append("svg:line")
            .style("stroke-width", 1)
            .style("stroke", "black")
            .attr("y1", 0)
            .attr("x1", 0)
            .attr("x2", r-l)
            .attr("y2", b-t);
        } else if (( d1.y < d2.y) && ( d1.x > d2.x)){
            currentSvg.append("svg:line")
                .style("stroke-width", 1)
                .style("stroke", "black")
                .attr("y1", 0)
                .attr("x2", 0)
                .attr("x1", r-l)
                .attr("y2", b-t);
            } else if ((d1.x < d2.x) && (d1.y > d2.y)){
            currentSvg.append("svg:line")
                .style("stroke-width", 1)
                .style("stroke", "black")
                .attr("y1", 0)
                .attr("x2", 0)
                .attr("x1", r-l)
                .attr("y2", b-t);
            } else {
            console.log("something is wrong!!!");
            }

        return currentSvg;
  } 
```

在转换函数中添加了一个数组以获取节点坐标。

```
 function transform(d,i) {
      console.log(i);
            node_coord[i + "," + 0] = d.lng;
            node_coord[i + "," + 1] = d.lat;

        d = new google.maps.LatLng(d.lat, d.lng);
        d = projection.fromLatLngToDivPixel(d);

        return d3.select(this)
            .style("left", (d.x - padding) + "px")
            .style("top", (d.y - padding) + "px");
      }
layer.append("div")
     .attr("class", "stations.line");

    };

  };

  // Bind our overlay to the map…
  overlay.setMap(map);
});

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-18T01:12:12.207

我试过你的答案，但它并没有真正奏效。经过几个小时的汗水，我设法“正确”地做到了（至少对我而言）。感谢您的代码，没有它，我仍然会尝试。

我把它上传到[http://jsfiddle.net/nom7eLha/](http://jsfiddle.net/nom7eLha/)。我对 d3 了解不多（对我来说这看起来很神奇，tbh），所以期待新手错误。

加载的 json 遵循与 OP 相同的格式。

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<script src="./blockly/blockly_compressed.js"></script>
<script src="./blockly/blocks_compressed.js"></script>
<script src="./blockly/blocks/MathMorpho.js"></script>
<script src="./blockly/python_compressed.js"></script>
<script src="./blockly/generators/python/MathMorpho.js"></script>
<script src="./blockly/msg/js/en.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js">               </script>
<style type="text/css">
    html,
    body,
    #map {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
    }

    .stations,
    .stations svg {
        position: absolute;
        margin: 0 auto;
    }

    .links {
        position: absolute;
    }

    .stations svg {
        width: 20px;
        height: 20px;
        margin: 0 auto;
        z-index: 4;
    }

    .stations circle {
        fill: blue;
        stroke: none;
        stroke-width: 1px;
    }
</style>
</head>

<body>
<div id="map"></div>
<script type="text/javascript">
    var map = new google.maps.Map(d3.select("#map").node(), {
        zoom: 7,
        center: new google.maps.LatLng(-22.1629209, -47.9922608),
        mapTypeId: google.maps.MapTypeId.MAP
    });

    d3.json("test-graph.json", function(json) {
        var overlay = new google.maps.OverlayView();

        // Add the container when the overlay is added to the map.
        overlay.onAdd = function() {

            var layer = d3.select(this.getPanes().overlayLayer)
                .append("div")
                .attr("height", "100%")
                .attr("width", "100%")
                .attr("class", "stations");
            overlay.draw = function() {
                var radius = 5;
                var projection = this.getProjection(),
                    padding = 10;

                var node_coord = {};

                var marker = layer.selectAll("svg")
                    .data(json.nodes)
                    .each(transform) // update existing markers
                    .enter().append("svg:svg")
                    .each(transform)
                    .attr("class", "marker");
                marker.append("svg:circle")
                    .attr("r", radius)
                    .attr("cx", padding)
                    .attr("cy", padding);

                var markerLink = layer.selectAll(".links")
                    .data(json.links)
                    .each(pathTransform) // update existing markers       
                    .enter().append("svg:svg")
                    .attr("class", "links")
                    .each(pathTransform);

                function pathTransform(d) {
                    var t, b, l, r, w, h, currentSvg;
                    var d1=new Object();
                    var d2=new Object();
                    $(this).empty();
         d1.x=node_coord[d.source + "," + 0]
         d1.y=node_coord[d.source + "," + 1]
         d2.x=node_coord[d.target + "," + 0]
         d2.y=node_coord[d.target + "," + 1]

                    if (d1.y < d2.y) {
                        t = d1.y;
                        b = d2.y;
                    } else {
                        t = d2.y;
                        b = d1.y;
                    }
                    if (d1.x < d2.x) {
                        l = d1.x;
                        r = d2.x;
                    } else {
                        l = d2.x;
                        r = d1.x;
                    }
                    currentSvg = d3.select(this)
            .style("z-index","1")
            .style("left", (l + 2*radius) + "px")
                        .style("top", (t + 2*radius) + "px")
                        .style("width", (r - l + 2*radius) + "px")
                        .style("height", (b - t + 2*radius) + "px");

                    var x1=0,y1=0,x2=0,y2=0;
                    if ((d1.y < d2.y) && (d1.x < d2.x)) {
          x2=r-l;
          y2=b-t;
                   } else if ((d1.x > d2.x) && (d1.y > d2.y)) {
          x2=r-l;
          y2=b-t;
                    } else if ((d1.y < d2.y) && (d1.x > d2.x)) {
          x1=r-l;
          y2=b-t;
                    } else if ((d1.x < d2.x) && (d1.y > d2.y)) {
          x1=r-l;
          y2=b-t;
                    }
                    currentSvg.append("svg:line")
                            .style("stroke-width", 2)
                            .style("stroke", "black")
                            .attr("x1", x1)
                            .attr("y1", y1)
                            .attr("x2", x2)
                            .attr("y2", y2);

                    return currentSvg;
                }

                function transform(d, i) {
                    d = new google.maps.LatLng(d.lat, d.lng);
                    d = projection.fromLatLngToDivPixel(d);

                    node_coord[i + "," + 0] = d.x;
                    node_coord[i + "," + 1] = d.y;

                    return d3.select(this)
                        .style("left", (d.x) + "px")
                        .style("top", (d.y) + "px");
                }
                layer.append("div")
                    .attr("class", "stations.line");

            };

        };

        // Bind our overlay to the map…
        overlay.setMap(map);
    });
</script> 
```

# ruby-on-rails - Rails AJAX 500 错误

> ID：12622490
> 
> 赞同：0
> 
> 时间：2012-09-27T13:25:49.510
> 
> 标签：ruby-on-rails, ajax

我正在完成一个关于 Rails 的教程——但是该教程是用 Rails 2 编写的，并且因为我有 Rails 3，所以我必须将所有内容都转换过来。

我有一个谷歌地图，当你点击它时，你应该会出现一个带有新标记的弹出窗口和一个用于输入数据的表单。当我单击地图时，会出现标记，但没有输入数据的表格。任何帮助将非常感激！

我猜它与ajax有关？当我单击地图上的任意位置尝试输入新数据时，Web 控制台显示 500 内部服务器错误。不知道我哪里错了！

这是“新”操作的控制器代码：

```
def new
  @incident = Incident.new

  respond_to do |format|
    format.html {
      @incident.latitude=params['latitude']
      @incident.longitude=params['longitude']
      render :partial=>'new', :locals=>{:incident=>@incident}
    }
    format.xml  { render :xml => @incident }
  end
end 
```

索引视图：

```
<h1>Listing incidents</h1>

<%= render(:partial=>"map", :locals=>{:data=>"/incidents.xml",
  :full_page=>true, :show_action=>'show', :new_action=>'new'}) %> 
```

和“新”部分：

```
<h1>New incident</h1>
<% form_for(incident, :update=>'map_info'), :remote => true do |f| %>
 <p>
    <%= f.label :mountain %> <%= f.text_field :mountain %>
 </p>
 <%= f.hidden_field :latitude %>
 <%= f.hidden_field :longitude %>
 <p>
   <%= f.label :when %> <%= f.datetime_select :when %>
 </p>
 <p>
   <%= f.label :title %> <%= f.text_field :title %>
 </p>
 <p>
   <%= f.label :description %><br/>
   <%= f.text_area :description, :rows=>3 %>
 </p>
 <p>
   <%= f.submit "Create" %>
 </p>
<% end %> 
```

这是堆栈跟踪（当我加载页面时，然后单击地图以获取新事件）：

```
Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2012-09-27 14:35:18
 +0100
Served asset /application.js - 304 Not Modified (173ms)
[2012-09-27 14:35:18] WARN  Could not determine content-length of response body.
 Set content-length of the response or set Response#chunked = true

Started GET "/assets/prototype.js?body=1" for 127.0.0.1 at 2012-09-27 14:35:18 +
0100
Served asset /prototype.js - 304 Not Modified (0ms)
[2012-09-27 14:35:18] WARN  Could not determine content-length of response body.
 Set content-length of the response or set Response#chunked = true

Started GET "/incidents.xml" for 127.0.0.1 at 2012-09-27 14:35:19 +0100
Processing by IncidentsController#index as XML
  ←[1m←[35mIncident Load (1.0ms)←[0m  SELECT "incidents".* FROM "incidents"
  Rendered text template (0.0ms)
Completed 200 OK in 945ms (Views: 184.0ms | ActiveRecord: 1.0ms)
[2012-09-27 14:35:20] WARN  Could not determine content-length of response body.
 Set content-length of the response or set Response#chunked = true

Started GET "/incidents/new?latitude=42.50990089326676&longitude=-99.4921875" fo
r 127.0.0.1 at 2012-09-27 14:35:43 +0100
Processing by IncidentsController#new as JS
  Parameters: {"latitude"=>"42.50990089326676", "longitude"=>"-99.4921875"}
ERROR: compiling _app_views_incidents__new_html_erb___613446974_25808988 RAISED
c:/Ruby193/incidents/app/views/incidents/_new.html.erb:2: syntax error, unexpect
ed ',', expecting keyword_end
'); form_for(incident, :update=>'map_info'), :remote => true do |f|
                                            ^
c:/Ruby193/incidents/app/views/incidents/_new.html.erb:23: syntax error, unexpec
ted keyword_ensure, expecting $end
Function body:           def _app_views_incidents__new_html_erb___613446974_2580
8988(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "incidents/_new";_
old_output_buffer = @output_buffer;incident = local_assigns[:incident];new = loc
al_assigns[:new];;@output_buffer = output_buffer || ActionView::OutputBuffer.new
;@output_buffer.safe_concat('<h1>New incident</h1>
'); form_for(incident, :update=>'map_info'), :remote => true do |f|
@output_buffer.safe_concat(' <p>
    ');@output_buffer.append= ( f.label :mountain );@output_buffer.safe_concat('
 ');@output_buffer.append= ( f.text_field :mountain );@output_buffer.safe_concat
('
');@output_buffer.safe_concat('  </p>
  ');@output_buffer.append= ( f.hidden_field :latitude );@output_buffer.safe_con
cat('
');@output_buffer.safe_concat('  ');@output_buffer.append= ( f.hidden_field :lon
gitude );@output_buffer.safe_concat('
');@output_buffer.safe_concat('  <p>
    ');@output_buffer.append= ( f.label :when );@output_buffer.safe_concat(' ');
@output_buffer.append= ( f.datetime_select :when );@output_buffer.safe_concat('
');@output_buffer.safe_concat('  </p>
  <p>
    ');@output_buffer.append= ( f.label :title );@output_buffer.safe_concat(' ')
;@output_buffer.append= ( f.text_field :title );@output_buffer.safe_concat('
');@output_buffer.safe_concat('  </p>
  <p>
    ');@output_buffer.append= ( f.label :description );@output_buffer.safe_conca
t('<br/>
    ');@output_buffer.append= ( f.text_area :description, :rows=>3 );@output_buf
fer.safe_concat('
');@output_buffer.safe_concat('  </p>
  <p>
    ');@output_buffer.append= ( f.submit "Create" );@output_buffer.safe_concat('

');@output_buffer.safe_concat('  </p>
'); end
@output_buffer.to_s
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffe
r
          end

Backtrace: C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_v
iew/template.rb:297:in `module_eval'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_view/templat
e.rb:297:in `compile'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_view/templat
e.rb:244:in `block in compile!'
<internal:prelude>:10:in `synchronize'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_view/templat
e.rb:232:in `compile!'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_view/templat
e.rb:144:in `block in render'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.4.rc1/lib/active_support/n
otifications.rb:125:in `instrument'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_view/templat
e.rb:143:in `render'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_view/rendere
r/partial_renderer.rb:265:in `render_partial'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_view/rendere
r/partial_renderer.rb:238:in `block in render'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_view/rendere
r/abstract_renderer.rb:38:in `block in instrument'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.4.rc1/lib/active_support/n
otifications.rb:123:in `block in instrument'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.4.rc1/lib/active_support/n
otifications/instrumenter.rb:20:in `instrument'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.4.rc1/lib/active_support/n
otifications.rb:123:in `instrument'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_view/rendere
r/abstract_renderer.rb:38:in `instrument'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_view/rendere
r/partial_renderer.rb:237:in `render'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_view/rendere
r/renderer.rb:41:in `render_partial'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_view/rendere
r/renderer.rb:15:in `render'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/abstract_controller
/rendering.rb:110:in `_render_template'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_controller/m
etal/streaming.rb:225:in `_render_template'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/abstract_controller
/rendering.rb:103:in `render_to_body'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_controller/m
etal/renderers.rb:28:in `render_to_body'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_controller/m
etal/compatibility.rb:50:in `render_to_body'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/abstract_controller
/rendering.rb:88:in `render'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_controller/m
etal/rendering.rb:16:in `render'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_controller/m
etal/instrumentation.rb:40:in `block (2 levels) in render'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.4.rc1/lib/active_support/c
ore_ext/benchmark.rb:5:in `block in ms'
C:/Ruby193/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.4.rc1/lib/active_support/c
ore_ext/benchmark.rb:5:in `ms'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_controller/m
etal/instrumentation.rb:40:in `block in render'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_controller/m
etal/instrumentation.rb:83:in `cleanup_view_runtime'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.4.rc1/lib/active_record/rai
lties/controller_runtime.rb:24:in `cleanup_view_runtime'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_controller/m
etal/instrumentation.rb:39:in `render'
c:/Ruby193/incidents/app/controllers/incidents_controller.rb:24:in `block (2 lev
els) in new'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_controller/m
etal/mime_responds.rb:196:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_controller/m
etal/mime_responds.rb:196:in `respond_to'
c:/Ruby193/incidents/app/controllers/incidents_controller.rb:20:in `new'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_controller/m
etal/implicit_render.rb:4:in `send_action'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/abstract_controller
/base.rb:167:in `process_action'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_controller/m
etal/rendering.rb:10:in `process_action'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/abstract_controller
/callbacks.rb:18:in `block in process_action'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.4.rc1/lib/active_support/c
allbacks.rb:414:in `_run__322942522__process_action__447782570__callbacks'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.4.rc1/lib/active_support/c
allbacks.rb:405:in `__run_callback'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.4.rc1/lib/active_support/c
allbacks.rb:385:in `_run_process_action_callbacks'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.4.rc1/lib/active_support/c
allbacks.rb:81:in `run_callbacks'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/abstract_controller
/callbacks.rb:17:in `process_action'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_controller/m
etal/rescue.rb:29:in `process_action'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_controller/m
etal/instrumentation.rb:30:in `block in process_action'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.4.rc1/lib/active_support/n
otifications.rb:123:in `block in instrument'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.4.rc1/lib/active_support/n
otifications/instrumenter.rb:20:in `instrument'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.4.rc1/lib/active_support/n
otifications.rb:123:in `instrument'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_controller/m
etal/instrumentation.rb:29:in `process_action'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_controller/m
etal/params_wrapper.rb:206:in `process_action'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.4.rc1/lib/active_record/rai
lties/controller_runtime.rb:18:in `process_action'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/abstract_controller
/base.rb:121:in `process'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/abstract_controller
/rendering.rb:45:in `process'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_controller/m
etal.rb:203:in `dispatch'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_controller/m
etal/rack_delegation.rb:14:in `dispatch'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_controller/m
etal.rb:246:in `block in action'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_dispatch/rou
ting/route_set.rb:73:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_dispatch/rou
ting/route_set.rb:73:in `dispatch'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_dispatch/rou
ting/route_set.rb:36:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `b
lock in call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `e
ach'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `c
all'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_dispatch/rou
ting/route_set.rb:600:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_dispatch/mid
dleware/best_standards_support.rb:17:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:25:in
`call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_dispatch/mid
dleware/head.rb:14:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_dispatch/mid
dleware/params_parser.rb:21:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_dispatch/mid
dleware/flash.rb:238:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:2
05:in `context'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:2
00:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_dispatch/mid
dleware/cookies.rb:338:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.4.rc1/lib/active_record/que
ry_cache.rb:64:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.4.rc1/lib/active_record/con
nection_adapters/abstract/connection_pool.rb:473:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_dispatch/mid
dleware/callbacks.rb:28:in `block in call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.4.rc1/lib/active_support/c
allbacks.rb:405:in `_run__711941801__call__927210605__callbacks'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.4.rc1/lib/active_support/c
allbacks.rb:405:in `__run_callback'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.4.rc1/lib/active_support/c
allbacks.rb:385:in `_run_call_callbacks'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.4.rc1/lib/active_support/c
allbacks.rb:81:in `run_callbacks'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_dispatch/mid
dleware/callbacks.rb:27:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_dispatch/mid
dleware/reloader.rb:65:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_dispatch/mid
dleware/remote_ip.rb:31:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_dispatch/mid
dleware/debug_exceptions.rb:16:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_dispatch/mid
dleware/show_exceptions.rb:56:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.4.rc1/lib/rails/rack/logger.rb:
26:in `call_app'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.4.rc1/lib/rails/rack/logger.rb:
16:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_dispatch/mid
dleware/request_id.rb:22:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in
`call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.4.rc1/lib/active_support/c
ache/strategy/local_cache.rb:72:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_dispatch/mid
dleware/static.rb:62:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.4.rc1/lib/rails/engine.rb:479:i
n `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.4.rc1/lib/rails/application.rb:
220:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/content_length.rb:14:in
`call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.4.rc1/lib/rails/rack/log_tailer
.rb:17:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in
 `service'
C:/Ruby193/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
C:/Ruby193/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
C:/Ruby193/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'
  Rendered incidents/_new.html.erb (169.0ms)
Completed 500 Internal Server Error in 178ms

ActionView::Template::Error (c:/Ruby193/incidents/app/views/incidents/_new.html.
erb:2: syntax error, unexpected ',', expecting keyword_end
'); form_for(incident, :update=>'map_info'), :remote => true do |f|
                                            ^
c:/Ruby193/incidents/app/views/incidents/_new.html.erb:23: syntax error, unexpec
ted keyword_ensure, expecting $end):
    1: <h1>New incident</h1>
    2: <% form_for(incident, :update=>'map_info'), :remote => true do |f| %>
    3:  <p>
    4:     <%= f.label :mountain %> <%= f.text_field :mountain %>
    5:   </p>
  app/controllers/incidents_controller.rb:24:in `block (2 levels) in new'
  app/controllers/incidents_controller.rb:20:in `new'

  Rendered C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_d
ispatch/middleware/templates/rescues/_trace.erb (5.0ms)
  Rendered C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_d
ispatch/middleware/templates/rescues/_request_and_response.erb (2.0ms)
  Rendered C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.4.rc1/lib/action_d
ispatch/middleware/templates/rescues/template_error.erb within rescues/layout (1
38.0ms) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:50:11.283

根据错误：

它的`","`从前面`:remote => true`，后面`form_for(incident, :update=>'map_info')`。去掉它

好的，让我们重新编码。尝试：

```
<%= form_for incidents_url, :remote => true do |f| %> 
```

您必须在事件中添加一个名为`new.js.erb`( `incidents/new.js.erb`) 的新文件。通常它会被调用`create.js.erb`，但你使用的是`new action`，而不是创建。

在该文件中，您编写更新 div 的 jQuery 代码。

```
$(".class_name_of_div").prepend("<%= @incident.which_ever_attribute_you_want %>"); 
```

此外，您可能想稍微更改一下控制器：

```
def new
  @incident = Incident.new
  @incident.latitude = params[:latitude]
  @incident.longitude = params[:longitude]
  @incident.save

  respond_to do |format|
    format.html
    format.js
  end
end 
```

也改变部分：

```
<%= render 'incidents/map', :incident => @incident %> 
```

告诉我进展如何。

# php - 获取 PDO/MySQL 中同一行的下一列的下一个元素？

> ID：12622494
> 
> 赞同：1
> 
> 时间：2012-09-27T13:25:54.110
> 
> 标签：php, mysql, pdo

假设我有一个由三列组成的数据库表 - 用户 ID、用户名和密码。假设我正在构建一个登录表单，并且密码以加密形式存储。因此，在与原始密码进行比较之前，需要对其进行一些处理。

所以，我让用户在表单中输入用户名和密码。

```
include('db.php');      
$getuid = $connection->prepare('SELECT FROM users WHERE username = :u');
$getuid->execute(array("u" => $_REQUEST['username'])); 
```

现在，我已经执行了该语句，并且选择了带有 Entered Username 的行。

**我想做的事 ？**

选择行后，我希望将相应的密码（加密形式）和用户 ID 存储在`$pass`,`$userid`变量中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:46:32.560

`select`查询需要`$getuid = $connection->prepare('SELECT * FROM users WHERE username = :u');`从表用户中选择`*`/获取所有列。

然后遍历结果，根据它们的列名（用户名，说pwd）得到对应的值，如下图：

```
 $results = $stmt->fetch(PDO::FETCH_ASSOC);
    foreach ( $results as $v) {
     $username = $v['username'];
     $pwd = $v['pwd']; 
     } 
```

**注意：**您无法检索原始密码或解码密码，[此处解释得很好](https://stackoverflow.com/questions/4637891/how-to-decrypt-md5-hash)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:33:11.973

如果用户输入用户名作为 uname，则使用此查询获取

```
select password,userid from users where user_name=uname 
```

# java - Andengine 新 Activity - Manifest

> ID：12622499
> 
> 赞同：2
> 
> 时间：2012-09-27T13:26:16.193
> 
> 标签：java, android, android-activity, manifest, andengine

我想用以下代码开始我的 Level1.class 活动：

```
public class OverviewChapter1 extends Scene

SceneManager.mainScene.runOnUiThread(new Runnable() 
{
    public void run() 
    {
        SceneManager.mainScene.startActivity(new Intent(SceneManager.mainScene, Level1.class));
        SceneManager.mainScene.finish();
    }
}); 
```

但是，我收到此错误消息：

```
致命例外：主要
android.content.ActivityNotFoundException：找不到明确的活动类
{de.davidtheobald.thorsrevengeapp/de.davidtheobald.thorsrevengeapp.chapter1.Level1}；
您是否在 AndroidManifest.xml 中声明了此活动？
    在 android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1511)
    在 android.app.Instrumentation.execStartActivity（Instrumentation.java:1387）
    在 android.app.Activity.startActivityForResult(Activity.java:3195)
    在 android.app.Activity.startActivity(Activity.java:3302)
    在 de.davidtheobald.thorsrevengeapp.chapter1.OverviewChapter1$1$1.run（OverviewChapter1.java:89）
    在 android.os.Handler.handleCallback(Handler.java:605)
    在 android.os.Handler.dispatchMessage(Handler.java:92)
    在 android.os.Looper.loop(Looper.java:137)
    在 android.app.ActivityThread.main(ActivityThread.java:4511)
    在 java.lang.reflect.Method.invokeNative(Native Method)
    在 java.lang.reflect.Method.invoke(Method.java:511)
    在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
    在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
    在 dalvik.system.NativeStart.main（本机方法）

```

如何在清单文件中定义活动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:34:03.230

在您的文件中添加**活动...**`Level1.class``AndriodManifest.xml`

```
<activity android:name="YourPackage.Level1"> </activity> 
```

查看[此答案](https://stackoverflow.com/questions/3608017/activity-name-in-androidmanifest-xml/8569511#8569511)以获取有关指定名称属性的更多详细信息。

# php - PHP 文件 - 导出 xls 而不是 csv

> ID：12622502
> 
> 赞同：2
> 
> 时间：2012-09-27T13:26:30.930
> 
> 标签：php, mysql, excel, csv, export

我有以下导出 csv 文件的代码：

```
//Selecting Item Data based on Date 
$result = mysql_query("SELECT item_no, qty, discount_price, date
  FROM sold_items WHERE date BETWEEN '".$fdate."' AND '".$tdate."'
  ORDER BY date Desc");

$filename = "C:/xampp/htdocs/frame/Sales".".csv";
if(file_exists($filename)) {
    $f = fopen("{$filename}", 'w');
    //Fputs the Table Headers
    fputcsv($f, array('Item No', 'Qty', 'Sell Price', 'Date'));

    //Fputcsv adds records to csv file
    while($row = mysql_fetch_array($result, MYSQL_NUM))
    {
        fputcsv($f, $row);
    }
    //Close file
    fclose($f);
} 
```

上面的代码完美运行，问题是我需要从现在开始停止导出 csv 并导出 xls 文件。我变成`$filename`了：

```
$filename = "C:/xampp/htdocs/frame/Sales".".xls"; 
```

xls 的格式不正确，就像所有记录都放在 excel 文件的一个字段中一样。我试过谷歌搜索，看到了一些复杂的 phpexcel 方法和我无法理解的东西。有没有简单的方法呢？也许`/t`可以将每条记录作为excel中的一个单独字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:34:08.893

你能用那些库吗

```
include ‘library/PHPExcel.php’;
include ‘library/PHPExcel/Writer/Excel2007.php’; 
```

见这里[http://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)

# google-drive-api - 冒充一个域的云端硬盘用户为域管理员

> ID：12622503
> 
> 赞同：1
> 
> 时间：2012-09-27T13:26:39.913
> 
> 标签：google-drive-api

我正在寻找一种使用管理员用户模拟谷歌应用域用户的方法。我可以使用 google data document list api 轻松做到这一点，但我找不到使用新 Drive API 的方法。

确切地说，我想要做的是使用 Oauth2 验证我的管理员用户（我已经这样做了），检索我的域的用户列表，然后模拟我的用户，或者至少能够从那些用户的驱动。

在 google apps 的管理面板中，有 Oauth consumer key 和 Oauth consumer secret，但是这些是在 Oauth1 2LO 中使用的，而不是 Oauth2 中使用的。

是否有适当的方法/解决方法/破解来实现我想要的？

此致，

杰罗姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:56:39.473

我只是以 google-api-ruby-client 为例，但您应该能够使用允许通过管理面板访问的服务帐户执行此操作 -> 高级工具 -> 管理第三方 oauath 客户端。[一旦获得许可，您可以在http://code.google.com/p/google-api-ruby-client/source/browse/service_account/analytics.rb?repo=samples](http://code.google.com/p/google-api-ruby-client/source/browse/service_account/analytics.rb?repo=samples)处按照服务帐户的示例进行操作，而不是使用授权

```
client.authorization = asserter.authorize() 
```

您可以使用

```
client.authorization = asserter.authorize("id@domain.com") 
```

我还没有做很多，但是在用这种方法进行身份验证后，我已经能够列出我域中用户拥有的所有文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T09:45:14.340

感谢詹姆斯伍德沃德，我已经能够冒充用户。我发布了一个答案以提供 Java 特定的详细信息。

1.  在 API 控制台中创建服务帐户。创建了 3 个重要资源：
    1.  客户端 ID ：用于授权 Google Apps 域上的应用程序
    2.  电子邮件地址：用于授权应用程序的请求
    3.  .p12 密钥文件：用于授权应用程序的请求
2.  在 Google Apps 管理面板上授权应用程序，为其提供服务帐户客户端 ID，以及应用程序需要的所有范围。
3.  `GoogleCredential`以这种方式创建：

    ```
    GoogleCredential serviceCred = new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT)
                .setJsonFactory(JSON_FACTORY)
                .setServiceAccountId(SERVICE_ID)
                .setServiceAccountScopes(Arrays.asList(SCOPES))
                .setServiceAccountUser("impersonated.user@domain.com")
                .setServiceAccountPrivateKeyFromP12File("key.p12")
                .build(); 
    ```

这些凭据现在可用于验证应用程序在任何授权范围内发出的请求。

# iphone - dispatch_async 中的自定义块

> ID：12622507
> 
> 赞同：2
> 
> 时间：2012-09-27T13:26:58.337
> 
> 标签：iphone, ios, cocoa-touch, cocoa

此代码有效

```
[[MyManager sharedManager] makeRequestAndParsingfor:someParameters 
                                            success:^(NSDictionary * dictionary){
                                                // Sucessful response
                                                NSLog(@"Success!!");
                                            } 
                                            failure:^(NSError* error){ 
                                                // Error response
                                                NSLog(@"Failure!");    
                                            }]; 
```

但是，每当我在后台运行相同的程序时，它永远不会进入成功或失败块。

```
dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
    [[MyManager sharedManager] makeRequestAndParsingfor:someParameters 
                                                success:^(NSDictionary * dictionary){
                                                    // Sucessful response
                                                    NSLog(@"Success!!");
                                                } 
                                                failure:^(NSError* error){ 
                                                    // Error response
                                                    NSLog(@"Failure!");    
                                                }];
}]; 
```

谁能解释我会发生什么？**makeRequestAndParsingfor**方法：发出异步请求（再次使用块），然后解析结果。我的调试器显示在第二种情况下它永远不会获得自己的成功/失败。在第一种情况下，它就像一个魅力。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:39:29.613

您的方法“makeRequestAndParsingfor”是否使用 args 的 block_copy()，并将返回值存储在一个强变量中（以获取堆中的块）？还要添加asserts()，这样你就可以验证你在'makeRequestAndParsingfor'中得到了两个块，甚至在调用一个或另一个之前重新测试。[过去使用 block_copy() 是必要的，但现在不能 100% 确定。]

请注意，在第二种情况下，“makeRequestAndParsingfor”在并发队列中运行，其中多个可以同时调用块 - 不确定您的成功/失败块做什么，但最好是线程安全的，或者您应该运行该块'makeRequestAndParsingfor' 中的主队列（我在类似构造的应用程序中这样做）。

# django - 使用 django 表单如何组织多列中的字段？

> ID：12622509
> 
> 赞同：0
> 
> 时间：2012-09-27T13:27:06.003
> 
> 标签：django, django-forms, django-templates

```
class MyForm(forms.Form):
  row_1 = forms.ChoiceField(widget=forms.RadioSelect, choices=CHOICES)
  row_2_col_1 = forms.ChoiceField(widget=forms.RadioSelect, choices=CHOICES)
  row_2_col_2 = forms.ChoiceField(widget=forms.RadioSelect, choices=CHOICES)

  def render_form(request):
    form = MyForm()
    # render form 
```

我的模板应该是什么，以便最终的 html 类似于

```
<table>
<tr> row_1 field.. </tr>
<tr>
  <td> row_2_col_1 field.. </td>
  <td> row_2_col_2 field.. </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:40:29.033

如果您已将表格传递给请求中的表单，则只需使用 Django 模板标记：

```
<table>
<tr>{{ table.row_1 }}</tr>
<tr>
  <td>{{ table.row_2_col_1 }}</td>
  <td>{{ table.row_2_col_2 }}</td>
</tr> 
```

# ios - 使用 RestKit 从 iOs 发布到 WCF

> ID：12622513
> 
> 赞同：0
> 
> 时间：2012-09-27T13:27:21.067
> 
> 标签：ios, wcf, post, restkit

**我试图从 Xcode（使用 RestKit）发布到 WCF 服务。这是我的代码：**

```
 NSDictionary *queryParams;
    queryParams = [NSDictionary dictionaryWithObjectsAndKeys:
                   @"1.0",@"oauth_version",
                   @"33333",@"oauth_nonce",
                   @"HMAC-SHA1",@"oauth_signature_method",
                   @"1323",@"oauth_timestamp",
                   @"rrr", @"oauth_consumer_key",
                   @"t672hpIerersdsfc", @"oauth_signature", nil];

    RKObjectManager *objectManager = [RKObjectManager sharedManager];

    RKURL *baseURL = [RKURL URLWithBaseURLString:@"http://myServer:80/appccservice.svc"];
    objectManager = [RKObjectManager objectManagerWithBaseURL:baseURL];

    objectManager.client.baseURL = baseURL;
    objectManager.client.authenticationType = RKRequestAuthenticationTypeOAuth1;
    objectManager.client.username = @"lsantos";
    objectManager.client.password = @"clave";

    NSString *resourcePath = [@"/json/post" stringByAppendingQueryParameters:queryParams];

    [RKObjectManager sharedManager].serializationMIMEType = RKMIMETypeJSON;
    RKObjectMapping *userSerialization = [RKObjectMapping mappingForClass:[NSMutableDictionary class]];

    [userSerialization mapKeyPath:@"name" toAttribute:@"nombreNovia"];
    [userSerialization mapKeyPath:@"tel" toAttribute:@"fecha"];

    RKObjectMapping *serialize = [userSerialization inverseMapping];

    [[RKObjectManager sharedManager].mappingProvider setSerializationMapping:serialize forClass:[User class]];

    [[RKObjectManager sharedManager].router routeClass:[User class] toResourcePath:resourcePath forMethod:RKRequestMethodPOST];

    User *data = [User new];
    data.nombreNovia = @"joaquin";
    data.fecha = @"4344";

    [[RKObjectManager sharedManager] postObject:data delegate:self]; 
```

我使用了 RKLogConfigureByName 并得到了这个：

要求：

```
URLRequest '<NSMutableURLRequest http://myServer:80/appccservice.svc/json/post?oauth_timestamp=32432304&oauth_nonce=123123&oauth_version=1.0&oauth_consumer_key=key&oauth_signature_method=HMAC-SHA1&oauth_signature=t672hasdfdsfsdsdceVBFqKc>'. HTTP Headers: {
    Accept = "application/json";
    "Accept-Encoding" = gzip;
    Authorization = "OAuth oauth_signature=\"bEmMvO3sdfsdfsdfcdc\"";
    "Content-Length" = 31;
    "Content-Type" = "application/json";
}. HTTP Body: {"tel":"4344","name":"joaquin"}. 
```

我认为该请求一切正常，数据在 HTTP 正文中。

同时在回复中：

```
 Connection = "Keep-Alive";
    "Content-Length" = 7;
    "Content-Type" = "application/json; charset=utf-8";
    Date = "Thu, 27 Sep 2012 12:34:08 GMT";
    "Proxy-Connection" = "Keep-Alive";
    Server = "Microsoft-IIS/7.5";
    Via = "1.1 ISASERVERSM";
    "X-Powered-By" = "ASP.NET";
} 
```

当对象为空时，我的方法返回空，因此 WCF 看不到数据。

```
2012-09-27 08:34:05.056 RESTPRUEBA2[6698:fb03] T restkit.network:RKResponse.m:231 Read response body: "empty" 
```

我在 didFailLoadWithError 上遇到了这个错误

```
2012-09-27 09:11:25.500 RESTPRUEBA2[6698:fb03] error encontrado: Error Domain=JKErrorDomain Code=-1 "Expected either '[' or '{'." UserInfo=0x88d89c0 {JKAtIndexKey=7, JKLineNumberKey=1, NSLocalizedDescription=Expected either '[' or '{'.} 
```

有趣的是，我在 Firefox 中使用带有相同 URL 和数据的 RestClient 插件证明了我的 WCF，并且一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:09:06.660

此问题表明您的远程系统返回的 JSON 解析不正确。来自`JKErrorDomain`JSONKit，正在使用的 JSON 解析器。获取您的响应正文并在[http://jsonlint.com/](http://jsonlint.com/)上对其进行验证并修复解析错误。

# wix - 使用复选框 wix

> ID：12622515
> 
> 赞同：0
> 
> 时间：2012-09-27T13:27:28.170
> 
> 标签：wix

嗨，我试图从单选按钮启动自定义操作，但意识到这无法完成。相反，我创建了两个复选框。我希望他们有一个共享属性，我已经这样做了，如我的代码中所示，但我需要用户一次只能选择一个，而不是两者都选择。

这是我的代码：

```
 <Control Id="CheckBoxLock" Type="CheckBox"  Text="DiskID/NIC Adapter Address" Property="LOCKTYPE" X="50" Y="215" Width="200" Height="15" CheckBoxValue="0">
    </Control>

      <Control Id="CheckBoxLock2" Type="CheckBox"  Text="Hardware Key Serial Number" CheckBoxPropertyRef="LOCKTYPE" X="50" Y="230" Width="200" Height="15" CheckBoxValue="1">
       <Publish Event="DoAction" Value="OnLockOptionModified"><![CDATA[LOCKTYPE = "1"]]></Publish>
      </Control> 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:24:34.323

很长的路要走，但我创建了一个可行的解决方法：

```
 <Control Id="CheckBoxLock" Type="CheckBox"  Text="DiskID/NIC Adapter Address" Property="LOCKTYPESW" X="90" Y="215" Width="200" Height="15" CheckBoxValue="0">
      <Publish Property="LOCKTYPE" Value="[LOCKTYPESW]">1</Publish>
      <Publish Property="LOCKTYPEHW" Value="{}">1</Publish>
      <Publish Event="DoAction" Value="OnLockOptionModified"><![CDATA[LOCKTYPE = "0"]]></Publish>
    </Control>

      <Control Id="CheckBoxLock2" Type="CheckBox"  Text="Hardware Key Serial Number" Property="LOCKTYPEHW" X="90" Y="230" Width="200" Height="15" CheckBoxValue="1">
        <Publish Property="LOCKTYPE" Value="[LOCKTYPEHW]">1</Publish>
        <Publish Property="LOCKTYPESW" Value="{}">1</Publish>
        <Publish Event="DoAction" Value="OnLockOptionModified"><![CDATA[LOCKTYPE = "1"]]></Publish>
      </Control> 
```

然后我的自定义操作读取`LOCKTYPE`属性。希望这对其他人有帮助，因为我花了两个小时才弄清楚..:)

# php - 从 $var 外部剥离 "

> ID：12622519
> 
> 赞同：0
> 
> 时间：2012-09-27T13:27:35.423
> 
> 标签：php, mysql, web-applications

$varHi 我知道这是一项非常基本的任务，但我有些困惑。

我正在从数据库中拉回字符串并将其分配给`$var`. 然后我将此值输出到文本区域。但是，当我这样做时，字符串被包围在“”中。

例如“这是字符串”，但我只想：这是字符串

我尝试了很多功能。我正在使用 chr(34) 搜索“，但无济于事。如果它在字符串内部，它只会替换它们。不在字符串的外部/周围。

```
$var = str_replace( chr(34), "" ,$var); 
```

提前感谢您的帮助。

编辑：原来我错误地输出到文本区域“”应该是

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:28:51.897

`$var = str_replace( '"', '' ,$var);`

[在此处](http://codepad.org/XtmFhVpn)查看实际操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:29:35.330

```
$var = str_replace('"', '', $var); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:29:54.143

怎么样`$var = str_replace('"', '', $var);`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T13:33:22.643

如前所述，您可以使用[str_replace ，但这也会从字符串主体中删除引号（如果有的话）](http://php.net/str_replace)

要仅删除第一个和最后一个，您可以使用带有可选第二个参数的[trim函数](http://php.net/trim)

编辑：如果您在要保留的字符串中有引号，则可能会对其进行转义，因此您可以使用 str_replace 仅使用引号而不是转义的引号（**str_replace('\"', '"', $string)**）；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T13:37:36.760

只有在您的数据被提取时，双重语音才会出现，除非您不正确地回显或打印到文本区域。

如上所述

```
$var = str_replace('"', '', $var); 
```

可以正常工作，但是如果您的数据一开始就没有双重语音，那就有点麻烦了。

# android - 保留的、不可取消的 DialogFragment 中的 getActvity() 何时可以为空？

> ID：12622520
> 
> 赞同：2
> 
> 时间：2012-09-27T13:27:35.173
> 
> 标签：android, android-fragments, android-lifecycle, android-dialogfragment

如果我有一个`DialogFragment`保留且不可取消的，在什么情况下 getActivity() 可以返回 null？

据我了解，可以销毁 Activity 的唯一方法是：

1.  通过后退按钮 - 这不可能发生，因为我的对话框是不可取消的
2.  通过旋转 - 这（我认为）无关紧要，因为我的对话框被保留并且在我的任何主线程回调运行之前将重新附加活动（由于一个主线程消息中的活动重新创建）。

我的问题是，我错过了一个案例吗？还是我的假设不正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:08:32.940

好的。经过一番思考，我想我理解了我的错误。第一个 DialogFragment 的处理程序已在我的服务中注册，并且从未取消注册。所以当消息到来时，它也会进入这个处理程序。我相信如果还没有的话，它可能会导致内存泄漏：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:48:25.960

不完全是您问题的答案，但是当在 DialogFragment 中使用处理程序时，我有一个 getActivity() 返回 null。即使 Handler 有一个到 DialogFragment 实例的链接，它在 handleMessage() 方法中仍然有 getActivity() 为 null。很高兴听到为什么会这样。

PS 更奇怪的是，第一次创建这个 DialogFragment 时一切正常。当我们创建这个 DialogFragment 的新实例时，他在 Handler 中的 getActivity() 开始返回 null。

我怀疑，当我们创建一个新的 DialogFragment 时，内部的 Handler 仍然以某种方式连接到旧的（已经分离并且没有活动）

必须承认，我的 Handler 不像推荐的那样是静态的。

PPS 我使用兼容库作为片段

# mysql - PostgreSQL 9.2 比 MySQL 5.5 慢 10 倍？

> ID：12622524
> 
> 赞同：2
> 
> 时间：2012-09-27T13:27:46.937
> 
> 标签：mysql, postgresql, postgresql-9.2

我的笔记本电脑上安装了 PostgreSQL 9.2 和 MySQL 5.5 (InnoDB)。两个数据库引擎都使用默认安装并从同一个 CSV 文件填充。我有 'sales_reports' 表和 ca。700K 行。

**场景一：**

*   以下查询：

    > 按名称、年份、地区、分支机构从 sales_reports 组中选择名称、年份、地区、分支机构；

*   PostgreSQL 9.2：总查询运行时间：42.14 秒，检索到 18064 行

*   PostgreSQL 解释：

    ```
    组（成本=165091.16..174275.61 行=73476 宽度=58）（实际时间=35196.959..41896.739 行=18064 循环=1）
    -> 排序（成本=165091.16..166928.05 行=734756 宽度=58）（实际时间=35196.956..41704.549 行=734756 循环=1）
        排序键：名称、年份、地区、分支
        排序方式：外部合并磁盘：49920kB
        -> sales_reports 上的 Seq Scan（成本=0.00..38249.56 行=734756 宽度=58）（实际时间=0.048..282.331 行=734756 循环=1）
    总运行时间：41906.628 毫秒

    ```

*   MySQL 5.5：总查询运行时间：4.4 秒，检索到 18064 行
*   MySQL解释：

    ```
    +----+-------------+---------------+------+------- --------+------+---------+------+--------+-------- -------------------------------------+
    | 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
    +----+-------------+---------------+------+------- --------+------+---------+------+--------+-------- -------------------------------------+
    | 1 | 简单 | 销售报告 | 全部 | 空 | 空 | 空 | 空 | 729433 | 使用临时的；使用文件排序 |
    +----+-------------+---------------+------+------- --------+------+---------+------+--------+-------- -------------------------------------+

    ```

*   **PostgreSQL 慢 10 倍**

**场景二：**

*   以下查询：

    ```
    按名称、年份、地区、分公司从 sales_reports 组中选择名称、年份、地区、分公司、总和（销售）作为销售额；
    ```

*   PostgreSQL 9.2：总查询运行时间：42.51 秒，检索到 18064 行
*   PostgreSQL 解释：

    ```
    GroupAggregate（成本=165091.16..176847.26 行=73476 宽度=64）（实际时间=35160.911..42254.060 行=18064 循环=1）
    -> 排序（成本=165091.16..166928.05 行=734756 宽度=64）（实际时间=35160.489..41857.986 行=734756 循环=1）
        排序键：名称、年份、地区、分支
        排序方法：外部合并磁盘：54760kB
        -> sales_reports 上的 Seq Scan（成本=0.00..38249.56 行=734756 宽度=64）（实际时间=0.047..296.347 行=734756 循环=1）
    总运行时间：42264.790 毫秒

    ```

*   MySQL 5.5：总查询运行时间：8.15 秒，检索到 18064 行
*   MySQL解释：

    ```
    +----+-------------+---------------+------+------- --------+------+---------+------+--------+-------- -------------------------------------+
    | 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
    +----+-------------+---------------+------+------- --------+------+---------+------+--------+-------- -------------------------------------+
    | 1 | 简单 | 销售报告 | 全部 | 空 | 空 | 空 | 空 | 729433 | 使用临时的；使用文件排序 |
    +----+-------------+---------------+------+------- --------+------+---------+------+--------+-------- -------------------------------------+

    ```

*   **PostgreSQL 慢 5 倍**

**场景 3：**

*   以下查询：

    ```
    按名称、年份、地区从 sales_reports 组中选择名称、年份、地区、总和（销售）作为销售；
    ```

*   PostgreSQL 9.2：总查询运行时间：1 秒，检索到 18064 行
*   PostgreSQL 解释：

    ```
    HashAggregate（成本=45597.12..45655.62 行=5850 宽度=37）（实际时间=758.396..759.756 行=4644 循环=1）
    -> sales_reports 上的 Seq Scan（成本=0.00..38249.56 行=734756 宽度=37）（实际时间=0.061..116.541 行=734756 循环=1）
    总运行时间：760.133 毫秒
    ```

*   MySQL 5.5：总查询运行时间：5.8 秒，检索到 18064 行
*   MySQL解释：

    ```
    +----+-------------+---------------+------+------- --------+------+---------+------+--------+-------- -------------------------------------+
    | 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
    +----+-------------+---------------+------+------- --------+------+---------+------+--------+-------- -------------------------------------+
    | 1 | 简单 | 销售报告 | 全部 | 空 | 空 | 空 | 空 | 729433 | 使用临时的；使用文件排序 |
    +----+-------------+---------------+------+------- --------+------+---------+------+--------+-------- -------------------------------------+

    ```

*   **PostgreSQL 快 5 倍**

任何想法为什么前两个场景在 PostgreSQL 上如此缓慢？

顺便说一句，我为在 PostgreSQL 上的查询中使用的字段创建了索引，我没有在 MySQL 上创建任何索引。

谢谢，

马立克

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-27T15:29:52.463

默认的 postgresql 配置相当保守。对于初学者，请尝试增加到`shared_buffers`1GB。（请记住重新启动服务器以使更改生效。）

此外，尝试增加`work_mem`直到 GroupAggregate 在说明中切换到 HashAggregate。您无需重新启动即可更改此设置。

一句警告：在生产中搞乱设置之前，请阅读友好的手册，其中涉及一些陷阱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T14:09:41.957

一些东西：

1.  在 varchar/text 列上创建索引时（可能是名称），在 PostgreSQL 中为 group by 语句使用散列类型索引可能会更快
2.  如果 mysql 使用 MyISAM 表，它对于非并发加载可能会更快，因为 MyISAM 忽略了 InnoDB 和 PgSQL 所具有的许多安全性。
3.  您应该尝试对您的 pgsql 数据库进行真空分析。
4.  您可能希望在名称、年份、地区、分支上创建一个复合索引，以使该分组更快。

# sql-server - SCOPE_IDENTITY 似乎不适用于参数化查询

> ID：12622525
> 
> 赞同：3
> 
> 时间：2012-09-27T13:27:48.540
> 
> 标签：sql-server, ado.net

我有一个带有标识列的表，我想在 INSERT 之后获得它的值。以下不使用参数的代码运行良好：

```
string query = "INSERT INTO aTable ([aColumn]) VALUES (42)";
SqlCommand command = new SqlCommand(query, connection);
command.ExecuteNonQuery();

query = "SELECT CAST(SCOPE_IDENTITY() AS bigint)";
command = new SqlCommand(query, connection);
object identity = command.ExecuteScalar(); 
```

如果我将上述代码的 INSERT 部分更改为使用参数化查询，会`ExecuteScalar()`突然返回一个`System.DBNull`值。这是参数化查询代码的样子：

```
string query = "INSERT INTO aTable ([aColumn]) VALUES (@aColumn)";
SqlCommand command = new SqlCommand(query, connection);
command.Parameters.AddWithValue("@aColumn", 42);
command.ExecuteNonQuery(); 
```

我试图更改 SCOPE_IDENTITY 代码，以便它使用输出参数并调用`ExecuteNonQuery()`，但我仍然在 out 参数中得到一个空值。我还尝试针对两个不同版本的 SQL Server（2012 和 2008，均为 Express 版）运行代码，再次得到相同的结果。

有什么想法我在这里做错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T13:30:05.220

尝试将您的 INSERT 和 SELECT 组合到一个语句中

```
string query = "INSERT INTO aTable ([aColumn]) VALUES (@aColumn);SELECT CAST(SCOPE_IDENTITY() AS bigint)"; 
SqlCommand command = new SqlCommand(query, connection); 
command.Parameters.AddWithValue("@aColumn", 42); 
object identity = command.ExecuteScalar(); 
```

# javascript - 谷歌图表点颜色

> ID：12622528
> 
> 赞同：8
> 
> 时间：2012-09-27T13:27:57.243
> 
> 标签：javascript, charts, google-visualization

是否可以在 Google 图表 api 中更改点颜色，如下所示：

由此： ![默认](../Images/d6838a4e256b1e089db38588e4b90b4e.png)

对此： ![在此处输入图像描述](../Images/757d74a735b46597c8122a6545daec7b.png)

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T13:41:28.240

尝试查看由 asgallant[**在这里**](https://groups.google.com/forum/?fromgroups=#!topic/google-visualization-api/Nz0aN6mucOQ)创建的这个[**jsFiddle 示例**](http://jsfiddle.net/asgallant/jdkKm/)[](https://groups.google.com/forum/?fromgroups=#!topic/google-visualization-api/Nz0aN6mucOQ)

 ***“ **API 中不支持使同一系列中的线条和数据点具有不同的颜色**。不过，您可以通过使用 DataView 来**伪造您想要**的东西，您的数据在两列中重复。将第一个系列设为“黑色” ' 和第二个颜色为 '红色' 的 lineWidth = 0 和 pointSize > 0。”*

从示例：

```
var options = {
        title: 'Load vs Length',
        titlePosition: 'out',
        legend: {
            position: 'none'
        },
        hAxis: {
            title: 'Length (inch)',
            viewWindow: {
                min: 0
            },
            format: '#.000'
        },
        vAxis: {
            title: 'Load (pound)',
            viewWindow: {
                min: 0
            }
        },
        series: { //Create 2 separate series to fake what you want. One for the line             and one for the points
            0: {
                color: 'black',
                lineWidth: 2
            },
            1: {
                color: 'red',
                lineWidth: 0,
                pointSize: 5
            }
        } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T06:22:44.350

谢谢您的建议。但是，系列 1 对我不起作用：按照代码，打印蓝色线但不显示点。如果我切换 1 和 0。然后它会以红色显示点，但没有线。之前而不是系列，我只有 pointSize: 4，就在 hAxis 之后。这有效，除了相同颜色的点和线。

```
{title: 'progress',

  vAxis: {
          title: 'Grade',  
          titleTextStyle: {color: 'red'}, 
          gridlines: {count: 7}, 
          viewWindow: { min: 0, 
                        max: 100, 
                        valueLabelsInterval: 20}
        },

  hAxis: {
          title: 'Q date',  
          titleTextStyle: {color: 'red'}, 
          slantedText: true
        },

  series: {
          0: {lineWidth: 2},
          1: {
             color: 'red',
             lineWidth: 0,
             pointSize: 4
           }
        }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-30T06:52:50.827

我通过向每个点添加一个单独的样式列来解决问题，如下所示：

[![在此处输入图像描述](../Images/c5d248036b5b28e419d7874696c8757f.png)](https://i.stack.imgur.com/k18sW.jpg)

```
 var data_timeline = new google.visualization.DataTable();
  data_timeline.addColumn('string', 'Year'); // Implicit domain label col.
  data_timeline.addColumn('number', 'Students'); // Implicit series 1 data col.
  data_timeline.addColumn({type:'string', role:'annotation'}); // annotation role col.
  data_timeline.addColumn({type:'string', role:'style'}); // style col.      
  data_timeline.addRows([
    ['2010-2011', 85, '85', 'point { size: 7; shape-type: diamond; fill-color: #005b82; }'],
    ['2011-2012', 67, '67', 'point { size: 7; shape-type: diamond; fill-color: #005b82; }'],
    ['2012-2013', 34, '34', 'point { size: 7; shape-type: diamond; fill-color: #005b82; }'],
  ]);      

  var options_timeline = {
    hAxis: { textStyle: { color: '#444444'} },
    vAxis: { baselineColor: '#cccccc', textPosition: 'none', minValue: 0 },
    legend: {position: 'none'},
    lineWidth: 3,
    pointsVisible: true,
    colors: ['#b7c72a'],
  };

  var chart_timeline = new google.visualization.LineChart(document.getElementById('chart_timeline'));
  chart_timeline.draw(data_timeline, options_timeline); 
```**

# jakarta-ee - tomcat 从命令行重新启动 webapp

> ID：12622534
> 
> 赞同：30
> 
> 时间：2012-09-27T13:28:13.917
> 
> 标签：jakarta-ee, tomcat

我有一个运行多个应用程序的 PCI DSS 兼容环境，我只想重新启动一个应用程序而不重新启动服务器。我没有经理，因为显然在这种环境中是不允许的。

如何通过命令行重新启动单个 Web 应用程序？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2016-09-16T09:25:47.183

我知道我迟到了，但是为了从命令行重新加载应用程序，你可以做的一个小技巧是转到应用程序的 web.xml 并简单地触摸它。

`cd webapps/<webapp-name>/WEB-INF/`

`touch web.xml`

tomcat 每次注意到这个文件发生变化时都会重新加载应用程序，如果你只是触摸它，你实际上并没有修改文件，只是时间戳。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-10-10T14:07:07.393

这是我的做法：

1.  确保您的 tomcat 用户数据库中有具有“manager-script”角色的用户。这通常意味着您的`${TOMCAT}/conf/tomcat-users.xml`:

```
<user username="admin" password="secret" roles="manager-gui,manager-script"/> 
```

否则，由于跨站点请求伪造 (CSRF) 保护，您将收到 403 错误。

2.  使用`curl`或您喜欢的任何命令行工具来获取 URl `<yourserver>/manager/text/reload?path=/<context_path>`：

    ```
    curl --user user:secret http://localhost:8080/manager/text/reload?path=/mypath 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T06:59:11.177

如果无法访问管理器应用程序，您将无法执行此操作。如果您可以访问管理器应用程序，并且仍想使用命令行而不是 Web 浏览器，则可以尝试使用名为 tomcat-manager[的命令行脚本来管理 tomcat 。](https://github.com/kotfu/tomcat-manager "https://github.com/kotfu/tomcat-manager")它需要 Python，但允许您从 Unix shell 执行以下操作：

```
$ tomcat-manager --user=admin --password=newenglandclamchowder \
> http://localhost:8080/manager/ reload /myapp 
```

和：

```
$ tomcat-manager --user=admin --password=newenglandclamchowder \
> http://localhost:8080/manager deploy /myapp ~/src/myapp/myapp.war 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T04:20:48.410

不幸的是，我认为没有办法从命令行执行此操作。相反，我建议查看是否有办法在单独的 Tomcat 实例中托管您需要重新启动的单个应用程序，这样您就可以重新启动该实例而不影响其他应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-26T20:09:51.190

作品将 app.war 的名称更改为临时 app.war.bkp（备份的任何名称），然后当 tomcat 删除 webapp 的源文件夹时，将 .bkp 的名称更改为原始名称。这仅适用于控制台访问用户。

# c# - Microsoft 是否正在开发 C# 中的 AOP 解决方案？

> ID：12622537
> 
> 赞同：0
> 
> 时间：2012-09-27T13:28:22.090
> 
> 标签：c#, .net, aop

Microsoft 是否正在开发 C# 中的 AOP 解决方案？什么是（真正的 AOP）替代方案？

额外的问题：代码契约是一种 AOP 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:40:53.480

[PostSharp](http://www.sharpcrafters.com/)是另一种选择。易于上手，尽管它不再完全免费使用。

我不知道微软是否还在积极为[Unity](http://unity.codeplex.com/)项目做出贡献。也许其他人可以对此有所了解。

[代码契约](http://research.microsoft.com/en-us/projects/contracts/)不是（一种）面向方面的编程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T13:42:17.633

.net 中的大多数依赖注入框架都能够使用 AOP 技术，我个人更喜欢 Ninject 和 Interceptor 插件，因为它易于使用，并且不需要任何具有 3rd 方属性或任何东西的类污染。

话虽如此，Spring.net、Castle Windsor 和许多其他 DI 框架都支持相同的原理，但语法和方法略有不同，有些是 xml 驱动的，有些是 c# 驱动的，因此您可以获得编译时安全性。

需要考虑的一件事是，大多数 DI 框架通过类代理来做到这一点，因此它们要求您的方法是虚拟的，然后在运行时代理您的类方法，您可以在此时拦截。还有一些其他方法，例如 PostSharp 所做的 IL 编织，它可以比代理更快，尽管我没有任何测量来支持它。

没有看到额外的问题，对我来说，我想说这不是一个明确的答案，因为这取决于你如何使用它，因为通常你使用 AOP 作为一种分离非功能性问题的方式，例如日志记录、事务也许从您的源代码进行验证，因此您从外部添加此逻辑，因此理想情况下您的源代码不知道 AOP 发生（尽管如果您使用一些将耦合您的源代码的第 3 方属性，情况并非总是如此到 AOP 框架）。

由于代码契约可以与现有类内联编写或通过属性挂钩，或者我相信可以在运行时完全注入，就像日志记录问题一样，您*可以*将它们全部放入您的类中，但是当使用 AOP 方法时，您不会. 所以对我来说，代码契约只是一个强制执行某些东西的工具，你*可以*以 AOP 方式使用它，或者你可以将它嵌入到你的代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:29:42.973

作为替代方案，您也可以使用`Spring AOP`

链接：[http ://static.springsource.org/spring/docs/2.0.x/reference/aop.html](http://static.springsource.org/spring/docs/2.0.x/reference/aop.html)

注意：我更喜欢 Unity

# c# - 为什么泛型 ICollection 不在 .NET 4.5 中实现 IReadOnlyCollection？

> ID：12622539
> 
> 赞同：61
> 
> 时间：2012-09-27T13:28:22.897
> 
> 标签：c#, oop, design-patterns, .net-4.5, c#-5.0

在 .NET 4.5 / C# 5 中，`IReadOnlyCollection<T>`使用`Count`属性声明：

```
public interface IReadOnlyCollection<out T> : IEnumerable<T>, IEnumerable
{
    int Count { get; }
} 
```

我想知道，`ICollection<T>`实现`IReadOnlyCollection<T>`接口是否也有意义：

```
public interface ICollection<T> : IEnumerable<T>, IEnumerable, *IReadOnlyCollection<T>* 
```

这意味着实现的类`ICollection<T>`会自动实现`IReadOnlyCollection<T>`。这对我来说听起来很合理。

`ICollection<T>`抽象可以看作是抽象的扩展`IReadOnlyCollection<T>`。请注意`List<T>`，例如，同时实现`ICollection<T>`和`IReadOnlyCollection<T>`。

然而，它并不是这样设计的。

我在这里想念什么？为什么会选择当前的实现呢？

* * *

**更新**

我正在寻找一个使用**面向对象设计推理**来解释原因的答案：

*   一个具体的类，例如同时`List<T>`实现`IReadOnlyCollection<T>` *和* `ICollection<T>`

*是比以下更好的设计：*

*   `ICollection<T>``IReadOnlyCollection<T>`直接执行

* * *

另请注意，这基本上与以下问题相同：

1.  为什么不`IList<T>`执行`IReadOnlyList<T>`？
2.  为什么不`IDictionary<T>`执行`IReadOnlyDictionary<T>`？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-27T13:40:17.677

可能有几个原因。这里有一些：

*   **巨大的向后兼容性问题**

    你会如何写 的定义`ICollection<T>`？这看起来很自然：

    ```
    interface ICollection<T> : IReadOnlyCollection<T>
    {
        int Count { get; }
    } 
    ```

    但是它有一个问题，因为`IReadOnlyCollection<T>`还声明了一个`Count`属性（编译器会在这里发出警告）。除了警告之外，保持原样（相当于 write `new int Count`）允许实现者通过显式实现至少一个属性来对这两个属性进行*不同的实现。*`Count`如果两个实现决定返回不同的值，这可能是“有趣的”。允许人们在脚下射击自己并不是 C# 的风格。

    好的，那怎么办：

    ```
    interface ICollection<T> : IReadOnlyCollection<T>
    {
        // Count is "inherited" from IReadOnlyCollection<T>
    } 
    ```

    好吧，这破坏了所有决定`Count`显式实现的现有代码：

    ```
    class UnluckyClass : ICollection<Foo>
    {
         int ICollection<Foo>.Count { ... } // compiler error!
    } 
    ```

    *因此，在我看来，这个问题没有很好的解决方案：要么破坏现有代码，要么对每个人*强制执行容易出错的实现。所以[唯一的制胜之法就是不玩](https://www.google.com/search?q=the%20only%20winning%20move%20is%20not%20to%20play)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-18T20:04:42.147

Jon 就在这里[https://stackoverflow.com/a/12622784/395144](https://stackoverflow.com/a/12622784/395144)，您应该将他的回复标记为答案：

```
int ICollection<Foo>.Count { ... } // compiler error! 
```

由于接口可以具有显式实现，因此提取基接口不向后兼容（使用基类就没有这个问题）。

这就是为什么...

```
Collection<T> : IReadOnlyCollection<T>
List<T> : IReadOnlyList<T>
Dictionary<TKey, TValue> : IReadOnlyDictionary<TKey, TValue> 
```

...但不是他们的界面。

恕我直言，他们最初犯了一个设计错误，现在完全无法解决（没有破坏）。

编辑：隐藏没有帮助，旧的（显式）实现仍然不会构建（不修改代码）：

```
interface INew<out T> { T Get(); }

interface IOld<T> : INew<T>
{
    void Set(T value);
    new T Get();
}

class Old<T> : IOld<T>
{
    T IOld<T>.Get() { return default(T); }
    void IOld<T>.Set(T value) { }
} 
```

> “Sample.Old”没有实现接口成员“Sample.INew.Get()”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:43:35.790

这在*语义上*是错误的，因为显然，并非每个`ICollection`都是只读的。

也就是说，他们可以调用接口`IReadableCollection`，而可以调用*实现*`ReadOnlyCollection`。

然而，他们并没有走那条路。为什么？我看到一个[BCL 团队成员写道，他们不希望集合 API 变得过于复杂](http://msdn.microsoft.com/en-us/magazine/jj133817.aspx)。（虽然它已经是，坦率地说。）

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-27T13:32:31.443

当我第一次读到你的问题时，我想“嘿，他是对的！那是最有意义的。” 但是接口的重点是描述契约——行为的描述。如果你的类实现`IReadOnlyCollection`了，它*应该*是只读的。`Collection<T>`不是。因此，`Collection<T>`实现一个隐含只读的接口可能会导致一些非常讨厌的问题。an 的消费者`IReadOnlyCollection`将对底层集合做出某些假设——比如迭代它是安全的，因为没有人可以修改它，等等。如果它的结构像你建议的那样，那可能不是真的！

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-10-10T22:26:36.837

**面向对象**的设计推理源于类与该类实现的任何接口之间的**“Is A”关系。**

在 .NET 4.5/c# 5.0`List<T>`中既是一个`ICollection<T>`又是`IReadOnlyCollection<T>`. 您可以将 a 实例`List<T>`化为任一类型，具体取决于您希望如何使用您的集合。

虽然拥有`ICollection<T>`implement`IReadOnlyCollection<T>`将使您能够`List<T>`成为`ICollection<T>`or `IReadOnlyCollection<T>`，但这样做会说`ICollection<T>` **“是 A”** `IReadOnlyCollection<T>`，而事实并非如此。

**更新**

`ICollection<T>`如果从实现的每个类继承，`IReadOnlyCollection<T>`那么我会说`ICollection<T>`实现接口更有意义。`ICollection<T>`既然情况并非如此，请考虑一下如果要实现它会是什么样子`IReadOnlyCollection<T>`：

`public interface IReadOnlyCollection<T> : IEnumerable<T>, IEnumerable{}
public interface ICollection<T> : IReadOnlyCollection<T> {}`

如果您要查看 的签名`ICollection<T>`，它看起来像是**IS-A**只读集合。等等，让我们看看 IReadOnlyCollection 和啊……它实现了`IEnumerable<T>`，`IEnumerable`所以它不一定是只读集合。从功能上讲，原始问题提出的实现是相同的，但从语义上讲，我认为将接口实现推到尽可能高的位置更正确。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-09-27T13:59:22.163

这个接口更像是一个描述接口，而不是真正的功能性东西。

在建议的方法中，每个集合都必须被理解为你只能阅读的东西，广告总是一样的。因此，您无法在创建后添加或删除事物。

我们可以问自己为什么调用该接口`IReadOnlyCollection`，而不是它使用的“IReadOnlyEnumerable” `IEnumerable<T>, IEnumerable`。答案很简单，这种类型的接口不会有任何意义，因为 Enumerable 已经是“只读的”。

所以让我们看看文档[IReadOnlyCollection(T)](http://msdn.microsoft.com/en-us/library/hh881542.aspx)

描述中的第一个（也是最后一个）senetece 说：

> 表示强类型的只读元素集合。

如果你知道[强类型](http://en.wikipedia.org/wiki/Strong_typing)的用途，我认为这可以解释一切。

# c++ - getline 函数不适用于多个字符串输入

> ID：12622547
> 
> 赞同：0
> 
> 时间：2012-09-27T13:28:49.390
> 
> 标签：c++, visual-studio-2010, visual-c++

> **可能重复：**
> [在 getline() 方面需要帮助](https://stackoverflow.com/questions/1744665/need-help-with-getline)

我正在尝试将 getline 函数与 cin 结合使用以从键盘获取输入，但我的代码跳过了 getline 语句，而是继续执行下面的 cin 函数。这是我的代码和正在发生的事情的屏幕截图。

![在此处输入图像描述](../Images/3a633d03eda3b3e300a7239d824541be.png)

```
void addmovie(ofstream& MovieContentsFile) {

string movieTitle;
int movieQuantity;

cout << " \n Add Movie Selected \n " << endl;

cout << "Please type in the movie title and press enter \n" << endl;

getline(cin,movieTitle, '\n');

cout << "Movie: " << movieTitle << "Please type in the amount of copies we have of this movie \n " << endl;

cin >> movieQuantity; 
```

我很感激解释为什么会发生这种情况以及将来如何避免它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:33:42.717

`cin >> something`将尾随换行符留在缓冲区中，这将被下一个忽略`cin >> something_else`（大概这是您阅读菜单选项的方式）。但是，`getline`获取缓冲区中的*所有内容*并包括下一个换行符，而不是忽略空格。即在这种情况下它什么也得不到（嗯，只是换行符）。

一般来说，最好不要混合使用两者，它会有点混乱。

编辑：为了澄清，`getline`将从缓冲区中删除最后一个换行符，但不会将其存储在您的`string`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:40:40.300

这是因为换行符仍在缓冲区中，所以当它到达 getline 时，它​​会看到它并跳过它。为避免这种情况，您可以在前面放置类似`cin.ignore(25, "\n")`的东西。这将忽略 25 个字符，直到它到达换行符，然后它也需要它。

# c# - 使用 ItemsControl 拆分项目

> ID：12622550
> 
> 赞同：0
> 
> 时间：2012-09-27T13:28:59.813
> 
> 标签：c#, wpf, xaml, binding

这是 XAML：

```
<ListView.View>
            <GridView>
                <GridViewColumn DisplayMemberBinding="{Binding Path=ScenarioName}" Header="Scenario Name" />
                <GridViewColumn DisplayMemberBinding="{Binding Path=ScenarioType}" Header="Scenario Type" />
                <GridViewColumn Header="Well names" Width="175">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <ItemsControl ItemsSource="{Binding Path=Wells}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <WrapPanel Orientation="Vertical"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel>
                                                <!--<TextBlock Text="{Binding}"/>-->                                                  
                                                    <Button Width="60" Margin="0 0 0 3">Test 1</Button>

                                                </StackPanel>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
                <GridViewColumn DisplayMemberBinding="{Binding Path=StartPeriod}" Header="Start period" />
                <GridViewColumn DisplayMemberBinding="{Binding Path=EndPeriod}" Header="End period" />
                <GridViewColumn DisplayMemberBinding="{Binding Path=Lagged}" Header="Lagged" />
                <GridViewColumn DisplayMemberBinding="{Binding Path=Detrended}" Header="Detrended" />
                <GridViewColumn DisplayMemberBinding="{Binding Path=MinimumMonths}" Header="Length of continuous months" />
                <GridViewColumn DisplayMemberBinding="{Binding Path=CorrelatedWells}" Header="Correlated wells" />
                    <GridViewColumn Header="Excluded Wells">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel>
                                    <ItemsControl ItemsSource="{Binding Path=ExcludedWells}">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <WrapPanel Orientation="Vertical"/>
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel>
                                                    <TextBlock Text="{Binding}"/>
                                                </StackPanel>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </StackPanel>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
        </ListView.View>
    </ListView> 
```

它看起来像：

[http://tinypic.com/view.php?pic=xpse8n&s=6](http://tinypic.com/view.php?pic=xpse8n&s=6)

问题是井名下是否有一个容易分组的“Test1”按钮（例如，5 个项目的组），因为井名的体积可能很大，水平或垂直包装都没有帮助。

非常感谢，埃利亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:49:47.993

好吧，您始终可以向 ViewModel 添加新属性

```
 public IEnumerable<Well> SomeWells
 { get { return Wells.Take(5); } 
```

并更改您的 ItemsSource 绑定以改用它。

[MSDN](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28%22SYSTEM.LINQ.ENUMERABLE.TAKE%60%601%22%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)上的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:59:36.993

您可以使用 ListBox 让用户滚动浏览按钮，例如：

```
<GridViewColumn Header="Well names" Width="175">
     <GridViewColumn.CellTemplate>
           <DataTemplate>
                <ListBox>
                     <ListBox.ItemTemplate>
                          <DataTemplate>
                               <Button></Button>
                          </DataTemplate>
                     </ListBox.ItemTemplate>
                </ListBox>
           </DataTemplate>
    </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T14:34:46.367

我不是 100% 确定你在问什么，但听起来你想要连续 5 个按钮，并且每 5 个按钮自动换行到下一行。

要使其与 a 一起使用`WrapPanel`，您应该为面板提供`Width`5x 宽度的按钮，以便绘制其中的 5 个，然后换行到下一行

```
<ItemsPanelTemplate>
    <WrapPanel Width="300" Orientation="Vertical"/>
</ItemsPanelTemplate> 
```

如果您提前不知道按钮宽度，另一种选择是使用`UniformGrid`5 列的 a。我认为您还需要将 Row 计数设置为比您期望的集合更大的值

```
<ItemsPanelTemplate>
    <UniformGrid Columns="5" Rows="100" />
</ItemsPanelTemplate> 
```

定义行数的另一种方法是在数据模型中公开一个包含您需要的行数的属性，并将 Rows 属性绑定到它。

```
<ItemsPanelTemplate>
    <UniformGrid Columns="5" Rows="{Binding RowCount}" />
</ItemsPanelTemplate> 
```

我不记得是否`UniformGrid.Rows`是 DependencyProperty，但如果不是，那么您可以创建一个`AttachedProperty`您可以绑定的替代品，这将修改该`UniformGrid.Rows`属性（例如，请参阅[此代码以获取 Grid's Rows and Columns 的 Attached Properties](https://rachel53461.wordpress.com/2011/09/17/wpf-grids-rowcolumn-count-properties/)）

# jquery - JQuery Post 的问题

> ID：12622563
> 
> 赞同：0
> 
> 时间：2012-09-27T13:29:20.353
> 
> 标签：jquery

我有以下代码

```
$(".momentoCommentArea").on('keypress',function(event) {
    console.log(event.which); //mypublicpost.js:42
    if (event.keyCode == 13) { //enterkey //mypublicpost.js:43
        var message = $(".momentoCommentArea").val(); //mypublicpost.js:44
        //mypublicpost.js:44
        $.post('momento/newComment',  //mypublicpost.js:46
                    {'picaid':currentFid,'msg':message},
                    function(data){
                var tComment=$("<div></div>").addClass('momento-comment');
                var imgUrl=$("#siddlb-comments").children(".momento-comment").children('.momento-comment-img').children('img').attr('src');
                $("<div></div>").addClass('momento-comment-img').html('<img src="'+imgUrl+'" width="40" height="40" />').appendTo(tComment);
                $("<div></div>").addClass('momento-comment-comment').html("<b>"+$("#membername").html()+"</b><br/>"+message).appendTo(tComment);
                $("<div></div>").addClass('momento-comment-date').html('This seccion').appendTo(tComment);
                $("#momento-comments > div.momento-comment:first").before(tComment);
        });
    }
}); 
```

运行代码（在 textarea 中输入文本并按 Enter）会生成以下错误：

```
Uncaught TypeError: Illegal invocation jquery-1.7.2.js:7740
  jQuery.extend.param.add jquery-1.7.2.js:7740
  buildParams jquery-1.7.2.js:7797
  buildParams jquery-1.7.2.js:7792
  buildParams jquery-1.7.2.js:7792
  buildParams jquery-1.7.2.js:7792
  buildParams jquery-1.7.2.js:7792
  buildParams jquery-1.7.2.js:7792
  buildParams jquery-1.7.2.js:7792
  jQuery.extend.param jquery-1.7.2.js:7760
  jQuery.extend.ajax jquery-1.7.2.js:7606
  jQuery.each.jQuery.(anonymous function) jquery-1.7.2.js:7245
  (anonymous function) mypublicpost.js:45  //EDIT: line 45 is $.post line
  jQuery.event.dispatch jquery-1.7.2.js:3332
  jQuery.event.add.elemData.handle.eventHandle 
```

有人可以建议该错误的含义以及我应该如何解决该错误？

**编辑**

chrome中的开发工具截图

![在此处输入图像描述](../Images/8a225a05eeb9b61e4105d8f665d459d7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:00:12.713

以上评论总结：

这似乎是一个提供给 JSON 数据的非法变量的简单案例......带有相当广泛的错误消息。

# implementation - IDataObject::SetData(ref FORMATETC formatetc, ref STGMEDIUM stgmedium, bool param) 在 C# 中的实现

> ID：12622567
> 
> 赞同：0
> 
> 时间：2012-09-27T13:29:35.857
> 
> 标签：implementation

我已经花了几个小时来寻找如何做到这一点的答案，但我在其他论坛上没有找到任何回复。谁能告诉我如何将这些数据对象形成为结构：FORMATETC，STGMEDIUM？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T07:30:18.187

我想获得相同的信息，但没有 OLE 复制/粘贴的好例子。这是一个可以提供帮助的链接：[实现 IDataObject](http://www.catch22.net/tuts/implementing-idataobject)。请注意，这是在 C++ 中。有关 C# 版本，请参阅 MSDN 链接。

希望这可以帮助。我还在 MSDN 上发布了类似的 OLE 复制问题，可能会得到回答，所以我在这里发布链接：[MSDN Question](http://social.msdn.microsoft.com/Forums/windowsdesktop/en-US/e09287f4-95e2-4393-92d6-08324c719a93/how-to-copy-data-to-ole-clipboard-that-can-be-pasted-as-embedded-object#c16e18c8-ff88-4650-aebc-cf612082bb21)

# asp.net-mvc - 如果我直接从 IEnumerable 映射到 IEnumerable，为什么会得到奇怪的 AutoMapped 结果？

> ID：12622569
> 
> 赞同：0
> 
> 时间：2012-09-27T13:29:39.703
> 
> 标签：asp.net-mvc, automapper, automapper-2

我对 AutoMapper 有一个奇怪的问题。

如果我执行以下操作

```
//Get my entities from EF repository
var movements = _movementRepository.AllIncluding(movement => movement.Asset, movement => movement.Job,movement => movement.Asset.MinorEquipmentType);
var model = new List<AssetMovementDetail>();
foreach (var assetMovementDetail in movements)
{
     model.Add(Mapper.Map<AssetMovementDetail>(assetMovementDetail));
} 
```

如果我期望的话，这可以完美地工作并给我结果。

如果或者我更改要生成的模型，例如：

```
var model = Mapper.Map<List<AssetMovementDetail>>(movements); 
```

结果不同，结果总数相同，但许多结果彼此重复，而其他结果则缺失。难道我做错了什么？这不是它应该如何工作的吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:36:24.967

您需要将列表映射到列表，而不是自动从一个列表中获取映射......因此出现意外的行为。要了解我的意思，请查看此帖子：[使用 Automapper 映射列表](https://stackoverflow.com/questions/5589471/mapping-lists-using-automapper)

**编辑**

也许您有与那里回答的相同问题？[AutoMapper map 中的 foreach 中的额外迭代](https://stackoverflow.com/questions/6460177/extra-iterations-in-a-foreach-in-an-automapper-map)。请看一下，也许它可以解决，或者给你一些想法？

它也可能与您初始 linq 语句中的*延迟（延迟）加载有关。*

**编辑 2**

这是我自己的项目中的代码，它成功地完成了您尝试做的事情：

```
var dbResources = _db.GetResourcesForBusiness();
var vmResources = Mapper.Map<IEnumerable<DBResource>, IEnumerable<VMResource>>(dbResources); 
```

与您使用的相比，它的一次拍摄交易格式有点不同，尝试使用它，看看它是否适合您。

希望这可以帮助！

# powerpivot - 如何从不同的表中添加两个具有相同名称的列

> ID：12622574
> 
> 赞同：0
> 
> 时间：2012-09-27T13:29:45.583
> 
> 标签：powerpivot

如何从不同的表中添加两个具有相同名称的 cloumns。它需要是动态的，因为我有基于月份的列。下面是样本数据。我将用它来计算 12 个月的移动平均流失率。

```
Transferout    Oct'11   Nov'11
3310ED      
3310FL      
3310HD      1
3310PZ      
3310RC       
3310SH      
3310SM      1 

Terinations Oct'11  Nov'11
3310ED      
3310FL      
3310HD      1 
3310PZ      1 
3310RC 
```

因此，根据行字段中的列名和部门 ID，需要添加上述两个表，然后在差异表中使用相同的列标题除以各自部门 ID 的人数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:37:33.793

看起来您可以使用[LOOKUPVALUE](http://technet.microsoft.com/en-us/library/gg492170.aspx)函数或[RELATED](http://technet.microsoft.com/en-us/library/ee634202.aspx)函数（如果表是相关的）。

# php - 获取要执行的基本 PDO 语句

> ID：12622576
> 
> 赞同：1
> 
> 时间：2012-09-27T13:29:47.283
> 
> 标签：php, pdo

我正在尝试使以下 PDO 语句正常工作并遇到问题。当我试图获取行数时，我一直得到 0，但我知道应该有 1 行。当我将它作为 mysqli 语句运行时（在尝试将其更改为 PDO 之前），它运行良好。这是代码：

```
 require_once ('pdo.php');
$isbn = $_POST['isbn'];
    // check to see if the isbn is a "problem" isbn or not
$problem = $conn->prepare("select isbn, note from problem where isbn = :isbn");
$problem->bindParam(":isbn", $isbn);
$problem->execute();
print_r($problem);

$num_rows = $problem->rowCount();

print_r($num_rows); die; 
```

编辑：这是 pdo.php：

```
 <?php

function db_connect()
{ 
$db = new PDO("mysql:host=localhost; db=bookcell_BCOS_final", "xxxxx", "xxxxx");
return($db);
}
?> 
```

我知道我的连接有效，但我得到 $num_rows 的 0。我在这里犯了什么错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:37:33.827

除了一点点怪癖和优化之外，您的代码对我来说看起来还不错。发布的值`isbn`可能是您没有获得数据的原因：

```
$problem = $conn->prepare("select isbn, note from problem where isbn = :isbn"); 
$problem->bindParam(":isbn", $_POST['isbn'], PDO::PARAM_STR); // <-- thats what parameter binding is for 
$problem->execute(); 
print_r($problem); 

$num_rows = $problem->rowCount(); // <-- gives the number of rows, not columnCOunt 

print_r($num_rows); die; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:35:35.763

for 的语法`$num_rows = $problem->columnCount();`是完全正确的。你可以试试，

```
$problem->execute(array("isbn" => $isbn)); 
```

而不是`bindParam`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:39:02.813

为了获得否。行数，您需要在此处使用`pdo::rowCount()`--[手动](http://php.net/manual/en/pdostatement.rowcount.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T13:40:17.600

在 PDO 中验证您的[`execute`语句](http://php.net/manual/en/pdostatement.execute.php)是否有效，检查返回值（布尔值）：

```
$success = $problem->execute();

if (!$success) {
    $arr = $problem->errorInfo();
    print_r($arr);
} 
```

此外，您可能正在寻找`rowCount()`而不是，`columnCount()`但我认为错误处理是您最关心的问题。

此外，您可以让 PDO 在每次出现错误时抛出异常，比较：

*   [从 PHP 的 mysql 扩展切换到 PDO。扩展类以减少代码行](https://stackoverflow.com/questions/12183695/switching-from-phps-mysql-extension-to-pdo-extend-class-to-reduce-lines-of-cod/12192062#12192062)
*   [如何引发 PDOException？](https://stackoverflow.com/questions/11050736/how-do-i-raise-pdoexception)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T13:42:25.777

根据数据库驱动程序及其运行的模式，PDO 可能无法为您提供行数。仔细查看[文档`PDOStatement::rowCount()`](http://php.net/manual/en/pdostatement.rowcount.php)：

> 如果关联 PDOStatement 执行的最后一条 SQL 语句是 SELECT 语句，则某些数据库可能会返回该语句返回的行数。**但是，不能保证所有数据库都具有此行为，并且不应依赖于可移植应用程序。**

这是因为在许多情况下，数据库使用游标而不是获取完整结果并缓冲它们（这是旧`mysql_*`函数的行为方式）。在这种情况下，数据库不知道有多少行，直到您查看了所有行。将游标想象成文件系统指针之类的东西——在寻找文件末尾之前，您无法知道文件大小。

# jquery - 使用jQuery根据其他元素动态定位元素

> ID：12622577
> 
> 赞同：1
> 
> 时间：2012-09-27T13:29:47.037
> 
> 标签：jquery, css

我想使用 jQuery 在包含 h3 的 div 上动态设置顶部位置。链接是我想要完成的图像。

在那张图片中，顶部：标题上的 div（绿色 h3s）是绝对定位的，硬编码顶部为 590。如果锦标赛规模从未改变（8、4、2、1），这很有效——但有些锦标赛只有两轮（3场比赛），标题明显落在页面下方。

在括号中，我在每个中间点添加了 round-title-before 和 round-title-after 类，因此我可以看到/指示它们之间要显示一个标题。

有没有办法用 .position() 或 .height() 计算 .round-title-before 和 .round-title-after 之间的差异，以正确定位#title div，使其始终居中或靠近中心有多少或几场比赛？附上第二张图片作为小型锦标赛的示例。

**大型赛事：**

![比赛支架](../Images/99a747a5c28789c928f4281cdeb24cbe.png)

=========================

**小型比赛：**

![比赛支架较小](../Images/fe4978c6a0dd8ffed5d49bf174426950.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:34:43.807

在我看来，您应该结合使用 jqueryui 的位置功能并将每个括号放入容器中。容器的高度将等于总高度，您可以使用上述 jqueryui 位置功能相对于容器垂直居中（我想在 x 轴的右侧）。

# python - wxpython/wxwizard 仪表问题

> ID：12622579
> 
> 赞同：0
> 
> 时间：2012-09-27T13:29:48.807
> 
> 标签：python, wxpython, gauge

我正在尝试在我正在编写的 wxpython 应用程序中的一个页面中添加一个仪表。

我的标准 python 代码会读取一个包含 zip 文件的文件夹并写入 CSV。

我有两个问题，如何使仪表的范围与找到的文件数相匹配，其次如何将仪表的值设置为处理的文件数。

我的整个代码如下。

所以我在我的第 3 页上设置了一个仪表，当 convertFiles 运行时，我希望仪表更新为计数值。

我已经尝试了很多教程并获得了很多

未定义对象进度

我真的很感激任何帮助

谢谢

```
import wx
import wx.wizard as wiz
import sys
import glob
import os
import csv
import zipfile
import StringIO
from datetime import datetime

fileList = []
fileCount = 0
chosepath = ''
filecounter = 0
totalfiles = 0
count=0
saveout = sys.stdout
#############################

class TitledPage(wiz.WizardPageSimple):

    #----------------------------------------

    def __init__(self, parent, title):

        wiz.WizardPageSimple.__init__(self, parent)

        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.SetSizer(self.sizer)

        title = wx.StaticText(self, -1, title)
        title.SetFont(wx.Font(16, wx.SWISS, wx.NORMAL, wx.BOLD))
        self.sizer.Add(title, 0, wx.ALIGN_LEFT|wx.ALL, 5)
        self.sizer.Add(wx.StaticLine(self, -1), 0, wx.EXPAND|wx.ALL, 5)

def main():

    wizard = wx.wizard.Wizard(None, -1, "Translator")
    page1 = TitledPage(wizard, "Welcome to the Translator")
    introText = wx.StaticText(page1, -1, label="This application will help translate from the \nmany ZIP files into seperate CSV files of the individul feature \nrecord types.\n\n\nPlease follow the instrcutions on each page carefully.\n\n\nClick NEXT to Begin")
    introText.SetFont(wx.Font(12, wx.DEFAULT, wx.NORMAL, wx.NORMAL))
    page1.sizer.Add(introText)

    page2 = TitledPage(wizard, "Find Data")
    browseText = wx.StaticText(page2, -1, label="Click the Browse Button below to find the folder of ZIP files")
    browseText.SetFont(wx.Font(11, wx.DEFAULT, wx.NORMAL, wx.NORMAL))
    page2.sizer.Add(browseText)

    zip = wx.Bitmap("zip.png", wx.BITMAP_TYPE_PNG)#.ConvertToBitmap()
    browseButton = wx.BitmapButton(page2, -1, zip, pos=(50,100))    
    wizard.Bind(wx.EVT_BUTTON, buttonClick, browseButton)

    filelist = wx.TextCtrl(page2, size=(250,138), pos=(225, 100), style = wx.TE_MULTILINE|wx.TE_READONLY|wx.HSCROLL)
    redir=RedirectText(filelist)
    sys.stdout=redir    

    page3 = TitledPage(wizard, "Convert ZIP Files to CSV files")
    listfilesText = wx.StaticText(page3, -1, label="Click the following button to process the ZIP files")
    listfilesText.SetFont(wx.Font(11, wx.DEFAULT, wx.NORMAL, wx.NORMAL))
    page3.sizer.Add(listfilesText)

    convert = wx.Image("convert.png", wx.BITMAP_TYPE_PNG).ConvertToBitmap()
    convertButton = wx.BitmapButton(page3, -1, convert, pos=(50,100))
    wizard.Bind(wx.EVT_BUTTON, convertFiles, convertButton)

    wizard.progress = wx.Gauge(page3, range=totalfiles, size=(250,25), pos=(225,150))
    wizard.progress.SetValue(0)

    wizard.FitToPage(page1)
    wx.wizard.WizardPageSimple.Chain(page1, page2)
    wx.wizard.WizardPageSimple.Chain(page2, page3)

    wizard.RunWizard(page1)

    wizard.Destroy()

def convertFiles(wizard, count=0):

    for name in fileList:
        base = os.path.basename(name)
        filename = os.path.splitext(base)[0]            

        dataFile = filename
        dataDirectory = os.path.abspath(chosepath)
        archive = '.'.join([filename, 'zip'])
        fullpath = ''.join([dataDirectory,"\\",archive])
        csv_file = '.'.join([dataFile, 'csv'])

        filehandle = open(fullpath, 'rb')
        zfile = zipfile.ZipFile(filehandle)
        data = StringIO.StringIO(zfile.read(csv_file)) 
        reader = csv.reader(data)

        for row in reader:
            type = row[0]
            if "10" in type:
                write10.writerow(row)
            elif "11" in type:
                write11.writerow(row)

        data.close()
        count = count +1

        print ("Processing file number %s out of %s")%(count,totalfiles)

        wizard.progress.SetValue(count)#this is where I thought the SetValue would work

    print ("Processing files completed, time taken: ")
    print(datetime.now()-startTime)
    print "Please now close the appplication"

def folderdialog():
    dialog = wx.DirDialog(None, "Choose a directory", style=1 )
    if dialog.ShowModal() == wx.ID_OK:
        chosepath = dialog.GetPath()
    dialog.Destroy()
    return chosepath

def buttonClick(self):
    global chosepath
    chosepath = folderdialog()
    print ("The folder picked was")
    print chosepath

    for dirname, dirnames, filenames in os.walk(chosepath):
        for filename in filenames:
            if filename.endswith((".zip")):
                fileList.append(filename)

                print (filename)

    global totalfiles
    totalfiles = len(fileList)
    print "Total Number of files found :", totalfiles

class RedirectText:
    def __init__(self,textDisplay):
        self.out=textDisplay

    def write(self,string):
        self.out.WriteText(string)

if __name__ == "__main__":
    app = wx.App(False)
    main()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:42:24.667

如果您想计算在目录中找到的文件，我喜欢使用 Python 的 glob 模块。它返回一个结果列表，您可以获取其中的长度。如果您想要 zip 文件中的文件数量，我认为您可以使用 Python 的 zipfile 模块通过 namelist() 方法将其拉出。

现在已经不碍事了，您可以创建 wx.Gauge 小部件，其中文件列表的长度作为 Gauge 的“范围”参数。然后在您的 convertFiles() 方法结束时，您只需调用仪表的 SetValue() 方法。wxPython 演示有一个示例。

# machine-learning - 文件路径名或 URL 分析

> ID：12622581
> 
> 赞同：2
> 
> 时间：2012-09-27T13:29:54.393
> 
> 标签：machine-learning

我正在寻找有关分析文件路径名的工具、方法和技术的信息。我不是在谈论文件大小、读/写时间或文件类型，而是分析它自身的路径或 URL。

我只知道基本的词频文本工具或方法，但我想知道人们是否使用/应用更高级的东西来尝试从中挖掘额外的信息。

谢谢！

更新：

这是我想要的最狭窄的例子。好的，所以我有一些完整的路径名作为字符串，如下所示：

```
F:\Task_Order_Projects\TO_01_NYS\Models\MapShedMaps\Random_File1.doc
F:\Task_Order_Projects\TO_01_NYS\Models\MapShedMaps\Random_File2.doc
F:\Task_Order_Projects\TO_01_NYS\Models\MapShedMaps\Random_File3.doc
F:\Task_Order_Projects\TO_01_NYS\Models\MapShedMaps\Random_File4.doc
F:\Task_Order_Projects\TO_01_NYS\Models\MapShedMaps\Random_File5.doc

F:\Task_Order_Projects\TO_02_NYS\Models\MapShedMaps\Random_File1.doc
F:\Task_Order_Projects\TO_02_NYS\Models\MapShedMaps\Random_File2.doc
F:\Task_Order_Projects\TO_02_NYS\Models\MapShedMaps\Random_File3.doc
F:\Task_Order_Projects\TO_02_NYS\Models\MapShedMaps\Random_File4.doc
F:\Task_Order_Projects\TO_02_NYS\Models\MapShedMaps\Random_File5.doc 
```

我想知道的是 MapShedMaps 文件夹“唯一”出现了 2 次。如果我在弦上做频率，我会得到 10 次出场。问题是我不知道目录中的哪个级别很重要，因此我希望根据我所描述的内容在目录的每个级别上都有一个唯一计数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:00:55.270

这是一个非常广泛的问题，所以我很难给你一个“答案”，但我会给你我的第一个想法。

第一的，

.NET 的正则表达式类对于解析大量信息非常有用。它非常强大，很容易让不耐烦的人感到困惑，但是一旦掌握了它，它就可以在文本编辑器、.NET 和我相信的几乎任何其他受人尊敬的语言中使用。这将允许您搜索字符串并将其分隔到目录中。这可能是矫枉过正，具体取决于您如何使用它，但这是一个想法。[这是我最喜欢的链接，用于尝试一些正则表达式。](http://www.ultrapico.com/Expresso.htm)

第二，

您将需要一个数据库，我更喜欢使用 SQL。研究如何连接到数据库和创建数据库。使用此数据库，您可以存储从输入的原始路径中提取的所有字段。比如父目录、子目录、访问的常用文件类型。只需为其中的每一个设置一个字段，通过查询，您就可以形成关于冗余的假设。

第三，

我不知道它是否易于访问，但您可能会查看 Windows 是否存储访问的文件历史记录。它似乎对过去打开了哪些文件有所了解。因此，Windows 中可能有一个资源已经存储了您将存储在数据库中的大部分信息。如果您能找到访问此信息的方法。使用正则表达式对其进行解析，然后将其重新提交到应用程序的数据库中。你可以控制世界！j/k... 不过，您可以对用户访问模式有一个很好的预测。

第四，

我总是尝试坚持我现有的东西。如果 .NET 摆在您面前，请认真对待您想要做的事情。如果你到达一堵墙。至少你在进步。在当今面向对象编程的运动中，您通常可以将一个程序收集的数据更改为另一个程序可接受的格式。你只需要挖一点。

哦，顺便说一句，[Coursera.com](https://www.coursera.org/courses)实际上正在开设关于机器学习和算法的免费课程。您可能想查看或参考它以获取预测公式。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:33:08.060

我想将此作为评论发布，但因此一直将双 \ 编辑为 \ 并且重要的是有两个，因为 \ 是一个关键字符，没有另一个 \ 来转义它，正则表达式会将其解释为命令。

嘿，我只是想让你知道我一直在玩一些正则表达式......我知道在 VB.net 中编写代码的一种非常简单的方法，我将把它作为我的第二个答案发布，但我想让你看看反向引用。如果括号之间的部分匹配，它会捕获该文本并继续进行第二个查询，例如......

```
F:\\(directory1)?(directory2)?(directory3)? 
```

您可以使用这些匹配项来找出每个父目录下有多少个目录。你正在跟着我吗？[这是一个参考。](http://www.regular-expressions.info/brackets.html)

# c++ - 链接到多个项目时的多个全局数据实例

> ID：12622582
> 
> 赞同：3
> 
> 时间：2012-09-27T13:30:00.297
> 
> 标签：c++, linker, extern

我有一个 Visual C++ 解决方案，它由 3 个项目组成。

其中一个项目，项目“A”被其他两个项目使用，它有一些应该始终相同的全局数据。

但是，当我将项目 A 链接到其他两个项目时，似乎项目 A 的两个实例正在处理不同的数据。

可能是这种情况吗？如何设置链接过程以防止这种情况发生？

--- 更新让事情更清楚

```
- Project 1 -

main () {
  init();
  test();
}

- Project 2 -

test () {
  cout << get_data();
}

- Project A -

int data;

init() {
  data = 123;
}

get_data() {
  return data;
} 
```

* * *

正如您在这个例子中看到的那样，我正在第一个项目中初始化项目 A 的数据，并从第二个项目中访问它。我的观察是，当第二个项目的访问发生时，数据没有初始化。

项目 A 和 2 都静态链接到项目 1，因此输出是单个可执行文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:32:17.597

全局驻留在进程内存空间中的单个位置。如果您有两个共享一个模块的进程，它们每个都有单独的变量，是的。

您需要使用 IPC 在进程之间共享数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:31:12.803

静态库中项目 A 的符号分别链接到项目 1 和项目 2。将它们合并涉及特定于编译器的机制。

基本上，您必须让项目 2 重新导出项目 A 的符号，并让项目 1 导入这些符号，而不是直接导入项目 A。

如果您不能这样做（例如，因为您无法控制项目 1 或项目 2），则必须在项目 A 中编写解决方法。一种选择（通常最简单）是将项目 A 转换为动态库。然后项目 1 和 2 都加载项目 A 的同一个实例并共享数据。

另一种选择是更改项目 A 使其没有全局变量，而是注册一个包含所需数据的流程全局数据项；例如，您可以滥用本地原子表 [1] 来存储指向动态内存的指针。

[1] [http://msdn.microsoft.com/en-us/library/windows/desktop/ms649053%28v=vs.85%29.aspx#_win32_Integer_Atoms](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649053%28v=vs.85%29.aspx#_win32_Integer_Atoms)

# bash - 如何拦截包含特定字符串的命令？

> ID：12622583
> 
> 赞同：0
> 
> 时间：2012-09-27T13:30:01.850
> 
> 标签：bash

有时，我碰巧正在执行某些命令，然后才意识到我向命令发送了错误的参数（例如重新启动 Heroku 应用程序）。我想修改 bash，如果它看到包含某个字符串的命令，它会提示我是否确定。例如（想象字符串是 tempus ）：

```
$ heroku restart --app tempus 
```

现在，我希望 bash 使用 Y/N 提示来提示我，如果我键入`y`，那么我希望它执行命令。如果我键入 N，则不会执行该命令。我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T13:58:30.290

我不知道有什么方法可以拦截所有 bash 命令，但是您可以使用以下技巧拦截预定的命令。

1.  创建一个目录（比如`~/interception`）并将其设置为第一个条目`$PATH`
2.  在该目录中创建以下脚本，其中包含您希望拦截的命令列表以及实际命令的完整路径

    ```
    [bash]$ cat intercept.sh
    #!/bin/bash

    # map commands to full path
    declare -A COMMANDS
    COMMANDS[heroku]=/usr/bin/heroku
    COMMANDS[grep]=/bin/grep
    # ... more ...

    CMD=$(basename $0)  # command used to call this script

    if [[ ! -z "${COMMANDS[$CMD]+x}" ]]; then  # mapping found
      # Do what you wish here. You can even modify/inspect the params.
      echo "intercepted $CMD command... "

      ${COMMANDS[$CMD]} $@   # run actual command with all params
    else
      echo "Unknown command $CMD"
    fi 
    ```

3.  在同一目录中，使用您希望拦截的命令的名称创建指向该脚本的符号链接

    ```
    [bash]$ ln -s intercept.sh grep
    [bash]$ ln -s intercept.sh heroku 
    ```

现在，每次调用命令时，都会通过符号链接调用该脚本，然后它可以在调用实际命令之前执行您的出价。

您可以通过`$COMMANDS`从配置文件中获取并创建辅助命令来进一步扩展此配置文件并创建/删除符号链接。然后，您将能够使用以下命令管理谁设置：

```
intercept_add `which heroku`
intercept_remove heroku
intercept_list 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T15:23:12.257

因为 bash 本身不支持命令行过滤，所以无法拦截命令。

这是一个肮脏的解决方案：

1.  查找 PATH 中的所有可执行文件并为每个可执行文件创建包装函数。
2.  包装函数然后调用`prefilter()`函数，如果它被声明。
3.  如果`prefilter()`函数失败，则取消该命令。

来源：cmd-wrap.sh

```
#!/bin/bash  # The shebang is only useful for debug. Don't execute this script.

function create_wrapper() {
    local exe="$1"
    local name="${exe##*/}"

    # Only create wrappers for non-builtin commands
    [ `type -t "$name"` = 'file' ] || return

    # echo "Create command wrapper for $exe"
    eval "
    function $name() {\
        if [ \"\$(type -t prefilter)\" = 'function' ]; then \
            prefilter \"$name\" \"\$@\" || return; \
        fi; \
        $exe \"\$@\";
    }"
}
# It's also possible to add pre/post hookers by install
#   [ `type -t \"$name-pre\"` = 'function' ] && \"$name-pre\" \"\$@\"
# into the dynamic generated function body.

function _create_wrappers() {
    local paths="$PATH"
    local path
    local f n

    while [ -n "$paths" ]; do
        path="${paths%%:*}"
        if [ "$path" = "$paths" ]; then
            paths=
        else
            paths="${paths#*:}"
        fi

        # For each path element:
        for f in "$path"/*; do
            if [ -x "$f" ]; then
                # Don't create wrapper for strange command names.
                n="${f##*/}"
                [ -n "${n//[a-zA-Z_-]/}" ] || create_wrapper "$f"
            fi
        done
    done

    unset _create_wrappers  # Remove the installer.
    unset create_wrapper    # Remove the helper fn, which isn't used anymore.
}

_create_wrappers 
```

要将它用于您的问题：

1.  在 bash 中获取它：

    ```
    . ./cmd-wrap.sh 
    ```

2.  创建您的版本`prefilter()`以检查是否有任何参数包含该字符串：

    ```
    function prefilter() {
        local a y
        for a in "$@"; do
            if [ "$a" != "${a/tempus}" ]; then
                echo -n "WARNING: The command contains tempus. Continue?"
                read y
                [ "$y" = 'Y' ] || [ "$y" = 'y' ]
                return $?
            fi
        done
        return 0
    } 
    ```

3.  跑

    ```
    heroku restart --app tempus 
    ```

    但不是

    ```
    /usr/bin/heroku restart --app tempus 
    ```

    使用包装器功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T18:09:37.187

最简单的方法是使用别名。这个简单的例子应该适合你：

这可以防止在参数中使用 tempus 执行 heroku 命令

```
function protect_heroku {
    # use grep to determine if the bad string is in arguments
    echo "$*" | grep tempus > /dev/null
    # if string is not in arguments
    if [ $? != 0 ]; then
        # run the protected command using its full path, so as not to trigger alias
        /path/to/heroku "$@"
    else
        # get user confirmation
        echo -n Are you sure \(y/n\)?' '
        read CONFIRM
        if [ "$CONFIRM" = y ]; then
            # run the protected command using its full path
            /path/to/heroku "$@"
        fi
    fi
}

# This is the key:
# This alias command means that 'heroku' from now refers
# to the function protect_heroku, rather than /bin/heroku
alias heroku=protect_heroku 
```

将此代码放入您的 bash 配置文件 ~/.profile，然后注销并重新登录。从现在开始，bash 将保护您免于意外使用 tempus 运行 heroku。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T13:37:51.813

最简单的方法是替换`heroku`为在执行真正的heroku 之前进行检查的脚本。另一种方法是为`heroku`.

# java - jtable单元格中的按钮和文本框对齐

> ID：12622585
> 
> 赞同：1
> 
> 时间：2012-09-27T13:30:12.117
> 
> 标签：java, swing, jtable, layout-manager, tablecellrenderer

我有一个表格，在某些单元格中同时包含按钮和文本框。现在我可以将这两个组件都放在表格单元格中。感谢[OscarRyz 的](https://stackoverflow.com/questions/2069641/adding-buttons-inside-cell-of-jtable-along-with-data.)代码。现在我的问题是我必须对齐这些组件，以便按钮位于单元格的最右侧，并且文本框应该从单元格的最左侧开始到按钮的开头。（简单来说，它们应该彼此相邻并占据整个单元格。）如何在单元格内对齐它们？

目前它看起来像这样，

![在此处输入图像描述](../Images/2af6121771d51d81092b48756f6f701a.png)

但我正在寻找的是这样的观点，

![在此处输入图像描述](../Images/43571f984664fa6a7623434cd2190b79.png)

我查看了[组件边框](http://tips4java.wordpress.com/2009/09/27/component-border/)代码，但不知道如何将它用于表格。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T13:33:02.273

A `JPanel`with `BorderLayout`where you put the `JTextField`in the`BorderLayout.CENTER`和 the `JButton`in the`BorderLayout.EAST`应该这样做。

并供将来参考：如果您正在寻找[布局管理器的视觉指南，请将其添加为书签](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)`LayoutManager`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T13:37:45.967

*   `JPanel`然后已经实施`FlowLayout`到相当接受`PreferredSize`来自它的孩子，

*   注意一切都取决于你`TableCellRenderer`和`TableCellEditor`太

*   [我的观点，我的榜样](https://stackoverflow.com/a/6355910/714968)

# perl - 如何将模块范围限制为子例程？

> ID：12622586
> 
> 赞同：4
> 
> 时间：2012-09-27T13:30:12.440
> 
> 标签：perl, scope

如果我运行下一个脚本：

```
use strict;
use warnings;

sub load {
    use File::Path qw (make_path);
}

load();
make_path('1/2/3/4');

exit 0; 
```

它完美地工作。我想将加载的模块的范围限制为子例程，以便我不能使用在加载它的子例程之外的模块中声明的子例程。可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T13:49:22.660

简短的回答：不，这不可能。

长答案：加载 File::Path 后，您无法阻止代码调用`File::Path::make_path()`，但您可以通过短名称限制它的可用范围。

```
use File::Path ();

sub load {
    local *make_path = \&File::Path::make_path;

    make_path('foo/bar/baz'); # This would work...
}

File::Path::make_path('bang/kapow'); # This would work too
make_path('xyxxy/plugh'); # But this would die 
```

但是通过使用`local`范围在词法上并不局限于语法代码块。它是动态范围的，这意味着所有被调用的代码`load()`也将被`make_path`视为一个工作子例程。

我建议不要使用这种技术，因为它有点晦涩，并且在远处可能会产生一些难以解释的副作用。我主要发现它对于编写单元测试很有用，它可以用来用模型替换某些功能。

Perl 开发人员正在讨论添加词法子作为语言的一部分。此功能应该让您几乎可以做任何您想做的事情，而不会出现使用`local`. 但这仍在进行中，甚至在 perl 的开发版本中都不可用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T13:36:01.317

简而言之：你不能。更糟糕的是，`use`它是在编译时执行的，所以你把它放在你的 sub 中没有任何区别（除了外观上的好处）。

# android - 在抖动时唤醒 Android 后台服务的巧妙方法

> ID：12622587
> 
> 赞同：0
> 
> 时间：2012-09-27T13:30:12.947
> 
> 标签：android, service, accelerometer, battery, background-service

我希望我的 Android 背景进入*睡眠*模式 -**但然后** *在用户开始移动时唤醒*。但是，如果我在[NORMAL](http://developer.android.com/reference/android/hardware/SensorManager.html#SENSOR_DELAY_NORMAL)模式下使用加速度计（最低采样率 ~ 5Hz），我担心它仍然会消耗太多功率。到目前为止，最好的方法是在[USER_PRESENT](http://developer.android.com/reference/android/content/Intent.html#ACTION_USER_PRESENT) - 屏幕打开并解锁。

甚至[屏幕上（可能存在键盘保护）](http://developer.android.com/reference/android/content/Intent.html#ACTION_SCREEN_ON)都不起作用，因为正如你们中的许多人可能知道的那样，那里有很多不良应用程序会保持唤醒锁并不时启动屏幕。

我正在考虑让用户按下音量增大/减小按钮..

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:28:42.763

不知道您是否仍在寻找一种方法来执行此操作，但我（偶然）发现您可以启动一个shakeListener，并且您的应用程序将获取事件，即使在后台也是如此。

（并且“偶然”，我的意思是我不希望我的应用程序播放它应该在应用程序在后台播放时播放的声音，但即使在后台有另一个应用程序，然后甚至把手机睡觉，当我把手机放在口袋里走路时，足以让应用程序在后台执行操作。）

```
 /**
     * load and set up the listener for shake detection
     */
    private void loadShaker() {
        mShaker = new ShakeListener(this);
        mShaker.setOnShakeListener(new ShakeListener.OnShakeListener () {
            public void onShake() { 
                if (!mActivityPaused)
                    performMyOperationCausedByShake();
                }
        });
    } 
```

您可能因此可以设置它，以便`performMyOperationCausedByShake()`执行导致您想要的活动发生的意图。

（对于您要查找的内容，这可能不够敏感……）

# android - 在Android中旋转后获取ViewPager的位置

> ID：12622588
> 
> 赞同：5
> 
> 时间：2012-09-27T13:30:15.517
> 
> 标签：android

我有一个 ViewPager。我的 FragmentPageAdapter 在 getItem() 方法中返回 Viewpager 的位置。但是在旋转屏幕后，方法不返回任何值。为什么？如果我理解正确，每次旋转屏幕时都会调用 OnCreateView()，但为什么它不再返回值？有人可以指出如何解决这个问题吗？谢谢

编辑：我的 FragmentPageAdapter：

```
public Fragment getItem(int position) {

   return Fragment_results.newInstance(position);
} 
```

我的片段：

```
public static Fragment_results newInstance(int i) {

    Fragment_results fragment = new Fragment_results();
    fragment.mContent = i +"";

    return fragment;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.layout_result, null);
    ((TextView) view.findViewById(R.id.text)).setText(mContent); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-27T13:51:01.953

在创建 ViewPager 实例以及设置新适配器时，该位置设置为 0。当`onCreateView()`被调用时，您实际上是在重建整个应用程序。为了恢复到原来的位置，您必须首先`onSavedInstanceState(Bundle savedInstanceState)`通过 Bundle 使用和存储项目位置。

```
@Override
protected void onSaveInstanceState(Bundle outState) {
  super.onSaveInstanceState(outState);
  outState.putInt("pageItem", myViewPager.getCurrentItem());
} 
```

然后在 中`onCreate`，恢复 viewPager 的状态，如下所示：

```
if (savedInstanceState != null) {
  myViewPager.setCurrentItem(savedInstanceState.getInt("pageItem", 0));
} 
```

# ruby - 如何在 Sinatra 应用程序中测试方法？

> ID：12622592
> 
> 赞同：1
> 
> 时间：2012-09-27T13:30:39.997
> 
> 标签：ruby, sinatra

如何访问应用程序实例以便测试 foobar() 方法？

```
class App < Sinatra::Base
  get '/' do
    return foobar
  end

  def foobar
    "hello world"
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-31T05:54:33.567

这是一个迟到的回复，但我也在努力寻找一种灵活的方式来做到这一点。

我在 Sinatra 的源代码 (1.4.5) 中发现创建应用程序实例`new!`允许直接测试应用程序的方法。使用 Test::Unit 和 Shoulda 从测试设置中发挥作用。

```
class AppTest < Test::Unit::TestCase
  setup do
    @app = App.new! # here is the point.
  end

  should 'say hello to the world' do
    assert_equal "hello world", @app.foobar  # or @app.send(:foobar) for private methods.
  end
end 
```

有后果。使用`new!`不会创建`Sinatra::Wrapper`成为[中间件管道和正常设置中的应用程序入口点的常规](https://github.com/sinatra/sinatra/blob/master/lib/sinatra/base.rb)。因此，`new!`只有当被测试的方法是真正不依赖中间件功能（例如 SSL）的“助手”时，该方法才有效。

或者，[Rspec 上的一篇文章](http://dev.mensfeld.pl/2014/06/testing-sinatra-application-methods-in-isolation-with-rspec/)提出了另一种解决方案。我过去使用过类似的东西，但它需要更多的工作，这并不总是最好的选择。它的优势在于提供更广泛的代码覆盖范围以进行测试。`new!`如果我们正在进行“单元”测试，那么将应用程序与应用程序隔离听起来不错。

注意@three 的评论：一个重要的应用程序应该将 API 方法（通常在应用程序中）与所有帮助程序等分开。帮助程序最终在一个单独的文件中更清洁、更易于维护和更易于测试。但我绝对理解应用程序的第一个版本将包含一些帮助程序的情况，并意识到重构是必要的。即便如此，进行测试也会让人们对软件本身以及未来的重构更有信心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T14:44:36.337

你测试什么并不重要 - 它是如何:) => [http://www.sinatrarb.com/testing.html](http://www.sinatrarb.com/testing.html)

# css - CSS 关键帧仅适用于 Chrome

> ID：12622598
> 
> 赞同：2
> 
> 时间：2012-09-27T13:30:57.513
> 
> 标签：css, css-animations

我正在尝试使用关键帧制作一个简单的动画，但它只适用于 Chrome。这是代码（我只包含了一次关键帧代码，用于较短的帖子）：

```
@keyframes logokf {
    0% {
    background-image: url('gfx/logo1.png');
    }    
    20% {
    background-image: url('gfx/logo2.png');
    }    
    40% {
    background-image: url('gfx/logo3.png');
    }    
    60% {
    background-image: url('gfx/logo4.png');
    }    
    80% {
    background-image: url('gfx/logo1.png');
    }    
    100% {
    background-image: url('gfx/logo1.png');
    }

}

@-webkit-keyframes logokf {    
}

@-moz-keyframes logokf {             
}

@-o-keyframes logokf { 
}

@-ms-keyframes logokf {
}

#logo:hover {
float: left;
height: 75px;
margin: 28px 0 22px;
width: 276px;

/*animation-name*/
-webkit-animation-name:logokf;
-moz-animation-name:logokf;
-ms-animation-name:logokf;
-o-animation-name:logokf;
animation-name:logokf;

/*animation-duration*/
-webkit-animation-duration:1s;
-moz-animation-duration:1s;
-ms-animation-duration:1s;
-o-animation-duration:1s;
animation-duration:1s;

/*animation-iteration-count*/
-webkit-animation-iteration-count:infinite;
-moz-animation-iteration-count:infinite;
-ms-animation-iteration-count:infinite;
-o-animation-iteration-count:infinite;
animation-iteration-count:infinite;

/*animation-timing-function*/
-webkit-animation-timing-function:lineare;
-moz-animation-timing-function:lineare;
-ms-animation-timing-function:lineare;
-o-animation-timing-function:lineare;
animation-timing-function:lineare;

/*animation-delay*/
-webkit-animation-delay:0s;
-moz-animation-delay:0s;
-ms-animation-delay:0s;
-o-animation-delay:0s;
animation-delay:0s;

 } 
```

关于如何修复它或其他浏览器尚不支持关键帧的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:47:49.250

background-image 本身似乎不是[有效的可转换属性。](http://www.w3.org/TR/css3-transitions/)它可能碰巧在 Chrome 中工作，但它可能只是幸运的。实现后，您将希望在 CSS 图像中使用[交叉淡入淡出功能。](http://peter.sh/files/examples/cross-fading.html)

# c# - 如何在c#中提取xml元素的路径？

> ID：12622600
> 
> 赞同：3
> 
> 时间：2012-09-27T13:31:19.043
> 
> 标签：c#, xml

我昨天问的一个关于如何使用路径访问元素的问题得到了这个答案-

有可能做相反的事情吗？意味着如果我使用 GetElementsByTagName 方法找到特定元素（xml 中的级别 4），是否有办法获取此元素的路径并将其分配给变量以供以后使用？

```
<?xml version="1.0" encoding="utf-8" ?>
<level1> 
    <level2> 
        <level3>header3</level3> 
            <level4>header4</level4> 
        <level3>header31</level3> 
    </level2> 
    <level2> 
        <level3>nnn</level3> 
        <level3>nnnnn</level3> 
    </level2> 
</level1> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:03:48.463

假设您已通过以下方式提取节点

> `XmlNodeList nl = doc.GetElementsByTagName("level4");`

然后

```
 XmlNode node = nl[0]; 
        String sPath = node.Name;
        System.Xml.XmlNode np = node.ParentNode;
        while (np != null && np.NodeType != XmlNodeType.Document)
        {
            sPath = String.Format("{0}/{1}", np.Name, sPath);
            np = np.ParentNode;
        }
        sPath = "/" + sPath;
        Debug.WriteLine(sPath); 
```

你得到“/level1/level2/level4”作为sPath的值

> *注意：这是正确的，因为在输入 XML 中**level3**是**level4**的 Sibling （不是 Parent ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:32:29.153

使用可以在 System.Xml 中找到的 XmlDocument 对象，然后使用 ParentNode 属性，直到您获得 null ParentNode。使用递归函数来实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:33:36.403

XmlElement 对象已经有一个指向父对象的指针，因此通过从父对象到祖父对象直到到达文档，您将获得相反的层次结构。

# image - 具有“lang”属性的“img”元素：图像本身的语言？

> ID：12622604
> 
> 赞同：7
> 
> 时间：2012-09-27T13:31:56.577
> 
> 标签：image, html, lang

（我对 HTML 4.01*和*HTML5 感兴趣，如果应该有区别的话）

`lang`元素上的属性是否也`img`适用于该`src`属性？还是仅针对`alt`and`title`属性？

例子：

```
<img src="example.png" alt="a red foobar" lang="en" /> 
```

图像“example.png”是否被认为是英文的？（想想论坛主题的屏幕截图，或单词的图形表示，或文档的扫描）

如果是真的，具有非语言内容的图像将需要获取`lang="zxx"`. 但这也适用于`alt`/`title`属性，这是不正确的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T16:28:14.060

[HTML 4.01 将](http://www.w3.org/TR/html401/struct/dirlang.html#adef-lang)属性定义`lang`为指定“元素属性值和文本内容的基本语言”，而[HTML5 将](http://www.w3.org/TR/html5/global-attributes.html#attr-lang)其定义为“元素内容和任何包含文本的元素属性的主要语言”。不同之处显然仅在于配方。该`lang`属性指定语言`alt`和`title`属性以及可能包含散文文本的其他属性，这与 URL 或`style`属性等类似代码的值相反，其中（人类）语言不适用。

从逻辑上讲，`src`属性本身不是任何（人类）语言。所以问题是`lang`属性是否扩展到由`src`属性表示的图像。这是一个相当理论化的问题——答案可能对软件行为产生什么影响？无论如何，答案取决于我们所理解的“文本内容”（图像在某种意义上是文本，在格式上，但可能 HTML 4.01 意味着仅引用实际的字符数据）和“元素的内容”（是图像的一部分）`img`元素的内容？）。总体而言，似乎无法在 HTML 中指定图像的语言（尽管是一个可行的概念）。

因此，无需担心带有非语言内容的图像。对于“非语言”的文本内容（即不是任何人类语言的文本，而是一些代码符号或随机字符序列），`lang=""`HTML5 推荐使用。这也是实用的方法。在少数情况下，whete`lang`属性有任何影响，如在自动断字中，`lang=""`实际上意味着没有应用语言规则（例如，没有断字）。这与省略属性不同，这意味着元素从其父元素继承语言信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T13:38:26.387

在 HTML 4.01 中，[第 13.8 节](http://www.w3.org/TR/html401/struct/objects.html#h-13.8)说：

> 替代文本的语言由`lang`属性指定。

在 HTML5 中，[它说](http://www.w3.org/TR/html-markup/global-attributes.html#common.attrs.lang)：

> 指定元素内容和包含文本的任何元素属性的主要语言。

我在当前的 HTML5 草案中找不到任何像 HTML 4.01 规范那样明确定义`alt`和属性之间关系的内容。`lang`希望稍后会澄清，但我现在假设没有任何变化，并且它*所做*的陈述同样适用。

`src`两个规范都没有说明和属性之间的明确关系`lang`，但我不会假设源图像本身的语言对应于`lang`属性，因为并非所有图像都具有语言内容（正如您所提到的）。

`title`和也是如此`lang`，但这可能取决于元素类型，我不完全确定。同样，它*在*上面的一般说明应该适用于`title`.

# iphone - 方法 UIToolbar.setItems 在 iOS 6 上不起作用

> ID：12622613
> 
> 赞同：0
> 
> 时间：2012-09-27T13:32:11.443
> 
> 标签：iphone, ipad, button, toolbar, ios6

我有以下代码在 iOS 5.1 上运行良好，可以替换工具栏上的按钮：

```
[(UIToolbar*)toolbar setItems:itemsArray]; 
```

但是编译后的应用程序在 iOS 6 上不起作用。我已经用 xXode 4.5 编译了支持 iOS 6 的源代码，但错误是一样的：

```
2012-09-27 16:31:13.537 Linux[2633:907] -[UIWebFormAccessory setItems:]: unrecognized selector sent to instance 0x1d886ad0
2012-09-27 16:31:13.540 Linux[2633:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIWebFormAccessory setItems:]: unrecognized selector sent to instance 0x1d886ad0'
*** First throw call stack:
(0x361032a3 0x3441397f 0x36106e07 0x36105531 0x3605cf68 0x775c5 0x33bbda6f 0x360d85df 0x360d8291 0x360d6f01 0x36049ebd 0x36049d49 0x365862eb 0x37428301 0x7538d 0x75328)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

如何解决问题？

链接问题：[如何在 iOS 6 上的 UIWebView 键盘下替换工具栏上的按钮？](https://stackoverflow.com/questions/12622931/how-to-replace-buttons-on-a-toolbar-under-uiwebview-keyboard-on-ios-6)

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:15:03.327

即使它是 a `UIToolbar`（可能不再是），您显然是在尝试调用一个不存在的方法（或“发送消息”）。解决方案是不要这样做，因为一旦你足够努力，该方法就不会凭空出现。

可能有另一种方法可以通过在此未记录类型上找到另一种拟合方法来继续执行您正在尝试做的事情。然而，也许有一天它也会像刚刚破裂的那样破裂。如果他们没有记录某些内容，是的，这意味着您仍然可以使用它（至少在您将其发送以供审查之前），但这也意味着它可能随时损坏。

一个长期的解决方案是找到一种方法来调出您自己可以控制的界面。知道你想在哪里集成，我认为这并不容易。我想我几天前在 Stack Overflow 上看到了另一个关于此的问题，说要检测触摸，停止编辑并自己接管 UI（尽管它在光标定位、复制/粘贴菜单等方面并不能很好地发挥作用） .

无论哪种方式，您都必须设计一个不那么脆弱的新解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:40:32.890

您确定这种特定情况下的工具栏实际上是 UIToolbar 吗？估计是选角问题。

我在我的一门课上做了以下事情，它绝对适用于 iOS6

```
NSMutableArray *items = [NSMutableArray arrayWithArray: self.topToolbar.items];
[items insertObject:barButtonItem
            atIndex:0];
self.topToolbar.items = items; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:59:44.480

UIWebFormAccessory 不是 iOS6 上的 UIToolbar。如果您想弄乱表单附件工具栏，请查看相关问题的“findVirginWebKeyboardToolbar”答案：[https ://stackoverflow.com/a/12865353/199267](https://stackoverflow.com/a/12865353/199267)

# objective-c - 从缓冲区读取数据如何影响 C 中另一个变量的值

> ID：12622615
> 
> 赞同：0
> 
> 时间：2012-09-27T13:32:19.477
> 
> 标签：objective-c, c, multithreading, pointers

好的，我看了几个小时。如果我提供的数据没有提供完整的上下文，请告诉我，我会提供更多。

所以基本上我得到了一个由 NSData * packetDescData 指向的数据，它看起来像这样：

```
00000000 00000000 00000007 00000007 00000000 00000016 0000001d 00000000 0000001a 00000037 00000000
0000002a 00000061 00000000 00000025 00000086 00000000 00000029 000000af 00000000 00000032 000000e1     
00000000 00000027 00000108 00000000 00000038 00000140 00000000 00000031 00000171 00000000 0000001e
0000018f 00000000 00000035 000001c4 00000000 00000027 000001eb 00000000 0000002d 00000218 00000000 
00000031 00000249 00000000 00000026 0000026f 00000000 00000033 000002a2 00000000 00000037 000002d9 
00000000 00000035 0000030e 00000000 0000002c 0000033a 00000000 00000025 0000035f 00000000 00000020 
0000037f 00000000 00000034 000003b3 00000000 0000005d 
```

我运行了一个循环，该循环从某些偏移量读取数据并将它们分配给不同的变量：（以及日志语句）：

```
for (int i=0; i < packetDescNumber; i++) {    
    packetDescs[i].mStartOffset = [packetDescData rw_int32AtOffset:offset];
    offset += sizeof(UInt32);        
    NSLog(@"packetDescriptionArray[%d].mStartOffset: %lld, fillbuffindex: %d, offset %lu", i,packetDescs[i].mStartOffset, fillBufferIndex, offset);

    packetDescs[i].mVariableFramesInPacket = [packetDescData rw_int32AtOffset:offset];
    offset += sizeof(UInt32);
    NSLog(@"packetDescriptionArray[%d].mVariableFramesInPacket: %lu, fillbuffindex: %d, offset %lu", i,packetDescs[i].mVariableFramesInPacket, fillBufferIndex, offset);

    packetDescs[i].mDataByteSize = [packetDescData rw_int32AtOffset:offset];                
    offset += sizeof(UInt32);
    NSLog(@"packetDescriptionArray[%d].mDataByteSize: %lu, fillbuffindex: %d, offset %lu", i,packetDescs[i].mDataByteSize, fillBufferIndex, offset);

    NSLog(@"-------------------------------------------------------\n\n\n\n");

} 
```

rw_int32AtOffset 定义为：

```
- (int)rw_int32AtOffset:(size_t)offset
{
    const int *intBytes = (const int *)[self bytes];
    return ntohl(intBytes[offset / 4]);
} 
```

输出是这样的（注意一些其他随机变量（fillbuffindex）..*在同一个线程上*..当mStartOffset在packetDescriptionArray [6].mStartOffset处变为*175*时，它的值突然变为与mStartOffset*相同的值：*

 *```
packetDescriptionArray[4].mStartOffset: 97, fillbuffindex: 0, offset 52
MAIN: we are appending 1231 bytes to ring buffer
MAIN: appendToRingBuffer: FILLBUFFERINDEX: 0
packetDescriptionArray[4].mVariableFramesInPacket: 0, fillbuffindex: 0, offset 56
packetDescriptionArray[4].mDataByteSize: 37, fillbuffindex: 0, offset 60
-------------------------------------------------------

packetDescriptionArray[5].mStartOffset: 134, fillbuffindex: 0, offset 64
packetDescriptionArray[5].mVariableFramesInPacket: 0, fillbuffindex: 0, offset 68
packetDescriptionArray[5].mDataByteSize: 41, fillbuffindex: 0, offset 72
-------------------------------------------------------

packetDescriptionArray[6].mStartOffset: 175, fillbuffindex: 175, offset 76
packetDescriptionArray[6].mVariableFramesInPacket: 0, fillbuffindex: 175, offset 80
packetDescriptionArray[6].mDataByteSize: 50, fillbuffindex: 175, offset 84
-------------------------------------------------------

packetDescriptionArray[7].mStartOffset: 225, fillbuffindex: 175, offset 88
packetDescriptionArray[7].mVariableFramesInPacket: 0, fillbuffindex: 175, offset 92
packetDescriptionArray[7].mDataByteSize: 39, fillbuffindex: 175, offset 96
-------------------------------------------------------

MAIN: we are appending 1224 bytes to ring buffer
MAIN: appendToRingBuffer: FILLBUFFERINDEX: 175
packetDescriptionArray[8].mStartOffset: 264, fillbuffindex: 175, offset 100
packetDescriptionArray[8].mVariableFramesInPacket: 0, fillbuffindex: 175, offset 104
packetDescriptionArray[8].mDataByteSize: 56, fillbuffindex: 175, offset 108
------------------------------------------------------- 
```

关键是我在 `MAIN: we are appending 1231 bytes to ring buffer`一个单独的线程上附加到一个环形缓冲区..环形缓冲区在线程之间共享，但它与fillbuffindex无关..有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:00:32.147

我最初在评论中回答：

> 我的工作假设是如果内存边界超出（即使在阅读期间），那么几乎任何事情都可能发生。所以阅读你的帖子我假设你在某个地方超出了你的记忆界限。`valgrind --leak-check=yes a.out`使用诸如 valgrind 之类的内存调试器以及诸如 clang 静态分析器之类的静态分析器来查找与内存相关的错误：`scan-build gcc mycode.c`

这是对任何问题的通用答案，例如：“我在使用动态内存分配的代码中出现了非常奇怪的行为。” 关键是内存溢出会导致未定义的行为，包括例如变量在没有明确分配的情况下发生变化。

除了手动调试之外，像 clang 静态分析器这样的静态分析器和像 valgrind 这样的内存调试器也非常适合发现这样的错误。*

# iphone - 将 NSDecimalNumber 中的字符串缩短为 K 表示数千，M 表示数百万等

> ID：12622621
> 
> 赞同：1
> 
> 时间：2012-09-27T13:33:01.653
> 
> 标签：iphone, ios, rounding, nsnumber, nsdecimalnumber

> **可能重复：**
> [将 int 转换为缩短的格式化字符串](https://stackoverflow.com/questions/11993806/convert-int-to-shortened-formatted-string)

我想将值转换为`NSDecimalNumber`字符串，其中：

5 到 6 位数字使用 K 表示千位，并有 3 个有效数字（例如 54,321 ---> 54.3K, 654,321 ---> 65.4K）

7到9位数字用M代表百万，有3位有效数字（如7,654,321 ----> 7.65M, 987,654,321 ---> 9.88M）

10位及以上数字用B表示十亿，有效数字3位

关于最好的方法有什么建议吗？谢谢。

（看到了一些类似的问题，但没有针对 Objective-C/iOS 的问题。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:42:56.197

[FormatterKit](https://github.com/mattt/FormatterKit)可以格式化位、字节、兆字节等。参见 TTTUnitOfInformationFormatter 类。

例子：

将 TTTUnitOfInformationFormatter.h 和 TTTUnitOfInformationFormatter.m 添加到您的项目中。以下示例代码将数字 12345 格式化为字节数：

```
#import "TTTUnitOfInformationFormatter.h"

NSDecimalNumber *numberOfBytes = [NSDecimalNumber
                                  decimalNumberWithString:@"12345"];
TTTUnitOfInformationFormatter *formatter = [[TTTUnitOfInformationFormatter alloc]
                                            init];
// Set this to NO if you want to show bits instead of bytes.
formatter.displaysInTermsOfBytes = YES;
// Set this to YES if you want 1024 bytes in a KB instead of 1000 bytes.
formatter.usesIECBinaryPrefixesForCalculation = NO;
NSString *formatted = [formatter stringFromNumber:numberOfBytes
                                           ofUnit:TTTByte];
NSLog(@"%@", formatted); 
```

它将打印：

```
12.35 KB 
```

如果你想要“K”而不是“KB”、“B”而不是“GB”等，你仍然可以使用这个类作为起点。

# excel - Excel中Microsoft Word Quick部分的等效功能是什么

> ID：12622623
> 
> 赞同：2
> 
> 时间：2012-09-27T13:33:02.237
> 
> 标签：excel

我想在 Excel 的单元格中自动显示“上次保存日期”。编写 VBA 代码可能不可行，因为创建 excel 表的人可能不熟悉编写 VBA 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:49:58.487

好吧，如果您将其打包为加载项，他们将不必编写此代码-但您/他们将不得不使用宏-没有其他方法可以做到这一点。

```
Public Function LastSaveTime() As Variant
    Dim fs, f
    Set fs = CreateObject("Scripting.FileSystemObject")
    Set f = fs.GetFile(ActiveWorkbook.FullName)
    'you can delete the debug.print, it's just for debug ;)
    Debug.Print "Modified: " & f.DateLastModified
    LastSaveTime = f.DateLastModified
End Function 
```

改编自 excel-help，寻找 DateLastModified。

将其保存在模块中，然后按照“作为加载项分发”-howto。

现在，如果我没有犯任何基本错误，这应该为任何工作簿提供一个新的 worksheet-function `=LastSaveTime()`，它返回活动工作簿的 DateLastModified 。由于活动工作簿的存在，可能会有一个问题 -`application.caller`当将其用作加载项时，使用构造可能会更省钱。

# php - SilverStripe 和 PHP 库 - 为什么他们不相处？

> ID：12622624
> 
> 赞同：0
> 
> 时间：2012-09-27T13:33:02.610
> 
> 标签：php, qr-code, silverstripe

我正在使用 SilverStripe 2.4.7 并尝试使用生成 QR 码的 PHP 库，请参见[此处](http://phpqrcode.sourceforge.net/)。现在我想我可以只在 mysite/code 文件夹中为与 QR 码生成器关联的 PHP 代码添加一个文件夹，但是当我这样做时 SilverStripe 很适合，不会让我构建数据库并显示此错误：

```
ReflectionException: Class QRCode does not have a constructor 
```

谁能解释为什么会这样？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T21:42:21.927

SilverStripe 尝试自动加载所有类。这似乎错过了一个构造函数......

将第三方代码放在自己的目录中并创建一个文件`_manifest_exclude`，因此它不会自动加载。然后，您可以使用 加载类`require()`，由于自动加载，您通常不需要这样做;-)

# javascript - HTML5 从中心点旋转图像

> ID：12622625
> 
> 赞同：0
> 
> 时间：2012-09-27T13:33:06.607
> 
> 标签：javascript, html, html5-canvas, image-rotation

在尝试学习一些 HTML5 动画时，我遇到了这个问题：尝试根据画布上的鼠标位置旋转图像时，旋转点位于左上角而不是图像中心。

根据有限的经验，我知道在 Flash 中有一个选项可以更改图像的锚点，因此可能的旋转围绕中心点而不是某个角落旋转。JavaScript中是否有类似的东西可以让我围绕它的中心旋转加载的图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:37:12.517

您可以使用以下属性指定旋转的 ( `x`, `y`) 原点：`transform-origin`

```
transform-origin: 50% 50%; 
```

虽然目前这仍然主要需要供应商前缀：

```
-webkit-transform-origin: 50% 50%;
/* and others... */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:21:42.753

好的，这就是我设法让它工作的方法：

包含动画循环的 main.js

```
window.onload = function(){

/*variables*/
var canvas = document.getElementById('canvas'),
context = canvas.getContext('2d'),
mouse = utils.captureMouse(canvas),
ship = new Ship();

ship.x = canvas.width / 2;
ship.y = canvas.with / 2;

/*animation loop*/
(function drawFrame(){

    window.requestAnimationFrame(drawFrame, canvas);

    //clear rect tyhjentää koko canvasin
    context.clearRect(0, 0, canvas.width + 1, canvas.height + 1);

    var dx = mouse.x - alus.x,
    dy = mouse.y - alus.y;

    ship.rotation = Math.atan2(dy, dx);
    ship.draw(context);

})(); 
```

}

Ship.js

```
 function Ship(){

    this.x = 0;//x-sjainti
    this.y = 0;//y-sijainti  
    this.rotation = 0;
    this.img = new Image();
    this.img.src = "resources/img/ship2.png";
    this.imgW = this.img.width;
    this.imgH = this.img.height;

}

    Ship.prototype.draw = function(context){

        context.save();

        context.translate(this.x, this.y);
        context.rotate(this.rotation);
        context.drawImage(this.img, this.imgW / 2 * -1, this.imgH / 2 * -1);

        context.restore();

    } 
```

关键点是**imgW**和**imgH**。如在 drawImage 方法中所见，绘制图像的位置设置为对象向后尺寸的一半。尝试后，这似乎使旋转点居中。

# c++ - lambda 的捕获机制

> ID：12622627
> 
> 赞同：6
> 
> 时间：2012-09-27T13:33:12.630
> 
> 标签：c++, lambda

我很难理解 lambda 函数和捕获变量的机制，所以我做了一些测试，得出了非常奇怪的结论。那是：

```
class ClassA
{
public:
  std::function<void()> lambda;
  void DoYourStuff()
  {
    int x;
    x = 1;
    lambda = [=] () { printf("A %d\n", x);};
    lambda();
    x = 2;
    lambda(); 
  }
};

class ClassB
{
public:
  std::function<void()> lambda;
  int x;
  void DoYourStuff()
  {
    x = 1;
    lambda = [=] () { printf("B %d\n", x);};
    lambda();
    x = 2;
    lambda(); 
  }
}; 
```

注意：唯一的区别在于 x 变量的位置；ClassA 和 ClassB 的函数有*不同*的输出！

```
A 1
A 1
B 1
B 2 
```

所以我的问题是：

1.  这是期望的行为吗？
2.  如果我在 ClassA 中使用 [&] 而不是 [=]，这些 lambda 表达式是否相同？
3.  关于 [=] 何时实际复制是否有一些一般规则？
4.  什么时候应该通过 lambdas 捕获变量？
5.  我可以强制 lambda 重新捕获变量吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T13:42:25.947

第一个`x`按值捕获局部变量；所以它会打印`1`两次，因为它的副本没有改变。

第二个捕获局部准变量`this`，*而不是*成员变量`x`。所以body是等价的，并且会在你改变后`printf("%d\n", this->x);`打印新的值。`2``x`

如果您要显式捕获`x`(ie `[x](){...}`)，那么您将看到与第一个相同的结果。

> 这是期望的行为吗？

这是语言标准指定的行为。

> 如果我在 ClassA 中使用 [&] 而不是 [=]，这些 lambda 表达式是否相同？

不，但两者都会产生相同的输出。第一个将`x`通过引用捕获本地，因此您将看到对其的更改。

> 关于 [=] 何时实际复制是否有一些一般规则？

是的，它在创建 lambda 时复制变量。

> 什么时候应该通过 lambdas 捕获变量？

创建 lambda 时。

> 我可以强制 lambda 重新捕获变量吗？

不。一旦它被值捕获，它就有自己的变量副本，无法访问原始变量。如果您需要查看对原始内容的更改，请通过引用捕获（并注意对象生命周期）。

# javascript - 从成功函数ajax获取变量

> ID：12622631
> 
> 赞同：1
> 
> 时间：2012-09-27T13:33:28.347
> 
> 标签：javascript, jquery, ajax, json, variables

我在 ajax 的成功部分有一个变量，我想在另一个函数中重用它（每 3 秒执行一次），我试图将它声明为全局，但它不起作用；Tdata 未知。我知道 $.ajax 是一个异步函数，我看到了一些类似于我的帖子，但它对我没有帮助。

请帮帮我。谢谢你。

这是我的代码的一部分：

```
<script language='Javascript'> 
var Tdata;

$.ajax({
            method : "GET",
            url: "load-data.php",
            success : function(data){
                Tdata=jQuery.parseJSON(data);
                          ////
            }

});

window.setInterval(function() { 

    $(window).load(function() {

                $.each(Tdata, function(variable) {  
                /////////////
                });

    }); 

}, 3000);

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:43:59.740

为什么不等到 AJAX 请求成功返回数据后再开始间隔呢？由于间隔函数的任何执行在该点之前都不会做任何事情（由于没有数据），因此等待不会以任何方式改变页面的运行方式。

```
$.ajax({
    method: "GET",
    url: "load-data.php",
    dataType: "json"
    success: function(data) {
        var Tdata = data;
        // do some more stuff with the response of the AJAX request
        var interval = setInterval(function() {
            $.each(Tdata, function(variable) {  
                // do something with variable
            });
        }, 3000);
    }
}); 
```

请注意，`load`每次间隔运行时我都删除了事件与窗口的绑定，因为这样做似乎没有任何意义。我还向传递给的选项对象添加了`dataType`一个值为 的属性，因此您不必自己将响应解析为 JSON。`json``$.ajax()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T13:41:56.597

使用 AJAX 调用中的变量的函数应该从 AJAX 成功内部调用，如下所示：

```
$.ajax({
        method : "GET",
        url: "load-data.php",
        success : function(data){
            Tdata=jQuery.parseJSON(data);
            myFunction();
        }
});

function myFunction(){
        var interval = setInterval(function() { 
                $.each(Tdata, function(variable) {  
                /////////////
                });
        }, 3000);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T13:44:45.730

尝试这个，

```
<script language='Javascript'> 
var Tdata;

$.ajax({
            method : "GET",
            url: "load-data.php",
            success : function(data){
                Tdata=jQuery.parseJSON(data);
                          ////
            }

});

 $(window).load(function() {
window.setInterval(function() { 

                $.each(Tdata, function(variable) {  
                /////////////
                });

}, 3000);
 }); 

</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T13:44:57.867

是回调 tdataAjax 函数 ajax 成功方法运行；@param 解析JSON

```
var tdataAjax = function(callback) {

    $.ajax({
        method : "GET",
        url: "load-data.php",
        success : function(data){

            var Tdata=jQuery.parseJSON(data);

            setInterval(function() { 

                callback(Tdata);
            }, 3000);

       }

    });
}; 
```

是 tdataAjax 函数中的回调函数 @param 数据

```
tdataAjax(function(data) {

        $.each(data, function(variable) { 

            // code
        });
}); 
```

tdataAjax ++ :)

```
 tdataAjax(function(data) {

        $.each(data, function(variable) { 

            // cla bla
        });
}); 
```

# iphone - libxml2 - 获取节点（xmlNodePtr）内容？

> ID：12622633
> 
> 赞同：0
> 
> 时间：2012-09-27T13:33:35.157
> 
> 标签：iphone, objective-c, libxml2

我解析并有指向`xmlNodePtr`类别标签的指针，但我想像`TrailersFreeMovies , Trailers`在数组中一样获取节点（名称）的值。

```
<categories><category><name>TrailersFreeMovies</name><url>https://www.ex1.com/srs/index.php?cid=47</url></category><category><name>Trailers</name><url>https://www.ex1.com/srs/index.php?cid=45</url></category></categories> 
```

指导我解析这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:24:30.030

[api 的XPath](http://www.xmlsoft.org/html/libxml-xpath.html)部分返回一个节点数组。请参阅[XPath 示例](http://www.xmlsoft.org/examples/index.html#XPath)。

一旦你获得了[xmlXPathEvalExpression](http://www.xmlsoft.org/html/libxml-xpath.html#xmlXPathEvalExpression)的结果，`xpathObj`那么数组就在`xpathObj->nodesetval->nodeTab`. `nodesetval`是指向[xmlNodeSet 类型](http://www.xmlsoft.org/html/libxml-xpath.html#xmlNodeSet)的指针。

[`xmlGetNodePath`](http://www.xmlsoft.org/html/libxml-tree.html#xmlGetNodePath)`//name`为与xpath 表达式匹配的示例 xml 的节点返回以下值：

```
/categories/category[1]/name
/categories/category[2]/name 
```

因此，您的问题的具体答案是：应用 xpath 表达式`("%s/name", xmlGetNodePath(categoryNode))`并处理返回的节点数组。对于每个条目，获取带有`xmlNodeListGetString(doc, node->xmlChildrenNode, 1)`.

# iphone - UserLocation 注解自定义标题

> ID：12622634
> 
> 赞同：0
> 
> 时间：2012-09-27T13:33:35.673
> 
> 标签：iphone, ios, map, mkmapview

我正在尝试为蓝点注释（用户位置注释）设置自定义标题，我已经尝试了这段代码，它在 ViewforAnnotation 委托方法中工作：

((MKUserLocation *)annotation).title = @"自定义标题";

有人知道这是不是私钥吗？我的申请会因为我试图更改用户位置注释标题而被拒绝吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:35:27.040

默认用户位置标记的类（至少在 SDK 4.2 中）是 MKUserLocationView，但它不是公开的，因此您无法创建要修改的实例而不冒被应用商店拒绝的风险。您必须创建自己的 MKAnnotationView（或 MKAnnotationView 的子类）。

但您可以使用 MKUserLocation 参见以下[链接](http://developer.apple.com/library/IOs/#documentation/MapKit/Reference/MKUserLocation_Class/Reference/Reference.html)：http: [//developer.apple.com/library/IOs/#documentation/MapKit/Reference/MKUserLocation_Class/Reference/Reference.html](http://developer.apple.com/library/IOs/#documentation/MapKit/Reference/MKUserLocation_Class/Reference/Reference.html)

# hbase - 从客户端引用时 Hbase Master 名称错误

> ID：12622637
> 
> 赞同：0
> 
> 时间：2012-09-27T13:33:42.857
> 
> 标签：hbase

当我尝试从客户端连接到 HBase 集群时，我遇到了一个奇怪的问题。客户端似乎正在获取串联的 HOSTNAME 和 IP，并且无法连接到主服务器。以下是日志文件中的相关部分：

```
12/09/27 13:28:41 INFO client.HConnectionManager$HConnectionImplementation: getMaster attempt 0 of 10 failed; retrying after sleep of 1000
java.net.UnknownHostException: **?130062@HOSTNAMEIP**
        at org.apache.hadoop.hbase.ipc.HBaseClient$Connection.<init>(HBaseClient.java:224)
        at org.apache.hadoop.hbase.ipc.HBaseClient.getConnection(HBaseClient.java:954)
        at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:816)
        at org.apache.hadoop.hbase.ipc.WritableRpcEngine$Invoker.invoke(WritableRpcEngine.java:141)
        at $Proxy4.getProtocolVersion(Unknown Source)
        at org.apache.hadoop.hbase.ipc.WritableRpcEngine.getProxy(WritableRpcEngine.java:174)
        at org.apache.hado 
```

以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T06:20:53.007

您的 /etc/hosts 文件似乎有问题

# elisp - 如何使用 let 子句

> ID：12622639
> 
> 赞同：1
> 
> 时间：2012-09-27T13:33:48.353
> 
> 标签：elisp

我是elisp的初学者。我在评估下面给出的简单代码时遇到错误：

```
(let (set-id 1) (
(message set-id)) 
```

我收到错误消息：

```
Debugger entered--Lisp error: (invalid-function (message set-id))
  ((message set-id))
  eval(((message set-id)) nil)
  eval-last-sexp-1(t)
  eval-last-sexp(t)
  eval-print-last-sexp()
  call-interactively(eval-print-last-sexp nil nil) 
```

谁能给我点灯？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:37:34.687

正确的语法是这样的：

```
(let ((set-id 1)) 
  (message "%s" set-id)) 
```

# visual-studio-2010 - 如何在我的项目中指定安装包的文件夹？

> ID：12622642
> 
> 赞同：0
> 
> 时间：2012-09-27T13:34:00.773
> 
> 标签：visual-studio-2010, nuget, nuget-package

我在我的项目中使用 twitter 引导程序，它将 15 个文件安装到我的脚本文件夹中的项目中。

```
project/scripts/bootstrap-alert.js
project/scripts/bootstrap-button.js 
```

我可以将这些文件移动到一个文件夹中，但是在进行升级时它只是再次在 /scripts 级别安装所有内容。当您添加 jquery、淘汰赛等时，这会完全失控

```
project/scripts/twitter.bootstrap/bootstrap-alert.js
project/scripts/twitter.bootstrap/bootstrap-button.js 
```

我想告诉 nuget 将文件安装到项目中的 project/scripts/twitter.bootstrap 中。

有谁知道怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:12:16.537

遗憾的是它不受支持，但在 nuget codeplex 网站上有关于它的建议。

[http://nuget.codeplex.com/discussions/256542](http://nuget.codeplex.com/discussions/256542)

# .net - 如何使用 linq 复制节点？

> ID：12622643
> 
> 赞同：0
> 
> 时间：2012-09-27T13:34:01.193
> 
> 标签：.net, vb.net, linq, linq-to-xml

我正在尝试使用 linq 查找名称等于 Foo 的 MyNode，并复制该节点并将其添加到 XML 但新节点应具有名称 Bar，然后保存文件。

```
<?xml version="1.0" encoding="utf-8"?>
<MyRoot>
  <MyNode Name="Foo">
    <Data Type="String">ABC</Data>
  </MyNode>
</MyRoot> 
```

此代码找到节点

```
 Dim doc As XDocument = XDocument.Load(xmlFile)
    Dim sheet = From item In doc...<MyRoot>...<MyNode> Select item Where item.@Name = "Foo" 
```

我正在尝试使用它来添加节点并更改名称。

```
 sheet.@Name = "Bar" 'After excecuting this, sheet becomes "Nothing"
    doc.Root.Add(sheet.First)
    doc.Save(outFile) 
```

但是，在将 sheet.@Name 设置为“Bar”之后， sheet 变为**Nothing**。如果我注释掉该行，输出将有两个节点，均名为 Bar。我怀疑我没有以“正确的方式”这样做，无论是更改属性还是将其添加到 XDocument（或两者）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:52:15.333

c#版本（会尝试翻译）

```
var doc = XDocument.Load(path);
            var node = doc.Elements("MyRoot").Elements("MyNode").FirstOrDefault(m => m.Attribute("Name").Value == "Foo");
            var newNode = new XElement(node);
            newNode.SetAttributeValue("Name", "Bar");
            doc.Root.Add(newNode); 
```

应该在vb

```
Dim doc as XDocument = XDocument.Load(xmlFile)
Dim sheet = From item...<MyNode>.FirstOrDefault(Function(m) m.@Name = "Foo")
Dim newSheet As New XElement(sheet)
newSheet.SetAttributeValue("Name", "Bar")
doc.Root.Add(newSheet) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:19:02.930

吉姆的回答让我指出了正确的方向。这是我想出的代码

```
 Dim doc As XDocument = XDocument.Load(xmlFile)
    Dim sheet = From item In doc...<MyRoot>...<MyNode> Select item Where item.@Name = "Foo"
    Dim copy As XElement = New XElement(sheet.First)
    copy.SetAttributeValue("Name", "Bar")
    doc.Root.Add(copy)
    doc.Save(outFile) 
```

# session-variables - 会话变量值在 WebMatrix 中的网页中不可用

> ID：12622644
> 
> 赞同：0
> 
> 时间：2012-09-27T13:34:02.487
> 
> 标签：session-variables, webmatrix

我想`session variables`在我的 WebMatrix 网页中使用。

由于未知的原因，它们是`not available accross the pages`（仅限于定义它们的页面）。

**在我的登录页面中，代码部分**：

```
if (WebSecurity.Login(userName, password, rememberMe)) {

    // Session variable holding the UserType

    var db = Database.Open("MyDatabase");
    var userTypeData = db.QuerySingle("SELECT Name FROM UserTypes INNER JOIN UserProfiles ON UserProfiles.UserTypeId = UserTypes.UserTypeId WHERE UserId = @0",WebSecurity.CurrentUserId);
    Session ["UserType"] = userTypeData.Name;

    // Eventual redirection to the previous URL

    var returnUrl = Request.QueryString["ReturnUrl"];

    if (returnUrl.IsEmpty()) {
        Response.Redirect("~/auth/authenticated");
    }
    else {
        Context.RedirectLocal(returnUrl);
    } 
```

`"Cannot perform runtime binding on a null reference"`因此，如果始终存在 UserType，我会到达这里。这是第一个问题。

在我被重定向的“身份验证”页面中，如果我使用完全相同的查询和会话变量定义，我可以将其显示为：

```
You are a user of type: @Session["UserType"] -> HTML section 
```

**在其他页面**上，我试图通过会话变量“显示或隐藏（更新）按钮”。

```
 @if (Session["UserType"]=="here the variable value; a string") {
                <a class="linkbutton" href="condoedit?condoId=@condoData.CondoId">Update</a>    
 } 
```

按钮永远不会显示为`session variable appears to be empty`!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:18:03.360

更改代码以测试查询是否存在问题（顺便说一句，如果您只需要用户名，请使用 QueryValue 而不是 QuerySingle）。

尝试类似的东西

```
var db = Database.Open("MyDatabase");
var userTypeData = db.QueryValue("SELECT Name FROM UserTypes INNER JOIN UserProfiles ON UserProfiles.UserTypeId = UserTypes.UserTypeId WHERE UserId = @0",WebSecurity.CurrentUserId);

if (String.IsNullOrEmpty(userTypeData)) {
    Session["UserType"] = "IsEmpty";
} else {
    Session["UserType"] = userTypeData;
} 
```

如果会话变量值为“IsEmpty”，则在其他页面上进行测试。

**编辑**

在其他页面中将会话变量值转换为字符串并将其存储到局部变量中

```
var uType = Session["UserType"].ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T09:11:16.043

当 item 存储在 session 中时，它被存储为 object 数据类型，因此如果 object 和原始类型之间没有隐式转换，则需要将其转换回其原始数据类型。（[mikesdotnetting.com](http://www.mikesdotnetting.com/Article/192/Transferring-Data-Between-ASP.NET-Web-Pages)）

-> 会话[“用户类型”]`.ToString()`

```
@if (Session["UserType"].ToString()=="here the variable value; a string") {
            <a class="linkbutton" href="condoedit?condoId=@condoData.CondoId">Update</a> 
```

}

# iphone - RestKit 在 Core Data 中存储对象

> ID：12622646
> 
> 赞同：0
> 
> 时间：2012-09-27T13:34:05.017
> 
> 标签：iphone, objective-c, ios, core-data, restkit

我正在使用 restkit 将对象存储在核心数据中。我正在从 Web 服务中检索数据。现在我只想在数据已更新或已添加新数据时存储它。目前，每次我调用 webserice 并检索数据时，它都会将其存储在我的数据库中，并且我的数据库中有重复数据。我希望它只存储任何更新或新增内容。我已经映射了数据等，但我不知道这种同步究竟是如何工作的。谁能指出我正确的方向？我曾尝试使用同步和 RKParser，但我不确定该使用什么。我当前的代码如下：

```
RKManagedObjectMapping* caseStudyMapping = [RKManagedObjectMapping mappingForClass:[CaseStudies class] inManagedObjectStore:[RKObjectManager sharedManager].objectStore];
    [caseStudyMapping mapKeyPath:@"name" toAttribute:@"name"];
    [objectManager.mappingProvider setMapping:caseStudyMapping forKeyPath:@"items"];
    [[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"?term=x" delegate:self]; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:50:26.133

你需要 `caseStudyMapping.primaryKeyAttribute=@"name";`

你的生活应该再次精彩。:)

# python - 如何在 Windows 上为 Python 安装 seleniumHQ？

> ID：12622653
> 
> 赞同：0
> 
> 时间：2012-09-27T13:34:13.250
> 
> 标签：python, windows, installation

我想知道如何在 Windows XP/Vista/7 上安装 SeleniumHQ ( [http://seleniumhq.org/download/ )？](http://seleniumhq.org/download/)

在 Ubuntu/Debian 系统上，您只需键入以下命令：

```
$ sudo apt-get install python-pip
$ sudo pip install selenium
$ sudo apt-get install python-pip xvfb xserver-xephyr
$ sudo pip install selenium 
```

然后我可以这样做：

```
#!/usr/bin/env python
from selenium import selenium
# ... 
```

但是Windows呢？

我终于做到了，但根本没有。我刚刚安装了 seleniumHQ：

```
1\. Download the last pip version from here: http://pypi.python.org/pypi/pip#downloads
2\. Uncompress it
3\. Download the last easy installer for Windows: (download the .exe at the bottom of http://pypi.python.org/pypi/setuptools ). Install it.
4\. Go to the uncompressed pip directory and: python setup.py install
5\. Add your python c:\Python2x\Scripts to the path
6\. Run cmd.exe and type: pip install -U selenium 
```

我终于可以输入：

```
python
>> from selenium import selenium
>> 
```

它有效，耶！但是安装这个仍然有问题：

```
xvfb xserver-xephyr 
```

在 Ubuntu/Debian 操作系统上，我只需要输入：

```
sudo apt-get install python-pip xvfb xserver-xephyr 
```

它可以工作，但 Windows 怎么样？我在 superuser.com 上问过（[看看](https://superuser.com/questions/479397/how-to-install-seleniumhq-for-python-on-windows)）但没有人回答:(

# qt - QDate - 错误的年份

> ID：12622654
> 
> 赞同：3
> 
> 时间：2012-09-27T13:34:16.607
> 
> 标签：qt, qdate

我有以下情况：

```
 QDate fixDate = QDate::fromString(QString("270912"), "ddMMyy"); 
```

返回的年份是`1912`. 我不明白为什么以及如何获得正确的年份。

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T14:14:25.960

两位数的年份总是解释为`19xx`。所以你可以通过`YYYY`或只是增加`100`几年。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T13:42:52.603

如[文档](https://qt-project.org/doc/qt-4.8/qdate.html#fromString)中所述：

```
For any field that is not represented in the format the following defaults are used:
Year 1900
Month 1
Day 1

// For example:
QDate::fromString("1.30", "M.d");           // January 30 1900
QDate::fromString("20000110", "yyyyMMdd");  // January 10, 2000 
```

（请原谅格式，它在文档的表格中）。因此，您将不得不将整年传递给该方法，直到 Qt 决定 2012 年足以进入世纪以更改默认值...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T13:44:03.600

你能用`ddMMyyyy`代替`ddMMyy`吗？或者您需要这种格式的日期？

[在此处查看有关 fromString 方法的更多信息](http://doc.qt.digia.com/4.7-snapshot/qdate.html#fromString)

# jquery - 如何将 jquery 中的值附加到具有多行和多列的表中

> ID：12622655
> 
> 赞同：4
> 
> 时间：2012-09-27T13:34:22.003
> 
> 标签：jquery, html

我在玩 JQuery 和 Table 时卡住了

用户单击按钮后，我想将文本框中的值从表单添加到表格

我的表单有 3 个组合框，其中 3 个是动态的（组合框的值从数据库加载）

当用户进入文本框并单击添加按钮时，来自组合框和文本框的值将附加到表单下的 div 中

你可以想象我的工作流程是这样的

==============================================

```
 |  Express   | Standard | Premium 
```

法国 | ***_* __ *_* _** *10* ***_* __ *_* __****|*****_ *_* __ *_* ___** | 20***

 ***英格兰 | ***_* __ *_* __ *_* __ *_* __** |****_ *_* __** *30*****__** |****

 ****葡萄牙 | ***_* ___** *50* ***_* __ *_* __** |****__ *_* __ *_* __ *_* _** | 80**

 **===============================================

当用户单击从组合框中选择国家并从组合框中选择模式（我的意思是标准 - 快递等...）然后在文本框中输入数字时，它将出现在表单下（我使用 div 并将表格附加到 div 或附加表格到表中），然后它可以获得值并将其添加到我想要的列中

示例首先单击我选择法国 - Express 和 20，第二次单击我选择 Endland 和 Standard 和 30，再次单击第三次我选择 France 和 Premium，值为 15

另一个问题 - 我有一个提供者组合框，这意味着 Express 有许多提供者，如 Express 1 - Express 2 - Express 3，等等。

当我再次选择 France 和 Express 但不同的提供商时，它将添加到 Express 列和 France Row 这个值

打字很难解释我想要什么

我将通过下面的图表一步一步地解释

首先点击：

===========================================

***_* __ *_* _** | 表达

法国 | 20

================================================== 第二点击

* * *

```
 |    Express_____ |    Standard 
```

法国 | ***_* ___** **20*****__ *_* __ *_* __** |***

 ***英格兰| ***_* __ *_* __ *_* __ *_* __ *_* ___** | 30

* * *

第三次点击

==================================================== ===

```
 __|    Express |    Standard   |     Premium 
```

法国 | ***_* __ *_* __** 20 ***_* __****|*****__ *_* __ *_* __ *_* __ *_* ___** | 15***

 ***英格兰| ***_* __ *_* __ *_* __ *_* ___****|* ***_* __ *_* ___****30* ***_* __ *_*** |**

 **==================================================== ===

另一个问题

****_ *_* __****|*****__表达__****|* __ 标准 | 优质的******

 ******法国**|快递1 20 |*****__ *_* __ *_* ____** | 高级 1 15，高级 3 20***

 ***英格兰| ***_* __ *_* __ *_* __ *_*** | *标准2 30* |

==================================================== ===========

我的代码

```
<html>
<head>
    <script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
        $(document).ready(function() {
          $("#btAdd").click(function() {
                            var txtCost = $('#txtCost').val();
                            var ctryID = $('#CountryID').val();
                            var ctryName = $('#CountryID option:selected').text();
                            var modeID = $('#ModeID').val();
                            var modeName = $('#ModeID option:selected').text();
                            var ProviderID = $('#ProviderID').val();
                            var ProviderName = $('#ProviderID option:selected').text();
                            var HeaderTitle = $('#HeaderTitle').length;
                            var modenameID = $('#modeNameID'+modeName).text();
                            var CountryID = $('#Country'+ctryID).text();

                            if(HeaderTitle == 0){                                
                                $('#tblAppend').append(
                                    '<tr id="HeaderTitle"><td></td><td id="modeNameID'+modeName+'">'+modeName+'</td><tr>'
                                );
                            }else{
                               if(modeName != modenameID){
                                    $('#HeaderTitle').append(
                                        '<td id="modeNameID'+modeName+'">'+modeName+'</td>'
                                    );
                               }

                            }
                           if(CountryID != ctryName){
                                $('#tblAppend').append(
                                    '<tr id="nameCTR'+ctryID+'"><td id="Country'+ctryID+'">'+ctryName+'</td></tr>'
                               );

                           }

                            if(CountryID != ctryName && modeName != modenameID){
                                $('#nameCTR'+ctryID).append(
                                        '<td id="cost'+txtCost+'">'+txtCost+'</td>'
                                    );
                            }
                            if(CountryID != ctryName && modeName == modenameID){
                                $('#nameCTR'+ctryID).append(
                                        '<td id="cost'+txtCost+'">'+txtCost+'</td>'
                                    );
                            }
                            if(CountryID == ctryName && modeName != modenameID){
                                $('#nameCTR'+ctryID).append(
                                        '<td id="cost'+txtCost+'">'+txtCost+'</td>'
                                    );
                            }

                            if (CountryID == ctryName && modeName == modenameID){
                                $('#cost'+txtCost).append(
                                    '$'+txtCost
                                );
                            }

            });
        });
</script>
</head>
<body>
    <form>
        <table cellpadding="0" cellspacing="0">
            <tr> 
            <td><input  style="width:100px;" type="text" name="txtCost" id="txtCost" value=""/></td>
            <td>
                Country
                <select id="CountryID">
                  <option value="1">France</option>
                  <option value="2">USA</option>
                  <option value="3">Poland</option>
                  <option value="4">Vietnam</option>
                </select>
            </td>
            <td>
                Mode
                <select id="ModeID">
                  <option value="p1">Express</option>
                  <option value="p2">Standard</option>
                  <option value="P3">Premium</option>

                </select>
            </td>
            <td>
                Provider
                <select id="ProviderID">
                  <option value="A1">A1</option>
                  <option value="A2">A2</option>
                  <option value="A3">A3</option>

                </select>
            </td>
            <td>
                <input type="button" id="btAdd" name="btAdd" value="Add"/>
            </td>
            </tr>
        </table>
            <table cellpadding="0" cellspacing="0" id="tblAppend">
                <th>&nbsp;</th>
            </table>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:28:16.890

嗨，我已经准备好了这段代码，请测试一下，如果有任何遗漏，请告诉我

[jsfiddler 演示运行应用程序可用here](http://jsfiddle.net/JYeDa/1/)

```
<html>
<head>
    <title>Home Page</title>
    <link href="/Content/Site.css" rel="stylesheet" type="text/css" />
    <link href="/Content/themes/base/jquery.ui.all.css" rel="stylesheet" type="text/css" />
    <link href="/Content/themes/base/jquery.ui.autocomplete.css" rel="stylesheet"
    type="text/css" />

    <script src="/Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
</head>
<body>
    <div class="page">
        <div id="header">
            <div id="title">
                <h1>My MVC Application</h1>
            </div>
            <div id="logindisplay" style="height:10px">               
            </div>
            <div id="menucontainer">
                <ul id="menu">
                    <li><a href="/Home/About">Execute Sql</a></li>
                    <li><a href="/">Home</a></li>

                </ul>
            </div>
        </div>
        <div id="main">

<h2>Welcome to ASP.NET MVC!</h2>
<p>
    To learn more about ASP.NET MVC visit <a href="http://asp.net/mvc" title="ASP.NET MVC Website">http://asp.net/mvc</a>.
</p>
<script src="../../Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>

    <script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#btAdd").click(function () {
            var txtCost = $('#txtCost').val();
            var ctryID = $('#CountryID').val();
            var ctryName = $('#CountryID option:selected').text();
            var modeID = $('#ModeID').val();
            var modeName = $('#ModeID option:selected').text();
            var ProviderID = $('#ProviderID').val();
            var ProviderName = $('#ProviderID option:selected').text();
            var HeaderTitle = $('#HeaderTitle').length;
            var modenameID = $('#modeNameID' + modeName).text();
            var CountryID = $('#Country' + ctryID).text();

            if (HeaderTitle == 0) {
                $('#tblAppend').append(
                                    '<tr id="HeaderTitle"><td></td><td id="modeNameID' + modeName + '">' + modeName + '</td><tr>'
                                );
            } else {
                if (modeName != modenameID) {
                    $('#HeaderTitle').append(
                                        '<td id="modeNameID' + modeName + '">' + modeName + '</td>'
                                    );
                }

            }
            if (CountryID != ctryName) {
                $('#tblAppend').append(
                                    '<tr id="nameCTR' + ctryID + '"><td id="Country' + ctryID + '">' + ctryName + '</td></tr>'
                               );

            }

            if (CountryID != ctryName && modeName != modenameID) {
                $('#nameCTR' + ctryID).append(
                                        '<td id="mode' + ctryID + modeID + '"><div id="cost' + ctryID + ProviderID + modeID + '">' + ProviderName + ":" + txtCost + '</div></td>'
                                    );
            }
            if (CountryID != ctryName && modeName == modenameID) {
                $('#nameCTR' + ctryID).append(
                                        '<td id="mode' + ctryID + modeID + '"><div id="cost' + ctryID + ProviderID + modeID + '">' + ProviderName + ":" + txtCost + '</div></td>'
                                    );
            }
            if (CountryID == ctryName && modeName != modenameID) {
                $('#nameCTR' + ctryID).append(
                                        '<td id="mode' + ctryID + modeID + '"><div id="cost' + ctryID + ProviderID + modeID + '">' + ProviderName + ":" + txtCost + '</div></td>'
                                    );
            }

            if (CountryID == ctryName && modeName == modenameID) {
                //tr level chek if a mode is avila or not
                {
                    var contain = false;
                    $('#nameCTR' + ctryID).find('td').each(function (id, val) {                        
                        if ($(this).attr('id') == ("mode" + ctryID + modeID)) {
                            contain = true;
                        }
                    });
                    if (contain == false) {
                        //add cell to country
                        $('#nameCTR' + ctryID).append(
                                        '<td id="mode' + ctryID + modeID + '"><div id="cost' + ctryID + ProviderID + modeID + '">' + ProviderName + ":" + txtCost + '</div></td>'
                                    );
                    }

                }
                //td lelvel entry of value depend on provider
                {
                    if ($('#mode' + ctryID + modeID).find('div').text().indexOf(ProviderName) != -1) {
                        $('#cost' + ctryID + ProviderID + modeID).append(
                                    '$' + txtCost
                                );
                    } else {
                        $('#mode' + ctryID + modeID).append(
                                        '<div id="cost' + ctryID + ProviderID + modeID + '">' + ProviderName + ":" + txtCost + '</div>'
                                    );
                    }
                }
            }
        });
    });
</script>

        <table cellpadding="0" cellspacing="0">
            <tr> 
            <td><input  style="width:100px;" type="text" name="txtCost" id="txtCost" value=""/></td>
            <td>
                Country
                <select id="CountryID">
                  <option value="1">France</option>
                  <option value="2">USA</option>
                  <option value="3">Poland</option>
                  <option value="4">Vietnam</option>
                </select>
            </td>
            <td>
                Mode
                <select id="ModeID">
                  <option value="p1">Express</option>
                  <option value="p2">Standard</option>
                  <option value="P3">Premium</option>

                </select>
            </td>
            <td>
                Provider
                <select id="ProviderID">
                  <option value="A1">A1</option>
                  <option value="A2">A2</option>
                  <option value="A3">A3</option>

                </select>
            </td>
            <td>
                <input type="button" id="btAdd" name="btAdd" value="Add"/>
            </td>
            </tr>
        </table>
            <table cellpadding="0" cellspacing="0" id="tblAppend">
                <th>&nbsp;</th>
            </table>

        </div>
        <div id="footer">
        </div>
    </div>
</body>
</html> 
```**************************

# image - 允许在仅纵向应用程序中以横向方式查看图像

> ID：12622669
> 
> 赞同：0
> 
> 时间：2012-09-27T13:35:08.863
> 
> 标签：image, ios5, uiimageview, orientation, segue

我正在制作一个我只会在模式下制作`iPhone`的应用程序。应用程序中有一点，如果用户触摸图片，它会自动生成. 我这样做的方式是通过 segue 到另一个视图控制器，其中 a占据了整个空间。我希望能够旋转设备以查看图片。`iPod``portrait``fullscreen``UIImageView``landscape``landscape`

这怎么可能？

在第二阶段：我想知道如何制作视图`fullscreen`，以便图片可以填满整个屏幕。

**基本上**：我希望图片的行为就像 twitter 应用程序一样。:)

谢谢

**编辑**：这是我的类中查看图像的代码

```
#import "ImageViewer.h"

@interface ImageViewer ()

@end

@implementation ImageViewer
@synthesize scrollView;
@synthesize imageView;
@synthesize image;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    CGRect imageFrame = CGRectMake(0, 0, self.imageView.image.size.width, self.imageView.image.size.height);

    self.imageView.frame = imageFrame;
    self.scrollView.contentSize = imageFrame.size;

}

- (UIView *) viewForZoomingInScrollView:(UIScrollView *)sender
{
    return self.imageView;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-  (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    NSLog(@"rotate.");
    return YES;
}

- (void)viewDidUnload {
    [self setImageView:nil];
    [self setScrollView:nil];
    [super viewDidUnload];
}
@end 
```

# yii - CMenu - 活动类不呈现

> ID：12622672
> 
> 赞同：1
> 
> 时间：2012-09-27T13:35:12.797
> 
> 标签：yii

```
'items'=>array(
     array(
         'label'=>'About',
         'url'=>array('about/index')
), 
```

`about/index`- 我们在菜单上找到课程 - 活动。

`about/graphic`- 我们没有激活菜单上的课程。

`about/print`- 我们没有激活菜单上的课程。

请注意，菜单没有子项目。只关于。

无论用户是使用图形、打印还是其他方式，我们都希望突出显示**关于**。

我们怎样才能做到这一点？

我试图编辑那个'url'参数很多。没运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T14:05:06.953

```
'items'=>array(
     array(
         'label'=>'About',
         'url'=>array('about/index'),
         'active'=>Yii::app()->controller->id=='about',
), 
```

添加了`active`参数。这行得通。

> active：布尔值，可选，此菜单项是否处于活动状态（当前选中）。如果菜单项处于活动状态且 activeClass 不为空，则其 CSS 类将附加 activeClass。**如果未设置此选项，则当当前请求由 url 触发时，菜单项将自动设置为活动状态。**请注意，“url”选项中未指定的 GET 参数将被忽略。

我已经设置了该属性。否则它将无法正常工作。

但是，正如您在粗线中看到的那样，他们说这应该是自动触发的。不是在这个案子上。

我想是这样的，因为 Yii 期望 About 的子元素来应用该类，因为有任何，我们必须强制它来获取父元素。

不过不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T14:09:09.013

CMenu 将项目的路线与当前路线进行比较，因此默认情况下它仅适用于`about/index`.

我看到了两种强制它的方法 - 第一种只是`'active' => true`在项目列表中设置：

```
$isActive = strpos(Yii::app()->controller->route, 'about/') === 0;
// ....
'items'=>array(
     array(
         'label'=>'About',
         'url'=>array('about/index'),
         'active' => $isActive
 ), 
```

或者您可以继承 CMenu 类并覆盖`CMenu::isItemActive($item,$route)`方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T19:56:03.397

简单但有效：

```
$action = Yii::app()->controller->action->id; // this is the action name currently running
'items'=>array(
     array(
         'label'=>'About',
         'url'=>'/about/something',
         'active'=>$action == 'something',
), 
```

还...激活菜单，无论操作如何，仅针对控制器：

```
$controller = Yii::app()->controller->id; // this is the controller name
...
'active'=>$controller == 'something', 
```

笔记：

*   添加 $controller 或 $action 变量，您可以将它们用于更多菜单项。你的代码会更干净。

*   你会 100% 确定，菜单项将“坚持”活动

# html - 柱高问题

> ID：12622674
> 
> 赞同：0
> 
> 时间：2012-09-27T13:35:19.960
> 
> 标签：html, drupal, css

在我公司的网站[http://www.ensorbuilding.com](http://www.ensorbuilding.com)上，中间的内容总是与左侧菜单重叠，有时右侧菜单与另外两个重叠。

代码看起来像这样

```
<aside id="left_menu"></aside>
<section id="content"></section>
<aside id="right_menu"></aside> 
```

我使用了许多 javascript 自动高度修复，但它们似乎都没有奏效？

任何人都可以对此有所了解吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:40:34.197

还没有看到你的代码，但如果我做到了，我会影响三个部分（菜单和内容）的固定宽度。

例如在 CSS 中：

```
#left_menu{
float:left;
width:200px
}

#right_menu{
float:left;
width:200px
}

#content{
float:left;
width:600px
} 
```

Elements`height`对您的问题无关紧要。

# android - 带有触摸事件的自定义视图不起作用

> ID：12622683
> 
> 赞同：4
> 
> 时间：2012-09-27T13:35:55.820
> 
> 标签：android

我尝试使用 TouchEvent 制作一个简单的自定义视图。但是，如果我单击并拖动鼠标光标，则不会绘制任何内容。这是我应该在模拟器上测试 TouchEvent 的方式吗？或者我应该在真实设备上运行该应用程序（它也无法正常工作）。谢谢

```
public class TouchEventView extends View {

    private Paint paint = new Paint();
      private Path path = new Path();

      public TouchEventView(Context context, AttributeSet attrs) {
        super(context, attrs);

        paint.setAntiAlias(true);
        paint.setColor(Color.WHITE);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeJoin(Paint.Join.ROUND);
        paint.setStrokeWidth(5f);
      }

      @Override
      protected void onDraw(Canvas canvas) {
        canvas.drawPath(path, paint);
      }

      @Override
      public boolean onTouchEvent(MotionEvent event) {
        float eventX = event.getX();
        float eventY = event.getY();

        switch (event.getAction()) {
          case MotionEvent.ACTION_DOWN:
            path.moveTo(eventX, eventY);
            return true;
          case MotionEvent.ACTION_MOVE:
            path.lineTo(eventX, eventY);
            break;
          case MotionEvent.ACTION_UP:
            // nothing to do 
            break;
          default:
            return false;
        }

        // Schedules a repaint.
        invalidate();
        return true;
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:50:54.437

我在我的模拟器中尝试了这段代码，它可以工作，记住在模拟器视图上移动鼠标时按住左键：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    int action = event.getAction() & MotionEvent.ACTION_MASK;
    switch(action) {
        case MotionEvent.ACTION_DOWN : {
            path.moveTo(event.getX(), event.getY());
            break;
        }
        case MotionEvent.ACTION_MOVE : {
            path.lineTo(event.getX(), event.getY());
            break;
        }

    }

    invalidate();
    return true;
}

@Override
protected void onDraw(Canvas canvas) {
    canvas.drawPath(path, myPaint);
}

private void init() {
    myPaint = new Paint();
    myPaint.setStyle(Paint.Style.STROKE);
    myPaint.setColor(Color.CYAN);
} 
```

# php - Imagick 宝丽来效果没有透明度

> ID：12622687
> 
> 赞同：4
> 
> 时间：2012-09-27T13:36:12.970
> 
> 标签：php, imagemagick

我使用下面的代码来创建*宝丽来效果*，但它真的很分散注意力，周围没有任何透明效果。

```
<?php
/* Create the object */
$image = new Imagick('wood.png');

/* Set the opacity */
$image->polaroidImage(new ImagickDraw(), 25);

/* output the image */
header('Content-type: image/png');
echo $image;

?> 
```

我得到像[http://photoapp.biz/polaroid/test.php这样的结果](http://photoapp.biz/polaroid/test.php)

原始图像是[http://photoapp.biz/polaroid/wood.png](http://photoapp.biz/polaroid/wood.png)

会有什么问题？这发生在我尝试过的几乎所有 10 张图像中。

例子：

![在此处输入图像描述](../Images/c5693c5bc32ae820054662e3f4f3a808.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:07:05.983

如果我错了，请纠正我，但你真的在问抗锯齿，不是吗？

[http://www.imagemagick.org/Usage/antialiasing/](http://www.imagemagick.org/Usage/antialiasing/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:12:14.000

试试这个功能[http://php.net/manual/en/function.imageantialias.php](http://php.net/manual/en/function.imageantialias.php)。

它的作用是：

![在此处输入图像描述](../Images/ff6fbad352c05450032072946f2a6b32.png)

请注意，IMAGIC 可以通过多种不同的方式进行编译，并且您可能在不同的环境中产生不同的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:54:47.703

透明度使用[Imagick::setImageOpacity设置](http://php.net/manual/en/imagick.setimageopacity.php)

```
$image->setImageOpacity(0.7); 
```

此外，也许您需要使用另一种图像格式：

> 也就是说，一些网络浏览器不能正确显示透明的“PNG”图像（最值得注意的是 Microsoft Internet Explorer v6，尽管 IE v7 可以）。正因为如此，我通常更喜欢使用 JPEG 和 GIF 图像格式，并且只在生成具有半透明像素的图像时使用 PNG，或者在后面的示例中需要精确的颜色。

来源：[http ://www.imagemagick.org/Usage/#PNG](http://www.imagemagick.org/Usage/#PNG)

**编辑 1**

尝试

> $image->setBackgroundColor(new ImagickPixel('transparent'));

# sql - 如何使用 SQL 读取列名

> ID：12622688
> 
> 赞同：0
> 
> 时间：2012-09-27T13:36:12.673
> 
> 标签：sql, vb.net, visual-studio, ms-access, visual-studio-2005

我正在尝试使用 jet SQL 查询从表中读取列名。数据表以 2002-2003 兼容模式保存在 ms-access 中。我已经为查询尝试了几种变体，但似乎无法获得正确的语法。

```
DatabaseConnection("SELECT Column_name" & " FROM " & tablename, "Read Recordset")

DatabaseConnection("select column_name from information_schema.columns where table_name = tabDataHourly", "read Recordset") 
```

我有一个运行数据库连接的函数： Public Function DatabaseConnection(ByVal Query As String, ByVal Task As String) As String 'On Error GoTo Err

```
 cnnOLEDB = New OleDbConnection
    cnnOLEDB.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & DataDirectoryName & DatabaseFileName
    cnnOLEDB.Open()

    cmdOLEDB.Connection = cnnOLEDB
    cmdOLEDB.CommandText = Query

    Select Case Task
        Case "Read Recordset"
            rdrOLEDB = cmdOLEDB.ExecuteReader()
            DatabaseConnection = "Read Recordset"
        Case "Read Scalar"
            DatabaseConnection = cmdOLEDB.ExecuteScalar
        Case "Non-Query"
            cmdOLEDB.ExecuteNonQuery()
            DatabaseConnection = "Non-Query"
    End Select

    Exit Function
Err:
    MsgBox("Database connection error.")
    DatabaseConnection = "Error"

End Function 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:40:04.857

```
select column_name,* from information_schema.columns
where table_name = 'tabDataHourly'
order by ordinal_position 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:08:28.713

关于获取字段（列）名称的一些注意事项：

```
 Case "Read Recordset"
            rdrOLEDB = cmdOLEDB.ExecuteReader()
            DatabaseConnection = "Read Recordset"
            For i = 0 To rdrOLEDB.FieldCount - 1
                Console.Write(rdrOLEDB.GetName(i))
            Next
            Console.Read() 
```

# java - 使用android中的线程连续将异常记录到文件中

> ID：12622689
> 
> 赞同：2
> 
> 时间：2012-09-27T13:36:16.420
> 
> 标签：java, android, multithreading

我有一个要求，我必须在 sd 卡中创建一个文本文件，然后每次在应用程序中遇到任何异常时，我都必须将其记录到文本文件中。一切都应该发生在一个线程中。

在某些地方，我有一个线程正在运行，这给出了一些异常，在这种情况下，我如何从这个线程启动一个新线程来记录。

我的问题：如何从新线程记录每个异常。我们可以从其他线程开始一个新线程吗？如果我想使用同一个线程将每个日志写入文件，我该如何销毁线程，尽管我知道不建议多次运行一个线程。是否可以在不使用 log4j 的情况下执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:43:23.297

我建议您为整个应用程序设置一个带有工作队列的专用线程，如下所示：

```
class Logging {
    public static ExecutorService logger = Executors.newSingleThreadExecutor();
} 
```

然后当捕获到异常时：

```
try {
   ...
} catch(Exception ex) {
   Logging.logger.submit(new LoggingJob(ex));
} 
```

哪里`LoggingJob`可以是：

```
class LoggingJob implements Runnable {
    private Exception ex;

    public LoggingJob(Exception ex) {
        this.ex = ex;
    }

    public void run() {
        // write ex to log file
    }
} 
```

# java - 对象类是如何生成的？

> ID：12622690
> 
> 赞同：2
> 
> 时间：2012-09-27T13:36:16.397
> 
> 标签：java, compilation

我只是想知道 java.lang.Object、java.lang.String 等类（在 Oracle 提供的 rt.jar 内）是如何从 .java 源文件生成的。**我认为，他们的javac**不可能编译它们。

我试图编译包含“class Dummy{}”的 Dummy.java

lab@labb:~/Documents$ 设置 PATH=.:$JAVA_HOME/bin

lab@labb:~/Documents$ 设置 CLASSPATH=。

lab@labb:~/Documents$ javac -verbose Dummy.java

[解析开始RegularFileObject[Dummy.java]]

【解析完成12ms】

[源文件的搜索路径：.]

【类文件的搜索路径：/usr/lib/jvm/java-7-oracle/jre/lib/resources.jar,/usr/lib/jvm/java-7-oracle/jre/lib/rt.jar,/ usr/lib/jvm/java-7-oracle/jre/lib/sunrsasign.jar,/usr/lib/jvm/java-7-oracle/jre/lib/jsse.jar,/usr/lib/jvm/java- 7-oracle/jre/lib/jce.jar,/usr/lib/jvm/java-7-oracle/jre/lib/charsets.jar,/usr/lib/jvm/java-7-oracle/jre/classes, /usr/lib/jvm/java-7-oracle/jre/lib/ext/sunpkcs11.jar,/usr/lib/jvm/java-7-oracle/jre/lib/ext/dnsns.jar,/usr/lib /jvm/java-7-oracle/jre/lib/ext/zipfs.jar,/usr/lib/jvm/java-7-oracle/jre/lib/ext/localedata.jar,/usr/lib/jvm/java -7-oracle/jre/lib/ext/sunec.jar,/usr/lib/jvm/java-7-oracle/jre/lib/ext/sunjce_provider.jar,.]

[加载 ZipFileIndexFileObject[/usr/lib/jvm/java-7-oracle/lib/ct.sym(META-INF/sym/rt.jar/java/lang/ **Object** .class)]]

[检查假人]

[加载 ZipFileIndexFileObject[/usr/lib/jvm/java-7-oracle/lib/ct.sym(META-INF/sym/rt.jar/java/lang/ **AutoCloseable** .class)]]

[写了 RegularFileObject[Dummy.class]] [总共 131 毫秒]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:44:34.107

所有类都可以表示为 Java 代码（您可以在这里看到：http: [//www.docjar.com/docs/api/java/lang/package-index.html](http://www.docjar.com/docs/api/java/lang/package-index.html)）并由 javac 编译。`Object`是一种特殊情况，当被 VM 加载时，它不会获得超类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:54:55.100

您可以使用反编译器（例如[JAD](http://www.varaneckas.com/jad/)）来查看 .class 的源文件的外观。

在基类的情况下，需要一些方法，`native`并且它们的实现在依赖于系统的库（如`dll`Windows 或`so`Linux）中提供。

String 只有一种方法 native（实习生）。对象有更多。JRE 中有一些类需要本地来完成与 SO 相关的事情，并且非常低级，例如原子值或线程（感谢 @yshavit），但绝大多数 JRE 库代码都是用 Java 编程的。

# javascript - Css\javascript 过渡

> ID：12622694
> 
> 赞同：0
> 
> 时间：2012-09-27T13:36:28.633
> 
> 标签：javascript, css-transitions

我正在尝试优化网站，它有很多不同的脚本，以及很多图形转换。其中一些是css3，一些js（带有一些框架）那么计算机的哪一部分负责渲染过渡？是cpu还是gpu？

# c++ - Glib::RefPtr 的转换或转换 到 Gtk::Widget& 需要

> ID：12622695
> 
> 赞同：0
> 
> 时间：2012-09-27T13:36:30.770
> 
> 标签：c++, g++, gtkmm, glibmm

**我无法将 Glib::RefPtr 转换为 GtkWidget，其中 T 派生自 Widget：**

```
#include <gtkmm/drawingarea.h>
#include <gtkmm/application.h>
#include <gtkmm/window.h>
#include <gtkmm/fixed.h>

class MyPic : public Gtk::DrawingArea {
public:
};

int main(int argc, char* argv[]) {
    Gtk::Fixed f;

    Gtk::DrawingArea da; // this works.
    Gtk::DrawingArea mp; // this works.
    Glib::RefPtr<MyPic> rp_mp; // this not.

    f.put(da, 10, 20);
    f.put(mp, 10, 30);
    f.put(rp_mp, 10, 40); // Line # 19
} 
```

这不会编译：

```
joerg> g++ x.cpp `pkg-config --cflags --libs gtkmm-3.0`
x.cpp: In function ‘int main(int, char**)’:
x.cpp:19:24: error: no matching function for call to ‘Gtk::Fixed::put(Glib::RefPtr<MyPic>&, int, int)’
x.cpp:19:24: note: candidate is:
/usr/include/gtkmm-3.0/gtkmm/fixed.h:123:8: note: void Gtk::Fixed::put(Gtk::Widget&, int, int)
/usr/include/gtkmm-3.0/gtkmm/fixed.h:123:8: note:   no known conversion for argument 1 from ‘Glib::RefPtr<MyPic>’ to ‘Gtk::Widget&’

joerg> g++ --version 
```

g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 版权所有 (C) 2011 Free Software Foundation, Inc. 这是免费软件；查看复制条件的来源。没有保修；甚至不考虑适销性或特定用途的适用性。

Glib::RefPtr 是一个智能指针，而[DrawingArea](http://developer.gnome.org/gtkmm/stable/classGtk_1_1DrawingArea.html)是从 Widget 派生的，所以这应该可以工作。

取消引用（如`f.put(*rp_mp,...)`）故意不起作用。文档指出：[“*与大多数其他智能指针不同，RefPtr 不支持通过 * object_ptr.* 取消引用”](http://developer.gnome.org/glibmm/unstable/classGlib_1_1RefPtr.html)

如何从**SmartPtr获取****Widget&**？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:58:46.863

尽管我怀疑您可以根据需要进行设计，但您可以取消引用，例如`Glib::RefPtr foo`：

```
some_method_needing_a_reference(*foo.operator->()) 
```**

# javascript - Windows 8 Metro 应用程序对话框更改字体颜色

> ID：12622697
> 
> 赞同：1
> 
> 时间：2012-09-27T13:36:39.803
> 
> 标签：javascript, css, windows-8, microsoft-metro

如何使用Javascript更改Windows 8 Metro中MessageDialogBox内按钮的颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:21:44.840

你不能。您将需要构建自己的基于弹出控件的对话框，以获得完全可定制的对话框体验。

# c# - int 值类型如何设置？

> ID：12622698
> 
> 赞同：0
> 
> 时间：2012-09-27T13:36:39.600
> 
> 标签：c#, asp.net-mvc

我需要设置值 int。这是怎么做的？

```
 var list = from Enum e in Enum.GetValues(enumValue.GetType())
           select new SelectListItem
           {
               Selected = e.Equals(enumValue),
               Text = e.ToDescription(),
               Value = e.ToString()// need int
           }; 
```

如果我设置`Value = ((int)e).ToString()`

我得到错误：

> 无法将类型“System.Enum”转换为“int”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:38:05.120

C# 中的 AFAIK，枚举可以转换为 int：

```
 Value = ((int)e).ToString() 
```

只要底层类型是 int 或可转换为 int。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T13:38:08.790

转换为 an`int`并从中获取字符串：

```
Value = ((int)e).ToString() 
```

所有枚举都基于整数类型，因此强制转换是最简单的解决方案（尽管如果枚举基于 a `long`，您可能会出现溢出）。

此外，从返回的类型`Enum.GetValues`是枚举的值 - 您的 LINQ 应该是：

```
from e in Enum.GetValues(enumValue.GetType()) 
```

As`e`不会是*type*`Enum`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T13:38:36.210

```
Value = Convert.ToInt32(e.ToString()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T13:41:17.913

```
 var list = from Enum e in Enum.GetValues(enumValue.GetType())
       select new SelectListItem
       {
           Selected = e.Equals(enumValue),
           Text = e.ToDescription(),
           Value = (int) e
       }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T13:38:52.313

你可以试试

```
(int)YourEnum.enumValue; 
```

或者

```
(int)e 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T13:42:41.777

您可以通过将枚举转换为 int 类型来直接转换它。

# php - 使用 Youtube 的 XML 从视频中获取标签

> ID：12622702
> 
> 赞同：0
> 
> 时间：2012-09-27T13:36:48.697
> 
> 标签：php, xml, youtube, youtube-api

我正在寻找一种通过 XML 和 PhP 从用户的最新视频中提取标签的方法。

它曾经通过这种类型的 XML [http://gdata.youtube.com/feeds/api/users/fredy31/uploads](http://gdata.youtube.com/feeds/api/users/fredy31/uploads)工作，但现在看来视频标签已从该 XML 文件中删除。

那么如何从上传的 XML 中获取视频标签？

基本上，我要做的是将每个视频搜索标签放在一个数组中，供我以后使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T16:38:41.460

标签/关键字现在仅在您发出请求授权为视频所有者时返回：http: [//apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html](http://apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:36:11.733

YouTube 的 API 不能再用于从其他用户[**检索标签**](http://apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html)，但您可以使用新格式从您自己上传的视频或您有权访问的任何帐户中检索标签。

视频标签应在 XML 中显示为： `<media:keywords>`

`</media:description>`如果您无权访问用户帐户，那么您只会在描述之后立即看到此调用`</media:keywords>`。这就是我使用您和我的帐户从 XML 中得到的。它必须通过使用 YouTube 的 API 的授权应用程序来完成。

# database - 数据库设计：基于年份的架构变化？

> ID：12622704
> 
> 赞同：0
> 
> 时间：2012-09-27T13:36:56.513
> 
> 标签：database, database-design, oracle11g, database-schema

我的数据集中有一段特定的数据很可能会根据年份（准确地说是财政年度）发生变化。如何在数据库模式中解释这样的数据？例如，我已经根据年份（XYZ_2009、XYZ_2010）设置了几个字段，但我担心数据库表会变长并且维护起来很麻烦（必须每年添加一个新字段）。这是处理此类问题的首选方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:18:36.053

为什么每年都需要一个新领域？我会走一个与主表一对多的新表的路线：

```
tblMain
PriKeyMain, Field1, Field2, XYZ_2009, XYZ_2010, XYZ_2011, ABC_2009, ABC_2010, ABC_2011 
```

变成：

```
tblMain
PriKeyMain, Field1, Field2

tblDetail
PriKeyDetail, PriKeyMain, Year, XYZ, ABC 
```

# php - PHP、PCNTL 和共享内存中的队列

> ID：12622706
> 
> 赞同：1
> 
> 时间：2012-09-27T13:37:07.660
> 
> 标签：php, queue, shared-memory, pcntl

我在 php 中实现共享内存时遇到问题。是否可以在共享内存中创建队列？

代码在这里：

```
// queue class
class AddressQueue extends \Nette\Object {

private $queue = array();

public function add($var) {
    $this->queue[] = $var;
}

public function get() {
    return array_shift($this->queue);
}

public function num() {
    return count($this->queue);
}
}

$segmentKey = "987654";
$permissions = 0666;
$size = 8092;
$sharedSegment = shm_attach($segmentKey, $size, $permissions);

shm_put_var($sharedSegment, QUEUE_INDEX, new AddressQueue()); 
```

...此时，如何将项目（int 或非常短的字符串）添加到队列中？甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:38:58.960

好吧，您可以使用 将其取回`shm_get_var()`，但是这样做没有意义，只需在使用之前添加它，`shm_put_var()`如下所示：

```
$addrQueue = new AddressQueue();
$addrQueue->add('whatever');
shm_put_var($sharedSegment, QUEUE_INDEX, $addrQueue); 
```

# javafx-2 - JavaFX 2.0 - 如何动态更改 LineChart 的图例颜色？

> ID：12622709
> 
> 赞同：6
> 
> 时间：2012-09-27T13:37:11.017
> 
> 标签：javafx-2

我正在尝试设置我的 JavaFX 折线图的样式，但我在图例方面遇到了一些麻烦。

我知道如何更改 css 文件中折线图的图例颜色：

`.default-color0.chart-series-line { -fx-stroke: #FF0000, white; }
.default-color1.chart-series-line { -fx-stroke: #00FF00, white; }
.default-color2.chart-series-line { -fx-stroke: #0000FF, white; }

.default-color0.chart-line-symbol { -fx-background-color: #FF0000, white; }
.default-color1.chart-line-symbol { -fx-background-color: #00FF00, white; }
.default-color2.chart-line-symbol { -fx-background-color: #0000FF, white; }`

但这对我的目的来说还不够。我有三个或更多彩色切换按钮和每个按钮的一系列数据。选择按钮后，数据应以与按钮相同的颜色显示。这应该可以通过多选按钮来实现，以便可以同时显示多个系列的数据。

对于图表线，我在单击按钮后通过更改样式来管理它：

`..
dataList.add(series);
..
series.getNode().setStyle("-fx-stroke: rgba(" + rgba + ")");`

如果我取消选择按钮，我会从列表中删除数据。

`dataList.remove(series);`

这对于笔画来说效果很好，但我怎样才能为图例做同样的事情呢？

您可以在下面看到一个示例。首先我点击了红色按钮，因此笔触和图例是红色的（默认颜色 0）。之后，我单击了蓝色按钮。在这里你可以看到问题。笔划是蓝色的，但图例是绿色的，因为使用了默认颜色 1，我不知道如何更改图例颜色。

![在此处输入图像描述](../Images/2ff1748b15d6f605d1bfae61ab820689.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-01T21:03:21.990

我也遇到了这个问题。问题似乎是当数据系列添加到图表时，图例不会同时更新，因此当您查找具有该 seriesN 样式类的组件时，它们还不存在。提出了一种解决方法，可以检测图例项的创建时间，以便可以向它们添加动态样式。

我在图表图例的“getChildrenUnmodifiable()”ObservableList 中添加了一个 ListChangeListener，当图例的每个子项被添加时，它又向每个子项添加一个 ListChangeListener。从这个监听器中，我们可以知道新项目何时被添加到图例中（或删除）。这使我们可以进行动态样式更改。

```
for (Node n : lineChart.getChildrenUnmodifiable())
    {
        if (n instanceof Legend)
        {
            final Legend legend = (Legend) n;

            // remove the legend
            legend.getChildrenUnmodifiable().addListener(new ListChangeListener<Object>()
            {
                @Override
                public void onChanged(Change<?> arg0)
                {
                    for (Node node : legend.getChildrenUnmodifiable())
                    {
                        if (node instanceof Label)
                        {
                            final Label label = (Label) node;
                            label.getChildrenUnmodifiable().addListener(new ListChangeListener<Object>()
                            {
                                @Override
                                public void onChanged(Change<?> arg0)
                                {
                                    //make style changes here
                                }

                            });
                        }
                    }
                }
            });
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-26T21:15:43.043

为了将来参考，可以通过将相关代码包装在对`Platform.runLater()`. 例如：

```
LineChart<Number, Number> plot;
....
Platform.runLater(() -> {
    Node nl = plot.lookup(".default-color0.chart-series-line");
    Node ns = plot.lookup(".default-color0.chart-line-symbol");

    nl.setStyle("-fx-stroke: #333;");
    ns.setStyle("-fx-background-color: #333, white;");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:00:19.767

似乎[这个](https://stackoverflow.com/questions/12197877/javafx-linechart-legend-style)人能够使用他们的类查找用于图例的节点，然后在这些节点上调用 setStyle() 。（我认为他的问题与您的问题无关）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-22T19:34:22.873

此解决方案基于@Chris 的解决方案

```
 if (checkCombo.getCheckModel().isChecked(0)) {
    lineChart.getData().add(seriesTest1);
    changeColorSeries(lineChart.getData().size() - 1, "darkgreen");
 }

 if (checkCombo.getCheckModel().isChecked(3)) {
    lineChart.getData().add(seriesTest2);
    changeColorSeries(lineChart.getData().size() - 1, "darkred");
 }

 private void changeColor(int position, String color) {
        Platform.runLater(() -> {
            Node nl = lineChart.lookup(".default-color" + position + ".chart-series-line");
            Node ns = lineChart.lookup(".default-color" + position + ".chart-line-symbol");
            Node nsl = lineChart.lookup(".default-color" + position + ".chart-legend-item-symbol");

            nl.setStyle("-fx-stroke: " + color + ";");
            ns.setStyle("-fx-background-color: " + color + ", white;");
            nsl.setStyle("-fx-background-color: " + color + ", white;");
        });
 } 
```

# java - 两种连接类型，一种数据库

> ID：12622711
> 
> 赞同：1
> 
> 时间：2012-09-27T13:37:15.997
> 
> 标签：java, php, database, connection

在我的 Web 应用程序中，我想以两种不同的方式访问我的数据库。一个使用 Java，另一个使用 PHP，这有什么问题吗？这样做会是不好的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:39:55.650

不，它一直在发生。

但是，如果您在两个平台上不断重复相同的查询和数据访问，您可能需要考虑创建一个 API 层以使用 Java 或 PHP 与您的数据库进行通信，然后使用该层与您的数据库进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:39:23.780

当然不是，那会很好用。我认为其中没有不好的做法，因为您不是唯一需要从不同应用程序/语言访问同一数据库的人。

# javascript - 使用 Handlebars.compile 的问题

> ID：12622714
> 
> 赞同：3
> 
> 时间：2012-09-27T13:37:30.833
> 
> 标签：javascript, node.js, handlebars.js

我试图让车把安装用于预编译模板。我已按照安装说明 (http://handlebarsjs.com/precompilation.html)，运行安装似乎没有任何问题（见下文）。但是，当我发出编译命令时...

```
handlebars users.handlebars -f templates.js 
```

找不到车把命令。

```
-bash: handlebars: command not found 
```

很想知道这个。

```
(username) ~$ which npm
/usr/local/bin/npm
(username) ~$ which node
/usr/local/bin/node
(username) ~$ npm install -g handlebars
npm http GET https://registry.npmjs.org/handlebars
npm http 304 https://registry.npmjs.org/handlebars
npm http GET https://registry.npmjs.org/uglify-js
npm http GET https://registry.npmjs.org/optimist
npm http 304 https://registry.npmjs.org/uglify-js
npm http 304 https://registry.npmjs.org/optimist
npm http GET https://registry.npmjs.org/wordwrap
npm http 304 https://registry.npmjs.org/wordwrap
/usr/local/share/npm/bin/handlebars -> /usr/local/share/npm/lib/node_modules/handlebars/bin/handlebars
handlebars@1.0.7 /usr/local/share/npm/lib/node_modules/handlebars
├── uglify-js@1.2.6
└── optimist@0.3.4 (wordwrap@0.0.2)
(username) ~$ cd Sites/projectone/templates/
(username) ~/Sites/projectone/templates (master)$ ll
total 8
drwxr-xr-x   3 username  ec_earth  102 Sep 26 23:57 .
drwxr-xr-x  10 username  ec_earth  340 Sep 26 23:58 ..
-rw-r--r--   1 username  ec_earth   17 Sep 26 23:57 users.handlebars
(username) ~/Sites/projectone/templates (master)$ handlebars users.handlebars -f templates.js
-bash: handlebars: command not found 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:47:11.950

您需要使用`node_modules/.bin`目录的完整路径（它们不会自动添加到您的路径中）。

```
/usr/local/share/npm/lib/node_modules/.bin/handlebars users.handlebars -f template.js 
```

# sql - 无法连接到 OpenOffice Base - 用户缺少权限或找不到对象异常

> ID：12622717
> 
> 赞同：0
> 
> 时间：2012-09-27T13:37:35.170
> 
> 标签：sql, jdbc, hsqldb, openoffice-base

我正在尝试从 Java 连接到 OpenOffice Base 数据库并执行查询，但未能成功。

这些是我遵循的步骤：

1) 在 OpenOffice 中创建了一个数据库“TestDB.odb”，以及一个包含列（ID、名称、导演）的表“电影”

2) 下载 hsqldb jar 文件并包含在项目构建路径中

3）使用以下代码连接到它：

```
String file_name_prefix = "C:/Documents and Settings/327701/My Documents/TestDB.odb";
Connection con = null;
Class.forName("org.hsqldb.jdbcDriver"); 
con = DriverManager.getConnection("jdbc:hsqldb:file:" + file_name_prefix, "sa","");
Statement statement = con.createStatement();
String query1 = "SELECT * FROM \"Movies\"";
ResultSet rs = statement.executeQuery(query1); 
```

尽管我能够连接到数据库，但在尝试执行查询时会引发以下异常：

**org.hsqldb.HsqlException：用户缺少权限或找不到对象：电影**

尝试谷歌搜索，但未能解决我的问题。我被卡住了，如果有人可以指导我如何解决这个问题，那就太好了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:48:09.380

您无法连接到 .odb 数据库。您连接的数据库实际上是一组单独的文件，其名称例如 TestDB.odb.script 等。

查看[http://user.services.openoffice.org/en/forum/viewtopic.php?f=83&t=17567](http://user.services.openoffice.org/en/forum/viewtopic.php?f=83&t=17567)，了解如何在服务器模式下从 OOo 外部使用 HSQLDB 数据库。您可以使用 HSQLDB jar 连接到此类数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-17T08:15:41.413

旧线程。

我失去了两天的生命，直到我改变了财产：

spring.jpa.properties.hibernate.globally_quoted_identifiers = false

我之前使用的是 mysql，然后我更改为 hsqldb 以运行一些测试。我没有看就复制并粘贴了这个属性然后你知道 - 墨菲定律......

我希望它有所帮助。

# java - 在程序中获得意外输出

> ID：12622718
> 
> 赞同：0
> 
> 时间：2012-09-27T13:37:35.980
> 
> 标签：java, exception, jdbc

这是代码：

```
 String sql_1 = "select emp_id,password from regid";
    ResultSet rs = st.executeQuery(sql_1);

    while(rs.next())
    {

    if(((employee.equals(rs.getString("emp_id"))) && (password.equals(rs.getString("password"))))==true)
    {

//      String sql2="update regid set regid='"+Datastore.regIds.add(regId)+"' where emp_id='"+employee+"'";
//      st.executeUpdate(sql2);
        System.out.println("2> Employee Id : "+employee+" && Password : "+password);
        System.out.println("3> This employee "+employee+" exsists in the database and registration-password id will be Updated");

    //  resp.setStatus(HttpServletResponse.SC_OK);
        resp.setContentType("text/html");
        PrintWriter out = resp.getWriter();
        out.print("<html><body>");
        out.print("<head>");
        out.print("<title>Policy Page</title>");
        out.print("<link rel='icon' href='../images/favicon.png'/>");
        out.print("</head>");
        String status = (String) req.getAttribute(ATTRIBUTE_STATUS);
        if (status != null)
        {
          out.print("Status :"+status);
        }
        List<String> devices = Datastore.getDevices();
        if (devices.isEmpty())
        {
          out.print("<h2>No  devices registered!</h2>");
        } 
        else
        {

         out.print("<h2>" + devices.size() + " device(s) registered!</h2>");
         out.print("<form name='form' method='POST' action='sendAll'>");
         out.print("<input type='text' name='policy'>");
         resp.setStatus(HttpServletResponse.SC_OK);
         out.print("<input type='submit' value='Apply Policy'>");
         out.print("</form>");
//       System.out.println(HTTP_STATUS);
         System.out.println(HttpServletResponse.SC_OK);
         getServletContext().getRequestDispatcher("/home").forward(req, resp);

        }
        out.print("</body></html>");
        resp.setStatus(HttpServletResponse.SC_OK);

    }

    else {
        resp.setStatus(HttpServletResponse.SC_BAD_REQUEST);
        System.out.println(HttpServletResponse.SC_BAD_REQUEST);
        System.out.println("4> This employee "+employee+" does not exsist in the database");            
    }

    }

//    rs.close();
    } 
```

但是我得到了类似的输出，但是我输入了正确的 emp_id 和密码（仍然显示 4> + java.lang.illegalstateexception（不知道为什么？？:()）：

```
1> Employee : P1 && Password : ppp
400
4> This employee P1 does not exsist in the database
2> Employee Id : P1 && Password : ppp
3> This employee P1 exsists in the database and registration-password id will be Updated
400
4> This employee P1 does not exsist in the database 
```

任何想法.....为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:44:01.003

发生这种情况是因为您的算法包括：

1.  遍历所有员工
2.  如果员工匹配 ID/密码，则打印 2>，否则打印 4>

因此，您将获得一个`2>, 3>`匹配的输出，而所有其他输出都会给您错误 400。

相反，您可以遍历所有员工（尽管最好在 SQL 中添加一个条件以通过密码和员工 ID 缩小结果集的范围），除非您用尽了所有结果并执行了，否则不要输出错误找不到匹配的。

```
PreparedStatement stmt = null;
try {
    stmt = new PreparedStatement("select * from regis where emp_id=? and password=?");
    stmt.setString(1, employee);
    stmt.setString(2, password);

    ResultSet rs = stmt.executeQuery();
    if(rs.next()) {
        System.out.println("2> Employee Id : "+employee+" && Password : "+password);
        System.out.println("3> This employee "+employee+" exsists in the database and                        
        resp.setContentType("text/html");
        PrintWriter out = resp.getWriter();
        out.print("<html><body>");
        out.print("<head>");
        out.print("<title>Policy Page</title>");
        out.print("<link rel='icon' href='../images/favicon.png'/>");
        out.print("</head>");
        String status = (String) req.getAttribute(ATTRIBUTE_STATUS);
        if (status != null)
        {
          out.print("Status :"+status);
        }
        List<String> devices = Datastore.getDevices();
        if (devices.isEmpty())
        {
          out.print("<h2>No  devices registered!</h2>");
        } 
        else
        {

         out.print("<h2>" + devices.size() + " device(s) registered!</h2>");
         out.print("<form name='form' method='POST' action='sendAll'>");
         out.print("<input type='text' name='policy'>");
         resp.setStatus(HttpServletResponse.SC_OK);
         out.print("<input type='submit' value='Apply Policy'>");
         out.print("</form>");
//       System.out.println(HTTP_STATUS);
         System.out.println(HttpServletResponse.SC_OK);
         getServletContext().getRequestDispatcher("/home").forward(req, resp);

        }
        out.print("</body></html>");
        resp.setStatus(HttpServletResponse.SC_OK);

    }

    else {
        resp.setStatus(HttpServletResponse.SC_BAD_REQUEST);
        System.out.println(HttpServletResponse.SC_BAD_REQUEST);
        System.out.println("4> This employee "+employee+" does not exsist in the database");            
    }
}
catch(Exception e) {
    e.printStackTrace();
}
finally {
    try {
        stmt.close();
    } catch(Exception x) {}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T13:46:01.393

你的缩进对你没有帮助。您正在遍历*所有*员工，并比较他们每个人的用户名和密码 - 所以有时您会得到匹配，有时您不会。

此代码存在*多个*问题：

*   如果您只寻找一个结果，请不要向数据库询问所有行！您应该传递查询参数并在数据库中进行过滤。然后，您可以通过查看结果中是否有任何行来确定是否匹配。
*   你的缩进让你很难看到发生了什么
*   您正在使用大量不必要的括号和比较`true`，例如

    ```
    if(((employee.equals(rs.getString("emp_id"))) && (password.equals(rs.getString("password"))))==true) 
    ```

    会更好

    ```
    if(employee.equals(rs.getString("emp_id") && 
       password.equals(rs.getString("password")) 
    ```

*   您似乎使用的是纯文本密码。**不要这样做。**

# visual-studio - TFS2012：在版本控制中的特定变更集中添加标签？

> ID：12622720
> 
> 赞同：26
> 
> 时间：2012-09-27T13:37:37.633
> 
> 标签：visual-studio, tfs, visual-studio-2012

我想在我的 TFS2012 版本控制中为特定变更集添加标签。我右键单击分支-> 高级-> 应用标签。我过去选择了一个特定的变更集并创建了标签。但是我创建的所有标签都绑定到该分支中的第一个变更集，而不是我在标签对话框中输入的那个。

这是一个错误吗？或者如何将标签添加到特定的变更集？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-28T04:43:24.600

标签将在该特定变更集的修订版中标记目录中的所有文件/文件夹。

这意味着如果您右键单击包含文件夹并查看标签，它看起来就像将标签放在分支的第一个变更集上（因为主文件夹可能自第一个变更集以来没有更改）。

如果您在源代码管理资源管理器中右键单击并选择 -> 查找 -> 按标签查找，然后选择您的标签并单击编辑，您将看到标签中所有文件的列表以及它们在标签变更集。

长话短说，这不是错误，只是令人困惑。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2015-11-13T16:37:51.447

在visual studio中，文件->源代码控制->高级->应用标签在窗口中提供项目/源代码路径，点击创建。当然，您可以在源代码管理历史记录中找到您的标签。在每次实时发布之后，这是给您的解决方案人员贴标签的好习惯。

# json - 压缩JSON传递的数据

> ID：12622721
> 
> 赞同：1
> 
> 时间：2012-09-27T13:37:38.897
> 
> 标签：json, jsonp

我不知道我问的问题是否有效分块并循环传递数据包，数据包的数量越多，传递完整数据所需的时间就越多，这最终会导致性能问题。（仅供参考，我的网络服务器有点慢）有什么方法可以压缩我的数据并一次发送，而不是以数据包的形式发送。或者我可以将我的数据（大数据）从应用程序传递到另一个的任何其他方式。需要这个尽快提前谢谢。

# python - 如何使用 python 直接进行字母到数字的替换？

> ID：12622726
> 
> 赞同：0
> 
> 时间：2012-09-27T13:37:49.850
> 
> 标签：python, python-2.7

我正在尝试将输入的用户名 (Rex Ryan) 转换为 6 个字符的名称 (ryanre) 并将其更改为编号 ID (A=01, B=02, ..., Z=26)。

我尝试使用以下方法将全名转换为 6 个字符的名称：

```
def converter():
    first = raw_input('What is the first name of the user? ')
    last = raw_input('What is the last name of the user? ')
    first[0:2] = firstname
    last[0:4] = lastname
    user = lastname + firstname
    print user 
```

运行它时，我不断收到“未定义名字”。任何方向或阅读都会有所帮助；我想主要靠自己做这件事。如果我想为我写的，我可以下载一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T13:40:26.697

你有你的陈述倒退：

```
firstname = first[0:2] 
```

至于将返回值转换为数字序列，请查看[`ord`](http://docs.python.org/library/functions.html#ord). 它将执行您描述的映射。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T13:40:26.353

你应该这样做：

```
def converter():
    first = raw_input('What is the first name of the user? ')
    last = raw_input('What is the last name of the user? ')
    firstname = first[0:2]
    lastname =  last[0:4]
    user = lastname + firstname
    print user 
```

为了生成 ID，您可以执行以下操作：

找到每个字母的索引`ascii_lowercase`并将它们全部递增 1 并将它们连接起来：

```
In [5]: from string import ascii_lowercase

In [6]: ascii_lowercase
Out[6]: 'abcdefghijklmnopqrstuvwxyz'

In [7]: ''.join("{0:02}".format(ascii_lowercase.index(x)+1) for x in 'ryanre')
Out[7]: '182501141805' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:58:10.837

您还可以生成一个 dict 用作​​查找。首先创建一个要用于 ID 的操作整数列表（这里从 0 开始）。

```
t = 'ryanre'
num = list(range(25)) 
```

BIF与其他答案中已经提到`chr()`的相反。[阅读这里的功能](http://docs.python.org/library/functions.html#chr)。`ord()`

```
alpha = list(map(chr, range(97, 123)))
db = dict(zip(alpha,a)) # merge the lists into a dict
trasltd = [db[x] for x in t] 
res = ''.join(str(x) for x in trasltd) # merge the elements of the list 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T13:43:57.073

您可以使用`split`so 将名称作为单个字符串输入，`upper`将其转换为单个大小写，然后`ord`与偏移值（提示：substract `ord('A')`）结合以获得您要查找的每个字符的数值。然后，您需要查看字符串格式，以便在构建输出字符串时用前导 0 填充单个数字值。

# android - clearColorFilter() 不适用于 android 2.3

> ID：12622729
> 
> 赞同：3
> 
> 时间：2012-09-27T13:37:58.100
> 
> 标签：android, android-layout

我正在使用 setColorFilter 为某些按钮着色...代码是这样的：

```
 final Button falso = (Button) findViewById(R.id.falso);
    final Button vero = (Button) findViewById(R.id.vero);

    vero.setOnClickListener(new OnClickListener() {         
        public void onClick(View v) {
            vero.getBackground().setColorFilter(new LightingColorFilter(0x00000000, 0x00FF0FF));    
            falso.getBackground().clearColorFilter();
            esame.set("V");
        }
    });

    falso.setOnClickListener(new OnClickListener() {            
        public void onClick(View v) {
            falso.getBackground().setColorFilter(new LightingColorFilter(0x00000000, 0x00FF0FF));
            vero.getBackground().clearColorFilter(); 
            esame.set("F");
        }
    }); 
```

当我单击“vero”按钮时，我想重置“falso”的颜色，反之亦然。我在 android ics 上尝试了这段代码，一切都很好，但是当我在 android 2.3 上尝试它时，我感到很惊讶。

当我单击按钮时，颜色不会重置，我不明白为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:39:18.933

我找到了解决方案：

```
use button.invalidate(); 
```

在我清除背景后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:43:45.463

将 ColorFilter 设置为 0 将通过清除过滤器来完成您的工作。

```
vero.setInt(vero.getBackground(), "setColorFilter", 0); 
```

# ios - 脸书 ios sdk 3.1 ios 5.1 xcode 4.5

> ID：12622733
> 
> 赞同：2
> 
> 时间：2012-09-27T13:38:18.770
> 
> 标签：ios, facebook

我想将 facebook 与我的应用程序集成。我从 fb sdk 中获取了一个示例应用程序，并从那里复制了所需的代码。看起来很容易。

我根据需要添加了社交、广告支持和帐户框架。我能够建立和链接。但是在运行时，它会显示错误，当我在互联网上搜索时，我知道这些框架仅适用于 ios6。

“从应用程序引用的社交框架”的错误。当我删除这个框架时，adsupport 框架也是如此。我尝试将这三个作为可选框架，但随后它给出了这样的错误[Facebook iOS SDK 3.1 with XCode 4.2 linker errors](https://stackoverflow.com/questions/12598209/facebook-ios-sdk-3-1-with-xcode-4-2-linker-errors)

那么我可以使用 sdk 3.1 将 fb 与我的应用程序集成还是使用 3.0 或以前的版本？还是一些不同的实现方式？如果我必须使用以前的版本，我该怎么做？

编辑：有一个带有“hello facebook”示例应用程序的自述文件，它说它的要求是 iOS4.0！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:28:24.320

这与避免使用 Facebook SDK 中的 iOS 6.0 功能一样重要。

使用[Facebook SDK 3.0](http://developers.facebook.com/ios/downloads/)并执行中所示的相反步骤

[https://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-3.0-to-3.1/](https://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-3.0-to-3.1/)

*   删除添加的附加框架依赖项
*   处理 Facebook 登录取消流程的变化
*   更改 openSessionWithAllowLoginUI 的返回值:(BOOL)allowLoginUI 实现

//对于 FaceBookSDK 3.1

```
[FBSession openActiveSessionWithReadPermissions:nil
                    allowLoginUI:allowLoginUI
               completionHandler:^(FBSession *session,
                                   FBSessionState state,
                                   NSError *error) {
                                      [self sessionStateChanged:session
                                                          state:state
                                                          error:error];
                                   }];   

 //For FaceBookSDK 3.0  use this

[FBSession openActiveSessionWithPermissions:nil 
                               allowLoginUI:allowLoginUI
                          completionHandler:^(FBSession *session,
                                              FBSessionState state,
                                              NSError *error) {
                                [self sessionStateChanged:session 
                                                    state:state 
                                                    error:error];
                                             }]; 
```

# ios - 为什么应用商店不接受我的路由应用覆盖文件？

> ID：12622734
> 
> 赞同：0
> 
> 时间：2012-09-27T13:38:21.890
> 
> 标签：ios

上传 Aus.geojson 文件（路由应用程序覆盖文件）后，我收到以下错误：您上传的 JSON 文件无效。该文件必须只包含一个 multipolygon 类型的元素。下面是我提交的 JSON 文件，其中我只看到一个多面元素。为什么我收到错误消息？

```
{
"type": "FeatureCollection",
"features": [
{ "type": "Feature", "properties": { "name": "Australia" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 145.397978, -40.792549 ], [ 146.364121, -41.137695 ], [ 146.908584, -41.000546 ], [ 147.689259, -40.808258 ], [ 148.289068, -40.875438 ], [ 148.359865, -42.062445 ], [ 148.017301, -42.407024 ], [ 147.914052, -43.211522 ], [ 147.564564, -42.937689 ], [ 146.870343, -43.634597 ], [ 146.663327, -43.580854 ], [ 146.048378, -43.549745 ], [ 145.431930, -42.693776 ], [ 145.295090, -42.033610 ], [ 144.718071, -41.162552 ], [ 144.743755, -40.703975 ], [ 145.397978, -40.792549 ] ] ], [ [ [ 143.561811, -13.763656 ], [ 143.922099, -14.548311 ], [ 144.563714, -14.171176 ], [ 144.894908, -14.594458 ], [ 145.374724, -14.984976 ], [ 145.271991, -15.428205 ], [ 145.485260, -16.285672 ], [ 145.637033, -16.784918 ], [ 145.888904, -16.906926 ], [ 146.160309, -17.761655 ], [ 146.063674, -18.280073 ], [ 146.387478, -18.958274 ], [ 147.471082, -19.480723 ], [ 148.177602, -19.955939 ], [ 148.848414, -20.391210 ], [ 148.717465, -20.633469 ], [ 149.289420, -21.260511 ], [ 149.678337, -22.342512 ], [ 150.077382, -22.122784 ], [ 150.482939, -22.556142 ], [ 150.727265, -22.402405 ], [ 150.899554, -23.462237 ], [ 151.609175, -24.076256 ], [ 152.073540, -24.457887 ], [ 152.855197, -25.267501 ], [ 153.136162, -26.071173 ], [ 153.161949, -26.641319 ], [ 153.092909, -27.260300 ], [ 153.569469, -28.110067 ], [ 153.512108, -28.995077 ], [ 153.339095, -29.458202 ], [ 153.069241, -30.350240 ], [ 153.089602, -30.923642 ], [ 152.891578, -31.640446 ], [ 152.450002, -32.550003 ], [ 151.709117, -33.041342 ], [ 151.343972, -33.816023 ], [ 151.010555, -34.310360 ], [ 150.714139, -35.173460 ], [ 150.328220, -35.671879 ], [ 150.075212, -36.420206 ], [ 149.946124, -37.109052 ], [ 149.997284, -37.425261 ], [ 149.423882, -37.772681 ], [ 148.304622, -37.809061 ], [ 147.381733, -38.219217 ], [ 146.922123, -38.606532 ], [ 146.317922, -39.035757 ], [ 145.489652, -38.593768 ], [ 144.876976, -38.417448 ], [ 145.032212, -37.896188 ], [ 144.485682, -38.085324 ], [ 143.609974, -38.809465 ], [ 142.745427, -38.538268 ], [ 142.178330, -38.380034 ], [ 141.606582, -38.308514 ], [ 140.638579, -38.019333 ], [ 139.992158, -37.402936 ], [ 139.806588, -36.643603 ], [ 139.574148, -36.138362 ], [ 139.082808, -35.732754 ], [ 138.120748, -35.612296 ], [ 138.449462, -35.127261 ], [ 138.207564, -34.384723 ], [ 137.719170, -35.076825 ], [ 136.829406, -35.260535 ], [ 137.352371, -34.707339 ], [ 137.503886, -34.130268 ], [ 137.890116, -33.640479 ], [ 137.810328, -32.900007 ], [ 136.996837, -33.752771 ], [ 136.372069, -34.094766 ], [ 135.989043, -34.890118 ], [ 135.208213, -34.478670 ], [ 135.239218, -33.947953 ], [ 134.613417, -33.222778 ], [ 134.085904, -32.848072 ], [ 134.273903, -32.617234 ], [ 132.990777, -32.011224 ], [ 132.288081, -31.982647 ], [ 131.326331, -31.495803 ], [ 129.535794, -31.590423 ], [ 128.240938, -31.948489 ], [ 127.102867, -32.282267 ], [ 126.148714, -32.215966 ], [ 125.088623, -32.728751 ], [ 124.221648, -32.959487 ], [ 124.028947, -33.483847 ], [ 123.659667, -33.890179 ], [ 122.811036, -33.914467 ], [ 122.183064, -34.003402 ], [ 121.299191, -33.821036 ], [ 120.580268, -33.930177 ], [ 119.893695, -33.976065 ], [ 119.298899, -34.509366 ], [ 119.007341, -34.464149 ], [ 118.505718, -34.746819 ], [ 118.024972, -35.064733 ], [ 117.295507, -35.025459 ], [ 116.625109, -35.025097 ], [ 115.564347, -34.386428 ], [ 115.026809, -34.196517 ], [ 115.048616, -33.623425 ], [ 115.545123, -33.487258 ], [ 115.714674, -33.259572 ], [ 115.679379, -32.900369 ], [ 115.801645, -32.205062 ], [ 115.689611, -31.612437 ], [ 115.160909, -30.601594 ], [ 114.997043, -30.030725 ], [ 115.040038, -29.461095 ], [ 114.641974, -28.810231 ], [ 114.616498, -28.516399 ], [ 114.173579, -28.118077 ], [ 114.048884, -27.334765 ], [ 113.477498, -26.543134 ], [ 113.338953, -26.116545 ], [ 113.778358, -26.549025 ], [ 113.440962, -25.621278 ], [ 113.936901, -25.911235 ], [ 114.232852, -26.298446 ], [ 114.216161, -25.786281 ], [ 113.721255, -24.998939 ], [ 113.625344, -24.683971 ], [ 113.393523, -24.384764 ], [ 113.502044, -23.806350 ], [ 113.706993, -23.560215 ], [ 113.843418, -23.059987 ], [ 113.736552, -22.475475 ], [ 114.149756, -21.755881 ], [ 114.225307, -22.517488 ], [ 114.647762, -21.829520 ], [ 115.460167, -21.495173 ], [ 115.947373, -21.068688 ], [ 116.711615, -20.701682 ], [ 117.166316, -20.623599 ], [ 117.441545, -20.746899 ], [ 118.229559, -20.374208 ], [ 118.836085, -20.263311 ], [ 118.987807, -20.044203 ], [ 119.252494, -19.952942 ], [ 119.805225, -19.976506 ], [ 120.856220, -19.683708 ], [ 121.399856, -19.239756 ], [ 121.655138, -18.705318 ], [ 122.241665, -18.197649 ], [ 122.286624, -17.798603 ], [ 122.312772, -17.254967 ], [ 123.012574, -16.405200 ], [ 123.433789, -17.268558 ], [ 123.859345, -17.069035 ], [ 123.503242, -16.596506 ], [ 123.817073, -16.111316 ], [ 124.258287, -16.327944 ], [ 124.379726, -15.567060 ], [ 124.926153, -15.075100 ], [ 125.167275, -14.680396 ], [ 125.670087, -14.510070 ], [ 125.685796, -14.230656 ], [ 126.125149, -14.347341 ], [ 126.142823, -14.095987 ], [ 126.582589, -13.952791 ], [ 127.065867, -13.817968 ], [ 127.804633, -14.276906 ], [ 128.359690, -14.869170 ], [ 128.985543, -14.875991 ], [ 129.621473, -14.969784 ], [ 129.409600, -14.420670 ], [ 129.888641, -13.618703 ], [ 130.339466, -13.357376 ], [ 130.183506, -13.107520 ], [ 130.617795, -12.536392 ], [ 131.223495, -12.183649 ], [ 131.735091, -12.302453 ], [ 132.575298, -12.114041 ], [ 132.557212, -11.603012 ], [ 131.824698, -11.273782 ], [ 132.357224, -11.128519 ], [ 133.019561, -11.376411 ], [ 133.550846, -11.786515 ], [ 134.393068, -12.042365 ], [ 134.678632, -11.941183 ], [ 135.298491, -12.248606 ], [ 135.882693, -11.962267 ], [ 136.258381, -12.049342 ], [ 136.492475, -11.857209 ], [ 136.951620, -12.351959 ], [ 136.685125, -12.887223 ], [ 136.305407, -13.291230 ], [ 135.961758, -13.324509 ], [ 136.077617, -13.724278 ], [ 135.783836, -14.223989 ], [ 135.428664, -14.715432 ], [ 135.500184, -14.997741 ], [ 136.295175, -15.550265 ], [ 137.065360, -15.870762 ], [ 137.580471, -16.215082 ], [ 138.303217, -16.807604 ], [ 138.585164, -16.806622 ], [ 139.108543, -17.062679 ], [ 139.260575, -17.371601 ], [ 140.215245, -17.710805 ], [ 140.875463, -17.369069 ], [ 141.071110, -16.832047 ], [ 141.274095, -16.388870 ], [ 141.398222, -15.840532 ], [ 141.702183, -15.044921 ], [ 141.563380, -14.561333 ], [ 141.635520, -14.270395 ], [ 141.519869, -13.698078 ], [ 141.650920, -12.944688 ], [ 141.842691, -12.741548 ], [ 141.686990, -12.407614 ], [ 141.928629, -11.877466 ], [ 142.118488, -11.328042 ], [ 142.143706, -11.042737 ], [ 142.515260, -10.668186 ], [ 142.797310, -11.157355 ], [ 142.866763, -11.784707 ], [ 143.115947, -11.905630 ], [ 143.158632, -12.325656 ], [ 143.522124, -12.834358 ], [ 143.597158, -13.400422 ], [ 143.561811, -13.763656 ] ] ] ] } }

]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:58:19.470

我相信开始和结束坐标必须匹配：

[https://stackoverflow.com/a/12573711/785716](https://stackoverflow.com/a/12573711/785716)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-02T20:02:06.817

对于任何努力完成这项工作的人，请使用[它](http://geojson.io/)来生成`.geojson`文件并更改`type`为`MultiPolygon`并将多边形数组添加到坐标对象。添加这些多边形后，您的`.geojson`文件应如下所示，

**请注意`[]`内部`coordinates`以及您的开始坐标和结束坐标应该匹配**

[![在此处输入图像描述](../Images/8659c7759bdef9d99d3a7e92aa9dc178.png)](https://i.stack.imgur.com/JPJ3k.png)

这是一些工作`.geojson`片段。

```
{
  "type": "MultiPolygon",
  "coordinates": [
    [
      [
        [
          3.33984375,
          46.49839225859763
        ],
        [
          15.732421875,
          46.49839225859763
        ],
        [
          15.732421875,
          55.7765730186677
        ],
        [
          3.33984375,
          55.7765730186677
        ],
        [
          3.33984375,
          46.49839225859763
        ]
      ]
    ]
  ]
} 
```

有关更多信息，请参阅[Apple 文档的](https://developer.apple.com/library/archive/documentation/UserExperience/Conceptual/LocationAwarenessPG/ProvidingDirections/ProvidingDirections.html#//apple_ref/doc/uid/TP40009497-CH8-SW7)**清单 7.2**

# php - 如何使用 facebook graph api 粘贴活动的个人资料图片

> ID：12622736
> 
> 赞同：0
> 
> 时间：2012-09-27T13:38:25.013
> 
> 标签：php, facebook, events

我想为我网站的订阅者自动生成事件。这工作正常，但我无法粘贴活动的个人资料图片

用于创建事件（正常工作）：

```
$access_token = 'app_access_token';
$url = "https://graph.facebook.com/app_id/events";
$postdata = "access_token=$access_token&name=$name&start_time=$start_time&end_time=$end_time&description=$description&privacy=$privacy&location=$location&picture=$picture_source";             
$event_code = curl_sending_newsfeed_facebook($url, $postdata); 
```

用于粘贴图片

```
$picture_source = "pic_source.jpg";             
$url = "https://graph.facebook.com/event_id/picture?source=$picture_source&access_token=$access_token";
$postdata = "";
$pic_code = curl_sending_newsfeed_facebook($url, $postdata); 
```

# java - 如何更改 jboss 日志记录级别以显示我正在调用的 java 类？

> ID：12622738
> 
> 赞同：0
> 
> 时间：2012-09-27T13:38:30.880
> 
> 标签：java, logging, jboss

是否可以设置 jboss 来显示我调用了哪个 URL，我正在调用哪个类，以及我发送给它的参数是什么？

我将我的类 log4j.xml 设置为 TRACE，但这可能不是要更改的正确 .xml 文件。它似乎没有做任何事情。也许我没有看正确的日志？我只看到 boot、errFile 和 server.log。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:58:12.367

您可能想要启用`RequestDumper`.

在 Jboss 4.xx 中可以在文件中找到

.../server/[YOUR_CONFIG]/deploy/jboss-web.deployer/server.xml

```
 <!-- Uncomment to enable request dumper. This Valve "logs interesting 
         contents from the specified Request (before processing) and the 
         corresponding Response (after processing). It is especially useful 
         in debugging problems related to headers and cookies."
    -->

    <Valve className="org.apache.catalina.valves.RequestDumperValve" /> 
```

# android - 从 DialogFragment 获取值

> ID：12622742
> 
> 赞同：22
> 
> 时间：2012-09-27T13:38:36.527
> 
> 标签：android, android-alertdialog

我希望`DialogFragment`返回一个在`editQuantity`解雇时输入的值给我。

但我没有办法让它发挥作用。我可以通过传递值来做到这一点，`intent`但这会破坏当前活动的进度。

除了通过之外，还有什么方法`intent`可以让我返回价值吗？

```
package com.example.myprojectname;

import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.DialogInterface.OnClickListener;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.text.InputType;
import android.util.Log;
import android.widget.EditText;

public class QuantityDialogFragment extends DialogFragment implements OnClickListener { 

    private EditText editQuantity;

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        editQuantity = new EditText(getActivity());
        editQuantity.setInputType(InputType.TYPE_CLASS_NUMBER);

        return new AlertDialog.Builder(getActivity())
        .setTitle(R.string.app_name)
        .setMessage("Please Enter Quantity")
        .setPositiveButton("OK", this)
        .setNegativeButton("CANCEL", null)
        .setView(editQuantity)
        .create();

    }

    @Override
    public void onClick(DialogInterface dialog, int position) {
        String value = editQuantity.getText().toString();
        Log.d("Quantity: ", value);
        dialog.dismiss();       
    }
} 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-27T14:27:24.587

假设您想将结果转发给调用活动:) 试试这个代码片段：

```
public class QuantityDialogFragment extends DialogFragment implements OnClickListener {

    private EditText editQuantity;

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        editQuantity = new EditText(getActivity());
        editQuantity.setInputType(InputType.TYPE_CLASS_NUMBER);

        return new AlertDialog.Builder(getActivity()).setTitle(R.string.app_name).setMessage("Please Enter Quantity")
                .setPositiveButton("OK", this).setNegativeButton("CANCEL", null).setView(editQuantity).create();

    }

    @Override
    public void onClick(DialogInterface dialog, int position) {
        String value = editQuantity.getText().toString();
        Log.d("Quantity: ", value);
        MainActivity callingActivity = (MainActivity) getActivity();
        callingActivity.onUserSelectValue(value);
        dialog.dismiss();
    }
} 
```

并在您的活动中添加：

```
public class MainActivity extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        QuantityDialogFragment dialog = new QuantityDialogFragment();
        dialog.show(getSupportFragmentManager(), "Dialog");
    }

    /**
     * callback method from QuantityDialogFragment, returning the value of user
     * input.
     * 
     * @param selectedValue
     */
    public void onUserSelectValue(String selectedValue) {
        // TODO add your implementation.
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-06T13:51:40.140

更进一步，我在对话框中创建了一个监听器接口，并在主活动中实现了它。

```
public interface OnDialogResultListener {
    public abstract void onPositiveResult(String value);
    public abstract void onNegativeResult();
}

public void setOnDialogResultListener(OnDialogResultListener listener) {
    this.onDialogResultListener = listener;
} 
```

在覆盖内调用 onNegativeResult()`onCancel(DialogInterface)`以及`onPositiveResult(String)`您希望对话框返回值的位置。

`dismiss()`注意：调用后不要忘记对话，`onPositiveResult()`否则对话窗口将保持打开状态。

然后在您的主要活动中，您可以为对话框创建一个侦听器，如下所示：

```
QuantityDialogFragment dialog = new QuantityDialogFragment();
dialog.setOnDialogResultListener(new QuantityDialogFragment.OnDialogResultListener() {
        @Override
        public void onPositiveResult(String value) {
            //Do something...
        }

        @Override
        public void onNegativeResult() {
            //Do something...
        }
    }); 
```

这将使您的对话框在以后更易于重用。

# javascript - 如何遍历 JSON obj 的属性？

> ID：12622744
> 
> 赞同：12
> 
> 时间：2012-09-27T13:38:39.520
> 
> 标签：javascript, jquery, json

> **可能重复：**
> [如何在 JSON 对象上循环？](https://stackoverflow.com/questions/3022358/how-to-loop-on-a-json-object)

我试图找出如何遍历 JSON obj 的属性。我可以通过指定键来获取属性（见下文），但是我如何循环遍历所有属性？

```
var jsonStr = '{"Items":[{"Title": "Title 1", "Description":"Description 1"}]}';

var json_parsed = $.parseJSON(jsonStr);

// Cycle through all list items
$.each(json_parsed.Items, function(i, val) {
    var listItem = $(this);

    var title = listItem.attr('Title');
    var description = listItem.attr('Description');

    // Instead, loop through all attributes

} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-27T13:40:34.197

```
for (var name in json_parsed) {
    console.log(name + "=" + json_parsed[name]);
} 
```

如果您需要检查是否在相关对象上定义了相应的属性，而不是在原型链上的某些对象上（这对于所讨论的情况来说很荒谬，但仍然有用），您可以添加此检查：

```
if (json_parsed.hasOwnProperty(name))
    console.log(name + "=" + json_parsed[name]); 
```

**编辑**

要实际迭代所有数组对象的属性，请使用以下代码段：

```
var items = json_parsed.Items;
for (var i = 0; i < items.length; ++i) {
    console.log("Item #" + i);
    for (var name in items[i]) {
        console.log(name + "=" + items[i][name]);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T13:41:14.027

JSON 对象只是一个 Javascript 对象。如果您已经在使用 jQuery，您可以在其上再次使用 $.each() 来迭代其命名属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T13:44:03.030

```
var jsonStr = '{"Items":[{"Title": "Title 1", "Description":"Description 1"}]}';

var json_parsed = JSON.parse(jsonStr);

var items = json_parsed.Items; // an array

for (var i=0; i<items.length; i++) { // loop over it

     var listItem = items[i]; // an object

     for (var prop in listItem) { // enumerate its property names

         // prop is "Title", "Description" etc
         listItem[prop] // is the respective value

     }

} 
```

# vb.net - Windows 服务设置项目自定义对话框 - 我如何获取变量？

> ID：12622750
> 
> 赞同：0
> 
> 时间：2012-09-27T13:38:56.107
> 
> 标签：vb.net, visual-studio-2010, windows-services, installation, setup-project

关于 Windows 服务的快速问题，我为我的 Windows 服务添加了一个设置项目，并添加了一个自定义对话框，带有 4 个文本字段，但我的问题是如何获取这些信息/变量？

我还为 Windows 服务添加了一个安装程序，然后是安装项目，带有自定义对话框。

信息类似于数据库连接字符串等 - 所以只是字符串值。

这是我的“项目安装程序”代码。如果您想查看我为 Windows 服务添加的安装程序项。

```
 Imports System
Imports System.ComponentModel
Imports System.Configuration.Install
Imports System.ServiceProcess
Imports System.Runtime.InteropServices

Public Class ProjectInstaller

    Public Sub New()
        MyBase.New()

        'This call is required by the Component Designer.
        InitializeComponent()

        My.Settings.TestSetting = Context.Parameters.Item("PathValue")

#If DEBUG Then

        Dim ServicesToRun As ServiceBase()
        ServicesToRun = New ServiceBase() {New tdsCheckService()}
        ServiceBase.Run(ServicesToRun)

#Else

        Dim listener As New tdsCheckService()
        listener.Start()

#End If

    End Sub

    Public Overrides Sub Install(ByVal stateSaver As System.Collections.IDictionary)
        MyBase.Install(stateSaver)
        Dim regsrv As New RegistrationServices
        regsrv.RegisterAssembly(MyBase.GetType().Assembly, AssemblyRegistrationFlags.SetCodeBase)
    End Sub
    Public Overrides Sub Uninstall(ByVal savedState As System.Collections.IDictionary)
        MyBase.Uninstall(savedState)
        Dim regsrv As New RegistrationServices
        regsrv.UnregisterAssembly(MyBase.GetType().Assembly)
    End Sub

    Private Sub ServiceProcessInstaller1_AfterInstall(sender As Object, e As InstallEventArgs) Handles ServiceProcessInstaller1.AfterInstall

    End Sub

    Private Sub ServiceInstaller1_AfterInstall(sender As Object, e As InstallEventArgs) Handles ServiceInstaller1.AfterInstall

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:02:46.937

您应该能够使用 Context 对象访问它们。

```
 'Get Protected Configuration Provider name from custom action parameter
        Dim variableName As String = Context.Parameters.Item("dialogSettingName")

  Public Overrides Sub Install(ByVal stateSaver As System.Collections.IDictionary)
    MyBase.Install(stateSaver) 
```

# google-api - 对设备使用 OAuth 2.0 - Google API - Google Drive

> ID：12622754
> 
> 赞同：1
> 
> 时间：2012-09-27T13:39:02.330
> 
> 标签：google-api, oauth-2.0, google-drive-api

我查看了developers.google的一些文档和stackoverflow中的一些问题，我真的很想找到一个客观的答案，关于使用谷歌OAuth服务器对应用程序进行身份验证并授予将文档下载到谷歌驱动器帐户的访问权限，没有浏览器交互。

据我所知，诸如“将 OAuth 2.0 用于服务器到服务器应用程序”、“将 OAuth 2.0 用于设备”之类的文档，在这里回答，我找不到一篇文章说“可以授权应用程序从没有浏览器的设备中的通用 Google Drive 帐户..."。

有人在这个jorney尝试过并取得成功吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:05:38.763

[*设备*](https://developers.google.com/accounts/docs/OAuth2ForDevices)流程适用于在没有浏览器的设备上运行的应用程序（精彩示例可能是显示新 G+ 通知的手表），并要求用户在有浏览器的设备上执行手动步骤。这也是为了访问用户帐户上的数据。

**更新**：

正如您所说，您有一个嵌入式应用程序在没有可用浏览器的情况下运行，并且希望代表用户访问数据，这绝对是要走的路。然而，这仍然需要用户使用浏览器在另一台设备上登录（一次）。使用此流程获得访问令牌后，您可以手动或使用某些库访问[Google Drive API 。](https://developers.google.com/drive/v2/reference/)

~~因此，您想访问属于特殊帐户的 Google Drive 上的数据，并且只有您的应用程序可以在不涉及浏览器的情况下访问它？~~

[服务帐户](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)（*服务器到服务器*流程）正是您所需要的。但是，这些**仅**用于在 Web 服务器上使用，否则您的*私钥*文件必须部署到客户端，在那里可以轻松提取它。

~~您可以做的一件事是使用您自己的网络服务器，该服务器使用服务帐户从您的 Google 帐户获取数据，并拥有一个仅连接到您自己的网络服务器的客户端应用程序。当然，这也有其缺点，尤其是在锁定您的 Web 服务器以使第三方客户端无法访问它时。~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:27:38.950

可以，但需要使用浏览器。我已经成功地让 OAuth 2.0 在没有浏览器的 IBM i（AS/400、iSeries、System i，无论现在叫什么名字）上运行。到目前为止，我已经实现了 Calendar 和 Google Cloud Print API。

在 OAuth 2.0 协商期间，您将收到一个 URL 和一个代码。您需要显示用户要访问的 URL，然后输入代码以授予该特定 API/范围的权限。我在这里的文档中有一个示例：

[http://docs.bvstools.com/home/greentools-for-google-apps/docs/g4g-base-commands/g4gregsvc](http://docs.bvstools.com/home/greentools-for-google-apps/docs/g4g-base-commands/g4gregsvc)

但是，现在的问题是驱动 API 还不能用于设备。但是，谷歌已经表示应该很快。

# mysql - codeigniter mysql事务

> ID：12622757
> 
> 赞同：0
> 
> 时间：2012-09-27T13:39:06.930
> 
> 标签：mysql, codeigniter, transactions

我是数据库事务的新手，我发现非常混乱。我有一个包含电子邮件地址、发送日期时间和发送日期时间的队列表。我的 cron 工作不断触发并选择现在已通过“发送日期时间”的行。它会向该地址发送一封电子邮件并更新“发送日期时间”列。

如果这个 cron 作业在完全相同的时间触发，它们就有可能抓取相同的行，从而发送两次电子邮件。

据我了解，交易都取决于成功或失败或查询。在这种情况下如何检查？

```
$this->db->trans_begin();

$query = $this->db->query('SELECT * FROM Queue_table where send >= now LIMIT 100');

foreach ($query->result() as $row)
{
   //code to send email to $row->email;
   $this->db->query('UPDATE Queue_table SET sent = now WHERE id = '$row->id'');
}

//the following doesn't make much sense to me. What would cause
// this to be false in this scenario?

if ($this->db->trans_status() === FALSE)
{
    $this->db->trans_rollback();
}
else
{
    $this->db->trans_commit();
} 
```

我要这样做完全错误吗？

# windows - 列出nodejs中的分区

> ID：12622758
> 
> 赞同：9
> 
> 时间：2012-09-27T13:39:09.180
> 
> 标签：windows, node.js, directory-browsing

我想使用nodejs获取windows中的分区列表。fs.readdir 适用于任何低于或包括 C: 的文件夹，但我无法弄清楚要给它什么才能拥有“C:”、“D:”等分区列表。

有人知道我应该使用什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-28T01:11:20.093

node.js 中没有用于列出分区的 api。一种解决方法是使用 child_process 并执行`wmic`命令（或任何可以列出分区的命令）。

```
var spawn = require('child_process').spawn,
    list  = spawn('cmd');

list.stdout.on('data', function (data) {
  console.log('stdout: ' + data);
});

list.stderr.on('data', function (data) {
  console.log('stderr: ' + data);
});

list.on('exit', function (code) {
  console.log('child process exited with code ' + code);
});

list.stdin.write('wmic logicaldisk get name\n');
list.stdin.end(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-01T20:04:07.307

不确定它是否与您正在寻找的完全匹配，但我们构建了一个名为[drivelist](https://github.com/resin-io-modules/drivelist)的 NodeJS 模块，该模块将返回一个连接的驱动器数组及其各自的安装点（例如：Windows 中的安装字母）：

```
[
    {
        device: '\\\\.\\PHYSICALDRIVE0',
        description: 'WDC WD10JPVX-75JC3T0',
        size: '1000 GB'
        mountpoint: 'C:',
        system: true
    },
    {
        device: '\\\\.\\PHYSICALDRIVE1',
        description: 'Generic STORAGE DEVICE USB Device',
        size: '15 GB'
        mountpoint: 'D:',
        system: false
    }
] 
```

不可移动驱动器标记为`system: false`，如果这是您要查找的内容，您可以按该属性进行过滤。

该模块的主要优点是适用于所有主要操作系统。

见[https://github.com/resin-io-modules/drivelist](https://github.com/resin-io-modules/drivelist)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-07T00:14:04.020

我的 2 美分：

略微增强 - 一个带有回调的函数以便于集成，返回一个驱动器数组：

```
/**
 * Get windows drives
 * */
function get_win_drives(success_cb,error_cb){
    var stdout = '';
    var spawn = require('child_process').spawn,
            list  = spawn('cmd');

    list.stdout.on('data', function (data) {
        stdout += data;
    });

    list.stderr.on('data', function (data) {
        console.log('stderr: ' + data);
    });

    list.on('exit', function (code) {
        if (code == 0) {
            console.log(stdout);
            var data = stdout.split('\r\n');
            data = data.splice(4,data.length - 7);
            data = data.map(Function.prototype.call, String.prototype.trim);
            success_cb(data);
        } else {
            console.log('child process exited with code ' + code);
            error_cb();
        }
    });
    list.stdin.write('wmic logicaldisk get caption\n');
    list.stdin.end();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-29T07:34:01.907

一个更简单的实现：

```
const exec = require('child_process').exec;
exec('wmic logicaldisk get name', (error, stdout, stderr) => {
  if (error) {
    console.error(`exec error: ${error}`);
    return;
  }
  console.log('stdout ', stdout);
  console.log('stderr ', stderr);
}); 
```

# database-design - 关系设计场景：限制子关系

> ID：12622760
> 
> 赞同：3
> 
> 时间：2012-09-27T13:39:18.460
> 
> 标签：database-design, model, entity-relationship, relational, relational-model

请考虑以下情况。一个宠物主人可能有多只猫，也可能有多只狗。有些狗与**同一个主人的**一些猫有关系（即它们打架:-)） 。

以下关系设计没有施加此限制，因为不同所有者的猫和狗可能是相关的。有没有办法通过关系设计来施加这种限制？

![在此处输入图像描述](../Images/4fd270eac86d29ec67ae310ada408b8c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:31:42.930

您需要使用识别关系将所有者的 PK 迁移到“两侧”和菱形依赖项的“底部”：

![在此处输入图像描述](../Images/0957f69519e2d869e50f531d35d45278.png)

由于`CatDog.OwnerId`只是一个字段，它不能在每行识别多个所有者，并且由于它是对两种动物的 FK，所以这个所有者必须同时匹配猫和狗的所有者。

换句话说，一只猫只能与同一主人的一只狗相关联。

如您所见，猫和狗的识别方式与您可能预期的不同。一只猫由它的主人识别，并通过它的`CatNo`. 狗也一样。

* * *

如果您需要一个“更简单”的键，您总是可以只添加一个代理键，或者，您可以完全消除`CatNo`和`DogNo`“滥用”UNIQUE 约束，仅用于迁移`OwnerId`：

![在此处输入图像描述](../Images/a637be6d21ace3275cf1279d6b4bbe26.png)

*（`U1`表示唯一约束。）*

现在您可以更简洁地识别动物，但有一个缺点：从强制唯一性的角度来看，UNIQUE 约束是完全多余的。它是 PK 的超集，并且 PK 本身就可以很好地执行唯一性。UNIQUE 约束的唯一目的是允许`CatDog.OwnerId`引用`Cat.OwnerId`(and `Dog.OwnerId`) - 大多数 DBMS 要求外键的父端点是键。

一些 DBMS ( [Oracle](http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:2797775200346956958) ) 将允许您仅使用一个索引来强制执行 PK 和 UNIQUE 约束，但大多数不会。每个额外的索引都会损害插入/更新/删除性能。

# ruby-on-rails - JRuby/Rails rufus-scheduler 在线程安全模式下的堆空间后停止工作

> ID：12622762
> 
> 赞同：2
> 
> 时间：2012-09-27T13:39:24.137
> 
> 标签：ruby-on-rails, jruby, rufus-scheduler

具有每天运行的 rufus-scheduler 作业的 JRuby/Rails 应用程序。但是，当应用程序运行到 Java 堆空间 (Tomcat) 中时，作业将停止静默运行。

这显然只发生在线程安全模式下。

抽象的`config/initializer/update_scheduler.rb`

```
scheduler = Rufus::Scheduler.start_new

#Runs everyday at 7:30 AM - expected after all ETL/MV refreshes are executed
scheduler.cron("30 7 * * *", :tags => 'auto_update') do
  begin
    # do stuff
    Rails.logger.info "log info and duration"
  rescue Exception => s_e
    Rails.logger.error "Scheduler Failed"
  end
  Rails.logger.flush
end

class << scheduler
  def lwarn (&block)
    Rails.logger.error("Scheduler Error: " + block.call)
  end
end

MyApp::Application.config.scheduler = scheduler 
```

# javascript - 通过 document.write 包含的外部脚本不能更新全局变量？

> ID：12622767
> 
> 赞同：1
> 
> 时间：2012-09-27T13:39:34.217
> 
> 标签：javascript, global-variables, document.write

我只是做了一些测试，看看是否可以从通过 document.write 包含的外部脚本更改全局变量。我确实期望这是可能的——**但事实并非如此**！有人对此有解释吗？

发现：

通过以下方式更新全局变量：

*   通过 document.write 包含的外部脚本对包含脚本**不**可见
*   通过 document.write 包含的内联脚本对包含脚本变得可见

首先原始脚本标签完成 - 然后通过 document.write 添加的脚本按插入顺序执行。

另一方面，使用 javascript 执行结果通过 document.write 编写的内容以正确的顺序（深度优先）插入 - 但仍然使用脚本执行时定义的值。

在外部文件的末尾添加一个 alert(x) 会导致修改后的值传播回一个基本上下文。但如果没有用户交互，似乎不可能触发它。

**测试设置**

我的测试如下：从 base.html 中的内联脚本，我使用 document.write 包含一个 JavaScript one.js，它本身包含文件 two.js。每个文件都通过控制台和 document.write 打印值并设置值。

**来自base.html**的内联脚本片段

 **```
var x = "base";
console.log("x at start base: "+x);
document.write("<p>x at start base "+x+"</p>")
document.write('<scr'+'ipt type=\"text/javascript\" src=\"one.js\"></scri'+'pt>');

document.write("<p>x at end base: "+x+"</p>");
console.log("x at end base: "+x); 
```

文件**一.js**

```
console.log("Start One: "+x);
document.write("<p>Start One "+x+"</p>");

x = "1";
document.write('<scr'+'ipt type=\"text/javascript\" src=\"two.js\"></scri'+'pt>');

document.write("<p>End One "+x+"</p>");
console.log("End One: "+x); 
```

文件***二.js***

```
console.log("x at start two.js: "+x);
document.write("x at start two.js: "+x);

x = "2";

document.write("<p>x at end two.js: "+x+"</p>");
console.log("x at end two.js: "+x); 
```

**结果**

控制台输出：

```
x at start base: base
x at end base: base

x at start one.js: base
x at end one.js: 1

x at start two.js: 1
x at end two.js: 2 
```

页面输出：显示正确的顺序但具有错误的值（文件 two.js 中设置的 2 未传播到 one.js 的末尾和基本 js 的末尾。

```
x at start base: base
x at start one.js: base
x at start two.js: 1

x at end two.js: 2
x at end one.js: 1
x at end base: base 
```

在此先感谢 Cotopax**

# javascript - 通过字符串达到嵌套方法的最佳方法

> ID：12622770
> 
> 赞同：1
> 
> 时间：2012-09-27T13:39:45.730
> 
> 标签：javascript, dynamic, interpolation

我想以编程方式访问嵌套在对象内的方法。

```
var app = {
    property:{
        method:function(){},
        property:"foo"
    }    
} 
```

通常你会像这样访问它：`app.property.method`

但就我而言，在运行时我得到一个字符串，我想将其插入到调用`method`函数 中

`method`现在，当我有以下字符串时，如何以编程方式访问

```
"app.property.method" 
```

​ 参考请见：http: [//jsfiddle.net/adardesign/92AnA/](http://jsfiddle.net/adardesign/92AnA/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:43:26.947

您需要使用括号表示法（我会避免使用其他选项 - `eval()`）。如果`app`变量是全局变量，那么它将是`window`对象的属性：

```
executeFunctionByName("app.property.method", window); 
```

借用方法：[当我将其名称作为字符串时如何执行 JavaScript 函数](https://stackoverflow.com/questions/359788/how-to-execute-a-javascript-function-when-i-have-its-name-as-a-string)

该方法本质上只是将您的`window["app.property.method"]`（会失败的）分解为`window["app"]["property"]["method"]`（有效的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T14:01:49.433

前段时间我写了这个小脚本来从描述其路径的字符串中获取一个对象：

```
(function () {
    "use strict";
    if (!Object.fromPath) {
        Object.fromPath = function (context, path) {
            var result,
                keys,
                i;
            //if called as `Object.fromPath('foo.bar.baz')`,
            //assume `window` as context
            if (arguments.length < 2) {
                path = context;
                context = window;
            }
            //start at the `context` object
            result = context;
            //break the path on `.` characters
            keys = String(path).split('.');
            //`!= null` is being used to break out of the loop
            //if `null` or `undefined are found
            for (i = 0; i < keys.length && result != null; i+= 1) {
                //iterate down the path, getting the next part
                //of the path each iteration
                result = result[keys[i]];
            }
            //return the object as described by the path,
            //or null or undefined if they occur anywhere in the path
            return result;
        };
    }
}()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:43:36.990

你可以试试这个：

```
var methodString = "app.property.method";

var method = eval(methodString); 
```

然后方法将是一个函数指针，可以这样调用：

```
method(); 
```

# sql - 在数字字符串中查找第一个非零值

> ID：12622771
> 
> 赞同：5
> 
> 时间：2012-09-27T13:39:50.613
> 
> 标签：sql, sql-server, string, tsql

我有一`char(12)`列包含以下数据：

```
000000004012
000000615737
000000000012
000000000100 
```

我需要将其转换为：

```
4012
615737
12
100 
```

我最初的想法是使用字符串操作，例如 CHARINDEX。但是，我需要从左到右搜索第一次出现的`NOT 0`. 如何在 SQL Server 中完成此操作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T13:40:53.370

顺便说一句，您为什么将数据存储在`char`? 但要回答你的问题，试试这个，

```
SELECT CAST(colName AS INT) 
```

或者

```
SELECT CAST('999999999999' AS NUMERIC(12,0)) 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/32a39/5)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T13:41:35.747

如果我们谈论数字数据，那么做`cast(column as int)`或作为任何其他数字数据类型就足够了。

# java - 如何将 REST 客户端转移到 Android 平台

> ID：12622774
> 
> 赞同：0
> 
> 时间：2012-09-27T13:39:53.560
> 
> 标签：java, xml, rest

我在一个普通的 java 项目中使用 REST 服务，它可以正常工作。我现在想做的是在 Android 应用程序上使用相同的服务（并获得相同的结果）。

```
response = mWebResource.path("/test").accept("application/xml").get(ClientResponse.class);
status = response.getStatus();
if (status == 200 ) {
    TestBean jbl = response.getEntity(TestBean.class);
    System.out.println(jbl);
} 
```

在服务器端，它看起来像这样：

```
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.Context;
import javax.ws.rs.core.HttpHeaders;
import javax.ws.rs.core.UriInfo;

@GET
@Path("/test")
@Produces("application/xml")
public TestBean getGetTest(@Context HttpHeaders headers) {
    try {
        TestBean bean = new TestBean();
        return bean;
    }
    catch (Exception e) {
    }
    return new TestBean();
} 
```

这里的结果是我在普通java应用程序中使用的TestBean类实例。如何让 TestBean 进入 Android？我只成功获得了 XML 流。到目前为止，我的 android 测试代码看起来像这样。这里的关键似乎是`response.getEntity`调用不能接受类参数。

```
HttpClient client = new DefaultHttpClient();
BasicHttpContext localContext = new BasicHttpContext();
BasicScheme basicAuth = new BasicScheme();
HttpHost targetHost = new HttpHost("192.168.100.114", 80, "http");
HttpGet httpget = new HttpGet("http://192.168.100.114/RestWeb/test");
HttpResponse response = client.execute(targetHost, httpget);
HttpEntity entity = response.getEntity();
Object content = EntityUtils.toString(entity);
System.out.println(content); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:48:15.850

Android 应用程序在 Java 上运行。因此，理论上您应该能够像在 Android 应用程序中一样使用代码，而不必进行很多更改。Android 确实要求所有网络/互联网工作都在单独的线程中完成。Android 应用程序的编译方式也与常规 Java 程序不同。因此，您必须使用 Android 插件将代码加载到 Eclipse 中，并将其构建/编译为 Android 项目。您应该能够完成此操作，而无需过多更改代码。如果您对部分代码有疑问，请尝试查看 LogCat 以获取堆栈跟踪。这将使您抢先了解问题所在

# css - CSS菜单跳转到页面修改左侧？

> ID：12622787
> 
> 赞同：1
> 
> 时间：2012-09-27T13:40:22.673
> 
> 标签：css

我正在尝试制作一个纯 CSS 下拉菜单，但它有一个奇怪的错误；当页面加载时，主菜单栏中的文本会稍微向右偏移。当页面被修改或菜单项被鼠标悬停时，它会跳回到左边。
这包括右键单击 > 检查元素，这使得很难找出发生了什么。

这是一个例子：http: [//jsfiddle.net/m75p3/1/](http://jsfiddle.net/m75p3/1/)

如您所见，它在加载时处于错误的位置，但在几毫秒后跳转到正确的位置。这是因为 jsfiddle 正在修改页面。如果从它自己的文件中加载，它在鼠标悬停之前不会表现出这种跳跃行为。

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T14:45:00.347

问题是你已经在你的'toplink'元素上声明了'position:absolute'但没有给出任何左值，所以它们的位置是由它们父级的text-align:center规则决定的。当过渡发生时，会扰乱布局，因此它们会移动。要修复它，您需要将 li 声明为 position:relative，以便它成为布局父级，然后在“toplink”元素上设置 left:0。

另外：为了防止文本在子菜单中换行，您可以将它们的空白设置为 nowrap。

```
#head ul li  {
    position: relative;
    ...
}

.toplink {
    left: 0;
    ...
}

#head li li, #head li li a {
    white-space: nowrap;
    ...
} 
```

[http://jsfiddle.net/m75p3/5/](http://jsfiddle.net/m75p3/5/)

# asp.net - 使用路由处理琐碎和复杂的操作

> ID：12622788
> 
> 赞同：0
> 
> 时间：2012-09-27T13:40:23.280
> 
> 标签：asp.net, asp.net-mvc-3, view, controller, routes

我想像这样设计我们的控制器和动作：

每个控制器都有一个名为“StaticPage(string page)”的动作（考虑创建一个 BaseController 以从它派生，但现在，我们将只讨论作为控制器的“套件”）。
此操作返回视图，这些视图主要包含 HTML 代码，没有模型。因此，我不想为 20 个琐碎的视图创建 20 个动作，而是希望一个动作通过一个参数来管理和区分它们。

但是在同一个控制器上，我希望他们拥有返回带有模型的视图并执行更复杂和与数据库相关的事情的操作。起初，我考虑了以下路线（注意：在这个场景中，存在一个“产品”区域）：

```
 context.MapRoute(
       "Product_default",
       "Product/{controller}/{action}",
       new { action = "index"}
   );

   context.MapRoute(
      "StaticPage_Route",
      "Product/{controller}/{page}",
      new { action = "StaticPage", page = UrlParameter.Optional
   ); 
```

* * *

所以假设我们得到了 View **TechnicalSpecification.cshtml**和**TrivialPage.cshtml**，当我打电话时

> /产品/套件/技术规格

它应该搜索并找到操作“TechnicalSpecification”，但是当我尝试

> /产品/套件/TrivialPage

它还应该首先搜索“TrivialPage”操作。但是，当它没有找到它时，它应该将其视为一个名为 page 的参数（就像我上面提到的 Routes 中一样）。

但我真的不知道，如何管理这个权利。有没有办法在不设置自定义 ActionFilter 属性的情况下检查 OnActionExecuted(...) 中的某些内容，然后执行某些操作来调用“StaticPage”-Action？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:12:24.090

我自己找到了解决方案。
覆盖 HandleUnknownAction 就可以了。代码如下所示：

```
protected override void HandleUnknownAction(string actionName)
        {
            this.View(actionName).ExecuteResult(this.ControllerContext);
        } 
```

此外，不再需要路线“StaticPage_Route”，因此我删除了该路线。

这样，我只需要将琐碎的视图放在相应的视图文件夹中，如果可用，覆盖方法就会调用它们。
有了这个，我可以节省很多琐碎的代码，并且不需要实现这些站点。

# javascript - 如何将相同的 Jquery 功能应用于多个按钮

> ID：12622791
> 
> 赞同：1
> 
> 时间：2012-09-27T13:40:27.883
> 
> 标签：javascript, jquery

我正在尝试使用 Ajax 从我的数据库中获取数据。我想要做的是在每个数据行之后添加一个删除按钮，这样如果我想删除特定行，我只需单击它前面的删除按钮。我怎么做？我目前正在尝试同时使用 Jquery 和 javascript ..

```
<table>
<tr><td> A </td> <td> <input type = 'button' onclick = 'delete(A)' value = 'Delete'></td></tr>
<tr><td> B </td> <td> <input type = 'button' onclick = 'delete(B)' value = 'Delete'></td></tr>
</table>

<script type="text/javascript">
$(document).ready(function() {
function delete(d) {
    var deletedata = 'delete=' + d;
    $.post('searchadd.php', deletedata, function(data) {
          **AJAX CODE**

    });
    return false;
 };

 });
 </script> 
```

我该怎么做呢？？这可以只用Jquery直接完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:38:04.017

首选方法是使用数据属性来存储 id。从 jQuery 1.7 开始，.on() 优于 .live() 和 .delegate()

```
<table>
        <tr><td> A </td> <td> <input data-id='1' type = 'button' value = 'Delete'></td></tr>
        <tr><td> B </td> <td> <input data-id='2' type = 'button' value = 'Delete'></td></tr>
    </table>
    <script type="text/javascript">
        $(document).ready(function ()
        {
            $(':button').on('click', function ()
            {
                var id = $(this).data('id');
                deleteRow(id);
            });

            function deleteRow(d)
            {
                var deleteData = 'delete=' + d;
                $.post('searchadd.php', deleteData, function (data)
                {
                    ** AJAX CODE **
                });
                return false;
            }
        });
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:44:38.897

修改代码：[jsfiddle](http://jsfiddle.net/gtJjM/)

```
<table>
    <tr><td> A </td> <td> <input type = 'button'  value = 'Delete'></td></tr>
    <tr><td> B </td> <td> <input type = 'button' value = 'Delete'></td></tr>
    </table>

    <script type="text/javascript">
    $(document).ready(function() {
    function deleteFromDB(d) {
        var deletedata = 'delete=' + d;
        $.post('searchadd.php', deletedata, function(data) {
              **AJAX CODE**

        });
        return false;
     };
     $("input[value='Delete']").live('click',function(){
      var data = $(this).parents("tr:first").find("td:first").text();// A B
      deleteFromDB(data );
     });
     });
     </script> 
```

注意：不要使用 delete 作为函数名，因为它是 JavaScript 中的关键字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:46:50.563

尝试使用类名

```
<table>
    <tr><td> A </td> <td> <input type = 'button' class= 'btn' value = 'Delete'></td></tr>
    <tr><td> B </td> <td> <input type = 'button'  class= 'btn' value = 'Delete'></td></tr>
    </table>

 $(document).ready(function() {
    function delete(d) {
        var deletedata = 'delete=' + d;
        $.post('searchadd.php', deletedata, function(data) {
              **AJAX CODE**

        });
        return false;
     };
     $(".btn").live('click',function(){
       $(this).parents("tr:first").remove();
     });
     }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T13:53:44.710

试试这个[小提琴](http://jsfiddle.net/SNAG12/FmDPS/1/)。这应该可以解决您的问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T13:56:26.517

html

```
<table>
<tr><td> A </td> <td> <input class="del-button" type = 'button' onclick = 'delete(A)' value = 'Delete'></td></tr>
<tr><td> B </td> <td> <input class="del-button" type = 'button' onclick = 'delete(B)' value = 'Delete'></td></tr>
</table> 
```

javascript

```
$(".del-button").on("click", function(e){
    // code for deletion
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T13:56:40.393

我更喜欢这种方式：

```
<table>
<tr><td class="data-desc"> A </td> <td class="data-delete"> <input data-id="A" type='button'  value='Delete'></td></tr>
    <tr><td class="data-desc"> B </td> <td class="data-delete"> <input type='button' data-id="B" value = 'Delete'></td></tr>
</table>

<script type="text/javascript">
$(document).ready(function() {
function delete(d, onDelete) {
    var deletedata = 'delete=' + d;
    $.post('searchadd.php', deletedata, function(data) {
          **AJAX CODE**
          onDelete.call();

    });
    return false;
 };
 $("input[value='Delete']").live('click',function(){
   var that = $(this).parents("tr:first");
   delete($(this).data("id"), function () {
      // after is deleted on db...
      that.remove();
   });
 });
 });
 </script> 
```

# java - Java DOM在xml节点中解析html

> ID：12622799
> 
> 赞同：1
> 
> 时间：2012-09-27T13:40:49.630
> 
> 标签：java, xml

我这里有一个解析器：

```
package lt.prasom.functions;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.StringReader;
import java.io.StringWriter;
import java.io.UnsupportedEncodingException;
import java.util.Properties;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.OutputKeys;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.w3c.dom.CharacterData;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

import android.annotation.TargetApi;
import android.media.MediaRecorder.OutputFormat;
import android.util.Log;

public class XMLParser {

    // constructor
    public XMLParser() {

    }

    /**
     * Getting XML from URL making HTTP request
     * @param url string
     * */
    public String getXmlFromUrl(String url) {
        String xml = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }

    /**
     * Getting XML DOM element
     * @param XML string
     * */
    public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        dbf.setValidating(false);

        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc = db.parse(is); 

            } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (SAXException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (IOException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            }

            return doc;
    }

    /** Getting node value
      * @param elem element
      */
     @TargetApi(8)
    public final String getElementValue( Node elem , boolean html) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                     if( child.getNodeType() == Node.TEXT_NODE  ){

                         //return child.getNodeValue();
                         return child.getNodeValue();
                     }
                 }
             }
         }
         return "";
     }

     /**
      * Getting node value
      * @param Element node
      * @param key string
      * */

     public String getValue(Element item, String str) {     
            NodeList n = item.getElementsByTagName(str);    

            return this.getElementValue(n.item(0), false);
        }

} 
```

还有我的示例 xml：

```
<items>
<item>
<name>test</name>
<description>yes <b>no</b></description>
</item>
</items> 
```

当我解析描述时，我得到了所有标记（“是”）。所以我想解析描述标签中的原始数据。我试过 CDATA 标签没用。没有编码xml有什么办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:21:24.680

我同意关于这个问题的评论不完整，或者不够具体，无法直接回答（比如修改你的源代码以工作等），但我不得不做一些类似的事情（我认为）并且可以添加这个。它可能会有所帮助。

因此，如果“描述”元素的内容本身就是有效的 XML，那么文档实际上看起来像这样：

```
<items>
  <item>
   <name>test</name>
   <description><span>yes <b>no</b></span></description>
  </item>
</items> 
```

然后您可以将“description”元素的内容作为新的 XML 文档破解，然后获取 XML 文本表单，如下所示：

```
<span>yes <b>no</b></span> 
```

所以一个类似的方法：

```
/**
 * Get the Description as a new XML document
 *
 */
public Document retrieveDescriptionAsDocument(Document sourceDocument) {

Document document;
Node tmpNode;
Document document2 = null;

try {
    // get the description node, I am just using XPath here as it is easy
    // to read, you already have a reference to the node so just continue as you
    // were doing for that, bottom line is to get a reference to the node
    tmpNode = org.apache.xpath.XPathAPI.selectSingleNode(sourceDocument,"/items/item/description");

    if (tmpNode != null) {

        // create a new empty document
        document2 = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();
        // associate the node with the original document
        sourceDocument.importNode(tmpNode, true);
        // create a document fragment from the original document
        DocumentFragment df = sourceDocument.createDocumentFragment();
        // append the node you found, to the fragment   
        df.appendChild(tmpNode);
        // create the Node to append to the new DOM
        Node importNode = document2.importNode(df,true);
        // append the fragment (as a node) to the new empty document
        Document2.appendChild(importNode);
    }
    else {
        // LOG WARNING
        yourLoggerOrWhatever.warn("retrieveContainedDocument: No data found for XPath:" + xpathP);
    }

    } catch (Exception e) {
        // LOG ERROR
        yourLoggerOrWhatever.error("Exception caught getting contained document:",e);
    }

    // return the new doc, and the caller can then output that new document, that will now just contain "<span>yes <b>no</b></span>" as text, apply an XSL or whatever
    return document2;
} 
```

# ios - 为什么 UIScrollView 会暂停我的 CADisplayLink？

> ID：12622800
> 
> 赞同：16
> 
> 时间：2012-09-27T13:40:51.593
> 
> 标签：ios, opengl-es, uikit, cadisplaylink, caeagllayer

我有一个由 CAEAGLLayer 支持的视图，它位于 UIScrollView 内。当我开始滚动时，调用 openGL 视图的 -draw 方法的 CADisplayLink 停止被调用。

我验证了滚动时不会调用我的 runloop 启动/停止方法。-draw 方法根本不会在滚动开始时立即被调用，而是在滚动结束时继续被调用。

UIKit 是否会在滚动开始后立即停止 CADisplayLink 触发？

显示链接被添加到运行循环中，如下所示：

```
[dl addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode]; 
```

可能这个run loop模式和UIScrollView有冲突？即使 UIScrollView 正在滚动，是否还有其他运行循环模式或替代解决方案来保持 CADisplayLink 触发？

我认为任何应用程序中都可以有不止一个 CADisplayLink。那是错的吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-27T15:58:21.993

`NSDefaultRunLoopMode`滚动`UIScrollView`;时您不在 你在`UITrackingRunLoopMode`。因此，仅为前者安排的任何计时器都不会在后者中触发。您可以通过重复调用将您添加`CADisplayLink`到多个运行循环模式`addToRunLoop:forMode:`，或者使用 调用一次`NSRunLoopCommonModes`，它涵盖了两种模式。

他们在 WWDC 2012 的 Session 223 中详细讨论了这一点以及将滚动视图与 GL 集成的其他问题：“使用滚动视图增强用户体验”；我建议观看[视频](http://developer.apple.com/videos/wwdc/2012/)，因为其中有很多其他内容可能与您的情况有关。

* * *

(2016) Swift3 中的一个例子...

```
let d = CADisplayLink(target: self, selector: #selector(ThisClassName.updateAlpha))
d.add(to: RunLoop.current, forMode: RunLoopMode.commonModes)

//and then, for example...
func updateAlpha() {
  let a = leader.layer.presentation()?.value(forKey: "opacity") as! CGFloat
  follower.alpha = a
  } 
```

# linux - SSH 和 Session 的不同密码（KDE、Gnome 等）

> ID：12622804
> 
> 赞同：0
> 
> 时间：2012-09-27T13:41:08.067
> 
> 标签：linux, ssh

我在我的工作中使用基于 Debian 的操作系统，并且我已经为 ERP 应用程序的测试例程配置了服务......

该服务（Tomcat + Java服务）通过HTTP在Intranet上正确使用......但测试负责人有时需要服务应用程序使用的数据库并使用SSH访问我的机器以更改配置文件上的数据库并重新启动服务.. .finally这个人改变了一些服务或操作系统配置给我带来了问题（在我的操作系统和其他东西上..）。

我想知道的是我是否可以仅更改 SSH 服务的密码（不会更改为我的 KDE/Gnome 会话），只是因为公司的政策要求每个人都必须在工作站上使用默认密码...

请记住，我是配置、维护和其他服务工作的经理，为测试团队提供服务……并且可以向我提出更改数据库请求。

一个简单的例子：

```
KDE login if user 'carlos' and password '123456'

SSH login if user 'carlos' and password '4nyJokeHere' 
```

那有可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:45:13.277

可能的？也许。您可能不得不摆弄 pam.d 以通过与 KDE 等不同的机制进行 SSH 身份验证。

从不同的角度来看，我可能会遗漏一些东西，你能不能为 SSH 进程创建第二个用户，让 KDE 等的主要用户完全分开？

我真的强烈建议尝试将用户“拆分”为多个用途/安全组，每个组使用不同的密码！

您可以使用 authorized_keys 来限制可用的 SSH 命令，和/或 sudo ...

**更新：根据 OP 的要求对该主题进行了一些扩展**

您可以使用 ~/.ssh/authorised_keys 文件限制通过 SSH 可用的命令 - 请参阅[O'Reilly 以获得很好的解释](http://oreilly.com/catalog/sshtdg/chapter/ch08.html#22858)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:24:55.333

我已经解决了这个案例，在这里应用了一个规则。在 SSH 服务上，我的用户 'carlos --> sudoers' 的访问权限被锁定，并且仅为名为 'padrao' 的用户启用访问权限（padrao 翻译成英文是 'default'）。

此用户“padrao”没有 sudoers 权限。如果我需要通过 SSH 访问我的机器，我会这样做：

```
ssh padrao@my.intranet.machine
password: ***

$ su carlos
password: *** 
```

这不是最好的解决方法，但在这里解决了我的问题。

谢谢。

# jquery - 这是在 jQuery 中访问数组元素的正确方法吗？

> ID：12622809
> 
> 赞同：5
> 
> 时间：2012-09-27T13:41:19.257
> 
> 标签：jquery, arrays

我有两个数组。一个用于导航，另一个用于页面上的面板。数组的大小相同。一个面板一个导航按钮。此代码有效，但我确信必须有更好的方法来执行此操作，而无需设置临时变量。

```
$('.footer-nav li').click(function()
{
  var temp = $('.footer-nav li').index(this);
  var tArray = $('.about-bgs li');
  $('.about-bgs li').fadeOut();
  $(tArray[temp]).fadeIn();  //This is the line in question!
}); 
```

有接盘侠吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:50:41.940

jQuery 回调`$(selector).each(callback)` [接受两个参数](http://api.jquery.com/each/)：`index`和`element`. 所以你可以写

```
$('.footer-nav li').each(function(index, element) {
  element.click( function(evt) {
    $('.about-bgs li').fadeOut();
    $('.about-bgs li').get(index).fadeIn();
  }); 
}); 
```

但这对我来说似乎是一个奇怪的代码，因为列表中的**所有元素**（正在淡出）和指定的元素（正在淡入）之间存在动画冲突。我认为它不会按预期工作。

由于似乎一次只有一个元素可见，因此我只会淡出当前可见的元素（并不是说您需要检查同一元素上的两次连续点击）：

```
var current = $('.about-bgs li').fadeOut();
var last = $('.about-bgs li .current');
if (current !== last) {
  last.removeClass('current').fadeOut();
  current.addClass('current').fadeIn();
} 
```

在 DOM 加载时，您必须指定一个`.current`元素并运行此功能（或相应地使用 CSS/JS）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:52:12.423

我认为你应该能够使用`tArray[$(this)].fadeIn()`

编辑：其他一些东西：正如你已经写过`var tArray = $('.about-bgs li');`的，你可以使用`tArray.fadeOut();`

# jquery - 停止 jQuery .data() 转换

> ID：12622812
> 
> 赞同：8
> 
> 时间：2012-09-27T13:41:32.750
> 
> 标签：jquery

有没有办法阻止 .data() 函数将数据转换为另一种类型？

例如，使用 HTML`<div data-code-name="007">Bond, James</div>`

`$("div").data("codeName")`返回 7 而不是 "007"

示例：http: [//jsfiddle.net/dMHS4/](http://jsfiddle.net/dMHS4/)

**更新：**我刚刚注意到，如果您更改为 jQuery 1.8.2，它**不会**转换。[http://jsfiddle.net/dMHS4/2/](http://jsfiddle.net/dMHS4/2/)

**更新：** [jQuery 1.8 是否改变了 .data() 返回值的方式？](https://stackoverflow.com/questions/12625742/has-jquery-1-8-changed-how-data-returns-the-value)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T13:43:37.580

使用`.attr()`代替`.data()`：

```
$("div").attr("data-code-name") 
```

[http://jsfiddle.net/dMHS4/1/](http://jsfiddle.net/dMHS4/1/)

* * *

取自[jQuery 文档](http://api.jquery.com/data/#data-html5)：

> 每次尝试都将字符串转换为 JavaScript 值（这包括布尔值、数字、对象、数组和 null），否则将其保留为字符串。要将值的属性作为字符串检索而不进行任何转换，请使用 attr() 方法

# oracle - Biztalk Oracle 适配器到 XML 在小数点分隔符前丢失零

> ID：12622813
> 
> 赞同：0
> 
> 时间：2012-09-27T13:41:34.217
> 
> 标签：oracle, adapter, biztalk

我正在使用带有 oracle 适配器的 biztalk。该查询收集数据，并且一些列中有值。这些值通常在 -1 和 1 之间，并在 oracle 中显示为 -0,2 或 0,4

这通过 biztalk 并以 xml 结尾，看起来像下面的字段

`<move_cost_vat>-.2</move_cost_vat>`

`<move_cost_customs>0</move_cost_customs>`

`<move_cost_vat>.3</move_cost_vat>`

`<move_cost_customs>.5</move_cost_customs>`

不知何故，十进制数字上的前导 0 消失了。有没有办法防止这种情况？这是适配器的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:02:29.847

一种可能的解决方法是简单地使用端口上的映射来正确格式化传入消息中的数字。

使用*format-number*函数的简单 XSL 模板就可以解决问题（请参阅[http://msdn.microsoft.com/en-us/library/ms256225.aspx](http://msdn.microsoft.com/en-us/library/ms256225.aspx)）；就像使用脚本函数调用一小段 C# 的标准映射一样。

# css - DIV 内 DIV 100% 高度，古老的谜语

> ID：12622815
> 
> 赞同：4
> 
> 时间：2012-09-27T13:41:35.117
> 
> 标签：css, html, height

有人可以向我解释为什么黄色的 DIV 没有延伸到底部吗？

我尝试了各种高度、最小高度等排列，但无济于事。

我应该只使用表格吗？:-)

这是页面的输出：http: [//pastehtml.com/view/cd1ibk3vx.html](http://pastehtml.com/view/cd1ibk3vx.html)

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <style type="text/css">
        html, body {
            margin: 0px;
            padding: 0px;
            height: 100%;
        }

        #mainContainer {
            width: 100%;
            padding: 0px;
            background-color: #EEEEEE;
            min-height: 100%;
        }

        #mainContent {
            width: 800px;
            margin: 0px auto 0px auto;
            padding: 100px 50px 50px 50px;
            background-color: #FFFFCC;
            min-height: 100%;
        }
    </style>
</head>

<body>
<div id='mainContainer'>
    <div id='mainContent'>Why doesn't this stretch to bottom?</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T13:47:59.757

之前`min-height`，添加只是简单`height: 100%;`的`#mainContainer`。

```
 #mainContainer {
        width: 100%;
        padding: 0px;
        background-color: #EEEEEE;
        height: 100%;
        min-height: 100%;
    } 
```

不过，您还需要删除 上的填充（和宽度）`#mainContent`。`min-height`计算时不考虑填充和边距，所以如果你把它们留在里面，`#mainContent`它总是比浏览器窗口高。

[http://jsfiddle.net/mQuh5/1/](http://jsfiddle.net/mQuh5/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:51:51.083

现在看工作**[编辑](http://jsfiddle.net/fWCS4/)**

实际上您已将父类高度设置为 100% 删除`min-`

```
 #mainContainer {
            width: 100%;
            padding: 0px;
            background-color: #EEEEEE;
            height: 100%;
        } 
```

# ruby-on-rails-3 - 使用 Mongoid 和 rails 获得最多投票（例如 count 和 group by）

> ID：12622817
> 
> 赞同：0
> 
> 时间：2012-09-27T13:41:40.580
> 
> 标签：ruby-on-rails-3, mapreduce, mongoid

我有三个文件

```
class User
    include Mongoid::Document
    has_many :votos
    ...
    ...
end

class Picture
    include Mongoid::Document
    has_many :votos
    belongs_to :user
    ...
    ...
end

class Voto
    include Mongoid::Document
    belongs_to :picture
    belongs_to :user
    field :value => :type => Integer
    ...
    ...
end 
```

在 Voto 文档中，字段值是 1 到 5 之间的数字

所以我需要得到所有投票最多的照片来展示......

我怎么能做到这一点？？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:37:32.083

您也可以通过查询来做到这一点，但这将花费大量时间并且性能会降低。另一种解决方案是`total_votos`在模型 Picture 中创建一个字段，每当对图片进行投票时，将字段值添加到 total_votes

```
class Picture
   include Mongoid::Document
   has_many :votos
   belongs_to :user
   field :total_votes,:type => Integer
   ...
   ...
end

class Voto
    include Mongoid::Document
    belongs_to :picture
    belongs_to :user
    field :value => :type => Integer
    after_create do
       picture = self.picture
       picture.total_votes += self.value
       picture.save
    end
    ...
    ...
end 
```

您只需运行查询即可找到最大值

```
Picture.where(:max_votes => Picture.all.max(:total_votes)) 
```

# c++ - 使用 NO C++ 构造保存 cv::Mat 数据以供以后使用

> ID：12622823
> 
> 赞同：0
> 
> 时间：2012-09-27T13:41:57.103
> 
> 标签：c++, c, object, opencv, data-structures

我在提供纯 C 接口的 DLL 中使用 OpenCV，不允许将 C++ 对象移交给调用应用程序。

该 DLL 的一部分为以后的模式识别执行基准学习，从而产生一个关键点列表和一个 Mat 对象。这些数据必须由调用应用程序存储。

使用普通的 C 结构通过 DLL 接口传递关键点是没有问题的，这样的关键点的成员可以很容易地转换。但我看不出真正需要 cv::Mat 的哪些部分。或者更准确地说：我的 Mat 对象使用指向内存区域的成员“数据”，但我不知道包含多少数据。

所以我的问题是：如何将 cv::Mat 对象转换为普通的 C 风格结构，如何估计数据字段的确切长度？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:09:17.603

简单的方法是将 cv::Mat 转换为经典的 OpenCV C 结构：IplImage。

```
cv::Mat mat = imread(...);
IplImage img(mat); // hope it's the correct syntax... 
```

Mat参数更详细的解释：

*   数据：指向数据的指针
*   行，列：...
*   type() - 数据类型：
*   通道（） - 通道数
*   step() - 在图像中的两个连续行之间跨步，以字节为单位。“包括间隙，如果有的话”
*   size_t elemSize() 类似于 CV_ELEM_SIZE(cvmat->type)
*   size_t elemSize1() 以字节为单位返回元素通道的大小。

以下是计算数据字段长度的方法：

```
Mat::rows * Mat::step() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:25:10.683

如果您需要将原始指针传递给图像数据，那么在最坏的情况下，您将不得不使用指针魔术进行一些复制，因为图像数据可能不是连续的。[本教程对此](http://docs.opencv.org/doc/tutorials/core/how_to_scan_images/how_to_scan_images.html)进行了很好的描述。

```
int channels = I.channels();

int nRows = I.rows * channels;
int nCols = I.cols;

if (I.isContinuous())
{
    nCols *= nRows;
    nRows = 1;
}

int i,j;
uchar* p;
for( i = 0; i < nRows; ++i)
{
    p = I.ptr<uchar>(i);
    // And here "p" points to "nCols" components
    // row size = nCols * channels * component size (1 byte usually)
} 
```

# c++ - ODBC SQLParamData 返回数据

> ID：12622825
> 
> 赞同：0
> 
> 时间：2012-09-27T13:42:01.423
> 
> 标签：c++, sql, oracle, odbc

我正在尝试在数据库中插入 o blob。我已经成功输入了两列数据。

我遇到了 SQLParamData 问题。它应该返回 SQL_NEED_DATA 时返回错误（我将发布代码）

当我运行 SQLGetDiagRec 时，它返回带有错误文本 Function sequence error 的 S1010。我在互联网上搜索了这个错误，我了解到它可能与 SQLBindParameter 中的参数有关。

```
// Bind the parameter marker.
    retCode = retcode = SQLBindParameter(hstmt,  // hstmt
         1,                     // ipar
         SQL_PARAM_INPUT,            // fParamType
         SQL_C_BINARY,               // fCType
         SQL_LONGVARBINARY,           // FSqlType
         lbytes,                  // cbColDef
         0,                     // ibScale
         &pParmID,       // rgbValue
         0,                     // cbValueMax
         &cbTextSize);            // pcbValue

    SqlError(hstmt,SQL_HANDLE_STMT,_T("WriteBlob"), _T("CTLSqlConnection"), _T("SQLBindParameter"));
    if(retCode != SQL_SUCCESS)
    {
        delete pData;

        if(!EndTransaction(FALSE))
            return ERR_ENDTRANSACTION_FAILED;
        else
            return -3;
    }

    //SQLExec
    retcode = retCode = SQLExecDirect(hstmt,(SQLTCHAR*)szSqlStat, SQL_NTS);

        SQLRETURN ret;
        SQLCHAR* SQLState;
        SQLINTEGER NativeError;
        SQLSMALLINT errmsglen;
        SQLCHAR errmsg[255];
        SQLCHAR errstate[50];

    retCode = SQLParamData(hstmt, &pParmID);

SQLGetDiagRec(SQL_HANDLE_STMT, hstmt, 1, (SQLCHAR*)errstate, &NativeError, (SQLCHAR*)errmsg, sizeof(errmsg), &errmsglen);
    if(retCode == SQL_NEED_DATA)
    {
        // Put final batch.
        SQLPutData(hstmt, pData, lbytes); 
    }
    else
    {
        delete pData; 
```

如果这部分代码不够相关，我会发布更多。

希望你能帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:16:43.823

你的逻辑在这里看起来不对。当 SQLExecute (SQLExecDirect) 返回 SQL_NEED_DATA 时，您调用 SQLParamData，它会告诉您需要为 SQLPutData 提供数据的参数。如果在 SQLExecute 没有返回 SQL_NEED_DATA 时调用 SQLParamData，我可以想象这是一个函数序列错误。如果您仍然需要它，我可能会从某个地方为您提供一个示例。

# c - 在 popen 中扼杀“找不到文件或目录”消息

> ID：12622826
> 
> 赞同：0
> 
> 时间：2012-09-27T13:42:05.077
> 
> 标签：c, linux, popen

我正在使用 popen 运行系统脚本，如下所示：

```
snprintf(cmd, MAX_PATH, "/myscript -q | grep -i %s", deviceName);
FILE *res = popen(cmd, "r"); 
```

如果找不到脚本，程序将继续其愉快的方式。但是，会显示“找不到文件或目录”消息，这似乎是一个错误，即使在我的预期用途中它不是。

有没有办法让这条消息静音，或者我应该`ls | grep -i myscript`在运行这条线之前打电话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:08:54.240

假设您`/bin/sh`是 POSIX shell 或最近的 Bourne shell 变体，您可以在执行实际命令之前重定向命令中的标准输出。您只需要`exec 2>/dev/null ;`在要执行的命令之前添加。

以下是我个人的做法：

```
/* Shell syntax for redirecting standard error to /dev/null, to
 * silence any errors. If /bin/sh does not support this, you can
 * simply replace it with an empty string.
*/
#define  POPEN_STDERR_NULL "exec 2>/dev/null ;"

...

snprintf(cmd, MAX_PATH, POPEN_STDERR_NULL "/myscript -q | grep -i -e '%s'", deviceName);
FILE *res = popen(cmd, "r"); 
```

该`popen()`命令`/bin/sh`在内部使用以运行指定的命令。以上适用于`/bin/sh`我可以测试的所有变体，包括 Linux 和 SunOS 5.10，因此它应该非常便携。（换句话说，`dash`、`bash`和 SunOS 5.10`sh`都可以正常工作。）

由于您需要为任何非标准系统重新编译应用程序，您始终可以编辑宏以省略前缀。*（如果*你找到了这样的系统，你可以很容易地在魔法中添加一个测试以`Makefile`在必要时自动省略它。）

 *请注意，我修改了`snprintf()`调用中的参数替换。它适用于任何*不*`deviceName`包含单引号的内容。中的任何单引号都应替换为调用前的字符串。*`deviceName``'"'"'``snprintf()`*

 *问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:31:51.450

我不太确定你是否可以扼杀信息。该错误是打印到标准错误流上的标准 Linux 错误。您可以保留 FD '2'，它是标准错误的文件描述符。所以也许你可以关闭这个FD。

但是，我必须警告您，这将防止为您的程序的其余部分打印任何错误。

更好的方法是： snprintf(cmd, MAX_PATH, "/myscript -q | grep -i %s 2> dummyfile", deviceName);

这会将错误重定向到您立即删除的虚拟文件。

所以谨慎行事并决定你想做什么......

干杯，VSN**

# c# - 将 JSON 发布到 ASP.NET MVC 可空短属性

> ID：12622835
> 
> 赞同：2
> 
> 时间：2012-09-27T13:42:26.103
> 
> 标签：c#, asp.net-mvc, json, nullable, short

我通过 HTTP 将 JSON 发布到 ASP.NET MVC 4 Web 服务。JSON 被反序列化为一个包含 Nullable<Int16> 属性（又名“short?”）的对象。当发布的 JSON 将该属性的值用引号引起来时，该值就成功反序列化。如果它没有用引号括起来，则该值始终为空。

正在反序列化的 C# 对象：

```
Class MyClass {
short? MyLittleNumber { get;set; }
} 
```

如果 JSON 是这样的：

```
{MyLittleNumber:"5"} 
```

它有效，但如果是这样：

```
{MyLittleNumber:5} 
```

它无法读取该值并默认为 NULL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T13:42:26.103

解决方案：我将 short(Int16) 更改为 int(Int32)，它现在将读取该值，而不管它是否包含在引号中。

在理解这个区别之前，我昨天在这个问题上挣扎了大约 3 个小时，所以我想在这里找到答案。我相信这是由于 ASP.NET MVC 类将 JSON 反序列化到类中的一些缺陷造成的。

一个相关的问题是关于可空小数/双精度数。 [将可空小数从 json 传递到 ASP.NET MVC 控制器操作？](https://stackoverflow.com/questions/11897988/passing-nullable-decimal-from-json-to-asp-net-mvc-controller-action)

# eclipse - Java Scene Builder 能否像在 NetBeans 中那样集成到 Eclipse 中？

> ID：12622837
> 
> 赞同：2
> 
> 时间：2012-09-27T13:42:34.387
> 
> 标签：eclipse, javafx-2, scenebuilder

我只是想知道，因为我习惯于在 My/Eclipse 中编程...... javafx 场景构建器是否可以像在 netbeans 中那样集成到 eclipse 中：在 netbeans 中，您可以双击“前端”文件/组件和java fx 场景生成器打开。

我不习惯 Net Beans，我知道如果我必须使用 Netbeans 不会有很大的不同。只是想知道这是否可能。我用谷歌搜索了这个，似乎没有找到正确的信息......或者我可能正在寻找错误的东西。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T01:10:21.030

如果您在右键单击 FXML 文件时使用 @user714965 所述的[efxclipse](http://www.efxclipse.org/)插件，则上下文菜单中的第二个选项是“使用 Scene Builder 打开”。但是，如果你想让它成为双击的标准程序，你可以简单地去：

首选项 -> 编辑器 -> 文件关联 -> 查找 .fxml 并选择它 -> 单击“关联编辑器”上的第二个添加按钮 -> 使用外部程序打开 -> 选择场景构建器。

这应该使双击动作打开场景构建器并加载您的文件。

我希望它有所帮助。干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T14:11:38.483

我认为[efxclipse](http://www.efxclipse.org/)是您正在寻找的。但我还没用过。

# magento - 我在 magento 中有一个子类别，我想显示它的所有父类别

> ID：12622846
> 
> 赞同：0
> 
> 时间：2012-09-27T13:43:11.720
> 
> 标签：magento, parent-child

我有类别树。Cat1 : (id=2), Cat1-sub(ID=3), Cat1-sub-sub(id=4) 和 Cat2 (id=5)
现在如果更新类别 Cat-sub-sub，我想显示它的全部父类别 ID 也是如此。例如 3,2 两者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T14:45:14.793

我认为，根据您的问题，您想获取给定类别的父类别 ID 如果是这样，您可以使用以下内容获取 ID：

```
 $category->getParentIds() 
```

或者，您可以通过以下方式获得实际模型：

```
$category->getParentCategories() 
```

如果这不是问题，请澄清您的问题。

# java - 创建自己的脚手架插件：metawidget 资源加载异常仅在 forge 控制台中运行时

> ID：12622849
> 
> 赞同：0
> 
> 时间：2012-09-27T13:43:25.587
> 
> 标签：java, crud, jboss-tools, seam3, jboss-forge

由于某些原因，我尝试单独重建脚手架面插件，但发现了一个非常烦人的错误，我无法解决。

```
java.lang.NoSuchMethodException: class org.metawidget.inspector.impl.BaseObjectInspectorConfig.setPropertyStyle(ForgePropertyStyle). Did you mean setPropertyStyle(PropertyStyle)?
    at org.metawidget.config.impl.BaseConfigReader$ConfigHandler.classGetMethod(BaseConfigReader.java:1633) 
```

尝试了一些技巧后，查看了 metawidget 配置代码，没有找到解决问题的方法。

```
scaffold setup --scaffoldType customfaces 
```

工作正常，但

```
scaffold from-entity com.domain.entity.* --scaffoldType customfaces 
```

失败。

有人有同样的问题吗？我可以搞砸什么吗？

* * *

**更新#1**：

只有在 Forge 控制台中运行时，资源加载才会失败。JUnit 测试工作正常。我假设，metawidget 插件资源加载器尝试不是从新插件而是从原始脚手架 api 的上下文加载 metawidget-*.xml。

**更新#2**：

问题在于元小部件和伪造关系的深处。我发现如果我直接使用`SimpleResourceResolver.openResource()`，结果是有效的。但如果我添加`StaticHtmlWidget.setConfig()`，结果是`Unable to locate com/domain/customfaces/metawidget-entity.xml on CLASSPATH`第一次`write()`调用。我不知道如何解决这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:49:42.950

可能您不止一次包含 Metawidget JAR？Forge 使用 JBoss 模块，因此您必须小心构建类路径的方式。

Metawidget 错误基本上是说“ForgePropertyStyle”不是“PropertyStyle”类型。但是（除非您在 customfaces 中更改了该代码）ForgePropertyStyle 确实扩展了 PropertyStyle。所以你的类路径上必须有两个 PropertyStyles 吗？

# java - 安卓admob刷新率

> ID：12622852
> 
> 赞同：1
> 
> 时间：2012-09-27T13:43:26.783
> 
> 标签：java, android, eclipse

我在我的应用程序上正确展示了广告，但它们没有被刷新。我尝试在 admob 应用程序面板和 xml 上将刷新率设置为 20s 作为 ads:refreshInterval。但是，显示添加但不再刷新。如果我按以下方式强制编程，则 add 会正确刷新，但不是合适的解决方案。为什么不刷新添加？谢谢你

```
AdRequest adRequest = new AdRequest();

adMob.loadAd(adRequest); 
```

# android - 在 Play 商店上发布包

> ID：12622853
> 
> 赞同：1
> 
> 时间：2012-09-27T13:43:28.577
> 
> 标签：android, android-manifest, google-play

所以，我有一个相当大的应用程序，我想通过 Play 商店中的包分发。我看到这种策略经常使用。我没有看到太多实际这样做的方式。从我到目前为止收集的内容来看，代码中的逻辑将像这样工作：

```
try {
  Start activity in package
} catch (ActivityNotFoundException e) {
  Prompt user to play store by using the package name as the URL
} 
```

除此之外，我想知道这些软件包需要什么样的设置。不应从启动器（仅限我的应用程序）打开它们。

如果有的话，包应该应用哪些意图过滤器？

是否可以设置 Manifest，使其在 Google Play 中无法搜索，但如果直接链接到它，仍可下载？

# jquery - 使用 jCookie 存储 CSS 字体大小

> ID：12622858
> 
> 赞同：0
> 
> 时间：2012-09-27T13:43:35.143
> 
> 标签：jquery, css

我目前正在尝试在我的网站顶部创建三个链接，当单击锚点时将更改正文字体大小，然后使用 jCookie 存储它，因此当用户返回时字体大小保持为所选大小页。

这是我已经拥有的：我的链接：

```
<ul id="fonts">
    <li><a href="#" id="normal" rel="100%">Normal</a></li>
    <li><a href="#" id="large"  rel="110%">Large</a></li>
    <li><a href="#" id="largest"rel="120%">Largest</a></li>
</ul> 
```

这是我的jQuery：

```
 jQuery(document).ready(function(){    
       if(jQuery.cookie("font")) {
          jQuery("#all").css("font-size", jQuery.cookie("font"));
       }

       jQuery('#csschange li a').click(function() {
          jQuery("link.changeme").attr("href", jQuery(this).attr('rel'));
             jQuery.cookie("css",jQuery(this).attr('rel'), {expires: 365, path: '/'});
                    return false;
          });
       });
   }); 
```

我正在检查变量“字体”是否已保存在会话中，如果是，则更改正文的 css 以将字体大小更改为此存储的变量。我以前有这个工作，但这次似乎有问题。任何人都可以对此有所了解吗？非常感谢！

# c - 如何刷新 i/o 流？我正在使用 scanf()，fflush(stdin) 不起作用

> ID：12622862
> 
> 赞同：0
> 
> 时间：2012-09-27T13:43:41.260
> 
> 标签：c, input, stream, scanf

如何在不将换行符放入 scanf() 的情况下刷新输入缓冲区？因为我的教授不喜欢它。我试过 fflush(); 但它没有用。

```
#include <stdio.h>
#include <conio.h>
int CountUpper(char S[],int n)
{
    int i,cntr = 0;
    for(i = 0; i < n; i++)
        if(S[i] >= 'A' && S[i] <= 'Z')
            ++cntr;
    return cntr;
}
int main(void)
{
    int n,i;
    printf("Enter n: ");
    scanf("%d",&n);
    char array[n];
    for(i = 0; i < n; i++)
    {
        scanf("%c",&array[i]);
        //fflush(stdin);
    }
    printf("Number of uppercase characters in array: %d\n",CountUpper(array,n));
    getch();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:49:57.430

`fflush`仅为输出流定义并`fflush(stdin)`调用*未定义的行为*。

您可以查看此以丢弃缓冲区中的输入：[我可以使用什么来刷新输入？](http://c-faq.com/stdio/stdinflush2.html)

# ios - 循环 UIScrollView

> ID：12622871
> 
> 赞同：1
> 
> 时间：2012-09-27T13:44:18.350
> 
> 标签：ios, objective-c, ios6, scrollview

我真的需要你的帮助。我在包装`UIScrollView`（循环 UIScrollView）时遇到问题。

**当我使用iOS5**快速或慢速滚动时，它是有效的。但**iOS6**不工作。

我试图修复，但我仍然没有解决这种情况。

这是我得到的一个例外：

> 2012-09-27 18:00:58.170 攻击 [22051:c07] *** 由于未捕获的异常“CALayerInvalidGeometry”而终止应用程序，原因：“CALayer 边界包含 NaN：[nan 0; 640 480]' *** First throw call stack: (0x61a012 0x2c8fe7e 0x619deb 0xa33a75 0xa33d1e 0x19107a1 0x1922748 0x1922c9d 0x19295ec 0x192d0e7 0x1b9589a 0x1b949db 0x1b9611f 0x1b98d6d 0x1b98cec 0x1b90a68 0x18fdfc2 0x18fe4a3 0x18dc3aa 0x18cdcf8 0x3047df9 0x3047ad0 0x58fbf5 0x58f962 0x5c0bb6 0x5bff44 0x5bfe1b 0x30467e3 0x3046668 0x18cb65c 0x229a 0x21a5 0x1) libc++abi. dylib：终止调用抛出异常

我尝试了很多方法，但我无法解决它。这是我的[源代码](http://www.mediafire.com/?ovnaamni7r0gu8e)。谁能帮我 ？非常感谢 ！！！

# java - 对象帮助的 println() 语句。我的教授想要这个输出吗？

> ID：12622879
> 
> 赞同：0
> 
> 时间：2012-09-27T13:44:55.703
> 
> 标签：java, object

我的教授让我们为她的实验室修改她的代码。特别是对于这个实验室，我的教授有一个我不应该触及的 println() 声明：

```
ArrayCollection ac = new ArrayCollection(ARRAY_SIZE); 
```

所以上面的代码实例化了一个名为 ac 的对象。这一切都很好而且很花哨，但是我的教授在她的代码中也有这个我无法修改的语句：

```
System.out.println ("Collection contains:  " + ac); 
```

因此，由于上面的行，我得到以下无用的输出：

> 集合包含：ArrayCollection{data=[Ljava.lang.Object;@24a20892, actualSize=3}

上面的输出可以告诉我关于对象 ac 的什么信息？输出是完全没用的，还是你认为这是我教授的本意。抱歉，我知道这是一个奇怪的问题，我会感谢任何人评论我的老师为什么留下这样的代码（她会因为非常小的错误而扣分>.<）。

编辑上午 9 点 48 分：

ArrayCollection ac 包含：{5,10,20} 用于我在上面发布的输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:49:32.113

查看`AbstractCollection`JDK 中类的 toString() 方法。

```
public String toString() {
        Iterator<E> it = iterator();
        if (! it.hasNext())
            return "[]";

        StringBuilder sb = new StringBuilder();
        sb.append('[');
        for (;;) {
            E e = it.next();
            sb.append(e == this ? "(this Collection)" : e);
            if (! it.hasNext())
                return sb.append(']').toString();
            sb.append(',').append(' ');
        }
    } 
```

它可以满足您的期望。

如果你不想“复制”逻辑，例如继承`ArrayCollection`或`AbstractCollection`直接使用`ArrayList`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:51:10.350

@ 后面的十六进制数是对象的哈希码 - 如果是对象，则为它的引用。她可能会对自动化测试感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:53:18.510

这里发生的是你`println`输出的返回值`ArrayCollection.toString()`，这里给你的信息是（假设她的实现是可靠的）这个类`ArrayCollection`至少有两个字段：`data`类型`Object[]`，和`actualSize`，可能是数字类型，它的值实例为 3。

`ArrayCollection`假设这是一个 Java 接口的实现，由一个包含实际元素`Collection`的数组 () 支持，这似乎是合理的。`data`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T13:46:26.770

显然，您的教授希望打印收藏的内容，而不是收藏的参考。

这是你可以做到的：

*   循环遍历集合的内容。

*   在此循环中，调用`toString()`每个对象并将生成的字符串累积到[StringBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)中。

*   打印此 StringBuilder。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T15:02:24.990

该表达式`"Collection contains: " + ac`正在调用对象上的`toString()`方法`ac`以获取对象的字符串表示形式`ac`。每当您使用`+`将字符串与对象连接时，首先通过调用对象的`toString()`方法将对象转换为字符串。

我认为您的老师希望您修改`ArrayCollection`课程，以便`toString()`生成格式良好的字符串表示形式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T13:46:43.740

它不是没用的，它为您提供以下数据：

```
ArrayCollection{data=[Ljava.lang.Object;@24a20892, actualSize=3} 
```

你能查一下每个参数吗...？

她正在扩展[Collection](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collection.html)或[Collections](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html)类。

编辑：是的，看看[AbstractCollection](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractCollection.html)

# arrays - 鼠标聚焦时表单中的所有标签都会更改属性

> ID：12622882
> 
> 赞同：0
> 
> 时间：2012-09-27T13:45:06.087
> 
> 标签：arrays, vb6, label

我想使用标签模拟游戏菜单。我想要做的是当鼠标悬停在它上面时，字体会变大并且会改变字体颜色。在 Visual Basic 6.0 中是否有任何预先存在的代码可以仅使用数组来执行此操作？因为如果我手动进行，将花费大量时间。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:29:03.800

您需要捕捉鼠标进入和离开事件。这是旧的，但您可以尝试使用 TrackMouseEvent API 来捕获鼠标事件。这是一个链接[http://www.vbaccelerator.com/home/VB/Code/Libraries/Subclassing/Generating_MouseLeave_Events_for_a_Window/article.asp](http://www.vbaccelerator.com/home/VB/Code/Libraries/Subclassing/Generating_MouseLeave_Events_for_a_Window/article.asp)，其中包含一个实现 API 的类，并给出了使用它的示例。虽然这篇文章很旧，并且只讨论了它在 Win 95 之前的使用，因此您需要进行快速测试以查看它是否仍然受支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:12:46.323

创建一个标签数组：在表单上放置一个标签，并为其指定索引 0，这将基本上创建一个包含 1 个标签的数组，然后您可以在代码中展开

```
'1 form with :
'    1 label : name=Label1    Index=0
Option Explicit

Private Sub Form_Load()
  Dim intIndex As Integer
  For intIndex = 1 To 4
    Load Label1(intIndex)
    Label1(intIndex).Visible = True
    Label1(intIndex).Caption = CStr(intIndex)
  Next intIndex
End Sub

Private Sub Form_MouseMove(Button As Integer, Shift As Integer, X As Single, Y As Single)
  OnLabel False
End Sub

Private Sub Form_Resize()
  Dim intIndex As Integer
  Dim sngWidth As Single, sngHeight As Single
  Dim sngLblWidth As Single
  sngWidth = ScaleWidth
  sngHeight = ScaleHeight
  sngLblWidth = sngWidth / Label1.Count
  For intIndex = 0 To Label1.Count - 1
    Label1(intIndex).Move intIndex * sngLblWidth, 0, sngLblWidth
  Next intIndex
End Sub

Private Sub Label1_MouseMove(Index As Integer, Button As Integer, Shift As Integer, X As Single, Y As Single)
  OnLabel True
End Sub

Private Sub OnLabel(blnOn As Boolean)
  Dim intIndex As Integer
  Dim intSize As Integer
  Dim lngColor As Long
  If blnOn Then
    intSize = 20
    lngColor = vbRed
  Else
    intSize = 10
    lngColor = vbBlack
  End If
  For intIndex = 0 To Label1.Count - 1
    With Label1(intIndex)
      .FontSize = intSize
      .ForeColor = lngColor
    End With 'Label1(intIndex)
  Next intIndex
End Sub 
```

# javascript - 声明 dygraph 粒度

> ID：12622887
> 
> 赞同：0
> 
> 时间：2012-09-27T13:45:26.983
> 
> 标签：javascript, dygraphs

我正在尝试使用具有 TWO_DAYS 粒度的 dygraph 显示图表，但我无法找到声明它的方式。

有任何想法吗？？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:58:13.857

您正在寻找我认为的[dateWindow](http://www.dygraphs.com/options.html#dateWindow)参数。

> ***日期窗口***
> 
> 最初放大图表的一部分。是 [earliest, latest] 的形式，其中最早/最新是自纪元以来的毫秒数。如果 x 轴的数据是数字，则 dateWindow 中的值也必须是数字。
> 
> 类型：两个日期或数字的数组
> 
> 默认值：显示整个输入范围

# jquery - jQuery设置内部div的bgcolor

> ID：12622893
> 
> 赞同：0
> 
> 时间：2012-09-27T13:45:46.917
> 
> 标签：jquery

我有一个 div 结构，我想将 bg 颜色更改为白色，`<div>HERE</div>` 我无法为这个 div 设置 id。

```
<div class="graph-wp">
    <div id="placeholder">
        <div class="tickLabels">
            <div class="legend">
                <div>HERE</div>
            </div>
        </div>
    </div>
</div> 
```

我用了

```
$(document).ready(function(){

    $('div.legend').css({'background-color': '#FFFFFF'});
}); 
```

但失败了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:47:55.500

使用`class`选择器：

```
$('.legend').css('background-color', '#ffffff'); 
```

要将 css 添加到内部 div，您可以使用：

```
$('.legend div').first().css('background-color', '#ffffff'); 
```

这将确保只有第一个 div 将采用`background-color`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:47:54.607

```
$("#placeholder .legend").css('background-color', 'white'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:51:24.640

您的代码是正确的，请确保您包含所有必需的 js 文件。

请注意，您的 div 是空的，在这种情况下，您将看不到样式的变化

`#FFFFFF`这是白色，所以你的 div 应该用另一种颜色放在 div 上，以便查看效果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T14:01:12.320

谢谢我用过：

```
$(".legend").children().css('background-color', '#ffffff'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T14:24:32.060

你可以简单地使用 CSS -

```
.inner > div {
    background-color:#FFFFFF;
} 
```

否则，如果您需要使用 jQuery -

```
$('.inner > div').css("background-color", "#FFF"); 
```

# javascript - 出口对象有什么用？

> ID：12622895
> 
> 赞同：6
> 
> 时间：2012-09-27T13:45:50.520
> 
> 标签：javascript, backbone.js

在backbone.js 的前几行中，我不明白他们为什么要在导出或要求上测试未定义

很明显，它是未定义的，因为他们没有设置它。如果它是一个全局（窗口）对象，那么他们会明确地说出来。

```
root.exports  // they don't do this
root.require 
```

他们为什么要检查这个？

```
typeof exports !== 'undefined' 
```

还有这个

```
if (!_ && (typeof require !== 'undefined')) 
```

这从上面

```
!_ 
```

**完整片段**

```
(function(){
    var root = this, 
        previousBackbone = root.Backbone,
        slice = Array.prototype.slice,      
        splice = Array.prototype.splice,
        _ = root._,
        Backbone;
    if (typeof exports !== 'undefined') {
        Backbone = exports;
    } else {
        Backbone = root.Backbone = {};
    }
    Backbone.VERSION = '0.9.2';
    if (!_ && (typeof require !== 'undefined')) {
        _ = require('underscore');
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T13:51:46.323

我相信那是`Backbone.js`可以用作模块的。`Common.js`更多细节在这里：[http ://wiki.commonjs.org/wiki/Modules/1.1](http://wiki.commonjs.org/wiki/Modules/1.1)

特别是这一点：

> > > 在模块中，有一个名为“exports”的自由变量，它是模块在执行时可以添加其 API 的对象。

此外，这一点涵盖了您的问题`require`：

> > > 在一个模块中，有一个自由变量“require”，即一个Function。“require”函数接受模块标识符。"require" 返回外部模块的导出 API。

# function - 在 lua 中检测单个 nil 参数

> ID：12622912
> 
> 赞同：2
> 
> 时间：2012-09-27T13:46:44.977
> 
> 标签：function, lua, null

是否可以区分通话

```
myFunc() 
```

从

```
myFunc(nil) 
```

在函数 myFunc?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T15:59:01.380

实际上可以`nil`在 Lua 函数中区分值和无值，前提是它们期望操作符的参数数量可变`...`。但是，利用这一点并不容易，也不合理。例子：

```
function myFunc(...)
  if select('#', ...) == 0 then
    print "Called without argument"
  elseif select('#', ...) == 1 and select(1, ...) == nil then
    print "Called with a nil argument"
  end
end 
```

# html - php csv 文件作为下载

> ID：12622913
> 
> 赞同：0
> 
> 时间：2012-09-27T13:46:45.917
> 
> 标签：html, file, download

我的网络服务器上有一个名为 test.csv 的文件，我喜欢下载它：

```
<a href="test.csv">CSV Download</a> 
```

但是该文件将在浏览器中打开而不是下载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:49:55.680

创建一个 .htaccess 文件并将其写入其中：

```
AddType application/octet-stream .csv 
```

这应该告诉 apache 强制浏览器下载文件而不是打开它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:57:10.760

这是代码，

```
 $cfile = "path/to/filename.csv";
    header('Content-Type: text/csv; charset=utf-8');
    header('Content-Disposition: attachment; filename='filename.csv');
    @readfile($cfile); 
```

把这个作为一个函数，当你点击下载时调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:49:00.740

除非客户端有某种“解析器”，否则默认情况下您无法执行此操作。

您必须创建自己的 php 服务或以其他方式来回显文件的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T13:52:38.710

我认为你必须设置内容类型检查[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

# entity-framework - 具有流畅实体框架的外键

> ID：12622914
> 
> 赞同：0
> 
> 时间：2012-09-27T13:46:49.850
> 
> 标签：entity-framework, fluent

我创建了一个新闻模型。我的新闻有一位作者属于会员类别。这足以设置外键吗？

```
 HasRequired(n => n.Author); 
```

代码：

```
public class Member : Identity
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Email { get; set; }
    public Address Address { get; set; }
    public int Id { get; set; }

    public virtual ICollection<News> News { get; set; }

}

public class News
{
    public string Title { get; set; }
    public string Subtile { get; set; }
    public int Id { get; set; }
    public string Url { get; set; }
    public DateTime DateAdded { get; set; }

    public virtual Member Author;

}
public class NewsMap : EntityTypeConfiguration<News>
{
    public NewsMap()
    {

        HasKey(n => n.Id);
        Property(n => n.Id).
            HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity)
            .HasColumnName("Id");

        Property(t => t.Title)
            .IsRequired()
            .HasMaxLength(100)
            .IsUnicode();
        Property(t => t.Subtile)
            .IsRequired()
            .HasMaxLength(100)
            .IsUnicode();
        Property(t => t.Url)
            .IsRequired()
            .HasMaxLength(255)
            .IsUnicode();
        Property(t => t.DateAdded).HasColumnName("DateAdded")
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Computed);

        HasRequired(n => n.Author); //is this enough for the foreing key to be set?

    }

}
public class MemberMap : EntityTypeConfiguration<Member>
{
    public MemberMap()
    {
        // Primary Key
        this.HasKey(t => t.Id);

        // Properties
        this.Property(t => t.FirstName)
            .IsRequired()
            .HasMaxLength(150);

        this.Property(t => t.LastName)
            .IsRequired()
            .HasMaxLength(50);

        this.Property(t => t.Email)
            .IsRequired()
            .HasMaxLength(150);

        this.Property(t => t.Address.Id)
            .IsRequired()
            .HasMaxLength(100)
            .HasColumnName("Address_FirstLine");

        this.Property(t => t.Address.ZipCode)
            .IsRequired()
            .HasMaxLength(20).HasColumnName("Address_Zip");

        this.Property(t => t.Address.Contry)
            .IsRequired()
            .HasMaxLength(100).HasColumnName("Address_Contry");

        this.Property(t => t.Address.City)
            .IsRequired()
            .HasMaxLength(100).HasColumnName("Address_Town");

        this.Property(t => t.Id);

        // Table & Column Mappings
        this.ToTable("Identities_Member");
        this.Property(t => t.FirstName).HasColumnName("FirstName");
        this.Property(t => t.LastName).HasColumnName("LastName");
        this.Property(t => t.Email).HasColumnName("Email");
        this.Property(t => t.Id).HasColumnName("Id");

        // Relationships

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:54:08.047

感谢[@Gert 的回答](https://stackoverflow.com/questions/12622914/foreign-key-with-fluent-entity-framework/12680096#comment17021426_12622914)：

> 那还不够。实在是太多了。嗯，严格来说。FK 甚至会在没有`HasRequired`. 有了它，FK 将不能为空。

# c# - 在 Windows 中，当我在 Windows 资源管理器中双击一个文件时会发生什么？

> ID：12622919
> 
> 赞同：17
> 
> 时间：2012-09-27T13:47:06.197
> 
> 标签：c#, .net, windows, windows-explorer

**TL;博士**

*当用户双击或选择文件并`Enter`从 Windows 资源管理器中按下键时，正在执行的确切的低级内核和操作系统进程是什么？*

* * *

**细节**

这似乎是一个相当奇怪的问题，但我很好奇从 Windows 资源管理器打开文件的细节。

具体来说，我想知道的是当用户双击或选择文件并`Enter`从 Windows 资源管理器中按下键时正在执行的确切的低级内核和操作系统进程。

我问的原因是因为我有一个应用程序允许用户根据存储在数据库中的元数据浏览和搜索文件。当用户单击`Open`我提供的按钮时，我会启动一个进程，其中根文件是已选择文件的路径。此外，值得一提的是，这些文件位于网络共享上。

这已经工作了多年，但是，最近我的公司已经迁移到一个新的 Active Directory 服务器，现在该应用程序对于极少数用户 (1-2%) 来说是损坏的。真正奇怪的是这些用户无法打开这个我的应用程序中的文件，但他们可以浏览到该位置并从 Windows 资源管理器中打开它。当我的应用程序尝试打开该文件时，它会收到一个非常通用的异常，指出找不到该文件。

我已经三次检查了应用程序正在使用的路径（用于多个文件）并且路径不正确。在打开文件之前，我已验证我的用户已连接到这些网络驱动器。一切都设置正确并且应该可以工作，但我的应用程序（或`System.Process`）无法“看到”或打开这些文件。

Windows Explorer 应用程序的作用`System.Process`与在应用程序中使用有何不同？

* * *

对于那些在回答之前必须有代码的人，这里是我用来打开文件的非常简洁的代码。同样，这已经工作了多年，据我所知，这就是让 Windows 从 .Net 中打开文件的方式。

```
//From my Button-Click Event...
string file = e.Cell.Value.ToString();
try
{
    Process p = new Process();
    p.StartInfo.FileName = file;
    p.StartInfo.Verb = "Open";
    p.Start();
} 
catch (Exception ex)
{
    MessageBox.Show("A problem has occurred while trying to open the doccument."
    + "Please make sure that the file below exists and that you have permission " 
    + "to view it."
    + Environment.NewLine + Environment.NewLine
    + file
    + Environment.NewLine + "---------------" + Environment.NewLine  +
    ex.Message

    );
    //ex.Message states "The system cannot find the file specified"
} 
```

* * *

还有一件事。我在 SO 上找到[了这个问题](https://stackoverflow.com/questions/10927503/the-system-cannot-find-the-file-specified-exception-in-process-start-tscon-exe)，但它不适用于/不应该适用于这个问题。我的应用程序只是试图打开 PDF 和一些工程图文件。没什么特别的，它不应该需要管理员访问权限。此外，我认为不需要任何用户身份验证，因为大多数用户从未收到此消息，并且他们已经通过登录并浏览到网络位置在网络上验证了自己。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T14:21:02.653

> 当用户在 Windows 资源管理器中双击或选择文件并按 Enter 键时，正在执行的确切的低级内核和操作系统调用是什么？

你可以自己测试一下。我是这样做的：一个示例 C# 程序代码

```
class Program
{
    static void Main(string[] args)
    {

    }        
} 
```

现在您可以从预定义的位置运行此应用程序。然后，您可以使用 SysInternals 的[ProcMon](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)应用程序来观察低级调用。这是 ProcMon 在我的机器上生成的 csv 文件的快照。我放了一个过滤器，只包含`path`在文件中，它是`c:\test.exe`

```
"Time of Day","Process Name","PID","Operation","Path","Result","Detail"
"14:57:55.3495633","Explorer.EXE","2568","CreateFile","C:\Test.exe","SUCCESS","Desired Access: Generic Read, Disposition: Open, Options: Open Requiring Oplock, Attributes: N, ShareMode: Read, AllocationSize: n/a, OpenResult: Opened"
"14:57:55.3498808","Explorer.EXE","2568","FileSystemControl","C:\Test.exe","SUCCESS","Control: FSCTL_REQUEST_FILTER_OPLOCK"
"14:57:55.3507711","Explorer.EXE","2568","CreateFile","C:\Test.exe","SUCCESS","Desired Access: Read Attributes, Disposition: Open, Options: Open Reparse Point, Attributes: n/a, ShareMode: Read, Write, Delete, AllocationSize: n/a, OpenResult: Opened"
... 
```

完整版的 csv 可在[pastebin](http://pastebin.com/6bQ7f1uS)上找到。csv 文件中的每一行都对应一个低级调用，此外还有其他由于路径上的严格过滤器而被排除的绒毛。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T14:00:56.500

一个非常常见的故障模式，并且出现在您的代码中，是没有正确设置 ProcessStartInfo.WorkingDirectory。一部分程序依赖于资源管理器将默认工作目录设置为包含文件的目录，并在未设置时失败。他们会做一些不明智的事情，比如在不指定完整路径名的情况下打开配置文件，只有在工作目录设置正确的情况下才有效。

你像这样修复它：

```
Process p = new Process();
p.StartInfo.FileName = file;
p.StartInfo.WorkingDirectory = System.IO.Path.GetDirectoryName(file);
p.Start(); 
```

它假设您不会犯同样的错误，即未指定*file*的完整路径名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T14:40:23.540

你的“TL；DR”问题很简短，但我不确定回答这个问题是否能解决你的问题。Hans Passant 的回答可能更有用。不过我会尽量提供一些信息。

Windows 有几个层，在这种情况下，两个有趣的层是*Windows Shell* API 和*系统服务*API。您正在使用`Process.Start()`一种将[`ShellExecuteEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762154%28v=vs.85%29.aspx)在 Windows Shell 中调用的方式。Windows Shell 在 Windows 之上提供了一个抽象，您在其中有一个桌面（实际上是某个磁盘上的一个文件夹），并且文件被视为带有图标和动词的文档，以对这些文档进行操作。在您的情况下，您使用的是`Open`动词。

Windows Shell 非常复杂并且可以扩展，因此`ShellExecuteEx`对于特定路径和动词所做的事情很容易回答。这取决于本地机器上注册的内容。但是，如果文件是 PDF 文件并且动词是`Open`，您会期望 shell 将运行与`.PDF`注册表中的扩展相关联的任何应用程序。

**在 Windows 7 中，您可以在Control Panel** > **Programs** > **Default Programs** > **Set Associations**检查和修改文件关联。我怀疑如果`.PDF`缺少与扩展相关的程序，您可能会得到`FileNotFoundException`，但我尚未验证。

如果 shell 决定应该执行一个应用程序，它将在某个时候调用系统服务层并使用该[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)函数来创建一个新进程。对于 PDF 文件（取决于 的注册），将创建一个使用单个命令行参数（您指定的文件`.PDF`）执行的进程。`Acrobat.exe`

要解决问题，您可以在命令提示符下写入`file.pdf`（文件应该存在）并查看 shell 是否能够打开 PDF 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T15:30:32.717

您可以使用[FileSystemInfo.FullName](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.fullname.aspx)尝试这样的事情吗？

```
string file = e.Cell.Value.ToString();
var fileInfo = new FileInfo(Path.Combine(System.IO.Path.GetDirectoryName(file) + file));
if (!fileInfo.Exists)
{
    throw new FileNotFoundException(fileInfo.FullName + " was not found");
}
System.Diagnostics.Process.Start(fileInfo.FullName); 
```

# sql-server-2008 - 列出所有具有模式名称的存储过程

> ID：12622920
> 
> 赞同：16
> 
> 时间：2012-09-27T13:47:07.400
> 
> 标签：sql-server-2008, stored-procedures, database-schema

任何人都可以建议在数据库中列出所有存储过程及其模式名称的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-27T13:49:40.690

```
SELECT [schema] = OBJECT_SCHEMA_NAME([object_id]),
  name
FROM sys.procedures; 
```

或者

```
SELECT [schema] = SCHEMA_NAME([schema_id]),
  name
FROM sys.procedures; 
```

对于特定的数据库，您可以先将上下文更改为该数据库，或者稍微更改 Marc 的查询（在这种情况下我的查询不好，因为它们依赖于上下文敏感的函数）：

```
SELECT 
    SchemaName = s.name,
    ProcedureName = pr.name 
FROM 
    databasename.sys.procedures pr
INNER JOIN 
    databasename.sys.schemas s ON pr.schema_id = s.schema_id; 
```

如果要对所有数据库执行此操作：

```
DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += N'
  UNION ALL SELECT db = N''' + name + ''', 
    s.name COLLATE Latin1_General_CI_AI,
    o.name COLLATE Latin1_General_CI_AI
  FROM ' + QUOTENAME(name) + '.sys.procedures AS o
  INNER JOIN ' + QUOTENAME(name) + '.sys.schemas AS s
  ON o.[schema_id] = s.[schema_id]'
FROM sys.databases
-- WHERE ... -- probably don't need system databases at least

SELECT @sql = STUFF(@sql, 1, 18, '') 
  -- you may have to adjust  ^^ 18 due to copy/paste, cr/lf, tabs etc 
  + ' ORDER BY by db, s.name, o.name';

EXEC sp_executesql @sql; 
```

如果您的数据库具有不同的排序规则，则排序规则子句是必需的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-27T13:49:14.913

尝试这个：

```
SELECT 
    SchemaName = s.name,
    ProcedureName = pr.name 
FROM 
    sys.procedures pr
INNER JOIN 
    sys.schemas s ON pr.schema_id = s.schema_id 
```

这应该将所有存储过程及其模式名称作为结果集列出。

两个视图 -`sys.procedures`并且`sys.schemas`- 都有更多属性 - 检查它们，如果您需要它们，请将它们包含在您的查询中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-14T13:20:35.940

如果要搜索具有所需架构名称的 proc，可以使用以下查询：

```
SELECT 
    SchemaName = s.name,
    ProcedureName = pr.name 
FROM 
    sys.procedures pr
INNER JOIN 
    sys.schemas s 
ON pr.schema_id = s.schema_id
WHERE s.name = 'YOUR_SCHEMA_NAME'
ORDER BY SchemaName; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-07T11:44:25.420

这可能会帮助你..

> 选择 * 从 sys.procedures;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-16T15:18:08.683

尝试这个：

```
execute [sys].[sp_stored_procedures] 
```

或者试试这个并获取所有参数：

```
execute [sys].[sp_sproc_columns] 
```

好的...您必须使用它遍历所有数据库目录名称，但是...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-05T07:14:14.853

您可以使用脚本生成器来获取它们。在左窗格中右键单击要为其获取存储过程的数据库，任务->生成脚本单击下一步并选择选择特定数据库对象并选择存储过程并单击下一步，您可以根据需要自定义并生成脚本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-21T06:39:28.173

```
SELECT name,crdate  FROM dbo.sysobjects WHERE (type = 'P')  order by name 

SELECT [schema] = OBJECT_SCHEMA_NAME([object_id]),name FROM sys.procedures;

select OBJECT_SCHEMA_NAME([object_id]) as 'SchemaName',name as 'SP Name ' ,

create_date,modify_date FROM sys.procedures order by OBJECT_SCHEMA_NAME([object_id]), name 
```

# java - JAVA：计算 2D 光束武器的后推力

> ID：12622923
> 
> 赞同：1
> 
> 时间：2012-09-27T13:47:13.907
> 
> 标签：java, physics

我正在尝试制作一个游戏，其中玩家拥有激光武器，他可以射击物体以推动它们，或者射击地板/墙壁以将自己从一个地方移动到另一个地方。我的问题是，我不知道如何进行后推——当你射击时将你推向相反方向的力，也不是推其他物体的力（尽管一旦我知道如何计算会更容易以前的）。有谁能够帮我？

我掌握的信息：

```
Laser = startX, startY, endX, endY.
Player = x, y, width, height, xVel, yVel.
D = distance between the player and the laser end point. 
```

我如何计算`xVel\yVel`差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:35:02.553

你需要知道物体的质量和弹丸的力量。您可以扩展一个类或构建一个接口，或者您可以将这些属性附加到 Laser 或 player 并在物理方法的签名中使用它。

就像评论说你

> 力=-反对力

牛顿告诉我们力=质量*加速度。

为了简单起见，您可以使用速度来加速。

找到速度：

> 距离 = 起点-终点

为了速度，您必须使用计时方法，该方法将按您可以配置的间隔计数。

> 速度=距离*时间

现在你可以用武力给对手负速度了！

# c# - 如何将字符串转换为类型

> ID：12622926
> 
> 赞同：0
> 
> 时间：2012-09-27T13:47:28.680
> 
> 标签：c#, string, generics, types, casting

我想将字符串转换为类型。是否使用此代码：

```
private static T CastToT<T>(string value)
{
    return (T) Convert.ChangeType(value, typeof (T));
}

Type nr5 = CastToT<Type>(typeof(Class1).ToString()); 
```

但我得到了一个 InvalidCastException。

> 从“System.String”到“System.Type”的无效转换。

为什么我不能将字符串转换为类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T14:05:34.260

因此，如果您想根据名称检索类型，您可以简单地使用此方法：

```
Type.GetType(typeName); 
```

typeName 是您要检索的类型的全名。如果您要查找的类型在当前程序集或 mscorlib.dll 中，则此方法将起作用。

例如，根据您的示例：

```
private static Type CastToType(string value)
{
    return Type.GetType(value);
} 
```

然后通过给出类型的 FullName 来调用该方法：

```
Type nr5 = CastToType(typeof(Random).FullName);
// nr5 will be null if no corresponding type is found.

if (nr5 != null && nr5.FullName == typeof(Random).FullName)
{
    // success
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T14:07:18.083

使用可以改用这个 -

```
Assembly.GetType(string). 
```

[MSDN 链接](http://msdn.microsoft.com/en-us/library/y0cd10tb.aspx)

# postgresql - 分组依据和“第一”或“分钟”

> ID：12622927
> 
> 赞同：1
> 
> 时间：2012-09-27T13:47:33.733
> 
> 标签：postgresql, aggregate

我有一个表“消息”，其中包含 id、from、to、datetime、subject、body 列。我想获取每个发件人（来自）的最新消息的主题和正文。

这是我的查询

```
SELECT min(subject) as tsubject,min(body) as tbody 
FROM messages 
WHERE "to"=28
GROUP BY "from"
ORDER BY "datetime" 
```

这将导致

```
ERROR:  column "messages.datetime" must appear in the GROUP BY clause or be used in an aggregate function 
```

所以我得到了错误的全部内容，但我不想按“日期时间”对结果进行分组，只是要排序的组，所以 min 从每个组中选择最新消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T08:35:43.850

```
SELECT a.*,u.name,m.subject,m.body FROM
(SELECT "from",max("datetime") as sent
FROM messages 
WHERE "to" = 31
GROUP BY "from") a
LEFT JOIN users u ON a."from" = u.id
LEFT JOIN messages m ON a.sent=m."datetime" AND a."from"=m."from" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T14:02:31.443

```
select subject, body, m."from"
from (
    SELECT 
        id,
        "from",
        max("datetime")
    FROM messages 
    WHERE "to" = 28
    group by id, "from"
    ) s 
    inner join 
    messages m on m.id = s.id
ORDER BY "datetime" desc 
```

# javascript - 使用 Dynarch 的 JSCalendar 1.0，如何将默认日期设置为昨天

> ID：12622930
> 
> 赞同：0
> 
> 时间：2012-09-27T13:47:40.113
> 
> 标签：javascript, jscalendar

我正在使用来自 dynarch.com 的 1.0 版 JSCalendar 我在页面上有 3 个日历，对于其中一个，我需要将默认日期设置为昨天。

我用来设置日历的代码如下所示：

```
 Calendar.setup({
        inputField  : "endDate",         // ID of the input field
        ifFormat    : "%Y%m%d",    // the date format
        button      : "calendarTriggerEndDate",       // ID of the button
        timeFormat  : 24,
        showsTime   :false,
        displayArea :"reportEndDate",
        daFormat    : "%b %d, %Y"
    }); 
```

我尝试添加一个“日期”参数，但它似乎没有完成这项工作。也许，它可能需要采用不同的格式。

如何设置默认日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T16:50:24.623

不幸的是，我也没有找到一个“干净”的方法来做到这一点，所以这就是我不得不求助于手动修复这个问题的方法：

```
<input type="text" name="StartDate" id="StartDate" />
<script type="text/javascript">
  var cTime = new Date();
  var defDate = cTime.toISOString();
  defDate = defDate.substring(0, defDate.indexOf("T"));
  document.getElementById('StartDate').value = defDate;
  document.write('<img src="icon.png" id="trigger" align="Cal" height="20" style="vertical-align:middle" />');
  var c = Calendar.setup( {
    inputField  : "StartDate",
    ifFormat    : "%Y-%m-%d",
    button      : "trigger"
  });
</script> 
```

# iphone - 如何在 iOS 6 上的 UIWebView 键盘下替换工具栏上的按钮？

> ID：12622931
> 
> 赞同：2
> 
> 时间：2012-09-27T13:47:40.477
> 
> 标签：iphone, button, uiwebview, toolbar, ios6

`UIWebView`如何在 iOS 6 的键盘下替换工具栏上的按钮？

以下代码在 iOS 5.1 上运行良好，但在 iOS 6 上无法运行：

```
UIWindow *keyboardWindow = nil;
for (UIWindow *testWindow in [[UIApplication sharedApplication] windows]) {
    if (![[testWindow class] isEqual:[UIWindow class]]) {
        keyboardWindow = testWindow;
        break;
    }
}
for (UIView *possibleFormView in [keyboardWindow subviews]) {
    // iOS 5 sticks the UIWebFormView inside a UIPeripheralHostView.
    if ([[possibleFormView description] rangeOfString:@"UIPeripheralHostView"].location != NSNotFound) {
        for (UIView *subviewWhichIsPossibleFormView in [possibleFormView subviews]) {
            if ([[subviewWhichIsPossibleFormView description] rangeOfString:@"UIWebFormAccessory"].location != NSNotFound) {
                UIBarButtonItem *buttonDone =[[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleBordered target:self action:@selector(pressDone)];
                NSArray *itemsArray;
                itemsArray = [NSArray arrayWithObjects:buttonDone, nil];
                [(UIToolbar*)subviewWhichIsPossibleFormView setItems:itemsArray];
            }
        }
    }
} 
```

iOS 6 上的错误：

```
2012-09-27 16:31:13.537 Linux[2633:907] -[UIWebFormAccessory setItems:]: unrecognized selector sent to instance 0x1d886ad0
2012-09-27 16:31:13.540 Linux[2633:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIWebFormAccessory setItems:]: unrecognized selector sent to instance 0x1d886ad0'
*** First throw call stack:
(0x361032a3 0x3441397f 0x36106e07 0x36105531 0x3605cf68 0x775c5 0x33bbda6f 0x360d85df 0x360d8291 0x360d6f01 0x36049ebd 0x36049d49 0x365862eb 0x37428301 0x7538d 0x75328)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:53:31.250

UIWebFormAccessory 不再是 iOS6 上的 UIToolbar。不过，它*包含*您正在寻找的 UIToolbar。使用类似以下的内容在任一操作系统版本上找到它...

```
+ (UIToolbar *)findVirginWebKeyboardToolbar:(UIView *)parent
{
    if ([parent isKindOfClass:[UIToolbar class]]) {
        // the stock toolbar contains a single item with a UISegmentedControl customView.
        UIToolbar *tb = (UIToolbar *)parent;
        if ([tb.items count] == 1 && [((UIBarButtonItem *)[tb.items objectAtIndex:0]).customView isKindOfClass:[UISegmentedControl class]]) {
            return tb;
        }
    }

    for (UIView *view in parent.subviews) {
        UIToolbar *tb = [self findVirginWebKeyboardToolbar:view];
        if (tb) return tb;
    }

    return nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:24:38.470

使用以下代码删除未使用的工具栏：

```
 [subviewWhichIsPossibleFormView removeFromSuperview]; 
```

并添加一个新的。抱歉，没有可用的代码。

# android - Android 偏好类别

> ID：12622932
> 
> 赞同：0
> 
> 时间：2012-09-27T13:47:42.967
> 
> 标签：android, android-layout, android-preferences

您好，我想在 TextView 上使用偏好类别（带有下划线等）样式，我应该在 xml 上实现哪些样式/设置？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:37:46.193

您可以做的是使用**android:layout为 PreferenceCategory 设置自定义布局**

```
<PreferenceCategory android:layout="@layout/prefcat_layout">
    ...
</PreferenceCategory> 
```

**prefcat_layout.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <TextView 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/underlined_title"/>

</LinearLayout> 
```

**字符串.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="underlined_title"> <u>Underlined Application preferences title</u></string>
</resources> 
```

# jquery - div旋转后的jquery高度和宽度在chrome中失败

> ID：12622938
> 
> 赞同：1
> 
> 时间：2012-09-27T13:48:04.997
> 
> 标签：jquery, html, rotation

我正在使用插件[http://jqueryrotate.googlecode.com/svn/trunk/jQueryRotate3.js](http://jqueryrotate.googlecode.com/svn/trunk/jQueryRotate3.js)来旋转 div。旋转后，我在 IE 中得到正确的高度和宽度，但在 chrome 中没有。请帮忙。这是代码[http://jsfiddle.net/73pXD/2948/](http://jsfiddle.net/73pXD/2948/)

# asp.net-mvc - 渲染模型属性的最佳实践：检查它们是否为空或字符串为空

> ID：12622946
> 
> 赞同：0
> 
> 时间：2012-09-27T13:48:41.623
> 
> 标签：asp.net-mvc, model-view-controller, view, model

我有一个具有多个属性的模型，例如姓名、电话、电子邮件、地址等，有时某些属性是空的。

据我了解 mvc 的最佳实践，我不应该将 HTML 放在我的模型中，例如

```
if (string.isNullorEmpty(_username))
    username = "<span>" + _username + </span>;
else
    username = string.Empty; 
```

所以我问自己，我应该在哪里检查属性是否为空。我认为也不建议在以下视图中执行此操作：

```
<% if (Model.username != string.empty) { %>
    <span><%: Model.username %></span>
<% } %> 
```

检查模型属性是否为空的最佳实践是什么？？？

谢谢你的意见。我很高兴收到你的来信！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:54:47.910

我认为检查视图中的空值没有任何问题，我想另一种方法是为每种可能性创建一个视图模型并在控制器中进行检查。

# node.js - Google 电子表格创建 - Node.js

> ID：12622947
> 
> 赞同：1
> 
> 时间：2012-09-27T13:48:47.410
> 
> 标签：node.js, google-sheets, google-spreadsheet-api

我正在尝试使用 node.js 使用谷歌电子表格 api 创建新的谷歌电子表格

我已经设法让 Google OAuth 2.0 正常工作，在那里我获得了客户端的访问令牌。

现在在搜索 Google API 文档时，有使用 gData 客户端库的示例，但没有给我指向 node.js 的指针

这是我创建新的谷歌电子表格的发现

1.  手动上传电子表格或
2.  使用可恢复的上传链接

可恢复上传链接的信息不多。

我可以看到 HTTP 发布请求和响应，但我不明白如何在 node.js 中构建发布请求

编辑 -

我正在阅读[Google Apps 平台](https://developers.google.com/google-apps/documents-list/#creating_a_new_document_or_file_with_metadata_only)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-04T22:16:52.973

以下是如何使用[Google Sheets API](https://developers.google.com/sheets/api/guides/concepts)（当前为 v4）的[`create`](https://developers.google.com/sheets/api/reference/rest/v4/spreadsheets/create)方法来做到这一点。

此代码示例不使用任何第三方库，它使用[`googleapis`：Google API 的官方 Node.js 客户端](https://www.npmjs.com/package/googleapis)

```
const google = require('googleapis');
const sheets = google.sheets('v4');

// authenticate, and store that authentication, in this example
// it is stored in a variable called `auth`. I am using JWT 
// authentication, but you can use the any form of authentication

const auth = new google.auth.JWT(
  key.client_email,
  null,
  key.private_key,
  ['https://www.googleapis.com/auth/spreadsheets'], // make sure that your auth scope includes `spreadsheets`, `drive` or `drive.file`
  null
);

sheets.spreadsheets.create({
  auth: auth,
  resource: {
    properties: {
      title: 'Title of your new spreadsheet'
    }
  }
}, (err, response) => {
  if (err) {
    console.log(`The API returned an error: ${err}`);
    return;
  }

  console.log('Created a new spreadsheet:')
  console.log(response);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T01:28:19.680

如果您只想知道如何构建发布请求，请查看此示例

[http://nodejs.org/api/http.html#http_http_request_options_callback](http://nodejs.org/api/http.html#http_http_request_options_callback)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T03:42:06.650

查看

[https://github.com/EastCloud/node-spreadsheets/](https://github.com/EastCloud/node-spreadsheets/)

EastCloud 围绕 Google Docs/Drive API 编写了一个友好的包装器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-19T17:18:22.183

**如果您是新手并且想要获取数据并将其添加到 Google 电子表格，请参阅下面的链接以获取分步指南。**

[https://www.twilio.com/blog/2017/03/google-spreadsheets-and-javascriptnode-js.html](https://www.twilio.com/blog/2017/03/google-spreadsheets-and-javascriptnode-js.html)

我在最近的 nodejs 项目中进行了相同的测试

# sensors - 当外部温度传感器连接到 STM32F207VC 时产生 EXTI0 中断

> ID：12622948
> 
> 赞同：1
> 
> 时间：2012-09-27T13:48:51.737
> 
> 标签：sensors, stm32, adc

我正在使用 STM32F207VC 控制器。我将外部探头温度传感器连接到 stm32 的内部 ADC 通道之一。

当它连接到控制器时，我想生成一个外部中断，我应该从外部温度传感器开始测量。

请任何人都可以提供我的代码或任何帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T02:24:11.943

我有一个与 Solomon Systems SSD1963 GPU 连接的 STM32F4 处理器。GPU 有一个撕裂信号 (TE)，它会在处理器即将进行垂直刷新时通知处理器。我希望您可以使用此代码作为示例，并使其适应您的解决方案。

TE 信号连接到 CPU 的 GPIO G7 引脚。所以首先我必须配置 GPIO 引脚。

```
//GPIO Pin G7
GPIO_StructInit(&GPIO_InitStructure);
GPIO_InitStructure.GPIO_Pin = GPIO_Pin_7;
GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN;
GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;
GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;
GPIO_Init(GPIOG, &GPIO_InitStructure); 
```

接下来我必须配置中断和 NVIC。

```
SYSCFG_EXTILineConfig(EXTI_PortSourceGPIOG, EXTI_PinSource7);

EXTI_InitTypeDef EXTI_InitStructure;
EXTI_StructInit(&EXTI_InitStructure);
EXTI_InitStructure.EXTI_Line = EXTI_Line7;
EXTI_InitStructure.EXTI_Mode = EXTI_Mode_Interrupt;
EXTI_InitStructure.EXTI_Trigger = EXTI_Trigger_Rising;
EXTI_InitStructure.EXTI_LineCmd = ENABLE;
EXTI_Init(&EXTI_InitStructure);

NVIC_InitTypeDef NVIC_InitStructure;
NVIC_InitStructure.NVIC_IRQChannel = EXTI9_5_IRQn;
NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0x01;
NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0x01;
NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
NVIC_Init(&NVIC_InitStructure); 
```

最后我必须创建中断处理程序。第`EXTI9_5_IRQHandler`5 ~ 7 行处理外部中断。这个方法实际上在我的 CPU 启动程序集文件中定义为弱引用。我只需要重新定义方法，链接器将完成剩下的工作。

```
extern "C" void EXTI9_5_IRQHandler(void)
{
    if(EXTI_GetITStatus(EXTI_Line7) != RESET)
    {
        //Handle the interrupt

        EXTI_ClearITPendingBit(EXTI_Line7);
    }
} 
```

我使用 Mentor Graphics 的 Sourcery Codebench Lite 作为我的工具链。

# javascript - 为什么 JavaScript wrapInner 会抛出错误？

> ID：12622949
> 
> 赞同：0
> 
> 时间：2012-09-27T13:48:51.673
> 
> 标签：javascript, jquery, firefox-addon, runtime-error

我有一个带有以下代码的 Firefox 插件：

```
$("table > tbody > tr > td[width='600']").wrapInner("<div id='content_cont' />"); 
```

那行代码执行，但它后面的所有行都没有。它会在 Firefox 错误控制台中抛出一个代码超过 500KB 的错误。

代码：

```
An exception occurred.
Traceback (most recent call last):
  File "resource://jid0-ib8arkgejpxo7qidkuieut5rquk-at-jetpack/flvs-educator-release-version/data/redesign.js", line 49, in 
    $("table > tbody > tr > td[width='600']").wrapInner("<div id='content_cont' />");
  File "resource://jid0-ib8arkgejpxo7qidkuieut5rquk-at-jetpack/flvs-educator-release-version/data/jquery.js", line 2, in .wrapInner
    (function(a,b){function G(a){var b=F[a]={};return p.each(a.split(s)...<tons of meaningless code>...&define("jquery",[],function(){return p})})(window);
ReferenceError: Begin is not defined 
```

我不明白它为什么这样做。语法错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T18:32:59.500

如果您包装的内容包含任何`script`元素，则将`wrapInner`再次执行它们，即使它们在页面首次加载时运行。有关更多信息，请参阅jQuery 的错误跟踪器上的[Ticket #9134 。](http://bugs.jquery.com/ticket/9134)

看起来`script`您要包装的内容中的一个元素存在错误，并且该错误阻止您的代码在调用之后继续执行`wrapInner`。可能会发生错误，因为代码假定它只会运行一次。最简单的解决方案可能是`script`在包装之前从内容中删除任何元素：

```
$("table > tbody > tr > td[width='600']").find('script')
  .remove()
.end().wrapInner("<div id='content_cont' />"); 
```

# version-control - 如何将塑料单片机与jira集成？

> ID：12622950
> 
> 赞同：1
> 
> 时间：2012-09-27T13:48:56.460
> 
> 标签：version-control, jira, issue-tracking, plasticscm

我正在尝试从 VSS 迁移到 Plastic SCM，并希望将其与 JIRA 一起使用。

我已经到了这一步。

![在此处输入图像描述](../Images/b600b2c841716d8119311998a74ecbaa.png)

我尝试参考他们的帮助文档。但这并没有帮助。

有人知道如何将新分支链接到 JIRA 中的问题吗？

我试图给问题和分支赋予相同的名称。那是行不通的。如果Issue key是：“DEMO-7”，Plastic SCM中的“Branch Prefix”和“Branch Name”应该是什么？

我确定我错过了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:57:20.127

如果您的问题键是 DEMO-7 并且您使用的分支前缀是“DEMO”，您只需将分支命名为“DEMO007”。

# zend-framework - Zend_Mail 无法打开套接字

> ID：12622953
> 
> 赞同：0
> 
> 时间：2012-09-27T13:49:02.580
> 
> 标签：zend-framework

我正在使用 Zend_Mail 从 Aruba PEC 发送一封电子邮件。

```
 $config = array('auth'=>'login', 
                    'ssl' => 'ssl',
                    'port' => 465,
                    'username'=>'user@pec.it', 
                    'password'=>'pass');

    $tr = new Zend_Mail_Transport_Smtp('62.149.152.91',$config); 
    Zend_Mail::setDefaultTransport($tr);
    $mail = new Zend_Mail();

    $mail->setBodyHtml('Mail test');
    $mail->setFrom('user@pec.it');
    $mail->addTo('marco@email.it');
    $mail->setSubject('Test');
    $mail->send(); 
```

但我收到此错误：“无法打开套接字”。

现在，如果我尝试在本地 PC 上执行此脚本，它可以正常工作，但是当我尝试在局域网中的服务器上执行它时，我会收到此错误。比 ii 尝试使用另一个 IP 地址（无证书帐户）它可以正常工作。（所以我认为这是配置服务器的问题？？）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:00:35.510

您需要在 PC 上安装 OpenSSL。你的服务器是 Windows 吗？如果你是，那就有点痛苦了。

# javascript - 在 Windows 8 应用程序中动态加载 CSS 文件

> ID：12622955
> 
> 赞同：0
> 
> 时间：2012-09-27T13:49:10.937
> 
> 标签：javascript, css

我正在开发一个 windows 8 应用程序，在我的应用程序期间，我想根据 Windows 的语言加载不同的 CSS 文件。例如，如果用户的默认语言是 En 我加载一个 CSS 文件，如果它是 Ar 我加载一个不同的，我该怎么做？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:58:55.883

如果要检查浏览器的默认语言，

> ```
> var l_lang;
> if (navigator.userLanguage) // Explorer
> l_lang = navigator.userLanguage;
> else if (navigator.language) // FF   
> l_lang = navigator.language;
> 
> alert(l_lang); 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T14:00:33.253

我相信Windows8的app还是有的`<head>`吧？然后您可以使用javascript将css添加到头部。

```
var h=document.getElementsByTagName('head')[0];
var l = document.createElement("link");
l.setAttribute("rel", "stylesheet");
l.setAttribute("type", "text/css");
l.setAttribute("href", filename);
h.appendChild(l); 
```

# android - 在android中创建新屏幕的步骤

> ID：12622971
> 
> 赞同：-1
> 
> 时间：2012-09-27T13:50:06.630
> 
> 标签：android

在 Android 中创建和打开新屏幕的步骤是什么。

我正在使用 Eclipse IDE

我所说的新屏幕的意思是当我点击按钮时，它将带我进入下一个屏幕（布局）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T14:06:07.293

我假设您是指“新屏幕”的活动。好：

1.  使用新的 ADT v. 20 非常容易。右键单击您的项目，然后单击新建-> 其他： ![在此处输入图像描述](../Images/d6655ee1b22dde8649a462543bd35f03.png)

2.  点击安卓活动： ![在此处输入图像描述](../Images/4bef23a49515120bc29b2e92790b9980.png)

3.  现在为你的班级命名

4.  从您的第一个活动（从按钮等）启动活动，如下所示：

    `Intent i = new Intent(firstActivity.this, secondActivity.class); startActivity(i);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:05:56.947

在这里询问之前查找谷歌指南不是很明显吗？ [http://developer.android.com/training/basics/firstapp/index.html](http://developer.android.com/training/basics/firstapp/index.html)

# ios - 防止 ios 固定应用刷新

> ID：12622975
> 
> 赞同：2
> 
> 时间：2012-09-27T13:50:28.353
> 
> 标签：ios, jquery-mobile

每次用户单击其图标时，如何阻止固定网页刷新。

我创建了一个 jqm 网络应用程序，其想法是用户将其固定到他们的主页。但是，每次我按下相应的图标时，它都会重新加载页面。我希望它保持上次查看的状态，直到调用显式刷新。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T00:41:34.697

这里不多说了...

您是否尝试将 .preventDefault() 绑定到固定项目。

```
$(youritems).on('click', function(e){
    e.preventDefault;
    }); 
```

# c# - 删除级联时流利的休眠子类

> ID：12622976
> 
> 赞同：2
> 
> 时间：2012-09-27T13:50:29.927
> 
> 标签：c#, fluent-nhibernate, nhibernate-mapping

首先，我是 FluentNHibernate 的新手。

我有这些数据库表，对一个类及其子类进行建模：

```
Table MyClass :
id (PK)
...

Table MySubClass :
id (PK) (FK references Class(id) on delete cascade)
... 
```

我想在 FluentNHibernate 中映射它，以便它可以重新生成数据库模型，包括“删除级联”，但我找不到如何。

我有这个映射：

```
public class MyClassMap : ClassMap<MyClass>
{
    public MyClassMap()
    {
        this.Id(x => x.Id, "id");
        // snip
    }
}

public class MySubClassMap : SubclassMap<MySubClass>
{
    public MySubClassMap()
    {
        // snip
    }

} 
```

这映射了正确的表和外键，但在删除级联时没有任何痕迹。我确定我错过了一些东西，但找不到什么。

任何的想法 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:18:10.583

NHibernate 在代码中实现了级联。可以在 hbm 中设置级联删除，但不能使用 FluentMappings。但是，您不能使用 sql 添加级联规则`NHibernate.Mapping.IAuxiliaryDatabaseObject`

# android - Android：阻止 EditText 离开 tablerow

> ID：12622978
> 
> 赞同：0
> 
> 时间：2012-09-27T13:50:37.230
> 
> 标签：android, textview, android-edittext, tablerow, android-tablelayout

所以我在 android 中有一个带有一些表格行的表格布局。在每一行中，我都有一个 textview 和一个 edittext。我的设置如下：

```
<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingLeft="5dp"
    android:paddingRight="5dp"
    android:paddingTop="10dp"
    android:stretchColumns="3" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_marginBottom="5dp"
        android:paddingTop="5dp"
        android:paddingBottom="5dp"
        android:paddingLeft="5dp"
        android:background="@drawable/vnosnopolje" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Up. ime"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/uporabnisko_ime"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:singleLine="true" 
            android:background="@drawable/round_corners"
            android:paddingTop="3dp"
            android:paddingBottom="3dp"
            android:paddingLeft="3dp"
            android:layout_marginLeft="5dp"
            android:ems="10"
            android:inputType="text" >

            <requestFocus />
        </EditText>

    </TableRow>
    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_marginBottom="5dp"
        android:paddingTop="5dp"
        android:paddingBottom="5dp"
        android:paddingLeft="5dp"
        android:background="@drawable/vnosnopolje" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Geslo"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/geslo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:singleLine="true" 
            android:background="@drawable/round_corners"
            android:inputType="textPassword"
            android:paddingTop="3dp"
            android:paddingBottom="3dp"
            android:paddingLeft="3dp"
            android:layout_marginLeft="5dp"
            android:ems="10" >
        </EditText>
    </TableRow>
 </TableLayout> 
```

一切正常。但是，当我在 textview 中输入更长的文本时，我的 edittext 会超出表格行。所以看起来它并没有结束。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:02:43.320

只是你在 TextView 和 EditText 视图中设置

`android:layout_weight="1"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:56:25.783

也许您可以使用格式化程序强制宽​​度留在表格中。你可以在这里阅读更多关于它的信息[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)

# spring - 试图将对象传递给控制器 （Spring MVC）

> ID：12622979
> 
> 赞同：0
> 
> 时间：2012-09-27T13:50:38.833
> 
> 标签：spring, unit-testing, spring-mvc, spring-3

我正在尝试测试我的控制器。Spring 填充了我的 Profile 对象，但它是空的。我可以在通话之前设置电子邮件但它仍然为空。如何以正确的方式快速传递个人资料？

```
 private MockHttpServletRequest request;
    private MockHttpServletResponse response;

    @Autowired
    private RequestMappingHandlerAdapter handlerAdapter;

    @Autowired
    private RequestMappingHandlerMapping handlerMapping;

    @Before
    public void setUp() throws Exception {
        this.request = new MockHttpServletRequest();
        request.setContentType("application/json");
        this.response = new MockHttpServletResponse();
    }

    @Test
    public void testPost() {
        request.setMethod("POST");
        request.setRequestURI("/user/"); // replace test with any value

        final ModelAndView mav;
        Object handler;

        try {

            Profile p = ProfileUtil.getProfile();
            p.setEmail("test@mail.com");

            request.setAttribute("profile", p);

            System.out.println("before calling the email is " + p.getEmail());

            handler = handlerMapping.getHandler(request).getHandler();
            mav = handlerAdapter.handle(request, response, handler);
            Assert.assertEquals(200, response.getStatus());
            // Assert other conditions.
        } catch (Exception e) {

        }
    } 
```

这是控制器

```
@RequestMapping(value = "/", method = RequestMethod.POST)
public View postUser(ModelMap data, @Valid Profile profile, BindingResult bindingResult) {

    System.out.println("The email is " + profile.getEmail());

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:33:54.100

**尝试对控制器函数postUser**使用以下签名。

```
public View postUser(ModelMap data, @ModelAttribute("profile") @Valid Profile profile, BindingResult bindingResult) 
```

希望这对您有所帮助。干杯。

# mysql - 通过选择具有相同结构的另一个表来更新一个表

> ID：12622980
> 
> 赞同：2
> 
> 时间：2012-09-27T13:50:39.890
> 
> 标签：mysql, sql, sql-update

好吧，我非常陷入这个问题，我有两个结构相同的表，我想用第二个表的值更新第一个表。我有以下查询，但 mysql 抛出错误。

```
UPDATE property p 
SET ROW = (SELECT * FROM temp_property t WHERE p.id= t.id) 
```

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:42:34.647

我很确定您不能一次更新整行。您需要指定列名。

```
UPDATE property p, temp_property t 
SET p.col1 = t.col1, etc 
WHERE p.id=tp.id 
```

（MySQL 的固定查询。）

# python - Python NoneType 异常 ZMQ

> ID：12622982
> 
> 赞同：2
> 
> 时间：2012-09-27T13:50:49.223
> 
> 标签：python, sockets, zeromq, nonetype

我正在使用 pyzmq 在 rrbroker.py 和 reworker.py 之间传输消息。出于某种原因，我得到

```
worker:
    Users/eric/Documents/Programming/JavaScript/NodeJS/urchin/urchin_worker.py in <module>()
        111 while True:
        112     try:
    --> 113         message = socket.recv()
        114         message = json.loads(message)#decode into JSON
        115         print message
    Exception TypeError: "'NoneType' object is not callable" in <zmq.core.socket.Socket object at 0x104ffc460> ignored 
```

经纪人代码：

```
import zmq
context = zmq.Context()
frontend = context.socket(zmq.ROUTER)
backend = context.socket(zmq.DEALER)
frontend.bind("tcp://127.0.0.1:5559")
backend.bind("tcp://127.0.0.1:5560")

# Initialize poll set
poller = zmq.Poller()
poller.register(frontend, zmq.POLLIN)
poller.register(backend, zmq.POLLIN)

print 'starting Router-Dealer Broker...'
# Switch messages between sockets
while True:
    socks = dict(poller.poll())
    if socks.get(frontend) == zmq.POLLIN:
        message = frontend.recv()
        print 'passing message from frontend to backend'
        print message
        more = frontend.getsockopt(zmq.RCVMORE)
        if more:
            backend.send(message, zmq.SNDMORE)
        else:
            backend.send(message)

    if socks.get(backend) == zmq.POLLIN:
        message = backend.recv()
        print 'passing message from backend to frontend'
        print message
        more = backend.getsockopt(zmq.RCVMORE)
        if more:
            frontend.send(message, zmq.SNDMORE)
        else:
            frontend.send(message) 
```

经纪人日志：

```
passing message from frontend to backend
???0{pK???+E?5??
passing message from frontend to backend

passing message from frontend to backend
{'foo':'bar'}//data from client (connected to the broker's router port). 
```

很明显，我的代理一次向工作人员发送 3 个请求（这是正常的），但第一个数据包似乎是乱码，第二个数据包似乎是空的，第三个数据包最终包含我首先要发送的数据。

因此代理发送了数据包，但似乎 worker.py 从未收到数据。

# json - 从 biq 查询命令行加载 json 文件

> ID：12622983
> 
> 赞同：4
> 
> 时间：2012-09-27T13:50:51.323
> 
> 标签：json, google-bigquery

是否可以使用 Big Query 命令行工具从 json 文件（不仅仅是 csv）加载数据？我可以使用 GUI 加载一个简单的 json 文件，但是，命令行假定为 csv，并且我没有看到任何有关如何指定 json 的文档。

这是我正在使用的简单 json 文件

{"col":"值"}

使用模式 col:STRING

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-29T12:55:21.977

从 2.0.12 版开始，bq 允许上传以换行符分隔的 JSON 文件。这是一个完成这项工作的示例命令：

```
bq load --source_format NEWLINE_DELIMITED_JSON datasetName.tableName data.json schema.json 
```

如上所述，“bq help load”将为您提供所有详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-29T17:21:42.680

1）是的，你可以

2) 文档在[这里](https://cloud.google.com/bigquery/bq-command-line-tool-quickstart?hl=en#createtable)。转至步骤 3：上传文档中的表格。

3）您必须使用 --source_format 标志告诉 bq 您正在上传 JSON 文件而不是 csv。

4）完整的命令结构是

```
bq load [--source_format=NEWLINE_DELIMITED_JSON] [--project_id=your_project_id] destination_data_set.destination_table data_source_uri table_schema

bq load --project_id=my_project_bq dataset_name.bq_table_name gs://bucket_name/json_file_name.json path_to_schema_in_your_machine 
```

5）您可以通过以下方式找到其他 bq 负载变体

```
bq help load 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T08:32:01.717

它不支持 JSON 格式的数据加载。以下是最新 bq 版本 2.0.9 的命令的文档 ( `bq help load`) ：`load`

```
USAGE: bq [--global_flags] <command> [--command_flags] [args]

load     Perform a load operation of source into destination_table.

     Usage:
     load <destination_table> <source> [<schema>]

     The <destination_table> is the fully-qualified table name of table to create, or append to if the table already exists.

     The <source> argument can be a path to a single local file, or a comma-separated list of URIs.

     The <schema> argument should be either the name of a JSON file or a text schema. This schema should be omitted if the table already has one.

     In the case that the schema is provided in text form, it should be a comma-separated list of entries of the form name[:type], where type will default
     to string if not specified.

     In the case that <schema> is a filename, it should contain a single array object, each entry of which should be an object with properties 'name',
     'type', and (optionally) 'mode'. See the online documentation for more detail:
     https://code.google.com/apis/bigquery/docs/uploading.html#createtable

     Note: the case of a single-entry schema with no type specified is
     ambiguous; one can use name:string to force interpretation as a
     text schema.

     Examples:
     bq load ds.new_tbl ./info.csv ./info_schema.json
     bq load ds.new_tbl gs://mybucket/info.csv ./info_schema.json
     bq load ds.small gs://mybucket/small.csv name:integer,value:string
     bq load ds.small gs://mybucket/small.csv field1,field2,field3

     Arguments:
     destination_table: Destination table name.
     source: Name of local file to import, or a comma-separated list of
     URI paths to data to import.
     schema: Either a text schema or JSON file, as above.

     Flags for load:

/usr/local/bin/bq:
  --[no]allow_quoted_newlines: Whether to allow quoted newlines in CSV import data.
  -E,--encoding: <UTF-8|ISO-8859-1>: The character encoding used by the input file. Options include:
    ISO-8859-1 (also known as Latin-1)
    UTF-8
  -F,--field_delimiter: The character that indicates the boundary between columns in the input file. "\t" and "tab" are accepted names for tab.
  --max_bad_records: Maximum number of bad records allowed before the entire job fails.
    (default: '0')
    (an integer)
  --[no]replace: If true erase existing contents before loading new data.
    (default: 'false')
  --schema: Either a filename or a comma-separated list of fields in the form name[:type].
  --skip_leading_rows: The number of rows at the beginning of the source file to skip.
    (an integer)

gflags:
  --flagfile: Insert flag definitions from the given file into the command line.
    (default: '')
  --undefok: comma-separated list of flag names that it is okay to specify on the command line even if the program does not define a flag with that name.
    IMPORTANT: flags in this list that have arguments MUST use the --flag=value format.
    (default: '') 
```

# c# - 使用 Trello.NET 更新 Trello 看板标签文本

> ID：12622984
> 
> 赞同：1
> 
> 时间：2012-09-27T13:50:52.870
> 
> 标签：c#, api, trello, trello.net

与 Trello.NET 一起使用`board.LabelNames = labels`，不会更新板上的标签文本。

即使跟着打电话

```
trello.Boards.Update(board); 
```

还有其他方法可以做到这一点吗？或者这是 Trello.NET 中缺少的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:41:31.990

它没有实施。~~我也无法在 Trello API 文档 ( [https://trello.com/docs/](https://trello.com/docs/) ) 中找到它。~~

**编辑：**它现在在 Trello API 中可用，但未在 Trello.NET 中实现。[关注这里](https://github.com/dillenmeister/Trello.NET/issues/23)的进展。

关于不更新:`Boards.Update`的所有属性，不将 a作为参数，而是将. 只会更新该接口的属性。这适用于 Trello.NET 中的所有更新方法。`Board``Boards.Update``Board``IUpdatableBoard`

# c# - C#中的二进制到十进制转换

> ID：12622985
> 
> 赞同：0
> 
> 时间：2012-09-27T13:51:00.190
> 
> 标签：c#, .net

十进制转二进制的方法如下：

```
int dec = 42;
string bin = Convert.ToString(dec, 2); 
```

如果我有，如何将二进制转换为十进制

```
string bin = "0100101"
int dec = ??? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T13:52:03.143

只需寻找反向调用 - `Convert.ToInt32(value, fromBase)`：

```
int dec = Convert.ToInt32(bin, 2); 
```

# jquery - Jquery 滑动表单移动设备配置

> ID：12622986
> 
> 赞同：0
> 
> 时间：2012-09-27T13:51:01.350
> 
> 标签：jquery, forms, jquery-mobile, responsive-design

我基于此 (http://tympanus.net/Tutorials/FancySlidingForm/) 为我的网站构建了一个表单。它在我的电脑上运行良好，并在 responsinator.com 等网站上进行了必要的调整，使其能够响应平板电脑、智能手机等。然而，主要是在 ipad 和智能手机的水平部分，第二个、第三个和第三个的标签和输入下一个选项卡是完全靠边的，而不是居中且不在屏幕上。

我在这里读到了一些关于 Jquery Mobile 的内容。我没有使用任何一个，只是这个：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

我是不是该？甚至 jquery mobile 也无法解决我的问题？

谢谢！

执行滑动部分的 Jquery 函数：

```
$(function() {
/*
number of fieldsets
*/
var fieldsetCount = $('#formElem').children().length;

/*
current position of fieldset / navigation link
*/
var current     = 1;

/*
sum and save the widths of each one of the fieldsets
set the final sum as the total width of the steps element
*/
var stepsWidth  = 0;
var widths      = new Array();
$('#steps .step').each(function(i){
    var $step       = $(this);
    widths[i]       = stepsWidth;
    stepsWidth      += $step.width();
});
$('#steps').width(stepsWidth);

/*
to avoid problems in IE, focus the first input of the form
*/
$('#formElem').children(':first').find(':input:first').focus(); 

/*
show the navigation bar
*/
$('#navigation_form').show();

/*
when clicking on a navigation link 
the form slides to the corresponding fieldset
*/
$('#navigation_form a').bind('click',function(e){
    var $this   = $(this);
    var prev    = current;
    $this.closest('ul').find('li').removeClass('selected');
    $this.parent().addClass('selected');
    /*
    we store the position of the link
    in the current variable 
    */
    current = $this.parent().index() + 1;
    /*
    animate / slide to the next or to the corresponding
    fieldset. The order of the links in the navigation
    is the order of the fieldsets.
    Also, after sliding, we trigger the focus on the first 
    input element of the new fieldset
    If we clicked on the last link (confirmation), then we validate
    all the fieldsets, otherwise we validate the previous one
    before the form slided
    */
    $('#steps').stop().animate({
        marginLeft: '-' + widths[current-1] + 'px'
    },500,function(){
        if(current == fieldsetCount)
            validateSteps();
        else
            validateStep(prev);
        $('#formElem').children(':nth-child('+ parseInt(current) +')').find(':input:first').focus();    
    });
    e.preventDefault();
});

/*
clicking on the tab (on the last input of each fieldset), makes the form
slide to the next step
*/

$('#formElem > fieldset').each(function(){
    var $fieldset = $(this);
    $fieldset.children(':last').find(':input').keydown(function(e){
        if (e.which == 9){
            $('#navigation_form li:nth-child(' + (parseInt(current)+1) + ') a').click();
            /* force the blur for validation */
            $(this).blur();
            e.preventDefault();
        }
    });
});

/*
validates errors on all the fieldsets
records if the Form has errors in $('#formElem').data()
*/
function validateSteps(){
    var FormErrors = false;
    for(var i = 1; i < fieldsetCount; ++i){
        var error = validateStep(i);
        if(error == -1)
            FormErrors = true;
    }
    $('#formElem').data('errors',FormErrors);   
}

/*
validates one fieldset
and returns -1 if errors found, or 1 if not
*/
function validateStep(step){
    if(step == fieldsetCount) return;

    var error = 1;
    var hasError = false;
    $('#formElem').children(':nth-child('+ parseInt(step) +')').find(':input:not(button)').each(function(){
        var $this       = $(this);
        var valueLength = jQuery.trim($this.val()).length;

    if(($this.attr('id')!='info_adicional') && ($this.attr('id')!='curriculum_vitae')) {
        if(valueLength == ''){
            hasError = true;
            //$this.css('background-color','#FFEDEF');
        }
    }
        //else
            //$this.css('background-color','#A8FC9C');  /* Campo preenchido */
    });
    var $link = $('#navigation_form li:nth-child(' + parseInt(step) + ') a');
    $link.parent().find('.error,.checked').remove();

    var valclass = 'checked';
    if(hasError){
        error = -1;
        valclass = 'error';
    }
    $('<span class="'+valclass+'"></span>').insertAfter($link);

    return error;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:57:18.483

如果唯一的问题是您的标签位置错位，您可能需要使用[CSS 媒体查询](http://www.w3.org/TR/css3-mediaqueries/)来调整每个设备的 CSS。

有相当多的艺术可以让 CSS 在桌面和移动浏览器上看起来都很好:)

您可能还想检查这些链接：

1.  [http://developer.android.com/guide/webapps/targeting.html](http://developer.android.com/guide/webapps/targeting.html)
2.  [http://www.metaltoad.com/sites/default/files/Responsive-Widths_0.png](http://www.metaltoad.com/sites/default/files/Responsive-Widths_0.png)
3.  [http://coding.smashingmagazine.com/2011/06/30/designing-for-android/](http://coding.smashingmagazine.com/2011/06/30/designing-for-android/)

PS：jQuery Mobile 使用自己的（并且相当复杂的）CSS 和为移动使用量身定制的 JavaScript……它不是您自定义 CSS 的直接替代品

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:56:24.873

我认为您应该将 js 用于移动设备

[http://jquerymobile.com/download/](http://jquerymobile.com/download/)

# .net - 在 .NET Remoting 中，如何判断一个对象是否用作远程对象？

> ID：12622988
> 
> 赞同：1
> 
> 时间：2012-09-27T13:51:00.980
> 
> 标签：.net, visual-studio, reflection, remoting

我知道 .NET Remoting 已被 WCF 取代，但这更像是一个学术问题。

假设您有一个定义如下的远程类：

```
public class MyObject : MarshalByRefObject
{
} 
```

并假设您有实例化 MyObject 类型的远程对象但不将其用作远程对象的客户端代码：

```
public static void Main(String[] args)
{
   MyObject mo = new MyObject();
} 
```

现在，假设我想以编程方式告诉 mo 的类型。据我所知，有两种方法可以做到：

```
Console.WriteLine(mo.GetType().ToString());//MyObject 
```

或者

```
Console.WriteLine(GetType(mo).ToString()); //MyObject 
```

其中 GetType() 定义如下：

```
static Type GetType<T>(T t)
{
   return typeof(T);
} 
```

在任何一种情况下，mo 的编译时类型和运行时类型都是 MyObject。

但现在假设我有一个实际使用 MyObject 实例作为远程对象的客户端代码：

```
public static void Main(String[] args)
{
   System.Runtime.Remoting.RemotingConfiguration.Configure("Client.exe.config");
   MyObject mo = new MyObject();
} 
```

如果我想知道 mo 的类型，我可以使用上面使用的两种方法中的任何一种，并获得相同的结果。但是，当我放置断点并按 F5 时，Visual Studio 告诉我 mo 的类型实际上是 MyObject {System.Runtime.Remoting.Proxies.__TransparentProxy}

我想知道的是如何以编程方式告诉 mo 的底层类型是 __TransparentProxy。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:55:59.317

```
bool isProxy = System.Runtime.Remoting.RemotingServices.IsTransparentProxy(obj); 
```

# android - 将经纬度保存到字符串 - 将字符串解析到 Google 地图

> ID：12622989
> 
> 赞同：0
> 
> 时间：2012-09-27T13:51:02.780
> 
> 标签：android, string, url, gps, location

我正在尝试执行以下操作。

- 获取存储为字符串的经度和纬度，我可以

- 插入打开 Google 地图的可点击 URL（即[http://maps.google.com/long=string1+lat=string2](http://maps.google.com/long=string1+lat=string2)） - 此 URL 包含在通过默认电子邮件应用程序发送的电子邮件中。

我试过查看 URI、Linkify、Reverse GeoCoding，但我似乎什么也得不到。我可以获得坐标并显示为 Toast 通知，但目前尝试将它们保存以在其他地方使用是有问题的。

我有字符串 String lat = Double.toString(location.getLatitude) 但没有从中得到任何东西，或者在执行代码时可能没有坐标，因为它可能没有 GPS 锁定，不太确定。请看下面的代码。

公共类 ConfirmScreen 扩展 Activity{

```
String mapCoord = "http://maps.google.com";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_confirm_screen);

    LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    LocationListener mLocListener = new MyLocationListener();
    mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0, mLocListener);

    sendEmail();
    playSound();
}

public void backHome(View view) 
{
    Intent intent = new Intent (this, MainScreen.class);
    startActivity(intent);
}

// Method to start playing and looping a sound.

public void playSound()
{
    MediaPlayer clickSound = MediaPlayer.create(this, R.raw.warning);
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
    Boolean soundCheck = sp.getBoolean("SOUND", false);
    if (soundCheck)
    {
        clickSound.start();
    }

}// method end

public void sendEmail()
{
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
    String nameValue = sp.getString("NAME", "failed to get name");
    String emailValue = sp.getString("EMAIL", "failed to get email");
    Intent i = new Intent(Intent.ACTION_SEND);
    i.setType("message/rfc822");
    i.putExtra(Intent.EXTRA_EMAIL, new String[]{emailValue});
    i.putExtra(Intent.EXTRA_SUBJECT, "Email sent from DON'T PANIC - A Chris O'Brien Project");
    i.putExtra(Intent.EXTRA_TEXT, "Hi there\n" + nameValue + " is in mortal danger. Please see the co-ords attached and run to their rescue!" +
            " If you don't see any co-ords, they didn't check the box and assume you know where they are.\nKind Regards\nDon't Panic! \n\n" +  mapCoord);

    try
    {   startActivity(Intent.createChooser(i, "Send mail...."));
    } 
    catch (android.content.ActivityNotFoundException ex){

        Toast.makeText(ConfirmScreen.this, "There are no email clients installed or set up", Toast.LENGTH_SHORT).show();
    }
}

//Location Listener
public class MyLocationListener implements LocationListener
{
    @Override
    public void onLocationChanged(Location location) {
        location.getLatitude();
        location.getLongitude();

        String text = "Current Location is \nLat: " + location.getLatitude() + " \nLng: " + location.getLongitude();
        //mapCoord =  Double.toString(location.getLatitude()) + " " + Double.toString(location.getLongitude());

        Toast.makeText(getApplicationContext(), text, Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onProviderDisabled(String provider) {
        Toast.makeText(getApplicationContext(), "GPS Disabled", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onProviderEnabled(String provider) {
        Toast.makeText(getApplicationContext(), "GPS Enabled", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_confirm_screen, menu);
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:55:48.867

在您的代码中，您将 mapCoord 设置为`"http://maps.google.com"`. 然后将其添加到您的电子邮件文本中。我还注意到您在以下代码中注释掉了这一行`onLocationChanged()`：

```
//mapCoord =  Double.toString(location.getLatitude()) + " " +
                  Double.toString(location.getLongitude()); 
```

您可以通过这种方式获取用户的坐标，但问题是位置更新回调是异步的。你打电话时

```
mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0, mLocListener); 
```

这只是注册您`MyLocationListener`接收回调。在用户的位置发生变化之前，它实际上不会生成回调。但你不要等待。您立即发送电子邮件。在大多数情况下，该位置将为空，因为您的回调尚未被回调。

您可以尝试使用`LocationManager.getLastKnownLocation()`（它会立即返回最后一个已知位置），但根据我的经验，它通常返回 null。

您还可以注册更新，打开一个进度对话框告诉用户“正在检测您的位置......”并等到`onLocationChanged()`被回调。

# jaxb - 从 XML 生成 JAXB 对象

> ID：12622990
> 
> 赞同：1
> 
> 时间：2012-09-27T13:51:09.067
> 
> 标签：jaxb, xsd

我有一个问题，我有一个 XSD 文件，我正在尝试使用 XML 进行验证：

XSD 开头为：

```
<xs:schema id="Notes"
targetNamespace="http://mynotes.com/Notes"
elementFormDefault="qualified"
xmlns="http://mynotes.com/Notes"
xmlns:mstns="http://mynotes.com/Notes"
xmlns:xs="http://www.w3.org/2001/XMLSchema"> 
```

然后我有以下 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<notes xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"    xsi:schemaLocation="noNamespaceSchemaLocation" xmlns="http://mynotes.com/Notes"> 
```

在这种情况下，我可以验证，但是当我使用 JAXB 创建对象时，对象不会被填充并且它们的所有成员都是空的。

但是，如果我将 XML 修改为以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<notes>... 
```

在这种情况下，JAXB 对象已成功创建，但验证失败...

我想我在命名空间声明中遗漏了一些东西，我们将非常感谢您的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:38:35.890

您可以使用包级别`@XmlSchema`注释来为您的 JAXB 模型指定默认名称空间限定。下面是一个示例，您需要将包调整为与您的域类相同。

**com/example/package-info.java**

```
@XmlSchema(
    namespace = "http://mynotes.com/Notes",
    elementFormDefault = XmlNsForm.QUALIFIED)
package com.example;

import javax.xml.bind.annotation.XmlNsForm;
import javax.xml.bind.annotation.XmlSchema; 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/08/jaxb-namespaces.html](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html)

# ruby - 从 JRuby 中的不同位置重新加载 rb 脚本

> ID：12622993
> 
> 赞同：1
> 
> 时间：2012-09-27T13:51:23.233
> 
> 标签：ruby, jruby

背景：

我在我的产品的 Eclipse 插件中使用 JRuby。我有一堆定义 DSL 并为我执行操作的脚本。我希望能够在需要时动态地重新加载这些脚本。脚本可以在文件系统上改变自己，而且脚本的位置也可以改变。我什至可以在稍微修改/更改的脚本的文件系统上有多个副本。每次我想要使用来自特定位置的脚本时。

到目前为止，据我所知，使用“load”而不是“require”应该可以完成这项工作。所以现在如果在调用任何 Ruby 方法/函数之前我使用“load 'XXX.rb'”，它将利用新的更改重新加载 XXX.rb。

问题：

在我的代码中，我使用 ScriptingContainer 运行脚本来访问 ruby​​ 函数。我在这个脚本容器上设置了加载路径，以指示应该从哪些位置加载脚本。然而，问题是在随后的调用中，甚至在使用不同的 ScriptingContainer 实例时，我注意到第一次加载的脚本每次都会被使用。“加载”会重新加载它们，但是在加载这些脚本一次之后，下一次我可能需要从不同的位置加载类似的脚本，但它没有发生。

我的假设是，使用不同的脚本容器实例应该已经完成​​了这项工作，但似乎加载路径是全局设置的，并且在新的 ScriptingContainer 实例上调用“setLoadPath”要么不会修改现有路径，要么只会追加。如果后一种情况为真，那么在搜索脚本时，它们可能总是在最旧的路径集上找到，而较新的加载路径会被忽略。

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:47:35.730

解决方案是在创建 ScriptingContainer 实例时为其指定范围。ScriptingContainer 构造函数之一接受 LocalContextScope 类型的参数，使用其中一个常量来定义范围。请参阅[LocalContextScope.java](https://github.com/jruby/jruby/blob/master/src/org/jruby/embed/LocalContextScope.java)

为了测试这个缺陷和解决方案，我编写了一个小片段。你可以试试看：

```
public class LoadPathProblem {

  public static void main(String[] args) {
    // Create the first container
    ScriptingContainer c1 = new ScriptingContainer();
    // FIX ScriptingContainer c1 = new ScriptingContainer(LocalContextScope.SINGLETHREAD);

    // Setting a load path for scripts
    String path1[] = new String[] { ".\\scripts\\one" };
    c1.getProvider().setLoadPaths(Arrays.asList(path1));

    // Run a script that requires loading scripts in the load path above
    EvalUnit unit1 = c1.parse("load 'test.rb'\n" + "testCall");
    IRubyObject ret1 = unit1.run();
    System.out.println(JavaEmbedUtils.rubyToJava(ret1));

    // Create the second container, completely independent of the first one
    ScriptingContainer c2 = new ScriptingContainer();
    // FIX ScriptingContainer c2 = new ScriptingContainer(LocalContextScope.SINGLETHREAD);

    // Setting a different load path for this container as compared to the first container
    String path2[] = new String[] { ".\\Scripts\\two" };
    c2.getProvider().setLoadPaths(Arrays.asList(path2));

    // Run a script that requires loading scripts in the different path
    EvalUnit unit2 = c2.parse("load 'test.rb'\n" + "testCall");
    IRubyObject ret2 = unit2.run();

    /*
     * PROBLEM: Expected here that the function testCall will be called from
     * the .\scripts\two\test.rb, but as you can see the output says that
     * the function was still called from .\scripts\one\test.rb.
     */
    System.out.println(JavaEmbedUtils.rubyToJava(ret2));
  }
} 
```

用于测试上述代码的测试脚本可以位于不同的文件夹中，但文件名相同（上例中的“test.rb”：

./scripts/one/test.rb

```
def testCall
  "Called one"
end 
```

./scripts/two/test.rb

```
def testCall
  "Called two"
end 
```

# jquery - jQuery $(window).resize 复制到 $(document).ready 以调整元素的大小和重新定位

> ID：12622998
> 
> 赞同：0
> 
> 时间：2012-09-27T13:51:44.750
> 
> 标签：jquery, resize, window-resize

我有这个 jQuery 来设置滑块功能。这个滑块是整个屏幕的宽度和高度，所以当我调整窗口大小时，我需要它来重新计算这些大小。我试图在两个触发器上复制相同的代码，但它没有改变任何东西。请问各位能帮忙吗？

$(document).ready 上的代码如下：

```
qtPhotos = $('#slider ul li').length;
windowWidth = $(window).width();
windowHeight = $(window).height();

$('#slider').width(windowWidth).height(alturaJanela);
$('#slider > ul').width(windowWidth * qtPhotos);
$('#slider > ul > li').width(windowWidth).height(windowHeight);

$('#slider > ul > li:first').before($('#slider > ul > li:last'));
$('#slider > ul').css('marginLeft', '-'+windowWidth+'px');

$('#seta-next').click(function(){
    $('#slider > ul').stop(true, true).animate({'left': "-="+windowWidth+"px"}, 500, 'easeInQuad', function(){
        $('#slider > ul > li:last').after($('#slider > ul > li:first'));
        $('#slider > ul').css("left", "+="+windowWidth+"px");
    });
}); 

$('#seta-prev').click(function(){
    $('#slider > ul').stop(true, true).animate({'left': "+="+windowWidth+"px"}, 500, 'easeInQuad', function(){
        $('#slider > ul > li:first').before($('#slider > ul > li:last'));
        $('#slider > ul').css("left", "-="+windowWidth+"px");
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:21:01.500

整个代码块需要包装在 $(window).resize() 中。你已经这样了吗？

所以 -

```
$(window).resize(function() {

// all your code here 

}).trigger("resize"); 
```