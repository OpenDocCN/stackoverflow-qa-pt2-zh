# StackOverflow 问答 13742000-13742999

# android - Android 是否支持 .dat 扩展文件？

> ID：13742001
> 
> 赞同：1
> 
> 时间：2012-12-06T10:50:17.443
> 
> 标签：android

其实我只是想知道Android手机是否支持“.dat”文件扩展名。我想以“.dat”扩展格式保存动态图。

请通过以下视频链接

[http://www.youtube.com/watch?v=td75nzaCrX8](http://www.youtube.com/watch?v=td75nzaCrX8)

在此链接中，有人将图表保存在“.dat”扩展名中。

请帮帮我。提前致以最良好的祝愿和感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:27:16.753

> 其实我只是想知道Android手机是否支持“.dat”文件扩展名。

只有当用户安装了一个知道什么是`.dat`文件并且知道什么是“动态图”的应用程序时。在当今使用的数以亿计的 Android 设备中，大约 0% 将安装这样的应用程序。*您的*应用程序应该处理，或者`.dat`您需要向您的用户推荐他们可以安装来处理的其他应用程序`.dat`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-23T15:12:22.580

这很简单，请按照以下步骤操作：

1.  安装mx播放器
2.  将扩展名重命名为 .flv
3.  在 mx 播放器中将设置更改为 s/w 解码器。
4.  刷新 mx 播放器中的视频列表。
5.  欣赏您的视频。

（我已经在我的 arm v 7 设备上进行了测试）

# php - 在 localhost 中安装 magento 时连接被重置错误

> ID：13742009
> 
> 赞同：0
> 
> 时间：2012-12-06T10:50:50.450
> 
> 标签：php, magento-1.7, magento

最后，经过大量研究，当我什么都得不到时，我在这里发帖。我正在尝试在 wamp 服务器版本 2.2d 上安装 magento。我将 Magento CE 1.7.0 解压缩到 c:\wamp\www 中的“magento”文件夹。我检查了依赖项，它们都符合要求。当我尝试通过 localhost/magento/ 访问 magento 时，url 发生了变化，并且出现了 Connection was reset 错误。

如何解决这个错误。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:07:42.740

有时我们从服务器配置中得到错误。所以请切换到 xmapp 服务器并启用 url 重写。并且请不要在安装 magento“基本 url 验证”时选中复选框。我也是 magento 的新手。我也在使用magento 1.7

# function - Imwrite 命令没有在 Matlab 中创建具有真实值的图像

> ID：13742013
> 
> 赞同：0
> 
> 时间：2012-12-06T10:51:07.233
> 
> 标签：function, matlab

我正在尝试编写 .tif 图像。我在命令窗口或 Matlab 的函数文件中编写了以下命令，以编写名称为“A_exam”的 tif 图像。

输出图像（A_exam.tif）的所有值都是 255，没有图像显示，只是白屏。从以下代码中提取矩阵。当我计算这段代码时，A 矩阵的值是正确的。问题只是来自编写图像文件。

```
[~,Ind_max] = max(vgt,[],3);
A= arrayfun(@(y) ...
arrayfun(@(x) emp(x,y, Ind_max(x,y)), 1:size(vgt,1)), ... 
1:size(vgt,2), 'UniformOutput',false);
A = reshape([A{:}], size(Ind_max))
imwrite(A,'A_exam.tif','tif') 
```

谢谢

```
whos A
  Name        Size            Bytes  Class     Attributes

  A         41x41             6724  single 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:27:44.400

调用 imwrite 之前的重塑看起来有问题。我会改变

```
imwrite(A,'A_exam.tif','tif') 
```

添加对[mat2gray的调用](http://www.mathworks.com/help/images/ref/mat2gray.html)

```
imwrite(mat2gray(A),'A_exam.tif'); 
```

以确保您没有混合矩阵和图像。

# google-calendar-api - 如何使用谷歌 API 在谷歌日历上创建活动？

> ID：13742014
> 
> 赞同：0
> 
> 时间：2012-12-06T10:51:08.143
> 
> 标签：google-calendar-api

有人知道如何使用日历 API 在 Google 日历上创建和活动吗？

我的用户使用 Google 连接到我的网站，我获得了他们的许可，可以在他们的日历中写入内容，然后当用户在我的网站上参加活动时，我需要在他/她的 gmail 日历上创建一个活动吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:56:58.500

查看完整的谷歌日历 API

[https://developers.google.com/google-apps/calendar/v1/developers_guide_javascript](https://developers.google.com/google-apps/calendar/v1/developers_guide_javascript)

# c# - 带有特殊字符的 C# 字符串到 MySQL varchar 列

> ID：13742017
> 
> 赞同：1
> 
> 时间：2012-12-06T10:51:15.250
> 
> 标签：c#, mysql, database, special-characters

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T10:57:27.563

I believe you can also specify the charset in the connection string - check if your connection string explicitly specifies `"charset=utf8"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:05:20.793

The problem must be in the charset of your development environment, the default file encoding of Visual Studio depends on the Windows setting. Following is the location That You can change it.

Control Panel | Regional and Language Options | Advanced | Inglês to change the language from the drop down list.

# java - 如何使用 jquery 获取带有换行符的 XML？

> ID：13742022
> 
> 赞同：3
> 
> 时间：2012-12-06T10:51:28.390
> 
> 标签：java, jquery, xml, linefeed

我有一个简单的脚本，它用从服务器收到的值填充 html 表单

```
$.ajax({
    url: getUrl(),
    dataType: "xml"
}).done(function(xml) {
    //get values from xml file and fill in html form
}); 
```

和服务器端的简单代码，生成 xml

```
public void writeXmlValues() throws Exception {
    final HttpServletResponse response = context.getHttpResponse();
    response.setContentType("application/xml; charset=UTF-8");
    PrintWriter out = response.getWriter();
    try
    {
        writeXmlValues(out, values);
    }
    finally
    {
        try
        {
            out.close();
        }
        catch (Throwable ignored){}
    }
} 
```

在表单中添加 textarea 字段时，我遇到了问题。该字段可以包含带行分隔符的文本，我可以在 xml 中放置多行文本。结果如下：

```
<?xml version='1.0' encoding='UTF-8'?>
<parameter name="Conclusion">eshgseht
awegewhw
agwhg</parameter> 
```

但是 js 回调中的文本看起来几乎没有什么不同（这里是原样的代码）：

```
<?xml version='1.0' encoding='UTF-8'?><parameter name="Conclusion">eshgseht awegewhw agwhg</parameter> 
```

没有换行了！这不是 jquery 的错误（据我在 Firebug 中看到的，响应已经是一行文本），这不是 StAX 的错误（它会生成正确的 xml）。我不知道是怎么回事。我可以使用 XML 格式获取换行符吗？或者我应该使用 json 或其他东西（这不是首选方式）？

**更新：** 最后我找到了这种行为的原因。即使使用 setContentType("application/xml")，响应也被解释为 text/html。非常感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:56:11.603

您是否考虑使用 CDATA 写入值？有关CDATA 和[示例实现的](http://www.kodejava.org/examples/492.html)[更多信息](http://www.w3schools.com/xml/xml_cdata.asp)

# asp.net - 会话状态服务器说扩展类不可序列化

> ID：13742024
> 
> 赞同：0
> 
> 时间：2012-12-06T10:51:33.930
> 
> 标签：asp.net, serialization, session-state

我在会话状态中存储一个对象（使用本地会话状态服务器），类 def 是：

```
 [Serializable]
 public class ExtendedOAuth2Parameters : OAuth2Parameters 
```

但该服务仍在报告：

```
Unable to serialize the session state. In 'StateServer' and 'SQLServer' mode, ASP.NET will serialize the session state objects, and as a result non-serializable objects or MarshalByRef objects are not permitted.

[SerializationException: Type 'Google.GData.Client.OAuth2Parameters' in Assembly 'Google.GData.Client, Version=2.1.0.0, Culture=neutral, PublicKeyToken=04a59ca9b0273830' is not marked as serializable.] 
```

如何绕过它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:02:10.290

根据错误消息，看起来基类 ( `Google.GData.Client.OAuth2Parameters`) 是不可序列化的，因此即使您使用`Serializable`属性标记了类，但完整的类层次结构不是。

您要么需要使用本身可序列化的低音类，要么如果您有权访问代码（可能没有？），请使`Google.GData.Client.OAuth2Parameters`类可序列化。

请记住，“可序列化”取决于任何给定类的完整类型树——即所有基类和成员类也需要可序列化，以使封闭类真正可序列化。

# android - 在 Android 中覆盖 SSL 信任管理器

> ID：13742028
> 
> 赞同：6
> 
> 时间：2012-12-06T10:51:44.070
> 
> 标签：android, ssl

我正在尝试覆盖 Android 中的信任管理器。我想让底层信任管理器检查证书，但我需要确定证书是否过期。如果证书过期，我需要忽略它并接受证书。如果取出电池，某些移动设备会将日期重置为旧日期，从而导致证书看起来好像过期了。即使发生这种情况，我的应用程序也必须继续运行。

我遇到的问题是这行代码抛出了 NullPointerException：

```
origTrustmanager.checkServerTrusted(certs, authType); 
```

根据文档，checkServerTrusted 永远不应该抛出 NullPointerExeption。certs 里面有两个项目。authType 设置为“RSA”。如果我不实现自定义信任管理器，则会引发异常，清楚地表明证书已过期，因此我知道底层信任管理器正在执行其工作。即使我将设备上的日期和时间设置在证书的有效期内，上面的 checkServerTrusted 行也会产生异常。为什么？显然我做错了什么。这是我的自定义信任管理器的代码以及我如何访问 URL：

```
class SSLTrustManager
{
  private X509TrustManager origTrustmanager;

  public SSLTrustManager()
  {
    try
    {
      TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
      tmf.init((KeyStore) null);
      TrustManager[] trustManagers = tmf.getTrustManagers();
      this.origTrustmanager = (X509TrustManager) trustManagers[0];
    }
    catch (Exception ex)
    {
    }
  }

  public javax.net.ssl.SSLSocketFactory GetSocketFactory()
  {
    try
    {
      TrustManager[] wrappedTrustManagers = new TrustManager[] {
          new X509TrustManager()
          {
            public java.security.cert.X509Certificate[] getAcceptedIssuers()
            {
              return origTrustmanager.getAcceptedIssuers();
            }

            public void checkClientTrusted(X509Certificate[] certs, String authType)
            {
              try
              {
                origTrustmanager.checkClientTrusted(certs, authType);
              }
              catch (CertificateException e)
              {
              }
            }

            public void checkServerTrusted(X509Certificate[] certs, String authType) throws CertificateException
            {
              try
              {
                origTrustmanager.checkServerTrusted(certs, authType);
              }
              catch(Exception ex)
              {
              }
            }
          }
       };

      SSLContext sslContext = SSLContext.getInstance("SSL");
      sslContext.init(null, wrappedTrustManagers, new java.security.SecureRandom());
      javax.net.ssl.SSLSocketFactory sslSocketFactory = sslContext.getSocketFactory();
      return sslSocketFactory;
    }
    catch (Exception ex)
    {
      return null;
    }
  }
} 
```

访问url的代码：

```
SSLTrustManager sslTrustManager = new SSLTrustManager();
HttpsURLConnection.setDefaultSSLSocketFactory(sslTrustManager.GetSocketFactory());

URL siteUrl = new URL(url);
HttpsURLConnection conn = (HttpsURLConnection) siteUrl.openConnection();
conn.setRequestMethod("POST");
conn.setDoOutput(true);
conn.setDoInput(true);

DataOutputStream out = new DataOutputStream(conn.getOutputStream()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T11:04:39.673

如果您从未初始化`origTrustmanager`实例变量，它将具有默认值`null`，这确实会在您尝试使用它时导致 NPE。

我刚刚对此进行了编辑，以显示 TrustManager 初始化[的](https://stackoverflow.com/a/8694377/372643)示例。（我没有在 Android 上尝试过，但它在纯 Java 中运行良好。）

小心不要抓太多。在这里，您正在捕获`CertificateException`并`Exception`在您的信任管理器中：这与什么都没有一样好，因为这些方法旨在抛出这些异常。`CertificateExpiredException`确保仅在您想忽略到期日期时才捕获。

请注意，这只是一个依赖于这样一个事实的技巧，即在实践中，证书验证是*在一般信任验证之后*完成的（至少在 OpenJDK 实现中）。据我所知，规范中没有任何内容说证书过期是*在*. 它是在对信任元素进行其他验证之前完成的，并且您忽略了该异常，您可以让更多的证书通过而不是您想要的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-08T14:10:04.043

使用此代码这对我有用

```
TrustManager tm = new X509TrustManager() {
    public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {}
    public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {}
    public X509Certificate[] getAcceptedIssuers() {
        return null;
    }
};

// Create a trust manager that does not validate certificate chains
TrustManager[] trustAllCerts = new TrustManager[] {
    new X509TrustManager() {
        public java.security.cert.X509Certificate[] getAcceptedIssuers() {
            return null;
        }
        public void checkClientTrusted(java.security.cert.X509Certificate[] certs, String authType) {}
        public void checkServerTrusted(java.security.cert.X509Certificate[] certs, String authType) {}
    }
};
SSLContext sslContext = null;

try {
    sslContext = SSLContext.getInstance("TLS");
    sslContext.init(null, new TrustManager[] { tm }, null);
} catch (Exception e1) {
    e1.printStackTrace();
    return;
}

AsyncSSLSocketMiddleware sslMiddleWare = Ion.getDefault(context).getHttpClient().getSSLSocketMiddleware();
sslMiddleWare.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);
sslMiddleWare.setSSLContext(sslContext);

Ion.getDefault(context).getHttpClient().getSSLSocketMiddleware().setTrustManagers(trustAllCerts);
Ion.getDefault(context).getHttpClient().getSSLSocketMiddleware().setSSLContext(sslContext);

Ion.with(context).load("POST", serverUrl)
    .setHeader("Content-Type", "application/json")
    .setHeader("Accept", "application/json")
    .setLogging("ION_LOGGING", Log.VERBOSE).setJsonObjectBody(json) 
```

# facebook - 如何以编程方式从 Facebook 应用程序中删除 canvas_url

> ID：13742033
> 
> 赞同：0
> 
> 时间：2012-12-06T10:52:02.717
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我正在尝试通过这样做来删除我的应用程序中的“Facebook 上的应用程序”块。

```
$fb = new Facebook(array(
    'appId' => <APPID>,
    'secret' => <APPSECRET>,
    'cookie' => true
));

$fbValues = array();
$fbValues['namespace'] = '';
$fbValues['canvas_url'] = '';
$fbValues['secure_canvas_url'] = '';
$facebookReturn = $fb->api('/151456581658184', 'post', $fbValues); 
```

facebook 返回正常，但值没有改变。

如何以其他方式取消设置此值？

# ios - MonoTouch，在 UIImageView 上绘制裁剪区域层

> ID：13742037
> 
> 赞同：1
> 
> 时间：2012-12-06T10:52:18.660
> 
> 标签：ios, image, xamarin.ios, core-graphics, crop

在我们的应用程序中，我们希望能够裁剪、缩放和平移图像，但我似乎无法弄清楚应该如何在 UIImageView 上绘制裁剪区域。

我试着弄乱 coregraphics，我可以在我的图像上渲染一个带有黑色笔划的区域，但图像会翻转。不仅如此，因为我已经在图像上绘制了，我担心如果我用手势移动和缩放它，该区域也会受到影响！

朝着正确的方向推动将不胜感激！

这是我的代码并没有真正做我想要的，以展示一些研究工作。

```
 // Aspect ration - Currently 1:1
        const int arWidth = 1;
        const int arHeight = 1;

        UIGraphics.BeginImageContext(ImgToCrop.Frame.Size);

        var context = UIGraphics.GetCurrentContext();

        // Set the line width
        context.SetLineWidth(4);
        UIColor.Black.SetStroke();

        // Our starting points.
        float x = 0, y = 0;

        // The sizes
        float width = ImgToCrop.Frame.Width, height = ImgToCrop.Frame.Height;

        // Calculate the geometry
        if(arWidth == arHeight){
            // The aspect ration is 1:1
            width = ImgToCrop.Frame.Width;
            height = width;

            x = 0;
            y = ImgToCrop.Frame.GetMidY()-height/2;

        }

        // The rect
        var drawRect = new RectangleF(x,y,width,height);

        context.DrawImage(new RectangleF(
            ImgToCrop.Frame.X,
            ImgToCrop.Frame.Y,
            ImgToCrop.Frame.Width,
            ImgToCrop.Frame.Height),ImgToCrop.Image.CGImage);

        // Draw it
        context.StrokeRect(drawRect);
        ImgToCrop.Image = UIGraphics.GetImageFromCurrentImageContext(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T01:42:44.813

也许这会帮助你：

```
 public static UIImage ScaleToSize (UIImage image, int width, int height)
    {
        UIGraphics.BeginImageContext (new SizeF (width, height));
        CGContext ctx = UIGraphics.GetCurrentContext ();
        float ratio = (float) width / (float) height;

        ctx.AddRect (new RectangleF (0.0f, 0.0f, width, height));
        ctx.Clip ();

        var cg = image.CGImage;
        float h = cg.Height;
        float w = cg.Width;
        float ar = w / h;

        if (ar != ratio) {
            // Image's aspect ratio is wrong so we'll need to crop
            float scaleY = height / h;
            float scaleX = width / w;
            PointF offset;
            SizeF crop;
            float size;

            if (scaleX >= scaleY) {
                size = h * (w / width);
                offset = new PointF (0.0f, h / 2.0f - size / 2.0f);
                crop = new SizeF (w, size);
            } else {
                size = w * (h / height);
                offset = new PointF (w / 2.0f - size / 2.0f, 0.0f);
                crop = new SizeF (size, h);
            }

            // Crop the image and flip it to the correct orientation (otherwise it will be upside down)
            ctx.ScaleCTM (1.0f, -1.0f);
            using (var copy = cg.WithImageInRect (new RectangleF (offset, crop))) {
                ctx.DrawImage (new RectangleF (0.0f, 0.0f, width, -height), copy);
            }
        } else {
            image.Draw (new RectangleF (0.0f, 0.0f, width, height));
        }

        UIImage scaled = UIGraphics.GetImageFromCurrentImageContext ();
        UIGraphics.EndImageContext ();

        return scaled;
    } 
```

# php - 警告：session_start() [function.session-start]：无法发送会话 cookie - 标头已由

> ID：13742038
> 
> 赞同：4
> 
> 时间：2012-12-06T10:52:21.950
> 
> 标签：php, session

> **可能重复：**
> [PHP 中的“警告：标头已发送”](https://stackoverflow.com/questions/8028957/warning-headers-already-sent-in-php)

当我将其上传到服务器时，我的 PHP 登录表单上会显示一个错误。它在我的本地主机上运行良好，但是当我将它上传到服务器时，它给了我这个错误：

```
Warning: session_start() [function.session-start]: Cannot send session cookie - headers already sent by (output started at /home/shopping/public_html/biblioteka/index.php:10) in /home/shopping/public_html/biblioteka/index.php on line 45

Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent (output started at /home/shopping/public_html/biblioteka/index.php:10) in /home/shopping/public_html/biblioteka/index.php on line 45

Warning: Cannot modify header information - headers already sent by (output started at /home/shopping/public_html/biblioteka/index.php:10) in /home/shopping/public_html/biblioteka/index.php on line 49 
```

这是我的 PHP 代码：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="http://localhost/Shopping_biblioteka/css/style.css">
        <title>Title</title>
    </head>
    <body align="center">
        <div id="login">
        <?php

        if (isset($_POST['username']) && isset($_POST['password'])) {
            $username = $_POST['username'];
            $password = $_POST['password'];
            mysql_connect("localhost", "user", "pass") or die(mysql_error());
            mysql_select_db("db") or die(mysql_error());
        mysql_query("SET CHARACTER SET utf8");
        mysql_query("SET NAMES utf8");
            $result = mysql_query("SELECT password,id FROM x9qg6_users
            where username='" . $username . "'");
            if (!$result) {
                echo 'Could not run query: ' . mysql_error();
                exit;
            }
            $row = mysql_fetch_row($result);
            $test = explode(":", $row[0]);
            $user_id=$row[1];
            $userhash = md5($password . $test[1]);
            if ($test[0] === $userhash) {       
                session_start();
                $_SESSION['login_user'] = $user_id;
                $_SESSION['username'] = $username;
                $url = "biblioteka.php";
                header("Location: $url");
            }
        } else {
            echo 'Внесете ги вашите податоци во полињата!';
        }
        // Connects to your Database 
        ?> 
        <form action="" method="POST" accept-charset="UTF-8"> 
            Корисничко име:<br/>
            <input name="username" id="username" type="text"/><br/>
            Лозинка:<br/>
            <input type="password" id="password" name="password"/><br/>
            <input type="submit" value="Логирај се!"/>
        </form>

        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T11:03:29.437

只需在**session_start(** )之后添加**ob_start( )**

 **```
<?php
session_start();
ob_start();
?>
<!DOCTYPE html>
<html>
    <head>
       ...
       ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T11:11:26.867

是的，您的问题是您在发送一些输出后尝试发送标头（通过调用 *session_start*）。这可能是来自 HTML/whitespace/error-messages/etc.. 在您调用 *session_start* 之前发生的任何内容。

在 HTTP 协议中，这些标头必须位于请求/响应的正文之前，并且由于您无意中开始发送输出，因此您已经在正文中并且无法返回标头。

一种解决方案是始终确保在执行任何其他操作之前调用 *session_start*。另一种选择是使用像[ob_start()这样的](http://php.net/ob-start)**输出缓冲**函数来缓冲任何输出以防万一。

* * *

以防万一您想知道究竟是什么导致了这种情况，这里简要解释一下 session_start 通常会做什么...... PHP 会话的正常行为是在您调用函数[session_satrt()时做 3 件事](http://php.net/function.session-start)

1.  会话处理程序检查客户端是否提供了[会话 ID](http://php.net/session-id)（通常通过在 HTTP 请求标头中发送具有指定[session.name](http://php.net/function.session-name)的 cookie ）。如果找到一个，会话处理程序将打开该会话（*默认情况下这是一个文件——如果它不存在，则创建它*）。如果客户端没有提供**会话**ID，则会生成随机会话 ID 并打开该会话文件。
2.  然后，会话处理程序将在会话文件中找到的任何数据填充到[$_SESSION](http://php.net/%24_SESSION)超级全局变量中（即*会话被反序列化*）。
3.  如果在步骤 1 中没有提供会话 ID（会话 cookie），则会话处理程序设置一个**Set-Cookie**标头以与 HTTP 响应一起发送。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T10:53:20.883

在发送标头之前，您不得向页面输出任何内容

或使用输出缓冲

```
ob_start(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T10:55:09.683

确保在or调用之前不发送**任何内容**（甚至不发送空格） ：`session_start()``header()`

```
<?php
     ...
     session_start();
     ...
     header();
     ...

?>
<!-- HTML code --> 
```

更多信息可以在[`session_start`](http://php.net/manual/en/function.session-start.php)文档页面上找到。

`session_start`将在 HTTP 标头中发送信息（在发送任何实际内容之前发送到浏览器的一条信息）。如果您已经向浏览器发送了内容，例如在您的情况下有相当多的 HTML 代码，则服务器无法在标题中发送该信息：它们已经消失了。阅读更多关于[HTTP 协议](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)的内容，以更好地理解整个事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T10:56:42.180

移动`session_start();`到文件顶部。

```
<?php
session_start();
?>
<!DOCTYPE html>
<html>
    <head>
       ...
       ... 
```**

# c# - 用户定义的公式、评估和速度

> ID：13742045
> 
> 赞同：0
> 
> 时间：2012-12-06T10:52:43.017
> 
> 标签：c#

假设我们有一个包含一百万个元素的数组，并且我们希望接受用户输入关于将哪种数学应用于每个元素的输入。

程序是否需要为每个元素评估用户公式（字符串）一百万次。或者公式本身可以以某种方式保存和解释一次吗？然后循环应用到百万个元素？

我只是想大致了解这是如何工作的。因为现在看起来 excel 类型的程序总是被解释，这对我的数据研究来说太慢了。所以基本上我正在做的是每次我改变它时重新编译我的用户定义的数学。而且似乎没有办法编译一个程序，并在它本身运行时重新编译它。这样它就可以接受用户输入，编译并运行它，而无需退出。也许使用 DLL 和单独的应用程序域，但是所有数据都必须进行编组。

当一切都对你不利时，我只是不明白如何获得最高速度的数据研究。包括愚蠢的操作系统，出于安全考虑，不允许卸载、加载 DLL。或者其他的东西。然而，也许我只是在胡说八道，因为我几个月前才开始编程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:56:31.823

如果您希望用户输入针对动态编译的数据集和表达式，请查看合适的[C# REPL](http://rickardnilsson.net/post/2012/01/01/csharp-repl-and-interactive-interpreter.aspx)。

您应该能够简单地输入您的转换等，并让 REPL 编译并应用它们。这是一种有用的工具/技术，用于在将解决方案正确编码到类/组件中之前尝试解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:11:57.333

如果您有兴趣或更喜欢自己实现解决方案，您可以将公式解析为（二叉）树，其中每个节点代表一个运算符（+、-、*、..）或函数（cos() , max(),..) 并且每个叶子代表一个常数或公式的变量之一。

这可以以一种非常有效的方式完成，然后通过递归计算根的值同时在叶子处填充正确的变量来应用于整个数据集。

为了弄清楚如何最好地做到这一点，这个问题可能会提供一些指示（尽管我相当确定答案只有几种方法之一）： [Create Binary Tree from Mathematical Expression](https://stackoverflow.com/questions/12381210/create-binary-tree-from-mathematical-expression)

希望这会有所帮助，或者至少对其他读者有一些兴趣！

# c# - 连接到由第三方应用程序创建的 Oracle 安装

> ID：13742046
> 
> 赞同：0
> 
> 时间：2012-12-06T10:52:44.493
> 
> 标签：c#, .net, oracle

所以我正在开发一个应用程序，它被设计为第三方应用程序的“帮助”应用程序。此第三方应用程序安装 32 位 Oracle 客户端。

我需要我的应用程序连接到这个 Oracle 客户端。我正在用 C# 编写它；第三方应用程序在 Delphi 中。

到目前为止，我已经设法通过在我的应用程序的同一目录中包含 Oracle DLL 文件来使其工作 - 但是当我然后去运行第三方应用程序（我的应用程序的功能之一）时，这似乎会导致问题.

找到并连接到我没有创建的现有 Oracle 安装的最佳方法是什么？

谢谢。

# javascript - 在 Google 地图绘图库中禁用“使用严格”（为了与 asp.net __doPostBack 兼容）

> ID：13742051
> 
> 赞同：0
> 
> 时间：2012-12-06T10:52:57.713
> 
> 标签：javascript, asp.net, google-maps-api-3

是否可以在 Google 地图绘图库中关闭“使用严格”（通过[http://maps.google.com/maps/api/js?libraries=drawing&sensor=false](http://maps.google.com/maps/api/js?libraries=drawing&sensor=false)访问）。

这对我来说从来都不是问题，但我相信你们中的一些人都知道，JavaScript 的严格模式与 asp.net 的 __doPostBack 方法不兼容，并在 Firefox 和 Chrome 中引发错误（非法访问严格模式调用函数，或在 ff 中审查）。

唉，绘图库和 __doPostBack 的能力对于我正在处理的应用程序来说都是必不可少的，所以我不能简单地删除其中一个。

据我所知，不可能简单地独立于完整的地图 api 下载库并注释掉有问题的行。如果我错了，我会非常高兴。

我不确定是否将其标记为 JavaScript，所以如果我错了，我深表歉意。

非常感谢任何帮助。

克里斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:55:12.260

只需下载[库](http://maps.google.com/maps/api/js?libraries=drawing&sensor=false)，将其另存为`.js`，然后注释掉（或删除）该`"use strict"`行。

# xcode - iOS：制作一个构建和归档命令行工具

> ID：13742057
> 
> 赞同：2
> 
> 时间：2012-12-06T10:53:32.493
> 
> 标签：xcode, command-line, build, archive, xcodebuild

我知道这个主题在 SO 上被多次辩论，但我没有找到所有信息。

我正在制作一个外部脚本来构建和存档我的项目。[我在这里](http://nachbaur.com/blog/building-ios-apps-for-over-the-air-adhoc-distribution)和[这里](http://blog.octo.com/en/automating-over-the-air-deployment-for-iphone/)
找到了一些很好的文档，但我不知道如何获取 xcode 变量，如,等。`${PROJECT_NAME}``${TARGET_SDK}`

我还看到了这条线，这对于采购这些变量可能很有趣：

```
."$WORKSPACE/autobuild/build.config" 
```

但我在我的 Mac 上找不到任何“autobuild”文件夹或“build.config”文件。

我感觉我错过了一些直截了当的东西，但我不知道是什么......

任何的想法 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T11:05:41.543

确保您已安装 XCode 命令行工具（通过 XCode 首选项）。

然后，我使用的是一个简单的 shell 脚本：

```
#!/bin/sh
source "build.cfg"

xcodebuild -target "${XCODE_BUILD_TARGET}" -sdk "${XCODE_BUILD_SDK}" -configuration Release CODE_SIGN_IDENTITY="${XCODE_BUILD_CODE_SIGN_AUTHORITY}"
EXIT_CODE=$?
if [ ! $EXIT_CODE -eq 0 ];then
  exit $EXIT_CODE
fi

xcrun -sdk "${XCODE_BUILD_SDK}" PackageApplication -v "${XCODE_ABS_BUILD_APP_PATH}" -o "${XCODE_ARCHIVE_OUTPUT_PATH}" --sign "${XCODE_BUILD_CODE_SIGN_AUTHORITY}" --embed "${XCODE_ABS_PROVISIONING_CERTIFICATE_PATH}"
EXIT_CODE=$?
if [ ! $EXIT_CODE -eq 0 ];then
  exit $EXIT_CODE
fi 
```

我还有很多其他的，但这是关键部分。然后 build.cfg 只包含上面的变量：

```
#!/bin/sh
export XCODE_PROJECT_DIR="Builds/iOS"
export XCODE_BUILD_TARGET="Demo-iPhone"
export XCODE_BUILD_SDK="iphoneos"
export XCODE_BUILD_PLIST="Info.plist"
export XCODE_BUILD_APP_NAME="demo.app"
export XCODE_BUILD_APP_DIR="build"
export XCODE_BUILD_CODE_SIGN_AUTHORITY="iPhone Distribution: ABC"
export XCODE_ARCHIVE_OUTPUT_IPA_FILENAME="demo.ipa"
export XCODE_ARCHIVE_OUTPUT_IPA_DIR="build/release"
export XCODE_ARCHIVE_PROVISIONING_CERTIFICATE="demo_adhoc.mobileprovision"
... 
```

# android - 多个 MapFragment 的性能（Android Map API v2）

> ID：13742061
> 
> 赞同：6
> 
> 时间：2012-12-06T10:53:42.433
> 
> 标签：android, google-maps, mapfragment

我搜索了新的[Google Android Map API v2](https://developers.google.com/maps/documentation/android/)的文档，但没有找到任何相关信息。在 v2 之前，我们（官方）不能正确地为每个应用程序（进程）显示一个以上的地图。我认为随着`MapFragment`实施它不再是一个问题。我也知道，`Fragments`从 API 17 开始，它可以是独立的。而且，最后但并非最不重要的是，有兼容性包，它可以将它全部移植回至少 API 8（在 API 7 中，没有 OpenGL 2.0 所以地图不起作用afaik）。

Sa 我拥有将我的应用程序移植到 Maps API v2 并实现以下场景的所有要素：`ViewPager`包含`Fragments`并且每个都包含一个`MapFragment`.

但我应该这样做吗？我的意思是，如果我在 a中包含例如 20 ，**我会面临性能问题**吗？`Fragments``MapFragments``ViewPager`

如果您在文档或其他地方发现任何可以解决我问题的内容，请告诉我。

* * *

**编辑：示例用法**：让我们想象一个包含有关某些特定项目（地点、事件、文章）的信息的屏幕。还让我们想象一下，除其他信息外，它必须包含一个地图才能完全发挥作用。但我希望用户能够根据需要滑动到另一个项目。每个项目都有自己的地图。

旁注：我知道我可以在外部实现一张地图，`ViewPager`然后根据当前显示的项目对其进行更新，但这不是我想要的——它不是以用户为中心的设计。

* * *

**可能的解决方案**（但尚未检查）。`ViewPager`只在它的缓存中保留一些（默认 - 3）片段，并在它们即将出现时重新创建它们，因此不会有太多的内存开销，因为只需要几个`MapFragments`。我相信，性能问题可能`MapFragment`是相当严重的通货膨胀——但这可以通过回收`MapFragments`.

* * *

那么，如果我相信它会很好用，我为什么不实施它呢？`MapFragments`还有一个问题，如果应用程序看起来像是坏了，就无法移动。[看到这个](https://stackoverflow.com/questions/14419521/moving-mapfragment-surfaceview-causes-black-background-flickering)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T09:48:30.030

是的，您肯定会遇到性能问题，因为`ViewPager`默认情况下不使用视图回收；你甚至可以用`ImageView`s 让它膨胀，更不用说 MapFragments 了。

至于缓存和重新创建片段`ViewPager`- 有一个[Horizo](http://www.dev-smart.com/archives/34) ​​ntalListView 库可能会为您节省精力，因为它支持视图回收。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T08:31:56.750

您可以轻松地对其进行测试，但我的猜测是它在很大程度上取决于手机，因为地图运行起来仍然相当繁重。

也就是说，我永远不会推荐这种用户导航。地图已经可以滑动了，为什么还要添加 ViewPager 滑动呢？这会使用户体验非常混乱。如果你想在不同的视图/兴趣点之间切换，你应该添加按钮（在导航应用程序中首选溢出菜单按钮）或类似的东西来帮助用户导航。

# c# - C# 和 Excel 最佳实践

> ID：13742062
> 
> 赞同：5
> 
> 时间：2012-12-06T10:53:54.563
> 
> 标签：c#, excel, office-interop

我正在使用 Microsoft.Office.Interop.Excel 做很多 MS Excel interop i C# (Visual Studio 2012)。它需要大量繁琐的手动代码来包含 Excel 公式、对文本和数字进行格式化以及制作图表。

如果你们中的任何人对我如何更好地完成任务有一些意见，我非常希望。我一直在看 Visual Studio Tools for Office，但我不确定它的功能。我知道制作 Excel 插件是必需的，但它对 Excel 自动化有帮助吗？

我一直在拼命地尝试查找有关使用 C# 在 Visual Studio 2012 中使用 Excel 的信息。我确实找到了一些不错但简短的教程。但是，我真的很想要一本书，该主题可以更深入地了解该领域的功能和最佳实践。用我有限的知识搜索亚马逊只会给我使用旧版本的 Visual Studio 的 VSTO 书籍。

我不想使用 VBA。我的应用程序主要使用 Excel 来可视化从不同来源编译的内容。我也处理不需要 Excel 的数据。此外，我可以编写 C# 但不会编写 VB。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T10:57:53.480

我以前用过这个，发现它非常好，很容易阅读和编写 Excel 表格。不确定更高级的东西（它在那里，我只是从未尝试过）但看看它。适用于 OOXML 格式 (.xlsx)，没有 COM 互操作或 VBA 或任何东西，纯 .Net

[http://epplus.codeplex.com/](http://epplus.codeplex.com/)

制作饼图的示例代码：

```
//ExcelPackage is a class within the EPPlus DLL
var p = new ExcelPackage();
p.Workbook.Worksheets.Add("sheetName")
var ws = p.Workbook.Worksheets.First();

//Add the piechart
var pieChart = ws.Drawings.AddChart("crtExtensionsSize", eChartType.PieExploded3D) as ExcelPieChart;

//Set top left corner to row 1 column 2
pieChart.SetPosition(1, 0, 2, 0);
pieChart.SetSize(400, 400);
pieChart.Series.Add(ExcelRange.GetAddress(4, 2, row-1, 2), ExcelRange.GetAddress(4, 1, row-1, 1));    
pieChart.Title.Text = "Extension Size";

//Set datalabels and remove the legend
pieChart.DataLabel.ShowCategory = true;
pieChart.DataLabel.ShowPercent = true;
pieChart.DataLabel.ShowLeaderLines = true;
pieChart.Legend.Remove(); 
```

只需填写行、列和格式就比上面的要简单:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T12:30:30.457

请参阅[http://exceldna.codeplex.com/](http://exceldna.codeplex.com/)，广泛用于此特定目的，拥有庞大的用户群并正在维护和增强。

还有一些tips：

*   创建帮助器以根据注入条件格式化特定范围
*   使用 R1C1 引用来偏移，否则你的代码会变得一团糟
*   尝试尽可能频繁地使用命名范围，因为这样可以更轻松地创建帖子格式
*   将您的代码抽象到样式类中，并且不要将其添加到与您的逻辑“一致”

# .htaccess - 如何在没有 www url 的情况下强制 htaccess

> ID：13742064
> 
> 赞同：0
> 
> 时间：2012-12-06T10:53:57.653
> 
> 标签：.htaccess, url

我现在的htaccess：

```
# Use PHP 5.3
AddType application/x-httpd-php53 .php

RewriteEngine On
RewriteBase /

#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.

RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]

# If we don't have mod_rewrite installed, all 404's
# can be sent to index.php, and everything works as normal.
# Submitted by: ElliotHaughin

ErrorDocument 404 /index.php 
```

我需要做一个规则，如果有人输入`http://www.mypage.com/blog/blablatitle`

它将他重定向到`http://mypage.com/blog/blablatitle`

头版和所有页面都一样。

我正在使用 CodeIgniter，但我认为这在处理 htaccess 时并不那么重要。

这个建议的解决方案在 CodeIgniter 中效果不佳：

```
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L] 
```

因为它在地址中添加了 index.php，例如：当我输入：

```
http://www.mypage.com/blog/blablatitle 
```

它把我重定向到：

```
http://mypage.com/index.php?/blog/blablatitle 
```

我需要：

```
http://mypage.com/blog/blablatitle 
```

没有这个规则是可以的（没有索引，php）例如：`http://mypage.com/blog/blablatitle`

那么，如何改进此重定向规则 som index.php 的任何建议都不会出现在重定向链接中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:15:55.090

解决了！;) 你需要把它放在后面

```
RewriteBase / 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:17:21.207

请试试这个：

`RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]`

`RewriteRule ^index.php(.*)$ http://%1/$1 [R=301,L]`

# c# - WCF 服务在 2 个不同的服务合同上公开 2 个端点

> ID：13742065
> 
> 赞同：8
> 
> 时间：2012-12-06T10:53:58.737
> 
> 标签：c#, wcf, web-services, endpoint, servicecontract

我有一个 WCF 服务，我正在尝试对其进行配置，以便它公开 2 个端点，在不同的 URL 下引用不同的功能。

我想要的是**Service1**，公开方法 A、B、C 和**Service2**，公开方法 D、E。我希望能够同时浏览**localhost/WebServiceName/Service1/Service.svc**和**localhost/WebServiceName/Service2/Service .svc**。

引用**localhost/WebServiceName/Service1/Service.svc**的其他应用程序应该只看到包含方法 A、B 和 C 的接口。它们不应该看到有关**Service2**接口的任何内容。对于**Service2**也是如此。

到目前为止，我已经在我的 WCF 服务中定义了两个接口**I_Service1**和**I_Service2**。

我在 web.config 中添加了两个端点，如下所示：

```
<endpoint address="http://localhost/WebServiceName/Service1/" binding="wsHttpBinding" contract="WebServiceName.I_Service1" bindingConfiguration="Binding1" />
<endpoint address="http://localhost/WebServiceName/Service2/" binding="wsHttpBinding" contract="WebServiceName.I_Service2" bindingConfiguration="Binding2" /> 
```

在 enpoint 中使用完整地址的建议来自这里：[IIS 下的多个端点](https://stackoverflow.com/questions/1182725/multiple-endpoints-under-iis?rq=1)

但是，我仍然无法浏览**localhost/WebServiceName/Service1/Service.svc**。我收到：

```
Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly. 
```

我可以成功浏览*localhost/WebServiceName/Service.svc*并且 wsdl 包括方法 A、B、C、D、E。但这在我想要的行为中应该是错误的。

有什么我错过的吗？

更新：在这篇文章[http://allen-conway-dotnet.blogspot.ro/2011/09/exposing-multiple-binding-types-for.html](http://allen-conway-dotnet.blogspot.ro/2011/09/exposing-multiple-binding-types-for.html)之后，我为这些端点创建了两个不同的合同服务。但目前我在浏览它时只看到**Service1 。****Service2**显然不存在（出现与 HTTP 404 错误相关的问题）。

配置如下：

```
<services>
   <service behaviorConfiguration="WebServiceName.ServiceBehavior1" name="WebServiceName.Service1">
    <endpoint address="" binding="wsHttpBinding" bindingConfiguration="Binding1"
     contract="WebServiceName.I_Service1" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
     <host>
       <baseAddresses>
         <add baseAddress="http://localhost/WebServiceName/Service1/Service.svc" />
       </baseAddresses>
     </host>
   </service>
   <service behaviorConfiguration="WebServiceName.ServiceBehavior2" name="WebServiceName.Service2">
    <endpoint address="" binding="wsHttpBinding" bindingConfiguration="Binding1"
     contract="WebServiceName.I_Service2" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
     <host>
       <baseAddresses>
         <add baseAddress="http://localhost/WebServiceName/Service2/Service.svc" />
       </baseAddresses>
     </host>
   </service>
  </services> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:42:59.587

我一直这样做的方式如下：为服务设置一个“基地址”，并将端点地址指定为不同的文本以附加到该基地址...

```
 <service name="MyNamespace.MyService">
    <endpoint address="FirstEndpointAddress" binding="netTcpBinding"
      name="FirstEndpointName"
      contract="MyNamespace.FirstEndpointContract" />
    <endpoint address="SecondEndpointAddress" binding="netTcpBinding"
      name="SecondEndpointName"
      contract="MyNamespace.SecondEndpointContract" />
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://localhost:8733/MyBaseAddress" />
      </baseAddresses>
    </host>
  </service> 
```

因此，在您的情况下，基地址可能是`localhost/WebServiceName`，端点 1 的端点地址可能是`Service1/Service.svc`. 同样对于端点 2，它可能是`Service2/Service.svc`. 我可以看到您已按照建议将完整地址放入端点地址，但我只能说我已经成功地这样做了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T14:22:00.483

目前我对这个问题的解决方案是在我的 web 服务中合并两个 .svc 文件来分隔两个接口。这样，我有**localhost/WebServiceName/Service1.svc**和**localhost/WebServiceName/Service2.svc**。

使用端点配置

```
<services>
   <service behaviorConfiguration="WebServiceName.ServiceBehavior1" name="WebServiceName.Service1">
    <endpoint address="" binding="wsHttpBinding" bindingConfiguration="Binding1"
     contract="WebServiceName.I_Service1" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
     <host>
       <baseAddresses>
         <add baseAddress="http://localhost/WebServiceName/Service1.svc" />
       </baseAddresses>
     </host>
   </service>
   <service behaviorConfiguration="WebServiceName.ServiceBehavior2" name="WebServiceName.Service2">
    <endpoint address="" binding="wsHttpBinding" bindingConfiguration="Binding2"
     contract="WebServiceName.I_Service2" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
     <host>
       <baseAddresses>
         <add baseAddress="http://localhost/WebServiceName/Service1.svc" />
       </baseAddresses>
     </host>
   </service>
  </services> 
```

这个解决方案不一定是最好的（如果客户真的想要，它可以发现这个服务公开了 2 个不同的接口，但我可以用不同的凭据/令牌保护它们）。但目前我会接受它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T11:17:24.247

我试着做你描述的东西。这一切都成功了。如果某些步骤对您来说很明显，请不要生气。所以：

1.  创建 WCF 服务应用程序项目。
2.  添加两个 WCF 服务项（默认为创建接口和 svc 文件）。
3.  创建 Web 应用程序项目。
4.  使用“发现”按钮添加两个服务引用（右键单击 Web App Project ==> 添加服务引用）（应该可以看到两个 Web 服务）。
5.  就这样。

默认情况下，我在 Web 应用程序项目中得到以下 Web.config：

```
 <system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_IService1" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
    <binding name="BasicHttpBinding_IService2" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="http://localhost:3597/Service1.svc" binding="basicHttpBinding"
    bindingConfiguration="BasicHttpBinding_IService1" contract="ServiceReference1.IService1"
    name="BasicHttpBinding_IService1" />
  <endpoint address="http://localhost:3597/Service2.svc" binding="basicHttpBinding"
    bindingConfiguration="BasicHttpBinding_IService2" contract="ServiceReference2.IService2"
    name="BasicHttpBinding_IService2" />
</client> 
```

您可以尝试重建 WCF 项目并更新 WebReferences。

# android - 尝试在 android 应用程序中包含 Twilio API 时出现“java.lang.NoSuchMethodError”

> ID：13742069
> 
> 赞同：1
> 
> 时间：2012-12-06T10:54:08.937
> 
> 标签：android, twilio

我正在尝试在我的 android 应用程序中包含 Twilio API，但是当我尝试从中发送短信时，我收到了 java.lang.NoSuchMethodError。我试图通过添加 httpclient-4.2.2.jar 文件来解决它，但没有成功。

**以下是我的错误日志：**

```
12-06 10:32:26.497: E/AndroidRuntime(12901): FATAL EXCEPTION: main
12-06 10:32:26.497: E/AndroidRuntime(12901): java.lang.NoSuchMethodError: org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager.<init>
12-06 10:32:26.497: E/AndroidRuntime(12901):    at com.twilio.sdk.TwilioRestClient.<init>(TwilioRestClient.java:137)
12-06 10:32:26.497: E/AndroidRuntime(12901):    at com.example.twiliodemo.TwilioDemo.sendMessageByTwilio(TwilioDemo.java:40)
12-06 10:32:26.497: E/AndroidRuntime(12901):    at com.example.twiliodemo.TwilioDemo.onCreate(TwilioDemo.java:23)
12-06 10:32:26.497: E/AndroidRuntime(12901):    at android.app.Activity.performCreate(Activity.java:5008)
12-06 10:32:26.497: E/AndroidRuntime(12901):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-06 10:32:26.497: E/AndroidRuntime(12901):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
12-06 10:32:26.497: E/AndroidRuntime(12901):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-06 10:32:26.497: E/AndroidRuntime(12901):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-06 10:32:26.497: E/AndroidRuntime(12901):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-06 10:32:26.497: E/AndroidRuntime(12901):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-06 10:32:26.497: E/AndroidRuntime(12901):    at android.os.Looper.loop(Looper.java:137)
12-06 10:32:26.497: E/AndroidRuntime(12901):    at android.app.ActivityThread.main(ActivityThread.java:4745)
12-06 10:32:26.497: E/AndroidRuntime(12901):    at java.lang.reflect.Method.invokeNative(Native Method)
12-06 10:32:26.497: E/AndroidRuntime(12901):    at java.lang.reflect.Method.invoke(Method.java:511)
12-06 10:32:26.497: E/AndroidRuntime(12901):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-06 10:32:26.497: E/AndroidRuntime(12901):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-06 10:32:26.497: E/AndroidRuntime(12901):    at dalvik.system.NativeStart.main(Native Method) 
```

**这是我的活动。**

```
package com.example.twiliodemo;

import java.util.HashMap;
import java.util.Map;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;

import com.twilio.sdk.TwilioRestClient;
import com.twilio.sdk.resource.factory.SmsFactory;
import com.twilio.sdk.resource.instance.Account;
import com.twilio.sdk.resource.instance.Sms;

public class TwilioDemo extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        sendMessageByTwilio();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void sendMessageByTwilio(){
         /* Find your sid and token at twilio.com/user/account */
        try {
            String ACCOUNT_SID = "AC15b63878d56d436af26cfd6f0e94c706";
            String AUTH_TOKEN = "2c870b5aa3c5f4d1bcacbe747d6808f6";
            String TWILIO_URL="http://api.twilio.com"; 

            TwilioRestClient clientTwilio=new TwilioRestClient(ACCOUNT_SID, AUTH_TOKEN,TWILIO_URL);
                Account account = clientTwilio.getAccount();

                SmsFactory smsFactory = account.getSmsFactory();
                Map<String, String> smsParams = new HashMap<String, String>();
                smsParams.put("To", "+919423872793"); 
                smsParams.put("From", "+12403486854"); // Replace with a valid phone
                // number in your account
                smsParams.put("Body", "Hi..");

                Sms sms = smsFactory.create(smsParams);
                Log.d("SMS -", ""+sms);

        } catch (Exception e) {
            Log.e("**************", String.valueOf(e));
        }
    }

} 
```

我还在 libs 文件夹中添加了“twilio-java-sdk-3.3.10.jar”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:24:06.483

尝试清理您的项目，如果您有一个单独的项目，请确保您已将其设置为库项目！

# android - 多个异步任务未在 android 4.1 中运行

> ID：13742074
> 
> 赞同：1
> 
> 时间：2012-12-06T10:54:23.557
> 
> 标签：android, android-asynctask

在我的 android 应用程序中，我使用了 3 个不同的异步任务。2 个任务正在 Activity A 中运行，第 3 个任务在 Activity B 中。当我在 OS 版本 2.3 的模拟器中运行应用程序时，应用程序运行正常。但是，当我在 Android 4.0 或更高版本中尝试时，只有第一个 Asynctask 正在运行。

有没有办法在 4.0 及更高版本中运行所有 3 个异步任务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T03:10:58.810

您可以执行以下操作：

YourAsyncTaskClassObjectName.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);

而不是正常执行：

YourAsyncTaskClassObjectName.execute()

这实际上适用于我的简单非商业应用程序。现在，我有两个 asynctasks 的 doInBackground 方法永远运行（我在每个里面都有 while(true) ）。

警告：我并不是说这是最好的设计，但这确实有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T11:32:36.453

在 Android 4.0 中，AsyncTask 只被授予一个后台执行线程，即一次只能运行一个。这与 FroYo 中的行为相同，但在 Gingerbread 中被取消了。因此，您可以运行多个 AsyncTask。所以最好的方法是序列化你的 AsyncTasks。并行化将导致不可预测的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T11:10:14.313

嗨，您必须编写自己的执行者。请关注帖子

[在android4.0中按顺序执行异步任务](https://stackoverflow.com/questions/12105730/execute-the-async-task-in-serial-order-in-android4-0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T11:16:50.750

这是正确的行为。AsyncTask 自 Android 4.0 以来，一直执行。

# asp.net-mvc - 使用 TraceSource 进行一瞥和跟踪

> ID：13742076
> 
> 赞同：2
> 
> 时间：2012-12-06T10:54:28.220
> 
> 标签：asp.net-mvc, trace, glimpse

我正在尝试让我的跟踪输出出现在“跟踪”选项卡中以供 Glimpse 使用；我正在使用 TraceSource 将我的跟踪当前输出到具有以下代码的文件：

```
 public static void TraceEvent(TraceEventType type, string area, string message)
    {
        TraceSource ts = new TraceSource(TraceSourceName);

        if (Trace.CorrelationManager.ActivityId == Guid.Empty)
        {
            if (type != TraceEventType.Verbose)
            {
                Trace.CorrelationManager.ActivityId = Guid.NewGuid();
            }
        }

        ts.TraceEvent(type, 0, string.Format("{0}: {1}", area, message));
    } 
```

这似乎确实出现在选项卡中，但是如果我将 ts.TraceEvent 行换成 Trace.Information 。

是否有我应该使用的自定义侦听器，还是仅适用于 Trace 命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:01:23.900

Glimpse 支持`TraceSource`通过`Glimpse.Core.TraceListener`，必须在`web.config`.

[Glimpse 网站上的](http://getglimpse.com/)[Trace Tab 帮助页面](http://getglimpse.com/Help/Trace-Tab)上提供了完整的说明和示例。

# javascript - Javascript for loop with variable

> ID：13742080
> 
> 赞同：0
> 
> 时间：2012-12-06T10:54:43.597
> 
> 标签：javascript

I'm doing some simple javascript learning at the moment and I'm stuck on how to solve this problem. (the basic form comes from [Code Academy](http://www.codecademy.com/courses/spencer-sandbox/3#!/exercises/5)). The task is to create 3 rabbit objects, each with a different adjective as an attribute. Then, print `describeMyself()` for each rabbit.

Instead of repeating myself 3 times, I'd like to find a way to solve the problem with a for loop to make it more streamlined/challenging for myself. Here's what I tried:

```
function Rabbit(adjective) {
    this.adjective = adjective;
    this.describeMyself = function() {
        console.log("I am a " + this.adjective + " rabbit");
    };
}

var rabbit1 = new Rabbit(fluffy);
var rabbit2 = new Rabbit(happy);
var rabbit3 = new Rabbit(sleepy);

for (i=1; i<=3; i++){
    ("rabbit"+i).describeMyself();
} 
```

Obviously, the `("rabbit"+i).describeMyself()` is wrong. I want the loop to create "rabbit1", "rabbit2" and "rabbit3". What's the proper syntax here?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:58:34.300

First of all, the parameters you are passing will result in undefined. If you want to pass strings, then use quotes to mark them as such. Second of all, creating new instances in a for loop means you will have to store them somewhere else, like in an array for instance.

```
var rabbits = [];
var descriptions = ['fluffy', 'happy', 'white', 'sleepy', 'dreamy'];
for (var i = 0; i < 5; i++) {
    rabbits.push(new Rabbit(descriptions[i]));
}

//Now you have 5 rabbits stored in the rabbits array. Now here's how to make them //egocentric.
for (var i = 0, ii = rabbits.length; i < ii; i++) {
    rabbits[i].describeMyself();
}

var rabbit1 = new Rabbit(fluffy);
var rabbit2 = new Rabbit(happy);
var rabbit3 = new Rabbit(sleepy); 
```

For future reference, don't forget to mark strings with single quotes or double quotes for HTML strings. The above should be:

```
var rabbit1 = new Rabbit('fluffy');
var rabbit2 = new Rabbit('happy');
var rabbit3 = new Rabbit('sleepy'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:00:37.877

Since the rabbits global variables, they are properties of the `window` object, so you *could* use:

```
for (i=1; i<=3; i++){
    window["rabbit"+i].describeMyself();
} 
```

**However,**

I'd recommend using the array examples that have been suggested, though, since this is kindof a bad practice. (But nice to know)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T11:01:43.850

Consider this a hackish answer, but provided you're would do this in global context, you could avoid ussing array and refer to your variables on window obejct like this:

```
var rabbit1 = new Rabbit('fluffy');
var rabbit2 = new Rabbit('happy');
var rabbit3 = new Rabbit('sleepy');

for (i=1; i<=3; i++){
    window["rabbit"+i].describeMyself();
} 
```

Not to mention even more **hackish and evil** approach with eval (just putting it out there for reference):

```
for (i=1; i<=3; i++){
    eval("rabbit"+i+".describeMyself()");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T11:01:46.583

consider using an array of variables then use the index to access them like this

```
function Rabbit(adjective) {
    this.adjective = adjective;
    this.describeMyself = function() {
        console.log("I am a " + this.adjective + " rabbit");
    };
}

  var rabbit=[];

  rabbit[0]= new Rabbit("fluffy");
  rabbit[1]= new Rabbit("happy");
  rabbit[2]= new Rabbit("sleepy");

for (i=0; i<3; i++){

    rabbit[i].describeMyself();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T10:57:51.633

You can't refer to the variables directly, but you can put them in an array/object:

```
var rabbits = [];

rabbits[1] = new Rabbit('fluffy');
rabbits[2] = new Rabbit('happy');
rabbits[3] = new Rabbit('sleepy');

for (var i= 0; i < 3; i++){
    rabbits[i + 1].describeMyself();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T11:06:34.680

Sometimes it's useful to get the object to add itself to an array automatically.

```
​var rabbits = [];
function Rabbit(adjective) {
    this.adjective = adjective;
    this.describeMyself = function() {
        console.log("I am a " + this.adjective + " rabbit");
    };
    rabbits.push(this); // all new Rabbits get added to the array rabbits
}
new Rabbit('happy');
new Rabbit('sleepy');
new Rabbit('fluffy');

for (var i = 0; i < rabbits.length; i++) {
    rabbits[i].describeMyself();
} 
```

​</p>

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-06T11:16:52.530

You were close, try this:

```
var attributes = ["fluffy","happy", "sleepy"];

for (i=1; i<=3; i++){
    window["rabbit"+i] = new Rabbit(attributes[i]);
}

for (i=1; i<=3; i++){
    eval(("rabbit"+i)).describeMyself();
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-08-24T06:45:31.067

try out this as it works completely fine in order to bring out the perfect result & here is the code:

```
function Rabbit(adjective)  {     
    this.adjective=adjective;     
    this.describeMyself = function() {         
         console.log("I am a " + this.adjective + " rabbit");
    }; 
}  

var rabbit1 = new Rabbit( "fluffy");
var rabbit2 = new Rabbit("happy"); 
var rabbit3 = new Rabbit("sleepy"); 

rabbit1.describeMyself(); 
rabbit2.describeMyself(); 
rabbit3.describeMyself(); 
```

The problem is every one stucks & forgets to type `"this.adjective=adjective;"` i.e the 3rd line of the code due to which u will c an error as some undefined objects...Try out the above code to get the perfect output...its correct.

# jquery - jquery表单插件json不能正常工作

> ID：13742081
> 
> 赞同：1
> 
> 时间：2012-12-06T10:54:44.457
> 
> 标签：jquery, jquery-forms-plugin, jqueryform

我正在使用 jquery 表单插件上传图片，一切顺利。我遇到的问题是关于 php 脚本从服务器发送的 json 响应。

```
//This is the way i output and encode the jason in my php script
$errors['success'] = false;
$errors['.imgContainer'] = 'Image exceeds maximum size.';
echo json_encode($errors);

//Json response copied from console in FireFox 14.0.1
{"success":false,".imgContainer":"Image exceeds maximum size."}

//Console response for:
console.log(xhr.responseText["success"]);
Undefined
//This should have been true right? 
```

我正在使用 jquery 1.8.0

```
//My Jquery
$('.imageForm').live('click', function(e) {
        if (!isValid) {
            e.preventDefault();
        }
        else {
            var bar = $('.bar');
            var percent = $('.percent');
            var response = $('.imgHolder');
            var status = $('#status');

            $('form').ajaxForm({
                contentType : "application/json; charset = utf-8",
                dataType: "json",
                type    : "POST",
                url     : "imgHandle.php",
                cache : false,

                //target: "#status",

                beforeSend: function() {
                    status.empty();
                    var percentVal = '0%';
                    bar.width(percentVal)
                    percent.html(percentVal);
                    $(".imgContainer :input").attr("disabled", true);
                },
                uploadProgress: function(event, position, total, percentComplete) {
                    var percentVal = percentComplete + '%';
                    bar.width(percentVal)
                    percent.html(percentVal);
                },
                complete: function(xhr) {

                    console.log(xhr.responseText["success"]);

                }
            });
        }

    }); 
```

为什么我在尝试访问 (xhr.responseText["success"]) 时会出现未定义？我希望得到真或假以及 .imgContainer 的值

也许它没有将其解释为 json。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:00:57.063

您将不得不使用`success`而不是`complete`. `complete`您只能访问原始 JSON 字符串，并且必须先对其进行解析，然后才能将其作为对象访问。

在`success`参数中将包含 JSON 对象（不是字符串），因此您可以直接访问它。

```
success: function(data) {
   console.log(data.success);
} 
```

# android - 如何将结果返回到 tabhost 活动？

> ID：13742085
> 
> 赞同：1
> 
> 时间：2012-12-06T10:54:57.330
> 
> 标签：android, android-layout, android-tabhost

我使用 2 项活动 A 和 B，其中 A 是选项卡主机中的一项活动。

我从 A 调用活动 B

用于调用活动的代码

```
 mybund.putString("event", obj_rowitem.getevent());
Intent schedule = new Intent(getApplicationContext(), Schedule.class);
schedule.putExtras(mybund);
startActivityForResult(schedule, req_code); 
```

活动 B 向活动 A 返回一些数据

B中的代码

```
Bundle mybund = new Bundle();
mybund.putString("date",date);
Intent data = new Intent();
data.putExtras(mybund);
setResult(RESULT_OK, data);
Log.e("going",date);
finish(); 
```

我在 A 上使用 OnActivity 结果。

但是写在 onactivityresult 块上的代码不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:34:44.467

如果您的活动 A 在选项卡主机中，那么您必须将 startActivityForResult 与选项卡主机的上下文一起使用。以下是相同的示例

```
((YourTabGroup) className.this.getParent()).startActivityForResult(intent, code); 
```

# batch-file - 批处理：从 txt 的路径中获取最后一个文件夹名称

> ID：13742086
> 
> 赞同：3
> 
> 时间：2012-12-06T10:54:59.463
> 
> 标签：batch-file

我需要从 txt 获取路径并获取最后一个文件夹名称，然后使用它。

```
setlocal EnableDelayedExpansion

set InputFile=somar.txt
for /f "tokens=* delims=" %%x in ('Type "%InputFile%"') do (
set path=%%x
:shift
for /f "tokens=1* delims=\/" %%i in ( "!path!" ) do (
    set folder=%%i
    set path=%%j
    )
if not [!path!] == [] goto :shift

echo folder: !folder!
)
endlocal 
```

问题是它仅适用于 txt 中的第一行。问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:56:21.563

你有很多问题：

1) 你的 FOR 循环在你发出 GOTO 的那一刻就被打破了。在 GOTO 之后，您将不再获得 FOR 循环迭代。您可以通过将 GOTO 循环移动到子程序中来解决此问题，然后从 DO 循环中调用子程序。

2) PATH 环境变量对 Windows 具有保留的含义。您永远不应将该变量名用于您自己的目的，即使它已本地化。不值得试探命运。只需使用不同的变量名。

3) 您的数据可能不是问题，但`!`它是文件或文件夹名称的有效字符。`!`如果启用了延迟扩展，您对 FOR 变量的扩展将损坏包含的名称。这可以通过根据需要打开和关闭延迟扩展来解决。

你也有一个小的低效率 - 没有必要在你的 FOR 循环中使用 TYPE。您可以简单地让 FOR 直接读取文件。（除非文件是 unicode）

您可以接受上述所有建议，但有一个*更*简单的解决方案 :-)

*编辑 - 为处理以结尾的路径所做的更改`\`*

```
@echo off
set "InputFile=somar.txt"
for /f "usebackq eol=: delims=" %%A in ("%inputFile%") do (
  for %%F in ("%%A\.") do echo folder: %%~nxF
) 
```

FOR 变量修饰符直接为您提供路径末尾的`~nx`名称和扩展名。`HELP FOR`从命令行键入以阅读有关 FOR 变量可用的所有修饰符的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:29:55.327

> 对于变量文件名：

```
@Echo OFF

:: By Elektro H@cker

set "File=File.ext"
Call :Get_paths "%InputFile%"

Pause&exit

:Get_paths
Set "AbsolutePath=%~dp1"
set "AbsolutePath=%AbsolutePath:\= %"
FOR %%# in (%AbsolutePath%) do (
    Set "LastFolder=%%#"
    Echo Folder: %%#
)
Echo Last Folder: %LastFolder%
GOTO:EOF 
```

**输出**：

```
Folder: C:
Folder: Users
Folder: Administrador
Folder: Desktop

Last Folder: Desktop 
```

> 对于文件：

```
@Echo OFF

:: By Elektro H@cker

set "File=test.txt"

For /F "Tokens=* usebackq" %%# in ("%FILE%") DO (   
    Set "AbsolutePath=%%~dp#"
    Call set "AbsolutePath=%%AbsolutePath:\= %%"
    CMD /Q /C "@FOR %%@ in (%%AbsolutePath%%) do (Echo Folder: %%@)"
)

Pause&Exit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-12T07:24:48.663

InputFile 内容必须包含文件名或文件夹。
前任）

```
D:\Test1  <= folder
D:\Test2\file.txt  <= file

D:\Test3\01\. folder <= folder but recognize file. that contain extension. 
```

我的代码是：

```
SETLOCAL EnableDelayedExpansion

设置最后一个文件夹=
SET InputFile=somar.txt

FOR /F %%F IN (%InputFile%) DO (
    CALL :__GetFolderName "%%F"
    @ECHO lastFolder：！lastFolder！
)

转到：EOF

:: ******************** 内批
:__GetFolderName
IF "%~x1"=="" SET lastFolder=%~n1 & GOTO :EOF

SET dp=%~dp1

CALL :__GetFolderName "%dp:~0,-1%"

转到：EOF
:: ********************

本地化

```

结果是：

```
最后一个文件夹：Test1
最后一个文件夹：Test2
最后一个文件夹：Test3

```

# java - 如何在（页面加载和条件满足）时向下滑动 div

> ID：13742088
> 
> 赞同：0
> 
> 时间：2012-12-06T10:55:04.347
> 
> 标签：java, jquery, jsp, servlets

下面是我的示例代码。我想加载loading.jsp。div 默认是不向下滑动的。

当`<%=msg%>`不为空时。然后 div 将向下滑动。

流动：`loading.jsp -> servlet (detect error) -> loading.jsp (div slide down)`

```
$("#errorLoading").load(function() {
        if(<%=msg%> != ""){
                $('#errorLoading').slideDown('slow');
        }
});
<div class="alert alert-error" id="errorLoading" name="errorLoading">
<%=msg%>
</div> 
```

任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:08:19.863

您可以使用[它来向下/向上滑动 div 标签](http://www.mkyong.com/jquery/jquery-slideup-slidedown-and-slidetoggle-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:09:56.903

请参阅`you have to use $.trim function of jquery`以检查`if div is filled with the message`您是否正在打印。然后检查一个条件，然后滑动你想要的 div。

***注意：必须先隐藏 div。***

小提琴你可以找到：

> **[http://jsfiddle.net/wZ6Br/](http://jsfiddle.net/wZ6Br/)**

```
you can check with putting some dummy text there.

 var divErr = $.trim($('.alert-error').text());

 if (divErr) {
     $('#errorLoading').slideDown('slow');
 } 
```

# php - 使用循环比较 PHP 数组

> ID：13742090
> 
> 赞同：2
> 
> 时间：2012-12-06T10:55:10.747
> 
> 标签：php

我正在使用这段代码来比较两个 php 数组，我正确地得到了所有匹配的项目，但不幸的是我没有成功获得不匹配的项目。这是我的代码。

```
<?php 

$filter1 = "blueberries,abc,cornstarch,sugar";
$cval = strtoupper($filter1);         
$parts1 = explode(',',$cval);

$filter2 = "water,blueberries,sugar,cornstarch";
$values = strtoupper($filter2);
$parts2 = explode(',', $values);

$m=0;
$nm=0;

for($i = 0; $i< count($parts1); $i++)
{

for($j = 0; $j< count($parts2); $j++)
{

if($parts1[$i] == $parts2[$j])
{
$m++;
$p[] = $parts1[$i];
}
else{
$nm++;
$q[] = $parts1[$i];
}

}

}

echo $m;
echo "<br />";
echo $nm;
echo "<br />";
print_r($p);
echo "<br />";
print_r($q);

?> 
```

有人可以帮我解决这个问题，因为我**不想使用内置的数组比较函数。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:58:14.037

我会为此使用内部函数（如果我理解你的问题）

匹配：

```
$matched = array_intersect($parts1, $parts2); 
```

区别：

```
$difference = array_diff($parts1, $parts2); 
```

或者在你的 for 循环世界中：

```
<?php
    $filter1 = "blueberries,abc,cornstarch,sugar";
    $cval = strtoupper($filter1);
    $parts1 = explode(',', $cval);

    $filter2 = "water,blueberries,sugar,cornstarch";
    $values = strtoupper($filter2);
    $parts2 = explode(',', $values);

    $matched = $not_matched = array();

    for ($i = 0; $i < count($parts1); $i++)
    {

        if (in_array($parts1[$i], $parts2))
        {
            $matched[] = $parts1[$i];
        }
        else
        {
            $not_matched[] = $parts1[$i];
        }

    }

    print_r($matched);
    print_r($not_matched);
?> 
```

我一直在努力添加另一个循环而不是使用 in_array() 但出于两个原因我不会更新我的答案。

1) 使用

```
$matched = array_intersect($parts1, $parts2);
$difference = array_diff($parts1, $parts2); 
```

写这么多代码而不是两行代码是违反我的信仰的。

2）创建这么多代码严格不使用`array_*`或`in_array`函数的唯一原因必须是为了一些测验或测试，我想进入并获胜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:04:52.390

你正在做两个数组的笛卡尔积。如果您发现 ，添加to`$parts1[$i] == $parts2[$j]`是正确的，但相反的假设（如果它们不同，则添加 to ）是错误的。您应该从 in 中的所有元素开始，当您有匹配项时，将其添加到.`$parts1[$i]``$p``$q``$q``$p``$q`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T12:59:51.283

```
 <?php
    $array1 = array("a" => "green", "red", "blue", "red");
    $array2 = array("b" => "green", "yellow", "red");
    $result = array_diff($array1, $array2);

    print_r($result);
    ?> 
```

这是 php 库函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T11:00:49.853

使用 array_intersect、array_diff 和 array_merge

```
$filter1 = "blueberries,abc,cornstarch,sugar";
$cval = strtoupper($filter1);         
$parts1 = explode(',',$cval);

$filter2 = "water,blueberries,sugar,cornstarch";
$values = strtoupper($filter2);
$parts2 = explode(',', $values);

print_r(array_intersect($parts1, $parts2));

print_r(array_merge(array_diff($parts1, $parts2), array_diff($parts2, $parts1))); 
```

数组（[0] => BLUEBERRIES [2] => 玉米淀粉 [3] => SUGAR）数组（[0] => ABC [1] => 水）

# javascript - 创建具有所有唯一组合的数组

> ID：13742093
> 
> 赞同：0
> 
> 时间：2012-12-06T10:55:16.063
> 
> 标签：javascript

无法弄清楚如何创建一个包含所有匹配项的数组。我想我需要一个递归函数。

我喜欢从下面的 JSON 中获取所有值，并创建一个包含所有值组合的数组。可能有更多或更少的模型（名称4）和更多或更少的值。有什么帮助吗？

```
var models = [
    {
        name: 'Name1',
        values: [
            'Title1Value1',
            'Title1Value2',
            'Title1Value3'
        ]
    },
    {
        name: 'Name2',
        values: [
            'Title2Value1',
            'Title2Value2'
        ]
    },
    {
        name: 'Name3',
        values: [
            'Title3Value1',
            'Title3Value2'
        ]
    }
];

// Output array
var matches = [
    [ 'Title1Value1', 'Title2Value1', 'Title3Value1' ],
    [ 'Title1Value1', 'Title2Value1', 'Title3Value2' ],
    [ 'Title1Value1', 'Title2Value2', 'Title3Value1' ],
    [ 'Title1Value1', 'Title2Value2', 'Title3Value2' ],
    [ 'Title2Value2', 'Title2Value1', 'Title3Value1' ],
    [ 'Title1Value2', 'Title2Value1', 'Title3Value2' ],
    [ 'Title1Value2', 'Title2Value2', 'Title3Value1' ],
    [ 'Title1Value2', 'Title2Value2', 'Title3Value2' ],
    [ 'Title1Value3', 'Title2Value1', 'Title3Value1' ],
    [ 'Title1Value3', 'Title2Value1', 'Title3Value2' ],
    [ 'Title1Value3', 'Title2Value2', 'Title3Value1' ],
    [ 'Title1Value3', 'Title2Value2', 'Title3Value2' ]
]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:18:24.513

```
var indices = [];
var lengths = [];
for (i = 0; i<models.length; i++) {
    indices[i] = 0;
    lengths[i] = models[i].values.length;
}
var matches = [];
while (indices[0] < lengths[0]) {
    var row = [];
    for (i = 0; i<indices.length; i++) {
       row.push(models[i].values[indices[i]]);
    }
    matches.push(row);
    /* Cycle the indexes */
    for (j = indices.length-1; j >= 0; j--) {
        indices[j]++;
        if (indices[j] >= lengths[j] && j != 0) {
            indices[j] = 0;
        } else {
            break;
        }
    }
} 
```

# javascript - FB Like for photo 在网站上不起作用

> ID：13742094
> 
> 赞同：0
> 
> 时间：2012-12-06T10:55:19.780
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-like

我对来自网站的 FB Like 有疑问。我有两个喜欢的功能，页面帖子和页面照片。当我点赞 FB Post 时，它会起作用，并且 Facebook 主页帖子和网站都会计算喜欢。但是，当我尝试点赞一张照片时，网站上的点赞计数器会增加到 1，然后在一秒钟后下降到 0。

我有以下配置：

```
<div id="fb-root"></div>
        <script>(function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=111111111111111111111";
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script> 
```

喜欢按钮

```
'<fb:like href="' + urlToLike + '" send="false" layout="button_count" width="170" show_faces="false"></fb:like>'; 
```

用于帖子和照片的 URL，例如：

```
photoUrlToLike = 'http://www.facebook.com/photo.php?fbid=111111111111&set=a.502954436404881.121467.265145956852398&type=1&permPage=1';
postUrlToLike = 'http://www.facebook.com/mydummypage/posts/1111111111111111'; 
```

所以我的问题是，既然用户可以喜欢我网站上的帖子，为什么它也不适用于照片。我在这里想念什么？

**编辑**

我找到了 facebook 照片 API：

[http://developers.facebook.com/docs/reference/api/photo/](http://developers.facebook.com/docs/reference/api/photo/)

这应该很容易执行，但我现在几个小时都无法做到这一点。引用照片api：

```
likes

Create

You can like a photo by issuing a HTTP POST request to PHOTO_ID/likes connection with the publish_stream permission. No parameters necessary. 
```

假设我的页面网址是：

```
http://www.facebook.com/dummypage 
```

我的照片 ID 是`4234234234131`。照片在虚拟页面的墙上。

我的帖子 URL 会是什么样子？我应该向哪个 Url 发出 POST 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-03T17:02:06.723

我最近对同样的问题感到困扰。经过几个小时的学习，我明白这不是我的代码或我身边的任何问题。这是一个小错误，甚至向 facebook 报告。请在此处查看： [https ://developers.facebook.com/bugs/530674523672388?browse=external_tasks_search_results_51fd2ae4d0e0e1621568068](https://developers.facebook.com/bugs/530674523672388?browse=external_tasks_search_results_51fd2ae4d0e0e1621568068)

另一件重要的事情是，问题说喜欢适用于帖子但不适用于照片。但我得到了不同的东西。包含外部链接内容和任何其他内容附件的帖子也会出现同样的问题！

如问题所述，我已经使用系统管理了喜欢的帖子：您可以通过向具有 publish_stream 权限的 PHOTO_ID/likes 连接发出 HTTP POST 请求来点赞照片。不需要参数。当然，每个用户都需要一个**有效的访问令牌**才能正确执行此操作。您可以使用**[Facebook SDK for PHP](https://developers.facebook.com/docs/reference/php/)**通过授权每个用户来获取访问令牌。它适用于所有标准对象（帖子、照片、视频已正确测试），只需要传递照片、帖子或视频的有效 id。

代码很简单，我已经为此显示了假的 facebook 喜欢和喜欢（喜欢之后）按钮：

```
function like_std_object($object_id){
    try{
        $like=$facebook->api('/$object_id/likes','post'); //post a like using api
    }catch(FacebookApiException $e){
        return false;
    }
}
function unlike_std_object($object_id){
    try{
        $like=$facebook->api('/$object_id/likes','delete'); //post a un-like using api
    }catch(FacebookApiException $e){
        return false;
    }
} 
```

# asp.net-mvc - MVC 路由映射：1 个 URL 模式仅适用于 1 个控制器

> ID：13742095
> 
> 赞同：0
> 
> 时间：2012-12-06T10:55:24.753
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, url-routing

```
routes.MapRoute(
            name: "GetAdressen",
            url: "{controller}",
            defaults: new { controller = "AdressenController", action = "GetAdressen"}
        );
        routes.MapRoute(
            name: "GetEinsaetze",
            url: "{controller}",
            defaults: new { controller = "EinsaetzeController", action = "GetEinsaetze"}
        ); 
```

在这种情况下，只有 /Adressen 有效，/Einsaetze 无效

```
 routes.MapRoute(
            name: "GetEinsaetze",
            url: "{controller}",
            defaults: new { controller = "EinsaetzeController", action = "GetEinsaetze"}
        );
routes.MapRoute(
            name: "GetAdressen",
            url: "{controller}",
            defaults: new { controller = "AdressenController", action = "GetAdressen"}
        ); 
```

在这种情况下，只有 /Einsaetze 有效，/Adressen 无效

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:04:37.537

像这样使用

```
 routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional },
                namespaces: new[] { "projectName.Controllers" }); 
```

# .net - 使用mvc模型实体框架创建数据库

> ID：13742105
> 
> 赞同：-2
> 
> 时间：2012-12-06T10:56:08.970
> 
> 标签：.net, entity-framework

我想使用模型实体框架创建一个数据库。我确实和我有一个快照，有人可以建议我吗？ ![在此处输入图像描述](../Images/933be6e3018d135ed50fdec3f66a422a.png)

![在此处输入图像描述](../Images/4d6c883da3fa08ba31353f5d37c92baf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:19:54.357

如果我正确理解了您的问题，并且您正在为此寻找起点，我建议您阅读以下教程：

[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application)

> 实体框架可以在应用程序运行时自动为您创建（或删除并重新创建）数据库。您可以指定在每次应用程序运行时或仅在模型与现有数据库不同步时执行此操作。您还可以编写一个包含实体框架在创建数据库后自动调用的方法的类，以便用测试数据填充它。在本节中，您将指定在模型更改时应删除并重新创建数据库。

# sql-server-2008-r2 - SSAS - 时间维度增加时间结构

> ID：13742106
> 
> 赞同：2
> 
> 时间：2012-12-06T10:56:11.260
> 
> 标签：sql-server-2008-r2, ssas, data-warehouse, dimensions, bids

我希望增加多维数据集中的时间维度。当前设置为日历结束日期 31/12/2012。我希望将其更新到 2016 年 12 月 31 日结束。目前使用 BIDS 我已将维度中的 CalendarEndDate 属性增加到“31/12/2016”。保存它，处理维度，转到浏览器并查看数据，但只显示日历 2012，没有 2013、2014 的迹象……等等。

我错过了一个步骤还是在更新之前我必须做其他任何事情？

使用 SQL Server 2008R2。Dimension 是在我获得所有权之前设置的，因此不确定它最初是如何创建的，但似乎是一个非常标准的维度，其源为 DSV。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:34:36.060

听起来开发人员最初使用了“在服务器上生成时间表”（维度向导的第一页）选项，因为您有 CalendarEndDate 可用。如果是这种情况，更改 CalendarEndDate、从 Visual Studio（不是 SQL Server！）处理维度并浏览维度应该可以工作。通过从 Visual Studio 中的维度进行处理，您将强制部署新定义。

如果您仍然遇到问题，请尝试在测试项目中创建一个新的时间维度并进行部署以查看您是否遇到相同的问题。比较两个时间维度的属性，看看你是否能发现任何不寻常的地方。

# javascript - javascript获取google-plus用户头像

> ID：13742113
> 
> 赞同：3
> 
> 时间：2012-12-06T10:56:27.843
> 
> 标签：javascript, google-plus

堆栈溢出！所以我现在的工作是围绕社交网络工作。我已经登录了 facebook、google 和 twitter。现在我需要检索用户头像。网站非常动态，几乎所有内容都通过 javascript 和 ajax 运行。我已经成功获得了 facebook 用户头像。当用户有头像时，返回头像，当用户没有头像时，返回facebook的默认头像。现在我正在研究 google-plus 和 twitter。我找到了不错的 url，我可以从 google-plus 获取头像：

```
 https://plus.google.com/s2/photos/profile/{oauth_id}?sz=100 
```

我将 oauth_id 存储在会话中，它是可访问的。当用户设置头像时 - 一切正常。问题是，当用户头像未设置时 - 该链接返回 404 错误。如果该链接返回 404 错误，我如何确定在 jquery 中或仅在 javascript 中？对于未来的一些工作——我认为 twitter 也有同样的问题。或者您可以提供一些更好的选择来实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T16:58:11.713

另一种方法是请求 plus.me 范围，对用户进行身份验证，然后检索他们的个人资料，如果他们有头像，则该个人资料将设置图像值。我在这里创建了一个现场演示：[http](http://wheresgus.com/profile.html) ://wheresgus.com/profile.html ，它显示了使用 Google+ 公共数据 API 检索个人资料。

要为您的项目进行设置，请转到 Google API 控制台 - [https://code.google.com/apis/console/](https://code.google.com/apis/console/)并创建一个启用了 Google+ API 的项目。您将需要来自 Google API 控制台的 API 访问部分的 Web 应用程序的客户端 ID。

相关代码如下：

```
<html>
  <head>
    <script src="https://apis.google.com/js/plusone.js"></script>
    <script type="text/javascript">
    function onSignin(e){
      accessToken = e.access_token;
      var xhr = new XMLHttpRequest();
      xhr.open('GET', "https://www.googleapis.com/plus/v1/people/me/");
      xhr.setRequestHeader('Authorization', 'Bearer ' + accessToken);
      xhr.send();

      xhr.onreadystatechange = function(){
        if (this.readyState == 4){
          var myProfile = JSON.parse(xhr.responseText);
          alert(myProfile.image.url);
        }
      }
    }
    </script>      
  </head>
  <body>
    <g:plus action="connect" clientid="YOUR CLIENT ID" scope="https://www.googleapis.com/auth/plus.me" callback="onSignin">
    </g:plus>
  </body>
</html> 
```

使用此代码创建一个 HTML 文件，并将您的客户 ID 替换为您在 Google API 控制台中创建的凭据。当您单击登录按钮时，客户端将为您提供用户的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:36:56.787

如果您使用 jquery.ajax() 或 jquery.get() 方法（或类似的方法），您应该能够检查作为回调的一部分返回的 jqXHR 对象。它有一个“状态”字段，其中包含 HTTP 调用的状态代码。

[请参阅http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)下**的 jqXHR 对象**部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-03T18:24:41.267

我试图摆弄上述建议，但发现以下方法合适。我使用 jquery get 来获取图像 url。以下是代码片段。

```
function getImageURL(_gplusid) {
                $.get("https://www.googleapis.com/plus/v1/people/"+_gplusid+"?fields=image"+"&key="+googlepluskey,
                function (data) {
                    console.log(data);
                });
        } 
```

PS：_gplusid 是用户的 google plus id，googlepluskey 是你的 google 认证密钥。输出是一个包含图像 url 的 json 对象。您需要通过 google api 控制台启用 google plus api 访问。

# javascript - 没有链接时用javascript隐藏div

> ID：13742116
> 
> 赞同：0
> 
> 时间：2012-12-06T10:56:37.487
> 
> 标签：javascript, jquery, hide

我有一个进入 modx cms 的网站，当该 div 中没有标签时，我试图删除或隐藏一个 div。我怎样才能做到这一点？

我试过这个但没有运气：

```
jQuery(function($) {
if ($(".pages a")) {$(".pages").remove();}
});

< div class="pages">[+previous+] [+pages+] [+next+]< /div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:02:00.133

如果您试图检查`<a>`标签是否存在于 div 中，那么您可以尝试：

```
if($(".pages a").length == 0) {
    // links don't exist
    $(".pages").remove();
} else {
    // links exist
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:07:43.793

另一个较短的答案是

```
$('.pages:not(:has(>a))').css("display", "none"); 
```

[点击查看...](http://jsfiddle.net/crtEs/)

[参考 jQuery.not()](http://api.jquery.com/not-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:03:04.440

我不确定这是否是您想要的：

```
$(function($) {
    $(".pages").each(function(){
        if(!$(this).find('a').length)
            $(this).remove();
    }); 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T11:08:23.973

### 以这种方式隐藏它，以便在有链接时可以显示它们：

```
if ($(".pages a").length == 0) {
    $(".pages").hide();
} 
```

当链接存在时，或者您进行 AJAX 调用时，请执行以下操作：

```
$(".pages").show(); 
```

# java - java.io.FileNotFoundException（系统找不到指定的路径）

> ID：13742122
> 
> 赞同：1
> 
> 时间：2012-12-06T10:56:56.550
> 
> 标签：java, file-io

当我想打开密钥库时出现此异常

```
java.io.FileNotFoundException: \resources\keystore (The system cannot find the path specified) 
```

基本上我的应用程序就像

```
src/
    client.java
    server.java
    resources/
        keystore
        truststore 
```

和错误的代码：

```
System.setProperty("javax.net.ssl.keyStore","/resources/keystore");
System.setProperty("javax.net.ssl.keyStorePassword", "redacted"); 
```

我还尝试了 ./resources/keystore、resources/keystore、\\resources\\keystore 等。

我的应用程序应该在一个可执行的 jar 中工作，所以请不要使用绝对路径技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:01:57.370

您可以使用它来获取当前目录路径：

Java 代码：

``String currentDir = new File(".").getAbsolutePath();``

或这个：

Java 代码：

``String currentDir = System.getProperty("user.dir");``

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:04:02.087

如果您可以将资源放在 CLASS_PATH 中，则可以使用

```
Thread.currentThread().getContextclassLoader().getResource(keystore) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:02:07.167

关于不同的斜线：使用`File.separator`代替`/`，那么它应该在`"resources" + File.separator + "keystore"`（未测试）。

# android - Android：意图- FLAG_ACTIVITY_NO_HISTORY 不起作用

> ID：13742124
> 
> 赞同：4
> 
> 时间：2012-12-06T10:57:00.250
> 
> 标签：android, android-intent

我有三个活动说 ABC，从活动 A 我去 B 和搜索城市，从活动 B 我去活动 c，在 c iam 保存我放在异步任务中的东西，这将保存在 Activit A 列表视图中，问题是保存在列表中后，当我点击返回按钮时，我再次看到活动 A，但没有保存我之前保存的名称

```
private class Savecity extends AsyncTask<city, String, String> {

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);
            if(result != null && result.equals("sucess")){

            Intent intent = new Intent(activity, cityActivity.class);
            intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
            startActivity(intent);}

        }
        @Override
        protected String doInBackground(city... arg0) {
            try {
                ((CityPreferences) activity.getApplication()).createcity(arg0[0]);

                return "sucess";
            } catch (Exception e) {
                Log.e(TAG, "", e);
                return "fail";
            }
        } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-06T10:59:35.620

你可以从你的 AndroidManifest.xml 文件中实现它，只需在你想要`android:noHistory="true"`的那些中添加属性`<activity>`

希望这可以帮助..

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-06T11:08:35.047

实际上，在您的活动中`C`，当您尝试重新调用活动`A`时，您需要做的就是清除**活动堆栈**。例如：

```
Intent i = new Intent(getBaseContext(), Activity_A.class);
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(i); 
```

# sql - sql根据获取的列值查询where条件

> ID：13742126
> 
> 赞同：0
> 
> 时间：2012-12-06T10:57:16.863
> 
> 标签：sql

我正在制作考勤系统。我使用大于 4.00 AM 的日期和时间的最短时间为特定日期的用户选择 IN 时间。现在我想根据条件找出用户的 OUT 时间。现在 OUT 时间可以跨越几天。（因为人们在夜班工作。）。因此 OUT 时间的条件是所选 IN 时间的最长时间加上 16 小时。

我该如何为此编写sql查询？

我的数据库看起来像这样..

```
Name  Time                           In-0/Out-1
Ajay  1.00 AM 4/12/2012                 0
Ajay  6.00 AM 4/12/2012                 1
Ajay  9.00 PM 4/12/2012                 0  in time
Ajay  2.00 AM 5/12/2012                 1
Ajay  2.15 AM 5/12/2012                 0
Ajay  6.10 AM 5/12/2012                 1  out time 
```

我正在为用户获取进出时间。有些人上夜班。因此，**IN 时间**被提取为今天大于 4 AM 的 IN 时间的最小值。并且需要将 OUT 时间获取为今天的外出时间的最大时间，该时间小于 16 小时添加到**今天的 IN 时间**。

# c - 删除链表元素

> ID：13742127
> 
> 赞同：0
> 
> 时间：2012-12-06T10:57:24.460
> 
> 标签：c, linux, linked-list

我很好奇我做错了什么，因为我`void *DeleteDoneNodes(node * n)`没有做任何事情，没有错误但没有输出更近，所以任何人都可以帮助我找到问题的根源，谢谢。

场景： cmd line ./smn `m`列表中的节点数，`n`工作线程数应该删除每个节点`node->value == 1`，但它没有做任何事情......

代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <unistd.h>
#include <math.h>
#include <semaphore.h>

#define finishedNodes 5
#define workersLimitNr 3

int workingThreads = 0;
sem_t sem;

struct dataBlock{
    struct node *root;
    int listSize;
    int forIndex;
};

struct node { // std linked list node
    int value;
    int worker;
    struct node *next;
};

int slots = 0; // only 3 threads are allowed to access the list
int availableCheck(){   // check if thread can acces the list
    if(slots < 3) 
        return 0;
    else 
        return -1;
}

pthread_mutex_t mutp = PTHREAD_MUTEX_INITIALIZER;   // mutex
pthread_cond_t  condvar = PTHREAD_COND_INITIALIZER;   //condvar

void *deleteDoneNodes(struct node *n){ // T H I S  I S  T H E  F U N C
        struct node *root = n;
        struct node *it;
        it = root;
        do{
            if(it->value == 1){
                struct node *tmp;
                printf("DELETING: %d > %d\n", it->value, it->worker );
                root = root->next;
                tmp = it;
                it = it->next;
                free(tmp);
            }
            else
                it = it->next;
    }while(it !=  NULL);

    return NULL; 
}

void * worker( void *data ){
    struct dataBlock *inData = (struct dataBlock *) data;
    struct node *root = inData->root;
    int forIndex = inData ->forIndex;
    free(data);
    printf( "*    Thread id: %lu    forID:  %d  workerNode: \n",pthread_self(),forIndex); 

    pthread_mutex_lock( &mutp );
    if(availableCheck() < 0){
        printf( " ^^^ List not available yet... \n" ); 
        pthread_cond_wait( &condvar, &mutp ); 
    } 
    struct node *it = root;

    printf( " _forID_ %d\n |", forIndex );  
    do{
        if(forIndex == it->worker){
            printf("valid for sqrt  forIndex %d == it->worker %d\n",forIndex, it->worker );
            if(it->value > 2){
                while(it->value != 1)
                it->value = sqrt(it->value);
                // it->value = it->value - 1;
            }
        }
        it = it->next;
    }while(it !=  NULL);

    pthread_cond_signal( &condvar ); // 
    pthread_mutex_unlock( &mutp ); 
    return NULL;
}

int main( int argc, char *argv[] ){
    if ( argc != 3 ){
        printf( "Programm must be called with \n NR of elements and NR of workers! \n " );
        exit( 1 );
    }

    int i;
    struct node *root;
    struct node *iterator;  

//prepare list for task
    int listSize = atoi(argv[1]);
    int nrWorkers = atoi(argv[2]);
    root = malloc(sizeof( struct node) );

    root->value = rand() % 100;
    root->worker = 0;
    iterator = root;

    for( i=1; i<listSize; i++ ){
        iterator->next = malloc(sizeof(struct node));
        iterator = iterator->next;
        iterator->value = rand() % 100;
        iterator->worker = i % nrWorkers;
        printf("node #%d worker: %d  value: %d\n", i, iterator->worker,iterator->value);
    }
    iterator->next = NULL;
    printf("? List got populated\n");
// init semaphore > keeps max 3 threads working over the list

    if( sem_init(&sem,0,3) < 0){
      perror("semaphore initilization");
      exit(0);
    }

// Create all threads to parse the link list
    int ret;    
    pthread_mutex_init(&mutp,NULL);

    pthread_t w_thread;
    pthread_t* w_threads = malloc(nrWorkers * sizeof(w_thread));

    for( i=0; i < nrWorkers; i++ ){         
        struct dataBlock *data = malloc(sizeof(struct dataBlock));
        data->root = root;
        data->listSize = listSize;
        data->forIndex = i;
        ret = pthread_create ( &w_threads[i], NULL, worker, (void *) data );
        if( ret ) {
            perror("Thread creation fail");
            exit(2);    
        }   
    } 

    deleteDoneNodes( root );
    // printf( ">>>> %d\n", root->value );
    for ( i = 0; i < nrWorkers; i++ ){
        pthread_join(w_threads[i],NULL);
    }
    // for ( i = 0; i < nrWorkers; i++){
    //  free(w_threads);
    // }

    iterator = root;
    for ( i = 0; i < listSize; i++){
        printf("val: %d  worker: %d _  ", iterator->value, iterator->worker);
        iterator = iterator->next;
    }

    free(root);
    free(iterator);
    return 0;
} 
```

**PS：**它编译/工作错误/warningless - 也用valgrind测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:08:25.943

这是一个替代版本

```
void *deleteDoneNodes(struct node *n){
    struct node *root = n;
    struct node *it = root;
    struct node *prev = NULL;
    do{
        if(it->value == 1){
            struct node *next = it->next;
            if (prev != NULL) {
                prev->next = next;
            }
            if (it == root) {
                root = next;
            }
            free(it);
            it = next;
        }
        else {
            prev = it;
            it = it->next;
        }
    }while(it !=  NULL);

    return root;
} 
```

主要变化是：

*   处理从列表中间删除项目。上一项需要更改其`next`指针。没有这个，它会一直指向释放的内存。
*   更新逻辑`root`。这只有在我们释放时才需要发生`root`
*   沟通可能的变化`root`。如果我们从列表中删除根（又名头）项，则需要将其传达给调用者。我通过返回（可能更新的）值`root`而不是`NULL`

# usb - 打印到 USB QW BASIC/QUICK BASIC

> ID：13742128
> 
> 赞同：1
> 
> 时间：2012-12-06T10:57:26.033
> 
> 标签：usb, lpt, qbasic, gw-basic

我希望将 GW BASIC/QUICK BASIC 程序转换为自动可执行文件 (exe)，以便我可以在 windows 7 pro 64bit/windows 8 pro 上运行这些程序。但是这些程序从 LPT1 端口打印。我希望它恢复为 USB，因为没有新计算机带有 LPT 端口。

考虑 Quick Basic 中的一个简单的 hello world 程序。

```
 print  "Hello world"
 lprint "hello world" 
```

我用谷歌搜索了很多但无法找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:20:58.043

由于 GWBASIC 和 QuickBASIC 是 DOS 程序（16 位），您将无法在任何 64 位 Windows 操作系统上运行它们，无论是 Windows 7 x64 还是 Windows 8 x64。此外，由于 QuickBASIC 仅输出 16 位 DOS 可执行文件，因此您也无法运行使用该文件创建的 EXE 文件。

您将不得不使用像 DOSBOX 这样的第三方 DOS 模拟器：http: [//www.dosbox.com/](http://www.dosbox.com/)

作为替代方案，您还可以设置运行 Windows 版本的虚拟机，该版本能够执行 16 位 DOS EXE 文件，例如 Windows 9x。为此，您可以使用 VMWare Player、Oracle VirtualBox、Windows VirtualPC 等。但另一方面，如果您想访问计算机的（=主机）硬件，这*可能会导致其他问题。*

所以我的建议是改用[FreeBASIC](http://www.freebasic.net/)，它是开源软件，可用于 Windows、Linux 和 DOS。您可以轻松地将旧的 QBasic 程序移植到 FreeBASIC，而且通常不费吹灰之力。FreeBASIC 创建的可执行文件可以在 64 位 Windows 版本上运行。使用 FreeBASIC 的`OPEN LPT`命令（请参阅[该命令的 Wiki 页面](http://www.freebasic.net/wiki/wikka.php?wakka=KeyPgOpenLpt)），您可以访问在 Windows 中配置的打印机，甚至那些只是虚拟打印机的打印机，例如 PDF 编写器。

# php - Zend Framework 2 Json，默认路由

> ID：13742132
> 
> 赞同：3
> 
> 时间：2012-12-06T10:57:42.590
> 
> 标签：php, json, zend-framework2

我正在构建一个用户创建页面（控制器/模块：用户），它具有 UI 控件（DOJO`filterselectbox`等`username`）。UI 控件填充了`Json`部署为 module (module name/controller)`myService`和 action的服务`populatelist()`。

`populatelist`将数据返回`Json`给客户端，客户端 dojo ui 元素将其用作内存存储。

我有 2 个模块，`User`并且`myService`. 对于`User`模块，我`register`在**register.phtml**中设置了默认页面，如下所示。我为用户输入验证和数据发布添加了逻辑。

`module.config.php`模块：**用户**

```
'defaults' => array(
                   'controller' => 'User\Controller\User',
                   'action'     => 'register',
                   ), 
```

Json 在 module 中注册`myService`。**register.phtml**调用如下：

```
myservice = new dojo.rpc.JsonService("myService/populatelist");
var dojoDeferredObject=myservice.getCategoryList();

//comment: getCtegoryList is actual method of remote object which returns the json data 
```

当我打开 url as时，对JSONRPC 调用的**`http://localhost/user`**任何引用都可以正常工作：它将 JSON 调用解析为 as并且我得到了我需要的数据。`myService`**`http://localhost/myService/populatelist`**

当**我****`http://localhost/user/register`**以. 原因是，RPC 调用正在一个不存在的路径上进行，即而不是.****`http://localhost/user/myService/populatelist`****`http://localhost/myService/populatelist`****

 **在某处我错过了导致此问题的配置。我不想硬编码 Json service Module 的路径`myService`。

我相信问题出在这一行：

```
$server->setTarget('myService/populatelist'); 
```

在下面的代码中，用于设置 Json 服务。这增加了不存在的路径。但我不确定如何控制它，因为我想要一个单独的 Json 服务模块。

```
$class = "MOCAPI\Model\MOCGuest";
        $server = new Server();
        $server->setClass($class);
        //echo $_SERVER['REQUEST_METHOD'];
        if ('GET' == $_SERVER['REQUEST_METHOD']) {
            $server->setTarget('myService/populatelist')
                   ->setEnvelope(Smd::ENV_JSONRPC_2);
            $smd = $server->getServiceMap();
            // Set Dojo compatibility:
            $smd->setDojoCompatible(true);
            header('Content-Type: application/json');
            echo $smd;
            return $this->getResponse();
        } else {
            //$server->handle();   
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-10T08:56:18.990

您应该使用 routes 和`url()`helper 来构建 url 以及相对路径和绝对路径，而不是 raw `'myService/populatelist'`。

检查[https://framework.zend.com/manual/2.4/en/modules/zend.view.helpers.url.html](https://framework.zend.com/manual/2.4/en/modules/zend.view.helpers.url.html)上的文档（版本 2.4，但在 zf2.* 和 zf3 中几乎相同）。**

# javascript - 在一定时间后通过单击 div 或鼠标悬停来隐藏菜单？

> ID：13742137
> 
> 赞同：1
> 
> 时间：2012-12-06T10:57:58.423
> 
> 标签：javascript, jquery, json, html, css

在网页上有菜单，悬停时打开子菜单。所有菜单和子菜单都是使用 div 制作的，子菜单使用 style.display = none;

问题是一旦打开子菜单，即使鼠标移出它也不会隐藏。无论用户单击页面上的其他位置，它都会保持打开状态。

我想知道如何实现某些功能，以便在一段时间后它会自动消失或单击页面上的其余区域会消失？

**注意**：mouseout 无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:25:59.170

供`how can I implement some functionality so that after some time it automatically get disappear`使用`setTimeout`。

```
var canceled;

$("mymenu").on("focusout", function() {
    canceled = false;
    setTimeout(function() {
        if (!canceled) {
            // Hide menu
        }
    }, 2000);
});

$("mymenu").on("focusout", function() {
    canceled = true;
}); 
```

因为您应该直接在根上`or on clicking on rest of the area on page it disappears.`绑定一个事件：`click``document`

```
$(document).on("click", function() {
    // hide menu if visible
}); 
```

# ajax - 页面加载后每 10 秒触发一次 ajax 事件

> ID：13742142
> 
> 赞同：2
> 
> 时间：2012-12-06T10:58:14.367
> 
> 标签：ajax, jsf

页面加载后是否可以使用 JSF 触发 ajax 事件，例如每 10 秒？

我是说：

```
<f:ajax listener="#{bean.mymethod()}" /> 
```

我想在页面加载后每 10 秒调用一次此方法。我不想通过 JavaScript 刷新重新加载整个页面。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T11:41:46.443

这个过程称为“轮询”。

标准 JSF 不提供此功能`<f:ajax>`。您需要寻找第 3 方 JSF 组件库。根据您的[问题历史](https://stackoverflow.com/users/894913/cichy?tab=questions)，您正在使用 PrimeFaces，或者至少已经熟悉它。在这种情况下，您可以只使用它的`<p:poll>`组件来完成这项工作。另请参阅以下提取代码[的 PrimeFaces`<p:poll>`展示页面：](http://www.primefaces.org/showcase/ui/ajax/poll.xhtml)

看法：

```
<h:form id="form">  
    <h:outputText id="txt_count" value="#{counterBean.count}" />  

    <p:poll interval="3"   
            listener="#{counterBean.increment}" update="txt_count" />  
</h:form> 
```

豆：

```
public class CounterBean implements Serializable{  

    private int count;  

    public int getCount() {  
        return count;  
    }  

    public void setCount(int count) {  
        this.count = count;  
    }  

    public void increment() {  
        count++;  
    }  
} 
```

因此，在您的特定情况下，您需要以下内容：

```
<p:poll interval="10" listener="#{bean.mymethod}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:17:24.743

采用

```
<a4j:poll action="#{bean.mymethod()}" interval="10000"/> 
```

# android - 在 android phonegap 应用程序语言（印度语言印地语）字体在 android 模拟器中工作，但在真实设备中不工作。

> ID：13742146
> 
> 赞同：1
> 
> 时间：2012-12-06T10:58:30.090
> 
> 标签：android

我创建了一个 android phonegap 应用程序，它以多种语言（如印地语、斐济语等）显示信息。印地语内容在模拟器中正确显示，但它不适用于实际的 android 设备。它显示一个小方框。

我将解释这些步骤：

*   我使用了网络字体转换器并进行了转换`de.ttf`，它生成了 3 个文件。

*   我将所有这些文件复制到项目目录中名为“font”的文件夹中。

*   我`font-face`在css中添加了。

我`font-face`在一个 div 中调用并添加了印地语文本。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:10:31.003

我猜[Android模拟器不显示印地语字体](https://stackoverflow.com/questions/4478105/problem-with-hindi-keyboard-on-android-2-3-emulator)答案显示了这个问题。

[Android 2.3 模拟器上印地语键盘的问题](https://stackoverflow.com/questions/4478105/problem-with-hindi-keyboard-on-android-2-3-emulator)是另一个重复。

据我了解，印地语并未在旧手机中完全实现。由于您的模拟器的操作系统版本高于手机，它可能在您的模拟器中工作。我建议您更改创建一个与手机版本相同的新模拟器图像并进行测试。如果它在模拟器上不起作用，则将操作系统版本提升到它起作用为止。这必须是您的应用程序的最低操作系统版本。

如果由于某种原因在同一版本中文本确实正确显示，那么还有其他事情发生。

# java - 使用 ANT 编译 JavaFX 代码

> ID：13742149
> 
> 赞同：7
> 
> 时间：2012-12-06T10:58:40.097
> 
> 标签：java, ant, build, compilation, javafx-2

我的系统上安装了以下内容 -

```
 Java version "1.7.0_09"
 JavaFX 2.0 SDK 
 NetBeans 7.2.1 
```

当我尝试使用 ANT 编译代码时，它会显示错误消息 -

```
Could not load definitions from resource com/sun/javafx/tools/ant/antlib.xml. It could not be found. 
```

Build.XML 包含

```
<project name="XYZ"  default="XYZ" basedir="XYZ" xmlns:fx="javafx:com.sun.javafx.tools.ant">
    <description>
        simple example build file
    </description>

  <!-- set global properties for this build -->
    <property name="srcXYZGenerator" location="src/XYZGenerator"/>

    <property name="classpath" location="lib/XYZLib.jar;lib/ABC.jar;lib/IJK.jar;"/>

    <target name="init">
        <!-- Create the time stamp -->
        <tstamp/>
        <!-- Create the build directory structure used by compile -->
        <mkdir dir="${buildXYZ}"/>  

    </target> 

    <target name="XYZ" depends="init">
    <!-- Compile the java code from ${src} into ${build} -->
    <taskdef resource="com/sun/javafx/tools/ant/antlib.xml"      
    uri="javafx:com.sun.javafx.tools.ant" classpath=".:C:\Program Files\Java\jdk1.7.0_09\lib\ant-javafx.jar"/>
    <javac classpath="${classpath}" srcdir="${srcXYZ}" destdir="${buildXYZ}"/>
    </target>

</project> 
```

其他编译错误：

```
[javac] C:\Users\JavaUser4\Desktop\XYX2012.12FX\XYZ\src\Utility\net\XYZ\javafx\queue\DefaultStatisticsHandlerController.java:19: error: package javafx.scene does not exist
[javac] import javafx.scene.Node;
[javac]                    ^
[javac] C:\Users\JavaUser4\Desktop\XYZ2012.12FX\XYZ\src\Utility\net\XYZ\javafx\queue\DefaultStatisticsHandlerController.java:20: error: package javafx.scene.control does not exist
[javac] import javafx.scene.control.Button;
[javac]                            ^
[javac] C:\Users\JavaUser4\Desktop\XYZ2012.12FX\XYZ\src\Utility\net\XYZ\javafx\queue\DefaultStatisticsHandlerController.java:21: error: package javafx.scene.control does not exist
[javac] import javafx.scene.control.Label;
[javac]                            ^
[javac] C:\Users\JavaUser4\Desktop\XYZ2012.12FX\XYZ\src\Utility\net\XYZ\javafx\queue\DefaultStatisticsHandlerController.java:22: error: package javafx.scene.input does not exist
[javac] import javafx.scene.input.MouseEvent; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T19:44:32.287

*Java 8 更新*

在 Oracle Java 8 中，`jfxrt.jar`默认情况下位于类路径中，因此您无需按照此答案中的说明将其显式添加到类路径中。`jfxrt.jar`只有 Java 7 才需要添加到类路径中。

* * *

编译问题是因为在类路径中没有设置`jfxrt.jar`from 。`jre\lib`

taskdef 错误是因为指定给`ant-javafx.jar`value 的路径没有指向文件系统上的有效文件。

我认为在分隔路径和使用而不是指定路径时使用 a`:`而不是 a也可能存在问题，但 ant 似乎对这些事情非常宽容，所以它们可能根本不重要。`;``/``\`

我基于对我有用的构建脚本的略微修改版本创建了一个[示例项目（没有 taskdef 警告，也没有编译错误）。](https://www.dropbox.com/s/24axgz7xum2344l/buildtest.zip)它是为 jdku9 windows 64bit 设置的。如果您使用的是不同版本的 jdk，则需要适当调整脚本中的路径。检查您安装的 jdk 的位版本 - 如果是 64 位，则使用`C:\Program Files\Java\...`，如果是 32 位，则使用`C:\Program Files (x86)\Java\...`

示例项目的生成应用程序可以使用以下命令执行：

```
java -classpath "c:\Program Files (x86)\Java\jdk1.7.0_09\jre\lib\jfxrt.jar;XYZ\lib\ScenicView.jar;XYZ\build\XYZ" FriendFinder 
```

请注意，示例中的构建脚本是非常基本的，实际上只是作为启动脚本提供给您。您最好还[为进一步的部署任务](http://docs.oracle.com/javafx/2/deployment/javafx_ant_task_reference.htm#CIAEBEDD)（例如`fx:deploy`）添加 ant 任务，以确保正确打包的应用程序支持点击运行 jar 等功能。要么，要么使用 NetBeans 并让它为您生成适当的 ant 构建文件。

我用来构建（使用[ant 1.8.4](http://ant.apache.org/bindownload.cgi)）我链接的示例应用程序的修改后的 ant 脚本是：

```
<project name="XYZ" default="XYZ" basedir="XYZ" xmlns:fx="javafx:com.sun.javafx.tools.ant">    
    <property name="srcXYZ" location="src/XYZ"/>
    <property name="buildXYZ" location="build/XYZ"/>    
    <property name="classpath" location="C:\Program Files (x86)\Java\jdk1.7.0_09\jre\lib\jfxrt.jar;lib\ScenicView.jar"/>

    <target name="init">
        <tstamp/>
        <mkdir dir="${buildXYZ}"/>  
    </target> 

    <target name="XYZ" depends="init">
        <taskdef resource="com/sun/javafx/tools/ant/antlib.xml"      
    uri="javafx:com.sun.javafx.tools.ant" classpath=".:C:\Program Files (x86)\Java\jdk1.7.0_09\lib\ant-javafx.jar"/>    
        <javac includeantruntime="false" classpath="${classpath}" srcdir="${srcXYZ}" destdir="${buildXYZ}"/>
    </target>
</project> 
```

# java - 等效于Objective C中Java的DataOutputStream

> ID：13742150
> 
> 赞同：2
> 
> 时间：2012-12-06T10:58:43.553
> 
> 标签：java, objective-c, ios, dataoutputstream, bytearrayoutputstream

我目前正在开发一个目标 C 中的项目。

我需要使用 Java 类的函数，如 ,`DataOutputStream`和`writeChars`Class的一些函数。`writeLong``flush``ByteArrayOutputStream`

具体来说，我可以在与`DataOutputStream`and`ByteArrayOutputStream`类具有相同功能的 Objective C 中使用什么？

这是我需要转换成 Objective C 的代码。

```
public static byte[] getByteArray(String key, long counter) throws IOException
{

    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    DataOutputStream dos = new DataOutputStream(bos);
    if (key != null)
    {
        dos.writeChars(key);
    }
    dos.writeLong(counter);
    dos.flush();
    byte[] data = bos.toByteArray();
    return data;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:19:38.197

您想要的是将原始数据类型转换为原始字节。

```
NSMutableData* dataBuffer = [NSMutableData data]; //obj-c byte array

long long number = 123456LL; //note that long long is needed in obj-c to represent 64bit numbers
NSData* numberData = [NSData dataWithBytes:&number length:sizeof(number)]; 
[dataBuffer appendData:numberData];

NSString* text = @"abcdefg";
const char* rawText = [text cStringUsingEncoding:NSUTF8StringEncoding]; //java uses utf8 encoding
NSData* textData = [NSData dataWithBytes:rawText length:strlen(rawText)];
[dataBuffer appendData:textData];

return dataBuffer; 
```

否`flush()`是必要的（我相信 Java`ByteArrayOutputStream`两者都不需要）

这有点简化了，注意Java写字符串时，前两个字节总是字符串长度。Java 也用大端写数字。我们以系统字节顺序编写它们。如果您不想将二进制数据发送到其他设备，那应该不是问题。

您可以使用实用程序切换字节顺序，`CFByteOrderUtils.h`也可以通过以下方式直接获取 Big Endian 中的数字：

```
- (NSData*)bytesFromLongLong:(long long)number {
    char buffer[8];

    for (int i = sizeof(buffer) - 1; i >= 0; i--) {
        buffer[i] = (number & 0xFF);
        number >> 8; 
    }

    return [NSData dataWithBytes:buffer length:sizeof(buffer)]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:01:26.193

```
NSLog(); 
```

上述方法将字符串和对象作为参数。作为，

`NSLog(@"Hi this is demo of string printing.");`

`NSLog(@"Hi this is integer %d",intValue);//this is like printf isnt it?`

编辑：

要么 %b，要么将其转换为 NSData 对象，然后使用 %@ 打印。Obj-c 使用 %@ 表示所有类型的对象。

```
unsigned int a = 0x000000FF;
NSLog(@"%x", a);//prints the most significant digits first 
```

# asp.net - 升级到 .NET 4.5 后，带有 Linkbutton 的 GridView OnRowCommand 的 UserControl 中的事件不会触发

> ID：13742156
> 
> 赞同：1
> 
> 时间：2012-12-06T10:59:18.663
> 
> 标签：asp.net, gridview, .net-4.5

我有一个稳定的应用程序，其中一个功能在从 .NET 4 升级到 .NET 4.5 后突然停止工作。该错误已被隔离为未触发的事件，并且已毫无疑问地确认（在 2 个服务器和 3 个工作站上），此错误仅在 .NET 4.5 升级后发生（之前没有发生）。

我有以下内容：

*   一个只包含用户控件的空 aspx（不要问）
*   用户控件包含一个在回发后加载内容的 GridView。
*   GridView 包含一个 LinkBut​​ton。
    *   文本来自评估
    *   它还有一个设置 CommandArgument 的 OnDataBinding 事件
*   GridView 包含一个 OnRowCommand。

OnRowCommand 中的事件在 .NET 4.0 中触发，在 .NET 4.5 中不触发。

有什么线索吗？

**更新**

我简化了我的代码并更接近问题的核心。我发现它是由`AllowCustomPaging="True"`GridView 引起的。删除后，回发工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:07:08.190

我简化了我的代码并更接近问题的核心。我发现它是由 GridView 上的 AllowCustomPaging="True" 引起的。删除后，回发工作正常。

# ruby - 如何就地删除数组的元素返回已删除的元素

> ID：13742157
> 
> 赞同：3
> 
> 时间：2012-12-06T10:59:26.353
> 
> 标签：ruby, arrays

我有一个数组`arr`。我想根据条件破坏性地删除元素`arr`，返回删除的元素。

```
arr = [1,2,3]  
arr.some_method{|a| a > 1} #=> [2, 3]
arr #=> [1] 
```

我的第一次尝试是`reject!`：

```
arr = [1,2,3]  
arr.reject!{|a| a > 1} 
```

但返回块和`arr`的值都是`[1]`.

我可以编写一个自定义函数，但我认为有一个明确的方法。那会是什么？

### 回答问题后更新：

`partition`方法结果对于实现哈希的这种行为也很有用。如何删除散列的元素，返回已删除的元素和修改后的散列？

```
hash = {:x => 1, :y => 2, :z => 3}
comp_hash, hash = hash.partition{|k,v| v > 1}.map{|a| Hash[a]}
comp_hash #=> {:y=>2, :z=>3}
hash #=> {:x=>1} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T11:38:32.507

我会`partition`在这里使用。它不会`self`就地修改，而是返回两个新数组。通过`arr`再次分配第二个数组，它会得到你想要的结果：

```
comp_arr, arr = arr.partition { |a| a > 1 } 
```

请参阅[partition 的文档](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-partition)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:24:48.480

所有带有尾随 bang`!`的方法都会修改接收器，并且这些方法返回结果对象似乎是一种约定，因为非 bang 这样做。
你可以做的是这样的：

```
b = (arr.dup - arr.reject!{|a| a>1 })
b # => [2,3]
arr #=> [1] 
```

这是一个[ruby​​ 样式指南](https://github.com/styleguide/ruby)的链接，其中有一个关于命名的部分 - 虽然它相当短

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T17:42:56.223

要删除（就地）返回已删除元素的数组元素，可以使用 delete 方法，根据[Array 类文档](http://www.ruby-doc.org/core-2.1.0/Array.html#method-i-delete)：

```
a = [ "a", "b", "b", "b", "c" ]
a.delete("b")                   #=> "b"
a                               #=> ["a", "c"]
a.delete("z")                   #=> nil
a.delete("z") { "not found" }   #=> "not found" 
```

它接受块，因此可以根据需要添加自定义行为

# ios - 如何让我的应用程序仅在信箱（横向）模式下在 iPhone 5 上运行？

> ID：13742160
> 
> 赞同：0
> 
> 时间：2012-12-06T10:59:32.623
> 
> 标签：ios, screen

我有一个`app(landscape mode only app)`程序`iphone 3GS to 4S`，但是当我尝试在我`iPhone5`的 中运行它时，应用程序只是向左移动。我看不到`letterbox mode`。

在我的程序中，我有很多自定义`UIView`组件以`UIViewController`编程方式添加到我的视图中，如下所示：

```
MyView *myview = [[MyView alloc] initWithFrame: CGRectMake(20, 0, 180, 300) ];
[self addSubView:myview] 
```

如何在 iPhone5 中仅以信箱模式运行，而无需更改大量代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:04:52.510

听起来您的项目包含 4 英寸启动图像 ( `Default-568h@2x.png`)。只需删除它，它应该可以解决问题。在 iPhone 5 上运行时，任何不包含此启动图像的应用程序都会在信箱模式下运行。

# java - Applet Java 截取我网页的一部分

> ID：13742164
> 
> 赞同：1
> 
> 时间：2012-12-06T10:59:47.080
> 
> 标签：java, jquery, html, web, applet

我需要问是否有办法（小程序或其他任何想法）截取网页中 div 上的内容？

我找到了这个java代码来截取全屏：

```
import java.awt.AWTException;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.Toolkit;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
public class ScreenShot
{
    /**
    method to capture screen shot
    @param String uploadPath to save screen shot as image
    @returns boolean true if capture successful else false
    */
    boolean captureScreenShot(String uploadPath)
    {
        boolean isSuccesful = false;
        Rectangle screenRect = new Rectangle(Toolkit.getDefaultToolkit().getScreenSize());
        BufferedImage capture;
        try
        {
            capture = new Robot().createScreenCapture(screenRect);
            // screen shot image will be save at given path with name "screen.jpeg"
            ImageIO.write(capture, "jpg", new File( uploadPath, "screen.jpeg"));
            isSuccesful = true;
        }
        catch (AWTException awte)
        {
            awte.printStackTrace();
            isSuccesful = false;
        }
        catch (IOException ioe)
        {
            ioe.printStackTrace();
            isSuccesful = false;
        }
        return isSuccesful;
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:07:45.880

这类似于以下问题：[Take a screenshot of a web page in Java](https://stackoverflow.com/questions/1504034/take-a-screenshot-of-a-web-page-in-java)

# windows - Kinect for Windows SDK 与 SimpleOpenNI RGB 图像质量

> ID：13742166
> 
> 赞同：1
> 
> 时间：2012-12-06T10:59:59.480
> 
> 标签：windows, kinect, processing, kinect-sdk, simple-openni

我在 Windows 上合并这些 Kinect 库：

a) Kinect for Windows SDK for Processing ( [http://www.magicandlove.com/blog/2012/09/05/kinect-for-processing-library-page/](http://www.magicandlove.com/blog/2012/09/05/kinect-for-processing-library-page/) )

b）SimpleOpenNI（[http://code.google.com/p/simple-openni/](http://code.google.com/p/simple-openni/)）

![在此处输入图像描述](../Images/16bc308c8a8a102a40d8f54e7f922347.png)

完整图片链接：http: [//i.imgur.com/mghSM.jpg](https://i.imgur.com/mghSM.jpg)

有没有人注意到这些包装器中出现的 RGB 图像的差异？SimpleOpenNI 像素化程度更高，噪音也更多。是否有可能在 SimpleOpenNI 中获得更好的图像？

感谢您的任何提示！

# android - 无法从 sqlite 数据库中获取数据

> ID：13742168
> 
> 赞同：0
> 
> 时间：2012-12-06T11:00:05.063
> 
> 标签：android, sqlite, android-sqlite

在下面给定的程序中，我在表中插入了imei_number。但是我必须检索插入的数据并以不同的方法显示它。请提前指导。谢谢

onCreate() {

```
try {
     imeiDB =  this.openOrCreateDatabase(IMEI_DB_NAME, MODE_PRIVATE, null);

     imeiDB.execSQL("CREATE TABLE IF NOT EXISTS " +
     IMEI_TABLE_NAME +" (IMEI_number_db VARCHAR);");

     imeiDB.execSQL("INSERT INTO " + IMEI_TABLE_NAME +" Values ("+IMEI_number_db+");");

     Cursor c = imeiDB.rawQuery("SELECT IMEI_number_db FROM " + IMEI_TABLE_NAME , null);

     if (c != null ) {
            if  (c.moveToFirst()) {
                do {
                     IMEI_number = c.getString(c.getColumnIndex("IMEI_number_db"));

                    }while (c.moveToNext());
            } 
     }

} catch (SQLiteException se ) {
     Log.e(getClass().getSimpleName(), "Could not create or Open the database");
} finally {
     if (imeiDB != null) 
        imeiDB.execSQL("DELETE FROM " + IMEI_TABLE_NAME);
        imeiDB.close();
}

    } 
```

/ ***** ** *** ** *** ** *** ** *** ***** /

```
fetch the data in another method

private collectdata()
    {
         String IMEI_number ="";
        Cursor c = imeiDB.rawQuery("SELECT IMEI_number_db FROM " + IMEI_TABLE_NAME , null);

        if (c != null ) {
            if  (c.moveToFirst()) {
                do {
                     IMEI_number = c.getString(c.getColumnIndexOrThrow("IMEI_number_db"));

                }while (c.moveToNext());
            } 
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:12:25.107

您在查询中搜索的唯一一列是 IMEI_number_db，因此游标只有一列。你应该改变这个：

```
IMEI_number = c.getString(c.getColumnIndex("IMEI_number_db")); 
```

为了这：

```
IMEI_number = c.getString(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:19:42.663

你也可以试试下面的代码。

```
IMEI_number = c.getString(c.getColumnIndexOrThrow("IMEI_number_db")); 
```

# iphone - 目标 c - 获取空值

> ID：13742172
> 
> 赞同：0
> 
> 时间：2012-12-06T11:00:11.217
> 
> 标签：iphone, objective-c, ios

我已经坚持了一段时间了，但是发生的事情是，当请求从 mysql 返回时，有一个空值，但是我如何检查空值是否达到了我的条件，以便我不将该值存储在数组中. 代码如下

我不断收到的错误是 -[NSNull isEqualToString:]: unrecognized and im trying to bind the array inside a tableview

```
- (void)viewDidLoad {

JobAddSiteAppDelegate *ja = (JobAddSiteAppDelegate *)[[UIApplication sharedApplication] delegate];

tempArray = [[NSMutableArray alloc] init];
NSString *strURL = [NSString stringWithFormat:@"http://www.bestitjobs.co.uk/appresults3.php", ""];
NSData *nsData = [NSData dataWithContentsOfURL:[NSURL URLWithString: strURL]];
//NSLog(@"JSON: %@", nsData);
//NSString *strResult = [[[NSString alloc] initWithData:nsData encoding:NSUTF8StringEncoding] autorelease];
//NSLog(@"Result: %@",strResult);

//NSError *e = nil;
JSONDecoder* decoder = [[JSONDecoder alloc] init];
NSDictionary* listDictionary = [nsData objectFromJSONData];
NSArray* people =[listDictionary objectForKey:@"jobs"];

for (NSDictionary *person in people) { 
    NSLog(@"people %@",people);
    if([person objectForKey:@"position"] != [NSNull class])
    { 
            NSString *position = [person objectForKey:@"position"];
            NSLog(@"position %@",position);
            [tempArray addObject: position];
    }
}
self.listData = tempArray;

[tempArray release];
[listData release];
[super viewDidLoad];

} 
```

错误

2012-12-06 12:22:11.314 JobAddSite[7718:207] 职位高级网络和系统顾问 2012-12-06 12:22:11.316 JobAddSite[7718:207] 职位 SAP Business One / SAP B1 顾问伦敦 2012-12 -06 12:22:11.317 JobAddSite[7718:207] 职位业务开发经理 - 市场领先的 IT 公司 2012-12-06 12:22:11.318 JobAddSite[7718:207] -[NSNull isEqualToString:]：无法识别的选择器发送到实例0xe565e8 2012-12-06 12:22:11.321 JobAddSite[7718:207] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[NSNull isEqualToString:]：无法识别的选择器发送到实例 0xe565e8”***首先调用堆栈抛出：（0核心基础0x00de95a9**exceptionPreprocess + 185 1 libobjc.A.dylib 0x00f3d313 objc_exception_throw + 44 2 CoreFoundation 0x00deb0bb -[NSObject(NSObject) doesNotRecognizeSelector:] + 187 3 CoreFoundation 0x00d5a966 __*转发***+ 966 4 CoreFoundation 0x00d5a522 _CF_forwarding_prep_0 + 50 5 JobAddSite 0x000024cd -[ResultViewController viewDidLoad] + 604 6 UIKit 0x00389089 -[UIViewController view] + 179 7 UIKit 0x0038aa3d -[UIViewController viewControllerForRotation] + 63 8 UIKit 0x00386988 -[UIViewController _visibleView] + 90 9 UIKit 0x0062893c -[UIClientRotationContext initWithClient:toOrientation:duration:andWindow:] + 354 10 UIKit 0x0030081e -[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:] + 954 11 UIKit 0x00588619 -[UIWindowController 转换：fromViewController:toViewController:target:didEndSelector:] + 1381 12 UIKit 0x0038d65d -[UIViewController presentModalViewController:withTransition:] + 3478 13 JobAddSite 0x0000213f -[JobAddSiteViewController 搜索] + 270 14 UIKit 0x002d94fd -[UIApplication sendAction:to:15:forEvent:] + 11 UIKit 0x00369799 -[UIControl sendAction:to:forEvent:] + 67 16 UIKit 0x0036bc2b -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 527 17 UIKit 0x0036a7d8 -[UIControl touchesEnded:withEvent:] + 458 18 UIKit 0x002fddedEvent-[ ：] + 567 19 UIKit 0x002dec37 -[UIApplication sendEvent:] + 447 20 UIKit 0x002e3f2e _UIApplicationHandleEvent + 7576 21 GraphicsServices 0x01741992 PurpleEventCallback + 1550 22 CoreFoundation 0x00dca944**CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION** + 52 23 CoreFoundation 0x00d2acf7 __CFRunLoopDoSource1 + 215 24 CoreFoundation 0x00d27f83 __CFRunLoopRun + 979 25 CoreFoundation 0x00d27840 CFRunLoopRunSpecific + 208 26 CoreFoundation 0x00d27761 CFRunLoopRunInMode + 97 27 GraphicsServices 0x017401c4 GSEventRunModal + 217 28 GraphicsServices 0x01740289 GSEventRun + 115 29 UIKit 0x002e7c93 UIApplicationMain + 1160 30 JobAddSite 0x00001dec main + 102 31 JobAddSite 0x00001d7d start + 53 ) 在抛出“NSException”实例后调用终止

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:05:25.573

试试这个：

```
if ([person objectForKey:@"position"]) {..} 
```

这是相同的，但可能更具可读性：

```
if ([person objectForKey:@"position"] != nil) {..} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:16:11.773

嗨使用以下代码。

它运作良好。

[下载支持文件](http://www.mediafire.com/?nhp0bm636jsdzdi)

```
NSMutableArray *empArray = [[NSMutableArray alloc] init];

SBJSON *parser = [[SBJSON alloc] init];

NSURLRequest *request1 = [NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.bestitjobs.co.uk/appresults3.php"]]];

NSLog(@"GGGG:%@",request1);

NSData *response1 = [NSURLConnection sendSynchronousRequest:request1 returningResponse:nil error:nil];

NSString *json_string = [[NSString alloc] initWithData:response1 encoding:NSUTF8StringEncoding];

NSDictionary *statuses = [parser objectWithString:json_string error:nil];

NSLog(@"List Dictionary:%@",statuses);
NSArray* people =[statuses objectForKey:@"jobs"];

for(NSDictionary *test in people)
{
    [empArray addObject:[test valueForKey:@"position"]];

}

NSLog(@"EMP ARRAY CATEGORY:%@",empArray); 
```

**注意：在使用 SBJSon 支持文件和导入 JSON.h 之前**

**并检查您的控制台。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:58:52.130

像这样检查条件并将值添加到数组

```
for (NSDictionary *person in people) { 
   NSLog(@"people %@",people);
   NSString *position = [person objectForKey:@"position"];
   if(position) {
      [tempArray addObject: position];
   }
} 
```

# c# - All-In-One shell 扩展代码示例下载 - CSShellExtContextMenuHandler

> ID：13742179
> 
> 赞同：1
> 
> 时间：2012-12-06T11:00:40.700
> 
> 标签：c#, .net, shell-extensions

任何人都可以提供下载现已删除的应用程序的地方，该`CSShellExtContextMenuHandler`应用程序演示了如何在 .NET 4 中构建 shell 扩展？

它曾经包含在 All-In-One 代码框架中：http:
[//1code.codeplex.com/](http://1code.codeplex.com/)

但它被微软删除了：http:
[//blogs.msdn.com/b/codefx/archive/2011/01/04/is-it-officially-supported-to-write-windows-shell-extension-using-net -4-today.aspx](http://blogs.msdn.com/b/codefx/archive/2011/01/04/is-it-officially-supported-to-write-windows-shell-extension-using-net-4-today.aspx)

但对于个人使用，它可能非常方便。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T08:50:44.220

转到[https://github.com/blak3r/openop/tree/master/CSShellExtContextMenuHandler](https://github.com/blak3r/openop/tree/master/CSShellExtContextMenuHandler)并查看 FileContextMenuExt.cs。

# scrollbar - 在 selemium2 中处理滚动条

> ID：13742180
> 
> 赞同：1
> 
> 时间：2012-12-06T11:00:43.930
> 
> 标签：scrollbar, selenium-webdriver

如何使用 selenium webdriver 和 firefox 浏览器在 div 元素中获取滚动条？我需要验证案例：当表格（位于 div 内的表格）超过 10 行时，将出现滚动条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:15:23.153

我想如果开发者是在HTML属性中发布滚动条属性，那么你就可以捕捉到，否则你将不得不与开发者讨论。之后，您可以使用 webdriver 方法获取行数

```
driver.findElements(By.xpath("XPATH expression")).size(); 
```

并使用 if 条件您可以验证滚动条。

谢谢

# c# - 如何使用 asp.net 创建文本框选定事件 - c#

> ID：13742182
> 
> 赞同：0
> 
> 时间：2012-12-06T11:00:48.367
> 
> 标签：c#, asp.net, events, textbox

我想知道如何在选择或聚焦文本框时触发事件。我的文本框是 asp.net 类型。

```
 <asp:TextBox ID="TB" runat="server"></asp:TextBox> 
```

当事件被触发时，我想用 c# 在代码隐藏中做一些事情。

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:17:39.740

我们在 asp.net 中没有任何文本框选择事件。您可以尝试使用文本框的文本更改事件，也可以尝试使用下面的 java 脚本。

```
<head runat="server">
<title></title>
<script type="text/javascript">
function RefreshUpdatePanel() {
    __doPostBack('<%= Code.ClientID %>', '');
};
</script>

         <asp:TextBox ID="Code" runat="server" onkeyup="RefreshUpdatePanel();"     AutoPostBack="true" OnTextChanged="Code_TextChanged"></asp:TextBox>
    <asp:UpdatePanel ID="Update" runat="server">
    <ContentTemplate>
        <asp:DropDownList runat="server" ID="DateList" />
        <asp:TextBox runat="server" ID="CurrentTime" ></asp:TextBox>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="Code" />
    </Triggers>
</asp:UpdatePanel> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T11:26:37.830

oki，所以我通过阅读不同页面上的文章来弄清楚。

检查链接：[http ://codingresource.blogspot.no/2010/01/how-to-use-events-like-onblur-onfocus.html](http://codingresource.blogspot.no/2010/01/how-to-use-events-like-onblur-onfocus.html)

而不是使用 onblur 我使用 onclick

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:09:25.740

它们不是asp文本框的服务器端onfocus事件，您可以按如下方式使用textchanged事件。使用ajax控件的更新面板可以避免页面刷新。

```
<asp:TextBox ID="TextBox1" runat="server" AutoPostBack="True" ontextchanged="TextBox1_TextChanged1" ></asp:TextBox>

protected void TextBox1_TextChanged2(object sender, EventArgs e)
{

} 
```

在客户端 onfocus 事件您可以通过 ajax 调用调用 ac# webmethord，如下所示

HTML 源

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $("#TextBox1").focus(function () {
                    $.ajax({
                        type: "POST",
                        url: "Default.aspx/test",
                        data: "{}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function(msg) {
                        }
                    });
                });
            });
  </script> 
```

C# 代码

```
 [WebMethod]
    public static void test()
    {

    } 
```

# javascript - 分裂导致尾端丢失

> ID：13742186
> 
> 赞同：1
> 
> 时间：2012-12-06T11:01:13.020
> 
> 标签：javascript, regex, string, split

我试图保持分裂的尾端

```
myLink = link.split(/\d/, 2)[1] 
```

但是它正在分裂的字符串

```
link = 1 some text 800 hello world 
```

会像这样分裂：

```
1,
some text 
```

我最终失去了尾端`800 hello world`。

我能做些什么来保留这些信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:06:44.050

你好，可以用

```
 myLink = link.split(/\d/)[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:07:20.420

这是因为您将 2 的限制传递给 split 函数，因此您只能在 split 数组中获得两个结果。省略 2 你会得到它们：

```
var splitArray = link.split(/\d/); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T12:45:34.610

```
var link = '1 some text 800 hello world';

var myLink = link.match(/[A-Z\s]?[a-z\s]+|[0-9]+/g);

alert(myLink); 
```

这肯定会引导你实现你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T11:05:37.127

在正则表达式中使用前瞻

```
myLink = link.split(/(?=\d+)/, 2)[1] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T11:45:57.287

```
var link = "1 some text 800 hello world";

var myLink = link.split(/\d+/,[0-9]);

alert(myLink[1]); //this will give you some text
alert(myLink[2]); //this will give you hello world 
```

# asp.net - 用于在 asp.net 上进行 netgen 指纹识别的基于 web 的 sdk

> ID：13742188
> 
> 赞同：2
> 
> 时间：2012-12-06T11:01:17.167
> 
> 标签：asp.net

我正在研究 asp.net，所以需要在 asp.net 上使用 SDK netgen 指纹识别 argent

我尝试使用以下代码，弹出窗口不会捕获指纹 uint ret1 = m_NBioAPI.Enroll(out m_FIR, null); // uint ret1 = m_NBioAPI.Capture(out m_FIR, NBioAPI.Type.TIMEOUT.DEFAULT, null); if (ret1 == BioAPI.Error.NONE) { uint ret = m_NBioAPI.GetTextFIRFromHandle(m_hNewFIR, out m_textFIR, true); }

请帮助我它非常银色

# c++ - 模板专业化和普通旧函数

> ID：13742189
> 
> 赞同：3
> 
> 时间：2012-12-06T11:01:18.183
> 
> 标签：c++, templates, specialization, partial-specialization

我只有一个简单的问题，请检查此代码：

```
template < typename A >
void foo( A a )
{ cout<<"1\n"; };

template< >
void foo<float>( float a )
{  cout<<"2\n"; }

void foo( float a )
{ cout<<"3\n"; }

int main()
{
    foo<float>( 1.0f );
} 
```

用 g++ 4.7.2 编译当然可以，但我不清楚为什么输出是“2”而不是“3”。

据我所知，非模板函数总是比模板函数更受欢迎，那么为什么称为专门的 foo 呢？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T11:04:16.437

您专门使用的是专用版本。如果你这样做了：

```
template <typename T>
void foo(T a) {
    std::cout << "1" << std::endl;
}

void foo(float a) {
    std::cout << "2" << std::endl;
}
int main(void) {
    foo(1.0f);
} 
```

比它会选择非模板版本。

# javascript - 在正则表达式中匹配第一组、第二组或两者

> ID：13742191
> 
> 赞同：5
> 
> 时间：2012-12-06T11:01:20.333
> 
> 标签：javascript, regex

我有以下正则表达式：

```
 (electric|acoustic) (guitar|drums) 
```

我需要的是匹配：

```
 electric guitar
    electric drums
    acoustic guitar
    acoustic drums
    electric 
    acoustic
    guitar 
    drums 
```

我尝试使用？在两组之后，但随后它匹配了所有内容。谢谢！

编辑：

```
<script type="text/javascript">
 var s = "electric drums";

 if(s.match('^(?:electric()|acoustic())? ?(?:guitar()|drums())?(?:\1|\2|\3|\4)$')){
    document.write("match");
 } else {
    document.write("no match"); // returns this
 }
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T11:10:27.130

一种方法是把它拼出来：

```
^((electric|acoustic) (guitar|drums)|(electric|acoustic|guitar|drums))$ 
```

或（因为您不需要捕获括号）

```
^(?:(?:electric|acoustic) (?:guitar|drums)|(?:electric|acoustic|guitar|drums))$ 
```

如果您不想重复自己，也可以使用技巧：

```
^(?:electric()|acoustic())? ?(?:guitar()|drums())?(?:\1|\2|\3|\4)$ 
```

`(?:\1|\2|\3|\4)`确保至少有一个先前的空捕获组 ( )`()`参与了比赛。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T11:12:44.317

像这样使用基于前瞻的正则表达式：

```
(?=.*?(?:electric|acoustic|guitar|drums))^(?:electric|acoustic|) ?(?:guitar|drums|)$ 
```

[**现场演示**](http://www.rubular.com/r/egHxmYpJ61)

# iphone - 将 Block 与 NSArray 的 objectAtIndex 方法一起使用

> ID：13742192
> 
> 赞同：-1
> 
> 时间：2012-12-06T11:01:20.147
> 
> 标签：iphone, objective-c, ios, xcode, objective-c-blocks

这是代码：

```
TrailLayer * layer = (TrailLayer*)[_layers objectAtIndex:(int)^{
    if (_segmentNumber < [_segmentArray count]) {
        return _segmentNumber;
    } else {
        return _segmentNumber - 1;
    }
}]; 
```

这里有什么问题？在这里，所有 _Variables 都是 IVAR。我是第一次使用 Blocks，有人可以帮我找出这个问题。它在这里给出 EXC_BAD_INSTRUCTION。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:22:49.530

试试这段代码，首先编写块来获取`index`数字，然后使用该数字从中检索值`array`

```
int (^segmentIndex)(int) = ^(int segmentNumber){
        if (segmentNumber < [_layers count]) {
            return segmentNumber;
        } else {
            return segmentNumber - 1;
        }
};

NSLog(@"Trail Layer %@", [_layers objectAtIndex:segmentIndex(_segmentNumber)]);
TrailLayer * layer = (TrailLayer*)[_layers objectAtIndex:segmentIndex(_segmentNumber)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T00:36:51.670

块是像函数一样的可运行的东西，基本上是一段可以存储、传递和稍后运行（或不运行）的代码。您想将整数传递给`objectAtIndex:`，因此传递一个块绝对没有任何意义。

您本来可以做的是*运行*该块，然后将*其结果*传递给`objectAtIndex:`. 在这种情况下，您必须运行该块：

```
TrailLayer * layer = [_layers objectAtIndex:^{
    if (_segmentNumber < [_segmentArray count]) {
        return _segmentNumber;
    } else {
        return _segmentNumber - 1;
    }
}()]; // <-- run the block 
```

然而，定义一个块（它是一个成熟的对象，并且做了很多花哨的东西）只是为了立即运行它有点愚蠢。如果您只想将一段代码用作表达式，则可以使用 GCC 和 LLVM 都支持的“语句表达式”语言扩展：

```
TrailLayer * layer = [_layers objectAtIndex:({
    int result;
    if (_segmentNumber < [_segmentArray count]) {
        result = _segmentNumber;
    } else {
        result = _segmentNumber - 1;
    }
    result;
})]; 
```

但实际上，在这种情况下你应该只做一个常规的 C 条件表达式：

```
TrailLayer * layer = [_layers objectAtIndex:
                      _segmentNumber < [_segmentArray count] ?
                      _segmentNumber : _segmentNumber - 1]; 
```

# compression - 如何在没有开销的情况下压缩 ascii 文本

> ID：13742197
> 
> 赞同：1
> 
> 时间：2012-12-06T11:01:30.527
> 
> 标签：compression, zip, gzip, rar

我想压缩小文本（400 字节）并在另一边解压缩。如果我使用 rar 或 zip 之类的标准压缩器来执行此操作，它会将元数据与压缩文件一起写入，并且它比文件本身更大。

有没有办法在没有此元数据的情况下压缩文件并使用已知的提前参数在另一侧打开它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:59:19.177

您可以使用[zlib](http://zlib.net/)进行原始 deflate 压缩。这甚至避免了 zlib 格式的六字节标头和尾标。

但是，您会发现仅使用 400 字节的输入，您仍然不会获得太多压缩（如果有的话）。压缩算法需要比滚动更多的历史，以便建立统计数据并在数据中找到冗余。

您应该考虑使用字典方法，在其中构建代表字符串的字典以提供压缩器可以使用的东西，或者您可以考虑将这些 400 字节字符串的序列作为单个流解压缩为另外一端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:07:05.707

您可以使用 Huffman 代码查看压缩。作为一个例子看[这里](https://stackoverflow.com/questions/6576507/how-to-use-huffman-code-for-compress-file)和[这里](http://en.wikipedia.org/wiki/Huffman_coding)。

# java - Jaxb 简化插件

> ID：13742199
> 
> 赞同：1
> 
> 时间：2012-12-06T11:01:38.377
> 
> 标签：java, jaxb, jaxb2-basics, jaxb2-simplify-plugin

我尝试使用[简化插件](http://confluence.highsource.org/display/J2B/Simplify+Plugin)来简化生成的代码。我有一个定义的类型：

```
<xsd:complexType name="typeWithReferencesProperty">
        <xsd:choice maxOccurs="unbounded">
        <xsd:annotation>
                <xsd:appinfo>
                    <simplify:as-element-property/>
                </xsd:appinfo>
            </xsd:annotation>
            <xsd:element name="a" type="AttributeValueIntegerType"/>
            <xsd:element name="b" type="AttributeValueIntegerType"/>
        </xsd:choice> 
    </xsd:complexType> 
```

但它不起作用，因为它会导致以下错误：

```
compiler was unable to honor this as-element-property customization. It is attached to a wrong place, or its inconsistent with other bindings. 
```

我完全使用了配置，我还有其他可以工作的 jaxb 插件，所以我不太确定，如果插件坏了还是什么？有没有人设法让它运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:15:59.007

注解应该在元素标签下，让编译器明白它是针对那个特定元素的。

尝试以下方法并告诉我它是否有效。

```
<xs:complexType name="typeWithReferencesProperty">
    <xs:choice maxOccurs="unbounded">
        <xs:element name="a" type="someType">
            <xs:annotation>
                <xs:appinfo>
                    <simplify:as-element-property/>
                </xs:appinfo>
            </xs:annotation>
        </xs:element>
        <xs:element name="b" type="someType">
                              <xs:annotation>
                <xs:appinfo>
                    <simplify:as-element-property/>
                </xs:appinfo>
            </xs:annotation>
    </xs:choice> 
</xs:complexType> 
```

# path-manipulation - 如何防止 C# 中的路径操作问题

> ID：13742218
> 
> 赞同：1
> 
> 时间：2012-12-06T11:02:40.830
> 
> 标签：path-manipulation

如何防止 C# 中的路径操作问题对于以下语句出现错误。

前任：

文件.存在（）

文件.创建（）

文件.删除（）

File.OpenRead()

文件.OpenWrite() 。

# regex - Perl 条件替换

> ID：13742219
> 
> 赞同：2
> 
> 时间：2012-12-06T11:02:44.117
> 
> 标签：regex, perl, substitution

我有一个带有占位符的路径名，我想替换它：

```
# an example path with a placeholder
my $path = '%myproject%Web/ui/images/';

# mapping of all placeholders   
my %placeholders = (
  myproject => 'myproject/installation/all'
);

# substituting all placeholders in the path
$path =~ s!%(.*?)%!/$placeholders{$1}/!g;

# works fine -> 'myproject/installation/all/Web/ui/images/'
print $path; 
```

这段代码工作正常，但有一个问题：我有一长串文件名和指定的不同占位符（因此是哈希）。`%placeholders`现在，为了更加稳健，如果路径中指定的占位符在映射中不存在，我想抛出一个错误。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T11:08:04.890

> 现在为了更加健壮，如果路径中指定的占位符在 %placeholders 映射中不存在，我想抛出一个错误

这可以很容易地使用`/e`：

```
$path =~ s{%([^%]+)%}{
   exists($path{$1})
      ? '/'.$path{$1}.'/'
      : die "Placeholder $1 does not exist"
}ge; 
```

注意：我认为最好替换`.*?`为`[^%]+`以防止不正确的匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:12:48.703

Using`given`允许这样做，但它比如果声明修饰符形式 of`given`可用的话要长得多。

```
use v5.10;;
use warnings;

my $path = '%myproject%Web/ui/images/'; 

my %placeholders = (
  myproject => 'myproject/installation/all'
);

$path =~ s!%(\w+)%!given ($placeholders{$1} // die qq(Invalid placeholder "$1")) { "/$_/" }!ge;

print $path; 
```

# javascript - 如何在开始新请求之前中止 xmlhttprequest？

> ID：13742225
> 
> 赞同：0
> 
> 时间：2012-12-06T11:03:01.600
> 
> 标签：javascript, ajax, web-applications, xmlhttprequest

我得到了一个 cgi 脚本，它根据它提交的查询字符串执行搜索。这一切都很好。但是由于搜索可能需要一些时间，并且用户可能会开始另一个搜索。我希望在开始第二次搜索之前中止第一次搜索，但是如果我`xmlhttp.abort()`在 AJAXRequest 函数的开头插入 a ，则 cgi 脚本根本不会启动。谁能告诉我如何执行此操作？

提前致谢！

这是 AJAX 代码片段

```
var xmlhttp;
function AJAXRequest()
{

   if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
   window.document.getElementById("resultlist").innerHTML=xmlhttp.responseText;
}
}
var queryString= "from=03-01-2006&to=04-30-2006&pattern=345";
xmlhttp.open("POST","../cgi-bin/search.exe?"+queryString);
xmlhttp.send();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:08:59.677

是的，[`XMLHttpRequest.abort()`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#abort%28%29)是用于 AJAX 请求中止的正确方法。在我看来，您的问题更多的是设计问题，而不是技术问题。因此，我的建议是查看用户如何与您的应用程序交互的流程。例如，经典的解决方案是在您的请求未完成时显示进度条或微调器并禁用“搜索”按钮，并在成功或错误时恢复此状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:22:22.007

我发现了我的问题。我试图中止刚刚创建的请求对象。该对象必须是全局的。至少这是我看到如何实现这一目标的唯一方法。

# ios - 如何在 iOS 中实现这种布局？

> ID：13742235
> 
> 赞同：0
> 
> 时间：2012-12-06T11:03:46.493
> 
> 标签：ios, uitextfield, uilabel

我正在尝试实现与此类似的布局： [![想要的布局](../Images/05ad188dfb64a5fac5c84937a8523ee5.png)](https://i.stack.imgur.com/ew4XC.png)

我对如何实现这一点感到困惑。iOS 6 中的新功能、容器单元格和自动布局，或许应该有所帮助，但我在其中看到的应用程序已经很老了，他们在没有这些新功能的情况下实现了这些。我想要实现的是一个标签、一个文本字段，然后是另一个标签，它可能有足够长的文本，以至于它必须换行到下一行，就像我附加的图像中一样。实现此目的的一种可能方法是放置一个带有两行的标签，并放置例如重复的下划线字符，然后以某种方式测量下划线开始和结束的位置并覆盖该区域的文本字段。但这很困难，而且看起来很麻烦。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:11:19.070

这将不是最佳解决方案。

但我认为这可以在自动布局的帮助下轻松实现。

首先在自定义单元格的右侧放置一个标签，然后在该单元格的右侧放置一个文本字段，然后在该单元格的右侧再次放置一个标签。

**标签 --> 文本框 --> 标签**

在这里，第一个标签应该在你需要填充剩余部分的另一个标签上的 textField (How) 之前填充单词。

并使用第一个和最后一个标签设置文本字段的相对位置。因此，如果第一个标签内容更大，它将移动到右侧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:29:21.830

我实际上认为您的下划线想法并不完全是一个糟糕的想法，并且可能没有您想象的那么难。

可能有更简洁（虽然可能更慢）的方法来做到这一点，但最简单的方法是在你的字符串中设置一个分隔符，你可以使用它来将字符串分成如下组件：

为什么 ^________^ 你今天早上上班迟到了？

从这里，`[[myString componentsSeparatedByString:@"^"] objectAtIndex:1];`会给你你的下划线。

下一步是获取尺寸，像这样`[underscoreString sizeWithFont:[UIFont fontWithName:@"<your font>" size:<your size>]];`

现在你有了下划线字符串的大小，你可以用它来覆盖你的 UITextField。请务必考虑下划线字符串中定界符的宽度，附加它们或相应地调整 UITextField 的宽度。请记住，这里还有其他事情需要考虑（例如，如果下划线字符串换行会发生什么），但希望这能回答您的直接问题。

# windows-phone-7 - 尝试在 WP8 中运行 WP7 芒果应用程序时未加载设计器

> ID：13742237
> 
> 赞同：0
> 
> 时间：2012-12-06T11:03:49.877
> 
> 标签：windows-phone-7, visual-studio-2012, designer, windows-phone-8

我有一个已发布的 Windows Phone 7.5（Mango 应用程序）。由于 windows phone 8 工具可用，我尝试在 Microsoft Visual Studio Express 2012 for Windows Phone 中运行该项目。该应用程序在所有模拟器和 Windows Phone 7 设备中运行。我面临的问题是没有显示设计器，可以看到xaml文件但没有显示UI。

而是显示一个错误说`System.NullReferenceException`

`Object reference not set to an instance of an object. at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.WaitForCompletion(NestedCallContext nestedCallContext, BlockingCall call, WaitHandle timeoutSignal)`

但它显示在 Blend for Visual Studio 中。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:54:19.340

显然，这个问题一直在微软[论坛](http://social.msdn.microsoft.com/Forums/en-US/wptools/thread/7398ad5e-c2fc-40a8-85e7-37e6a6cca834)中引起关注。那里提到的解决方案很少，包括卸载和重新安装win WP8 SDK。

我没有做这些，我检查了 Visual Studio 的更新并找到了一个。安装花了一些时间，但它确实解决了设计师的问题！:D

# sonarqube - 声纳自定义报告

> ID：13742243
> 
> 赞同：1
> 
> 时间：2012-12-06T11:04:19.433
> 
> 标签：sonarqube

我需要使用 Sonar sql server 数据库数据生成自定义报告。数据库的结构让我很困惑。如何获得项目的以下详细信息？LoC（代码行） 规则合规性 % 评论 % 公开记录的 API % 安全违规 违规（不包括信息） 重复行 %

一旦我得到这些细节，我该如何组织我的报告，因为根数据有很多孩子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:24:12.330

我不建议直接请求数据库，因为它不被视为 API。它随着时间的推移而深入发展。

目前有两个生成 PDF 的报告插件：

*   [http://docs.codehaus.org/display/SONAR/Sonar+PDF+Plugin](http://docs.codehaus.org/display/SONAR/Sonar+PDF+Plugin)（开源+商业版）
*   [http://www.sonarsource.com/products/plugins/reporting/report/](http://www.sonarsource.com/products/plugins/reporting/report/)（商业）

如果您想生成自己的报告，那么您应该实现插件或从专用应用程序请求 Web 服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:45:13.440

我认为您可能真的想使用 Web 服务来提取数据，而不是从数据库中读取。有关文档，请参阅[http://docs.codehaus.org/display/SONAR/Web+Services](http://docs.codehaus.org/display/SONAR/Web+Services)。

# php - PHP电子邮件脚本不起作用

> ID：13742244
> 
> 赞同：0
> 
> 时间：2012-12-06T11:04:19.797
> 
> 标签：php, html

我有一个 php 电子邮件脚本，它曾与以前使用过的网站一起使用，但我已将其移至重新设计的网站，当我点击提交时，页面会在 url 中使用以下附加文本重新加载：

> ?name=Lee+Thomas&email=leethomas%40corwenforestry.co.uk&message=message&Submit=发送

这是contact.html页面中的表格：

```
<form name="contact" method="post" action="sendmail.php">
 <table border="0" align="center" cellpadding="0" cellspacing="1">
  <tr>
   <td>
    <input name="name" placeholder="Name" type="text" id="name" size="50">
   </td>
  </tr>
  <tr>
   <td>
    <input name="email" placeholder="Email" type="text" id="email" size="50">
   </td>
  </tr>
  <tr>
   <td>
    <textarea name="message" placeholder="Message" cols="50" rows="4" id="message">
    </textarea>
   </td>
  </tr>
  <tr>
   <td>
     <input type="submit" name="Submit" value="Send"> <input type="reset" name="Reset" value="Reset">
   </td>
  </tr>
 </table>
</form> 
```

这是 sendmail.php 脚本：

```
<?php
if(isset($_POST['email'])) {
    // EDIT THE 2 LINES BELOW AS REQUIRED
    $email_to = "number8pie@gmail.com";
    $email_subject = "CFR F3 Contact Form";

    function died($error) {
        // your error code can go here
        echo "We are very sorry, but there were error(s) found with the form you submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['name']) ||
        !isset($_POST['email']) ||
        !isset($_POST['message'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');       
    }

    $name = $_POST['name']; // required
    $email_from = $_POST['email']; // required
    $message = $_POST['message']; // required

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
$string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$name)) {
    $error_message .= 'The Name you entered does not appear to be valid.<br />';
  }
  }
  if(strlen($message) < 2) {
    $error_message .= 'The Message you entered do not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "Name: ".clean_string($name)."\n";
    $email_message .= "Email: ".clean_string($email_from)."\n";
    $email_message .= "Message: ".clean_string($message)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  
?>

Thank you for contacting CF Racing F3, we will be in touch with you very soon.

<?php
?> 
```

谁能告诉我这里哪里出错了？

[编辑] 下面块引号中的问题现已解决，重置按钮正是这样做的。

> 我遇到的另一个问题是重置按钮充当另一个提交/发送按钮，有没有办法让提交/发送按钮充当那个按钮？

在此先感谢您的帮助。

[编辑] 更改了 html 以删除多余的表单标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:06:01.900

`<form>`删除一个流浪`<form>`标签后有拖曳标签尝试

用这个

```
 <form name="contact" method="post" action="sendmail.php">
   <table border="0" align="center" cellpadding="0" cellspacing="1"> 
```

代替

```
<form>
 <table border="0" align="center" cellpadding="0" cellspacing="1">
  <form name="contact" method="post" action="sendmail.php"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:08:37.963

删除顶部`<form>`标签，您有重复

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:09:45.780

尝试删除第一个表单标签：

```
**<form>**
<table border="0" align="center" cellpadding="0" cellspacing="1">
<form name="contact" method="post" action="sendmail.php"> 
```

# c# - 在 C# 中使用 Process 无法运行 SoX

> ID：13742252
> 
> 赞同：1
> 
> 时间：2012-12-06T11:04:49.717
> 
> 标签：c#, processstartinfo

我正在尝试使用[SoX将 MP3 文件转换为 GSM 编码的 WAV](http://sox.sourceforge.net)

执行此操作的 C# 代码是：

```
Console.WriteLine(Cfg.SoxPath); // bin/sox.exe
Console.WriteLine(args); // A rather long argument
var startInfo = new ProcessStartInfo();
startInfo.FileName = Cfg.SoxPath;
startInfo.Arguments = args;
startInfo.WindowStyle = ProcessWindowStyle.Hidden;
startInfo.UseShellExecute = false;
startInfo.CreateNoWindow = false;

using (Process soxProc = Process.Start(startInfo))
{
    soxProc.WaitForExit();
} 
```

代码的输出是：

```
bin\sox.exe  
"D:\VoiceRecorder Soundfiles Storage\MP3 Storage\2012-12-05\227\1\20121205_203436_2103c60a0000134850bfa1bd2c99_8075598.mp3" -c 1 -r 8000 -e gsm-full-rate "temp\227_20120901\SW120006_349990195665213_040154700_20121205203436_20.wav"  
bin\sox.exe FAIL formats: can't open input file `8000': No such file or directory 
```

*是什么导致命令失败？*

**需要考虑的事项**

*   直接从 cmd 提示符执行时，该命令运行完美
*   参数 ( `-c 1 -r 8000 -e gsm-full-rate`) 从 sql server 获取
*   对参数的微小更改（例如替换`-e`为`--encoding`）可能会更改错误消息
*   尝试过 .NET 3.0 和 4.0
*   错误消息甚至包含不属于参数的字符 ( `can't open input file 'ûg'`)
*   相同的参数总是导致相同的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:16:50.430

我将“介于两者之间”的参数更改为：

```
-r 8k -e gsm-full-rate -c 1 
```

即使它是相同的论点，它也开始工作，只是稍微改变了一点。
我仍然不知道为什么它不能在 .NET 中工作，而只能在这些编辑之前的命令行中工作。

但现在它起作用了。

# exchange-server - Exchange Server 将每日重复模式更改为每周？

> ID：13742255
> 
> 赞同：2
> 
> 时间：2012-12-06T11:05:02.417
> 
> 标签：exchange-server, exchangewebservices, exchange-server-2010

我在 Outlook 2003 SP3 中注册了一个约会，重复模式每天，每个工作日，没有结束日期。
数据存储在 MS Exchange Server 2010 中。
如果我查询 Exchange Web 服务以获取该事件（一些详细信息），它会返回每周一的*每周*事件..星期五：

```
<Recurrence>
  <WeeklyRecurrence>
    <Interval>1</Interval>
    <DaysOfWeek>Monday Tuesday Wednesday Thursday Friday</DaysOfWeek>
  </WeeklyRecurrence>
  <NoEndRecurrence>
    <StartDate>2012-12-03+01:00</StartDate>
  </NoEndRecurrence>
</Recurrence> 
```

从技术上讲，这些是同一天，但我将其存储在另一个系统中，并希望 Outlook 每日约会也显示为每日约会；-)

这是一个已知的问题？
有什么办法可以防止这种情况发生吗？
[我自己不能将“每周周一至周五”转换回“每天每个工作日”，因为这会修改“真正的”“每周周一至周五”约会]

谢谢
简

完整请求：

```
<soapenv:Envelope
  xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:typ="http://schemas.microsoft.com/exchange/services/2006/types"
  xmlns:mes="http://schemas.microsoft.com/exchange/services/2006/messages">
<soapenv:Header>
  <typ:RequestServerVersion Version="Exchange2007_SP1"/>
  <typ:MailboxCulture>en-US</typ:MailboxCulture>
</soapenv:Header>
<soapenv:Body>
      <mes:GetItem>
         <mes:ItemShape>
            <typ:BaseShape>IdOnly</typ:BaseShape>
            <typ:BodyType>Text</typ:BodyType>
            <typ:AdditionalProperties>
              <typ:FieldURI FieldURI="item:Subject" />
              <typ:FieldURI FieldURI="item:ReminderIsSet" />
              <typ:FieldURI FieldURI="item:ReminderMinutesBeforeStart" />
              <typ:FieldURI FieldURI="calendar:Location" />
              <typ:FieldURI FieldURI="calendar:IsAllDayEvent" />
              <typ:FieldURI FieldURI="calendar:LegacyFreeBusyStatus" />
              <typ:FieldURI FieldURI="calendar:Recurrence" />
              <typ:FieldURI FieldURI="item:Body"/>
            </typ:AdditionalProperties>
         </mes:ItemShape>
         <mes:ItemIds>
            <typ:ItemId Id="AQMkAD[snip]2HQAAAA=="/>
         </mes:ItemIds>
      </mes:GetItem>
</soapenv:Body>
</soapenv:Envelope> 
```

完整回复：

```
<Envelope>
  <Header>
    <ServerVersionInfo MajorVersion="14" MinorVersion="0" MajorBuildNumber="722" MinorBuildNumber="0" Version="Exchange2010"/>
  </Header>
  <Body>
    <GetItemResponse>
      <ResponseMessages>
        <GetItemResponseMessage ResponseClass="Success">
          <ResponseCode>NoError</ResponseCode>
          <Items>
            <CalendarItem>
              <ItemId Id="AQMkAD[snip]2HQAAAA==" ChangeKey="DwAAA[snip]ns8Yn"/>
              <Subject>Elke werkdag, geen einddatum</Subject>
              <Body BodyType="Text"/>
              <ReminderIsSet>false</ReminderIsSet>
              <ReminderMinutesBeforeStart>15</ReminderMinutesBeforeStart>
              <IsAllDayEvent>false</IsAllDayEvent>
              <LegacyFreeBusyStatus>Busy</LegacyFreeBusyStatus>
              <Location/>
              <Recurrence>
                <WeeklyRecurrence>
                  <Interval>1</Interval>
                  <DaysOfWeek>Monday Tuesday Wednesday Thursday Friday</DaysOfWeek>
                </WeeklyRecurrence>
                <NoEndRecurrence>
                  <StartDate>2012-12-03+01:00</StartDate>
                </NoEndRecurrence>
              </Recurrence>
            </CalendarItem>
          </Items>
        </GetItemResponseMessage>
      </ResponseMessages>
    </GetItemResponse>
  </Body>
</Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:23:36.363

经过一个小时的挖掘，我在微软论坛上发现了[“每日和每周重复模式问题”](http://social.technet.microsoft.com/Forums/en-US/exchangesvrdevelopmentlegacy/thread/1ba5d635-2533-4270-bc07-92d6d0e324ef)，指出这是不可能的：

“在 EWS 中为“每个工作日”定义重复模式的唯一方法是使用 WeeklyRecurrencePatternType。DailyPatternType 只能用于定义重复发生，其中每次发生都发生在前一次之后的 N 天。
换句话说，没有办法在 EWS 中区分两者。”

# .net - 如何在特定监视器上的特定位置打开 WPF 应用程序

> ID：13742259
> 
> 赞同：1
> 
> 时间：2012-12-06T11:05:27.660
> 
> 标签：.net, wpf, multiple-monitors

我有两个一起通信的应用程序，更具体地说，我有 app1.exe 和 app2.exe 这两个应用程序位于同一台 PC 中，该 PC 有一台显示器和一台电视我如何在电视上打开 app1.exe 而在我的监视器。实际上，为此我使用了一个名为**Actual Multiple Monitors**的第三方工具。我的目标是删除此工具，因为我仅将其用于在正确位置打开我的应用程序的功能。如果有可能使用代码来做到这一点，那就太好了。我在**Visual Studio 2010**中使用 WPF吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:35:59.090

以下假设您拥有应用程序的源代码：

你需要做几件事：

首先使用 System.Windows.Forms.Screen() 枚举您的屏幕。

屏幕[] allScreens = Screen.AllScreens;

然后您可以使用 Screen.Bounds 属性来确定在哪里显示您的主窗口。

我不知道您如何更改 WPF 中主窗口的位置 - 在 Windows 窗体中，您只需覆盖 OnLoad() 并适当地设置 Form.Location 和 Form.Size。我想 WPF 有类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T12:04:20.183

如果 Matthew Watson 的回答不起作用，您的窗口可能处于 Maxmized 状态。在这种情况下，将其状态设置为 WindowState.Normal，更改顶部/左侧并恢复 WindowState。

# ruby - 对 Rack/Sinatra 错误响应的 CORS 支持？

> ID：13742260
> 
> 赞同：0
> 
> 时间：2012-12-06T11:05:30.550
> 
> 标签：ruby, rack, cors

我正在 Sinatra 中编写 Web 服务。我使用中间件来添加简单、愚蠢的 CORS 支持（通过简单地`Access-Control-Allow-Origin=*`向所有请求发送垃圾邮件）。我知道有一个具有更强大支持的 gem，但这用 3 行代码就可以满足我的要求。除了...

除了如果`@app.call env`引发异常，我永远没有机会修改标题。异常一直冒泡到`Rack::ShowExceptions`，我找不到将额外的标头注入其响应的方法。

我必须停止使用`Rack::ShowExceptions`吗？我必须对其进行mokeypatch吗？我是否应该将*更多*中间件放在堆栈的下方，以捕获非 CORS 感知错误消息并添加它们？我不确定我知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:35:19.043

结果我猜对了：我只需要确保那`use DumbCorsSupport`是之前`use Rack::ShowExceptions`的。不过值得注意的是，至少在我使用的浏览器中，如果您的 500 页面没有提供与其他服务相同的 CORS 标头，则不会触发您的客户端错误回调！

# jquery - 将更多淘汰视图模型绑定到 1 个视图

> ID：13742262
> 
> 赞同：1
> 
> 时间：2012-12-06T11:05:33.550
> 
> 标签：jquery, knockout.js, navigation

我已经制作了几个淘汰赛 ViewModel，现在我正试图将它们绑定到一个 ViewModel，但这不能正常工作！

它应该像导航一样工作。如果 LoginModel 完成，它应该跳到 start Model！

我不知道这是怎么做到的

这该怎么做？

```
<!-- Login Seite -->
<form data-bind="visible: userNotLoggedIn" action="" data-role="page" id="Login">

    //Some code

</form>
<!-- ----------------------------------  -->

<!-- Start Seite -->

<form data-bind="visible: showStart" action="" data-role="page" id="pageStart">

   //Some Code

</form>

<!-- --------------------------------------------------------------------- -->

<!-- Projekt Details-->
<form data-bind="visible: showDetails" action="" data-role="page" id="pageDetails">

   // SOME CODE

</form>
</body>
<script type="text/javascript">
    $('#Login').live('pageinit', function (event) {
        ko.applyBindings(new LoginViewModel(), document.getElementById('Login'));
    });

    $('#pageStart').live('pageinit', function (event) {
    alert("Hallo");
        ko.applyBindings(new StartViewModel(), document.getElementById('pageStart'));
    });

    $('#pageDetails').live('pageinit', function (event) {
        alert("Hallo");
        ko.applyBindings(new DetailsViewModel(),document.getElementById('pageDetails'));
    });

</script>
Javascript for Knockout ViewModels:

function LoginViewModel() { //Some Code }

function StartViewModel() { //Some Code }

function DetailsViewModel() { //Some Code} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:45:46.700

如果我正确理解了您的问题，您正在尝试将页面拆分为三个可互换的视图模型 - 登录、开始、详细信息。

这可以通过将它们分组到一个主视图模型中轻松完成。并将每个部分放在匿名模板中（或剔除“if”评论块）。

```
var masterViewModel = {
    loginVM: ko.observable(),
    detailsVM: ko.observable()
};

var LoginVM = function () {
    this.showDetails = function () {
        masterViewModel.loginVM(null);
        masterViewModel.detailsVM(new DetailsVM());
    };
};

var DetailsVM = function () {
    this.showLogin = function () {
        masterViewModel.loginVM(new LoginVM());
        masterViewModel.detailsVM(null);
    };
};

masterViewModel.loginVM(new LoginVM()); 

ko.applyBindings(masterViewModel);​

<!-- ko template: { 'if': loginVM, data: loginVM } -->  
    <h1>This is the login</h1>  
    <button data-bind="click: showDetails">Show Details</button>  
<!-- /ko -->

<!-- ko template: { 'if': detailsVM, data: detailsVM } -->  
    <h1>These are the details</h1>  
    <button data-bind="click: showLogin">Show Login</button>  
<!-- /ko --> 
```

这是 jsfiddle 中的完整示例 - [http://jsfiddle.net/angelyordanov/edT79/](http://jsfiddle.net/angelyordanov/edT79/)。

# python - SciPy NumPy 和 SciKit-learn ，创建一个稀疏矩阵

> ID：13742266
> 
> 赞同：7
> 
> 时间：2012-12-06T11:05:44.180
> 
> 标签：python, matrix, numpy, scipy, scikit-learn

我目前正在尝试对文本进行分类。我的数据集太大，正如[这里](https://stackoverflow.com/questions/13741460/text-classification-with-scikit-learn-and-a-large-dataset/13741595#13741595)所建议的，我需要使用稀疏矩阵。我现在的问题是，将元素添加到稀疏矩阵的正确方法是什么？例如，假设我有一个矩阵 X 这是我的输入。

```
X = np.random.randint(2, size=(6, 100)) 
```

现在这个矩阵 X 看起来像一个 ndarray 的 ndarray （或类似的东西）。

如果我做

```
X2 = csr_matrix(X) 
```

我有稀疏矩阵，但是如何向稀疏矩阵添加另一个元素？例如这个密集元素： [1,0,0,0,1,1,1,0,...,0,1,0] 到稀疏向量，如何将它添加到稀疏输入矩阵？

（顺便说一句，我对 python、scipy、numpy、scikit ......一切都很陌生）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-06T11:14:09.073

Scikit-learn 有一个很棒的文档，里面有很棒的教程，在尝试自己发明它之前，你真的*应该阅读它们。*[这](https://scikit-learn.org/0.19/tutorial/text_analytics/working_with_text_data.html)是第一个阅读它的文章，它逐步解释了如何对文本进行分类，[这](https://scikit-learn.org/0.19/auto_examples/text/document_classification_20newsgroups.html)是使用稀疏表示进行文本分类的详细示例。

[在本](http://scikit-learn.org/dev/tutorial/text_analytics/working_with_text_data.html#bags-of-words)节中，请特别注意他们谈论稀疏表示的部分。一般来说，如果你想使用带线性内核的 svm 并且数据量很大，LinearSVC（基于 Liblinear）会更好。

关于你的问题 - 我确信有很多方法可以连接两个稀疏矩阵（顺便说一句，这是你应该在谷歌中寻找的其他方法），这是一个，但你必须从 csr_matrix 转换为`coo_matrix`这是稀疏矩阵的另一种类型：[是否有连接 scipy.sparse 矩阵的有效方法？](https://stackoverflow.com/questions/6844998/is-there-an-efficient-way-of-concatenating-scipy-sparse-matrices).

**编辑：**当连接两个矩阵（或一个矩阵和一个数组，它是一个 1 维矩阵）时，一般的想法是连接`X1.data`并`X2.data`操纵它们的`indices`and `indptr`s（或`row`在s`col`的情况下`coo_matrix`）指向正确的位置。一些稀疏表示对于特定操作更好，而对于其他操作更复杂，您应该阅读`csr_matrix`并查看这是否是最佳表示。但我真的敦促你从我上面发布的那些教程开始。

# bash - 如何从另一个点捕获标准输出？

> ID：13742270
> 
> 赞同：1
> 
> 时间：2012-12-06T11:05:58.120
> 
> 标签：bash, shell, terminal, stdout, pts

我说过两个终端会话 pts/10 和 pts/11。在 pts/10 中，我想捕获发生在 pts/11 中的任何进程的标准输出并将其重定向到文件。我知道输出可以从 pts/11 本身重定向（使用 >/dev/pts/10），但我不想这样做。正如我所说，我想“捕获”pts/11 在标准输出中打印的任何内容。有一些实用程序可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:34:39.787

我不认为，您可以这样做，除非您在 pts/11 上启动某些东西（输出重定向，或 tee /dev/pts/10 或`script`命令。）

如果可能的话，它基本上可以用于黑客/窥探。想象一下在终端 pts/11 上运行命令并被 pts/10 捕获的
情况下获取密码。`wget --user=someuser --password=plain_text_password`（编辑：好的，那是标准输入，而不是标准输出。）但如果可能的话，可能存在严重的安全问题。

# database - 有哪些方法可以实现大型 DB 驱动数据的本地缓存？

> ID：13742276
> 
> 赞同：1
> 
> 时间：2012-12-06T11:06:22.427
> 
> 标签：database, caching, replication, time-series, distributed-caching

我公司维护着多个大型的过程数据时间序列数据库。我们在伪中心位置实现子集的副本。我从笔记本电脑访问数据。通过我们的内部 WAN 甚至对伪中央服务器的数据访问都相当昂贵（时间）。

我想在我的笔记本电脑上本地缓存数据请求，这样当我第二次访问它时，我实际上是从本地数据库中提取数据的。

我可以包装一个相当丑陋的客户端 DAO 来维护缓存，但我不确定如何让“官方”客户端应用程序轻松地与缓存通信。我可以自由地编写自己的“客户端”绘图/绘图系统，并且已经拥有一个自定义应用程序，该应用程序已经实现了一些数据挖掘。自定义应用程序将数据转储到 .csv 文件中，这些文件是在非常临时的基础上手动移动的。

这种缓存/同步的最佳方法是什么？什么工具可以实现缓存？

有关更多信息，我估计原始数据集每年大约有 5-8Tb 的原始时间序列数据，其中至少有一半的数据非常可压缩。我只想在本地缓存几百 Mb。当对数据进行临时查询时，它往往会在非常小的数据块上非常重复。

# windows - Storport 微型端口驱动程序

> ID：13742283
> 
> 赞同：0
> 
> 时间：2012-12-06T11:06:45.813
> 
> 标签：windows, winapi, driver

storport 驱动程序堆栈显示流程如下。SStorage 类驱动程序 -> 存储过滤器驱动程序 -> 存储端口驱动程序 -> 存储 MNiport 驱动程序

这种层次结构如何应用于 storport 驱动程序。

1.  存储端口和存储微型端口可以在同一个 sys 文件中实现吗？
2.  为存储控制器设计 Storport 或 scsi 端口哪个更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:30:23.633

1.  是的，但是这样做，您拒绝了端口模型。
2.  Storport 被设计为 scsiport 的高性能替代品。

# android - AChartEngine 作为视图不显示

> ID：13742284
> 
> 赞同：2
> 
> 时间：2012-12-06T11:06:47.080
> 
> 标签：android, android-layout, achartengine

我有一个实时图表。我将它作为视图添加到 Linealayout。但是当应用程序运行时我看不到它。这是我的代码：

```
view = ChartFactory.getTimeChartView(this, dataset, renderer, "Live View");
view.refreshDrawableState();
view.repaint();

linearLayout = (LinearLayout) findViewById(R.id.LinearLayout1);
linearLayout.addView(view, 0, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:47:22.537

图表视图的布局参数可能是错误的。我建议你使用`FILL_PARENT`宽度和`WRAP_CONTENT`高度。

# go - 在 Go 中，是否可以对函数的多个返回值执行类型转换？

> ID：13742285
> 
> 赞同：1
> 
> 时间：2012-12-06T11:06:51.323
> 
> 标签：go

```
type Node int
node, err := strconv.Atoi(num)

Foo(Node(node))  // Foo takes a Node, not an int 
```

是否可以避免上面示例中丑陋的“节点（节点）”？有没有更惯用的方法来强制编译器将 node 视为 Node 而不是 int？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:19:11.080

没有什么真正优雅的。您可以定义一个中间变量

```
n, err := strconv.Atoi(num)
node := Node(n) 
```

或者你可以定义一个包装函数

```
func parseNode(s string) Node {
    n, err := strconv.Atoi(num)
    return Node(n)
} 
```

但我不认为有任何单线技巧。你这样做的方式似乎很好。在 Go 中，这里和那里仍然有一点口吃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:20:10.473

不会。转换转换（可转换的）表达式。如果函数只有一个返回值，则函数的返回值是一个术语（因此可能是一个可转换的表达式）。可以在[此处](http://golang.org/ref/spec#Conversions)找到对符合转换条件的表达式的其他限制。

# web-services - 如何扩展 CustCustomerService 和 SalesLineService 标准服务？

> ID：13742288
> 
> 赞同：2
> 
> 时间：2012-12-06T11:07:10.303
> 
> 标签：web-services, axapta, dynamics-ax-2012, aif

我想在 AX 2012 标准服务“CustCustomerService”和“SalesLineService”中添加一个额外的字段。

我想我只需要扩展用于创建此服务的查询。但我不知道如何找到这个查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:03:43.067

Adding the fields to the class `AxCustTable` and `AxSalesLine` should do it.

The queries are named `AxdCustomer` and `AxdSalesOrder`. You do not need to add them there, as the fields are dynamically added at run time.

# c# - 控制不转到在 .net.1.1 中使用 JQuery 调用的 Web 方法

> ID：13742289
> 
> 赞同：0
> 
> 时间：2012-12-06T11:07:14.127
> 
> 标签：c#, jquery, asp.net

我正在使用 .net 1.1，并在单击浏览器关闭按钮时尝试使用 Jquery 调用服务器端方法。

```
<body  onbeforeunload="javascript:return test()" >
  TESTING  
</body>

function test()
{    
   debugger;   
   $.ajax({    
     type: "GET",    
     url: "HiddenPage.aspx/GetServerTime",   
     data: "{}",    
     contentType: "application/json; charset=utf-8",    
     dataType: "json",    
     success: function(msg) 
     {        
       alert(msg.d);     
     },    
     error: function(msg) 
     {       
       alert("Error! Try again...");     
     }          
     return false;          
   }) 
```

在后面的代码中：

```
[WebMethod()]
public static DateTime GetServerTime()
{
     return DateTime.Now;
}

} 
```

问题是控件没有转到 webmethod。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:05:09.197

尝试将类型更改为 POST。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T12:40:22.393

尝试使用 Fiddler 程序查看答案。

# vmware - VMWare - 尝试在 VM 上上传时来自服务器的错误 500

> ID：13742290
> 
> 赞同：0
> 
> 时间：2012-12-06T11:07:15.373
> 
> 标签：vmware, vmware-server, esx

假设我有 2 个“物理”ESX，它们都由 vSphere 服务器领导。我想要做的是运行一个脚本，它将文件上传到指定的虚拟机。所以基本上，我使用 VMWare 社区提供的 VIFS.pl 脚本，其文档可在此处获得：[http ://pubs.vmware.com/vsphere-51/index.jsp?topic=%2Fcom.vmware.vcli .ref.doc%2Fvifs.html](http://pubs.vmware.com/vsphere-51/index.jsp?topic=%2Fcom.vmware.vcli.ref.doc%2Fvifs.html)和代码源在这里：http: [//communities.vmware.com/docs/DOC-10774](http://communities.vmware.com/docs/DOC-10774)。

源代码非常简单，它只是使用模块中的`http_put_file()`函数`VIExt`，而这个函数对我来说实际上是失败的，因为我得到一个错误 500，它的日志在这里（我通过打印得到它`$resp->as_string()`）：

**do_put() 函数**

```
sub do_put {
   my ($local_source, $remote_target, $datacenter) = @_;
   my ($mode, $dc, $ds, $filepath) = VIExt::parse_remote_path($remote_target);
   # bug 322577
   if (defined $local_source  and -d $local_source) {
      VIExt::fail("Error: File to be uploaded cannot be a folder.");
   }

   # bug 266936
   unless (-e $local_source) {
      VIExt::fail("Error: File $local_source does not exist.");
   }

   my $resp = VIExt::http_put_file($mode, $local_source, $filepath, $ds, $datacenter);
   # bug 301206
   print $resp->as_string();   # => Trace
   if ($resp && $resp->is_success) {
      print "Uploaded file $local_source to $filepath successfully.\n";
   } else {
      print "Failed to upload !";
   }
} 
```

** 痕迹 **

```
# vSphere server : @192.168.20.2
# Datastore : nfs
# Datacenter : dc
# Target VM name : target_vm
# Target filename : VM.txt

>> perl vifs --server 192.168.20.2 --username root  --password root -p "/tmp/foo.txt" "[nfs] target_vm/VM.txt" -Z "dc"

HTTP/1.1 500 Internal Server Error
Connection: close
Date: Thu, 6 Dec 2012 10:32:30 GMT
Content-Length: 0
Content-Type: text; charset=plain
Client-Date: Thu, 06 Dec 2012 11:32:53 GMT
Client-Peer: 192.168.20.2:443
Client-Response-Num: 9
Client-SSL-Cert-Issuer: /C=US/ST=California/L=Palo Alto/O=VMware, Inc./CN=localhost.localdom CA 26fc6343/emailAddress=ssl-certificates@vmware.com
Client-SSL-Cert-Subject: /C=US/ST=California/L=Palo Alto/O=VMware, Inc./OU=VMware vCenter Server Certificate/emailAddress=ssl-certificates@vmware.com/CN=localhost.localdom/unstructuredName=1352217590,031bd875,564d7761726520496e632e
Client-SSL-Cipher: AES256-SHA
Client-SSL-Socket-Class: IO::Socket::SSL
Client-SSL-Warning: Peer certificate not verified

Failed to upload ! 
```

请注意，我检查了函数中作为参数传递的所有变量的值`http_put_file`，它们都是正确的。

如果有人遇到过这个问题，将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:40:57.590

我认识一些 VMware，但诚然从未尝试过您在这里所做的事情，但我确实有一个想法与您分享。

如果我没记错的话，您的物理 ESX 主机 (192.168.20.2) 正在尝试将文件放置到您的 VM (target_vm) 上。由于该通信是通过端口 443 进行的

```
 Client-Peer: 192.168.20.2:443 
```

我猜测可能在您的虚拟机上的 VMware 证书与这些虚拟机已添加到的域不匹配（或者它们未添加到域中）。证书看起来来自“localhost.localdom”：

```
 CN=localhost.localdom 
```

如果您的域中还没有证书颁发机构，也许您可​​以快速为您的域创建一个自签名证书并将其放置在适当的证书存储中。您可能还想尝试一些其他 API 调用，例如：

```
 --listds | -S 
```

也许他们不需要 SSL 连接，因为它不通过 HTTPS？这可能会验证证书确实会导致您的问题？

# perl - Perl REST：如何发送带有一些数据的 DELETE 请求（原文如此！）？

> ID：13742292
> 
> 赞同：3
> 
> 时间：2012-12-06T11:07:23.620
> 
> 标签：perl, rest, http-delete

有一个 Web 服务，在它的 onDelete 方法中处理数据；所以，我需要用我的 DELETE 请求传输一些数据......实际上我完全不知道如何在 Perl 中做到这一点:(

有没有人对此有任何想法？也许，有人遇到了同样的问题并解决了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:26:44.303

我相信与发送 POST 请求的方式相同：

```
$ perl -MLWP::UserAgent -e 'LWP::UserAgent->new->delete("http://localhost:9999/resource", Content => "data");' 
```

在连接的调试端：

```
$ socat tcp-listen:9999 -
DELETE /resource HTTP/1.1
TE: deflate,gzip;q=0.3
Connection: TE, close
Host: localhost:9999
User-Agent: libwww-perl/6.04
Content-Length: 4

data 
```

# bash - 如何使用 scp -r 获取下载的文件列表

> ID：13742296
> 
> 赞同：3
> 
> 时间：2012-12-06T11:07:28.203
> 
> 标签：bash, scp

是否可以获取使用下载的文件列表`scp -r`？

例子：

```
$ scp -r $USERNAME@HOSTNAME:~/backups/ .

3.tar    100%    5     0.0KB/s   00:00    
2.tar    100%    5     0.0KB/s   00:00    
1.tar    100%    4     0.0KB/s   00:00 
```

预期结果：

```
3.tar
2.tar
1.tar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:30:29.917

生成的输出`scp`似乎不会出现在任何标准流（stdout 或 stderr）上，因此直接捕获它可能很困难。您可以这样做的一种方法是`scp`输出详细信息（通过使用`-v`开关），然后捕获并处理此信息。详细信息在 stderr 上输出，因此您需要使用`2>` [重定向运算符](http://www.tldp.org/LDP/abs/html/io-redirection.html)捕获它。

例如，要捕获详细输出，请执行以下操作：

```
scp -rv $USERNAME@HOSTNAME:~/backups/ . 2> scp.output 
```

然后，您将能够使用以下内容过滤此输出：

```
awk '/Sending file/ {print $NF}' scp.output 
```

该`awk`命令只是打印相关行的最后一个单词。如果您的文件名中有空格，那么您可能需要提出一个更强大的过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:11:24.007

我知道你问了关于 的问题`scp`，但我会给你一个替代解决方案来解决这个问题*使用 ssh 从服务器递归复制文件，并获取复制的文件名*。

该`scp`解决方案至少存在一个问题：如果您复制大量文件，则每个文件生成一个*事务*需要一段时间。而不是`scp`，我使用`ssh`and `tar`：

```
ssh $USERNAME@HOSTNAME:~/backups/ "cd ~/backups/ && tar -cf - ." | tar -xf - 
```

这样，添加 a`tee`和 a`tar -t`即可满足您的需求：

```
ssh $USERNAME@HOSTNAME:~/backups/ "cd ~/backups/ && tar -cf - ." | tee >(tar -xf -) | tar -tf - > file_list 
```

请注意，它可能不适用于所有 shell（bash 可以），因为`>(...)`构造（进程替换）不是一般选项。如果你的 shell 中没有它，你可以使用 fifo（基本上是进程替换允许的，但更短）：

```
mkfifo tmp4tar
(tar -xf tmp4tar ; rm tmp4tar;) &
ssh $USERNAME@HOSTNAME:~/backups/ "cd ~/backups/ && tar -cf - ." | tee -a tmp4tar | tar -tf - > file_list 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T03:23:40.423

```
scp -v -r yourdir orczhou@targethost:/home/orczhou/ \
2> >(awk '{if($0 ~ "Sending file modes:")print $6}') 
```

使用 -v "发送文件模式：C0644 7864 a.sql" 应该输出到 stderr

使用 'awk' 选择文件列表

# android - 如何用手指擦除油漆

> ID：13742297
> 
> 赞同：6
> 
> 时间：2012-12-06T11:07:27.560
> 
> 标签：android

我想按灰色方形位图上检测到手指的区域进行擦除，但它不起作用。

我显示一个带有 ic_launch 的位图作为图像，然后我在图像上显示一个灰色方形 Paint，我可以在其中将颜色修改为 TRANSPARENT

问题是什么？谢谢

```
private Bitmap mBitmap;
private Canvas mCanvas;
private Path mPath;
private Paint mBitmapPaint;
private Paint mPaint;

public CaseView(Context c) {
    super(c);

    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeWidth(40);

    mBitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
    for (int i = 0; i < 100; i++) {
        for (int j = 0; j < 100; j++) {
            mBitmap.setPixel(i, j, Color.GRAY);
        }

    }
    mCanvas = new Canvas(mBitmap);
    mPath = new Path();
    mBitmapPaint = new Paint(Paint.DITHER_FLAG);

}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(0, 0, oldw, oldh);

}

@Override
protected void onDraw(Canvas canvas) {

    canvas.drawRect(100, 100, 200, 200, mBitmapPaint);
    canvas.drawPath(mPath, mPaint);

    Bitmap _scratch = BitmapFactory.decodeResource(getResources(),
            R.drawable.ic_launcher);
    canvas.drawColor(Color.WHITE);

    // logo
    canvas.drawBitmap(_scratch, 0, 100, null);

    for (int i = 0; i < 100; i++) {
        for (int j = 0; j < 100; j++) {
            if ((mX < 100 && mX >= 0) && (mY < 100 && mY >= 0)) {

                mBitmap.setPixel((int) mY,(int) mX,  Color.TRANSPARENT);
            }
        }

    }
    canvas.drawBitmap(mBitmap, 0, 100, mBitmapPaint);

    Bitmap mutableBitmap = Bitmap.createBitmap(_scratch.getWidth(),
            _scratch.getHeight(), Bitmap.Config.ARGB_8888);
    mutableBitmap.setPixel(50, 50, 124);
    canvas.drawBitmap(mutableBitmap, 0, 100, null);
    int pixelColor = mBitmap.getPixel(50, 50);
    int red = Color.red(pixelColor);
    int green = Color.green(pixelColor);
    Log.v("red", "red:" + red + " /green:" + green);

}

private float mX, mY;
private static final float TOUCH_TOLERANCE = 4;

private void touch_start(float x, float y) {
    mPath.reset();
    mPath.moveTo(x, y);
    mX = x;
    mY = y;
}

private void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
        mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
        mX = x;
        mY = y;
    }
}

private void touch_up() {
    mPath.lineTo(mX, mY);
    // commit the path to our offscreen
    mCanvas.drawPath(mPath, mPaint);
    // kill this so we don't double draw
    mPath.reset();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();
    Log.v("onTouchEvent", "x:" + x + "/y:" + y);

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        touch_start(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_MOVE:
        touch_move(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_UP:
        touch_up();
        invalidate();
        break;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T11:31:10.950

对于绘图，您需要使用一个 Paint 类来绘制路径。但是要再次擦除，您必须像这样在触摸坐标上绘制一条路径

```
mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR)); 
```

在**android-sdk**示例中，他们给出了一个很好地解释它的类**FingerPaint**

# c - C 内存分配 - char* 和 char sizeof

> ID：13742300
> 
> 赞同：0
> 
> 时间：2012-12-06T11:07:33.073
> 
> 标签：c

在 C 中分配字符串的正确形式是什么？

```
char *sample;

sample = malloc ( length * sizeof(char) ); 
```

或者

```
sample = malloc ( length * sizeof(char*) ); 
```

为什么占用 1`char*`个字节时`char`占用 4 个字节？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T11:11:18.877

假设目标是存储一串`length`字符，正确的分配是：

```
sample = malloc(length + 1); 
```

笔记：

1.  不要使用`sizeof (char)`，因为它总是 1 它不会增加任何价值。
2.  记住终止符，我假设（基于名称）`length`是字符串可见字符的长度，即`strlen()`will的返回`length`。
3.  我知道你没有，但值得指出的是，也不应该[对 from 的返回值进行`malloc()`](https://stackoverflow.com/a/605858/28169)强制转换。

更大的原因`char *`是它是指针类型，并且指针几乎总是大于单个字符。在许多系统上（比如你的系统，似乎）它们是 32 位的，而字符只有 8 位。因为指针需要能够表示机器内存中的任何地址，所以需要更大的大小。在 64 位计算机上，指针通常是 64 位，即 8 个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T11:12:26.003

> 为什么 char 占用 1 个字节时 char* 占用 4 个字节？

因为您在 32 位系统上，这意味着指针占用四个字节；`char*`是一个指针。

`char`总是只占用一个字节，所以你不需要乘以`sizeof(char)`：

```
sample = malloc (length); 
```

我假设`length`已经为空终止填充了它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T11:10:06.630

```
sample = malloc(length); 
```

是对的

`char*`是一个指针，一个指针使用 4 个字节（比如在 32 位平台上）

`char`是一个 char，一个 char 使用 1 个字节

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T11:10:47.020

```
sample = malloc ( length * sizeof(char) ); 
```

如果您想为`length`字符数分配内存，第一个是正确的。

`char*`是指针类型，在您的平台上恰好是 4 个字节。所以`sizeof(char*)`返回 4。

但`sizeof(char)`始终为 1 并且 smae 由 C 标准保证。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T11:14:05.750

在给定的情况下，您正在做两件事：

在第一种情况下：`sample = malloc ( length * sizeof(char) );`

您正在分配`length`乘以**1 字节**`char`的类型大小

 **而在第二种情况下： `sample = malloc ( length * sizeof(char*) );`

您正在分配`length`乘以 您机器上`char`4**字节的指针大小。**

考虑一下，虽然情况 1 保持不变，但在第二种情况下，大小是可变的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-06T11:35:00.160

在您的情况下，您想要分配一个长度字符数组。您将存储`sample`一个指向数组的指针，该数组`length`的大小是您所指向的大小的倍数。`sizeof(char*)`是指向 的指针的大小`char`。不是a的大小`char`。

一个好的做法是

```
sample = malloc(length * sizeof(*sample)); 
```

使用它，您将保留要指向的大小的长度时间。这使您能够随时更改数据类型，只需将 sample 声明为另一种数据。

```
int *sample;

sample = malloc(length * sizeof(*sample)); // length * 4

char *sample;

sample = malloc(length * sizeof(*sample)); // length * 1 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-06T11:36:16.983

如果`length`已经说明了 nul 终止符，我会写：

```
sample = malloc(length); 
```

或者：

```
sample = malloc(length * sizeof(*sample)); 
```

`sizeof(char*)`是指针的大小，它与分配的缓冲区需要的大小完全无关。所以绝对不要用那个。

我的第一个片段在 IMO 中对于字符串操作代码来说已经足够好了。C 程序员知道 C 中的内存和字符串长度都以`sizeof(char)`. 没有必要在其中放入每个人都知道的转换因子`1`。

我的第二个片段是写分配的一种真正方法。因此，如果您希望所有分配看起来一致，那么字符串分配也应该使用它。我可以想到两个可能的原因来使您的所有分配看起来一致（IMO 都相当弱，但实际上并没有错）：

*   有些人会发现这样更容易阅读，只需识别一种视觉模式。
*   您可能希望将来使用该代码作为处理宽字符串的代码的基础，并且当`length`不再以字节为单位而是以宽字符为单位时，一致的形式会提醒您正确分配。使用`sizeof(*sample)`作为一致形式意味着您根本不需要更改该行代码，假设您在更新类型的`sample`同时作为`length`测量单位。

其他选项包括：

```
sample = calloc(length, 1);
sample = calloc(length, sizeof(char));
sample = calloc(length, sizeof(*sample)); 
```

它们在这里可能毫无意义，但是除了将内存归零的微不足道的次要效果外，`calloc`还有一个有趣的区别`malloc`，它明确区分了您计划使用的*对象*`malloc`的数量和大小，而只需要总大小.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-06T11:59:50.230

对于任何类型`T`，通常的形式是

```
T *p = malloc(N * sizeof *p); 
```

或者

```
T *p;
...
p = malloc(N * sizeof *p); 
```

其中是您希望分配`N`的类型元素的数量。`T`表达式`*p`有类型`T`，所以`sizeof *p`等价于`sizeof (T)`。

请注意，这`sizeof`是一个类似or的*运算符*，而不是库函数；仅当操作数是类型名称（如or ）时才需要括号。 `&``*``int``char *`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-13T13:54:38.610

请访问此链接[https://www.codesdope.com/c-dynamic-memory/](https://www.codesdope.com/c-dynamic-memory/)了解它如何在运行时动态分配内存。了解**malloc**的概念以及它如何将内存量分配给变量可能会有所帮助。

在你的例子中；

```
char *sample;
sample = malloc ( length * sizeof(char) ); 
```

在这里，您为示例声明了一个指向字符的指针，而没有声明它需要多少内存。在下一行中，**length * sizeof(char) bytes**内存分配给 sample 的地址， (char*) 是将 malloc 返回的指针类型转换为字符。**

# javascript - 主 Web 文档与 iframe 脚本

> ID：13742302
> 
> 赞同：0
> 
> 时间：2012-12-06T11:07:35.657
> 
> 标签：javascript, jquery, wordpress, iframe, scripting

所以我有这个问题：我在 iframe 中有一个输入，其中有一些文本，另一个输入在 iframe 之外，在页面正文中是空的。我需要的是将 iframe 输入中的文本复制到另一个输入。我怎样才能做到这一点？

示例代码：

```
<html>
  <head>
  </head>
  <body>
    <input id="outside-input" type="text"/>
    <iframe>
      <input id="inside-input" type="text"/>
    </iframe>
  </body>
</html> 
```

我看不出这有什么关系，但 iframe 实际上是 Wordpress 媒体上传弹出窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:18:13.117

如果 iframe 在同一个域上，您可以像这样访问它的内容：

```
$('#outside-input').val($("iFrame").contents().find("#inside-input").val()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:09:12.543

AFAIK 您无法直接使用 JQuery / 其他 JS 从您的主页访问 IFrame 的内容。

# iphone - 在 iphone sdk 中显示多个点之间的路线

> ID：13742305
> 
> 赞同：-1
> 
> 时间：2012-12-06T11:07:39.637
> 
> 标签：iphone, ios, google-maps, mkmapview

我想显示两点之间的确切路线。

我确实有一些例子，但都有例子显示两点之间的路线。

示例：-[这个](https://github.com/kishikawakatsumi/MapKit-Route-Directions/downloads)，甚至我[也](https://github.com/Surya121/SBMapWithRoute/downloads) 经历过 regexlite 的例子。但都有两点之间路线的逻辑。通过折线我只能画直线。我看不到路线。

**已编辑的问题：-**

有5点：-

1）点是：-“lat”：-35.29987329273559，“lng”：149.13395404815674，

2）点是：-“纬度”：-35.2984416380826，“lng”：149.13144886493683，

3）点是：-“纬度”：-35.302576234486935，“lng”：149.13335928744252，

4）点是：-“纬度”：-35.301081642089805，“lng”：149.13073539733887，

5）点是：-“lat”：-35.29991644393122，“lng”：149.13659454104746，

现在我想绘制从点 1 到点 5 的路线。路线必须包含所有点。我知道我可以找到两点之间的路线，但是我如何一次又一次地使用相同的方法，所以找到路线请帮助我。预先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:05:08.400

**苹果**集成了显示路线的新功能。

**要求 ->**操作系统版本应该是`IOS6`或更高版本。

`YourCoordinate`显示从当前位置到in 的路线`iOS6`

```
-(void)showMapRouteFromCurrentLocation
{
    CLLocationCoordinate2D currentUserCoordinate = YourCoordinate;
    //currentUserCoordinate.latitude=  +53.509980;
    //currentUserCoordinate.longitude =  -0.133700;

    MKPlacemark *place = [[MKPlacemark alloc]
                          initWithCoordinate:currentUserCoordinate
                          addressDictionary:nil];

    MKMapItem *mapItem = [[MKMapItem alloc]initWithPlacemark:place];

    NSDictionary *routeOption = [[NSDictionary alloc] initWithObjectsAndKeys:MKLaunchOptionsDirectionsModeDriving,MKLaunchOptionsDirectionsModeKey, nil];

    [mapItem openInMapsWithLaunchOptions:routeOption];
} 
```

[这](http://rajneesh071.blogspot.in)是这个的链接。

# android - NetworkOnMainThreadException 从输入流中检索文件并将其打开为 PDF

> ID：13742308
> 
> 赞同：1
> 
> 时间：2012-12-06T11:07:40.830
> 
> 标签：android, android-asynctask

下面是基本上运行的代码......主要是。它适用于我正在测试的所有手机，但在客户端手机上失败，我无法使用。此代码的哪一部分可能导致 NetworkOnMainThreadException？

这真的很简单。我在 onPostExecute() 中所做的是：

1.  从 onBackground() 获取 InputStream
2.  如果 InputStream 为空则中止，如果为空则中止。
3.  检查外部存储可用性，如果没有则中止。
4.  从 InputStream 创建文件
5.  检查 PDF 查看器的可用性，如果不可用则中止
6.  打开新创建的 PDF

    ```
    @Override
    protected void onPostExecute(InputStream is) {
        super.onPostExecute(is);
        if (progressDialog.isShowing()) {
            progressDialog.dismiss();
        }

        if (is== null) {
            errorMessage = getString(R.string.error_server_communication);
            CustomDialogs.showErrorDialog( fragment.getActivity(), getString( R.string.error_title ), errorMessage );
            return;
        }

        //checking external storage avalibility
        if (!Tools.isWriteableExternalStorageAvalible()) {
            errorMessage = getString(R.string.error_no_external_storage);
            CustomDialogs.showErrorDialog( fragment.getActivity(), getString( R.string.error_title ), errorMessage );
            return;
        }               

        // opening pdf
        try {
            File directory = new File(Environment.getExternalStorageDirectory(), "MyApp");
            if (!directory.exists())
                directory.mkdirs();

            File file = new File(directory, "file.pdf");

            //usuwa poprzednio przechowywany wynik jesli taki byl
            if (file.exists()) 
                file.delete();

            file.createNewFile();                   

            // write the inputStream to a FileOutputStream
            OutputStream out = new FileOutputStream(file);
            out.write(IOUtils.toByteArray(is));

            is.close();
            out.flush();
            out.close();

            if (Tools.canDisplayPdf(fragment.getActivity())) {
                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setDataAndType(Uri.fromFile(file), "application/pdf");
                startActivity( intent );
            } else {
                //user nie ma przegladarki pdf - komunikat
                errorMessage = getString(R.string.error_server_communication);
                CustomDialogs.showErrorDialog( fragment.getActivity(), getString( R.string.error_title ), errorMessage );
            }

        } catch (IOException e) {
            errorMessage = getString(R.string.error_server_communication);
            CustomDialogs.showErrorDialog( fragment.getActivity(), getString( R.string.error_title ), errorMessage );
        }
    } 
    ```

还包括堆栈跟踪。还有一个线索。客户端正在使用 SSL 检索 InputStream，而我没有。不幸的是，还不能用 SSL 调试它。

```
12-05 21:34:02.648: E/AndroidRuntime(711): FATAL EXCEPTION: main
12-05 21:34:02.648: E/AndroidRuntime(711): android.os.NetworkOnMainThreadException
12-05 21:34:02.648: E/AndroidRuntime(711):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
12-05 21:34:02.648: E/AndroidRuntime(711):  at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl$SSLInputStream.read(OpenSSLSocketImpl.java:668)
12-05 21:34:02.648: E/AndroidRuntime(711):  at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:103)
12-05 21:34:02.648: E/AndroidRuntime(711):  at org.apache.http.impl.io.AbstractSessionInputBuffer.read(AbstractSessionInputBuffer.java:134)
12-05 21:34:02.648: E/AndroidRuntime(711):  at org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:174)
12-05 21:34:02.648: E/AndroidRuntime(711):  at org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:188)
12-05 21:34:02.648: E/AndroidRuntime(711):  at org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:178)
12-05 21:34:02.648: E/AndroidRuntime(711):  at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:1383)
12-05 21:34:02.648: E/AndroidRuntime(711):  at org.apache.commons.io.IOUtils.copy(IOUtils.java:1357)
12-05 21:34:02.648: E/AndroidRuntime(711):  at org.apache.commons.io.IOUtils.toByteArray(IOUtils.java:361)
12-05 21:34:02.648: E/AndroidRuntime(711):  at pl.luxmed.pp.activities.MedicalExaminationsActivity$OpenPdfAsyncTask.onPostExecute(MedicalExaminationsActivity.java:270)
12-05 21:34:02.648: E/AndroidRuntime(711):  at pl.luxmed.pp.activities.MedicalExaminationsActivity$OpenPdfAsyncTask.onPostExecute(MedicalExaminationsActivity.java:1)
12-05 21:34:02.648: E/AndroidRuntime(711):  at android.os.AsyncTask.finish(AsyncTask.java:631)
12-05 21:34:02.648: E/AndroidRuntime(711):  at android.os.AsyncTask.access$600(AsyncTask.java:177)
12-05 21:34:02.648: E/AndroidRuntime(711):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
12-05 21:34:02.648: E/AndroidRuntime(711):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-05 21:34:02.648: E/AndroidRuntime(711):  at android.os.Looper.loop(Looper.java:137)
12-05 21:34:02.648: E/AndroidRuntime(711):  at android.app.ActivityThread.main(ActivityThread.java:4745)
12-05 21:34:02.648: E/AndroidRuntime(711):  at java.lang.reflect.Method.invokeNative(Native Method)
12-05 21:34:02.648: E/AndroidRuntime(711):  at java.lang.reflect.Method.invoke(Method.java:511)
12-05 21:34:02.648: E/AndroidRuntime(711):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-05 21:34:02.648: E/AndroidRuntime(711):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-05 21:34:02.648: E/AndroidRuntime(711):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T11:16:20.987

虽然您正在使用`AsyncTask`，但它的`onPostExecute()`方法是在 UI 线程上执行的（让您更新视图等）。实际上，`AsyncTask`在单独的线程中执行的唯一方法是`doInBackground()`，因此您必须执行所有涉及I / O（磁盘，网络）的操作，只能在该方法中执行，否则会出现异常。

有关详细信息，请参阅[此](http://developer.android.com/reference/android/os/AsyncTask.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T11:23:00.317

从 Android Doc **android.os.NetworkOnMainThreadException**中明确指出，`android 2.3.3`您不能在主 UI 线程中调用 URL。请交叉检查并确保您没有犯此错误

**来自安卓开发者**

当应用程序尝试在其主线程上执行网络操作时抛出的异常。这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。

# blogspot - 如何使用 html 或 javascript 删除社交书签插件

> ID：13742311
> 
> 赞同：2
> 
> 时间：2012-12-06T11:07:41.633
> 
> 标签：blogspot

对不起，伙计们，点击第一个链接你会看到我被红色标记的图像，点击第二个链接后，你会看到箭头。

1) [http://s261.beta.photobucket.com/user/minaekoz/media/satu.png.html](http://s261.beta.photobucket.com/user/minaekoz/media/satu.png.html)

2) [http://s261.beta.photobucket.com/user/minaekoz/media/satua.png.html](http://s261.beta.photobucket.com/user/minaekoz/media/satua.png.html)

问题 ：

那是我用来宣传我的博客的社交书签网站，但我想在有人点击第一张图片中的链接后删除该插件。

用户单击第一张图片的链接后，如何删除第二张图片中的该插件？

*对不起，如果我的英语这么差

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:18:17.370

我不确定您的页面是如何嵌入的，我猜它是使用框架还是 iframe 完成的？知道这一点很重要，但您很可能能够使用一些像这样的javascript代码（在某些元素的`onload`事件中调用（例如`<body>`）：

```
if (window.top != window.self)
    window.top.location.replace(window.self.location.href); 
```

我认为您可以通过使用自定义 BlogSpot 模板或者也可以使用一些小部件来添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:18:36.543

可能你不能。该社交书签网站可能会在 IFRAME 中打开您的网站，因此，您的页面中的点击会导致 IFRAME 导航，而不是浏览器导航。

由于您的站点和 IFRAME 站点不同，由于 SOP（同源策略），您站点中的 javascript 无法访问其他站点中的 DOM（文档对象模型）。

[您可以通过使用X-Frame-Options http 标头来](https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header)禁止您的网站在 IFRAME 中运行，但我会这样。

干杯。

# sql - 如何在 SQL 中生成所有可能的汇率组合

> ID：13742313
> 
> 赞同：0
> 
> 时间：2012-12-06T11:07:45.513
> 
> 标签：sql, sql-server-2005, join, tuples

给定一个包含货币和汇率元组的表，如下所示：

```
EUR CHF 1.20
USD EUR 0.80
CHF JPY 1.30 
```

我怎样才能简单地生成货币（A，B）和（B，A）之间的所有汇率？

我想要以下内容：

```
EUR CHF
CHF EUR

EUR USD
USD EUR

USD CHF
CHF USD 
```

具有所有可能的组合，即可以通过链接多个速率从多个速率中得出一个速率

```
A to B * B to C * C to D = A to D 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:36:53.263

我能找到的唯一方法是使用循环，我下面的所有查询都使用这个示例数据：

```
DECLARE @T TABLE (FromCurrency VARCHAR(3), ToCurrency VARCHAR(3), ExchangeRate DECIMAL(10, 5));
INSERT @T VALUES
    ('EUR', 'CHF', 1.20),
    ('USD', 'EUR', 0.80),
    ('CHF', 'JPY', 1.30); 
```

第一步是获取所有互惠汇率（即 A -> B 表中的 B -> A），因为这些是最容易获得的：

```
DECLARE @TempExchangeRates TABLE (FromCurrency VARCHAR(3), ToCurrency VARCHAR(3), ExchangeRate DECIMAL(10, 5));

INSERT @TempExchangeRates (FromCurrency, ToCurrency, ExchangeRate)
SELECT  FromCurrency, ToCurrency, ExchangeRate
FROM    @T
UNION
SELECT  ToCurrency, FromCurrency, CAST(1 / ExchangeRate AS DECIMAL(10, 5))
FROM    @T t
WHERE   NOT EXISTS
        (   SELECT  1
            FROM    @T t2
            WHERE   t.FromCurrency = t2.ToCurrency
            AND     t.ToCurrency = t2.FromCurrency
        ) 
```

此时我们有：

```
CHF EUR 0.83333
CHF JPY 1.30000
EUR CHF 1.20000
EUR USD 1.25000
JPY CHF 0.76923
USD EUR 0.80000 
```

所以我们仍然失踪

```
CHF --> USD 
EUR --> JPY 
JPY --> CHF 
JPY --> EUR 
USD --> EUR 
```

您需要继续执行此连接

```
SELECT  a.FromCurrency, b.ToCurrency, CAST(a.ExchangeRate * b.ExchangeRate AS DECIMAL(10, 5))
FROM    @TempExchangeRates a
        INNER JOIN @TempExchangeRates b
            ON a.ToCurrency = b.FromCurrency
            AND a.FromCurrency != b.ToCurrency
WHERE   NOT EXISTS
        (   SELECT  1
            FROM    @TempExchangeRates c
            WHERE   a.FromCurrency = c.FromCurrency
            AND     b.ToCurrency = c.ToCurrency
        ) 
```

并插入结果，直到找到所有组合：

```
WHILE (1 = 1)
    BEGIN
        INSERT @TempExchangeRates (FromCurrency, ToCurrency, ExchangeRate)
        SELECT  DISTINCT a.FromCurrency, b.ToCurrency, CAST(a.ExchangeRate * b.ExchangeRate AS DECIMAL(10, 5))
        FROM    @TempExchangeRates a
                INNER JOIN @TempExchangeRates b
                    ON a.ToCurrency = b.FromCurrency
                    AND a.FromCurrency != b.ToCurrency
        WHERE   NOT EXISTS
                (   SELECT  1
                    FROM    @TempExchangeRates c
                    WHERE   a.FromCurrency = c.FromCurrency
                    AND     b.ToCurrency = c.ToCurrency
                )

        IF @@ROWCOUNT = 0
            BEGIN
                BREAK;
            END
    END 
```

在第一个循环中，这将检索

```
CHF USD 1.04166
EUR JPY 1.56000
JPY EUR 0.64102
USD CHF 0.96000 
```

然后在第二

```
JPY USD 0.80128
USD JPY 1.24800 
```

然后将找到所有 12 个元组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:41:57.527

您可以使用[递归公用表表达式来做到这一点](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.90%29.aspx)

设置：

```
Create Table ExchangeRates (
    FromCurrency char(3),
    ToCurrency char(3),
    Rate decimal(10, 2),
    Constraint PK_ExchangeRates Primary Key (FromCurrency, ToCurrency)
);

Create Index IX_ToCurrency On ExchangeRates(ToCurrency, FromCurrency, Rate);

Insert Into ExchangeRates (FromCurrency, ToCurrency, Rate) Values
  ('EUR', 'CHF', 1.20),
  ('USD', 'EUR', 0.80),
  ('CHF', 'JPY', 1.30); 
```

CTE 假定所有货币代码正好是三个字符：

```
With AllExchanges as (
    Select
        FromCurrency,
        ToCurrency,
        Rate
    From
        ExchangeRates
    Union
    Select
        ToCurrency,
        FromCurrency,
        Cast(1.0 / Rate As Decimal(10, 2))
    From
        ExchangeRates
)
, Paths as (
    Select
        FromCurrency,
        cast(FromCurrency as varchar(max)) As ExchangePath,
        ToCurrency,
        Rate
    From
        AllExchanges a
    Union All
    Select
        p.FromCurrency,
        p.ExchangePath + ',' + p.ToCurrency,
        a.ToCurrency,
        Cast(p.Rate * a.Rate as Decimal(10, 2))
    From
        Paths p
            Inner Join
        AllExchanges a
            On p.ToCurrency = a.FromCurrency
    Where
        p.ExchangePath Not Like '%' + a.ToCurrency + '%'
    )
Select
    FromCurrency,
    ExchangePath + ',' + ToCurrency As ExchangePath,
    ToCurrency,
    Rate
From
    Paths 
```

[http://sqlfiddle.com/#!3/0fdc5](http://sqlfiddle.com/#!3/0fdc5)

# c# - 有没有办法从 Visual Studio 2012 的 MVC 4 项目中的视图中获取方法引用？

> ID：13742314
> 
> 赞同：2
> 
> 时间：2012-12-06T11:07:50.173
> 
> 标签：c#, asp.net-mvc, visual-studio-2012

我想查看给定方法的所有引用。我的意思是 C# 源代码和视图（.aspx、.ascx、.cshtml）中的引用。有没有办法做到这一点？VS2012 设置还是插件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:37:59.340

如果您更改了一种方法并在您的视图中使用它并且不知道是哪一种，您可以随时`MvcBuildViews`更改`.csproj`.

`<MvcBuildViews>true</MvcBuildViews>`

Resharper 是一款出色的工具，可让您找到解决方案中的所有用法（包括视图）。

[http://www.jetbrains.com/resharper/](http://www.jetbrains.com/resharper/)

resharper 还有一些替代方案：

CodeRush： http: [//www.devexpress.com/Home/Try.xml](http://www.devexpress.com/Home/Try.xml)

JustCode：http: [//blogs.telerik.com/blogs/posts/09-11-18/code-just-code-justcode.aspx](http://blogs.telerik.com/blogs/posts/09-11-18/code-just-code-justcode.aspx)

VisualAssistX： http: [//www.wholetomato.com/](http://www.wholetomato.com/)

唯一免费的是 VSCommands：

[http://visualstudiogallery.msdn.microsoft.com/d491911d-97f3-4cf6-87b0-6a2882120acf/](http://visualstudiogallery.msdn.microsoft.com/d491911d-97f3-4cf6-87b0-6a2882120acf/)，但我不确定它是否具有该功能。

这里还有一个客户反馈：http: [//aspnet.uservoice.com/forums/41201-asp-net-mvc/suggestions/3090767-make-find-all-references-search-in-mvc-views](http://aspnet.uservoice.com/forums/41201-asp-net-mvc/suggestions/3090767-make-find-all-references-search-in-mvc-views)，以防万一你想跟踪它的状态。

# django - 如何让在 Django 中选择用户单个单词或行并进行相应处理？

> ID：13742332
> 
> 赞同：0
> 
> 时间：2012-12-06T11:08:46.557
> 
> 标签：django

我有这样的行或单词：

```
hello
ok 
there
hi 
```

我想让用户选择每一行，将该行存储在变量中并使用 DJango 视图进行处理。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:19:30.043

假设这些行在网页上，使用一些 jQuery 来处理单击/选择行并将其推送到 django 视图。

比如这种东西（很粗略的伪代码）：

HTML：

```
<table>
<tr>hello</tr>
<tr>ok</tr>
</table> 
```

jQuery：

```
$(document).ready( {
    $('table tr').onClick(function(){
        $(this).style('color','green'); // to show that its selected
        $.ajax({  type: 'POST',  url: 'django/url',  data: JSON_stringify($(this).text()),   dataType: dataType});
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:35:06.220

不完全确定您希望用户如何选择每一行，但如果您想使用复选框，这是一个简单的示例，让用户从索引页面中定义的列表中进行选择并在投票视图中按照您的需要进行处理（存储在选择列表变量中）：

在你的views.py中：

```
def index(request):
    mylist = ["hello", "ok", "there", "hi"]
    return render_to_response('testing/index.html', {'mylist': mylist}, context_instance=RequestContext(request))

def vote(request):
    choices = request.POST.getlist('choice')
    return render_to_response('testing/vote.html', {'choices': choices}) 
```

在 index.html 中：

```
<form action="/vote/" method="post">
{% csrf_token %}
{% for choice in mylist %}
    <input type="checkbox" name="choice" id="choice{{ forloop.counter }}" value="{{ choice }}" />
    <label for="choice{{ forloop.counter }}">{{ choice}}</label><br />
{% endfor %}
<input type="submit" value="Vote" />
</form> 
```

例如在 vote.html 中：

```
<html>
<table border="1">
{% for x in choices %}
<tr><td>{{ x }}</td></tr>
{% endfor %}
</table>
</html> 
```

（来自[https://docs.djangoproject.com/en/1.4/intro/tutorial04/](https://docs.djangoproject.com/en/1.4/intro/tutorial04/)的修改后的盗版：）

# google-chrome - 如何在谷歌浏览器中禁用地址栏

> ID：13742338
> 
> 赞同：1
> 
> 时间：2012-12-06T11:09:02.783
> 
> 标签：google-chrome

我正在考虑在需要限制某些功能的企业环境中使用 google chrome。如何删除/禁用地址栏以防止用户在地址栏中进入网站？

谢谢

# php - Joomla 中的 MYSQL 搜索查询

> ID：13742339
> 
> 赞同：0
> 
> 时间：2012-12-06T11:09:04.040
> 
> 标签：php, mysql, joomla

我目前正在编辑一个（非常混乱！）自定义 AJAX 过滤器组件，以便用户能够按一天中的时间（早上、下午、晚上）搜索事件时间。系统当前按一天中的小时（12、08 等）搜索记录，并使用过滤中提交的小时对数据库执行 LIKE 搜索以返回结果。

我在过滤模型中将小时分组为时间数组，如下所示：

```
if($time == 'morning') {
        $times = array('07', '08', '09', '10', '11');
    }
    if($time == 'afternoon') {
        $times = array('12', '13', '14', '15', '16');
    }
    if($time == 'evening') {
        $times = array('17', '18', '19', '20', '21');
    } 
```

当前使用的查询如下：

```
if ($time>0){
        $query->where('a.startTime LIKE "%'.$time.'%"');
     } 
```

我需要更改它的查询，以便能够搜索数据库以检查数据库“时间”字段中的值是否在我的 $times 数组中并执行类似操作，因为它只是我需要的字符串的前两个字符要匹配。这是因为数据库中的值可能不同（15.30、15.45 等），但只需匹配小时 (15)。

我尝试循环遍历数组中的项目，创建“like”和“or”查询，但没有成功。有人有什么想法吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:56:10.300

```
$per=array('morning'=>array(7, 8, 9, 10, 11),
           'afternoon'=>array(12, 13, 14, 15, 16),
           'evening'=>array(17, 18, 19, 20, 21));

$query->where('HOUR(a.startTime) IN ('.implode(',',$per[$need].')'); 
```

或者

```
$per=array('morning'=>array('min'=>7, 'max'=>11),
           'afternoon'=>array('min'=>12,'max'=> 16),
           'evening'=>array('min'=>17,'max'=> 21));

$query->where('HOUR(a.startTime) >= '.$per[$need]['min'].' and HOUR(a.startTime)<='.$per[$need]['max']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:26:43.017

也许是这样的

```
 $time=15.30;//for example
if ($time>0){
  $time=preg_replace('~\.(.*?$)~','',$time);//time is now 15

  $morning = array('07', '08', '09', '10', '11');
  $afternoon = array('12', '13', '14', '15', '16');
  $evening = array('17', '18', '19', '20', '21');
    if(in_array($time,$morning)){
        echo 'morning';
    }else if(in_array($time,$afternoon)){
        echo 'afternoon';
    }else if(in_array($time,$evening)){
        echo 'evening';
    }

    $query->where('a.startTime LIKE "%'.$time.'%"'); 
```

}

# php - 查找日期范围与指定日期范围相交的行

> ID：13742340
> 
> 赞同：1
> 
> 时间：2012-12-06T11:09:05.827
> 
> 标签：php, mysql, sql, date

我有一个表 leave_applications ，其中包含从 date 到 date 的两列。我需要从表中获取休假日期在给定月份的那些行，这意味着从日期到日期之间的至少一个日期在给定月份中的行。

因此，我需要一个查询来获取具有两组日期（即 from_date 和 to_date）和该月所有日期的交集的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:21:46.937

如果 A < D 和 B > C，则两个范围 AB 和 CD 重叠。在伪 SQL 中，

```
select * from leave_applications where 
from_date < (last day of month) AND to_date > (first day of month) 
```

如果 from_date 或 to_date 与该月的第一天和最后一天重合，则使用 <= 和 >= 如果您认为它是重叠的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:34:37.873

我前段时间[写过这些查询。](http://salman-w.blogspot.com/2012/06/sql-query-overlapping-date-ranges.html)这是解决方案：

```
-- 2.2) select date ranges that overlap [d1, d2] (d2 and end_date are inclusive)
SELECT * FROM <table> WHERE @d2 >= start_date AND end_date >= @d1 
```

所以如果你想检查 2012 年 12 月的叶子，你应该写：

```
SELECT * FROM leave_applications
WHERE '2012-12-31' >= from_date AND to_date >= '2012-12-01' 
```

# c# - 日期是 01/01/0001 而不是数据库中的日期？

> ID：13742342
> 
> 赞同：1
> 
> 时间：2012-12-06T11:09:08.070
> 
> 标签：c#, sql, sql-server, asp.net-mvc-3

我的 sql server 2008 r2 数据库中有这一行，但我不明白：

```
2012-12-06 11:00:36.703 and is of type DATETIME 
```

当我在视图中显示它时，它是：

```
Mon, Jan 1, 0001 
```

这是我的代码：

```
var allNews = ZincService.NewsService.GetNewsPostsForId(id);

List<Zinc.Web.Areas.News.ViewModels.Home.NewsPostsViewModel> newsItems = new List<NewsPostsViewModel>();

foreach (var newsItem in allNews)
{ 
  NewsPostsViewModel newsItemViewModel = new NewsPostsViewModel();
  newsItemViewModel.CommentDate = String.Format("{0:ddd, MMM d, yyyy}", newsItem.CommentDate);
}

public class NewsPostsViewModel
{
  public Entities.News.News MainNews { get; set; }
  public virtual string News { get; set; }
  public virtual int NewsId { get; set; }
  public virtual string CommentDate { get; set; }
}

  public List<DataModels.News.NewsPostsDataModel> GetNewsPostsForId(int id)
{
  using (SqlConnection conn = new SqlConnection(ZincModelContainer.CONNECTIONSTRING))
  {
    using (SqlCommand cmd = conn.CreateCommand())
    {
      conn.Open();
      cmd.CommandType = System.Data.CommandType.StoredProcedure;
      cmd.CommandText = "[News].[GetNewsPostsForId]";

      SqlParameter param = new SqlParameter("@Id", System.Data.SqlDbType.Int);
      param.Value = id;
      cmd.Parameters.Add(param);

      List<DataModels.News.NewsPostsDataModel> news = new List<DataModels.News.NewsPostsDataModel>();

      using (SqlDataAdapter adapter = new SqlDataAdapter(cmd))
      {
        DataTable dt = new DataTable();
        adapter.Fill(dt);

        foreach (DataRow row in dt.Rows)
        {
          string message = Convert.ToString(row["NewsDescription"]);
          news.Add(new DataModels.News.NewsPostsDataModel { NewsPostId = id ,Message = message});
        }
      }

      return news;
    }
  }
}

public class NewsPostsDataModel
{
  public virtual int NewsPostId { get; set; }
  public virtual string Message { get; set; }
  public virtual DateTime CommentDate { get; set; }
} 
```

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:17:42.847

这就是问题：

```
news.Add(new DataModels.News.NewsPostsDataModel { NewsPostId = id ,Message = message}); 
```

你没有`CommentDate`在这里填充，所以它的默认值是`DateTime.MinValue`.

当然，我们现在根本无法判断您的存储过程是否返回该值，但假设它返回，您大概应该从 中获取它`DataRow`并将其放入您的模型中......

在您*修复*代码之前，您应该退后一步并考虑您的诊断过程。您是否尝试对此进行调试？添加日志记录？您应该能够很快看到`CommentDate`模型中没有 a，然后尝试找出*为什么*没有 a `CommentDate`，这应该会引导您回到创建模型实例的代码。如果您可以改进您的诊断过程，您就可以大大加快您未来的发展，而不必问那么多问题。

# android - android自定义微调器对话框

> ID：13742345
> 
> 赞同：2
> 
> 时间：2012-12-06T11:09:23.283
> 
> 标签：android, spinner

问题是，当我单击自定义微调器自定义对话框时，会出现列表视图单选按钮和底部按钮，但默认情况下没有选择任何项目，即使我选择任何选择应用程序也会因为 SpinnerDialog 中的 nullpointerexception 而崩溃 - > onItemClick -> onItemSelectedListener.onItemSelected(text)
我从[这里](https://stackoverflow.com/questions/7153835/customized-spinner-dialog-with-unwanted-space)获取示例代码并使用 alertdialog 而不是对话框

我的客户微调班

```
public class SpinnerCustomDialog extends Spinner implements DialogInterface.OnClickListener  {
protected OnAddListener mListener = null;

public SpinnerCustomDialog(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

public SpinnerCustomDialog(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    // TODO Auto-generated constructor stub
}

public SpinnerCustomDialog(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
}

public interface OnAddListener {
    void onAdd(Spinner inSpinner);
}

@Override
public boolean performClick() {
    //boolean handled = super.performClick(); //TODO how to avoid this skip ?

    boolean handled = false;
    if (!handled) {
        handled = true;
        Context context = getContext();

        Log.w(SpinnerCustomDialog.class.getName(), "checlk1");
        AccountDS datasource;
        datasource = new AccountDS(context);
        datasource.open();
        List<Accounts> values = datasource.getAllAccountList();
        Log.w(BalanceActivity.class.getName(), "List Size " + values.size());
        datasource.close();

        ArrayAdapter<Accounts> adapter = new ArrayAdapter<Accounts>(context, android.R.layout.simple_list_item_single_choice, values);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        //SpinnerDialog lDialog = new SpinnerDialog(context, getSelectedItemPosition(), adapter, this);
        SpinnerDialog lDialog = new SpinnerDialog(context, 1, adapter, this);
        lDialog.setTitle("select category");
        lDialog.show();
    }

    return handled;
}

@Override
public void onClick(DialogInterface dialog, int which) 
{
    Log.w(SpinnerCustomDialog.class.getName(), "onClick");
    setSelection(which);        
    dialog.dismiss();
}
} 
```

我的客户微调对话框代码

```
public class SpinnerDialog extends AlertDialog implements OnItemClickListener, View.OnClickListener {

DialogInterface.OnClickListener mListener;
View promptsView;
OnItemSelectedListener onItemSelectedListener;
public Context mContext; 

public interface OnItemSelectedListener
{
    public void onItemSelected(String itemValue);       
}

protected SpinnerDialog(Context context, int inPosition, ListAdapter inSpinnerAdapter, DialogInterface.OnClickListener inListener) {
    super(context);
    // TODO Auto-generated constructor stub
    //this.setContentView(com.abdulwasie.mybalance.R.layout.activity_spinner_dialog);
    promptsView = getLayoutInflater().inflate(R.layout.activity_spinner_dialog, null);
    this.setView(promptsView);
    mListener = inListener;
    mContext = context;
    Log.w(SpinnerDialog.class.getName(), "inside spinner dialog 1");        
    ListView lList = (ListView)promptsView.findViewById(R.id.listCategory);

    lList.setAdapter(inSpinnerAdapter);
    lList.setOnItemClickListener(this);
    lList.setChoiceMode(ListView.CHOICE_MODE_SINGLE );
    lList.setSelection(1);

    Log.w(SpinnerDialog.class.getName(), "inside spinner dialog 2");
    setButton(DialogInterface.BUTTON_POSITIVE, "Positive",
            new OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // This is replaced later
                    Log.w(SpinnerDialog.class.getName(), "button clicked");

                }
            });
    Log.w(SpinnerDialog.class.getName(), "inside spinner dialog 3");

}

@Override
public void onClick(View v) 
{
    if(mListener != null)
        mListener.onClick(this, DialogInterface.BUTTON_POSITIVE);           
}

@Override
public void onItemClick(AdapterView parent, View view, int position, long id) 
{
    if(mListener != null)
        mListener.onClick(SpinnerDialog.this, position);
    String text = parent.getItemAtPosition(position).toString();
    Log.w(SpinnerDialog.class.getName(), "onItemClick " + text);
    onItemSelectedListener.onItemSelected(text);        
}   
} 
```

和我的活动课

```
public class RegisterActivity extends Activity  {
static final int DATE_DIALOG_ID = 1;
private int mYear;
private int mMonth;
private int mDay;
private EditText pickDate;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_register);

    pickDate = (EditText) findViewById(R.id.pickdate);

    pickDate.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_UP) {
                showDialog(DATE_DIALOG_ID);
            }
            return false;
        }
    });

    final Calendar c = Calendar.getInstance();
    mYear = c.get(Calendar.YEAR);
    mMonth = c.get(Calendar.MONTH);
    mDay = c.get(Calendar.DAY_OF_MONTH);
    updateDate();

    //SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
    //String currentDateandTime = sdf.format(new Date());

    //pickDate.setText(mDay + "/" + mMonth + "/" + mYear);
    //pickDate.setText(currentDateandTime);

    AccountDS datasource;
    datasource = new AccountDS(this);
    datasource.open();

    List<Accounts> values = datasource.getAllAccountList();
    Log.w(BalanceActivity.class.getName(), "List Size " + values.size());

    datasource.close();

    ArrayAdapter<Accounts> adapter = new ArrayAdapter<Accounts>(this, android.R.layout.simple_list_item_1, values);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    final Spinner my_spin=(Spinner)findViewById(R.id.spinner1);
    if (my_spin == null) {
        Log.w(BalanceActivity.class.getName(), "my spin is null ");
    }

    my_spin.setAdapter(adapter);

    SpinnerCustomDialog my_spin1 = (SpinnerCustomDialog)findViewById(R.id.spinner2);
    my_spin1.setOnItemSelectedListener(new OnItemSelectedListener() 
    {
        @Override
        public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) 
        {
            Log.w(RegisterActivity.class.getName(), "onItemSelected");

        }

        @Override
        public void onNothingSelected(AdapterView<?> parentView) 
        {

        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_register, menu);
    return true;
}

protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DATE_DIALOG_ID:
        Log.w(BalanceActivity.class.getName(), mDay + " - " + mMonth + " - " + mYear );
        return new DatePickerDialog(this, mDateSetListener, mYear, mMonth,
                mDay);
    }
    return null;
}

protected void onPrepareDialog(int id, Dialog dialog) {
    switch (id) {
    case DATE_DIALOG_ID:

        ((DatePickerDialog) dialog).updateDate(mYear, mMonth, mDay);
        break;
    }
}

private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {

    public void onDateSet(DatePicker view, int year, int monthOfYear,
            int dayOfMonth) {
        mYear = year;
        mMonth = view.getMonth();
        mDay = dayOfMonth;
        Log.w(BalanceActivity.class.getName(), "onDateSet: " + mDay + " - " + mMonth + " - " + mYear );
        updateDate();
    }
};

private void updateDate() {
    try {

        pickDate.setText(
                new StringBuilder()
                // Month is 0 based so add 1
                .append(mDay).append("/")
                .append(mMonth + 1).append("/")
                .append(mYear));
    } catch (Exception ex) {

    }

}

} 
```

和我的活动布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingTop="70dp"
tools:context=".RegisterActivity" >

<EditText
    android:id="@+id/pickdate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:clickable="true"
    android:cursorVisible="false"
    android:editable="false"
    android:ems="7"
    android:inputType="none"
    android:singleLine="true" />

<Spinner
    android:id="@+id/spinner1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/pickdate"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@+id/pickdate"
    android:layout_toRightOf="@+id/pickdate"
    android:prompt="@+string/selectAccount"
    android:ems="5" />

<EditText
    android:id="@+id/editText2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/pickdate"
    android:ems="10" >
</EditText>

<com.abdulwasie.mybalance.SpinnerCustomDialog
    android:id="@+id/spinner2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/editText2"
    android:layout_toLeftOf="@+id/spinner1"
    android:prompt="@+string/hello_world" />

</RelativeLayout> 
```

日志 ：

```
12-08 09:11:04.278: E/AndroidRuntime(10993): FATAL EXCEPTION: main
12-08 09:11:04.278: E/AndroidRuntime(10993): java.lang.NullPointerException
12-08 09:11:04.278: E/AndroidRuntime(10993):    at com.abdulwasie.mybalance.SpinnerDialog.onItemClick(SpinnerDialog.java:74)
12-08 09:11:04.278: E/AndroidRuntime(10993):    at android.widget.AdapterView.performItemClick(AdapterView.java:284)
12-08 09:11:04.278: E/AndroidRuntime(10993):    at android.widget.ListView.performItemClick(ListView.java:3569)
12-08 09:11:04.278: E/AndroidRuntime(10993):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1831)
12-08 09:11:04.278: E/AndroidRuntime(10993):    at android.os.Handler.handleCallback(Handler.java:587)
12-08 09:11:04.278: E/AndroidRuntime(10993):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-08 09:11:04.278: E/AndroidRuntime(10993):    at android.os.Looper.loop(Looper.java:150)
12-08 09:11:04.278: E/AndroidRuntime(10993):    at android.app.ActivityThread.main(ActivityThread.java:4385)
12-08 09:11:04.278: E/AndroidRuntime(10993):    at java.lang.reflect.Method.invokeNative(Native Method)
12-08 09:11:04.278: E/AndroidRuntime(10993):    at java.lang.reflect.Method.invoke(Method.java:507)
12-08 09:11:04.278: E/AndroidRuntime(10993):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
12-08 09:11:04.278: E/AndroidRuntime(10993):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
12-08 09:11:04.278: E/AndroidRuntime(10993):    at dalvik.system.NativeStart.main(Native Method) 
```

# java - Java系统属性，http.proxyHost，两个问题

> ID：13742350
> 
> 赞同：9
> 
> 时间：2012-12-06T11:09:39.710
> 
> 标签：java, properties, proxy, system-properties

我正在开发一个发出 HTTP 请求的 Java 应用程序，而我一半的开发时间都在代理之后。所以我的代码中有以下块：

```
if (BEHIND_PROXY) {
    java.util.Properties systemProperties = System.getProperties();
    systemProperties.setProperty("http.proxyHost", PROXY_HOST);
    systemProperties.setProperty("http.proxyPort", PROXY_PORT);
} 
```

这个想法是我`BEHIND_PROXY`根据我所在的位置更改 的值。我今天在工作，**不在**代理后面，忘记设置`BEHIND_PROXY`为`false`. 但是，连接仍然成功，我的应用程序收到了它请求的数据。这怎么可能？是否有内置的东西，如果无法访问代理服务器，它只是再次尝试但在此重试时绕过代理？

第二个问题，我一直在尝试查找系统属性的完整列表。我发现了很多类似[THIS](https://stackoverflow.com/questions/1803075/crowdsourcing-a-complete-list-of-common-java-system-properties-and-known-values)的帖子，但没有一个列出`http.proxyHost`或`http.proxyPort`，这让我觉得它们显然不是很完整。我是否以某种方式搜索错误？这些`http.x`属性是否属于这些其他列表？有没有更完整的清单？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T17:10:07.903

## 是否有内置的东西，如果无法访问代理服务器，它只是再次尝试但在此重试时绕过代理？

是的。

看到这个我很惊讶，但它在内部连接的来源： [sun.net.www.protocol.http.HttpURLConnection](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/net/www/protocol/http/HttpURLConnection.java#740)。在第 760 行，如果我们尝试了所有可用的代理但连接失败，我们会尝试非代理连接。

## 我是否以某种方式搜索错误？

也许。对或错，Java 哲学似乎是系统属性是临时的东西，知道一个存在的唯一方法是阅读它影响的东西的文档。在这种情况下， HttpURLConnection 链接到[Networking Properties](http://docs.oracle.com/javase/7/docs/api/java/net/doc-files/net-properties.html)上的页面。

# c# - 在 MVC 视图中显示 XML 文件的内容

> ID：13742359
> 
> 赞同：1
> 
> 时间：2012-12-06T11:09:58.540
> 
> 标签：c#, xml, asp.net-mvc, view

我的 MVC 视图中有一个“条款和条件”块。我希望从 XML 文件（HTML 格式）加载内容。

我们如何使它成为可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:11:45.613

如果您的 HTML 是直接写在一个没有多余标记的 XML 文件中（我假设是这种情况，因为您没有另外说明），您可以使用这行代码：

```
@MvcHtmlString.Create(XDocument.Load(@"filepath").ToString())); 
```

它将直接吐出到页面上。您需要包含此使用以使用 XDocument：

```
using System.Xml.Linq; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:13:00.980

您可以使用[XSLT](http://en.wikipedia.org/wiki/XSLT)。

> XSLT（可扩展样式表语言转换）是一种语言，用于将 XML 文档转换为其他 XML 文档、[1](http://en.wikipedia.org/wiki/XSLT)或其他对象，例如网页的 HTML、纯文本或 XSL 格式化对象，然后可以将其转换为 PDF、PostScript 和 PNG。[ 2]

[http://www.w3schools.com/xsl/](http://www.w3schools.com/xsl/)

干杯。

# php - 如何解决此内容无法在框架中显示？（优酷问题）

> ID：13742360
> 
> 赞同：0
> 
> 时间：2012-12-06T11:10:03.993
> 
> 标签：php, youtube-api

我正在尝试在我目前正在开发的网站上保留已发布视频的数据库。为了能够做到这一点，我必须将视频的 URL 存储到数据库中，然后我使用 php 和 sql 从数据库中调用 url，记住我在主页上的 php 定义区域中使用它。如果我使用此代码，它适用于其他视频发布网站！

`echo '<iframe width="640" height="390" src="', $row['Post_URL'],'"frameborder="0" allowFullScreen></iframe>';`

这不起作用，它说内容不能显示在框架中，但如果我这样做，它会起作用。

`<?php
echo '<iframe width="560" height="315" src="http://www.youtube.com/embed/wardQ7W8hPU" frameborder="0" allowfullscreen></iframe>';
?>`

为什么一个工作正常而另一个不工作？有什么方法可以解决这个问题，所以我可以从数据库调用 php 并将其回显，以便它可以正确显示在页面上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T14:19:50.977

我今天遇到了同样的问题。如其中一条评论所述，问题在于使用的网址......

iframe 嵌入仅适用于如下所示的网址：

```
http://www.youtube.com/embed/[video_id] 
```

大多数人都在使用“共享”功能，该功能会生成缩小的网址，例如：

```
http://youtu.be/[video_id] 
```

但是，如果您查看“嵌入”功能，您会注意到它会生成一个带有 src url 的 iframe，就像第一个示例一样。

所以要回答这个问题，在使用 iframe 嵌入时，请像第一个示例一样使用 src url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T13:57:36.863

我正在使用动态数据执行此操作，并且客户端更容易使用 youtube Share 链接。所以......然后只需从该网址获取 youtube 视频 ID。

```
// we can't use the "share" link so need to just get the video ID
$youtubePath = parse_url($youtubeShareLink,PHP_URL_PATH);
$youtubeId = str_replace('/','',$youtubePath); 
```

现在我们可以在 iframe 中使用 ID（调整 youtube 中每个嵌入选项的宽度和高度）

```
<iframe width="560" height="315" src="//www.youtube.com/embed/<? echo $youtubeId; ?>?rel=0" frameborder="0" allowfullscreen></iframe> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:44:13.790

尝试这个

```
<iframe width="640" height="390" src="<?php echo $row['Post_URL'] ?>" frameborder="0" allowFullScreen></iframe> 
```

或这个

```
 <?php
      echo "<iframe width='640' height='390' src='{$row['Post_URL']}' frameborder='0' allowFullScreen></iframe>";
  ?> 
```

或这个

```
<?php
    echo "<iframe width='640' height='390' src='" . $row['Post_URL'] . "' frameborder='0' allowFullScreen></iframe>";
?> 
```

它们都是相同的，并且会执行相同的过程。

# google-analytics - 谷歌分析：从入站链接到销售的跟踪

> ID：13742362
> 
> 赞同：0
> 
> 时间：2012-12-06T11:10:10.593
> 
> 标签：google-analytics

我需要能够跟踪来自外部站点的特定入站链接是否会导致个人销售 - 使用 Google Analytics 可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:26:22.437

转到流量来源-> 来源-> 推荐。单击域名以深入到 url 级别。在页面顶部点击“电子商务”标签。这将为您提供该链接的销售数量，而不是单个交易。

如果您需要处理个人交易，最好的办法是要求外部网站将活动参数添加到链接（请参阅此处： http: [//support.google.com/analytics/bin/answer.py ?hl=en&answer =1033867](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033867)），根据活动名称构建自定义细分并将其应用于转化->交易显示。

再想一想，您也许可以根据推荐路径构建一个细分（因此不需要活动参数），但我还没有对此进行测试。不过值得一试。

# java - 如何使用 glReadPixels() Bufferedimage 水平翻转图像并使用 ImageIO 输出？

> ID：13742365
> 
> 赞同：5
> 
> 时间：2012-12-06T11:10:20.700
> 
> 标签：java, screenshot, lwjgl, javax.imageio, glreadpixels

如何翻转屏幕截图图像？我在其他任何地方都找不到我的问题。
示例代码：

```
/*
*@param fileLoc //Location of fileoutput destination
*@param format  //"png"
*@param WIDTH   //Display.width();
*@param HEIGHT  //Display.height();
*/
private void getScreenImage(){
             int[] pixels = new int[WIDTH * HEIGHT];
             int bindex;
             // allocate space for RBG pixels
             ByteBuffer fb = ByteBuffer.allocateDirect(WIDTH * HEIGHT * 3);//.order(ByteOrder.nativeOrder());
             // grab a copy of the current frame contents as RGB

             glReadPixels(0, 0, WIDTH, HEIGHT, GL_RGB, GL_UNSIGNED_BYTE, fb);

             BufferedImage image = new BufferedImage(WIDTH, HEIGHT,BufferedImage.TYPE_INT_RGB);
             // convert RGB data in ByteBuffer to integer array
             for (int i=0; i < pixels.length; i++) {
                 bindex = i * 3;
                 pixels[i] =
                     ((fb.get(bindex) << 16))  +
                     ((fb.get(bindex+1) << 8))  +
                     ((fb.get(bindex+2) << 0));
             }
             try {
                //Create a BufferedImage with the RGB pixels then save as PNG
                 image.setRGB(0, 0, WIDTH, HEIGHT, pixels, 0 , WIDTH);

                 ImageIO.write(image, format , fileLoc);
             }
             catch (Exception e) {
                 System.out.println("ScreenShot() exception: " +e);
             }
         } 
```

基本上，该代码用于捕获屏幕并以“png”格式存储。
但它输出的是水平翻转的图像，因为`glReadPixels();`从
左下角到右上角读取。

那么如何在 I 之前水平翻转图像`ImageIO.write();`？

非常感谢，罗斯。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T03:10:49.597

EG 使用[`AffineTransform`](http://docs.oracle.com/javase/tutorial/2d/advanced/transforming.html).

![水平翻转图像](../Images/dedec580fd1635d9af1e061058d78094.png)

```
import java.awt.*;
import java.awt.geom.AffineTransform;
import java.awt.image.BufferedImage;
import javax.swing.*;

public class Test001 {

    public static BufferedImage getFlippedImage(BufferedImage bi) {
        BufferedImage flipped = new BufferedImage(
                bi.getWidth(),
                bi.getHeight(),
                bi.getType());
        AffineTransform tran = AffineTransform.getTranslateInstance(bi.getWidth(), 0);
        AffineTransform flip = AffineTransform.getScaleInstance(-1d, 1d);
        tran.concatenate(flip);

        Graphics2D g = flipped.createGraphics();
        g.setTransform(tran);
        g.drawImage(bi, 0, 0, null);
        g.dispose();

        return flipped;
    }

    Test001(BufferedImage bi) {
        JPanel gui = new JPanel(new GridLayout(1,2,2,2));

        gui.add(new JLabel(new ImageIcon(bi)));
        gui.add(new JLabel(new ImageIcon(getFlippedImage(bi))));

        JOptionPane.showMessageDialog(null, gui);
    }

    public static void main(String[] args) throws AWTException {
        final Robot robot = new Robot();
        Runnable r = new Runnable() {

            @Override
            public void run() {
                final BufferedImage bi = robot.createScreenCapture(
                        new Rectangle(0, 360, 200, 100));
                new Test001(bi);
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T14:40:05.570

值得注意的是，简单地按照您想要的顺序从缓冲区中读取像素可能会更快，而不是向后读取它们并执行昂贵的转换操作。此外，由于您确定 BufferedImage 是`TYPE_INT_RGB`，因此直接写入其光栅应该是安全的。

```
ByteBuffer fb = BufferUtils.createByteBuffer(WIDTH * HEIGHT * 3);
BufferedImage image = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_RGB);
glReadPixels(0, 0, WIDTH, HEIGHT, GL_RGB, GL_UNSIGNED_BYTE, fb);
int[] pixels = ((DataBufferInt) image.getRaster().getDataBuffer()).getData();
for (int i = pixels.length - 1; i >= 0; i--) {
    int x = i % WIDTH, y = i / WIDTH * WIDTH;
    pixels[y + WIDTH - 1 - x] = (fb.get() & 0xff) << 16 | (fb.get() & 0xff) << 8 | fb.get() & 0xff;
} 
```

# asp.net - 不同的文件服务器负载平衡问题

> ID：13742366
> 
> 赞同：1
> 
> 时间：2012-12-06T11:10:25.857
> 
> 标签：asp.net, webserver, fileserver

我已经在两台服务器之间实现了负载平衡。我的项目托管在两台服务器上。一切正常。
一个问题是，无论何时上传文件，它都会上传该服务器之一。因此，当我在应用程序中引用该文件的路径时，该文件可能会丢失，因为该文件未上传到另一台服务器。这意味着同时在两台服务器上都需要图像。
但我不想在两台服务器上上传文件，因为这完全浪费了存储空间。所以我想如果在一台服务器上找不到文件，那么它应该自动从另一台服务器上获取。
我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:33:26.320

您可以创建一个共享网络文件夹，所有文件都在其中上传。这会将所有文件放在一个位置。然后，您可以创建一个名为 static.yourdomain.com 的新网站，该网站将提供这些文件。这是一种用于静态\共享文件的 CDN。

# java - Java - 适合搜索区间的数据结构

> ID：13742367
> 
> 赞同：7
> 
> 时间：2012-12-06T11:10:26.560
> 
> 标签：java, data-structures

> **可能重复：**
> [Java 是否存在开放式区间实现？](https://stackoverflow.com/questions/724575/does-an-open-ended-interval-implementation-exist-for-java)

我是 Java 新手，我想知道什么是最好的数据结构，以及如何针对我的情况搜索该数据结构：我有 int 间隔，例如：10-100、200-500、1000-5000 和每个区间我都有一个值 1、2、3、4。我想知道如何将所有这些区间及其值保存在数据结构中，以及如何搜索该数据结构以返回特定区间的值. 例如。如果我搜索 15，即间隔 10-100，我想返回 1。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T12:11:22.697

使用 TreeMap，它是 NavigableMap（Java 6 或更高版本）。

假设您有条目`key->value` `(10->1, 100->1, 200->2, 500->2, 1000->3, 5000->3)`

`floorEntry(15)`将返回`10->1`

`ceilingEntry(15)`将返回`100->1`

有了这个，您可以确定 15 的区间数，即 1。您还可以确定一个数字是否在区间之间。

编辑：添加示例

```
 TreeMap<Integer, Integer> map = new TreeMap<Integer, Integer>();
    map.put(10, 1);
    map.put(100, 1);
    map.put(200, 2);
    map.put(500, 2);
    map.put(1000, 3);
    map.put(5000, 3);
    int lookingFor = 15;
    int groupBelow = map.floorEntry(lookingFor).getValue();
    int groupAbove = map.ceilingEntry(lookingFor).getValue();
    if (groupBelow == groupAbove) {
        System.out.println("Number " + lookingFor + " is in group " + groupBelow);
    } else {
        System.out.println("Number " + lookingFor + 
                " is between groups " + groupBelow + " and " + groupAbove);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T11:28:44.390

如果您的间隔是互斥的，则在间隔的最后一个成员上使用比较器并在搜索项目的 tailMap 上使用 firstKey 的排序映射 (java.util.TreeMap) 应该可以正常工作。

如果间隔可能重叠，您需要一个分段树 (http://en.wikipedia.org/wiki/Segment_tree)，标准库中没有实现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T11:38:53.613

我会使用这种方法：

```
import static org.hamcrest.core.Is.is;
import static org.junit.Assert.assertThat;

import org.junit.Test;

import java.util.ArrayList;
import java.util.List;

public class IntervalsTest {

    @Test
    public void shouldReturn1() {
        Intervals intervals = new Intervals();

        intervals.add(1, 10, 100);
        intervals.add(2, 200, 500);

        int result = intervals.findInterval(15);

        assertThat(result, is(1));

    }

    @Test
    public void shouldReturn2() {
        Intervals intervals = new Intervals();

        intervals.add(1, 10, 100);
        intervals.add(2, 200, 500);

        int result = intervals.findInterval(201);

        assertThat(result, is(2));

    }
}

class Range {

    private final int value;

    private final int lowerBound;

    private final int upperBound;

    Range(int value, int lowerBound, int upperBound) {
        this.value = value;
        this.lowerBound = lowerBound;
        this.upperBound = upperBound;
    }

    boolean includes(int givenValue) {
        return givenValue >= lowerBound && givenValue <= upperBound;

    }

    public int getValue() {
        return value;
    }
}

class Intervals {

    public List<Range> ranges = new ArrayList<Range>();

    void add(int value, int lowerBound, int upperBound) {
        add(new Range(value, lowerBound, upperBound));
    }

    void add(Range range) {
        this.ranges.add(range);
    }

    int findInterval(int givenValue) {
        for (Range range : ranges) {
            if(range.includes(givenValue)){
                return range.getValue();
            }
        }

        return 0; // nothing found // or exception
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-06T11:52:58.277

使用 hashmap（快，更多内存）或 List（更慢，更少内存）。我为您提供以下两种解决方案：

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

class Interval {

    private int begin;
    private int end;
    // 1, 2, 3, 4
    private int value;

    public Interval(int begin, int end, int value) {
        this.begin = begin;
        this.end = end;
        this.value = value;
    }

    public int getBegin() {
        return begin;
    }

    public void setBegin(int begin) {
        this.begin = begin;
    }

    public int getEnd() {
        return end;
    }

    public void setEnd(int end) {
        this.end = end;
    }

    public int getValue() {
        return value;
    }

    public void setValue(int value) {
        this.value = value;
    }

    public boolean contains(int number) {
        return (number > begin - 1) && (number < end + 1);
    }
}

public class IntervalSearch {

    // more memory consuming struct, fastest
    Map<Integer, Interval> intervalMap = new HashMap<Integer, Interval>();

    // less memory consuming, little slower
    List<Interval> intervalList = new ArrayList<Interval>();

    private boolean fastMethod = true;

    public IntervalSearch(boolean useFastMethod) {
        this.fastMethod = useFastMethod;
    }

    public Integer search(int number) {
        return fastMethod ? searchFast(number) : searchSlow(number);
    }

    private Integer searchFast(int number) {
        return intervalMap.get(number).getValue();
    }

    private Integer searchSlow(int number) {
        for (Interval ivl : intervalList) {
            if (ivl.contains(number)) {
                return ivl.getValue();
            }
        }
        return null;
    }

    public void addInterval(Integer begin, Integer end, Integer value) {
        Interval newIvl = new Interval(begin, end, value);
        if (fastMethod) {
            addIntervalToMap(newIvl);
        } else {
            addIntervalToList(newIvl);
        }
    }

    private void addIntervalToList(Interval newIvl) {
        intervalList.add(newIvl);
    }

    private void addIntervalToMap(Interval newIvl) {
        for (int i = newIvl.getBegin(); i < newIvl.getEnd() + 1; i++) {
            intervalMap.put(i, newIvl);
        }
    }

    public boolean isFastMethod() {
        return fastMethod;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T11:32:19.630

您的问题并不完全清楚，尤其是值 1、2、3、4 是什么意思。但是，如果您想要一个包含区间限制的数据结构，并检查其中是否有数字，那就做一个！像这样：

```
public class Interval {
    int low;
    int high;

    public Interval(int low, int high) {
        this.low = low;
        this.high = high;
    }

    public boolean intervalContains(int value) {
        return ((value >= low) && (value <= high));
    }
} 
```

并使用它：

```
Interval theInterval = new Interval(10,100);
System.out.print(theInterval.contains(15)); // prints "true" 
```

# java - 如何将字符串排序为字符串 arr

> ID：13742372
> 
> 赞同：-4
> 
> 时间：2012-12-06T11:10:48.567
> 
> 标签：java, string, parsing

```
String st = "1 2 3 -1 0 9 76 65 f0rest Neo Get_Right";

String[] sArr = st.split(" ");

Arrays.sort(sArr); 
```

然后使用 a `HashMap`，按频率添加这些元素，但输出不如预期。我应该覆盖`compareTo()`吗？

输出应该是这样的：

```
-1 - 1

0 - 1

1 - 1

2 - 3

3 - 1

8 - 3

9 - 2

f0rest - 1

Get_Right - 1

Neo - 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:15:11.523

您的数组将根据`String`s 的自然顺序进行排序。如果您不喜欢它们的排序方式，那么是的，您应该创建一个实现`Comparable`以根据您的`compareTo`方法实现对它们进行排序的类。

我建议使用`List<YourObject>`where`YourObject`实现`Comparable`，然后执行`Collections.sort(yourList)`.

# ruby-on-rails - 在 Rails 中向特定用户发送电子邮件的逻辑

> ID：13742373
> 
> 赞同：0
> 
> 时间：2012-12-06T11:10:50.513
> 
> 标签：ruby-on-rails, ruby, email

这更像是一个概念性问题，因为我觉得我做错了：

我必须向一些满足某些条件的用户发送电子邮件。我现在拥有的是以下内容：

1）一个基本上做到这一点的任务：

```
users = User.includes(:aptitudes).where({:role => ['Boy','boy','kid'], :aptitudes => {:name =>'Good'} })
users.each do |user|
  MyMailer.report(user).deliver
end 
```

2）在MyMailer的report方法中，我有几件事：

```
def report(user)

    @user = user
    @value = @user.value

    @travels = @user.travels.where(:end_at)

    @rewards = @user.rewards

    # More logic depending of values of User.

...

end 
```

发生的情况是，在 Mailer 本身中，有时 @user 对象的特定属性或属性不满足要发送的电子邮件。我想知道我应该在哪里确保我传递给邮件程序的所有用户都会收到一封电子邮件？我应该在 rake 中创建一个新方法来进行这些检查吗？或者你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:52:37.687

一般来说，只要名字足够透露意图，你就可以为所欲为。

如果你给我这个 MyMailer 对象来使用，而不知道实现，我希望它`report`在请求时发送一​​个而不是过滤掉它自己的突发奇想......最终处理其他问题（发送失败、延迟、重试等） ) 但是当我给它一个用户时，我**希望**该用户收到电子邮件。

因此，要回答您的问题，是的，我要么在调用 Mailer 之前过滤掉所有用户，要么在 Mailer 中定义一个名为类似的方法`report_only_those_users`来处理过滤。

顺便说一句，您可以将电子邮件列表传递给[ActionMailer](http://guides.rubyonrails.org/action_mailer_basics.html)（第 2.3.4 节），而不必一次循环发送一封。

# python - 谷歌联系人 API - Auth2.0

> ID：13742377
> 
> 赞同：4
> 
> 时间：2012-12-06T11:11:09.080
> 
> 标签：python, google-api, oauth-2.0, google-contacts-api

我正在寻找一种从谷歌帐户中检索我的联系人的每个电子邮件地址的好方法，以用于 Python 中的“桌面”应用程序。

第一次，我通过 Google Code 创建了一个应用程序。我切换了 Google Plus API，检索了我的大部分用户数据，但没有检索到我的任何联系人。

我开始调查，发现了很多东西，但大部分都已经过时了。

[我找到了一个很好的方法来检索我的联系人，使用 gdata 库，但通过https://www.google.com/m8/feeds](https://www.google.com/m8/feeds)授予我完整的读/写访问权限，没有反馈。

```
self.gd_client = gdata.contacts.client.ContactsClient(source='MyAppliName')
self.gd_client.ClientLogin(email, password, self.gd_client.source) 
```

根据迁移到 stackoverflow 的官方 'google contact api' google group，只读访问被破坏。

顺便说一句，我不是“相信我的应用程序，我使用只读访问，我发誓”的超级粉丝。

[我在https://developers.google.com/oauthplayground](https://developers.google.com/oauthplayground)找到了 google api 游乐场，他们在其中使用 OAuth2.0 令牌和大多数 api，包括联系人，切换网页：

> Google OAuth 2.0 Playground 正在请求以下权限：
> 
> *   管理您的联系人

根据这个游乐场，可以将 OAuth2.0 与 google contact api 一起使用，但我不知道如何将 https://www.google.com/m8/feeds 添加到我的范围内，它没有出现在列表中.

还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-26T09:35:18.413

如果这个问题仍然对您开放，这里有一些示例代码如何使用 oauth2 和 Google Contact API v3：

```
import gdata.contacts.client
from gdata.gauth import AuthSubToken
from oauth2client import tools
from oauth2client.client import flow_from_clientsecrets
from oauth2client.file import Storage

def oauth2_authorize_application(client_secret_file, scope, credential_cache_file='credentials_cache.json'):
    """
    authorize an application to the requested scope by asking the user in a browser.

    :param client_secret_file: json file containing the client secret for an offline application
    :param scope: scope(s) to authorize the application for
    :param credential_cache_file: if provided or not None, the credenials will be cached in a file.
        The user does not need to be reauthenticated
    :return OAuth2Credentials object
    """
    FLOW = flow_from_clientsecrets(client_secret_file,
                                   scope=scope)

    storage = Storage(credential_cache_file)
    credentials = storage.get()

    if credentials is None or credentials.invalid:
        # Run oauth2 flow with default arguments.
        credentials = tools.run_flow(FLOW, storage, tools.argparser.parse_args([]))

    return credentials

SCOPES = ['https://www.google.com/m8/feeds/', 'https://www.googleapis.com/auth/userinfo.email']

credentials = oauth2_authorize_application('client-secret.json', scope=SCOPES)
token_string = credentials.get_access_token().access_token

# deprecated!
# auth_token = AuthSubToken(token_string, SCOPES)

with open('client-secret.json') as f:
    oauth2_client_secret = json.load(f)

auth_token = gdata.gauth.OAuth2Token(
    client_id=oauth2_client_secret['web']['client_id'],
    client_secret=oauth2_client_secret['web']['client_secret'],
    scope=SCOPES,
    user_agent='MyUserAgent/1.0',
    access_token=credentials.get_access_token().access_token,
    refresh_token=credentials.refresh_token)

client = gdata.contacts.client.ContactsClient(auth_token=auth_token)

query = gdata.contacts.client.ContactsQuery() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:57:41.287

请求应如下所示：

```
https://accounts.google.com/o/oauth2/auth?
scope=https%3A%2F%2Fwww.google.com%2Fm8%2Ffeeds&
state=<myState>&
redirect_uri=<Redirect URI>&
response_type=code&
client_id=<my Client ID>&approval_prompt=force 
```

这将获得对用户联系人的读/写访问权限。

# jquery - 移动 html 网站，我需要使用 jQuery Mobile 吗？

> ID：13742378
> 
> 赞同：1
> 
> 时间：2012-12-06T11:11:10.007
> 
> 标签：jquery, jquery-mobile, mobile

所以暂时我将只是创建我的应用程序的移动版本。基本的 html/css/jquery 大小适合移动屏幕...

我应该仍然为此使用 jQuery Mobile，还是可以像使用 jQuery 覆盖、选项卡等任何网页一样简单地创建...

在这种情况下，jQuery mobile 与标准 jQuery 有什么好处吗？或者它只是简单地添加“原生移动式”动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:14:07.850

如果您只想在视觉效果方面精简页面，那么您可以在 CSS 中完成您想要的并且不需要 jQueryMobile。jQM 为您提供了出色的页面转换、列表视图、对话框等。如果您希望您的页面表现得更像一个移动应用程序，那么您希望使用 jQueryMobile。

# asp.net - 自定义缓存不缓存查询字符串

> ID：13742385
> 
> 赞同：0
> 
> 时间：2012-12-06T11:11:31.193
> 
> 标签：asp.net, caching, query-string, global-asax, outputcache

我在页面上使用自定义缓存，留下时间戳以跟随缓存版本。

我有

```
<%@ OutputCache Duration="1200" VaryByParam="None" VaryByCustom="myCache" Location="ServerAndClient" %> 
```

在页面上，并且 Global.asax 的代码隐藏（简化）

```
Public Overrides Function GetVaryByCustomString(context As HttpContext, arg As String) As String
If (arg = "myCache") Then
   If context.Request.QueryString("Type").ToString() = "1" Then Return "cache-1"
   If context.Request.QueryString("Type").ToString() = "2" Then Return "cache-2"
   If context.Request.Cookies("Type").Value = "1" Then Return "cache-1"
   Return "cache-2"
End If 
```

`cache-2`当没有查询字符串请求并且cookie没有另外说明时，是默认状态。该页面保存值为 的 cookie `Type`。

当我调用页面`?Type=1`或`?Type=2`页面未保存到缓存时 - 每次刷新时间戳都会更改。

我发现如果我调用**没有**参数缓存的页面会`Type`被保存，然后当我调用带有参数的页面时也会存在。

有解释吗？此外 - 在 Global.asax 中，我无法访问`Response`对象或文件系统来记录正在发生的事情。有办法吗？

**更新**

例如调用`<url>?Type=1`，然后`<url>`给我下一次调用的缓存，`<url>?Type=1`但给**相同的缓存**。`<url>?Type=2`

**更新**

我现在有`Return "cache" & context.Request.QueryString("Type")`。虽然发送没有`Type`查询字符串的请求会提供页面的缓存版本，但发送`Type`不会缓存，尽管结果（`cache1`或`cache2`）是相同的并且页面应该被缓存。

**跟进** 我发现了正在发送`Type=3`，或者其他任何东西，`1`并且`2`确实根据需要缓存了页面。`Page_Load`作用于价值观`1`& `2`——有什么联系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:39:57.410

[这个问题](https://stackoverflow.com/questions/9411180/asp-net-outputcache-and-cookies)的答案似乎解释了很多。解决方法是一个单独的问题。

# java - JNA：char数组作为函数参数

> ID：13742387
> 
> 赞同：3
> 
> 时间：2012-12-06T11:11:40.173
> 
> 标签：java, c++, function, dll, jna

使用 JNA，我正在加载一个用 C++ 编写的 dll 并调用该 C++ 函数中存在的函数：

```
 int xxfunction(Char* ptr){...} 
```

在这里，我需要发送一个 char 数组，以便该函数为其赋值。基本上我需要通过引用传递 char 数组。

根据 JNA 文档，`char*`Java 中的 C++ 等效项是`String`，所以我创建了一个 String 对象并将其传递给函数，如下所示：

**Java函数声明：**

```
interface foo extends Library
{
 ....//loading dll and other work
  int xxfunction(String chararray);//function declaration
} 
```

**Java函数调用：**

```
public static void main(String args[]) 
{
 String str="abcd";
 int i=fooinstance.xxfunction(str);//function call
} 
```

但是当我执行这段代码时，它给了我：

> Java 运行时环境检测到致命错误：无法写入核心转储。默认情况下，在 Windows 的客户端版本上不启用小型转储

崩溃发生在 Java 虚拟机之外的本地代码中。请参阅有问题的框架以了解报告错误的位置。

那么在函数需要 char 指针的情况下，将 String 作为参数传递是正确的方法吗？java中的C++ char等价物是字节，所以我需要将字节数组作为参数传递吗？

我什至不能将指针对象从 JNA 传递给函数，因为它给了我`IllegalargumentException`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T18:10:49.307

只`const char*`应该映射到 Java `String`。如果有任何可能*不是*，`const`则应改为传递缓冲区（`byte[]`、`Memory`或 NIO 缓冲区），然后`Native.toString()`在“返回”值上使用。

作为风格问题，您应该始终向被调用者提供所提供缓冲区的长度，以便它有足够的可用信息来避免覆盖缓冲区。

# ios - UICollectionView 和每列的单元格数

> ID：13742389
> 
> 赞同：0
> 
> 时间：2012-12-06T11:11:45.127
> 
> 标签：ios, uicollectionview

如下面的屏幕截图所示，我有一个带有多个单元格的 UICollectionView。目前，设备的方向是纵向。

![在此处输入图像描述](../Images/a2c28860ee30f14ddabbb839a375b254.png)

由于我有以下代码，因此每列有多达 19 个单元格。

```
- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section;
{
    return UIEdgeInsetsMake(0, 100, 0, 100);
} 
```

如果我将方向更改为横向，每列上的单元格数将会改变。无论设备的方向如何，是否可以拥有相同数量的列？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:35:01.520

您可以采取多种方法。您可以在 IB 中为您的集合视图添加一个宽度约束（并确保您在侧面只有一个约束或在宽度方向上有一个居中约束）。

另一种方法是根据方向更改插图。您将覆盖 didRotateFromInterfaceOrientation: 并检查 interfaceOrientation 属性以确定您所处的方向，然后适当地设置插图。

# iphone - 如何在真实设备上运行 iOS 应用程序

> ID：13742390
> 
> 赞同：0
> 
> 时间：2012-12-06T11:11:48.823
> 
> 标签：iphone, ios

我使用 PhoneGap 框架开发了一个 iOS 应用程序。它在模拟器中运行良好且运行良好。现在我想在真实设备上测试它，即带有 iOS 6.0 的 iPhone 5。我彻底谷歌了。我有两种方法：越狱设备（我不接受）或在 Apple 门户中竞标帐户。

有没有其他方法可以在真实设备中测试我的设备我的应用程序？有没有人来解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:17:12.330

官方方法是进入[iOS 开发者计划](https://developer.apple.com/programs/ios/)（99 美元），这样您就有机会创建所需的证书和配置文件。您还将有机会通过 App Store 分发您的应用程序。

如果您不愿意这样做，另一种方法是越狱您的设备，这基本上是一种规避为您的应用程序使用证书的需要的方法。然后，您的应用程序将通过 Cydia 等替代应用程序商店（即没有 Apple App Store）分发。

第三种选择可能是与您的 iOS 开发者朋友联系，并请他/她为您的设备构建应用程序，以便您可以通过 iTunes 安装它。

没有其他选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:17:34.637

[您必须在Apple.Developer](https://developer.apple.com/)中注册开发者证书。然后创建配置文件并安装它。否则，您无法在真实设备中安装您的应用程序。

您可以参考[此链接](https://developer.apple.com/programs/ios/)了解更多信息

# exception - java.lang.NumberFormatException：对于输入字符串：“04/12/2012 14:44”

> ID：13742391
> 
> 赞同：0
> 
> 时间：2012-12-06T11:11:51.810
> 
> 标签：exception, numbers, format

我有一个带有以下代码的程序：

在 XXX.java 中，我使用**String.valueOf(date.getTime())**强文本将 SVC_APPR_DT_IN_MILLIS 设置为从 Oracle 数据库中的记录中获取的日期值。它存储为字符串：

```
private void setApprovalDateProperty(Date date) {
    setAdditionalProperty(SVC_APPR_DT_IN_MILLIS, String.valueOf(date.getTime()));
} 
```

**在 YYY.java 中，我使用new Date(Long.valueOf())**返回日期

 **```
private Date getApprovalDate() throws ParseException {
    String approvalDateInMillis = this.record
        .getAdditionalProperty(XXX.SVC_APPR_DT_IN_MILLIS);
    return new Date(Long.valueOf(approvalDateInMillis));
} 
```

对于其中一条记录，它会引发以下错误，其中**“04/12/2012 14:44:38”**是数据库中记录的日期。

```
For input string: "04/12/2012 14:44"
java.lang.NumberFormatException: For input string: "04/12/2012 14:44"
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
    at java.lang.Long.parseLong(Long.java:412)
    at java.lang.Long.valueOf(Long.java:518)
    at YYY.getApprovalDate(YYY.java:634) 
```

我查了数据库，数据库中的很多记录都可以处理没有任何问题，除了这一条。我可以知道这个错误的可能原因是什么吗？我想模拟这个问题，但我不知道如何复制它。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:22:01.627

听起来数据库中的一条记录插入了错误的版本，或者数据库已损坏。

你在调用 Long.valueOf 之前检查了approvalDateInMillis 的值是多少？

你可以添加例如

```
if (!approvalDateInMillis.matches("^[0-9+]$"))
  throw new Error(
    String.format("Invalid approvalDateInMillis format: '%s'", approvalDateInMillis)); 
```

在返回语句之前，然后继续调试以查看数据库中真正的内容。**

# javascript - 获取jquery dataTable中选中复选框的行ID？

> ID：13742396
> 
> 赞同：3
> 
> 时间：2012-12-06T11:12:13.333
> 
> 标签：javascript, jquery, html, datatable

我有一个 DataTable，其中一列是复选框。我可以选择多个复选框。现在单击按钮，我想获取选定复选框的行 ID。单击按钮完成 ajax 操作后，我想再次选择上述行 ID 的复选框。基本上如何获取选中的行 ID，然后再次选中复选框？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T13:04:12.593

假设每个复选框都有 RowId 作为他的值属性。

获取所有选中的复选框：

```
var selectedIds = [];

$(":checked").each(function() {
    selectedIds.push($(this).val());
}); 
```

重新检查复选框：

```
$.each(selectedIds, function(index, id) {
    $(":checkbox[value='" + id + "']").prop("checked", true);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T11:42:41.700

如果我正确理解你的问题，这就是你要找的，

***jQuery代码***

```
$(document).ready(function() {
    $('#btn').click(function(){
       var dataArr = [];
       $('input:checked').each(function(){
        alert($(this).closest('tr[id]').attr('id'));// just to see the rowid's
            dataArr.push($(this).closest('tr[id]').attr('id')); // insert rowid's to array
       });
       // send data to back-end via ajax
       $.ajax({
              type : "POST",
              url : 'server.php',
              data : "content="+dataArr,
              success: function(data) {
                  alert(data);// alert the data from the server
              },
              error : function() {
              }
        });
    });
}); 
```

***html代码***

```
<table border="2" cellspacing="2" cellpadding="2">
  <tr id="row1">
    <td><input id="checkbox1" name="checkbox1" type="checkbox" value="1" /></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr id="row2">
    <td><input id="checkbox2" name="checkbox2" type="checkbox" value="2" /></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr id="row3">
    <td><input id="checkbox3" name="checkbox3" type="checkbox" value="3" /></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>
<input id="btn" name="btn" type="button" value="CLICK" /> 
```

# ios - Whatsapp 风格 - 键盘出现在工具栏下方

> ID：13742399
> 
> 赞同：-1
> 
> 时间：2012-12-06T11:12:21.150
> 
> 标签：ios, keyboard, toolbar, whatsapp

我该怎么做whatsapp风格，当点击消息空间时，它会从底部向上推动键盘，以及向上推动工具栏。然后当取消时（即在后台单击），它将使用工具栏将键盘向下推

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:31:22.290

这是通过 U `IKeyboardWillShowNotification`、`UIKeyboardDidShowNotification`和通知完成`UIKeyboardWillHideNotification`的。`UIKeyboardDidHideNotification`然后，当您处理通知时，您会调整框架的高度：

例如：

```
- (void) keyboardWillShow:(NSNotification *)aNotification{

    NSDictionary* info = [aNotification userInfo];
    NSTimeInterval duration = [[info objectForKey:UIKeyboardAnimationDurationUserInfoKey] doubleValue];

    NSValue* aValue = [info objectForKey:UIKeyboardFrameBeginUserInfoKey];
    CGFloat keyboardHeight = [aValue CGRectValue].size.height;

    self.keyboardVissible = YES;

    [UIView animateWithDuration:duration animations:^{
        CGRect frame = self.contentView.frame;
        frame.size.height -= keyboardHeight;
        self.contentView.frame = frame;
    }];
} 
```

您需要注册才能接收通知，您应该只在视图可见时收听键盘通知，如果您在以下位置执行此操作可能会发生奇怪的事情`viewDidLoad`：

```
- (void) viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil];
}

- (void) viewDidDisappear:(BOOL)animated {
    [super viewDidDisappear:animated];

    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillHideNotification object:nil];
} 
```

# ios - 加载存储在 iPhone 中的离线图像

> ID：13742405
> 
> 赞同：0
> 
> 时间：2012-12-06T11:12:39.967
> 
> 标签：ios, image, core-data, storage

我必须构建一个 iPhone 应用程序，每 X 天与网络服务进行在线同步，它会下载 X 图像并将它们保存到设备中。

然后，在离线模式下，我必须将图像加载到表格视图中。

我在考虑 Core Data 存储，这可能吗？也许将图像存储在核心数据数据库中会减慢应用程序的速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:32:48.487

我尝试了类似的方法，但发现 Core Data 不合适。如果我是你，我会将对图像的引用保留在 CD 中，但将图像本身存储起来。

# ios - Chirp 应用程序是如何实现的？

> ID：13742411
> 
> 赞同：-1
> 
> 时间：2012-12-06T11:12:51.930
> 
> 标签：ios, audio

[https://itunes.apple.com/us/app/chirp/id529469280?mt=8](https://itunes.apple.com/us/app/chirp/id529469280?mt=8)

Chirp 是一种神奇的新方式来分享你的东西——使用声音。啁啾将信息从一部 iPhone '唱'到另一部。分享照片、链接、笔记等：全部来自您的 iPhone 内置扬声器。

有谁知道它是如何实现的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:18:46.630

近声数据传输或变体。

[http://www.tagattitude.fr/products/technology](http://www.tagattitude.fr/products/technology)

# javascript - 错误：无法调用未定义的方法“createChild”

> ID：13742413
> 
> 赞同：1
> 
> 时间：2012-12-06T11:12:56.417
> 
> 标签：javascript, browser, extjs

我编写了这样定义的 ExtJS4 类：

```
 Ext.define('Ext.ux.PictureBox', {
        extend: 'Ext.panel.Panel',
        alias: 'widget.picturebox',    
        url: "",   

        afterRender: function () {
            this.callParent();
            this.imageEl = Ext.DomHelper.append(this.body, Ext.String.format("<img style='width:{0}px;height:{1}px' src='{2}' />", this.width, this.height, this.url), true);

       this.items.items[0].addCls('browse-picture-button');
       this.items.items[1].addCls('remove-picture-button');    

        },

     initComponent: function() {

     var conf = {
        items:[
        {
          itemid: 'browseBtn',
          xtype: 'fileuploadfield',
          name: 'photo',
            buttonText: '...',
            buttonOnly: true,
          text: '...',    
            width: 30,
            height: 20
        },

         {
         itemid: 'removeBtn',
         xtype: 'button',
         text: 'X',
             width: 30,
             height: 20
         }        
        ]       
    };        

     Ext.apply(this, Ext.apply(this.initialConfig, conf));
     this.callParent(arguments);     
        },

 setSize: function (w, h) {
        this.callParent();
        if (this.imageEl) {
            this.imageEl.setSize(w, h);
        }
    },
 setUrl: function (url) {
        this.url = url;
        if (this.rendered) {
            this.imageEl.dom.src = url;
        }
    }
}); 
```

然后，我创建了这个类：

```
Ext.create('Ext.ux.PictureBox', {   
    width: 300,
    height: 300,       
    url: 'http://blogs-images.forbes.com/daviddisalvo/files/2012/01/googlelogo2.jpg',
    renderTo: Ext.getBody()
});​ 
```

并且脚本抛出错误无法调用未定义的方法“createChild”。为什么 ？

如果我使用 'button 而不是 fileuploadfield; 一切正常；

Yuo 可以在此处查看并运行此示例[http://jsfiddle.net/C3HEu/12/](http://jsfiddle.net/C3HEu/12/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:50:10.213

你需要你所有的 Ext 代码在里面运行`Ext.onReady()`。[http://jsfiddle.net/C3HEu/22/](http://jsfiddle.net/C3HEu/22/)

或者，让 Ext 在浏览器的`onDomReady`事件中运行，而不是`onLoad`. [http://jsfiddle.net/C3HEu/24/](http://jsfiddle.net/C3HEu/24/)

# php - 找不到 SplFixedArray

> ID：13742415
> 
> 赞同：1
> 
> 时间：2012-12-06T11:13:02.390
> 
> 标签：php, arrays

使用 PHP 我正在尝试解析非常大的 xml 文件并将它们插入到 mysql 数据库中，虽然这几个月来一直工作得很好，但我决定让脚本开始从 xml 中收集一些数据并将其存储在一个数组中，以便稍后在脚本中处理，我使用的服务器是具有 3GB RAM 的专用服务器，我认为只要我设置了标准数组，它就可以轻松地将所需的信息存储在标准数组中memory_limit 到 2500MB，它甚至不应该靠近它，只是发现 PHP 的数组在内存使用方面效率极低，并且在运行脚本的那一端达到限制并且脚本停止运行。

搜索后，我遇到了一个名为 SplFixedArray 的东西，我想我会尝试，但是所有文档都说我需要做的就是使用一个

```
$array = new SplFixedArray(5); 
```

只有当我尝试使用它时，我才会在尝试运行它时收到此错误

> PHP 致命错误：在第 6 行的 /home/rob/testscript.php 中找不到类“SplFixedArray”

我到处寻找，包括 php.net，但我似乎无法找出为什么它找不到它。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:22:42.147

这个问题是你的 PHP 安装太旧了。

更新到比 5.3 更新的版本，你就可以正常工作了 :)

# javascript - 在悬停时显示文本时使 img 变暗

> ID：13742416
> 
> 赞同：2
> 
> 时间：2012-12-06T11:13:08.790
> 
> 标签：javascript, jquery, css, hover

我网站中的某些图像在悬停时需要变暗，同时，以显示悬停之前隐藏的文本（文本将显示在变暗图像的顶部）。

我已经以这种方式实现了 img-darken 部分 - [http://jsfiddle.net/4Dfpm/](http://jsfiddle.net/4Dfpm/)。

实现“悬停时显示文本（相同悬停）”部分的好方法是什么？可以只用 CSS 完成，还是这次我需要使用脚本？

谢谢。

** img-darken 部分是如何实现的：

```
​

a.darken {
    background: black;
}

a.darken img {
    display: block;
    transition: all 0.5s linear;
}

a.darken:hover img {
    opacity: 0.7;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T11:26:41.940

**CSS 解决方案**

在你的 jsfiddle 上工作并改变了 jsfiddle 是[http://jsfiddle.net/4Dfpm/55/](http://jsfiddle.net/4Dfpm/55/)

我在 <a> 标记中添加了 <span>，其中 class=darken

```
<span>text</span> 
```

更新的CSS是

```
a.darken{
...;
position:relative;
...
} 
```

添加的新CSS是

```
a.darken span{position:absolute;top:5px;color:#000;left:10px}
a.darken:hover span{color:#fff;
    -webkit-transition: all 0.5s linear;
       -moz-transition: all 0.5s linear;
        -ms-transition: all 0.5s linear;
         -o-transition: all 0.5s linear;
            transition: all 0.5s linear;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:26:02.810

明显的 jQuery 解决方案：在标记中添加消息：

```
<a href="http://google.com" class="darken">
    <img src="http://www.prelovac.com/vladimir/wp-content/uploads/2008/03/example.jpg" width="200">
    <span class="message">Some message here</span>
</a> 
```

添加一些CSS：

```
a.darken span{
    display:none;
    position:absolute;
    top:0px; left:0px;
    float:left;
    color:white
} 
```

JQuery的洒：

```
$('.darken').hover(
    function(){
       $(this).find('.message').fadeIn(1000);
    },
    function(){
       $(this).find('.message').fadeOut(1000);
    }
    ); 
```

等等瞧：http: [//jsfiddle.net/4Dfpm/56/](http://jsfiddle.net/4Dfpm/56/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:30:09.420

使用脚本来做到这一点

HTML：

```
<div class="hoverText">Some text</div> 
```

JS：

```
$("img").hover(
  function () {
    $(".hoverText").show();
  }, 
  function () {
    $(".hoverText").hide();
  }
);​ 
```

CSS：

```
 div.hoverText{display = none;} 
```

这是一个小提琴：

[http://jsfiddle.net/HFgGx/](http://jsfiddle.net/HFgGx/)

用你的逻辑调整这个模型；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T11:30:42.533

试试这个[http://cssdesk.com/hrKeE](http://cssdesk.com/hrKeE)

```
.captioned {
  position:relative;
  display:inline-block;
}
  .captioned img {
    display:block;
  }
  .captioned .caption {
    position:absolute;
    top:0;
    left:0;
    display:none;
    width:100%;
    height:100%;
    color:white;
    background:rgba(0, 0, 0, .75);
  }
  .captioned:hover .caption {
    display:block;
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T11:30:59.857

如果您在锚点内添加一个跨度，给它一个没有 alpha 的白色 RGBA 颜色，然后在悬停时更改 alpha 值，您将单独使用 CSS 获得您想要的效果：

```
<a href="http://google.com" class="darken">
    <img src="http://www.prelovac.com/vladimir/wp-content/uploads/2008/03/example.jpg" width="200">
    <span>text</span>
</a> 
```

不要忘记将跨度定位在锚点内，这样它就不会显示在图像下方。

```
a.darken {
    display: inline-block;
    background: black;
    padding: 0;
    position: relative;
}

a.darken span
{
    position: absolute;
    top: 10px;
    left: 10px;
    color: rgba(255, 255, 255, 0);
}

a.darken:hover span
{
    color: rgba(255, 255, 255, 1); 
} 
```

​http://jsfiddle.net/Kyle_Sevenoaks/4Dfpm/57/

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T11:36:55.447

检查小提琴：

> **[http://jsfiddle.net/4Dfpm/59/](http://jsfiddle.net/4Dfpm/59/)**

全部通过 css 完成。虽然你也可以用 jQuery 来实现它，

你的 html 我编辑了一点：

```
<a href="http://google.com" class="darken">
    <img src="http://callzeb.com/themes/images/JQuery_logo.png">
    <span>123</span>
</a> 
```

并编辑了一点CSS：

```
a.darken {
   display: inline-block;
   background: black;
   padding: 0;
   width:229px;
   height:200px;
   overflow:hidden;
   position:relative;
   text-align:center;
}

a.darken img {
   display: block;

-webkit-transition: all 0.5s linear;
   -moz-transition: all 0.5s linear;
    -ms-transition: all 0.5s linear;
     -o-transition: all 0.5s linear;
        transition: all 0.5s linear;
}

a.darken:hover img {
    opacity: 0.7;
}

a.darken:hover span{
    display:block;
    position:absolute;
    z-index:9999;
    bottom:10px;
    color:red;
    font-size:24px;        
}

span{display:none;} 
```

# command - 使用 j2ssh 执行多个命令

> ID：13742427
> 
> 赞同：3
> 
> 时间：2012-12-06T11:13:46.693
> 
> 标签：command, j2ssh

我想知道如何使用 j2ssh 执行多个命令。我从网上得到的代码如下：

```
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;

import com.sshtools.j2ssh.io.IOStreamConnector;
import com.sshtools.j2ssh.io.IOStreamConnectorState;
import com.sshtools.j2ssh.connection.*;

import com.sshtools.j2ssh.SshClient;

import com.sshtools.j2ssh.authentication.PasswordAuthenticationClient;
import com.sshtools.j2ssh.authentication.AuthenticationProtocolState;
import com.sshtools.j2ssh.session.SessionChannelClient;

import com.sshtools.j2ssh.configuration.SshConnectionProperties;

import com.sshtools.j2ssh.transport.ConsoleHostKeyVerification;

public class MySSHClient {

  SshClient ssh = null;
  SshConnectionProperties properties = null;
  SessionChannelClient session = null;

  public MySSHClient(String hostName, String userName, String passwd )
  {

    try
    {
      // Make a client connection
      ssh = new SshClient();
      properties = new SshConnectionProperties();
      properties.setHost(hostName);

      // Connect to the host
      ssh.connect(properties, new ConsoleHostKeyVerification());

      // Create a password authentication instance
      PasswordAuthenticationClient pwd = new PasswordAuthenticationClient();

      pwd.setUsername(userName);
      pwd.setPassword(passwd);

      // Try the authentication
      int result = ssh.authenticate(pwd);

      // Evaluate the result
      if (result==AuthenticationProtocolState.COMPLETE) {

        System.out.println("Connection Authenticated");
      }
    }
    catch(Exception e)
    {
      System.out.println("Exception : " + e.getMessage());
    }

  }//end of method.

  public String execCmd(String cmd)
  {
    String theOutput = "";
    try
    {
      // The connection is authenticated we can now do some real work!
      session = ssh.openSessionChannel();

      if ( session.executeCommand(cmd) )
      {
        IOStreamConnector output = new IOStreamConnector();
        java.io.ByteArrayOutputStream bos =  new
        java.io.ByteArrayOutputStream();
        output.connect(session.getInputStream(), bos );
        session.getState().waitForState(ChannelState.CHANNEL_CLOSED);
        theOutput = bos.toString();
      }
      //else
      //throw Exception("Failed to execute command : " + cmd);
      //System.out.println("Failed to execute command : " + cmd);
    }
    catch(Exception e)
    {
      System.out.println("Exception : " + e.getMessage());
    }

    return theOutput;
  }

} 
```

我试图转到一个目录，然后使用 ls 命令列出文件，但它没有用

```
MySSHClient sshc = new MySSHClient(<hostName>, <userName>, <passwd>);
System.out.println( sshc.execCmd("cd test") );
System.out.println( sshc.execCmd("ls") ); 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:55:54.443

尝试用分号分隔命令。例如：`System.out.println( sshc.execCmd("cd test; ls") );`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:18:18.730

在命令之间添加*and*运算符 ( )：`&&`

```
System.out.println( sshc.execCmd("cd test && ls") ); 
```

`&&`比`;`因为如果`cd`失败`ls`则不执行更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-13T09:29:53.837

`executeCommand`尝试在输出流中写入命令而不是使用`session.getOutputStream()`-`'\n'`最后添加。然后读取输入流。

例如：

```
session.getOutputStream().write((command + "\n").getBytes()); 
```

# iphone - 从 iphone 导入 sqlite3 中的 csv 文件。

> ID：13742428
> 
> 赞同：-1
> 
> 时间：2012-12-06T11:13:48.300
> 
> 标签：iphone, ios, ios5, csv

**如何在 iPhone 中创建任何应用程序以将 csv 文件导入 sqlite3。请提供任何示例、建议或任何帮助。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:53:34.533

执行以下步骤将 csv 导入 sqlite3 数据库

1.  将文件添加到资源文件夹中。（假设文件名是“List.csv”）

2.  首先获取CSV文件的路径。

    ```
    NSString *path = [[NSBundle mainBundle] pathForResource:@"List" ofType:@"csv"]; 
    ```

3.  编写以下方法来解析和插入数据库。

    ```
    [self insertIntoDatabaseFromFile:path]; 
    ```

4.  方法如下

    ```
    -(void)insertIntoDatabaseFromFile:(NSString*)path
    {

     NSString *fileDataString=[NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];

     //Gives u the array with all lines separated by new line.
     NSArray *linesArray=[fileDataString componentsSeparatedByString:@"\r"];
     int k = 0;
     for (id string in linesArray){

        //Gives u the number of items in one line separated by comma(,)
        NSString *lineString=[linesArray objectAtIndex:k];

        //Gives u the array of all components.
        NSArray *columnArray=[lineString componentsSeparatedByString:@","];

       //Get elements from array and create a query to add all into database.
       //Write your code for that.

       k++;

    } 
    ```

# python - 设置与 getenv 一起使用的环境变量（不是 GetEnvironmentVariable）

> ID：13742429
> 
> 赞同：3
> 
> 时间：2012-12-06T11:13:50.010
> 
> 标签：python, windows, environment-variables

我有一个使用`getenv`( `<stdlib.h>`) 调用获取启动选项的 DLL。我想在打开 DLL 之前在同一进程中设置该变量，以便可以通过`getenv`. 我应该使用哪个功能来设置它？

我了解到windows下有两组环境变量：一组通过win32 API（GetEnvironemntVariable，SetEnvironmentVariable）操作，另一组可以使用读取`getenv`，并且可能通过[_putenv](http://msdn.microsoft.com/en-us/library/83zh4e6k%28v=vs.80%29.aspx)设置，是我应该使用的吗？

这个函数是否可以从 python 访问，也许是通过 ctypes？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2022-02-04T09:37:59.567

目前~VS2019的情况*似乎*是：

*   对`getenv`函数的调用从 MS CRT 在加载时初始化的块中检索值。
*   调用以`GetEnvironmentVariable`从流程环境块中检索值。
*   调用*仅*`SetEnvironmentVariable`更新来自进程环境块的值。这些变化*不会*被.**`getenv`**
***   调用`putenv`更新CRT 块中的值，*还**调用*Win32`SetEnvironmentVariable`更新[进程环境块](https://docs.microsoft.com/en-us/windows/win32/procthread/environment-variables)。**

 **所以，实际上不管你用它做什么：

*   用于`_wputenv_s`设置环境变量 - 它会同时更新两者。
*   用于`::GetEnvironmentVariableW`读取：它将从环境块中读取，无论使用哪种方法，都将包含该值。

## 关于`getenv`

如果使用的代码使用`getenv`与您的代码相同的 MS CRT - 也就是说，代码动态链接到 CRT 并且实际上使用与您相同的版本，那么您始终可以使用`putenv`.

如果 DLL（及其 CRT）是动态加载或延迟加载的，并且您能够`putenv`在加载 dll 之前调用，那么您可以使用它。

（这是推测，我还没有完全测试过：）如果 DLL 已经加载到您的进程中并且它使用静态链接的 CRT，或者您使用的 CRT 之外的另一个 CRT，则**其** `getenv`调用的环境数据已经加载向上，您在 DLL 边界一侧所做的任何事情都不会改变这一点。我猜在这种情况下运气不好。

参考：

*   [https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/getenv-wgetenv?view=msvc-170](https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/getenv-wgetenv?view=msvc-170)
*   [https://github.com/curl/curl/issues/4774](https://github.com/curl/curl/issues/4774)
*   [https://blogs.msmvps.com/senthil/2009/10/13/when-what-you-set-is-not-what-you-get-setenvironmentvariable-and-getenv/](https://blogs.msmvps.com/senthil/2009/10/13/when-what-you-set-is-not-what-you-get-setenvironmentvariable-and-getenv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-02-04T10:08:45.853

由于问题是用 Python 标记的，因此在 Python 中管理环境变量的好方法是更新`os.environ`映射。

因为文档`os.putenv()`说：

> 对 os.environ 中项目的赋值会自动转换为对 putenv() 的相应调用；但是，对 putenv() 的调用不会更新 os.environ，因此实际上最好分配给 os.environ 的项目。**

# c# - 一个计时器与三个计时器的性能

> ID：13742431
> 
> 赞同：7
> 
> 时间：2012-12-06T11:13:51.507
> 
> 标签：c#, .net, timer

我有一个关于`System.Timers.Timer`在我的 .NET 应用程序中使用的问题。

我有三个不同的事件，一个每秒触发一次，另一个每分钟触发一次，最后一个每半小时触发一次。

从性能角度来看，拥有一个计时器还是三个计时器更好？

使用一个计时器的方法是检查`ElapsedEventArgs`' SignalTime 并将其与先前测量的时间进行比较。当然，如果您更改了 DateTime，这并不完全有效，但这不是这里的问题。基本上每一秒我都会检查一分钟或半小时是否已经过去......

我担心的是使用 3 个计时器会产生过多的开销。我错了，为了简单明了，我应该使用 3 还是 1 计时器就足够了？

代码：

```
private void TimerEverySecondElapsed(object sender, ElapsedEventArgs e)
    {
        timerEverySecond.Enabled = false;
        OnTimerElapsed(TimerType.EverySecond);

        // Raise an event every minute
        if ((e.SignalTime - previousMinute) >= minuteSpan)
        {
            OnTimerElapsed(TimerType.EveryMinute);
            previousMinute = e.SignalTime;
        }

        // Raise an event every half hour
        if ((e.SignalTime - previousHalfhour) >= semiHourSpan)
        {
            OnTimerElapsed(TimerType.EverySemiHour);
            previousHalfhour = e.SignalTime;
        }

        timerEverySecond.Enabled = true;
    } 
```

`minuteSpan`并且`semiHourSpan`是只读的时间跨度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T11:24:17.790

无论哪种方式，它都不会产生太大的影响。无论有多少定时器，后台都只有一个循环。效率最低的情况下，您将使用线程池中的 3 个线程，但可用的线程*很多*，所以这没什么大不了的。如果它使您的代码更易于阅读，我会说去吧。

但是请记住，这仅适用于`Threading.Timer`（AKA `Timers.Timer`）。`Forms.Timer`行为有点不同，最好只坚持其中一个，因为它只在 UI 线程上运行，所以你可能会遇到一些同步问题。

[Threading.Timer 与 Forms.Timer](https://stackoverflow.com/questions/418423/threading-timer-vs-forms-timer)

更多资源：

[http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/f9a1c67d-8579-4baa-9952-20b3c0daf38a/](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/f9a1c67d-8579-4baa-9952-20b3c0daf38a/)

[我可以创建多少个 System.Timers.Timer 实例？我可以扩展多远？](https://stackoverflow.com/questions/3103150/how-many-system-timers-timer-instances-can-i-create-how-far-can-i-scale)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:22:57.043

与 1 相比，3 计时器增加的开销非常小，而且代码很可能会好很多（在可读性和可维护性方面）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:24:11.600

我认为使用 if 的检查比三个计时器的开销更大，此外，您可能会在尝试使用一个计时器时遇到一些奇怪的情况。

我会选择三个计时器。

# c - 如何在微控制器的内部 Flash ROM 上写入 .hex 文件？

> ID：13742432
> 
> 赞同：0
> 
> 时间：2012-12-06T11:14:00.287
> 
> 标签：c, linux, embedded

我想在大小为 32 kb 的内部 flashROM 上写入一个 28 kb 闪存大小的“.hex”文件。上面提到的问题是用于初始化 flashROM。我为编写该文件所做的工作和代码如下所述：

*   我有一个 Intel hex 格式的 .hex 文件，我必须读取和写入 At91(8051) 微控制器的内部 FlashROM。
*   以“rb+”模式打开 .hex 文件。
*   获取文件的长度并将指针设置为起始地址（第零地址）。
*   由于我需要逐页写入该文件，并且在我的情况下页面大小为 256 字节，因此我将文件除以 256。
*   之后，我尝试编写该文件。

请让我知道我哪里出错了。代码如下。

```
int a,b; int size,last_chunk; FILE *file; char *buffer1,name[20]; unsigned long fileLen;

file = fopen("flashROM.hex", "rb+");
if (!file)
{
    fprintf(stderr, "Unable to open file %s", name);
    return;
}

fseek(file, 0, SEEK_END);
fileLen=ftell(file);
printf("the file length is:%d\n",fileLen);
fseek(file, 0, SEEK_SET);

//Allocate memory
buffer1 =(char *)malloc(fileLen+1);

if (!buffer1)
{
    fprintf(stderr, "Memory error!");
            fclose(file);
    return;
}

//Read file contents into buffer
fread(buffer1, fileLen, 1, file);
/* We have to divide the entire file into chunks of 256 bytes*/
size = fileLen/256;
printf("\nsize = %d\n",size);
last_chunk = fileLen%256;
printf("\nlast chunk = %d bytes\n",last_chunk);

address = 0x0000;
printf("File upgradation should start from :%.4x",address);

for(a=0;a<=size;a++)
{
    write(fd,&buffer1,size);
    printf("Iteration=[%d]\t Data=[%x]\n",a,*buffer1);
    usleep(5000);
}
for(b=0;b<=last_chunk;b++)
{
    write(fd,&buffer1,1);
    usleep(5000);
} 
```

* * *

执行上述程序的二进制文件后，我的结果如下：

```
 Writing upgrade file
    the file length is:30855

    size = 120

    last chunk = 135 bytes
    File upgradation should start from :0000
    Iteration=[0]    Data=[3a]
    Iteration=[1]    Data=[3a]
    Iteration=[2]    Data=[3a]
    Iteration=[3]    Data=[3a]
    Iteration=[4]    Data=[3a]
    Iteration=[5]    Data=[3a]
    Iteration=[6]    Data=[3a]
    Iteration=[7]    Data=[3a] 
```

我不知道，为什么数据总是“3a”，不清楚。请让我知道我在编程中做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T11:59:55.840

您需要一个特殊的工具来读取`.hex`文件并执行任何必要的操作将其写入控制器的闪存（JTAG，通过任何通信方式与引导加载程序通信，......）。

该工具取决于您特定的微控制器系列。8051 信息不足，许多供应商提供的 8051 种类繁多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T11:16:14.373

尝试将`"wb+"`其用作[fopen的模式](http://linux.die.net/man/3/fopen)

如果文件不存在，则以可写方式打开文件将创建它。

您写入数据的代码看起来也很可疑。您正在传递一个指向缓冲区指针的指针，`write`而不是一个指向缓冲区的简单指针。我也没有看到指针增加，所以你重复写入相同的数据。

您可以尝试使用以下内容替换您的编写代码：

```
char* ptr = buffer1;
for(a=0;a<=size;a++)
{
    write(fd,ptr,size);
    ptr+=size;
    printf("Iteration=[%d]\t Data=[%x]\n",a,*buffer1);
    usleep(5000);
}
for(b=0;b<=last_chunk;b++)
{
    write(fd,ptr,1);
    usleep(5000);
} 
```

# sql-server - 添加数据长度条件使查询变慢

> ID：13742440
> 
> 赞同：2
> 
> 时间：2012-12-06T11:14:25.760
> 
> 标签：sql-server, performance, sql-server-2012, datalength

我有一个表 mytable ，其中包含一些列，包括列`datekey`（这是 a`date`并具有索引）、一列`contents`是 a`varbinary(max)`和一列`stringhash`是 a `varchar(100)`。和一起构成表`stringhash`的`datekey`主键。一切都在我的本地机器上运行。

跑步

```
SELECT TOP 1 * FROM mytable where datekey='2012-12-05' 
```

返回 0 行并花费 0 秒。但是如果我添加一个`datalength`条件：

```
SELECT TOP 1 * FROM mytable where datekey='2012-12-05' and datalength(contents)=0 
```

它运行了很长时间并且在我放弃等待之前没有返回任何东西。

我的问题： **为什么？我如何找出为什么这需要这么长时间？**

* * *

这是我到目前为止检查的内容：

当我单击“显示估计的执行计划”时，它也需要很长时间并且在我放弃等待之前没有返回任何内容。

如果我做

```
SELECT TOP 1000 datalength(contents) FROM mytable order by datalength(contents) desc 
```

它需要 7 秒并返回一个列表 4228081、4218689 等。

```
exec sp_spaceused 'mytable' 
```

返回

```
rows        reserved     data         index_size  unused
564019      50755752 KB  50705672 KB  42928 KB    7152 KB 
```

所以表在 50 GB 时相当大。跑步

```
SELECT TOP 1000 * FROM mytable 
```

需要 26 秒。

sqlservr.exe 进程大约为 6 GB，这是我为数据库设置的限制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T20:22:37.087

这需要很长时间，因为您的查询需要为每一行评估 DATALENGTH，然后对结果进行排序，然后才能返回第一条记录。如果字段的 DATALENGTH（或者它是否包含任何值）是您可能会重复查询的内容，我建议您使用一个额外的索引字段（可能是一个持久计算字段）来保存结果并对其进行搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-10T13:28:29.623

这篇旧的[msdn 博客文章](https://blogs.msdn.microsoft.com/sqltips/2006/07/14/datalength-optimizations-for-lob-data-types/)似乎同意`datalength`对每一行进行评估的@MartW 答案。但是最好了解“评估”的真正含义以及性能下降的真正根源是什么。

如问题中所述，列中每个值的大小`contents`可能很大。这意味着每个大于 ~8Kb 的值都存储在特殊的 LOB 存储中。因此，考虑到其他列的大小，很明显，该表占用的大部分空间都被此 LOB 存储占用，即大约 50Gb。

即使`contents`已经评估了每一行的列长度，这在上面链接的帖子中得到了证明，它仍然存储在 LOB 中。所以引擎仍然需要读取 LOB 存储的某些部分来执行查询。

If LOB-storage isn't in RAM at the time of a query execution then we need to read it from a disk, which is of course much slower than from RAM. Also possibly the read of LOB-parts is rather randomized than linear which is even more slow as it tends to raise the whole number of memory-blocks needed to be read from a disk.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:33:06.620

目前它可能不会使用主键，因为在 datekey 列之前包含 stringhash 列。尝试添加仅包含 datekey 列的附加索引。一旦创建了该密钥，如果它仍然很慢，您还可以尝试查询提示，例如：

```
SELECT TOP 1 * FROM mytable where datekey='2012-12-05' and datalength(contents)=0 WITH INDEX = IX_datekey 
```

您还可以创建一个单独的长度列，该列在您的应用程序或插入/更新触发器中更新。

# actionscript-3 - 如何访问 xml 列表 AS3 的 XML 节点？

> ID：13742443
> 
> 赞同：0
> 
> 时间：2012-12-06T11:14:37.170
> 
> 标签：actionscript-3, flash, apache-flex

类示例：

```
package {

    import flash.events.*;
    import flash.net.*;

    public class XmlLoader extends EventDispatcher{

        private var _xmlList:XMLList;

        public function XmlLoader(xmlPath:String){
            var xmlUrlRequest:URLRequest = new URLRequest(xmlPath);
            var xmlUrlLoader:URLLoader =  new URLLoader(xmlUrlRequest);
            xmlUrlLoader.addEventListener(Event.COMPLETE, xmlLoaded);
        }

        private function xmlLoaded(e:Event):void{
            e.currentTarget.removeEventListener(Event.COMPLETE, xmlLoaded);
            var xml:XML = new XML(e.currentTarget.data);
            this._xmlList = xml.*;
            dispatchEvent(new Event(Event.COMPLETE));
        }

        public function getXmlList():XMLList{
            return this._xmlList;
        }

    }
} 
```

类使用的一个例子是：

```
var menuXmlList:XmlLoader = new XmlLoader("pt/menu.xml");
menuXmlList.addEventListener(Event.COMPLETE, printList);

function printList(e:Event):void{
    trace(e.currentTarget.getXmlList());
} 
```

这将打印出 xml 文件的内容。如何在类外访问 xmlList 的节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:43:40.430

我会稍微修改一下加载器公共类 XmlLoader extends EventDispatcher{

```
 private var _xml:XML;

        public function XmlLoader(xmlPath:String){
            var xmlUrlRequest:URLRequest = new URLRequest(xmlPath);
            var xmlUrlLoader:URLLoader =  new URLLoader(xmlUrlRequest);
            xmlUrlLoader.addEventListener(Event.COMPLETE, xmlLoaded);
        }

        private function xmlLoaded(e:Event):void{
            e.currentTarget.removeEventListener(Event.COMPLETE, xmlLoaded);
            _xml = new XML(e.currentTarget.data);
            dispatchEvent(new Event(Event.COMPLETE));
        }

        public function getXml():XML{
            return this._xml;
        }

    }
} 
```

然后我将像这样访问节点。

```
var menuXmlList:XmlLoader = new XmlLoader("pt/menu.xml");
menuXmlList.addEventListener(Event.COMPLETE, printList);

function printList(e:Event):void{
    var myXML:XML = (e.currentTarget.getXml());

    var children:XMLList = myXML.children();
    var child:XML;

    for each(child in children)
    {
         trace("Node name: "+child.name()+" -- value: "+String(node));
    }

    // for and xml like
    // <root>
    //     <node1>
    //           <subnode>abc</subnode>
    //           <subnode>def</subnode>
    //           <subnode>ghi</subnode>
    //     </node1>
    //     <node2>
    //           <subnode>123</subnode>
    //           <subnode>456</subnode>
    //           <subnode>789</subnode>
    //     </node2>
    // </root>
    //
    // to access all subnodes inside node 2 use
    //
    // var list:XMLList = xml.node2.subnode;

} 
```

# r - 在多列中重复

> ID：13742446
> 
> 赞同：35
> 
> 时间：2012-12-06T11:14:49.567
> 
> 标签：r, dataframe, duplicate-removal

我有一个像这样的数据框

```
> df
  a  b c    d
1 1  2 A 1001
2 2  4 B 1002
3 3  6 B 1002
4 4  8 C 1003
5 5 10 D 1004
6 6 12 D 1004
7 7 13 E 1005
8 8 14 E 1006 
```

我想删除 c 列和 d 列中有重复值的行。因此，在此示例中，第 2、3、5 和 6 行将被删除。

我用过这个，它有效：

```
df[!(df$c %in% df$c[duplicated(df$c)] & df$d %in% df$d[duplicated(df$d)]),]
>df
  a  b c    d
1 1  2 A 1001
4 4  8 C 1003
7 7 13 E 1005
8 8 14 E 1006 
```

但它看起来很笨重，我不禁想到有更好的方法。有什么建议么？

如果有人想在这里重新创建数据框，那就是 dput：

```
df = structure(list(a = c(1, 2, 3, 4, 5, 6, 7, 8), b = c(2, 4, 6, 
8, 10, 12, 13, 14), c = structure(c(1L, 2L, 2L, 3L, 4L, 4L, 5L, 
5L), .Label = c("A", "B", "C", "D", "E"), class = "factor"), 
    d = c(1001, 1002, 1002, 1003, 1004, 1004, 1005, 1006)), .Names = c("a", 
"b", "c", "d"), row.names = c(NA, -8L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-06T11:26:51.717

如果您使用`duplicated`两次，它会起作用：

```
df[!(duplicated(df[c("c","d")]) | duplicated(df[c("c","d")], fromLast = TRUE)), ]

  a  b c    d
1 1  2 A 1001
4 4  8 C 1003
7 7 13 E 1005
8 8 14 E 1006 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-07-14T15:18:47.330

使用 2 列创建一个新对象：

```
df_dups <- df[c("c", "d")] 
```

现在将其应用于您的主df：

```
df[!duplicated(df_dups),] 
```

看起来更整洁且易于查看/更改您正在使用的列。

# python - 在句号之间提取字符串，除非 CO

> ID：13742447
> 
> 赞同：2
> 
> 时间：2012-12-06T11:14:50.340
> 
> 标签：python, regex

我正在努力使用正则表达式来提取句号之间的部分字符串，但如果句号前面有特定字母（例如示例中的 CO.），则忽略句号。我们可以假设相关块总是以“LTD”结尾。

情况1：

```
string = "FREDS CHIP SHOP.  S & B SERVICES CO. & SONS LTD. 1-12 THE STREET" 
```

我想要：`"S & B SERVICES CO. & SONS LTD."`

案例二：

```
string = "SOME TEXT.  BUSINESS NAME LTD. 1-12 THE STREET" 
```

我想`"BUSINESS NAME LTD."`

案例3：

```
string = "SIMPLE BUSINESS NAME LTD. 1-12 THE STREET" 
```

我想`"SIMPLE BUSINESS NAME LTD."`

我目前有：

```
#!/usr/bin/python
import sys
import re

vnumber_name = "FREDS CHIP SHOP.  S & B SERVICES CO. & SONS LTD. 1-12 THE STREET"
#vnumber_name = "SOME TEXT.  BUSINESS NAME LTD. 1-12 THE STREET"
#vnumber_name = "SIMPLE BUSINESS NAME LTD. 1-12 THE STREET"

def test(vnumber_name):
    #ltd = re.search(r'.+\sLTD[.]?', vnumber_name)
    ltd = re.search(r'[.?][\s]{1,2}(?:[^.]+|(?!CO.))LTD[.]?', vnumber_name)
    if ltd:
        print "got it: " + ltd.group(0)
    else:
        print "nothing"

test(vnumber_name) 
```

这是不对的。

我可以创建一些 if 子句，但是用一行正则表达式来获得它会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:40:21.943

您可能希望免除多个缩写，因此使用“负向后查找”可以更灵活地使用：从字符串的开头匹配*不*跟随某些字符串的下一个句点（`CO`或`CORP`对于本示例）。非贪婪`.*?`（后跟一个句点）使您匹配*第一个*这样的句点。

```
.*?(?<!..CO|CORP)\. 
```

这将允许您正确地将字符串分解为“句子”。如果您只对以 LTD 结尾的那些感兴趣，那么您可以选择那些。

# iphone - MPMoviePlayerController 仅在 iOS 5 中显示黑屏

> ID：13742448
> 
> 赞同：0
> 
> 时间：2012-12-06T11:14:52.773
> 
> 标签：iphone, ios, ios5, ios-simulator, mpmovieplayercontroller

我正在下载一个 aac 文件并使用以下代码在 MPMoviePlayerController 中播放它

```
movieController = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:self.filePath]];
[self.view addSubview:movieController.view];
CGRect screenBound = [[UIScreen mainScreen] bounds];
CGSize screenSize = screenBound.size;
movieController.view.frame = CGRectMake(0,0,screenSize.width, screenSize.height);
[movieController setFullscreen:YES];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(doneBtnMediaPlayer:) name:MPMoviePlayerWillExitFullscreenNotification object:nil]; 
```

movieController 是（非原子，强）类属性

这适用于除 iOS 5（和 iOS 5 模拟器）之外的所有 iOS。在 iOS 5 中它显示黑屏并且文件在后台播放。

我注意到的另一件事是，当我在现有应用程序上运行应用程序时，它在 iOS5 上也可以正常工作。但是当我从设备中删除应用程序然后运行它时，它只是显示黑屏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:59:05.680

看看这是否有帮助：

这是你的头文件 (.h) #import #import

```
@interface ViewController : UIViewController

@property(nonatomic,retain)MPMoviePlayerViewController *playerController;

@end 
```

这是你的实现文件 (.m) #import "ViewController.h"

```
@interface ViewController ()

@end

@implementation ViewController
@synthesize playerController;

- (void)viewDidLoad
{
    [super viewDidLoad];
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"gold etche" ofType:@"mov"]];
playerController = [[MPMoviePlayerViewController alloc]initWithContentURL:url];
[self presentMoviePlayerViewControllerAnimated:playerController];
[self.view insertSubview:playerController.view atIndex:0];
playerController.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
playerController.moviePlayer.controlStyle = MPMovieControlStyleDefault;
playerController.moviePlayer.scalingMode = MPMovieScalingModeNone;

[playerController.moviePlayer play];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];

}

@end 
```

我在 IOS 5（5.0 和 5.1）和 IOS 6 中对此进行了测试，一切似乎都很好

# python - python 2.3 - 删除目录而不等待进程完成

> ID：13742449
> 
> 赞同：0
> 
> 时间：2012-12-06T11:15:03.047
> 
> 标签：python, linux, python-2.3

我希望编写一个 python 脚本（要在 Linux 中运行），它的要求之一是删除一个目录。问题是该目录非常大，需要几分钟才能完成。

问题：

1.  我不希望删除命令阻止脚本执行
2.  最重要的是，我希望删除命令允许脚本完成执行并在脚本终止后继续工作

可行吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:24:24.033

满足这些要求的一件事是守护进程。fork 然后从主进程返回。这样，删除调用可以尽可能多地阻塞。

```
doRemove()
   fork()
   if child
      call huge remove
   else
      return 
```

# 3d - 软件渲染概念（软件渲染器和gpu之间的边界）

> ID：13742450
> 
> 赞同：0
> 
> 时间：2012-12-06T11:15:09.730
> 
> 标签：3d, rendering, gpu, gpgpu

软件渲染器必须至少在将图像数据写入帧缓冲区时与 GPU 进行通信（以这种或其他方式）。如果我将另外使用 gpgpu 进行计算，我的渲染器是否仍然是“软件”？**纯“软件”渲染器和 GPU 渲染器的界限在哪里？**

维基百科说：

> 在渲染（计算机图形）的上下文中，软件渲染是指无需任何专用图形硬件（例如显卡）的渲染过程。

这是否意味着软件渲染器可以发送到 GPU 的唯一工作是帧缓冲区填充，否则它将不是纯“软件”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:34:50.513

我想说的是，与单纯的**GP** GPU 功能相比，边界是您使用硬件的实际图形相关功能（以及实际的*“专用图形硬件”*，如纹理过滤、光栅化等）对您有利的地方您可以（当然在较小程度上）在任何多核处理器中找到的数据并行处理。当然最终一切都是在硬件上完成的，但只是将一些算法移植到 GPU 上，而不使用 GPU 的图形相关硬件设施并不能神奇地使其成为硬件加速渲染，即使算法本身与渲染有关。

 **当然，这是一个更主观的答案（首先是一个相当哲学和离题的问题），我猜这个界限是相当宽松的。最后，这些定义通过最近将 GPU 发展为相当通用的并行处理器来进行测试。**

# oracle - Oracle Forms 列表不显示值

> ID：13742461
> 
> 赞同：1
> 
> 时间：2012-12-06T11:15:53.937
> 
> 标签：oracle, oracleforms

我想制作一个显示值的列表，比如文本项，但在列表中。

我的代码：

```
DECLARE
      rg_dept     RecordGroup;

      rg_dname    VARCHAR2(4) := 'Name';

      dlist_ID    Item := Find_Item('PROJESCT.LIST_ID');

      nDummy      NUMBER;
BEGIN
      rg_dept := Find_Group(rg_dname);

      -- Delete any existing Group first
      IF NOT Id_Null(rg_dept) THEN
            Delete_Group(rg_dept);
      END IF;

      -- Now create a Record Group using a SQL query
      -- Your Query must have a Label and a Value (two Columns)
      -- and the data types must match your item type   
      rg_dept := Create_Group_From_Query(rg_dname,'SELECT department_name, to_char(department_id) FROM departments');

      --Clear the existing List
      Clear_List(dlist_ID);

      -- Populate the Record Group
      nDummy := Populate_Group(rg_dept);

      -- Populate the List Item
      Populate_List(dlist_ID ,rg_dept);

END; 
```

如果我制作列表项并添加此代码，表单将不显示任何内容；如果我删除列表，一切正常。

PS触发器：`when-list-item-change`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:58:19.997

最好的办法是在设计时构建所有记录组。它不会降低性能，除非你有一些巨大的、已经很慢的形式。然后在运行时填充您的列表项。始终从表单帮助中复制/粘贴代码。

`--Oracle Forms Example: Create a record group from a query, and populate it.`

```
DECLARE 
  rg_name VARCHAR2(40) := 'Salary_Range'; 
  rg_id RecordGroup; 
  errcode NUMBER; 
BEGIN 
/* 
** Make sure group doesn't already exist 
*/ 
 rg_id := Find_Group( rg_name ); 
/* 
** If it does not exist, create it and add the two 
** necessary columns to it. 
*/ 
IF Id_Null(rg_id) THEN 
 rg_id := Create_Group_From_Query( rg_name, 
  'SELECT SAL-MOD(SAL,1000) BASE_SAL_RANGE,' 
   ||'COUNT(EMPNO) EMPS_IN_RANGE ' 
   ||'FROM EMP ' 
   ||'GROUP BY SAL-MOD(SAL,1000) ' 
   ||'ORDER BY 1'); 
END IF; 
/* 
** Populate the record group 
*/ 
  errcode := Populate_Group( rg_id ); 
END; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T07:06:01.967

我应该建议您从例如When-new-Form-Instance 中填充您的列表。像往常一样，您将从表单帮助（菜单“帮助/在线帮助”）中了解需要做什么。这是我为简单填充列表所做的一个过程，仅通过指定列表项的名称和用于填充 lsit 项的 select 语句。

```
PROCEDURE populate_list_item (
  p_item_name   VARCHAR2
, p_select  VARCHAR2
) IS
    l_rg_id         RECORDGROUP;
    l_list_id       ITEM;
    l_err_num       PLS_INTEGER;

    FUNCTION create_temp_group (
      p_select      VARCHAR2
    ) RETURN RECORDGROUP IS
        l_rg_id     RECORDGROUP;
        l_group_name    VARCHAR2(30) := 'TMP$RG';
    BEGIN
        l_rg_id := FIND_GROUP(l_group_name);

        --Make sure that record group don't alreay exist
        IF NOT ID_NULL(l_rg_id) THEN
           DELETE_GROUP(l_rg_id);
        END IF;

        --Populate the temporary record group
        l_rg_id := CREATE_GROUP_FROM_QUERY(l_group_name, p_select);

        RETURN l_rg_id;
    END create_temp_group;

BEGIN
    l_rg_id := create_temp_group(p_select);

    l_err_num := Populate_Group(l_rg_id);

    --Allow for no data found in the selection query
    IF l_err_num NOT IN (0, 1403) THEN
        RAISE Form_Trigger_Failure; 
    END IF;

    l_list_id := Find_Item(p_item_name);
    IF ID_NULL(l_list_id) THEN
        RAISE Form_Trigger_Failure; 
    END IF;

    Populate_List(l_list_id, l_rg_id);

    Delete_Group(l_rg_id);
END populate_list_item; 
```

When-New-Form-Instance 是一个表单级别的触发器，应该在表单下（而不是块或项）：

![添加When-New-Form-Instance](../Images/bbeabb0dfe741783f083a89565039420.png)

# xpages - Lotus Domino Internet 站点文档

> ID：13742465
> 
> 赞同：-1
> 
> 时间：2012-12-06T11:16:01.713
> 
> 标签：xpages, lotus

我正在开发我的第一个 Xpage 应用程序，并在 domcfg.nsf 中设计了一个登录屏幕。因此，当用户键入 Myrequest.com(dummy url) 之类的 url 时，这应该将我重定向到登录页面，然后在成功登录尝试时，该页面应该重定向到 Myrequest 应用程序。您能否让我知道如何在服务器文档或 Internet 站点文档中进行配置。?

作为第一步，我执行了以下几点。

1.  已启用 从服务器文档的基本选项卡中的服务器/Internet 站点文档加载 Internet 配置。
2.  通过单击 web>>Internet 站点 Web Site-Basic Tab:: 创建新的网站文档

    一个。**此站点的描述性名称**：myRequest.com；湾。**组织**：testCompany；C。**使用此网站处理无法映射到任何其他网站的请求**：否；d。**映射到该站点的主机名或地址**：我的本地 IP 地址；e. **托管此站点的 Domino 服务器**：*

3.  在网站-配置选项卡:: a。**主页网址**：/myApp/myRequest.nsf?open

其余的配置都是默认的

当我尝试打开 myRequest.com 时，没有显示任何页面。我想我犯了一个错误。我必须更改任何配置吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T12:24:14.157

它的工作方式是：

1.  设置 Internet 站点（记得检查您的 Domino 服务器是否正在使用 Internet 站点（服务器文档中的第一个选项卡）

2.  互联网站点不应包含有关登录的任何信息 - 只是域/子域指向正确数据库中正确页面的正确路径等（可能还有 url 重定向、标题等）

3.  现在创建登录表单，例如在您的应用程序数据库（或任何其他适用的数据库）中。确保您有正确的字段，以便登录工作 - 并正确显示任何错误消息。最简单的方法是查看 domcfg.nsf 中的标准登录表单（称为“$$LoginUserForm”）（如果 domcfg.nsf 不存在，只需根据高级模板“Domino Web 服务器配置（ 8)"（模板文件：domcfg5.ntf）

4.  现在在 domcfg.nsf 中创建一个登录表单映射文档。选择它适用的特定域/子域（或所有不使用其他特定登录表单的网站的默认值），使用表单指定数据库的路径（例如您的应用程序数据库），并指定您的登录名在该数据库中形成

5.  现在您只需要打开需要您的用户登录的机制。这是在您的数据库的 ACL 中完成的。当用户未登录时，它将遵守名为“匿名”的人员条目的规则。如果此“人”不在 ACL 中，它当然会遵循默认设置。您必须确定您希望用户何时登录。如果您指定“无访问权限”，那么您可能必须在某些设计元素上设置“公开阅读”才能正确显示登录表单（例如图形文件等）。 ) 然后您还应该允许匿名人员读取公共文件（在 ACL 中）。您可能还希望用户能够阅读内容，并且仅在他们想要编写/更改某些内容时才被迫登录，

/约翰

# jquery - 如何更改通过jquery append动态创建的文本框的值

> ID：13742469
> 
> 赞同：1
> 
> 时间：2012-12-06T11:16:07.110
> 
> 标签：jquery, wordpress

您好，我正在创建一个需要动态上传多个文件的 wordpress 插件。但我无法更新 jquery 创建的文本值附加这里是我的代码。

```
 <script>
        function uploadimage(imageid)
        {

                id="#imgfile"+imageid;

                jQuery(document).ready(function() {
                 formfield = jQuery(id).attr('name');
                 tb_show('', 'media-upload.php?type=image&amp;TB_iframe=true');
                 return false;
                });

                window.send_to_editor = function(html) {
                 imgurl = jQuery('img',html).attr('src');
                 jQuery(id).val(imgurl); 
                 tb_remove();

                }
         }

        function countRows()
        {
        var oRows = document.getElementById('property').getElementsByTagName('tr');
        var i= oRows.length;

        return i;
        }

        function addRow()
        {
        var a= jQuery.noConflict();
        var i=countRows();

        var content="<tr><td>Image Link</td><td>&nbsp;</td><td>&nbsp;</td><td class='controls'><input type='text' style='width:300px;' value='img1'  name='imgfile"+i+"' id='imgfile"+i+" '></td><td><input type='button' onClick='uploadimage("+i+")' value='upload'></td></tr>";
        document.getElementById('noOfRows').value=i;
        a('#property').append(content);
        }

        </script>

        <button type="button" onclick="addRow()" class="btn btn-primary">Add Image Url</button> 
```

当我创建没有附加的上传文本框和按钮时，它可以工作。

# regex - 在 Google Analytics 中搜索和替换请求 URI 过滤器

> ID：13742484
> 
> 赞同：6
> 
> 时间：2012-12-06T11:17:18.957
> 
> 标签：regex, filter, google-analytics

我有 2 个登陆页面：

```
/aa/index.php/aa/index/[sessionID]/alpha
/bb/index.php/bb/index/[sessionID]/bravo 
```

由于 sessionID 是唯一的，因此每个登录页面都将作为不同的页面进行跟踪。因此，我需要一个过滤器来删除 sessionID。这些是我要跟踪的：

```
/aa/index.php/aa/index/alpha
/bb/index.php/bb/index/bravo 
```

我在请求 URI 上创建了搜索和替换自定义过滤器：

```
Search String: /(aa|bb)/index\.php/(aa|bb)/index/(.*)
Replace String: /$1/index.php/$2/index/$3 
```

但是`/$1/index.php/$2/index/$3`第二天我在仪表板上得到了报告。所以我尝试`/\1/index.php/\2/index/\3`了，但我得到了非常奇怪的结果，`//aa/index.php/aa/index/alpha/index.php/aa/index/aa`。

有谁知道如何引用替换字符串中的分组模式？

**我的解决方案：** 我设法使用高级过滤器解决了它。我的解决方案：

```
Field A => Request URI: /(aa|bb)/index\.php/(aa|bb)/index/(.*)/(.*) 
Field B => - 
Output to => Request URI: /$A1/index.php/$A2/index/$A4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:04:57.323

我没有使用 Google Analytics 正则表达式引擎，但在我看来，`\1`它引用了整个匹配（在其他正则表达式实现中称为`\0`），而`\2`是第一组，`\3`是第二组，依此类推。

但是，您最初的正则表达式看起来不完整——我认为它应该如下所示：

```
Search String: /(aa|bb)/index\.php/(aa|bb)/index(/.*)/(alpha|bravo)
Replace String: /\2/index.php/\3/index/\5 
```

（请注意，我不确定`?`此正则表达式实现中是否支持作为非贪婪修饰符，但如果支持，则如果您更改`/.*`为，上述搜索字符串模式可能会运行得更快一些`/.*?`。）

# python - 子流程调用失败

> ID：13742494
> 
> 赞同：2
> 
> 时间：2012-12-06T11:18:00.203
> 
> 标签：python, macos, subprocess

```
import shlex,subprocess,os
cmd = "/Applications/LibreOffice.app/Contents/MacOS/swriter --headless --invisible --convert-to pdf:writer_pdf_Export --outdir ~/Downloads ~/Downloads/HS303.xlsx"
#This works
os.popen(cmd)
#This doesnot work
subprocess.call(shlex.split(cmd)) 
```

子流程调用不起作用。这是在 Mac OSX 中完成的。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T14:23:57.257

**问题**

问题是 ~/Downloads 路径。~ 由您调用时未启用的 shell 环境扩展`subprocess.call`。下面是该问题的简化演示：

```
>>> import shlex, subprocess, os, os.path
>>> cmd = "ls ~/Downloads"
>>> print os.popen(cmd).read()
ubuntu-11.04-desktop-i386.iso
ubuntu-11.04-server-i386.iso

>>> print subprocess.check_output(shlex.split(cmd))
ls: cannot access ~/Downloads: No such file or directory
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/subprocess.py", line 537, in check_output
    raise CalledProcessError(retcode, cmd, output=output)
subprocess.CalledProcessError: Command '['ls', '~/Downloads']' returned non-zero exit status 2 
```

**解决方案**

您可以使用两种解决方案，在 python 中使用扩展 ~或使用参数`os.path.expanduser`调用`subprocess.call`/ 。我更喜欢使用over，因为它会返回命令可能产生的任何输出。以下任一解决方案都可以解决您的问题。`subprocess.check_output``shell=True``check_output``call`

```
import shlex, subprocess, os, os.path
cmd = 'ls ' + os.path.expanduser('~/Downloads')
print subprocess.check_output(shlex.split(cmd))

cmd = 'ls ~/Downloads'
print subprocess.check_output(cmd, shell=True) 
```

# php - $facebook->getUser() 返回 0 并显示异常

> ID：13742495
> 
> 赞同：2
> 
> 时间：2012-12-06T11:18:04.263
> 
> 标签：php, facebook-graph-api

我正在登录并从 facebook 获取相册：

1）这里，首先函数`$facebook->getUser()`返回0

2）如果我注释了其余的代码，即`if/else`条件，那么它会进入 catch 块并显示异常，例如：

```
Fatal error: Uncaught OAuthException: An active access token must be used to query information about the current user. 
```

3）我在stackoverflow和google上发现了很多关于这个的帖子，几乎所有的都试过了，但仍然没有用。这就是我在这里分享代码的原因。

4）我还创建了新的应用程序 facebook 并尝试了它，但问题仍然存在。

以下是我的代码：

```
public function facebookapiAction() {
        require 'auth/src/facebook.php';
        $facebook = new Facebook(array(
                    'appId' => '3xxxxxxxxxxxxxxxxxxxx7',
                    'secret' => '6xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx5',
                    'cookie' => true,                    
                ));
        return $facebook;
    }

    public function facebookalbumAction() {
        $session = new Zend_Session_Namespace('user');
        $facebook = $this->facebookapiAction();
        $access_token = $facebook->getAccessToken();
        $facebook->setAccessToken($access_token);
        $user = $facebook->getUser();
        $albumid = $this->_getParam('albumid');
        if ($user <> '0' && $user <> '') {
            if ($albumid != "") {
                $photos = $this->albumlistAction($albumid, $facebook);                
            } else {
                try {
                    $albumArrInfo = array();
                    $user_profile = $facebook->api('/me/albums');                                       
                } catch (FacebookApiException $e) {
                    error_log($e);
                    exit;
                }
            }
            $session->fb_logout = $facebook->getLogoutUrl(array('next' => "http://{$_SERVER['HTTP_HOST']}/register/logout/id/Logout"));
            $session->isfb = 1;
        } else {
            if (isset($_REQUEST['getfurl']) && !(isset($_REQUEST['state']))) {                
                $loginUrl = $facebook->getLoginUrl(array('display' => 'popup','scope' => 'manage_pages,user_events,email,read_stream,user_photos,offline_access'));
                echo $loginUrl;
                exit;
            }
        }
    }

    public function albumlistAction($albumid, $facebook) {
        $photos = $facebook->api("/{$albumid}/photos");
        $albumArr = array();
        $albumArrInfo = array();
        foreach ($photos['data'] as $photo) {
            $albumArr['id'] = $photo['id'];
            $albumArr['name'] = $photo['name'];            
        }        
        return $albumArr;
    } 
```

这段代码有什么问题。

需要帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T03:56:26.397

听起来像我面临的类似问题。错误报告在这里：http: [//developers.facebook.com/bugs/238039849657148](http://developers.facebook.com/bugs/238039849657148)

尝试更新到最新版本的 PHP-SDK (3.2.2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:23:28.133

尝试这个：

```
$user = $facebook->getUser();
...
$user_profile = $facebook->api('/'.$user.'/albums'); 
```

# android - BitmapFactory.decodeStream 在下载图像表单时返回 null

> ID：13742496
> 
> 赞同：2
> 
> 时间：2012-12-06T11:18:04.837
> 
> 标签：android, bitmap, bitmapfactory

我正在尝试使用[Google Example Page](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html#read-bitmap)从 URL 下载图像。我[读过](https://stackoverflow.com/questions/10730520/decodestream-returns-null)当我在 BitmapFactory.decodeStream 方法中使用 InputStream 时，我不能使用两次。我正在尝试这样做，但它不起作用，因为它在解码图像中返回 null，而且我不知道我能做什么。

这是我的代码：

这部分在 AsyncTask 类的 doInBackground 方法中

```
Bitmap bitmapImage;
URL imageUrl = null;
try {
imageUrl = new URL(url[0]);

HttpGet httpRequest = null;
httpRequest = new HttpGet(imageUrl.toURI());

HttpClient httpclient = new DefaultHttpClient();
HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);

HttpEntity entity = response.getEntity();
BufferedHttpEntity bufHttpEntity = new BufferedHttpEntity(entity);
InputStream instream = bufHttpEntity.getContent();

    bitmapImage = CommonMethods.decodeSampledBitmapFromResource(instream, thumb_width, thumb_width);

instream.close();
return bitmapImage;

 } catch (URISyntaxException e) {
    e.printStackTrace();
    return null;
 } catch (MalformedURLException e) {
    e.printStackTrace();
    return null;
 } catch (IOException e) {
    e.printStackTrace();
    return null;
 }

 public static Bitmap decodeSampledBitmapFromResource(InputStream instream,
        int reqWidth, int reqHeight) throws IOException {

    //Copy instream for decode twice 
ByteArrayOutputStream out = new ByteArrayOutputStream();
    copy(instream,out);
    ByteArrayInputStream instream2 = new ByteArrayInputStream(out.toByteArray());

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(instream, null, options);
    instream2.close();

    options.inJustDecodeBounds = false;

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    // Decode bitmap with inSampleSize set
    return BitmapFactory.decodeStream(instream, null, options);
 }

 public static int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight) {

     // Raw height and width of image
     final int height = options.outHeight;
     final int width = options.outWidth;
     int inSampleSize = 1;

     if (height > reqHeight || width > reqWidth) {
         if (width > height) {
         inSampleSize = Math.round((float) height / (float) reqHeight);
     } else {
             inSampleSize = Math.round((float) width / (float) reqWidth);
     }
     }

     return inSampleSize;
}

//Copy instream method
public static void copy(InputStream input, OutputStream output) throws IOException{

     byte[] buffer = new byte[Constants.IO_BUFFER_SIZE];

 int n = 0;

 while (-1 != (n = input.read(buffer))) {

     output.write(buffer, 0, n);
 }
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-04T03:38:49.940

BitmapFactory.decodeStream 返回 null 因为输入流被使用了两次，我没有尝试过你的代码，但它接缝没问题，或者我错了。无论如何，我有一个更好的解决方案。只需使用 BufferedInputStream 包装 inputStream，然后在第二次读取之前，先调用“reset”。注意普通的 inputStreams 不支持“reset”，你可以调用它但什么都不会发生。我的代码：

```
 public static Bitmap decodeSampledBitmapFromStream(InputStream inputStream,
                                                   int reqWidth, int reqHeight)
                             throws IOException {
    if (!widthHeightCheck(reqWidth, reqHeight)) 
        return BitmapFactory.decodeStream(inputStream);
    // First decode with inJustDecodeBounds=true to check dimensions
    if (!(inputStream instanceof BufferedInputStream)) {
        inputStream = new BufferedInputStream(inputStream);
    }
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    Rect rect = new Rect(-1, -1, -1, -1);
    BitmapFactory.decodeStream(inputStream, rect, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    inputStream.reset();
    return BitmapFactory.decodeStream(inputStream, rect, options);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:02:43.557

我认为您可以通过将您从 httpEntity 获得的流包装在自定义 WrappedStream 中来实现这一点。这个 WrappedStream 将在读取原始流时提供第二个输入流。（这是通过 PipedStream 完成的）

使用此代码获取图像大小后：

```
options.inJustDecodeBounds = true;
WrappedStream wrappedStream = new WrappedStream(instream);
BitmapFactory.decodeStream(wrappedStream, null, options); 
```

你可以打电话

```
InputStream reReadStream = wrappedStream.getReReadStream();
options.inJustDecodeBounds = false;
// Calculate inSampleSize
options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

// Decode bitmap with inSampleSize set
return BitmapFactory.decodeStream(reReadStream, null, options); 
```

最后，这是 WrappedStream 的实现（它只是将所有调用委托给包装的 inputStream，并将所有读取（或跳过）的字节写入 pipedOutputStream）

```
import java.io.IOException;
import java.io.InputStream;
import java.io.PipedInputStream;
import java.io.PipedOutputStream;

/** Simple class wrapping an InputStream and feeding a secondary InputStream
 *  to re-read the data that was originally available in the inputStream.
**/

public class WrappedStream extends InputStream {

private InputStream urlStream;
private PipedOutputStream pipedStream;

public WrappedStream(InputStream urlStream) {
    this.urlStream = urlStream;
    this.pipedStream = new PipedOutputStream();
}

/**
 * return a fresh InputStream to re-read the data
 */
public InputStream getReReadStream() throws IOException {
    return new PipedInputStream(pipedStream);
}
@Override
public int available() throws IOException {
    return urlStream.available();
}

@Override
public void close() throws IOException {
    urlStream.close();
}

@Override
public void mark(int readlimit) {
    urlStream.mark(readlimit);
}

@Override
public boolean markSupported() {
    return urlStream.markSupported();
}

@Override
public int read() throws IOException {
    int b = urlStream.read();
    pipedStream.write(b);
    return b;
}

@Override
public int read(byte[] buffer) throws IOException {
    int l = urlStream.read(buffer);
    pipedStream.write(buffer);
    return l;
}

@Override
public int read(byte[] buffer, int offset, int length) throws IOException {
    int l = urlStream.read(buffer, offset, length);
    pipedStream.write(buffer, offset, length);
    return l;
}

@Override
public void reset() throws IOException {
    urlStream.reset();
}

@Override
//bytes skipped must available on the re-read stream so we read and write them.
public long skip(long byteCount) throws IOException {
    long bytesToSkip = byteCount;
    long skippedBytes = 0;
//ugly trick required to not loosing bytes if we ever skip more than Integer.MAX_VALUE bytes
    while(bytesToSkip>Integer.MAX_VALUE){
        _skip(Integer.MAX_VALUE);
        bytesToSkip -=Integer.MAX_VALUE;
        skippedBytes +=Integer.MAX_VALUE;
    }
    byte[] b = new byte[(int)bytesToSkip];
    skippedBytes += read(b);
    return skippedBytes;
}

private int _skip(int byteCount) throws IOException {
    byte[] b = new byte[(int)byteCount];
    return read(b);
}
} 
```

请注意，我没有测试此代码。这只是为了给你一些关于如何解决你的问题的想法。

另一点：即使这段代码从未创建过巨大的位图，整个流将保留在内存中，直到构建缩放的位图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:00:35.837

这是从服务器下载位图的方法，代码较少，您可以满足您的要求

```
Bitmap downloadBitmap(String url)
        {
            Bitmap image = null;
            InputStream in = null;
            try
                {
                    in = new java.net.URL(url).openStream();
                    BitmapFactory.Options opts = new BitmapFactory.Options();
                    opts.inSampleSize = 2;
                    image = BitmapFactory.decodeStream(new FlushedInputStream(in),null,opts);
                    in.close();
                }
            catch (MalformedURLException e)
                {
                    e.printStackTrace();
                }
            catch (IOException e)
                {
                    e.printStackTrace();
                }
            return image;
        } 
```

在上面的代码中我们使用 opts.inSampleSize = 2; 这意味着位图将减少到其原始大小的一半以避免内存异常如果我们正在加载大量图像，我们必须这样做

其中使用的其他一些类

```
 static class FlushedInputStream extends FilterInputStream
        {
            public FlushedInputStream( InputStream inputStream )
                {
                    super(inputStream);
                }

            @Override
            public long skip(long n) throws IOException
                {
                    long totalBytesSkipped = 0L;
                    while (totalBytesSkipped < n)
                        {
                            long bytesSkipped = in.skip(n - totalBytesSkipped);
                            if (bytesSkipped == 0L)
                                {
                                    int byte1 = read();
                                    if (byte1 < 0)
                                        {
                                            break; // we reached EOF
                                        }
                                    else
                                        {
                                            bytesSkipped = 1; // we read one byte
                                        }
                                }
                            totalBytesSkipped += bytesSkipped;
                        }
                    return totalBytesSkipped;
                }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T12:01:23.093

找到适合您的代码

```
final HttpEntity entity = response.getEntity();
            if (entity != null) {
                InputStream inputStream = null;
                try {
                    inputStream = entity.getContent();
                    BitmapFactory.Options options = new BitmapFactory.Options();
                    //options.inSampleSize = 2;
                    final Bitmap bitmap = BitmapFactory
                            .decodeStream(inputStream, null, options);
                    return bitmap;
                } catch (Exception e) {
                    e.printStackTrace();
                } finally {
                    if (inputStream != null) {
                        inputStream.close();
                    }
                    entity.consumeContent();
                }
            } 
```

请替换适当的变量，如果您想缩放图像，您可以在获取位图后对其进行缩放。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T12:02:13.503

请使用以下代码将图像下载并显示到 imageview 中。

```
public class image extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Bitmap bitmap = DownloadImage("http://www.gophoto.it/view.php?i=http://1.bp.blogspot.com/-2LTvCCufBKc/T3L3KgcTj2I/AAAAAAAABbQ/Ki60e1LU9sE/s1600/Sachin%2BTendulkar.png");
        ImageView img = (ImageView) findViewById(R.id.img);
        img.setImageBitmap(bitmap);
    }

    private InputStream OpenHttpConnection(String urlString) throws IOException {
        InputStream in = null;
        int response = -1;

        URL url = new URL(urlString);
        URLConnection conn = url.openConnection();

        if (!(conn instanceof HttpURLConnection))
            throw new IOException("Not an HTTP connection");

        try {
            HttpURLConnection httpConn = (HttpURLConnection) conn;
            httpConn.setAllowUserInteraction(false);
            httpConn.setInstanceFollowRedirects(true);
            httpConn.setRequestMethod("GET");
            httpConn.connect();
            response = httpConn.getResponseCode();
            if (response == HttpURLConnection.HTTP_OK) {
                in = httpConn.getInputStream();
            }
        } catch (Exception ex) {
            throw new IOException("Error connecting");
        }
        return in;
    }

    private Bitmap DownloadImage(String URL) {
        Bitmap bitmap = null;
        InputStream in = null;
        try {
            in = OpenHttpConnection(URL);
            bitmap = BitmapFactory.decodeStream(in);
            in.close();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        return bitmap;
    }
} 
```

# asynchronous - 从 Azure 表结构中读取 N 个实体的最有效方法是什么

> ID：13742497
> 
> 赞同：0
> 
> 时间：2012-12-06T11:18:04.940
> 
> 标签：asynchronous, azure, parallel-processing, task-parallel-library

背景 - 将使用 .NET 4.0、Azure SDK 1.7、Azure 表存储

问题如何最有效地（=最快的处理时间）读取 N 个条目，其中 N 是一个大的 #（1000 到数百万）个实体，并且每个实体在一组 Azure 表中非常小（<200 字节），其中预先我知道每个实体的 PartitionID 和 RowID，即 [(P1,R1),(P2,R2),...,(PN,RN)]。

“批处理”处理此类请求的最有效方法是什么。自然，在底层将需要异步/并行化获取，而不会通过 IO 锁或同步锁导致线程锁，理想情况下，我应该看到 CPU 达到 >80% 的吞吐量，以便服务器调用 Azure 表存储，因为这样处理应该是 CPU 绑定与 IO 或内存绑定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T13:14:15.997

由于您要求从 Azure 存储读取“最快”的处理时间，因此这里有一些使我的性能提高的一般提示（最重要的是最重要的）：

1.  确保自 2012 年 7 月以来已创建 Azure 存储。这是 Azure 存储的 Gen2，它包括 SSD 驱动器上的存储。

2.  在您的情况下，表存储增加了 Azure 存储 Gen2 分区的可扩展性目标：http: [//blogs.msdn.com/b/windowsazure/archive/2012/11/02/windows-azure-s-flat-network- storage-and-2012-scalability-targets.aspx](http://blogs.msdn.com/b/windowsazure/archive/2012/11/02/windows-azure-s-flat-network-storage-and-2012-scalability-targets.aspx)

    *   10 Gbps 网络与 1 Gbps 网络
    *   单个分区可以处理 20,000 个实体/秒
3.  .NET 默认连接更改了这个数字（我认为这可能会在新的 SDK 中解决，但不确定）：[http ://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/d84ba34b-b0e0- 4961-a167-bbe7618beb83](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/d84ba34b-b0e0-4961-a167-bbe7618beb83)

4.  您可以“加热” Azure 存储，它看到的事务越多，它将使用的控制器/驱动器缓存越多。以这种方式不断访问您的存储可能会很昂贵

5.  您可以使用多个 Azure 存储帐户。这可以非常有效地分配您的负载（分片）：[http ://tk.azurewebsites.net/2012/08/26/hacking-azure-for-more-disk-performance/](http://tk.azurewebsites.net/2012/08/26/hacking-azure-for-more-disk-performance/)

6.  您有几种方法可以在表存储中进行架构/设计。您有分区键和行键。但是，您还拥有表本身。请记住，这是 NoSQL，因此您可以拥有 100 个具有相同结构的表来服务不同的数据。这本身可以提高性能，您还可以将这些表存储在不同的 Azure 存储帐户中。RowKey-> PartitionKey -> Table -> Multiple Storage Accounts 都可以认为是“索引”，访问速度更快

7.  我不知道您的数据，但是由于您将在 PartitionKey 上进行搜索（我假设），也许不是为每个 PartitionKey 存储 1,000,0000 条非常小的记录，而是将其存储在 zip 文件中并快速获取它/解压缩然后并行查询它linq 在本地服务器中时。玩缓存总是有帮助的，因为你确实有很多小对象。您可能可以将整个分区放在内存中。另一种选择可能是存储分区键，其中包含二进制/逗号分隔的列数据等。

8.  您说您使用的是 Azure 1.7 SDK...我在使用 StorageClient 2.0 库时遇到了问题。我将 1.8 SDK 与 StorageClient 2.0 库一起使用。值得注意的事情（不一定是性能），因为它们可能在过去 2 年多的时间里提高了图书馆的效率

# c# - Windows 窗体设计器和自定义 CodeDomSerializer

> ID：13742500
> 
> 赞同：1
> 
> 时间：2012-12-06T11:18:12.993
> 
> 标签：c#, .net, visual-studio, designer

我目前正在为我们尝试在 c# 中为 .Net 2.0 实现的自定义选项卡控件组合一个原型。由于控件本身工作正常，我们现在正在尝试集成完整的设计时行为。这确实包括一个自定义 CodeDomSerializer 在某个点告诉标签也必须添加。现在确实可以正常工作（经过更长的反复试验过程）。

但是还有一个问题似乎与反序列化有关。设计器代码创建得很好，设计器看起来也一样。但是当我点击重建项目时，表单设计器有时会显示此错误：

```
The variable 'piTabControl1' is either undeclared or was never assigned 
```

[http://msdn.microsoft.com/en-us/library/4008y84t(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/4008y84t(v=vs.80).aspx)

该错误并非每次都出现，但是当我刚刚添加一个新选项卡时它总是会发生。错误指向这一行：

```
this.Controls.Add(this.piTabControl1); 
```

但我知道该变量已分配，因为这是在前几行的代码中：

```
this.piTabControl1 = new pdfforge.PdfCreator.Controls.PiTabControl(); 
```

该应用程序还可以正确显示所有内容并编译和运行。如果我关闭设计器并重新打开它，它也会显示而没有该错误。所以我怀疑在反序列化代码或更新设计器时出现了问题。

我在这里上传了完整的解决方案，因为这里粘贴的代码太多了：

[http://www.chinery.de/dateien/TabControlTest.zip](http://www.chinery.de/dateien/TabControlTest.zip)

要在项目中重现这一点，您首先必须重新编译整个解决方案以编译自定义控件。然后你可以打开 Form1 并点击重建。如果它没有产生错误，您可以尝试在选项卡控件中添加或删除选项卡。

我真的不知道如何处理这个问题，因为我无法告诉表单设计器的内部状态。我非常感谢任何提示。如果需要，我还可以在此处添加特定的代码片段。

# java - 用高效的查找 Java 键值文本存储替换巨大的转储文件

> ID：13742503
> 
> 赞同：0
> 
> 时间：2012-12-06T11:18:21.410
> 
> 标签：java, large-files, key-value-store

我有一个巨大的转储文件 - 12GB 的文本包含数百万个条目。每个条目都有一个数字 id、一些文本和其他不相关的属性。我想将此文件转换为可提供有效查找的文件。也就是说，给定一个 id，它会快速返回文本。限制：

1.  嵌入在 Java 中，最好没有外部服务器或外语依赖项。
2.  读写磁盘，而不是内存——我没有 12GB 的 RAM。
3.  不会爆炸太多——我不想把一个 12GB 的文件变成一个 200GB 的索引。我不需要全文搜索、排序或任何花哨的东西——只需键值查找。
4.  高效 - 数据量很大，而我只有一台机器，所以速度是个问题。可以存储大批量和/或与多个线程一起工作的工具是首选。
5.  存储多个字段很好，但不是必须的。主要关心的是文本。

欢迎您的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:21:25.717

为什么不使用[JavaDb](http://www.oracle.com/technetwork/java/javadb/overview/index.html) - Java 附带的数据库？

它将信息存储在磁盘上，并且在查找方面很有效，前提是您正确索引。它将在 JVM 中运行，因此您不需要单独的服务器/服务。您使用标准 JDBC 与它交谈。

我怀疑它会非常有效。这个数据库历史悠久（它曾经是 IBM 的 Derby），并且在健壮性和效率方面将花费大量精力。

您显然需要对数据进行初始载入以创建数据库，但这是一次性的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:23:42.583

我会使用[Java Chronicle](https://github.com/peter-lawrey/Java-Chronicle)或类似的东西（部分是因为我编写了它），因为它旨在随机访问大量数据（比您的机器大）。

它可以以文本或二进制格式存储任意数量的字段（如果您愿意，也可以组合存储） 它为您希望能够随机访问的每条记录添加 8 个字节。它不支持删除记录（您可以标记它们以供重复使用），但您可以更新和添加新记录。

它只能有一个写线程，但可以被同一台机器上的多个线程读取（甚至是不同的进程）

它不支持批处理，但它可以每秒读取/写入数百万个条目，典型的亚微秒延迟（除了不在内存中的随机读取/写入）

它几乎不使用堆（对于 TB 的数据，<1 MB）

它使用一个连续的 id，但您可以构建一个表来执行该翻译。

顺便说一句：您可以以不到 200 美元的价格购买 32 GB。也许是时候获得更多内存了；）

# php - 在php中自动生成表单字段

> ID：13742508
> 
> 赞同：0
> 
> 时间：2012-12-06T11:18:36.707
> 
> 标签：php, forms

我有一个类似的表格，

```
<form>
<table>
<tr>
<td>
Date <input type="text" name="date" id="date">
</td>
<td>
Installment <input type="text" name="installment" id="installment">
</td>
<td>
Balance <input type="text" name="balance" id="balance">
</td>
</tr>
</form> 
```

我想要的是当字段 name="balance" 的值超过零时自动生成这些表单字段。

如果你们有任何想法。请回答我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:33:52.587

您有两种选择来实现这一点。
您可以在服务器端创建字段，但将其设置为`display:none`. 当余额测试字段的值大于`0`设置时，`display:none`
或者您可以从 JavaScript 本身创建字段

我已经编写了一个示例代码（假设您使用的是 jquery）

```
$(document).ready(function () {
    $('#balance').change(function() {
      if($(this).val() > 0)
      {
        $('<input>').attr({
                        type: 'text',
                        name: 'date',
                        id: 'date'
                    }).appendTo($("#formId"));
        $('<input>').attr({
                        type: 'text',
                        name: 'installment',
                        id: 'installment'
                    }).appendTo($("#formId"));
      }
      else
      {
        $('#date').remove();
        $('#installment').remove();
      }
    });

    $('#removeRow').click(function() {
        $('#date').remove();
        $('#installment').remove();
    });

}); 
```

[编辑]：包含删除行的代码

# c# - 不断从 AjaxControlToolkit 收到错误

> ID：13742509
> 
> 赞同：0
> 
> 时间：2012-12-06T11:18:37.250
> 
> 标签：c#, asp.net, ajax

从 AjaxControlToolkit 获取以下错误。如何解决它。

```
Could not load file or assembly 'System.Web' or one of its dependencies. The system cannot find the file specified. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.IO.FileNotFoundException: Could not load file or assembly 'System.Web' or one of its dependencies. The system cannot find the file specified.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Assembly Load Trace: The following information can be helpful to determine why the assembly 'System.Web' could not be loaded.

WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure logging.
To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fusion!EnableLog].

Stack Trace: 

    [FileNotFoundException: Could not load file or assembly 'System.Web' or one of its dependencies. The system cannot find the file specified.]
       System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0
       System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +34
       System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, RuntimeAssembly reqAssembly, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +152
       System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean forIntrospection) +77
       System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +16
       System.Reflection.Assembly.Load(String assemblyString) +28
       AjaxControlToolkit.ScriptEntry.LoadAssembly() +27
       AjaxControlToolkit.ToolkitScriptManager.IsScriptCombinable(ScriptEntry scriptEntry) +25
       AjaxControlToolkit.ToolkitScriptManager.OnResolveScriptReference(ScriptReferenceEventArgs e) +277
       System.Web.UI.ScriptManager.RegisterScripts() +269
       System.Web.UI.ScriptManager.OnPagePreRenderComplete(Object sender, EventArgs e) +124
       System.Web.UI.Page.OnPreRenderComplete(EventArgs e) +121
       System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1155

    -------------------------------------------------------------------------------- 
```

# visual-studio - 无法让 SQL Server CE 与 Visual Studio 2005 和 Windows CE 5.0 一起使用

> ID：13742512
> 
> 赞同：0
> 
> 时间：2012-12-06T11:18:51.400
> 
> 标签：visual-studio, sql-server-ce, windows-ce

在过去的 4、5 个小时里，我一直在尝试让 SQL Server CE 与 Visual Studio 2005 一起工作。但没有运气。当我运行我的应用程序时，我收到以下错误：

> 找不到 PInvoke DLL 'sqlceme35.dll'

我已经阅读了无数关于它的线程和文章，但无法使其工作。使用以下工具：

*   运行 Intel Bulverde 处理器的 Windows CE 5.0 设备
*   带有 Visual Studio 2005 的 Windows XP 32 位
*   SQL Server 紧凑型 3.5

这就是我所做的。

1.  创建一个新的“智能设备”项目并选择“Windows CE 5.0”
2.  安装了 SQL Server Compact 3.5（在 Windows XP 上），它安装了一堆文件夹和文件
3.  在我的项目中，我添加了对“System.Data.SqlServerCe.dll”的引用，该引用位于安装 SQL Server Compact 3.5 的文件夹内
4.  然后我写了几行代码如下，我从[http://msdn.microsoft.com/en-us/library/aa226134(v=sql.80).aspx复制](http://msdn.microsoft.com/en-us/library/aa226134%28v=sql.80%29.aspx)

    ```
     SqlCeEngine engine = new SqlCeEngine("Data Source = Test.sdf");
        engine.CreateDatabase();

        conn = new SqlCeConnection("Data Source = Test.sdf");
        conn.Open(); 
    ```

5.  然后，我在创建了一个文件夹“Microsoft SQL Server Compact Edition”中的一堆 DLL 文件

6.  然后我运行了我的程序，但我得到了如上所述的错误。**SqlCeEngine engine = new SqlCeEngine("Data Source = Test.sdf");**行抛出错误
***   我想可能我需要将文件夹“Microsoft SQL Server Compact Edition”中的所有 DLL 复制到运行程序的目标设备上的应用程序文件夹中，所以我复制了所有文件，但仍然出现相同的错误。*   然后我想可能是我需要使用“armv4i”而不是“x86”所以我首先安装了“sqlce.wce5.armv4i.CAB”、“sqlce.repl.wce5.armv4i.CAB”、“sqlce.dev.ENU” .wce5.armv4i.CAB”，正如预期的那样，它不起作用。所以我再次将所有 DLL 复制到我的程序文件夹中，但没有运气。**

 **我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:26:42.270

Bulverde IIRC 是 PXA27x 系列处理器，它绝对是 ARM 内核，而不是 x86，因此您必须使用 ARM 二进制文件。

首先确保您有一个恢复出厂设置的设备（注册表将是重置的重要部分）。

然后使用此文件夹中的 CAB（或直接使用二进制文件）：

`%PROGRAM_FILES%\Microsoft SQL Server Compact Edition\v3.5\Devices\wce500\armv4i`

确保`System.Data.SqlServerCe.dll`程序集在设备上（通常在您的应用程序文件夹中）。

如果它仍然失败，您可能缺少依赖项。针对 SQL Compact 二进制文件运行depends.exe（在桌面上）以查看它们需要什么并确保它们在您的目标上。**

# python - 尝试使用 git log 命令和 python 以非常特殊的方式解析 git log 文件

> ID：13742514
> 
> 赞同：2
> 
> 时间：2012-12-06T11:18:54.747
> 
> 标签：python, git-log

我只想显示添加了标签的提交之间的差异。或者最接近这个。换句话说，像这样：

```
tag  "5 ..."
@@ -1,1 +1,3 @@
+ dfd
+ dfgd

tag "4.."
@@ -1,1 +1,3 @@
+ dfd
+ dfgd 
```

等等。我已经尝试过，但无法获得这种特定格式，也许有人可以帮助我。然后，一旦我有一个具有这种格式或尽可能接近的文本文件，我将执行以下操作：

```
with open('log_output_alex.txt', 'r') as f:
  read_data = f.read()
f.closed

tag_separation = read_data.split('tag: "') 
```

这样做之后，我不知道如何读取数组 tag_separation 中每个字符串中的每一行？

一旦我能做到这一点，我就可以检查字符串中的行是否以某个字符（@、+、- 或标记）开头，并将不同的行存储在数据结构中以供以后操作。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:33:00.943

您可能想要使用[library `GitPython`，](http://packages.python.org/GitPython/0.3.1/tutorial.html)这将为您提供对`git`存储库的更高级别的访问权限。

即使你决定不使用它，你也可以看看它是如何在那里完成的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:41:54.743

Git 无法在单个命令中为您提供该格式，因此您需要自己创建一下。为此，这里有一些提示：

*   您可以使用获取标签列表`git tag`
*   您可以使用以下方式获取提交 SHA1 以供参考（即标签）`git rev-parse TAGNAME`
*   `git diff A..B`例如，您可以使用 获取两个提交之间的差异`git diff tag1..tag2`

这样你也会得到每个标签已经分开的差异，所以你不需要先将它存储在一个文件中然后再次拆分它，你可以从它开始。

> 这样做之后，我不知道*如何读取每个字符串中的每一行*

您可以通过首先拆分字符串来遍历字符串的行，使用[`str.splitlines`](http://docs.python.org/3/library/stdtypes.html#str.splitlines).

# python - 正则表达式删除最后一个单词，如果它包含一个字符

> ID：13742515
> 
> 赞同：2
> 
> 时间：2012-12-06T11:19:02.737
> 
> 标签：python, regex

我需要一个 Python 中的正则表达式，如果它包含某个字符（在本例中为“#”），它将从字符串中删除最后一个单词，并且在该字符“#”的其他外观中，只删除该字符，而不是该单词。

所以字符串：

> #美好的一天#快乐

会成为：

> 美好的一天

到目前为止我已经尝试过

```
 entry = re.sub('(?<=#)\w+','',entry) 
```

但这会删除所有包含“#”的单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:34:06.173

```
import re

print(re.sub(r'''(?x)    # VERBOSE mode
                 [#]     # literal #
                 |       # or
                 \s*     # zero-or-more spaces
                 \w*     # zero-or-more alphanumeric characters 
                 [#]     # literal #
                 \w*     # zero-or-more alphanumeric characters 
                 $       # end of line
                 ''',
             '', # substitute matched text with an empty string
             'What a #great day #happy')) 
```

产量

```
What a great day 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:27:04.773

```
import re

s='What a #great day #happy'

# Test if the last word has a '#'
if re.match('#',s.rsplit(' ', 1)[1]):
    # Deal with everything but last word and do replacement         
    print re.sub('#', '',s.rsplit(' ', 1)[0])  
else:
    # Else replace all '#' 
    print re.sub('#', '',s) 

>>> What a great day 
```

# json - KendoUI 饼图不工作

> ID：13742516
> 
> 赞同：0
> 
> 时间：2012-12-06T11:19:05.230
> 
> 标签：json, charts, kendo-ui

我无法让这个简单的 KendoUI 饼图工作，而且我没有看到代码有任何问题。

我只有一些我试图绑定的基本 JSON。如您所见，源数据包含已计算的百分比以及实际值。我只是想将饼图绑定到百分比列。percentUnit 和 percentValue 的原因是因为我已经有代码可以在两者之间切换。实际值和单位字段将用作工具提示。因此，在源中拥有所有数据非常重要。

该图表确实填充但看起来完全一团糟。是我还是剑道？

[http://jsfiddle.net/jqIndy/38gH4/](http://jsfiddle.net/jqIndy/38gH4/)

![饼图结果](../Images/08705497bdb56141c6916f5584ee678b.png)

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>JS Bin</title>
  <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <script src="http://cdn.kendostatic.com/2012.3.1114/js/kendo.all.min.js"></script>
  <link href="http://cdn.kendostatic.com/2012.3.1114/styles/kendo.common.min.css" rel="stylesheet" />
  <link href="http://cdn.kendostatic.com/2012.3.1114/styles/kendo.default.min.css" rel="stylesheet" />
  <link href="http://cdn.kendostatic.com/2012.3.1114/styles/kendo.dataviz.min.css" rel="stylesheet" />
  <link href="http://cdn.kendostatic.com/2012.3.1114/styles/kendo.dataviz.default.min.css" rel="stylesheet" />
</head>
<body>
  <div id="client-order-status"></div>

  <script>
    var dr = [{
        Status: "CANCELLED",
        Units:554615.000000000000,
        Value:12194910.410000000000,
        PercentageUnits:12.955700000000,
        PercentageValue:25.479241000000
      },{
        Status: "INVOICED",
        Units:3260369.000000000000,
        Value:31610141.095120000000,
        PercentageUnits:76.161596000000,
        PercentageValue:66.044143000000
      },{
        Status: "OPEN",
        Units: 465873.000000000000,
        Value: 4057089.598000000000,
        PercentageUnits: 10.882704000000,
        PercentageValue: 8.476615000000
      }];

      var dsCOStatus = new kendo.data.DataSource({
        data: dr,
        schema: {
          type: "json",
          model: {
            fields: {
              Status: "Status",
              PercentageUnits: "PercentageUnits",
              PercentageValue: "PercentageValue",
              Units: "Units",
              Value: "Value"
            }
          }
        },
      });

      $(function () {

        $("#client-order-status").kendoChart({
          dataSource: dsCOStatus,
          title: {
            text: "Client Order Status (past 12 months)"
          },
          legend: {
            position: "bottom"
            //labels: {
            //  template: "#= text # (#= value #%)"
            //}
          },
          seriesDefaults: {
            type: "pie"
            //labels: {
            //  visible: true,
            //  format: "{0}%"
            //}
          },
          series: [{
            field: "Status",
            categoryField: "Value"
          }],
          tooltip: {
            visible: true
            //format: "{0}"
          }
        }).show();
      });

  </script>
</body>
</html> 
```

在 XML 我有同样的问题：

```
var drXML = "<D><Report><Status>CANCELLED</Status><Units>554615.000000000000</Units><Value>12194910.410000000000</Value><PercentageUnits>12.955700000000</PercentageUnits><PercentageValue>25.479241000000</PercentageValue></Report><Report><Status>INVOICED</Status><Units>3260369.000000000000</Units><Value>31610141.095120000000</Value><PercentageUnits>76.161596000000</PercentageUnits><PercentageValue>66.044143000000</PercentageValue></Report><Report><Status>OPEN</Status><Units>465873.000000000000</Units><Value>4057089.598000000000</Value><PercentageUnits>10.882704000000</PercentageUnits><PercentageValue>8.476615000000</PercentageValue></Report></D>";

    var dsCOStatus = new kendo.data.DataSource({
      data: drXML,
      schema: {
        type: "xml",
        data: "/D/Report",
        model: {
          fields: {
            Status: "Status/text()",
            PercentageUnits: "PercentageUnits/text()",
            PercentageValue: "PercentageValue/text()",
            Units: "Units/text()",
            Value: "Value/text()"
          }
        }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:20:31.603

我认为您需要交换 categoryField 和字段名称：

```
series: [{
    field: "Value",
    categoryField: "Status"
}] 
```

从[API 参考](http://docs.kendoui.com/api/dataviz/chart)：

*   **categoryField**：包含扇区类别名称的数据字段。
*   **valueField**：包含系列值的数据字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:36:52.467

我找到了答案。因为 XML 被作为文本返回/解析，所以 KendoUI 网格似乎不接受它作为有效值。更改值字段后，它工作正常。

请参阅此网址：

[http://www.kendoui.c​​om/forums/ui/grid/sort-order-numeric-with-xml-binded-datasource.aspx](http://www.kendoui.com/forums/ui/grid/sort-order-numeric-with-xml-binded-datasource.aspx)

谢谢古德曼！

下面回答：

```
 schema: {
        type: "xml",
        data: "/DsCOStatus/Report",
        model: {
          fields: {
            Status: "Status/text()",
            PercentageUnits: "PercentageUnits/text()",
            PercentageValue: "PercentageValue/text()",
            Units: "Units/text()",
            Value: { field: "Value/text()", type:"number" }
            //Value: "Value/text()"
          }
        }
      } 
```

# c++ - 球的重力模拟

> ID：13742519
> 
> 赞同：0
> 
> 时间：2012-12-06T11:19:10.990
> 
> 标签：c++, game-physics

我正在实现这个使用重力的游戏，但我不知道如何模拟球的重力。

我有一个计时器，它在我“放下”球后立即启动，我必须设置我的目标球的垂直位置。

相关功能有：

```
int ball->setVerticalPosition(int Y);
float timer->getTime(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T11:20:58.200

好的，一般来说，您可以使用以下等式计算新位置 (pos_y)：

```
t = timer->getTime();
float pos_y = pos_y0 + v_0*t - 4.9 * t *t;
ball->setVerticalPosition(pos_y); 
```

（v_0 是初始速度，pos_y0 是球的初始坐标）。在您的情况下，您说您正在“丢球”，因此删除 v_0*t 可能会更好。而 pos_y0 是原始高度（取决于您的坐标系）。

不要忘记检查 pos_y=0 的时间（可能是您的楼层！）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T11:33:27.553

我给了 4.9，因为重力是 9.8，方程是“1/2*g*t*t”，我只是划分并给出了最终数字。这是“米”，例如应该转换为像素。

# javascript - 如何在 JQplot 中动态添加系列？

> ID：13742523
> 
> 赞同：1
> 
> 时间：2012-12-06T11:19:27.087
> 
> 标签：javascript, json, charts, jqplot

我有来自 JSON 的数据，其中有多个系列和该系列的数据，如何根据 JSON 数据添加系列？

```
[{"seriesNo":1,"value":22,"date":"Thu Dec 06 16:48:24 IST 2012"}, 
 {"seriesNo":2,"value":149,"date":"Thu Dec 06 16:48:24 IST 2012"},
 {"seriesNo":3,"value":163,"date":"Thu Dec 06 16:48:24 IST 2012"},
 {"seriesNo":4,"value":87,"date":"Thu Dec 06 16:48:24 IST 2012"}, 
 {"seriesNo":5,"value":102,"date":"Thu Dec 06 16:48:24 IST 2012"}] 
```

# java - Java：将文本解析为原始数字而无需对象实例化

> ID：13742527
> 
> 赞同：1
> 
> 时间：2012-12-06T11:19:32.470
> 
> 标签：java, parsing, primitive, javolution

使用 java 语言，我阅读了包含数字的文本文件。有 TB 的数据和数千亿的数字。

目标是尽可能快地获取数据，并尽量减少 GC 活动。我想将文本直接解析为基元（double、float、int）。

直接我的意思是：

*   无需实例化任何瞬态辅助对象
*   在 java.lang.Double、java.lang.Float 中没有装箱数据...
*   无需创建瞬态 java.lang.String 实例（如果要调用 JDK Double.parseDouble(...)，这是一个强制性步骤）

到目前为止，我一直在使用 javolution 框架：

```
double javolution.text.TypeFormat.parseDouble(CharSequence sequence); 
```

我查看了 javolution 代码，它确实没有分配任何瞬态对象。并且因为它接受一个 CharSequence，您可以呈现从数据文件中解码的字符，而无需实例化瞬态字符串。

有替代方案或更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:21:45.827

该方法`Double.parseDouble(String)` *确实在*后台实例化了一个对象，但它使用缓存，从字符串返回双重读取。
[这个答案](https://stackoverflow.com/a/10577630/507738)提供了更多细节。

对于其他人：[Javolution](http://javolution.org/)包似乎是为实时性能而编写的，因此它似乎是一个合适的包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:32:45.160

[`StreamTokenizer`](http://docs.oracle.com/javase/7/docs/api/java/io/StreamTokenizer.html)[，在这里](https://stackoverflow.com/a/2082174/230513)考察，或许值得[剖析](https://stackoverflow.com/q/2064427/230513)。它将十进制数解析为`double`但不*处理*科学记数法。

# google-maps - 谷歌街景与远程服务器上的数据？（阿贾克斯，jsonp）

> ID：13742529
> 
> 赞同：0
> 
> 时间：2012-12-06T11:19:40.567
> 
> 标签：google-maps, google-maps-api-3, google-street-view

看看我的谷歌自定义街景播放器实现（为测试而简化）： http: [//www.detestserver.de/sameserver/start.html](http://www.detestserver.de/sameserver/start.html)

只要 player.js 和 test.php 文件（用于数据）在同一台服务器上，它就可以正常工作。

数据仍在检索，但当 test.php 文件在另一台服务器上时显示失败：http: [//www.detestserver.de/differentservers/start.html](http://www.detestserver.de/differentservers/start.html)

即使在对 jsonp 的 ajax 调用中使用“async：false”。

怎么了？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:06:24.013

看起来问题出在跨域 Ajax 上。您可以尝试以下方法：

[跨域 - Ajax](https://stackoverflow.com/questions/7955998/crossdomain-ajax)

看到调试屏幕后，您是否尝试直接检索 Google 磁贴？我不确定街景，但他们会采取积极措施防止从第三方应用程序下载它们，因此您的推荐人代码可能被阻止。

# android - 如何在 ListView onItemLongClick 上显示/启用按钮

> ID：13742531
> 
> 赞同：3
> 
> 时间：2012-12-06T11:19:44.410
> 
> 标签：android, long-press

我有一个安卓应用程序。在我的一项活动中`ListActivity`，我已经实现了`OnItemLongClickListener`. 我想在`ListItem`已被 LongClicked 的相关列表项中启用删除按钮。我怎样才能做到这一点？

```
 OnItemLongClickListener listener =  new OnItemLongClickListener(){
        public boolean onItemLongClick(AdapterView<?> av, View v, int position, long id) {
            Account a = null;
            a = (Account) av.getItemAtPosition(position);               
            Toast.makeText(AccountActivity.this, "Long Clicked : " + a.getAccountName(), Toast.LENGTH_LONG).show();

            //instead of the toast, I need to show/enable a button here...
        }
    };
    getListView().setOnItemLongClickListener(listener); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:52:32.497

**.xml**

```
 <Button
  android:id="@+id/imgdelete"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content" 
  android:visibility="invisible"/> 
```

**.java**

```
lv.setOnItemLongClickListener(new OnItemLongClickListener() {     

@Override
public boolean onItemLongClick(AdapterView<?> arg0, View view, int arg2, long arg3) {

       view.findViewById(R.id.imgdelete).setVisibility(View.INVISIBLE);
       return false;

 }            

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T11:49:07.690

在您的适配器的获取视图方法中，为您的按钮设置唯一 ID

```
btn.setId(position); 
```

然后在你的点击监听器上

```
OnItemLongClickListener listener =  new OnItemLongClickListener(){
public boolean onItemLongClick(AdapterView<?> av, View v, int position, long id) {    
    Button btn = (Button) v.findViewById(position);
    btn.setEnabled(true);
}
};` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T11:23:39.633

`isDeleteVisible`您可以`Account`使用默认值添加布尔标志`false`。

然后`OnItemLongClickListener`将其设置为 true 并调用`adapter.notifyDataSetChanged()`

在适配器的`getView`检查`isDeleteVisible`和显示或隐藏删除按钮。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T11:35:32.423

假设您在 ListView 的行布局中有一个 Button，那么您可以使其可见`

```
OnItemLongClickListener listener =  new OnItemLongClickListener(){
    public boolean onItemLongClick(AdapterView<?> av, View v, int position, long id) {
        Account a = null;
        a = (Account) av.getItemAtPosition(position);               
        v.findViewById(R.id.btnid).setVisiBility(View.VISIBLE);
    }
};` 
```

# magento - 如何为我的自定义付款方式检索购物车内容、运输详细信息和辅助费用（税金、折扣等）？

> ID：13742533
> 
> 赞同：0
> 
> 时间：2012-12-06T11:19:53.643
> 
> 标签：magento, payment-gateway, shopping-cart, checkout, magento-1.7

我的任务是为 Magento CE 编写自定义付款方式，并在过去几周内对其进行了修改。虽然我是一位经验丰富的开发人员，但这是我第一次认真接触 php 和 Magento 本身。

请注意这是一个网络支付网关，所以我正在使用

```
public function getOrderPlaceRedirectUrl() { ... } 
```

在我的付款方式模型中成功将客户重定向到外部 url。

让我呆了一整天的问题是如何检索结帐购物车内容、运输详细信息和辅助费用（税金、折扣等）。此信息需要发送到付款方式 API。

我在付款方式模型中使用的代码是这样的：

```
$order_id = Mage::getSingleton("checkout/session")->getLastRealOrderId();
$order = Mage::getModel('sales/order')->loadByIncrementId($order_id);
$oBillingAddress = $order->getBillingAddress(); //this works ok
$total = number_format($order->getBaseGrandTotal(), 2, '', ''); //this too

/* The following code won't work */

$oShippingAddress = $order->getShippingAddress(); // is unset!?
$oShippingAddress->getSameAsBilling(); //HOW can I check this?

$amount = array();
$quantity = array();
$sku = array();
$description = array();

$cart_items = $order()->getAllVisibleItems();
foreach ($cart_items as $item) {
   $amount[] = number_format($item->getPrice(), 2, '', ''); //ok
   $quantity[] = $item->getQtyToInvoice(); // is empty...
   $sku[] = $item->getSku(); // nothing either??
   $description[] = $item->getName(); //this is working
} 
```

请，Magento 的巫师，告诉我在这里做错了什么？

Magento dev 一直非常令人沮丧，主要是因为它缺乏简单的文档。我敢肯定它是非常可定制的，什么不是，但是滥用 php 的魔法函数和它的繁琐结构一直是具有挑战性的——至少是这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:53:22.370

我认为你需要得到报价。像这样的东西应该工作：

```
$quote = Mage::getSingleton('checkout/session')->getQuote();
$items = $quote->getAllVisibleItems();

foreach ($items as $item) {
    $amount[] = number_format($item->getPrice(), 2, '', ''); //ok
    $quantity[] = $item->getQtyToInvoice(); // is empty...
    $sku[] = $item->getSku(); // nothing either??
    $description[] = $item->getName(); //this is working

} 
```

如果您仍然需要订单，请告诉我..

# python - 如何在没有第三方库的情况下使用 python 验证 xml？

> ID：13742538
> 
> 赞同：21
> 
> 时间：2012-12-06T11:20:14.013
> 
> 标签：python

我有一些像这样的xml片段：

```
<!DOCTYPE mensaje SYSTEM "record.dtd">
<record>
    <player_birthday>1979-09-23</player_birthday>
    <player_name>Orene Ai'i</player_name>
    <player_team>Blues</player_team>
    <player_id>453</player_id>
    <player_height>170</player_height>
    <player_position>F&W</player_position>   <---- a '&' here.
    <player_weight>75</player_weight>
</record> 
```

有什么方法可以验证 xml 片段是否格式正确？有没有办法根据 DTD 或 XML 方案验证 xml？

由于各种原因**，我不能使用任何第三方包。**

例如，上面的 xml 不正确，因为它有一个“&”。请注意，DOCTYPE 定义语句是指 DTD。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-06T11:27:34.437

只需尝试使用 ElementTree (xml.etree.ElementTree.fromstring) 解析它 - 如果 XML 格式不正确，它将引发错误。

```
>>> a = """<record>
...     <player_birthday>1979-09-23</player_birthday>
...     <player_name>Orene Ai'i</player_name>
...     <player_team>Blues</player_team>
...     <player_id>453</player_id>
...     <player_height>170</player_height>
...     <player_position>F&W</player_position>   <---- a '&' here.
...     <player_weight>75</player_weight>
... </record>"""
>>> 
>>> from xml.etree import ElementTree as ET
>>> x = ET.fromstring(a)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib64/python2.7/xml/etree/ElementTree.py", line 1282, in XML
    parser.feed(text)
  File "/usr/lib64/python2.7/xml/etree/ElementTree.py", line 1624, in feed
    self._raiseerror(v)
  File "/usr/lib64/python2.7/xml/etree/ElementTree.py", line 1488, in _raiseerror
    raise err
xml.etree.ElementTree.ParseError: not well-formed (invalid token): line 7, column 24 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-06T11:27:15.413

您可以使用 python 的`xml.dom.minidom`XML 解析器（它在标准库中，但不如 其他替代品强大`lxml`）。

做就是了：

```
import xml.dom.minidom
xml.dom.minidom.parseString('<My><XML><String/><XML/><My/>') 
```

`xml.parsers.expat.ExpatError`如果 XML 无效，您将得到一个。

# xml - 尝试在 Internet Explorer 中获取第一个节点值时，获取表达式必须评估为节点集

> ID：13742541
> 
> 赞同：0
> 
> 时间：2012-12-06T11:20:39.977
> 
> 标签：xml, xpath

我有以下xml格式：

```
<tcm:Data>
    <tcm:Title>Test</tcm:Title>
    <tcm:Type>Normal</tcm:Type>
    <tcm:Schema xlink:type="simple" xlink:title="Test" xlink:href="tcm:233-190439-8" IsMandatory="false"/>
    <tcm:Content>
        <GeneralContent>
            <Title>
                <TitleText>Test</TitleText>
            </Title>
            <Summary>Test</Summary>
            <Artwork xlink:type="simple" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:title="Test" xlink:href="tcm:233-195404"/>
        </GeneralContent>
        <test1></test1>
    </tcm:Content>
</tcm:Data> 
```

我正在使用下面的 xpath 在内容之后获取我的第一个节点

```
var firstNode = local-name(//tcm:Data/tcm:Content/node()) 
```

如果我签入 XMLSpy，我会得到所需的结果，即上面的代码“GeneralContent”在 Firefox 中运行良好，但在 Internet Explorer 中出现错误。

请提出可能是什么原因。

谢谢。

最好的问候， 马诺伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:53:44.140

好吧，您还没有展示您在 Internet Explorer 中使用的 XPath 实现和 API。通常人们使用一个版本的 MSXML 作为 XPath 实现，而 MSXML 公开的 API 只有两个方法`selectSingleNode`，`selectNodes`它们确实需要作为参数传入的 XPath 表达式来返回节点集，而不是像调用`local-name(...)`那样返回字符串值。因此，使用 MSXML，您无法评估返回原始值（即字符串、数字、布尔值）的 XPath 表达式，除非您将 XPath 表达式放入完整的 XSLT 样式表并运行它。

# c# - 调整图像大小的正确方法

> ID：13742542
> 
> 赞同：0
> 
> 时间：2012-12-06T11:20:53.957
> 
> 标签：c#, asp.net-mvc, image

我想正确地实现一种调整图像大小并缓存它的方法。Atm 我有两种方法来实现这一点：

1 即时调整大小： - 创建一个包含控制器位置、宽度和高度的 url - 如果不存在缓存版本，控制器将创建图像 - 控制器将提供缓存版本

2 首先调整大小，稍后提供： - 如果不存在缓存版本，则创建一个图像并返回一个 url 以提供缓存的图像（使用自定义 htmlhelper？） - 该 url 将调用控制器。控制器将只提供给定的缓存图像

你会用什么方法来实现带有缓存的图像大小调整？上述版本之一或不同的方法？

我最喜欢“先调整大小，后服务”的方法。因为您不必在 url 中使用宽度和高度。但是“即时调整大小”的优点是您将所有图像处理代码放在一个地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:31:34.857

我首先同意调整大小。事实上，如果你缓存图像，当缓存过期时，你将不得不重新计算。如果替换图像会发生什么？您将不得不处理可能很棘手的缓存失效。最后，您仍然可以使用 OutputCache 属性使缓存受益。我能看到的唯一缺点是您需要更多的磁盘空间，因为您将存储原始图像和调整大小的图像。

这是关于如何调整图像大小的完整文章：http: [//www.codeproject.com/Articles/191424/Resizing-an-Image-On-The-Fly-using-NET](http://www.codeproject.com/Articles/191424/Resizing-an-Image-On-The-Fly-using-NET)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:27:17.317

我会先调整大小，然后再提供服务，特别是如果您的网站使用 CDN 进行缓存。你见过[MVC 的 Image Resizer](http://imageresizing.net/)吗？我正在考虑使用它来解决这个问题。

# design-patterns - 如何将域层与数据访问分开？

> ID：13742545
> 
> 赞同：1
> 
> 时间：2012-12-06T11:21:09.823
> 
> 标签：design-patterns

有一个 WPF 应用程序，它有自己的业务逻辑。有一个单独的库，其任务是将应用程序设置存储在加密的 XML 文件中。WPF 应用程序的业务逻辑与对象及其实例相关联，可以直接从存储库（如上所述）中获取。

问题是在这种情况下如何开发一个三层的应用程序？如何让业务层独立？业务层是否应该定义它自己的域对象（类），所以数据访问层将从存储库接收到的数据类型转换为它们？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-06T14:42:09.993

我认为，您使用 MVVM：

```
 Model = business logic
    View = control with visual elements: lables, buttons etc.
    ViewModel = something that use Model and show it on View. 
```

# javascript - 脚本标签调用的 JQuery 选择器

> ID：13742546
> 
> 赞同：1
> 
> 时间：2012-12-06T11:21:12.007
> 
> 标签：javascript, jquery, dom

我有以下我正在开发的工具的 html 输出：

```
<button>a</button>
<script>$('what to wrtie here to select the previous button element?').click(function(){alert ('a clicked !');});</script>
<button>b</button>
<script>$('same here').click(function(){alert ('b clicked !');});</script> 
```

我需要每个`script`标签中的选择器来选择前一个元素。无法应用使用`id`选择器，因为该工具不会为元素生成 id。

谢谢。

**回答：**

```
$('script').last().prev().click(... 
```

正如 Niklas 所说，当前执行的脚本是列表中的最后一个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:29:23.227

如果没有 id 或对按钮对象或脚本标签本身的某种其他类型的引用，这是不可能的。

这是不可能的，因为脚本不是从其元素在 DOM 中的位置执行的。相反，它是参照整个窗口执行的。

实际上，这里有一个很好的答案：[如何引用加载当前执行脚本的脚本标签？](https://stackoverflow.com/questions/403967/how-may-i-reference-the-script-tag-that-loaded-the-currently-executing-script)

简而言之，当前正在运行的脚本是列表中的最后一个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:25:39.567

据我所知，没有办法做到这一点（指的是包含脚本的脚本标签）。这里最好的方法是为每个元素生成一个 ID 并将您的脚本聚合到单个脚本标记中。

* * *

上面是正确的解决方案。秘密，顽皮的解决方案是这样的（剧透）：

> ```
> <按钮>一个</按钮> 
> <脚本>
>     //脚本#0001
>     $('script:contains("#0001")').prev().click(function(){
>         警报（'foo'）；
>     }); 
> </script> 
> 
> <button>b</button> 
> <script>
>     //脚本#0002
>     $('script:contains("#0002")').prev().click(function(){
>         警报（“酒吧”）；
>     }); 
> </脚本>
> ```

**不要使用它**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T11:30:44.117

好吧，我真的不推荐你先做什么让我们谈谈你的方法，这种代码应该包装在一个`ready`事件中，当`DOM`准备好时，与该事件相关的所有注册代码都会运行，所以无法理解代码在哪个脚本标签中

* * *

应该发生的事情是将所有脚本标签移动到它自己的文件中并使用选择器来选择您想要的元素或使用`prev`, `next`,`parents`等动态选择它们

**编辑**

我错了无法获得脚本标签@Niklas 答案是正确的，但我仍然认为这样做是非常错误的

# c# - Google Drive 简单 API 访问授权失败

> ID：13742548
> 
> 赞同：2
> 
> 时间：2012-12-06T11:21:17.437
> 
> 标签：c#, .net, oauth-2.0, google-drive-api

我正在尝试使用提供的 .NET SDK 在 google 中进行授权，但由于“凭据无效”错误而失败。我找到了这个答案

[Google Calendar V3 2 Legged 身份验证失败](https://stackoverflow.com/questions/8899000/c-sharp-google-calendar-v3-2-legged-authentication-fails/9195058#9195058)

但我仍然不明白错误在哪里。看起来一切都按照描述完成。

这是我的代码

```
const string CONSUMER_KEY = "mytestdomain.com";
const string CONSUMER_SECRET = "my_consumer_secret";
const string TARGET_USER = "user";
const string SERVICE_KEY = "some_api_key";

var auth = new OAuth2LeggedAuthenticator(CONSUMER_KEY, CONSUMER_SECRET, TARGET_USER, CONSUMER_KEY);

var service = new DriveService(auth) { Key = SERVICE_KEY };
var results = service.Files.List().Fetch();

Console.WriteLine(results.Items.Count); 
```

这是来自谷歌控制面板的截图。我刚换了`domain name`，`consumer key`和`api key`。

`Manage API client access`页面 截图![截图来自](../Images/cd78619a3412e8a2b26f7d3fcc04176c.png)

`Manage OAuth key and secret for this domain`页面 截图![截图来自](../Images/c6f83f7b13b0438fbee2febc300ea188.png)

`API Access`页面截图`Google API console` ![截图来自](../Images/532757afb9aa05b9668514581ab5c6c3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:08:40.070

OAuth 1.0 已被弃用，2-Legged OAuth 1.0 已被弃用。尽管如果我是您，在弃用期仍然支持它，但我会使用带有 OAuth 2.0 的服务帐户来执行域范围的授权。

这在 Google Drive SDK 文档的[Perform Google Apps Domain-wide Delegation](https://developers.google.com/drive/delegation)页面上有很好的记录。

# android - 如何使用 Google Maps android API v2 获取我的位置更改事件？

> ID：13742551
> 
> 赞同：16
> 
> 时间：2012-12-06T11:21:30.677
> 
> 标签：android, google-maps, geolocation

如何使用[Google Maps android API **v2**](https://developers.google.com/maps/documentation/android/)获取我的位置更改事件？

在**v1**中，您可以执行以下操作以处理位置更改事件：

```
public class MyLocationOverlay extends com.google.android.maps.MyLocationOverlay {

    /**
     * Listener
     */
    public interface Listener {
        void onLocationChanged(android.location.Location location);
    }

    private Listener listener;

    public MyLocationOverlay(Context context, MapView mapView, Listener listener) {
        super(context, mapView);

        this.listener = listener;
    }

    @Override
    public synchronized void onLocationChanged(Location location) {
        super.onLocationChanged(location);

        // fire listener
        if (listener != null)
            listener.onLocationChanged(location);
    }
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-13T17:02:59.980

**更新**：谷歌介绍了新的[`LocationClient`](https://developer.android.com/reference/com/google/android/gms/location/LocationClient.html)和相关[`LocationListener`](https://developer.android.com/reference/com/google/android/gms/location/LocationListener.html)的（`OnMyLocationChangeListener`界面现在已弃用）。

* * *

`LocationSource`您可以通过为 my-location 图层创建自定义来做到这一点。下面是一个自动将相机定位在当前位置（“我的位置”）的示例，类似于`MyLocationOverlay`Google Maps Android API v1 中提供的功能。

所以你可以简单地替换这行代码

```
mMap.animateCamera(CameraUpdateFactory.newLatLng(new LatLng(location.getLatitude(), location.getLongitude()))); 
```

位置更改时需要执行的任何功能。

```
public class PlaceMapFragment extends SupportMapFragment {

    // Note that this may be null if the Google Play services APK is not available.
    private GoogleMap mMap;

    protected PlaceActivity activity;
    private FollowMeLocationSource followMeLocationSource;
    private Context mContext;

    /* We need the Context in order to get a reference to the Location Manager
     * (when instantiating this fragment from your activity use:
     *  PlaceMapFragment mapFragment = new PlaceMapFragment(this); ) */
    public PlaceMapFragment(Context context) {
        this.mContext = context;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        activity = (PlaceActivity)getActivity();
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // creates our custom LocationSource and initializes some of its members
        followMeLocationSource = new FollowMeLocationSource();

        /* We can't be guaranteed that the map is available because Google Play services might not be available.
         * (un-comment the following line when using this code in a FragmentActivity / Activity 
         *  to try get a reference to the map here !) */
        //setUpMapIfNeeded();
    }

    @Override
    public void onResume() {
        super.onResume();

        /* We query for the best Location Provider everytime this fragment is displayed
         * just in case a better provider might have become available since we last displayed it */
        followMeLocationSource.getBestAvailableProvider();

        // Get a reference to the map/GoogleMap object
        setUpMapIfNeeded();

        /* Enable the my-location layer (this causes our LocationSource to be automatically activated.)
         * While enabled, the my-location layer continuously draws an indication of a user's
         * current location and bearing, and displays UI controls that allow a user to interact
         * with their location (for example, to enable or disable camera tracking of their location and bearing).*/
        mMap.setMyLocationEnabled(true);
    }

    @Override
    public void onPause() {
        /* Disable the my-location layer (this causes our LocationSource to be automatically deactivated.) */
        mMap.setMyLocationEnabled(false);

        super.onPause();
    }

    /**
     * Sets up the map if it is possible to do so (i.e., the Google Play services APK is correctly
     * installed) and the map has not already been instantiated. This will ensure that we only ever
     * manipulate the map once when it {@link #mMap} is not null.
     * <p>
     * If it isn't installed {@link SupportMapFragment} (and {@link com.google.android.gms.maps.MapView
     * MapView}) will show a prompt for the user to install/update the Google Play services APK on their device.
     */
    private void setUpMapIfNeeded() {
        // Do a null check to confirm that we have not already instantiated the map.
        if (mMap == null) {
            mMap = getMap();
            // Check if we were successful in obtaining the map.
            if (mMap != null) {
                // The Map is verified. It is now safe to manipulate the map:

                // Replace the (default) location source of the my-location layer with our custom LocationSource
                mMap.setLocationSource(followMeLocationSource);

                // Set default zoom
                mMap.moveCamera(CameraUpdateFactory.zoomTo(15f));
            }
        }
    }

    /* Our custom LocationSource. 
     * We register this class to receive location updates from the Location Manager
     * and for that reason we need to also implement the LocationListener interface. */
    private class FollowMeLocationSource implements LocationSource, LocationListener {

        private OnLocationChangedListener mListener;
        private LocationManager locationManager;
        private final Criteria criteria = new Criteria();
        private String bestAvailableProvider;
        /* Updates are restricted to one every 10 seconds, and only when
         * movement of more than 10 meters has been detected.*/
        private final int minTime = 10000;     // minimum time interval between location updates, in milliseconds
        private final int minDistance = 10;    // minimum distance between location updates, in meters

        private FollowMeLocationSource() {
            // Get reference to Location Manager
            locationManager = (LocationManager) mContext.getSystemService(Context.LOCATION_SERVICE);

            // Specify Location Provider criteria
            criteria.setAccuracy(Criteria.ACCURACY_FINE);
            criteria.setPowerRequirement(Criteria.POWER_LOW);
            criteria.setAltitudeRequired(true);
            criteria.setBearingRequired(true);
            criteria.setSpeedRequired(true);
            criteria.setCostAllowed(true);
        }

        private void getBestAvailableProvider() {
            /* The preffered way of specifying the location provider (e.g. GPS, NETWORK) to use 
             * is to ask the Location Manager for the one that best satisfies our criteria.
             * By passing the 'true' boolean we ask for the best available (enabled) provider. */
            bestAvailableProvider = locationManager.getBestProvider(criteria, true);
        }

        /* Activates this provider. This provider will notify the supplied listener
         * periodically, until you call deactivate().
         * This method is automatically invoked by enabling my-location layer. */
        @Override
        public void activate(OnLocationChangedListener listener) {
            // We need to keep a reference to my-location layer's listener so we can push forward
            // location updates to it when we receive them from Location Manager.
            mListener = listener;

            // Request location updates from Location Manager
            if (bestAvailableProvider != null) {
                locationManager.requestLocationUpdates(bestAvailableProvider, minTime, minDistance, this);
            } else {
                // (Display a message/dialog) No Location Providers currently available.
            }
        }

        /* Deactivates this provider.
         * This method is automatically invoked by disabling my-location layer. */
        @Override
        public void deactivate() {
            // Remove location updates from Location Manager
            locationManager.removeUpdates(this);

            mListener = null;
        }

        @Override
        public void onLocationChanged(Location location) {
            /* Push location updates to the registered listener..
             * (this ensures that my-location layer will set the blue dot at the new/received location) */
            if (mListener != null) {
                mListener.onLocationChanged(location);
            }

            /* ..and Animate camera to center on that location !
             * (the reason for we created this custom Location Source !) */
            mMap.animateCamera(CameraUpdateFactory.newLatLng(new LatLng(location.getLatitude(), location.getLongitude())));
        }

        @Override
        public void onStatusChanged(String s, int i, Bundle bundle) {

        }

        @Override
        public void onProviderEnabled(String s) {

        }

        @Override
        public void onProviderDisabled(String s) {

        }
    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T08:44:52.487

现在没有办法做到这一点：[http ://code.google.com/p/gmaps-api-issues/issues/detail?id=4644](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4644)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T17:23:19.997

我遇到了同样的问题......我现在的解决方案：

创建一个线程，要求 Handler 多次获取位置。您需要使用 Handler，因为 getMyLocation 方法只能从 GUI Thread 调用：

```
private class MyLocationThread extends Thread{
        @Override
        public void run() {
            int loops = 0;
            // we give the location search a minute 
            while(loops < 60){
                // we have to try it over a handler, because getMyLocation() has to be called from GUI Thread -_-
                _getMyLocationHandler.sendEmptyMessage(0);
                if(isInterrupted()){
                    return;
                }
                // take a short nap before next try
                try {Thread.sleep(1000);} catch(Exception e){}
                loops++;
            }

        }
    } 
```

以下是 Handler 的作用：

```
private Handler _getMyLocationHandler = new Handler(){
        public void handleMessage(android.os.Message msg) {
            if(getMap().isMyLocationEnabled() && getMap().getMyLocation() != null){
                _locationWatcher.interrupt();
                drawCurrentImagePositions();
            }
        }
    }; 
```

# database - 如何在 11gR2 上重新安装 Enterprise Manager for Oracle 数据库

> ID：13742552
> 
> 赞同：1
> 
> 时间：2012-12-06T11:21:32.223
> 
> 标签：database, oracle, oracle11g, oracle-enterprise-manager

我使用 OUI 在 Windows 7 上安装了 Oracle 数据库 11gR2，但就在完成屏幕之前，它给出了一条警告，指出无法设置企业管理器，并给出了通过命令行执行的命令列表。

正如我执行其中一个安装的防病毒软件，即 AVG Antivirus 给了来自文件的威胁`emagent.exe`。与此文件一起，安装企业管理器所需的许多其他文件已被防病毒软件删除。

有没有办法为已经创建的数据库重新安装企业管理器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:22:16.663

是的，您可以使用现有的数据库存储库重新安装 OEM。只需按照安装程序屏幕设置额外的 OMS 节点并在询问时填写数据库存储库信息。如果第一次安装正确完成，一切都应该工作，如果没有，您可以重新开始并首先删除存储库（执行此操作的说明在安装说明中）。

# c# - Best approach to draw clipped UI elements in OpenGL

> ID：13742556
> 
> 赞同：7
> 
> 时间：2012-12-06T11:21:48.747
> 
> 标签：c#, opengl

I've a complex UI-system which allows a lot of stuff which also can be done with WPF but supports multiple plattforms ( iOS, Android, Windows, ... ). It's not completed yet and now i'm facing the following issue:

My designer wants rotating objects! Rotating objects are far more complex than simple axis aligned ones, which are the reason i can't use [glScissor](http://www.opengl.org/sdk/docs/man/xhtml/glScissor.xml). A little graphic which might help to understand the problem:

![Effect](../Images/8e6a2b91bda0d404bc0edd676287e3a5.png)

You can see that i need to clip the object "**Subcontainer**" by the bounds of the "**Parent Container**". As far as i know there are few options:

*   Use the stencil buffer, in this case i got a problem because i have objects which are not visible and must also influence the stencil buffer because they are might mask the child object. Also i have to draw each object twice because i need to decrease the stencil buffer when going back in hierarchy.
*   Cut the plane ( triangulate; or any other ui model ) which is used to draw the UI-object, this seems to be a lot of afford because they might clipped at different points ( imagine a container in a rotated container in a rotated container... ) and also it's really hard to clip them correctly and it might be a source of performance issues

However both seem to cause a lot of different issues and might be a source for performance leaks. Is there any other way to archive what i want or is there any way to improve the both approaches above?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T00:11:42.947

I ended up with using the Stencil-Buffer, this generates more draw calls than the depth-approach but is much easier to implement.

Before i draw i wrote this code:

```
if (_Mask)
{
    if (Stage.StencilMaskDepth++ == 0)
        GL.Enable(EnableFlags.STENCIL_TEST);

    GL.ColorMask(false, false, false, false);
    GL.DepthMask(false);
    GL.StencilFunc(StencilFunction.ALWAYS, Stage.StencilMaskDepth, Stage.StencilMaskDepth);
    GL.StencilOp(StencilOp.INCR, StencilOp.INCR, StencilOp.INCR);

    // Draw rectangle
    DrawColor(Colors.Black);

    GL.ColorMask(true, true, true, true);
    GL.DepthMask(true);
    GL.StencilFunc(StencilFunction.EQUAL, Stage.StencilMaskDepth, Stage.StencilMaskDepth);
    GL.StencilOp(StencilOp.KEEP, StencilOp.KEEP, StencilOp.KEEP);
} 
```

After all childs have been drawn this code is called:

```
if (_Mask)
{
    GL.ColorMask(false, false, false, false);
    GL.DepthMask(false);
    GL.StencilFunc(StencilFunction.ALWAYS, Stage.StencilMaskDepth, Stage.StencilMaskDepth);
    GL.StencilOp(StencilOp.DECR, StencilOp.DECR, StencilOp.DECR);
    // Draw rectangle
    DrawColor(Colors.Black);

    GL.ColorMask(true, true, true, true);
    GL.DepthMask(true);

    if (--Stage.StencilMaskDepth == 0)
        GL.Disable(EnableFlags.STENCIL_TEST);
} 
```

Maybe i going to test some other approaches in a few month but currently this is the easiest to implement.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T11:46:47.130

This is just an idea, but what about using depth buffer to do the masking?

1.  Enable depth buffer and set glDepthFunc(GL_LEQUAL);
2.  Render Container A and its frame at Z = 0
3.  Render Container A internal area / background (where other nested containers will be) at Z = 1
4.  Now you have a "depth stencil" with container frame at depth 0 and container internals at depth 1\. That means that anything you render inbetween will be above internals, but below frame (and clipped by it)
5.  Now with next Container B, render its frame to Z = 0.5 (it will get clipped by parent container A on GPU)
6.  Render container B internal area at Z = 0.75
7.  Now anything you want to render within container B will have to go at Z = 0.75\. It will overlay containers internal area, but will be clipped by both container A and B frames.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T12:53:45.343

Maybe you could try rendering to texture. Create a parent texture. Then render all children to that texture. Then render the parent texture to the screen deforming and displacing it as desired. This solution may or may not have issues, depending on what do you want to achieve. Especially if you animate the containers scale or have a very complex tree of many nested containers you might have performance issues.

# c# - 标签对象中的空值

> ID：13742560
> 
> 赞同：0
> 
> 时间：2012-12-06T11:22:03.413
> 
> 标签：c#, asp.net

我在带有标签的 GridView 上创建了。我已经编写了存储过程来获取 StatusCode

```
SELECT StatusCode
From TableName 
```

GridView 中的这一行

<asp:标签 ID="lblStatusCode" runat="server" Visible="false"

Text='<%#DataBinder.Eval(Container.DataItem, "StatusCode")%>' />

.cs 文件中的这些行

```
Label lblStatusCode = (Label)row.FindControl("lblStatusCode");
objJV.Status = Convert.ToInt32(lblStatusCode.Text); 
```

但即使表中有值，`lblStatusCode.Text`它也显示为*NULL 。*

当我独立执行存储过程时，它会给出值。

//绑定函数

protected void Page_Load(object sender, EventArgs e) {

```
 if (!IsPostBack)
        {
            BindJVJobValidationDetails();

        }

    } 
```

受保护的无效 BindJVJobValidationDetails() {

```
 JVSummary objJV = new JVSummary();

        DataSet dataJobValidation = new DataSet();

        if (SessionVariables.PERID != null)
        {

            dataJobValidation = objJV.GetjvTransaction(SessionVariables.PERID);

            gvEmployee.DataSource = dataJobValidation;
            gvEmployee.DataBind();

        }

    } 
```

可能是什么问题...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:28:13.987

在后面的代码运行之后，文本将应用于页面上的控件。你不能在后面的代码中设置文字吗？

编辑：您正在设置页面上标签的值，即 aspx / ascx 使用`Container.DataItem`，但该值是在后面的代码运行后设置的。基本上，当后面的代码查看控件时，它的文本属性尚未设置。相反，将 DataRowBinding 事件添加到您的 GridView 并在后面的代码中的事件中设置 lblStatusCode.Text。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:47:01.837

`gridview`请在's 活动中 尝试此代码`OnRowDataBound="GridView_RowDataBound"`

```
protected void GridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        if ((e.Row.DataItem) != null)
        {
            Label lblStatusCode = (Label)e.row.FindControl("lblStatusCode");
            objJV.Status = Convert.ToInt32(lblStatusCode.Text);
        }
    }
} 
```

# backbone.js - 骨干数据视图未显示

> ID：13742561
> 
> 赞同：0
> 
> 时间：2012-12-06T11:22:05.233
> 
> 标签：backbone.js

我在骨干方面遇到了一些问题，所以决定做一个非常简单的教程。

在完成这项工作后，我尝试对其进行简化，但现在无法使其正常工作。

我认为问题在于将视图返回到屏幕..

这是代码

```
var Theater = {
Models: {},
Collections: {},
Views: {},
Templates:{}
}

Theater.Models.Movie = Backbone.Model.extend({})

Theater.Collections.Movies = Backbone.Collection.extend({
model: Theater.Models.Movie,
url: "scripts/data/movies.json",
initialize: function(){
    console.log("Movies initialize")
}
});

Theater.Templates.movies = _.template($("#tmplt-Movie").html())

Theater.Views.Movies = Backbone.View.extend({
el: $("#mainContainer"),
template: Theater.Templates.movies,
//collection: new Theater.Collections.Movies(), //Not needed

initialize: function () {
    _.bindAll(this, "render");
    this.collection.bind("reset", this.render, this);
},

render: function () {
    $(this.el).append(this.template(this.collection.toJSON())) ;
}

})

Theater.Router = Backbone.Router.extend({
routes: {
    "": "defaultRoute" 
},

defaultRoute: function () {
    Theater.movies = new Theater.Collections.Movies()
    new Theater.Views.Movies({ collection: Theater.movies }); 
    Theater.movies.fetch();
}
})

var appRouter = new Theater.Router();
Backbone.history.start(); 
```

这是非常基本的html

```
 <div id="mainContainer"></div>

<script type="text/template" id="tmplt-Movie">

    <div><%=name %> </div>

</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:39:28.323

`this.collection.toJSON())`转换`collection`为 a `json`，因此尝试`name`在模板中访问它不会给你任何东西。

你可以这样写你的`render`方法：

```
render : function() {
  var _view = this;
  this.collection.each(function(model) {
    $(_view.el).append(_view.template(model.toJSON())); // assuming model has 'name' attribute which is accessed in the template code
  });
} 
```

这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:30:36.703

您的模板不正确

```
template: Theater.Templates.movies, 
```

在渲染函数中使用

```
var template = _.template( $("#tmplt-Movie").html(), this.collection.toJSON() );
this.$el.html( template ); 
```

试试看。如果失败。尝试一些控制台记录以检查是否正在调用 fetch、正在填充集合以及正在调用渲染。如果调用了 render ，那么只需纠正一个可能与 dom 选择有关的小错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T16:22:42.297

似乎您想为模板提供一个集合，并且模板应该遍历集合并呈现值。您可以为模板提供集合，但这可能不是最好的方法。

主要问题似乎是您在应该使用模型的地方使用了一个集合。在渲染函数中，您将一个集合传递给模板。该模板应采用 Models Json。

这是可以使用子视图的地方。因此，您需要一个带有集合的主视图，并且该主视图将调用一个接受模型的子视图。

我确实在 jsFiddle.net 上提供了一个示例。这有点像黑客。我没有将集合传递到模板中，而是从集合中传递了一个单独的项目。这只会渲染 1 个模型。由于路由可能会令人困惑，因此我继续删除了它。 [jsFiddle.net 上的示例](http://jsfiddle.net/BarDev/gdQMr/5/)。我有时会遇到 IE 和 jsFiddle.net 的问题。我推荐使用 Chrome 浏览器。

```
this.$el.append(this.template(this.collection.at(0).toJSON())); 
```

就在这个月，我确实开始在 Backbone.js 上创建更简单的教程。此教程列表位于页面底部： [更多简单 Backbone.js 示例](http://bardevblog.wordpress.com/2012/12/04/re-learning-backbone-js/)

希望很快，我将有时间创建一个关于渲染集合的简单教程。

这是完整的代码

```
<div id="mainContainer"></div> 
```

```
var Theater = {
    Models: {},
    Collections: {},
    Views: {},
    Templates: {}
};

Theater.Models.Movie = Backbone.Model.extend({});

Theater.Collections.Movies = Backbone.Collection.extend({
    model: Theater.Models.Movie,
    //url: "scripts/data/movies.json",
    initialize: function() {
        console.log("Movies initialize")
    }
});

Theater.Templates.movies = _.template($("#tmplt-Movie").html());

Theater.Views.Movies = Backbone.View.extend({
    el: $("#mainContainer"),
    template: Theater.Templates.movies,
    //collection: new Theater.Collections.Movies(), //Not needed
    initialize: function() {
        _.bindAll(this, "render");
        this.collection.bind("reset", this.render, this);
    },
    render: function() {
        this.$el.append(this.template(this.collection.at(0).toJSON()));
    }
});

var movies = new Theater.Collections.Movies();

var movieView = new Theater.Views.Movies({ collection: movies });

var myMovies =
[{
    "Id": "BVwi1",
    "Name": "Bag It",
    "AverageRating": 4.6,
    "ReleaseYear": 2010,
    "Url": "http://www.netflix.com/Movie/Bag_It/70153545",
    "Rating": "NR"
},
{
    "Id": "BW1Ss",
    "Name": "Lost Boy: The Next Chapter",
    "AverageRating": 4.6,
    "ReleaseYear": 2009,
    "Url": "http://www.netflix.com/Movie/Lost_Boy_The_Next_Chapter/70171826",
    "Rating": "NR"
}];

movies.reset(myMovies); 
```

我希望这会有所帮助。

# c++ - 访问多个源文件中的同一个类实例

> ID：13742567
> 
> 赞同：1
> 
> 时间：2012-12-06T11:22:26.207
> 
> 标签：c++, qt, class, opencv

我在 Qt 中使用 opencv，为我的论文做一些视频识别工作。

所以我有一个主窗口（显示相机和一些用于相机设置的滑块）和一个对话框窗口，当按下带有滑块的按钮进行高级设置时，它会打开。我的问题是：我在一个类的实例中创建

```
Moving M; 
```

在 mainwindow.cpp 中，我可以设置参数，例如

```
M.BasicSetting1 = someValue; 
```

但我无法在另一个窗口（对话框）中访问 M 实例来设置 M.AdvencedSettings。

那么我必须在哪里以及如何创建移动类的实例以在 mainwindow.cpp 和 dialog.cpp 中设置其参数？我希望我足够清楚......也许如果有人可以发布一个不同的简单示例来说明如何做到这一点。非常感谢您的帮助！

* * *

这就是我所拥有的（我不会发布完整的代码，因为这样会更容易（我希望我不必这样做:)）

```
Moving.h        //where my class is defined which accesses my webcam and stuff
mainwindow.h    //mainwindow where it shows the video with basicsettings
dialog.h        //some advanced settings for the webcam

main.cpp         
Moving.cpp
Mainwindow.cpp    
dialog.cpp 
```

移动.h

```
 class Moving
    {

    public:

int BasicSetting1;
int Basic Setting2;

int AdvancedSetting1;
int AdvancedSetting2;

    //lots of other stuff

    Moving();
    ~Moving();

    void move();  //starts and shows the camera

    }; 
```

主窗口.cpp

```
 #include "Moving.h"
      #include "mainwindow.h"

        Moving M;

        M.BasicSetting1 = SliderValue; 

        M.move();  //shows camera

    //and of course lots of other stuff 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T11:47:57.860

如果我正确阅读了您的代码，那么您正在`Moving`堆栈上创建实例。共享堆栈对象的指针或引用可能很危险。相反，您可以`Moving`在您的声明中`mainwindow`添加一个 getter 类型方法（即`Moving* getMoving()`）以返回指向您的`Moving`对象的指针。然后给你的 Dialog 一个指向`mainwindow`.

所有这些都是编程概念的基础。也许您应该在写论文之前阅读一些教程并做一些其他较小的事情；修补错误代码可能非常耗时。

# java - 没有局部变量的java中的递归

> ID：13742570
> 
> 赞同：1
> 
> 时间：2012-12-06T11:22:35.327
> 
> 标签：java, recursion

我目前正在查看一位同事的一些代码，并发现了我以前从未见过的递归用法。

我减少了它，所以他基本上做的是：

```
public class Main {
    static class Test {
        private static final int MAX = 10;

        private int mValue = 0;

        void test() {
            System.out.println( mValue );
            mValue++;
            if (mValue < MAX) {
                test();
            }
        }
    }

    public static void main( final String[] args ) {
        final Test test = new Test();
        test.test();
    }
} 
```

当我使用递归时，我会将所有需要的变量作为参数提供，然后返回一个返回值，或者使用其中一个参数来提供一个可以写入结果的容器对象。这样每个递归都有它自己的要处理的数据范围。

我环顾四周，但网络上的每个示例都按照我的方式进行。

那么这会导致任何错误吗？对象中的一些不一致？这和调用不同的私有方法来操作成员变量有区别吗？

brgds，

Ĵ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:28:44.490

只要`Test`类的单个实例从不`.test()`同时运行，这将按预期工作。

**编辑**

@Itay 让我意识到，“同时”这个词在这里是错误的——在“不合作或不了解彼此”的意义上，它应该是“竞争性”。对不起，德语（我的母语）单词“Konkurrenz”和英语单词“Concurrency”的含义略有不同。

**/编辑**

如果能保证这一点，放入`mValue`类作用域而不是局部作用域，可以提高局部性和缓存命中率，还可以消除一些参数传递——总而言之，它会以封装的方式获得一些性能增益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:29:53.290

**只要您的逻辑是线程安全的**（不可变对象或包含相关锁定），即使发生递归，也没有理由严格首选参数而不是全局类的字段。

当然，只要相关字段代表对象的状态，而不是简单的丑陋辅助变量...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:26:34.770

如果递归方法将在同一个实例上被调用两次，这可能是一个问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T11:30:54.660

> 那么这会导致任何错误吗？对象中的一些不一致？

在实践中，它不是实现递归的首选方式。

条件`(mValue < MAX)`只能在递归方法中受到影响。如果没有，您的递归可能会意外结束。

# sql - 如果存在重复行，如何在sql中显示空白记录

> ID：13742572
> 
> 赞同：1
> 
> 时间：2012-12-06T11:22:44.970
> 
> 标签：sql, sql-server

我的 SQL 查询结果，

```
EmployeeID EmployeeName 部门
1 约翰·销售
2 罗伯特·萨斯
3 苏迪尔销售
4 罗杰发展

```

输出应该是

```
EmployeeID EmployeeName 部门
1 约翰·销售
2罗伯特          
3 苏迪尔          
4 罗杰发展

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:25:37.557

你可以这样做：

```
;WITH CTE
AS
( 
   SELECT EmployeeID, EmployeeName, Department,
     ROW_NUMBER() OVER(PARTITION BY Department ORDER BY(SELECT 1)) rownum
  FROM table1
)
SELECT
  EmployeeId,
  EmployeeName,
  CASE rownum
    WHEN 1 THEN Department
    ELSE ''
  END AS Department
FROM CTE
ORDER BY EmployeeID; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/4da97/4)

**请注意：**尽量不要在 SQL 中做这些格式化的事情。SQL与格式化*无关。*

# gzip - Gzip 压缩会影响我的数据库查询吗？

> ID：13742573
> 
> 赞同：0
> 
> 时间：2012-12-06T11:22:47.010
> 
> 标签：gzip, client-side

也许这是一个愚蠢的问题，但是 gzip 压缩会影响我的数据库查询（我的意思是，它们会被缓存）还是 gzip 仅与传递到浏览器的 html 和 css 输出相关，而 php 的内容仍将在服务器上随每个页面执行加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:35:32.880

如果您使用 HTTP 服务器压缩，那么正如您猜测的那样，它是一种优化从服务器到客户端的传输的方法，它（通常）透明地工作。

浏览器扩展作为 firebug 或监视工具（如 fiddler）可以帮助您了解幕后真正发生的事情。

# sql - PostgreSQL 中的撇号和引号 - 如何替换撇号？

> ID：13742585
> 
> 赞同：3
> 
> 时间：2012-12-06T11:23:27.653
> 
> 标签：sql, postgresql, syntax, case-sensitive

`apostrophe`SQL的查询字符串和`quotation mark`SQL中的角色是什么？怎么可能`apostrophe`被替换？

主要兴趣是他们在 PostgreSQL 中的特定角色。

省略`apostrophe`混乱的 SQL 查询，例如：

```
SELECT role FROM "USER_ROLES" WHERE "USER_ROLES".login = admin; 
```

当管理员是一个值时，获取“列”管理员不存在错误。写**'admin'**可以纠正这个问题：

```
SELECT role FROM "USER_ROLES" WHERE "USER_ROLES".login = 'admin'; 
```

实际问题是在另一个上下文中使用查询：

```
<module-option name="rolesQuery" value="SELECT 'role', 'Roles' FROM &quot;USER_ROLES&quot; WHERE login='?'"/> 
```

根据要求，表定义为：

```
CREATE TABLE "USER_ROLES" (
  login text NOT NULL,
  role text,
  CONSTRAINT "USER_ROLES_pkey" PRIMARY KEY (login ),
  CONSTRAINT "USER_ROLES_login_fkey" FOREIGN KEY (login)
      REFERENCES "USER" (login) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
) 
```

PostgreSQL 版本 9.1。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T12:29:13.897

您可以在 PostgreSQL 中将**单引号**( `'`)替换为[**美元引号**](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-DOLLAR-QUOTING)，以避免它们在不同上下文中的特殊含义。（但不确定美元符号是否也有特殊含义）：

```
<module-option name="rolesQuery" value="SELECT role FROM &quot;USER_ROLES&quot; WHERE login = $$?$$"/> 
```

另一个想法是`&apos;`代替单引号：

```
<module-option name="rolesQuery" value="SELECT role FROM &quot;USER_ROLES&quot; WHERE login = &apos;?&apos;"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T11:35:07.967

```
SELECT role FROM "USER_ROLES" WHERE "USER_ROLES".login = 'admin'; 
```

这个单引号是指字符串。

当您尝试直接对字符串进行操作时，这些引号是必需的。除了像处理 String 对象那样不需要引号之外，您可以直接使用该对象。

当您使用单引号（'）直接引用列中的字符串时，双引号（“）用于引用表对象。（您可以直接引用表名而无需任何引号）

**扩展：**

```
SELECT role FROM "USER_ROLES" WHERE "USER_ROLES".login = 'admin'; 
```

这里 'admin' 是一个直接字符串，它是相应列中一个单元格的值。

```
var string_object = 'admin';
SELECT role FROM "USER_ROLES" WHERE "USER_ROLES".login = string_object; 
```

这里的 string_object 是存储一些字符串的对象，存储的字符串代表相应列中一个单元格的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T11:31:53.103

**单撇号 ( `'`) 用于字符串。**

当您省略撇号时，解释器会将其视为一个名称，并尝试查找与该名称相关的值（通常是一列）。

所以无效：

```
SELECT *
FROM yourtable
WHERE yourcolumn = xyz -- fails because there is no column named xyz
                       -- also, if it would exist, it would compare to the
                       -- value in that column rather than to the value 'xyz' 
```

并且有效：

```
SELECT *
FROM yourtable
WHERE yourcolumn = 'xyz' 
```

**引号 ( `"`) 用于数据库中的名称。**

这样做的原因是 PostgreSQL 不接受表名（和列名等）中的大写字母，除非你把它们放在引号中。您也可以将它们放在小写名称周围，在这种情况下没有区别。此外，这允许您使用保留名称作为表名或列名。所以`"index"`可以使用一个列名，因为引号表示一个名称。`index`不带引号使用表示处理索引的保留字。

所以，这是无效的：

```
SELECT index -- invalid, reserved name
FROM YourTable -- invalid, capital letters 
```

这是有效的：

```
SELECT "index"
FROM "YourTable" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-20T10:05:36.987

您可以通过添加另一个撇号来替换撇号。

```
select replace('hi''','''','m')--  replaces apostrophe with m. 
```

# jsp - 如何清除 JSP 页面中显示的所有验证错误？

> ID：13742586
> 
> 赞同：3
> 
> 时间：2012-12-06T11:23:33.947
> 
> 标签：jsp

我有一个看起来像这样的视图页面：

```
<tr>
    <td align="right"><b>Select your role:</b></td>
    <td align="left">
        <select name="role" id="role" onchange="enableTextBox();">
            <option value="Admin">Admin</option>
            <option value="csc">CSC Employee</option>
        </select><br/>
        <font color=red>
            <form:errors path="role" cssClass="validationError"/>
        </font>
    </td>
</tr>

<tr align=center>
    <td align="right"><b>User ID:</b></td>
    <td align="left">
        <input type="text" id="uname" name="uname" value="" size="15" /><br/>
        <font color="red">
            <form:errors path="uname" cssClass="validationError"/>
        </font>
    </td>
</tr>

<tr align=center>
    <td align="right"><b>Password:</b></td>
    <td align="left">
        <input type=password id="pwd" name="pwd" value="" size="15" /><br/>
        <font color="red">
            <form:errors path="pwd" cssClass="validationError"/>
        </font>
    </td>
</tr> 
```

我已经验证了在输入字段附近以红色字体引发错误的页面。假设管理员登录并在验证后显示错误消息。现在，如果管理员想从下拉列表中选择“csc 员工”，我需要删除这些错误消息，只显示输入字段。

请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:05:18.663

使用 javascript 在这些字段上键入时使用事件清除这些表单错误...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T11:27:55.033

只需删除所有这些行`<form:errors path="uname" cssClass="validationError"/>`

# path - 在 gnuplot 中绘图时删除数据的路径名

> ID：13742592
> 
> 赞同：9
> 
> 时间：2012-12-06T11:23:50.023
> 
> 标签：path, gnuplot

我对 gnuplot 比较陌生，我正在尝试绘制一些数据并将其保存到 png 文件中以供报告。我正在使用 exec("gnuplot") 从 java 程序运行 gnuplot，但每当我尝试从文件中读取数据并绘制它时，该图包含数据文件的完整路径名并将其打印在我的部分图上。

这使得情节看起来相当丑陋，不适合我的报告。有没有可以用来删除路径名的命令或其他东西，或者我必须在生成 .png 后使用 Photoshop 手动将其渲染掉？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T13:23:38.903

文件名是默认标题。如果您不想显示它，只需将其关闭：

```
plot "/path/to/file" notitle 
```

# javascript - JavaScript 中命名空间处理的推荐方法？

> ID：13742594
> 
> 赞同：0
> 
> 时间：2012-12-06T11:24:00.253
> 
> 标签：javascript, namespaces, resharper, intellisense

我们有一组 javascript «模块» 组织在 «namespaces» — 根植于全局对象（窗口）的对象层次结构。

在某些情况下，我们使用一个实用程序`createNs("namespace.name")`（它的工作原理与 YUI 完全一样`YAHOO.namespace`），但是我们**没有 IntelliSense**。ReSharper 也无法解决此类问题。

目前，让 IntelliSense 工作的唯一方法是编写非常麻烦的东西，如下所示：

```
// module with no dependencies:
(function (window) {
    var ourCompany = window.ourCompany || (window.ourCompany = {});
    var components = ourCompany.components || (ourCompany.components = {});
    var emails = components.emails || (components.emails = {});
    emails.inbox = {
        checkNew: function () { }
    };
})(window);

// consumer:
(function (window) {
    window.ourCompany.components.emails.inbox.checkNew();
})(window); 
```

另一种选择是使用`jQuery.extend`并不总是可用的方法：

```
// depends on jquery:
(function (window, $) {
    $.extend(true, window, {
        ourCompany: {
            components: {
                emails: {
                    inbox: {
                        checkNew: function () { }
                    }
                }
            }
        }
    });
})(window, jQuery); 
```

什么是公分母解决方案？

*   少写，

*   有智能，

*   有 ReSharper 的重构，

*   没有第三方依赖。

可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:38:40.260

好吧，这是您的选择：

1.  您可以编写一个 R# 插件来解析您的实用程序方法。如果你有兴趣，我可以告诉你在哪里看。

2.  您可以尝试使用 Visual Studio Intellisense for JavaScript（ReSharper | Options -> Environment | Intellisense | General -> Limited ReSharper IntelliSense -> 打开除 JavaScript 之外的所有内容）。这只会影响 Intellisense，所有其他 ReSharper 功能将继续工作。

3.  在 ReSharper 7.1 中，我们为 Intellisense 提供了在 JS 文件中遇到的所有标识符。也许对你来说就足够了。

4.  如果您不使用，`/// <reference path="path-to/another-script.js" />`那么您可以创建一个单独的 JS 文件（不会真正包含在任何地方），代码如下

    我们的公司.components.emails = {};

# jquery - 我们如何在 jquery 注销时删除所有页面上的 cookie？

> ID：13742606
> 
> 赞同：0
> 
> 时间：2012-12-06T11:24:31.457
> 
> 标签：jquery, jquery-cookie

嘿，我是 jquery 的新手，并且将 mvc3 与 jquery 一起使用。谁能告诉我如何在使用 jquery 单击注销按钮时清除我们网站上所有页面上的 cookie？

在登录按钮上，我的代码是：

```
$('.login').click(function(){
    var username = $('#uname').val();
    var password = $('#upass').val();

    $.cookie('username', username, { path: '/' });
    $.cookie('password', password, { path: '/' });
}); 
```

我想用 jquery 清除一行代码中的所有 cookie。任何人都可以建议我，我该怎么做？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:27:23.880

要使用 JQuery 删除 cookie，请将值设置为 null：

```
$.cookie('username', null);
$.cookie('password', null); 
```

# sql - SQL 排序和分组依据

> ID：13742608
> 
> 赞同：0
> 
> 时间：2012-12-06T11:24:43.653
> 
> 标签：sql

在进行执行特定查找的查询时，我有点迷失了。我进行了查询的第一部分，它将返回所有帐户中缺少某些条目的帐户。现在我需要根据他们上次的登录尝试进一步过滤这个子集。

表结构如下：

*   users 表包含所有用户信息。我们只关心 project_id 33 下的用户。
*   users_account_list 包含用户拥有的所有帐户。我们只关心没有服务 50 条目的用户。
*   users_login_logs 包含用户的所有登录尝试。

原来的查询我有这个：

```
SELECT u.id,
       u.login, 
       u.email, 
       u.nickname,
       b.station_login AS "additionals.station_login",
       a.id AS "user_account_list.id",
       a.game_id AS "user_account_list.game_id",
       a.game_uid AS "user_account_list.game_uid",
       c.created_at AS "last login"
FROM users u
LEFT JOIN user_account_list a ON u.id = a.user_id AND a.game_id = 50
LEFT JOIN user_additionals b ON u.id = b.id
LEFT JOIN user_login_logs c ON u.id = c.user_id
WHERE u.project_id = 33
AND u.verified_at IS NOT NULL
AND (a.id IS NULL OR a.game_id IS NULL OR a.game_uid IS NULL)
AND (b.station_login IS NULL OR b.station_login = '')
ORDER BY c.created_at DESC 
```

这将返回所有在 project_id 33 下注册的用户，并且没有 game_id 50 的条目，并且在他们的附加信息表中没有存储任何信息。可选，但不相关，只是限制返回的数据。它确实为每个用户返回了多行，根据他们的最新登录日期排序。

我需要的是让每个用户只返回 1 行以及他们的最新登录日期。*我尝试用 u.id 的 GROUP 替换 ORDER BY*但这给了我最旧的结果，而不是最新的。

我怎样才能：

*   将返回的行限制为每个用户仅 1 行
*   确保该行基于用户的最新登录尝试。

*编辑*：

这是查询当前返回的内容：

```
+----+-------+-----------------+----------+---------------------------+----------------------+---------------------------+----------------------------+---------------------+
| id | login | email           | nickname | additionals.station_login | user_account_list.id | user_account_list.game_id | user_account_list.game_uid | last login          |
+----+-------+-----------------+----------+---------------------------+----------------------+---------------------------+----------------------------+---------------------+
|  1 | usrnm | someon@mail.com | Nickname |                           |                 NULL |                      NULL | NULL                       | 2012-10-19 00:00:00 |
|  1 | usrnm | someon@mail.com | Nickname |                           |                 NULL |                      NULL | NULL                       | 2012-10-18 00:00:00 |
|  1 | usrnm | someon@mail.com | Nickname |                           |                 NULL |                      NULL | NULL                       | 2012-10-17 00:00:00 |
+----+-------+-----------------+----------+---------------------------+----------------------+---------------------------+----------------------------+---------------------+
3 rows in set (0.08 sec) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:33:14.403

做到这一点的一种方法是使用下`JOIN`表`user_login_logs`：

```
 SELECT user_id, MAX(created_at) LatestDate
   FROM user_login_logs 
   GROUP BY user_id 
```

并加入它`created_at = LatestDate`。这会将用户登录日志限制为每个用户的最新创建日期。这是您的查询：

```
SELECT u.id,
       u.login, 
       u.email, 
       u.nickname,
       b.station_login AS "additionals.station_login",
       a.id AS "user_account_list.id",
       a.game_id AS "user_account_list.game_id",
       a.game_uid AS "user_account_list.game_uid",
       c.created_at AS "last login"
FROM users u
LEFT JOIN user_account_list a ON u.id = a.user_id AND a.game_id = 50
LEFT JOIN user_additionals b ON u.id = b.id
LEFT JOIN user_login_logs c ON u.id = c.user_id
LEFT JOIN
(
   SELECT user_id, MAX(created_at) LatestDate
   FROM user_login_logs 
   GROUP BY user_id
) maxc ON c.userid = maxc.userid AND c.created_at = maxc.LatestDate
WHERE u.project_id = 33
AND u.verified_at IS NOT NULL
AND (a.id IS NULL OR a.game_id IS NULL OR a.game_uid IS NULL)
AND (b.station_login IS NULL OR b.station_login = '')
ORDER BY c.created_at DESC; 
```

**请注意：**您是`LEFT JOIN`表，因此左连接表中不匹配的行将包含在结果集中。如果您不需要将它们包含在结果集中，请`INNER JOIN`改用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T11:28:40.977

您需要在尝试时将您`ORDER BY`的替换为 a `GROUP by u.id`，但您还需要在 SELECT 中表明您想要组中的最后一个日期，因此您需要替换

```
c.created_at AS "last login" 
```

经过

```
MAX(c.created_at) AS "last login" 
```

这将仅返回每个用户一行，这要`GROUP BY`归功于`MAX()`

编辑：我认为您应该避免使用带有空格的别名列名以避免错误

# .htaccess - 是否可以编写一个 RewriteCond 以不同的方式完成此操作

> ID：13742610
> 
> 赞同：0
> 
> 时间：2012-12-06T11:24:51.067
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我有这个重写条件：

```
RewriteCond    %{REQUEST_URI} !.*\.(css|js|php|html|png|jpg|gif)|notes|messages|/delete/|/achors_data/|/composer/|/pagination/|/mom_mp3/|/swf/|/js/|/stories/|/wall/|/news_feed/|/notifications/|opencv|hdflvplayer|hdflvplayer2|videojs|ffmpeg|mediaplayer|uploadify|/v/|/video/|/options/|show_msg_dialogs|facedetector|classes|right_column_modules|functions|maurice|pokes|opticrop|geoip_city|/autocomplete/|chrono|ajax|editprofile|tag|Svetlozar.NET 
```

它必须与在 root 上创建的每个新目录一起维护，因为我有一个重写规则，它将所有内容从不存在的目录（root/mydirectory/ 和 root/mydirectory_b/）重定向到 root/specialdirectory/，除非条件是只是根目录中的任何现有目录，不需要应用转到特殊目录的规则。

我的问题是是否可以编写 rewritecond 或采取另一种方法来完成相同的任务，而不必手动编写在根目录下创建的 .htaccess 中的每个新目录。

所以这是使用条件的重写规则，它使所有内容（root/anydir/）都转到 root/master

```
RewriteCond    %{REQUEST_URI} !.*\.(css|js|php|html|png|jpg|gif)|notes|messages|/delete/|/search/|/buttons/|/achors_data/|/composer/|/pagination/|/mom_mp3/|/swf/|/js/|/stories/|/wall/|/news_feed/|/notifications/|opencv|hdflvplayer|hdflvplayer2|videojs|ffmpeg|mediaplayer|uploadify|/v/|/video/|/options/|show_msg_dialogs|facedetector|classes|right_column_modules|functions|maurice|pokes|opticrop|lists|geoip_city|/autocomplete/|chrono|ajax|editprofile|tag|Svetlozar.NET
RewriteRule   ^([A-Za-z-0-9-_.]+)?$ master/$2 
```

然后是只有在根目录之外的目录friends 应该执行某个操作anything/friends 去anything/view_friends.php 的问题

我想要的是能够编写一个考虑到根目录中每个现有目录的 RewriteCond - 一个通配符。

所以我最终会在没有维护的情况下编写如下内容

```
RewriteCond    %{REQUEST_URI} ! * existing directories - except just one 
```

代替：

```
RewriteCond    %{REQUEST_URI} !.*\.(css|js|php|html|png|jpg|gif)|pokes|opticrop|notes|/delete/|/search/|/buttons/|/achors_data/|/composer/|/pagination/|/mom_mp3/|/swf/|/js/|/stories/|/wall/|/news_feed/|/notifications/|opencv|hdflvplayer|hdflvplayer2|videojs|ffmpeg|mediaplayer|uploadify|/v/|/video/|/options/|show_msg_dialogs|facedetector|classes|right_column_modules|functions|maurice|lists|geoip_city|/autocomplete/|chrono|ajax|editprofile|tag|Svetlozar.NET
RewriteRule ^([A-Za-z-0-9-_.]+)/friends $1/view_friends.php 
```

目录必须作为 rewritecond 应用的真实目录存在，因为我将幻影目录用于第一个 rewriterule。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:19:03.953

我没有完全按照你想要的。如果您可以发布整个 htaccess 而不仅仅是片段会更容易。还提供一些示例网址会有所帮助。

但我会告诉你我用的是什么。

```
RewriteCond %{DOCUMENT_ROOT}/$1 -d
RewriteRule ^([^/]+)(/(.*))?$ - [L] 
```

此规则获取 url 的第一个过去，在 first 之前`/`，并检查是否存在具有该名称的现有目录（在根目录中）。如果是这样，它将停止处理它下面的任何重写规则（这就是该`- [L]`部分所做的）。

# jquery - Jquery UI Widget 创建和销毁

> ID：13742616
> 
> 赞同：0
> 
> 时间：2012-12-06T11:25:23.690
> 
> 标签：jquery

在“学习 Jquery 第三版”中，我发现了以下几行：

> 销毁小部件.... 调用 .myWidget('destroy') 将从页面中删除 myWidget 小部件。小部件工厂完成了大部分工作，但是如果我们在 _create 中修改了部分文档（就像我们在这里所做的那样）；所以我们需要自己清理。

但是，当创建一个新的小部件时，我无法想象我们不修改 _create 函数的情况。你能给我一个这样做的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:25:43.333

这并不是说您是否修改了`_create`方法，而是说您是否修改了方法中的文档`_create`（或与此相关的任何方法）。

基本销毁方法为您做了很多事情，包括：

*   取消绑定到`this.element`小部件下命名空间的根元素的任何事件。
*   从元素 jQuery 数据存储中删除实例。
*   删除小部件工厂在小部件生命周期中可能附加的任何类。

超出此范围的任何内容都需要由小部件本身通过扩展destroy方法进行清理，例如删除附加到文档的任何元素，解除绑定到除节点以外的任何事件`this.element`（您可能已将调整大小或滚动事件附加到窗口或文件等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T11:45:11.260

如上。这个想法是，在 _create 函数中创建/附加的任何 DOM 操作或事件都将在销毁函数中删除。

我为我创建的控件附加了一个修改示例：http: [//pastebin.com/M9CzUajs](http://pastebin.com/M9CzUajs)

该链接特别显示了附加事件如何在销毁中恢复以及如何重新应用任何 CSS 修改。这在隐藏原始元素的渐进增强示例中很常见。

# objective-c - iOS SDK 3.1.1 中的批处理图 API

> ID：13742625
> 
> 赞同：1
> 
> 时间：2012-12-06T11:25:49.257
> 
> 标签：objective-c, facebook, facebook-graph-api, facebook-ios-sdk

我试图了解如何使用 iOS SDK 3.1.1 创建一批**依赖**的Graph API 调用。网上有大量独立批次的样本，但后续调用需要输出先前调用的批次没有。

看起来好像在 FBRequestConnection 类中内置了一些支持，因为您可以`addRequest`指定一个 optional `batchEntryName`，但我不明白如何引用后续请求中返回的值？

任何指导将不胜感激。

# php - Codeigniter where query customisation

> ID：13742629
> 
> 赞同：3
> 
> 时间：2012-12-06T11:26:06.257
> 
> 标签：php, mysql, codeigniter

firstly I have the following details in my database table field as **'company_name'=>'Test Company'**.I want to return true after comparing the input data(either 'Test Company' or 'TestCompany') , because of the existence of that string (test company).Please suggest a query for finding the existence or non-existence.I have used the following,but it didn't works in all the scenarios.

```
$companyname="TestCompany";

$this->db->select("*"); 
    $companynames=str_replace(' ', '', $companyname);   
    $where = "company in ('$companyname','$companynames')" ;
            // $where = "'company' = $companyname OR 'company' = $companynames'";
    $this->db->where($where);
    $query=$this->db->get('users');
    $val= $query->result_array();
    if(empty($val)){ 
      echo '1';//non-existence  of 'TestCompany' and 'Test Company'
    }
    else {
     echo '2';//existence of 'TestCompany' or 'Test Company'
  } 
```

The above code always prints '1' even if there is 'Test Company' exists in the database.

**Note**:The issue is when I select with 'TestCompany' the query will be like this

```
$where = "'company' = TestCompany OR 'company' = TestCompany'"; 
```

but the database contains 'Test Company' and the query returns no results.I want to solve this condition.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:34:00.080

Do you mean something like:

```
$companyname="Test Company";
$companyNameTmp = str_replace(' ', '', $companyname);   

$this->db->select("*"); 
$this->db->where('company_name', $companyname);
$this->db->or_where('company_name', $companyNameTmp); 
.... 
```

Or

```
$where = "company_name='$companyname' OR company_name='$companyNameTmp'";

$this->db->where($where); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:31:47.693

```
$companyNameTmp =  str_replace(' ', '', $companyname);
$query = mysql_query("
    SELECT * FROM `items` WHERE  REPLACE(`companyname`,' ','')='$companyNameTmp'
    ");
if(mysql_num_rows($query) >0)
{
    echo 'hi';
} 
```

REPLACE doesn't work with active record so you have to do it in a normal mysql query. Rather than doing the OR Sudhir's solution of just removing the spaces from the incoming variable makes more sense. Then compare that to the database field with the spaces removed.

# windows - 您可以重新映射特定键盘的键吗？

> ID：13742630
> 
> 赞同：11
> 
> 时间：2012-12-06T11:26:12.123
> 
> 标签：windows, keyboard-hook, raw-input

我的电脑上有两个键盘。一个普通的全尺寸键盘和一个数字小键盘。我想“重新映射”数字小键盘上的键，但不理会全键盘。因此，当用户在键盘上按下“5”时，它会重新映射到“Media Play”键，但如果在全键盘的键盘上按下相同的“5”，我会得到“5”。本质上，我想把那个单独的数字键盘变成一个媒体控制设备。

不幸的是，我不确定如何完成这项工作。Windows 有一个“原始输入”功能，可以区分键盘，但只允许读取键 - 而不是重新映射它们。有键盘钩子（低级和高级）可以重新映射击键，但它们不区分键盘。

我可以将这两种方法结合起来吗？为此，我必须确保在键盘钩子启动之前处理原始输入消息。是这样吗？

另外，我读到 Windows 出于某种原因不允许在同一进程中使用原始输入和键盘挂钩。我可以通过创建 2 个不同的进程来解决这个问题，但由于通信延迟（键盘挂钩必须完成工作的时间非常有限），这变得更加脆弱。

这完全可行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T11:22:18.870

最后结果证明我需要一个自定义键盘驱动程序来完成这个。幸运的是我找到了一个可以接受的——[拦截](http://oblita.com/Interception.html)。该应用程序已准备就绪并且可以完美运行。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-08T06:35:47.073

我认为[luamacros](https://github.com/me2d13/luamacros)（以前[的 hidmacros](http://www.hidmacros.eu/)可以做你想做的事，并且有可用的源代码。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-05T10:42:11.900

在这篇文章[http://vlaurie.com/computers2/Articles/remap-keyboard.htm](http://vlaurie.com/computers2/Articles/remap-keyboard.htm)中解释了如何重新映射键盘的键。希望有帮助。

# performance - uimageBuffer 上的 GLSL imageStore 比 uimage2D 上的慢？

> ID：13742631
> 
> 赞同：1
> 
> 时间：2012-12-06T11:26:14.923
> 
> 标签：performance, opengl, glsl

我有一个#version 420 GLSL 顶点着色器，它使用 imageStore 函数写入 uimage 的纹素（总是相同的）。（在实际的发布版本中，我使用了多个纹素，所以这个设置只是性能测量的一个极端测试用例。）

我尝试了两种不同的方法：

*   写入'layout(r32ui) coherent uniform uimage2D'，即，我将 GL_TEXTURE_2D 绑定到图像单元

*   写入'layout(r32ui) coherent uniform uimageBuffer'，即，我将 GL_TEXTURE_BUFFER 绑定到图像单元，该图像单元本身具有带有 GL_STATIC_DRAW 绑定的 VBO）

在具有 360K 顶点的测试场景中，对于两种备选方案，我测量了不同的性能（顶点被简单地光栅化为 GL_POINTS，因此片段着色器的工作可以忽略不计）：

*   没有 imageStore 的着色器：2.1 毫秒
*   const-coord imageStore 到 uimage2D：2.1 毫秒
*   const-coord imageStore 到 uimageBuffer：3.2 毫秒

因此，似乎 imageStore 到 imageBuffer 比 image2D 慢。但它变得更糟。如果我没有像上面那样将图像存储到具有恒定坐标的固定纹素，而是使用动态确定的偏移量，我会得到以下性能：

*   动态坐标 imageStore 到 uimage2D：2.1 毫秒
*   动态坐标 imageStore 到 uimageBuffer：7.2 毫秒

谁能确认这种性能差异，或解释为什么写入 uimageBuffer 比写入 uimage2D 慢得多？是因为绑定到 Buffer-Texture 的 VBO 吗？还是我似乎做错了什么？

我还应该提到，顶点着色器还使用第二个 uimage2D 来处理一些原子计数的东西，但这对于每种情况都是一样的，应该与 imageStore 无关。

# ruby-on-rails - ActionMailer 的多个附件？

> ID：13742632
> 
> 赞同：0
> 
> 时间：2012-12-06T11:26:14.187
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer, prawn

我正在使用操作邮件程序成功发送带有一个 PDF 附件的电子邮件，但我现在需要在一封电子邮件中发送多个 PDF 附件。我曾希望我可以传递我的产品并循环，在每次迭代时渲染一个文件，但这似乎不起作用。任何人都可以在这里帮助指导我正确的方向吗？这是我尝试过的：

```
def sales_notes(products)

  products.each do |product|
    pdf = Salesnote.new(product, @user_role)
    @pdf_filename = "#{product.cat_no} - #{product.release.artists.map { |a| a.name}.join (", ")} - #{product.release.title}.pdf"
    mail.attachments[@pdf_filename] = pdf.render
  end  

  mail(:to => "me@mydomain.com", :subject => "SALES NOTES ATTACHED")

  end 
```

我也试过用 just`attachments[@pdf_filename]`而不是`mail.attachments[@pdf_filename]`

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:52:13.333

**mail.attachments**没有问题。检查@pdf_filename 值是否重复或具有多个值

# html - IE10 在删除文件时似乎不喜欢 drop 事件

> ID：13742636
> 
> 赞同：9
> 
> 时间：2012-12-06T11:26:22.403
> 
> 标签：html, internet-explorer-10

我有一个简单的网络应用程序，它使用 HTML5 中的 filereader api 通过拖放接受文件上传。

将文件拖到网页上时，会触发正确的拖动事件，但是当我放下文件时，IE 只会打开它，而不是让 JS 处理它。

放置代码非常基本：

```
this.addEventListener("drop", function(event) {
event.stopPropagation();
event.preventDefault();
Self.drop(event); //this event is not hit. IE just opens the file!
}, false); 
```

这是 IE10 的特定限制还是我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-02T05:15:41.800

您还需要监听`dragenter`和`dragover`事件并防止它们的默认行为。您还需要防止`drop`事件处理程序中的默认行为。

例如，您可能想做这样的事情......

```
var $dropArea = $( "#drop-area" );

$dropArea.on({
    "drop" : makeDrop,
    "dragenter": ignoreDrag,
    "dragover": ignoreDrag 
});

function ignoreDrag( e ) {
    e.preventDefault();
}

function makeDrop( e ) {
    var fileList = e.originalEvent.dataTransfer.files,
        fileReader;

    e.preventDefault();
    if ( fileList && fileList.length > 0 ) {
        fileReader = new FileReader();
        fileReader.onloadend = handleReaderOnLoadEnd( $( "<img />" ) );
        fileReader.readAsDataURL( fileList[ 0 ] );
    }
}

function handleReaderOnLoadEnd( $image ) {
    return function( event ) {
        $image.attr( "src", this.result )
            .addClass( "small" ) 
            .appendTo( "#drop-area" );
    };
} 
```

[您可以在此 JSFiddle http://jsfiddle.net/qsyNW/](http://jsfiddle.net/qsyNW/)找到一个工作示例

注意：你不必像我一样使用 jQuery。但是，如果您确实使用 jQuery，那么您需要`e.originalEvent`在事件处理程序内部进行引用`drop`才能访问`dataTransfer.files`.

# c# - 在 C# 中的应用程序之间传递信息

> ID：13742637
> 
> 赞同：5
> 
> 时间：2012-12-06T11:26:26.200
> 
> 标签：c#, winforms, dll, communication

全部。首先，我知道[*Send data back to .exe from dll*](https://stackoverflow.com/q/4854052/626442)的问题，但是那里的答案给我留下了太多的开放式结局，因为我对我正在尝试的事情没有经验，所以我觉得有必要提出一个新问题。

我有一个严重依赖 SQL的现有 C# [ *All WinForms here ] 应用程序。*（客户）要求我们提供一个 SQL 编辑器和库，可用于开发和测试 SQL，但也可用于直接粘贴回主应用程序。新的 SQLEditor 是一个解析和执行 TSQL 的多线程应用程序。我现在有一些事情要考虑；从主应用程序启动第二个应用程序的最佳方法是什么::

1.  将第二个应用程序制作成 DLL 并加载到主项目中，将第二个应用程序作为新表单（`SqlEditor sqlEd = new SqlEditor()`等）调用？我需要线程轰炸的含义是什么`[STAThread]`- 因为我希望两个多线程应用程序同时可用和活动。

2.  要从主应用程序作为单独的 .exe 启动？

取决于您的建议；在上述任何一种情况下 - 我可以将信息从第二个应用程序中的点击事件传递回主应用程序的最佳方式是什么，同时它们仍然在运行和处于活动状态 [WCF`ApplicationDomains`等]？[观察者设计模式](http://www.dofactory.com/Patterns/PatternObserver.aspx)会在这里发挥作用吗？

为了让这个问题更有吸引力，这里是 SQL 编辑器：

![编辑](../Images/498fab826f2f3324df809fde78a4ebe1.png)

我计划有一个按钮，将选定的 SQL 粘贴回主应用程序。

我也知道这里有多个问题——对此我深表歉意。非常感谢你花时间陪伴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T11:58:17.147

如果您需要一种简单的方法来执行两个 WinForms 应用程序的 outproc 通信，那么为什么不使用`Clipboard`自定义格式呢？

在源应用程序中：

```
 // copy the data to the clipboard in a custom format
    Clipboard.SetData( "custom", "foo" ); 
```

在目标应用程序中，创建一个计时器以查看剪贴板：

```
 private void timer1_Tick( object sender, EventArgs e )
    {
        // peek the data of a custom type
        object o = Clipboard.GetData( "custom" );
        if ( o != null )
        {
            // do whatever you want with the data
            textBox1.Text = o.ToString();
            // clear the clipboard
            Clipboard.Clear();
        }
    } 
```

这应该满足您的需求，并且它仍然非常简单，因为它不需要任何重量级的 outproc 通信机制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T12:11:45.847

完成应用程序内通信的另一种方法是使用 Windows 消息。您定义一个全局 Windows 消息 ID 并使用 Windows API 调用，例如 SendMessage 和 PostMessage。

这是一篇简单的文章，解释了如何： [Ryan Farley 的文章“通过 Windows 消息在应用程序之间进行通信”](http://ryanfarley.com/blog/archive/2004/05/10/605.aspx)

这实际上是观察者模式，接收所有指向当前窗口的 Windows 消息并挑选出您正在监听的消息。

以我的经验，这绝对没有剪贴板方法那么脆弱。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T19:15:55.077

IPC（进程间通信）有多种选择，例如：邮槽、NamedPipe、内存映射文件、套接字、Windows 消息、COM 对象、远程处理、WCF ... [http://msdn.microsoft.com/en-us/库/windows/desktop/aa365574(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365574(v=vs.85).aspx) http://en.wikipedia.org/wiki/Inter-process_communication

其中一些提供双向通信，一些需要考虑系统安全性（防病毒和防火墙限制，您需要在其设置中将应用程序添加为例外）。

通过 WM_COPYDATA 发送消息只能通过 SendMessage 来完成，不支持 PostMessage，表示通信是同步的。

使用 outproc 单例 COM 对象是另一种方式，它不像其他方式和应用程序那么简单。必须在相同的安全上下文中运行才能访问相同的 COM 对象。

启动一个单独的应用程序可能会限制您可以传递的通信方式或数据类型，但将它们分开也将保护它们免受故障的影响（应用程序崩溃不会关闭另一个）。

如果这两个部分始终在同一台 PC 上运行，则将其中之一用作 dll[inproc] 会更简单。使用其他技术，如 Socket、Remoting、WCF 将为您提供更大的通信灵活性，即这两个部分可以在不同的 PC 上运行，只需稍加修改......

# browser - 对服务器的单个请求需要多少费用

> ID：13742639
> 
> 赞同：16
> 
> 时间：2012-12-06T11:26:31.680
> 
> 标签：browser, httprequest

我想知道通过将所有需要下载的 css 脚本和内容放在一个文件中，你能赢多少？

我知道你会通过使用精灵赢得很多，但在某些时候这样做实际上可能会受到伤害。

例如，我的网站使用了很多小图标，并且在将所有这些图标组合在一起后，大多数页面都有不同的图标，我总共可能会得到超过 500kb，但是如果我每页制作一个精灵，它会减少到几乎 50kb/页所以就是这样凉爽的。

但是脚本`js/css`呢？通过为每个页面制作一个大约 100 多行的脚本，我能赢得多少？或者也许我根本不会赢？

**问题**，基本上我想知道下载一个文件的单个请求需要多少成本，并且使用当今的现代浏览器和高速连接拥有许多脚本/图像文件真的很糟糕。

**编辑**

谢谢大家的回答，很难只选择一个，因为每个答案都回答了我的问题，我选择奖励我认为最直接回答我关于请求成本问题的那个，我不会接受任何正确的答案因为每个人都是。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-02-22T10:07:33.770

多个请求意味着更多的延迟，因此这通常会有所作为。确切*的成本*取决于响应的大小、服务器的性能、它在世界上的托管位置、是否被缓存等等......要获得真实的测量结果，您应该尝试使用真实世界的示例。

我经常使用 PageSpeed，并且通常遵循记录在案的最佳实践：[https](https://developers.google.com/speed/docs/insights/about) ://developers.google.com/speed/docs/insights/about 。

尝试直接回答您的最后一个问题：额外的请求将花费更多。拥有许多文件不一定“真的很糟糕”，但如果可以的话，将内容合并到一个文件中通常是个好主意。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-02-23T15:19:54.683

您的问题无法以真正通用的方式回答。

将脚本和样式表结合起来有几个原因。

使用 HTTP/1.1 的浏览器将打开多个连接，通常每个主机 2-4 个。因为几乎每个站点都有实际的 HTML 文件和至少一个其他资源，如样式表、脚本或图像，所以这些连接是在您加载初始 URL（如`index.html`.

*   TCP 连接的成本很高。这就是为什么浏览器会提前直接打开多个连接。
*   连接数通常被限制在少数，每个连接一次只能传输一个文件。

也就是说，您可以将您的文件拆分到多个主机（例如一个额外的主机`static.example.com`），这会增加主机/连接的数量并可以加快下载速度。另一方面，由于更多的连接和额外的 DNS 查找，这会带来额外的开销。

另一方面，有正当的理由让你的文件分开。

最重要的是 HTTP/2。HTTP/2 仅使用一个连接，并通过该连接多路复用所有文件下载。网上有多个演示可以证明这一点，例如[http://www.http2demo.io/](http://www.http2demo.io/)

如果您将文件分开，它们也可以单独缓存。如果您只有小部分更改，浏览器可以重新加载更改的文件，所有其他文件都将使用`304 Not Modified`. 当然，您应该有适当的缓存标头。

也就是说，如果您有资源，您可以使用 HTTP/2 为支持它的客户端单独提供所有文件。如果您有很多旧客户端，您可以在它们使用 HTTP/1.1 发出请求时回退到组合文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-02-23T01:21:33.367

棘手的问题:)

当然，简单的答案是更多的请求需要更多的时间，但这并不一定这么简单。

*   浏览器打开到同一主机的多个 http 连接，请参阅[http://sgdev-blog.blogspot.hu/2014/01/maximum-concurrent-connection-to-same.html](http://sgdev-blog.blogspot.hu/2014/01/maximum-concurrent-connection-to-same.html)因为那样，*不是*使用并行下载而是下载一个巨大的文件被[http://www.sitepoint.com/seven-mistakes-that-make-websites-slow/](http://www.sitepoint.com/seven-mistakes-that-make-websites-slow/)视为性能瓶颈
*   Web 服务器应尽可能使用 gzip 内容编码。因此 HTML、JS、CSS 等文本资源的大小是相当压缩的。
*   这些资产大部分是静态内容，因此标准的 Web 服务器应在它们上使用 etag 缓存。这意味着下次下载将是 26 字节，因为服务器告诉“未更改”而不是再次发送 32kbyte 的 JavaScript
*   由于 etag 缓存，整个网站都应该是可缓存的（我假设您正在编写游戏或类似的东西，而不是一些老式的 J2EE servlet 页面）。
*   如果你真的想要大文件，我建议制作 2-4 个大文件并下载它

所以把它放在一起：

*   如果您只有静态内容，那么一切都一样，因为 etag 缓存会缩短从服务器下载的任何实际内容，服务器返回 304 Not modified 答案
*   如果你有一些生成的动态内容（比如servlet页面），保持JS和CSS分开，因为它们可以单独缓存，只需要下载servlet页面
*   检查您的服务器是否支持 gzip 内容编码进行压缩，这很有帮助:)
*   如果您有多个动态内容（例如多个动态变化的图像），将它们表示为 2-4 个单独的图像以利用并行 http 连接进行下载是有意义的（尽管我很难想象现实生活中的这种用例）

请确保您没有动态提供静态内容。即尝试将图像加载到网络浏览器，打开网络流量视图，使用 F5 重新加载，然后看到您从服务器获得 304 Not modified，而不是 200 OK 和真实流量。最大的性能优化是你不会从服务器中提取任何东西，如果使用得当，它会开箱即用:)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-26T19:12:59.557

如果您使用这些类型中的任何一种，您会赢得多少可能会根据您的具体需求而有所不同，但我会谈谈我的情况：在我的 Web 应用程序中，我们不会合并所有文件，而是有 2 种类型的文件，常见文件，和每页文件，其中我们有我们的应用程序全局需要的公共文件，以及仅用于其案例的其他文件，这就是原因。

[![在此处输入图像描述](../Images/683bc7da9c65b50338110416e54f2151.png)](https://i.stack.imgur.com/I5Dft.png)

以上是我的web应用的图表请求分析，你需要考虑的是这个

DNS 查找只发生一次，因为它在此之后缓存，但是，DNS 名称可能已经被缓存了。

对于每个请求，我们都有：

```
request start + initial connection + SSL negotiation+ time to first byte + content download 
```

在大多数情况下，需要大部分请求时间的主要因素是内容下载大小，所以如果我有多个文件需要在所有页面中使用，我会将它们合并到一个文件中，这样我就可以保存 TCP堆栈时间，另一方面，如果我有需要在特定页面中使用的文件，我会将其分开，以便我可以节省其他页面中的内容下载时间。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-25T15:45:57.147

我认为@DigitalDan 有最好的答案。

但问题掩盖了真正的问题，如何让我的页面加载更快？或者至少，看起来加载速度更快......

我会添加一些关于“首屏”的内容：基本上，您希望内联尽可能多地允许您的页面在第一次往返时呈现主要的可见内容，因为这是用户认为最快的内容，并且使确定页面上没有其他内容会阻止...

阿奇博尔德解释得很好：

[https://www.youtube.com/watch?v=EVEiIlJSx_Y](https://www.youtube.com/watch?v=EVEiIlJSx_Y)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-02-27T17:42:22.477

实际上，许多 Web 开发人员面临的非常相关的问题（主题）。

我还将在此问题的其他贡献者中添加我的答案。

### 回答前先介绍

高性能网站取决于不同的因素，这里有一些考虑：

*   网站大小
*   网站的内容类型（主要内容文本、图像、视频或混合）
*   您网站上的流量（平均有多少人访问您的网站）
*   网络主机位置与您的主要访问者位置（在您的国家、地区和世界范围内），如果您有欧洲网站并且您的主机在美国，这很重要。
*   Web主机服务器（硬件）技术，我更喜欢SSD磁盘。
*   如何设置和优化网络服务器（软件）
*   是动态网站还是静态网站
*   如果是动态的，您的代码和数据库的结构和设计方式

通过定义您的需求，您可能能够找到合适的策略。

### 关于你的一般问题

你的网站怎么样。我建议您查看 Steve Souders 在他的 Book **High Performance Web Sites**中的 14 条建议。

史蒂夫·苏德斯 14 条建议：

1.  减少 HTTP 请求
2.  使用内容交付网络 (CDN)
3.  添加过期标头
4.  Gzip 组件
5.  将样式表放在顶部
6.  将脚本放在底部
7.  避免使用 CSS 表达式
8.  如果可能，将 JavaScript 和 CSS 设为外部
9.  减少 DNS 查找
10.  缩小 JavaScript
11.  避免重定向
12.  删除重复脚本
13.  配置 ETages
14.  使 Ajax 可缓存

### 关于你的问题

因此，如果我们`js/css`考虑以下内容将有很大帮助：

1.  最好在不同的文件上有不同的代码。
    示例：您可能有`page1`、`page2`和。and uses and uses only uses all ，所以 最好将 JavaScript 放在 3 个文件中。您对包括您拥有但不使用的所有东西不感兴趣。`page3``page4`
    `Page1``page2``js1``js2`
    `Page3``js3`
    `Page4``js1``js2``js3`

2.  CSS 精灵
3.  CSS在顶部，JS在最后
4.  缩小 JavaScript
5.  将您的 JavaScript 和 CSS 放在外部文件中
6.  CDN，如果您使用 jQuery，请不要将其下载到您的网站，只需使用推荐的 CDN 地址。

**结论**

我很确定还有更多细节要写。并不是所有的建议都是实施所必需的，但重要的是要了解这些建议。正如我之前提到的，我建议你阅读这本小书，它为你提供了更多细节。最后没有完美的最终解决方案。您需要从某个地方开始，尽力而为并加以改进。没有什么是永恒的。

祝你好运。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-28T00:40:10.080

拥有很多 100 行文件真的很糟糕，而且只有一两个大文件也很糟糕，尽管对于每种类型的 css/js/markup。

台式机主要具有高速连接，而移动设备也具有高延迟。

综合考虑这个主题的所有理论，我认为最好的方法应该更实用，不太准确，并且从统计的角度基于实际的连接速度和设备类型。

例如，我认为这是今天最好的方法：

1) 将向用户显示第一页/功能所需的所有内容放在一个文件中，应小于 100KB - 这绝对是一项要求。

2) 之后，按大小**拆分或分组**文件，以使延迟和下载时间不再明显。

为了简单和具体，如果我们假设：第一个字节的时间约为 200 毫秒，每个文件的大小应该在 120 KB 到 200 KB 之间，这对于当今的大多数连接来说是平均的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-02-25T15:28:15.090

你的问题的答案是真的取决于。

页面加载优化的最终目标是让您的用户*感觉*您的页面加载速度很快。

一些建议：

*   不要合并像 jquery 这样的公共库 js css 文件，因为当您访问其他网站时，它们可能已经被浏览器缓存，所以您甚至不需要下载它们；

*   合并资源，但至少需要单独的第一屏资源和其他资源，因为越早的用户可以看到一些有意义的东西，他们对你的页面的感觉就越快；

*   如果您的几个页面共享了一些资源，请将合并后的文件分开为共享资源和页面特定资源，这样当您访问第二个页面时，共享的可能已经被浏览器缓存，因此页面加载更快；

*   用户可能正在使用速度较慢或不一致的 3g/4g 网络的手机，因此即使是 50k 的数据或 2 个以上的请求也会让他们感觉不同；

# java - 我做了一个java应用程序。该类是从 javax.swing.JPanel 扩展而来的

> ID：13742643
> 
> 赞同：0
> 
> 时间：2012-12-06T11:26:37.017
> 
> 标签：java, graphics, jpanel, paintcomponent

paintComponent(Graphics) 被覆盖。但是当我启动程序时，它只显示旧的另一个窗口的内容，该窗口位于我的应用程序窗口的位置。我尝试最小化、最大化、单击、键入和几个这样的东西，但它保持不变

**代码请求的答案** 好的，这里是类的代码。它不是主类，主类不同。包装展示；

```
import javax.swing.*;
import java.awt.*;
import java.awt.image.*;
import javax.imageio.*;import java.io.*;
import java.awt.event.*;//@Suppress Warnings 'unused' to Board
import Working.*;

public class Board extends JPanel implements Const{

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    public int UDocks, CDocks, URun, CRun, UC, CC;
    public boolean isToss, isBat, isOdd;
    public ENGINE engine;
    public BufferedImage one, two, three, four, five, six, dock, Null;
    public int STATUS;

    public BufferedImage UHand, CHand;
    public String temp;
    public JFrame Final;public Dimension preferredsize=new Dimension(BOARD_WIDTH, BOARD_HEIGHT);

    public Board(){
        engine=new ENGINE(this);
        UDocks=CDocks=3;
        URun=CRun=UC=CC=0;

        this.STATUS=GAME_STARTED;
        this.addKeyListener(engine);this.setBackground(Color.green);

    }
    @Override
    public void paintComponent(Graphics graph)
    {
        super.paintComponent(graph);
        JOptionPane.showConfirmDialog(null, "HI", "HU", JOptionPane.PLAIN_MESSAGE);

        graph.setColor(Color.black);

        String a;
        if(STATUS==GAME_STARTED){
            graph.setColor(Color.green);
            graph.fillRect(0, 0, BOARD_WIDTH, BOARD_HEIGHT);graph.setColor(Color.black);
            engine.StartGame();
            STATUS = Const.GAME_FIRST_INNINGS ;
            this.requestFocus();
            }
        if(STATUS!=GAME_ENDED){
            if(isToss&&isBat)a="User won the toss and decided to bat first";
            else if(isToss&&!isBat)a="User won the toss and decided to bowl first";
            else if(!isToss&&!isBat)a="CPU won the toss and decided to bat first";
            else a="CPU won the toss and decided to bowl first";

            graph.drawString(a, 112, 54);
            graph.drawString("User Number",  192, 153);
            graph.drawString("Computer Number", 675, 142);
            if(STATUS==GAME_FIRST_INNINGS)
                a="Innings No.1\t Batting"+(isBat?"User\n":"CPU\n")+"Score:"+(isBat?URun:CRun)+"\tDocks:"+(isBat?UDocks:CDocks);
            else a="Innings No.2\t Batting"+(isBat?"CPU\n":"User\n")+"Score:"+(isBat?CRun:URun)+"\tDocks"+(isBat?CDocks:UDocks)+"\nTarget:"+(isBat?URun+1:CRun+1);
            graph.drawString(a, 600, 46);
            graph.drawImage(UHand, 130, 180, 493, 608, this);
            graph.drawImage(CHand, 618, 180, 980, 606, this);this.requestFocus();
        }
        else
        {

            if(isOdd)temp="User selected ODD during toss";else temp="User selected EVEN during toss";
            if(isToss){
                temp.concat("\nUser won the toss and chosed to");
                temp.concat((isBat?"Bat first":"Bowl first"));
            }else{
                temp.concat("\nCPU won the toss and elected to");
                temp.concat((isBat?"Bowl first":"Bat first"));
                }
            if(isBat)
            {
                temp.concat("\nUser scored "+URun);
                temp.concat("\nCPU scored "+CRun);
            }else{temp.concat("\nCPU scored "+CRun);temp.concat("\nUser scored "+URun);}
            if(CRun>URun)temp.concat("\nCPU won");
            else temp.concat("\nUser won");
            JOptionPane.showConfirmDialog(null, temp, "Match Summary", JOptionPane.PLAIN_MESSAGE);this.requestFocus();
        }

    }
    public boolean inttobool(int h)
    {
        if(!(h==0))return true;else return false;
    }
    public int booltoint(boolean h)
    {
        if(h)return 1;else return 0;
    }
    @Override
    public Dimension getPreferredSize()
    {
        return preferredsize;
    }
    public void addPaneltoFrame(Container cont)
    {
        cont.setLayout(new BorderLayout());
        cont.add("Center", this);

    }
} 
```

这是Const接口的代码

```
package display;

public interface Const {
    public final int GAME_STARTED=10;
    public final int GAME_TOSS_OVER=20;
    public final int GAME_FIRST_INNINGS=30;
    public final int GAME_SECOND_INNINGS=40;
    public final int GAME_ENDED=50;
    public final boolean TOSS_USER=true;
    public final boolean TOSS_CPU=false;
    public final boolean FIRST_USER=true;
    public final boolean FIRST_CPU=false;
    public final int BOARD_WIDTH=1150;
    public final int BOARD_HEIGHT=680;
    public final int HAND_WIDTH=360;
    public final int HAND_HEIGHT=425;
    public final boolean GAME_NEEDS_SAVING=true;
    public final boolean GAME_NEEDNOT_SAVE=false;
    public int booltoint(boolean h);
    public boolean inttobool(int h);
} 
```

这是Main的代码

```
package display;
import javax.swing.*;
public class Main {
    public static void main(String []args){
        JFrame Fram=new JFrame("Hand Cricket By S.GOVIND BALAJI");
        Fram.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);

        Board h=new Board();
        h.repaint();
        h.addPaneltoFrame(Fram.getContentPane());
        Fram.pack();
        Fram.setVisible(true);

    }
} 
```

这是开始的代码

```
package display;

     import java.awt.event.*;
     import java.awt.*;

    import javax.swing.*;
    import Working.*;

    public class Start implements Const, ActionListener, KeyListener {
private JFrame Final;
private JPanel pan, jan;
private JLabel Text;
private JButton Odd, Even;
private ENGINE child;private boolean ISOdd, ISBat, Waiting=false, ISToss;
private int UNum, CNum;

public Start(ENGINE child)
{
    this.child=child;
    pan=new JPanel(new BorderLayout());jan=new JPanel(new BorderLayout());
    Text=new JLabel("It's time for the toss.\n\t\t\t Odd or Even?");
    Odd=new JButton("Odd");
    Even=new JButton("Even");
    Odd.addActionListener(this);
    Even.addActionListener(this);
    jan.add("West", Odd);
    jan.add("East", Even);
    pan.add("North", Text);
    pan.add("South", jan);
    Final=new JFrame("Welcome, Toss");
    Final.setContentPane(pan);
    Final.pack();

    Final.setBackground(Color.pink);
    Text.setForeground(Color.GREEN);Odd.setForeground(Color.GREEN);Odd.setForeground(Color.GREEN);  Final.setVisible(true);
}
@Override
public void actionPerformed(ActionEvent src) {
    JButton main;
    main=(JButton)src.getSource();
    if(!Waiting){
    if(main==Odd)

        ISOdd=true;
    else 
        ISOdd=false;
    Waiting=true;
    Final.setVisible(false);
    Text.setText("Ok, Type the number for toss");
    Odd.setVisible(false);
    Even.setVisible(false);
    Final.setVisible(true);
    }else
    {
        ISBat=false;
        if(main==Odd)
            ISBat=true;

        this.child.child.isBat=ISBat;
        child.child.isToss=ISToss;
        child.child.isOdd=ISOdd;
        Final.setVisible(false);try{
            this.child.Toss_OVER=true;
        }catch(Throwable th){}
    }
}

@Override
public int booltoint(boolean h) {
    if(h)
    return 1;else return 0;

}
@Override
public boolean inttobool(int h) {
    if(h==1)return true;else return false;
}
@Override
public void keyPressed(KeyEvent arg) {
    if(!Waiting)
        return;
    UNum=Static.CharToInt(arg.getKeyChar());
    CNum=Static.Fluke(0, 6);
    ISToss=false;
    if(CNum+UNum%2==booltoint(ISOdd)){
        JOptionPane.showConfirmDialog(null, "You won the Toss\nComputer put"+CNum+"\nYou Put"+UNum+"\nYour Call"+(ISOdd?"Odd":"Even")
                +"\nActuall Result"+(ISOdd?"Odd":"Even")
                , "Toss Result", JOptionPane.PLAIN_MESSAGE);
        ISToss=true;
        Final.setVisible(false);
        Text.setText("Choose to bat or bowl");
        Odd.setText("Bat");
        Even.setText("Bowl");
        Odd.setVisible(true);
        Even.setVisible(true);
        Final.setVisible(true);
    }else{
        JOptionPane.showConfirmDialog(null, "You lost in the Toss\nComputer put"+CNum+"\nYou Put"+UNum+"\nYour Call"+(ISOdd?"Odd":"Even")
                +"\nActuall Result"+(ISOdd?"Even":"Odd")
                , "Toss Result", JOptionPane.PLAIN_MESSAGE);
        ISToss=false;
        ISBat=inttobool(Static.Fluke(0, 1));
        JOptionPane.showConfirmDialog(null, "Computer decided to "+(ISBat?"bat":"bowl")+"first", "Choosed", JOptionPane.PLAIN_MESSAGE);
    }
}
@Override
public void keyReleased(KeyEvent arg0) {
    // TODO Auto-generated method stub

}
@Override
public void keyTyped(KeyEvent arg0) {
    // TODO Auto-generated method stub

} 
```

图像在正确的目录这是引擎的代码

```
package Working;

import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.JOptionPane;

import display.*;

public class ENGINE implements KeyListener, Const {
    //DATA MEMBERS
    public  Board child;public Start Toss;
    public boolean Toss_OVER=false;
    //heloo

    public ENGINE(Board paremnt){
        this.child=paremnt;

    }
    public void StartGame(){
        Toss=new Start(this);
        while(!Toss_OVER){}
        return;

    }

/*INHERITED INTERFACE IMPLEMENTATION*/
    @Override
    public int booltoint(boolean h) {
        if(h)
        return 1;else return 0;

    }
    @Override
    public boolean inttobool(int h) {
        if(h==1)return true;else return false;
    }
    @Override
    public void keyPressed(KeyEvent arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    public void keyReleased(KeyEvent arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    public void keyTyped(KeyEvent KE) {
        int Key=Static.CharToInt(KE.getKeyChar()), CKey;
        //User first batting& First Innings
        //*/*/*/*/*/*/*/***-*-*-*-*-*-*-*-*-*-
        //-*---*--*--*-*-*--*-*-*-*-*-*-*-*-*-*-
        //@Minimize
        //-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*
        if(child.isBat&&child.STATUS==GAME_FIRST_INNINGS){
        switch(Key)
        {
        case '0':if(child.UDocks==0){JOptionPane.showConfirmDialog(null, "You have no docks remaining.Type Again", "Warning", JOptionPane.WARNING_MESSAGE);return;}
            child.UDocks--;
            child.UHand=child.dock;
            break;
        case '1':
            child.UHand=child.one;
            break;
        case '2':
            child.UHand=child.two;
            break;
        case '3':
            child.UHand=child.three;
            break;
        case '4':
            child.UHand=child.four;
            break;
        case '5':
            child.UHand=child.five;
            break;
        case '6':
            child.UHand=child.six;
            break;

        }CKey=Static.Fluke(0, 6);
        switch(CKey)
        {
        case '0':
            child.CHand=child.dock;
            break;
        case '1':
            child.CHand=child.one;
            break;
        case '2':
            child.CHand=child.two;
            break;
        case '3':
            child.CHand=child.three;
            break;
        case '4':
            child.CHand=child.four;
            break;
        case '5':
            child.CHand=child.five;
            break;
        case '6':
            child.CHand=child.six;
            break;

        }

        child.repaint();
        if((Key==CKey))
        {
            JOptionPane.showConfirmDialog(null, "You are out", "Wicket", JOptionPane.PLAIN_MESSAGE);
            child.STATUS=GAME_SECOND_INNINGS;
            child.repaint();
            return;
        }
        else
        {
            if(Key==0)
                child.UC=CKey;
            else
                child.UC=Key;
            child.URun+=child.UC;child.repaint();
        }       
        }
        //*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*
        /*-*--*-*-*-*-*-*----*-*--*-*-**-*-*-*
         User First Batting&&&&&&Second INNINGS
         *-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-
         */
        else if(child.isBat&&child.STATUS==GAME_SECOND_INNINGS)
        {

                switch(Key)
                {
                case '0':
                    child.UHand=child.dock;
                    break;
                case '1':
                    child.UHand=child.one;
                    break;
                case '2':
                    child.UHand=child.two;
                    break;
                case '3':
                    child.UHand=child.three;
                    break;
                case '4':
                    child.UHand=child.four;
                    break;
                case '5':
                    child.UHand=child.five;
                    break;
                case '6':
                    child.UHand=child.six;
                    break;

                }
                if(child.CDocks!=0)
                CKey=Static.Fluke(0, 6);else CKey=Static.Fluke(1, 6);
                switch(CKey)
                {
                case '0':
                    child.CHand=child.dock;
                    break;
                case '1':
                    child.CHand=child.one;
                    break;
                case '2':
                    child.CHand=child.two;
                    break;
                case '3':
                    child.CHand=child.three;
                    break;
                case '4':
                    child.CHand=child.four;
                    break;
                case '5':
                    child.CHand=child.five;
                    break;
                case '6':
                    child.CHand=child.six;
                    break;

                }

                child.repaint();
                if((Key==CKey))
                {
                    JOptionPane.showConfirmDialog(null, "Computer is out", "Wicket", JOptionPane.PLAIN_MESSAGE);
                    child.STATUS=GAME_ENDED;
                    child.repaint();
                    return;
                }
                else
                {
                    if(Key==0)
                        child.CC=Key;
                    else
                        child.CC=CKey;
                    child.CRun+=child.CC;child.repaint();
                    if(child.CRun>child.URun)child.STATUS=GAME_ENDED;
                }       

        }

        //*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*
        /*-*--*-*-*-*-*-*----*-*--*-*-**-*-*-*
         User Second Batting&&&&&&Second INNINGS
         *-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-
         */

        else if(!child.isBat && child.STATUS==GAME_SECOND_INNINGS){
            switch(Key)
            {
            case '0':if(child.UDocks==0){JOptionPane.showConfirmDialog(null, "You have no docks remaining.Type Again", "Warning", JOptionPane.WARNING_MESSAGE);return;}
                child.UDocks--;
                child.UHand=child.dock;
                break;
            case '1':
                child.UHand=child.one;
                break;
            case '2':
                child.UHand=child.two;
                break;
            case '3':
                child.UHand=child.three;
                break;
            case '4':
                child.UHand=child.four;
                break;
            case '5':
                child.UHand=child.five;
                break;
            case '6':
                child.UHand=child.six;
                break;

            }CKey=Static.Fluke(0, 6);
            switch(CKey)
            {
            case '0':
                child.CHand=child.dock;
                break;
            case '1':
                child.CHand=child.one;
                break;
            case '2':
                child.CHand=child.two;
                break;
            case '3':
                child.CHand=child.three;
                break;
            case '4':
                child.CHand=child.four;
                break;
            case '5':
                child.CHand=child.five;
                break;
            case '6':
                child.CHand=child.six;
                break;

            }

            child.repaint();
            if((Key==CKey))
            {
                JOptionPane.showConfirmDialog(null, "You are out", "Wicket", JOptionPane.PLAIN_MESSAGE);
                child.STATUS=GAME_ENDED;
                child.repaint();
                return;
            }
            else
            {
                if(Key==0)
                    child.UC=CKey;
                else
                    child.UC=Key;
                child.URun+=child.UC;child.repaint();
                if(child.URun>child.CRun)child.STATUS=GAME_ENDED;
            }       
            }
        //User second batting& First Innings
                //*/*/*/*/*/*/*/***-*-*-*-*-*-*-*-*-*-
                //-*---*--*--*-*-*--*-*-*-*-*-*-*-*-*-*-
                //@Minimize
                //-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*
        else if(!child.isBat&&child.STATUS==GAME_FIRST_INNINGS)
        {

                switch(Key)
                {
                case '0':
                    child.UHand=child.dock;
                    break;
                case '1':
                    child.UHand=child.one;
                    break;
                case '2':
                    child.UHand=child.two;
                    break;
                case '3':
                    child.UHand=child.three;
                    break;
                case '4':
                    child.UHand=child.four;
                    break;
                case '5':
                    child.UHand=child.five;
                    break;
                case '6':
                    child.UHand=child.six;
                    break;

                }
                if(child.CDocks!=0)
                CKey=Static.Fluke(0, 6);else CKey=Static.Fluke(1, 6);
                switch(CKey)
                {
                case '0':
                    child.CHand=child.dock;
                    break;
                case '1':
                    child.CHand=child.one;
                    break;
                case '2':
                    child.CHand=child.two;
                    break;
                case '3':
                    child.CHand=child.three;
                    break;
                case '4':
                    child.CHand=child.four;
                    break;
                case '5':
                    child.CHand=child.five;
                    break;
                case '6':
                    child.CHand=child.six;
                    break;

                }

                child.repaint();
                if((Key==CKey))
                {
                    JOptionPane.showConfirmDialog(null, "Computer is out", "Wicket", JOptionPane.PLAIN_MESSAGE);
                    child.STATUS=GAME_SECOND_INNINGS;
                    child.repaint();
                    return;
                }
                else
                {
                    if(Key==0)
                        child.CC=Key;
                    else
                        child.CC=CKey;
                    child.CRun+=child.CC;child.repaint();
                }       

        }
        }
    } 
```

这是静态的代码

```
package Working;

public class Static {
    public static double Fluke(double x, double y)
    {
        double h;
        h=Math.random() * (y-x);
        h+=x;
        return h;
    }
    public static int Fluke(int x, int y)
    {
        int h;
        h=(int)Math.random() * (y-x);
        h+=x;
        return h;
    }
    public static float Fluke(float x, float y)
    {
        float h;
        h=(float)Math.random() * (y-x);
        h+=x;
        return h;
    }
    public static int CharToInt(char x)
    {
        switch(x)
        {
        case '0':
            return 0;           
        case '1':
            return 1;
        case '2':return 2;
        case '3':return 3;
        case '4':return 4;
        case '5':return 5;
        case '6':return 6;
        default:return 6;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:13:35.420

操作后尝试调用**repaint()**或**updateUI()**方法。

# ios - 为什么我不能将超过 6 个字符粘贴到 UIAlertView 中的 UITextField 中？

> ID：13742644
> 
> 赞同：0
> 
> 时间：2012-12-06T11:26:40.343
> 
> 标签：ios, uitextfield, uialertview

我在 UIAlertView 中有 UITextField。

当我将 6 个字符复制并粘贴到警报视图文本字段中时，它可以正常工作，但是当我粘贴超过 6 个字符时，它就不起作用了。

我该如何解决这个问题？

```
-(IBAction)btnForgotPasswordHandler:(id)sender{
    cancelbtnPressed = NO;
    self.alert=[[UIAlertView alloc]initWithTitle:@"Skribbee" message:@"Please input your email address to proceed!" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:@"Cancel", nil];
    [self.alert setAlertViewStyle:UIAlertViewStylePlainTextInput];
    tfLostPassword=[alert textFieldAtIndex:0];
    tfLostPassword.delegate = self;
    [tfLostPassword setKeyboardType:UIKeyboardTypeEmailAddress];
    [tfLostPassword setPlaceholder:@"Email Address"];
    tfLostPassword.returnKeyType = UIReturnKeyGo;
    [self.alert show];
} 
```

# c++ - 使用 boost::bind() 或不创建 boost::thread

> ID：13742648
> 
> 赞同：11
> 
> 时间：2012-12-06T11:26:49.717
> 
> 标签：c++, boost, boost-thread

有些人似乎使用 boost::bind() 函数启动 boost::threads，就像在以下问题的公认答案中一样：

[使用 boost 线程和非静态类函数](https://stackoverflow.com/questions/4581476/using-boost-thread-and-a-non-static-class-function)

而其他人根本不使用它，例如在这个问题中获得最多支持的答案中：

[作为 C++ 类的成员启动线程的最佳方式？](https://stackoverflow.com/questions/86046/best-way-to-start-a-thread-as-a-member-of-a-c-class)

那么，如果存在，有什么区别？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-06T11:39:16.860

从下面的编译代码中可以看到，并给出了预期的输出，对于将 boost::thread 与自由函数、成员函数和静态成员函数一起使用，完全不需要 boost::bind：

```
#include <boost/thread/thread.hpp>
#include <iostream>

void FreeFunction()
{
  std::cout << "hello from free function" << std::endl;
}

struct SomeClass
{
  void MemberFunction()
  {
    std::cout << "hello from member function" << std::endl;
  }

  static void StaticFunction()
  {
    std::cout << "hello from static member function" << std::endl;
  }
};

int main()
{
  SomeClass someClass;

  // this free function will be used internally as is
  boost::thread t1(&FreeFunction);
  t1.join();

  // this static member function will be used internally as is
  boost::thread t2(&SomeClass::StaticFunction);
  t2.join();

  // boost::bind will be called on this member function internally
  boost::thread t3(&SomeClass::MemberFunction, someClass);
  t3.join();
} 
```

输出：

```
hello from free function
hello from static member function
hello from member function 
```

构造函数中的内部绑定为您完成所有工作。

刚刚添加了一些关于每种函数类型会发生什么的额外评论。（希望我已经正确阅读了源代码！）据我所知，在外部使用 boost::bind 不会导致它也加倍并在内部调用，因为它会按原样通过。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-06T12:42:38.297

没有区别 -`thread`构造函数在`bind`内部使用。人们`bind`出于历史原因明确使用，因为 Boost.Thread 在 1.36 之前没有[“绑定”构造函数](http://www.boost.org/doc/libs/1_36_0/doc/html/thread/thread_management.html#thread.thread_management.thread.multiple_argument_constructor)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T11:32:20.530

用于将`boost::bind`成员函数绑定到线程，而没有 boost::bind 通常您使用的是静态函数或线程的自由函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T12:28:49.597

> 那么，如果存在，有什么区别？

主要区别在于您需要在线程函数中访问什么。

如果您的设计要求您访问类实例的数据，则将线程作为类实例的一部分启动（使用`boost::bind`with`this`和成员函数，或具有`void*`映射到的静态成员函数`this`- 这主要是风格问题）。

如果您的设计要求线程函数不依赖于特定对象的数据，则使用自由函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T11:32:37.183

主要区别在于您是要接口静态成员函数还是非静态成员函数。如果你想使用非静态成员函数作为线程启动的函数，你必须使用类似`bind`.

建议的替代方法（您链接的第二个问题）是使用静态方法，该方法采用指向类对象的指针，然后可以调用它的任何成员。这稍微清除了语法，但最大的优势（对我而言）是您不需要包含诸如`Boost`get之类的东西`bind`。但如果你正在使用`boost::threads`，你不妨也服用`boost::bind`。请注意，C++ 11 具有`std::bind`，因此您也可以使用`bind`with`pthreads`而不会引入任何额外的依赖项，例如 Boost，但前提是您想使用 C++ 11。

我没有看到一个令人信服的语法理由来避免`bind`过度使用调用成员函数的静态方法。但这更多是个人喜好问题。

# android - Jelly Bean 上的 Android 导航按钮向上

> ID：13742650
> 
> 赞同：0
> 
> 时间：2012-12-06T11:26:51.867
> 
> 标签：android, actionbarsherlock, android-4.2-jelly-bean

我开发了一个应用程序，其中包含一个带有文章列表的主屏幕。如果单击它，您将在另一个屏幕中访问详细信息。

我实现了 ActionBarSherlock，所以我为此活动使用了“向上”按钮模式。

然后我向这个应用程序添加了一个小部件。当您单击小部件时，您可以直接访问详细活动。

“向上”按钮已按照 Google 的建议 ( [http://developer.android.com/training/implementing-navigation/ancestral.html](http://developer.android.com/training/implementing-navigation/ancestral.html) ) 实施。

我的问题是，在 API 级别 15 及以下，它运行良好。它调用以下代码：

```
@Override
public boolean shouldUpRecreateTask(Activity activity, Intent targetIntent) {
    String action = activity.getIntent().getAction();
    return action != null && !action.equals(Intent.ACTION_MAIN);
} 
```

但是在 JellyBean 上，使用的代码是：

```
public boolean shouldUpRecreateTask(Intent targetIntent) {
    try {
        PackageManager pm = getPackageManager();
        ComponentName cn = targetIntent.getComponent();
        if (cn == null) {
            cn = targetIntent.resolveActivity(pm);
        }
        ActivityInfo info = pm.getActivityInfo(cn, 0);
        if (info.taskAffinity == null) {
            return false;
        }
        return !ActivityManagerNative.getDefault().targetTaskAffinityMatchesActivity(mToken, info.taskAffinity);
    } catch (RemoteException e) {
        return false;
    } catch (NameNotFoundException e) {
        return false;
    }
} 
```

如果必须重新创建堆栈，该方法的第一部分会检索有关应加载的活动的信息。

但我仍然不明白这条线是什么：

```
!ActivityManagerNative.getDefault().targetTaskAffinityMatchesActivity(mToken, info.taskAffinity); 
```

任何人都可以在这条线上帮助我，我真的需要找出如何通过初始化一切来获得 true 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:31:27.540

它是一个布尔方法，它必须返回一些东西。如果它需要返回一个真正的布尔变量才能工作，你必须这样做！

来自官方文档：

```
Returns true if the app should recreate the task when navigating 'up' 
from this activity by using targetIntent.

If this method returns false the app can trivially call navigateUpTo(Intent)
using the same parameters to correctly perform up navigation. 
If this method returns false, the app should synthesize a new task stack by using 
TaskStackBuilder or another similar mechanism to perform up navigation. 
```

> 亲和性指示活动更喜欢属于哪个任务。默认情况下，来自同一个应用程序的所有活动都彼此具有亲和性。因此，默认情况下，同一个应用程序中的所有活动都喜欢在同一个任务中。但是，您可以修改活动的默认亲和性。不同应用程序中定义的活动可以共享一个亲缘关系，或者同一应用程序中定义的活动可以分配不同的任务亲缘关系。

# php - PHP、SimpleXML、CDATA 和 HTML 实体

> ID：13742651
> 
> 赞同：0
> 
> 时间：2012-12-06T11:26:53.057
> 
> 标签：php, xml, simplexml, html-entities, cdata

我有一些包含 CDATA 的 XML。

例如标题：`<title><![CDATA[School&rsquo;s Latest News]]></title>`

当我使用 simplexml_load_string 解析完整的 XML 文档时，我可以使用 (string) 访问 CDATA 值。例如，我得到标题：

`$title = (string)$news_xml -> {'news'} -> {'title'}`

我遇到的问题是 ' 不是作为 ' 而是作为 â€™

如果我使用 html_entity_decode，我会得到完全相同的结果。

如果我在调用 simplexml_load_string 时使用 LIBXML_NOCDATA 选项，我可以使用 print_r 查看 CDATA，而不必显式调用 (string)，但我的 HTML 实体仍然出现乱码。

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:35:09.713

`&rsquo;`是一个 unicode 字符（值 0x8217），另见[http://www.rsquo.net/](http://www.rsquo.net/)

如果您将其发送到浏览器（我认为您的意思是`presented as`），请确保将页面的编码设置为 UTF-8。

# java - 从 Eclipse 在 AWS EC2 上部署 Java webapp

> ID：13742653
> 
> 赞同：5
> 
> 时间：2012-12-06T11:26:59.357
> 
> 标签：java, eclipse, eclipse-plugin, amazon-ec2, amazon

我开始使用适用于 Eclipse (Juno) 的 AWS 插件 我已经看到可以在 Amazon Elastic BeanStalk 上部署一些应用程序，这很棒，但我更喜欢将它直接部署到特定的 EC2 实例（主要用于成本优化）

以前有没有人这样做过，还是我必须编写自己的 Eclipse 插件才能这样做？

根据： [http](http://blog.rajithdelantha.com/2011/10/complete-guide-to-deploy-java-web.html) ://blog.rajithdelantha.com/2011/10/complete-guide-to-deploy-java-web.html ，创建一个EC2服务器（像Tomcat一样使用）是可能的，但我可以'找不到选项，我只有用于 EBS 的 Tomcat6/7。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:18:02.823

使用 EC2 服务器，您可以运行任何您想要的 Web 服务器，它基本上只是一个虚拟机。您可以运行 Tomcat、Jetty、JBoss 等。几乎所有这些 Web 服务器都有插件或工具来支持从完全独立于 Amazon 的 Eclipse 进行部署。例如，如果您选择在您的 EC2 服务器上设置 Tomcat，那么您可以按照[这些](http://www.ibm.com/developerworks/library/os-eclipse-tomcat/index.html)（可能有更新的）说明进行操作。

# sql - tsvector 更新中的 Postgresql 正则表达式

> ID：13742654
> 
> 赞同：0
> 
> 时间：2012-12-06T11:27:02.840
> 
> 标签：sql, postgresql, triggers, postgresql-9.0, tsvector

我有以下 tsvector 列的更新触发器

```
CREATE TRIGGER tsvector_user_update
BEFORE INSERT OR UPDATE ON users
FOR EACH ROW EXECUTE PROCEDURE 
tsvector_update_trigger(user_tsv, 'pg_catalog.english', firstname, surname, email, card_id); 
```

这很好用，但是我的 card_id 列（文本）包含一个用户不知道的前导码（它是在扫描卡后添加的），所以我想在 tsvector 值为时去掉前导码生成，我已经尝试了触发功能作为开始

```
CREATE FUNCTION user_change_trigger() RETURNS trigger AS $$
BEGIN
NEW.user_tsv = setweight(to_tsvector('pg_catalog.english', coalesce(NEW.firstname,'')), 'A') ||
    setweight(to_tsvector('pg_catalog.english', coalesce(NEW.surname,'')), 'A') ||
    setweight(to_tsvector('pg_catalog.english', coalesce(REGEXP_REPLACE(NEW.card_id, '^\d+PRE', ''),'')), 'B') ||
    setweight(to_tsvector('pg_catalog.english', coalesce(NEW.email,'')), 'C');
    return new;
END

$$ LANGUAGE plpgsql;

CREATE TRIGGER tsvectorupdate BEFORE INSERT OR UPDATE
ON users FOR EACH ROW EXECUTE PROCEDURE user_change_trigger(); 
```

哪个执行，但我得到以下信息：

```
WARNING:  nonstandard use of escape in a string literal 
```

并且没有更新的 tsvector

前导是一个整数，后跟“PRE”。

(PostgreSQL 9.0)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:14:33.487

### 基本触发器设计

问题是主要性质的。在 PostgreSQL 中，您创建一个执行该工作的**触发器函数。**我在问题中看不到您的触发功能。

然后创建一个使用此功能的**触发器。**您只能将*常量*传递给触发函数。考虑一下[手册中关于`CREATE TRIGGER`](http://www.postgresql.org/docs/current/interactive/sql-createtrigger.html)

> *函数名*
> 
> 用户提供的函数，声明为**不带参数**并返回类型触发器，当触发器触发时执行。
> 
> *论据*
> 
> 执行触发器时提供给函数的可选的逗号分隔参数列表。**参数是文字字符串**常量。简单的名称和数字常量也可以在这里写入，但它们都将转换为字符串。请检查触发器函数的实现语言的描述，以了解如何在函数内访问这些参数；它可能与普通函数参数不同。

大胆强调我的。

用于`NEW`访问触发器函数内的列值。您不需要将它们作为参数传递。首先掌握基本概念。[从这里开始。](http://www.postgresql.org/docs/current/interactive/triggers.html)

### `regexp_replace()`

采用：

```
regexp_replace(card_id, '^\d+PRE', '') 
```

..因为前导字符应该只是数字（并且至少是其中一个）。

### 正确的触发和功能

以下测试用例*适用*于 PostgreSQL 9.1.6。你的版本对我来说基本不错，我只做了一些小的改动。但请继续阅读...

创建测试环境（最后会回滚）：

```
BEGIN;
CREATE SCHEMA test;
SET search_path = test;

CREATE TABLE users (
    users_id serial primary key
   ,firstname text
   ,surname text
   ,card_id text
   ,email text
   ,user_tsv tsvector
   ); 
```

触发功能：

```
CREATE FUNCTION user_change_trigger()
  RETURNS trigger AS
$func$
BEGIN

NEW.user_tsv :=
   setweight(to_tsvector('pg_catalog.english', coalesce(NEW.firstname,'')), 'A')
|| setweight(to_tsvector('pg_catalog.english', coalesce(NEW.surname,'')), 'A')
|| setweight(to_tsvector('pg_catalog.english', coalesce(regexp_replace(NEW.card_id, '^\d+PRE', ''),'')), 'B')
|| setweight(to_tsvector('pg_catalog.english', coalesce(NEW.email,'')), 'C');

RETURN NEW;
END

$func$ LANGUAGE plpgsql; 
```

plpgsql的[赋值运算符是**`:=`**](https://stackoverflow.com/questions/7462322/the-forgotten-assignment-operator-and-the-commonplace)- 与使用的 SQL 不同`=`。

扳机：

```
CREATE TRIGGER tsvectorupdate
BEFORE INSERT OR UPDATE ON users
FOR EACH ROW EXECUTE PROCEDURE user_change_trigger(); 
```

测试：

```
INSERT INTO users (firstname, surname, card_id, email)
VALUES ('Erwin', 'Brandstetter', '123PRE456', 'foo@dummy.org')
RETURNING *;

-- looks good!

UPDATE users SET firstname = 'Walter' WHERE TRUE
RETURNING *;

-- looks good, too! 
```

清理：

```
ROLLBACK; 
```

### `standard_conforming_strings`

探索您的[`standard_conforming_strings`](http://www.postgresql.org/docs/9.2/static/runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS). 警告表明您没有启用此设置，这需要您将反斜杠加倍：

```
'^\\d+PRE' 
```

# php - Ajax 调用将点击事件放入 php 变量中以避免 window.open() 方法

> ID：13742660
> 
> 赞同：1
> 
> 时间：2012-12-06T11:27:21.273
> 
> 标签：php, jquery, ajax

我有这个 jQuery 脚本，它计算某个 div 上的点击次数，然后在第二次点击时，它将用户重定向到自定义 url。即使用户离开页面，该脚本也会起作用并计算点击次数。

```
function traffic(){
    var traffic = $('.model').data("traffic");
    if(traffic){
        var nbc = localStorage['nbc']||0;
        $('.model a').click(function(){
            localStorage['nbc'] = ++nbc;
            if(nbc%2==0){
                window.open(traffic, '_blank');
            }
        });
    }
} 
```

现在，我是一个 ajax 的新手（实际上我对此一无所知，我是一个网站管理员而不是一个逾期截止日期的程序员），我需要一些帮助：

我需要一个**ajax 调用，在操作时将第二次点击发送到一个 php 变量**中，这样我就可以使用如下代码（并避免与另一个脚本冲突的“window.open”方法我在页面上使用）：

```
 if($number_of_clicks == 2){
       echo 'my new link, a method which will save me from using window.open';
   } else {
       echo 'my ragular link';
   } 
```

可以做到吗？

**更新**

让我解释一下，我的错是没有更清楚。

用户进入我的网站并点击正常链接。Jquery 存储该事件并且用户转到内部页面。

当他点击主页按钮时，ajax 将该事件发送到一个 php 变量，所以我将有 $myvar=1。

现在我可以更改我网站上的特定链接：

```
if($myvar == 1){
           echo 'my new link';
       } else {
           echo 'my ragular link';
       } 
```

现在，当用户单击该链接时，他将转到新链接。

希望我更清楚一点。

泰！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:43:32.827

获得点击 PHP 的唯一方法是只发出 AJAX 请求。例如：

```
$.get('/clickonce.php'); 
```

然后在 PHP 中你可以这样做：

```
<?php
$myvar = 1;
?> 
```

但这并不完美。将调用 clickonce.php 代码，但由于它是一个新页面请求，因此存在延迟，因此互联网/服务器响应速度较慢，可能需要几秒钟才能实际记录。

考虑到您的 window.open 与另一个脚本（我假设它是 javascript）冲突，我会选择 javascript 解决方案。

```
var clickedOnce = false;
function traffic(){
    var traffic = $('.model').data("traffic");
    if(traffic){
        var nbc = localStorage['nbc']||0;
        $('.model a').click(function(){
            localStorage['nbc'] = ++nbc;
            if(nbc%2==0){
                window.open(traffic, '_blank');
            } else {
                clickedOnce = true;
            }
        });
    }
} 
```

现在在您的其他 javascript 脚本中，您可以检查`if (!clickedOnce) { //do something }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:43:36.023

好吧，您可以使用 jQuery 简单地发出 AJAX 获取请求。

```
$.get('/your.php', function(url) {
     // value echoed by your php page will be available in the url variable passed into this function.
     // You can do what you want with it.
     alert(url);
}); 
```

# php - php5 + pdo + postgres + pgpool-ii：没有日志的错误

> ID：13742667
> 
> 赞同：3
> 
> 时间：2012-12-06T11:27:55.627
> 
> 标签：php, postgresql, pdo, pgpool

我使用 pgpool-ii 3.2.1、php 5.3.3-7+squeeze14、postgresql 8.4.13。

我在使用 PDO 进行的插入查询时遇到了一些问题，但我不明白问题出在哪里，因为没有写入日志（postgres、apache2、pgpool-II）。

查询很简单，比如

```
INSERT INTO table (column1, column2, ...) VALUES ('value1', 'value2', ...) 
```

如果我禁用 pgpool-II（启用 PDO）一切正常，即使我禁用 PDO，使用`pg_query`（打开 pgpool-II）进行查询，查询也会正确执行。其他类似的查询与 PDO + pgpool-ii.. 任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:04:58.360

请检查您的 PDO 设置

```
setAttribute(PDO::ATTR_EMULATE_PREPARES, true); 
```

如果你打电话`beginTransaction();`，别忘了打电话`commit();`

但实际上，如果您已经设置`PDO::ATTR_EMULATE_PREPARES`为*TRUE*，则​​不需要调用`beginTransaction();`和`commit();`

# php - 在文件夹中隐藏带有 .htaccess 的查询字符串

> ID：13742669
> 
> 赞同：3
> 
> 时间：2012-12-06T11:28:00.053
> 
> 标签：php, regex, .htaccess, url

我想打开这个网址：

```
http://mysite.com/images/?url=20121206/test.jpg&zoom=120&f=g 
```

进入这个：

```
http://mysite.com/images/20121206/test.jpg?zoom=120&f=g 
```

/images/ 文件夹中的 .htaccess 文件

我用谷歌搜索了很多正则表达式但没有工作..请帮忙！

或者可以在图像文件夹之外执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:34:16.057

这行得通吗？

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule images/(.*) images/index.php?url=$1 [QSA,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:41:21.543

这应该做我相信的工作。

```
Options +FollowSymlinks
RewriteEngine On
RewriteCond %{QUERY_STRING} url=(.*)
RewriteRule /images/ /images/%1 [QSA, R] 
```

# android - Android WIFI/2G Switch - Android 框架的哪个部分处理它？

> ID：13742672
> 
> 赞同：0
> 
> 时间：2012-12-06T11:28:13.270
> 
> 标签：android, wifi, android-framework

当wifi可用时，网络自动从2g连接到wifi？这在 Android 框架中在哪里处理？我目前正在为 Android（X86-华硕笔记本）开发以太网驱动程序。以太网驱动程序已启动并正常运行。我需要对现有框架进行更改，以便它有效地处理切换部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:32:47.647

您应该将 ConnectivityManager 用于 3G/EDGE 并将 wifi 设置为 BroadcastReceiver（作为呼叫）

检查这些项目：[WIFI SWITCHER](http://android-er.blogspot.be/2011/01/turn-wifi-onoff-using.html)和[RadioSwitchActivity](http://code.google.com/p/android-3g-to-2g-alert-notification-task-switch/source/browse/trunk/3g-to-2g-switch/src/com/gtug/hack/herbert_bangdao/Activities/RadioSwitchActivity.java?r=15)

# c# - XslCompiledTransform 无法使用从字符串创建的 XmlTestReader 进行转换

> ID：13742674
> 
> 赞同：2
> 
> 时间：2012-12-06T11:28:19.873
> 
> 标签：c#, xslt

我对 XslCompiledTransform 类有疑问。如果我尝试运行此代码：

```
string pathToXsltFile, pathToInputFile, pathToOutputFile;
XsltSettings xsltSettings = new XsltSettings(true, true);
XslCompiledTransform myXslTransform = new XslCompiledTransform();
XmlTextReader reader = new XmlTextReader(pathToFile);
myXslTransform.Load(reader, xsltSettings, new XmlUrlResolver());
myXslTransform.Transform(pathToInputFile, pathToOutputFile); 
```

它工作正常。但是，如果我想从字符串（文本）创建 XmlTextReader：

```
MemoryStream mStrm = new System.IO.MemoryStream(Encoding.UTF8.GetBytes(text));
XmlTextReader xmlReader = new XmlTextReader(mStrm);
mStrm.Position = 0; 
```

并尝试运行：

```
myXslTransform.Load(xmlReader, xsltSettings, new XmlUrlResolver());
myXslTransform.Transform(pathToInputFile, pathToOutputFile); 
```

我得到一个例外：

```
"this operation is not supported for a relative uri" 
```

由于某些原因，我不想创建临时文件并从该文件的路径创建 XmlTextReader。

**编辑**：

完整的异常消息：

```
"An error occurred while loading document ''.
See InnerException for a complete description of the error." 
```

内部异常消息：

```
"This operation is not supported for a relative URI." 
```

堆栈跟踪：

```
at System.Xml.Xsl.Runtime.XmlQueryContext.GetDataSource(String uriRelative, String uriBase)
at <xsl:template match=\"gmgml:FeatureCollection\">(XmlQueryRuntime {urn:schemas-microsoft-com:xslt-debug}runtime, XPathNavigator {urn:schemas-microsoft-com:xslt-debug}current)
at <xsl:apply-templates>(XmlQueryRuntime {urn:schemas-microsoft-com:xslt-debug}runtime, XPathNavigator )
at Root(XmlQueryRuntime {urn:schemas-microsoft-com:xslt-debug}runtime)
at Execute(XmlQueryRuntime {urn:schemas-microsoft-com:xslt-debug}runtime)
at System.Xml.Xsl.XmlILCommand.Execute(Object defaultDocument, XmlResolver dataSources, XsltArgumentList argumentList, XmlSequenceWriter results)
at System.Xml.Xsl.XmlILCommand.Execute(Object defaultDocument, XmlResolver dataSources, XsltArgumentList argumentList, XmlWriter writer, Boolean closeWriter)
at System.Xml.Xsl.XmlILCommand.Execute(XmlReader contextDocument, XmlResolver dataSources, XsltArgumentList argumentList, Stream results)
at System.Xml.Xsl.XslCompiledTransform.Transform(String inputUri, String resultsFile)
at MyNamespace.ApplyXslTransformation1(String input, String output, String xsltFileName) 
```

导致异常的语句：

```
myXslTransform.Transform(pathToInputFile, pathToOutputFile); 
```

关于文件功能我明天要问。我从另一个人那里得到了 xslt 文件。

当我从 xslt 文件的路径创建 XmlTextReader 文件时，一切都很好。我也尝试使用：

```
myXslTransform.Load(pathToXsltFile, xsltSettings, new XmlUrlResolver());
myXslTransform.Transform(pathToInputFile, pathToOutputFile); 
```

它也很好。

现在我得到了加密的 xslt。我已经解密它，我想从解密的字符串创建 XmlTextReader。由于安全原因，我不会创建临时 xslt 解密文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:00:05.330

我认为我们需要查看 XSLT 以及`document`对它所做的函数的任何调用。通常，您需要注意[该`document`函数](http://www.w3.org/TR/xslt#document)具有第二个参数，该参数可以作为基本 URI 来解析由第一个参数产生的 URI。如果不传入第二个参数，例如`<xsl:value-of select="document('foo.xml')"/>`样式表代码本身就提供了基本 URI。如果您从字符串加载样式表代码，则该机制可能无法像从文件系统或 HTTP URI 加载的样式表那样解析 URI。该问题的解决方案取决于您要加载的资源的位置以及它与主输入文件的关系。如果您想`foo.xml`从与主输入文档相同的位置加载，那么做`document('foo.xml', /)`而不是`document('foo.xml')`应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:21:08.613

我认为这是由于您将内存流的位置手动设置为 0 造成的；你混淆了 XmlTextReader。

我尝试了上述方法，当我评论那条线时它对我来说很好。

您将其设置为 0 是否有特殊原因？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-10T21:11:55.380

假设这个问题是关于在 .Net Core 应用程序中使用 XslCompiledTransform，我找到了“相对 URI 不支持此操作”的答案。在网站[https://github.com/dotnet/corefx/issues/31390](https://github.com/dotnet/corefx/issues/31390)

相关答案（由 vcsjones 于 2018 年 7 月 26 日评论）是：

“我相信您遇到了已知的兼容性更改。默认情况下，.NET Core 不允许解析 XML 的外部 URI，并在此处记录。

正如文档所说，如果您愿意，可以通过放置

AppContext.SetSwitch("Switch.System.Xml.AllowDefaultResolver", true); 在您的应用程序中。尝试将它放在示例程序的顶部。”

当我添加

```
AppContext.SetSwitch("Switch.System.Xml.AllowDefaultResolver", true); 
```

作为顶线

```
public void Configure(IApplicationBuilder app, IHostingEnvironment env) 
```

在启动时，错误“相对 URI 不支持此操作”消失了。那时，使用 XmlReader 调用 Load 时发生了一个新错误，该错误与查找 XSL 文件引用的其他文件有关。然后，当我将文件路径传递给 Load 中的 xsl 时，一切都按预期工作。

```
var resolver = new XmlUrlResolver {Credentials = CredentialCache.DefaultCredentials};
var transform = new XslCompiledTransform();
transform.Load(XslPath, new XsltSettings(true, true), resolver);

var settings = new XmlWriterSettings {OmitXmlDeclaration = true};
using (var results = new StringWriter())
using(var writer = XmlWriter.Create(results, settings))
{
    using (var reader = XmlReader.Create(new StringReader(document)))
    {
        transform.Transform(reader, writer);
    }

    return results.ToString();
} 
```

我添加这个是为了帮助其他人尝试调试为什么 XslCompiledTransform 会出现“相对 URI 不支持此操作”。在.net 核心中。

# asp-classic - 经典asp中文件的绝对路径使用

> ID：13742680
> 
> 赞同：4
> 
> 时间：2012-12-06T11:28:50.007
> 
> 标签：asp-classic

如何在经典 asp 中使用绝对路径？目前整个应用程序包含以下文件：

```
<!--#include file="../../../../../something.asp"--> 
```

如果我对 asp 文件进行绝对调用，例如：

```
<!--#include file="/root/foobar/something.asp"--> 
```

有人知道让它工作的技巧吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:21:38.657

使用基于网站根目录的[虚拟路径](http://msdn.microsoft.com/en-us/library/ms525940%28VS.90%29.aspx)：

```
<!--#include virtual="/something.asp"--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:35:54.127

如果在 IIS 中将站点设置更改为“**允许父路径**”，则第一个示例将起作用。

第二个样本是不可接受的，至少在 Windows 服务器上是不可接受的。

# macos - NSView 自动调整大小以适应内容视图

> ID：13742684
> 
> 赞同：4
> 
> 时间：2012-12-06T11:29:20.483
> 
> 标签：macos, cocoa, nsview

```
CustomView *customView = [[CustomView alloc] init];
[self.window.contentView addSubview:customView]; 
```

我怎样才能使窗口调整大小时`customView.frame.size.height`总是等于`contentView.frame.size.height`，同时`customView.frame.size.width = 20;`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-07-26T10:59:05.763

Swift 版本，应用 autoresizingMask：

```
let customView = CustomView()
customView.autoresizingMask = [.width, .height]
self.window.contentView.addSubview(customView) 
```

[参考选项](https://developer.apple.com/documentation/appkit/nsview/autoresizingmask)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-06T11:50:32.203

设置自定义视图的*autoresizingMask*：

```
CustomView *customView = [[CustomView alloc] init];
customView.autoresizingMask = NSViewWidthSizable | NSViewHeightSizable;
[self.window.contentView addSubview:customView]; 
```

# android - 在 android 应用程序中访问唤醒锁统计信息

> ID：13742695
> 
> 赞同：2
> 
> 时间：2012-12-06T11:30:07.103
> 
> 标签：android, power-management, wakelock

我正在为 Android 编写一个电源管理应用程序。

我希望能够在我的应用程序中访问唤醒锁统计信息。详细信息，例如哪些唤醒锁现在处于活动状态，其中有多少是部分的、完整的……等等，哪些唤醒锁阻止了设备进入睡眠等等。有没有办法我可以做到这一点..？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:24:28.293

> 有没有办法我可以做到这一点..？

欢迎您跟踪自己的应用程序对自己的使用`WakeLock`。您无权从一个应用程序访问有关其他应用程序使用`WakeLock`.

开发人员可以使用`adb shell dumpsys power`来查看`WakeLock`s 的出色之处，[如此 SO question and its answers](https://stackoverflow.com/questions/5780280/how-can-i-see-which-wakelocks-are-active)所示。

# python - 如何在打开 MessageBox 之前关闭 ProgressDialog？

> ID：13742700
> 
> 赞同：6
> 
> 时间：2012-12-06T11:30:27.547
> 
> 标签：python, wxpython

*我制作了一个可运行的示例来演示错误的行为： http: [//pastebin.com/8KpzD4pw](http://pastebin.com/8KpzD4pw)*

* * *

这个问题非常严重。我在保存文件时有一个`wx.ProgressDialog`up ，然后`IOError`我想关闭进度对话框并显示一条错误消息。不幸的是，这似乎是**不可能**的。在消息框关闭之前，进度对话框公然拒绝关闭：

![插图](../Images/bdfeac48beba241a55a512c67849c797.png)

如您所见，消息框出现在进度对话框下方，因此用户必须手动将焦点切换到消息框才能查看其内容。当消息框关闭时，进度对话框也会消失。这是保存功能的代码：

```
def save(self, path=None):
    # Show a loading dialog while the document is staving.
    progress = shared.show_loading(self, 'Saving document')

    try:
        raise IOError('Error message')

        if not path:
            self.document.save()
        else:
            self.document.save_to_file(path)
    except IOError as e:
        progress.done()

        message = 'Failed to save file:\n\n{}'.format(e.message)
        wx.MessageBox(message, 'Error', wx.OK | wx.ICON_ERROR)

    progress.done() 
```

`show_loading`和`progress.done`函数只是使用`wx.ProgressDialog`( [source](http://pastebin.com/jssjdjk4) )的快捷方式。

### 为什么在打开消息框之前进度对话框没有消失？我该如何解决？

* * *

我也尝试使用`wx.CallAfter`打开消息框，但无济于事：

```
# ...
except IOError as e:
    message = 'Failed to save file:\n\n{}'.format(e.message)

    def show_error():
        wx.MessageBox(message, 'Error', wx.OK | wx.ICON_ERROR)

    progress.done()
    wx.CallAfter(show_error)
# ... 
```

我还尝试在关闭进度对话框和使用`wx.MicroSleep`未成功打开消息框之间睡 100 毫秒。

我也尝试过在销毁进度对话框后立即调用`wx.Yield()`，`wx.WakeUpIdle()`但都没有任何效果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T16:29:19.943

只是出于好奇...您是否尝试在调用progressdialog.Destroy() 之后立即使用wx.SafeYield() 或wx.Yield() 或wx.YieldIfNeeded()？

您的样本不能按原样运行，所以我只是在黑暗中拍摄。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T18:23:15.623

我认为 Infinity77 在这里有正确的答案。人们忘记了 GUI 调用不是同步的——它们在返回时还没有完成。那个“完成”调用向窗口发送一条消息，作为响应，窗口可能会再排队几条消息来清理自己。当您启动模型消息框时，它会创建其 OWN 消息循环，同时将原始消息循环保持在暂停状态。因此，在消息框返回并且您的主消息循环再次运行之前，无法处理清理消息。Yield 调用将允许那些排队的消息耗尽。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-13T21:08:50.977

我有一个类似的案例，我最终通过调用解决了这个问题：

```
dlg.Update( dlg.GetRange( ) ) 
```

看来，至少当您将进度对话框置于“脉冲”模式时，它不会立即响应 Destroy 调用。在销毁它之前或之后，再多的睡眠或屈服都不会说服我的进度对话框停止显示。但是，通过简单地将值更新为最大值，它似乎会立即自动销毁（或至少隐藏）自身。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-06T14:39:53.690

wxPython 演示展示了如何中断 ProgressDialog。它还表明您需要 Destroy() 它而不是 Close() 它，这是摆脱对话框的正常方法。在您的异常处理程序中，您将希望停止 ProgressDialog 正在跟踪的任何内容并 Destroy() 它。然后显示您的 MessageBox。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-07T07:39:34.820

我想出了一个解决方法。事实证明，我无法在创建本机 Windows 进度对话框后立即删除它。在我被允许销毁它之前，我必须等待一段时间，可能是让对话框完全初始化。我添加了这段代码：

```
wx.MilliSleep(50) 
```

进入我的进度对话框快捷功能，它会在打开进度对话框后引入不明显的延迟，并允许我随时销毁进度对话框。

完整的快捷功能：

```
def show_loading(parent, title, message=None, maximum=100):
    if not message:
        message = title

    # A class for the return value.
    class LoadingObject(object):
        def __init__(self, dialog):
            self.dialog = dialog
            self.is_done = False

        def done(self):
            if not self.is_done:
                self.dialog.Destroy()
                self.is_done = True

        def pulse(self, message):
            self.dialog.Pulse(message)

        def progress(self, current, message=None):
            # Don't allow the progress to reach 100%, since it will freeze the
            # dialog.
            if current >= maximum:
                current = current - 1

            if message is not None:
                self.dialog.Update(current, message)
            else:
                self.dialog.Update(current)

    # Create the progress dialog.
    dlg_style = wx.PD_APP_MODAL | wx.PD_ELAPSED_TIME | wx.PD_REMAINING_TIME
    dlg = wx.ProgressDialog(
        title, message, parent=parent, style=dlg_style, maximum=maximum
    )
    dlg.Pulse()

    # Wait just a little bit to allow the progress dialog to initialize.
    wx.MilliSleep(50)

    # Return an instance of the LoadingDialog with the progress dialog attached.
    return LoadingObject(dlg) 
```

最终保存功能：

```
def save(self, path=None):
    # Show a loading dialog while the document is staving.
    progress = shared.show_loading(self, 'Saving document')

    try:
        if not path:
            self.document.save()
        else:
            self.document.save_to_file(path)
    except IOError as e:
        message = 'Failed to save file:\n\n{}'.format(e.message)
        wx.MessageBox(message, 'Error', wx.OK | wx.ICON_ERROR)
    finally:
        progress.done() 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-01-29T09:00:44.743

我对这个问题采取了稍微不同的方法。以线性顺序进行了多个函数调用，并希望在函数调用完成时显示整体进度。我只是将进度条包装在一个函数中，获取要调用的函数及其参数。在异常情况下，我会破坏进度条，并引发异常。下面的例子：

```
def _progress_wrap(self, func, *args, **kwargs):
    self.count += 1
    self.progress.Update(self.count)
    res = None
    try:
        res = func(*args, **kwargs)
    except Exception:
        self.progress.Destroy()
        raise
    return(res) 
```

# android - 更改微调器中的大小

> ID：13742713
> 
> 赞同：0
> 
> 时间：2012-12-06T11:31:11.260
> 
> 标签：android

怎么能改变每个项目区域的大小。看看红线就明白我的意思了。我使用类来创建微调器并使用此方法，我认为我可以更改大小以使其更大。但我不知道我应该使用哪个属性

图片： [http ://store3.up-00.com/Nov12/e5Z93428.png](http://store3.up-00.com/Nov12/e5Z93428.png)

```
public View getDropDownView(int position, View convertView,
            ViewGroup parent) {
        TextView label = new TextView(context);
        label.setTextColor(Color.BLACK);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:41:07.287

找到你的 TextView 的布局参数并添加 Up 和 Bottom Padding ！！制作一个新的布局，里面有一个 textview。您可以使此 TextView 符合您所需的设计。假设你给 textview 一个 id 并且 id 是：@+id/tvDesign。然后你可以按照下面的代码。

一个例子是：

```
TextView tv = new TextView(this);
tv.setLayoutParams(((TextView) findViewById(tvDesign)).getLayoutParams()); 
```

# android - 从本机 android 应用程序在 facebook statuc 中设置文本

> ID：13742714
> 
> 赞同：0
> 
> 时间：2012-12-06T11:31:13.453
> 
> 标签：android, post, status

我正在尝试从我的应用程序中设置 facebook 状态中的文本，但它没有复制到 facebook 发布对话框的状态对话框中。对话框为 fb 正确打开，但消息未复制到状态框中。谢谢我的代码是：

```
facebook = new Facebook("my_app_id");
        Bundle parameters = new Bundle();
        parameters.putString("message", "HI there");

        facebook.dialog(this, "feed", parameters,
                new PostDialogListener());

PostDialogListener class
                public  class PostDialogListener implements DialogListener {
        @Override
        public void onFacebookError(FacebookError e) {
            e.printStackTrace();
        }
        @Override
        public void onComplete(Bundle values) {

            final String postId = values.getString("post_id");
            if (postId != null) {

            } else {

            }
        }

        @Override
        public void onError(DialogError e) {

            e.printStackTrace();
        }

        @Override
        public void onCancel() {
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:46:39.047

试试这个代码，看看它是否适合你。对我来说，它完美无缺，因为我想发布自定义消息。

```
new Thread(){
        public void run(){
            Looper.prepare();
            Bundle parameters = new Bundle();

                parameters.putString("message", "your_message_here");

            parameters.putString("caption", "your_caption");
            try {
                mFacebook.request("me");
                String response = mFacebook.request("me/feed", parameters, "POST");
                Log.d("Tests", "got response: " + response);
                if (response == null || response.equals("")
                        || response.equals("false") || response.startsWith("{\"error\"")) {
                    mActivity.runOnUiThread(failRunnable);
                } else {
                    mActivity.runOnUiThread(successRunnable);
                }
            } catch (Exception e) {
                showToast("Failed to post to wall!");
                e.printStackTrace();
            }
        }
    }.start(); 
```

mFacebook 是我的 Facebook 对象。

# oracle - 在 sqlplus 脚本中出现编译错误时停止

> ID：13742715
> 
> 赞同：0
> 
> 时间：2012-12-06T11:31:18.670
> 
> 标签：oracle, sqlplus, oracle-sqldeveloper

我正在使用几个用`@@file`. 如果包出现编译错误，则脚本将继续到最后。

有没有办法停止每个编译错误？

我试过`WHENEVER SQLERROR EXIT SQL.SQLCODE`了，但脚本仍然继续。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:49:52.107

我知道没有本机 sql*plus 方式。只有解决方法。像这样：

```
20:42:50 TEST@oars_sandbox> get scr
  1  whenever sqlerror exit rollback
  2  create or replace procedure my_failed_proc as
  3    i number;
  4  begin
  5    select 1 into i from me_iz_not_exist;
  6  end;
  7  /
  8  @check my_failed_proc
  9  create or replace procedure my_correct_proc as
 10    i number;
 11  begin
 12    select 1 into i from dual;
 13  end;
 14  /
 15* @check my_correct_proc
20:42:57  16  .
20:42:59 TEST@oars_sandbox> get check
  1  declare
  2    l_status varchar2(100);
  3  begin
  4    select status into l_status
  5      from all_objects where object_name = upper('&1');
  6    if l_status = 'INVALID' then
  7      raise_application_error(-20000, 'Object &1 is invalid!');
  8    end if;
  9* end;
20:43:02  10  .
20:43:04 TEST@oars_sandbox> @scr

Warning: Procedure created with compilation errors.

Elapsed: 00:00:00.05
declare
*
ERROR at line 1:
ORA-20000: Object my_failed_proc is invalid!
ORA-06512: at line 8

Disconnected from Oracle Database 11g Express Edition Release 11.2.0.2.0 - Production 
```

# database - 显示oracle数据库的所有视图

> ID：13742717
> 
> 赞同：54
> 
> 时间：2012-12-06T11:31:23.210
> 
> 标签：database, oracle, view, oracle-sqldeveloper

有没有办法通过 sql developer 显示当前在 oracle 数据库上设置的所有视图？

谢谢。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-12-06T11:44:01.050

对于所有视图（您需要此查询的 dba 权限）

```
select view_name from dba_views 
```

对于所有可访问的视图（登录用户可访问）

```
select view_name from all_views 
```

对于登录用户拥有的视图

```
select view_name from user_views 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-06T11:42:40.047

在相关实例上打开一个新工作表`(Alt-F10)`并运行以下查询

```
SELECT view_name, owner
FROM sys.all_views 
ORDER BY owner, view_name 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-01-16T13:06:00.677

```
SELECT * 
FROM DBA_OBJECTS  
WHERE OBJECT_TYPE = 'VIEW' 
```

# android - 用于推送通知的 Android 设备中 iOS 设备令牌的替代方法是什么

> ID：13742720
> 
> 赞同：2
> 
> 时间：2012-12-06T11:31:27.967
> 
> 标签：android, push-notification

iOS 使用唯一的设备令牌，因此用于推送通知。Android中的替代解决方案是什么。谁能帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:42:41.900

对于 android 中的推送通知，我们有 GCM（Google Cloud Messaging）。请点击以下链接了解更多信息

[https://developer.android.com/google/gcm/demo.html](https://developer.android.com/google/gcm/demo.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:38:14.533

如果您要求设备的唯一 ID，请查看此处[如何查找 Android 设备的序列号？](https://stackoverflow.com/questions/2322234/how-to-find-serial-number-of-android-device)

或者，如果您需要类似的东西`push_token`，那么[C2DM](https://developers.google.com/android/c2dm/#handling_reg)和[GCM](http://developer.android.com/google/gcm/gs.html#gcm-service)`registration_id`中都有

# javascript - 动态功能

> ID：13742721
> 
> 赞同：-3
> 
> 时间：2012-12-06T11:31:30.477
> 
> 标签：javascript, function

我在 js 代码中有函数说**func()**

现在我需要以这样的方式传递参数，即当我单击按钮时，单击时应将函数调用为**func(param1)** 在下一个按钮单击时，应将函数调用为**func(param1, param2)**等等

**函数（参数 1，参数 2，参数 3........）**

如何动态增加这个函数的参数？任何基本的java实现逻辑都会有帮助

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:34:08.840

对于 javascript，您可以集成一些使用[`arguments`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments).

如果你想调用那个函数，你可以使用[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)or [`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T10:40:57.673

@jerone 可能会给你你所问问题的答案。但是，我几乎无法想象在任何情况下，您所要求的是问题的最佳解决方案，所以也许如果您告诉我们为什么要增加参数的数量，我们可以提供一种替代的、更标准的方法。

# javascript - 如何使用 dataIndex Extjs 4 查找列索引

> ID：13742723
> 
> 赞同：11
> 
> 时间：2012-12-06T11:31:35.693
> 
> 标签：javascript, extjs, extjs4

那么在 ExtJS 3 中，我使用了以下代码：

`grid.getColumnModel().findColumnIndex("Tasks")`

我尝试在 api 文档上找到它，但没有运气......所以我怎么可能通过列的 dataIndex 或该列的标题名称找到网格的列索引。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-03T02:06:06.907

您可以使用组件查询：

```
var fname = grid.down('[dataIndex=firstname]'); 
```

解决这个问题需要一段时间 - 文档中似乎没有示例。;-)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-06T12:14:54.963

我想您应该通过遍历`grid.columns`数组并比较`dataIndex`每列的属性来找到索引。

例子：

```
var findColumnIndex = function(columns, dataIndex) {
    var index;
    for (index = 0; index < columns.length; ++index) {
        if (columns[index].dataIndex == dataIndex) { break; }
    }​​​​​​​​
    return index == columns.length ? -1 : index;
}

console.log(findColumnIndex(grid.columns, 'Task'));
console.log(findColumnIndex(grid.columns, 'Something')); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-07T17:08:51.207

获取列的最标准方法`dataIndex`是：

```
var column = grid.columnManager.getHeaderByDataIndex('Tasks') 
```

请注意，这确实返回一列（与函数名称相反）。这是因为 ExtJS 中的网格标题实际上既是标题又是列内容。

[Ext.grid.column.Column 文档](http://docs.sencha.com/extjs/6.2.0/modern/Ext.grid.column.Column.html)：

> 此类指定 Ext.grid.Grid 内的列的定义。它包括网格标题配置以及在网格本身内显示数据。

另请参阅：[getHeaderByDataIndex 文档](http://docs.sencha.com/extjs/6.2.0/classic/Ext.grid.ColumnManager.html#method-getHeaderByDataIndex)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-13T09:42:59.323

```
function getColumnIndex(grid, dataIndex) {
    gridDataIndices = Ext.Array.pluck(grid.columns, 'dataIndex');

return Ext.Array.indexOf(gridDataIndices, desireDataIndex);
} 
```

[在煎茶论坛中回答](https://www.sencha.com/forum/showthread.php?146862-How-to-find-a-grid-column-based-on-dataIndex)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T13:04:25.303

```
 var gridColumns = grid.headerCt.getGridColumns();
 for (var i = 0; i < gridColumns.length; i++) {
   if (gridColumns[i].dataIndex == 'yourdataIndex') {
    alert(i);
   }  
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-31T19:54:36.100

组件查询可能会有点慢，并且不能保证只有一个结果。仅遍历属于网格的列数组会更快一些。

这是一个简单的静态 util 函数，它使用 ext 框架来解决问题。

```
 findColumnDataIndex: function(columns, dataIndex) {
   var column = null;
   Ext.Array.each(columns, function(c) {
     if (c.dataIndex === dataIndex) {
       column = c;
       return false;
     }
   }, this);
   return column;
 }
```

使用此代码从您的网格面板实例中获取列

```
var columns = grid.headerCt.items.items,
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-05T14:29:59.253

```
var RowEditor = new Ext.grid.plugin.RowEditing({...});
    RowEditor.editor.form.findField('Task'); 
```

# c++ - BerkeleyDB：整个数据库的独占锁

> ID：13742727
> 
> 赞同：2
> 
> 时间：2012-12-06T11:32:09.583
> 
> 标签：c++, database, locking, berkeley-db

有什么方法可以为整个 Berkeley DB 数据库获取独占写入锁，而不必关闭它并使用[Db::set_lk_exclusive()](http://docs.oracle.com/cd/E17076_02/html/api_reference/CXX/dbset_lk_exclusive.html)重新打开它？

也许使用[DbEnv::lock_get()](http://docs.oracle.com/cd/E17076_02/html/api_reference/CXX/lockget.html)？但是在这种情况下，应该怎么称呼呢？我还没有找到任何关于它的例子。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:11:38.167

我[在Oracle论坛上发布了同样的问题](https://forums.oracle.com/forums/thread.jspa?messageID=10736705#10736705)并得到了回复：

> 如果您已经打开 BDB 数据库以使用页级锁定，则无法在 BDB 数据库上获得独占写入锁定。DbEnv::lock_get() 和锁接口的其余部分，只有在您计划管理在环境中获得的所有锁时才真正应该使用。

# servlets - 确定 httpServeltRequest 是来自移动设备还是网络

> ID：13742728
> 
> 赞同：2
> 
> 时间：2012-12-06T11:32:14.960
> 
> 标签：servlets, mobile

我想确定 http 请求是否来自移动应用程序。

我的方法是检查引用者，因为移动应用程序通常不会在请求中发送引用者。但是有一些智能手机的操作系统会在引用中发送永久值，所以我可以识别吗？

我附上了一个关于 windows 7 和 windows 8 手机的链接，他们发送推荐人。 [http://atomaras.wordpress.com/2012/11/18/wp7-app-on-wp8-break-changes-part-1-webrequests-referer-changes/](http://atomaras.wordpress.com/2012/11/18/wp7-app-on-wp8-breaking-changes-part-1-webrequests-referer-changes/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:36:00.813

您应该依赖[`User-Agent`](http://en.wikipedia.org/wiki/User_agent#Format)包含浏览器信息的 HTTP 请求标头。[这里](http://www.zytrax.com/tech/web/mobile_ids.html)的这个链接似乎有一个可以来自不同移动浏览器的 User-Agent 标头列表。

# tinymce - TinyMCE 只读体

> ID：13742734
> 
> 赞同：3
> 
> 时间：2012-12-06T11:32:31.787
> 
> 标签：tinymce, contenteditable, readonly

我正在为我的应用程序使用 TinyMCE 编辑器。

我想让我的身体和演示工具栏在屏幕上显示为“只读”。

```
readonly:true 
```

使客户端无法接受的演示栏禁用（需要内容区域和工具栏）。

我成功地做了：

```
body.contentEditable = false; 
```

效果很好，但是当我单击任何演示文稿图标或按钮时，它会产生类似于单击粗体时的效果，它会使文档文本变为粗体，而这是不应该的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T05:18:48.320

您可以添加以下内容以撤消编辑器中的更改并在 onchange_callback 上执行它。

```
//undo all the changes in the editor    
tinyMCE.activeEditor.undoManager.undo();

//remove all undo levels so there will no possibility of redoing last action
tinyMCE.activeEditor.undoManager.clear(); 
```

这是一个[演示](http://fiddle.tinymce.com/40caab/2)

希望能帮助到你！！

# iphone - 如何捕获同时包含 cocs2d 和 UIKit 的视图的屏幕截图

> ID：13742745
> 
> 赞同：2
> 
> 时间：2012-12-06T11:33:18.383
> 
> 标签：iphone, ios, ipad, cocos2d-iphone, ios6

我正在 iOS6 中开发一个 iPad 应用程序，显示不同颜色和纹理的房屋设计。为此，我正在使用 cocos2d。为了在家里显示使用过的纹理和颜色，我正在使用 UIKit 视图。现在我要截取这个视图的截图，其中包含 cocos2d 层和 UIKit 视图。如果我使用 cocos2d 进行屏幕截图，例如：

```
UIImage *screenshot = [AppDelegate screenshotWithStartNode:n]; 
```

那么它只是拍摄 cocos2d 层的快照。

否则，如果我使用 UIkit 进行屏幕截图，例如：

```
UIImage *screenshot = UIGraphicsGetImageFromCurrentImageContext(); 
```

那么它只捕获 UIKit 组件并关闭 cocos2d 部分。

我希望他们两个在同一个屏幕截图中......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:44:54.417

尝试这种方法，只需根据您的要求更改一些代码..

```
-(UIImage*) screenshotUIImage
{
    CGSize displaySize  = [self displaySize];
    CGSize winSize      = [self winSize];

    //Create buffer for pixels
    GLuint bufferLength = displaySize.width * displaySize.height * 4;
    GLubyte* buffer = (GLubyte*)malloc(bufferLength);

    //Read Pixels from OpenGL
    glReadPixels(0, 0, displaySize.width, displaySize.height, GL_RGBA, GL_UNSIGNED_BYTE, buffer);
    //Make data provider with data.
    CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, buffer, bufferLength, NULL);

    //Configure image
    int bitsPerComponent = 8;
    int bitsPerPixel = 32;
    int bytesPerRow = 4 * displaySize.width;
    CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
    CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;
    CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;
    CGImageRef iref = CGImageCreate(displaySize.width, displaySize.height, bitsPerComponent, bitsPerPixel, bytesPerRow, colorSpaceRef, bitmapInfo, provider, NULL, NO, renderingIntent);

    uint32_t* pixels = (uint32_t*)malloc(bufferLength);
    CGContextRef context = CGBitmapContextCreate(pixels, winSize.width, winSize.height, 8, winSize.width * 4, CGImageGetColorSpace(iref), kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);

    CGContextTranslateCTM(context, 0, displaySize.height);
    CGContextScaleCTM(context, 1.0f, -1.0f);

    switch (deviceOrientation_)
    {
        case CCDeviceOrientationPortrait: break;
        case CCDeviceOrientationPortraitUpsideDown:
            CGContextRotateCTM(context, CC_DEGREES_TO_RADIANS(180));
            CGContextTranslateCTM(context, -displaySize.width, -displaySize.height);
            break;
        case CCDeviceOrientationLandscapeLeft:
            CGContextRotateCTM(context, CC_DEGREES_TO_RADIANS(-90));
            CGContextTranslateCTM(context, -displaySize.height, 0);
            break;
        case CCDeviceOrientationLandscapeRight:
            CGContextRotateCTM(context, CC_DEGREES_TO_RADIANS(90));
            CGContextTranslateCTM(context, displaySize.width * 0.5f, -displaySize.height);
            break;
    }

    CGContextDrawImage(context, CGRectMake(0.0f, 0.0f, displaySize.width, displaySize.height), iref);
    CGImageRef imageRef = CGBitmapContextCreateImage(context);
    UIImage *outputImage = [UIImage imageWithCGImage:imageRef];

    //Dealloc
    CGImageRelease(imageRef);
    CGDataProviderRelease(provider);
    CGImageRelease(iref);
    CGColorSpaceRelease(colorSpaceRef);
    CGContextRelease(context);
    free(buffer);
    free(pixels);

    return outputImage;
}

- (Texture2D*) screenshotTexture {
    return [[Texture2D alloc] initWithImage:[self screenshotUIImage]];
} 
```

有关更多信息，请参阅[此链接](http://www.cocos2d-iphone.org/forum/topic/1722)

参考所有答案和评论非常有趣

我希望这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:05:43.550

我对此进行了很多研究......目前我找不到任何可以截取包含 cocos2d 和`UIKit`两者的屏幕截图的代码。即使有一些代码可用，但在 AppStore 上是不可接受的。因此，如果您使用该代码，您的应用程序将被 AppStore 拒绝。

所以现在，我找到了一个临时解决方案来实现这一点：

首先，我截取了 cocos2d 图层的屏幕截图，然后将该屏幕截图放入 a 中`UIImageView`，并将其添加到`UIImageView`我的屏幕上，`UIViews`就像这样，这样用户就无法看到此事件：

```
[self.view insertSubview:imgView atIndex:1]; 
```

在索引 1，因为我的 cocos2d 层在索引 0。所以在那个之上......

现在，cocos2d 图片是我视图的一部分，我以正常方式`UIKit`截取了当前屏幕的屏幕截图。`UIKit`我们就在那里。我现在有包含两个视图的屏幕截图。

这对我有用。如果有人为此找到有效的解决方案，那么非常欢迎！！！我将为此等待任何可行的解决方案。谢谢大家的帮助！！！

# visual-c++ - 如何在文本服务框架 windows8 应用程序中使用 GetSelection 获取光标位置？

> ID：13742746
> 
> 赞同：2
> 
> 时间：2012-12-06T11:33:19.457
> 
> 标签：visual-c++, windows-8, text-services-framework

```
HRESULT         hr;
TF_SELECTION    tfSelection;
ULONG           uFetched;
//Obtain the default selection. 
hr = _pContext->GetSelection(ec, TF_DEFAULT_SELECTION, 1, &tfSelection, &uFetched);
UINT ar=(UINT)uFetched;
if(SUCCEEDED(hr) && (uFetched > 0))
{
    UINT ar=(UINT)uFetched;
    //Work with the selection. 
    //Release the selection range object. 
    tfSelection.range->Release();
} 
```

大家好。我正在 DoEditSession 方法中实现此代码。当我尝试获得选择时，我总是得到 1 的值`uFetched`。但是光标位置不来了？

我正在使用 Tsf 接口为 Windows RT 开发文本服务。我已经集成了库，这些库根据我们在候选窗口中输入的字母来建议单词。现在我需要获取文档中光标位置之前和之后的字母。所以在这里我使用了 GetSelection 来检索选定的文本。问题是我无法检索文档（记事本）中的插入符号位置。有什么特定的方法可以让我在插入符号/光标位置周围获取字母/文本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T21:47:38.297

您可以在不实际修改选择的情况下移动选择范围的开始/结束。

# java - Notification not working with Android 4.0

> ID：13742749
> 
> 赞同：1
> 
> 时间：2012-12-06T11:33:51.540
> 
> 标签：java, android, android-notifications

> **Possible Duplicate:**
> [OnMessage i want to open Google Play android](https://stackoverflow.com/questions/13738750/onmessage-i-want-to-open-google-play-android)

When I use the below code in Android 4.0 (ICS) it doesn't work:

```
 NotificationManager notificationManager = (NotificationManager) getApplicationContext().getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(R.drawable.ic_launcher, "Testomg", System.currentTimeMillis() + 5000);

    Intent notificationIntent = new Intent(Intent.ACTION_VIEW);
    notificationIntent.setData(Uri.parse("market://details?id=com.karya.kot"));
    notificationIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    PendingIntent intent = PendingIntent.getActivity(getApplicationContext(), 0, notificationIntent, 0);
    notification.setLatestEventInfo(getApplicationContext(), "Google Play", "Download app", intent);

    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notificationManager.notify(0, notification); 
```

But it's works for lower versions of Android.

For Android ICS, I want to use Notification.Builder, but then what should I use for lower versions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:39:28.870

Below is full working code for me on any version of the android 2.2 and above

```
private static void generateNotification(Context context, String message) {
        int icon = R.drawable.ic_launcher;
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager)
                context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, message, when);

        String title = context.getString(R.string.app_name);

        Intent notificationIntent = new Intent(context, <nameofactivity>.class);
        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
                Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent =
                PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;

        // Play default notification sound
        notification.defaults |= Notification.DEFAULT_SOUND;

        // Vibrate if vibrate is enabled
        notification.defaults |= Notification.DEFAULT_VIBRATE;
        notificationManager.notify(0, notification);      

    } 
```

# java - 在 Java 中使用 Groovy PowerAssert

> ID：13742752
> 
> 赞同：0
> 
> 时间：2012-12-06T11:33:55.300
> 
> 标签：java, maven, groovy, assert

我正在将 Java EE 与 Maven 一起使用。为了便于阅读和检查，我想在生产代码中使用[Groovy 的 PowerAssert 。](http://dontmindthelanguage.wordpress.com/2009/12/11/groovy-1-7-power-assert/)

有没有办法在标准 Java 类中做到这一点？

我尝试将“groovy-all”包添加为 Maven 依赖项，但以下代码失败。我应该导入什么？

```
public static void main(String[] args) {
  assert (2 + 2 == 5, "Surprise: this assertion failed!");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:21:02.867

我假设您的意思是代码无法编译，但如果我错了，请纠正我。恐怕你不能在你的 Java 类中使用 Groovy-only 语法。这个功能的 groovy 的胆量似乎与 Groovy 编译交织在一起，如果快速查看是正确的，那么我认为它对于您的 java 代码来说并不是真正可破解的。对于需要 groovy 功能​​的代码区域，也许您可​​以嵌入脚本。

# jquery - addClass 不能正常工作

> ID：13742756
> 
> 赞同：0
> 
> 时间：2012-12-06T11:34:10.597
> 
> 标签：jquery, callback

我有一个小但烦人且奇怪的问题。我有 2 个向 ap 元素添加类的按钮。当用户单击按钮时，它会将类“groen”或“rood”（取决于按钮）添加到 p 元素。然后，用户可以单击具有“groen”或“rood”类的 p 元素，然后它应该做一些事情，但它什么也不做。但是，如果我在 HTML 中为 p 元素提供类“groen”或“rood”，它确实会执行 jQuery 操作。

我在这里有我的项目的 jsFiddle：http: [//jsfiddle.net/c3dfj/](http://jsfiddle.net/c3dfj/)

如果您想查看问题，请单击“ja”或“nee”复选框并检查其中包含“akkoord”文本的 p 元素。它向您显示“akkoord groen”或“akkoord rood”。（取决于您单击的按钮）。但是，如果您单击“akoord”，它不会执行任何操作。我将类 rood/groen 添加到它确实有效的 HTML 中：/

```
<p class="akkoord"><br/>Akkoord</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:39:54.353

当您绑定点击处理程序时，没有`p`使用“.rood”或“.groen”的`on`元素

```
 $('body').on('click','.rood',function() {
        var container = $(this).parents('.container_vragen').find('.container2');
            container.fadeOut(400, function() {
               container
                   .css('overflow', 'hidden')
                   .appendTo("#niet_geregeld");
               $(this).parents('#niet_geregeld')
                   .find('.container2')
                   .css('padding-left', '30px')
                   .fadeIn(400);
            });
    });

    $('body').on('click','.groen',function() {
        var container = $(this).parents('.container_vragen').find('.container2');
            container.fadeOut(400, function() {
               container.css('overflow', 'hidden')
                        .appendTo("#geregeld");
               $(this).parents('#geregeld')
                      .find('.container2') 
                      .css('padding-left', '30px')
                      .fadeIn(400);
            });
    }); 
```

这样，在按下按钮时分别具有“.rood”或“.groen”类的任何元素都会对点击做出反应。您当然可以将“body”选择器细化为封闭的 div 或类似的，如果可能的话，建议您这样做，但在您的代码中，您选择所有 '.rood' 和所有 '.groon' 元素，以便与我保持兼容我用过“身体”。我还冒昧地简化了代码以消除不必要的选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:37:07.050

尝试使用 jQuery .hasClass()，如果它确实有类而不是重定向到您的方法或调用该函数。否则应用函数 addClass()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:42:51.030

HTML：

```
<div class="parent">
  <button class="addgroen">addgroen</button>
  <button class="addrood">addrood</button>
  <p>
  </p>
</div> 
```

jQuery :

```
$('.addgroen').click(function(){
   $('p').removeClass('rood').addClass('groen');
})
$('.addrood').click(function(){
   $('p').removeClass('groen').addClass('rood');
}) 
```

在 jQuery < 1.7 你应该使用：

```
$('.groen').live('click',function(){
   alert('p element with groen class clicked');
});
$('.rood').live('click',function(){
   alert('p element with rood class clicked');
}); 
```

在 jquery >1.6 上你应该使用：

```
$('.parent').on('click','.groen',function(){
   alert('p element with groen class clicked');
});
$('.parent').on('click','.rood',function(){
   alert('p element with rood class clicked');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T11:47:55.613

如果您要动态添加一些东西，您应该选择 jQuery ON 和 OFF

[jQuery 开启](http://api.jquery.com/on/)

[jQuery 关闭](http://api.jquery.com/off/)

```
$(document).on('click','.rood',function() {
//YOUR CODE
}); 
```

# c++ - 检查字符串是否为数字的最快方法是什么？

> ID：13742761
> 
> 赞同：2
> 
> 时间：2012-12-06T11:34:27.663
> 
> 标签：c++

检查像“2.4393”或“2”这样的字符串是否有效的最快方法是什么——它们都可以用双精度表示——而字符串“2.343”。还是“ab.34”不是？特别是，我希望能够读取任何字符串，如果它*可以*是双精度，则为其分配一个双精度变量，如果它不能是双精度（如果它是一个单词或只是无效输入） ，将显示一条错误消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T11:46:23.990

使用[`std::istringstream`](http://en.cppreference.com/w/cpp/io/basic_istringstream)并确认使用所有数据[`eof()`](http://en.cppreference.com/w/cpp/io/basic_ios/eof)：

```
std::istringstream in("123.34ab");
double val;
if (in >> val && in.eof())
{
    // Valid, with no trailing data.
}
else
{
    // Invalid.
} 
```

[请参阅http://ideone.com/gpPvu8](http://ideone.com/gpPvu8)上的演示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T11:55:04.353

您可以使用[std::stod()](http://en.cppreference.com/w/cpp/string/basic_string/stof)。如果字符串无法转换，则抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:43:48.890

正如 stefan 所提到的，你可以使用`std::istringstream`

```
coords          getWinSize(const std::string& s1, const std::string& s2)
{
  coords winSize;
  std::istringstream iss1(s1);
  std::istringstream iss2(s2);

  if ((iss1 >> winSize.x).fail())
    throw blabla_exception(__FUNCTION__, __LINE__, "Invalid width value");
  /*
   .....
  */
} 
```

在我的代码中，坐标是：

```
typedef struct coords {
    int     x;
    int     y;
} coords; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T11:48:27.140

使用[`boost::lexical_cast`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_lexical_cast.html)，如果转换失败则抛出异常。

# c# - 在运行时创建 WCF 服务时出现 ActionNotSupported 错误

> ID：13742765
> 
> 赞同：8
> 
> 时间：2012-12-06T11:34:46.470
> 
> 标签：c#, wcf, wcf-binding

我正在尝试`WCF`在运行时创建服务。我的服务接口是：

```
[ServiceContract]
public interface IInformationService : IService
{
    [OperationContract]
    [WebInvoke(Method = "Get", ResponseFormat = WebMessageFormat.Json, 
     UriTemplate = "Test",     RequestFormat  = WebMessageFormat.Json)]
    string Test();
} 
```

我的服务如下：

```
var httpEnumerator = ImplementedContracts.Values.GetEnumerator();
httpEnumerator.MoveNext();

var httpContractType = httpEnumerator.Current.ContractType;
var webBinding = new WebHttpBinding()
                 {
                   Security =
                   {
                     Mode = WebHttpSecurityMode.None
                   }
                 };

var httpEndpoint = AddServiceEndpoint(
  httpContractType, 
  webBinding, baseAddress+/Get"
);

httpEndpoint.Behaviors.Add(new CustomEndpointBehavior()); 
```

ServiceHost 是通过这种方法创建的：

```
protected override ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)
{
  var host = new WcfServiceHost(serviceType, baseAddresses);

  if (host.Description.Behaviors.Contains(typeof(ServiceDebugBehavior)))
  {
    (host.Description.Behaviors[typeof(ServiceDebugBehavior)] as 
    ServiceDebugBehavior).IncludeExceptionDetailInFaults = true;
  }
  else
  {
    var debug = new ServiceDebugBehavior
                {
                  IncludeExceptionDetailInFaults = true
                };

    host.Description.Behaviors.Add(debug);
  }

  if (host.Description.Behaviors.Contains(typeof(ServiceMetadataBehavior)))
  {
    (host.Description.Behaviors[typeof(ServiceMetadataBehavior)] as ServiceMetadataBehavior).HttpGetEnabled = true;
    (host.Description.Behaviors[typeof(ServiceMetadataBehavior)] as ServiceMetadataBehavior).HttpsGetEnabled = true;
  }
  else
  {
    var smb = new ServiceMetadataBehavior
              {
                HttpGetEnabled = true,
                HttpsGetEnabled = true
              };

    host.Description.Behaviors.Add(smb);
  }

  host.AddServiceEndpoint(
    ServiceMetadataBehavior.MexContractName,
    MetadataExchangeBindings.CreateMexHttpsBinding(),
    "mex"
  );

  host.AddServiceEndpoint(
    ServiceMetadataBehavior.MexContractName,
    MetadataExchangeBindings.CreateMexHttpBinding(),
    "mex"
  );

  return host;
} 
```

服务路由创建：

```
var serviceRoute = new ServiceRoute(
  "wcf.service/" + service.Value.Name, 
  new WcfServiceHostFactory(), 
  service.Value
);

if (!RouteTable.Routes.Contains(serviceRoute))
{
    RouteTable.Routes.Add(serviceRoute);
} 
```

当我尝试使用该地址从网络浏览器访问我的服务时

`http://localhost/Werp.View/wcf.service/InformationService/Get/Test`

我收到以下错误：

```
<Fault xmlns="http://schemas.microsoft.com/ws/2005/05/envelope/none">
  <Code>
    <Value>Sender</Value>
    <Subcode>
      <Value xmlns:a="http://schemas.microsoft.com/ws/2005/05/addressing/none">
         a:ActionNotSupported
      </Value>
    </Subcode>
  </Code>

<Reason>
  <Text xml:lang="en-US">
    The message with Action '' cannot be processed at the receiver, due to a 
    ContractFilter mismatch at the EndpointDispatcher. This may be because of 
    either a contract mismatch (mismatched Actions between sender and receiver) 
    or a binding/security mismatch between the  sender and the receiver. Check 
    that sender and receiver have the same contract and the same  binding 
    (including security requirements, e.g. Message, Transport, None).
  </Text>
</Reason> 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T19:47:32.907

如果您不需要特定的 WCF 功能或者您有使用 WCF 的授权，您应该考虑为基于 REST 的服务使用不同的堆栈。例如[ASP.NET Web API](http://www.asp.net/web-api)或[ServiceStack](http://www.servicestack.net/)。做一个简单的 REST 调用看起来需要做很多工作。

如果您打开服务诊断，这可能有助于诊断问题。您可以查看此[SO 以获取详细说明](https://stackoverflow.com/questions/10925697/debug-ef4-savechanges-in-wcf-service-hosted-by-iis/10926587#10926587)

您也可以参考这个[SO：WCF - ContractFilter mismatch at EndpointDispatcher exception](https://stackoverflow.com/questions/5487791/wcf-contractfilter-mismatch-at-the-endpointdispatcher-exception)了解一些想法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T09:04:30.487

当我将 WebHttpBehavior 添加到端点时，我的问题已经解决

```
httpEndpoint.Behaviors.Add(new WebHttpBehavior()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-19T11:00:11.317

在我的例子中，我需要向名为 的请求添加一个 HTTP 标头`SOAPAction`，其中的值设置为我请求的服务的 xmlns 路径。

# javascript - 如何在 Safari 中覆盖 ctrl-f

> ID：13742766
> 
> 赞同：5
> 
> 时间：2012-12-06T11:34:48.833
> 
> 标签：javascript, gwt, safari

有没有办法通过将浏览器查找器上的焦点更改为专注于我自己的文本框来覆盖 Safari 浏览器中 CTRL+F 的行为？以下 GWT 片段代码：

```
Event.addNativePreviewHandler(new NativePreviewHandler() {

    public void onPreviewNativeEvent(NativePreviewEvent event) {
        switch (event.getTypeInt()) {
            case Event.ONKEYDOWN:
                NativeEvent nEvent = event.getNativeEvent();
                if (nEvent.getCtrlKey() && nEvent.getKeyCode() == 'F') {
             focusOnMyTextBox();    
                     nEvent.preventDefault();
                }
                break;
        }
    }
} 
```

允许我在 Firefox 和 Chrome 浏览器中进行重定向。但是，在 Safari 中，浏览器查找器获得焦点。任何关于此的 GWT 或 Javascript 提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:47:48.250

我认为这篇[博](http://arstechnica.com/security/2012/12/how-script-kiddies-can-hijack-your-browser-to-steal-your-password/)文非常相关：[脚本小子如何劫持您的浏览器以窃取您的密码](http://arstechnica.com/security/2012/12/how-script-kiddies-can-hijack-your-browser-to-steal-your-password/)。相关代码部分：

```
 $(window).keydown(function(evt){  
       if((evt.which == "70" && ( evt.metaKey || evt.ctrlKey ))){  
            evt.preventDefault(); 
            /* display fake search */
       }  
  }); 
```

更多资源：[http](http://h43z.blogspot.de/2012/11/whats-real-and-whats-not.html) ://h43z.blogspot.de/2012/11/whats-real-and-whats-not.html，http : [//labs.neohapsis.com/2012/11/14/browser-event-hijacking /](http://labs.neohapsis.com/2012/11/14/browser-event-hijacking/)

可以在[这里](http://h43z.koding.com/blog/leaked.html)和[那里](http://boomer.neohapsis.com/searchbox/index.html)找到演示。在 Safari 中对它们进行了测试，它们确实有效。

由于我对 GWT 不太了解，我不确定这是否正确，但这是我的 GWT 尝试

```
Event.addNativePreviewHandler(new NativePreviewHandler() {

    public void onPreviewNativeEvent(NativePreviewEvent event) {
        switch (event.getTypeInt()) {
            case Event.ONKEYDOWN:
                NativeEvent nEvent = event.getNativeEvent();
                if((nEvent.which == "70" && ( nEvent.metaKey || nEvent.ctrlKey ))){  
                    nEvent.preventDefault(); 
                    focusOnMyTextBox();   
                }  
                break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:32:47.710

如果你想用 javascript 解决它：

添加事件监听器

```
document.addEventListener( 'keydown', onDocumentKeyDown, false ); 
```

如果您想稍后删除它：

```
document.removeEventListener( 'keydown', onDocumentKeyDown, false ); 
```

事件函数：

```
function onDocumentKeyDown( evt ) {

    if(evt.keyCode == "70" &&  evt.ctrlKey ) {
                ...
    }

} 
```

# sql - 基于 FROM 子句更新表，如何使用 WHERE 进行限制？

> ID：13742767
> 
> 赞同：3
> 
> 时间：2012-12-06T11:34:51.627
> 
> 标签：sql, sql-server, sql-server-2008

我有一个 SQL UPDATE 子句，如下所示：

```
UPDATE table 
SET column =value
FROM
(SELECT bla bla FROM bla bla WHERE col = val)
JOIN
(SELECT bla bla FROM bla bla WHERE col = val) 
```

我想将 UPDATE 限制为 WHERE 特定列等于特定值。

在 JOIN 之后或 SET 之后插入 WHERE 似乎不合法？我以为我已经使用 JOIN 限制了更新，但事实并非如此。

我可以在哪里插入我的 WHERE 子句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:42:31.637

到目前为止，您的示例已被剥离，很难准确地说出您在追求什么。

这可能只是给嵌套选择别名的问题，如下所示：

```
Update table 
  Set column =value
From
  (Select bla bla From bla bla Where col = val) a
    Join
  (Select bla bla From bla bla Where col = val) b
    On a.blah = b.blah -- did this go missing from the example?
Where
  ... 
```

SQL Server 有一个更新表单可能会有所帮助：

```
Update
  t1
Set
  blah
From
  table1 t1 -- note same as updated table
    inner join
  (select...) a
    On t1.blah = a.blah
Where
  t1.Col = value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:38:46.757

如果这`vlaue`是一个文字值，而不是来自这些连接表中的任何一个的值，那么您可以这样做：

```
UPDATE table t1
SET t1.column = value -- literalvalue
FROM
(
   SELECT bla bla FROM bla bla)
   JOIN
   (
      SELECT bla bla FROM bla bla
   ) on thefirstblah = somethingfromthesecondblah
) t1 
```

**或者：**

```
UPDATE table t1
SET t1.column = value -- literalvalue
FROM
(
   SELECT bla bla FROM bla bla
   JOIN anotherbla ON ----
) t1; 
```

但是，如果这`value`是来自连接表之一：

```
UPDATE table t1
SET t1.column = t2.value 
FROM table t1
JOIN table2 t2 ON --- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-07T09:11:07.513

使用类似这样的查询：

对我有用的重要事情是在更新之前加入。

```
update table1 t1 join table2 t2 on t1.id1 = t2.id2 set t1.value = t2.otherValue; 
```

# windows-phone-7 - 后台代理进程在 Windows Phone 7 中进入空闲状态

> ID：13742770
> 
> 赞同：1
> 
> 时间：2012-12-06T11:34:57.530
> 
> 标签：windows-phone-7

我正在开发基于 GPS 的 Windows Phone 7 应用程序。其中我使用后台代理（定期任务）在后台进程中定期执行某些任务。

我在这里面临一个问题，我们的应用程序后台代理在 30 分钟后进入空闲模式并且不执行任何任务。我的应用程序要求后台代理应该连续运行。在这里我不能使用资源密集型任务，因为我的应用程序要求不符合资源密集型任务标准。

如何禁用省电模式？这样它就可以连续运行。

请在这里给我一些指导。

我正在等待有价值的反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:59:27.683

每个后台任务仅在 cca 30 分钟内运行一次。Windows Phone 7 无法在后台连续运行代码

# javascript - 从网页保存和加载元素

> ID：13742775
> 
> 赞同：1
> 
> 时间：2012-12-06T11:35:12.717
> 
> 标签：javascript, html, load, save, popcornjs

我的网页中有一系列元素，例如视频或其他媒体：

```
<div id = "text">
</div>
<video height="240" width="412" id="video" controls="controls"> </video> 
```

我使用 JavaScript 更改这些元素的原始状态，并使用 Popcorn.js 创建同步事件，例如：

```
var video = document.getElementById('video');
video.src = $("#url").val(); //Change src value
var popcorn = Popcorn( "#video" ); 
popcorn.footnote({ //Create a synchronization event; I add a footnote
start: 2,
stop: 5,
text: 'Hello World!!!',
target: 'text',
}); 
```

所以现在，我的问题是我想将这些元素与它们的事件一起保存。在我希望有可能加载（在我的网页中）这些元素之后，继续再次更改它们。在这种情况下如何保存/加载？

# installation - 我想要我的开发环境：在我的 Mac 上安装 MD 2.8.8.4 的要求

> ID：13742778
> 
> 赞同：1
> 
> 时间：2012-12-06T11:35:21.523
> 
> 标签：installation, monodevelop, osx-leopard

在尝试[像这样 ==>](https://stackoverflow.com/questions/13704283/is-it-possible-to-build-monodevelop-3-on-mac-osx-10-5-8-leopard)构建最新的 MonoDevelop (MD) 3 之后，我遇到了一些我不会在这篇文章中讨论的问题，因为现在我只想恢复我原来的开发环境，即 MD 2.8 .8.4.

在尝试进行构建时，我得到的印象（可能是在互联网上查找了一些东西之后）我需要更新版本的 MDK，所以我下载并安装了 MDK 2.10.10。经过一番挣扎，我决定放弃（深夜）并卸载了我原来的 MD 2.8.8.4，并清理了垃圾，当然我不会在我的 Mac 上保留很长时间的安装程序文件，因为我没有没有太多额外的空间。

好的，抱歉绕道而行！当我尝试重新安装 MD 2.8.8.4 时，应用程序没有启动，我不知道为什么。我认为它与它找不到的库有关。我试着运行我的一些单声道程序，在我开始胡闹之前，他们找不到我认为是“glibsharpglue”，所以我做了一些搜索，发现[了这个](http://www.mono-project.com/DllNotFoundException)，这与我的发现一致，但我不知道该怎么做。我还在互联网上发现了一些东西，表明我的 MRE 安装可能已孵化。这与我第一次安装 MD 和依赖项没有太多麻烦的回忆一致。我不记得必须做任何配置库的位置才能运行的工作。唔。无论如何，我想我会退后并尝试更早的下载（**文档仍然非常稀疏 - 或者我似乎无论如何都找不到它 - 关于系统方面的依赖项/版本，甚至是工具包方面的（MRE，或MDK）是运行给定版本的 MD 所必需的。**）。

所以，长话短说，我下载了我[在档案中找到的 MRE 2.10_5](http://download.mono-project.com/archive/). 卸载 2.10.10 后，我安装了 2.10_5，你瞧，我以前制作的单声道应用程序运行良好！于是我想，“太好了，现在我可以让我的 MD 环境正常工作了”。哈！当我安装 MD 2.8.8.4 时，当然，在安装 MDK (2.10_5) 之后，弹出一个通知很好地告诉我我需要至少 2.10.4 的 MRE。好的，所以回到卸载，下载，重新安装过程才发现MRE似乎不知道库在哪里，而且我的程序没有运行，所以我什至没有尝试安装任何进一步。然后，我有一个绝妙的主意来安装 MRE / MDK 3.0.2（最新版本）......认为这应该很好地安装并且“你会认为它可能知道库在哪里”。啊，但我错了。在我安装此版本并尝试运行我的程序后，它给出了一个错误，如“dyld：未知所需的加载命令 0x80000022 Trace/BPT 陷阱”。查了一下这个，我发现我需要雪豹或>，（10.6 +）。

**现在我的问题是，我可以在我的系统上使用什么版本的 MRE 和 MDK 来正确设置库引用并在 Mac (OSX 10.5.8) 上运行，这样我就可以取回我原来的开发系统 MonoDevelop 2.8.8.4 ? 或者，如果没有人知道，我需要什么让 MRE/MDK 知道图书馆在哪里？**

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:07:10.027

好的，这就是让我回来的方法。我决定我什至会降级我的 MD，这样我才能得到一些工作。好吧，2.8.6.5 和 MD 2.8.4.2 都不能与 MRE 2.10_5 一起使用，所以我又回到了旧版本的 MRE/MDK。我发现 MRE 2.10.6_1 允许我的单声道程序运行（它知道在哪里查找库），然后我下载并安装了 MDK 2.10.6_1 并尝试运行我的单声道程序……啊找不到库。所以我想也许我会继续安装 MRE。我的程序奏效了。然后我安装并运行了 MD 2.8.8.4，**它成功了！**所以这似乎是让 MD 2.8.8.4 在 Mac OSX 10.5.8 上工作所需要的：步骤 1）安装 MDK 2.10.6_1 2）安装 MRE 2.10.6_1 3）安装 MD 2.8.8.4

有必要这么复杂吗？是否有其他解决方案（可能，但我现在有我需要的东西）。干杯！

* * *

我想我是一个惩罚的傻瓜。一切正常后，我想，“现在让我们再次尝试 MRE 2.10.10 ......安装它之后，我的单声道程序再次不起作用。所以，我卸载了它，然后回到上面，所以我可以在 MD 2.8.8.4 中完成我的工作，这似乎是我可以运行的最新版本，而无需逐步解决构建自己的“依赖项或库”问题。（这让我想起了构建 X10 时的依赖“乐趣” （或者是 X11？）和 Gnome 在 2000 年左右用我的 slackware 盒子。）

# batch-file - 使用 > （运算符）将内容定向到测试文件的属性或限制是什么

> ID：13742779
> 
> 赞同：1
> 
> 时间：2012-12-06T11:35:25.917
> 
> 标签：batch-file

当我使用 > 将路径复制（或定向）到测试文件中时。

例如：c:>any_path > abc.txt

但是当路径大小超过 73 或 76 个字符时，将另一行拆分为文件。但是我们需要单行的整个路径。>（重定向运算符）是否在 cmd 中受到限制。我用的是windows7和XP，都有同样的问题。

我已经用另一种方式解决了这个问题。但是我想知道为什么在将内容重定向到测试文件时，为什么要在 73 或 76 个字符之后分割路径？

先谢谢了，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:21:51.353

不，我认为您在这里感到困惑。

首先，这个命令：

```
any_path > abc.txt 
```

无效（这里的*命令*是什么？）。您可以通过 PATH 或 ECHO 命令以这种方式显示路径：

```
PATH > abc.txt
ECHO %PATH%> abc.txt 
```

或以这种方式插入任何路径：

```
ECHO any_path> abc.txt 
```

这些命令（在这种情况下也不是任何其他命令）在任何字符处分割行。您可以使用记事本编辑器关闭 Format-> WordWrap 选项来检查...

# android - 图片资源的android内存桶大小

> ID：13742783
> 
> 赞同：0
> 
> 时间：2012-12-06T11:35:37.023
> 
> 标签：android, imageview, out-of-memory

我有一个设置背景图像的活动。当我继续进入和离开此活动时，它会在某些设备中导致 OutOfMemory。

*   假设我正在使用 x-hdpi 设备。如果我将图像放入 hdpi 存储桶而不是放入 x-hdpi 存储桶，是否会占用更多的内存，因为如果我放入 hdpi 存储桶，图像需要按比例放大？实际上，如何确定我应该将图像放入哪个存储桶？

*   有什么办法可以避免这种情况的 OutOfMemory 吗？我尝试在 OnDestroy 中调用回收和 setImageResource(null)。但是当我再次进入该活动时，我会遇到“无法绘制回收位图”的异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:43:41.993

**回答第二个问题。**

在解码图像并设置为背景之前，您应该调整图像大小以避免内存溢出错误。当我们在内存中加载图像时，通常会出现此错误。了解[如何有效地显示图像](http://androidtrainningcenter.blogspot.in/2012/04/displaying-bitmaps-efficiently-and.html)

**回答第一个问题。**

将相同的图像放入不同的文件夹不会消耗内存，就像您向**HDPI设备显示****LDPI**图像一样，它会拉伸但会占用相同的内存（尽管看起来很奇怪）。但是，如果您的设计师为每个密度制作不同的图像，那么图像大小会有所不同，那么它将需要更多或更少的内存

# internet-explorer - Scrollable Div 只滚动结构，不滚动 IE8 和 IE9 兼容模式下 Primefaces 数据

> ID：13742786
> 
> 赞同：2
> 
> 时间：2012-12-06T11:35:57.620
> 
> 标签：internet-explorer, jsf-2, primefaces, scrollbar

div 滚动表格，但数据不移动。它在 IE9（非兼容模式）和 Firefox 中运行良好。下面是一个简单的例子。有人知道解决方法吗？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Carousel Test</title>
</h:head>

<h:body>

    <h:form id="evaluationForm">

        <div style="overflow:auto; height:200px">
            <p:dataTable value="#{evaluationBean.items}" var="item">
                <p:column headerText="ID">
                    <h:outputText value="#{item.id}" />
                </p:column>
            </p:dataTable>
        </div>

    </h:form>

</h:body>

</html> 
```

谢谢，尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:01:41.160

只需通过以下方式关闭 IE 兼容性模式

```
<h:head>
    <f:facet name="first">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge" /> 
    </f:facet>
    ...
</h:head> 
```

请注意，这`<f:facet name="first">`是特定于 PrimeFaces 的。因此，如果您不使用它，只需将其删除并将`<meta>`标签放在 的最顶部`<h:head>`，它也可以正常工作。关键是它必须出现*在*PrimeFaces 生成的`<link>`指向主题 CSS 的元素之前。另请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/jj676915%28v=vs.85%29.aspx)：

> X-UA-Compatible 标头不区分大小写；但是，它必须出现在网页的标题中（HEAD 部分），在除`title`元素和其他元素之外的所有其他元素之前`meta`。

`<link>`因此，这意味着它在出现在例如元素之后时将不起作用。

# java - 带有类名和文件名的主方法

> ID：13742790
> 
> 赞同：2
> 
> 时间：2012-12-06T11:36:02.617
> 
> 标签：java, eclipse, main

我的文件名是 Temp.java，里面有这个。我正在使用 Eclipse IDE

```
/*package*/ class Test {
    public static void main(String args[]) {
        System.out.println("test");
    }
} 
```

所以我无法将它作为 java 应用程序运行。我将班级名称更改为 Temp

```
class Temp {
 ....
} 
```

现在我能。有人可以解释一下为什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T11:40:24.083

这可能是 Eclipse 的限制。代码从命令行运行良好。

据我了解，您正在尝试将单元测试与被测类嵌入到同一个文件中。这是个好主意，我完全同意。[您可以在Ben J. Christensen 的博客文章](http://benjchristensen.com/2011/10/23/junit-tests-as-inner-classes/)中阅读更多关于如何取得成功的信息。通常，他建议将测试放在静态内部类中，而不是放在同一文件中的独立类中。

来自 Netflix Hystrix 框架的示例：[HystrixCircuitBreaker.UnitTest](https://github.com/Netflix/Hystrix/blob/master/hystrix-core/src/main/java/com/netflix/hystrix/HystrixCircuitBreaker.java#L281)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:37:24.863

文件中的类（`main`应该运行）`.java`必须与文件同名。如果该类不是公共的（如您的情况），则该类将编译但无法运行，因为 Eclipse 尝试根据文件名加载该类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T11:47:41.103

下面的代码位于 中`Temp.java`，可以在 Netbeans 中正常编译和运行：

```
class Whatever {

    public static void main(String[] args) {
        System.out.println("hello");
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T11:59:54.160

问题出在 Eclipse 上，我认为您正在尝试运行 using `right click -> run as -> Java Application`，不幸的是，如果课程不公开，则 Eclipse 不会显示此选项。但是您仍然可以使用`Alt+Shift+X,J`. 它不是 Java 的问题，而是 Eclipse 的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T12:19:51.277

文件名应与公共类名相同，并具有 main() 方法。在您的第一种情况下，文件名 Temp.java 将编译并创建 Test.class 文件而不是 Temp.class，因为您的文件中没有声明 Temp 类。

创建 .class 文件后，运行它`java Test`

所以这是一个例子

```
//Filename abc.java
public class hi
{
public static void main(String[] args)
{
 System.out.println("Hell");
}
} 
```

输出

```
abc.java:1: class hi is public, should be declared in a file named hi.java
public class hi
       ^
1 error 
```

但如果你这样做

```
 //Filename abc.java
    class hi
    {
    public static void main(String[] args)
    {
     System.out.println("Hell");
    }
    } 
```

它将创建 hi.class 文件所以

```
D:\>java hi
Hell 
```

# jquery - 文本框没有专注于鼠标点击

> ID：13742791
> 
> 赞同：-1
> 
> 时间：2012-12-06T11:36:10.157
> 
> 标签：jquery, knockout.js, kendo-ui

我在剑道弹出窗口中有一组类型=“文本”的输入控件（我在我的页面中使用 Jquery 和淘汰赛 js），当我通过使用鼠标单击从一个文本框移动到另一个文本框时，该文本框没有获得焦点.

当我双击文本框时，焦点出现。

*   这在 chrome 中运行良好，问题出在 IE 上。

谁能告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:47:37.447

您的问题没有关于该问题的太多信息。但是我认为你问的是我试图解决的同一个问题。如果是这样，我在 Telerik 的支持网站上发布了这个问题，并且刚刚收到了回复。

[http://www.kendoui.c​​om/forums/mvc/grid/textbox-in-popup-doesn-t-get-focus-when-mouse-clicked-in-ie.aspx](http://www.kendoui.com/forums/mvc/grid/textbox-in-popup-doesn-t-get-focus-when-mouse-clicked-in-ie.aspx)

和 Telerik 的回应：

> 事实上，在我们最新的官方版本中，剑道 UI 窗口中存在一些与焦点相关的问题，现已修复。我使用当前的 Kendo UI 源代码按照概述的步骤进行操作，并且没有出现问题，因此我建议您尝试使用最新的内部构建。对造成的不便深表歉意。

# objective-c - 带圆角的 UILabel（Xcode 4.5 和 iOS 6）

> ID：13742795
> 
> 赞同：10
> 
> 时间：2012-12-06T11:36:23.267
> 
> 标签：objective-c, ios6, uilabel

我刚刚在视图中添加了一个 UILabel 组件，并且正在尝试将其设置为圆角 UILabel。我一直在阅读与同一问题相关的一些问题和答案，但他们都说我必须更改源代码。在新的 Xcode 4.5 和 iOS6 中真的有必要吗？另外我不确定我是否能够看到 mainstoryboard 生成的代码。

任何帮助将不胜感激。

非常感谢，马科斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-09T22:10:32.840

您可以在 Interface Builder 中完成所有操作。
在*XCode*中，选择您的`.xib`文件（或您的*故事板*）以打开 Interface Builder。单击您的`UILabel`并打开*身份检查*器（如果您不知道它在哪里，请转到 XCode 的*帮助菜单*并输入“*身份检查*器”）。*单击User Defined Runtime Attributes*窗格下的加号按钮，并`layer.cornerRadius`为*Key Path*编写，`Number`为*Type*选择，和`5`（或任何其他数字）为*Value*。
如果你现在运行你的项目，你应该得到一个圆角的`UILabel`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-06T11:40:49.060

要制作圆角的 UILabel，请执行以下操作：

```
#import <QuartzCore/QuartzCore.h> 
```

那么你应该参考你的 UILabel

```
yourLabel.layer.cornerRadius = 5; 
```

5 只是一个例子，当然

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T11:40:57.843

你需要`#import "QuartzCore/QuartzCore.h"`在你的代码的某个地方做

```
label.layer.cornerRadius = 2.0; // or whatever radius you want 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-10T04:21:26.907

您可以在界面生成器中通过添加 layer.cornerRadius 作为“身份检查器”下的“用户定义的运行时属性”中的键之一来执行此操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-27T11:40:05.597

将quartzcore 框架添加到您的项目框架中

```
import "QuartzCore/QuartzCore.h" 
```

使用以下代码 -

```
label.layer.cornerRadius = 2.0; // radius depend on how much rounded corner you want.
label.clipsToBounds = TRUE; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-27T22:01:37.297

我想我会为更新的开发环境（使用 Swift）分享一种更好的方法。使用以下代码，您会在 Interface Builder 中看到一个特殊字段，可让您设置角半径。属性检查器中出现一个名为“视图”的新子部分，其中有一个名为“角半径”的项目

```
#if !os(watchOS)
    // watchOS UI designer allows setting of a corner radius.  For
    // iOS and tvOS, an Interface Builder extension is needed.
    extension UIView {
        @IBInspectable var cornerRadius: CGFloat {
            get {
                return layer.cornerRadius
            }
            set {
                layer.cornerRadius = newValue
                layer.masksToBounds = newValue > 0
            }
        }
    }
#endif 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-06T11:43:14.413

**是的，它只能通过添加代码来完成，这里其他人提到过。不幸的是，Interface Builder 现在不能这样做。**

# c++ - 希望线程在进程执行之前完成

> ID：13742796
> 
> 赞同：0
> 
> 时间：2012-12-06T11:36:27.723
> 
> 标签：c++, multithreading, winapi, createprocessasuser

我正在创建一个作为 User( `CreateProcessAsUser()`) 的进程以在用户屏幕上启动应用程序。在应用程序启动之前，我需要以某种方式在用户屏幕上运行一个函数。我的想法是`CreateRemoteThread()`将我的功能放在这里，但这会在`CreateProcessAsUser()`已经启动应用程序之后发生。有人建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:42:51.073

创建一个执行您的函数然后执行目标应用程序的新应用程序（这可以`CreateProcess()`在新应用程序通过 启动时使用`CreateProcessAsUser()`）。

# objective-c - 目的是什么？

> ID：13742798
> 
> 赞同：1
> 
> 时间：2012-12-06T11:36:31.093
> 
> 标签：objective-c, automatic-ref-counting

我对以下短语中的“否则”和“只要”用法感到困惑；

> 否则，只要实现方法遵循静态类型的签名，ARC 就不会强制执行 Objective-C 类型系统。如果 ARC 暴露于无效指针，则这是未定义的行为。
> 
> 就 ARC 而言，有效对象是具有“良好行为”保留操作的对象。具体来说，对象的布局必须使 Objective-C 消息发送机制可以成功地向它发送以下消息：
> 
> *   保留，不带参数并返回指向对象的指针。
> *   释放，不带参数并返回 void。
> *   自动释放，不带参数并返回指向对象的指针。

[http://clang.llvm.org/docs/AutomaticReferenceCounting.html](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)

我们可以推断出以下内容；

**...（忘记其他情况）...如果实现方法遵循静态类型的签名，ARC 将强制执行 Objective-C 类型系统。**

它是在谈论保留，释放，自动释放方法的签名吗？如果有，是否有否定意义？

**如果实现方法遵循静态类型的签名，ARC 将_*不_强制执行 Objective-C 类型系统。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:21:49.297

## 第一段

这是一个具有“块指针类型”的“可保留对象指针”变量：

```
void (^blockPointerTypeVariable)(int); 
```

如果你设置`blockPointerTypeVariable`指向*不是*块的东西，你的程序的行为是未定义的。（您可以将其设置为指向具有不同类型签名的块，而不会违反 ARC 的要求。但您不能将其设置为指向 a `UIView`。）

这是一个带有“<code>Class type”的“可保留对象指针”变量：

```
Class someClass; 
```

这是一个“可保留对象指针”变量，其“<code>Class type”是“协议限定的”：

```
Class<SomeProtocol> someClassWithProtocol; 
```

如果你设置`someClass`或`someClassWithProtocol`指向不是 a 的东西，`Class`你的程序的行为是未定义的。（因此您可以将其设置为`[self class]`or `[UIView class]`，但不能将其设置为指向 的实例`UIView`。）

这是一个“可保留对象指针”变量，它不是特殊情况之一：

```
UIView *view; 
```

就 ARC 而言，您可以将此指针设置为指向*任何东西*，只要任何东西具有与 、 和 相同的类型`UIView`签名。如果您指向与 的签名不同的类型签名的东西，则程序的行为是未定义的。`retain``release``autorelease``view``retain``-[UIView retain]`

## 第二段

您可以将该`view`变量设置为指向任何东西，只要任何东西都适用于 Objective-C 消息发送系统（即`objc_msgSend`函数及其变体），并且只要任何东西在接收到`retain`, `release`,时具有所描述的语义和`autorelease`消息。

特别是，这意味着你可以将它指向不是 Objective-C 类实例的东西，如果你小心地让这些东西的内存布局符合`objc_msgSend`预期，并且只要你让这些东西正确响应`retain`, `release`, 和`autorelease`. Apple 使用 Core Foundation 类型来做到这一点（尽管它没有完全记录在案）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:53:11.823

全文如下：

> 可保留对象指针是空指针或指向有效对象的指针。此外，如果它具有块指针类型并且不为空，那么它实际上必须是指向块对象的指针，并且如果它具有类类型（可能是协议限定的），那么它实际上必须是指向类对象的指针。否则，只要实现方法遵循静态类型的签名，ARC 就不会强制执行 Objective-C 类型系统。如果 ARC 暴露于无效指针，则这是未定义的行为。

英语语法有点复杂，但它表示如果指针未声明为类，则 ARC 不会对其执行任何操作。

# php - 通过 JSON obejct 从 PHP 发送 html 到 Javascript

> ID：13742799
> 
> 赞同：0
> 
> 时间：2012-12-06T11:36:32.530
> 
> 标签：php, json

我正在通过 ajax 从 php 向 jquery 发送一些数据。

如果`$content="ABC";`一切正常。我对 ABC 保持警惕。

如果`$content="<div>ABC</div>";`那么休斯顿有问题。什么都没有发生。

这是PHP代码

```
$json = json_encode(array("content" => $content));
echo $json; 
```

这是jQuery

```
 $('#'+pic_type+'_form_n_'+pic_number).ajaxSubmit({
 success: function(responseimage){
 result = jQuery.parseJSON(responseimage);
 alert(result.content); 
```

有任何想法吗 ？

**更新！** 我已删除`jQuery.parseJSON` ，因此该行只有此代码

`result = responseimage;`

现在我得到了警报的结果。结果如下

```
{"content":".<div>ABC&lt;\/div&gt;."}</div> 
```

所以我们可以看到 JSON 没有创建好。我已经尝试过 utf8_encode 和 trim ，但它们对结果没有任何作用。结果很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:30:33.387

您以某种方式提供了无效的 json - 请将您的原始响应放入[JSONLint](http://jsonlint.com/)，它会告诉您出了什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:49:25.023

PHP（和 JSON）代码看起来不错，前提是变量 $content 实际上有任何内容。否则 PHP 脚本将失败，这就是你的问题。

**您是否在 AJAX 请求中将dataType**定义为“json”？

```
$.ajax({
    url: 'json.php',
    dataType: 'json',
    success:function(data){
        console.log(data);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:19:22.523

我认为你只需要`utf8_encode`在做之前做出回应`json_encode`。只需更改此：

```
$content = utf8_encode("<div>ABC</div>"); 
```

# javascript - Javascript(jQuery) 的简单 If 语句

> ID：13742801
> 
> 赞同：1
> 
> 时间：2012-12-06T11:36:40.197
> 
> 标签：javascript, jquery, if-statement

我试图绕过 if 语句。我是新来的。

我有一个非常简单的脚本从 html5 数据属性中提取数据（文本）。

```
var $datatext = $(this).data('explain'); 
```

现在，当 html5 属性 data-explain 丢失或为空时，我想要一个 if 语句。

```
var $success = if ($datatext < 0) {
    // show some other text, maybe? =
    $(this).text('Fail');
} else {
    // show original, maybe? =
    $(this).text($datatext);
} 
```

再一次，很难把我的头绕在它周围。哦，这些如果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:39:36.537

你可以这样做，

**[现场演示](http://jsfiddle.net/rajaadil/Bsefk/)**

```
$('.someclass').each(function() {    

    if(typeof this.attributes['data-explain']  != 'undefined')
    {
        alert(this.id + ": explain exists");
        explain = $.trim(this.getAttribute('data-explain'))
        if(explain.length > 0)
            alert(explain);
        else
            alert("no value for explain");
    }
    else
        alert(this.id + ": explain does not exists");
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:41:32.403

检查长度而不是`$datatext`像这样重写代码的数据

```
if ($datatext.length > 0) {
    // show original, maybe? =
    $(this).text($datatext);

} else {
    // show some other text, maybe? =
    $(this).text('Fail');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:42:07.503

那应该工作：

```
if (typeof $datatext !== 'undefined' && $datatext.length > 0) {
     $(this).text($datatext);
} else {
     $(this).text('Fail');
} 
```

# jquery - 来自 datepicker 的 getFullYear 问题

> ID：13742808
> 
> 赞同：2
> 
> 时间：2012-12-06T11:37:08.160
> 
> 标签：jquery, asp.net, jquery-ui, date, jquery-ui-datepicker

我正在尝试从文本框中的日期检索全年，但如果日期超过 12 天，它不会返回（所以我怀疑这是日期格式问题），但我怎样才能让它工作？

```
 $(function() {
        $("#dateInput").datepicker({
            onSelect: function (dateText) {
                var birthDate = new Date($(this).val()).getFullYear();
                alert(birthDate); 
            },
            dateFormat: 'dd/mm/yy',
            constrainInput: true,
            changeMonth: true,
            changeYear: true,
            defaultDate: new Date()
        });
    }); 
```

看这里的例子：http: [//jsfiddle.net/5JCRs/12/](http://jsfiddle.net/5JCRs/12/)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:38:43.570

使用大写`MM`而不是小写`mm`，它应该可以工作。所以你的日期格式应该是：

```
dateFormat: 'dd/MM/yy', 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T11:44:40.630

您可以使用将***根据指定格式***`datepicker.parseDate`解析日期的函数：

 *> $.datepicker.parseDate(format, value, settings) - 从具有指定格式的字符串值中提取日期。

该`onSelect`功能必须更改为：

```
onSelect: function(dateText, inst) {
    var date = $.datepicker.parseDate(
        inst.settings.dateFormat || $.datepicker._defaults.dateFormat,
        dateText,
        inst.settings
    );
    alert(date.getFullYear());
} 
```

`datepicker.parseDate`函数需要第一个参数中的日期格式。提供此值的最佳方式是使用明确指定的日期格式或回退到默认日期格式。

[**演示在这里**](http://jsfiddle.net/salman/5JCRs/20/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:58:37.257

将`dateFormat`选项值设置为“yy”：

```
$( "#dateInput" ).datepicker({ dateFormat: "yy" }); 
```

或者，如果您使用的是`regional`设置：

```
$.datepicker.regional["it"] = {
    //...
    , dateFormat: "yy"
    //...
} 
```

参考[这里](http://api.jqueryui.com/datepicker/#option-dateFormat)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T12:04:39.290

这只是 JQuery 和 Javascript 中日期格式的区别。在 javascript 中，当您提供 dateString 时，可能的日期格式`new Date(dateString)`是

```
MM-dd-yyyy
yyyy/MM/dd
MM/dd/yyyy
MMMM dd, yyyy
MMM dd, yyyy 
```

您可以为 JQuery 提供 dateFormat: 'mm/dd/yy' 然后它会起作用，这相当于 MM/dd/yyyy 在javascript中。*

# javascript - 警报不会在使用 JavaScript 和 PhoneGap 的 Windows Phone 7 模拟器上触发

> ID：13742811
> 
> 赞同：1
> 
> 时间：2012-12-06T11:37:20.630
> 
> 标签：javascript, jquery, windows-phone-7, cordova, alert

我尝试在 JavaScript 文件中的 document.ready 上触发警报，但在 Windows Phone 7 模拟器上进行测试时警报没有触发。顺便说一句，我使用 PhoneGap 2.2.0、JS 和 HTML，这是我的代码

```
$(document).ready(function () {       
    alert("Hello World WP7");
    initPlateImage();
}); 
```

我也试过

```
window.alert = navigator.notification.alert; 
```

和

```
navigator.notification.alert("Hi"); 
```

但没有用，任何建议谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:51:12.007

在您调用 alert() 时，可能没有初始化 Cordova。尝试以下方式 - “deviceready”是 Cordova 特定事件，告诉您 Cordova 已成功初始化

```
 document.addEventListener("deviceready",onDeviceReady,false);

    function onDeviceReady()
    {
    // IE does NOT provide an alert method, you can patch it with this line after deviceready.
    window.alert = window.alert || navigator.notification.alert;

    alert("Hello World WP7");

    } 
```

# angularjs - 使用模型以角度创建主细节

> ID：13742813
> 
> 赞同：1
> 
> 时间：2012-12-06T11:37:26.043
> 
> 标签：angularjs

给定下面的对象-

```
function PersonCtrl(){ 
  $scope.persons = [{name: "Mike", age:21, 
                   occupation:{qualification: "engineer", company:"Intel"}}];  
} 
```

和下面的 DOM -

```
<ul>
   <li ng-repeat="person in persons">
      Name : {{person.name}}
      <div ng-model="person.occupation">
        Qualification : {{person.occupation.qualification}}
      </div>
    </li>
</ul> 
```

我有一个名单，名单中必须显示其姓名。现在我将首先加载没有任何细节的数据，在这种情况下是人的资格。

当有人单击此人的姓名时，我将检索此人的详细信息。我只想更改模型，即将资格详细信息添加到那个人的模型中，然后用角度创建 DOM。

控制它的一种方法是使用 ng-show，并设置它的表达式，以便它只显示限定 div，如果以及当限定对象具有值时。然而，这也将导致为每个人创建详细信息 div，从而对性能不利。

当表达式计算为 true 或 false 时，有没有办法通过 angular 创建/销毁dom？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:12:18.340

如果我们想有条件地物理删除/添加 DOM 的一部分，那么[ng-switch](http://docs.angularjs.org/api/ng.directive%3angSwitch)指令系列（ng-switch、ng-switch-when、ng-switch-default）将派上用场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:39:58.383

如果详细数据很小，并且获取它没有巨大的成本，或者关于是否允许当前用户查看它的规则，那么我会说渲染它并最初隐藏它。保持它折叠只是让用户不要考虑那个细节，除非他们想要它用于某些记录。

如果它很大，或者检索/计算成本很高，或者有规则禁止某些用户查看某些细节，那就不同了。在这种情况下，我只会渲染“按钮”来访问它，并在请求时通过 ajax 加载详细信息。

# excel - VBA 中的数据透视表编程

> ID：13742820
> 
> 赞同：0
> 
> 时间：2012-12-06T11:37:41.277
> 
> 标签：excel, vba

我有以下格式的数据 Excel 表：

```
Name   Fruits    Condition of Fruits
=====  ======    ====================

Ram    Apple       Good

Jadu   Apple       Bad

Tina   Orange      Good

Ram    Orange      Good

Tina   Apple       Bad

Ram    Apple       Bad 
```

Pivot 程序在同一个 excel 的另一张表中的输出，比如在 sheet(2) 中应该是这样的：

```
Name  Fruits   Condition of Fruits
====  ======   ===================
               Good       Bad    Total
               ====      =====  ======
Ram   Apple     1           1     2
Ram   Orange    1           0     1
Tina  Apple     0           1     1
Tina  Orange    1           0     1
jadu  Apple     0           1     1
===================================
Grand Total     3           3     6
=================================== 
```

上述格式需要存在于工作表 (2) 的 Excel 中，只要工作表 (1) 中包含源数据，如第一个表所示。

我希望使用 Excel 数据透视表概念创建宏程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:31:24.317

如果您在数据上插入数据透视表，请将这些列拖到行标签中：

*   姓名
*   水果。

然后将此列拖到列标签中：

*   果实状况。

将同一列拖到 Values 中：

*   果实状况。

数据透视表看起来和你的几乎一样（除了水果在名称下，而不是为每个水果重复名称）。

![屏幕截图数据透视表](../Images/9e1e27fbc2fd5bed737c6548f31d27a3.png)

每当您更新工作表 1 中的数据时，您可以通过右键单击表并选择刷新来让数据透视表反映这一点。

# android - 无法在 google play 上搜索我上传的应用程序

> ID：13742821
> 
> 赞同：2
> 
> 时间：2012-12-06T11:37:43.410
> 
> 标签：android, publish

我昨天在 Google Play 上发布了我的应用程序，当我复制整个链接[https://play.google.com/store/apps/details?id=?时，我可以在 google.play.com 上看到它。](https://play.google.com/store/apps/details?id=?)，但是在Play Store应用程序或浏览器中仅输入应用程序名称时找不到它，这是什么原因，谁能告诉我？

# image - 使用 avconv 从图像创建视频

> ID：13742822
> 
> 赞同：5
> 
> 时间：2012-12-06T11:37:46.253
> 
> 标签：image, ubuntu, avcodec

我想从图像创建视频，我的代码是

```
avconv -f image2  -i test2.jpg  -s 320X240 -r 30  -pix_fmt yuv420p -qmin 10 foo.mpg 
```

但我有一个错误

```
VBV buffer size not set, muxing may fail 
```

我该如何解决这个问题？

# iphone - 如何在我的 ios 应用程序中使用 iRate 库？

> ID：13742823
> 
> 赞同：-4
> 
> 时间：2012-12-06T11:37:53.130
> 
> 标签：iphone, objective-c, ios, irate

我在我的应用程序中使用 iRate 文件
但我收到了很多错误，例如

1.  使用未声明的标识符“_messageTitle”
2.  错误该类需要自动引用计数
3.  发出太多错误，现在停止

    如果任何使用 iRate 库的任何帮助都可以接受，请帮助我克服这种情况
    ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:47:09.687

请使用本教程。它也有项目文件的链接。使用它，您将能够使用这些属性。

教程链接在[这里](http://mobile.tutsplus.com/tutorials/iphone/ios-quick-tip-adding-app-store-stars-with-irate/)

另一个带有应用程序的源代码在[这里。](https://github.com/nicklockwood/iRate)

希望它有效。

# objective-c - uitableview 单元格突出显示

> ID：13742826
> 
> 赞同：0
> 
> 时间：2012-12-06T11:38:09.917
> 
> 标签：objective-c, ios, xcode, uitableview, uibutton

我有一个表格视图，其中每个单元格都包含一个按钮。我不使用 didSelectRowAtIndexPath 委托，而是使用按钮操作的自定义方法。我希望在单击每个单元格内的按钮时，该单元格应突出显示或更改颜色并在单击其他单元格中的按钮时返回其正常状态（颜色）（使该单元格突出显示）。我的按钮操作方法是：

```
- (void)SelectButtonTapped:(UIButton *)button
{

    self.tabBarController.tabBar.userInteractionEnabled = YES;

    AppDelegate *proDel = [[UIApplication sharedApplication]delegate];

    UITableViewCell *cell = (UITableViewCell *)button.superview.superview;

    //MyCustomCell *cell = (MyCustomCell *)button.superview.superview;

     NSIndexPath *indexPath = [homeTable indexPathForCell:cell];

     //cell.backgroundColor = [UIColor lightGrayColor];

    //[homeTable setNeedsDisplayInRect:[homeTable rectForRowAtIndexPath:indexPath]];

    DetailViewController *objDetail=[[DetailViewController alloc] init];

    Home *tempSearchObj=(Home *)[profileArray objectAtIndex:indexPath.row];
    objDetail.firstName=tempSearchObj.userName;

    objDetail.userImageUrl=tempSearchObj.imageUrl;

    objDetail.passedProfileID = tempSearchObj.profileID;

    plsSelectLabel.text = [NSString stringWithFormat:@"%@",objDetail.firstName];

    proDel.globalName = plsSelectLabel.text;

    proDel.globalProfileId = objDetail.passedProfileID;

} 
```

但这似乎不起作用。任何帮助，将不胜感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:45:22.777

将 cellForRowAtIndexPath 中的单元格选择样式设置为：

```
if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        [cell setSelectionStyle:UITableViewCellSelectionStyleBlue];
    } 
```

和 ：

```
yourButton.tag = indexPath.row; 
```

在您的方法中添加以下行以突出显示单元格：

```
UIButton *clickButton = (UIButton *)sender;

int addButtonIndex = clickButton.tag;

NSIndexPath *indexPathHighlight = [NSIndexPath indexPathForRow:addButtonIndex inSection:0];

UITableViewCell *newCell = [yourTable cellForRowAtIndexPath:indexPathHighlight];

[newCell setSelected:YES animated:YES]; 
```

取消选择上一个单元格：

```
NSIndexPath *previousIndexPathHighlighted = [NSIndexPath indexPathForRow:previousTag inSection:0];

UITableViewCell *previousCell = [yourTable cellForRowAtIndexPath:previousIndexPathHighlighted];

[previousCell setSelected:NO animated:YES];

previousTag = clickButton.tag; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:33:56.573

我认为最好的方法是制作一个

```
NSInteger selectedCellIndex; 
```

* * *

在 cellForRowAtIndex 方法中设置按钮的标签

```
button.tag = indexPath.row 
```

* * *

单击按钮并重新加载表格时设置 selectedCellIndex

```
selectedCellIndex = button.tag;
[self.tableView reloadData]; 
```

* * *

然后在 cellForRowAtIndex 方法中检查索引是否与 selectedCellIndex 相同，并为单元格添加不同的颜色。

```
if( indexPath.row == selectedCellIndex ){
    //set different colors
} 
```

请记住在 if( cell == nil ) 检查之外执行此操作，否则它将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:45:49.633

解决此问题的正确方法是，在您的`cellForRowAtIndex:`方法中，您可以知道您的单元格是否需要突出显示。然后，在单击按钮并配置您需要做的任何事情后，您应该简单地做

```
NSArray *indexes = [NSArray arrayWithObject:[NSIndexPath indexPathForRow:0 inSection:1]];
[self.tableView reloadRowsAtIndexPaths:indexes withRowAnimation:UITableViewRowAnimationNone]; 
```

另一种解决方法是访问单元格并直接更改它。但不是与`button.superview.superview`，而是

```
UITableViewCell *cell = [self.tableView cellForRowAtIndex:[NSIndexPath indexPathForRow:0 inSection:1]]; 
```

# android - 比较android sqlite中的日期时间

> ID：13742827
> 
> 赞同：0
> 
> 时间：2012-12-06T11:38:12.160
> 
> 标签：android, sqlite, datetime, comparison

我有这个声明：

```
SELECT t1.* FROM pos t1
        INNER JOIN pos_visit t2
           ON t2.pos_id = t1.id_pos
        INNER JOIN roadmap t3
           ON t3.id_roadmap = t2.roadmap_id
WHERE t3.id_roadmap ='rmp100000000000000020121206114347690'
    AND datetime(t1.lastChangedDate) > datetime(t3.lastChangedDate); 
```

我没有这样的功能 `datetime`。

我提到我也尝试`strftime`过。所有这些功能在 sqLiteBrowser 上都可以正常工作，但在 Android 中却无法正常工作。我试过`julianday`了，我没有收到任何错误，但是 Select 没有返回正确的值（它应该返回一个注册并且它不返回任何东西）

知道问题出在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:04:29.570

你可以这样解决问题：

我将日期时间存储为 YYYYMMDDHH。所以我可以执行 stempel >= '2012120612' 和 stempel <= '2012122412'

另一个技巧是将日期保存为长值（java 中的 lDate.getTime()）。所以你可以这样做：

茎佩尔 >= 1231243154123123 和茎佩尔 <= 1231234235526265

# c# - WCF Rest 上传图片

> ID：13742830
> 
> 赞同：0
> 
> 时间：2012-12-06T11:38:29.400
> 
> 标签：c#, json, wcf, rest, streaming

我目前正在寻找将图像上传到现有 WCF Json 服务的最佳方式，然后该服务将图像保存到服务器上的文件夹中。像流式传输图像一样简单吗？或者，如果您使用的是 json，是否有不同的做法？

最终生病将图像从移动设备发送到服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:02:00.930

在这个地方找到了一个很好的代码。看一看。它应该满足你的需要。该代码具有客户端和服务器实现

[MSDN](http://code.msdn.microsoft.com/windowsdesktop/Upload-files-using-a-REST-13f16af2/sourcecode?fileId=48404&pathId=787905472)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:51:26.187

[您可以使用来自http://www.malsup.com/jquery/form/](http://www.malsup.com/jquery/form/)的ajaxForm 或 ajaxSubmit 我们用它来调用我们的数据的 MVC 操作，但由于 IE 存在 ajax 和文件问题而不得不使用 iframe 后备选项输入。

对于移动网站，我希望这很有用。对于移动应用程序，我希望它更像是流式传输图像的情况，就像您处理任何其他类型的文件一样。

# android - 通过另一个线程上的 onClick 事件执行代码

> ID：13742831
> 
> 赞同：1
> 
> 时间：2012-12-06T11:38:30.293
> 
> 标签：android, multithreading, onclick, handler, runnable

我正在开发一个应用程序，它使用 PHP 和 JSON 从 MySQL 数据库中提取天气数据。它检查用户是否有互联网连接，如果没有，它将查找本地存储的文件。如果该文件不存在，那么它将显示一条消息。要刷新列表，用户必须重新启动应用程序。我发现这对用户不太友好，所以我决定添加一个刷新数据的按钮。

我有两个类，我的 ListActivity 类（在下面的代码中称为 WeerActivity.java）和一个在新线程中从 Internet 收集所有数据的类（称为 InternetWeerThread.java）。我的 onClickListener，对于刷新按钮，是在 ListActivity 类中设置的。这会尝试将包含刷新代码的可运行文件发布到另一个类。但是，当我这样做时。我得到一个异常，因为代码仍然在 UI 线程上执行。

WeerActivity.java

```
public class WeerActivity extends ListActivity{

    private static Thread internetWeerThread;

    private InternetWeerThread internetWeerThreadInstance;

    public static Handler activityHandler;
    public static Handler internetHandler;
    public static ListView listView;
    public static Context context;
    public static LinearLayout weerContainer;
    public static Button refreshButton;

@Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);

        setContentView(R.layout.weer);
        refreshButton = (Button) findViewById(R.id.weer_refresh_button);
        listView = (ListView)findViewById(android.R.id.list);
        weerContainer = (LinearLayout) findViewById(R.id.weer_container);
        context = this;

        activityHandler = new Handler();
        internetWeerThreadInstance = new InternetWeerThread(activityHandler);
        internetWeerThread = internetWeerThreadInstance;
        internetHandler = InternetWeerThread.getHandler();
        internetWeerThread.start();

        refreshButton.setOnClickListener(new Button.OnClickListener(){
            public void onClick(View v){
                internetHandler.post(internetWeerThreadInstance.new Refresh());
            }
        });
    }
} 
```

InternetWeerThread.java

```
class InternetWeerThread extends Thread{

    private Handler activityHandler;

    private static String html;
    private static JSONArray weerItems;
    private static ArrayList<WeerData> weerData = new ArrayList<WeerData>();
    private static WeerAdapter adapter;
    private static String JSONString;

    private static final String timeoutString = "Unable to connect with the server, check your internet connection";
    private static final Handler internetWeerThread = new Handler();

    // CONSTRUCTOR
    public InternetWeerThread(Handler activityHandler){
        this.activityHandler = activityHandler;
    }

    public static Handler getHandler(){
        return internetWeerThread;
    }

    @Override
    public void run(){
        onRefresh();
    }

    // method that gets called by the Runnable Refresh (and onCreate)
    private void onRefresh(){
        try{
            weerItems = getWeerItems("http://192.168.178.14/weer.php");
            JSONString = weerItems.toString();
            FileAccess.createFile(WeerActivity.context, "weer.txt", JSONString);
            displayData(weerItems);
        }catch(IOException e){
            e.printStackTrace();
            System.out.println(WeerActivity.context);
            if(FileAccess.fileExists(WeerActivity.context, "weer.txt")){ // read data from file
                JSONArray JSONData;
                try {
                    if(FileAccess.readFile(WeerActivity.context, "weer.txt") != null){
                        JSONData = new JSONArray(FileAccess.readFile(WeerActivity.context, "weer.txt"));
                        displayData(JSONData);
                        activityHandler.post(new Updater());
                    }else{
                        activityHandler.post(new TimeOut());
                    }
                } catch (JSONException je) {
                    je.printStackTrace();
                    activityHandler.post(new TimeOut());
                }
            }else{ // display message that there is no internet connection and no file present
                activityHandler.post(new TimeOut());
            }
        }
    }

    private JSONArray getWeerItems(String link) throws IOException{
        HttpUriRequest request = new HttpGet(link.toString());

        BasicHttpParams httpParameters = new BasicHttpParams();
        int timeoutConnection = 3000;
        ConnManagerParams.setTimeout(httpParameters, timeoutConnection);

        HttpClient httpClient = new DefaultHttpClient(httpParameters);
        HttpResponse response = httpClient.execute(request);

        if(response.getStatusLine().getStatusCode() == 200){
            JSONArray jArray = new JSONArray();

            try {
                URL url = new URL(link);
                HttpURLConnection con = (HttpURLConnection) url.openConnection();
                readStream(con.getInputStream());

                try {
                    jArray = new JSONArray(html);           
                } catch (JSONException e) {
                    e.printStackTrace();

                }
                return jArray;
            }catch (Exception e) {
                e.printStackTrace();
            }
            return jArray;
        }else{
            activityHandler.post(new TimeOut());

            JSONArray jArray = new JSONArray();
            return jArray;
        }
    }

    private void readStream(InputStream in){
        BufferedReader reader = null;
        try {
            reader = new BufferedReader(new InputStreamReader(in));
            String line = "";
            html = "";
            while ((line = reader.readLine()) != null) {
                html += line;
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (reader != null) {
                try {
                    reader.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }

    private void displayData(JSONArray jArray){
        try{
            int length;
            if(jArray.length() < 7){
                length = jArray.length();
            }else if (jArray.length() > 7){
                length = 7;
            }else{
                length = 7;
            }
            for(int i = 0; i < length; i++){
                JSONObject row = jArray.getJSONObject(i);
                int temperatureDay = row.getInt("temperature_day");
                int temperatureNight = row.getInt("temperature_night");
                String date = row.getString("date");
                int weatherType = row.getInt("weather_type");

                WeerData singleWeerData = new WeerData();
                singleWeerData.setTemperatureDay(temperatureDay);
                singleWeerData.setTemperatureNight(temperatureNight);
                singleWeerData.setDate(date);
                singleWeerData.setWeatherType(weatherType);

                weerData.add(i, singleWeerData);
            }

            activityHandler.post(new Updater());
        }catch(JSONException e){
            e.printStackTrace();
        }
    }

    // update the listView
    public class Updater implements Runnable{
        public void run(){
            adapter = new WeerAdapter(WeerActivity.context, R.layout.weer_row, weerData);
            WeerActivity.listView.setAdapter(adapter);
        }
    } 
```

线程和 Runnables 对我来说是新的。这是我正在创建的第一个 Android 应用程序。所以希望有人可以帮助我解决这个问题。

任何帮助将不胜感激 ！

# android - 在框架布局中动态添加 Viewpager

> ID：13742835
> 
> 赞同：0
> 
> 时间：2012-12-06T11:38:51.617
> 
> 标签：android, android-viewpager, android-framelayout

是否可以`.replace()`用 ViewPager 替换 FrameLayout 中的片段？因为两者都是 ViewGroups。

例如，在xml中，我只有

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

<FrameLayout
    android:id ="@+id/content"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

我想用在运行时将片段保存到片段的 ViewPager 的 id 内容替换 FrameLayout。可能吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T11:42:27.267

> 我想用在运行时将片段保存到片段的viewpager的id内容替换framelayout。可能吗？？

您不能将 a 替换`Fragment`为简单`ViewGroup`的 a `ViewPager`，但由于 4.2 中的新更改，您可以将`ViewPager`自身放入 a`Fragment`并使用嵌套`Fragments`作为`ViewPager`. 然后，您可以将首字母替换`Fragment`为`Fragment`包含`ViewPager`.

请参阅[本指南](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)，嵌套`Fragments`也可通过兼容性包提供给较低的 API。有关实现示例，请参阅[此问题。](https://stackoverflow.com/questions/13379194/how-to-add-a-fragment-inside-a-viewpager-using-nested-fragment-android-4-2)

# textures - min3d 的纹理问题

> ID：13742837
> 
> 赞同：0
> 
> 时间：2012-12-06T11:38:53.987
> 
> 标签：textures, min3d

![在此处输入图像描述](../Images/e79541d7bf7248024fb7b9e5916f5353.png)

我正在使用 min3d。只需创建一个天空图并添加纹理。

我的问题不是纹理不适合下图。（我只需要左右切换）

但！你能看到每张图片中间的扭结吗？

当我围绕 Y 轴旋转天空贴图时，它的类似纹理位于正弦曲线上。

它就像纹理在正弦曲线中移动。这种现象只发生在天空贴图纹理上。此外，如果我添加一个矩形并在其上放置纹理，然后旋转或移动矩形，则纹理正在移动。它就像它被投影一样。

我以前没有遇到过这个问题。我还再次检查了 min3d 并使用未触及的 min3d 源创建了一个新的 eclipse 项目。创建了一张天空图。渲染了它。一样的效果。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:51:56.140

看来你没有正确设置天空盒纹理你试过这个例子吗：[http ://www.rozengain.com/blog/2010/10/21/min3d-for-android-sky-box-tutorial/](http://www.rozengain.com/blog/2010/10/21/min3d-for-android-sky-box-tutorial/)

# php - jquery响应中的javascript函数不起作用

> ID：13742839
> 
> 赞同：0
> 
> 时间：2012-12-06T11:38:55.640
> 
> 标签：php, javascript, jquery

> **可能重复：**
> [调用从 Ajax 响应返回的 JavaScript 函数](https://stackoverflow.com/questions/510779/calling-a-javascript-function-returned-from-a-ajax-response)

```
var url = "showpdf.php";
$.ajax({
    type: "post",
    url: url,
    data:    {academic:academic,uni:uni,course:course,lan:lan,sem:sem,subject:subject,type:type,clz:clz},
    success: function(response)
    {
        alert(response);
        document.getElementById("alldata").innerHTML = response;

    }
}); 
```

在响应中，我有下面的带有简单 JavaScript 函数的 html 代码

```
<label onclick="popup()"> clickme </label>
<script>
function popup()
{
  alert("hello");
}
</script> 
```

在这里，这个 popup() 函数不起作用请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:42:58.477

问题是您希望执行 ajax 响应中包含的 Javascript。情况并非如此，浏览器不执行 ajax 响应中包含的任何 Javascript。可能会尝试解析出 Javascript 并以某种方式执行它，例如，`eval()`但这会很讨厌而且不是一个好主意。使用`eval()`您还必须考虑它只会接受有效的 Javascript，因此您不能只将响应传递给它，因为其中包含一些 HTML。

一种可能的解决方案是`popup()`在页面或外部 Javascript 文件中已经定义函数，并在将 HTML 添加到 DOM 后分配点击处理程序。

例如：

```
function popup()
{
    alert(this.id);
}

document.getElementById("alldata").innerHTML = response;
document.getElementById("myNewLabel").onclick = popup; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:49:13.540

将该字符串隐藏在您的页面中，并在成功时显示它。像：

```
<label onclick="popup()" id="mylable" style="display:none"> clickme </label>
<script>
function popup()
{
  alert("hello");
}
</script>

var url = "showpdf.php";
$.ajax({
    type: "post",
    url: url,
    data:    {academic:academic,uni:uni,course:course,lan:lan,sem:sem,subject:subject,type:type,clz:clz},
    success: function(response)
    {
       // alert(response);
        $("#mylable").show();

    }
}); 
```

尝试使用 DOM 的更好方法。让我知道上面的代码是否适合您。

# c++ - 如何在 VC 2008 中删除“错误 C4335：检测到 Mac 文件格式”

> ID：13742840
> 
> 赞同：5
> 
> 时间：2012-12-06T11:39:06.560
> 
> 标签：c++, visual-studio

我现在用VC++ 2008编译一个项目，得到的错误如下：

```
Error   7   error C4335: Mac file format detected: please convert the source file to either DOS or UNIX format 
```

我想知道如何解决这种错误。我发现[此链接](http://msdn.microsoft.com/en-us/library/aad7fash.aspx)很有用，但该解决方案适用于 VC++ 2010 而不是 VC++ 2008。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-10T23:26:52.883

对于 VS2012，在解决方案资源管理器中选择并打开文件。文件->高级保存选项->设置编码：西欧（Windows）&&设置行尾：Unix

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T11:42:30.413

您可以使用[此插件](http://www.grebulon.com/software/stripem.php)在您的项目中自动进行转换，这非常容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T11:44:31.190

只需将其保存为您想要的格式即可；VC+ 2008： http: [//msdn.microsoft.com/en-us/library/aad7fash (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/aad7fash(v=vs.90).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-09T10:54:42.313

你可以用 Sublime Text 打开你的文件，然后打开“View”->“Line Endings”->Unix/Windows。然后保存文件。

# javascript - 将 Div 定位在中心的 JavaScript 数学（算法）

> ID：13742842
> 
> 赞同：1
> 
> 时间：2012-12-06T11:39:10.043
> 
> 标签：javascript, math, mobile, responsive-design

我正在尝试将具有一定高度和一定宽度的 div 框定位到具有一定高度和一定宽度的屏幕的中心。

宽度和高度由 JavaScript 检测。我正在努力成为一名更好的程序员，而数学和编程并不总是我最好的特质。我意识到我需要做一些除法和百分比修复，但需要一个指针：

```
<script type="text/javascript">

var w=document.width;
var h=document.height;

var img_w=200;
var img_h=300;

var css=;

/*

Example

w=600;
h=400;

img_w=200;
img h=300;

therefore css will be

position:absolute;
top:150px;
left:100px;
right:100px;
bottom:100px;

see my image.

*/

document.writeln(css);
</script> 
```

![在此处输入图像描述](../Images/0d2e37055dc9714ef8fc8d858e578c1a.png)

所以基本上，无论`img_w`and`img_h`是什么，盒子都应该在中间有边距。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:43:13.043

您正在寻找的公式如下：

```
left = ( width - img_width ) / 2
top = ( height - img_height ) / 2 
```

PS：在你的例子中，你倒置了`h`and `w`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T11:47:31.540

请让我提出一种替代方法。

CSS 不是一种程序性语言，而是一种声明性语言。让浏览器为您计算并使用`margin: auto`. 我知道这不是你要找的，但 CSS 就是这样。

有关示例，请参见[http://jsfiddle.net/th43T/ 。](http://jsfiddle.net/th43T/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:31:23.057

如果您需要在调整窗口大小期间使其居中，您还必须检查窗口调整大小事件。

我创建了这个 jsfiddle：http: [//jsfiddle.net/ekRff/1/](http://jsfiddle.net/ekRff/1/)

javascript:

```
function updateBoxPosition($box) {
    var window_width = $(window).width();
    var window_height = $(window).height();
    var left_pos = (window_width - $box.width()) / 2;
    var top_pos = (window_height - $box.height()) / 2;

    $box.css('left', left_pos);
    $box.css('top', top_pos);
}

$(function() {
    var $box = $("#box");
    var window_width = 0;
    var window_height = 0;

    var resizeTimer;
    $(window).on('resize', function () {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(function () {
            updateBoxPosition($box);
        }, 25);
    });

    updateBoxPosition($box);          
});​ 
```

顶部函数处理定位，定位绑定在 onload 事件期间完成。它确实需要 jQuery，但我确实推荐它用于这种情况，因为浏览器处理窗口宽度的方式有很多不同。

为调整大小事件添加的计时器是为了提高性能，调整大小事件在调整大小期间被频繁触发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T11:44:58.800

我首先认为数学是（正如其他人指出的那样）

数学是：（总宽度 - 图像宽度）/ 2。高度也是如此

但是，为什么在您的示例中是顶部 150 像素和底部 100 像素？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T11:46:53.230

```
Block css:{
    left: 50%;
    top: 50%;
}

JS (useing jQuery): {
    block.css({
        'margin-left': '-' + (block.outerWidth() / 2), // margin-left: -1/2 of block width
        'margin-top': '-' + (block.outerHeight() / 2), // margin-top: -1/2 of block height
    })
} 
```

# ios - Google Analytics（分析）iOS SDK v2 - 自定义维度

> ID：13742851
> 
> 赞同：0
> 
> 时间：2012-12-06T11:39:42.257
> 
> 标签：ios, google-analytics

我最近集成了适用于 iOS 的 Google Analytics SDK 的最新版本。我正在跟踪屏幕视图并尝试发送自定义变量。

我发现可以使用的唯一方法是在发送屏幕跟踪请求之前使用 setCustom ，例如：

```
[[GAI sharedInstance].defaultTracker setCustom:1 dimension:@"dimension"];
[[GAI sharedInstance].defaultTracker trackView:@"To screen one"]; 
```

使用调试模式，我设法看到与屏幕视图请求一起发送的自定义维度：

> 正文：cd2&ul=de&an=MyApp&_v=asldkajsdlkj3l12kj&cd1=dimension&t=appview&sd=24-bit&cd=To+screen+one&sr=320x480&tid=UA-XXXXXXX-X&v=1&av=alpha+6&qt=16921&z=1029348723498274

在参数“cd1”下。

问题是：我在仪表板的任何地方都看不到它。我已经报告了所有屏幕视图，但根本没有自定义维度。

有谁知道问题可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:36:48.397

在[Google Group 中询问](https://productforums.google.com/forum/#!msg/analytics/-VYY8CYpmSQ/SV0luFp_X4sJ)后，一个叫 Dave 的家伙指出了以下几点：

> 好吧，这份文件：
> [https ://developers.google.com/analytics/devguides/collection/ios/v2/migration](https://developers.google.com/analytics/devguides/collection/ios/v2/migration)
> 
> 表示 v2 SDK 目前不支持自定义变量。支持自定义维度，这是您上面的代码试图设置的。但是，要使用自定义尺寸，此页面：
> 
> [https://developers.google.com/analytics/devguides/platform/features/customdimsmets](https://developers.google.com/analytics/devguides/platform/features/customdimsmets)
> 
> 表示您需要首先在 GA 管理 UI 中定义它们。为了解释如何做到这一点，该页面链接到此页面：
> 
> [http://support.google.com/analytics/bin/answer.py?hl=en&answer=2709829](http://support.google.com/analytics/bin/answer.py?hl=en&answer=2709829)
> 
> 不幸的是，这些说明与现实不符。我在“自定义定义”选项卡下没有“自定义维度”选项卡——我只有一个“自定义数据源”。因此，目前的说明或 GA 管理 UI 似乎有些不正常——我不知道可能存在 beta 变化。我还没有找到任何定义自定义维度的方法，而且我想我已经到处找了。
> 
> 因此，要回答您的问题：要使用自定义维度，您必须先在 GA 管理 UI 中进行设置，然后才能在您的应用中使用它们。目前，我看不到任何方法可以做到这一点，所以我也被困在这一步。

联系支持人员后，他们似乎解决了问题，现在可以在管理面板上设置自定义尺寸。

# java - 从 jar 中获取 ActiveMQ 版本

> ID：13742852
> 
> 赞同：0
> 
> 时间：2012-12-06T11:39:53.300
> 
> 标签：java, activemq

是否有从 ActiveMQ jar 中查找 Apache ActiveMQ 版本的选项？它会记录信息还是 jar 中是否存在文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:51:26.843

从 Java 客户端，您可以通过调用

`org.apache.activemq.ActiveMQConnectionMetaData.getProviderVersion()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T12:07:16.763

我在 activemq-all-5.7.0.jar 的清单文件中找到了这个

Manifest-Version: 1.0
Implementation-Vendor: The Apache Software Foundation
Implementation-Title: ActiveMQ :: All JAR bundle
**Implementation-Version: 5.7.0**
Implementation-Vendor-Id: org.apache.activemq
Built-By: dejanb
Build-Jdk: 1.6.0_33
规范-供应商：Apache 软件基金会
规范-标题：ActiveMQ :: 所有 JAR 包
创建者：Apache Maven
**规范-版本：5.7.0**
Archiver-版本：Plexus Archiver

# java - Java：检查位置行

> ID：13742854
> 
> 赞同：0
> 
> 时间：2012-12-06T11:40:00.110
> 
> 标签：java

> **可能重复：**
> [GameLogic，x in a row game](https://stackoverflow.com/questions/13692902/gamelogic-x-in-a-row-game)

checkPositionRow 说明：

****checkPositionRow public static boolean checkPositionRow(char[][] a, int row, int col, int l) 检查指定单元格是否是包含相同字符的水平连续单元格序列的一部分。单元序列的长度必须为 l。

参数：

*   `a`- char 类型的二维矩形数组。

*   `row`- 有问题的单元格的行

*   `col`- 有问题的单元格的列

*   `l`- 所需的序列长度 返回： true - 如果单元格是长度至少为 l 的水平序列的一部分；错误 - 否则。****

无法让这个游戏运行，如果他们连续 5 个或更多，则需要游戏返回 true。这是我的尝试（不起作用，只是一直返回 true，但是当序列小于 5 时我需要它返回 false）：

```
public static boolean checkPositionRow(char[][] a, int row, int col, int l){
  int counter = 1;

  for (int i=0; i<a.length; i++) {
    if(a[row][i] == a[row][i+1]) {
      counter++;

      if(counter >= 5){
        return true;
      }                  
    }
  }

  return false;
} 
```

我究竟做错了什么？帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:54:50.353

```
if(a[row][i] == a[row][i+1]){
    ...
}else{
  //reset counter
  counter = 1;
} 
```

应该`i<a.length`需要`i<a.length -1`else`a[row][i+1]`才能给出越界异常。`a[row].length`正确的长度

```
if(counter >= l){
  //l = required length
  return true;
} 
```

重写一段时间

```
public static boolean checkPositionRow(char[][] grid, int row, int col, int requiredLength) {
  int counter = 0;
  int index = 0;
  char[] charRow = grid[row];
  char charToLookFor = grid[row][col];
  while (index < charRow.length && counter < requiredLength) {
    if (charToLookFor == charRow[index]) {
      counter++;
    } else {
      counter = 0;
    }
    index++;
  }
  return counter == requiredLength;
} 
```

您可以检查长度行是否大于或等于所需长度

```
 public static boolean checkPositionRow(char[][] grid, int row, int col, int requiredLength) {
    int counter = 0;
    char[] charRow = grid[row];
    if (charRow.length >= requiredLength) {
      int index = 0;
      char charToLookFor = grid[row][col];
      while (index < charRow.length && counter < requiredLength) {
        if (charToLookFor == charRow[index]) {
          counter++;
        } else {
          counter = 0;
        }
        index++;
      }
    }
    return counter == requiredLength;
  } 
```

# c# - 通过 Internet 与远程服务器通信

> ID：13742868
> 
> 赞同：-3
> 
> 时间：2012-12-06T11:41:32.527
> 
> 标签：c#, .net, winforms

我想开发一个与远程服务器通信的 winform 应用程序。服务器将具有真实 IP。每个客户端都将通过 Internet 发送和接收数据。客户端应用程序是面向对象的，所有业务对象都将在服务器中执行。

我听说过 .net 远程处理和套接字编程。我不知道哪个是实现此目的的最佳方法。

我应该为我的应用程序使用 .net 远程处理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:43:58.483

使用 WCF

[Windows 通信基础](http://msdn.microsoft.com/en-us/library/dd456779.aspx)

# php - 查询 sql 数据库以回显最高的自动递增数

> ID：13742869
> 
> 赞同：5
> 
> 时间：2012-12-06T11:41:43.150
> 
> 标签：php, mysql, max

我试图制作一个显示最高值的 sql 函数，但是我使用的 MAX 函数的所有变体仍然出现空图像。这里发生了什么？我该如何解决？

//不显示图像并且不给出任何错误

```
$result = mysql_query("SELECT MAX(id) AS id FROM people") or die (mysql_error()); 
```

//显示图像 87

```
$result = mysql_query("SELECT  * FROM people WHERE id = 87") or die (mysql_error()); 
```

![在此处输入图像描述](../Images/c65c5d634a49ae31cbbe199298091fc0.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T11:43:29.887

它不应该显示图像，它应该给出 87 的结果。

见[MAX](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_max)

你可以这样做：

```
select * from people order by id desc limit 0, 1 
```

这应该通过 ID 为您提供最新的图像。

要使此动态并允许下一个按钮，您需要存储正在查看的图像的值。单击下一个按钮时，您可以执行以下操作

```
select * from people order by id desc limit 1, 1 //Start at row 1, bring back 1. 
```

见[MySQL 限制](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)

不过，您需要使用 PHP 来分配 limit 和下一个链接中的值。为此，您需要有这样的链接：

```
<a href="www.mysite.com/page?imagecount=1">Next</a> 
```

然后使用 PHP 你可以：

```
<?php
    if (isset($_GET["imagecount"]))
        $next = (int)$_GET["imagecount"]; //Don't forget the (int) cast to avoid SQL injection!!!
    else
        $next = 0;

   $result = mysql_query("select * from people order by id desc limit $next, 1") or die(mysql_error());
?> 
```

要扩展链接，您可以使链接动态化：

```
<a href="www.mysite.com/page?imagecount=<?php echo $next+1; ?>">Next</a> 
```

# c# - 获取 dll 中使用的结构

> ID：13742871
> 
> 赞同：1
> 
> 时间：2012-12-06T11:41:48.517
> 
> 标签：c#, .net, struct

是否可以过滤 dll 中使用的所有结构声明变量？

对于静态字段，我使用以下代码：

```
foreach (FieldInfo targetfield in InputType.GetFields(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Static))
{
} 
```

有什么可能的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:59:28.753

您可能只需要以下类型：

*   值类型（所有结构都是值类型）：参见[IsValueType](http://msdn.microsoft.com/en-us/library/system.type.isvaluetype.aspx)属性。
*   不是枚举（枚举是值类型，但您可能不想将它们视为结构）：请参阅[IsEnum](http://msdn.microsoft.com/en-us/library/system.type.isenum.aspx)属性。
*   不是原始类型（例如`Int32`，它是一种值类型，但可能不是您想要考虑的“结构”）：请参阅[IsPrimitive](http://msdn.microsoft.com/en-us/library/system.type.isprimitive.aspx)属性。

像这样的东西：

```
const BindingFlags bindingFlags =
    BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Static;
var structFields = from field in InputType.GetFields(bindingFlags)
                   let type = field.FieldType
                   where type.IsValueType
                       && !type.IsEnum
                       && !type.IsPrimitive
                   select field;
foreach (var targetField in structFields) { ... } 
```

一件事可能出乎意料：这将包括内置但非原始的值类型，例如[DateTime](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)和[TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan%28v=vs.110%29.aspx) ...因为它们*是*结构。您必须根据您要执行的操作来决定是否可以。（就我而言，我不想要它们。）如果您决定不希望在结果中出现这些，则可能有以下几种可能性：

*   明确过滤掉它们 ( `type != typeof(DateTime)`)。
*   从 mscorlib 程序集 ( `type.Assembly != typeof(object).Assembly`) 中过滤掉所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:56:03.747

你的意思是成员变量又名字段还是局部变量？在后一种情况下，你应该走反编译器的输出......像塞西尔： http: [//mono-project.com/Cecil](http://mono-project.com/Cecil)

# php - 在某些字符后将结果另存为某些变量

> ID：13742873
> 
> 赞同：2
> 
> 时间：2012-12-06T11:41:50.873
> 
> 标签：php, html, regex

我有一组从数据库中提取并使用正则表达式清理的结果：AOC/BEA/TA/MMSC/T/ACCTT/ACCTESC/T/SRTTA/TA/

现在每个字母组合都是一个产品 ID。

我需要将每个 ID 保存为单独的变量，以便稍后在页面中回显。

例子：

```
$Link1 = AOC/
$Link2 = BEA/
$Link3 = TA/ 
```

获取ID的PHP是：

```
$History = $DataRow["ProductID"];

$HistoryEdit =  ereg_replace("[^A-Z\/]", "", $History); 

echo $HistoryEdit; 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:12:55.247

使用数组而不是单独的变量：

```
$Links = explode('/', $HistoryEdit); 
```

现在：

```
$Links[0] = "AOC";
$Links[1] = "BEA";
$Links[2] = "TA"; 
```

等等。

# php - MYSQL 更新不适用于 php 变量 id

> ID：13742875
> 
> 赞同：0
> 
> 时间：2012-12-06T11:41:56.497
> 
> 标签：php, mysql

我被困在一个简单的 MYSQL UPDATE 语句上；从数据库中选择一个 ID，然后更新一条记录 WHERE ID = $ID。代码：

```
$searchDates = ('SELECT * FROM booking_event WHERE subject != "Closed" AND is_reminded IS NULL AND DATE_ADD(NOW(), INTERVAL 2 DAY) >= `starting_date_time` AND NOW() <= `starting_date_time`'); 

$result = mysql_query($searchDates) or die (mysql_error());

while ($row = mysql_fetch_array($result)) {
  $id = $row['event_id'];

mysql_query("UPDATE booking_event SET is_reminded = 1 WHERE event_id = '$id'") or die (mysql_error()); 

} 
```

出于某种原因，它不会使用从数据库中选择的 ID 进行更新 - 我尝试使用 testID 变量并且它工作正常。

任何帮助将不胜感激谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:45:20.857

您可以在一个查询中执行此操作，如下所示：

```
UPDATE booking_event b1
INNER JOIN
(
    SELECT * 
    FROM booking_event 
    WHERE subject != "Closed" 
      AND is_reminded IS NULL 
      AND DATE_ADD(NOW(), INTERVAL 2 DAY) >= starting_date_time 
      AND NOW() <= starting_date_time
) b2
SET t1.is_reminded = 1 WHERE b1.event_id = b2.event_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:47:40.623

PHP 变量区分大小写。很可能您在 MYSQL 中的列名将类似于`Event_Id`或任何其他大小写。Using`SELECT *`将返回实际名称，因此要获取它，您需要`$id = $row['Event_Id']`;

最好确保您没有外壳问题，请使用：

```
SELECT event_id FROM .... 
```

然后`$id = $row['event_id'];`会工作。

# mysql - MAGENTO：如何导出 sku、数量和价格？

> ID：13742876
> 
> 赞同：0
> 
> 时间：2012-12-06T11:42:00.133
> 
> 标签：mysql, magento

我想出口所有产品。我使用此功能获取所有 skus。

```
function _getConnection($type = 'core_read') {
    return Mage::getSingleton('core/resource')->getConnection($type);
}

function _getTableName($tableName) {
    return Mage::getSingleton('core/resource')->getTableName($tableName);
}
function _getSku() {
    $connection = _getConnection('core_read');
    $sql = "SELECT sku
                FROM " . _getTableName('catalog_product_entity') . "";
    return $connection->fetchAll($sql);
}

/* * ************* CREATE FILE CSV ************************* */
$_skus = _getSku();
foreach ($_skus as $_sku) {
    $string = $_sku['sku'] . "\n";
    file_put_contents($file, $string, FILE_APPEND);
} 
```

如何更改查询以便我导出 SKU、QTY 和 PRICE ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T11:58:21.813

```
$productCollection = Mage::getModel('catalog/product')->getCollection()
    ->addAttributeToSelect('price');

foreach($productCollection as $product) {
    $stockItem = Mage::getModel('cataloginventory/stock_item')->loadByProduct($product);
    $string = $product->getSku() . " - " . $product->getPrice() . " - " . $stockItem->getQty()  . "\n";
    file_put_contents($file, $string, FILE_APPEND);
} 
```

# android - 如何使 MultiAutoCompleteTextView 搜索子字符串

> ID：13742878
> 
> 赞同：1
> 
> 时间：2012-12-06T11:42:11.930
> 
> 标签：android, autocompletetextview

如何让我的 MultiAutoCompleteTextView 在每个列表位置的字符串中搜索（也意味着搜索子字符串）。我需要设置任何属性，甚至可能吗？例如，如果列表对象之一是“abc123”，那么是否可以通过键入 123 将其包含在自动完成的建议中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:05:46.943

继续这个链接试试这个，

[http://android-er.blogspot.in/2010/07/example-of-multiautocompletetextview.html](http://android-er.blogspot.in/2010/07/example-of-multiautocompletetextview.html)

> MultiAutoCompleteTextView 是一个可编辑的文本视图，扩展了 AutoCompleteTextView，它可以为用户正在输入的文本的子字符串显示完成建议，而不是整个内容。
> 
> 您必须提供 MultiAutoCompleteTextView.Tokenizer 来区分各种子字符串。

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<TextView  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="@string/hello"
    />
<MultiAutoCompleteTextView android:id="@+id/multiautocompletetextview"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:completionThreshold="1"
 /> 
```

Java主要代码：

```
package com.exercise.AndroidMultiAutoCompleteTextView;

import android.app.Activity;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.MultiAutoCompleteTextView;

public class AndroidMultiAutoCompleteTextView extends Activity {

 MultiAutoCompleteTextView myMultiAutoCompleteTextView;
 String item[]={
   "January", "February", "March", "April",
   "May", "June", "July", "August",
   "September", "October", "November", "December"
 };

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        MultiAutoCompleteTextView myMultiAutoCompleteTextView 
         = (MultiAutoCompleteTextView)findViewById(
           R.id.multiautocompletetextview);

        myMultiAutoCompleteTextView.setAdapter(
          new ArrayAdapter<String>(this, 
            android.R.layout.simple_dropdown_item_1line, item));
        myMultiAutoCompleteTextView.setTokenizer(
          new MultiAutoCompleteTextView.CommaTokenizer());

    }
} 
```

# magento-1.7 - 将权限更改为 magento/var 时 getFrontNameByRoute 的 PHP 致命错误

> ID：13742881
> 
> 赞同：0
> 
> 时间：2012-12-06T11:42:23.027
> 
> 标签：magento-1.7, magento

我正在按照[magento 安装说明进行操作](http://www.magentocommerce.com/knowledge-base/entry/magento-installation-cheat-sheet)

但是当我完成第 3 步并尝试运行该站点时，它给了我以下错误

> PHP 致命错误：在第 199 行的 /vagrant/magento/app/code/core/Mage/Core/Controller/Varien/Front.php 中的非对象上调用成员函数 getFrontNameByRoute()

如果我将 mangeto/var 权限改回 755，则该站点会完美加载，但如果我按照安装过程进行操作，该站点会说

> magento/var 必须是可写的

希望有人已经完成了这个过程来帮助我。

太感谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:03:41.050

我找到了自己问题的答案。

[Magento 安装说明](http://www.magentocommerce.com/knowledge-base/entry/magento-installation-cheat-sheet)要求您执行以下操作，

> chmod o+w var var/.htaccess app/etc

但实际上应该是

> chmod o+w -R var var/.htaccess app/etc

'var' 目录中的内容也必须是可写的，否则会出现此错误。

# windows-services - 服务启动问题，如何正确捕获错误

> ID：13742882
> 
> 赞同：0
> 
> 时间：2012-12-06T11:42:24.660
> 
> 标签：windows-services, reporting, startup

在 2008/2008 R2 中有很多安全设置。文件访问限制甚至事件日志..

我经常看到，当我在本地或我们的开发服务器上编码时，我们的服务运行顺利，但是当将它们转移到生产环境时，我们的服务无法启动，需要花费大量时间来找出问题所在。

因为文件访问甚至事件日志都可以配置为不受限制。在这种情况下应该怎么做？

当您根本没有服务输出时进行故障排除。特别是当您有第三方来安装和维护您的服务时？编写一个应用程序来验证对服务使用的所有资源的访问权限？

因此，可以以不受限制的方式配置以下内容：

EventLog、自定义磁盘日志记录、控制台。

这让我们有什么选择？

听说windows server的下一个版本，w2k14有更严格的安全策略。当您尝试启动安装了它的计算机时，它会在启动时提示您以下内容：“让您的计算机打开了我的伤害。”然后它关闭了；）

Brgds，斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:36:53.537

我怀疑文件系统访问是否可以完全关闭，因此仍应允许写入“公共”资源（例如 C:\ProgramData、C:\Users\Public），在最坏的情况下，您可以创建一个简单的服务查询所有其他服务，实际上，我曾经使用 Linux 上的服务（通过网络套接字）做过一次，这基本上是一个引导服务，允许我在质朴的命令行中控制主要服务。

# apache - Apache 将请求转发到节点网络服务器

> ID：13742890
> 
> 赞同：0
> 
> 时间：2012-12-06T11:42:45.507
> 
> 标签：apache, redirect, url-rewriting

我在 Debian 上运行 apache2 服务器。

文档根目录位于`/var/www/`，我的服务器名为`http://myserver.net`.

我想重定向（或重写）请求以便`http://myserver.net/beta`映射到`http://myserver.net:3000/`，但最终用户仍会`http://myserver.net/beta`在浏览器的地址栏中看到。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T14:39:59.477

你想要一个[代理重写规则](https://httpd.apache.org/docs/2.4/rewrite/proxy.html)，像这样：

```
RewriteRule /beta/(.*) http://localhost:3000/$1 [P] 
```

客户端连接到 Apache，然后 Apache 连接到在端口 3000 上运行的服务，发出请求，并将响应传递回客户端。这里没有客户端重定向；客户端只能看到原始 URL。

# javascript - 如何调试ajax请求错误？

> ID：13742900
> 
> 赞同：9
> 
> 时间：2012-12-06T11:43:10.550
> 
> 标签：javascript, android, jquery, ajax, cordova

我正在尝试获取一个托管在此处的本地服务器中的 JSON，但由于某种原因它不起作用。如果我在浏览器上点击我的 url，它会正确返回 Json，如果我使用另一个 URL，我会得到一些数据。

我原来的 getJson 方法：

获取JSON：

```
$.getJSON(url, 

                    function(data) {
                        console.log('got something'); 
                        alert(data);    

                    }); 
```

现在我想看看到底出了什么问题。我已经将它重写为 Ajax 请求，并且在我的错误回调中 jqxhr 给了我很多我不明白的东西。我可以获得有关此错误的更多详细信息吗？

`TextStatus`值为`"error"`

`errorThrown`是`null`

```
 $.ajax({
                  url: url,
                  dataType: 'json',
                  success:  function(data) {
                        console.log('got something'); 
                        alert(data);    
                        },
                error: function(jqxhr,textStatus,errorThrown)
                    {
                        console.log(jqxhr);
                            console.log(textStatus);
                            console.log(errorThrown);                               

                            for (key in jqxhr)
                                alert(key + ":" + jqxhr[key])                                                                 
                            for (key2 in textStatus)
                                alert(key + ":" + textStatus[key])
                            for (key3 in errorThrown)
                                alert(key + ":" + errorThrown[key])

                   //<--- All those logs/alerts, don't say anything helpful, how can I understand what error is going on? ---->

                }}); 
```

最后，我应该返回的 json 是

```
[{"message": "login failed"}] 
```

而且我不能使用 firebug、chrome 控制台或任何其他开发工具，因为这是一个使用 Phonegap 开发的移动应用程序！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T12:31:52.783

我会将我的评论放入答案表单中，它不是解决您的问题的方法，而是解决 jQuery Ajax 的各种返回问题的好方法。

在这种情况下，当您请求某种数据类型时，`dataType: 'json'`您正在请求一种特定类型的数据。如果未返回该特定数据类型，它将传递给错误函数。

如果您的错误消息未提供可以解释您的问题的信息，请尝试请求更友好的数据类型。这样您就可以看到您的请求实际返回的内容。如果它的数据不是您请求的数据类型，那么这就是您的问题，您可以从那里解决。

dataType like `html`or`text`将非常开放，为您提供从请求的 url 返回的确切数据，您可以从那里解决您的问题。

希望它有一点帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:25:25.663

jqxhr - XrayWrapper
textStatus - 表示 Https 响应状态（例如成功、错误）的文本表示
errorThrown - XMLHttpRequest

jqxhr.status - 给出 200、404、500 等 Http 响应代码。

使用此代码段打印 json 对象中的所有键

```
var output = '';
for (property in object) {
  output += property + ': ' + object[property]+'; ';
}
console.log(output); 
```

# twitter-bootstrap - 如何确保我的 twitter 引导主题适合所有设备？

> ID：13742904
> 
> 赞同：0
> 
> 时间：2012-12-06T11:43:18.403
> 
> 标签：twitter-bootstrap

我正在设计新网站[Jopixels](http://jobpixels.com)为 Twitter Bootstrap 提供免费主题。Bootsrap 为响应式设计提供支持。但是在我的主题中，我需要编写特定于主题的 CSS，以确保它适合所有类型的设备。

我不能购买平板电脑或智能手机来检查我的设计。

确保我的设计在没有真实设备的情况下跨设备兼容的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:02:48.703

它不是特定于引导程序的，但您知道吗

[http://tablet-emulator.org/](http://tablet-emulator.org/)

[http://ipadpeek.com/](http://ipadpeek.com/)

和

[http://www.mobilewebsites4u.com/tester/index.htm](http://www.mobilewebsites4u.com/tester/index.htm)

?? （最后一个对智能手机非常有用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:48:47.213

您也可以重新调整浏览器的大小。Twitter-bootstrap 的响应布局适用于百分比，它没有使用 js 来实现流动性，因此浏览器调整大小可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-12T22:11:42.363

另一种解决方案是访问具有引导主题的“查看演示”的网站。查看源代码并使用他们的代码：

查看底部带有设备选择器菜单的演示：

[Bootstrap 主题演示](https://webthemez.com/preview/?bluesea-corporate-bootstrap-html-website-template#)

现在右键单击并查看源代码（如果使用 Chrome ，则添加**view-source:url ）：**

获取所有 javascript 并为您的网站进行调整。

# jquery - IE8 中的 HighStock 数据线在放大到一个小区间时会消失

> ID：13742907
> 
> 赞同：0
> 
> 时间：2012-12-06T11:43:23.257
> 
> 标签：jquery, internet-explorer-8, highstock

我在 HighStock 图表中遇到了问题。我的 x 轴是日期。如果我将导航器设置为非常窄的范围，则该行会在 IE8 中消失。它在 IE9 和 FF 中运行良好。

```
this.xAxis[0].setExtremes(
                    1321008645000, 1321008655000, null, false, {
                        trigger: 'rangeSelectorInput'
                    }); 
```

在这里看小提琴

[http://jsfiddle.net/adagent007/MJBtG/13/](http://jsfiddle.net/adagent007/MJBtG/13/)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:30:12.740

It is known bug reported here: [https://github.com/highslide-software/highcharts.com/issues/1394](https://github.com/highslide-software/highcharts.com/issues/1394) so I suggest to stay on track with this thread.

# javascript - 如何使用 javascript 而不是 PHP 在服务器上存储交互式 dom 值

> ID：13742908
> 
> 赞同：0
> 
> 时间：2012-12-06T11:43:24.913
> 
> 标签：javascript, ajax, node.js, mongodb

我编写了一个“前端”javascript 应用程序，它具有 JQuery 滑块形式的 DOM 事件。我想将用户输入的滑块值存储在服务器上。简而言之，用户将移动滑块，单击按钮，滑块值将保存在服务器上。

现在我知道使用 PHP 执行此操作的方法是让保存按钮启动一个 php 脚本，该脚本会将信息保存为 MYSQL 数据库中的表以供以后检索。

但是，我想用 Javascript 来完成这一切。

我已经阅读了一些关于 Node.js 和 Mongo DB 的内容，并且模糊地认为这是可能的，但我不清楚。我试图找到以类似于 PHP/MYSQL 的传统用法的方式启动 Javascript（或挂钩到 node.js 或 Mongo DB ????）的 AJAX-ish 代码示例，但我在清除混乱。

这可能吗？有哪些技术可以实现？

# java - SOAP 服务的打包

> ID：13742919
> 
> 赞同：2
> 
> 时间：2012-12-06T11:44:11.963
> 
> 标签：java, web-services, soap, soa, packaging

我使用`WAR`文件格式部署了所有以前的 SOAP 服务。

是否可以将 SOAP 服务打包在`EAR`- 或 -文件中`JAR`？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:48:21.843

EAR 将 WAR、通用 JAR 和 EJB JAR 打包。因此，如果您将服务放入 EAR 中的 WAR 中，它将起作用。其他选项取决于您的发布机制。基本上，如果类在应用程序类路径上，则可以这样发布。班级在哪里并不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T18:40:17.303

当我们使用 jdev 创建我们的 web 服务并编译该服务时，它将自动创建我们必须在 em 控制台上部署的 jar。通过控制台，我们可以检查该服务的实例并检查审计流程。

# sql - SQL合并两个没有唯一键的大数据表

> ID：13742925
> 
> 赞同：0
> 
> 时间：2012-12-06T11:44:52.360
> 
> 标签：sql, sql-server-2012, bigdata

我有以下需要合并的表：

表格1：

> 主键 | sec_key | 旧号码 | 变量1 | 变量2

```
 1      |  A    |    5     | AA | 11
 1      |  B    |    8     | BB | 22 
```

表2：

> 主键 | 新号码 | 变量1 | 变量2

```
 1      |   2       | DD | 44
 1      |   3       | EE | 55
 1      |   7       | FF | 66 
```

我无法修改表（没有插入，因此我不能使用“合并”，只能使用 UNION）。

这两个表都包含大量数据，我需要最有效的方法来合并它们。

*   合并应该根据main_key，对于每个table1.sec_key，
*   如果 table2.new_number < table1.old_number，则将 table1.var1、table1.var2 的值更新为对应的值：table2.var1 和 table2.var2。

此外，应该有一行带有 old_number 的原始 table1 值。

例子：

*   对于第一个 table1.sec_key：它的 old_number 是 5。
*   table2.new_number '2' 小于 5，table2.new_number '3' 也小于 5 但 table2.new_number '7' 大于 5
*   所以输出将包括 old_numbers 和 new_number=2 和 new_number=3 的行：

（其余的 sec_key 和其他 main_key 中的所有其他 sec_key 也是如此。

该示例的预期 output_table ：

```
main_key | sec_key | number | var1 | var2
    1    |    A    |    5   |  AA  |  11
    1    |    A    |    2   |  DD  |  44     
    1    |    A    |    3   |  EE  |  55
    1    |    B    |    8   |  BB  |  22  
    1    |    B    |    2   |  DD  |  44     
    1    |    B    |    3   |  EE  |  55
    1    |    B    |    7   |  FF  |  66 
```

我想过使用 UNION 或加入，但不确定如何执行此操作并为每个 sec_key 保留 table1 中的原始行。

我的问题是 main_key 不是唯一键。我也考虑过使用 CTE，但不确定它在这里是否有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:58:54.207

在我看来，您需要一个 UNION 的数据`table1`加上一个专门的`table1`with连接`table2`：

```
SELECT main_key, sec_key, old_number AS number, var1, var2
  FROM table1
UNION
SELECT t1.main_key, t1.sec_key, t2.new_number AS number, t2.var1, t2.var2
  FROM table1 AS t1
  JOIN table2 AS t2 ON t2.main_key = t1.main_key AND t2.new_number < t1.old_number 
```

在您的测试数据上，它会产生您想要的答案（排序由 控制`ORDER BY main_key, sec_key, number`）：

```
1   A   2   DD   44
1   A   3   EE   55
1   A   5   AA   11
1   B   2   DD   44
1   B   3   EE   55
1   B   7   FF   66
1   B   8   BB   22 
```

如果您真的希望原始行出现在合并行之前，您必须做更多的工作：

```
SELECT u.main_key, u.sec_key, u.number, u.var1, u.var2
  FROM (SELECT 0 AS pseudo_order, main_key, sec_key, old_number AS number, var1, var2
          FROM table1
        UNION
        SELECT 1 AS pseudo_order, t1.main_key, t1.sec_key, t2.new_number AS number,
               t2.var1, t2.var2
          FROM table1 AS t1
          JOIN table2 AS t2 ON t2.main_key = t1.main_key AND t2.new_number < t1.old_number
       ) AS u
 ORDER BY u.pseudo_order, u.main_key, u.sec_key, u.number; 
```

输出：

```
1   A   5   AA   11
1   A   2   DD   44
1   A   3   EE   55
1   B   8   BB   22
1   B   2   DD   44
1   B   3   EE   55
1   B   7   FF   66 
```

# php - 如何在php中获取Web服务器的可用空间？

> ID：13742928
> 
> 赞同：8
> 
> 时间：2012-12-06T11:44:55.527
> 
> 标签：php

我有一个像“mydomain.com”这样的域名。我想在 php 的帮助下检查这个域名的服务器上有多少可用空间。就像我们的硬盘驱动器一样`use disk_total_space("C:");`。任何人都可以帮助我获得解决方案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-06T11:49:18.717

根据文件系统的结构，您可以对 Linux 主机使用如下内容：

```
$df = round(disk_free_space("/var/www") / 1024 / 1024 / 1024);
print("Free space: $df GB"); 
```

或者在你的情况下，听起来你在 Windows 上运行，所以：

```
$df = round(disk_free_space("C:") / 1024 / 1024 / 1024);
print("Free space: $df GB"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T09:10:15.627

用于获取可用空间的主要功能与上述相同。你必须使用`disk_free_space()`. 但不同的是要知道服务器路径。并把它放在大括号里。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T11:48:41.353

使用 php [disk_free_space("/");](http://php.net/manual/en/function.disk-free-space.php)

它返回文件系统或磁盘分区上的可用空间

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-06T11:46:50.183

尝试使用`disk_free_space()`PHP.net 上描述的函数。

[http://php.net/manual/en/function.disk-free-space.php](http://php.net/manual/en/function.disk-free-space.php)

# iphone - iOS 通用开发 - 在 Xib 文件和图像名称中使用波浪号 (~) 进行区分

> ID：13742930
> 
> 赞同：11
> 
> 时间：2012-12-06T11:45:16.747
> 
> 标签：iphone, objective-c, ios, xcode

在开发的过程中`universal apps`，我们必须`conditional code`为每个编写一个`device`-`iPad`以及`iPhone`. 在这种情况下，正确使用`tilde`可能是非常有益的。

例如，如果要推送新的视图控制器，则必须编写很多行（几乎 10 行）代码：

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
{
  MasterViewController *masterViewController = [[MasterViewController alloc] initWithNibName:@”MasterViewController_iphone” bundle:nil];
 [self.navigationController pushViewController:masterViewController animated:YES];
 [masterViewController release];
}
else
{
  MasterViewController *masterViewController = [[MasterViewController alloc] initWithNibName:@”MasterViewController_ipad” bundle:nil];
  [self.navigationController pushViewController:masterViewController animated:YES];
  [masterViewController release];
} 
```

**我们如何区分iphone和ipad的图像？**

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-06T11:45:16.747

**用于区分 iPhone 和 iPad 的 XIB 文件**：

魔法`~`会帮助你。您可以使用它来区分 iPhone 和 iPad 资产/`xib`文件。

您的文件应以`~iphone.xib` or结尾`~ipad.xib`。

**注意：****区分大小写**，请勿使用`iPad`or `iPhone`。

检查每个`xib`文件是否连接了所有出口并设置了正确的文件所有者。如果缺少某些文件，iOS 可能会决定不使用它们，而是使用 iPhone 文件。

**用于区分 iphone 和 ipad 的图像**

特定于平台的修饰符 - 使用修饰符 ~iphone 或 ~ipad 指定针对特定设备尺寸的图像。

官方文档[InfoPlistKeyReference](https://developer.apple.com/library/prerelease/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW28)

# css - 使用数据 URI SVG 作为 CSS 背景图像

> ID：13742934
> 
> 赞同：13
> 
> 时间：2012-12-06T11:45:22.720
> 
> 标签：css, vector, svg, data-uri

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-06T12:14:25.503

See how the working fiddle has double quotes just inside the `url()` and then all the SVG content uses single quotes? You need to do the same. Otherwise the parser doesn't know where the url content ends.

Alternatively you could make the url use single quotes and keep your SVG content the same.

```
body { background-image: url('data:image/svg+xml;utf8,<svg class="shadow" xmlns="http://www.w3.org/2000/svg" version="1.1"><defs><filter id="f1"><feGaussianBlur in="SourceGraphic" stdDeviation="5" /></filter></defs><polygon points="200,0 200,200 0,200" filter="url(%23f1)"/></svg>'); } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-04T12:13:11.047

You can also use a base64 encoding for a cleaner format, even if it increase the actual SVG file size. See also [css-tricks.com post](http://css-tricks.com/probably-dont-base64-svg/).

i.e.:

```
background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIy NCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9 Ik0wIDBoMjR2MjRoLTI0eiIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggZD0iTTEw LjA5IDE1LjU5bDEuNDEgMS40MSA1LTUtNS01LTEuNDEgMS40MSAyLjU4IDIuNTlo LTkuNjd2Mmg5LjY3bC0yLjU4IDIuNTl6bTguOTEtMTIuNTloLTE0Yy0xLjExIDAt MiAuOS0yIDJ2NGgydi00aDE0djE0aC0xNHYtNGgtMnY0YzAgMS4xLjg5IDIgMiAy aDE0YzEuMSAwIDItLjkgMi0ydi0xNGMwLTEuMS0uOS0yLTItMnoiLz4KPC9zdmc+ Cg=='); 
```

You can use this bash command (tested on MacOS X) to easily generate the CSS background property:

```
echo "background: url('data:image/svg+xml;base64,"$(openssl base64 < Downloads/material-design-icons-1.0.0/action/svg/ic_exit_to_app_24px.svg)"');" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-07-19T01:01:29.153

Make sure to use percent-encoding in data URI not encoded with base64.

For example, for an SVG, encode like this:

```
body { 
  background-image: url('data:image/svg+xml;utf8,%3Csvg%20class%3D%22shadow%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%3E%3Cpolygon%20style%3D%22stroke%3A%23252423%3Bfill%3A%23252423%3B%22%20points%3D%220%2C200%200%2C0%20200%2C0%22%2F%3E%3C%2Fsvg%3E'); 
} 
```

This is equivalent to the following SVG:

```
<svg class="shadow" xmlns="http://www.w3.org/2000/svg" version="1.1"><polygon style="stroke:#252423;fill:#252423;" points="0,200 0,0 200,0"/></svg> 
```

To percent encode an image, you can use the following JavaScript code:

```
console.log(encodeURIComponent('<svg class="shadow" xmlns="http://www.w3.org/2000/svg" version="1.1"><polygon style="stroke:#252423;fill:#252423;" points="0,200 0,0 200,0"/></svg>')) 
```

# url - 在 url 中重定向 url

> ID：13742935
> 
> 赞同：1
> 
> 时间：2012-12-06T11:45:22.733
> 
> 标签：url, redirect, history, back

我的网站上有一个外部论坛登录表单，但登录后我希望用户重定向回**访问者在登录前查看的确切网站页面。**

我用的东西：

```
<script>
function goBack()
{
window.history.go(-1)
}
</script>

<form action="./forum/ucp.php?mode=login" method="post">
<fieldset>
<label for="username">Name:</label><br>
<input type="text" name="username" id="username" size="20" class="input"><br>
<label for="password">Password:</label><br>
<input type="password" name="password" id="password" size="20" class="input"><br>
<label for="autologin">Remember<input type="checkbox" name="autologin" id="autologin"></label><br>
<input type="hidden" name="redirect" value="goBack()">
<input type="submit" name="login" value="Log in" class="button">
</fieldset>
</form> 
```

但是，浏览器重定向到：

```
http://www.mysite.com/forum/goBack()?sid=87b53e6ecb0ae9062a3a9b930 
```

我只设法重定向到我网站的索引：

```
value="http://www.wow.com"> 
```

谁来帮帮我:)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:25:42.660

您可以按照以下代码：

```
<?php
//perform your post operations
if(isset($_POST['submit'])){
echo "<pre>";
print_r($_POST);
?>
<script>
window.history.go(-2); // -1 will post on the page from which it has been posted
</script>
<?php
    }
    ?>
    <html>
    <body>
    <form id="myForm" name="myForm" method="post">
    Name: <input type="text" name="name" id="fname">
    Email <input type="text" name="email" id="emailid">
    <input type="submit" name="submit" value="Submit" id="submit">
    </form>
    </body>
    </html> 
```

# php - preg_match_all：匹配自定义标签

> ID：13742937
> 
> 赞同：0
> 
> 时间：2012-12-06T11:45:30.620
> 
> 标签：php, preg-match-all

我目前正在玩一些正则表达式，并希望在我的网站上为文本实现某种自定义标签。例如，如果我想将图片实现为文本，我使用下面的括号标签来做到这一点......</p>

> Lorem ipsum dolor sit amet **（图片：tiger.jpg 宽度：120 高度：200 标题：此图为老虎）** sed diam nonumy eirmod tempor invidunt

现在我希望我的 PHP 脚本 1\. 找到这些括号标签和 2\. 读取这个括号中的单个标签，所以我得到某种数组，比如......</p>

```
$attributes = array(
    'image' => 'tiger.jpg',
    'width' => '150',
    'height' => '250',
    'title' => 'This picture shows a tiger',
); 
```

（对我来说）棘手的部分是“值”可以包含所有内容，只要它不包含类似的东西`(\w+)\:`- 因为这是不同标签的开始。下面的代码片段代表了我到目前为止所拥有的内容——到目前为止，找到括号内容是可行的，但是将括号内容拆分为单个标签实际上并不奏效。我用于`(\w+)`匹配值只是作为占位符 - 这不会匹配“tiger.jpg”或“这张图片显示老虎”或其他内容。我希望你明白我的意思！;)

```
<?php

$text = 'Lorem ipsum dolor sit amet (image: tiger.jpg width: 150 height: 250 title: This picture shows a tiger) sed diam nonumy eirmod tempor invidunt';

// find all tag-groups in brackets
preg_match_all('/\((.*)\)/s', $text, $matches);

// found tags?
if(!empty($matches[0])) {

    // loop through the tags
    foreach($matches[0] as $key => $val) {

        $search = $matches[0][$key]; // this will be replaced later
        $cache = $matches[1][$key]; // this is the tag without brackets

        preg_match_all('/(\w+)\: (\w+)/s', $cache, $list); // find tags in the tag-group (i.e. image, width, …)

        echo '<pre>'.print_r($list, true).'</pre>';

    }

}

?> 
```

如果有人可以帮助我解决这个问题，那就太好了！谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:59:51.840

```
<?

$text = 'Lorem ipsum dolor sit amet (image: tiger.jpg width: 150 height: 250 title: This picture shows a tiger) sed diam nonumy eirmod tempor invidunt';

// find all tag-groups in brackets
preg_match_all('/\(([^\)]+)\)/s', $text, $matches);
$attributes = array();

// found tags?
if ($matches[0]) {
    $m = preg_split('/\s*(\w+)\:\s+/', $matches[1][0], -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE);
    for ($i = 0; $i < count($m); $i+=2) $attributes[$m[$i]] = $m[$i + 1];
}

var_export($attributes);

/*
array (
  'image' => 'tiger.jpg',
  'width' => '150',
  'height' => '250',
  'title' => 'This picture shows a tiger',
)
*/ 
```

# html - CSS悬停，无法更改链接颜色

> ID：13742939
> 
> 赞同：-3
> 
> 时间：2012-12-06T11:45:45.617
> 
> 标签：html, css, hover

我环顾了许多其他答案，尝试过但惨遭失败。

当悬停变为粉红色时，我试图将页眉和页脚中的字体颜色保持为白色...所以悬停效果很好，但我无法让字体颜色在页眉或页脚中保持白色。

还有其他链接也悬停粉红色，但字体保持黑色，这是我想要的。

这可能是一个简单的解决方法，但我仍在学习:)

网站：[http ://www.growinhealth.org.uk](http://www.growinhealth.org.uk)

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:47:55.693

消除：

```
#header .a:hover{
    color:#d80073
} 
```

...并添加以下内容：

```
#footer a:hover, #header a:hover  {
    color: #FFFFFF;
} 
```

此外，您的 HTML 标记格式不正确。看看： http: [//validator.w3.org/check ?verbose=1&uri=http%3A%2F%2Fwww.growinhealth.org.uk%2F](http://validator.w3.org/check?verbose=1&uri=http%3A%2F%2Fwww.growinhealth.org.uk%2F)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:49:24.193

a:hover { color: #D80073;} 在 style.css @ 239 行号使鼠标悬停颜色变为粉红色

添加以下CSS

```
#header a:hover,#footer a:hover{color:#fff} 
```

这不会将页脚链接更改为白色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:49:56.257

您的链接如下所示：

```
<a target="_blank" href:="http://www.altonhousehotel.com"><u>www.altonhousehotel.com </u></a> 
```

但它们应该是这样的：

```
<a target="_blank" href="http://www.altonhousehotel.com"><u>www.altonhousehotel.com</u></a> 
```

你的href链接中有一个不应该存在的冒号。这将导致链接像文本一样呈现。

此外，在您的 css 文件中，您有以下内容：

```
#header .a:link {
    color: white;
} 
```

您想将其更改为：

```
#header a:link {
    color: white;
} 
```

点表示您针对名为的类`a`（您没有任何类）。如果没有点，您将定位元素`a`。

# asp.net-mvc - 在多个 Razor 视图中实现通用功能

> ID：13742941
> 
> 赞同：0
> 
> 时间：2012-12-06T11:45:51.810
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-views

在视图中，我有一个 Razor 代码，例如

```
@Code

    Dim x As String = "MyTest"

End Code 
```

但是，如何在不将其复制/粘贴到所有视图中的情况下与其他视图共享该代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:58:36.303

您可以创建局部视图，然后使用以下代码在其他页面上呈现局部视图：

```
@Html.RenderPartial("Path to partial view") 
```

您还可以通过包含第二个参数将模型传递给强类型分部视图：

```
@Html.RenderPartial("Path to partial view", myModel) 
```

# java - 使用 JSF (Primefaces) 处理 ajax 请求

> ID：13742945
> 
> 赞同：0
> 
> 时间：2012-12-06T11:46:13.067
> 
> 标签：java, ajax, jsf, primefaces

我有这个代码：

```
<p:selectBooleanCheckbox id="locationChoice1" value="#{login.locationChoice1}">
    <p:ajax listener="#{login.chooseLocationType1}" update="locationChoice1 locationChoice2 positionChoice" />          
</p:selectBooleanCheckbox> 
```

我想`selectOneMenu`在且仅当`selectBooleanCheckbox`检查时才启动组件的调查式更新。我想通过 ajax 请求更新它。

总而言之，我想在 ajax 请求之间链接操作。当我上面的 ajax 请求完成后，我想根据`selectBooleanCheckbox`布尔值启动另一个条件 ajax 请求。

请问我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:58:58.553

好吧，由于 JSF 中原生元素的条件状态，我从未见过发送（或不发送）ajax 蜜蜂

我会实现你想要在我的 selectBoolean 中添加一个 ajax

```
<p:ajax event="change" listener="#{login.chooseLocationType1()}" update="element"/> 
```

然后在方法 chooseLocationType1 中，您已经可以处理复选框的条件。

如果您真的想发送或不发送帖子，您可以做的一件事是使用 javascript 处理它。如果您在 p:ajax 中添加**oncomplete=""**您可以在 javascript 中调用一个方法并测试您的复选框是否被选中，然后使用 jquery 或 js 发布帖子

# php - 如何使用 joomla 生成的模板？

> ID：13742947
> 
> 赞同：0
> 
> 时间：2012-12-06T11:46:16.070
> 
> 标签：php, mysql, joomla, dreamweaver, wampserver

我将使用 joomla、mysql、php、wampserver、dreamweaver 开发一个网站

我所有的工具都准备好了（安装），我将在 localhost 上运行网站。

我已经使用 joomla 选择了一个模板，现在在这个阶段我想更改模板以适应我的网站，所以我选择了 Dreamweaver 来管理我的页面（添加我自己的徽标和表单......）。

但我现在不知道该怎么办。

我试过的：

使用以下参数从 dreamweaver 创建一个新网站：

名称：测试

网址：`http://localhost`

技术：php/mysql

文件：C:\wamp\www\test\

现在我想使用从我的网站中选择的模板（复制并粘贴网站的目录不起作用）

如何使用已创建网站的模板？我还能从 joomla 管理员那里管理名为 test 的网站吗？

更新

我已经按照这个链接安装了模板：[http ://www.siteground.com/tutorials/joomla15/joomla_templates.htm](http://www.siteground.com/tutorials/joomla15/joomla_templates.htm)

我找到了一个允许我添加表单的组件： http: [//extensions.joomla.org/extensions/contacts-and-feedback/forms/4939](http://extensions.joomla.org/extensions/contacts-and-feedback/forms/4939)

但仍然不知道如何修改模板添加徽标例如

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:07:26.637

首先，卸载 Dreamweaver，再也不关注它。

你所需要的只是 wamp 和一个 Joomla 包。

**更新：**

如果您使用 Firebug 或 Chrome 开发工具并检查该元素，您将看到以下代码位于第 156 行的**template.css中：**

```
#logo {
    float: left;
    height: 22px;
    overflow: hidden;
    padding: 12px 14px 0;
    width: 320px;
} 
```

要添加您选择的徽标，您可以添加如下内容：

```
background: url(http://joomla15.siteground.com/FaceBook.png) no-repeat; 
```

所以你的最终代码将如下所示：

```
#logo {
    float: left;
    height: 22px;
    overflow: hidden;
    padding: 12px 14px 0;
    width: 320px;
    background: url(http://joomla15.siteground.com/FaceBook.png) no-repeat;
} 
```

如果您愿意，您显然可以更改高度并添加额外的位。

希望这可以帮助。

# php - 处理 6K 记录时出现浏览器问题

> ID：13742948
> 
> 赞同：1
> 
> 时间：2012-12-06T11:46:22.123
> 
> 标签：php, mysql, browser

我有一个问题。我正在访问一个数据迁移应用程序，我正在使用 PHP 将 6K 记录从 CSV 文件传输到 Mysql 数据库。服务器（Ubuntu）位于不同的位置。我注意到的是，在我的本地主机环境中它工作正常。（有 3 个不同的脚本用于验证、插入和更新）但是当我使用服务器应用程序从 Mozilla 浏览器上传相同的文件时，第一个脚本执行了两次然后它显示“连接已重置”但是当我使用 Chrome 浏览器时它工作正常。最初我分析了它无法在特定时间间隔内向浏览器返回任何值的原因 s 为什么浏览器会发送另一个请求，为此我在脚本之间放置了空白的 echo 语句，但即使它在 Mozilla Firefox 中不起作用。我正在使用最新版本的 Firefox。我想在后端添加的另一件事是数据库查询正在执行。我使用了设置时间限制并忽略用户中止。请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:39:39.410

抱歉回复晚了，我很久以前就找到了解决方案。我正在使用系统调用调用下一页（我需要执行），同时将当前页面引用到主页，通过这种方式，实际处理发生在后端，它不会产生与浏览器请求相关的任何问题。在较早的情况下，我只是通过 php 执行复杂的 mysql 代码，而浏览器没有得到任何输出，这就是它在某个时间点后触发多个请求的原因。

# javascript - javascript：这个变量和回调

> ID：13742951
> 
> 赞同：3
> 
> 时间：2012-12-06T11:46:35.943
> 
> 标签：javascript

考虑以下代码

```
Class.prototype.init = function() {
    var self = this;
    var onComplete = function() {
        self.a.doSomethingElse(self._go);
    };

    console.log(this); //prints Object {...}
    this.a.doSomething(onComplete); //onComplete is called inside a
};

Controller.prototype._go = function(map) {
    console.log(this); //prints 'Window'
}; 
```

问题是为什么`this`等于`window`内部`_go`函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T11:56:51.937

通过调用属性来绑定对象只适用于直接调用它。当只是访问该属性并稍后调用它（例如通过将其传递给回调）时，不会保留对象绑定。

行为归结为以下几点：

```
var a = {
  b: function() {
    console.log(this);
  }
};

a.b(); // logs a, because called directly

var func = a.b;
func(); // logs window, because not called directly 
```

在您的情况下，您也可以通过`Controller.prototype._go`，因为它指的是相同的功能。解决方法是使用`self._go.bind(self)`保持绑定。

# php - 使用php插入并读取txt文件

> ID：13742958
> 
> 赞同：0
> 
> 时间：2012-12-06T11:46:53.387
> 
> 标签：php

我使用 html 创建了一个表单，其中包含一个文本框和一个密码框。

我希望当我单击提交按钮以将用户和他输入页面的日期保存在文本文件中时，然后在操作页面中将显示 txt 文件，如果有回车，它将在动作页面。

这是我在操作页面中尝试的代码：

```
<?php

$mdpx = "BTS12";
$loginx = "BTS";

$login = $_POST['nom'];
$mdp = $_POST['psw'];
if(!empty($login) AND !empty($mdp))
{
    if($mdp  == $mdpx AND $login == $loginx)
    {
        $fichier = "monfichier.txt";
        $fp = fopen($fichier, "a+");
        flock($fp,LOCK_EX);
        $text .= 'Nom: '.$login."\r\n".'La date: '.date("d M Y : H i s",strtotime("now"))."\r\n".'****************************'."\r\n";
        fputs($fp, $text);
        flock($fp,LOCK_UN);
        fclose($fp);

        $fp = fopen($fichier,"r");
        flock($fp,LOCK_SH);
        while(!feof($fp))
        {
            $char = fgetc($fp);
            echo ($char == '\r\n') ? '<br/>' : $char;
        }
        flock($fp,LOCK_UN);
        fclose($fp);
    }
    else
        print 'Le nom d\'utilisateur ou bien le mot de passe est incorrect <br/> Cliquer <a href="index.php">ici</a> pour revounir a la page d\'acceuil';
}
else
    print 'Veuillez remplir tous les champs <br/> Cliquer <a href="index.php">ici</a> pour revounir a la page d\'acceuil';
?> 
```

**但问题是操作页面不执行回车。**

我也尝试了 readfile() 方法，但没有奏效！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:54:10.040

`<pre>`在元素中输出文件：

```
echo '<pre>';
readfile($fichier);
echo '</pre>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:09:14.663

尝试使用

```
$char == '\r\n' 
```

这将是工作

# c# - MS SQL nvarchar id 字段包含空格

> ID：13742963
> 
> 赞同：1
> 
> 时间：2012-12-06T11:47:02.727
> 
> 标签：c#, sql, sql-server, database

我正在开发一个从 MS SQL Server 2008 或 2008 R2 服务器读取值的 C# 项目。

查询看起来像这样：

```
string charge="1234567";
string command = string.Format("SELECT * FROM tableX WHERE chargeField = '{0}' ", charge); 
```

chargeField 来自 nvarchar(50) 类型 - 不要问我为什么 - 我无法更改数据库。此外，这些条目是由另一个我也无法更改的工具写入数据库的。有时，chargeField 值中会有前导或结束空格字符，所以我的查询不会返回任何内容，因为 "1234567" != " 1234567 "

但是，当我编写这样的查询时（没有''）：

```
string command = string.Format("SELECT * FROM tableX WHERE chargeField = {0} ", charge); 
```

有用。为什么这甚至可以工作-不需要''符号来指示数据库字段是字符串？我可以安全地更改所有查询吗？这是来自 MS SQL Server 的“功能”吗？这里到底发生了什么。

**编辑**

我通过使用解决了这个问题：

```
string command = string.Format("SELECT * FROM tableX WHERE RTRIM(LTRIM(chargeField)) = {0} ", charge); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:49:21.743

SQL Server 尝试相应地转换字段。如果没有引号，您将传入一个数字，因此 SQL Server 会尝试将值转换`chargeField`为数字，尽管有前导空格，这仍然有效。

`chargeField`如果包含 value ，这将不起作用`12345a`。这将导致转换错误。表中的一条记录包含这样的值就足以得到错误。

为了安全起见，请将您的查询更改为

```
... WHERE LTRIM(chargeField) = '{0}' 
```

但请注意，这会导致字段上的可能索引不再被使用。您仍然可以做的是创建一个额外的列，该列使用值为 的触发器填充`LTRIM(chargeField)`，在该列上放置一个索引并`WHERE`相应地调整您的子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:50:53.463

[数据类型优先](http://msdn.microsoft.com/en-us/library/ms190309.aspx)规则：

> 当运算符组合不同数据类型的两个表达式时，数据类型优先级规则指定将具有较低优先级的数据类型转换为具有较高优先级的数据类型

Numeric/int 优先级高于 nvarchar，因此查询相当于：

```
SELECT * FROM tableX WHERE CAST(chargeField as INT) = {0} 
```

请注意，这样的查询不能在`chargeField`.

# php - 在 PHP 中使用 XSLT 转换 XML

> ID：13742972
> 
> 赞同：11
> 
> 时间：2012-12-06T11:47:41.853
> 
> 标签：php, xml, xslt

我正在尝试组合两个 xml 文件并使用 XSLT 文件将它们转换为 XHTML 页面。我以前没有这样做过，也不知道该怎么做。到目前为止，这就是我所拥有的，只有一个 xml 文件：

```
<?php

$xsl = new DOMDocument();
$xsl->load("file.xsl");
$inputdom = new DomDocument();
$inputdom->load("file.xml");

$proc = new XSLTProcessor();
$xsl = $proc->importStylesheet($xsl);
$proc->setParameter(null, "", "");

$newdom = $proc->transformToDoc($inputdom);
print $newdom-> saveXML(); 
```

带有 :ss 命名空间的 xsl 文件。我不太确定如何使用 ss 前缀？

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet">

<xsl:template match="/">
  <html>
  <body>

  <table border="1">
    <tr bgcolor="#9acd32">
      <th>Title</th>
      <th>Title2</th>
    </tr>
    <xsl:for-each select="something/some">
    <tr>
      <td><xsl:value-of select="title"/></td>
      <td><xsl:value-of select="title2"/></td>
    </tr>
   </xsl:for-each>
  </table>
  </body>
  </html>
</xsl:template> 
```

xml 文件

```
<?xml version="1.0" encoding="iso-8859-1"?>
<?xml-stylesheet type="text/xsl" href="file.xsl"?>
<something>
  <some>
    <Firstname>Peter</Firstname>
    <Lastname>Anderson</Lastname>
  <some>
..... 
```

如果有人能给我一个正确的方向，我将不胜感激。

这是第二个 xml 文件：

```
<?xml version="1.0"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:x="urn:schemas-microsoft-com:office:excel"
 xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:html="http://www.w3.org/TR/REC-html40">
 <DocumentProperties xmlns="urn:schemas-microsoft-com:office:office">
  <Created>2012-09-25T13:44:01Z</Created>
  </DocumentProperties>
 <OfficeDocumentSettings xmlns="urn:schemas-microsoft-com:office:office">
  <AllowPNG/>
 </OfficeDocumentSettings>
 <ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel">
  <WindowHeight>14060</WindowHeight>
  <WindowWidth>25040</WindowWidth>
  <WindowTopX>25540</WindowTopX>
  <WindowTopY>4100</WindowTopY>
  <Date1904/>
  <ProtectStructure>False</ProtectStructure>
  <ProtectWindows>False</ProtectWindows>
 </ExcelWorkbook>
 <Styles>
  <Style ss:ID="Default" ss:Name="Normal">
   <Alignment ss:Vertical="Bottom"/>
   <Borders/>
   <Font ss:FontName="Calibri" x:Family="Swiss" ss:Size="12" ss:Color="#000000"/>
   <Interior/>
   <NumberFormat/>
   <Protection/>
  </Style>
  <Style ss:ID="s62">
   <Font ss:FontName="Courier" ss:Color="#000000"/>
  </Style>
 </Styles>
 <Worksheet ss:Name="Workbook1.csv">
  <Table ss:ExpandedColumnCount="5" ss:ExpandedRowCount="79" x:FullColumns="1"
   x:FullRows="1" ss:DefaultColumnWidth="65" ss:DefaultRowHeight="15">
   <Column ss:Index="2" ss:AutoFitWidth="0" ss:Width="43"/>
   <Column ss:AutoFitWidth="0" ss:Width="113"/>
   <Column ss:Index="5" ss:AutoFitWidth="0" ss:Width="220"/>
   <Row ss:Index="6">
    <Cell ss:Index="3" ss:StyleID="s62"/>
   </Row>
   <Row>
    <Cell ss:Index="3" ss:StyleID="s62"/>
   </Row>
    <Row>
    <Cell ss:Index="3" ss:StyleID="s62"/>
   </Row>
   <Row>
    <Cell ss:Index="2"><Data ss:Type="String">id</Data></Cell>
    <Cell ss:StyleID="s62"><Data ss:Type="String">latitude</Data></Cell>
    <Cell><Data ss:Type="String">longitude</Data></Cell>
   </Row>
   <Row>
    <Cell ss:Index="2"><Data ss:Type="Number">8</Data></Cell>
    <Cell ss:StyleID="s62"><Data ss:Type="Number">57.4999</Data></Cell>
    <Cell><Data ss:Type="Number">15.8280</Data></Cell>
   </Row>
..... 
```

所以我的问题是如何将两个 XML 文件中的数据与 XSLT 结合起来？我希望结果是 XHTML 页面上表中的数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T18:18:02.223

这可能是您部分问题的答案。

关于使用两个 XML 文件，您有几个选择。您可以将这两个 XML 文件合并为一个较大的文件，然后对其应用转换。或者，您可以使用 XSLT`document()`函数从 XSLT 中加载其中一个 XML 文件。

**1.制作一个大的XML文档**

```
<?php

// XML
$x1 = file_get_contents("file1.xml");
$x2 = file_get_contents("file2.xml");
$xml_doc = new DOMDocument();
$xml_doc->loadXML("<root><x1>$x1</x1><x2>$x2</x2></root>");

// XSL
$xsl_doc = new DOMDocument();
$xsl_doc->load("file.xsl");

// Proc
$proc = new XSLTProcessor();
$proc->importStylesheet($xsl_doc);
$newdom = $proc->transformToDoc($xml_doc);

print $newdom->saveXML();

?> 
```

**2.使用XSTL`document()`函数**

```
<?php

// XML
$xml_doc = new DOMDocument();
$xml_doc->load("file1.xml");

// XSL
$xsl_doc = new DOMDocument();
$xsl_doc->load("file.xsl");

// Proc
$proc = new XSLTProcessor();
$proc->importStylesheet($xsl_doc);
$newdom = $proc->transformToDoc($xml_doc);

print $newdom->saveXML();

?>

<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:variable name="file2" select="document('file2.xml')/*"/>

  <xsl:template match="/">
    <xsl:copy-of select="$file2"/>
  </xsl:template>

</xsl:transform> 
```

我倾向于使用第一种技术而不是第二种。我不喜欢将文件名硬编码到 XSLT 模板中。当我确实使用第二种方法时，我通常会将文件名作为外部参数传递，以避免在 XSLT 中对其进行硬编码。

# c# - 写入文本文件并同时打开

> ID：13742975
> 
> 赞同：-6
> 
> 时间：2012-12-06T11:47:47.580
> 
> 标签：c#, winforms

我需要在按钮的单击事件上从文本框中写入文本文件

写完后我需要打开同一个文件

写入时不需要保存该文件。

谁能提供示例代码？

**编辑**

其实你误会我的意思，我需要创建临时文件，而不是已经存在的文件..需要创建，写入，同时它会打开读取..有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:13:30.727

这是你想要的？

```
FileStream currentFileStream = null;//EDIT
string tempFilePath = Directory.GetCurrentDirectory() + "\\TEMP.txt";

if (!File.Exists(tempFilePath))
{
    currentFileStream = File.Create(tempFilePath);//creates temp text file
    currentFileStream.Close();//frees the file for editing/reading
}//if file does not already exist

File.WriteAllText(tempFilePath, textbox1.Text);//overwrites all text in temp file

//Inside your exit function:
if(File.Exists(tempFilePath)) File.Delete(tempFilePath);//delete temp file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:49:51.820

StreamWriter 写入文本文件。它可以实现简单高效的文本输出。最好将其放在 using 语句中，以确保在不再需要时将其从内存中删除。它提供了几个构造函数和许多方法。

[点击这里](http://www.dotnetperls.com/streamwriter)

Process.Start（文件）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:52:29.413

再次打开文件后需要做什么？

简单地说，您可以将文本写入文件

```
System.IO.File.WriteAllText("path",textbox1.Text); 
```

您可以使用以下命令打开文件：

```
system.IO.File.Open() // and the other variants .OpenText, OpenWrite 
```

# nuget - 创建 nuget 包时参考 nuspec 文件

> ID：13742980
> 
> 赞同：1
> 
> 时间：2012-12-06T11:47:58.327
> 
> 标签：nuget, nuget-package

我正在为我的类库创建一个 nuget 包。我想为多个项目共享一个 nuspec 文件。我在中心位置有 nuspec 文件。为类库创建包时是否可以引用它？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-20T07:24:29.667

开箱即用的做法可能行不通。检查[http://kamranicus.com/Blog/Posts/32/using-nuspec-inheritance-to-reduce-nuget-maintenan](http://kamranicus.com/Blog/Posts/32/using-nuspec-inheritance-to-reduce-nuget-maintenan)。

# wpf - 再次按 Alt 时禁用 Alt 键快捷键

> ID：13742985
> 
> 赞同：2
> 
> 时间：2012-12-06T11:48:10.390
> 
> 标签：wpf, xaml, button, keyboard-shortcuts

我有一个应用`ALT`快捷键的按钮：

```
<Button Click="Button_Click" Width="50" Height="50">_Hello</Button> 
```

现在，如果我按下`ALT`键下划线正在显示，但`ALT`再次按下不会消失下划线。这可以在不使用事件的情况下在 XAML 中完成吗？

# javascript - 字符串数组的连接

> ID：13742986
> 
> 赞同：0
> 
> 时间：2012-12-06T11:48:17.550
> 
> 标签：javascript, regex, string, split

我有以下内容，我正在动态创建一个链接，我被拆分的串联所困扰。

```
link = "<li><span id='number'>" + link.split(" ")[0] + ".</span>" // Adding a "peroid" character after the reason number and make it bold 
        + "<a href='#" + reasonTitle + "' " // Open link tag off adding href with relevant reference
        + "onclick=\"_gaq.push([\'_trackEvent\', \'" + experimentConversionReference + "\', \'ReasonClicked\', \'" + reasonTitleSpaces + "\'])\;\">" // Adding event tracking for google
        + link.split(/\d/)[1] // Add back on the back end of the split string
        + "</a>" // Close link tag off
        + "</li>"; 
```

更具体地说`line 4`，我想从上面抓取并打印数组中的所有内容，`[1]`我该怎么做？

我不想做的是

```
link.split(/\d/)[1] + link.split(/\d/)[2]  + link.split(/\d/)[3]  + link.split(/\d/)[] 
```

等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:52:11.483

用这个：

```
link.split(/\d/).slice(1).join('') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:51:08.367

拆分和加入，不包括第一项：

```
var joined  = link.split(/\d/);
joined .shift(); // remove first item
joined .join(''); // join the array 
```

然后像这样使用它：

```
link = "<li><span id='number'>" + link.split(" ")[0] + ".</span>" // Adding a "peroid" character after the reason number and make it bold 
        + "<a href='#" + reasonTitle + "' " // Open link tag off adding href with relevant reference
        + "onclick=\"_gaq.push([\'_trackEvent\', \'" + experimentConversionReference + "\', \'ReasonClicked\', \'" + reasonTitleSpaces + "\'])\;\">" // Adding event tracking for google
        + joined // Add back on the back end of the split string
        + "</a>" // Close link tag off
        + "</li>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T11:55:40.800

不需要拆分，只需获取空格后面的字符串部分即可：

```
link.substr(link.indexOf(" ") + 1); 
```

# linux - 如何在 shell 脚本中编写用户定义的选项？

> ID：13742988
> 
> 赞同：1
> 
> 时间：2012-12-06T11:48:26.253
> 
> 标签：linux, shell

> **可能重复：**
> [在 bash shell 脚本中使用 getopts 来获取长短命令行选项](https://stackoverflow.com/questions/402377/using-getopts-in-bash-shell-script-to-get-long-and-short-command-line-options)

这是我写的代码

```
#! /bin/bash

getopts master $1

while getopts ":master" opt; do
  case $opt in
    master)
      echo "-master was triggered! $1 was entered" >&2
      ;;
    \?)
      echo "Invalid option: -$OPTARG" >&2
      ;;
  esac
done 
```

这是我得到的输出-

```
]$ ./test123.sh -master 123
./test123.sh: line 3: getopts: `-master': not a valid identifier 
```

如何定义用户定义的选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:55:52.967

我认为有几个问题。

1.  我不明白这个 ( `getopts master $1`) 在做什么，你可以删除它
2.  我认为您需要单个字符参数（即-m vs -master）

例如以下似乎工作：

```
#!/bin/bash
while getopts ":m" opt; do
  case $opt in
    m)
      echo "-m was triggered! $1 was entered" >&2
      ;;
    \?)
      echo "Invalid option: -$OPTARG" >&2
      ;;
  esac
done 
```

# javascript - 使用 CSS 类或 JS 在 Foundation 中切换移动视图

> ID：13742991
> 
> 赞同：2
> 
> 时间：2012-12-06T11:48:31.063
> 
> 标签：javascript, html, css, media-queries, zurb-foundation

我正在尝试切换基础框架的移动视图。

我在文件中找到了css的相关部分`foundation.css`......

```
@media only screen and (max-width: 767px) {
  body { -webkit-text-size-adjust: none; -ms-text-size-adjust: none; width: 100%; min-width: 0; margin-left: 0; margin-right: 0; padding-left: 0; padding-right: 0; }
  .row { width: auto; min-width: 0; margin-left: 0; margin-right: 0; }
  .column, .columns { width: auto !important; float: none; }

... more code here ...

  .push-three-mobile { left: 75%; }
  .pull-three-mobile { right: 75%; }
} 
```

然后我将内容复制出来，在每个选择器（包括逗号后的选择器 - 不在行首）前面加上一个新类（我称为`slim`）。

```
.slim body { -webkit-text-size-adjust: none; -ms-text-size-adjust: none; width: 100%; min-width: 0; margin-left: 0; margin-right: 0; padding-left: 0; padding-right: 0; }
.slim .row { width: auto; min-width: 0; margin-left: 0; margin-right: 0; }
.slim .column, .slim .columns { width: auto !important; float: none; }

... more code here ...

.slim .push-three-mobile { left: 75%; }
.slim .pull-three-mobile { right: 75%; } 
```

我现在可以通过向标签添加或删除`slim`类来切换移动视图。`html`这正是我想要做的 - 我喜欢它与 css（设置服务器端）或 javascript（因此可以通过任何触发器切换客户端）一起使用。

但是，我讨厌我不得不复制所有内容。有没有办法可以使这项工作不重复？

例如，是否可以使用 javascript 更改`@media`选择器，或者使`@media`容器**或** `.slim`容器应用包含的样式？

有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T12:10:40.960

查看 Foundation 提供的 scss，您可以使用 grid-column mixin 作为编译后的 css 的一部分。

下面是来自 _grid.scss 的一个片段，但是不是将 包含`@include`在媒体查询中，您只需将其与您的`.slim`类一起包装。

```
// For creating columns - @include these inside a media query to control small vs. large grid layouts
@mixin grid-column($columns:false, $last-column:false, $center:false, $offset:false, $push:false, $pull:false, $collapse:false, $float:true) 
```

[链接到 github 上的 Grid.scss](https://github.com/zurb/foundation/blob/master/scss/foundation/components/_grid.scss)

# sql-server - SQL Server 2008 Management Studio 打开文件对话框没有响应

> ID：13742995
> 
> 赞同：4
> 
> 时间：2012-12-06T11:49:07.047
> 
> 标签：sql-server, sql-server-2008, windows-7-x64

我在 SQL Server Management Studio 中打开文件时遇到问题。

我可以很好地连接到本地数据库（SQL Server std.2008 R2），但是当我执行“文件”>“打开”>“打开文件”时，对话框会一直挂起，直到它显示“无响应”。

它最终会连接，但会挂起 20-30 秒以在本地网络上的每个文件夹之间导航。

我在使用 Windows 资源管理器或 Visual Studio 2012 导航相同的文件夹时**没有**同样的问题。似乎这只发生在 SQL Server Management Studio 中。

我试图找到一个线程来找到解决方案，但我找到的唯一线程已经删除了解决方案的链接！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T11:56:03.013

如果您有任何网络共享，请将其删除并尝试。

可能，打开文件对话框卡在映射驱动器之一？

另外，请检查[https://dba.stackexchange.com/questions/20725/sql-server-management-studio-slow-opening-new-windows](https://dba.stackexchange.com/questions/20725/sql-server-management-studio-slow-opening-new-windows)

希望有帮助。PS：你安装了最新的SP吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:37:21.543

我正在运行 Windows 7 和 SSMS 2008，并且也遇到了这个非常令人沮丧的问题，但仅限于 SSMS。我尝试打开每个映射的驱动器，并断开任何路径无效的驱动器。没有更多的问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T19:11:23.997

我遇到了这个问题，我确实有网络共享。我将 SQL Server 2008 R2 升级到 Service Pack 2。现在问题已经解决了。我不必碰我的网络共享。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-12T10:44:24.710

我遇到了同样的问题，每次我单击打开 sql 文件的文件对话框时，ssms 都会挂起并需要 30-40 秒才能响应。我在 64 位 Windows 7 上卸载了 SQL Server 2005 32 位并安装了 64 位 SQL Server，但问题没有解决。我发现有一个未映射的网络驱动器，我删除了未映射的驱动器，问题立即解决。我很惊讶未映射的驱动器会导致 sql server 工具性能出现问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-03T15:23:12.640

我有一个非常简单的解决方案：

1.  使用任务管理器关闭 SSMS。
2.  再次打开 SSMS。
3.  解决方案：
    *   托盘从任何数据库生成脚本（仅托盘，直到出现打开文件对话框）。
    *   关闭打开文件对话框。
    *   问题已经解决了。
    *   现在您可以使用“打开文件对话框”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-23T08:16:45.127

SQL Server 2014sp1 没有显示“文件浏览器”对话框，我遇到了同样的问题。在 VM 的 Hyper-V 管理器中卸载 SQL Server 安装介质解决了该问题。

# windows - windows 8 关机过程与 Vista 不同？

> ID：13742996
> 
> 赞同：2
> 
> 时间：2012-12-06T11:49:10.000
> 
> 标签：windows, winapi, windows-8, shutdown

我的应用程序应该在关机时执行 smth，我的意思是 - 当用户按下关机时，应用程序阻止关机，并做一些事情。我们通过处理 WM_QUERYENDSESSION 和 WM_ENDSESSION 来做到这一点。该工作在 WM_ENDSESSION 处理程序中完成。这在 Windows 7、XP 中完美运行。

问题如下 - 在 Windows 8 上，关机过程在大约 1 分钟后被取消 - 关机 UI 显示一段时间，带有我的原因字符串，然后系统进入启动屏幕。没有关机，什么也没有发生。我的应用程序仍在运行。起初我认为问题出在我们的应用程序中，但**似乎系统对所有应用程序都以这种方式运行，而不仅仅是我们的应用程序。**您可以自己检查，只需运行一些您知道会阻止关机的应用程序，然后执行关机（或注销）。您将看到关闭 UI，告诉您哪些应用程序正在阻止关闭。稍等一下，大约 60-90 秒后它就会消失 - 关机将被取消。

所以我想知道MS是否在Windows 8的关机过程中改变了一些东西？

**编辑：**我不能在这里发布实际代码，所以我会发布一个伪代码，以说明要点：

```
LRESULT CMainFrame::OnQueryEndSession(UINT, WPARAM , LPARAM lParam, BOOL& bHandled) {
    m_bQueryEndSession = true;      
    bHandled = true;
    return TRUE;
}

LRESULT CMainFrame::OnEndSession(UINT, WPARAM wParam, LPARAM lParam, BOOL& bHandled) {
    BOOL bEnding = (BOOL)wParam;

    if(!bEnding)
        return 0;

    if(m_bQueryEndSession && /*and some other checks*/ ) 
    {

        if (g_osver.dwMajorVersion >= 6) { 
            // of Vista and higher load User32.dll and call ShutdownBlockReasonCreate() here
        }

        {
            // all important job is done here
            // zzz
        }

        if (g_osver.dwMajorVersion >= 6) { 
            // of Vista and higher load User32.dll and call ShutdownBlockDestroy() here
        }
    }

    bHandled = true;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:42:53.670

Vram 您可以使用 VS2012 中包含的新调试过程，请参阅链接：[VS 2012 中的调试功能](http://blogs.msdn.com/b/visualstudio/archive/2012/08/23/new-visual-studio-2012-debugging-features-for-the-windows-8-app-lifecycle-model.aspx)。由于 Windows 8 以不同的方式强制执行状态，因此这些调试工具可能会帮助您检测到问题。希望这对你来说不是新闻。

如果您可以发布一个演示您正在调试的问题的代码示例，那就更容易了。

在我的研究过程中，我也使用了这个链接，但可能不是很有用：[WM_ENDSESSION](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376889%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T01:27:11.450

是的，关机逻辑已更改，但在 Windows 8 中未更改。在 Vista 中已更改，更改记录在 MSDN 上：

[Windows Vista 中的应用程序关闭更改](http://msdn.microsoft.com/en-us/library/ms700677.aspx)

`WM_QUERYENDSESSION`仅仅处理和单独是不够的`WM_ENDSESSION`，还涉及到与关闭过程交互的新 API 函数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-14T11:23:30.877

此外，调用时提供的自定义字符串似乎`ShutdownBlockReasonCreate()`在 Windows 8/8.1 中没有更新。它只显示初始字符串，但没有更新。我试图让用户知道我要阻止关机的原因和时间。