# StackOverflow 问答 15703000-15703999

# javascript - 使用 javascript 从 localhost 读取 json 文件

> ID：15703001
> 
> 赞同：4
> 
> 时间：2013-03-29T12:12:58.463
> 
> 标签：javascript, json, localhost

我需要`.json`从本地主机读取文件，但它没有用！

该文件的内容如下：

```
[
 {"source":"tw1", 
  "text":"fubar"}, 

 {"source":"tw2", 
  "text":"foo"}
] 
```

我使用以下命令设置了 localhost ：，这里`python -m http.server 8888 &`发布了[D3.js。](https://github.com/mbostock/d3/wiki)

我编写了以下 javascript 代码：

```
<script type="text/javascript" src="lib/jquery-1.9.1.js"></script>
   <script>
    $(document).ready(
        $.getJSON("http://localhost/test.json", function(data){
            document.write(data);

    });
    </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T12:17:04.550

如果您在端口上打开服务器`8888`，那么您必须在该端口上请求它：

```
$.getJSON("http://localhost:8888/test.json", function(data){ 
```

但请注意，如果您希望能够通过[跨域限制，服务器必须设置](http://en.wikipedia.org/wiki/Same_origin_policy)[正确的 CORS 标头](http://enable-cors.org/)。

第三个问题是您的代码无法编译：您缺少`});`. 压痕不对称使它很明显：

```
$(document).ready(
    $.getJSON("http://localhost:8888/test.json", function(data){
        document.write(data);
    }); // <=== was missing
}); 
```

A fourth problem is that you wan't use `document.write` once the page is loaded. You must write using DOM manipulation methods, like `$(document.body).append($('<pre>'+data+'</pre>'));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-26T07:44:06.057

I think the problem is that you're trying to access the json file in your computer, upload your json file to a online server and access that instead of the one that is one your computer.

# jquery - 使用 jquery 关闭 AJAX 内容

> ID：15703003
> 
> 赞同：0
> 
> 时间：2013-03-29T12:13:08.160
> 
> 标签：jquery

当用户在打开“span3 a”后单击“内容”div 时，我无法关闭它。

它淡出并隐藏 div 片刻。如何正确定位 span3 a 以便在打开内容后关闭内容？

```
 $(".span3").on('click', 'a', function (e) {
          var href;
          e.preventDefault();
          href = $(this).attr("href");
          $(".team-loop").find("a").removeClass("active");
          $(this).addClass("active");
          $('#staff_expand').fadeOut().hide();
          $(".content").load(href + " #staff_expand");
        }); 
```

HTML结构：

```
<div class="content border-bottom" >    </div>
            <div class="row-fluid">
                <ul class="team-loop">
                    <?php $args = array( 'post_type' => 'team', 'posts_per_page' => 30 );
                        $loop = new WP_Query( $args );
                        while ( $loop->have_posts() ) : $loop->the_post();
                            echo '<li class="span3 mobile_width"><a href="' . get_permalink() .  '">';
                            the_content();
                            echo  '<span class="staff_names"><span class="plus"> + </span>';
                            the_title(); 
                            echo '</span></a></li>';
                        endwhile;
                    ?>

                </ul>
            </div> 
```

然后从 url 中提取的部分是：

```
<div class="row-fluid" id="staff_expand">
    <div class="span3">
        <?php echo $content; ?>
    </div>
    <div class="span3">
        <div><?php echo $title; ?></div>
        <div><?php echo $email; ?></div>
        <div><?php echo $number; ?></div>
        <div><?php echo $linkedin; ?></div>
        <div class="add_to_contacts"><?php echo $addcontact; ?></div>
    </div>
    <div class="span6">
    <div class="desc"><?php echo $text1; ?></div>
    <div class="desc"><?php echo $text2 ;?></div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:23:59.310

```
$(".span3").on('click', 'a', function (e) {
    e.preventDefault();
    var href = $(this).attr("href");
    $(".team-loop").find("a").removeClass("active");
    $(this).addClass("active");

    $('.content').fadeOut(400, function() {
        $(this).load(href + " #staff_expand", function() {
            $(this).fadeIn(400);
        });
    });
}); 
```

# iphone - 应用程序启动时，iPhone 的 phonegap 应用程序不会从主页启动

> ID：15703005
> 
> 赞同：0
> 
> 时间：2013-03-29T12:13:10.547
> 
> 标签：iphone, ios, cordova

我是 Objective-c 的新手，但创建了一个运行良好的 iPhone Phonegap 应用程序。但问题是当我启动我的应用程序或单击我的应用程序图标时，该应用程序从我离开应用程序或按下菜单按钮的（最后一个）页面开始。

该应用程序第一次正常运行（从启动屏幕和所有启动），从第二次开始，它不会从启动屏幕和主页启动。

我不明白为什么会这样。（在模拟器上正常运行）

请指教。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:16:08.607

你的应用程序并没有真正关闭，只会从它最后知道的状态继续。

如果您希望您的应用程序在被推送到后台时关闭，请将其添加`Application does not run in background`到`info.plist`并将其值设置为`YES`

# asp.net-mvc-3 - Razor 模板变量范围

> ID：15703010
> 
> 赞同：3
> 
> 时间：2013-03-29T12:13:15.200
> 
> 标签：asp.net-mvc-3, razor, template-engine

我在共享布局`_Layout.cshtml`中定义的变量是否在视图页面的范围内？

**_Layout.cshtml 变量：**

```
@{
    ViewBag.url = "http://www.website.com/site/";
} 
```

**索引.cshtml：**

```
<a class="continue" href="@ViewBag.url/our-vision/">Continue</a> 
```

这输出：`/our-vision/`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:53:37.323

您可以尝试回答这个问题：[How do I set ViewBag properties on _ViewStart.cshtml?](https://stackoverflow.com/questions/4834045/how-do-i-set-viewbag-properties-on-viewstart-cshtml)

设置（注意：代码用于 _ViewStart，而不用于 _Layout）

```
@{
    PageData["message"] = "Hello";
} 
```

得到

```
<h2>@PageData["message"]</h2> 
```

或者

创建更有趣的解决方案：[How to set ViewBag properties for all Views without using a base class for Controllers?](https://stackoverflow.com/questions/5453327/how-to-set-viewbag-properties-for-all-views-without-using-a-base-class-for-contr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:31:14.840

说明：
每个视图/布局的 ViewBag 都不同，剃须刀首先渲染视图，然后是布局。

此问题的解决方案可能是在基本控制器或视图或全局过滤器中设置公共常量而不是布局。

# phonegap-build - Phonegap build - ref = window.open(encodeURI(url),'_blank','location=no'); 正在显示完成按钮！？

> ID：15703016
> 
> 赞同：0
> 
> 时间：2013-03-29T12:13:44.610
> 
> 标签：phonegap-build, inappbrowser

使用phonegap构建。我在用着

```
ref = window.open(encodeURI(url),'_blank','location=no'); 
```

打开 InAppBrowser 并使用 location=no 它应该不会在工具栏中显示 DONE 按钮！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T11:22:01.050

It might be a whitelist issue. Make sure that the webpage you are trying to load is not configured on the config.xml whitelist.

# ruby - Ruby 数组删除 vs 删除（砰）

> ID：15703018
> 
> 赞同：0
> 
> 时间：2013-03-29T12:13:52.210
> 
> 标签：ruby, arrays

我认为 Array#delete 删除了数组中对象的所有副本，但是在我正在编写的这个程序中发生了一些奇怪的（对我来说莫名其妙的）事情。仅当我在删除函数的末尾包含一个爆炸时，删除似乎才有效，即使这似乎没有被定义。

这是有问题的功能：

```
 def propagate
    @puzzle.each do |sqr, values|
      if values.length == 1
        @neighbors[sqr].each do |neighbor|
          @puzzle[neighbor].delete!(values)
        end 
      end 
    end 
  end 
```

@puzzle 是一个以字符串为键和值的哈希，格式如下：`@puzzle["A1"] = "123456789"`

@neighbors 是一个以字符串为键、以字符串数组为值的散列：

```
@neighbors["A1"] = ["A2", "A3", "A4", "A5", "A6", "A7", "A8", "A9", "B1", "C1", "D1", "E1", "F1", "G1", "H1", "I1", "B2", "B3", "C2", "C3"] 
```

当我运行这样的代码时： `@puzzle[neighbor].delete(values)`

谜题中的值不受删除的影响。但是当我包括！有用。

为什么是这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T12:22:32.033

这是一个常见的成语。Bang 方法就地修改对象，“普通”方法返回修改后的副本。

您正在执行的`delete!`方法调用是针对字符串，而不是数组。`String`确实有方法：`delete!`http: [//www.ruby-doc.org/core-1.9.3/String.html#method-i-delete-21](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-delete-21)

# asp.net - 图像不显示在 Internet Explorer 中

> ID：15703020
> 
> 赞同：2
> 
> 时间：2013-03-29T12:14:07.053
> 
> 标签：asp.net, internet-explorer, firefox

在我的 aspx 文件中，

```
<div id="blueBar">
        <div style="position: absolute;">
            <asp:Image ID="Image1" runat="server" ImageUrl="~/Styles/images/blueBar_01.jpg" Width="150px"
                Style="margin-top: 4px" /><br />
        </div>
        <div style="top: 35%; position: absolute">
            <asp:Image ID="Image2" runat="server" ImageUrl="~/Styles/images/blueBar_02.jpg" Width="150px" /><br />
        </div>
        <div style="position: absolute; bottom: 0">
            <asp:Image ID="Image3" runat="server" ImageUrl="~/Styles/images/blueBar_03.jpg" Width="150px" /><br />
        </div>
    </div> 
```

Firefox 浏览器可以显示图像（Image1、Image2、Image3）。
但 Internet Explorer 无法显示！我看到了十字标志。我想知道为什么以及如何解决？
我用的是IE版本（8.0.7601.17514）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:25:46.820

如果您的 Style 文件夹位于根级别，请尝试：-

```
<div id="blueBar">
        <div style="position: absolute;">
            <asp:Image ID="Image1" runat="server" ImageUrl="Styles/images/blueBar_01.jpg" Width="150px"
                Style="margin-top: 4px" /><br />
        </div>
        <div style="top: 35%; position: absolute">
            <asp:Image ID="Image2" runat="server" ImageUrl="Styles/images/blueBar_02.jpg" Width="150px" /><br />
        </div>
        <div style="position: absolute; bottom: 0">
            <asp:Image ID="Image3" runat="server" ImageUrl="Styles/images/blueBar_03.jpg" Width="150px" /><br />
        </div>
    </div> 
```

# wpf - 在 Setter.Value 标签中访问 DependencyProperty 的值

> ID：15703021
> 
> 赞同：1
> 
> 时间：2013-03-29T12:14:10.123
> 
> 标签：wpf, styles, dependency-properties, setter

我有一个控件，当鼠标越过它时它会改变它的颜色。我试图通过使用控件的样式来解决它：

```
<Style TargetType="{x:Type local:Control}">
     <Setter Property="Background" Value="Transparent" />
    <Setter Property="BorderBrush" Value="{x:Null}" />
    <Setter Property="MouseHoverBackgroundColor" Value="#FFFFEFBB" />
    <Setter Property="MouseHoverBorderColor" Value="#FFE5C365" />
    <Setter Property="MouseHoverBorderThickness" Value="2" />
    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="true">

            <Setter Property="Background">
                <Setter.Value>
                    <!-- Here I have to get the Value of the current "MouseHoverBackgroundColor"-DependencyProperty. -->
                </Setter.Value>
            </Setter>
            <Setter Property="BorderBrush">
        <Setter.Value>
            <!-- MouseHoverBorderColor -->
        </Setter.Value>
        </Setter>   
            <Setter Property="BorderThickness">
                <Setter.Value>
            <!-- MouseHoverBorderColor -->
            </Setter.Value>
            </Setter> 

        </Trigger>
    </Style.Triggers>
</Style> 
```

我实际上不知道如何访问 DependencyProperty 的当前值。

真挚地

用户1574054

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:19:09.197

我猜你不想像你的问题要求的那样设置，而是`MouseHoverBorderColor`使用`BorderThickness``MouseHoverBorderThickness`

```
<Style TargetType="{x:Type local:Control}">
    <Setter Property="Background" Value="Transparent" />
    <Setter Property="BorderBrush" Value="{x:Null}" />
    <Setter Property="MouseHoverBackgroundColor" Value="#FFFFEFBB" />
    <Setter Property="MouseHoverBorderColor" Value="#FFE5C365" />
    <Setter Property="MouseHoverBorderThickness" Value="2" />
    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="true">    
            <Setter Property="Background" Value="{Binding RelativeSource={RelativeSource Self}, Path=MouseHoverBackgroundColor}">
            </Setter>
            <Setter Property="BorderBrush" Value="{Binding RelativeSource={RelativeSource Self}, Path=MouseHoverBorderColor}">
            </Setter>   
            <Setter Property="BorderThickness" Value="{Binding RelativeSource={RelativeSource Self}, Path=MouseHoverBorderThickness}">
            </Setter>    
        </Trigger>
    </Style.Triggers>
</Style> 
```

我确实希望您使用这种方法还有另一个原因，尽管有一个单独的 DP 用于悬停颜色和排序。

如果您只想在触发器上更改颜色，只需将画笔创建为样式资源并在调用触发器时应用相应的画笔。省去你为这些东西创建依赖属性的麻烦

说类似（您可以将 ControlTemplate 更改为您想要的内容）：

```
<Style x:Key="ButtonStyle"
        TargetType="{x:Type Button}">
  <Style.Resources>
    <SolidColorBrush x:Key="Button.IsMouseOver.Background"
                      Color="#FFFFEFBB" />
    <SolidColorBrush x:Key="Button.IsMouseOver.BorderColor"
                      Color="#FFE5C365" />
    <Thickness x:Key="Button.IsMouseOver.Thickness">2</Thickness>
  </Style.Resources>
  <Setter Property="Background"
          Value="Transparent" />
  <Setter Property="BorderBrush"
          Value="{x:Null}" />
  <Setter Property="BorderThickness"
          Value="0" />
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type Button}">
        <Border BorderBrush="{TemplateBinding BorderBrush}"
                BorderThickness="{TemplateBinding BorderThickness}">
          <ContentPresenter />
        </Border>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
  <Style.Triggers>
    <Trigger Property="IsMouseOver"
              Value="true">
      <Setter Property="Background"
              Value="{StaticResource Button.IsMouseOver.Background}" />
      <Setter Property="BorderBrush"
              Value="{StaticResource Button.IsMouseOver.BorderColor}" />
      <Setter Property="BorderThickness"
              Value="{StaticResource Button.IsMouseOver.Thickness}" />
    </Trigger>
  </Style.Triggers>
</Style> 
```

# wordpress - 在 wordpress 机器人上禁止 /feed 和 /trackback，但 Google 仍在索引

> ID：15703023
> 
> 赞同：2
> 
> 时间：2013-03-29T12:14:22.267
> 
> 标签：wordpress, feed, robot, trackback

我的网站和 robots.txt 文件有问题。我的机器人上的 /feed 和 /trackback url 被禁止，但由于某种原因，我仍然在我的谷歌网站管理员 url 上收到[http://www.mydomain.net/year/month/post.html/feed](http://www.mydomain.net/year/month/post.html/feed)和[http:// /www.mydomain.net/year/month/post.html/trackback](http://www.mydomain.net/year/month/post.html/trackback)我不知道如何正确修复。在那之后发生了我的网站访问量下降。

任何人都可以帮助我吗？

问候

这是我的 robots.txt

```
User-agent: *
Disallow: /cgi-bin
Disallow: /wp-admin
Disallow: /wp-includes
Disallow: /wp-content/plugins
Disallow: /wp-content/cache
Disallow: /wp-content/themes
Allow: /wp-content/uploads/
Disallow: /trackback
Disallow: /?ref=
Disallow: /feed
Disallow: /comments/feed
Disallow: /feed/$
Disallow: /*/feed/$
Disallow: /*/feed/rss/$
Disallow: /*/trackback/$
Disallow: /*/*/feed/$
Disallow: /*/*/feed/rss/$
Disallow: /*/*/trackback/$
Disallow: /*/*/*/feed/$
Disallow: /*/*/*/feed/rss/$
Disallow: /*/*/*/trackback/$
Disallow: /?s= 
Disallow: /search

User-agent: Googlebot-Image
Allow: /

Sitemap: http://www.mydomain.net/sitemap.xml 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-14T15:17:03.063

你的 robtos 文件似乎没问题，我想你误解了如何使用它。您无法通过将正则表达式添加到机器人文件中来阻止对某个文件夹的索引，这是因为 robots.txt 仅控制爬虫活动。因此，为了防止某些页面被编入索引，您必须使用 robots 元标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:23:52.137

我认为您的问题是使用通配符`*`这不是必需的，只需使用

```
Disallow: /feed/ 
```

这同样适用于通配符的所有其他用途。

此外，并非所有搜索引擎都接受通配符。

您可以尝试其中一个 robots.txt 语法检查器以获得更多帮助。

# php - PHPMailer Hotmail "¬"

> ID：15703024
> 
> 赞同：0
> 
> 时间：2013-03-29T12:14:29.737
> 
> 标签：php, email, phpmailer, hotmail

在 PHP 中，我使用 PHPMailer 5.2.4 发送电子邮件，但我在 Hotmail 中遇到了一个非常奇怪的问题（在其他电子邮件阅读器中运行良好）。

发送的电子邮件有一个链接，例如： [http ://www.noticenter.com.br/?modulo=noticias&caderno=geral¬icia=01343-avioes-fabricados-em-sc-participam-de-feira-nos-eua](http://www.noticenter.com.br/?modulo=noticias&caderno=geral&noticia=01343-avioes-fabricados-em-sc-participam-de-feira-nos-eua)

在 Outlook（和其他电子邮件阅读器）中，链接是正确的： [http ://www.noticenter.com.br/index.php?modulo=noticias&caderno=geral%c2%acicia=01343-avioes-fabricados-em-sc-参与德费拉诺斯欧亚](http://www.noticenter.com.br/index.php?modulo=noticias&caderno=geral%c2%acicia=01343-avioes-fabricados-em-sc-participam-de-feira-nos-eua)

但是在Hotmail中，我 在**“%c2%”**的位置得到了一个**“¬”**： [http:](http://www.noticenter.com.br/index.php?modulo=noticias&caderno=geral) //www.noticenter.com.br/index.php? modulo=noticias&caderno=geral ¬icia=01343-avioes-fabricados- em-sc-participam-de-feira-nos-eua

 **这是我用来发送电子邮件的一段代码：

```
 $content = 'Link: <a href="http://www.noticenter.com.br/?modulo=noticias&caderno=geral&noticia=01343-avioes-fabricados-em-sc-participam-de-feira-nos-eua">http://www.noticenter.com.br/?modulo=noticias&caderno=geral&noticia=01343-avioes-fabricados-em-sc-participam-de-feira-nos-eua</a>';

    $mail = new phpmailer();
    $mail->SMTPDebug = 0;
    $mail->Host = emailServerNews_Host;
    $mail->Mailer = emailServerNews_Mailer;
    $mail->SMTPAuth = emailServerNews_Authentication;
    $mail->Username = emailServerNews_Username;
    $mail->Password = emailServerNews_Password;
    $mail->Port = emailServerNews_Port;

    $mail->From = 'email@domain';
    $mail->FromName = utf8_encode($title);
    $mail->Body = utf8_encode($content);
    $mail->AltBody = "HTML";
    $mail->Subject = '=?UTF-8?B?'.base64_encode($subject).'?=';
    $mail->AddReplyTo('email@domain');
    $mail->CharSet = "UTF-8";
    $mail->AddAddress($email, utf8_encode($name));
    if($mail->Send() == true){
        $ErrorInfo = $mail->ErrorInfo;
        return true;
    }else{
        $ErrorInfo = $mail->ErrorInfo;
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:00:14.907

从 PHPMailer 在新的 hotmail (outlook webmail) 上以粗体链接访问：

[http://www.noticenter.com.br/?modulo=noticias&caderno=propaganda-marketing](http://www.noticenter.com.br/?modulo=noticias&caderno=propaganda-marketing) **%c2%a** cicia=01334-propague-lanca-livro-sobre-os-seus-50-anos-de-historia

当我通过此链接显示鼠标时： [http ://www.noticias&caderno=propaganda-marketing](http://www.noticenter.com.br/?modulo=noticias&caderno=propaganda-marketing) **¬** icia=01334-propague-lanca-livro-sobre-os-seus-50-anos -de-historia

从 PHPMailer() 调试：

PHPMailer 对象

(

```
[Priority] => 3
[CharSet] => UTF-8
enter code here
[ContentType] => multipart/alternative
[Encoding] => 8bit
[ErrorInfo] => 
[From] => name@domain
[FromName] => Noticenter - A sua fonte de informaÃ§Ã£o e negÃ³cios em Santa Catarina
[Sender] => 
[ReturnPath] => 
[Subject] => =?UTF-8?B?VGVzdGUgTGluaw==?=
[Body] => Link: <a href="http://www.noticenter.com.br/?modulo=noticias&caderno=propaganda-marketing&noticia=01334-propague-lanca-livro-sobre-os-seus-50-anos-de-historia" style="color:#545454!important;text-decoration:none"><font face="Trebuchet MS" size="4" color="#545454" style="line-height: 22px; font-size: 20px;">Propague lanÃ§a livro sobre os seus 50 anos de histÃ³ria</font></a><br>
[MIMEHeader:protected] => Date: Fri, 29 Mar 2013 18:23:03 -0300 
```

返回路径：name@domain

命名

来自：=?UTF-8?Q?Noticenter_-_A_sua_fonte_de_informa=C3=A7=C3=A3o_e_neg=C3=B3cio?= =?UTF-8?Q?s_em_Santa_Catarina?=

回复：name@domain

主题：=?UTF-8?B?VGVzdGUgTGluaw==?= 消息 ID：

X 优先级：3

X-Mailer：PHPMailer 5.2.4（[http://code.google.com/a/apache-extras.org/p/phpmailer/](http://code.google.com/a/apache-extras.org/p/phpmailer/)）

MIME 版本：1.0

内容类型：多部分/替代；边界="b1_ee5bcdb787b4b63212cee74d72b2c699"

```
[mailHeader:protected] => 
[WordWrap] => 0
[Mailer] => smtp
[Sendmail] => /usr/sbin/sendmail
[UseSendmailOptions] => 1
[PluginDir] => 
[ConfirmReadingTo] => 
[Hostname] => 
[MessageID] => 
[MessageDate] => 
[Host] => localhost
[Port] => 25
[Helo] => 
[SMTPSecure] => 
[SMTPAuth] => 
[Username] => 
[Password] => 
[AuthType] => 
[Realm] => 
[Workstation] => 
[Timeout] => 10
[SMTPDebug] => 1
[Debugoutput] => echo
[SMTPKeepAlive] => 
[SingleTo] => 
[SingleToArray] => Array
    (
    )

[LE] => 

[DKIM_selector] => 
[DKIM_identity] => 
[DKIM_passphrase] => 
[DKIM_domain] => 
[DKIM_private] => 
[action_function] => 
[Version] => 5.2.4
[XMailer] => 
[smtp:protected] => SMTP Object
    (
        [SMTP_PORT] => 25
        [CRLF] => 

        [do_debug] => 1
        [Debugoutput] => echo
        [do_verp] => 
        [Timeout] => 10
        [Timelimit] => 30
        [Version] => 5.2.4
        [smtp_conn:SMTP:private] => 0
        [error:SMTP:private] => 
        [helo_rply:SMTP:private] => 
    )

[to:protected] => Array
    (
        [0] => Array
            (
                [0] => name@domain
                [1] => name
            )

    )

[cc:protected] => Array
    (
    )

[bcc:protected] => Array
    (
    )

[ReplyTo:protected] => Array
    (
        [name@domain] => Array
            (
                [0] => name@domain
                [1] => 
            )

    )

[all_recipients:protected] => Array
    (
        [name@domain] => 1
    )

[attachment:protected] => Array
    (
    )

[CustomHeader:protected] => Array
    (
    )

[message_type:protected] => alt
[boundary:protected] => Array
    (
        [1] => b1_ee5bcdb787b4b63212cee74d72b2c699
        [2] => b2_ee5bcdb787b4b63212cee74d72b2c699
        [3] => b3_ee5bcdb787b4b63212cee74d72b2c699
    )

[language:protected] => Array
    (
    )

[error_count:protected] => 0
[sign_cert_file:protected] => 
[sign_key_file:protected] => 
[sign_key_pass:protected] => 
[exceptions:protected] => 
```

)**

# matlab - Matlab 10x10 随机数按钮

> ID：15703027
> 
> 赞同：-1
> 
> 时间：2013-03-29T12:14:40.310
> 
> 标签：matlab, button, random

我正在尝试创建一个带有 100 个按钮的 GUI 图，按 10 行和 10 列排列。从 1 到 100 的数字需要随机分配给按钮并以白色显示。但是，我不知道该怎么做。我应该使用什么方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T13:02:09.977

我觉得这个问题太笼统了。没有一种方法可以做到这一点，所以我会给你一些指示：

*   您可以使用该函数创建`uicontrol`对象，包括按钮。[`uicontrol`](http://www.mathworks.co.uk/help/matlab/ref/uicontrol.html)阅读完整描述以了解如何创建按钮
*   您可以使用该[`Position`](http://www.mathworks.co.uk/help/matlab/ref/uicontrol_props.html#bqxoipv)属性来设置按钮在图窗上的位置。
*   您可以使用该[`String`](http://www.mathworks.co.uk/help/matlab/ref/uicontrol_props.html#bqxoiqg)属性来设置按钮的文本
*   您可以使用该[`ButtonDownFcn`](http://www.mathworks.co.uk/help/matlab/ref/uicontrol_props.html#bqxoije)属性设置一个回调函数，该函数决定按下按钮时要执行的操作。

希望有帮助；试着从这里弄清楚该怎么做，如果你遇到困难，你可以问另一个更具体的问题。

# css - 通过 Presenter 管理 View 中的错误和 CSS

> ID：15703033
> 
> 赞同：0
> 
> 时间：2013-03-29T12:15:07.913
> 
> 标签：css, gwt, mvp, passive-view

我在项目中实现的 MVP 模型是 Passive MVP。演示者具有对视图的引用。此外，presenter 有一个 Display 接口，视图必须遵守。

我当前的显示界面如下 -

```
public interface Display {
    Widget asWidget();

    <Control extends HasValue<String> & HasBlurHandlers> Control code();
    <Control extends HasValue<String> & HasBlurHandlers> Control name();
    <Control extends HasValue<String> & HasBlurHandlers> Control address();
    <Control extends HasValue<String> & HasBlurHandlers> Control contactNumber1();
    <Control extends HasValue<String> & HasBlurHandlers> Control contactNumber2();
    <Control extends HasValue<String> & HasBlurHandlers> Control email();
    <Control extends HasValue<String> & HasBlurHandlers> Control registrationNumber();
    <Control extends HasValue<String> & HasBlurHandlers & HasEnabled> Control registrationYear();

    HasClickHandlers saveControl();
    HasClickHandlers cancelControl();

    void setCodeError(String message);
    void setNameError(String message);
    void setAddressError(String message);
    void setContactNumber1Error(String message);
    void setEmailError(String message);
    void setRegistrationNumberError(String message);

    void clearCodeError();
    void clearNameError();
    void clearAddressError();
    void clearContactNumber1Error();
    void clearEmailError();
    void clearRegistrationNumberError();
} 
```

这里的痛苦是用于设置/清除输入错误消息的方法。每个`setXXXError()`由 View 实现的都会使相应的`ErrorWidget`可见，并且可能还会突出显示相应的`InputWidget`（通过将其标记为红色或其他东西）。相反，每个`clearXXXError()`方法都会隐藏对应的`ErrorWidget`，并从对应的 中移除高亮`InputWidget`。这样，presenter 就不必明确地处理 CSS 管理，从而将自己与 CSS 的变化脱钩。只有视图必须担心它。

但是，这种做法最终导致接口中有太多与错误相关的方法。

我想到的另一种方法是`ErrorWidget`在界面中公开 s 。但是，GWT 没有`HasCss`-type 接口，我必须要么显式指定小部件类型（例如，标签），要么使用`IsWidget`接口（这将再次公开整个小部件，而不仅仅是其 CSS 属性）。此外，在这种方法中，我必须在演示者中明确指定 CSS 修改。

我的方法有更好的选择吗？还是我所做的已经足够好？我也希望我目前的方法有任何改进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:19:01.950

也许你可以考虑使用这个[工具提示](http://arcbees.github.com/ArcBees-GQuery-Plugins/)插件（关注底部的验证示例）。它用很少的代码行来增强你的小部件。

插件和示例的源代码，以及有关如何将其添加到项目中的信息都在[这个 github repo](https://github.com/ArcBees/ArcBees-GQuery-Plugins/tree/master/tooltip)中。[在这个链接](https://github.com/ArcBees/ArcBees-GQuery-Plugins/blob/master/tooltip-sample/src/main/java/com/arcbees/gquery/tooltip/client/TooltipDocumentation.java#L130)中， 您可以看到他们用来增强示例表单的代码。

在您的情况下，设置您的表单小部件：

```
 @UiField TextBox myTextBoxWidget;

 $(myTextBoxWidget).id("textbox1").as(Tooltip).tooltip(new TooltipOptions()
            .withContent("Password cannot be empty")
            .withTrigger(TooltipTrigger.MANUAL)
            .withPlacement(TooltipPlacement.RIGHT)
            .withResources(ValidationTooltipResources.INSTANCE)); 
```

然后在您的视图中，您可以添加一个方法来通知演示者哪些小部件有错误，我将使用 CSS 选择器（基于 id 或类），例如：

```
 myView.setError("#texbox1, #texbox2"); 
```

并且该方法在视图中的实现可能是：

```
 public void setError(cssSelector) {
   $(*, this).removeClass("invalid");
   $(cssSelector, this).addClass("invalid");
 } 
```

正如您所看到的，这个解决方案不是侵入性的，因为插件不需要了解您的小部件实现的任何信息，并且您不必被迫在小部件中实现某些接口等。

# java - Appengine 请求成本估算

> ID：15703036
> 
> 赞同：-2
> 
> 时间：2013-03-29T12:15:17.740
> 
> 标签：java, google-app-engine

我有一个 appengine 应用程序，它允许付费客户以 CSV 格式导出他们的数据以进行进一步分析（BI 等）。他们按月支付费用，我想估计这样的出口要花多少钱。appengine 是否提供 API 来计算请求的成本？如果没有，还有其他方法可以计算吗？

谢谢，克里斯蒂安。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:19:15.250

您必须准确查看您将使用的应用引擎资源。[这里](https://developers.google.com/appengine/docs/billing175)有一个单位成本表。

# java - 正确查询的 MysqlSyntaxError

> ID：15703038
> 
> 赞同：1
> 
> 时间：2013-03-29T12:15:23.397
> 
> 标签：java, mysql, hibernate, jdbc

在我的玩家实体中，我试图使用一个公式来包含所有玩家的得分总和。

```
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;    
import org.hibernate.annotations.Formula;
import com.google.gwt.user.client.rpc.IsSerializable;

@Entity
public class Player implements IsSerializable {
    @Id 
    private String name;
    @Column(nullable = false) 
    private Integer score;
    @Formula(value = " SELECT sum(score) ") 
    private Integer totalScore = 0;
    [...]
} 
```

但是，我在加载播放器时收到语法错误。

```
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: 
  You have an error in your SQL syntax; check the manual that corresponds to 
  your MySQL server version for the right syntax to use near 
  'SELECT sum(this_.score)  as formula0_0_ from Player this_' at line 1 
```

奇怪的是，这个查询看起来完全有效，当我在与 hibernate 相同的数据库上运行它时，我得到了预期的结果。

```
SELECT sum(this_.score) as formula0_0_ from Player this_
1 row(s) returned 
```

我已将休眠设置为使用 mysql 方言

```
<property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
<property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property> 
```

为什么 jdbc 会为正确的查询抛出错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:13:38.113

它似乎

```
@Formula(value = " SELECT sum(score) ") 
```

应该

```
@Formula(value = " sum(score) ") 
```

反而。发送到 MySQL 的 SQL 查询有可能（我没有尝试过）

```
SELECT SELECT sum(this_.score) as formula0_0_ from Player this_ 
```

这显然是无效的。

MySQL 仅向您显示遇到错误时的 SQL 字符串。在您的情况下，这是没有帮助的，因为从此时起您有一个有效的 SQL 查询。

# objective-c - 一对一关系的核心数据迁移失败

> ID：15703040
> 
> 赞同：2
> 
> 时间：2013-03-29T12:15:29.793
> 
> 标签：objective-c, core-data, core-data-migration

我有以下模型：

![模型版本 1](../Images/4b1c7fbf8cabccabf2285a479f8eca9e.png)

`parent`是一对一的关系（可选，没有最小值，最大值=1）。 `children`是逆对多关系（可选，没有最小值，没有最大值）。

我添加了一个新的模型版本，其中只有 Entity`Room`被重命名为`Classroom`，所有其他实体都没有改变：

![模型版本 2](../Images/ac22f1d8e6e57c96eb11ad178a74d5b1.png)

我还为迁移创建了一个映射模型，但是迁移失败并显示错误消息

```
reason = "Can't find mapping model for migration"; 
```

奇怪的是，如果`parent`关系是用 minimum=1（而不是没有最小值）创建的，那么迁移工作没有问题。

使用选项打开持久存储

```
NSDictionary *options = @{NSMigratePersistentStoresAutomaticallyOption:@YES, NSInferMappingModelAutomaticallyOption:@NO}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:36:41.203

为什么需要映射模型？您应该避免这些复杂性，只需按照 Apple 的[轻量级迁移文档中的说明使用](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html)**轻量级迁移**。

# java - 在 JBOSS 7 中使用 CXF WS 实现 X509 的问题

> ID：15703041
> 
> 赞同：1
> 
> 时间：2013-03-29T12:15:31.957
> 
> 标签：java, jax-ws, cxf, jboss7.x, x509certificate

我已经使用 JBOSS 在 CXF 中创建了一个 WS，我的要求是我想启用 X509 证书并使用 CXF 客户端调用 WS。我能够创建 WS 并能够成功地使用客户端调用它，但是当我实现 X509 时出现错误：-“原因：来自 [模块”部署的 java.lang.ClassNotFoundException：org.apache.cxf.jaxws.EndpointImpl。 cxfpoc.war:main" from Service Module Loader]" ，下面是相同的详细信息。

我的环境：

应用服务器：JBOSS-AS7.1.1.Final JAVA：1.7

对于 X509 实现，我遵循以下步骤：

1) 在密钥库中使用 testUser/testPass 生成私钥

keytool -genkey -alias testUser -keypass testPass -keystore privatestore.jks -storepass changeit -dname "cn=testUser" -keyalg RSA

2）自签名证书

keytool -selfcert -alias testUser -keystore privatestore.jks -storepass changeit -keypass testPass

3)

keytool -export -alias testUser -file key.rsa -keystore privatestore.jks -storepass changeit

4) 生成公钥存储

keytool -import -alias testUser -file key.rsa -keystore publicstore.jks -storepass changeit

现在我已经复制了服务器的 WEB-INF/classes 文件夹中的 publicstore.jks 文件，并且还复制了 server.properties 文件：

## 服务器属性

```
org.apache.ws.security.crypto.provider=org.apache.ws.security.components.crypto.Merlin
org.apache.ws.security.crypto.merlin.keystore.type=jks
org.apache.ws.security.crypto.merlin.keystore.password=changeit
org.apache.ws.security.crypto.merlin.keystore.file=publicstore.jks 
```

现在下面是 Web 服务的代码：

## Web 服务的服务器源

```
package ws;

import java.util.HashMap;
import java.util.Map;

import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.jws.WebResult;
import javax.jws.WebService;
import javax.jws.soap.SOAPBinding;
import org.apache.cxf.endpoint.Endpoint;
import org.apache.cxf.jaxws.EndpointImpl;
import org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor;
import org.apache.ws.security.handler.WSHandlerConstants;

@WebService(name = "DemoCXF", serviceName = "DemoCXFService", portName = "DemoCXFPort", targetNamespace = "http://test.org")
@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)
public class DemoCXF {

    @WebMethod()
    @WebResult(targetNamespace = "http://test.org", name = "updatedEmployee")
    public Employee processEmployeeSalary(
        @WebParam(partName = "employee", name = "employee", targetNamespace = "http://test.org") 
        Employee emp,
        @WebParam(partName = "incrementAmount", name = "incrementAmount", targetNamespace = "http://test.org")
        Long incrementAmount) {
        Map<String,Object> inProps= new HashMap<String,Object>();
        inProps.put(WSHandlerConstants.ACTION, "Signature");
        inProps.put(WSHandlerConstants.SIG_PROP_FILE, "server.properties");

        EndpointImpl jaxWsEndpoint = (EndpointImpl) EndpointImpl.publish(WSDL_URL, new DemoCXF());

        Endpoint cxfEndpoint = jaxWsEndpoint.getServer().getEndpoint();

        WSS4JInInterceptor wssIn = new WSS4JInInterceptor(inProps);
        cxfEndpoint.getInInterceptors().add(wssIn);

        System.out.println("[DemoCXF] Method Invoked....processEmployeeSalary");

        System.out.println("[DemoCXF] Before processing: " + emp);

        long incrementedSalary = emp.getEmpSalary() + incrementAmount;

        emp.setEmpSalary(incrementedSalary);

        System.out.println("[DemoCXF] After processing: " + emp);

        return emp;
    }
} 
```

## WS 可使用 URL 访问：cxfpoc?wsdl

现在对于 cilent 部分，我正在使用下面的属性文件和 privatestore.jks

## client_sign.properties

```
org.apache.ws.security.crypto.provider=org.apache.ws.security.components.crypto.Merlin
org.apache.ws.security.crypto.merlin.keystore.type=jks
org.apache.ws.security.crypto.merlin.keystore.password=changeit
org.apache.ws.security.crypto.merlin.keystore.alias=testUser
org.apache.ws.security.crypto.merlin.keystore.file=privatestore.jks 
```

我在 Client 的类路径中放了 JAR 的下面：-

```
commons-logging-1.1.1.jar
DemoCXFClient.jar [ Generated Client ] 
neethi-3.0.1.jar
wsdl4j-1.6.2.jar
wss4j-1.6.5.jar
xmlschema-core-2.0.jar
xmlsec-1.5.1.jar
and CFX jars from jboss-as-7.1.1.Final\modules\org\apache\cxf\main folder 
```

## 客户代码

测试CXF.java

```
import java.net.URL;
import java.util.HashMap;
import java.util.Map;

import javax.xml.namespace.QName;
import javax.xml.ws.BindingProvider;
import org.apache.cxf.endpoint.Client;
import org.apache.cxf.frontend.ClientProxy;
import org.apache.cxf.interceptor.LoggingInInterceptor;
import org.apache.cxf.interceptor.LoggingOutInterceptor;
import org.apache.cxf.ws.security.wss4j.WSS4JOutInterceptor;
import org.apache.ws.security.WSConstants;
import org.apache.ws.security.handler.WSHandlerConstants;

import client.DemoCXF;
import client.DemoCXFService;
import client.Employee;

public class TestCXF {

    public static void main(String ar[]) throws Exception {
        String WSDL_URL= arr[0] + "/cxfpoc?wsdl";
        DemoCXFService service=new DemoCXFService(new URL(WSDL_URL));
        DemoCXF port=service.getDemoCXFPort();

        Client client = ClientProxy.getClient(port);
        client.getInInterceptors().add(new LoggingInInterceptor());
        client.getOutInterceptors().add(new LoggingOutInterceptor());

        Map<String,Object> outProps = new HashMap<String,Object>();
        outProps.put(WSHandlerConstants.MUST_UNDERSTAND, "0");
        outProps.put(WSHandlerConstants.ACTION, "Signature");
        outProps.put(WSHandlerConstants.USER, "testUser");
        outProps.put(WSHandlerConstants.PW_CALLBACK_CLASS, KeystorePasswordCallback.class.getName());

        outProps.put(WSHandlerConstants.SIG_PROP_FILE, "client_sign.properties");
        WSS4JOutInterceptor wssOut = new WSS4JOutInterceptor(outProps);

        org.apache.cxf.endpoint.Endpoint cxfEndpoint = client.getEndpoint();

        cxfEndpoint.getOutInterceptors().add(wssOut);

        Employee emp=new Employee();
        emp.setEmpNo(1000L);
        emp.setEmpName("MiddlewaremagicEmployee");
        emp.setEmpSalary(6000L);

        System.out.println("\n\nBefore  EmpNo: "+emp.getEmpNo()+",  Name:"+emp.getEmpName()+",  Sal:"+emp.getEmpSalary());
        emp=port.processEmployeeSalary(emp,1000L);
        System.out.println("\n\nAfter   EmpNo: "+emp.getEmpNo()+",  Name:"+emp.getEmpName()+",  Sal:"+emp.getEmpSalary());
    }
} 
```

KeystorePasswordCallback.java

```
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;
import javax.security.auth.callback.Callback;
import javax.security.auth.callback.CallbackHandler;
import javax.security.auth.callback.UnsupportedCallbackException;
import org.apache.ws.security.WSPasswordCallback;

public class KeystorePasswordCallback implements CallbackHandler {
    private Map<String, String> passwords = new HashMap<String, String>();

    public KeystorePasswordCallback() {
        passwords.put("testUser", "testPass");
    }

    public void handle(Callback[] callbacks) throws IOException, UnsupportedCallbackException {
        for (int i = 0; i < callbacks.length; i++) {
            WSPasswordCallback pc = (WSPasswordCallback)callbacks[i];

            if (pc.getIdentifier().equals("testUser")) {
                // set the password on the callback. This will be compared to the
                // password which was sent from the client.
                pc.setPassword("testPass");
            }
        }
    }

    /**
     * Add an alias/password pair to the callback mechanism.
     */
    public void setAliasPassword(String alias, String password) {
        passwords.put(alias, password);
    }
} 
```

当我运行客户端程序时，出现以下异常：

```
20:11:49,296 ERROR [org.jboss.ws.common.invocation.InvocationHandlerJAXWS] (http--127.0.0.1-8080-2) Method invocation failed with exception: null: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0]
    at org.jboss.ws.common.invocation.AbstractInvocationHandlerJSE.invoke(AbstractInvocationHandlerJSE.java:111)
    at org.jboss.wsf.stack.cxf.JBossWSInvoker._invokeInternal(JBossWSInvoker.java:181)
    at org.jboss.wsf.stack.cxf.JBossWSInvoker.invoke(JBossWSInvoker.java:127)
    at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) [rt.jar:1.7.0]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) [rt.jar:1.7.0]
    at java.util.concurrent.FutureTask.run(FutureTask.java:166) [rt.jar:1.7.0]
    at org.apache.cxf.workqueue.SynchronousExecutor.execute(SynchronousExecutor.java:37)
    at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:106)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
    at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:207)
    at org.jboss.wsf.stack.cxf.RequestHandlerImpl.handleHttpRequest(RequestHandlerImpl.java:91)
    at org.jboss.wsf.stack.cxf.transport.ServletHelper.callRequestHandler(ServletHelper.java:169)
    at org.jboss.wsf.stack.cxf.CXFServletExt.invoke(CXFServletExt.java:87)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:185)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:108)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:754) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.jboss.wsf.stack.cxf.CXFServletExt.service(CXFServletExt.java:135)
    at org.jboss.wsf.spi.deployment.WSFServlet.service(WSFServlet.java:140) [jbossws-spi-2.0.3.GA.jar:2.0.3.GA]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0]
Caused by: java.lang.NoClassDefFoundError: org/apache/cxf/jaxws/EndpointImpl
    at ws.DemoCXF.processEmployeeSalary(DemoCXF.java:37) [classes:]
    ... 38 more
Caused by: java.lang.ClassNotFoundException: org.apache.cxf.jaxws.EndpointImpl from [Module "deployment.cxfpoc.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    ... 39 more

20:11:49,359 WARNING [org.apache.cxf.phase.PhaseInterceptorChain] (http--127.0.0.1-8080-2) Application {http://test.org}DemoCXFService#{http://test.org}processEmployeeSalary has thrown exception, unwinding now: org.apache.cxf.interceptor.Fault: org/apache/cxf/jaxws/EndpointImpl
    at org.jboss.wsf.stack.cxf.JBossWSInvoker.createFault(JBossWSInvoker.java:246)
    at org.jboss.wsf.stack.cxf.JBossWSInvoker._invokeInternal(JBossWSInvoker.java:201)
    at org.jboss.wsf.stack.cxf.JBossWSInvoker.invoke(JBossWSInvoker.java:127)
    at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) [rt.jar:1.7.0]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) [rt.jar:1.7.0]
    at java.util.concurrent.FutureTask.run(FutureTask.java:166) [rt.jar:1.7.0]
    at org.apache.cxf.workqueue.SynchronousExecutor.execute(SynchronousExecutor.java:37)
    at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:106)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
    at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:207)
    at org.jboss.wsf.stack.cxf.RequestHandlerImpl.handleHttpRequest(RequestHandlerImpl.java:91)
    at org.jboss.wsf.stack.cxf.transport.ServletHelper.callRequestHandler(ServletHelper.java:169)
    at org.jboss.wsf.stack.cxf.CXFServletExt.invoke(CXFServletExt.java:87)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:185)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:108)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:754) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.jboss.wsf.stack.cxf.CXFServletExt.service(CXFServletExt.java:135)
    at org.jboss.wsf.spi.deployment.WSFServlet.service(WSFServlet.java:140) [jbossws-spi-2.0.3.GA.jar:2.0.3.GA]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:] 
```

感谢建议我如何解决这个问题，我被困在这个问题上已经 3 天了。任何帮助都深表感谢。

--- 2013 年 5 月 5 日 --- 使用下面的服务器代码运行良好，WS 被调用，没有任何错误，但拦截器在这种情况下不起作用，意味着没有验证安全性..让我知道我该如何解决这个问题。

```
package ws;

import java.net.URL;
import java.util.HashMap;
import java.util.Map;

import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.jws.WebResult;
import javax.jws.WebService;
import javax.jws.soap.SOAPBinding;
import javax.xml.namespace.QName;
import javax.xml.ws.Service;

import org.apache.cxf.endpoint.Client;
import org.apache.cxf.endpoint.Endpoint;
import org.apache.cxf.frontend.ClientProxy;
import org.apache.cxf.interceptor.LoggingInInterceptor;
import org.apache.cxf.interceptor.LoggingOutInterceptor;
import org.apache.cxf.jaxws.EndpointImpl;
import org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor;
import org.apache.ws.security.handler.WSHandlerConstants;

@WebService(name = "DemoCXF", serviceName = "DemoCXFService", portName = "DemoCXFPort", targetNamespace = "http://test.org")
@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)
public class DemoCXF  implements DemoCXFI{
@WebMethod()
@WebResult(targetNamespace = "http://test.org", name = "updatedEmployee")
public Employee processEmployeeSalary(
        @WebParam(partName = "employee", name = "employee", targetNamespace = "http://test.org") Employee emp,
        @WebParam(partName = "incrementAmount", name = "incrementAmount", targetNamespace = "http://test.org") Long incrementAmount) {

    Map<String, Object> inProps = new HashMap<String, Object>();

    inProps.put(WSHandlerConstants.ACTION, "Signature");
    inProps.put(WSHandlerConstants.SIG_PROP_FILE, "server.properties");
    inProps.put(WSHandlerConstants.PW_CALLBACK_CLASS, KeystorePasswordCallback.class.getName());
    WSS4JInInterceptor wssIn = new WSS4JInInterceptor(inProps);

    System.out.println("[DemoCXF] Method STEP1");

    // Endpoint cxfEndpoint = null;
    try {

        //EndpointImpl jaxWsEndpoint = (EndpointImpl)
            //    EndpointImpl.publish("http://localhost:8080/cxfpoc?wsdl",DemoCXFI.class);

        Service cxfService = Service.create(new URL(
                "http://localhost:8080/cxfpoc?wsdl"), new QName(
                        "http://test.org", "DemoCXFService"));

        DemoCXFI mySer = cxfService.getPort(DemoCXFI.class); 

        Client client = ClientProxy.getClient(mySer); 

        client.getInInterceptors().add(new LoggingInInterceptor());
        client.getOutInterceptors().add(new LoggingOutInterceptor());

        Endpoint cxfEndpoint = client.getEndpoint();

        System.out.println("[DemoCXF] Method STEP2");

    //   Endpoint cxfEndpoint = jaxWsEndpoint.getServer().getEndpoint();

        System.out.println("[DemoCXF] Method STEP3");

        System.out.println("[DemoCXF] Method STEP4");

        cxfEndpoint.getInInterceptors().add(wssIn);

        cxfEndpoint.getInInterceptors().add(new LoggingInInterceptor());
        cxfEndpoint.getOutInterceptors().add(new LoggingOutInterceptor());

        System.out
        .println("[DemoCXF] Method Invoked....processEmployeeSalary");

        System.out.println("[DemoCXF] Before processing: " + emp);

        long incrementedSalary = emp.getEmpSalary() + incrementAmount;

        emp.setEmpSalary(incrementedSalary);

        System.out.println("[DemoCXF] After processing: " + emp);

    } catch (Exception ex) {
        ex.printStackTrace();
    }

    // Below line is having error//

    /*
     * EndpointImpl jaxWsEndpoint = (EndpointImpl)
     * EndpointImpl.publish("http://localhost:8085/cxfpoc", new DemoCXF());
     */

    // Some Business Logic to Store the Employee's Updated Details in
    // Database or Messaging System.

    return emp;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T11:38:02.500

请参阅有关在 JBoss AS 7 / WildFly 8 之上运行基于 Apache CXF 的端点的 JBossWS 文档：[https](https://docs.jboss.org/author/display/JBWS/WS-Security) ://docs.jboss.org/author/display/JBWS/WS-Security 。还可以查看文档的其余部分，以更好地了解 JBoss 上的 Apache CXF 集成。

# ms-access - 如果代码包含错误，则 VBA 代码根本不会触发

> ID：15703043
> 
> 赞同：0
> 
> 时间：2013-03-29T12:15:33.113
> 
> 标签：ms-access

我目前正在 MS Access 2010 中构建客户端数据库（在 2003 年和 2007 年也尝试过，结果相同）但是如果代码包含任何类型的错误，而不是失败或抛出运行时错误，它根本不会扳机。

例如，以下应该引发关于除以 0 的运行时错误，但没有任何反应，甚至没有触发调试。

```
Private sub somebutton_Click()
   debug.print ("triggered")
   dim x as integer

   x = 1 / 0
end sub 
```

如果我发现并删除了错误，那么代码就可以正常工作，但它会导致一些极其困难的调试。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:43:02.383

您的环境中有一些异常情况阻止了调试器。我发现这个相关的问题[MS Access 2003 does not enter into debug mode and ignores breakpoints](https://stackoverflow.com/questions/1476138/ms-access-2003-does-not-enter-into-debug-mode-and-ignores-breakpoints)。我找到了另一个参考，它重复了 Access 2007 的这个建议。

# php - 如何通过在 wordpress 中获取帖子图像来更改宽度和高度？

> ID：15703044
> 
> 赞同：0
> 
> 时间：2013-03-29T12:15:33.527
> 
> 标签：php, html, css, wordpress

我正在循环中获取帖子图像，每个图像都会以新的宽度和高度显示。我在如何在 img 标签中定义宽度和高度时遇到问题。

```
<?php
 $image = wp_get_attachment_image_src(get_post_thumbnail_id(get_the_ID() ),
         'single-post-thumbnail'); 
?>
<img src="<?= $image[0]; ?>" alt="" width="" height="" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:28:04.127

数组 getimagesize ( 字符串 $filename [, 数组 &$imageinfo ] )

来自[http://php.net/manual/en/function.getimagesize.php](http://php.net/manual/en/function.getimagesize.php)

此外，来自[http://codex.wordpress.org/Function_Reference/wp_get_attachment_image_src](http://codex.wordpress.org/Function_Reference/wp_get_attachment_image_src)

```
<?php 
    $attachment_id = 8; // attachment ID
    $image_attributes = wp_get_attachment_image_src( $attachment_id ); // returns an array
?> 

<img src="<?php echo $image_attributes[0]; ?>" width="<?php echo $image_attributes[1]; ?>" height="<?php echo $image_attributes[2]; ?>"> 
```

# c# - C# 中的后台工作者

> ID：15703045
> 
> 赞同：2
> 
> 时间：2013-03-29T12:15:35.283
> 
> 标签：c#, backgroundworker

实际上，我需要提示加载图像throwugh backgrounderworker，每当调用特定函数时，这里就是我的代码：

```
 private void bgwFile_DoWork(object sender, DoWorkEventArgs e)
 {
        FormFieldsLoad();      
 }

private void bgwFile_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    if (e.Cancelled == true)
    {
        Status.Text = "cancelled";
    }
    else if (e.Error != null)
    {
    }

    picprocess.SendToBack(); 
    Status.Text = "Completed";         
}

 //Below Method where i have called RunWorkerAsync()
private void buttonUpload_Click(object sender, EventArgs e)
{
    LoadFile(pdfFullPath, txtPassword.Text);
    form = document.getDocumentCatalog().getAcroForm();
    java.util.List FieldTypes = form.getFields();
    availableFieldsTable.Clear();
    btnLoad.Enabled = false;     
    Status.Text = "Document loaded successfully!!!";

    picprocess.BringToFront();  
    bgwFile.RunWorkerAsync();
} 
```

在运行上述代码时，它调用加载图像但没有显示输出它继续显示加载图像..它没有调用 `RunWorkerCompleted`

任何人都可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:28:09.337

您是否分配了事件处理程序？

```
bwgFile.DoWork += bgwFile_DoWork;
bwgFile.RunWorkerCompleted += bgwFile_RunWorkerCompleted; 
```

你确定`FormFieldsLoad`终止？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:07:29.837

As @Rik said, have you assigned the event handler?

If you have, put a break point or other trace to verify that your `bgwFile_DoWork` method execute as you expect and aren't getting stuck in an infinite loop or something.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T13:47:06.960

DoWork 真的完成了吗？此代码会在输出窗口中打印任何内容吗？

```
 private void bgwFile_DoWork(object sender, DoWorkEventArgs e)
 {
        FormFieldsLoad();      
        Console.WriteLine("Work done");
 } // <-or put a breakpoint here 
```

# scons - 如何告诉 scons 编译 .src 文件，如 .c 文件

> ID：15703058
> 
> 赞同：1
> 
> 时间：2013-03-29T12:16:27.350
> 
> 标签：scons

我正在使用带有瑞萨编译器的 scons。

在我的项目中，我需要编译 .c、.s 和 .src 文件。

我能够编译 .c 和 .s 文件。

但如果 scons 找到 .src 文件，它会跳过该文件

谁能帮我做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:26:53.060

首先，您需要添加此扩展名以`env['CPPFILESUFFIXES']`获取`.src`要扫描的文件以查找标题依赖项。

其次，遗憾的是，尽管 fortran 允许您提供扩展列表，但 C 不允许，因此您必须定义自己的构建器来模仿 C 构建器

# php - 检查类别是否在magento中具有子类别

> ID：15703060
> 
> 赞同：5
> 
> 时间：2013-03-29T12:16:29.470
> 
> 标签：php, magento, magento-1.7

我有类别 id。我从这段代码中得到了 id

```
<?php echo $current_catid=$this->getCategoryId(); ?> 
```

**现在我想检查这个类别是否有子类别**。

如果它有子，它将显示子类别图像和名称和 url。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T12:24:54.903

如果你有 current_category id 然后加载类别

*`$category = Mage::getModel('catalog/category')->load(id);`*

并检查`count($category->getChildren());`

其他方法适用于count children

```
count($category->getChildrenNodes()); 

$category->getChildrenCount(); 
```

这样您就可以检查类别是否有孩子。

`getChildren()`方法为您提供儿童类别 ID，并且基于 id 您可以获得类别图像和类别名称。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T13:11:22.887

请试试这个，它在我的最后工作正常

```
<?php  
$parentCategoryId = 10;
$categories = Mage::getModel('catalog/category')->load($parentCategoryId)->getChildren();
$catArray = explode(',', $categories);
foreach($catArray as $child)
{
$_child = Mage::getModel( 'catalog/category' )->load( $child );
echo $_child->getName() . '<br />';
echo $_child->getUrl() . '<br />';
echo $_child->getDescription() . '<br />';
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-26T15:22:30.853

有点旧，但我正在寻找相同的解决方案，@Mufaddal 的解决方案不起作用。然后我发现`getChildrenCategories()`。

```
$_category = Mage::registry('current_category');
count($_category->getChildrenCategories()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-25T10:17:03.250

实际上，这取决于是否启用了“使用平面目录类别”选项。

因此，检查类别是否有子类别的最佳方法是：

```
if (Mage::helper('catalog/category_flat')->isEnabled()) {
    $childrenCount = $category->getResource()->getChildrenAmount($category);
} else {
    $childrenCount = $category->getResource()->getChildrenCount();
} 
```

使用 $category 我想你已经有了，如：

```
$category = Mage::getModel('catalog/category')->load(id); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-15T10:41:43.110

您还有另一个选项来检查类别子类别是否存在..

```
 <?php
    $currentCategoryId = Mage::registry('current_category')->getId();
    $collection = Mage::getModel('catalog/category')->getCollection()
        ->addAttributeToFilter('is_active', 1) //only active categories
        ->addAttributeToFilter('parent_id', $currentCategoryId);
    $currentCat = Mage::registry('current_category');
    $subCategories = Mage::getModel('catalog/category')->load($currentCat->getParentId())->getChildrenCategories();

    if($collection->getSize() >= 1){//there some thing....}else{

//Get Subcategory....

foreach ($subCategories as $subCategoryId ): 

                     if($subCategoryId->getIsActive())
                    {  $products = Mage::getModel('catalog/category')->load($subCategoryId->getId())
                    ->getProductCollection()
                    ->addAttributeToSelect('entity_id')
                    ->addAttributeToFilter('status', 1)
                    ->addAttributeToFilter('visibility', 4);

                        <li <?php if($subCategoryId->getId()==$currentCategoryId){?>class="active"<?php } ?>>
                            <a href="<?php echo $subCategoryId->getURL(); ?>">
                                <?php //echo $subCategoryId->getName()." (".$products->count().")"; ?>
                                <?php echo $subCategoryId->getName(); ?>
                            </a>
                        </li>
                      } endforeach;}?> 
```

如果它有帮助，请告诉我......

谢谢拉维

# asp.net-mvc - 404 取决于查询字符串参数或严格是否存在路由

> ID：15703062
> 
> 赞同：0
> 
> 时间：2013-03-29T12:16:36.487
> 
> 标签：asp.net-mvc, web-applications, asp.net-mvc-routing

假设我有一条路线，例如 /Item/Create/，它创建了一个新项目，但需要一个名为 GroupId 的强制参数。它必须通过 /Item/Create?GroupId=xxx 调用。如果给定的 GroupId 不存在，我可以返回 404 还是根据查询字符串参数返回 404 是错误的？

我知道如果我的路线本身是 /Item/Create/{GroupId} 并且未找到 GroupId，则返回 404 是可以的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:58:06.003

这本身并没有“错误”，状态 404 表示“找不到资源”，您找不到尚未指定的资源。然而，状态 400（错误请求）可能更合适。这实际上归结为错误代码的预期含义和您对错误的解释。

完整的状态码列表可以在[RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)的第 10 节中找到。4xx（错误）代码从[第 10.4 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4)开始。

# java - 在 Java 中减少垃圾收集时间的关键因素或良好做法是什么？

> ID：15703064
> 
> 赞同：2
> 
> 时间：2013-03-29T12:16:41.830
> 
> 标签：java, performance, optimization, memory-management, garbage-collection

在 Java 中减少垃圾收集时间的关键因素或良好实践是什么？

我所知道的是增加 RAM 可能是一个技巧。

影响它的所有其他功能是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:22:16.583

有多种因素：

*   使用的垃圾收集器的类型；
*   收集器配置（例如各种子堆的大小）；
*   内存分配的大小和频率；
*   对象生命周期的典型持续时间。

Hunt 等人的[Java Performance提供了一些关于优化 Java GC 以提高吞吐量和延迟的好材料。](https://rads.stackoverflow.com/amzn/click/com/0137142528)

如果您有实际问题要解决，在您的程序上使用内存分析器通常是一个很好的第一步。

# git - 设置预提交挂钩 jshint

> ID：15703065
> 
> 赞同：35
> 
> 时间：2013-03-29T12:16:48.637
> 
> 标签：git, github, jshint, pre-commit-hook

我最近[在 github 上启动了一个项目](https://github.com/scaljeri/sway)。我已经设法在每次提交后使用 Travis 设置自动测试。但现在我也想用 jshint 设置一个预提交钩子。因此，如果 jshint 报告错误，则提交应该失败。但这可能吗？如果可以，该怎么做？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-10-24T22:31:25.703

在您的 Node.js 工作流程中进行预提交检查（例如 JSHint）有一种***更简单的方法：***

从 NPM安装[jshint ：](https://www.npmjs.org/package/jshint)

`npm install jshint`

如果您还没有，接下来在您的项目中创建一个**.jshintrc文件。**例如：[https ://github.com/nelsonic/learn-jshint/blob/master/.jshintrc](https://github.com/nelsonic/learn-jshint/blob/master/.jshintrc)

现在安装[预提交](https://www.npmjs.org/package/pre-commit)模块（并将其保存为开发依赖项）：

`npm install pre-commit --save-dev`

接下来，您需要在**package.json中定义为 JSHint 运行的任务（脚本）**

例如：

`{ "scripts": { "jshint": "jshint -c .jshintrc --exclude-path .gitignore ." } }`

然后注册要在提交前运行的脚本（也在 package.json 中），例如：

`"pre-commit": [ "jshint", "coverage", "etc" ]`

这使您可以在预提交工作流程中进行不止一项检查。（我们有检查以确保团队成员的代码符合 JSHint、代码风格和测试覆盖率是 100%）

有关您可以与您的团队分享的更详细的教程，请参阅：[**https ://github.com/nelsonic/learn-pre-commit**](https://github.com/nelsonic/learn-pre-commit)

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-04-02T06:56:27.253

> 但这可能吗……

是的！这个有可能。我[最近写过它](http://globaldev.co.uk/2012/11/maintaining-consistent-javascript-with-jslint/)。请注意，它不是特定于 GitHub，只是一般的 Git - 因为它是一个预提交挂钩，它*在*任何数据发送到 GitHub 之前运行。

*存储库的/.git/hooks*目录中任何适当命名的可执行文件都将作为挂钩运行。默认情况下，那里可能已经有一堆示例钩子。[这是一个简单的 shell 脚本](https://gist.github.com/jamesallardice/d307b311785b1d135169)，我将它用作 JSLint 预提交钩子（您可以很容易地修改它以使用 JSHint）：

```
#!/bin/sh

files=$(git diff --cached --name-only --diff-filter=ACM | grep "\.js$")
if [ "$files" = "" ]; then 
    exit 0 
fi

pass=true

echo "\nValidating JavaScript:\n"

for file in ${files}; do
    result=$(jslint ${file} | grep "${file} is OK")
    if [ "$result" != "" ]; then
        echo "\t\033[32mJSLint Passed: ${file}\033[0m"
    else
        echo "\t\033[31mJSLint Failed: ${file}\033[0m"
        pass=false
    fi
done

echo "\nJavaScript validation complete\n"

if ! $pass; then
    echo "\033[41mCOMMIT FAILED:\033[0m Your commit contains files that should pass JSLint but do not. Please fix the JSLint errors and try again.\n"
    exit 1
else
    echo "\033[42mCOMMIT SUCCEEDED\033[0m\n"
fi 
```

你可以简单地把它放在你的 Git hooks 目录中一个名为*pre-commit*的可执行文件中，它会在每次提交之前运行。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-01-20T16:17:27.260

对@James Allardice 脚本进行了一些更改以适应[JSHint](http://www.jshint.com/)。感谢您提供原始代码。

```
#!/bin/sh
#
# Run JSHint validation before commit.

files=$(git diff --cached --name-only --diff-filter=ACMR -- *.js **/*.js)
pass=true

if [ "$files" != "" ]; then
    for file in ${files}; do
        result=$(jshint ${file})

        if [ "$result" != "" ]; then
            echo "$result"
            echo "\n"
            pass=false
        fi
    done
fi

if $pass; then
    exit 0
else
    echo ""
    echo "COMMIT FAILED:"
    echo "Some JavaScript files are invalid. Please fix errors and try committing again."
    exit 1
fi 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-02T08:59:55.567

与@igor 类似的脚本，但有一些改进：

*   颜色指示器
*   没有 --diff-filter, grep 使用 insead
*   帮助消息（git 样式）以避免预提交调用

* * *

```
#!/bin/sh
#
# Run JSHint validation before commit.

RED='\033[0;31m'
REDBOLD='\033[1;31m'
ORANGE='\033[0;33m'
NC='\033[0m' # No Color

files=$(git diff --cached --name-only | grep .js)
pass=true
totalErrors=0

if [ "$files" != "" ]; then
    for file in ${files}; do
        result=$(jshint ${file})
        if [ "$result" != "" ]; then
            echo "${RED}$result${NC}"
            pass=false
            totalErrors=$((totalErrors+1))
        fi
        echo ""
    done
fi

if $pass; then
    exit 0
else
    echo "${ORANGE}===== ${totalErrors} JSHint Error${NC}"
    echo ""
    echo "${REDBOLD}COMMIT FAILED: Some JavaScript files are invalid. Please fix errors and try committing again.${NC}"
    echo ""
    echo "  (use -n option \"git commit -n -m <message>\" to avoid call pre-commit hook and JSHint check)"
    echo ""
    exit 1
fi 
```

# java - 打印未找到文件的 NullPointerException

> ID：15703074
> 
> 赞同：0
> 
> 时间：2013-03-29T12:17:19.130
> 
> 标签：java, file

`NullPointerException`如果找不到文件，如何打印？我想显示一条消息，`JOptionPane`但它没有用。

我尝试了以下方法：

```
public void readTextFile()  {
    FileInputStream fs = null;

    try {
        URL file2 = getClass().getResource("/ReadWriteFile/Student.txt");
        String file_path=file2.getPath();
        file_path=file_path.replaceFirst("/","");
        File file = new File(file_path);
        fs = new FileInputStream(file);
        BufferedReader reader = new BufferedReader(new InputStreamReader(fs));

        try {
            String line = reader.readLine();

            while(line != null){    
                System.out.println("line=="+line);    
                line = reader.readLine();
            }   
        } 

        catch (IOException e) {
            e.printStackTrace();
        }   
    } 

    catch (FileNotFoundException ex) {
        JOptionPane.showMessageDialog(null,"The file you trying to reach is not found");
        Logger.getLogger(Read_WriteToFile.class.getName()).log(Level.SEVERE, null, ex);
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:27:21.663

```
try {

...

} catch (Exception e) {
     e.printStackTrace();

} 
```

它将打印所有异常，包括`RunTimeException`s like`NullPointerException`

# java - 如何使用 jcreator 打开 .project？

> ID：15703084
> 
> 赞同：0
> 
> 时间：2013-03-29T12:17:47.907
> 
> 标签：java, ide, jcreator

我有一个由 JCreator 编写的 java 项目。我以前从未使用过 JC（我是 netbeans 用户）我安装了 JCreator，现在无法打开项目。也许我不知道如何......有.project 和 .classpath 文件以及 src 、 bin 和 .settings 文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:35:37.710

对于 JCreator 运行项目来说，运行 Main 就足够了。无论如何我都没有找到打开 .project 文件，但运行 Main 就足够了。

# c# - 如何使用 web 控件在 aspx 页面中显示 pdf 文档？

> ID：15703089
> 
> 赞同：1
> 
> 时间：2013-03-29T12:18:01.223
> 
> 标签：c#, asp.net

我创建了一个 Web 应用程序，用户可以通过阅读 PDF 文档来完成他的课程。为此，我需要在新的 aspx 页面中打开该 PDF 文件。

是否有任何控件可以打开 PDF？或者有没有其他方法可以打开PDF？

如果你知道请帮助我。

谢谢和问候， k.kavya

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:22:45.130

你可以试试这个

```
private void ReadPdfFile()
        {
            string path = @"C:\Swift3D.pdf";
            WebClient client = new WebClient();
            Byte[] buffer =  client.DownloadData(path);

     if (buffer != null)
        {
            Response.ContentType = "application/pdf"; 
            Response.AddHeader("content-length",buffer.Length.ToString()); 
            Response.BinaryWrite(buffer); 
        }

    } 
```

[您可以在.. http://geekswithblogs.net/azamsharp/archive/2005/09/18/54294.aspx](http://geekswithblogs.net/azamsharp/archive/2005/09/18/54294.aspx)找到更多信息

* * *

现在你的要求是你基本上想要阅读一个 pdf 文件，你可以使用一个好的库，比如 iTextSharp。 [http://sourceforge.net/projects/itextsharp/](http://sourceforge.net/projects/itextsharp/)

然后用它将pdf中的数据提取成字符串

```
public string ReadPdfFile(string fileName)
{
    StringBuilder text = new StringBuilder();

    if (File.Exists(fileName))
    {
        PdfReader pdfReader = new PdfReader(fileName);

        for (int page = 1; page <= pdfReader.NumberOfPages; page++)
        {
            ITextExtractionStrategy strategy = new SimpleTextExtractionStrategy();
            string currentText = PdfTextExtractor.GetTextFromPage(pdfReader, page, strategy);

            currentText = Encoding.UTF8.GetString(ASCIIEncoding.Convert(Encoding.Default, Encoding.UTF8, Encoding.Default.GetBytes(currentText)));
            text.Append(currentText);
        }
        pdfReader.Close();
    }
    return text.ToString();
} 
```

然后将该字符串显示到您的网页中......现在应该不难......希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:25:00.100

这种行为由浏览器本身处理，您只需将 pdf doc 刷新到浏览器（如 GeekyCoder 建议的那样），然后取决于浏览器，您将看到文档或将显示另存为对话框。

没有将显示 pdf 的本机控件。如果您想确保 pdf 始终显示在页面上，您需要自己创建控件（或者搜索免费/付费的自定义控件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T12:26:47.200

在浏览器中查看 PDF 文件（无需下载）需要客户端浏览器的插件。例如，谷歌浏览器有一个内置的 PDF 查看器，可以直接打开文件，而 IE 和 Firefox 则需要您安装插件（Adobe Reader 附带的插件）。

还有另外两种方法：

将文件转换为 HTML、图像或任何其他可以在浏览器中直接查看的格式。这种转换可以使用服务器端（用 PHP、Python、ASP 或任何语言编写）即时进行，或者您可以将所有文件预先转换为可读文件。

另一种最好的方法是使用基于 Flash 的 PDF 查看器（例如[http://flexpaper.devaldi.com/](http://flexpaper.devaldi.com/)）。这很容易、灵活并且不需要编写服务器端代码。许多文档共享站点都使用这种方法（例如[http://www.scribd.com/](http://www.scribd.com/)、[http://www.slideshare.net/](http://www.slideshare.net/)、[http://www.docstoc.com/](http://www.docstoc.com/)）

# android - 等待函数运行然后开始活动

> ID：15703093
> 
> 赞同：0
> 
> 时间：2013-03-29T12:18:20.867
> 
> 标签：android, android-activity

当用户按下开始按钮时，会运行检查以查看 GPS 是否已启用，然后启动活动。checkGPS 使用警报管理器。

```
case R.id.startbtn:
        checkGPS();
        Intent gpslocation=new Intent(this,selection.class);
        startActivity(gpslocation);
        break; 
```

如何完成等待用户启用 GPS 然后开始活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:39:51.093

1）在`onCreate()`方法中，`LocationListener`在您的 Activity 上注册：

```
 // get location manager
   LocationManager lManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE); 
   Button btnStart = (Button)findViewById(R.id.btnStart);
   btnStart.setOnClickListener(new OnClickListener() {
       @Override
       public void onClick(View v) {
            lManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, YourActivity.this);
       }
   }); 
```

2）您的活动应实施`LocationListener`：

```
 public class YourActivity extends Activity implements LocationListener { 
```

3）覆盖方法`LocationListener`：

@Override public void onLocationChanged(Location location) { // 当位置改变时 Log.d(TAG, "location changed.");
}

```
@Override
public void onProviderDisabled(String provider) {
     // when the source (GSP or GSM network) are disabled
     Log.d(TAG, "the source "+provider+" has been disabled");
}

@Override
public void onProviderEnabled(String provider) {
     Log.i(TAG, "the source "+provider+" has been enabled");
     //here you should test if the provider enabled is GPS , if yes , then launch your GPSActivity
     if(provider.equals("gps") {
           Intent gpslocation=new Intent(this,selection.class);
           startActivity(gpslocation);
     }
     else {
           //launch your alert dialog here
     }
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
     Log.i(TAG, "source status "+provider+" has been changed to : "+status);
} 
```

# spring - 如何使用 RabbitMQ 同步两个或多个 Spring 上下文？广播消息/事件？

> ID：15703097
> 
> 赞同：0
> 
> 时间：2013-03-29T12:18:52.327
> 
> 标签：spring, events, rabbitmq, spring-integration

我目前正在评估如何管理多个 Spring 应用程序上下文（即 Tomcat 集群）之间的事件同步的一些想法。

在该用例中，每个上下文都可以产生一个事件 X（无论是*Spring 上下文事件*还是自制事件），必须将其广播到所有其他上下文实例。该事件仅在其“生命周期”中有效，这意味着我不想以任何方式保留它（因为它们很多，并且它们的状态将在几分钟后过时）。

我的想法是使用已经存在的 RabbitMQ 实例。但是，标准的生产者/消费者模式不适合，因为事件应该广播给所有消费者。每个消费者都是生产者……就像聊天室一样。

Q #1：这可能与 RabbitMQ（+Spring 集成）吗？如何构建这样的广播消息设置？

Q #2：这是否可能？有没有人有更好的解决方案/想法？

用例：每个 Web 应用程序上下文都可以产生诸如“用户 x 邀请用户 y”之类的事件，这些事件应该通过 Websocket 或 EventSource 或其他方式尽快传输到用户的浏览器。因为这是（已经）运行的请求，所以操作的地方（服务器 1）可能不是消费的地方（服务器 2）。

解决方案的主要目标是：

1.  （相对）快速且可扩展。
2.  火与忘。如果消息已发送，则将其销毁。如果消息无关紧要，请忘记它。没有坚持。在 RabbitMQ 中，可以使用 TTL 来实现。
3.  该消息正在针对模型进行序列化，即使用杰克逊或类似的东西。
4.  无需根据（活动）上下文/节点的数量进行手动配置。如果我要添加额外的上下文（Web 服务器、后端进程等），我不想修改同步设置。

# 更新 1

[在阅读了Gary Russell](https://stackoverflow.com/users/1240763/gary-russell)的 anwser 之后，我玩了一点。

```
 <beans profile="rabbit">
    <rabbit:connection-factory id="connectionFactory" channel-cache-size="10" host="${rabbitmq.host}"
                               port="${rabbitmq.port}" username="${rabbitmq.username}"
                               password="${rabbitmq.password}" virtual-host="${rabbitmq.virtualhost}"/>
    <rabbit:admin connection-factory="connectionFactory"/>

    <rabbit:queue id="eventQueue" name="${rabbitmq.queue.springevents}" auto-delete="false" durable="true"></rabbit:queue>

    <bean id="amqpTemplate" class="org.springframework.amqp.rabbit.core.RabbitTemplate">
        <property name="connectionFactory" ref="connectionFactory"/>
        <property name="exchange" value="${rabbitmq.springevents.exchange.fanout}"/>
        <property name="replyTimeout" value="${rabbitmq.replyTimeout}"/>
    </bean>

    <!-- Receiving -->
    <int-amqp:inbound-channel-adapter connection-factory="connectionFactory" channel="mqEventInChannelJson"
                                      queue-names="${rabbitmq.queue.springevents}"/>

    <!-- Sending -->
    <int-amqp:outbound-channel-adapter channel="mqEventOutChannelJson" amqp-template="amqpTemplate" routing-key=""
                                       exchange-name="${rabbitmq.springevents.exchange.fanout}" />
</beans> 
```

频道 mqEventOutChannelJson -> 兔子交换 (amqp.fanout) ->

如果我使用这种配置，多个并行启动将跳过事件，因为所有正在运行的进程都在同一个队列（*rabbitmq.queue.springevents*）上运行。是否有可能在不为每个节点提供不同配置的情况下创建自定义队列名称？

我已经使用单独的 Virtualhost 和交换*amqp.fanout*对其进行了测试。与特定的扇出交换相同。

# 更新 2

为了确保每个消费者都有自己的队列，我为每个消费者创建了一个唯一的应用程序 ID。

bean*应用程序*本身创建了一个唯一标识符：

```
@Component("application")
public class Application {

private String id;

@PostConstruct
public void initialize() {
    id = "app" + Math.round(1000 * Math.random());
}

public String getId() {
    return id;
} 
```

}

鉴于此，我可以动态创建一个在公共交易所注册的唯一队列。无需外部配置步骤。

```
 <util:property-path id="applicationId" path="application.id" />
    <rabbit:queue id="eventQueue" name="${rabbitmq.queue.springevents}_#{applicationId}" auto-delete="true" durable="true" exclusive="true">
        <rabbit:queue-arguments>
            <!-- Attention if you want to declare mixed value types: https://jira.springsource.org/browse/AMQP-198 -->
            <entry key="x-message-ttl">
                <value type="java.lang.Long">${rabbitmq.queue.ttl}</value>
            </entry>
        </rabbit:queue-arguments>
    </rabbit:queue> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:06:19.503

You can use a [RabbitMQ topic exchange](http://www.rabbitmq.com/tutorials/tutorial-five-java.html) or a [fanout exchange](http://www.rabbitmq.com/tutorials/tutorial-three-java.html) and have each consumer bind a queue to it. Completely supported by Spring AMQP and Spring Integration.

# python - Python应用程序目录结构（Linux）

> ID：15703098
> 
> 赞同：0
> 
> 时间：2013-03-29T12:18:58.430
> 
> 标签：python, installation, package, dir

当作为 rpm/deb 包安装到系统时，构建 python 应用程序的最佳实践是什么？应用程序代码大部分是用 Python 编写的，还有一些 shell 脚本、配置文件和日志文件。

我在想有如下结构。

*   把 Python 包放在哪里？
*   我需要有应用程序的配置文件，但它会被 Python 包使用。配置文件放在哪里？

> /opt/.../app_name-1.0.0/
> 
> ```
>  bin/
>                       /*Here would be few shell scripts I need*/
>                       shell_script_1.sh
>                       shell_script_2.sh
> 
>                    var/
>                        log/
>                           /* Log files */
>                           app_name.log
>                        notifications/
>                                     /* notifications, generated by app,
>                                        temporarily kept */
>                                     alert_1.tmp
>                                     alert_2.tmp 
> 
>                    etc/
>                        /*python package configuration*/
>                        /*is it better to put this in package dir?*/
>                        app_name.config 
> 
>                    app_name/
>                            /*Python package, the main content*/
>                             __init__.py
>                             app_name.py
>                             a.py
>                             b.py
>                             config_file_reader.py
> 
>                             subpackage_1/                  
>                                           __init__.py
>                                           c.py
>                             subpackage_2/                  
>                                           __init__.py
>                                           d.py 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:31:55.073

您可以将配置文件放在主目录中，许多应用程序都会这样做（例如 bash、vim...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:16:37.240

将 python 代码放入标准 python 目录将是最好的。（例如 /usr/local/lib/pythonX.Y/site-packages）。不幸的是，我需要将源代码放在应用程序目录中，所以我将把它放在我认为第二好的地方：/opt/.../app_name-1.0.0/lib/python/app_name/

和配置文件去 etc/

好吧，我不确定这如何符合标准，但对我来说似乎已经足够了。

# javascript - onclick 文本框创建（编辑行）

> ID：15703100
> 
> 赞同：1
> 
> 时间：2013-03-29T12:19:03.057
> 
> 标签：javascript, html

单击任意行的文本，TEXTAREA 会出现“Ready！” 按钮。

我只需要文本框进行编辑而无需“准备好！” 按钮。我们应该怎么做？

## JavaScript

```
var editing = false;
if (document.getElementById && document.createElement) {
    var butt = document.createElement('BUTTON');
    var buttext = document.createTextNode('Ready!');
    butt.appendChild(buttext);
    butt.onclick = saveEdit;
}

function catchIt(e) {
    if (editing) return;
    if (!document.getElementById || !document.createElement) return;
    if (!e) var obj = window.event.srcElement;
    else var obj = e.target;
    while (obj.nodeType != 1) {
        obj = obj.parentNode;
    }
    if (obj.tagName == 'TEXTAREA' || obj.tagName == 'A') return;
    while (obj.nodeName != 'TD' && obj.nodeName != 'HTML') {
        obj = obj.parentNode;
    }
    if (obj.nodeName == 'HTML') return;
    var x = obj.innerHTML;
    var y = document.createElement('TEXTAREA');
    var z = obj.parentNode;
    z.insertBefore(y, obj);
    z.insertBefore(butt, obj);
    z.removeChild(obj);
    y.value = x;
    y.focus();
    editing = true;
}

function saveEdit() {
    var area = document.getElementsByTagName('TEXTAREA')[0];
    var y = document.createElement('TD');
    var z = area.parentNode;
    y.innerHTML = area.value;
    z.insertBefore(y, area);
    z.removeChild(area);
    z.removeChild(document.getElementsByTagName('button')[0]);
    editing = false;
}

document.onclick = catchIt; 
```

## HTML

```
<table border=1 class="display">
    <thead>
        <tr class="portlet-section-header results-header">
            <th class="sorting">Operator ID</th>
            <th class="sorting">Status</th>
            <th class="sorting">First Name</th>
            <th class="sorting">Last Name</th>
            <th class="sorting">Email</th>
            <th class="sorting">Role</th>
            <th class="sorting_disabled">Select All
                <br />
                <input type="checkbox" onclick="checkAll(this);" name="check" />
            </th>
        </tr>
    </thead>
    <tbody>
        <tr class="odd">
            <td>Test1</td>
            <td>Active</td>
            <td>wsrc</td>
            <td>wsrc</td>
            <td>aa@aa.com</td>
            <td>SE Admin</td>
            <td>
                <input type="checkbox" value="3" onclick="checkAllRev(this);" name="deleteItem" />
            </td>
        </tr>
        <tr class="even">
            <td>Test2</td>
            <td>Inactive</td>
            <td>EAI</td>
            <td>SUBSYSTEM</td>
            <td>aa@aa.com</td>
            <td>API</td>
            <td>
                <input type="checkbox" value="4" onclick="checkAllRev(this);" name="deleteItem" />
            </td>
        </tr>
        <tr class="odd">
            <td>Test3</td>
            <td>Inactive</td>
            <td>Dunning</td>
            <td>Portal</td>
            <td>aa@aa.com</td>
            <td>API</td>
            <td>
                <input type="checkbox" value="5" onclick="checkAllRev(this);" name="deleteItem" />
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:32:10.217

只需删除按钮特定代码。它甚至说那里有按钮。

```
var editing = false;

function catchIt(e) {
    if (editing) return;
    if (!document.getElementById || !document.createElement) return;
    if (!e) var obj = window.event.srcElement;
    else var obj = e.target;
    while (obj.nodeType != 1) {
        obj = obj.parentNode;
    }
    if (obj.tagName == 'TEXTAREA' || obj.tagName == 'A') return;
    while (obj.nodeName != 'TD' && obj.nodeName != 'HTML') {
        obj = obj.parentNode;
    }
    if (obj.nodeName == 'HTML') return;
    var x = obj.innerHTML;
    var y = document.createElement('TEXTAREA');
    var z = obj.parentNode;
    z.insertBefore(y, obj);
    z.insertBefore(butt, obj);
    z.removeChild(obj);
    y.value = x;
    y.focus();
    editing = true;
    y.onblur = saveEdit;
}

function saveEdit() {
    var area = document.getElementsByTagName('TEXTAREA')[0];
    var y = document.createElement('TD');
    var z = area.parentNode;
    y.innerHTML = area.value;
    z.removeChild(area);
    editing = false;
}

document.onclick = catchIt; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:36:35.267

删除按钮很简单。但这导致了一个明显的问题：如何保存编辑过的文本。例如，没有按钮，您可以保存它`onblur`：

```
function catchIt(e) {
    // ...
    y.onblur = saveEdit;
    // ...
} 
```

演示：http: [//jsfiddle.net/dfsq/XQCFa/](http://jsfiddle.net/dfsq/XQCFa/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T12:34:31.440

```
if (document.getElementById && document.createElement) {
    var butt = document.createElement('BUTTON');
    var buttext = document.createTextNode('Ready!');
    butt.appendChild(buttext);
    butt.onclick = saveEdit;
} 
```

相应地更新此代码，它是使用 Ready! 创建一个新元素（按钮）！文本。

# c# - RDLC - 默认参数

> ID：15703104
> 
> 赞同：0
> 
> 时间：2013-03-29T12:19:13.030
> 
> 标签：c#, asp.net, rdlc, report-viewer2010

我正在研究其他人之前创建的 RDLC 报告。它定义了一个报告参数。

现在的要求是从代码后面没有人将任何值传递给报告参数，我希望默认情况下应该从数据集的列之一中获取值。

当我右键单击 Reportparameter 时，有一个名为 DefaultValues 的选项 - >从查询中获取值 - >（选择数据集和值字段）。在此之后，当我运行应用程序时，我所拥有的是，只有空屏幕。

如果有人有任何疑问，请告诉我。

# w3c-validation - 省略了“div”的结束标记，但指定了 OMITTAG NO

> ID：15703109
> 
> 赞同：0
> 
> 时间：2013-03-29T12:19:34.327
> 
> 标签：w3c-validation

请帮助我，我无法弄清楚。

> 第 1011 行，第 2 列：省略了“div”的结束标记，但指定了 OMITTAG NO

我添加了额外的`</div>`，但问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-09T11:27:14.147

尝试关闭 /div 之前的元素。我遇到了地图 id="" 的问题，我必须在关闭 div 之前关闭 /map 元素才能工作。

# ant - 更改 Ant 中两个目标中变量的值

> ID：15703111
> 
> 赞同：2
> 
> 时间：2013-03-29T12:19:40.877
> 
> 标签：ant

我有一个目标：

```
<target name="add_inner_class" >
    <property name="client.jar.classes"
              value="${client.class.jar.package.list}"/>
    <foreach list="${client.class.jar.package.list}"
             target="add_inner_class_list" param="outer_class"
             delimiter=" " inheritall="true" />
</target> 
```

这个目标调用第二个目标`"add_inner_class_list"`。

在第二个目标中，我想更新调用目标中定义的属性（即名为 的属性`client.jar.classes`）。在每次调用中，我希望这个值保持不变并在需要时进行更新。

我想知道，我可以在 Ant 中执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:05:30.083

简短的回答是否定的，你不能这样做，因为 Ant[属性是不可变的](http://ant.apache.org/manual/Tasks/property.html)。属性一旦有了值，就无法更改。引用文档：

> 属性是不可变的：首先设置属性的人会在接下来的构建中冻结它；它们绝对不是变量。

虽然有几件事你可以用来实现你想要的。首先是 Ant[`<local>`任务](http://ant.apache.org/manual/Tasks/local.html)，它允许您拥有一个目标本地属性的实例，该实例具有与目标外部不同的值。但是看看你的问题的细节，你似乎想要一个变量而不是一个属性——你想要随意改变这个值。由于您已经在使用 ant-contrib，为什么不使用 a[`<var>`](http://ant-contrib.sourceforge.net/tasks/tasks/variable_task.html)呢？Ant-contrib 变量是可变的，在大多数情况下，可以直接使用来代替 Ant 属性。

# java - 将 Int 数组覆盖到光栅 Java

> ID：15703112
> 
> 赞同：2
> 
> 时间：2013-03-29T12:19:48.110
> 
> 标签：java, arrays, int, bufferedimage, raster

这一天我在看[这个](http://www.youtube.com/watch?v=fPSJnzA0nLY)教程，他用了这条线......

```
private int[] pixels =((DataBufferInt)image.getRaster().getDataBuffer().getData()); 
```

但是由于某种原因对他来说它有效，但对我来说却没有，我总是得到这两个错误......

*   类型不匹配：无法转换`DataBufferInt`为 `int[]`
*   该类型的方法`getData()`未定义 `DataBuffer`

请帮帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T12:21:26.537

我经常有这个。注意括号：

```
private int[] pixels =((DataBufferInt)image.getRaster().getDataBuffer()).getData(); 
```

# ruby-on-rails-3 - Activeadmin can can 授权错误

> ID：15703116
> 
> 赞同：7
> 
> 时间：2013-03-29T12:19:59.650
> 
> 标签：ruby-on-rails-3, activeadmin, cancan

在调用**controller.load_and_authorize_resource时出现以下错误**

```
 protected method `authorize!' called for #<Admin::ProjectsController:0x1405de80> 
```

这发生在捆绑更新之后。

Gem 文件包含以下条目，

```
 gem "activeadmin" , git: 'git://github.com/gregbell/active_admin.git' 
```

活动管理员版本：0.5.1

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:09:52.577

对于 ActiveAdmin v0.6.0，他们根据这张[票添加了适配器](https://github.com/gregbell/active_admin/pull/1817)

查看更新的[文档](http://activeadmin.info/docs/13-authorization-adapter.html)

# java - Java Collections Framework 中常见方法（大小）的意外复杂性？

> ID：15703120
> 
> 赞同：14
> 
> 时间：2013-03-29T12:20:16.093
> 
> 标签：java, data-structures, collections, size, complexity-theory

最近，我对一些 Java 集合没有方法 size() 的恒定时间操作这一事实感到惊讶。

虽然我了解到集合的并发实现为了获得并发性（ConcurrentLinkedQueue、ConcurrentSkipListSet、LinkedTransferQueue 等中的大小为 O(n)）而做出了一些妥协，但好消息是这在 API 文档中得到了正确记录。

让我担心的是某些集合的方法返回的视图上的方法大小的性能。例如，[TreeSet.tailSet](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html#tailSet(E))返回其元素大于或等于 fromElement 的支持集部分的视图。令我惊讶的是，在返回的 SortedSet 上调用 size 在时间上是线性的，即 O(n)。至少那是我设法从 OpenJDK 的源代码中挖掘出来的：在 TreeSet 中作为 TreeMap 的包装器实现，在 TreeMap 中，有一个 EntrySetView 类，其大小方法如下：

```
abstract class EntrySetView extends AbstractSet<Map.Entry<K,V>> {
    private transient int size = -1, sizeModCount;

    public int size() {
        if (fromStart && toEnd)
            return m.size();
        if (size == -1 || sizeModCount != m.modCount) {
            sizeModCount = m.modCount;
            size = 0;
            Iterator i = iterator();
            while (i.hasNext()) {
                size++;
                i.next();
            }
        }
        return size;
    }

    ....
} 
```

这意味着第一次调用大小是 O(n)，然后只要不修改支持映射，它就会被缓存。我无法在 API 文档中找到这个事实。更有效的实现将是 O(log n)，在子树大小的缓存中进行内存权衡。由于为避免代码重复（TreeSet 作为 TreeMap 的包装器）而进行了此类权衡，因此我看不出出于性能原因不应制作它们的原因。

不管我对 TreeSet 的 OpenJDK 实现的（非常简短的）分析是对还是错，我想知道是否有关于许多此类操作的性能的详细而完整的文档，尤其是那些完全出乎意料的操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T13:16:07.257

> 例如，`TreeSet.tailSet`返回元素大于或等于 的支持集部分的视图`fromElement`。令我惊讶的是，`size`返回的调用`SortedSet`在时间上是线性的，即`O(n)`.

对我来说这并不奇怪。考虑 javadoc 中的这句话：

> “返回的集合是由这个集合支持的，所以返回集合中的变化会反映在这个集合中，反之亦然。”

Since the tail set is a dynamic view of the backing set, it follows that its size has to be calculated dynamically in practice. The alternative would require that when a change was made to the backing set, it would have to adjust the sizes of all extant tailset (and headset) views. That would make updates to the backing set more expensive, AND it would present a storage management problem. (In order to update the view sizes, the backing set would need references to all existing view sets ... and that is a potential hidden memory leak.)

Now you do have a point regarding the documentation. But in fact, the javadocs says nothing about the complexity of the view collections. And, indeed, it doesn't even document that `TreeSet.size()` is `O(1)`! In fact, it only documents the complexity of the `add`, `remove` and `contains` operations.

* * *

> I would like to know is there a detailed and complete documentation on performance of many such operations especially ones which are completely unexpected?

AFAIK, No. Certainly, not from Sun / Oracle ...

# asp.net - 在 Gridview 中使用 LinkBut ton 进行分页

> ID：15703128
> 
> 赞同：0
> 
> 时间：2013-03-29T12:20:45.317
> 
> 标签：asp.net, c#-4.0

我在 Gridview 中使用 LinkBut​​ton。

在 Gridview 中进行分页时，它会给出一个错误，即索引不能为空/索引超出范围。

如果假设 PageSize=10 那么在 10 之后它找不到 LinkBut​​ton 所以它给出了错误消息。

所以我该怎么做 ？

```
 <asp:GridView ID="grid_inbox" runat="server" AutoGenerateColumns="False" GridLines="Horizontal"
        OnRowCommand="grid_inbox_RowCommand" EmptyDataText="No Data Found..!!" Width="100%"
        BackColor="White" BorderColor="#E5E5E5" BorderStyle="None" BorderWidth="1px"
        CellPadding="4" ForeColor="#222222" RowStyle-Height="35" AllowPaging="true" PageSize="12">
        <Columns>
            <asp:TemplateField HeaderStyle-Width="3%" FooterStyle-Width="3%" ItemStyle-Width="3%">
                <ItemTemplate>
                    <asp:CheckBox ID="Delete_CheckBox" runat="server" />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Message">
                <ItemTemplate>
                    <asp:HyperLink ID="Message_hl" runat="server" Font-Overline="false" ForeColor="Black"
                        Text='<%#Eval("message") %>' NavigateUrl='<%# String.Format("~/Templet/SendBox_DisplayList.aspx?inbox_id1={0}",Eval("inbox_id")) %>'>HyperLink</asp:HyperLink>
                </ItemTemplate>
            </asp:TemplateField>
            <%--            <asp:BoundField DataField="message" HeaderText="Message" />--%>
            <asp:BoundField DataField="Message_From1" HeaderText="Message From" HeaderStyle-Width="12%"
                FooterStyle-Width="12%" ItemStyle-Width="12%"></asp:BoundField>
            <asp:BoundField DataField="message_to" HeaderText="Message To" HeaderStyle-Width="12%"
                FooterStyle-Width="12%" ItemStyle-Width="12%"></asp:BoundField>
            <asp:TemplateField HeaderStyle-Width="13%" FooterStyle-Width="13%" ItemStyle-Width="13%">
                <ItemTemplate>
                    <asp:LinkButton runat="server" ID="lnk_reply" ForeColor="Maroon" Text="Reply" CommandName="Reply"
                        CommandArgument="<%#((GridViewRow)Container).RowIndex%>"></asp:LinkButton>
                    &nbsp;
                    <asp:LinkButton runat="server" ID="lnk_reject" ForeColor="Maroon" Text="Reject" CommandArgument="<%#((GridViewRow)Container).RowIndex%>"
                        CommandName="Reject"></asp:LinkButton>
                    &nbsp;
                    <asp:LinkButton runat="server" ID="lnk_accept" ForeColor="Maroon" CommandName="Accept"
                        CommandArgument='<%#Eval("inbox_id")%>' Text="Accept"> </asp:LinkButton>
                    <asp:HiddenField runat="server" ID="hdf" Value='<%#Eval("message") %>' />
                    <asp:HiddenField runat="server" ID="hdf_inbox_id" Value='<%#Eval("inbox_id")%>' />
                    <asp:HiddenField runat="server" ID="hdf_msg_to_name" Value='<%#Eval("Message_From")%>' />
                    <asp:HiddenField runat="server" ID="hdf_message_from" Value='<%#Eval("Message_From1")%>' />
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
        <FooterStyle BackColor="#CCCC99" ForeColor="#222222" />
        <PagerStyle BackColor="White" ForeColor="Black" HorizontalAlign="Left" />
        <HeaderStyle BackColor="White" Font-Bold="True" BorderColor="#E5E5E5" Height="35px"
            ForeColor="#222222" HorizontalAlign="Left" />
        <SelectedRowStyle BackColor="#F5F5F5" Font-Bold="True" ForeColor="White" />
    </asp:GridView> 
```

而cs代码是...

```
 for (int i = 0; i < j; i++)
    {
        int level_from = Int32.Parse(dt.Rows[i]["level_from"].ToString());
        int level_to = Int32.Parse(dt.Rows[i]["level_to"].ToString());
        LinkButton reply_btn1 = grid_inbox.Rows[i].Cells[0].FindControl("lnk_reply") as LinkButton;

        HyperLink msg = grid_inbox.Rows[i].Cells[0].FindControl("Message_hl") as HyperLink;

        //Show message upto 100 character
        string submsg = dt.Rows[i]["message"].ToString();
        int msglen = submsg.Length;
        if (msglen < 100)
        {
            submsg = submsg.Substring(0, msglen);
        }
        else
        {
            submsg = submsg.Substring(0, 100);
        }
        msg.Text = submsg; 
```

它会做的是，它找到 HyperLink/LinkBut​​ton 控件并为其分配一个文本。

但是如果我使用 Paging 然后在 Paging Size 结束后（假设 PageSize=10），它找不到 HyperLink 控件。因为现在 pageIndex 从 1 变成了 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:51:27.013

我认为您需要在使用分页时在网格视图中管理 onselectedindexchanged ..

```
<asp:GridView ID="grid_inbox" runat="server" AutoGenerateColumns="False" GridLines="Horizontal"
        OnRowCommand="grid_inbox_RowCommand" EmptyDataText="No Data Found..!!" Width="100%"
        BackColor="White" BorderColor="#E5E5E5" BorderStyle="None" BorderWidth="1px"
        CellPadding="4" ForeColor="#222222" RowStyle-Height="35" 
        AllowPaging="true" PageSize="12" 
        onselectedindexchanged="grid_inbox_SelectedIndexChanged"> 
```

在 CS

```
protected void grid_inbox_SelectedIndexChanged(object sender, EventArgs e)
{
    //Do your stuff
} 
```

请按照下面的 url 维护 gridview 中的 [分页 GridView 分页和排序](http://www.codeproject.com/Articles/67520/GridView-Paging-and-Sorting)

# database - Perl，对 .txt 文件中的数据进行排序

> ID：15703132
> 
> 赞同：0
> 
> 时间：2013-03-29T12:21:11.910
> 
> 标签：database, perl, csv

我编写了一个为文件添加新值的程序。文本文件。现在我想编写选项，以便我可以对所选列的文件中的数据进行排序，并能够使用正则表达式搜索任何列中的数据。怎么办？

```
sub show_database 
{
     $file = 'baza.txt';
     print "Database \n";
     open(my $data, '<', $file) or die "Could not open '$file' $!\n";

     while (my $line = <$data>) 
     { 
         chomp $line;
         my @fields = join(" ", split(';', $line));
         print @fields;
         print " ";
         print "\n";

     }
}
sub insert{

    print "\n \nInset new data: Name;Surname;Year \n";

    open(PLIK,'baza.txt');
    while(<PLIK>)
    {
      $linia = $_;
    }
    $ostatnia = $linia;
    @tablica = $ostatnia;
    @tab = split(/;/,$ostatnia);

    $poprzedni = $tab[0];
    $poprzedni++;

    close PLIK;

    $dane = <STDIN>;
    open(BAZA, '>>baza.txt');
    print BAZA $poprzedni;
    print BAZA ";";
    print BAZA $dane;

    close BAZA;
}
sub menu{

    print "\n \n \n \n";
    print "1 - Read database \n";
    print "2 - Insert new row \n";
    print "0 - EXIT \n \n"; 
    $opcja = <STDIN>;
}
system("clear");
menu();
if($opcja == 1)
{
    show_database();
}
if($opcja == 2)
{
    insert();
    menu();
}
if($opcja == 0)
{
    exit;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:45:39.090

我建议使用[Tie::File](https://metacpan.org/pod/Tie::File)：

```
#!/usr/bin/perl
use strict;
use warnings;

use Tie::File;

tie my @file, Tie::File, "/path/to/some/file.txt" or die $!;

@file = sort by_column1 @file;
print join("\n", @file) . "\n";

untie @file;

sub by_column1 {
    (split(";", $a))[1] <=> (split(";", $b))[1]
} 
```

另一种选择是使用[DBD::CSV](https://metacpan.org/pod/DBD::CSV)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:51:04.323

好的，我解决了。wyszukwaniem 现在使用正则表达式处理选定列之后的文件。

# php - 如何在javascript文件中插入php变量？

> ID：15703134
> 
> 赞同：0
> 
> 时间：2013-03-29T12:21:16.500
> 
> 标签：php, javascript, variables, include

我的页面有 3 种语言版本，我在每个文件（索引、联系人等）的标题中都包含了所选语言文件（en、ru、pl）。

```
<?php
session_start();
include('language/'.$_SESSION['lang'].'.php');
?> 
```

**en.php**

```
<?php
session_start();
$lang = array();

$lang['hello'] = 'Hello';
$lang['world'] = 'World !';
?> 
```

**ru.php**

```
<?php
session_start();
$lang = array();

$lang['hello'] = 'привет';
$lang['world'] = 'мир';
?> 
```

这就是我回应他们的方式：

```
<p><? echo $lang['hello'].' '.$lang['world'];?></p> 
```

这实际上工作正常，但我的 .js 文件有问题。如果我想提醒或在某处我不能插入一些文本。

例如，在我的一个 .js 文件中，我有一个警报：

```
if (something_obj.val() == ''){
   alert('Wrong username given !');
   return false;
} 
```

如何在我的 js 文件中实现语言文件？我需要创建一个新闻 .js 语言文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:27:15.200

您可以为每种语言创建一个 js 文件，其翻译如下所示：

```
// german.js
var translations = {
  'hello': 'hallo',
  'world': 'welt'
}; 
```

在其他 JS 脚本中，只需执行以下操作：

```
alert(translations['hello'] + " " + translations['world']) 
```

当然，您可能希望选择一个比`translations`.

然后，在您的 php 文件中，根据语言包含正确的 JS 脚本：

```
<script src="languages/<?php echo $_SESSION['lang']; ?>.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:27:49.297

您可以创建新文件 - 例如`js.php`，它将加载正确的语言文件并将所有变量打印到 JavaScript 数组中：

`js.php`

```
<script type="text/javascript">
var lang = {
<?php
session_start();
include('language/'.$_SESSION['lang'].'.php');

$data = array();
foreach ( $lang as $key => $value ) {
  $data[] = '"' . $key . '" : "' . $value . '"';
}
echo implode(',', $data);
?>
};
</script> 
```

然后将此文件包含在必须使用 JavaScript 翻译数组的页面上，并将其用于：

```
alert(lang.key); 
```

此外，如果`"`翻译字符串中有符号，则必须使用 转义它`\"`，例如：

```
$value = str_replace('"', '\"', $value); 
```

# django - Django：自定义字段未呈现/未绑定字段引发错误

> ID：15703135
> 
> 赞同：1
> 
> 时间：2013-03-29T12:21:17.337
> 
> 标签：django, forms, rendering, custom-fields

我正在尝试使用自定义字段生成一个表单（简而言之：某人回答一系列问题的表单，是测验的一部分。测验问题是使用 Django 管理员管理的，现在我需要一个表单启用提交）。

我知道在模板文件中我应该做一个“for field in form”而不是“for field in form.fields”。

但是，直接遍历*表单*会返回错误：*'WSGIRequest' object has no attribute 'get'*。此错误发生在 django 的 data.get() （由 field.widget.value_from_datadict() 调用）函数中，同时尝试渲染*{{ field }}*。

我知道我正在处理未绑定的字段，但看不到我现在做错了什么。关于这个问题的任何线索？谢谢

# 在forms.py中

```
class ResponseSetForm(forms.Form):

    def __init__(self, request=None, instance=None, *args, **kwargs):
        self.title = "TOTO"
        quizz = kwargs.pop('quizz')
        super(ResponseSetForm, self).__init__(request, instance, *args, **kwargs)
        question_list = quizz.mcquestion_set.all().order_by('position')
        fields={}
        theChoices=quizz.rating_scale.mcqrating_set.all().order_by('value')
        choices = ((x.value, x.label) for x in theChoices)
        for question in question_list:
            fieldname = 'question_%s' % question.identifier
            widget = RadioSelect()
            self.fields[fieldname] = forms.TypedChoiceField(coerce=int, empty_value=None, required=True, label=question.text, choices=choices, widget=widget) 
```

# 在views.py中

```
class QuizzView(FormView):
    http_method_names = ['get', 'post']
    template_name = 'test.html'
    form_class = ResponseSetForm
    success_url = "/"

    def get_form_kwargs(self, *args, **kwargs):
        #used by the form
        kwargs = super(QuizzView, self).get_form_kwargs()
        kwargs.update({
            'request' : self.request,
            'quizz' : self.quizz
        })
        return kwargs

    def dispatch(self, request=None, *args, **kwargs):
        # parse the request here ie.
        self.request = request
        self.quizz = Quizz.objects.prefetch_related('rating_scale', 'mcquestion_set').get(pk=kwargs['pk'])    
        # call the view
        return super(QuizzView, self).dispatch(request, *args, **kwargs) 
```

# 在 test.html 模板文件中：

```
{% if quizz %}
<form action="/mcq/2/" method="post">{% csrf_token %}
  <h2>{{ form.title }}
    <table>
      {% for field in form %}
        <tr>
          <td>{{ field.label }}</td>
          <td>{{ field }}</td>
    </tr>
      {% endfor %}
    </table>
    <p><input type="submit" value="Submit" /></p>
</form>
{% else %}
    <p>No questions are available.</p>
{% endif %} 
```

# 网址模式是：

```
url(r'^(?P<pk>\d+)', QuizzView.as_view(), name='run_quizz') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:44:43.520

好的，所以我发现了问题：在整个流程中，表单始终使用请求进行初始化（即，无论是 GET 还是 POST）。因此，表单被绑定（form.is_bound = True）。

所以我做了什么： - 实现一个类 get() 方法，它为自己设置一个标志来调用表单的未绑定（我在这里使用 self.kwargs，但很可能直接使用类属性） - 将此标志传递给表单通过 view.get_form_kwargs() - 在表单中测试标志。如果设置，那么我在调用 super **Init** () 之前发出 request = None -> 因此表单有 self.is_bound = False

我想如果没有基于类的视图会更简单。

这是在代码方面：

# 在forms.py中

```
class ResponseSetForm(forms.Form):

    def __init__(self, request=None, instance=None, *args, **kwargs):
        try:
            quizz = kwargs.pop('quizz')
        except:
            raise Http404
        if 'unbound' in kwargs:
            del kwargs['unbound']
            the_request = request
            request = None
        super(ResponseSetForm, self).__init__(request, instance, *args, **kwargs)
        self.title = quizz.name
        question_list = quizz.mcquestion_set.all().order_by('position')
        choices=list(((x.value, x.label) for x in quizz.rating_scale.mcqrating_set.all().order_by('value')))
        for question in question_list:
            fieldname = 'question_%s' % question.identifier
            widget = RadioSelect()
            self.fields[fieldname] = forms.TypedChoiceField(coerce=int, empty_value=None, required=True, label=question.text, choices=choices, widget=widget) 
```

# 在views.py中

```
class QuizzView(FormView):
    http_method_names = ['get', 'post']
    template_name = 'test.html'
    form_class = ResponseSetForm
    success_url = "/"

    def get_form_kwargs(self, *args, **kwargs):
        # thekwargs used by the form
        thekwargs = super(QuizzView, self).get_form_kwargs()
        thekwargs.update({
            'request' : self.request,
            'quizz' : self.quizz
        })
        if 'unbound' in self.kwargs:
            del self.kwargs['unbound']
            thekwargs.update({'unbound': "Yes"}) # we want to let the form know that he is not actually bound
        return thekwargs

    def dispatch(self, request=None, *args, **kwargs):
        # parse the request here ie.
        self.request = request
        self.quizz = Quizz.objects.prefetch_related('rating_scale', 'mcquestion_set').get(pk=kwargs['pk'])
        return super(QuizzView, self).dispatch(request, *args, **kwargs)

    def get(self, *args, **kwargs):
        self.kwargs.update({
            'unbound' : True,
        })
        # the below call triggers a call to get_form_kwargs (and call to form)
        return super(QuizzView, self).get(*args, **kwargs) 
```

# php - 获取节点的文本内容，但忽略子节点

> ID：15703137
> 
> 赞同：7
> 
> 时间：2013-03-29T12:21:22.383
> 
> 标签：php, domdocument

```
<foo>
  a
  <bar> b </bar>
</foo> 
```

两者`$foo->textContent`都`$foo->nodeValue`返回`a b`。

我怎样才能得到`a`（来自节点的文本，没有来自任何子节点的文本）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T12:44:07.657

这可能会有所帮助。使用我在[这里](http://php.net/manual/en/class.domnode.php)和[这里找到的](https://stackoverflow.com/questions/191923/how-do-i-iterate-through-dom-elements-in-php)

```
$txt = "";
foreach($foo->childNodes as $node) {
    if ($node->nodeType == XML_TEXT_NODE) {
        $txt .= $node->nodeValue;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T12:37:21.310

使用`firstChild`：

```
$foo->firstChild->textContent; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-29T12:45:28.667

试试这个代码

```
$doc = new DOMDocument();
$doc->loadXML('<root><foo>a<bar>b</bar></foo><foo>bar</foo></root>');
$foos = $doc->getElementsByTagName('foo');
foreach($foos as $v){
   echo $v->firstChild->wholeText.'<br />';
} 
```

的`firstChild`属性`DOMNode`返回一个对象，因为在 first`DOMText`之前有一个“文本节点”`<bar>``<foo>`

# linux - 过滤txt文件中的列

> ID：15703141
> 
> 赞同：1
> 
> 时间：2013-03-29T12:21:32.850
> 
> 标签：linux, bash, awk

我有一个包含 2 列的 csv 文件，例如

```
bob,red
bob,red
sam,blue
judy,black
sam,blue
nick,blue
judy,red
sam,blue
nick,red
don,red
judy,blue 
```

在 Ubuntu 中使用 bash 我需要一个过滤器来仅选择第一列值多次出现但与第二列中超过“X”个值匹配的行。所以如果 "X" = 2 结果将是

```
judy,black
judy,red
judy,blue
nick,blue
nick,red 
```

或者如果 "X" = 3

```
judy,black
judy,red
judy,blue 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:29:41.297

您可以使用

```
sort -u 1.csv 
```

摆脱重复值。然后，您可以计算第 1 列值的出现次数：

```
sort -u 1.csv | cut -f1 -d, | sort | uniq -c | sort -n 
```

现在，您可以使用`sed`仅选择正确的出现次数：

```
sort -u 1.csv | cut -f1 -d, | sort | uniq -c | sort -n | sed -n '/ 2 /,$p' 
```

其余的留给读者练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:52:23.160

如果您想要**[@choroba](https://stackoverflow.com/questions/15703141/filtering-columns-in-txt-file/15703636#15703636)**提供的输出而不是您在问题中要求的输出但没有所有额外的管道：

```
awk -F, -v x=3 '!a[$0]++{c[$1]++}END{for(k in c)if(c[k]>=x)print k,c[k]}' file 
judy 3

awk -F, -v x=2 '!a[$0]++{c[$1]++}END{for(k in c)if(c[k]>=x)print k,c[k]}' file 
judy 3
nick 2 
```

否则，您实际要求的解决方案是：

```
awk -F, -v x=2 '!a[$0]++{c[$1]++;n[$1]?n[$1]=n[$1]"\n"$0:n[$1]=$0}END{for(k in c)if(c[k]>=x)print n[k]}' file
judy,black
judy,red
judy,blue
nick,blue
nick,red

awk -F, -v x=3 '!a[$0]++{c[$1]++;n[$1]?n[$1]=n[$1]"\n"$0:n[$1]=$0}END{for(k in c)if(c[k]>=x)print n[k]}' file
judy,black
judy,red
judy,blue 
```

# android - 使用 Simple-XML-Framework 时出现 ValueRequired 异常

> ID：15703143
> 
> 赞同：5
> 
> 时间：2013-03-29T12:21:44.047
> 
> 标签：android, simple-framework

我正在尝试使用 Simple-XML-framework。但我得到 ValueRequiredException

```
org.simpleframework.xml.core.ValueRequiredException: Unable to satisfy @org.simpleframework.xml.ElementList(data=false, empty=true, entry=, inline=false, name=, required=true, type=void) on field 'Employees' public java.util.List com.example.xmlparsing.Company.Employees for class com.example.xmlparsing.Company at line 2 
```

我的 XML 文件具有以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<Company>
<Emp>
    <Name>Venkat</Name>
    <ID>661511</ID>  
</Emp>
<Emp>
    <Name>Shiv</Name>
    <ID>661311</ID> 
</Emp>
</Company> 
```

我的注释类如下：

公司.java：

```
package com.example.xmlparsing;

import java.util.List;

import org.simpleframework.xml.ElementList;
import org.simpleframework.xml.Root;

@Root
public class Company {

@ElementList
public List<Emp> Employees;

} 
```

Emp.java：

```
package com.example.xmlparsing;

import org.simpleframework.xml.Element;
import org.simpleframework.xml.Root;
import org.simpleframework.xml.Text;

@Element(name="Emp")
public class Emp {

@Element
public String Name;

@Element
public String ID;

} 
```

可能是什么问题呢？如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T19:04:31.937

您的代码中有两处错误：

首先，您需要`@Root()`而不是`@Element`在`Emp`课堂上：

```
@Root(name="Emp")
public class Emp {

@Element
public String Name;

@Element
public String ID;

} 
```

其次，如果您以这种方式使用列表：

```
@Root
public class Company {

@ElementList
public List<Emp> Employees;

} 
```

它被包装到另一个 xml 标记中。
您可以*更改您的 xml*或简单地使用`@ElementList(inline = true)`.

# asp.net-mvc - 如何从 MVC 中的 Action 分配标签值？

> ID：15703144
> 
> 赞同：1
> 
> 时间：2013-03-29T12:21:47.883
> 
> 标签：asp.net-mvc

我想使用返回字符串的 Action 设置标签值（基本上，我希望公司名称出现在我网站的页脚中）。

为此，我做了以下事情。

在视图中

```
 <label>@Url.Action("GetCompanyName", "Home")</label> 
```

并在控制器中

```
 public ActionResult GetCompanyName()
    {
       return Content("CompanyName");
    } 
```

输出如下

```
 /Home/GetCompanyName 
```

我知道这不是正确的做法..

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:29:28.190

您正在寻找：

```
 <label>@{Html.RenderAction("GetCompanyName", "Home");}</label> 
```

您所做的是获取到您的视图的路线，这样做是将结果内联呈现在您的页面上。

*   **Url.Action** - 生成操作方法的完全限定 URL
*   **Html.RenderAction** - 调用指定的子操作方法并在父视图中内联渲染结果
*   **Html.Action** - 使用指定的参数调用指定的子操作方法，并将结果作为 HTML 字符串返回。

# php - 如何在 php 中使用 Google API 进行抄袭检测

> ID：15703147
> 
> 赞同：3
> 
> 时间：2013-03-29T12:21:55.220
> 
> 标签：php, plagiarism-detection

我正在用php构建一个小型抄袭检测系统以供练习。好吧，我对谷歌做了一些研究，发现我可以使用谷歌 API（自定义搜索 API）来构建一个抄袭检测软件。

[好吧，我发现这个问题非常有帮助 [你将如何编写一个反剽窃网站？]](https://stackoverflow.com/questions/1085048/how-would-you-code-an-anti-plagiarism-site)

我已经设法使用以下代码从 google api 获取搜索结果

```
<?php
ini_set('max_execution_time',300);
require_once '../../src/Google_Client.php';
require_once '../../src/contrib/Google_CustomsearchService.php';
session_start();

$client = new Google_Client();
$client->setApplicationName('Google CustomSearch PHP Starter Application');
$client->setDeveloperKey('MY_DEVELOPER_KEY');
$search = new Google_CustomsearchService($client);

$to_search="This is the text that should be searched in google so that the result that     I obtain can be used by my codes to perform plagarism analysis";

$result = $search->cse->listCse($to_search, array('cx' => 'MY_SEARCH_ENGINE_ID'));
 for($i=0; $i<6; $i++)
 {

   print "<pre>" . print_r($result, true) . "</pre>";

 }
?> 
```

从 $result 变量我有从谷歌搜索获得的 [link]、[snippet] 和 [html snipped]。使用下面的代码

```
 $result['items'][$i]['snippet'];
$result['items'][$i]['link']; 
```

这里 $i 是从循环获得的整数值。

**问题是** 如您所知，我只能发送短关键字或几行用于在 google 中搜索，但不能发送大文本，所以我应该将大块文本分成小行，然后运行多个查询吗？还是我应该做点别的？可以分析我将获得的片段和链接值是否存在抄袭。这样做会导致大量查询超出每天一百个查询的限制。

请建议我做我应该做的事情的正确方法。我向谷歌查询的方式，然后用用户输入分析大量文本是否存在抄袭，**这是正确的方式吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:24:42.907

我会这样做的方式是谷歌页面标题寻找完全匹配。如果有人窃取了您的内容，他们很有可能使用了相同的标题。

然后，您可以从这里拉出可能被盗内容的页面并进行比较。

一种更复杂的方法是在您自己的内容中搜索统计上不太可能出现的单词和短语。现代使用率低于平均水平的单词。然后谷歌搜索包含所有最不可能单词的内容。然而，这将比第一种方法困难得多，因为您需要在 Google 中建立一个包含低搜索结果词和过度使用词的大型数据库。

第三种技术是在您的内容中搜索拼写错误的单词。然后让你的脚本谷歌拼写错误并寻找匹配项。

第四个——这只是预防性的，最适合阻止自动抓取工具是让你的系统发明一个虚构的词——一串字母和数字，根本不可能有任何搜索结果。然后让脚本监视新的搜索结果。

以上的组合可能会制作一个非常出色的脚本和一顶帽子，我会敦促你作为开源发布。

祝你的项目好运。

# google-play - android 未发布的应用程序获得下载

> ID：15703162
> 
> 赞同：2
> 
> 时间：2013-03-29T12:22:46.180
> 
> 标签：google-play

我丢失了我的 google play 应用程序的密钥，所以我取消了它并发布了一个具有新包名称的新应用程序。

自从我取消发布它已经有 2 个月了，在此期间，我仍然在未发布的应用程序上获得下载和评分。但是，如果您在 Google Play 上搜索或访问开发者页面，您将找不到它。我什至不知道人们如何下载它。这是未发布应用的链接[https://play.google.com/store/apps/details?id=com.triple.nilesat](https://play.google.com/store/apps/details?id=com.triple.nilesat)

# ios - ios - 更改“更多”选项卡的导航栏色调颜色

> ID：15703167
> 
> 赞同：1
> 
> 时间：2013-03-29T12:23:03.880
> 
> 标签：ios, colors, navigation

我的`UITabBar`. `iOS`自动将最后 2 个选项卡分组到一个名为“更多”的选项卡中。我为 7 个选项卡设置了导航栏的颜色，`viewDidLoad`如下所示：

```
 self.navigationController.navigationBar.tintColor = [UIColor blackColor]; 
```

如何为自动生成的“更多”选项卡设置导航栏的颜色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T12:43:17.183

您可以访问`self.tabBarController.moreNavigationController`以获取用户点击更多选项卡栏项目时出现的导航控制器。现在您可以执行修改和自定义。例如，您可以更改其导航栏的样式。例子：

```
UINavigationController* more = self.tabBarController.moreNavigationController;
more.navigationBar.barStyle = UIBarStyleBlack; 
```

有关如何自定义点击更多标签栏项目时显示的内容的更多信息，请参阅我的书的这一部分：

[http://www.aeth.com/iOSBook/ch25.html#_uitabbar](http://www.apeth.com/iOSBook/ch25.html#_uitabbar)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:30:11.490

> self.navigationController.navigationBar.tintColor = [UIColor blackColor];

此行更改`tintColor`导航栏。

根据您的问题，在我（当然还有其他人）看来，您误解`UITabBarController`为`UINavigationController`.

您可以在`UITabBarController` [此处找到有关自定义的所有信息](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarController_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T12:52:10.873

您需要在 AppDelegate.m 中更改 UINavigationController 的颜色

```
 UIColor *navBarColor = [UIColor blackColor];
 [[UINavigationBar appearance] setTintColor:navBarColor];  
 self.navigationController.navigationBar.tintColor = navBarColor; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T12:38:12.347

尝试外观（可能在应用程序委托中的 didfinishlaunchingwithoptions 中）。

```
[[UITabBar appearance] setTintColor:[UIColor blackColor]];
[[UITabBarItem appearance] setTintColor:[UIColor blackColor]]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-08T17:31:00.390

对于 iOS 7 您可以更改导航栏的颜色，设置为非半透明（默认为是）并通过将以下内容添加到 AppDelegate 来更改导航标题的颜色：

```
UINavigationController *moreController = _tabBarController.moreNavigationController;
moreController.navigationBar.barTintColor = [UIColor orangeColor];
moreController.navigationBar.translucent = NO;
moreController.navigationBar.titleTextAttributes = @{NSForegroundColorAttributeName : [UIColor whiteColor]}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-06T16:26:48.547

适用于 iOS 8.0

```
 self.navigationController.navigationBar.barTintColor = [UIColor blackColor]; 
```

# algorithm - k-旅行商优化

> ID：15703176
> 
> 赞同：-1
> 
> 时间：2013-03-29T12:23:45.823
> 
> 标签：algorithm

给定一个加权图，当前我有超过 100 个节点。那么问题是如何通过属于构建图的节点数组（实例为 10 个节点）找到最短路径。这个问题似乎类似于旅行商问题，但事实并非如此。

我当前的解决方案非常简单 第 1 步：从 10 个节点的数组构建一个新图，我必须从第 2 步构建游览：使用 Dijkstra 查找节点之间的距离并连接图中的所有顶点 第 3 步：现在它只是转旅行商问题

简单的。但是，第 2 步的复杂度是 O(n^2)，因为我必须为新图的所有节点组合找到最短路径（Dijkstra 具有多项式复杂度）。

如何让我的算法更快？最好的情况是我可以消除必须为新图中的每对节点组合找到最短距离的瓶颈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:35:23.773

[Dijkstra](http://en.algoritmy.net/article/45514/Dijkstras-algorithm)的复杂度为 O(E log(N))，如果你有完整的图（如果你正在做 TSP，你有），那么对于所有节点对，你可以将其写为 O(N² log(N))它是 O(N⁴ log(N))。[因此，使用Floyd-Warshall 算法](http://en.algoritmy.net/article/45708/Floyd-Warshall-algorithm)应该更有效，该算法在 O(N³) 中的所有节点对中找到最短路径。

# php - 如何使用 PHP 的 post 方法（Post/Redirect/Get）在表单提交后重定向

> ID：15703177
> 
> 赞同：2
> 
> 时间：2013-03-29T12:23:47.360
> 
> 标签：php, redirect, post, get

我有以下表格：

```
<form id="frmAeroportonew" name="frmAeroportonew" method="post" action="<?php echo $editFormAction; ?>">
<table>      
  <tr>
    <td><input name="iata" type="text" id="iata" value="" /></td>
    <td><input name="icao" type="text" id="icao" value="" /></td>
    <td><input name="cidade" type="text" id="cidade" value="" /></td>
    <td><input name="pais" type="text" id="pais" value="" /></td>
    <td><input name="destino" type="checkbox" id="destino" value="" /></td>
    <td><input name="alternativo" type="checkbox" id="alternativo" value="" /></td>
    <td><input name="h24" type="checkbox" id="h24" value="" /></td>
    <td><input name="btnaeroportonew" id="btnaeroportonew" type="submit" value="+" /></td>
  </tr>
</table>
<input type="hidden" name="MM_insert" value="frmAeroportonew"> 
```

想法是提交此表单，而不是重定向到另一个页面 (teste_redirect.php)，将输入 (id=iata) 值附加到 url (teste_redirect.php?iata=input_value)。

PHP 代码是在 dreamweaver cs6 中制作的：

```
if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "frmAeroportonew")) {
  $insertSQL = sprintf("INSERT INTO tblaeroportos (iata, icao, cidade, pais, destino, alternativo, H24) VALUES (%s, %s, %s, %s, %s, %s, %s)",
                   GetSQLValueString($_POST['iata'], "text"),
                   GetSQLValueString($_POST['icao'], "text"),
                   GetSQLValueString($_POST['cidade'], "text"),
                   GetSQLValueString($_POST['pais'], "text"),
                   GetSQLValueString(isset($_POST['destino']) ? "true" : "", "defined","1","0"),
                   GetSQLValueString(isset($_POST['alternativo']) ? "true" : "", "defined","1","0"),
                   GetSQLValueString(isset($_POST['h24']) ? "true" : "", "defined","1","0"));

  mysql_select_db($database_connect, $connect);
  $Result1 = mysql_query($insertSQL, $connect) or die(mysql_error());

  $insertGoTo = "teste_redirect.php";
  if (isset($_SERVER['QUERY_STRING'])) {
    $insertGoTo .= (strpos($insertGoTo, '?')) ? "&" : "?";
    $insertGoTo .= $_SERVER['QUERY_STRING'];
  }
  header(sprintf("Location: %s", $insertGoTo));
} 
```

我感谢您的所有帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:25:17.147

将您的 insertGoto 更改为

```
$insertGoTo = "teste_redirect.php?iata=".$_POST['iata']; 
```

# html - 属性/值对列表的 HTML 标记的语义和逻辑考虑

> ID：15703178
> 
> 赞同：1
> 
> 时间：2013-03-29T12:23:50.980
> 
> 标签：html, css

我有一个属性/值对列表，其中属性在左侧，值在右侧：

```
First Name: John
Last Name: Doe
Phone Number: (555) 555-1212
Email: johndoe@stackoverflow.com 
```

我的第一个想法是，这将是使用已定义列表 (dl) 的绝佳机会。然而，这篇文章[http://snook.ca/archives/html_and_css/definition-lists-v-tables出于可访问性的原因建议不要这样做。](http://snook.ca/archives/html_and_css/definition-lists-v-tables)此外，我很难为定义的列表设置样式，因此它们可以在 IE7 中工作（[样式 DL 作为表格。哦，不，IE7 浮动 DD](https://stackoverflow.com/questions/15702638/style-dl-as-a-table-oh-no-ie7-floats-dd)），但希望我能弄明白。

另一种选择是桌子，但这似乎不正确。

也许是一个无序列表，其中包含包装在自己标签中的对？

我应该为这个应用程序使用什么 HTML 标记？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:43:03.953

如果你想要语义，我强烈建议使用`<dl></dl>`，对于那些过于关心 IE7 和 IE8 的人，我只有一个声明。“2013 年更新你的浏览器。” 然而，适当的样式`<dl>`在 IE7 和 IE8 中工作得很好。

现在选择是你的。选择语义和好的方式或将您的网站保存在表格中，以便它适用于 ie7 和 2% 的使用它的用户。想想看。

PS 不要把它`<dl>`当作一个，`<table>`因为它不是一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T12:48:09.487

在衡量屏幕阅读器“做什么”时必须非常小心，当然是表格，也可能是其他元素。几年前，我用 JAWS 做了一些实验，结果令我惊讶。JAWS 和可能的其他屏幕阅读器使用秘密启发式方法来决定是将表格视为语义表格还是布局表格，这比单独的标记包含更多因素。例如，可以根据呈现表格的屏幕宽度，将相同的标记视为语义表格或布局表格。这可能是直接或间接的影响，我无法判断，但无论哪种方式都没有任何意义，但显然是这样。

我赞同 Axente Paul 的回答。根据当时关于语义的最佳建议，将您的标记写成语义。让屏幕阅读器制造商充分利用可访问性链提供给他们的信息。如果他们没有做对，那是屏幕阅读器制造商及其用户的问题，而不是标记作者的问题。

# c# - 什么是 USB HID col 参数

> ID：15703179
> 
> 赞同：2
> 
> 时间：2013-03-29T12:23:56.277
> 
> 标签：c#, windows, usb, hid

我有一个 HID 设备（picoLCD 单色显示器），我在用 C# 编写的 Windows 程序中打开它。我通过以下路径获得了设备的 3 个 HID“实例”：

```
_devicePath = "\\\\?\\hid#vid_04d8&pid_c002&col01#7&12adec39&0&0000#{4d1e55b2-f16f-11cf-88cb-001111000030}"
_devicePath = "\\\\?\\hid#vid_04d8&pid_c002&col02#7&12adec39&0&0001#{4d1e55b2-f16f-11cf-88cb-001111000030}"
_devicePath = "\\\\?\\hid#vid_04d8&pid_c002&col03#7&12adec39&0&0002#{4d1e55b2-f16f-11cf-88cb-001111000030}" 
```

它们都具有相同的 VID 和 PID，但“col”不同。这个参数是什么意思？为什么一台设备有 3 个设备“描述符”？

UsbView 仅显示一个具有 2 个端点的物理设备：

```
Device Descriptor:
bcdUSB:             0x0200
bDeviceClass:         0x00
bDeviceSubClass:      0x00
bDeviceProtocol:      0x00
bMaxPacketSize0:      0x08 (8)
idVendor:           0x04D8 (Microchip Technology Inc.)
idProduct:          0xC002
bcdDevice:          0x0002
iManufacturer:        0x01
iProduct:             0x02
iSerialNumber:        0x03
bNumConfigurations:   0x01

ConnectionStatus: DeviceConnected
Current Config Value: 0x01
Device Bus Speed:     Full
Device Address:       0x05
Open Pipes:              2

Endpoint Descriptor:
bEndpointAddress:     0x81  IN
Transfer Type:   Interrupt
wMaxPacketSize:     0x0040 (64)
bInterval:            0x01

Endpoint Descriptor:
bEndpointAddress:     0x01  OUT
Transfer Type:   Interrupt
wMaxPacketSize:     0x0040 (64)
bInterval:            0x01 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:51:37.127

看起来像是某种集合 ID（例如[HIDClass Hardware IDs for Top-Level Collections](http://msdn.microsoft.com/en-us/library/ff538842%28VS.85%29.aspx)）

# css - 页脚菜单位于主容器顶部

> ID：15703180
> 
> 赞同：0
> 
> 时间：2013-03-29T12:23:59.013
> 
> 标签：css, css-float, overflow, footer

我有三个主要的 div，它们`header`是`main-container`和`footer`。div的CSS是

```
#main_container
{
    width:950px;
    margin:0 auto;

}
#header
{
    background:#f4f8f9;
}
#footer
{
    clear:both;
    background:#355e95;
    height:40px;
    color:#fff; 
    font-size:13px;
    font-family: "Franklin Gothic Medium", "Franklin Gothic", "ITC Franklin Gothic", Arial, sans-serif;
    text-align:center;
    padding-top:10px;
    padding-bottom:10px;
} 
```

现在，在索引页面中，没有左右浮动，因此页脚位于底部。但是在随后的页面中，有很多浮动，现在页脚在上面`main-container`！为什么会发生这种情况？我已经在div`floating`之前清除了`footer`

```
<div class="clr"></div> 
    <div id="footer">
         &copy;2010 Sri Sai Group
         <div class="fbtm">
            Powered,Maintained and Designed By <a href="http://7sisters.in" target="_blank">7sisters.in</a>
         </div>
    </div> 
```

注意当我添加`overflow:auto;`页面时是这样的！ ![编辑的 CSS 页面](../Images/74a496b35cf45366ff40294989da0d6f.png)

我的页面之一的完整 HTML：

```
<body>
    <div id="header">
        <div class="htop">
            <div class="phn">Ph +0361-26699811</div>

            <div class="email">Email support@7sisters.in</div>

        </div>

    </div>

    <div id="main_container">
        <div id="menu_wrapper">
            <div class="menu_outer">

                <div class="logo">
                    <img src="css/images/logo.png" alt="Sri sai" />
                </div>

                <div class="menu">
                    <div id="site_title">
                        <h1>SRI SAI GROUP</h1>
                    </div>

                    <div id='cssmenu'>
                        <ul>
                           <li><a href='#'><span>Home</span></a></li>
                           <li class='has-sub '><a href='#'><span>About</span></a>
                              <ul>
                                 <li class='has-sub '><a href='#'><span>Overview</span></a>

                                 </li>
                                 <li class='has-sub '><a href='#'><span>Board Members</span></a>

                                 </li>

                                 <li class='has-sub '><a href='#'><span>Our Family</span></a>

                                 </li>

                                 <li class='has-sub '><a href='#'><span>Gratitude</span></a>

                                 </li>
                              </ul>
                           </li>
                           <li class='has-sub '><a href='#'><span>Business</span></a>
                                <ul>
                                    <li class='has-sub '><a href='#'><span>Food and Beverages</span></a>

                                 </li>
                                 <li class='has-sub '><a href='#'><span>Media and Entertaintment</span></a>

                                 </li>
                                 <li class='has-sub '><a href='#'><span>Information Technology</span></a>

                                 </li>
                                 <li class='has-sub '><a href='#'><span>Consumer Servies</span></a>

                                 </li>
                                 </ul>   
                           </li>
                           <li><a href='#'><span>Contact</span></a></li>
                        </ul>
                     </div>
              </div>   
         </div>

         <div id="web-design">
      <img src="css/images/banner_ssg.png" />
    Our Website Development team builds websites using latest technologies; the sites we build are robust, secure and reliable. Our process guarantees fast capturing of your idea and quick Website Development at minimum possible cost.

During the Website Development process we keep provisions for future growth of your business. The sites we build are SEO compatible. You will get professional developers that are personally dedicated to you and ready to meet your business objectives.

All our projects come with the needed documentation and support.
    </div>
        <div id="contact_form">

        <form method="post" id="customForm" action="">
            <div>
                <label for="name">Name&nbsp;&nbsp;&nbsp;&nbsp;</label>
                <input id="name" name="name" type="text" />
                <span id="nameInfo"></span>
            </div>
            <div>
                <label for="email">Phone&nbsp;&nbsp;&nbsp;</label>
                <input id="phone" name="phone" type="text" />
                <span id="phoneInfo"></span>
            </div>
            <div>
                <label for="message">Address&nbsp;</label>
                <textarea id="message" name="message" cols="" rows=""></textarea>
            </div>
            <div>
                <label for="email">Email&nbsp;&nbsp;&nbsp;</label>
                <input id="email" name="email" type="text" />
                <span id="emailInfo"></span>
            </div>
            <div>
                <label for="pass2">Website&nbsp;</label>
                <select>
                    <option>Static</option>
                    <option>Dynamic</option>
                </select>    
                <span id="pass2Info"></span>
            </div>

            <div>
                <input id="send" name="send" type="submit" value="Send" />
            </div>
        </form>
        </div>

    </div>

    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/validation.js"></script>    

    </div>

    <div class="clr"></div> 
    <div id="footer">
         &copy;2010 Sri Sai Group
         <div class="fbtm">
            Powered,Maintained and Designed By <a href="http://7sisters.in" target="_blank">7sisters.in</a>
         </div>
    </div>

    </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:00:16.603

看起来你需要做的是在页脚之前关闭你的 maincontent div，它在那里缺少一个这样做（如果你相信你已经拥有它不是）。

```
 <div>
            <input id="send" name="send" type="submit" value="Send" />
        </div>
    </form>
    </div>
</div></div>

<div class="clr"></div> 
<div id="footer">
     &copy;2010 Sri Sai Group
     <div class="fbtm">
        Powered,Maintained and Designed By <a href="http://7sisters.in"
   target="_blank">7sisters.in</a>
     </div> 
```

另外，也许可以考虑将 maincontent 宽度设为 % 以阻止它在某些浏览器上扩展得太远。

```
#main_container
{
width:100%;
margin:0 auto;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:28:42.697

您应该添加`overflow:auto`到您的`#main_container`css 中，以便它根据其子元素的大小增加高度。然后`#footer`将直接在`#main_container`这意味着所有内容之后。

```
#main_container
{
    width:950px;
    margin:0 auto;
    overflow: auto; /* add this */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T13:03:09.867

把这个结构。

```
<body>
    <div id="header">
        <div class="htop">
            <div class="phn">Ph +0361-26699811</div>

            <div class="email">Email support@7sisters.in</div>

        </div>

    </div>

    <div id="main_container">
        <div id="menu_wrapper">
            <div class="menu_outer">

                <div class="logo">
                    <img src="css/images/logo.png" alt="Sri sai" />
                </div>

                <div class="menu">
                    <div id="site_title">
                        <h1>SRI SAI GROUP</h1>
                    </div>

                    <div id='cssmenu'>
                        <ul>
                           <li><a href='#'><span>Home</span></a></li>
                           <li class='has-sub '><a href='#'><span>About</span></a>
                              <ul>
                                 <li class='has-sub '><a href='#'><span>Overview</span></a>

                                 </li>
                                 <li class='has-sub '><a href='#'><span>Board Members</span></a>

                                 </li>

                                 <li class='has-sub '><a href='#'><span>Our Family</span></a>

                                 </li>

                                 <li class='has-sub '><a href='#'><span>Gratitude</span></a>

                                 </li>
                              </ul>
                           </li>
                           <li class='has-sub '><a href='#'><span>Business</span></a>
                                <ul>
                                    <li class='has-sub '><a href='#'><span>Food and Beverages</span></a>

                                 </li>
                                 <li class='has-sub '><a href='#'><span>Media and Entertaintment</span></a>

                                 </li>
                                 <li class='has-sub '><a href='#'><span>Information Technology</span></a>

                                 </li>
                                 <li class='has-sub '><a href='#'><span>Consumer Servies</span></a>

                                 </li>
                                 </ul>   
                           </li>
                           <li><a href='#'><span>Contact</span></a></li>
                        </ul>
                     </div>
              </div>   
         </div>

         <div id="web-design">
      <img src="css/images/banner_ssg.png" />
    Our Website Development team builds websites using latest technologies; the sites we build are robust, secure and reliable. Our process guarantees fast capturing of your idea and quick Website Development at minimum possible cost.

During the Website Development process we keep provisions for future growth of your business. The sites we build are SEO compatible. You will get professional developers that are personally dedicated to you and ready to meet your business objectives.

All our projects come with the needed documentation and support.
    </div>
        <div id="contact_form">

        <form method="post" id="customForm" action="">
            <div>
                <label for="name">Name&nbsp;&nbsp;&nbsp;&nbsp;</label>
                <input id="name" name="name" type="text" />
                <span id="nameInfo"></span>
            </div>
            <div>
                <label for="email">Phone&nbsp;&nbsp;&nbsp;</label>
                <input id="phone" name="phone" type="text" />
                <span id="phoneInfo"></span>
            </div>
            <div>
                <label for="message">Address&nbsp;</label>
                <textarea id="message" name="message" cols="" rows=""></textarea>
            </div>
            <div>
                <label for="email">Email&nbsp;&nbsp;&nbsp;</label>
                <input id="email" name="email" type="text" />
                <span id="emailInfo"></span>
            </div>
            <div>
                <label for="pass2">Website&nbsp;</label>
                <select>
                    <option>Static</option>
                    <option>Dynamic</option>
                </select>    
                <span id="pass2Info"></span>
            </div>

            <div>
                <input id="send" name="send" type="submit" value="Send" />
            </div>
        </form>
        </div>

    </div>

    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/validation.js"></script>    

    <div class="clr"></div> 
    </div>
    <div id="footer">
         &copy;2010 Sri Sai Group
         <div class="fbtm">
            Powered,Maintained and Designed By <a href="http://7sisters.in" target="_blank">7sisters.in</a>
         </div>
    </div>

    </body> 
```

# java - 未找到 Double 类型的 QueryString 绑定器。尝试为此类型实现隐式 QueryStringBindable

> ID：15703182
> 
> 赞同：6
> 
> 时间：2013-03-29T12:24:01.590
> 
> 标签：java, playframework-2.0

所以我正在使用 play 2.0 并且我试图将双打从我的视图传递回控制器应用程序，我收到此错误：*No QueryString binder found for type Double。尝试为此类型实现隐式 QueryStringBindable*。我找到[了这个](https://stackoverflow.com/questions/10286725/how-to-bind-double-parameter-with-play-2-0-routing)线程并看到 java binders 仅适用于 play 2.0 中的自递归类型，但 play 2.1 将支持它们。不幸的是，我无法将我的项目迁移到 2.1，所以我尝试按照链接问题的答案进行操作。我在我的项目中创建了一个 util 包，里面是 DoubleW 类：

```
package util;

import java.util.Map;

import play.libs.F;
import play.libs.F.Option;
import play.mvc.QueryStringBindable;

public class DoubleW implements QueryStringBindable<DoubleW> {

    public Double value = null;

    @Override
    public Option<DoubleW> bind(String key, Map<String, String[]> data) {
        String[] vs = data.get(key);
        if (vs != null && vs.length > 0) {
            String v = vs[0];
            value = Double.parseDouble(v);
            return F.Some(this);
        }
        return F.None();
    }

    @Override
    public String unbind(String key) {
        return key + "=" + value;
    }

    @Override
    public String javascriptUnbind() {
         return value.toString();
    }

} 
```

我在控制器/应用程序中需要它的地方导入了它，并且在我需要使用双打的模型类之一中导入了它。在相关的应用程序和模型方法中，我用新的 DoubleW 替换了双精度数据类型。最后我修改了我的路由表，所以它会期待新的参数：

*GET /findMatch controllers.Application.matcher(sLat: util.DoubleW, sLon: util.DoubleW, eLat: util.DoubleW, eLon: util.DoubleW)*

在应用程序匹配器方法使用的模型方法中，我需要执行算术。但是，当我运行我的项目时，我收到此错误：*错误：二元运算符的错误操作数类型 '<='*。似乎这种处理双精度的新类型（DoubleW）被视为一个字符串，我无法对其进行算术运算，也无法为其分配标准的 java double 值。我不确定我是否错过了上一篇文章中的一步，[但](https://stackoverflow.com/questions/10286725/how-to-bind-double-parameter-with-play-2-0-routing)我不知道该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T21:22:50.153

在 Play 2.0 中，我发现最简单的解决方案是使用 Scala——即使在 Java 项目中也是如此（我在[我的一篇 Play Basics 博客文章](http://www.mariussoutier.com/blog/2012/12/11/playframework-routes-part-2-advanced/)中对此进行了解释。

如果您不了解 Scala，只需将以下内容粘贴到名为的文件中`Binders.scala`并添加`routesImport += "util.Binders._"`到您的`Build.scala`.

```
package util

object Binders {

  implicit object DoubleQueryBindable extends QueryStringBindable[Double] {
    def bind(key: String, params: Map[String, Seq[String]]) = params.get(key).flatMap(_.headOption).map { value =>
      try {
        Right(value.toDouble)
      } catch {
        case e: Exception =>  Left("Cannot parse parameter " + key + " as Double")
      }
    }
    def unbind(key: String, value: Double) = key + "=" + value.toString
  }

  implicit object DoublePathBindable extends PathBindable[Double] {
    def bind(key: String, value: String) = try {
      Right(value.toDouble)
    } catch {
      case e: Exception => Left("Cannot parse parameter '" + key + "' as Double")
    }

    def unbind(key: String, value: Double): String = value.toString
  }
} 
```

# amazon-web-services - 在 boto mturk 中使用 notify_workers 方法时是否有任何限制

> ID：15703185
> 
> 赞同：0
> 
> 时间：2013-03-29T12:24:06.127
> 
> 标签：amazon-web-services, boto, mechanicalturk

我遇到了这个文件： http: [//jessechandler.com/uploads/2/8/0/5/2805897/emailing-workers-mueller-chandler1.pdf](http://jessechandler.com/uploads/2/8/0/5/2805897/emailing-workers-mueller-chandler1.pdf)，其中提到“您最多可以发送 100 个 workerid使用时的时间`boto`。它没有给出理由。

有人可以确认这是否是对`boto`Amazon MTurk API 本身的限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T13:47:53.313

这是 MTurk API 的限制。有关详细信息，请参阅[MTurk API 参考](http://docs.aws.amazon.com/AWSMechTurk/latest/AWSMturkAPI/ApiReference_NotifyWorkersOperation.html)。

# redirect - Squid 反向代理跟随重定向

> ID：15703186
> 
> 赞同：1
> 
> 时间：2013-03-29T12:24:14.713
> 
> 标签：redirect, rewrite, reverse-proxy, squid

我已经设法让 squid 作为 URL 重写的反向代理运行：

[http://example.com.proxy.myserver.com](http://example.com.proxy.myserver.com)

将被反向代理到

[http://example.com](http://example.com)

到目前为止，一切都很好。但是，当[http://example.com](http://example.com)响应重定向到[http://www.example.com](http://www.example.com)时，浏览器会遵循此重定向。

我正在寻找一种方法，像这样重写该重定向：

[http://www.example.com.proxy.myserver.com](http://www.example.com.proxy.myserver.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:58:20.360

好吧，看起来 squid 3.x 是不可能的

```
location_rewrite_program

    Not yet ported from 2.6 
```

真可惜。还有其他方法吗？

# ruby - is_numeric 消除 Ruby 中的负数

> ID：15703187
> 
> 赞同：2
> 
> 时间：2013-03-29T12:24:16.470
> 
> 标签：ruby, numeric, negative-number

我是这里的新用户，也是 Ruby 的初学者。我需要从 中消除负值（数字）`is_numeric?`。所以代码是这样的：

```
class String
  def is_number?
    true if Float(self) rescue false
  end
end 
```

这给了我正数和负数，而我只需要得到正数。有没有办法在这种方法中消除负数？如果没有，那么任何其他方式也值得赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T12:29:30.760

```
class String
  def is_number?
    Float(self) >= 0 rescue false
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:27:02.003

像这样的东西应该工作：

```
class String
  def is_number?
    f = Float(self) 
    f && f >= 0
  rescue
    false
  end
end

'1'.is_number? # => true
'-1'.is_number? # => false
'0.0'.is_number? # => true
'4.12'.is_number? # => true
'-10_000'.is_number? # => false 
```

# content-management-system - 如何在 WP 中组织上传的媒体？

> ID：15703189
> 
> 赞同：52
> 
> 时间：2013-03-29T12:24:18.440
> 
> 标签：content-management-system, wordpress

我是 WordPress 的新手，我来自 Joomla。我如何（如果我能做到...）使用 WordPress 将上传的媒体组织到文件夹和子文件夹中？

如果我进入我的后端管理面板，我有**媒体**子面板，我可以在其中添加文件（例如 jpg 图像）。问题是所有文件都添加到同一个库中。

我想组织我的库，其中包含放置上传文件的子类别\子文件夹。

例如，我想要类别图像：“Spring 文章图像”和“项目管理文章图像”等。

怎么办？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-12-01T12:00:59.717

最好的是**增强媒体库**插件[http://wordpress.org/plugins/enhanced-media-library/](http://wordpress.org/plugins/enhanced-media-library/) 它添加了你想要的尽可能多的类别/分类法。效果很好。您可以在任何地方过滤媒体，加上菜单选项中的类别，也很有用。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-10-17T07:09:30.203

**截至 2015 年 10 月，WP 4.3.1**我发现只有两个插件实际影响图像位置，如“文件夹和子文件夹”：

*   [Custom Upload Dir](https://wordpress.org/plugins/custom-upload-dir/)，但顾名思义，只是在上传时。您可以从您的 %post_slug% 或 %categories% 工作，在这些帖子/页面的上下文中上传您的图像，这个工具将从它形成子文件夹。这是伟大的，搜索引擎优化。

    或者您甚至忽略所有这些并在“构建路径模板”下授权，即`travels/france/paris-at-night`上传到您的 WP-Uploads 文件夹的子目录。（当然，您必须不断更改才能进行上传。限制了我的整体信念，这是一个稳定的长期工具，尽管有 10.000 多个活动安装）。

*   [媒体文件管理器](https://wordpress.org/plugins/media-file-manager/)允许移动已上传的图像并相应地更改帖子和页面中的路径。它的界面让人想起“Norton Commander 1.0”，但它确实能胜任。（文件夹重命名和删除除外。所以如果要重命名，最好将图像移动到新命名的文件夹，然后手动删除旧的。）

**以下所有内容都不起作用：**

*   [WP Media Folder](https://www.joomunited.com/wordpress-demo/wp-media-folder)不会更改实际的目录位置，因此不会实际更改图像的路径，因此也不会影响图像 URL。尽管有它的名字，Folder 只是他们对另一种分类法的可视化。我投资了 19 美元来学习这一点。

*   [增强媒体库](https://de.wordpress.org/plugins/enhanced-media-library/)很大，免费且非常受欢迎（wordpress 安装了 40.000 次），但也不会更改物理位置和（因此）URL。➪ 因此，我认为接受的答案是**错误**的。

*   **高级媒体文件管理器**似乎消失了，被[认为是危险](https://wpvulndb.com/vulnerabilities/7983)的！

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-03-29T14:52:23.013

我不相信这可以在 wordpress 中“开箱即用”完成。最接近的方法是按基于日期的子文件夹存储媒体上传，根据[媒体设置屏幕](http://codex.wordpress.org/Settings_Media_Screen)上的选项**将我的上传组织到基于月份和年份的文件夹**中。

下一个最好的方法可能是创建一个“虚拟”页面层次结构作为您的文件夹树，然后将您的图像附加到这些层次结构中。*这将为您提供一个逻辑分组，该分组可能与您的实际*页面或帖子层次结构相对隔离。但是当然这不会给你在文件系统中这样组织的文件，例如你当然不能 FTP 到这个结构。

否则我认为您需要找到一个插件或自己编写一些东西来处理这个问题。

我在快速谷歌搜索“wordpress 插件媒体文件夹”后发现了一些插件：

*   [http://wordpress.org/extend/plugins/media-file-manager/](http://wordpress.org/extend/plugins/media-file-manager/)
*   [http://wordpress.org/extend/plugins/media-folders/](http://wordpress.org/extend/plugins/media-folders/)

虽然这些可能不是您想要的，但它们可能会为您提供自己实现某些东西的线索/方向。（虽然第一个看起来很有希望。）

仅供参考，在 Wordpress.stackexchange 上至少有人问过一个类似的问题：

[https://wordpress.stackexchange.com/questions/13030/media-library-plugins-for-better-file-management](https://wordpress.stackexchange.com/questions/13030/media-library-plugins-for-better-file-management)

在那边好好地寻找一些更重要的东西可能是值得的。祝你好运！

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-11-04T11:54:01.147

## 目前，媒体组织是可能的。

wordpress 中媒体库的“问题”总是很有趣。检查以下插件来解决这个问题：[WordPress Real Media Library](http://codecanyon.net/item/wp-real-media-library-organize-your-uploads/13155134)。**WP RML**基于自己的分类创建一个虚拟文件夹结构。

[![拖放您的文件](../Images/9682cd0abe373bd5d747f17ca25195cb.png)](https://i.stack.imgur.com/a5pyv.gif)

它允许您使用文件夹以一种很好的方式组织您的 wordpress 媒体库。它易于使用，只需**拖放**文件并将其移动到特定文件夹即可。插入媒体时过滤或从文件夹创建图库。

> ## 使用文件夹/类别将您的 WordPress 媒体库提升到一个新的水平。用成千上万的图像组织起来。
> 
> RML（Real Media Library）是最受欢迎的媒体 wordpress 插件之一。它易于使用，它允许您在文件夹中组织数千张图像。它类似于帖子中的 wordpress 类别。
> 
> 使用鼠标（或触摸）拖放文件。创建、重命名、删除或重新排序文件夹 如果您想从“选择图像”对话框中选择图像（例如特色图像），您可以在插入媒体时进行过滤。只需安装此插件，它就可以与您的所有图像和媒体文件一起正常工作。它还支持多站点。
> 
> 如果您购买，您将获得：永远免费的更新以及高质量和快速的支持。

从产品描述中我可以引用。**[如果您想尝试插件，插件页面上](http://codecanyon.net/item/wp-real-media-library-organize-your-uploads/13155134)**还有一个演示。

## 更新 #1 (2017-01-27)：物理管理您的上传

很久以前我开始打开[这个帖子](https://wordpress.stackexchange.com/questions/226675/physical-organization-of-wordpress-media-library-real-media-library-plugin)，现在有一个可用的 Real Media Library 扩展插件，它允许你物理管理你的上传文件夹。

[![在此处输入图像描述](../Images/79bc7eb36c24012e13386ddff170f32b.png)](https://i.stack.imgur.com/yn8RF.png)

看看这个插件：[https ://wordpress.org/plugins/physical-custom-upload-folder/](https://wordpress.org/plugins/physical-custom-upload-folder/)

你知道 wp-content/uploads 文件夹吗？在那里，文件存储在基于年/月的文件夹中。这可能是一个非常复杂和庞大的过程，尤其是当您使用像 FileZilla 这样的 FTP 客户端时。

移动已上传的文件：当您在 Real Media Library 中移动文件时，此插件不允许物理移动文件，因为 WordPress 在不同的地方使用 URL。维持这样的过程非常困难。所以这只适用于新的上传。

## 服务器上的物理组织？

（如果您是开发人员，请继续阅读）我作为开发人员考虑了一个解决方案。在服务器上组织上传也有意义吗？是的，我认为。许多人要求以物理方式组织它。我还认为在服务器上移动文件和更新图像引用的过程很难开发。现在有很多插件，它们将 URL 保存在自己创建的数据库表中。

请检查我解释问题的线程：[https ://wordpress.stackexchange.com/questions/226675/physical-organization-of-wordpress-media-library-real-media-library-plugin](https://wordpress.stackexchange.com/questions/226675/physical-organization-of-wordpress-media-library-real-media-library-plugin)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-11-13T16:40:48.767

您可以使用[媒体库文件夹插件](https://wordpress.org/support/plugin/media-library-plus)。它允许您创建文件夹、将图像移动或复制到文件夹，甚至包括同步功能，可以将通过 FTP 上传到服务器的图像批量添加到 Wordpress 媒体库。

[![媒体库文件夹示例](../Images/26e446efd81c7042e0901a3734faa335.png)](https://i.stack.imgur.com/2vtCP.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-01-10T14:51:34.720

在对我的 WordPress 默认媒体管理中的大量文件感到非常厌倦之后，我四处寻找这个免费插件[https://wordpress.org/plugins/filebird/ 。](https://wordpress.org/plugins/filebird/)安装插件后，我可以将所有图像和其他文件组织到文件夹/类别中，只需拖放即可将文件上传/移动到文件夹中，然后拖放以重新排列文件夹。 [![在此处输入图像描述](../Images/66deeca7fc063d6474f2c35868463595.png)](https://i.stack.imgur.com/Wy0wA.gif)[![在此处输入图像描述](../Images/6e2df201b6756ac9c3df35d7fb33a565.png)](https://ninjateam.org/wp-content/uploads/2019/01/filebird-drag-drog-to-move-files.gif)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-01T19:21:23.320

高级插件媒体文件管理器非常棒，允许您非常轻松地创建文件夹和子文件夹，并通过简单的拖放操作移动文件。

检查它：[http ://wordpress.org/plugins/media-file-manager-advanced/](http://wordpress.org/plugins/media-file-manager-advanced/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-18T10:18:16.390

在 Joomunited检查这个插件[WP Media Folder ，你可以：](https://www.joomunited.com/wordpress-products/wp-media-folder)

*   创建可视文件夹并在其中移动文件
*   限制文件可视化
*   从文件夹创建画廊
*   ...

自上个月以来，他们添加了许多必须使用的功能。

这是一个付费插件，但物有所值，我现在默认安装在我所有客户的网站上。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-06T10:27:48.500

上面列出的所有插件都有一个严重的问题——它们使用的是通过 WordPress Taxonomy API 实现的虚拟文件夹，而[X4 Media Library](https://codecanyon.net/item/x4-media-library-for-wordpress/24017686)使用的是位于`wp-content/uploads`服务器目录中的真实物理文件夹。

当您使用上面列出的任何插件将一些图像放入文件夹时会发生什么？由于他们使用的是虚拟文件夹，因此目标文件夹在数据库中表示为分类标签，因此他们只需将文件夹的标签分配给移动的文件。

目录中的物理磁盘上没有发生真正的修改`wp-content/uploads`。您可以看到，当您将图像移至另一个文件夹时，它们的 URL 并没有改变。

或者，使用 X4 媒体库，如果您将一些文件放入文件夹，它们将真正移动到磁盘上的物理文件夹中，在`wp-content/uploads`目录中，并且图像 URL 将自动更改。

此外，此插件将确保在您的所有帖子、页面和其他自定义类型中与这些图像关联的所有链接都将自动更新。

# clojure - 使用'def'在clojure中定义一个函数

> ID：15703190
> 
> 赞同：2
> 
> 时间：2013-03-29T12:24:23.333
> 
> 标签：clojure

这是两个请求相同参数并返回相同布尔类型值的函数。如：

```
 (defn Foo1 [x] (< x 3))
 (defn Foo2 [x] (> x -10)) 
```

但是当我定义下面的函数时我很困惑：

```
 (def Foo3 (or Foo1 Foo2)) 
```

你们能告诉我它是如何工作的吗？非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:32:15.637

`(defn f [a] a)`只是捷径`(def f (fn [a] a))`

如果`def`绑定的第二个参数是函数，那么第一个参数也是函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:40:35.707

假设您正在尝试组合条件，您可能想要：

```
(defn foo3 [x] (or (foo1 x) (foo2 x))) 
```

也就是说，您正在定义一个新函数`foo3`，其结果是对调用结果进行或运算的结果，`foo1`并且`foo2`具有相同的参数`x`。

**PS** Clojure 中以小写字母命名函数是惯例。

# python - Google Endpoints API 自定义监听器

> ID：15703193
> 
> 赞同：1
> 
> 时间：2013-03-29T12:24:58.303
> 
> 标签：python, google-app-engine, google-cloud-endpoints

a 有一个基于谷歌端点 API 的简单服务。一切正常，但问题是API是通过backbone.js从其他主机调用的。所以我必须在服务器端允许“Access-Control-Allow-Origin：*”。

但是在文档或其他内容中找不到任何解决方案。我尝试在 app.yaml 中进行设置，例如：

```
http_headers:
    Access-Control-Allow-Origin: http://.* 
```

但这仅适用于 static_dir 而不适用于脚本

感谢您的想法和帮助

```
from google.appengine.ext import endpoints
from google.appengine.ext import ndb
from protorpc import messages
from protorpc import message_types

from protorpc import remote

class SpotModel (ndb.Model):
    description = ndb.StringProperty(required=True)
    latitude = ndb.FloatProperty()
    longitude = ndb.FloatProperty()

class Spot (messages.Message):
    description = messages.StringField(1, required=True)
    lat = messages.FloatField(2)
    lng = messages.FloatField(3)
    id  = messages.IntegerField(4)

class SpotList (messages.Message):
  items = messages.MessageField(Spot,1, repeated=True)

@endpoints.api(name="spots", version='v1',
           description="API for create, update and list spots")
class SpotAPI(remote.Service):

    @endpoints.method(Spot,Spot,
                  name='spot.insert',
                  path='spot',
                  http_method='POST')
    def insertSpot(self, request):
        newSpot = SpotModel(description = request.description,latitude =  request.lat,longitude =  request.lng)
        newSpot.put()
        return  pareSpotToMessage(newSpot)

app = endpoints.api_server([SpotAPI]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-03T11:16:52.080

它应该是

```
http_headers:
    Access-Control-Allow-Origin: * 
```

# c++ - C++ 删除在某些实例上崩溃

> ID：15703195
> 
> 赞同：0
> 
> 时间：2013-03-29T12:25:01.880
> 
> 标签：c++, memory-management

我有以下 C++ 方法：

```
void MyClass::FindBottom ( CIppImage& bwImage, FieldRec* obField, int& bottomBorder_top, int& bottomBorder_bottom, int& topBorder_top, int& topBorder_bottom, bool& algoFoundBorder ){

    int scanYStart = topBorder_top + obField->getH() - VERTICAL_SCAN_AMOUNT;
    int scanYEnd = topBorder_top + obField->getH() + ( VERTICAL_SCAN_AMOUNT * 1.5 );
    int scanAmount = scanYEnd - scanYStart;
    int xScanEnd = obField->getOX() + obField->getW();

    int* histogram = new int[ scanAmount ];
    memset ( histogram, 0, (scanAmount) * sizeof(int) );

    Ipp8u* bwDataPtr = bwImage.DataPtr();

    int bwLineWidth = ( bwImage.Width() + 7 ) / 8;
    int n = 0;

    for( int y = scanYStart; y <= scanYEnd; y++ ){
        for( int x = obField->getOX(); x < xScanEnd; x++ ){
            if( ( GETBYTE( bwDataPtr, x, y, bwLineWidth ) ) != 0 && ( GETPIXEL(bwDataPtr, x, y, bwLineWidth ) ) != 0 ){
                histogram [ n ]++;
            }
        }
        n++;
    }

    int numFillPixelsThreshold = (int)(HORIZ_FILL_THRESHOLD * obField->getW());
    vector<int> goodRows;
    for( int j = 0; j < VERTICAL_SCAN_AMOUNT+VERTICAL_SCAN_AMOUNT+1; j ++ ){
        if( histogram[ j ] >= numFillPixelsThreshold ) {
            goodRows.push_back( scanYStart + j );
        }
    }
    if( goodRows.size() > 0 ){
        bottomBorder_top = goodRows[0];
     bottomBorder_bottom = goodRows[goodRows.size()-1];
    algoFoundBorder = true;
    }else{
        bottomBorder_top    = obField->getOY() + obField->getH() - 4;
        bottomBorder_bottom = obField->getOY() + obField->getH() + 4;
        algoFoundBorder = false;
    }
    delete[] histogram;
    histogram = 0;
} 
```

有 1 个特定实例`delete[]`调用使程序崩溃，Visual Studio 返回错误消息：

> 检测到堆损坏：在 0x01214980 CRT 的正常块 (#44325) 后检测到应用程序在堆缓冲区结束后写入内存。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:32:14.477

数组的大小是`scanYEnd - scanYStart`。

你的循环覆盖了包含范围`[scanYStart, scanYEnd]`，它的大小比数组大一，所以你写超出了分配的内存。您将需要使数组大一个元素。

（题外话，但我也建议使用`std::vector`而不是手动分配的数组来修复此函数引发异常时的内存泄漏。然后您可以`push_back`在循环内使用，以避免必须计算大小。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:32:14.827

```
int scanAmount = scanYEnd - scanYStart; 
int n = 0; 
for( int y = scanYStart; y <= scanYEnd; y++ ){
   n++;
}
ASSERT(n == scanAmount); // failed, because your for loop makes one more step and as a result you corrupt heap 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T12:36:02.087

这段代码至少有一个问题。假设`scanYStart`是 0 和`scanYEnd`10。`histogram`数组的大小是 10 (10-0)。并且在循环中`for( int y = scanYStart; y <= scanYEnd; y++ ){`从0迭代到10次（包括10次），即11次迭代。该行中有一个堆损坏，`histogram [ n ]++;`然后 n 为 10。

# javascript - 奇怪的Javascript“新”表单

> ID：15703196
> 
> 赞同：1
> 
> 时间：2013-03-29T12:25:04.317
> 
> 标签：javascript, new-operator

我在 less 文档中找到了下一种形式的 new 运算符。

```
var parser = new (less.Parser) ({
    pathes [
        '.',
        './css'
    ],
    filename: 'style.less'
}); 
```

与通常的形式有何不同？

```
var parser = new less.Parser({
    patches [
        '.',
        './css'
    ],
    filename: 'style.less'
}); 
```

它可以与 .apply 方法结合使用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T12:26:26.530

之间没有区别

```
var parser = new (less.Parser) (...); 
```

和

```
var parser = new less.Parser (...); 
```

周围的括号`less.Parser`完全是多余的。

> 它可以与 .apply 方法结合使用吗？

很难使用设计为通过`new`（“构造函数”）调用的函数 via `apply`，因为`new`它做了很多事情。（以上两种形式都是如此，因为 - 再次 - 它们是同一件事。）我在 Stack Overflow 上[的其他答案中](https://stackoverflow.com/a/3871769/157247)`apply`更多地讨论了使用构造函数。

# android - 启动谷歌地图时出现异常

> ID：15703207
> 
> 赞同：-1
> 
> 时间：2013-03-29T12:25:54.123
> 
> 标签：android, google-app-engine, google-maps

我有这个xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mainlayout"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<com.google.android.maps.MapView
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="AIzaSyBc5VI2J_l9cLb1J4pfCXoWxg74xorbpS0"
/>

</RelativeLayout> 
```

当我运行我的应用程序时，出现异常：

```
03-29 12:20:12.555: E/AndroidRuntime(279): FATAL EXCEPTION: main
03-29 12:20:12.555: E/AndroidRuntime(279): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.williamroma.example/com.williamroma.example.GoogleMapActivity}: android.view.InflateException: Binary XML file line #8: Error inflating class com.google.android.maps.MapView
03-29 12:20:12.555: E/AndroidRuntime(279):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
03-29 12:20:12.555: E/AndroidRuntime(279):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-29 12:20:12.555: E/AndroidRuntime(279):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-29 12:20:12.555: E/AndroidRuntime(279):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-29 12:20:12.555: E/AndroidRuntime(279):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-29 12:20:12.555: E/AndroidRuntime(279):  at android.os.Looper.loop(Looper.java:123)
03-29 12:20:12.555: E/AndroidRuntime(279):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-29 12:20:12.555: E/AndroidRuntime(279):  at java.lang.reflect.Method.invokeNative(Native Method)
03-29 12:20:12.555: E/AndroidRuntime(279):  at java.lang.reflect.Method.invoke(Method.java:521)
03-29 12:20:12.555: E/AndroidRuntime(279):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-29 12:20:12.555: E/AndroidRuntime(279):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-29 12:20:12.555: E/AndroidRuntime(279):  at dalvik.system.NativeStart.main(Native Method)
03-29 12:20:12.555: E/AndroidRuntime(279): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class com.google.android.maps.MapView
03-29 12:20:12.555: E/AndroidRuntime(279):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
03-29 12:20:12.555: E/AndroidRuntime(279):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
03-29 12:20:12.555: E/AndroidRuntime(279):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
03-29 12:20:12.555: E/AndroidRuntime(279):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
03-29 12:20:12.555: E/AndroidRuntime(279):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
03-29 12:20:12.555: E/AndroidRuntime(279):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
03-29 12:20:12.555: E/AndroidRuntime(279):  at android.app.Activity.setContentView(Activity.java:1647)
03-29 12:20:12.555: E/AndroidRuntime(279):  at com.williamroma.example.GoogleMapActivity.onCreate(GoogleMapActivity.java:11)
03-29 12:20:12.555: E/AndroidRuntime(279):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-29 12:20:12.555: E/AndroidRuntime(279):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-29 12:20:12.555: E/AndroidRuntime(279):  ... 11 more
03-29 12:20:12.555: E/AndroidRuntime(279): Caused by: java.lang.ClassNotFoundException: com.google.android.maps.MapView in loader dalvik.system.PathClassLoader[/data/app/com.williamroma.example-1.apk]
03-29 12:20:12.555: E/AndroidRuntime(279):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
03-29 12:20:12.555: E/AndroidRuntime(279):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
03-29 12:20:12.555: E/AndroidRuntime(279):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
03-29 12:20:12.555: E/AndroidRuntime(279):  at android.view.LayoutInflater.createView(LayoutInflater.java:466)
03-29 12:20:12.555: E/AndroidRuntime(279):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
03-29 12:20:12.555: E/AndroidRuntime(279):  ... 20 more
03-29 12:20:14.754: I/Process(279): Sending signal. PID: 279 SIG: 9 
```

我不知道那把钥匙是不是正确的钥匙，也许你知道它看起来不错，那是什么？请问如何解决？，先谢谢了。也许错误出在另一个代码中，我可以给我任何你想要的代码，我的应用程序只是在活动中，

### 爪哇代码

```
package com.williamroma.example;

import android.app.Activity;
import android.os.Bundle;

public class GoogleMapActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

### 主要节日

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.williamroma.example"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <permission
        android:name="com.williamroma.example.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.williamroma.example.permission.MAPS_RECEIVE" />
    <uses-permission android:name="permission_name" />
    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".GoogleMapActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyBc5VI2J_l9cLb1J4pfCXoWxg74xorbpS0" />
    </application>

</manifest> 
```

### 当我添加此代码时

```
<uses-library android:name="com.google.android.maps" /> 
```

我在控制台中遇到了这个异常，应用程序甚至没有启动:(

```
[2013-03-29 05:38:40 - GoogleMap] Installation error: INSTALL_FAILED_MISSING_SHARED_LIBRARY
[2013-03-29 05:38:40 - GoogleMap] Please check logcat output for more details.
[2013-03-29 05:38:40 - GoogleMap] Launch canceled! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:44:48.843

使用 google 2.2 sdk 创建 AVD 并运行您的应用程序并确保您使用的是 MapActvity。

因为正常活动，不适用于 mapview。

# javascript - webgl中的可点击地图

> ID：15703208
> 
> 赞同：1
> 
> 时间：2013-03-29T12:26:02.173
> 
> 标签：javascript, three.js, webgl, geocoding

我可以通过将世界地图图像纹理添加到球体上来使用 three.js 渲染 3d 地球。我打算让这个地球仪可点击。即，每当用户点击任何国家时，都应突出显示该国家的边界​​。是否可以通过使用包含国界的世界地图 jpeg 来实现此功能？是否有可能检查用户是否在某个国家/地区的某些边界内单击？另一种选择可能是加载世界国家的 geojson 并将 svg 转换为画布。但是，我仍然不确定如何使国家/地区可点击..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:52:23.787

您可以使用每个国家/地区的颜色 ID，然后检查您单击的像素的颜色。[本教程](http://mflux.tumblr.com/post/28367579774/armstradeviz)解释了如何做到这一点。

# mysql - MySQL 事务自动结算器计算查询

> ID：15703211
> 
> 赞同：2
> 
> 时间：2013-03-29T12:26:08.853
> 
> 标签：mysql, sql

我正在为彼此共享账单的人创建一个小型自动结算器网络应用程序。

举个简单的例子，如果 Sam、Bill 和 Jim 住在一起并分担电费、煤气费和宽带费等共同账单，他们应该能够将每笔交易输入到 Web 应用程序，然后应用程序会自动计算谁应该支付对谁。

有两个表与这个问题有关：“transactions”和“transactionusers”。

**交易：** ID、用户 ID、零售商、项目、日期

**Transactionusers：** ID、TransactionID、Amount、UserID

当 Sam 添加电费账单（90 美元）的“交易”记录并将金额平均分配给室友时，3 条记录将添加到“交易用户”表中。

我希望能够编写一个 SQL 查询来计算所有用户之间所有交易的总和，然后取消反向交易（例如，如果 Sam 欠 Bill 50 美元，Bill 欠 Sam 20 美元，那么结算是 Bill 欠 Sam 30 美元)

我当前的查询允许您总结每对用户之间的总交易价值，但不带走反向交易 - 非常感谢任何帮助：

```
SELECT transactionusers.userID AS debtor, SUM(amount) AS owes, transactions.userID AS toUser FROM transactionusers
INNER JOIN transactions ON transactions.ID = transactionusers.transactionID
WHERE transactions.userID <> transactionusers.userID
GROUP BY transactionusers.userID, transactions.userID 
```

**示例数据**

假设 UserID 是 Sam (1)、Bill (2)、Jim (3)

**交易：**

`1, 1, 'Electricity Co', 'Electricity Bill'`
`2, 2, 'Gas Co', 'Gas Bill'`
`3, 3, 'Broadband Co', 'Broadband Charge'`

**交易用户：**

`1, 1, 30, 1`
`2, 1, 30, 2`
`3, 1, 30, 3`

`4, 2, 20, 1`
`5, 2, 20, 2`
`6, 2, 20, 3`

`7, 3, 5, 1`
`8, 3, 5, 2`
`9, 3, 5, 3`

示例记录中未显示的是在用户之间不均等地分配账单的能力；例如：如果吉姆在这所房子里多住一个月，他可能会拿到更多的账单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:21:05.630

您的查询很好，您只需对同一个查询进行连接并扣除结果：

```
SELECT transactionusers.userID AS debtor, IF(SUM(amount)-r.owes < 0, 0, SUM(amount)-r.owes) AS owes, transactions.userID AS toUser FROM transactionusers
INNER JOIN transactions ON transactions.ID = transactionusers.transactionID
LEFT JOIN (
    SELECT transactionusers.userID AS debtor, SUM(amount) AS owes, transactions.userID AS toUser FROM transactionusers
    INNER JOIN transactions ON transactions.ID = transactionusers.transactionID
    WHERE transactions.userID <> transactionusers.userID
    GROUP BY transactionusers.userID, transactions.userID
) r ON r.debtor = transactions.userID AND r.toUser = transactionusers.userID
WHERE transactions.userID <> transactionusers.userID
GROUP BY transactionusers.userID, transactions.userID 
```

# r - 在 R 中读取不太正确的 .csv 文件

> ID：15703212
> 
> 赞同：0
> 
> 时间：2013-03-29T12:26:09.460
> 
> 标签：r, csv, dataframe

我有以下格式的 .csv 文件：

```
A, B, C
...
2.0, 4.0, 2.0^ 
...
7.3, 1.3, 6.8^ 
... 
```

其中 ^ 表示以“”开头的任何符号组合，`,`例如`,,,,d..k3.4,,,,2,3f,,,`最后总是有行尾。我希望我的输出帧将是：

```
 A   B   C
    ...
    2.0 4.0 2.0 
    ...
    7.3 1.3 6.8
    ... 
```

如何将此文件读入框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:43:51.987

你的例子不清楚。您可能应该向我们展示您的文本文件的 2 或 3 行。

假设你的文件是这样的：

```
TEXT <- 'A, B, C
2.0, 4.0, 2.0,,,,,d..k3.4,,,,2,3f,,,
7.3, 1.3, 6.8,,,,,,2,3f,,,' 
```

您可以使用`read.table`with 选项阅读它`fill=TRUE`

```
dat <- read.table(text=TEXT,header=FALSE,sep=',',fill=TRUE) 
dat <- dat[,colSums(is.na(dat))<nrow(dat)]
(dat <- dat[-1,])
  V1   V2   V3      V8 V9 V10 V12 V13
2 2.0  4.0  2.0 d..k3.4 NA       2  3f
3 7.3  1.3  6.8          2  3f  NA 
```

# java - 保存文件/打开文件对话框，使用 Swing & Netbeans GUI 编辑器

> ID：15703214
> 
> 赞同：10
> 
> 时间：2013-03-29T12:26:16.803
> 
> 标签：java, swing, netbeans, user-interface

我是Java的初学者。我正在使用它的 GUI 编辑器在 netbeans 7(.3) IDE 中制作一个简单的文本编辑器。我面临的主要问题是我无法保存/打开文件。我创建了“保存”按钮。当我放下文件选择器时，它是一个嵌入在 java 窗口中的普通打开文件对话框，根本没有任何功能。我还尝试在单击保存按钮时（在源视图中）创建一个新的 jFileChooser，但它不起作用。

简而言之，我需要一个简单的打开/保存对话框。当按下“保存”按钮时，保存对话框将打开并保存用户选择的任何名称和 .rtf 或 .txt 扩展名的文件。（PS：Java 中是否可以将文件保存为 .docx 或 .doc？）
当按下“打开”按钮时，它会打开一个 .rtf 或 .txt 文件（同样，是否可以打开 .docx 或Java中的.doc？）通过文件选择器。

```
 private void saveButtonActionPerformed(java.awt.event.ActionEvent evt) {                                           
    JFileChooser saveFile = new JFileChooser();
    if saveFile.showSaveDialog(modalToComponent) == JFileChooser.APPROVE_OPTION {
        File xyz = saveFile.getSelectedFile();
    }
} 
```

代码在这里：[https ://docs.google.com/file/d/0B766zz1iJ1LRN2lGRjNtM29vN2M/edit?usp=sharing](https://docs.google.com/file/d/0B766zz1iJ1LRN2lGRjNtM29vN2M/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-29T14:15:09.340

我创建了一个示例 UI，它显示了保存和打开文件对话框。单击保存按钮打开保存对话框，然后单击打开按钮打开文件对话框。

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class FileChooserEx {
    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                new FileChooserEx().createUI();
            }
        };

        EventQueue.invokeLater(r);
    }

    private void createUI() {
        JFrame frame = new JFrame();
        frame.setLayout(new BorderLayout());

        JButton saveBtn = new JButton("Save");
        JButton openBtn = new JButton("Open");

        saveBtn.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                JFileChooser saveFile = new JFileChooser();
                saveFile.showSaveDialog(null);
            }
        });

        openBtn.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                JFileChooser openFile = new JFileChooser();
                openFile.showOpenDialog(null);
            }
        });

        frame.add(new JLabel("File Chooser"), BorderLayout.NORTH);
        frame.add(saveBtn, BorderLayout.CENTER);
        frame.add(openBtn, BorderLayout.SOUTH);
        frame.setTitle("File Chooser");
        frame.pack();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T13:24:51.743

我认为你面临三个问题：

1.  了解 FileChooser
2.  写/读文件
3.  了解扩展名和文件格式

广告 1\. 您确定已将 FileChooser 连接到正确的面板/容器吗？我会去找一个关于这个问题的简单教程，看看它是否有效。这是最好的学习方式——向前迈出小而大的步伐。有时将问题分解为这些部分可能会很棘手；）

广告。2\. 保存或打开文件后，您应该有写入或读取文件的方法。在这个问题上也有非常简洁的例子，而且很容易理解这个话题。

广告。3\. 有扩展名的文件和文件格式是有区别的。您可以将任何文件的格式更改为您想要的任何格式，但这不会影响其内容。它可能只会使与此类扩展名关联的应用程序无法读取文件。TXT 文件很容易——您可以阅读您所写的内容。XLS、DOCX 等需要更多的工作，通常框架是解决这些问题的最佳方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T13:51:18.647

以任何格式保存是非常可能的。检查以下 [- http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)

第二，你期望保存对话框工作的究竟是什么，它的工作原理是这样的，打开一个 doc 文件是很有可能的 - [http://srikanthtechnologies.com/blog/openworddoc.html](http://srikanthtechnologies.com/blog/openworddoc.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-21T17:50:40.523

这是一个例子

```
private void doOpenFile() {
    int result = myFileChooser.showOpenDialog(this);

    if (result == JFileChooser.APPROVE_OPTION) {
        Path path = myFileChooser.getSelectedFile().toPath();

        try {
            String contentString = "";

            for (String s : Files.readAllLines(path, StandardCharsets.UTF_8)) {
                contentString += s;
            }

            jText.setText(contentString);

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}

private void doSaveFile() {
    int result = myFileChooser.showSaveDialog(this);

    if (result == JFileChooser.APPROVE_OPTION) {
        // We'll be making a mytmp.txt file, write in there, then move it to
        // the selected
        // file. This takes care of clearing that file, should there be
        // content in it.
        File targetFile = myFileChooser.getSelectedFile();

        try {
            if (!targetFile.exists()) {
                targetFile.createNewFile();
            }

            FileWriter fw = new FileWriter(targetFile);

            fw.write(jText.getText());
            fw.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

# php - PHP fork 过多的任务

> ID：15703215
> 
> 赞同：0
> 
> 时间：2013-03-29T12:26:22.663
> 
> 标签：php

当用户在我的 php 驱动站点上注册时，注册脚本必须执行一些任务，其中一些任务需要更长的时间，因为他们必须联系 3rd 方服务器。

我怎样才能将这些任务从主 php 脚本中分离出来，以便用户立即看到结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:29:05.523

您可以[创建一个子进程](http://php.net/manual/en/function.pcntl-fork.php)，或者只是在您的数据库或一个小文件中创建一个队列并运行一个[cronjob](http://en.wikipedia.org/wiki/Cron)。您还可以通过运行来创建子进程[`exec()`](http://php.net/manual/en/function.exec.php)。

```
exec('php /path/to/script.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:39:38.963

不知道你想做什么...

您可以使用 exec('php myScript.php'); 执行外部 php 脚本；

但是用户没有得到这个脚本的结果，因为用户只得到主 php 脚本的结果......

如果你想让用户得到所有执行脚本的结果，那么你应该使用 ajax 调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T19:32:51.930

假设您很乐意独立于第 3 方请求向用户发送响应......

如果您忽略_user_abort() 并发送标头（“连接：关闭”）；并刷新输出缓冲区，然后您可以简单地通过 register_shutdown_function() 调用远程站点。如果要处理多个远程请求，则使用 curl_multi 函数并行运行它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-30T10:38:31.523

如果不需要 3rd 方请求来显示页面，您可以随时在后台创建一个 PHP 脚本，方法是执行

***shell_exec('echo /usr/bin/php -q myLongScript.php | at now');***

您可以考虑将信息存储在数据库表中并通过 PHP cronjob 脚本以预定的时间间隔处理第 3 方注册，而不是在每次新用户注册时分叉一个新实例来处理第 3 方注册。

[通过 Cron 作业运行 PHP](https://stackoverflow.com/questions/11090842/run-php-through-cron-job)

# azure - Windows Azure VDI 角色

> ID：15703241
> 
> 赞同：0
> 
> 时间：2013-03-29T12:28:19.163
> 
> 标签：azure

我刚刚使用 Windows Azure 设置了 Windows Server 2012，我正在尝试安装 VDI 角色，以便我可以使用服务器将虚拟桌面部署到网络上的其他用户，但是角色的安装从未完成，我收到以下信息错误“此服务器上不存在硬件辅助虚拟化”。现在这是由于处理器本身不支持这一事实，还是实际上不可能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:50:32.633

当然！您无法虚拟化已经虚拟化的内容！虚拟化的主要原理。

这是一方面。另一方面，在法律上，根据 Windows Server License，您不得在任何公共云环境中部署和使用 RDS。

# spotify - 从 libspotify 获取完整的歌曲音频数据

> ID：15703244
> 
> 赞同：0
> 
> 时间：2013-03-29T12:28:28.843
> 
> 标签：spotify, libspotify

我正在使用 pyspotify，这是一个用于 libspotify 的 python 包装器来播放来自 Spotify 的歌曲。我想在开始播放之前对整首歌曲进行一些音频分析，有没有办法一次从整首歌曲中获取音频？

在整个播放过程中都会调用 music_delivery 回调，也许有一种方法可以在服务器提供数据时立即调用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:20:07.250

不，这是不可能的。但是，您可以简单地自己排队音频数据，而不是将其传递给音频驱动程序。几分钟后，您将拥有所需的一切。

# java - 谷歌地图片段不加载

> ID：15703245
> 
> 赞同：6
> 
> 时间：2013-03-29T12:28:32.037
> 
> 标签：java, android, google-maps, android-fragments

我想加载一个[谷歌地图](http://en.wikipedia.org/wiki/Google_Maps)对象并创建一些监听器：

我创建了这个类：

```
import java.lang.ref.WeakReference;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMap.OnMarkerDragListener;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;
import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;

import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.support.v4.app.FragmentActivity;
import android.util.Log;
import android.view.View;
import android.view.ViewParent;
import android.widget.ImageView;
import android.widget.Toast;

public class itemSaleActivity extends FragmentActivity  {
    private static Context app;
    private static GoogleMap map;
    static final LatLng HAMBURG = new LatLng(53.558, 9.927);
    private static final int LOAD_COORD = 0;
    private ImageView pic;
    private LocationHandler mHandler;

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        // Set View to register.xml
        setContentView(R.layout.itemsale);

        app = getApplicationContext();
        Bundle extras = getIntent().getExtras();
        byte[] byteArray = extras.getByteArray("picture");
        Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length);

        pic = (ImageView) findViewById(R.id.itemImage);
        pic.setImageBitmap(bmp);

        map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();
        //Marker hamburg = map.addMarker(new MarkerOptions().position(HAMBURG).title("Hamburg"));
        mHandler = new LocationHandler(this);

        OnMarkerDragListener markerDragListener = new OnMarkerDragListener() {

            @Override
            public void onMarkerDragStart(Marker marker) {
                // Called when the marker drag is started
            }

            @Override
            public void onMarkerDragEnd(Marker marker) {
                // Called when the marker is dropped down.
                double[] coords = null;
                coords[0] = marker.getPosition().latitude;
                coords[1] = marker.getPosition().longitude;
                RestoreUIwithSavedLocation(coords);
                Toast.makeText(getApplicationContext(),"Pin Dropped at: " + coords[0] + ", " + coords[1]+marker.getTitle() , Toast.LENGTH_LONG).show();
            }

            @Override
            public void onMarkerDrag(Marker marker) {

            }
        };

        map.setOnMarkerDragListener(markerDragListener);

        View titleView = getWindow().findViewById(android.R.id.title);
        if (titleView != null) {
            ViewParent parent = titleView.getParent();
            if (parent != null && (parent instanceof View)) {
             View parentView = (View)parent;
             parentView.setVisibility(View.GONE);
            }
        }

        // You can also assign the title programmatically by passing a
        // CharSequence or resource id.
    }

    private void RestoreUIwithSavedLocation(double[] coordsArray) {
        Message.obtain(mHandler, LOAD_COORD, coordsArray).sendToTarget();
    }

    static class LocationHandler extends Handler {
        WeakReference<Activity> mActivity;

        public LocationHandler(Activity activity) {
            mActivity = new WeakReference<Activity>(activity);
        }

        public void handleMessage(Message msg) {
            Activity contextActivity = mActivity.get();
            switch ((int)msg.what) {

            case LOAD_COORD:
                map.clear();
                double[] coordArray = (double[])msg.obj;
                Marker marker = map.addMarker(new MarkerOptions().position(new LatLng(coordArray[0], coordArray[1])));
                map.moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(coordArray[0], coordArray[1]), 18));
                map.animateCamera(CameraUpdateFactory.zoomTo(18), 2000, null);
                marker.setDraggable(true);
                String s = Double.toString(coordArray[0]) + ", " + Double.toString(coordArray[1]);
                Toast.makeText(app,"in the case"+s , Toast.LENGTH_LONG).show();
                break;
            }
        }
    }
} 
```

这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/itemImage"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:src="@drawable/logo" />

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="400dp"
        android:layout_marginTop="10dp"
        android:layout_weight="66496.79"
        android:orientation="horizontal" >

        <fragment
            android:id="@+id/map"
            class="com.google.android.gms.maps.MapFragment"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_marginRight="150dp" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="170dp"
            android:orientation="vertical" >

            <Button
            android:id="@+id/messageBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:text="fffff" />

            <Button
                android:id="@+id/call"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_alignParentRight="true"
                android:text="ffff" />

        <Button
            android:id="@+id/sms"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignRight="@+id/button1"
            android:layout_centerVertical="true"
            android:text="ffff" />
        <Button
            android:id="@+id/email"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignRight="@+id/button1"
            android:layout_centerVertical="true"
            android:text="fffff" />

        <Button
            android:id="@+id/navigate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/button1"
            android:layout_alignParentEnd="false"
            android:layout_alignParentStart="false"
            android:layout_below="@+id/button1"
            android:layout_marginTop="14dp"
            android:text="ffffffffff" />
        </LinearLayout>
    </RelativeLayout>
</LinearLayout> 
```

当我在手机（galaxy s2）上调试它时，它向我显示了一个异常：

```
03-29 15:24:29.750: E/AndroidRuntime(2579): FATAL EXCEPTION: main
03-29 15:24:29.750: E/AndroidRuntime(2579): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.sal/com.example.sal.itemSaleActivity}: android.view.InflateException: Binary XML file line #26: Error inflating class fragment
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2079)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.app.ActivityThread.access$600(ActivityThread.java:132)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.os.Looper.loop(Looper.java:137)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.app.ActivityThread.main(ActivityThread.java:4575)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at java.lang.reflect.Method.invokeNative(Native Method)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at java.lang.reflect.Method.invoke(Method.java:511)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at dalvik.system.NativeStart.main(Native Method)
03-29 15:24:29.750: E/AndroidRuntime(2579): Caused by: android.view.InflateException: Binary XML file line #26: Error inflating class fragment
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.app.Activity.setContentView(Activity.java:1835)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at com.example.sal.itemSaleActivity.onCreate(itemSaleActivity.java:45)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.app.Activity.performCreate(Activity.java:4465)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2033)
03-29 15:24:29.750: E/AndroidRuntime(2579):     ... 11 more
03-29 15:24:29.750: E/AndroidRuntime(2579): Caused by: java.lang.ClassCastException: com.google.android.gms.maps.MapFragment cannot be cast to android.support.v4.app.Fragment
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.support.v4.app.Fragment.instantiate(Fragment.java:388)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.support.v4.app.Fragment.instantiate(Fragment.java:363)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:264)
03-29 15:24:29.750: E/AndroidRuntime(2579):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
03-29 15:24:29.750: E/AndroidRuntime(2579):     ... 22 more 
```

其中 xml 文件中的第 26 行是：

```
 <fragment
                android:id="@+id/map"
                class="com.google.android.gms.maps.MapFragment"
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:layout_marginRight="150dp" /> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T12:41:30.570

在 XML 文件中，使用`class="com.google.android.gms.maps.SupportMapFragment"`.

在你的主要课程中，使用：

```
map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap(); 
```

代替：

```
map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T12:44:56.113

要添加`SupportMapFragment`到您的项目中，您需要添加`google-support-v4`库和`google map libraries`. 您可以在我写的博客文章*[Google Maps API V2](http://blog-emildesign.rhcloud.com/?p=435)*中了解如何做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T12:47:47.587

`FragmentActivity`由*Android Support Library v4*提供，以允许[Android 3](http://en.wikipedia.org/wiki/Android_version_history#Android_3.0_Honeycomb_.28API_level_11.29) (Honeycomb) 之前的 Android 平台使用 Fragments。`Activity`对于 Honeycomb 及更高版本，标准类支持使用片段

问题是，根据您选择的活动类，您不能使用相同的片段类：

*   ，`android.support.v4.app.FragmentActivity`你可以使用`android.support.v4.app.Fragment`
*   ，`android.app.Activity`你必须使用`android.app.Fragment`

注意包装差异。

现在，对于 Android 版 Google Maps v2，您有两个 Fragment 实现：

*   `MapFragment`扩展`android.app.Fragment`到 Honeycomb 及更高版本
*   `SupportMapFragment`扩展`android.support.v4.app.Fragment`以支持较旧的 Android 版本

因此，当您使用`FragmentActivity`时，您必须`SupportMapFragment`为您的应用程序使用该实现。

# javascript - GWT 定时器取消不起作用

> ID：15703247
> 
> 赞同：2
> 
> 时间：2013-03-29T12:28:35.030
> 
> 标签：javascript, gwt, click, double-click, gwtquery

我正在尝试编写代码来区分使用 GWT 和 GWTQuery 的单击和双击。我明白[了](http://jsfiddle.net/KpCwN/4/)。所以我把它翻译成这样的 GWT：（我的应用程序不能有全局变量，所以我用元素属性来做那部分）：

```
$("img").live("click", new Function() {
         public boolean f(Event event) {
            String clicksString = $(event).attr("clicks");
            int clicks = Integer.parseInt(clicksString);
            clicks++;
            $(event).attr("clicks",String.valueOf(clicks));
            Timer t = new Timer() {

                @Override
                public void run() {
                    Window.alert("Click");
                    $(event).attr("clicks","0");
                }
            };

            if (clicks == 1) {
              t.schedule(200);
            }

            else {
              t.cancel();
              $(event).attr("clicks","0");
              Window.alert("Double Click");
            }
            return true;
          }
}); 
```

在这里，当单击图像时，应该会弹出一个警报，显示**Single Click**，如果用户双击（在 200 毫秒内），它应该会弹出**Double Click**。单击它可以正常工作，但是在双击时，即使弹出**双击警报，单击****确定**以摆脱它，我发现**单击**警报等待被摆脱。

不知何故，我认为`t.cancel()`双击时不会触发。谁能告诉我如何解决这个问题？

更新：

公认的解决方案可以很好地用于警报，但是当我也需要该`event`参数时，必须对其进行微调。这样做之后，问题又回来了，计时器没有清除，现在我收到两个警报，**双击**和**单击**..：

```
 $("img").live("click", new Function() {
              int clicks = 0;

            public boolean f(Event event) {

                  Timer t = new Timer() {

                    @Override
                    public void run() {
                        clicks = 0;
//                            Here I need the event paramater

                    }
                };
                if (clicks++%2 == 0) {
                    t.schedule(5000);
                }
                else {
                    t.cancel();
                    clicks = 0;
 //                       Here also I need the event paramater
                }
                return true;
            }
          }); 
```

@Manolo 更新：根据我在下面的评论，最后的代码应该是：

```
 $("img").live("click", new Function() {
        int clicks = 0;
        Event event;
        Timer t = new Timer() {
           @Override
            public void run() {
               // Use the event
               event....
            }
        };
       public boolean f(Event event) {
            this.event = event;
            if (clicks++%2 == 0) {
                t.schedule(5000);
            } else {
                t.cancel();
                // Use the event
                event....
            }
            return true;
        }
      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:09:28.057

是不是觉得 GWT 的[DoubleClickEvent](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/event/dom/client/DoubleClickEvent.html)不够用。即使你使用 GwtQuery，为什么不听来自 Dom 的 Double Click 事件而不是 Click Event？使用计时器来区分双击是非常糟糕的方法。

在普通的 GWT 双击将是 -

```
public void onModuleLoad() {
    final Image button = new Image("http://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Katrina_Kaif.jpg/220px-Katrina_Kaif.jpg");

    button.addDoubleClickHandler( new DoubleClickHandler() {
        @Override
        public void onDoubleClick(DoubleClickEvent event) {
            Window.alert("DoubleClick");
        }
    });
    button.addClickHandler(new ClickHandler() {
        @Override
        public void onClick(ClickEvent event) {
            Window.alert("Click");
        }
    });
    RootPanel.get("slot1").add(button);
} 
```

在 GwtQuery 中，您可以尝试使用 'dblclick'

```
$("img").live("dblclick", new Function() {
// Your code....
} 
```

## 更新

您可能不得不从 Jquery 社区借用解决方案。这似乎是 jquery 社区在这里[@Jquery 绑定双击和单击单独的旅行地](https://stackoverflow.com/questions/6330431/jquery-bind-double-click-and-single-click-separately)

**引用 .dblclick() 在 jQuery 站点**

*不建议将处理程序绑定到同一元素的 click 和 dblclick 事件。触发的事件顺序因浏览器而异，有些在 dblclick 之前接收两个点击事件，而另一些只接收一个。双击灵敏度（被检测为双击的两次单击之间的最长时间）可能因操作系统和浏览器而异，并且通常是用户可配置的。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T22:19:06.047

以下代码与您所说的 jsfiddle 示例中的代码完全相同：

```
 $("img").click(new Function() {
    boolean b = false;
    Timer t = new Timer() {
      public void run() {
        Window.alert("Click");
      }
    };
    public void f() {
      if (b = !b) {
        t.schedule(200);
      } else  {
        t.cancel();
        Window.alert("Double Click");
      }
     }
  }); 
```

除非您之前将事件沉没到元素，否则不需要阻止默认片段，但在这种情况下，代码应该是：

```
 $("img").dblclick(new Function() {
    public boolean f(Event e) {
      return false;
    }
  }); 
```

**已编辑**：如果您希望每个匹配元素具有唯一变量，最好的方法是创建与元素一样多的函数。使用`GQuery.each()`是更简单的方法：

```
 $("img").each(new Function() {
    public void f() {
      $(this).click(new Function() {
        boolean b = false;
        Timer t = new Timer() {
          public void run() {
            Window.alert("Click");
          }
        };
        public void f() {
          if (b = !b) {
            t.schedule(200);
          } else  {
            t.cancel();
            Window.alert("Double Click");
          }
         }
      });
  }}); 
```

您甚至可以只使用一个函数并在元素中存储变量，但您不仅应该像在查询中假装那样存储计数器，还应该存储每个元素的计时器：

```
 $("img").click(new Function() {
    public void f() {
      boolean b = $(this).prop("c", Boolean.class);
      Timer t = $(this).prop("f");
      if (t == null) {
        t = new Timer() {
          public void run() {
            Window.alert("Click");
          }
        };
        $(this).prop("f", t);
      }
      if (b = !b) {
        t.schedule(200);
      } else  {
        t.cancel();
        Window.alert("Double Click");
      }
      $(this).prop("c", b);
     }
  }); 
```

# jquery - 如何制作 Jquery 或 CSS3 动画“如果可以，请抓住我”按钮？

> ID：15703249
> 
> 赞同：3
> 
> 时间：2013-03-29T12:28:48.430
> 
> 标签：jquery, css, animation, jquery-animate

我想使用纯 CSS 或 Jquery 创建一个动画按钮，以便在 4 月 1 日为我的访问者开个玩笑。基本上，这将是常规按钮，但是当用户将鼠标悬停在鼠标上时，它会快速移动到鼠标的另一侧。这是一个简单的游戏。但它不应该那么难捕捉。如果他/她努力，用户可以点击它:)

谁能帮我创建这个？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T12:36:39.863

像这样的东西：

```
$("button").mouseover(function(){
    $(this).css({
        left:(Math.random()*300)+"px",
        top:(Math.random()*300)+"px",
    });
}); 
```

演示：http: [//jsfiddle.net/ZQamp/](http://jsfiddle.net/ZQamp/)

* * *

感谢@roXon 建议提供更好的动画：http: [//jsfiddle.net/ZQamp/3](http://jsfiddle.net/ZQamp/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:01:56.480

这是完整的代码：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<!DOCTYPE html>
    <html>
    <head>
        <style type="text/css">
            .block
            {
                position: absolute;
                left: 50px;
                width: 130px;
                height: 30px;
                margin: 5px;
            }
        </style>
        <script src="ReferencetoYourJqueryFile" type="text/javascript"></script>
    </head>
    <body>
        <div class="block">
            <input type="button" name="btnClick" value="Catch me if you can" style="width: 130px;
                height: 30px; border: 1px sold silver; background-color: #f7dfb5" />
        </div>
        <script type="text/javascript">
            $(".block").mouseover(function () {
                $(".block").animate({ 
                        left:(Math.random()*500),
                        top:(Math.random()*500),
                 }, "fast");
            });
        </script>
    </body>
    </html>
```

# rdf - 如何在 OWL 中声明属性必须具有一组有序值？

> ID：15703250
> 
> 赞同：3
> 
> 时间：2013-03-29T12:29:03.343
> 
> 标签：rdf, ontology, owl, rdfs

如何在 OWL 中声明属性必须具有一组有序值？

例如：一个 Program 必须有一个 rdf:Seq of Series，而一个 Series 必须有一个 rdf:Seq of Episodes？

[http://purl.org/ontology/po/](http://purl.org/ontology/po/)本体使用属性http://purl.org/ontology/po/position[代替](http://purl.org/ontology/po/position)。

哪种方法更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:35:33.017

在 OWL（和 RDF）中很难表示序列，它更多的是关于无序的事物集。我发现最好的方法是通过属性分配一个数字，然后跟踪该索引并在需要时使用它进行迭代。

代表您想要捕获的内容的 OWL 本体可能是这样的（使用曼彻斯特语法 - 您可以保存为 .owl 文件并使用[Protege](http://protege.stanford.edu/)打开-`#`是注释）：

```
Prefix: xsd: <http://www.w3.org/2001/XMLSchema#>
Prefix: owl: <http://www.w3.org/2002/07/owl#>
Prefix: : <brain#>
Prefix: xml: <http://www.w3.org/XML/1998/namespace>
Prefix: rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
Prefix: dc: <http://purl.org/dc/elements/1.1/>
Prefix: rdfs: <http://www.w3.org/2000/01/rdf-schema#>
Ontology: <brain.owl>

Datatype: xsd:int

ObjectProperty: has
  Characteristics: 
    Transitive

# Property used to save the number in the sequence
DataProperty: episode-number
  Range: 
    xsd:int

# Definition of a program: A program as at least a series
Class: Program
  SubClassOf: 
    has some Series

Class: owl:Thing

# Definition of series: A series as at least one episode
Class: Series
  SubClassOf: 
    has some Episode

Class: Episode

# Instance of episode
Individual: episode1
  Types: 
    Episode

  # Episode number
  Facts:  
   episode-number  "1"^^xsd:int

# Second instance of episode
Individual: episode2
  Types: 
    Episode

Facts:  
 episode-number  "2"^^xsd:int 
```

假设您想要迭代剧集实例。这可以通过 OWL 查询来实现`Episode and episode-number value 1`。您必须自己更新号码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T15:51:24.137

> 如何在 OWL 中声明属性必须具有一组有序值？例如：一个 Program 必须有一个 rdf:Seq of Series，而一个 Series 必须有一个 rdf:Seq of Episodes？

如果您正在使用 OWL (DL)，那么您不应该真正使用 RDF 集合。 [如果您可以具体化关系并包含位置编号， loopasam 的答案](https://stackoverflow.com/a/15721427/1281433)很好，但您也可以在类似于 RDF 列表的 OWL 中声明自己的列表结构（这只是单链表的 RDF 编码）。因此你可以有

```
:series hasEpisodeList [ ex:first :episodeA ;
                         ex:rest [ ex:first :episodeB ;
                                   ex:rest [ :episodeC ;
                                             ex:rest ex:nil ] ] ] . 
```

但是，这种方法的缺点是数字信息只是隐含的，并且很难使用 DL 查询来重构（尽管使用 SPARQL 并不太难）。[这两种表示序列的方法在本体中的实体排序](https://stackoverflow.com/q/24398297/1281433)和它所链接的其他问题和答案中都有更详细的描述。

# java - Java Exception 错误打印

> ID：15703252
> 
> 赞同：1
> 
> 时间：2013-03-29T12:29:09.810
> 
> 标签：java, exception, process, output

您好，我正在运行此代码：

```
public static int chooseOption() {
    int choice = 0;
    System.out.println("Enter number [1, 2, 3..]");

    do {
        try { 
            choice = sc.nextInt();
        } catch ( java.util.InputMismatchException e ) {
            System.out.println(e);
            break;
        }
    } while( choice == 0 || choice < 0);

    return choice;
}

public static String chooseCom() {
    String choice = new String();
    int commNumber = 0;

    System.out.println("Choose your COM port");
    commNumber = chooseOption();

    choice = "COM" + commNumber;
    System.out.println(choice);
    return choice;
} 
```

之后我打电话 - >

```
Helper.chooseOption();

Helper.chooseCom(); 
```

当我在第一次调用 1.1 或只是一个错误的 float(double) 值时写入输出是：

```
Enter number [1, 2, 3..]
1.1
java.util.InputMismatchException
Choose your COM port
Enter number [1, 2, 3..]
java.util.InputMismatchException
COM0 
```

第二个 java.util.Input.. 问题是为什么当我只在第一次通话时写错号码时他会弹出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:38:08.900

当给定的输入与预期的不匹配时，`nextInt`不会消耗输入。[从文档中](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)：

> 当扫描器抛出 InputMismatchException 时，扫描器不会传递导致异常的令牌，以便可以通过其他方法检索或跳过它。

一个解决方案是跳过 catch 子句中的无效输入，例如`nextLine`：

```
 try { 
        choice = sc.nextInt();
    } catch ( java.util.InputMismatchException e ) {
        System.out.println(e);
        sc.nextLine(); // skip the entire line
        break;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T12:41:45.773

假设这`sc`是一个`java.util.Scanner`...

Scanner 类通过（概念上）将输入拆分为标记，然后处理标记来工作。如果您`sc.nextInt()`在下一个标记与整数的语法不匹配时调用，则该调用将引发该异常。

但是，如果`nextXxx`方法抛出异常，它不会“消耗”下一个标记。相反，它将它留在扫描仪的令牌流中......所以当您再次调用`sc.nextInt()`时，它将尝试再次解析相同的令牌并抛出相同的异常。

要丢弃令牌，您需要调用`sc.next()`. 或者，如果您想丢弃整行，请调用`sc.nextLine()`.

# git - 获取签出版本的 git 标签？

> ID：15703253
> 
> 赞同：5
> 
> 时间：2013-03-29T12:29:10.540
> 
> 标签：git, tags

我正在做

```
$ git tag

current
tag_example_to_test_task

$ git checkout tag_example_to_test_task

...

HEAD is now at 75fdde3... commit comment text example

 $ git name-rev --name-only --tags HEAD

current

$ git describe --exact-match --tags

current 
```

我需要用这样的命令结束执行序列：

```
$ git "some command here"

tag_example_to_test_task 
```

怎么做？如何获取当前签出标签的标签名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:37:59.350

我认为

```
git log -n 1 --pretty=format:'%d' 
```

应该做的伎俩。

但是，它会向您显示当前修订版具有的所有分支和标签的名称。我认为不可能只获得用于检查修订的单个标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-06T14:39:04.550

要找到您当前提交的原因，您可以使用

```
git reflog | sed q 
```

要查找您的最后一次结帐：

```
git reflog | sed '/ checkout: /! d; q' 
```

这会让你得到类似的东西

```
b836444 HEAD@{7}: checkout: moving from AMFD to testing 
```

表明你已经添加了七次提交，因为`git checkout testing`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-30T02:29:17.870

如果您想要当前版本的详细信息，请使用`git describe`. 它会告诉您最后一个标签以及该标签之后的提交次数。人类可读，而不是真正用于程序消费。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-26T18:25:05.627

这仅输出最新提交的标签。

```
# git log | head -1
commit 507e0647efd7e49aee53b14da970a7c2bf24555b 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-04-01T23:24:16.940

这应该可以解决问题：

```
git tag --points-at=$(git rev-parse HEAD) 
```

`git rev-parse HEAD`将获得当前 HEAD 的 SHA256。如果这个提交恰好被标记，这将被回复。如果当前 HEAD 未标记，则结果为空。

# command-line - 带参数的VB6 Shell

> ID：15703255
> 
> 赞同：0
> 
> 时间：2013-03-29T12:29:22.133
> 
> 标签：command-line, vb6

我可以打开命令行并输入

```
 devenv m:\myproject.sln /build Release 
```

这很好用。

现在我想从 VB6 调用命令行并执行相同的命令。

但这不起作用。我不确定我是否错过了什么。

这是我的代码：

```
dim lRet&
lRet = Shell("cmd /k devenv m:\myproject.sln /build Release", 0) 
```

命令行打开，但命令本身（“devenv m:\myproject.sln /build Release”）未执行。

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:54:49.697

您不需要在`SHELL`命令中键入 CMD。试试这个：

```
dim lRet&
lRet = Shell("devenv m:\myproject.sln /build Release", 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-13T05:30:45.457

```
Dim Parameter As String
Dim Res As Long
Dim Filename As String
    Filename = "C:\myfolder\myfile.exe" 'Check file is here first
If Dir(Filename) = "" Then
    MsgBox Filename & " not found with parameter " & Parameter, vbInformation
Else
    Res = Shell(Filename & " " & Parameter, vbHide)
End If 
```

如果您期望返回值，请使用 Res = Shell(Filename & " " & Parameter, vbHide) 否则 Shell Filename & " " & Parameter, vbHide

# python - 使用 BeautifulSoup 解析标签

> ID：15703256
> 
> 赞同：3
> 
> 时间：2013-03-29T12:29:26.870
> 
> 标签：python, html, parsing, tags, beautifulsoup

我遇到了关于 BeautifulSoup 的 python 编程问题。

起初，我需要创建一个函数来从网页的源页面中提取所有标签。我这样做如下：

```
 from bs4 import BeautifulSoup

    soup=BeautifulSoup(''.join(data))

    def parseUsingSoup(content):
        return soup.findAll('h3') 
```

我要解析的网站是这个：[http ://www.auc.nl/news-events/events-and-lectures/events-and-lectures.html?page=1&pageSize=40](http://www.auc.nl/news-events/events-and-lectures/events-and-lectures.html?page=1&pageSize=40)

它只包含一个 h3-tag。现在问题要我扩展我的函数，以便它还将在 p-tags 中返回与其相关的所有内容。它还要求一个包含四个元组的事件列表，这些元组给出事件的日期、标题、类型和描述。

我真的不知道该怎么做。我尝试了各种不同的东西，但没有什么能给我正确的结果。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T16:52:09.153

这是获取以下所有`<p>`标签的一种方法`<h3>`：

```
from bs4 import BeautifulSoup
import urllib2

content = 'http://www.auc.nl/news-events/events-and-lectures/events-and-lectures.html?page=1&pageSize=40'

soup = BeautifulSoup(urllib2.urlopen(content))

for x in soup.findAll('h3'):
    for y in soup.findAll('p'):
        print y 
```

然后，您可以将此输出解析为您认为合适的列表。

# visual-studio-2010 - #define 删除的 Visual Studio 扩展

> ID：15703259
> 
> 赞同：0
> 
> 时间：2013-03-29T12:29:34.967
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-extensions

我使用#define 来缩短重复的代码。例如

```
#define FOR(i, size) for (int i = 0; i < (int)(size); i++) 
```

然后我有这个代码

```
FOR(i, 5) 
```

假设我想从 i = 1 开始，因此我必须使用经典。Visual Studio 2010 是否有任何可能会根据使用的#define 自动将我的代码更改为正确的代码，然后我可以将其修改为从 1 开始？

上述代码中扩展使用的预期结果：

```
for (int i = 0; i < (int)(5); i++) 
```

# css - wkhtmltopdf/rotativa 中的 CSS3 支持

> ID：15703262
> 
> 赞同：1
> 
> 时间：2013-03-29T12:29:39.830
> 
> 标签：css, pdf, wkhtmltopdf, html-to-pdf, rotativa

我需要通过 rotativa 创建 pdf。如果 textarea 没有任何内容并且如果有任何内容也需要显示内容，我需要将 textarea 显示为与“rows”属性相同的空白行数。并且需要将其余行设为空白。

我在网上搜索，找到了一种纯 css3 方法来完成它。这是文本区域。

```
<textarea id="address" style="width:99%;border:none;font-size:19px;line-height:31px;width:100%;background-size: 100% 31px;background-image:-moz-linear-gradient(top , transparent, transparent 30px,#000000 0px);-moz-background-size: 100% 31px;background-image:-webkit-linear-gradient(top , transparent, transparent 30px,#000000 0);-webkit-background-size: 100% 31px;" rows="5">test test</textarea> 
```

它按预期显示在浏览器中，但是当我要从此 html 生成 pdf 时，这些行没有出现。请帮忙，请建议是否有其他方法可以满足我的要求。

谢谢， - 索万

# css - css svg 和 vector-effect="non-scaling-stroke" 浏览器兼容性

> ID：15703266
> 
> 赞同：10
> 
> 时间：2013-03-29T12:29:45.973
> 
> 标签：css, svg

从各种来源我收集到 svg 中的 vector-effect="non-scaling-stroke" 应该在当前版本的 Opera、Firefox 和 Chrome 中工作。（不确定IE10）。

但是我只能让它在 Opera 和 Firefox 中工作，然后只有当它直接嵌入为图像时，如果它在 CSS 中缩放为背景图像，则它不起作用。

我的问题：

为什么不镀铬？

为什么不在背景图像中？

有没有一种标准方法可以在所有最新的浏览器中使用它？

[一个小提琴的例子。](http://jsfiddle.net/79RKa/)

HTML：

```
<div><img src="http://dl.dropbox.com/u/60476509/close.svg" /></div>
<div><img id="one" src="http://dl.dropbox.com/u/60476509/close.svg" /></div>
<div id="two"></div>
<div id="three"></div> 
```

CSS：

```
#one {
    width: 200px;
    height: 200px;
}

#two {
    background-image: url("http://dl.dropbox.com/u/60476509/close.svg");
    height: 100px;   /* native size */
    width: 100px;
    background-size: contain;        
}
#three {
    background-image: url("http://dl.dropbox.com/u/60476509/close.svg");
    height: 200px;
    width: 200px;
    background-size: cover;        
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-23T04:34:57.810

我不知道幕后发生了什么，但有一个更简单的解决方案，至少对于内联 SVG（不确定背景）。改变：

```
<img src="svg-source.svg"/> 
```

到：

```
<object type="image/svg+xml" data="svg-source.svg"></object> 
```

此外，您需要确保已为 svg 文档[`viewBox`定义](https://stackoverflow.com/questions/15335926/svg-viewbox-attribute)。

根据[这个答案](https://stackoverflow.com/a/4482962/2472391)`object`，无论如何使用是更好的做法。[这](http://e.metaclarity.org/52/cross-browser-svg-issues/)是一篇不错的博客文章，建议（为了跨浏览器兼容性）：

```
<object type="image/svg+xml" data="svg-source.svg">
    <img src="png-version.png"/>
</object> 
```

我没有测试后一个选项，但如果它有效，它比[这个](https://stackoverflow.com/q/13059502/2472391)解决方案简单得多。

编辑：我发现作为嵌入式对象，SVG 会干扰“悬停”和“点击”事件，所以我最终屈服并决定我必须完全嵌入 SVG。但我对粘贴每一个都没有兴趣，所以我的 javascript 文件顶部有以下内容（我使用的是 JQuery）：

```
$(document).ready(function()
{
    $('.deferred-load').deferredLoad();
}
$.fn.deferredLoad = function()
{
    $(this).each(function()
    {
        $(this).load($(this).attr('data-load'));
    });
} 
```

现在`<img src="svg.svg"/>`我可以写而不是`<div class="deferred-load" data-load="svg.svg"></div>`.

当然，这在没有启用 Javascript 的情况下是行不通的。但这比粘贴所有丑陋的 XML 要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T07:50:43.880

在幕后，UA 需要绘制 SVG，然后将其转换为位图以创建图像（包括背景图像）。最简单的绘制方法是重用非图像渲染代码，然后缩放位图，但是当缩放位图时，它会变得模糊并且也不能正确渲染非缩放笔画。正确的方法是弄清楚您最终想要绘制位图的大小，并告诉 SVG 绘图代码在其中进行绘制。

这个[错误](https://bugzilla.mozilla.org/show_bug.cgi?id=600207)刚刚在 Firefox 中得到修复。您可以在今天尝试[Nightly](http://nightly.mozilla.org/)或等待 9 月的发布。

# jquery - 为大型图形的几个单独部分设置动画的想法

> ID：15703278
> 
> 赞同：2
> 
> 时间：2013-03-29T12:31:12.667
> 
> 标签：jquery, html, flash, css, animation

我在页面顶部有一个大图形。这是一堆徽标，每个徽标都位于图形的自己的一小部分。我希望新徽标每 4 或 5 秒旋转到位，每个位置有 3 或 4 个徽标循环。

每个徽标的动画将只是一个徽标替换图像特定部分中的另一个徽标。从上方快速而平稳地滑入将是理想的。

你会选择什么方法？

谢谢！

奥斯汀

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T12:40:57.157

看看[Greensock 动画平台 (GSAP)](http://www.greensock.com/gsap-js/)。它是一个补间库，最初是为 ActionScript 开发的，现在已移植到 JavaScript。它非常强大，支持延迟、交错、重复、循环、反向等，并且在过去 4 或 5 年中或多或少地成为 Flash 动画的行业标准。

您可能会对时间线功能特别感兴趣，因为它使编排您在上面描述的动画类型变得轻而易举。例如，它允许您将一组单独的动画组合在一起，并像单个动画一样播放、循环、重复和反转它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T19:49:32.723

这是使用 Greensock 的解决方案：http: [//jsfiddle.net/brian_griffin/zquLC/](http://jsfiddle.net/brian_griffin/zquLC/) 我相信它完全符合您的要求。请注意，您必须两次包含第一个徽标才能形成完美的循环。

这也可以使用 CSS3 动画来完成，但旧版浏览器支持 Greensock。

（伪）HTML

```
<div id="container">
    <div class="logo" id="firstlogo">
        <img 1/>
        <img 2/>
        <img 3/>
        <img 1/>
    </div>
    <div class="logo" id="secondlogo">ditto</div>
    <div class="logo" id="thirdlogo">ditto</div>
</div> 
```

CSS

```
#container {
    height:100px;
    overflow:hidden;
}
.logo {
    width:100px;
    height:400px;
    float:left;
    position:relative;
    top: -300px;
}
img {
    width:100px;
    height:100px;
    position:relative;
    display:block;
} 
```

JS

```
var spd = 1.5 //seconds
var tl = new TimelineMax({repeat:-1})
tl.to('firstlogo', spd, {top:"+=0px"})
tl.to('firstlogo', spd, {top:"+=100px"})
tl.to('firstlogo', spd, {top:"+=0px"})
tl.to('firstlogo', spd, {top:"+=100px"})
tl.to('firstlogo', spd, {top:"+=0px"})
tl.to('firstlogo', spd, {top:"+=100px"}) 
```

# c# - 为什么 web.config 有预定义的标签？

> ID：15703279
> 
> 赞同：-7
> 
> 时间：2013-03-29T12:31:15.480
> 
> 标签：c#, asp.net, web-config

我刚开始阅读 XML，它说它没有预定义的标签，那么 web.config 里面怎么会有预定义的标签，比如 ConectionString、appSettings 等？Web.Config 本身是用 XML 格式编写的，对吗？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T12:33:08.640

> Web.Config 本身是用 XML 格式编写的，对吗？

是的，但除此之外，它还关联了一个[XML 模式](http://en.wikipedia.org/wiki/XML_Schema_%28W3C%29)，并且负责从此 XML 文件中读取值的配置类验证该模式是否受到尊重。

您应该根据架构`well formed XML`进行区分。`valid XML`

# python - PANDAS 从 df 中删除一系列行

> ID：15703283
> 
> 赞同：27
> 
> 时间：2013-03-29T12:31:28.350
> 
> 标签：python, dataframe, pandas

我想从数据框底部删除 m 行。它是整数索引（带孔）。如何才能做到这一点？

熊猫 == 0.10.1 蟒蛇 == 2.7.3

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-29T12:53:14.897

使用 slice 选择您想要的部分：

```
df[:-m] 
```

如果要删除一些中间行，可以使用`drop`：

```
df.drop(df.index[3:5]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-11-08T05:54:51.433

您要删除的范围是 x 和 y 之间的索引的示例，我已将其设置为 0 和 10

仅选择 0 到 10 之间的位置以在删除之前查看要确认的行

```
x=0 # could change x and y to a start and end date
y=10 
df.loc[x:y] 
```

选择索引

```
df.loc[x:y].index 
```

所以要从数据框中删除选择

```
df.drop(df.loc[x:y].index, inplace=True) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T12:40:22.657

这应该工作

```
df.head(len(df) - m) 
```

# php - 这个错误有什么问题？

> ID：15703293
> 
> 赞同：1
> 
> 时间：2013-03-29T12:32:08.117
> 
> 标签：php, zend-framework

我使用 zend 部分助手：

```
 <?php echo $this->partial(include_once('../application/views/layouts/header.phtml'), array('from' => '<div id="logo_page"><img src="../css/images/master1.png"></div>')); ?> 
```

在 header.phtml 中：

```
<?php echo $this->escape($this->from) ?> 
```

当我尝试使用它时，我有错误：

> 异常 'Zend_View_Exception' 和消息 'script' **1** ' 在路径中找不到 (Y:/home/local.mekheda/application/modules/blog/views\scripts/;Y:\home\local.mekheda\application/views\scripts /)' 在 Y:\home\local.mekheda\library\Zend\View\Abstract.php:980

为什么它是 1，有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:35:22.353

您不需要该`include_once`指令。仅使用局部视图的路径：

```
$this->partial('../application/views/layouts/header.phtml', array('from' => '<div id="logo_page"><img src="../css/images/master1.png"></div>')); 
```

`include_once`成功返回`1`，因此出现错误消息。

**更新：**
不确定我是否完全理解您评论中的问题，但为什么不将所有 HTML 放在部分视图中：

```
// header.phtml
<div id="logo_page"><img src="<?php echo $this->img; ?>" /></div> 
```

并将其传递给局部视图，如下所示：

```
$this->partial('../application/views/layouts/header.phtml', array('img' => 'css/images/master.pg')); 
```

**注意：**如果文件`css/images/master.png`在您的`public`目录下，您可以像我一样传递它，而无需使用`../`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:34:47.333

您使用部分错误 - 抛出`include_once`语句

```
echo $this->partial(
    '../application/views/layouts/header.phtml',
    array('from' => '<div id="logo_page"><img src="../css/images/master1.png"></div>')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T12:36:10.420

将“header.phtml”放在 YourApplicationFolder/modules/Application/view/partials

```
< ?php echo $this->partial('partials/header.phtml',
                            array('from' => '<div id="logo_page"><img src="../css/images/master1.png"></div>')); ?> 
```

# iphone - 将两张图片合并在一起，保存第二张的具体位置

> ID：15703304
> 
> 赞同：0
> 
> 时间：2013-03-29T12:32:29.890
> 
> 标签：iphone, ios, objective-c

我试图让用户将预先选择的图像拖放到他们从图书馆或照片库中选择的图像上，并将新编辑的图像作为一个整体保存。

下面的代码合并了两个图像，但没有将第二个图像保存在用户选择的同一位置。“userImage”是非静态的。再次感谢您的任何意见！

```
//Saves the image to the camera roll
- (IBAction)savePhoto:(id)sender {

UIImage *backgroundImage = [imageView image]; //This image is static

//This image will be moved around by a touchesMoved event
UIImage *userImage = [UIImage imageNamed:@"chopper_stash.png"];

UIGraphicsBeginImageContext(backgroundImage.size);
[backgroundImage drawInRect:CGRectMake(0, 0, backgroundImage.size.width, backgroundImage.size.height)];

//I realize that this sends the image to the top left, but how do I declare it's new location
[userImage drawInRect:CGRectMake(0,0, userImage.size.width, userImage.size.height)];

UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

//Save it to the camera roll
UIImageWriteToSavedPhotosAlbum(result, nil, nil, nil);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:54:01.090

你是说：

```
[userImage drawInRect:CGRectMake(0,0, userImage.size.width, userImage.size.height)]; 
```

好吧，显然这意味着将`userImage`在点绘制`0,0`，也就是左上角。如果您不想在此处绘制图像，请不要在此处绘制！把它画在你想要的地方。

顺便说一句，如果您以自己的大小绘制整个图像，则不需要使用`drawInRect:`; 只需使用`drawAtPoint:`. 它更简单。

# c++ - MPI_Irecv 没有收到循环后发送的消息

> ID：15703305
> 
> 赞同：1
> 
> 时间：2013-03-29T12:32:34.487
> 
> 标签：c++, mpi

我一直在对哲学家就餐问题进行并行实现，但遇到了一个我无法解决的问题。基本上，我有一个 for 循环，其中一个进程检查任何新消息，然后休眠半秒（它重复这个随机次数）。在该部分之后，它会尝试收集所有需要的分叉，以便开始程序的“吃”部分。

问题是，由于某种原因，如果我从 for 循环内部发送一条 MPI 消息，目标进程会正常接收它，但如果我在循环之后发送一条消息，它不会。让我展示一下它在代码中的样子，希望它能让事情变得更加清晰：

```
for (int i = 0; i < think; i++) {
        Sleep(500);

        // Recieve messages
        MPI_Irecv(&rcv, 1, MPI_INT, MPI_ANY_SOURCE, NEED_FORK, MPI_COMM_WORLD, &req);
        MPI_Test(&req, &flag, &status);

        if(flag != 0) {
            // Do stuff
        }
        MPI_Send(&myid, 1, MPI_INT, target, NEED_FORK, MPI_COMM_WORLD); // He recieves this
    }
MPI_Send(&myid, 1, MPI_INT, target, NEED_FORK, MPI_COMM_WORLD); // He doesn't recieve this 
```

问题是，由于某种原因，目标进程没有收到在 for 循环完成后发送的任何消息，而它收到了在循环之前或期间发送的任何消息。我真的不知道该怎么做才能完成这项工作，非常感谢任何帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T15:30:19.390

这是我对类似问题的回答。甚至代码看起来也很相似。 [使用 MPI_Irecv 和 MPI_Test 的无限循环](https://stackoverflow.com/questions/15095514/infinite-loop-using-mpi-irecv-and-mpi-test/16589899#16589899)

请仔细查看在循环内调用 MPI_Test 和 MPI_Irecv。

# sql - 在两个表之间创建主键/外键关系

> ID：15703307
> 
> 赞同：0
> 
> 时间：2013-03-29T12:32:49.690
> 
> 标签：sql, sql-server, database-design

我正在设置一些非常简单的测试表，并希望将该列`USERKEY`作为我表的主键，`tb_TestUSERS`然后将该列`USERKEY`作为表中的外键`tb_TestFACT`。然后建立这个主键和外键的关系。我希望能够使用脚本来完成所有这些工作。

到目前为止，我只有基本的表格脚本：

```
CREATE TABLE WH.dbo.tb_TestFACT
(DATEKEY INT,USERKEY INT);
INSERT INTO WH.dbo.tb_TestFACT
    values
    (1,1),
    (2,1),
    (3,2),
    (4,2),
    (5,2),
    (6,3),
    (7,3);

CREATE TABLE WH.dbo.tb_TestUSERS
(USERKEY INT,NAME VARCHAR(10));
INSERT INTO WH.dbo.tb_TestUSERS
    values
    (1,'FRED'),
    (2,'PHIL'),
    (3,'JACKO'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T12:36:01.573

```
CREATE TABLE tb_TestUSERS
(
    UserKey INT NOT NULL,
    Name VARCHAR(30),
    CONSTRAINT tb_pk PRIMARY KEY (UserKey),
    CONSTRAINT tb_uq UNIQUE (Name)
)
GO

CREATE TABLE tb_TestFACT
(
    UserKey INT NOT NULL,
    DateKey INT NOT NULL,
    CONSTRAINT tb_fk FOREIGN KEY (UserKey)
        REFERENCES tb_TestUSERS(UserKey),
    CONSTRAINT tb_uq1 UNIQUE (UserKey, DateKey) 
)
GO 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/9536c/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:36:39.953

如果你有`SQL Server Management Studio`，`SQL Server Management Studio Express`那么你实际上可以让它为你做这件事。或者，您可以在 UI 中执行此操作并将其编写到新窗口中 - 所有这些都非常有用。

# azure - “由于发生内部服务器错误，无法显示页面”，Azure 网站，

> ID：15703316
> 
> 赞同：18
> 
> 时间：2013-03-29T12:33:29.580
> 
> 标签：azure, web

我已将 azure 网站部署到美国东部位置，预留实例。我有 CustomErrors=On。经过几分钟的工作（性能相当不错），应用程序挂起，速度变慢。（我在 elmah 中没有看到任何错误。）之后开始返回 500 错误。我的自定义错误页面没有显示（我只看到“页面无法显示，因为发生了内部服务器错误。”纯文本）所以我什至无法自定义它。然后应用程序重新启动。我们不能像那样投入生产。我不知道该怎么办。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-06-27T09:17:15.840

我今天在 VS2013 上遇到了同样的问题。

我的 WCF-Services 网站在本地运行良好，但在发布到 Azure 时拒绝运行。

在 VS2013 Update 2 中，我导入了 Azure Publish Profile 文件，发布到 Azure，但总是收到以下消息：

```
The page cannot be displayed because an internal server error has occurred 
```

即使是我的基本**Default.htm**文件，它显示了一个简单的“ *This is default.htm* ”消息，也拒绝显示，而且，我只会得到同样的消息。

**解决方案**

幸运的是，我有第二个 WCF 服务正确*发布*到 Azure，所以我将它的 web.config 文件与“错误”项目的 web.config 文件进行了比较。

我发现我需要手动将“ **system.web** ”部分删除为：

```
<system.web>
   <compilation debug="true" targetFramework="4.5" />
   <httpRuntime targetFramework="4.5" requestPathInvalidCharacters="" />
</system.web> 
```

（它删除了大量程序集、页面\控件、httpHandlers 和 httpModules 的东西）并且还完全摆脱了“ **system.webServer** ”部分。

完成此操作后，我*可以*发布到 Azure，一切正常。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-29T19:06:58.493

The best advice I can give to troubleshoot your problem is to check the website diagnostics logs. You can download log locally as described [here](http://blogs.msdn.com/b/avkashchauhan/archive/2012/06/19/windows-azure-website-uploading-downloading-files-over-ftp-and-collecting-diagnostics-logs.aspx).

If you use new Windows Azure Powershell 0.6.12 you can use Powershell commands to download the logs directly using the following commands:

```
azure site log tail [options] [name] //{Retrieves the value for the selected key}
  --filter - Filter to match against for displaying log output.
  --log - Write output in a log format. 
```

Above command streams live diagnostic logs from your website to the console --path [path] - Path under the LogFiles folder to pull logs from.

More info on PS: [https://github.com/windowsazure/azure-sdk-tools-xplat](https://github.com/windowsazure/azure-sdk-tools-xplat)

Also you can contact Azure Websites team through [forums](http://social.msdn.microsoft.com/forums/en-us/windowsazurewebsitespreview/threads) and ask for assistance.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-08T16:07:44.247

我也刚遇到这个问题。就我而言，由于手动编辑，web.config 完全无效：我更改了数据库密码并将新密码复制并粘贴到 web.config 中。

密码中有一个＆符号（＆），我忘记对其进行编码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-24T14:11:29.577

我遇到了同样的问题，最后通过将我的应用程序池转换为 Classic 而不是 Integrated 来解决它。我在 azure 门户上没有找到这个选项，只好打开“旧的 azure 管理平台”。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-04T03:51:39.147

就我而言，我只是在项目属性中将目标框架从 3.5 更改为 4.5。 [![在此处输入图像描述](../Images/b3c7cf6444d51c8a65fa33faf51eafca.png)](https://i.stack.imgur.com/ctMRG.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-17T16:52:01.717

您可能超出了存储限制。

我的网络应用程序（WordPress）也有同样的问题，可以通过 FTP 访问我的网站并删除`wp-content/ai1wm-backups`文件夹中不必要的备份来修复它。

`Deployment center`您可以在>>中找到您的 FTP 凭据`FTP credentials`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-14T12:34:02.360

有同样的问题 - 意识到我已经用我的 ftp 上传删除了 wwwroot 文件夹。重新创建文件夹并添加站点 - 工作。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-05-30T04:40:18.240

只需从 web 配置中删除 mime 类型，它就解决了

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2015-11-28T07:18:10.007

这是由以下`web.config`文件设置 引起的自定义错误

```
<system.web>
   <customErrors mode="Off" />
</system.web> 
```

这是一个自定义错误，如果您在网站上工作并且在配置自定义域后收到此错误。您应该在 azure 上启动该站点的一个新实例，然后确保在从 Visual Studio 发布网站或用于部署 Web 应用程序的任何内容之前，您已将所有内容设置为域名。

# ios - 开放式简历 iOS 的 HSV 范围

> ID：15703319
> 
> 赞同：1
> 
> 时间：2013-03-29T12:33:36.140
> 
> 标签：ios, opencv

我正在尝试通过打开的 cv 检测 iOS 中的皮肤。我的代码如下所述。

```
cvCvtColor(&srcIplImage, &hsvIplImage, CV_BGR2HSV);

CvScalar lower = cvScalar(0, 58, 88);
CvScalar upper = cvScalar(25, 173, 229);

cvInRangeS(&hsvIplImage, lower, upper, &srcGrayIplImage);

cvCvtColor(&srcGrayIplImage, &dstIplImage, CV_GRAY2BGR); 
```

在 android 中，它可以完美运行并正确检测皮肤。但在 iOS 中，我得到了非常意想不到的结果。我认为 iOS 和 Android 中的 open cv 使用了不同范围的 HSV。对于 android，我的下限和上限都可以，但对于 iOS 则不然。

如果有人遇到这种问题，请帮助我解决问题。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T08:37:48.930

我已经通过命中和试验解决了这个问题。正常 HSV 范围如下所述。

色调：0 - 360。（它的角度）饱和度：0 - 100（颜色强度）值：0 - 100（亮度）

在 iOS 中，它具有以下范围，色调：0 - 180。（它的角度）饱和度：0 - 255（颜色强度）值：0 - 255（亮度）

在安卓中

色调：0 - 360。（角度）饱和度：0 - 255（颜色强度）值：0 - 255（亮度）

另一个你需要注意的是 iOS OpenCV 中的配色方案是 BGR 而不是 RGB。因此色调部分将覆盖 0-60 度范围内的蓝色而不是红色。您必须为 iOS 相应地更改色调值。

希望这对其他人有用:)

# javascript - 从 IE 上的日期获取 TimeZone 字符串

> ID：15703320
> 
> 赞同：6
> 
> 时间：2013-03-29T12:33:36.800
> 
> 标签：javascript, internet-explorer, date, timezone

## 谷歌浏览器

```
new Date()
//returns Fri Mar 29 2013 17:55:25 GMT+0530 (IST) 
```

## IE8

```
new Date()
//returns Fri Mar 29 17:48:46 UTC+0530 2013 
```

我需要`(IST)`从 IE 上的日期中提取部分，在 chrome 上我可以`dateString.substring`提取它，但在 IE 上我不能这样做。

该方法 `getTimeZoneOffset` 在几分钟内给了我偏移量，有没有办法使用偏移量获取字符串？

还是我需要研究与偏移量相对应的所有时区字符串并从中创建一个对象然后使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T12:56:11.643

这可以为您服务吗？

[jsTimezoneDetect](https://bitbucket.org/pellepim/jstimezonedetect/wiki/Home)

这也可能是相关阅读：[如何通过 UTC 偏移量确定时区？](https://stackoverflow.com/questions/1274743/how-can-i-determine-a-timezone-by-the-utc-offset)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T13:38:46.150

我认为没有办法在标准 JS 日期对象中可靠地执行您想要的操作，但这里有一些库可以帮助您：

*   [jsTimezoneDetect](http://pellepim.bitbucket.org/jstz/)
*   [检测时区.js](http://www.onlineaspect.com/2007/06/08/auto-detect-a-time-zone-with-javascript/)
*   [Moment.js](http://momentjs.com/)
*   [日期.js](https://code.google.com/p/datejs/)

Maybe one of them will give you the info you're looking for.

hope that helps.

# asp.net - 如何在 ASP.NET MVC4 项目（EF）中使用多个数据库？

> ID：15703325
> 
> 赞同：1
> 
> 时间：2013-03-29T12:34:06.130
> 
> 标签：asp.net, sql-server, database, entity-framework

我想在 ASP.NET MVC4 项目中使用不同的 SQL Server 2012 数据库。一些数据库已经设计并填充了数据，在网站开发过程中将设计一个数据库。每个数据库都有`Id`链接到其他数据库实体的列（没有外键）。

我知道如何将这个数据库链接到 NHibernate，但我想在 ADO.NET 实体框架下做这个项目。

1.  我可以链接位于一台服务器上的 3-5 个 SQL Server 数据库吗？
2.  如何为此数据库定义连接字符串？
3.  如何通过代码指定tables->db的关系？

# javascript - 刷新父页面时如何刷新iframe？

> ID：15703329
> 
> 赞同：0
> 
> 时间：2013-03-29T12:34:17.347
> 
> 标签：javascript, iframe, refresh

我在父页面中有一个 iframe。人们可以使用 iframe 页面进行导航。刷新父页面时，iframe 内容会重新加载原始 src 。我需要的是当父页面也被刷新以刷新 iframe 时，而不是原始的 src 而是在那一刻页面上可能出现的内容。也许有人有更好的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:41:36.133

您不能这样做，因为当刷新父页面时，将从服务器返回整个 HTML 以及原始 IFrame SRC。

这样做的唯一方法是将 IFrame 的新 SRC 存储在 Cookie 或 Server Session 中，并在从服务器提供父页面时，获取此 Cookie/Server Session 值并基于该值加载 IFrame

# .net-4.0 - 在 Win 2008 R2 上安装 .Net 4.0 时出错（“阻塞问题”）

> ID：15703333
> 
> 赞同：0
> 
> 时间：2013-03-29T12:34:28.127
> 
> 标签：.net-4.0, windows-server-2008-r2

我正在尝试在 Windows Server 2008 R2 上安装 .Net 4.0，但安装程序中断并显示“阻塞问题”消息。有一个自述文件的链接，上面写着：

```
Windows Server 2008 R2 (not supported on Server Core Role). 
```

怎么解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:35:57.103

Windows 2008 R2 在 .Net 4.0 之前发布，因此不支持 4.0。然而，有了 SP1，问题就解决了。

下载并安装适用于 Windows Server 2008 R2 的 SP1。

参考：[http ://www.microsoft.com/en-us/download/confirmation.aspx?id=22833](http://www.microsoft.com/en-us/download/confirmation.aspx?id=22833)

PS：确保根据您的 Windows 安装正确版本的 .net 安装程序（服务器核心/完整版）。

# python - 将一系列函数应用于列表

> ID：15703336
> 
> 赞同：2
> 
> 时间：2013-03-29T12:34:38.657
> 
> 标签：python

我有一个看起来像这样的列表：

```
lst = [1, 2, 3, 4, 5, 6] 
```

我有很多函数，每个函数都有参数：

```
mul = lambda lst, val: [i * val for i in lst]
add = lambda lst, val1, val2: [i + val1 + val2 for i in lst]
... 
```

我想创建一个可以采用任意数量的函数的高阶函数，每个函数都有可变数量的参数，然后将这些函数按顺序应用到列表中。它可能看起来像这样：

```
>>> functions([mul, (10)], [add, (10, 100)]
[120, 130, 140, 150, 160, 170] 
```

我怎样才能在python中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T12:42:23.010

这可以满足您的要求：

```
mul = lambda lst, val: [i * val for i in lst]
add = lambda lst, val1, val2: [i + val1 + val2 for i in lst]

def functions(lst, *fns):
    for fn, args in fns:
        lst = fn(lst, *args)
    return lst

lst = [1, 2, 3, 4, 5, 6]
result = functions(lst, [mul, (10,)], [add, (10, 100)])
print result 
```

产生：

```
[120, 130, 140, 150, 160, 170] 
```

您可能希望以不同的方式构造函数：

```
mul = lambda i, val: i * val
add = lambda i, val1, val2: i + val1 + val2

def functions(lst, *fns):
    for fn, args in fns:
        lst = [fn(i, *args) for i in lst]
    return lst 
```

正如其他人指出的那样：numpy 旨在完成所有这些以及更多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T12:49:18.213

使用[functools.partial](http://docs.python.org/2/library/functools.html#functools.partial)，链接。例如，

```
from functools import partial

lst = [1, 2, 3, 4, 5, 6]

mul = lambda lst, val: [i * val for i in lst]
add = lambda lst, val1, val2: [i + val1 + val2 for i in lst]

mul10 = partial(mul, val=10)
add_10_100 = partial(add, val1 = 10, val2 = 100)
print add_10_100(mul10(lst))

[120, 130, 140, 150, 160, 170] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T12:41:57.610

与其重新发明`numpy`，不如使用它！

```
import numpy as np

lst = np.arange(1, 7)
print lst * 10 + 10 + 100
[120 130 140 150 160 170] 
```

# java - 如何从可选择的 TextView 中获取文本字符串？

> ID：15703337
> 
> 赞同：1
> 
> 时间：2013-03-29T12:34:41.213
> 
> 标签：java, android, textview

我想构建一个应用程序，我想在其中使用可选择的 TextView。当用户从 TextView 中选择一个文本时，他会将这个可选文本显示到其他屏幕上。但是当我从 TextView 中选择文本时，我无法检索选定的文本。我也使用 TextView 的方法。

```
menu_search = (TextView)findViewById(R.id.menu_search);

menu_search.setTextIsSelectable(true); 
```

如何从 Select-able textview 中获取选定的文本？

安卓可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:43:28.927

试试这个

```
String str = menu_search.getText().toString;
int startIndex = menu_search.getSelectionStart();
int endIndex = menu_search.getSelectionEnd();
String selectedStr = str.subString(startIndex, endIndex); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:42:08.700

应该可以做到以下几点：

```
int selection_start = menu_search.getSelectionStart();
int selection_end = menu_search.getSelectionEnd();
String selected = menu_search.getText().toString().subSequence(selection_start, selection_end); 
```

# c# - LINQ 以最近的日期加入 lambda

> ID：15703342
> 
> 赞同：0
> 
> 时间：2013-03-29T12:34:48.087
> 
> 标签：c#, linq, entity-framework, lambda, ef-code-first

我正在尝试对表“Personen”进行 linq 查询并加入表“Leners”。
从表“Leners”中，如果有的话，我想要最新的项目。

在 SQL 中，我会这样做：

```
select p.*, l.* 
from dbo.Personen p
left outer join dbo.Leners l on l.LenerId = 
    (select top 1 LenerId 
     from dbo.Leners lt
     where lt.PersoonId = p.PersoonId 
     order by lt.Vanaf desc) 
```

我怎样才能用 linq 做到这一点？我想在 lambda 表达式中执行此操作，因为它取决于选择。

```
using (var db = new DbContext())
{
    var query = from p in db.Personen                        
                select p;

    if (someSelection != null)
    {
        query = ?
    }
} 
```

这些是表格：（EF代码优先）

```
[Table("Personen")]
public class Persoon
{
    [Key]
    public int PersoonId { get; set; }

    [StringLength(50)]
    [Required]
    public string Naam { get; set; }
}

[Table("Leners")]
public class Lener
{
    public int LenerId { get; set; }

    public int? PersoonId { get; set; }

    [ForeignKey("PersoonId")]
    public virtual Persoon Persoon { get; set; }

    public DateTime Vanaf { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:47:06.513

您的 LINQ 查询应如下所示：

```
var query2 = from p in dbo.Personen
             let l = dbo.Leneren
                        .OrderByDescending(lt => lt.Vanaf)
                        .FirstOrDefault(lt => lt.PersoonId == p.PersoonId)
             select new { p, l } 
```

但是，您不能将其分配回您的`query`变量！

```
var query = from p in db.Personen                        
            select p; 
```

`query`是`IQueryable<Person>`因为您在`Person`这里选择项目。您不能将其重新分配为`IQueryable<AnotherType>`.

# php - 检查变量是数组值的复数

> ID：15703343
> 
> 赞同：-1
> 
> 时间：2013-03-29T12:34:51.007
> 
> 标签：php, arrays

如果变量是数组值的复数版本，我想运行 in_array 并返回 true。我不想将每个单词的复数添加到数组中。

```
$username = 'admins';

$blacklist = [
    'admin',
    'administrator',
    'mod',
    'moderator',
    'staff',
    'team',
    'owner',
];

if(in_array($username, $blacklist))
    echo 'yep'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:39:55.227

你可以使用这个代码

```
foreach($blacklist as $item){
  if(strpos($item,$username)!== false){
    echo 'found';
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:44:18.957

检查用户名以 s 结尾，删除 s 并匹配数组

```
if (strrpos($username, 's') === strlen($username)-1 && in_array(substr($username, 0, -1), $blacklist)) {
    echo 'yes';
} 
```

# php - 如何验证 DOMDocument 对象

> ID：15703344
> 
> 赞同：1
> 
> 时间：2013-03-29T12:34:53.707
> 
> 标签：php, xml, dom

```
$rss = new DOMDocument();
$rss->load($url); 
```

如果我期望用户提供任何 rssfeed 链接以获取 xml 文档，并且用户试图提供任何不包含任何 xml 文档的随机链接。它肯定会显示错误或警告。

我怎样才能验证这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T12:47:27.190

用于`libxml_use_internal_errors`自行处理错误。[来自http://php.net/manual/de/function.libxml-use-internal-errors.php](http://php.net/manual/de/function.libxml-use-internal-errors.php)的示例

```
// enable user error handling
libxml_use_internal_errors(true);

// load the document
$doc = new DOMDocument;

if (!$doc->load('file.xml')) {
    foreach (libxml_get_errors() as $error) {
        // handle errors here
    }

    libxml_clear_errors();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:43:50.237

您可以使用 load 的返回值来检查错误并抑制输出`@`

```
$rss = new DOMDocument();
if (@$rss->load($url) == false) {
    //error...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T13:01:26.670

试试这个：

```
$errors = array();
set_error_handler(function ($number, $error) use (&$errors) {
    if (preg_match('#^DOMDocument::load\(\):#', $error)) {
        $errors[] = $error;
    }
});

$url = '';
$doc = new DOMDocument();
if ($doc->load($url) === false) {
    // handle errors from $errors
}

restore_error_handler(); 
```

# django - 在内联管理（堆叠）中使用时，Django ForeignKeyRawIdWidget 不会减少查询

> ID：15703345
> 
> 赞同：0
> 
> 时间：2013-03-29T12:34:55.277
> 
> 标签：django, django-admin

我有这样的外键关系

```
class Product(models.Model):
    brochure = models.ForeignKey(MediaFile) 
```

因为我的库中有很多 MediaFile，我通常使用 a`ForeignKeyRawIdWidget`来减少查询次数。

但显然在内联模型上使用“ForeignKeyRawIdWidget”不会影响这一点。它仍然执行很多查询。

有人知道为什么吗？

行政：

```
class ProductInline(admin.StackedInline):
    model = models.Product
    prepopulated_fields = {"slug": ("title",)}

    def formfield_for_dbfield(self, db_field, **kwargs):
        if db_field.name == 'brochure':
            kwargs['widget'] = ForeignKeyRawIdWidget(db_field.rel)

        return super(ProductInline, self).formfield_for_dbfield(db_field, **kwargs) 
```

对比

```
class ProductAdmin(admin.ModelAdmin):

    def formfield_for_dbfield(self, db_field, **kwargs):
        if db_field.name == 'brochure':
            kwargs['widget'] = ForeignKeyRawIdWidget(db_field.rel)

        return super(ProductAdmin, self).formfield_for_dbfield(db_field, **kwargs) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T14:09:21.843

无需覆盖表单域。Django 有一个选项：

```
class ProductInline(admin.StackedInline):
    model = models.Product
    raw_id_fields = ['brochure']
    … 
```

这适用于我的`StackedInline`或`TabularInline`模型。

# emacs - 使用 (display . all) 在 gnus 中显示所有消息

> ID：15703346
> 
> 赞同：3
> 
> 时间：2013-03-29T12:35:02.587
> 
> 标签：emacs, emacs24, gnus

我想配置 gnus 以便它显示来自 gmeil 的所有邮件，甚至默认情况下读取的邮件。我尝试设置 gnus 参数，但正则表达式似乎有问题。

我的 .gnus.el 如下所示：

```
(require 'nnir)

(setq user-mail-address "R.M.Krug@gmail.com")
(setq user-full-name "Rainer M Krug")

(setq gnus-select-method 
         '(nnimap "gmail"
              (nnimap-address "imap.gmail.com")
              (nnimap-server-port 993)
              (nnimap-stream ssl)
              (nnimap-authinfo-file "~/.authinfo")))

;; Configure outbound mail (SMTP)
(setq smtpmail-starttls-credentials '(("smtp.gmail.com" 587 nil nil))
      smtpmail-smtp-server "smtp.gmail.com"
      smtpmail-default-smtp-server "smtp.gmail.com"
      send-mail-function 'smtpmail-send-it
      message-send-mail-function 'smtpmail-send-it
      smtpmail-smtp-service 587
      smtpmail-auth-credentials '(("smtp.gmail.com" 587 "R.M.Krug@gmail.com" nil))
      smtpmail-debug-info t
      smtpmail-debug-verb t
      )

;; set renderer for html mail to w3m in emacs
(setq mm-text-html-renderer 'w3m)
(setq gnus-inhibit-images nil)

;; set gnus-parameter
(setq gnus-parameters
  '(("nnimap.*"
     (gnus-use-scoring nil)
     (expiry-wait . 2)
     (display . all))))

;;[[http://stackoverflow.com/questions/4982831/i-dont-want-to-expire-mail-in-gnus]]
(setq gnus-large-newsgroup 'nil)

(setq-default
 gnus-summary-line-format "%U%R%z%I %(%&user-date;  %-15,15f  %s%)\n"
 gnus-user-date-format-alist '((t . "%Y-%m-%d %H:%M"))
 gnus-summary-thread-gathering-function 'gnus-gather-threads-by-references
)

(setq gnus-thread-sort-functions
      '(
        (not gnus-thread-sort-by-date)
        (not gnus-thread-sort-by-number)
        )) 
```

但是如果没有明确加载它们，我仍然看不到所有电子邮件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T13:32:40.733

另一个选项是我使用的：使用 gnus 本身的参数编辑器。转到您的组/邮箱并在其上点击“G p”。这将打开一个编辑器，您可以将其粘贴到其中：

```
((gnus-use-scoring nil)
 (expiry-wait . 2)
 (display . all)) 
```

请注意，您也可以在一个*主题*上执行此操作，让您一次性为许多组设置参数。

这种方法的一个优点是它可以很容易地根据主题将组放在正确的区域中。IE，如果您有一个名为“收件箱”的主题，其中放置了您总是希望查看所有邮件的所有邮件组，它会继承主题属性（如上面的那些），并且只需将组放入该主题即可获得你想要的配置。另一方面，如果您将一个小组放入一个名为“邮件列表”之类的主题中，并且它没有这些属性，那么您将只能看到您尚未阅读的新内容。恕我直言，它使管理更容易一些。您只需将组放在正确的位置，就完成了！或者稍后在您想更改它们的行为方式时移动它们。

# c++ - 静态方法作为函数指针

> ID：15703347
> 
> 赞同：4
> 
> 时间：2013-03-29T12:35:03.070
> 
> 标签：c++, c, oop

在许多情况下，C 框架使用函数指针来扩展功能并通知侦听器（例如 win32-api 和 GLUT）。在编写面向对象的 C++ 时，您更喜欢使用类和对象来处理这个问题。所以我的问题是：

使用指向 C 库需要函数指针的静态方法的指针是否安全？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T12:40:46.707

形式上，不，你不能这样做，但实际上，是的。要从 C 代码调用，必须标记 C++ 函数`extern "C"`，以确保它使用 C 编译器期望的调用约定。无法将静态成员函数标记为`extern "C"`，因此无法保证它可以从 C 代码中成功调用。我不知道有一个编译器不会对静态成员函数使用与 C 代码相同的调用约定，所以这会起作用。一些编译器会针对这种情况产生警告，因为从技术上讲，函数的类型错误。事实上，如果你看一下 C++ 标准，接受回调的 C 函数（`qsort`例如 ）有两个版本：一个接受一个`extern "C"`函数，一个接受一个`extern "C++"`函数。

# c++ - 移动 std::vector 时出现分段错误

> ID：15703349
> 
> 赞同：7
> 
> 时间：2013-03-29T12:35:07.347
> 
> 标签：c++, c++11, g++, move-semantics

以下程序因分段错误而崩溃：

```
#include <iostream>
#include <vector>

using namespace std;

struct data
{
  data() : a(random()), b(random()), v({random(), random(), random()}) {}
  data(data&& m) noexcept : a(m.a), b(m.b), v(std::move(m.v)) { }

  long int a;
  long int b;
  std::vector<long int> v;
};

data&& randomize()
{
  srandom(time(0));
  data d;
  d.a = random();
  return std::move(d);
}

int main( int argc, char** argv )
{
  data d = randomize();
  cout << d.a << " " << d.b << endl;
  return 0;
} 
```

代码使用 g++ 版本 4.7.2 (Debian 4.7.2-5) 编译：

```
g++ -std=c++11 -g test.cpp 
```

我究竟做错了什么？问题似乎出在 std::vector 移动构造函数中，因为没有它一切正常。看起来 randomize() 中的数据对象在函数完成时被销毁，但不应该先将它移动到 main 中的数据对象吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-29T12:37:13.967

这个功能：

```
data&& randomize()
{
    // ...
    data d
    // ...
    return std::move(d);
} 
```

返回对本地对象的引用，该对象将在调用返回时被销毁。因此，您的程序具有**未定义的行为**。因此，在此处调用move 构造函数时，返回的引用将*悬空*`data`：

```
data d = randomize(); 
```

您应该返回type的*值*`data`，并且不应该显式调用`std::move()`：

```
data randomize()
{
    // ...
    data d
    // ...
    return d;
} 
```

这样，您还将让编译器有机会执行[（命名）返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)，可能根本不会调用移动构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:23:41.797

我认为这将起作用并且不依赖于编译器优化：

```
data randomize()
{
    // ...
    data d
    // ...
    return std::move(d);
} 
```

返回值必须在破坏局部变量 d 之前构造。

# c# - 在应用程序更新时升级数据库

> ID：15703352
> 
> 赞同：0
> 
> 时间：2013-03-29T12:35:14.370
> 
> 标签：c#, sqlite, windows-8, windows-store-apps, sqlite-net

我正在开发一个 Windows 应用商店应用程序，它使用**SQLite for Windows 运行时扩展**和**sqlite-net 库**将数据存储在本地 SQLite 数据库中。该数据库是在`Windows.Storage.ApplicationData.Current.LocalFolder.Path`路径中创建的。一切正常，我想我提交时不会有问题。

### 问题 1

但是当我更改应用程序，再次提交并且用户更新它时会发生什么？数据库文件会被删除吗？用户会丢失他的数据吗？

### 问题2

我可以使用旧数据库并在应用程序版本之间进行升级吗？

我知道在开发 Android 应用程序时该怎么做，但这个 Windows 商店更新过程对我来说是新的，我害怕犯一些错误，导致我无法恢复用户数据。如果有人已经经历过它，请告诉我它是如何工作的。

*提前致谢*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T07:30:19.137

应用程序数据持续更新；只有当用户卸载应用程序时，它才会被删除。从[使用 Windows 运行时访问应用数据](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx)：

> 系统管理应用程序的数据存储，确保它们与其他应用程序和其他用户保持隔离。当用户安装更新到您的应用程序时，系统还会保留这些数据存储的内容，并在卸载您的应用程序时完全干净地删除这些数据存储的内容。

鉴于此，您当然可以访问其本地数据库的当前（旧）版本，因此您可以将任何迁移/升级功能构建为应用程序的一部分。

# ruby-on-rails - Heroku 部署耗时极长

> ID：15703365
> 
> 赞同：2
> 
> 时间：2013-03-29T12:36:16.543
> 
> 标签：ruby-on-rails, heroku

我已经多次部署到 Heroku，但是从来没有花这么长时间。它停在`Running: rake assets:precompile`然后只是停顿。

有什么想法可以让它像以前一样快速部署吗？

我认为这与我刚刚更新到 rails 3.2.12 的事实有关

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:09:13.273

I found the solution.

When upgrading to 3.2.12

add this to your `Gemfile`

```
source "https://rubygems.org"
ruby "1.9.3" 
```

Heroku by default will use ruby "1.9.2" which is slower to precompile assets

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T13:44:40.990

您还可以尝试 turbo-sprockets-rails3 gem ( [https://github.com/ndbroadbent/turbo-sprockets-rails3](https://github.com/ndbroadbent/turbo-sprockets-rails3) )，如果资产没有变化，它会跳过资产编译阶段。

# javascript - ReferenceError：在 datagrid.js 中嵌入燃料时未定义定义

> ID：15703368
> 
> 赞同：15
> 
> 时间：2013-03-29T12:36:30.760
> 
> 标签：javascript, jquery, datagrid, requirejs, fuelux

我想添加使用[http://exacttarget.github.com/fuelux/](http://exacttarget.github.com/fuelux/)来构建数据网格。我想添加库来使用它。我做了以下事情：

```
<link href="<spring:url value='/assets/css/fuelux.min.css' htmlEscape='true' />"      media="all" rel="stylesheet" type="text/css" />
<link href="<spring:url value='/assets/css/fuelux-responsive.min.css' htmlEscape='true' />" media="all" rel="stylesheet" type="text/css" />
<script src="<spring:url value='/assets/js/fuelux-datagrid.js' htmlEscape='true' />" type="text/javascript"></script> 
```

我确信路径是正确的，因为它们在其他库中工作。但是，我收到以下错误：

```
ReferenceError: define is not defined
[Break On This Error] 
define(['require','jquery'],function(require) { 
```

`define(['require','jquery'],function(require) {...`代码在哪里`fuelux-datagrid.js`。

*   这是什么错误？
*   我认为`define`是*require.js*的一个关键字。这是否意味着*fuelux-datagrid*依赖于*require.js*？
*   谁能解释我如何加载库以使其工作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-31T15:08:45.083

这对我有用：

```
<script src="https://raw.github.com/ExactTarget/fuelux/master/lib/require.js"></script>
<script type="text/javascript" src="https://raw.github.com/ExactTarget/fuelux/master/dist/datagrid.js"></script> 
```

I tried what @AdamAlexander suggested and what is suggested [here](https://code.exacttarget.com/devcenter/fuel-ux/getting-started/) and didn't work. I also tried the latest requiredjs and got a nasty exception. Go figure.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-29T16:34:10.017

如果你不使用 RequireJS，你可以通过在基本脚本标签中加载 loader.min.js 来解决这个问题：

```
<script src="http://fuelcdn.com/fuelux/2.3/loader.min.js"></script> 
```

该软件包包含 Bootstrap 和 Fuel UX 所需的所有 JavaScript，不依赖于 AMD 加载程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-29T13:18:45.207

是的，他们似乎依赖于 RequireJS。我必须同意他们没有太多资源来解释如何加载库（至少从我所看到的），但我要做的是加载 require.js 并检查它之后尝试加载的其他资源，通过查看在网络请求。

这是一个关于如何设置 RequireJS 的示例。您还可以查看[他们的文档](http://requirejs.org/docs/api.html#config)。

```
<script src="scripts/require.js"></script>
<script>
  require.config({
    baseUrl: "/another/path", //here's where it will look for scripts
    paths: {
        "some": "some/v1.0" //path to other dependencies not located in the base path
    }
  });
</script> 
```

# c++ - RxLib 和 C++ 生成器 6

> ID：15703377
> 
> 赞同：0
> 
> 时间：2013-03-29T12:37:20.660
> 
> 标签：c++, c++builder-6

我在将 rxlib 安装到 C++ Builder 6 时遇到问题......所以我的问题是 - 我需要安装 RxLib 的正确程度以及在哪里可以获得这个库？因为我无法安装我在这里得到的存档 - [http://rxlib.ru/arh/Comp/rxlib.rar](http://rxlib.ru/arh/Comp/rxlib.rar)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:33:34.797

打开 RAR 文件后，您将拥有 3 个文件夹 BPL、LIB、Rx。在 Rx 文件夹中有一个名为 install.log 的文本文件，这是来自某个安装程序的完整安装。它安装到 CBuilder5 文件夹，而不是 CBuilder6。有一个名为 readmed6.txt 的文件显示了如何安装到 Delphi 6 中，因此恕我直言，它不能像 CBuilder 6 那样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T06:40:45.417

现在一切正常，我找到了很好的存档，它适用于 6 CBC。

# python - python：如何使用内存数据库测试我的数据库模型？

> ID：15703386
> 
> 赞同：2
> 
> 时间：2013-03-29T12:37:44.847
> 
> 标签：python, postgresql, sqlalchemy, flask, alembic

我正在开发一个项目`Flask`并将`SQLAlchemy`其用作 ORM
我有一个`User`模型

```
class User(UserMixin, db.Model):
    __tablename__ = 'users'
    # noinspection PyShadowingBuiltins
    uuid = Column('uuid', GUID(), default=uuid.uuid4, primary_key=True,
                  unique=True)
    email = Column('email', String, nullable=False, unique=True)
    _password = Column('password', String, nullable=False)
    created_on = Column('created_on', sa.types.DateTime(timezone=True),
                        default=datetime.utcnow())
    last_login = Column('last_login', sa.types.DateTime(timezone=True),
                        onupdate=datetime.utcnow()) 
```

*   [我使用Alembic](https://alembic.readthedocs.org/en/latest/tutorial.html#tutorial)创建了一个迁移脚本。
*   我选择的数据库`PostgreSQL`只是为了测试我更喜欢使用的模型`SQLite`来加快测试速度
*   当有一些类型 in`PostgreSQL`而不是 in时，问题就出现了`SQLite`，在这种情况下`UUID`
*   当我运行迁移时`sqlite://`，它给了我错误

> AttributeError：“模块”对象没有属性“GUID”

**问题**
- 如何保存我的架构`GUID`并使用 SQLite 运行内存测试？似乎`SQLite`没有类似的东西
- 当他们的数据库运行时，人们有哪些方法可以更快地运行测试（在内存中）`PostgreSQL`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:50:19.043

SQLite 如何让测试更快？

无论如何，如果您想将内容保存在内存中……那么，请将数据库保存在内存中。实际上 PostgreSQL 将经常访问的数据移动到内存中，但无论如何，您可以安装一些 RAMFS/RAMHDD 解决方案并将您的数据库放在那里，这样会非常快

您可以谷歌解决方案“ramdisk 上的 postgresql”

# android - 活动暂停时阻止 onclick 事件

> ID：15703387
> 
> 赞同：3
> 
> 时间：2013-03-29T12:37:46.673
> 
> 标签：android, android-widget

我能够在暂停的活动上运行 onClick 事件。我认为它不应该发生，我希望能找到一些关于如何解决这个问题的线索。

在我的活动（扩展 RoboFragmentActivity）中，我有一个简单的 TextView 日期条目。此 TextView 的 OnClick 事件显示 DatePickerFragment：

```
public void onDateRowBoxClick(View view) {
    new DatePickerFragment().show(getSupportFragmentManager(), "datePicker");
} 
```

我还有一个 AsyncTask，它在其 OnPostExecute 事件中启动另一个活动。AsyncTask 显示一个进度对话框（操作需要几秒钟），它隐藏了日期视图。

在 AsyncTask.doInBackground 操作期间，我单击了进度对话框上的区域，该区域隐藏了日期视图。异步任务完成后，进度对话框被关闭，另一个活动应该开始。

相反，我在日期视图上获得了 onClick 事件。它抛出了 IllegalStateException，因为活动已经暂停并且片段无法处理它（我得到 IllegalStateException：无法执行活动的方法，IllegalStateException：在 onSaveInstanceState 之后无法执行此操作；在 onDateRowBoxClick）。但是我认为该事件不应传递给暂停的活动。我的问题是：我是对的，如何解决这个问题？

现在我有这个解决方法，但它相当愚蠢：

```
boolean paused = true;

@Override
protected void onResume() {
    super.onResume();
    paused = false;
}

@Override
protected void onPause() {
    super.onPause();
    paused = true;
}

public void onDateRowBoxClick(View view) {
    if (!paused)
        new DatePickerFragment().show(getSupportFragmentManager(), "datePicker");
} 
```

顺便说一句，起初我认为它与[http://code.google.com/p/android/issues/detail?id=19917](http://code.google.com/p/android/issues/detail?id=19917)有关，但解决方法对我不起作用。

# iphone - 在编辑模式下使用自定义单元格分组 UITableView

> ID：15703388
> 
> 赞同：1
> 
> 时间：2013-03-29T12:37:52.610
> 
> 标签：iphone, uitableview

我在 UITable 视图中有问题。我正在使用这样的分组样式的 UITableView 和自定义单元格视图

![在此处输入图像描述](../Images/5fb442023e032f4f6e1901b107191ce3.png)

我的问题是在编辑我的表格视图时它的显示是这样的![在此处输入图像描述](../Images/2347f13d27dc8b2e08d39cccdf27e34a.png)

但我需要在编辑这样的表格视图时隐藏缩略图![在此处输入图像描述](../Images/d973ae65524b37902c5223b10db8fe72.png)

我在编辑表格视图时尝试过，`[cell.imageviews setHidden:YES]`但它不起作用请任何人帮助我，如果问题已经在 Stack-overflow 中，请给我参考链接或任何其他建议？

** 更新**

这是我的 cellForRowAtIndexPath 代码

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CustomCellidentifier = @"IListCell";
IListCell *cell = (IListCell *)[tableView dequeueReusableCellWithIdentifier:CustomCellidentifier];
if(cell == nil) {

    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"IListCell" owner:self options:nil];
    cell = [nib objectAtIndex:0];
        }

  if (self.tableview.isEditing) {
    [cell.photoImageView setHidden:YES];
    }

cell.titleTextField.text=[NSString stringWithFormat:@"%@",[artAlbumList objectAtIndex:indexPath.row]];

return cell;
 } 
```

IListCell 是`UITableViewCelll`使用 XIB 文件创建的自定义单元的子类，这是我的 xib 文件![在此处输入图像描述](../Images/883025cd81a057731e8e710144b82d3d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:47:43.220

看起来缩略图实际上不在表格视图单元格内。请记住，您不能创建 UITableViewCell 的任何直接子视图；所有子视图必须是 UITableViewCell 的子视图`contentView`。

在编辑时自动隐藏图像的最简单方法可能是覆盖您的自定义单元格类的`setEditing:animated:`. 一定要打电话`super`！根据第一个 (BOOL) 参数隐藏或显示图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T06:38:20.797

用断点设置断点测试你的代码`setEditing:editing`

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
   if(editing == YES){
       photoImageView.hidden = YES
   }
   else
   { 
     photoImageView.hidden = NO; 
   }
} 
```

# java - 通用图像加载器的正确使用

> ID：15703389
> 
> 赞同：3
> 
> 时间：2013-03-29T12:37:55.330
> 
> 标签：java, android, photo-gallery, universal-image-loader

好的，我这几天一直在尝试优化我的照片库（这是我的第一个 Android 项目）。所有照片均通过网页加载。我已经开始使用 Universal Image Loader，但我仍然对结果不满意。

这是我的课：

```
public class Galerija extends Activity {

ArrayList<RSSItem> lista = new ArrayList<RSSItem>();
ArrayList<String> lst_slika = new ArrayList<String>();
RSSItem tempItem = new RSSItem();
ImageAdapter adapter;
ImageLoader imageLoader;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_galerija);

    try 
    {
        SAXParserFactory spf = SAXParserFactory.newInstance();
        SAXParser sp = spf.newSAXParser();
        XMLReader myReader = sp.getXMLReader();

        URL url = new URL("http://erdut.gausstesting.info/generateXML/galerija.php");

        XMLHandler myXMLHandler = new XMLHandler();
        myReader.setContentHandler(myXMLHandler);
        myReader.parse(new InputSource(url.openStream()));
        lista = myXMLHandler.getRss_lista();
        lst_slika = lista.get(0).getImages();

    } catch (Exception e) {
        System.out.println(e);
    }

    adapter = new ImageAdapter(this, lst_slika);
    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(adapter);

    gridview.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub

        }
    });

} 

public class ImageAdapter extends BaseAdapter {
    private Context mContext;
    private ArrayList<String> lista;   
    /*
    final ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(this.mContext)
    .enableLogging()
    .memoryCacheSize(41943040)
    .discCacheSize(104857600)
    .threadPoolSize(10)
    .build();
    */
    final DisplayImageOptions options = new DisplayImageOptions.Builder()
    .showStubImage(R.drawable.ic_stub)
    .showImageForEmptyUri(R.drawable.ic_empty)
    .showImageOnFail(R.drawable.ic_error)
    .cacheInMemory()
    .cacheOnDisc()
    .build();

    public ImageAdapter(Context c, ArrayList<String> lista) {
        this.mContext = c;
        this.lista = lista;
        imageLoader = ImageLoader.getInstance();
        //imageLoader.init(config);
        imageLoader.init(ImageLoaderConfiguration.createDefault(c));
    }

    public int getCount() {
        return lista.size();
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;

        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            //ova 3 polja označavaju veličinu, cropanje i padding prikazanih slika
            imageView.setLayoutParams(new GridView.LayoutParams(150, 150));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(0, 0, 0, 0);
        } else {
            imageView = (ImageView) convertView;
        }

        imageLoader.displayImage(lista.get(position), imageView, options);
        //new ImageDownloadTask(imageView).execute(lista.get(position));

        return imageView;
    }
} 
```

}

与我之前的解决方案相比，它确实加快了速度，但我并不满足。首先，我什至无法在我的 HTC Incredible S 上启动它 - 只是启动一个黑屏活动，没有任何加载。这是为什么？

它仅适用于模拟器，但它会在您滚动时重新加载所有图像。因此，一旦您向下滚动然后备份，所有图像似乎都已重新加载。这是它应该如何工作的吗？我还有什么可以改进的方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T12:53:20.247

您应该考虑使用 asynctask 从服务器获取 url。

您应该使用视图支架来实现平滑滚动和性能。 [http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)。演讲是关于视图持有者和列表视图的性能。

[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。检查**配置和显示选项下的主题。**

您应该将图像缓存在手机内存或 SD 卡中，而不是再次下载。

它使用 url 作为键将图像缓存在说 sdcard 中（如果您已正确配置）。如果存在则从缓存中显示，否则下载、缓存并显示图像。

在您的自定义适配器构造函数中

```
 File cacheDir = StorageUtils.getOwnCacheDirectory(activity context, "your folder");//for caching

 // Get singletone instance of ImageLoader
 imageLoader = ImageLoader.getInstance();
 // Create configuration for ImageLoader (all options are optional)
 ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(a)
 // You can pass your own memory cache implementation
.discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
.discCacheFileNameGenerator(new HashCodeFileNameGenerator())
.enableLogging()
.build();
// Initialize ImageLoader with created configuration. Do it once.
imageLoader.init(config);
options = new DisplayImageOptions.Builder()
.cacheInMemory(true)
.cacheOnDisk(true)
.showImageOnLoading(R.drawable.default_pic)//display stub image until image is loaded
.displayer(new RoundedBitmapDisplayer(20))
.build(); 
```

在你的 getView()

```
viewholder.image=(ImageView)vi.findViewById(R.id.imageview); 
imageLoader.displayImage(imageurl, viewholder.image,options);//provide imageurl, imageview and options. 
```

# android - Android PayPal 错误 - 请确保已输入所有字段

> ID：15703390
> 
> 赞同：3
> 
> 时间：2013-03-29T12:37:56.317
> 
> 标签：android

我在沙盒环境中创建有效的 PayPal 按钮时遇到问题。

在沙盒环境中输入我的电子邮件和密码后。

这就是我看到的......你们有什么想法可以告诉我......

![我收到这个错误...](../Images/02760e929e0629f290cd60b5accb254c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T09:14:37.947

在 Android 4.1 上尝试我的应用程序时，我遇到了同样的问题......我终于下载了最新版本的贝宝库 (MPL)，它现在运行良好。:-)

# jdbc - Google 电子表格 jdbc 连接器

> ID：15703391
> 
> 赞同：2
> 
> 时间：2013-03-29T12:37:57.320
> 
> 标签：jdbc, google-sheets, google-docs-api, google-spreadsheet-api

我需要将 Google 电子表格与 JasperReports 服务器一起使用，为此我需要一个用于 Google 电子表格的 JDBC 连接器。

我找到了这个[项目](https://code.google.com/p/gdocjdbc/)，但它自 2010 年以来没有更新。

我想知道 Google Drive 是否有用于这种连接的 API，或者你们中的一些人知道通过 JDBC 驱动程序连接 Google 电子表格的另一种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:21:13.433

在花了一些时间之后，我找到了这个页面：[http ://www.rssbus.com/jdbc/google-spreadsheet/](http://www.rssbus.com/jdbc/google-spreadsheet/)

他们开发了这个 Google 电子表格 API，它对于想要测试和使用他们的谷歌电子表格的开发人员非常有用，非常棒。

但是，问题是它有私有许可证，所以不能使用这个 JDBC 驱动程序来赚钱（不是免费的）。

我刚刚决定创建自己的驱动程序，使用可以在[此处](https://developers.google.com/google-apps/spreadsheets/)找到的 Google 电子表格 API 使用我需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T15:09:18.877

另一种选择是使用[jdbc 连接服务](https://developers.google.com/apps-script/guides/jdbc)和[触发器](https://developers.google.com/apps-script/understanding_triggers)将数据从您的 google 电子表格推送到您的数据库。这显然不是 JDBC 连接并引入了一些复杂性，但可能适用于某些用例。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-08-15T20:15:13.830

我想你正在寻找的是在这里：[https ://github.com/ebarreat/Google-Spreadsheet-JDBC](https://github.com/ebarreat/Google-Spreadsheet-JDBC)

您可以建立连接以及要在哪个单元格上开始数据。我希望这有帮助 ！

问候，

东亚银行

# java - 扩展 JDBC4Connection 类

> ID：15703392
> 
> 赞同：0
> 
> 时间：2013-03-29T12:37:59.110
> 
> 标签：java, mysql

我正在寻找创建 JDBC4Connection 的扩展类以拥有我正确的 MySQL Connection JDBC 类，并实现一些方法。JDBC4Connection 构造函数使用了一个简单的 super()，所以我指的是父类的构造函数：ConnectionImpl。

这是 ：

```
 protected ConnectionImpl(String hostToConnectTo, int portToConnectTo, Properties info, String databaseToConnectTo, String url) throws SQLException 
```

因此，首先是 localhost，第二个是 3306，第四个是我的数据库名称，最后一个是完整的连接字符串。但是对于“信息”，键入的属性，我不知道该输入什么。文档说：

**hostToConnectTo** - 数据库服务器的主机名

**portToConnectTo** - 服务器正在侦听的端口号

**info** - 一个包含用户和密码的 Properties[] 列表

**databaseToConnectTo** - 要连接的数据库

**url** - 连接的 URL

我试图输入“用户”和“密码”键，但这不起作用。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:00:07.777

查看[源代码](http://www.docjar.com/html/api/com/mysql/jdbc/ConnectionImpl.java.html)，`com.mysql.jdbc.ConnectionImpl`用户和密码是从提供的这样获取的`Properties`：

```
this.user = info.getProperty(NonRegisteringDriver.USER_PROPERTY_KEY);
this.password = info.getProperty(NonRegisteringDriver.PASSWORD_PROPERTY_KEY); 
```

定义为[_](http://www.docjar.com/html/api/com/mysql/jdbc/NonRegisteringDriver.java.html)

```
public static final String USER_PROPERTY_KEY = "user";
public static final String PASSWORD_PROPERTY_KEY = "password"; 
```

所以你的信息是正确的。您介意展示您实际编写的代码吗？

但我也是，我认为这可能不是解决您的问题的最佳方法。您也应该将其发布在 stackoverflow 上。

# asp.net-mvc - 在预构建的 Web 应用程序上运行数据库脚本托管到 IIS？

> ID：15703398
> 
> 赞同：0
> 
> 时间：2013-03-29T12:38:25.943
> 
> 标签：asp.net-mvc, database, visual-studio, asp.net-mvc-4, visual-studio-2012

我正在尝试在 Visual Studio 2012 中运行此示例 Web 应用程序

ASP.NET MVC 4 示例（杂志网站） [http://code.msdn.microsoft.com/ASPNET-MVC-4-Sample-37924d68#content](http://code.msdn.microsoft.com/ASPNET-MVC-4-Sample-37924d68#content)

但我是 MVC 和 Microsoft Visual Studio 的新手，通常连接或创建数据库。

我不明白如何完成他提到的两个步骤以使应用程序运行。

步骤 2：运行数据库脚本，该脚本可以在 C#\1.DatabaseScripts\3.NewsDbScript.sql 找到

第 3 步：将 CIK.News.Web 托管到 IIS 主机

当我尝试运行数据库脚本时，我得到一个连接到服务器屏幕，但不知道从那里做什么。

我能否更详细地说明如何完成这两个步骤以及它正在完成什么？

# java - 检查 EditText 空条目并验证它

> ID：15703401
> 
> 赞同：0
> 
> 时间：2013-03-29T12:38:32.990
> 
> 标签：java, android, eclipse, if-statement, try-catch

我正在尝试制作 Android 应用程序的注册表单。我已经使用 MySQLite 制作了一个数据库适配器等。

我一直面临的问题是输入到 EditText 控件的条目的验证。当我点击注册按钮时，信息应该存储在数据库中，确保条目不为空，确认密码与密码匹配，最重要的是用户名尚未使用。我已经尝试了每一种方法来做到这一点，但是要么我得到一个运行时强制关闭错误，要么验证没有按照我想要的方式工作。

```
 final EditText unedit = (EditText) findViewById(R.id.unedit);
    final EditText passedit = (EditText) findViewById(R.id.passedit);
    final EditText conpassedit = (EditText) findViewById(R.id.conpassedit);
    final EditText nameedit = (EditText) findViewById(R.id.nameedit);
    final EditText emailedit = (EditText) findViewById(R.id.emailedit);
    final EditText mobedit = (EditText) findViewById(R.id.mobedit);

    Button register = (Button) findViewById(R.id.registerbutton);

    register.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            String username = unedit.getText().toString();
            String password = passedit.getText().toString();
            String conpassword = conpassedit.getText().toString();
            String name = nameedit.getText().toString();
            String email = emailedit.getText().toString();
            String mobileno = mobedit.getText().toString();

            RegDb reg = new RegDb(Register.this);
            reg.open();
            String returnedUn = reg.getUn(username);
            reg.close();

            if (username.isEmpty()) {
                unedit.setError("Username is required");
                // return;
            }
            if (password.isEmpty()) {
                passedit.setError("Password is required");
                // return;
            }
            if (conpassword.isEmpty()) {
                conpassedit.setError("Password confirmation is required");
                // return;
            }
            if (name.isEmpty()) {
                nameedit.setError("Name is required");
                // return;
            }
            if (email.isEmpty()) {
                emailedit.setError("Email is required");
                // return;
            }
            if (mobileno.isEmpty()) {
                mobedit.setError("Mobile No is required");
                // return;
            }
            if (username.equals(returnedUn)) {
                unedit.setError("Username is already used");
                // return;
            }
            if (!conpassword.equals(password)) {
                passedit.setError("Check your password");
                // return;
            }
            if (!username.isEmpty() && !password.isEmpty()
                    && !name.isEmpty() && !email.isEmpty()
                    && !mobileno.isEmpty() && conpassword.equals(password)
                    && !username.equals(returnedUn)) {
                Dialog d = new Dialog(v.getContext());
                d.setTitle("Account created.");
                d.show();
            } else {
                return;
            } 
```

我也使用了 try-catch-finally，但验证似乎也不起作用。

```
 boolean created = true;

                try {

                    if (!username.isEmpty() && !password.isEmpty()
                    && !name.isEmpty() && !email.isEmpty()
                    && !mobileno.isEmpty() && conpassword.equals(password)
                    && !username.equals(returnedUn)){
                    RegDb entry = new RegDb(Register.this);
                    entry.open();
                    entry.createEntry(username, password, name, email,
                            mobileno);

                    entry.close();
                }

            } catch (Exception e) {
                created=false;
                Dialog d = new Dialog(v.getContext());
                d.setTitle("Please check your entries.");
                d.show();

            } finally {
                if (created) {
                    Dialog d = new Dialog(v.getContext());
                    d.setTitle("Account created.");

                    Intent i = new Intent(v.getContext(),
                            MainActivity.class);
                    startActivity(i);

                }
            } 
```

请告诉我我做错了什么以及应该做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:42:33.667

首先你不需要这样声明`final EditText unedit = (EditText) findViewById(R.id.unedit);`

您可以在类级别将它们声明为

```
private EditText unedit; 
```

现在 onCreate() 方法使用以下方式访问它，

```
unedit = (EditText) findViewById(R.id.unedit); 
```

并检查字符串变量如下，

```
String username = unedit.getText().toString().trim();  // Add Trim() method

if (username.equals("")) {
                unedit.setError("Username is required");
                // return;
            } 
```

其他所有相同。

# php - PHP处理SScript不拾取图像

> ID：15703406
> 
> 赞同：2
> 
> 时间：2013-03-29T12:38:46.413
> 
> 标签：php, html

我对 PHP 很陌生，所以请原谅这样的基本问题。

我正在为我的网站制作一个表单，该表单有几个文本输入，但现在我正在实现图像上传功能，但我在离开底层时遇到了麻烦。

在我的表格中，我有：

```
<form id="generalform" class="container" method="POST"  action="process.php" autocomplete="on" enctype="multipart/form-data" >

<several text inputs here that work>

<input type="file" class="fileuploadinput" name="Image1">
<input type="submit" name="submit" id="submit" class="button" value="Submit"/>
</form> 
```

但我的脚本：

```
if(!empty($_POST['Image1'])) {  
                    echo 'File Selected and Data set in DB';
                    } else {
                        echo 'NO File Selcted but Data Inserted';                   

                    } 
```

总是回显没有选择文件但插入数据，它确实将文本数据插入数据库，但为什么它不拾取图像而是告诉我没有选择图像（通过我的错误消息“'未选择文件但插入数据” )??

如果有人可以帮助我，我将不胜感激，我提前感谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:41:52.580

您上传的文件将无法通过 $_POST 超全局访问。它们可以通过[$_FILES superglobal](http://php.net/manual/en/reserved.variables.files.php)访问。

这应该有效：

```
if(file_exists($_FILES['Image1']['tmp_name']) && is_uploaded_file($_FILES['Image1']['tmp_name'])) {
    echo 'File Selected and Data set in DB';
} 
else {
    echo 'NO File Selcted but Data Inserted';                   
} 
```

[file_exists()](http://php.net/manual/en/function.file-exists.php)检查文件是否存在，[is_uploaded_file()](http://www.php.net/is_uploaded_file)检查相关文件是否通过 HTTP POST（在本例中为您的表单）上传。

我对你的输出有点困惑。你是什​​么意思：

> 未选择文件但插入数据

# asp.net - 访问gridview内的下拉选定项目

> ID：15703409
> 
> 赞同：1
> 
> 时间：2013-03-29T12:38:53.510
> 
> 标签：asp.net, gridview, drop-down-menu, itemtemplate

我有`Gridview`一个下拉灯和按钮。现在我想获取该`dropdown`列表的选定值。这`button click`是我的示例代码

```
<asp:TemplateField>
                    <ItemTemplate>
                        <asp:DropDownList ID="ddPStatud" runat="server" DataSourceID="sdsProductStatus" DataTextField="StatusName"
                            DataValueField="StatusId">
                        </asp:DropDownList>
                        <asp:SqlDataSource ID="sdsProductStatus" runat="server" ConnectionString="<%$ ConnectionStrings:cs %>"
                            SelectCommand="SelectProductStatus" SelectCommandType="StoredProcedure">
                            <SelectParameters>
                                <asp:SessionParameter Name="Branchid" SessionField="Branchid" Type="Int16" />
                            </SelectParameters>
                        </asp:SqlDataSource>
                    </ItemTemplate>
                </asp:TemplateField> 
```

这是按钮

```
<asp:TemplateField>
                    <ItemTemplate>
                        <asp:Button ID="tst" runat="server" Text="text" CommandName="Test" CommandArgument='<%# Eval("EntryID") %>'/>
                    </ItemTemplate>
                </asp:TemplateField> 
```

这是`RowCommand`功能

```
if (e.CommandName == "Test")
            {
                String row = e.CommandArgument.ToString();
                lblError.Visible = true;
                lblError.Text = row;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:40:12.533

你可以使用这个：

```
DropDownList dll = (DropDownList)((Control)e.CommandSource).NamingContainer.FindControl("ddPStatud");
String selectedValue = dll.SelectedValue; 
```

NaimingContainer 是按钮所在的行。然后在其中找到具有所需 ID 的控件。

# ruby-on-rails - 如何确保传递 HTML 友好参数？

> ID：15703410
> 
> 赞同：0
> 
> 时间：2013-03-29T12:38:55.007
> 
> 标签：ruby-on-rails

我`Questions`有`Tags`。

当您单击标签名称时，它会将您带到`/tagname`.

例如点击`ruby`带你到`/ruby`.

但是，有些标签名称需要进行 HTML 转义（例如`c#`or`.net`等​​）。

我怎么做？

我尝试`params[:tag].html_safe`在我的控制器中执行此操作，但这并没有这样做，因为之前发送的参数不正确。

`c#`例如，当我点击标签（或者我手动输入`c#`URL）时，这就是日志的样子。

```
Started GET "/c" for 127.0.0.1 at 2013-03-29 07:31:46 -0500
Processing by HomeController#index as HTML
  Parameters: {"tag"=>"c"}
  Tag Load (26.7ms)  SELECT "tags".* FROM "tags" WHERE "tags"."name" = 'c' LIMIT 1 
```

这是我的路线的样子：

```
get ':tag', to: 'home#index', as: :tag 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:25:24.393

在 Tag 模型中添加一个 'slug' 列，并在其中存储一个标准化形式的名称：

```
class Tag < ActiveRecord::Base 
  before_create :build_slug

  def build_slug
    self.slug = name.parameterize
  end
end 
```

在“slug”列上添加唯一索引并使用 Tag#find_by_slug 查找标签

或者看看 'friendly_id' gem： [https ://github.com/norman/friendly_id](https://github.com/norman/friendly_id)

# python - 使用Python3.3的芹菜错误

> ID：15703412
> 
> 赞同：0
> 
> 时间：2013-03-29T12:39:03.933
> 
> 标签：python, celery

我正在使用 python3.3 并且当我安装了 celery3.0.17 时

```
import celery 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
  File "C:\Python33\lib\site-packages\celery-3.0.17-py3.3.egg\celery\__init__.py", line 43, in <module>
    from .__compat__ import recreate_module
  File "C:\Python33\lib\site-packages\celery-3.0.17-py3.3.egg\celery\__compat__.py", line 20, in <module>
    from .local import Proxy
  File "C:\Python33\lib\site-packages\celery-3.0.17-py3.3.egg\celery\local.py", line 87, in <module>
    class Proxy(object):
ValueError: '__name__' in __slots__ conflicts with class variable 
```

有人知道这个错误的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:32:16.413

我找到了解决方案。

这是一个解决方案的链接： [https](https://github.com/celery/celery/issues/1107) ://github.com/celery/celery/issues/1107 但我会解释你必须做什么。您必须从 github 安装以下 4 个链接

```
pip install -U https://github.com/celery/py-amqp/zipball/master
pip install -U https://github.com/celery/billiard/zipball/master
pip install -U https://github.com/celery/kombu/zipball/master
pip install -U https://github.com/celery/celery/zipball/master 
```

# php - 显示使用 php 上传到文件夹的第一个图像文件

> ID：15703413
> 
> 赞同：0
> 
> 时间：2013-03-29T12:39:10.613
> 
> 标签：php

好的，所以我有这个代码工作，它拉出一个文件夹中的所有图像文件。每个不同的产品都有一个文件夹，其中包含许多图像我想提取上传到每个文件夹的第一张图像并将它们全部显示在同一页面上。此刻，我正在显示每个文件夹中的所有图像。

下面是我正在使用的 foreach：

```
 $albums = get_articles($albums);

if (count($albums)==0) {
echo "Sorry, no portfolios.";

} else {

foreach($albums as $article) {  

echo '<img src="uploads/', $article['album_id'], '/', $article['image_id'],    '.', 
$article['ext'], '" title="Uploaded ', date('D M Y / h:i', $article['timestamp']), 
'"width="450" height="328"/>';    

}

} 
```

以下是我正在使用的功能：

```
function get_articles($albums) {

$albums = array();

$per_page = 9;     

$pages_query = mysql_query("SELECT COUNT(`album_id`) FROM `albums`") or
die(mysql_error());

     $pages = ceil(mysql_result($pages_query, 0) / $per_page);

     $page = (isset($_GET["page"])) ? (int)$_GET["page"] : 1;
       $start = ($page - 1) * $per_page;

 $query = mysql_query("SELECT * FROM `albums`,`images`  WHERE  
 albums.album_id=images.album_id AND code='css' LIMIT $start, $per_page ");

 while ($row = mysql_fetch_assoc($query)) {
    $albums[] = array(
    'album_id' => $row['album_id'],
    'name' => $row['name'],
    'image_id' => $row['image_id'],
    'ext' => $row['ext'],
    'timestamp' => $row['timestamp'],
    'description' => $row['description'],
     'type' => $row['type'],
     'code' => $row['code']

    );

 }
  if ($pages >= 1 && $page <= $pages) {
        for ($x=1; $x<=$pages; $x++) { 
            //echo $x, ' '; 

            echo ($x == $page) ? '<span id="page"><span class="page"><a href="? 
page='.$x.'">'.$x.'</a></span> ' : '<span class="page"><a href="?page='.$x.'">'.$x.'</a>
 </span></span> ';
        }

}
return $albums;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:47:51.860

通过此查询，您将获得每张专辑上传的第一张图片：

```
$query = mysql_query("SELECT * FROM `albums`,`images`  WHERE albums.album_id=images.album_id AND code='css' group by albums.album_id LIMIT $start, $per_page "); 
```

# html - HTML / BODY 高度不会适应带有粘性页脚和不透明层的内容

> ID：15703424
> 
> 赞同：0
> 
> 时间：2013-03-29T12:39:54.573
> 
> 标签：html, opacity

我希望不透明度层填充到与内容量无关的底部。所以内容很少；一直延伸到底部，内容丰富；延伸到底部。

我已经尝试了大量的方法，例如`border-box`, `display:block`，以及我在过去三天中发现的所有其他方法，试图弄清楚这一点。

我还尝试将内容设置为 a `min-height:800px`，这样即使内容很少，它也会始终显示为已填充，但是当内容超过这些 800 像素时，也会出现同样的问题。 [http://jsfiddle.net/rZkSx/](http://jsfiddle.net/rZkSx/)或有问题的原始站点：[http ://www.fredberentsen.com/fotosafari/index.html](http://www.fredberentsen.com/fotosafari/index.html)

**简短版本：**
无论内容大小，我都希望白色不透明层从上到下填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:50:26.553

在 HTML 中添加一个带有类的 div（例如：掩码）

```
<div class="mask></div> 
```

并在 CSS 中将规则添加到该类

```
.mask {
    width: 100%;
    height: 100%;
    position: fixed;
    z-index: -1;
    /* Fallback for web browsers that doesn't support RGBa */
    background: rgb(255, 255, 255);
    /* RGBa with 0.6 opacity */
    background: rgba(255, 255, 255, 0.6);
    /* For IE 5.5 - 7*/
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);
    /* For IE 8*/
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";
} 
```

我也更新了你的[小提琴](http://jsfiddle.net/rZkSx/1/)。

# matlab - 分割灰度图像

> ID：15703428
> 
> 赞同：-3
> 
> 时间：2013-03-29T12:40:06.533
> 
> 标签：matlab, image-processing

我有一个 1024x396 灰度图像。

有什么方法可以将此图像平均分成 3 个相等的部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:51:30.123

```
part1 = img(:,1:132);
part2 = img(:,133:264);
part3 = img(:,265:end); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:23:41.607

你可以做：

```
img1 = img(1:341,:);
img2 = img(342:681,:);
img3 = img(682:1024,:); 
```

# nlp - 计算两个副词或两个形容词的相似度

> ID：15703429
> 
> 赞同：3
> 
> 时间：2013-03-29T12:40:07.767
> 
> 标签：nlp, similarity, wordnet, cosine-similarity, wsd

我想写一个程序来计算两个副词或两个形容词的相似度，但是 WordNet 没有副词和形容词的本体结构。

在第一次尝试时，我使用了 Adapt-lesk 算法。该算法的结果对于副词或形容词来说非常令人失望。计算这些相似度的最佳方法是什么？请帮我解决这个问题。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:36:42.110

虽少见却有`WordNet`关系呼唤`pertainym`。它将相关形容词与其状语形式联系起来。如果您安装了 NLTK ( [http://nltk.org/](http://nltk.org/) ) 并使用 python，您可以尝试以下示例：

```
>>> from nltk.corpus import wordnet as wn
>>> for ss in wn.all_synsets(): # loop through all synsets in WordNet
...     for l in ss.lemmas: # loop through the possible lemmas in that synsets.
...             x = j.pertainyms() # access lemma's pertainyms
...             if len(x) > 0:
...                     print str(ss.offset)+"-"+ss.pos, l, x 
```

# wix - WiX 工具集：使用 WixShellExec 打开日志文件

> ID：15703430
> 
> 赞同：1
> 
> 时间：2013-03-29T12:40:08.250
> 
> 标签：wix, wix3.6

我添加了一个自定义操作，使用 WixShellExec 在完成对话框后打开日志文件。一切似乎都很好，但日志文件显示在后台。有什么办法可以将日志文件带到顶部？

自定义操作是：

```
<Property Id="WixShellExecTarget" Value="[MsiLogFileLocation]" />
<CustomAction Id="LaunchApplication" BinaryKey="WixCA" 
              DllEntry="WixShellExec" Impersonate="yes" Return="check" /> 
```

我还尝试在帖子中使用自定义操作[我可以在安装结束时使用 WiX 启动我的应用程序，但我无法让我的应用程序在前台运行，](https://stackoverflow.com/questions/2254001/i-can-use-wix-to-launch-my-app-at-the-end-of-install-but-i-cant-get-my-app-to)但我找不到 Log 的 FileKey 属性值文件。有人知道它的价值吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T13:29:30.650

链接问题中的解决方案将不起作用，因为您的目标不是可执行文件。您需要使用 ShellExecute 使用机器上注册的默认编辑器打开“文档”。

管理 Windows 的顺序是有限制的。多年来，Windows 做出了一些改变，以尽量减少应用程序“弹出顶部”和扰乱用户的能力。通常，将 z-order 从一个应用程序（您的安装）传输到另一个应用程序（您的日志查看器）的最佳方式是让用户操作执行此操作。这意味着尝试通过单击按钮来安排您的自定义操作。

祝你好运！

# python - 如何为以下输入/输出实现反向传播算法？

> ID：15703432
> 
> 赞同：0
> 
> 时间：2013-03-29T12:40:16.107
> 
> 标签：python, opencv, machine-learning, neural-network, backpropagation

我想在 python 或 C++ 中为以下输入实现反向传播算法

```
[[11, 15], [22, 17]]
[[8, 11], [23, 19]]
[[9, 14], [25, 22]]
[[6, 9], [17, 13]]
[[2, 6], [29, 25]]
[[4, 8], [24, 20]]
[[11, 15], [27, 24]]
[[8, 11], [31, 26]]
[[3, 8], [25, 21]]
[[11, 15], [26, 22]]
[[15, 19], [22, 17]]
[[7, 11], [17, 13]]
[[19, 24], [14, 10]] 
```

其中第一个元组是我的输入，第二个元组是我的输出。我在互联网上搜索的每个反向传播算法的实现都使用了一个分类程序（1 或 0）。

给定的输入/输出集用于为跳棋游戏开发神经网络。我猜它使用了与实现国际象棋相同的技术。

是否有可能为此开发一种算法？请为我提供一些指导或实施方法来执行此操作。也可以使用 OpenCV 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:06:20.133

这是我将如何进行的。

让我们从{-1,1}分类问题的经典问题开始。f 表示您的（神经）网络。x 是您属于 RxR 的输入。y_obs 是属于 {-1,1} 的输出。

u_j 是 x 和 z 之间的权重，z 是中间输出，j 范围从 1 到 h，u_j 是 R^2 数组。w 是 z 和 y 之间的权重，y 是最终输出，w 是 R^h 数组。

当您输入网络时，您会得到属于 R 的 f(x)=y。训练神经网络包括在网络顶部添加标准 E(x,y_obs) 并尝试最小化该标准（对于二元分类问题，可以通过更新网络中的权重来最小化 (f(x)-y_obs)^2)。您的预测 g(x) 在训练结束时由 sign(f(x)) 给出。

因此，为了适应您在互联网上找到的解决方案，请创建一个神经网络 2 xhx 2，h 是隐藏单元的数量。然后，您需要在代码中定位函数标准，并将其替换为合适的标准，例如 2d 欧几里得范数。在这种情况下，您不需要实现任何预测函数 g，您的问题不是分类问题

您可能需要更改反向传播实现的定义以更新新的权重。对于 1-dim 输出，您有以下梯度来更新 w_j，j 的范围从 1 到 h（隐藏单元的数量）。

```
dE / dw_j = dE / dy * dy / dw_j
dE / du_jk = dE / dz_j * dz_j / du_jk 
           = dE / dy * dy / dz_j * dz_j / du_jk 
```

（u_jk 是 u_j 的第 k 个分量，k=1,2）

有了新的情况，你会得到：

y_1 和 y_2 是 y 的分量。z 和 y 之间的 w_1 和 w_2 权重，w_1 和 w_2 是 R^h 数组。

```
dE / dw_1j = dE / dy_1 * dy_1 / dw_1j
dE / dw_2j = dE / dy_2 * dy_2 / dw_2j
dE / du_jk = dE / dz_j * dz_j / du_jk
           = dE / dy_1 * dy_1 / dz_j * dz_j / du_jk + dE / dy_2 * dy_2 / dz_j * dz_j / du_jk 
```

右边的所有衍生品都由您的网络定义。

算法的精度对准则非常敏感，也许有比规范更复杂的解决方案。测试会告诉你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T01:32:34.347

您可以使用通用的反向传播算法。有许多来源解释了有关它的详细信息（例如它的维基百科页面）。但为了更好的结果，我有一个建议给你。

最好调节你的输入和输出。如果您为输入数据的每个组件添加一些常数，并将它们在训练数据上的平均值移动到接近 0，这将有助于网络更快更好地学习您的模式。

# abap - GUI_UPLOAD 在最后上传额外的空字节

> ID：15703433
> 
> 赞同：1
> 
> 时间：2013-03-29T12:40:17.203
> 
> 标签：abap

我正在使用 gui_upload 将文件附加到电子邮件。Gui_upload 以十六进制格式填充内部表。但是，内部表的最后一条记录总是用零“0”填充，直到它适合它的长度。

认为这是内部表**(t_mailhex)**；

85020E0368CEE8AEFF98BEF9100800880C2D773CAEEF95C63 5005151AC1FEB1228FBB1F4C68D715468E0934AB24B8799A7 A2B67D3456A8B370FF12578966738CC7805D088A0BAD81DD3 86941AE43776E4F255FF1ED461FE0D9702F596EE0CBD89C2E 492A27EF90500000000000000000000000000000000000000

像这样。最后一条记录以零结尾。所以我附加的文件不是我想要的文件。它有一些奇怪的空字符代替那个零。

这就是功能。

```
DATA: t_mailhex   TYPE STANDARD TABLE OF solix.

CALL FUNCTION 'GUI_UPLOAD'
    EXPORTING
      filename                = l_file
      filetype                = 'BIN'
    TABLES
      data_tab                = t_mailhex
    EXCEPTIONS
      file_open_error         = 1
      file_read_error         = 2
      no_batch                = 3
      gui_refuse_filetransfer = 4
      invalid_type            = 5
      no_authority            = 6
      unknown_error           = 7
      bad_data_format         = 8
      header_not_allowed      = 9
      separator_not_allowed   = 10
      header_too_long         = 11
      unknown_dp_error        = 12
      access_denied           = 13
      dp_out_of_memory        = 14
      disk_full               = 15
      dp_timeout              = 16
      OTHERS                  = 17. 
```

应该手动删除这些零还是我使用该功能遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T13:13:02.303

该功能完全按预期工作，您只是没有正确使用它。您忽略了告诉您读取了多少字节的附加参数。由于表格的行具有固定长度，因此在技术上不可能省略这些尾随零。您可以将字节连接成一个`XSTRING`，但您必须跟踪您已经收集了多少字节并在此过程中切断尾随零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:32:31.753

好的，这是整个解决方案；

首先，您需要将文件长度导入一个整数变量。

```
CALL METHOD cl_gui_frontend_services=>gui_upload
...
    IMPORTING
    filelength              = fleng_i
... 
```

将其写入字符类型变量，并将**i_attachment_size**作为参数添加到添加附件的类中；

```
CALL METHOD w_document->add_attachment
EXPORTING
    i_attachment_size  = fleng
... 
```

# php - 如何在 javascript 函数中传递带有数据库值的 php 变量？

> ID：15703440
> 
> 赞同：1
> 
> 时间：2013-03-29T12:40:46.750
> 
> 标签：php, javascript, codeigniter

我很难弄清楚如何做到这一点。我已经在网上进行了几次搜索并尝试了一些示例，但无法做到这一点。我正在使用 codeigniter 框架，并且我想将视图文件中 foreach 循环中的数据库值传递给“类别”和“数据”部分中的 javascript 函数作为图形的参数，而不是静态值。我如何能够将数据库值`$row->Time_Period;`和`$row->Data_Value;`从我的视图文件的主体传递到 javascript 函数部分“类别”和“数据”？还是有其他方法来处理这个？有人可以帮我吗？非常感谢。以下是我的代码。

Javascript 函数

```
<script type="text/javascript">
$(function () {
    $('#container').highcharts({

        chart: {
            type: 'column'
        },

        title: {
            text: 'RDI SYSTEM'
        },

        xAxis: {
            categories: ['2012','2013']
        },

        yAxis: {
            allowDecimals: false,
            min: 0,
            title: {
                text: 'Values'
            }
        },

        tooltip: {
            formatter: function() {
                return '<b>'+ this.x +'</b><br/>'+
                    this.series.name +': '+ this.y +'<br/>'+
                    'Total: '+ this.point.stackTotal;
            }
        },

        plotOptions: {
            column: {
                stacking: 'normal'
            }
        },

        series: [ {
            name: 'jun',
            data: [3000,2000],
            stack: 'male'
        }]
      });
    });

</script> 
```

查看文件：

```
 <?php
  $submit=array('class'=>'btn','name'=>'submit','id'=>'submit','value'=>'Submit');
  $indicator=array('name'=>'indicator','id'=>'indicator','value'=>'','placeholder'=>'Indicator Name');
  $description=array('name'=>'description','id'=>'description','value'=>'','placeholder'=>'Description');
  ?>
  <?php
  $subsector_dropdown=array('0'=>'Select Sub-Sector');
  $classes_dropdown=array('0'=>'Select Class');
  $indicator_dropdown=array('0'=>'Select Indicator');
  ?>
<div class="hero-unit">
  <div class="row-fluid">

  <div class="span2"> <label><strong><h3>No.Of Rows:</h3></strong></label></div>
  <div id="numrows" class="span1">
  <h3 class="numrows"><strong><?php echo $total_rows; ?></strong></h3>
  </div>
  <div class="span7"> <h1><?php echo "List of Infrastructure Data"; ?></h1></div>

  </div>
<div class="row-fluid">
  <div class="span3"><i class="icon-plus"></i>&nbsp;<a href='<?php echo site_url('rdi_controller/insert_infra')?>'><strong>Add Infrastructure Data</strong></a></div>
 <?php
  $indicator_dropdown=array('0'=>'Select Indicators');
  $year_dropdown=array('0'=>'Select Years','1'=>'Select All');
  ?>

  <div class="span4">
      <h2> <?php echo form_open('rdi_controller/infra');?>

       <div class="input-append">
        <?php echo form_dropdown("area_name",$area_name_dropdown,'','id="area_id" style="width:50%;height:130%"'); ?>&nbsp;&nbsp;
        <?php echo form_dropdown("indicator",$indicator_dropdown,'','id="indicator_id" style="width:50%;height:130%"'); ?>&nbsp;&nbsp;
        <?php echo form_dropdown("year",$year_dropdown,'','id="year_id" style="width:30%;height:130%"'); ?>&nbsp;&nbsp;
        <input type="submit" class="btn btn-primary btn-medium" id="submit" name="search" value="Search"><button class="btn btn-primary btn-xlarge" type="button" id="displayAll" onclick="reload()">Display All</button>
        </div>

       <?php echo form_close();?> </h2>
<table class="table table-stripe">
        <tr>
        <td><a href='<?php echo site_url('rdi_controller/Infra_export_to_pdf')?>'> <img src="<?php echo base_url('img/pdf.png'); ?> " width="35" height="35" title="Export to PDF File"/></a><a href='<?php echo site_url('rdi_controller/Infra_export_to_Excel')?>'> <img src="<?php echo base_url('img/spreadsheet.png'); ?>" width="35" height="35" title="Export to Excel File" class="excel"/> </a></td>

        </tr>

      </table>
  </br>

   <table id="tablesorter-demo" class="tablesorter">
   <thead>
   <tr>
      <th><strong>Select</strong></th>
      <th><strong>Sector</strong></th>
      <th><strong>Subsector</strong></th>
      <th><strong>Class</strong></th>
      <th><strong>Indicator</strong></th>
      <th><strong>Data Value</strong></th>
      <th><strong>Unit</strong></th>
      <th><strong>Time Period</strong></th>
      <th><strong>Area Name</strong></th>
      </tr>
   </thead>
<?php foreach($infra as $row){?>

      <tr>
      <td><input type='checkbox' id='chk' name='infra_id[]'  value="<?php echo $row->fusion_id;?>" ></td>
      <td> <?php echo anchor("rdi_controller/infra_update_form/$row->infra_id/",$row->Sector); ?></td>
      <td><?php echo $row->Subsector ;?></td>
      <td><?php echo $row->Classes ;?></td>
      <td><?php echo $row->Indicator ;?></td>
      <td><?php echo $row->Data_Value ;?></td>
      <td><?php echo $row->Unit ;?></td>
      <td><?php echo $row->Time_Period ;?></td>
      <td><?php echo $row->Area_Name ;?></td>

      </tr>
  <?php }?>
  </table>
   <div class='row'>
      <div class='span2 '><strong>Total Rows</strong> </div>
      <div class='span1 ' colspan=6><strong><?php echo $total_rows; ?></strong></div>
  </div> 
```

输出：

![在此处输入图像描述](../Images/380102092d5e30363b869b5db6a16c8c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T11:07:50.153

这就是我在如何访问 php 变量中所做的，包括在 javascript 函数中包含数据库值的数组变量。我还使用了 implode 函数来用逗号分隔数组值。这是我的代码

```
<?php

 $arrVal=implode(",",$infra_data_values);
 $arrYears=implode(",",$infra_time_period);
 $arrIndicator=implode(" and ",$infra_indicator);

?>
  <?php echo '<script type="text/javascript">

  $(function () {

    $(\'#container\').highcharts({

        chart: {
            type: \'column\'
        },

        title: {
            text:[\''.$arrIndicator.'\']
        },

        xAxis: {
            categories: ['. $arrYears . ']
        },

        yAxis: {
            allowDecimals: false,
            min: 0,
            title: {
                text: \'Values\'
            }
        },

        tooltip: {
            formatter: function() {
                return \'<b>\'+ this.x +\'</b><br/>\'+
                    this.series.name +\': \'+ this.y +\'<br/>\'+
                    \'Total: \'+ this.point.stackTotal;
            }
        },

        plotOptions: {
            column: {
                stacking: \'normal\'
            }
        },

        series: [ {
            name: \''.$arrIndicator.'\',
            data: ['. $arrVal . '],
            stack: \'male\'
        }]
    });

});

</script>'; ?> 
```

将 javascript 函数包装在 echo 语句中，然后在 js 函数内的每个语句中的引号之前放回斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:56:31.177

为什么不使用下面的方法？

```
<script type="text/javascript">
var foo = "<?php echo $db['some_var']; ?>";
</script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-29T13:21:17.067

我知道的最简单的方法是将逗号分隔的值存储在 PHP 变量中，然后在 JavaScript 中回显这些变量。这意味着您将不得不遍历用于设置这些值的任何数据库查询结果。一旦设置了这些 PHP 变量，只需执行以下操作：

```
xAxis: {
    categories: [<?php echo $categoriesData; ?>]
}, 
```

和

```
series: [ {
    name: 'jun',
    data: [<?php echo $dataData; ?>],
    stack: 'male'
}] 
```

# java - 从键盘切换 case 语句打印

> ID：15703444
> 
> 赞同：0
> 
> 时间：2013-03-29T12:40:57.333
> 
> 标签：java, branch

我是初学者，请看以下内容：

```
public class CaseBreak {
    public static void main(String[] args) {
        Scanner keyboard = new Scanner(System.in);
        int key = 1;
        int dob = keyboard.nextInt();
        switch(dob + key + 1)
        {
        case 1:
            System.out.println("First switch");
            break;
        case 2:
            System.out.println("Second switch");
            break;
        case 3:
            System.out.println("Third switch");
            break;    
        case 4:
            System.out.println("Fourth switch");
            break;    
        case 5:
            System.out.println("Fifth switch");
            break;    
        case 6:
            System.out.println("Sixth switch");
            break;    
        case 7:
            System.out.println("Seventh switch");
            break;    
        default:
            System.out.println("Out of Switch! there is no");
        } 
    }
} 
```

以下一切运行良好。但是我想打印该数字以及当键盘输入超出大小写时调用的默认语句。像 ex- number 7 这样的东西进入默认状态，我得到“Out of Switch！没有”。我只是希望它也应该在语句之后出现数字（Out of Switch！没有 7）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T12:43:56.327

您可以使用 将字符串和数字相加`+`，理想情况下，您也应该将其存储`dob + key + 1`到变量中，这样您只需计算一次。

```
int i = dob + key + 1
switch(i)
{
    // ...
    default:
        System.out.println("Out of Switch!! there is no" + i);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:43:12.360

你确实有号码`dob + key + 1`。你为什么不打印它？

*注意：将**dob + key +1 括*起来非常重要，`( )`因为`+`是连接运算符，并且您想告诉编译器对数字*求和*。

```
default:
    System.out.println("Out of Switch!! there is no " + (dob + key + 1)); 
```

如果你这样写：

```
default:
        System.out.println("Out of Switch!! there is no " + dob + key + 1); 
```

然后你会得到一个输出：（说 dob 是 1，key 是 2）

> 脱离开关！！没有121

但是如果你用括号括起来，那么你会得到三个整数的实际总和。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T12:44:27.010

```
default:
System.out.println("Out of Switch!! there is no"+dob); 
```

我想这就是你要找的。它将告诉输入了哪个数字，并与默认情况下的声明一起打印相同的数字。这是您想要查看作为输入提供的数字的时候。如果您想查看`+1`交换机中完成的整体数字，请执行`System.out.println("Out of Switch!! there is no"+dob+key+1);`

# android - 无法将财务雅虎的文件从互联网下载到 SD 卡

> ID：15703447
> 
> 赞同：1
> 
> 时间：2013-03-29T12:41:07.373
> 
> 标签：android, web-services, yahoo-finance

```
 public void downloadFileViaHTTP()
    {
        Log.d("downloadFileViaHttp", "downloadFileViaHTTP...");
        try 
            {
                  String urlFile = "http://finance.yahoo.com/d/quotes.csv?s=ACC.NS+AMBUJACEM.NS+ASIANPAIN.NS+AXISBANK.NS+BAJAJ-AUT.NS+BANKBAROD.NS+" +               "BHARTIART.NS+BHEL.NS+BPCL.NS+CAIRN.NS+CIPLA.NS+COALINDIA.NS+DLF.NS+DRREDDY.NS+GAIL.NS+GRASIM.NS+HCLTECH.NS+HDFC.NS+HDFCBANK.NS+ HEROHONDA.NS+HINDALCO.NS+HINDUNILV.NS + +"HEROHONDA.NS+HINDALCO.NS+HINDUNILV.NS+ICICIBANK.NS+IDFC.NS+ITC.NS+INFY.NS+JINDALSTE.NS+JPASSOCIA.NS+KOTAKBANK.NS+LT.NS+LUPIN.NS+M%26M.NS+"+ "MARUTI.NS+NTPC.NS + ONGC.NS+PNB.NS+POWERGRID.NS+RANBAXY.NS+RELIANCE.NS+RELINFRA.NS+SBIN.NS+SESAGOA.NS+SIEMENS.NS+SPARC.NS+TATAMOTOR.NS+"+"TATAPOWER.NS+TATASTEEL.NS+TCS.NS+ULTRACEMC.NS+WIPRO.NS+ %5ENSEI&f=snl1hgp";

            URL url = new URL(urlFile);
            Log.d("url", url.toString());
            BufferedReader reader=null;
            Log.d("1","1");
            // create the new connection
            HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
            Log.d("downloadFileViaHttp:HttpURLconnection", " " + urlConnection);
            urlConnection.setRequestMethod("GET");
            urlConnection.setDoOutput(true);

            //and connect!
            Log.d("2","2");
            urlConnection.connect();

            // pointer to the downloaded file path
            File sdcard= Environment.getExternalStorageDirectory(); 
            File MyFilePtrDest=new File(sdcard,"quotes.csv");

            Log.d("downloadFileViaHttp","localFileName = " + MyFilePtrDest.toString());

            // this will be used in reading the data from the Internet
            InputStream inputStream = urlConnection.getInputStream();

            // this will be used to write the downloaded data into the file we
            // created
            FileOutputStream fileOutput = new FileOutputStream(MyFilePtrDest);

            byte[] buffer = new byte[1024];
            int bufferLength = 0; // used to store a temporary size of the buffer               
            // write buffer contents to file
            while ((bufferLength = inputStream.read(buffer))>0) 
            {
            Log.d("content","content "+inputStream.read(buffer, 0, bufferLength));
            // add the data in the buffer to the file in the file output
            // stream (the file on the sd card
            fileOutput.write(buffer, 0, bufferLength);
            }
                inputStream.close();
                // close the output stream when done
                // fileOutput.flush();
                // fileOutput.close();
                urlConnection.disconnect();
            }
            catch (IOException e) 
            {
                // data were not found
                dataNotFound = true;``
                e.printStackTrace();
            }
        } 
```

`urlconnection.connect()`每当指针到达上述代码中的语句时，我都会尝试从 yahoo Finance 下载 csv 文件，它给了我`java.net.unknownHostException`. 如何解决上面代码中的问题？

下面是日志猫

> 03-29 19:10:09.770：W/System.err(32292)：java.net.UnknownHostException：finance.yahoo.com 03-29 19:10:09.770：W/System.err(32292)：在 java。 net.InetAddress.lookupHostByName(InetAddress.java:506) 03-29 19:10:09.770: W/System.err(32292): 在 java.net.InetAddress.getAllByNameImpl(InetAddress.java:294) 03-29 19: 10:09.770: W/System.err(32292): 在 java.net.InetAddress.getAllByName(InetAddress.java:256) 03-29 19:10:09.770: W/System.err(32292): 在 org.apache .harmony.luni.internal.net.www.protocol.http.HttpConnection.(HttpConnection.java:69) 03-29 19:10:09.770: W/System.err(32292): at org.apache.harmony.luni .internal.net.www.protocol.http.HttpConnection.(HttpConnection.java:48) 03-29 19:10:09.770: W/System.err(32292): at org.apache.harmony.luni.internal.net .www.protocol.http.HttpConnection$Address.connect(HttpConnection.java:322) 03-29 19:10:09.770: W/System.err(32292): 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:89 ) 03-29 19:10:09.770: W/System.err(32292): 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpConnection(HttpURLConnectionImpl.java:285) 03- 29 19:10:09.770: W/System.err(32292): 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConnection(HttpURLConnectionImpl.java:267) 03-29 19: 10:09.770: W/System.err(32292): 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:205) 03-29 19:10:09.770 : W/System.err(32292): 在 com.indusa.stockapp.stockListing.StockListing.downloadFileViaHTTP(StockListing.java:252) 03-29 19:10:09.770: W/System.err(32292):在 com.indusa.stockapp.stockListing.StockListing.onCreate(StockListing.java:99) 03-29 19:10:09.770: W/System.err(32292): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java: 1050) 03-29 19:10:09.770: W/System.err(32292): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623) 03-29 19:10:09.770: W/System.err( 32292): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675) 03-29 19:10:09.770: W/System.err(32292): 在 android.app.ActivityThread.access$1500(ActivityThread.java: 121) 03-29 19:10:09.770: W/System.err(32292): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:943) 03-29 19:10:09.770: W/System。错误（32292）：在 android.os.Handler.dispatchMessage（Handler.java:99）03-29 19:10:09.780：W/System.err（32292）：在 android.os.Looper。循环（Looper.java:130）03-29 19:10:09.780：W/System.err（32292）：在 android.app.ActivityThread.main（ActivityThread.java:3770）03-29 19:10:09.780： W/System.err(32292): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-29 19:10:09.780: W/System.err(32292): 在 java.lang.reflect.Method。调用（Method.java:507）03-29 19:10:09.780：W/System.err（32292）：在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run（ZygoteInit.java:912）03-29 19:10:09.780: W/System.err(32292): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670) 03-29 19:10:09.780: W/System.err(32292 ): 在 dalvik.system.NativeStart.main(Native Method)reflect.Method.invokeNative(Native Method) 03-29 19:10:09.780: W/System.err(32292): at java.lang.reflect.Method.invoke(Method.java:507) 03-29 19:10 :09.780: W/System.err(32292): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912) 03-29 19:10:09.780: W/System.err(32292) : 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670) 03-29 19:10:09.780: W/System.err(32292): 在 dalvik.system.NativeStart.main(Native Method)reflect.Method.invokeNative(Native Method) 03-29 19:10:09.780: W/System.err(32292): at java.lang.reflect.Method.invoke(Method.java:507) 03-29 19:10 :09.780: W/System.err(32292): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912) 03-29 19:10:09.780: W/System.err(32292) : 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670) 03-29 19:10:09.780: W/System.err(32292): 在 dalvik.system.NativeStart.main(Native Method)670）03-29 19:10:09.780：W/System.err（32292）：在 dalvik.system.NativeStart.main（本机方法）670）03-29 19:10:09.780：W/System.err（32292）：在 dalvik.system.NativeStart.main（本机方法）

# php - 从对象属性（字符串）中获取静态变量

> ID：15703454
> 
> 赞同：1
> 
> 时间：2013-03-29T12:41:33.327
> 
> 标签：php, class

如何动态获取静态变量？

我正在尝试这个但得到可怕的 PAAMAYIM 错误：

```
foreach($this->entity::$dialog_data as $property) { 
```

应该导致`Company::$dialog_data`因为`$this->entity`包含字符串`'Company'`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:54:02.747

也许它可以帮助你

```
$temp = $this->entity;
foreach($temp::$dialog_data as $property) { 
```

# typo3 - TYPO3 Extbase/Fluid Viewhelper 问题：“标签未正确嵌套”

> ID：15703459
> 
> 赞同：1
> 
> 时间：2013-03-29T12:41:45.900
> 
> 标签：typo3, fluid, extbase

我写了一个viewhelper `renderChildren()`...我收到了这个错误，这对我来说毫无意义： *模板标签没有正确嵌套。预期：Tx_Hplusinfo_ViewHelpers_RehaKatViewHelper；实际：Tx_hplusinfo_ViewHelpers_RehaKatViewHelper*

这是导致此消息的模板部分：

```
<f:if condition="{demand.pageId}=={settings.sucheRehaPid}">
  <h:rehaKat klinik="{entfernung.klinik}" demand="{demand}" as="kat">
    <td><f:if condition="{kat.isStationaer}">&#10003;</f:if></td>
    <td><f:if condition="{kat.isAmbulant}">&#10003;</f:if></td>
  </h:rehaKat>
</f:if> 
```

这是 viewhelper 渲染函数：

```
/**
 *
 * @param Tx_Hplusinfo_Domain_Model_Klinik $klinik
 * @param Tx_Hplusinfo_Domain_Model_SearchDemand $demand
 * @param string $as Iteration variable
 * @return string
 */
public function render(Tx_Hplusinfo_Domain_Model_Klinik $klinik, Tx_Hplusinfo_Domain_Model_SearchDemand $demand, $as ) {
        $isAmbulant = false;
        $isStationaer = false;

        foreach($klinik->getReha() as $klinikreha) {
                foreach($demand->getRehas() as $demandreha) {
                       if($klinikreha->getReha()->getUid() == $demandreha) {
                                if(!$isStationaer)
                                        $isStationaer = $klinikreha->getIsStationaer();
                                if(!$isAmbulant)
                                        $isAmbulant = $klinikreha->getIsAmbulant();
                                break;
                        }
                }
                if ($isAmbulant && $isStationaer)
                        break;
        }
        $this->templateVariableContainer->add($as, array('isAmbulant'=>$isAmbulant, 'isStationaer'=>$isStationaer));
        return $this->renderChildren();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-03T00:25:27.663

> 这是否意味着结束标签区分大小写，而开始标签不区分大小写？

因为我喜欢 100% 完整的答案，所以我想在这里添加解释。原因有两部分：第一，PHP 类名不区分大小写（尽管类加载器可能不区分大小写，具体取决于文件系统等） - 第二，Fluid 本身跟踪分配给 ViewHelpers*打开*节点的类名它匹配*关闭*节点的解析类名。

因此，当命名空间声明或 ViewHelper 引用的大小写错误时会发生什么：

*   当标签自动关闭时，会询问 PHP 解析的类名是否存在，如果 PHP 能够加载该类，则会使用它。如果之前在同一个请求中成功加载了类，或者如果您的类加载器和文件系统组合允许加载不区分大小写的路径的类文件，则会发生这种情况。
*   However, when a tag is not self closing, Fluid keeps the ViewHelperNode that was created with the class name (which may have succeeded even though the class name is technically incorrect, given the conditions above) and when detecting the closing node that sits on the same hierarchy level as the opening node, Fluid will attempt to resolve the ViewHelper class name once more *and then compare that 1:1 to the opening node's class name*. That means Fluid may judge your class names to be incorrect even if PHP is technically able to load the class (because of the perfect storm of class loading and case sensitivity or because it was previously loaded with a correctly cased class name and then reused because `class_exists` is case insensitive on already loaded classes).

所以结合上面的触发器，你可以看到使用结束标签确实意味着 Fluid 与使用内联符号或自结束标签相比表现不同，你可以看到 PHP 类加载与 Fluid 行为相结合在某些边缘情况下会导致这种类型发生的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:40:17.590

最后，我发现了问题：这是命名空间的低位/高位拼写错误：

错误的：`{namespace h=Tx_hplusinfo_ViewHelpers}`

右：（`{namespace h=Tx_Hplusinfo_ViewHelpers}`大写**h**）

奇怪的是，这种拼写错误对于开始标签或任何内联视图助手来说都不是问题，例如

```
{h:myFormatter(inp:{xy})} 
```

这是否意味着结束标签区分大小写，而开始标签不区分大小写？

# python - Python 得到好坏参半的结果。

> ID：15703463
> 
> 赞同：0
> 
> 时间：2013-03-29T12:42:03.697
> 
> 标签：python, conditional-statements

我对 python 还很陌生，从我的脚本中获得“完美结果”时遇到了一些麻烦。

到目前为止，这是我的代码：

```
#import urllib2
#file = urllib2.urlopen('https://server/Gin.txt')
Q = raw_input('Search for: ')

if len(Q) > 0:
        for line in open('Gin.txt'):    #Will be corrected later..
                if Q.lower() in line.lower():
                        print line 

                #print "Found nothing. Did you spell it correct?" ## problem here. 
else:
        os.system('clear')
        print "You didn't type anything. QUITTING!" 
```

现在代码正在运行。它会找到我正在寻找的东西，但是如果它没有找到匹配项。我希望它打印“一无所获......”我得到了各种结果，混合匹配的假阳性结果等等......几乎所有的结果都没有。对你们大多数人来说，这可能是小菜一碟，但我已经工作了 8 个多小时，所以现在我在这里。

如果有更优化/更简单/更漂亮的编写方式，请随时纠正我的错误。我的目标是完美！所以我是所有的眼睛和耳朵。供参考。**gin.txt**包含从`!#_'[] 0..9`大写字母到大写字母的几乎所有内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T12:43:59.807

`for`循环有一个子句`else:`。当您*没有*提前结束循环时执行它：

```
for line in open('Gin.txt'):    #Will be corrected later..
    if Q.lower() in line.lower():
        print line 
        break
else:
    print "Found nothing. Did you spell it correct?" 
```

注意`break`; 通过跳出`for`循环，`else:`套件*不会*被执行。

这当然会在第一场比赛中停止。如果您需要查找多个匹配项，您唯一的选择是使用某种形式的标志变量：

```
found = False
for line in open('Gin.txt'):    #Will be corrected later..
    if Q.lower() in line.lower():
        found = True
        print line 

if not found:
    print "Found nothing. Did you spell it correct?" 
```

# blackberry-10 - 如何使用 C++ 从黑莓设备 10 读取短信列表

> ID：15703472
> 
> 赞同：1
> 
> 时间：2013-03-29T12:42:49.677
> 
> 标签：blackberry-10

你能告诉我如何在黑莓 10 中阅读短信（测试消息）收件箱。我使用了消息文件夹 api。在我的设备中有 6 条短信。但调试时显示为零。这是我的代码

```
void Testmesagges::inboxSmsTest(){
     fprintf(stderr,"*****in*******\n");
      qDebug() << "***************Thegtf  is************************* ";
              bb::pim::message::MessageService messageService;
               bb::pim::account::AccountService accountService;

            //Get the SMS/MMS account
            QList<Account> accountList = accountService.accounts(Service::Messages,"sms-mms");
             fprintf(stderr,"*****count*******\n");
             qDebug() << accountList.count();
             fprintf(stderr,"*****Length*******\n");
            qDebug() << accountList.length();
            AccountKey accountId;
            if(accountList.count()>0){
             accountId = accountList.first().id();
            qDebug() << "***************The  is************************* ";
                      fprintf(stderr,"*****ID*******\n");
                       qDebug() << accountId;

             QList<MessageFolder> folders = messageService.folders(accountId);
             fprintf(stderr,"*****size*******\n");
            qDebug() << folders.size();
             fprintf(stderr,"*****count*******\n");
            qDebug() << folders.count();
             fprintf(stderr,"*****length*******\n");
            qDebug() << folders.length();
            MessageFolder firstFolder = folders.at(0);
             qDebug() << firstFolder.isValid();
             qDebug() << firstFolder.name();
            }
} 
```

# sql - 将命令结果输出到 SQL Server 数据库

> ID：15703474
> 
> 赞同：0
> 
> 时间：2013-03-29T12:42:55.603
> 
> 标签：sql, command, psexec

有没有办法将批处理文件的结果打印到 SQL Server 数据库？我已设法将结果打印到 txt 文件，但我想将结果打印到数据库。

我需要打印结果的每一行，否则我只会在最后将 txt 文件的内容插入到数据库中。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:59:29.933

您可以使用适当的分隔符将文本文件创建为 CSV 格式，并将该文件导入 SQL Server 中的表中。

关注这篇文章

[http://blog.sqlauthority.com/2012/06/20/sql-server-importing-csv-file-into-database-sql-in-sixty-seconds-018-video/](http://blog.sqlauthority.com/2012/06/20/sql-server-importing-csv-file-into-database-sql-in-sixty-seconds-018-video/)

# django - 如何使 reverse_lazy() 对参数也变得懒惰？

> ID：15703475
> 
> 赞同：6
> 
> 时间：2013-03-29T12:42:55.907
> 
> 标签：django, django-urls, lazy-evaluation

## 介绍

对于特定需求（django-jqgrid），我定义了一个类（代表 a `Grid`），我必须在其中提供一个`url`属性。因为我只使用反向 URL（没有静态定义），所以我使用`reverse_lazy()`这个。

只要我不必将参数传递给`reverse_lazy()`. 但是，如果我想让它`Grid`特定于一个对象（这里是 a `DocumentSet`），这个`url`参数也需要特定于那个对象，所以我需要为 reverse_lazy() 提供一个参数。

在运行时，我可以访问 ，`DocumentSet`因为我将它定义为对象的属性，并且我确保调用的第一个函数`Grid`将此对象作为参数，并正确设置属性。

## 第一次尝试

### 代码

我尝试使用此代码：

```
class DocumentGrid(JqGrid):
    documentset = None
    model = Document
    url = reverse_lazy('document-grid-handler', kwargs = {'pk' : documentset.id, })

    def get_queryset(self, request):
        return self.documentset.documents
    def get_json(self, request, documentset):
        self.documentset = documentset
        return super(DocumentGrid, self).get_json(request) 
```

### 错误

但是当然，导入文件时这会失败，因为`NoneType object has no attribute 'id'`.

## 第二次尝试

### 代码

所以我尝试使用`django.utils.functional.lazy()`，通过在我的模型中添加这个琐碎而愚蠢的功能：

```
def get_id(self):
    return self.id 
```

并通过使用此代码：

```
class DocumentGrid(JqGrid):
    documentset = DocumentSet
    model = Document
    url = reverse_lazy('document-grid-handler', kwargs = {'pk' : lazy(documentset.get_id, int), })

    def get_queryset(self, request):
        return self.documentset.documents
    def get_json(self, request, documentset):
        self.documentset = documentset
        return super(DocumentGrid, self).get_json(request) 
```

### 错误

现在文件已正确导入，没有 Django 抱怨。**但是**，在运行时，我收到以下错误：

```
Reverse for 'document-grid-handler' with arguments '()' and keyword arguments '{'pk': <function get_id at 0x1a07410>}' not found. 
```

## 结论

**这是正确的方法，但我犯了一个小错误？还是我误解了关于惰性评估的一切，应该采取完全不同的方法并重写`reverse_lazy()`？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T13:26:37.070

`django.utils.functional.lazy()`为您返回一个惰性求值的可调用对象，换句话说，它为您提供了一个返回惰性值的函数。

参见示例：

```
l = lazy(lambda : 42, str)
unicode(l)  # returns u'<function <lambda> at 0x3a5bcf8>'
lazy_value = l()
unicode(lazy_value)  # returns u'42' 
```

但是，如果您要替换函数中的`self.documentset`字段，您`get_json`的惰性调用可能会得到错误的结果。因为它将使用旧的`DocumentSet`.

因为`JqGrid`还有另一种解决方案。`JqGrid`为您提供`get_url`方法，默认情况下它只返回`self.url`. 但是您可以覆盖此行为：

```
class DocumentGrid(JqGrid):
    documentset = None
    model = Document
    url = None

    def get_queryset(self, request):
        return self.documentset.documents

    def get_json(self, request, documentset):
        self.documentset = documentset
        return super(DocumentGrid, self).get_json(request)

    def get_url(self):
        return reverse('document-grid-handler', kwargs = {'pk' : self.documentset.id, }) 
```

# regex - 从路径目录中获取子字符串

> ID：15703479
> 
> 赞同：0
> 
> 时间：2013-03-29T12:43:08.193
> 
> 标签：regex, string, path, c#-3.0

我想要目录路径中的子字符串。是否有任何查询或正则表达式可以做到这一点。我的路径是这样的：

```
E:\\Work\\Taxonomies\\012\\20110826\\20110826_final\\full_entry_point_2011-08-26.xsd 
```

我想要的是

```
20110826_final\\full_entry_point_2011-08-26.xsd 
```

我想要从倒数第二个“\”开始的路径，我可以将它拆分为数组，但是我必须组合最后两个值。

```
string[] path = value.Split('\\');
int length=path.Length;
if(length>1)
{
 string final = string.Concat(path[length-2],"\\", path[length-1]);
} 
```

请指导我。有没有其他方法来实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:50:56.000

```
String pattern = @"(.*\\)(.*\\.*$)";
String input = @"E:\Work\Taxonomies\012\20110826\20110826_final\full_entry_point_2011-08-26.xsd";
String result = Regex.Match(input, pattern).Groups[2].Value; 
```

**编辑**

此正则表达式将字符串分为两组。首先 - 所有符号和 \ 它可以在第二组之前使用。第二 - 所有剩余的符号是 'text'\'text''endofstring'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:50:36.810

因为我不知道 C#，你可能会处理“\”的数量，但是，如果你想用正则表达式来做：

```
/(?<=\\\\)[^\\]+\\\\[^\\]+$/ 
```

即“一个或多个字符前面有 2 个反斜杠，然后是 2 个反斜杠，然后是一个或多个字符，直到结尾”。当我指的是字符时，我指的是除了反斜杠之外的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T14:26:49.570

使用正则表达式进行此搜索操作的另一种方法是在 String 类上使用 LastIndexOf 方法，因此：

```
 static bool TryFindTrailingPart(string path, int numberOfSeparators, out string result)
    {
        var sep = Path.DirectorySeparatorChar;
        var lastSlash = path.Length;
        for(int i = 0; i < numberOfSeparators; i++)
        {
            lastSlash = path.LastIndexOf(sep, lastSlash - 1);
            if(lastSlash < 0)
            {
                result = null;
                return false;
            }
        }

        result = path.Substring(lastSlash + 1);
        return true;
    } 
```

虽然这段代码比正则表达式长得多，但它确实有一些优点：它比正则表达式方法更灵活（参数化了要搜索的路径分隔符的数量），并且它的执行速度大大加快。

使用 OP 的路径表达式在紧密循环中运行上述代码大约需要 200 毫秒，以进行 10000 次迭代。

使用 Dmitry Dovgopoly 给出的相同迭代次数的答案中给出的正则表达式方法大约需要 6890 毫秒。将 Dmitry 的代码转换为使用已编译的正则表达式（不包括编译表达式所需的时间）仍然需要大约 3140 毫秒。

这种方法的速度和灵活性是否超过源代码长度的增加在很大程度上取决于您的特定场景：如果您正在处理（非常！）大量路径字符串，它可能会很有用。另一方面，如果您只需要一段“一次性”的代码来处理路径字符串处理问题，那么正则表达式方法可能更合适。

# mysql - 在 Order By 中使用 MATH 对性能有好处吗？

> ID：15703482
> 
> 赞同：0
> 
> 时间：2013-03-29T12:43:13.277
> 
> 标签：mysql, math, select, sql-order-by

我只有一个问题：假设我们有一个表 (activity_feed) 有 1.000.000 行，一个表 (activity_feed_per_user) 与请求提要的用户和他将看到的活动之间的关系以及表中的一些统计信息全部由应用程序获取的活动。

如果我必须按等级对结果进行排序（甚至取决于时间，所以每秒都是变量），这个查询好用吗？或者根本没有？

```
EXPLAIN EXTENDED SELECT feed.activity_id, feed.body, counter.comments, counter.likes, user.username,
(0.25 * (
        (1 / TIMESTAMPDIFF(MINUTE,feed.datetime,now()) ) +
        ( 1 - (1 / (((comments + 1)* 1) + ((likes + 1) * 0.5))) ) +
        activity_type.peso +
        user_affinity.affinity
    )) as ranking
FROM activity_feed_per_user as feed_user
INNER JOIN activity_feed as feed ON feed_user.activity_id = feed.activity_id
INNER JOIN activity_type ON feed.activity_type = activity_type.activity_type_id
INNER JOIN activity_social_counter as counter ON feed_user.activity_id = counter.activity_id
INNER JOIN user_info as user ON user.user_id = feed.user_id
INNER JOIN user_affinity ON feed.user_id = user_affinity.user_related AND user_affinity.user_id = '1'
WHERE feed_user.user_id = '1' 
ORDER BY ranking DESC 
```

这是解释

```
1 | SIMPLE | user_affinity | ref | PRIMARY | PRIMARY | 4 | const | 2 | 100.00 | Using temporary; Using filesor
1 | SIMPLE | user | eq_ref | PRIMARY | PRIMARY | 4 |db.user_affinity.user_related | 1 | 100.00
1 | SIMPLE | feed_user | ref | PRIMARY | PRIMARY | 4 | const | 9 | 100.00 | Using index
1 | SIMPLE | feed | eq_refvPRIMARY,activity_type,user_idvPRIMARY | 4 | db.feed_user.activity_id | 1 | 100.00 | Using where
1 | SIMPLE | activity_type | eq_ref | PRIMARY | PRIMARY | 1 | db.feed.activity_type | 1 | 100.00
1 | SIMPLE | counter | eq_ref | PRIMARY | PRIMARY | 4 | db.feed_user.activity_id | 1 | 100.00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:47:56.237

`ORDER BY`在没有索引的值上，必须查看查询生成的每一行，因此您提出的建议可能会损害返回大量结果集的查询的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:55:31.063

The `ORDER BY` in your query will force a "Using filesort" operation, and that can be an expensive operation on large result sets. (MySQL can sometimes satisfy an ORDER BY using an index, avoiding a "Using filesort" operation; but in your case, the expression ("math") will need to evaluated for all rows in the result set.

If it's returning the resultset you need, then your query looks good.

# php - 无法在 PHP 中设置 cookie

> ID：15703487
> 
> 赞同：1
> 
> 时间：2013-03-29T12:43:25.287
> 
> 标签：php, cookies, ip, setcookie

我编写了一个 PHP 脚本，它从网站获取有关访问者 IP 和浏览器的信息，并将其存储在我的数据库中的表中。这个脚本包含在标题中，每次加载每个页面时都会运行，谷歌分析类型的东西。**调查.php**

我希望这个代码只为网站的每个新访问者运行，所以我只记录每个新访问者。

我想这是通过设置 cookie 来完成的，所以我编写了其他代码来设置 cookie，然后仅在没有 cookie 时才包含**survey.php 。**我用过**！****isset**中的函数运行 if 语句，如果它不存在但它没有设置 cookie 并且在每次加载时运行脚本。

根据[手册中的](http://php.net/manual/en/function.setcookie.php)内容，我看不出哪里出错了。

```
<?php 
if(!isset($_COOKIE['Name'])){
    setcookie("Name");
    include ('survey.php');
}
?> 
```

**编辑：我添加了一个值，用多个用户对其进行了测试，并且脚本仍然运行每个负载。不知道为什么。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:47:43.437

给你的cookie一个值：

```
$value = 'something from somewhere';

if(!isset($_COOKIE['Name'])){
  setcookie("Name", $value);
  include ('survey.php');
} 
```

鉴于它是为了识别新用户，使用“0”或“1”就足够了。

如果您希望 cookie 在将来过期：

```
setcookie("Name", $value, time()+604800);  /* expires in a week */ 
```

**编辑：**

我已经在一个简单的页面中使用以下代码进行了尝试：

```
<?php 
  if(!isset($_COOKIE['Test'])){

    setcookie("Test", '1');
    echo "Cookie set";
    //include ('survey.php');
  }
?> 
```

我得到“Cookie set”一次，然后在随后的刷新中不再看到它。我还可以在控制台中看到 cookie：

```
Test | 1 | www.domain.com | / | Session | 5 
```

唯一的潜在问题（因为您使用不同的用户）是此 cookie 是为当前会话设置的，因此将其设置为在未来很长一段时间内过期将有利于永久性，并且会阻止您的用户很快看到您的调查：

```
<?php 
  if(!isset($_COOKIE['Test'])){

    //Expires on 31 december 2015
    setcookie("Name","1",mktime (0, 0, 0, 12, 31, 2015));
    include ('survey.php');
  }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:49:34.970

1) 尝试像这样为 cookie 设置值 $value = 'Test'; setcookie("TestCookie", $value);

2) 检查浏览器是否启用cookies

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T12:51:53.317

为了设置 cookie，或者更确切地说，为了从 PHP 中获取发送给用户的 cookie，您需要给它一个值。浏览器（至少是大多数现代浏览器）将一个空的 cookie 标头作为命令来清除它们拥有的具有该名称的任何 cookie。

因此，显然，它不会在进一步的请求中发送，因为浏览器没有将其设置为 null，而是丢弃了它。

给它一个随机的短值，你所有的问题都会消失：

```
setcookie("Name",rand(1,10)); 
```

或类似的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T11:09:16.193

**解决**

我将代码作为第一段代码包含在内，但不在第一行。

设置 cookie 的代码必须在第 1 行开始。

发布此内容以便其他人可以受益。

# c - 使用 printf 的大数

> ID：15703498
> 
> 赞同：-1
> 
> 时间：2013-03-29T12:44:01.387
> 
> 标签：c, variables, printf

我必须编写一个计算一些值的 C 程序。实际上应该没有问题，我的程序适用于小数字，但是当我尝试打印像 2^32 这样的大数字时，它就不起作用了。好的，我知道整数变量是 2^32 位大，但我不能使用 long 变量或 unsigned long 变量吗？

为什么

```
unsigned long erg = pow(2,32);
printf(%u, erg); 
```

不行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:47:17.670

打印 unsigned long 的正确格式是`%lu`, not`%u`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:49:16.883

这依赖于你的底层架构。如果您有一台 32 位机器，则无法生成大于 2^31 - 1 的整数。除此之外，即使 32 位机器也无法处理 2^32 而不会溢出，因为范围从 -2^31 到2^31 - 1。

# webdriver - 在 testng.xml 的测试中多次包含一个方法以多次执行步骤

> ID：15703499
> 
> 赞同：1
> 
> 时间：2013-03-29T12:44:02.247
> 
> 标签：webdriver, testng

作为测试的一部分，我想多次执行一组测试方法。
我正在使用 TestNG 来指定我的测试。我在 testng.xml 文件中指定的测试是这样的：

```
<test>
        <classes>
            <class name="AddAppointment">
                <methods>
                    <include name="testLogin" />
                    <include name="addAppointment" />
                    <include name="checkApptForCurrentLocation" />
                    <include name="changeLocation" />
                    <include name="addAppointment" />
                    <include name="checkApptForCurrentLocation" />
                </methods>
            </class>
        </classes>
    </test> 
```

执行此测试后，我看到重复的方法没有被执行。它只执行测试直到'changeLocation'。任何人都可以提出任何其他解决方案或为什么这不起作用？

请注意，我不想使用不同的数据集多次执行这些方法。因此，按照我在网上找到的一些帖子中的建议使用数据提供者对我没有帮助。因为我遵循严格的命令
提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T04:35:57.997

TestNG 不是一种编程语言，这样对待它只会导致心碎。`addAppointment`并且`changeLocation`是编程语言中的动词，而不是测试。

看起来您有 3 个测试：登录测试，在一个（默认或起始）位置测试特定数据组合，以及在另一个位置测试特定数据组合。您可以使用依赖关系将这些测试粘合在一起，而不是使用方法/包含构造进行排序。

特别是，我建议您设置`testLogin`在一个名称为 的组中`startup`，并且第一个实质性测试具有对 的组依赖性`startup`。第二个实质性测试对第一个实质性测试具有方法依赖性。

# javascript - 错误：无法访问属性 href

> ID：15703503
> 
> 赞同：1
> 
> 时间：2013-03-29T12:44:13.423
> 
> 标签：javascript, html, node.js, web

我正在使用创建 HTTP 服务器的 NODE JS 模块。服务器的响应是一个包含 JavaScript 的页面，该页面在 . 这是响应代码：

```
<html>
<head>
<script type='text/javascript'>
function test() {
document.body.innerHTML='<iframe id="ifool" src="URL" sandbox="allow-same-origin allow-forms allow-scripts"> </iframe>';
var c;                 
window.setInterval(function(){
c=document.getElementById("ifool").contentWindow.location.href; 
window.history.pushState(0,0,c);  
},100);
</script>
</head>
<body onload= "test()">
</body>
</html> 
```

我正在使用带有 FF 的 Firebug。我收到以下错误：

```
 Error: Permission denied to access property 'href'
    c=document.getElementById("ifool").contentWindow.location.href; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:28:42.750

如果您尝试在 iframe 中访问的 URL 位于当前页面域之外，那么您将无法访问。现代浏览器实现了[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，该策略在运行跨站点脚本时决定 JavaScript 的权限。

当父母和孩子来自同一个域时，他们可以相互访问；子进程可以访问和操作父进程的属性和方法，反之亦然。但是，当他们不这样做时，尝试此类访问将触发脚本错误，指示权限被拒绝。

如果我尝试使用指向节点服务器托管的页面的页面和 iframe 源运行类似的脚本，则不会出现权限错误。

资料来源：

1.  [http://www.esqsoft.com/javascript_examples/iframe_talks_to_parent/](http://www.esqsoft.com/javascript_examples/iframe_talks_to_parent/)
2.  [错误：访问属性“文档”的权限被拒绝](https://stackoverflow.com/questions/7995223/error-permission-denied-to-access-property-document)
3.  [从 iframe 访问父 URL](https://stackoverflow.com/questions/3420004/access-parent-url-from-iframe)
4.  [<iframe> javascript 跨域访问父 DOM？](https://stackoverflow.com/questions/1291812/iframe-javascript-access-parent-dom-across-domains)

# c - 是否可以使某些用于创建库的函数对调用者不可用？

> ID：15703508
> 
> 赞同：2
> 
> 时间：2013-03-29T12:44:24.173
> 
> 标签：c, api

我正在写一个库。假设它有两个重要的函数 foo1 和 foo2。这两个函数都调用了第三个函数 foo0。但是 foo0 不打算在库编译并链接到之后使用。有没有办法让库的用户无法使用 foo0？

也许我想让用户可以使用函数只是一种伪善，但我认为这会使库变得更干净。而且我很确定我已经使用过执行此操作的 API。

后续问题：如果可能的话，我想创建两个不同的头文件吗？一种用于编译库，一种仅包含用户所需的 typedef、枚举、原型等？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:37:36.463

C 标准不提供跨多个翻译单元执行此操作的方法。一些链接器提供了帮助解决此问题的方法。使用某些链接器，您可以将多个目标模块链接在一起以生成组合的目标模块，同时指示链接器从目标模块发布的名称中排除某些名称。在生成组合对象模块的链接期间，在一个输入对象模块上使用并在另一个输入对象模块中定义的名称被解析，因此它们不再需要在外部可见。

您需要指定您正在使用的开发人员工具才能获得进一步的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:37:07.797

最好的可移植方法是在构建时随机化函数名称，并使用预处理器宏将固定名称公开给源文件，但不在公共头文件中。如果函数名称是非描述性的并且每次构建都会更改，那么没有人会尝试使用它。

# c - 警告：没有以前的“用法”原型

> ID：15703515
> 
> 赞同：-3
> 
> 时间：2013-03-29T12:45:06.473
> 
> 标签：c

```
int /usage( const char* name )
{
   fprintf( stderr, "usage: %s\n", name );

   fprintf( stderr, "\t[ -h a | c ]\n"
            "\t\thealthcheck - amf or comp invoked\n" );
   fprintf( stderr, "\t[ -e a | s | q | r | p | x ]\n"
            "\t\terror assignment (x error all)\n" );
   fprintf( stderr, "\t[ -f invocation_number ]\n"
            "\t\tfail specified healthcheck invocation\n" );
   fprintf( stderr, "\t[ -i a | s | q | r | p | x ]\n"
            "\t\tignore assignment (x ignore all)\n" );
   fprintf( stderr, "\t[ -m b]\n"
                    "\t\tpassive monitoring - start\n");
   fprintf( stderr, "\t[ -p proxied ]\n"
            "\t\tregister for proxied\n" );
   fprintf( stderr, "\t[ -s ]\n"
            "\t\tsuppress component output\n" );
   fprintf( stderr, "\t[ -z ]\n"`enter code here`
            "\t\tsuppress component registration\n" );
   return 1;
} 
```

请帮助我摆脱该警告。因为我从几天开始就面临这个问题。有更多相同类型的警告。提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:48:12.470

你的函数签名中有一个杂散`\`，它不能在那里：

```
int usage( const char* name )
{
   fprintf( stderr, "usage: %s\n", name );

   fprintf( stderr, "\t[ -h a | c ]\n"
            "\t\thealthcheck - amf or comp invoked\n" );
   fprintf( stderr, "\t[ -e a | s | q | r | p | x ]\n"
            "\t\terror assignment (x error all)\n" );
   fprintf( stderr, "\t[ -f invocation_number ]\n"
            "\t\tfail specified healthcheck invocation\n" );
   fprintf( stderr, "\t[ -i a | s | q | r | p | x ]\n"
            "\t\tignore assignment (x ignore all)\n" );
   fprintf( stderr, "\t[ -m b]\n"
                    "\t\tpassive monitoring - start\n");
   fprintf( stderr, "\t[ -p proxied ]\n"
            "\t\tregister for proxied\n" );
   fprintf( stderr, "\t[ -s ]\n"
            "\t\tsuppress component output\n" );
   fprintf( stderr, "\t[ -z ]\n"
            "\t\tsuppress component registration\n" );
   return 1;
} 
```

# c# - 是否可以从 InvocationExpression 获取属性？

> ID：15703516
> 
> 赞同：1
> 
> 时间：2013-03-29T12:45:11.557
> 
> 标签：c#, linq

我有以下代码：

```
 var existing = new[] { "first", "second" };
      Func<TestType, string> func = type => type.TextCol;

      Expression<Func<TestType, bool>> exp = q => existing.Contains(func(q)); 
```

并有表达访客。访问者看到`MethodCallExpression`哪个`Contains`在原始表达式中，它有两个参数 - 一个是字符串值数组，第二个是`InvocationExpression`，它是`func(q)`原始表达式的一部分。

`InvocationExpression`我需要以某种方式从原始函数中使用的this 中提取属性名称。我认为这应该是可能的，但是`InvocationExpression`在调试器中查看实例不知道如何，可能有人可以提供帮助吗？

# 更新

我打算做的是

```
public IEnumerable<TEntity> FindExisting<TEntity, TValue>(IEnumerable<TEntity> list, Func<TEntity, TValue> property)
{
     var values = list.Select(property);
     Expression<Func<TEntity, bool>> exp = q => list.Contains(property(q)); 
     return db.Select<TEntity>(exp);
} 
```

# 更新 2

整个故事:) 所以 ServiceStack.OrmLite 有方法[SaveAll](https://github.com/ServiceStack/ServiceStack.OrmLite/blob/master/src/ServiceStack.OrmLite/OrmLiteWriteExtensions.cs)，它获取实体列表，在数据库中检查它们中的哪些存在并更新它们，其余的被插入。所有这些都工作正常，问题是，他们正在使用 Id 字段来检查数据库中是否存在项目。就我而言，我有另一个唯一字段，它是外部系统中的主键，当我从外部系统获取实体时，使用该字段而不是 Id 来检查是否需要插入或更新它们会容易得多，所以我想我会写扩展方法，它和 SaveAll 一样，只是有可能传递用于确定项目是否需要更新或插入的属性。

# php - PHP 5.3.3 数据库未连接

> ID：15703519
> 
> 赞同：0
> 
> 时间：2013-03-29T12:45:22.343
> 
> 标签：php, pdo

我已将我的 PHP 从 5.2.17 升级到 5.3.3。我的数据库已停止工作。我已经检查了很多代码并不断收到以下错误。关于我可以尝试什么的任何想法？

错误 - 数组 [0] => 00000 [1] => [2] =>

```
``//============================================================================    
 private  function _Init($db)
           {
                if($db) 
                    $this->DB = $db; 
                else
                {
                    $E = new ErrorMsg("Invalid db connection".$this->DB->DataBase,"Error",__FILE__);
                    $E->Show();
                    return;
                }
           }
           //============================================================================
           public function Connect()
           {
               if(!class_exists("PDO"))
               {
                  $E = new ErrorMsg("On your server is not instaled PDO library!","Fatal Error",__FILE__);
                  $E->Show();
               }

               try
               {
                 $this->PDO =  new PDO("mysql:host=".$this->DB->ServerName."; dbname=".$this->DB->DataBase,
                                       $this->DB->UserName,
                                       $this->DB->Password, array( PDO::ATTR_PERSISTENT => false ,PDO::MYSQL_ATTR_USE_BUFFERED_QUERY=>true));
               }
               catch(PDOException $t)
               {

                  $E = new ErrorMsg("Not connected to DB ".$this->DB->DataBase,"Error",__FILE__);
                  $E->Show();
                  return;
               }

           }
           //============================================================================
           public function Query($Q,$Values=array())
           {

              if(!$this->PDO) return;

              $this->_cPDOStatement = null;
              $R = $this->PDO->prepare($Q);

              if($this->PDO->errorInfo()==array('0'=>'00000'))
              {
                  $R->execute($Values);

                  if($R->errorInfo()==array('0'=>'00000'))
                  {
                    $this->_cPDOStatement = $R;
                    return $this->_cPDOStatement;
                  }
                  else
                  {
                       $E = new ErrorMsg($R->errorInfo(),"Error",__FILE__);
                       $E->Show();
                  }
              }
              else
              {
                 $E = new ErrorMsg($this->PDO->errorInfo(),"Error",__FILE__);
                 $E->Show();
              }

              return null;
           }
           //============================================================================
           public function GetLastInsertedId()
           {
              return $this->PDO->lastInsertId();
           }
           //============================================================================
           public function FetchObj( $PDOStat=null )
           {
                if($PDOStat)
                {
                    return $PDOStat->fetch(PDO::FETCH_OBJ);
                }
                else
                {
                    if($this->_cPDOStatement)
                    {
                        $Result = $this->_cPDOStatement->fetch(PDO::FETCH_OBJ);
                        $this->_cPDOStatement = null;
                    }
                    else
                    {
                        $Result = null;
                    }
                }

                return $Result;
           }
           //============================================================================
           public function FetchArray( $PDOStat=null )
           {
                if($PDOStat)
                {

                    return $PDOStat->fetch(PDO::FETCH_ASSOC);
                }
                else
                {
                    if($this->_cPDOStatement)
                    {

                        $Result = $this->_cPDOStatement->fetch(PDO::FETCH_ASSOC);
                        $this->_cPDOStatement = null;
                    }
                    else
                    {
                        $Result = null;
                    }
                }

                return $Result;
           }
           //============================================================================
           public function FetchAllObj( $PDOStat=null )
           {
                if($PDOStat)
                {
                    return $PDOStat->fetchAll(PDO::FETCH_OBJ);
                }
                else
                {
                    if($this->_cPDOStatement)
                    {
                        $Result = $this->_cPDOStatement->fetchAll(PDO::FETCH_OBJ);
                        $this->_cPDOStatement = null;
                    }
                    else
                    {
                        $Result = null;
                    }
                }

                return $Result;
           }
           //============================================================================
           public function FetchAllAssoc( $PDOStat=null )
           {
                if($PDOStat)
                {
                    return $PDOStat->fetchAll(PDO::FETCH_ASSOC);
                }
                else
                {
                    if($this->_cPDOStatement)
                    {
                        $Result = $this->_cPDOStatement->fetchAll(PDO::FETCH_ASSOC);
                        $this->_cPDOStatement = null;
                    }
                    else
                    {
                        $Result = null;
                    }
                }

                return $Result;
           }
           //============================================================================
           public function FetchAllArray( $PDOStat=null )
           {
                if($PDOStat)
                {
                    return $PDOStat->fetchAll(PDO::FETCH_ASSOC);
                }
                else
                {
                    if($this->_cPDOStatement)
                    {
                        $Result = $this->_cPDOStatement->fetchAll(PDO::FETCH_ASSOC);
                        $this->_cPDOStatement = null;
                    }
                    else
                    {
                        $Result = null;
                    }
                }

                return $Result;
           }
           //============================================================================
           public function Disconnect()
           {
              $this->PDO = null;
           }
        }

    ?>` 
```

# python - 在python中添加到空的双向链表

> ID：15703520
> 
> 赞同：1
> 
> 时间：2013-03-29T12:45:25.570
> 
> 标签：python

我知道如何在头尾前后添加节点，但我不知道如何将节点添加到空的双向链表中。我该怎么做呢？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:47:40.320

插入空列表时，同时创建`head`并`tail`引用新节点。此外，请确保节点`next`和`previous`引用与代码的其余部分所期望的一致。

# ffmpeg - 使用了 Libtool 库，但未定义“LIBTOOL”？

> ID：15703522
> 
> 赞同：12
> 
> 时间：2013-03-29T12:45:29.277
> 
> 标签：ffmpeg, centos5

我试图在我的服务器上安装 ffmpeg。我不喜欢centos 5。

当我尝试安装 libfdk_aac 时，出现以下错误

```
` autoreconf: Entering directory `.'
autoreconf: configure.ac: not using Gettext
autoreconf: running: aclocal --force -I m4
autoreconf: configure.ac: tracing
autoreconf: configure.ac: not using Libtool
autoreconf: running: /usr/bin/autoconf --force
autoreconf: configure.ac: not using Autoheader
autoreconf: running: automake --add-missing --copy --force-missing
Makefile.am:31: Libtool library used but `LIBTOOL' is undefined
Makefile.am:31:
Makefile.am:31: The usual way to define `LIBTOOL' is to add `AC_PROG_LIBTOOL'
Makefile.am:31: to `configure.ac' and run `aclocal' and `autoconf' again.
Makefile.am: C objects in subdir but `AM_PROG_CC_C_O' not in `configure.ac'
autoreconf: automake failed with exit status: 1 ` 
```

如果我输入 which libtool 我会得到 /usr/bin/libtool，所以我认为 libtool 已安装。所以我不确定为什么会发生这个错误。

感谢您的任何建议

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T12:55:47.270

该错误告诉您`libtool`未安装，或者您没有在`configure.ac`. `LT_INIT`在`configure.ac`. _ 如果`autoreconf`然后抱怨它不知道是什么`LT_INIT`，您应该安装 libtool，升级您的 libtool 安装或使用`AC_PROG_LIBTOOL`configure.ac 中已弃用的。（`AC_PROG_LIBTOOL`应该`LT_INIT`在较新的项目中替换为。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-01T19:54:38.203

我遇到过同样的问题。做了以下

```
$brew install libtool
==> Downloading https://downloads.sf.net/project/machomebrew/Bottles/libtool-    2.4.2.mavericks.bottle.2.tar.gz
######################################################################## 100.0%
==> Pouring libtool-2.4.2.mavericks.bottle.2.tar.gz
==> Caveats
In order to prevent conflicts with Apple's own libtool we have prepended a "g"
so, you have instead: glibtool and glibtoolize.
==> Summary
  /usr/local/Cellar/libtool/2.4.2: 66 files, 2.2M
fdk-aac $ glibtoolize
fdk-aac $ autoreconf -fiv
fdk-aac $ ./configure
fdk-aac $ make
fdk-aac $ make -install
go to ffmpeg/build
ffmpeg/build$ ../configure --enable-libfdk-aac --enable-nonfree
ffmpeg/build$make
ffmpeg/build$sudo make install
do ls /usr/local/lib/*fdk* check that libfdk-aac is installed
go to my application

 myapp/build$cmake ../
 myapp/build$make 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-27T19:03:30.137

I came across the same issue when install geoip for nginx in centos (when trying to run make command) and this is what I have done. yum install libtool Added below line at the end of configure.in AC_CONFIG_MACRO_DIR([m4])

Add below line at the end of Makefile.am ACLOCAL_AMFLAGS = -I m4

run $ aclocal $ libtoolize

Don't ask me why. But this worked.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-25T10:21:20.450

I had this problem when doing ./autogen.sh for cairo.

The complaining message does make much intelligible sense really.

But the following fixed it:

```
$ export ACLOCAL_PATH="/usr/share/aclocal/:/usr/local/share/aclocal"
$ ./autogen.sh 
```

# c - 如何在前剪裁平面附近绘制？

> ID：15703523
> 
> 赞同：0
> 
> 时间：2013-03-29T12:45:38.493
> 
> 标签：c, opengl-es

我正在尝试在 OpenGL 中靠近前剪裁平面绘制对象。已经定义了路径，并且相机正在沿着路径移动。现在，我想绘制用相机移动的对象，机器人不直接在前剪裁平面上。

我在 Android 上使用[Tux Racer](https://github.com/drodin/TuxRider)游戏端口，并在 hud.c 中尝试了这样的小测试功能：

```
void draw_triangle() {
    set_gl_options(FOG_PLANE);

    glPushMatrix();
    {
        glTranslatef(getparam_x_resolution() / 2.0, getparam_y_resolution() / 2.0, -5.0);
        glBegin(GL_TRIANGLES);          // Drawing Using Triangles
        glVertex3f(0.0f, 50.0f, 0.0f);      // Top
        glVertex3f(-50.0f, -50.0f, 0.0f);   // Bottom Left
        glVertex3f(50.0f, -50.0f, 0.0f);    // Bottom Right
        glEnd();                // Finished Drawing
    }
    glPopMatrix();
} 
```

但它不会画。我哪里错了？如果 z 轴的 -5.0 太远，我不同意，或者我应该使用其他选项`set_gl_options()`，也就是说，我不知道应该从这个选项中启用/禁用什么来查看 3D 对象：

*   GL_TEXTURE_2D
*   GL_DEPTH_TEST
*   GL_CULL_FACE
*   GL_LIGHTING
*   GL_NORMALIZE
*   GL_ALPHA_TEST
*   GL_BLEND
*   GL_STENCIL_TEST
*   GL_TEXTURE_GEN_S
*   GL_TEXTURE_GEN_T
*   GL_COLOR_MATERIAL

其他功能：

*   glDepthMask
*   glShadeModel
*   glDepthFunc

这是设置相机视图的代码：

```
void update_view(player_data_t *plyr, scalar_t dt) {
    point_t view_pt;
    vector_t view_dir, up_dir, vel_dir, view_vec;
    scalar_t ycoord;
    scalar_t course_angle;
    vector_t axis;
    matrixgl_t rot_mat;
    vector_t y_vec;
    vector_t mz_vec;
    vector_t vel_proj;
    quaternion_t rot_quat;
    scalar_t speed;
    vector_t vel_cpy;
    scalar_t time_constant_mult;

    vel_cpy = plyr->vel;
    speed = normalize_vector(&vel_cpy);

    time_constant_mult =
            1.0
                    / min( 1.0,
                            max( 0.0,
                                    ( speed - NO_INTERPOLATION_SPEED ) /
                                    ( BASELINE_INTERPOLATION_SPEED - NO_INTERPOLATION_SPEED )));

    up_dir = make_vector(0, 1, 0);

    vel_dir = plyr->vel;
    normalize_vector(&vel_dir);

    course_angle = get_course_angle();

    switch (plyr->view.mode) {
    case TUXEYE: {
        .
.
.
        break;
    }
    case BEHIND: {
        /* Camera-on-a-string mode */

        /* Construct vector from player to camera */
        view_vec = make_vector(0, sin(ANGLES_TO_RADIANS(
                course_angle -
                CAMERA_ANGLE_ABOVE_SLOPE +
                PLAYER_ANGLE_IN_CAMERA )), cos(ANGLES_TO_RADIANS(
                course_angle -
                CAMERA_ANGLE_ABOVE_SLOPE +
                PLAYER_ANGLE_IN_CAMERA )));

        view_vec = scale_vector(CAMERA_DISTANCE, view_vec);

        y_vec = make_vector(0.0, 1.0, 0.0);
        mz_vec = make_vector(0.0, 0.0, -1.0);
        vel_proj = project_into_plane(y_vec, vel_dir);

        normalize_vector(&vel_proj);

        /* Rotate view_vec so that it places the camera behind player */
        rot_quat = make_rotation_quaternion(mz_vec, vel_proj);

        view_vec = rotate_vector(rot_quat, view_vec);

        /* Construct view point */
        view_pt = move_point(plyr->pos, view_vec);

        /* Make sure view point is above terrain */
        ycoord = find_y_coord(view_pt.x, view_pt.z);

        if (view_pt.y < ycoord + MIN_CAMERA_HEIGHT) {
            view_pt.y = ycoord + MIN_CAMERA_HEIGHT;
        }

        /* Interpolate view point */
        if (plyr->view.initialized) {
            /* Interpolate twice to get a second-order filter */
            int i;
            for (i = 0; i < 2; i++) {
                view_pt = interpolate_view_pos(plyr->pos, plyr->pos,
                        MAX_CAMERA_PITCH, plyr->view.pos, view_pt,
                        CAMERA_DISTANCE, dt,
                        BEHIND_ORBIT_TIME_CONSTANT * time_constant_mult);
            }
        }

        /* Make sure interpolated view point is above terrain */
        ycoord = find_y_coord(view_pt.x, view_pt.z);

        if (view_pt.y < ycoord + ABSOLUTE_MIN_CAMERA_HEIGHT) {
            view_pt.y = ycoord + ABSOLUTE_MIN_CAMERA_HEIGHT;
        }

        /* Construct view direction */
        view_vec = subtract_points(view_pt, plyr->pos);

        axis = cross_product(y_vec, view_vec);
        normalize_vector(&axis);

        make_rotation_about_vector_matrix(rot_mat, axis,
                PLAYER_ANGLE_IN_CAMERA);
        view_dir = scale_vector(-1.0, transform_vector(rot_mat, view_vec));

        /* Interpolate orientation of camera */
        if (plyr->view.initialized) {
            /* Interpolate twice to get a second-order filter */
            int i;
            for (i = 0; i < 2; i++) {
                interpolate_view_frame(plyr->view.up, plyr->view.dir, &up_dir,
                        &view_dir, dt, BEHIND_ORIENT_TIME_CONSTANT);
                up_dir = make_vector(0.0, 1.0, 0.0);
            }
        }

        break;
    }

    case FOLLOW: {
        /* Camera follows player (above and behind) */

        up_dir = make_vector(0, 1, 0);

        /* Construct vector from player to camera */
        view_vec = make_vector(0, sin(ANGLES_TO_RADIANS(
                course_angle -
                CAMERA_ANGLE_ABOVE_SLOPE +
                PLAYER_ANGLE_IN_CAMERA )), cos(ANGLES_TO_RADIANS(
                course_angle -
                CAMERA_ANGLE_ABOVE_SLOPE +
                PLAYER_ANGLE_IN_CAMERA )));
        view_vec = scale_vector(CAMERA_DISTANCE, view_vec);

        y_vec = make_vector(0.0, 1.0, 0.0);
        mz_vec = make_vector(0.0, 0.0, -1.0);
        vel_proj = project_into_plane(y_vec, vel_dir);

        normalize_vector(&vel_proj);

        /* Rotate view_vec so that it places the camera behind player */
        rot_quat = make_rotation_quaternion(mz_vec, vel_proj);

        view_vec = rotate_vector(rot_quat, view_vec);

        /* Construct view point */
        view_pt = move_point(plyr->pos, view_vec);

        /* Make sure view point is above terrain */
        ycoord = find_y_coord(view_pt.x, view_pt.z);

        if (view_pt.y < ycoord + MIN_CAMERA_HEIGHT) {
            view_pt.y = ycoord + MIN_CAMERA_HEIGHT;
        }

        /* Interpolate view point */
        if (plyr->view.initialized) {
            /* Interpolate twice to get a second-order filter */
            int i;
            for (i = 0; i < 2; i++) {
                view_pt = interpolate_view_pos(plyr->view.plyr_pos, plyr->pos,
                        MAX_CAMERA_PITCH, plyr->view.pos, view_pt,
                        CAMERA_DISTANCE, dt,
                        FOLLOW_ORBIT_TIME_CONSTANT * time_constant_mult);
            }
        }

        /* Make sure interpolate view point is above terrain */
        ycoord = find_y_coord(view_pt.x, view_pt.z);

        if (view_pt.y < ycoord + ABSOLUTE_MIN_CAMERA_HEIGHT) {
            view_pt.y = ycoord + ABSOLUTE_MIN_CAMERA_HEIGHT;
        }

        /* Construct view direction */
        view_vec = subtract_points(view_pt, plyr->pos);

        axis = cross_product(y_vec, view_vec);
        normalize_vector(&axis);

        make_rotation_about_vector_matrix(rot_mat, axis,
                PLAYER_ANGLE_IN_CAMERA);
        view_dir = scale_vector(-1.0, transform_vector(rot_mat, view_vec));

        /* Interpolate orientation of camera */
        if (plyr->view.initialized) {
            /* Interpolate twice to get a second-order filter */
            int i;
            for (i = 0; i < 2; i++) {
                interpolate_view_frame(plyr->view.up, plyr->view.dir, &up_dir,
                        &view_dir, dt, FOLLOW_ORIENT_TIME_CONSTANT);
                up_dir = make_vector(0.0, 1.0, 0.0);
            }
        }

        break;
    }

    case ABOVE: {
        /* Camera always uphill of player */

        up_dir = make_vector(0, 1, 0);

        /* Construct vector from player to camera */
        view_vec = make_vector(0, sin(ANGLES_TO_RADIANS(
                course_angle -
                CAMERA_ANGLE_ABOVE_SLOPE+
                PLAYER_ANGLE_IN_CAMERA )), cos(ANGLES_TO_RADIANS(
                course_angle -
                CAMERA_ANGLE_ABOVE_SLOPE+
                PLAYER_ANGLE_IN_CAMERA )));
        view_vec = scale_vector(CAMERA_DISTANCE, view_vec);

        /* Construct view point */
        view_pt = move_point(plyr->pos, view_vec);

        /* Make sure view point is above terrain */
        ycoord = find_y_coord(view_pt.x, view_pt.z);

        if (view_pt.y < ycoord + MIN_CAMERA_HEIGHT) {
            view_pt.y = ycoord + MIN_CAMERA_HEIGHT;
        }

        /* Construct view direction */
        view_vec = subtract_points(view_pt, plyr->pos);

        make_rotation_matrix(rot_mat, PLAYER_ANGLE_IN_CAMERA, 'x');
        view_dir = scale_vector(-1.0, transform_vector(rot_mat, view_vec));

        break;
    }

    case BIRDEYE: {
        /* Camera always uphill of player */

        up_dir = make_vector(0, 1, 0);

        /* Construct vector from player to camera */
        /*sin(ANGLES_TO_RADIANS(
                                        course_angle -
                                        CAMERA_ANGLE_ABOVE_SLOPE+
                                        PLAYER_ANGLE_IN_CAMERA ))
                                        */
        /*cos(ANGLES_TO_RADIANS(
                                                course_angle -
                                                CAMERA_ANGLE_ABOVE_SLOPE+
                                                PLAYER_ANGLE_IN_CAMERA ))
                                                */
        view_vec = make_vector(0, 3, -0.5);
        view_vec = scale_vector(CAMERA_DISTANCE, view_vec);

        /* Construct view point */
        view_pt = move_point(plyr->pos, view_vec);

        /* Make sure view point is above terrain */
        ycoord = find_y_coord(view_pt.x, view_pt.z);

        if (view_pt.y < ycoord + MIN_CAMERA_HEIGHT) {
            view_pt.y = ycoord + MIN_CAMERA_HEIGHT;
        }

        /* Construct view direction */
        view_vec = subtract_points(view_pt, plyr->pos);

        make_rotation_matrix(rot_mat, PLAYER_ANGLE_IN_CAMERA, 'x');
        view_dir = scale_vector(-1.0, transform_vector(rot_mat, view_vec));

        break;
    }
    default:
        code_not_reached();
        break;
    }

    /* Create view matrix */
    plyr->view.pos = view_pt;
    plyr->view.dir = view_dir;
    plyr->view.up = up_dir;
    plyr->view.plyr_pos = plyr->pos;
    plyr->view.initialized = True;

    setup_view_matrix(plyr);
} 
```

## 更新

解决了！，问题在于使用 OpenGL 而不是 OpenGL ES。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:21:28.370

Android 使用 OpenGL ES，它不支持 glBegin() 和 glEnd()，所以你的代码不会绘制任何东西。您需要使用顶点缓冲区对象来绘制对象。

VBO 的经典指南在这里：[http ://nehe.gamedev.net/data/lessons/lesson.asp?lesson=45](http://nehe.gamedev.net/data/lessons/lesson.asp?lesson=45)

但您可能会发现谷歌搜索“Android OpenGL 教程”会提供一些更简单的指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T21:07:07.583

好吧，如果您想在相机前面显示一些东西，那么所有相机设置代码都无关紧要；此外，您需要确保它不适用于您的三角形，也就是说，您从矩阵堆栈为空的地方调用 drawTriangle()。你现在从哪里称呼它？我去 GitHub 看 TuxRider 迷路了，不好意思。

之后，如果您在屏幕坐标中渲染一个三角形，则可能值得考虑它们的范围从 -1 到 +1 - 您在 5 处的 50 x 50 几何图形太大而且太远。

祝你好运

# parameters - 如何在 VS Visual Studio 2010 Basic 的报表查看器中加载带有参数的 .rdlc 报表？

> ID：15703527
> 
> 赞同：1
> 
> 时间：2013-03-29T12:45:49.327
> 
> 标签：parameters, report, rdlc

我不知道是什么问题，我的笔记中有相同的代码。报表查看器不会加载带有参数的 .rdlc 报表。我有相同的对象名称和参数名称。我在报告查看器的小箭头链接中选择了 .rdlc 报告。所以请放心，它应该将 .rdlc 与报告查看器连接起来，我有以下代码。

导入 Microsoft.Reporting.WinForms

公共类 PrintSingleInfo

```
Private Sub PrintSingleInfo_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Dim pn, bn, ad, cn, sr, lt, lb, ls, ln, dd, lp, pc, tb, dp, tp, dr, ir, mp, pt As New ReportParameter
    pn = New ReportParameter("PNPANoPar", MemParkInfoSysForm.PNPANoTextBox.Text)
    bn = New ReportParameter("BuyerNamePar", MemParkInfoSysForm.BuyerNameTextBox.Text)
    ad = New ReportParameter("AddressPar", MemParkInfoSysForm.AddressTextBox.Text)
    cn = New ReportParameter("ContactNoPar", MemParkInfoSysForm.ContactTextBox.Text)
    sr = New ReportParameter("SalesRepPar", MemParkInfoSysForm.SalesRepTextBox.Text)
    lt = New ReportParameter("TypePar", MemParkInfoSysForm.TypeCBO.Text)
    ls = New ReportParameter("SectionPar", MemParkInfoSysForm.SectionTextBox.Text)
    lb = New ReportParameter("BlockPar", MemParkInfoSysForm.BlockTextBox.Text)
    ln = New ReportParameter("LotNoPar", MemParkInfoSysForm.LotNoTextBox.Text)
    dd = New ReportParameter("DueDatePar", MemParkInfoSysForm.DueUpDown.Value)
    lp = New ReportParameter("LotPricePar", MemParkInfoSysForm.LBLPrice.Text)
    pc = New ReportParameter("PerpetualCarePar", MemParkInfoSysForm.LBLPerpCare.Text)
    tp = New ReportParameter("TotalLotPricePar", MemParkInfoSysForm.LBLTotLotPrice.Text)
    dp = New ReportParameter("DownPaymentPar", MemParkInfoSysForm.DownpaymentTextBox.Text)
    tb = New ReportParameter("LotBalancePar", MemParkInfoSysForm.LBLLotBal.Text)
    pt = New ReportParameter("PaymentTermsPar", MemParkInfoSysForm.PaymentTermsCBO.Text)
    ir = New ReportParameter("InterestRatePar", MemParkInfoSysForm.LBLInterest.Text)
    dr = New ReportParameter("DiscountRatePar", MemParkInfoSysForm.LBLDiscount.Text)
    mp = New ReportParameter("MonthlyPaymentPar", MemParkInfoSysForm.LBLMonthly.Text)

    ReportViewer1.LocalReport.SetParameters(pn)
    ReportViewer1.LocalReport.SetParameters(bn)
    ReportViewer1.LocalReport.SetParameters(ad)
    ReportViewer1.LocalReport.SetParameters(cn)
    ReportViewer1.LocalReport.SetParameters(sr)
    ReportViewer1.LocalReport.SetParameters(lt)
    ReportViewer1.LocalReport.SetParameters(ls)
    ReportViewer1.LocalReport.SetParameters(lb)
    ReportViewer1.LocalReport.SetParameters(ln)
    ReportViewer1.LocalReport.SetParameters(dd)
    ReportViewer1.LocalReport.SetParameters(lp)
    ReportViewer1.LocalReport.SetParameters(pc)
    ReportViewer1.LocalReport.SetParameters(tp)
    ReportViewer1.LocalReport.SetParameters(dp)
    ReportViewer1.LocalReport.SetParameters(tb)
    ReportViewer1.LocalReport.SetParameters(pt)
    ReportViewer1.LocalReport.SetParameters(ir)
    ReportViewer1.LocalReport.SetParameters(dr)
    ReportViewer1.LocalReport.SetParameters(mp)
    Me.ReportViewer1.RefreshReport()
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:18:15.660

尝试使用报告参数列表，而不是您的方法。

创建列表，将每个报表参数对象添加到其中，然后将列表传递给

```
ReportViewer1.LocalReport.SetParameters() 
```

希望有帮助！

# java - 在标签片段中设置 ViewPager

> ID：15703532
> 
> 赞同：2
> 
> 时间：2013-03-29T12:45:59.653
> 
> 标签：java, android, android-fragments, android-viewpager, android-tabs

我在 android ActionBar 选项卡中设置 ViewPager 时遇到问题。我是开发应用程序的新手，并尝试通过反复试验使一切正常工作，但这非常困难。

**我想要什么**
两个操作栏选项卡，每个选项卡都包含一个带有一些片段的 ViewPager。

**到目前为止我做了什么**
MainActivity：

```
public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // load ActionBar
        ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        actionBar.setCustomView(R.layout.actionbar_view);
        actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM);
        actionBar.setDisplayShowHomeEnabled(true);

        tabA = actionBar.newTab().setText("Tab A");
        tabB = actionBar.newTab().setText("Tab B");
        Fragment fragmentA = new FragmentA();
        Fragment fragmentB = new FragmentB();
        tabA.setTabListener(new MyTabListener(fragmentA));
        tabB.setTabListener(new MyTabListener(fragmentB));
        actionBar.addTab(tabA);
        actionBar.addTab(tabB);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    class MyTabListener implements ActionBar.TabListener {
        public Fragment frag;

        public MyTabListener(Fragment frag) {
            this.frag = frag;
        }

        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            // on tab reselected
        }

        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            // need to create own FragmentTransaction cause ActionBar doesn'T support 'android.support.v4'
            android.support.v4.app.FragmentTransaction fft = mActivity.getSupportFragmentManager().beginTransaction();
            fft.replace(R.id.main_fragment_container, frag);
            fft.commit();
        }

        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            // need to create own FragmentTransaction cause ActionBar doesn'T support 'android.support.v4'
            android.support.v4.app.FragmentTransaction fft = mActivity.getSupportFragmentManager().beginTransaction();
            fft.remove(frag);
            fft.commit();
        }
    }

} 
```

片段A类

```
public class FragmentA extends Fragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
        return inflater.inflate(R.layout.layout_A, container, false);
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        ViewPager mViewPager = (ViewPager) view.findViewById(R.id.tabA_pager);
        mViewPager.setAdapter(new MyPagerAdapter(getChildFragmentManager()));
    }
} 
```

MyPagerAdapter.class

```
public class MyPagerAdapter extends FragmentPagerAdapter {

    public MyPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        Fragment f = new Fragment();
        switch (position) {
        case 0:
            f = LayoutOne.newInstance(null);
            break;
        case 1:
            f = LayoutTwo.newInstance(null);
            break;
        case 2:
            f = LayoutThree.newInstance(null);
            break;
        }
        return f;
    }

    @Override
    public int getCount() {
        return 3;
    }
} 
```

LayoutOne.class

```
public class LayoutOne extends Fragment {

    public static Fragment newInstance(Context context) {
        LayoutOne f = new LayoutOne();
        return f;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
        TextView root = (TextView) inflater.inflate(R.layout.layout_one, null);
        return root;
    }
} 
```

**有什么问题**
应用程序启动时没有问题，但选项卡 A 的片段加载似乎搞砸了，因为没有显示测试文本。当我切换到选项卡 B 然后回到选项卡 A 时，我得到 FC，说：java.lang.IllegalStateException: Activity 已被破坏......在 FragmentA.onViewCreated 所以我猜 ViewPager 适配器有问题。

我进行了一些搜索，但找不到包含此显式布局的工作版本。6个月前有人发布了[类似的问题](https://stackoverflow.com/questions/12398525/actionbarsherlock-tabbed-fragments-viewpager-insider-a-fragment)，但没有解决方案。

我的设置有什么问题？

# c# - C# 在 MaskedTextBox 上使用 TextBox 进行 IP 输入。掩蔽问题

> ID：15703534
> 
> 赞同：1
> 
> 时间：2013-03-29T12:46:02.743
> 
> 标签：c#

我在 StackOverflow 上阅读的几篇文章表明要使用`TextBox`over `MaskedTextBox`，因此我使用了`TextBox`从我的用户那里捕获 IP。

我从 StackOverflow 中找到了一个很好的正则表达式模式来验证 IP 是否有效

`string pattern = @"^([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(\.([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}$";`

它在有效时生成一个真正的布尔值。但是，使用 a`TextBox`我想知道如何在其中添加掩码，`TextBox`以便不仅默认文本为 0.0.0.0，而且在框中键入 IP 时，它会将句点标记保留在适当的位置，因此用户不需要输入它们，以便它们唯一的输入是数字。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:50:03.267

我曾经不得不做一些类似的事情来将 IPv4 作为用户的输入。

我用过这个免费的控件。

[IP 地址控制](http://code.google.com/p/ipaddresscontrollib/)

与该控件相关的文章：http: [//www.codeproject.com/Articles/9352/AC-IP-Address-Control](http://www.codeproject.com/Articles/9352/A-C-IP-Address-Control)

* * *

好像是一个轻量级的控件，没测试过，在google上找到的！ [http://sanity-free.org/127/an_ipaddress_control_the_win32_sysipaddress32_control_in_csharp.html](http://sanity-free.org/127/an_ipaddress_control_the_win32_sysipaddress32_control_in_csharp.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-12T18:09:36.680

我正在寻找非常相似的东西。我发现在将更简单的正则表达式与 IPAddress.TryParse 结合使用时，我可以在文本框中使用已更改的文本和验证事件处理程序来确保输入了有效的 IP4。在以下示例中，文本框名称为 tbIPInput。一些字体装饰以帮助识别执行期间发生的事情。验证部分防止一个人退出文本框，直到输入一个有效的 IP。

```
private void tbIPInput_TextChanged(object sender, EventArgs e)
    {
        Regex regPattern = new Regex(@"\d+\.\d+\.\d+\.\d+");
        if (regPattern.IsMatch(tbIPInput.Text) && IPAddress.TryParse(tbIPInput.Text, out IPAddress address))
        {
            //Valid IP is detected
            tbIPInput.ForeColor = Color.Green;
            tbIPInput.Font = new Font(tbIPInput.Font, FontStyle.Regular);

        }
        else
        {
            //Invalid IP entered so far
            tbIPInput.ForeColor = Color.Red;
            tbIPInput.Font = new Font(tbIPInput.Font, FontStyle.Italic);
        }

    }

    private void tbIPInput_Validating(object sender, CancelEventArgs e)
    {
        Regex regPattern = new Regex(@"\d+\.\d+\.\d+\.\d+");
        if (regPattern.IsMatch(tbIPInput.Text) && IPAddress.TryParse(tbIPInput.Text, out IPAddress address))
        {
            //Valid IP is detected
            e.Cancel = false;
        }
        else
        {
            //Invalid IP entered so far do not allow focus to change
            e.Cancel = true;
        }
    } 
```

# javascript - 意外的令牌 else javascript

> ID：15703537
> 
> 赞同：0
> 
> 时间：2013-03-29T12:46:27.083
> 
> 标签：javascript, google-chrome

所有其他语句都会给出意外的令牌错误

```
var men = 50;
alert("You are a Spartan warrior about to be fighting in the Trojan War, you get onto             your ship and set sail with a fleet of other ships but your ship breaks away from the others in a horrible storm! You have 50 men on your ship, do not lose more than 40 of them, or else.");
var start = confirm("are you ready to start?");
if (start = true) {
   alert("your platoon of Spartan soldiers is on a ship, headed for Troy");
}
else {
   alert("You failed in your mission and are executed in Sparta the next day (refresh the page)")
};
var hydra  = prompt("you encounter a large hydra on your journey to Troy, do you sail past it, or fight it?(fight or flee?)");
if (hydra = "fight") {
   alert("You kill the Hydra, but it has killed 8 of your men");
};
else {
   alert("You go around the Hydra, but it snatches up 6 of your men and starts to follow your ship!");
};
if (hydra = "fight") {
   men = 42
}
else {
   men = 44; 
};
console.log(men); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T12:48:57.677

第一件事（不是语法错误，但无论如何都是错误的）：比较 using`==`而不是`=`.

您的语法错误是您在`;`if 块之后使用 - 删除那些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T12:48:45.913

意外的令牌错误是因为您结束了其他的`};`但应该只是`}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T12:48:29.367

替换 `if (start = true)`为 `if (start == true)`。但`};`应该只是`}`

# c# - C# 文件导出问题

> ID：15703539
> 
> 赞同：4
> 
> 时间：2013-03-29T12:46:37.363
> 
> 标签：c#, asp.net, httpwebresponse

我使用此代码导出/打开文件 (pdf/xls/doc)。

```
Response.Clear();
Response.Buffer = true;

Response.ContentEncoding = System.Text.Encoding.UTF8;
Response.Charset = "UTF-8";
Response.ContentType = mimeType;

Response.AppendHeader("content-disposition", "inline; filename=" + fileName + "." + extension);

Response.BinaryWrite(bytes);
Response.End(); 
```

当我用 Word 打开一个 doc 文件并单击导出到 xls 或 pdf 时，在我关闭 Word 之前什么都没有发生。关闭 Word 后，我也可以打开 xls 和 pdf。

当我用 Excel 打开 xls 时存在这个问题。

是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:49:09.890

原因是因为 Word 和其他类似 Word 的程序会锁定打开的文件以避免再次双重打开。因此无法从您的应用程序再次打开锁定的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T13:21:11.643

根据您使用的单词版本，我会说问题来自`inline` `content-disposition`

在 Word 的最新版本中（见于 Word 2010），它会尝试以`WEBDAV`when 模式打开文档`inline`，这可能会导致问题（尝试导出/打印文档时锁定、丢失 cookie 或凭据）

您可以查看您的网络流量以查看是否涉及此 WEBDAV 行为，并查看是否`content-disposition` `attachment`解决了问题。

希望这会有所帮助

# c++ - 我可以更改损坏的 C++ DLL 导出符号吗？（二进制兼容但源不兼容）

> ID：15703546
> 
> 赞同：2
> 
> 时间：2013-03-29T12:47:02.083
> 
> 标签：c++, visual-c++, dll, dllexport, name-mangling

我们的 C++ 项目（仍然）使用`Treat wchar_t as Built-in: No (/Zc:wchar_t-)`在 VS6 上编译时的选项。

这导致`wchar_t`只是`unsigned short`( `WORD`) 的 typedef。

我们想改变这一点，以便将`wchar_t`其作为适当的内置类型处理——这将大大简化（现代）库的集成。

问题是，我们确实链接到了一些我们*无法*重新编译的 DLL，这些 DLL 公开了它们的字符串，`unsigned short*`并且它们的头文件使用`wchar_t*`. 当 wchar_t 是内置类型时，这将导致链接器错误，因为显然导出符号不同。

更改标头需要添加一种转换层——我当然不想将转换添加到调用这些标头中的类的所有代码中。

是否可以修复 DLL，以便它们的导出符号“假装”导出内置`wchar_t`而不是`WORD`? 毕竟这两种类型在 VC++ 中是 100% 二进制兼容的。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:12:03.253

很好，它们是二进制兼容的。

您可能遇到的唯一一堵墙是导出函数的名称修改。如果您无法更改的 DLL 使用其修饰的 C++ 名称导出这些函数，那么当客户端找不到导出的名称时，您将在运行时获得失败鲸鱼。当程序员不使用`extern "C"`或不使用 .def 文件重命名导出时，就会发生这种情况。否则使用 Dumpbin.exe /exports 很容易看到。解决这个问题很痛苦，您需要修改 DLL 标头以将 wchar_t 更改为 WORD，宏可以做到这一点，并编写采用 wchar_t 并通过强制转换调用 WORD 函数的小适配器函数。

如果这些是导出的 C++ 类，那么你有一个更大的问题。您需要为这些 DLL 创建一个新的导入库。从您从 Dumpbin.exe /exports 获得的输出开始，为您提供原始名称。并从中创建一个 .def 文件，使用其 foo = bar 选项重命名符号。使用 lib.exe /def 选项创建导入库。创建一个小测试 DLL 以确定您应该如何重命名损坏的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:08:34.747

感谢@HansPassant 的[回答](https://stackoverflow.com/a/15743268/321013)，我能够做到这一点。

完整步骤在这里供参考：

1.  为 DLL 生成导出符号：`dumpbin /EXPORTS ddao35u.dll`
2.  用 wchar_t 替换所有无符号短指针类型：这意味着将`PAG`(for `unsigned short*`) 和`PBG`(for `unsigned short const*`) 替换为 wchar_t string-mangle`PA_W`和`PB_W`
3.  编写一个包含所有符号的新 def 文件，其中带有字符串的函数被替换名称。示例是：

    ```
    LIBRARY ddao35u
    EXPORTS
      ??0CdbBSTR@@QAE@PA_W@Z=??0CdbBSTR@@QAE@PAG@Z  @1   ... replaced
                      ^^^^  =                ^^^
      ??0CdbBookmark@@QAE@ABV0@@Z  @2  ... no strings, no replacement needed
    ... 
    ```

4.  从 def 文件生成导入库：`lib /DEF:ddao35u.def`
5.  从您那里引用这个新`ddao35u.lib`的 wchar_t-native VS 项目链接器选项，而不是原始的 lib 文件。

我将在这里转储我用来执行此操作的整个 perl 脚本函数：

```
sub fixModuleLib {
  my $basename = shift;
  my $dllpath = shift;
  # my $basename = "ddao35u";
  print "\n\n";
  my $cmdExport = "dumpbin /EXPORTS $dllpath";
  print "Running >> $cmdExport << for export symbols ...\n";
  die "Input file $dllpath not found!" unless -f "$dllpath"; 
  my @exports  = qx/$cmdExport/;

  print "Open $basename.def for writing ...\n";
  open(my $defh, ">", "$basename.def") or die "Unable to open basename.def for writing: $!";
  print $defh "LIBRARY $basename"."\n";
  print $defh "EXPORTS"."\n";

  my @expEntries;
  my $usCount = 0;
  foreach (@exports) {
    #           1    0 00002050 ??0CdbBSTR@@QAE@PAG@Z
    my $ws = '\s+';
    my $hnum = '[ABCDEFabcfed0123456789]+';
    if (m/$ws(\d+)$ws$hnum$ws$hnum$ws(\?\S+)/) {
      my $ord = $1;
      my $mangle = $2;
      my $defline;
      # PAG = unsigned short*
      # PBG = unsigned short const*
      # at least two @ signs before parameter list (at least in our case)
      if ($mangle =~ m/(.+@.*@.*)(P[AB]G)(.*)/) { # case sensitive
        my $pre = $1;
        my $uptr = $2;
        my $post = $3;
        # print "$ord\t$pre>>>$uptr<<<$post\n";
        my $wptr = $uptr;
        $wptr =~ s/G/_W/;
        my $wchartMangle = "$pre$wptr$post";
        $defline = "  $wchartMangle=$mangle  \@$ord";
        print "CHANGED: $defline\n";
        $usCount += 1;                 
      } else {
        # line doesn't contain unsigned short ptr
        $defline = "  $mangle  \@$ord";
      }
      push @expEntries, $defline;
    }
  }
  print "There are ".scalar(@expEntries)." export lines and $usCount of them contain an unsigned-short-pointer.\n";
  die "No entries found!" unless $usCount>0;
  print "Writing entries to $basename.def ...\n";
  foreach my $entry (@expEntries) {
    print $defh $entry."\n"; 
  }
  close($defh);

  my $cmdLib = "lib /DEF:$basename.def";
  print "Generate Export Lib from DEF-File: >> $cmdLib << ...\n";
  system($cmdLib); 
} 
```

# r - 在 RStudio 中自动格式化 R 代码

> ID：15703553
> 
> 赞同：90
> 
> 时间：2013-03-29T12:47:28.333
> 
> 标签：r, rstudio, autoformatting

RStudio 中是否有自动格式化代码的可能性？

我找到[了这个](https://stackoverflow.com/questions/3017877/tool-to-auto-format-r-code)，但它没有与 RStudio 连接。

还希望它是可定制的格式。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2016-01-18T13:44:40.127

**更新：2018 年 6 月 22 日**

谢谢@Lorenz@kirill@yuhi 的`styler` [包裹](http://styler.r-lib.org/index.html)。我已经使用了一段时间。安装包后最简单的就是使用

滚动到`Addin --> style active file`

通过界面的自定义选项可以对我们喜欢的样式进行一些控制。

Rstudio 现在可以格式化代码以使其看起来整洁。选择感兴趣的行，然后导航到`Code`>>`Reformat code`或使用键盘快捷键`Ctrl`++ 。`Shift``A`

或者只是运行 style directory 命令来设置目录中所有文件的样式。

```
styler::style_dir() 
```

***update***：这是重新构造代码的好方法，但它会中断`,`向量的元素。对于少数人来说，这是可以的，但是将许多元素传递给向量，这就有点过分了：

```
x <- c(
  "p.G12C",
  "p.F121S",
  "p.P124S",
  "p.P124L",
  "p.E13D",
  "p.E203K",
  "p.Q209P",
  "p.Q209P",
  "p.Q209L"
) 
```

***更新：R-Studio 版本 0.99.893***

R-studio 添加了一项新功能`Addins`。此插件的一部分，现在您可以将@yuhi formatR 添加为插件。与内置的`code >> Refromat code`. 但是，Addin 的缺点是`Reformat R Code`它会为 Rshiny 代码引发错误。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2017-09-02T10:39:32.267

首先`CTRL`+ `A`，然后`CTRL`+ `SHIFT`+ `A`。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2013-03-29T12:48:32.163

转到`Code`菜单并选择

> 重新缩进线

在我的操作系统下，这有快捷键`Ctrl`+ `I`。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2017-12-14T11:04:33.013

包[样式器](http://styler.r-lib.org)可以格式化 R 代码，您可以通过 RStudio 插件访问它，该插件允许格式化活动文件、突出显示的代码、包等。一个显着的特点是它的灵活性，因为根据样式指南的代码转换与指定样式指南是分开完成的。这允许根据任意样式指南进行样式设置。从 1.2.0 版开始，这也适用于插件。

我们实现了[tidyverse 样式指南](http://style.tidyverse.org)，同时在样式方面提供了相当大的灵活性。此外，管道、tidyeval 语法等也得到了正确处理。您可以阅读这篇[博文](https://lorenzwalthert.github.io/stylerpost/)中的介绍。

如果您不想遵循 tidyverse 样式指南，可以查看小插图[“Customizing Styler”](http://styler.r-lib.org/articles/customizing_styler.html)，它描述了如何实现任意样式指南。在这个小插曲中，我将展示如何实现由一条规则组成的样式指南：始终在`{`. 希望有帮助。

披露：我是 styler 的维护者。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2014-11-04T07:22:43.967

```
#use the library "formatR"

install.packages("formatR")

library(formatR)

# tidy_eval("file path")
tidy_eval("C:/Users/PC_name/Desktop/myfile.R") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-03-03T18:07:57.320

添加到已经给出的好答案：您可以将该`styler`包与[shrtcts](https://pkg.garrickadenbuie.com/shrtcts/)包结合使用，以启用[RStudio 仍不正式支持的](https://github.com/rstudio/rstudio/issues/2563)Format **on Save**。

1.  使用`shrtcts::edit_shortcuts()`RStudio 控制台中的命令打开定义自定义快捷方式的文件。

2.  将以下代码粘贴到该文件中（在该`@shortcut`行中设置您的首选键绑定）。

    ```
    #' Format on Save
    #'
    #' @description
    #'   Format Document with styler Package and Save Document.
    #' @interactive
    #' @shortcut Cmd+S
    function() {
      # format only .R and .Rmd files, but save all file types
      file_type <- tools::file_ext(rstudioapi::getActiveDocumentContext()$path)

      if (file_type %in% c("R", "Rmd")) {
        styler:::style_active_file() |>
          capture.output() |>
          invisible()
      }

      rstudioapi::documentSave() |>
        capture.output() |>
        invisible()
    } 
    ```

    此解决方案使用本机管道`|>`，因此需要`R 4.1`. 当然，您可以只在每一行中定义单独的变量，或者 `magrittr`如果您使用早期版本的`R`.

3.  使用`shrtcts::add_rstudio_shortcuts(set_keyboard_shortcuts = TRUE)`RStudio 控制台中的命令添加新的快捷方式及其分配的键绑定。然后重新启动 RStudio。

使用此配置，按下`Cmd+S`将活动`.R`或`.Rmd`文档与`styler`包一起格式化，然后保存格式化的版本。`.md`所有其他类型的文件都无需格式化即可保存，但您可以轻松地使用可以格式化 eg或`.py`files的包来扩展上面的代码。

存在这种方法代码没有*达到*预期效果的情况，例如它不适用于新`Untitled`文件或当前`R`会话繁忙时。

# php - 将 sql 表内容从一个表复制到另一个表 - 有条件

> ID：15703558
> 
> 赞同：0
> 
> 时间：2013-03-29T12:47:46.660
> 
> 标签：php, mysql, sql, join, sql-update

我有 2 个表 `positions` - 其中包含一个名为 ' `tripname`' 的字段 - 其中包含一个名为 ' '`trips`的字段`name`

我使用了一个 csv 文件，从中将数据导入到这两个表中，现在我需要做一些进一步的更新并且有点卡住了。

' `positions`' 表通过添加与 csv 文件中包含的行数一样多的行来更新。一个字段称为 ' `tripname`' （其中包含一个值），另一个字段称为 ' ' （`FK_Trips_ID`添加为 NULL）。

' `trips`' 表只更新了一行（如果它不存在的话），其中包含一个名为“name”的字段和另一个名为“ID”的字段。

这就是我卡住的地方。我需要：

```
Insert into the 'positions.FK_Trips_ID' field the value of the 'trips.ID'
where the 'trips.name' is equal to the 'positions.tripname
- BUT only if 'positions.FK_Trips_ID' is NULL 
```

我找不到此类插入的类似示例，并且想知道是否有善良的灵魂可以为我指明正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:58:30.543

我认为您的意思是根据表上的匹配记录从表中分`UPDATE`列。`FK_Trips_ID``positions``trips`

您可以加入两个表以在数据库上只有一个请求，

```
UPDATE  positions a
        INNER JOIN trips b
            ON a.tripname = b.name
SET     a.FK_Trips_ID = b.ID
WHERE   a.FK_Trips_ID IS NULL 
```

为了更快地执行`UPDATE`语句，列必须是索引以避免执行*全表扫描*，这会导致在大型数据库上执行此操作时变慢。

```
ALTER TABLE positions ADD INDEX (tripname);
ALTER TABLE trips ADD INDEX (name); 
```

# gruntjs - 在 grunt-zip 中包含点文件

> ID：15703561
> 
> 赞同：0
> 
> 时间：2013-03-29T12:47:51.413
> 
> 标签：gruntjs

作为我的 Gruntfile.js 的一部分，我有以下内容：

```
grunt.initConfig({
  pkg: grunt.file.readJSON('package.json'),

  zip: {
    app: {
      files: [
        {
          src: [ '**/*', "!./app/cache/**", '!./app/logs/**' ],
          dest: 'archive.zip',
          dot: true
        }
      ]
    }
  }
});

grunt.loadNpmTasks('grunt-zip'); 
```

但是，当我运行时`grunt zip:app`，生成的 zip 文件中不会包含任何点文件。例如`.travis.yml`存在于源代码树中，但不在 zip 中。

Grunt 认识我，所以我做错了什么并不明显。但我确实想要 zip 中的那些点文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:05:56.403

这是模块中的一个错误；见[https://github.com/twolfson/grunt-zip/issues/10](https://github.com/twolfson/grunt-zip/issues/10)

# php - MYSQL 用 PHP 返回表

> ID：15703563
> 
> 赞同：0
> 
> 时间：2013-03-29T12:47:52.730
> 
> 标签：php, sql

我很困惑这是如何工作的......

我正在尝试将表列名称分配到 php 中的数组中。我正在尝试以与执行任何其他查询相同的方式执行此操作，但它不起作用。请告诉我我做错了什么。

```
$q ="SHOW COLUMNS FROM disp";
$colsq = mysql_query($q);
$c = mysql_fetch_assoc($colsq);
foreach($c['Field'] as $asdf){
    echo $asdf."<br />";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T12:51:58.837

你做错了，试试这个。

```
$q = "SHOW COLUMNS FROM disp";
$colsq = mysql_query($q) or die(mysql_error()); 
while ($row = mysql_fetch_assoc($colsq)) {
     echo $row['Field']."<br/>";
} 
```

**注意：** [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:57:22.733

使用 mysqli 而不是 mysql。试试这个 ：

```
$mysqli = new mysqli($db_host,$db_user,$db_password,$db_name);
if ($mysqli->connect_errno) 
{
   echo "Failed to connect to MySQL:(".$mysqli->connect_errno.")" .$mysqli->connect_error;
}

$q ="SHOW COLUMNS FROM disp";
$res=$mysqli->query($q);

while($data=$res->fetch_assoc())
{
    echo $data['Field']."<br />";
} 
```

# apache - htaccess 删除 .html 之后的所有内容

> ID：15703566
> 
> 赞同：0
> 
> 时间：2013-03-29T12:47:57.017
> 
> 标签：apache, .htaccess, mod-rewrite

我们有几个外部网站链接到我们的网站，但它们的代码格式错误并导致链接出现问题，这使得 Google 认为我们网站上的 404 比我们实际的多。

发生的事情是他们的格式错误的代码在 .html 之后添加了 ASCII 字符，这些字符代表了他们的结束锚标记。

所以，我试图在我的 htaccess 文件中做的是剥离 .html 之后的所有内容并重定向到干净的 .html URL（不会导致无限循环）。

这是即将到来的几个示例...

```
> http://www.site.com/pagename.html&quot;&gt;
> http://www.site.com/pagename.html&lt;/a&gt; 
```

我想将它们重定向到...

```
http://www.site.com/pagename.html 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:50:56.243

您只需要匹配那些在 之后具有*（*`.+`一个或多个字符）的字符并执行重定向。*`.html`*

 *```
RewriteEngine On
# Capture everything before .html into $1 (non-greedy)
# And do a redirection appending only .html onto $1
RewriteRule (.+?)\.html.+$ http://%{HTTP_HOST}/$1.html [L,R=301] 
```

而且由于您正在执行重定向而不是重写，因此您也可以通过以下方式执行此操作`RedirectMatch`：

```
RedirectMatch permanent (.+?)\.html.+$ http://example.com/$1.html 
```*

# linux - Linux 是否有 dyld 的等价物？

> ID：15703569
> 
> 赞同：3
> 
> 时间：2013-03-29T12:48:16.460
> 
> 标签：linux, macos, dynamic-loading

Mac OS X 为动态加载提供了一个有用的库，称为 dyld。在动态加载处理的许多有趣的函数中，有一些函数允许安装回调，当加载或卸载图像时，dyld 将分别调用这些回调，分别由`dlopen`和调用`dlclose`。这些函数分别是`void _dyld_register_func_for_add_image(void (*func)(const struct mach_header* mh, intptr_t vmaddr_slide))`和`void _dyld_register_func_for_remove_image(void (*func)(const struct mach_header* mh, intptr_t vmaddr_slide))`。

我知道 Linux 不可能有一个确切的端口，因为 dyld 函数处理 mach-o 文件，而 Linux 使用 ELF 文件。

那么，是否有相当于 Linux 的 dyld 库。或者，至少，在任何 Linux 库中是否有这两个函数的等价`_dyld_register_func_for_add_image`物`_dyld_register_func_for_remove_image`？或者我是否必须自己实现这两个版本，这并不难，但我必须找到一种方法来制作`dlopen`和`dlclose`调用回调函数，只要它们被调用。

**编辑**

为了让事情更清楚，我需要创建一个具有回调函数的库，只要外部库由`dlopen`. 我的回调函数必须对任何动态加载的库执行一些操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:51:52.540

是的，它被称为[dlopen(3)](http://man7.org/linux/man-pages/man3/dlopen.3.html)使用 `-ldl`标准库

更确切地说：

*   使用标志编译插件的源代码`-fPIC`以获取与位置无关的代码目标文件`*.pic.o`
*   `gcc -shared`通过链接你的文件来制作一个共享库插件`*.pic.o`（你也可以链接另一个共享库）。
*   使用[GCC 函数属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)`constructor`，尤其是`destructor`函数（或具有显式构造函数和析构函数的静态 C++ 数据，因此得名）。的函数在你的插件运行期间被`__attribute__((constructor))`调用`dlopen`，那些在你的插件中的函数在你的插件运行期间`__attribute__((destructor))`被调用`dlclose`
*   `-rdynamic`一旦插件调用主程序中的某些功能，将主程序与属性链接是有用的和需要的。
*   不要忘记声明`extern "C"`你的 C++ 插件函数（程序需要）
*   `dlsym`在您的主程序中使用以获取插件内的函数或数据地址。

确实没有`dlopen`类似的钩子`_dyld_register_func_for_add_image`。您可能想要使用构造函数和/或[dl_iterate_phdr(3)](http://man7.org/linux/man-pages/man3/dl_iterate_phdr.3.html)来模仿它。

如果您可以更改插件（您的共享对象`dlopen`），您可以在里面玩构造函数技巧来模仿这样的钩子。否则，使用一些自己的约定（例如，具有`module_start`函数的插件会`module_start`在之后调用该函数`dlopen`等......）。

一些库正在包装`dlopen`成更高级别的东西。例如 Qt 有[QPluginLoader](http://qt-project.org/doc/qt-5.0/qtcore/qpluginloader.html) & [QLibrary](http://qt-project.org/doc/qt-5.0/qtcore/qlibrary.html)等...

还有[LD_PRELOAD 技巧](https://stackoverflow.com/a/426260/841108)（也许你可以通过这样的技巧重新定义你自己的`dlopen`&`dlclose`并让你修改过的函数来做钩子）。`ifunc` [功能属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)也可能是相关的。

而且由于[Gnu Libc](http://www.gnu.org/software/libc/)是[免费软件](http://en.wikipedia.org/wiki/Free_software)，它提供了`dlopen`- 还有[MUSL Libc](http://musl-libc.org/)，您可以对其进行修补以满足您的需要。[dladdr(3)](http://man7.org/linux/man-pages/man3/dladdr.3.html)也很有用！

### 附加物

如果您正在为某些 Objective-C 创建自己的运行时，您应该清楚使用该运行时的 Objective-C 编译器的约定，并且您可能可以拥有自己的模块加载器，而不是重载`dlopen`...

# java - 错误：在包 android 中找不到属性“showAsAction”的资源标识符

> ID：15703570
> 
> 赞同：5
> 
> 时间：2013-03-29T12:48:17.083
> 
> 标签：java, android, android-xml, android-menu

我一直在做一个 Android 项目，遇到了一个我很长一段时间都无法解决的错误。这是说的错误

```
error:no resource identifier found for attribute"showAsAction" 
```

包装内`android`

并且错误在以下文件中`login_.xml`

```
<item
    android:id="@+id/action_settings"
    android:orderInCategory="100"
    android:showAsAction="never"
    android:title="@string/action_settings"/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T14:50:55.363

此属性在 API 级别 11 中引入。在 Manifest 文件中检查应用的最低版本和目标版本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-20T10:35:40.983

api 11 中引入了“ShowAsAction”属性。在 Manifest 文件中更改应用程序的 minSdkVersion。

如果你想将它用于低于 11 的 api，那么你必须使用 android 支持库“android.support.v4.app”。

导入支持库后，您必须在 login.xml 文件中进行一些更改。例如，将“ **android:showAsAtion 属性**”替换为“ **yourapp:showAsAction** ”并以这种方式在标题中定义“yourapp”。

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:yourapp="http://schemas.android.com/apk/res-auto" >
<item
    android:id="@+id/action_settings"
    android:orderInCategory="100"
    yourapp:showAsAction="never"
    android:title="@string/action_settings"/>
</menu> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-08-18T16:31:24.800

只需从 xml 文件中删除 android:showAsAction

# .net - 如何从 NUnit 中继承的测试名称中排除类名

> ID：15703585
> 
> 赞同：4
> 
> 时间：2013-03-29T12:49:32.080
> 
> 标签：.net, testing, inheritance, nunit

我有一个带有测试用例（方法）的基类。此外，我还有另一个从基类继承的类，其中包含一些重载的测试用例（方法）。问题是继承的测试用例的名称（在 NUnit 的解释中）包含基类的名称。是否有能力从继承的测试用例的名称中排除基类名称并使其看起来与重载的测试用例相同。

例如：

childClass 中的继承方法：

```
Namespace.parentClass.childClass.name 
```

childClass 中的重载方法：

```
Namespace.childClass.name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-13T10:02:29.897

您可以从基类中的测试用例中删除“测试用例”属性，并将测试用例方法添加到仅调用基类中的方法的子类中。即子类显式声明测试本身，但将实现推迟到基类。

# jquery - 打开网站时加载 jQuery Mobile 面板

> ID：15703589
> 
> 赞同：0
> 
> 时间：2013-03-29T12:49:49.607
> 
> 标签：jquery, mobile, panel, onload

jQuery Mobile 最近在 1.3.0 中推出了一个新的“面板”功能，我需要在页面加载时立即打开它。

打开“面板”的链接是

```
<a href="#" class="jqm-navmenu-link" data-icon="bars" data-iconpos="notext">Navigation</a> 
```

面板本身的代码是......

```
<div data-role="panel" class="jqm-nav-panel jqm-navmenu-panel" data-position="left" data-display="reveal" data-theme="c">
    <ul data-role="listview" data-theme="d" data-divider-theme="d" data-icon="false" data-global-nav="docs" class="jqm-list">
        <li data-role="list-divider">jQuery Mobile Demos</li>
        <li><a href="../">Home</a></li>
        <li><a href="intro/">Introduction</a></li>
        <li><a href="examples/">Demo Showcase</a></li>
        <li><a href="faq/">Questions & Answers</a></li>
        <li><a href="intro/rwd.php">Going Responsive</a></li>
        <li data-role="list-divider">Widget reference</li>
    </ul>
</div><!-- /panel --> 
```

我不确定这是如何实现的，但我将不胜感激任何帮助/

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:12:43.393

找到了答案！对于任何寻找的人，请访问此[Stackoverflow 问题](https://stackoverflow.com/questions/14762831/jquery-mobile-1-3-panel-always-visible)，或者查看[jsFiddle](http://jsfiddle.net/Gajotres/EkbYe/)

或者读这个...

```
$(document).on('pagebeforeshow', '#index', function(){       
$( "#mypanel" ).panel( "open"); }); 
```

# python - 将两个列表组合成字符串

> ID：15703590
> 
> 赞同：12
> 
> 时间：2013-03-29T12:49:54.153
> 
> 标签：python, string, list

实际上，我正在尝试将两个列表合并为一个字符串，但保持它们有序的含义：

```
list1 = [1,2,3,4,5]
list2 = ["one", "two", "three", "four", "five"]

result = "1one2two3three4four5five" 
```

（列表始终具有相同的长度，但内容不同）

目前我正在这样做：

```
result = ""
i = 0

for entry in list1:
    result += entry + list2[i]
    i += 1 
```

我认为必须有一种更 Pythonic 的方式来做到这一点，但我实际上并不知道。

愿你们中的某个人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-29T12:52:15.833

```
list1 = [1,2,3,4,5]
list2 = ["one", "two", "three", "four", "five"]

print ''.join([str(a) + b for a,b in zip(list1,list2)]) 
```

```
1one2two3three4four5five

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T12:52:43.133

```
>>> import itertools
>>> ''.join(map(str, itertools.chain.from_iterable(zip(list1, list2))))
1one2two3three4four5five' 
```

**解释：**

*   `zip(list1, list2)`创建一个列表，其中包含来自两个列表的匹配元素的元组：

    ```
    >>> zip(list1, list2)
    [(1, 'one'), (2, 'two'), (3, 'three'), (4, 'four'), (5, 'five')] 
    ```

*   [`itertools.chain.from_iterable()`](http://docs.python.org/2/library/itertools.html#itertools.chain.from_iterable)展平嵌套列表：

    ```
    >>> list(chain.from_iterable(zip(list1, list2)))
    [1, 'one', 2, 'two', 3, 'three', 4, 'four', 5, 'five'] 
    ```

*   现在我们需要确保只有字符串，所以我们`str()`使用`map()`

*   最终`''.join(...)`将列表项合并为一个没有分隔符的字符串。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-29T12:55:56.617

使用[字符串](http://docs.python.org/2/library/string.html#formatspec)`str.join()`格式化和`zip()`：

```
>>> list1 = [1,2,3,4,5]
>>> list2 = ["one", "two", "three", "four", "five"]

>>> "".join("{0}{1}".format(x,y) for x,y in zip(list1,list2))
'1one2two3three4four5five' 
```

`zip(list1,list2)`返回如下内容： `[(1, 'one'), (2, 'two'), (3, 'three'), (4, 'four'), (5, 'five')]`.

现在对于这个列表的每个项目，我们应用字符串格式，然后使用`str.join()`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-29T12:52:18.420

```
>>> ''.join(str(n)+s for (n,s) in zip(list1, list2))
'1one2two3three4four5five' 
```

这里：

*   `for (n,s) in zip(list1, list2)`迭代`list1`和`list2`（即`1`等`"one"`）中的元素对；
*   `str(n)+s`将每一对转换为字符串（例如`"1one"`）；
*   `''.join(...)`将结果合并为一个字符串。

# ruby-on-rails - Rails PaperClip 拖放多个文件

> ID：15703594
> 
> 赞同：3
> 
> 时间：2013-03-29T12:50:13.590
> 
> 标签：ruby-on-rails, html, paperclip

我正在使用带有 Rails 的 PaperClip 上传文件，它工作正常，但是它想实现一个拖放文件上传，允许上传多个文件。并且每个文件不应超过一定的大小。

**编辑：**

这是我到目前为止所拥有的，我已经创建了 javascript 部分。*但是我迷失了如何创建控制器部分*：

```
var $dropArea = $(".drop-area");

$dropArea.bind({
    dragover: function () {
        $(this).addClass('hover');
        return false;
    },
    dragend: function () {
        $(this).removeClass('hover');
        return false;
    },
    drop: function (e) {
        e = e || window.event;
        e.preventDefault();

        e = e.originalEvent || e;

        var files = (e.files || e.dataTransfer.files);

        var $img = $('<img src="" class="uploadPic" title="" alt="" />');
        for (var i = 0; i < files.length; i++) {
            (function (i) {
                var reader = new FileReader();
                reader.onload = function (event) {
                    var newImg = $img.clone().attr({
                        src: event.target.result,
                        title: (files[i].name),
                        alt: (files[i].name)
                    });

                    $("body").append(newImg);
                };
                reader.readAsDataURL(files[i]);

                var xhr = new XMLHttpRequest();

                var fd = new FormData();

                fd.append(files[i].name, files[i]);

                xhr.open("POST", 'url', true);
                xhr.send(fd);
            })(i);
        }

        return false;
    }
}); 
```

*这是基本的控制器部分*：def create @image = Image.new(params[:image])

```
 if @image.save
        respond_to do |format|
            format.html { redirect_to action: 'index', :notice => 'Image saved'}
            format.js   { redirect_to action: 'index', :notice => 'Image saved'}
            format.xml  { redirect_to action: 'index', :notice => 'Image saved'}
        end
    else
        flash[:notice] = "Error, Please try again"
        redirect_to action: 'new'
    end
end 
```

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-03T19:29:02.547

经过一番研究，我发现可以像这样轻松完成：

```
var dropArea = document.getElementById("droparea"),
    viewArea = document.getElementById("previewarea");

dropArea.addEventListener("drop", function(evt){
    evt.preventDefault();
    evt.stopPropagation();

    previewFiles(evt.dataTransfer.files);
    return false;
}, false);

function previewFiles(files){
    for (i=0; i < files.length; i++){
        if (typeof FileReader != "undefined"){
            var img = document.createElement("img");
            viewArea.appendChild(img);

            var reader = new FileReader();
            reader.onload = (function(theImg){
                return function(evt){
                    theImg.src = evt.target.result;
                }
            }(img));
            reader.readAsDataURL(files[i]);
        }
    }

    uploadFiles(files);
}

function uploadFiles(files){
    var fd = FormData();
    var position = 0;
    var max = files.length;
    if (typeof fd != "undefined"){
        function queue(){
            if (max >= 1 && position <= max - 1){
                fd.append("file", files[position]);
                upload();
            }
        }

        function upload(){
            $.ajax({
              url: '/boxes/hiThere',
              data: fd,
              processData: false,
              contentType: false,
              type: 'POST',
              success: function(data){
                position = position + 1;
                queue();
              }
            });
        }
        queue();
    }
}

dropArea.addEventListener("dragenter", function(evt){
    if (evt){
        this.className = "drag-enter";
    }
    endFn(evt);
}, false);

dropArea.addEventListener("dragleave", function(evt){
    this.className = "";
    endFn(evt);
}, false);

dropArea.addEventListener("dragover", function(evt){
    endFn(evt);
    evt.dataTransfer.dropEffect = 'move';

    return false;
}, false);

function endFn(evt){
    evt.preventDefault();
    evt.stopPropagation();
} 
```

并简单地在 Rails 中添加正常保存，如下所示：

```
def hiThere
  box = Box.new(params[:box])
  box.user_id = current_user.id
  box.file_path = params[:file]

  if box.save!
    set_flash "File saved sucessfully"
  else
    set_flash "Error, please try again"
  end

  respond_to do |format|
    format.js { redirect_to action: :index, :notice => "Done" }
  end
end 
```

# npm - 如何安装 grunt 以及如何使用它构建脚本

> ID：15703598
> 
> 赞同：92
> 
> 时间：2013-03-29T12:50:31.010
> 
> 标签：npm, gruntjs, npm-install

您好我正在尝试在 Windows 7 64 位上安装 Grunt。我已经使用命令安装了 Grunt

```
 npm install -g grunt
 npm install -g grunt-cli 
```

但现在如果我尝试这样做`grunt init`，它会给我一个错误 -

> 找不到有效的 Gruntfile。有关如何配置 grunt 的更多信息，请参阅入门指南： [http](http://gruntjs.com/getting-started) ://gruntjs.com/getting-started 致命错误：无法找到 Gruntfile。

但是当我查看系统上的 grunt 文件夹时，它就在`Gruntfile.js`那里。有人可以指导我如何正确安装这个 grunt 以及如何使用 grunt 编写构建脚本。如果我想使用 Grunt 构建一个脚本，我有一个 HTML 页面和 java 脚本，我该怎么做？

* * *

## 回答 #1

> 赞同：237
> 
> 时间：2013-03-29T22:41:33.850

要在此处设置 GruntJS 构建，步骤如下：

1.  确保您已设置`package.json`或设置新的：

    ```
    npm init 
    ```

2.  将 Grunt CLI 安装为全局：

    ```
    npm install -g grunt-cli 
    ```

3.  在本地项目中安装 Grunt：

    ```
    npm install grunt --save-dev 
    ```

4.  安装您在构建过程中可能需要的任何 Grunt 模块。只是为了这个示例，我将添加 Concat 模块以将文件组合在一起：

    ```
    npm install grunt-contrib-concat --save-dev 
    ```

5.  现在您需要设置您的`Gruntfile.js`哪个将描述您的构建过程。对于这个示例，我只是在文件夹中合并两个 JS 文件`file1.js`并生成：`file2.js``js``app.js`

    ```
    module.exports = function(grunt) {

        // Project configuration.
        grunt.initConfig({
            concat: {
                "options": { "separator": ";" },
                "build": {
                    "src": ["js/file1.js", "js/file2.js"],
                    "dest": "js/app.js"
                }
            }
        });

        // Load required modules
        grunt.loadNpmTasks('grunt-contrib-concat');

        // Task definitions
        grunt.registerTask('default', ['concat']);
    }; 
    ```

6.  现在您将准备好通过以下命令运行构建过程：

    ```
    grunt 
    ```

我希望这能让您了解如何使用 GruntJS 构建。

笔记：

如果您想要基于向导的创建而不是步骤 5 的原始编码，则可以`grunt-init`用于创建。`Gruntfile.js`

为此，请按照以下步骤操作：

```
npm install -g grunt-init
git clone https://github.com/gruntjs/grunt-init-gruntfile.git ~/.grunt-init/gruntfile
grunt-init gruntfile 
```

对于 Windows 用户：如果您使用的是 cmd.exe，则需要更改`~/.grunt-init/gruntfile`为`%USERPROFILE%\.grunt-init\`. PowerShell 将`~`正确识别。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-08-03T10:51:17.743

有时我们需要为 WINDOWS 设置 PATH 变量

> %USERPROFILE%\AppData\Roaming\npm

在那次测试之后`where grunt`

注意：不要忘记关闭命令提示符窗口并重新打开它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-18T05:56:07.093

我遇到了同样的问题，但我通过将 Grunt.js 更改为 Gruntfile.js 解决了这个问题 在 windows cmd 上输入 grunt.cmd 之前检查你的文件名（如果你使用的是 windows）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-08-21T16:44:45.257

您应该将 grunt-cli 安装到项目的 devDependencies 中，然后通过 package.json 中的脚本运行它。这样，从事该项目的其他开发人员都将使用相同版本的 grunt，并且不必在安装过程中进行全局安装。

Install grunt-cli with `npm i -D grunt-cli` instead of installing it globally with `-g`.

```
//package.json

...

"scripts": {
  "build": "grunt"
} 
```

Then use `npm run build` to fire off grunt.

# regex - 将 $1 替换为大写

> ID：15703603
> 
> 赞同：1
> 
> 时间：2013-03-29T12:50:49.517
> 
> 标签：regex, substitution, tuckey-urlrewrite-filter

我正在尝试将基于 Web 的帮助文件从现有的 IIS 服务器移动到 Tomcat 的实例上，因为我们需要将 TomCat 用于特定的应用程序。我知道我可能可以将 tomcat 插入 IIS，但我不想这样做，因为 a）我想学习 tomcat 和 b）我更喜欢更少的开销和更少的软件，而不是更多。

我现在遇到的问题是我们的帮助文件有多种语言版本，主要是英语，因此 URL 包含该语言，例如：[http](http://help.mydomain.com/EN/product-help/) ://help.mydomain.com/EN/product-help/ 。但是，一些指向帮助文件的链接（其中一些我无法控制）是小写的，这意味着我收到的请求是[http://help.mydomain.com/en/product-help/](http://help.mydomain.com/en/product-help/)。我的第一个想法是让所有内容不区分大小写，但在 Apache Tomcat 文档中很清楚，这不能在 Windows 系统上完成，所以我必须找到一个替代方案。

因为由于其他原因，我已经在系统上安装了 urlrewrite，所以我想，为什么不尝试使用一点正则表达式呢？不过似乎并不那么简单......我有 7 种语言，所以我的起始匹配是`<from>/(en|fr|de|csh|es|it|jp|pt)/(.*?)</from>`，我希望结果类似于`<to>/uc($1)/$2</to>`

我试过在谷歌上查找这个，相信我，但我发现的每个解决方案都不适用于 url 重写过滤器。我尝试了以下方法：

```
<from>/(en|fr|de|csh|es|it|jp|pt)/(.*?)</from>
<to>/uc($1)/$2</to>

<from>/uc(en|fr|de|csh|es|it|jp|pt)/(.*?)</from>
<to>/$1/$2</to>

<from>/(en|fr|de|csh|es|it|jp|pt)/(.*?)</from>
<to>/\U$1/$2</to>

<from>/(en|fr|de|csh|es|it|jp|pt)/(.*?)</from>
<to>/${upper:$1}/$2</to> 
```

这些都不起作用（最后一个，${upper:$1} 是 urlrewrite 文档中提到的一个函数，也许只是不清楚它应该如何与反向引用一起使用）

# ios - 需要非常基本的ios帮助

> ID：15703604
> 
> 赞同：-5
> 
> 时间：2013-03-29T12:50:54.127
> 
> 标签：ios

我对这个地方非常陌生，想知道如何实现这一点：

[使 UINavigationBar 透明](https://stackoverflow.com/questions/2315862/iphone-sdk-make-uinavigationbar-transparent)

我在哪里写所有这些代码，或者只是给我一个方法，我会遵循。将非常感谢每一个有用的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:56:35.183

您可以将您引用的代码放在以下位置：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    ...
    [[self navigationController] setNavigationBarHidden:NO animated:YES];
    self.navigationController.navigationBar.tintColor = [UIColor clearColor];
    self.navigationController.navigationBar.barStyle = UIBarStyleBlackTranslucent;
    ...
} 
```

祝你好运。

# php - PHP MySQL 查询其中 x = $variable

> ID：15703608
> 
> 赞同：23
> 
> 时间：2013-03-29T12:50:58.523
> 
> 标签：php, mysql, variables, where

我有这个代码（我知道电子邮件已定义）

```
 <?php
$con=mysqli_connect($host,$user,$pass,$database);
 if (mysqli_connect_errno($con))
{
echo "Failed to connect to MySQL: " . mysqli_connect_error();
}
$result = mysqli_query($con,"SELECT `note` FROM `glogin_users` WHERE email = '.$email.'");

while($row = mysqli_fetch_array($result))
echo $row
?> 
```

在我的 MySQL 数据库中，我有以下设置（表名是 glogin_users） id email note

我尝试从数据库中提取注释文本，然后对其进行回显，但它似乎没有回显任何内容。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-29T12:52:14.740

您现在正在做的是添加`.`字符串而不是连接。它应该是，

```
$result = mysqli_query($con,"SELECT `note` FROM `glogin_users` WHERE email = '".$email."'"); 
```

或者干脆

```
$result = mysqli_query($con,"SELECT `note` FROM `glogin_users` WHERE email = '$email'"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T13:40:56.177

```
$result = mysqli_query($con,"SELECT `note` FROM `glogin_users` WHERE email = '".$email."'");
while($row = mysqli_fetch_array($result))
echo $row['note']; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-29T12:55:06.517

你必须这样做才能回应它：

```
echo $row['note']; 
```

（数据以数组形式出现）

# ios - 在 iOS 中使用手势导航 UIViewController

> ID：15703613
> 
> 赞同：4
> 
> 时间：2013-03-29T12:51:10.387
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, uigesturerecognizer

我在 UINavigationController 中嵌入了几个视图控制器（一些模式，一些推送），并使用滑动手势在它们中导航：

```
// Gesture recognizers
UISwipeGestureRecognizer *downGesture = [[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(dismissButton)];
downGesture.direction = UISwipeGestureRecognizerDirectionDown;
[downGesture setCancelsTouchesInView:NO];
[self.view addGestureRecognizer:downGesture]; 
```

这很好用，但是我希望用户能够以*物理方式拖动*模态呈现的视图控制器，例如，向下和离开屏幕，而不是只用轻弹和动画完成其余的工作，或者直接在屏幕上拖动并捕捉到上一个视图，而不是点击后退按钮。

我已经尝试在视图上使用平移手势来实现这一点，但当然前面的视图控制器在它后面是不可见的，它需要是。这个效果是如何正确实现的？使用视图控制器包含？如果是这样，当将一些视图控制器推入堆栈时，这将如何工作？我正在谈论的导航类型的示例可以在 LetterPress 应用程序中找到。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T17:06:05.833

是的，自定义容器视图是要走的路（iOS 5 及更高版本）。您基本上编写自己的自定义容器，使用内置`childViewControllers`属性来跟踪所有子视图控制器。您可能希望自己的财产，例如`currentChildIndex`，跟踪您当前使用的子控制器：

```
@property (nonatomic) NSInteger currentChildIndex; 
```

您的父控制器可能应该有一些用于非滑动相关导航的推送和弹出方法，例如：

```
- (void)pushChildViewController:(UIViewController *)newChildController
{
    // remove any other children that we've popped off, but are still lingering about

    for (NSInteger index = [self.childViewControllers count] - 1; index > self.currentChildIndex; index--)
    {
        UIViewController *childController = self.childViewControllers[index];
        [childController willMoveToParentViewController:nil];
        [childController.view removeFromSuperview];
        [childController removeFromParentViewController];
    }

    // get reference to the current child controller

    UIViewController *currentChildController = self.childViewControllers[self.currentChildIndex];

    // set new child to be off to the right

    CGRect frame = self.containerView.bounds;
    frame.origin.x += frame.size.width;
    newChildController.view.frame = frame;

    // add the new child

    [self addChildViewController:newChildController];
    [self.containerView addSubview:newChildController.view];
    [newChildController didMoveToParentViewController:self];

    [UIView animateWithDuration:0.5
                     animations:^{
                         CGRect frame = self.containerView.bounds;
                         newChildController.view.frame = frame;
                         frame.origin.x -= frame.size.width;
                         currentChildController.view.frame = frame;
                     }];

    self.currentChildIndex++;
}

- (void)popChildViewController
{
    if (self.currentChildIndex == 0)
        return;

    UIViewController *currentChildController = self.childViewControllers[self.currentChildIndex];
    self.currentChildIndex--;
    UIViewController *previousChildController = self.childViewControllers[self.currentChildIndex];

    CGRect onScreenFrame = self.containerView.bounds;

    CGRect offToTheRightFrame = self.containerView.bounds;
    offToTheRightFrame.origin.x += offToTheRightFrame.size.width;

    [UIView animateWithDuration:0.5
                     animations:^{
                         currentChildController.view.frame = offToTheRightFrame;
                         previousChildController.view.frame = onScreenFrame;
                     }];
} 
```

就个人而言，我为这两种方法定义了一个协议，并确保我的父控制器配置为符合该协议：

```
@protocol ParentControllerDelegate <NSObject>

- (void)pushChildViewController:(UIViewController *)newChildController;
- (void)popChildViewController;

@end

@interface ParentViewController : UIViewController <ParentControllerDelegate>
...
@end 
```

然后，当一个孩子想推一个新的孩子时，它可以这样做：

```
ChildViewController *controller = ... // instantiate and configure your next controller however you want to do that

id<ParentControllerDelegate> parent = (id)self.parentViewController;
NSAssert([parent conformsToProtocol:@protocol(ParentControllerDelegate)], @"Parent must conform to ParentControllerDelegate");

[parent pushChildViewController:controller]; 
```

当一个孩子想要自己弹出时，它可以这样做：

```
id<ParentControllerDelegate> parent = (id)self.parentViewController;
NSAssert([parent conformsToProtocol:@protocol(ParentControllerDelegate)], @"Parent must conform to ParentControllerDelegate");

[parent popChildViewController]; 
```

然后父视图控制器设置了平移手势，以处理用户从一个孩子平移到另一个孩子：

```
- (void)handlePan:(UIPanGestureRecognizer *)gesture
{
    static UIView *currentView;
    static UIView *previousView;
    static UIView *nextView;

    if (gesture.state == UIGestureRecognizerStateBegan)
    {
        // identify previous view (if any)

        if (self.currentChildIndex > 0)
        {
            UIViewController *previous = self.childViewControllers[self.currentChildIndex - 1];
            previousView = previous.view;
        }
        else
        {
            previousView = nil;
        }

        // identify next view (if any)

        if (self.currentChildIndex < ([self.childViewControllers count] - 1))
        {
            UIViewController *next = self.childViewControllers[self.currentChildIndex + 1];
            nextView = next.view;
        }
        else
        {
            nextView = nil;
        }

        // identify current view

        UIViewController *current = self.childViewControllers[self.currentChildIndex];
        currentView = current.view;
    }

    // if we're in the middle of a pan, let's adjust the center of the views accordingly

    CGPoint translation = [gesture translationInView:gesture.view.superview];

    previousView.transform = CGAffineTransformMakeTranslation(translation.x, 0.0);
    currentView.transform = CGAffineTransformMakeTranslation(translation.x, 0.0);
    nextView.transform = CGAffineTransformMakeTranslation(translation.x, 0.0);

    // if we're all done, let's animate the completion (or if we didn't move far enough,
    // the reversal) of the pan gesture

    if (gesture.state == UIGestureRecognizerStateEnded ||
        gesture.state == UIGestureRecognizerStateCancelled ||
        gesture.state == UIGestureRecognizerStateFailed)
    {

        CGPoint center = currentView.center;
        CGPoint currentCenter = CGPointMake(center.x + translation.x, center.y);
        CGPoint offRight = CGPointMake(center.x + currentView.frame.size.width, center.y);
        CGPoint offLeft = CGPointMake(center.x - currentView.frame.size.width, center.y);

        CGPoint velocity = [gesture velocityInView:gesture.view.superview];

        if ((translation.x + velocity.x * 0.5) < (-self.containerView.frame.size.width / 2.0) && nextView)
        {
            // if we finished pan to left, reset transforms

            previousView.transform = CGAffineTransformIdentity;
            currentView.transform = CGAffineTransformIdentity;
            nextView.transform = CGAffineTransformIdentity;

            // set the starting point of the animation to pick up from where
            // we had previously transformed the views

            CGPoint nextCenter = CGPointMake(nextView.center.x + translation.x, nextView.center.y);
            currentView.center = currentCenter;
            nextView.center = nextCenter;

            // and animate the moving of the views to their final resting points,
            // adjusting the currentChildIndex appropriately

            [UIView animateWithDuration:0.25
                                  delay:0.0
                                options:UIViewAnimationOptionCurveEaseOut
                             animations:^{
                                 currentView.center = offLeft;
                                 nextView.center = center;
                                 self.currentChildIndex++;
                             }
                             completion:NULL];
        }
        else if ((translation.x + velocity.x * 0.5) > (self.containerView.frame.size.width / 2.0) && previousView)
        {
            // if we finished pan to right, reset transforms

            previousView.transform = CGAffineTransformIdentity;
            currentView.transform = CGAffineTransformIdentity;
            nextView.transform = CGAffineTransformIdentity;

            // set the starting point of the animation to pick up from where
            // we had previously transformed the views

            CGPoint previousCenter = CGPointMake(previousView.center.x + translation.x, previousView.center.y);
            currentView.center = currentCenter;
            previousView.center = previousCenter;

            // and animate the moving of the views to their final resting points,
            // adjusting the currentChildIndex appropriately

            [UIView animateWithDuration:0.25
                                  delay:0.0
                                options:UIViewAnimationOptionCurveEaseOut
                             animations:^{
                                 currentView.center = offRight;
                                 previousView.center = center;
                                 self.currentChildIndex--;
                             }
                             completion:NULL];
        }
        else
        {
            [UIView animateWithDuration:0.25
                                  delay:0.0
                                options:UIViewAnimationOptionCurveEaseInOut
                             animations:^{
                                 previousView.transform = CGAffineTransformIdentity;
                                 currentView.transform = CGAffineTransformIdentity;
                                 nextView.transform = CGAffineTransformIdentity;
                             }
                             completion:NULL];
        }
    }
} 
```

看起来您是在进行上下平移，而不是我上面使用的左右平移，但希望您了解基本概念。

* * *

顺便说一句，在 iOS 6 中，您询问的用户界面（使用手势在视图之间滑动）可能可以使用内置容器控制器更有效地完成，[`UIPageViewController`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html). 只需使用 的过渡样式`UIPageViewControllerTransitionStyleScroll`和 的导航方向`UIPageViewControllerNavigationOrientationHorizontal`。不幸的是，iOS 5 只允许页面卷曲过渡，而 Apple 只在 iOS 6 中引入了你想要的滚动过渡，但如果这就是你所需要的，`UIPageViewController`那么完成工作的效率甚至比我上面列出的还要高（你没有'不必进行任何自定义容器调用，无需编写手势识别器等）。

例如，您可以将“页面视图控制器”拖到情节提要上，创建一个`UIPageViewController`子类，然后在 中`viewDidLoad`，您需要配置第一页：

```
UIViewController *firstPage = [self.storyboard instantiateViewControllerWithIdentifier:@"1"]; // use whatever storyboard id your left page uses
self.viewControllerStack = [NSMutableArray arrayWithObject:firstPage];

[self setViewControllers:@[firstPage]
               direction:UIPageViewControllerNavigationDirectionForward
                animated:NO
              completion:NULL];

self.dataSource = self; 
```

然后你需要定义以下[`UIPageViewControllerDataSource`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerDataSourceProtocolRef/UIPageViewControllerDataSource.html)方法：

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
{
    if ([viewController isKindOfClass:[LeftViewController class]])
        return [self.storyboard instantiateViewControllerWithIdentifier:@"2"];

    return nil;
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController
{
    if ([viewController isKindOfClass:[RightViewController class]])
        return [self.storyboard instantiateViewControllerWithIdentifier:@"1"];

    return nil;
} 
```

您的实现会有所不同（至少不同的类名和不同的故事板标识符；我还让页面视图控制器在用户请求时实例化下一页的控制器，因为我没有保留对它们的任何强引用，当我完成转换到另一个页面时，它们将被释放......你也可以在启动时实例化它们，然后这些`before`和`after`例程显然不会实例化，而是在数组中查找它们），但希望你得到这个想法。

但关键问题是我没有任何手势代码，没有自定义容器视图控制器代码等。简单得多。

# c++ - VS 2010 C++ 无法在发布模式下加载 msobj100.dll

> ID：15703616
> 
> 赞同：0
> 
> 时间：2013-03-29T12:51:30.630
> 
> 标签：c++, visual-studio-2010, windows-7, visual-studio-express

我在 Windows 7 上的 Visual C++ 2010 Express 中有一个相当简单的 C++ 项目。我在 Win32 的调试模式下编译没有问题，但是当我切换到 Win32 的发布模式时，我收到以下编译器错误：

链接：致命错误 LNK1296：无法加载 msobj100.dll

[我知道这里](https://stackoverflow.com/questions/7296476/visual-studio-project-release-x86-build-can-not-load-a-dll-msobj100-dll)有人问过这个问题，但我无法从该解决方案中得到修复。我搜索了那个文件，它只位于 C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE。在 SysWOW64 和 Win32 中，有名为“msobjs.dll”的文件，仅此而已。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:55:59.880

尝试将 Windows SDK 安装到您的计算机。这些文件应该与它一起分发。见[这里](http://www.microsoft.com/en-us/download/details.aspx?id=8279)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T03:15:03.657

复制丢失的 dll 文件

`C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE`
到
`C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\Bin`.

`VC\Bin`是运行时路径。

这个问题也困扰了我很久，只好在另一台机器上运行Release模式……现在才找到解决办法。

# ios - 启用抗锯齿时，在 drawRect 中使用不同颜色绘制重叠形状会导致边缘出血

> ID：15703617
> 
> 赞同：2
> 
> 时间：2013-03-29T12:51:32.640
> 
> 标签：ios, objective-c, drawing, core-graphics, quartz-graphics

绘制到具有不同颜色重叠的相同形状时出现问题。当启用抗锯齿时，生成的透明像素会渗出并导致[此图像](http://cl.ly/image/2k3e2E1c2I3d)中的伪影。她的顺序是画一个红色的圆圈，画一个蓝色的三角形，然后画一个红色的三角形。

这个问题可以通过禁用抗锯齿来解决，但结果是难看的锯齿状边缘。

是否有例如解决方案，我可以对图形上下文进行追溯抗锯齿或渲染到图像并在该图像上进行抗锯齿。或者其他任何可以帮助我绘制边缘清晰的重叠形状的东西。

这是重新创建问题的代码

```
-(void)drawRect:(CGRect)rect
{
CGContextRef currentContext = UIGraphicsGetCurrentContext();
CGContextClearRect(currentContext, rect);
CGContextSetAllowsAntialiasing(currentContext, YES);

//// Color Declarations
UIColor* color = [UIColor redColor];
UIColor* color2= [UIColor blueColor];

//// Oval Drawing
UIBezierPath* ovalPath = [UIBezierPath bezierPathWithOvalInRect: rect];
[color setFill];
[ovalPath fill];

//// triangle Drawing
UIBezierPath* trianglePath = [UIBezierPath bezierPath];
[trianglePath moveToPoint: CGPointMake(0, 0)];
[trianglePath addLineToPoint: CGPointMake(rect.size.width, rect.size.height)];
[trianglePath addLineToPoint: CGPointMake(0, rect.size.height)];
[trianglePath addLineToPoint: CGPointMake(0, 0)];
[trianglePath closePath];
[color2 setFill];
[trianglePath fill];

[color setFill];
[trianglePath fill];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:46:36.600

问题在于，使用 drawRect，您基本上是在图像上绘图，并且每个绘图方法都呈现在前一个之上。没有剔除。

要真正解决这个问题，您可能希望使用 OpenGL，其中只有一个渲染通道，因此不会渲染隐藏的对象。

# facebook - 需要一些访问令牌

> ID：15703621
> 
> 赞同：0
> 
> 时间：2013-03-29T12:51:45.683
> 
> 标签：facebook, permissions, require, access-token, facebook-access-token

我在我的应用程序中请求`read_stream`许可。但是用户可以***忽略***该请求。如何检查用户是否给了我权限？

我希望需要该权限**才能**使用该应用程序。

* * *

我正在使用 PHP SDK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:36:21.263

如果你这样做：

```
$facebook->api('USER_ID/permissions','GET'); 
```

您将获得用户授予您应用的权限

您可以在此处找到更多信息：

[https://developers.facebook.com/docs/howtos/login/handling-revoked-permissions/](https://developers.facebook.com/docs/howtos/login/handling-revoked-permissions/)

# jquery - 使用 jquery ajax 传递对象？

> ID：15703622
> 
> 赞同：0
> 
> 时间：2013-03-29T12:51:51.317
> 
> 标签：jquery, ajax, asp.net-mvc

我想将对象传递给控制器​​操作，但它不起作用。对象为空，没有错误。我调试了它，我得到了传递的参数。

脚本

```
$(document).ready(function () {
var IrregularChartParams = {
    MeterId: 2,
    MeterTypeId: 2,
    ReadingTypeId: 4,
    StartDate: "start",
    EndDate: "end",
    DateRangeId: 5
};

var chartParams= JSON.stringify(IrregularChartParams);

$.ajax({
    type: "POST",
    url: app_base_url + 'Graph/GetChart',
    contentType: "application/json;charset=utf-8",
    dataType: "json",
    data: chartParams,
    traditional: true,
    success: function (result) {
        $("#chart").html(result);
    },
    error: function () {
        alert("hatalı");
    }
});
}); 
```

控制器

```
public ActionResult _IrregularChart(IrregularChartParams chartParams)
{
    // chartParams is null 
} 
```

调试时间参数如下所示：

> *   参数 {%7b%22MeterId%22%3a2%2c%22MeterTypeId%22%3a2%2c%22ReadingTypeId%22%3a4%2c%22StartDate%22%3a%22start%22%2c%22EndDate%22%3a%22end%22 %2c%22DateRangeId%22%3a5%7d&**漏斗网**=44D66957AF9E021D68F011F7EA89CF99585363E067264B4A9B2B60FB51030DFA64EAA943529D3352875332394F24293162CBFE088352F1169202E0806155F66F370237D16A787AB8E76417B72808F34FEC9B5133D1D56D0839B614F2E231AB8DE23FE3BB7C048BAA3FCEEDABD4A2A6ACCB1D76DEB657B3B8575A664823DA24044F67C096206D04CBD5971BAE21684EA3FE2CAA747A1C8C563692DBE6335A0948&.ASPXAUTH=C42E113D8E4C49775DE2172054A1D505B777F691EEDA493FBD1B982148F59ECB28D730ED46E19F8BD3AF7A37046D73D462907AF535ED2DC3F80CD6B9681717D9DAD7BD919FAA8BD57B5C7A6EACC0E0EDE956004762C1BD2E76F9D26B9C4036B0A4C903DC02BCFEE341151D6E0A35D748CE4D4FB3C1B84FF58A196E85F78477DF&ALL_HTTP=HTTP_CONNECTION%3akeep-alive%0d%0aHTTP_CONTENT_LENGTH%3a99%0d%0aHTTP_CONTENT_TYPE%3aapplication%2fx-www-form-urlencoded%3b+charset%3dUTF-8%0d%0aHTTP_ACCEPT%3a*%2f* %0d%0aHTTP_ACCEPT_CHARSET%3aISO-8859-9%2cutf-8%3bq%3d0.7​​%2c*%3bq%3d0。3%0d%0aHTTP_ACCEPT_ENCODING%3agzip%2cdeflate%2csdch%0d%0aHTTP_ACCEPT_LANGUAGE%3atr-TR%2ctr%3bq%3d0.8%2cen-US%3bq%3d0.6%2cen%3bq%3d0.4%0d%0aHTTP_COOKIE% 3aFunnelWeb%3d44D66957AF9E021D68F011F7EA89CF99585363E067264B4A9B2B60FB51030DFA64EAA943529D3352875332394F24293162CBFE088352F1169202E0806155F66F370237D16A787AB8E76417B72808F34FEC9B5133D1D56D0839B614F2E231AB8DE23FE3BB7C048BAA3FCEEDABD4A2A6ACCB1D76DEB657B3B8575A664823DA24044F67C096206D04CBD5971BAE21684EA3FE2CAA747A1C8C563692DBE6335A0948%3b+.ASPXAUTH%3dC42E113D8E4C49775DE2172054A1D505B777F691EEDA493FBD1B982148F59ECB28D730ED46E19F8BD3AF7A37046D73D462907AF535ED2DC3F80CD6B9681717D9DAD7BD919FAA8BD57B5C7A6EACC0E0EDE956004762C1BD2E76F9D26B9C4036B0A4C903DC02BCFEE341151D6E0A35D748CE4D4FB3C1B84FF58A196E85F78477DF%0d%0aHTTP_HOST%3alocalhost%3a50305%0d%0aHTTP_REFERER%3ahttp%3a%2f%2flocalhost%3a50305%2fGraph%0d%0aHTTP_USER_AGENT%3aMozilla%2f5.0+(Windows+NT+6.1)+AppleWebKit%2f537\. 22+(KHTML%2c+like+Gecko)+Chrome%2f25.0.1364.172+Safari%2f537.22%0d%0aHTTP_ORIGIN%3ahttp%3a%2f%2flocalhost%3a50305%0d%0aHTTP_X_REQUESTED_WITH%3aXMLHttpRequest%0d%0a&ALL_RAW=连接%3a+保持活动状态%0d%0aContent-Length%3a+99%0d%0aContent-Type%3a+application%2fx-www-form-urlencoded%3b+charset%3dUTF-8%0d%0aAccept%3a+172+Safari%2f537.22%0d%0aHTTP_ORIGIN%3ahttp%3a%2f%2flocalhost%3a50305%0d%0aHTTP_X_REQUESTED_WITH%3aXMLHttpRequest%0d%0a&ALL_RAW=Connection%3a+keep-alive%0d%0aContent-Length%3a+99% 0d%0aContent-Type%3a+application%2fx-www-form-urlencoded%3b+charset%3dUTF-8%0d%0aAccept%3a+172+Safari%2f537.22%0d%0aHTTP_ORIGIN%3ahttp%3a%2f%2flocalhost%3a50305%0d%0aHTTP_X_REQUESTED_WITH%3aXMLHttpRequest%0d%0a&ALL_RAW=Connection%3a+keep-alive%0d%0aContent-Length%3a+99% 0d%0aContent-Type%3a+application%2fx-www-form-urlencoded%3b+charset%3dUTF-8%0d%0aAccept%3a+*%2f*%0d%0aAccept-Charset%3a+ISO-8859-9%2cutf-8%3bq%3d0.7​​%2c*%3bq%3d0.3%0d%0aAccept-Encoding%3a+gzip%2cdeflate%2csdch%0d% 0aAccept-Language%3a+tr-TR%2ctr%3bq%3d0.8%2cen-US%3bq%3d0.6%2cen%3bq%3d0.4%0d%0aCookie%3a+FunnelWeb%3d44D66957AF9E021D68F011F7EA89CF99585363E067264B4A9B2B60FB51030DFA64EAA943529D3352875332394F24293162CBFE088352F1169202E0806155F66F370237D16A787AB8E76417B72808F34FEC9B5133D1D56D0839B614F2E231AB8DE23FE3BB7C048BAA3FCEEDABD4A2A6ACCB1D76DEB657B3B8575A664823DA24044F67C096206D04CBD5971BAE21684EA3FE2CAA747A1C8C563692DBE6335A0948%3b+.ASPXAUTH%3dC42E113D8E4C49775DE2172054A1D505B777F691EEDA493FBD1B982148F59ECB28D730ED46E19F8BD3AF7A37046D73D462907AF535ED2DC3F80CD6B9681717D9DAD7BD919FAA8BD57B5C7A6EACC0E0EDE956004762C1BD2E76F9D26B9C4036B0A4C903DC02BCFEE341151D6E0A35D748CE4D4FB3C1B84FF58A196E85F78477DF%0d%0aHost%3a+localhost%3a50305%0d%0aReferer%3a+http%3a%2f%2flocalhost%3a50305%2fGraph%0d%0aUser-Agent%3a+Mozilla%2f5.0+(Windows+NT +6.1)+AppleWebKit%2f537.22+(KHTML%2c+like+Gecko)+Chrome%2f25.0.1364.172+Safari%2f537.22%0d%0aOrigin%3a+http%3a%2f%2flocalhost%3a50305% 0d%0aX-Requested-With%3a+XMLHttpRequest%0d%0a&APPL_MD_PATH=&APPL_PHYSICAL_PATH=C%3a%5cUsers%5cariza%5cDesktop%5cMasa%u00fcst%u00fc%5cosos_plus_2%5cOsos-21.11.2012%5cOsosPlus2.UI%5cOsosPlus2.% 5c&AUTH_TYPE=表格&AUTH_USER=KIPA&AUTH_PASSWORD=&LOGON_USER=CTS%5cariza&REMOTE_USER=KIPA&CERT_COOKIE=&CERT_FLAGS=&CERT_ISSUER=&CERT_KEYSIZE=&CERT_SECRETKEYSIZE=&CERT_SERIALNUMBER=&CERT_SERVER_ISSUER=&CERT_SERVER_SUBJECT=&CERT_SUBJECT=&CONTENT_LENGTH=99&CONTENT_TYPE=application%2fx-www-form-urlencoded%3b+charset%3dUTF-8&GATEWAY_INTERFACE=&HTTPS=&HTTPS_KEYSIZE=&HTTPS_SECRETKEYSIZE=&HTTPS_SERVER_ISSUER=&HTTPS_SERVER_SUBJECT= &INSTANCE_ID=&INSTANCE_META_PATH=&LOCAL_ADDR=%3a%3a1&PATH_INFO=%2fGraph%2f_IrregularChart&PATH_TRANSLATED=C%3a%5cUsers%5cariza%5cDesktop%5cMasa%u00fcst%u00fc%5cosos_plus_2%5cOsos-21.11.12.2012%c%5cOs2.osPlusUI%5cOsos-21.11.2012%c%5cOs2.os 5c_IrregularChart&QUERY_STRING=&REMOTE_ADDR=%3a%3a1&REMOTE_HOST=%3a%3a1&REMOTE_PORT=&REQUEST_METHOD=POST&SCRIPT_NAME=%2fGraph%2f_IrregularChart&SERVER_NAME=localhost&SERVER_PORT=50305&SERVER_PORT_SECURE=0&SERVER_PROTOCOL=HTTP%2f1.1&SERVER_SOFTWARE=&URL=%2fGraph%2f_IrregularChart&HTTP_CONNECTION=keep-alive&HTTP_CONTENT_LENGTH=99&HTTP_CONTENT_TYPE=application%2fx-www-form-urlencoded%3b+charset%3dUTF-8&HTTP_ACC*%2f*&HTTP_ACCEPT_CHARSET=ISO-8859-9%2cutf-8%3bq%3d0.7​​%2c*%3bq%3d0.3&HTTP_ACCEPT_ENCODING=gzip%2cdeflate%2csdch&HTTP_ACCEPT_LANGUAGE=tr-TR%2ctr%3bq%3d0.8%2cen-US%3bq %3d0.6%2cen%3bq%3d0.4&HTTP_COOKIE=FunnelWeb%3d44D66957AF9E021D68F011F7EA89CF99585363E067264B4A9B2B60FB51030DFA64EAA943529D3352875332394F24293162CBFE088352F1169202E0806155F66F370237D16A787AB8E76417B72808F34FEC9B5133D1D56D0839B614F2E231AB8DE23FE3BB7C048BAA3FCEEDABD4A2A6ACCB1D76DEB657B3B8575A664823DA24044F67C096206D04CBD5971BAE21684EA3FE2CAA747A1C8C563692DBE6335A0948%3b+.ASPXAUTH%3dC42E113D8E4C49775DE2172054A1D505B777F691EEDA493FBD1B982148F59ECB28D730ED46E19F8BD3AF7A37046D73D462907AF535ED2DC3F80CD6B9681717D9DAD7BD919FAA8BD57B5C7A6EACC0E0EDE956004762C1BD2E76F9D26B9C4036B0A4C903DC02BCFEE341151D6E0A35D748CE4D4FB3C1B84FF58A196E85F78477DF&HTTP_HOST=localhost%3a50305&HTTP_REFERER=http%3a%2f%2flocalhost%3a50305%2fGraph&HTTP_USER_AGENT=Mozilla%2f5.0+(Windows+NT+6.1)+AppleWebKit%2f537.22+(KHTML%2c+like+Gecko)+Chrome%2f25.0.1364。 172+Safari%2f537.22&HTTP_ORIGIN=http%3a%2f%2flocalhost%3a50305&HTTP_X_REQUESTED_WITH=XMLHttpRequest} System.Collections.Specialized.NameValueCollection {System.Web.HttpValueCollection}

为什么控制器中的对象为空，为什么参数看起来像上面那样？

**更新**

DTO

```
public class IrregularChartParams
{
    public int MeterId { get; set; }
    public int MeterTypeId { get; set; }
    public int ReadingTypeId { get; set; }
    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }
    public int DateRangeId { get; set; }
} 
```

在它工作之前，然后我更改属性名称，而不是它不起作用......

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:19:06.053

查看您的 DTO，StartDate 和 EndDate 属性是 DateTime 对象，而您似乎正在从 JavaScript 实现中传递字符串。这可能是模型绑定失败的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:54:03.430

您可以直接在 ajax 的数据选项中传递对象，无需 stringfy ..

尝试这个

```
data: IrregularChartParams , //here 
```

并通过 POST 在您的控制器中获取它

# javascript - 获取 DOM 元素的屏幕坐标

> ID：15703625
> 
> 赞同：13
> 
> 时间：2013-03-29T12:51:53.357
> 
> 标签：javascript, c++, dom, coordinates, firebreath

我能否以某种方式获得 DOM 对象的精确屏幕坐标（相对于屏幕的左上角）。通过 NPAPI\FireBreath 或 JavaScript。（需要这个插件，我正在用 FireBreath 编写）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-22T05:11:20.140

PS：我知道我很久以前就提出过这个问题，但我想总结一下我最后得到的。

`element.offsetLeft\Top`并没有真正按照它的意思工作。
从 HTML 你可以得到坐标，相对于页面空间的左上角，而不是用户屏幕本身。

并且通过插件，通过`GetWindowRect()`winAPI函数，您可以获得浏览器窗口左上角相对于用户屏幕的坐标，通过`GetClientRect()` 您可以获得客户端矩形左上角的坐标。

但是，它与页面的左上角不同，页面空间的角落与客户端矩形或窗口矩形之间总是有一些东西。它包括顶级浏览器栏和其他东西。

你可以做什么？似乎没有简单的 100% 可控方式：

您可以尝试考虑那些浏览器栏并计算`Client rect`页面矩形之间的空间，但是这些浏览器栏在用户之间不是恒定的，一个可以有更多的，另一个，你会搞砸所有的坐标系。然后，您可以以某种方式向浏览器注册已安装的条数和添加量，并根据该计算空间量，将被它们消耗，但条和添加量不一样，并且您再次需要考虑太多变量.

有一种更简单的方法，您可以不从顶部开始，而是从底部开始 - 获取矩形底部点的坐标并通过 HTML 进行一些计算`element.offset`- 将坐标系绑定到窗口的左下角。
底部没有用户浏览器栏，因此可以对页面和窗口角落之间的空间更有信心，但是有些浏览器会在此处弹出带有下载信息等的栏，在这里我们又搞砸了。

Another option is to use modal window's - i.e. open the page in modal window through `window.open()` from your JavaScript, you can control amount of browser controls and bars in those windows, you can get rid of all those userbars and make a clear window only with address bar and the page. Now you got much more control, and can almost be sure, that this space between corners will be the same for all your users... almost.
There is two things need to be mentioned:

1)Some browsers (for example google chrome, as I remember) got those custom browser additions (Firebug for example) to appear as small icons near address bar, and they are still appearing near the address bar of the modal window.
What the difference you can ask - the difference is, that, for some reason, top of the browser window will became around 5 pixels fatter, if there's even one of those icons.(again you can try to register, are there any of those installed on user browser, or not)
And if, anyway, those 5px not crucial for you - it can be a way to go.. if you're ok with the next thing.

2)Obvious one - that fun with modal windows can be uncomfortable for end-user, cos it cuts some browser controls and mechanics that browser users get used to.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T16:09:52.293

我知道您没有提到 jQuery，但您可以使用[http://api.jquery.com/offset/](http://api.jquery.com/offset/)作为示例。它结合了`offsetLeft/top`所有父节点和滚动帐户，为嵌套节点提供准确的 x,y（相对于主体）。

[请注意，如果您正在处理事件，则事件对象始终使用http://api.jquery.com/event.pageX/](http://api.jquery.com/event.pageX/)和[http://api.jquery.com/event.pageY/](http://api.jquery.com/event.pageY/)告诉您事件发生的位置

同样，仅当您不想使用 jQuery 时才提及 jQuery。

这是 jQuery 是如何做到的

```
$.fn.offset = function (options) {
    var elem = this[0],
        doc = elem && elem.ownerDocument;

    if (!doc) {
        return null;
    }

    if (elem === doc.body) {
        return jQuery.offset.bodyOffset(elem);
    }

    return getOffset(elem, doc, doc.documentElement);
}

function getOffset(elem, doc, docElem, box) {
    try {
        box = elem.getBoundingClientRect();
    } catch(e) {}

    // Make sure we're not dealing with a disconnected DOM node
    if (!box || !jQuery.contains(docElem, elem)) {
        return box ? {
            top: box.top,
            left: box.left
        } : {
            top: 0,
            left: 0
        };
    }

    var body = doc.body,
        win = getWindow(doc),
        clientTop = docElem.clientTop || body.clientTop || 0,
        clientLeft = docElem.clientLeft || body.clientLeft || 0,
        scrollTop = win.pageYOffset || jQuery.support.boxModel && docElem.scrollTop || body.scrollTop,
        scrollLeft = win.pageXOffset || jQuery.support.boxModel && docElem.scrollLeft || body.scrollLeft,
        top = box.top + scrollTop - clientTop,
        left = box.left + scrollLeft - clientLeft;

    return {
        top: top,
        left: left
    };
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-10T06:39:04.163

you move cursor to somewhere of the page ,and make a click event.(find the window,then GetWindowRect ,caculate a sutable position) then you can catch the event,record clientX and clientY. By this ,you build a bridge between two different coordinate system.

# django - 有没有办法从 Django 中的模型查询集中获取相关字段的类型？

> ID：15703635
> 
> 赞同：4
> 
> 时间：2013-03-29T12:52:22.007
> 
> 标签：django, django-queryset

我可以从模型查询集中获取相关字段的类型吗？

让我们考虑示例模型：

```
class Semester(models.Model):
    active = models.BooleanField(default=False, verbose_name="Active")

class Subject(models.Model):
    name = models.CharField(max_length=100, verbose_name="Name")
    semester = models.ForeignKey(Semester, verbose_name="Semester") 
```

如果我在变量和查询集中有一些字段名，我可以这样做：

```
querySet = Subject.objects.all()

some_field_name = 'name'
field_type = querySet.model._meta.get_field(some_field_name).get_internal_type() 
```

有没有办法获取相关的字段类型，例如：

```
querySet = Subject.objects.all()

some_field_name = 'semester__active'
field_type = ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:45:40.313

尝试使用`get_field_by_name`：

```
field_type = querySet.model._meta.get_field_by_name(some_field_name).get_internal_type() 
```

来自[Django 的源代码](https://github.com/django/django/blob/master/django/db/models/options.py)：

```
def get_field_by_name(self, name):
    """
    Returns the (field_object, model, direct, m2m), where field_object is
    the Field instance for the given name, model is the model containing
    this field (None for local fields), direct is True if the field exists
    on this model, and m2m is True for many-to-many relations. When
    'direct' is False, 'field_object' is the corresponding RelatedObject
    for this field (since the field doesn't have an instance associated
    with it).

    Uses a cache internally, so after the first access, this is very fast.
    """ 
```

也试试：

```
field = querySet.model._meta.get_field_by_name("semester")
field_type = field[0].rel.to._meta.get_field_by_name("active").get_internal_type() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T14:27:54.660

谢谢你的帮助！

[我在这个答案](https://stackoverflow.com/questions/7627745/django-get-foreign-key-model)的帮助下找到了解决方案：

```
main, related = some_field_name.split("__")
field_type = querySet.model._meta.get_field(main).rel.to._meta.get_field(related).get_internal_type() 
```

# spring-mvc - 如何防止在服务器启动期间执行带有@postcontruct 注释的方法

> ID：15703638
> 
> 赞同：0
> 
> 时间：2013-03-29T12:52:25.127
> 
> 标签：spring-mvc, jsf-2

我正在使用 JSF2.1 和 Spring MVC 开发一个 Web 应用程序。我已经为需要在页面加载时执行的方法编写了@PostConstruct。bean 都是 ViewScoped。但问题是该方法在服务器启动时执行并随后初始化，并且在页面加载期间使用相同的实例。有没有办法让该方法仅在页面加载期间运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:37:33.147

当您从 Eclipse 之类的 IDE 中运行服务器时，就会发生这种情况。IDE 的服务器插件（例如 Eclipse Tomcat 插件）将在启动过程后通过向`/`. 显然，您已经在`/`与这些视图范围 bean 关联的页面上。

忽略它。在生产过程中不会发生这种情况。

# java - 如何在自己的类中模拟 ConcurrentModificationException？

> ID：15703639
> 
> 赞同：3
> 
> 时间：2013-03-29T12:52:25.453
> 
> 标签：java, multithreading, concurrency, exception-handling, concurrentmodification

我一直在阅读“Effective Java”**第 60**条，即“支持使用标准异常”。

> 另一个值得了解的通用异常是 ConcurrentModificationException。如果设计用于单线程或具有外部同步的对象**检测**到它正在被**同时修改，则应引发此异常。**

通常，人们`CME`在循环时尝试从集合中删除时会遇到这种情况。

但是在这里，我**对检测对自我实现的类对象的并发修改的简洁示例感兴趣？**

我希望它类似于在内部对象和相关的布尔标志上同步，如果另一个线程遇到该标志为假，则抛出异常。

对于我在来源中发现的简单研究`ArrayList`：

```
 final void checkForComodification() {
     if (modCount != expectedModCount)
         throw new ConcurrentModificationException();
 } 
```

`modCount`但是如何保持背后的原则。我找不到它在哪里被递减。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T13:00:48.447

修改计数本质上是集合状态的[“修订号”](http://en.wikipedia.org/wiki/Revision_control)。每次对集合进行结构更改时，它都会增加。它永远不会递减。

开始迭代时，迭代器会记住 mod 计数的值。然后它会定期检查容器的当前 mod 计数是否仍然等于记住的值。如果没有 - 意味着自迭代开始以来已经发生了结构变化 - a`ConcurrentModificationException`被抛出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T13:21:24.160

至于您将如何自己实现这种行为：您的类依赖于一些假设才能正常工作，如果对对象的访问未正确同步，则可能会违反这些假设。如果您发现它们不正确，请尝试检查这些假设并抛出 CME。

在 的示例中`ArrayList`，假设在您迭代列表时没有人会更改列表的结构，因此`ArrayList`跟踪在迭代期间不应更改的修改计数。

然而，这种检查只是为了让错误的访问*更有可能*导致干净的异常而不是奇怪的行为——换句话说，这个异常只是对开发人员的帮助，不需要强制执行正确性，因为正确性已经当你遇到它时妥协了。

在不会对类的性能产生太大影响的情况下提供这种帮助是一个好主意，但是使用例如同步来确保正确使用可能是一个坏主意——那么你不妨一开始就让类线程安全。

这就是为什么 API 文档`ArrayList`说：

> 请注意，不能保证迭代器的快速失败行为，因为一般来说，在存在不同步的并发修改的情况下，不可能做出任何硬保证。快速失败的迭代器会尽最大努力抛出 ConcurrentModificationException。因此，编写一个依赖于这个异常的正确性的程序是错误的：迭代器的快速失败行为应该只用于检测错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T13:21:28.573

所以，一般的做法如下：只要记住对象的当前状态，每次尝试访问对象时检查它的状态，如果状态改变，抛出你的异常！

# oracle - 我应该在 Oracle 中索引主键列吗

> ID：15703640
> 
> 赞同：22
> 
> 时间：2013-03-29T12:52:34.387
> 
> 标签：oracle, indexing, primary-key

我最近停止认为主键不是索引，它们是唯一和空约束的组合。直到现在，我从未为 PK 列创建索引。我的问题是，如果要在许多查询的 WHERE 部分中使用此列，是否应该为 PK 列创建索引。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-29T13:25:33.307

Oracle 将为您创建一个索引，或者可以使用现有的索引。使用唯一索引还是非唯一索引取决于您。

[http://docs.oracle.com/cd/B28359_01/server.111/b28310/indexes003.htm#i1006566](http://docs.oracle.com/cd/B28359_01/server.111/b28310/indexes003.htm#i1006566)

主键本身不是索引，也不是唯一约束——它们都是约束。但是，使用索引来支持它们。

唯一索引完全不同，因为它可以在没有唯一或主键约束的情况下存在，并且两种约束类型都不需要支持它的索引是唯一的。

# jquery - 如何访问对象中的元素？

> ID：15703641
> 
> 赞同：0
> 
> 时间：2013-03-29T12:52:36.387
> 
> 标签：jquery

例如我有：

```
var my_ul = jQuery('<ul/>');
jQuery('<li/>').appendTo(my_ul);
jQuery('<li/>').appendTo(my_ul);
jQuery('<li/>').appendTo(my_ul);
jQuery('<li/>').appendTo(my_ul); 
```

是否可以访问ul中的最后一个li？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:54:05.747

你可以这样做：

```
my_ul.find('li:last'); 
```

或者，您可以使用 jquery 构造函数的上下文参数：

```
$('li:last', my_ul); 
```

看[**演示**](http://tinker.io/74614)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:54:51.753

试试这个

`my_ul.find('li:last');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T12:55:31.427

自然！

这是 jQuery 背后的真正魔力：选择器。我强烈建议您阅读所有这些，因为它们都有一个目的，其中一些非常非常强大。如果您对性能/优化感兴趣，还要记下模拟的伪选择器，因为它们通常较慢。

要直接回答您的问题，以下所有代码将为您提供 ul 中的最后一项：

```
my_ul.children("li:last");

my_ul.children("li").last(); 
```

读者练习：找出哪一个性能更好:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T12:56:30.820

```
var my_ul = jQuery('<ul/>');
x1 = jQuery('<li/>').appendTo(my_ul);
x2 = jQuery('<li/>').appendTo(my_ul);
x3 = jQuery('<li/>').appendTo(my_ul);
x4 = jQuery('<li/>').appendTo(my_ul);

x4.html('I\'m last'); 
```

您可以访问所需的元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T13:05:53.840

```
var my_ul = $('<ul/>');
for(i=0;i<4;i++){
  my_ul.append("<li> index: "+i+"</li>");
}

alert( my_ul.find('li:last').text() ); // .find() faster than constructor 
```

# java - 如何过滤 JTextField 中的某些字符

> ID：15703644
> 
> 赞同：2
> 
> 时间：2013-03-29T12:53:04.317
> 
> 标签：java, swing, jtextfield

如何防止用户在“JTextField”中输入某些字符，如果输入了该字符，则不要在文本字段中显示它

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T15:37:39.793

您可以使用 JFormattedTextField 或创建自定义[DocumentFilter](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-29T12:58:18.823

```
JTextField textField = new JTextField(10);
textField.addKeyListener(new KeyAdapter() {
public void keyTyped(KeyEvent e) {
  char c = e.getKeyChar();
  if (//Write your condition here) {
     e.consume();  // ignore event
}}); 
```

更多关于[这里](https://stackoverflow.com/questions/4863850/disable-input-some-symbols-to-jtextfield)

# java - 带有两个元素的 Spring 更新 SOAP 标头

> ID：15703646
> 
> 赞同：0
> 
> 时间：2013-03-29T12:53:11.487
> 
> 标签：java, transform, webservice-client, soapheader, xslt

我正在使用 Spring-WS 和 WebServiceTemplate 来调用 SOAP WebService。目前，我在更新 SOAP 标头时遇到问题。

以下是 SOAP 请求的完整结构：

```
<SOAP:envlope>
    <SOAP:Header>
        <Security>
            <username>?</username>
            <password>?</password>
        </Security>
        <MessageData>
            <ClientIP>?</ClientIP>
        </MessageData>
    </SOAP:Header>
    <SOAP:Body>
        <Login/>
    </SOAP:Body>
</SOAP:envlope> 
```

如上所示，我需要在 Header 中包含 2 个元素。我有以下代码来更新 WebServiceTemplate 的 SOAP 标头

```
Transformer transformer = TransformerFactory.newInstance().newTransformer();
transformer.transform(new StringSource(soapHeaderStr), ((SoapMessage) message).getSoapHeader().getResult()); 
```

但是当我尝试使用两个元素（字符串）更新标头时收到以下错误消息：

**SOAPHeaderString**

```
<Security>
   <username>?</username>
   <password>?</password>
</Security>
<MessageData>
   <ClientIP>?</ClientIP>
</MessageData> 
```

**错误**

```
[Fatal Error] :1:197: The markup in the document following the root element must be well-formed.
ERROR:  'The markup in the document following the root element must be well-formed.' 
```

`Security`原因是和元素没有根元素`MessageData`，它不应该是。

请帮助我在这种情况下如何更新标题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:33:32.427

终于解决了！！

我在转换时添加了虚拟根，然后从 SOAP Header 中删除了该虚拟根。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T04:12:49.247

遇到了同样的问题并设法解决了，请参见[此处](https://stackoverflow.com/questions/25831520/spring-adding-two-elements-to-the-soap-header)

基本上，您可以像这样将这两个元素直接编组到soap标头中，而不是绑定使用 Transformer ：

```
webServiceTemplate.getMarshaller().marshal(element1,soapHeader.getResult());
webServiceTemplate.getMarshaller().marshal(element2,soapHeader.getResult()); 
```

这里提到的编组器是“org.springframework.oxm.jaxb.Jaxb2Marshaller” 上面的元素1和2是使用生成的Object工厂类创建的JAXB元素。

# android - 如何在android中保存图像文件？

> ID：15703657
> 
> 赞同：0
> 
> 时间：2013-03-29T12:54:06.403
> 
> 标签：android

我正在将图像文件读入字节数组。这个字节数组我必须再次作为图像文件保存到 sdcard 上。要读取文件，我使用了以下代码：

```
public void readimage()
 {
 InputStream ins_image = getResources().openRawResource(R.drawable.btn_cancel);
 outputStream=new ByteArrayOutputStream();
 try 
 {
   ins_image.available();
 } catch (IOException e)    {   e.printStackTrace();    }
   try 
   {
    Log.e( "Size of image", ""+ins_image.available());
  } catch (IOException e)   {e.printStackTrace();}
   int size = 0;
   byte[] buffer_image = new byte[200000];
   try {
    while((size=ins_image.read(buffer_image,0,200000))>=0)
    {
     outputStream.write(buffer_image,0,size);
    }
    } catch (IOException e) {   e.printStackTrace();    }
    int length_of_image= outputStream.toByteArray().length;
    byte_image=outputStream.toByteArray();
    Log.e("Size of image",""+length_of_image);
      } 
```

和下面的代码来保存文件：

```
public void saveimage_fromarray()
{
  File photo=new File(Environment.getExternalStorageDirectory(), "photo.png");
  if (photo.exists()) 
  {
    photo.delete();
  }
  try 
  {
  FileOutputStream fos=new FileOutputStream(photo.getPath());
  fos.write(byte_image[0]);
  fos.close();
  }
   catch (java.io.IOException e) 
 } 
```

但是文件正在保存，但没有显示任何内容。有人可以告诉我为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:05:35.540

设置您要获取的图像的大小以代替 0。

```
fos.write(byte_image[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:59:14.887

好像你只写了一个字节的图像。

```
fos.write(byte_image[0]); 
```

请比较源文件、字节缓冲区、数组和输出文件的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T13:01:53.673

你为什么不简化一切，只调用[这个方法](https://developer.android.com/reference/android/graphics/Bitmap.html#compress%28android.graphics.Bitmap.CompressFormat,%20int,%20java.io.OutputStream%29)：

```
bmp.compress(Bitmap.CompressFormat.PNG, 100, <pass here a valid file outputstream>); 
```

# sql-server - 数据库清理

> ID：15703658
> 
> 赞同：1
> 
> 时间：2013-03-29T12:54:09.907
> 
> 标签：sql-server, database, resource-cleanup

我继承了一个格式不正确的 SQL 服务器数据库。（一些咨询公司进来做这个项目，没有完成就离开了）我对这个数据库的主要问题是：

*   数据类型：很多 tinyint 和 text 类型。
*   表未标准化：一些键是名称而不是 seq id。
*   很多我不确定的表正在被使用
*   很多我不确定的存储过程正在被使用
*   命名错误的表和存储过程

我还继承了针对该数据库运行的 asp.net 应用程序。

我想清理这个数据库。我知道必须在每个表上更改数据类型。摆脱所有额外的表和存储过程。最简单的方法是什么。任何其他使其更清洁和更小的技巧都值得赞赏。

我还想提一下，我安装了 RedGate 工具。（如果有帮助的话）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:59:38.810

查看 他们允许从实时数据库创建项目的[Sql Server 数据工具。](http://msdn.microsoft.com/en-us/data/tools.aspx)您可以在那里做的一些事情是右键单击表格、视图和函数的“查找用法”。

只要以前的开发人员使用存储过程和视图而不是直接查询，它就应该以这种方式找到对您项目的引用，而不会杀死您的项目。

此外，为了查找未使用的存储过程，请在应用程序中每个存储过程的顶部放置一些基本日志记录，在 X 天后，那些尚未记录在表中的可能安全删除，否则通过您的 .NET 代码进行繁琐的搜索会找到它们。

# unix - unix 中的 basename 命令

> ID：15703659
> 
> 赞同：0
> 
> 时间：2013-03-29T12:54:25.860
> 
> 标签：unix

我们使用 base name 命令来知道文件名 usinf 下面的脚本：

```
basename $0 
```

ho`$0`在此命令中被解释为文件名，我观察到这`$1`不是一个正确的命令。请帮助我理解这个命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:57:14.510

`$0`包含 bash 脚本中 argv 的第一个元素，它是执行脚本的路径。

# linux - 查找目录和子目录中的所有零字节文件

> ID：15703664
> 
> 赞同：101
> 
> 时间：2013-03-29T12:54:33.710
> 
> 标签：linux, shell

如何在目录及其子目录中找到所有零字节文件？

我已经这样做了：

```
#!/bin/bash
lns=`vdir -R *.* $dir| awk '{print $8"\t"$5}'`
temp=""
for file in $lns; do
    if test $file = "0"; then
        printf $temp"\t"$file"\n"
    fi
    temp=$file
done 
```

但是，我只在当前目录中得到结果，而不是子目录，如果任何文件名包含空格，那么我只会得到第一个单词，后跟 tab

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2013-03-29T12:58:35.623

要打印大小为 0 的 $dir 及其以下的所有文件的名称：

```
find "$dir" -size 0 
```

请注意，并非所有的实现`find`都会默认产生输出，因此您可能需要执行以下操作：

```
find "$dir" -size 0 -print 
```

关于问题中最后一个循环的两条评论：

您无需遍历字符串中的所有其他单词并查看备用值是否为零，而是可以通过遍历行来部分消除空格问题。例如：

```
printf '1 f1\n0 f 2\n10 f3\n' | while read size path; do
    test "$size" -eq 0 && echo "$path"; done 
```

请注意，如果 ls 输出的任何路径包含换行符，这将在您的情况下失败，这强化了 2 点：不要 parse `ls`，并且有一个不允许路径中有空格的合理命名策略。

其次，要从循环中输出数据，不需要将输出存储在变量中`echo`。如果您只是让循环将其输出写入标准输出，您可以完成同样的事情，但要避免存储它。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2016-03-10T08:25:58.830

除了上面的答案：

如果您想删除这些文件

```
find $dir -size 0 -type f -delete 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-30T15:29:37.763

不，您不必打扰 grep。

```
find $dir -size 0 ! -name "*.xml" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-09-28T19:59:49.917

Bash 4+ 测试 - 这是搜索大小 0 的正确方法：

```
find /path/to/dir -size 0 -type f -name "*.xml" 
```

搜索多个大小为 0 的文件扩展名：

```
find /path/to/dir -size 0 -type f \( -iname \*.css -o -iname \*.js \) 
```

注意：如果您删除了 \( ... \)，结果将是所有满足此要求的文件，因此忽略大小 0。

# iphone - 是否可以在应用商店中更改应用的目标设备系列？

> ID：15703665
> 
> 赞同：0
> 
> 时间：2013-03-29T12:54:42.410
> 
> 标签：iphone, ios, objective-c, stored-procedures, app-store

我在 iPhone 和 iPad 的商店中有一个已发布的应用程序。我刚刚错误地为 iPad 和 iPhone 创建了 v.1.0。我想为新版本的 iPhone 更改目标设备。

iTunes 给了我一个错误：“更改您的目标设备系列。”

有没有办法只为 iPhone 发布？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:11:19.993

您不能仅使用通用设置提交 iPhone，因为您的二进制文件包含 iPhone 和 iPad 的设置。

`Deployment Target`您将需要为 iPhone提交更新的新二进制文件。

[类似的问题在这里也被问到了](https://stackoverflow.com/questions/12229507/mistakenly-submitted-ios-app-as-universal-how-to-change-post-publish)。- 不确定链接是否有意义。

# java - Java 初学者 - 我的方法有什么问题？

> ID：15703666
> 
> 赞同：0
> 
> 时间：2013-03-29T12:54:42.610
> 
> 标签：java

我是一名 Java 初学者，我正在尝试在 NetBeans 中创建一个非常简单的方法，但我很沮丧这不起作用。有人可以指出我的错误吗？

```
public static void main(String[] args) {

    /**
 *
 * @param name
 * @return
 */
    public String critMeth(String name){
        String c = name + " loves you!";
        return c;
    }
    String critter = "Henry";
    String love = critMeth(critter);
    System.out.println(love);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T12:55:50.900

在java中，您不会在方法中声明方法。将其更改为

```
public String critMeth(String name){
    String c = name + " loves you!";
    return c;
}

public static void main(String[] args) {
    String critter = "Henry";
    String love = critMeth(critter);
    System.out.println(love);
} 
```

并且不要忘记，如果您不在接收器对象上调用静态方法，则只能从静态方法调用静态方法。所以将第一个方法设为静态（我把它作为练习给你）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:57:05.213

```
public static void main(String[] args) {
    String critter = "Henry";
    String love = critMeth(critter);
    System.out.println(love);
}

/**
 *
 * @param name
 * @return
 */
private static String critMeth(String name){
    String c = name + " loves you!";
    return c;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-04T13:29:19.517

主要方法是如果您按下开始，java 将运行的方法。不允许将方法放在另一个方法中

```
public static void main(String[] args) {
    String critter = "Henry";
    String love = critMeth(critter);
    System.out.println(love);
}

public String critMeth(String name){
    String c = name + " loves you!";
    return c;
} 
```

# css - 使用 css 创建雕刻边框

> ID：15703668
> 
> 赞同：1
> 
> 时间：2013-03-29T12:54:48.160
> 
> 标签：css, border

有没有什么技巧可以在这种颜色上使用 CSS 创建雕刻边框 #505050 ？我几个小时以来一直在网上搜索，但找不到任何 CSS 解决方案。虽然，我本可以在 Photoshop 上制作，但我并不擅长。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T12:59:29.137

我不确定你到底想要什么样的外观，但 Mozilla 有一些关于`border-style`CSS 规则的精彩文档。有以下样式可供选择：

*   没有任何
*   隐
*   点缀
*   虚线
*   坚硬的
*   双倍的
*   槽
*   岭
*   插图
*   一开始

图像示例和更多说明可[在此处](https://developer.mozilla.org/en-US/docs/CSS/border-style)获得。

# php - 如何使用 PHP 在单独的页面上回显 wordpress 特色图像？

> ID：15703669
> 
> 赞同：0
> 
> 时间：2013-03-29T12:54:49.310
> 
> 标签：php, wordpress

我有一个使用 PHP 在 MySql 数据库中回显结果的站点。结果是 $link、$description 和 $title。这是代码：

```
echo "
<h2><a href='$link'><b>$title</b><img src=\"IMAGE LINK GOES HERE OR PHP\" /></a>    </h2><br>
$description<br />
<a href='$link'>$link<br /><br /></a><p></div></li></ul></div>
"; 
```

我想知道如何从单独的站点呼应“Wordpress 特色图片”。

例如：

```
echo <img src="PHP CODE TO GRAB THE IMAGES FROM A WORDPRESS SITE WHICH I HAVE ALREADY CREATED" /> 
```

如果我没有完全理解，我很抱歉。我对PHP很垃圾。请帮忙....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:06:45.790

I think you want this

```
$image = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), 'single-post-thumbnail' ); 
<img src="<?php echo $image[0]; ?>" /> 
```

# ios - IOS文件系统安全

> ID：15703677
> 
> 赞同：0
> 
> 时间：2013-03-29T12:55:20.420
> 
> 标签：ios, security, ios6

我有一些关于 Apple Filesystem Encryption 的讨论。该应用程序本身始终在沙箱中运行，并且默认情况下文件系统是加密的。我总是建议使用 sqlcipher，将文件放在缓存文件夹中，这样它们就不会被 iTunes 备份并使用强密码。破解苹果文件系统有多难。

访问苹果文件系统和破解密码有多容易/难？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:42:53.623

我建议你看看[iphone-dataprotection](https://code.google.com/p/iphone-dataprotection/)。他们有一份关于 iOS 保护文件的详细说明列表，它是如何在硬件中完成的，以及一些潜在的漏洞。

引起我注意的前两个：

*   [iOS 安全](http://images.apple.com/ipad/business/docs/iOS_Security_May12.pdf)
*   [iPhone 数据深度保护](http://conference.hitb.org/hitbsecconf2011ams/materials/D2T2%20-%20Jean-Baptiste%20Be%CC%81drune%20&%20Jean%20Sigwald%20-%20iPhone%20Data%20Protection%20in%20Depth.pdf)

# c# - “对象”不包含“类型”的定义

> ID：15703691
> 
> 赞同：0
> 
> 时间：2013-03-29T12:56:24.557
> 
> 标签：c#, linq, entity-framework, asp.net-mvc-4

我遇到了这个错误，但我不知道它是什么。我一直在寻找答案，但没有人能回答主要问题，或者我只是错过了一些东西。这是我的代码：

```
Connection db = new Connection();

        public ActionResult Index()
        {

            ViewBag.query = from input in db.field
                            where input.ID_FIELD == 1
                            select new {
                                type = input.FIELD_TYPE 
                            };

            return View();
        } 
```

和视图侧

```
 @foreach (var item in ViewBag.query)
        { 
                @item.type//error here: 'object' does not contain a definition for 'type', why???
        } 
```

如果我用 where 子句做一个简单的选择，就可以了 public ActionResult Index() {

```
 ViewBag.query = from input in db.field
                            where input.ID_FIELD == 1
                            select input.FIELD_TYPE;

            return View();
        } 
```

我的问题可能是什么？我似乎有很多教程都在做同样的事情，而且效果很好，就像我刚刚做的那样： int[] number = { 1, 2, 3, 4, 5 };

```
 var query = from num in number
                        let x = num + num + num
                        select new {avg = x};

               foreach (var item in query)
            {
                Console.WriteLine(item.avg);

            } 
```

这里一切正常。为什么会出问题？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T13:03:47.323

您不能从方法返回匿名类型。相反，创建一个新类型并返回该类型。

例如：

```
ViewBag.query = from input in db.field
                            where input.ID_FIELD == 1
                            select new MyType() {
                                someField = input.FIELD_TYPE 
                            };

public class MyType
{
  public int someField {get;set;}//compatible with whatever type FIELD_TYPE is.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:01:10.323

在您的最后一个示例中，您没有使用“item.type”。除此之外， System.Object 不包含属性“类型”。不过，您可以使用“GetType()”。
请参阅[此处](http://msdn.microsoft.com/en-us/library/system.object.aspx)以供参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T13:50:28.180

问题是 ViewBag 是`dynamic`，但您存储在其中的*匿名对象不是，因此编译器无法直接访问其属性。*您可以只在 ViewBag 属性中存储一组值，而不是整个查询：

```
Connection db = new Connection();
public ActionResult Index()
{

    ViewBag.types = from input in db.field
                    where input.ID_FIELD == 1
                    select input.FIELD_TYPE;

    return View();
} 
```

进而

```
@foreach (var type in ViewBag.types)
{ 
    @type
} 
```

# yii - Yii 框架：试图获取非对象的属性

> ID：15703698
> 
> 赞同：2
> 
> 时间：2013-03-29T12:56:38.923
> 
> 标签：yii, php

我有的：

```
public function beforeValidate() {
    $offender = Accounts::model()->find(array('select'=>'id','condition'=>'username=:username','params'=>array(':username'=>$this->offender)));
    $informer = Accounts::model()->find(array('select'=>'id','condition'=>'username=:username','params'=>array(':username'=>$this->informer)));
    $this->offender = $offender->id;
    $this->informer = $informer->id;
    return parent::beforeValidate();
} 
```

我得到什么：

PHP 注意，也就是说，我正在尝试获取**非对象 $offender**和**$informer的属性“** **id** ” 。

 ****但这些都是 100% 的对象：

var_dump（$罪犯）：

> 对象（帐户）[46]

var_dump($informer):

> 对象（帐户）[46]

它实际上设置了正确的 id，但无论如何都会显示该通知。怎么了？

**已解决** 不能将其作为官方答案发布六个多小时，所以我把它留在这里：

实际上，问题出在双 beforeValidate() 调用中。

滥用控制器.php：

```
 if(isset($_POST['AbuseReport']))
    {
        $model->attributes=$_POST['AbuseReport'];
        if($model->validate())
        {
            $model->save();
        }
    } 
```

它第一次验证，并用正确的 ID`$model->validate()`替换`$this->offender`和。`$this->informer`第二次验证`$model->save();`，但模型`null`这次返回，因为`$this->offender`已经是 ID，但它需要用户名。

**对此的整个解决方案**是禁用第二次验证：`$model->save(false);`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:47:26.430

使用 isset 或 is_object

```
if(isset($offender->id) || is_object($offender->id)){
$this->offender = $offender->id;
$this->informer = $informer->id;
} 
```****

# r - 是否有 knitr 选项可以在包含的 R 文件中强制使用 UTF-8 编码？

> ID：15703702
> 
> 赞同：7
> 
> 时间：2013-03-29T12:56:51.653
> 
> 标签：r, utf-8, character-encoding, knitr

我正在使用带有 knitr knitr_1.1.6 的 Windows 7、R2.15.3 和 RStudio 0.97.320（在亿辉 3 月 12 日修复“编码：knitr 和子文件”问题后下载）

```
> sessionInfo()
R version 2.15.3 (2013-03-01)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=Spanish_Argentina.1252  LC_CTYPE=Spanish_Argentina.1252    LC_MONETARY=Spanish_Argentina.1252
[4] LC_NUMERIC=C                       LC_TIME=Spanish_Argentina.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] lattice_0.20-13    pixmap_0.4-11      RColorBrewer_1.0-5 ade4_1.5-1         pander_0.3.1      
[6] xtable_1.7-1      

loaded via a namespace (and not attached):
[1] digest_0.6.3   evaluate_0.4.3 formatR_0.7    grid_2.15.3    knitr_1.1.6    stringr_0.6.2  tools_2.15.3 
```

我在这样的文件中有我的 R 代码：

```
## @knitr RunMyCode 
print('Called from .R file: á é í ó ú ñ')  

# Workaround
my.text <- 'á é í ó ú ñ'
Encoding(my.text) <- "UTF-8"
print(my.text) 
```

我从这样的 Rmd 文件中调用它：

```
Title
========================================================
Spanish text: á é í ó ú ñ

Use it from .Rmd code: it comes out right...
```{r}
print('á é í ó ú ñ')
```

```{r ReadFunctions, cache=FALSE, echo=TRUE, eval=TRUE}
read_chunk('TestSpanishText.R')
```

Spanish text comes out garbled here:
```{r RunMyCode, echo=TRUE, eval=TRUE, cache=TRUE, dependson=c('ReadFunctions')}
``` 
```

我的问题是在 .R 文件中输入的西班牙语字符（在 RStudio 中以 UTF-8 编码）。如果在 Rmd 文件中输入这些字符是可以的（父文件和子文件都可以正常工作），但在 R 文件中则不行。正如您在下面看到的，`Encoding()`确实提供了一种解决方法，但我想知道是否还有其他方法，例如全局选项？如果我使用 Encoding()，我会在 RStudio 控制台中遇到相反的问题......

```
Title

Spanish text: á é í ó ú ñ

Use it from .Rmd code: it comes out right...

print("á é í ó ú ñ")
## [1] "á é í ó ú ñ"
read_chunk("TestSpanishText.R")

Spanish text comes out garbled here:    
print("Called from .R file: Ã¡ Ã© Ã­ Ã³ Ãº Ã±")
## [1] "Called from .R file: Ã¡ Ã© Ã­ Ã³ Ãº Ã±"

# Workaround
my.text <- "Ã¡ Ã© Ã­ Ã³ Ãº Ã±"
Encoding(my.text) <- "UTF-8"
print(my.text)
## [1] "á é í ó ú ñ" 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T03:24:44.650

理想情况下，我应该有一个`encoding`论点`read_chunk()`，但由于您使用的是`UTF-8`，这可能有效：

```
read_chunk(lines = readLines("TestSpanishText.R", encoding = "UTF-8")) 
```

请先试试这个。如果它不起作用，我将添加一个`encoding`参数。无论如何，我确信这肯定有效（只是稍微长一点）：

```
con = file("TestSpanishText.R", encoding = "UTF-8")
read_chunk(con)
close(con) 
```

# solr - Solr 中的 facet 是什么意思？

> ID：15703703
> 
> 赞同：8
> 
> 时间：2013-03-29T12:57:01.670
> 
> 标签：solr

你能解释一下吗，什么是方面？我的理解是，假设我有以下文件。

```
State  Country
karntaka India
Bangalore India
Delhi     India
Noida     India 
```

它将多个相同的字段值折叠为单个值并返回该值出现的次数。现在，当我在“国家”字段上搜索时，显然我得到了 4 次印度，所以我保持 facet=on 和 facet.field=Country，目的是只获得一次印度，但是当我发起查询时，我是得到
一些奇怪的结果

```
<lst name="responseHeader">
  <int name="status">0</int>
  <int name="QTime">6</int>
</lst>
<result name="response" numFound="4" start="0">
  <doc>
    <str name="country">India</str></doc>
  <doc>
    <str name="country">India</str></doc>
  <doc>
    <str name="country">India</str></doc>
  <doc>
    <str name="country">India</str></doc>
</result>
<lst name="facet_counts">
  <lst name="facet_queries"/>
  <lst name="facet_fields">
    <lst name="country">
      <int name="a">4</int>
      <int name="d">4</int>
      <int name="di">4</int>
      <int name="dia">4</int>
      <int name="i">4</int>
      <int name="ia">4</int>
      <int name="in">4</int>
      <int name="ind">4</int>
      <int name="indi">4</int>
      <int name="india">4</int>
    </lst>
  </lst>
  <lst name="facet_dates"/>
  <lst name="facet_ranges"/>
</lst>
</response> 
```

谁能帮我理解。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:49:16.137

如果您有一个`Washington, USA`条目，则构面将报告 4 个结果`India`和 1个结果`USA`。

使用`string`字段类型。您似乎使用了带有小写字母和 n 语法的（文本）字段，例如，这可能会使将 India 拼写为 Inde 的人受益。字符串字段不会像这样处理，因此它最适合用于分面的字段。

# java - 在字符串中查找电子邮件

> ID：15703704
> 
> 赞同：11
> 
> 时间：2013-03-29T12:57:02.667
> 
> 标签：java, regex

我正在尝试从字符串中获取电子邮件，例如：

`"*** test@gmail.com&&^ test2@gmail.com((& ";`

```
private static Pattern p = Pattern.compile("(^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$)"); 
```

上面的代码可以收到一封电子邮件。

我怎样才能得到所有？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-29T13:00:16.867

尝试

```
 String s = "*** test@gmail.com&&^ test2@gmail.com((& ";
    Matcher m = Pattern.compile("[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+").matcher(s);
    while (m.find()) {
        System.out.println(m.group());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:04:05.183

只需删除`^`和`$`锚。

# ios - postNotificationName si 没有被调用？

> ID：15703709
> 
> 赞同：0
> 
> 时间：2013-03-29T12:57:17.137
> 
> 标签：ios, nsnotificationcenter, presentmodalviewcontroller

大家好`postNotificationName`，在以下情况下不会被调用：`viewcontrollerA`当我点击一个按钮时，用户必须登录。所以我`presentmodal`为登录做了一个。就在呈现模态之前，我添加了通知。用户登录后我调用`postNotificationName` 然后关闭模式。但是观察者永远不会被调用。我还注意到，如果我不关闭观察者被调用的模态。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:16:13.010

添加通知可能为时已晚，因为该模态控制器正在被释放。无论如何，您真的不应该为此目的使用通知。您可以使用委托，也可以将信息直接传递回 viewControllerA。在模态视图控制器中，您可以使用 self.presentingViewController 获取指向 viewControllerA 的指针。您可以在 ViewControllerA 中有一个 BOOL 属性（我们称之为 isLoggedIn），并在您关闭它之前从模态视图控制器中设置它的值。

```
self.presentingViewController.isLoggedIn = YES; 
```

# ruby-on-rails - :disable_with 不适用于多个按钮

> ID：15703713
> 
> 赞同：1
> 
> 时间：2013-03-29T12:57:25.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3, link-to

一个按钮`:disable_with`工作正常。

```
<%= link_to change_status_path(post), :class => "btn btn-large btn btn-danger", :disable_with => "<i class=\"icon-eye-close\"></i> #{t('.unpublish')}",  :confirm => t('.sure_unpublish'), :method => :put do %>
  <i class="icon-eye-close"></i>
  <%= t('.unpublish') %>
<% end %> 
```

但是，如果我添加其他按钮：

```
<%= link_to change_status_path(post), :class => "btn btn-large btn btn-danger", :disable_with => "<i class=\"icon-eye-close\"></i> #{t('.unpublish')}",  :confirm => t('.sure_unpublish'), :method => :put do %>
  <i class="icon-eye-close"></i>
  <%= t('.unpublish') %>
<% end %>

<%= link_to change_status_path(cv), :class => "btn btn-large btn btn-success", :disable_with => "<i class=\"icon-eye-open\"></i> #{t('.publish')}", :confirm => t('.sure_publish'), :method => :put do %>
  <i class="icon-eye-open"></i>
  <%= t('.publish') %>
<% end %> 
```

:disable_with 不适用于多个按钮。

**我究竟做错了什么？**

# iphone - 检查 plist 文件中是否存在字符串

> ID：15703716
> 
> 赞同：1
> 
> 时间：2013-03-29T12:57:46.423
> 
> 标签：iphone, ios6, uiimage, plist, xcode4.5

大家好，我尝试检查我的 plist 文件中的单行 STRING，在我的详细视图中，我需要实现一个 IF，例如：

```
NSString *data = [[NSBundle mainBundle] pathForResource:@"name" ofType:@"plist"];
NSMutableDictionary *dataDict = [[NSMutableDictionary alloc] initWithContentsOfFile:data];
self.myMutableDictionary = dataDict;

    if (name.text == [myMutableDictionary objectForKey:@"emittente"]){

        UIImage *image = [UIImage imageNamed:@"star_on.png"];
        [Star setImage:image];

    } else {

        UIImage *favImg = [UIImage imageNamed:@"star_Off.png"];
        [Star setImage:favImg];

    } 
```

但是dosent工作，我认为没有在plist文件中阅读，有什么想法或方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:03:26.397

实际上，您的代码看起来几乎没问题。只需检查以下内容：

您的 plist 是否包含`@"emittente"` **顶层**的密钥？如果没有，您必须降低您的字典或数组才能到达正确的级别。

此外，您正在比较 if 语句中的指针，而不是字符串。改用这个：

```
if ([name.text isEqualToString:myMutableDictionary[@"emittente"]) ... 
```

* * *

顺便说一句：您不应该使用大写的实例变量名称。

# ruby-on-rails - 设计在其他页面中显示 Flash 消息

> ID：15703729
> 
> 赞同：1
> 
> 时间：2013-03-29T12:58:58.893
> 
> 标签：ruby-on-rails, devise, flash-message

登录后，如果我转到 /users/edit 页面，我会收到 Flash 消息“您已成功登录”。

在注册控制器中，我尝试了：

```
flash.now  # either this or below one
flash.discard 
```

同样，我尝试过类似的布局

```
 <% if flash[:alert] || flash[:error] || flash[:notice] %>
       <%= content_tag :div, :class => "alert alert-info info-inside" do -%>
          <button class="close" data-dismiss="alert">×</button>
          <%= flash.now[:alert] if flash[:alert] %>
          <%= flash.now[:error] if flash[:error] %>
          <%= flash.now[:notice] if flash[:notice] %>
       <% end -%>
    <% end %> 
```

此外，如果我创建产品并进入其他页面，它会显示错误的 Flash 消息。刷新时它会消失。

请告诉我如何避免此类闪现消息。我在我的布局文件和需要的控制器中尝试了 flash.now 和 flash.discard。但这对我没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:47:53.337

试试下面的代码。它检查是否确实存在闪存消息，然后获取成功消息和错误消息。

```
<% if flash.present? %>
<div id="flash" class="flash">
<% flash.each do |name, msg| %>
  <div class="alert alert-<%= name == :notice ? "success" : "error" %>">
    <%= content_tag :div, msg, id: "flash_#{name}" if msg.is_a?(String) %>
  </div>
<% end %> 
```

# git - .gitignore 从哪里起作用？

> ID：15703731
> 
> 赞同：-1
> 
> 时间：2013-03-29T12:59:05.600
> 
> 标签：git, push, gitignore

（对 git 来说非常新！）

.gitignore 指示有效，因为

*   gitignore 文件保存在本地，它可以防止一些特殊文件的推送或者*   因为 gitignore 文件已经提交/放置在服务器上，并且从那里它说某些文件不允许在“中央存储库”上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T13:07:41.327

Git 会查看 .gitignore 文件的本地版本来确定要忽略的内容。但是，它不会阻止您提交被忽略的文件。相反，它使提交此类文件变得更加困难（从而避免了许多错误）。

但是，.gitignore 通常放置到存储库本身，这样您就不需要每次克隆时都从头开始编写它。

总结一下，

*   远程存储库上的 .gitignore 什么都不做；
*   local .gitignore 可以防止您将垃圾文件提交到本地仓库，从而通过将垃圾推送到远程仓库来污染远程仓库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T13:03:17.683

它们都没有，`.gitignore`文件阻止您在**本地**存储库中提交某些文件。

这是不将文件推送到服务器的副作用`.gitignore`，因为您永远不会将这些文件提交到本地存储库中。

# asp.net-mvc - 将字符串作为整数数组映射到控制器

> ID：15703732
> 
> 赞同：0
> 
> 时间：2013-03-29T12:59:05.663
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-binding

我的视图中有一个文本框，其中包含以下值：

“1、3、5、8”或

“1；3；5；8”。

是否可以将这些值作为整数数组映射到控制器方法？

```
[HttpPost]
public ActionResult AddUsers(int[] values)
{
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:42:25.500

**URL 应如下所示。在 JQuery 中，您可以根据 TextBox 值准备 URL。**

**[http://abc.com/ControllerName/ActionName/?id=1&id=2](http://abc.com/ControllerName/ActionName/?id=1&id=2)**

**动作方法**

```
[HttpPost]
public ActionResult Index(int[] id)
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:12:00.510

您可以创建自定义模型绑定器。添加一个类，说`ArrayIntModelBinder`并实现[IModelBinder](http://msdn.microsoft.com/en-us/library/system.web.mvc.imodelbinder%28v=vs.108%29.aspx)接口：

```
public class ArrayIntModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        if (controllerContext == null)
            throw new ArgumentNullException("controllerContext");
        if (bindingContext == null)
            throw new ArgumentNullException("bindingContext");

        string values = bindingContext.ValueProvider.GetValue("values").AttemptedValue;
        return Array.ConvertAll(values.Split(new[] { ',', ';' }), int.Parse);
    }
} 
```

在视图中，您有文本框：

```
@using (Html.BeginForm())
{
    <input type="text" name="values"/>
    <input type="submit" value="submit"/>
} 
```

并将新模型绑定器应用于您的操作

```
[HttpPost]
public ActionResult AddUsers([ModelBinder(typeof(ArrayIntModelBinder))]int[] values)
{
    ...
} 
```

或者您可以在`Application_Start`.

当然，这个版本的模型绑定器非常简化，只是为了给你一个想法。您至少必须对输入字符串进行一些验证。希望这可以帮助。

# ios - 我的代码有什么问题？(UIActionSheet)

> ID：15703733
> 
> 赞同：0
> 
> 时间：2013-03-29T12:59:06.707
> 
> 标签：ios, objective-c, cocoa-touch

这段代码创建 UIActionSheet 有什么问题？它在抱怨委托：自我，但我不知道为什么。这是我的代码：

```
-(IBAction)SocialButtonPressed:(id)sender{    
    UIActionSheet *social = [[UIActionSheet alloc]initWithTitle:@"Share" 
                                                       delegate:self 
                                              cancelButtonTitle:@"Cancel"
                                         destructiveButtonTitle:@"Twitter" 
                                              otherButtonTitles:@"Facebook", @"iMessage", @"Mail", nil];

    [social showInView:self.view];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:03:00.410

使您的类符合该协议：

```
@interface MyClass : NSObject <UIActionSheetDelegate> 
```

# javascript - 如何提高视网膜 ipad 上的画布性能？

> ID：15703735
> 
> 赞同：2
> 
> 时间：2013-03-29T12:59:17.857
> 
> 标签：javascript, canvas, html5-canvas, retina-display

我们正在尝试优化游戏，它在 ipad 2 上运行良好，但简单的精灵动画在视网膜 iPad 上运行非常缓慢。我们使用的是 Safari 浏览器。

我们使用 CSS 来扩展应用程序。起初，我们尝试使用 libcanvas 框架，但后来切换到纯 HTML5 画布。我们尝试应用 -webkit-transform: translate3d(0,0,0); hack，但一点运气都没有。我们正在使用 webkitRequestAnimationFrame 方法。

我们做drawImage的系列：

```
ctx.drawImage(anim,
                        frame * widthFrame,
                        0,
                        widthFrame,
                        widthFrame,

                        devicePixelRatio * shape.x +0.5|0,
                        devicePixelRatio * shape.y +0.5|0,
                        devicePixelRatio * shape.width,
                        devicePixelRatio * shape.height); 
```

其次是

```
window.webkitRequestAnimationFrame(draw,root) 
```

测试用例： http: [//jsfiddle.net/LJRXb/7/](http://jsfiddle.net/LJRXb/7/)高分辨率 [http://jsfiddle.net/AsfcL/1/](http://jsfiddle.net/AsfcL/1/)低分辨率

任何想法我们可以做些什么来提高性能？应用程序有什么问题吗？有没有更好的方法来执行精灵动画？感谢您的关注和专家建议。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-09T20:47:09.027

> 我们正在使用 CSS 来扩展应用程序

我认为您的意思是您正在通过 CSS 设置画布 CSS 宽度和高度？这会扼杀性能。您需要在画布本身上进行缩放，而不是缩放画布元素的 CSS 属性。像这样将画布设置为宽度/高度 100%：

```
<canvas id="myCanvas" width="100%" height="100%></canvas> 
```

然后使用画布上下文 setScale() 相应地绘制，例如

```
var canvas = document.getElementById('myCanvas'),
    ctx = canvas.getContext('2d');

ctx.setScale(myScaleX, myScaleY);
... 
```

# c# - 如何修复最佳重载方法匹配有一些无效参数？

> ID：15703737
> 
> 赞同：2
> 
> 时间：2013-03-29T12:59:20.437
> 
> 标签：c#

我在标题中收到错误，代码有什么问题？我认为这是一个语法错误，但我不确定，因为我没有太多关于错误实际含义的信息。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication2
{

class Program
{

    static void Main(string[] args)
    {

        Console.WriteLine("Please Input Number of Rows you want to make in your pyrimid: ");

        int num = int.Parse(Console.Read()); // error here

        Console.WriteLine(num);// Just to check if it is getting the right number
        Console.Read();//This is Here just so the console window doesn't close when the program runs

    }
}
} 
```

### 编辑：

只是为了澄清，我希望代码只是从用户那里获取一个数字，然后打印用户输入的数字。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T13:01:42.670

`int.Parse`接受一个字符串作为参数。用于`Console.ReadLine()`从用户获取字符串，然后将其传递给`int.Parse`

```
int num = int.Parse(Console.ReadLine()); 
```

请注意，`FormatException`如果用户输入的内容无法识别为`int`. 如果您不确定用户是否会输入一个好的数字（我总是不这样做），请使用`TryParse`. 下面给出示例

```
int value;

if (int.TryParse(Console.ReadLine(), out value))
    Console.WriteLine("parsed number as: {0}", value);
else
    Console.WriteLine("incorrect number format"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T13:01:56.673

问题是 Console.Read() 返回一个 int，但 int.Parse 需要一个字符串。只需将其更改为

```
int num =Console.Read(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T13:02:58.293

## `Console.Read()`和 ASCII

这是因为[`Console.Read()`](https://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC8QFjAA&url=http://msdn.microsoft.com/en-us/library/system.console.read.aspx&ei=XZJVUeOfK4rUkAWzuYCQAw&usg=AFQjCNFlewuITgj6ELVvD2S7oVoS5u-Cxw&bvm=bv.44442042,d.dGI)实际上返回 and 而`int`不是 a `string`。它返回所按下键的 ASCII 码，您需要将其转换为字符，然后转换为字符串，然后解析它。

```
var val = int.Parse(((char)Console.Read()).ToString()); 
```

请注意，它`Console.Read()`不会以您认为的格式返回整数，而是实际输出的值，`0`因为它们是**键码**而不是您按下的字符。`9``60``70`

 **[请参阅此处的 ASCII 表](http://www.asciitable.com/)

## `Console.ReadLine()`

另一种可能更好的解决方案是使用[`Console.ReadLine()`](https://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http://msdn.microsoft.com/en-au/library/system.console.readline.aspx&ei=WZJVUeGBKon0lAWA8YHIDg&usg=AFQjCNGQ3SSqv6maaLYvnHzo5Bir1sDi5Q&bvm=bv.44442042,d.dGI)which 返回`string`

```
var val = int.Parse(Console.ReadLine()); 
```

## 警告

使用时应始终小心，[`int.Parse()`](https://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http://msdn.microsoft.com/en-us/library/system.int32.parse.aspx&ei=YZJVUcK1LYfvlAW5pIHICw&usg=AFQjCNHQUKICz4gfgfKygtnYm0j_XZ_hMQ&bvm=bv.44442042,d.dGI)因为如果提供的字符串不是数字，它将引发异常。更好的选择是使用[`int.TryParse()`](https://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx&ei=ZJJVUYziEIK8kAW9w4DADQ&usg=AFQjCNFsVKYA0wc120ikLcXFOxNPRxRGcw&bvm=bv.44442042,d.dGI)which 你给出一个`out`参数并返回解析是否成功。

```
string text = Console.ReadLine();
int val;
if (int.TryParse(text, out val))
{
    // It is a number
}
{
    // It is not a number
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T13:02:21.757

你得到那个的原因是因为 Console.Read 返回一个 int

[http://msdn.microsoft.com/en-us/library/system.console.read.aspx](http://msdn.microsoft.com/en-us/library/system.console.read.aspx)

而且它不能解析一个int，它只能解析字符串。

您可能想要 Console.ReadLine - 它返回一个字符串。**

# character-encoding - 字符集数据库

> ID：15703740
> 
> 赞同：0
> 
> 时间：2013-03-29T12:59:35.963
> 
> 标签：character-encoding, collation

我有以下字符集问题。

1.  通过表单用户添加名称信息（像åäö这样的字符很常见） - 到目前为止没问题
2.  Mysqli 将名称添加到数据库 - 到目前为止没问题
3.  在数据库中像åäö这样的字符显示为例如Ã¶ - 问题
4.  当获取包含 ö 的名称信息并将其显示在页面上时，它们会正确显示，例如 åäö。

但是，我不认为在数据库中有像 Ã¶ 这样的字符看起来不错。

我的字符集问题在哪里？我的数据库排序规则是 utf8_swedish_ci，输入 MyISAM。

编辑，我的代码：

```
try {               
                    // Create DB object
                    $db = Db::factory($this->type, $this->creds);

                    // Create a prepared statement
                    $sql = new Sql($db, 'user');
                   // This doesnt work  $sql->("SET NAMES 'utf8'");

                    $sql->insert(array('firstname' => '?', 'surname' => '?', 'email' => '?', 'password' => '?'));

                    // Prepare the statement, bind the parameters and execute
                    $db->adapter()->prepare($sql);
                    $db->adapter()->bindParams(array('firstname' => $post['firstname'], 'surname' => $post['surname'],
                                                    'email' => $post['email'], 'password' => $encryptedPassword));
                    $db->adapter()->execute();

                    $this->sendUserData($post['email'], $password);

                } catch (\Exception $e) {
                    echo $e->getMessage() . PHP_EOL . PHP_EOL;
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:02:24.930

您可能需要将连接的排序规则设置为 UTF-8，默认情况下为 iso-8859-1。尝试

```
mysql_set_charset("utf8"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:44:34.653

该框架不允许将选项传递给 PDO，因此您必须执行以下操作：

```
$db = Db::factory($this->type, $this->creds);
$db->adapter()->exec("SET names 'UTF8'"); 
```

# c++ - C++,Windows编程

> ID：15703743
> 
> 赞同：0
> 
> 时间：2013-03-29T12:59:40.483
> 
> 标签：c++

我想弄清楚一件事，但我不知道该怎么做，这让我很生气。

我得到了一个代码，如果`VK_RETURN`按下飞机就会爆炸。问题是我希望计算机在`VK_RETURN`满足特定条件时执行指令，假设我得到了

```
if (calculus == calculus2) 
```

如果满足该条件，我希望系统执行我按键时通常会执行的操作`RETURN`。有什么办法可以让电脑“按”回车键？

谢谢 ！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-29T21:28:23.697

是的，伙计们，我需要发送返回键..我要看看 sendinput api，移动代码会改变算法，它不起作用，因为我必须制作一些我不想使用的全局变量，我正在做的事情是一个像猛龙一样的游戏，它几乎是完整的。

# c - 重新分配有什么问题？

> ID：15703744
> 
> 赞同：5
> 
> 时间：2013-03-29T12:59:46.407
> 
> 标签：c

开始在 C 中学习 malloc.h。想法是创建动态数组。这是代码：

```
#include <stdio.h>
#include <conio.h>
#include <malloc.h>

int main() {
    int *array = (int*)malloc(sizeof(int));
    int i, j, val;
    for (i = 0;; i++) {
        array = (int*)realloc(array, sizeof(int) + sizeof(*array));
        printf("Enter array[%d]=", i);
        scanf("%d", (array + i));
        if (*(array + i) == 0) break;
    }
    for (j = 0; j < i; j++) {
        printf("[%d] = %d\n", j, *(array + j));
    }
    getch();
    return 0;
} 
```

结果是

```
Enter array[0]=1
Enter array[1]=2
Enter array[2]=3
Enter array[3]=4
Enter array[4]=5
Enter array[5]=6
Enter array[6]=7
Enter array[7]=8
Enter array[8]=9
Enter array[9]=10
Enter array[10]=0
[0] = 1
[1] = 2
[2] = 3
[3] = 4
[4] = 5
[5] = 6
[6] = 7
[7] = 8
[8] = 542979931
[9] = 875896893 
```

每次，`>=8`值都是随机的。我只是不知道为什么会发生，所以有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T13:03:27.523

您在代码中*未定义的行为*。我想，这样做：

```
array=(int*)realloc(array,sizeof(int)+sizeof(*array)); 
```

您期望，这`sizeof(*array)`将返回整个数组的大小，对吗？但事实并非如此。`sizeof`是在编译时计算的，doing`sizeof(*array)`实际上与`sizeof(int)`.

所以，为了使这个数组可扩展，你需要有额外的变量，保存当前的元素数量并执行以下操作：

```
array=(int*)realloc(array, sizeof(int) + current_size_of_array * sizeof( int ) ); 
```

当您实际添加一个元素时，where`current_size_of_array`将在 的每个循环上递增。`for`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T13:03:09.617

`sizeof(*array)`没有告诉你数组有多大**。**它告诉你一个 int 占用了多少字节。所以每次调用 realloc 只是为两个 int 值分配内存。更改`realloc`调用以分配`sizeof(int)`所需的整数倍数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T13:03:33.100

`sizeof(int)+sizeof(*array)`

您认为这`sizeof(*array)`是已经分配的字节数。你错了，`sizeof(*array)`是一个的大小`int`。所以你超出了你的缓冲区，最终导致你出现问题。

在你问之前，没有标准的方法来获得已经分配的大小。通常您需要自己存储它（或者在 C++ 中使用比 更用户友好的界面`malloc`，例如`vector`）。在这种情况下，您不需要现有尺寸，您可以从`i`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T13:08:58.783

由库分配的内存块的大小`malloc`是已知的（`free`只需要指针），但没有可移植的方法来取回该数字。您必须将当前大小存储在其他变量中，以便分配更多空间。

在运算`sizeof(*array)`符中`sizeof`仅考虑表达式的**类型**，在您的情况下`(*(int *))`，换句话说与`sizeof(int)`.

在 C++ 中，记住动态数组中允许增加大小的元素数量的工作是由标准类完成的`std::vector`。

作为旁注，请记住这`x = realloc(x, ...);`是一个不好的习惯用法，因为在分配失败的情况下，您的指针`x`将被`NULL`泄漏的内存覆盖。

# sql - 性能改进。通过制造麻烦来订购

> ID：15703748
> 
> 赞同：0
> 
> 时间：2013-03-29T13:00:09.443
> 
> 标签：sql

我正在尝试从过去 10 天提高此查询的性能，但它不起作用。主要是该`order by`子句需要时间来执行，因为当我执行查询时删除它需要几秒钟，但如果包含 order by 那么它需要超过 5 分钟。以下是查询-

```
Select a.user_vchr_char2, 
       a.voucher_id, 
       a.uap_clm_pymnt_stat, 
       a.pymnt_id_ref, 
       to_char(cast(a.lastupddttm as timestamp), 'YYYY-MM-DD-HH24.MI.SS.'),   
       to_char(a.pymnt_dt,'YYYY-MM-DD'),to_char(a.cancel_dt,'YYYY-MM-DD'),   
       to_char(a.scheduled_pay_dt,'YYYY-MM-DD'), to_char(a.transaction_date,'YYYY-MM-DD'),         
       a.descr254_mixed, 
       a.multiple_flg, 
       a.name1, a.name2, a.address1, a.address2, a.address3,     
       a.address4,a.city, a.state, a.postal, a.country, a.pymnt_method, a.gross_amt,  
       a.currency_pymnt 
FROM table_name a 
where  to_char(a.LASTUPDDTTM,'YYYY-MM-DD HH24:MI:SS') > :1 
order by a.user_vchr_char2, a.pymnt_cnt, a.uap_clm_pymnt_stat 
```

我尝试`index`在使用的表中添加`order by`但没有明显改善。谁能帮忙。请简单，因为我对这个领域完全陌生。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:08:53.720

I recommend you to use a temp table.

```
IF EXISTS(SELECT name FROM tempdb.sys.objects WHERE name='##temp_table')
BEGIN
    DROP TABLE ##temp_table
END

Select a.user_vchr_char2, a.voucher_id, a.uap_clm_pymnt_stat, a.pymnt_id_ref, to_char(cast(a.lastupddttm as timestamp), 'YYYY-MM-DD-HH24.MI.SS.'), to_char(a.pymnt_dt,'YYYY-MM-DD'),to_char(a.cancel_dt,'YYYY-MM-DD'), to_char(a.scheduled_pay_dt,'YYYY-MM-DD'), to_char(a.transaction_date,'YYYY-MM-DD'), a.descr254_mixed, a.multiple_flg, a.name1, a.name2, a.address1, a.address2, a.address3, a.address4,a.city, a.state, a.postal, a.country, a.pymnt_method, a.gross_amt, a.currency_pymnt
INTO ##temp_table
FROM table_name a 
where to_char(a.LASTUPDDTTM,'YYYY-MM-DD HH24:MI:SS') > 1 
```

And then you can use order by clause like this.

```
SELECT *
FROM ##temp_table
order by a.user_vchr_char2, a.pymnt_cnt, a.uap_clm_pymnt_stat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:07:52.133

first if your index was not function based then it wont be used. Do an explain plan and you can verify.

a function based index in oracle is specified like this.

```
create index foo on table_name(to_char(a.LASTUPDDTTM,'YYYY-MM-DD HH24:MI:SS')); 
```

next since there are so many character editing functions I suggest using index organized table This moves the data to the index so it does not require several lookups to load the row data saving time. That is the fastest index you can do in oracle.

```
create table table_name(a int, b int, c varchar2(20 byte))organization index tablespace users   
pcthreshold 20 including a,b 
```

here a and b at end of create clause map to the index columns. order by does internal sort so if table is parallel this is a huge hit. alternative to get magnitude of performance for general indexes add

```
parallel 4 (or how many parallel index queries you want) 
```

example

```
create index foo on table_Name(to_char(a.LASTUPDDTTM,'YYYY-MM-DD HH24:MI:SS')) parallel 4 
```

Note that partitioning can help but also slow it down if global indexes are used. This is only used for tables with large amounts of rows (ex. 10,000,000 rows). Oracle performance suffers after 1 million rows in a table. Not sure how many rows are in your table.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T13:30:09.290

与 order by 的问题无关，但您可以通过在 where 子句中不使用函数来提高性能。而不是这个：

```
where  to_char(a.LASTUPDDTTM,'YYYY-MM-DD HH24:MI:SS') > :1 
```

寻找一种方法来做到这一点：

```
where a.LastUpdDtTm >= a start date 
```

# css - 在文本框焦点上，如何仅使用 CSS 更改元素的背景颜色？

> ID：15703752
> 
> 赞同：1
> 
> 时间：2013-03-29T13:00:18.153
> 
> 标签：css, css-selectors

我目前有一个像这样设置多个字段的表单（我们使用的是 Twitter Bootstrap）：

```
<div class="input-prepend">
  <span class="add-on"><i class="icon-envelope"></i></span>
  <input id="contactEmail" type="text" placeholder="E-mail" />
</div> 
```

我想要做的是当文本框获得焦点（`#contactEmail:focus`）时，改变背景颜色`span.add-on`。我熟悉 CSS 选择器来获取[下一个兄弟](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)，但这只有在文本框紧接*在前面* `span.add-on`时才有效。有没有办法只使用 CSS 来获取前一个兄弟姐妹？我们不支持 IE7 或更低版本，所以任何适用于 IE8+ 的东西都会很棒。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:03:34.830

不，没有办法**只**使用CSS 来选择前一个兄弟姐妹。然而，它可以简单地通过使用 Javascript/jQuery（分别为[.previoussibling](http://www.w3schools.com/dom/prop_element_previoussibling.asp)和[.prev()](http://api.jquery.com/prev/)）来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:04:47.877

使用 css 实现以前的兄弟是不可能的

# scala - 如何运行 sbt 命令并在执行后打开 shell

> ID：15703753
> 
> 赞同：0
> 
> 时间：2013-03-29T13:00:18.793
> 
> 标签：scala, sbt

如何在执行后运行 sbt 命令并打开 shell？

就像是：

```
$ sbt package shell 
```

这样在执行“包”任务后，sbt 会打开它的外壳，这样我就可以在那里运行更多命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:02:05.553

如果你在 Linux、OSX 或其他 Unix 风格上运行，你可以这样写：

```
sbt package && sbt 
```

在这里，我使用 Unix 管道运行裸 sbt 命令，该命令仅在先前`sbt package`成功时才打开 shell。

# internet-explorer - 在编辑模板表单 crm 2011 + IE10 上禁用按钮

> ID：15703766
> 
> 赞同：0
> 
> 时间：2013-03-29T13:01:18.403
> 
> 标签：internet-explorer, dynamics-crm-2011, internet-explorer-10

IE10中的模板编辑表单有什么问题？所有按钮都被禁用（如下图所示）。有没有什么办法解决这一问题？

![在此处输入图像描述](../Images/89b154812bb64f3e0888f896221b6734.png)

先感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:25:26.840

将浏览器模式更改为 IE 10 兼容性视图以解决 CRM 的许多问题。表单编辑器上的一些问题我仍然无法解决，并且不得不将虚拟机插入带有 IE 9 的机器中。

# python - 我的 SQLite 表达式哪里出错了？

> ID：15703767
> 
> 赞同：0
> 
> 时间：2013-03-29T13:01:19.977
> 
> 标签：python, sqlite

```
cursor.execute("INSERT INTO pattent VALUES ('%s','%s','%s','%s','%s','%s')" %(PattentNumber,PattentName,PattentInventors,PattentCompany,PattentFiledtime,PattentAbstract))
sqlite3.OperationalError: near "s": syntax error 
```

以上是我的 INSERT 句子。它适用于其他情况，但它说`sqlite3.OperationalError: near "s": syntax error`

我使用 Python，所有的 VALUES 都是文本。磨损在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T13:02:39.833

您不应该*使用*字符串格式，而是使用 SQL 参数：

```
cursor.execute("INSERT INTO pattent VALUES (?, ?, ?, ?, ?, ?)",
    (PattentNumber, PattentName, PattentInventors, PattentCompany, PattentFiledtime, PattentAbstract)) 
```

SQL 参数确保您的值被*正确*转义，防止 SQL 注入攻击并正确处理不同的类型。

# ios - 当我使用 iOS 设备时，Tesseract OCR 准确性降低

> ID：15703768
> 
> 赞同：2
> 
> 时间：2013-03-29T13:01:20.407
> 
> 标签：ios, ipad, ocr, tesseract

我正在我的一个客户 iPad 项目中使用 tesseract。当我使用模拟器时，我得到了 95% 的结果，但在设备 tesseracts 中，准确度却出乎意料地下降了！我在设备上获得了 30% 的准确率。

任何人都可以分享你的经验吗？为什么我的设备没有得到 95% 的准确结果？

# excel - 遍历vba中的excel切片器选项

> ID：15703773
> 
> 赞同：0
> 
> 时间：2013-03-29T13:01:42.313
> 
> 标签：excel, pivot, vba

我有一个透视图，它有一个切片器（和一个子切片器）连接到它。我想一个一个地遍历 vba 中的所有切片器选项，这将返回一个输出（这将在图表上显示一些东西，而不仅仅是一个空的图表区域）。

我怎么能在 VBA 中做到这一点？

**编辑** 我正在尝试使用此代码遍历切片器列表，但切片器选择永远不会改变：

```
For Each Si In ActiveWorkbook.SlicerCaches("Slicer_Afsnit").SlicerItems
    If (Si.HasData) Then
        Si.Selected = True '<<<<<<< this line here does nothing apparently!, the graphs stay the same always, when copied to new documents
        Set WDDoc = WDApp.Documents.Add
            For iCht = 1 To ActiveSheet.ChartObjects.Count
                ' copy chart as a picture
                ActiveSheet.ChartObjects(iCht).Chart.CopyPicture _
                    Appearance:=xlScreen, Size:=xlScreen, Format:=xlPicture

                WDApp.Selection.Range.PasteSpecial Link:=False, DataType:=wdPasteMetafilePicture, _
                    Placement:=wdInLine, DisplayAsIcon:=False

                WDApp.Selection.MoveEnd wdStory
            WDApp.Selection.Move
            Next

        WDDoc.SaveAs (ThisWorkbook.Path & "\" & FileFriendly(Si.Name) & ".doc")
        WDDoc.Close ' close the document

        'get mail for the department
        depmail = Cells(ActiveWorkbook.Sheets("Enheder").UsedRange.Find(Si.Name).Row, 2).value
        If Not (depmail = "") Then
        X = SendMail(depmail, "ugentlig audit", "Resultater for " & Si.Name, ThisWorkbook.Path & "\" & Si.Name & ".doc")
        End If
    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:39:20.213

问题已解决，请参阅问题下的评论。

# asp.net-mvc - Ninject 单例作用域

> ID：15703775
> 
> 赞同：3
> 
> 时间：2013-03-29T13:01:44.157
> 
> 标签：asp.net-mvc, scope, ninject

我想知道在 ASP.NET MVC 中 Ninject Singleton 作用域在哪些情况下可能有用。我在考虑依赖项没有任何可以更改的属性/变量的情况。例如一个映射器类，它只接收一个或两个对象并将其映射到一个新对象。

```
public class AccountMapper : IAccountMapper
{
  public IList<WebAccount> Map(Account[] accounts)
  {
    if (accounts == null)
        throw new ArgumentNullException("accounts");

    Account acct;
    List<WebAccount> authorizedAccounts = new List<WebAccount>();
    foreach (var account in accounts)
    {
        if (account.active == 0)
        {
            acct = new WebAccount     (                                                        
                                                account.active == 0 ? true : false,
                                                account.account_number,
                                                account.agreement_no                                                        
                                            );

            if (!string.IsNullOrEmpty(acct.AccountNumber))
                acct.AccountNumber = acct.AccountNumber.Trim();
            if (!string.IsNullOrWhiteSpace(acct.ArgreementNo))
                acct.ArgreementNo = acct.ArgreementNo.Trim();

            authorizedAccounts.Add(acct);

        }
    }
    return authorizedAccounts; 
```

} }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:47:20.960

是的，您可以使用该类，`SingletonScope()`因为它不包含任何可能受其他线程影响的属性或属性，但您还应该知道添加实例数据可能会破坏您的代码。

您可以在此处阅读有关 Singleton Scope 的更多信息：[https](https://github.com/ninject/ninject/wiki/Object-Scopes) ://github.com/ninject/ninject/wiki/Object-Scopes并查看其他意见：[When to use Singleton vs Transient vs Request using Ninject and MongoDB](https://stackoverflow.com/questions/3348106/when-to-use-singleton-vs-transient-vs-request-using-ninject-and-mongodb)

# oracle - SQL Loader 跳过第一个字符

> ID：15703779
> 
> 赞同：2
> 
> 时间：2013-03-29T13:01:53.340
> 
> 标签：oracle, csv, sql-loader

我正在通过 SQL Loader 将数据集加载到 oracle 数据库中。文件如下所示
：`ctl`

```
OPTIONS (DIRECT=TRUE)  
LOAD DATA   
CHARACTERSET WE8MSWIN1252   
INFILE test.csv  
 TRUNCATE  
 CONTINUEIF NEXT(1:1) = '#'  
 INTO TABLE FIETSKNOOPPUNTEN_A  
FIELDS TERMINATED BY '|' OPTIONALLY ENCLOSED BY '$$'   
TRAILING NULLCOLS   
(CODE,  
STREET,  
MUNICIPALITY,  
X,  
Y) 
```

记录如下所示：

```
70.00|Hogeweg|Aardenburg|18370.00|366787.00 
```

使用 SQL Loader 加载所有记录并且不会发生错误。忽略所有小数位，但也忽略第一列的第一个字符。在这种情况下，数据库显示该记录的代码为 0 而不是 70。当我在 csv 文件中的记录前面放置一个空格时，一切正常。
我已经尝试了几件事，例如通过 MS Access 重新创建文件，删除文件中的`OPTIONS`and`CHARCACTERSET`子句`ctl`，但我现在卡住了。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T14:27:45.877

我很确定第一个字符用于评估您的[`CONTINUEIF`](http://docs.oracle.com/cd/E11882_01/server.112/e22490/ldr_control_file.htm#SUTIL1102)子句。它在每一行上进行评估，并且第一个字符专门用于此子句。

据推测，您没有使用由`CONTINUEIF`（将多个不同的行动态连接到单个逻辑记录）启用的功能。删除此子句应该可以解决您跳过第一个字符的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:27:53.570

我想知道是否是使用 CONTINUEIF NEXT(1:1) = '#' 导致了这种情况。如果 SQL*Loader 正在检查第一个字符是否为 #，那么它是否会从第二个字符继续？尝试将其更改为 CONTINUEIF NEXT PRESERVE (1:1) = '#'

# vb.net - Convert.ToInt32 格式不正确

> ID：15703788
> 
> 赞同：1
> 
> 时间：2013-03-29T13:02:13.877
> 
> 标签：vb.net, winforms, error-handling, type-conversion

这行代码用于在我的数据库中输入一个项目的数量：

```
ins.Parameters.AddWithValue("@count", Convert.ToInt32(txtCount.Text)) 
```

它曾经可以工作，但现在我遇到了这个错误：输入字符串的格式不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:09:23.223

你最好使用[Int32.TryParse](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)而不是`Convert`. 如果转换不起作用，它将返回 false

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T13:05:56.553

可能您在 txtCount.Text 中输入了错误的值，可能是字符串值。那么有什么限制不能在该文本框中输入除整数值之外的任何其他值吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T13:11:21.340

该错误意味着您尝试从中解析整数的字符串实际上并不包含有效的整数。

验证“ **txtCount.Text** ”的值

# java - 如何检查按钮是否在按钮数组中？

> ID：15703795
> 
> 赞同：0
> 
> 时间：2013-03-29T13:02:47.803
> 
> 标签：java, android

我有两个按钮阵列。如何检查某个单击的按钮是否在数组中？我试过这个，但没有奏效：

```
private static final int[] idArrayA = {R.id.bA1, R.id.bA2, R.id.bA3, R.id.bA4, R.id.bA5, R.id.bA6, R.id.bA7, R.id.bA8};
private static final int[] idArrayB = {R.id.bB1, R.id.bB2, R.id.bB3, R.id.bB4, R.id.bB5, R.id.bB6, R.id.bB7, R.id.bB8};

final OnClickListener clickListenerA = new OnClickListener(){

        public void onClick(View v) {
               if (Arrays.asList(idArrayA).contains(v.getId())) {

                   Button button = (Button) v;
                   button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x003333));  

               }
        }
       }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:24:45.270

`Arrays.asList(idArrayA)`将产生`List<int[]>`而不是`List<Integer>`因此产生不好的结果。
通过简单地遍历它并将其元素添加到新的 List 从您的数组构造 List ：

```
List<Integer> arrayAsList = new ArrayList<Integer>(idArrayA.length); // List with initial capacity
for (int i : idArrayA) {
  arrayAsList.add(i);
} 
```

**或**将 idArrayA 声明为`private static final Integer[]`.

# java - 如何使用 Ajax 提交 jquery 表单？

> ID：15703805
> 
> 赞同：1
> 
> 时间：2013-03-29T13:03:20.923
> 
> 标签：java, jquery, ajax, jsp, spring-mvc

在我的 java 应用程序中，我使用 JQuery 提交表单。

这是我的jsp中的代码：

```
 <%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<fieldset id="profile_proffiesional">
    <form:form action="profile/awards" modelAttribute="AWARDS">
        <p>
            <label for="position">Position</label>
            <form:input path="position" tabindex="4" />
        </p>
        <p>
            <label for="location">Location</label>
            <form:input path="location" tabindex="5" />
        </p>
        <p>
            <label for="description">Description</label>
            <form:input path="description" tabindex="5" />
        </p>
        <p>
            <input type="submit" value="Add">
        </p>
    </form:form>
</fieldset>
<script>
    $('#AWARDS').ajaxForm({
        target : '#body',
        success : function(responseText, statusText, xhr, $form) {
            alert(responseText);
        },
        beforeSubmit : function() {
            $.blockUI({
                message : '<h1> Just a moment...</h1>'
            });
        }
    });
</script> 
```

问题是当我单击提交按钮时，表单所在的位置并显示带有警报的响应。当我单击`OK`警报窗口中的按钮时，相同的成功消息将打印在窗口上，代替表单。

当我刷新它并且成功消息将被删除并显示表单时，表单变得完全不可见。

但我想在警报而不是在屏幕上显示成功。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:06:55.620

删除`target : '#body'`就可以了。

该特定行使用响应更新正文的内容。

# android - Sherlock 动作条的动作项隐藏在设备 samsung grand 中

> ID：15703813
> 
> 赞同：0
> 
> 时间：2013-03-29T13:03:44.580
> 
> 标签：android

行动项目隐藏在设备三星盛大。我有 4 个菜单项，它们在所有设备中都显示相同，但​​是当我在盛大运行我的应用程序时，它隐藏了最后一项。菜单项顺序在 1\. Spinner 2\. Refresh image Button 3\. Add Image Button 4\. Search 5\. Filter Priority

菜单.xml

```
 <item
            android:id="@+id/Refresh"
            android:orderInCategory="100"
            android:icon="@drawable/ic_refresh"
            android:showAsAction="always"

        />

        <item
            android:id="@+id/Search"
            android:orderInCategory="100"
            android:icon="@drawable/ic_search"
            android:showAsAction="always"

        />

        <item
            android:id="@+id/AddMenu"
            android:orderInCategory="100"
            android:icon="@drawable/add"
            android:showAsAction="always"

        />

        FOR THE SPINNER
 <item
        android:id="@+id/menuSort"
        android:showAsAction="always"
        android:orderInCategory="100"
        android:actionLayout="@layout/action_sort"     

        />  

            <item
            android:id="@+id/overflow"
            android:orderInCategory="100"
            android:showAsAction="always"
            android:actionLayout="@layout/imagebutton" />
      <item
            android:id="@+id/delete"
            android:orderInCategory="100"
            android:title="Delete All"></item>

SORT LAYOUT FOR THE SPINNER

    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <com.actionbarsherlock.internal.widget.IcsSpinner
        android:id="@+id/ICSFilter"
        android:popupBackground="#004464"
         android:layout_marginRight="@dimen/my_view_margin1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    </LinearLayout> 
```

我认为问题在于我添加了微调器以使其向左，我已经留出了余量。是这个问题吗？？任何机构都可以有任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:06:19.087

第五个项目可能在溢出菜单中，可通过操作栏中的 ... 提示访问（如果您的设备没有 MENU 按钮）或按 MENU（如果您的设备有 MENU 按钮）。

# jquery - 使用 JQuery UI 对话框时提交操作被击中两次

> ID：15703817
> 
> 赞同：2
> 
> 时间：2013-03-29T13:03:55.310
> 
> 标签：jquery, asp.net-mvc-4, modal-dialog

我正在使用 JQuery 和引导程序编写一个 ASP.NET MVC 4 应用程序。

我的网站中有一个模态对话框功能，直到最近另一位开发人员在网站上进行了一些与样式相关的更改时，它才能正常工作。

以下是我在其中一个部分视图中编写的代码，我在 JQuery 对话框中打开它：

```
@using (Ajax.BeginForm("ChangeStatus",
    new AjaxOptions { UpdateTargetId = "AboutOrderContainer", HttpMethod = "POST" }))
{
    @Html.HiddenFor(m => m.OrderId)
    <table class="row-fluid">
        <tr>
            <td></td>
        </tr>
        <tr>
            <td>
                Comments&nbsp;(Optional):
            </td>
        </tr>
        <tr>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>
                @Html.TextAreaFor(m => m.Comments, new { @maxlength = 255, @rows=5 })
            </td>
        </tr>        
        <tr>
            <td>                
                <center>
                <input type="submit" title="OK" value="OK" class="btn" />
                    </center>
            </td>
        </tr>
    </table>        
} 
```

这在早期工作正常，因为每当用户点击“确定”按钮时，都会调用“ChangeStatus”操作，并且视图正在刷新。

但是现在，在该开发人员进行了一些更改之后，“ChangeStatus”会异步命中两次，从而导致运行时错误。我不确定是什么导致了这个问题。

以下是加载此对话框时加载的脚本文件：

1.  ajax.dialog.custom.js
2.  引导程序.js
3.  jquery-1.9.1.js
4.  jquery-migrate-1.1.1.js
5.  jquery-ui-1.10.2.js
6.  jquery-unobtrusive-ajax.js
7.  jquery.validate.js
8.  jquery.validate.unobtrusive.js
9.  现代主义-2.5.3.js
10.  onmediajquery.js
11.  电子商务网站-custom.js

所有脚本文件（ecommercesite-custom.js 除外）都是来自 JQuery 和引导站点的库。以下是 ecommercesite-custom.js 文件的代码：

```
$(document).ready(function () {

    $('input[class*=btn-submit]').click(function (event) {
        if (($(this).closest('form').valid())) {
            $(this).attr("disabled", true);
            $(this).closest('form').submit();
        }
        else {
            $(this).attr("disabled", false);
        }
    });

}); 
```

我不确定这里有什么问题。我试过删除上面的 js 文件（即第 11 号文件），但没有帮助。因此，您可以在考虑解决方案时忽略上述文件的任何含义。

有人有什么想法吗？重申在其他开发人员更改某些样式功能之前，相同的代码运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T13:08:46.077

听起来您可能会从脚本中提交一次表单，然后由于浏览器的默认行为而再次提交。尝试将此添加到处理程序的顶部：

```
event.preventDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:12:47.470

如果提交按钮具有特定的自定义属性，我通过更改 jquery.unobtrusive-ajax.js 文件以跳过异步调用来解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T13:13:34.680

你改变`input type="submit"`你`input type="button"`

在这里，您提交了两次表单，一次是表单的默认行为，另一次来自脚本

# go - Go 中的结构类型和多态性 - 编写一种可以对具有相同字段的两种类型进行操作的方法

> ID：15703818
> 
> 赞同：5
> 
> 时间：2013-03-29T13:03:59.643
> 
> 标签：go, structural-typing

在使用其他语言（如 Scala 和 OCaml）的结构类型之后，我开始研究 Go，并且我正在尝试在语言之间映射一些惯用技术。考虑以下类型

```
type CoordinatePoint struct {
    x int
    y int
    // Other methods and fields that aren't relevant
}

type CartesianPoint struct {
    x int
    y int
    // Other methods and fields that aren't relevant
} 
```

假设我们想编写一个对这两种类型都进行操作的方法来计算它们的极坐标表示，`func ConvertXYToPolar(point XYPoint) PolarPoint`. 如果`CartesianPoint`and类型为and字段`CoordinatePoint`定义了 getter 和 setter 方法，我们可以定义为这些方法的公共接口，允许我们对这两种类型进行操作，但就目前而言，接口不能声明字段，只能声明方法。`x``y``XYPoint`

基于此，我有几个问题：

1.  在 Go 中处理这个的惯用方式是什么？
2.  可以在不修改现有类型的情况下完成吗？
3.  我们能否保留类型安全，即避免`ConvertXYToPolar`在不使用空接口类型作为参数和手动转换的情况下进行定义？
4.  如果接口和隐式接口满足是 Go 中多态性的主要工具，那么接口定义中字段的禁止性是否受到限制？
5.  getter/setter 方法是否通常在结构上定义以规避此限制？
6.  设计决定背后是否有令人信服的理由*不*支持接口定义中的字段？

我发现嵌入式类型的简单性、隐式接口满足和基于接口的多态性是一种*非常*简单且吸引人的技术组合，可以提高代码的可重用性和可维护性，但是接口定义中的禁止字段使 Go 的结构化类型功能在我看来有些受限. 我错过了一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T13:06:50.607

通常的方法是使用组合：

```
type Point struct {
    x int
    y int
}

type CoordinatePoint struct {
    Point
    other stuff
}

type CartesianPoint struct {
    Point
    Other methods and fields that aren't relevant
} 
```

Go 语法让这种组合感觉更像是其他语言的继承。例如，您可以这样做：

```
cp := CoordinatePoint{} 
cp.x = 3
log.Println(cp.x) 
```

您可以调用带有`Point`as 参数的函数

```
doAThingWithAPoint(cp.Point) 
```

为了让你的点可以互换传递，你必须定义一个接口

```
type Pointer interface {
    GetPoint() *Point
}
func (cp CoordinatePoint) GetPoint() *Point {
    return &cp.Point
} 
```

然后，您将能够定义采用 a 的函数`Pointer`：

```
func doSomethingWith(p Pointer) {
    log.Println(p.GetPoint())
} 
```

另一种解决方案将基于定义`GetX`,的接口`SetX`，但我个人发现这种方法比必要的更重和更冗长。`GetY``SetY`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T13:17:55.990

我的初稿应该是这样的

```
package points

type XYPoint struct {
    X, Y int64
}

type CoordinatePoint struct {
    XYPoint
}

type CartesianPoint struct {
    XYPoint
}

type PolarPoint struct {
    R, T float64
}

type XYToPolarConverter interface {
    ConvertXYToPolar(point XYPoint) PolarPoint
}

func (cp *CoordinatePoint) ConvertXYToPolar(point XYPoint) PolarPoint {
    pp := PolarPoint{}
    // ...
    return pp
}

func (cp *CartesianPoint) ConvertXYToPolar(point XYPoint) PolarPoint {
    pp := PolarPoint{}
    // ...
    return pp
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T13:18:48.787

1.  通常，惯用的方法是使用 getter 和 setter。不太方便？也许。但至少目前是这样。
2.  是的。这就是鸭式打字的精髓。任何与接口匹配的类型都将被接受，无需显式实现。*编辑：*根据对此答案的评论，我误解了这个问题。答案是否定的，您需要为这些结构添加方法以匹配除`interface{}`.
3.  是的，使用 getter 和 setter。
4.  也许。我明白为什么 getter 和 setter 可能被认为不太方便。但据我所知，它们并没有严格限制你可以做什么。
5.  是的。这是我在其他人的代码和标准库中看到的方式。

# bash - 在 bash 中仅获取部分字符串的最简单方法

> ID：15703822
> 
> 赞同：4
> 
> 时间：2013-03-29T13:04:20.737
> 
> 标签：bash

喜欢听sky.fm，使用curl查询媒体信息

我现在使用的是：

```
curl -s curl http://127.0.0.1:8080/requests/status.json | grep now_playing 
```

这将返回：

```
"now_playing":"Cody Simpson - On My Mind" 
```

我想要的是：

```
Cody Simpson - On My Mind 
```

也许更好的是，将艺术家和标题放在单独的变量中。

```
artist: Cody Simpson
title: On My mind 
```

## 解决方案

```
#!/bin/bash
a=`curl -s http://127.0.0.1:8080/requests/status.json | grep -Po '(?<=now_playing":")[^"]+'`
artist=$(echo $a | awk -F' - ' '{print $1}')
title=$(echo $a | awk -F' - ' '{print $2}')
echo $artist
echo $title 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T13:06:56.197

您可以使用剪切来执行此操作。

```
curl -s http://127.0.0.1:8080/requests/status.json | \
   grep 'now_playing' | cut -d : -f 2 | sed 's/"//g' 
```

剪切命令可帮助您选择字段。字段由分隔符定义，在本例中为`':'`。`-d`选项指定分隔符，选项`-f`指定我们要选择的字段。

sed 部分只是删除引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T13:18:05.983

如果您有一个更简单的方法`GNU grep`：

```
curl ... | grep -Po '(?<=now_playing":")[^"]+'
Cody Simpson - On My Mind 
```

*Where`curl ...`被您的实际`curl`命令所取代。*

**编辑：**

我会同意`awk`你的第二个要求：

```
curl ... | awk -F'"' '{split($4,a," - ");print "artist:",a[1],"\ntitle:",a[2]}'
artist: Cody Simpson 
title: On My Mind 
```

要存储在 shell 变量中：

```
artist=$(curl ... | awk -F'"' '{split($4,a," - ");print a[1]}')

echo "$artist"
Cody Simpson

title=$(curl ... | awk -F'"' '{split($4,a," - ");print a[2]}')

echo "$title"
On My Mind 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T13:43:11.083

使用 sed：

```
curl -s 'http://127.0.0.1:8080/requests/status.json' | \ 
        sed '/now_playing/s/^\"now_playing\":"\(.*\)"$/\1/' 
```

使用 grep、cut 和 tr：

```
curl -s 'http://127.0.0.1:8080/requests/status.json' | \ 
        grep now_playing | cut -d':' -f2 | tr -d '"' 
```

使用 awk：

```
curl -s 'http://127.0.0.1:8080/requests/status.json' | \
        awk -F':' '/now_playing/ {gsub(/"/,""); print $2 }' 
```

# ruby - 为什么这只返回第一个设置？

> ID：15703826
> 
> 赞同：0
> 
> 时间：2013-03-29T13:04:24.757
> 
> 标签：ruby

我开始研究 Ruby，并认为我会构建一些东西；我开始在其中编写一个简单的配置文件解析器。简单的原则是你给它一个格式正确的文件，它会吐出一个设置的哈希值。例如，这是一个配置文件：

```
localhost: 4000;
auto: true; 
```

这就是它所回馈的：

```
{"localhost" => "4000", "auto" => "true"} 
```

现在，当使用以下代码直接输入它时，我已经让它工作了：

```
 def spit_direct(input = "", *args)
    spat = Hash.new
    args.each do |arg|
      if input.include? arg
        strip = input.match(/#{arg}:\s(\w*);/)
        spat[arg] = strip[1]
      else
        # error message
        break
      end
    end
    spat
  end

  spit_direct("localhost: 4000; auto: true;", "localhost", "auto")
  # => {"localhost"=>"4000", "auto"=>"true"} 
```

这可以按我的意愿工作，但是如果可以提供实际文件会更好。我想出了以下代码，但它似乎只返回第一个设置，而不是第二个设置：

```
 def spit_file(input = "", *args)
    spat = Hash.new
    args.each do |arg|
      File.open(input).each_line do |line|
        if line.include? arg
          strip = line.match(/#{arg}:\s(\w*);/)
          spat[arg] = strip[1]
        else
          # error message
          break
        end
      end
    end
    spat
  end 
```

如果我向它提供一个文件，该文件`config.cnfg`的内容与上述几个设置文件的内容相同，如下所示：

```
spit_file("(path)/config.cnfg", "localhost", "auto") 
```

它只返回：

```
# => {"localhost"=>"4000"} 
```

**这是为什么？**我昨晚花了几个小时，但似乎无法弄清楚问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:13:00.500

你这样做是错的。对于 args 中的每个 arg，再次打开文件，如果该文件的第一行与 arg 匹配，则更新哈希，然后关闭文件，否则立即关闭文件。

反转循环嵌套：

```
def spit_file(input = "", *args)
  spat = Hash.new
  File.open(input).each_line do |line|
    args.each do |arg|
      if line.include? arg
        strip = line.match(/#{arg}:\s(\w*);/)
        spat[arg] = strip[1]
      end
    end
  end
  spat
end

1.9.3p327 :001 > spit_file('cfg.cfg', 'localhost', 'auto')
 => {"localhost"=>"4000", "auto"=>"true"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:33:33.083

如果没有该 break 语句，您的代码将正常工作。它打破了 args.each 循环而不是 each_line 循环。当一行第一次没有您所在的确切参数时，循环中断。您应该改用 next 语句。

```
def spit_file(input = "", *args)
    spat = Hash.new
    args.each do |arg|
      File.open(input).each_line do |line|
        if line.include? arg
          strip = line.match(/#{arg}:\s(\w*);/)
          spat[arg] = strip[1]
        else
          # error message
          next
        end
      end
    end
    spat
  end 
```

# php - PHP：强制下载无法在手机上运行

> ID：15703827
> 
> 赞同：2
> 
> 时间：2013-03-29T13:04:24.960
> 
> 标签：php, android, internet-explorer, download

我正在创建用户可以在其手机上下载 .vcf 文件的网站。该文件未存储在我的浏览器中，而是使用我数据库中存储的数据生成的。

假设我有一个文件 abc.php：

```
<?php session_start();
?>
<?php
 if($_SESSION[abc] != some_value)
 {
  echo "not ok";
  exit();
  }
else
 {
   header("Content-Description: File Transfer");
   header("Content-Type: text/vcard");
   header("Content-Disposition: attachment; filename=contact.vcf");
   echo "All vcard details in the standard vCard format......
   .......
   .....";
   session_destroy();
   exit();
 } 
```

现在，这在计算机浏览器（IE、chrome 等）上运行得非常好，但是当我尝试从移动浏览器（android、windows 手机）上做同样的事情时，它就不起作用了。

有时它会创建一个内容为“not ok”的文件 abc.html（abc 是我的 php 文件的名称），或者有时它会创建一个内容为“not ok”的文件 contact.vcf/contact.html。（其中“not ok”是我在会话变量不等于某个值时打印的行）

我不明白为什么它可以在计算机上工作，但不能在智能手机上工作。请帮忙。如果它在移动浏览器上不起作用，那么我的网站的整个想法就会丢失！谢谢！

**编辑：**

我以某种方式部分解决了这个问题。就在我的循环中的 exit() 之前，我正在使用 session_destroy(); 现在，我不知道为什么，但一切都完成后，控件再次进入顶部，检查“if”条件，因为现在会话被破坏，条件变得真实，我得到“不行”作为我的文件中的输出。

现在，当我删除 session_destroy() 时，它工作正常（在手机中也是如此）。

任何想法为什么控制回到顶部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:48:13.403

看起来您没有设置正确的标题。在 PHP 中试试这个

```
header('Content-Description: File Transfer');
header('Content-Type: text/vcard');
header('Content-Disposition: attachment; filename=contact.vcf');
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: ' . $length); //Set content length here
ob_clean();
flush();
echo $content; //echo the content
exit; 
```

# c++ - 重试发送数据包，直到它被传递

> ID：15703828
> 
> 赞同：2
> 
> 时间：2013-03-29T13:04:27.667
> 
> 标签：c++, c, arduino

我正在使用带有 NRF24l01+ 芯片的 Arduino。不幸的是，Mirf 库的“发送”方法并没有告诉你它是否成功。

此外，有一个这样的循环：

```
Mirf.send(data);

while(Mirf.isSending()){
 //Wait.
} 
```

即使数据包尚未交付，也只是恢复。现在，看起来我不必重新发明轮子，因为阅读 nrf24l01[数据表（第 27/78 页）](http://www.nordicsemi.com/eng/content/download/2726/34069/file/nRF24L01P_Product_Specification_1_0.pdf)：

> 增强型 ShockBurst™ 具有自动数据包事务处理功能，可轻松实现可靠的双向数据链路。[snip] 自动数据包事务处理的工作原理如下：
> 
> 1.  您通过将数据包从 PTX 传输到 PRX 来开始事务。增强型 ShockBurst™ 自动将 PTX 设置为接收模式以等待 ACK 数据包。
> 2.  如果 PRX 接收到数据包，Enhanced ShockBurst™ 会在返回接收模式之前自动组合并向 PTX 发送一个确认数据包（ACK 数据包）。
> 3.  如果 PTX 没有立即收到 ACK 数据包，Enhanced ShockBurst™ 在可编程延迟后自动重新传输原始数据包，并将 PTX 设置为接收模式以等待 ACK 数据包。

要启用此功能（数据表第 57 页）： ![在此处输入图像描述](../Images/8946e1cb4d862a3e1df9153006699363.png)

看起来我需要写类似 00011111 的东西来在芯片上注册 0x01。有什么想法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:08:58.977

使用该`Mirf::writeRegister()`功能。

# windows-phone-7 - 如何在适用于 Windows Phone 的 Microsoft 推送通知服务中进行身份验证？

> ID：15703829
> 
> 赞同：2
> 
> 时间：2013-03-29T13:04:34.627
> 
> 标签：windows-phone-7, windows-phone-8, push-notification, windows-phone, mpns

我很难实现这个目标。我正在开发一个PhoneGap 应用程序，并将它部署到Android、iOS 和Windows Phone 上。

我能够毫无问题地使用 Apple Notification Service (APN) 和 Google Cloud Messaging，但我在尝试对我的 Windows Phone 应用程序做同样的事情时遇到了非常糟糕的事情。

与 APN 和 GCM 不同，我找不到生成一些代码或下载一些证书以将我的应用程序与推送通知服务集成的地方。

我正在尝试使用此服务通过 PHP [http://phpwindowsphonepush.codeplex.com/向 Windows Phone 发送推送通知](http://phpwindowsphonepush.codeplex.com/)

该示例向我展示了这一点`$uri="http://db3.notify.live.net/throttledthirdparty/01.00/123456789123456798"; //uri sended by Microsoft plateform`，但我如何注册到他们的平台以获得这样的 URI？

另外，这个 PHP Windows Phone Push 是在 Windows Phone 上发送 toast 和 tile 通知的正确选择吗？文档非常混乱，不清楚如何配置服务器和本机代码应用程序，我迷路了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T13:43:32.447

该 URI 称为通知通道，它是 APNS 设备令牌和 GCM 注册 ID 的 MPNS 等效项。您可以在您的 Windows Phone 应用程序代码中获取它：

```
public MainPage()
{
    /// Holds the push channel that is created or found.
    HttpNotificationChannel pushChannel;

    // The name of our push channel.
    string channelName = "ToastSampleChannel";

    InitializeComponent();

    // Try to find the push channel.
    pushChannel = HttpNotificationChannel.Find(channelName);

    // If the channel was not found, then create a new connection to the push service.
    if (pushChannel == null)
    {
        pushChannel = new HttpNotificationChannel(channelName);

        // Register for all the events before attempting to open the channel.
        pushChannel.ChannelUriUpdated += new EventHandler<NotificationChannelUriEventArgs>(PushChannel_ChannelUriUpdated);
        pushChannel.ErrorOccurred += new EventHandler<NotificationChannelErrorEventArgs>(PushChannel_ErrorOccurred);

        // Register for this notification only if you need to receive the notifications while your application is running.
        pushChannel.ShellToastNotificationReceived += new EventHandler<NotificationEventArgs>(PushChannel_ShellToastNotificationReceived);

        pushChannel.Open();

        // Bind this new channel for toast events.
        pushChannel.BindToShellToast();

    }
    else
    {
        // The channel was already open, so just register for all the events.
        pushChannel.ChannelUriUpdated += new EventHandler<NotificationChannelUriEventArgs>(PushChannel_ChannelUriUpdated);
        pushChannel.ErrorOccurred += new EventHandler<NotificationChannelErrorEventArgs>(PushChannel_ErrorOccurred);

        // Register for this notification only if you need to receive the notifications while your application is running.
        pushChannel.ShellToastNotificationReceived += new EventHandler<NotificationEventArgs>(PushChannel_ShellToastNotificationReceived);

        // Display the URI for testing purposes. Normally, the URI would be passed back to your web service at this point.
        System.Diagnostics.Debug.WriteLine(pushChannel.ChannelUri.ToString());
        MessageBox.Show(String.Format("Channel Uri is {0}",
            pushChannel.ChannelUri.ToString()));

    }
} 
```

您不必验证您的网络服务（未经验证的网络服务可以每天每台设备发送 500 条消息），但建议这样做：

> 我们建议设置经过身份验证的 Web 服务以将您的通知发送到推送通知服务，因为通过 HTTPS 接口进行通信以提高安全性。经过身份验证的 Web 服务对它们可以发送的推送通知的数量没有每日限制。另一方面，未经身份验证的 Web 服务以每天每个订阅 500 条推送通知的速度受到限制。有关详细信息，请参阅设置经过身份验证的 Web 服务以发送 Windows Phone 的推送通知。

相关链接：

[为 Windows Phone 发送推送通知](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202945%28v=vs.105%29.aspx)

[设置经过身份验证的 Web 服务以发送 Windows Phone 的推送通知](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff941099%28v=vs.105%29.aspx)

# javascript - 如何创建与此类似的背景

> ID：15703833
> 
> 赞同：0
> 
> 时间：2013-03-29T13:04:49.467
> 
> 标签：javascript, css, zurb-foundation

有谁知道如何创建这样的[背景](http://showcase.sproutcore.com/#)？是否可以仅使用 CSS 来完成？

我选择了 ZURB Foundation 作为我的 CSS 和 JS 框架，所以包括它在内的任何建议都是完美的。

任何方向，教程和任何东西都会是完美的！

**编辑** 我不是在问如何使用`background-*`，而是如何为它设置动画。从 Chrome 中查看时，图像显示一个正方形，其他人开始圈出它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:07:44.153

他们在背景+背景颜色上有这张[图片。](http://showcase.sproutcore.com/static/showcase/en/a32a0e14e8223a19249778c2853693481ab603ac/stylesheet-resources/images/pixels.png)您可以使用 css 'background' 属性设置背景

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T13:07:50.070

本站背景使用[此图片](http://showcase.sproutcore.com/static/showcase/en/a32a0e14e8223a19249778c2853693481ab603ac/stylesheet-resources/images/pixels.png)；它不是纯 CSS。它本质上是在`#8fc4f8`其上施加并重复的半透明图像的颜色。这是完整的样式：

```
div {
    background-position: 0px 0px;
    background-repeat: repeat;
    background-color: #8fc4f8;
    background-image: url(' http://showcase.sproutcore.com/static/showcase/en/a32a0e14e8223a19249778c2853693481ab603ac/stylesheet-resources/images/pixels.png');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T13:10:21.490

```
css {

background-image: url(someImage.png);
background-repeat: repeat;
background-color: blue;
} 
```

png 图像具有透明度。您可以右键单击浏览器并在Firefox中选择“查看背景图像”以查看图像。图像看起来像一个被拉伸的小图像，导致像素被拉伸成块。

# c++ - C++：何时以及为何调用析构函数？

> ID：15703836
> 
> 赞同：2
> 
> 时间：2013-03-29T13:04:56.110
> 
> 标签：c++, destructor, destroy

我有一个简单的程序来测试我的两个 3D 向量的叉积是否有效。

```
#include <iostream>
#include "math\Vec3.h"

using namespace std;

int main(int argc, char **argv)
{
    Vec3 v1(1, 23, 5);
    Vec3 v2(7, 3, 4);
    cout << "Crossing v1 and v2" << endl;
    Vec3 v3 = v1.cross(v2);
    cout << "crossed" << endl;
    return 0;
} 
```

为什么在创建变量后立即调用析构函数？
这是它打印出来的：

```
Created: Vec3[1, 23, 5]
Destroy: Vec3[1, 23, 5]     // Why is the vector destroyed here?
Created: Vec3[7, 3, 4]
Destroy: Vec3[7, 3, 4]      // And here?
Crossing v1 and v2
Created: Vec3[77, 31, -158]
Destroy: Vec3[77, 31, -158] //And here??
crossed
Destroy: Vec3[77, 31, -158]
Destroy: Vec3[7, 3, 4]
Destroy: Vec3[1, 23, 5]

Process returned 0 (0x0)   execution time : 0.090 s
Press any key to continue. 
```

这是 Vec3.h：

```
#include <iostream>
#include <string>

struct Vec3
{
    float x, y, z;

    Vec3():
        x(0), y(0), z(0) { std::cout << "Created: " << *this << std::endl; };
    Vec3(float i, float j, float k):
        x(i), y(j), z(k) { std::cout << "Created: " << *this << std::endl; };

    //...

    double dot(const Vec3&);
    Vec3 cross(const Vec3&);

    friend std::ostream& operator<<(std::ostream&, const Vec3);

    //...

    ~Vec3();
}; 
```

vec.cpp：

```
Vec3 Vec3::cross(const Vec3& v)
{
    return Vec3(y * v.z - z * v.y,
                z * v.x - x * v.z,
                x * v.y - y * v.x);
}

std::ostream& operator<<(std::ostream& out, const Vec3 v)
{
    out << "Vec3[" << v.x << ", " << v.y << ", " << v.z << "]";
    return out;
}

Vec3::~Vec3()
{
    std::cout << "Destroy: "
        << "Vec3[" << x << ", " << y << ", " << z << "]"
        << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T13:16:36.970

您的调试输出（使用`operator<<`）会导致一个副本（因为它需要 'Vec3' 的值）和额外的破坏。

您不提供复制构造函数，因此您看不到这一点。但如果你愿意，你会发现事实上你的破坏并不多于构造。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T13:20:26.213

看看输出 - 你创建了一个 Vec3，然后它被销毁，然后在最后 Vec3 被销毁......嗯，很明显你在中间创建了另一个 Vec3，它是 Vec3 的副本你想创造。

所以这看起来像问题，当您的代码中的某些内容正在制作副本时，您会将 Vec3s 的输出与单个对象混淆，而该副本又被破坏。发生这种混淆的原因是因为您没有定义一个复制构造函数，它也打印出“创建”行。

因此，首先通过在代码中添加复制构造函数来采用最佳实践（提示：如果您有构造函数、析构函数或复制构造函数中的 1 个，则应该实现所有 3 个。如果您遗漏了任何一个，编译器会将其放入你）。

# css - CSS 从图像到图标的转变

> ID：15703837
> 
> 赞同：0
> 
> 时间：2013-03-29T13:04:58.720
> 
> 标签：css, icons

假设我有以下 css。现在最近我们已经转向使用微调器的字体。所以现在我想做的就是用一个图标替换背景。

```
.ui-autocomplete-loading {
  background: url('images/spinner.gif') no-repeat center right;
  background-origin: content-box;
  background-position: right;
} 
```

这就是我们在 HTML 端所做的......

```
<i class="icon-spinner icon-spin"></i> 
```

有没有办法用底部图标微调器定义替换顶部背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:16:27.560

后者使用[PNG sprite](http://css-tricks.com/css-sprites/)，如果我是正确的，您的代码来自[Twitter BootStrap](http://twitter.github.com/bootstrap/base-css.html#icons)附带的[Glyphicons](http://glyphicons.com/)。

即使标记使用单词图标确实意味着格式或方法与使用标准背景有任何不同，下面是`icon-arrow-down`使用 CSS 的代码。

```
.icon-arrow-down {
    background-position: -312px -96px;
}
[class^="icon-"], [class*=" icon-"] {
    background-image: url("../img/glyphicons-halflings.png");
    background-position: 14px 14px;
    background-repeat: no-repeat;
    display: inline-block;
    height: 14px;
    line-height: 14px;
    margin-top: 1px;
    vertical-align: text-top;
    width: 14px;
} 
```

如果您想将 sort_asc.png 图像应用到它自己的类而不是表中，那么只需添加如下内容：

```
.sort-asc {
background: url('images/sort_asc.png') no-repeat center right; }
width:50px;
height:50px;
} 
```

# c++ - 这个指针操作还有其他语法吗？

> ID：15703842
> 
> 赞同：3
> 
> 时间：2013-03-29T13:01:29.843
> 
> 标签：c++, syntax

这是一个非常基本的问题，但我不知道如何用谷歌搜索它。

我有一个指向向量（或指针数组）的指针，比如说

```
vector<int *> *p; 
```

除了索引这个数组还有其他语法吗

```
(*p)[i]; 
```

类似于 -> 运算符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T13:06:34.410

是的 -

```
p->operator[](i); 
```

但如果你问我，这并不是更好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-29T13:09:53.777

`p->at(i)`类似，但会进行边界检查并在超出范围时抛出异常`i`。看起来比您和 Luchian 的解决方案 (IMO) 都好，而且更安全一些。

# database-design - 数据仓库中的客户维度——人与公司的混合

> ID：15703852
> 
> 赞同：0
> 
> 时间：2013-03-29T13:05:56.040
> 
> 标签：database-design, data-warehouse

我们确实有各种各样的客户——其中大多数是个人，但其中一些是公司。这两个组都共享相同的事实集，但是它们的维度属性不同（示例）：

```
Person
 FirstName
 LastName
 BirthDate
 Sex
 Region
 City
Company
 Name
 RegistrationNumber
 Region
 City 
```

将个人和公司都包含在一个维度中是个好主意吗？

```
Customers
 FirstName
 LastName
 BirthDate
 Sex
 Name
 RegistrationNumber
 Type (Person,Company) 
```

值得一提的是，还有自雇客户——在这种情况下，他们具有个人和公司的所有属性。

如果我使用两个维度，它将使所有分析内容变得更加困难，因为大多数时候我对这两个组都感兴趣。另一方面，如果我只使用一个维度，将会有很多默认值。我检查了“数据仓库工具包”，但没有找到相关信息。

我有问题 - 我应该创建两个表、一个表还是使用完全不同的方法来设计数据仓库中的客户维度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T15:26:27.737

> 将个人和公司都包含在一个维度中是个好主意吗？

在数据仓库中，是的。信息不会更新，您不关心空列或默认列，查询的轻松（速度）更为重要。

标准化操作数据库中的数据的一个原因是消除更新异常的可能性。当数据存储在多个地方时，它可以在一个地方更新，而不能在另一个地方更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:17:44.717

我的理由是你解释的场景，我们可以维护两个维度，实际上可以包含两个键。

Fact may contain PERSON_KEY and CUSTOMER_KEY. So, if it's a person PERSON_KEY can be -1 or if it's other way COMPANY_KEY can be -1\. This can be considered if person or company details needs to be used for some other purposes within the system. I think dimension means going to possible granular level.

# .net - Windows Workflow 4.5 版本映射

> ID：15703857
> 
> 赞同：0
> 
> 时间：2013-03-29T13:06:07.853
> 
> 标签：.net, workflow-foundation-4, workflow-foundation

假设如果有两个版本的工作流，一些实例在 version1 上运行，一些在 version2 上运行，有什么方法可以让我们为新实例调用 version1 工作流而不是 version2，因为我们创建了一个工作流实例，它将通过默认创建version2的实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:56:44.130

.net Framework 4.5 引入了工作流版本控制，这似乎正是您所需要的。

这两个链接应该足以开始：

[使用 WorkflowIdentity 和版本控制](http://msdn.microsoft.com/en-us/library/hh305677%28VS.110%29.aspx)

[如何：并排托管多个版本的工作流](http://msdn.microsoft.com/en-us/library/jj205425.aspx)

# javascript - FireFox 中的 JavaScript Canvas 问题，在 Chrome 中运行良好

> ID：15703858
> 
> 赞同：0
> 
> 时间：2013-03-29T13:06:11.647
> 
> 标签：javascript, html, canvas

我是堆栈溢出的新手；但是发现这里讨论的许多主题对 Web 应用程序的开发很有帮助。

然而，这一次我被难住了。在使用新的 HTML5 画布时，我用 JavaScript 编写了一些简单的函数来添加撤消/重做功能。我编写的代码在 Chrome 中运行良好，但在 Firefox 中不起作用；我想我已将问题隔离到我将图像对象放入数组中的代码行（在 Chrome 中工作正常）。我对此进行了研究，但找不到任何理由说明这在 FireFox 中不起作用。任何帮助将不胜感激。

```
function push()
{
window.cStep++;
    if (window.cStep < window.history.length) { window.history.length = window.cStep; }
var imageData = window.context.getImageData(0, 0, canvas.width, canvas.height);
alert(imageData);
window.history[window.cStep] = imageData;
     document.title = "Step [" +window.cStep + "] Of A Possible [" +    (window.history.length -1) + "]";
 }

 function undo()
 {
  if (window.cStep > 0) {
    window.cStep--;
    window.context.putImageData(window.history[window.cStep], 0, 0);
    document.title = "Step [" +window.cStep + "] Of A Possible [" + (window.history.length -1) + "]";
    if(window.cStep ==0)
    {document.getElementById('middle_centre_canvas').style.opacity = 0.6;}
    else
    {document.getElementById('middle_centre_canvas').style.opacity = 1;}
     }  
   }
    function redo()
   {
    if (window.cStep < window.history.length-1) {
    window.cStep++;
    window.context.putImageData(window.history[window.cStep],0,0);
    document.title = "Step [" +window.cStep + "] Of A Possible [" + (window.history.length -1) + "]";
    if(window.cStep >0)
    {document.getElementById('middle_centre_canvas').style.opacity = 1;}
    }
   }
      function loadyLoader(){
    window.canvas = document.getElementById("canvas");
    window.context = window.canvas.getContext('2d');
    window.history = new Array();
    window.cStep = -1;
    push();
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:22:10.960

window.history 是一个保留对象：[http](http://www.w3schools.com/jsref/obj_history.asp) ://www.w3schools.com/jsref/obj_history.asp 。尝试用**window._history**（或其他名称）替换所有**window.history**事件。

# operating-system - How CPU/OS maintains info of all the processes and all the data in secondary memory

> ID：15703862
> 
> 赞同：0
> 
> 时间：2013-03-29T13:06:29.243
> 
> 标签：operating-system

I know that Memory tables are used to keep track of main memory and secondary memory. Also OS needs to maintain some sort of information about each processes in order to fetch the contents from secondary memory but I have few questions in regards to the above:

1) Main memory is limited and CPU can directly access only Main Memory and there can be many many number of processes, so how is it possible that each of the processes information is maintained by the CPU in Main memory. (even though only small part of the Process Image of each process is kept in memory but still there can be so many processes)

2) Also Secondary Memory can be in TBs so how are the addresses accessed as it would definitely require more than 32 bits to represent TBs. Eg. Some data of a Process is at location beginning from 900 GB. How will the PCB of that process tell the CPU that it is at location 900 GB, I mean it has to take more than 32 bits to tell that right and assume the system is 32 bit and how will it be different if the system is 64 bit.

3) Also the secondary memory being in TBs, there has to be some way for the CPU to access any part of the Secondary Memory, how is that done?

4) Also is the case possible where there is no information about the process in Main memory. If that is the case then how would the retrieval of the contents of that data would be carried out. This might not be the case but the thing that forces me to think in this perspective is that the Main memory is only so much and there can be lots and lots of processes, hence the question.

I have tried searching a lot on internet but unable to find answers and if I find something I get more confused. Can anyone please clarify these doubts.

Edit: Take any CPU or any OS, I just want a generalized picture. The specifics may be different in different systems but I believe at some level there will be some commonality.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:52:41.350

太字节？没问题。

您总是可以用较短的整数构造较长的整数。文件系统经常使用比 CPU 中指针大小更长的索引、大小和计数。这就是您可以拥有和寻址比 CPU 地址空间大小更多的存储空间的方式。

而且您不需要将磁盘中的所有内容加载到 RAM 中，您可以加载足够多的小块以适合 CPU 的地址空间。

文件系统允许您一次读取包含一个或多个文件和目录的数据块，这些块的大小通常为千字节，而不是兆字节或千兆字节，更不用说兆兆字节了。

因此，更长的索引/大小/计数 + 小块。这就是访问更多磁盘数据所需的全部内容，而不是加载到 RAM 中的数据。

# c - warning: no previous prototype for 'format_SaNameT'

> ID：15703863
> 
> 赞同：0
> 
> 时间：2013-03-29T13:06:29.587
> 
> 标签：c

```
void format_SaNameT( const char* const name, SaNameT* formatted )
{
   if( ! name || ! formatted ) return;

   memset( formatted, 0, sizeof( SaNameT ) );
   formatted->length = strlen( name );
   strncpy( formatted->value, name, SA_MAX_NAME_LENGTH );
} 
```

here 'format_SaNameT' is showing the warning

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:10:26.287

您应该在头文件中提供原型，以便编译器知道它正在处理什么......

`void format_SaNameT(const char* const, SaNameT*);`在不同的文件或主文件中声明`.h`，警告就会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:47:02.720

在某些函数中，您`format_SaNameT`在哪个范围内调用，编译器不知道先前的相同声明，因此，您正在观察警告。

要克服此警告，请确保文件中有可用的函数声明，可以通过同一文件中的简单声明或通过调用此函数的头文件。

# javascript - “before and after” background

> ID：15703868
> 
> 赞同：2
> 
> 时间：2013-03-29T13:06:47.433
> 
> 标签：javascript, jquery, css

Is there a way to use a "Before and after" image as a full sized background? Would be great i guess! I am trying to use such examples as a full page size image;

[http://www.catchmyfame.com/2009/06/25/jquery-beforeafter-plugin/](http://www.catchmyfame.com/2009/06/25/jquery-beforeafter-plugin/)

[http://www.queness.com/post/6480/create-an-attractive-before-and-after-photo-effect-with-jquery](http://www.queness.com/post/6480/create-an-attractive-before-and-after-photo-effect-with-jquery)

But everytime i try this the second 'reveal' div doesn't size 100% to the browser borders.

Can anyone push me in the right direction?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:25:37.097

CSS3 有这个功能 [W3School CSS3 Background](http://www.w3schools.com/css3/css3_backgrounds.asp)但这在旧浏览器中不起作用
另一种替代方法是.. 将 Main Background Image 设置为 Body 标签。创建 DIV 标签并添加此样式后：

```
.mydiv{
    position:absolute;
    top:0;
    bottom:0;
    width:100%;
    background-image:url('my/url.jpg');
    background-position:right top;
} 
```

记住不要将此 div 用于内容。它只是为了保存你的 bg 图像。

# git - Git：在合并提交时保留分支拓扑

> ID：15703871
> 
> 赞同：2
> 
> 时间：2013-03-29T13:06:52.213
> 
> 标签：git, git-merge

我想问一下Git在以下场景中的合并：

```
branchA  -*-*-*-*-*
                   \
            branchB *-*-*-* 
```

在这种情况下可以进行 git merge 并获得以下结果？

```
branchA  -*-*-*-*-*---------*
                   \       /
            branchB *-*-*-* 
```

我想要获得的是在branchA 上进行一次合并提交，它包含来自branchB 的所有更改。我知道 git merge 命令中有 --squash 选项，但是我不确定这是否 100% 等同于标准合并。

因此，允许我阻止我的分支拓扑，*而不仅仅是*快进。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T13:12:37.733

尝试`git merge branchb --no-ff`（从`brancha`）。来自[git-merge(1)](https://www.kernel.org/pub//software/scm/git/docs/git-merge.html)

> --no-ff
> 
> 即使合并解析为快进，也要创建合并提交。

即使 git 意识到当前的 HEAD（分支 A，因为这是您将合并表单的地方）只是分支 B 上的提交的祖先，它也可以防止快进，而没有在分支 A 上并行发生任何更改.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T13:20:49.777

不，您不能生成包含来自分支的所有更改的真正合并提交。`git merge --squash`将生成包含更改的单个提交，但它不会是合并提交。

Git 提交记录了存储库在给定时间的完整状态，而不是先前提交的更改。因此，当您稍后检查历史记录而不是创建提交时会产生差异。

However, if you use `git commit --no-ff branchB` to create the merge that will ensure that a commit is created even if it would be possible to do a fast-forward merge without creating a new commit. Then if you use `git log -m --first-parent` it would ignore the commits that were made on branchB making it appear that all of those changes were introduced by that merge commit, and the `-m` option would cause the full diff to be displayed for the merge commit (if diffs are otherwise being displayed).

# javascript - Anytime js datepicker error

> ID：15703877
> 
> 赞同：0
> 
> 时间：2013-03-29T13:07:06.027
> 
> 标签：javascript, anytime

I have a problem with anytime.js ; The input field exists

> <input type="text" value="" name="step_dimension_value" >

this is how i called the plugin:

```
jQuery('input[name="step_dimension_value"]').AnyTime_picker({ 
    format: "%H:%i", 
    labelTitle: "Hora",
    labelHour: "Hora", 
    labelMinute: "Minuto" 
}); 
```

The error is (from Firebug console):

```
" TypeError: off is null [Break On This Error]
var left = off.left; " in anytime.js?ver=1 (line 3062) 
```

can you please help me ?

*** EDIT ***

I think i have the answer:

In my opinion there is a problem in the anytime.js datepicker; Fortunately it can be very easily worked around.

**How to reproduce**: - If the call to anytime picker is done using jquery selector, (Like : jQuery('input[name="step_dimension_value"]').AnyTime_picker(....)) and the input does not have an id, the error will happen;

**Workaround**: - add an id to the input element; I tested it and this works.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:55:13.737

这不是错误，而是设计使然，并且在项目主页末尾附近的故障排除提示中提到：

[www.ama3.com/anytime/#fixBehavior](http://www.ama3.com/anytime/#fixBehavior)

# iphone - CoreData、NSFetchedResultsController 和 performFetch：

> ID：15703879
> 
> 赞同：1
> 
> 时间：2013-03-29T13:07:15.310
> 
> 标签：iphone, ios, core-data

我有 450.000 条记录的核心数据。

为了在 uitableview 中显示它，我使用 NSFetchedResultsController。它有效，但有很大的问题。

在 NSFetchedResultsController 开始工作之前，我们需要调用 **performFetch：** 我的情况是这个函数工作大约 2-3 分钟。之后，我可以毫无问题地在 UITable 中显示数据。但是那 2-3 分钟杀了我:(

它不会那么糟糕，但我还需要在这个表中进行搜索。因此，对于搜索，我需要更改谓词，调用**performFetch:**并再次等待大约 2-3 分钟！

反正有没有让**performFetch:**更快？或者至少有人可以告诉我如何在不调用**performFetch:**的情况下进行搜索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T13:42:09.160

2-3 分钟对于仅获取 450.000 条记录来说绝对是太长了。您是否使用谓词解析字符串？确保您使用了以下优化策略：

*   通过调整来优化您的抓取`fetchBatchSize`。（尝试一些设置，看看哪种设置最适合您的数据类型）。
*   避免对节标题进行复杂的查询。如果您正在通过关系的某些属性计算部分标题，请重新考虑您的方法。获取保存部分信息的实体并从那里填充每个部分中的行可能会更好。
*   您是否为搜索和排序所依据的字段编制索引？
*   尽可能使用模型中定义的获取请求模板。这将大大加快速度。

至于搜索，这是一个对我有用的策略：

*   仅在几次击键（例如两次）后才对搜索做出反应。
*   在有效击键后，启动一个计时器，例如 0.2 秒。只有在计时器触发之前没有再次击键时才开始新的获取。
*   在后台获取。获取完成后在主线程上重新加载表视图。
*   维护一组预定的搜索提取。如果计划的提取被 UI 取消（例如，另一个按键），请不要启动它。
*   不要使用不区分大小写和不区分变音的搜索，因为这非常昂贵。相反，如果可行，只需从单词/名称的开头进行搜索。如有必要，按照 Apple 的 WWDC12 视频中的建议，仅使用要在单独实体中搜索的单词（简体、小写）构建索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:07:04.943

2-3 分钟是很长的时间来浏览 450,000 条记录。我怀疑大部分时间都花在了一些 sqlite 调用而不是你自己的代码上。`performFetch:`使用 Time Profiler 并查看在树下花费最多时间的调用。

要查看您的 SQL 是否已优化，请通过将其添加到方案设置中的“启动时传递的参数”来启用 SQLite 日志记录：

```
-com.apple.CoreData.SQLDebug 1 
```

有关此[问题](https://stackoverflow.com/questions/822906/how-do-i-get-the-coredata-debug-argument-to-output-to-the-console)的更多详细信息，请参阅此问题。

运行您的应用程序并记下调用 performFetch: 时执行的查询。接下来，阅读关于[`EXPLAIN QUERY PLAN`](http://www.sqlite.org/eqp.html). 如果 sqlite 是瓶颈，这是您可以使用的最有用的工具。您需要从您的应用程序（模拟器或设备）中获取 .sqlite 文件，并在您的查询上运行 EXPLAIN QUERY PLAN 并查看是否花费了太长时间。如果我不得不猜测，我会说您的查询正在执行全表扫描，而不是使用适当的索引。全表扫描代价高昂。

如果这确实是瓶颈，它还可以帮助您优化搜索。

这里有一些有用的链接。

1.  [如何提高 iPhone 上的核心数据获取性能？](https://stackoverflow.com/questions/3588327/how-can-i-improve-core-data-fetch-performance-on-the-iphone)
2.  [优化核心数据搜索和排序](http://blog.artlogic.com/2013/01/07/optimizing-core-data-searches-and-sorts/)

# php - 你能推荐一个我可以安装到已经存在的 CMS 中的电子邮件客户端吗？

> ID：15703881
> 
> 赞同：0
> 
> 时间：2013-03-29T13:07:18.213
> 
> 标签：php, email, content-management-system, imap

我正在寻找将“专业”电子邮件地址集成到我的客户 CMS 中的最佳方式（即：info@website.com，而不是 website@gmail.com）。

现在，我有两个客户的网站/电子邮件帐户由 Godaddy 托管。现在，如果有任何电子邮件发送给他们，这些消息将被转发到他们的私人电子邮件。他们当然可以登录 Godaddy 并从那里导航到他们的电子邮件，但我正在寻找一个更用户友好的选项。最好是我可以集成到我现有的 CMS 中的东西。

我做了一些自由网页设计，到目前为止，我几乎都是手工制作的。我已经构建了一个非常基本的 CMS，我的客户可以使用它通过 PHP/SQL 更新他们的博客和其他内容。它重量轻，我喜欢我对每一平方英寸代码的了解。所以我不想为新的 CMS 废弃所有东西（这一切都基于 php/mysqli 插入/更新/删除，并添加了一些 javascript/jquery。我不想采用 wordpress 或 joomla 来为我做这件事）。

另一方面，我不想重新发明轮子来构建我自己的电子邮件客户端。从我读到的内容来看，这不值得我花时间（而且对 IMAP 等一无所知）。

那么有没有什么好的开源脚本或软件不需要我围绕这个任务构建整个站点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:14:29.030

您需要根据您的需要和可能的业务逻辑编辑一些 UI 绑定，因为您的框架可能是独一无二的。但是，您是对的：像瘟疫一样避免使用 IMAP。IMAP 不是问题 - 电子邮件格式是。RFC 一切都很好，直到人们停止关注它。

可悲的是，周围也很少有真正的 IMAP 库，所以每条路线都有荆棘。

您很可能要么必须从现有的邮件客户端中剥离 IMAP 阅读器/解释器库（Roundcube 有一个特别解耦的。我知道，我已经将其剥离了一次），或者使用独立的（所有文档都记录得很糟糕，最好的一个是[https://github.com/cnizzdotcom/php-imap](https://github.com/cnizzdotcom/php-imap)）。

从那里开始，就是构建实际的消息显示过程的问题，这是一项漫长而乏味（但不是那么困难）的任务。考虑将其构建为纯 html 和 RESTful API 端点，以便您可以轻松地通过 JS 交互来丰富它。

对于 UI 本身，随心所欲。那里没有开放组件。

# ios - UIView 框架在滚动时自动重置

> ID：15703884
> 
> 赞同：1
> 
> 时间：2013-03-29T13:07:38.337
> 
> 标签：ios, objective-c, uiview, uiscrollview

A`UIScrollView`包含 5`UIView`秒。基本上我想展开和折叠它们，当用户触摸任何一个`UIView`.

**动画`globalPressReleasesView`展开代码：**

```
 [UIView beginAnimations:@"Expand" context:nil];
            [UIView setAnimationDuration:1.0];
            [UIView setAnimationDelegate:self];

                                [globalPressReleasesView setFrame:CGRectMake(globalPressReleasesView.frame.origin.x, globalPressReleasesView.frame.origin.y, globalPressReleasesView.frame.size.width, globalPressReleasesView.frame.size.height + [globalPressReleasesArray count]*105)];

                                [financialPressReleasesView setFrame:CGRectMake(financialPressReleasesView.frame.origin.x, financialPressReleasesView.frame.origin.y + [globalPressReleasesArray count]*105, financialPressReleasesView.frame.size.width, financialPressReleasesView.frame.size.height)];

                                [newOnCscView setFrame:CGRectMake(newOnCscView.frame.origin.x, newOnCscView.frame.origin.y + [globalPressReleasesArray count]*105, newOnCscView.frame.size.width, newOnCscView.frame.size.height)];

                                [latestEventsView setFrame:CGRectMake(latestEventsView.frame.origin.x, latestEventsView.frame.origin.y + [globalPressReleasesArray count]*105, latestEventsView.frame.size.width, latestEventsView.frame.size.height)];

                                [latestCaseStudiesView setFrame:CGRectMake(latestCaseStudiesView.frame.origin.x, latestCaseStudiesView.frame.origin.y + [globalPressReleasesArray count]*105, latestCaseStudiesView.frame.size.width, latestCaseStudiesView.frame.size.height)];

                                [scrollView setContentSize:CGSizeMake(scrollView.frame.size.width, scrollView.frame.size.height + [globalPressReleasesArray count]*105)];

            [UIView commitAnimations]; 
```

**其他xib属性：**

每个`UIView`剪辑 `scrollview.autoresize = YES`

**问题：**

'globalPressReleasesView' 完美扩展，但是当我滚动我的`scrollview`. `globalPressReleasesView`frame 将自身重置为 xib 中定义的原始帧值。

有人能猜出问题是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:29:44.417

首先，让我们稍微简化一下代码：

```
CGFloat heightDifference = [globalPressReleasesArray count] * 105.0f;

CGRect globalPressReleasesViewFrame = globalPressReleasesView.frame;
globalPressReleasesViewFrame.size.height += heightDifference;
globalPressReleasesView.frame = globalPressReleasesViewFrame;

NSArray* movedViews = @[financialPressReleasesView, newOnCscView, latestEventsView, latestCaseStudiesView];

for (UIView* movedView in movedViews) {
   CGRect movedViewFrame = movedView.frame;
   movedViewFrame.origin.y += heightDifference;
   movedView.frame = movedViewFrame
}

CGSize contentSize = scrollView.frame.size;
contentSize.height += heightDifference;
[scrollView setContentSize:contentSize]; 
```

现在很清楚代码的作用。

该代码似乎是绝对正确的。我建议您检查设置帧的值（`NSLog`或断点）。

Note there are only two ways a view frame can be changed. 1\. You change it in code 2\. It's autoresized because you have changed it's ancestor's frame (or when the user's switches portrait/landscape mode).

# asp.net - Using [AspNetDevelopmentServerHost()] for web UI testing

> ID：15703889
> 
> 赞同：1
> 
> 时间：2013-03-29T13:07:50.450
> 
> 标签：asp.net, .net, selenium, web-testing, webdev.webserver

I have a WebApp project that runs normally in debugging. Now I try to run it for UI testing with Selenium:

```
[TestMethod]
[HostType("ASP.NET")]
[AspNetDevelopmentServerHost(@"D:\WebAppPath", "/")]
[UrlToTest("http://localhost:28319/")]
public void TestMethod1()
{
    Debugger.Break();
} 
```

And the test fails with the error:

> The Web request '`http://localhost:28319/`' completed successfully without running the test. This can occur when configuring the Web application for testing fails (an ASP.NET server error occurs when processing the request), or when no ASP.NET page is executed (the URL may point to an HTML page, a Web service, or a directory listing). Running tests in ASP.NET requires the URL to resolve to an ASP.NET page and for the page to execute properly up to the Load event. The response from the request is stored in the file 'WebRequestResponse_TestMethod1.html' with the test results; typically this file can be opened with a Web browser to view its contents.

Can I use `AspNetDevelopmentServerHost` for HTTP hosting, not for unit testing? Is there any other way to programmatically host ASP.NET application (without running external iisexpress.exe process)?

# php - PHP_HTML layout the result of a query

> ID：15703890
> 
> 赞同：-1
> 
> 时间：2013-03-29T13:07:52.967
> 
> 标签：php, button, layout, product

I want to create a product page, I would like the products of my page to be represented this way: [http://www.mvphiphop.com/Brand-Shoes-c92/](http://www.mvphiphop.com/Brand-Shoes-c92/) or something similar but something really simple with no css if possible (image of product, name, price, order). I mean just in terms on the products, nothing about the page numbering and the brand.

How can I do that? is it hard? I can return all the products of my database with no problem but I have no idea how to lay it out this way. Could you help me. I have been searching for the past 2 weeks some tutorial but in vain.

Thanks for your help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:17:51.017

没有 CSS... 所以...`<TABLE>`的 >

# py2app - Py2app problems: maybe accessing image files?

> ID：15703893
> 
> 赞同：2
> 
> 时间：2013-03-29T13:08:16.110
> 
> 标签：py2app

Please bear with me for seriously newbie (lack of) knowledge. I've trawled though previous answers on SO and made some progress, but I'm now really stuck and would really appreciate some help.

I have a working python (pygame) programme which includes images and sounds saved to the same folder as the .py file. I'm trying to turn it into an app with py2app.

I've written the setup.py file, and it seems to work fine. When I try to run the app it creates within the '/build/' directory, I just get an error in a popup window which reads '[appname] Error'. When I open the console, the relevant error message seems to be:

*" 30/03/2013 08:47:02.425 com.apple.launchd.peruser.501[192]: ([0x0-0x1de2de1].org.pythonmac.unspecified.CookieMemory[17113]) Exited with code: 255"*

I think my problem may be that the app is not able to access the data files (images, sounds) properly. I can see them there within the "Contents/Resources" folder. In order to get the image and sound files included within the app as Resources, I created a new folder (called "Memory") for them (within the /Users) directory - i.e. the same directory as where the setup.py and my .py program are. And I included a couple of lines of code at the start of the .py program to tell it to look in there for the image and sound files… since the .py program originally loaded them directly from the same folder in which it was saved. The .py program is happy with that change - when I run it directly via IDLE or the Terminal - but the app is not...

Here's my setup.py file:

```
 from setuptools import setup

    APP = ['CookieMemory.py']
    DATA_FILES = ['Memory']
    OPTIONS = {'iconfile':'cookieIcon.icns','argv_emulation': True}

    setup(
        app=APP,
        data_files=DATA_FILES,
        options={'py2app': OPTIONS},
        setup_requires=['py2app'],
    ) 
```

Here is the addition I made to the .py file:

```
import os,sys
currentFilePath=sys.argv[0]
currentDir=os.path.dirname(currentFilePath)
os.chdir(os.path.join(currentDir,"Memory")) 
```

Any suggestions please?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:31:01.490

首先（并且与您的问题完全无关）：不要使用 argv_emulation 除非您确实需要该功能（也就是说，您希望能够将文件放在应用程序上并让它们显示在 sys.argv 中）， argv 模拟器是一个黑客和缓慢的应用程序启动。

当您从终端启动应用程序时会发生什么，例如：

```
$ dist/CookieMemory/Contents/MacOS/CookieMemory 
```

这将在终端窗口中显示应用程序的标准错误/标准输出，如果运气好的话，应该会告诉你发生了什么。

# c++ - 为什么不能将 char** 隐式转换为 const char **

> ID：15703895
> 
> 赞同：2
> 
> 时间：2013-03-29T13:08:25.487
> 
> 标签：c++, casting, char

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:19:00.023

because if it was allowed then you could inadvertently change something that was declared `const`.

here's a concrete abuse example, if the rules allowed this:

```
char const* s = "a literal, very const";

bar(const char** pp )
{
    *pp = s;
}

foo(char** arr)
{
  bar(arr);
  char* unconsted_s = *arr;
  unconsted_s[0] = 'X';
} 
```

This is also a [FAQ](http://www.parashift.com/c++-faq/constptrptr-conversion.html). It’s often a good idea to check the FAQ (or just google) before asking.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:26:40.267

It can lead to similar scenario if its allowed.

```
void foo(int** arr)
{
    /*Can freely modify value at location pointed by a*/
   **arr = 6;
}

int main()
{
 /*Pointer to constant*/
 int i = 5;

 const int* a =&a;

 /*Not a pointer to constant*/
 int** aa= &a;

 foo(aa);

return 0;
} 
```

# backbone.js - 将 Handlebars.js 与 Backbone.Marionette 一起使用

> ID：15703896
> 
> 赞同：16
> 
> 时间：2013-03-29T13:08:33.223
> 
> 标签：backbone.js, handlebars.js, marionette

是否可以将 Handlebars.js 与[Backbone.Marionette](https://github.com/marionettejs/backbone.marionette)扩展一起使用，而无需重新实现 Views 渲染功能？似乎 Marionette 依赖于使用带有下划线模板引擎的 Backbone.js 的约定。但我真的很喜欢车把的方法，所以我问我是否可以使用带车把的 Marionette 的高级工具。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-02T19:13:40.443

将 Handlebars 与 Marionette 一起使用的一种简单方法是`template`在每个 View 中将其定义为预编译的 Handlebars 模板函数。例如：

```
var MyView = Backbone.Marionette.ItemView.extend({
    template: Handlebars.compile("Hello, {{name}}"),
    model: new Backbone.Model({name: "Steve"})
}); 
```

Marionette 的默认值`Renderer`会检测到该`template`属性是一个函数，并相应地调用它。

另请参阅有关此案例的官方文档：[https ://github.com/marionettejs/backbone.marionette/wiki/Using-handlebars-templates-with-marionette](https://github.com/marionettejs/backbone.marionette/wiki/Using-handlebars-templates-with-marionette)

和其他 Q/A 与 requirejs + Marionette + Handlebars precompiled：[Using precompiled handlebars templates with Marionette](https://stackoverflow.com/questions/19863285/using-precompiled-handlebars-templates-with-marionette)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-10T06:28:18.667

@brettjonesdev 是正确的，但我发现这里的另一个补充是：

```
var MyView = Backbone.Marionette.ItemView.extend({
  template: Handlebars.compile($("#assign-products-main-view").html()),
  model: new Backbone.Model({name: "Steve"})
}); 
```

这在搜索 DOM 时很有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-16T23:39:14.467

我们也可以在这里使用预编译的模板。

```
var MyView = Backbone.Marionette.ItemView.extend({
template: Handlebars.templates['filename'],
model: new Backbone.Model({name: "Steve"})
}); 
```

这样我们就可以从 Marionette 中删除编译角色。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-12T04:29:07.810

当前的两个答案不利用缓存。请改用此要点[。](https://gist.github.com/funkjedi/5732611)

# java - 谷歌地图通过wifi初始化位置

> ID：15703897
> 
> 赞同：0
> 
> 时间：2013-03-29T13:08:36.270
> 
> 标签：java, android, google-maps-android-api-2

我想实现几件事：

1.  当活动创建时，谷歌地图将显示基于 wifi 的估计位置......
    我该如何实现它？

2.  我想获取用户在谷歌地图上触摸的位置的名称......
    我读到我可以使用该方法实现它，但是使用这种方法我只能获取用户触摸的地方的纬度和经度：

    ```
    @Override
    public void onMapClick(LatLng point) {
        // TODO Auto-generated method stub
    } 
    ```

3.  我想让用户在谷歌地图中搜索地点，有什么方法可以实现吗？

这是我到目前为止的活动：

```
import java.lang.ref.WeakReference;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMap.OnMarkerDragListener;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;
import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;

import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.support.v4.app.FragmentActivity;
import android.util.Log;
import android.view.View;
import android.view.ViewParent;
import android.widget.ImageView;
import android.widget.Toast;

public class itemSaleActivity extends FragmentActivity  {

    private static Context app;
    private static GoogleMap map;
    static final LatLng HAMBURG = new LatLng(53.558, 9.927);
    private static final int LOAD_COORD = 0;
    private ImageView pic;
    private LocationHandler mHandler;

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        // Set View to register.xml
        setContentView(R.layout.itemsale);

        app = getApplicationContext();
        Bundle extras = getIntent().getExtras();
        byte[] byteArray = extras.getByteArray("picture");
        Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length);

        pic = (ImageView) findViewById(R.id.itemImage);
        pic.setImageBitmap(bmp);

        map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();
        //Marker hamburg = map.addMarker(new MarkerOptions().position(HAMBURG).title("Hamburg"));
        mHandler = new LocationHandler(this); 

        OnMarkerDragListener markerDragListener = new OnMarkerDragListener() {

            @Override
            public void onMarkerDragStart(Marker marker) {
                // Called when the marker drag is started

            }

            @Override
            public void onMarkerDragEnd(Marker marker) {
                // Called when the marker is dropped down.
                double[] coords = null;
                coords[0] = marker.getPosition().latitude;
                coords[1] = marker.getPosition().longitude;
                RestoreUIwithSavedLocation(coords);
                Toast.makeText(getApplicationContext(),"Pin Dropped at: " + coords[0] + ", " + coords[1]+marker.getTitle() , Toast.LENGTH_LONG).show();

            }

            @Override
            public void onMarkerDrag(Marker marker) {

            }
        };

        map.setOnMarkerDragListener(markerDragListener);

        View titleView = getWindow().findViewById(android.R.id.title);
        if (titleView != null) {
            ViewParent parent = titleView.getParent();
            if (parent != null && (parent instanceof View)) {
             View parentView = (View)parent;
             parentView.setVisibility(View.GONE);
            }
        }

     // You can also assign the title programmatically by passing a
     // CharSequence or resource id.
    }

    private void RestoreUIwithSavedLocation(double[] coordsArray) {
        Message.obtain(mHandler, LOAD_COORD, coordsArray).sendToTarget();
    }

    static class LocationHandler extends Handler {
        WeakReference<Activity> mActivity;

        public LocationHandler(Activity activity) {
            mActivity = new WeakReference<Activity>(activity);
        }

        public void handleMessage(Message msg) {
            Activity contextActivity = mActivity.get();
            switch ((int)msg.what) {

            case LOAD_COORD:
                map.clear();
                double[] coordArray = (double[])msg.obj;
                Marker marker = map.addMarker(new MarkerOptions().position(new LatLng(coordArray[0], coordArray[1])));
                map.moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(coordArray[0], coordArray[1]), 18));
                map.animateCamera(CameraUpdateFactory.zoomTo(18), 2000, null);
                marker.setDraggable(true);
                String s = Double.toString(coordArray[0]) + ", " + Double.toString(coordArray[1]);              
                Toast.makeText(app,"in the case"+s , Toast.LENGTH_LONG).show();
                break;

            }
        }
    }
} 
```

到目前为止，这是我的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/itemImage"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:src="@drawable/logo" />

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="400dp"
        android:layout_marginTop="10dp"
        android:layout_weight="66496.79"
        android:orientation="horizontal" >

        <fragment
            android:id="@+id/map"
            class="com.google.android.gms.maps.MapFragment"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_marginRight="150dp" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="170dp"
            android:orientation="vertical" >

            <Button
            android:id="@+id/messageBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:text="fffff" />

            <Button
                android:id="@+id/call"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_alignParentRight="true"
                android:text="ffff" />

        <Button
            android:id="@+id/sms"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignRight="@+id/button1"
            android:layout_centerVertical="true"
            android:text="ffff" />
        <Button
            android:id="@+id/email"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignRight="@+id/button1"
            android:layout_centerVertical="true"
            android:text="fffff" />

        <Button
            android:id="@+id/navigate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/button1"
            android:layout_alignParentEnd="false"
            android:layout_alignParentStart="false"
            android:layout_below="@+id/button1"
            android:layout_marginTop="14dp"
            android:text="ffffffffff" />
        </LinearLayout>
    </RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:29:34.830

1.  这将由地图组件自动管理。您只需要调用**重要提示：**不要忘记调用您的活动/片段的 onPause！[`GoogleMap.setMyLocationEnabled(true);`](https://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.html#setMyLocationEnabled%28boolean%29)
    **`GoogleMap.setMyLocationEnabled(false)`**

***   您可以使用[`GoogleMap.setOnMyLocationChangeListener`](https://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.html#setOnMyLocationChangeListener%28com.google.android.gms.maps.GoogleMap.OnMyLocationChangeListener%29)添加一个处理程序，每次用户位置更改时都会调用该处理程序。

    *   您可以使用[`Geocoder`](http://developer.android.com/reference/android/location/Geocoder.html)反向地理编码，但您需要一个后端才能获得结果。也许*Google Play 服务*库提供了所说的后端，但我不确定，因为我从未使用过这个功能** 

 *** * *

**要搜索触摸位置的名称** *（未测试）*：

```
MyActivity extends Activity implements OnMapClickListener {

    Geocoder geocoder;

    @Override
    protected void onCreate(final Bundle savedInstanceState) {
        geocoder = new Geocoder(this);
    }

    @Override
    public void onMapClick(LatLng point) {
         List<Address> addresses = geocoder.getFromLocation(point.latitude, point.longitude, 1);

         if (adresses.length > 0) {
             Address address = addresses.get(0);
             Toast.makeText(this, address.getFeatureName(), Toast.LENGTH_SHORT).show();
         }
         else {
             Toast.makeText(this, "Not found!", Toast.LENGTH_SHORT).show();
         }
    } 
```**

# javascript - 在 jQuery 中获取和显示当前滑块值的事件是什么？

> ID：15703902
> 
> 赞同：0
> 
> 时间：2013-03-29T13:08:41.900
> 
> 标签：javascript, jquery, slider

当滑块更改时，我尝试获取当前 jQuery 滑块值并将其显示到文本字段中。但是 JS 中执行脚本的事件是什么？我有那个脚本：

```
function add_value_textarea(){
var sliderval = $("#slider").slider("value");
var txtarea = document.getElementById('mytextfield');
return txtarea.value = sliderval;
}

window.onclick = add_value_textarea; 
```

当我单击文档中的所有位置时它起作用，但在单击滑块时不起作用。我知道我可以使用滑块 div 显示值，但我需要在文本字段中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:16:09.903

您正在寻找的是`change`滑块事件。

```
$( "#slider" ).slider({
  change: function( event, ui ) {
      $("#some").text(ui.value);
  }
}); 
```

用 html

```
<div id="slider"></div>

<input type="text" id="some"/> 
```

看[演示](http://jsfiddle.net/YeATF/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:17:34.903

我想[这](http://api.jqueryui.com/slider/#event-change)就是你要找的。在创建滑块时指定更改事件的侦听器（或之后，但我不知道为什么要这样做）。
此外，您使用 jQuery，因此您可以通过此侦听器更改所有内容：

```
function(e, ui) {
    $('#mytextfield').val(ui.value);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T13:19:33.353

```
$( "#slider" ).slider({
slide: function( event, ui ) {
        $( "#mytextfield" ).val( ui.value );
      }
    }); 
```

slide 的不同之处在于文本框的值会随着您移动滑块（不释放它）而改变。如果您使用更改，则文本框的值将在您释放滑块时仅更改一次。

另一个区别是，如果您只是单击滑块（没有实际滑动它），滑动事件将不会触发，而更改事件会。

所以你有这两个选择。挑选 ：）

# batch-file - Copy FOLDER to several multiple folders

> ID：15703903
> 
> 赞同：0
> 
> 时间：2013-03-29T13:08:45.057
> 
> 标签：batch-file, copy, directory, subdirectory

I have currently created the following code, it works fine to copy the contents within the folder 'C:\metadata_home\met_source\metadata\' BUT I need to copy the folder as well. When I use the syntax: copy "C:\metadata_home\met_source\" "%%~ff" it throws up an error saying 'The system cannot find the file specified.'

* * *

```
Setlocal EnableDelayedExpansion
cls
set currentDirectory=%CD%
FOR /D %%g IN ("C:\metadata_home\met_dest\*") DO (
    Pushd %CD%\%%g
    FOR /D %%f IN ("C:\metadata_home\met_dest\*") DO (
        copy "C:\metadata_home\met_source\metadata\" "%%~ff"
    )
Popd
) 
```

pause

* * *

Please help I am banging my head against the wall on this one!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:23:06.383

尝试这个：

```
xcopy /s C:\metadata_home\met_source\metadata C:\metadata_home\met_dest 
```

# c# - 如何应用 substring-after 和 substring-before 函数

> ID：15703913
> 
> 赞同：1
> 
> 时间：2013-03-29T13:09:09.330
> 
> 标签：c#, xpath, html-agility-pack

我的html结构如下

```
<td class="opps">1:2</td> 
```

我正在尝试使用 XPath 拆分 td 值，如下所示

```
.//*[contains(@class, 'opps')]/text()[normalize-space(substring-after(., ':'))]
.//*[contains(@class, 'opps')]/text()[normalize-space(substring-before(., ':'))] 
```

但值返回**1:2**

如何分别提取**1**和**2**？

我也在使用 HtmlNodeNavigator 和 HtmlAgilityPack。

有什么问题？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T08:30:12.310

经过更多搜索，我找到了解决方案。

如果使用**HtmlNodeNavigator**或**XPathNavigator**，解决方案可能如下

```
string _result1 = <HtmlNodeNavigator>.Evaluate("substring-after(.//*[contains(@class, 'opps')]/text(), ':')") as string; 
string _result2 = <XPathNavigator>.Evaluate("substring-before(.//*[contains(@class, 'opps')]/text(), ':')") as string; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-02T18:20:23.753

以防万一，您也可以使用 c# 方法。例如;

```
string strVal = "1:2";
string[] splitedStrArr = strVal.Split(':'); 
// you have now 2 elements inside the array. You can use it separately 
```

# objective-c - 从 aws ios sdk 开始使用他们的 ISBN 从 iPhone 搜索书籍

> ID：15703916
> 
> 赞同：1
> 
> 时间：2013-03-29T13:09:22.750
> 
> 标签：objective-c, ios6, amazon-web-services, amazon-s3

我是 AWS iOS 开发工具包的新手。我已经安装了 AWS iOS SDK 并查看了 AWS iOS SDK 提供的示例项目。但不幸的是，我没有得到任何适合我的东西。

我的简单任务是在亚马逊服务器上用 ISBN 号搜索书籍。

我可以有从 AWS 请求“itemlookup”的示例 Xcode 项目吗？或者我可以有示例 Xcode 项目请求从 AWS 获取项目吗？

我在这上面花了超过 8 个小时，但没有找到任何东西。现在我终于来了。我希望我能从这里得到合适的帮助。

谢谢你的期待。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:22:53.293

经过 Bob Kinney 和 Ryan Parman 的热烈讨论和帮助。我走上了正确的道路，并在 SO 上找到[了这个。](https://stackoverflow.com/questions/2344084/how-can-i-integrate-amazon-search-results-into-my-app)在这个问题中，最后一个答案有“亚马逊广告 api”的 Sorceforge 示例代码的链接

[示例代码在这里](http://sourceforge.net/projects/mtgr8-a3/?source=dlp)

虽然这段代码有一些错误，我通过谷歌搜索解决了这些错误，但最后我得到了想要的结果。

希望这对您有很大帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T14:47:55.863

适用于 iOS 的 AWS 开发工具包用于访问 S3、EC2 和 DynamoDB 等 Amazon Web Services。您正在寻找的是[Advertising API](https://affiliate-program.amazon.com/gp/advertising/api/detail/main.html)。有很多[关于 SO 的问题](https://stackoverflow.com/search?q=Amazon%20advertising%20API)应该会给你一些初步的想法。

# google-maps-api-3 - 来自姓名、地址和邮政编码的位置标记

> ID：15703918
> 
> 赞同：27
> 
> 时间：2013-03-29T13:09:23.397
> 
> 标签：google-maps-api-3, google-maps-markers, street-address

在我的域模型中，对于有问题的实体，我有：

*   地点名称（例如 Waterstones Wakefield）
*   街道地址（例如 61-62 Bishopgate Walk）
*   和邮政编码（例如 WF1 1YB）

从以上三条信息中，我怎样才能得到一个放置在地图上的标记？我正在使用谷歌地图 API 3。

谢谢

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-29T13:15:24.090

试试这个例子：

[这里是原版](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple)

HTML

```
 <body onload="initialize()">
        <div>
          <input id="address" type="text" value="Sydney, NSW">
          <input type="button" value="Geocode" onclick="codeAddress()">
        </div>
        <div id="map-canvas" style="height:90%;top:30px"></div>
      </body> 
```

JS

```
 <script>
  var geocoder;
  var map;
  function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(-34.397, 150.644);
    var mapOptions = {
      zoom: 8,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
  }

  function codeAddress() {
    var address = document.getElementById('address').value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });
  }
</script> 
```

# javascript - Collect data to object with four async calls and handle the object onready

> ID：15703926
> 
> 赞同：0
> 
> 时间：2013-03-29T13:09:53.550
> 
> 标签：javascript, performance, jquery-deferred

I have a handler (callback), an object to handle and four functions, which collect the data to object. In my case I wish to asynchronously call four data retrievers and when execution of all four is complete, handle the resulting object (something similar to the following):

```
var data = {};

function handle (jsObj) {}

// data retrieving
function getColorData () {}
function getSizeData () {}
function getWeightData () {}
function getExtraData () {}

data.color = getColorData();
data.size = getSizeData();
data.weight = getWeightData();
data.extra = getExtraData();

handle( data ); 
```

Of course, this code will not work properly. And if I chain data retrieving functions, they will be called one after another, right? All four functions should be called asynchronously, cause they are being executed for too long to call them one by one.

**Updated:**

Thanks to everybody for your suggestions! I prefered `$.Deferred()`, but I found it slightly difficult to make it work the way I need. What I need is to asynchronously make a `view`, which requires four kinds of data (`extraData`, `colorData`, `sizeData` & `weightData`) and I have three objects: `App`, `Utils` & `Tools`.

Just a small description: `view` is created by calling `App.getStuff` passed `App.handleStuff` as a callback. Callback in the body of `App.getStuff` is called only `$.when(App.getExtraData(), App.getColorData(), App.getSizeData(), App.getWeightData())`. Before that `Utils.asyncRequest` passed `Tools.parseResponse` as a callback is called.

So, now the question is should I create four deferred objects inside each `App.get*Data()` and also `return deferred.promise()` from each of them? And should I `deferred.resolve()` in the last function in my order (`Tools.parseResponse` for `App.getExtraData` in my example)?

```
var view,
    App,
    Utils = {},
    Tools = {};

// Utils
Utils.asyncRequest = function (path, callback) {
    var data,
        parseResponse = callback;

    // do something with 'data'

    parseResponse( data );
};

// Tools
Tools.parseResponse = function (data) {
    var output = {};

    // do something to make 'output' from 'data'

    /* So, should the deferred.resolve() be done here? */
    deferred.resolve(output);
    /// OR   deferred.resolve();
    /// OR   return output;
};

// App
App = {
    // Only one method really works in my example
    getExtraData : function () {
        var deferred = new jQuery.Deferred();

        Utils.asyncRequest("/dir/data.txt", Tools.parseResponse);

        return deferred.promise();
    },
    // Others do nothing
    getColorData  : function () { /* ... */ },
    getSizeData   : function () { /* ... */ },
    getWeightData : function () { /* ... */ }
};
App.getStuff = function (callback) {
    $.when( 
        App.getExtraData(), 
        App.getColorData(), 
        App.getSizeData(), 
        App.getWeightData()
    )
     .then(function (extraData, colorData, sizeData, weightData) {
        var context,
            handleStuff = callback;

        // do something to make all kinds of data become a single object

        handleStuff( context );
    });
};
App.handleStuff = function (stuff) { /* ... */ };

/// RUN
view = App.getStuff( App.handleStuff ); 
```

I did not expect the code in my example above to work, it is for illustrative purposes.

I've been trying to solve this for quiet a long time and it still gives no result. The documentation for `jQuery.Deferred()` and discussions around this, unfortunately, did not help me. So, I would be very glad and greatful for any help or advise.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:16:07.570

从概念上讲，您将使用一个随着每次异步调用完成而递增的计数器。在计数器被所有异步调用递增后，主调用者​​应该继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:18:33.947

我可以为这种情况提出的建议是这样的。写一个这样的函数

```
var completed = 0;
checkHandler = function() {
  if(completed == 4) {
    handle(data);
  }
} 
```

其中 completed 是您必须收到的肯定回调的数量。一旦每个函数收到回调，您就可以增加“完成”计数器并调用 checkHandler 函数。你就完成了！

例如

```
function getColorData() {
   $.get('ajax/test.html', function(data) {
      completed++;
      checkHandler();
   });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T13:14:57.727

我认为您正在寻找的是[Promises](http://wiki.commonjs.org/wiki/Promises/A) / Deferreds。

使用 Promise，您可以编写如下内容：

```
when(getColorData(), getSizeData(), getWeightData(), getExtraData()).then(
    function (colorData, sizeData, weightData, extraData) {
        handle(/*..*/);
    }
) 
```

当异步调用完成时，这些`get*Data()`函数将返回一个它们履行的承诺。

前任：

```
function getData() {
    var promise = new Promise();
    doAjax("getData", { "foo": "bar" }, function (result) {
        promise.resolve(result);
    });
    return promise;
} 
```

简单地计算参数的`when`数量，如果它的所有承诺都已解决，它将`then`使用承诺的结果进行调用。

jQuery 有一个好的实现：[http ://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)

# android - Debug Android spring framework: print the sent requests

> ID：15703928
> 
> 赞同：9
> 
> 时间：2013-03-29T13:09:55.270
> 
> 标签：android, spring, debugging, logging

I use the spring framework for Android to make calls to a rest server. I can't find a way for debugging the sent requests, I would like to print the **raw** body of the requests built by the framework. It seems pretty basic but as the framework auto serialize the objects, I can't figure out how to print the **raw** final body.

Is anybody have a solution?

Thanks for your advice.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T15:51:40.020

试试这个命令：

```
adb shell setprop log.tag.RestTemplate VERBOSE 
```

（您可以`adb`在 中找到`...android-sdk/platform-tools/`）

# java - 显示来自 MSG 文件的邮件

> ID：15703930
> 
> 赞同：1
> 
> 时间：2013-03-29T13:10:00.200
> 
> 标签：java, msg

在我的应用程序 (Java EE) 中，我检索了一个 MSG 文件，我想在浏览器中显示它，就像在 Outlook 上查看它一样。是否已经有 Java API 可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:26:23.083

最简洁的答案是不。

有些 API（显然）允许您解析 Outlook“msg”文件：

*   [用 Java 读取 Outlook .msg 文件的最佳库是什么？](https://stackoverflow.com/questions/65936/whats-the-best-library-for-reading-outlook-msg-files-in-java)

但是，将其转换为将显示为网页的内容是另一回事。这不是你会实现 API 来做的事情。（您可能会考虑使用可重用的 JSP 来做这件事……或其他什么……但这似乎是一个遥远的目标。而且我什么也找不到……）

* * *

也许您应该考虑像 OWA 这样的替代方案，其中用户的浏览器直接与 Exchange 服务器对话。

# vb.net - LINQ expression to expression tree via API in VB

> ID：15703931
> 
> 赞同：2
> 
> 时间：2013-03-29T13:10:03.090
> 
> 标签：vb.net, linq, api, linq-to-sql, lambda

I have a relatively simple LINQ expression which I need to convert into VB expression tree syntax. This is likely an easy task for folks that are familiar, but I am new to the realm of LINQ expression trees.

In my samples, you see a "New Int16() {}" array. That value must be parameterized at run-time with an array of values from another code element.

my query is:

```
from i in tblInstitutions
let ChildHasCategory = i.tblInstCtgyHistories.Where(Function(CtgyHist) CtgyHist.EndDate is Nothing AND ( (New Int16() {32,35,38,34}).Contains(CtgyHist.InstCtgyCodeFK)))
where ChildHasCategory.Any()
select i 
```

Which can also be represented as:

```
tblInstitutions
.Select (i => new  {
        i = i, 
        ChildHasCategory = (IEnumerable<tblInstCtgyHistory>)(i.tblInstCtgyHistories)
           .Where (
              CtgyHist => 
                    ((CtgyHist.EndDate == null) & 
                       (IEnumerable<Int16>)(new Int16[] { 32, 35, 38, 34 } ).Contains (CtgyHist.InstCtgyCodeFK)
                    )
           )
     }
)
.Where ($VB$It => $VB$It.ChildHasCategory.Any ())
.Select ($VB$It => $VB$It.i) 
```

This is going to be used in the context of a custom filter in an ASP.NET Dynamic Data web application. I'd like to mimic the default approach. A sample of one of the other dynamic filter code-behind is:

```
Public Overrides Function GetQueryable(source As IQueryable) As IQueryable
    Dim value = TextBox1.Text
    If String.IsNullOrWhiteSpace(value) Then
        Return source
    End If

    If DefaultValues IsNot Nothing Then
        DefaultValues(Column.Name) = value
    End If

    Dim parameter = Expression.Parameter(source.ElementType)
    Dim columnProperty = Expression.PropertyOrField(parameter, Column.Name)
    Dim likeValue = Expression.Constant(value, GetType(String))
    Dim condition = Expression.Call(columnProperty, GetType(String).GetMethod("Contains"), likeValue)
    Dim where = Expression.Call(GetType(Queryable), "Where", New Type() {source.ElementType}, source.Expression, Expression.Lambda(condition, parameter))
    Return source.Provider.CreateQuery(where)
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:47:49.767

我不确定您是否真的需要在这里担心表达式树。首先，我们应该能够如下表达您的查询：

```
Dim targetCodes = new Int16() {32, 35, 38, 34 } ' This could be data driven as well
return from i in tblInstitutions
       where i.tblInstCtgyHistories.Any(Function(ctgyHist) ctgyHist.EndDate is Nothing AndAlso 
              targetCodes.Contains(ctgyHist.InstCtgyCodeFK))
       select i 
```

鉴于此，在什么情况下您需要自定义表达式树？

# html - 无法垂直对齐浮动元素和周围元素

> ID：15703932
> 
> 赞同：3
> 
> 时间：2013-03-29T13:10:05.400
> 
> 标签：html, css, internet-explorer

我有几个关于浮动元素对齐的问题，我正在尝试制作里面有几个元素的表格单元格。就像文本输入然后下拉一样，当用户调整浏览器窗口大小时，只有文本输入应该调整大小。在这里，我是如何做到的：

```
<table style="width: 100%;">
    <tr style="vertical-align: bottom;">
        <td style="white-space: nowrap; width: 20%;">
            <div><span style="float: right; display: block;">
                <select style="display:show;width:60px">
                    <option selected="" value="1">1</option>
                    <option value="2">2</option>
                </select>
                </span> <span style="display: block; overflow: hidden; padding-right: 2px;">
                <input type="text" value="100.0" style="width:100%; text-align:right"/>
            </span></div>
        </td>
    </tr>
</table> 
```

但浮动元素看起来有点高于非浮动。 ![在此处输入图像描述](../Images/926489fb66e7236ba94e86c87abb9fb2.png)

当我有链接时，我还有另一种情况，然后输入文本字段，然后是下拉菜单或另一个链接，同样，输入字段应该是唯一可调整大小的元素。

这是代码

```
<table style="width: 100%;">
    <tr style="vertical-align: bottom;">
        <td style="white-space:nowrap; width: 30%;">
          <span style="display: block; float: left; padding-top: 3px;">
            <a href="return false;"><img width="14" height="14" src=""/>
            </a>&nbsp;
          </span>
          <span style="float: right; display: block; padding-top: 5px;">
        <a href="return false;">&nbsp;?</a>
          </span>
          <span style="display: block; overflow: hidden; padding-right: 2px;">
        <input value=""style="width: 100%;">
          </span>
         </td>
    </tr>
</table> 
```

在这种情况下，非浮动元素高于其他元素：

![在此处输入图像描述](../Images/fc9ab510a06925bcafc4eb7d0f0b6e28.png)

基本上，我需要以某种方式垂直对齐第一个示例中的浮动元素，因此它的底部将与非浮动元素的底部相同，而在第二个示例中我需要以某种方式对齐非浮动元素的底部，所以它会与浮动元素相同。

我试图让它在 7、8、9、10 中工作。

添加填充可以解决问题，但是在 Firefox 和 chrome 中看起来会很丑。

编辑：

或者至少告诉我为什么不能这样做。

编辑2：

或者如果问题出在表格标签上？所以我需要使用不同的东西（divs）。整个结构就是一个表格，唯一的区别就是cell里面有一些select之类的，所以这里用table是很自然的。但是，好吧，如果问题出在表上，我会尝试用 div 重新创建它。

编辑3：

即使我删除了表格，样本 1 中的右浮动元素也会更高一些。我试图用填充和绝对定位替换浮动，但它仍然更高。

编辑4：

对于示例 1，如果我设置`display: none`为左元素，则浮动元素垂直位置变为正常。

```
*** UPDATE: Sorry that was my mistake to put bounty on this question, i've already solved my problem.*** 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T05:51:46.323

工作示例：http: [//jsfiddle.net/qARBL/1/](http://jsfiddle.net/qARBL/1/)

在任何事情之前 - 请，请，请不要使用`inline styling`- 这太老派*了！*请改用外部 CSS 样式表。

将以下 css 添加到您的 HTML 中：

1.

```
<select style="display:show;width: 60px;margin: 0;">
    <option selected="" value="1">1</option>
    <option value="2">2</option>
</select> 
```

2.

```
<input type="text" value="100.0" style="width:100%; text-align:right;margin: 0;padding: 0;"> 
```

只需调整上面两个元素的边距和填充就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T22:41:51.103

我真的没有得到*你想要*用你的标记/css实现的东西，但也许那是因为你正在使用**表格+浮动+垂直对齐**的东西。无论如何，我清理了第一个问题，想到在这里发布代码：

```
<style type="text/css">
.container { vertical-align: bottom; }
.content { white-space: nowrap; width: 20%; }
.col1 { float: right; display: block; }
.col1 select { display: block; width: 60px }
.col2 { display: block; overflow: hidden; padding-right: 2px; }
.col2 input { width: 100%; text-align: right }
</style>

<div class="container">
    <div class="content">
        <div class="col1">
            <select>
                <option selected="" value="1">1</option>
                <option value="2">2</option>
            </select>
        </div>
        <div class="col2">
            <input type="text" value="100.0"/>
        </div>
    </div>
</div> 
```

在此处查看它：http: [//jsfiddle.net/dreamyguy/MKQ75/](http://jsfiddle.net/dreamyguy/MKQ75/)

请注意，这`display: show`是[无效](https://developer.mozilla.org/en-US/docs/CSS/display) `CSS`的，所以我将其更改为`display: block`.

另一件需要注意的是，它`floated elements`与`absolutely positioned elements`. 它们超出了文档的正常流程，因此应小心处理。除非必须，否则不要浮动元素，如果这样做，请更改父级和兄弟级的样式 - 以便获得预期的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T13:38:03.773

我不需要对齐底部的所有元素，但是因为它是在 CSS 中提供的，所以你需要它，所以到底是什么。

我认为您使用 table 而不是 div 的方法没有任何问题。事实上，它可以帮助您在输入框大小增加或缩小时保持其他元素的宽度不变。

我建议你有多个 td 标签，将你的元素放在单独的 td 标签中，并将宽度放在 table 或 tr 上而不是 td 标签上。而不是使用太多 span 元素来添加 inline-css（它不旧学校），将其添加到 td 标签或您的元素标签。如果这里变得难以理解，那就是[jsfiddle](http://jsfiddle.net/li8t/EXW6e/1/)

```
<table style="width: 100%;">
<tr style="width:20%;">
    <td style="white-space: nowrap;">
        <span style="display: block; overflow: hidden; padding-right: 2px;">
            <input type="text" value="100.0" style="width:100%;text-align:right"/>
        </span>
    </td>
    <td style="white-space: nowrap;width:60px;">
        <select style="width:60px">
            <option selected="" value="1">1</option>
            <option value="2">2</option>
        </select>
    </td>
</tr>
</table>

<hr>

<table style="width: 100%;">
<tr style="width: 30%;">
    <td style="white-space:nowrap;width:16px;height:auto; ">
        <a href="return false;"><img width="14" height="14" src=""/>
        </a>
    </td>
    <td>
      <input type="text" value="" style="width: 98%;margin:2px;">
    </td>
    <td style="width:14px;">
     <a href="return false;">&nbsp;?</a>
    </td>
</tr>
</table> 
```

在 css 部分中，通过取消对边框部分的注释，您将看到您的元素在表格中的每一行中是如何相互堆叠的。
此外，通过取消注释垂直对齐属性并将其更改为中间，您会看到更好的布局，尽管我不确定您的特定情况是否需要您要求的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T23:45:13.310

我尝试了一种不同的方法，假设您可以为不需要调整大小的其他元素设置一个固定的 with ，您可以利用`calc()`并避免使用`float`and `table`。

这是演示：http: [//jsfiddle.net/RcSfF/](http://jsfiddle.net/RcSfF/)

## HTML

```
<input/><select><option>a</option></select> 
```

## CSS

```
input,select{
    box-sizing: border-box;
}
input{ 
    width: calc(100% - 60px);
}
select{
    width: 60px;
} 
```

你需要一个 polyfill 来模拟`calc`旧的浏览器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-03T07:13:45.683

您不能并行使用浮动和垂直对齐。浮动元素总是垂直对齐：顶部。

如果您`display: inline-block`改用，则可以（使用`*zoom: 1, *display:inline;`IE lt 9 破解）。

不幸的是，使用这种方法，HTML 代码中的空格将显示在结果中。有两种解决方法。

1.  如果您有完整的源代码控制，请删除代码中的空格
2.  给周围块的字体大小为 0

请参阅此处的一些演示代码：http: [//jsfiddle.net/HerrSerker/3yMcS/](http://jsfiddle.net/HerrSerker/3yMcS/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-01T08:30:04.103

至少我找到了案例 1 的解决方案。错位的浮动元素可以通过用`position: absolute; right: 0; bottom: 0;` **底部替换浮动来修复：0**是重要部分。不要忘记，应该将填充权添加到左侧的输入中，并且外部元素位置应该更改为相对。

# jquery - 如何修复 jQuery 和 CSS 问题？

> ID：15703933
> 
> 赞同：2
> 
> 时间：2013-03-29T13:10:15.450
> 
> 标签：jquery, css

我的页面：

![按钮](../Images/c8cc4f9410c7c6113bdd953f14a86d1e.png)

从左到右是为了；*正常*、*悬停*和*活动*。我正在使用 jQuery 下拉功能，而我希望在鼠标未悬停或处于活动状态时显示普通图像，在悬停时显示悬停图像，在单击时显示活动图像和出现下拉菜单。

我还需要插入符号距顶部 9 像素，距左侧 4 像素，并且如果可能的话，它是不可选择的。

我的页面可以在[这里找到](https://tornhq.com/WorkingOn/Account/Management/PageBuilder/untitled.html)

**编辑：**刚刚制作了 一个[JSFiddle 。](http://jsfiddle.net/YVnfs/)

```
<div id="Font-Type">
    <div class="dropdown">
        Arial <a href="#Font-Type" class="dropdown-toggle">▼&lt;/a>
        <ul class="dropdown-menu">
            <li class="Arial">Arial</li>
            <li>Monospace</li>
            <li>Cursive</li>
            <li>Fantasy</li>
        </ul>
    </div>
</div> 
```

请不要说我已经选择像这样对字体类型下拉菜单进行下拉以显示字体的预览，其中暂时无法正常工作，但我知道问题并试图首先解决这个问题，因为见上。

**为大卫弗雷戈里编辑**

```
#Font-Size {
    width:14px;
    height:22px;
    cursor:pointer;
    font-size:8px;
}
#Font-Size.img {
    background:url(../../../Images/TextEditor/buttons.png) no-repeat;
    background-position:0 0;
}
#Font-Size.img:hover {
    background:url(../../../Images/TextEditor/buttons.png) no-repeat;
    background-position:0 14;
} 
```

即使我指定了“左上角”，以下 CSS 也没有显示任何内容。

**更新：**感谢[David Fregoli](https://stackoverflow.com/users/1680422/david-fregoli) ， 查看更新的[JSFiddle](http://jsfiddle.net/YVnfs/2/)。现在剩下要回答的是如何让插入符号距顶部 9 像素和距左侧 4 像素，并且在下拉菜单打开时处于活动状态以保持活动状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T13:15:36.683

你只需要 CSS 伪选择器

```
a.img {
   background-image: //img1
}
a.img:hover {
   background-image: //img2
}
a.img:active {
   background-image: //img3
} 
```

**编辑**，因为您似乎有一个精灵而不是设置背景图像，您需要设置背景位置属性

# regex - 大小写匹配正则表达式

> ID：15703934
> 
> 赞同：2
> 
> 时间：2013-03-29T13:10:18.537
> 
> 标签：regex, tcl

一段时间以来，我一直想知道 Tcl 中的正则表达式匹配模式，但我一直不知道它是如何工作的。顺便说一句，我正在使用 Wish 和 Tcl/Tk 8.5。

我`MmmasidhmMm`存储了一个随机字符串，`$line`我拥有的代码是：

```
while {[regexp -all {[Mm]} $line match]} {
    puts $data $match
    regsub {[Mm]} $line "" line
} 
```

`$data`是一个文本文件。

这就是我得到的：

```
m
m
m
m
m
m 
```

在我期待的时候：

```
M
m
m
m
M
m 
```

当我得到这个时，我正在尝试一些事情来看看改变一点会如何影响结果：

```
while {[regexp -all {^[Mm]} $line match]} {
    puts $data $match
    regsub {[Mm]} $line "" line
} 
```

我得到：

```
M
m
m 
```

令人惊讶的是，`$match`保持这种情况。

我想知道为什么在第一种情况下，`$match`由于某种原因自动变为小写。除非我不了解正则表达式实际上是如何工作的，否则我不确定我可能做错了什么。也许有一个我不知道的修复它的标志？

我不确定有一天我是否真的会使用这种代码，但我想了解它的工作原理可能会在其他方面对我有所帮助。我希望我没有错过那里的任何东西。如果您需要更多信息，请与我们联系！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T13:39:31.347

这里的关键在你的`-all`旗帜里。该文件说：

> `-all`-- 使正则表达式在字符串中尽可能多地匹配，返回找到的匹配总数。如果这是用匹配变量指定的，它们将只包含最后一次匹配的信息。

这意味着变量*match*包含最后一个匹配项，即小写的“m”。放下`-all`旗帜，你会得到你想要的。

### 更新

如果您的目标是删除所有“m”而不考虑大小写，则可以将整个代码块压缩为一行：

```
regsub -all {[MM]} $line "" line 
```

或者，更直观地说：

```
set line [string map -nocase {m ""} $line]; # Map all M's into nothing 
```

# c# - 如何在gridview中排列数据表列？

> ID：15703937
> 
> 赞同：2
> 
> 时间：2013-03-29T13:10:27.990
> 
> 标签：c#, asp.net, gridview, aspxgridview

我的 gridview 有一个从 aspx 设计器绑定的模板字段。我正在将数据表绑定到它。现在，我的模板字段（具有几个操作按钮）将作为第一列出现。有没有办法在模板字段之前排列数据表列？

GridView 的设计器代码：

```
<asp:GridView ID="JobListGrid" runat="server" AutoGenerateColumns="false" >
<Columns>
   <asp:TemplateField HeaderText="Actions">
    <ItemTemplate>
      <div>
       <asp:ImageButton ID="View" CssClass="imgbutton" ToolTip="View Pdf" runat="server"
            CommandArgument='<%# DataBinder.Eval(Container, "RowIndex") %>' ImageUrl="~/Content/pdf.PNG"  CommandName="View" Width="36" Height="36" OnClientClick='<%# Eval("JobID", "OpenInNewWindow(\"{0}\").ToString()") %>' />
        </div>
     </ItemTemplate>
   </asp:TemplateField>
</Columns>
</asp:GridView> 
```

客服代码：

```
JobListGrid.DataSource = dataTableObj;
JobListGrid.DataBind(); 
```

上面的代码显示了网格视图标题，如：

```
TemplateField | Col1 | Col2 | Col3 
```

我需要 Templatefield 排在最后。col1、col、col3 是从数据表中获取的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:39:20.033

像这样更改您的 GridView，为了控制您`AutoGenerateColumns`必须禁用的列。

```
<asp:GridView ID="JobListGrid" runat="server" AutoGenerateColumns="False"> 
                <Columns>
                    <asp:BoundField DataField="JobID" HeaderText="JobID" />
                    <asp:BoundField DataField="JobName" HeaderText="Name" />
                    <asp:TemplateField HeaderText="Actions">
                        <ItemTemplate>
                        <div>
                            <asp:ImageButton ID="View" CssClass="imgbutton" ToolTip="View Pdf" runat="server" CommandArgument='<%# DataBinder.Eval(Container, "RowIndex") %>' ImageUrl="~/Content/pdf.PNG"  CommandName="View" Width="36" Height="36" OnClientClick='<%# Eval("JobID", "OpenInNewWindow(\"{0}\").ToString()") %>' />
                       </div>
                       </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
</asp:GridView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:05:57.727

```
var columns = JobListGrid.Columns.CloneFields(); //Will get all the columns bound dynamically to the gridview.
var columnToMove = JobListGrid.Columns[0]; //My first column is Action Column
JobListGrid.Columns.RemoveAt(0);           // Remove it
JobListGrid.Columns.Insert(columns.Count - 1, columnToMove); // Moved to last
JobListGrid.DataBind();                    // Bind the grid . 
```

这件事对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:53:48.290

您必须为数据表中所需的每一列使用模板字段。在模板字段中使用标签来显示使用`<%#Bind("yourColumnName")%>`文本属性的文本。这样，您可以按照您希望的任何顺序排列列。也在`autogenerate columns to false`gridview中设置。就像是

```
<asp:GridView ID="JobListGrid" runat="server" AutoGenerateColumns="false" >
    <Columns>
 <asp:TemplateField HeaderText="myDataTableColumn1">
        <ItemTemplate>        
           <asp:Label ID="lblTest" runat="server"
             Text='<%# Bind("yourDataTableColumnName") %>'></asp:Label>
       <ItemTemplate>
  </asp:TemplateField>
  <asp:TemplateField HeaderText="Actions">
   <Columns>
           <asp:ImageButton ID="View" CssClass="imgbutton" ToolTip="View Pdf" runat="server"
                CommandArgument='<%# DataBinder.Eval(Container, "RowIndex") %>' ImageUrl="~/Content/pdf.PNG"  CommandName="View" Width="36" Height="36" OnClientClick='<%# Eval("JobID", "OpenInNewWindow(\"{0}\").ToString()") %>' />
            </div>
         </ItemTemplate>
       </asp:TemplateField>
    </Columns>
    </asp:GridView> 
```

# java - Android开发，onClickListener不起作用

> ID：15703938
> 
> 赞同：1
> 
> 时间：2013-03-29T13:10:36.553
> 
> 标签：java, android, onclicklistener

我对 Android 开发完全陌生，我正在通过一本书（实用的 android 4 游戏开发）制作一款名为星际战斗机的游戏。这是菜单屏幕上的问题。

退出按钮用于工作，并关闭应用程序。由于我通过在后台播放音乐来工作，它不再起作用。单击退出会停止音乐，但不会关闭应用程序，我不知道为什么，请帮忙？代码如下：

SFMainMenu.java：

```
package com.example.starfighter;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageButton;

public class SFMainMenu extends Activity {

    //Called when the activity is first created
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //Fire up background music
        SFEngine.musicThread = new Thread(){
            public void run(){
                Intent bgmusic = new Intent(getApplicationContext(), SFMusic.class);
                startService(bgmusic);
                SFEngine.context = getApplicationContext();
            }
        };
        SFEngine.musicThread.start();

        final SFEngine engine = new SFEngine();

        //Set menu button options
        ImageButton start = (ImageButton)findViewById(R.id.btnStart);
        ImageButton exit = (ImageButton)findViewById(R.id.btnExit);

        start.getBackground().setAlpha(SFEngine.MENU_BUTTON_ALPHA);
        start.setHapticFeedbackEnabled(SFEngine.HAPTIC_BUTTON_FEEDBACK);

        exit.getBackground().setAlpha(SFEngine.MENU_BUTTON_ALPHA);
        exit.setHapticFeedbackEnabled(SFEngine.HAPTIC_BUTTON_FEEDBACK);

        start.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View v){
                //Start the game!!!
            }
        });

        exit.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View v){
                boolean clean = false;
                clean = engine.onExit(v);
                if(clean){
                    int pid = android.os.Process.myPid();
                    android.os.Process.killProcess(pid);
                }
            }
        });
    }

} 
```

SFEngine.java

```
package com.example.starfighter;

import android.view.View;
import android.content.Context;
import android.content.Intent;

public class SFEngine {

    //Constants that will be used in the game
    public static final int GAME_THREAD_DELAY = 4000;
    public static final int MENU_BUTTON_ALPHA = 0;
    public static final boolean HAPTIC_BUTTON_FEEDBACK = true;
    public static final int SPLASH_SCREEN_MUSIC = R.raw.looptrouble;
    public static final int R_VOLUME = 100;
    public static final int L_VOLUME = 100;
    public static final boolean LOOP_BACKGROUND_MUSIC = true;
    public static Context context;
    public static Thread musicThread;

    //Kill game and exit
    public boolean onExit(View v){
        try{
            Intent bgmusic = new Intent(context, SFMusic.class);
            context.stopService(bgmusic);
            musicThread.stop();
            return true;
        }catch(Exception e){
            e.printStackTrace();
            return false;
        }
    }

} 
```

Eclipse 在 musicThread.stop() 行上发出警告 - 不推荐使用 Thread 类型的方法 stop。

提前致谢！:)

编辑：

还添加了此类，SFMusic，这可能是相关的：

```
package com.example.starfighter;

import android.app.Service;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.IBinder;
import android.content.Context;

public class SFMusic extends Service {

    public static boolean isRunning = false;
    MediaPlayer player;

    @Override
    public IBinder onBind(Intent arg0){
        return null;
    }

    @Override
    public void onCreate(){
        super.onCreate();
        setMusicOptions(this, SFEngine.LOOP_BACKGROUND_MUSIC, SFEngine.R_VOLUME, SFEngine.L_VOLUME,
                SFEngine.SPLASH_SCREEN_MUSIC);
    }

    public void setMusicOptions(Context context, boolean isLooped, int rVolume, int lVolume, int soundFile){
        player = MediaPlayer.create(context, soundFile);
        player.setLooping(isLooped);
        player.setVolume(rVolume, lVolume);
    }

    public int onStartCommand(Intent intent, int flags, int startId){
        try{
            player.start();
            isRunning = true;
        } catch(Exception e){
            isRunning = false;
            player.stop();
        }
        return 1;
    }

    public void onStart(Intent intent, int startId){

    }

    public void onStop(){
        isRunning = false;
    }

    public IBinder onUnBind(Intent arg0){
        //TODO Auto-generated method stub
        return null;
    }

    public void onPause(){

    }

    @Override
    public void onDestroy(){
        player.stop();
        player.release();
    }

    @Override
    public void onLowMemory(){
        player.stop();
    }

} 
```

我尝试在 onClick 方法中添加一个 println 作为第一行代码。没有任何东西输出到控制台，所以我不确定该方法是否被调用。但后来我很困惑为什么音乐仍然停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:57:26.017

我建议您删除通过 ID 杀死进程的代码，因为这是一种不好的做法，Android 可能会重新启动被杀死的应用程序。改为使用`finish();`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:15:36.497

```
Use 

System.exit(0);

Before that 

stopservice();
Thread.stop();

should be done 
```

# java - 分布式 jar 文件没有获取我的 .txt 文件

> ID：15703939
> 
> 赞同：0
> 
> 时间：2013-03-29T13:10:42.480
> 
> 标签：java, jar, bufferedreader

我正在使用 OS X、Netbeans 7.3 Beta 2、Java。

我有一个从文本文件中读取的程序。运行我的分布式 jar 时，我的程序不使用这个 .txt 文件。

这是我的两个包 - 除了 SPPMainGUI2.java 之外，忽略 com.john.view 中的所有 java 文件：

![忽略所有](../Images/eb00d5febd4503a6b8dba7fd3f82f1e4.png)

如您所见，cpass.txt 位于 com.john.spp 中。这是我的使用方法：

```
BufferedReader in = null;
    try {
        in = new BufferedReader(new FileReader("cpass.txt"));
    } catch (FileNotFoundException ex) {
        Logger.getLogger(SPPMainGUI2.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

我猜我的 FileReader 位置需要更改。当我的程序从 Netbeans 运行时，它工作正常，当我运行在我的 dist 文件夹中找到的 jar 文件时，它不会获取 .txt 文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:13:21.847

而不是像`new FileReader("cpass.txt")`使用资源访问机制那样读取文件：

```
 in = new BufferedReader(new InputStreamReader(
                   getClass().getResourceAsStream("cpass.txt"))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T13:20:02.100

您在哪个班级阅读文件？它在 SPPMainGUI2 中吗？

然后，您需要更改`getClass()`为`Main.class`位于`com.john.spp`包中的其他类。

# html - 需要将社交媒体图标与页面右侧对齐

> ID：15703940
> 
> 赞同：3
> 
> 时间：2013-03-29T13:10:45.513
> 
> 标签：html, css, wordpress, icons

请查看此页面：[http ://badadesigns.com/work438/](http://badadesigns.com/work438/)

页面顶部有社交媒体图标，但它们未与页面右侧对齐。当我调整浏览器页面的大小时，对齐方式正在改变。

我真的不确定正在使用什么代码，但我认为就是这样：

```
#logincont {
    width:330px;
    float:left;
    margin-left:1145px;
} 
```

任何人都可以帮我对齐，以便它沿着页面的右侧边框固定并设置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T13:16:52.713

div`#logincont`设置为`float:left`并且有一个巨大的`margin-left`，这是不必要的。

应该是`float: right`没有边距的，像这样

```
#logincont {
    width:330px;
    float:right;
} 
```

**更新**：如果我理解正确，您希望社交媒体图标在右侧对齐，但不超过网站内容。

试试这个 ：

```
#logincont {
    width: 940px;
    text-align: right;
    margin: 0 auto;
} 
```

width 设置为`#content`div 的宽度，其内容`#logincont`右对齐，并且`#logincont`本身以页面为中心`margin: 0 auto`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:15:17.323

如果您试图让所有内容保持在视图中，请尝试修复此问题：

```
#logincont {
postition:absolute;
right:2px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T13:16:22.383

你可以试试这个：

```
#logincont {
    width:330px;
    float:right;
} 
```

根据您的要求和元素类型，您可能需要添加更多属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T13:30:25.060

不知道你在寻找什么，但试试这个：

```
#login {
background: #113240;
color: #DDD;
height: 30px;
padding: 8px;
position: fixed;
z-index: 3;
top: 0;
right: 0;
left: 0;
}
#logincont {
width: 330px;
position: fixed;
right: 0;
}
#header {
background: white;
border-bottom: 1px solid #EBEBEC;
padding: 4.429em 0 0;
position: relative;
z-index: 1;
} 
```

# python - django - 模板中的列表列表

> ID：15703945
> 
> 赞同：2
> 
> 时间：2013-03-29T13:10:54.030
> 
> 标签：python, django, django-templates

我正在尝试呈现用 .zip 压缩的列表列表`zip()`。

```
list_of_list = zip(location,rating,images) 
```

我想将此渲染`list_of_list`为模板，并且只想显示每个位置的第一张图像。

我的位置和图像模型是这些：

```
class Location(models.Model):
  locationname = models.CharField

class Image(models.Model):
  of_location = ForeignKey(Location,related_name="locs_image")
  img = models.ImageField(upload_to=".",default='') 
```

这是压缩列表。如何仅访问模板中每个位置的第一张图片？

![在此处输入图像描述](../Images/2345511fd025722e4453ccfa65ff2a8d.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T13:18:03.437

将 传递`list_of_lists`给 RequestContext。`images`然后您可以在模板中引用列表的第一个索引：

```
{% for location, rating, images in list_of_lists %}

...
<img>{{ images.0 }}</img>
...

{% endfor %} 
```

[如何渲染上下文](https://docs.djangoproject.com/en/dev/ref/templates/api/#rendering-a-context)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T13:21:43.120

我认为你应该看看 [django-multiforloop](https://github.com/gabrielgrant/django-multiforloop)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-10T17:21:21.217

**您还可以根据类型处理模板中的列表元素（使用 Django 1.11 ）。**

因此，如果您有您描述的视图：

```
# view.py
# ...
list_of_lists = zip(location,rating,images)
context['list_of_lists'] = list_of_lists
# ... 
```

您需要做的就是**创建一个标签来确定**模板中元素的类型：

```
# tags.py
from django import template
register = template.Library()
@register.filter
def get_type(value):
    return type(value).__name__ 
```

然后您可以检测列表元素的内容类型，**如果列表元素本身是列​​表，则仅显示第一个元素**：

```
{% load tags %}
{# ...other things #}
<thead>
  <tr>
    <th>locationname</th>
    <th>rating</th>
    <th>images</th>
  </tr>
</thead>
<tbody>
  <tr>
    {% for a_list in list_of_lists %}
    {% for an_el in a_list %}
    <td>
        {# if it is a list only take the first element #}
        {% if an_el|get_type == 'list' %}
        {{ an_el.0 }}
        {% else %}
        {{ an_el }}
        {% endif %}
    </td>
    {% endfor %}
  </tr>
  % endfor %}
</tbody> 
```

# c++ - 遍历多链表？

> ID：15703948
> 
> 赞同：1
> 
> 时间：2013-03-29T13:11:06.083
> 
> 标签：c++, c++11, linked-list, containers

我正在为闭源程序创建一个工具。调试后，我有了要访问的结构的基地址。经过仔细检查，我看到它是一个多链表，其中前 3 个整数是指针，所有其他值都是数据。

我已经设法从我的分析中重建了这个结构：

```
struct UnitsInfo
{
    //pointers to UnitsInfo structures, null when no structure available at that location
    DWORD * a;//0x00
    DWORD * b;//0x04
    DWORD * c;//0x08

    //data
    int unkown_1;       //0x0C
    unsigned int Type;  //0x10
    unsigned int Amount;//ox14
};
UnitsInfo * Base_Node = ((UnitsInfo*)( (*(DWORD*)( (*(DWORD*)(0x00400000+0x008E98EC)) + 0x38)) + 0x0C); 
```

现在，我对链接结构真的很陌生，更不用说多链接结构了。

我在想的是制作地图并进行暴力破解，直到我拥有所有地址。（可能无限循环）？

但我知道这不是遍历这个链表的方法。在不知道它是如何连接的情况下，我如何有效地遍历这个多链表中的所有节点（并避免我已经拥有的节点）？

* * *

编辑：感谢我终于成功的答案！

这是我的代码，可能对其他人有用吗？

```
#define MAX_PLAYERS (6)
#define POINTER(type,addr) (*(type*)(addr))

struct UnitsInfo
{
    //pointers to UnitsInfo structures, null when no structure available at that location
    DWORD * nodes[3];//0x00

    //data
    int unkown_1;       //0x0C
    unsigned int Type;  //0x10
    unsigned int Amount;//ox14
};

struct pinfo
{
    bool            in;
    enum Controller {Ctrl_UNKNOWN,  Ctrl_HUMAN, Ctrl_AI             };
    enum Nation     {N_UNKNOWN,     N_ALLIES,   N_SOVIET,   N_JAPAN };
    std::string     Name;
    Nation          Side;
    short           Team;
    Controller      Who;
    int             *Money;
    int             *Power;
    int             *Usage;
    unsigned int    *Color;

    bool            GotUnits;
    DWORD           *unit_start_node;
};

std::map<DWORD*,UnitsInfo*> UnitList[MAX_PLAYERS];
void GenerateUnitList(unsigned short slot)
{
    std::set<DWORD*> todo;
    unsigned int inserted = 1;
    while(inserted)
    {
        inserted = 0;
        for(auto it = UnitList[slot].begin(); it != UnitList[slot].end(); ++it)
        {
            for(short i = 0; i < 3; ++i)
            {
                if(it->second->nodes[i] != NULL)
                {
                    if(UnitList[slot].find(it->second->nodes[i]) == UnitList[slot].end())
                    {
                        todo.insert(it->second->nodes[i]);
                        ++inserted;
                    }
                }
            }
        }
        while(!todo.empty())
        {
            UnitList[slot][*todo.begin()] = &POINTER(UnitsInfo,*todo.begin());
            todo.erase(todo.begin());
        }
    }
}

pinfo Player[MAX_PLAYERS];

//adding the first node
unsigned int CurrentSlot = (0xD8+(0x4*slot));
if(POINTER(DWORD,POINTER(DWORD,0x00400000+0x008E98EC)+CurrentSlot) != NULL)
{
    Player[slot].unit_start_node = &POINTER(DWORD,POINTER(DWORD,POINTER(DWORD,POINTER(DWORD,0x00400000+0x008E98EC)+CurrentSlot) + 0x38) + 0x0C);
}

//adding first unit if available, if yes continue generating list
if(!Player[i].GotUnits)
{
    if(POINTER(DWORD,*Player[i].unit_start_node+0x10) != NULL)
    {
        Player[i].GotUnits = true;
        UnitList[i][(Player[i].unit_start_node)] = &POINTER(UnitsInfo,*Player[i].unit_start_node);
    }
}
else
{
    GenerateUnitList(i);
} 
```

最棒的是，它就像一种魅力，而且不会滞后:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:19:43.097

BFS 和 DFS 是首先想到的：

*   深度优先搜索（参见：[http](http://en.wikipedia.org/wiki/Depth-first_search) ://en.wikipedia.org/wiki/Depth-first_search ）

*   广度优先搜索（参见：[http](http://en.wikipedia.org/wiki/Breadth-first_search) ://en.wikipedia.org/wiki/Breadth-first_search ）

它们都常用于遍历图。在大多数情况下都会检测到链接结构中的循环，因此如果实施得当，就不会有无限循环的风险。

基本上来说，这两种方法的工作原理是（至少在概念层面上）标记任何已检查的节点，同时将迄今为止看到的任何未访问的节点保留在某种列表中。

虽然广度优先遍历将使节点保持在队列中以某种 FIFO 方式处理节点，但深度优先遍历会将新节点推送到堆栈上，从而首先访问新发现的节点。

实现深度优先遍历的最简单方法之一即使不必实现堆栈，也可以通过递归调用自身，它只是（未命中）使用程序的调用堆栈来跟踪仍要访问的地方。

## 例子

假设您要遍历的图形的节点具有类似于以下结构的内容：

```
struct Node {
  int visited;
  struct Node **edges;

  void *some_data;
} 
```

边是指向另一个节点的以 NULL 结尾的链接数组。从您选择的任何节点开始。您基本上只需调用一个可能称为访问的函数即可完成：

```
void visit (struct Node *node) {
  struct Node *n;

  node->visited = 1;    

  for (n=node->edges; *n!=NULL; ++n)
    if (!(*n)->visited)
      visit (*n, depth+1);
} 
```

当然，您仍然需要对每个访问的节点做一些有用的事情。但是，为了访问从您的起始节点可到达的所有节点而不绕圈子，这已经是必须完成的所有事情了。

## 完整示例

这里试图为您提供一个完整的工作示例。经过一些努力尝试，我想我想出了一个相对不错的图表，显示了选择的不同路径。

我试图在下面的评论行中把它画下来：

```
#include <stdio.h>

struct Node {
  int visited;
  int id;
  struct Node **edges;
};

/* recursively visit this node and all unvisited nodes
   reachable from here */

void visit (struct Node *node, int depth) {
  struct Node **n;
  node->visited = 1;

  /* show the node id surrounded with '[' ']' characters
     to indicate this node has been visited in the output */

  printf ("[%d]\n", node->id);

  for (n=node->edges; *n!=NULL; ++n) {

    /* indent this line according the depth that has
       been reached in recursion and show the id
       of the reachable node currently inspected */
    printf ("%*s %d ", 5*depth, "", (*n)->id);
    if (!(*n)->visited) {
      /* indicate the search goes down one recursion level
         by drawing a '=>' next to the node id */
      printf ("=>");
      visit (*n, depth+1);
    }
    else
      printf ("\n");
  }
}
int main (int argc, char *argv[]) {

  /*  This is the graph that will be modeled and traversed

             +----+
            v      \
       + -- 0 -+    \
      /    ^    \    |
      |   /      v  /
      v  /       2 - 
       1-        ^ \
       \       /    v
        +---> 3     4
   */

  struct Node v[5]; /* These will form the vertices of the graph */

  / * These will be the edges */
  struct Node *e[][5] = {
    {v+1, v+2, NULL},
    {v+0, v+3, NULL},
    {v+0, v+4, NULL},
    {v+2, NULL},
    { NULL}
  };

  /* initialize graph */
  int i;
  for (i=0; i<5; ++i) {
    v[i].id = i;
    v[i].visited = 0;
    v[i].edges=e[i];
  }

  /* starting with each vertex in turn traverse the graph */
  int j;
  for (j=0; j<5; ++j) {
    visit (v+j, 0);
    printf ("---\n");

    /* reset the visited flags before the 
       next round starts */ 
    for (i=0; i<5; ++i)
      v[i].visited = 0;
  }

  return 0;
} 
```

输出将以某种或多或少的神秘方式显示算法在递归期间来回跳跃。

## 输出

根据起始节点，您将获得不同的结果。例如，从节点开始`4`不会找到任何其他节点，因为没有从那里引出的路径。

这里的输出起始节点范围从`0`到`4`。访问过的节点将被那些未访问过的字符包围，`[` `]`因为它们已经被检查过，而是没有边框。

我希望该示例将有助于了解该算法的工作原理和方式。

```
[0]
 1 =>[1]
      0 
      3 =>[3]
           2 =>[2]
                0 
                4 =>[4]
 2 
---
[1]
 0 =>[0]
      1 
      2 =>[2]
           0 
           4 =>[4]
 3 =>[3]
      2 
---
[2]
 0 =>[0]
      1 =>[1]
           0 
           3 =>[3]
                2 
      2 
 4 =>[4]
---
[3]
 2 =>[2]
      0 =>[0]
           1 =>[1]
                0 
                3 
           2 
      4 =>[4]
---
[4]
--- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T13:19:09.477

> 我在想的是制作地图并进行暴力破解，直到我拥有所有地址。（可能无限循环）？

总的来说，我认为这是可行的。您所需要的只是一组您已经处理过的地址，以及一组要处理的地址。每当您遇到不在这两个集合中的地址时，将其添加到“待办事项”集合中。您继续处理“待办事项”集中的地址（并将它们移动到“完成”集中），直到前者变为空。

# c - C程序如何检查数组第一个空间

> ID：15703949
> 
> 赞同：0
> 
> 时间：2013-03-29T13:11:07.977
> 
> 标签：c, arrays

在我的程序中，我不知道如何检查数组的第一个空格

例如

```
char *array[] ={'a','d','d','M',' ','-','P',' ','e'}; 
```

如何在数组中获取第一个空格并在长度之前获取第一个空格

这是我的程序：

```
 printf("Please enter appointment: \n");
 n = read(STDIN_FILENO,buf,80); /* read a line */
 int result=strncmp(buf, "addM", get first space before length);

switch (result)
case 0: go to other function 
```

或其他方法来比较数组字符串之前的第一个空格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:15:57.147

您可以使用`strchr()`在字符数组中定位字符：

```
#include <string.h>

char *space_ptr = strchr(array, ' ');
int posn = -1;
if (space_ptr != NULL)
{
   posn = space_ptr - array;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T13:23:47.123

```
 /* buffer large enough to hold 80 characters */
  char buf[80];
  int i;
  int n;

  printf("Please enter appointment: \n");
  n = read(STDIN_FILENO,buf,80); /* read a line */

  /* a keyword to search */
  #define KEYWORD_ADDM  "addM"
  #define KEYWORD_ADDM_SZ  (sizeof(KEYWORD_ADDM)-1)

  /* loop-find first space */
  for ( i = 0; i < n; i++ )
  {
    if ( buf[i] == ' ' )
      break;
  }
  if ( i == n )
  {
    /* space was not found in input */
  }
  else
  {
    /* space was found in input at index i */
    if ( ( i >= KEYWORD_ADDM_SZ ) && 
         ( strncmp( &buf[0], KEYWORD_ADDM, KEYWORD_ADDM_SZ ) == 0 ) )
    {
      /* match */
    }
    else
    {
      /* not a match */
    }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T13:17:12.220

我建议您使用内置库 string.h 它包含许多可以帮助您解析字符串的函数。

看：

string.h - strtok、strchr、strspn。

# java - Android 增长堆 - 我应该担心吗？

> ID：15703952
> 
> 赞同：4
> 
> 时间：2013-03-29T13:11:16.797
> 
> 标签：java, android, heap-memory

我读过一些关于在前面“保留”16MB 内存的应用程序的内容。至少，作为开发人员，我应该指望这一点，即使取决于设备可能更多。

我支持低至 2.2 froyo，所以很多设备都不是高端设备。我在 Logcat 中收到一些消息说：

`03-29 14:08:51.570: I/dalvikvm-heap(19899): Grow heap (frag case) to 13.624MB for 200765-byte allocation`

让我担心的是13MB。我不知道如果我的应用程序达到 16MB 是否会崩溃。我应该认真考虑优化一些代码吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T14:39:41.173

Android 内存管理并不是那么简单，当涉及到内存使用时，您应该始终保持尽可能低的水平。

每个 Android 设备的可用内存量都是有限的。在大多数情况下，它与屏幕尺寸、CPU 计算能力和其他一些因素有关（例如 3D 屏幕在某些情况下需要两倍的内存）。Nexus One 有 32MB，Galaxy Nexus - 64MB，平板电脑可以有更多。最大堆大小可以在系统设置中更改。Cyanogen Mod 允许非常简单的调整。

较旧的 Android（2.3 之前？）将此内存限制分为两部分 - 标准（普通对象、UI、字符串等）和多媒体（图像、音频缓冲区、OpenGL 内容、相机帧）。带有 Android 2.2 的 Nexus One 有 16MB/16MB 堆，有时会很烦人，因为您可以加载 16MB 的图像和 100KB 的 UI 来使显示简单图库的应用程序崩溃。

有些设备不允许您分配太大的内存块。例如，Galaxy Nexus 的限制为 31.9999MB。此外，您尝试分配的连续内存块越大，系统完成此类分配所需的时间就越多。它必须重新分配一些东西才能找到这么大的内存块。

较新的 Android 具有 largeHeap 标志，它提供了大量内存。通常大约是平时的 5 倍。虽然听起来不错，但不推荐使用 largeHeap（调试除外），因为它可能会导致严重的内存使用问题。基本上系统本身需要一些内存。如果你拿的比你应该的多，Android 会在没有任何通知的情况下杀死你的应用程序，从最近最少使用的应用程序开始。

垃圾收集器可能有不同的策略，具体取决于系统版本和实现。Nexus One 上的 Stock Android 2.3（我猜）非常激进，以至于我们无法分配超过 13MB 的图像。看起来你有很多可用内存，然后突然繁荣 - 你的应用程序已关闭。

您可以使用本机内存。每个 Android 应用程序（或多或少）都是一个 linux 进程，它可以使用直接 malloc 调用为自己分配内存。您需要 JNI 和 C 代码，但使用它您可以访问整个内存并做任何您想做的事情。同样，请注意，当可用内存量变得太低时，系统将终止您的应用程序。

您可以使用多个进程来拆分您的应用程序并在它们之间划分内存使用量。这不是那么方便，但它可以工作，并且一些库使用它来获取比乍一看更多的资源。

除此之外，您必须记住，某些对象可能使用比您想象的更多的内存。例如，硬件加速有点棘手。大多数设备不支持非二次幂大小的纹理。这意味着当您启用 ImageView (300x50px) 并启用硬件加速时，Android 将为您分配一个 512x64px 的 ImageView 纹理。它必须这样做，因为一切都是由 OpenGL 绘制的，它需要纹理。有了这样的纹理，你的 ImageView 占用的内存比没有硬件加速的情况下要多 2.5 倍。此外，如果您的 View 是动画的，Android 必须在每个动画帧中重建纹理。

To sum up - Android can be tricky, when it comes to memory management. Heap growing to larger value may not be wrong as sometimes you need larger amount of memory (for example when creating a gallery). You should be aware that there is a lot of different things that can affect your app memory usage and try to stay as low as possible.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T05:29:14.563

If you really get every time the same error then, the best way is to increase the Heap size. And it is very simple to increase the Heap size.

It won't affect your other services. Increase heap size in `.ini` file where your eclipse stored.

# javascript - 如何使用 ajax 或 javascript 将复选框值传递到另一个页面

> ID：15703956
> 
> 赞同：0
> 
> 时间：2013-03-29T13:11:22.533
> 
> 标签：javascript, ajax, jquery, checkbox

我正在使用以下类型的复选框。我想在另一个页面中使用选定的项目值。我正在使用 javascript 和 ajax。

我想使用 ajax 将 [url] 选定的复选框值传递到另一个页面..

请帮我一个忙！！！

```
<form>
    <input type="checkbox" name="vehicle" value="Bike">I have a bike
    <br>
    <input type="checkbox" name="vehicle" value="Car">I have a car
    <br>
    <input type="checkbox" name="vehicle" value="cycle">I have a cycle
    <br>
    <input type="checkbox" name="vehicle" value="lorry">I have a lorry
    <br>
    <input type="checkbox" name="vehicle" value="house">I have a house
    <br>
    <input type="checkbox" name="vehicle" value="mobile">I have a mobile
    <br>
    <input type="button" value="what do u have" onClick=function();/>
</form> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:23:45.363

我建议您为每个元素添加一个 ID。然后只需为每个人做一个 document.getElementbyId，检查复选框是否被选中，如果是，将它们的值添加到下面的“数据”数组中。（例如，value1：document.getElementById("cycle").value）。这将通过邮寄发送一个变量，您可以在您的 php 函数中使用 ($_POST['value1'])

请注意，您需要 jquery 才能使用以下语法。此外，如果您需要对 php 函数返回的值进行处理，您可以使用下面发布的 succes 函数。

```
function send()
 {

   $.ajax({ url: 'yourfile.php',
             data: {value1: value1, value2: value2...}, //Modify this
             type: 'post',
             success:   function(output) {

                         alert("It worked!"); 
                 var result= eval("(function(){return " + output + ";})()"); 

             }
   });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:20:34.343

如果您的元素非常少..即您在问题中提到的内容，那么您可以编写自己的代码来获取值并使用 javascript 或 jquery 将其传递到服务器端。

使用 jquery ajax 方法将数据发布到服务器。

您也可以使用 jquery 表单来提交完整的表单。[http://www.malsup.com/jquery/form/](http://www.malsup.com/jquery/form/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T13:27:36.387

对于初学者，我会说您将复选框的值添加到变量中。这个 js 得到了你的价值。如果您想使用它发送更多信息，请使用“this”并访问函数中的属性。如果您想将其发送到其他页面，我建议您查看 POST 方法。在stackoverflow上已经有几个关于这个的问题。像这样将[（AJAX）数据发布到另一个页面](https://stackoverflow.com/questions/12923218/posting-ajax-data-to-another-page)

```
<html>
<script>
function getvalue(checkbox)
{
    alert(checkbox);
}

</script>

<form> 
<input type="checkbox" onclick="getvalue(this.value)" name="vehicle" value="Bike">I have a bike<br> 
<input type="checkbox" name="vehicle" value="Car">I have a car <br> 
<input type="checkbox" name="vehicle" value="cycle">I have a cycle<br> 
<input type="checkbox" name="vehicle" value="lorry">I have a lorry <br> 
<input type="checkbox" name="vehicle" value="house">I have a house<br> 
<input type="checkbox" name="vehicle" value="mobile">I have a mobile 
<br> <input type="button" value="what do u have" onClick=function();/> 
</form>
</html> 
```

希望这有所帮助

# javascript - 在网页重新加载时旋转媒体

> ID：15703959
> 
> 赞同：0
> 
> 时间：2013-03-29T13:11:31.220
> 
> 标签：javascript, html, web, ads

我正在一个网站上工作，旁边有一个广告空间。我希望能够在每次加载页面时显示不同的广告。如果广告是纯图片，我知道该怎么做，但我也希望其中一些是 youtube 视频或其他媒体来源。

我想为此使用 javascript，但我想使用尽可能少的脚本。

任何帮助将不胜感激。

对于图像，我会使用如下代码：

```
<script type="text/javascript">

//Random Banner image on Page Reload

//store the images in arrays below

images = new Array(5);

images[0] = "<a href='http://www.example.com'><img src='some_image.gif'/></a>";

images[1] = "<a href='http://www.example.com'><img src='some_image.gif'/></a>";

images[2] = "<a href='http://www.example.com'><img src='some_image.gif'/></a>";

images[3] = "<a href='http://www.example.com'><img src='some_image.gif'/></a>";

images[4] = "<a href='http://www.example.com'><img src='some_image.gif'/></a>";

index = Math.floor(Math.random() * images.length);

document.write(images[index]);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:39:33.377

增强您已有的逻辑，您可以为这样的 youtube 视频添加标记（使用[YouTube iframe api](https://developers.google.com/youtube/iframe_api_reference)）：

```
images[5] = '<iframe type="text/html" width="640" height="390" src="http://www.youtube.com/embed/u1zgFlCw8Aw?enablejsapi=1&origin=http://example.com" frameborder="0"></iframe>'; 
```

您想在 JavaScript 中执行此操作是否有特定原因？似乎它可能更适合服务器端技术。

# haskell - 函数输入类型

> ID：15703962
> 
> 赞同：3
> 
> 时间：2013-03-29T13:11:53.190
> 
> 标签：haskell

我正在大学学习 Haskell 的一门学科——这是我在业余时间完成的一个研讨会问题，你可能猜到我正在努力解决 Haskell 中的类型问题。我已经完成了这个问题，但没有公布答案，但我很想知道这是否是最好的方法。

这是问题中提供的 HTML 的基本表示形式

```
type HTML = [HTML_element]
data HTML_element
    = HTML_text String
    | HTML_font Font_tag HTML
    | HTML_p HTML
    | HTML_ul [HTML]
    | HTML_ol [HTML]
data Font_tag = Font_tag (Maybe Int) (Maybe String) (Maybe Font_color)
data Font_color
    = Colour_name String
    | Hex Int
    | RGB Int Int Int 
```

该问题要求构建一个 Haskell 函数“num_font_tags”，该函数将计算此类 HTML 表示中 font_tag 的所有实例。接下来是我的回答，我花了整整一个小时的头撞墙，但它编译得很好，我相信这是一个解决方案：

```
num_font_tags :: HTML -> Int
num_font_tags [] = 0
num_font_tags (x:xs) = num_font_tag_single x + num_font_tags xs

num_font_tags_list :: [HTML] -> Int
num_font_tags_list [] = 0
num_font_tags_list (x:xs) = num_font_tags x + num_font_tags_list xs

num_font_tag_single :: HTML_element -> Int
num_font_tag_single (HTML_text _) = 0
num_font_tag_single (HTML_font _ html) = num_font_tags html
num_font_tag_single (HTML_p html) = num_font_tags html
num_font_tag_single (HTML_ul html) = num_font_tags_list html
num_font_tag_single (HTML_ol html) = num_font_tags_list html 
```

最初我以为我只需要第一个函数，但我遇到了问题，因为它只接受 HTML 类型，但后来我需要另外两个函数 - 一个接受 [HTML] 类型，一个接受 HTML_element 类型。

这真的是我需要做这个问题的方式吗？或者我是否因为拥有 3 个功能而太过分了。可以用一个来完成吗？我的主要问题是——我是否遗漏了一些关于 Haskell 本质的东西，这会使这变得更简单？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T13:41:07.367

您只需要一个这样的功能，其他的可以简单地简化为

```
num_font_tag_single :: HTML_element -> Int 
```

和。`sum`_`map`

你有它，你有

```
num_font_tags xs = sum $ map num_font_tag_single xs 
```

和

```
num_font_tag_list xs = sum $ map num_font_tags xs
                --   = sum . map num_font_tag_single $ concat xs 
```

您还可以从其他两个函数中派生其余函数，因为您可以轻松地从单个值获取列表，但无论如何您需要在某些时候检查 a `HTML_element`，因此最好`num_font_tag_single`建立构建的基础.

你有

```
num_font_tag_single (HTML_font _ html) = num_font_tags html 
```

应该是

```
num_font_tag_single (HTML_font _ html) = num_font_tags html + 1
                                                        --  ^^^ 
```

或者您可以将函数简化为`num_font_tag_single _ = 0`.

除此之外，这基本上是唯一的方法，无论您是否命名在包含的`HTML_element`s resp 列表中对字体标签数量求和的函数。`[HTML]`或`sum . map num_font_tag_single`分别使用。`sum . map num_font_tag_single . concat`主要取决于个人喜好，但由于目标是一个函数

```
num_font_tags :: HTML -> Int 
```

给它一个名字（并`num_font_tags . concat`在递归中使用）是很自然的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:37:03.250

在 Haskell 中，每个问题都有一个简短、令人敬畏且难以理解的抽象解决方案：

```
{-# LANGUAGE DeriveDataTypeable #-}

import Control.Lens
import Data.Data
import Data.Data.Lens

type HTML = [HTML_element]
data HTML_element
    = HTML_text String
    | HTML_font Font_tag HTML
    | HTML_p HTML
    | HTML_ul [HTML]
    | HTML_ol [HTML]
  deriving (Data, Typeable)

data Font_tag = Font_tag (Maybe Int) (Maybe String) (Maybe Font_color)
  deriving (Data, Typeable)

data Font_color
    = Colour_name String
    | Hex Int
    | RGB Int Int Int
  deriving (Data, Typeable)

instance Plated HTML_element where
  plate = uniplate

isFont :: HTML_element -> Bool
isFont (HTML_font _ _) = True
isFont _               = False

num_font_tags :: HTML -> Int
num_font_tags = length . filter isFont . concatMap universe

num_font_tags2 :: HTML -> Int
num_font_tags2 = lengthOf $ each . parts . each . filtered isFont 
```

These use the [Control.Lens](http://hackage.haskell.org/package/lens-3.8.7.3) package. The second solution takes the length of a 'fold' obtained by

1.  Going through each element of the HTML list.
2.  Going through the list of HTML_element subcomponents of each HTML_element, including itself.
3.  Going through each HTML_element of every such list.
4.  Skipping the ones that aren't HTML_fonts.

The `parts` traversal and `universe` function are only available for data types that are instances of the `Plated` typeclass. I implemented it with `uniplate`, which needs data types to be instances of `Data` and `Typeable`; those can be derived with the `DeriveDataTypeable` language extension.

# javascript - 等价于 PHP preg_match，javaScript 中的 substr

> ID：15703963
> 
> 赞同：1
> 
> 时间：2013-03-29T13:11:55.167
> 
> 标签：javascript, tinymce

我正在制作一个 tinyMce 插件，可以更改突出显示的文本之间的单词/字母间距。我的 fn() 看起来像这样：

```
function wordsLettersSpace(words, letters) {
    var inst = tinyMCE.activeEditor;
    var currSelection = $.trim(inst.selection.getSel());

    if(currSelection != ""){
        var content = "";
        content = inst.selection.getContent({
            format: 'html'
        });

        contentReplace = '<span style="word-spacing: '+words+'px; letter-spacing: '+letters+'px;">' + inst.selection.getContent({
            format: 'html'
        }) + '</span>';

        inst.selection.setContent(content.replace(content, contentReplace));
        window.alert(content);
    }else{
        Hyphenator.hyphenate(inst.getBody(), language);
    }
    tinyMceUpdate();
} 
```

现在我需要在选择开始位置（如果存在）之前找到最近的标签并获取“word-spacing”和“letter-spacing”的样式值。另外我需要摆脱选择的任何内部，但只有标签而不是文本，知道跨度标签可以有不同的样式，所以简单的 str.replace 将不起作用。

我知道有一个内置插件，但我需要在 tinyMce iframe 之外进行，并对其进行自定义。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T13:59:33.550

JS 正则表达式是可用的，并且完全可以使用 preg_match 执行您想要的操作。

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

javascript中的子字符串是`str.substr(start, length)`

# jsp - 检查表达式语言中的字符串长度

> ID：15703965
> 
> 赞同：6
> 
> 时间：2013-03-29T13:12:10.033
> 
> 标签：jsp, jsf, jsf-2, el

我正在使用 JSF，并且希望只有当关联托管 bean 中的字符串值大于零时才应该呈现一个组件。我正在这样做：

```
rendered="#{tabbedToolbarBean.editor.selectedQuery.length() gt 0}" 
```

此外，getter for 的签名`selectedQuery`是 `public String getSelectedQuery(){}`. 使用最新版本的 weblogic 服务器时出现以下错误。

> 错误：函数长度具有无效前缀或使用未定义的默认命名空间。更正前缀或在jsp文档中，将函数放在定义标签库命名空间的标签内

我错过了什么？谷歌搜索后没有得到太多帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T13:21:43.397

这意味着您的环境不支持使用括号调用非 getter 方法的新 EL 2.2 功能。

您最好的选择是使用 JSTL `fn:length()`。

```
<html ... xmlns:fn="http://java.sun.com/jsp/jstl/functions">
...
rendered="#{fn:length(tabbedToolbarBean.editor.selectedQuery) gt 0}" 
```

或者，只需`empty`在 EL 中使用关键字。不同之处在于它还检查空值。

```
rendered="#{not empty tabbedToolbarBean.editor.selectedQuery}" 
```

### 也可以看看：

*   [org.apache.jasper.JasperException：未指定默认命名空间时，函数测试必须使用前缀](https://stackoverflow.com/questions/13017348/org-apache-jasper-jasperexception-the-function-test-must-be-used-with-a-prefix/13020121#13020121)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T13:22:15.463

试试 JSTL fn:length() 函数：

```
rendered="#{fn:length(tabbedToolbarBean.editor.selectedQuery) gt 0}" 
```

# vba - 单击图表获取 X 轴值 - Excel VBA

> ID：15703967
> 
> 赞同：2
> 
> 时间：2013-03-29T13:12:26.147
> 
> 标签：vba, excel, charts

我遇到了一个奇怪的要求。

> 当用户单击图表区域时，我需要从图表中获取 X 轴值。

我知道我们可以为图表分配一个宏。因此，可以为图表创建事件。但不知道如何进一步进行。

请问有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T13:47:53.057

如果您的图表在图表表中，那么您可以右键单击图表表选项卡，选择“查看代码”并将以下内容粘贴到其代码模块中（见下面的截图）

```
Option Explicit

Private Sub Chart_Select(ByVal ElementID As Long, ByVal Arg1 As Long, ByVal Arg2 As Long)
    Select Case ElementID
    Case xlSeries
       If Arg2 > 0 Then
           MsgBox "Series " & Arg1 & vbCr & "Point " & Arg2
       End If
    Case Else
       MsgBox Arg1 & vbCr & Arg2
    End Select
End Sub 
```

![在此处输入图像描述](../Images/8166ac0f781527f143e00264a1798039.png)

如果您的图表嵌入在工作表中，那么您将不得不使用`WithEvents`@brettdj 已在[此处介绍的内容](https://stackoverflow.com/questions/7431586/vba-chart-click-excel)

**跟进**

这是你正在尝试的吗？

```
Private Sub Chart_Select(ByVal ElementID As Long, ByVal Arg1 As Long, ByVal Arg2 As Long)
    Select Case ElementID
    Case xlSeries
        If Arg2 > 0 Then
            x = ActiveChart.SeriesCollection(Arg1).XValues
            For i = LBound(x) To UBound(x)
                If i = Arg2 Then
                    MsgBox "Point :" & i & "and X Value = " & x(i)
                    Exit For
                End If
            Next i
       End If
    End Select
End Sub 
```

![在此处输入图像描述](../Images/c3ae0a3c8003c344dd39d9eea107b38a.png)

# ruby-on-rails - 在 Rails 3.2 中实现 db:drop 时 rake 中止错误

> ID：15703968
> 
> 赞同：0
> 
> 时间：2013-03-29T13:12:34.950
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我是 Rails 新手。我正在尝试`rake db:drop`，但出现以下错误

```
rake aborted!
(<unknown>): mapping values are not allowed in this context at line 21 column 12
/home/chiron/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.11/lib/rails/application/configuration.rb:115:in `database_configuration'
/home/chiron/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.11/lib/active_record/railties/databases.rake:25:in `block (2 levels) in <top (required)>'
Tasks: TOP => db:drop => db:load_config
(See full trace by running task with --trace) 
```

我正在安装。`ubuntu`虽然为 Windows 环境工作相同的代码，但它似乎工作得很好

我的 database.yml 如下：-

```
# PostgreSQL v0.8.x
#   gem install pg
development:
  adapter: postgresql
  encoding: unicode
  host: localhost
  database: lib_development
  pool: 5
  username: chiron
  password: 

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: postgresql
  encoding: unicode
  host: localhost
  database: lib_test
  pool: 5
   username: chiron
  password: 

production:
  adapter: postgresql
  encoding: unicode
  host: localhost
  database: lib_production
  pool: 5
   username: chiron
  password: 
```

谁能帮帮我吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:18:33.073

你在配置中有多余的空格键

```
 pool: 5
   username: chiron # << here
  password: 
```

# javascript - 无法让高速公路示例工作（js 和 python）

> ID：15703972
> 
> 赞同：0
> 
> 时间：2013-03-29T13:12:43.817
> 
> 标签：javascript, python, autobahn

我正在尝试使用 AutobahnPython 和 AutobahnJS 库开始使用 WAMP，但我无法让官方示例正常工作。这是我所做的：

```
pip-2.7 install autobahn    # this gave me ab 0.5.14, but I tried 0.6-git too
git clone git://github.com/tavendo/AutobahnPython.git
git checkout maintenance_v0_5
cd AutobahnPython/examples/wamp/authentication/
python2.7 server.py debug
firefox http://localhost:8080 
```

我在服务器的调试输出中得到以下信息：

```
2013-03-29 15:11:23+0100 [-] Log opened.
2013-03-29 15:11:23+0100 [-] WampServerFactory starting on 9000
2013-03-29 15:11:23+0100 [-] Starting factory <autobahn.wamp.WampServerFactory instance at 0x132b5a8>
2013-03-29 15:11:23+0100 [-] WampServerFactory starting
2013-03-29 15:11:23+0100 [-] Site starting on 8080
2013-03-29 15:11:23+0100 [-] Starting factory <twisted.web.server.Site instance at 0x1779b90>
2013-03-29 15:11:28+0100 [HTTPChannel,0,127.0.0.1] 127.0.0.1 - - [29/Mar/2013:14:11:27 +0000] "GET / HTTP/1.1" 200 3429 "-" "Mozilla/5.0 (X11; Linux x86_64; rv:19.0) Gecko/20100101 Firefox/19.0"
2013-03-29 15:11:29+0100 [HTTPChannel,0,127.0.0.1] 127.0.0.1 - - [29/Mar/2013:14:11:28 +0000] "GET /favicon.ico HTTP/1.1" 404 145 "-" "Mozilla/5.0 (X11; Linux x86_64; rv:19.0) Gecko/20100101 Firefox/19.0"
2013-03-29 15:11:29+0100 [MyServerProtocol,0,127.0.0.1] TX WAMP: [0, "H0tcxzZW7g2aUKQ4", 1, "Autobahn/0.5.14"]
2013-03-29 15:11:29+0100 [MyServerProtocol,0,127.0.0.1] registered remote method on http://api.wamp.ws/procedure#auth
2013-03-29 15:11:29+0100 [MyServerProtocol,0,127.0.0.1] registered remote method on http://api.wamp.ws/procedure#authreq
2013-03-29 15:11:29+0100 [HTTPChannel,0,127.0.0.1] 127.0.0.1 - - [29/Mar/2013:14:11:28 +0000] "GET /favicon.ico HTTP/1.1" 404 145 "-" "Mozilla/5.0 (X11; Linux x86_64; rv:19.0) Gecko/20100101 Firefox/19.0"
2013-03-29 15:11:29+0100 [MyServerProtocol,0,127.0.0.1] RX WAMP: [2,"0.42w1p52zq5g","http://api.wamp.ws/procedure#authreq","foobar",null]
2013-03-29 15:11:29+0100 [MyServerProtocol,0,127.0.0.1] TX WAMP: [3, "0.42w1p52zq5g", "{\"extra\": {}, \"timestamp\": \"2013-03-29T14:11:29Z\", \"authid\": \"PmRmYauw3-2S_4Wh\", \"authkey\": \"foobar\", \"sessionid\": \"H0tcxzZW7g2aUKQ4\", \"authextra\": {\"keylen\": 32, \"salt\": \"RANDOM SALT\", \"iterations\": 10000}, \"permissions\": {\"rpc\": [{\"call\": true, \"uri\": \"http://example.com/procedures/hello\"}], \"pubsub\": [{\"prefix\": true, \"uri\": \"http://example.com/topics/\", \"pub\": true, \"sub\": true}]}}"]
2013-03-29 15:11:29+0100 [MyServerProtocol,0,127.0.0.1] RX WAMP: [2,"0.35zpscr4dpf","http://api.wamp.ws/procedure#auth","4xs7OnDnqHP+DiMqLnK95s36eiEhMRbkbUcRPJRHoOY="] 
```

最后是服务器和客户端（浏览器日志）的以下错误：

```
2013-03-29 15:11:29+0100 [MyServerProtocol,0,127.0.0.1] TX WAMP: [4, "0.35zpscr4dpf", "http://api.wamp.ws/error#invalid-signature", "signature for authentication request is invalid"]
2013-03-29 15:11:34+0100 [MyServerProtocol,0,127.0.0.1] RX WAMP: [7,"http://example.com/topics/mytopic1","Hello, world!"]
2013-03-29 15:11:34+0100 [MyServerProtocol,0,127.0.0.1] no topic / publication handler registered for http://example.com/topics/mytopic1 
```

这里有什么问题？这是我的错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:15:11.587

不，你没有做错任何事。使用 master 分支的当前负责人（不是维护 0.5）。*Salted* WAMP-CRA 身份验证（示例使用）有一些固定的东西不在维护 0.5 中。很抱歉给您带来麻烦。

这是 Firefox 连接的服务器日志：

```
oberstet@THINKPAD-T410S /f/scm/AutobahnPython/examples/wamp/authentication (master)
$ git log -1
commit f3165c51256334b97e6183bd0852c3102882e917
Author: Tobias Oberstein <tobias.oberstein@tavendo.de>
Date:   Tue Mar 26 12:15:52 2013 +0100

    add multiple protocols example

oberstet@THINKPAD-T410S /f/scm/AutobahnPython/examples/wamp/authentication (master)
$ python server.py debug
Auth Extra/Secrets
{'keylen': 32, 'salt': 'RANDOM SALT', 'iterations': 1000}
{'foobar': 'znWa4bxY1glpbQlZziHIlXA2shfF+HoCr9bnmZ5HPQg='}
2013-03-29 19:17:42+0100 [-] Log opened.
2013-03-29 19:17:42+0100 [-] WampServerFactory starting on 9000
2013-03-29 19:17:42+0100 [-] Starting factory <autobahn.wamp.WampServerFactory instance at 0x02934BC0>
2013-03-29 19:17:42+0100 [-] WampServerFactory starting
2013-03-29 19:17:42+0100 [-] Site starting on 8080
2013-03-29 19:17:42+0100 [-] Starting factory <twisted.web.server.Site instance at 0x036FDE18>
2013-03-29 19:17:42+0100 [MyServerProtocol,1,127.0.0.1] TX WAMP: [0, "7LHl79cVQEDZl_C5", 1, "Autobahn/0.6.0"]
2013-03-29 19:17:42+0100 [MyServerProtocol,1,127.0.0.1] registered remote method on http://api.wamp.ws/procedure#auth
2013-03-29 19:17:42+0100 [MyServerProtocol,1,127.0.0.1] registered remote method on http://api.wamp.ws/procedure#authreq
2013-03-29 19:17:42+0100 [MyServerProtocol,1,127.0.0.1] RX WAMP: [2,"0.c23s5q4pxf","http://api.wamp.ws/procedure#authreq","foobar",null]
2013-03-29 19:17:42+0100 [MyServerProtocol,1,127.0.0.1] TX WAMP: [3, "0.c23s5q4pxf", "{\"extra\": {}, \"timestamp\": \"2013-03-29T18:17:42Z\
", \"authid\": \"7NEQK0Gnrqxq1JRL\", \"authkey\": \"foobar\", \"sessionid\": \"7LHl79cVQEDZl_C5\", \"authextra\": {\"keylen\": 32, \"salt\":
 \"RANDOM SALT\", \"iterations\": 1000}, \"permissions\": {\"rpc\": [{\"call\": true, \"uri\": \"http://example.com/procedures/hello\"}], \"
pubsub\": [{\"prefix\": true, \"uri\": \"http://example.com/topics/\", \"pub\": true, \"sub\": true}]}}"]
2013-03-29 19:17:42+0100 [MyServerProtocol,1,127.0.0.1] RX WAMP: [2,"0.fscffb2cozr","http://api.wamp.ws/procedure#auth","LzKbKJb5K8D313P/bl1
tF4Z93bIZup8oR8+Am8PY8mc="]
2013-03-29 19:17:42+0100 [MyServerProtocol,1,127.0.0.1] registered topic http://example.com/topics/ for publication (match by prefix = True)

2013-03-29 19:17:42+0100 [MyServerProtocol,1,127.0.0.1] registered topic http://example.com/topics/ for subscription (match by prefix = True
)
2013-03-29 19:17:42+0100 [MyServerProtocol,1,127.0.0.1] registered remote method on http://example.com/procedures/hello
2013-03-29 19:17:42+0100 [MyServerProtocol,1,127.0.0.1] TX WAMP: [3, "0.fscffb2cozr", {"rpc": [{"call": true, "uri": "http://example.com/pro
cedures/hello"}], "pubsub": [{"prefix": true, "uri": "http://example.com/topics/", "pub": true, "sub": true}]}]
2013-03-29 19:17:42+0100 [MyServerProtocol,1,127.0.0.1] RX WAMP: [5,"http://example.com/topics/mytopic1"]
2013-03-29 19:17:42+0100 [MyServerProtocol,1,127.0.0.1] subscriptions map created for topic http://example.com/topics/mytopic1
2013-03-29 19:17:42+0100 [MyServerProtocol,1,127.0.0.1] subscribed peer 127.0.0.1:55946 on topic http://example.com/topics/mytopic1 
```

# git - （Git）远程仓库中是否可以有一个不在本地仓库中的文件夹？

> ID：15703980
> 
> 赞同：0
> 
> 时间：2013-03-29T13:13:12.667
> 
> 标签：git, github

假设我在远程仓库中有文件夹 A、B 和 C。由于我已经完成了 B 和 C，我只希望本地仓库中的文件夹 A 来节省我的磁盘空间。怎么做？

提前致谢！

注意：我使用的是 Github

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:16:05.320

您可以将 B 和 C 转换为[submodules](http://git-scm.com/book/en/Git-Tools-Submodules)。

# java - 无法让 SWT.UNDERLINE_LINK 与 StyledText 和 TextStyle 结合使用

> ID：15703981
> 
> 赞同：1
> 
> 时间：2013-03-29T13:13:14.477
> 
> 标签：java, swt, eclipse-rcp, rcp

我对使用`StyledText`,非常陌生`TextStyle`。

我正在尝试为显示的文本提供超链接外观。我正在使用`TextStyle`对象来创建超链接样式文本。对于`TextStyle`构造函数，我正在传递`Font`具有样式的对象`SWT.UNDERLINE_LINK`，期望它创建一个具有超链接样式的文本[根据 javadoc]。

我无法让这种风格发挥作用。其他款式`SWT.BOLD`，`SWT.ITALICS`作品不见不散`SWT.UNDERLINE_LINK`。有什么特殊的使用条件`SWT.UNDERLINE_LINK`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:17:25.770

检查此线程 [-可以将 HTML 样式链接添加到 SWT StyledText 吗？](https://stackoverflow.com/questions/1494337/can-html-style-links-be-added-to-swt-styledtext)

和 [http://www.roseindia.net/tutorials/swt/create-link.shtml](http://www.roseindia.net/tutorials/swt/create-link.shtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-15T18:13:52.690

你需要设置

```
styleRange.underline = true; 
```

使用下划线样式时

```
styleRange.underlineStyle = SWT.UNDERLINE_LINK; 
```

# php - PHP反斜杠问题

> ID：15703983
> 
> 赞同：0
> 
> 时间：2013-03-29T13:13:29.950
> 
> 标签：php, mysql

我有一个由 Php 处理的 html 表单。当我提交表单时，它会显示一个反斜杠，例如：**5 rue de l'ourq**。如果由于我错误地输入了表单的任何其他字段而再次提交表单，则显示**5 rue de l\'ourq**和再次**5 rue de l\\'ourq**。这发生在**地址**归档中。

**php变量：**

```
$address = $_POST['address'];   
$title = inputvalid($_POST['title']);   
$f_name = inputvalid($_POST['f_name']); 
```

问题是 $address 变量。我不知道为什么它显示反斜杠。这就是为什么我没有将**inputvalid**函数放入该变量但无法解决此问题的原因。任何的想法 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T13:15:20.677

听起来你打开了magic_quotes。您需要在 php 设置中关闭它们。

如果你不能关闭magic_quotes，我会让你的`inputvalid()`函数做的第一件事是检查magic_quotes 是否启用，如果它们`stripslashes()`在值上。

[http://php.net/manual/en/security.magicquotes.disabling.php](http://php.net/manual/en/security.magicquotes.disabling.php)

根据上面的链接，您可以通过添加以下代码在运行时模拟禁用，但它实际上只是在做与我上面所说的相同的事情，检查`stripslashes()`输入数组上的 magic_quotes 是否打开：

```
if (get_magic_quotes_gpc()) {
    $process = array(&$_GET, &$_POST, &$_COOKIE, &$_REQUEST);
    while (list($key, $val) = each($process)) {
        foreach ($val as $k => $v) {
            unset($process[$key][$k]);
            if (is_array($v)) {
                $process[$key][stripslashes($k)] = $v;
                $process[] = &$process[$key][stripslashes($k)];
            } else {
                $process[$key][stripslashes($k)] = stripslashes($v);
            }
        }
    }
    unset($process);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:15:33.810

PHP 添加反斜杠来转义，`'`因为它的字面意思是字符串的开头。

用于`stripslashes()`删除它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T13:15:53.320

您的`inputvalid`功能是防止用于从数据库加载和修改信息的 SQL 注入。该函数转义`'`并`"`防止注射。在从数据库加载信息后，您的代码应该能够将这些转义字符转换回人类可读的形式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T13:17:17.120

把它放在你的配置文件中：

```
ini_set('magic_quotes_gpc', 'off'); 
```

或者，如果您的服务器不允许这样做，请将其放入配置中：

```
##/ Special Code to stop get_magic_quotes_gpc
function stop_magic_quotes($in)
{
    $out = $in;

    if(function_exists('get_magic_quotes_gpc') && get_magic_quotes_gpc())
    {
        if(is_array($out))
        {
            foreach($out as $k=>$v)
            {
                $v = stop_magic_quotes($v);
                $out[$k] = $v;
            }
        }
        else
        {
            $out = stripslashes($out);
        }
    }

    return $out;
}//end func................

if(function_exists('get_magic_quotes_gpc') && get_magic_quotes_gpc())
{
    $_GET = array_map('stop_magic_quotes', $_GET);
    $_POST = array_map('stop_magic_quotes', $_POST);
}//end if.... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T13:17:57.513

从我对这个问题的评论：

检查`magic_quotes_gpc`php.ini 文件中的选项并将其设置为`Off`. 不要忘记重新启动 php 进程。如果您没有直接访问 php.ini 文件的权限，请尝试以下操作：

```
 <?php ini_set('magic_quotes_gpc', 'Off'); ?> 
```

# c# - 使用 DISTINCT 关键字时出现 LinqToExcel 错误

> ID：15703987
> 
> 赞同：0
> 
> 时间：2013-03-29T13:13:49.170
> 
> 标签：c#, asp.net-mvc, linq-to-excel

我正在尝试使用 LinqToExcel 库从 Excel 工作表中提取不同的值。

我不断收到错误

> *"{"查询表达式'(MOD)'中的语法错误（缺少运算符）。"}"*

我已经尝试了所有方法，但似乎无法从该列中提取不同的值。

任何帮助将不胜感激。

提前致谢，

代码如下。

```
public class WorksheetRow
{
    public String CPT { get; set; }
    public String MOD { get; set; }
    public String DESCRIPTION { get; set; }
    public double FEE { get; set; }
}

public class FileUtilsController : Controller
{
    //
    // GET: /FileUtils/

    public ActionResult Index()
    {
        return View();
    }

    public ActionResult FileUpload()
    {
            return View();

    }

    // This action handles the form POST and the upload
    [HttpPost]
    public ActionResult FileUpload(HttpPostedFileBase file)
    {
        // Verify that the user selected a file
        if (file != null && file.ContentLength > 0) 
        {
            // extract only the fielname
            var fileName = Path.GetFileName(file.FileName);
            // store the file inside ~/App_Data/uploads folder
            var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);
            file.SaveAs(path);

            var excel = new ExcelQueryFactory(path);
            List<String> worksheetNames = excel.GetWorksheetNames().ToList();
            String FirstWorksheet = worksheetNames[0];
            //Query Column Names
            //The GetColumnNames() method can be used to retrieve the list of column names in a worksheet.
            IEnumerable<String> ProcCodeModifiers = (from row in excel.Worksheet<WorksheetRow>(FirstWorksheet)
                                                     where row.MOD != null
                                                     select row.MOD).Distinct();

            ViewData["Modifiers"] = "";
            foreach (String item in ProcCodeModifiers)
            {
                ViewData["Modifiers"] += item + ", ";
            }

            // redirect back to the index action to show the form once again
//                return RedirectToAction("Index", "Home");

        }

        return View();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:18:13.053

我将不得不对发生此错误的原因进行更多研究，但一个快速的解决方法是在执行 Distinct() 操作之前将查询转换为列表。

这是一个代码示例

```
IEnumerable<String> ProcCodeModifiers = (from row in excel.Worksheet<WorksheetRow>(FirstWorksheet)
                                         where row.MOD != null
                                         select row.MOD).ToList().Distinct(); 
```

# java - PoiReadExcelFile 类会将“poi-test.xls”文件读入 HSSFWorkbook 对象

> ID：15703988
> 
> 赞同：0
> 
> 时间：2013-03-29T13:13:53.007
> 
> 标签：java, apache-poi

我已经创建了这段代码，PoiReadExcelFile 类会将“poi-test.xls”文件读入 HSSFWorkbook 对象。然后将“POI 工作表”读入 HSSFWorksheet 对象，然后读取 A1、B1、C1 和 D1 单元格中的值并显示到标准输出。

```
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.Date;

import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;

public class PoiReadExcelFile {
public static void main(String[] args) {
    try {
        FileInputStream fileInputStream = new FileInputStream("poi-    

      test.xls");
        HSSFWorkbook workbook = new HSSFWorkbook(fileInputStream);
        HSSFSheet worksheet = workbook.getSheet("POI Worksheet");
        HSSFRow row1 = worksheet.getRow(0);
        HSSFCell cellA1 = row1.getCell((short) 0);
        String a1Val = cellA1.getStringCellValue();
        HSSFCell cellB1 = row1.getCell((short) 1);
        String b1Val = cellB1.getStringCellValue();
        HSSFCell cellC1 = row1.getCell((short) 2);
        boolean c1Val = cellC1.getBooleanCellValue();
        HSSFCell cellD1 = row1.getCell((short) 3);
        Date d1Val = cellD1.getDateCellValue();

        System.out.println("A1: " + a1Val);
        System.out.println("B1: " + b1Val);
        System.out.println("C1: " + c1Val);
        System.out.println("D1: " + d1Val);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}
 } 
```

当我运行此代码时，我得到了这个： 用法：BiffDrawingToXml [options] inputWorkbook 选项：-exclude-workbook 排除工作簿级记录 -sheet-indexes 具有指定索引的输出表 -sheet-namek 具有指定名称的输出表

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-05T02:34:02.040

请使用右键单击运行选项运行类文件。当唯一的 JAR 文件正在运行时，会出现上述消息。

# symfony - 试图让这个 Twig (Symfony2) 函数扩展注册

> ID：15703989
> 
> 赞同：0
> 
> 时间：2013-03-29T13:14:08.753
> 
> 标签：symfony, twig

我收到一个错误：“twig extension FatalErrorException: Error: Class Acme\Bundle\MyBundle\Twig not found in app/cache/dev/appDevDebugProjectContainer.php”

我已经清除了缓存，但这什么也没做。

我只是试图测试设置它，然后我可以输入我所有的逻辑。

--

一个名为 MyTwigExtensions.php 的文件

```
namespace Acme\Bundle\MyBundle\Twig;

class MyTwigExtensions extends \Twig_Extension
{

    public function getFunctions() {    
        return array(
            new Twig_SimpleFunction('link', 'generate_link')
        );
    }

    public function generate_link($params) {

        return "THE-LINK-HERE";

    }

    public function getName() {

        return "link";

    }

} 
```

在 services.yml

```
services:
  my_extension.twig.extension:
    class: Acme\Bundle\MyBundle\Twig
    arguments: []
    tags:
      - { name: twig.extension } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T13:17:28.017

您必须输入扩展类的完全限定名称。

```
services:
  my_extension.twig.extension:
    class: Acme\Bundle\MyBundle\Twig\MyTwigExtensions # <--- here
    arguments: []
    tags:
      - { name: twig.extension } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T13:49:13.407

对于服务表示格式是这样的。下面的 addArrowInCode 是 twig 中使用的方法的名称：

```
twig.extension.addArrowInCode:
       class: Acme\DemoBundle\Twig\AddArrowInCodeExtension
       tags:
           - { name: twig.extension } 
```

对于这个扩展，你应该喜欢......

```
class AddArrowInCodeExtension extends \Twig_Extension
{
    function addArrowInCodeFilter($code, $separator = '&rArr;')
    {
        // do sth setting final

        return $final;
    }

    /**
     * Returns a list of filters to add to the existing list.
     *
     * @return array An array of filters
     */
    public function getFilters()
    {
        return array(
            'addArrowInCode' => new Twig_Filter_Method($this, 'addArrowInCodeFilter', array('needs_environment' => false)),
        );
    }

    public function getName()
    {
        return 'addArrowInCode';
    }
} 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-01T13:25:10.243

请检查此代码。

```
namespace Acme\Bundle\MyBundle\Twig;

class MyTwigExtensions extends \Twig_Extension
{

    public function getFunctions() {    
        return array(
            new Twig_SimpleFunction('link', array($this, 'generate_link')) // <== changed here
        );
    }

    public function generate_link($params) {

        return "THE-LINK-HERE";

    }

    public function getName() {

        return "link";

    }

} 
```

在 services.yml

```
services:
  my_extension.twig.extension:
    class: Acme\Bundle\MyBundle\Twig\MyTwigExtensions # <== changed here
    arguments: []
    tags:
      - { name: twig.extension } 
```

# c# - 在一个应用程序中使用不同版本的 dll 文件

> ID：15703991
> 
> 赞同：8
> 
> 时间：2013-03-29T13:14:15.583
> 
> 标签：c#, .net, dll, json.net

我有一个带有两个库（moon-apns、tweetsharp）的 c# 应用程序。每个库都有 newtonsoft.json.dll 的参考，但版本不同……我的应用程序构建成功，但一个库工作正常，另一个库抛出异常（找不到dll文件）。

我认为当我构建只有一个版本时会进入 bin 文件夹，但我不知道该怎么做。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T19:19:12.680

您可以通过在 app.config 或 web.config 中使用[程序集绑定重定向](http://msdn.microsoft.com/en-us/library/2fc472t2%28v=vs.80%29.aspx)来强制两个库引用相同的版本。显然，这仅在库版本兼容的情况下才有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T15:28:09.367

既然您声明您可以访问这两个库的源代码：

在这两个项目中，将对 newtonsoft 的引用设置为 not required `Specific Version`。重建那些项目。

现在，当您构建主项目时，只要没有兼容性问题，这两个库应该可以使用相同版本的 newtonsoft DLL

# mysql - codeigniter 活动记录嵌套查询

> ID：15703992
> 
> 赞同：0
> 
> 时间：2013-03-29T13:14:20.580
> 
> 标签：mysql, codeigniter, activerecord

我在将下面的 MySQL 代码转换为 Codeigniter 活动记录查询时遇到问题。

```
SELECT sss.*, c.country_name, c.country_code 
  FROM ( SELECT gr.* 
           FROM (`be_goldrate` as `gr`) 
          WHERE `gr`.`country_id` != 0 
            AND `gr`.`rate_type` = 'calculated' 
           ORDER BY gr.date DESC ) as sss 
   LEFT JOIN `be_countries` as `c` 
     ON `c`.`country_id`=`sss`.`country_id`  
   GROUP BY `sss`.`country_id` 
```

我已经按照[这里](http://heybigname.com/2009/09/18/using-code-igniters-active-record-class-to-create-subqueries/)的建议进行了尝试，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:31:55.883

你只需要检查[Codeigniter 文档](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

```
 $this->db->select('sss.*, c.country_name, c.country_code ');
       $this->db->from('(SELECT gr.* 
       FROM (`be_goldrate` as `gr`) 
      WHERE `gr`.`country_id` != 0 
        AND `gr`.`rate_type` = "calculated" 
       ORDER BY gr.date DESC) as sss');
       $this->db->join('be_countries as c','c.country_id = sss.country_id','left');

       $this->db->group_by('sss.country_id'); 
```

如有错误请报告

# android - Listview 到另一个布局。可能吗？

> ID：15703995
> 
> 赞同：0
> 
> 时间：2013-03-29T13:14:35.257
> 
> 标签：android, string, listview

我是初学者。我的字符串如何成为可以重定向到其他布局的可点击字符串。或不同的布局。

编辑这是我的`MainActivity.java`：

```
public class MainActivity extends Activity {

String[] country = new String[] {
        "China",
        "India",
        "Sri Lanka",
        "Malaysia",
        "Japan",
};

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.listview_layout, country);

    ListView listView = (ListView) findViewById(R.id.listView);
    listView.setAdapter(adapter);

    listView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {

            Intent in = new Intent(MainActivity.this,PageOne.class);

            startActivity(in);
        };
    });

} 
```

这是 PageOne.class

```
public class PageOne extends Activity implements OnClickListener{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.china);
    getIntent().getStringExtra("China");
  }

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

}
  } 
```

我想做的是当印度点击它会去 India.xml 如果中国点击它会去 China.xml 但发生的是任何字符串我点击的结果是 china.xml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:20:52.950

假设您希望包含可点击字符串的列表视图行。

```
 listview.setOnItemClickListener(new OnItemClickListener()
    {

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub
                             Intent i= new Intent("com.example.secondactivity");
                             i.putExtra("value",  country[arg2]);
                             // pass country based on listview position 
                             //value- is the key
                             // second parameter is the actual value ie country name 
                             startActivity(i);

        }

    }); 
```

国家[arg2]。arg2 是列表视图的位置。列表视图中的项目是根据位置填充的。单击列表视图行时，国家[arg2] 是该列表视图位置中的国家/地区名称。因此，您使用意图将值传递给第二个活动。

在第二个活动的 onCreate() 中检索

```
 Intent intent = getIntent();
     Bundle b = intent.getExtras();
     String country = b.getString(key);//value or china in youe case. 
```

确保第二个活动在清单文件中有一个条目

编辑：

```
 <activity
   android:name="com.example.test1.secondactivity"
   >
   <intent-filter>
     <action android:name="com.example.test1.secondactivity" />
     <category android:name="android.intent.category.DEFAULT" />
   </intent-filter>
   </activity> 
```

带有列表视图的 MainActivity。

```
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class MainActivity extends Activity {

String[] country = new String[] {
"India",
"Pakistan",
"Sri Lanka",
"China",
"Bangladesh",
"Nepal",
"Afghanistan",
"North Korea",
"South Korea",
"Japan"
};

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

// R.layout.listview_layout is the custom layout
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
          android.R.layout.simple_list_item_1, android.R.id.text1, country);
 //this refers to the actiivty context,
 //second parameters says its a simple list item
 //third is id of text 
 //country is your array of string    
ListView listView = (ListView) findViewById(R.id.lv);
listView.setAdapter(adapter);
listView.setOnItemClickListener(new OnItemClickListener()
{

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        Intent i= new Intent("com.example.test1.secondactivity");
        i.putExtra("value",  country[arg2]);
        // pass country based on listview position 
        //value- is the key
        // second parameter is the actual value ie country name 
        startActivity(i);

    }

}); 
}
} 
```

具有文本视图的第二个 Activity。

```
 public class secondactivity extends Activity{
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.second);
    TextView tv= (TextView) findViewById(R.id.textView1);
    Bundle extras = getIntent().getExtras();
    if (extras != null) {
        String country = extras.getString("value");//value or china in youe case
        tv.setText(country);
    }

  }
  } 
```

项目文件夹

![在此处输入图像描述](../Images/0391135366d92ac772370b3eb670a4e1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:20:53.540

您需要为此使用基本适配器，然后单击该行打开另一个活动。

[例子](http://anujarosha.wordpress.com/2011/11/30/how-to-use-baseadapter-and-onitemclicklistener-in-android/)

您还可以使用 listview onitem 点击监听器

并打开与该职位相关的相应活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T13:21:50.767

尝试在您的列表视图项上创建一个侦听器并按意图导航到下一个活动。

```
 listView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {

            Intent in = new Intent(MainActivity.this,SecondActivity.class);

            startActivity(in);
        };
    }); 
```