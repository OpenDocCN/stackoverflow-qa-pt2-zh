# StackOverflow 问答 13238000-13238999

# api - 在 GE 中绘制矢量

> ID：13238003
> 
> 赞同：1
> 
> 时间：2012-11-05T18:20:08.607
> 
> 标签：api, kml, google-earth, google-earth-plugin

对于我的项目，我需要在整个地球上绘制一个连接 2 个点的矢量。例如，我创建了点并在它们之间画线：

```
 vectorStringMark = ge.createPlacemark('');
    vectorString = ge.createLineString('');
    vectorStringMark.setGeometry(vectorString);
    vectorString.getCoordinates().pushLatLngAlt(vectorStart.getGeometry().getLatitude(), vectorStart.getGeometry().getLongitude(), 0);
    vectorString.getCoordinates().pushLatLngAlt(vectorEnd.getGeometry().getLatitude(), vectorEnd.getGeometry().getLongitude(), 0);

    vectorString.setTessellate(true);
    vectorString.setAltitudeMode(ge.ALTITUDE_CLAMP_TO_GROUND);

    vectorStringMark.setStyleSelector(ge.createStyle(''));
    var vectorStyle = vectorStringMark.getStyleSelector().getLineStyle();
    vectorStyle.setWidth(6);
    vectorStyle.getColor().set('aaffffaa');

    ge.getFeatures().appendChild(vectorStringMark); 
```

所以，这段代码在两点之间创建了一条线，但总是取它们之间最近的距离。如果我绘制另一个字符串并交换点，我将得到从端点返回到起点的同一条线。我需要的是这条连接全球 2 个点且距离最长的新线，所以我得到了一条环绕地球的“腰带”。将不胜感激任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:27:23.323

尝试在原始点之一的对映点中添加另一个点。这个网页计算一个点的对映点 [http://joehohk.0fees.net/Location.htm](http://joehohk.0fees.net/Location.htm)

# intellij-idea - 如何为特定的 Robolectric 测试禁用 jMockit 实例化？

> ID：13238004
> 
> 赞同：4
> 
> 时间：2012-11-05T18:20:14.260
> 
> 标签：intellij-idea, jmockit, robolectric, android-testing

我的许多 Android 单元测试都是用 Robolectric 编写的，但它非常有限，我想使用 jMockit 进行一些测试。

问题是每当 jMockit 实例化类时，Robolectric 测试运行程序都会失败。

我发现可以通过将系统属性“jmockit-mockParameters”设置为“annotated”来告诉 jMockit 仅实例化带注释的类 - [http://code.google.com/p/jmockit/source/detail?r=2066](http://code.google.com/p/jmockit/source/detail?r=2066)

我正在使用 Intellij IDEA 并添加到测试运行配置 VM 选项`-Djmockit-mockParameters=annotated`中，但它不起作用..

如何正确设置此系统属性？

# expressionengine - Exp:resso 商店样品结帐模板

> ID：13238010
> 
> 赞同：-1
> 
> 时间：2012-11-05T18:20:39.427
> 
> 标签：expressionengine, expresso-store

我第一次使用 ExpressionEngine 的 Exp-resso Store，想知道是否有任何地方可用的示例结帐模板。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T19:33:45.737

安装 Store 后，您可以转到 Design >> Template Manager >> store_examples 模板组并查看整个商店的工作示例。我们有包含产品、购物车和结帐标签的模板。如果您打开 system/expressionengine/third_party/store/templates，您也​​可以看到这些相同的模板。

如果您有任何其他问题，请告诉我。

# php - 狮身人面像搜索不返回结果或错误

> ID：13238011
> 
> 赞同：1
> 
> 时间：2012-11-05T18:20:44.820
> 
> 标签：php, database, search, text, sphinx

我一直在使用 sphinxapi.php 并且脚本运行良好，你可以[在这个 pastebin](http://pastebin.com/DnaRmSxu)中查看它。[您可以在这里](http://pastebin.com/RkXcz5gQ)查看我的表结构，这就是我的 sphinx.conf 文件的设置方式：

```
# Minimal Sphinx configuration sample (clean, simple, functional)
#

#Movie Source
source movielist
{
    type            = mysql
    sql_host        = localhost
    sql_user        = root
    sql_pass        = jetru9rU
    sql_db          = imdb
    sql_port        = 3306

    sql_query   = \
        SELECT id, title, subtitle, year_created FROM movielist

    sql_attr_string     = title
    sql_attr_string     = subtitle
    sql_attr_uint       = year_created

    sql_query_info      = SELECT * FROM movielist WHERE id=$id

}
#Movie Index
index movieindex
{
    source          = movielist
    path            = /var/data/movieindex
    docinfo         = extern
    charset_type        = sbcs
}

#Realtime indexing
index movieindexrt
{
    type            = rt
    rt_mem_limit        = 32M

    path            = /var/data/movieindexrt
    charset_type        = utf-8

    rt_field        = title
    rt_field        = subtitle
}

indexer
{
    mem_limit       = 32M
}

searchd
{
    listen          = 9312
    listen          = 9306:mysql41
    log         = /var/log/sphinxsearch/searchd.log
    query_log       = /var/log/sphinxsearch/query.log
    read_timeout        = 5
    max_children        = 30
    pid_file        = /var/log/sphinxsearch/searchd.pid
    max_matches     = 1000
    seamless_rotate     = 1
    preopen_indexes     = 1
    unlink_old      = 1
    workers         = threads # for RT to work
    binlog_path     = /var/data
} 
```

我没有看到的 .conf 文件有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:39:39.360

啊! 您没有字段。有关更多信息，请参阅此页面：

[http://sphinxsearch.com/wiki/doku.php?id=fields_and_attributes](http://sphinxsearch.com/wiki/doku.php?id=fields_and_attributes)

# php - 使用 foreach 在 php 数组中搜索特定值

> ID：13238020
> 
> 赞同：0
> 
> 时间：2012-11-05T18:21:14.467
> 
> 标签：php, multidimensional-array, foreach

我似乎无法从以下 foreach 代码中得到任何结果。我似乎无法递归地遍历该数组，也无法制作该数组的较小数组。我只想从数组中挑选数据并将数据放在更小的数组中。

PHP代码

```
$ii = 0;
foreach ($array as $key => $value)
      { 
       $vv = $value;
       if($vv== 'Alpha')
             {
         $ii++;
          $list[$ii]['info'] = $vv;   // my new array
         }  
      } 
```

PHP print_r($array)

```
Array
(
[0] => Array
    (
        [moredetails] => Array
            (
                [moredetails] => Array
                    (
                        [0] => Array
                            (
                                [productId] => 9999
                                [productName] => Name
                                [productType] => Alpha 
                                [serialNumber] => 
                                [serviceItemId] => 123456                                   
                            )

                      [1] => Array
                            (

                                [productId] => 8888
                                [productName] => Name
                                [productType] => Beta
                                [serialNumber] => 
                                [serviceItemId] => 123456                                   
                            )
                    )
             )
      )
) 
```

理想结果

```
Array
(
  [0]
    (
     [productID] => 9999
     [productName] => Name
     {productType] => Alpha
     )
 ) 
```

找到解决方案！

```
function miniArray($array, &$simple, $ii)
{
   foreach($array as $key => $value)
   {

       if(is_array($value)){            
        $ii++;
            miniArray($value, $simple, $ii);
       }
       else
       {
        $simple[$ii][$key] = $value;

    }   

   }
}

miniArray($service, $simple_array, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:30:15.183

```
<?php
    function miniArray($array, &$simple)
    {
        foreach($array as $key => $value)
        {
            if(is_array($value))
                miniArray($value, $simple);
            else
                $simple[] = $value;
        }
    }

    miniArray($complex_array, $simple_array);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:36:32.770

`foreach`只会通过数组的外层。在第一个循环中，`$key`将是`0`并且`$value`将是一个数组 - 永远不会匹配`'Alpha'`。

你需要的是一个递归函数。PHP 为我们提供了一个不错的快捷方式，[array_walk_recursive](http://www.php.net/manual/en/function.array-walk-recursive.php%20array_walk_recursive)，它将允许您提供自己的函数，该函数将递归地应用于每个元素。

```
$list = array(); //your new array

function walker($value, $key) {
    if ($value == 'Alpha') $list[] = $value;
}

array_walk_recursive($array, 'walker'); //$array is your original array 
```

# android-layout - View 类中的 findViewById 返回 null 而在 Activity 类中有效

> ID：13238031
> 
> 赞同：1
> 
> 时间：2012-11-05T18:21:59.667
> 
> 标签：android-layout, android-widget, android-view, android-custom-view

我对 Android 编程比较陌生。我已经阅读了很多关于这个主题的话题，但没有提到的解决方案对我有用。这是我正在尝试的。我正在尝试使用 XML 文件创建布局资源，并在我的 MainActivity 中执行 setContentView(R.layout.activity_main)。然后我有一个扩展 View 的自定义视图类，我尝试在其中修改 activity_main.xml 文件中定义的默认布局。但是，每当我尝试在单独的文件中实现的自定义视图中使用 findViewById(R.id.)（来自布局文件 activity_main.xml）获取视图 ID 时，我总是得到空值。如果我尝试使用 findViewById(...) 获取 MainActivity 类中的 id，我会得到一个正确的值。
我在这里做错了什么？

这是所有的代码片段

谢谢

这是文件“MainActivity.java”

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    MyView myView = new MyView(this, null);

      .... 
```

这是文件 MyView.java

```
public class MyView extends View {

public static final String DEBUG_TAG = "MYVIEW" ;

public MyView(Context context, AttributeSet attrs) {
    super(context, attrs);

    View tablerow1 = (TableRow) findViewById (R.id.tableRow) ;

    Log.v(DEBUG_TAG," tablerow1 = " + tablerow1 + "\n");

} 
```

这是文件activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/top_layout"  
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"  >
<TableLayout  
android:id="@+id/tableLayout1"  
android:layout_width="match_parent"  
android:layout_height="0dp"
android:layout_weight="2"
android:background="@color/red"
android:shrinkColumns="*"  
android:stretchColumns="*" >  
<TableRow
    android:id="@+id/tableRow1"  
    android:layout_height="wrap_content"  
    android:layout_width="match_parent"  
    android:gravity="center_horizontal">  

    <Button  
        android:id="@+id/button_00_1"  
        android:text="@string/button_1"
        android:textStyle="bold"
        android:background="@color/green"
        android:layout_margin="0.5dp"
        android:layout_width="0dp"
        android:layout_weight="0.5"           
        android:typeface="serif"></Button> 
    </TableRow>  
  </TableLayout>
</LinearLayout> 
```

MyView.java 中的 findViewById(...) 调用总是返回 null，而如果我将它包含在 MainActivity.java 文件中，我会得到正确的非 null 值。

有人可以指出这里有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T07:51:17.327

您可以从活动的布局 xml 轻松访问任何视图/布局。您的代码中唯一缺少的是您尝试在 MyView 中执行 findViewById() 并尝试访问 Activity 的其他视图。此调用仅适用于包含在您的 MyView 中的视图，而不适用于该视图之外。您必须调用您尝试访问其视图的活动的 findViewByID()。例如：-

```
((Activity)context).findViewById(R.id.abc).setVisibility(View.VISIBLE); 
```

在你的情况下，你可以这样做： -

```
public class MyView extends View {
   public static final String DEBUG_TAG = "MYVIEW" ;

   public MyView(Context context, AttributeSet attrs) {
   super(context, attrs);
   View tablerow1 = (TableRow) ((Activity)context).findViewById (R.id.tableRow) ;
   Log.v(DEBUG_TAG," tablerow1 = " + tablerow1 + "\n");
} 
```

# android - 单击列表项时应用程序崩溃

> ID：13238032
> 
> 赞同：-1
> 
> 时间：2012-11-05T18:22:07.827
> 
> 标签：android, android-intent, android-listview

在这里，我正在尝试启动一个名为 Detail.class 的新活动。

```
final Intent intent = new Intent(this, Detail.class);
courseList.setOnItemClickListener(new AdapterView.OnItemClickListener(){
  @Override
  public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    startActivity(intent);
  }
}); 
```

这一切都在 onCreate() 中。

尝试开始新活动时崩溃。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:29:15.960

检查清单文件以双重交叉是否已声明“详细信息”活动..请发布 logcat 以识别崩溃的原因

# sql - 请查看我的数据库架构 - 需要输入

> ID：13238036
> 
> 赞同：2
> 
> 时间：2012-11-05T18:22:27.070
> 
> 标签：sql, database

我正在研究数据库设计和理论，并最终在创建基于 SQL 的模式方面进行了深思熟虑的尝试。如果有人有时间，我想检查我的布局并确保它是合乎逻辑的。旨在提高我的知识的提示和批评当然是受欢迎的！:)

这是我的总体目标：创建一个数据库，让拥有多家商店的企业能够通过简单地标记培训日期和验证日期来跟踪员工培训进度。基本上，这将是层次结构：

```
Business 1 
--Store Location (a)
----Employee
----Employee
----Employee
--Store Location (b)
----employee
----employee
----employee

Business 2
--Store Location (a)
----employee
----employee
--Store Location (b)
----employee
----etc... 
```

此模式应允许无限的企业、商店和员工。

就培训而言，应该有这种类型的层次结构：

```
Business 1
--Employee Class           (Manager, Employee, Salesman, Associate, etc)
----Training Category      (Sales, Stocking, Manufacturing, etc)
------Training Activity    (How to sell X product, How to stock Y aisle, etc)
------Training Activity
------Training Activity
----Training Category
------Training Activity
------Training Activity
--Employee Class
----Training Category
----Training Category

Business 2
--Employee Class           
----Training Category     
------Training Activity    
------Training Activity
------Training Activity
----Training Category
------Training Activity
------Training Activity
--Employee Class
----Training Category
----Training Category 
```

以下内容应根据业务需求而变化，并在创建业务帐户时创建：

```
*Number of Stores
*Number of Employees 
*Employee Classes

*Training Categories
*Training Activities 
```

所以重要的问题是：
1）我有多接近？
2) 怎样才能做得更好？

提前致谢！

这是图表图片的链接：http: [//i1227.photobucket.com/albums/ee422/CorySCline/diagram.jpg](http://i1227.photobucket.com/albums/ee422/CorySCline/diagram.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:05:37.563

乍一看，它看起来还不错。可以说，多对多的关系应该总是被打破。例如，对于您的公司和员工表，您有一个链接到员工 ID 的公司 ID。考虑一个员工可以被 2 家所有属性相同的不同公司雇用的事实。您将没有唯一标识符。解决此问题的方法是创建一个匹配表，其中您将有 2 个属性，company_id 和employee_id（可能是一个自动增量标识符，以防万一）。

Similarly, consider an employee that moves between stores... You couldn't find out an employee's track record. Also, you do it with employee class and employee.

# php - 调试失败的 ajax POST 调用，类型未决

> ID：13238038
> 
> 赞同：0
> 
> 时间：2012-11-05T18:22:43.597
> 
> 标签：php, javascript, ajax, post

我有一个 javascript 文件，它生成一些 JSON 并对写入和创建 JSON 文件的 php 文件进行 AJAX 调用。在我开始生成相当大的 JSON 文件之前，一切都运行良好。目前，我有一个 9mb 的 json 文件，并且我知道它的结构正确，因为当我使用 console.log 将其打印出来并手动放入文件时，它可以工作。

但是，Ajax 调用未能成功。我尝试了普通的 XHR 调用和 jQuery Ajax，都失败了并且没有提供太多信息。我在 Chrome 和 Firefox 中尝试过。查看开发人员工具，状态文本显示（失败）并且类型显示待处理。没有出现状态代码，我所拥有的只是 Ajax 错误回调中的 statusText: "error"。我尝试搞乱超时和同步调用，但似乎没有任何效果/

关于如何进一步调试的任何想法？

**代码示例**

```
var name = "test.json";
var json = '{
    "type": "FeatureCollection",
    "bbox": [
        1.4137153625488281,
        42.4288330078125,
        1.7842082977294922,
        42.652313232421875
    ],
    "features": [
        {
            "type": "Feature",
            "bbox": [
                1.4137153625488281,
                42.4288330078125,
                1.7842082977294922,
                42.652313232421875
            ],
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                        [
                            1.5753068923950195,
                            42.6473388671875
                        ],
                        [
                            1.5828666687011719,
                            42.63543701171875
                        ],
                        [
                            1.5753068923950195,
                            42.6473388671875
                        ]
                    ]
                ]
            },
            "properties": {
                "ID_0": "6",
                "ISO": "AND",
                "NAME_ENGLI": "Andorra",
                "NAME_OBSOL": ""
            }
        }
    ]
}';

$.ajax({
        type:"POST",
        url:"log.php",
        data: { data: json, file: name },
        dataType: "json",
        success:function(response) {
            console.log(response);
        },
        error:function(error) {
            console.log(error);
        }
}); 
```

这是 log.php：

```
if (isset($_POST['file'])) {
$file = $_POST['file'];
$data = str_replace("\\", "", $_POST['data']);

file_put_contents($file, $data);
exit();
} 
```

**我的主要问题是，当 AJAX 失败时，如何更好地调试？**我在这里的错误回调没有提供任何好的信息。我尝试查看 chrome 中的 net-internals，但在那里找不到太多内容。有任何想法吗？

也许这是一个服务器端问题。当我查看 Chrome 网络内部时，我发现处理较小的 JSON（长度 = 121664）会产生成功的 POST 请求，网络内部显示 HTTP_TRANSACTION_READ_RESPONSE_HEADERS 但大 JSON（长度 = 7036490）给我 --> net_error = -324（ ERR_EMPTY_RESPONSE) 而不是响应头。虽然我没有在 phpinfo 中看到超时信息...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T20:26:44.920

首先，检查服务器端的错误日志。如果请求需要很长时间来处理，
请尝试增加PHP 中的设置。`maxRequestLength`

如果这是客户端问题，那么让它跨浏览器工作的最佳选择是在客户端拆分您的帖子并将其分成几个部分发布。例如，在服务器端，您可以将其保存在临时文件中。

# sharepoint - 无法从脚本将 webpart 添加到页面，但使用相同的代码从命令行成功

> ID：13238042
> 
> 赞同：0
> 
> 时间：2012-11-05T18:23:10.693
> 
> 标签：sharepoint, powershell, sharepoint-2010, web-parts

我正在编写一个脚本，它允许我们构建整个 SharePoint 环境、添加解决方案并从头开始在特定页面上实施 Web 部件。除了最后几行将 Web 部件添加到页面（当然）之外，几乎整个脚本都可以工作。这是真正奇怪的事情。如果我在 power-shell 命令行中运行***完全相同的***代码，它每次都可以工作。将 Web 部件添加到页面的脚本是从一个单独的 ps1 文件调用的，该文件传递脚本运行所需的信息。这是代码：

```
function addWebPartToPage($siteURL, $pageURL, $webpartName, $listName, $solutionName, $destinationZone, $zoneIndex)
{

$web = Get-SPWeb $siteURL
$file = $web.GetFile($pageURL)

if($file.Exists)
{
    try
    {
        checkOutPage($file)
        $list = $web.Lists[$listName]
        $wpManager = $web.GetLimitedWebPartManager($web.Url + $pageURL,[System.Web.UI.WebControls.WebParts.PersonalizationScope]::Shared);
        $webPartListItem = $list.Items | where {$_.Title -eq $solutionName}
        $xmlReader = New-Object System.Xml.XmlTextReader($webPartListItem.File.OpenBinaryStream());
        $errorMsg = ""

        #breaks here:       
        $webPart = $wpManager.ImportWebPart($xmlReader, [ref]$errorMsg)
        $wpManager.AddWebPart($webpart,"$destinationZone",$zoneIndex)

    }
    catch
    {
        $ErrorMessage = $_.Exception.Message    
        $returnVal = 1          
    }
    finally
    {
        checkInPage($file)

        $pweb = [Microsoft.SharePoint.Publishing.PublishingWeb]::GetPublishingWeb($web)
        $page = $pweb.GetPublishingPage($pageURL)
        approvePage $page

        #close the xml reader
        if($xmlReader -ne $null)
        {
            $xmlReader.Close()
        }

        $wpManager.Dispose()
        $web.Dispose()

        [GC]::Collect()     
        checkIfFailed $returnVal
    }
} 
```

}

为了证明代码确实有效，我打开了一个具有管理员权限的新 PowerShell 窗口（请注意，调用脚本本身的窗口也使用管理员权限）并将上述变量设置为将传入的值。然后我复制并将我的代码块粘贴到窗口中并成功运行（WAT???）。
所以这让我自己和一位同事完全被难住了。为什么它在脚本窗口中作为代码块工作，但在我作为脚本执行时不会运行。我收到的错误是这样的：

**将 webpart Poll 添加到页面 Pages/WebpartTest.aspx 时出错。错误：使用“2”参数调用“ImportWebPart”的异常：“无法显示或导入此页面上的 Web 部件或 Web 窗体控件。该类型未注册为安全类型。”**

如果不是因为它通过 VS2010 和代码块而不是脚本成功运行，我会认为这是一个配置问题（配置中的 safeExecute 等）。我的脚本的所有其他功能都有效，包括添加和激活解决方案、创建网站集等。

任何帮助或输入将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:31:41.973

好的，所以我在这里感觉有点愚蠢，因为我自己没有考虑过，但这就是原因，我希望它可以帮助遇到与我相同问题的其他人。

When adding a solution and activating said solution in Sharepoint, before you can access this solution in say adding a webpart to a page, you must first ***RESET IIS***. So during my testing I did not add any code to reset the IIS on the application Sharepoint servers. The only reason I can think of that explains why it worked in the code block was that perhaps I had reset IIS inadvertently during my testing. I can't explain it otherwise. Stupid mistake and I have hung my head in shame, but there you go.

# java - 有没有办法搜索项目中使用某种方法的每个地方？

> ID：13238043
> 
> 赞同：2
> 
> 时间：2012-11-05T18:23:14.453
> 
> 标签：java, eclipse, search, methods

我有一个包含一堆类的项目，我正试图弄清楚我是如何构建它的（是的，我已经成为一个更好的评论者！:)

我想检查一个超类中的一个方法。我想知道在哪里以及如何使用这种方法。浏览每节课并手动搜索将是令人厌烦且耗时的。

有没有办法在整个项目中，特别是在子类中搜索特定的方法？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T18:26:17.007

如果您使用的是 netbeans，您可以右键单击该方法并选择“查找用法”（或）“调用层次结构”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T18:25:06.647

如果您使用的是 Eclipse，您可以右键单击该方法并从上下文菜单中选择 References > Project。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T18:27:22.087

您使用的是 Unix 操作系统吗？如果是这样，您可以在终端中切换到您的项目目录并执行类似`grep -rin "method_name" *`. 这将递归搜索您的项目目录，不区分大小写并显示行号。

# java - 解析/提取可能包含 Javascript 的 URI

> ID：13238048
> 
> 赞同：0
> 
> 时间：2012-11-05T18:23:54.247
> 
> 标签：java, javascript, rhino

作为我正在开发的 Java webapp 的一部分，我需要为一些从数据库加载的 URI 添加前缀，例如

```
"controller.jsp?page=list" 
```

变成……

```
<a href="${legacyBaseUrl}/controller.jsp?page=list">...</a> 
```

简单的。尽管数据库中的某些 URI 包含 Javascript，但会出现问题，例如

```
"javascript:window.open('controller.jsp?page=popup')" 
```

我希望能够做的是...

```
<a href="javascript:window.open('${legacyBaseUrl}/controller.jsp?page=popup')">...</a> 
```

或者更好……

```
<a href="${legacyBaseUrl}/controller.jsp?page=popup" target="_blank">...</a> 
```

我知道我可以用正则表达式将它分开，但我很谨慎地将其视为一个简单的字符串操作问题，因为数据从未被清理过，并且数据库中可能有任何 Javascript。

是否有一种（相对）简单的方法可以在 Java 中正确解析 Javascript，并识别/提取对 window.open 或其他 JS 函数的调用？

我已经简要地查看了 Rhino 或 javax.script 之类的东西，但有点迷茫。这是否适合我的需求？正则表达式实际上就足够了吗？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:31:26.537

看来您需要功能齐全的 HTML 和可能的 java 脚本解析器。有很多这样的纯java实现，例如

[http://www.webrenderer.com/products/server/product/](http://www.webrenderer.com/products/server/product/)

HTML 单元

[http://lobobrowser.org/java-browser.jsp](http://lobobrowser.org/java-browser.jsp)

雅加达仙人掌

# c++ - 将 std::bind 转换为函数指针

> ID：13238050
> 
> 赞同：45
> 
> 时间：2012-11-05T18:24:12.287
> 
> 标签：c++, function-pointers

我有一个第三方库，它有一个将函数指针作为第一个参数的方法：

```
int third_party_method(void (*func)(double*, double*, int, int, double*), ...); 
```

我想传递一个指向类方法的指针，该方法声明如下：

```
class TestClass
{
    public:
        void myFunction (double*, double*, int, int, void*); 
```

我尝试按如下方式传递此函数：

```
TestClass* tc = new TestClass();
using namespace std::placeholders;
third_party_method(std::bind(&TestClass::myFunction, tc, _1, _2, _3, _4, _5), ...); 
```

但是，这不会编译：

```
Conversion of parameter 1 from 'std::tr1::_Bind<_Result_type,_Ret,_BindN>' to 'void (__cdecl *)(double *,double *,int,int,void *)' is not possible
with
[
    _Result_type=void,
    _Ret=void,
    _BindN=std::tr1::_Bind6<std::tr1::_Callable_pmf<void (__thiscall TestClass::* const )(double *,double *,int,int,void *),TestClass,false>,TestClass *,std::tr1::_Ph<1>,std::tr1::_Ph<2>,std::tr1::_Ph<3>,std::tr1::_Ph<4>,std::tr1::_Ph<5>>
] 
```

有什么办法可以将成员传递给函数？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-05T18:29:01.660

> 有什么办法可以将成员传递给函数？

除非您的类对象是某种全局对象 - 这是不可能的。因为对象可能包含一些数据，而函数指针只是指向函数的指针——它不包含任何运行时上下文，只有编译时上下文。

如果您接受每个回调传递的编译时唯一 ID，那么您可以使用以下通用方法。

用法：

```
void test(void (*fptr)())
{
    fptr();
}

struct SomeStruct
{
    int data;
    void some_method()
    {
        cout << data << endl;
    }
    void another_method()
    {
        cout << -data << endl;
    }
};

int main()
{
    SomeStruct local[] = { {11}, {22}, {33} };

    test(get_wrapper<0>(  boost::bind(&SomeStruct::some_method,local[0]) ));
    test(get_wrapper<1>(  boost::bind(&SomeStruct::another_method,local[0]) ));

    test(get_wrapper<2>(  boost::bind(&SomeStruct::some_method,local[1]) ));
    test(get_wrapper<3>(  boost::bind(&SomeStruct::another_method,local[1]) ));

    test(get_wrapper<4>(  boost::bind(&SomeStruct::some_method,local[2]) ));
    test(get_wrapper<5>(  boost::bind(&SomeStruct::another_method,local[2]) ));
} 
```

它可能不需要每次调用的唯一 ID，例如因为 Functor 可能已经有不同的类型，或者它们的使用的运行时范围不重叠。但每次使用唯一 ID 更安全。

执行：

[现场演示](http://ideone.com/6UGfrH)

```
#include <boost/optional.hpp>
#include <boost/bind.hpp>
#include <iostream>
#include <ostream>
using namespace std;

template<unsigned ID,typename Functor>
boost::optional<Functor> &get_local()
{
    static boost::optional<Functor> local;
    return local;
}

template<unsigned ID,typename Functor>
typename Functor::result_type wrapper()
{
    return get_local<ID,Functor>().get()();
}

template<typename ReturnType>
struct Func
{
    typedef ReturnType (*type)();
};

template<unsigned ID,typename Functor>
typename Func<typename Functor::result_type>::type get_wrapper(Functor f)
{
    (get_local<ID,Functor>()) = f;
    return wrapper<ID,Functor>;
}

// ----------------------------------------------------------------------

void test(void (*fptr)())
{
    fptr();
}

struct SomeStruct
{
    int data;
    void some_method()
    {
        cout << data << endl;
    }
    void another_method()
    {
        cout << -data << endl;
    }
};

int main()
{
    SomeStruct local[] = { {11}, {22}, {33} };

    test(get_wrapper<0>(  boost::bind(&SomeStruct::some_method,local[0]) ));
    test(get_wrapper<1>(  boost::bind(&SomeStruct::another_method,local[0]) ));

    test(get_wrapper<2>(  boost::bind(&SomeStruct::some_method,local[1]) ));
    test(get_wrapper<3>(  boost::bind(&SomeStruct::another_method,local[1]) ));

    test(get_wrapper<4>(  boost::bind(&SomeStruct::some_method,local[2]) ));
    test(get_wrapper<5>(  boost::bind(&SomeStruct::another_method,local[2]) ));
} 
```

* * *

PS 注意多线程访问 - 在这种情况下，您应该使用某种[线程本地存储](http://en.wikipedia.org/wiki/Thread-local_storage)数据。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T18:51:40.380

它无法编译，因为第三方函数需要一个指向函数的指针，但您正试图向它传递一个指向*成员*函数的指针。这两种类型[根本不同](http://www.parashift.com/c++-faq/fnptr-vs-memfnptr-types.html)，不能互换。事实上，指向成员函数的指针通常是[奇怪的动物](http://blogs.msdn.com/b/oldnewthing/archive/2004/02/09/70002.aspx)。

这是一个[SSCCE](http://sscce.org/)，说明了您遇到的问题：

```
#include <iostream>
#include <iomanip>
using namespace std;

typedef void(*SpeakFn)(void);

void Bark()
{
    cout << "WOOF" << endl;
}

void Meow()
{
    cout << "meeow" << endl;
}

void SpeakUsing(SpeakFn fn)
{
    fn();
}

class Alligator
{
public:
    void Speak()
    {
        cout << "YAWWW" << endl;
    }
    typedef void(Alligator::*AlligatorSpeakFn)(void);

    void SpeakUsing(AlligatorSpeakFn fn)
    {
        (this->*fn)();
    }
};

int main()
{
    SpeakUsing(&Bark); // OK

    Alligator a;
    Alligator::AlligatorSpeakFn mem_fn = &Alligator::Speak;
    a.SpeakUsing(mem_fn);   // OK

    SpeakUsing(mem_fn); // NOT OK -- can't cvt from fn-ptr to mem-fn-ptr
} 
```

您不能`SpeakUsing`使用指向成员函数的指针进行调用，因为它不能转换为指向函数的指针。

请改用静态成员函数，例如：

```
class Alligator
{
public:
    static void Speak()
    {
        cout << "YAWWW" << endl;
    }
    typedef void(*AlligatorSpeakFn)(void);

    void SpeakUsing(AlligatorSpeakFn fn)
    {
        fn();
    }
}; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-07T22:44:08.590

正如其他人提到的，您别无选择，只能使用全局或静态数据来提供绑定调用上下文作为原始函数。但是提供的解决方案并不通用，它卡在仿函数的空参数列表中。您将需要手动编写`wrapper`，`get_wrapper`并且`Func`对于您想要绑定的每个不同的函数签名并给它们不同的名称。

我想为原始绑定提出更通用的解决方案：

```
#include <iostream>
#include <memory>
#include <functional>
#include <cassert>

// Raw Bind - simulating auto storage behavior for static storage data
template <typename BindFunctor, typename FuncWrapper> class scoped_raw_bind
{
public:

   typedef scoped_raw_bind<BindFunctor, FuncWrapper> this_type;

   // Make it Move-Constructible only
   scoped_raw_bind(const this_type&) = delete;
   this_type& operator=(const this_type&) = delete;
   this_type& operator=(this_type&& rhs) = delete;

   scoped_raw_bind(this_type&& rhs): m_owning(rhs.m_owning)
   {
      rhs.m_owning = false;
   }

   scoped_raw_bind(BindFunctor b): m_owning(false)
   {
      // Precondition - check that we don't override static data for another raw bind instance
      if(get_bind_ptr() != nullptr)
      {
        assert(false);
        return;
      }
      // Smart pointer is required because bind expression is copy-constructible but not copy-assignable
      get_bind_ptr().reset(new BindFunctor(b));
      m_owning = true;
   }

   ~scoped_raw_bind()
   {
     if(m_owning)
     {
        assert(get_bind_ptr() != nullptr);
        get_bind_ptr().reset();
     }
   }

   decltype(&FuncWrapper::call) get_raw_ptr()
   {
      return &FuncWrapper::call;
   }

   static BindFunctor& get_bind()
   { 
      return *get_bind_ptr();
   }

private:

  bool m_owning;

  static std::unique_ptr<BindFunctor>& get_bind_ptr()
  {
     static std::unique_ptr<BindFunctor> s_funcPtr;
     return s_funcPtr;
  }

};

// Handy macro for creating raw bind object
// W is target function wrapper, B is source bind expression
#define RAW_BIND(W,B) std::move(scoped_raw_bind<decltype(B), W<decltype(B), __COUNTER__>>(B));

// Usage
///////////////////////////////////////////////////////////////////////////

// Target raw function signature
typedef void (*TargetFuncPtr)(double, int, const char*);

// Function that need to be called via bind
void f(double d, int i, const char* s1, const char* s2)
{
   std::cout << "f(" << d << ", " << i << ", " << s1 << ", " << s2 << ")" << std::endl;
}

// Wrapper for bound function
// id is required to generate unique type with static data for
// each raw bind instantiation.
// THE ONLY THING THAT YOU NEED TO WRITE MANUALLY!
template <typename BindFunc, int id = 0> struct fWrapper
{
   static void call(double d, int i, const char* s)
   {
      scoped_raw_bind<BindFunc, fWrapper<BindFunc, id>>::get_bind()(d, i, s);
   }
};

int main()
{
   using namespace std::placeholders;

   auto rf1 = RAW_BIND(fWrapper, std::bind(&f, _1, _2, _3, "This is f trail - 1"));
   TargetFuncPtr f1 = rf1.get_raw_ptr();
   f1(1.2345, 42, "f1: Bind! Bind!");

   auto rf2 = RAW_BIND(fWrapper, std::bind(&f, _1, _2, _3, "This is f trail - 2"));
   TargetFuncPtr f2 = rf2.get_raw_ptr();
   f2(10.2345, 420, "f2: Bind! Bind!");

   auto rf3 = RAW_BIND(fWrapper, std::bind(&f, _1, _2, _3, "This is f trail - 3"));
   TargetFuncPtr f3 = rf3.get_raw_ptr();
   f3(100.2345, 4200, "f3: Bind! Bind!");
} 
```

它已经过测试 - 请参阅[此处的实时操作](http://liveworkspace.org/code/fb545b1c8782484666641b191bc313c2)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T18:32:25.047

不，不容易。问题是函数指针有一大块信息——函数的地址。一个方法需要它和对象的地址，或者它可以将对象地址作为参数传递。

有一些非常老套的方法可以做到这一点，但它们将是特定于平台的。而且非常hackey。如此之多，以至于我会推荐全局变量而不是使用它们。

如果该类只有一个全局实例，您确实知道如何执行此操作，对吗？

# objective-c - 嵌套的 UIScrollViews - 缩放后无法滚动到新照片

> ID：13238051
> 
> 赞同：0
> 
> 时间：2012-11-05T18:24:24.433
> 
> 标签：objective-c, ios, uiscrollview, scroll, zooming

这种行为出现在 Apple 的 PhotoScroller 示例应用程序中（我刚刚测试了他们发布的版本`iOS 6`），甚至在`iOS 5`/`iOS 6`默认的“照片”应用程序中。（我没有测试任何其他版本。）

当我放大一张照片然后尝试将其从屏幕上向左滑动（这样下一张照片应该从右侧进入）时，会发生一些奇怪的事情：当我移动手指时，当前照片会朝同一个方向移动，但只有大约一半的速度。当我抬起手指时，当前照片会向后滚动，以使照片边缘与屏幕对齐。下次我尝试滑动时，它按预期工作：当前照片移出屏幕，下一张进入。

我能做些什么让它在第一次尝试时更改为下一张照片吗？我的应用基于 PhotoScroller 示例。

[对于那些不熟悉 PhotoScroller 示例应用程序的人的一些信息：有一个`UIScrollView`可以处理不同页面之间的滑动，并且对于每一页，都有一个可以放大该页面上的照片。]

我刚刚将这种行为与 iBooks 中的行为进行了比较，就像我想要在我的应用程序中一样，我可以立即滑动到下一页，即使我只是放大到上一页。

任何反馈表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:46:24.727

首先加载您需要在代码中滚动的相同图像

UIImage *yourImage = [UIImage imageNamed:@"yourimage.jpg"];

然后将您滚动的 UIImageView 的帧大小与代码中图像的大小相匹配

self.UIImageView.frame = CGRectMake(self.UIImageView.frame.origin.x, self.UIImageView.frame.origin.y, yourImage.size.width, yourImage.size.width) ;

最好在 ViewDidLoad 中加载此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T20:28:10.000

尝试将可缩放滚动视图属性“反弹”设置为 NO：

```
zoomableScrollView.bounces = NO; 
```

# jquery - 简单轮播抛出 TypeError

> ID：13238056
> 
> 赞同：0
> 
> 时间：2012-11-05T18:24:43.957
> 
> 标签：jquery, carousel

我在我的本地和测试环境中实现了一个 jquery simple-carousel，它运行良好，但是一旦我将它移到我的生产环境中，它就会引发控制台错误。可以在[此处](http://code.google.com/p/simple-carousel/)找到该脚本。

这是我收到的错误：

> TypeError: $("ul.carousel").simplecarousel 不是函数

我一直在环顾四周，除了这里没有帮助的旧帖子外，找不到与此问题有关的任何内容。我正在使用一个非常基本的实现，如此[处所示](http://jsfiddle.net/cwAh9/1/)

任何帮助将不胜感激。我尝试了大约 4 种不同的滑块包，但均无济于事。我不断收到类似的错误。

这是我的代码：

```
 <style>
    ul.carousel {padding:0;margin:0;}
    #carousel-wrap {width:790px;height:565px;}
    #carousel-wrap span.next {
        position:absolute;
        top:15%;
        right:170px;
        z-index:999;
        width: 28px;
        height: 80px;
        text-indent: -999999px;
        background: url(http://www.3balls.com/images/homepage/ed_next.png) no-repeat 4px 0px;
        cursor:pointer;
    }
    #carousel-wrap span.prev {
        position:absolute;
        top:15%;
        left:0;
        z-index:999;
        width: 28px;
        height: 80px;
        text-indent: -999999px;
        background: url(http://www.3balls.com/images/homepage/ed_prev.png) no-repeat -4px 0px;
        cursor:pointer;
    }
    </style>

    <script type="text/javascript">
        jQuery(document).ready(function() {
            $("ul.carousel").simplecarousel({
                width:790,
                height:565,     
                auto: 4000,
                next: $('.next'),
                prev: $('.prev')
            });
        });    
    </script>

    <div id="carousel-wrap">
    <ul class="carousel">
      <li><img src="http://www.3balls.com/images/homepage/ads/ad_fallingprices.png" alt="Main Feature" usemap="#Map6" border="0" /></li>
      <li><img src="http://www.3balls.com/images/homepage/ads/ad_fallingprices.png" alt="Main Feature" usemap="#Map5" border="0" /></li>
      <li><img src="http://www.3balls.com/images/homepage/ads/ad_fallingprices.png" alt="Main Feature" usemap="#Map4" border="0" /></li>
    </ul>
    <span class="prev">prev</span>
    <span class="next">next</span> 
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:30:46.260

试试这个：

```
<script type="text/javascript">
    var $jq = jQuery.noConflict();
    $jq(document).ready(function() {
        $jq("ul.carousel").simplecarousel({
            width:790,
            height:565,     
            auto: 4000,
            next: $jq('.next'),
            prev: $jq('.prev')
        });
    });    
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:43:06.450

如果你想继续使用 $-sign 你可以试试这个

```
<script type="text/javascript">
jQuery(document).ready(function($) {
    $("ul.carousel").simplecarousel({
        width:790,
        height:565,     
        auto: 4000,
        next: $jq('.next'),
        prev: $jq('.prev')
    });
});
</script> 
```

# c# - c# 中的可空类型是什么？

> ID：13238059
> 
> 赞同：19
> 
> 时间：2012-11-05T18:24:52.147
> 
> 标签：c#

当我们必须在 C#.net中使用可为**空的类型时？**任何人都可以举例说明。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-05T18:51:45.453

可空类型[（何时使用可空类型）](https://web.archive.org/web/*/http://broadcast.oreilly.com/2010/11/understanding-c-nullable-types.html)是可以将 null 作为值的值类型。它的默认值`null`意味着你没有给它赋值。值类型的示例是 int、float、double、DateTime 等。这些类型具有这些默认值

```
int x = 0;
DateTime d = DateTime.MinValue;
float y = 0; 
```

对于 Nullable 替代方案，上述任何一项的默认值为 null

```
int? x = null; //no value
DateTime? d = null; //no value 
```

这使得它们的行为类似于引用类型，例如对象、字符串

```
string s = null;
object o = null; 
```

它们在处理来自数据库的值时非常有用，当从表返回的值是`NULL`. 想象一下您的数据库表中的一个整数值可能是 NULL，只有`0`在 c# 变量不可为空时才能表示 - 常规整数。

此外，想象一个`EndDate`列，其值直到将来的实际时间才确定。可以在数据库中将其设置为 NULL，但您需要一个可为空的类型将其存储在 C# 中

```
DateTime StartDate = DateTime.Today;
DateTime EndDate? = null; //we don't know yet 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T18:53:34.657

> 当我们必须在 C#.net 中使用可空类型？

想象有一个整数变量`id`代表一个特定的`id`.

您可以存储`1`,`44`或其他任何东西。但是如果您不知道 id 怎么办。您不能只存储`-1`or `0`。您可能正在考虑分配`null`但通常`null`不能分配给值类型。

```
int id=null;//error 
```

`Nullable type`使您能够做到这一点。

* * *

像这样的值类型`int,double,char..` **不能**表示为`NULL`值。

要表示`null`值类型，您必须使用`nullable type`..

它被表示为一个值类型，后跟`?`

`int? id=null;`

被翻译成

`Nullable<int> id=new Nullable<int>();`

可空类型的默认值为`null`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T18:26:21.733

可空类型是 C#2.0 中引入的新概念，它允许用户将空值分配给 C# 语言的原始数据类型。这里重要的是 Nullable 类型是 Structure 类型。

BlogPost：[**Nullable 类型——为什么我们在编程语言中需要 Nullable 类型？**](http://pranayamr.blogspot.in/2010/12/nullable-type-why-we-need-nullable.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T18:28:19.260

来自： http: [//msdn.microsoft.com/en-us/library/1t3y8s4s](http://msdn.microsoft.com/en-us/library/1t3y8s4s(v=vs.80).aspx) (v=vs.80).aspx Nullable 类型是 System.Nullable 结构的实例。可空类型可以表示其基础值类型的正常值范围，外加一个额外的空值。例如，一个 Nullable<Int32>，发音为“Nullable of Int32”，可以分配从 -2147483648 到 2147483647 的任何值，也可以分配空值。可以为 Nullable<bool> 分配值 true 或 false，或 null

```
class NullableExample
{
    static void Main()
    {
        int? num = null;
        if (num.HasValue == true)
        {
            System.Console.WriteLine("num = " + num.Value);
        }
        else
        {
            System.Console.WriteLine("num = Null");
        }

        //y is set to zero
        int y = num.GetValueOrDefault();

        // num.Value throws an InvalidOperationException if num.HasValue is false
        try
        {
            y = num.Value;
        }
        catch (System.InvalidOperationException e)
        {
            System.Console.WriteLine(e.Message);
        }
    }
} 
```

# resharper - 为什么这个 ReSharper 文件模板没有像我预期的那样扩展？

> ID：13238063
> 
> 赞同：0
> 
> 时间：2012-11-05T18:25:10.627
> 
> 标签：resharper

我已经在 ReSharper 7.0.1 中设置了这个文件模板

```
using System;
using System.Collections.Generic;
using System.Linq;
using MyProject.Infrastructure.Messaging;

namespace $NAMESPACE$
{
    public class $CLASS$Command : ICommand<$CLASS$Command.Result>
    {
        $END$

        public class Result
        {

        }
    }

    public class $CLASS$Handler : ICommandHandler<$CLASS$Command, $CLASS$Command.Result>
    {
        public $CLASS$Command.Result Process($CLASS$Command c)
        {

            var result = new $CLASS$Command.Result {};
            return result;
        }
    }
} 
```

当我基于模板创建文件时，只有一些`$CLASS$`变量实例被正确填充。在`$CLASS$`in 中使用的情况下`$CLASS$Command.Result`，`$CLASS$`将替换为字母`a`而不是预期值，就像这样。

```
using System;
using System.Collections.Generic;
using System.Linq;
using MyProject.Infrastructure.Messaging;

namespace MyProject.Domain.AnEntity.Commands
{
    public class Test2Command : ICommand<aCommand.Result>
    {

        public class Result
        {

        }
    }

    public class Test2Handler : ICommandHandler<Test2Command, aCommand.Result>
    {
        public aCommand.Result Process(Test2Command c)
        {

            var result = new aCommand.Result {};
            return result;
        }
    }
} 
```

我看不出这不起作用的原因。有谁知道我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:38:25.740

这显然是 ReSharper 某些版本中的一个错误，据我所知，目前正在排队等待修复。

[http://youtrack.jetbrains.com/issue/RSRP-334501](http://youtrack.jetbrains.com/issue/RSRP-334501)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T11:45:57.270

尝试把`$END$`之前`>`。

`public class $CLASS$Command : ICommand<$CLASS$Command.Result$END$>`

这对我来说是一种解决方法（R# 7.1.3）。

# javascript - 使用 Javascript 提交表单在 IE 和 Firefox 中无法正常工作

> ID：13238065
> 
> 赞同：0
> 
> 时间：2012-11-05T18:25:20.447
> 
> 标签：javascript, onsubmit

好的，我不久前提交了一个问题，该问题与上传图像时未显示的动画加载 GIF (PHP) 有关。现在，我已经设法在图像上传时显示 GIF，但在 IE 和 Firefox 中，加载的 GIF 永远不会消失（和/因为？）表单永远不会提交。在 Chrome 中，GIF 消失并提交表单。以下是我正在做的事情..

```
<!-- Validates form -->
<script type="text/javascript" src="jquery-1.8.0.js"></script>
<script>
function validationloading(){
    // post box blank
    var x=document.forms["livefeed"]["message"].value;
    if (!$.trim($("#styled").val())){
        document.livefeed.message.focus();
        document.livefeed.message.style.border="solid 1px red";
        alert("Cannot post a blank message.");
        return false;
    }

    document.write("<table cellpadding='0' cellspacing='0' border='0' align='center' width='100%' height='130'><tr><td align='center' valign='center'><img src='images/ajax_loader.gif' width='50' height='50'></td></tr></table>");
    return true
    $("#myform").submit();
}
</script> 
```

以下片段是从表单中调用它的内容。

```
onSubmit="javascript: validationloading()" 
```

我试过改组返回的真实值，它改变了结果，但不是我需要的方式。它会在 IE 和 Firefox 中提交，但不会显示加载的 GIF。我知道我的代码是一堆废话，但这就是我在这里的原因。

**以下在三种浏览器中 100% 有效。感谢你们的帮助，伙计们！**

```
<!-- validates form and displays loading gif -->
<script type="text/javascript" src="jquery-1.8.0.js"></script>
<script>
function validationloading(){
    // post box blank
    var x=document.forms["livefeed"]["message"].value;
    if (!$.trim($("#styled").val())){
        document.livefeed.message.focus();
        document.livefeed.message.style.border="solid 1px red";
        alert("Cannot post a blank message.");
        return false;
    }
    //

    document.livefeed.submit(); 
    document.getElementById("gif_block").style.display="block"; //gif_block is the id of the div outside the image
    document.getElementById('livefeed').style.display ='none';
    return true;

}
</script> 
```

**GIF div是这个..**

```
<div id="gif_block" style="display:none" align="center" ><p><image src="images/ajax_loader.gif" id="loader-img" width="50" height-"50" /></p></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:29:14.793

那里有几个问题：

1.  如果您想`validationloading`通过其返回值阻止提交，您需要添加`return`：

    ```
    onsubmit="return validationloading()" 
    ```

    那是因为在幕后，浏览器将上面的内容转换为一个看起来像这样的处理函数：

    ```
    function(event) {
        // ...your code here...
    } 
    ```

    ...并使用该函数的返回*值*。

2.  如果您`document.write`在加载的页面中使用，整个页面内容将被清除并*替换*为您在`document.write`. 如果这会干扰表单提交，我不会感到惊讶。`document.write`在网络应用程序中基本上没有位置，并且在过去 12 年左右没有。:-) 使用 DOM 对象和方法向页面添加元素，和/或更改它们的样式，以便隐藏一些并显示其他元素。（在你最喜欢的搜索引擎上进行一些搜索应该会给你很多工作。）

3.  您有永远无法到达的代码`submit`：`return true`.

    ```
    return true
    $("#myform").submit(); // <== This code will never run 
    ```

    `return`退出函数，因此它之后的代码将永远不会运行。

其他注意事项（几乎可以肯定*不是*问题）：

*   使用`onxyz`处理程序属性，您不使用`javascript:`伪协议。他们的内容*已经*是JavaScript。您只`javascript:`在需要 URL 的地方使用，如`href`链接上的 。不过，它通常不会导致错误，因为它看起来像是JavaScript 引擎的[标记语句。](http://ecma-international.org/ecma-262/5.1/#sec-12.12)
*   正确的属性名称全部小写。不过，这仅在您使用 XHTML 时才重要，因此对您来说可能无关紧要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:31:29.483

您的代码有一些问题：

*   `javascript:`仅在`href`or`action`属性中有意义 - 基本上在您可以找到 URL 的任何地方。它是一种指示要运行的 JavaScript 代码的方案。在事件处理程序或`<script>`标签中，它只是一个标签，您可以将其用作循环的一部分。
*   `return`总是结束当前块的执行，所以绝对没有意义`return true`再尝试`$("#myform").submit();`.
*   事实上，这`$("#myform").submit()`有潜在的危险，因为它很可能导致无限循环：通过在其自己的`onSubmit`处理程序中提交表单，您再次触发处理程序并尝试重新提交表单，等等。
*   `document.write()`如果在页面加载时没有调用它，它将覆盖整个页面。虽然在这种情况下这并不是什么太大的问题，但我很确定这不是你打算做的。
*   `document.forms`已过时，您应该改用适当的 DOM 方法，例如`getElementById`. 但是在这种情况下，您可以将`this`其作为参数传递给`validationloading`它，它将引用正在提交的表单。我假设这与您拥有的原因相似`document.livefeed.message`-`getElementById`用于这些。
*   您实际上从未对函数的返回值做任何事情。你需要把`return`它放在堆栈上：`onSubmit="return validationloading();"`

第一个问题是`document.write`事情。删除它和`.submit()`它之后，一切都会好起来的。除非您使用 AJAX，否则无需添加“加载”GIF。

# java - 使用中间件访问 Java 智能卡

> ID：13238070
> 
> 赞同：5
> 
> 时间：2012-11-05T18:25:35.807
> 
> 标签：java, smartcard, jce, pkcs#11

我正在将一个旧项目迁移到 Java，我遇到了一些关于智能卡访问的问题。由于缺乏文档，我被迫找到自己的方式来解决这个问题，所以我希望你们能帮助我。

我有一张智能卡和一个用于访问卡功能的 dll 库（中间件）。使用dependency walker，我设法获得了一个dll库拥有的函数列表，并且该列表总结了[Microsoft Smart Card Api](http://msdn.microsoft.com/en-us/library/dd627645%28v=vs.85%29.aspx)函数。我想知道是否有一些本机包装器可以让我从 Java 调用这些函数？

关于智能卡的性质，它应该包含加密功能（PKCS#11），但由于此错误，我无法实例化 sun.security.pkcs11.SunPKCS11 提供程序：

```
Caused by: java.io.IOException: The specified procedure could not be found.
     at sun.security.pkcs11.wrapper.PKCS11.connect(Native Method) 
```

任何指南将不胜感激。

提前致谢

**更新**：

对于同样有此问题的任何人，事实证明我的智能卡不支持 PKCS11，并且我没有合适的 PKCS11 dll。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:23:29.873

好吧，我最近在一个项目中工作，该项目曾经有智能卡访问 PKI 证书，我们得到了这两个框架的帮助：

*   BouncyCastle Java API 军团（用于 PKI 方法抽象）[http://www.bouncycastle.org/java.html](http://www.bouncycastle.org/java.html)

*   IAIK JCE PKCS11 Wrapper（用于通用 .dll 智能卡访问）[http://jce.iaik.tugraz.at/sic/Products/Core-Crypto-Toolkits/PKCS_11_Wrapper](http://jce.iaik.tugraz.at/sic/Products/Core-Crypto-Toolkits/PKCS_11_Wrapper)

我认为第二种选择也可能对您有所帮助。

# security - 用户“Myapp\MainBundle\Document\User\User”没有用户提供程序

> ID：13238072
> 
> 赞同：0
> 
> 时间：2012-11-05T18:25:39.250
> 
> 标签：security, symfony, symfony-2.1

我正在尝试使用自定义用户提供程序和默认登录表单进行身份验证。

登录部分似乎有效，因为如果我输入的密码不正确，它会显示“凭据错误”。如果我输入了正确的密码并捕获了重定向，我可以在工具栏中看到我的用户名。

但是在重定向之后，我得到了`There is no user provider for user "Myapp\MainBundle\Document\User\User"`

我的用户提供程序配置如下：

```
# security.yml
providers:
    database:
        id: user_manager
firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false
    main:
        pattern: ^/
        form_login:
            login_path: /login
            check_path: /login_check
        logout:
            path:   /logout
            target: /
        anonymous: true

# config.yml
services:
    user_manager:
        class: Myapp\MainBundle\Service\User\UserManager
        factory_service: doctrine_mongodb
        factory_method:  getRepository
        arguments: [ 'MyappMainBundle:User\User' ]
        calls:
            - [ setEncoder, [ @security.encoder_factory ] ] 
```

这是用户提供者（抽象类从 DocumentRepository 扩展，并实现了 UserProviderInterface）：

```
namespace Myapp\MainBundle\Service\User;

use Myvendor\UserBundle\Service\User\AbstractUserManager;
use Myapp\MainBundle\Document\User\User;

class UserManager extends AbstractUserManager {
    public function createUser() {
        return new User;
    }

    public function supportsClass($class) {
        return $class === 'Myapp\MainBundle\Document\User\User';
    }
} 
```

这怎么可能发生？为什么它找到登录的提供者，但在下一个请求时失败？

Symfony 版本：2.1.3

**更新**

我调试了该异常之前出现的代码，发现它被捕获（对于我唯一的提供者）`"Symfony\Component\Security\Core\Exception\UnsupportedUserException" "Instances of "Myapp\MainBundle\Document\User\User" are not supported.`：。这怎么可能？`true`我什至尝试返回`supportsClass()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:30:57.663

发现了我的问题。在 refreshUser() 中抛出此异常。在那里，我检查了 User 类的实例，如文档中所示，但我在命名空间中犯了一个错误。有一个不存在的类的“使用”语句，它没有抛出任何 php 错误。

# java - 如何检查是否安装了“Java Cryptography Extension”？

> ID：13238074
> 
> 赞同：16
> 
> 时间：2012-11-05T18:25:52.420
> 
> 标签：java, cryptography

> **可能重复：**
> [检查 JCE Unlimited Strength Jurisdiction Policy 文件](https://stackoverflow.com/questions/11538746/check-for-jce-unlimited-strength-jurisdiction-policy-files)

我正在做一个需要安装“Java Cryptography Extension”（JCE）的项目，我认为我已经完成了。我按照这里的说明进行操作：

[http://suhothayan.blogspot.com/2012/05/how-to-install-java-cryptography.html](http://suhothayan.blogspot.com/2012/05/how-to-install-java-cryptography.html)

有什么方法可以验证我是否已正确安装它 - 我正在运行的一些测试表明它不是。

* * *

原来我的问题是以下问题的重复，并且接受的解决方案非常有效：

[检查 JCE Unlimited Strength Jurisdiction Policy 文件](https://stackoverflow.com/questions/11538746/check-for-jce-unlimited-strength-jurisdiction-policy-files)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-05T18:54:32.083

## 这是一个更现代的Java实现

```
import java.security.Provider;
import java.security.Security;
import java.util.Arrays;

public class ShowCryptoProviders
{
    private static final String EOL = System.getProperty("line.separator");

    public static void main(final String[] args)
    {
        final Provider[] providers = Security.getProviders();
        final Boolean verbose = Arrays.asList(args).contains("-v");
        for (final Provider p : providers)
        {
            System.out.format("%s %s%s", p.getName(), p.getVersion(), EOL);
            for (final Object o : p.keySet())
            {
                if (verbose)
                {
                    System.out.format("\t%s : %s%s", o, p.getProperty((String)o), EOL);
                }
            }
        }
    }
} 
```

我无法想象这里的某些东西不能告诉你你需要知道什么。如果它不只是通过检查来测试*“无限强度”*[`Cypher.getMaxAllowedKeyLength()`](http://docs.oracle.com/javase/6/docs/api/javax/crypto/Cipher.html#getMaxAllowedKeyLength%28java.lang.String%29) ，它应该返回一个远高于 128 的非常大的数字。

使用`-v`(verbose) 获得以下输出。

```
SunJCE 1.7
    Cipher.Blowfish SupportedKeyFormats : RAW
        AlgorithmParameters.DESede : com.sun.crypto.provider.DESedeParameters
        AlgorithmParameters.DES : com.sun.crypto.provider.DESParameters
        Cipher.DES SupportedPaddings : NOPADDING|PKCS5PADDING|ISO10126PADDING
        AlgorithmParameters.Blowfish : com.sun.crypto.provider.BlowfishParameters
        Cipher.DESedeWrap SupportedKeyFormats : RAW
        Alg.Alias.KeyAgreement.1.2.840.113549.1.3.1 : DiffieHellman
        AlgorithmParameterGenerator.DiffieHellman : com.sun.crypto.provider.DHParameterGenerator
        Cipher.RSA SupportedPaddings : NOPADDING|PKCS1PADDING|OAEPWITHMD5ANDMGF1PADDING|OAEPWITHSHA1ANDMGF1PADDING|OAEPWITHSHA-1ANDMGF1PADDING|OAEPWITHSHA-256ANDMGF1PADDING|OAEPWITHSHA-384ANDMGF1PADDING|OAEPWITHSHA-512ANDMGF1PADDING
        Alg.Alias.Cipher.TripleDES : DESede
        Cipher.ARCFOUR SupportedModes : ECB
        Mac.SslMacSHA1 SupportedKeyFormats : RAW
        KeyGenerator.DES : com.sun.crypto.provider.DESKeyGenerator
        Provider.id version : 1.7
        KeyGenerator.DESede : com.sun.crypto.provider.DESedeKeyGenerator
        Alg.Alias.SecretKeyFactory.PBE : PBEWithMD5AndDES
        Alg.Alias.KeyFactory.1.2.840.113549.1.3.1 : DiffieHellman
        Mac.HmacSHA1 : com.sun.crypto.provider.HmacSHA1
        Cipher.PBEWithMD5AndDES : com.sun.crypto.provider.PBEWithMD5AndDESCipher
        Cipher.AES SupportedModes : ECB|CBC|PCBC|CTR|CTS|CFB|OFB|CFB8|CFB16|CFB24|CFB32|CFB40|CFB48|CFB56|CFB64|OFB8|OFB16|OFB24|OFB32|OFB40|OFB48|OFB56|OFB64|CFB72|CFB80|CFB88|CFB96|CFB104|CFB112|CFB120|CFB128|OFB72|OFB80|OFB88|OFB96|OFB104|OFB112|OFB120|OFB128
        Cipher.AESWrap SupportedModes : ECB
        SecretKeyFactory.DESede : com.sun.crypto.provider.DESedeKeyFactory
        KeyGenerator.SunTlsKeyMaterial : com.sun.crypto.provider.TlsKeyMaterialGenerator
        AlgorithmParameters.OAEP : com.sun.crypto.provider.OAEPParameters
        Cipher.AES SupportedKeyFormats : RAW
        AlgorithmParameters.RC2 : com.sun.crypto.provider.RC2Parameters
        AlgorithmParameters.PBE : com.sun.crypto.provider.PBEParameters
        Alg.Alias.KeyPairGenerator.DH : DiffieHellman
        Alg.Alias.KeyAgreement.OID.1.2.840.113549.1.3.1 : DiffieHellman
        Cipher.AES : com.sun.crypto.provider.AESCipher
        KeyGenerator.RC2 : com.sun.crypto.provider.KeyGeneratorCore$RC2KeyGenerator
        Mac.HmacSHA512 : com.sun.crypto.provider.HmacCore$HmacSHA512
        Provider.id info : SunJCE Provider (implements RSA, DES, Triple DES, AES, Blowfish, ARCFOUR, RC2, PBE, Diffie-Hellman, HMAC)
        Cipher.AES SupportedPaddings : NOPADDING|PKCS5PADDING|ISO10126PADDING
        Alg.Alias.AlgorithmParameters.OID.1.2.840.113549.1.12.1.6 : PBEWithSHA1AndRC2_40
        Cipher.Blowfish SupportedPaddings : NOPADDING|PKCS5PADDING|ISO10126PADDING
        Alg.Alias.AlgorithmParameters.OID.1.2.840.113549.1.12.1.3 : PBEWithSHA1AndDESede
        Alg.Alias.KeyGenerator.SunTls12KeyMaterial : SunTlsKeyMaterial
        KeyStore.JCEKS : com.sun.crypto.provider.JceKeyStore
        Cipher.Blowfish SupportedModes : ECB|CBC|PCBC|CTR|CTS|CFB|OFB|CFB8|CFB16|CFB24|CFB32|CFB40|CFB48|CFB56|CFB64|OFB8|OFB16|OFB24|OFB32|OFB40|OFB48|OFB56|OFB64
        Alg.Alias.SecretKeyFactory.1.2.840.113549.1.5.12 : PBKDF2WithHmacSHA1
        Mac.HmacSHA384 SupportedKeyFormats : RAW
        Cipher.DESedeWrap : com.sun.crypto.provider.DESedeWrapCipher
        Cipher.ARCFOUR SupportedPaddings : NOPADDING
        Alg.Alias.KeyPairGenerator.1.2.840.113549.1.3.1 : DiffieHellman
        Cipher.PBEWithMD5AndTripleDES : com.sun.crypto.provider.PBEWithMD5AndTripleDESCipher
        Alg.Alias.Cipher.1.2.840.113549.1.12.1.6 : PBEWithSHA1AndRC2_40
        Alg.Alias.Cipher.1.2.840.113549.1.12.1.3 : PBEWithSHA1AndDESede
        Mac.HmacSHA256 SupportedKeyFormats : RAW
        Alg.Alias.KeyGenerator.SunTls12RsaPremasterSecret : SunTlsRsaPremasterSecret
        Alg.Alias.AlgorithmParameterGenerator.1.2.840.113549.1.3.1 : DiffieHellman
        Cipher.PBEWithSHA1AndDESede : com.sun.crypto.provider.PKCS12PBECipherCore$PBEWithSHA1AndDESede
        Alg.Alias.KeyGenerator.SunTls12MasterSecret : SunTlsMasterSecret
        SecretKeyFactory.PBEWithMD5AndDES : com.sun.crypto.provider.PBEKeyFactory$PBEWithMD5AndDES
        KeyPairGenerator.DiffieHellman : com.sun.crypto.provider.DHKeyPairGenerator
        Cipher.RC2 SupportedModes : ECB|CBC|PCBC|CTR|CTS|CFB|OFB|CFB8|CFB16|CFB24|CFB32|CFB40|CFB48|CFB56|CFB64|OFB8|OFB16|OFB24|OFB32|OFB40|OFB48|OFB56|OFB64
        Alg.Alias.AlgorithmParameters.Rijndael : AES
        KeyAgreement.DiffieHellman SupportedKeyClasses : javax.crypto.interfaces.DHPublicKey|javax.crypto.interfaces.DHPrivateKey
        Mac.HmacMD5 SupportedKeyFormats : RAW
        KeyGenerator.SunTlsRsaPremasterSecret : com.sun.crypto.provider.TlsRsaPremasterSecretGenerator
        Cipher.AESWrap SupportedKeyFormats : RAW
        SecretKeyFactory.DES : com.sun.crypto.provider.DESKeyFactory
        Cipher.AESWrap SupportedPaddings : NOPADDING
        Provider.id name : SunJCE
        KeyGenerator.HmacSHA512 : com.sun.crypto.provider.KeyGeneratorCore$HmacSHA512KG
        Mac.HmacSHA256 : com.sun.crypto.provider.HmacCore$HmacSHA256
        Cipher.ARCFOUR SupportedKeyFormats : RAW
        Cipher.DES SupportedModes : ECB|CBC|PCBC|CTR|CTS|CFB|OFB|CFB8|CFB16|CFB24|CFB32|CFB40|CFB48|CFB56|CFB64|OFB8|OFB16|OFB24|OFB32|OFB40|OFB48|OFB56|OFB64
        Cipher.RSA SupportedKeyClasses : java.security.interfaces.RSAPublicKey|java.security.interfaces.RSAPrivateKey
        SecretKeyFactory.PBEWithMD5AndTripleDES : com.sun.crypto.provider.PBEKeyFactory$PBEWithMD5AndTripleDES
        Cipher.PBEWithSHA1AndRC2_40 : com.sun.crypto.provider.PKCS12PBECipherCore$PBEWithSHA1AndRC2_40
        AlgorithmParameters.DiffieHellman : com.sun.crypto.provider.DHParameters
        Mac.HmacMD5 : com.sun.crypto.provider.HmacMD5
        Cipher.RSA : com.sun.crypto.provider.RSACipher
        Mac.SslMacMD5 : com.sun.crypto.provider.SslMacCore$SslMacMD5
        Alg.Alias.AlgorithmParameters.OID.1.2.840.113549.1.5.3 : PBEWithMD5AndDES
        Cipher.DESede SupportedPaddings : NOPADDING|PKCS5PADDING|ISO10126PADDING
        Alg.Alias.AlgorithmParameterGenerator.OID.1.2.840.113549.1.3.1 : DiffieHellman
        Cipher.DESede : com.sun.crypto.provider.DESedeCipher
        Alg.Alias.AlgorithmParameters.OID.1.2.840.113549.1.3.1 : DiffieHellman
        Alg.Alias.AlgorithmParameters.1.2.840.113549.1.5.3 : PBEWithMD5AndDES
        Mac.HmacSHA512 SupportedKeyFormats : RAW
        Mac.HmacPBESHA1 SupportedKeyFormats : RAW
        Alg.Alias.AlgorithmParameterGenerator.DH : DiffieHellman
        Cipher.DESedeWrap SupportedPaddings : NOPADDING
        Alg.Alias.SecretKeyFactory.OID.1.2.840.113549.1.5.12 : PBKDF2WithHmacSHA1
        Alg.Alias.AlgorithmParameters.1.2.840.113549.1.3.1 : DiffieHellman
        Mac.HmacPBESHA1 : com.sun.crypto.provider.HmacPKCS12PBESHA1
        Cipher.DES SupportedKeyFormats : RAW
        AlgorithmParameters.PBEWithMD5AndTripleDES : com.sun.crypto.provider.PBEParameters
        Cipher.DESedeWrap SupportedModes : CBC
        Alg.Alias.KeyFactory.OID.1.2.840.113549.1.3.1 : DiffieHellman
        Alg.Alias.Cipher.OID.1.2.840.113549.1.5.3 : PBEWithMD5AndDES
        AlgorithmParameters.AES : com.sun.crypto.provider.AESParameters
        Alg.Alias.AlgorithmParameters.TripleDES : DESede
        Alg.Alias.SecretKeyFactory.TripleDES : DESede
        KeyGenerator.HmacSHA256 : com.sun.crypto.provider.KeyGeneratorCore$HmacSHA256KG
        Alg.Alias.KeyGenerator.TripleDES : DESede
        Alg.Alias.AlgorithmParameters.DH : DiffieHellman
        KeyGenerator.AES : com.sun.crypto.provider.AESKeyGenerator
        Cipher.RC2 SupportedPaddings : NOPADDING|PKCS5PADDING|ISO10126PADDING
        Alg.Alias.Cipher.RC4 : ARCFOUR
        Alg.Alias.KeyPairGenerator.OID.1.2.840.113549.1.3.1 : DiffieHellman
        Mac.HmacSHA384 : com.sun.crypto.provider.HmacCore$HmacSHA384
        SecretKeyFactory.PBKDF2WithHmacSHA1 : com.sun.crypto.provider.PBKDF2HmacSHA1Factory
        Provider.id className : com.sun.crypto.provider.SunJCE
        Cipher.DES : com.sun.crypto.provider.DESCipher
        Cipher.Blowfish : com.sun.crypto.provider.BlowfishCipher
        KeyGenerator.SunTlsMasterSecret : com.sun.crypto.provider.TlsMasterSecretGenerator
        KeyGenerator.HmacSHA1 : com.sun.crypto.provider.HmacSHA1KeyGenerator
        Alg.Alias.SecretKeyFactory.1.2.840.113549.1.5.3 : PBEWithMD5AndDES
        KeyGenerator.SunTlsPrf : com.sun.crypto.provider.TlsPrfGenerator$V10
        SecretKeyFactory.PBEWithSHA1AndDESede : com.sun.crypto.provider.PBEKeyFactory$PBEWithSHA1AndDESede
        KeyGenerator.ARCFOUR : com.sun.crypto.provider.KeyGeneratorCore$ARCFOURKeyGenerator
        Alg.Alias.KeyAgreement.DH : DiffieHellman
        Alg.Alias.KeyGenerator.Rijndael : AES
        AlgorithmParameters.PBEWithSHA1AndDESede : com.sun.crypto.provider.PBEParameters
        Alg.Alias.KeyGenerator.RC4 : ARCFOUR
        Alg.Alias.Cipher.OID.1.2.840.113549.1.12.1.6 : PBEWithSHA1AndRC2_40
        Alg.Alias.Cipher.OID.1.2.840.113549.1.12.1.3 : PBEWithSHA1AndDESede
        Mac.SslMacMD5 SupportedKeyFormats : RAW
        Mac.HmacSHA1 SupportedKeyFormats : RAW
        Cipher.DESede SupportedKeyFormats : RAW
        Cipher.RC2 : com.sun.crypto.provider.RC2Cipher
        KeyGenerator.SunTls12Prf : com.sun.crypto.provider.TlsPrfGenerator$V12
        SecretKeyFactory.PBEWithSHA1AndRC2_40 : com.sun.crypto.provider.PBEKeyFactory$PBEWithSHA1AndRC2_40
        KeyGenerator.HmacMD5 : com.sun.crypto.provider.HmacMD5KeyGenerator
        AlgorithmParameters.PBEWithSHA1AndRC2_40 : com.sun.crypto.provider.PBEParameters
        KeyGenerator.HmacSHA384 : com.sun.crypto.provider.KeyGeneratorCore$HmacSHA384KG
        Alg.Alias.AlgorithmParameters.1.2.840.113549.1.12.1.6 : PBEWithSHA1AndRC2_40
        KeyFactory.DiffieHellman : com.sun.crypto.provider.DHKeyFactory
        Alg.Alias.AlgorithmParameters.1.2.840.113549.1.12.1.3 : PBEWithSHA1AndDESede
        AlgorithmParameters.PBEWithMD5AndDES : com.sun.crypto.provider.PBEParameters
        Alg.Alias.SecretKeyFactory.1.2.840.113549.1.12.1.6 : PBEWithSHA1AndRC2_40
        Alg.Alias.SecretKeyFactory.1.2.840.113549.1.12.1.3 : PBEWithSHA1AndDESede
        Cipher.AESWrap : com.sun.crypto.provider.AESWrapCipher
        Alg.Alias.SecretKeyFactory.OID.1.2.840.113549.1.5.3 : PBEWithMD5AndDES
        Alg.Alias.Cipher.Rijndael : AES
        Cipher.RSA SupportedModes : ECB
        Cipher.DESede SupportedModes : ECB|CBC|PCBC|CTR|CTS|CFB|OFB|CFB8|CFB16|CFB24|CFB32|CFB40|CFB48|CFB56|CFB64|OFB8|OFB16|OFB24|OFB32|OFB40|OFB48|OFB56|OFB64
        Alg.Alias.SecretKeyFactory.OID.1.2.840.113549.1.12.1.6 : PBEWithSHA1AndRC2_40
        Alg.Alias.SecretKeyFactory.OID.1.2.840.113549.1.12.1.3 : PBEWithSHA1AndDESede
        Cipher.ARCFOUR : com.sun.crypto.provider.ARCFOURCipher
        Alg.Alias.Cipher.1.2.840.113549.1.5.3 : PBEWithMD5AndDES
        Mac.SslMacSHA1 : com.sun.crypto.provider.SslMacCore$SslMacSHA1
        KeyAgreement.DiffieHellman : com.sun.crypto.provider.DHKeyAgreement
        Cipher.RC2 SupportedKeyFormats : RAW
        Alg.Alias.KeyFactory.DH : DiffieHellman
        KeyGenerator.Blowfish : com.sun.crypto.provider.BlowfishKeyGenerator 
```

我相信检查特定`KeyGenerator.HmacSHA512 : com.sun.crypto.provider.KeyGeneratorCore$HmacSHA512KG`的密钥生成器可能会告诉您同样的事情，而不必依赖密钥长度查询。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-05T18:30:45.073

当然，

这是一小段代码：

```
public static void main(final String[] args) {
        final Provider[] providers = Security.getProviders();
        for (int i = 0; i < providers.length; i++) {
            final String name = providers[i].getName();
            final double version = providers[i].getVersion();
            System.out.println("Provider[" + i + "]:: " + name + " " + version);
            if (args.length > 0) {
                final Iterator it = providers[i].keySet().iterator();
                while (it.hasNext()) {
                    final String element = (String) it.next();
                    if (element.toLowerCase().startsWith(args[0].toLowerCase())
                            || args[0].equals("-all"))
                        System.out.println("\t" + element);
                }
            }
        }
    } 
```

当您运行它时，您将获得所有已安装的提供程序：

这些是我的例子：

```
Provider[0]:: SUN 1.6
Provider[1]:: Apple 1.0
Provider[2]:: SunRsaSign 1.5
Provider[3]:: SunJSSE 1.6
Provider[4]:: SunJCE 1.6
Provider[5]:: SunJGSS 1.0
Provider[6]:: SunSASL 1.5
Provider[7]:: XMLDSig 1.0
Provider[8]:: SunPCSC 1.6 
```

如果你需要更多，你可以通过给出“-all”参数来激活代码的内部循环。

要检查您的最大密钥长度，您可以使用：

```
System.out.println(Cipher.getMaxAllowedKeyLength("AES")); 
```

如果没有无限强度策略文件，则结果为 128，正确安装后结果为 2147483647。

# delphi - 如何添加相框并在图像中插入文字？

> ID：13238076
> 
> 赞同：5
> 
> 时间：2012-11-05T18:26:04.143
> 
> 标签：delphi, text, frame, image

这就是我需要的：更快地为 Facebook 页面制作有趣海报的程序。海报有文字、图片和框架（白线和黑色背景）。在这种情况下，我想在海报上插入徽标（png 图像）。

根据图片大小，框架的尺寸（在这种情况下由两个形状组成）必须为图片自动调整大小。

![在此处输入图像描述](../Images/88e4adc5ed52af03d7a210db4f2fea23.png)

如何从链接（2个形状组件，2个图像组件，2个标签）中将该图像中的海报保存为图片？

如何做到这一点？使用什么，从哪里开始？

我希望这个问题不会被删除。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T18:51:56.907

如果您将所有框架、形状和图片放入一个新的 TPanel（在我的示例中命名为 MainPanel），那么您可以使用：

```
procedure savePanelAsImage(fpPanel: tPanel; fpFileName: string);
var
   img: TBitmap;
begin
   img := TBitmap.Create;
   try
     img.Width := fpPanel.Width;
     img.Height := fpPanel.Height;
     fpPanel.PaintTo(img.Canvas, 0, 0);
     img.SaveToFile(fpFileName);
   finally
     img.Free;
   end
end; 
```

**用法：**

```
savePanelAsImage(MainPanel, 'd:\someFolder\image001.bmp'); 
```

**笔记：**

*   这是基于 VCL 的示例；
*   要将图像保存为其他格式（而不是 BMP），请使用：TPngImage (Vcl.Imaging.pngImage) 或 TJPEGImage (Vcl.Imaging.jpeg)；
*   如果您使用 FireMonkey (>= Delphi XE2)，您可以利用 someParentComponent.MakeScreenShot();
*   生成的图像将具有与 tPanel 相同的大小。

为了获得更好的结果/灵活性，我建议使用Delphi 的[Graphics32](http://graphics32.org/wiki/)库（它支持图层、图像大小调整等）。

![示例表格](../Images/ff6e0f9c71bd345805d0bac50c559379.png)

![生成的图像](../Images/e2ce219010075f93021707de8c60d762.png)

# java - ListView android什么也没显示

> ID：13238078
> 
> 赞同：0
> 
> 时间：2012-11-05T18:26:12.330
> 
> 标签：java, android, android-listview

我正在尝试做的事情如下：

语音识别器返回一些他已经识别的单词，我想在文本字段中显示它们，现在我读到它必须用一个列表来完成，所以我写了这个：

在 oncreate 中：

```
setContentView(R.layout.activity_main);
mList = (ListView) findViewById(R.id.list); 
```

其中 mList 是私有 ListView var。

这是结果函数：

```
ArrayList<String> matches = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, matches);
mList.setAdapter(arrayAdapter); 
```

在我的 activity_main.xml 我添加了这个：

```
 ListView android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1" 
```

不知何故，该程序没有显示我的列表。

我遵循了本教程：http: [//developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html)

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:09:48.490

android:layout_height="0dip" 似乎是错误的。它可能应该是“wrap_content”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T19:40:23.807

我的 xml 中有一些具有相同名称的双重列表.. :-) 更改 0dip 以包装内容后工作正常。谢谢大家！

# jquery - 无法将变量传递给 jwplayer url？

> ID：13238084
> 
> 赞同：1
> 
> 时间：2012-11-05T18:26:28.957
> 
> 标签：jquery, youtube, jwplayer

我想从 youtube url 列表中获取第一个元素，并使用 jwplayer 在容器中播放它。

出于某种原因，当我通过变量传递 url 时出现跨域策略限制错误，但是当我直接输入 url 时它工作正常。

有什么建议么？这是我正在使用的出现错误的javascript：

```
function getTopLink() {
    var addressValue = $('.list_container li:first-child .youtube').attr("href");
    alert(addressValue);
    return addressValue;
    }

  var stage = getTopLink();

  jwplayer('mediaplayer').setup({
    'flashplayer': '/jwplayer/player.swf',
    'id': 'playerID',
    'width': '640',
    'height': '380',
     icons: false,
    'skin': '/skins/grungetape.zip'
  });

  jwplayer().load(stage); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:44:03.623

我确信有一种更有效的方法可以做到这一点，但这就是我想出的似乎可行的方法：

```
function getTopLink() {
  var addressValue = $('.list_container li:first-child .youtube').attr("href");
  return addressValue;
  }
var x = getTopLink();

function replaceToWatch(i,stage) {  
  var stage = x;
  var newStage = stage.replace(/(?:http:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:embed\?v=|embed)(\/)?(.+)/g, 'http://www.youtube.com/watch?v=$2');
  return newStage;

}

var topVideo = replaceToWatch();

jwplayer('playerContainer').setup({
  'flashplayer': '/jwplayer/player.swf',
  'id': 'playerID',
  'width': '640',
  'height': '380',
   icons: false,
  'file': topVideo,
  'skin': '/skins/grungetape.zip'
}); 
```

# ruby - 将麦克风流式传输到服务器？闪光灯还是银光？

> ID：13238085
> 
> 赞同：0
> 
> 时间：2012-11-05T18:26:38.403
> 
> 标签：ruby, silverlight, actionscript-3, rtmp, rtmfp

我正在寻找构建一个应用程序，该应用程序至少部分需要将音频从客户端机器实时流式传输到服务器。理想情况下，我想运行一个 linux 服务器，我的应用程序的其余部分是用 Ruby 编写的，因此以 Ruby 为中心的设置可以加分，如果可能的话，我想避免使用 Flash Media Server 和/或 Red5。（这似乎有很多我不会真正使用的软件。）

底线——我可以在不使用 RTMP/RTMFP 的情况下从 Flash 流式传输吗？如果没有，我可以在基于 Ruby 的应用程序中接收它吗？这是否值得在 Silverlight 中尝试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-19T01:04:29.977

> 底线——我可以在不使用 RTMP/RTMFP 的情况下从 Flash 流式传输吗？

是的。ActionScript 3 API 提供两种其他类型的实时通信：

*   [通过flash.net.XMLSocket](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/XMLSocket.html)的 XML 套接字
*   [通过flash.net.Socket](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/Socket.html)的二进制套接字

以下是来自无关问题和答案的一些实施见解：

*   [Flex - XMLSocket 截断 XML 的最后结束标记 - 为什么？](https://stackoverflow.com/questions/2363870/flex-xmlsocket-truncates-the-final-closing-tag-of-the-xml-why)

*   [如何使用 Flex / ActionScript 3 通过 Socket 传输实时视频？](https://stackoverflow.com/questions/8445297/how-to-transmit-live-video-over-a-socket-using-flex-actionscript-3)

# javascript - 使用 Coffeescript 在 Backbone.js 中定义 HTML 模板

> ID：13238086
> 
> 赞同：1
> 
> 时间：2012-11-05T18:26:40.823
> 
> 标签：javascript, backbone.js, coffeescript

我目前正在将 javascriptbone.js 视图转换为 coffeescript，但它无法正常工作。

我工作的原始 Javascript 视图是

```
define([
  'jquery',
  'underscore',
  'backbone',
  'text!templates/dashboard/main.html'
], function($, _, Backbone, mainHomeTemplate){

  var Test = Backbone.View.extend({
    el: $("#page"),
    render: function(){
      this.$el.html(mainHomeTemplate);
    }
  });
  return Test;
}); 
```

我的咖啡脚本视图是

```
define [
  'jquery',
  'underscore',
  'backbone',
  'text!templates/dashboard/main.html'
], ($, _, Backbone, mainHomeTemplate) ->

Test = Backbone.View.extend
    el: $ '#page'

    render: ->
        $(@el).html @mainHomeTemplate

Test 
```

当我尝试初始化测试视图时，我得到它说测试未定义。

```
app_router.on('route:defaultAction', function (actions) {
      require(['views/dashboard/testnew'], function(Test) {
        console.log(Test)
        var test = new Test();
        test.render();
       }); 
```

任何帮助将非常感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T19:46:22.740

当它只是一个普通的局部变量时，您将其引用`mainHomeTemplate`为实例变量（`@mainHomeTemplate`与 相同）。`this.mainHomeTemplate`你要：

```
Test = Backbone.View.extend
    el: $ '#page'

    render: ->
        $(@el).html mainHomeTemplate # <-------- No '@' on 'mainHomeTemplate' 
```

当我在这里时，你应该让 Backbone 处理 jQuery 的东西，`el`并且你的视图已经有了[`@$el`](http://backbonejs.org/#View-%24el)（假设你使用的是最新版本的 Backbone），所以你不必`$(@el)`：

```
Test = Backbone.View.extend
    el: '#page'
    render: ->
        @$el.html mainHomeTemplate 
```

我假设您的`define`函数中缺少缩进也只是复制/粘贴错误；在将 CoffeeScript 代码粘贴到问题中时，您必须非常小心您在 CoffeeScript 中的缩进。你也可以使用普通的 CoffeeScript 类机制来代替`Backbone.View.extend`. 您的最终结果应如下所示：

```
define [
  'jquery',
  'underscore',
  'backbone',
  'text!templates/dashboard/main.html'
], ($, _, Backbone, mainHomeTemplate) ->

    class Test extends Backbone.View
        el: '#page'

        render: ->
            @$el.html mainHomeTemplate

    Test 
```

# linq - Linq to SQL 嵌套选择组通过计数

> ID：13238087
> 
> 赞同：2
> 
> 时间：2012-11-05T18:26:43.233
> 
> 标签：linq, count, group-by, nested, having

我需要将查询从 sql 转换为 linq 创建表历史

```
CREATE TABLE [dbo].[History](
    [HistoryID] [int] IDENTITY(1,1) NOT NULL,
    [AuctionID] [int] NOT NULL,
    [UserName] [nvarchar](128) NULL,
    [Time] [datetime] NOT NULL,
    [Price] [decimal](18, 2) NOT NULL,
) 
```

询问

```
select [UserName],[Price] from [History] 
where [Price] in 
    (SELECT [Price] FROM [History]  
    where ID=28 GROUP BY [Price]
    HAVING COUNT(*)=1) 
        Order by [Price] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:17:29.277

我认为您正在寻找`LINQ`类似于您的 SP 的声明。使用以下一种

```
// Using Plain LINQ statements
var result1 = from history in lstHistory
              where history.ID == 28
              group history by history.Price into g
              orderby g.Key
              where g.Count() == 1
              select new 
                { 
                    Price = g.Key, 
                    UserName = g.Select(h => h.UserName).FirstOrDefault() 
                }; 
```

或者

```
// Using Lambda Expressions
var result2 = lstHistory
                .Where(q => q.ID == 28)
                .OrderBy(t => t.Price)
                .GroupBy(h => h.Price)
                .Where(grp => grp.Count() == 1)
                .Select(g => new 
                           { 
                              Price = g.Key, 
                              UserName = g.Select(h => h.UserName).FirstOrDefault() 
                            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:44:30.843

我想你正在寻找这个

```
var query = from h in context.History
            where 
              (from h2 in context.History
               h2.ID == 28
               group h2 by h2.Price into g
               where g.Count() == 1
               select g.Key).Any(x => x == h.Price)
            orderby h.Price
            select new {
              h.UserName,
              h.Price
            }; 
```

# objective-c - 如何使用联合结构创建二进制数据包？

> ID：13238095
> 
> 赞同：0
> 
> 时间：2012-11-05T18:27:29.007
> 
> 标签：objective-c, c

我需要用 C 代码创建二进制数据包。但是，我错过了一些基本点。目前，已经定义了结构，我需要使用它们（至少用于读取数据包数据）。相同的结构将用于接收的数据包和发送的数据包。以下是数据包结构：

```
typedef struct {

  uint8_t packetType;
  uint16_t packetBody;

} MyStruct; 
```

和另一个结构：

```
typedef union {

  const uint8_t *bytes; 
  MyStruct *packet;

} MyPacket; 
```

下面的函数应该接受一个指向结构的指针，用数据填充它并返回：

```
void packetWithBytes(MyPacket *packet)
{
  packet->packet->packetType = 1; // crashed with EXC_BAD_ACCESS
  packet->packet->packetBody = 3;
} 
```

这是对我的函数的调用，它应该返回一个指向二进制数据的指针：

```
MyPacket *packetRef;
packetWithBytes(packetRef); 

NSData *data = [NSData dataWithBytes:packetRef->bytes length:sizeof(packetRef->bytes)]; 
```

我觉得我应该在某个地方（使用`malloc`）分配一些空间，但不确定在哪里以及如何做到这一点。调用部分代码不应该知道有关数据包大小的任何细节。尝试进行分配但得到相同的错误：

```
void packetWithBytes(MyPacket *packet)
{
  packet->bytes = malloc(sizeof(uint8_t) + sizeof(uint16_t)); //crash
  packet->packet->packetType = 1;
  packet->packet->packetBody = 3;
} 
```

试图`const`从`MyStruct`成员字节中删除，但得到相同的错误。我对C不是很熟悉，所以非常感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T18:31:46.753

```
MyPacket *packetRef;
packetWithBytes(packetRef); 
```

是问题所在。`packetRef`是一个未初始化的指针，因此它可能指向无效的内存位置 - 取消引用它是未定义的行为。您可以通过两种方式解决此问题：

```
MyPacket *packetRef = malloc(sizeof(*packetRef));
packetWithBytes(packetRef); 
```

或者

```
MyPacket packetRef;
packetWithBytes(&packetRef); 
```

# vba - VBA - 运行时错误 1004

> ID：13238096
> 
> 赞同：1
> 
> 时间：2012-11-05T18:27:37.980
> 
> 标签：vba, excel, excel-2007

我正在尝试将特定工作表从关闭的工作簿复制到打开的工作簿的特定工作表，但我收到运行时错误。

代码如下：

```
Option Explicit

Sub START()

'Defining variables as a worksheet or workbook
Dim shBrandPivot As Worksheet
Dim shCurrentWeek As Worksheet
Dim shPriorWeek As Worksheet
Dim shPivot As Worksheet
Dim wkb As Workbook
Dim wkbFrom As Workbook
Dim wks As Worksheet
Dim rng As Range
Dim path As String, FilePart As String
Dim TheFile
Dim loc As String

'Setting sheets to active or to recognize where to pull information
Set shBrandPivot = ActiveWorkbook.Sheets("Brand Pivot")
Set shCurrentWeek = ActiveWorkbook.Sheets("Current Week")
Set shPriorWeek = ActiveWorkbook.Sheets("Prior Week")
Set shPivot = ActiveWorkbook.Sheets("Pivot")
Set wkb = ThisWorkbook
loc = shPivot.Range("E11").Value
path = shPivot.Range("E12").Value
FilePart = Trim(shPivot.Range("E13").Value)
TheFile = Dir(path & "*" & FilePart & ".xls")
Set wkbFrom = Workbooks.Open(loc & path & TheFile)
Set wks = wkbFrom.Sheets("SUPPLIER_01_00028257_KIK CUSTOM")
Set rng = wks.Range("A2:N500")

'Copy and pastes This week number to last week number
shPivot.Range("E22:E23").Copy shPivot.Range("F22")

'Deletes necessary rows in PriorWeek tab
shPriorWeek.Range("A4:AC1000").Delete

'Copies necessary rows in CurrentWeek tab to PriorWeek tab
shCurrentWeek.Range("A4:AC1000").Copy shPriorWeek.Range("A4")

'Copies range from report generated to share drive and pastes into the current week tab of open order report
rng.Copy wkb.Sheets("Current Week").Range("A4")

'Closes the workbook in the shared drive
wkbFrom.Close False

End Sub 
```

这分别是单元格 E11、E12 和 E13 中的内容：

E11 - S:_Supply Chain\Weekly Rpts Supplier and Buyer\ E12 - 102112 E13 - SUPPLIER_01_00028257_KIK CUSTOM PRODUCTS GAINSVILLE_21-OCT-12.xls

我希望打开已关闭工作簿的目录是 S:_Supply Chain\Weekly Rpts Supplier and Buyer\102112\Supplier_01_00028257_KIK CUSTOM PRODUCTS GAINSVILLE_21-OCT-12.xls

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:34:12.583

我建议你阅读[这个](http://support.microsoft.com/kb/210684)

原因

> 当您为工作簿指定一个定义的名称，然后多次复制工作表而不先保存并关闭工作簿时，可能会出现此问题

如何解决

> 要解决此问题，请在进行复制过程时定期保存并关闭工作簿

有关聊天中讨论的摘要

通过设置断点`Set wkbFrom = Workbooks.Open(loc & path & TheFile)`

我们意识到文件名丢失导致`Dir(path & "*" & FilePart & ".xls")` 返回没有文件名的目录。

所以解决方案是添加单元格 E13 中的文件名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T06:05:25.380

我之前做过类似的事情，可能对你有用。我的只复制一个范围，但您可以轻松地将范围的大小更改为您希望复制的工作表上的已用空间量。

```
Dim source as Workbook
Dim dest As Workbook
Dim originalWorkBook As Workbook
Set originalWorkBook = ThisWorkbook
Dim ws As Worksheet
Dim copyRange As String
Dim myDir As String
'myDir is found via a function I wrote. The user enters a name, month and year and
'from there it knows where the file will be

copyRange = "A1:D80"

source.Worksheets("The name of your worksheet here").Range(copyRange).Copy
originalWorkBook.Activate
originalWorkBook.Worksheets("Sheet1").Range("A1").Select
Selection.PasteSpecial Paste:=xlPasteAll, Operation:=xlNone, SkipBlanks:= _
False, Transpose:=False
source.Close False
Application.ScreenUpdating = True 
```

希望这可以帮助。

# ruby-on-rails - 如何通过帖子在 Rails 中发送下拉选择并将该选择保留在会话中？

> ID：13238097
> 
> 赞同：0
> 
> 时间：2012-11-05T18:27:37.420
> 
> 标签：ruby-on-rails, ajax, session, post, cookies

我正在尝试向 Rails 站点添加一个简单的功能。将有一个下拉菜单来选择您希望显示时间的时区。选择时区后，该选择现在需要持续存在，因此在该会话期间，显示的该用户的任何时间值都在该时区中。

我已经有一个很好的功能，我的日期格式在 ApplicationController 的帮助模块中通过，我可以在其中应用时区，它会自动应用于显示的所有日期。但是，我遇到的一个问题是，虽然我需要通过 POST 发送这些数据，但我也不需要依赖某种后端存储来使选择持续存在。我这样做的网站的性质或多或少只是多个服务的前端，因此它没有自己的数据库。它只是进行服务调用并显示接收到的数据。这成为一个问题，因为我看到的大多数会话使用示例都将会话值与从 ActiveRecord 扩展的模型值进行比较。在这个站点上，甚至没有使用 ActiveRecord。

我意识到这两件事可能无关紧要，但是当我实际上没有持久模型时，当所有示例代码将 cookie 数据与模型数据进行比较时，这会使学习过程变得更加困难。此外，我仍然不太了解决定在 params 哈希中转发的内容的“Rails Magic”。

那么有没有一种简单的方法来进行下拉选择，只需将选择存储在 cookie 中，并且该用户的未来呈现可以基于该 cookie 信息，而无需将 cookie 数据与某些持久模型数据进行比较？

编辑：一位评论者询问是否有不能使用 AJAX 的原因。答案是除了我以前从未使用过 AJAX 之外没有其他原因，所以我可能需要一些解释才能使其工作。我认为 AJAX 只是一种在不离开页面的情况下进行查询的方法，但是在做出选择后页面无论如何都需要重新加载，更重要的是它应该使用新设置重新呈现之前所在的页面。

# memory - Hadoop - 我可以将任务内存限制设置为低于 2GB

> ID：13238098
> 
> 赞同：0
> 
> 时间：2012-11-05T18:27:38.930
> 
> 标签：memory, hadoop

如题。有谁知道如何限制hadoop的内存。我想让hadoop机器以较低的内存来完成任务。因为我想知道如果一台hadoop机器内存不足，hadoop机器会发生什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T20:53:25.183

您可以通过在 hadoop-env.sh 中设置 HADOOP_NAMENODE_OPTS 来更改分配给 NameNode 的内存，以包含用于内存大小的 JVM 选项。例如，对于 Sun JVM，**-Xmx2000m**表示将分配 2GB 内存给 NameNode。请注意，NameNode 的 1G 内存通常足以容纳几百万个文件。

# javascript - 视口大小和滚动

> ID：13238099
> 
> 赞同：1
> 
> 时间：2012-11-05T18:27:40.970
> 
> 标签：javascript, cross-browser

我正在尝试创建一个脚本，根据滚动查找窗口视口左上角和右下角的坐标。

为了实现这一点，我需要总页面高度/宽度和垂直/水平滚动量。

我的问题是有太多不同的属性可以应用于`window`, `document`, `body`, ... 等。我不是在谈论不同的浏览器。

所以基本上我的问题如下：

*   我可以在没有 jQuery 的情况下以跨浏览器兼容的方式获得总页面高度/宽度、视口大小和垂直/水平滚动量吗？

非常感谢您！

我开始使用此处发布的答案：[JavaScript get window X/Y position for scroll](https://stackoverflow.com/questions/3464876/javascript-get-window-x-y-position-for-scroll) 但这只是我认为的整个答案的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:43:32.233

这是我过去在需要使用非 jQuery 方法来识别最终用户屏幕大小时使用的方法。它远非完美，但我发现它达到了最高点并且适用于大多数浏览器。它也不会得到确切的尺寸，但如果你只是关心在屏幕上显示所有内容，这对我有用。

```
// Function to get the height of the end user's window
function getWindowHeight() {
    var winHeight = 0;
    // Check for common mobile browser
    if ((screen.width < 300)||(screen.height < 300)) {
        if (( window.outerHeight != undefined )||( window.outerHeight > 100 )){
            winHeight = window.outerHeight;
        }
        else{
            winHeight = screen.Height;
        }
    }
    // If not, check to see what Browser is being used.
    else {
        if( typeof (window.innerWidth ) == 'number') {
            //Non-IE
            winHeight = window.innerHeight;
        } else if(document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight )) {
            //IE 6+ in 'standards compliant mode'
            winHeight = document.documentElement.clientHeight;
        } else if(document.body && (document.body.clientWidth || document.body.clientHeight )) {
            //IE 4 compatible
                winHeight = document.body.clientHeight;
        } else if(screen.height == 'number'){
            //IE Mobile 6.0
            winHeight = screen.height;
        }
    }
    return winHeight;
}

// Function to get the width of the end user's window
function getWindowWidth() {
    var winWidth = 0;
    // Check for common mobile browser
    if (input == "yes"){
        if (( window.outerWidth != undefined )||( window.outerWidth > 100 )){
            winWidth = window.outerWidth;
        }
        else{
            winWidth = screen.width;
        }
    }
    // If not, check to see what Browser is being used. 
    else {          
        if( typeof (window.innerWidth ) == 'number') {
            //Non-IE
            winWidth = window.innerWidth;
        } else if(document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight )) {
            //IE 6+ in 'standards compliant mode'
            winWidth = document.documentElement.clientWidth;
        } else if(document.body && (document.body.clientWidth || document.body.clientHeight )) {
            //IE 4 compatible
            winWidth = document.body.clientWidth;
        } else if(screen.width == 'number'){
            //IE Mobile 6.0
            winWidth = screen.width;
        }
    }
    return winWidth;
} 
```

如果您希望它包含所有选项，则需要添加更多内容，但希望这会让您有所收获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:23:41.743

> 获取总页面高度/宽度

只需使用`document.documentElement.scrollWidth`和`scrollHeight`

> 视口大小

有 2 种尺寸：带或不带滚动条。*要使用*滚动条获取视口大小，请使用：

`var viewportWidthWithScrollbars = window.innerWidth || document.documentElement.offsetWidth;`（更改`innerHeight`为`offsetHeight`高度）

`innerWidth`适用于 W3C 浏览器和`offsetWidth`标准模式下的 IE。

要获得*没有*滚动条的视口大小（这可能是您需要的），请使用：

`var viewportWidthWithoutScrollbars = document.documentElement.clientWidth;`

> 垂直/水平滚动量

这是棘手的部分。除了 Chrome 使用`documentElement.scrollLeft`和 Chrome（以及 IE 处于 quirks 模式）之外的所有浏览器都使用`document.body.scrollLeft`，所以我们必须检查这两个值：

`var pageScrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft;`

我在与 W3C 兼容的浏览器（Opera、FF、Chrome）和带有 doctype 的 IE 8 中测试了这些方法（即仅在标准兼容模式下）。我没有在 quirks 模式下测试代码，但无论如何使用 quirks 模式是一个非常糟糕的主意。如果您仍想使用它，我想您必须检查属性`body`而不是`documentElement`.

我将此页面作为参考：[http ://www.quirksmode.org/dom/w3c_cssom.html](http://www.quirksmode.org/dom/w3c_cssom.html)

您可以使用此页面在任何其他浏览器中进行测试：http: [//jsbin.com/obewib/1](http://jsbin.com/obewib/1)

# ruby-on-rails - 无法在具有 has_one 关系的模型中批量分配受保护的属性

> ID：13238105
> 
> 赞同：1
> 
> 时间：2012-11-05T18:28:23.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

你好我有两个型号

用户模型

```
class User < ActiveRecord::Base
  has_one :user_information
  attr_accessible :email, :name
end 
```

用户信息模型

```
class UserInformation < ActiveRecord::Base
  belongs_to :user
  attr_accessible :address, :business, :phone
end 
```

我创建了一个用户记录并且一切正常，但是当我尝试创建用户信息时，我收到了这个错误：

> ```
> ActiveModel::MassAssignmentSecurity::Error in UserInformationsController#create
> 
> Can't mass-assign protected attributes: user 
> ```

要创建用户信息记录，我去

> 本地主机：3000/users/1/user_informations/new

并填写表格。然后我得到错误。

请我需要帮助我在过去的 4 天里一直在尝试这样做，现在我绝望了

非常感谢您的帮助。

* * *

用户信息表

```
<%= form_for(@user_information) do |f| %>
  <% if @user_information.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@user_information.errors.count, "error") %> prohibited this user_information from being saved:</h2>

      <ul>
      <% @user_information.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :user %><br />
    <%= f.text_field :user%>
  </div>
  <div class="field">
    <%= f.label :address %><br />
    <%= f.text_field :address %>
  </div>
  <div class="field">
    <%= f.label :phone %><br />
    <%= f.text_field :phone %>
  </div>
  <div class="field">
    <%= f.label :business %><br />
    <%= f.check_box :business %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

* * *

用户信息控制器

```
class UserInformationsController < ApplicationController
  # GET /user_informations
  # GET /user_informations.json
  def index
    @user_informations = UserInformation.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @user_informations }
    end
  end

  # GET /user_informations/1
  # GET /user_informations/1.json
  def show
    @user_information = UserInformation.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @user_information }
    end
  end

  # GET /user_informations/new
  # GET /user_informations/new.json
  def new
    @user = User.find(params[:id])
    @user_information = UserInformation.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @user_information }
    end
  end

  # GET /user_informations/1/edit
  def edit
    @user_information = UserInformation.find(params[:id])
  end

  # POST /user_informations
  # POST /user_informations.json
  def create
    @user_information = UserInformation.new(params[:user_information])

    respond_to do |format|
      if @user_information.save
        format.html { redirect_to @user_information, notice: 'User information was successfully created.' }
        format.json { render json: @user_information, status: :created, location: @user_information }
      else
        format.html { render action: "new" }
        format.json { render json: @user_information.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /user_informations/1
  # PUT /user_informations/1.json
  def update
    @user_information = UserInformation.find(params[:id])

    respond_to do |format|
      if @user_information.update_attributes(params[:user_information])
        format.html { redirect_to @user_information, notice: 'User information was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @user_information.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /user_informations/1
  # DELETE /user_informations/1.json
  def destroy
    @user_information = UserInformation.find(params[:id])
    @user_information.destroy

    respond_to do |format|
      format.html { redirect_to user_informations_url }
      format.json { head :no_content }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:47:56.737

我解决了这个问题，将它更改为 user_information 控制器中的新操作，如下所示：

```
def new
         @user = User.find(params[:id])
         @user_information = @user.build_user_information

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @user_information }
    end
  end 
```

谢谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:11:03.473

您不能为包含用户字段的 user_information 构建表单。如果这是您想要的，您应该为用户构建一个嵌套表单，包括 user_informations。那么如果用户更新了，user_informations 也会更新。

```
class User < ActiveRecord::Base
    attr_accessible :email, :name

    has_one :user_information
    accepts_nested_attributes_for :user_information
end 
```

形式：

```
<%= form_for @user ..
    ...
    <%= fields_for :user_information do |b| %>
        <%= b.text_field ... 
```

检查[http://weblog.rubyonrails.org/2009/1/26/nested-model-forms/](http://weblog.rubyonrails.org/2009/1/26/nested-model-forms/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:49:58.077

在用户信息模型中，

将用户添加到 attr_accessible

```
attr_accessible :address, :business, :phone, :user 
```

# firefox - 将 XUL 面板的大小调整为自动

> ID：13238108
> 
> 赞同：2
> 
> 时间：2012-11-05T18:28:37.357
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我正在 Addon SDK (v.1.11) 上为 Firefox 开发一个插件。

我的插件使用工具栏按钮来显示 XUL 面板。此面板包含动态（使用[jQuery 的 slideToggle(500)](http://api.jquery.com/slideToggle/)）展开/折叠 div 的按钮，修改面板的整体尺寸。

**问题**

调整大小很顺利，并且包含的​​ HTML 元素会自动调整大小，因为它们的高度/宽度设置为“自动”。但是，面板本身不采用高度/宽度“自动”值，只有整数。这迫使我在折叠/展开动作完成时手动调用一个函数来调整面板的大小。这会产生非常不愉快的效果。有没有办法让面板自动调整其内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T20:32:32.243

该系统现在并不理想，所以我一直通过`resize`处理面板自动调整大小的端口事件连接内容和面板。这是它的工作原理。

在您的 Panel 或 main.js 代码中侦听`resize`事件。

```
Panel.port.on("resize", function (sizes) {
  Panel.resize(sizes.width, sizes.height);
}); 
```

然后在您的内容面板代码中使用类似以下的内容（当 DOM 准备好时）：

```
$(window).bind('resize', function () {
   self.port.emit("resize", { "width" :  $("body").width(),
                              "height" : $("body").height() });
}); 
```

`resize`每次内容窗口大小从展开或折叠发生变化时，这将通过面板端口系统发送一个事件。

**（更新）**

如果您没有`$(window).resize()`从 DOM 获得事件，那么您将不得不将更多手动的东西连接到您的 slideToggle 函数。尝试将回调函数连接到您进行的每个 slideToggle 调用。这是一个例子：

```
function emitResize() {
       self.port.emit("resize", { "width" :  $("body").width(),
                                  "height" : $("body").height() });

}

$('#yourid').slideToggle('fast', emitResize); 
```

当页面大小完成更改时，这将在每个 slideToggle 动画之后触发 resize 事件。如果您为文档设置了静态宽度或高度，您可能希望更改`$("body").width()`和`$("body").height()`调用以使用包含 div。

# sql-server - Silverlight 中的 SQL 作业调度程序 UI

> ID：13238109
> 
> 赞同：0
> 
> 时间：2012-11-05T18:28:42.737
> 
> 标签：sql-server

我使用此查询来获取作业的值并将其显示在 silverlight 控件中。UI 与 SQL 作业调度程序 UI 完全相同。但是我很难将 sysschedules 中的数值解读为 UI 元素。

特别是星期，每个值都乘以自身和2。例如，星期日=1，星期一=2，星期二=4，星期三=8，星期四=16，星期五=32，星期六=64。在 sysschedules 中，它以值的组合形式存储。例如，如果检查了周五和周六，则 freq_interval=96 (64+32)，如果检查了所有天数，则其值为 127。

我的问题是，是否有公式或其他东西可以知道使用数值选择了哪些日子。

```
 SELECT   
  schedule_id  
  ,schedule_uid  
  ,originating_server_id  
  ,name  
  ,owner_sid  
  ,enabled  
  ,freq_type  
  ,freq_interval  
  ,freq_subday_type  
  ,freq_subday_interval  
  ,freq_relative_interval  
  ,freq_recurrence_factor  
  ,dbo.FormatDate(active_start_date) as active_start_date  
  ,dbo.FormatDate(active_end_date) as active_end_date  
  ,dbo.FormatTime(active_start_time) as active_start_time  
  ,dbo.FormatTime(active_end_time) as active_end_time  
  ,date_created  
  ,date_modified  
  ,version_number  
 FROM msdb.dbo.sysschedules WHERE schedule_id=@scheduleId 
```

# macos - mknod 的 OSX 文档

> ID：13238110
> 
> 赞同：0
> 
> 时间：2012-11-05T18:28:43.127
> 
> 标签：macos, audio, command-line-interface, mknod

我认为 Apple 的文档在 mknod 的主要/次要数字上有点稀疏。我试图为麦克风创建一个原始字符设备，以便我可以将数据传输到其中。在适当的 linux 系统上，内核的 ./Documentation/Devices.txt 文件包含引用的主要/次要编号。Apple 是否为创建用于硬件访问的原始内核字符设备创建了任何推论文档？

前任。：`mknod dsp c 14 3`

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T20:00:12.383

OS X is not Linux-based. On OS X many hardware devices are not accessed through traditional Unix device nodes which is why there is no documentation for making a microphone raw device. OS X provides rich support for audio devices through its `Core Audio` framework. See the [Core Audio Overview](http://developer.apple.com/library/mac/#documentation/MusicAudio/Conceptual/CoreAudioOverview/Introduction/Introduction.html) manual for more information on how to get started.

# postgresql - 如何在 where 子句中使用 sum 来计算平均值

> ID：13238111
> 
> 赞同：3
> 
> 时间：2012-11-05T18:28:43.013
> 
> 标签：postgresql, postgis, average

我还是 sql 新手，我刚刚使用 postgresql 一个星期。我有点卡住了。。

我正在使用纽约数据集（[http://workshops.opengeo.org/postgis-intro/about_data.html](http://workshops.opengeo.org/postgis-intro/about_data.html)）。

我必须找到一种方法来列出所有亚洲人口比相应行政区平均数更多的社区，并且我必须显示亚洲人口的百分比。

我想过这个：

```
select name, 100 * sum(c.popn_asian)/(select (avg(popn_asian)) from nyc_census_blocks group by boroname)
from nyc_neighborhoods n, nyc_census_blocks c
where (ST_Contains(n.geom, c.geom) = true )
and (sum(c.popn_asian)) > (select avg(popn_white) from nyc_census_blocks c1 group by c1.boroname) 
```

但是我显然不会在 where 子句之后使用 sum ...我想知道为什么并学习如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T18:31:58.823

```
select name, 100 * sum(c.popn_asian)/(select (avg(popn_asian)) from nyc_census_blocks group by boroname)
from nyc_neighborhoods n, nyc_census_blocks c
where ST_Contains(n.geom, c.geom) = true 
group by name
having sum(c.popn_asian) > (select avg(popn_white) from nyc_census_blocks c1 group by c1.boroname) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:30:12.720

您需要`having`针对此问题使用该子句。

# gdb - 使用 xdebug 和 gdb 进行远程调试

> ID：13238112
> 
> 赞同：0
> 
> 时间：2012-11-05T18:28:46.100
> 
> 标签：gdb, xdebug

我想使用 xdebug 分析 php 脚本并在远程主机向该特定页面发送 HTTP 请求后立即中断到服务器上运行的 GDB。php.ini 的配置选项是：

```
 xdebug.remote_enable = On
    xdebug.remote_autostart = 1 
```

由于调试器不在另一台机器上，但我只想在发送远程请求时进行调试，如果不通过 Web 浏览器进行调试，我该如何做到这一点？我应该在端口 9000 上运行 GDB 并在请求中发送值 XDEBUG_SESSION_START = session_name 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:44:40.987

Xdebug 不能直接与 GDB 对话。但是，它带有一个小型简单的客户端，可以完成类似的事情。我刚刚解释了如何在[仅在命令行中设置 Xdebug 断点时使用它](https://stackoverflow.com/questions/13284795/setting-xdebug-breakpoints-solely-in-command-line)

但是，我有点不清楚您要做什么。你能解释一下所有的东西都住在哪里以及你的设置是什么吗？

# java - Android 秒表式代码不同步，使用 Date().getTime()

> ID：13238114
> 
> 赞同：0
> 
> 时间：2012-11-05T18:29:04.627
> 
> 标签：java, android, time

我编写了一个 Activity，其中包含一些类似秒表的代码。它确实需要准确，问题是它逐渐落后于实时。这是问题代码的一个较小的示例：

```
import java.util.Date;
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.Menu;

public class MainActivity extends Activity {

public static final int TIME_STEP = 500;    // milliseconds between updates
private Handler mHandler = new Handler();
private long mTimeElapsed = 0;

private Runnable mUpdateTimeTask = new Runnable()
{
    private long mOldTime = 0;      // previous real time (ms) that run() was called

    public void run()
    {
        mHandler.postDelayed(mUpdateTimeTask, TIME_STEP);

        long currentTime = new Date().getTime();
        long realDelay = currentTime - mOldTime;    // the actual delay between successive calls to run()
        if (mOldTime != 0)
            mTimeElapsed += realDelay;
        Log.d(this.toString(), "time elapsed = " + mTimeElapsed/1000);

        // some slow operations here...

        mOldTime = currentTime;
    }
};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mTimeElapsed = 0;
    mHandler.removeCallbacks(mUpdateTimeTask);
    mHandler.postDelayed(mUpdateTimeTask, 0);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

为了说明问题：在运行应用程序 8:23（根据 logcat 时间戳）后，mTimeElapsed 将是 456 秒，即 7:36。

由于连续调用 run() 之间的延迟是使用 getTime() 计算的（即它不假设真正的延迟将是 TIME_STEP），我不明白为什么这会不同步？

我已经在模拟器和实际设备上对此进行了测试，结果相同。

编辑：时间结果是针对发布的代码，即即使没有“缓慢的操作”，尽管在这里完成工作似乎会加剧延迟

请不要只提供一些替代方法来实现相同的目标。我本身并不反对替代方案，我只是很想知道为什么这段代码不能按预期工作。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:56:14.110

如果没有更多代码，不清楚您的时间计算和其他方法到底发生了什么。但是，似乎很清楚的是，您的方法似乎没有正确测量经过的时间。

据我所知，“经过的时间”由 run() 调用之间的延迟组成。这不等于从程序开始经过的时间，因为我假设在这些点之间发生了很多小事情，这些事情会导致损失时间的累积。您是否有理由不简单地检索开始时间，然后只计算当前时间和开始时间之间的差异？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:47:41.767

几个注意事项：

a) 不清楚您到底想在 mTimeElapsed 中计算什么？您是否尝试计算在活动上花费的总时间？您是否尝试计算在 run() 中花费的总时间（大约等于在“一些缓慢的操作”上花费的时间）？您是否尝试计算在 run() 之外花费的总时间？

b）根据您的代码，您所做的是计算（大约）从 run() 退出和 run() 的下一次执行之间花费的时间（在 run 之外花费的时间）。这是你需要的吗？

# ruby-on-rails - 具有依赖项的便携式 Rails 应用程序

> ID：13238119
> 
> 赞同：2
> 
> 时间：2012-11-05T18:29:31.373
> 
> 标签：ruby-on-rails, ruby, gem, rvm, bundler

有什么东西可以使 Rails 开发跨操作系统移植（所有操作系统中都安装了 ruby​​ 和 rails 的先决条件）？

**例如：**

1.  我想在 Windows 中创建一个名为“iApp”的 Rails 应用程序（已经安装了 Rails 3.2）
2.  将必要的 gem 添加到“Gemfile”并运行“bundle install”

    > 期望：所有依赖项必须安装在“iApp”文件夹中

3.  将 iApp 文件夹复制到 linux 机器（已安装 Rails 3.2）

4.  运行“rake 测试”或运行“rails s”

    > 期望：它应该开箱即用，无需运行“捆绑安装”

也应该可以在 Machintosh 中重复步骤 3 和 4。

RVM 会解决这个问题吗？或者有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T20:14:52.323

您将需要更具体地说明您的“依赖项”是什么。

此外，许多 gem 是特定于操作系统的，因此仅在机器之间复制 gem 可能对您不起作用。

为什么你不想`bundle install`在 Linux 机器上做一个？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T22:54:40.297

您可以使用捆绑包来获得大部分好处。您仍然需要运行 bundle，但它不会调用任何远程存储库。

见： http: [//gembundler.com/bundle_package.html](http://gembundler.com/bundle_package.html)

请注意，拥有本机 gem 或链接本机包的 gem 将打破您拥有完全可移植 gem 的想法（这将需要在每台新机器上重新编译）。同样，“捆绑包”会为您解决这个问题。

# wpf - 当 Listview 的项目更改时触发 RaiseCanExecuteChanged

> ID：13238121
> 
> 赞同：0
> 
> 时间：2012-11-05T18:29:37.523
> 
> 标签：wpf, listview, mvvm, command

我正在使用带有 Prism 的 MVVM 模式

我的模型中有一个 ObservableCollection 中的元素列表。在我的视图中，我将 ObservableCollection 绑定到 Listview，然后尝试显示 1 个绑定到名为 DoSomethingCommand 的 DelegateCommand 的按钮。这意味着我的 Listview 的每一行都有一个用于调用 DoSomethingCommand 的按钮，其中一个 CommandParameter 绑定到元素的 ID。

约束：DoSomethingCommand 会将我的元素的状态字段更改为“完成”。当一个元素“完成”时，我希望禁用调用 DoSomethingCommand 的按钮。

所以从逻辑上讲，我所要做的就是在执行命令时拥有一个 canExecuteDoSomethingCommand 委托。但是，问题是我何时以及如何提高 DoSomethingCommand.RaiseCanExecuteChanged？BTW Element 是我无法修改的第三方 dll 的一部分，但它已经实现了 INotifyPropertyChanged。

```
<ListView BorderThickness="0" Width="Auto"
              ItemsSource="{Binding ElementList}"
              >
   <ListView.View>
     <GridView>
       <GridViewColumn Header="Actions">
         <GridViewColumn.CellTemplate>
             <DataTemplate>
                <StackPanel Orientation="Horizontal">
                     <Button Command="{Binding DataContext.DoSomethingCommand, RelativeSource={RelativeSource AncestorType={x:Type ListView}}}" CommandParameter="{Binding ID}" >Accept</Button>
                </StackPanel>
             </DataTemplate>
           </GridViewColumn.CellTemplate>
        </GridViewColumn> 
```

执行命令

```
DoSomethingCommand = new DelegateCommand<string>(executeDoSomethingCommand, canExecuteDoSomethingCommand); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T20:14:38.180

如果您使用的是 Prism 的 EventAggregator，并且我假设您使用的是 Prism，那么您可以订阅一个事件并在您的 DelegateCommand 上调用 RaiseCanExecuteChanged()。

像这样的东西：

```
_eventAggregator.GetEvent<YourCompositePresentationEvent>().Subscribe((i) => { YourDelegateCommand.RaiseCanExecuteChanged(); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T21:17:30.177

对于您的问题，我有两个解决方案：

第一个解决方案：

`INotifyPropertyChanged`如果您在`Element`课堂上实施，那就太好了。也许您可以创建另一个类并在它们之间进行转换？您的代码将如下所示：

```
 public ICommand DoSomethingCommand { get; private set; }
    private void OnDoSomethingCommand(object param)
    {
        Element tmp = param as Element;

        if (tmp != null)
        {
            tmp.Status = "done";
        }                

        (DoSomethingCommand as DelegateCommand<object>).RaiseCanExecuteChanged();
    }

    private bool CanDoSomethingCommand(object param)
    {
        Element tmp = param as Element;

        if (tmp != null)
        {
            if (tmp.Status != null && tmp.Status.Equals("done"))
                return false;
            else
                return true; 
        }
        return true;
    } 
```

第二种解决方案：

您可以在没有调用`RaiseCanExecuteChanged`方法的情况下执行此操作。

```
 public ICommand DoSomethingCommand { get; private set; }
    private void OnDoSomethingCommand(object param)
    {
        Element tmp = param as Element;

        if (tmp != null)
        {
            tmp.Status = "done";
        }

        List<Element> refresh = new List<Element>(ElementList);
        ElementList.Clear();
        foreach (var item in refresh)
        {
            ElementList.Add(item);
        }          
    }

    private bool CanDoSomethingCommand(object param)
    {
        Element tmp = param as Element;

        if (tmp != null)
        {
            if (tmp.Status != null && tmp.Status.Equals("done"))
                return false;
            else
                return true; 
        }
        return true;
    } 
```

[这里](http://sdrv.ms/PSfiFe)有所有示例代码 (ListViewDelegateCommand.zip)。

# asp.net-mvc - Orchard CMS：内容部分未显示

> ID：13238123
> 
> 赞同：6
> 
> 时间：2012-11-05T18:29:40.997
> 
> 标签：asp.net-mvc, orchardcms

我创建了一个内容部分，并将其添加到内容类型。当我创建内容类型时，不显示内容部分，这与其他字段不同。没有编译或记录错误，内容部分已添加到placement.info。

司机：

```
[UsedImplicitly]
public class TradeItemPartDriver: ContentPartDriver<TradeItemPart>
{
    private readonly ITradeItemService _tradeItemService;

    private const string TemplateName = "Parts/TradeItem";

    public TradeItemPartDriver(ITradeItemService tradeItemService)
    {
        _tradeItemService = tradeItemService;
    }

    protected override string Prefix
    {
        get { return "TradeItem"; }
    }

    protected override DriverResult Display(
        TradeItemPart part,
        string displayType,
        dynamic shapeHelper)
    {

        return ContentShape("Parts_TradeItem",
                        () => shapeHelper.Parts_TradeItem(
                            ContentPart: part)); 
    }

    protected override DriverResult Editor(
        TradeItemPart part,
        dynamic shapeHelper)
    {
        var shape = ContentShape("Parts_TradeItem_Edit",
                () => shapeHelper.EditorTemplate(
                    TemplateName: TemplateName,
                    Model: BuildEditorViewModel(part),
                    Prefix: Prefix));
        return shape;
    }

    protected override DriverResult Editor(
        TradeItemPart part,
        IUpdateModel updater,
        dynamic shapeHelper)
    {

        var model = new EditTradeItemViewModel();
        updater.TryUpdateModel(model, Prefix, null, null);

        if (part.ContentItem.Id != 0)
        {
            _tradeItemService.UpdateTradeItemForContentItem(
                part.ContentItem, model);
        }

        return Editor(part, shapeHelper);
    }

    private EditTradeItemViewModel BuildEditorViewModel(TradeItemPart part)
    {
        var model = new EditTradeItemViewModel
        {
Code = part.Code, Cost= part.Cost, Unit = part.Unit, Weight = part.Weight,
UnitsList = _tradeItemService.GetUnitTypes()
        };
        return model;
    }
} 
```

处理程序：

```
public class TradeItemPartHandler : ContentHandler
{
    public TradeItemPartHandler(IRepository<TradeItemPartRecord> repository)
    {
        Filters.Add(StorageFilter.For(repository));
    }
} 
```

楷模：

```
public enum EnumTradeItemUnit  : byte
{
    Шт = 0,
    Кг = 1,
    Литр = 2,
    Упаковка = 3
}

public class TradeItemPartRecord : ContentPartRecord
{
    public virtual string Code { get; set; }
    public virtual decimal Weight { get; set; }
    public virtual decimal Cost { get; set; }
    public virtual int Unit { get; set; }
}

public class TradeItemPart : ContentPart<TradeItemPartRecord>
{
    public virtual string Code { get; set; }
    public virtual decimal Weight { get; set; }
    public virtual decimal Cost { get; set; }
    public virtual EnumTradeItemUnit Unit { get; set; }
} 
```

服务：

```
public interface ITradeItemService: IDependency
{
    //IEnumerable<TradeItemPart> GetTradeItems();
    SelectList GetUnitTypes();
    void UpdateTradeItemForContentItem(
        ContentItem item,
        EditTradeItemViewModel model);
}

public class TradeItemService : ITradeItemService
{
    private readonly IContentManager _contentManager;
    private readonly IRepository<TradeItemPartRecord> _tradeItemsRepository;

    public TradeItemService(IContentManager contentManager, IRepository<TradeItemPartRecord> tradeItemsRepository)
    {
        _contentManager = contentManager;
        _tradeItemsRepository = tradeItemsRepository;
    }

    public SelectList GetUnitTypes()
    {
        return new SelectList(
        Enum.GetValues(typeof(EnumTradeItemUnit)).Cast<EnumTradeItemUnit>().Select
            (it =>
            new SelectListItem() { Value = ((byte)it).ToString(), Text = it.ToString() }));
    }

     public void UpdateTradeItemForContentItem(
        ContentItem item,
        EditTradeItemViewModel model)
    {
        var part = item.As<TradeItemPart>();
        part.Code = model.Code;
        part.Cost = model.Cost;
        part.Unit = model.Unit;
        part.Weight = model.Weight;
    }
} 
```

视图模型：

```
public class EditTradeItemViewModel
{
    [StringLength(10), WebDisplayName("Код")]
    public virtual string Code { get; set; }
    [Required, Range(0, 100, ErrorMessage = "Товары тяжелее 100кг пусть более крутые ребята возят"), WebDisplayName("Вес")]
    public virtual decimal Weight { get; set; }
    [Required, Range(0.01, 100000, ErrorMessage = "Товары дороже 100тыс.р. пусть более крутые ребята возят"), WebDisplayName("Цена")]
    public virtual decimal Cost { get; set; }
    [Required, WebDisplayName("Единица измерения")]
    public virtual EnumTradeItemUnit Unit { get; set; }
    public virtual SelectList UnitsList { get; set; }
} 
```

~/Views/EditorTemplates/Parts/TradeItem.cshtml

```
@model Delivery.ViewModels.EditTradeItemViewModel
<fieldset>
    <legend>@T("Характеристики")</legend>

  <div class="editor-label">
    @Html.LabelFor(model => model.Code, T("Код"))
  </div>
  <div class="editor-field">
    @Html.TextBoxFor(model => model.Code)
    @Html.ValidationMessageFor(model => model.Code)
  </div>

  <div class="editor-label">
    @Html.LabelFor(model => model.Unit, T("Единица измерения"))
  </div>
  <div class="editor-field">
    @Html.DropDownListFor(model => model.Unit, Model.UnitsList)
    @Html.ValidationMessageFor(model => model.Unit)
  </div>

  <div class="editor-label">
    @Html.LabelFor(model => model.Cost, T("Стоимость"))
  </div>
  <div class="editor-field">
    @Html.TextBoxFor(model => model.Cost)
    @Html.ValidationMessageFor(model => model.Cost)
  </div>

  <div class="editor-label">
    @Html.LabelFor(model => model.Weight, T("Вес одной единицы"))
  </div>
  <div class="editor-field">
    @Html.TextBoxFor(model => model.Weight)
    @Html.ValidationMessageFor(model => model.Weight)
  </div>

</fieldset> 
```

放置：

```
<Placement>
  <Place Parts_TradeItem_Edit="Content:10"/>
  <Place Parts_TradeItem="Content:10"/>
</Placement> 
```

迁移：

```
 SchemaBuilder.CreateTable("TradeItemRecord",
                       table => table
                           .ContentPartRecord()
                           .Column<string>("Code", column => column.WithLength(10))
                           .Column<decimal>("Weight", column => column.WithPrecision(8).WithScale(2))
                           .Column<decimal>("Cost", column => column.WithPrecision(8).WithScale(2))
                           .Column<byte>("Unit")
                       );

        ContentDefinitionManager.AlterPartDefinition("TradeItem",
            builder => builder.Attachable()); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T20:47:48.327

您的代码通常存在两个问题。

首先，在您的迁移中，您调用了该部分`TradeItem`，而在模型中，您调用了它`TradeItemPart`。更改其中一个将解决编辑器中为什么没有显示的问题。

这导致我们遇到第二个问题，它将禁用保存您的任何数据。你没有连接你的`TradeItemPart`和你的`TradeItemPartRecord`。要解决此问题，您需要进行调整`TradeItemPart`，使其看起来像这样：

```
public class TradeItemPart : ContentPart<TradeItemPartRecord>
{
    public string Code { 
        get { return Record.Code; } 
        set { Record.Code = value; } 
    }
    public decimal Weight { 
        get { return Record.Weight; } 
        set { Record.Weight = value; } 
    }
    public decimal Cost { 
        get { return Record.Cost; } 
        set { Record.Cost = value; } 
    }
    public EnumTradeItemUnit Unit { 
        get { return (EnumTradeItemUnit)Record.Unit; } 
        set { Record.Unit = (int)value; } 
    }
} 
```

我也不确定 Orchard 是否会正确地将`byte`类型列与类型相关联`int`。如果上述更改不起作用，请尝试将 column 的列类型更改`Unit`为`int`.

# ruby-on-rails - 用户邀请架构

> ID：13238124
> 
> 赞同：0
> 
> 时间：2012-11-05T18:29:44.773
> 
> 标签：ruby-on-rails, database-schema

我正在开发一个 RoR 应用程序，用户可以在其中制作列表并邀请其他用户加入他们的列表。我不确定我应该如何处理邀请数据模型。我会假设用户邀请模型会相当普遍，但我还没有找到任何好的例子。

我希望任何用户都能够邀请任何其他用户加入他们的列表。然后，受邀者（另一个用户）将能够接受或拒绝邀请。

我目前在用户和列表之间存在多对多关系。这两个实体 (lists_users) 之间的连接表是否应该包含有关邀请的信息？当用户接受或拒绝邀请时，创建另一个表、邀请并从中添加和删除记录会更好吗？如果后者是可取的，我应该如何处理列表所有者（用户）与列表受邀者（用户）？

我很感激任何建议。谢谢！

**解决方案**

我发现有必要在用户模型中指定包含外键的表。IE

```
 has_many :owned_lists, :class_name => "List", :foreign_key =>"owner_id"
  has_many :created_invitations, :class_name => "Invitation", :foreign_key =>"invitor_id"
  has_many :received_invitations,:class_name => "Invitation", :foreign_key => "invitee_id" 
```

-缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:45:05.690

这些只是我自己的两分钱，但这就是我的做法。

我会保留一张表`lists_users`来跟踪已加入列表的用户。

我会`user_id`在表中有一列`lists`来跟踪列表的所有者。

然后我会有一个“邀请”模型，例如，`invitee_id`和`inviter_id`，`list_id`来跟踪邀请。邀请在使用时会被销毁。邀请可能还需要某种有效的截止日期。

模型看起来像这样：

```
class List < ActiveRecord::Base
  has_and_belongs_to_many :users
  belongs_to :owner, class_name: "User"
  has_and_belongs_to_many :invitations
end

class User < ActiveRecord::Base
  has_and_belongs_to_many :lists
  has_many :owned_lists, class_name: "List"
  has_many :created_invitations, foreign_key: "invitor_id"
  has_many :received_invitations, foreign_key: "invitee_id"
end

class Invitation < ActiveRecord::Base
  belongs_to :invitor, class: "User"
  belongs_to :invitee, class: "User"
  belongs_to :list
end 
```

# ipad - ipad mini 浏览器的宽度/高度是多少？

> ID：13238126
> 
> 赞同：18
> 
> 时间：2012-11-05T18:29:59.720
> 
> 标签：ipad, viewport, ipad-mini

我做了一堆谷歌搜索，但似乎找不到 ipad mini 的（非视网膜）html 宽度/高度。

更具体地说，使用时的宽度/高度：

```
<meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1"> 
```

如果有人可以发布链接或提供类似于此出色答案的详细信息，那就太好了：

[iPad 浏览器宽度和高度标准](https://stackoverflow.com/questions/3375706/ipad-browser-width-height-standard)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-05T18:31:19.497

它将与 iPad 相同，它们以相同的分辨率和比例运行。

因此，从您链接到的答案中，它将是：

*   肖像：768x946
*   风景：1024x690

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:36:15.280

根据苹果的 1024 x 768 分辨率

[http://www.apple.com/ipad-mini/design/](http://www.apple.com/ipad-mini/design/)

# c++ - 如何使用 QGraphicsItem 绘制图像？

> ID：13238130
> 
> 赞同：3
> 
> 时间：2012-11-05T18:30:28.143
> 
> 标签：c++, qt, qt4

我需要使用我的子类绘制图像和几条线`QGraphicsItem`

这是我的代码（头文件）-

```
#ifndef LED_H
#define LED_H

#include <QtGui>
#include <QGraphicsItem>

class LED : public QGraphicsItem
{
public:
    explicit LED();

    QRectF boundingRect() const;

    void paint(QPainter *painter, const QStyleOptionGraphicsItem *option,
               QWidget *widget);

private:
    static QPixmap *led_on; //<--Problem
};

#endif // LED_H 
```

注意-`LED`将添加到`QGraphicsScene`

现在我不知道如何处理它（使用 QGraphicsItem 绘制图像），但决定使用 a `static QPixmap`，它应由`LED`类的所有实例共享。

并在 cpp 文件中添加了这个->

```
QPixmap* LED::led_on = new QPixmap(":/path"); 
```

但是我在构建和运行时遇到了这个错误-

```
QPixmap: Cannot create a QPixmap when no GUI is being used
QPixmap: Must construct a QApplication before a QPaintDevice
The program has unexpectedly finished. 
```

请告诉我该怎么做。（我是 Qt 的新手）我应该使用`QImage`还是其他的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T19:15:47.580

正如错误所暗示的，您必须在创建 QApplication 之后创建 QPixmap。显然你所做的会导致相反的情况发生。这个问题有很多解决方案，但这个很干净：创建一个初始化 QPixmap 的 LED 类的静态成员：

```
void LED::initializePixmap() // static
{
    led_on = new QPixmap(":/path");
} 
```

现在像这样设计你的主要功能：

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv); // first construct the QApplication

    LED::initializePixmap(); // now it is safe to initialize the QPixmap

    MainWindow w; // or whatever you're using...
    w.show();

    return a.exec();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T19:18:42.113

这是一个问题，因为 qt 的 gui 类需要一个正在运行的 qapplication，比如...

```
main(int argc, char* argv[])
{
   QApplication a( argc, argv );

   // your gui class here

   return a.exec();
} 
```

所以你需要构建一个 qt-gui 类，例如一个 qgraphicsview 来显示它

现在，当您有一个图形视图来显示内容时，您需要一个场景来显示并将 qgraphicsitem 添加到场景中......

# mysql - 在 MySQL 中，当我在子查询中使用 Limit 时，它什么也不返回？

> ID：13238135
> 
> 赞同：0
> 
> 时间：2012-11-05T18:30:54.913
> 
> 标签：mysql, row, limit, inner-join

我正在尝试`INNER JOIN`从表中提取一行。查询返回行，直到我添加`LIMIT 1`代码行，然后它什么也不返回，对我来说没有任何意义。这是我的代码。

```
SELECT DISTINCT pd.pid, fv.flow_bmi, fv.flow_date
FROM patient_data pd
INNER JOIN ( ... )
INNER JOIN (
  SELECT pid, flow_bmi, flow_date
  FROM flow_vitals
  ORDER BY flow_date DESC
) fv ON fv.pid = pd.pid

#Results
-------------------------------
 pid  | flow_bmi  | flow_date
-------------------------------
 6073 | 31.90     | 2011-11-06
 6073 | 33.10     | 2011-11-05 <-- I don't want this row returned
 6072 | 32.10     | 2011-08-01 
```

现在当我添加`LIMIT 1`

```
SELECT DISTINCT pd.pid, fv.flow_bmi, fv.flow_date
FROM patient_data pd
INNER JOIN ( ... )
INNER JOIN (
  SELECT pid, flow_bmi, flow_date
  FROM flow_vitals
  ORDER BY flow_date DESC
  LIMIT 1
) fv ON fv.pid = pd.pid

#Expected Outcome
-------------------------------
 pid  | flow_bmi  | flow_date
-------------------------------
 6073 | 31.90     | 2011-11-06
 6072 | 32.10     | 2011-08-01

#Actual Outcome
-------------------------------
 pid  | flow_bmi  | flow_date
-------------------------------
 No rows returned. 
```

我不知道为什么`LIMIT`会破坏这一点，而我真正想要的是`INNER JOIN`根据最新日期仅返回一行。似乎有很多关于同一主题的问题，但他们最终使用了，`MAX()`或者`LIMIT`两者都对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:36:55.350

您实际上想要*每组一行*，而不是表中的*一行*`flow_vitals`。放在`LIMIT 1`那里只返回整个表格的第一行。

我假设您想要的行是具有最大值的`flow_date`行`pid`。尝试：

```
SELECT DISTINCT pd.pid, fv.flow_bmi, flow_date
FROM patient_data pd
INNER JOIN ( ... )
INNER JOIN (
  SELECT pid, flow_bmi, flow_date
  FROM flow_vitals
) fv ON fv.pid = pd.pid
WHERE flow_date = (SELECT MAX(ffvv.flow_date) FROM flow_vitals ffvv WHERE ffvv.pid = fv.pid) 
```

或者，作为连接：

```
SELECT DISTINCT pd.pid, fv.flow_bmi, flow_date
FROM patient_data pd
INNER JOIN ( ... )
INNER JOIN (
  SELECT pid, flow_bmi, flow_date
  FROM flow_vitals
) fv ON fv.pid = pd.pid
INNER JOIN (
  SELECT pid, MAX(flow_date) AS maxDate
  FROM flow_vitals
  GROUP BY pid
) fvMax ON fv.pid = fvMax.pid AND fv.flow_date = fvMax.maxDate 
```

我也想知道`DISTINCT`这里是否真的有必要。

# ruby-on-rails - 获取计数器嵌套模型 mongoid

> ID：13238137
> 
> 赞同：2
> 
> 时间：2012-11-05T18:31:08.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

2个型号：

```
Class User
 include Mongoid::Document
 has_many :reports
end

Class Report
 include Mongoid::Document
 belongs_to :user
end 
```

我需要一个查询来让所有用户都有 6 个或更多报告，例如：。

```
Users.where(reports.count > 5) 
```

我使用 mongo id 2.4.12

我该怎么做？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:24:29.143

好的，这个查询是不可能的，因为 MongoDB 没有连接。

解决此问题的方法是使用计数器缓存。

第一个选项是制作一个计数器缓存，例如：

```
class User
  include Mongoid::Document
  field :reports_count, type: Integer
  has_many :reports
end

class Report
  include Mongoid::Document
  belongs_to :user
  after_create do |doc|
    doc.user.inc(:reports_count, 1)
  end
  after_destroy do |doc|
    doc.user.inc(:reports_count, -1)
  end
end 
```

第二个选项（我使用过这个选项）是使用这个 gem [https://github.com/jah2488/mongoid-magic-counter-cache](https://github.com/jah2488/mongoid-magic-counter-cache)。

对于这个问题：

楷模：

```
class User
 include Mongoid::Document
 field :report_count
 has_many :reports
end

Class Report
 include Mongoid::Document
 include Mongoid::MagicCounterCache
 belongs_to :user
 end 
```

例如，在助手内部：

```
def users_with_reports_greather_than_5
 users_with_reports_greather_than_5 = []
 for u in User.where(report_count.ne => nil)
  if u.report_count > 5
   users_with_reports_greather_than_5 << u
  end
 end
 return users_with_reports_greather_than_5.count
end 
```

问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:48:02.190

您可以使用：

```
User.collection.find({"reports" => {"$size" => 5}}).count 
```

要获得拥有 5 个报告的用户，但要获得拥有超过 5 个报告的用户，您必须保留一个额外的字段 (reports_count)，每次添加新报告时该字段都会增加。您可以在此处提到的嵌入式文档上应用条件：（[http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24size](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24size)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:41:40.040

您需要使用 mongodb 聚合框架来查找获得超过 5 个报告的用户

在 mongo 外壳中

```
db.reports.aggregate(
                     // Group by user_id      
                     {$group:{_id:'$user_id',count:{$sum:1}, 

                      // Add the fields to result set along with grouped result
                      name:{$addToSet:'$any_field_you_need_to_return'}}}, 

                     // And return only the users who got greater than 5 reports
                     {$match:{count:{$gt:5}}}) 
```

**更新**

`Aggregate`仅在`moped v1.3`. 您需要在 gemfile 中进行更改以安装最新的轻便摩托车并运行`bundle install`

```
 gem 'moped', :git=>'https://github.com/mongoid/moped.git', :branch => "master" 
```

你可以像这样使用聚合

```
Reports.collection.aggregate(
                  {'$group' => {'_id' => '$user_id','count' => {'$sum' => 1},
                   'name' => {'$addToSet' => '$any_field_you_need_to_return'}}},
                  {'$match' => {'count' => {'$gt' => 5 }}}) 
```

# oracle - Oracle sql计算单列中不同值的实例

> ID：13238142
> 
> 赞同：3
> 
> 时间：2012-11-05T18:31:27.223
> 
> 标签：oracle, pivot

我有一个带有状态列的表。我想要一个 Oracle sql 查询，它只会在一行中列出我在每个状态中的行数。例如，如果我的桌子是

```
Table A
Id       Status  Fkey
1         20      500
2         20      500  
3         30      501
4         40      501
5         30      502 
```

输出应该是

```
Fkey     Count_status20     Count_status30    Count_status40
500        2                      0                 0
501        0                      1                 1 
```

此处稍有转折

```
Table B 
FKey TKey 
500   1001 
501   1001
502   1002 
```

现在输出应该是

```
TKey Count_status20     Count_status30    Count_status40 
1001     2                     1                    1 
1002     0                     1                    0 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-05T18:37:54.607

如果您使用的是 Oracle 11g，那么您可以使用以下`PIVOT`功能：

```
select *
from
(
  select tkey, status, 
    status as col
  from tableB b
  left join tableA a
    on a.fkey = b.fkey
) src
pivot
(
  count(status)
  for col in ('20' as Count_Status20, 
              '30' as Count_Status30,
              '40' as Count_Status40)
) piv; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/823de/1)

如果您不使用 Oracle11g，那么您可以使用带有`CASE`语句的聚合函数：

```
select tkey, 
  count(case when status = 20 then 1 else null end) as Count_Status20,
  count(case when status = 30 then 1 else null end) as Count_Status30,
  count(case when status = 40 then 1 else null end) as Count_Status40
from tableB b
left join tableA a
  on b.fkey = a.fkey
group by tkey 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/823de/2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T18:34:16.417

```
select fkey,
       sum(case when status = 20 then 1 else 0 end) as count_status20,
       sum(case when status = 30 then 1 else 0 end) as count_status30,
       sum(case when status = 40 then 1 else 0 end) as count_status40,
from your_table
group by fkey 
```

# expressionengine - 哪些插件在 ExpressionEngine 开发日志中创建消息？

> ID：13238144
> 
> 赞同：8
> 
> 时间：2012-11-05T18:31:38.820
> 
> 标签：expressionengine

有没有办法知道哪些加载项在 EE 控制面板的开发人员日志中创建消息，或者它基本上是一个消除过程？

示例消息：

1.  第三方加载项正在调用 $this->load->library('security')，由于 CI_Security 类已移至 Core，因此已弃用，因此始终会加载它。

2.  系统检测到使用可能停止工作或导致系统出现问题的过时代码的插件。在第 0 行调用的已弃用函数 login_form()。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T20:53:49.900

1.  此消息可能会在未来的版本中删除。它造成的混乱多于帮助，并不是完全必要的。是的，开发人员日志让您知道哪个插件导致问题会很有帮助，但是解析回溯以查找该信息的后勤工作被证明是困难的。这给我们带来了消息#2：

2.  正如 GDmac 所说，最好在您的项目中搜索 CP 控制器中对 login_form() 的任何调用。通常，此类消息中会提供文件和行号，但正如我所说，解析回溯信息并不总是有效。

我们将继续努力使这变得更好。弃用警告在大多数情况下都非常有效，但偶尔会弹出类似这样的消息，很难知道如何处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:51:50.133

一个体面的文本编辑器可以搜索您的第三方目录并
查找包含`load->library('security')`

# java - Java 泛型 - 这个语法有什么用？

> ID：13238150
> 
> 赞同：1
> 
> 时间：2012-11-05T18:32:16.463
> 
> 标签：java, android, generics

下面这部分代码`<String, Void, Bitmap>`是什么意思？我什至不知道这种语法叫什么。

```
private class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {

} 
```

这是原始代码（从这里找到：http: [//developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html)）：

```
public void onClick(View v) {
    new DownloadImageTask().execute("http://example.com/image.png");
}

private class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {
    /** The system calls this to perform work in a worker thread and
      * delivers it the parameters given to AsyncTask.execute() */
    protected Bitmap doInBackground(String... urls) {
        return loadImageFromNetwork(urls[0]);
    }

    /** The system calls this to perform work in the UI thread and delivers
      * the result from doInBackground() */
    protected void onPostExecute(Bitmap result) {
        mImageView.setImageBitmap(result);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T18:33:34.557

```
AsyncTask<String, Void, Bitmap> 
```

当您使用 AsyncTask 时，告诉 AsyncTask 由 3 种不同的类型描述，String 作为第一个参数，Void 作为第二个参数，Bitmap 作为第三个参数。

这在 Java 中称为[泛型](http://docs.oracle.com/javase/tutorial/java/generics/)，从 Java5 开始引入。请阅读本[教程](http://docs.oracle.com/javase/tutorial/java/generics/why.html)以了解有关泛型的更多信息。这是关于 android AsyncTasktask 如何使用泛型的[javadoc 。](http://developer.android.com/reference/android/os/AsyncTask.html)

**更新：**来自 AsyncTask javadoc

```
1) Params, the type of the parameters sent to the task upon execution.
2) Progress, the type of the progress units published during the background computation.
3) Result, the type of the result of the background computation. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T18:38:53.983

它被称为`Generics`。以下是[**AsyncTask 手册**](http://developer.android.com/reference/android/os/AsyncTask.html)中的详细信息：

> 异步任务使用的三种类型如下：
> 
> **Params**，执行时发送给任务的参数类型。
> 
> **Progress**，在后台计算期间发布的进度单元的类型。
> 
> **Result**，后台计算结果的类型。并非所有类型都始终由异步任务使用。
> 
> **要将类型标记为未使用，只需使用类型 Void：**

所以`AsyncTask<String, Void, Bitmap>`意味着，`AsyncTask --DownloadImageTask`接受参数为`String`，`Progress`类型为`unused`并返回结果为`Bitmap`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:36:38.647

AsyncTask 是一个泛型类。您应该查看[泛型教程](http://docs.oracle.com/javase/tutorial/java/generics/)以了解泛型的语法和语义。

如果您查看[AsyncTask 文档](http://developer.android.com/reference/android/os/AsyncTask.html)，您将了解每个参数的含义。

*   第一个标记为“params”，是您的 doInBackground 方法接受的类型。
*   第二个是用于表示进度的类型，如 onProgressUpdate 方法中所采用的。
*   第三个是任务的结果类型，从 doInBackground 返回并由 onPostExecute 接收的类型。

# javascript - 边框间距不起作用

> ID：13238157
> 
> 赞同：0
> 
> 时间：2012-11-05T18:32:30.097
> 
> 标签：javascript, html, css

所以出于某种原因，我无法让我的边框间距起作用。无论我将其设置为什么大小，都不会发生任何事情。我只使用边框作为顶线。

我的 CSS

```
p {
    border-spacing: 5000px;
    text-align: right;
    color: silver;
    font-size: 70%;
    border-style: solid;
    border-top: solid silver;
    border-width: thin;
    border-bottom: none;
    border-right: none;
    border-left: none;
} 
```

我的 HTML

```
<p>COPYRIGHT © ERNST EVERYTHING INC. ALL RIGHTS RESERVED</p> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T18:35:10.533

`border-spacing`仅适用于表格。尝试将其用于您的 CSS：

```
p {
    text-align: right;
    color: silver;
    font-size: 70%;
    border-top: thin solid silver;
    padding-top: 5000px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T18:35:13.253

边框间距仅适用于表格，而不适用于段落。改用填充。

```
p {
 text-align: right;
 color: #C0C0C0;
 font-size: 70%;
 border-top: 1px solid #C0C0C0;
 padding-top: 5000px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T18:35:25.750

`border-spacing`是表的属性，而不是像您正在使用的块对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T18:36:42.353

因为它是`<table>`标签的样式。尝试这个：

```
<style>
   table {
    border: 4px double #333; 
    border-collapse: separate; 
    width: 100%;
    border-spacing: 7px 11px;
   }
   td {
    padding: 5px; 
    border: 1px solid #a52a2a;
   }
  </style>

 <table>
   <tr>
    <td>1</td><td>2</td>
   </tr>
   <tr>
    <td>3</td><td>4</td>
   </tr>
  </table> 
```

# javascript - 将 javascript 对象作为请求参数传递

> ID：13238158
> 
> 赞同：0
> 
> 时间：2012-11-05T18:32:31.580
> 
> 标签：javascript, jsp

有没有办法将javascript对象作为请求参数传递给jsp？

我不想发送多个逗号分隔的字符串。

我的场景是我正在解析一个 json 响应，然后我必须将 json 中的值传递给另一个 jsp。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:33:07.927

您可以重新构建 JSON 字符串（甚至传递原始字符串）。

# git - Git diff 来提醒黑客

> ID：13238161
> 
> 赞同：2
> 
> 时间：2012-11-05T18:32:41.540
> 
> 标签：git, backup, git-diff

我们使用 Git 进行源代码控制，使用 Beanstalkapp.com 作为我们的远程存储库。使用 Beanstalk，我们可以通过 sftp 部署到我们的 Rackspace 云站点帐户（它们不支持 SSH）。虽然这很好用，但我们需要确保我们的网站不会在我们不知情（黑客）的情况下直接在服务器上更新。我知道我们可以对所有目录/文件进行哈希处理以查看是否有变化，但我正在寻找一种更可靠的方法来识别发生了什么变化。我想出了以下方法，我觉得有更多经验的人可以改进它......

以下将在本地机器上的 shell 脚本中，并通过 cron 每小时运行一次：

*   创建新的 Git 分支“备份”
*   使用“git checkout backup”切换到分支
*   使用 SFTP 下载所有文件
*   将文件添加到分支“git add --all”
*   将文件提交到备份分支“git commit -m 'backup process'”
*   差异分支“git diff master..backup”
*   如果发现差异，通过电子邮件发送结果。
*   切换回master分支

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:43:48.520

这是一个有趣的想法，你可以在不创建分支的情况下做到这一点。在您的本地机器上：

*   检查应该部署的任何分支
*   将当前部署的文件从服务器下载到本地机器上的临时目录
*   运行`diff`命令将签出的文件与下载的服务器文件进行比较

当然生成哈希更简单，但是如果有人可以访问我们的服务器文件，那么他们可以更改生成哈希的程序。

# c# - 如何使用接口在 C# 中剥离泛型？

> ID：13238163
> 
> 赞同：0
> 
> 时间：2012-11-05T18:33:00.910
> 
> 标签：c#, generics, inheritance, interface, factories

我目前有一个继承结构，其中方法的返回类型保留为开放泛型，以便每个类都可以从另一个结构的相应级别返回一个对象。例如，假设我们有一个 VehicleFactory，其中 TVehicle:Vehicle 可以 ProduceVehicle TVehicle。我也有 CarFactory:VehicleFactory 其中 TVehicle:Car。

Car 继承自 Vehicle，因此所有这些都是有效的，并且让我知道我的 CarFactory 必须生产 Cars，而我的 Vehicle 工厂可以生产任何类型的车辆。我遇到的问题是，我需要一种方法在 Ford 运行时将 VehicleFactory 实例化为 CarFactory，而在 Wave Runner 运行时将其实例化为 BoatFactory。

我想我可以通过创建一个与 VehicleFactory 的功能相匹配的接口并编写一个返回 IVehicleFactory 的 MakeFactory 方法来做到这一点（它将非通用返回车辆）。由于 CarFactory 返回作为车辆的汽车，它实现了接口，并且在世界上一切都应该是正确的。出乎意料的问题是，尽管 TVehicle 必须是 Vehicle，但 VehicleFactory 无法满足作为 TVehicle 是 Vehicle 而关闭的接口。

有谁知道这是为什么，或者是否有其他方法可以解决这个限制？如果无法直接绕过此限制，是否有任何替代方法可以让一组共享功能确保它始终被实例化为两组或更多组更具体的类之一。（其中 Vehicle 是共享层，Car 和 Boat 是上下文特定层。）

```
class Vehicle
{
}

class Car : Vehicle
{
}

interface IVehicleFactory
{
     Vehicle ProduceVehicle();
}

class VehicleFactory<TVehicle> : IVehicleFactory
    where TVehicle:Vehicle
{
    public virtual TVehicle ProduceVehicle()
    {
    }
}

class CarFactory<TVehicle> : VehicleFactory<TVehicle>
    where TVehicle : Car
{
    public override TVehicle ProduceVehicle()
    {
    }
} 
```

以及使用它的代码

```
static IVehicleFactory CreateVehicleFactory()
{
    if(somecondition)
    {
         Return new CarFactory<Car>();
    }
    else
    {
         Return new BoatFactory<Boat>();
    }
} 
```

添加更多细节以澄清问题。

术语工厂的使用并不意味着工厂模式。它实际上是一个检索“车辆”的存储库。车辆类型是具有公共共享基本代码的库的应用程序特定版本。每个应用程序 Car 和 Boat 的存储库对于相同的检索可能具有不同的逻辑，并且可能依赖于其对象的 Car 或 Boat 变体中的字段。我需要一种方法来构建一个工厂，它可以查看我所在的应用程序的上下文并返回适当的存储库（BoatFactory 或 CarFactory），以便车辆级别的共享代码将正确使用任何应用程序特定的覆盖功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:47:23.367

希望这有帮助：

```
interface IVehicleFactory<out T> where T : Vehicle
{
    T Create();
}

class CarFactory : IVehicleFactory<Car>
{
    public Car Create()
    {
        return new Car();
    }
}

class VehicleFactoryProvider
{
    public IVehicleFactory<T> GetFactoryFor<T>() where T : Vehicle
    {
        throw new NotImplementedException();
    }
}

class Program
{
    public static void Main(string[] args)
    {
        VehicleFactoryProvider provider = new VehicleFactoryProvider();
        var factory = provider.GetFactoryFor<Car>();
        var car = factory.Create();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:27:18.117

你的接口`VehicleFactory<TVehicle>`不满足。`IVehicleFactory`为了满足它，它必须有一个带有签名的方法`Vehicle ProduceVehicle()`。您显然没有具有该签名的方法（但返回派生类型），因此它不起作用。

处理此问题的最简单方法是显式实现接口并返回调用其他方法的结果。界面将得到满足，您仍在生产正确类型的车辆。这类似于您在实现`IEnumerable<T>`接口时通常会做的事情（这需要实现`IEnumerable`接口）。

```
class VehicleFactory<TVehicle> : IVehicleFactory
    where TVehicle:Vehicle
{
    public virtual TVehicle ProduceVehicle()
    {
        throw new NotImplementedException();
    }

    // explicitly implement the interface by
    // returning the value of our actual method
    Vehicle IVehicleFactory.ProduceVehicle()
    {
        return ProduceVehicle();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T19:02:30.863

我在想，这里可能需要对架构进行一次小的重构；从语义上讲，您似乎只需要：

```
public class VehicleFactory
{
    protected Dictionary<Type, ISpecificTransportFactory> _mapping = // initialize

    public Vehicle CreateVehicle<TVehicle>() // any params
    {
        if(_mapping.ContainsKey(typeof(TVehicle))
          return _mapping[typeof(TVehicle)].CreateVehicle(); // any params that need to be passed

        throw new ConfigurationInvalidException("No transportFactory defined for : " + typeof(TVehicle).Name);
    }
} 
```

然后加上一点：

```
public interface ISpecificTransportFactory
{
     Vehicle CreateVehicle();
}

public abstract class FactoryBase<TVehicleType> : ISpecificTransportFactory
    where TVehicleType : Vehicle
{
    public Vehicle CreateVehicle()
    {
        return CreateInstance();
    }

    public abstract TVehicleType CreateInstance();
}

public class CarFactory : FactoryBase<Car>
{
     public override Car CreateInstance()
     {
          return new Car();
     }
} 
```

从理论上讲，您可以按以下方式使用它：

```
public static void Main(string[] args)
{
     var vehicleFactory = new VehicleFactory();

     var vehicle = vehicleFactory.CreateVehicle<Car>();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T15:24:45.573

好吧，虽然我还没有解决方案来让它工作，（至少不是完全），但我想我现在明白了这个问题。我最初的假设之一似乎是不正确的。我的印象是，接口上不太具体的返回类型可以由更具体的类型来实现。即，将 SomeBaseClass 定义为方法的返回类型的接口不能由实现返回 SomeChildClass 的方法的类实现，其中 SomeChildClass 继承自 SomeBaseClass。

协变泛型的使用（通过 out 关键字）确实提供了某种方式来规避这种情况，方法是允许对接口进行泛型定义，但是就我的目的而言，当我遇到需要基于 IList 的结果时（这需要一个不变的类型参数）。

最终，似乎可以做的最好的事情是我可以做到这一点，以便 CarFactory 只知道它正在与车辆一起工作（通过删除 TVehicle 通用参数上的额外 where 条件），需要在 CarFactory 中进行强制转换，但是当曾经 CarCompany 实例化 CarFactory，它仍然可以使其成为 CarFactory，并且客户端代码本身不必担心强制转换。

这并不理想，但我认为这可能是最好的，因为 C# 缺乏协变返回类型。

```
interface IVehicleFactory<TVehicle> where TVehicle:Vehicle
{
    TVehicle SomeMethod();
}

VehicleFactory<TVehicle> : IVehilceFactory<TVehicle> where TVehicle:Vehicle
{
    TVehicle SomeMethod()
    {
    }
}

CarFactory<TVehicle> : IVehicleFactory<TVehicle> where TVehicle:Vehicle
{
    TVehicle SomeMethod()
    {
       ~~Always returns car and uses cast from Vehicle when necessary.
    }
}

class VehicleFactory<TVehicle>
{
   static IVehicleFactory<TVehicle> CreateContextSpecificFactory()
   {
       if(someCondition)
       {
            return new CarFactory<TVehicle>;
       }
   }
}

class CarCompany
{
    CarFactory<Car> carFactory = new CarFactory<Car>;
    Car car = carFactory.SomeMethod();
}

class VehicleCompany
{
    VehicleFactory<Vehicle> vehicleFactory = VehicleFactory<Vehicle>.CreateContextSpecificFactory();
} 
```

# html - 将 3 列布局居中

> ID：13238166
> 
> 赞同：0
> 
> 时间：2012-11-05T18:33:16.070
> 
> 标签：html, css, padding, centering, margins

我无法使用 Google Chrome 运行此代码（我尚未测试其他浏览器）。当它显示时，常规段落显示在最左侧，即使它们应该居中，并且链接在背景中显示间隙，就好像我在 MS Word 中突出显示了字母一样。我已将填充设置为 0 以尝试解决此问题，但无济于事。我究竟做错了什么？

```
<html>

<head>
<link rel="stylesheet" type="text/css" href="My Chars.css">
<title>My Chars</title>
</head>

<body>
    <!--Defines the general styles for the page-->
    <span class = "default" style = "float:left; background-image:url('Paper Mache.jpg'); width:100%; height:100%">

        <!--Empty header-->
        <div id = "header" style = "height:50px; width:100%; align:top">

        </div>
        <br />
        <!--Left links panel-->
        <span class = "default" style = "width:50px; padding:0px;">
            <a href = "original.html">Original Chars</a>
            <br />
            <a href = "updated.html">Updated Chars</a>
            <br />
            <a href = "blended.html">Blended Chars</a>
        </span>
        <br />
        <!--Main body text-->
        <span class = "default">

            <div class = "section_head">
                My character site
            </div>

            <span class = "default">
                This site is dedicated to the various ideas I've had regarding various characters over the years. The site is divided into three main sections, based on where my input starts and stops. These divisions are:
            </span>
            <ul class = "default">
                <li>
                    <div style = "font-weight:bold">
                        Original Characters
                    </div>
                    These are characters created "from scartch". I designed almost everything, from the name to the costume to the character's background, powers, skills, weapons, etc.
                </li>
                <li>
                    <div style = "font-weight:bold;">
                        Updated Characters
                    </div>

                    These are existing charactes whose backstories, skills, and/or powers have been altered to reflect the times, make a more logical or cohesive origin --especially with respect to an archenemy or to merge several versions of that character together.
                </li>
                <li>
                    <div style = "font-weight:bold;">
                        Blended Characters
                    </div>

                    These are two or more different characters that have similar or shared elements in terms of backstory, character themes/arcs, powers/skills/abilities, etc. that have been mixed together so that the best elements of the individual characters produce a new, better "combination character."
                </li>
            </ul>           
            <span class = "default">
                In addition to these three main sections, there are subsections for heroes and villains and supporting cast. There are also divisions between "universes," e.g. DC comics universe vs a movie's universe.
            </span>
        <!--Closing th main body-->
        </span>
    <!--Closing the main page details-->
    </span>

</body>
</html> 
```

在外部样式表中：

```
body
{
    margin: 0;
}
.default
{
    width: 800px;
    height: 100%;
    background-color: white;
    margin-left: auto;
    margin-right: auto;
}

.section_head
{
    background-color: white;
    font-size: large;
    font-weight: bold;
    text-align: center;
    width: 800px;
    margin-left:auto;
    margin-right: auto;
}

a:link
{
    color: red;
    font-weight: bold;
    padding: 0;
    margin: 0;
} 
```

JSFiddle 示例 - [http://jsfiddle.net/L9LvS/](http://jsfiddle.net/L9LvS/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:10:50.403

好吧，我认为您的代码中有一些改进之处。

例如，span-tags 是内联元素，因此不应在其中插入块元素。尝试使用 div- 或 p-tags 代替！
请注意，还有一个名为 inline-block 的新 css-display-property，它通常是浮动的非常简洁的替代品，并且以后在网站上造成的麻烦要少得多。
（[http://bittersmann.de/articles/inline-block/](http://bittersmann.de/articles/inline-block/)）

所以，除非我没有让你的目标正确，否则我认为切换到块元素将解决你的很多问题。
（如果您不想重写 html，也可以先使用 display:block 进行检查）

# iphone - uiscrollview scrollRectToVisible：方法不起作用

> ID：13238167
> 
> 赞同：1
> 
> 时间：2012-11-05T18:33:20.083
> 
> 标签：iphone, ios, xcode, uiscrollview

当用户触摸屏幕时，我想向下滚动屏幕。我在我的 vc 中实现了 touchesBegan:withEvent: 方法，这就是我想出的。

```
 -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
       UIScrollView *scrollView=[[UIScrollView alloc]initWithFrame:CGRectMake(0,0,self.view.frame.size.width, self.view.frame.size.height)];
       scrollView.contentSize=CGSizeMake(self.view.frame.size.width, self.view.frame.size.height);
       [self.view addSubview:scrollView];
       [scrollView scrollRectToVisible:CGRectMake(0,100,self.view.frame.size.width,self.view.frame.size.height) animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:46:45.937

哦，当我将矩形滚动到可见时，我需要确保我的大小保持不变

# html - 该网站如何实现流体/液体布局

> ID：13238169
> 
> 赞同：0
> 
> 时间：2012-11-05T18:33:25.630
> 
> 标签：html, css, fluid-layout, liquid-layout

在这个网站[www.emblematiq.com](http://www.emblematiq.com/)中，布局是流体/液体。我正在查看代码，但似乎无法弄清楚它是如何实现的。看起来像一个固定宽度的布局，`canvas`元素的宽度为 1180px。

好像找不到

1.  CSS 中的任何媒体查询。
2.  宽度是用 px 而不是 % 设置的。
3.  涉及的 JavaScript/jQuery 似乎与它无关。

我确信我遗漏了一些明显的东西，但我一生都找不到负责的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:45:23.507

本页面使用两个系统来实现“流式布局”：

# Javascript

在`main.js`我们可以看到：

```
$(window).bind("smartresize", function( event ) {
    if($("#contactForm")[0]) {enableContact(); if($(window).width() >= 460){doContact();} else {undoContact();}}
    if($("body").hasClass("home")){setTitleHeight();}
}); 
```

smartresize 事件由[jQuery smartresize 插件](https://github.com/louisremi/jquery-smartresize)带来，用于获取限制的调整大小事件（以避免 JS 引擎过载）。

此函数根据窗口宽度启用和禁用 UI 元素，并使用大量使用 jQuery 的自定义函数调整标题高度。

# CSS`media`选择器

在`main.css`我们可以看到，例如：

```
@media only screen and (max-width:1180px) {body{min-width:944px;}}
@media only screen and (max-width:944px) {body{min-width:708px;}}
@media only screen and (max-width:708px) {body{font-size:13px; min-width:472px;}}
@media only screen and (max-width:472px) {body{font-size:11px; line-height:15px; min-width:236px;}} 
```

这些规则根据元素宽度设置不同的属性。

见[w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T18:37:39.820

CSS 包含媒体查询： [http ://www.emblematiq.com/global/main.css](http://www.emblematiq.com/global/main.css)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T18:38:36.413

主[CSS 文件](http://www.emblematiq.com/global/main.css)加载了媒体查询。

它使用 CSS 过渡来使页面对布局更改做出如此好的响应。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T19:15:48.203

这属于“响应式网页设计”这一概括性短语[http://en.wikipedia.org/wiki/Responsive_web_design](http://en.wikipedia.org/wiki/Responsive_web_design)。正如文章所解释的，有多种方法可以实现它。您的网站可能更适合特别是其中一种方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T18:36:37.210

根据其源代码。我认为这是一个CSS。

```
<link rel="stylesheet" href="/global/main.css" /> 
```

# java - 使用 base64 将二进制文件发送到浏览器

> ID：13238172
> 
> 赞同：1
> 
> 时间：2012-11-05T18:33:37.527
> 
> 标签：java, streaming, base64, lotus-domino

我正在编写一个代码来使用 Java POI 创建一个 Excel 文件。我的应用程序在 Lotus Domino Server 上运行。在 domino 中没有办法将创建的 excel 文件流式传输到硬盘上以流式传输到输出。有一个 printwriter 输出，它写入浏览器，但它适用于文本。我想到了一种解决方法，将excel文件转换为Base64文本并将其写入输出打印机。但无论如何我可以指定内容实际上是 Base64 格式的 Excel 文件。我可以使用内容类型，但编码呢？我坚信这是错误的，但请帮忙。

问候， 阿努普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T03:56:18.943

内容类型：application/vnd.ms-excel
传输编码：base64

您应该能够直接使用 MIME 例程完成此操作。我没有深入研究它们，但它们花了很多时间谈论应用程序/* MIME 编码翻译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T20:08:19.437

根据这篇[文章](http://www.techrepublic.com/article/explore-ways-to-pass-a-microsoft-excel-file-to-the-client-side/5072712)，您可以将其作为html表格发送到浏览器，将mime类型设置为“application/vnd.ms-excel”

# c# - 在不使用无限循环的情况下连续扫描内存中的值

> ID：13238176
> 
> 赞同：3
> 
> 时间：2012-11-05T18:34:04.860
> 
> 标签：c#, infinite-loop

我正在扫描程序的内存之外。

代码如下所示：

```
while (true)
{
  read(x)
  if (x changed since last check)
    {
    x = new value;
    .
    .
    .
    }
Thread.Sleep(0);
} 
```

我认为 CPU 一直读取 1 值是一种很大的浪费。不幸的是，我不能给那里更多的睡眠。有什么方法可以降低 CPU 使用率并保持我的 prog 的功能？

这是我用来读取进程内存的函数：

```
 //      BOOL ReadProcessMemory(
            //          HANDLE hProcess,              // handle to the process
            //          LPCVOID lpBaseAddress,        // base of memory area
            //          LPVOID lpBuffer,              // data buffer
            //          SIZE_T nSize,                 // number of bytes to read
            //          SIZE_T * lpNumberOfBytesRead  // number of bytes read
            //          );
            [DllImport("kernel32.dll")]
            public static extern Int32 ReadProcessMemory(IntPtr hProcess, IntPtr lpBaseAddress, [In, Out] byte[] buffer, UInt32 size, out IntPtr lpNumberOfBytesRead);

    public byte[] ReadProcessMemory(IntPtr MemoryAddress, uint bytesToRead, out int bytesRead)
    {
        byte[] buffer = new byte[bytesToRead];

        IntPtr ptrBytesRead;
        ProcessMemoryReaderApi.ReadProcessMemory(m_hProcess, MemoryAddress, buffer, bytesToRead, out ptrBytesRead);

        bytesRead = ptrBytesRead.ToInt32();

        return buffer;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:14:03.243

您不能将代码放入计时器中，并暂停处理（使用 DoEvents() 将暂停当前进程直到下一次迭代），直到另一个程序至少进行更改以更新自身。

这将使系统保持运行。

在较低级别的语言中，检查内存是否已更改通常也在循环中完成。处理器不会主动宣布内存的变化。内存不是输入，就像键盘一样。

您甚至可以在 Thread 中启动此代码，并使用 thread.Priority = ThreadPriority.BelowNormal; 为其赋予低优先级；使系统更加轻松。

这样做您可能会错过已完成的更改。因此，如果这很重要，那么至少具有与其他程序相同的优先级是很重要的。

# iphone - UIWebView loadRequest：在 iOS 6 中因 NSURLErrorTimedout 持续失败

> ID：13238177
> 
> 赞同：5
> 
> 时间：2012-11-05T18:34:11.767
> 
> 标签：iphone, ios, uiwebview, timeout, ios6

存在一个问题，即本地连接`UIWebView` 开始因超时而失败。一旦超时开始，只有硬退出应用程序才能解决它。

超时随机开始，但一旦开始，只有硬退出才能解决它。

因为，硬退出正在解决它，它是一个客户端而不是服务器问题。但是使用可用的 API`UIWebView`我无法找出问题所在。

到目前为止，它仅在 iOS6 iPhone 和 iPad 中可见。我每次都在访问相同的 URL，并且正在缓存 JS、CSS 资源（iOS6 **webview**缓存可能有问题）。

```
//code
//usual webview loading code 
//except I am setting cookies everytime before load request 
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.webview.delegate = self;

    NSString * urlString;

    urlString = @"https://www.myserver.com/";

    NSURL * url = [NSURL URLWithString:urlString];

    // I create and set some cookies here. 
    [[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookies:cookies forURL:self.mobilePageURL mainDocumentURL:self.mobilePageURL];

    [self.webview loadRequest:[NSURLRequest requestWithURL:url]];

}

-(void)webViewDidStartLoad:(UIWebView *)webView
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
}

-(void)webViewDidFinishLoad:(UIWebView *)webView
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
}

-(void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
    if([error.domain isEqualToString:NSURLErrorDomain] && error.code != NSURLErrorCancelled)
    {
        [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

     UIAlertView * alert  =  [[UIAlertView alloc] init];

     NSString * errorMessage = [NSString stringWithFormat:@"%d",error.code];

     [alert setMessage: errorMessage];
     [alert addButtonWithTitle:@"Ok"];
         [alert show];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-01T06:40:10.190

您可以像这样更改 NSURL 代码行吗：

```
NSURL * url = [NSURL URLWithString:rephrasing[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

也许它会解决你的问题

# spring - 如何在 Spring JavaMail 中将 inputstream 转换为 InputStreamsource 或 Datasource 以附加

> ID：13238181
> 
> 赞同：18
> 
> 时间：2012-11-05T18:34:22.533
> 
> 标签：spring, jakarta-mail, inputstream, sftp, jsch

我正在从 Jsch channelSFTP 获取输入流，如下所示。

```
 ChannelSftp channelSftp = (ChannelSftp)channel;
   InputStream input=channelsftp.get(unixPath);//unixPath is path to my file which is on SFTP server 
```

我必须`unixPath`在 Spring javaMail 附件中附加文件。但是当我看到 Spring JavaMail[`addAttachment()`](http://static.springsource.org/spring/docs/1.2.x/api/org/springframework/mail/javamail/MimeMessageHelper.html#addAttachment%28java.lang.String,%20javax.activation.DataSource%29)方法的 API 时，它只需要`InputStreamSource`or `Datasource`。我的问题是我无法从我从 SFTP 通道获取的 inputStream 中获取`InputStreamSource`or 。如何从上面的 inputstream获取or ？提前致谢。`Datasource``InputStreamSource``Datasource`

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-05T18:39:39.660

从文档来看，[`InputStreamSource`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/core/io/InputStreamSource.html)是一个接口。它的一个实现是[`InputStreamResource`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/core/io/InputStreamResource.html)，它有一个构造函数，它接受一个`InputStream`. [这是它的 JavaDoc](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/core/io/InputStreamResource.html#InputStreamResource%28java.io.InputStream%29)。

您应该可以这样设置您的通话：

```
addAttachment("Not porn", new InputStreamResource(inputStream)); 
```

# c++ - C++向量数组运算符计算成本高？

> ID：13238183
> 
> 赞同：9
> 
> 时间：2012-11-05T18:34:26.313
> 
> 标签：c++, linux, g++, profiling

我一直都知道 C++ 的丰富抽象会带来一定的计算开销，但我的印象是，一旦应用了正确的编译器优化，这种开销几乎可以忽略不计。我很好奇这个开销到底有多大，所以我写了一个简单的测试来确定这一点。测试是一个模板函数，它接受一个容器变量，为容器中的每个元素分配一个值，然后在一个单独的循环中对容器中的值求和。该过程重复预设数量的循环。

令我相当不安的是，我发现向量实现花费了标准数组实现的近 3 倍。在对大量编译器优化进行了排列但没有任何成功之后，我决定硬着头皮直接观察汇编代码，看看是什么导致了时间损失。我包含了一些汇编指令，这些指令使我能够准确定位数组索引操作发生的位置并详细检查代码。令我完全困惑的是，我发现向量实现和数组实现之间的区别完全无关紧要。汇编代码可以在[这里](http://pastebin.com/EuqfRya2 "这里")找到。

这是我用来构建二进制文件的命令：

```
g++ -O3 vectorArrayOp.cpp -o vectorArrayOp 
```

这是我用来构建程序集的命令：

```
g++ -O3 -DTAGASM vectorArrayOp.cpp -S -o vectorArrayOp.s 
```

这是我在运行二进制文件时观察到的输出：

```
gmurphy@interloper:Reference$ ./vectorArrayOp 
Duration 0.027678
Duration 0.090212 
```

当您在标准输出流中包含计算值时，结果不会改变，为了清楚起见，我删除了它们。我的系统规格如下（我在我的 AMD 上也看到了相同的结果）：

```
Linux 3.2.0-32-generic x86_64 GNU/Linux
Intel(R) Xeon(R) CPU X5550  @ 2.67GH
g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 
```

代码如下，如果有人可以让我了解为什么当程序集如此相似时时间如此不同，我将不胜感激。

```
#include <vector>
#include <iostream>
#include <sys/time.h>
#ifdef TAGASM
#define ASMTAG(X) asm(X)
#else
#define ASMTAG(X)
#endif 
enum { DataSize=1024, NumTests=(1<<16) } ;
struct ReturnValue {ReturnValue(float _d, int _t):d(_d), t(_t){} float d; int t;} ;
template <typename Container, typename Type>
ReturnValue runTest(Container &c, Type value)
{
    int tagValue(0);
    timeval startTime;
    gettimeofday(&startTime, NULL);
    for(int i=0; i<NumTests; i++)
    {
        for(int j=0; j<DataSize; j++)
        {
            ASMTAG("preassign");
            c [j] = value ;
            ASMTAG("postassign");
        }
        for(int j=0; j<DataSize; j++)
        {
            ASMTAG("preadd");
            tagValue += c [j] ;
            ASMTAG("postadd");
        }
    }
    timeval endTime;
    gettimeofday(&endTime, NULL);
    float duration((endTime.tv_sec-startTime.tv_sec)+
                   (endTime.tv_usec-startTime.tv_usec)/1000000.0);
    //tagValue is returned in case the optimising compiler might try to remove the loops
    return ReturnValue(duration, tagValue) ;
}
int main()
{
    int *arrayData = new int [DataSize];
    std::vector <int> vectorData(DataSize, 0) ;
    ReturnValue ad = runTest(arrayData, 1);
    ReturnValue vd = runTest(vectorData, 1);
    std::cout<<"Duration "<<ad.d<<std::endl;
    std::cout<<"Duration "<<vd.d<<std::endl;
    delete [] arrayData;
    return 0 ;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T18:57:23.580

```
% g++-4.4 -O3 vectorArrayOp.cpp -o vectorArrayOp
% ./vectorArrayOp
Duration 0.008581
Duration 0.008775
% g++-4.5 -O3 vectorArrayOp.cpp -o vectorArrayOp
% ./vectorArrayOp
Duration 0.008634
Duration 0.008588
% g++-4.6 -O3 vectorArrayOp.cpp -o vectorArrayOp
% ./vectorArrayOp
Duration 0.01731
Duration 0.081696
% g++-4.7 -O3 vectorArrayOp.cpp -o vectorArrayOp
% ./vectorArrayOp
Duration 0.008618
Duration 0.008612
% clang++ -O3 vectorArrayOp.cpp -o vectorArrayOp
% ./vectorArrayOp
Duration 0.066484
Duration 0.066435 
```

基于这些结果，这可能是 g++ 4.6 中特定于编译器的性能回归。

# asp.net - 网页就像页面刷新或幻灯片一样

> ID：13238184
> 
> 赞同：1
> 
> 时间：2012-11-05T18:34:30.383
> 
> 标签：asp.net

我有一系列显示某些统计数据的页面。我想创建在特定时间间隔内导航到单个页面上的每个页面的 asp.net 页面。（如幻灯片）我应该如何做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:38:16.650

JavaScript 和 IFRAME 怎么样？您可以每隔一段时间使用 JavaScript 代码（在 ASP.NET 页面中）更改 IFRAME 的目标

**更新——代码示例**

```
<html>
<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <script type="text/javascript">
        var s = {
            windowIndex: 0,
            links : ["http://www.bing.com","http://msdn.com","http://url.com"],
            switchFrameSrc : function () {
                var newurl = s.links[s.windowIndex];        
                $(".uriLabel").text(newurl);
                $(".frame").attr("src",newurl);
                s.windowIndex++;    
                if (s.windowIndex >= s.links.length) {
                    s.windowIndex = 0; // reset loop    
                }
            }
        };
        $(document).ready(function () { 
            s.switchFrameSrc();
            window.setInterval(function () { s.switchFrameSrc(); }, 5000);
            // set interval, interval in milliseconds 
        });
    </script>
</head>
<body>
    <div class="uri"><span class="uriLabel">URL goes here</span></div>

    <IFRAME class="frame" src="http://www.url.com" width="800" height="600"></IFRAME>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:39:04.267

据我所知，实现此目的的唯一方法是为每个要显示的页面设置一个“iframe”，并使用 jQuery 或 Javascript 切换可见性。

希望这可以帮助！！

# jquery - 在同一个父 div 中显示子 div11 作为另一个子标签 p

> ID：13238189
> 
> 赞同：1
> 
> 时间：2012-11-05T18:35:01.530
> 
> 标签：jquery, hide, parent, show

我想通过单击父div（1或2或3）中的（p）标签来隐藏p，p将消失，div div（11或12或13）p将按照消失的p出现那个部门。

我如何在不使用 ID 名称的情况下做到这一点？

```
<!DOCTYPE html>
<html>
<head>
<script src="jquery.js"></script>
<script>
$(document).ready(function(){
    $("div p").click(function(){
        $(this).hide();

    //What do I need to put here?? to show the <p> in the <div id="11 or 12 or 13"> according to the <p> that is clicked

    });

});

</script>
</head>
<body>

<div class = "" id="1">
  <p>If you click on me, I will disappear.</p>  // BY CLICKING THIS P HIDE IT THEN
  <div id="11" style="display:none;">
    <p>You have clicked me<p>                   // THEN SHOW THIS P
  </div>
</div> 
<span> HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH </span>

<div id="2">
 <p>Click me away!</p>
 <div id="22" style="display:none;">
   <p>You have clicked me too!<p>
 </div>
</div>
<span> HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH </span>

<div id="3">
 <p>Click me too!</p>
 <div id="33" style="display:none;">
   <p>You have clicked me three!<p>
 </div>
</div>
<span> HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH </span>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:38:30.220

我认为您想要这样的东西，请参阅jquery doc 中的[.next()](http://api.jquery.com/next/)或[.nextAll()](http://api.jquery.com/nextAll/)。

```
$("div p").click(function(){
            $(this).hide().next().show();
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T18:39:58.787

为了制作 div，你可以在 p 旁边使用 $(this).next().show();

[http://api.jquery.com/next/](http://api.jquery.com/next/)

# python - C-Python 扩展中的全局 PyObject* 变量

> ID：13238192
> 
> 赞同：3
> 
> 时间：2012-11-05T18:35:20.297
> 
> 标签：python, c

在我的 Python 程序的 C 扩展中，我试图通过将主 C 函数的两个输入（称为数百万次）设置为全局变量来提高性能，因为它们不会经常更改，所以我不不必继续使用 lambda 包装器从 Python 将它们提供给 C 函数（这会浪费大量时间）。我的代码看起来像这样。首先，我在文件顶部声明全局变量：

```
unsigned char* splitArray;
PyObject* wordCmp; 
```

然后使用 Python API 函数来设置它们：

```
static PyObject* py_set_globals(PyObject *self, PyObject *args)
{
    free(wordCmp);
    free(splitArray);

    char* splitChars;
    PyObject* wordC;

    if (!PyArg_ParseTuple(args, "sO", &splitChars, &wordC))
        return NULL;

    wordCmp = (PyObject*)malloc(sizeof(PyObject));
    memcpy(wordCmp, wordC, sizeof(PyObject));
    splitArray = splitchars_to_mapping(splitChars);

    return Py_BuildValue("");
} 
```

在这种情况下，splitArray 被分配给一个 128 个字符的数组，该数组在函数 splitchars_to_mapping 中进行了 malloc'ed，wordCmp 是一个传递给 C 的 Python 函数对象。无论如何，据我所知，char* splitArray 有效作为一个全局变量很好，但是当我后来尝试使用 PyEval_CallObject 调用 wordCmp 时，Python/C 崩溃了。所以我有两个问题：

1.  当我尝试在函数开头释放未初始化的指针 wordCmp 和 splitArray 时，为什么 C 不会立即崩溃？
2.  当我将 wordCmp 正确存储在堆上并将对它的引用保存为全局时，为什么我以后无法调用 wordCmp？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:43:08.577

至于第一个问题，为什么在释放未初始化的全局变量时它不会崩溃，那是因为全局（和静态）变量被初始化为`zero`程序加载时（[由标准保证](https://stackoverflow.com/a/6212973/1157444)）和调用时`free()`使用`NULL`（或零) 它什么也不做。

从人[免费（1）](http://linux.die.net/man/1/free)：

> free(ptr) 之前已经被调用过，会发生未定义的行为。 **如果 ptr 为 NULL，则不执行任何操作。**

**编辑**：您的第二个问题与您尝试复制 a`PyObject`并且您不应该这样做的事实有关，因为该`PyObject`结构可能包含指针并且您无法进行*深度*复制，因为您无权访问该结构，但是，您应该增加引用计数并保留引用以供以后使用，请注意，当您使用时`O`，引用计数*不会*增加，来自[文档](http://docs.python.org/2/c-api/arg.html)：

> O (object) [PyObject *] 将 Python 对象（无需任何转换）存储在 C 对象指针中。C 程序因此接收传递的实际对象。**对象的引用计数不会增加。**

所以你应该自己增加引用，看这个[例子](http://docs.python.org/2/extending/extending.html#calling-python-functions-from-c)

```
static PyObject *my_callback = NULL;

static PyObject* my_set_callback(PyObject *dummy, PyObject *args)
{
    PyObject *result = NULL;    
    if (PyArg_ParseTuple(args, "O:set_callback", &my_callback)) {
        if (!PyCallable_Check(my_callback)) {
            PyErr_SetString(PyExc_TypeError, "parameter must be callable");
            return NULL;
        }
        Py_XINCREF(my_callback); /* Add a reference to new callback */           
        Py_INCREF(Py_None);      /* Boilerplate to return "None" */
        result = Py_None;
    }
    return result;
} 
```

# c# - 由于可兑换性错误，无法使用 WebAuthenificationBroker

> ID：13238195
> 
> 赞同：3
> 
> 时间：2012-11-05T18:35:42.860
> 
> 标签：c#, windows-8

我正在尝试在 Visual Studio Express 中制作一个连接到 Facebook 的应用程序。问题是在这段代码中：

```
Windows.Security.Authentication.Web.Result WebAuthenticationResult = WebAuthenticationBroker.AuthenticateAsync(
                                                        WebAuthenticationOptions.None,
                                                        StartUri,
                                                        EndUri); 
```

...我想我已经实现了示例中所示的方法，但我不断收到以下错误：

> 错误 1 ​​无法将类型“Windows.Foundation.IAsyncOperation”隐式转换为“Windows.Security.Authentication.Web.WebAuthenticationResult”R:\Users\JesúsAndres\Documents\Visual Studio 2012\Projects\FBook\FBook\MainPage.xaml.cs 41 99 F书

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:23:53.500

AuthenticateAsync 方法不直接返回身份验证结果，而是返回一个 IAsyncOperation。您可以使用`await`C# 中的关键字使异步调用同步。

```
Windows.Security.Authentication.Web.Result WebAuthenticationResult = await WebAuthenticationBroker.AuthenticateAsync(WebAuthenticationOptions.None, StartUri, EndUri); 
```

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/hh156528.aspx](http://msdn.microsoft.com/en-us/library/hh156528.aspx)和[http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)。

# mysql - 仅在系统启动时出现 MAMP 1045 错误

> ID：13238201
> 
> 赞同：1
> 
> 时间：2012-11-05T18:36:06.590
> 
> 标签：mysql, mamp, lamp

我的问题似乎与这个未回答的问题有关：[https ://stackoverflow.com/questions/10219839/mamp-1045-error](https://stackoverflow.com/questions/10219839/mamp-1045-error)

我不确定我是否可以在那里发表评论，或者我是否必须开始一个新问题，如果我没有在正确的位置发帖，请提前道歉。

无论如何，MAMP 在我的启动项中，所以当我启动 OSX 时它会自动打开。（我实际上是通过延迟启动器启动它——我想知道它是否因为启动太早而失败，但不管它是尽快启动还是在 30 秒后启动，它仍然存在这个问题。）当 MAMP 启动后系统重新启动，它给了我以下错误：

> 检查 MySQL 数据库失败
> 
> 错误信息：
> 
> /Applications/MAMP/Library/bin/mysqlcheck：出现错误：1045：尝试连接时用户'root'@'localhost'的访问被拒绝（使用密码：YES）

MAMP 指示灯显示 Apache Server 和 MySQL Server 已开启。如果我转到本地主机，它会显示默认的 MAMP“虚拟主机已成功设置”页面，而不是我映射到本地主机的实际虚拟主机，并且我的虚拟主机都不起作用。

**如果我单击 Ok，然后单击 Stop Servers，然后单击 Start Servers，它启动没有问题，我可以像往常一样使用 MAMP。这只会在我启动操作系统时发生，当我重新启动 MAMP 本身时，MAMP 总是会再次工作。**

这是我的 mysql_error_log.err：

```
121105 10:15:31 mysqld_safe Starting mysqld daemon with databases from /Applications/MAMP/db/mysql
121105 10:15:32 [Warning] You have forced lower_case_table_names to 0 through a command-line option, even though your file system '/Applications/MAMP/db/mysql/' is case insensitive.  This means that you can corrupt a MyISAM table by accessing it with different cases. You should consider changing lower_case_table_names to 1 or 2
121105 10:15:32 [Note] Plugin 'FEDERATED' is disabled.
121105 10:15:32 InnoDB: The InnoDB memory heap is disabled
121105 10:15:32 InnoDB: Mutexes and rw_locks use GCC atomic builtins
121105 10:15:32 InnoDB: Compressed tables use zlib 1.2.3
121105 10:15:32 InnoDB: Initializing buffer pool, size = 128.0M
121105 10:15:32 InnoDB: Completed initialization of buffer pool
121105 10:15:32 InnoDB: highest supported file format is Barracuda.
121105 10:15:33  InnoDB: Waiting for the background threads to start
121105 10:15:34 InnoDB: 1.1.5 started; log sequence number 1595675
121105 10:15:34 [Note] Event Scheduler: Loaded 0 events
121105 10:15:34 [Note] /Applications/MAMP/Library/bin/mysqld: ready for connections.
Version: '5.5.9'  socket: '/Applications/MAMP/tmp/mysql/mysql.sock'  port: 3306  Source distribution 
```

我检查了我的用户名和密码在 /Applications/MAMP/bin 文件夹中的所有脚本中是否正确（它是正确的），甚至使用重置它

```
/Applications/MAMP/bin/mysql4/bin/mysqladmin -u root -p password <NEWPASSWORD> 
```

以确保它确实是正确的密码。我也关注了之前回答者关于跑步的评论

```
GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' WITH GRANT OPTION; 
```

执行得很好，但没有解决问题。

我是否将 MAMP 设置为使用默认 Apache/MySQL 端口或默认 MAMP 端口都没有关系，因此我将其设置为前者。

有任何想法吗？？当我停止和启动 MAMP 时，它会再次工作，但是每次启动或重新启动计算机时都必须执行该过程真的很烦人，因为每次停止 MAMP 时都必须输入密码。：/

**编辑：**

卸载/重新安装了 MAMP，它仍然在做同样的事情，除了现在它在启动时也会询问我的密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:51:38.463

在文本编辑器中打开`/Applications/MAMP/bin/checkMysql.sh`并更改`-proot`为`-p [yourpass]`

# asp.net-mvc-4 - ASP.NET SimpleMembershipProvider 的自动迁移

> ID：13238203
> 
> 赞同：43
> 
> 时间：2012-11-05T18:36:16.897
> 
> 标签：asp.net-mvc-4, entity-framework-5, entity-framework-migrations

所以我尝试在我的新 MVC 4 项目中使用自动迁移，但不知何故它不起作用。我一步一步[地关注了这篇博文。](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/)

我已将更改添加到`UserProfile`帐户模型（`NotaryCode`字段）：

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public int NotaryCode { get; set; }
} 
```

然后我在包管理器控制台上写了`enable-migrations`一个配置类（从 继承`DbMigrationsConfiguration<Web.Models.UsersContext>`）然后我将类填充为：

```
public Configuration()
{
    AutomaticMigrationsEnabled = true;
}

protected override void Seed(Atomic.Vesper.Cloud.Web.Models.UsersContext context)
{
    WebSecurity.InitializeDatabaseConnection(
            "DefaultConnection",
            "UserProfile",
            "UserId",
            "UserName", autoCreateTables: true);

    if (!Roles.RoleExists("Atomic"))
        Roles.CreateRole("Atomic");

    if (!Roles.RoleExists("Protocolista"))
        Roles.CreateRole("Protocolista");

    if (!Roles.RoleExists("Cliente"))
        Roles.CreateRole("Cliente");

    string adminUser = "randolf";

    if (!WebSecurity.UserExists(adminUser))
        WebSecurity.CreateUserAndAccount(
            adminUser,
            "12345",
            new { NotaryCode = -1 });

    if (!Roles.GetRolesForUser(adminUser).Contains("Atomic"))
        Roles.AddUsersToRoles(new[] { adminUser }, new[] { "Atomic" });
} 
```

然后我尝试运行`update-database -verbose`，但这不起作用。我的意思是，这是输出：

**数据库中已经有一个名为“UserProfile”的对象。**

```
PM> update-database -verbose
Using StartUp project 'Web'.
Using NuGet project 'Web'.
Specify the '-Verbose' flag to view the SQL statements being applied to the target database.
Target database is: 'VesperCloud' (DataSource: .\SQLSERVER, Provider: System.Data.SqlClient, Origin: Configuration).
No pending code-based migrations.
Applying automatic migration: 201211051825098_AutomaticMigration.
CREATE TABLE [dbo].[UserProfile] (
    [UserId] [int] NOT NULL IDENTITY,
    [UserName] [nvarchar](max),
    [NotaryCode] [int] NOT NULL,
    CONSTRAINT [PK_dbo.UserProfile] PRIMARY KEY ([UserId])
)
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'UserProfile' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at System.Data.Entity.Migrations.DbMigrator.ExecuteSql(DbTransaction transaction, MigrationStatement migrationStatement)
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.ExecuteSql(DbTransaction transaction, MigrationStatement migrationStatement)
   at System.Data.Entity.Migrations.DbMigrator.ExecuteStatements(IEnumerable`1 migrationStatements)
   at System.Data.Entity.Migrations.Infrastructure.MigratorBase.ExecuteStatements(IEnumerable`1 migrationStatements)
   at System.Data.Entity.Migrations.DbMigrator.ExecuteOperations(String migrationId, XDocument targetModel, IEnumerable`1 operations, Boolean downgrading, Boolean auto)
   at System.Data.Entity.Migrations.DbMigrator.AutoMigrate(String migrationId, XDocument sourceModel, XDocument targetModel, Boolean downgrading)
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.AutoMigrate(String migrationId, XDocument sourceModel, XDocument targetModel, Boolean downgrading)
   at System.Data.Entity.Migrations.DbMigrator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
   at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
   at System.Data.Entity.Migrations.DbMigrator.Update(String targetMigration)
   at System.Data.Entity.Migrations.Infrastructure.MigratorBase.Update(String targetMigration)
   at System.Data.Entity.Migrations.Design.ToolingFacade.UpdateRunner.RunCore()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run()
ClientConnectionId:a7da0ddb-bccf-490f-bc1e-ecd2eb4eab04
**There is already an object named 'UserProfile' in the database.** 
```

I know the object exists. I mean, I'm try to use automatic-migrations to, precisely, modify and run without recreating manually the DB. But somehow this isn't working.

I look the MSDN documentation and found the property:

```
AutomaticMigrationDataLossAllowed = true; 
```

But setting it to true doesn't change anything. I guess I'm missing something but somehow doesn't find what. Any idea?

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-11-09T08:56:31.917

`update-database -verbose` doesn't work because your model has been changed after your data table already existed.

First, make sure there are no changes to the UserProfile class. Then, run:

`Add-Migration InitialMigrations -IgnoreChanges`

This should generate a blank "InitialMigration" file. Now, add any desired changes to the UserProfile class. Once changes are added, run the update command again:

`update-database -verbose`

Now the automatic migration will be applied and the table will be altered with your changes.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T19:38:46.113

What it looks like happened here is that you enabled migrations, then ran the application. By running the application before using the UpdateDatabase command, EntityFramework would have created and populated the database but since when you enabled migrations the database didn't exist, it didn't create the InitialCreate migration. Migrations still thinks that you have an empty database and wants to create all of the objects in your model

What you can try is to either re-enable migrations which will generate an InitialCreate migration that reflects the current state of the database. In this case I would save the changes you made to the seed method than run "Enable-Migrations -Force", this should recreate the migration and generate an IntialCreate migration. You can then repopulate your seed method and run the UpdateDatabase command.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-20T10:54:39.033

I had same and sorted in different way. Went to my local db deleted the UserProfile and other tables having foreign key constraints webpages_Membership,webpages_OAuthMembership,webpages_Roles,webpages_UsersInRoles tables. All these will recreate when you run update-database -verbose.

# vb.net - 获取 Bing 背景 VB.Net

> ID：13238216
> 
> 赞同：0
> 
> 时间：2012-11-05T18:37:03.797
> 
> 标签：vb.net

基本上，我要做的是从`bgDiv`Bing 上的元素中获取背景图像并将其用作表单背景。这就是我到目前为止所拥有的。

```
Try
    With bingCheck
        Dim bgDiv As HtmlElement = .Document.GetElementById("bgDiv")
        Dim imgUrl As String = bgDiv.Style("background-image").ToString

        Dim request As HttpWebRequest = DirectCast(HttpWebRequest.Create(imgUrl), HttpWebRequest)
        Dim response As Net.HttpWebResponse = DirectCast(request.GetResponse, Net.HttpWebResponse)
        Dim grabbedImage As Image = Image.FromStream(response.GetResponseStream)
        response.Close()

        Me.BackgroundImage = grabbedImage
        Me.Update()
    End With
Catch ex As Exception
End Try 
```

这似乎不起作用，所以关于我如何做到这一点还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T21:35:18.200

首先要做的事情：您得到的错误是因为您尝试在字符串上调用索引器（使用字符串键），并且它只有一个整数索引器。您可以通过查看以下内容了解这一点[`System.Windows.Forms.HtmlElement.Style property`](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmlelement.style.aspx)：

> 获取或设置当前元素的以逗号分隔的样式列表。

它将返回当前元素上的所有样式，但作为一个长字符串。还有另外两种以不同方式获取值的方法，见下文。

查看 Style 属性内容后，它包含以下内容：

> "左：0px；上：-0.5px；宽：1000px；高：563px；不透明度：1；背景图像：url("http://be.bing.com/az/hprichbg?p=rb%2fPenzanceHarbor_ROW9689010992_1366x768\. jpg");"

您可以使用此方法轻松检索值：

```
Dim bgimage As String
bgimage = Array.Find(Of String)(bgDiv.Style.Split("; "),
                                Function(s As String) s.Contains("background-image")) _ 
          .Replace("background-image:", "") _
          .Trim() 
```

但是还有一个问题，见最后一段。

关于其他两种方法。

第一种方法是调用[`HtmlDocument.InvokeScript(String, Object()) Method`](http://msdn.microsoft.com/en-us/library/4b1a88bz.aspx). 这将使用提供的参数执行给定的 JavaScript 函数并返回该函数的（返回）值。现在，我们可以使用哪个功能？好吧，我们可以用`eval`这个表达式来返回`bgDiv`元素的背景图像。代码将如下所示：

```
Dim bgimage As String
bgImage = bingCheck _
          .Document _
          .InvokeScript("eval",
                        {"window.getComputedStyle(document.getElementById(""bgDiv"")).backgroundImage"}) 
```

它返回以下值：

> url("http://be.bing.com/az/hprichbg?p=rb%2fPenzanceHarbor_ROW9689010992_1366x768.jpg")

现在我认为从那里提取 URL 非常简单。

现在第二种方法是访问 COM 对象本身。这需要你引用`Microsoft HTML Object Library`（它是一个 COM 引用！！）。之后，您可以使用`mshtml`命名空间。

在代码中检索 bgDiv 元素后，我们将 DomElement 转换为 COM 对象，我们可以通过那里访问属性。以下代码可以做到这一点：

```
Dim bgDiv As HtmlElement = bingCheck.Document.GetElementById("bgDiv")
Dim bgimage As String = DirectCast(bgDiv.DomElement, mshtml.IHTMLElement2) _
                        .currentStyle _
                        .backgroundImage 
```

在 bgimage 变量中，您会发现与前一种方法相同的输出：

> url("http://be.bing.com/az/hprichbg?p=rb%2fPenzanceHarbor_ROW9689010992_1366x768.jpg")

我之前说的问题是什么？好吧，您不能使用 ，[`WebBrowser.DocumentCompleted event`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documentcompleted.aspx)因为尚未（并非总是）应用 CSS，因此该`getComputedStyle`函数（或`Style`属性）将为您`Nothing`提供背景图像的回报。您可以使用计时器来查找属性，也可以使用在页面加载后手动单击的按钮（并在单击事件中检索背景图像）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T21:36:20.263

根据 MSDN，HtmlElement 的样式属性是一个字符串。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.htmlelement.style.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmlelement.style.aspx)

它是由分号分隔的名称值对。

`style-name1:value1;...;[style-nameN:valueN;]`

所以你需要解析出你需要的值。

```
Dim styles as String() = bgDiv.Style.Split(";") 
```

# java - 用于对输出进行排序的命令行参数

> ID：13238218
> 
> 赞同：0
> 
> 时间：2012-11-05T18:37:13.390
> 
> 标签：java, command-line-arguments

我有一个库存管理系统，它读取 Items 和 Stores 的 .txt 文件和一个名为 Stocks 的桥实体，并输出一个 .txt 文件，该文件显示基于这三个文件的信息。

它在底部。

```
public class Ims {

    private static Logger LOG = Logger.getLogger(Ims.class);

    public static void main(String[] args) throws Exception {
        PropertyConfigurator.configure("log.properties");

        LOG.debug("main()");

        File itemsFile = new File("items.txt");
        File storesFile = new File("stores.txt");
        File stockFile = new File("stocks.txt");

        if (!itemsFile.exists()) {
            LOG.error("Required 'items.txt' is missing");
        } else if (!storesFile.exists()) {
            LOG.error("Required 'stores.txt' is missing");
        }

        new Ims(itemsFile, storesFile, stockFile);
    }

    public Ims(File itemsFile, File storesFile, File stockFile) {
        LOG.debug("Ims()");
        HashMap<String, Item> items = null;
        HashMap<String, Store> stores = null;
        List<Stock> stocks = null;

        try {
            items = InventoryReader.read(itemsFile);
            stores = StoresReader.read(storesFile);
            stocks = StockReader.read(stockFile);
        } catch (ApplicationException e) {
            LOG.error(e.getMessage());
            return;
        }

        // Collections.sort(items, new CompareByPrice()); <-- this should sort it. How do I do this as a command line argument?

        File inventory = new File("inventory.txt");
        PrintStream out = null;
        try {
            out = new PrintStream(new FileOutputStream(inventory));
            InventoryReport.write(items, stores, stocks, out);
        } catch (FileNotFoundException e) {
            LOG.error(e.getMessage());
        }
    }
} 
```

我希望能够使用命令行参数以多种方式对读取的参数进行排序。

例如：

```
java –jar Ims.jar by_value desc total 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T18:42:47.190

您在 java 调用中放入的命令行参数出现在方法的`args`参数中 `Main`。

所以，你会有

```
 args[0] = "by_value"
 args[1] = "desc"
 args[2] = "total" 
```

更新：如果您的命令行很复杂（标志、任何顺序的参数/缺失），有一个 Apache CLI（命令行界面）库可以帮助处理它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T18:43:15.040

你有什么问题？阅读实际的命令行参数？您可以使用 args[] 数组来执行此操作，然后只需为您允许对排序执行任何操作的所有不同命令行参数放置一个开关。

args[] 数组内置于多种语言（包括 java）中，允许您轻松访问通过命令行调用某些内容时传入的参数。例如，我相信您的示例，您可以通过 args[0] 读取“by_value”，通过 args[1] 读取 desc，通过 args[2] 读取总计等。

因此，为了澄清我在下面的评论中所说的话，你最终会想要这样的东西：

```
if (args.length > 0)
{
  for (int i=0; i<args.length;i++)
  {
     switch(args[i])
     {
        case <whatever your keyword is>: code for this keyword here
                                      break;
        case <next keyword>: code for next keyword
                             break;
     }
  }
} 
```

等等

很抱歉在格式和东西方面有任何奇怪之处，我有一段时间没有使用 Java，但这应该能让你继续前进。

请注意，如果这是您第一次使用开关，请记住您始终必须有一个默认值。这通常是某种“无效输入”消息，就像您在 javadocs 中的该示例中看到的那样。

# sql-server - SQL Server Express 无法连接错误：28 - 服务器不支持请求的协议

> ID：13238219
> 
> 赞同：61
> 
> 时间：2012-11-05T18:37:18.923
> 
> 标签：sql-server, network-protocols

我无法从我的服务器（Windows 2008 R2）连接到我的本地 SQL Server Express（2012，但版本无关紧要）以在其上使用工具（如果您想知道 APEX SQL Data Diff）。我可以很好地浏览网络服务器，并从可用服务器的下拉列表中选择我的本地实例，但是当我去搜索服务器上的表时，它会超时并显示此错误消息（SSMS 也是如此）。

> *建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：28 - 服务器不支持强文本请求协议）（Microsoft SQL Server，错误：-1）*

我已启用防火墙 - 不是这样。

我已经允许远程连接 - 不是这样。

SQL Server Browser 服务已打开并通过防火墙 - 不是这样。

我可以使用相同的工具很好地连接***到***服务器，但从***服务器***失败。

有任何想法吗？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-11-05T18:37:18.923

感谢[这篇文章](http://blogs.msdn.com/b/sql_protocols/archive/2005/10/22/sql-server-2005-connectivity-issue-troubleshoot-part-i.aspx)让我在某个地方收到错误消息。问题是在 SQL Server Express 中默认禁用了必要的网络协议。我必须在本地访问 Sql Server 配置管理器并打开“命名管道”和“TCP/IP”。之后，您需要重新启动 SQL Server Browser 和 SQL Server(instance) 服务。

![SQL Server 配置管理器](../Images/88593ae2d7ea36ca1a231853fc552697.png)

虽然我不必这样做，但您可能还需要在“协议”下的“SQL Server 网络配置”中检查需要在那里调整的设置。

希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-05-19T10:45:12.423

SQL 配置管理器：

[![SQL 配置管理器](../Images/73d5487a49a36d2fdd1a075eb026e07c.png)](https://i.stack.imgur.com/6Udgz.png)

图片在链接面板上选择了错误的组：它应该是 SQL Server Network Configuration → Protocols for `SQLEXPRESS`.

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-12-31T19:39:32.717

不要忘记在“SQL Server Network Configuration”-> Protocols for **YourInstance**下进行检查。我是个白痴，也忘了看那里。

# objective-c - “指向使用 'NSNumber *' 类型的表达式初始化 'int' 的整数转换的不兼容指针”

> ID：13238223
> 
> 赞同：19
> 
> 时间：2012-11-05T18:37:29.130
> 
> 标签：objective-c, ios

我怀疑这是非常简单的事情，但我正在尝试获取我存储在字典中的 int ，而我正在使用的行是 this..

```
 int mapX = [NSNumber numberWithInt:[templateObject valueForKey:@"mapX"]]; 
```

但它给了我错误......

> 指向整数转换的不兼容指针将“id”发送到“int”类型的参数

和

> 指向使用“NSNumber *”类型表达式初始化“int”的整数转换的不兼容指针；

如果我尝试...

```
NSNumber *mapX = [NSNumber numberWithInt:[templateObject valueForKey:@"mapX"]]; 
```

我基本上得到了同样的错误。我知道我可能只是使用了错误的语法，但我不确定如何编写它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-05T18:38:52.390

几点：

*   `[NSNumber numberWithInt:[templateObject valueForKey:@"mapX"]];`

    返回一个`NSNumber*`，您试图将其存储在一个 int 中。

*   `NSNumber* mapX = [NSNumber numberWithInt:[templateObject valueForKey:@"mapX"]];`

    也不会工作，因为`[templateObject valueForKey:@"mapX"]`不是`int`. 您只能将对象存储在 中`NSDictionary`，而不能存储原始类型。

您可能想尝试（假设我的类型正确）

```
NSNumber* mapXNum = [templateObject valueForKey:@"mapX"];
int mapX = [mapXNum intValue]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-07T16:52:29.117

```
 int mapX = (int)[[templateObject valueForKey:@"mapX"] integerValue]; 
```

上述解决方案假设 templateObject valueForKey:@"mapX" 返回一个 NSNumber。如果没有，并且您想将其转换为 NSNumber，请改用此解决方案：

```
 int mapX = (int)[(NSNumber *)[templateObject valueForKey:@"mapX"] integerValue]; 
```

ObjC 中的类型转换是最差的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T18:39:21.987

```
int mapX = [NSNumber numberWithInt:[templateObject valueForKey:@"mapX"]]; 
```

没有意义有两个原因（想一想），但是

```
NSNumber *mapX = [NSNumber numberWithInt:[[templateObject valueForKey:@"mapX"] intValue]]; 
```

应该工作假设`[templateObject valueForKey:@"mapX"]`是一个`NSNumber`或一个`NSString`实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T18:46:08.363

你有两个问题。首先，`[templateObject valueForKey:@"mapX"]`返回一个`id`，它是一个指向 Objective-C 对象的指针，而不是一个`int`. 并且由于该`-[NSNumber numberWithInt:]`方法需要一个`int`参数，因此尝试将 an 转换`id`为 an`int`是错误的。

第二个问题是您尝试将 的结果转换为`[NSNumber numberWithInt:...]`，`int`这又是同样的问题：`-[NSNumber numberWithInt:]`返回一个指向`NSNumber`对象的指针，该对象不是`int`。

假设存储在字典中的值实际上是 an `NSNumber`，那么您真正想要做的是：

```
NSNumber *mapXObj = [templateObject valueForKey:@"mapX"];  // Implicit cast from id to NSNumber*
int mapX = [mapXObj intValue]; 
```

或者更简洁地说：

```
int mapX = [[templateObject valueForKey:@"mapX"] intValue]; 
```

# xslt - 与 Xsl 连接

> ID：13238224
> 
> 赞同：0
> 
> 时间：2012-11-05T18:37:30.183
> 
> 标签：xslt, sharepoint-2010, web-parts

让我先说我是 Xsl 的菜鸟。我正在尝试完成我觉得很简单的事情，但是我很难理解语法。

我有一个获取位置名称的变量（例如芝加哥或奥兰）

然后我有一个变量可以获取没有区号的电话号码。

所以我想要做的是一个 If 语句，如果位置是芝加哥 (773) 或奥兰 (708)，则 Concat("Area Code" with the "Phone Number") 基于。

变量：

```
xsl:variable name="haswph"       select="string-length(workphone) &gt; 0"
xsl:variable name="hasonum"      select="string-length(officenumber) &gt; 0" 
```

输出：

```
 <xsl:if test="$haswph">
    <li id="PhoneField">
      <xsl:apply-templates select="hithighlightedproperties/workphone" />
    </li>
  </xsl:if>
  <xsl:if test="$hasonum">
    <li id="OfficeField">
      <xsl:apply-templates select="hithighlightedproperties/officenumber" />
    </li>
  </xsl:if> 
```

任何建议或正确方向的一点将不胜感激。

谢谢，布兰登

```
<preferredname>Nigro, Brandon L.</preferredname> 
<yomidisplayname></yomidisplayname>
<department>Information Technology</department> 
<workphone>555-5555</workphone>
<officenumber>John Academic Center</officenumber> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:24:34.273

如果我正确理解了这个问题，解决方案只需将此模板添加到您当前的 xsl：

```
<xsl:template match="workphone">
    <xsl:if test="$office='Chicago'">(773) </xsl:if>
    <xsl:if test="$office='Orland'">(708) </xsl:if>
    <xsl:value-of select="."/>
</xsl:template> 
```

用您在原始帖子中提到的变量替换此“$office”变量。

**编辑**：在这里，您有一个完整的转换，其中以前的模板应用于示例输入 XML（顺便说一句：尝试遵循 Jim Garrison 的建议。在以后的帖子中发布完整的输入/输出 XML 而不是其中的一部分，您将得到准确的响应第一次尝试）。

输入：

```
 <Office code="Chicago">
        <Employee id="1">
            <hithighlightedproperties>
                <preferredname>Nigro, Brandon L.</preferredname>
                <yomidisplayname></yomidisplayname>
                <department>Information Technology</department>
                <workphone>555-5555</workphone>
                <officenumber>John Academic Center</officenumber>
            </hithighlightedproperties>
        </Employee>
    </Office> 
```

XSL：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" indent="yes"/>
    <xsl:variable name="office" select="Office/@code"/>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <xsl:template match="Office">
        <html>
            <body>
                <xsl:apply-templates select="Employee"/>
            </body>
        </html>
    </xsl:template>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <xsl:template match="Employee">
        <xsl:variable name="haswph" select="string-length(hithighlightedproperties/workphone) &gt; 0"/>
        <xsl:variable name="hasonum" select="string-length(hithighlightedproperties/officenumber)&gt; 0"/>
        <p>Employee <xsl:value-of select="@id"/> Properties</p>
        <ul>
            <li id="Name"><xsl:value-of select="hithighlightedproperties/preferredname"/></li>
            <xsl:if test="string-length(hithighlightedproperties/yomidisplayname)">
                <li id="DisplayNameField">
                    <xsl:apply-templates select="hithighlightedproperties/yomidisplayname"/>
                </li>
            </xsl:if>
            <li id="DepartmentField"><xsl:value-of select="hithighlightedproperties/department"/></li>
            <xsl:if test="$haswph">
                <li id="PhoneField">
                    <xsl:apply-templates select="hithighlightedproperties/workphone"/>
                </li>
            </xsl:if>
            <xsl:if test="$hasonum">
                <li id="OfficeField">
                    <xsl:apply-templates select="hithighlightedproperties/officenumber"/>
                </li>
            </xsl:if>
        </ul>
    </xsl:template>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <xsl:template match="workphone">
        <xsl:if test="$office='Chicago'">(773) </xsl:if>
        <xsl:if test="$office='Orland'">(708) </xsl:if>
        <xsl:value-of select="."/>
    </xsl:template>
</xsl:stylesheet> 
```

输出：

```
<html>
    <body>
        <p>Employee 1 Properties</p>
        <ul>
            <li id="NameField">Nigro, Brandon L.</li>
            <li id="DepartmentField">Information Technology</li>
            <li id="PhoneField">(773) 555-5555</li>
            <li id="OfficeField">John Academic Center</li>
        </ul>
    </body>
</html> 
```

但是，我不鼓励您使用这种“变量 + if”方法，并尝试使用干净的 xsl pushy 样式（这会达到完全相同的结果）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" indent="yes"/>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <xsl:template match="Office">
        <html>
            <body>
                <xsl:apply-templates select="Employee"/>
            </body>
        </html>
    </xsl:template>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <xsl:template match="Employee">
        <p>Employee <xsl:value-of select="@id"/> Properties</p>
        <ul>
            <xsl:apply-templates select="hithighlightedproperties/preferredname" mode="li">
                <xsl:with-param name="id" select="'NameField'"/>
            </xsl:apply-templates>
            <xsl:apply-templates select="hithighlightedproperties/yomidisplayname" mode="li">
                <xsl:with-param name="id" select="'DisplayNameField'"/>
            </xsl:apply-templates>
            <xsl:apply-templates select="hithighlightedproperties/department" mode="li">
                <xsl:with-param name="id" select="'DepartmentField'"/>
            </xsl:apply-templates>
            <xsl:apply-templates select="hithighlightedproperties/workphone" mode="li">
                <xsl:with-param name="id" select="'PhoneField'"/>
            </xsl:apply-templates>
            <xsl:apply-templates select="hithighlightedproperties/officenumber" mode="li">
                <xsl:with-param name="id" select="'OfficeField'"/>
            </xsl:apply-templates>
        </ul>
    </xsl:template>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <xsl:template match="workphone">
        <xsl:variable name="office" select="../../../@code"/>
        <xsl:if test="$office='Chicago'">(773) </xsl:if>
        <xsl:if test="$office='Orland'">(708) </xsl:if>
        <xsl:value-of select="."/>
    </xsl:template>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <xsl:template match="*[string-length(.)&gt;0]" mode="li">
        <xsl:param name="id" select="local-name()"/>
        <li id="{$id}">
            <xsl:apply-templates select="."/>
        </li>
    </xsl:template>
</xsl:stylesheet> 
```

# arrays - 在 x86 程序集中交换数组值时的值错误

> ID：13238232
> 
> 赞同：4
> 
> 时间：2012-11-05T18:38:00.020
> 
> 标签：arrays, assembly, x86, quicksort

我正在 x86 汇编中进行快速排序，我需要交换数组 A[pivot] 和 A[j] 的两个元素，但我什至无法为数组索引分配值，更不用说交换元素了。

数组是这样分配的：

```
A:      .long   2,1,8,6,12 
```

我最初的交换计划根本不起作用，所以我将其简化为了解我的问题所在。我尝试了多种方法来获得正确的结果，但都导致错误的值或分段错误

```
 movl    A(,%ebx,4), %eax            #eax = A[pivot]
    movl    A(,%edi,4), %edx            #edx = A[j]

                                        #ebx = pivot = 0
                                        #edi = j = 1

    pushl   %eax
    pushl   $test7                      #"A[pivot] = %d"
    call    printf
    addl    $8, %esp                    # A[0] = 2 

    pushl   %edx
    pushl   $test8                      #"A[j] = %d"
    call    printf
    addl    $8, %esp                   #A[1] = 1 
```

此代码段返回：

```
A[pivot]         = 2 
A[j]             = -143535296 
```

A[pivot] = A[0] = 2，所以这是正确的，但是 A[j] = A[1] = 1

当 %ebx 和 %edi 是两个数组索引以查看它们的内容或更改它们的值时，这是引用数组元素的正确方法吗？

无法弄清楚我做错了什么，任何帮助将不胜感激。

编辑：另外，如果我使用 A(,[index],4) 作为 printf 参数，它会显示正确的值。

编辑1：我意识到为什么我的 printf 语句不正确，我更改了代码，它返回了似乎是正确的内存地址。addr[A] = 134513652 和 addr[A+1] = 134513656。我原来更改数组值的问题仍然存在，但执行此操作时仍然出现分段错误：

```
 leal    A(,%ebx,4), %ecx        # ecx = addr[A[0]]          
    movl    A(,%edi,4), %edx        # edx = A[1]
    movl    %edx, (%ecx)            # (ecx) = edx 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:24:23.187

您应该阅读有关调用约定的信息，尤其是。被调用者和调用者保存寄存器。在许多 ia32 调用约定中，EAX、ECX 和 EDX 都是调用者保存寄存器。这意味着一个调用——在你的情况下是第一个 printf 调用——可能会改变它们的值。它被称为调用者保存，因为您作为调用者负责保存值，例如使用推送/弹出指令。您的示例也可以通过使用被调用者保存的寄存器之一来修复。

# c++ - 具有默认构造函数的对象的初始化列表

> ID：13238234
> 
> 赞同：10
> 
> 时间：2012-11-05T18:38:01.113
> 
> 标签：c++, optimization, compiler-construction, coding-style, initializer-list

将类成员变量放入不需要在初始化列表中的初始化列表中是否有任何好处？例子：

```
class Foo
{
public:
  Foo() {}
};

class Bar
{
public:
  Bar() : _foo() {}

private:
  Foo _foo;
}; 
```

在这种情况下，编译器会做任何特别的事情吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T18:58:17.183

在这种情况下，它没有任何区别。

但这样做可能很有用。
如果您有大量成员，那么列表中有一些但不是所有成员可能会导致一些混乱。它还在您的脑海中强化了初始化的顺序（顺序由类中的声明顺序定义，但在并非所有成员变量都声明在彼此旁边的较大类中可视化此顺序可能很有用）。

注意：如果你在内部化列表中以错误的顺序放置它们，这通常只是对大多数编译器的警告（除非你将警告编译为错误（你应该这样做））。

真正的危险在于具有 POD 成员和编译器生成的构造函数的类。

```
class NewFoo
{
      int x;
      int y;
};
// Version 1:
class Bar1
{
     NewFoo  f;
};
// Version 2:
class Bar2
{
     NewFoo  f;
     public:
         Bar2()  // f not in list.
         {}
};
// Version 3:
class Bar3
{
     NewFoo  f;
     public:
         Bar3()
            : f()
         {}
};

int main()
{
     Bar1     b1a;           // x and y not  initialized.
     Bar1     b1b = Bar1();  // x and y zero initialized.
     Bar2     b2a;           // x and y not  initialized.
     Bar2     b2b = Bar2();  // x and y not  initialized.
     Bar3     b3a;           // x and y zero initialized.
     Bar3     b3b = Bar3();  // x and y zero initialized.
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-05T18:39:50.397

初始化列表是初始化构造函数中成员的首选方式。这是初始化引用成员和常量成员的唯一可能方法。

此外，通过使用初始化列表，您可以减少在变量初始化之前意外使用变量的机会。这是更大的哲学的一部分，即在不初始化变量的情况下永远不要定义它。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-05T18:45:36.367

正在使用的构造函数的初始化列表中未提及的成员是默认初始化的。这`Foo`意味着将调用默认构造函数。

`Bar() : _foo() { }`与根本不提供`Bar`显式默认构造函数之间的区别（或者说`Bar() = default`是您的版本没有微不足道的默认构造函数。因此，`std::is_trivially_constructible<Bar>::value`如果您完全不使用构造函数，则 的值将有所不同，尽管行为是相同的.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T18:38:42.797

不，在这种情况下没有什么不同。我认为这样做没有任何好处。

# php - 处于调试模式时的异步流停止计时器

> ID：13238235
> 
> 赞同：1
> 
> 时间：2012-11-05T18:38:02.770
> 
> 标签：php, debugging, xdebug, fsockopen

所以今天我做了这个`$fp = fsockopen($host, 80, $errno, $errstr, 50);`。流应保持直播 50 秒。我正在使用 xdebug 进行调试以进入每一行代码，目前我只有一行通过了我的 fsockopen 行。

即使我处于调试模式，套接字是否仍保持打开状态 50 秒，还是等到我完成调试才能倒计时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:51:12.893

超时仅影响`fsockopen()`等待连接的时间。建立连接后，读取/写入会使用不同的超时值。

请参阅**[stream_set_timeout()](http://www.php.net/manual/en/function.stream-set-timeout.php)**文档。

# objective-c - iOS 崩溃日志：什么是“purgeable_ptr_in_use_enumerator”？

> ID：13238236
> 
> 赞同：2
> 
> 时间：2012-11-05T18:38:09.723
> 
> 标签：objective-c, ios, xcode, memory-management

有人熟悉来自 libsystem_c.dylib 的崩溃消息 purgeable_ptr_in_use_enumerator 吗？

我的预感是它与一些可变对象同时发生变异有关，它在代码中的另一个点被访问，但只是想看看是否有人对这个错误消息有很好的理解。

对于它的价值，这是前面的错误日志

```
0    libsystem_kernel.dylib __pthread_kill + 8

1    libsystem_c.dylib  abort + 94

2    libsystem_c.dylib  purgeable_ptr_in_use_enumerator

3    libsystem_c.dylib  free_tiny_botch + 84

4    libsystem_c.dylib  free + 170

5    CoreFoundation __rehashs + 162

6    CoreFoundation -[__NSSetM addObject:] + 214

7    CoreFoundation -[NSMutableSet addObjectsFromArray:] + 382 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:46:09.267

这不是错误信息。`magazine_malloc.c`它是在 libsystem_c 中定义的静态函数。如果您对详细信息感兴趣，请参阅[此内容。](http://opensource.apple.com/source/Libc/Libc-583/gen/magazine_malloc.c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:51:14.990

检查设备上的可用磁盘空间。我们的一个用户总是在随机的地方崩溃，他的所有日志都有这个共同点。结果他的设备上只有 2-3 MB 的可用空间。

# ruby-on-rails - 在保留 html 实体的同时在 Rails 中保持 html_safe？

> ID：13238237
> 
> 赞同：3
> 
> 时间：2012-11-05T18:38:12.000
> 
> 标签：ruby-on-rails, html-entities, actionview

假设我正在输出一个帖子标题，并且在我们的数据库中，它是`Hello Y&#8217;all`- 我可以在不使用 的情况下输出它`.html_safe`，但是以这样一种方式，它不会在 html 中输出为`Hello Y&amp;#8217;all`?

也就是说，如果用户从使用印刷正确撇号的文字处理器复制帖子标题，我会得到乱码输出，因为它`&`在数据库中转义为`&amp;`. 当然，我想从数据库中`Bonnie & Clyde`输出一个标题，`Bonnie &amp; Clyde`因为那是正确的 HTML ......

有没有安全的方法来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-08T22:57:02.250

使用[ActionView::Helpers::SanitizeHelper](http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html)

```
<%= "Hello Y&#8217;all" %>
<%= sanitize "Hello Y&#8217;all" %> 
```

将产生：

```
Hello Y&#8217;all
Hello Y’all 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:44:51.340

有 3 种方法可以做到这一点：

```
1: "string".htmlsafe
2: <%= raw "string" %>
3\. <%== "string" %> 
```

我认为您应该使用 <%= raw "string" %> 作为参数，将 .to_s 应用于它，然后简单地将 html_safe 应用于它。因此使用第二个选项是安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T20:17:14.400

[SafeBuffer 调用`ERB::Util.h`的字符串不是`html_safe`](http://api.rubyonrails.org/classes/ActiveSupport/SafeBuffer.html#method-i-concat)，因此您可以在首次将字符串保存到数据库中时打开`gsub`并`ERB::Util.h(your_string)`替换 的实例。这样你的字符串首先被消毒`&amp;[code]``&[code];`

您需要的电话是`ERB::Util.h(your_string).gsub(/&amp;(#x?[\da-fA-F]+;)/, '&\1')`

然后，每当您需要显示该特定字符串时，请调用`html_safe`它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T18:46:43.370

`<%= raw "Y&amp;#8217;all" %>`或者`<%== "Y&amp;#8217;all" %>`是两种可能。

# cocoa - NSTextField：如何像在其他应用程序中一样添加搜索图标？

> ID：13238238
> 
> 赞同：1
> 
> 时间：2012-11-05T18:38:13.017
> 
> 标签：cocoa, nstextfield, nstextfieldcell

如何在 NSTextField 的左侧添加搜索图标？您可以在许多其他应用程序中看到相同的情况。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-05T18:55:40.663

我猜是这样的：

```
text = NSTextField.alloc().initWithFrame_(((0, 0), (30.0, 22.0)))
text.setCell_(NSSearchFieldCell.alloc().init()) 
```

# expressionengine - 保护表达式引擎的最佳方法是什么？

> ID：13238241
> 
> 赞同：5
> 
> 时间：2012-11-05T18:38:22.417
> 
> 标签：expressionengine

官方文档只说将系统置于根目录之上并将 admin.php 重命名为一些晦涩难懂的东西 - 这并不安全，因为它会给机器人带来不便，否则它们会简单地尝试重复访问 domain.com/admin.php，因为例子。我经常听到（今天在 Twitter 上就是一个例子）关于人们可以做些什么来保护表达式引擎的问题。我自己在这方面的知识并不多，因此为了我和其他人的利益，是否有一些#eecms 安全专家可以分享每个人都应该考虑做的一些要点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T20:51:33.867

您还应该查看 Eric Lamb 的 Securitee ( [http://devot-ee.com/add-ons/securitee](http://devot-ee.com/add-ons/securitee)) 附加组件作为保护 EE 的良好下一步。它会进行大量的安全检查，以确保您的系统在您网站的整个生命周期内尽可能安全，因为安全性不是设置和忘记的东西。根据我的经验，伤害通常不是来自黑客/机器人，而是来自对系统有很多访问权限的人。这也包括被授予临时访问权限但他们的访问权限从未被撤销的成员，我知道在开发完成后我添加的系统中，通常会创建 2-3 个超级管理员，以供附加开发人员解决问题发展。虽然我并不是说附加开发人员会破坏您的网站，但这只是另一个需要解决的可能的安全漏洞。

Mark 的小册子和 Eric Lamb 的关于 Securitee 的博文一样非常适合阅读[http://mithra62.com/blog/view/why-you-should-care-about-securitee](http://mithra62.com/blog/view/why-you-should-care-about-securitee)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-05T19:58:47.510

Mark Huot has written a small booklet on securing expressionengine, you can get it here [http://mijingo.com/products/ebooklets/securing-expressionengine-2/](http://mijingo.com/products/ebooklets/securing-expressionengine-2/)

Recommended read.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-05T18:44:41.853

基本安装非常安全。重命名系统文件夹和/或 admin.php 会带走他们可能敲击的第一个钉子。应特别注意可能存在一些安全漏洞的附加组件。

仅限主编访问控制面板，并严格限制对他们应该访问的部分的访问。如果一般用户需要发布文章，可以使用 safecracker 插件来完成，但在当前状态下，确实可以通过安全检查来完成。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-06T22:46:42.260

如果您有 lynda.com 帐户，请查看“ [Wordpress 3：开发安全站点](http://www.lynda.com/WordPress-3-0-tutorials/WordPress-3-Developing-Secure-Sites/78547-2.html)”。我知道，我知道，*WTF Wordpress？！*， 正确的？但他涵盖的主题与任何基于 DB 的 CMS 相关，并且他涵盖了*非常*广泛的建议。只需将“插件”与“附加组件”交换，这都是非常熟悉的领域。

# css - 没有包装的图像上的透明颜色

> ID：13238242
> 
> 赞同：4
> 
> 时间：2012-11-05T18:38:27.110
> 
> 标签：css

我正在尝试在图像顶部添加一个半透明的颜色层作为 div 的背景。我尝试了以下方法：

```
background: url('myImage.jpg'), rgba(0,0,0,0.5); 
```

还

```
background-image:url('myImage.jpg');
background-color:rgba(0,0,0,0.5); 
```

但在这两种情况下，只显示图像。我知道我可以用颜色将这个 div 包装在另一个 div 中，但是有什么方法可以在一个 div 中完成所有操作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T19:00:43.717

使用`:after`选择器。它可以解决你的问题。

```
.container:after {
    content: "";
    display: block;
    width: 300px;
    height: 200px;
    background-color:rgba(0,0,0,0.5);
} 
```

示例在这里 - [http://jsfiddle.net/ecYrS/2/](http://jsfiddle.net/ecYrS/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:42:22.187

CSS 不支持您在本地尝试执行的操作 - 您需要在图像上放置一个 RGBa 层。您基本上想要在背景图像上添加一个半透明层，但 CSS 将在背景图像上设置优先级，基本上覆盖任何背景颜色。

一个想法是你可以尝试一个 alpha 透明的 PNG，但我不是 100% 的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-19T10:09:24.807

@Flynn 面临与您提到的相同的问题。我想出了一个非常方便的解决方案。

不过有办法！

我们可以使用渐变，而不是使用 rgba() 或 hsla() 使用透明泛色。渐变在技术上是背景图像，因此不受堆叠顺序中它们不能排在首位（位于顶部）的规则的约束。

```
/* Working method */
.tinted-image {
  background: 
    /* top, transparent red, faked with gradient */ 
    linear-gradient(
      rgba(255, 0, 0, 0.45), 
      rgba(255, 0, 0, 0.45)
    ),
    /* bottom, image */
    url(image.jpg);
}
```

欲了解更多信息，请浏览以下链接：

[带有背景颜色的图像](https://css-tricks.com/tinted-images-multiple-backgrounds/)

# html - Hoverbox 预览中的字幕

> ID：13238246
> 
> 赞同：0
> 
> 时间：2012-11-05T18:38:30.840
> 
> 标签：html, css, hover, preview, caption

我在一个网站上使用 Hoverbox 图片库 (http://host.sonspring.com/hoverbox/)，我想在每个图片预览中添加一个标题（悬停时，在放大的图片下方）。我一直在尝试，但我只能在缩略图中做到这一点。我在某处读到，使用图像和另一个标题可以做到这一点，但我被卡住了。有人可以帮我吗？

HTML：

```
<ul class="hoverbox">
    <li>
    <a href="#"><img src="img/gallery/image1.jpg" alt="description" style="height:75px;        
width:59px;"/><img src="img/gallery/image1.jpg" alt="description" class="preview" />   
Caption 1</a>
(...) 
```

CSS：

```
.hoverbox
{
cursor: default;
list-style: none;
}

.hoverbox a
{
cursor: default;
}

.hoverbox a .preview
{
display: none;
}

.hoverbox a:hover .preview
{
display: block;
position: absolute;
top: -33px;
left: -45px;
z-index: 1;
}

.hoverbox img
{
background: #fff;
border-color: #aaa #ccc #ddd #bbb;
border-style: solid;
border-width: 1px;
color: inherit;
padding: 2px;
vertical-align: top;
width: 100px;
height: 75px;
}

.hoverbox li
{
background: #eee;
border-color: #ddd #bbb #aaa #ccc;
border-style: solid;
border-width: 1px;
color: inherit;
display: inline;
float: left;
margin: 3px;
padding: 5px;
position: relative;
}

.hoverbox .preview
{
border-color: #000;
width: 200px;
height: 150px;
} 
```

在此先感谢，若昂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:25:43.893

好吧，从你的代码来看，我猜标题总是显示在原始图像旁边......

因此，对于悬停效果，我建议您为标题制作一个单独的标签。例如

```
<a href="#"><img src="img/gallery/image1.jpg" alt="description" style="height:75px;        
width:59px;"/><img src="img/gallery/image1.jpg" alt="description" class="preview" />   
<span class="preview">Caption 1<span></a> 
```

另请注意，我将预览类添加到新标签中。这也将隐藏标题，直到悬停。然而，现在的位置有点偏离。所以，需要更多的CSS代码。

```
ul.hoverbox a:hover span.preview
{
display: block;
position: absolute;
top: 40px;
left: -45px;
z-index: 1;
} 
```

在这里，我调整了顶部语句，因此标题位于图像下方。不过，这可能仅适用于具有固定高度的预览图像。

另一种尝试是使用 `<li><img.../> <div class="preview"><img .../><span>Caption 1</span></div></li>`，因此整个框都带有预览图像和标题。然后你可能不得不用`.preview span{display:block;margin:0 auto;}`etc格式化 span-tag。

我希望这至少部分回答了您的问题或对您有所帮助^^

# webdriver - 使用 selenium WebDriver c# 根据名称单击超链接的最佳方法是什么

> ID：13238252
> 
> 赞同：0
> 
> 时间：2012-11-05T18:38:53.077
> 
> 标签：webdriver, selenium-webdriver

下面是 html 代码，它是我的 .html 页面的结构。我有一个很长的页面，但出于示例目的，我只有三行，而在实际页面中我有数百行

我的问题是：完成以下任务的最佳方法是什么：

我将如何单击`Add to Basket`员工姓名 John Steven（或任何其他姓名）？

```
 <table class="gvlist" cellspacing="0" border="0" id="ctl00_ctl00_Features_Features_ContentList_gv">
        <tr class="gvheader">
            <th>
                Employee Name
            </th>
            <th>
                Topic
            </th>
            <th>
                Add Employee
            </th>
        </tr>
        <tr class="gvrow">
            <td>
                <a id="ctl00_employee_List_gv_ctl02_lnkPage" class="gvtitle" href="#" target="_blank">
                    Erich Schulz</a>
            </td>
            <td>
                <ul class="topiclist">
                    <li class="ListItem" style="list-style: none"><a id="ctl00_employee_List_gv_ctl02_lbTopic"
                        class="InlineItemText" href="#">R&D</a> </li>
                </ul>
            </td>
            <td>
                <a id="ctl00_employee_List_gv_ctl02_lnkSelect" href="#" class="addpage">Add to Basket
                    List</a>
            </td>
        </tr>
        <tr class="gvrow">
            <td>
                <a id="ctl00_employee_List_gv_ctl03_lnkPage" class="gvtitle" href="#" target="_blank">
                    John Steven</a>
            </td>
            <td>
                <ul class="topiclist">
                    <li class="ListItem" style="list-style: none"><a id="A2" class="InlineItemText" href="#">
                        Development</a> </li>
                </ul>
            </td>
            <td>
                <a id="ctl00_employee_List_gv_ctl03_lnkSelect" href="#" class="addpage">Add to Basket
                    List</a>
            </td>
        </tr>
        <tr class="gvrow">
            <td>
                <a id="ctl00_employee_List_gv_ctl04_lnkPage" class="gvtitle" href="#" target="_blank">
                    John McAfee</a>
            </td>
            <td>
                <ul class="topiclist">
                    <li class="ListItem" style="list-style: none"><a id="A5" class="InlineItemText" href="#">
                        Tech</a> </li>
                </ul>
            </td>
            <td>
                <a id="ctl00_employee_List_gv_ctl04_lnkSelect" href="#" class="addpage">Add to Basket
                    List</a>
            </td>
        </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T21:24:05.943

可能有很多可能性，但我会选择 xpath

```
.//a[contains(.,'John McAfee')]/ancestor::tr//a[@class='addpage'] 
```

其中“John McAfee”可以通过变量传递

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T06:43:29.023

试试这个

driver.findElement(By.linkText("添加到购物车")).click();

# python - 是否可以将列表转换为嵌套的键字典*无需*递归？

> ID：13238255
> 
> 赞同：7
> 
> 时间：2012-11-05T18:39:03.587
> 
> 标签：python, list, recursion, dictionary, iteration

假设我有一个如下列表：

```
mylist = ['a','b','c','d'] 
```

**是否可以在不**使用递归/递归函数的情况下从此列表中创建以下字典？

```
{
  'a': {
    'b': {
      'c': {
        'd': { }
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T18:44:11.370

对于简单的情况，只需从结尾或开头进行迭代和构建：

```
result = {}
for name in reversed(mylist):
    result = {name: result} 
```

或者

```
result = current = {}
for name in mylist:
    current[name] = {}
    current = current[name] 
```

第一个解决方案也可以表示为单线使用[`reduce()`](http://docs.python.org/2/library/functions.html#reduce)：

```
reduce(lambda res, name: {name: res}, reversed(mylist), {}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T18:42:00.157

至少对于这个简单的情况，是的：

```
my_list = ['a', 'b', 'c', 'd']
cursor = built_dict = {}
for value in my_list:
    cursor[value] = {}
    cursor = cursor[value] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T18:46:45.520

或者为了花哨和降低可读性：

```
dict = reduce(lambda x, y: {y: x}, reversed(myList), {}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T18:46:11.560

值得一提的是，[每个递归都可以转换为迭代](https://stackoverflow.com/q/931762/201359)，尽管有时这可能并不那么容易。对于问题中的特定示例，它*很*简单，只需将预期结果累积到变量中并以适当的顺序遍历输入列表即可。这就是我的意思：

```
def convert(lst):
    acc = {}
    for e in reversed(lst):
        acc = {e: acc}
    return acc 
```

甚至更短，上述算法可以表示为单行（假设 Python 2.x，在 Python 3.x[`reduce`](http://docs.python.org/2/library/functions.html#reduce)中被移到[`functools`](http://docs.python.org/3.2/library/functools.html)模块中）。注意前一个解决方案中的变量名称如何对应于 lambda 的参数，以及在这两种情况下累加器的初始值如何`{}`：

```
def convert(lst):
    return reduce(lambda acc, e: {e: acc}, reversed(lst), {}) 
```

无论哪种方式，该功能都`convert`按预期工作：

```
mylist = ['a','b','c','d']
convert(mylist)

=> {'a': {'b': {'c': {'d': {}}}}} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T18:43:38.327

```
mydict = dict()
currentDict = mydict
for el in mylist:
  currentDict[el] = dict()
  currentDict = currentDict[el] 
```

# javascript - 动态编写页面时无法使功能正常工作

> ID：13238260
> 
> 赞同：-1
> 
> 时间：2012-11-05T18:39:30.073
> 
> 标签：javascript

在通过单击主机页面上的按钮动态写入新页面后，我试图让警报运行。

新页面加载，但没有任何反应。

```
function test2() {

var html     =  '<!DOCTYPE html>\n'
html    +=  '<html>\n'
html    +=  '<head>\n'
html    +=  '<script type="text/javascript">\n'
html    +=  'window.onload = function() {\n'
html    +=  'alert("the test worked!")\n'
html    +=  '}\n'       
html    +=  '</scr' + + 'ipt>\n';
html    +=  '</head>\n'
html    +=  '<body>\n'
html    +=  '</body>\n'
html    +=  '</html\n'

window.open('','').document.write(html)

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:42:55.077

这类似于尝试使用`innerHTML`: 添加脚本，但它不起作用。

相反，您需要创建一个`<script>`带有 的标签`document.createElement`，然后将其附加到窗口的主体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T19:17:35.147

没有任何反应，因为您没有关闭新创建的文档。如果您仔细查看浏览器，您会注意到它仍在加载。更正的代码（无用`\n`的s省略）：

```
function test2 () {
    var win,
        html = '<!DOCTYPE html>';
    html += '<html>';
    html += '<head>';
    html += '<script type="text/javascript">';
    html += 'window.onload = function () {';
    html += 'alert("the test worked!");';
    html += '}';
    html += '<\/script>';
    html += '</head>';
    html += '<body>';
    html += '</body>';
    html += '</html>';
    win = window.open('','');
    win.document.write(html);
    win.document.close();
    return;
} 
```

如您所见，您需要对新创建的窗口的引用，以便您可以关闭其文档。并且请始终使用分号，它们使您的代码更具可读性，并且在某些情况下确实需要它们时使您免受许多危害。

# php - 如何遍历表单字段，包括 php 和 codeigniter 中的 datagrid 复选框

> ID：13238262
> 
> 赞同：0
> 
> 时间：2012-11-05T18:39:35.883
> 
> 标签：php, codeigniter

我如何循环表单元素并获取值而不是保存到数据库，我有 5 个表单输入，并且我有带有复选框的数据网格来选择行...

所以我想知道如何使用 php 和 codeigniter 执行相同的操作。,,,, 我真的需要帮助来解决问题。

```
 function showattendee($id)
{
    // set validation properties
    $this->_set_rules();

    // prefill form values
    $person = $this->Person_model->get_by_id($id)->row();
    $this->form_data->id = $person->tab_classid;
    $this->form_data->classtitle = $person->tab_classtitle;
    $this->form_data->classdate = $person->tab_classtime;
    $this->form_data->createddate = $person->tab_crtdate;
    $this->form_data->peremail = $person->tab_pemail;
    $this->form_data->duration = $person->tab_classduration;
    $uri_segment = 0;
    $offset = $this->uri->segment($uri_segment);
    $users = $this->User_model->get_paged_list($this->limit, $offset)- >result();
        $this->load->library('pagination');
    $config['base_url'] = site_url('person/index/');
    $config['total_rows'] = $this->User_model->count_all();
    $config['per_page'] = $this->limit;
    $config['uri_segment'] = $uri_segment;
    $this->pagination->initialize($config);
    $data['pagination'] = $this->pagination->create_links();
    $this->load->library('table');
    $this->table->set_empty("&nbsp;");
    $this->table->set_heading('', 'User Id','User Name', 'Email', 'Language','Actions');
    $i = 0 + $offset;
    foreach ($users as $user)
    {
    $checkarray=array('name'=>'chkclsid[]',
            'id'=>'chkclsid','value'=>$user->user_id);

            $this->table->add_row(form_checkbox($checkarray), 
            $user->user_id, $user->user_name, $user->user_email,$user->user_language, 
    anchor('person/view/'.$user->user_id,'view',array('class'=>'view')).' '.
    anchor('person/update/'.$user->user_id,'update',
            array('class'=>'update')).''. 
            anchor('person/showattendee/'.$user- >user_id,
           'Attendee',array('class'=>'attendee')).' '.
    anchor('person/delete/'.$user->user_id,'delete'
            ,array('class'=>'delete',
            'onclick'=>"return confirm('Are you sure want to  delete this person?')"))  
        );
    }
    $data['table'] = $this->table->generate();

    // load view
    // set common properties
    $data['title'] = 'Assign Attendees';
    $data['message'] = '';
    $data['action'] = site_url('person/validatecheckbox');
    $data['value'] = "sssssssssssssssssss";
    $data['link_back'] = anchor('person/index/',
            'Back to list ofClasses',array('class'=>'back'));

    $this->load->view('common/header');
    $this->load->view('adminmenu');
    $this->load->view('addattendee_v', $data);

    } 
```

所以我想循环所有表单字段，包括复选框值并传递给数据库以保存数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:44:13.580

根据您使用的是 POST 还是 GET，您可以循环完整的 $post 或 $get 数组以确定所有表单值

```
<?php print_r($_GET); ?>

<form action="test.php" method="get">
    <input type='checkbox' name="cb1" value='a1' />
    <input type='checkbox' name="cb2" value='a2' />
    <input type='checkbox' name="cb3" value='a3' />
    <input type='submit' name='action' value='Check Values' />
</form> 
```

我想这就是你要找的

# algorithm - 你如何实现一个程序来找到二维平面中的最短路径？

> ID：13238267
> 
> 赞同：3
> 
> 时间：2012-11-05T18:39:51.193
> 
> 标签：algorithm, visual-c++, geometry, artificial-intelligence

如果在二维平面上没有。所有可能的 2d 形状（圆形、四边形、三角形、不规则形状......）的障碍物，那么你如何实现一种机制来找到障碍物周围的最短路径？我正在考虑使用 Visual C++，因为它提供了许多图形类来绘制这些图形。

我已经走了很远

1）首先我将使用 A* 搜索（A-star）来找到成本最低的路径

2) 与直线路径位移最小的路径将被视为最佳路径。（虽然不太确定）

3）绕过一个图形的最短路径，例如从一开始，是从该点到 的一条线：

```
a) the farthest vertex in case of a polygon/quadrilateral
b) a point on the circumference such that the line drawn would be tangential to the circle, in case of a circle or arc
c) (not sure about irregular figures) 
```

![在此处输入图像描述](../Images/1541c3b191113ff0e2e034ac0ddcbf33.png)

* * *

现在回到 2) 两条或多条路径之间的点最小位移，可以通过比较从这些线到物体各自侧面最远点的垂线来确定。（希望我已经让自己明白了）。

那么 - 我们如何绘制垂直路径？ ![在此处输入图像描述](../Images/5006a7a5714626a1a10ecb882ea6c7b6.png)

*x1,x2,y1,y2,k 和 l*是已知的。我们只需要找到*a,b*。

直线路径的斜率 * 垂直路径的斜率 = -1

```
=> (y2-y1)/(x2-x1) * (b-l)/(1-k) = -1
hence, b = [(x1-x2)/(y2-y1) * (a-k)] + l 
```

我想象通过使用毕达哥拉斯定理，我们可以根据坐标找到另一个方程。每条线的长度可以这样求：dx = x1-x2 dy = y1-y2 dist = sqrt(dx *dx + dy* dy)

*然后通过求解这两个方程，我们可以找到a,b*的正确值。

* * *

我想不出任何进一步的想法或建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T20:24:47.030

是否可以对所有形状使用多边形（即直线段）近似？这将大大简化算法的实现。

假设这确实是可能的：如果您想使用 A*，那么您需要一个可以采用的可能路径的图形表示。该图的节点是以下各项的组合：

*   所有形状[1]的所有顶点，以及
*   起点和终点
*   {起点和终点之间的直线段}与所有形状之间的所有交点。

那么，该图中的边仅在每对节点之间

*   它们对应的两个顶点之间存在一条直线
*   不与任何形状相交[2]。

图中每条边的长度就是它所代表的两个顶点之间的（欧几里得）距离，最短路径始终是这些边的子集（我认为），您可以通过将 A* 应用于此图来找到它.

[1] - 为了减少顶点的数量，你可以使所有的凹形都凸出（除非这会导致起点或终点位于这样的形状内，否则它应该保持凹形）。

[2] - 您可以使用各种数据结构来加速这些查询，例如 kD 或四叉树，或者可能使用扫描线算法（例如[http://en.wikipedia.org/wiki/Bentley%E2 %80%93Ottmann_algorithm](http://en.wikipedia.org/wiki/Bentley%E2%80%93Ottmann_algorithm) ) 结合双连接边列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T10:12:51.463

好吧，我不太确定这是否会有所帮助，但无论如何，每个不规则对象都可以拆分为规则对象的组合，例如圆，只是曲线的半径不断变化。所以你可以认为它是对应于的弧的组合不同的半径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T10:45:46.393

对于第二点，如果有点 (l,k)。考虑位于直线 (x1,y1),(x2,y2) 上的两个点，它们与 (l,k) 等距。因此，垂线将是与 (x1,y1) 和 (x2,y2) 等距的所有点的组合。

# python - “未找到成员。” 使用 win32com 出错

> ID：13238269
> 
> 赞同：1
> 
> 时间：2012-11-05T18:39:59.433
> 
> 标签：python, vba, com, win32com

我在使用 Python win32com 模块访问 COM 对象时遇到问题，而在使用 VBA 时我没有。请参阅下面的用法/错误。该对象的其他部分运行正常，但我无法从 ResultSet 对象中获取任何参数。

```
>>> import win32com.client
>>> Aquator = win32com.client.gencache.EnsureDispatch("Aquator.Application")
>>> db = Aquator.LoadDatabase(r"D:\Shared", "AquatorExcel.mdb")
>>> project = Aquator.LoadProject(db, "A simple model", False, False)
>>>
>>> project.ModelRunStart()
<win32com.gen_py.Aquator Water Resource Simulation._ModelRun instance at 0x15264
824>
>>> Aquator.ActiveProject.ModelRuns.Count
1
>>> Aquator.ActiveProject.ModelRuns.Item(1).ResultSet
<win32com.gen_py.Aquator Water Resource Simulation._IResultSet instance at 0x149
19000>
>>> Aquator.ActiveProject.ModelRuns.Item(1).ResultSet.Cost
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Program Files\Pythonxy\Pythonxy 2.7\Python27\lib\site-packages\win32c
om\client\__init__.py", line 463, in __getattr__
    return self._ApplyTypes_(*args)
  File "C:\Program Files\Pythonxy\Pythonxy 2.7\Python27\lib\site-packages\win32c
om\client\__init__.py", line 456, in _ApplyTypes_
    self._oleobj_.InvokeTypes(dispid, 0, wFlags, retType, argTypes, *args),
pywintypes.com_error: (-2147352573, 'Member not found.', None, None) 
```

应用程序中 VBA 编辑器中的等效代码正常运行，返回一个浮点数：

```
Public Sub Test()
    MsgBox Aquator.ActiveProject.ModelRuns.Item(1).ResultSet.Cost
End Sub 
```

据我所知， EnsureDispatch 命令已经正确完成了它的工作，并识别了该属性（以及其他属性，也无法访问）：

```
>>> Aquator.ActiveProject.ModelRuns.Item(1).ResultSet._prop_map_get_.keys()
['WaterBalanceMl', 'RunDate', 'Parameters', 'DoublePrecision', 'WarningCount', '
FinishDate', 'AmountLost', 'SinglePrecision', 'Status', 'StartDate', 'Descriptio
n', 'AmountLeaked', 'FailureCount', 'AmountAdded', 'ErrorCount', 'AmountStored',
 'Name', 'WaterBalancePercent', 'InfoValueList', 'Results', 'States', 'Cost', 'A
mountRemoved', 'Sequences', 'Duration', 'InfoNameList', 'RunTime']
>>> Aquator.ActiveProject.ModelRuns.Item(1).ResultSet.meh
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Program Files\Pythonxy\Pythonxy 2.7\Python27\lib\site-packages\win32c
om\client\__init__.py", line 462, in __getattr__
    raise AttributeError("'%s' object has no attribute '%s'" % (repr(self), attr
))
AttributeError: '<win32com.gen_py.Aquator Water Resource Simulation._IResultSet
instance at 0x15175888>' object has no attribute 'meh' 
```

我尝试使用 .GetCost() （使用 win32com[设置属性](https://stackoverflow.com/questions/7089496/setting-a-property-using-win32com)），但无济于事（“对象没有属性......”）。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:27:56.473

似乎问题出在 win32com 模块上。使用 comtypes 模块的等效代码正常运行：

```
>>> from comtypes.client import CreateObject
>>> Aquator = CreateObject("Aquator.Application")
>>> Database = Aquator.LoadDatabase(r"D:\Shared", "AquatorExcel.mdb")
>>> Project = Aquator.LoadProject(Database, "A simple project", False, False)
>>> ModelRun = Project.ModelRunStart()
>>> print ModelRun.ResultSet.Cost
133432.20 
```

# cloud - OpenCloud 或其他云软件能否支持跨多个域的节点？

> ID：13238271
> 
> 赞同：2
> 
> 时间：2012-11-05T18:40:22.530
> 
> 标签：cloud, cloud-hosting

正如标题所示，我想知道，特别是 opencloud，是否可以支持跨不同域的节点连接。我已经阅读和阅读，在所有情况下，我都能够发现所有节点都在同一个网络上的假设。

举个例子：假设有 6 个人购买计算机，他们想使用来自他们各自房屋的单独计算机来构建私有云。

任何人都可以告诉我这是否可能，如果可以，请向我指出一些可能让我继续前进的文档。非常感谢！

就像一个注释；我考虑过 VPN 的选项，但不想走那条路。

# json - neo4j 图转 JSON

> ID：13238272
> 
> 赞同：2
> 
> 时间：2012-11-05T18:40:44.620
> 
> 标签：json, tree, neo4j, graph-theory

我正在考虑使用 Neo4J 图形并将其全部显示在网络上的不同选项，目前我正在考虑使用基于 Java 的数据库阅读器创建 JSON 输出以供网络显示。

JSON 是否适合显示树状结构？就我而言，我有一个父子样式的组织结构图。

如果可能的话，你能给我一个例子吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:50:14.190

是的。使用 JSON 传递所有几何图形：节点和边的列表、节点的位置和大小、边的样条数据等。将所有数据转换为 SVG DOM，这可以动态完成。（HTML 4 提示：确保使用 SVG 命名空间`CreateElement`。）真正的诀窍是在数据到达浏览器之前进行所有计算。简单的计算在 JavaScript 中运行良好，但任何复杂的事情最好在别处完成。

不幸的是，没有例子。我编写的代码不向公众提供。

# r - 轴上的不均匀间距与 R

> ID：13238273
> 
> 赞同：2
> 
> 时间：2012-11-05T18:40:45.837
> 
> 标签：r

我在用 R 在 x 轴上绘制不均匀比例图时遇到问题

这是一个例子：

```
plot(1:100,1:100) 
```

将在 x 轴上给出相等的刻度空间。

但是，我想显示图形的前半部分空间显示 1 到 10，左半部分空间显示 10 到 100，因此 10 到 100 中的点更密集，并且`1:10`更容易看到。如何用 R 做到这一点？

像这样：

![在此处输入图像描述](../Images/95a5d4d3845ec856f766a9e8a575129e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:48:31.110

你可以`log`x轴：

```
x<-1:100
y<-1:100
plot(log(x,base=10),y,axes=F)
axis(2)
axis(1,at=0:2,labels=10^(0:2)) 
```

![在此处输入图像描述](../Images/cb074c8eca37fe67b26c604766bdf078.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T18:51:14.440

对于对数轴，使用：

```
plot(x,y,log="x")  ## specifies which axis to put on log scale 
```

要确定要使用多少个“刻度线”，请检查

```
par()$lab 
```

默认为`5,5,7`。要放置更多 x 轴标签，请执行

```
par(lab=c(10,5,7)) 
```

对于 y：

```
par(lab=c(5,10,7)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T18:51:42.780

这不是一件容易一次性完成的任务。您实际上需要转换为缩放数据并提供自定义刻度轴。您有什么理由不考虑简单地记录 x 轴吗？（提供选项`plot(x, y, log='x')`将做到这一点）。

我想你描述的是这样的：

```
xnew <- ifelse(x<10, x, x/10)
plot(xnew, y, axes=FALSE, xlab='x')
axis(1, at=c(0, 10, 20), labels=c(0, 10, 100))
axis(2)
box() 
```

# php - 在 SQL 中，我如何获得每个玩家的奖励总数

> ID：13238280
> 
> 赞同：0
> 
> 时间：2012-11-05T18:41:06.070
> 
> 标签：php, mysql, sql

我有两张桌子，一张叫 Players，一张叫 Awards。最终用户给玩家一个“奖励”，玩家可以多次获得相同的奖励。

```
 Awards Table
----+------------------------------------------------------------------------+
| ID | name                             |  player_id                         |
+----+-----------------------------------------------------------------------+
|  1 | Free-throw Excerpt               |  1                                 |
|  2 | Free-throw Excerpt               |  6                                 |
|  3 | Top Earner                       |  1                                 |
|  4 | Top Player                       |  5                                 |
|  5 | Free-throw Excerpt               |  1                                 |
|  6 | Free-throw Excerpt               |  1                                 |
|  7 | Top Earner                       |  1                                 |
|  8 | Top Player                       |  1                                 |
       ...
+----+-----------------------------------------------------------------------

 `Players Table`
----+------------------------------------------------------------------------+
| ID | name                                                                  |
+----+-----------------------------------------------------------------------+
|  1 | Player A                                                              |
|  2 | Player B                                                              |
|  3 | Player C                                                              |
|  4 | Player D 
       ...                                                                   |  
+----+----------------------------------------------------------------------- 
```

在我的应用程序中，每个玩家都有一个页面，在该页面上，我想显示玩家获得的所有奖项。例如，对于玩家 B 的页面：

**球员 A 数据：**

*   罚球摘录：3 票
*   最高收入者：2 票
*   顶级玩家：1 票

我可以查询奖励表以获取给予玩家 A 的所有奖励，但我被困在这里，不知道去哪里。然后我需要做一个 COUNT(*) 来获得每个奖项的数量吗？（1 代表顶级球员，3 代表罚球摘录）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T18:44:53.603

你说的对。与 Group By 一起计数将做到这一点

```
Select a.Name, Count(*) AS Total From Awards a
Where a.PlayerID = 1
Group By a.Name
Order By Count(*) DESC 
```

# javascript - Rally App SDK 2.0 / SharePoint 集成

> ID：13238282
> 
> 赞同：2
> 
> 时间：2012-11-05T18:41:09.800
> 
> 标签：javascript, sharepoint, sdk, rally

我使用 2.0pX SDK 创建了一系列自定义应用程序，我希望使用 SharePoint 将其分发给公司内的其他人。在我找到的有关如何执行此操作的所有示例中，都使用了 SDK 的 1.XX 版本。此时是否可以通过 SharePoint 共享 2.0 应用程序？如果没有，是否计划在 SDK 的未来版本中进行此集成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:00:17.713

目前，AppSDK2 Preview 不提供“类似LoginKey”的功能。目前，Rally 工程的重点是对 AppSDK2 进行最后润色，以便将工具包推向 GA。

AppSDK2“类似LoginKey”的功能肯定会出现在AppSDK2的雷达屏幕上，因为能够在不需要最终用户身份验证的情况下将Rally数据“显示”到外部网页非常流行——因此一旦工具包出现，这很可能会出现在路线图上是遗传算法。

# ember.js - 如何绑定 Ember 视图的元素 ID？

> ID：13238286
> 
> 赞同：1
> 
> 时间：2012-11-05T18:41:42.923
> 
> 标签：ember.js

我的模型“content.id”包含一个字符串，例如“123”：

```
{{view Em.TextArea idBinding="content.id"}} 
```

我不只是将此视图的 id 设置为“123”，而是希望它是“message-123”，基本上是自定义正在使用的字符串。遗憾的是，Ember 不允许绑定成为函数，这可以解决我的问题（我可以在控制器上定义这样的函数）。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:55:46.323

您可以在控制器（或其他地方）中定义**计算属性：**

**控制器**

```
MyApp.ApplicationController = Ember.Controller.extend({
  content: "a-content",

  editedContent: function() {
      return "message-" + this.get('content');
  }.property('content')
}); 
```

**风景**

```
MyApp.FooView = Ember.View.extend({
    tagName: 'p'
}); 
```

**模板**（内容是 a `String`，这里）

```
{{#view MyApp.FooView elementIdBinding="editedContent"}}
    {{content}}
{{/view}} 
```

JSFiddle[就在这里](http://jsfiddle.net/eLKwT/1/)。

**编辑**

> 视图如何看到属性`editedContent`，因为它属于`ApplicationController`控制器？

`ApplicationView`路由器启动后，在没有`ApplicationView`定义的情况下自动渲染, 或其模板。如果您想了解更多详细信息，我建议您阅读 Ember 指南：[了解 Ember.js 路由器：入门](http://emberjs.com/guides/router_primer/)。

并`{{editedContent}}`直接获取控制器`editedContent`属性，因为**默认视图上下文**是它的控制器，您可以在[Ember 博客 - 1.0 Prerelease](http://emberjs.com/blog/2012/08/03/ember-1-0-prerelease/)中阅读：

> `{{#view}}`助手不再更改上下文，而是默认维护父上下文。或者，如果提供，我们将使用控制器属性。您也可以选择直接覆盖上下文属性。顺序如下：
> 
> *   指定控制器
> *   提供的上下文（通常由 Handlebars 提供）
> *   parentView 的上下文（对于 ContainerView 的子项）

# c# - 如何将 OO 类的变量绑定到文本框？

> ID：13238289
> 
> 赞同：0
> 
> 时间：2012-11-05T18:42:08.057
> 
> 标签：c#, data-binding

我在 C# WinForms 项目中有一个名为 Product 的类，其定义如下：

```
class Product
    {
        string pName;
        string pType;
        string pSubType;
        string pBarcode;
        string pRegion;
        string pComments;
        bool pEnabled;

        // methods here ...
    } 
```

现在我有一个表单，我在其中使用这个 Products 类的一个实例。现在我想避免手动绑定这个 Product 类实例和表单中的文本框之间的数据。除了手动来回分配值之外，还有什么更好的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:49:46.360

将私有字段更改为[公共属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)，实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口，并使用可以添加到控件的[数据绑定，然后就可以了。](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.databindings.aspx)

# asp.net - 鼠标悬停时突出显示asp菜单

> ID：13238293
> 
> 赞同：0
> 
> 时间：2012-11-05T18:42:19.560
> 
> 标签：asp.net, html, menu

我的菜单目前有以下代码

```
<td><a href="Products.asp?isnew=true"><img height="21" border="0" src="images/productmenu/new_items<%if request.querystring("isnew")="" then%><%else%>_bold<%end if%>.png" width="120"></a></td>
    </tr>
    <tr>
        <td><a href="Products.asp?category=200 gram"><img height="21" border="0" src="images/productmenu/Shoes<%if trim(lcase(request.querystring("category")))<>"Shoes" then%><%else%>_bold<%end if%>.png" width="120"></a></td>
    </tr>
    <tr>
        <td><a href="Products.asp?category=360 gram"><img height="21" border="0" src="images/productmenu/Shirts<%if trim(lcase(request.querystring("category")))<>"Shirts" then%><%else%>_bold<%end if%>.png" width="120"></a></td> 
```

我想为这些菜单项中的每一个添加一个鼠标悬停，它会调用适当的图像，例如“new_items_highlight.png pic”用于鼠标悬停在新项目菜单链接上。

我可以在当前的“if”语句中添加附加语句吗？

谢谢您的帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:49:57.887

鼠标悬停是客户端事件。您无法在服务器端处理此问题，因此您需要编写一些 JavaScript 来为您处理此问题。您的 if 语句仅确定页面加载时的图像。

正如 Diodeus 在评论中所说，您也可以为此使用 CSS。

无论哪种方式，您都需要预加载图像以防止闪烁。

[http://css-tricks.com/snippets/css/css-only-image-preloading/](http://css-tricks.com/snippets/css/css-only-image-preloading/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:50:37.510

我不认为你可以用服务器端代码实现你所需要的，至少不能在“经典”asp中。您可能最适合使用一些 javascript 来进行鼠标悬停。mouseover 事件将由浏览器触发和处理，而不是服务器。您可以在其中放置一个 javascript 以在鼠标悬停时触发服务器回调，但这将是很多回调，您必须以笨拙的方式处理会话状态才能知道该做什么。

我将从这里开始：http: [//forum.codecall.net/topic/36057-javascripttutorial-mouseover-image-change/#axzz2BNLWbikf](http://forum.codecall.net/topic/36057-javascripttutorial-mouseover-image-change/#axzz2BNLWbikf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:52:33.380

[http://craigsworks.com/projects/qtip2/demos/](http://craigsworks.com/projects/qtip2/demos/)只是尝试检查这个 JS 插件，我希望你能从中找出一些东西..

# c# - 当鼠标悬停在asp.net中的文本框上时如何显示自定义弹出消息

> ID：13238297
> 
> 赞同：-2
> 
> 时间：2012-11-05T18:42:34.213
> 
> 标签：c#, javascript, asp.net, popup, alert

我是.Net 的新手。当光标放置在使用 C# 的页面之一上的文本框（自定义 URL）中时，我想向用户显示一条弹出警报消息。警报消息应显示类似“警告：输入的任何 URL 都将保存到数据库并显示在员工页面中”之类的内容。

一旦用户选择“确定”，消息就会消失，用户可以继续将内容输入到字段中，也可以选择不编辑该字段。

我该怎么做呢？

这是我在 JS 中输入的内容。但我没有收到弹出消息：

```
<script type="text/javascript"> 
      function AlertForUrl() 
      { 
         var strwarning = "Warning! Any URL entered will be saved to the database and will now display in the email" ; 

         var field = document.getElementById('YourField'); 
         field.onmouseover = function() { alert(strwarning); 
             // only show once 
         field.onmouseover = undefined; 
      }; 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:49:23.810

有很多 javascript 库可以做到这一点。我个人喜欢[qtip](http://craigsworks.com/projects/qtip/)。

或者

只是 google javascript 工具提示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:54:13.677

假设您只希望消息显示一次，您可以使用[`mouseover`event](https://developer.mozilla.org/en-US/docs/DOM/element.onmouseover)。

HTML：

```
<input type="text" id="yourField" /> 
```

JS：

```
var field = document.getElementById('yourField');
field.onmouseover = function () {
    alert('Warning!');

    // only show once
    field.onmouseover = undefined;
}; 
```

[http://jsfiddle.net/X4UbC/](http://jsfiddle.net/X4UbC/)

# android - Android，从 EditText 动态更改下划线颜色

> ID：13238298
> 
> 赞同：7
> 
> 时间：2012-11-05T18:42:35.570
> 
> 标签：android, colors, android-edittext

是否可以动态更改 EditText 下划线的颜色？就像效果一样，当我聚焦它时，它会变成蓝色。

希望你明白我想做什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T19:42:42.327

创建您自己的自定义控件`EditText`。

这是我为您制作的示例：

选择后，您只需更改`mPaint.setColor(Color.GREEN);`为另一种颜色

```
public class CustomEditText extends EditText {
    private Rect mRect;
    private Paint mPaint;
    int widthMsSize;
    int heightMsSize;
    // we need this constructor for LayoutInflater
    public CustomEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
        mPaint = new Paint();
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeWidth(5);
        mPaint.setColor(Color.GREEN);
        System.out.println("constructor");
    }
    protected void onMeasure(final int widthMeasureSpec,
        final int heightMeasureSpec) {
        // Extract the Ms (MesaureSpec) parameters
        widthMsSize = MeasureSpec.getSize(widthMeasureSpec);
        heightMsSize = MeasureSpec.getSize(heightMeasureSpec);
        System.out.println("on measure");
        // Satisfy contract by calling setMeasuredDimension
        setMeasuredDimension(widthMsSize,
            heightMsSize);
    }
    protected void onDraw(Canvas canvas) {
        canvas.drawLine(5, heightMsSize - 10, widthMsSize - 5, heightMsSize - 10, mPaint); //draw underline
        canvas.drawLine(8, heightMsSize - 10, 8, heightMsSize - 20, mPaint); //draw left corner
        canvas.drawLine(widthMsSize - 8, heightMsSize - 10, widthMsSize - 8, heightMsSize - 20, mPaint); //draw right corner
        super.onDraw(canvas);
    }
} 
```

主要的.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <com.example.testanimationfadeinfadeout.CustomEditText
        android:id="@+id/textedit"
        android:layout_width="228dp"
        android:layout_height="41dp"
        android:ems="10"
        android:hint="color is changed" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-23T16:12:05.987

```
public static void setEditTextUnderlineColor(final EditText editText, final int focusedColor, final int unfocusedColor) {
    editText.setOnFocusChangeListener(new View.OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if (hasFocus) {
                editText.getBackground().setColorFilter(focusedColor, PorterDuff.Mode.SRC_ATOP);
                return;
            }
            editText.getBackground().setColorFilter(unfocusedColor, PorterDuff.Mode.SRC_ATOP);
        }
    });

    editText.getBackground().setColorFilter(unfocusedColor, PorterDuff.Mode.SRC_ATOP); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-16T07:07:23.793

要自定义编辑文本，我做了以下方式。它对我来说非常简单。

```
public class CardNumberText extends EditText {

    boolean isFocus;
    Paint mPaint;
    Rect mRect;
    int widthSize, heightSize;

    public CardNumberText(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

        initStyle();

    }

    private void initStyle() {
        mRect = new Rect();
        mPaint = new Paint();
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setColor(Color.parseColor("#B3B3B3"));
    }

    public CardNumberText(Context context, AttributeSet attrs) {
        super(context, attrs);

        initStyle();
    }

    public CardNumberText(Context context) {
        super(context);

        initStyle();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        Rect rect = mRect;
        Paint paint = mPaint;
        if (isFocus) {
            mPaint.setStrokeWidth(3.0f);
            mPaint.setColor(Color.parseColor("#80CBC4"));
        } else {
            mPaint.setStrokeWidth(1.5f);
            mPaint.setColor(Color.parseColor("#B3B3B3"));
        }
        for (int i = 0; i < getLineCount(); i++) {
            int baseline = getLineBounds(i, rect);
            canvas.drawLine(rect.left, baseline + 20, rect.right, baseline,
                    paint);
        }

    }

    @Override
    protected void onFocusChanged(boolean focused, int direction,
            Rect previouslyFocusedRect) {
        super.onFocusChanged(focused, direction, previouslyFocusedRect);
        if (focused) {
            isFocus = true;
        } else {
            isFocus = false;
        }
    }
} 
```

# iis-7 - IIS 挑战：在单个域下设置全局和本地化站点（带有地理定位）

> ID：13238303
> 
> 赞同：2
> 
> 时间：2012-11-05T18:42:50.027
> 
> 标签：iis-7, localization, geolocation, virtual-directory, multiple-sites

我需要帮助解决 IIS 配置“难题”。这是我所拥有的：

**1 域：** example.com

**4 个网络文件夹：**

*   [root]\Global - 单页 HTML 站点
*   [root]\Classic1 - 经典 ASP 站点
*   [根]\Classic2 - .Net 2.0 站点
*   [root]\Redesign - 具有地理位置的 .Net 4.0 站点

带有 IIS 7 的 Windows Server 2008 R2

**背景**

*example.com*是一个按国家/地区提供本地化站点的网站。含义*example.com/us*适用于美国用户，*example.com* /uk适用于欧洲用户，*example.com* /AU适用于澳大利亚用户等。

*example.com*共有 20 个不同的国家/地区站点，其中*example.com*有一个带有国家/地区链接索引的登录页面。

 ***目标**

*重新设计*是一个开发的新站点，它应该接管一切，这样我们就可以摆脱其他 3 个站点。它在登录页面上具有地理定位功能，这将确定在网站上显示哪组特定于国家/地区的数据。根据检测到的国家/地区，它将通过将国家/地区代码附加到 URL 来重写 URL，例如*example.com/au*。

但是，我的任务是一次只启动几个国家/地区的*Redesign*，因为数据输入人员需要时间来设置每个国家/地区。

这是现在需要发生的事情：

*   example.com => [root]\Global
*   example.com\uk => [根]\Classic1
*   example.com\us => [root]\Classic2
*   example.com\au => [根]\重新设计
*   example.com\xx => [root]\Classic1

……等等。

**问题**

首先，我在 IIS 中创建了一个指向 [root]\Global 的站点。

然后，我为每个国家/地区创建了一个虚拟目录，并让每个国家/地区都指向相应的目录。

但是，因为*Redesign*有地理位置，它会自动将 URL 重写为：example.com\au => example.com\au\us

现在，如果我将*Redesign*设置为全局站点，然后将其他经典站点设置为虚拟目录，则地理位置将与虚拟目录路径冲突：

*   example.com\us =? [根]\重新设计
*   example.com\us =? [根]\经典2

这就是我卡住的地方。有人有任何反馈和建议吗？*

# database - 在没有数据库的情况下运行 WordPress

> ID：13238308
> 
> 赞同：5
> 
> 时间：2012-11-05T18:43:11.567
> 
> 标签：database, wordpress

我正在寻找一种方法来配置 WordPress 以仅使用文件系统数据库运行。

有点像 Java 或内存中的 H2。任何人？

仅用于演示目的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T18:44:25.737

不可能，Wordpress 的要求之一是 MySQL：[http ://wordpress.org/about/requirements/](http://wordpress.org/about/requirements/)

如果你只需要一个演示站点，你可以很容易地在 Windows 上使用[XAMPP](http://www.apachefriends.org/en/xampp.html)运行 MySQL 的本地实例（技术上也是 Mac），但我更喜欢Mac 版的[MAMP](http://www.mamp.info/en/index.html)。

# vb.net - 使用 Visual Basic 插入另一行

> ID：13238315
> 
> 赞同：0
> 
> 时间：2012-11-05T18:43:41.413
> 
> 标签：vb.net, visual-studio-2010

将输入插入新行

```
'Set the ini Path'
Dim iniPath As String = "settings.ini"
'Set Text into ini File
Dim settings As String = TextBox2.Text
'Appends New Line to the settings file
My.Computer.FileSystem.WriteAllText(iniPath, settings, True) 
```

此时我希望设置在放入设置文件时换行。例如; 如果我将 Setting1 放入文件中，然后在另一个时间将设置 2 放入文件中，它将产生 `Setting1Setting 2`

我希望它在哪里生产

```
Setting1
Setting 2 
```

有人知道我如何在 Visual Basic 2010 中做到这一点吗？一点澄清：

因此，在项目中，您可以选择添加应用程序配置文件，然后将其显示为 settings.config。例如，我希望它能够通过文本框进行编辑；TextBox2.Text=ServerIP.Text 这样当他们点击 TextBox2.Text 并输入 192.168.1.12 然后点击保存时，它会将 192.168.1.12 作为保存的 IP 写入他们的配置中，他们可以稍后将其拉起并切换之间。希望这对任何可能有任何想法的人来说更有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:48:30.777

您将需要找到一种方法将每个设置与它们分开`TextBox2.Text`，然后`VbCrLf`在它们之间添加一个。试试这个看看它是如何工作的：

```
My.Computer.FileSystem.WriteAllText(iniPath, "Setting1" & VbCrLf & "Setting 2", True) 
```

# python - Python，在列表列表中将第一个列表的第一个元素与第二个列表的第一个元素进行比较

> ID：13238317
> 
> 赞同：2
> 
> 时间：2012-11-05T18:43:44.347
> 
> 标签：python, list, subtraction

所以我有这个：

```
a = [[4, 8], [5, 6, 9, 10], [13]] 
```

我想得到以下之间的差异（减法）：

```
4 - 5 = a[0][0] - a[1][0]

4 - 6 = a[0][0] - a[1][1]

4 - 9 = a[0][0] - a[1][2]

4 - 10 = a[0][0] - a[1][3] 
```

然后转到 8：

```
8 - 5 = a[0][1] - a[1][0]

8 - 6 = a[0][1] - a[1][1]

... 
```

以此类推所有子列表

有任何想法吗？

编辑：其他比较看起来像这样：

```
5 - 13 = a[1][0] - a[2][0]

6 - 13 = a[1][1] - a[2][0]

9 - 13 = a[1][2] - a[2][0]

10 - 13 = a[1][3] - a[2][0] 
```

因为这是倒数第二个列表，所以它停止了。

我正在尝试实现 Quine-McCluskey 方法以最小化逻辑表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:50:34.547

像这样的东西做你想要的，

但我不知道你需要什么进一步的迭代，因为这个问题很模糊。你用13做什么？

```
>>> from itertools import product
>>> [i[0] - i[1] for i in product([4, 8], [5, 6, 9, 10])]
[-1, -2, -5, -6, 3, 2, -1, -2] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:57:49.300

假设完成后`a[0][1] - a[1][x]`你想继续`a[0][0] - a[2][0]`，然后最终也这样做`a[1][0] - a[2][0]`：

```
result = []
for i, sub_x in enumerate(a[:-1]):
    for sub_y in a[i+1:]:
        for x in sub_x:
            result.append([x - y for y in sub_y])

>>> result
[[-1, -2, -5, -6], [3, 2, -1, -2], [-9], [-5], [-8], [-7], [-4], [-3]] 
```

作为列表理解：

```
[[x - y for y in sub_y]
     for i, sub_x in enumerate(a[:-1]) for sub_y in a[i+1:] for x in sub_x] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T18:43:13.617

```
 python 3.2
    a=[[4, 8], [5, 6, 9, 10], [13]] 
    [[x-y for x in a[i]for y in a[i+1]]for i in range(len(a)-1)]

    >>>[[-1, -2, -5, -6, 3, 2, -1, -2], [-8, -7, -4, -3]]

   another way:
    for i in range(len(a)-1):
          for v in a[i]:
              y.append(list(v-h for h in a[i+1])) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T18:58:41.500

如果这是您要查找的内容，则此代码将为您提供表中每个元素与下一行中每个元素的差异：

```
output = []
for row_num in range(len(a)-1):
  row_output = []
  output.append(row_output)
  for elt_row in a[row_num]:
    elt_output = []
    row_output.append(elt_output)
    for elt_next_row in a[row_num + 1]:
      elt_output.append(elt_row - elt_next_row) 
```

# django - nginx 无法从 memcahed 获取密钥

> ID：13238320
> 
> 赞同：1
> 
> 时间：2012-11-05T18:44:01.117
> 
> 标签：django, nginx, memcached

问题是 nginx 不获取 memcached 中存在的 memcached 键，每次我请求链接时都会发生这种情况。

memcached 日志：

向 memcached 发出键“site-/links”的 Nginx 请求失败：（但 memcached 中的键数据）

```
<31 new auto-negotiating client connection
31: Client using the ascii protocol
<31 get site-/links                  ### NO DATA SEND! but it in cache
>31 END
<31 connection closed. 
```

带有键“site-/links”的 Django 请求成功获取数据

```
<31 get :1:mkey
>31 sending key :1:mkeys 0 4
mval

(dp1
.

>31 END
<31 get :1:site-/links
>31 sending key :1:site-/links         ###data send!
>31 END
<31 set :1:site-/links 0 300 5518
>31 STORED
<31 set :1:mkey 0 300 4
>31 STORED
<31 connection closed. 
```

我用于 memcached 的 nginx 配置文件：

```
location / {
default_type  "text/html; charset=utf-8";
set $memcached_key site-$uri;
    memcached_pass 127.0.0.1:11211;
    error_page     404 502 = @django;

}

location @django {
    include uwsgi_params;
    uwsgi_pass unix:///var/tmp/site.sock;
} 
```

django 中间件：

```
class NginxMemCacheMiddleWare(object):
    def process_response(self, request, response):
        cacheIt = True
        theUrl = request.get_full_path()

        # if it's a GET then store it in the cache:
        if request.method != 'GET':
            cacheIt = False

        # loop on our CACHE_INGORE_REGEXPS and ignore
        # certain urls.
        for exp in settings.CACHE_IGNORE_REGEXPS:
            if re.match(exp,theUrl):
                cacheIt = False

        if cacheIt:
            key = '%s-%s' % (settings.CACHE_KEY_PREFIX,theUrl)
            #key = theUrl
            print "CACHE!"
            print key

            print "MKEY:",cache.get("mkey")
            print cache.get(key)
            cache.set(key,response.content)
            cache.set("mkey","mval")

        return response 
```

那么为什么 nginx 不能使用 memcached 中的密钥获取数据并且总是去 django uwsgi 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T20:00:08.957

from your memcached logs, your nginx is doing:

```
get site-/links 
```

while your django is doing:

```
get :1:site-/links 
```

Note: those are not the same keys, the django one has `:1:` in front! (the `:1:` is propably added automatically by django as a sort of namespace)

In other words change your ningx config to match the following `location`-block:

```
location / {
  default_type  "text/html; charset=utf-8";
  set $memcached_key :1:site-$uri;
  memcached_pass 127.0.0.1:11211;
  error_page     404 502 = @django;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T20:12:59.123

我使用相同的设置，这是一个问题。

Django 的缓存使用分代缓存，并在密钥生成器中放置一个前缀。

您需要做的是确保您`set`从`django.core.cache.cache._cache`<-- 内部 memcached 绑定。

```
from django.core.cache import cache

cache._cache.set(...) 
```

为了使这项工作在我使用的本地环境中工作，我使用一个返回自身的属性进行`DummyCache`子类化。`DummyCache``_cache`

PS：为荒谬的表现做好准备。我目前受到 100 兆位的出站流量上限的限制。

# objective-c - 转场期间的 EXC_BAD_ACCESS？

> ID：13238322
> 
> 赞同：3
> 
> 时间：2012-11-05T18:44:08.017
> 
> 标签：objective-c, ios

我遇到了一个问题，我的应用程序运行 iOS 6 的访问代码错误。我目前正在转到另一个`navigationBar`基于的`view`，并且在我要转到的类中获取错误的访问代码（在 segue 期间！）。跟踪可以追溯到我在 Dealloc 中发布的第一件事（这只是一个标准`UILabel`）。

这可能是 iOS 6 的问题吗？我认为`dealloc`从 iOS 6 开始就已弃用？有没有人有任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:56:55.053

您不能将 release 与 ARC 一起使用。您甚至可能不需要覆盖 dealloc。

# android - Android - 如何放置一个从 sdcard 或相机胶卷加载图像的图像视图？

> ID：13238326
> 
> 赞同：0
> 
> 时间：2012-11-05T18:44:15.120
> 
> 标签：android, android-intent, android-camera, android-imageview, android-sdcard

我正在编写一个应用程序，我需要放置一个图像视图，用户必须通过单击它来加载图像。单击“我要”后，用户可以选择他是打算从手机本身加载存储的图像还是从它的相机拍摄新照片。

这个问题可能是多余的，但这里揭示的类似问题/问题几乎都没有达到我想要做的事情。

Ps 我正在使用安装了 Eclipse 4.2 (JUNO) SDK 的 Android API15。

这是主要活动的片段代码，它给了我一个错误：

```
 package test.imgbyte.conerter;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;

import android.net.Uri;
import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.widget.Button;
import android.widget.ImageView;
import android.view.View;

public class FindImgPathActivity extends Activity 
{

      private Uri mImageCaptureUri;
      static final int CAMERA_PIC_REQUEST = 1337; 

      public void onCreate(Bundle savedInstanceState)
      {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.imgfilepath);

        Button camera = (Button) findViewById(R.id.btnLoad);
        camera.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {
                Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                cameraIntent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, mImageCaptureUri);
                startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);               
            }               
        });

      }
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) 
    {
        super.onActivityResult(requestCode, resultCode, data);
        if (requestCode == CAMERA_PIC_REQUEST) 
        {  
            Bitmap thumbnail = (Bitmap) data.getExtras().get("data");
            ImageView image = (ImageView) findViewById(R.id.imgLoaded);  
            image.setImageBitmap(thumbnail);  

            String pathToImage = mImageCaptureUri.getPath();

            // pathToImage is a path you need. 

            // If image file is not in there, 
            //  you can save it yourself manually with this code:
            File file = new File(pathToImage);

            FileOutputStream fOut;
            try 
            {
                fOut = new FileOutputStream(file);
                thumbnail.compress(Bitmap.CompressFormat.JPEG, 100, fOut); // You can choose any format you want
            } 
            catch (FileNotFoundException e) 
            {
                e.printStackTrace();
            }

        }  
    }    
} 
```

我从 LogCat 得到的错误是这样的：

```
11-05 19:23:11.777: E/AndroidRuntime(1206): FATAL EXCEPTION: main
11-05 19:23:11.777: E/AndroidRuntime(1206): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1337, result=-1, data=Intent { act=inline-data (has extras) }} to activity {test.imgbyte.conerter/test.imgbyte.conerter.FindImgPathActivity}: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T19:09:59.140

啊。这个错误。我花了很长时间来解读它的含义，显然结果有一些你试图访问的空字段。在您的情况下，您尚未使用文件真正初始化的是 mImageCaptureUri 字段。启动相机意图的方法是创建一个文件，并将其 Uri 作为 EXTRA_OUTPUT 传递给意图。

```
File tempFile = new File("blah.jpg");
...
cameraIntent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, Uri.fromFile(tempFile));
... 
```

然后，您可以使用 file.getAbsolutePath() 方法来加载位图。

鉴于我们在这一点上，让我与您分享我上周学到的关于直接加载位图的非常重要的一点……不要这样做！我花了一个星期才明白为什么，当我明白的时候，我简直不敢相信我之前没有明白，这完全是记忆的游戏。

使用此代码有效地加载位图。（一旦你有了文件，只需在 BitmapFactory.decodeFile() 中使用 file.getAbsolutePath()）：

```
public static int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight) {
        // Raw height and width of image
        final int height = options.outHeight;
        final int width = options.outWidth;
        int inSampleSize = 1;

        if (height > reqHeight || width > reqWidth) {
            if (width > height) {
                inSampleSize = Math.round((float)height / (float)reqHeight);
            } else {
                inSampleSize = Math.round((float)width / (float)reqWidth);
            }
        }
        return inSampleSize;
    }

    public static Bitmap decodeSampledBitmapFromPath(String path, int reqWidth, int reqHeight) {

        // First decode with inJustDecodeBounds=true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(path, options);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;
        return BitmapFactory.decodeFile(path, options);
    } 
```

只需将您的 file.getAbsolutePath() 作为第一个参数以及所需的宽度和高度传递给 decodeSampledBitmapFromPath 函数即可获得有效加载的位图。此代码是从Android 文档上的[版本](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)修改而来的。

**编辑：**

```
private Uri mImageCaptureUri; // This needs to be initialized.
      static final int CAMERA_PIC_REQUEST = 1337; 
private String filePath;

      public void onCreate(Bundle savedInstanceState)
      {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.imgfilepath);
// Just a temporary solution, you're supposed to load whichever directory you need here
        File mediaFile = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), "Temp1.jpg");
filePath = mediaFile.getABsolutePath();

        Button camera = (Button) findViewById(R.id.btnLoad);
        camera.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {
                Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                cameraIntent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, Uri.fromFile(mediaFile));
                startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);               
            }               
        });

      }
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) 
    {
        super.onActivityResult(requestCode, resultCode, data);
        if (requestCode == CAMERA_PIC_REQUEST) 
        {  
            if(resultCode == RESULT_OK)
          {
int THUMBNAIL_SIZE = 64;
// Rest assured, if the result is OK, you're file is at that location
            Bitmap thumbnail = decodeSampledBitmapFromPath(filePath, THUMBNAIL_SIZE, THUMBNAIL_SIZE); // This assumes you've included the method I mentioned above for optimization
            ImageView image = (ImageView) findViewById(R.id.imgLoaded);  
            image.setImageBitmap(thumbnail);  
          }
    }    
} 
```

# java - 使用多个 jar 运行执行

> ID：13238331
> 
> 赞同：0
> 
> 时间：2012-11-05T18:44:34.937
> 
> 标签：java, jar, executable-jar

如何运行需要多个 jar 才能工作的 jar？让我解释一下，例如，我有一个带有 jar “ `Main.jar`” 的项目，但要运行它`Main.jar`我需要`jdom.jar`（对于 xml 文件），`jGit.jar`...

假设我们需要两个以上的罐子。我怎样才能运行我的`Main.jar`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:46:24.493

使用主类运行 jar 并将所有其他 jar 添加到类路径。

```
java -cp yourJars yourClass 
```

看到这篇[文章](https://stackoverflow.com/questions/5774970/run-jar-file-in-command-prompt)了解更多信息。请参阅此[java 教程](http://docs.oracle.com/javase/tutorial/deployment/jar/run.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:46:58.580

通过在类路径中包含所需的 jar 文件。就像是：

```
 java -cp "Main.jar;jdom.jar;jdom.jar" MainClass 
```

如果您在 Windows 下并希望`Main.jar`通过双击来执行，您将需要创建一个`.bat`文件并使用该文件来运行您的程序。该`.bat`文件的内容将具有上述命令。

在 Unix/Linux 下，您将创建一个具有相似内容的 shell 文件。

请注意，`-cp`参数值需要包含 Main.jar 所依赖的所有 jar。

# nginx - 当上游 Web 服务器关闭时，如何在 nginx 中立即显示自定义页面？

> ID：13238334
> 
> 赞同：2
> 
> 时间：2012-11-05T18:44:45.223
> 
> 标签：nginx, webserver

我试图这样做，但由于某种原因它确实按预期工作：

```
server {
...
location / {
    if (!-f /opt/jira/work/catalina.pid) {
       return 503;
    }
proxy_pass   http://127.0.0.1:8080;
} 
```

似乎文件测试不起作用，因为即使文件存在于磁盘上，它也会返回 503。

我希望能够在上游网络服务器没有响应但无需等待太多时显示错误页面。如果端口 8080 上没有任何运行，它应该立即响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:09:52.947

nginx worker 可能无法访问该文件。您应该检查权限。

# html - 图像被截断

> ID：13238337
> 
> 赞同：0
> 
> 时间：2012-11-05T18:44:52.077
> 
> 标签：html, css, image, z-index

我正在尝试在页面上插入图片。图片有弯曲的边缘。左边总是出现，右边有时会出现。当我将图像推到最右边时，右边缘会变成 90 度边缘。它只在 IE 中执行此操作。有谁知道为什么会这样？如果它有帮助的话，这里是代码。我试着给它一个 z-index:100; 但这不起作用，除非我做错了......

```
#userproftemp {
  background-image: url(%Image(NCC_CONTAINER_FL_B_FOOTER_PNG));
  background-repeat:no-repeat;
  margin-bottom:-27px;
  margin-right:-20px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:48:38.063

为该元素指定与图像大小相匹配的大小可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:49:00.073

确保#userproftemp 始终与其背景图像一样宽，这样它就不会被截断。

# asp.net - 如何在 Simile Timeline 中重新加载数据

> ID：13238339
> 
> 赞同：5
> 
> 时间：2012-11-05T18:44:54.007
> 
> 标签：asp.net, xml, timeline, simile

我创建了一个 SIMILE 时间轴，它使用 XML 文件作为数据源，该数据源由调用 aspx 命令时的方法创建。问题是当 XML 文件更新时，时间轴不会更新，而是显示第一次加载的数据。仅当我关闭浏览器并使用时间轴再次打开 Web 应用程序时，才会刷新数据。即使我转到我的 Web 应用程序的另一个页面，然后返回到带有时间轴的页面，显示的数据仍然是相同的。我已经确认在调用创建时间轴的脚本之前创建/更新了 XML 文件，并且我还尝试了一些技巧，例如强制 PageLoad()、执行 Response.Redirect() 并且不使用缓存。我的函数 onLoad() 类似于 simile-widget 提供的原始函数。代码：

```
 <head>
      ...
      <meta http-equiv="pragma" content="no-cache" />
      <META HTTP-EQUIV="Expires" CONTENT="-1">
      ...
      var tl;
      function onLoad() {
        $(document).ready(function() {
            var eventSource1 = new Timeline.DefaultEventSource(0);
            var theme1 = Timeline.ClassicTheme.create();
            theme1.timeline_start = new Date(Date.UTC(2010, 0, 1));
            theme1.timeline_stop = new Date(Date.UTC(2014, 0, 1));
            var d = theme1.timeline_start;
            var bandInfos = [
            Timeline.createBandInfo({ ... }),
            Timeline.createBandInfo({ ... })
       ];
            bandInfos[1].syncWith = 0;
            bandInfos[1].highlight = true;

            // create the Timeline
            tl = Timeline.create(document.getElementById("tl"), bandInfos);
            var url = '.';

            // references in the data
            tl.loadXML("batch_data.xml", function(xml, url) 
            {eventSource1.loadXML(xml, url); });
            tl.finishedEventLoading();
        });
    }
    ...
    </head>

    <body onload="onLoad();" onresize="onResize();">
      <form id="form1" runat="server">
                <div id="tl" runat="server">
                ...
                </div>
      </form>   
    </body> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-07T16:22:59.063

包装 javascript 代码 onLoad 函数的第一条线索。尝试使用 onClick 事件函数创建一个按钮来更新页面。如果你想升级一段时间，可以使用 JavaScript 计时事件。

[这是指向计时事件示例的文档的链接](http://www.w3schools.com/js/js_timing.asp)

我把这个例子尽可能简单：

```
 setInterval(function(){alert("Hello")},3000); 
```

这是sintax

```
window.setInterval("javascript function",milliseconds); 
```

# php - Jquery $.post 返回错误的数据

> ID：13238340
> 
> 赞同：1
> 
> 时间：2012-11-05T18:44:58.467
> 
> 标签：php, javascript, jquery, mysql, ajax

当我的 ajax 被处理时

```
$.post("main.php", 
          {data: $(this).text()}, 
          function(data) {
               //alert("Data saved.");
               $('#demo').html(data);
          }); 
```

而不是得到我在下面的查询中指定的

```
if (isset($_POST['data'])){
$data = $_POST['data'];

    $query = mysql_query("SELECT * FROM tempusers
    WHERE 'firstname' LIKE '%$data%' 
        OR 'lastname' LIKE '%$data%' 
        OR 'title' LIKE '%$data%'");

    while($row=mysql_fetch_assoc($query)){
                $firstname=$row['firstname'];
                $lastname=$row['lastname'];
                $grade=$row['grade'];

    echo $grade; 
```

相反，我返回了页面中的所有元素。所以换句话说在下面的div中

```
 <div id="demo"></div> 
```

我正在返回我的页面。所以它显示为网站中的网站。它甚至不会显示`echo $grade;`我认为这是我的查询在起作用，但我尝试注释掉查询并在`echo $data` ***下面查看***

```
if (isset($_POST['data'])){
$data = $_POST['data'];
echo $data; 
```

这样做给了我与前面所说的“在网站内呼应网站”相同的结果，也呼应了我想要的 $data。我会很高兴了解这是如何发生的，以及我可以做些什么来解决这个问题并纠正我的 isset 函数/ajax。任何其他提示将不胜感激。我知道我需要将查询更改为 PDO 并计划它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:51:48.630

回显您想要的内容后，请显式退出以终止任何进一步的脚本执行。

```
 echo $grade;
 exit; 
```

如果成绩回显在循环中，则在循环终止后放置出口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:54:11.037

当您进行 echo ajax 时，会将其作为响应并关闭连接（因此您只会从服务器收到一个答案），

所以我的建议是，连接之前的所有值来回显。您可以使用 json 编码和解码来传递值并将它们显示出来。

Json 编码 php => [http://php.net/manual/es/function.json-encode.php](http://php.net/manual/es/function.json-encode.php)

Javascript json decode =>[如何在 JavaScript 中对数组元素进行 JSON 解码？](https://stackoverflow.com/questions/182410/how-to-json-decode-array-elements-in-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T20:00:55.500

问题是您正在回显“数据”并且正在发送“数据”：

```
 {data: $(this).text()}, 
```

So the problem is in the this.text, when u say this, what are u referring to? it must be taking a whole website and sending it, then returning it and then posting it to the div.

try doing this first:

```
 {data: "test"}, 
```

if the returned result is "test" then the problem is jQuery sending everything. and you can fix that by removing th $(this) and replacing it with $("#someid").html();

# perl - 我可以在 Perl 的另一个散列中重命名散列键吗？

> ID：13238341
> 
> 赞同：2
> 
> 时间：2012-11-05T18:45:01.880
> 
> 标签：perl, hash-of-hashes

我有一个散列（HoH）的散列，我`select_allhashref`在 mysql 查询中使用它。该格式非常适合我想要的，并且我通过类似的方式还有另外两个 HoH。

我想最终将这些 HoH 合并在一起，唯一的问题（我认为）是一个 HoH 的“子哈希”中有一个键，它与另一个 HoH 中的一个键名相同。例如

```
my $statement1 = "select id, name, age, height from school_db";
my $school_hashref = $dbh->selectall_hashref($statement1, 1);

my $statement2 = "select id, name, address, post_code from address_db";    
my $address_hashref = $dbh->selectall_hashref($statement2, 1); 
```

因此，当我转储数据时，我会得到如下结果：

```
$VAR1 = {
          '57494' => {
                       'name' => 'John Smith',
                       'age' => '9',
                       'height' => '120'
                     }
        }
};
$VAR1 = {
          '57494' => {
                       'name' => 'Peter Smith',
                       'address' => '5 Cambridge Road',
                       'post_code' => 'CR5 0FS'
                     }
        }
}; 
```

（这是一个示例，因此使用不同的名称可能看起来不合逻辑，但我需要它:)）

所以我想重命名`'name'`为`'address_name'`或这样。这可能吗？我知道你能做到

```
$hashref->{$newkey} = delete $hashref->{$oldkey}; 
```

（编辑：这是我在网上找到的一个示例，但尚未测试。）

但我不知道我将如何代表这个`'id'`角色。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T19:31:03.440

不知道将它们合并在一起的方式，最简单的解决方案可能是简单地更改选择语句以重命名结果中的列。而不是试图在之后操纵哈希。

```
my $statement2 = "select id, name as address_name, address, post_code from address_db";    
my $address_hashref = $dbh->selectall_hashref($statement2, 1); 
```

如果这对您来说不是一个现实的选择，那么循环可能是您的最佳选择

```
foreach (keys %{$address_hashref}) {
  $address_hashref->{$_}{$newkey} = delete $address_hashref->{$_}{$oldkey}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T19:36:33.217

`$hashref->{$newkey} = delete $hashref->{$oldkey};`由于散列的实现方式，您已经这样做了。

您也可以使用散列的散列来做到这一点。

```
$hashref->{$key_id}{$newKey} = delete $hashref->{$key_id}{$oldKey}; 
```

哈希函数用于将键转换为要查找相应值的数组元素（槽或桶）的索引（哈希）。

这是一个简单的例子：

我们的哈希

```
{
   'a' => "apples",
   'b' => "oranges"
} 
```

让我们定义我们的哈希函数`idx = h(key)`，并使用上面键上的函数给我们：

```
h('a') = 02;
h('b') = 00; 
```

它如何存储在数组或存储桶中

```
idx  | value
00   | 'oranges'
01   | ''
02   | 'apples'
03   | ''
... and so on 
```

Say we want they key of 'apples' to be 'c'. We cannot simply change the key to 'c', since the hash function always returns 02 for 'a', and will return something different for 'c'. So, if we want to change the key, we also have to move the value to the correct idx in the array/bucket.

Well, it might not be different, but that is a collision. Collisions are a special case that to be handled when implementing a hash.

For more info about on hashes:

[http://en.wikipedia.org/wiki/Hash_table](http://en.wikipedia.org/wiki/Hash_table)

[How are hash tables implemented internally in popular languages?](https://stackoverflow.com/questions/903207/how-are-hash-tables-implemented-internally-in-popular-languages)

# symfony - 将验证码集成到 Symfony2 FOSUserBundle 注册中的最简单方法是什么？

> ID：13238348
> 
> 赞同：5
> 
> 时间：2012-11-05T18:45:32.470
> 
> 标签：symfony, captcha, fosuserbundle

我正在使用 Symfony2 和 FOSUserBundle 来管理注册和登录。我想添加一个验证码系统。是否有预先存在的捆绑包或教程？

当然，我可以尝试使用 Google re-captcha 自行开发。在这种情况下，Google reCaptcha 是一个不错的选择，还是应该使用其他 API？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T19:12:04.977

确实有一个捆绑包，看看：

[验证码包](https://github.com/Gregwar/CaptchaBundle)

或者

[EWZRecaptchaBundle](https://github.com/excelwebzone/EWZRecaptchaBundle)

两者都（很可能）在 README.md 文件或扩展文档中添加了您需要的所有文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-19T10:02:16.693

我刚刚写了一个名为[caitcha-bundle 的小包](https://github.com/mktcode/caitcha-bundle)。

根据[fos 用户包文档](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_forms.md)的这一部分，实现应该很容易，因为您只需要激活 caitcha 包并添加`$builder->add('caitcha', 'caitcha');`到表单类型。

因为验证码图像和任何其他需要与表单本身无关的用户交互的方法在我的选择中非常烦人，所以我尝试通过使用蜜罐方法和检查填充时间来实现隐形机器人保护在表格中。它适用于我的用例，但我想仍然需要通过更多检查来扩展。对于改进此捆绑包的任何建议，我将不胜感激。

# python - Scrapy + Tor + Mongodb

> ID：13238357
> 
> 赞同：0
> 
> 时间：2012-11-05T18:46:20.517
> 
> 标签：python, mongodb, scrapy, tor

我在使用 Scrapy + Mongodb 和 Tor 时遇到问题。当我尝试在 Scrapy 中使用 mongodb 管道时出现以下错误。

```
2012-11-05 13:41:14-0500 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware
|S-chain|-<>-127.0.0.1:9050-<><>-127.0.0.1:27017-<--denied
Traceback (most recent call last):
  File "/usr/bin/scrapy", line 4, in <module>
    execute()
  File "/usr/lib/python2.7/dist-packages/scrapy/cmdline.py", line 131, in execute
    _run_print_help(parser, _run_command, cmd, args, opts)
  File "/usr/lib/python2.7/dist-packages/scrapy/cmdline.py", line 97, in _run_print_help
    func(*a, **kw)
  File "/usr/lib/python2.7/dist-packages/scrapy/cmdline.py", line 138, in _run_command
    cmd.run(args, opts)
  File "/usr/lib/python2.7/dist-packages/scrapy/commands/crawl.py", line 42, in run
    q = self.crawler.queue
  File "/usr/lib/python2.7/dist-packages/scrapy/command.py", line 33, in crawler
    self._crawler.configure()
  File "/usr/lib/python2.7/dist-packages/scrapy/crawler.py", line 43, in configure
    self.engine = ExecutionEngine(self.settings, self._spider_closed)
  File "/usr/lib/python2.7/dist-packages/scrapy/core/engine.py", line 33, in __init__
    self.scraper = Scraper(self, self.settings)
  File "/usr/lib/python2.7/dist-packages/scrapy/core/scraper.py", line 66, in __init__
    self.itemproc = itemproc_cls.from_settings(settings)
  File "/usr/lib/python2.7/dist-packages/scrapy/middleware.py", line 33, in from_settings
    mw = mwcls()
  File "/home/bharani/ABCD_scraper/political_forum_scraper/pipelines.py", line 9, in __init__
    settings['MONGODB_PORT'])
  File "/usr/local/lib/python2.7/dist-packages/pymongo/connection.py", line 290, in __init__
    self.__find_node()
  File "/usr/local/lib/python2.7/dist-packages/pymongo/connection.py", line 586, in __find_node
    raise AutoReconnect(', '.join(errors))
pymongo.errors.AutoReconnect: could not connect to localhost:27017: [Errno 111] Connection refused 
```

我不知道如何解决这个问题。当我不使用`proxychains`时，它爬行得非常好。

任何帮助表示赞赏。

谢谢。

* * *

编辑：

它不是特定于代码的。请参阅此链接：http: [//isbullsh.it/2012/04/Web-crawling-with-scrapy/](http://isbullsh.it/2012/04/Web-crawling-with-scrapy/)

这是一个使用的简单`Scrapy`教程`MongoDB`。我们应该打电话

`scrapy crawl isbullshit`

运行运行良好的爬虫。要使用`Tor`，应该像这样调用它：

`proxychains scrapy crawl isbullshit`

这对我不起作用。教程的源代码在这里：[https ://github.com/BaltoRouberol/isbullshit-crawler](https://github.com/BaltoRouberol/isbullshit-crawler)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:50:13.673

```
pymongo.errors.AutoReconnect: could not connect to localhost:27017: [Errno 111] Connection refused 
```

您似乎无法连接到端口 27017 上的 localhost。这是正确的端口和正确的主机吗？确保这一点，还要确保 mongodb 服务器在后台运行，否则您将永远无法连接它。

如果 mongodb 在后台运行，请删除 mongodb.lock

```
rm -r/var/lib/mongodb 
```

并重新启动服务器，例如；

```
sudo service mongodb start 
```

在 Debian 或

```
sudo systemctl restart mongodb 
```

在 Arch Linux 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T06:51:43.390

可能是它试图将您的 MongoDB 连接 (localhost:27017) 重定向到 TOR。如果要从代理链中排除 localhost 连接，可以将以下行添加到*/etc/proxychains.conf*：

```
localnet 127.0.0.1 000 255.255.255.255 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-30T11:16:03.510

在设置 socks 代理之前打开 mongo 连接

# linq - Linq 不能隐式转换 DateTime,Double

> ID：13238361
> 
> 赞同：0
> 
> 时间：2012-11-05T18:46:43.310
> 
> 标签：linq, entity-framework

我得到以下信息：

无法将类型隐式转换`System.Collections.Generic.Dictionary<System.DateTime?,double?>`为`System.Collections.Generic.Dictionary<System.DateTime,double>`

当我尝试在实体框架中使用存储过程时

这是我拥有的代码：

```
 private Dictionary<DateTime, double> GetData(string columnName)
    {
        return db.SysReading(columnName, Convert.ToString(LocId)).
            ToDictionary( a => a.DateCollected, a => a.ElementReading);

    } 
```

我正在调用一个名为 SysReading 的存储过程。当我将它转换为字典时，返回类型是可空的，这是我不想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:48:40.263

好吧，听起来像是`a.DateCollected`一个`DateTime?`属性，而不是`DateTime`. 如果您认为*所有*键都有值，则可以使用：

```
private Dictionary<DateTime, double> GetData(string columnName)
{
    return db.SysReading(columnName, Convert.ToString(LocId))
             .ToDictionary(a => a.DateCollected.Value, a => a.ElementReading);
} 
```

或者您可以过滤*然后*转换：

```
private Dictionary<DateTime, double> GetData(string columnName)
{
    return db.SysReading(columnName, Convert.ToString(LocId))
             .Where(a => a.DateCollected.HasValue)
             .ToDictionary(a => a.DateCollected.Value, a => a.ElementReading);
} 
```

或者，更改您的方法以返回`Dictionary<DateTime?, double>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:48:16.907

您需要显式返回不可为空的类型：

```
 return db.SysReading(columnName, Convert.ToString(LocId)).
        ToDictionary( a => a.DateCollected.Value, a => a.ElementReading.Value); 
```

如果这些值中的任何一个为空，这将引发异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:54:40.650

您正在访问`Nullable`值。（所以`DateTime?`而不是`DateTime`.

```
return db.SysReading(columnName, Convert.ToString(LocId)).
    ToDictionary( a => a.DateCollected.Value, a => a.ElementReading.Value); 
```

但是，如果这些值不应该是`NULL`，最好的做法（而不是假设这些值总是有一个值，然后调用`.Value`）应该是修改您的数据库以使这些列不可为空（`NOT NULL`）。

因此，调用您的方法将返回一个`Dictionary<System.DateTime,double>`对象。

```
return db.SysReading(columnName, Convert.ToString(LocId)).
    ToDictionary( a => a.DateCollected, a => a.ElementReading); 
```

# python - 如何迭代具有某个类的多个“div”，并 在类更改时停止？

> ID：13238370
> 
> 赞同：0
> 
> 时间：2012-11-05T18:47:09.063
> 
> 标签：python, beautifulsoup, loops

问题说明了一切，但几行..我有一个看起来像这样的 HTML 页面

```
 ...
<div class="line-up" .. > .. </>
<div class="line-down" ..> .. </>
<div class="line-down" ..> .. </>
<div class="line-down" ..> .. </>
            ...
<div class="line-up" ..> .. </>
<div class="line-down" ..> .. </> 
```

我希望能够遍历每个`<div class="line-down">`属于一个`<div class="line-up">` 并继续下一个`<div class="line-down"..>` 。我已经可以遍历每个`<div class="line-up">`：

```
for first_line in soup.findAll("div",class_="line-up"): 
```

但我只是找不到如何迭代下一个 div 并在某个点停止。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:54:54.753

首先，获取所有 div 标签-- `findAll("div")`，不用担心类。然后，遍历您的结果，如果`class=="line-down"`，则中断。

# ruby-on-rails - 如何测试回形针 URL？

> ID：13238371
> 
> 赞同：0
> 
> 时间：2012-11-05T18:47:12.897
> 
> 标签：ruby-on-rails, testing, paperclip, testunit

我正在使用`Test::Unit`，我想测试一个回形针网址。

现在，我有一个看起来像这样的测试：

```
 def test_our_custom_url
    dummy = Dummy.new(:image => File.open("#{RAILS_ROOT}/test/fixtures/12k.png"))
    dummy.save!
    assert_match "/system/images/1/original/12k.png", dummy.image.url
    dummy.reload
    assert_match "/system/images/1/original/12k.png", dummy.image.url
  end 
```

它像这样失败：

```
Expected /\/system\/images\/1\/original\/12k.png/ to match "/system/dummies/images/000/000/001/original/12k.png?1352140343". 
```

如何将`?1352140343`零件添加到测试中？

我在回形针源代码中看到他们似乎是这样定义[的](https://github.com/thoughtbot/paperclip/blob/master/lib/paperclip/url_generator.rb)：

```
def timestamp_as_needed(url, options)
  if options[:timestamp] && timestamp_possible?
    delimiter_char = url.match(/\?.+=/) ? '&' : '?'
    "#{url}#{delimiter_char}#{@attachment.updated_at.to_s}"
  else
    url
  end
end 
```

但是这样做会`dummy.updated_at.to_s`返回正常的日期/时间戳，而不是`1352140343`（在这种情况下）。

我正在使用本地存储，如果它有所作为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:23:03.270

`?1352140343`比较url的部分不好。

你可以比较你`received_url.starts_with?(expected_url)`只检查字符串的那部分......

# c - 从给定文本中删除字母重音符号

> ID：13238388
> 
> 赞同：3
> 
> 时间：2012-11-05T18:49:01.090
> 
> 标签：c, character-encoding, ascii, non-ascii-characters

也许我遗漏了一些明显的东西，但是有没有一种“无痛”的方法可以用不带重音的对应物替换给定文本中的重音字母？我只能使用标准的 ANSI C 库/头文件，所以我束手无策。到目前为止我已经尝试过：

```
unsigned char currentChar;

(...)

if (currentChar == 'à') { 
    currentChar = 'a'; 
}
else if (currentChar == 'è' || currentChar == 'é') {
    currentChar = 'e'; 
}
else if (...) 
```

但是，这不起作用。检测带有扩展 ASCII 值的重音元音也不是一种选择，因为我注意到它会根据系统区域设置而变化。

任何提示/建议？

（更新）

感谢您的回答，但我并没有真正要求解决这个问题的最佳方法 - 我稍后会考虑。我只是在寻求一种检测重音元音的方法，因为上面的代码只是忽略了它们。

（更新＃2）

好的。让我澄清一下：

```
#include <stdio.h>

int main(void) {
    int i;
    char vowels[6] = {'à','è','é','ì','ò','ù'};
    for (i = 0; i < 6; i++) {
        switch (vowels[i]) {
            case 'à': vowels[i] = 'a'; break;
            case 'è': vowels[i] = 'e'; break;
            case 'é': vowels[i] = 'e'; break;
            case 'ì': vowels[i] = 'i'; break;
            case 'ò': vowels[i] = 'o'; break;
            case 'ù': vowels[i] = 'u'; break;
        }
     }
     printf("\n");
     for (i = 0; i < 6; i++) {
         printf("%c",vowels[i]);
     }
     printf("\n");
     return 0;
} 
```

此代码仍然打印“àèéìòù”作为其输出。这是我的问题。我很欣赏这些答案，但是告诉我实现转换映射或 switch/case 结构是没有意义的。*我以后*会考虑的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T19:11:22.307

重音字符可能是 UTF-8 字符集或其他编码的一部分。您的程序正在使用该`char`类型，该类型通常使用[ASCII 字符集](http://www.asciitable.com/)。

在 ASCII 字符集中，每个字符由一个字节表示。此字符集不包括重音字符。

其他编码确实包含该字符，但它可能不是由单个字节表示，因此无法由您的代码处理。解决这个问题的方法通常是使用宽字符。

您需要的是[宽字符](https://en.wikipedia.org/wiki/Wide_character)。

[这个问题](https://stackoverflow.com/questions/11287213/what-is-a-wide-character-string-in-c-language)可能有更一般的解释。

[这个问题](https://stackoverflow.com/questions/1373463/handling-special-characters-in-c-utf-8-encoding)可能会为您的情况提供解决方案。

这段代码似乎做你想做的事：

```
#include <stdio.h>
#include <wchar.h>
#include <locale.h>
int main(int argc, char **argv){
    setlocale(LC_CTYPE, "");
    FILE *f = fopen(argv[1], "r");
    if (!f)
        return 1;

    for (wchar_t c; (c = fgetwc(f)) != WEOF;){
        switch (c) {
            case L'à': c=L'a'; break;
            case L'è': c=L'e';break;
            case L'é': c=L'e';break;
            case L'ì': c=L'i';break;
            case L'ò': c=L'o';break;
            case L'ù': c=L'u';break;
            default:    break;
        }
        wprintf(L"%lc", c);
    }

    fclose(f);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:53:45.857

可能有一种更简单的方法，一些我没有听说过的现有功能，但就结构而言，这就是我的处理方式：

建立一个由重音字符和结果字符组成的字符转换表。然后构建一个简单的循环来扫描表中的每个字符，如果找到，则进行更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T19:13:38.233

如果你写

```
if ( currentChar == (unsigned char)('è'))... 
```

鉴于您仅使用 std c 库的限制，您的方法应该有效，我看不出您是如何将其拉下来的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-04T18:00:48.957

让我们试试这个：

```
char p_RemoveAccent(char C)
{
    #define ACCENT_CHARS    "ÁÀÃÂÇáàãâçÉÊéêÍíÑÓÔÕñóôõÚÜúü"
    #define UNACCENT_CHARS  "AAAACaaaacEEeeIiNOOOnoooUUuu"

    const char *p_Char = memchr(ACCENT_CHARS, C, sizeof(ACCENT_CHARS));

    return (p_Char ? UNACCENT_CHARS[(p_Char - ACCENT_CHARS)] : C);
} 
```

# xslt - 如果仅存在指定值，则绕过 XSLT 转换

> ID：13238389
> 
> 赞同：0
> 
> 时间：2012-11-05T18:49:18.983
> 
> 标签：xslt

各位专家晚上好。我的要求如下。我正在根据不应传递的材料转换目标消息。如果目标消息包含某些材料，则这些材料将从目标中删除。

但是，我们还要检查目标消息是否只包含**(ONLY)**这些材料，那么转换根本不应该删除这些材料。

目前下面的代码是查找和删除有问题的材料。请建议如何忽略此新要求的转换。

我正在考虑选择->何时->其他情况。

提前谢谢了。

```
<xsl:output method="xml" indent="yes"/>
    <xsl:template match="node()">
        <xsl:copy>
            <xsl:copy-of select="@*"/>
            <xsl:apply-templates/>
        </xsl:copy>
    </xsl:template>

<xsl:template match="E1EDP01[E1EDP19/IDTNR ='407303']"/>
<xsl:template match="E1EDP01[E1EDP19/IDTNR ='243']"/>
<xsl:template match="E1EDP01[E1EDP19/IDTNR ='262']"/>
<xsl:template match="E1EDP01[E1EDP19/IDTNR ='265']"/>
<xsl:template match="E1EDP01[E1EDP19/IDTNR ='5624']"/>
<xsl:template match="E1EDP01[E1EDP19/IDTNR ='145416']"/> 
```

真诚的道歉：- 示例输入只有 2 个行项目，但仍应创建此输出。您可以多次复制 E1EDP01 位以适应其他 IDTNR 值。

谢谢吉姆。

```
<?xml version="1.0" encoding="UTF-8"?>
<ORDERS05><IDOC BEGIN="1">
<EDI_DC40 SEGMENT="1">
    <TABNAM>EDI_DC40</TABNAM>
    <DIRECT>2</DIRECT>
    <IDOCTYP>ORDERS05</IDOCTYP>
    <MESTYP>ORDERS</MESTYP>
    <SNDPOR>SNDPOR</SNDPOR>
    <SNDPRT>KU</SNDPRT>
    <SNDPFC>AG</SNDPFC>
    <SNDPRN>BWH</SNDPRN>
    <RCVPOR>RCVPOR</RCVPOR>
    <RCVPFC>LS</RCVPFC>
    <RCVPRN>RCVPRN</RCVPRN>
    </EDI_DC40>
    <E1EDK01 SEGMENT="1">
    <BSART>UB</BSART>
    <BELNR>4505345253</BELNR>
    </E1EDK01>
    <E1EDKA1 SEGMENT="1">
    <PARVW>AG</PARVW>
    <LIFNR>B15</LIFNR>
    <TELF1></TELF1>
    <BNAME></BNAME>
    </E1EDKA1>
    <E1EDKA1 SEGMENT="1">
    <PARVW>WE</PARVW>
    <LIFNR>B15</LIFNR>
    </E1EDKA1>
    <E1EDKA1 SEGMENT="1">
    <PARVW>LF</PARVW>
    </E1EDKA1>
    <E1EDK02 SEGMENT="1">
    <QUALF>001</QUALF>
    <BELNR>4505345253</BELNR>
    <DATUM>20121102T00:00:00</DATUM>
    <UZEIT>20121102T00:00:00</UZEIT>
    </E1EDK02>
    <E1EDP01 SEGMENT="1">
    <POSEX>00001</POSEX>
    <MENGE>1</MENGE>
    <MENEE>EA</MENEE>
    <VPREI>150.00</VPREI>
    <NETWR></NETWR>
    <CURCY>ZAR</CURCY>
    <E1EDP19 SEGMENT="1">
    <QUALF>001</QUALF>
    <IDTNR>145416</IDTNR>
    </E1EDP19>
    <E1EDPT1 SEGMENT="1">
    <TDID>ZERR</TDID>
    <TSSPRAS_ISO>EN</TSSPRAS_ISO>
    <E1EDPT2 SEGMENT="1">
    <TDLINE>Description: GAS CYL DBL NOZZLE 48KG EM</TDLINE>
    <TDFORMAT>*</TDFORMAT>
    </E1EDPT2>
    <E1EDPT2 SEGMENT="1">
    <TDLINE>UOM: EA</TDLINE>
    <TDFORMAT>*</TDFORMAT>
    </E1EDPT2>
    <E1EDPT2 SEGMENT="1">
    <TDLINE>Quantity: 1</TDLINE>
    <TDFORMAT>*</TDFORMAT>
    </E1EDPT2>
    <E1EDPT2 SEGMENT="1">
    <TDLINE>Unit Price: 150</TDLINE>
    <TDFORMAT>*</TDFORMAT>
    </E1EDPT2>
    <E1EDPT2 SEGMENT="1">
    <TDLINE>Customer Part Number: 145416</TDLINE>
    <TDFORMAT>*</TDFORMAT>
    </E1EDPT2></E1EDPT1>
    </E1EDP01>
    <E1EDP01 SEGMENT="1">
    <POSEX>00002</POSEX>
    <MENGE>1</MENGE>
    <MENEE>EA</MENEE>
    <VPREI>150.00</VPREI>
    <NETWR></NETWR>
    <CURCY>ZAR</CURCY>
    <E1EDP19 SEGMENT="1">
    <QUALF>001</QUALF>
    <IDTNR>407303</IDTNR>
    </E1EDP19>
    <E1EDPT1 SEGMENT="1">
    <TDID>ZERR</TDID>
    <TSSPRAS_ISO>EN</TSSPRAS_ISO>
    <E1EDPT2 SEGMENT="1">
    <TDLINE>Description: GAS CYL DBL NOZZLE 48KG EM</TDLINE>
    <TDFORMAT>*</TDFORMAT>
    </E1EDPT2>
    <E1EDPT2 SEGMENT="1">
    <TDLINE>UOM: EA</TDLINE>
    <TDFORMAT>*</TDFORMAT>
    </E1EDPT2>
    <E1EDPT2 SEGMENT="1">
    <TDLINE>Quantity: 1</TDLINE>
    <TDFORMAT>*</TDFORMAT>
    </E1EDPT2>
    <E1EDPT2 SEGMENT="1">
    <TDLINE>Unit Price: 150</TDLINE>
    <TDFORMAT>*</TDFORMAT>
    </E1EDPT2>
    <E1EDPT2 SEGMENT="1">
    <TDLINE>Customer Part Number: 407303</TDLINE>
    <TDFORMAT>*</TDFORMAT>
    </E1EDPT2></E1EDPT1>
    </E1EDP01>
    <E1EDS01 SEGMENT="1">
    <SUMID>001</SUMID>
    <SUMME>1</SUMME>
    </E1EDS01>
    <E1EDS01 SEGMENT="1">
    <SUMME>150.00</SUMME>
    <WAERQ>ZAR</WAERQ>
    </E1EDS01>
</IDOC> 
```

此示例将删除第 2 行，因为其中包含一个不会被 xslt 删除的项目。它应该只处理第一行。

```
 <?xml version="1.0" encoding="UTF-8"?>
   <ORDERS05>
<IDOC BEGIN="1">
    <EDI_DC40 SEGMENT="1">
    <TABNAM>EDI_DC40</TABNAM>
    <DIRECT>2</DIRECT>
    <IDOCTYP>ORDERS05</IDOCTYP>
    <MESTYP>ORDERS</MESTYP>
    <SNDPOR>SNDPOR</SNDPOR>
    <SNDPRT>KU</SNDPRT>
    <SNDPFC>AG</SNDPFC>
    <SNDPRN>BWH</SNDPRN>
    <RCVPOR>RCVPOR</RCVPOR>
    <RCVPFC>LS</RCVPFC>
    <RCVPRN>RCVPRN</RCVPRN>
    </EDI_DC40>
    <E1EDK01 SEGMENT="1">
    <BSART>UB</BSART>
    <BELNR>4504836702</BELNR>
    </E1EDK01>
    <E1EDKA1 SEGMENT="1">
    <PARVW>AG</PARVW>
    <LIFNR>1001600-S78</LIFNR>
    <TELF1></TELF1>
    <BNAME></BNAME>
    </E1EDKA1>
    <E1EDKA1 SEGMENT="1">
    <PARVW>WE</PARVW>
    <LIFNR>1001600-S78</LIFNR>
    </E1EDKA1>
    <E1EDKA1 SEGMENT="1">
    <PARVW>LF</PARVW>
    </E1EDKA1>
    <E1EDK02 SEGMENT="1">
    <QUALF>001</QUALF>
    <BELNR>4504836702</BELNR>
    <DATUM>20120423T00:00:00</DATUM>
    <UZEIT>20120423T00:00:00</UZEIT>
    </E1EDK02>
    <E1EDP01 SEGMENT="1">
    <POSEX>00001</POSEX>
    <MENGE>100</MENGE>
    <MENEE>EA</MENEE>
    <VPREI>156.18</VPREI>
    <NETWR></NETWR>
    <CURCY>ZAR</CURCY>
    <E1EDP19 SEGMENT="1">
    <QUALF>001</QUALF>
    <IDTNR>10220</IDTNR>
    </E1EDP19>
    <E1EDPT1 SEGMENT="1">
    <TDID>ZERR</TDID>
    <TSSPRAS_ISO>EN</TSSPRAS_ISO>
    <E1EDPT2 SEGMENT="1">
    <TDLINE>Description: GAS 9KG</TDLINE>
    <TDFORMAT>*</TDFORMAT>
    </E1EDPT2>
    <E1EDPT2 SEGMENT="1">
    <TDLINE>UOM: EA</TDLINE>
    <TDFORMAT>*</TDFORMAT>
    </E1EDPT2>
    <E1EDPT2 SEGMENT="1">
    <TDLINE>Quantity: 100</TDLINE>
    <TDFORMAT>*</TDFORMAT>
    </E1EDPT2>
    <E1EDPT2 SEGMENT="1">
    <TDLINE>Unit Price: 156.18</TDLINE>
    <TDFORMAT>*</TDFORMAT>
    </E1EDPT2>
    <E1EDPT2 SEGMENT="1">
    <TDLINE>Customer Part Number: 10220</TDLINE>
    <TDFORMAT>*</TDFORMAT>
    </E1EDPT2>
    </E1EDPT1>
    </E1EDP01>
    <E1EDP01 SEGMENT="1">
    <POSEX>00002</POSEX>
    <MENGE>1</MENGE>
    <MENEE>EA</MENEE>
    <VPREI>150.00</VPREI>
    <NETWR></NETWR>
    <CURCY>ZAR</CURCY>
    <E1EDP19 SEGMENT="1">
    <QUALF>001</QUALF>
    <IDTNR>243</IDTNR>
    </E1EDP19>
    <E1EDPT1 SEGMENT="1">
    <TDID>ZERR</TDID>
    <TSSPRAS_ISO>EN</TSSPRAS_ISO>
    <E1EDPT2 SEGMENT="1">
    <TDLINE>Description: GAS EMPTY 9 KG</TDLINE>
    <TDFORMAT>*</TDFORMAT>
    </E1EDPT2>
    <E1EDPT2 SEGMENT="1">
    <TDLINE>UOM: EA</TDLINE>
    <TDFORMAT>*</TDFORMAT>
    </E1EDPT2>
    <E1EDPT2 SEGMENT="1">
    <TDLINE>Quantity: 1</TDLINE>
    <TDFORMAT>*</TDFORMAT>
    </E1EDPT2>
    <E1EDPT2 SEGMENT="1">
    <TDLINE>Unit Price: 150</TDLINE>
    <TDFORMAT>*</TDFORMAT>
    </E1EDPT2>
    <E1EDPT2 SEGMENT="1">
    <TDLINE>Customer Part Number: 243</TDLINE>
    <TDFORMAT>*</TDFORMAT>
    </E1EDPT2>
    </E1EDPT1>
    </E1EDP01>
    <E1EDS01 SEGMENT="1">
    <SUMID>001</SUMID>
    <SUMME>2</SUMME>
    </E1EDS01>
    <E1EDS01 SEGMENT="1">
    <SUMME>30618.00</SUMME>
    <WAERQ>ZAR</WAERQ>
    </E1EDS01>
</IDOC>
   </ORDERS05> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:57:52.110

您可以通过双重否定来实现您的结果（您想直接复制根目录，只有没有不在您的材料列表中的元素）。

在这里，您有一个示例转换。

顺便说一句：我使用“map”变量来简化验证，就像[这篇](https://stackoverflow.com/questions/3626118/xslt-creating-a-map-in-xslt)文章中建议的那样。如果您使用的是 XSLT 2.0，则可以按照同一篇文章中的想法对其进行更多简化（直接使用变量，而不是使用 document('')）。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:mat="materials" exclude-result-prefixes="mat">
    <xsl:output method="xml" indent="yes"/>
    <mat:materials>
        <IDTNR>407303</IDTNR>
        <IDTNR>243</IDTNR>
        <IDTNR>262</IDTNR>
        <IDTNR>265</IDTNR>
        <IDTNR>5624</IDTNR>
        <IDTNR>145416</IDTNR>
    </mat:materials>
    <xsl:variable name="materials" select="document('')/*/mat:materials/IDTNR"/>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <xsl:template match="node()">
        <xsl:copy>
            <xsl:copy-of select="@*"/>
            <xsl:apply-templates/>
        </xsl:copy>
    </xsl:template>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <xsl:template match="E1EDP01[E1EDP19/IDTNR = $materials]"/>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <xsl:template match="ORDERS05[not(IDOC/E1EDP01/E1EDP19[not(IDTNR=$materials)])]">
        <xsl:copy-of select="."/>
    </xsl:template>
</xsl:stylesheet> 
```

我希望这有帮助！

卡尔斯

# jar - 使用 IzPack 重新安装时删除冲突的依赖项

> ID：13238390
> 
> 赞同：0
> 
> 时间：2012-11-05T18:49:20.337
> 
> 标签：jar, dependencies, conflict, izpack

我有一个 grails 应用程序和一个安装程序。一切正常，没有问题。但是，我最近更新了 HttpClient 的版本。当客户安装新版本的应用程序（不卸载旧版本）时，就会出现问题。IzPack 只是复制所有文件，替换具有相同名称的文件。因此，它会与旧版本的 HttpClient (4.0.1) 和新版本 (4.2) 产生冲突。具体来说，有 httpclient-xxx-4.2.jar 文件和 httpclient-xxx-4.2.jar 文件。由于此冲突，应用程序停止工作。

我想知道在 IzPack 复制新文件之前是否有任何方法可以删除 lib 目录的 jar 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:25:23.530

我按照这篇关于在安装后运行脚本文件的文章：http: [//maksim.sorokin.dk/it/2010/06/14/installation-with-izpack-launching-bat-files/](http://maksim.sorokin.dk/it/2010/06/14/installation-with-izpack-launching-bat-files/)

因此，我将 IzPack 配置为将 jar 文件提取到 templib 目录中，并创建了一个脚本来删除 lib 的 jar 文件并将新的 jar 从 templib 移动到 lib。

# bash - 解析bash命令的结果

> ID：13238396
> 
> 赞同：2
> 
> 时间：2012-11-05T18:49:41.773
> 
> 标签：bash, parsing

我是 bash 脚本的新手，正在尝试从 whois 结果中解析出信息，特别是 orgname 和 city 字段。将结果保存在字符串中然后解析字符串以获取相关信息的正确方法是什么？像：

```
 RESULT=whois <ip>
    # parse RESULT 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T19:22:28.670

可悲的是，`whois`输出似乎是供人类而非机器阅读的。它的格式取决于您对哪个根域感兴趣。例如，`whois uio.no`返回类似

```
NORID Handle...............: UIO2O-NORID
Type.......................: organization
Name.......................: UNIVERSITETET I OSLO
Id Type....................: organization_number
Id Number..................: 971035854
Registrar Handle...........: REG2-NORID
Post Address...............: Postboks 1059, Blindern 
```

同时`whois tasvideos.org`产生

```
Registrant ID:ACTR120531657
Registrant Name:Andres Delikat
Registrant Organization:tasvideos.org
Registrant Street1:5505G Creek Ridge Ln
Registrant Street2:
Registrant Street3:
Registrant City:Raleigh 
```

这只是为了表明解析这些内容将取决于您正在查看的内容，并且我提供的解决方案并非在所有情况下都有效。但提取此信息的最简单方法是调用`awk`并保留其输出。对于您可能想要的“.org”案例，它将是这样的：

```
info=$(whois $ip)
org=$(echo "$info" | awk -F : '$1=="Registrant Organization"{print $2}')
city=$(echo "$info" | awk -F : '$1=="Registrant City"{print $2}') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T19:00:40.370

请参阅此问题： [如何将变量设置为 Bash 中命令的输出？](https://stackoverflow.com/questions/4651437/how-to-set-a-bash-variable-equal-to-the-output-from-a-command)

```
cmd="yourcommand"
string=$($cmd)
echo $string 
```

# java - Android 中的签名

> ID：13238398
> 
> 赞同：0
> 
> 时间：2012-11-05T18:49:48.510
> 
> 标签：java, android, draw, paint, signature

我想创建一个类来为我的 Android 应用程序捕获人类签名。到目前为止我有这个代码：

```
public class DrawView extends View implements OnTouchListener {
    private static final String TAG = "DrawView";

    List<Point> points = new ArrayList<Point>();
    Paint paint = new Paint();
    long oldTime = 0;

    public DrawView(Context context) {
        super(context);
        setFocusable(true);
        setFocusableInTouchMode(true);

        this.setOnTouchListener(this);

        // paint.setColor(Color.BLACK);
        // paint.setAntiAlias(true);

        paint = new Paint(Paint.ANTI_ALIAS_FLAG);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeWidth(2);
        paint.setColor(Color.BLACK);
    }

    @Override
    public void onDraw(Canvas canvas) {
        Path path = new Path();

        if (points.size() > 1) {
            for (int i = points.size() - 2; i < points.size(); i++) {
                if (i >= 0) {
                    Point point = points.get(i);

                    if (i == 0) {
                        Point next = points.get(i + 1);
                        point.dx = ((next.x - point.x) / 3);
                        point.dy = ((next.y - point.y) / 3);
                    } else if (i == points.size() - 1) {
                        Point prev = points.get(i - 1);
                        point.dx = ((point.x - prev.x) / 3);
                        point.dy = ((point.y - prev.y) / 3);
                    } else {
                        Point next = points.get(i + 1);
                        Point prev = points.get(i - 1);
                        point.dx = ((next.x - prev.x) / 3);
                        point.dy = ((next.y - prev.y) / 3);
                    }
                }
            }
        }

        boolean first = true;
        for (int i = 0; i < points.size(); i++) {
            Point point = points.get(i);
            if (first) {
                first = false;
                path.moveTo(point.x, point.y);
            } else {

                Point prev = points.get(i - 1);
                path.cubicTo(prev.x + prev.dx, prev.y + prev.dy, point.x
                        - point.dx, point.y - point.dy, point.x, point.y);

            }
        }
        canvas.drawPath(path, paint);

    }

    public boolean onTouch(View view, MotionEvent event) {
        if (event.getAction() != MotionEvent.ACTION_UP) {
            Point point = new Point();
            point.x = event.getX();
            point.y = event.getY();
            points.add(point);
            invalidate();
            return true;
        }
        return super.onTouchEvent(event);

    }

    public boolean checkTime() {
        //Check if there was an input 400 ms ago
        long newTime = System.currentTimeMillis();
        long diffirence = newTime - oldTime;
        if (oldTime == 0) {
            oldTime = System.currentTimeMillis();
            return true;
        } else if (diffirence <= 400) {
            oldTime = System.currentTimeMillis();
            return true;
        }
        return false;
    }
}

class Point {
    float x, y;
    float dx, dy;

    @Override
    public String toString() {
        return x + ", " + y;
    }
} 
```

问题是当我再次开始绘制时，即使我停止绘制一段时间，这条线也会连接到最新的点。这对于捕获人类签名当然不是很有用，这就是我创建 checkTime 方法的原因。如果您停止绘图 400 毫秒，则返回 false，当您再次开始绘图时，它将开始一条新线，该线未连接到旧线。我只是不知道如何实现我的方法，我尝试了很多但线路一直连接到最新点，也许有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:57:16.373

在 onTouch 中创建路径并仅在 onDraw 中绘制可能会更快。

将 onTouch 替换为

```
Path path = new Path();
int prevx=0;
int prevy=0;
int prevdx=0;
int prevdy=0;
public boolean onTouch(View view, MotionEvent event) 
{
   int x = event.getX();
   int y = event.getY();
   int dx = (x-prevx)/3;
   int dy = (y-prevy)/3;
   if(event.getAction() == MotionEvent.ACTION_DOWN)
   {
       path.moveTo(x, y);
   }
   if(event.getAction() == MotionEvent.ACTION_MOVE)
   {
       path.cubicTo(prevx + prevdx, prevy + prevdy, x - dx, y - dy, x, y);
   }
   prevx=x;
   prevy=y;
   prevdx=dx;
   prevdy=dy; 
   invalidate();
   return true;
} 
```

onDraw 将只是

```
public void onDraw(Canvas canvas)  
{
   canvas.drawPath(path, paint);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:32:49.687

我使用了 [Lars Vogel](http://www.vogella.com/)[的这篇文章](http://www.vogella.com/articles/AndroidTouch/article.html)，但非常感谢 Marc Van Daele！

这是绘制视图的代码：

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;

public class SingleTouchEventView extends View {
  private Paint paint = new Paint();
  private Path path = new Path();

  public SingleTouchEventView(Context context, AttributeSet attrs) {
    super(context, attrs);

    paint.setAntiAlias(true);
    paint.setStrokeWidth(6f);
    paint.setColor(Color.BLACK);
    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeJoin(Paint.Join.ROUND);
  }

  @Override
  protected void onDraw(Canvas canvas) {
    canvas.drawPath(path, paint);
  }

  @Override
  public boolean onTouchEvent(MotionEvent event) {
    float eventX = event.getX();
    float eventY = event.getY();

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
      path.moveTo(eventX, eventY);
      return true;
    case MotionEvent.ACTION_MOVE:
      path.lineTo(eventX, eventY);
      break;
    case MotionEvent.ACTION_UP:
      // nothing to do
      break;
    default:
      return false;
    }

    // Schedules a repaint.
    invalidate();
    return true;
  }
} 
```

您必须调用此活动才能开始绘画：

```
import android.app.Activity;
import android.os.Bundle;

public class SingleTouchActivity extends Activity {

/** Called when the activity is first created. */

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(new SingleTouchEventView(this, null));
  }
} 
```

# php - 带有支付标准商业账户的 PayPal 退款转账 API

> ID：13238399
> 
> 赞同：2
> 
> 时间：2012-11-05T18:49:52.147
> 
> 标签：php, curl, paypal

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T21:53:30.653

最后！我知道了。[在这里](https://www.x.com/developers/paypal/forums/adaptive-payments-api/refundtransaction-failure)找到了答案。首先，是的，它是可能的，不需要 SSL，所以...原来我只需要重新排序 API 请求

```
 USER=zzzzzz_api1.xxxxxx
    PWD= xxxxxxxxxxxxxxxxxxxxxxx
    SIGNATURE=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    METHOD=RefundTransaction
    VERSION=59.0
    TRANSACTIONID=1234567890
    PAYERID=1234567890
    REFUNDTYPE=Partial
    AMT=0.01 
```

# iphone - 如何在组织内部临时分发应用程序（内部应用程序分发）？

> ID：13238401
> 
> 赞同：0
> 
> 时间：2012-11-05T18:49:55.860
> 
> 标签：iphone, ios, in-house-distribution

我正在尝试找到在组织内部署几个应用程序的分步过程。我无法找到它的分步答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:55:19.930

看看 Apple 的[iOS 设备分发应用程序](http://help.apple.com/iosdeployment-apps/mac/1.1/)。它解释了如何部署您通过 App Store 的批量购买计划购买的应用程序，以及如何准备和分发您在组织内编写的应用程序。

# python - 使用 mod_wsgi 导入 python 模块

> ID：13238404
> 
> 赞同：3
> 
> 时间：2012-11-05T18:50:11.070
> 
> 标签：python, apache, mod-wsgi

我们正试图让 wsgi 应用程序在 mod_wsgi 上工作。我们在使用`wsgiref.simple_server`, 作为调试环境之前已经运行了它。现在，我们想把它转移到使用 Apache httpd 来集成在同一端口下加载静态文件，并提供一个更适合生产的环境。

我们设置的 httpd.conf 文件如下所示：

```
<VirtualHost *:80>

    DocumentRoot /var/www/

    ErrorLog /var/www/log/error_log

    LogLevel debug

    WSGIScriptAlias /app /var/www/python/resource/rest.py

    <Directory /var/www/python/>
            Order allow,deny
            Allow from all
    </Directory>

    <Directory />
            Order allow,deny
            Allow from all

            RewriteEngine On
            # Some rewrites go here

    </Directory>

</VirtualHost> 
```

通过此设置，我们可以访问主应用程序文件 rest.py `http://myhost/app`（`from module1 import function`在`ImportError`.

我怀疑这与必须设置某种环境变量有关，但我已添加`/var/www/python`到`sys.path`主应用程序方法中，但它不起作用。对此的任何帮助或指示将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T20:52:37.630

rest.py 是在 /var/www/python 还是 /var/www/python/resource 下？据我所知，将此目录添加到 sys.path 应该可以工作。最好使用字符串常量如下：

```
sys.path.append(os.path.dirname(__file__)) 
```

即使您决定将来部署到不同的位置，这也应该有效。

# c++ - VS 2012 中的可变参数模板（Visual C++ 2012 年 11 月 CTP）

> ID：13238408
> 
> 赞同：13
> 
> 时间：2012-11-05T18:50:18.933
> 
> 标签：c++, visual-c++, c++11, visual-c++-2012

我安装了[Visual C++ 编译器 2012 年 11 月 CTP](http://www.microsoft.com/en-us/download/details.aspx?id=35515)并创建了一个 C++ 控制台项目。我写了这个

```
template<typename T>
void Test(T value){
}
template<typename T, typename... Args>
void Test(T value, Args... args){
    Test(value);
    Test(args...);
}

int main(){
    Test(1,2,3);
} 
```

然后我按 F6 在 IDE 中构建。我在第 4 行收到此错误

```
error C2143: syntax error : missing ',' before '...' 
```

编译列表“可变参数模板”所以我相信这应该有效。我确实理解智能感知可能不正确，但是“编译器”应该可以工作。我不能从 IDE 构建吗？我必须在某处启用某些东西吗？`int i{4};`似乎也不起作用，我确信那是有效的统一初始化。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-05T18:55:25.827

在项目属性中，确保选择**Microsoft Visual C++ Compiler Nov 2012 CTP**：

![工具链](../Images/595ff7dd92db528f7ced200c28551f2c.png)

新工具链不会替换现有的 Visual C++ 2012 工具链，默认情况下不启用。它与现有工具链并排安装。

如果您选择新的工具链，您的程序将无错误地编译。

# php - 在 OS X 中：在 PHP 中或从终端中的命令提示符获取时区

> ID：13238409
> 
> 赞同：6
> 
> 时间：2012-11-05T18:50:30.773
> 
> 标签：php, timezone

出于某种原因，PHP 开发人员不久前决定他们不想信任系统提供的时区信息。因此，如果您在 OSX 下的 PHP 脚本要使用*任何*时间/日期函数，则必须执行以下操作：

```
date_default_timezone_set ("Europe/London"); 
```

现在，我不知道我的脚本将在地球上的哪个地方执行，并且期望普通用户必须提供时区字符串是不合理的 - 用户会说，相当合理，他们已经在系统首选项中设置它为什么我不能在那里寻找它。

所以，到目前为止，我一直在做：

```
$cmd = '/usr/sbin/systemsetup -gettimezone';
exec ($cmd, $results, $result); 
```

并挑选结果以获取要使用的字符串。到目前为止，一切都很好。现在我观察到两件事：

1.  该命令的手册页坚持我需要“至少 admin priv 才能运行”。我在没有 admin priv 的帐户上尝试过，确实是这样，所以从长远来看，我需要另一种方法。

2.  我碰巧在 System Preferences -> Date&Time 中锁定了 TimeZone 窗格，并且反复观察到，每当此窗格被锁定时，我在上面给出的 systemsetup 命令在响应之前会暂停 30 秒。如果我解锁 TimeZone 窗格，它会在通常的短时间内做出响应。

有谁知道为什么会这样？

其次，是否有人知道我可以执行的替代命令来给我时区，不需要管理员权限？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-03T20:14:59.330

OS X 通过从 /etc/localtime 到 /usr/share/zoneinfo/ 下的正确时区文件的符号链接来存储系统的时区。参见“人 3 tzset”。

由于您已经在 PHP 中，您可以这样做来获取时区的名称：

```
$systemZoneName = readlink('/etc/localtime');
$systemZoneName = substr($systemZoneName, strlen ('/usr/share/zoneinfo/')); 
```

然后，要将其设为默认时区，您可以执行以下操作：

```
date_default_timezone_set ($systemZoneName); 
```

你也应该能够做到

```
ini_set('date.timezone', $systemZoneName); 
```

或者，如果您只需要一个 DateTimeZone 对象，

```
$systemZone = new DateTimeZone ($systemZoneName); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-16T09:28:01.107

用于 OSX 下的 PHP 脚本

```
<?php
$systemtimezone = exec('/bin/ls -l /etc/localtime|/usr/bin/cut -d"/" -f7,8');
date_default_timezone_set($systemtimezone); 
?> 
```

这就是让 PHP 读取 OS X 系统默认时区的方法

ps：EXEC 中的管道如果在以后的更新中被禁止，可能不是一个好主意，您可能需要在 PHP 代码中剪切字符串。

# silverlight - 存储过程中的列名无效 (Silverlight WCF)

> ID：13238412
> 
> 赞同：0
> 
> 时间：2012-11-05T18:50:35.843
> 
> 标签：silverlight, entity-framework

我有一个使用带有 WCF RIA 的实体框架的 Silverlight 4 应用程序。

突然之间，一些（我认为是 3 个）存储过程停止工作。每个用户都报告相同的问题 当 Silverlight 应用程序尝试执行相关查询时，所有用户都会收到错误消息。

> 查询“SomeStoredProcedure”的加载操作失败。执行命令定义时发生错误。有关详细信息，请参阅内部异常。InnerException 消息：列名“someColumn”无效。
> 
> 在 System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands（EntityCommand entityCommand，CommandBehavior 行为）
> 
> 在 System.Data.Objects.Internal.ObjectQueryExecutionPlan.Execute[TResultType]（ObjectContext 上下文，ObjectParameterCollection 参数值）
> 
> 在 System.Data.Objects.ObjectQuery `1.GetResults(Nullable`1 forMergeOption)
> 
> 在 System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable.GetEnumerator()
> 
> 在 System.Data.Objects.ObjectQuery`1.GetEnumeratorInternal()
> 
> 在 System.Data.Objects.ObjectQuery.System.Collections.IEnumerable.GetEnumerator()
> 
> 在 System.ServiceModel.DomainServices.Server.DomainService.Enumerate[T](IEnumerable enumerable, Int32estimateResultCount)
> 
> 在 System.ServiceModel.DomainServices.Server.DomainService.Query（QueryDescription queryDescription，IEnumerable`1&validationErrors，Int32&totalCount）
> 
> 在 System.ServiceModel.DomainServices.Hosting.QueryProcessor.Process[TEntity](DomainService domainService, DomainOperationEntry queryOperation, Object[] 参数, ServiceQuery serviceQuery, IEnumerable`1& validationErrors, Int32& totalCount)
> 
> 在 System.ServiceModel.DomainServices.Hosting.QueryOperationBehavior`1.QueryOperationInvoker.InvokeCore（对象实例，对象 [] 输入，对象 [] 和输出）

现在奇怪的是：

*   我有同一个应用程序的开发部署，并且在连接到生产数据库时工作正常。

*   如果我连接到 SSMS 并执行存储过程，它会返回正确的数据。

*   所以我所做的只是重新编译存储过程。我基本上选择了存储过程，点击修改。它将生成 ALTER PROCEDURE 脚本，我只是点击执行而不更改内部任何内容。现在突然所有三个存储过程都可以正常工作了，即使我只重新编译其中一个。

为了更好地解释这一点，这是按顺序发生的：

1.  Silverlight 应用程序突然抱怨某些 SP 不包含某些列

2.  在 SSMS 中运行 SP，返回正常和预期的结果。

3.  重新编译 SP

4.  在 SSMS 中运行 SP，返回与 #2 完全相同的结果。

5.  Silverlight 应用程序再次运行

到底是怎么回事？

# javascript - 如何使用 Javascript 读取、写入和创建“.txt”文件？

> ID：13238415
> 
> 赞同：0
> 
> 时间：2012-11-05T18:50:42.457
> 
> 标签：javascript, html

我正在写一个网站，我对**JavaScript (JS)有非常基本的了解，但对****HTML**和**CSS**有很好的理解。如果您可以编辑网站的内容，我想要网站的管理部分。我还需要有关如何使用 JS 将这些文本文件显示到网站上的帮助。*谢谢您的帮助。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:53:53.097

不，你不能。为此，您将需要后端服务器软件，例如 PHP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:55:01.393

您可以使用 ActiveX 对象 - [http://www.yaldex.com/wjscript/jsfilecreateTextFile.htm](http://www.yaldex.com/wjscript/jsfilecreateTextFile.htm) - 但您将自己绑定到专有的 IE 支持。

除此之外，您还需要一种服务器端语言，例如 PHP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T19:01:19.523

在 HTML5 中，您可以通过[File API](http://www.w3.org/TR/file-upload/)对本地文件进行操作（查看[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)以获得快速教程），但在服务器上使用 JavaScript 在其上操作文件自己是不可能的。您需要使用 AJAX 向 PHP（或其他一些服务器端语言）脚本发送请求来为您执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T19:14:39.140

不可能，只有服务器端语言

# html - 除非达到某个特定点，否则如何将 div 定位在右下角

> ID：13238418
> 
> 赞同：0
> 
> 时间：2012-11-05T18:50:52.037
> 
> 标签：html, css

嗨，这是一个简单的菜鸟问题，但无论如何我都必须问它。看我的小提琴：

[http://jsfiddle.net/jjalbert/xXdev/](http://jsfiddle.net/jjalbert/xXdev/)

代码：

```
<h1>Hi!</h1>
<p>Some more text</p>
<div id="bottomcorner"></div>

#bottomcorner {
    position: fixed;
    bottom:0;
    right:0;
    background-color:red;
    width: 100px;
    height: 100px;
}    

h1 {
    color: green;
    font-size: 20px;
    width: 200px;
    font-weight: bold;
}

p {
    color: blue;
    width: 230px;
} 
```

我有一个固定在右下角的元素，但是一旦创建了某个浏览器宽度，我希望它保持在静态位置，这样它就不会开始干扰它左侧的内容。

所以在我的小提琴中，一旦浏览器窗口大约 330px 宽，我希望红色框保持在原位，并且从浏览器的角落变得不固定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:53:15.420

查看 CSS 媒体查询。这应该可以完成工作。

[CSS 媒体查询](http://www.w3.org/TR/css3-mediaqueries/)

```
@media all and (min-width: 300px) {
    ...css rules here...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:59:13.560

您可以将其浮动并放在具有最大宽度的 div 内，然后将 div 的位置固定在底部而不是右下角的红色框。

# css - WordPress 搜索输入字段样式不正确

> ID：13238421
> 
> 赞同：0
> 
> 时间：2012-11-05T18:31:49.373
> 
> 标签：css, search, forms, input, twitter-bootstrap

我有一个使用 Twitter Bootstrap 框架的 WordPress 网站。这是网站： http: [//www.vickieats.com/](http://www.vickieats.com/)

[我正在尝试将网站的搜索表单设置为与他们在示例页面（ http://twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)）中使用的搜索表单非常相似的网站。但是，搜索按钮的高度最终比输入元素大得多，我的目标是使它们具有相同的高度。

我认为有一种 CSS 样式可以覆盖我正在尝试做的事情，但我已经使用 FireBug 死了，找不到答案。或者它可能是我忽略的非常简单的事情。

无论哪种方式，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:56:39.257

您是否尝试将其从 更改`type="search"`为`type="text"`？我的猜测是搜索是不可定制的，而文本是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T19:14:56.537

Line-height 防止简单的“高度”声明改变按钮的大小。我能够使用以下内容来调整按钮的大小：

```
.form-search .input-append .btn {
line-height: 10px;
} 
```

问题是这使事情变得很小，我会考虑使输入更大以匹配按钮的可用性。

希望有帮助，

缺口

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T19:24:48.510

我不确定您希望它改变哪种方式，所以两者都在这里。

从 bootstrap CSS 中的类中删除 ' `padding: 4px 14px;`' 和 ' `line-height: 20px;`'`.btn`以使按钮与输入字段一样小。

要使输入字段更大以匹配按钮，`'height: 20px;'`请从引导 css 中的这个庞大的选择器中删除：

`'select, textarea, input[type="text"], input[type="password"], input[type="datetime"], input[type="datetime-local"], input[type="date"], input[type="month"], input[type="time"], input[type="week"], input[type="number"], input[type="email"], input[type="url"], input[type="search"], input[type="tel"], input[type="color"], .uneditable-input'`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T20:57:21.870

将此添加到样式表（部分或文件）的末尾

```
input.search-query {
  line-height: 30px;
  padding: 5px;
  height: 30px;
} 
```

在 Chrome Inspector 中添加它时，搜索框与按钮对齐。您已经声明了 input.search-query 并不重要。不过，您似乎真的可以在 CSS 中进行清理，`padding-right`定义不止一次，等等。

结果的部分截图[http://tinypic.com/view.php?pic=2lmtnht&s=6](http://tinypic.com/view.php?pic=2lmtnht&s=6)

# php - Yii - Belongs_To 正在工作，现在抛出错误

> ID：13238426
> 
> 赞同：0
> 
> 时间：2012-11-05T18:51:25.980
> 
> 标签：php, orm, yii

我有一个用户和帐户模型。关系是User属于Account，Account有很多User。

这是两者的模型代码：

**用户模型**：

```
public function relations()
{
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
        'account' => array(self::BELONGS_TO, 'Account', 'account_id'),
    );
} 
```

**账户模式**：

```
public function relations()
{
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
        'users' => array(self::HAS_MANY, 'User', 'account_id'),
                    'userCount'=>array(self::STAT,'User','account_id'),
            );
} 
```

我在我的**UserIdentity.php**中有这段代码，用于登录 WAS 工作得很好：

```
public function authenticate()
{
    $user=User::model()->findByAttributes(array('username'=>$this->username));
    if($user===null)
        $this->errorCode=self::ERROR_USERNAME_INVALID;
    else{
                if($user->password!==$user->encrypt($this->password))
                    $this->errorCode=self::ERROR_PASSWORD_INVALID;
                else{
                    $this->_id=$user->id;
                    if($user->last_login_time==null)
                        $lastLogin=time();
                    else
                        $lastLogin=strtotime($user->last_login_time);
                    $this->setState('lastLoginTime', $lastLogin);
                    $this->setState('account',array('id'=>$user->account->id,'name'=>$user->account->name,));
                    $this->errorCode=self::ERROR_NONE;
                }
            }
    return !$this->errorCode;
} 
```

当我将另一个用户添加到帐户时，它开始出现错误：

**PHP 注意：试图获取 non-object 的属性**。

错误指向

`$this->setState('account',array('id'=>$user->account->id,'name'=>$user->account->name,));`

当分成多行时：

`'id'=>$user->account->id,`是错误所在。

为了解决这个问题，我只是将其更改为：

```
$account=Account::model()->findByPk($user->account_id);
$this->setState('account',array('id'=>$account->id,'name'=>$account->name,)); 
```

因此，当我有一个用户时，这种关系工作得很好，但是当我有 2 个用户时，这种关系就失败了。我可以像上面一样继续使用 Yii，但我确实喜欢直接访问对象的简单性。我没有正确建立关系吗？为什么现在不能在一个帐户中使用 2 个用户？

**编辑：**

`var_dump($user)`- [http://pastebin.com/TEyrFnme](http://pastebin.com/TEyrFnme)

同样有趣的是，我可以使用：从帐户访问用户`$users=$account->users;`并访问所有`$user[0]`属性就好了。所以反过来，这种关系似乎在起作用，只是前进似乎有困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T21:30:57.220

不要在模型中声明与关系同名的变量。

```
public $account; 
```

will prevent the model from looking for the `account` relation, as Yii will first look for (and use) actual attributes before checking for relations of the same name.

# c# - 访问本地数据库

> ID：13238427
> 
> 赞同：0
> 
> 时间：2012-11-05T18:51:26.577
> 
> 标签：c#, database, visual-studio-2010

> **可能重复：**
> [Microsoft Visual C# 2010 - 将数据添加到本地数据库](https://stackoverflow.com/questions/7720491/microsoft-visual-c-sharp-2010-adding-data-to-local-database)

我正在尝试开发将数据存储在本地数据库而不是`.txt`文件中的简单 Windows Froms 应用程序。我正在通过 .将本地数据库添加到我的项目中`Add new item -> Local Database -> Dataset`。之后，我添加了一个包含 3 列的简单表格`Database Explorer`- 到目前为止一切都很好。
但是然后我想在我的`Form1`班级中访问这个数据库，使用循环填充创建的表（因为我不想在默认情况下应该用 0 填充 255 行时手动填充），进行一些查询以获取数据从数据库并将一些数据放入数据库中。
我尝试了几个教程，但我总是在

```
con.Open(); 
```

我应该如何在 C# 中处理本地数据库？
在这种情况下我应该使用哪个连接字符串？
我的代码初始化访问数据库应该是什么样子？

```
DataSet ds1 = new DataSet();
SqlConnection conn = new SqlConnection();
conn.ConnectionString =
"Data Source=.\\SQLExpress;" +
"User Instance=true;" +
"Integrated Security=true;" +
"AttachDbFilename=|DataDirectory|\\Database.sdf;";
conn.Open();

string sql = "SELECT * From LootServers";
System.Data.SqlClient.SqlDataAdapter da;
da = new System.Data.SqlClient.SqlDataAdapter(sql, conn);
da.Fill(ds1, "Servers");
DataRow dRow = ds1.Tables[0].Rows[0];
MessageBox.Show(dRow.ItemArray.GetValue(0).ToString());
conn.Close(); 
```

错误是：

> 尝试为文件 C:\Users\User1\Documents\VisualStudio 2010\Projects\LootServers\LootServers\bin\Debug\Database.sdf 附加自动命名数据库失败。存在同名数据库，或无法打开指定文件，或位于 UNC 共享上。

# magento - Magento 路由器 URL - 需要连字符路径名

> ID：13238428
> 
> 赞同：4
> 
> 时间：2012-11-05T18:51:27.653
> 
> 标签：magento, path, controller, router

假设我使用自定义控制器的 url 路径/前端名称为

```
/customcategory 
```

好吧，显然如果我有一个名为“TestController.php”和 indexAction 的控制器文件，那么 url 路径将是

```
/customcategory/test/index 
```

我想弄清楚的是如何重命名测试控制器，或修改配置 xml 文件，这样我就可以从控制器文件中获得连字符的 url，例如

```
/customcategory/test-section/index 
```

我知道如果我想`/customcategory`被连字符，我可以修改配置文件中的*前端*标签。但是我正在构建的站点将受益于带连字符的控制器路由，即`/customcategory`带有关键字的部分，我无法让它工作，也无法在谷歌上找到一个例子——这看起来很疯狂。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:31:00.080

您可以在自定义模块中使用全局重写来尝试做。您可以将所有传入请求传递`/customcategory/*`给特定的控制器操作。但是您必须管理自己的路线（基于您的 url 路径的深度）。

例如 `www.MageIgniter.com/customcategory/path1/path2`

配置文件

```
<global>
    <rewrite>
      <fancy_url>
            <from><![CDATA[/customcategory\/(.*)/]]></from>
            <to><![CDATA[customcategory/index/processroute/tagname/$1/]]></to>
            <complete>1</complete>
       </fancy_url>
    <rewrite>
</global>
<frontend>
    <routers>
        <tagseo>
            <use>standard</use>
            <args>
                <frontName>customcategory</frontName>
            </args>
        </tagseo>
    </routers>

class MageIgniter_Customcategory_IndexController extends Mage_Core_Controller_Front_Action
{
     public function processRoute(){
           print_r($requestUri = Mage::app()->getRequest()->getRequestUri()); //path1/path2
           print_r($this->getRequest()->getParam('tagname')); // path1
           print_r($this->getRequest())
           // do you custom logic here base on about request path explode('/', trim($requestUri,'/'))

     }
     ... 
```

有关工作示例，请参阅“产品标签”部分 @ [http://www.contempospace.com/bedroom-furniture/wardrobe-closets/custom-closet-systems/isa-closet-system-shelves-hanging-walk-in-reach -in-closet.html](http://www.contempospace.com/bedroom-furniture/wardrobe-closets/custom-closet-systems/isa-closet-system-shelves-hanging-walk-in-reach-in-closet.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T20:41:30.293

据我所知，您不能在 url 中添加连字符以匹配文件名。如果您正在尝试获取文件夹结构，则可以添加更多路径。

例如，如果您想要：

```
Namespace/CustomCategory/controller/test/SectionController.php 
```

你可以这样做：

```
/customcategory/test_section/index 
```

# jquery - 无法获取元素

> ID：13238429
> 
> 赞同：0
> 
> 时间：2012-11-05T18:51:37.417
> 
> 标签：jquery, html

我使用 Jquery 从我的站点中选择一个 HTML 对象。

```
<div id="banner">
  <!-- stuff in here -->
</div> 
```

我使用这段代码：

```
$(window).load($(function()
{
    var elem = $("#banner");
    var top = elem.offset().top;
    var maxTop = $("#footer").offset().top - elem.height();
    var scrollHandler = function()
    {
      var scrollTop = $(window).scrollTop();
      if (scrollTop<top) {
        elem.css({position:"relative",top:""})
      } else if (scrollTop>maxTop) {
        elem.css({position:"absolute",top:(maxTop+"px")})
      } else {
        elem.css({position:"fixed",top:"0px"})
      }
    }
    $(window).scroll(scrollHandler);scrollHandler()

})); 
```

但是我不断收到错误“未捕获的类型错误：无法读取未定义的属性‘顶部’”

出于某种原因，它没有看到 div 'banner'。

知道为什么吗？

编辑：

根据下面的建议，我将代码从 $(window).load 更改为 $(document).ready。还是同样的问题。

```
$(document).ready($(function()
{
    var elem = $("#banner");
    var top = elem.offset().top;
    var maxTop = $("#footer").offset().top - elem.height();
    var scrollHandler = function()
    {
      var scrollTop = $(window).scrollTop();
      if (scrollTop<top) {
        elem.css({position:"relative",top:""})
      } else if (scrollTop>maxTop) {
        elem.css({position:"absolute",top:(maxTop+"px")})
      } else {
        elem.css({position:"fixed",top:"0px"})
      }
    }
    $(window).scroll(scrollHandler);scrollHandler()

})); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T18:59:14.063

您将 jQuery 对象传递给您的加载函数而不是函数。尝试删除主回调周围的 $()。例如

```
$(window).load(function()
{
var elem = $("#banner");
var top = elem.offset().top;
var maxTop = $("#footer").offset().top - elem.height();
var scrollHandler = function()
{
  var scrollTop = $(window).scrollTop();
  if (scrollTop<top) {
    elem.css({position:"relative",top:""})
  } else if (scrollTop>maxTop) {
    elem.css({position:"absolute",top:(maxTop+"px")})
  } else {
    elem.css({position:"fixed",top:"0px"})
  }
}
$(window).scroll(scrollHandler);scrollHandler()

}); 
```

注意：这里有些人建议使用 $(window).load() 而不是 $(document).ready() 本身并没有**错。**第二个更惯用，因为它执行得更早（让用户更快地与您的页面交互）。有关详细信息，请参阅此链接：http: [//4loc.wordpress.com/2009/04/28/documentready-vs-windowload/](http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:58:23.810

```
$(window).load($(function()   // Passing a jQuery Object Here 
```

应该是

```
$(window).load( function()   // 
```

如果这不起作用，请将其替换为

```
$(document).ready( function() 
```

# java - xom xpath 查询与 jaxp xpath 查询与 dom 性能的性能

> ID：13238431
> 
> 赞同：0
> 
> 时间：2012-11-05T18:51:41.773
> 
> 标签：java, xml, dom, xpath, xom

xom xpath impl 之间有什么区别。和 jaxp xpath impl。？

该站点上的大多数帖子都说在 java 中使用`nu.xom`over `org.w3c.dom`，并且 dom 解析比 xpath 更快。如果库的唯一用途是用于 xpath 查询，为什么还要使用`nu.xom`over ？`jaxp xpath`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T19:39:04.880

如果您只是为了运行 XPath 查询而构建树，那么为此目的优化的树结构可以带来巨大的好处，如下所示：

[http://dev.saxonica.com/blog/mike/2012/09/](http://dev.saxonica.com/blog/mike/2012/09/)

TinyTree 的执行速度比替代方案快得多的主要原因是它是为单独的 XPath 处理而设计的。它是不可变的，这使得将节点排序为文档顺序变得更加容易，并且它使用整数名称代码来匹配名称与搜索查询。