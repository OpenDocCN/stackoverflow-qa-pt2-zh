# StackOverflow 问答 14141000-14141999

# sql - 将数据与元数据混合的优缺点是什么？

> ID：14141001
> 
> 赞同：-1
> 
> 时间：2013-01-03T14:39:18.123
> 
> 标签：sql, database-design, data-modeling

假设我有一张桌子，例如：

```
CREATE TABLE t1 (
  col1 int,
  col2 int
); 
```

以及对这些属性进行分类的“元数据表”：

```
CREATE TABLE t2 (
 attribute varchar,
 description varchar
); 
```

所以样本数据可能是：

t1：

```
col1  | col2
------+------
 4    |   6 
```

t2：

```
attribute   | description
------------+--------------
 col1       |  first column
 col2       |  second column 
```

使用这种方法的优点和缺点是什么？这当然让我感到不舒服，但我无法用语言表达任何坚定的反对意见。

编辑：这让我感到不舒服，因为这种设计倾向于实体-属性-值数据模型，其中所有内容都可以存储在一个表中，即数据模型不再具有太多意义。我试图量化这到底有多少问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:57:02.407

听起来您所描述的是*实体属性值*( [EAV](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model) ) 或可能的*行建模*。搜索这些术语。你会发现有几个优点，也有很多很多的缺点。

将元数据存储在数据模型的存储库中很好。在您的模式中对元数据存储库进行建模几乎可以肯定是不必要且无益的。

# c - C - 使用 Execvp 执行 Bash 命令

> ID：14141007
> 
> 赞同：8
> 
> 时间：2013-01-03T14:39:40.590
> 
> 标签：c, bash, execvp

我想编写一个程序 Shellcode.c，它接受输入一个文本文件，其中包含由换行符分隔的 bash 命令，并执行文本文件中的每个命令：例如，文本文件将包含：

```
echo Hello World
mkdir goofy   
ls 
```

我试过这个（只是为了开始练习其中一个 exec 函数）：

```
#include <stdio.h>
#include <unistd.h>

void main() {
    char *name[3];

    name[0] = "echo";
    name[1] = "Hello World";
    name[2] = NULL;
    execvp("/bin/sh", name);
} 
```

我得到，作为回报，

```
echo: Can't open Hello World 
```

我被 execvp 函数卡住了，我哪里出错了？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-03T14:43:28.583

你这样做是错的。

第一个数组索引是程序的名称，如[文档中所述](http://linux.die.net/man/3/exec)：

> execv()、execvp() 和 execvpe() 函数提供了一个指向以 null 结尾的字符串的指针数组，这些字符串表示新程序可用的参数列表。按照惯例，第一个参数应该指向与正在执行的文件关联的文件名。指针数组必须以 NULL 指针终止。

此外，bash 并不期望像这样的自由格式参数，您需要告诉它您将使用以下`-c`选项传递命令：

所以，你需要：

```
name[0] = "sh";
name[1] = "-c";
name[2] = "echo hello world";
name[3] = NULL; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-03T14:44:04.597

要在命令行上将脚本传递给 bash，您必须添加选项“-c”并将整个脚本作为单个字符串传递，即

```
#include <stdio.h>
#include <unistd.h>

void main() {
    char *name[] = {
        "/bin/bash",
        "-c",
        "echo 'Hello World'",
        NULL
    };
    execvp(name[0], name);
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-03T14:43:02.973

这里有很多问题：**[`exec()`](http://linux.die.net/man/3/execvp)**函数族不执行多个程序 - 这些函数执行单个程序，并用新程序***替换***内存中当前正在运行的进程。您传递给的以空指针结尾的字符串数组*应该*`execvp`包含由. *`execvp`*

 *如果要执行多个程序，则需要遍历每一行并逐个执行程序。但是您不能使用`execvp`，因为它会立即将当前正在执行的进程（您的 C 程序）替换为通过 shell 执行的进程，这意味着您的 C 程序的其余部分将永远不会被执行。您需要学习如何**[`fork()`](http://linux.die.net/man/2/fork)**结合使用，`execvp`以便执行子进程。你首先调用`fork()`创建一个子进程，然后从你调用的子进程中调用`execvp`。 [Fork + Exec 是](http://en.wikipedia.org/wiki/Fork-exec)UNIX 环境中从父进程启动其他进程的常用策略。*

# linux - 二进制文件中 ascii 字符串的“grep”偏移量

> ID：14141008
> 
> 赞同：37
> 
> 时间：2013-01-03T14:39:41.530
> 
> 标签：linux, bash, binary, grep, ascii

我正在生成二进制数据文件，这些文件只是一系列串联在一起的记录。每条记录都包含一个（二进制）标头，后跟二进制数据。二进制标头中有一个 80 个字符长的 ascii 字符串。在此过程中，我编写文件的过程有点混乱，我试图通过检查每条记录的实际长度来调试这个问题。

[这](https://stackoverflow.com/questions/4180081/linux-binary-grep)似乎非常相关，但我不理解 perl，所以我无法在那里得到公认的答案。我编译的另一个答案点`bgrep`，但它希望我给它一个十六进制字符串，我宁愿有一个工具，我可以给它 ascii 字符串，它会在二进制数据中找到它，打印字符串和找到它的字节偏移量。

换句话说，我正在寻找一些这样的工具：

```
tool foobar filename 
```

或者

```
tool foobar < filename 
```

它的输出是这样的：

```
foobar:10
foobar:410
foobar:810
foobar:1210
... 
```

例如，匹配的字符串和匹配开始的文件中的字节偏移量。在本例中，我可以推断出每条记录的长度为 400 字节。

其他约束：

*   通过正则表达式搜索的能力很酷，但我不需要它来解决这个问题
*   我的二进制文件很大（3.5Gb），所以我想尽可能避免将整个文件读入内存。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-03T14:57:18.133

```
grep --byte-offset --only-matching --text foobar filename 
```

该`--byte-offset`选项打印每个匹配行的偏移量。

该`--only-matching`选项使其打印每个匹配实例的偏移量，而不是每个匹配行。

该`--text`选项使 grep 将二进制文件视为文本文件。

您可以将其缩短为：

```
grep -oba foobar filename 
```

它适用于 GNU 版本`grep`，默认情况下与 linux 一起提供。它不适用于 BSD grep（默认情况下与 Mac 一起提供）。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-01-03T14:46:36.483

你可以用`strings`这个：

```
strings -a -t x filename | grep foobar 
```

用 GNU binutils 测试。

例如，在哪里`/bin/ls`发生`--help`：

```
strings -a -t x /bin/ls | grep -- --help 
```

输出：

```
14938 Try `%s --help' for more information.
162f0       --help     display this help and exit 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-18T02:03:26.223

我想做同样的任务。虽然字符串 | grep 工作，我发现 gsar 正是我需要的工具。

[http://tjaberg.com/](http://tjaberg.com/)

输出如下所示：

```
>gsar.exe -bic -sfoobar filename.bin
filename.bin: 0x34b5: AAA foobar BBB
filename.bin: 0x56a0: foobar DDD
filename.bin: 2 matches found 
```

# c++ - 如何使用 c++ 列出 unix 用户的所有补充组

> ID：14141010
> 
> 赞同：1
> 
> 时间：2013-01-03T14:39:51.250
> 
> 标签：c++, unix, usergroups

我正在尝试找到一种方法来获取 unix 用户可以访问的所有组的列表。我希望能够将 unix 用户名或用户的 uid 作为参数传递给 c++ 程序，然后返回该用户有权访问的组列表。我已经对此进行了一些阅读，据我所知，这可以使用 getgroups() 来实现，但我找不到如何通过将特定用户名或 uid 传递给 getgroups 来执行此操作的示例。我发现的所有示例似乎只显示了我的用户帐户的所有组或运行程序的人的有效 uid。请你能帮我解决这个问题吗？

我可以从 struct passwd 获取所有用户帐户信息，并且能够传递 argv[1] 这是一个 unix 用户用户名并将其传递给 getgrgid: (getpwnam_r(argv[1], my_passwd, pwdbuffer, pwdlinelen, &tempPwdPtr)) ！ = 0) 我只是不知道如何使用 argv[1] 的值并找出 unix 用户可以使用 getgroups 访问的所有组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:52:02.673

使用`getgrouplist(3)`功能，它正是你想要的。它需要用户名，因此如果您想列出所有具有给定 UID 的用户所在的组，您首先需要借助`getpwuid_r(3)`函数将 UID 转换为用户名。

# c# - TCPListner, Winsock 检查是否有任何客户端套接字可以连接？

> ID：14141013
> 
> 赞同：0
> 
> 时间：2013-01-03T14:40:11.670
> 
> 标签：c#, asp.net, sockets, tcplistener

我们有 web 应用程序，它作为 Socket Listner 工作。我想在 AcceptSocket 之前检查是否有任何客户端套接字可用于连接到此侦听器。如果没有客户端套接字连接并取消发送/接收数据，我想显示一条消息。

我正在将 TCPListner 使用 ASP.net C# 用于 Web 应用程序。客户端套接字是使用 Winsock 控件的 windows VB6 应用程序。

## 套接程序, ASP.Net C#, VS2008

谢谢你的回复，

请参阅下面我与服务器通信的示例代码

clsCommunication.cs，这个类文件导入到 .aspx 页面。我尝试使用 Console.WriteLine()，但无法显示此消息。

我想显示警报框，以便用户了解状态栏上没有连接或显示或突出显示框架/框等。

```
public void Communicationcation()
{
    byte[] bytes = new byte[1024];
    string strSiteID = "SiteID";

    socket.Start();
    if (!socket.Pending())
    {
        Console.WriteLine("Sorry, no connection requests have arrived");
    }
    else
    {
        client = socket.AcceptSocket();
        if (client.Connected == true)
        {
            decimal dSiteID = decimal.Parse(GetSiteSetting(ref strSiteID).ToString());
            IPEndPoint clientep = (IPEndPoint)client.RemoteEndPoint;

            WriteLog(string.Format("Connected with {0} at port {1}",  clientep.Address,  clientep.Port));
            string strWelcome = STARTMESSAGE + "WHOAMI" + "     " + dSiteID + " " + dSiteID + FINISHMESSAGE;
            byte[] data = new byte[1024];
            data = Encoding.ASCII.GetBytes(strWelcome);
            int i = client.Send(data, data.Length, SocketFlags.None);
            WriteLog(String.Format("Message sent {0} bytes!", i));

            //Get reply from the Connected cleint.
            i = client.Receive(bytes, bytes.Length, SocketFlags.None);
            if (i != -1)
            {
                WriteLog(string.Format(System.Text.Encoding.UTF8.GetString(bytes)));
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:54:18.440

您可以使用`TcpListener`' 的`Pending`方法，请参阅[http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.pending.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.pending.aspx)

# android - 上下文在Android中是什么意思

> ID：14141014
> 
> 赞同：-1
> 
> 时间：2013-01-03T14:40:21.977
> 
> 标签：android

> **可能重复：**
> [什么是 Android 中的上下文？](https://stackoverflow.com/questions/3572463/what-is-context-in-android)

我想对这个问题有一个答案[Android - SharedPreferences with serializable object](https://stackoverflow.com/questions/5816695/android-sharedpreferences-with-serializable-object)：

```
LocalPersistence LP=new LocalPersistence();
Asortiment=(Nomenklatura) LP.readObjectFromFile(???, filename); 
```

但是无法理解要传递什么而不是`Context context`主要活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:44:13.640

如果你在中`Activity`，你可以通过`this`。否则（例如，如果您在另一个类中），您始终可以使用`MyActivity.this`来获取应用程序范围内对活动对象的可用引用（始终只有一个）。

# java - 为什么 ProxySelector 在 Java 中返回不一致的结果？

> ID：14141026
> 
> 赞同：2
> 
> 时间：2013-01-03T14:41:19.933
> 
> 标签：java, networking, proxy, proxyselector

8 个月前，我使用这个[堆栈溢出帖子](https://stackoverflow.com/questions/376101/setting-jvm-jre-to-use-windows-proxy-automatically)在 Java 项目中自动使用代理服务器。它工作得很好。

这是我当时想出的代码：

```
 System.setProperty("java.net.useSystemProxies", "true");

    List<Proxy> proxyServers = null;
    try {
        proxyServers = ProxySelector.getDefault().select(new URI("http://www.twitter.com"));
    } catch (URISyntaxException e) {
      System.out.println("Error using system proxy");
    }
    if (proxyServers != null) {
        for (Iterator<Proxy> iter = proxyServers.iterator(); iter.hasNext();) {
            Proxy proxy = iter.next();
            System.out.println("Found Proxy: " + proxy);
            InetSocketAddress addr = (InetSocketAddress) proxy.address();

            if (addr == null) {
              System.out.println("No Proxy");
            } else {

                System.setProperty("http.proxyHost", addr.getHostName());
                System.setProperty("http.proxyPort", Integer.toString(addr.getPort()));

                System.out.println("proxy hostname : " + addr.getHostName());
                System.out.println("proxy port : " + addr.getPort());

            }
        }
    } 
```

我最近尝试将完全相同的代码添加到另一个项目中，但得到了不同的结果。我将计算机设置为使用测试代理服务器并运行两个项目来比较结果。如果我从 8 个月前运行该项目，则会打印出以下内容：

```
Found Proxy: HTTP @ 192.168.1.100:8000
proxy hostname : 192.168.1.100
proxy port : 8000 
```

如果我在设置了相同代理服务器的同一台机器上运行我当前的项目，则会打印出以下内容。

```
Found Proxy: DIRECT 
No Proxy 
```

找到的唯一代理是“直接”并且 proxy.address() 为空。

什么会导致在一种情况下找到代理设置但在另一种情况下找不到？

**编辑：**

我通过在启动过程中更快地移动代码来解决这个问题，但我不知道为什么会修复它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-08T15:20:39.850

可能是由于[http://docs.oracle.com/javase/7/docs/api/java/net/doc-files/net-properties.html#Proxies中的这句话](http://docs.oracle.com/javase/7/docs/api/java/net/doc-files/net-properties.html#Proxies)

> java.net.useSystemProxies（默认值：false）在最近的 Windows 系统和 Gnome 2.x 系统上，可以告诉 java.net 堆栈，将此属性设置为 true，以使用系统代理设置（这两个系统都允许您通过其用户界面全局设置代理）。**请注意，此属性仅在启动时检查一次。**

如果将属性放在 java 命令中，则可以保证它工作：`java -Djava.net.useSystemProxies=true yourclass`

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-31T09:11:11.850

如果您将代码与安全页面一起使用，它不会考虑代理，因此它将显示直接和无代理。

试试下面的代码：

```
proxyServers = ProxySelector.getDefault().select(new URI("http://www.twitter.com"));
proxyServers = ProxySelector.getDefault().select(new URI("https://www.twitter.com")); 
```

你会得到不同的。

# sql - 在 SQL 表中存储项目数组

> ID：14141028
> 
> 赞同：8
> 
> 时间：2013-01-03T14:41:21.940
> 
> 标签：sql, arrays

我知道这可能已被问过一百万次，但我找不到任何确定的东西。我正在制作一个涉及可以构建项目列表的用户的网站。我想知道将他们的项目存储在 SQL 表中的最佳方式是什么？

我在想我需要为每个用户制作一个单独的表，因为我看不到任何存储数组的方法。我认为这将是低效的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T14:50:21.883

根据“项目”是什么，似乎有两种可能的解决方案：

1.  用户和物品之间的一对多关系
2.  用户和物品之间的多对多关系

如果可以将单个项目（例如“书”）“分配”给多个用户，则为 2）。如果每个项目都是唯一的并且只能属于单个用户，则为 1)。

## 一对多关系

```
create table users
(
   user_id    integer primary key not null,
   username   varchar(100) not null
);

create table items
(
   item_id    integer primary key not null,
   user_id    integer not null references users(user_id),
   item_name  varchar(100) not null
); 
```

## 多对多关系：

```
create table users
(
   user_id    integer primary key not null,
   username   varchar(100) not null
);

create table items
(
   item_id    integer primary key not null,
   item_name  varchar(100) not null
);

create table user_items
(
    user_id   integer not null references users(user_id),
    item_id   integer not null references items(item_id)
); 
```

由于您的描述非常模糊，这是我能想到的最好的。

不需要使用数组或类似的东西。看来您是数据库建模的新手，所以您应该阅读有关规范化的内容。每次您想到“数组”时，您可能都会想到“表”（或关系）。

**编辑（刚刚看到你提到了 MySQL）：**
上面的 SQL**不会**在 MySQL 中创建外键约束（即使它会在没有错误的情况下运行），因为 MySQL 的愚蠢“我不会告诉你我不能做某事”态度。您需要单独定义外键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T20:11:04.007

最好为每个用户\帐户创建一个单独的表。这将限制必要表的大小并允许更快的搜索。当您呈现数据时，您通常会显示该当前用户/帐户的数据。当您必须通过表格搜索以查找相关信息时。随着依赖表的增长，应用程序将开始减慢。编写应用程序，就好像它将最大限度地使用 SQL。如果网站变得流行，这将限制未来重新设计的需要。

# eclipse - ClassNotFoundException when deploying multi-module POM project (EAR) to WTP

> ID：14141032
> 
> 赞同：0
> 
> 时间：2013-01-03T14:41:44.463
> 
> 标签：eclipse, maven, ear, pom.xml, eclipse-wtp

**Eclipse version:** Indigo

**Target Application server:** Weblogic 10.3.5 (11gR1)

I am having trouble building and deploying a multi-module POM project (packaged as an EAR) to my WebLogic server, within Eclipse.

Despite the parent POM building an EAR file successfully outside of the IDE, I am receiving the following error when trying to deploy the UI WAR to the Application Server:

```
java.lang.Exception: Exception received from deployment driver. See Error Log view for more detail.
    at oracle.eclipse.tools.weblogic.server.internal.DeploymentProgressListener.watch(DeploymentProgressListener.java:190)
    at oracle.eclipse.tools.weblogic.server.internal.WlsJ2EEDeploymentHelper.deploy(WlsJ2EEDeploymentHelper.java:486)
    at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publishWeblogicModules(WeblogicServerBehaviour.java:1466)
    at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publishToServer(WeblogicServerBehaviour.java:898)
    at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publishOnce(WeblogicServerBehaviour.java:686)
    at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publish(WeblogicServerBehaviour.java:539)
    at org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish(ServerBehaviourDelegate.java:774)
    at org.eclipse.wst.server.core.internal.Server.publishImpl(Server.java:3027)
    at org.eclipse.wst.server.core.internal.Server$PublishJob.run(Server.java:341)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: weblogic.application.ModuleException: Failed to load webapp: 'lerp-ui'
    at weblogic.servlet.internal.WebAppModule.prepare(WebAppModule.java:393)
    at weblogic.application.internal.flow.ScopedModuleDriver.prepare(ScopedModuleDriver.java:176)
    at weblogic.application.internal.flow.ModuleListenerInvoker.prepare(ModuleListenerInvoker.java:199)
    at weblogic.application.internal.flow.DeploymentCallbackFlow$1.next(DeploymentCallbackFlow.java:517)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.DeploymentCallbackFlow.prepare(DeploymentCallbackFlow.java:159)
    at weblogic.application.internal.flow.DeploymentCallbackFlow.prepare(DeploymentCallbackFlow.java:45)
    at weblogic.application.internal.BaseDeployment$1.next(BaseDeployment.java:613)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.BaseDeployment.prepare(BaseDeployment.java:184)
    at weblogic.application.internal.EarDeployment.prepare(EarDeployment.java:58)
    at weblogic.application.internal.DeploymentStateChecker.prepare(DeploymentStateChecker.java:154)
    at weblogic.deploy.internal.targetserver.AppContainerInvoker.prepare(AppContainerInvoker.java:60)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.createAndPrepareContainer(ActivateOperation.java:207)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doPrepare(ActivateOperation.java:98)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.prepare(AbstractOperation.java:217)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentPrepare(DeploymentManager.java:747)
    at weblogic.deploy.internal.targetserver.DeploymentManager.prepareDeploymentList(DeploymentManager.java:1216)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handlePrepare(DeploymentManager.java:250)
    at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.prepare(DeploymentServiceDispatcher.java:159)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doPrepareCallback(DeploymentReceiverCallbackDeliverer.java:171)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$000(DeploymentReceiverCallbackDeliverer.java:13)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$1.run(DeploymentReceiverCallbackDeliverer.java:46)
    at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:178)
Caused by: java.lang.ClassNotFoundException: javax.faces.webapp.FacesServlet

    at weblogic.utils.classloaders.GenericClassLoader.findLocalClass(GenericClassLoader.java:297)
    at weblogic.utils.classloaders.GenericClassLoader.findClass(GenericClassLoader.java:270)
    at weblogic.utils.classloaders.ChangeAwareClassLoader.findClass(ChangeAwareClassLoader.java:64)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:305)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:246)
    at weblogic.utils.classloaders.GenericClassLoader.loadClass(GenericClassLoader.java:179)
    at weblogic.utils.classloaders.ChangeAwareClassLoader.loadClass(ChangeAwareClassLoader.java:43)
    at weblogic.servlet.internal.WebAnnotationProcessorImpl.processServlets(WebAnnotationProcessorImpl.java:225)
    at weblogic.servlet.internal.WebAnnotationProcessorImpl.processJ2eeAnnotations(WebAnnotationProcessorImpl.java:209)
    at weblogic.servlet.internal.WebAnnotationProcessorImpl.processAnnotations(WebAnnotationProcessorImpl.java:105)
    at weblogic.servlet.internal.WebAppServletContext.processAnnotations(WebAppServletContext.java:1368)
    at weblogic.servlet.internal.WebAppServletContext.<init>(WebAppServletContext.java:449)
    at weblogic.servlet.internal.WebAppServletContext.<init>(WebAppServletContext.java:493)
    at weblogic.servlet.internal.HttpServer.loadWebApp(HttpServer.java:418)
    at weblogic.servlet.internal.WebAppModule.registerWebApp(WebAppModule.java:972)
    at weblogic.servlet.internal.WebAppModule.prepare(WebAppModule.java:382) 
```

This is despite having the jsf-api dependency in both the Maven POM and referenced in the .classpath file for the UI WAR project:

**Snippet of the POM for the UI WAR project:**

```
<dependency>
            <groupId>javax.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.0.3</version>
        </dependency>

        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.0.3</version>
        </dependency> 
```

**.classpath for UI WAR Project:**

```
<classpathentry kind="var" path="M2_REPO/javax/faces/jsf-api/2.0.3/jsf-api-2.0.3.jar"/>
  <classpathentry kind="var" path="M2_REPO/com/sun/faces/jsf-impl/2.0.3/jsf-impl-2.0.3.jar"/> 
```

**Below follows the entire parent POM of the multi-module project:**

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>uk.co.acme</groupId>
    <artifactId>multiModulePOMProject</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>pom</packaging>
    <name>acme troublesome project</name>

    <modules>
        <module>../../Business/common</module>
        <module>../../Business/svccom</module>
        <module>../../Business/busctl</module>
        <module>../../Client/ui</module>
        <module>../../Business/ear</module>
        <module>../../Business/talend/java/businessrules</module>
    </modules>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.9</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.mockito</groupId>
            <artifactId>mockito-all</artifactId>
            <version>1.9.0</version>
            <scope>test</scope>
        </dependency>

    </dependencies>

    <properties>

        <project.ui.version>1.0-SNAPSHOT</project.ui.version>
        <project.common.version>1.0-SNAPSHOT</project.common.version>
        <project.svccom.version>1.0-SNAPSHOT</project.svccom.version>
        <project.busctl.version>1.0-SNAPSHOT</project.busctl.version>

        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <webapp.filter>development</webapp.filter>
        <spring.version>3.0.5.RELEASE</spring.version>      
        <eclipselink.version>2.1.3</eclipselink.version>
        <persistence.version>2.0.0</persistence.version>
        <spring.cdi.version>1.0.0</spring.cdi.version>

        <weblogic.adminurl>t3://localhost:7050</weblogic.adminurl>
        <weblogic.user>weblogic</weblogic.user>
        <weblogic.password>welcome1</weblogic.password>
        <weblogic.target>acmeLocalDomain</weblogic.target>
        <weblogic.source>../../Business/ear/target/${parent.artifactId}.${packaging}</weblogic.source>              

    </properties>

    <profiles>
        <profile>
            <id>production</id>
            <properties>
                <webapp.filter>production</webapp.filter>
            </properties>
        </profile>
    </profiles>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <version>2.4.2</version>
            </plugin>
        </plugins>
    </build>
</project> 
```

It's clear that this is some classpathing issue, but I have gone scrollbind from staring at it over the course of two days and have decided that the time has come to wave the white flag and appeal for help!

The end goal is to take my EAR project (which currently is hampered from an annoying need to undeploy/redeploy on the command line for every little change) and get it so that I can perform hot fixes within a deployment which is run inside the IDE.

Thanks

**Update:**

By adding the offending dependency to the `domains\<domain>\lib` folder of the application server, and restarting the application server, I have now started getting `ClassNotFoundExceptions` for other WAR dependencies. It is clear now that Eclipse is not respecting the `classpath` of the WAR project - and I still don't understand why or how :-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:29:42.313

To package dependencies into your `lib` directory, add this to your `EAR` packaging `pom`:

```
<build>
   <plugins>
      <plugin>
         <groupId>org.apache.maven.plugins</groupId>
         <artifactId>maven-ear-plugin</artifactId>
         <version>2.5</version>
         <configuration>
            <version>6</version>
            <defaultLibBundleDir>lib</defaultLibBundleDir>
            <modules>
               [Your EJB and Web modules here]
            </modules>
          </configuration>
       </plugin>
   </plugins>
</build> 
```

Notice the `defaultLibBundleDir` tag.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:09:54.977

After building the EAR using `File > Export` in Eclipse, I was able to compare the EAR to the one produced by my Maven POM.

I found that Eclipse did not contain references to the Maven Dependencies build path items in the Deployment Assembly (I discovered that simply adding the Projects as dependencies wasn't enough).

Reading around the subject, I found that it was neccessary to add the Maven Dependencies of the child WAR and JARs to their respective WAR and JAR projects, but with a destination of

> ../lib

This is declared **on each WAR and JAR** refers to **the lib folder of the parent EAR.**

Using a combination of this menu (and alternatively by editing each of the corresponding .settings/org.eclipse.wst.common.component files for each affected WAR and JAR in turn) I was able to build up a version of the EAR which matched the one produced via my Maven script.

I hope this helps someone.

# wso2 - 有没有办法连接 WSO2 BPM 任务引擎并在 WSO2 管理控制台之外管理人工任务

> ID：14141033
> 
> 赞同：0
> 
> 时间：2013-01-03T14:41:45.317
> 
> 标签：wso2, wso2carbon

目前，如果用户需要响应一个新的人工任务，他需要登录到 WSO2 admin web 控制台，在 web 控制台中除了任务显示之外还有其他的东西。由于我将拥有不应该参与 BPM 服务器本身的用户，但他们需要对任务采取行动，有没有办法制作一个独立的应用程序来与任务引擎通信以检索任务并管理它们? 那么，有没有办法在外部管理人工任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:06:34.540

有一个 SOAP [API](http://svn.wso2.org/repos/wso2/carbon/platform/branches/4.0.0/service-stubs/org.wso2.carbon.humantask.skeleton/4.0.2/src/main/resources/ws-humantask-api.wsdl)，你可以远程使用这个 API。

# jquery - 带有 cookie 的可折叠块的动画

> ID：14141034
> 
> 赞同：0
> 
> 时间：2013-01-03T14:41:48.033
> 
> 标签：jquery, animation, block, collapsable

我几乎不知道javascript。有人可以帮我制作可折叠块的动画吗？

* * *

```
 $(document).ready(function() {
    var button = $('#hideButton');
    //check the cookie when the page loads
    if ($.cookie('currentToggle') === 'hidden') {
        togglePanel(button, false);
    }
    else {
        togglePanel(button, true);
    }
    //handle the clicking of the show/hide toggle button
    button.click(function() {
        //toggle the panel as required, base on current state
        if (button.text() === "+Показать блок контента") {
            togglePanel($(this), true);
        }
        else {
            togglePanel($(this), false);
        }
    });
});
function togglePanel(button, show) {
    var panel = $('#KeywordsPanel');
    if (show) {
        panel.removeClass('hidden');
        button.text('-Скрыть блок контента');
        $.cookie('currentToggle', '', { path: '/' });
    }
    else {
        panel.addClass('hidden');
        button.text('+Показать блок контента');
        $.cookie('currentToggle', 'hidden', { path: '/' });
    }
} 
```

这就是我目前拥有的 - [http://jsfiddle.net/HbPF5](http://jsfiddle.net/HbPF5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:48:58.763

[**工作演示**](http://jsfiddle.net/HbPF5/2/)

试试 jQuery 的 slideDown 和 slideUp 方法：

```
$(panel).slideDown('slow'); 
```

和

```
$(panel).slideUp('slow'); 
```

注意：您也不需要添加或删除显示类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:46:09.867

哪里有 panel.removeClass('hidden'); 和 panel.addClass('hidden');

你可以用 jQuery 的 show 和 hide 方法替换它们，并且可以选择包含一个速度

例如

```
panel.hide('slow'); 
```

和

```
panel.show('slow'); 
```

可以使用其他效果，这里的 jQuery 文档页面：http: [//api.jquery.com/category/effects/](http://api.jquery.com/category/effects/)

# android - 从右到左查看动画android

> ID：14141039
> 
> 赞同：18
> 
> 时间：2013-01-03T14:42:06.533
> 
> 标签：android, animation, layout-animation

我无法为膨胀的布局放置视图动画。我使用了以下代码片段

```
pageView.startAnimation(AnimationUtils.loadAnimation(this,R.anim.right_to_left_anim.xml)); 
```

和xml

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
         android:shareInterpolator="false">
     <translate android:fromXDelta="0%" android:toXDelta="100%"
          android:fromYDelta="0%" android:toYDelta="0%"
         android:duration="700"/>

</set> 
```

我有什么遗漏吗？

谢谢。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-01-18T13:19:29.143

这是视图滑动动画的代码。

```
1)inFromRightAnimation

    private Animation inFromRightAnimation() {

        Animation inFromRight = new TranslateAnimation(
                Animation.RELATIVE_TO_PARENT, +1.0f,
                Animation.RELATIVE_TO_PARENT, 0.0f,
                Animation.RELATIVE_TO_PARENT, 0.0f,
                Animation.RELATIVE_TO_PARENT, 0.0f);
        inFromRight.setDuration(500);
        inFromRight.setInterpolator(new AccelerateInterpolator());
        return inFromRight;
        }

 2)outToLeftAnimation   
    private Animation outToLeftAnimation() {
    Animation outtoLeft = new TranslateAnimation(
        Animation.RELATIVE_TO_PARENT, 0.0f,
        Animation.RELATIVE_TO_PARENT, -1.0f,
        Animation.RELATIVE_TO_PARENT, 0.0f,
        Animation.RELATIVE_TO_PARENT, 0.0f);
    outtoLeft.setDuration(500);
    outtoLeft.setInterpolator(new AccelerateInterpolator());
    return outtoLeft;
    }

3)inFromLeftAnimation

    private Animation inFromLeftAnimation() {
    Animation inFromLeft = new TranslateAnimation(
        Animation.RELATIVE_TO_PARENT, -1.0f,
        Animation.RELATIVE_TO_PARENT, 0.0f,
        Animation.RELATIVE_TO_PARENT, 0.0f,
        Animation.RELATIVE_TO_PARENT, 0.0f);
    inFromLeft.setDuration(500);
    inFromLeft.setInterpolator(new AccelerateInterpolator());
    return inFromLeft;
    }

4)outToRightAnimation

    private Animation outToRightAnimation() {
    Animation outtoRight = new TranslateAnimation(
        Animation.RELATIVE_TO_PARENT, 0.0f,
        Animation.RELATIVE_TO_PARENT, +1.0f,
        Animation.RELATIVE_TO_PARENT, 0.0f,
        Animation.RELATIVE_TO_PARENT, 0.0f);
    outtoRight.setDuration(500);
    outtoRight.setInterpolator(new AccelerateInterpolator());
    return outtoRight;
    } 
```

现在在视图上启动动画

```
pageView.startAnimation(inFromRightAnimation()); 
```

谢谢，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:52:58.260

如果您尝试在第一次创建视图时为其设置动画，那么您需要设置`layoutAnimation`XML 属性或调用`setLayoutAnimation()`.

如果你只是想让你的视图看起来像在移动，你需要一个`TranslateAnimation`; 看到这个答案：[https](https://stackoverflow.com/a/4214490/832776) ://stackoverflow.com/a/4214490/832776 另外，如果你想重复动画，然后调用`setAnimationListener()`并`onAnimationEnd()`重新开始动画。

如果您尝试永久移动视图，请参阅：[http ://www.clingmarks.com/how-to-permanently-move-view-with-animation-effect-in-android/400](http://www.clingmarks.com/how-to-permanently-move-view-with-animation-effect-in-android/400)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-06T05:05:28.943

我知道你已经接受了答案。但我认为这个回复对阅读这篇文章的人会有帮助。您可以尝试从中**删除 .xml**，`pageView.startAnimation(AnimationUtils.loadAnimation(this,R.anim.right_to_left_anim.xml));`

# twitter-bootstrap - 灯箱 - 多张图片

> ID：14141042
> 
> 赞同：3
> 
> 时间：2013-01-03T14:42:22.293
> 
> 标签：twitter-bootstrap, lightbox

我正在使用[bootstrap-lightbox](https://github.com/jbutz/bootstrap-lightbox)来显示页面中的某些图像。

```
<a href="#lightbox" class="thumbnail">
  <img src="/img/img1_thumb.png" />
</a>
<a href="#lightbox" class="thumbnail">
  <img src="/img/img2_thumb.png" />
</a>

<div id="lightbox" ...>
  <div class='lightbox-header'>
    <button type="button" class="close" ...>&times;</button>
  </div>
  <div class='lightbox-content'>
    <img src="/img/img1.png" />
  </div>
</div> 
```

我只需要显示被点击的缩略图的完整版本。

有没有`lightbox`办法在打开模态之前更新`lightbox-content`s ？`img`

或者我应该添加类似的内容：

```
$('.thumbnail').click(function () {
    $('#lightbox .lightbox-content img')
        .attr('src', $(this).attr('data-imagefull'));
}); 
```

?

* * *

**更新**

我不想自动生成完整的图像路径。
我只是不知道在哪里指定这个完整的图像路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:11:39.050

最简单的方法是查看插件的源代码。看来，它有自己的定义：[https ://github.com/jbutz/bootstrap-lightbox/blob/master/js/bootstrap-lightbox.js#L318](https://github.com/jbutz/bootstrap-lightbox/blob/master/js/bootstrap-lightbox.js#L318)

您可以使用***“数据图像”***属性使灯箱更新其内容。对您来说最简单的方法可能是编写一个小脚本，获取所有带有灯箱 ID 的图像，并将 data-image 属性设置为文件名中没有“_thumb”的东西（例如通过正则表达式）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-10T04:02:17.473

演示：- [http://ashleydw.github.io/lightbox/](http://ashleydw.github.io/lightbox/) 你可以在这里找到你的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:16:15.617

如果您使用的是 .Net，您可以执行 PageMethod：

js：

```
$('.thumbnail').click(function () {

     PageMethods.loadimg(function (answer) {

        var images= answer.split('|');

        $('.lightbox-content').html(answer[0]);
        $('.lightbox-content').html(answer[1]);
        $('.lightbox-content').html(answer[...]);    

    }, Error);
}); 
```

CS：

```
[WebMethod]
public static string loadimg()
   {
   string images= "<img src="/img/img1_thumb.png" />|<img src="/img/img2_thumb.png" />|<img src="/img/img..._thumb.png" />";
   return images;
   } 
```

# c# - 解决不明确的引用

> ID：14141043
> 
> 赞同：56
> 
> 时间：2013-01-03T14:42:22.623
> 
> 标签：c#

我正在尝试创建一个管理器类以与我的图表工具一起使用，问题是我使用的工具，对 3d 和 2d 图表使用相同的名称，这在我尝试添加 2d 库时导致引用不明确。 .任何想法如何最好地解决这个问题？

例如，

```
using tool.2dChartLib;
using tool.3dChartLib; 
```

BorderStyle 是这两者的成员

我试过投射我使用 BorderStyle 的区域。我想如果我只是参考它可能会起作用，`tool`但这意味着我将有数百`tool.class`行而不是`class`

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-01-03T14:46:59.087

如果两个命名空间中都存在同名的类型，您有两种选择：

1）如果类型的数量很少，为该类型创建一个别名：

```
using BorderStyle3d = tool.3dChartLib.BorderStyle; 
```

2）如果类型的数量很大，可以为命名空间创建一个别名：

```
using t3d = tool.3dChartLib; 
```

然后在你的代码中......

```
t3d.BorderStyle 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-03T14:45:04.810

您可以使用完整的类型名称，或创建别名：

```
using 2dBorderStyle = tool.2dChartLib.BorderStyle; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-03T14:43:54.303

使用[命名空间别名](http://msdn.microsoft.com/en-us/library/c3ay4x3d%28v=vs.80%29.aspx)

```
using twoDimensionLib = tool.2dChartLib;
using threeDimensionLib tool.3dChartLib; 
```

# crystal-reports - Crystal Reports 7 CrossTab 抑制列

> ID：14141047
> 
> 赞同：1
> 
> 时间：2013-01-03T14:42:34.380
> 
> 标签：crystal-reports, crystal-reports-7

我正在尝试修改在 Crystal Reports 7 中创建的报表（我对此几乎一无所知）。我想使用 CrossTab，因为这似乎是实现我想要的最佳方式。我有一列包含三个可能的值：A、B、C。交叉表创建了三列。我想压制C。我该怎么做？

此外，是否有基于一个字段（即 PK 值）创建行，但显示另一个 - 如描述？例如，如果状态列表的 PK 值为 1-50，我希望它们按 PK 排序，但我想显示状态名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:46:20.053

你问的都是可能的；

**我建议不要使用交叉表**：交叉表适用于未知数量的行和列（因数据而异）广告，用于在网格上汇总（最大值、值总和）结果。

你应该改为：

*   创建空白报告
*   将字段中的字段`Field explrorer`放入`Details`部分（仅 A 和 B 列）
*   用于`Report Sort Expert`对没有 PK 值的元素进行排序

# vb.net - 带有 ODBC 数据适配器的 DataGridView

> ID：14141051
> 
> 赞同：0
> 
> 时间：2013-01-03T14:42:45.470
> 
> 标签：vb.net

我通过 ODBC 适配器将数据从数据库加载到我的 datagridview 中。

```
 cmd = New Odbc.OdbcCommand(sql, cn)
        adp = New Odbc.OdbcDataAdapter(cmd)
        adp.Fill(ds, "temp2")

        bs.DataSource = ds
        DataGridView2.DataSource = bs 
```

这样我就可以“活泼”地更改和更新数据库中的数据。
但我现在有不同的情况。
为了更改数据，我必须在网格上双击另一个表单，当我回来时，我希望我的 datagridview 显示特定行的更改。

这是我尝试的：

```
 Dim fl As New dataform
    With fl
        .StartPosition = FormStartPosition.Manual
        .aCallerLocation = Me.Location
        .ShowDialog()
    End With
    fl = Nothing

    Dim c_builder As New Odbc.OdbcCommandBuilder(adp)
    Dim o As Integer
    Try
        o = adp.Update(ds, "temp2")
        MsgBox(o)
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try 
```

但我不能一整天都得到它！没有生成异常，但“o”始终为零。

我做错了什么以及如何获得此功能以查看从“dataform”返回img 后行中的更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T04:28:25.457

尝试这个

```
cmd = New Odbc.OdbcCommand(sql, cn)
adp = New Odbc.OdbcDataAdapter(cmd)
Dim c_builder As New Odbc.OdbcCommandBuilder(adp)
adp.Fill(ds, "temp2")

bs.DataSource = ds
DataGridView2.DataSource = bs 
```

和这个

```
Private Sub btnSave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSave.Click

    Dim dsChange As DataSet = New DataSet
    'add record
    If (ds.HasChanges(DataRowState.Added)) Then            
        dsChange = ds.GetChanges(DataRowState.Added)
        Dim rowchange As Integer
        rowchange = adp.Update(dsChange, "temp2")
        If (rowchange > 0) Then
            MessageBox.Show(rowchange.ToString() & " Record Berhasil Dimasukan")
        End If
    End If

    'Modified record
    If (ds.HasChanges(DataRowState.Modified)) Then            
        dsChange = ds.GetChanges(DataRowState.Modified)
        Dim rowchange As Integer
        rowchange = adp.Update(dsChange, "temp2")
        If (rowchange > 0) Then
            MessageBox.Show(rowchange.ToString() & " Record Berhasil Dihapus")
        End If
    End If

    'Delete record
    If (ds.HasChanges(DataRowState.Deleted)) Then            
        dsChange = ds.GetChanges(DataRowState.Deleted)
        Dim rowchange As Integer
        rowchange = adp.Update(dsChange, "temp2")
        If (rowchange > 0) Then
            MessageBox.Show(rowchange.ToString() & " Record Berhasil Diubah")
        End If
    End If

    'Menerapkan perubahan
    ds.AcceptChanges()

    'Refresh(DataGrid)
    DataGridView2.Refresh()

End Sub 
```

# html - 如何在phonegap中制作朋友查找器应用程序？

> ID：14141052
> 
> 赞同：0
> 
> 时间：2013-01-03T14:42:46.177
> 
> 标签：html, web-applications, cordova, google-maps-markers, google-maps-mobile

我正在构建一个 Phonegap 应用程序，该应用程序也应该用作朋友查找器...意思是，您想使用相同的应用程序从朋友那里获取坐标，并在您的（谷歌）地图上查明（或观看）他的当前位置。

谷歌有一个有趣的服务叫做谷歌纬度，但我还没有找到任何关于如何将它集成到 Phonegap 应用程序的信息...... [http://www.google.com/mobile/latitude/](http://www.google.com/mobile/latitude/)

任何有关此的信息将不胜感激，

问候贾莎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:58:56.263

您应该查看 Latitude 的 API。

[https://developers.google.com/latitude/](https://developers.google.com/latitude/)

# excel - Excel 使用 VBA 遍历嵌套的数据透视表行字段

> ID：14141053
> 
> 赞同：4
> 
> 时间：2013-01-03T14:42:46.887
> 
> 标签：excel, pivot-table, vba

我有一个数据透视表，我需要遍历嵌套的 RowFields：

![示例数据透视表](../Images/1191b14b76197a3c082fcaff3b74500c.png)

如何解析嵌套的 RowFields？

到目前为止，我的代码是：

```
Sub PtRead()
    Dim i As Integer, j As Integer
    Dim Sh As Worksheet
    Dim pt As PivotTable
    Dim rngRow As Range

    Set Sh = Sheets("Store")
    Set pt = Sh.PivotTables(1)

    i = 3
    For j = 1 To pt.RowFields(i).PivotItems.Count
        Debug.Print pt.RowFields(i).PivotItems(j)
    Next

End Sub 
```

例如，我需要检索与品牌“AAA”相关的所有嵌套文章代码以及相关的 Nsum 值，例如（这不起作用..）：

```
...    
pt.RowFields(1).PivotItems(1).RowFields(2).PivotItems(j)
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-09T19:18:29.690

我认为您想遍历枢轴项。查看下面的代码以获取有关如何继续的一些指导。

```
Sub TryMe()

For Each Pi In ActiveSheet.PivotTables("PivotTable1").PivotFields("DeptHead").PivotItems
    If Pi.Visible Then
        Count = Count + 1
        Range("B" & Count).Value = Pi.Name
        Row = Row + 1
    End If
Next Pi

End Sub 
```

如果您遇到问题，宏记录器非常有用。

# mysql - 如何从表的不同行中获取的“年”和“月”值在 MySQL 中创建日期并在“where”子句中使用它

> ID：14141054
> 
> 赞同：0
> 
> 时间：2013-01-03T14:42:47.067
> 
> 标签：mysql

在 MySQL 数据库中，我有一些表*项*，其中包含一些描述项目的列，以及另一个表*itemExtendedFields*。第二个有列：*id, itemId, name, value*。在*itemExtendedFields*中存储了有关项目的附加信息。

某些项目的到期日期可以由*itemExtendedFields*表的两行中保存的两个值构成。例如，对于*itemId* = 34 的项目，我在*itemExtendedFields*中有以下两行：

`id | itemId | name | value` `--------------------------` `87 | 34 | ExpiryYear | 2014` `88 | 34 | ExpiryMonth | 2` 

我需要编写查询，从*itemExtendedFields*表中的单独列中选择所有*项目*以及*expiryYear*和*ExpiryMonth*值。此外，我需要选择将在给定日期（例如 2014 年 2 月）到期的项目。我不知道如何构建正确的查询。我无法更改表格的结构。

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:50:28.733

这将列出表中的所有列以及表`items`中的`ExpiryYear`和。`ExpiryMonth``itemExtendedFields`

```
SELECT  a.*, b.ExpiryYear, b.ExpiryMonth
FROM    items a
        INNER JOIN 
        (
            SELECT  itemID,
                    MAX(CASE WHEN name = 'ExpiryYear' THEN `value` ELSE NULL END) ExpiryYear,
                    MAX(CASE WHEN name = 'ExpiryMonth' THEN `value` ELSE NULL END) ExpiryMonth 
            FROM    itemExtendedFields
            GROUP BY itemID
        ) b ON a.itemID = b.itemID
WHERE   b.ExpiryYear = 2012 AND 
        b.ExpiryMonth = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:51:22.360

目前尚不清楚您要做什么，但由于您在单个列中具有值，因此首先*旋转*表中的数据可能更容易`itemExtendedFields`，然后进行类似于以下的过滤：

```
select *
from
(
    select i.id,
        MAX(case when f.name = 'ExpiryYear' then f.value end) ExpiryYear,
        MAX(case when f.name = 'ExpiryMonth' then f.value end) ExpiryMonth
    from item i
    left join itemExtendedFields f
        on i.id = f.itemid
    group by i.id
) src
where ExpiryYear = 2014
    and ExpiryMonth = 2 
```

这种*旋转*是将存储在单列/多行中的值放入单行的多列中。可以将`item`表中的更多列添加到子查询，或者您可以将此子查询连接回`item`表以获取其他详细信息。

与此类似：

```
select *
from item i
left join 
(
    select f.itemid,
        MAX(case when f.name = 'ExpiryYear' then f.value end) ExpiryYear,
        MAX(case when f.name = 'ExpiryMonth' then f.value end) ExpiryMonth
    from itemExtendedFields f
    group by f.itemid
) src
   on i.id = src.itemid
where src.ExpiryYear = 2014
    and src.ExpiryMonth = 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T14:53:57.587

```
SELECT ItemId,
       MAX(CASE WHEN name = 'ExpiryYear' THEN value END) ExpiryYear,
       MAX(CASE WHEN name = 'ExpiryMonth' THEN value END) ExpiryMonth
FROM itemExtendedFields
GROUP BY itemId 
```

[SQL小提琴](http://sqlfiddle.com/#!2/7101a/1)*

# c - 如何使用 C 代码读取夏普红外传感器的距离？

> ID：14141057
> 
> 赞同：-5
> 
> 时间：2013-01-03T14:42:49.817
> 
> 标签：c, distance, sensors, infrared

我有一个关于我的机器人课程的项目。我将制作一个可以从简单迷宫中退出的迷宫机器人。我有 Sharp Infrared Sensor 在我的机器人行进时读取与墙壁的距离。好的，我预测了我的算法，但首先，我只需要从传感器读取距离值。我不知道如何阅读它，使用 C 的哪个代码，或者我必须#include .. 在我的程序开头的一些东西。我在网上搜索了很多东西，但除了这个传感器的数据表，我什么也没找到。拜托，我正在等待以前做过此类项目的人的帮助。我真的需要帮助。我必须在 2 天内提交我的项目。

对不起我的语法错误。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:53:13.787

发布指向数据表的链接。还要描述传感器如何连接到您的机器人。就目前而言，这个问题很模糊。

在不了解太多的情况下，我假设传感器具有与您用于机器人的微控制器的物理接口（即 I2C、串行等）。我还假设传感器有一些基本的消息传递协议可以在这个物理接口上使用。它也有可能编写了一个 API 来实现这个消息传递协议。

如果它已经编写了 C API，您应该只需要包含适当的 API 文件，然后为您的 micro 编写 C 代码，以使用 API 中的函数从传感器读取。

如果它还没有编写 C API，您将需要使用微控制器中特定于物理接口的函数并自己实现消息传递协议。例如，如果物理接口是 I2C，您将使用您的 micro 的 I2C 库并将正确的消息片段发送到传感器，以便接收距离消息。然后，您需要为收到的任何消息编写解析逻辑。

如果已经编写了 API，这将更容易。无论如何，听起来您应该早于到期前 2 天就开始了 :)

# php - 将 SQL 查询的值存储在变量中

> ID：14141063
> 
> 赞同：0
> 
> 时间：2013-01-03T14:43:12.487
> 
> 标签：php, mysql, sql, pdo

我有一个 SELECT SQL 语句，它返回一个纬度、经度和距离作为结果（使用 Haversine 公式）。现在我需要将这些值作为变量存储在 PHP 脚本中，因为我需要对结果进行进一步处理。谁能告诉我我该怎么做？

这是我的 SQL 语句

**更新**

```
$query = $db->prepare("SELECT `Latitude`, `Longitude`, (6378160 * acos( cos( radians(:latitude) ) * cos( radians( Latitude ) ) * cos( radians( Longitude ) - radians(:longitude) ) + sin( radians(:latitude) ) * sin( radians( Latitude ) ) ) ) AS distance FROM `mytable` HAVING distance < :radius ORDER BY distance;");
// Assign parameters
$query->bindParam(':latitude',$newLatitude);
$query->bindParam(':longitude',$newLongitude);
$query->bindParam(':radius',$radius);

//Execute query
$query->execute();
$q   = $db->query($query);
$q->setFetchMode(PDO::FETCH_ASSOC);

// fetch
while($r = $q->fetch()){
  $eLatitude = $r->Latitude;
  $eLongitude = $r>Longitude;
  $distance = $r->Distance;
} 
```

我在上面更新了我的 php 代码。此代码的语法是否正确？还是我这样做的方式全错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:01:27.237

PDO::FETCH_ASSOC: 返回一个按列名索引的数组[Manual](http://php.net/manual/en/pdostatement.fetch.php)

```
while($r = $q->fetch()){
  echo $r['Latitude']. "\n"; //Or do what ever instead of echo
  echo $r['Longitude']. "\n";
  echo $r['Distance']. "\n";
}

ie XML
while($r = $q->fetch()){
  $node = $dom->createElement("marker");
  $newnode->setAttribute("lat",  $r['Latitude']);
  $newnode->setAttribute("lng",  $r['Longitude']);
  $newnode->setAttribute("distance",  $r['Distance']);
}

ie JSON
while($r = $q->fetch()){
  data[] = $r;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:51:34.333

您可以使用

```
$queryresult = mysql_query("SELECT `Latitude`, `Longitude`, (6378160 * acos( cos( radians(:latitude) ) * cos( radians( Latitude ) ) * cos( radians( Longitude ) - radians(:longitude) ) + sin( radians(:latitude) ) * sin( radians( Latitude ) ) ) ) AS distance FROM `mytable` HAVING distance < :radius ORDER BY distance;");
if (!$queryresult) {
    echo 'Error ' . mysql_error();
    exit;
}
$resultrow = mysql_fetch_row($queryresult);

echo $resultrow[0];  // this will be latitude
echo $resultrow[1];  // this will be longitude 
```

# c# - 获取 HMAC 的当前 MachineKey 或等效密钥（在网络农场中）

> ID：14141066
> 
> 赞同：4
> 
> 时间：2013-01-03T14:43:25.233
> 
> 标签：c#, hmac, web-farm, machinekey

我在网络农场环境中使用[HMACSHA256进行消息身份验证。](http://msdn.microsoft.com/en-us/library/system.security.cryptography.hmacsha256.aspx)

在网络农场中，每台机器都有相同的机器密钥，因此 ViewState 将跨机器工作，但是，我需要进行 HMAC 消息身份验证，这将在机器上工作，所以我认为由于所有机器都使用相同的机器密钥，所以应该是一种从中派生密钥以用作 HMAC 密钥的方法。

我注意到从 .NET 4.0 开始有[MachineKey](http://msdn.microsoft.com/en-us/library/system.web.security.machinekey.aspx)类，但是，我坚持使用**.NET 3.5**，这对我来说是不可用的。

有没有办法在**ASP.NET 3.5**环境中使用在所有机器上都相同的排序键而不生成我自己的排序键？

# 编辑

我实际上并不需要机器密钥本身，只需要从机器密钥（或等效项）派生的验证密钥。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T14:57:04.993

您可以从 web.config 中读取机器密钥。此链接显示了如何执行此操作： http: [//aspnetresources.com/blog/how_to_read_auto_generated_machinekey](http://aspnetresources.com/blog/how_to_read_auto_generated_machinekey)

请记住，文章的作者会读取生成的机器密钥——因此您必须对代码进行一些更改。

我只是稍微阅读了这篇文章，发现它使用反射，如果您将机器密钥存储在 web.config 中，这不是必需的。本质上它分解为这一行：

```
MachineKeySection section = (MachineKeySection) 
  ConfigurationManager.GetSection ("system.web/machineKey"); 
```

# asp.net - 什么会导致 Microsoft Jet OLEDB SELECT 错过一整列？

> ID：14141068
> 
> 赞同：3
> 
> 时间：2013-01-03T14:43:28.353
> 
> 标签：asp.net, vb.net, oledb

我正在`.xls`使用以下连接字符串导入文件：

```
If _
    SetDBConnect( _
        "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & filepath & _
        ";Extended Properties=""Excel 8.0;HDR=Yes;IMEX=1""", True) Then 
```

这对于解析我遇到的几个 Excel 文件效果很好。但是，对于这个特定的文件，当我`SELECT *`进入一个时`DataTable`，有一整列数据，`Item Description`从`DataTable`. 为什么？

以下是一些可能使此特定工作簿与我一直在使用的其他工作簿不同的东西：

*   `DataTable`工作簿有一个由前 24 行组成的冻结窗格（但是，所有这些行都出现在
*   整个工作簿中都有一些奇怪的单元格突出显示

差不多就是这样。我看不到任何会使`Item Description`列无法正确导入的内容。它的数据由`Strings`除了 . 之外真正没有特殊字符的所有数据组成`&`。此外，此列中的每个数据条目最多为 20 个字符。怎么了？有没有其他方法可以获取所有数据？请记住，我必须使用原始文件并且无法更改它，因为我希望这最终成为一个自动化过程。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:19:05.847

一些初步的想法/问题：缺少的列是第一列吗？如果删除“项目描述”中的空格会发生什么？愚蠢的问题，但该列有列标题吗？

--**编辑 1** --

如果删除该列，问题是否会转移到另一列（新索引 4），或者文件是否完整。我提出这个问题的原因是该列/标题中的数据特有的问题，或者是索引 4 上更普遍的问题。

--**编辑 2** --

好的，既然我们知道它是那一列，我们就知道它要么是标题，要么是行。现在让我们专注于行。从那个＆符号开始；转储它，看看会发生什么。接下来，使用前 50% 的行。删除该子集会影响什么吗？后面 50% 的行呢？如果其中一个子集改变了结果，您应该能够通过每次将选择减半来将其缩小到单独的行（希望不是复数）。

我的猜测是你会找到一个 unicode 字符或其他时髦的东西是其中一个单元格。也许有一个公式，或者，正如你提到的，一些“奇怪的单元格突出显示”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:25:07.587

自从我使用 excel 访问以来已经有好几年了，但我记得 excel 将内容分组到某些区域中的一些问题，这些区域将充当每个工作表中的表格。尝试将有问题的工作表中的内容复制/粘贴到新工作簿并连接到该工作簿。如果这可行，您可能可以进一步调查有关区域的信息。

# javascript - 拉斐尔动画形状

> ID：14141070
> 
> 赞同：0
> 
> 时间：2013-01-03T14:43:45.637
> 
> 标签：javascript, raphael

我不想要一个完整的图表库。我想要的只是将 1 个矩形框从 0 动画到一个设定值，就像一个线性量规，但不需要标签或值数组。使用拉斐尔最干净的方法是什么。量规容器应设置背景颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:49:39.297

```
square.animate({height: scale}, 1000, 'bounce'); 
```

# eclipse - Eclipse 中的“从 cvs 服务器收到未知响应”

> ID：14141071
> 
> 赞同：2
> 
> 时间：2013-01-03T14:43:50.513
> 
> 标签：eclipse, ssh, cvs

一段时间以来，我一直在通过 SSH 使用 Eclipse 和 CVS，没有任何问题。

今天，Eclipse 开始抱怨：

> 从 cvs 服务器收到未知响应

每当我尝试进行任何 CVS 操作时。

是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:43:50.513

简单的解决方案！

原来我的 SSH 密码已过期，需要更改。我只是通过 SSH 登录到目标服务器，更改了密码，然后更新了我的 Eclipse CVS 配置以使用新密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-25T19:10:08.880

当 CVS 项目移动到新服务器时，这也发生在我身上。服务器的 ssh 指纹发生了变化（当然，因为它是一个新服务器，呵呵），我在 Eclipse 中尝试做的每一件事都得到了上面解释的 null 失败。要修复它，我必须进入首选项（路径：window/preferences/network/ssh2/knownhosts）并删除旧服务器的指纹，然后重试连接。新指纹出现进行验证，输入“是”接受它，之后一切都很好。我希望 Eclipse 的错误消息更详细一点。干杯，齐斯托斯克

# php - PHP（搜索功能）如果 2 个数组中的值匹配，则存储此数组

> ID：14141078
> 
> 赞同：0
> 
> 时间：2013-01-03T14:43:58.043
> 
> 标签：php, arrays, search, compare, match

我想创建一个带有输入字段的简单搜索功能，用户可以在其中通过标签搜索存储在数据库中的消息。

问题是该函数返回所有消息，而不是标签匹配的消息。

这是我的尝试：

```
 public function getMatches($tagsGiven) {
  $mergedTagArray = array();
  $messageToTag = array();

  $messageRepo = $this->messageRepository->findAll(); // all messages from DB

  $messageTagsArray = explode(',', $tagsGiven); // tags given by the user

  foreach ($messageRepo as $oMessage) {
    $messageTag = $oMessage->getMessageTags(); // get tags from all messages   
    $storeTagsUnseri = unserialize($messageTag); // unserialize tags given by the user

    if (!in_array($messageTagsArray,$storeTagsUnseri)) {  //if tags from user matches tags from DB messages
      $messageToTag[] = $oMessage->getMessageText();     // get the message text from the DB message and store it in array
    }
  }
  return $messageToTag;     // return all message texts matching
} 
```

}

非常感谢！

此致

**编辑**

```
if (array_intersect($messageTagsArray,$storeTagsUnseri)) {} 
```

那成功了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:59:17.933

好的，正如我在评论中提到的那样，您正在尝试查看对象是否不在数组中。你不能那样做，你必须先将你的对象转换为 arrat。因此，如果您不期望多维数组，请将其添加到您的代码中：

```
 $storeTagsUnseri = unserialize($messageTag);
 $storeTagsUnseri = (array)($storeTagsUnseri); 
```

或者只是这样做：

```
 $json  = json_encode($storeTagsUnseri);
 $$storeTagsUnseriarray = json_decode($json, true); 
```

而不是[array_intersect()](http://php.net/manual/en/function.array-intersect.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:49:06.890

您需要让数据库为您进行处理。

```
 SELECT message FROM YourDB WHERE message like '%tagName%' 
```

# ios - UIView drawRect：绘制倒置像素，打个洞，一个窗口，负空间

> ID：14141081
> 
> 赞同：3
> 
> 时间：2013-01-03T14:44:05.700
> 
> 标签：ios, core-graphics, drawrect

使用下面的代码，我正在绘制一个圆角矩形。它绘制了一个漂亮的实心浅灰色填充圆角矩形（大小为“self”）。我其实是想画这个像素的倒数，也就是：不是实心圆角矩形，而是浅灰色实心矩形中这个圆角矩形形状的窗口或孔。

我需要使用反向剪辑方法吗？还是我需要使用贝塞尔路径？对不起，如果这是非常基本的，但找不到信息。

谢谢阅读！

```
- (void)drawRect:(CGRect)rect
{

    // get the context
    CGContextRef context = UIGraphicsGetCurrentContext

    CGContextSaveGState(context);    

    //draw the rounded rectangle
    CGContextSetStrokeColorWithColor(context, [[UIColor blackColor] CGColor]);
    CGContextSetRGBFillColor(context, 0.8, 0.8, 0.8, 1.0);
    CGContextSetLineWidth(context, _lineWidth);

    CGRect rrect = CGRectMake(CGRectGetMinX(rect), CGRectGetMinY(rect), CGRectGetWidth(rect), CGRectGetHeight(rect));
    CGFloat radius = _cornerRadius;

    CGFloat minx = CGRectGetMinX(rrect), midx = CGRectGetMidX(rrect), maxx = CGRectGetMaxX(rrect);
    CGFloat miny = CGRectGetMinY(rrect), midy = CGRectGetMidY(rrect), maxy = CGRectGetMaxY(rrect);

    CGContextMoveToPoint(context, minx, midy);
    // Add an arc through 2 to 3
    CGContextAddArcToPoint(context, minx, miny, midx, miny, radius);
    // Add an arc through 4 to 5
    CGContextAddArcToPoint(context, maxx, miny, maxx, midy, radius);
    // Add an arc through 6 to 7
    CGContextAddArcToPoint(context, maxx, maxy, midx, maxy, radius);
    // Add an arc through 8 to 9
    CGContextAddArcToPoint(context, minx, maxy, minx, midy, radius);
    // Close the path
    CGContextClosePath(context);

    // Fill the path
    CGContextDrawPath(context, kCGPathFill);

    CGContextRestoreGState(context);

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-04T05:09:44.037

这是另一种方法，仅使用 UI 对象调用：

```
- (void)drawRect:(CGRect)rect
{
    [[UIColor lightGrayColor] setFill];
    CGRect r2 = CGRectInset(rect, 10, 10);
    UIBezierPath* p = [UIBezierPath bezierPathWithRoundedRect:r2 cornerRadius:15];
    [p appendPath: [UIBezierPath bezierPathWithRect:rect]];
    p.usesEvenOddFillRule = YES;
    [p fill];
} 
```

产生这个：

![在此处输入图像描述](../Images/51f6abfa95fa48ac1ce51d0295954969.png)

白色是窗口的背景；灰色的是 UIView。正如你所看到的，我们正在通过视图看到它背后的任何东西，这听起来就像你所描述的那样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T18:22:37.493

将多个子路径添加到您的上下文中，并使用 mode 进行绘制`kCGPathEOFill`。[Quartz 2D Programming Guide 有更详细的解释。](https://developer.apple.com/library/mac/documentation/graphicsimaging/Conceptual/drawingwithquartz2d/dq_paths/dq_paths.html#//apple_ref/doc/uid/TP30001066-CH211-TPXREF106)

```
// Outer subpath: the whole rect
CGContextAddRect(context, rrect);

// Inner subpath: the area inside the whole rect    
CGContextMoveToPoint(context, minx, midy);
...
// Close the inner subpath
CGContextClosePath(context);

// Fill the path
CGContextDrawPath(context, kCGPathEOFill); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-06T20:33:34.510

对于插入式解决方案：

1.  添加`PortholeView.swift`到您的 Xcode 6（或更高版本）项目中

    ```
    import UIKit

    @IBDesignable class PortholeView: UIView {
      @IBInspectable var innerCornerRadius: CGFloat = 10.0
      @IBInspectable var inset: CGFloat = 20.0
      @IBInspectable var fillColor: UIColor = UIColor.grayColor()
      @IBInspectable var strokeWidth: CGFloat = 5.0
      @IBInspectable var strokeColor: UIColor = UIColor.blackColor()

      override func drawRect(rect: CGRect) {
        // Prep constants
        let roundRectWidth = rect.width - (2 * inset)
        let roundRectHeight = rect.height - (2 * inset)

        // Use EvenOdd rule to subtract portalRect from outerFill
        // (See http://stackoverflow.com/questions/14141081/uiview-drawrect-draw-the-inverted-pixels-make-a-hole-a-window-negative-space)
        let outterFill = UIBezierPath(rect: rect)
        let portalRect = CGRectMake(
          rect.origin.x + inset,
          rect.origin.y + inset,
          roundRectWidth,
          roundRectHeight)
        fillColor.setFill()
        let portal = UIBezierPath(roundedRect: portalRect, cornerRadius: innerCornerRadius)
        outterFill.appendPath(portal)
        outterFill.usesEvenOddFillRule = true
        outterFill.fill()
        strokeColor.setStroke()
        portal.lineWidth = strokeWidth
        portal.stroke()
      }
    } 
    ```

2.  在 Interface Builder 中绑定目标视图

![在此处输入图像描述](../Images/59085cbc606a03551c35aad0b722b37b.png)

3.  在 IB 中调整插图、外部填充颜色、描边颜色和描边宽度！

![在此处输入图像描述](../Images/14bf38a5a5b038cf9f2d16e68abde3db.png)

4.  设置您的约束和其他视图，请记住，如果您需要以特殊方式缩放矩形以进行旋转等，您可能必须修改 PortholeView。在这种情况下，我在 PortholeView 后面有一个 UIImage 来演示圆形矩形如何通过“奇偶规则”从周围路径中“切出”。

![在此处输入图像描述](../Images/63071f093c07cac258ba7ee80761d373.png)

*感谢 @matt 提供底层绘图代码，感谢 Apple 在 Interface Builder 中公开 IBInspectable/IBDesignable。*

PS 这个古老的*Cocoa with Love*帖子将帮助您理解“偶数/奇数”规则及其兄弟“缠绕”规则，并提供一些用于绘制切口形状的额外策略。[http://www.cocoawithlove.com/2010/05/5-ways-to-draw-2d-shape-with-hole-in.html](http://www.cocoawithlove.com/2010/05/5-ways-to-draw-2d-shape-with-hole-in.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T19:28:56.200

另一种方法：`UICreateGraphicsContextWithOptions(size, NO, 0)`用来制作位图。将矩形绘制到位图中。切换到擦除混合模式：

```
CGContextSetBlendMode(con, kCGBlendModeClear); 
```

现在绘制椭圆路径并填充它。结果是一个带有透明椭圆孔的矩形。现在关闭图像图形上下文并将图像绘制到原始上下文中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-05T05:08:46.813

我一直在寻找做这个我正在做的项目。

我最终做了这样的事情。

[![在此处输入图像描述](../Images/13edf9dc7a6fd5b532fe9086d9966e67.png)](https://i.stack.imgur.com/8z3Ar.png)

我希望这可以帮助别人。

SWIFT代码：

```
import UIKit

class BarCodeReaderOverlayView: UIView {

    @IBOutlet weak var viewFinderView: UIView!

    // MARK: - Drawing

    override func drawRect(rect: CGRect) {
        super.drawRect(rect)

        if self.viewFinderView != nil {
            // Ensures to use the current background color to set the filling color
            self.backgroundColor?.setFill()
            UIRectFill(rect)

            let layer = CAShapeLayer()
            let path = CGPathCreateMutable()

            // Make hole in view's overlay
            CGPathAddRect(path, nil, self.viewFinderView.frame)
            CGPathAddRect(path, nil, bounds)

            layer.path = path
            layer.fillRule = kCAFillRuleEvenOdd
            self.layer.mask = layer
        }
    }

    override func layoutSubviews () {
        super.layoutSubviews()
    }

    // MARK: - Initialization

    required init?(coder aDecoder: NSCoder) {
        super.init(coder: aDecoder)
    }

    override init(frame: CGRect) {
        super.init(frame: frame)
    }
} 
```

# ms-access - 访问 VBA TransferSpreadsheet 计数

> ID：14141083
> 
> 赞同：3
> 
> 时间：2013-01-03T14:44:09.257
> 
> 标签：ms-access, vba

我`DoCmd.TransferSpreadsheet`用来填充表格。使用表单上的按钮调用此命令。传输完成后，我想告诉用户添加了多少条记录。为了尝试实现这一点，我使用`db.OpenRecordset("select * from tblImport")` then`MsgBox(rs.RecordCount)`
问题是在传输完成之前调用了记录计数。反正有同步调用它吗？

这是完整的代码

```
Private Sub cmdVIT_Click()
On Error Resume Next

Dim strPath As String
Dim filePicker As FileDialog
Dim db As DAO.Database
Dim rs As DAO.Recordset

Set db = CurrentDb

Set filePicker = Application.FileDialog(msoFileDialogFilePicker)

With filePicker
    .AllowMultiSelect = False
    .ButtonName = "Select"
    .InitialView = msoFileDialogViewList
    .Title = "Select File"

    With .Filters
        .Clear
        .Add "All Files", "*.*"
    End With
    .FilterIndex = 1

    .Show
End With

strPath = filePicker.SelectedItems(1)
Debug.Print strPath
DoCmd.TransferSpreadsheet TransferType:=acImport, SpreadsheetType:=acSpreadsheetTypeExcel12, TableName:="tblImport", FileName:=strPath, HasFieldNames:=True
Set rs = db.OpenRecordset("select * from tblImport")

MsgBox rs.RecordCount & " records"
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T15:05:50.133

您需要额外的一行：

```
Set rs = db.OpenRecordset("select * from tblImport")
'Populate recordset
rs.MoveLast
MsgBox rs.RecordCount & " records" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T18:17:16.123

您想显示`tblImport`. 我认为您不需要记录集来为您提供该信息。尝试其中之一...

```
MsgBox CurrentDb.TableDefs("tblImport").RecordCount & " records"
MsgBox DCount("*", "tblImport") & " records" 
```

但是，如果您需要或只想使用记录集执行此操作，请使用更快的方法来处理`OpenRecordset`.

```
Set rs = db.OpenRecordset("tblImport", dbOpenTable, dbReadOnly)
rs.MoveLast
MsgBox rs.RecordCount & " records" 
```

# ruby-on-rails - 资源路由是否使用 Delete 或 Destroy 来删除 Mongoid 文档？

> ID：14141093
> 
> 赞同：1
> 
> 时间：2013-01-03T14:44:43.220
> 
> 标签：ruby-on-rails, mongodb, callback, mongoid, rails-routing

这很简单。

我正在尝试使用 mongoid 的 'after_destroy' 回调来执行一些清理操作。

例如

```
class Model
    include Mongoid::Document

    after_destroy do |model|
        #Do cleanup stuff
    end
end 
```

有两种方法可以从 mongo 中删除对象。删除和销毁。Destroy 运行回调，但 Delete 不运行。

模型的路线是这样声明的

```
 resources :models 
```

所以我的问题是，当有人向models/delete 发送请求时，是调用destroy 方法还是调用delete 方法？

如果是后者，那么有什么方法可以使用 mongo.delete 函数运行回调。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:00:33.727

创建的 HTTP 方法 :delete`resources :models`与模型中使用的方法没有直接关系。HTTP 删除调用此方法：

```
class ModelsController < ApplicationController

  def delete
    model = Model.find(params[:id])
    model.destroy
    redirect_to models_path, notice: "Model removed"
  end
end 
```

您可以在控制器中将“删除”更改为“销毁”以满足您的需要。

# wso2 - WSO2 API Manager 公共 NAT IP

> ID：14141094
> 
> 赞同：1
> 
> 时间：2013-01-03T14:44:51.853
> 
> 标签：wso2, wso2-am

我在 windows server 2008 上安装了 api 管理器。服务器有一个 LAN-IP 和一个通过 NAT 的公共 IP。

示例：
LAN-IP：192.168.100.1
NAT 上的公共 IP：10.0.0.10

我想通过公共 IP 测试 API 管理器，但服务器只能在本地使用 LAN-IP。有人知道，我怎样才能让 api 管理器在公共 IP 上工作？端口在防火墙上打开。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:21:54.370

请尝试以下配置。完成后请注意重新启动服务器。

1.  将 <%APIM_HOME%>/repository/conf/carbon.xml 中的 HostName 和 MgtHostName 设置为公共 IP 地址。
2.  将 <%APIM_HOME%>/repository/conf/axis2/axis2.xml 文件中的 http 和 https 的 bind-address 参数设置为公网 IP。
3.  在 <%APIM_HOME$>/repository/conf/api-manager.xml 文件中进行如下设置。

http://<-- 公共-IP -->:${http.nio.port},https://<-- 公共-IP-->:${https.nio.port}

谢谢，努万。

# sql - Coldfusion 从菜单/列表中隐藏/删除名称

> ID：14141096
> 
> 赞同：1
> 
> 时间：2013-01-03T14:44:55.637
> 
> 标签：sql, coldfusion

我有一个插入表格，我在 adobe Coldfusion 中做了。这个插入表单将来自我团队中的人的信息插入到一个名为squadreport 的数据库表中。每次插入我的小队报告表后，我想从我的团队中尚未插入的可用姓名的菜单列表中删除我刚刚插入的人的姓名。这样我就不会意外地重新插入他们的名字。菜单列表是从我的 NAMES 表中生成的。NAMES 表中的 name.foiid 字段与 SQUADREPORT 表中的squadreport.squfoiid 字段匹配。

示例：如果squadreport.squfoiid 已经记录了“2012-11-18”的开始日期和“2012-11-24”的结束日期，那么我想防止以相同的日期重新插入同一个人等.

我当前的语法将生成一个空白列表。

这是我当前的语法：

```
<cfquery name="brother" datasource="master">
SELECT name.foiid, squadlt, squadlt.ltid, CONCAT(name.fname,'  ',name.lname) AS teammember
FROM name 
LEFT JOIN  name  ON name.foiid = squadreport.squfoiid
LEFT JOIN squadlt ON ltid = squadreport.sqult
WHERE name.foiid is null
AND squweekbegin =’2012-11-18’
AND squweekend = ‘2012-11-24’
AND squadlt = '3'
AND ltid = '3'
AND CITY = 'sandiego'
AND STATUS <> 'd'
AND STATUS <> 'T'
AND Form4444Complete = 'yes'
ORDER BY teammember
</cfquery> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:19:04.597

假设您将行插入到具有匹配`foiid`列的 SquadReport 中，您只需要排除 SquadReport 表中存在的 foiid 值。如果还有其他条件，例如必须激活小队成员或部署或其他条件，只需将其添加到排除条款中即可。

```
<cfquery name="brother" datasource="master">
SELECT name.foiid, squadlt, squadlt.ltid, CONCAT(name.fname,'  ',name.lname) AS teammember
FROM name 
LEFT JOIN  name  ON name.foiid = squadreport.squfoiid
LEFT JOIN squadlt ON ltid = squadreport.sqult
WHERE name.foiid is null
AND squweekbegin =’2012-11-18’
AND squweekend = ‘2012-11-24’
AND squadlt = '3'
AND ltid = '3'
AND CITY = 'sandiego'
AND STATUS <> 'd'
AND STATUS <> 'T'
AND Form4444Complete = 'yes'
<!--- new code here --->
AND name.foiid NOT IN (SELECT foiid FROM SquadReport)
<!--- end new code --->
ORDER BY teammember
</cfquery> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:20:42.950

所以你基本上想要做的就是显示不在表squadreport中的人？像这样的东西应该工作：

```
select name.foiid
, CONCAT(name.fname,'  ',name.lname) AS teammember
from name 
where not exists
(select 1
from squadreport
where squfoiid = name.foiid
and other constraints
)
and other constraints 
```

我假设您发布的代码是早期开发代码。投入生产后，您将希望对任何变量使用日期对象而不是字符串和查询参数。

# authentication - 根据我在 Spring Security 中的 user.status 字段进行优雅的身份验证方式

> ID：14141097
> 
> 赞同：0
> 
> 时间：2013-01-03T14:45:01.770
> 
> 标签：authentication, spring-security

我可以验证用户

```
Authentication request = new UsernamePasswordAuthenticationToken(this.username, this.password);
            Authentication result = authenticationManager.authenticate(request);
            SecurityContextHolder.getContext().setAuthentication(result); 
```

现在我必须选择 user.status 字段为“活动”的用户。

我想我可以在上面检查状态字段的代码之前放几行，

但我也认为如果我可以让 Spring Security 为我做这件事，它会更加优雅和整洁。

但是我不知道如何通过覆盖某些类或某些方法来让 SS 为我做这件事？

感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:05:13.353

如果您只有两个状态（“活动”、“不活动”），那么您可以使用本机**user.enabled**字段而不是自定义 user.status字段。该字段将由 AuthenticationManager.authenticate() 方法自动检查（如果您使用像 DaoAuthenticationProvider 这样的本机 AuthenticationProvider）。查看[标准用户架构中的](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/appendix-schema.html#d0e8380)**启用**属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:16:34.467

您可以在 spring 安全配置中将以下 SpEL 添加到拦截 url。

```
<intercept-url pattern="/**" access="isFullyAuthenticated() and principal.status == 'active'/> 
```

# c++ - 如何修复 Windows 上的 Qt 控制台输出（使用 `qInstallMsgHandler` 和 `qDebug`）？

> ID：14141104
> 
> 赞同：2
> 
> 时间：2013-01-03T14:45:22.097
> 
> 标签：c++, windows, qt, debugging, console

背景：

我正在使用 Qt `qInstallMsgHandler()`，`qDebug()`这是一个 GUI 应用程序。

[`qtglobal::qInstallMsgHandler()`我的消息处理程序与此处 Qt 文档](http://doc.qt.digia.com/4.7/qtglobal.html#qInstallMsgHandler)中给出的示例消息处理程序相同。

Linux 与 Windows：

在 Linux 上，每次`qDebug()`调用消息都会立即显示到控制台......这是好的和预期的。

在 Windows 上，每次`qDebug()`调用消息都不会显示在控制台上。相反，控制台中没有显示任何内容。然后当应用程序关闭时，所有消息突然出现在控制台中。

问题：

**如何修复 Windows 上的 Qt 控制台输出（使用`qInstallMsgHandler()`和`qDebug()`）？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:57:24.933

**在 Windows 上，消息处理程序需要`fflush(stderr)`在`fprintf()`.** 不知道为什么你需要这个额外的`fflush()`但它有效。

* * *

长篇大论：

我碰巧注意到在调用 qInstallMsgHandler() 之前，qDebug() 消息实际上确实在每次调用 qDebug() 之后立即出现。

凭直觉，我决定研究 qDebug() 函数。我碰巧在 Windows 上从源代码构建了 Qt，所以我进入了 qDebug() 源代码，发现如果没有消息处理程序，那么他们有一个默认的消息处理程序短代码片段。这基本上是这个片段的内容：

```
if (handler) {
    (*handler)(msgType, buf);
} else {
    fprintf(stderr, "%s\n", buf);
    fflush(stderr);
} 
```

我添加`fflush(stderr)`到我的消息处理程序中，现在 qDebug() 消息确实出现了。

* * *

Qt 文档中关于 qDebug() 的警告：

> 在 Windows 下，**如果 [您的应用程序] 是控制台应用程序，则将消息发送到控制台；否则 [如果您的应用程序是 GUI 应用程序]，[您的消息] 将发送到调试器**。如果在编译期间定义了 QT_NO_DEBUG_OUTPUT，则此函数不执行任何操作。

（注：重点由我添加。方括号中的文字是我自己的。）

# java - 使用 Apache procrun 接收 NoClassDefFoundError（Eclipse 生成的 jar）但在命令行上运行良好

> ID：14141105
> 
> 赞同：0
> 
> 时间：2013-01-03T14:45:25.997
> 
> 标签：java, eclipse, noclassdeffounderror, procrun

我已将我的应用程序从 Eclipse 导出为一个大包，因此它使用 Eclipse 加载程序。我已经使用 install.bat 文件通过 procrun 安装了它，最重要的几行如下所示：

```
set PR_CLASSPATH=C:\somepath\ECGIServer.jar
set PR_LIBRARYPATH=C:\somepath\native\lunaLibrary.dll
set PR_STARTMODE=jvm
set PR_STOPMODE=jvm 
```

显然还有更多，并且服务确实运行。在 ECGIServer.jar 文件中，这是 Manifest 文件：

```
Manifest-Version: 1.0
Rsrc-Class-Path: ./ commons-codec-1.6.jar stax-api-1.0-2.jar LunaProvider.jar
Class-Path: .
Rsrc-Main-Class: ecgi.encrypter.ECgiServer
Main-Class: org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader 
```

有更多的 jar 可以列出，但要写的太多了。无论如何，当我在命令行运行它（ECGIServer.jar）时，它工作得很好。当我将它作为服务运行时，它会一直运行，直到我尝试创建 LunaProvider 的实例。一旦应用程序创建了 LunaProvider 的实例，我得到：

```
java.lang.NoClassDefFoundError: com/safenetinc/luna/provider/LunaProvider 
```

如您所见，LunaProvider 是一个 ThridParty 库，它刚刚从我的 Eclipse 设置中引入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:58:17.017

好吧，最后决定尝试将依赖目录从 Eclipse 导出到单独的目录。完成此操作后，我的所有依赖项，包括 LunaProvider.jar 都被转储到该目录中。我将 install.bat 文件中的以下行更改为：

```
set PR_CLASSPATH=C:\somepath\ECGIServer.jar;C:\somepath\ECGIServer_lib 
```

一切都很顺利。仍然无法弄清楚为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-13T14:04:53.327

我想办法让它工作，是生成 jar 和库文件夹分开。这会生成 .jar 文件和一个名为 YourAppName_lib 的目录。因此，在 .bat 中，您必须将 PR_LIBRARYPATH 设置为 _lib 文件夹，仅此而已。

# java - 覆盖方法 - 类变量

> ID：14141111
> 
> 赞同：1
> 
> 时间：2013-01-03T14:45:46.700
> 
> 标签：java

首先让我说我确实尝试过用谷歌搜索这个，但我不确定我在寻找什么。我知道我可以使用 setter 方法，但是有没有办法直接访问这些字段？

```
List<String> token = new ArrayList<String>();
List<String> lemma = new ArrayList<String>();
List<String> pos   = new ArrayList<String>();

tt.setHandler(new TokenHandler<String>() {
   @Override
   public void token(final String token, final String pos, final String lemma) {
      this.token.add(token); // cannot be resolved or is not a field
      this.lemma.add(lemma); // cannot be resolved or is not a field
      this.pos.add(pos);     // cannot be resolved or is not a field
   }
}); 
```

你能帮助我吗？！

谢谢！

鲍勃

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T14:50:19.203

在变量前面使用关键字`this`，表示要访问实例字段。在这种情况下，您要访问的字段将属于匿名类实例`new TokenHandler<String>() { //... }`。由于它们没有在匿名类中声明，编译器无法解析它们。这就是为什么您可能会遇到错误。添加关键字`final`并访问不带`this`-keyword 的变量：

```
final List<String> tokens = new ArrayList<String>();
final List<String> lemmas = new ArrayList<String>();
final List<String> positions   = new ArrayList<String>();

tt.setHandler(new TokenHandler<String>() {
   @Override
   public void token(final String token, final String pos, final String lemma) {
      tokens.add(token); 
      lemmas.add(lemma); 
      positions.add(pos);
   }
}); 
```

有关您为什么需要的更多信息，`final`请参阅[此](https://stackoverflow.com/questions/4732544/why-are-only-final-variables-accessible-in-anonymous-class)问题。

**编辑：**

此外，请注意模棱两可的名称（参数列表与方法变量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:48:32.280

而不是`this.token`使用`OuterClass.this.token`where`OuterClass`是你的班级的名字

# java - 无反射的 Infinispan 查询

> ID：14141112
> 
> 赞同：0
> 
> 时间：2013-01-03T14:45:52.153
> 
> 标签：java, hibernate, lucene, hibernate-search, infinispan

我正在调查 Infinispan 以加快我的申请速度。开箱即用的配置比持久化到 SQL Server 中的速度还要慢。我知道 Hibernate Search 配置来调整 Lucene 索引性能，但我想从删除反射开始。我知道 Hibernate 搜索使用它将对象转换为文档以进行索引。问题是我找不到如何避免这种情况的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:39:37.167

您可以使用@ClassBridge 定义您自己的映射；您的自定义 ClassBridge 实现将获得对象实例，您可以通过访问直接字段或调用 getter 直接从它构建 Lucene 文档。

此处提供完整示例：

[http://docs.jboss.org/hibernate/search/4.2/reference/en-US/html_single/#d0e4102](http://docs.jboss.org/hibernate/search/4.2/reference/en-US/html_single/#d0e4102)

不过，我非常有信心反射不是您的性能问题。配置或您测量的方式可能有问题，我建议使用分析器来缩小问题区域。

# r - 将数据表插入文本文件

> ID：14141122
> 
> 赞同：1
> 
> 时间：2013-01-03T14:46:38.493
> 
> 标签：r, function

我编写了一个函数，允许我从剪贴板中获取四列数据，拆分它，添加一个额外的列，重新组合它，然后将其导出为文本文件。

```
xyztoinp <- function(x) {
    x <- read.table(file="clipboard") 
    a <- x[,-1] 
    b <- x[,1]
    c <- ifelse(b == "C", 6,
    ifelse (b == "O", 8,ifelse (b == "H", 1, 3)))
    x <- cbind(b,c,a)
    write.table(x, file="IRCoutput", quote = FALSE,
    sep = "\t", row.names = FALSE, col.names = FALSE)
} 
```

我有两个问题：-

是否可以创建一个文件，其中包含我使用此函数创建的表格，以便将表格粘贴到某些文本的中间？

例如

```
text_text_text_text_text_text_text_
text_text_text_text_text_text_text_

Neatly formated table

text_text_text_text_text_text_text_
text_text_text_text_text_text_text_ 
```

其次，我尝试修改函数，使其将文件名作为变量；IE，`xyztoinp <- function(x, NewFileName) {`

等等......但这并没有产生带有新文件名的输出；有谁知道这是怎么做到的？

这是我的工作代码，

xyztoinp <- function(x) {
     x <- read.table(file="clipboard")
     a <- x[,-1]
     b <- x[,1]
     c <- ifelse(b == "C", 6,
     ifelse (b == "O", 8,
     ifelse (b == "H", 1, 3)))
     x <- cbind(b,c,a)
     zz <- file("NewFile.inp", "w")
     cat("text", "text",
     "text",
     "",
     "text",
     "text",
     "text", file = zz, sep = "\n")
     write.table(x,文件 = zz，报价 = FALSE，
     sep = "\t"，row.names = FALSE，col.names = FALSE)
     cat("text",文件=zz)
     关闭(zz)
}

谢谢大家，尤其是@Greg。ps 无法更改函数中的文件名，但我对上述内容感到满意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:32:46.653

人们希望将表格（或图表、输出或...）插入文本的一般原因是创建某种自动报告（如果这不是您的情况，请提供更多详细信息，以便我们回答实际问题）。

要使用格式良好的表格（和其他内容）创建自动报告，最好的方法是创建一个模板并对其进行处理以创建报告。查看 knitr 包以了解有关执行此操作的详细信息（您也可以使用 odfweave 包或 sweave 功能或其他，但 knitr 可能是最通用的）。

如果您不想预先创建报告模板，另一种选择是 pander 包。

Switching to pander or knitr may take care of your second question as well, but if not then we will need to see what you tried and what happened to know why it did not work and how to help.

# c++ - next_permutation 返回奇怪的结果

> ID：14141128
> 
> 赞同：2
> 
> 时间：2013-01-03T14:47:18.260
> 
> 标签：c++, stl, permutation

我试图找到给定字符列表的所有排列，在本例中为“eta”

```
std::string s="eta";
do
{
    std::cout<<s<<std::endl;

}while(std::next_permutation(s.begin(),s.end())); 
```

我将得到以下输出：

```
eta
tae
tea 
```

但如果我改变一件事

```
std::string s="eta"; 
```

到

```
std::string s="aet"; 
```

输出现在变成

```
aet
ate
eat
eta
tae
tea 
```

这是我期望的正确排列数量；因此，当“加扰”字符串按字母顺序排列时，显然会发生一些不同的事情？

或者这种模棱两可的原因可能是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T14:50:22.227

`next_permutation`按所有排列的排序顺序将序列更改为下一个排列。因此，如果您从不是词典顺序中的第一个排列开始，则在 next_permutation 返回 false 之前，您将仅获得所有排列的一部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T14:52:47.860

正如 izomorphius 指出的那样，下一个排列在*最后一个前进的排列*上停止。因此，如果您想要所有这些，只需`sort`字符列表即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T14:52:09.383

next_permutation 将 [first, last) 范围内的元素重新排列为按字典顺序排列的下一个更大的元素排列，

所以你的输出没有问题:)

# regex - 从某些文本部分中删除逗号 (,)

> ID：14141129
> 
> 赞同：0
> 
> 时间：2013-01-03T14:47:23.613
> 
> 标签：regex, replace

我有一个包含数千个文件的文件，每一行都有这样的文本部分，例如：

```
,Home > Opto-electronics > LED > Standard LED, Multicolour,2226, 
```

所以它们以**,Home >开头并以****,combinationofnumber**结尾，

 **我需要在这个位置（在本例中为光电 > LED > 标准 LED，多色）替换逗号，而没有任何看起来像：

```
,Home > Opto-electronics > LED > Standard LED Multicolour,2226, 
```

我的替换正则表达式应该怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:16:25.977

在 Java 中，您可以使用

```
text.replaceAll("(,)(.*)(,)", "$2") 
```

它返回替换的字符串。**文本**是输入

这将删除开头和结尾的逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:23:59.440

要完全匹配它，您可以使用

```
/(?<=^,)(.*)(?=,$)/ 
```

或更坚固

```
/^.*,([^,]*,\d*),.*$/ 
```

.

.

替换你可以这样尝试（例如在php中）

```
var $result = preg_replace( '/^.*,([^,]*,\d*),.*$/', '\1', $inputline ); 
```

或在 Java 中

```
inputline.replace( '/^.*,([^,]*,\d*),.*$/', '$1' ); 
```**

# ruby - Is there a shortcut for assigning some variable with the return value of a method that's used on it in ruby?

> ID：14141130
> 
> 赞同：2
> 
> 时间：2013-01-03T14:47:23.697
> 
> 标签：ruby, syntax

I often do the following:

```
@value = @value.some_method 
```

But isn't there a shorter syntax for that in ruby? Some methods offer bang equivalents, but sadly not all...

For iterations one can use:

```
 i += 1 
```

Is that, or something similar, also available for my code snippet above?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:55:34.663

There's nothing that does this in a shorter way.

To be fair, it is an unusual pattern, and while not especially rare, would lead to confusion if there was an operator like:

```
@value .= some_method 
```

How is that even supposed to be parsed when reading?

As [the Tin Man](https://stackoverflow.com/users/128421/the-tin-man) points out, in-place operators are really what are best here.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:58:46.120

You cannot do that taking the actual variable as the receiver because there is no way to get to the name of the variable. Instead, you need to use the name of the variable like this:

```
class A
  attr_accessor :value
  def change_to_do_something name
    instance_variable_set(name, "do something")
  end
end

a = A.new

a.value = "Hello"
p a.value
# => "Hello"

a.change_to_do_something(:@value)
p a.value
# => "do something" 
```

# php - PHP5 面向对象编程运算符

> ID：14141131
> 
> 赞同：-1
> 
> 时间：2013-01-03T14:47:26.960
> 
> 标签：php

> **可能重复：**
> [什么是“->”PHP 运算符，大声朗读代码时怎么说？](https://stackoverflow.com/questions/2588149/what-is-the-php-operator-called-and-how-do-you-say-it-when-reading-code-out)
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

`->`php5中的标志名称是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:50:56.360

它被称为对象符号运算符

# java - Java 创建泛型类型的实例

> ID：14141135
> 
> 赞同：0
> 
> 时间：2013-01-03T14:47:56.880
> 
> 标签：java, generics

> **可能重复：**
> [在 Java 中创建泛型类型的实例？](https://stackoverflow.com/questions/75175/create-instance-of-generic-type-in-java)

在 C# 中，我可以使用 Activator 或 default(T) 类，但如何在 Java 中做到这一点？我有一个自定义类

```
public class Foo<T extends FooBase> ... 
```

现在我想创建一个 T 实例（它有一个公共默认 ctor）。我是java新手，我不知道如何创建该“类型”的实例。我试过这样的事情：

```
T.class.newInstance(); 
```

但是 T 没有 .class？那么我能做什么呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-03T14:54:06.240

您只能使用现有的构造函数

```
public class Foo<T extends FooBase>{
    T base= (T) new FooBase();
} 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-01-03T14:50:36.143

类 your_class = new Class() ;

# erlang - 使用 http:request 添加超时

> ID：14141138
> 
> 赞同：3
> 
> 时间：2013-01-03T14:48:01.440
> 
> 标签：erlang

我开发了这个功能：

```
sms_sentByHttp(NumPhone,MsgReceived) ->

    NumPhoneTroncated = string:sub_string(NumPhone,2),
    {X1, X2, X3} = erlang:now(),
    Rand = random:uniform(9999),
    {{Y,M,D},{H,Mn,S}}=erlang:universaltime(),
    Ws_req_id = lists:flatten(io_lib:format("~p~p~p~p~p~p~p~p", [X3, Rand,Y,M,D,H,M,S])),
   Url = io_lib:format("http://localhost:7703/enda?msg=~s&from=~s&id=~s", [http_urii:encode(MsgReceived),http_urii:encode(NumPhoneTroncated),Ws_req_id]),

    case http:request(lists:flatten(Url)) of
        {ok , A} -> io:format("response sent\n");
        {error, B} -> io:format("response not sent\n ~w\n", [B])
    end. 
```

现在我想在请求中添加超时的概念，例如 20 秒后。我想显示来自服务器的错误

我试过：

```
case http:request(lists:flatten(Url),[ {timeout,timer:seconds(20)}]) of
           {ok , A} -> io:format("response sent\n");
    {error, B} -> io:format("error from server\n ~w\n", [B])
        end. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T17:12:59.927

我建议使用[ibrowse](https://github.com/cmullaparthi/ibrowse/)作为您的 HTTP 客户端。它在 send_req/6 中包含一个超时参数（以及更多微调超时的选项）。它通常也比默认包含的 inets 库更有效。

另一种选择是[lhttpc](https://github.com/esl/lhttpc.git)，但这显然使用环境变量来设置超时，如果您需要更改某些请求的超时，这将是一个问题。

编辑：

[httpc:request/4](http://erlang.org/doc/man/httpc.html#request-4)允许您将超时指定为 HTTPOptions 的一部分，例如：

```
httpc:request(get, {URL, []}, [{timeout, timer:seconds(20)}], []). 
```

# jquery - 为什么此切换器功能在 Jquery 1.8.3 中不起作用（但在 1.8.2 中起作用）

> ID：14141143
> 
> 赞同：4
> 
> 时间：2013-01-03T14:48:25.107
> 
> 标签：jquery

我在加载 Jquery 1.8.2 时没有问题的网站上有这个脚本（和 HTML） - 但不同的插件需要 1.8.3 版本 - 现在该功能不再起作用。我怀疑它与代码的 .parent 和 .children 部分有关（？），但我不确定。谁能告诉我如何让这个脚本与 1.8.3 或更高版本一起工作？

HTML：

```
<div class='toggle_parent'>

  <div class='toggled_content' style='display:none;'>
      My Content
  </div>
    <div class='toggleHolder'>
    <span class='toggler'>Open</span>
    <span class='toggler' style='display:none;'>Close</span>
  </div>
</div> 
```

脚本：

```
$(document).ready(function(){

    $('.toggler').live('click',function(){
      $(this).parent().children().toggle();  //swaps the display:none between the two spans
      $(this).parent().parent().find('.toggled_content').slideToggle();  //swap the display of the main content with slide action

  });

}); 
```

JS 小提琴在这里：http: [//jsfiddle.net/UezUj/363/](http://jsfiddle.net/UezUj/363/)

（我需要脚本仅在周围的 div 中查找一个工具 div，并且不能使用 #id 来定位 div - 因为我将有许多相互相邻的切换并且不希望它们都在同时。希望这是有道理的......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:22:15.930

尝试更换

```
$('.toggler').live('click', function(){ /*content*/ }; 
```

和

```
$('.toggler').click(function(){ /*content*/ }; 
```

小提琴： http: [//jsfiddle.net/bkqsS/](http://jsfiddle.net/bkqsS/)（用 jQuery 1.9.0 试过）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:37:28.757

这是更新：

1.  问题中的代码片段没有任何问题（正如聚光灯首先指出的那样！）

2.  我的问题是由加载自定义版本的 Jquery 的插件引起的，该版本没有此脚本的所有必要功能。

一旦解决了 - 一切都会重新开始。多亏了 TylerCrompton，代码片段甚至得到了一点改进，所以这并不是一无所获！多谢你们。

# asp.net - 动态添加网页用户控件

> ID：14141144
> 
> 赞同：1
> 
> 时间：2013-01-03T14:48:29.067
> 
> 标签：asp.net, iframe, dynamic, treeview, web-controls

我对 ASP.NET 编程很陌生。现在，我尝试将几个 Web 用户控件添加到我的页面，这些控件取决于我从数据库数据创建的树视图中的复选框。

我正在考虑使用 iframe - 一个用于树视图，另一个用于控件，但这似乎很复杂。有没有更简单的方法来做到这一点？

树视图应始终保留在页面上，Web 用户控件应出现或消失在页面的可滚动部分。你能告诉我解决这个问题的好做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:52:47.197

添加到页面的动态控件需要在每次回发时添加回页面。我不会为此使用 iframe；相反，您可以将左侧的树视图放在浮动 div 中，并将另一个浮动 div 用于右侧内容。如果正确的内容始终是复选框，请使用 ListView、Repeater 或其他为您构建控件树的数据绑定控件。只要 UI 保持一致，使用这些控件就会容易得多。如果没有，您可以动态构建右侧。您必须在所有未来的回发中阅读页面的复选框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:58:41.230

iframe 不是解决此问题的最简单方法（因为您有两个无法相互通信的不同服务器端页面）。

如果您控制可见性的控件数量不多，我建议您将用户控件放在页面上的面板中，全部不可见，并且树视图和此面板都在页面上，在更新面板中。

在检查树视图时，在部分回发中，显示/隐藏适当的 Web 用户控件。

如上所述，动态添加控件是有问题的，因为它们必须在每次回发时重新添加，并且您会遇到状态问题。

# .net - 使用 DotNet 框架在 Dynamics AX 中创建 Excel 文件

> ID：14141148
> 
> 赞同：1
> 
> 时间：2013-01-03T14:48:43.533
> 
> 标签：.net, axapta, dynamics-ax-2009, x++

我想在批处理作业中创建一个 Excel 文件，我尝试使用 SysExcelApplication 类，但它在批处理作业中不起作用，我也遇到了 winAPIServer::fileExist/::FileDelete 类的问题，我通过使用 System.IO 找到了解决方案.file::exist/Delete(filename) 这是我在 X++ 中的代码：

```
SysExcelApplication   xlsapplication;
;
xlsApplication = SysExcelApplication::construct();

xlsWorkBookCollection    = xlsApplication.workbooks();
xlsWorkBook              = xlsWorkBookCollection.add();
xlsWorkSheetCollection   = xlsWorkBook.worksheets();
xlsWorkSheet             = xlsWorkSheetCollection.itemFromNum(1); 
```

我在 SysExcelApplication::construct() 上遇到错误；运行批处理作业时（可以在服务器端执行），我怎样才能对 dotnet 做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:49:14.560

您有几个选择：

*   您可以使用 XML 和 XSLT 来完成。我曾经在我的博客上发表过一篇文章，它只需要一个简单的 XML 并将其转换为适合保存的 Excel 文件（XML 格式）。这可能是一个很好的解决方案，因为从 Dynamics Ax 编写 XML 文件非常容易。本文展示了如何创建包含项目的 XML，并展示了如何将其导入 Excel。[使用 C#、XML 和 XSLT 创建 Excel 电子表格](http://www.ksaelen.be/wordpresses/dynamicsaxblog/2009/08/using-c-xml-xslt-to-create-excel-spreadsheet/)

*   您可以使用 OpenXML（[使用 C# 和 OpenXML SDK](http://www.codeproject.com/Articles/97307/Using-C-and-Open-XML-SDK-2-0-for-Microsoft-Office)）

*   还有一个选项可以使用为此创建的第三方控件（例如[Infragistics Excel ）](http://www.infragistics.com/products/windows-forms/infragistics-excel/)

# .net - 如何从 .NET 2.0 程序集中间接使用 FCL 4.0 代码？

> ID：14141149
> 
> 赞同：0
> 
> 时间：2013-01-03T14:48:45.963
> 
> 标签：.net, visual-studio-2010, c#-4.0, t4

我正在尝试在我正在编写的项目中简化 T4 生成的使用，不幸的是，该项目必须针对客户的 .NET 2.0，但我似乎无法避免使用 FCL 4.0 库或找到 VS 将让我从一个针对 2.0 的程序集中访问针对 4.0 的程序集中的类型。

这个想法是声明一个`T4Attribute`可用于装饰消费项目中的部分类型。然后 T4 将根据属性的详细信息生成该类型的额外代码。例如，标准 dispose 模式的大部分样板部分都可以通过使用单行属性装饰添加到类型中。

我正在派生自己的自定义`TextTransformation`来支持这一点，但由于我有 VS2010，我无法安装 VS2005/8 SDK，只有 VS2010 一个，这意味着`TextTransformation`我使用的是 .NET 4.0 DLL（Microsoft.VisualStudio .TextTemplating.10.0)。因此，该属性位于同一个 DLL 中，当我尝试从使用项目中引用该 DLL 时，它只能看到两者都针对相同框架版本的类型。一旦项目是 2.0 并且库是 4.0，VS 就不再找到引用的类型或命名空间。

我猜它认为由于应用程序将启动 CLRv2 以运行，它无法在 v4 DLL 中运行代码（可能使用`dynamic`等）。很公平，但实际上库中的类型只会在开发 PC 上通过 T4 模板扫描项目以查找那些`T4Attribute`告诉它生成代码的人 - 我假设 VS2010 中的 T4 引擎在 CLRv4 下运行。这些属性甚至不会被编译到发布版本中。

我仍然处于学习曲线的底部。我做错了吗，有没有更简单的方法，如果没有，有没有办法解决我的问题？尽管 VS 版本错误，我能否以某种方式获得较旧的 VisualStudio DLL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:28:29.453

创建两个装配体。首先，以 .NET 2.0 为目标来定义您描述的 T4Attribute，其次，以 .NET 4.0 为目标来定义自定义 TextTransformation。这样，您可以从产品代码和第二个程序集中引用第一个程序集以进行代码生成。

# eventkit - EventKit 提醒

> ID：14141150
> 
> 赞同：0
> 
> 时间：2013-01-03T14:48:58.060
> 
> 标签：eventkit, reminders

我正在努力学习 EventKit 提醒的基础知识。我正在尝试在这里重新创建教程：[http ://www.techotopia.com/index.php/Using_iOS_6_Event_Kit_to_Create_Date_and_Location_Based_Reminders](http://www.techotopia.com/index.php/Using_iOS_6_Event_Kit_to_Create_Date_and_Location_Based_Reminders)

但是，当我尝试构建项目时，我在 IBAction 和 CreateReminder 的 .m 文件中都出现“缺少方法声明的上下文”的错误。我试图在这里寻求建议，但似乎仍然无法弄清楚我做错了什么。不得不说这些教程有什么用，如果它们总是遗漏一些阻止它构建的基本信息。如果有人可以提供帮助，我将不胜感激。

```
#import <UIKit/UIKit.h>
#import <EventKit/EventKit.h>

@interface ReminderAppFirstViewController : UIViewController

@property (strong, nonatomic) EKEventStore *eventStore;

@property (strong, nonatomic) IBOutlet UIDatePicker *myDatePicker;
@property (strong, nonatomic) IBOutlet UITextField *reminderText;
- (IBAction)setReminder:(id)sender;
- (void)createReminder;
@end

- (IBAction)setReminder:(id)sender {

    if (_eventStore == nil)
    {
        _eventStore = [[EKEventStore alloc]init];
        [_eventStore requestAccessToEntityType:EKEntityTypeReminder comnpletion: ^(BOOL granted, NSError *error) ] {
            if (!granted)
                NSLog(@"Access to store not granted");
        }];

    }

    if (_eventStore != nil)
        [self createReminder];
}

- (void)createReminder
{
    EKReminder *reminder = [EKReminder
                            reminderWithEventStore:self.eventStore];

    reminder.title = _reminderText.text;

    reminder.calendar = [_eventStore defaultCalendarForNewReminders];

    NSDate *date = [_myDatePicker date];

    EKAlarm *alarm = [EKAlarm alarmWithAbsoluteDate:date];

    [reminder addAlarm:alarm];

    NSError *error = nil;

    [_eventStore saveReminder:reminder commit:YES error:&error];

    if (error)
        NSLog(@"error = %@", error);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:53:41.243

下面的部分看起来应该在 .h 文件中，而不是 .m 中。在 .m 的 @interface 部分中声明的属性本质上是私有的，并且只能在 .m 中访问。方法也不行。也许是教程中的错误。

```
#import <UIKit/UIKit.h>
#import <EventKit/EventKit.h>

@interface ReminderAppFirstViewController : UIViewController

@property (strong, nonatomic) EKEventStore *eventStore;

@property (strong, nonatomic) IBOutlet UIDatePicker *myDatePicker;
@property (strong, nonatomic) IBOutlet UITextField *reminderText;
- (IBAction)setReminder:(id)sender;
- (void)createReminder;
@end 
```

# javascript - 纸翻转 Jquery & CSS

> ID：14141153
> 
> 赞同：2
> 
> 时间：2013-01-03T14:49:05.070
> 
> 标签：javascript, jquery, css, page-flipping

有没有一种方法可以使用 javascript、Jquery 和 || 进行 Paper 翻转 还是 CSS ？

我找到[了这种方法](http://www.turnjs.com/)，但它不是免费的。

那么有没有免费的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:54:35.030

您可以尝试使用[小册子](http://builtbywill.com/code/booklet/) 或[卷曲](https://github.com/elliottkember/the-sexy-curls-jquery-plugin)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:59:20.880

看一下本教程，对使用的 javascript 和 css 有一个很好的概述。

[全屏 PaperFlip](http://tympanus.net/codrops/2012/12/11/fullscreen-pageflip-layout/)

# java - JPA 在带有 DTO 和乐观锁定的 RESTful Web 应用程序中合并？

> ID：14141156
> 
> 赞同：17
> 
> 时间：2013-01-03T14:49:20.153
> 
> 标签：java, rest, jpa, web, dto

我的问题是： JPA***在无状态 Web 应用程序中******是否有过角色？`merge`***

`merge`关于JPA 中的操作，有很多关于 SO 的讨论。还有[一篇关于该主题的精彩文章，](http://blog.xebia.com/2009/03/23/jpa-implementation-patterns-saving-detached-entities/)通过更手动的 Do-It-Yourself 流程（您可以通过实体管理器找到实体并进行更改）对比 JPA 合并。

我的应用程序有一个丰富的域模型（ala 域驱动设计），它使用`@Version`注释来利用乐观锁定。我们还创建了 DTO，以作为 RESTful Web 服务的一部分通过网络发送。这个 DTO 层的创建还允许我们向客户端发送它需要的所有东西，而不是它不需要的东西。

到目前为止，我了解这是一个相当典型的架构。我的问题是关于需要更新（即 HTTP PUT）现有对象的服务方法。在这种情况下，我们有这两种方法：1) JPA Merge，和 2) DIY。

我不明白的是，JPA 合并甚至可以被视为处理更新的选项。这是我的想法，我想知道是否有我不明白的地方：

1) 为了从有线 DTO 正确创建分离的 JPA 实体，必须正确设置版本号...否则会引发 OptimisticLockException。但是 JPA 规范说：

> 实体可以访问其版本字段或属性的状态或导出供应用程序使用以访问版本的方法，但不得修改版本值[30]。只有持久性提供者被允许设置或更新对象中版本属性的值。

2) 合并不处理双向关系……反向字段总是以空值结束。

3) 如果 DTO 中缺少任何字段或数据（由于部分更新），则 JPA 合并将删除这些关系或使这些字段无效。Hibernate 可以处理部分更新，但不能处理 JPA 合并。DIY 可以处理部分更新。

4) 合并方法要做的第一件事是在数据库中查询实体 ID，因此与 DIY 相比没有性能优势。

5) 在 DYI 更新中，我们加载实体并根据 DTO 进行更改——因为 JPA 上下文实现了开箱即用的工作单元模式， 所以没有调用`merge`或调用。`persist`

***我有这个直吗？***

**编辑：**

6）关于延迟加载关系的合并行为可能[因提供者而异](https://hibernate.onjira.com/browse/HHH-4135)。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-03T15:16:52.900

使用 Merge 确实需要您发送和接收实体的完整表示，或维护服务器端状态。对于琐碎的 CRUD-y 类型的操作，它简单方便。我已经在无状态 Web 应用程序中大量使用它，在这些应用程序中，让客户端看到整个实体没有任何有意义的安全隐患。

但是，如果您已经将操作简化为只传递直接相关的信息，那么您还需要手动编写相应的服务。

请记住，在进行“DIY”更新时，您仍然需要在 DTO 上传递一个版本号，并手动将其与数据库中的版本号进行比较。否则，如果您使用更简单的合并方法，您将无法获得跨越“用户思考时间”的乐观锁定。

1.  您不能更改提供者创建的实体的版本，但是当您使用`new`关键字创建自己的实体类实例时，它很好，并且可以在其上设置版本。

2.  它将使持久表示与您提供的内存中表示相匹配，这可能包括使事物为空。请记住，当一个对象被合并时，该对象应该被丢弃并替换为合并返回的对象。您不应该合并一个对象然后继续使用它。规范未定义其状态。

3.  真的。

4.  很可能，只要您的 DIY 解决方案也使用实体 ID 而不是任意查询。（在查询中使用“查找”方法还有其他好处。）

5.  真的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-08T17:29:17.843

我要补充：

7) Merge 转换为插入或更新取决于 DB 上记录的存在，因此它不能正确处理 update-vs-delete 乐观并发。也就是说，如果另一个用户同时删除记录并且您更新它，它必须（1）抛出并发异常......但它没有，它只是将记录作为新记录插入。

(1) 至少，在我看来，在大多数情况下，它应该。我可以想象一些我希望这个用例触发新插入的情况，但它们与平常相去甚远。至少，我希望开发人员三思而后行，而不是仅仅接受“merge() == updateWithConcurrencyControl()”，因为事实并非如此。

# php - MySQL删除疑难解答

> ID：14141161
> 
> 赞同：1
> 
> 时间：2013-01-03T14:49:31.043
> 
> 标签：php, mysql

我重新启动了 MySQL 服务，并尝试使用我的 PHP 程序删除功能来删除现有的行，但我发现虽然删除查询被计算在内，但该行没有被删除。我尝试将删除级联应用于子表的外键，但这似乎没有效果。我想知道为什么删除会什么都不做。

```
CREATE TABLE `customers` (
  `idcustomers` int(11) NOT NULL AUTO_INCREMENT,
  `firstname` varchar(45) DEFAULT NULL,
  `lastname` varchar(45) DEFAULT NULL,
  `address1` varchar(45) DEFAULT NULL,
  `address2` varchar(45) DEFAULT NULL,
  `city` varchar(45) DEFAULT NULL,
  `state` varchar(45) DEFAULT NULL,
  `zip` varchar(45) DEFAULT NULL,
  `phone` varchar(45) DEFAULT NULL,
  `email` varchar(45) DEFAULT NULL,
  `cell` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`idcustomers`),
  UNIQUE KEY `idcustomers_UNIQUE` (`idcustomers`)
) ENGINE=InnoDB AUTO_INCREMENT=54 DEFAULT CHARSET=latin1

CREATE TABLE `events` (
  `idevents` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(250) DEFAULT NULL,
  `start` datetime DEFAULT NULL,
  `end` datetime DEFAULT NULL,
  `allday` varchar(50) DEFAULT NULL,
  `url` varchar(1000) DEFAULT NULL,
  `customerid` int(11) NOT NULL,
  `memo` longtext,
  `dispatchstatus` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`idevents`),
  KEY `FK_events` (`customerid`),
  CONSTRAINT `FK_events` FOREIGN KEY (`customerid`) REFERENCES `customers` (`idcustomers`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=18 DEFAULT CHARSET=latin1

Com_delete 2 
```

PHP 看起来像这样：

```
<?php
session_start();

date_default_timezone_set("America/Los_Angeles");

if($_SESSION['loggedin'] != TRUE)
{
header("Location: index.php");
}

require_once('../php.securelogin/include.securelogin.php');
$mysqli = new mysqli($ad_host, $ad_user, $ad_password, "samedaycrm");

if ($mysqli->connect_errno) {
printf("Connect failed: %s\n", $mysqli->connect_error);
exit();
}

$customerid = $_SESSION['customer_id'];

$tSQL = "delete from events where customerid = \"$customerid\"";
$result = $mysqli->query($tSQL);

$tSQL = "delete from customers where idcustomers = \"$customerid\"";
$result = $mysqli->query($tSQL);

echo $mysqli->error;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:38:25.840

假设`customerid`和`idcustomers`列都是数字应该没问题。顺便说一句，您不需要在这些查询中引用变量，那么您就不需要转义它们。你可以试试：

```
$tSQL = "delete from events where customerid = $customerid"; 
```

但它应该与您已经使用的没有任何不同。当然，如果您不确定可以使用的列类型：

```
$tSQL = "delete from events where customerid = '".$customerid."'"; 
```

或者你可以逃脱：

```
$tSQL = "delete from events where customerid = '$customerid'"; 
```

但出于某种原因，我一直讨厌它。

如果所有这些都失败了，通过吐出`$customerid`（甚至整个`$tSQL`）变量然后在 phpmyadmin 或 toad 或您使用的任何数据库客户端中手动尝试查询来进行故障排除，看看它告诉您什么。如果它只是说`0 rows affected`，然后像 a 一样运行它`select`。量身定制。

# amazon-web-services - 亚马逊 s3 存储桶的 https 安全异常

> ID：14141162
> 
> 赞同：3
> 
> 时间：2013-01-03T14:49:30.963
> 
> 标签：amazon-web-services, amazon-s3

我有两个存储桶[https://almaconnect.dev.s3.amazonaws.com/](https://almaconnect.dev.s3.amazonaws.com/)和[https://almaconnect.s3.amazonaws.com/](https://almaconnect.s3.amazonaws.com/)

我点击的第一个结果是不安全的，并要求我在浏览器中添加一个异常。第二个工作正常。我想知道可能有什么问题。请大家帮帮我......

谢谢，阿米特乔杜里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T14:56:19.390

服务器为 发送通配符证书`*.s3.amazon.com`。这证明了域的所有子域`s3.amazon.com`。

证书对您的工作示例有效，`almaconnect.s3.amazon.com`但对您的第二个示例无效`**alamonnect.**dev.s3.amazon.com`。

创建一个名为 eg 的存储桶`alaconnectdev`来解决此问题。

> 随着 Firefox 3.5 的发布，所有主流浏览器只允许一个级别的子域与包含通配符的证书名称匹配，符合 RFC 2818。
> 
> 换句话说，证书 *.mydomain.com 将适用于 one.mydomain.com 或 two.mydomain.com，但不适用于 one.two.mydomain.com。

**资源：**

*   [维基百科通配符证书](http://en.wikipedia.org/wiki/Wildcard_certificate)
*   [IETF.org 上的 RFC 2818](http://www.ietf.org/rfc/rfc2818.txt)

# android - 在启动之前多次单击同一按钮的多个实例

> ID：14141163
> 
> 赞同：1
> 
> 时间：2013-01-03T14:49:32.247
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-4.2-jelly-bean

有时当我的应用程序运行速度较慢时，用户可以多次单击启动意图的按钮。我听说这可能是 ICS 中修复的错误 - 是真的吗？或者我是否必须为我开始的每一个意图管理启动模式。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:15:46.417

添加一些简单的去抖动：

```
class MyActivity extends Activity {
    private boolean wasButtonPressed = false;

void onResume() {
    super onResume();
    wasButtonPressed = false;
}

void onClick( View view ) {
    if( !wasButtonPressed ) {
        wasButtonPressed = true;
        startActivity( ....
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:16:50.253

当您执行长时间操作时，您必须禁用该按钮，并在执行操作以响应用户点击后使其启用。您正在对 onClick 方法执行长时间操作，操作系统将堆叠您的所有用户点击，witch 将被异步转发，这不是错误。您可以显示进度对话框以通知用户长时间操作。一个快速的解决方法是禁用该按钮，直到上一次点击完全被消耗。

```
@Override
    public void onClick(View aView) {
        int id = aView.getId();
        switch (id) {
            case R.id.yourButton:
                aView.setEnabled(false);
               // add your own implementation
                aView.setEnabled(true);
                break;

            default:

                break;
        }

    } 
```

# java - Eclipse，如何在创建 WorkBench 窗口后执行包中的代码？

> ID：14141167
> 
> 赞同：0
> 
> 时间：2013-01-03T14:49:39.827
> 
> 标签：java, eclipse, rcp

所以我有一个需要访问工作台窗口的包，以便以编程方式将一些项目添加到菜单中，我可以做到这一点。

但是我遇到的是当我的包在工作台窗口完成实例化之前启动的竞争条件，当我的包尝试将内容添加到带有代码的菜单时，它会吐出一个关于工作台不存在的错误。

那么是否有一个扩展点或其他东西可以用来告诉程序在工作台窗口加载后执行这样那样的代码？我不想乱搞我的捆绑包的起始级别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:59:04.623

*   在 Eclipse 3 中，您可以注册 org.eclipse.ui.application.WorkbenchWindowAdvisor 来监听窗口生命周期事件。
*   如果您的项目不是动态的，您可以通过 plugin.xml 添加它们（而不是以编程方式添加它们）。Eclipse 将在适当的时候加载这些扩展，您不必担心生命周期。

# python - 如何使用 sphinx/autodoc 列出无证成员？

> ID：14141170
> 
> 赞同：8
> 
> 时间：2013-01-03T14:49:47.753
> 
> 标签：python, python-sphinx, autodoc

我正在使用带有扩展名的*sphinx*`autodoc`，并希望生成一个列表，该列表*仅*包含几个模块中未记录的成员函数，而不是记录的成员。

我可以成功地创建一个包含已记录成员和未记录成员的列表，**如下**所示：

```
.. automodule:: module
    :members:
    :undoc-members: 
```

正如预期的那样，单独使用该`:members:`指令仅创建记录成员的列表。

```
.. automodule:: module
    :members: 
```

但是仅使用`:undoc-members:`指令（即省略`:members:`标志）根本不会产生任何列表：

```
.. automodule:: module
    :undoc-members: 
```

有没有办法自动生成这个？

（主要文档包括一个显示所有已记录成员的页面，但我发现通过使用列出任何未记录成员的单个页面而不显示这些成员的文本来确保我为每个函数等编写文档会更有用记录在案的）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T15:16:56.233

通过将以下内容添加到以下内容，覆盖`autodoc-process-docstring`事件（如@delnan 所述）可以提供帮助`conf.py`：

```
# set up the types of member to check that are documented
members_to_watch = ['function',];

def warn_undocumented_members(app, what, name, obj, options, lines):
    if(what in members_to_watch and len(lines)==0):
        # warn to terminal during build
        print "Warning: ", what, "is undocumented: ", name, "(%d)"% len(lines);
        # or modify the docstring so the rendered output is highlights the omission
        lines.append(".. Warning:: %s '%s' undocumented" % (what, name)); 
```

然后将此函数连接到事件（来自[此 SO 线程](https://stackoverflow.com/questions/3757500/how-do-i-connect-sphinxs-autodoc-skip-member-to-my-function)中的答案）：

```
def setup(app):
    app.connect('autodoc-process-docstring', warn_undocumented_members); 
```

要打开（关闭）警告，包括（排除）undoc-members - 全局使用`autodoc_default_flags`in `conf.py`，或使用问题中的两个指令。

```
autodoc_default_flags = ['members', 'undoc-members' ]
#autodoc_default_flags = ['members' ] 
```

**编辑：**

我尝试通过以下方法扩展这种方法以仅生成 undoc 成员：

*   `warn_undoc=True`在函数执行期间有条件地在对象上设置一个属性，例如`warn_undocumented_members`（上）
*   `autodoc-skip-member`如果没有设置，则将第二个覆盖函数附加到跳过所有成员*的*预处理器事件`warn_undoc`。

然而，进一步的调查排除了这种方法，因为`autodoc-skip-member`发生在每组成员之前`autodoc-process-docstring`发生。因此，属性设置得太晚，无法根据文档字符串的存在/不存在有条件地跳过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-22T14:19:06.063

从[Skipping Members](http://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html#skipping-members)中，将其添加到您的 conf.py 中：

```
def skip_non_undoc(app, what, name, obj, skip, options):
    # if undoc-members is set, show only undocumented members
    if 'undoc-members' in options and obj.__doc__ is not None:
        # skip member that have a __doc__
        return True
    else:
        return None

def setup(app):
    app.connect('autodoc-skip-member', skip_non_undoc) 
```

使用选项`members`，`undoc-members`现在应该只显示无证成员。但是，无论您在哪里使用，它都会这样做`undoc-members`。如果在某些情况下您只想显示未记录的成员，而在某些情况下您想同时显示两者，那么您需要在该函数中实现一些更复杂的检查。

如果您在过去的 6 年中一直在为此摸不着头脑，也许这会有所帮助？

# c# - 从固定对象获取字节数组

> ID：14141172
> 
> 赞同：1
> 
> 时间：2013-01-03T14:49:54.227
> 
> 标签：c#, unmanaged, managed

可以从托管数组中获取指针

```
byte [] buffer = new byte[length + byteAlignment];
GCHandle bufferHandle = GCHandle.Alloc(buffer, GCHandleType.Pinned);
IntPtr  ptr = bufferHandle.AddrOfPinnedObject(); 
```

有没有办法做相反的事情。从固定对象中获取字节数组而不复制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:56:14.523

当然，这就是`Marshal.Copy`目的 - 没有办法（嗯，没有复制一些品种就没有办法）以其他方式在托管和非托管状态之间获取内存......嗯，这不是 100% 正确，但我假设你不不想仅仅依靠 Win32/C 和 p/invoke 来复制内存。

`Marshal.Copy`使用看起来像：

```
IntPtr addressOfThing = ....;
byte[] buffer = new byte[...];
Marshal.Copy(addressOfThing, buffer, 0, bufferSize); 
```

# c# - C# 在 JSON 字符串的开头和结尾添加双引号导致服务器解码错误

> ID：14141174
> 
> 赞同：6
> 
> 时间：2013-01-03T14:49:59.097
> 
> 标签：c#, json, serialization

我正在编写 ac# 机制来使用 Json 将文件上传到 Rails 服务器。

在进入文件部分之前，我只是试图发布到服务器，并且似乎对到达服务器的 json 字符串有一些问题..

我可能做错了什么？我已经尝试过两种不同的序列化字符串的方法，甚至加载已经序列化的字符串......

我想知道它是否与显然被发送到服务器的字符串开头和结尾的双引号有什么关系，以及如何从请求中删除它们（没有周围的引号并使用来自 WizTools.org 的 RestClient，一切顺利美好的...） ：

```
MultiJson::DecodeError (757: unexpected token at '"{\"receipt\":{\"total\":100.0,\"tag_number\":\"xxxxx\",\"ispaperduplicate\":true},\"machine\":{\"serial_number\":\"111111\",\"safe_token\":\"1Y321a\"}}"') 
```

我的 C# 代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using RestSharp;
using System.Web.Script.Serialization;
using Newtonsoft.Json;

namespace RonRestClient
{

    class templateRequest
    {
        public Receipt receipt;
        public class Receipt
        {
            public float total;
            public String tag_number;
            public bool ispaperduplicate = true;
            public Receipt(float total, String tagnr)
            {
                this.total = total;
                this.tag_number = tagnr;
            }
        };
        public Machine machine;
        public class Machine
        {
            public String serial_number;
            public String safe_token;
            public Machine(String machinenr, String safe_token)
            {
                this.serial_number = machinenr;
                this.safe_token = safe_token;
            }
        };
    }

    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {

            string path = @"C:\file.pdf";
            string tagnr = "p94tt7w";
            string machinenr = "2803433";
            string safe_token = "123";
            float total = 100;

            templateRequest req = new templateRequest();
            req.receipt = new templateRequest.Receipt(total, tagnr);
            req.machine = new templateRequest.Machine(machinenr, safe_token);
            //string json_body = JsonConvert.SerializeObject(req);
            //string json_body = new JavaScriptSerializer().Serialize(req);

            string json_body = @"{""receipt"" : {""total"":"+total+@", ""tag_number"":"""+tagnr+@""",""ispaperduplicate"":true},""machine"":{""serial_number"": """+machinenr+@""", ""safe_token"": """+safe_token+@"""}}";

            var client = new RestClient("http://localhost:3000");

            var request = new RestRequest("/receipts",Method.POST);

            //set request Body
            request.AddHeader("Content-type", "application/json");
            request.AddHeader("Accept", "application/json");
            request.RequestFormat = DataFormat.Json;

            request.AddBody(json_body); 
            //request.AddParameter("text/json", json_body, ParameterType.RequestBody);

            // easily add HTTP Headers

            // add files to upload (works with compatible verbs)
            //request.AddFile("receipt/receipt_file",path);

            // execute the request

            IRestResponse response = client.Execute(request);
            var content = response.Content; // raw content as string
            if(response.ErrorMessage !="") content += response.ErrorMessage;
            response_box.Text = content;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T15:10:10.347

问题是`RestRequest.AddBody`（[源代码](https://github.com/restsharp/RestSharp/blob/master/RestSharp/RestRequest.cs)）方法实际上预设了内容没有序列化为正确的格式。

这意味着它认为您正在尝试将 .NET 字符串作为 JSON 字符串传递，而不是认识到您实际上想要将该字符串作为 JSON 对象传递。

但是，这意味着您实际上做了太多工作，您自己将对象序列化为 JSON：

换行

```
request.AddBody(json_body); 
```

和：

```
request.AddBody(req); 
```

您可以使用该`RestRequest.JsonSerializer`属性控制序列化为 JSON 的方式。

如果你绝对想保存一个 JSON 字符串，那么我猜你可能想写：

```
request.AddParameter("application/json", json_body, ParameterType.RequestBody); 
```

（我看到你有一条评论实际上就是这样做的——你为什么评论它？）

# java - Hibernate 和 mysql 错误：无法添加或更新子行

> ID：14141175
> 
> 赞同：0
> 
> 时间：2013-01-03T14:50:03.073
> 
> 标签：java, mysql, sql, hibernate, foreign-keys

我有一个 sais 的休眠错误：

> 15:32:48,554 调试 SQL：111 - 插入 apurement.user（groupe_id，用户名，密码，电子邮件）值（？，？，？，？）
> 15：32：48，664 WARN JDBCExceptionReporter：100 - SQL 错误：1452，SQLState : 23000
> 15:32:48,664 错误 JDBCExceptionReporter:101 -
> 无法添加或更新子行：外键约束失败（`apurement`. `user`,
> CONSTRAINT `groupe_id`FOREIGN KEY ( `groupe_id`) REFERENCES `groupe`( `groupe_id`)
> ON DELETE NO ACTION ON UPDATE NO ACTION）

用于会话管理的代码是 Logic.java：

```
package com.beans;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.cfg.*;

public class Logic {
protected Configuration cfg;
protected SessionFactory sfg;
protected Session s;
protected Transaction tx;

public Logic() {

    this.init();

}

public void init() {
    this.setCfg(new Configuration().configure());
    this.setSfg(this.getCfg().buildSessionFactory());
    this.setS(this.getSfg().openSession());
    this.setTx(this.getS().beginTransaction());
}

public Configuration getCfg() {
    return cfg;
}

public void setCfg(Configuration cfg) {
    this.cfg = cfg;
}

public SessionFactory getSfg() {
    return sfg;
}

public void setSfg(SessionFactory sfg) {
    this.sfg = sfg;
}

public Session getS() {
    return s;
}

public void setS(Session s) {
    this.s = s;
}

public Transaction getTx() {
    return tx;
}

public void setTx(Transaction tx) {
    this.tx = tx;
}

} 
```

用户类：

```
 package com.beans;

 // Generated 3 janv. 2013 12:07:19 by Hibernate Tools 3.4.0.CR1

/**
* User generated by hbm2java
 */
  public class User implements java.io.Serializable {

/**
 * 
 */
private static final long serialVersionUID = 1L;
private Integer userId;
private Groupe groupe;
private String username;
private String password;
private String email;

public User() {
}

public User(Groupe groupe, String username, String password, String email) {
    this.groupe = groupe;
    this.username = username;
    this.password = password;
    this.email = email;
}

public Integer getUserId() {
    return this.userId;
}

public void setUserId(Integer userId) {
    this.userId = userId;
}

public Groupe getGroupe() {
    return this.groupe;
}

public void setGroupe(Groupe groupe) {
    this.groupe = groupe;
}

public String getUsername() {
    return this.username;
}

public void setUsername(String username) {
    this.username = username;
}

public String getPassword() {
    return this.password;
}

public void setPassword(String password) {
    this.password = password;
}

public String getEmail() {
    return this.email;
}

public void setEmail(String email) {
    this.email = email;
}

 } 
```

用户.hbm：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
 "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 3 janv. 2013 12:07:19 by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
<class name="User" table="user" catalog="apurement">
    <id name="userId" type="java.lang.Integer">
        <column name="user_id" />
        <generator class="identity" />
    </id>
    <many-to-one name="groupe" class="com.beans.Groupe" fetch="select">
        <column name="groupe_id" not-null="true" />
    </many-to-one>
    <property name="username" type="string">
        <column name="username" length="45" not-null="true" />
    </property>
    <property name="password" type="string">
        <column name="password" length="45" not-null="true" />
    </property>
    <property name="email" type="string">
        <column name="email" length="45" not-null="true" />

    </property>

</class>
 </hibernate-mapping> 
```

groupe.java：

```
package com.beans;

// default package
// Generated 3 janv. 2013 12:07:19 by Hibernate Tools 3.4.0.CR1

import java.util.HashSet;
import java.util.Set;

/**
 * Groupe generated by hbm2java
 */
 public class Groupe implements java.io.Serializable {

/**
 * 
 */
private static final long serialVersionUID = 1L;
private Integer groupeId;
private String groupeName;
private String groupeRole;
private Set users = new HashSet(0);

public Groupe() {
}

public Groupe(String groupeName, String groupeRole) {
    this.groupeName = groupeName;
    this.groupeRole = groupeRole;
}

public Groupe(String groupeName, String groupeRole, Set users) {
    this.groupeName = groupeName;
    this.groupeRole = groupeRole;
    this.users = users;
}

public Integer getGroupeId() {
    return this.groupeId;
}

public void setGroupeId(Integer groupeId) {
    this.groupeId = groupeId;
}

public String getGroupeName() {
    return this.groupeName;
}

public void setGroupeName(String groupeName) {
    this.groupeName = groupeName;
}

public String getGroupeRole() {
    return this.groupeRole;
}

public void setGroupeRole(String groupeRole) {
    this.groupeRole = groupeRole;
}

public Set getUsers() {
    return this.users;
}

public void setUsers(Set users) {
    this.users = users;
}

} 
```

Groupe.hbm.xml

```
<?xml version="1.0"?>
 <!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
   "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
 <!-- Generated 3 janv. 2013 12:07:19 by Hibernate Tools 3.4.0.CR1 -->
 <hibernate-mapping>
   <class name="Groupe" table="groupe" catalog="apurement">
      <id name="groupeId" type="java.lang.Integer">
        <column name="groupe_id" />
        <generator class="identity" />
      </id>
     <property name="groupeName" type="string">
        <column name="groupe_name" length="100" not-null="true" />
    </property>
    <property name="groupeRole" type="string">
        <column name="groupe_role" length="45" not-null="true" />
    </property>
    <set name="users" table="user" inverse="true" lazy="true" fetch="select">
        <key>
            <column name="groupe_id" not-null="true" />
        </key>
        <one-to-many class="com.beans.User" />
    </set>
  </class>
 </hibernate-mapping> 
```

休眠.cfg：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
                                     "http://hibernate.sourceforge.net/hibernate- configuration-3.0.dtd">
<hibernate-configuration>
 <session-factory name="sf">
  <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
  <property name="hibernate.connection.password">root</property>
  <property name="hibernate.connection.url">jdbc:mysql://localhost/apurement</property>
  <property name="hibernate.connection.username">root</property>
  <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
  <mapping class="com.beans.User" resource="com/beans/User.hbm.xml"/>
  <mapping class="com.beans.Groupe" resource="com/beans/Groupe.hbm.xml"/>
 </session-factory>
</hibernate-configuration> 
```

我不知道发生了什么事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:58:31.973

您有一个用户，该用户具有到 Groupe 的多对一映射，其中非 null 指定为 true。您正在尝试保留（插入）没有 Groupe 的用户。

# ios - 具有微秒奇怪行为的 iOS 日期格式

> ID：14141181
> 
> 赞同：1
> 
> 时间：2013-01-03T14:50:23.823
> 
> 标签：ios, nsdateformatter, date-format

我在解析日期字符串时遇到了一个奇怪的问题。我有一个日期格式化程序，格式为：

```
yyyy-MM-dd HH:mm:ss.SSSSSSZZ 
```

和日期字符串：

```
2012-11-09 10:47:01.999804+01 
```

dateFromString 方法返回 nil，但是当我将日期字符串更改为 ie 时：

```
2012-11-09 10:47:01.989804+01 
```

它有效......有谁知道为什么微秒值有这样的限制，我怎样才能正确解析上面的日期？

我可以用正则表达式解析它并剪切整个 SSSSSS 部分，但通常有时我需要比较日期，这样它们就不会匹配，这会导致更多问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:04:09.850

I had no end of niggly issues doing this, finally got it to work but stripped the point seconds off and used the format as follows

`#define DATEFORMATSTRINGTIMEZONE @"yyyy-MM-dd HH:mm ZZZ"`

a bit like you say. I have to admit a bit more into the project I realized this was a very difficult method of sharing dates and instead adopted epoch time which has saved all headaches I was having regarding timezones... I'd highly recommend it if you have the luxury of changing the incoming data format.

Whilst I'm not sure why yours doesn't parse, I would question the ZZ instead of the ZZZ at the end given you have +01 not +1?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:38:35.690

我终于解决了这个问题。

我正在修改日期格式和日期字符串以删除微秒，以便我可以正确解析日期。然后我只添加从原始日期字符串解析的微秒。

# c++ - 当第二个线程从地图中删除值时如何恢复线程？

> ID：14141182
> 
> 赞同：0
> 
> 时间：2013-01-03T14:50:25.547
> 
> 标签：c++, multithreading

我正在创建提升线程并将其地址存储在地图中。这些线程将连续运行并迭代（比如说）mapA，直到我执行线程中断。

现在的问题：

我想删除 mapA 中的一个值。我想让这个线程休眠，直到删除 mapA 中的值完成。一旦删除完成，线程应该继续工作。

```
Thread1
{
   ...Code...
   ...Code...
   loop over mapA
   ...Code...
   ...Code...
}

Thread2
{
   sleep(Thread1)
   until
   value in the mapA is deleted
   Continue(Thread1)
} 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:04:52.343

为此使用条件变量，示意性地使用 boost：

```
boost::mutex mutex;
boost::condition_variable cond;

Thread1
{
  boost::scoped_lock lock(mutex);

  ....
  // Looping over map done
  cond.notify_one();
}

Thread2
{
  boost::scoped_lock lock(mutex);

  // wait for end of thread1
  cond.wait(lock);

  // when we get here we continue, and lock is protecting concurrency from thread1 again
  ...
} 
```

即使在您有多个生产者/消费者的情况下，这也能很好地工作。

# c# - 特殊字符显示为 �

> ID：14141185
> 
> 赞同：1
> 
> 时间：2013-01-03T14:50:28.810
> 
> 标签：c#, text

在我的代码中，我在 Windows 窗体状态栏中显示了一些文本。这还包括用户的全名。但是，由于当地语言的原因，它很可能包含诸如“š、č、ř、ě、í、á 等”之类的字母。这些都显示为“�”。我是否需要以某种方式更改字符集或其他内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T14:51:54.350

您在表单中使用的字体很可能不支持 Unicode 字符。

# database - 如何在列表视图中显示来自 sqlite 数据库的特定数据，条件如“where”？

> ID：14141194
> 
> 赞同：0
> 
> 时间：2013-01-03T14:50:41.900
> 
> 标签：database, sqlite, listview, conditional-statements

我使用 SQLite 数据库制作了一个应用程序。我想在列表视图中显示数据，但我不想显示数据库中的所有数据，而只是显示一些数据。所以，我想添加一个条件。我只想显示字符串“dag”为“maandag”的数据。谁能帮我？

这是我的 DatabaseHelper 中创建数据库的代码：

```
package com.persoonlijk.rooster.test2;

import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteStatement;
import java.util.ArrayList;
import java.util.List;

//A helper class to manage database creation and version management. 
public class DataManipulator
{
//Database attributes
private static final String DATABASE_NAME = "mydatabase.db";
static final String TABLE_NAME = null;
private static final int DATABASE_VERSION = 12;

//Table attributes
public static final String KEY_ROWID = "id";
public static final String KEY_DAG = "dag";
public static final String KEY_UUR = "uur";
public static final String KEY_VAK = "vak";
public static final String KEY_LOKAAL = "lokaal";

private static Context context;
static SQLiteDatabase db;

private SQLiteStatement insertStmt;
private static final String INSERT = "insert into " + TABLE_NAME + " (dag,uur,vak,lokaal) values (?,?,?,?)";
public DataManipulator(Context context) {
DataManipulator.context = context;
OpenHelper openHelper = new OpenHelper(DataManipulator.context);
DataManipulator.db = openHelper.getWritableDatabase();
this.insertStmt = DataManipulator.db.compileStatement(INSERT);
}

public long insert(String dag,String uur,String vak,String lokaal) {
this.insertStmt.bindString(1, dag);
this.insertStmt.bindString(2, uur);
this.insertStmt.bindString(3, vak);
this.insertStmt.bindString(4, lokaal);
return this.insertStmt.executeInsert();
}

public void deleteAll() {
db.delete(TABLE_NAME, null, null);
}

public List<String[]> selectAll()
{
List<String[]> list = new ArrayList<String[]>();
Cursor cursor = db.query(TABLE_NAME, new String[] { "id","dag","uur","vak","lokaal" }, null, null, null, null, "dag asc");
int x=0;
if (cursor.moveToFirst()) {
   do {
    String[] b1=new String[]{cursor.getString(0),cursor.getString(1),cursor.getString(2),
cursor.getString(3),cursor.getString(4)};
    list.add(b1);
    x=x+1;
   } while (cursor.moveToNext());
 }
if (cursor != null && !cursor.isClosed()) {
   cursor.close();
}
cursor.close();
return list;
}

public boolean delete(long id) {
    return db.delete(TABLE_NAME, KEY_ROWID + "=" + id, null) > 0;
        }

 private static class OpenHelper extends SQLiteOpenHelper {
 OpenHelper(Context context) {
     super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
     db.execSQL("CREATE TABLE " + TABLE_NAME + " (id INTEGER PRIMARY KEY, dag TEXT, uur TEXT, vak TEXT, lokaal TEXT)");
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
     db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
     onCreate(db);
}
}

} 
```

这是我要显示特定数据的 Activity 的代码。现在，显示了数据库中的所有数据。

```
package com.persoonlijk.rooster.test2;

import java.util.ArrayList;
import java.util.List;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.ContextMenu;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class RoosterMaandag extends ListActivity{   

  TextView selection;
  public int idToModify;
  DataManipulator dm;

  List<String[]> list = new ArrayList<String[]>();
  List<String[]> names2 =null ;
  String[] stg1;

  /** Called when the activity is first created. */
  //zorgt voor het overzicht van de gegevens uit de database
  @Override
  public void onCreate(Bundle savedInstanceState){

    super.onCreate(savedInstanceState);
    setContentView(R.layout.rooster);

    dm = new DataManipulator(this);
    names2 = dm.selectAll();

    stg1=new String[names2.size()];
    int x=0;
    String stg;

    for (String[] dag : names2) {
    stg = dag[1]+" - "+dag[2]+ " - "+dag[3]+" - "+dag[4];
    stg1[x]=stg;
    x++;
    }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,stg1);
    this.setListAdapter(adapter);
    selection=(TextView)findViewById(R.id.selection);

}  

 //menuknoppen
 @Override
 public boolean onCreateOptionsMenu(Menu menu) {
   menu.add(Menu.NONE, 0, 0, "Voeg gegevens toe");
   menu.add(Menu.NONE, 1, 1, "Verwijder gegevens");
   return super.onCreateOptionsMenu(menu);
 }

 @Override
 public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
       case 0:
           startActivity(new Intent(this, SaveData.class));
       return true;
       case 1:
           startActivity(new Intent(this, VerwijderData.class));
       return true;

   }
   return false;
  }

 } 
```

当我的问题不够清楚时，请告诉我。我真的希望有人能帮助我！

我在我的 DataManipulator.java 中添加了这段代码：

```
 public List<String[]> selectSome(String arg) {
    String[] columns = new String[] { "id", "dag", "uur", "vak", "lokaal" };
    String[] selectionArgs = {arg};
    Cursor cursor = db.query(TABLE_NAME, columns, "dag = ?", selectionArgs, null, null, "dag asc");

    List<String[]> list = new ArrayList<String[]>(cursor.getCount());
    while (cursor.moveToNext()) {
        String[] b1 = new String[] { cursor.getString(0),
                cursor.getString(1), cursor.getString(2),
                cursor.getString(3), cursor.getString(4) };
        list.add(b1);
    }
    cursor.close();
    return list;
} 
```

我的 RoosterMaandag.java 中的这段代码：

```
 public void onCreate(Bundle savedInstanceState){
 ....
 dm.selectSome("maandag");
 ....
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:43:50.343

你的`DataManipulator`班级需要一个新方法：

```
public List<String[]> selectSome(String arg) {
    String[] columns = new String[] { "id", "dag", "uur", "vak", "lokaal" };
    String[] selectionArgs = {arg};
    Cursor cursor = db.query(TABLE_NAME, columns, "dag = ?", selectionArgs, null, null, "dag asc");

    List<String[]> list = new ArrayList<String[]>(cursor.getCount());
    while (cursor.moveToNext()) {
        String[] b1 = new String[] { cursor.getString(0),
                cursor.getString(1), cursor.getString(2),
                cursor.getString(3), cursor.getString(4) };
        list.add(b1);
    }
    cursor.close();
    return list;
} 
```

我再说一遍。考虑将 a`CursorAdapter`用于这些任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:20:28.543

我不知道 android 但对于 sql

尝试这个

```
select data_to_print from table_name where REGEXP_LIKE(column_name_where_to_match,'dag$'); 
```

更多信息在这里[http://docs.oracle.com/cd/B12037_01/server.101/b10759/ap_posix001.htm#i690819](http://docs.oracle.com/cd/B12037_01/server.101/b10759/ap_posix001.htm#i690819)

例子：

```
SQL> select job_id from jobs where regexp_like(job_id,'N$');

JOB_ID
----------
MK_MAN
PU_MAN
SA_MAN
ST_MAN 
```

# java - 使用 Java 中的 Mallet 在 LDA 中折叠（估计新文档的主题）

> ID：14141195
> 
> 赞同：2
> 
> 时间：2013-01-03T14:50:45.097
> 
> 标签：java, mallet, topic-modeling

我正在通过 Java 使用 Mallet，但我不知道如何根据我训练过的现有主题模型评估新文档。

我生成模型的初始代码与[Mallett Developers Guide for Topic Modeling](http://mallet.cs.umass.edu/topics-devel.php)中的代码非常相似，之后我只是将模型保存为 Java 对象。在稍后的过程中，我从文件中重新加载该 Java 对象，通过添加新实例`.addInstances()`，然后希望仅根据原始训练集中找到的主题评估这些新实例。

[这个 stats.SE 线程](https://stats.stackexchange.com/questions/9315/topic-prediction-using-latent-dirichlet-allocation)提供了一些高级建议，但我看不到如何将它们用于 Mallet 框架。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-20T15:15:40.503

推理实际上也列在问题中提供的[示例链接](http://mallet.cs.umass.edu/topics-devel.php)中（最后几行）。

对于任何对保存/加载训练模型然后使用它来推断新文档的模型分布的整个代码感兴趣的人 - 这里有一些片段：

完成后`model.estimate()`，您就拥有了经过实际训练的模型，因此您可以使用标准 Java 对其进行序列化`ObjectOutputStream`（因为`ParallelTopicModel`implements `Serializable`）：

```
try {
    FileOutputStream outFile = new FileOutputStream("model.ser");
    ObjectOutputStream oos = new ObjectOutputStream(outFile);
    oos.writeObject(model);
    oos.close();
} catch (FileNotFoundException ex) {
    // handle this error
} catch (IOException ex) {
    // handle this error
} 
```

但是请注意，当您推断时，您还需要`Instance`通过相同的管道传递新句子（as）以便对其进行预处理（tokenzie 等）因此，您还需要保存管道列表（因为我们正在使用`SerialPipe`什么时候可以创建一个实例然后序列化它）：

```
// initialize the pipelist (using in model training)
SerialPipes pipes = new SerialPipes(pipeList);

try {
    FileOutputStream outFile = new FileOutputStream("pipes.ser");
    ObjectOutputStream oos = new ObjectOutputStream(outFile);
    oos.writeObject(pipes);
    oos.close();
} catch (FileNotFoundException ex) {
    // handle error
} catch (IOException ex) {
    // handle error
} 
```

为了加载模型/管道并将它们用于推理，我们需要反序列化：

```
private static void InferByModel(String sentence) {
    // define model and pipeline
    ParallelTopicModel model = null;
    SerialPipes pipes = null;

    // load the model
    try {
        FileInputStream outFile = new FileInputStream("model.ser");
        ObjectInputStream oos = new ObjectInputStream(outFile);
        model = (ParallelTopicModel) oos.readObject();
    } catch (IOException ex) {
        System.out.println("Could not read model from file: " + ex);
    } catch (ClassNotFoundException ex) {
        System.out.println("Could not load the model: " + ex);
    }

    // load the pipeline
    try {
        FileInputStream outFile = new FileInputStream("pipes.ser");
        ObjectInputStream oos = new ObjectInputStream(outFile);
        pipes = (SerialPipes) oos.readObject();
    } catch (IOException ex) {
        System.out.println("Could not read pipes from file: " + ex);
    } catch (ClassNotFoundException ex) {
        System.out.println("Could not load the pipes: " + ex);
    }

    // if both are properly loaded
    if (model != null && pipes != null){

        // Create a new instance named "test instance" with empty target 
        // and source fields note we are using the pipes list here
        InstanceList testing = new InstanceList(pipes);   
        testing.addThruPipe(
            new Instance(sentence, null, "test instance", null));

        // here we get an inferencer from our loaded model and use it
        TopicInferencer inferencer = model.getInferencer();
        double[] testProbabilities = inferencer
                   .getSampledDistribution(testing.get(0), 10, 1, 5);
        System.out.println("0\t" + testProbabilities[0]);
    }
} 
```

出于某种原因，我没有得到与原始模型完全相同的推断 - 但这是另一个问题的问题（如果有人知道，我很乐意听到）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T15:15:40.427

我在[Mallet 的首席开发人员的幻灯片](http://mallet.cs.umass.edu/mallet-tutorial.pdf)中找到了答案：

```
TopicInferencer inferencer = model.getInferencer();
double[] topicProbs = inferencer.getSampledDistribution(newInstance, 100, 10, 10); 
```

# r - 使用“应用”系列函数处理 data.frames 列表

> ID：14141198
> 
> 赞同：1
> 
> 时间：2013-01-03T14:50:57.250
> 
> 标签：r, apply, lapply, sapply

我有一个数据框，然后将其拆分为三个（或任意数量）的数据框。

我要做的是自动处理每个数据框中的每一列并添加现有变量的滞后版本。

例如，如果每个 data.frame 中有三个变量（V1、V2、V3），我想自动（没有硬编码）添加 V1.lag、V2.lag 和 V3.lag。

这是我到目前为止所拥有的，但我现在被困住了。

任何帮助都会受到高度赞赏。

```
dd<-data.frame(matrix(rnorm(216),72,3),c(rep("A",24),rep("B",24),rep("C",24)),c(rep("J",36),rep("K",36)));
colnames(dd) <- c("v1", "v2", "v3", "dim1", "dim2");
dd;
dds <- split(dd, dd$dim1);
dds;
# Missing step 1: Automatically create v1.lag, v2.lag, v3.lag, etc (if required) 
```

最后，我想将三个数据框合并为一个大数据框，其中将包含新创建的变量。

```
# Missing step 2: Merge data frames into single data frame 
```

任何帮助将不胜感激。

编辑：在评论部分，我询问了移动平均线而不是滞后。这是解决方案：

```
ma <- function(x, f=c(1,1,1)){as.numeric(filter(x, f, sides=1)/length(f));}
foo <- function(df, f = c(1,1,1)) {
nums <- sapply(df, is.numeric); ## which are numeric vars
nams <- paste(names(df)[nums], "ma", length(f), sep = "."); ## generate new names    foo.ma
df[, nams] <- lapply(which(nums), function(id, df, f) ma(df[[id]], f = f), df = df, f = f); ## apply ma to each numeric variable
  df; ## return
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:15:12.140

这是一种选择：

```
## reuse @Andrie's clag() function as lag() is silly
clag <- function(x, n = 1) c(rep(NA, n), head(x, -n))
## wrapper function to do the addition of lag variables for single DF
foo <- function(df, n = 1) {
  nums <- sapply(df, is.numeric) ## which are numeric vars
  nams <- paste(names(df)[nums], "lag", sep = ".") ## generate new names foo.lag
  df[, nams] <- lapply(which(nums), function(id, df, n) clag(df[[id]], n = n),
                       df = df, n = n) ## apply clag to each numeric variable
  df ## return
}

lapply(dds, foo) 
```

这使：

```
> lapply(dds, foo)
$A
            v1          v2           v3 dim1 dim2      v1.lag      v2.lag       v3.lag
1  -1.15107343  1.47671548 -0.146501739    A    J          NA          NA           NA
2  -1.61068272 -0.85397093 -1.240187604    A    J -1.15107343  1.47671548 -0.146501739
3  -1.23470282 -0.26194027  1.938344030    A    J -1.61068272 -0.85397093 -1.240187604
4  -0.57874043 -0.44600138  0.326069423    A    J -1.23470282 -0.26194027  1.938344030
5   0.16139066 -1.95804742 -0.744678169    A    J -0.57874043 -0.44600138  0.326069423
6  -1.01497027  0.36850034  1.532640065    A    J  0.16139066 -1.95804742 -0.744678169
7   0.72288058 -0.40115543 -0.686450596    A    J -1.01497027  0.36850034  1.532640065
8  -0.51300447  0.19686310  0.441649595    A    J  0.72288058 -0.40115543 -0.686450596
9   0.95439966 -2.03513002 -0.897784897    A    J -0.51300447  0.19686310  0.441649595
10 -1.36736081 -0.41040962 -0.459403176    A    J  0.95439966 -2.03513002 -0.897784897
11  0.59503846  0.28925760 -0.003095389    A    J -1.36736081 -0.41040962 -0.459403176
12 -0.37951869  0.49551357  0.269412108    A    J  0.59503846  0.28925760 -0.003095389
13 -0.52953401 -0.28433351  1.125505917    A    J -0.37951869  0.49551357  0.269412108
14 -1.73466020  0.25442637 -1.094139749    A    J -0.52953401 -0.28433351  1.125505917
15  0.08479137 -0.11688894 -1.034378216    A    J -1.73466020  0.25442637 -1.094139749
16 -2.45854464  0.15806266 -2.275995527    A    J  0.08479137 -0.11688894 -1.034378216
17  1.10663502  1.28587230  0.070334868    A    J -2.45854464  0.15806266 -2.275995527
18 -0.01945585  1.63659116 -0.137040232    A    J  1.10663502  1.28587230  0.070334868
19  0.59026606 -1.95724134 -0.480014930    A    J -0.01945585  1.63659116 -0.137040232
20 -0.32245933  1.35372005  1.348717525    A    J  0.59026606 -1.95724134 -0.480014930
21 -0.42560327 -1.30145328  2.020609480    A    J -0.32245933  1.35372005  1.348717525
22  1.19550777  0.18417336  0.099232994    A    J -0.42560327 -1.30145328  2.020609480
23  1.20198621  0.05926023 -0.171505810    A    J  1.19550777  0.18417336  0.099232994
24 -1.00667141  1.32441782  0.056696824    A    J  1.20198621  0.05926023 -0.171505810

$B
           v1          v2          v3 dim1 dim2     v1.lag      v2.lag      v3.lag
25  0.7878614  0.10354576 -0.69308980    B    J         NA          NA          NA
26  0.5824551  0.42319616  0.42734938    B    J  0.7878614  0.10354576 -0.69308980
27 -0.2769730  1.51559382 -0.64106570    B    J  0.5824551  0.42319616  0.42734938
28 -0.5736416 -1.58745816 -1.13274631    B    J -0.2769730  1.51559382 -0.64106570
29 -1.9082145 -0.26148604 -0.04699411    B    J -0.5736416 -1.58745816 -1.13274631
30 -1.6254549  0.39390814 -1.79993619    B    J -1.9082145 -0.26148604 -0.04699411
31  0.3963274  1.79667985  0.92873142    B    J -1.6254549  0.39390814 -1.79993619
32 -0.5889415 -0.04690351  1.43394978    B    J  0.3963274  1.79667985  0.92873142
33  0.4683819 -1.34023029  0.18749782    B    J -0.5889415 -0.04690351  1.43394978
34  0.7373052 -0.93470320 -1.14528378    B    J  0.4683819 -1.34023029  0.18749782
35 -0.7751348 -1.26533917  0.11246728    B    J  0.7373052 -0.93470320 -1.14528378
36  1.7786627 -0.19757164  0.14150980    B    J -0.7751348 -1.26533917  0.11246728
37  1.8570412 -2.15174901  1.07751105    B    K  1.7786627 -0.19757164  0.14150980
38  0.5128697  0.40112948 -0.94826274    B    K  1.8570412 -2.15174901  1.07751105
39  0.8710264 -0.59978467  0.54462858    B    K  0.5128697  0.40112948 -0.94826274
40 -0.3711512 -0.15632337  0.15832543    B    K  0.8710264 -0.59978467  0.54462858
41  1.4505624  0.20915835  2.59369653    B    K -0.3711512 -0.15632337  0.15832543
42  0.0871329  0.25440471  0.30096063    B    K  1.4505624  0.20915835  2.59369653
43 -0.7398342 -1.72678544  0.45534941    B    K  0.0871329  0.25440471  0.30096063
44  0.1953264 -0.60560630 -0.36884626    B    K -0.7398342 -1.72678544  0.45534941
45 -0.2702493  0.50747209 -0.50699830    B    K  0.1953264 -0.60560630 -0.36884626
46  0.2987449  0.46347722  1.20725190    B    K -0.2702493  0.50747209 -0.50699830
47 -0.5682779 -0.71470625 -0.07865078    B    K  0.2987449  0.46347722  1.20725190
48 -1.5291983  1.80092050 -1.73317395    B    K -0.5682779 -0.71470625 -0.07865078

$C
            v1           v2           v3 dim1 dim2      v1.lag       v2.lag       v3.lag
49  0.06095825 -0.518263220  0.510999371    C    K          NA           NA           NA
50  0.40077713  0.477989115  0.855752036    C    K  0.06095825 -0.518263220  0.510999371
51  0.06763037  0.802110426 -0.102536186    C    K  0.40077713  0.477989115  0.855752036
52 -0.90530986 -0.005452101 -0.089703589    C    K  0.06763037  0.802110426 -0.102536186
53 -0.79360209  0.299844218 -0.765164525    C    K -0.90530986 -0.005452101 -0.089703589
54  1.34050298 -1.093705314 -0.955952912    C    K -0.79360209  0.299844218 -0.765164525
55  0.45377712  0.054978470  0.382874895    C    K  1.34050298 -1.093705314 -0.955952912
56  0.95283101 -0.564193352  1.458002944    C    K  0.45377712  0.054978470  0.382874895
57  1.09157807 -1.351894599 -1.366084414    C    K  0.95283101 -0.564193352  1.458002944
58  2.71993062 -1.126272793  1.374046159    C    K  1.09157807 -1.351894599 -1.366084414
59 -0.04685281  0.423085481 -0.455903151    C    K  2.71993062 -1.126272793  1.374046159
60 -0.31055449  0.818291875  0.400386018    C    K -0.04685281  0.423085481 -0.455903151
61 -0.54904545  1.542272313  0.648135340    C    K -0.31055449  0.818291875  0.400386018
62 -0.72914142  1.495482707 -0.212135011    C    K -0.54904545  1.542272313  0.648135340
63 -0.27374611 -1.309254707 -0.005125047    C    K -0.72914142  1.495482707 -0.212135011
64  0.87439910 -2.666588138  1.043778597    C    K -0.27374611 -1.309254707 -0.005125047
65  1.07142042  0.446233778 -0.286784683    C    K  0.87439910 -2.666588138  1.043778597
66 -0.10431808  0.510820156  0.405309569    C    K  1.07142042  0.446233778 -0.286784683
67 -1.04006019 -0.041327622  1.202855549    C    K -0.10431808  0.510820156  0.405309569
68  0.41084794 -0.376796559 -1.147032471    C    K -1.04006019 -0.041327622  1.202855549
69  0.88329788 -0.344611311  1.862998306    C    K  0.41084794 -0.376796559 -1.147032471
70 -0.67916248  1.396061431  0.697517685    C    K  0.88329788 -0.344611311  1.862998306
71  3.55359528 -0.207825480 -0.949834845    C    K -0.67916248  1.396061431  0.697517685
72  0.11329113  0.294747300 -0.955891419    C    K  3.55359528 -0.207825480 -0.949834845 
```

最后一点，合并步骤，保存上面的：

```
dds <- lapply(dds, foo) 
```

然后一起使用`do.call()`各个`rbind()`数据帧，如下所示：

```
df2 <- do.call(rbind, dds) 
```

这使：

```
> head(df2)
            v1         v2         v3 dim1 dim2     v1.lag     v2.lag     v3.lag
A.1 -1.1510734  1.4767155 -0.1465017    A    J         NA         NA         NA
A.2 -1.6106827 -0.8539709 -1.2401876    A    J -1.1510734  1.4767155 -0.1465017
A.3 -1.2347028 -0.2619403  1.9383440    A    J -1.6106827 -0.8539709 -1.2401876
A.4 -0.5787404 -0.4460014  0.3260694    A    J -1.2347028 -0.2619403  1.9383440
A.5  0.1613907 -1.9580474 -0.7446782    A    J -0.5787404 -0.4460014  0.3260694
A.6 -1.0149703  0.3685003  1.5326401    A    J  0.1613907 -1.9580474 -0.7446782 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T14:59:53.857

使用`plyr`包来完成所有这一步：

```
library(plyr)
clag <- function(x, n=1)c(rep(NA, n), head(x, -n))
x <- ddply(dd, .(dim1), transform, 
               v1.lag=clag(v1), v2.lag=clag(v2), v3.lag=clag(v3))

head(x)
          v1         v2         v3 dim1 dim2     v1.lag     v2.lag     v3.lag
1  0.4465910 -0.2564334 -0.9122640    A    J         NA         NA         NA
2 -0.3748563 -0.9461061  0.1641274    A    J  0.4465910 -0.2564334 -0.9122640
3 -0.5010834 -0.4413026 -0.7509968    A    J -0.3748563 -0.9461061  0.1641274
4 -0.5278584 -0.6377017  0.5528831    A    J -0.5010834 -0.4413026 -0.7509968
5 -0.4290586  0.4687849  0.6885102    A    J -0.5278584 -0.6377017  0.5528831
6  0.1179935 -0.2742456 -0.1945482    A    J -0.4290586  0.4687849  0.6885102 
```

# c# - .NET WPF - 当 .dll 应该足够时，为什么我需要 .resource 文件？

> ID：14141199
> 
> 赞同：1
> 
> 时间：2013-01-03T14:51:00.167
> 
> 标签：c#, .net, wpf, localization

对于我目前正在工作的项目，我正在创建资源文件 (.resx)。我正在使用 Resgen.exe 和 AL.exe 创建 .resource 和 .dll 文件。文件的构建操作`.resx`设置为“无”。

这个想法是允许客户在我们提供的内容不适合他们的需求时提供他们自己的本地化。

我遇到的问题是 .resource 文件在交付的产品中是绝对必要的。我的印象是 .resources.dll 文件就足够了。成品中真的需要 .resource 文件还是我做错了什么？

编辑：我最近发现帮助文件专门寻找 .resource 文件。我已修改代码以使用 .dll，但现在没有返回字符串。所以现在我的问题是“我如何访问 .resources.dll 来检索字符串？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:56:12.043

您是否遵循将构建操作设置为无的指南？这对我来说似乎是一个错误。如果构建操作设置为无，则它不能包含在库程序集中。

我会尝试将它们设置为嵌入式资源。

# ruby - Ruby：Rails：使用哪个版本的 gem？

> ID：14141206
> 
> 赞同：3
> 
> 时间：2013-01-03T14:51:34.193
> 
> 标签：ruby, ruby-on-rails-3, version-control, gem

我有一个 Rails 3 应用程序，它在 Gemfile 中有以下行。

```
gem 'sqlite3', '1.3.6' 
```

但是，如果我列出我的本地宝石，我会得到：

```
> gem list sqlite3 --local

*** LOCAL GEMS ***

sqlite3 (1.3.6, 1.3.4) 
```

当我的 Rails 应用程序执行

```
require 'sqlite3' 
```

选择了哪个版本的 gem？是选择了列表中的第一个宝石吗？有没有办法告诉 Ruby 运行时使用 1.3.4 版，即使安装了 1.3.6 版并且由 Gemfile 强制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:58:37.950

你可以找到

```
bundle exec gem list sqlite3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T14:53:30.077

要么`Gemfile`将指定一个版本，要么`Gemfile.lock`将拥有该版本。

**例子：**

宝石文件：

```
gem 'tiny_tds', '0.5.0' 
```

Gemfile.lock:

```
tiny_tds (0.5.0) 
```

**编辑：**如果您想查看版本，请使用[iltempos 的](https://stackoverflow.com/users/428260/iltempo)建议或在`rails console`类型中

```
1.9.3p194 :001 > SQLite3::VERSION
 => "1.3.6" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:47:54.663

列出 Rails 应用程序的`Gemfile`所有依赖项，您可以为每个 gem 添加有关版本的约束。**在您的示例**中，您指定您的应用程序依赖于 sqlite3 1.3.6，因此**它将使用版本 1.3.6**。

通常，您的应用程序所需的 gem 的确切版本位于`Gemfile.lock`.

您可以使用几种语法来指定版本：

*   `gem 'gemname', '1.2.3'`- 需要 gemname 版本 1.2.3
*   `gem 'gemname', '>= 1.2.3'`- 需要 gemname 版本 1.2.3 或任何更高版本。可以打破东西
*   `gem 'gemname', '~> 1.2'`- 需要 gemname 1.2 或像 1.2.9 这样的小更新。你得到更新，但没有可能破坏兼容性的市长

有趣的是，一旦`Gemfile.lock`在您的版本控制中编写并检查了它，它就会在团队的所有成员之间共享，所有成员都将使用相同、准确的所需 gem 版本。

如果您需要更新所需的 gem，您可以分两步完成：

1.  `Gemfile`如果需要，更新
2.  跑`bundle update gemname`

第 2 步将下载新的 gem 版本（如果有关于约束的新版本`Gemfile`），安装并`Gemfile.lock`相应更新。

# node.js - Node.js EventEmitter 错误

> ID：14141211
> 
> 赞同：0
> 
> 时间：2013-01-03T14:52:04.863
> 
> 标签：node.js, restify, eventemitter

尝试继承 EvenEmitter 时出现错误

```
/* Consumer.js */
var EventEmitter = require('events').EventEmitter;
var util = require('util');

var Consumer = function() {};

Consumer.prototype = {
  // ... functions ...
  findById: function(id) {
    this.emit('done', this);
  }
};

util.inherits(Consumer, EventEmitter);
module.exports = Consumer;

/* index.js */
var consumer = new Consumer();
consumer.on('done', function(result) {
  console.log(result);
}).findById("50ac3d1281abba5454000001");

/* ERROR CODE */
{"code":"InternalError","message":"Object [object Object] has no method 'findById'"} 
```

我已经尝试了几乎所有方法，但仍然无法正常工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:35:08.457

有几件事。您正在覆盖原型而不是扩展它。此外，在添加新方法之前移动 util.inherits() 调用：

```
var EventEmitter = require('events').EventEmitter;
var util = require('util');

var Consumer = function Consumer() {}

util.inherits(Consumer, EventEmitter);

Consumer.prototype.findById = function(id) {
    this.emit('done', this);
    console.log('found');
};

var c = new Consumer();
c.on('done', function(result) {
  console.log(result);
});

c.findById("50ac3d1281abba5454000001"); 
```

# php - PHP中0到1之间的随机浮点数

> ID：14141212
> 
> 赞同：43
> 
> 时间：2013-01-03T14:52:06.183
> 
> 标签：php, random

如何在 PHP 中生成 0 到 1 之间的随机浮点数？

我正在寻找与 Java 等效的 PHP 的`Math.random()`.

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-03T14:56:15.183

您可以使用标准函数：[lcg_value()](http://php.net/manual/en/function.lcg-value.php)。

[这是rand()](http://php.net/manual/en/function.rand.php)文档中给出的另一个函数：

```
// auxiliary function
// returns random number with flat distribution from 0 to 1
function random_0_1() 
{
    return (float)rand() / (float)getrandmax();
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-03T14:58:11.127

文档中的示例：

```
function random_float ($min,$max) {
   return ($min+lcg_value()*(abs($max-$min)));
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-11-20T16:12:12.613

```
rand(0,1000)/1000 returns:
0.348 0.716 0.251 0.459 0.893 0.867 0.058 0.955 0.644 0.246 0.292 
```

或者如果您想要小数点后的更多位数，请使用更大的数字

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-10-16T10:32:16.657

```
class SomeHelper
{
     /**
     * Generate random float number.
     *
     * @param float|int $min
     * @param float|int $max
     * @return float
     */
    public static function rand($min = 0, $max = 1)
    {
        return ($min + ($max - $min) * (mt_rand() / mt_getrandmax()));
    }
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-08-30T09:25:18.407

*更新：忘记这个答案，它不适用于 php -v > 5.3*

关于什么

```
floatVal('0.'.rand(1, 9)); 
```

?

这对我来说是完美的，它不仅适用于 0 - 1，例如 1.0 - 15.0 之间

```
 floatVal(rand(1, 15).'.'.rand(1, 9)); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-08-01T04:35:44.583

```
function mt_rand_float($min, $max, $countZero = '0') {
    $countZero = +('1'.$countZero);
    $min = floor($min*$countZero);
    $max = floor($max*$countZero);
    $rand = mt_rand($min, $max) / $countZero;
    return $rand;
} 
```

**例子：**

```
echo mt_rand_float(0, 1); 
```

结果：0.2

```
echo mt_rand_float(3.2, 3.23, '000'); 
```

结果：3.219

```
echo mt_rand_float(1, 5, '00'); 
```

结果：4.52

```
echo mt_rand_float(0.56789, 1, '00'); 
```

结果：0.69

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-01-08T11:04:43.580

```
$random_number = rand(1,10).".".rand(1,9); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-01-09T14:46:56.953

```
function frand($min, $max, $decimals = 0) {
  $scale = pow(10, $decimals);
  return mt_rand($min * $scale, $max * $scale) / $scale;
}

echo "frand(0, 10, 2) = " . frand(0, 10, 2) . "\n"; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-08-24T15:04:53.433

这个问题要求一个从 0 到 1 的值。对于大多数数学目的，这通常是无效的，尽管程度最低。按照惯例，标准分布是 0 >= N < 1。您应该考虑是否真的想要包含 1 的东西。

许多这样做的事情都心不在焉，导致异常结果的几十亿分之一。如果您考虑向后执行操作，这将变得很明显。

`(int)(random_float() * 10)`将返回一个从 0 到 9 的值，每个值的机会均等。如果十亿分之一的时候它可以返回 1，那么它很少会返回 10。

有些人会在事后解决这个问题（决定 10 应该是 9）。将它乘以 2 应该有大约 50% 的机会得到 0 或 1，但也有大约 0.000000000465% 的机会返回 2，就像在[Bender 的梦中](https://www.youtube.com/watch?v=MOn_ySghN2Y)一样。

当您想要从零开始的十个值时，将 0 到 1 说成浮点数可能有点像错误地将 0 到 10 而不是 0 到 9 说成整数。在这种情况下，由于可能的浮点值范围很广，所以更像是不小心说 0 到 1000000000 而不是 0 到 999999999。

对于 64 位，溢出是非常罕见的，但在这种情况下，一些随机函数在内部是 32 位的，因此发生二分之一半的机会并非不可信。

相反，标准解决方案希望是这样的：

```
mt_rand() / (getrandmax() + 1) 
```

分布上也可能存在通常微不足道的差异，例如在 0 到 9 之间，那么由于精度，您可能会发现 0 比 9 的可能性略高，但这通常是十亿分之一左右，并不像上述问题那么严重因为上述问题可能会为计算产生一个无效的意外越界数字，否则该计算将是完美的。

Java 的 Math.random 也永远不会产生 1 的值。其中一些来自于它很难具体解释它的作用。它返回一个从 0 到小于 1 的值。这是芝诺的箭，它永远不会达到1。这不是人们通常会说的。相反，人们倾向于说介于 0 和 1 之间或从 0 到 1，但这些都是错误的。

这在某种程度上是错误报告中的娱乐来源。例如，如果不考虑这一点而使用 lcg_value 的任何 PHP 代码，如果它符合其文档，则可能会出现大约数十亿分之一的故障，但这使得忠实地重现变得非常困难。

这种错误关闭是“只需将其关闭然后再打开”的常见来源之一。嵌入式设备中通常遇到的问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-23T12:15:38.860

[我在PHP.net](http://php.net/manual/en/function.mt-getrandmax.php#example-4017)上找到了答案

```
<?php
function randomFloat($min = 0, $max = 1) {
    return $min + mt_rand() / mt_getrandmax() * ($max - $min);
}

var_dump(randomFloat());
var_dump(randomFloat(2, 20));
?>

float(0.91601131712832)
float(16.511210331931) 
```

所以你可以做

```
randomFloat(0,1); 
```

或简单

```
mt_rand() / mt_getrandmax() * 1; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-05-17T17:35:11.823

大多数答案都在使用`mt_rand`. 但是，`mt_getrandmax()`通常只返回`2147483647`. 这意味着你只有 31 位信息，而双精度数有一个 52 位的尾数，这意味着至少`2^53`对于 0 和 1 之间的数字有一个密度。

这种更复杂的方法将为您提供更精细的分布：

```
function rand_754_01() {
    // Generate 64 random bits (8 bytes)
    $entropy = openssl_random_pseudo_bytes(8);
    // Create a string of 12 '0' bits and 52 '1' bits. 
    $x = 0x000FFFFFFFFFFFFF;
    $first12 = pack("Q", $x);
    // Set the first 12 bits to 0 in the random string. 
    $y = $entropy & $first12;
    // Now set the first 12 bits to be 0[exponent], where exponent is randomly chosen between 1 and 1022\. 
    // Here $e has a probability of 0.5 to be 1022, 0.25 to be 1021, etc. 
    $e = 1022;     
    while($e > 1) {   
        if(mt_rand(0,1) == 0) {
            break;
        } else {
            --$e;
        }
    }
    // Pack the exponent properly (add four '0' bits behind it and 49 more in front)
    $z = "\0\0\0\0\0\0" . pack("S", $e << 4);
    // Now convert to a double. 
    return unpack("d", $y | $z)[1];          
} 
```

请注意，上述代码仅适用于具有 Litte-Endian 字节顺序和 Intel 风格的 IEEE754 表示的 64 位机器。（`x64`- 兼容的计算机会有这个）。不幸的是 PHP 不允许位移超过`int32`-size 的边界，所以你必须为 Big-Endian 编写一个单独的函数。

你应该替换这一行：

```
 $z = "\0\0\0\0\0\0" . pack("S", $e << 4); 
```

与它的大端对应物：

```
 $z = pack("S", $e << 4) .  "\0\0\0\0\0\0"; 
```

仅当函数被大量调用时，差异才显着：`10^9`或更多。

**测试这是否有效**

很明显，尾数遵循一个很好的均匀分布近似，但大量此类分布的总和（每个分布的机会和幅度都减半）是均匀的就不太明显了。

跑步：

```
function randomNumbers() {
    $f = 0.0;
    for($i = 0; $i < 1000000; ++$i) {
        $f += \math::rand_754_01();
    }
    echo $f / 1000000;
} 
```

产生`0.49999928273099`（或接近 0.5 的类似数字）的输出。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-10-11T21:05:09.040

PHP 7 的解决方案。在`[0,1)`. 即包括0，不包括1。

```
function random_float() {
    return random_int(0, 2**53-1)/(2**53);
} 
```

感谢`Nommyde`在评论中指出我的错误。

```
>>> number_format((2**53-1)/2**53,100)
=> "0.9999999999999998889776975374843459576368331909179687500000000000000000000000000000000000000000000000"
>>> number_format((2**53)/(2**53+1),100)
=> "1.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" 
```

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2013-01-03T14:59:47.357

关于什么：

```
echo (float)('0.' . rand(0,99999)); 
```

可能会工作正常......希望它可以帮助你。

# python - Django 教程 1：无法修复错误“文件” "，第 1 行，在 ImportError：无法导入名称选择“

> ID：14141218
> 
> 赞同：0
> 
> 时间：2013-01-03T14:52:25.217
> 
> 标签：python, django, django-models

我正在阅读[https://docs.djangoproject.com/en/1.3/intro/tutorial01/](https://docs.djangoproject.com/en/1.3/intro/tutorial01/)上的 Django 教程。

我已经完成了初始设置，并在“使用 API”部分...当我在 shell 中输入第一行代码时

```
from polls.models import Poll, Choice 
```

我得到错误

```
File "<console>", line 1, in <module>
ImportError: cannot import name Choice 
```

Choice 是我在民意调查应用程序中创建的模型

```
class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice = models.CharField(max_length=200)
    votes = models.IntegerField() 
```

请帮助我了解如何修复我的应用程序以允许我导入 Choice，并更好地了解模型、外壳、导入结构。

更新：这是我的 settings.py 文件的代码，希望对您有所帮助。本教程中所做的主要更改是将`'polls'`应用程序添加到`INSTALLED_APPS`数据库并设置数据库路径。

```
# Django settings for mysite project.

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Arye Barnehama', 'arye@axioinc.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': '/Users/azbpolo/projects/sqlite3.db',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# In a Windows environment this must be set to your system time zone.
TIME_ZONE = 'America/New_York'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = '$^_7&amp;hpi5q2%8a6u9=ik$n0-27i9tydxsa9w_7q)90jym+y11h'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'mysite.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'mysite.wsgi.application'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'polls'
    #'django.contrib.messages',
    #'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:14:59.033

我相信你的文件结构是错误的。它应该是：

```
--mysite
 |--manage.py
 |--polls
   |--models.py
 |--mysite
   |--settings.py
   |--urls.py 
```

相反，你有这个吗？

```
--mysite
 |--manage.py
 |--mysite
   |--polls
     |--models.py
   |--settings.py
   |--urls.py 
```

如果文件结构是正确的，并且还有其他错误，那么错误代码将是这样的

```
>>> from polls.models import Poll, Choice
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "polls/models.py", line 1, in <module>
    from django.db import models
  File "/usr/lib/python2.6/site-packages/django/db/__init__.py", line 11, in <module>
    if DEFAULT_DB_ALIAS not in settings.DATABASES:
  File "/usr/lib/python2.6/site-packages/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/usr/lib/python2.6/site-packages/django/conf/__init__.py", line 40, in _setup
    raise ImportError("Settings cannot be imported, because environment variable %s is undefined." % ENVIRONMENT_VARIABLE)
ImportError: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined. 
```

# magento - 在 Magento 中观察客户帐户验证事件

> ID：14141222
> 
> 赞同：0
> 
> 时间：2013-01-03T14:52:35.560
> 
> 标签：magento

当客户验证其帐户时，是否有办法捕捉事件？我需要此功能来使用户能够访问其他集成子系统

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:36:17.263

由于`confirmAction()`似乎没有触发任何事件

> /app/code/core/Mage/Customer/controllers/AccountController.php

你可以做

1.  [覆盖前端核心控制器](http://prattski.com/2010/06/24/magento-overriding-core-files-blocks-models-resources-controllers/)`Mage::dispatchEvent()`以使用或直接`confirmAction`在 AccountController.php 中添加代码来创建您自己的事件

2.  使用@Pavel Novitsky 答案，但您可能需要检查您是否在确认帐户控制器上或检查电子邮件验证标志的更改，因为每次客户信息更改/更新时都会触发此事件

例如

```
public function myObserver(Varien_Event_Observer $observer)
{

   if(Mage::app()->getRequest()->getControllerName() == '....account_confirm'){
      $customer = $observer->getCustomer();
      ....
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:27:16.207

即使您可以在客户验证后使用以下代码创建自己的事件。

```
Mage::dispatchEvent('Yuor_Unique_Event_Name', array()); 
```

现在使用这个事件你可以做任何你想做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T15:13:49.807

每个模型都有标准的 load_before、load_after、save_before、save_after 等事件。查看 Mage_Core_Model_Abstract 以获取所有预定义事件的列表。

对于客户，您可以使用 customer_save_after 事件。在观察者中检查原始数据与新数据：

```
public function myObserver(Varien_Event_Observer $observer)
{
    $customer = $observer->getCustomer();
    $orig_active_flag = $custoner->getOrigData('is_active');
    $new_active_flag = $customer->getData('is_active');

    // do something here …

    return $this;
} 
```

# html - Opera浏览器中的边界半径和溢出

> ID：14141223
> 
> 赞同：3
> 
> 时间：2013-01-03T14:52:45.550
> 
> 标签：html, css, opera

我想在圆形 div 中显示一部分图像。我有一个代码，但它在 Opera 中不起作用。

CSS：

```
body {
    background-color: silver;
}
div {
      width: 90px;
      height: 90px;
      border: 1px solid;
      overflow: hidden;
      border-radius: 45px;
}
img {
      margin-left: -75px;
      width: 350px;
      height: 90px;
}​ 
```

HTML：

```
<div>
      <img src="http://diskuse.jakpsatweb.cz/img/logo.png">
</div>​ 
```

[http://jsfiddle.net/vpfEY/6/](http://jsfiddle.net/vpfEY/6/)

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:03:51.537

检查边界半径支持[听到](http://caniuse.com/border-radius)也检查[这个](http://www.quirksmode.org/css/contents.html)

看着你的代码，我已经在 chrome、firefox 和 opera 上对其进行了测试。及其工作。

如果您使用的是旧版本，请尝试使用

```
-webkit-border-radius: 45px;
-moz-border-radius: 45px;
border-radius: 45px; 
```

**注意**但这对于现代浏览器不是必需的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:07:31.180

我不确定为什么图像不尊重边界半径属性。但是，我能够使用背景图像让它工作。

HTML

```
<div></div> 
```

CSS：

```
body {
    background-color: silver;
}
div {
      width: 90px;
      height: 90px;
      border: 1px solid;
      overflow: hidden;
      border-radius: 45px;
      background:url(http://diskuse.jakpsatweb.cz/img/logo.png) -115px 0 no-repeat;
} 
```

[http://jsfiddle.net/vpfEY/18/](http://jsfiddle.net/vpfEY/18/)

# android - Android：启用按钮时出现空指针异常

> ID：14141227
> 
> 赞同：0
> 
> 时间：2013-01-03T14:52:55.740
> 
> 标签：android

我正在尝试在选中复选框时启用一个按钮，但我得到了`nullpointerexception`

```
viewHolder.checkBox.setChecked(Constants.checkBoxState[position]);

        final Button savebtn1 = (Button) view.findViewById(R.id.savebtn);
        viewHolder.checkBox.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                if (((CheckBox) v).isChecked()) {
                    // Toast.makeText(activity, "checked" , Toast.LENGTH_SHORT).show();
                    Constants.checkBoxState[position] = true;
                    Constants.selectedContacts.add(listCont.get(position));
                    savebtn1.setEnabled(true);
                } else {

                    Constants.checkBoxState[position] = false;
                    Constants.selectedContacts.remove(listCont.get(position));

                }

            }
        }); 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:55:55.867

```
final Button savebtn1 = (Button) view.findViewById(R.id.savebtn); 
```

你得到`NullPointerException`因为`R.id.savebtn`不在里面`view`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:59:57.760

您可以尝试清理您的项目

```
Project -> Clean 
```

有时 Eclipse 在构建 R.java 时会失败。

# java - Eclipse：在再次运行之前自动杀死旧版本

> ID：14141230
> 
> 赞同：2
> 
> 时间：2013-01-03T14:53:00.277
> 
> 标签：java, eclipse

我正在eclipse中开发一个没有任何可见输出的java服务器。

我按 ctrl+F11 启动我的 java 服务器软件，然后它启动正常，但是如果我编辑源代码并再次启动它，eclipse 会启动第二个副本，我不希望有 2 个版本的服务器在我进行开发的同时运行。

有没有办法让 eclipse 杀死旧版本，所以我的服务器总是只有一个版本在运行。

# asp.net-mvc - 我的 jQuery ajax 函数总是返回错误

> ID：14141232
> 
> 赞同：0
> 
> 时间：2013-01-03T14:53:02.143
> 
> 标签：asp.net-mvc, jquery

这是我的 jQuery ajax 函数

```
//delete individual row
jQuery('.stdtable img.delete').click(function(){
    var c = confirm('Continue delete?');
    if (c) {
        jQuery.ajax({
            url: 'market/delete/14',
            type: 'POST',
            success: function () {
                alert('success');
            },
            error: function () {
                alert("error");
            }
        });
    };
    return false;
}); 
```

这是我的控制器

```
[HttpPost]
public ActionResult Delete(int id)
{
    Using<MarketService>().Delete(int);
    return View();
} 
```

该代码正在调用我的控制器，并且一切正常。但是 jQuery 函数总是返回说“错误”。

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:56:19.970

你的控制器中的代码甚至编译了吗？您应该使用**id**来删除，而**不是使用 int**类型

```
[HttpPost]
public ActionResult Delete(int id)
{
   Using<MarketService>().Delete(id);
   return View();
} 
```

还要在没有 JavaScript 的情况下测试您的操作，请使用工具[Fiddler](http://www.fiddler2.com/fiddler2/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:12:33.337

jQuery

```
//delete individual row
jQuery('.stdtable img.delete').click(function(){
    var c = confirm('Continue delete?');
    if (c) {
        jQuery.ajax({
            url: 'Market/Delete/14', // '@Url.Action("Delete","Market")' is better. Also you should use data attribute for ajax. like this - data : { id : 14 }
            type: 'POST',
            success: function (data) {
                alert(data.Message);
                alert(data.Success);
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert(xhr.status);
                alert(thrownError);
            }
        });
    };
    return false;
}); 
```

在您的 ajax 网址中，您使用了市场/删除，在您的控制器名称中“删除”以大写字母开头。它们之间区分大小写。

控制器

```
[HttpPost]
public ActionResult Delete(int id)
{
   var result=new { Success="True", Message="Success"};
   Using<MarketService>().Delete(id);
   return Json(result, JsonRequestBehavior.AllowGet);
} 
```

# android - 查看android未定义[钛]

> ID：14141235
> 
> 赞同：1
> 
> 时间：2013-01-03T14:53:14.803
> 
> 标签：android, views, titanium, defined

在这里，我正在尝试创建一个可以运行的应用程序，并且我希望使用相同的代码在 android 平板电脑中运行该应用程序。

但无法运行，因为他告诉我我的视图没有定义，但我不明白，因为它适用于 ipad 和 android 应该在逻辑上工作。

我的项目结构资源

```
 apps.js => (here I instanced, but views and it is here that I but which are not defined)

 pages

  base => (I have my views with all the contained)

 Helpers => ()

 pictures

 android => (or the images there) 
```

因此，apps.js 会在“pages / base /”中看到，然后我几乎在 javascript 中看到过。

这是我在 apps.js 中的代码

```
Titanium.include("helpers/helpers.js")

//Default locale
opened_tab = true;
Titanium.include("i18n/fr.js");

var win = Titanium.UI.createWindow({
    backgroundColor:'#333',
    //orientationModes:Titanium.UI.LANDSCAPE_LEFT
});

if(Titanium.Platform.osname=="ipad")
    Titanium.UI.orientation = Titanium.UI.LANDSCAPE_LEFT;

if(Titanium.Platform.osname=="android")
    Titanium.UI.orientation = Titanium.UI.LANDSCAPE_LEFT;

var rotate = Ti.UI.create2DMatrix().rotate(90);
var counterRotate = rotate.rotate(-180);

var pages_references_ios = [
                                                {title:"Couverture",slug:"couverture"},
                                                {title:"Présentation concept",slug:"presentation"},
                                                {title:"Un monde de réussites",slug:"metiers_numeriques"},
                                                {title:"sign of success",slug:"sign_of_success"},
                                                {title:"1000 facons de devenir",slug:"1000_ways"},
                                                {title:"Pédagogie labos",slug:"labs"},
                                                {title:"Partenariats entreprise",slug:"enterprise"},
                                                {title:"la vie étudiante",slug:"student_life"},
                                                {title:"Campus map",slug:"map"},
                                                {title:"open campus",slug:"open_campus"},
                                                {title:"Chaine videos",slug:"video_channel"},
                                                {title:"Réseaux sociaux",slug:"social_networks"}
                                            ];
var pages_references_android = [
                                                {title:"Couverture",slug:"couverture"},
                                                {title:"Présentation concept",slug:"presentation"},
                                                {title:"Un monde de réussites",slug:"metiers_numeriques"},
                                                {title:"sign of success",slug:"sign_of_success"},
                                                {title:"1000 facons de devenir",slug:"1000_ways"},
                                                {title:"Pédagogie labos",slug:"labs"},
                                                {title:"Partenariats entreprise",slug:"enterprise"},
                                                {title:"Community awards",slug:"community"},
                                                {title:"la vie étudiante",slug:"student_life"},
                                                {title:"Campus map",slug:"map"},
                                                {title:"open campus",slug:"open_campus"},
                                                {title:"Chaine videos",slug:"video_channel"},
                                                {title:"Réseaux sociaux",slug:"social_networks"}
                                            ];

if(Titanium.Platform.osname=="ipad")
    pages_references = pages_references_ios;
else if(Titanium.Platform.osname=="android")
    pages_references = pages_references_android;

Ti.include("pages/topBar.js")

Ti.include("pages/bottomBar.js")

 var scrollView = Titanium.UI.createScrollableView({
    views:[cover, presentation_view,metiers_numeriques,
           sign_of_success_view,thousands_ways_view,
           labs_view,enterprise_view,student_life_view,
           map_view,open_campus_view,video_channel,social_view],
    maxZoomScale:1.0,
    currentPage:0,
    showPagingControl:false,
    cacheSize:5,
    zIndex:-100
});

if (Ti.Platform.name == 'android') {
    win.navBarHidden = true;
}

win.add(tabMenu);
//win.add(thumbnailsButtonView);

win.add(scrollView);
win.open(); 
```

对不起我的英语不好。谢谢你

# asp.net - 无法序列化会话状态

> ID：14141238
> 
> 赞同：12
> 
> 时间：2013-01-03T14:53:30.160
> 
> 标签：asp.net, serializable

在执行 .aspx 页面时，我收到以下错误。你能告诉我我该如何解决它。

```
Unable to serialize the session state. In 'StateServer' and 'SQLServer' mode, ASP.NET will serialize the session state objects, and as a result non-serializable objects or MarshalByRef objects are not permitted. The same restriction applies if similar serialization is done by the custom session state store in 'Custom' mode. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Web.HttpException: Unable to serialize the session state. In 'StateServer' and 'SQLServer' mode, ASP.NET will serialize the session state objects, and as a result non-serializable objects or MarshalByRef objects are not permitted. The same restriction applies if similar serialization is done by the custom session state store in 'Custom' mode.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[SerializationException: Type 'System.Web.UI.WebControls.DropDownList' in Assembly 'System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' is not marked as serializable.]
   System.Runtime.Serialization.FormatterServices.InternalGetSerializableMembers(RuntimeType type) +9472709
   System.Runtime.Serialization.FormatterServices.GetSerializableMembers(Type type, StreamingContext context) +247
   System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.InitMemberInfo() +160
   System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.InitSerialize(Object obj, ISurrogateSelector surrogateSelector, StreamingContext context, SerObjectInfoInit serObjectInfoInit, IFormatterConverter converter, ObjectWriter objectWriter, SerializationBinder binder) +491
   System.Runtime.Serialization.Formatters.Binary.ObjectWriter.Write(WriteObjectInfo objectInfo, NameInfo memberNameInfo, NameInfo typeNameInfo) +388
   System.Runtime.Serialization.Formatters.Binary.ObjectWriter.Serialize(Object graph, Header[] inHeaders, __BinaryWriter serWriter, Boolean fCheck) +444
   System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Serialize(Stream serializationStream, Object graph, Header[] headers, Boolean fCheck) +133
   System.Web.Util.AltSerialization.WriteValueToStream(Object value, BinaryWriter writer) +1762

[HttpException (0x80004005): Unable to serialize the session state. In 'StateServer' and 'SQLServer' mode, ASP.NET will serialize the session state objects, and as a result non-serializable objects or MarshalByRef objects are not permitted. The same restriction applies if similar serialization is done by the custom session state store in 'Custom' mode.]
   System.Web.Util.AltSerialization.WriteValueToStream(Object value, BinaryWriter writer) +1847
   System.Web.SessionState.SessionStateItemCollection.WriteValueToStreamWithAssert(Object value, BinaryWriter writer) +34
   System.Web.SessionState.SessionStateItemCollection.Serialize(BinaryWriter writer) +638
   System.Web.SessionState.SessionStateUtility.Serialize(SessionStateStoreData item, Stream stream) +244
   System.Web.SessionState.SessionStateUtility.SerializeStoreData(SessionStateStoreData item, Int32 initialStreamSize, Byte[]& buf, Int32& length, Boolean compressionEnabled) +67
   System.Web.SessionState.SqlSessionStateStore.SetAndReleaseItemExclusive(HttpContext context, String id, SessionStateStoreData item, Object lockId, Boolean newItem) +140
   System.Web.SessionState.SessionStateModule.OnReleaseState(Object source, EventArgs eventArgs) +807
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +148
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75 
```

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T15:24:50.753

> 无法序列化会话状态。在“StateServer”和“SQLServer”模式下，ASP.NET 将序列化会话状态对象，因此不允许不可序列化的对象或 MarshalByRef 对象。如果自定义会话状态存储在“自定义”模式下完成类似的序列化，则适用相同的限制。

这条线很能说明问题。您需要使用[[Serializable]](http://msdn.microsoft.com/en-us/library/system.serializableattribute.aspx)标记对象以序列化对象（MSDN 链接包含有关序列化对象图的更多详细信息）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-04T06:08:36.427

在我的情况下，我试图序列化非序列化对象`HttpResponse`. 所以这帮不了我。

如果这不能解决您的问题，请检查：[Asp.net serialization error for session state](http://www.aspneto.com/unable-to-serialize-the-session-state-error-in-asp-net.html)

这篇文章节省了我的时间并解决了我的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-23T13:29:25.483

将以下属性添加到违规类：

```
[Serializable()] 
```

如果这不起作用，那么：

考虑使用 mode="InProc"。我通过切换到“SQLServer”并回滚到“InProc”遇到了这个问题。这可能会解决问题，因为 InProc 不需要对象可序列化。

[对于 asp.net 中的会话状态模式，InProc 或 SQL Server 哪个更好？](https://stackoverflow.com/questions/8688047/which-one-is-better-inproc-or-sql-server-for-session-state-mode-in-asp-net)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-20T11:50:15.003

```
[Serializable()]
public partial class CustomersMaintLog
{ 
```

# emacs - 支持将 org 文件批量导出为 HTML 的文件内设置

> ID：14141240
> 
> 赞同：0
> 
> 时间：2013-01-03T14:53:39.123
> 
> 标签：emacs, elisp, batch-processing

我想在*批处理*模式下使用 Emacs`org`从命令行将一些文件导出为 HTML。我想得到与交互式使用相同的结果`C-c``C-e``h`，特别是：

*   尊重文件局部变量（例如`org-export-publishing-directory`）
*   尊重通过`#+KEYWORD:`标题指定的所有选项

从 中给出的示例开始`org-export-as-html-batch`，我到了这一点：

```
emacs --batch \
    --visit=/tmp/foo.org \
    --eval "(defun safe-local-variable-p (sym val) t)" \
    --funcall hack-local-variables \
    --eval "(setq org-export-headline-levels 4)" \
    --funcall org-export-as-html-batch 
```

但是，仍然存在一些问题：

*   我需要明确指定标题级别，但我不明白为什么所有其他`#+OPTIONS`都受到尊重（如`toc:nil`）但不是这个

*   我不得不手动触发文件局部变量解析`hack-local-variables`（我猜它不会在批处理模式下自动完成）但更重要的是我不得不求助于将所有局部变量标记为安全（我确信有很多空间在这里改进）。

* * *

**注意**：

万一这很重要，我使用的是 emacs 23.2.1（Debian Squeeze 风格）

这是我测试过的示例`org`文件：

```
#+TITLE: Foo
#+OPTIONS: H:4 toc:nil author:nil

* 1
** 2
*** 3
**** 4

# Local Variables:
#  org-export-publishing-directory: "/some/where";
# End: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:21:20.700

我最终得到了以下脚本，它似乎满足了我的所有要求：

```
#!/bin/sh
":"; exec emacs --script "$0" -- "$@" # -*-emacs-lisp-*-
;; 
;; Usage:
;;    org2html FILE1 [FILE2 ...]

;; Mark org-related variables as safe local variables,
;; regardless of their value.
(defun my/always-safe-local-variable (val) t)
(dolist (sym '(org-export-publishing-directory
               org-export-html-preamble
               org-export-html-postamble))
  (put sym 'safe-local-variable 'my/always-safe-local-variable))

(defun my/org-export-as-html (filename)
  "Export FILENAME as html, as if `org-export-to-html' had been called
interactively.

This ensures that `org-export-headline-levels' is correctly read from
the #+OPTIONS: headline."
  (save-excursion
    (find-file filename)
    (message "Exporting file `%s' to HTML" filename)
    (call-interactively 'org-export-as-html)))

(mapcar 'my/org-export-as-html
        (cdr argv)) ;; "--" is the first element of argv 
```

关于这个脚本的几点说明：

*   可执行的 emacs-lisp 脚本技巧来自[这个问题](https://stackoverflow.com/q/6238331/1225607)。

*   `org-export-headline-levels`我发现使用标题中的值的唯一方法是交互`#+OPTIONS:`调用，而不是.`org-export-as-html``org-export-as-html-batch`

*   `hack-local-variables`不需要显式调用，前提是在打开文件之前将局部变量标记为安全。

*   我认为最好只使用`safe-local-variable`符号属性将与组织相关的变量标记为安全。

# forms - 如何使 Symfony2 实体表单类型显示 A 类型的实体但将它们保存为 B 类型？

> ID：14141241
> 
> 赞同：0
> 
> 时间：2013-01-03T14:53:45.190
> 
> 标签：forms, symfony

我目前在我的应用程序中可以选择让用户从列表中选择最喜欢的项目。表单元素是实体类型，并显示对象列表。用户可以选择其中的一些作为他们个人的最爱。

然而，虽然列表必须显示项目，但必须存储的实际上是一个 FavoritedItem（其中包含有关用户何时/如何收藏他的项目的额外信息）。

我不知道如何转换实体类型，以便用户可以从项目实体列表中进行选择，但表单存储连接到用户的 FavoritedItems。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:50:23.427

我猜您的实体与 FavoritedItem 有关系，当您创建表单时，不要包含该字段，而是包含用户选择的数据的虚拟字段：

```
$builder->add('favs', null, array('property_path' => false, 'type'='entity'.....)); 
```

找到这一行：

```
 if ($form->isValid()) {
        // perform some action, such as saving the task to the database

        return $this->redirect($this->generateUrl('task_success'));
    } 
```

并为您的每个项目，在您的实体上设置适当的 FavoritedItem。它看起来像：

```
$favorites = $form->get('favs')->getData();

foreach($favorites as $f){
    $FavItem = new FavoritedItem($f);
    $yourEntity->addFavorite($FavItem);
} 
```

# symfony - 如何在 Symfony2 中优化 DQL 查询？

> ID：14141247
> 
> 赞同：2
> 
> 时间：2013-01-03T14:54:05.590
> 
> 标签：symfony, doctrine, doctrine-orm, query-optimization

我有一个名为**Abono**的实体，它是其他几个实体（如 Cheque、Efectivo、Debito 等）的父类。在我的应用程序中，我使用带有这样的 DQL 语句的存储库类查询作为 Abono 类实例的所有对象（代码是真实代码的简化版本）：

```
$dql = "SELECT ab FROM FranquiciaBundle:Abono AS ab";
return $em->createQuery($dql)
          ->getResult(); 
```

在我的模板中，我展示了这样的结果（再次，简化代码）：

```
{% for abono in abonos %}
    <tr>
        <td>{{ abono.id }}</td>
        <td>{{ abono.tipo }}</td>
    </tr>
{% endfor %} 
```

`getArrayResult()`我在该表上有 5000 条记录，分析器告诉我应用程序访问数据库的次数是数据库的 5000 次，而不是我预期的一次，所以我使用而不是更改了 que 存储库，`getResult()`但问题是这句话`{{ abono.tipo }}`是一种方法对象的调用，而不是存储在数据库中的属性，因此它永远不会水合到结果数组中。

所以我的问题是，**我怎样才能让一组对象只访问数据库一次？**

**更新：** Abono 类的方法`getTipo()`返回每个对象的后期静态绑定类名，它不是一个关联。

```
public function getTipo()
{
    $className = get_called_class();
    $pos = strrpos($className,'\\');
    return substr($className, $pos+1);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T18:10:41.673

好的，我找到了问题的根源。

似乎在查询**作为关联反面的对象**时，学说**总是**会获取这些实体以创建代理实例，即使控制器或模板中不需要这些实体。因此，个人资料栏向我显示的大量数据库点击量实际上是一种教条，阻碍了我搜索我不想要的信息。

解决方案是强制在存储库中使用**部分加载**，如下所示：

```
$dql = "SELECT ab FROM FranquiciaBundle:Abono AS ab";
return $em->createQuery($dql)
          ->setHint(Query::HINT_FORCE_PARTIAL_LOAD, true)
          ->getResult(); 
```

更多信息可以在[这里找到](https://stackoverflow.com/questions/9848747/primary-key-of-owning-side-as-a-join-column)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T15:03:59.173

您可以使用 fetch join 来获取相关信息，并将其与第一个查询一起合并。

“从 FranquiciaBundle 中选择 ab，tipo：Abono AS ab JOIN ab.tipo”

另见： [http ://doctrine-orm.readthedocs.org/en/2.0.x/reference/dql-doctrine-query-language.html#joins](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/dql-doctrine-query-language.html#joins)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T15:33:23.867

Erik 是对的，但是您不必通过 sql 进行优化，doSelectJoinAll 就可以解决问题。

# c# - 从成员资格提供者检索 UserId

> ID：14141249
> 
> 赞同：1
> 
> 时间：2013-01-03T14:54:11.010
> 
> 标签：c#, asp.net, ado.net, asp.net-membership, membership

我正在尝试`UserId`从会员提供者那里检索当前用户，但有些事情并没有按照我的计划进行。这是我的代码：

```
cmd.Connection = conn;
cmd.CommandType = CommandType.StoredProcedure;
cmd.CommandText = "forum_GetUsernameId";
cmd.Parameters.Add("@username" , user);
var data = cmd.ExecuteScalar();

 @username nvarchar 
   AS
 SELECT UserId
 FROM aspnet_Users
 WHERE UserName = @username 
```

在调试时，我注意到数据返回是不可能的，`null`除非`ExecuteScalar()`不是我应该调用的方法。用户也被设置为我确定的当前用户名。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:55:36.727

如果你仍然使用`SqlMemberShipProvider`它很简单：

```
Guid userID = (Guid) Membership.GetUser().ProviderUserKey; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:23:58.943

您正在`SqlCommand.Parameter.Add()`代码中使用方法。如果您使用`Add()`带有两个参数的方法，则有两种选择；

```
Add(string, SqlDbType);
Add(string, object); 
```

![在此处输入图像描述](../Images/1f2acd0bfc32125e6f42e71eac495f1b.png)

在这种情况下，我认为您尝试使用第`Add()`一个。所以，当我查看数据库时，`UserId`是一个`uniquidentifier`.

![在此处输入图像描述](../Images/81ea5934ba6bb9b724394a57863fcfec.png)

因此，您应该将代码更改为；

```
cmd.Parameters.Add("@username", SqlDbType.UniqueIdentifier); 
```

`ExecuteScalar()`在您的代码中使用没有任何问题。它返回查询中第一列的第一行。因此，您的查询只返回一列一行，没有问题。但是，`ExecuteScalar()`返回一个对象，也许您可​​能需要使用 . 转换为字符串`.ToString()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:24:39.870

如果您正在使用`SqlMembershipProvider`，请按照蒂姆所说的做。

否则，我认为您不应该使用`ExecuteScalar()`从字段/列中读取数据，请尝试使用`ExecuteReader`：

```
var data = cmd.ExecuteReader();
while(reader.Read())
{
 //code goes here
} 
```

# encryption - 加密 web.config 后在 Visual Studio 2012 中运行项目时出错

> ID：14141254
> 
> 赞同：1
> 
> 时间：2013-01-03T14:54:18.337
> 
> 标签：encryption, web-config, visual-studio-2012

我创建了一个自定义受保护的配置提供程序，以便使用 X509Certificate 加密我们项目 web.config 的 2 个部分，其中一个是自定义部分，另一个是 connectionStrings 部分。除了一个烦人的问题外，这一切都很好。

每次我在 Visual Studio 2012 中运行应用程序时，都会收到以下错误消息：

> 从配置文件获取连接字符串信息时出现以下错误。“加载配置时出错：无法加载文件或程序集 FirstTitle.FastTitle.Security.X509ProtectedConfigurationProvider，版本 = 1.0.0.0，文化 = 中性，PublicKeyToken = d9b660f7f535363a”

但是，该站点继续运行，并且运行良好，并且自定义配置提供程序按预期实例化并成功解密了 web.config。

如果我将包含提供程序的程序集安装到 GAC 中，则不会出现该消息，但是鉴于有许多开发人员在从事此项目，我真的不希望他们在运行之前必须将程序集安装到 GAC 中该项目。

此外，我不认为它应该安装到 GAC 中，因为它只会在这个项目中单独使用。

更多信息：

我的配置提供程序位于其自己的名为 FirstTitle.FastTitle.Security.X509ProtectedConfigurationProvider 的已签名项目中。

提供者的代码如下（接口只是一个自定义接口）：

```
public class X509ProtectedConfigurationProvider : ProtectedConfigurationProvider,   IX509ProtectedConfigurationProvider
{
    #region Private Fields

    private const string _certNameConfigEntry = "CertSubjectDistinguishedName";

    private X509Certificate2 certificate = null;

    #endregion

    public override void Initialize(string name, System.Collections.Specialized.NameValueCollection config)
    {
        base.Initialize(name, config);

        // Get the CN for the cert from the config.
        string certSubjectDistinguishedName = config[_certNameConfigEntry];

        // Get the certificate form the local cert store.
        X509Store certStore = new X509Store(StoreLocation.LocalMachine);

        try
        {
            certStore.Open(OpenFlags.ReadOnly);

            // Find the matching certificate
            X509Certificate2Collection certs = certStore.Certificates.Find(X509FindType.FindBySubjectDistinguishedName, certSubjectDistinguishedName, true);

            if (certs.Count > 0)
            {
                certificate = certs[0];
            }
            else
            {
                certificate = null;
            }
        }
        finally            
        {
            certStore.Close();
        }
    }

    public override System.Xml.XmlNode Decrypt(System.Xml.XmlNode encryptedNode)
    {
        // Load the config unto an XML document.
        XmlDocument doc = encryptedNode.OwnerDocument;
        EncryptedXml eXml = new EncryptedXml(doc);
        eXml.DecryptDocument();
        return doc.DocumentElement;
    }

    public override System.Xml.XmlNode Encrypt(System.Xml.XmlNode node)
    {
        // Load the config into an XML document.
        XmlDocument doc = new XmlDocument();
        doc.PreserveWhitespace = true;
        doc.LoadXml(node.OuterXml);

        EncryptedXml eXml = new EncryptedXml();
        EncryptedData eData = eXml.Encrypt(doc.DocumentElement, certificate);
        return eData.GetXml();
    }
} 
```

web.config 中的 configProtectedData 元素设置如下（出于安全原因，我删除了证书的名称）：

```
<configProtectedData>
  <providers>
    <add name="X509Provider" type="FirstTitle.FastTitle.Security.X509ProtectedConfigurationProvider, FirstTitle.FastTitle.Security.X509ProtectedConfigurationProvider, Version=1.0.0.0, Culture=neutral, PublicKeyToken=d9b660f7f535363a, processorArchitecture=MSIL"  CertSubjectDistinguishedName="CN=NameRemoved"></add>
  </providers>
</configProtectedData> 
```

正如我所说，除了出现在 VS2012 中的这条烦人的消息外，一切正常。我一直在谷歌上搜索很多试图找到答案但无济于事。任何人都可以帮忙吗？

# excel - JasperReports 服务器的 Excel 输出中的自动过滤器不起作用

> ID：14141259
> 
> 赞同：1
> 
> 时间：2013-01-03T14:54:32.123
> 
> 标签：excel, jasper-reports, jasperserver

当我在*iReport*中运行报告时，我可以让*自动过滤*器工作，但是当我从*JasperReports Server*运行相同的报告时，*自动过滤*器不会出现。

 ****Autofilter*是否需要任何特殊配置才能从*JR Server*工作？***

# ruby - 如何设置自定义 rake 任务以使用 Capybara 运行验收测试？

> ID：14141261
> 
> 赞同：0
> 
> 时间：2013-01-03T14:54:35.913
> 
> 标签：ruby, ruby-on-rails-3, selenium, rake, capybara

我可能缺少一些东西，但我设置了以下 rake 任务：

```
namespace :test do
  Rake::TestTask.new(:acceptance => "test:prepare") do |t|
    t.libs << "test"
    t.pattern = 'test/acceptance/**/*_test.rb'
  end
end 
```

我正在使用 Capybara 进行验收测试，因此我还在我的`test_helper.rb`文件中包含了以下代码：

```
DatabaseCleaner.strategy = :truncation

class ActionDispatch::IntegrationTest
  # Make the Capybara DSL available in all integration tests
  include Capybara::DSL

  # Stop ActiveRecord from wrapping tests in transactions
  self.use_transactional_fixtures = false

  # Always use Selenium
  Capybara.default_driver = :selenium

  teardown do
    DatabaseCleaner.clean       # Truncate the database
    Capybara.reset_sessions!    # Forget the (simulated) browser state
    Capybara.use_default_driver # Revert Capybara.current_driver to      Capybara.default_driver
  end
end 
```

不幸的是，当我运行`rake test:acceptance`时，当 rake 尝试运行一个名为的玩具测试时，我收到以下错误`selenium_test.rb`：

```
.../test/acceptance/selenium_test.rb:1:in `<top (required)>': uninitialized constant ActionDispatch (NameError) 
```

该文件`selenium_test.rb`位于`test/acceptance`应用程序的文件夹中。如果我将它移到`test/functional`，它运行得很好。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:25:59.043

您需要在运行测试之前需要 rails 环境。您应该将要求添加到您的顶部`test_helper.rb`

```
require File.expand_path("../../../config/environment", __FILE__) 
```

当然，`../`您必须做的工作量因测试文件夹的深度而异。config 文件夹位于应用程序的根目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:07:44.500

正如 Yves 建议的那样，您可能需要加载 Rails 应用程序的环境。

尝试将 :environment 添加到依赖项：

```
namespace :test do
  Rake::TestTask.new(:acceptance => ["test:prepare", :environment]) do |t|
    # Same as before
  end
end 
```

正如您现在看到的，`test:acceptance`任务不仅取决于`test:prepare`任务，还取决于`:environment`任务。

# python - 如果文件包含字符串，则删除文件

> ID：14141263
> 
> 赞同：-3
> 
> 时间：2013-01-03T14:54:45.450
> 
> 标签：python

> **可能重复：**
> [在 txt 文件 Python 中搜索字符串](https://stackoverflow.com/questions/4940032/search-for-string-in-txt-file-python)

在 python 中，如果文件包含字符串，我如何删除它。我希望它遍历目录中的所有文件，打开它们，检查它们是否包含字符串，如果是，则删除文件并移至下一个文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T14:58:41.723

这个问题有几个部分。首先，您需要一个文件列表。根据您的需要： `glob.glob`或`os.listdir`可能`os.walk`是合适的。您还需要知道如何打开文件并搜索字符串。最简单（简单）的方法是打开文件，读取所有内容并检查字符串是否存在：

```
def check_file_for_string(filename,string):
    with open(filename) as fin:
         return string in fin.read() 
```

这种天真的方式并不理想，因为它会将文件的全部内容读入内存，如果文件真的很大，这可能是一个问题。

最后，如果返回，您可以使用`os.remove`或`os.unlink`删除文件。`check_file_for_string``True`

# ember.js - Ember 数据模型问题：奇怪的请求 URL

> ID：14141264
> 
> 赞同：0
> 
> 时间：2013-01-03T14:54:48.097
> 
> 标签：ember.js, ember-data, amd

[我正在尝试使用基于https://github.com/fernandogmar/Emberjs-RequireJS](https://github.com/fernandogmar/Emberjs-RequireJS)的 AMD 方法（是的，我知道@tomdale 对 AMD 的看法）构建一个简单的 ember 应用程序（文件浏览器），这似乎工作得很好，除了尝试使用此 DS.Model 时，我收到了一个奇怪的请求 URL：

```
App.File = DS.Model.extend({
    primaryKey: "URI",

    url: "file",

    URI: DS.attr("string")
}); 
```

调用：

```
window.App.DataStore.find(File, encodeURIComponent("/")); 
```

（不相关的问题：有没有办法使用 get() 从路由器或控制器中获取数据存储？`Router.get("DataStore")`返回未定义。）

使用标准未修改的 RESTAdapter。产生以下请求 URL：

```
http://127.0.0.1:8020/model)s/%2F 
```

我不知道是什么原因造成的。推测末尾的“s”是适配器试图使模型名称复数。我不知道paren是从哪里来的。

Ember 版本：v1.0.0-pre.2-123-ga352c48

Ember-data 版本：昨天从[https://github.com/emberjs/data/downloads](https://github.com/emberjs/data/downloads)下载的最新版本（在任何地方都找不到版本号）。

这是否与 AMD 方法有关，或者这是一个不相关的问题，最重要的是：我该如何解决？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:34:19.350

我发现使用`File.reopenClass()`设置 url 属性而不是设置它`extend()`确实可以解决问题。这并不能解释为什么生成模型名的默认魔法返回`model)s`，但至少它现在解决了我的问题。

# sql - PostgreSQL：外键/删除级联

> ID：14141266
> 
> 赞同：55
> 
> 时间：2013-01-03T14:55:04.243
> 
> 标签：sql, postgresql, cascade

我有两个像这里的表：

```
DROP   TABLE  IF EXISTS schemas.book;
DROP   TABLE  IF EXISTS schemas.category;
DROP   SCHEMA IF EXISTS schemas;
CREATE SCHEMA schemas;

CREATE TABLE schemas.category (
  id          BIGSERIAL PRIMARY KEY,
  name        VARCHAR   NOT NULL,
  UNIQUE(name)
);

CREATE TABLE schemas.book (
  id          BIGSERIAL PRIMARY KEY,
  published   DATE      NOT NULL,
  category_id BIGINT    NOT NULL REFERENCES schemas.category ON DELETE CASCADE ON UPDATE CASCADE,
  author      VARCHAR   NOT NULL,
  name        VARCHAR   NOT NULL,
  UNIQUE(published, author, name),
  FOREIGN KEY(category_id) REFERENCES schemas.category (id)
); 
```

所以逻辑很简单，在用户删除类别 x 下的所有书后，x 从猫中删除，我尝试了上面的方法但不起作用，在我清理表书后，表类别仍然填充，这是怎么回事？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-01-03T14:58:59.380

级联删除的外键意味着如果父表中的一条记录被删除，那么子表中对应的记录将被自动删除。这称为级联删除。

您以相反的方式说，这并不是说当您从子表中删除时，记录将从父表中删除。

```
UPDATE 1: 
```

**ON DELETE CASCADE**选项用于指定在父表中删除相应行时是否要删除子表中的行。如果您不指定级联删除，则数据库服务器的默认行为会阻止您在其他表引用该表时删除该表中的数据。

如果您指定此选项，稍后当您删除父表中的一行时，数据库服务器也会删除与子表中该行（外键）关联的所有行。cascading-deletes 功能的主要优点是它允许您减少执行删除操作所需的 SQL 语句的数量。

**因此，这就是当您从父表而不是子表中删除行时会发生什么。**

因此，在您的情况下，当用户从 CATs 表中删除条目时，将从 books 表中删除行。:)

希望这可以帮助你:)

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2015-11-19T14:55:13.387

**PostgreSQL[文档](http://www.postgresql.org/docs/8.2/static/ddl-constraints.html)**摘录**：**

 **> 限制和级联删除是两个最常见的选项。[...]`CASCADE`指定当引用的行被删除时，引用它的行也应该被自动删除。

这意味着，如果您删除由 in 引用的`schemas.category`行`category_id`in `schemas.books`，则任何此类引用行也将被 删除`ON DELETE CASCADE`。

**示例**：

```
CREATE SCHEMA shire;

CREATE TABLE shire.clans (
    id serial PRIMARY KEY,
    clan varchar
);

CREATE TABLE shire.hobbits (
    id serial PRIMARY KEY,
    hobbit varchar,
    clan_id integer REFERENCES shire.clans (id) ON DELETE CASCADE
); 
```

`DELETE FROM`氏族会`CASCADE`向霍比特人靠`REFERENCES`。

```
sauron@mordor> psql
sauron=# SELECT * FROM shire.clans;
 id |    clan    
----+------------
  1 | Baggins
  2 | Gamgi
(2 rows)

sauron=# SELECT * FROM shire.hobbits;
 id |  hobbit  | clan_id 
----+----------+---------
  1 | Bilbo    |       1
  2 | Frodo    |       1
  3 | Samwise  |       2
(3 rows)

sauron=# DELETE FROM shire.clans WHERE id = 1 RETURNING *;
 id |  clan   
----+---------
  1 | Baggins
(1 row)

DELETE 1
sauron=# SELECT * FROM shire.hobbits;
 id |  hobbit  | clan_id 
----+----------+---------
  3 | Samwise  |       2
(1 row) 
```

如果你真的需要相反的（由数据库检查），你将不得不写一个触发器！

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2018-02-07T18:42:41.947

根据我对 postgres 9.6 的简陋经验，级联删除在实践中对于增长超过微不足道大小的表不起作用。

*   更糟糕的是，当删除级联进行时，所涉及的表被锁定，因此这些表（可能还有您的整个数据库）无法使用。
*   更糟糕的是，很难让 postgres 告诉你它在删除级联期间做了什么。如果需要很长时间，哪个或哪些表使它变慢？也许它在 pg_stats 信息中的某个地方？很难说。

* * *

## 回答 #4

> 赞同：-20
> 
> 时间：2017-07-15T10:50:11.663

> **PostgreSQL Forging Key DELETE, UPDATE CASCADE**

```
CREATE TABLE apps_user(
  user_id SERIAL PRIMARY KEY,
  username character varying(30),
  userpass character varying(50),
  created_on DATE
);

CREATE TABLE apps_profile(
    pro_id SERIAL PRIMARY KEY,
    user_id INT4 REFERENCES apps_user(user_id) ON DELETE CASCADE ON UPDATE CASCADE,
    firstname VARCHAR(30),
    lastname VARCHAR(50),
    email VARCHAR UNIQUE,
    dob DATE
); 
```**

# android - 如何确保数据已发布（发送）到远程服务器

> ID：14141267
> 
> 赞同：0
> 
> 时间：2013-01-03T14:55:05.270
> 
> 标签：android, post, get

我正在使用此代码通过 android 应用程序将数据发布到服务器。因此，假设在将数据发布到服务器之前，连接已丢失（wifi 或 3g 之外）或在发布期间连接丢失。如何确保数据已发布到服务器？我将来自服务器端的响应实现为反馈消息或响应，但是您认为这就足够了吗？

另一种情况（在银行等关键系统中）

假设我发送了数据并且它已经很好地发布了（例如插入到数据库中）但是在获取响应期间发生了错误！从逻辑上讲，因为没有收到回复，我会通知用户，例如该过程没有发布，必须再次发布！这是个问题 ！！

那么，实施或获得这种保险水平的最佳方式是什么？

```
try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(http://www.exampleof.the/page_that_wil_receive_the_data.php?data=example);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        //"ISO-8859-1,utf-8;q=0.7,*;q=0.7"
        //"iso-8859-1"
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "utf-8"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:03:47.803

向每个帖子添加一个 GUID，并返回一个返回 GUID 的响应以及事务的哈希。跟踪服务器上的 GUID。如果服务器的响应无效，请重试。如果收到具有相同 GUID 的事务，则丢弃它，但确认已收到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:53:54.610

我相信对于这两个问题，HTTP 200 响应代码可确保您的请求已成功发布到服务器中。

# c# - C# 加载 XML 文件

> ID：14141268
> 
> 赞同：0
> 
> 时间：2013-01-03T14:55:06.990
> 
> 标签：c#, xml, winforms

如何使用 XML 文档提供的属性创建 Windows 窗体？

这是这样一个 XML 文档：

```
<Form>
   <Size>
     <Width>558</Width> 
     <Height>537</Height> 
   </Size>
   <Text>XML saving</Text> 
   <Name>Form1</Name> 
   <Button>
     <Name>button1</Name> 
     <Text>XML button</Text> 
     <Size>
       <Width>130</Width> 
       <Width>45</Width> 
     </Size>
     <Location>
       <X>14</X> 
       <Y>24</Y> 
     </Location>
   </Button>
 </Form> 
```

加载表单后，我需要使用 XML 文档中的值显示表单及其上的按钮。

任何人都可以提供有关此主题的任何帮助或教程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T14:58:32.813

您可以使用内置功能来保存和恢复表单设置。使用[应用程序设置绑定](http://www.thejoyofcode.com/Easy_Settings_in_WinForms.aspx)。

您可以将表单的大小、位置、文本等属性及其控件绑定到设置，这些设置将自动加载并应用于控件。脚步：

*   选择一些控件并转到属性选项卡
*   `(ApplicationSettings)`在数据类别下查找属性
*   打开属性绑定编辑器
*   选择要从 xml 保存和加载的属性并为该属性创建新设置

* * *

如果你真的需要使用你的xml，那么你应该手动解析它。您可以创建一些（扩展）方法，例如（Linq to Xml 示例）：

```
public static void ApplySettings(this Button button, XDocument xdoc)
{
    var settings = xdoc
                 .Descendatns("Button")
                 .SingleOrDefault(b => (string)b.Element("Name") == button.Name);

    if (settings == null)
       return;

    button.Text = (string)settings.Element("Text");
    var location = settings.Element("Location");
    if (location != null)
    {
        button.X = (int)location.Element("X");
        button.Y = (int)location.Element("Y");
    }

    //etc
} 
```

并为每个控件调用这些方法：

```
var xdoc = XDocument.Load(settings_file);
button1.ApplySettings(xdoc);
// etc 
```

# date - 使用不同语言环境的 CDate 函数

> ID：14141272
> 
> 赞同：1
> 
> 时间：2013-01-03T14:55:22.620
> 
> 标签：date, vbscript, locale, qtp

我正在使用 QTP（因此是 VBScript），我似乎对 CDate 函数有问题。

当我在马来西亚的同事使用它时，没有问题。当我在西班牙使用它时，出现以下错误。

![在此处输入图像描述](../Images/087245db9ba9435f48e07633815d3b28.png)

现在我要问的是这个函数或任何其他相关的问题，如不同语言环境之间的 FormatDateTime 是否存在任何已知问题。

有人知道这个吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:43:05.867

CDate() 尝试将其输入转换为日期，同时考虑到区域设置。看：

```
>> SetLocale "en-us"
>> WScript.Echo GetLocale()
>> WScript.Echo 1, CDate("1 dec 2011")
>> WScript.Echo 2, CDate("1 dez 2011")
>>
1033
1 01.12.2011
Error Number:       13
Error Description:  Type mismatch
>> SetLocale "de"
>> WScript.Echo GetLocale()
>> WScript.Echo 3, CDate("1 dez 2011")
>> WScript.Echo 4, CDate("1 dec 2011")
>>
1031
3 01.12.2011
Error Number:       13
Error Description:  Type mismatch
>> 
```

“en-us”下的 CDate() 理解“dec”，但在“dez”上窒息；“de”与“dez”一起使用，但不适用于“dec”。

解决您的问题的最小影响策略可能是通过使用 SetLocale() 和一些大棒（输入验证）来针对草率的数据输入人员强制执行“一个区域设置”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T15:21:13.283

错误说明了问题。`todateObject.GetROProperty("value")`包含[CDate](http://msdn.microsoft.com/en-us/library/2dt118h2%28v=vs.84%29.aspx)不能识别为日期的值。

您需要首先确定返回的内容`todateObject.GetROProperty("value")`，然后确保可以将其转换为日期。

您可能需要考虑使用[DateSerial](http://msdn.microsoft.com/en-us/library/office/gg264202.aspx)而不是 CDate 创建日期，以避免文化差异引起的问题。如果是这种情况，根据您的情况，您可能需要为日、月和年提供单独的字段，以确保顺序始终正确。

# php - PHP 如何从另一个类访问一个类？

> ID：14141273
> 
> 赞同：0
> 
> 时间：2013-01-03T14:55:27.440
> 
> 标签：php, oop, class

我有以下代码：

```
class db { 
    //database class, connects and closes a database connection
    //some properties and methods are hided (such as host-adres, username...)

    public function connect()
    {
        mysql_connect(//parameters)or die(mysql_error());
    }
}

class ban {
    //ban class, bans an ip, again some methods and properties are hided

    public function banIP()
    {
        //here i want to access the connect function of the class db, 
        //without creating a object.
        //some code
    }
} 
```

现在我的问题是，从我需要使用类 db`banIP()`中的函数连接到数据库的方法内部。`connect()`但是如何访问连接功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T14:57:00.270

声明一个 db 类的对象，然后使用该对象访问它，

```
 $object = new db();
   $object->connect(); 
```

您不能在不创建任何对象的情况下访问方法。您将必须创建包含方法的类（类 db）或继承类 db 的类（类 ban）的对象。

```
 class ban extends db {
    public function banIP()
   {
     $this->connect(); //this acts as an object.
   }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:58:00.927

扩展您想从中继承这些方法的类。所以，类禁令应该扩展 db.

# c# - 使用 C#/Windows API 的虚拟键盘 - 发送键输入，但不获取焦点

> ID：14141274
> 
> 赞同：1
> 
> 时间：2013-01-03T14:55:30.453
> 
> 标签：c#, .net, winapi, virtual-keyboard

我正在用 C# 构建一个自定义的虚拟键盘。

要点是将特定的按键发送到当前具有焦点的窗口。但是，通常情况下，虚拟键盘上的键在按下后会获取焦点。

我假设应该为此目的使用某种 Windows API。如果是，是哪一个，如果不是，正确的做法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:53:51.530

这是关于这个主题的一个很好的资源：[http ://www.yortondotnet.com/2006/11/on-screen-keyboards.html](http://www.yortondotnet.com/2006/11/on-screen-keyboards.html)

基本上，创建一个表单并为键使用标签而不是按钮。您将需要覆盖 CreateParams 以设置正确的样式。您还必须重写 WndProc 并过滤掉通常将焦点发送到表单的消息。然后将点击事件添加到您的标签并用于`SendKeys.Send(keyPressed);`将实际击键发送到具有焦点的窗口。

以下是链接中的相关代码：

```
 private const int WS_EX_NOACTIVATE = 0x08000000;

    protected override CreateParams CreateParams
    {
        get
        {
            CreateParams createParams = base.CreateParams;
            createParams.ExStyle = createParams.ExStyle | WS_EX_NOACTIVATE;
            return createParams;
        }
    }

    private const int WM_MOUSEACTIVATE = 0x0021;
    private const int MA_NOACTIVATE = 0x0003;
    protected override void WndProc(ref Message m)
    {
        //If we're being activated because the mouse clicked on us...
        if (m.Msg == WM_MOUSEACTIVATE)
        {
            //Then refuse to be activated, but allow the click event to pass through (don't use MA_NOACTIVATEEAT)
            m.Result = (IntPtr)MA_NOACTIVATE;
        }
        else
            base.WndProc(ref m);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T19:03:06.643

我在面板（keyb）中使用面板（用于键）和自定义绘制例程来在中心绘制文本。

点击事件是 SendKeys.Send("1"); ETC..

这是一个 10 键控制，所以连接事件非常容易。

不必处理任何窗口消息，而且效果很好。我的 10 键没有任何焦点问题，输入会发送到光标所在的位置。简单的。

# ios - 是否可以在 AVCaptureVideoDataOutput 中设置 AVCaptureSessionPresetPhoto？

> ID：14141278
> 
> 赞同：0
> 
> 时间：2013-01-03T14:55:44.310
> 
> 标签：ios, image, camera, avfoundation

我想从视频流中保存图像，我已将会话预设设置为 AVCaptureSessionPresetPhoto，但我在设备上的分辨率非常低。我在 3GS 上进行测试，这个预设返回 512x384 缓冲区。我在文档中看到照片预设无法应用于视频输出。

> 视频输出不支持此功能

这对来自相机缓冲区的原始数据也有效吗？
谢谢，安德里亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:43:40.920

如果您想对相机输入进行视频预览，但仍从中捕获静态照片，则可以将 AVCaptureStillImageOutput 和 AVCaptureVideoDataOutput 添加到捕获会话中。视频预览会给你奇怪大小的小帧，就像你上面描述的那样，但你仍然可以通过触发`-captureStillImageAsynchronouslyFromConnection:completionHandler:`你的 AVCaptureStillImageOutput 来检索完整的照片。

请注意，在 iOS 4.3 中悄悄添加了对视频预览同时仍能拍照的支持，因此运行旧操作系统版本的设备将无法执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-05T18:41:03.740

iPhone 7 plus 是我目前的情况，如果你设置预设为`AVCaptureSessionPresetPhoto`，并使用视频流作为输出，分辨率会自动降为 1440 * 1080。但这不影响图像输出，即 4032 * 3024前置摄像头，3088*2320 后置摄像头。

请注意，有时这还不错，因为这是 3/4 纵横比下的最高视频分辨率

# iphone - ios 6.0 和模拟器中 iphone 5 的屏幕分辨率

> ID：14141280
> 
> 赞同：-1
> 
> 时间：2013-01-03T14:55:46.727
> 
> 标签：iphone, ios, simulator

我想将已经在应用商店中发布的功能齐全的应用移植到 ios 6.0 和 iPhone 5 上，以避免那些黑沙箱。

我添加了 Default-568h@2x.png 图像以启用 iphone 5 分辨率支持，并且黑框不再显示在模拟器中。

但是当我检查屏幕的分辨率（[UIScreen mainScreen]）来检测 iPhone 5 时，我总是得到 320x568 的分辨率。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:05:29.603

[在 iPhone App 中如何检测设备的屏幕分辨率](https://stackoverflow.com/questions/4779221/in-iphone-app-how-to-detect-the-screen-resolution-of-the-device)

Jman012 对您的问题的回答：

```
CGRect screenBounds = [[UIScreen mainScreen] bounds]; 
```

*这将为您提供整个屏幕的分辨率（以点为单位），因此对于 iPhone，它通常是 320x480。即使 iPhone4 的屏幕尺寸更大，iOS 仍然返回 320x480 而不是 640x960。这主要是因为较旧的应用程序中断。*

```
CGFloat screenScale = [[UIScreen mainScreen] scale]; 
```

*这将为您提供屏幕的比例。对于所有没有 Retina 显示屏的 iPhone 和 iPodTouch，将返回 1.0f，而 Retina Display 设备将返回 2.0f。现在，如果你想获得 iOS 设备屏幕的像素宽度和高度，你只需要做一件简单的事情。*

```
CGSize screenSize = CGSizeMake(screenBounds.size.width * screenScale, screenBounds.size.height * screenScale); 
```

*通过乘以屏幕的比例，您可以获得实际的像素分辨率。这段代码的用处在于它可以在 Apple 的后续产品中使用，例如，如果 iPad 获得了 Retina 显示屏，那么使用比例尺将始终为您提供真正的像素分辨率。*

[http://developer.apple.com/library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/GraphicsDrawingOverview/GraphicsDrawingOverview.html#//apple_ref/doc/uid/TP40010156-CH14-SW7](http://developer.apple.com/library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/GraphicsDrawingOverview/GraphicsDrawingOverview.html#//apple_ref/doc/uid/TP40010156-CH14-SW7)

# ipad - 在 iOS 上使用 webkit-overflow-scrolling 在动量滚动期间访问不正确的元素

> ID：14141281
> 
> 赞同：9
> 
> 时间：2013-01-03T14:55:49.983
> 
> 标签：ipad, ios6, webkit

几天来一直在使用 webkit-overflow-scrolling touch。我正在尝试做一些非常直截了当的事情——但事实证明这很棘手！

当我点击某个元素时，我想通过 JS 抓取它并用它做一些事情。然而，当它在一个 'webkit-overflow-scrolling: touch' div 中时，一旦 iOS 的动量滚动接管，元素似乎就跟不上。IE 我开始滚动，当列表仍在滚动时，我点击一个，它似乎访问了不正确的元素？理想情况下，我想确定动量滚动何时开始，以及它是否仍在进行中——点击只是停止它而不是一开始选择一个元素，但我什至还不能让基础工作。

我正在使用 iOS 6.01 的 iPad 3 上对此进行测试。似乎 webkit 滚动非常有问题，因为 onscroll 事件似乎也很喜怒无常，有时会在滚动结束以外的时间触发，这与通用 iOS 使用不同。

如果有人对如何在不使用 iScroll 或关闭 webkit-overflow-scroll 的情况下正常工作有任何想法，将不胜感激！

```
<style>
li {
    height: 40px;
    background: #999;
}
</style>
<div style="-webkit-overflow-scrolling: touch; height: 400px; background: #CCC; width: 400px; overflow: scroll;" >
<ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
    <li>6</li>
    <li>7</li>
    <li>8</li>
    <li>9</li>
    <li>10</li>
    <li>11</li>
    <li>12</li>
    <li>13</li>
    <li>14</li>
    <li>15</li>
    <li>16</li>
    <li>17</li>
    <li>18</li>
    <li>19</li>
    <li>20</li>
    <li>21</li>
    <li>22</li>
    <li>23</li>
    <li>24</li>
    <li>25</li>
    <li>26</li>
    <li>27</li>
</ul>
</div>
<div id="content"></div>
<script>
var elements = document.getElementsByTagName('li');
for(var i = 0, len = elements.length; i < len; i++) {
    elements[i].ontouchstart = function (e) {
        document.getElementById('content').innerHTML = document.getElementById('content').innerHTML+this.innerHTML;
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T06:15:31.743

在我的项目中，我也看到动量滚动非常有问题。这些错误有时可以通过硬件加速滚动器内的元素来修复。试试看它是否适合你。以下是有关如何硬件加速元素的更多信息：http: [//davidwalsh.name/translate3d](http://davidwalsh.name/translate3d)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T10:28:27.120

在您发布此内容将近三年后，但这里是解决此问题的方法。首先不要尝试控制动量滚动，一旦设备进入动量滚动（200ms），设备就会停止向webview发送触摸事件。

一旦 touchstartevent 触发，此代码将附加一个 touchend 事件，并在 150 毫秒内将其删除，因此“点击”必须在 150 毫秒内触发。

```
element.addEventListener('touchstart', function(e)) {
    var target = this;
    var handler = function(evt) {
        e.preventDefault();
        e.stopImmediatePropagation();
        evt.preventDefault();
        evt.stopImmediatePropagation();
        /*
         Your tap event handler code here
         */
    };
    target.addEventListner('touchend', handler);
    setTimeout(function() {
        target.removeEventListener('touchend', handler)
    }, 150);
}); 
```

希望这可以帮助 ：）

# r - 包字段中的 R Krig 函数错误

> ID：14141282
> 
> 赞同：1
> 
> 时间：2013-01-03T14:55:50.363
> 
> 标签：r

我正在使用包`fields`进行空间分析。

我的数据集如下：

```
 x     y
Kopenhagen  12,57 55,68
Rotterdam    4,48 51,92
Belgrade    20,46 44,82
Budapest    19,04  47,5
Dublin      -6,27 53,34
Rome        12,48 41,89
Lisbon      -9,14 38,71
Bucharest    26,1 44,45
Madrid       -3,7 40,42
Lausanne     6,63 46,52
London      -0,13  51,5
Kiel        10,13 54,33
Augsburg    10,89 48,36
Innsbruck  11,398 47,25
Helsinki    24,94 60,17
Lyon         4,83 45,77
Ngreece      22,5  41,5
Ancona      13,11 43,37
Forde         5,9 61,44
Warsawa     21,01 52,23
Uppsala     17,64 59,86
Barcelona    2,17 41,38
Prague      14,42 50,09 
```

这是的输出

```
dput(map)

structure(list(x = structure(c(6L, 18L, 11L, 10L, 21L, 5L, 23L, 
16L, 17L, 22L, 1L, 2L, 3L, 4L, 15L, 19L, 14L, 7L, 20L, 12L, 9L, 
13L, 8L), .Label = c("-0,13", "10,13", "10,89", "11,398", "12,48", 
"12,57", "13,11", "14,42", "17,64", "19,04", "20,46", "21,01", 
"2,17", "22,5", "24,94", "26,1", "-3,7", "4,48", "4,83", "5,9", 
"-6,27", "6,63", "-9,14"), class = "factor"), y = structure(c(20L, 
16L, 8L, 12L, 18L, 5L, 1L, 7L, 2L, 10L, 15L, 19L, 13L, 11L, 22L, 
9L, 4L, 6L, 23L, 17L, 21L, 3L, 14L), .Label = c("38,71", "40,42", 
"41,38", "41,5", "41,89", "43,37", "44,45", "44,82", "45,77", 
"46,52", "47,25", "47,5", "48,36", "50,09", "51,5", "51,92", 
"52,23", "53,34", "54,33", "55,68", "59,86", "60,17", "61,44"
), class = "factor")), .Names = c("x", "y"), class = "data.frame", row.names=                           
c("Kopenhagen","Rotterdam", "Belgrade", "Budapest", "Dublin", "Rome", "Lisbon", 
"Bucharest", "Madrid", "Lausanne", "London", "Kiel", "Augsburg", 
"Innsbruck", "Helsinki", "Lyon", "Ngreece", "Ancona", "Forde", 
"Warsawa", "Uppsala", "Barcelona", "Prague")) 
```

和

```
[1]  97.11559  59.86429  25.85145  54.56235  86.00903  17.45889  81.48449
[8]  87.57361  68.49520  44.40894 106.80953  67.36760  77.33586  47.96955
[15]  35.00993  75.26571  43.15965  17.55405  65.85301  46.19634 126.52848
[22]  42.26424  53.29187 
```

第一个数据集称为`map`，第二个称为`sigma`。

我写了这段代码：

```
fit<-Krig(map, sigma, theta=100) 
```

但它给了我以下错误：

```
Error in signif(mat, digits) : 
  Non-numeric argument to mathematical function 
```

我不明白我错在哪里，因为我的数据集的组织看起来与字段包手册中的相同。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:30:17.890

错误是因为您的 x 和 y 列是因素。您必须将一个因子转换为近似其原始数值。

```
 map$x <- as.numeric(gsub(",",".", map$x))
 map$y <- as.numeric(gsub(",",".", map$y))
Krig(map, sigma, theta=100)
Call:
Krig(x = dat2, Y = sigma, theta = 100)

 Number of Observations:                23    
 Number of parameters in the null space 3     
 Parameters for fixed spatial drift     3     
 Model degrees of freedom:              19.2  
 Residual degrees of freedom:           3.8   
 GCV estimate for sigma:                9.943 
 MLE for sigma:                         8.931 
 MLE for rho:                           8808  
 lambda                                 0.0091
 User rho                               NA    
 User sigma^2                           NA 
```

我不知道您是如何阅读地图结构的，但是如果您将其作为数字阅读，则可以轻松避免转换。例如 ：

```
map <- read.table(files,sep=',') 
```

# java - 从多个对象中引用相同的 ArrayList

> ID：14141284
> 
> 赞同：-4
> 
> 时间：2013-01-03T14:55:55.527
> 
> 标签：java

我想知道如何从多个对象中引用同一个 ArrayList。以下不是真实世界的示例，仅出于解释目的而编造。

如果我有一个`CarCatalog`带有`ArrayList`字段的类：

```
ArrayList<Car> cars = new ArrayList<>(); 
```

如果我然后创建一个 and 的实例，`CarCreator`并用它`CarDeleter`传递`cars`字段

```
CarCreator creator = new CarCreator(this.cars); 
```

并将参数分配给`CarCreator`对象中的字段：

```
class CarCreator {
    ArrayList<Car> cars;

    public CarCreator(ArrayList cars) {
        this.cars = cars;
    }
} 
```

现在，如果我添加一个`Car`对象`CarCreator`

```
this.cars 
```

它也会出现在`CarCatalogs`现场吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:17:07.520

这是。当你写：

```
ArrayList<Car> cars = new ArrayList<>(); 
```

汽车不是一个`ArrayList`。它是*对*`ArrayList`. 这很关键，因为当您传递`cars`时，您传递的是对原始列表的引用。因此，修改一个对象中的列表将意味着这些更改在第二个对象中可见。

*对于不可变*对象，这里有一个强有力的论据。也就是不能改变的对象。显然，这并不总是可行的，因此您需要清楚谁拥有该列表，谁可以更改它，并尽可能传递副本或不可变版本。这通常被称为*防御性编程*。

# hdfs - 在 Flume-ng 中使用 HDFS Sink 和 rollInterval 批量处理 90 秒的日志信息

> ID：14141287
> 
> 赞同：4
> 
> 时间：2013-01-03T14:56:08.373
> 
> 标签：hdfs, flume

我正在尝试使用 Flume-ng 获取 90 秒的日志信息并将其放入 HDFS 中的文件中。我已经通过 exec 和 tail 查看日志文件，但是它每 5 秒创建一个文件，而不是我试图配置为每 90 秒的文件。

我的flume.conf如下：

```
# example.conf: A single-node Flume configuration                                                                                                                  
# Name the components on this agent                                                                                                                                
agent1.sources = source1
agent1.sinks = sink1
agent1.channels = channel1

# Describe/configure source1                                                                                                                                       
agent1.sources.source1.type = exec
agent1.sources.source1.command = tail -f /home/cloudera/LogCreator/fortune_log.log

# Describe sink1                                                                                                                                                   
agent1.sinks.sink1.type = hdfs
agent1.sinks.sink1.hdfs.path = hdfs://localhost/flume/logtest/
agent1.sinks.sink1.hdfs.filePrefix = LogCreateTest
# this parameter seems to be getting overridden                                                                                                                    
agent1.sinks.sink1.hdfs.rollInterval=90
agent1.sinks.sink1.hdfs.rollSize=0
agent1.sinks.sink1.hdfs.hdfs.rollCount = 0

# Use a channel which buffers events in memory                                                                                                                     
agent1.channels.channel1.type = memory

# Bind the source and sink to the channel                                                                                                                          
agent1.sources.source1.channels = channel1
agent1.sinks.sink1.channel = channel1 
```

我试图通过参数- **agent1.sinks.sink1.hdfs.rollInterval=90**控制文件大小。

运行此配置会产生：

```
13/01/03 09:43:02 INFO properties.PropertiesFileConfigurationProvider: Reloading configuration file:/etc/flume-ng/conf/flume.conf
13/01/03 09:43:02 INFO conf.FlumeConfiguration: Processing:sink1
13/01/03 09:43:02 INFO conf.FlumeConfiguration: Processing:sink1
13/01/03 09:43:02 INFO conf.FlumeConfiguration: Processing:sink1
13/01/03 09:43:02 INFO conf.FlumeConfiguration: Processing:sink1
13/01/03 09:43:02 INFO conf.FlumeConfiguration: Processing:sink1
13/01/03 09:43:02 INFO conf.FlumeConfiguration: Processing:sink1
13/01/03 09:43:02 INFO conf.FlumeConfiguration: Processing:sink1
13/01/03 09:43:02 INFO conf.FlumeConfiguration: Added sinks: sink1 Agent: agent1
13/01/03 09:43:03 INFO conf.FlumeConfiguration: Post-validation flume configuration contains configuration  for agents: [agent1]
13/01/03 09:43:03 INFO properties.PropertiesFileConfigurationProvider: Creating channels
13/01/03 09:43:03 INFO instrumentation.MonitoredCounterGroup: Monitoried counter group for type: CHANNEL, name: channel1, registered successfully.
13/01/03 09:43:03 INFO properties.PropertiesFileConfigurationProvider: created channel channel1
13/01/03 09:43:03 INFO sink.DefaultSinkFactory: Creating instance of sink: sink1, type: hdfs
13/01/03 09:43:03 INFO hdfs.HDFSEventSink: Hadoop Security enabled: false
13/01/03 09:43:03 INFO instrumentation.MonitoredCounterGroup: Monitoried counter group for type: SINK, name: sink1, registered successfully.
13/01/03 09:43:03 INFO nodemanager.DefaultLogicalNodeManager: Starting new configuration:{ sourceRunners:{source1=EventDrivenSourceRunner: { source:org.apache.flume.source.ExecSource{name:source1,state:IDLE} }} sinkRunners:{sink1=SinkRunner: { policy:org.apache.flume.sink.DefaultSinkProcessor@1a50ca0c counterGroup:{ name:null counters:{} } }} channels:{channel1=org.apache.flume.channel.MemoryChannel{name: channel1}} }
13/01/03 09:43:03 INFO nodemanager.DefaultLogicalNodeManager: Starting Channel channel1
13/01/03 09:43:03 INFO instrumentation.MonitoredCounterGroup: Component type: CHANNEL, name: channel1 started
13/01/03 09:43:03 INFO nodemanager.DefaultLogicalNodeManager: Starting Sink sink1
13/01/03 09:43:03 INFO nodemanager.DefaultLogicalNodeManager: Starting Source source1
13/01/03 09:43:03 INFO instrumentation.MonitoredCounterGroup: Component type: SINK, name: sink1 started
13/01/03 09:43:03 INFO source.ExecSource: Exec source starting with command:tail -f /home/cloudera/LogCreator/fortune_log.log
13/01/03 09:43:07 INFO hdfs.BucketWriter: Creating hdfs://localhost/flume/logtest//LogCreateTest.1357224186506.tmp
13/01/03 09:43:08 INFO hdfs.BucketWriter: Renaming hdfs://localhost/flume/logtest/LogCreateTest.1357224186506.tmp to hdfs://localhost/flume/logtest/LogCreateTest.1357224186506
13/01/03 09:43:08 INFO hdfs.BucketWriter: Creating hdfs://localhost/flume/logtest//LogCreateTest.1357224186507.tmp
13/01/03 09:43:12 INFO hdfs.BucketWriter: Renaming hdfs://localhost/flume/logtest/LogCreateTest.1357224186507.tmp to hdfs://localhost/flume/logtest/LogCreateTest.1357224186507
13/01/03 09:43:12 INFO hdfs.BucketWriter: Creating hdfs://localhost/flume/logtest//LogCreateTest.1357224186508.tmp
13/01/03 09:43:12 INFO hdfs.BucketWriter: Renaming hdfs://localhost/flume/logtest/LogCreateTest.1357224186508.tmp to hdfs://localhost/flume/logtest/LogCreateTest.1357224186508
13/01/03 09:43:12 INFO hdfs.BucketWriter: Creating hdfs://localhost/flume/logtest//LogCreateTest.1357224186509.tmp
13/01/03 09:43:18 INFO hdfs.BucketWriter: Renaming hdfs://localhost/flume/logtest/LogCreateTest.1357224186509.tmp to hdfs://localhost/flume/logtest/LogCreateTest.1357224186509
13/01/03 09:43:18 INFO hdfs.BucketWriter: Creating hdfs://localhost/flume/logtest//LogCreateTest.1357224186510.tmp
13/01/03 09:43:18 INFO hdfs.BucketWriter: Renaming hdfs://localhost/flume/logtest/LogCreateTest.1357224186510.tmp to hdfs://localhost/flume/logtest/LogCreateTest.1357224186510 
```

从时间戳可以看出，它大约每 5 秒左右创建一个文件。这会创建许多小文件。

我希望能够以更大的时间间隔（90 秒）创建文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T10:54:35.747

重写配置文件指定更完整的参数选择就可以了。此示例将在 10k 条记录或 10 分钟后写入，以先到者为准。此外，我从内存通道更改为文件通道，以帮助提高数据流的可靠性。

```
agent1.sources = source1
agent1.sinks = sink1
agent1.channels = channel1

# Describe/configure source1                                                                                                                                                                                                                 
agent1.sources.source1.type = exec
agent1.sources.source1.command = tail -f /home/cloudera/LogCreator/fortune_log.log

# Describe sink1                                                                                                                                                                                                                             
agent1.sinks.sink1.type = hdfs
agent1.sinks.sink1.hdfs.path = hdfs://localhost/flume/logtest/
agent1.sinks.sink1.hdfs.filePrefix = LogCreateTest
# Number of seconds to wait before rolling current file (0 = never roll based on time interval)                                                                                                                                              
agent1.sinks.sink1.hdfs.rollInterval = 600
# File size to trigger roll, in bytes (0: never roll based on file size)                                                                                                                                                                     
agent1.sinks.sink1.hdfs.rollSize = 0
#Number of events written to file before it rolled (0 = never roll based on number of events)                                                                                                                                                
agent1.sinks.sink1.hdfs.rollCount = 10000
# number of events written to file before it flushed to HDFS                                                                                                                                                                                 
agent1.sinks.sink1.hdfs.batchSize = 10000
agent1.sinks.sink1.hdfs.txnEventMax = 40000
# -- Compression codec. one of following : gzip, bzip2, lzo, snappy                                                                                                                                                                          
# hdfs.codeC = gzip                                                                                                                                                                                                                          
#format: currently SequenceFile, DataStream or CompressedStream                                                                                                                                                                              
#(1)DataStream will not compress output file and please don't set codeC                                                                                                                                                                      
#(2)CompressedStream requires set hdfs.codeC with an available codeC                                                                                                                                                                         
agent1.sinks.sink1.hdfs.fileType = DataStream
agent1.sinks.sink1.hdfs.maxOpenFiles=50
# -- "Text" or "Writable"                                                                                                                                                                                                                    
#hdfs.writeFormat                                                                                                                                                                                                                            
agent1.sinks.sink1.hdfs.appendTimeout = 10000
agent1.sinks.sink1.hdfs.callTimeout = 10000
# Number of threads per HDFS sink for HDFS IO ops (open, write, etc.)                                                                                                                                                                        
agent1.sinks.sink1.hdfs.threadsPoolSize=100
# Number of threads per HDFS sink for scheduling timed file rolling                                                                                                                                                                          
agent1.sinks.sink1.hdfs.rollTimerPoolSize = 1
# hdfs.kerberosPrin--cipal Kerberos user principal for accessing secure HDFS                                                                                                                                                                 
# hdfs.kerberosKey--tab Kerberos keytab for accessing secure HDFS                                                                                                                                                                            
# hdfs.round false Should the timestamp be rounded down (if true, affects all time based escape sequences except %t)                                                                                                                         
# hdfs.roundValue1 Rounded down to the highest multiple of this (in the unit configured using                                                                                                                                                
# hdfs.roundUnit), less than current time.                                                                                                                                                                                                   
# hdfs.roundUnit second The unit of the round down value - second, minute or hour.                                                                                                                                                           
# serializer TEXT Other possible options include AVRO_EVENT or the fully-qualified class name of an implementation of the EventSerializer.Builder interface.                                                                                 
# serializer.*                                                                                                                                                                                                                               

# Use a channel which buffers events to a file                                                                                                                                                                                               
# -- The component type name, needs to be FILE.                                                                                                                                                                                              
agent1.channels.channel1.type = FILE
# checkpointDir ~/.flume/file-channel/checkpoint The directory where checkpoint file will be stored                                                                                                                                          
# dataDirs ~/.flume/file-channel/data The directory where log files will be stored                                                                                                                                                           
# The maximum size of transaction supported by the channel                                                                                                                                                                                   
agent1.channels.channel1.transactionCapacity = 1000000
# Amount of time (in millis) between checkpoints                                                                                                                                                                                             
agent1.channels.channel1.checkpointInterval 30000
# Max size (in bytes) of a single log file                                                                                                                                                                                                   
agent1.channels.channel1.maxFileSize = 2146435071
# Maximum capacity of the channel                                                                                                                                                                                                            
agent1.channels.channel1.capacity 10000000
#keep-alive 3 Amount of time (in sec) to wait for a put operation                                                                                                                                                                            
#write-timeout 3 Amount of time (in sec) to wait for a write operation                                                                                                                                                                       

# Bind the source and sink to the channel                                                                                                                                                                                                    
agent1.sources.source1.channels = channel1
agent1.sinks.sink1.channel = channel1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-25T12:49:10.483

根据org.apache.flume.sink.hdfs.BucketWriter的源码：

```
 /**
 * Internal API intended for HDFSSink use.
 * This class does file rolling and handles file formats and serialization.
 * Only the public methods in this class are thread safe.
 */
class BucketWriter {
  ...
  /**
   * open() is called by append()
   * @throws IOException
   * @throws InterruptedException
   */
  private void open() throws IOException, InterruptedException {
    ...
    // if time-based rolling is enabled, schedule the roll
    if (rollInterval > 0) {
      Callable<Void> action = new Callable<Void>() {
        public Void call() throws Exception {
          LOG.debug("Rolling file ({}): Roll scheduled after {} sec elapsed.",
              bucketPath, rollInterval);
          try {
            // Roll the file and remove reference from sfWriters map.
            close(true);
          } catch(Throwable t) {
            LOG.error("Unexpected error", t);
          }
          return null;
        }
      };
      timedRollFuture = timedRollerPool.schedule(action, rollInterval,
          TimeUnit.SECONDS);
    }
    ...
  }
  ...
   /**
   * check if time to rotate the file
   */
  private boolean shouldRotate() {
    boolean doRotate = false;

    if (writer.isUnderReplicated()) {
      this.isUnderReplicated = true;
      doRotate = true;
    } else {
      this.isUnderReplicated = false;
    }

    if ((rollCount > 0) && (rollCount <= eventCounter)) {
      LOG.debug("rolling: rollCount: {}, events: {}", rollCount, eventCounter);
      doRotate = true;
    }

    if ((rollSize > 0) && (rollSize <= processSize)) {
      LOG.debug("rolling: rollSize: {}, bytes: {}", rollSize, processSize);
      doRotate = true;
    }

    return doRotate;
  }
...
} 
```

和 org.apache.flume.sink.hdfs.AbstractHDFSWriter

```
public abstract class AbstractHDFSWriter implements HDFSWriter {
...
  @Override
  public boolean isUnderReplicated() {
    try {
      int numBlocks = getNumCurrentReplicas();
      if (numBlocks == -1) {
        return false;
      }
      int desiredBlocks;
      if (configuredMinReplicas != null) {
        desiredBlocks = configuredMinReplicas;
      } else {
        desiredBlocks = getFsDesiredReplication();
      }
      return numBlocks < desiredBlocks;
    } catch (IllegalAccessException e) {
      logger.error("Unexpected error while checking replication factor", e);
    } catch (InvocationTargetException e) {
      logger.error("Unexpected error while checking replication factor", e);
    } catch (IllegalArgumentException e) {
      logger.error("Unexpected error while checking replication factor", e);
    }
    return false;
  }
...
} 
```

hdfs 文件的滚动由 4 个条件控制：

1.  hdfs.rollSize
2.  hdfs.rollCount
3.  hdfs.minBlockReplicas（最高优先级，但通常不是导致滚动小文件的原因）
4.  hdfs.rollInterval

根据 BucketWriter.class 中的这些 if-segments 更改值

# c++ - 如何在具有相同键的c ++中总结多图中的所有元素

> ID：14141295
> 
> 赞同：1
> 
> 时间：2013-01-03T14:56:24.647
> 
> 标签：c++, multimap

请帮忙！。如何在具有相同键的 c++ 中总结多图中的所有元素。我有以下多张地图：

```
multimap <string,int> mymap; 
```

我想对特定字符串的所有值求和。任何方法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:41:24.697

这样的事情可能对你有用：

```
#include <string>
#include <map>
#include <numeric>
#include <functional>
#include <iostream>

struct plus2nd {
    template <typename T1, typename T2>
    inline T1 operator()(T1 t1, const T2 &t2) const {
        return t1 + t2.second;
    }
};

template <typename Map, typename Key, typename Value>
Value accumulate_range(const Map & map, const Key & key, Value init)
{
    typedef typename Map::const_iterator const_iterator;
    typedef typename Map::value_type value_type;
    std::pair<const_iterator, const_iterator> range = map.equal_range(key);
    return std::accumulate(range.first, range.second, init, plus2nd());
}

int main()
{
    std::multimap<std::string, int> mymap;
    mymap.insert(std::multimap<std::string, int>::value_type("A", 1));
    mymap.insert(std::multimap<std::string, int>::value_type("B", 3));
    mymap.insert(std::multimap<std::string, int>::value_type("A", 4));
    mymap.insert(std::multimap<std::string, int>::value_type("B", 4));
    std::cout << "Sum of A: " << accumulate_range(mymap, "A", 0) << std::endl;
    std::cout << "Sum of B: " << accumulate_range(mymap, "B", 0) << std::endl;
} 
```

也可以看看：

*   [标准::累积](http://en.cppreference.com/w/cpp/algorithm/accumulate)
*   [std::multimap::equal_range](http://en.cppreference.com/w/cpp/container/multimap/equal_range)
*   [如何为关联容器应用 std::accumulate 算法？](https://stackoverflow.com/questions/6935118/how-to-apply-stdaccumulate-algorithm-for-associative-containers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:13:31.690

你的累积函数不会那样工作，因为你的地图提供了第一和第二的迭代器，你只想总结它->第二。您必须编写自己的 sum 函数并将其传递给 accumlute。已经有一个主题对此进行了描述，请参阅Matthieu M 的答案的多图[累积值。](https://stackoverflow.com/questions/3112234/multimap-accumulate-values)

**编辑**：以下应该可以解决您的问题。

```
int map_acc(int lhs, const std::pair<std::string, int> & rhs)
{
  return lhs + rhs.second;
}

std::pair<std::multimap<std::string,int>::const_iterator, std::multimap<std::string,int>::const_iterator> range = mymap.equal_range("somekey");
int result = std::accumulate(range.first, range.second, 0, &map_acc); 
```

**编辑 2：**如果您想要更通用的方法，请选择 Vlad Lazarenko 的答案。但考虑到你的问题，这可能是矫枉过正。

# objective-c - 为 NavigationBar 使用 640 像素宽度的图像

> ID：14141297
> 
> 赞同：0
> 
> 时间：2013-01-03T14:56:34.187
> 
> 标签：objective-c, xcode

我想为导航栏使用分辨率为 640x88 像素的图片，但由于屏幕分辨率只有 320 像素宽度，因此只能看到一半的图片。

如果我使用 320 像素宽度的图片，它会很模糊。

也许有人可以告诉我如何更改应用程序分辨率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:01:08.160

You need to name the image properly to tell the Framework which is the retina and non retina version:

*   myImage.png - normal version
*   myImage@2x.png - retina version

Load the image normally (without the @2x), the framework will choose the proper version by itself:

```
 [self.navigationController.navigationBar 
         setBackgroundImage:[UIImage imageNamed:@"myImage.png"] 
              forBarMetrics:UIBarMetricsDefault]; 
```

# c# - 在 Windows 窗体 c# 中显示包含 iFrame 的 html

> ID：14141303
> 
> 赞同：0
> 
> 时间：2013-01-03T14:56:58.783
> 
> 标签：c#, .net, winforms, webbrowser-control

我正在使用 c# 创建一个窗口应用程序以及一个 Web 应用程序。场景如下：
1\. 管理员将使用网站上的所见即所得编辑器（我正在使用 tinyMCE）发布消息
2\. 用户将拥有 Windows 窗体，该窗体将下载消息并将其显示在窗体上。
我采用了[webBrowser](http://msdn.microsoft.com/en-us/library/aa752040%28VS.85%29.aspx)控件来显示它。它可以很好地显示html（带图片的格式化文本）。当我们要在其上显示视频时会出现问题。

我为此使用以下代码： webBrowser1.Navigate("about:blank");

```
 HtmlDocument doc = this.webBrowser1.Document;
            doc.Write(String.Empty);
            string strHTML="&lt;p&gt;&lt;iframe src=&quot;http://www.youtube.com/embed/xXdDjnVM1kI&quot; frameborder=&quot;0&quot; width=&quot;425&quot; height=&quot;350&quot;&gt;&lt;/iframe&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;color: #ff0000; font-size: xx-large;&quot;&gt;Hi, &lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;color: #33cccc; font-size: large;&quot;&gt;Enjoy Ganganam Style&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;";
            string strDecoded=System.Net.WebUtility.HtmlDecode(strHTML);             
            webBrowser1.DocumentText = strDecoded; 
```

它在运行时向我显示安全警报： ![错误信息](../Images/7247c7a39e02359e3658587fff56a5d4.png)

当我在受信任的站点中添加这些站点时，它工作正常。但我想摆脱这些安全警告。为此我已经尝试过`webBrowser1.ScriptErrorsSuppressed = true;`，但它也不起作用。并且还尝试[了如何以编程方式对 WebBrowser 控制安全警报回答“是”](https://stackoverflow.com/questions/12999735/how-to-programmatically-answer-yes-to-webbrowser-control-security-alert)。 然后 iFrame 如下所示： 但是
我 有 Adob​​e Flash Player，我可以通过在受信任的站点中手动添加警告站点来播放视频。`webBrowser1.ScriptErrorsSuppressed = true;`![错误](../Images/8fabc91642b381d6a868da92b7223547.png)

有什么选择可以避免这些并播放视频吗？任何形式的帮助和建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:04:26.433

您可以通过[禁用增强的安全性](http://blogs.technet.com/b/chenley/archive/2011/03/10/how-to-turn-off-ie-esc.aspx)或将页面添加到[受信任区域](http://msdn.microsoft.com/en-us/library/ms537181%28v=vs.85%29.aspx#programmatic)来解决此问题。

# javascript - 通过jQuery更改链接href

> ID：14141307
> 
> 赞同：5
> 
> 时间：2013-01-03T14:57:02.970
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何使用 jQuery 更改超链接的 href](https://stackoverflow.com/questions/179713/how-to-change-the-href-for-a-hyperlink-using-jquery)

我正在使用 Drupal 和系统生成我的标题。

例如

```
 <a class="jquery-once-3-processed" id="quicktabs-tab-galeri-1" 
href="/?q=node&amp;qt-galeri=1#qt-galeri">NEWS</a> 
```

`href`我想通过 jQuery更改此链接。我怎样才能做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-03T14:58:34.060

```
$("#quicktabs-tab-galeri-1").attr("href", new_href); 
```

那应该对你有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T14:59:48.043

```
$('#quicktabs-tab-galeri-1').attr('href', 'YOUR_NEW_HREF'); 
```

这将选择 id*为 quicktabs-tab-galeri-1*的元素并更改其*href*属性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-03T15:00:00.463

你可以试试：

```
$('#quicktabs-tab-galeri-1').attr("href", "http://yournewlink.com"); 
```

# node.js - 在同步与异步上与 node.js 概念作斗争

> ID：14141308
> 
> 赞同：0
> 
> 时间：2013-01-03T14:57:03.437
> 
> 标签：node.js, express

我来自 PHP 背景并开始使用 node.js。大多数事情我都做得很好，但是当涉及到同步与异步和范围时，有些事情我很难理解。

这是一个非常简单的例子：

```
app.get('/register/:invite_id?' function(req, res) {
    var agent = superagent.agent(); 
    var form = {};

    agent.post('127.0.0.1/invite/' + req.params.invite_id + '/details')
         .end(function(invite_error, invite_details) {
             form.email = invite_details.body.user.email;
             //I can console.log form.email here
         });

    // I cannot console.log form.email here.. i get undefined.
    // I need to access form.email here, so I can pre-populate my form field below...
    // Sometimes however that agent.post may take 2-3 seconds

    res.render('user/register', {
        form: form
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:00:30.177

您必须将对该函数的调用移至`render`帖子回调函数中带有注释的行：

```
app.get('/register/:invite_id?' function(req, res) {
    var agent = superagent.agent(); 
    var form = {};

    agent.post('127.0.0.1/invite/' + req.params.invite_id + '/details')
         .end(function(invite_error, invite_details) {
             form.email = invite_details.body.user.email;
             res.render('user/register', {
                  form: form
             });
         });
}); 
```

这样，`form`变量就可以访问并且可以呈现给响应流。

一般来说，我还建议您熟悉闭包的概念（简单地说，闭包是作为参数或返回值传递的函数）。

*注意：我**知道**闭包与我上面写的略有不同，但我认为对于初学者来说，这比防弹解释更容易掌握。*

有关闭包的介绍，您可以从[什么是“闭包”开始？](https://stackoverflow.com/questions/36636/what-is-a-closure)

# c# - 我的控制器中的非静态字段、方法或属性需要对象引用

> ID：14141323
> 
> 赞同：3
> 
> 时间：2013-01-03T14:57:57.670
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

> **可能重复：**
> [非静态字段、方法或属性需要对象引用](https://stackoverflow.com/questions/3775721/an-object-reference-is-required-for-the-non-static-field-method-or-property)

我有一个非静态字段：

```
private IDictionary<string, string> _mappings = 
    new Dictionary<string, string>(StringComparer.InvariantCultureIgnoreCase) 
```

我想在这样的动作中使用：

```
public static string GetMimeType(string extension)
{
    //...
    return _mappings.TryGetValue(extension, out mime) ? 
        mime : "application/octet-stream";
} 
```

编译器抱怨：

> return 语句中的非静态字段、方法或属性需要对象引用。

我怎样才能引用这个字段？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-03T14:59:53.943

您不能从静态成员访问实例成员，因此您有 2 个选择。

1.  使方法成为实例方法（去掉`static`关键字）
2.  将字段设为静态（添加`static`关键字）

您选择哪个取决于该字段是否应在所有实例之间共享。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:01:50.863

我认为编译器在这里很清楚：您的 GetMimeType 方法是静态方法，但 _mappings 变量未声明为静态（非静态或实例字段/变量）。

如果要使用上面显示的映射变量，请执行以下操作：

```
private static IDictionary<string, string> _mappings = new Dictionary<string, string>(StringComparer.InvariantCultureIgnoreCase) 
```

编辑：正如评论者在下面指出的那样，您必须小心这实际上是您想要的行为。静态成员意味着所有实例都将共享这个相同的映射变量，并且可以覆盖存在的数据。如果您希望每个类有一个映射变量，那么您应该将您的方法更改为实例方法（通过删除 static 关键字），如上面的答案中所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:10:56.400

如果您只想要一个填充一次并且此后不再修改的值字典，那么您可以做的是将字典设为静态并将其填充到静态构造函数中。

# php - MYSQL PHP 将表值添加为行

> ID：14141326
> 
> 赞同：0
> 
> 时间：2013-01-03T14:58:05.817
> 
> 标签：php, mysql, select, join

我正在尝试加入 2 个 MySQL 表，但我无法帮助自己使用在线示例。

该表`dat_eb_field_values`包含 3 行：registrant_id、field_id 和 field_value。

我的第二个表：`dat_eb_registrants`包含普通行，例如 user_id、first_name、last_name 等。

我正在尝试将这 2 个表放在一起，以便可以像使用`dat_eb_registrants`.

目前我正在使用以下方法，但由于未连接查询，因此无法对 table 中 field_value 的输出进行排序`dat_eb_field_values`。

```
$result = mysql_query("SELECT user_id,first_name,last_name,email FROM `dat_eb_registrants`") 
while ($row = mysql_fetch_row($result)) {

    $result1 = mysql_query("SELECT field_value FROM field_values WHERE (field_id = 53) AND (user_id = $row[0])"); $r1 = mysql_fetch_row($result1); echo $r1[0];
    echo $row[2];
    $result2 = mysql_query("SELECT field_value FROM dat_eb_field_values WHERE (field_id = 54) AND (user_id = $row[0])"); $r2 = mysql_fetch_row($result2); echo $r2[0];
} 
```

以此类推结束……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:05:17.433

也许只是使用连接？尝试以下查询：

```
SELECT users.user_id, users.user_name, users.user_email, field_values.field_value 
FROM users LEFT JOIN field_values ON users.user_id=field_values.user_id 
```

您也可以在其后面附加 WHERE 子句，例如：

`WHERE field_values.field_id='53'`

如果您需要更多关于 JOIN 的解释，请参阅这个很好的答案： [https ://stackoverflow.com/a/5874895/586859](https://stackoverflow.com/a/5874895/586859)

当你运行它时，你可以像往常一样遍历你的结果，但你的所有值都应该包含在一个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:02:31.453

怎么样：

```
select * from users join field_values using( user_id ) where field_id in (53,54); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:04:21.217

[JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html) can help you here:

`SELECT u.user_id,u.user_name,u.user_email,f.field_value FROM users u LEFT JOIN field_values f ON f.field_id=u.user_id`

This is assuming that `field_id` matches `user_id`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T15:06:19.227

我想你想要的是这样的

```
select u.*, v1.field_value as field_53, v2.field_value as field_54 
from users u 
join values as v1 on v1.user_id = u.user_id AND v1.field_id = 53 
join values as v2 on v2.user_id = u.user_id AND v2.field_id = 54; 
```

虽然这是一个双重连接，而且我相信这很可怕......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T15:43:38.487

正如每个人所说，这`INNER JOIN`无疑是你所追求的，它看起来像一个双重连接。

为了加快您想要的任何结果，请确保您索引要加入的列。这可以将 30 秒的查询更改为 0.3 秒的查询。

# struts2 - 使用struts-jquery的execAndWait拦截器处理文件时找不到文件源

> ID：14141329
> 
> 赞同：1
> 
> 时间：2013-01-03T14:58:08.593
> 
> 标签：struts2, struts2-jquery

使用`struts-jquery`，我创建了一个页面，允许用户上传 excel 文件，并在不刷新页面的情况下显示内容。

当我尝试使用`execAndWait`拦截器将等待页面显示为远程页面时，我收到一个异常，告诉我它找不到文件的源。

有人可以提供答案吗？

**更新** 我上传的文件对象出现空指针异常

> java.io.FileInputStream.（未知来源）的 java.lang.NullPointerException

当我尝试将文件对象（来自jsp页面）作为以下行的参数传递时

```
Workbook.getWorkbook(file); 
```

这是我在 struts.xml 中的操作

```
<action name="readExcel" class="th.co.gosoft.gosd.action.ImportDataAction" method="readExcel">
        <interceptor-ref name="execAndWait">
            <param name="delaySleepInterval">500</param>
        </interceptor-ref>
        <result name="wait">/jsp/goSD/wait.jsp</result>
        <result name="success">/jsp/goSD/SearchTable/importPreview.jsp</result>
    </action> 
```

但是当我删除

> 拦截器引用名称="execAndWait"

一切安好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:49:28.713

这是因为您只使用`execAndWait`拦截器来执行您的操作。您还需要定义`defaultStack`。

```
<action name="readExcel" class="th.co.gosoft.gosd.action.ImportDataAction" method="readExcel">
        <interceptor-ref name="defaultStack" />
        <interceptor-ref name="execAndWait">
            <param name="delaySleepInterval">500</param>
        </interceptor-ref>
        <result name="wait">/jsp/goSD/wait.jsp</result>
        <result name="success">/jsp/goSD/SearchTable/importPreview.jsp</result>
</action> 
```

# visual-studio - 带有 -source 参数的 NuGet 安装包未下载 nuget.org

> ID：14141334
> 
> 赞同：0
> 
> 时间：2013-01-03T14:58:24.407
> 
> 标签：visual-studio, nuget

我的公司托管我们自己的内部 NuGet 包存储库，供我们上传我们自己的私有专有包。我们仍然使用官方 NuGet.org 存储库来下载所有公共包。我们还在我们的项目中启用[包还原](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)，以允许我们的构建下载丢失的包。

我们已经将我们自己的 NuGet 存储库添加到列表中，`Tools > Library Package Manager > Package Manager Settings > Package Sources`并且我们还在列表中保留了默认的（[NuGet 官方包源](https://nuget.org/api/v2/)）。我们在文件中也有我们自己的 repo`NuGet.targets`作为一个`PackageSource`元素。不过，官方 repo**不**包含`PackageSource`在该文件中。

这已经为我们工作了几个月。当我们将自己的包的新版本发布到我们的仓库时，它们对项目是可见的。[此外，当新的公共包可用时，我们的项目在nuget.org](http://nuget.org/)上找到它们没有任何问题。

然而，就在最近，该版本开始无法从官方 repo 下载包。当我构建解决方案时，每个项目的输出都包含以下行，这些项目引用了我们未在自己的存储库中托管的缺失包：

```
C:\code\MyCodebase\.nuget\nuget.targets(79,9): error MSB3073: The command ""C:\code\MyCodebase\.nuget\nuget.exe" install "C:\code\MyCodebase\MyProject\packages.config" -source "http://nuget.example.com/repo/" -o "C:\code\MyCodebase\packages"" exited with code -1. 
```

如果我自己从命令行运行该命令，我会看到这个输出呈鲜红色：

```
Unable to find version '2.5.10.11092' of package 'NUnit'.
Unable to find version '1.2.0' of package 'Common.Logging'. 
```

我认为这是因为我们的 repo 不包含任何 NUnit 包，并且`-Source`参数没有使用官方 repo。

我的问题是：为什么它曾经有效？我疯了吗？还是`NuGet.exe`在最近的更新中行为发生了变化？我的印象是 NuGet**总是**使用官方回购作为最终的后备方案，直到昨天才出现这种情况。

将官方 NuGet 存储库添加到`NuGet.targets`文件中的唯一解决方案是什么？在同一解决方案中处理私有和公共包依赖项的最佳方法是什么？我想避免将我们使用的所有公共包上传到我们自己的仓库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:52:37.883

nuget.target 中的一条评论指出，您需要将官方提要添加到列表中

<!-- 用于恢复包的包源。默认使用 %APPDATA%\NuGet\NuGet.Config 下的注册源 -->

<!-- 如果包源将排除官方NuGet包源（https://nuget.org/api/v2/）已指定且未出现在列表中 -->

您最近是否从 %appdata%\local\nuget\cache 清除了 nuget 缓存？当我在我的盒子上尝试这些步骤时，如果缺少的包（来自本地 repo）在本地 nuget 缓存中，它可以安装依赖项。

# sql - 为另一列sql的每个值计算列的百分比

> ID：14141336
> 
> 赞同：0
> 
> 时间：2013-01-03T14:58:29.660
> 
> 标签：sql

I want to calculate the percentage of elected people for each member type, I was able to do this:

```
SELECT Member, COUNT(Name) * 100 / 
    (SELECT COUNT(*) FROM 'results' WHERE Member= '1' ) AS 'perc' 
FROM 'results' 
    WHERE elected='yes' AND Member = '1' 
```

但我想为所有成员值做这件事（也是'0'）

我的表如下所示：

```
Name     member     Elected
----------------------------
joe      0          yes
ann      1          no
jef      0          no 
```

这是我想要的结果：

```
Member    Percentage
---------------------
0         50%
1         0% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:03:30.597

你应该能够使用这样的东西：

```
select member,
  coalesce(count(case when elected = 'yes' then 1 end)/count(*), 0) * 100 Percentage
from results
group by member 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/7651e/5)

结果：

```
| MEMBER | PERCENTAGE |
-----------------------
|      0 |         50 |
|      1 |          0 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:04:54.750

```
SELECT Member, 
   Sum(Case When elected='yes' Then 1 
            Else 0 End) / COUNT(*) 'perc' 
FROM 'results' 
group by Member 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:07:53.773

您的查询应该是

```
SELECT Member, 
(COUNT(Case When elected='yes' Then 1 Else NULL End) / COUNT(*)) * 100 'perc' 
FROM 'results'     
group by Member 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T15:10:20.383

尝试**`Group By Member`**

如果您使用[sqlfiddle.com](http://sqlfiddle.com/)，那么很容易为您提供帮助。

从**bluefeet**偷东西给你

```
select member,
  concat(FLOOR(coalesce(count(case when elected = 'yes' then 1 end)/count(*), 0) * 100), '%')  Percentage
from results
group by member 
```

# c# - 模型不绑定到操作

> ID：14141338
> 
> 赞同：0
> 
> 时间：2013-01-03T14:58:32.513
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-mvc-4, t4mvc

谁能帮我找出为什么这不起作用：

模型：

```
public class CreateAdCategoryViewModel
{
    [Display(ResourceType = typeof(HeelpResources), Name = "AdViewModel_Category_Label")]
    [Required(ErrorMessageResourceName = "AdViewModel_Required_ErrorMsg", ErrorMessageResourceType = typeof(HeelpResources))]
    public int Category_Id { get; set; }

    public IEnumerable<SelectListItem> CategoryList { get; set; }

    public CreateAdCategoryViewModel(IEnumerable<SelectListItem> categoryList)
    {
        CategoryList = categoryList;
    }
} 
```

控制器：

```
 [Authorize]
    [HttpPost]
    public virtual PartialViewResult CreateAdCategoryType(CreateAdCategoryViewModel model)
    {
        // Build the ViewModel to return to the View with the Category Drop List
        return PartialView(new CreateAdCategoryTypeViewModel(CategoryDropDownList()));
    } 
```

看法：

```
@model Heelp.ViewModels.CreateAdCategoryViewModel

@using (Ajax.BeginForm(MVC.Ad.CreateAdCategoryType(), new AjaxOptions { UpdateTargetId = "category_type", InsertionMode = InsertionMode.Replace }, new { @id = "categoryForm" }))
{
    @Html.DisplayNameFor(m => m.Category_Id)
    @Html.DropDownListFor(m => m.Category_Id, Model.CategoryList, HeelpResources.DropdownlistCategoryFirstRecord)
    @Html.ValidationMessageFor(m => m.Category_Id)
} 
```

提交是由 Javascript 进行的：

```
$(document).ready(function ()
{
    $("#Category_Id").change(function ()
    {
        $("#categoryForm").submit();
    });
}); 
```

这里的问题是提交永远找不到`CreateAdCategoryType`以模式为参数的动作，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:28:04.353

当涉及到进入控制器的模型时，它们需要是 POCO。如果没有无参数构造函数，MVC 框架根本不知道如何创建实例。请记住，它需要为您的模型补充水分。它不知道该怎么做

```
new CreateAdCategoryTypeViewModel(CategoryDropDownList()) 
```

它需要创建一个实例并发现（反映）所有公共属性并对其进行水合。在您的情况下，即使它（框架）找到构造函数，它也不知道要向它提供什么数据。虽然，我认为，它只寻找无参数的构造函数。

# git - git status - 列出最后修改日期

> ID：14141344
> 
> 赞同：40
> 
> 时间：2013-01-03T14:58:41.117
> 
> 标签：git

使用 git，是否可以在路径旁边列出未暂存文件的最后修改日期？使用例如。

`git status`

或者

`git diff --name-only`

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-01-03T15:56:13.260

不直接，但您可以使用管道：

> 注意：原始答案根据评论更新

Linux：

```
git status -s | while read mode file; do echo $mode $file $(stat -c %y $file); done 
```

视窗：

```
git status -s | while read mode file; do echo $mode $(date --reference=$file +"%Y-%m-%d %H:%M:%S") $file; done 
```

OSX（[来源](http://stackoverflow.com/a/10198387/2486953)）：

```
git status -s | while read mode file; do echo $mode $(stat -f "%Sm" $file) $file; done|sort 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-07-01T08:32:50.923

注意：我需要得到按日期排序的修改文件，所以我修改了回显：

```
git status -s | while read mode file; \
  do echo $mode $(stat -c %y $file) $file; \
done|sort -k1,4 
```

一条线：

```
 git status -s | while read mode file; do echo $mode $(stat -c %y $file) $file; done|sort -k1,4 
```

通过首先回显日期（`stat`），然后是文件，我能够从最旧到最新的修改进行排序。

* * *

[Sam Hasler](https://stackoverflow.com/users/2541/sam-hasler)[在评论中](https://stackoverflow.com/questions/14141344/git-status-list-last-modified-date/24505757#comment50914510_24505757)补充道：

**要在模式下保留空格**：

```
IFS=''; git status -s | while read -n2 mode; read -n1; read file; do echo $mode $(stat -c %y "$file") $file; done|sort 
```

那是：

```
IFS=''; git status -s | while read -n2 mode; read -n1; read file; \ 
  do echo $mode $(stat -c %y "$file") $file; \ 
done|sort 
```

# java - 我不明白这个 Java 代码（位图字体）

> ID：14141349
> 
> 赞同：0
> 
> 时间：2013-01-03T14:58:50.363
> 
> 标签：java, arrays

我正在分析一个开源游戏代码，但我不理解 setDefaultSpecialChars() 方法和 setDefaultSmallAlphabet()。这些陈述对我`fontCharTable[':']=1 + indexOf_Point;`来说`fontCharTable['a'+i] = indexOf_a + i;`是新的。

```
 import javax.microedition.midlet.*;
 import javax.microedition.lcdui.*;

public class GFont {

public int[] fontCharTable = new int[256];

public void setFontCharTableDefaults(boolean specialChars) {
    setDefaultSmallAlphabet(0);
    setDefaultBigAlphabet(0);
    setDefaultDigits(27);
    if (specialChars) {
        setDefaultSpecialChars(37);
    }
}

public void setDefaultSpecialChars(int indexOf_Point) {
    fontCharTable['.']=0 + indexOf_Point;
    fontCharTable[':']=1 + indexOf_Point;
    fontCharTable[',']=2 + indexOf_Point;
    fontCharTable[';']=3 + indexOf_Point;
    fontCharTable['?']=4 + indexOf_Point;
    fontCharTable['!']=5 + indexOf_Point;
    fontCharTable['(']=6 + indexOf_Point;
    fontCharTable[')']=7  + indexOf_Point;
    fontCharTable['+']=8 + indexOf_Point;
    fontCharTable['-']=9 + indexOf_Point;
    fontCharTable['*']=10 + indexOf_Point;
    fontCharTable['/']=11 + indexOf_Point;
    fontCharTable['=']=12  + indexOf_Point;
    fontCharTable['\'']=13 + indexOf_Point;
    fontCharTable['_']=14 + indexOf_Point;
    fontCharTable['\\']=15 + indexOf_Point;
    fontCharTable['#']=16 + indexOf_Point;
    fontCharTable['[']=17 + indexOf_Point;
    fontCharTable[']']=18 + indexOf_Point;
    fontCharTable['@']=19 + indexOf_Point;
    fontCharTable['ä']=20 + indexOf_Point;
    fontCharTable['ö']=21 + indexOf_Point;
    fontCharTable['ü']=22 + indexOf_Point;
    fontCharTable['Ä']=fontCharTable['ä'];
    fontCharTable['Ö']=fontCharTable['ö'];
    fontCharTable['Ü']=fontCharTable['ü'];
}

public void setDefaultSmallAlphabet(int indexOf_a) {
    for (i=0; i<26; i++) {
        fontCharTable['a'+i] = indexOf_a + i;
    }
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:00:42.777

它只是一个普通的数组元素赋值表达式——但使用从`char`to的隐式转换`int`。所以拿这个：

```
fontCharTable['+']=8 + indexOf_Point; 
```

现在将其视为：

```
char indexAsChar = '+';
int indexAsInt = indexAsChar; // Use implicit conversion
fontCharTable[indexAsInt] = 8 + indexOf_Point; 
```

现在更清楚了吗？

同样是这样：

```
for (i=0; i<26; i++) {
    fontCharTable['a'+i] = indexOf_a + i;
} 
```

可以写成：

```
for (i=0; i<26; i++) {
    int a = 'a';
    int index = a + i'
    fontCharTable[index] = indexOf_a + i;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:01:32.627

它们可能看起来很奇怪，但它们所做的只是使用字符作为索引。

如果您想查看它们在做什么，您可以尝试单步调试调试器中的代码。

# python - 即使扩展了模板，为什么还要为每个模板加载静态文件？

> ID：14141350
> 
> 赞同：26
> 
> 时间：2013-01-03T14:58:52.083
> 
> 标签：python, django, static, django-templates

我有一个**base.html**文件，其中包含一些*“随机”html*代码，并且我有以下代码：

```
{% load staticfiles %}
<!DOCTYPE html>
<html>
   <head>
      ... 
     {% block extra_js_top %}{% endblock %}
   </head>
   ...
</html> 
```

在我的**index.html**文件中，我扩展了**base.html**并加载了一些*额外的 javascript*文件：

```
{% extends "base.html" %}
...
{% block extra_js_top %}
   <script type="text/javascript" src="{% static "js/somejs.js" %}"></script>
{% endblock %} 
```

问题是由于静态变量，额外的 javascript 不会加载。即使我扩展了模板内部的**base.html**，它也不会加载`{% load staticfiles %}`。最后，我解决了`{% load staticfiles %}`在**index.html**处再添加一个的问题。

我的问题是为什么我们应该`{% load staticfiles %}`为我们使用的每个模板添加，即使我们扩展了一个已经拥有它的文件？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2017-01-27T14:03:46.020

根据 Django 的最新[文档](https://docs.djangoproject.com/en/dev/ref/templates/language/#custom-libraries-and-template-inheritance)，这样做*是为了可维护性和完整性*

> 当您加载自定义标签或过滤器库时，标签/过滤器仅对当前模板可用 - 而不是模板继承路径上的任何父模板或子模板。
> 
> 例如，如果模板 foo.html 具有 {% load humanize %}，则子模板（例如，具有 {% extends "foo.html" %} 的模板）将无法访问humanize 模板标签和过滤器。子模板负责自己的 {% load humanize %}。
> 
> 这是为了可维护性和健全性而设计的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T15:16:45.973

因为这就是模板标签的工作方式。您需要为使用它们的每个模板文件加载每个库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-23T17:10:32.573

您需要`{% load staticfiles %}`在任何希望进行 url 扩展的地方都需要它是合乎逻辑的。`base.html`如果您在两个&中都发生了这种情况，则`index.html`必须在两个地方都包含它（正如您已经想到的那样）。

# asp.net - 无法使用 WCF 休息服务删除所有记录

> ID：14141358
> 
> 赞同：0
> 
> 时间：2013-01-03T14:59:05.037
> 
> 标签：asp.net, wcf

我正在使用 WCF Rest 服务。我正在尝试从名为“_altProductVersionEntityRepository”的存储库中删除多条记录这是我下面的完整代码

```
 public Result UpdateProductObject(ProductObjectToSave prodSave)
    {

        IUnitOfWork unitOfWork = new UnitOfWork((IObjectContext)_objectSetFactory);

        var versions = prodSave.VersionDetails;
        var altVersions = prodSave.AlternateVersionDetails;

        foreach (var versionDetail in versions)
        {
            var detail = versionDetail;

            var dbVersionentity = _productVersionEntityRepository.FirstOrDefault(x => x.Id == detail.Id);

            var altVersionEntity = _altProductVersionEntityRepository.FirstOrDefault(x => x.ProductVersionEntityId == detail.Id);

            if (dbVersionentity == null)
            {
                dbVersionentity = new ProductVersionEntity();
                _productVersionEntityRepository.Insert(dbVersionentity);
                dbVersionentity.Id = GetNextTableId("vProductVersion");
                dbVersionentity.CreatedOn = DateTime.Now;

            }

            dbVersionentity.Name = detail.Name;
            dbVersionentity.Code = detail.Code;

            if (detail.Id > 0){

            _productVersionEntityRepository.Update(dbVersionentity);
                if (altVersionEntity != null){
                    _altProductVersionEntityRepository.Delete(altVersionEntity);
                }
            }

        }

        try
        {
            unitOfWork.Commit();
        }
        catch (Exception e)
        {

            return new Result() { Status= e.Message };
        }

        return new Result() { Status= = "Record updated successfully" };

    } 
```

在变量“altVersionEntity”中，我尝试从“_altProductVersionEntityRepository”存储库中找到第一条记录。在这个存储库中有多个记录，但它只删除单个记录，因为我在这里执行 FirstOrDefault。什么是删除所有记录的方法。我正在使用 FirstOrDefault 因为我只想删除记录，否则会抛出错误。删除多条记录的方法是什么？我还是 WCF 的新手，所以请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:42:48.217

我找到了自己的解决方案。我做什么我使用 find 方法而不是我在上面的代码中使用的 FirstOrDefault。我使用如下查找方法

```
 var altVersionEntity =
                _altProductVersionEntityRepository.Find(x => x.ProductVersionEntityId == detail.Id); 
```

然后我使用变量 altVersionEntity 并转换为列表，然后循环遍历它并从“altProductVersionEntityRepository”存储库中删除记录，如下所示

```
var tempList = altVersionEntity.ToList();
                    for (i = 0; i <tempList.Count ; i++)
                    {
                        _altProductVersionEntityRepository.Delete(tempList[i]);
                    } 
```

# sql - SQL删除重复排序

> ID：14141364
> 
> 赞同：1
> 
> 时间：2013-01-03T14:59:24.023
> 
> 标签：sql, sql-server

有没有办法在 SQL 中进行以下投影？删除第二列不根据排序更改的行？

```
FROM          TO
1   504     1   504
2   508     2   508
3   504     3   504
4   504     7   508
5   504     8   504
6   504     9   508
7   508     10  504
8   504     15  508
9   508     16  504
10  504         
11  504         
12  504         
13  504         
14  504         
15  508         
16  504         
17  504         
18  504         
19  504 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:07:55.390

根据您使用的 RDBMS，您可以使用 LAG 和 LEAD 分析函数来查看上一行/下一行。

```
SELECT
  a.* 
FROM (
  SELECT
    id
  , value
  , LAG(value) OVER (ORDER BY id) previous_value
  FROM some_table
) a
WHERE a.previous_value IS NULL OR a.value != a.previous_value 
```

在这里，内联视图将您的数据拉出，包括具有先前行值的列（按 id 排序时）。外部查询中的 WHERE 子句排除值与前一个相同的行（并确保包括显然具有 NULL previous_value 的第一行）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:14:55.807

要使用标准 SQL 执行此操作，您可以使用相关子查询。这个想法是获取以前的值，并且只保留与当前值不同的行：

```
select a.*
from (select t.*
             (select max(id) from t t2 where t2.id < t.id) as pevid
      from t
     ) a left outer join
     t aprev
     on a.previd = aprev.id
where aprev.value <> a.value or aprev.value is null 
```

This is really an implementation of the `lag()` function, but without window functions.

You can also write this using top/limit/rownum and doing an order by in the subquery:

```
select a.*
from (select t.*
             (select top 1 id from t t2 where t2.id < t.id order by id desc) as pevid
      from t
     ) a left outer join
     t aprev
     on a.previd = aprev.id
where aprev.value <> a.value or aprev.value is null 
```

This, in turn, can be simplified to remove the last join:

```
select a.*
from (select t.*
             (select top 1 val from t t2 where t2.id < t.id order by id desc) as pevval
      from t
     )
where a.prevval <> a.value or a.prevval is null 
```

# r - R中连续randomForest.predict调用的结果不一致

> ID：14141365
> 
> 赞同：2
> 
> 时间：2013-01-03T14:59:26.247
> 
> 标签：r, random-forest, predict

创建随机森林后，我用它来预测样本外的测试数据集。但是，连续调用 predict 会产生不同的结果：

```
pred<-predict(rf, test)
pred1<-predict(rf, test)
which(pred!=pred1)
[1]  327  436  492  555  560  738 1264 1336 1339 1521 1772 1775 1780 1820 1826
[16] 2018 2019 2022 2023 2031 2099 2104 2238 2267 2621 3021 3029 3376 3467 
```

关于我如何使这个不确定的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:24:55.370

当使用偶数个树时，预期结果是不确定的。来自[randomForest 文档](http://cran.r-project.org/web/packages/randomForest/randomForest.pdf)：

> 注意 2：任何关系都是随机断开的，因此如果不希望出现这种情况，请在 randomForest() 中使用奇数 ntree 来避免它。

因此，如果需要一致的结果，则必须使用奇数棵树。

# python - 将 cookie jar 分配给 QWebView 时出现分段错误

> ID：14141366
> 
> 赞同：1
> 
> 时间：2013-01-03T14:59:30.213
> 
> 标签：python, qt, qt4, pyqt, pyqt4

我正在尝试创建一个在所有打开的窗口中全局使用的 cookie jar，以便创建的任何 cookie 都可用。如果我右键单击链接并在新窗口中打开然后关闭该窗口，当我单击第一个窗口中的链接时，我会遇到段错误。

我猜这是因为它正在关闭的窗口中寻找饼干罐。所以任何关于如何正确实施的技巧都是一个很好的开始。

```
from PyQt4 import QtGui, QtCore, QtWebKit, QtNetwork

cookies = QtNetwork.QNetworkCookieJar()

class Browser(QtWebKit.QWebView):
    _windows = set()

    @classmethod
    def _removeWindow(cls, window):
        if window in cls._windows:
            cls._windows.remove(window)

    @classmethod
    def newWindow(cls):
        window = cls()
        cls._windows.add(window)
        return window

    def __init__(self, parent=None):
        QtWebKit.QWebView.__init__(self, parent)
        self.setAttribute(QtCore.Qt.WA_DeleteOnClose, True)
        self.settings().setAttribute(
            QtWebKit.QWebSettings.JavascriptEnabled, True)
        self.settings().setAttribute(
            QtWebKit.QWebSettings.JavascriptCanOpenWindows, True)
        self.page().networkAccessManager().setCookieJar(cookies)

    def closeEvent(self, event):
        self._removeWindow(self)
        event.accept()

    def createWindow(self, mode):
        window = self.newWindow()
        if mode == QtWebKit.QWebPage.WebModalDialog:
            window.setWindowModality(QtCore.Qt.ApplicationModal)
        window.show()
        return window

if __name__ == '__main__':
    import sys
    app = QtGui.QApplication(sys.argv)
    browser = Browser()
    browser.setUrl(QtCore.QUrl("http://google.com"))
    browser.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:08:53.690

尝试`QNetworkAccessManager.setCookieJar`获取`QNetworkCookieJar`管理 cookie 的句柄，如下所示：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtGui, QtCore, QtWebKit, QtNetwork

cookieJar = QtNetwork.QNetworkCookieJar()

networkAccessManager = QtNetwork.QNetworkAccessManager()
networkAccessManager.setCookieJar(cookieJar)

class myWebView(QtWebKit.QWebView):
    _windows = set()

    def __init__(self, parent=None):
        super(myWebView, self).__init__(parent)
        self.settings().setAttribute(QtWebKit.QWebSettings.JavascriptEnabled, True)
        self.settings().setAttribute(QtWebKit.QWebSettings.JavascriptCanOpenWindows, True)

        self.page().setNetworkAccessManager(networkAccessManager)

        self.load(QtCore.QUrl("http://www.example.com"))

    @classmethod
    def _removeWindow(cls, window):
        if window in cls._windows:
            cls._windows.remove(window)

    @classmethod
    def newWindow(cls):
        window = cls()
        cls._windows.add(window)
        return window

    def closeEvent(self, event):
        self._removeWindow(self)
        event.accept()

    def createWindow(self, webWindowType):
        window = self.newWindow()
        if webWindowType == QtWebKit.QWebPage.WebModalDialog:
            window.setWindowModality(QtCore.Qt.ApplicationModal)

        window.show()

        return window

class myWindow(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(myWindow, self).__init__(parent)

        self.centralwidget = QtGui.QWidget(self)

        self.webView = myWebView(self.centralwidget)

        self.pushButton = QtGui.QPushButton(self.centralwidget)
        self.pushButton.setText("New Window")
        self.pushButton.clicked.connect(lambda: self.webView.createWindow(QtWebKit.QWebPage.WebBrowserWindow))

        self.verticalLayout = QtGui.QVBoxLayout(self.centralwidget)
        self.verticalLayout.addWidget(self.pushButton)
        self.verticalLayout.addWidget(self.webView)

        self.setCentralWidget(self.centralwidget)

if __name__ == "__main__":
    import  sys

    app  = QtGui.QApplication(sys.argv)
    main = myWindow()
    main.show()
    sys.exit(app.exec_()) 
```

# python - 在 Python 中使用 SimpleCookie 管理令牌生命周期

> ID：14141373
> 
> 赞同：7
> 
> 时间：2013-01-03T14:59:44.600
> 
> 标签：python, cookies, wsgi

已经让令牌正常工作，它是这样设置的：

```
session_cookie = SimpleCookie()
session_cookie['key'] = any_string_value
session_cookie['key']["Path"] = '/'

headers = []
headers.extend(("set-cookie", morsel.OutputString())
    for morsel
    in session_cookie.values())

start_response(status, headers) 
```

我还能够读取令牌并提取我需要的信息：

```
# Get cookies
cookies = request.get_cookies()
#     Get current token from cookies
token   = cookies['token'].value 
```

现在，设置 cookie 过期的最佳方法是什么，我知道有 2 个可能的键：

1.  session_cookie['key']['max-age'] = "以秒为单位的时间"
2.  session_cookie['key']['expiration'] = "未来的日期"

我怎么知道令牌是否已过期或管理过期令牌的最佳方法是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:54:03.530

当您尝试获取令牌时，如果令牌不存在，您可以知道令牌是否已过期。

```
token   = cookies['token'].value #this will not exist 
```

当**过期日期过后**，浏览器会删除 cookie 以及与之相关的所有内容。

这样，在许多实现中，您甚至可以删除 cookie 或例如注销用户，但将 user_id cookie 的到期日期设置为过去的某个值（例如负数）。

现在据我了解，您需要一个策略来检测过期令牌服务器端，这可以通过双重验证来完成。例如，尝试为每个令牌存储一个唯一标识符，当您读取令牌时，服务器端尝试检查它是否已过期。用户也可以操纵他的 cookie，因此永远不要盲目相信 cookie 来存储重要数据或进行任何 user_id 简单验证。

我希望我有所帮助。

**编辑**

来自[rfc2109](https://www.rfc-editor.org/rfc/rfc2109.html)

> Max-Age=delta-seconds 可选。Max-Age 属性定义 cookie 的生命周期，以秒为单位。delta-seconds 值是十进制非负整数。在 delta-seconds 秒过去后，客户端应该丢弃 cookie。值为零表示应立即丢弃 cookie。

以及来自[wiki http cookie](http://en.wikipedia.org/wiki/HTTP_cookie#Expires_and_Max-Age)

> Expires 指令告诉浏览器何时删除 cookie。源自 RFC 1123 中使用的格式，日期以“Wdy, DD Mon YYYY HH:MM:SS GMT”的形式指定，[29] 指示此 cookie 将过期的确切日期/时间。作为将 cookie 过期设置为绝对日期/时间的替代方法，RFC 6265 允许使用 Max-Age 属性将 cookie 的过期设置为未来的秒间隔，相对于浏览器接收 cookie 的时间。

~~我建议使用 max-age ，因为可以省去设置日期等的一些麻烦。你只需计算一个间隔。~~

再读一点，我发现 IE < 9 不支持 max-age ，这意味着首选 expires

[最大年龄与过期](http://mrcoles.com/blog/cookies-max-age-vs-expires/)

那应该有帮助;-)

# html - 使用带有内联 CSS 的 CSS :before 和 :after 伪元素？

> ID：14141374
> 
> 赞同：174
> 
> 时间：2013-01-03T14:59:44.520
> 
> 标签：html, css, css-selectors, pseudo-element, inline-styles

我正在使用内联 CSS（即`style`属性中的 CSS）制作 HTML 电子邮件签名，我很好奇是否可以使用`:before`和`:after`伪元素。

如果是这样，我将如何使用内联 CSS 实现类似的东西？

```
td { text-align: justify; }
td:after { content: ""; display: inline-block; width: 100%; } 
```

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-01-03T15:22:50.990

您不能为伪元素指定内联样式。

这是因为伪元素，如伪类（请参阅我对[另一个问题](https://stackoverflow.com/questions/5293280/css-pseudo-classes-with-inline-styles)的回答），在 CSS 中使用选择器定义为文档树的抽象，无法用 HTML 表示。`style`另一方面，内联属性是在 HTML 中为特定元素指定的。

由于内联样式只能出现在 HTML 中，它们只会应用于定义它们的 HTML 元素，而不适用于它生成的任何伪元素。

顺便说一句，伪元素和伪类在这方面的主要区别在于默认继承的属性将由[*生成*元素继承](http://www.w3.org/TR/CSS21/generate.html#before-after-content)`:before`和`:after`从生成元素继承，而伪类样式根本不适用。例如，在您的情况下，如果您`text-align: justify`为元素放置内联样式属性`td`，它将被`td:after`. 需要注意的是，您不能`td:after`使用内联样式属性声明；您必须在样式表中执行此操作。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-11-29T15:04:45.873

如上所述：它不可能调用 css 伪类/内联元素。我现在做的是：给你的元素一个唯一的标识符，f.ex。一个 id 或一个独特的类。并写一个合适的`<style>`元素

```
<style>#id29:before { content: "*";}</style>
<article id="id29">
  <!-- something -->
</article> 
```

丑陋，但是什么内联css不是..？

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2014-04-29T10:39:32.313

您可以使用内联数据

```
 <style>   
 td { text-align: justify; }
 td:after { content: attr(data-content); display: inline-block; width: 100%; }
</style>

<table><tr><td data-content="post"></td></tr></table> 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2019-09-18T10:08:02.273

您不能在内联 css 中创建伪元素。

但是，如果您可以在样式表中创建伪元素，则可以通过为其父元素设置内联样式，然后使用inherit 关键字设置伪元素的样式来内联样式，如下所示：

```
<parent style="background-image:url(path/to/file); background-size:0px;"></p>

<style> 
   parent:before{
      content:'';
      background-image:inherit;
      (other)
   }
</style> 
```

有时这很方便。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-01-03T15:17:03.253

不，您不能像**David Thomas**所说的那样针对 inline-css 中 的[伪类](http://css-tricks.com/pseudo-class-selectors/)或[伪元素。](http://www.hongkiat.com/blog/pseudo-element-before-after/)有关更多详细信息，请参阅**BoltClock**关于**伪类**[的](https://stackoverflow.com/questions/5293280/css-pseudo-classes-with-inline-styles)答案

 ******> 不可以。style 属性仅定义给定 HTML 元素的样式属性。伪类是选择器家族的成员，不会出现在属性中......

我们也可以为**伪元素编写 use same**

> 不可以。style 属性仅定义给定 HTML 元素的样式属性。伪类和伪元素是选择器家族的成员，它们不会出现在属性中，因此您不能将它们内联样式。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-09-20T06:50:13.383

**是的，这是可能的**，只需为您在之后或之前添加的元素添加内联样式，示例

```
 <style>
     .horizontalProgress:after { width: 45%; }
 </style><!-- Change Value from Here -->

 <div class="horizontalProgress"></div> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-05-21T14:44:42.600

如前所述，**您不能使用内联元素来设置伪类的样式**。[前后](https://kolosek.com/css-before-and-after/)伪类是元素的状态，而不是实际元素。您只能为此使用 JavaScript。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-05-04T18:47:37.777

编辑：如果您可以访问样式表，则可以内联传递变量值，然后在您的样式表中，使用`inherit`您要操作的伪元素属性的值：

**HTML**

```
<div style="color: whitesmoke;">
</div> 
```

**CSS**

```
div::before {
  content: '';
  color: inherit;
} 
```

例如，对背景图像很有用。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-25T18:44:06.700

如果您可以控制 HTML，那么您可以添加一个真实元素而不是伪元素。:before 和 :after 伪元素在打开标记之后或关闭标记之前呈现。此 css 的内联等效项

```
td { text-align: justify; }
td:after { content: ""; display: inline-block; width: 100%; } 
```

会是这样的：

```
<table>
<tr>
<td style="text-align: justify;">
TD Content
<span class="inline_td_after" style="display: inline-block; width: 100%;"></span>
</td>
</tr>
</table> 
```

记住; 您之前和之后的“真实”元素以及任何带有内联 css 的内容都会大大增加页面的大小，并忽略外部 css 和伪元素使页面加载优化成为可能。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-16T20:59:57.740

您可以使用

```
parent.style.setProperty("--padding-top", (height*100/width).toFixed(2)+"%"); 
```

在 CSS 中

```
el:after{
  ....
  padding-top:var(--padding-top, 0px);
} 
```******

# c# - MVC 控制器的内置属性

> ID：14141378
> 
> 赞同：-3
> 
> 时间：2013-01-03T14:59:52.023
> 
> 标签：c#, asp.net-mvc, controller

ASP.NET MVC 控制器支持哪些属性？

例如`AuthorizeAttribute`，and`OutputCacheAttribute`仅适用于 Actions 还是也可以为 Controllers 指定？

ASP.NET MVC 控制器的内置属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:05:30.350

有 4 种类型的动作过滤器

1.  授权过滤器——实现`IAuthorizationFilter`接口。
2.  动作过滤器——实现`IActionFilter`接口。
3.  结果过滤器——实现`IResultFilter`接口。
4.  异常过滤器——实现`IExceptionFilter`接口。

过滤器可以应用于控制器（在这种情况下，它们将针对控制器上的每个方法执行）或单个操作。

您可以根据要执行的代码范围跨控制器和操作应用混合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:03:04.807

我认为如果你看一下这篇文章会更好：

*   [http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs)
*   [http://msdn.microsoft.com/en-us/library/dd410209(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd410209(v=vs.100).aspx)

我发现不仅了解 ASP.NET MVC 中的默认操作过滤器更重要，更重要的是了解如何实现满足应用程序需求的自定义操作过滤器。

# php - 今天日期 + x 天

> ID：14141383
> 
> 赞同：-6
> 
> 时间：2013-01-03T14:59:57.870
> 
> 标签：php

我有以下功能：

```
$invoiceParams[2] = $invoiceDate; // dueDate 
```

今天的日期在哪里`$invoiceDate`，`$invoiceParams[2]`应该是今天的日期+7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:02:01.773

Use strtotime with date

```
$invoiceParams[2] = date('m-d-Y',strtotime(" +7 days")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:01:41.307

You can use [strtotime](http://php.net/manual/en/function.strtotime.php).

```
echo date('m-d-Y', strtotime("+1 week")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:16:11.987

`'+7 days'`只需运行一个快速基准测试并添加一个固定的秒数，与解析 a或`'+1 week'`字符串相比，速度至少快两倍。

```
$invoiceDate = time(); // now
$invoiceParams[2] = $invoiceDate + 604800; // +7 days

// Test
echo date('M-d, Y', $invoiceDate); // Now: Jan-03, 2013
echo date('M-d, Y', $invoiceParams[2]); // +7 days: Jan-10, 2013 
```

# jquery - jQuery 自动检测移动设备并重定向到移动网站

> ID：14141385
> 
> 赞同：-1
> 
> 时间：2013-01-03T15:00:02.987
> 
> 标签：jquery, iphone, html, css, jquery-mobile

> **可能重复：**
> [在 jQuery 中检测手持设备的最佳方法](https://stackoverflow.com/questions/3514784/best-way-to-detect-handheld-device-in-jquery)

我目前有一个网站标准 HTML/CSS，我已经使用 jQuery Mobile 完成了该网站的移动版本。

我现在只想检测“智能手机”Win7、iPhone、Andriod，我不想针对平板电脑，只是手机！

因此，如果用户通过手机（智能手机）访问我的网站，他们将被定向到位于子文件夹 /mobile 中的我网站的移动版本。

这怎么可能？可以使用 css 或 jQuery 完成吗？这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:05:31.793

使用以下功能检测是移动设备还是平板电脑。然后我认为检测表格是否是屏幕像素的最佳方法。示例> = 800x600 是平板电脑。

```
function isMobile(){  
        var a = navigator.userAgent||navigator.vendor||window.opera;
        return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4));
        }; 
```

# asp.net - IIS 7.5 配置 - 空闲超时和回收间隔和预编译

> ID：14141387
> 
> 赞同：3
> 
> 时间：2013-01-03T15:00:05.607
> 
> 标签：asp.net, iis, iis-7.5

让我先说我绝不会塑造或形成服务器管理员。

我有一个作为 Web 应用程序运行的继承网站。该网站在正常营业时间内非常繁忙，然后在一天的剩余时间里缓慢下来。每天早上访问该站点的第一批用户的加载时间都非常长，因为 IIS 已闲置。该站点在 5 个负载平衡的 Web IIS 实例上运行，不幸的是，该站点需要一分钟多的时间来重新编译，这导致用户抱怨该站点无响应且速度慢。

我一直在考虑将空闲超时更改为 0，看看这是否会缓解问题。如果我建议进行此更改，是否有任何已知问题需要解决？我在网上找到了很多信息，但没有明确的信息，说明推荐的设置。

在某种相关的说明中，当代码删除完成并且应用程序池被回收时，编译就完成了。预编译也会处理这个问题吗？

谢谢，杜安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:21:00.680

[IIS 7.5 的应用程序初始化模块](http://www.iis.net/downloads/microsoft/application-initialization)

> “……IIS 7.5 的 IIS 应用程序预热使 IT 专业人员能够通过在第一个请求到达之前加载 Web 应用程序来提高其网站的响应能力……”</p>

[让您的 ASP.Net 网站 24/7 保持温暖和快速](http://www.diaryofaninja.com/blog/2010/05/06/keep-your-aspnet-websites-warm-and-fast-247)

# asp.net - IFrame：此内容无法在框架中显示

> ID：14141388
> 
> 赞同：20
> 
> 时间：2013-01-03T15:00:08.590
> 
> 标签：asp.net, html, vb.net, iframe

我有两个内部站点。我正在尝试在另一个站点的 iframe 中显示一个人的内容。但是我收到此消息：“此内容无法显示在框架中。” 我已经阅读了收到此消息的原因，但是我想绕过它，因为这些网站是内部的，而且我不担心有人试图劫持我的用户。在搜索互联网后，我找不到绕过它的方法，但感觉应该是可能的，因为消息的其余部分似乎暗示了它。

**“为了帮助保护您输入本网站的信息的安全，此内容的发布者不允许将其显示在框架中。”**

既然我是发布者，我怎么能让它显示在框架中？谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-08T18:47:02.433

使用`<meta http-equiv="X-Frame-Options" content="allow">`在 iframe 中显示以允许它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-01-12T16:03:50.560

X-Frame-Options 在 Http Header 中定义，而不是在`<head>`您要在 iframe 中使用的页面部分中。

接受的值为：DENY、SAMEORIGIN 和 ALLOW-FROM “url”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-06T19:53:49.950

在真正有效的锚标记中使用`target="_top"`属性。

# php - 存储过程与否？

> ID：14141394
> 
> 赞同：0
> 
> 时间：2013-01-03T15:00:32.957
> 
> 标签：php, mysql, optimization, stored-procedures, mysqli

我有一个 PHP 脚本可以满足繁重的负载。这是我的智能手机游戏的后端脚本。在这个脚本中，我使用 MySQL 进行多次插入和选择。

A) 我想知道*存储过程*是否可以提高响应和执行时间？

B) 关于响应时间，我可以从 MySQL 切换到 MySQLi 吗？或者我应该寻找一个完全不同的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:03:29.080

存储过程会将复杂的逻辑转移到系统的数据库部分，因此您可以通过避免 PHP 发出大量插入来有效地利用工作（也许很多）。如果您在服务器脚本端执行的操作可以移植到存储过程，则可能会提高性能。

对于第二个问题，您应该从 mysql API 转移到 mysqli API，因为 mysql API[已弃用](http://php.net/manual/en/mysqlinfo.api.choosing.php)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-03T15:05:25.607

> 我想知道存储过程是否可以在响应时间和快速执行方面为我做任何事情？

不。

> 关于响应时间，我可以从 mysql 到 mysqli 获得任何东西吗？

不。

> 还是我应该看另一个方向？

对你的具体情况一无所知，不可能向你展示任何方向。

作为一般规则，可以通过删除索引来优化多个插入。批量插入可以通过使用事务进行优化。

# ruby-on-rails - Rails 谷歌指令 api 上的坏 uri

> ID：14141397
> 
> 赞同：1
> 
> 时间：2013-01-03T15:00:35.030
> 
> 标签：ruby-on-rails, uri, google-directions-api

我正在尝试向rails上的google方向api发送请求，我尝试了一些事情，这就是我现在所拥有的 -

```
 url = URI.parse(requested_url)
 full_path = (url.query.blank?) ? url.path : "#{url.path}?#{url.query}"
 the_request = Net::HTTP::Get.new(full_path)
 the_response = Net::HTTP.start(url.host, url.port) { |http| http.request(the_request) }
 raise "Response was not 200, response was #{the_response.code}" if the_response.code !=   "200"
 return the_response.body 
```

但它提高了一个=错误的URI（不是URI？）：[http](http://maps.googleapis.com/maps/api/directions/json?origin=) ://maps.googleapis.com/maps/api/directions/json? origin='תלאביב'&destination='ירושלים'&sensor=false

如果您将其粘贴到浏览器上，它会返回 ok。

# firefox - 使用 Firefox 在表格下方浮动元素

> ID：14141399
> 
> 赞同：1
> 
> 时间：2013-01-03T15:00:45.913
> 
> 标签：firefox, html-table, mozilla, floating

我想在表格下方浮动一个元素。表格的宽度为 100%，因此预期的输出是出现在表格上方的浮动元素。除了 Mozilla 之外，所有主要浏览器引擎都很好。

有没有办法只用 CSS 强制 Firefox 换行？我没有机会更改 HTML 代码，因此使用 CSS 的解决方案非常重要。

提前致谢！

```
<html>
<head>
<style type="text/css">
div {
  background: red;
  float: right;
  width: 300px;
}
table { width: 100%; }
td { background: green; }
</style>
</head>
<body>
<div>Label</div>
<table>
   <tbody>
      <tr>
         <td>
            Table
         </td>
      </tr>
   </tbody>
</table>
</body>
</html> 
```

[http://jsfiddle.net/fPVcr/](http://jsfiddle.net/fPVcr/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:16:00.370

添加：

```
table {
    clear: right;
} 
```

这将确保表格呈现在浮动元素下方，但请注意：如果在表格之前指定的任何其他元素浮动在右侧，表格也会在这些元素之后呈现。

# iphone - 核心情节弧的内存消耗问题

> ID：14141400
> 
> 赞同：4
> 
> 时间：2013-01-03T15:00:55.283
> 
> 标签：iphone, objective-c, ios, ios6, core-plot

我正在构建一个启用了 ARC 的图形相关应用程序，其中图形上有两个不同的视图：-一个是小视图，我必须通过单击按钮来更改（使用重新加载数据）。-第二个视图是当点击“1 天”、“3 天”、“5 天”等按钮时图表发生变化的大视图。

我面临的问题是，在连续使用 15-20 分钟后，应用程序会因日志崩溃......“CAAnimation 无法分配字节”。当我在 Profile 上进行分析时，我了解到当小图加载时，实时字节会跳跃 2-3 mb，而当大图加载时，实时字节会跳跃 4 到 5 mb，而实时字节则永远不会下降。我在离开视图时取消了所有图形对象，但即便如此，内存也没有释放。

在切换到下一个图表时，我正在调用此方法：

```
-(void)removePlot
{
    for(CPTPlot* plot in [graph allPlots])
    {
        plot.dataSource = nil;
        plot.delegate = nil;
        [plot deleteDataInIndexRange:NSMakeRange(0, plot.cachedDataCount)];
        [graph removePlot:plot];
    }
} 
```

在离开视图时，我正在调用此方法：

```
-(void)removeGraph
{
    [axisSet removeFromSuperlayer]; 
    axisSet=nil;
    [self removePlot];
    generationPlot=nil;
    [graph removePlotSpace:plotSpace];
    plotSpace=nil;
    [graph removeFromSuperlayer];
    graph=nil;
    [hostView removeFromSuperview];
    hostView=nil;
    headerList=nil;
    graphDetailList=nil;
    graphList=nil;
    dataList=nil;
    plotsArray=nil;
} 
```

很多人之前都遇到过这个问题，但还没有答案对我有用。如果有人对此有任何想法......请提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-16T01:07:08.957

尝试阅读本文，它可能会有所帮助。

[https://developer.apple.com/library/ios/releasenotes/objectivec/rn-transitioningtoarc/introduction/introduction.html](https://developer.apple.com/library/ios/releasenotes/objectivec/rn-transitioningtoarc/introduction/introduction.html)

此外，请考虑研究 ARC 提供的 @autoreleasepool 机制，以帮助限制最大内存占用。

此外，请确保正在调用您上面列出的方法。有时我们会编写清理例程，但它们不会被调用！:-)

此外，您将代码列为：

axisSet=nil generationPlot=nil ...等...

axisSet 是什么类型的？generationPlot 是什么类型的？全局变量？如果它们不是 NSObjects（有时即使它们是），将它们设置为 nil 可能不是释放它们的正确方法。

考虑将其中一些设置为@property 并给它们适当的限定符（即：强等），那么您的一些内存使用情况可能会更清晰一些。如果您有许多可能引起混淆的静态或全局变量。

希望这可以帮助。

# in-app-purchase - 如何在 Windows Phone 8 上获得应用内购买产品的货币？

> ID：14141404
> 
> 赞同：12
> 
> 时间：2013-01-03T15:01:04.810
> 
> 标签：in-app-purchase, windows-phone-8

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-13T03:35:33.880

WP8 使用您的 Live ID 支付配置文件区域来选择手机使用的市场，您无法通过手机上的设置进行更改。我只是碰巧知道这一点，因为我的付款资料以某种方式设置为加拿大（我来自美国），而我无法通过手机上的设置进行更改。

但是，回到最初的问题：您的手机将始终通过 System.Globalization.RegionInfo.CurrentRegion 报告应用程序购买中使用的文化。因此，您可以从以下位置可靠地获取用于在应用程序购买中使用的正确货币代码：

```
var regionInfo = System.Globalization.RegionInfo.CurrentRegion;
var currencyCode = regionInfo.ISOCurrencySymbol; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T22:40:26.983

在 Windows Phone 8 中，更改设备上的区域将更改您访问的市场。

例如，如果我将手机上的地区从澳大利亚更改为美国，我将访问美国商店。从该商店购买的任何商品都将以当地货币进行（假设我有该地区接受的付款方式 - 即美国信用卡）。

因此，系统区域设置应该是适合您的目的的解决方法，因为与 WP7 不同，您的市场未链接到实时 ID 的区域设置。

# linq - Linq Query for Corresponding SQL

> ID：14141406
> 
> 赞同：1
> 
> 时间：2013-01-03T15:01:07.763
> 
> 标签：linq, c#-4.0, entity-framework-4, linq-to-entities

Below is my SQL Statement, I am Unable to Convert to LINQ

```
select o.CustId,c.CustName,Count(o.CustId) as Total_Orders from Customer c 
inner join Orders o on c.CustId = o.CustId group by o.CustId,c.CustName 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:20:53.487

这样的事情呢？

```
var query = db.Customers.Select(c => new 
                {
                    CustId = c.CustId,
                    CustName = c.CustName,
                    Total_Orders = db.Orders.Where(o => o.CustId == c.CustId).Count()
                }
            ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:20:00.667

请试试：

```
 var query = from c in Customer
            join o in Orders 
            on c.CustId 
            equals o.CustId 
            group x by new {o.CustId, c.CustName} 
            into g
                select new 
                {
                  g.Key.CustId,
                  g.Key.CustName,
                  Total_Orders = g.Count()
                }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:24:29.677

```
var query = from c in context.Customers
            select new
            {
                c.CustId,
                c.CustName,
                Orders = c.Orders.Count(),
            }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T15:05:43.493

以下是 LINQ 查询（`db`是 EntityFramework [DBContext](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext%28v=vs.103%29.aspx)）。

```
var query =  from c in db.Customers
             join o in db.Orders on c.CustId equals o.CustId into g
             groupby new { CustID = c.CustId, CustName=c.CustName } into gs
             select new { CustID = gs.Key.CustId, CustName=gs.Key.CustName, Count= gs.Count() } into gs 
```

# jquery - jquery FullCalendar block adding more events

> ID：14141407
> 
> 赞同：0
> 
> 时间：2013-01-03T15:01:08.607
> 
> 标签：jquery, fullcalendar

how to block possibility to add more events to one day if there is already one event ??

i read all docs but didnt find answer [FullCalendar docs](http://arshaw.com/fullcalendar/docs/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:00:31.670

有点脏但成功了

```
var css_class = $(this).attr('class').split(' ');
$(this).removeClass(css_class[2]); 
```

# playframework - PlayFramework 2.0.x -> 2.1-RC migration

> ID：14141408
> 
> 赞同：5
> 
> 时间：2013-01-03T15:01:15.043
> 
> 标签：playframework, playframework-2.0, playframework-2.1

In my program on Play 2.0.4 I had this piece of code:

```
val channel = Enumerator.imperative[JsValue](onStart = self ! NotifyJoin(username)) 
```

and now it says that `imperative` is deprecated, and the API says that I should use `unicast` or `broadcast` instead. I tend to use `unicast` since in my code the `channel` was unicast. So I make like

```
val channel = Concurrent.unicast[JsValue](onStart = self ! NotifyJoin(username)) 
```

But it does not work.. looks like that `unicast` wants something else. I cannot figure it out - there is no more info in the API... does anyone know what to do here?

**UPDATE:**

Started a discussion in Play Framework user group. Turns out to be a pretty common problem among developers, who are knew to the paradigm. Will hope the documentation is going to be improved.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T03:57:29.297

API`Concurrent.unicast`是：

```
unicast[E](onStart: (Channel[E]) ⇒ Unit, onComplete: ⇒ Unit, onError: (String, Input[E]) ⇒ Unit): Enumerator[E] 
```

API`Concurrent.broadcast`是：

```
broadcast[E]: (Enumerator[E], Channel[E]) 
```

您可以在您的应用程序中访问 API：

```
http://localhost:9000/@documentation/api/scala/index.html#play.api.libs.iteratee.Concurrent$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:03:39.847

使用单播的示例：

```
// here is an enumerator that returns a chunk to the channel
val outEnumerator = Concurrent.unicast[JsValue] { channel =>
    val data = Json.obj("data" -> 12345)
    channel.push(data)
} 
```

使用旧 Enumerator.imperative 的替代方法是使用 generateM：

```
val out = Enumerator.generateM[JsValue] {
    Promise.timeout( {
        Some(Json.obj("data" -> 12345))
    }, 100, TimeUnit.MILLISECONDS )
} 
```

在这里，我们使用超时生成一个重复值。这个枚举器永远重复，尽管 generateM 允许您返回 None 以指示何时完成。

# sql - 如何从用户 ID 中获取用户名（SQL 连接）

> ID：14141410
> 
> 赞同：3
> 
> 时间：2013-01-03T15:01:30.410
> 
> 标签：sql, sql-server-2008

这个问题很难得到一个好的标题，但我会在下面详细解释。我将稍微简化一下这些表格，以使问题更容易提出。

我有一个名为“用户”的表，其中包含以下列：

```
UserRowId (PK)
FirstName
LastName
RegionRowId (FK)
Active 
```

我有一个名为“区域”的表，其中包含以下列：

```
RegionRowId
RegionDesc
UserRowId 
```

这里的逻辑是，用户属于用户表中的 RegionRowId 记录的“区域”。每个区域（在“Region”表中）都有一个区域经理，由“Region”表中的“UserRowId”列（来自“User”表的 FK）记录。

我有一个名为“UserTime”的表，其中包含以下列：

```
UserTimeRowId (PK)
UserRowId (FK)
Hours
Sales 
```

这里的逻辑是用户（由 UserRowId 映射）报告存储在此表中的小时数和销售额。每次用户报告销售额/小时数时，都会创建一个新行。

**我要完成的工作：**

我正在尝试编写一个查询，该查询将提取该用户的 FirstName、LastName、区域经理、小时总和以及销售额总和。

**这是我到目前为止所拥有的：**

询问：

```
SELECT dbo.[User].FirstName, dbo.[User].LastName,
dbo.[Region].UserRowId AS RegManager, dbo.[Region].RegionDesc AS Desc,
SUM(dbo.[UserTime].Sales) AS Sales, SUM(dbo.[UserTime].Hours) AS Hours
FROM dbo.[UserTime]
INNER JOIN dbo.[User] ON dbo.[UserTime].UserRowid = dbo.[User].UserRowId
INNER JOIN dbo.[Region] ON dbo.[User].RegionRowId = dbo.[Region].RegionRowId
WHERE dbo.[User].Active = 1
GROUP BY dbo.[User].FirstName, dbo.[User].LastName,
dbo.[Region].UserRowId, dbo.[Region].RegionDesc 
```

输出（示例）：

```
FirstName   LastName   RegManager   RegionDesc   Sales   Hours
Bob         Man        773          NYC          500     5 
```

**我遇到的问题是：**

我无法（终生）获得区域经理的姓氏（上面输出中的 RegManager 列）而不是 UserRowId。我知道在我的查询中我正在拉 dbo.[Region].UserRowId 很明显这就是我将在输出中得到的。但是，我需要使用该 ID 来交叉引用 User 表以提取该经理的名称。

当我尝试通过 UserRowId 连接用户表和区域表时，我得到一个区域经理列表而不是用户列表，以及该用户的区域经理列。

我需要一个子查询来完成这个吗？

任何帮助表示赞赏，如果我需要澄清任何事情以获得解决方案，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:06:35.957

您不需要子查询，但需要使用别名，这样您就可以多次 JOIN 同一个表（在本例中为用户表）而不会产生歧义。

```
SELECT u.FirstName, u.LastName,
m.FirstName AS RegManagerFirstName, m.LastName AS RegManagerLastName, r.RegionDesc AS [Desc],
SUM(ut.Sales) AS Sales, SUM(ut.Hours) AS Hours
FROM dbo.[UserTime] AS ut
INNER JOIN dbo.[User] AS u ON ut.UserRowid = u.UserRowId
INNER JOIN dbo.[Region] AS r ON u.RegionRowId = r.RegionRowId
INNER JOIN dbo.[User] AS m ON r.UserRowid = m.UserRowId
WHERE u.Active = 1
GROUP BY u.FirstName, u.LastName, m.FirstName, m.LastName, r.RegionDesc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T15:06:58.457

您需要做的是`User`再次加入表，使用表`UserRowId`中的，并为其命名，以便它可以与您加入`Region`的其他表分开引用它：`User`

```
SELECT dbo.[User].FirstName, dbo.[User].LastName,
Manager.FirstName AS RegManagerFirstName, Manager.LastName AS RegManagerLastName, dbo.[Region].RegionDesc AS Desc,
SUM(dbo.[UserTime].Sales) AS Sales, SUM(dbo.[UserTime].Hours) AS Hours
FROM dbo.[UserTime]
INNER JOIN dbo.[User] ON dbo.[UserTime].UserRowid = dbo.[User].UserRowId
INNER JOIN dbo.[Region] ON dbo.[User].RegionRowId = dbo.[Region].RegionRowId
INNER JOIN dbo.[User] Manager ON dbo.[Region].UserRowId = Manager.UserRowId
WHERE dbo.[User].Active = 1
GROUP BY dbo.[User].FirstName, dbo.[User].LastName, Manager.FirstName, 
Manager.LastName 
```

# linear-algebra - approximate polynomial by linear inequalities

> ID：14141414
> 
> 赞同：1
> 
> 时间：2013-01-03T15:01:54.723
> 
> 标签：linear-algebra, interpolation, polynomial-math, approximation

I have a polynomial

```
b*p + a*q + y = 0 
```

where b,p,a,q,y are integer variables. It specifies some area.

1) If there a way (an algorithm) to specify linear inequalities, that the area they are describe, will include an area of polynomial?

2) If there a way (an algorithm) to specify a set of linear inequalities, the the area they are describe, will be included in an area of polynomial?

This question also applies, in general, to any polynomial:

```
a1*x1^y11*...*xm^ym1 + ak*x1^y1k*...*xm^ymk = 0 
```

where x1,...,xm - integer variables, a1,...ak, y11, ..., ymk - integers.

# hibernate - org.hibernate.MappingException：无法确定类型：java.util.Set 版本问题？

> ID：14141418
> 
> 赞同：0
> 
> 时间：2013-01-03T15:02:08.630
> 
> 标签：hibernate, mappingexception

艰难我看到很多匹配的建议问题，这些建议似乎都没有回答我的问题。我是 Hibernate 的新手，刚开始使用注释。对 XML 配置稍微满意。我正在经历“利用休眠”并尝试注释示例。当尝试运行它时，我遇到了这个异常。我的代码在这里

休眠.cfg.xml

```
 <?xml version='1.0' encoding='UTF-8'?>
    <!DOCTYPE hibernate-configuration PUBLIC
          "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
          "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

    <!-- Generated by MyEclipse Hibernate Tools.                   -->
    <hibernate-configuration>

` <session-factory>
      <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
    <!--  MySQL connection     -->
      <property name="connection.url">jdbc:mysql://localhost:3306/HibernateTest</property>
      <property name="connection.username">root</property>
      <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
      <property name="connection.password">root</property>`

    <property name="current_session_context_class">thread</property>
    <!-- this will show us all sql statements -->

    <property name="connection.pool_size">1</property>
    <property name="hibernate.show_sql">false</property>
    <!-- this will create the database tables for us --><!--
    <property name="hibernate.hbm2ddl.auto">create</property>
    --><!--<property name="jdbc.batch_size">0</property>
    <mapping resource="com/home/hibernate/data/Track.hbm.xml" />
    <mapping resource="com/home/hibernate/data/Artist.hbm.xml" />
    <mapping resource="com/home/hibernate/data/Album.hbm.xml" />
  -->
    <mapping class="com.home.hibernate.bean.Track"/>
    <mapping class="com.home.hibernate.bean.Album"/>
    <mapping class="com.home.hibernate.bean.AlbumTrack"/>
    <mapping class="com.home.hibernate.bean.Artist"/> 
  </session-factory>

</hibernate-configuration> 
```

轨道.java

```
 import javax.persistence.Table;
    import javax.persistence.Temporal;
    import javax.persistence.TemporalType;

    import org.hibernate.annotations.CollectionOfElements;
    import org.hibernate.annotations.Index;

    @Entity
    @Table(name="TRACK")
    @NamedQueries({
        @NamedQuery(name="queryTest.tracksNoLongerThan",
                query="from Track as track where track.playTime <= :length")
    })
    public class Track  implements java.io.Serializable {

    @Id
    @Column(name="TRACK_ID")
    @GeneratedValue(strategy=GenerationType.AUTO)
     private int id;

    @Column(name="TITLE",nullable=false)
    @Index(name="TRACK_TITLE",columnNames={"TITLE"})
     private String title;

    @Column(nullable=false)
     private String filePath;

    @Temporal(TemporalType.TIME)
     private Date playTime;

    @Temporal(TemporalType.DATE)
     private Date added;

    @ManyToMany
    @JoinTable(name="TRACK_ARTISTS",
            joinColumns={@JoinColumn(name="ARTIST_ID")},
            inverseJoinColumns={@JoinColumn(name="TRACK_ID")})
     private Set<Artist> artists = new HashSet<Artist>(0);
     /**
      * Media on which track was obtained
     */
    @Enumerated(EnumType.STRING)
     private SourceMedia sourceMedia;

     @CollectionOfElements
     @JoinTable(name="TRACK_COMMENTS",
            joinColumns={@JoinColumn(name="TRACK_ID")})
    @Column(name="COMMENT")
     private Set<String> comments = new HashSet<String>(0);
     /**
      * How loud to play
     */
     @Embedded
     @AttributeOverrides({
         @AttributeOverride(name="left", column=@Column(name="VOL_LEFT")),
         @AttributeOverride(name="right", column=@Column(name="VOL_RIGHT"))
     })
     private StereoVolume volume;

    public Track() {
    }

    public Track(String title, String filePath) {
        this.title = title;
        this.filePath = filePath;
    }
    public Track(String title, String filePath, Date playTime, Date added, Set<Artist> artists, SourceMedia sourceMedia, Set<String> comments, StereoVolume volume) {
       this.title = title;
       this.filePath = filePath;
       this.playTime = playTime;
       this.added = added;
       this.artists = artists;
       this.sourceMedia = sourceMedia;
       this.comments = comments;
       this.volume = volume;
    }

    public int getId() {
        return this.id;
    }

    public void setId(int id) {
        this.id = id;
    }
    public String getTitle() {
        return this.title;
    }

    public void setTitle(String title) {
        this.title = title;
    }
    public String getFilePath() {
        return this.filePath;
    }

    public void setFilePath(String filePath) {
        this.filePath = filePath;
    }
    public Date getPlayTime() {
        return this.playTime;
    }

    public void setPlayTime(Date playTime) {
        this.playTime = playTime;
    }
    public Date getAdded() {
        return this.added;
    }

    public void setAdded(Date added) {
        this.added = added;
    }
    public Set<Artist> getArtists() {
        return this.artists;
    }

    public void setArtists(Set<Artist> artists) {
        this.artists = artists;
    }
    /**       
     *      * Media on which track was obtained
     */
    public SourceMedia getSourceMedia() {
        return this.sourceMedia;
    }

    public void setSourceMedia(SourceMedia sourceMedia) {
        this.sourceMedia = sourceMedia;
    }
    public Set<String> getComments() {
        return this.comments;
    }

    public void setComments(Set<String> comments) {
        this.comments = comments;
    }
    /**       
     *      * How loud to play
     */
    public StereoVolume getVolume() {
        return this.volume;
    }

    public void setVolume(StereoVolume volume) {
        this.volume = volume;
    }

    /**
     * toString
     * @return String
     */
     public String toString() {
      StringBuffer buffer = new StringBuffer();

      buffer.append(getClass().getName()).append("@").append(Integer.toHexString(hashCode())).append(" [");
      buffer.append("title").append("='").append(getTitle()).append("' ");          
      buffer.append("sourceMedia").append("='").append(getSourceMedia()).append("' ");          
      buffer.append("volume").append("='").append(getVolume()).append("' ");            
      buffer.append("]");

      return buffer.toString();
     }

} 
```

构建.xml

```
 <artifact:dependencies pathId="dependency.classpath">
        <dependency groupId="mysql" artifactId="mysql-connector-java"
            version="5.0.5" />

        <dependency groupId="org.hibernate" artifactId="hibernate"
            version="3.2.5.ga">
            <exclusion groupId="javax.transaction" artifactId="jta"></exclusion>
        </dependency>

        <dependency groupId="org.hibernate" artifactId="hibernate-annotations"
                version="3.3.0.ga">
        </dependency>

        <dependency groupId="org.hibernate" artifactId="hibernate-commons-annotations"
                version="3.3.0.ga">
        </dependency>

        <dependency groupId="org.hibernate" artifactId="hibernate-tools"
            version="3.2.0.beta9a" />

        <dependency groupId="org.apache.geronimo.specs" artifactId="geronimo-jta_1.1_spec"
            version="1.1" />
        <dependency groupId="log4j" artifactId="log4j" version="1.2.14" />

    </artifact:dependencies> 
```

这是我在应用程序中使用的所有依赖项

我的错误跟踪是

```
 BUILD FAILED
    D:\Hibernate-SelfStudy\Workspace\HibernateTutorial\build.xml:19: org.hibernate.MappingException: Could not determine type for: java.util.Set, for colu
    mns: [org.hibernate.mapping.Column(comments)]
            at org.hibernate.mapping.SimpleValue.getType(SimpleValue.java:266)
            at org.hibernate.mapping.Column.getSqlTypeCode(Column.java:138)
            at org.hibernate.mapping.Column.getSqlType(Column.java:182)
            at org.hibernate.mapping.Table.sqlCreateString(Table.java:394)
            at org.hibernate.cfg.Configuration.generateSchemaCreationScript(Configuration.java:848)
            at org.hibernate.tool.hbm2ddl.SchemaExport.<init>(SchemaExport.java:94)
            at org.hibernate.tool.hbm2ddl.SchemaExport.<init>(SchemaExport.java:61)
            at org.hibernate.tool.ant.Hbm2DDLExporterTask.execute(Hbm2DDLExporterTask.java:45)
            at org.hibernate.tool.ant.HibernateToolTask.execute(HibernateToolTask.java:183)
            at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
            at java.lang.reflect.Method.invoke(Method.java:601)
            at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
            at org.apache.tools.ant.Task.perform(Task.java:348)
            at org.apache.tools.ant.Target.execute(Target.java:392)
            at org.apache.tools.ant.Target.performTasks(Target.java:413)
            at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
            at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
            at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
            at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
            at org.apache.tools.ant.Main.runBuild(Main.java:811)
            at org.apache.tools.ant.Main.startAnt(Main.java:217)
            at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
            at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)

    Total time: 3 seconds 
```

有人可以帮我解决这个问题吗

在此先感谢基兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T00:29:38.447

对不起这个问题。该错误是在其他类中引发的。错误地给出了评论集合的注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:45:40.913

使用`@ElementCollection` 而不是`@CollectionOfElements`. 它被贬低了。

希望它有所帮助:)

# pdf - CGContextDrawPDFPage 在 iOS 6 中泄漏？

> ID：14141423
> 
> 赞同：1
> 
> 时间：2013-01-03T15:02:31.860
> 
> 标签：pdf, memory-leaks, ios6

我正在开发几个基本上是 PDF 阅读器的应用程序。从 iOS 6 开始，应用程序开始因为内存不足而崩溃。我们的应用程序使用[PDF Reader](https://github.com/vfr/Reader)，但问题与此无关。到目前为止，我们发现：
1\. 泄漏来自`CGContextDrawPDFPage`
2\. 它在 iOS <6 中不存在（或不那么突出）
3\. 在没有或小压缩的 PDFS 上不会发生泄漏

具体来说：打开经过一定压缩的 PDF 后，会使用一些内存。当 PDF 关闭时，部分内存被释放。然而，并不是全部。您可以通过多次打开和关闭 PDF 轻松获得内存警告，然后使应用程序崩溃。
我也试过[PSPDF](http://pspdfkit.com/)，虽然它比 PDF Reader 有优势（速度），但它要贵得多，而且里面也有同样的泄漏。

我为[PDF Reader](https://dl.dropbox.com/u/5552845/VFRPDFTest.zip)和[PSPDF Kit](https://dl.dropbox.com/u/5552845/PSPDFTest.zip)创建了非常简单的测试项目。（您只需要在项目中添加一些 PDF）

我可以做些什么来修复 iOS 6 中的泄漏，或者我做错了什么并且实际上没有泄漏？我目前的方法是等待官方修复。
我知道这个问题在这里被大量讨论，但我相信我的情况有点不同。（使用 ARC 和经过测试的库，在模拟器和设备上可见泄漏）

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:53:22.330

经过大量尝试，我发现只有两个解决方案。但是，它们都不是完美的。

**1) 使用 Apple 的[QuickLook 框架](http://developer.apple.com/library/ios/#documentation/QuickLook/Reference/QuickLookFrameworkReference_iPhoneOS/_index.html)**
- 在 iOS <6.0
中没有泄漏 - 在 iOS 6.0 中没有泄漏。

QuickLook 在另一个使用 XPC 的进程中运行。然而，这也意味着实际上没有定制。（通过链接的博客文章查看[此问题）](https://stackoverflow.com/questions/6957091/qlpreviewcontroller-remove-or-add-uibarbuttonitems/6986991#6986991)

**2) 使用[FastPdfKit](http://fastpdfkit.com/)库**
似乎没有`CGContextDrawPDFPage`涉及，或者可能只是一些巧妙的优化，但 FastPdfKit 没有泄漏。缺点有两个 - 库是商业的，即使您购买了许可证，它的渲染引擎也不会显示给您。您可以使用具有所有功能的免费版本，但有一个启动画面。

由于我们面临时间压力，既不能等待官方错误修复，也不能放弃我们当前的功能，我们选择了 FastPdfKit。

* * *

我不认为这是一个确定的答案。图书馆适合我们的需要，可能不适合您。此外，它是一种商业产品。如果有更直接的解决方案，我很乐意接受。

# css - 内部div的css布局

> ID：14141425
> 
> 赞同：-3
> 
> 时间：2013-01-03T15:02:33.723
> 
> 标签：css

分页 id div（带有红色虚线边框和黑色边框 div 的底部）不在黑色边框 div 的顶部内角

[`jsfiddle.net/GMLGn/8/`](http://jsfiddle.net/GMLGn/8/)

代码太长，无法在此处发布（堆栈字符限制），并且在当前场景中提供部分代码是不可行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:10:46.133

将这些位置添加到类`.galary`和`.pagation`

```
.galary{
position:relative;
} 
```

如果您想确保分页不会超出 galary 元素，请执行此操作

```
.pagination{
  position:absolute;     
} 
```

这将允许您使用顶部和左侧设置将分页元素移动到任何您想要的位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:11:08.897

这似乎是您所要求的（尽管很难确定）

设置 position: absolute 并相应调整 top 和 left 属性；

这就是我放在[小提琴](http://jsfiddle.net/jcurran/zwQjD/)中的内容：

```
.gallery .pagination{
border: medium dotted #930;
left: 664px;
top: 187px;
width: 150px;
position: absolute;
} 
```

# javascript - 仅打印隐藏对象标签的内容

> ID：14141427
> 
> 赞同：2
> 
> 时间：2013-01-03T15:02:52.237
> 
> 标签：javascript, jquery, html, css

考虑以下代码示例：

```
<!DOCTYPE html>
<html>
    <head>
        <title>HTML5-Template</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <style type="text/css">
            .print_this{
                display: none;
            }

            @media print {
                .print_this {
                    display: block;
                    width: 1024px;
                    height: 768px;
                }
            }
        </style>  
        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                setTimeout(function () {
                    var el = document.getElementById("report");
                    el.focus();
                    el.print();
                }, 1500);
            });
        </script>
    </head>
    <body>
        <div id="Container">
            <object class="print_this" id="report" name="report" type="application/pdf" data="Certificate.pdf"></object>
        </div>
    </body>
</html> 
```

我想在窗口中对用户隐藏对象，但在显示打印对话框时只打印标签的内容......这可能吗？

注意：代码来自互联网上的其他地方，但是我觉得这非常不基于标准？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:13:59.520

你在正确的轨道上。现在您需要在打印媒体块中定义一个仅限屏幕的类 ( `.screen_only { display: none; }`) 来隐藏您不想显示给打印机的内容：

```
.print_this{
    display: none;
}

@media print {
    .print_this {
        display: block;
        width: 1024px;
        height: 768px;
    }
    .screen_only {
        display: none;
    }
}​ 
```

有关工作示例，请参见[http://fiddle.jshell.net/jhfrench/UdQSX/2/show/ 。](http://fiddle.jshell.net/jhfrench/UdQSX/2/show/)当页面在浏览器中加载时，您将看到“打印时不显示”。现在打印页面，您将看到“这仅针对打印机显示”。

# mysql - 在其他一组值中搜索一组值以查找一行

> ID：14141428
> 
> 赞同：0
> 
> 时间：2013-01-03T15:02:59.090
> 
> 标签：mysql

您好，我在搜索用户（来自用户表）的查询中遇到执行时间问题，这些用户至少具有来自一个指定兴趣集的一个兴趣和来自指定位置集的一个位置。所以我有这个测试数据库：

```
 CREATE TABLE IF NOT EXISTS `interests` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `name` varchar(255) NOT NULL,
      PRIMARY KEY (`id`)
    ) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=10 ;

    --
    -- Dumping data for table `interests`
    --

    INSERT INTO `interests` (`id`, `name`) VALUES
    (1, 'auto'),
    (2, 'moto'),
    (3, 'health'),
    (4, 'garden'),
    (5, 'house'),
    (6, 'music'),
    (7, 'video'),
    (8, 'games'),
    (9, 'it');

    -- --------------------------------------------------------

    --
    -- Table structure for table `locations`
    --

    CREATE TABLE IF NOT EXISTS `locations` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `name` varchar(50) NOT NULL,
      PRIMARY KEY (`id`)
    ) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=11 ;

    --
    -- Dumping data for table `locations`
    --

    INSERT INTO `locations` (`id`, `name`) VALUES
    (1, 'engalnd'),
    (2, 'austia'),
    (3, 'germany'),
    (4, 'france'),
    (5, 'belgium'),
    (6, 'italy'),
    (7, 'russia'),
    (8, 'poland'),
    (9, 'norway'),
    (10, 'romania');

    -- --------------------------------------------------------

    --
    -- Table structure for table `users`
    --

    CREATE TABLE IF NOT EXISTS `users` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `email` varchar(255) NOT NULL,
      PRIMARY KEY (`id`)
    ) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=11 ;

    --
    -- Dumping data for table `users`
    --

    INSERT INTO `users` (`id`, `email`) VALUES
    (1, 'email1@test.com'),
    (2, 'email2@test.com'),
    (3, 'email3@test.com'),
    (4, 'email4@test.com'),
    (5, 'email5@test.com'),
    (6, 'email6@test.com'),
    (7, 'email7@test.com'),
    (8, 'email8@test.com'),
    (9, 'email9@test.com'),
    (10, 'email10@test.com');

    -- --------------------------------------------------------

    --
    -- Table structure for table `users_interests`
    --

    CREATE TABLE IF NOT EXISTS `users_interests` (
      `user_id` int(11) NOT NULL,
      `interest_id` int(11) NOT NULL,
      PRIMARY KEY (`user_id`,`interest_id`)
    ) ENGINE=MyISAM DEFAULT CHARSET=utf8;

    --
    -- Dumping data for table `users_interests`
    --

    INSERT INTO `users_interests` (`user_id`, `interest_id`) VALUES
    (1, 1),
    (1, 2),
    (2, 5),
    (2, 7),
    (2, 8),
    (3, 1),
    (4, 1),
    (4, 5),
    (4, 6),
    (4, 7),
    (4, 8),
    (5, 1),
    (5, 2),
    (5, 8),
    (6, 3),
    (6, 7),
    (6, 8),
    (7, 7),
    (7, 9),
    (8, 5);

    -- --------------------------------------------------------

    --
    -- Table structure for table `users_locations`
    --

    CREATE TABLE IF NOT EXISTS `users_locations` (
      `user_id` int(11) NOT NULL,
      `location_id` int(11) NOT NULL,
      PRIMARY KEY (`user_id`,`location_id`)
    ) ENGINE=MyISAM DEFAULT CHARSET=utf8;

    --
    -- Dumping data for table `users_locations`
    --

    INSERT INTO `users_locations` (`user_id`, `location_id`) VALUES
    (2, 5),
    (2, 7),
    (2, 8),
    (3, 1),
    (4, 1),
    (4, 5),
    (4, 6),
    (4, 7),
    (4, 8),
    (5, 1),
    (5, 2),
    (5, 8),
    (6, 3),
    (6, 7),
    (6, 8),
    (7, 7),
    (7, 9),
    (8, 5); 
```

有没有比这更好的查询方法：

```
SELECT email, 
GROUP_CONCAT( DISTINCT ui.interest_id ) AS interests, 
GROUP_CONCAT( DISTINCT ul.location_id ) AS locations
FROM `users` u
LEFT JOIN users_interests ui ON u.id = ui.user_id
LEFT JOIN users_locations ul ON u.id = ul.user_id
GROUP BY u.id
HAVING IF( interests IS NOT NULL , FIND_IN_SET( 2, interests )
OR FIND_IN_SET( 3, interests ) , 1 )
AND IF( locations IS NOT NULL , FIND_IN_SET( 2, locations )
OR FIND_IN_SET( 3, locations ) , 1 ) 
```

这是我找到的最佳解决方案，但在关系表（位置和兴趣）中的 500k 和 100 万行上它仍然很慢。尤其是当您匹配大量值时（假设超过 50 个位置和兴趣）。

所以我试图实现这个查询产生的结果，但要快一点：

```
email               interests        locations

email1@test.com     1,2             [BLOB - 0B]
email5@test.com     1,2,8           1,2,8
email6@test.com     3,7,8           3,7,8
email9@test.com     [BLOB - 0B]     [BLOB - 0B]
email10@test.com    [BLOB - 0B]     [BLOB - 0B] 
```

我还尝试加入一个 SELECT UNION 表 - 用于匹配集 - 但它甚至更慢。像这样：

```
SELECT *
FROM `users` u
LEFT JOIN users_interests ui ON u.id = ui.user_id
LEFT JOIN users_locations ul ON u.id = ul.user_id

LEFT JOIN (SELECT 2 as interest UNION SELECT 3 as interest) as `is` ON ui.interest_id = is.interest
LEFT JOIN (SELECT 2 as location UNION SELECT 3 as location ) as `ls` ON ul.location_id = ls.location

WHERE IF(ui.user_id IS NOT NULL, `is`.interest IS NOT NULL,1) AND
 IF(ul.user_id IS NOT NULL, ls.location IS NOT NULL,1) 

GROUP BY u.id 
```

我将其用于基本定位系统。我将非常感激，任何建议！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:55:25.597

你有`IS`是mysql的保留字

而且你`group by`也可以减慢你的查询，但我看不出`group by u.id`在这里使用的任何意义，因为`u.id`它已经是`unique id`。

[**看演示**](http://sqlfiddle.com/#!2/439d9/8)

尝试在它周围使用反引号。

```
 SELECT *
 FROM `users` u
 LEFT JOIN users_interests ui ON u.id = ui.user_id
 LEFT JOIN users_locations ul ON u.id = ul.user_id

 LEFT JOIN (SELECT 2 as interest UNION SELECT 3 as interest) as `is` 
     ON ui.interest_id = `is`.interest
 LEFT JOIN (SELECT 2 as location UNION SELECT 3 as location ) as `ls` 
     ON ul.location_id = `ls`.location

WHERE IF(ui.user_id IS NOT NULL, `is`.interest IS NOT NULL,1) 
 AND
 IF(ul.user_id IS NOT NULL, `ls`.location IS NOT NULL,1) 
```

# python - 不能在 virtualenv 中使用 wxPython？

> ID：14141431
> 
> 赞同：4
> 
> 时间：2013-01-03T15:03:10.720
> 
> 标签：python, wxpython, virtualenv

我制作了一个简单的 wxPython 脚本，它只显示一个窗口。当我使用 wxPython ( ) 在我的普通 python 2.7.3 中运行它时`import wx`，它工作正常。但是当我在 virtualenv 中运行它时，我得到以下信息：

```
Traceback (most recent call last):
  File "/Users/student/Desktop/text.py", line 3, in <module>
    class mainWindow(wx.Frame):
AttributeError: 'module' object has no attribute 'Frame' 
```

为什么是这样？我已经安装了 wx（`./pip install wx`在我的 virtualenv 的 bin 文件夹中）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-14T19:52:29.950

（我是 python 菜鸟）我会在这里评论我如何解决让 wx 在虚拟环境中工作，并在 Windows 上进行测试。

首先你创建你的virtualenv（我在项目目录中做了我的）

```
virtualenv env 
```

然后，转到 env\Lib\site-packages 文件夹，并在其中创建一个名为 wx.pth 的文件（名称无关紧要，只关心文件扩展名）

打开 wx.pth 文件并对其进行编辑，使其指向您的 wx-XX-msw，其中 XX 是您的 wx 版本号。我的是 3.0（2014 年 7 月）。它应该是这样的：

```
C:\Python27\Lib\site-packages\wx-3.0-msw 
```

激活你的 virtualenv。然后打开你的python shell，`import wx; app = wx.App()`如果你没有收到任何令人讨厌的消息，请尝试运行，那么你应该已经准备好了。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-12T02:45:31.940

对于其他人，这对我有用：

在 Mac OSX 上，我使用 Homebrew 安装了 wxpython：

```
brew install wxpython 
```

切换到您的 virtualenv 站点包目录：

```
cd /venv/lib/python2.7/site-packages 
```

然后链接 wx.pth

```
ln -s /usr/local/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/wx.pth wx.pth 
```

然后链接 wx-3.0-osx_cocoa 目录：

```
ln -s /usr/local/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/wx-3.0-osx_cocoa wx-3.0-osx_cocoa 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T15:17:04.367

我认为这些步骤不久前对我有用......

[虚拟环境中的 wxpython](http://codersbuffet.blogspot.com/2009/09/wxpython-in-virtualenv.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-02T19:55:18.713

[`wx`在 PyPI 上](https://pypi.python.org/pypi/wx/)是一个垃圾模块，它有一个微不足道的功能。不幸的是，有人为他们的“第一个 python 模块”获得了这个名字，这让很多人[感到困惑](http://sourceforge.net/p/pypi/support-requests/191/)和[恼火。](https://bitbucket.org/pypa/pypi/issue/62/please-delete-or-rename-the-wx-package)

`import`你给出的字符串`pip install`显然是不同的，例如`import PIL`and `pip install pillow`，或者几乎每个 Django 插件。在这里，你想要**`pip install wxpython`**

在 Ubuntu 上安装 wxPython 可能会有点痛苦，所以我建议使用`apt-get install python-wxgtk2.8`then（如果你的 venv 有`--no-site-packages`）将全局库文件夹符号链接到 virtualenv 的文件夹中来安装它：

```
nick@cody:~/sandbox/lib/python2.7/site-packages
$ ls -lhtr wx*
... wx.pth -> /usr/lib/python2.7/dist-packages/wx.pth
... wx-2.8-gtk2-unicode -> /usr/lib/python2.7/dist-packages/wx-2.8-gtk2-unicode/ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-29T01:05:54.640

这在 Windows virtualenv 中对我有用...

首先，去这里获取与你的系统匹配的 wxpython 的轮子二进制文件[http://www.lfd.uci.edu/~gohlke/pythonlibs/#wxpython](http://www.lfd.uci.edu/~gohlke/pythonlibs/#wxpython)

现在在你的 virtualenv 命令提示符下，确保你有轮子

```
>pip install wheel 
```

然后安装 wxpython common

```
>pip install wxPython_common-3.0.2.0-py2-none-any.whl 
```

最后安装 wxpython 本身

```
>pip install wxPython-3.0.2.0-cp27-none-win_amd64.whl 
```

现在在 virtualenv python 解释器中，通过创建并运行示例来检查安装是否成功

```
>python
...
>>> import wx
>>> app = wx.App(False)
>>> frame = wx.Frame(None, wx.ID_ANY, "Running from virtualenv!")
>>> frame.Show(True)
>>> app.MainLoop() 
```

如果出现一个窗口并且没有发生错误，那么你一切都很好:)

# gwt - ByteBuffer 到 GWT 中的字符串

> ID：14141432
> 
> 赞同：3
> 
> 时间：2013-01-03T15:03:13.437
> 
> 标签：gwt, playn, bytebuffer

在[PlayN](http://code.google.com/p/playn/)项目中，我有以下 Java 代码

```
import com.google.common.base.Charsets;
import java.nio.ByteBuffer;

ByteBuffer msg = ... // a ByteBuffer that contains a String
String s = Charsets.UTF_8.decode(msg).toString(); 
```

这在 Java 中运行良好，但是当我尝试使用 GWT 编译它时，我得到：

`The method decode(ByteBuffer) is undefined for the type Charset`

在 GWT 中，获取 ByteBuffer 内的字符串（以 UTF-8 编码）的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T16:14:02.023

从as a using`new String(bytes, "UTF-8")`中获取字节后，您应该可以使用。 此构造函数与 一起为 UTF-8 和 ISO-8859-1 实现。`ByteBuffer``byte[]``ByteBuffer#get(byte[])`
`String``getBytes(String)`

# wix - 有没有办法在 WIX 安装程序中创建符号链接？

> ID：14141436
> 
> 赞同：3
> 
> 时间：2013-01-03T15:03:28.643
> 
> 标签：wix, wix3, mklink

我需要为特定文件夹创建一个符号链接；该文件夹由 WIX 安装程序创建。有没有办法从 WIX 安装程序创建符号链接？我已经阅读过`mklink`，但我不知道如何在 WIX (v3) 中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T04:52:06.940

您可以使用自定义操作来运行 mklink。在 InstallFinalize 之后运行自定义操作。

或者您可以使用快捷方式而不是符号链接。

在自定义操作文件中：

```
[CustomAction]
    public static ActionResult symboliclink(Session session)
    {
        string filePath = session["FilePath"];
        string symboliclink = session["symboliclink"];
        Process p = new Process();

        p.StartInfo.FileName = "mklink.exe";
        p.StartInfo.Arguments = "/d" + symboliclink + " " + filePath;
        p.StartInfo.CreateNoWindow = true;
        p.StartInfo.UseShellExecute = false;
        p.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
        Environment.CurrentDirectory = Path.GetDirectoryName(p.StartInfo.FileName);
        p.Start();
        p.WaitForExit();

        return ActionResult.Success;
    } 
```

蜡文件：

```
<Binary Id="Symboliclink" SourceFile="Symboliclink.CA.dll" />   <CustomAction Id="SymbolicLink" BinaryKey="Symboliclink" DllEntry="symboliclink" Return="ignore" Execute="immediate" /> 
```

在 InstallExecuteSequence 中包含自定义操作

```
 <Custom Action="SymbolicLink" Sequence="6703"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:40:17.813

我使用 Shortcut 关键字创建了一个链接。我发现这是解决这个问题的最简单方法。请找到此代码。

```
<Component Id="XXXX" Guid="E4920A35-13E1-4949-BD3A-7DCC8A70C647">
          <File Id="xxXX" Name="xxXX.yyy" Source="..\Installer\Miscellaneous\xxXX.yyy" DiskId="1" Vital="yes" />
              <Shortcut Id="xxXX_link" Directory="Dir1" Name="xxXX.yyy" Target="[INSTALLLOCATION]xxXX.yyy" WorkingDirectory="INSTALLLOCATION" />
</Component> 
```

但这并不等同于符号链接。

# yii - 可以在 Yii 中修改模块（扩展）吗？

> ID：14141440
> 
> 赞同：0
> 
> 时间：2013-01-03T15:03:32.033
> 
> 标签：yii, yii-extensions

我是 Yii 框架的新手，刚刚接触到 Yii提供的**扩展**。但是我很困惑我们是否可以修改 Yii 提供的扩展。

比如我使用的是**Yii-user 模块**，现在如果我想更改这个模块提供的注册表单，那么我可以直接更改它（通过更改文件）吗？
**If - Yes** : Yii 版本升级会有问题吗？
**如果 - 否**：如何更改它（可能来自我们的自定义文件）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:09:08.547

Yii-user 模块由社区提供，不是官方的 yii 扩展，是的，您可以通过将其替换为另一个视图文件来进行修改，如果您的意思是一个类，修改它的最佳方法是扩展它并覆盖您想要更改的方法.

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:21:51.880

Yii 旨在构建自定义解决方案，您可以随意修改生成的“站点”中的任何内容，包括扩展名和受保护文件夹中的所有内容。然而，遵循 Yii 中使用的编码精神和标准无疑是一个从框架中充分受益的好习惯，你只能在使用 Yii 开发和重新开发一段时间后养成这样做的习惯。

升级 Yii 版本只更新框架目录中的文件，以便在您的站点部分进行更改是安全的。

如果您直接修改它们，则无法升级该单个扩展（因为现在您拥有自己的自定义版本）。如果您想保持扩展（受保护/扩展）的升级能力，按照 Cherif 的建议扩展扩展是一个不错的选择。

# javascript - 如何使用 Cordova 打开预先设计的数据库？

> ID：14141442
> 
> 赞同：0
> 
> 时间：2013-01-03T15:03:34.483
> 
> 标签：javascript, cordova, webview

我有一个 db 文件和一个数据库文件（sqlite3）的路径。

我试图将该文件传递给cordova，但我看不到它是如何工作的。

根据cordova，openDatabase() 有4 个变量。前任：

```
var shortName = "testDB";
var version = "1.0";
var displayName = "testDB";
var maxSize = 835456;

var db = openDatabase(shortName,version,displayName,mazSize); 
```

我可以传递 db 文件的路径吗？前任：

```
var shortName = '/var/mobile/Applcations/.../Application Support/com.my.project/someDb.db'; 
```

或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:18:32.670

Cordova 使用[Web SQL 数据库](http://www.w3.org/TR/webdatabase/)。 `shortName`是数据库的名称，而不是某个文件的路径。您必须使用`transaction`API 的方法编写脚本，将数据从 db 文件“迁移”到数据库。这是插入的示例：

```
db.transaction(function (tx) {
      tx.executeSql("INSERT INTO YOUR TABLE (columns) VALUES (values)");
}); 
```

# eclipse - eclipse更新时的依赖冲突；Common Navigator View 安装了三次

> ID：14141443
> 
> 赞同：0
> 
> 时间：2013-01-03T15:03:43.280
> 
> 标签：eclipse, eclipse-plugin, updates

由于以下错误，无法检查更新：

```
Cannot complete the install because of a conflicting dependency.
  Software being installed: Eclipse Java Development Tools 3.7.2.v20120120-1414-7z8gFcuFMP7BW5XTz0jLTnz0l9B1 (org.eclipse.jdt.feature.group 3.7.2.v20120120-1414-7z8gFcuFMP7BW5XTz0jLTnz0l9B1)
  Software currently installed: Shared profile 1.0.0.1317160331466 (SharedProfile_PlatformProfile 1.0.0.1317160331466)
  Only one of the following can be installed at once: 
    Common Navigator View 3.5.100.v20110809-2227 (org.eclipse.ui.navigator 3.5.100.v20110809-2227)
    Common Navigator View 3.5.100.I20110524-0800 (org.eclipse.ui.navigator 3.5.100.I20110524-0800)
    Common Navigator View 3.5.101.v20120106-1355 (org.eclipse.ui.navigator 3.5.101.v20120106-1355)
    Common Navigator View 3.5.100.dist (org.eclipse.ui.navigator 3.5.100.dist)
  Cannot satisfy dependency:
    From: Shared profile 1.0.0.1317160331466 (SharedProfile_PlatformProfile 1.0.0.1317160331466)
    To: org.eclipse.ui.navigator [3.5.100.dist]
  Cannot satisfy dependency:
    From: Eclipse Java Development Tools 3.7.2.v20120120-1414-7z8gFcuFMP7BW5XTz0jLTnz0l9B1 (org.eclipse.jdt.feature.group 3.7.2.v20120120-1414-7z8gFcuFMP7BW5XTz0jLTnz0l9B1)
    To: org.eclipse.platform.feature.group 3.7.2
  Cannot satisfy dependency:
    From: Eclipse Platform 3.7.2.v20120207-1839-9gF7UHPDFxGjd-PqDr2jX_4yKaumkoHTz04_q-q (org.eclipse.platform.feature.group 3.7.2.v20120207-1839-9gF7UHPDFxGjd-PqDr2jX_4yKaumkoHTz04_q-q)
    To: org.eclipse.ui.navigator [3.5.101.v20120106-1355] 
```

在选项卡上找不到任何`Common Navigator View`要卸载的内容。`Eclipse Platform Installation Deatails``Installed Software`

此对话框中没有任何条目允许卸载。

我在此对话框的选项卡中看到`Common Navigator View`条目`Plug-ins`，但此选项卡不允许卸载任何内容。我也只在那里看到`Common Navigator View`一次（不是三次）。

如何解决这种情况？

操作系统是 Ubuntu 11.10，可能`Eclipse`是通过内置包管理器安装的（不记得了）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:39:00.573

从描述来看，您似乎正在尝试安装“Java 开发工具”，它需要 navigator 3.5.101，而您似乎有某种共享的插件安装，其中一个插件需要不同版本的 navigator (3.5\. 100)。我建议您卸载导致此冲突的插件或尝试安装可能接受当前安装的 3.5.100 版本的稍旧版本的 JDT。

# php - mysql查询：如果到期日期=当前日期+登录时重定向？

> ID：14141449
> 
> 赞同：0
> 
> 时间：2013-01-03T15:03:52.940
> 
> 标签：php, mysql, login

我正在尝试向我的登录添加一个查询，以检查我的 sql 表中的 'subscription_expires' 列。这基本上检查用户的会员资格是否已过期，如果日期是当前日期 + 那么它应该重定向到另一个页面吗？

这是我的代码，但我不知道如何检查 subscription_expires 日期是否为当前日期 +

有人可以告诉我我该怎么做吗？谢谢。

```
// Check database to see if email and the hashed password exist there.
            $query = "SELECT id, email, close_account ";
            $query .= "FROM ptb_users ";
            $query .= "WHERE email = '{$email}' ";
            $query .= "AND password = '{$hashed_password}' ";
            $query .= "AND close_account = '0' ";
            $query .= "LIMIT 1";
            $result_set = mysql_query($query);
            confirm_query($result_set);
            if (mysql_num_rows($result_set) == 1) {
                // email/password authenticated
                // and only 1 match
                $found_user = mysql_fetch_array($result_set);
                $_SESSION['user_id'] = $found_user['id'];
                $_SESSION['email'] = $found_user['email'];
                $_SESSION['sub_expires'] = $found_user['subscription_expires'];
                $_SESSION['logged_in'] = true;

                $result = mysql_query("UPDATE ptb_users SET user_online='Online' WHERE id=".$_SESSION['user_id']."") 
or die(mysql_error());

                redirect_to("dashboard.php"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:21:32.463

我不确定您的重定向功能由什么组成，但您可以使用 header() 相应地重定向用户。

这段代码：

```
$_SESSION['sub_expires'] = $found_user['subscription_expires'];
$_SESSION['logged_in'] = true; 
```

将被替换为：

```
$_SESSION['sub_expires'] = $found_user['subscription_expires'];

if($_SESSION['sub_expires'] <= time()){
    header('Location: login.php');
    exit();
}else{
    $_SESSION['logged_in'] = true;
} 
```

如果过期时间 <= 到当前时间，此修改将导致重定向用户并退出页面。否则，用户仍处于登录状态，因此继续进行并设置`logged_in`会话变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:06:35.717

您可以这样尝试-（在 where 条件下添加了 subscription_expire）

```
// Check database to see if email and the hashed password exist there.
            $query = "SELECT id, email, close_account ";
            $query .= "FROM ptb_users ";
            $query .= "WHERE email = '{$email}' ";
            $query .= "AND password = '{$hashed_password}' ";
            $query .= "AND close_account = '0' ";
            $query .= "AND subscription_expires < now() ";
            $query .= "LIMIT 1"; 
```

我假设“subscription_expires”是一个时间戳/日期时间字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:13:09.520

这将是您根据存储时间完成重定向所需的逻辑。

**PHP**

```
// If you store a timestamp
$sub_time = $found_user['subscription_expires'];

// If you store a string date time
$user_time = new DateTime($found_user['subscription_expires']);
$sub_time = $user_time->format("U");

if($sub_time <= time())
{
    // Assuming this function works
    redirect_to("mypage.php");
} 
```

**解释**

我为存储的 unix 时间戳和存储的日期时间提供了一个工具。基本上我们验证订阅时间小于或等于当前时间（这意味着过期）并使用您的重定向功能将它们发送出去。

# django - 发现令人沮丧的 NoReverseMatch

> ID：14141450
> 
> 赞同：0
> 
> 时间：2013-01-03T15:03:58.190
> 
> 标签：django, django-templates

我很难调试这个特定的错误。我有以下内容`urls.py`：

```
url(r'^report/(?P<share_url>\w+)/$', 'share', 
  name='share'),
url(r'^report/(?P<share_url>\w+)/revoke/$', 'share_revoke',
  name='share_revoke'), 
```

在`views.py`我有：

```
def share(request, share_url):
  ...

@login_required
def share_revoke(request, share_url):
  ... 
```

在我的模板中，我有：

```
<a href='{% url share share_url %}'>Share</a>
<a href='{% url share_revoke share_url %}'>Revoke</a> 
```

当我尝试加载此模板时，我得到`NoReverseMatch`：

> ## /mypath/ 处的 NoReverseMatch
> 
> 未找到带有参数“（u'Sh4rE'，）”和关键字参数“{}”的“share_revoke”的反向操作。

为什么第二个网址而不是第一个网址失败？我已登录。

在外壳上试试这个：

```
>>> reverse('share',args=(u'klajsdf',))
'/report/klajsdf/'

>>> reverse('share_revoke',args=(u'klajsdf',))
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/home/ubuntu/virt/virt1/local/lib/python2.7/site-packages/django/core/urlresolvers.py", line 476, in reverse
    return iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs))
  File "/home/ubuntu/virt/virt1/local/lib/python2.7/site-packages/django/core/urlresolvers.py", line 396, in _reverse_with_prefix
    "arguments '%s' not found." % (lookup_view_s, args, kwargs))
NoReverseMatch: Reverse for 'share_revoke' with arguments '(u'klajsdf',)' and keyword arguments '{}' not found. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:05:23.527

这最终不是问题。我的问题是 SublimeText2 SFTP 感到困惑并且没有覆盖`urls.py`我的服务器上的，因此大量的 wtf。

# java - Tomcat 上的 AbstractMethodError setBinaryStream

> ID：14141452
> 
> 赞同：1
> 
> 时间：2013-01-03T15:04:00.810
> 
> 标签：java, tomcat, jpa, tomcat6, jndi

我正在tomcat上开发一个由hibernate支持的JPA应用程序。我们也在使用 Spring 和 AOP。该数据库是 DB2 9.7 社区版。我们使用 Spring JNDI 查找从 tomcat 检索数据源。

这是一个与 Liferay 门户捆绑在一起的 tomcat 6.0.26。更新 tomcat 不是一个选项，因为我们在将 Liferay 升级到更新版本/捆绑包时遇到问题。

在我们的测试用例中，持久化运行良好，但是使用 tomcat 我们得到以下异常。该应用程序运行良好，直到我想要存储附件。

```
Caused by: java.lang.AbstractMethodError: org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.setBinaryStream(ILjava/io/InputStream;J)V
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
at $Proxy432.setBinaryStream(Unknown Source)
at org.hibernate.type.descriptor.sql.BlobTypeDescriptor$4$1.doBind(BlobTypeDescriptor.java:163) 
```

查看其他问题[为什么在尝试在数据库中加载 blob 时会出现 java.lang.AbstractMethodError？](https://stackoverflow.com/questions/1194990/why-do-i-get-java-lang-abstractmethoderror-when-trying-to-load-a-blob-in-the-db)问题似乎是使用了 jdbc3 驱动程序而不是 jdbc4 驱动程序。但是我确保我们拥有正确的 DB2 驱动程序版本“db2jcc4.jar 4.14.113”。相同的驱动程序适用于我们的测试用例。

当一个人在别处搜索时，问题是 setBinaryStream 是用 long 而不是 int 调用的，但是由于我不直接调用任何东西，所以我无法更改它。

相关实体：

```
@Table( name = "ATTACHMENT")
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(namespace = "somenamespace", name = "Attachment")
public class Attachment implements Serializable {
   private static final long serialVersionUID = 1L;

    /**
    */
   @GeneratedValue(strategy = GenerationType.IDENTITY)
   @Column(name = "ID", nullable = false)
   @Basic(fetch = FetchType.EAGER)
   @Id
   @XmlElement
   Integer id;
   /**
    */

   @Column(name = "ATTACHMENT", nullable = false)
   @Basic(fetch = FetchType.EAGER)
   @Lob
   @XmlElement
   byte[] attachment;

      .. getters/setters and other properties
} 
```

可以做些什么来规避问题，以便像在测试用例中一样保存实体？

**更新：**可能不是 db 驱动程序本身，但 tomcat 连接池不符合 JDBC4。[Tomcat 6 文档](http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html#Database_Connection_Pool_%28DBCP%29_Configurations)说“DBCP 1.3 提供对 JDBC 3.0 的支持。” 。[在查看tomcat-dbcp vs commons-dbcp](https://stackoverflow.com/questions/4711943/tomcat-dbcp-vs-commons-dbcp)时，用普通的 dbcp 交换它似乎不是一个好主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:20:41.630

过了一会儿，我找到了解决办法。

我下载了tomcat 7并复制了tomcat-dbcp。

tomcat-dbcp 7 包含 dbcp 1.4 并提供 JDBC 4.0 支持。

# javascript - 画一个漂亮的整齐弧线，没有大的直角，而是有漂亮的角落

> ID：14141458
> 
> 赞同：0
> 
> 时间：2013-01-03T15:04:13.277
> 
> 标签：javascript, vector, path, automatic-ref-counting, raphael

我已经制作了一条弧线，`Raphael`我的目标只是一个没有大直角的弧线。

所以只有一条没有直角的平滑曲线。

它非常基本，使用拉斐尔椭圆弧。

您可以在[http://jsfiddle.net/mailrox/uuAjV/1/看到它](http://jsfiddle.net/mailrox/uuAjV/1/)

这是代码：

```
 var raph = Raphael(0, 0, 1000, 1000);

var x = 150;
var y = 150;
var r = 100; //radius
var value = 100;
var maxValue = 360;

var pi = Math.PI;
var cos = Math.cos;
var sin = Math.sin;
var t = (pi/2) * 3; //translate
var rad = (pi*2 * (maxValue-value)) / maxValue + t;

var p = [
  "M", x, y,
  "l", r * cos(t), r * sin(t),
  "A", r, r, 0, +(rad > pi + t), 1, x + r * cos(rad), y + r * sin(rad),
  "z"
];

var param = {"stroke-width": 30}

var d = raph.path(p).attr(param); 
```

我已经完成的一种方法是我可以掩盖直线的直角部分，但是我宁愿没有这个并且只拥有一次漂亮的曲线，而不是同时管理当前路径和顶部的掩码。

非常感谢一些帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:09:26.430

试试这个。只需从 SVG 路径定义中取出关闭路径（“z”）（注意我没有测试这个解决方案）：

```
var raph = Raphael(0, 0, 1000, 1000);

var x = 150;
var y = 150;
var r = 100; //radius
var value = 100;
var maxValue = 360;

var pi = Math.PI;
var cos = Math.cos;
var sin = Math.sin;
var t = (pi/2) * 3; //translate
var rad = (pi*2 * (maxValue-value)) / maxValue + t;

var p = [
  "M", x, y,
  "l", r * cos(t), r * sin(t),
  "A", r, r, 0, +(rad > pi + t), 1, x + r * cos(rad), y + r * sin(rad)
];

var param = {"stroke-width": 30}

var d = raph.path(p).attr(param); 
```

[jsFiddle](http://jsfiddle.net/xzrZU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:08:23.000

您可以扩展`Raphael`对象以包含`arc`函数。

弧计算已从 Raphael 的“极地时钟”演示中修改：[http ://raphaeljs.com/polar-clock.html](http://raphaeljs.com/polar-clock.html)

演示：http: [//jsfiddle.net/TmVHq/](http://jsfiddle.net/TmVHq/)

```
Raphael.fn.arc = function(cx, cy, value, total, radius) {
    var alpha = 360 / total * value,
        a = (90 - alpha) * Math.PI / 180,
        x = cx + radius * Math.cos(a),
        y = cy - radius * Math.sin(a),
        path;

    if (total === value) {
        path = [['M', cx, cy - radius], ['A', radius, radius, 0, 1, 1, (cx - 0.01), cy - radius]];
    } else {
        path = [['M', cx, cy - radius], ['A', radius, radius, 0, +(alpha > 180), 1, x, y]];
    }

    return this.path(path);
}

var Paper = new Raphael('canvas', 300, 300);
var arc = Paper.arc(150, 150, 270, 360, 100);
arc.attr('stroke-width', 15);​ 
```

# php - Javascript 函数在 IE 中不起作用

> ID：14141464
> 
> 赞同：0
> 
> 时间：2013-01-03T15:04:32.923
> 
> 标签：php, javascript, function, fusioncharts

我将一个函数与**FusionCharts**结合使用。如果找不到数据，我正在使用一个摆脱图表的函数。该函数来自 FusionCharts。

它在 Firefox 和 Chrome 上运行良好，但在 IE 中破坏了整个 Drupal 页面。你能看一下代码，看看我是否写错了。谢谢。

```
<script type='text/javascript'><!--
    FusionCharts('Yield_Tab_3a_Growth_of_100000').addEventListener (
        ['NoDataToDisplay', 'DataXMLInvalid'],
        function() {
            FusionCharts('Yield_Tab_3a_Growth_of_100000').dispose(); 
        }
    );
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:23:08.537

正如其他人所提到的，主要问题是您缺少评论的结尾，但是防止 JavaScript 干扰您的 HTML 标记的更现代的方法是使用 CDATA 块：

```
<script type='text/javascript'>
   //<![CDATA[
    FusionCharts('Yield_Tab_3a_Growth_of_100000').addEventListener (
        ['NoDataToDisplay', 'DataXMLInvalid'],
        function() {
            FusionCharts('Yield_Tab_3a_Growth_of_100000').dispose(); 
        }
    );
   //]]>
</script> 
```

尽管在这种情况下这并不是真正必要的，因为您没有在代码中使用任何 < 或 & 符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:13:00.963

**删除`<!--`.** 你不应该再使用这些评论标签了。 [https://stackoverflow.com/a/808850/897559](https://stackoverflow.com/a/808850/897559)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:09:27.700

我看到您从一开始就缺少一个评论标签。IE 可能对此更敏感一些

```
<script type='text/javascript'><!--
    FusionCharts('Yield_Tab_3a_Growth_of_100000').addEventListener (
        ['NoDataToDisplay', 'DataXMLInvalid'],
        function() {
            FusionCharts('Yield_Tab_3a_Growth_of_100000').dispose(); 
        }
    );
    //-->
</script> 
```

我添加的行就在上面

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T15:09:36.287

您的标签`//-->`之前似乎缺少 a ：`</script>`

```
<script type='text/javascript'><!--
    FusionCharts('Yield_Tab_3a_Growth_of_100000').addEventListener (
        ['NoDataToDisplay', 'DataXMLInvalid'],
        function() {
            FusionCharts('Yield_Tab_3a_Growth_of_100000').dispose(); 
        }
    );
    //-->
</script> 
```

没有它，您将拥有一个未关闭的 HTML 注释。这可能会严重破坏您的页面。

`-->`: HTML 注释结束
`//`:`-->`在你的 JavaScript 中注释掉，以防止语法错误。

**但是，现在您可以完全删除评论：**

```
<script type='text/javascript'>
    FusionCharts('Yield_Tab_3a_Growth_of_100000').addEventListener (
        ['NoDataToDisplay', 'DataXMLInvalid'],
        function() {
            FusionCharts('Yield_Tab_3a_Growth_of_100000').dispose(); 
        }
    );
</script> 
```

# java - Java ExecutorService 任务生成

> ID：14141467
> 
> 赞同：1
> 
> 时间：2013-01-03T15:04:41.803
> 
> 标签：java, coding-style, refactoring, executorservice

我有一个`ExecutorService`用于处理任务流的。这些任务由我的`DaemonTask`班级表示，每个任务都构建一个响应对象，该对象被传递给响应调用（不在本问题的范围内）。我正在使用`switch`语句根据任务 id 生成适当的任务`int`。它看起来像;

```
//in my api listening thread
executorService.submit(DaemonTask.buildTask(int taskID)); 
```

* * *

```
//daemon task class
public abstract class DaemonTask implements Runnable {

    public static DaemonTask buildTask(int taskID) {
        switch(taskID) {
            case TASK_A_ID: return new WiggleTask();
            case TASK_B_ID: return new WobbleTask();
            // ...very long list ...
            case TASK_ZZZ_ID: return new WaggleTask();
        }
    }

    public void run() {
        respond(execute());
    }

    public abstract Response execute();
} 
```

* * *

我的所有任务类（例如`WiggleTask()`）`extend DaemonTask`并提供该`execute()`方法的实现。

**我的问题很简单；这种模式合理吗？当我查看带有所有返回语句的巨大开关盒时，感觉有些不对劲。我试图以某种方式使用反射提出一个更优雅的查找表解决方案，但似乎无法找到一种可行的方法。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:08:15.863

您可以使用`enum`：

```
public enum TaskBuilder
{
    // Task definitions
    TASK_A_ID(1){
        @Override
        public DaemonTask newTask()
        {
            return new WiggleTask();
        }
    },
    // etc

    // Build lookup map
    private static final Map<Integer, TaskBuilder> LOOKUP_MAP
        = new HashMap<Integer, TaskBuilder>();

    static {
        for (final TaskBuilder builder: values())
            LOOKUP_MAP.put(builder.taskID, builder);
    }

    private final int taskID;
    public abstract DaemonTask newTask();

    TaskBuilder(final int taskID)
    {
        this.taskID = taskID;
    }

    // Note: null needs to be handled somewhat
    public static TaskBuilder fromTaskID(final int taskID)
    {
        return LOOKUP_MAP.get(taskID);
    }
} 
```

使用这样的枚举，您可以执行以下操作：

```
TaskBuilder.fromTaskID(taskID).newTask(); 
```

另一种可能性是使用构造函数字段而不是方法，即使用反射。它更容易编写并且工作正常，但是异常处理就变成了一场噩梦：

```
private enum TaskBuilder 
{                                                 
    TASK_ID_A(1, WiggleTask.class),
    // others

    // Build lookup map
    private static final Map<Integer, TaskBuilder> LOOKUP_MAP
        = new HashMap<Integer, TaskBuilder>();

    static {
        for (final TaskBuilder builder: values())
            LOOKUP_MAP.put(builder.taskID, builder);
    }

    private final int index;
    private final Constructor<? extends DaemonTask> constructor;

    TaskBuilder(final int index, final Class<? extends DaemonTask> c)
    {
        this.index = index;
        // This can fail...
        try {
            constructor = c.getConstructor();
        } catch (NoSuchMethodException e) {
            throw new ExceptionInInitializerError(e);
        }
    }

    // Ewww, three exceptions :(    
    public DaemonTask newTask()
        throws IllegalAccessException, InvocationTargetException,
        InstantiationException
    {
        return constructor.newInstance();
    }

    // Note: null needs to be handled somewhat
    public static TaskBuilder fromTaskID(final int taskID)
    {
        return LOOKUP_MAP.get(taskID);
    }
} 
```

这个枚举可以像另一个枚举一样使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:11:11.587

你真的需要这么多课吗？每个 taskId 可以有一个方法。

```
final ResponseHandler handler = ... // has many methods.

// use a map or array or enum to translate transIds into method names.
final Method method = handler.getClass().getMethod(taskArray[taskID]); 
executorService.submit(new Callable<Void>() {
    public Void call() throws Exception {
         method.invoke(handler);
    }
}); 
```

如果你必须有很多课程，你可以这样做

```
// use a map or array or enum to translate transIds into methods.
final Runnable runs = Class.forName(taskClassArray[taskID]).newInstance(); 
executorService.submit(new Callable<Void>() {
    public Void call() throws Exception {
         runs.run();
    }
}); 
```

# objective-c - 控制声音xcode的速度

> ID：14141475
> 
> 赞同：3
> 
> 时间：2013-01-03T15:05:11.930
> 
> 标签：objective-c, ios, audio, slider, slowdown

我想知道是否可以减慢 xcode 中的声音。我的意思是我将在 xcode 的支持文件中添加一些 .mp3 文件，然后我将创建能够加快或减慢速度的应用程序。例如使用滑块。甚至可能吗？如果是，任何人都可以帮助我一些想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:15:09.110

AVAudioPlayer 有一个 rate 属性，它应该能够帮助您实现目标。 [http://developer.apple.com/library/IOS/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html](http://developer.apple.com/library/IOS/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)

> 音频播放器的播放速率。@property 浮动利率
> 
> 讨论
> 
> 此属性的默认值 1.0 提供正常播放速率。可用范围从 0.5（半速播放）到 2.0（双速播放）。
> 
> 要设置音频播放器的播放速率，您必须首先启用速率调整，如 enableRate 属性描述中所述。

我还发现了一个关于 AVAudioPlayer 费率的好帖子： [AVAudioPlayer rate](https://stackoverflow.com/questions/11131631/avaudioplayer-rate)

似乎就像您提到的那样，您可以设置一个值从 0.5 到 2.0 的滑块，并在 valuechanged 上通过使用修改音频播放器速率

```
- (IBAction)changeValue:(UISlider *)sender
{
    //made up assumed ivar names
    if ([_audioPlayer respondsToSelector:@selector(setEnableRate:)])
        _audioPlayer.enableRate = YES;
    if ([_audioPlayer respondsToSelector:@selector(setRate:)])
        _audioPlayer.rate = [NSNumber numberWithFloat:slideValue];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:17:22.220

以比采样率更快或更慢的速率播放 PCM 音频会改变其音调，并且还会引入大量伪影。如果您对此感到满意，您将使用的方法是将 MP3 解码为 PCM 音频，然后使用[直接数字合成振荡器](http://www.electricdruid.net/index.php?page=info.dds)来控制播放速率。

如果你想保持音高但改变速度，你需要一个音频时间拉伸算法。

来自[DSP Dimension的](http://www.dspdimension.com)[Dirac3](http://www.dspdimension.com/technology-licensing/dirac/)是可以做到这一点的商业产品，并且可以在 iOS 应用程序中获得使用许可。存在其他商业解决方案。

DSP Dimension 的[博客](http://www.dspdimension.com/admin/pitch-shifting-using-the-ft/)提供了一个有用的教程，介绍了如何使用 FFT 实现音高变换的基础知识。时间拉伸本质上是相同的过程。但是，他们没有告诉您的 DIRAC 插件中有相当多的秘诀。

请注意，除非您是电子工程、物理或数学专业的毕业生，否则您可能很难填补空白。

# c++ - 编译时带有 boost::split 的警告

> ID：14141476
> 
> 赞同：8
> 
> 时间：2013-01-03T15:05:12.553
> 
> 标签：c++, visual-studio-2010, boost

> **可能重复：**
> [为什么调用 boost:split() 会给出这么多警告？](https://stackoverflow.com/questions/9653155/why-does-calling-boostsplit-give-so-many-warnings)

所以，这是我的代码：

```
Account ParseString(string data){
    vector <string> fields;
    boost::split( fields, data, boost::is_any_of( "a,;" ));
    int limit = fields.size();
    for(int i = 0; i < limit; i++)
        cout << fields[i] << endl;
} 
```

这就是我在尝试编译时得到的：

```
d:\program files (x86)\visualstudio\vc\include\xutility(2227): warning C4996: 'std::_Copy_impl': Function call with parameters that may be unsafe - this call relies on the caller to check that the passed values are correct. To disable this warning, use -D_SCL_SECURE_NO_WARNINGS. See documentation on how to use Visual C++ 'Checked Iterators' 
```

我的问题是，我做错了什么？我能做些什么来防止这些错误消息？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T15:25:10.080

你没有做错任何事。Visual Studio 过于谨慎。在调试模式下，Visual Studio 使用一种叫做“检查迭代器”的东西。指针也是迭代器，但检查机制不适用于它们。因此，当使用指针调用标准库算法时`boost::split`，它会发出此警告。

使用这个明显安全的代码，你会得到同样的警告：

```
int main()
{
    int x[10] = {};
    int y[10] = {};
    int *a = x, *b = y;
    std::copy(a, a+10, b);
} 
```

禁用警告。这是给初学者的。为了初学者的安全，它默认是打开的，因为如果它默认关闭，他们将不知道如何打开它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:22:34.687

您没有做错任何事，如果您查看警告，它似乎并不那么可怕:) 另外我相信在这种情况下，您不需要对该警告执行任何操作。

# php - 忽略 preg_match_all 中的特定 html 类

> ID：14141478
> 
> 赞同：0
> 
> 时间：2013-01-03T15:05:12.130
> 
> 标签：php, html-parsing

> **可能重复：**
> [获取 A 元素的 href 属性](https://stackoverflow.com/questions/3820666/grabbing-the-href-attribute-of-an-a-element)

我正在尝试对 preg_match_all 标签做特定的事情，但是，有一种类型我想忽略 preg_match_all。我考虑过给 img 一个类，让 preg_match_all 忽略所有类“忽略”的 img。

换句话说，做一个 preg_Match_all ，如果你发现“忽略”这个词，跳过它。

到目前为止，我的代码是：

```
preg_match_all( '/<img\s+.*?>/', $content, $matches ); 
```

但这可以检测所有img，我坚持如何忽略其中带有“忽略”一词的那些。

希望有人能帮帮我，谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:08:41.280

```
$str = '<img src="path_to_image0"><img src="path_to_image1" class="ignored">';

preg_match_all("/<img(.*|!ignored)>/",$str,$matches);

echo '<pre>';
print_r($matches[1]);
echo '</pre>'; 
```

# architecture - 具有用户生成应用程序的信息系统

> ID：14141482
> 
> 赞同：0
> 
> 时间：2013-01-03T15:05:18.283
> 
> 标签：architecture, amazon-web-services, sandbox

我正在开发一个具有一些基本功能、API 和集成应用程序概念的网络平台（类似于 Facebook 应用程序的概念）。我知道该怎么做，但挑战是我想为用户托管应用程序，并且我想根据应用程序的使用情况（这是一种动态行为）将计算能力和带宽分配给应用程序。

我不想在应用程序方面陷入特定的软件开发框架，因此我看到的唯一解决方案是以某种方式对每个应用程序的 Apache 实例进行沙盒处理，并动态修改此类沙盒的限制。

你会如何处理这个问题？你知道我可以读到的关于这类事情的资源吗？

非常感谢您的意见，HGN。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:07:35.760

为什么要强制使用apache？

为什么不只是托管一个虚拟机，有很多管理设施可以做到这一点和现有技术。

# android - 如何仅有时显示Android进度条

> ID：14141483
> 
> 赞同：0
> 
> 时间：2013-01-03T15:05:19.733
> 
> 标签：android, android-progressbar

我只想在 new 时显示进度条`MainActivity(detail)`。`MainActivity(detail)`用于向用户发送邮件。我所需要的只是单击按钮时，应该显示进度条并开始。然后当发送邮件时，进度条隐藏或结束。

到目前为止，这是我的代码：

```
OnClickListener listener=new OnClickListener()
    {   
        @Override
        public void onClick(View v)
        {
        pb=(ProgressBar)findViewById(R.id.progressBar1);
        pb.setVisibility(View.VISIBLE);

        if(isNetworkAvailable())
        {
        // TODO Auto-generated method stub
            SharedPreferences pref=getSharedPreferences("Pref", MODE_PRIVATE);
            String str=pref.getString("un1", "");
            String str1=pref.getString("pa1", "");

            SQLiteDatabase db=context.openOrCreateDatabase("IPCA", MODE_PRIVATE,null);
            Databasesignup dbs=new Databasesignup(context,"IPCA", null,1);
            dbs.onCreate(db);

            Cursor cursor=dbs.view(db,str,str1);

            ArrayList<String> al=new ArrayList<String>();
            while(cursor.moveToNext())
            {
                al.add(cursor.getString(0));
                al.add(cursor.getString(1));
                al.add(cursor.getString(5));
            }

            String string=al.get(0);
            String string1=al.get(1);
            String string2=al.get(2);
            String k=iv.getTag().toString();

            dbs.insert1(db,string,str,string2,k);

            final String detail ="\nName: "+string+"\nEmail: "+string1+"\nMobile: "+string2+"\nInterest: "+k;
            new MainActivity(detail);

            cursor.close();
            db.close();

            Toast.makeText(getApplicationContext(),"You will be contacted soon", Toast.LENGTH_LONG).show();
        }` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:11:17.040

由于您正在访问网络，因此您需要将整个操作移至后台。这是使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)最简单的方法。然后，您可以显示您的`ProgressBar`in`onPreExecute()`并将其隐藏在`onPostExecute()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:16:21.957

您可以通过更改 ProgressBar 的可见性来隐藏它。

```
ProgressBar pBar = (ProgressBar)findViewById(R.id.your_progress_bar);
// To hide the Progress Bar set visibility to GONE.
pBar.setVisibility(View.GONE);
// To show the Progress Bar again set visibility to VISIBLE
pBar.setVisibility(View.VISIBLE); 
```

# mod-rewrite - 谁能帮我处理 URL 重写

> ID：14141488
> 
> 赞同：2
> 
> 时间：2013-01-03T15:05:29.930
> 
> 标签：mod-rewrite

我是 URL 重写的初学者，我有一个问题。这是我的规则的一部分：

```
RewriteRule ^admin/page1/?$ admin/page1.php
RewriteRule ^admin/page2/?$ admin/page2.php
RewriteRule ^admin/page3/?$ admin/page3.php
<more similar lines> 
```

所有这些 page(x) 都是不同的 php 文件。现在重写工作正常，但是有可能缩短这一切吗？例如：

```
RewriteRule ^admin/(.*)/?$ admin/$1\(.php) (or whatever...) 
```

感谢您的回答:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:10:48.300

你可以这样试试——

```
RewriteRule ^(.*)/(.*)/$ admin/$2.php?{QUERY_STRING} 
```

代码未经测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:12:43.720

是的，你会这样做：

```
RewriteRule ^admin/(.*)/?$ admin/$1.php 
```

但是，这将匹配`admin//`并将其更改`admin/.php`为我确定*不是*您想要的。所以，使用 a`+`而不是 a `*`：

```
RewriteRule ^admin/(.+)/?$ admin/$1.php 
```

* * *

请注意，您拥有的规则也将匹配`admin/folderX/pageX`。如果您不想要这种行为，请尝试：

```
RewriteRule ^admin/([^/]+)/?$ admin/$1.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T21:09:57.897

这个真的很好看

```
<IfModule mod_rewrite.c>                                                                                                                                                                                                                     
    RewriteEngine On                                                                                                                                                                                                                         
    RewriteCond %{REQUEST_FILENAME} !-d                                                                                                                                                                                                      
    RewriteCond %{REQUEST_FILENAME} !-f                                                                                                                                                                                                      
    RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]                                                                                                                                                                                              
</IfModule> 
```

你把它放在你的 .htaccess 中，然后如果 URL 是，例如 /projects/ ，在你的 index.php 中，你会在参数 $_GET['url'] 中收到它。然后我建议你使用 explode('/ ', $_GET['url']);

这是最简单和最基本的 URL 重写，几乎适用于任何事情。

如果指定的 URL 是文件系统中的现有文件，它将为您提供该文件，否则它将在您的 index.php 代码的 GET 参数中提供 URL

# tridion - 在标签页 GUI 扩展中，ext:pagetype 节点有什么作用？

> ID：14141498
> 
> 赞同：9
> 
> 时间：2013-01-03T15:05:58.980
> 
> 标签：tridion, tridion-2011

我有一个 GUI 扩展添加一个选项卡 (ext:tabpage) 到视图。

ext:pagetype 节点有什么作用？我一直在使用 Namespace:Name ，如下所示。该值还有其他选择吗？

```
<ext:pagetype>RC.TabExtension</ext:pagetype> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T15:22:53.287

它允许您为该选项卡提供特定的 JavaScript 实现。

如果你指定了一个 JavaScript 类的全名并且它实现了`Tridion.Controls.DeckPage`接口，它将使用那个实现作为选项卡。

如果它不是一个类或者它没有实现接口，它只会使用默认实现。

（选项卡继承自 Decks，以防您想知道）

# bitmap - 从 MPEG-2 节目/传输流中获取位图信息？

> ID：14141499
> 
> 赞同：1
> 
> 时间：2013-01-03T15:06:02.880
> 
> 标签：bitmap, marshalling, directshow, directshow.net

为了在我的 WPF 应用程序中呈现 DirectShow 图形，我使用示例抓取器将位图写入内存，并在代码的其他位置读取它。这似乎是一个奇怪的解决方案，但似乎是从中获得 WPF 画笔的唯一方法。

以下代码为我提供了我需要的有关位图的信息：

```
AMMediaType mt = grabber.GetConnectedMediaType();
VideoInfoHeader header = (VideoInfoHeader)Marshal.PtrToStructure(mt.formatPtr, typeof VideoInfoHeader);
header.BmiHeader // ... 
```

现在，`header.BmiHeader`是[BitmapInfoHeader](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318229%28v=vs.85%29.aspx)类型，并提供位图的**宽度**和**高度**等信息。我需要这些信息来将位图写入内存。

但是，此代码似乎并不总是有效。例如，当采样采集器过滤器连接到 MPEG-2 节目流引脚时，`header`将是`null`. 为什么我的代码不适用于某些媒体类型，还有什么其他方法可以获得它的 BitmapInfoHeader 结构？

请注意，即使我使用的是[directshow.net](http://directshownet.sourceforge.net/)库，也欢迎使用 C++ 回答。

**编辑**：这就是我的图表的样子：

```
*source* -> MPEG2-Demultiplexer -> SampleGrabber -> MS DTV-DVD Video Decoder -> Video Renderer 
```

我不允许将抓取器放在解码器和渲染器之间。关于 demux 的视频引脚：

```
Major Type: Video

Sub Type: MPEG2_VIDEO
Format: MPEG2Video 
```

连接采样采集器后，它的输入引脚也具有上述媒体类型。当我在我的应用程序中打开这个图形文件并使用`grabber.GetConnectedMediaType();`时，我也得到了相同的媒体类型。但是，这种媒体类型的`formatPtr`或（`pbFormat`在 C++ 中）为 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:53:51.927

如果你想要一个位图，你需要将样本采集器放在你接收未压缩视频的地方。当采样器位于 MPEG-2 节目流引脚后面时，您将收到一个 mpeg2 节目流。当然可以从中得到一个位图，但是你需要手动解复用和解压缩。两者都是您要在 directshow 过滤器中执行的任务。

但即使您收到未压缩的视频，您仍可能会获得不同的格式。根据解码器的不同，您可以接收 RGB24、YUY2、YV12，... 检查 MediaSubType 以了解您收到的内容。如果您总是想接收 RGB24，您可以使用 sdk 中包含的 RGBFilters/TransNull24 过滤器。另请参阅[此答案](https://stackoverflow.com/a/6440568/33499)。

**编辑**：还有一点需要注意，如果您不仅需要分辨率，还需要位图本身，则必须将采样器放在解码器和渲染器之间。如果 MS 解码器不工作，请尝试[ffdshow](http://ffdshow-tryout.sourceforge.net/)。

# qt - QGraphicsWebView 使用未使用的白条错误地水平扩展（window.outerWidth >> window.innerWidth）

> ID：14141501
> 
> 赞同：0
> 
> 时间：2013-01-03T15:06:08.690
> 
> 标签：qt, jquery-mobile, qt4, qtwebkit

我正在使用的视图层次结构

**QMainWindow** >**中央小部件**> **QVBoxLayout** > **QGraphicsView (800x600 固定)** >从 QGraphicsScene > **QGraphicsWebView** (800x600)**派生的类**

 **当我加载一个 jQuery Mobile 驱动的 HTML 文件并使用页面之间的水平滑动过渡时，值`window.outerWidth`增长到 2400 像素。但是实际的页面宽度和 的值`window.innerWidth`仍然是 800。Web 视图然后在左右显示 800 像素宽的白条（水平滚动条也扩展到 2400 像素），中间是新的 jQM“页面”。在白条中单击鼠标右键*不会*显示 QtWebView 上下文菜单，但在中间单击鼠标右键有效。我启用了开发人员工具 [1]，它告诉我 HTML、BODY 和 DATA-ROLE="page" 元素的正确宽度为 800 像素。

这适用于 Firefox 和 Chrome 等浏览器，所以我认为这是 Qt 的 web 视图实现中的一个错误或我错过的设置。问题似乎来自这样一个事实，即在转换期间滑入/滑出的 jQM 页面被考虑为宽度。为什么会`window.outerWidth`得到这样一个错误的值？请注意，Web 视图上的任何大小策略都不起作用。有什么想法我还能尝试吗？

* * *

[1] “检查”上下文菜单选项：

```
QWebSettings::globalSettings()->setAttribute(
    QWebSettings::DeveloperExtrasEnabled,
    true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:01:41.797

通过升级到具有最新 WebKit 的 Qt 5 解决了这个问题。然而，它会带来新的麻烦，所以在切换到新发布的 5.0.0 之前，请先尝试其他网页是否正常工作。**

# grails - Grails：映射字段的列名和相同类型的belongsTo

> ID：14141506
> 
> 赞同：4
> 
> 时间：2013-01-03T15:06:15.633
> 
> 标签：grails, types, mapping, belongs-to

我正在尝试映射此类的列名：

```
class Amount{

    String total //Total amount of something
    String type  //Type of amount, Dollars, %, Times something
    Bonification bonificationRate  //the amount can be "x times another bonification"

    static belongsTo = [parentBonification: Bonification]

    static mapping = {
       table "AMOUNTS"
       total column: "AMOU_TTOTAL"
       type column: "AMOU_TTYPE"
       parentBonification column: "BONI_CID"
       bonificationRate column: "BONI_TRATE_CID"
    }

}

class Bonification {  
    //among other things:  
    Amount amount
} 
```

问题是在数据库中没有创建具有类的字段`Bonification`，没有使用我给它们的名称，也没有使用默认的假定名称。

评论编辑：

1.  两者都是域类；
2.  数据源已开启`dbCreate = "update"`
3.  我在 Oracle 中删除了表，让 Grails 再次创建它。仍然没有 Bonification 列。
4.  我不能`dbCreate = "create-drop"`，因为有我现在无法删除的数据。
5.  我用`dbCreate = create-drop`. 仍然没有运气。

**（PD：所有其他字段都被保留并使用正确的列名映射，只有这两个`Bonification`字段是问题）**
还有其他方法吗？

> Grails：1.3.9
> BD：Oracle 9

**编辑询问的 DataSource.groovy** （从 Config.groovy 访问的外部文件 `grails.config.locations = [ "file:${extConfig}/${appName}Config.groovy"]`）

```
package xx.xxx.xxxx.xxxXxxx

dataSource 
{
    pooled = true
    dialect = "org.hibernate.dialect.Oracle10gDialect"
    driverClassName = "oracle.jdbc.OracleDriver"    
    username = "XXX"
    password = "XXX" 
    properties {
                maxActive = 100
                maxIdle = 25
                minIdle = 5
                initialSize = 5
                minEvictableIdleTimeMillis = 60000
                timeBetweenEvictionRunsMillis = 60000
                maxWait = 10000
                validationQuery = "select 1 from dual"
                }

}
hibernate {
    cache.use_second_level_cache = true
    cache.use_query_cache = true
    cache.provider_class = 'net.sf.ehcache.hibernate.EhCacheProvider'
}

// environment specific settings
environments {
    development {
println "Including external DataSource"
        dataSource {            
            dbCreate = "update"
            url = "jdbc:oracle:thin:@xxx.xxx.xx:xxxx:XXXX"
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T20:35:01.573

好的，我终于明白了。

我使用了“mappedBy”属性。

[http://grails.org/doc/2.1.0/ref/Domain%20Classes/mappedBy.html](http://grails.org/doc/2.1.0/ref/Domain%20Classes/mappedBy.html)

文档（[6.2.1.2 One-to-many](http://grails.org/doc/latest/guide/GORM.html)）说这是用于“hasMany”方面。这让我很困惑，因为我没有 hasMany 而是两个相同类型的字段`Class Amount`。而我真正需要做的是使用 mappedBy 属性，而不是在 Amount 类中，而是在只有一个引用的 Bonification 类中`Amount`。

并且我告诉了`Amount Class`，至于 Bonification，他必须支持参考，这样“他”才不会感到困惑，并将该`bonificationRate`领域视为一个领域，而不是像我认为他之前所做的那样作为参考。

```
class Amount{

    String total //Total amount of something
    String type  //Type of amount, Dollars, %, Times something
    Bonification bonificationRate  //the amount can be "x times another bonification"

    static belongsTo = [parentBonification: Bonification]

    static mapping = {
       table "AMOUNTS"
       total column: "AMOU_TTOTAL"
       type column: "AMOU_TTYPE"
       parentBonification column: "BONI_CID"
       bonificationRate column: "BONI_TRATE_CID"
    }

}

class Bonification {  
    //among other things:  
    Amount amount

    static mappedBy = [amount: "parentBonification"]
} 
```

那并没有创造出我需要的东西，`parentBonification "BONI_CID" column`但它确实创造了`bonificationRate "BONI_TRATE_CID"`我需要的东西。

对不起，如果它太乱了。无论如何，感谢您的时间和帮助。

# css - 为什么我不能在匿名替换元素中使用 html 实体？

> ID：14141507
> 
> 赞同：1
> 
> 时间：2013-01-03T15:06:16.433
> 
> 标签：css, html-entities

匿名替换元素是与`:before`or一起使用的内容`:after`

请参阅[https://developer.mozilla.org/en-US/docs/CSS/content](https://developer.mozilla.org/en-US/docs/CSS/content)

这是一个例子：

```
.valid:after {
  content: '&lt;';
  color: green;
}

.invalid:after {
  content: '&gt;';
  color: red;
} 
```

问题是 HTML 实体没有被它们的字符替换，我仍然看到它们的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:07:24.530

CSS 不是 HTML。只需使用

```
.valid:after {
  content: '<';
  color: green;
} 
```

如果需要，您还可以使用 unicode hexa 转义您的字符。

例如 ▶ ：

```
.valid:after {
  content: '\25B6';
  color: green;
} 
```

但是，即使您将 CSS 嵌入HTML 文件的元素中，您`<`也不需要转义。`>``<style>`

以防万一（它可能不会对您的 HTML 编辑器造成干扰），它们的代码将是`\003C`and `\003E`.

# android - Android手机临时路由后的内核包装应用程序安装

> ID：14141509
> 
> 赞同：-1
> 
> 时间：2013-01-03T15:06:18.540
> 
> 标签：android

android 手机临时路由后，是否可以在内核周围安装一个包装应用程序（用于监视内核级别的所有活动）？

如果“是”，我可以获得指向一些我可以从中学习的资源的指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:10:59.793

[如何在 Android 应用程序中运行终端命令？](https://stackoverflow.com/questions/2843250/how-to-run-terminal-command-in-android-application)

本质上，您需要运行 su 以授予您的应用程序 root 权限，然后运行您需要的任何命令，例如“在内核级别监视所有活动”（可能是 dmesg？）。

# r - 命名归档对象的最佳实践？

> ID：14141510
> 
> 赞同：2
> 
> 时间：2013-01-03T15:06:25.563
> 
> 标签：r, file, parallel-processing

我有一个具有*列表*输出的函数。每次我运行它时，我都想用*save*导出结果。几次运行后，我想读取文件并比较结果。我这样做，因为我不知道会有多少任务，也许我会使用不同的计算机来计算每个任务。那么我应该如何命名归档对象，以便稍后我可以将它们全部读取？

我最好的猜测是在保存之前动态命名变量，并跟踪对象名称，但我到处都读到这是一个很大的禁忌。

那么我应该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T15:26:50.557

您可能想要使用`saveRDS`and`readRDS`函数而不是`save`and `load`。RDS 版本功能将保存和读取没有附加名称的单个对象。您将创建对象并将其保存到文件中（使用`paste0`或`sprintf`创建唯一名称），然后在处理结果时，您可以一次读取一个对象，或者将多个对象读取到列表中以使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T19:12:33.463

有一次给了我几个 RData 文件，它们都只有一个变量 x。为了在我的工作区中读取所有这些变量，我将每个变量依次加载到其环境中，并使用 get() 来读取其值。

```
tenv <- new.env()
load("file_1.RData", envir = tenv)
ls(tenv) # x
myvar1 <- get(ls(tenv), tenv)
rm(tenv)
.... 
```

可以为每个文件重复此代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:42:00.823

您可以使用作用域在函数中隐藏检索到的名称，因此首先您可以将列表保存到文件中：

```
mybiglist <- list(fred=1, john='dum di dum', mary=3)
save(mybiglist, file='mybiglist1.RData') 
```

然后你可以通过一个函数重新加载它，并在另一个列表中或只是一个普通对象中给它你喜欢的任何名称：

```
# Use the fact that load returns the name of the object loaded
# and that scope will hide this object
myspecialload <- function(RD.fnam) {
  return(eval(parse(text=load(RD.fnam))))
}
# now lets reload that file but put it in another object
mynewbiglist <- myspecialload('mybiglist1.RData')

mynewbiglist
$fred
[1] 1

$john
[1] "dum di dum"

$mary
[1] 3 
```

请注意，这并不是一个真正的通用“在任何地方使用它”类型的函数，因为对于具有多个对象的 RData 文件，它似乎返回最后保存的对象......所以现在最好坚持每个文件一个列表对象！

# jquery - 简单的 jQuery 冲突

> ID：14141512
> 
> 赞同：0
> 
> 时间：2013-01-03T15:06:29.417
> 
> 标签：jquery

我（非常）是 jQuery 新手，所以请保持温和，但我似乎无法让下面的基本脚本正常工作。

加载时的直接类是 .menuFlyout 并且单击它时会根据需要更改，但是将其更改回的第二部分不起作用。noConflict() 没有帮助。

提前感谢您的帮助。

* * *

```
jQuery(document).ready(function() {
    jQuery('.menuFlyout').click(function(){
        jQuery('.menuFlyout').addClass('closeFlyout');
        jQuery('.menuFlyout').removeClass('menuFlyout');
    });
    jQuery('.closeFlyout').click(function(){
        jQuery('.closeFlyout').addClass('menuFlyout');
        jQuery('.closeFlyout').removeClass('closeFlyout');
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:09:39.173

试试这个

```
jQuery(document).ready(function() {
    jQuery(document).on('click','.menuFlyout', function(){
        jQuery('.menuFlyout').addClass('closeFlyout');
        jQuery('.menuFlyout').removeClass('menuFlyout');
    });
    jQuery(document).on('click','.closeFlyout', function(){
        jQuery('.closeFlyout').addClass('menuFlyout');
        jQuery('.closeFlyout').removeClass('closeFlyout');
    });
}); 
```

`closeFlyout`您的代码的问题是，当您附加处理程序时，没有带有类的元素。您需要使用[on](http://api.jquery.com/on/)方法委托单击处理程序（有关详细信息，请参阅“直接和委托事件”部分）。

使用事件委托应该可以解决您的问题，但作为旁注，您有 2 个改进的代码版本（由 @wirey 和 @h0tw1r3 建议）

```
jQuery(document).ready(function() {
    jQuery(document).on('click','.menuFlyout', function(){
        jQuery(this).addClass('closeFlyout').removeClass('menuFlyout');
    });
    jQuery(document).on('click','.closeFlyout', function(){
        jQuery(this).addClass('menuFlyout').removeClass('closeFlyout')
    });
}); 
```

或者

```
jQuery(document).ready(function() {
    jQuery(document).on('click','.menuFlyout, .closeFlyout', function(){
        jQuery(this).toggleClass('closeFlyout');
        jQuery(this).toggleClass('menuFlyout');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:48:33.433

检查班级名称是否拼写正确。也检查萤火虫。尝试如下，看看它是否有效：

```
jQuery(document).ready(function() {
    jQuery('.menuFlyout').live('click',function(){
        jQuery('.menuFlyout').addClass('closeFlyout');
        jQuery('.menuFlyout').removeClass('menuFlyout');
    });
    jQuery('.closeFlyout').live('click',function(){
        jQuery('.closeFlyout').addClass('menuFlyout');
        jQuery('.closeFlyout').removeClass('closeFlyout');
    });
}); 
```

希望这有帮助，谢谢

# excel - 从 Excel 与 VBA 调用时，VBA UDF 给出不同的答案

> ID：14141513
> 
> 赞同：4
> 
> 时间：2013-01-03T15:06:30.600
> 
> 标签：excel, vba

以下 VBA 函数计算给定范围内包含公式的单元格的数量。从 VBA 子调用时，它可以正常工作。从 Excel 调用时，它返回区域中的单元格总数。

来自 Excel 的调用是`=CountFormulas(A1:C7)`，即使范围内只有两个带有公式的单元格，它也会返回 21。

是什么导致了这种差异？

```
Public Function CountFormulas(ByRef rng As Range) As Long
    CountFormulas = rng.SpecialCells(xlCellTypeFormulas).Count
End Function

Public Sub CountFormulasFromSub()
    Dim rng As Range
    Dim res As Integer
    Set rng = Sheet1.Range("a1:c7")
    res = CountFormulas(rng)
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:32:17.227

这是不可能的。以下链接包含在 UDF 中不起作用的内容。
这里 - [http://support.microsoft.com/kb/170787](http://support.microsoft.com/kb/170787)

编辑：手动计数方法虽然有效。

```
Public Function CountFormulas(rng As Range) As Integer
Dim i As Integer
Dim cell As Range

For Each cell In rng
    If cell.HasFormula Then
        i = i + 1
    End If
Next

CountFormulas = i
End Function 
```

如果您认为它将超过 32767，请更改`Integer`为。`Long`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:05:05.613

如果我要将 worksheet.cells 发送到该函数，它将检查整个工作表中的所有单元格，数量很多而且速度很慢。尽管 Excel 2007+ 支持 16384*1048576 行，但只有实际使用过的单元格才会加载到内存中。无需检查所有其他 170 亿个细胞。我最接近识别这些的是使用 Worksheet.UsedRange 来限制任意范围输入。但是，在使用相距较远的单元格的情况下，它并不完美。例如，如果单元格 A1 和 XFD1048576 包含数据，则整个工作表将包含在 UsedRange 中。任何有关如何将范围限制为实际使用的单元格（上例中只有两个单元格）的提示将不胜感激。

利用 UsedRange 我构建了一个函数，我将分享它以防其他人可以使用它：

```
Public Function CountIfFormula(ByRef rng As Range, Optional ByVal matchStr As String) As Long
    'Counts the number of cells containing a formula and optionally a specific string (matchStr) in the formula itself.
    Dim i As Long
    Dim isect As Range

    'Restricts the range to used cells (checks only cells in memory)
    Set isect = Application.Intersect(rng, rng.Parent.UsedRange)

    For Each cell In isect
        If cell.HasFormula Then
            If InStr(1, cell.Formula, matchStr) Then i = i + 1
        End If
    Next
    CountIfFormula = i
End Function 
```

函数的使用：

```
Sub GetNrOfCells()
    Dim i As Long
    Dim ws As Worksheet
    For Each ws In ThisWorkbook.Worksheets
        i = i + CountIfFormula(ws.Cells, "=SUM(")
    Next
    'i will now contain the number of cells using the SUM function
End Sub 
```

最好的问候，并感谢您的回复。

福西

# twitter-bootstrap - 文本输入中的 Twitter Bootstrap 下拉菜单

> ID：14141516
> 
> 赞同：4
> 
> 时间：2013-01-03T15:06:38.473
> 
> 标签：twitter-bootstrap

嗨，我想使用 Twitter Bootstrap 和文本输入**内的下拉菜单构建表单。**像这样->![在此处输入图像描述](../Images/c563d6e32ffe71d961d0421b4965d017.png)

我只用这种方式做到了

```
 <div class="input-append">
    <form method="get" action="/option" class="navbar-search" id="searchForm">
      <input type="text" size="16" placeholder="Search string" name="query">
      <button data-toggle="dropdown" class="btn btn-primary dropdown-toggle searchMain" style="width: 150 px;"><span>Option 1</span> <b class="caret"></b></button>
      <ul class="dropdown-menu" id="search-dropdown" style="left: 220px;">
        <li><a href="#" id="option-1">Option 1</a></li>
        <li><a href="#" id="option-2">Option 2</a></li>
        <li><a href="#" id="option-3">Option 3</a></li>
      </ul>
      <button type="submit" class="btn btn-primary"><i class="icon-white icon-search"></i></button>
    </form>
  </div> 
```

但在这种情况下，下拉菜单不在文本输入范围内。是否可以使用 Twitter Bootstrap 在文本输入中放置下拉菜单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:35:14.430

查看引导文档的表单部分：http: [//twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)

您的标记将如下所示：

```
<div class="input-append">
  <input class="span2" id="appendedDropdownButton" type="text">
  <div class="btn-group">
    <button class="btn dropdown-toggle" data-toggle="dropdown">
      Action
      <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
      ...
    </ul>
  </div>
</div> 
```

这里的关键是`input-append`类。

# javascript - Javascript在点击时更改div的文本

> ID：14141518
> 
> 赞同：-1
> 
> 时间：2013-01-03T15:06:56.487
> 
> 标签：javascript, html, javascript-events

您好，我为我的网站设计了以下结构。但我不知道如何编码。

我有一个 div，里面没有内容。让我们称它为 div="text"。在这个 div 旁边我有很多按钮。当有人点击按钮时，div 文本需要显示链接到该按钮的文本。当单击另一个按钮时，文本需要消失，并且链接到单击的按钮的文本需要显示。

我想我可以通过在设置为 display:none 的文本中制作很多 div 来实现这一点，只要按下按钮，我就会将显示更改为阻止。但我不完全知道该怎么做。

谁能帮我？

问候，梅林

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:11:01.213

这是一个使用 jQuery[的基本工作示例。](http://jsfiddle.net/GYM5L/)

标记：

```
<div id="display"></div>
<input type="button" value="button 1" />
<input type="button" value="button 2" />
<input type="button" value="button 3" />
​ 
```

JS：

```
$('input:button').click(function() {
    $('#display').text($(this).val());
});​ 
```

我建议你开始学习 JS。StackOverflow 不适合“为我写”。

# java - 为什么我不能将具有另一种类型的实例分配给参数化变量？

> ID：14141524
> 
> 赞同：2
> 
> 时间：2013-01-03T15:07:17.337
> 
> 标签：java, generics

为什么我不能这样做：

```
LinkedList<Fruit> myFruits = new LinkedList<Apple>(); 
```

错误信息：

```
Type mismatch: cannot convert from LinkedList<Apple> to LinkedList<Fruit> 
```

和下面的区别在哪里？

```
Fruit fruit = new Apple(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T15:09:41.590

考虑一下您可以使用`LinkedList<Fruit>`- 做什么，并考虑您希望此代码做什么：

```
LinkedList<Apple> apples = new LinkedList<Apple>();
LinkedList<Fruit> fruits = apples;
fruits.add(new Banana());

Apple apple = apples.getFirst(); // Safe at compile time, but it's a Banana! 
```

转换是*唯一*在编译时失败的地方。现在你*可以*写的是：

```
LinkedList<? extends Fruit> myFruits = new LinkedList<Apple>(); 
```

...然后编译器不会让您向列表中*添加*任何内容，因为它不知道真正的元素类型是什么。同样你可以写：

```
LinkedList<? super Apple> apples = new LinkedList<Fruit>(); 
```

现在您可以*将*苹果添加到列表中，但您不能将苹果*从*列表中删除，因为您也不知道该类型是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:10:14.293

**多态性**根本不适用于`generic types`.

`LinkedList<Fruit>``LinkedList<Apple>`与即使**Fruit**是**Apple**的超类也不相同。

 **原因参考这个[**答案**](https://stackoverflow.com/questions/13993745/add-strings-through-use-of-generic-extends-causes-compiler-error/13993770#13993770)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:09:36.587

因为那时你可以添加一个`Orange`to`myFruits`并且这不应该工作，因为实际列表是一个列表`Apple`

例如（如果你能做到）；

```
List<Apple> myApples = new LinkedList<Apple>();
List<Fruit> myFruits = new LinkedList<Apple>();
myFruits.add(new Orange()); 
```

现在 myApples 加入`Orange`了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T15:17:29.813

允许进行简单的分配，因为引用被复制而原件保持不变。

```
Apple apple = new Apple();
Fruit fruit = apple;
fruit = new Banana(); // apple is not touched and is still an Apple 
```

而（AtomicReference 是一个简单的集合）

```
AtomicReference<Apple> apple = new AtomicReference<>(new Apple());
AtomicReference<Fruit> fruit = (AtomicReference) apple; // warning but compiles.
fruit.set(new Banana()); // this alters apple as well, making it invalid!
Apple apple2 = apple.get(); // throws ClassCastException. 
```**

# javascript - JS试图给标签一个选择效果

> ID：14141527
> 
> 赞同：1
> 
> 时间：2013-01-03T15:07:27.867
> 
> 标签：javascript

我正在尝试使用 JS 应用“选择喜欢”效果，我的函数在 onClick 事件上触发
并更改标签样式，但在选择新标签后标签样式保持不变，
这是第一块代码的主要思想将旧选择重置为默认样式，但不起作用..

```
function selectEffect(tag){
  //Code to reset to the default style first if something is selected
  var headID = document.getElementsByTagName("head")[0];         
  var cssNode = document.createElement('link');
  cssNode.type = 'text/css';
  cssNode.rel = 'stylesheet';
  cssNode.href = '../static/css/style.css';
  cssNode.media = 'screen';
  headID.appendChild(cssNode);

  //Code to apply a selected like style
  var element = document.getElementById(tag);
  element.style.backgroundColor='#7D9ABE';
  element.style.color='#ffffff';
  element.style.fontWeight='bold';
  } 
```

它有什么问题？，任何帮助表示赞赏.. 谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:12:47.393

您需要先保存元素的默认样式，以便之后重新设置。要重置原始元素，您可以跟踪它，也可以简单地默认所有元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T15:58:06.617

在 Stokedout 的建议下，我成功了：

```
var selectedTag;
function selectEffect(tag){

  if (selectedTag){
    var oldElement = document.getElementById(old_selectedRow);
    oldElement.style.backgroundColor=old_backgroundColor;
    oldElement.style.color=old_color;
    oldElement.style.fontWeight=old_fontWeight;
   }

  var element = document.getElementById(tag);
  element.style.backgroundColor='#7D9ABE';
  element.style.color='#ffffff';
  element.style.fontWeight='bold';
  }

function doit(tag){
   selectEffect(tag)
   selectedTag = tag;
   }

<a onclick="doit('id1');"></a> 
```

似乎是懒惰的代码，但它有效！

# javascript - jQuery - 随机选择总和

> ID：14141531
> 
> 赞同：1
> 
> 时间：2013-01-03T15:07:33.173
> 
> 标签：javascript, jquery

我正在为小学生创建一个“打地鼠”风格的游戏，他们必须根据给定的总和点击正确的数字。

目前，该程序正在生成这样的加法总和。

```
function createPlusSum(total) {
    console.log(total)
    var int1 = Math.ceil(Math.random() * total);
    var int2 = total - int1;
    $('#target').html(int1 + ' + ' + int2 + ' = ?');
} 
```

我已经为减法再次执行此操作并且它有效，但我不知道从这里开始随机化是否产生加法或减法问题。这是产生减法问题的函数。

```
function createTakeSum(total) {
    console.log(total)
    var int1 = Math.ceil(Math.random() * total);
    var int2 = total + int1;
    $('#target').html(int2 + ' - ' + int1 + ' = ?');
} 
```

我用它来创建加法总和

```
createPlusSum(total); 
```

我该怎么说我想要

```
createPlusSum(total); 
```

或者

```
createTakeSum(total); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:13:51.470

我会再次使用随机数：

```
var rand = Math.floor(Math.random()*2);

switch (rand) {
 case 0:
  createPlusSum(total);
  break;
 case 1:
  createTakeSum(total);
  break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:15:27.857

尝试这个：

```
function createSum() {
            total = Math.ceil(Math.random() * 10);
    if(Math.random() > 0.5)
    {
        createTakeSum(total);
    } else {
        createPlusSum(total)
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:23:04.917

您可以将函数分配给数组字段并随机调用它们。

```
var func = new Array();
func[0] = function createPlusSum(total) {....};
func[1] = function createTakeSum(total) {....};

var rand = Math.floor(Math.random() * func.length);
func[rand](total); 
```

这应该可以解决问题，而且您可以添加任意数量的函数，只需将它们附加到“func”-array

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T15:19:37.913

我并不是建议你应该这样做，但我只是为了彻底性提供一个替代答案。（请原谅我，如果代码是错误的。我对 JS 有点生疏。

```
{
    0: createPlusSum,
    1: createTakeSum
}[Math.floor(Math.random() * 2)](total); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T16:04:23.240

这是一个脚本，它在给定范围内创建一个随机的“加法”或“减法”问题，并在 console.log 中发布正确答案：

```
<div id="target"></div>
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js" type="text/javascript"></script>
<script type="text/javascript">
  var total = {low: 10, high: 30}; // range
  jQuery(document).ready(function() {
    var total = Math.floor(Math.random() * (total.high - total.low) + total.low);
    var int1 = Math.floor(Math.random() * total);
    var int2 = total - int1;
    if (Math.random() > 0.5) { // add
      var question = int1 + ' + ' + int2 + ' = ?';
      var answer = total;
    }
    else { // subtract
      var question = total + ' - ' + int1 + ' = ?';
      var answer = int2;
    }
    $('#target').html(question);
    console.log('Correct answer: ' + answer);
  });
</script> 
```

这是有效的[jsFiddle 示例](http://jsfiddle.net/9ZBxx/)

# jquery - cdn服务器关闭时如何加载引导css的本地副本？

> ID：14141532
> 
> 赞同：13
> 
> 时间：2013-01-03T15:07:33.923
> 
> 标签：jquery, css, twitter-bootstrap, cdn

截至目前我正在使用这样的javascript

```
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
<script>    $.fn.modal || document.write('<script src="js/bootstrap.min.js">\x3C/script>')</script> 
```

我正在像这样从 bootstrapcdn 加载 bootstrap.css

```
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet"> 
```

如果cdn服务器关闭，有人可以告诉我如何加载本地副本。？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-21T10:11:28.223

我的解决方案是在主体顶部使用引导隐藏类样式创建一个空 div：

```
<div id="bootstrapCssTest" class="hidden"></div> 
```

然后稍后使用 Javascript 对其进行测试，如果 div 可见，则将其附加到头部：

```
 <script type="text/javascript">

    if ($('#bootstrapCssTest').is(':visible') === true) {
        $('<link href="/localcopy/css/bootstrap.css" rel="stylesheet" type="text/css" />').appendTo('head');
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-13T18:51:38.383

[这个要点](https://gist.github.com/joelclermont/3735026)有一个代码片段，我发现它对于检测是否需要加载 CSS 回退特别有用。

```
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" />

<script type="text/javascript">
    function cssLoaded(href) {
        var cssFound = false;

        for (var i = 0; i < document.styleSheets.length; i++) {
            var sheet = document.styleSheets[i];
            if (sheet['href'].indexOf(href) >= 0 && sheet['cssRules'].length > 0) {
                cssFound = true;
            }
        };

        return cssFound;
    }

    if (!cssLoaded('bootstrap-combined.min.css')) {
        local_bootstrap = document.createElement('link');
        local_bootstrap.setAttribute("rel", "stylesheet");
        local_bootstrap.setAttribute("type", "text/css");
        local_bootstrap.setAttribute("href", "/Content/Styles/bootstrap-combined.min.css");
        document.getElementsByTagName("head")[0].appendChild(local_bootstrap);
    }
</script> 
```

只需`/Content/Styles/bootstrap-combined.min.css`用正确的路径替换到本地 css 就可以了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T15:16:45.983

对文件执行 jquery.Get() 会起作用吗？根据结果​​，您将知道它是否可用。并且看到它发生在客户端，本地缓存将使这对于额外带宽来说不是问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-28T11:05:31.387

尝试这个，

```
<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
<script>
    function cssLoaded(href) {
        var cssFound = false;
        for (var i = 0; i < document.styleSheets.length; i++) {
            var sheet = document.styleSheets[i];
            if (
            sheet['href'] == "http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" ||
            sheet['href'] == "https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css") {
                cssFound = true;
            }
        };
        return cssFound;
    }
    if (!cssLoaded('bootstrap.min.css')) {
        local_bootstrap = new CustomEvent('link');
        local_bootstrap.setAttribute("rel", "stylesheet");
        local_bootstrap.setAttribute("href", "/css/bootstrap.min.css");
        document.getElementsByTagName("head")[0].appendChild(local_bootstrap);
    }
</script> 
```

**[资源](http://www.websightdesigns.com/posts/view/javascript-cdn-with-fallback-to-local-script)**

# vim - 让 vim ai 遵守上一行的空格格式

> ID：14141533
> 
> 赞同：3
> 
> 时间：2013-01-03T15:07:34.817
> 
> 标签：vim

当我缩进/格式化我的代码时，我使用制表符进行缩进，使用空格进行对齐。我觉得这很直观，并且非常有效地保持代码格式独立于其他程序员的标签宽度（只要他们使用等宽）。

我喜欢为其他潜在的开发人员保留我的代码格式，这是关于 vim 的一件事让我感到厌烦，我想知道是否有解决方案。如果您有一行是 2 个制表符后跟 9 个空格（假设 4 个空格宽制表符），则在 vim 中使用 ai 格式，当您输入新行时，vim 将使新行为 4 个制表符和 1 个空格。这不是所需的行为（我希望它是 2 个制表符和 9 个空格，就像上一行一样）。

我的问题是，这甚至可能吗？如果没有，为什么不呢？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:21:33.093

在你的试试这个`~/.vimrc`：

```
set noexpandtab
set copyindent
set preserveindent
set softtabstop=0
set shiftwidth=4
set tabstop=4 
```

但是，如果您当前的缩进不是`tabstop`.

# r - 更改 POSIXct 对象中的时区

> ID：14141537
> 
> 赞同：55
> 
> 时间：2013-01-03T15:08:13.520
> 
> 标签：r, datetime

在 R 中使用 dateTimes 和 timezone 可能会很棘手。这是我的问题：我想更改`POSIXct`对象的时区

```
R) data <- data.frame(x=c(1,2),dateTime=as.POSIXct(c("2010-03-11 03:30:00.432","2010-03-15 03:30:00.432"),format="%Y-%m-%d %H:%M:%S",tz="America/Montreal"))
R) data
  x            dateTime
1 1 2010-03-11 03:30:00
2 2 2010-03-15 03:30:00
R) str(data)
'data.frame':   2 obs. of  2 variables:
 $ x       : num  1 2
 $ dateTime: POSIXct, format: "2010-03-11 03:30:00" "2010-03-15 03:30:00" 
```

但是，如果我想更改时区，我发现的唯一一件事是：

```
R) data$dateTime2 = format(data$dateTime,tz="Europe/Paris")
R) str(data)
'data.frame':   2 obs. of  3 variables:
 $ x        : num  1 2
 $ dateTime : POSIXct, format: "2010-03-11 03:30:00" "2010-03-15 03:30:00"
 $ dateTime2: chr  "2010-03-11 09:30:00" "2010-03-15 08:30:00" 
```

或者

```
R) data$dateTime2 = as.POSIXlt(data$dateTime,tz="Europe/Paris")
R) str(data)
'data.frame':   2 obs. of  3 variables:
 $ x        : num  1 2
 $ dateTime : POSIXct, format: "2010-03-11 03:30:00" "2010-03-15 03:30:00"
 $ dateTime2: POSIXlt, format: "2010-03-11 09:30:00" "2010-03-15 08:30:00" 
```

上帝（或 SO 上的某个人）知道为什么它不起作用`POSIXct`

```
R) data$dateTime2 = as.POSIXct(data$dateTime,tz="Europe/Paris")
R) str(data)
'data.frame':   2 obs. of  3 variables:
 $ x        : num  1 2
 $ dateTime : POSIXct, format: "2010-03-11 03:30:00" "2010-03-15 03:30:00"
 $ dateTime2: POSIXct, format: "2010-03-11 03:30:00" "2010-03-15 03:30:00" 
```

我是否需要转换为`character`并转换回`POSIXct`?

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-01-03T15:13:35.973

它不起作用，`POSIXct`因为如果它已经是，则`base::as.POSIXct.default`简单地返回。您可以通过属性更改时区：`x``POSIXct``tzone`

```
attr(data$dateTime, "tzone") <- "Europe/Paris" 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2016-11-09T18:46:37.600

在`lubridate`包中有一个功能`with_tz`可以更改时区属性（实际上是 Joshua 所描述的）。

```
dttm <- as.POSIXct("2016-01-01 10:10:10", tz = "UTC")
dttm
[1] "2016-01-01 10:10:10 UTC" 
```

将时区从 更改`UTC`为`CET`

```
with_tz(dttm, "CET")
[1] "2016-01-01 11:10:10 CET" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-23T07:06:53.597

截至 2021 年 7 月 23 日。`indexTZ`已弃用。`tzone`很好用。

`tzone(data$dateTime) <- "Europe/Paris"`

# git - Git分支影响master

> ID：14141543
> 
> 赞同：0
> 
> 时间：2013-01-03T15:08:26.983
> 
> 标签：git, git-branch

我正在android上开发一个谷歌地图项目，我需要将地图更新到新的v2版本，因此我创建了一个分支

```
git add -u
git commit -m 'xxxyyyzzz'
git checkout -b MapsV2 
```

然后我意识到我需要在主分支上快速修复一些东西所以我跑了

```
git checkout master 
```

只是在结帐后发现我在 MapsV2 分支中的所有更改在主分支上都完好无损。

为了提供更多上下文，master 是我们的主要分支，而 MapsV2 是新地图 API 的研究分支。

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:12:12.530

默认情况下`git checkout`不会重置您的工作目录的状态，为此您需要`git reset --hard`在结帐后使用。请注意，这将重置您的索引和工作目录，这样做您可能会丢失所有未提交的更改！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:23:00.587

（我假设你在`master`开始你给出的命令序列之前就在分支上。）

您在创建新分支之前进行了提交。因此，对`master`. 然后，您从 中创建了新`MapsV2`分支`master`，因此该分支也具有更改。

# apache - 网站文章 .htaccess 301 重定向

> ID：14141545
> 
> 赞同：0
> 
> 时间：2013-01-03T15:08:35.127
> 
> 标签：apache, .htaccess, http-status-code-301

**我在一个名为患者**的文件夹中有一个网站，我的网址如下所示：

[http://site.com/patients/](http://site.com/patients/)**后名**

[http://site.com/patients/articles/](http://site.com/patients/articles/) **another-post-name**

我想将它们全部重定向到一个干净的位置：

[http://newsite.com/](http://newsite.com/)**帖子名称**

[http://newsite.com/](http://newsite.com/)**另一个帖子名称**

换句话说，将有时出现的 /articles/ 和 301 丢失到新站点。

有关如何使用 htaccess 执行此操作的任何帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:17:56.190

[在http://site.com](http://site.com)服务器中编辑您的 .htaccess并将其放入（必须是第一条规则）：

```
RewriteEngine On

RewriteRule .* http://newsite.com/ [R=301] 
```

或者

```
Redirect 301 / http://newsite.com/ 
```

问候。

# mysql - Mysql语法错误，但是在哪里以及为什么？

> ID：14141548
> 
> 赞同：0
> 
> 时间：2013-01-03T15:08:39.177
> 
> 标签：mysql, sql

我只是不明白为什么在创建此表时出现语法错误：

```
CREATE TABLE IF NOT EXISTS Tasks (
ID INT UNSIGNED NOT NULL auto_increment,
Name VARCHAR(255) DEFAULT '' NOT NULL,
Description TEXT,
Date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
Status ENUM('New', 'Assigned', 'In Progress', 'On Hold', 'Done', 'Canceled'),
Priority ENUM('Urgent', 'High', 'Normal', 'Low'),
Creator SMALLINT UNSIGNED DEFAULT '0' NOT NULL,
Assignee SMALLINT UNSIGNED,
Starting DATETIME,
Deadline DATETIME,
Completion DATETIME,
PRIMARY KEY(ID)
) ENGINE = INNODB; 
```

给我：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use near 
'Starting DATETIME,
Deadline DATETIME,
Completion DATETIME,
PRIMARY KEY(ID)
) ENG' at line 10 
```

看起来它给我的日期时间带来了麻烦，但为什么呢？我已经在另一个表中使用了它并且它正在工作。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:10:06.697

`STARTING`是保留关键字，应该用反引号转义，

```
CREATE TABLE IF NOT EXISTS Tasks 
(
    ID INT UNSIGNED NOT NULL auto_increment,
    Name VARCHAR(255) DEFAULT '' NOT NULL,
    Description TEXT,
    Date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    Status ENUM('New', 'Assigned', 'In Progress', 'On Hold', 'Done', 'Canceled'),
    Priority ENUM('Urgent', 'High', 'Normal', 'Low'),
    Creator SMALLINT UNSIGNED DEFAULT '0' NOT NULL,
    Assignee SMALLINT UNSIGNED,
    `Starting` DATETIME,
    Deadline DATETIME,
    Completion DATETIME,
    PRIMARY KEY(ID)
) ENGINE = INNODB; 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:11:04.533

开始是保留关键字。也许你可以使用不同的。

# linux - 防止 GNU/Linux 上的共享库版本不兼容

> ID：14141550
> 
> 赞同：1
> 
> 时间：2013-01-03T15:08:44.553
> 
> 标签：linux, shared-libraries, llvm, incompatibility

我一直在跟踪我的程序启动时触发的错误。这是gdb提供的回溯：

```
(gdb) bt
#0  0xb753f571 in llvm::cl::parser<llvm::FunctionPass* (*)()>::getOption(unsigned int) const () 
from ./libgdl.so
#1  0xb79aeab4 in llvm::cl::generic_parser_base::findOption(char const*) ()   
from ./libgdl.so
#2  0xb753f679 in llvm::RegisterPassParser<llvm::RegisterRegAlloc>::NotifyRemove(char const*) () 
from ./libgdl.so
#3  0xaf35f0b6 in llvm::MachinePassRegistry::Add(llvm::MachinePassRegistryNode*) () from /usr/lib
/i386-linux-gnu/libLLVM-3.1.so.1
#4  0xaef42b16 in ?? () from /usr/lib/i386-linux-gnu/libLLVM-3.1.so.1
#5  0xb7fece9b in ?? () from /lib/ld-linux.so.2 
```

事实上，崩溃是由于系统使用 LLVM 3.1（用于图形相关任务），而我使用的是嵌入在我的程序 (libgdl.so) 中的 LLVM 3.0：
当 libLLVM-3.1.so.1 想要调用NotifyRemove 函数，调用被转发到我在 libgdl.so 中的 LLVM 版本，并且由于版本不兼容而导致崩溃。

有什么办法可以防止这样的混乱吗？

# php - 无法用 nginx 实现 php

> ID：14141552
> 
> 赞同：1
> 
> 时间：2013-01-03T15:08:52.807
> 
> 标签：php, linux, nginx, fastcgi, archlinux

我有 nginx 与 arch linux 一起工作。我在添加 php 和 fastcgi 时遇到问题。我安装了 php 和 php-fpm 软件包。php-fpm 服务已开启。当我访问带有 php 扩展名的文件时，浏览器会显示 nginx 错误页面，并且添加了以下 nginx 错误日志消息：

> 2013/01/02 22:39:43 [错误] 721#0: *27 connect() 在连接到上游时失败（111：连接被拒绝），客户端：192.168.1.13，服务器：localhost，请求：“GET /index .php HTTP/1.1”，上游：“fastcgi://127.0.0.1:9000”，主机：“192.168.1.19”

php 文件的内容似乎没有什么区别。我一直无法找到 php 错误日志或创建自己的错误日志。我将以下内容添加到`/etc/php/php.ini`：

```
error_log = /var/log/php_error.log 
```

我使文件世界可写，但那里什么也没有。我将以下内容添加到`/etc/nginx/nginx.conf`：

```
location ~ \.php$ {
            root           /usr/share/nginx/html;
            fastcgi_pass   127.0.0.1:9000;
        #    fastcgi_index  index.php;
        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
        #    include        fastcgi.conf;
        } 
```

取消注释注释行不会改变任何内容。注释未注释的行会将显示的浏览器页面从错误页面更改为未找到文件页面。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:31:53.893

我想到了。我必须取消注释 php-fpm.conf 文件中的一行，才能让 fastcgi 在正确的端口上侦听。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:12:54.997

尝试将您的配置文件更改为：

```
location ~ \.php$ {
    root           /usr/share/nginx/html;
    fastcgi_pass   127.0.0.1:9000;
    fastcgi_index  index.php;
    fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include        fastcgi.conf;
} 
```

# dependency-injection - 使用 Structuremap 从多个程序集进行依赖注入

> ID：14141556
> 
> 赞同：5
> 
> 时间：2013-01-03T15:09:04.107
> 
> 标签：dependency-injection, dependencies, structuremap

我是 DI 概念的新手，也是结构图的新手。我正在尝试完全填充我的所有接口都在其中`AssemblyA`并且我的所有实现都在`AssemblyB`. 我想使用 Structuremap`AssemblyB`在构造函数中注入类的实例，该构造函数依赖于来自的接口`AssemblyA`

```
public class Customer(ICustomerService)
{

} 
```

`ICustomerService`正在上课，正在`AssemblyA`上课。我希望 Structuremap在此构造函数中注入实例。我假设如果类的名称与以 and 为前缀的接口名称相同。Structuremap 会自动识别它。`CustomerService``assemblyB``CustomerService``I`

我已经编写了以下配置。

```
 x =>
        {

            x.Scan(scan =>
                {
                    scan.Assembly("AssemblyA");
                    scan.Assembly("AssemblyB");
                    scan.TheCallingAssembly();
                    scan.WithDefaultConventions();
            }); 
```

但它给了我错误

```
StructureMap Exception Code:  202
No Default Instance defined for PluginFamily AssemblyA.ICustomerService, AssemblyA, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null 
```

我想使用默认约定并避免将每个接口注册到一个类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:44:57.030

好的，我让它工作了，但我现在更困惑了。

这段代码似乎工作

```
IContainer container = new Container(c =>
            {
                c.Scan(x =>
                {
                    x.Assembly("AssemblyA");
                    x.Assembly("AssemblyB");
                    x.IncludeNamespace("AssemblyA");
                    x.TheCallingAssembly();
                    x.WithDefaultConventions();
                });
            }); 
```

在这里，我简单地添加了 x.IncludeNamespace("AssemblyA"); 在 AssemblyB 扫描后认为它需要这个命名空间并且它已经开始工作。

我的问题已解决，但我不知道出了什么问题，或者这是否是正确的方法。任何帮助仍将不胜感激。

# asp.net-mvc - 让切换图像在 mvc 页面上正常工作？

> ID：14141558
> 
> 赞同：1
> 
> 时间：2013-01-03T15:09:12.523
> 
> 标签：asp.net-mvc, asp.net-ajax

使用 MVC 3。（下面的代码试图重新创建 stackoverflow 已检查答案的切换效果）我有一个 ajax actionlink，当您单击它时，它会调用对 db 的更新来切换标志/图像。但是它一次有效，如果我再次单击它，它将不会切换。因为没有回发，所以 model.IsIssue 没有更新（它的服务器代码）。不确定解决问题的最佳方法。我是否应该在代码中处理它，在其中检查 db 中的当前标志并将其传递回视图。或者通过 Jquery，不确定如何编码（我的偏好）？

我在视图中的代码（切换）：

```
 <div>
                @Html.Raw(
                    Ajax.ActionLink("[replacethis]", 
                        "ToggleEnabled",
                                 new { questionId = question.QuestionID, reviewId = step.ReviewID, flag = question.IsIssue },
                                 new AjaxOptions { UpdateTargetId = "toggleimage" + question.QuestionID })
                   .ToHtmlString()
                   .Replace("[replacethis]",
                       string.Format("<div id='toggleimage{0}'><img src='/Content/images/{1}' border='0' alt='toggle'/></div>",
                                                                   question.QuestionID, question.IsIssue ? "issue_on.png" : "issue_off.png")
                   )
                ) 
```

我的动作控制器：

```
public ActionResult ToggleEnabled(int questionId, int reviewId, bool flag)
        {
            using (var db = new NexGenContext())
            {
                db.Database.ExecuteSqlCommand(
                           "EXEC SP_AddUpdateQuestionFlagged @QuestionID, @ReviewID",
                           new SqlParameter("@QuestionID", questionId),
                           new SqlParameter("@ReviewID", reviewId)
                       );
                return flag ? Content("<img src='/Content/images/issue_off.png' border=0  />") : Content("<img src='/Content/images/issue_on.png' border=0  />");

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:27:57.390

我只想更改一个 CSS 类来切换图像。

因此，我不会将图像保存在`img`...中，而是使用 a`div`并将图像作为背景。

因此，不要用其中的 DIV 和 IMG 替换 html（删除回调以处理点击），只需更改 div 的类。

在您看来：

```
<div id="myimage" class="NormalState"></div> 
```

在 JS 中：

```
$('#myimage').click(function () {
     $.ajax({
         url: 'yourControllerActionURL'
         type: 'POST',
         contentType: "application/json; charset=utf-8",
         data: {'questionId': question.QuestionID, 'reviewId': step.ReviewID, 'flag': question.IsIssue },
         success: function (data) {
            if(data.isClicked == true){
                 $('#myimage').addClass('ClickState').removeClass('NormalState');
            }
            else{
                 $('#myimage').addClass('NormalState').removeClass('ClickState');
            } 
         }
     });
}); 
```

在您的 CSS 中：

```
.NormalState { background-color: #ABCDEF;}
.ClickState { background-color: #FF0000;} 
```

在您的控制器中：

您需要返回 JSON 并将其`isClicked`设置为 true 或 false。您也可以返回 css 类以从控制器应用，但这样您的控制器就知道视图，这不是 MVC 模式的想法。所以告诉视图发生了什么更合适。

# html - 设置宽度 div 防止其他 div 跨越 100% 宽度

> ID：14141559
> 
> 赞同：1
> 
> 时间：2013-01-03T15:09:14.340
> 
> 标签：html, css

我似乎在使用 100% 宽度时遇到了一些问题。我有 3 个相对定位的 div、页眉、内容和页脚。我在页眉上设置了 600 像素的宽度，在内容和页脚上设置了 100% 的宽度。但是，如果我在使用水平滚动条时调整浏览器的大小，则 100% 宽度的 div 会被切断，并且不会一直穿过以匹配 600px div...我该如何解决这个问题？

CSS

```
#header {
    position: relative;
    width: 620px;
}

#content, #footer {
    position: relative;
    width: 100%;
} 
```

HTML

```
<div id="header"></div>
<div id="content"></div>
<div id="footer"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:11:33.727

```
<div id = "container">
    <div id="header"></div>
    <div id="content"></div>
    <div id="footer"></div>
</div>

#container {min-width:620px;} 
```

参见示例：http: [//jsfiddle.net/calder12/xN2PV/3/](http://jsfiddle.net/calder12/xN2PV/3/)

注意点。IE6 不支持最小宽度。我怀疑这很重要，如果确实如此，您将需要不同的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:12:23.373

将#content 和#footer 的宽度设置为“自动”。作为块元素的 Div 将在其直接父元素中自动消耗 100% 的可用宽度（如果设置，则无边距）。

因此，如果 #content 和 #footer 包含在 #header***或任何其他显式大小的元素***中，那么它们将永远不会比指定的宽度更宽。

# java - 使用另一个编辑器 RCP、SWT、JAVA 上的按钮打开编辑器

> ID：14141576
> 
> 赞同：-1
> 
> 时间：2013-01-03T15:09:58.940
> 
> 标签：java, swt, rcp, jface

我有一个 RCP 程序，有 3 个部分 - 2 个视图（左侧，2 个部分）和各种编辑器（右侧和另一部分）。在我看来，我有树，我可以打开编辑器（其他部分）。在编辑器上我可以打开另一个编辑器，但是当我调用编辑器时我需要过去一个对象，我让它：`addMouseListener(new MouseAdapter() { @Override public void mouseDown(MouseEvent e) {....`

我的按钮：

```
btnNewButton.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseDown(MouseEvent e) {

                  IHandlerService handlerService = (IHandlerService) getSite().getService(IHandlerService.class);

                  try {
                        handlerService.executeCommand("XPTO.command", null);
                    } catch (Exception ex) {
                        throw new RuntimeException(
                                "XPTO");
                    }
                }
            }); 
```

我的命令：

```
public class CallEditors extends AbstractHandler {

@Override
public Object execute(ExecutionEvent event) throws ExecutionException {
    System.out.println("calledEditor");

    // Get the view
    IWorkbenchWindow window = HandlerUtil.getActiveWorkbenchWindow(event);

    IWorkbenchPage page = window.getActivePage();

    Editor navEditor = (Editor) page.findEditor(Editor.IDI); 
```

} }

谢谢

* * *

我有答案：

```
btnNewButton.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseDown(MouseEvent e) {

                // Get the view
                IWorkbenchWindow window = PlatformUI.getWorkbench().getActiveWorkbenchWindow();

                IWorkbenchPage page = window.getActivePage();

                    Object obj = btnNewButton.getData();

                    if (obj != null) {

                      xPTO input = new xPTO();
                          try {

                                 page.openEditor(input, xptoEditor.ID, false);  
                                } catch (PartInitException e1) {
                                    throw new RuntimeException(e1);
                                }
                      } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:27:20.970

利用`IWorkbenchPage#openEditor(..)`

# ms-access-2003 - ms-access 2003 定时备份

> ID：14141581
> 
> 赞同：1
> 
> 时间：2013-01-03T15:10:10.157
> 
> 标签：ms-access-2003

我一直在研究安排自动备份数据库的可能性，但是关于该主题的每个链接都只是谈论手动备份过程。任何人都可以展示如何完成设置计划备份或链接到基于该主题的良好 wab 培训。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:19:40.800

Microsoft Access 是一个基于文件的系统，因此您可以随时使用脚本或批处理文件在任务调度程序中运行，只要您确定数据库将被关闭。例如：[http ://www.overclock.net/t/114345/how-to-automatically-backup-files](http://www.overclock.net/t/114345/how-to-automatically-backup-files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:25:09.407

我们已经运行了几年的 MS Access 系统，这就是我们实施备份系统的方式。

1.  我们的系统被分成多个数据库——导入、后端和前端
2.  我们有一台专用的台式电脑来运行这个过程。这台机器运行导入过程并始终打开导入数据库。
3.  有一个表格可以在导入数据库中打开，上面有一个计时器。
4.  计时器的代码可以运行预定的进程，包括 - 导入进程和备份，甚至是数据库的压缩。

还有其他方法可以执行此类任务，但这是我们拥有的系统。

有一些缺点，包括：

1.  如果台式机重新启动，则数据库将关闭，并且不会运行任何内容。

# ios - 带有底角的表格视图，如 iPad 便笺应用程序

> ID：14141584
> 
> 赞同：0
> 
> 时间：2013-01-03T15:10:18.927
> 
> 标签：ios, uitableview, uiscrollview

我正在做一些看起来像 iPad Notes 应用程序的笔记列表的东西：一个经典的表格视图，但底部有一个角，如下所示：

![](../Images/eb8fb29e2ddcc79fc7aef758bdd53dac.png)

所以为了查看列表的底部，滚动视图有点特殊。

最好的方法是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:18:05.070

我认为最简单的方法是使用 heightForFooterInSection 为最后一部分设置页脚高度。

```
-(CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section {
if (section==[mySections count]) {
    return 120;
}
return 0; 
```

}

# gnome-terminal - 如何以编程方式修改 gnome-terminal 的缩放级别？

> ID：14141593
> 
> 赞同：5
> 
> 时间：2013-01-03T15:10:52.380
> 
> 标签：gnome-terminal

可以通过按 C-+/- 来修改 gnome 终端中的缩放级别。我想自动修改缩放级别以响应窗口大小的变化（列数）。或者，是否有支持该功能的终端？我正在使用平铺窗口管理器，并希望将字体调整为窗口的大小，以便一行中的字符数大致恒定。

# java - 用于检查 java 的脚本文件

> ID：14141596
> 
> 赞同：-1
> 
> 时间：2013-01-03T15:10:58.220
> 
> 标签：java, linux, shell

我有一个如下所示的脚本文件：

```
 # /bin/sh

if [ -z "$JAVACMD" ] ; then
   if [ -n "$JAVA_HOME" ] ; then
      JAVACMD="$JAVA_HOME/bin/java"
   else
      JAVACMD="`which java`"
   fi
 fi

if [ ! -x "$JAVACMD" ] ; then
 echo "Error: JAVA_HOME is not defined correctly; cannot execute: $JAVACMD"
 exit 1
fi 
```

有人可以告诉我“if”条件究竟检查了什么吗？我可以猜测该脚本会检查系统上安装的 java，但很想知道它到底做了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:14:15.750

*   `-z`检查字符串的长度是否**为零**（即为空）
*   `-n`检查字符串的**长度**是否为零
*   `-x`检查文件**exists**是否具有可执行权限

有关其他可用标志，请参阅[`test`手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?test)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:17:38.823

第一个 if 语句测试`$JAVACMD`变量是否已设置。如果没有，则设置它，如果设置了它，则从它构造它，`$JAVA_HOME`如果没有，则尝试查找任何`java`可执行文件。

最后的 if 语句检查`$JAVACMD`指向的路径是否实际存在，如果不存在则报告错误。

# php - 使用最新的 PHP 语法有什么性能提升吗？

> ID：14141600
> 
> 赞同：4
> 
> 时间：2013-01-03T15:11:02.547
> 
> 标签：php, syntax

随着 PHP 5.4.x 的最新版本即将发布到 5.5，引入了很多[新的语法](http://php.net/manual/en/migration54.new-features.php)。我理解它们在代码可读性、程序员更少（呃）输入、错误修复等方面的重要性。

但我特别想知道在使用这些新语法方面性能有多么显着（如果有的话）改进。如果使用更多的新语法，PHP 解释器和/或 Zend 引擎是否执行得更快/更好？

或者我可能错过了重点。需要您对此的专业知识和想法。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T15:19:07.917

新的语法被添加到一种语言中，使编写程序更容易，使代码更容易组织；通常不会使其表现更好。出于性能原因，您不应该考虑使用特定语法，而是因为它使您的代码更好，更易于使用，更易于阅读等。

例如，PHP 5.5 引入了“生成器”语法（`yield`关键字）。这是编写迭代器的改进方法。但它不会在编写迭代器风格的代码之间提供任何性能差异；它基本上会在引擎盖下做同样的事情。重要的一点是，编写一个简单的生成器比使用迭代器编写相同的代码要容易得多。代码更短、更整洁、更容易理解。它不会运行得更快，但使用起来会容易得多。这就是重点。

但是，PHP 确实在每次发布时都显着提高了语言的性能。您甚至不需要使用新功能——只需升级到最新版本，您就可以从现有代码中获得性能提升。在某些情况下，性能可以提高 50% 或更多。鉴于此，升级应该是轻而易举的事；能够使用新的语言功能是在性能提升之上的额外奖励。

有很多基准可以证明这一点；[这是一个](http://www.lornajane.net/posts/2012/php-5-4-benchmarks)涵盖 PHP v5.1 到 5.4 的示例。

（我还没有看到 v5.5 的良好基准，大概是因为它仍在开发中，但您可以确定基准将在它发布后不久发布）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:17:31.050

这是一个独立于系统的问题。您的里程可能会根据您运行的环境而有所不同。话虽如此，没有明确的方式来说明它是否“更快”。要测试您的特定环境，您必须进行一些代码分析并查看一些 5.4 代码示例与 5.5 代码示例的执行时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:26:33.913

我不确定，但我怀疑使用新语法会带来任何重大改进。解析器可能会更快地解析更简洁的新语法，但它会生成与旧版本相同的操作码。这意味着这里的改进几乎不明显。

另一方面，新版本在内部工作方面有所改进，这意味着旧代码和新代码在新引擎上运行得更好

# stored-procedures - 备份存储过程

> ID：14141605
> 
> 赞同：4
> 
> 时间：2013-01-03T15:11:19.263
> 
> 标签：stored-procedures, backup, ssms

目前，如果我想备份存储过程，使用 Mircosoft SQL Server Management Studio 2008 R2，我右键单击我的存储过程，选择修改，然后在存储过程中更改 alter proc 部分以创建 proc，并添加存储过程名称末尾的“备份”一词。有一个更好的方法吗？在一个完美的世界里，我希望能够备份数据库中的所有存储过程，并将它们保存在本地某个地方。我不喜欢我所做的所有这些备份让我的存储过程列表变得草率（因为没有更好的词）。如果您不知道，我对编写存储过程非常陌生，并且希望能够拥有它来保护现有存储过程免受我可能犯的任何错误。

提前感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T13:56:18.897

有多种方法可以将存储过程的备份与实时数据库分开。这里仅仅是少数：

*   备份数据库时，所有存储过程都包含在该备份中。如果您需要恢复到旧版本，您可以恢复到另一个数据库并将过程脚本写入新的编辑器选项卡或文件或其他任何内容。希望无论如何，您都有一个实时数据库和测试数据库，因此您可以转到您的实时数据库并在那里编写存储过程的脚本，而不必从备份中恢复。
*   您可以编写每个版本的存储过程以在创建文件时将它们分开，并在文件名后命名和附加日期。您可以通过查看[此](https://stackoverflow.com/questions/175703/script-all-stored-procedures-in-management-studio-2005?lq=1)问题的答案来编写所有现有存储过程的脚本。
*   您可以使用版本控制产品。我不确定我是否可以在这里为您指出一个，但只需在“SQL 源代码控制”上进行搜索，您就会在搜索结果中找到一个非常好的。

# iphone - 从以编程方式创建的 TableView 推送的空白详细视图

> ID：14141606
> 
> 赞同：0
> 
> 时间：2013-01-03T15:11:23.557
> 
> 标签：iphone, ios, uitableview, uinavigationcontroller, storyboard

我的设置是使用一个故事板，我在其中创建一个登录，然后是一个主屏幕，用户可以在其中按下按钮来显示他们的消息。

这些显示在以编程方式实例化的表中。

然后我想从这个表中按一行来详细了解该行，但是当我这样做时，显示的视图是空白的，但是与该类关联的所有方法都被触发（视图确实加载了，等等）。

我从其他人就他们的问题提出的不同解决方案中尝试了 10 种不同的方法，但没有任何效果。

制作新视图并推送它的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    messageDetail *messageDetailView = [[messageDetail alloc]initWithNibName:nil bundle:nil];
    messageDetailView.message = [entityObjects objectAtIndex:indexPath.row];

    [self.navigationController pushViewController:messageDetailView animated:YES];
} 
```

DetailView的ViewDidLoad：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    NSLog(@"Message Detail:\n%@",message);
    messageTitle.text = message.message_title;
    messageBody.text = message.message_xml;
} 
```

我尝试使用 segueIdentifier 路由，然后拦截 prepareSegue: 以将数据添加到新视图，但是由于 tableView 是以编程方式创建的，因此没有 segue。

我尝试通过以下方式从情节提要中实例化视图：

```
messageDetailView = [self.storyboard instantiateViewControllerWithIdentifier:@"MDV"]; 
```

但是应用程序崩溃了，因为没有带有标识符的视图，即使我设置了标识符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:36:25.487

我基本上在这里对这段代码做了同样的事情。希望这可以帮助

```
 Detail_View *next=[[Detail_View alloc] initWithNibName:@"Detail_View" bundle:nil];

    //These are just values that I needed to set before going to the next page.
    //You can use this if you want to pass over the value of your table row
    //otherwise ignore this
    next.htmlContents= [[storage_array objectAtIndex:indexPath.row]objectForKey:@"title"];

    next.titleText=[[storage_array objectAtIndex:indexPath.row] objectForKey:@"title"];

    [self.navigationController pushViewController:next animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:18:48.393

您将 nil 作为 nib 名称发送，如果您没有 nib 文件，请不要使用 initWithNibName 函数分配消息详细信息视图。

使用原始 init 或 initWithFrame。哪个适合你。

祝你好运

# openerp - 基于行中的值在发票行中只读

> ID：14141609
> 
> 赞同：2
> 
> 时间：2013-01-03T15:11:27.040
> 
> 标签：openerp

我在“account.invoice.line”中有一个“不可编辑”字段。

如果 uneditable 为真，我想禁用编辑行记录，但应该允许创建 enw 行。

我的视图代码如下

```
<record model="ir.ui.view" id="invoice_supplier_form_ext">
        <field name="name">account.invoice.supplier.form</field>
        <field name="model">account.invoice</field>
        <field name='inherit_id' ref='account.invoice_supplier_form'/>
        <field name="type">form</field>
        <field name="arch" type="xml">
        <data>
            <field name="product_id" position="before">
                <field name="uneditable" invisible="1"/>
            </field>

            <field name="quantity" position="attributes">
                <attribute name="attrs">{'readonly': [('uneditable','=', True)]}</attribute>
            </field>
          </data>
        </field>
    </record> 
```

请告诉我我做错了什么。我在查看此代码时遇到错误，并且不会将该行设为只读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:03:31.127

其实你的看法是错误的。您在 account.invoice.line 中定义了“数量”和“不可编辑”字段，然后在发票视图中添加。请检查 invoice_supplier_form 视图并在视图中正确添加字段。

```
<record model="ir.ui.view" id="invoice_line_form_ext">
    <field name="name">account.invoice.line.form</field>
    <field name="model">account.invoice.line</field>
    <field name='inherit_id' ref='account.view_invoice_line_form'/>
    <field name="type">form</field>
    <field name="arch" type="xml">
    <data>
        <field name="product_id" position="before">
            <field name="uneditable" invisible="1"/>
        </field>

        <field name="quantity" position="attributes">
            <attribute name="attrs">{'readonly': [('uneditable','=', True)]}</attribute>
        </field>
      </data>
    </field>
</record> 
```

# smalltalk - 如何用锌运行彗星（海边）

> ID：14141610
> 
> 赞同：2
> 
> 时间：2013-01-03T15:11:30.717
> 
> 标签：smalltalk, pharo, seaside

我正在尝试从 运行`Comet`示例`Seaside 3.0.7 developer image`，但这取决于 `WAListenerAdaptor`，它不包含在此发行版中。我可以加载`Seaside-Adaptors-Comanche` （实际上我这样做了）并运行了 Comanche，但我确信将 Zinc 更改为默认服务器是有原因的。我试图用谷歌搜索，但只找到了这个： http: [//lists.gforge.inria.fr/pipermail/pharo-project/2012-April/063108.html](http://lists.gforge.inria.fr/pipermail/pharo-project/2012-April/063108.html)，这充其量是不确定的。所以问题仍然存在：

*   在这种特定配置中运行的正确方法是什么`Comet`（这是未经修改的官方稳定配置）

注意，这个问题也在评论中提到：http: [//book.seaside.st/book/web-20/comet/getting-started](http://book.seaside.st/book/web-20/comet/getting-started) - 如果我得到任何确凿的答案，我会重新发布给未来的读者参考.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:36:23.913

不幸的是，彗星目前只与法罗的科曼奇合作。这不是 Zinc 无法实现的，只是还没有人实现必要的 Zinc 适配器。

# azure - 开发结构中的 Azure 服务 SSL 错误

> ID：14141612
> 
> 赞同：9
> 
> 时间：2013-01-03T15:11:35.497
> 
> 标签：azure, visual-studio-2012, azure-web-roles, azure-sdk-.net

我在让 SSL 在 Development Fabric 中工作时遇到了问题。我正在使用 Visual Studio 2012 Ultimate 和 2012 年 10 月 Azure SDK for .NET 运行 Windows 8 Pro 的全新安装。没有安装 IIS8，只有 IIS Express，它声称支持 HTTPS，所以我希望这不是问题。

以管理员身份运行 VS 12，我创建了一个空白 VS 解决方案，添加了一个新的 (.NET 4.5) 云服务和一个新的 ASP.NET MVC 4 Internet Web 应用程序项目，然后按 F5。一切正常。然后，当**我向 Web 角色添加 SSL 证书并将 HTTP 端点（端口 80）替换为 HTTPS 端点（端口 443，带有证书）时，按 F5 会产生以下错误消息：**

> 适用于 Microsoft Visual Studio 的 Windows Azure 工具
> 
> 将调试器附加到角色实例“deployment18(32).WindowsAzureCloudService.Mvc4WebRole_IN_0”时出错，进程 ID：4892。无法附加。访问被拒绝。

请注意，最后一部分（“访问被拒绝”）有几个变体，特别令人愉快的是“灾难性故障”。:)

VS 输出窗口（“常规”输出）中的唯一消息是：

> Windows Azure 工具：警告：将角色“Mvc4WebRole”中的专用端口 443 重新映射到 444，以避免在模拟期间发生冲突。

Compute Emulator UI 没有多大帮助；就在实例消失之前，这是我始终如一地获得的唯一控制台输出（有时会出现其他消息，但偶尔会每隔几次运行一次；我不确定如何捕获这些消息）：

> [面料] 角色实例：deployment18(33).WindowsAzureCloudService.Mvc4WebRole.0
> 
> [面料] 角色状态未知
> 
> [面料] 角色状态暂停
> 
> [面料] 角色状态忙碌
> 
> [面料] 角色状态不健康
> 
> [面料] 角色状态已停止

该证书是从 CA 获得的，并作为具有私钥、扩展属性的 .pfx 正确导入本地机器/个人/证书存储，并标记为可导出，物有所值。

当我尝试将服务发布到 Azure 时，我收到一个关于数据库连接字符串的构建（验证）警告（我认为这无关紧要）：

> 连接字符串“DefaultConnection”在项目“Mvc4WebRole”中使用本地数据库“(LocalDb)\v11.0”。当您在 Windows Azure 中运行此应用程序时，此连接字符串将不起作用。要访问不同的数据库，您应该更新 web.config 文件中的连接字符串。

可能更重要的是，部署实际上失败并在 Windows Azure 活动日志窗口中显示以下历史记录：

> 上午 9:00:25 - 警告：有包验证警告。
> 
> 上午 9:00:25 - 为 WindowsAzureCloudService 准备部署 - 2013 年 1 月 3 日上午 8:59:55，订阅 ID 为“<...>”，使用服务管理 URL 'https://management.core.windows.net/ '...
> 
> 上午 9:00:25 - 连接中...
> 
> 9:00:26 AM - 对象引用未设置为对象的实例。
> 
> 9:00:26 AM - 部署失败并出现致命错误

有人可以帮我解决这个问题吗？我已经重新启动了几次。;)

提前致谢！

**编辑（1 月 3 日，下午 4:44）：**我有一些想法可能会帮助我取得进步，但有些想法非常激进，因此我们将不胜感激：

*   ~~有没有办法将 Compute Emulator (Dev Fabric) 的所有输出捕获到日志文件中，以便我查看它？（来自我的服务的 System.Diagnostic.Trace 调用无济于事，因为使用 HTTPS 时我什至没有达到 RoleEntryPoint！）~~ *我想通了；见下一次编辑。*
*   Azure 部署期间的空指针异常让我担心。尝试重新安装 Azure SDK 是否值得，如果是，我应该如何进行全新安装？
*   当切换到使用完整的 IIS 作为模拟器时，有没有人看到这种问题消失了？（这似乎不太可能，因为 IIS 与 IIS Express 应该与 Azure 部署*无关。）*

**编辑（1 月 4 日，上午 10:15）：**坏消息：我尝试了授予对证书的读取访问权限的建议，但对我的情况没有帮助。好消息：我设法在 Compute Emulator UI 关闭之前捕获了其中一条零星消息；这是一些诊断中的一些信息。本身并没有帮助，但它揭示了 Development Fabric 存储其临时文件的位置：

> [诊断] 信息：C:\Users\Lars\AppData\Local\dftmp\Resources\0005155d-4592-40f4-812e-18793b26576c\directory\DiagnosticStore\Monitor

每次部署都会重新创建 GUID 部分，并在部署消失时将其删除（在我的情况下总是如此）。但是在父目录 ('dftmp') 中，我在新部署期间监视了一些有用的目录：DevFCLogs、DFAgentLogs 和 IISConfiguratorLogs。我想这回答了我昨天的第一个问题！:)

**DFAgentLogs\DFAgent.log：(41KB)**没有有用的信息。一堆“读取管道失败”消息和获取角色/部署实例 ID 的失败，我认为这只是噪音。

**DevFCLogs\DevFabric--2013.01.04--<...>.log: (510 KB)**没有有用的信息。我浏览了文件，还搜索了“错误”、“失败”、“未找到”、“证书”和“Mvc4WebRole_IN_0”；这些都没有显示出正在发生的事情的任何迹象。

**IISConfiguratorLogs\IISConfigurator.log：(6 KB)**现在我们正在取得进展！:) 有人能告诉我这是什么意思吗？（与此同时，我不再寻找 ILSpy 了……好玩……）

> IISConfigurator 信息：0 : [00006356:00000005, 2013/01/04 16:07:08.915] 使用 IIS Express appdomain
> 
> (...)
> 
> IISConfigurator 信息：0 : [00006356:00000005, 2013/01/04 16:07:08.936] 添加绑定 127.255.0.0:444: 到站点部署 18(40).WindowsAzureCloudService.Mvc4WebRole_IN_0_Web
> 
> **IISConfigurator 信息：0 : [00006356:00000005, 2013/01/04 16:07:10.484] 捕获异常**
> 
> **IISConfigurator 信息：0：[00006356:00000005, 2013/01/04 16:07:10.487] 异常：System.Runtime.InteropServices.COMException (0x800401F3)：无效的类字符串（来自 HRESULT 的异常：0x800401F3 (CO_E_CLASSSTRING)）**
> 
> **服务器堆栈跟踪：**
> 
> **在 Microsoft.Web.Administration.Interop.IAppHostProperty.get_Value()**
> 
> **在 Microsoft.Web.Administration.ConfigurationElement.GetPropertyValue（IAppHostProperty 属性）**
> 
> **在 Microsoft.Web.Administration.Binding.get_CertificateHash()**
> 
> **在 Microsoft.Web.Administration.BindingCollection.Add（绑定绑定）**
> 
> 在 Microsoft.WindowsAzure.ServiceRuntime.IISConfigurator.WasManager.DeploySite（字符串 roleId，WASite roleSite，字符串 appPoolName，字符串 sitePath，字符串 iisLogsRootFolder，字符串 failedRequestLogsRootFolder，列表`1 bindings, List`1 协议，FileManager 文件管理器，WAAppPool defaultAppPoolSettings，字符串 roleGuid，字符串和 appPoolSid，列表`1 appPoolsAdded，字符串配置路径）

**编辑（1 月 4 日，上午 11 点）：** ILSpy 没有多大帮助；在尝试获取证书的哈希以设置绑定（我们也知道）时，在互操作点抛出异常（我们已经知道）。有谁知道需要注册什么 COM 对象才能获得 Microsoft.Web.Administration 中绑定的证书哈希？或者我如何拦截互操作调用以找出答案？如果您能首先告诉我为什么会发生这种情况，则可以加分。:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-17T01:05:09.747

我在两台电脑上遇到过类似的问题。在这两种情况下**，安装 IIS 都解决了问题**。

只需安装 IIS（通过添加/删除 Windows 组件）似乎就足够了。您无需开始使用它。安装发生了一些变化，之后我的 IIS Express 再次开始使用 Visual Studio 中的 HTTPS。

在 MSDN Social 上有一个关于类似问题的讨论： [http](http://social.msdn.microsoft.com/Forums/nl-NL/windowsazuredevelopment/thread/ad362016-16f6-459a-8022-9307aa5f910e) ://social.msdn.microsoft.com/Forums/nl-NL/windowsazuredevelopment/thread/ad362016-16f6-459a-8022-9307aa5f910e 这个问题也在微软连接： [https ://connect.microsoft.com/VisualStudio/feedback/details/758533](https://connect.microsoft.com/VisualStudio/feedback/details/758533)

在我的情况下，日志文件中的错误是：

> IISConfigurator 信息：0 : [00007644:00000007, 2013.01.17 00:39:18.523] 异常：System.Runtime.InteropServices.COMException (0x800401F3)：无效的类字符串（来自 HRESULT 的异常：0x800401F3 (CO_E_CLASSSTRING)）

我从 C:\Users\\AppData\Local\dftmp\IISConfiguratorLogs 目录中找到了日志文件。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-04T02:26:27.623

当使用 SSL 的私钥证书在本地运行时，您需要向用户提供正在运行的仿真器应用程序可以访问私钥。打开 mmc.exe 并添加证书 >> 本地计算机管理单元以查看您的证书。右键单击证书，然后单击所有任务>>管理私钥-然后添加至少具有读取权限的 IUSR 和网络服务。

要部署到 Azure，您需要将证书上传到云服务并确保证书对域有效。

按照[http://www.microsoft.com/en-us/download/details.aspx?id=35448](http://www.microsoft.com/en-us/download/details.aspx?id=35448)中的步骤 11 操作。从这个[SO 帖子](https://stackoverflow.com/questions/9409083/debugging-azure-error-attaching-the-debugger-to-the-iis-worker-proccess)

# ios - 为什么模态演示是空的

> ID：14141613
> 
> 赞同：0
> 
> 时间：2013-01-03T15:11:36.787
> 
> 标签：ios, view, controller, uimodalpresentationformsh

我有两个视图控制器。在第一个中，我有一个按钮，当单击它时，我想在屏幕右侧显示另一个视图控制器，以便像模态呈现表单一样登录。

目前我有第二个带有标签的视图控制器，但是当我单击它时它显示为空，我不知道怎么做，因为我在里面放了一个标签，当然在屏幕中间。

```
LoginViewController *loginController = [[LoginViewController alloc] init];
loginController.modalPresentationStyle = UIModalPresentationFormSheet;
[self presentViewController:loginController animated:YES completion:nil];
loginController.view.superview.frame = CGRectMake(0, 0, 300, 1000);
loginController.view.superview.center = self.view.center; 
```

有什么建议可以查看标签吗？改变立场？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:57:20.873

我认为最好使用自定义容器控制器方法来执行此操作。在下面的示例代码中，我制作了一个表单大小 (540 x 600) 的登录控制器，并将其从右侧滑入 ViewController 的主视图，使其垂直居中，并靠在右边。

在 ViewController.m 中，我有这个：

```
-(IBAction)showLogin:(id)sender {
    LoginController *login = [self.storyboard instantiateViewControllerWithIdentifier:@"Login"];
    login.view.frame = CGRectMake(768, 202, 540, 600);//centered vertically and offscreen to the right
    [self addChildViewController:login];
    [self.view addSubview:login.view];
    [UIView animateWithDuration:.5 animations:^{
        login.view.frame = CGRectMake(228, 202, 540, 600);
    } completion:^(BOOL finished) {
        [login didMoveToParentViewController:self];
    }];
} 
```

为了删除视图，我在 LoginController.m 中有这个：

```
-(IBAction)goBackToMain:(id)sender {
    [UIView animateWithDuration:.5 animations:^{
        self.view.frame = CGRectMake(768, 202, 540, 600);
    } completion:^(BOOL finished) {
        [self.view removeFromSuperview];
        [self removeFromParentViewController];
    }];
} 
```

**编辑后：**

如果要从 ViewController 中的按钮中删除登录控制器，可以这样做：

```
-(IBAction)goBackToMain:(id)sender {
        LoginController *login = self.childViewControllers.lastObject;
        [UIView animateWithDuration:.5 animations:^{
            login.view.frame = CGRectMake(768, 202, 540, 600);
        } completion:^(BOOL finished) {
            [login.view removeFromSuperview];
            [login removeFromParentViewController];
        }];
    } 
```

# c# - regsvr32 文件已加载，但入口点 dllregisterserver

> ID：14141616
> 
> 赞同：2
> 
> 时间：2013-01-03T15:11:52.267
> 
> 标签：c#, dll, regsvr32, entry-point

> **可能重复：**
> [如何使用 Regsvr32 注册用 C# 编写的 COM DLL？](https://stackoverflow.com/questions/4198583/how-do-i-register-a-com-dll-written-in-c-sharp-with-regsvr32)

我已经用 C#（使用 VS2010 的 .Net 4）编写了一个 DLL。我勾选了这些框以使其 COM 可见并注册 COM 互操作。然后我将 DLL 和相关文件保存到 c:\Program Files\MyCode 目录。

当我为 DLL 运行 regsvr32 时（我想在 Excel VBA 项目中使用它），我收到上述错误消息。我正在运行带有 SP3 的 Windows XP。我已经搜索了具有相同问题的其他线程，但没有发现任何有用的东西。

任何想法将不胜感激。

约翰。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:17:30.420

我相信你想要的是 regasm，而不是 regsvr32： http: [//msdn.microsoft.com/en-us/library/tzat5yw6 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/tzat5yw6(v=vs.71).aspx)

如果您正在构建 32 位程序集，请确保运行此 regasm：

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\RegAsm.exe 
```

如果您正在构建 64 位程序集，请运行以下 regasm：

```
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\RegAsm.exe 
```

# ubuntu - Ubuntu Cordova TypeError: has no method exec in cordova-2.2.0.js at line 983

> ID：14141617
> 
> 赞同：0
> 
> 时间：2013-01-03T15:11:56.863
> 
> 标签：ubuntu, exec, cordova

最近我的笔记本电脑崩溃了，在我修复它之后，我决定切换到 Ubuntu 而不是 Windows。设置完所有相关内容后，我可以继续使用cordova开发我的android应用程序，但我无法运行在旧设置中使用windows等运行良好的代码。

（注意：不管我是在虚拟机还是在真实设备上运行代码）

问题出在 javascript 文件中的代码片段中。

```
console.log("empty directory");
console.log(window.location);
console.log("location");

window.resolveLocalFileSystemURI(dirPath, function(fileEntry) 
{
    console.log("after resolveLocalFileSystem"); 
```

这是错误消息。

```
 01-03 16:03:46.805: I/Web Console(18647): empty directory at file:///android_asset /www/update/update.js:145
   01-03 16:03:46.805: I/Web Console(18647): file:///android_asset/www/index.html at file:///android_asset/www/update/update.js:146
   01-03 16:03:46.805: I/Web Console(18647): location at file:///android_asset/www/update/update.js:147
   01-03 16:03:46.825: E/Web Console(18647): Uncaught TypeError: Object [object Object] has no method 'exec' at file:///android_asset/www/cordova-2.2.0.js:983 
```

如您所见，window.resolve... 之前的每个 console.log 都可以正常工作，但没有“resolveLocalFileSystem 之后”日志。只是未捕获的 TypeError。

在第 983 行我发现了这个

```
 var messages = nativeApiProvider.get().exec(service, action, callbackId, argsJson); 
```

但是 nativeApiProvider.get() 是空的，所以真的没有方法 exec。

我现在真的不知道该怎么办，因为我在互联网上几乎没有发现任何关于这个问题的信息，而且我不知道是什么原因造成的。

谢谢您的帮助！

# c# - 在 MouseDown 期间检查面板是否已移动

> ID：14141618
> 
> 赞同：0
> 
> 时间：2013-01-03T15:11:58.553
> 
> 标签：c#, panels

**我有一个面板，可以通过click**向左或向右移动（根据当前位置自动选择，距离是静态的）。**此外，用户可以通过单击面板、按住按钮并移动鼠标**来垂直拖动面板。问题是，当面板在垂直移动后放下时，面板也会向左/向右移动，因此用户必须在之后再次单击它才能到达正确的一侧（左/右）。以下是我正在使用的方法：将事件处理程序添加到面板（此处称为 Strip）

```
Strip.MouseDown += new MouseEventHandler(button_MouseDown);
Strip.MouseMove += new MouseEventHandler(button_MouseMove);
Strip.MouseUp += new MouseEventHandler(button_MouseUp);
Strip.Click += new EventHandler(strip_Click); 
```

这里是上面提到的所有方法：

```
void button_MouseDown(object sender, MouseEventArgs e)
    {
        activeControl = sender as Control;
        previousLocation = e.Location;
        Cursor = Cursors.Hand;
    }

void button_MouseMove(object sender, MouseEventArgs e)
    {
        if (activeControl == null || activeControl != sender)
            return;

        var location = activeControl.Location;
        location.Offset(0, e.Location.Y - previousLocation.Y);
        activeControl.Location = location;
    }

void button_MouseUp(object sender, MouseEventArgs e)
    {
        activeControl = null;
        Cursor = Cursors.Default;
    }

void strip_Click(object sender, EventArgs e) // The one moving strip to left or right
    {
        activeControl = sender as Control;
            if (activeControl.Left != 30)
                activeControl.Left = 30;
            else
                activeControl.Left = 5;
    } 
```

如何使面板在垂直移动时不向左或向右移动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:36:45.027

您需要区分单击和拖动。所以添加一个名为“dragged”的私有字段。

```
 private bool dragged; 
```

在 MouseDown 事件处理程序中添加：

```
 dragged = false; 
```

在 MouseMove 事件处理程序中添加：

```
 if (Math.Abs(location.Y - previousLocation.Y) > 
        SystemInformation.DoubleClickSize.Height) dragged = true; 
```

在 Click 事件处理程序中添加：

```
 if (dragged) return; 
```

# javascript - 自动更正对重复字段的行为很奇怪

> ID：14141619
> 
> 赞同：0
> 
> 时间：2013-01-03T15:11:59.767
> 
> 标签：javascript, jquery, forms, validation, knockout.js

我有一个用户可以复制的表单，因此他们可以一次提交多个表单。这工作正常。但是，我注意到用户没有以正确的方式使用它。例如，我要求姓名首字母，人们填写他们的名字。PHP 检查所有字段并在必要时自动更正它们，但这会将 John 变成 JOHN

无论如何，一个好方法是自动更正字段。这适用于初始表单，但在重复的表单上会出错。尤其是首字母的行为很奇怪。我对 jQuery 和 Javascript 的了解非常有限，所以在困惑了几个星期后，我仍然不知道如何解决它。欢迎提出建议。

小提琴：http: [//jsfiddle.net/QUxyy/15/](http://jsfiddle.net/QUxyy/15/)

JS

```
// Lowercase
    $(".lowercase").keyup(function(e)
    {
        $(".lowercase").val(($(".lowercase").val()).toLowerCase());
        if (/[a-z]/g.test(this.value))
        {
            this.value = this.value.replace(/[^a-z ]/g, '');
        }

    });

    // Initials
    $(".initials").focus(function() {
        var current = $(".initials").val();
        $(".initials").keyup(function(e) {
            var key = String.fromCharCode(e.keyCode);
            if (key >= 'A' && key <= 'Z') {
                current += key + ".";
                this.value = current;
            }
            else {
                current = "";
            }
        });
    $(".initials").blur(function() {
        var i = $(".initials").val();
        var last = i[i.length - 1];
        if (last != "." && i.length !== 0){
            this.value += ".";
            }
        });
    });

    // Capitalize
    $(".cap").keyup(function(e)
    {
        function convertToUpper() {
        return arguments[0].toUpperCase();
         }
        val = this.value.toLowerCase().replace(/\b[a-z]/g, convertToUpper);
        this.value = val;

    }); 
```

[点击查看完整代码和预览](http://jsfiddle.net/QUxyy/15/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:24:46.397

在 .voorletters 的回调事件处理函数中使用“this”，例如：

[看演示](http://jsfiddle.net/GXnTk/)

```
$(document).on("keydown", ".voorletters", function(e)  {
            var i = $(this).val();
            if (e.keyCode == 8 && i.charAt(i.length - 1) == ".") {
                $(this).val(i.slice(0, -1));
                current = $(this).val();
            }
        }) 
```

你应该为你所有的回调函数做这件事，比如 .initials、.lowercase 等等......

# ruby-on-rails - 在 Rails 中点赞/登录的 Facebook 粉丝专页应用

> ID：14141628
> 
> 赞同：1
> 
> 时间：2013-01-03T15:12:24.537
> 
> 标签：ruby-on-rails, facebook, facebook-like

不仅仅是寻找一个确切的解决方案。我试图弄清楚整个过程以及它如何在最佳实践方面发挥作用。我有一个应用程序（汽车清单），我想为他注册用户，以便他能够发布待售汽车清单。

整个想法是用户必须喜欢粉丝页面才能查看/浏览内容。

我在想; 当喜欢粉丝页面或当他尝试访问汽车发布页面（汽车/新车）时，我是否必须创建用户模型，或者整个过程是否通过 facebook OAUTH 发生？

我是一个相当有经验的网络开发人员，但在通过 facebook 注册/喜欢时我有点迷茫。有人能指出我正确的方向吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:41:31.650

对于那些正在寻找优雅解决方案的人，我可以在设计 wiki 中找到一个。

这里逐步解释了设置 OmniAuth 以及从 Rails 的角度来看整个过程是如何工作的。

[https://github.com/plataformatec/devise/wiki/OmniAuth:-概述](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)

# php - register_globals 修复

> ID：14141631
> 
> 赞同：4
> 
> 时间：2013-01-03T15:12:35.357
> 
> 标签：php, hosting

我有一个客户，他希望我主持一个网上商店。该站点由另一个开发人员编写并使用寄存器全局变量。

当我将它上传到我的服务器时，它告诉我需要启用 register_globals，我检查了 .htaccess 文件，它是。当我询问托管公司时，他们告诉我它已被弃用并且不会在服务器上运行。我不确定代码的哪些部分依赖于它，因为我没有仔细研究编程，我只是打算托管它。

是否有快速解决方案，或者我是否必须将代码拆开并使用最新的替代方案进行修复？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-03T15:19:15.353

一个真正丑陋但非常快速的解决方法如下：

```
foreach (array('_GET', '_POST', '_COOKIE', '_SERVER') as $_SG) {
    foreach ($$_SG as $_SGK => $_SGV) {
        $$_SGK = $_SGV;
    }
} 
```

最好在任何可以执行的 php 脚本的顶部，在任何其他代码之前。

请注意，这不是我真正推荐的东西。请尝试说服您的客户他们应该得到更好的东西。如果代码需要 register_globals，很可能它就像地狱一样不安全......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-03T16:00:24.580

如果代码使用寄存器全局变量，并且没有更新为不使用它，那么它可能是很久以前编写的。这意味着：

1.  几乎可以肯定存在大量安全漏洞；
2.  它可能使用已弃用和/或删除的其他 PHP 功能；
3.  它可能是非常混乱的意大利面条代码，并且
4.  重写以解决所有问题将是一个婊子。

我的建议是找到一个现代购物车软件包并帮助他使用它来建立他的商店，而不是试图让他现有的古老软件继续运行。这似乎是更多的工作，但从长远来看，对于所有参与其中的人来说，麻烦会少得多。

如果你*必须*修复他现有的代码（即如果他求你并愿意为你的工作支付很多钱），这里是如何处理寄存器全局变量：

注册全局变量获取输入到 POST 或 GET 参数中的所有变量，并将它们创建为全局命名空间中的简单变量。所以，而不是`$_GET['id']`，你只是得到`$id`。

如果程序的编写和文档记录得相当好，那么查看它所期望的变量可能并不难。在这种情况下，替换相关变量并不难`$_REQUEST`；任务完成。

但是很多（呃，大多数）旧的 PHP 代码只是抛出了全局变量，而没有过多关注它们。加入一堆包含，数百行没有`function()`在站点中声明的代码，以及交织的 PHP 和 HTML 代码，可能还有一些生成的 Javascript 被抛出，你经常会遇到一个除了原作者之外的任何人都完全无法理解的混乱（有时甚至不是他们）。

如果代码看起来像这样，你将是一个非常勇敢的人来尝试修复它。你应该接受它是无法挽救的，然后走开。过去我有过一些工作，我被要求修复这样的旧代码，相信我，你可以在开始到达某个地方之前投入数月（甚至数年）的时间。在那种时间尺度上，你还不如从头开始编写一个全新的系统。

# ckeditor - 对 CKEditor 工具栏定义感到困惑

> ID：14141632
> 
> 赞同：0
> 
> 时间：2013-01-03T15:12:41.820
> 
> 标签：ckeditor, toolbar

全部，

从 CKEditor 的开发者指南（http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Toolbar）中，您可以看到定义工具栏有两种方法：

方法一：config.toolbar_Full = [ { name: 'document', items : [ 'Source','-','Save','NewPage','DocProps','Preview','Print','-', '模板'] }, .... ];

方法2：config.toolbar_Full = [ ['Bold', 'Italic', '-', 'NumberedList', 'BulletedList', '-', 'Link', 'Unlink','-','About']。 ... ];

他们之间有什么区别？方法 2 是否在早期版本中使用，以便它们必须支持向后兼容？

另一个问题：

config.toolbar 属性，来自文档，它可以是类似 config.toolbar="Full" 的字符串或类似的数组： `config.toolbar = [ [ 'Source', '-', 'Bold', 'Italic' ] ];`

你不觉得这是一种混乱吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T11:39:28.327

As per my knowledge

Method 1: has naming of the group while the second method contains only the itmes used in method 1.

Config.toolbar can be either a name of the settings or the array of the group settings.

# ios - iCloud 突然超时，无法下载文件

> ID：14141634
> 
> 赞同：3
> 
> 时间：2013-01-03T15:12:42.273
> 
> 标签：ios, ipad, core-data, icloud, magicalrecord

我使用 iCloud 存储 iPad 应用程序的核心数据信息。我使用[Magical Record](https://github.com/magicalpanda/MagicalRecord)提供的辅助方法来处理与 Core Data 相关的所有内容。

昨天我的应用程序在访问 Core Data 时开始表现得很奇怪。即使数据库完全为空（应用程序的全新安装），应用程序也会完全冻结并花费大量时间加载。等待几分钟后，它会给出一个错误，说 iCloud 已超时。给出了以下错误：

```
-[PFUbiquitySafeSaveFile waitForFileToUpload:](268): CoreData: Ubiquity:  <PFUbiquityPeerReceipt: 0x1f85c580>(0)
    permanentLocation: <PFUbiquityLocation: 0x1f85c5d0>: /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~com~mydomain~MyAppName/mobile.D2EB3F30-70E9-5405-931D-B7217274BA1C/com.mydomain.MyAppName/HExUvqv20os5L2c5u1DeTzBs3lEpOwzkgw1MsXYupPg=/receipt.0.cdt
    safeLocation: <PFUbiquityLocation: 0x1f85ce30>: /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~com~mydomain~MyAppName/mobile.D2EB3F30-70E9-5405-931D-B7217274BA1C/com.mydomain.MyAppName/HExUvqv20os5L2c5u1DeTzBs3lEpOwzkgw1MsXYupPg=/mobile.D2EB3F30-70E9-5405-931D-B7217274BA1C.0.cdt
    currentLocation: <PFUbiquityLocation: 0x1f85ce30>: /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~com~mydomain~MyAppName/mobile.D2EB3F30-70E9-5405-931D-B7217274BA1C/com.mydomain.MyAppName/HExUvqv20os5L2c5u1DeTzBs3lEpOwzkgw1MsXYupPg=/mobile.D2EB3F30-70E9-5405-931D-B7217274BA1C.0.cdt

    kv: (null)

Safe save failed for file, error: Error Domain=NSCocoaErrorDomain Code=512 "The file upload timed out." UserInfo=0x1f85d520 {NSLocalizedDescription=The file upload timed out.}
2013-01-03 16:03:35.276 MyAppName[188:1503] +[MagicalRecord(ErrorHandling) defaultErrorHandler:](0x12059c) Error: The file upload timed out.
2013-01-03 16:03:35.277 MyAppName[188:1503] +[MagicalRecord(ErrorHandling) defaultErrorHandler:](0x12059c) Error Message: The file upload timed out.
2013-01-03 16:03:35.278 MyAppName[188:1503] +[MagicalRecord(ErrorHandling) defaultErrorHandler:](0x12059c) Error Domain: NSCocoaErrorDomain
2013-01-03 16:03:35.280 MyAppName[188:1503] +[MagicalRecord(ErrorHandling) defaultErrorHandler:](0x12059c) Recovery Suggestion: (null)
2013-01-03 16:03:35.296 MyAppName[188:907] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 0 beyond bounds for empty array'
*** First throw call stack:
(0x3ade92a3 0x356bf97f 0x3ad33e8d 0xb3db3 0x35e3f11f 0x35e3e4b7 0x35e431bd 0x3adbcf3b 0x3ad2febd 0x3ad2fd49 0x3a4b72eb 0x36879301 0x4fa7d 0x4fa18)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

我读了几篇帖子说 iCloud 可能会表现得很奇怪，最好还是等一下。这就是我所做的，当我今天在 18 小时后尝试时，或多或少发生了同样的事情。

首先，当我启动应用程序时，它给了我另一个错误。启动应用程序时会发生这种情况，因为我在`-application:didFinishLaunchingWithOptions:`. 我收到以下错误：

```
-[_PFUbiquityRecordsImporter rollResponseOperation:encounteredAnError:whileTryingToAdoptBaseline:](1509): CoreData: Ubiquity:  <PFUbiquityBaselineRollResponseOperation: 0x1e0b3540> localPeerID: mobile.D2EB3F30-70E9-5405-931D-B7217274BA1C, storeName: com.mydomain.MyAppName, modelVersionHash: HExUvqv20os5L2c5u1DeTzBs3lEpOwzkgw1MsXYupPg=
    ubiquityRootLocation: <PFUbiquityLocation: 0x1cdb8650>: /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~com~mydomain~MyAppName

Encountered an error while trying to respond to the roll of baseline: <PFUbiquityBaseline: 0x1e0b4aa0>(0)
    permanentLocation: <PFUbiquityLocation: 0x1e0ab2e0>: /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~com~mydomain~MyAppName/.baseline/com.mydomain.MyAppName/HExUvqv20os5L2c5u1DeTzBs3lEpOwzkgw1MsXYupPg=/baseline.zip
    safeLocation: <PFUbiquityLocation: 0x1e0b33a0>: /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~com~mydomain~MyAppName/.baseline/com.mydomain.MyAppName/HExUvqv20os5L2c5u1DeTzBs3lEpOwzkgw1MsXYupPg=/mobile.D2EB3F30-70E9-5405-931D-B7217274BA1C
    currentLocation: <PFUbiquityLocation: 0x1e0ab2e0>: /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~com~mydomain~MyAppName/.baseline/com.mydomain.MyAppName/HExUvqv20os5L2c5u1DeTzBs3lEpOwzkgw1MsXYupPg=/baseline.zip

    storeName: com.mydomain.MyAppName
    modelVersionHash: HExUvqv20os5L2c5u1DeTzBs3lEpOwzkgw1MsXYupPg=
    baselineArchiveLocation: <PFUbiquityLocation: 0x1e0ab2e0>: /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~com~mydomain~MyAppName/.baseline/com.mydomain.MyAppName/HExUvqv20os5L2c5u1DeTzBs3lEpOwzkgw1MsXYupPg=/baseline.zip

Error: Error Domain=NSCocoaErrorDomain Code=134310 "The operation couldn’t be completed. (Cocoa error 134310.)" UserInfo=0x1e0b8c40 {baseline=<PFUbiquityBaseline: 0x1e0b4aa0>(0)
    permanentLocation: <PFUbiquityLocation: 0x1e0ab2e0>: /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~com~mydomain~MyAppName/.baseline/com.mydomain.MyAppName/HExUvqv20os5L2c5u1DeTzBs3lEpOwzkgw1MsXYupPg=/baseline.zip
    safeLocation: <PFUbiquityLocation: 0x1e0b33a0>: /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~com~mydomain~MyAppName/.baseline/com.mydomain.MyAppName/HExUvqv20os5L2c5u1DeTzBs3lEpOwzkgw1MsXYupPg=/mobile.D2EB3F30-70E9-5405-931D-B7217274BA1C
    currentLocation: <PFUbiquityLocation: 0x1e0ab2e0>: /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~com~mydomain~MyAppName/.baseline/com.mydomain.MyAppName/HExUvqv20os5L2c5u1DeTzBs3lEpOwzkgw1MsXYupPg=/baseline.zip

    storeName: com.mydomain.MyAppName
    modelVersionHash: HExUvqv20os5L2c5u1DeTzBs3lEpOwzkgw1MsXYupPg=
    baselineArchiveLocation: <PFUbiquityLocation: 0x1e0ab2e0>: /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~com~mydomain~MyAppName/.baseline/com.mydomain.MyAppName/HExUvqv20os5L2c5u1DeTzBs3lEpOwzkgw1MsXYupPg=/baseline.zip
, localStoreKV=<PFUbiquityKnowledgeVector: 0x1e0b90c0> ()}
userInfo: {
    baseline = "<PFUbiquityBaseline: 0x1e0b4aa0>(0)\n\tpermanentLocation: <PFUbiquityLocation: 0x1e0ab2e0>: /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~com~mydomain~MyAppName/.baseline/com.mydomain.MyAppName/HExUvqv20os5L2c5u1DeTzBs3lEpOwzkgw1MsXYupPg=/baseline.zip\n\tsafeLocation: <PFUbiquityLocation: 0x1e0b33a0>: /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~com~mydomain~MyAppName/.baseline/com.mydomain.MyAppName/HExUvqv20os5L2c5u1DeTzBs3lEpOwzkgw1MsXYupPg=/mobile.D2EB3F30-70E9-5405-931D-B7217274BA1C\n\tcurrentLocation: <PFUbiquityLocation: 0x1e0ab2e0>: /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~com~mydomain~MyAppName/.baseline/com.mydomain.MyAppName/HExUvqv20os5L2c5u1DeTzBs3lEpOwzkgw1MsXYupPg=/baseline.zip\n\n\tstoreName: com.mydomain.MyAppName\n\tmodelVersionHash: HExUvqv20os5L2c5u1DeTzBs3lEpOwzkgw1MsXYupPg=\n\tbaselineArchiveLocation: <PFUbiquityLocation: 0x1e0ab2e0>: /private/var/mobile/Library/Mobile Documents/XXXXXXXXXX~com~mydomain~MyAppName/.baseline/com.mydomain.MyAppName/HExUvqv20os5L2c5u1DeTzBs3lEpOwzkgw1MsXYupPg=/baseline.zip\n";
    localStoreKV = "<PFUbiquityKnowledgeVector: 0x1e0b90c0> ()";
} 
```

现在，在尝试了论坛上提到的几种解决方案（例如清理构建、重新安装应用程序、删除 iCloud 数据等）后，我得到了与昨天相同的错误。

我真的无法弄清楚为什么会发生这种情况。我不记得对 iCloud 配置做过任何事情。我已经更新了我的数据模型，但是在完成应用程序的全新安装、删除所有以前的 iCloud 数据等之后，这并不重要。

我希望有人可以帮助我更接近为什么会发生这些错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T18:49:36.510

这似乎是 iCloud 现在的一个已知问题。我的应用程序使用 CoreData 和 iCloud 一直在间歇性地工作。很多错误 Domain=NSCocoaErrorDomain Code=512 "文件上传超时。" 它可能与您的应用程序完全无关，更多地与 iCloud 服务器有关。我一直在关注开发者论坛上的一个帖子，指出它是苹果方面的错误。（至少对于自 2031 年 12 月 30 日以来的问题）这是讨论：

[链接到讨论线程 176739](https://devforums.apple.com/thread/176739?tstart=0)

# javascript - console.log JSON 数据？

> ID：14141636
> 
> 赞同：1
> 
> 时间：2013-01-03T15:12:44.897
> 
> 标签：javascript, jquery, ajax, json

**问题**

我正在尝试记录从 JSON 调用返回的数据，`console.log(jsonData)`但似乎无法正常工作。

**代码**

```
$(document).ready(function() {
    $("#users li a:first-child").click(function() {

        var id = this.href.replace(/.*=/, "");
        this.id = "delete_link_" + id;

        if(confirm("Are you sure you want to delete this user?"))
        {
            $.getJSON("delete.php?ajax=true&id=" + id, function(data) {
                console.log(data.success);
            });
        }

        return false;
    });
}); 
```

**返回者`delete.php`**

`{"id": $id, "success": 1}`成功后。
`{"id": $id, "success": 0, "error": "Could not delete user."}`失败时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:22:48.600

您的 JSON 无效：

```
{'id' : 2, 'success' : 1} 
```

它应该有双引号：

```
{"id" : 2, "success" : 1} 
```

基于此，我认为您正在手动构建 JSON 字符串，我建议您`json_encode()`改用：

```
$result = new stdClass;
$result->id = 2;
$result->success = 1;

echo json_encode($result); 
```

输出

```
{"id":2,"success":1} 
```

# sql - Order By date 描述问题

> ID：14141638
> 
> 赞同：1
> 
> 时间：2013-01-03T15:12:49.333
> 
> 标签：sql, date, union

我有这些疑问：

```
(SELECT * FROM product WHERE var<>'0'ORDER BY date DESC) 
```

和

```
(SELECT * FROM product WHERE var='0' ORDER BY date DESC). 
```

当我尝试将两者的结果合二为一时

```
 (SELECT * FROM product WHERE var<>'0'ORDER BY date DESC) 
 UNION 
 (SELECT * FROM product WHERE var='0' ORDER BY date DESC) 
```

结果失去了顺序...结果集首先包含所有var不为零的记录，然后是所有var为零的记录，但它们没有按日期排序...特别是顺序有效...为什么？我尝试使用唯一的顺序，但结果混合了 var 等于或不为零的记录...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T15:13:55.610

您必须最后申请订单：

```
SELECT * FROM product WHERE var<>'0'
UNION 
SELECT * FROM product WHERE var='0'
ORDER BY date DESC 
```

**如果您想保留两个部分的顺序，请编辑**，所以首先使用`var<>'0'`（内部排序`date DESC`），然后全部使用`var='0'`（内部排序`date DESC`）：

```
SELECT * FROM product WHERE var<>'0'
UNION 
SELECT * FROM product WHERE var='0'
ORDER BY 
    CASE WHEN var<>'0' THEN 0 ELSE 1 END ASC,
    date DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T15:21:34.843

我相信您要做的是将结果集放在`'0'`最后，然后按日期对每个子集进行排序。在这种情况下，您可以忘记联合并改为执行以下操作：

```
SELECT *
FROM product
WHERE var IS NOT NULL
ORDER BY CASE WHEN var = '0' THEN 2 ELSE 1 END, date DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:15:02.477

```
SELECT * FROM product WHERE var<>'0'
UNION 
SELECT * FROM product WHERE var='0'
ORDER BY date DESC 
```

相当于：

```
SELECT * FROM product
ORDER BY date DESC 
```

# java - 在 Blackberry 中上传 UTF-8 文本文件

> ID：14141651
> 
> 赞同：0
> 
> 时间：2013-01-03T15:13:42.430
> 
> 标签：java, file, blackberry, utf-8, ascii

我正在尝试将 UTF-8 文本文件上传到 Blackberry 中的服务器。上传效果很好，但是当我检查服务器中的文件时，它是一个 ASCII 文件，而我需要的是一个 UTF-8 文件。

这是我在创建文件时使用的代码：

```
FileConnection fc = (FileConnection)Connector.open(fileName);
if (!fc.exists()){
    fc.create();
}
long byteOffset = fc.usedSize();
OutputStream outStream = fc.openOutputStream(byteOffset);           
outStream.write(line.getBytes("UTF-8"));
outStream.close();
fc.close(); 
```

要发送文件，我使用这个：

```
public void run (){

    httpConnection = null;
    _connectionURL = null;
    String lineEnd = "\r\n";
    String twoHyphens = "--"; 
    String boundary = "*****";  
    int rc = -1;
    OutputStream os = null;

    try {

        _connectionURL = Constants.UPLOAD_URL + getConnectionString();

        httpConnection = (HttpConnection)Connector.open(_connectionURL);
        byte [] postDataBytes = getData();

        httpConnection.setRequestMethod("POST");
        httpConnection.setRequestProperty("Connection", "Keep-Alive"); 
        httpConnection.setRequestProperty("User-Agent", "BlackBerry");
        httpConnection.setRequestProperty("Content-Type", "multipart/form-data;boundary=*****");                        
        httpConnection.setRequestProperty(HttpProtocolConstants.HEADER_CONTENT_LANGUAGE, "en-US");
        httpConnection.setRequestProperty(HttpProtocolConstants.HEADER_CACHE_CONTROL,"no-cache, no-store, no-transform");           

        os = httpConnection.openOutputStream();
        os.write((twoHyphens + boundary + lineEnd).getBytes());
        os.write(("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + fileName +"\"" + lineEnd).getBytes());
        os.write(lineEnd.getBytes());
        os.write(postDataBytes);
        os.write(lineEnd.getBytes());
        os.write((twoHyphens + boundary + twoHyphens + lineEnd).getBytes());
        os.flush(); 

        // Response
        rc = httpConnection.getResponseCode();
        InputStream in = httpConnection.openInputStream();
        int ch;
        StringBuffer stringBuffer = new StringBuffer();
        while( ( ch = in.read() ) != -1 ){
            stringBuffer.append( (char)ch );
        }            
        String responseString = stringBuffer.toString();

        ...

    }catch (IOException ioe){
       ...
    }
}

...

private byte[] getData() throws IOException {
    int _c;
    StringBuffer _stringBuffer = new StringBuffer("UTF-8");
    FileConnection fileForUpload = (FileConnection) Connector.open(Constants.FOLDER_FILES+this.fileName, Connector.READ);
    this.fileInputStream = fileForUpload.openDataInputStream();
    this.postData = new URLEncodedPostData("UTF-8", false);
    while( (_c = this.fileInputStream.read()) != -1){
        _stringBuffer.append((char)_c);         
    }
    postData.setData(_stringBuffer);
    byte [] _postData = postData.getBytes();
    fileForUpload.close();
    return _postData;
} 
```

我猜*getData()*方法或*httpConnection*属性有问题，但我不知道是什么问题。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:20:54.757

看看这段代码，它出现了两次：

```
while( ( ch = in.read() ) != -1 ){
    stringBuffer.append( (char)ch );
} 
```

这将每个字节视为一个单独的字符，在 ISO-8859-1 中有效。

如果您真的想将内容转换为文本，您应该使用`InputStreamReader`UTF-8 编码的，然后理想地读取字符*块*（而不是一次一个字符）。

这也无济于事：

```
byte [] _postData = postData.getBytes(); 
```

这将使用平台默认编码将字符串转换为字节——这几乎*不是*你想要的。

鉴于您的`getData`方法正在尝试将文件*作为字节数组*读取，您根本不应该将其转换为文本，IMO。如果您事先知道文件长度，您应该只创建一个大小合适的字节数组并重复调用`InputStream.read(byte[], int, int)`，注意返回值以查看您已经阅读了多远。如果你不这样做，你可以重复读入一个小的缓冲区，然后将你刚刚读到的数据写入一个`ByteArrayOutputStream`你以后可以从中获取字节数组的数据。

此外，您似乎永远不会关闭任何流 - 您应该在`finally`语句中执行此操作，以便即使抛出异常也关闭流。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T21:23:28.527

除了 Jon Skeet 的回答。

要从文件中读取字节数组，您可以简单地使用`net.rim.device.api.io.IOUtilities`：

```
FileConnection fileForUpload = 
        (FileConnection) Connector.open(path, Connector.READ);
InputStream stream = fileForUpload.openInputStream();
byte[] data = IOUtilities.streamToBytes(stream); 
```

# ant - ANT - 将字符串转换为具有位置属性的路径

> ID：14141657
> 
> 赞同：1
> 
> 时间：2013-01-03T15:13:53.613
> 
> 标签：ant, location, classpath, pathelement

我有以下 ANT 脚本，它在运行时根据 websphere 根目录为我提供了 websphere 库的列表。我需要将生成的字符串转换为单独的路径位置元素

我当前的脚本是

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="TestPath" basedir="." default="print-dirset">

    <target name="init" description="Define websphere libraries">
        <property name="compile.lib.dir" value="C:\Software\WAS85" />
    </target>
    <target name="print-dirset" depends="init" description="">
        <path id="websphere.libs">
            <dirset dir="${compile.lib.dir}">
                <include name="*" />
            </dirset>
        </path>
        <property name="websphere.libs.list" refid="websphere.libs" />
        <echo message="websphere.libs.list: ${websphere.libs.list}" />
        <pathconvert property="websphere.libs.convert" pathsep="${file.separator}*${path.separator}">
            <path path="${websphere.libs.list}" />
        </pathconvert>
        <echo message="websphere.libs.convert: ${websphere.libs.convert}" />
    </target>
</project> 
```

输出如下字符串

```
 [echo] websphere.libs.list: C:\Software\WAS85\Scheduler;C:\Software\WAS85\UDDIReg;C:\Software\WAS85\bin;C:\Software\WAS85\configuration;....C:\Software\WAS85\web;C:\Software\WAS85\wlp
 [echo] websphere.libs.convert: C:\Software\WAS85\Scheduler\*;C:\Software\WAS85\UDDIReg\*;C:\Software\WAS85\bin\*;C:\Software\WAS85\configuration\*;...C:\Software\WAS85\web\*;C:\Software\WAS85\wlp 
```

我想将上面的第二个字符串翻译成如下结构

```
<path id="websphere.classpath">
    <pathelement location="C:\Software\WAS85\Scheduler\*" />
    <pathelement location="C:\Software\WAS85\UDDIReg\*" />
    <pathelement location="C:\Software\WAS85\bin\*" />
    <pathelement location="C:\Software\WAS85\configuration\*" />
......
    <pathelement location="C:\Software\WAS85\web\*" />
    <pathelement location="C:\Software\WAS85\wlp\*" />
</path> 
```

转换中的最后一个元素还需要添加原始字符串中没有的 '\*' 部分。

然后可以与类似的结构一起使用

```
<path id="compile.classpath">
  <path refid="ext.classpath"/>
  <path refid="websphere.classpath"/>
  <path refid="module.compile.classpath"/>
</path> 
```

上述尝试的目的是通过使用 JDK 1.6 提供的通配符类路径来减少类路径的长度，从 ANT 1.8.2 开始，它在 ANT 中可用。我正在使用 ANT 1.8.4。

我不是 ANT 方面的专家，我可以通过查看示例来解决。

有没有办法实现我想要做的事情？我该怎么做？任何示例都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:06:02.040

通过在 javac 任务中使用 fork="yes" 和 executable="path-to-my-executable" 属性，我能够使通配符部分工作。

我不想标记已回答的问题，因为我的基本问题是关于转换字符串。但是由于收到的答案没有谈到这一点，也没有提到如何让通配符类路径工作，而我的问题的目的是让通配符类路径工作，我在这里为任何试图得到它的人指出了这一点去工作

我仍然需要一些帮助来将分号分隔的字符串转换为如下所示的构造

```
<path id="websphere.classpath">
    <pathelement location="C:\Software\WAS85\Scheduler\*" />
    <pathelement location="C:\Software\WAS85\UDDIReg\*" />
    <pathelement location="C:\Software\WAS85\bin\*" />
    <pathelement location="C:\Software\WAS85\configuration\*" />
......
    <pathelement location="C:\Software\WAS85\web\*" />
    <pathelement location="C:\Software\WAS85\wlp\*" />
</path> 
```

**更新：**

我编写了一个自定义 ANT 任务以使通配符类路径正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:35:48.607

如果所有依赖项都驻留在 中`C:\Software\WAS85`，则可以使用[文件集](http://ant.apache.org/manual/Types/fileset.html)来捕获所有依赖项：

```
<fileset dir="${compile.lib.dir}" id="compile.files">
  <include name="**/*.java"/>
  <!-- include name="**/*.jar" /-->
</fileset> 
```

然后，您可以`compile.files`在`build.xml`.

# c# - 具有多个数据源的 DynamicDataDisplay 折线图绘图仪？

> ID：14141658
> 
> 赞同：1
> 
> 时间：2013-01-03T15:13:54.100
> 
> 标签：c#, wpf, linegraph, dynamic-data-display, line-plot

我试图在我的图表上绘制不同颜色的多条曲线。我目前正在使用一台绘图仪（不确定这是否可行，这就是我在这里发布线程的原因），这是我的代码：

```
if (_dataXChA != null && _dataXChA.Length > 1)
{
  EnumerableDataSource<double> xChA = new EnumerableDataSource<double>(_dataXChA);
  xChA.SetXMapping(xVal => xVal);

  if (_dataYChA != null && _dataYChA.Length == _dataXChA.Length)
  {
    EnumerableDataSource<double> yChA = new EnumerableDataSource<double>(_dataYChA);
    yChA.SetYMapping(yVal => yVal);
    CompositeDataSource dsChA = new CompositeDataSource(xChA, yChA);
    ((LineGraph)plotter.Children.ElementAt(startIndex)).DataSource = dsChA;                   
    plotter.FitToView();
  }
}

if (_dataXChB != null && _dataXChB.Length > 1)
{
  EnumerableDataSource<double> xChB = new EnumerableDataSource<double>(_dataXChB);
  xChB.SetXMapping(xVal => xVal);

  if (_dataYChB != null && _dataYChB.Length == _dataXChB.Length)
  {
    EnumerableDataSource<double> yChB = new EnumerableDataSource<double>(_dataYChB);
    yChB.SetYMapping(yVal => yVal);                    
    CompositeDataSource dsChB = new CompositeDataSource(xChB, yChB);
    ((LineGraph)plotter.Children.ElementAt(startIndex)).DataSource = dsChB;
    //LineGraph lgChA = plotter.AddLineGraph(dsChB, _dataBrushColorChB, 1, "Data");
    plotter.FitToView();
  }
} 
```

第一条曲线应该是绿色的，第二条曲线应该是红色的。`plotter`是`CharterPlotter`但是当我看图表时，我只有一条曲线。然后我查看了数据，似乎曲线显示了来自第二个数据源的数据，但曲线的颜色是绿色。

构造函数分配颜色是这样的：

```
LineGraph lgChA = plotter.AddLineGraph(dsChA, _dataBrushColorChA, 1, "Data");
LineGraph lgChB = plotter.AddLineGraph(dsChB, _dataBrushColorChB, 1, "Data"); 
```

在哪里，

```
_dataBrushColorChA = Colors.Green;
_dataBrushColorChB = Colors.Red; 
```

基本上，我只在每次事件发生时更新数据点，因为我尝试过`AddLineGraph()`，但结果非常慢，所以我只更新数据点。所以，有人给我任何指示吗？我该如何处理这种多数据源的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:54:17.100

看起来您正在`startIndex`为两个通道的同一个绘图仪子设置数据源：

```
((LineGraph)plotter.Children.ElementAt(startIndex)).DataSource = dsChA;

...

((LineGraph)plotter.Children.ElementAt(startIndex)).DataSource = dsChB; 
```

第二个赋值将导致`DataSource`被 覆盖`dsChB`，这将使它只显示一行。

也许A和B的索引应该不同？

# java - HTTP Base64 编码标头

> ID：14141661
> 
> 赞同：0
> 
> 时间：2013-01-03T15:14:15.463
> 
> 标签：java, http, rest

如您所知，对于 Basic HTTP 身份验证，在 Authorization Header 中，**Base64**用于对字符串进行编码；

```
username:password 
```

我不知道为什么 HTTP 真的期望这个，但我的问题是在我的 Rest web 服务中。如果我使用**自定义**HTTP 标头来保存 userid:token 对，那么**不**使用Base64 是否安全？我可以按原样发送纯文本吗？

*注意：我使用 HTTPS，这不是安全问题*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T15:44:22.430

> 不使用 Base64 是否安全？

如果您不对它们进行 base64 编码，则用户名或密码中的文本字符之一可能不是有效的 HTTP 标头字符。您需要研究[HTTP RFC](http://www.w3.org/Protocols/rfc2616/rfc2616.html)以确保这对您的应用程序来说不是问题。

例如，您的应用程序是否允许密码中有空格？像这样的东西...

或者您可以只对用户名/密码进行 base64 编码，并且知道您可以安全地避免违反 HTTP 协议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T15:29:44.547

如果您使用自定义标头，可以根据需要以纯文本形式发送它们。

但是，如果您坚持使用 Basic HTTP 协议，您将能够在测试中使用标准工具，并且客户端无需手动添加额外代码来添加标头，因此我建议尽可能不要滚动您自己的标头。

# css - 更改页眉和页脚中的背景颜色 Clean Retina WordPress 主题

> ID：14141665
> 
> 赞同：0
> 
> 时间：2013-01-03T15:14:31.703
> 
> 标签：css, wordpress, wordpress-theming, background-color

Clean Retina 支持自定义背景功能。

转到外观->标题。您可以将图像或颜色设置为背景。您可以在同一设置页面上看到背景预览。单击保存更改。注意：背景效果只会改变内容部分，不会改变页眉和页脚部分。***如果您希望更改也反映在页眉和页脚中，然后在外观->主题选项->设计选项->自定义 CSS 输入字段中编写自定义 CSS 以隐藏页眉和页脚模式。并保存更改。***

那么这就是我想要做的，改变页眉和页脚背景的颜色。我没有使用 CSS 的经验，并且一直在搜索互联网并尝试了很多不同的代码，但都没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:10:03.867

我从你的问题中猜测你对网页设计很陌生，所以我会尽可能简单地解释事情。

HTML 页面由诸如、、等*元素*（或*标签*）构成。大多数元素必须有一个开始标签（例如）和一个结束标签（通常包含一个斜杠，例如）。这些标签之间的信息就是元素的内容，可以是任意数量的其他元素，或者只是文本。`<div>``<span>``<p>``<div>``</div>`

元素可以具有*类*或*ID*，这是 CSS 用来识别您想要更改页面的“外观”的部分（以及用作 Javascript 的钩子或链接的锚点，但我们不会现在进入）。

一个*类*（例如`<div class="someClass">...</div>`）可以在同一页面上多次使用，并且在 CSS 中以句点 ( `.`) 为前缀。您为该类编写的任何 CSS 规则都将应用于该类的每个实例。例如：

```
<style type="text/css">
    .someClass {
        color: red;
    }
</style>

<div class="someClass">Content</div>
<div class="anotherClass">Content</div>
<div class="someClass">Content</div> 
```

此代码会将第一个和最后一个`<div>`s 中的文本变为红色。

*ID*设计为在页面上是唯一的。这些在 CSS 中以哈希 ( `#`) 为前缀。

例如：

```
<style type="text/css">
    .someClass {
        color: red;
    }

    #myId {
        color: green;
    }
</style>

<div class="someClass" id="myId">Content</div>
<div class="anotherClass">Content</div>
<div class="someClass">Content</div> 
```

将导致 first`<div>`的文本变为绿色，因为*ID*比*classes*更“重要” ，以及 CSS for`#myId`出现在`.someClass`声明之后的事实（如果重要性级别较低，则样式表下方的规则会覆盖更上方的规则是一样的）。作为一个例子：

```
<style type="text/css">
    .someClass {
        color: red;
    }

    .someClass {
        color: black;
    }
</style>

<div class="someClass" id="myId">Content</div>
<div class="anotherClass">Content</div>
<div class="someClass">Content</div> 
```

`<div>`当我们覆盖我们的第一个声明时，将导致 first 和 last的文本为黑色。

现在！关于你的具体问题。

您需要做的是找出主题页眉和页脚的*ID*`#header`是什么（如果它们是和 ，我不会感到惊讶`#footer`）。然后，您需要在 CSS 文件中执行以下操作：

```
#headerId {
    background-color: yourColour;
}

#footerId {
    background-color: yourColour;
} 
```

（其中`#headerId`和`#footerId`是页眉和页脚的*ID*`yourColour` ，并且是您选择的颜色的十六进制代码（或明文名称）。）

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:45:52.677

如果您使用它的股票，我认为您需要添加以下内容。

```
#branding{background-color:blue;}
#colophon{background-color:blue;} 
```

您必须确保删除这两个选项的当前背景 CSS，它们应用了将隐藏背景颜色的图像。如果这不起作用，或者您无法访问样式表以删除这些属性，只需使用背景属性并覆盖层次结构中的当前属性，如下所示：

```
#branding{background:blue;}
#colophon{background:blue;} 
```

显然选择你自己的颜色。

# java - 创建一个复选框 java 列表

> ID：14141668
> 
> 赞同：-2
> 
> 时间：2013-01-03T15:14:46.377
> 
> 标签：java, swing, highlight, checkboxlist

我正在尝试生成一个复选框列表，该列表由数据库中的一些记录提供，就像图像（JAVA Swing）一样，最初我尝试使用几个复选框但它不起作用，现在我正在尝试使用多选列表但它没有效果也不错，这里回答的问题似乎都不能解决我的特定需求。

规格：

*   多选列表。
*   列表的每个节点都必须有一个复选框对象。
*   选中后，每个节点都必须保持突出显示。
*   如果内容比最初设置的尺寸大，它必须有一个滚动条。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:29:19.243

> 如果内容比最初设置的尺寸大，它必须有一个滚动条。

把`JList`里面放一个`JScrollPane`。

> 选中后，每个节点都必须保持突出显示。

这会让用户感到困惑。复选标记就足够了。

> 列表的每个节点都必须有一个复选框对象。

您必须扩展 a`JList`和 a`ListCellRenderer`才能获得此功能。我拥有的`ListSelectionListener`代码超过 100 行。

`JList`您可能会在 Web 上找到一个已经存在的复选框。我有一本书。

# iframe - 具有重叠标题的 Youtube 嵌入视频

> ID：14141671
> 
> 赞同：0
> 
> 时间：2013-01-03T15:14:49.890
> 
> 标签：iframe, youtube, youtube-api, z-index

我的 youtube 视频上的标题突然与视频标题中的分享和更多信息按钮重叠。如果您将鼠标悬停在视频上，则标题会正确压缩。

摆弄这个例子：http: [//jsfiddle.net/QpckF/](http://jsfiddle.net/QpckF/)

这是我的代码：

```
 <div class="interior-container">
            <h3 id="video-text">Why Book with Rail Europe?</h3>    
        <iframe frameborder="0" name="player" allowfullscreen="" id="player" title="YouTube video player" height="217" width="365" src="http://www.youtube.com/embed/wV-S_MOusMI?controls=1&amp;showinfo=1&amp;modestbranding=0&amp;wmode=opaque&amp;enablejsapi=1&amp;origin=http://www.raileurope.com"></iframe> 

              <div class="vid-arrows prevvid">
              <i class="vid-prev icon-video-left-arrow"></i>
              </div>
              <div class="vid-nav">
            <a target="player" data-text="Why Book with Rail Europe?" class="fader first active" href="http://www.youtube.com/embed/wV-S_MOusMI?controls=1&amp;showinfo=1&amp;modestbranding=0&amp;wmode=opaque&amp;enablejsapi=1&amp;origin=http://www.raileurope.com" id="default"></a>            
        <a target="player" data-text="Train Travel in Europe: Rail Pass vs. Tickets" class="fader first" href="http://www.youtube.com/embed/rxlq8KirhNM?controls=1&amp;showinfo=1&amp;modestbranding=0&amp;wmode=opaque&amp;enablejsapi=1&amp;origin=http://www.raileurope.com" id="default"></a>            
        <a target="player" data-text="Why Travel by Train in Europe?" class="fader first" href="http://www.youtube.com/embed/pQ8DwmEg9wk?controls=1&amp;showinfo=1&amp;modestbranding=0&amp;wmode=opaque&amp;enablejsapi=1&amp;origin=http://www.raileurope.com" id="default"></a>            
        </div> <!-- end vid-nav -->

        <div class="vid-arrows nextvid">
              <i class="vid-next icon-video-right-arrow"></i>
              </div>
        </div>        
    </div>​ 
```

这是 youtube 还是我的代码的问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:06:30.423

试错测试似乎表明这只是 Youtube Flash 播放器中的一个界面错误——在触发鼠标悬停事件之前，它不会正确截断标题。

我发现的其他一些界面问题；似乎当视频宽度小于 350 像素时，Flash 播放器甚至不会渲染那些“分享”和“更多信息”按钮，因此只有当视频宽度超过 350 像素但小于需要时才会出现问题有完整的标题可见。

此外，如果视频高度小于 201 像素，底部的控制栏不会自动出现（以节省空间）；但是当没有控制栏时，鼠标悬停不能触发标题连接，直到视频开始播放。

轻微的烦恼，但只在少数情况下出现，所以不知道它们的优先级有多大。您可以尝试报告错误（或查看其他人是否已经有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:54:40.470

我遇到了同样的问题。您也可以将“showinfo=0”添加到 url，它根本不会显示标题。

# svn - 具有多模块的 maven 发布插件，具有不同的 scm 标签和版本

> ID：14141677
> 
> 赞同：4
> 
> 时间：2013-01-03T15:15:15.340
> 
> 标签：svn, maven-3, maven-release-plugin

**版本：** maven 3.0.4，发布插件 2.4.0

目标是使用 maven 发布插件以非交互方式一步发布多个功能（项目）。我使用：[http ://maven.apache.org/maven-release/maven-release-plugin/examples/non-interactive-release.html](http://maven.apache.org/maven-release/maven-release-plugin/examples/non-interactive-release.html)

**SVN结构：**

```
http://host/svn/feature1/trunk | tags | branches
http://host/svn/feature2/trunk | tags | branches
http://host/svn/feature3/trunk | tags | branches 
```

**每个功能都有一个 pom.xml，带有特定的版本名称和 scm url 部分。**

有了这种结构，我希望一次性发布所有功能（有超过 12 个功能，以及它们之间的依赖关系......）。我在想 maven reactor 插件可能对我有很大帮助，以正确的顺序部署和发布所有内容；-) 然后我在 svn 中创建了一个“构建/组装”项目分支，具有以下 svn 外部：

```
feature1 http://host/svn/feature1/trunk
feature2 http://host/svn/feature2/trunk
... 
```

使用 svn externals 的目标是拥有一个平坦的工作区（它避免了 maven 发布插件的问题......）。在这个构建项目中，我只有一个 pom.xml，它是所有功能的多项目聚合器。

```
<modules>
    <module>feature1</module>
    <module>feature2</module>
    <module>feature3</module>
    ...
</modules> 
```

**然后我使用 Maven 发布命令**：

```
mvn -B release:clean release:prepare release:perform 
```

具有以下 release.properties

```
project.rel.org.sample.test\:feature1=1.0.0-RC1
project.dev.org.sample.test\:feature1=1.0.0-RC2-SNAPSHOT
project.scm.org.sample.test\:feature1.developerConnection=scm\:svn\:http\://host/svn/feature1/trunk
project.scm.org.sample.test\:feature1.connection=scm\:svn\:http\://host/svn/feature1/trunk

project.rel.org.sample.test\:feature2=1.0.0-RC1
project.dev.org.sample.test\:feature2=1.0.0-RC2-SNAPSHOT
... 
```

有了这个文件和 -B 参数，就不需要交互式输入，向用户询问功能版本。因此，可以使用 jenkins 启动该工作：D ...

**在这一步：**

*   scm 提交的更改是好的（scm url 和版本）
*   工件部署良好
*   ***但是功能 scm 标签不是在 svn 中创建的...***

只执行了根构建/组装项目的 scm 标签...

```
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] Reactor Summary:
[INFO] [INFO]
[INFO] [INFO] build ..................................... SUCCESS [1.104s]
[INFO] [INFO] feature1 .................................. SUCCESS [0.187s]
[INFO] [INFO] feature2 .................................. SUCCESS [0.648s]
[INFO] [INFO] feature3 .................................. SUCCESS [0.370s]
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] BUILD SUCCESS
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] Total time: 2.552s
[INFO] [INFO] Finished at: Thu Jan 03 14:45:37 CET 2013
[INFO] [INFO] Final Memory: 9M/22M
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] Cleaning up after release...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO]
[INFO] build ............................................. SUCCESS [7.201s]
[INFO] feature1 .......................................... SKIPPED
[INFO] feature2 .......................................... SKIPPED
[INFO] feature3 .......................................... SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------ 
```

摘要中功能的 SKIPPED 状态似乎很奇怪（但提交和清理阶段是成功的）

这个问题不是很容易解释，我希望清楚......

有人遇到过同样的问题吗？一些技巧/信息来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:36:29.377

我想到的第一件事是在 SVN 中使用外部对象，如下所示：

```
feature1 http://host/svn/feature1/trunk
feature2 http://host/svn/feature2/trunk
... 
```

将产生一个根本不可重现的状态，导致主干将来会发生变化，因此您无法重新创建此确切状态。此外，maven-release-plugin 只会为根部分（聚合 pom）制作一个标签是正确的。另一方面，应防止在与外部的关系中使用绝对 URL。

除了上述之外，听起来您正在使用 SVN 作为依赖管理工具，这不是它的目的，因为 Maven 是为此类事情而设计的，特别是如果您在那些听起来不像功能的功能之间有关系，它听起来更像是模块的特征。结果是你应该改变你的结构：

```
 +-- root (pom.xml with modules list)
       +--- module-1 (pom.xml)
       +--- module-2 (pom.xml)
       +--- module-3 (pom.xml)
       +--- module-4 (pom.xml)
       ... 
```

在 SVN 中，您必须将根文件夹放入项目的主干中，并在根 pom.xml 文件中仅定义一个 scm ara。这称为多模块构建，它处理模块之间的依赖关系等事情，并将反应堆排序为正确的顺序。

# jquery - 如何使用基于选择器而不是命名类的样式的 addClass？

> ID：14141678
> 
> 赞同：0
> 
> 时间：2013-01-03T15:15:14.573
> 
> 标签：jquery, css

我有一些 css 代码基于 id 名称等定位元素，而不是单独命名：

```
.tzOptions li .subheader { 
```

相对

```
.myClassName 
```

如何在第一个版本中使用 jquery 的 addClass？我知道命名版本，我可以做到

```
$listItems.addClass('myClassName'); 
```

如何处理不仅包含命名类，还包含命名类的“分层”版本，该命名类随后包含具有另一个命名类的 dom 元素？我需要将应用于不同 dom 元素的样式应用到`.tzOptions li .subheader`不同的 dom 元素，但不想复制样式代码，这样我就可以有一个命名类来应用。

**澄清**

我真的无法很好地解释这一点。这就是我所拥有的。我有一大块html：

```
<div id="options-reg-phone-type" class="tzOptions">
            <div class="scrollBlock">
                <ul id="dropdown-reg-phone-type">
                    <li>
                        <div class="header">Home</div>
                        <div class="subheader">info</div>
                        <div class="optkey">0</div>
                    </li>
                    <li>
                        <div class="header">Work</div>
                        <div class="subheader">info</div>
                        <div class="optkey">1</div>
                    </li>
                    <li>
                        <div class="header">Cell</div>
                        <div class="subheader">info</div>
                        <div class="optkey">2</div>
                    </li>
                </ul>
            </div>
        </div>
    </div> 
```

我有一组应用于类`div`元素的样式`header`：

```
.tzOptions li .header:hover { 
   color:#FFF; 
   font-size:14px; 
   font-weight:bold;
   line-height: 13px;
   padding-bottom:0;
} 
```

我想要做的是，将这些相同的样式应用于类的`div`元素`subheader`。我不想复制我的样式代码。主要问题是，我正在尝试使用键盘输入复制鼠标悬停代码（即在选择中使用箭头键）。我知道该怎么做；我只是不知道如何将`:hover`样式从一个元素应用到另一个元素（或者根本不知道如何将 addClass 与伪选择器一起使用`:hover`。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:17:43.673

如果我理解您的问题，您希望能够向具有选择器“.tzOptions li .subheader”的元素添加一个类。

为什么不使用`$(".tzOptions li .subheader").addClass("myClassName");`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:17:30.787

`addClass`不是*为了*操纵等级声明（尽管可以）

它用于向`class`dom 元素添加另一个。（附加）

所以它可以有另一种/更多的风格行为

查询：

> 它只是添加类，将其附加到任何可能已经分配给元素的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:50:32.037

你不能那样做。但是您可以创建一个函数，该函数将获取定义给特定元素的所有 css（对同伴来说不是一个好主意，但您可以试试[这个](https://stackoverflow.com/questions/1471118/how-can-i-get-list-of-all-element-css-attributes-with-jquery)）。然后将该样式应用于您的元素。

试一试

```
//Function to get all the css for a particular dom element

jQuery.fn.css2 = jQuery.fn.css;
jQuery.fn.css = function() {
    if (arguments.length) return jQuery.fn.css2.apply(this, arguments);
    var attr = ['font-family','font-size','font-weight','font-style','color',
        'text-transform','text-decoration','letter-spacing','word-spacing',
        'line-height','text-align','vertical-align','direction','background-color',
        'background-image','background-repeat','background-position',
        'background-attachment','opacity','width','height','top','right','bottom',
        'left','margin-top','margin-right','margin-bottom','margin-left',
        'padding-top','padding-right','padding-bottom','padding-left',
        'border-top-width','border-right-width','border-bottom-width',
        'border-left-width','border-top-color','border-right-color',
        'border-bottom-color','border-left-color','border-top-style',
        'border-right-style','border-bottom-style','border-left-style','position',
        'display','visibility','z-index','overflow-x','overflow-y','white-space',
        'clip','float','clear','cursor','list-style-image','list-style-position',
        'list-style-type','marker-offset'];
    var len = attr.length, obj = {};
    for (var i = 0; i < len; i++) 
        obj[attr[i]] = jQuery.fn.css2.call(this, attr[i]);
    return obj;
} 
```

# actionscript-3 - flash Math.random() 返回 1 的可能性

> ID：14141680
> 
> 赞同：0
> 
> 时间：2013-01-03T15:15:22.637
> 
> 标签：actionscript-3, flash, random

我们都知道好老`Math.random()`。它返回一个介于 0 和 1 之间的随机浮点数。

我似乎找不到任何证据表明零或一是排他性还是包容性。

我知道，如果它们具有包容性，那么达到其中任何一个值的概率都非常低。

但我不禁想知道我是否应该浪费一个 if 语句来寻找它。

在我目前的情况下，零不是问题，但一个是。

```
var __rand:uint = Math.floor( Math.random() * myArray.length );
var result:String = myArray[__rand]; 
```

如果 1 in`Math.random()`是独占的，那么我将知道它永远不会是 1，因此 __rand 永远不会等于`myArray.length`并且应该始终低于它。但只是不确定我是否应该在一些性能关键代码上浪费时间，如果我应该解释它。

**PS：上面的代码不是性能关键代码，只是一个例子**

基本上，只有两个简单的问题。1）返回一个不可能或可能的。2）如果可能，是否值得考虑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T15:20:30.023

根据[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Math.html#random%28%29)：

> 返回一个伪随机数 n，其中 0 <= n < 1。返回的数字以未公开的方式计算，并且是“伪随机”，因为计算中不可避免地包含一些非随机元素。

所以它可以是0但不是1。你不必担心索引超出范围。

顺便说一句，如果这真的是性能关键代码，最好将值转换为 int 或 uint 而不是使用 Math.floor（请参阅[此性能测试](http://adrianwiecek.com/2011/01/11/math-floor-vs-int-vs-uint-cast/)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T15:20:18.203

Math.random 将返回一个介于 0 和（1 除外）之间的数字。永远不会返回 1。

# iphone - 在不退出应用程序的情况下从服务器播放视频 - Cocoa Touch，iPhone

> ID：14141682
> 
> 赞同：-1
> 
> 时间：2013-01-03T15:15:24.770
> 
> 标签：iphone, cocoa-touch, video, video-streaming

基本上我有 8 个缩略图，它们是按钮。当每个按钮被点击时，它会启动位于我服务器上的视频。然而此时，当点击缩略图时，视频会在 Safari 中启动并退出应用程序。我想要它，以便视频在应用程序中启动而不是退出它，因此一旦用户完成观看视频，他们就会返回到应用程序。

这是我使用的代码。

```
-(IBAction)goAbv1:(id)sender; {
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://mywebsite.com/video.mp4"]];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:26:13.980

如果你在 iOS 3.2+ 上试试这个

```
NSString *videoURLString = @"http://MypathtoIphoneCompatibleVideoMp4";
NSURL *videoURL = [NSURL URLWithString:videoURLString];
MPMoviePlayerViewController *moviePlayerView = [[[MPMoviePlayerViewController alloc] initWithContentURL:videoURL] autorelease];
[self presentMoviePlayerViewControllerAnimated:moviePlayerView]; 
```

`presentMoviePlayerViewControllerAnimated`将处理 modalviewcontroller 并将其自动放在堆栈顶部，以便可以播放视频。这应该很容易工作。

# xml - 有一个脚本可以从 XML 文件中提取特定字符串，以便通过 CSV 或 PO 文件进行翻译

> ID：14141684
> 
> 赞同：1
> 
> 时间：2013-01-03T15:15:27.340
> 
> 标签：xml, magento, translation, gettext, po

这是我在这里的第一个问题，通常我会提供答案;-)

好吧，我正在寻找一个脚本来提取一些特定的字符串，这些字符串设置为 system.xml、布局 xml 文件或 Magento 用来翻译它们的类似文件。示例：标签、菜单项或其他。

我有一个脚本可以从 php 和 phtml 文件中提取它们，这要归功于 gettext 并将它们转换为可移植对象文件，然后，我使用 PO 文件来翻译字符串，这要归功于 OmegaT Software，最后我还有一个 PHP CLI 脚本来转换从 PO 到 CSV 文件的翻译文件。

Magento 通过使用模块和由属性提供的元素信息来翻译这些 xml 文件，并`"translate='element_to_translate'"`通过`"module='mymodule'"`帮助程序在内部放置在元素（例如块或动作）中。

这是我想提取的 xml 代码示例，以便我翻译它。在这里，由于模块“sales”，我想翻译元素“label”的值，正如您在下面看到的 XML 代码中的属性可能有助于提取此信息：

```
<customer_account>
        <reference name="customer_account_navigation" >
            <action method="addLink" translate="label" module="sales"><name>billing_agreements</name><path>sales/billing_agreement/</path><label>Billing Agreements</label></action> 
```

或其他示例：

```
<block type="customer/account_navigation" name="customer_account_navigation" before="-" template="customer/account/navigation.phtml">
                <action method="addLink" translate="label" module="customer"><name>account</name><path>customer/account/</path><label>Account Dashboard</label></action>
                <action method="addLink" translate="label" module="customer"><name>account_edit</name><path>customer/account/edit/</path><label>Account Information</label></action>
                <action method="addLink" translate="label" module="customer"><name>address_book</name><path>customer/address/</path><label>Address Book</label></action>
            </block>
        </reference>
</customer_account> 
```

因此，如果有人有一个允许提取它们的脚本，那就太好了。老实说，我没有时间创建这样的脚本，因为我已经用了很多时间来创建整个翻译过程，这很复杂。但是，如果有人已经完成了这项工作，那么在这里分享它会很棒。但是，如果人们搜索脚本以进行从 CSV 到 PO 的转换并进行反向转换，我可以提供帮助，尽管它可以在网络上获得资助。与原始版本相比，我只是做了一些外观上的更改。

感谢您的反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:20:50.857

我制作了一个模块，用于提取字符串以直接转换为 Magento 格式的 csv 文件。如果我没记错的话，它会处理配置和系统 xml，但不确定布局。
试一试并随时改进它:)

[https://bitbucket.org/OSdave/languagecsv](https://bitbucket.org/OSdave/languagecsv)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T14:42:06.477

查看 Bryan Schnabel 的 XML - XLIFF 往返工具：http: [//sourceforge.net/projects/xliffroundtrip/](http://sourceforge.net/projects/xliffroundtrip/)

> xliffRoundTrip 自动执行任何 XML 文件和 XLIFF 之间的往返。它由 2 个 XSL 文件 + Java 源代码组成。第一个将 XML 转换为 XLIFF。第二次将 XLIFF 转换回原始 XML，即在对 XLIFF 文件进行语言翻译之后。

[Bryan 是OASIS XLIFF](http://www.oasis-open.org/committees/xliff/)技术通讯的长期成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:31:20.970

那里有专业的翻译工具，例如 SDL Trados 可以做这些事情。使用 trados，您不会将其转换为 csv，而是转换为 xliff，这是翻译文件的标准格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-07T08:57:14.377

SDL Trados Studio 允许您创建自定义规则来处理 xml 文件。SDL 称它们为“文件类型”。在此处查看基本介绍：[http ://producthelp.sdl.com/kb/Articles/5274.html](http://producthelp.sdl.com/kb/Articles/5274.html)

文件类型允许您指定哪些元素和属性是（不可）翻译的。

SDL Trados Studio 不允许您根据父元素中的属性评估元素的“可翻译性”。

换句话说：

*   如果您总是必须翻译标签元素：如果您创建文件类型，SDL Trados Studio 可以处理它。action 元素的 translate 属性是无用的。
*   如果您不必总是翻译标签元素，而是想根据 translate 属性对其进行评估，那么您确实需要一个脚本来进行预处理（然后进行后处理）。但是由于您正在构建自己的 xml 文件，我想您可以构建它，以便可翻译的内容位于可识别的元素中。

如果您正在寻找免费的解决方案，请查看 Memsource。它们允许完全相同的原理，但我对确切的程序不太熟悉。

# java - 我在设置 graphics2D 时遇到问题

> ID：14141685
> 
> 赞同：0
> 
> 时间：2013-01-03T15:15:29.453
> 
> 标签：java, graphics, graphics2d, rectangles

我正在制作一个简单的游戏，其中在屏幕上绘制了两个矩形，并且用户通过键盘箭头键输入其中一个矩形（玩家）将移动。我已经创建了一个`Main`类和一个`Play`包含我所有游戏代码的类，该代码包括诸如和之类的方法，`init()`处理所有初始条件，处理来自输入的移动和键输入以及处理绘图的方法屏幕上的东西，例如背景和矩形。`update()``render()``init()``update()``render()`

我遇到的问题是通过将它们放在我的渲染类中来在我的屏幕上绘制我的矩形（用我的变量设置），我的方法是用`Graphic`s 设置的，我被告知我需要`Graphics2D`所以我试图改变我的图形，`Graphics2D`以便我可以绘制我的矩形。

这是我的矩形，在我的 ode 顶部设置了我的变量：

```
Rectangle rectOne = new Rectangle(shiftX, shiftY,90,90);
Rectangle rectTwo = new Rectangle(500 + buckyPositionX, 330 + buckyPositionY, 210, 150); 
```

这是我尝试使用 graphics2D 绘制矩形的渲染方法：

```
 public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException{

    if(rectOne.intersects(rectTwo)){
        g.drawString("Intersect", 100, 100);}

    if(g instanceof Graphics2D){//error: Incompatible conditional operand type Graphics and Graphics2D

        Graphics2D g2 = (Graphics2D)g;}//cannot cast from Graphics to Graphics2D

    ((Graphics2D)g).fill(rectOne);//cannot cast from Graphics to Graphics2D
    ((Graphics2D)g).fill(rectTwo);//cannot cast from Graphics to Graphics2D

} 
```

我的代码旁边的注释显示了我尝试使用此代码时出现的错误。如果我的 Play 课程需要更多代码或信息，请告诉我，我会发布。

# .net - 通用列表匹配任何值

> ID：14141689
> 
> 赞同：2
> 
> 时间：2013-01-03T15:15:46.630
> 
> 标签：.net, vb.net, linq, list, generics

我确定有人已经回答了这个问题，但我无法找到正确的搜索词来找到它......

我绝对可以通过遍历所有值来做到这一点，但我只是在检查是否有人知道更简单的方法。

`Dim List1 As New List(Of Integer) From {1,3,5,7}`

```
Dim List2 As New List(Of Integer) From {2,4,6,8}

List1.ContainsAnythingFrom(List2) = False 
```

因为两个列表中都没有匹配的数字。

```
Dim List1 As New List(Of Integer) From {1,**3**,5,7}

Dim List2 As New List(Of Integer) From {2,**3**,6,8}

List1.ContainsAnythingFrom(List2) = True 
```

因为每个列表中有一个 3。

我正在寻找**ContainsAnythingFrom**类型的函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T15:40:38.207

您可以使用[Enumerable.Intersect](http://msdn.microsoft.com/en-us/library/bb460136.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1) LINQ 方法来查找常见项目

```
Dim list1 = New Integer() {1, 2, 3, 4, 5}
Dim list2 = New Integer() {3, 4, 5, 6}
Dim list3 = New Integer() {7, 8}

Dim list1HasAnyOfList2 = list1.Intersect(list2).Any()
' true

Dim list1HasAnyOfList3 = list1.Intersect(list3).Any()
' false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T09:13:13.777

```
 Dim l1 As New List(Of String) From {"a", "b", "c", "d"}

    Dim l2 As New List(Of String) From {"e", "f", "c", "d"}

    Dim intersection As IEnumerable(Of String) = l1.Intersect(l2)

    '  Dim result As List(Of String) = l1.Intersect(l2).ToList()

    For Each s In intersection
        Console.WriteLine(s)
    Next 
```

# powershell - Powershell中加号（+）的特殊使用

> ID：14141690
> 
> 赞同：9
> 
> 时间：2013-01-03T15:15:49.387
> 
> 标签：powershell

除了它的自然用途（即添加两个参数）之外，您还可以`+`在 Powershell 中使用加号来执行如下特殊调用：

```
[System.Net.WebRequestMethods+Ftp]::UploadFile 
```

`UploadFile`[根据 MSDN](http://msdn.microsoft.com/en-us/library/system.net.webrequestmethods.ftp.aspx) ，是一个公共静态字段，因此是双冒号`::`- 到目前为止一切都很清楚。但是为什么class 如此特别，它需要一个?`Ftp`而不是 dot ？我找不到关于这部分的任何文档（官方或非官方）。`.``+`

`+`除了有没有其他用途`WebRequestMethods+Ftp`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T15:20:31.587

WebRequestMethods 类是一个容器，它包含 FTP 类。FTP 本身是一个嵌套类，要在 PowerShell（或 C#）中访问嵌套类，您必须使用 + 表示法。更多信息[在这里](http://blogs.msdn.com/b/powershell/archive/2009/08/27/plus-in-net-class-names.aspx)。

# javascript - Uncaught SyntaxError: Unexpected token }

> ID：14141694
> 
> 赞同：0
> 
> 时间：2013-01-03T15:15:53.973
> 
> 标签：javascript, jquery, ajax, token

我有以下脚本，它在我的控制台中返回以下错误：

> Uncaught SyntaxError: Unexpected token }..

根据我的控制台`}`，介于两者之间`**`的是导致问题的原因。但这就是关闭 AJAX 请求的“成功”的括号。而且如果我删除用 -> 指出的语句，错误似乎消失了。有人看到这有什么问题吗？

注意：我的代码中没有这些`**`，只是为了指出错误。

```
$(document).ready(function() {
            $('#edit_patient_info').click(function () {
                //Get the data from all the fields

                    $.ajax({
                        url: "patient_info_controller.php", 
                        type: "POST",
                        data: data,     
                        success: function (msg) {
                            if (msg==1) {             
                                getPersoonlijkGegevens(user_id);
                                unLockFirstPage();
                                alert("Gegevens zijn gewijzigd!");
                                $("#searchbox").val(voornaam.val());
                                searchPatient();
                          ->    $('#selectable li:first').addClass('ui-selected');​
                            }
                        **}**       
                    });
            }); 
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:18:39.067

之后你有一个隐藏角色`$('#selectable li:first').addClass('ui-selected');`

这使您的代码无效。通常，当您将代码复制到记事本（或记事本++）时，可以看到这些。
在记事本++中，它显示`.addClass('ui-selected');?`

另外，你有一个额外的`}`.

尝试这个：

```
$(document).ready(function() {
    $('#edit_patient_info').click(function () {
        //Get the data from all the fields

        $.ajax({
            url: "patient_info_controller.php", 
            type: "POST",
            data: data,     
            success: function (msg) {
                if (msg==1) {             
                    getPersoonlijkGegevens(user_id);
                    unLockFirstPage();
                    alert("Gegevens zijn gewijzigd!");
                    $("#searchbox").val(voornaam.val());
                    searchPatient();
                    $('#selectable li:first').addClass('ui-selected');
                }
            }      
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:18:21.083

据我所知，实际上是`}`您标记的那一行下面的两行导致了问题；`{`它与任何开头字符都不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:20:47.360

你有一个额外的}

```
$(document).ready(function() {
  $('#edit_patient_info').click(function() {
    //Get the data from all the fields
    $.ajax({
        url: "patient_info_controller.php",
        type: "POST",
        data: data,
        success: function(msg) {
            if (msg == 1) {
                getPersoonlijkGegevens(user_id);
                unLockFirstPage();
                alert("Gegevens zijn gewijzigd!");
                $("#searchbox").val(voornaam.val());

            }
        }
    });
  });
});​ 
```

# git - 基于gitolite的Gitlab安装失败

> ID：14141696
> 
> 赞同：3
> 
> 时间：2013-01-03T15:15:56.917
> 
> 标签：git, debian, gitolite, gitlab

真是令人沮丧：我正在寻找基于 gitolite 的可管理的基于 Web 的解决方案。由于缺少或过时的 ruby​​ 包，Redmine 一直失败。至少我尝试过使用 gitLab。我使用的最后一个指南是常规指南：

[Gitlab总部](https://github.com/gitlabhq/gitlabhq/blob/stable/doc/install/installation.md)

我一步一步地复制了每个点，但是没有办法执行无错误的设置：

这应该是最后的步骤之一：

> sudo -u gitlab -H bundle exec rake gitlab:check RAILS_ENV=production

但输出告诉我用户 'gitolite' (=git) 不在 gitolite 组中以及如何解决该问题：

> 检查环境...
> 
> gitlab 用户在 gitolite 组中？...不
> 尝试修复它： sudo usermod -a -G gitolite gitlab
> 
> 有关更多信息，请参阅：“系统用户”部分中的 doc/install/installation.md
> 
> 请修复上述错误并重新运行检查。~gitolite/.profile 中没有“-e”... rake 中止！
> 
> 没有这样的文件或目录 - /var/lib/gitolite/.profile
> 
> /home/gitlab/gitlab/lib/tasks/gitlab/check.rake:320:in `read'
> 
> /home/gitlab/gitlab/lib/tasks/gitlab/check.rake:320:in `check_issue_1056_shell_profile_error' /home/gitlab/gitlab/lib/tasks/gitlab/check.rake:257:in`block (3 levels) in '
> 
> 任务：TOP => gitlab:check => gitlab:env:check
> 
> （通过使用 --trace 运行任务查看完整跟踪

但是没有机会处理这个。输出保持不变。即使创建了管理员帐户，也无法启动 Web 服务器来管理该帐户。

一直都是“坏网关”

你知道怎么解决吗？或者您知道基于 gitolite 的另一种合适的解决方案吗？

非常感谢 - 再次！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:36:16.017

这似乎是用户或权限问题。

您的 /etc/passwd 文件和 /etc/group 文件是否显示用户“git”？

```
> grep git /etc/passwd
git:x:....
> grep git /etc/group
git:x:.... 
```

**如果**在那里找不到用户或组，则它不存在。

在这种情况下，您必须确认您遵循了上面教程中提到的命令。

```
> sudo adduser \
  --system \
  --shell /bin/sh \
  --gecos 'Git Version Control' \
  --group \
  --disabled-password \
  --home /home/git \
git 
```

您还必须拥有创建此类用户的权限。

**否则**，在阅读文档后，您似乎正在设置 $PATH 以完成某些任务并为用户创建`.profile`文件。

确认线路...

```
> sudo -u git -H sh -c 'printf "%b\n%b\n" "PATH=\$PATH:/home/git/bin" "export PATH" >> /home/git/.profile' 
```

`.profile`通过运行创建正确的文件

```
> sudo su git
> ls -lah /home/git/ | grep .profile 
```

如果 grep 未显示`.profile`文件，您可能需要确认您的用户具有创建文件的正确权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:17:01.327

我在升级过程中也注意到了这一点，完全没有 .profile 文件......

此错误的名称具有误导性，实际问题是 1059：

[https://github.com/gitlabhq/gitlabhq/issues/1059](https://github.com/gitlabhq/gitlabhq/issues/1059)

我提交了一个补丁请求以引用堆栈跟踪中的正确问题：

[https://github.com/gitlabhq/gitlabhq/pull/2485](https://github.com/gitlabhq/gitlabhq/pull/2485)

检查 .profile 的权限和内容。

# c++ - 通过 python 控制台对 PythonQt 库进行非锁定调用

> ID：14141699
> 
> 赞同：2
> 
> 时间：2013-01-03T15:16:12.127
> 
> 标签：c++, python, multithreading, qt

我的 Qt 应用程序有一个 Qt gui（基本上是一些按钮和一个绘制数据的 opengl 上下文）。我还添加了利用 PythonQt 类的脚本功能。这些命令是从 PythonQtScriptingConsole 内部评估的。

我已经明确创建了包装类和工厂方法，以通过控制台通过当前 python 上下文发送 C++ 调用，但是当从控制台内部运行长任务时，gui 冻结，因为（我认为）事件循环没有被处理。所以第一个解决方案是用计时器处理事件循环，但我认为这既慢又有点愚蠢，所以我不喜欢它。一个

有人有什么暗示吗？Python 全局解释器锁在这里有问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-05T16:38:41.000

是的，GUI 正在冻结，因为对 Python 的长时间调用是通过 UI 线程执行的。为了解决这个问题，我能够继承 QThread 并通过命令模式向 Python 模块发出命令。

在开始使用以下类调用多个 Python 模块之前，请务必通过调用 PyEval_InitThreads() 来初始化 Python 中的线程支持，正如您将在我的 main() 函数中看到的那样。

祝你好运！

```
int main( int argc, char **argv ) {

        QApplication qapp(argc, argv);

        PyEval_InitThreads(); // IMPORTANT
        PythonQt::init(PythonQt::IgnoreSiteModule | PythonQt::RedirectStdOut);

        PythonQtObjectPtr module = PythonQt::self()->createUniqueModule();

        ThreadedPythonContext context(module);
        context.start();

        # issue some commands into the module
        context.issue("import sys");
        context.issue("sys.path.append('C:\\Python27\\Lib\\site-packages')");
        context.issue("import time");
        context.issue("last = time.localtime().tm_sec");

        // Release the global interpreter lock (if it has been created and thread support 
        // is enabled) and reset the thread state to NULL, returning the previous thread 
        // state (which is not NULL). If the lock has been created, the current thread must 
        // have acquired it. (This function is available even when thread support is 
        // disabled at compile time.)

        // give up control of the GIL
        PyThreadState *state = PyEval_SaveThread();

        return qapp.exec()
} 
```

ThreadedPythonContext.h

```
#ifndef THREADEDPYTHONCONTEXT_H
#define THREADEDPYTHONCONTEXT_H

#include "PythonQt.h"

#include <QtCore/QMutexLocker>
#include <QtCore/QQueue>
#include <QtCore/QThread>
#include <QtCore/QWaitCondition>

class ThreadedPythonContext : public QThread 
{
    Q_OBJECT
public:
    ThreadedPythonContext(const PythonQtObjectPtr &context) : 
        QThread(), 
        _context(context), 
        _running(true)
    {
    }

    ~ThreadedPythonContext() {
        _running = false;
        wait();
    }
    void issue(const QString &code) {
        _lock.lock();
        _commands.enqueue(code);
        _lock.unlock();

        _CommandQueued.wakeOne();
    }

    bool isCommandQueueEmpty() {
        QMutexLocker lock(&_lock);
        return _commands.isEmpty();
    }

protected:

    QString dequeue() {
        QMutexLocker lock(&_lock);
        QString cmd( _commands.dequeue() );

        return cmd.isEmpty() ? "\n" : cmd;
    }

    void run() {

        QMutex signal;
        PyGILState_STATE state;

        while(_running) {

            // wait to be signaled ... 
            signal.lock();
            _CommandQueued.wait(&signal,1);
            signal.unlock();

            if ( isCommandQueueEmpty() ) {
                continue;
            }

            while ( !isCommandQueueEmpty() ) {

                PythonQtObjectPtr p;
                PyObject* dict = NULL;

                state = PyGILState_Ensure();

                if (PyModule_Check(_context)) {
                    dict = PyModule_GetDict(_context);
                } else if (PyDict_Check(_context)) {
                    dict = _context;
                }

                if (dict) {
                    // this command blocks until the code has completed execution
                    emit python_busy(true);
                    p.setNewRef(PyRun_String(dequeue().toLatin1().data(), Py_single_input, dict, dict));
                    emit python_busy(false);
                }

                // error in the kernel
                if (!p) {
                    PythonQt::self()->handleError();
                }   
                PyGILState_Release(state);
            }
        }
    }

    PythonQtObjectPtr _context;

    QMutex _lock;
    QQueue<QString> _commands;

    QWaitCondition _CommandQueued;  
    bool _running;

signals:
    void python_busy(bool);
};

#endif //THREADEDPYTHONCONTEXT_H 
```

# python - 使用 PyTables 对 HDF5 进行嵌套迭代

> ID：14141713
> 
> 赞同：0
> 
> 时间：2013-01-03T15:17:05.370
> 
> 标签：python, hdf5, pytables

我有一个相当大的数据集，我存储在 HDF5 中并使用 PyTables 访问。我需要在这个数据集上做的一个操作是每个元素之间的成对比较。这需要 2 个循环，一个循环遍历每个元素，一个内部循环遍历所有其他元素。因此，该操作着眼于 N(N-1)/2 次比较。

对于相当小的集合，我发现将内容转储到多维 numpy 数组中然后进行迭代会更快。由于内存问题，我遇到了大型集合的问题，并且需要在运行时访问数据集的每个元素。

将元素放入数组中，我每秒可以进行大约 600 次比较，而对 hdf5 数据本身进行操作，每秒可以进行大约 300 次比较。

有没有办法加快这个过程？

示例如下（这不是我的真实代码，只是一个示例）：

**小套装**：

```
with tb.openFile(h5_file, 'r') as f:
    data = f.root.data

    N_elements = len(data)
    elements = np.empty((N_elements, 1e5))

    for ii, d in enumerate(data):
        elements[ii] = data['element']

D = np.empty((N_elements, N_elements))  
for ii in xrange(N_elements):
    for jj in xrange(ii+1, N_elements):             
        D[ii, jj] = compare(elements[ii], elements[jj]) 
```

**大套装**：

```
with tb.openFile(h5_file, 'r') as f:
    data = f.root.data

    N_elements = len(data)        

    D = np.empty((N_elements, N_elements))  
    for ii in xrange(N_elements):
        for jj in xrange(ii+1, N_elements):             
             D[ii, jj] = compare(data['element'][ii], data['element'][jj]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:28:37.563

我在这里建议两种方法：

1.  numpy memmap：创建一个内存映射数组，将数据放入其中，然后运行“Small Set”的代码。内存映射的行为几乎像数组。

2.  使用 multiprocessing-module 允许并行处理：如果“比较”方法至少消耗大量 CPU 时间，您可以使用多个进程。

假设您在 CPU 中有多个内核，这将显着加快速度。利用

*   从 hdf 读取数据并放入队列的一个进程
*   从队列中抓取并进行比较并将一些结果放入“输出队列”的一个过程
*   一个过程再次收集结果。

在选择方式之前：“了解你的敌人”，即使用剖析！只有在瓶颈处有所改进时，优化才值得付出努力，因此首先要找出哪些方法会消耗您宝贵的 CPU 时间。

你的算法是 O(n^2)，不适合大数据。您是否没有看到任何减少这种情况的机会，例如，通过应用一些逻辑？这始终是最好的方法。

问候，

托尔斯滕

# php - $_GET 不适用于单选按钮

> ID：14141717
> 
> 赞同：0
> 
> 时间：2013-01-03T15:17:15.217
> 
> 标签：php, forms, get, radio-button

有谁知道为什么这段代码不起作用？我只是想打印选择了哪个单选按钮。无论选择什么，它总是打印“Null”。PHP代码如下。

```
<?php
$conn = mysql_connect('localhost','student','student') or die(mysql_error());
mysql_select_db('vgs',$conn);

//Get Question 1
if (isset($_GET["q1option"])) 
{
    $q1option = $_GET["q1option"];
} 
else 
{
    $q1option = "Null";
}
//Process Question 1
echo "".$q1option; 
```

HTML 代码如下。

```
<form action="" method="get" >
<div id="Q1">
<label><input type="radio" name="q1option" value="Less_than_16" />Less than 16</label><br />
<label><input type="radio" name="q1option" value="16_or_more" />16 or more</label>
</div> 
```

对此的任何帮助将不胜感激。注意我在“vgs”数据库中有很多表，如果这有区别的话。

谢谢，

丹尼尔

*附加代码*

下面的 HTML

```
<input type="button" value="Submit" onclick="result();" />
<input type="reset" value="Reset" />
</form> 
```

下面嵌入了 JavaScript。它使用[http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js)

```
function result()
{
    $('#Suggestion').load('process_answers.php');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:34:50.377

看起来您的提交按钮在`<form>`标签之外，它应该在表单内：

```
<form action="" method="get" >
<div id="Q1">
<label><input type="radio" name="q1option" value="Less_than_16" />Less than 16</label><br />
<label><input type="radio" name="q1option" value="16_or_more" />16 or more</label>
</div>

<input type="submit" value="Submit" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:52:11.613

您总是得到`Null`回报，因为您的查询字符串没有附加到任何地方。如果您使用的是 AJAX，则需要传递查询字符串数据。由于配置错误，您的循环无法正常工作。

采取以下代码：

```
//Get Question 1
if (isset($_GET["q1option"])) 
{
    $q1option = $_GET["q1option"];
} 
else 
{
    $q1option = "Null";
} 
```

使用 $_GET 将尝试从您的查询字符串中提取标记为“q1option”的变量。如果未设置此变量，则返回“Null”。因此，您的代码按照当前的结构按预期工作。

如果你想在页面之间传递变量，你要么需要提交表单并且变量将被自动传递，要么你需要修改你的 jQuery 以允许在你的变量的幕后传递和处理。处理后，您将相应地处理结果并根据需要将它们呈现给客户端。

# java - 将实体休眠到 json

> ID：14141718
> 
> 赞同：4
> 
> 时间：2013-01-03T15:17:19.593
> 
> 标签：java, json, spring, hibernate

我使用休眠 4 和 Spring 3。

我有两个实体。

图书实体

```
@Entity
@Table(name = "book")
public class Book implements Serializable {

    public Book() {
    }

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue( strategy = GenerationType.IDENTITY)
    private int id;

    @ManyToOne()
    @JoinColumn( name = "author_id" )
    private Author author;

    private String name;
    private int pages;

    @Version
    @Column( name = "VERSION")
    private int version;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public Author getAuthor() {
        return author;
    }

    public void setAuthor(Author author) {
        this.author = author;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getPages() {
        return pages;
    }

    public void setPages(int pages) {
        this.pages = pages;
    }

    public int getVersion() {
        return version;
    }

    public void setVersion(int version) {
        this.version = version;
    }

} 
```

和作者实体

```
@Entity
@Table(name = "author")
public class Author implements Serializable {

    public Author() {
    }

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue( strategy = GenerationType.IDENTITY)
    private int id;
    private String name;

    @OneToMany( mappedBy = "author", cascade = CascadeType.ALL, orphanRemoval = true)
    private Set<Book> books = new HashSet<Book>();

    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

    public Set<Book> getBooks() {
        return books;
    }
    public void setBooks(Set<Book> books) {
        this.books = books;
    }

    public void addBook(Book book) {
        book.setAuthor(this);
        getBooks().add(book);
    }

    public void removeBook(Book book) {
        getBooks().remove(book);        
    }

} 
```

和 JSON 依赖于 pom.xml

```
<dependency>
            <groupId>com.fasterxml.jackson.core</groupId>
            <artifactId>jackson-core</artifactId>
            <version>2.1.2</version>
        </dependency>

        <dependency>
            <groupId>com.fasterxml.jackson.datatype</groupId>
            <artifactId>jackson-datatype-hibernate4</artifactId>
            <version>2.1.2</version>
        </dependency> 
```

我的根上下文在这里-

```
 <!-- Root Context: defines shared resources visible to all other web components -->
    <context:annotation-config/>

    <context:component-scan base-package="org.jar.libs.dao" />
    <context:component-scan base-package="org.jar.libs.service" />

    <tx:annotation-driven transaction-manager="transactionManager" />

     <bean id="jspViewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
        <property name="prefix" value="/WEB-INF/views/"/>
        <property name="suffix" value=".jsp"/>
    </bean>

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource"
        p:driverClassName="com.mysql.jdbc.Driver" p:url="jdbc:mysql://localhost:3306/hibernate"
        p:username="root" p:password="root" />

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>org.jar.libs.domain.Book</value>
                <value>org.jar.libs.domain.Author</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
            </props>
        </property>
    </bean>

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

</beans> 
```

...servlet-context.xml

```
<!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <context:component-scan base-package="org.jar.libs.controller" /> 
```

控制器。

```
@Controller
@RequestMapping (value = "books/rest")
public class BookController {

    @Autowired
    private BookService bookService;

    // logger
    private static final Logger logger = LoggerFactory.getLogger(BookController.class);

    @SuppressWarnings("unchecked")
    @RequestMapping( method = RequestMethod.GET )
    public @ResponseBody List<Book> getBook() {

        List<Book> res = bookService.findAll();
        return res;

    }

} 
```

findAll 在我的 DAO 中：

```
public List<Book> findAll() {
        Session session = sessionFactory.getCurrentSession();
        List<Book> result = (List<Book>) session.createQuery("select c from Book c").list();
        return result;
    } 
```

在调试中，我看到该方法返回 2 条记录，但 Spring 无法将结果转换为 JSON 并返回 406 HTTP 错误。怎么了？

我附上我在调试中看到的图像。- [http://tinypic.com/view.php?pic=35kvi9i&s=6](http://tinypic.com/view.php?pic=35kvi9i&s=6)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:40:39.917

通常，当您在事务之外调用实体类（返回关系对象）的 getter 方法时，您会得到`LazyInitializationException`s。

**如果您将实体类对象（从查询中检索）转换为 json出事务，**这就是您的情况可能发生的情况。

 **我有同样的问题，我将休眠检索到的实体对象转换为控制器中的 json。由于控制器没有事务（服务层的事务），在转换为 json 时，实体类对象的 getter 方法被调用，我得到了`LazyInitializationException`. 这阻碍了对象到 json 的转换，并且没有返回响应。

我的解决方案，试试这个：

```
@SuppressWarnings("unchecked")
@RequestMapping( method = RequestMethod.GET )
public @ResponseBody List<Book> getBook() {
    List<Book> res = bookService.findAll();
    for(Book book : res) {
       book.getAuthor().setBooks(null);
    }
    return res;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-29T01:03:05.370

正如其他人所建议的那样，我真的不建议您尝试对休眠实体进行 JSON 序列化（或实际执行任何序列化）。
您必须记住，获取的实体实际上是“代理”对象（Hibernate 使用 ASM、CGLIB 和其他“动态代理”框架）。
结果，例如，集合被替换为 [PersistenceBags] 可能被初始化为 "lazily" ，并导致您休眠异常[1](http://blog.xebia.com/2009/11/09/understanding-and-writing-hibernate-user-types/)。

但问题并不止于此，您可能会在尝试序列化 Hibernate[自定义类型时看到问题](http://blog.xebia.com/2009/11/09/understanding-and-writing-hibernate-user-types/)
我知道这听起来您可能喜欢编写“样板”代码，但您最终可能会编写 DTO - 数据传输对象，它将获取从 DAL 返回的实体，并将它们转换为可以序列化的对象。

您可以使用 dozer 之类的框架来简化实体与 DTO 之间的序列化开发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:25:26.270

尝试改用这两个 Jackson 工件

```
<dependency>
<groupId>org.codehaus.jackson</groupId>
<artifactId>jackson-mapper-asl</artifactId>
<version>1.9.9</version>
</dependency>

<dependency>
<groupId>org.codehaus.jackson</groupId>
<artifactId>jackson-core-asl</artifactId>
<version>1.9.9</version>
</dependency> 
```

同样在您的控制器上尝试将其更改为 -

```
 @SuppressWarnings("unchecked")
@RequestMapping( method = RequestMethod.GET,  produces = MediaType.APPLICATION_JSON_VALUE )
public @ResponseBody List<Book> getBook() { 
```

最后，确保您的视图正在发出 json 请求。**

# regex - 正则表达式如何将字符串添加到 src 属性的开头

> ID：14141723
> 
> 赞同：0
> 
> 时间：2013-01-03T15:17:29.697
> 
> 标签：regex

就像在标题中一样。我需要在开头这一行的很多文件中添加 src 属性：-`"http://media.cdn.com/"`

所以例如我得到： -

```
src="/images/galeri/image1.jpg" 
```

我想将其更改为：-

```
src="http://media.cdn.com/images/galeri/image1.jpg" 
```

我怎样才能做到这一点？`"http://media.cdn.com/"`在很多src属性的开头添加额外的字符串（ ）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:28:22.680

使用简单的 sed 命令：

```
sed "sXsrc=\"Xsrc=\"http://media.cdn.com/Xg" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:29:21.517

一次将正则表达式应用于多个文件：

```
$ perl -p -i -e 's/src="\/([^"]+)"/src="http:\/\/media.cdn.com\/\1"/g' * 
```

# javascript - 没有 Qt 的 PJSIP GreenJ？

> ID：14141726
> 
> 赞同：12
> 
> 时间：2013-01-03T15:17:33.543
> 
> 标签：javascript, sip, voip, pjsip

我想编写一个与 PJSIP 一起使用的 javascript 应用程序，以便创建对 IP 电话的 sip 呼叫。
项目示例是[GreenJ](http://www.loremipsum.at/produkte/greenj/library/#en)
但是该示例迫使我将[Qt](http://qt-project.org/downloads)用作另一端的测试电话。
我不希望 Qt 成为另一边的电话，但我的 IP Phone 是。
尝试删除“qt_handler”导致“phone-lib.js”文件中出现编译错误。
任何人都可以帮助我或**提供一个简单的 hello world JavaScript 示例来使用 PJSIP**吗？
谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T15:53:47.057

我想，你应该试试这个：[https ://github.com/hanshuebner/node-pjsip](https://github.com/hanshuebner/node-pjsip)

您不能直接从 Web 浏览器使用 pjsip。

# python - 调试碰壁；与其说是编程问题，不如说是编程经验

> ID：14141732
> 
> 赞同：-3
> 
> 时间：2013-01-03T15:17:58.163
> 
> 标签：python, debugging

工作在小范围的圆圈编。我一直无法解决调试阶段出现的问题。诸如“变量在外部引用...”之类的错误以及其他不会处理简单方程的错误（例如，半径 = 面积 / PI * 半径）。我尝试了很多方法来解决这个问题，除了重写整个 prog，但没有任何效果。我的解决方案要么产生新问题，要么不解决手头的问题。我已经学习了三个星期的 Python，但确实有使用 COBOL 的编码经验，所以我了解函数和流程图的概念。

当您没有解决问题的头脑或工具时，您会怎么做？我想自己解决这些问题。寻求帮助是明智的，但最终你必须自己飞行。

谢谢你的帮助。

通量

添加：

圆和半径的面积：

```
# Exercise 1 Area of Circle
# This prog will ask for circle dimensions and compute
# area/radius for the user, then display figures, and
# allow to repeat.

import sys
import pdb
PI = 3.14
radius = 0

print ('''Welcome to Ursavion, the leader in math apps
This app allows you to quickly and easily find
either the area or radius for a circle.''')
print ( )

def chooseAR ( ):
    print ('Do you need to find circle area or circle radius? Enter A/a or A/r. ')
    choice = input ( )
    if choice in ['A', 'a']:
        areaSol ( )

    elif choice in ['R', 'r']:
        radSol (radius)

    else:
        print ('Please enter either A/a or R/r. ')
        chooseAR ( )

def areaSol ( ):
    radius = 0
    radius = input ('What is the radius of the circle? ')
    radius = int (radius)

    area = PI * radius**2 

    radius = str(radius)
    area = str(area)

    print ('The area of a circle with radius ' + radius + ' is ' + area + ' units '         squared')
    print ( )
    print ('Calculate another? y/n ')
    again = input ( )
    if again in [ 'y', 'n']:
        chooseAR ( )

    else:
        print ('Thank you for using this app.')

def radSol (radius):
    #pdb.set_trace( )                   #r = 1.128 for A = 4 
    area = input ('What is the area of the circle? ')
    area = int(area)
    radius = int(radius)

    radius = area / 3.14 * radius       #prog will not eval this formula; float pt prob

    radius = str(radius)
    area = str(area)    

   print ('The radius of a circle with area ' + str(area) + ' is ' + str(radius) + '   units')
   print ( )
   again = input ('Calculate another? y/n ')
   if again in ['Y', 'y', 'N', 'n']:
       chooseAR( )

   else:
        print ('Thank you for using this app.')

chooseAR ( )  # This function is one problem. Program initializes all 
              # functions on first pass, but it needs "chooseAR" here to allow the 
              # program to start, else it never runs; however, the "chooseAR" sets up
              # an infinite loop if it exists here. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:08:32.263

好吧，据我了解，您不想提供特定的代码示例，因为您想弄清楚如何自己进行调试？如果不了解您要调试的内容，这有点难以**回答**。

编码时可能会出现几种类型的问题

*   错别字
*   语法错误
*   逻辑错误

## 错别字

别笑，这将是您遇到的最常见的错误。如何调试它们？最好的方法是校对您的代码。它还高度依赖于 IDE。如果您正在使用 Microsoft Studio IDE 或 Apple 的 Xcode IDE 之类的东西进行开发，它会给您提示您正在尝试输入的内容，并且您可以自动完成输入。如果提示没有出现……你可能打错了。

对于您在文本编辑器中编程的东西（如 shell、python 等），这些选项通常不可用。一个技巧是复制粘贴你的变量名。这样你就不会出现意外的错字。小心你从哪里复制粘贴......你不想在整个代码中粘贴以前的错字:)

有时，您可能正盯着错字，却看不到它。最好的方法是检查你的变量。同样，对于各种 IDE，有内置的调试器可以让您做到这一点。在其他人身上，只需回显/打印/输出您的变量并自己检查它们的值。如果您期望变量中有一个值，并且它出现空白（或者更好的是，出现“未定义变量”类型错误），您现在可以专注于查看名称中是否有错字

## 语法错误

语法错误实际上更容易看到，因为它们通常会产生某种错误（在编译时或在运行时）。你对这门语言的经验越多，你犯的语法错误就越少。谷歌为您尝试使用的特定结构的代码示例和手册页，并了解它们的语法。Stackoverflow 也是一个很好的来源。不要害怕提出有关语法错误的问题。这个解释可能会让你更清楚，而不是盲目地使用试验-n-错误。

通常，只需在引号中搜索错误消息即可为您提供修复它所需的所有信息。

## 逻辑错误

这些是最难调试的，因为它们不是计算机错误，而是您的设计问题。解决这些问题的能力纯粹来自经验和编程能力。Stackoverflow 是提出问题的理想场所，其他人会为您提供可能的解决方案和变通方法。即使解决方案对您的情况不起作用，它**也**会让您的思维朝着正确的方向思考并为您提供想法。

如果您有经验，请转到您以前编写的程序，看看您是如何解决类似问题的。

## 例子

所以，在你的例子中，你没有给我们太多：
`radius = area / PI * radius`
这实际上不是一个简单的陈述。有：

*   变量赋值
*   变量引用
*   算术运算
*   操作优先级

其中任何一个都可能带来问题。所以要调试，首先简化表达式：

*   先打印变量
    `print area`
    `print PI`
    `print radius`

您应该会看到带有预期值的输出。如果其中任何一个为空白，则您可能输入了变量名。即使它在这里拼写正确，也许你在第一次声明它并给它一个值时拼错了它。

*   接下来，做一个简单的操作，like`temp = PI * radius`然后打印结果`print temp`。验证该值是否符合预期。由于数据类型的兼容性，您可能会遇到语法错误（这里不是这种情况）

但要总结这一点，根据您对“外部引用的变量”的引用，这可能是一个范围问题。通常，您不能引用在其范围之外声明的变量（例如，在函数内声明的变量不能被调用该函数的同一个更高块引用），但是像这样的事情在语言定义中。你只需要知道你正在编程的语言。

如果您是编程新手，并且阅读一本巨大的语言定义书太令人生畏，您至少应该阅读每种语言中常见的这些东西（但不同）

*   变量声明和引用
*   运营商
*   变量范围
*   常见结构
*   函数声明和调用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T15:25:38.813

正如您自己所说的那样，这与经验有关。您获得的经验越多，您就越不可能就每个小问题向某人询问。

但是为了获得这种经验并取得进步，你必须克服这些小问题，所以询问绝对是一种有效的方法。

只要您尝试从错误中吸取教训（如果可以这样称呼他们），一切都应该是好的。

无论如何，一些调试器可能会让人很*头疼*。

# javascript - 通过 Graph API 上传图片和“缺少或无效的图片文件”

> ID：14141735
> 
> 赞同：2
> 
> 时间：2013-01-03T15:18:13.273
> 
> 标签：javascript, facebook-graph-api

我的问题是图像 url 有时无法正常工作。当提交像“http://www.webdoanhnghiep.biz/Templates/img/FacebookAmplifier.jpg”这样的图像网址时，它会显示错误“图像文件丢失或无效”。然后，如果我尝试刷新，清除缓存....并再次提交。这行得通。

```
var params = {};
params['message'] = messageWillPost;
    params['url'] = 'http://www.webdoanhnghiep.biz/Templates/img/FacebookAmplifier.jpg';

params['place'] = document.getElementById(locationSelectionClientID).value;

FB.api('/' + postToAlbumId + '/photos','post',params, function(response) {
    if (!response || response.error) {
        console.log(response.error.message);
    } else {
        var photoId = response.id;
        console.log("Post to facebook at: " + photoId);
    }
}); 
```

为什么会这样？如何作废？谢谢

# ajax - Ajax 中的 CSRF 风险

> ID：14141736
> 
> 赞同：3
> 
> 时间：2013-01-03T15:18:19.227
> 
> 标签：ajax, symfony, csrf

我正在使用[Symfony2](http://www.symfony.com)并使用 CSRF 令牌保护我的表单。
我有一个基于**Ajax**调用的评论系统。如果用户想要编辑他的评论，这就是发生的事情：

*   用户点击*编辑*按钮。
*   通过ajax 加载*“新鲜”*的评论编辑表单。
*   用户通过 ajax 编辑并提交表单。
*   编辑后的评论将作为响应发回。

### 通过 ajax加载*“新”*编辑表单是否存在安全风险？

如果表单已经在加载的页面中并且无法通过 ajax 请求，则攻击者无法猜测 CSRF 令牌，但由于他可以请求表单，因此他可以得到令牌..
他不能.. ?

### 也许一个例子会更清楚：

*Dave*是我网站上的无辜注册用户 ( `www.acme.com`)。
*Dave*登录了我的网站，然后访问了`www.evil.com`. 他不知道，但是当他访问时，`evil.com`一个脚本被执行了。
该脚本发送了一个 ajax 请求`www.acme.com/comments/123/edit`并获得了编辑表单作为响应。
然后它用它的恶意内容填写该表单并提交该表单（同样，使用 ajax）。

***邪恶的*邪恶计划会奏效吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:52:37.333

据我了解，如果您的表单包含 CSRF 令牌字段，则没有风险。默认 Symfony2 CSRF 令牌取决于对攻击者不可用的会话（也取决于意图）。因此，当攻击者请求表单时，会使用攻击者（而非用户）的会话 ID。

# nsis - 使用 Win7 和 UAC 插件进行静默安装

> ID：14141738
> 
> 赞同：5
> 
> 时间：2013-01-03T15:18:23.840
> 
> 标签：nsis, uac, silent-installer

我有一个可以处理命令行参数和`/S`静默安装的安装程序。我最近升级了安装程序，通过使用[UAC 插件](http://nsis.sourceforge.net/UAC_plug-in)并`RequestExecutionLevel`从`admin`.`user`

测试表明，UAC 插件在 GUI 模式和命令行静默模式下的权限提升方面运行良好（尽管由于提升对话框，“静默”安装实际上并非完全“静默”）。

现在，客户告诉我，在将我的设置包装到第三方部署工具中时，他们的工具收到`1223`( [`ERROR_CANCELLED`](https://docs.microsoft.com/en-us/windows/win32/debug/system-error-codes--1000-1299-)) 错误代码（这似乎是“用户取消了提升”）。我的设置不直接通过返回错误代码`errorlevel`，所以我猜测这个代码是从 UAC 插件的某个地方返回的，该插件似乎通过系统“runas”对话框周围的黑客来执行提升。

1.  我对返回代码的来源是正确的吗？虽然当我取消提升对话框时，我得到一个错误级别 5（拒绝访问）而不是 1223

2.  集成 UAC 插件我使用的`InitElevation`是开头调用的宏，`.onInit`可以吗？

3.  我不确定是否正确理解 UAC 插件在静默模式下的行为：在 switch 的情况下，关键似乎在于`_()`插件 dll 的功能。`0`如果 NSIS 对话框由于静默模式不可见（或不存在？），它是否会使“runas”调用失败？在我的测试环境中，从命令行调用 silet 设置是可以的，但是如果从部署工具调用呢？

集成 UAC 插件的宏：

```
!macro InitElevation thing
    uac_tryagain:
    ${Debug} "Init UAC_RunElevated"
    !insertmacro UAC_RunElevated
    ;${debug} "$$0=$0 $$1=$1 $$2=$2 $$3=$3"
    ${Switch} $0
    ${Case} 0
        ${IfThen} $1 = 1 ${|} Quit ${|} ;we are the outer process, the inner process has done its work, we are done
        ${If} $3 <> 0 ;if we are admin
            System::Call "kernel32::GetCurrentProcessId()i.r0"
            ${If} ${UAC_IsInnerInstance}
                ; If we are in the elevated process, we need to get our grandparent PID for console
                ${GetProcessParent} $0 $ConsoleParentPID
                ;${Debug} "From elevated $0 process, parent process is $ConsoleParentPID"
                ${GetProcessParent} $ConsoleParentPID $ConsoleParentPID
                ;${Debug} "grand parent process is $ConsoleParentPID"
            ${Else}
                ;${Debug} "We are an already elevated process"
                StrCpy $ConsoleParentPID -1
            ${EndIf}
            ${Break}        ;we are admin (after elevation or not), let the show go on
        ${EndIf}
        ${If} $1 = 3 ;RunAs completed successfully, but with a non-admin user
            MessageBox mb_YesNo|mb_IconExclamation|mb_TopMost|mb_SetForeground "This ${thing} requires admin privileges, try again" /SD IDNO IDYES uac_tryagain IDNO 0
        ${EndIf}
        ;fall-through and die
    ${Case} 1223
        MessageBox mb_IconStop|mb_TopMost|mb_SetForeground "This ${thing} requires admin privileges, aborting!"
        Quit
    ${Case} 1062
        MessageBox mb_IconStop|mb_TopMost|mb_SetForeground "Logon service not running, aborting!"
        Quit
    ${Default}
        MessageBox mb_IconStop|mb_TopMost|mb_SetForeground "Unable to elevate , error $0"
        Quit
    ${EndSwitch}
    ${Debug} "End UAC_RunElevated init"
!macroend 
```

宏调用（开头`.onInit`）：

```
;abort if not started by administrator
!insertmacro InitElevation "installer"
${If} ${UAC_IsInnerInstance}
${AndIfNot} ${UAC_IsAdmin}
    SetErrorLevel 0x666666 ;special return value for outer instance so it knows we did not have admin rights
    Quit
${EndIf} 
```

# jquery-mobile - jQuery 移动下拉列表不隐藏 http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js

> ID：14141745
> 
> 赞同：0
> 
> 时间：2013-01-03T15:18:39.113
> 
> 标签：jquery-mobile

得到了这个 ddl，它适用于这个版本的 jQm “http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js”：但如果我把它改成 1.2。 0 项目从不隐藏。有人见过这个问题吗？

```
 <asp:DropDownList ID="LanguageDropDownList" OnSelectedIndexChanged="LanguageDropDownList_OnSelectedIndexChanged"
                data-native-menu="false" AutoPostBack="true" runat="server">
            </asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:23:18.237

jQuery Mobile 和 asp.net web 表单基本上不能一起工作。回发模型和 jQuery Mobile 的 ajax 表单加载和导航不兼容。移动到 MVC 或关闭 ajax。

确保在 jQuery Mobile 初始化之前调用此代码。（将它包含在引用 jQuery Mobile 的标记之前。）

```
<script src="jquery.js"></script>
<script>
    $(document).bind("mobileinit", function() {
      $.mobile.ajaxEnabled = false;
    });
</script>
<script src="jquery-mobile.js"></script> 
```

[http://jquerymobile.com/demos/1.2.0/docs/api/globalconfig.html](http://jquerymobile.com/demos/1.2.0/docs/api/globalconfig.html)

# android - 多个 createHTTPClient Titanium 调用导致 Cookie 损坏

> ID：14141746
> 
> 赞同：0
> 
> 时间：2013-01-03T15:18:44.163
> 
> 标签：android, google-app-engine, cookies, titanium, appcelerator

在 Appcelerator 的 Titanium 中创建一个涉及 webView 和后台调用的 Android 应用程序时，我遇到了一个问题/错误，即 cookie 在多个 createHTTPClient 调用中被损坏。

Cookies 最初是从 webView 获取的：

```
var webview = Ti.UI.createWebView();
webview.url = 'http://www.example.com';
window.add(webview);
webview.addEventListener('load', function(e) {
    cookies = e.source.evalJS("document.cookie");
    Titanium.App.Properties.setString('cookies',cookies);
}
window.open({modal:true}); 
```

然后与后台调用一起使用：

```
var loader = Titanium.Network.createHTTPClient();  
loader.open("GET",base_url + url); 
loader.onload = function() {
    // process response
}
loader.setRequestHeader('Cookie',Titanium.App.Properties.getString("cookies"));
loader.send(); 
```

第一次调用上述 createHTTPClient 代码块时，一切正常，但上述代码的后续运行将发送损坏的 cookie。在 Google App Engine (gae) 中，打印出请求标头将如下所示（损坏）：

```
logging.info('Request:\n%s' % self.request) 
```

响应中断（仅显示请求标头的 cookie 部分）

`Cookie: auth="eyJfdXNlciI6WzYsMSwiVmRoZEtnYWZRMnNxazFjaVM0U1lKdCIsMTM1NzIyMzcwOSwxMzU3MjIzNzA5XX0\075|1357223709|4f622167f477a8c82cab196af4b0029af1a966d7", auth=eyJfdXNlciI6WzYsMSwiVmRoZEtnYWZRMnNxazFjaVM0U1lKdCIsMTM1NzIyMzcwOSwxMzU3MjIzNzA5XX0\075|1357225569|7a469fab7a38a437649c25620729e07c4607f617 Cookie2: $Version=1`

工作反应

`Cookie: auth="eyJfdXNlciI6WzYsMSwiVmRoZEtnYWZRMnNxazFjaVM0U1lKdCIsMTM1NzIyMzcwOSwxMzU3MjIzNzA5XX0\075|1357223709|4f622167f477a8c82cab196af4b0029af1a966d7"` ...

我怀疑这个问题与 unicode 字符或内部的东西有关`createHTTPClient`。损坏的 cookie 中显示了两个`auth=`语句。

总而言之，当应用程序首次启动时，后台`Titanium.Network.createHTTPClient`调用正常工作，之后的任何调用似乎都会发送损坏的 cookie。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:18:44.163

HTTPClient[文档](http://docs.appcelerator.com/titanium/3.0/#!/api/Titanium.Network.HTTPClient)说“对象旨在用于单个请求”，因此我假设在多次调用后一切都会重置。但是在第一次通话之后有些不同。

在设置 cookie 之前添加`loader.clearCookies(base_url);`代码似乎可以解决问题。

```
var loader = Titanium.Network.createHTTPClient();  
loader.open("GET",base_url + url); 
loader.onload = function() {
    // process response
}
loader.clearCookies(base_url); // THE FIX.
loader.setRequestHeader('Cookie',Titanium.App.Properties.getString("cookies"));
loader.send(); 
```

# opencv - Opencv 2.4.3 如何将 IPL_DEPTH_8U 转换为 IPL_DEPTH_32F？

> ID：14141752
> 
> 赞同：2
> 
> 时间：2013-01-03T15:19:04.333
> 
> 标签：opencv

```
char* filename1="1.bmp";  
IplImage* greyLeftImg= cvLoadImage(filename1,0);
char* filename2="2.bmp";
IplImage* greyRightImg= cvLoadImage(filename2,0); 

IplImage* greyLeftImg32=cvCreateImage(cvSize(width,height),32,greyLeftImg->nChannels);//IPL_DEPTH_32F 
IplImage* greyRightImg32=cvCreateImage(cvSize(width,height),32,greyRightImg->nChannels); 
```

总是失败，说“未知函数中的断言失败（src.size == dst.size && dst.type() == CV_8UC(src.channels()))”

我已经搜索了很多方法，但它们似乎都不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:53:54.323

将opencv中的任何灰度8位或16位uint图像转换为32位浮点类型的简单步骤是这样的......

```
IplImage* img = cvLoadImage( "E:\\Work_DataBase\\earth.jpg",0);
IplImage* out = cvCreateImage( cvGetSize(img), IPL_DEPTH_32F, img->nChannels);

double min,max;

cvMinMaxLoc(img,&min,&max);

// Remember values of the floating point image are in the range of 0 to 1, which u 
// can't visualize by cvShowImage().......
cvCvtScale(img,out,1/ max,0); 
```

希望这是简单的方法...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:42:29.873

`IplImage`这是一个将任何转换为​​ 32 位浮点数的简单函数。

```
IplImage* convert_to_float32(IplImage* img)
{
    IplImage* img32f = cvCreateImage(cvGetSize(img),IPL_DEPTH_32F,img->nChannels);

    for(int i=0; i<img->height; i++)
    {
        for(int j=0; j<img->width; j++)
        {
            cvSet2D(img32f,i,j,cvGet2D(img,i,j));
        }
    }
    return img32f;
} 
```

一个重要的考虑是，对于 OpenCV 中的浮点图像，只有那些像素值介于 0.0 和 1.0 之间的图像才能被可视化。要可视化浮点图像，您必须将值从 0.0 缩放到 1.0。

以下是如何执行此操作的示例：

```
IplImage* img8u = cvLoadImage(filename1,0);

IplImage* img32f = convert_to_float32(img8u);

cvShowImage("float image",img32f); //Image will not be shown correctly
cvWaitKey(0);

cvScale(img32f, img32f, 1.0/255.0);

cvShowImage("float image normalized",img32f); //Image will be shown correctly now 
cvWaitKey(0); 
```

# sql - 函数参数列表中的错误：“=”无法识别。在 VB.Net 查询向导中

> ID：14141769
> 
> 赞同：0
> 
> 时间：2013-01-03T15:20:15.363
> 
> 标签：sql, vb.net

```
SELECT 
    e.DESCRIPTION AS [EQUIPMENT TYPE], 
    Count(e.EQNAME) AS QUANTITY,
    Sum(IIf(e.CONDITION = 'Functional', 1, 0)) AS WORKING,
    Sum(IIf(e.CONDITION = 'Non-Functional', 1, 0)) AS [NON-WORKING]
FROM EQUIPMENTS AS e
GROUP BY e.DESCRIPTION; 
```

我尝试在 VB.net TableAdapter 查询配置向导中使用此查询，但出现错误。

函数参数列表中的错误：“=”无法识别。无法解析查询文本 GROUP BY 子句中的错误。

此查询在 MS Access 中运行良好，与 VB.Net 有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:15:37.673

我已经有了解决这个问题的办法。我只是将此查询用作 MS-Access 中的存储查询，然后在我的 VB.Net 代码中使用。感谢你们。

# mysql - 确定字段中的最大字符数

> ID：14141777
> 
> 赞同：3
> 
> 时间：2013-01-03T15:20:34.767
> 
> 标签：mysql, sql, phpmyadmin

我正在处理的 MySQL 数据库的字段大小已被确定为相当随意，我想根据其当前数据对其进行审查。所以我想确定每个字段的最大字符数，所以我确信在更新字段大小时不会丢失任何数据。

phpmyadmin 中是否有可以帮助我的功能或 SQL 语句？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T15:22:01.553

使用`CHAR_LENGTH`，例如

```
SELECT MAX(CHAR_LENGTH(column1)) maxCol1,
       MAX(CHAR_LENGTH(column2)) maxCol2,
       MAX(CHAR_LENGTH(column3)) maxCol3
FROM tableName 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/21a29/1)

`Dynamic SQL`如果您有未知数量的列，您也可以使用。您需要提供的只是数据库的名称和表的名称，

```
SET @db_Name = 'db_2_21a29';
SET @tb_name = 'TABLENAME';
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT('MAX(CHAR_LENGTH(', COLUMN_NAME, ')) AS `', COLUMN_NAME, '`')
  ) INTO @sql
FROM information_schema.columns
WHERE TABLE_NAME = @tb_name AND
      TABLE_SCHEMA = @db_Name;

SET @sql = CONCAT('SELECT ',@sql, 'FROM ', @tb_name);

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/21a29/8)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T15:28:15.363

在 phpmyadmin 中，您可以从表的“**结构**”选项卡中了解这些数据。看附图：

![在此处输入图像描述](../Images/3765948eb3c872943b0a2a61f280a321.png)

# ruby-on-rails - Box.com api 将 URL 重定向到本地主机

> ID：14141779
> 
> 赞同：1
> 
> 时间：2013-01-03T15:20:39.927
> 
> 标签：ruby-on-rails, omniauth, box-api

我正在尝试使用 box.com api 在我的本地环境中进行一些初步测试。我已经注册了 api 密钥，我想在重定向 uri 表单字段中放置一个 localhost url，但它似乎只允许 https（我在 localhost 中没有）。返回的消息：

```
OAuth2 redirect URL must specify a valid URL and must not be http:// 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:32:47.477

对 https 的要求是一件好事。当您仍处于开发阶段时，如果发送到 http://，它仍然是一个以纯文本形式传输的有效身份验证令牌，有人可以抓取并使用它来弄乱您的 box.net 帐户。

您将需要生成一个自签名证书并将其安装在本地以使其正常工作。

[如何为 localhost 创建自签名证书？](https://stackoverflow.com/questions/8169999/how-can-i-create-a-self-signed-cert-for-localhost)

进一步增强此功能的另一个选择是实际购买该项目上线时所需的 SSL，并通过主机文件使用本地 dns 重定向从本地开发机器加载域，而不是实时服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-01T05:48:42.060

Box 已更新自身以`localhost`允许`http://`. 对于其他 URI，您需要`https://`

# sql-server - Microsoft Entity Framework 未显示某些表的外键

> ID：14141789
> 
> 赞同：1
> 
> 时间：2013-01-03T15:21:16.403
> 
> 标签：sql-server, foreign-keys, entity-framework-5

我使用 Entity Framework 5.0 版从数据库构建了实体模型。以下 DDL 用于创建表：

```
CREATE TABLE [dbo].[Replenishment](
    [replenishmentId] [int] IDENTITY(1,1) NOT NULL,
    [locationID] [int] NOT NULL,
    [inventoryItemId] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
    ([replenishmentId] ASC)
    WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF,
    ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
    ) ON [PRIMARY]

GO

ALTER TABLE [dbo].[Replenishment]  
    WITH CHECK ADD  CONSTRAINT [FKReplenishm163678]
    FOREIGN KEY([inventoryItemId])
    REFERENCES [dbo].[InventoryItem] ([inventoryItemId])
GO

ALTER TABLE [dbo].[Replenishment] CHECK CONSTRAINT [FKReplenishm163678]
GO

ALTER TABLE [dbo].[Replenishment]  
    WITH CHECK ADD  CONSTRAINT [FKReplenishm580804] 
    FOREIGN KEY([locationID])
    REFERENCES [dbo].[Location] ([locationID])
GO

ALTER TABLE [dbo].[Replenishment] CHECK CONSTRAINT [FKReplenishm580804]
GO 
```

当我使用表 Replenishment、Location 和 InventoryItem 构建实体模型时，所有三个表都显示在模型中，但没有任何关系出现。

有谁知道为什么没有出现外键或导航属性？

==================================================== ===========================

这是来自关联表的 DDL： 这是来自其他两个表的 ddl：

```
CREATE TABLE [dbo].[Location](
[locationID] [int] IDENTITY(1,1) NOT NULL,
[addressID] [int] NULL,
[availabilityStatusID] [int] NOT NULL,
[inLocationId] [int] NULL,
[locationTypeID] [int] NOT NULL,
[locationName] [varchar](40) NOT NULL,
[locationDescription] [varchar](100) NOT NULL,
[locationAnchorX] [int] NULL,
[locationAnchorY] [int] NULL,
[locationImage] [varchar](255) NULL,
[diagramLayerId] [int] NULL,
[locationShapeParameters] [varchar](max) NULL,
[locationHeight] [int] NULL,
    [locationWidth] [int] NULL,
    [locationColor] [varchar](20) NULL,
PRIMARY KEY CLUSTERED 
(
[locationID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY     = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

ALTER TABLE [dbo].[Location]  WITH CHECK ADD  CONSTRAINT [FKLocation209934] FOREIGN KEY([inLocationId])
REFERENCES [dbo].[Location] ([locationID])
GO

ALTER TABLE [dbo].[Location] CHECK CONSTRAINT [FKLocation209934]
GO

CREATE TABLE [dbo].[InventoryItem](
[inventoryItemId] [int] IDENTITY(1,1) NOT NULL,
[itemTaxonomyId] [int] NOT NULL,
[itemDescription] [varchar](100) NOT NULL,
[itemCode] [varchar](40) NULL,
[batchControlled] [bit] NOT NULL,
[assemblyDefinitionID] [int] NULL,
PRIMARY KEY CLUSTERED 
(
    [inventoryItemId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:28:04.127

我相信我找到了问题所在。我一直在做一些使用 SQL Server 身份验证的工作和一些使用 Windows 身份验证的工作。我的 Visual Studio 看不到使用 Windows 身份验证输入的信息，它使用 SQL Server 身份验证进行连接。

经过进一步研究，我发现情况并非如此。我仍然对此感到困惑。

# performance - 在索引处分解列表

> ID：14141791
> 
> 赞同：9
> 
> 时间：2013-01-03T15:21:25.300
> 
> 标签：performance, haskell

我今天有一个性能问题。

我正在制作一个（Haskell）程序，并且在进行分析时，我看到大部分时间都花在了您可以在下面找到的功能上。它的目的是获取列表的第 n 个元素并返回除了元素本身之外没有它的列表。我目前的（慢）定义如下：

```
breakOn :: Int -> [a] -> (a,[a])
breakOn 1 (x:xs) = (x,xs)
breakOn n (x:xs) = (y,x:ys)
 where
  (y,ys) = breakOn (n-1) xs 
```

已知`Int`参数在 (never null) list 的长度范围`1..n`内，因此该函数永远不会出现错误。`n``(x:xs)`

但是，我在这里的表现很差。我的第一个猜测是我应该为另一个结构更改列表。但是，在开始选择不同的结构和测试代码（这将花费我很多时间）之前，我想在这里征求第三人的意见。另外，我很确定我没有以最好的方式做到这一点。欢迎任何指点！

*请注意，该类型`a`可能不是`Eq`.*

## 解决方案

我改编了我的代码 tu use`Sequence`来自[Data.Sequence](http://www.haskell.org/ghc/docs/latest/html/libraries/containers/Data-Sequence.html)模块。结果在这里：

```
import qualified Data.Sequence as S

breakOn :: Int -> Seq a -> (a,Seq a)
breakOn n xs = (S.index zs 0, ys <> (S.drop 1 zs))
 where
  (ys,zs) = S.splitAt (n-1) xs 
```

但是，我仍然接受进一步的改进建议！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T15:32:06.963

是的，这是低效的。您可以通过使用`splitAt`（在递归位期间将数字拆箱）做得更好，通过使用具有有效拆分的数据结构（例如[fingertree](http://hackage.haskell.org/packages/archive/containers/0.5.2.1/doc/html/Data-Sequence.html) ）做得更好，最好通过按摩上下文以避免需要此操作。如果您发布更多上下文，则可以提供更有针对性的建议。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T15:39:21.593

Prelude 函数通常非常有效。您可以使用 重写您的函数`splitAt`，如下所示：

```
breakOn :: Int -> [a] -> (a,[a])
breakOn n xs = (z,ys++zs)
 where
  (ys,z:zs) = splitAt (n-1) xs 
```

# c# - LINQ 在树视图中获取最深级别的节点

> ID：14141792
> 
> 赞同：5
> 
> 时间：2013-01-03T15:21:30.447
> 
> 标签：c#, vb.net, linq

假设我有一个如下所示的 WinForms Treeview：

```
Parent1
   Child1
      Sub-Child1
         DeepestNode1
         DeepestNode2
         DeepestNode3
      Sub-Child2
         DeepestNode4
         DeepestNode5
         DeepestNode6
   Child2
      Sub-Child3
      Sub-Child4
      Sub-Child5
      Sub-Child6
   Child3
      (no children) 
```

* * *

我想按照以下方式创建一个函数：

```
Function GetDeepestChildren(MyNode as Treenode) as List(Of Treenode) 
```

如果结果如下所示：

```
GetDeepestChildren(Parent1) = {DeepestNode1, DeepestNode2, DeepestNode3, DeepestNode4, DeepestNode5, DeepestNode6}

GetDeepestChildren(Sub-Child1) = {DeepestNode1, DeepestNode2, DeepestNode3}

GetDeepestChildren(Child2) = {Sub-Child3, Sub-Child4, Sub-Child5, Sub-Child6}

GetDeepestChildren(Child3) = Empty list 
```

... 换句话说，始终从给定的节点转到最深的级别并返回子节点 - 即使它们在不同的父节点之间拆分（如 中的情况`Parent1`）。

我创建了一个函数，它可以告诉我一个节点深入了多少层，如下所示：

```
 Public Function GetDeepestChildNodeLevel(ByVal ParentNode As TreeNode) As Integer
        Dim subLevel = ParentNode.Nodes.Cast(Of TreeNode).Select(Function(subNode) GetDeepestChildNodeLevel(subNode))
        Return If(subLevel.Count = 0, 0, subLevel.Max() + 1)
    End Function 
```

所以我知道从什么级别得到孩子，我正在寻找的是一个可以做到这一点的功能 - Somethign 大致如下：

```
Function GetDeepestChildren(MyNode as Treenode) as List(Of Treenode)
       Return All child nodes where level = GetDeepestChildNodeLevel(MyNode)
End function 
```

我希望这是有道理的-谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:31:02.673

在 C# 中，您可以使用`yield return`或使用递归 lambda。这是第二种方法的示例：

```
Func<TreeNode,IEnumerable<TreeNode>> getChildren = null;
getChildren = n => {
    if (n.Nodes.Count != 0) {
        var list = new List<TreeNode>(n.Nodes.Where(c => c.Nodes.Count == 0));
        foreach (var c in n.Nodes) {
            // Note the recursive call below:
            list.AddRange(getChildren(c));
        }
        return list;
    } else {
        return new TreeNode[0];
    }
};
var res = getChildren(myTree); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:26:00.623

这是一个使用 XML 的版本——翻译应该很容易。我使用了我推荐的[linqPad](http://linqPad.com)，你可以运行它并直接在 linkPad 中查看它的工作原理

```
WalkDeep(tree,getDeep(tree)) returns:

<DeepestNode1 /> 
<DeepestNode2 /> 
<DeepestNode3 /> 
<DeepestNode4 /> 
<DeepestNode5 /> 
<DeepestNode6 /> 
```

C# 代码更好，因为您可以使用 yield

VB代码

```
function getDeep( e as XElement) as integer
  if (e.HasElements)
    return 1 + e.Elements().Select(Function(c) getDeep(c)).Max()
  else
    return 1
  end if  
end function

function WalkDeep(root as XElement,find as integer,optional mylevel as integer = 1) as IEnumerable(of XElement)
  Dim result As New List(Of XElement)

  if find = mylevel 
    result.Add(root)
  else 
    if root.HasElements
      for each c as XElement in root.Elements()
        for each r as XElement in WalkDeep(c,find,mylevel+1)
            result.Add(r)
        next
      next  
    end if
  end if

  return result
end function

Sub Main
  dim tree as XElement = <Parent1>
     <Child1>
        <Sub-Child1>
           <DeepestNode1/>
           <DeepestNode2/>
           <DeepestNode3/>
        </Sub-Child1>   
        <Sub-Child2>
           <DeepestNode4/>
           <DeepestNode5/>
           <DeepestNode6/>
        </Sub-Child2>   
     </Child1>      
     <Child2>
        <Sub-Child3/>
        <Sub-Child4/>
        <Sub-Child5/>
        <Sub-Child6/>
     </Child2>   
     <Child3 />
  </Parent1>   

  WalkDeep(tree,getDeep(tree)).Select(function(x) x.Name.LocalName).Dump()
End Sub 
```

C#代码：

```
int getDeep(XElement e)
{
  if (e.HasElements)
    return 1 + e.Elements().Select(c => getDeep(c)).Max();
  else
    return 1;
}

IEnumerable<XElement> WalkDeep(XElement root,int find, int mylevel=1)
{   
  if (find == mylevel) yield return root;

  if (root.HasElements)
  {
    foreach(XElement c in root.Elements())
    {
      foreach(XElement r in WalkDeep(c,find,mylevel+1))
        yield return r;

    }
  }

  yield break;
}

void Main()
{
  XElement tree = XElement.Parse (@"
  <Parent1>
     <Child1>
        <Sub-Child1>
           <DeepestNode1/>
           <DeepestNode2/>
           <DeepestNode3/>
        </Sub-Child1>   
        <Sub-Child2>
           <DeepestNode4/>
           <DeepestNode5/>
           <DeepestNode6/>
        </Sub-Child2>   
     </Child1>      
     <Child2>
        <Sub-Child3/>
        <Sub-Child4/>
        <Sub-Child5/>
        <Sub-Child6/>
     </Child2>   
     <Child3 />
  </Parent1>   
  ");

  WalkDeep(tree,getDeep(tree)).Dump();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T17:13:44.180

这是我根据@dasblinkenlight 的解决方案创建的 VB.Net 重新制作 - 它运行良好，我只是把它放在这里，以防将来有人需要 VB 中的解决方案。

```
 Public Function GetDeepestChildNodes(ByVal ParentNode As TreeNode) As List(Of TreeNode)
        Dim RetVal As New List(Of TreeNode)

        If ParentNode.Nodes.Count > 0 Then
            RetVal = (From nd As TreeNode In ParentNode.Nodes
                   Where nd.Nodes.Count = 0
                   Select nd).ToList

            For Each nd In ParentNode.Nodes
                RetVal.AddRange(GetDeepestChildNodes(nd))
            Next
        End If

        Return RetVal
    End Function 
```

再次感谢大家的帮助！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T15:28:15.707

试过递归函数了吗？在 VB.Net 中不确定，但 C# 看起来像

```
public List<TreeNode> GetDeepestChildren(Treenode MyNode)
{
   if (MyNode.Children.Count > 0)
        GetDeepestChildren(Treenode MyNode);
   else
        return MyNode.Children;
} 
```

这还没有被编译或测试，但是这个想法是存在的，并且应该为任何给定的节点返回最深的孩子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T15:41:52.960

我不熟悉 TreeView 控件，但是 TreeNode 的 Level 属性对您有什么好处吗？

[http://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.level.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.level.aspx)

如果你知道最深层次，你可以这样做：

C＃

```
private List<TreeNode> GetDeepestChildren(int level)
{
    return (from p in treeView1.Nodes.Cast<TreeNode>() where p.Level == level select p).ToList();
} 
```

VB

```
Private Function GetDeepestChildren(level As Integer) As List(Of TreeNode)
    Return (From p In treeView1.Nodes.Cast(Of TreeNode)() Where p.Level = levelp).ToList()
End Function 
```

格雷格。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T16:00:23.097

这*只是*对@dasblinkenlight 答案的轻微修改，所以不要对此表示赞同！

只是个人风格的问题，但我更喜欢这样的递归调用：

```
IEnumerable<TreeNode> WalkNodes(TreeNode root)
{   
    yield return root;
    var children = root.Nodes.Cast<TreeNode>();
    foreach (var child in children)
    {
        foreach(var subChild in WalkNodes(child))
        {
            yield return subChild;
        }
    }
} 
```

并通过以下方式调用：

```
foreach (var node in treeView.Nodes.Cast<TreeNode>())
{
    var walkedFrom = WalkNodes(node);
    foreach (var subNode in walkedFrom)
    {
        Console.WriteLine(subNode.Text);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-03T16:28:19.970

它不是 linq，因为我认为在这种情况下它不应该由 linq 完成，对不起，如果这不是你所要求的，而是这项工作。它不是完全证明的，但如果你得到一棵疯狂的树，至少你不会得到 stackoverflow

```
Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    Dim test1 = GetDeepestChildren(TreeView1.Nodes(0))
    Dim test2 = GetDeepestChildren(TreeView1.Nodes(0).Nodes(0).Nodes(0))
    Dim test3 = GetDeepestChildren(TreeView1.Nodes(0).Nodes(1))
    Dim test4 = GetDeepestChildren(TreeView1.Nodes(0).Nodes(2))
End Sub

Private Function GetDeepestChildren(ByVal node As TreeNode) As List(Of TreeNode)
    Dim deepestList As New List(Of TreeNode)

    If node.Nodes.Count = 0 Then
        Return deepestList
    End If

    Dim nodes As New Stack(Of TreeNode)
    For Each n As TreeNode In node.Nodes
        nodes.Push(n)
    Next

    Dim deepest As Integer = 0
    Do Until nodes.Count = 0
        node = nodes.Pop
        If node.Nodes.Count = 0 Then
            If deepest < node.Level Then
                deepest = node.Level
                deepestList.Clear()
                deepestList.Add(node)
            ElseIf deepest = node.Level Then
                deepestList.Add(node)
            End If
        Else
            For Each n As TreeNode In node.Nodes
                nodes.Push(n)
            Next
        End If
    Loop

    Return deepestList
End Function 
```

# sql-server - 创建存储过程导致错误

> ID：14141796
> 
> 赞同：1
> 
> 时间：2013-01-03T15:21:39.820
> 
> 标签：sql-server, sql-server-2008-r2

您好我正在尝试创建一个存储过程，但每次我尝试保存它时都会出现错误

```
Msg 102, Level 15, State 1, Procedure forum_Insert_Post, Line 3
Incorrect syntax near '@description'.
Msg 137, Level 15, State 2, Procedure forum_Insert_Post, Line 9
Must declare the scalar variable "@title" 
```

这是我的代码：

```
CREATE PROCEDURE forum_Insert_Post
     @title nvarchar
     @description nvarchar
     @subcategoryId int
     @date dateTime
     @usernameId uniqueidentifier
AS
    INSERT INTO forum_posts (PostTitle , PostContent , PostDate , UserId , SubcategoryId)
    VALUES (@title , @description , @date , @usernameId , @subcategoryId) 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:22:50.237

参数后需要逗号：

```
CREATE PROCEDURE forum_Insert_Post
 @title nvarchar,
 @description nvarchar,
 @subcategoryId int,
 @date dateTime,
 @usernameId uniqueidentifier
AS
INSERT INTO forum_posts (PostTitle , PostContent , 
 PostDate , UserId , SubcategoryId)
VALUES (@title , @description , @date , @usernameId , @subcategoryId) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T15:23:37.990

只需添加一些逗号，并给`nvarchar`s 一个适当的大小，否则它将截断为 1 个字符 :)

```
CREATE PROCEDURE forum_Insert_Post
     @title nvarchar(20),
     @description nvarchar(20),
     @subcategoryId int,
     @date dateTime,
     @usernameId uniqueidentifier
AS
    INSERT INTO forum_posts (PostTitle , PostContent , PostDate , UserId , SubcategoryId)
    VALUES (@title , @description , @date , @usernameId , @subcategoryId) 
```

[此处](http://www.sqlfiddle.com/#!6/be560/1)`NVARCHAR`截断的 SQLFiddle

# firefox - 防止 Firefox 附加变量值在浏览器关闭时消失的更好方法？使用“io/text-streams”模块时出错

> ID：14141799
> 
> 赞同：0
> 
> 时间：2013-01-03T15:21:48.070
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk, add-on

我想将我的 Firefox 插件的用户设置保存在一个可以随时访问的变量中。它不应该在浏览器关闭时消失。现在我该怎么做？

我已经尝试过Firefox的“简单存储”模块，在我退出浏览器之前它工作正常。当我退出浏览器时，“简单存储”就会消失。所以我不能使用它。

我也尝试过“io/text-streams”模块，但是当我尝试在“firefox add-on builder”中使用这个模块时

```
var io = require("io/text-streams");
io.write("write it"); 
```

我收到此错误：

```
XPI not built

ModuleNotFoundError: unable to satisfy: require(io/text-streams) from /tmp/tmpePRdMr/addon-sdk-1.12/packages/sadaf2605-4/lib/main.js:2: Looked for it in: /tmp/tmpePRdMr/addon-sdk-1.12/packages/sadaf2605-4/lib/io/text-streams.js /tmp/tmpePRdMr/addon-sdk-1.12/lib/io/text-streams.js 
```

很可能，我需要安装一些软件包，将使用我的插件的用户是否还需要在浏览器上安装这些软件包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:15:06.803

显然您正在使用`cfx run`. 该[文档](https://addons.mozilla.org/en-US/developers/docs/sdk/1.12/modules/sdk/simple-storage.html#Simple%20Storage%20and%20%22cfx%20run%22)解释了为什么`simple-storage`出现损坏以及如何解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T06:33:03.570

尝试将您的设置保存在[localStorage](https://stackoverflow.com/questions/2010892/storing-objects-in-html5-localstorage)对象（HTML5）中。会话关闭后您的值不会消失......

# css - 控制css3动画的平滑度

> ID：14141801
> 
> 赞同：1
> 
> 时间：2013-01-03T15:21:49.767
> 
> 标签：css

我正在尝试为一系列关键帧设置动画以产生运动的错觉。我想更改我的 html 元素上的背景位置，以在一秒钟内显示不同的帧，并有一秒钟左右的间隙，直到它再次播放。

这就是我所拥有的 - **[http://jsfiddle.net/kSNWV/](http://jsfiddle.net/kSNWV/)**（我`-webkit`现在只是为了测试目的做了这个味道）。这是我想要制作动画的图像（火车进入隧道） - [http://i.imgur.com/6uOoK.png](http://i.imgur.com/6uOoK.png)

我的html：

```
<div id="train"></div>​ 
```

我的CSS：

```
#train { width: 110px; height: 43px; border: 10px solid #454545;
background: url(http://i.imgur.com/6uOoK.png) 110px 0;
-webkit-animation: train 2s linear 0s infinite normal; }

@-webkit-keyframes train {
    0%{background-position: 110px 0;}
    2%{background-position: 0px 0;}
    4%{background-position: -110px 0;}
    6%{background-position: -220px 0;}
    8%{background-position: -330px 0;}
    10%{background-position: -440px 0;}
    12%{background-position: -550px 0;}
    14%{background-position: -660px 0;}
    16%{background-position: -770px 0;}
    18%{background-position: -880px 0;}
    20%{background-position: -990px 0;}
    22%{background-position: -1100px 0;}
    24%{background-position: -1210px 0;}
    26%{background-position: -1320px 0;}
    28%{background-position: -1430px 0;}
    30%{background-position: -1540px 0;}
    32%{background-position: -1650px 0;}
    34%{background-position: -1760px 0;}
    36%{background-position: -1870px 0;}
    38%{background-position: -1980px 0;}
    40%{background-position: -2090px 0;}
    42%{background-position: -2200px 0;}
    44%{background-position: -2310px 0;}
    46%{background-position: -2420px 0;}
    48%{background-position: -2530px 0;}
} 
```

​ Is it possible to have a css3 animation that just 'snaps' to each step without animating the transition in between? Also, how do I reset this animation without having it play in reverse (right now it is animating `background-position` of `-2530px` back to `110px` at the end).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:40:28.797

Use the `step-end` timing function. Note that this omits the last keyframe. [http://jsfiddle.net/kSNWV/3/](http://jsfiddle.net/kSNWV/3/)

# postgresql - Heroku postgresql 数据库名称

> ID：14141803
> 
> 赞同：40
> 
> 时间：2013-01-03T15:22:00.243
> 
> 标签：postgresql, heroku

这是我必须找到heroku数据库名称的命令：

```
$ heroku config | grep POSTGRESQL 
```

我得到类似于以下的结果：

```
HEROKU_POSTGRESQL_NAVY_URL: postgres://wxjwilh:tKDSwUlfZ8Da@fr6-84-24-28-19.compute-1.amazonaws.com:52/d14grmkt 
```

此输出的哪一部分是我可以与命令一起使用的数据库名称：

```
$ heroku pg:reset <DATABASE> 
```

我尝试使用整个 url，但得到一个无效的参数错误。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-05-27T15:48:24.010

希望大家混淆占位符和常量。

假设有一个名为*d6u5qhrlnbdfmp*的数据库。那么就没有必要输入

```
heroku pg:reset d6u5qhrlnbdfmp 
```

相反，我们可以简单地输入

```
heroku pg:reset DATABASE_URL 
```

样本输出

```
E:\git\stutzen>heroku pg:reset d6u5qhrlnbdfmp --app stutzen
 !    Unknown database: d6u5qhrlnbdfmp. Valid options are: DATABASE_URL, HEROKU_
POSTGRESQL_CYAN_URL

E:\git\stutzen>heroku pg:reset DATABASE_URL --app stutzen

 !    WARNING: Destructive Action
 !    This command will affect the app: stutzen
 !    To proceed, type "stutzen" or re-run this command with --confirm stutzen

> stutzen
Resetting HEROKU_POSTGRESQL_CYAN_URL (DATABASE_URL)... done 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-03T15:32:45.230

URL由以下部分组成：

```
scheme://username:password@host:port/database 
```

因此，在您的情况下，数据库名称是`d14grmkt`.

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-11-23T17:53:24.347

我很难在 Heroku 上重置我的数据库。我发布这个，因为我认为这是最直接的解决方案。要找出数据库名称 cd 到您的应用程序文件夹并键入：

```
heroku pg:info 
```

输出将类似于

```
=== HEROKU_POSTGRESQL_BRONZE_URL
#other stuff 
```

重置数据库类型：

```
heroku pg:reset HEROKU_POSTGRESQL_BRONZE_URL 
```

您必须确认您的应用程序名称。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-03T15:36:12.990

使用命令时：

`$ heroku pg:reset DATABASE`

它会告诉你可用的数据库名称，如下所示：

`! Unknown database: DATABASE_URL. Valid options are: HEROKU_POSTGRESQL_COPPER_URL, SHARED_DATABASE`

所以试试它给出的选项

`$ heroku pg:reset HEROKU_POSTGRESQL_COPPER_URL`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-13T13:12:39.523

派对迟到了，但如果您需要数据库名称，例如将其作为插件添加到另一个实例，您运行

```
heroku addons 
```

在列表中，您将看到您的 postgres 插件，在“附加”列中是附加的数据库应用程序的名称

# java - 我希望能够使用 java.xml 发送通用 xml

> ID：14141806
> 
> 赞同：1
> 
> 时间：2013-01-03T15:22:02.313
> 
> 标签：java, rest

我需要有一个可以接受任意 xml 字符串的 Web 服务。我正在尝试使用使用 xmAnyElement 标记的代码，但它不起作用。这是代码：

```
@XmlRootElement(name="root")
@XmlType(propOrder={"header","body"})
public class TieHornetqRequest {
    private String header;
    private String body;

    @XmlAnyElement
    public String getHeader() {
        return header;
    }
    public void setHeader(String header) {
        this.header = header;
    }

    @XmlAnyElement(lax=true)
    public String getBody() {
        return body;
    }
    public void setBody(String body) {
        this.body = body;
    }
} 
```

但是，当我尝试运行它时，我得到了这个堆栈跟踪：

```
16:17:44,372 WARN  [org.jboss.resteasy.core.SynchronousDispatcher] (http-127.0.0.1/127.0.0.1:8080-1) Failed executing POST /tieHornetQ/getTieHornetqData: org.jboss.resteasy.spi.UnsupportedMediaTypeException: Cannot consume content type
    at org.jboss.resteasy.core.registry.Segment.match(Segment.java:117) [resteasy-jaxrs-2.3.3.Final.jar:]
    at org.jboss.resteasy.core.registry.SimpleSegment.matchSimple(SimpleSegment.java:33) [resteasy-jaxrs-2.3.3.Final.jar:]
    at org.jboss.resteasy.core.registry.RootSegment.matchChildren(RootSegment.java:327) [resteasy-jaxrs-2.3.3.Final.jar:]
    at org.jboss.resteasy.core.registry.SimpleSegment.matchSimple(SimpleSegment.java:44) [resteasy-jaxrs-2.3.3.Final.jar:]
    at org.jboss.resteasy.core.registry.RootSegment.matchChildren(RootSegment.java:327) [resteasy-jaxrs-2.3.3.Final.jar:]
    at org.jboss.resteasy.core.registry.RootSegment.matchRoot(RootSegment.java:374) [resteasy-jaxrs-2.3.3.Final.jar:]
    at org.jboss.resteasy.core.registry.RootSegment.matchRoot(RootSegment.java:367) [resteasy-jaxrs-2.3.3.Final.jar:]
    at org.jboss.resteasy.core.ResourceMethodRegistry.getResourceInvoker(ResourceMethodRegistry.java:315) [resteasy-jaxrs-2.3.3.Final.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.getInvoker(SynchronousDispatcher.java:173) [resteasy-jaxrs-2.3.3.Final.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:118) [resteasy-jaxrs-2.3.3.Final.jar:]
    at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:208) [resteasy-jaxrs-2.3.3.Final.jar:]
    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55) [resteasy-jaxrs-2.3.3.Final.jar:]
    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50) [resteasy-jaxrs-2.3.3.Final.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.1.Final.jar:1.0.1.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.16.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.16.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.16.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.16.Final.jar:]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.2.Final.jar:7.1.2.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.16.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.16.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.16.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.16.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.16.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:679) [jbossweb-7.0.16.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:931) [jbossweb-7.0.16.Final.jar:]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_27] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T23:12:01.277

我没有传递 xml，而是在发送请求时传递了一个字符串：

```
public class TieHornetqLookup {
//  private static final Log log = LogFactory.getLog(CreateOrderLookup.class.getName());
    private String request;
    private TieHornetqResponse response;

    public TieHornetqLookup(String request) {
        this.request = request;
    }

    public TieHornetqResponse getResponse() throws Exception {

        try{

            SendRequest.sender(request);

            return response;
        } catch(Exception e) {
            //log.error("Exception while attempting to get a response: ", e);
            throw e;
        }
    }
} 
```

# c++ - 访问拒绝 NT 授权\本地服务

> ID：14141808
> 
> 赞同：1
> 
> 时间：2013-01-03T15:22:04.157
> 
> 标签：c++, windows, windows-services

我有一个 Windows servce 调用一个应该操作文件的 DLL。当我尝试操作该文件时，我收到此错误消息：ACCESS DENIED NT AUTHORITY\LOCAL SERVICE (From Filemon)。此问题不在 Windows 7 机器上，而是在所有 Windows XP 机器上。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-11T11:09:46.823

问题是文件的权限错误。Windows 服务用户无法编写它。我必须在我的安装程序中解决这个问题。

# c# - C#从mysql读取int

> ID：14141809
> 
> 赞同：0
> 
> 时间：2013-01-03T15:22:03.907
> 
> 标签：c#, mysql, database

在 mysql 中从我的表中读取值时出现问题，是索引值我无论如何都无法读取该值。我得到的只是初始化值 0 我没有得到任何错误，因为它返回 0，如果我在数据库中运行查询，它会得到正确的值。我尝试使用 executeScalar() 但结果相同。

```
 MySqlConnection conn = new MySqlConnection(MyConString);
    ulong ukey=0;
            try
            {
                string sql_users2 = "SELECT `key` FROM `permuser` WHERE `user` = '" + myuser + "' AND `code` = '" + mycode + "'";
                MySqlCommand cmdSel2 = new MySqlCommand(sql_users2, conn);
                conn.Open();
                MySqlDataReader dr2 = cmdSel2.ExecuteReader();
                dr2.Read();

                    ukey = dr2.GetUInt64(dr2.GetOrdinal("key")); 
                   // MessageBox.Show("Sorry " + myuser + " already have access to " + mycode + ",\nIf this is an extension, search for the user which key is  " + ukey + "   and edit the end date.", "Duplicate User Warning", MessageBoxButtons.OK, MessageBoxIcon.Warning);

                dr2.Close();
                dr2.Dispose();
            }
            catch (MySqlException ex) //catch 2
            {

                MessageBox.Show("catch ukey\nCan't connect to database\n" + ex.ToString());
            }

            conn.Close();
            conn.Dispose(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:34:57.110

您从查询中返回单个值，因此您可以直接使用[ExecuteScalar](http://msdn.microsoft.com/en-us/library/vstudio/system.data.sqlclient.sqlcommand.executescalar%28v=vs.100%29.aspx)而不是 ExecuteReader。（链接指向 SqlServer 的描述，但它与 MySql 相同）

永远不要忘记的一个重要问题是使用参数而不是字符串连接。
如果您的`myuser`或`mycode`变量包含单引号会怎样？您会得到错误的结果或语法错误。当然，主要问题是[Sql Injection 攻击](http://xkcd.com/327/)不可低估。

```
using(MySqlConnection conn = new MySqlConnection(MyConString))
{
    ulong ukey=0;
    try
    {
        string sql_users2 = "SELECT `key` FROM `permuser` WHERE `user` = @usr AND `code` = @code";
        MySqlCommand cmdSel2 = new MySqlCommand(sql_users2, conn);
        conn.Open();
        cmdSel2.Parameters.AddWithValue("@usr", myuser);
        cmdSel2.Parameters.AddWithValue("@code", mycode);

        object result  = cmdSel2.ExecuteScalar();
        if(result != null)
            ukey = Convert.ToUInt64(result); 

    }
    catch (MySqlException ex) //catch 2
    {
        MessageBox.Show("catch ukey\nCan't connect to database\n" + ex.ToString());
    }
} 
```

我也对你对 UInt64 的使用感到有点困惑。列中存储了哪种数据类型`key`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:30:00.147

方法很简单：

```
ukey = (uint)dr2[0]; 
```

# vb.net - 在 Datagridview 单元格中托管 Infragistics Ultracombo

> ID：14141810
> 
> 赞同：0
> 
> 时间：2013-01-03T15:22:07.337
> 
> 标签：vb.net, datagridview, infragistics, ultracombo

大家好，新年快乐，

就像我在标题中所说的那样，我需要在 Datagridview 单元中托管一个 Infragistics Ultracombo。

要在 datagridview 单元格中托管控件，我使用此[代码](http://msdn.microsoft.com/en-us/library/7tas5c80.aspx)，它适用于许多控件，但由于某种原因，它不适用于 Ultracombo

# clojure - 如何从具有副作用的函数中获取返回值的集合？

> ID：14141811
> 
> 赞同：4
> 
> 时间：2013-01-03T15:22:25.330
> 
> 标签：clojure

寻找一种从具有副作用的函数生成返回值集合的方法，以便我可以将其提供给`take-while`.

```
(defn function-with-side-effects [n]
  (if (> n 10) false (do (perform-io n) true)))

(defn call-function-with-side-effects []
  (take-while true (? (iterate inc 0) ?))) 
```

更新

这是我在 Jan 的回答后得到的：

```
(defn function-with-side-effects [n]
  (if (> n 10) false (do (println n) true)))

(defn call-function-with-side-effects []
  (take-while true? (map function-with-side-effects (iterate inc 0))))

(deftest test-function-with-side-effects
  (call-function-with-side-effects)) 
```

运行测试不会打印任何内容。使用`doall`导致内存不足异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T15:36:05.603

不应该`map`解决问题吗？

```
(defn call-function-with-side-effects []
  (take-while true? (map function-with-side-effects (iterate inc 0)))) 
```

如果您希望所有副作用生效，请使用[`doall`](http://www.clodoc.org/doc/clojure.core/doall). 相关：[如何在 Clojure 中将惰性序列转换为非惰性序列](https://stackoverflow.com/questions/1641626/how-to-covert-a-lazy-sequence-to-a-non-lazy-in-clojure)。

```
(defn call-function-with-side-effects []
  (doall (take-while true? (map function-with-side-effects (iterate inc 0))))) 
```

请注意，我`true`将第二行中的替换为[`true?`](http://www.clodoc.org/doc/clojure.core/true%3F)假设这就是您的意思。

# google-maps - 谷歌地图标记未以折线 v3 为中心

> ID：14141812
> 
> 赞同：0
> 
> 时间：2013-01-03T15:22:31.640
> 
> 标签：google-maps, marker, polyline

我的地图上有折线，标记应该位于折线上。

问题是标记在左上角移动，它们看起来离折线有一段距离，而它们应该在它们的顶部。

有人知道如何解决吗？谢谢

![标记不居中示例](../Images/dedd50ff134e4699309f30808804c890.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:57:22.710

好的

如果有人需要，我找到了答案。

我只是这样使用 MarkerImage ：

```
var image = new google.maps.MarkerImage(icon,
    // This marker is 20 pixels wide by 32 pixels tall.
    null, 
    // The origin for this image is 0,0.
    new google.maps.Point(0,0),
    // The anchor for this image is the base of the flagpole at 0,32.
    new google.maps.Point(7, 7)
);
var marker = new google.maps.Marker({
    position: new google.maps.LatLng(lat, lon),
    map: map,
    title: title,
    icon: image
}); 
```

其中 new google.maps.Point(7, 7) 采用像素偏移数。

初始位置 0,0 位于标记的中心底部，因此我将图像偏移了一半的宽度和高度。

现在完美运行。

# matlab - 对于 Matlab，从 xlsx 导入数据，如何将第一行作为变量名，将列的其余部分作为变量名的数据

> ID：14141815
> 
> 赞同：2
> 
> 时间：2013-01-03T15:22:33.940
> 
> 标签：matlab, import, xlsx

在我的excel文件中。每列的第一行是一个字符串。该列的其余部分是该字符串的数据，即

```
'time' 
1
2
3
4 
```

我想在 excel 中取第一行，并在 Matlab 中设置变量名，其余列数据是该变量的数值数据。所以在 Matlab 中，时间将是数字 1、2、3、4 的列向量。

我不能让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:35:26.747

怎么样

```
[val nms] = xlsread( xlsFileName );
assert( size(val,2) == size(nms,2), 'mismatch number of columns and number of names');
for ci=1:size(val,2)
    eval( [ nms{ci}, ' = val(:,ci);' ] ); % name the column
end 
```

是什么让这项工作：

1.  `xlsread`此代码使用**两个**输出变量调用。这种方式`xlsread`将数字数据放入第一个变量中，将文本数据放入第二个变量中。有关更多信息，请参阅[`xlsread`文档](http://www.mathworks.com/help/matlab/ref/xlsread.html)。

2.  `eval`用于为变量 ( ) 赋值，该变量`time`的名称存储在另一个变量 ( `nms{1}`) 中。命令的参数`eval`是一个**字符串** `time = val(:,1);`，Matlab 命令将第一列 data( `val(:,1)`) 的值赋给一个名为`time`.

# php - SQL Not null 和 php = 或 false

> ID：14141818
> 
> 赞同：1
> 
> 时间：2013-01-03T15:22:48.740
> 
> 标签：php, sql, phpmyadmin

我有一个将描述和缩略图插入表格的循环，但并非循环中的所有项目都有描述和缩略图。我不认为这是一个问题，但是sql不会插入它，除非它们有一个值。我认为这可能是由于 not null 的原因，所以我尝试将“null”更改为“yes”。

我将其设置为打印出执行的查询和 mysql 错误：

> 查询：INSERT INTO Experiments (title, dir, desc, thumbnail) VALUES('3dbox', '3dbox', '', '')
> 
> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'desc, thumbnail) VALUES('3dbox', '3dbox', '', '')' 附近使用正确的语法

我也试过这个：

```
$d = @file_get_contents("/experiments/$sites[$i]/desc.txt") or false; 
```

但这也不起作用，正如您在查询中看到的那样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:24:32.963

`desc`是Mysql中的保留字。因此，错误。您需要将列名更改为其他名称，或者使用这样的反引号访问它，

```
INSERT INTO experiments (title, dir, `desc`, thumbnail) VALUES('3dbox', '3dbox', '', '') 
```

这是保留字的[手册](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:25:01.530

您不能使用“desc”作为列名，因为它是一个保留字：[http](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html) ://dev.mysql.com/doc/refman/5.5/en/reserved-words.html ，您需要对其进行转义：尝试更改您的对此进行查询：

```
INSERT INTO experiments (title, dir, `desc`, thumbnail) VALUES('3dbox', '3dbox', '', ''); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T15:24:56.140

`desc`在 mysql 中保留，必须标识为：

```
INSERT INTO experiments (title, dir, `desc`, thumbnail) VALUES('3dbox', '3dbox', '', '') 
```

# java - Netbeans GUI 设计器无法选择空标签

> ID：14141824
> 
> 赞同：1
> 
> 时间：2013-01-03T15:23:01.473
> 
> 标签：java, user-interface, netbeans

我有一个我正在设计的 GUI，并在标签中删除了文本。现在我无法选择标签。我找不到选择它的方法。在 jformdesigner（我通常使用）中，它具有所有组件的树结构，但是，它们在标准的 netbeans 设计器中与此完全不同。同样对于烦人的设计师，我无法删除它的代码，因为它不会让我！！！

我确信有一些东西会显示我框架中的所有组件，但不确定它是什么以及如何使用它，所以非常感谢所有答案

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T15:25:55.380

如果它是默认的 Netbeans GUI 编辑器。您可以在导航器窗口中找到元素树。窗口->导航->导航器。（适用于 Netbeans 7.2）

# reporting-services - SSRS 中的无人值守执行账户

> ID：14141825
> 
> 赞同：10
> 
> 时间：2013-01-03T15:23:02.703
> 
> 标签：reporting-services

Q1：为什么我想要一个无人值守的执行账户？

Q2：如果我不使用无人值守执行帐户，使用哪个帐户来运行报告？

Q3：如果我在运行报表时收到以下错误消息：“报表服务器遇到配置错误。无人值守执行帐户登录失败。（rsServerConfigurationError）登录失败。请确保用户名和密码正确。（rsLogonFailed ) 登录失败：未知用户名或密码错误”。

我了解无人值守执行帐户的用户名和/或密码错误。但是，该用户名和密码在哪里使用？我的意思是，是否应该在 SQL Server 中添加无人参与的执行帐户，还是将用户名和密码存储在报告中？即使在 SSRS 配置工具中更改用户名和密码，报告也不会运行。那么，旧帐户信息似乎存储在某个地方？

我一直在谷歌搜索，但我没有得到大局。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T16:22:57.757

[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms156302.aspx)对此有非常详细的信息。

从那你的问题的答案是：

**Q1：**如果您不想为数据源设置凭据并且希望数据源即使在用户无法输入其凭据（订阅或其他计划执行）时也能正常工作，则应设置无人参与执行帐户。来自链接的 MSDN文章：

> 无人值守的报表处理帐户主要用于连接到外部服务器，而不是作为数据库服务器的登录名。如果要使用帐户凭据登录数据库，则必须在连接字符串中指定凭据。如果数据库服务器支持 Windows 集成安全且用于无人值守报表处理的帐户具有读取数据库的权限，则可以指定 Integrated Security=SSPI。

大多数 SSRS 安装不需要无人参与的执行帐户。他们使用数据源中的“安全存储在报表服务器中的凭据”选项。

**Q2：**我不确定“运行报告”是什么意思，但 SSRS 服务帐户始终负责报告的呈现和交付，无论是否设置了无人值守执行帐户。与数据源的连接将使用数据源中指定的凭据。仅当数据源设置为“不需要凭据”时，才会使用无人值守的执行帐户。

**Q3：**这个账号可能根本不用，但是SSRS还是会用域检查凭证。如果您的所有数据源均未设置为“不需要凭据”，那么我建议您从 SSRS 配置中删除该帐户。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T16:14:13.230

[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms156302.aspx)可能会回答您的问题。对于第一季度“为什么？”：

> *   通过网络为使用数据库身份验证的报告发送连接请求...
> *   检索报告中使用的外部图像文件...

关于问题 2：无人值守执行帐户无法确定谁运行报告。它只是决定了以上两件事。报告由报告服务器执行，并且该进程在您配置的自己的帐户下运行。

关于问题 3：请参阅链接问题中的“如何存储帐户信息”部分。我不确定为什么配置工具中的更改不会立即生效，您可能必须单独调试（尝试重新启动一次或两次等）。如果您无法弄清楚这一点，请务必开始一个新的 SO 问题，并详细说明您的情况。

# android - 尝试添加新类时出现 Eclipse 问题

> ID：14141832
> 
> 赞同：1
> 
> 时间：2013-01-03T15:23:29.523
> 
> 标签：android, eclipse

我正在开发一个 Android 应用程序。

我想添加一个新类，子类化 java.lang.Object。这是我的程序：

文件>新建>类
选择包
键入名称（“DBCommunicator”）
单击“完成”

什么都没发生！

我在 Mac 上工作，所以完成按钮在启用时闪烁，但是当我单击它时没有任何反应。出现问题时，窗口上部甚至没有警告或通知。

![新建类对话框](../Images/ed3e725b666774ce2f4d2d4dea91e5d1.png)

我选择了所有不同的复选框和单选按钮，但仍然没有任何反应。
有人知道我错过了什么吗？

- 更新 -

add-a-class 对话框（图中的那个）没有消失，我在正确的地方单击右键/单击 File > New > Class 时选择了正确的文件夹/类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:29:34.253

当您创建新类时，这只是一种混乱。请注意已在其他项目中创建了 Class 文件，因为在创建新 Class 时可能会在 Package Explorer 中选择该项目。

要摆脱此类问题，您需要右键单击要在其中创建类的包或项目，然后在菜单中选择新建选项，然后选择类文件。

# spring-security - 使用 Spring Security 3.1.3 自定义 SecurityExpressionRoot 方法

> ID：14141834
> 
> 赞同：4
> 
> 时间：2013-01-03T15:23:39.083
> 
> 标签：spring-security

我正在将我的 Spring Security 从 3.1.0 升级到 3.1.3，并遇到了一个破坏我设置的更改。

我一直在使用自定义 SecurityExpressionRoot 来公开一种用于拦截 url 条目的方法。

```
 <http entry-point-ref="forbiddenAccessEntryPoint" use-expressions="true" create-session="never"
      access-decision-manager-ref="webAccessDecisionManager">

    <intercept-url pattern="/licenses*" access="hasProjectAuthority('LICENSES')"/> 
```

SecurityExpressionRoot 通过自定义 DefaultMethodSecurityExpressionHandler 注入。

这在 3.1.0 中运行良好，但升级到 3.1.3 后 Spring 无法评估“hasProjectAuthority”方法：

EL1004E:(pos 0)：方法调用：在 org.springframework.security.web.access.expression.WebSecurityExpressionRoot 类型上找不到方法 hasProjectAuthority(java.lang.String)

这是否移动到某个地方？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T15:50:29.133

*   尝试将您的代码从自定义 SecurityExpressionRoot 移动到自定义 WebSecurityExpressionRoot。
*   确保您的自定义 WebSecurityExpressionRoot 通过**DefaultWebSecurityExpressionHandler.createSecurityExpressionRoot注入到您的 WebExpressionVoter**

您的 xml 可能如下所示：

```
<security:http access-decision-manager-ref="customAccessDecisionManagerBean">
    ....
<security:http/>

<bean id="customWebSecurityExpressionHandler" class="com.domain.security.CustomWebSecurityExpressionHandler"/>
<bean id="customAccessDecisionManagerBean" class="org.springframework.security.access.vote.AffirmativeBased">
    <property name="decisionVoters">
        <list>
            <bean class="org.springframework.security.web.access.expression.WebExpressionVoter">
                <property name="expressionHandler" ref="customWebSecurityExpressionHandler" />
            </bean>
        </list>
    </property>
</bean> 
```

# jquery-ui - 使用带有 KnockoutJS 的小时/分钟下拉菜单的 jQuery UI 日期选择器

> ID：14141839
> 
> 赞同：1
> 
> 时间：2013-01-03T15:24:09.347
> 
> 标签：jquery-ui, knockout.js

我有一个看起来像这样的视图模型：

```
var ViewModel = function() {
    var self = this;

    self.hourOptions = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23];
    self.minuteOptions = [0, 15, 30, 45];

    self.formatTimeOption = function(hour) {
        if (hour < 10) return "0" + hour;
            return hour.toString();
    };

    self.startDate = ko.observable(null);

    self.startDateHour = ko.computed({
        read: function() {
            return new Date(self.startDate()).getHours();
        },
        write: function(value) {
            var newDate = new Date(self.startDate());
            newDate.setHours(value);
            self.startDate(newDate);
        }
    });

    self.startDateMinute = ko.computed({
        read: function() {
            return new Date(self.startDate()).getMinutes();
        },
        write: function(value) {
            var newDate = new Date(self.startDate());
            newDate.setMinutes(value);
            self.startDate(newDate);
        }
    });
}; 
```

如您所见，我有一个可写的计算 observable，它在更新时更新 startDate 小时/分钟。
这是有效的，但是当它这样做时，`datepicker`输入字段会显示日期的长格式，而不是（例如）

> 2013 年 1 月 3 日

JSFiddle 可以在这里找到：http: [//jsfiddle.net/alexjamesbrown/2kSpL/9/](http://jsfiddle.net/alexjamesbrown/2kSpL/9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:35:34.297

我通过添加以下自定义绑定处理程序解决了这个问题，取自[this answer](https://stackoverflow.com/a/6613255/131809)

```
ko.bindingHandlers.datepicker = {
    init: function(element, valueAccessor, allBindingsAccessor) {
        //initialize datepicker with some optional options
        var options = allBindingsAccessor().datepickerOptions || {};
        $(element).datepicker(options);

        //handle the field changing
        ko.utils.registerEventHandler(element, "change", function() {
            var observable = valueAccessor();
            observable($(element).datepicker("getDate"));
        });

        //handle disposal (if KO removes by the template binding)
        ko.utils.domNodeDisposal.addDisposeCallback(element, function() {
            $(element).datepicker("destroy");
        });

    },
    update: function(element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor()),
            current = $(element).datepicker("getDate");

        if (value - current !== 0) {
            $(element).datepicker("setDate", value);
        }
    }
}; 
```

这是一个有效的 JSFiddle：http:
[//jsfiddle.net/alexjamesbrown/v6hdS/](http://jsfiddle.net/alexjamesbrown/v6hdS/)

# ios - 如何在传递给下一个响应者之前更改 UITouch 的位置

> ID：14141846
> 
> 赞同：1
> 
> 时间：2013-01-03T15:24:36.600
> 
> 标签：ios, uiview

我有一个父 UIView 和一个子 UIView，我想让触摸从子传递到父，并由两个视图处理。

```
y--------------
| parent      |
|   x------   |
|   |child|   |
|   |_____|   |
|_____________| 
```

所以在子视图中，我覆盖：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    // child touch handle 
    // ...
    // parent touch handle
    [self.nextResponder touchesBegan:touches withEvent:event];
} 
```

~~但是当我触摸孩子中的“x”时，它会转发给父母中的“y”（相对于父母）。我想要一个通过效果（孩子中的`x`，父母中的`x`），所以我需要在转发之前更改触摸的位置，对吗？我该怎么做？~~

谢谢@Fogmeister。就是这样。

UITouch 现在可以传递给父级。在父母的`touchesBegan`，打电话

```
[touch locationInView:self] 
```

获取触摸位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:58:37.567

**TL:博士**

不要进行任何转换，只需使用 locationInView: 方法。

**长版**

为此，您可以使用代码 locationInView: 像这样...

```
UITouch *touch = [touches anyObject]; //assuming there is just one touch.

CGPoint touchPoint = [touch locationInView:someView]; 
```

这会将触摸的屏幕坐标转换为您传入的视图中的坐标。

即，如果用户在子视图中点击点 (10, 10)，然后您将其传递给下一个响应者，即父级。当你运行 [touch locationInView:parentView] 时，你会得到一个类似于 (60, 60) 的点（从你的图表中粗略猜测）。

**locationInView 的 UITouch 文档**

locationInView：返回给定视图坐标系中接收器的当前位置。

-(CGPoint)locationInView:(UIView *)view

参数

看法

您希望触摸位于其坐标系中的视图对象。处理触摸的自定义视图可以指定 self 以在其自己的坐标系中获取触摸位置。传递 nil 以获取窗口坐标中的触摸位置。

返回值

指定接收器在视野中的位置的点。

讨论

此方法返回 UITouch 对象在指定视图坐标系中的当前位置。因为触摸对象可能已经从另一个视图转发到一个视图，**所以此方法执行任何必要的触摸位置到指定视图坐标系的转换。**

**例子**

您有一个名为 parentView frame (0, 0, 320, 480) 的视图，即整个屏幕。这有一个名为 childView frame (50, 50, 100, 100) 的子视图。

**在子视图中**

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];

    CGPoint touchLocation = [touch locationInView:self];

    NSLog(@"Child touch point = (%f, %f).", touchLocation.x, touchLocation.y);

    [self.nextResponder touchesBegan:touches withEvent:event];
} 
```

**在父视图中**

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];

    CGPoint touchLocation = [touch locationInView:self];

    NSLog(@"Parent touch point = (%f, %f).", touchLocation.x, touchLocation.y);
} 
```

**现在...*

用户在子视图的正中心按下屏幕。

该程序的输出将是...

```
Child touch point = (50, 50). //i.e. this is the center of the child view relative to the **child view**.
Parent touch point = (150, 150). //i.e. this is the center of the child view relative to the **parent view**. 
```

我根本没有进行任何转换。方法 locationInView 为您完成所有这些工作。我认为您正试图使其复杂化。

# javascript - Primefaces 3.4.2 中的 p:selectOneMenu 出错

> ID：14141849
> 
> 赞同：5
> 
> 时间：2013-01-03T15:24:44.683
> 
> 标签：javascript, jquery, jsf-2, primefaces, selectonemenu

我最近将 Primefaces 从 3.4 更新到 3.4.2，现在我在某些有`p:selectOneMenu`组件的页面上遇到了问题。我在 JavaScript 控制台中看到错误，上面写着：`TypeError: e.offset(...) is undefined`. 此错误会在页面加载时立即记录。

有谁知道是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T10:22:33.560

好的，经过很长时间，终于弄清楚发生了什么。在 Primefaces 3.4.2 中，行为`p:selectOneMenu`稍有改变，这样在页面加载后立即触发**change事件。**当我们有完全 empty 时，这个问题就会显现出来`p:selectOneMenu`，这意味着`value`of`f:selectItems`是 null，并且没有`f:selectItem`for empty 选项。在这种情况下，我们可以在控制台中看到错误`TypeError: e.offset(...) is undefined`，并且 javascript 从那时起就没有用了，再也没有任何效果了。现在它必须是空`f:selectItem`的，或者至少有一个元素`f:selectItems`。

# python - python for循环元组索引超出范围

> ID：14141852
> 
> 赞同：1
> 
> 时间：2013-01-03T15:24:51.190
> 
> 标签：python

我仍在尝试掌握 python 的窍门，所以请耐心等待。请。我有这段代码，我正在使用一本书。这本书没有正确显示代码中的空白，所以间距是我最好的猜测。此代码应该将 MySQL 查询的结果分解为更易读的格式。

```
if form is True:
columns_query = """DESCRIBE %s""" % (table)
print columns_query
columns_command = cursor.execute(columns_query)
headers = cursor.fetchall()
column_list = []
for record in headers:
    column_list.append(record[0])
output=""
for record in results:
    output = output + "===================================\n\n"
for field_no in xrange(0, len(column_list)):
    output = output + column_list[field_no] + ": " + str(record[field_no]) + "\n"
output = output + "\n" 
```

当我尝试运行它时，我得到以下信息：

```
Traceback (most recent call last):
  File "odata_search.py", line 46, in <module>
    output = output + column_list[field_no] + ": " + str(record[field_no]) + "\n"
IndexError: tuple index out of range 
```

它与`str(record[field_no])`代码的一部分有关，但这就是书中的样子，所以我不确定还有什么可以尝试的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:29:53.753

显然`len(record) != len(column_list)`。（具体来说，比`column_list`长*）*`record`。您是否有理由期望它们的长度相同？

一个“修复”是这样的：

```
for col,rec in zip(column_list,record):
    output += col + ": " + str(rec) + "\n" 
```

代替：

```
for field_no in xrange(0, len(column_list)):
    output = output + column_list[field_no] + ": " + str(record[field_no]) + "\n" 
```

这将截断 和 中较短的`column_list`输出`record`。

我建议在任何情况下使用`zip`而不是。`range(0,len(...))`它更加地道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T00:08:06.707

事实证明，问题既是空白，更重要的是 MySQL 查询本身。我拉的是一个列中的行列表，而不是拉一行的所有列，这是编写循环连接的内容。我将在错误查询的结果中返回的记录数不等于包含所有列的列表中的结果数。该代码还打算成为循环中的循环，因此我在顶部的间距是错误的。它应该如下所示。我在它之前添加了几行来显示我必须修改的查询：

旧语句循环如下：

```
statement = """select %s from %s where %s like '%s' limit 10""" % (column, table, column, term) 
```

应该是这样的：

```
statement = """select * from %s where %s like '%s' limit 10""" % (table, column, term)

command = cursor.execute(statement)
results = cursor.fetchall()

column_list = []
for record in results:
    column_list.append(record[0]) 
```

循环内循环：

```
if form is True:
columns_query = """DESCRIBE %s""" % (table)
columns_command = cursor.execute(columns_query)
headers = cursor.fetchall()
column_list = []
for record in headers:
    column_list.append(record[0])
output=""
for record in results:
    output = output + "===================================\n\n"
    for field_no in xrange(0, len(column_list)):
        output = output + column_list[field_no] + ": " + str(record[field_no]) + "\n"
    output = output + "\n" 
```

# linux - 带密钥且不带密码的 ssh

> ID：14141853
> 
> 赞同：1
> 
> 时间：2013-01-03T15:24:51.670
> 
> 标签：linux, ssh, ssh-keys, openssh

我想将带有 scp 的目录从服务器 A 复制到远程服务器 B。因为我想使用脚本执行此操作，所以我为服务器生成了一个私钥和一个公钥，这与 winScp 一起工作正常。

但是当我尝试用 shell/skript 复制时

```
scp -i <DIR>/key.ppk $tmpDirA/*.war $username@$server:$TmpDirB 
```

我被要求输入密码

```
Enter passphrase for key '<DIR>/key.ppk' 
```

生成密钥时，即使密码短语也是空的。

两个服务器（openSuse）都有 openSsh，协议 2。密钥是 rsa-keys

此密钥不是由服务器 A 生成的。这有关系吗？

我看不出我错过了什么。所以感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:40:40.050

您是否尝试使用 PUTTY 私钥？Openssh 不支持 putty 私钥文件，但[PUTTYgen 可以导出为 openssh 可以理解的格式](https://stackoverflow.com/questions/2224066/how-to-convert-ssh-keypairs-generated-using-puttygenwindows-into-key-pairs-use)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:30:59.910

您确定 ssh 在复制时选择了正确的密钥吗？

在 ~/.ssh 中创建一个配置文件并在那里定义不同的主机，这可以确保 ssh 选择正确的密钥。

[Linux 手册页](http://linux.die.net/man/5/ssh_config)

# php - SoundCloud API - 我可以按标签和/或流派过滤我的曲目吗？

> ID：14141857
> 
> 赞同：0
> 
> 时间：2013-01-03T15:24:56.570
> 
> 标签：php, filtering, soundcloud

我无法找到有关返回带有特定标签和/或流派的曲目的任何信息。

例如，这似乎不起作用：

`http://api.soundcloud.com/users/123/tracks.xml?genre=drums&client_id=[myClientID]`

基本上，我想检索我所有的曲目，然后按流派或关键字过滤它们。有没有办法用 GET 或 PHP 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:09:28.290

获取所有曲目，然后过滤它们。

# javascript - JS倒计时好像跑了两次

> ID：14141858
> 
> 赞同：0
> 
> 时间：2013-01-03T15:24:58.380
> 
> 标签：javascript, jquery

我在我的网站上运行以下功能。它作为一个基本计时器工作，一旦 i = 0 它应该继续执行 else 语句。然后它通过 AJAX GET 运行并将单个数字输出到 $assetID。我的问题是这似乎运行了两次。当我应该只收到一个警报时，我收到了两个警报。知道我可能做错了什么吗？

```
var i = 3;
function timer() {

    if (i <= 3 && i > 0) {

        $('#count').fadeIn();
        $('#count').attr('src', 'images/'+i+'.png');

        setTimeout(timer, 1000);

        i--;

    } else {

            //var intProcessingTimeout = 0;

            $.ajax({
                type: "GET",
                url: "index_ajax.php",
                data: "action=submit_info",
                complete: function(data){
                        //console.log(data);

                        i = 3;
                        $assetID = data.responseText.replace(/ /g,'');
                        //$assetID = $.trim($(this).text());

                        alert($assetID);

                        $('#get-ready, #count, #swf_file, #back').fadeOut('slow', function() {

                            $('#preview-poster').fadeIn();
                            $('.your_poster').fadeIn();
                            checkAssetStatusNew();

                        });

                }
          });

    }
} 
```

`timer()`在这里被调用：

```
$(".take_photo").click(function () {

    $('#preview-page, #back').fadeOut('slow', function() {

          $('#get-ready').fadeIn();
          $('#swf_file').fadeIn();

          //setTimeout(timer, 1000); //DOESNT WORK HERE - RUNS TWICE

    });

         setTimeout(timer, 1000); // WORKS HERE FOR SOME REASON

}); 
```

编辑：移动`setTimeout(timer, 1000);`淡出功能的外部似乎使它按应有的方式工作。不知道为什么它会在 fadeOut 函数中运行两次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:38:31.330

计时器块工作正常...尝试过日志...

```
Timer start...
If block...
Timer start...
If block...
Timer start...
If block...
Timer start...
Else block... 
```

完全符合预期。

尝试更换

```
complete: function(data){...} 
```

和

```
success: function(data){...},
error: function(err){...) 
```

# javascript - 具有自定义数据属性的传递函数

> ID：14141860
> 
> 赞同：8
> 
> 时间：2013-01-03T15:25:06.497
> 
> 标签：javascript, html

是否可以传递具有自定义数据属性的函数？

这不起作用：

```
<div data-myattr="hello();">
</div> 
```

```
function hello(){
    console.log('hello');
} 
```

当我获得属性时，它是一个值为“hello();”的字符串 而不是函数。如何解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-03T15:31:26.357

你可以这样做：

```
<div data-myattr="hello"></div> 
```

```
function hello(){
    console.log('hello');
}

function executeFunctionFromData(){
    var d = 'hello' // Save `data-myattr` to d; (Obviously, this is just a hardcoded value as an example)
    window[d](); // Execute the function.
} 
```

这是有效的，因为函数`hello`是在全局范围内定义的，因此是`window`对象的属性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T23:04:07.973

```
<div id='some' data-my-function="function(x){console.log(x);}"></div> 
```

js：

```
var myfunction = $('#some').data('my-function');

if(myfunction != undefined){     
    eval("myfunction = "+myfunction, myfunction);    
}

if(typeof myfunction ==="function") {
    myfunction('Cristo Rabani!');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-02T07:02:08.033

使用 Webpack。

```
<div data-func="funcName"></div> 
```

```
window.funcName = function() {}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T15:30:42.127

使用评估：

```
eval("alert('hello');"); 
```

会显示你好；

# c# - 如何在 Windows 窗体 c# 中的 DataRepeater 中绑定 userControls？

> ID：14141869
> 
> 赞同：1
> 
> 时间：2013-01-03T15:25:48.500
> 
> 标签：c#, winforms, dataset, datarepeater

如何在 Windows 窗体 c# 中的 DataRepeater 中绑定 userControls？

我不想使用这种方法： http: [//blogs.msdn.com/b/vsdata/archive/2009/08/12/datarepeater-control-for-windows-forms.aspx](http://blogs.msdn.com/b/vsdata/archive/2009/08/12/datarepeater-control-for-windows-forms.aspx)但我想进行绑定以编程方式从 DataSet/DataTable 中获取。在中继器内仅用于测试，我放置了一个文本框和一个标签。还有一个 UserControl，它也包含两个控件：一个标签和一个文本框。到目前为止，只更新了第一个标签和文本框，但没有更新用户控件。我想念什么？

这是加载事件

```
private void DataRepeaterForm_Load(object sender, EventArgs e)
        {
            SqlConnection con = new SqlConnection("Data Source=ADRIAN-PC; Initial Catalog=AdventureWorks2008R2; Integrated Security=true;User id=;password=");

            SqlCommand cmd = new SqlCommand("Select * from Person.Person", con);
            SqlDataAdapter adapt = new SqlDataAdapter(cmd);

            DataTable items = new DataTable();
            adapt.Fill(items);

            textBox1.DataBindings.Add("Text", items, "FirstName");
            label1.DataBindings.Add("Text", items, "LastName");

            TextBox myUcTextBox1 = (TextBox)myUC1.Controls.Find("textBox1", true).First();

            if( myUcTextBox1 != null)
                myUcTextBox1.DataBindings.Add("Text", items, "LastName");

            dataRepeater1.DataSource = items;
        } 
```

我还应该使用其他事件，例如 DrawItem, ... 吗？问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:45:36.600

使用[BindingSource](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.aspx)添加绑定：

```
BindingSource bindingSource1 = new BindingSource();
bindingSource1.DataSource = items;
textBox1.DataBindings.Add("Text", bindingSource1, "FirstName");
label1.DataBindings.Add("Text", bindingSource1, "LastName");
dataRepeater1.DataSource = bindingSource1; 
```

# android - Google Maps Android API：显示保存在数据库中的标记

> ID：14141875
> 
> 赞同：-1
> 
> 时间：2013-01-03T15:26:10.557
> 
> 标签：android, google-maps

我是google maps android api的新手，我想知道一件事：它可以显示坐标保存在db中的标记（点，项目，如你所愿）吗？比如说，我在地图上标记了一天的位置，它保存在数据库中，最后，在一天结束时，我可以查看我去过的所有地点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:30:25.740

您可以查询您的数据库并使用该信息来填充`ItemizedOverlay`（Maps V1）或创建一系列标记（Maps V2），只要您认为合适。

# crystal-reports - 强制一个部分总是打印在水晶报表的奇数页上

> ID：14141877
> 
> 赞同：6
> 
> 时间：2013-01-03T15:26:15.817
> 
> 标签：crystal-reports, footer, show-hide

我有一张使用水晶报表的发票，我想对其进行调整，但似乎无法弄清楚。

我有一张底部有贴纸的纸（用来贴在盒子等上面）。我有一个标签，它是报告上的报告页脚，始终打印在页面底部，以便它适合贴纸。在发票的背面，我打印了退货政策和其他信息，这样我们就可以节省纸张。发票上有物品和价格清单，通常没有问题。然而，每隔一段时间就会有太多的项目，以至于它会将标签强制到下一页（即贴纸的背面）。

```
 --------------------------------------------------------------------
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |        Item 1       Price                                         |
    |        Item 2       Price                                         |
    |        Item 3       Price                                         |
    |        Item 4       Price                                         |
    |        Item 5       Price                                         |
    |        Item 6       Price                                         |
    |        etc.                                                       |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |-------------------------------------------------------------------|
    |                                                                   |
    |                                                                   |
    |                                                                   |
    |                            Sticker                                |
    |                                                                   |
    |                                                                   |
    |                                                                   |
    --------------------------------------------------------------------- 
```

问：有没有办法强制报表页脚只打印在奇数页上，以便标签始终在不干胶标签上？

我尝试过的事情：

1.  在标签部分，如果 pagenumber mod 2 = 0，我尝试了“之前的新页面”

2.  在标签上方创建一个新的报表页脚部分，如果 pagenumber mod 2 = 0，则该标签与打印新页面的标签大小相同，如果 pagenumber mod 2 = 1，则被抑制。我尝试了几种变体，即使该部分始终打印在页面底部，强制标签打印在下一页的底部以及类似的东西，但没有一个起作用。

也许我走在正确的轨道上并且错过了一些简单的东西，或者我什至没有接近。无论哪种方式，任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:53:43.053

如果我理解正确，请尝试此解决方案

将贴纸移动到页脚并将其隐藏在奇数页上。

步骤：打开报表设计模式

1.  将贴纸复制到页脚。
2.  去科专家
3.  如果 pagenumber mod 2 = 0，则在公式和位置上抑制 [x-2]
4.  运行报告

# jquery - 是否可以将 jQuery 中的悬停元素应用于具有显示和隐藏功能的两个 div？

> ID：14141878
> 
> 赞同：8
> 
> 时间：2013-01-03T15:26:16.717
> 
> 标签：jquery, html, hover, hide, show

当我在我的 div 上使用显示和隐藏功能时，会有一些闪烁。我现在正在使用以下代码：

```
$(document).ready(function(){
  $("#tekstvanitem-1").hide();
  $("#thumbnail-1").hover(function(){
   $("#tekstvanitem-1").show();
   },function(){
   $("#tekstvanitem-1").hide();

 });
}); 
```

问题是当我翻转 thumbnail-1 时它显示 tekstvanitem-1。但是因为 tekstvanitem-1 在 thumbnail-1 上弹出，所以它看起来像是在闪烁，因为我不再在 thumbnail-1 上。所以这是一个循环。

当我的鼠标在 thumbnail-1 上或我的鼠标在 tekstvanitem-1 上时，是否可以设置悬停元素？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T15:29:03.197

当然。只需放入`#tekstvanitem-1`选择器...

```
$(document).ready(function(){
    $("#tekstvanitem-1").hide();
    $("#thumbnail-1, #tekstvanitem-1").hover(function(){
        $("#tekstvanitem-1").show();
    },function(){
        $("#tekstvanitem-1").hide();
    });
}); 
```

# python - 如何将对象作为 django 模板标签的多个参数

> ID：14141882
> 
> 赞同：0
> 
> 时间：2013-01-03T15:26:35.457
> 
> 标签：python, django, django-templates

我有两个`lists`。将这两个传递给自定义模板标签后，它应该压缩它们并返回对象。

可能吗？如果是这样怎么做？

相应的操作是：

```
def zip_tag(arg1, arg2):
    return zip(arg1, arg2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:31:30.350

正如乔在评论中所说，我会考虑在视图而不是模板中压缩列表。但是，应该可以在模板中使用[分配标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#assignment-tags)（未经测试的代码）来做到这一点：

```
@register.assignment_tag
def zip_tag(arg1, arg2):
    return zip(arg1, arg2) 
```

您将在模板中使用它，如下所示：

```
{% zip_tag arg1 arg2 as zipped %}
<ul>
{% for x, y in zipped %}
  <li>x, y<li>
{% endfor %}
</ul> 
```

# php - 从数据库加载折线坐标并将其显示在地图中

> ID：14141886
> 
> 赞同：0
> 
> 时间：2013-01-03T15:26:45.000
> 
> 标签：php, javascript, database, google-maps

首先，我是使用 Google Maps API 开发的初学者，并且想知道在地图中显示由折线制成的路线的最佳方式是什么，该路线从 mysql 数据库中的表中获取其坐标？

数据库有一个名为“routes”的表，其中包含以下字段

id route_type user_id 标题描述

另一个名为“route_dots”的表包含所有路线的所有坐标，每条路线都有不同的路线 ID

id route_id 纬度 lng

在其他网站上，我找到了一个解决方案，我可以生成一个 JSON 文件，其中包含路线的所有信息，例如 LAT 和 LNG 坐标、标题、描述，然后让地图读取该信息以显示路线。我使用一个名为 getjson.php 的 php 文件做到了这一点，其中包含以下代码..

```
<?php
require 'con_mapas.php';
try {
$db = new PDO($dsn, $dbuser, $dbpass);
$db->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
$sth = $db->query("SELECT * FROM spots");
$locations = $sth->fetchAll();

echo json_encode( $locations );

} catch (Exception $e) {
    echo $e->getMessage();
}

?> 
```

该文件运行良好，并使用从数据库中获取的信息生成 JSON，但我的问题是，我如何在地图中显示所有这些信息（绘制为折线的路线，带有包含标题和描述的信息窗口？应该注意的是，存储在数据库中的每个纬度/经度坐标都有一个名为“route_id”的字段，该字段的值可以是 A、B 或 C。我想做的是在地图上显示不同的路线，每个路线对应一个不同的“route_id”值。

如何做到这一点？你能帮我写代码吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:41:17.070

您可以使用一组 lat/lng 绘制折线。

```
 var flightPlanCoordinates = [
    new google.maps.LatLng(37.772323, -122.214897),
    new google.maps.LatLng(21.291982, -157.821856),
    new google.maps.LatLng(-18.142599, 178.431),
    new google.maps.LatLng(-27.46758, 153.027892)
  ];
  var flightPath = new google.maps.Polyline({
    path: flightPlanCoordinates,
    strokeColor: "#FF0000",
    strokeOpacity: 1.0,
    strokeWeight: 2
  }); 
```

[文档示例](https://developers.google.com/maps/documentation/javascript/overlays#Polylines)

# visual-studio-2010 - Visual Studio 2010：“源代码管理 - 无法访问数据库”

> ID：14141889
> 
> 赞同：1
> 
> 时间：2013-01-03T15:26:48.827
> 
> 标签：visual-studio-2010, clearcase

我们团队在这里工作时使用 ClearCase，我绝对鄙视 ClearCase Visual Studio 插件。对我来说，这是一个不自然的工作流程。结果，我卸载了 ClearCase 插件，只使用了 cleartool 命令行实用程序，这大大提高了我的工作效率。

然而，我现在遇到了新的烦恼。我们所有的项目文件都配置为使用 Visual Studio 源代码控制钩子，所以当我第一次打开项目时，我会收到一条非常烦人的错误消息：

```
Source Control - Unable To Access Database

The associated source control plug-in is not installed or could not be initialized.
Common causes for this error include server unavailability and/or incorrect workspace mappings.

O Temporarily work uncontrolled
o Permanentnly remove source control association bindings 
```

给出的两个选项都不是我真正想做的，因为每次打开项目时默认的临时解决方案都会让我出错，而“永久”解决方案会劫持我的解决方案文件。

或者，我已经转到工具 -> 选项 -> 源代码管理 -> 插件选择 -> 无。这仍然会导致一条 Visual Studio 消息，尽管它稍微不那么烦人。

我有哪些选择？是否可以为 Visual Studio 编写一个插件来完全消除这种麻烦？*我的意思是，我可以编写一个什么都不做*的源代码控制插件吗？

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T05:02:37.483

I think the issue here is Visual Studio was installed after ClearCase installation. I have faced similar issue and the only option is to un-install ClearCase and reinstall it.*

# c# - 至少一个对象必须实现 IComparable

> ID：14141891
> 
> 赞同：54
> 
> 时间：2013-01-03T15:26:53.027
> 
> 标签：c#

```
using System;
using System.Xml;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            SortedSet<Player> PlayerList = new SortedSet<Player>();

            while (true)
            {
                string Input;
                Console.WriteLine("What would you like to do?");
                Console.WriteLine("1\. Create new player and score.");
                Console.WriteLine("2\. Display Highscores.");
                Console.WriteLine("3\. Write out to XML file.");
                Console.Write("Input Number: ");
                Input = Console.ReadLine();
                if (Input == "1")
                {
                    Player player = new Player();
                    string PlayerName;
                    string Score;

                    Console.WriteLine();
                    Console.WriteLine("-=CREATE NEW PLAYER=-");
                    Console.Write("Player name: ");
                    PlayerName = Console.ReadLine();
                    Console.Write("Player score: ");
                    Score = Console.ReadLine();

                    player.Name = PlayerName;
                    player.Score = Convert.ToInt32(Score);

                    //====================================
                    //ERROR OCCURS HERE
                    //====================================
                    PlayerList.Add(player);

                    Console.WriteLine("Player \"" + player.Name + "\" with the score of \"" + player.Score + "\" has been created successfully!" );
                    Console.WriteLine();
                }
                else
                {
                    Console.WriteLine("INVALID INPUT");
                }
            }
        }
    }
} 
```

所以我不断得到“

> 至少一个对象必须实现 IComparable。

“当尝试添加第二个玩家时，第一个有效，但第二个无效。我也必须使用`SortedSet`，因为这是工作的要求，它是学校作业。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-01-03T15:29:13.320

好吧，您正在尝试使用`SortedSet<>`... 这意味着您关心排序。但是听上去你的`Player`类型没有实现`IComparable<Player>`. 那么您希望看到什么样的排序顺序？

基本上，您需要告诉您的`Player`代码如何将一个玩家与另一个玩家进行比较。或者，您可以在`IComparer<Player>`其他地方实现，并将该比较传递给构造函数`SortedSet<>`以指示您希望玩家的顺序。例如，您可以：

```
public class PlayerNameComparer : IComparer<Player>
{
    public int Compare(Player x, Player y)
    {
        // TODO: Handle x or y being null, or them not having names
        return x.Name.CompareTo(y.Name);
    }
} 
```

然后：

```
// Note name change to follow conventions, and also to remove the
// implication that it's a list when it's actually a set...
SortedSet<Player> players = new SortedSet<Player>(new PlayerNameComparer()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-09-13T09:28:44.173

我想这是对这个错误的更一般的答案。

此行将因您收到的错误而失败：

```
Items.OrderByDescending(t => t.PointXYZ); 
```

但是，您可以指定如何直接比较它：

```
Items.OrderByDescending(t => t.PointXYZ.DistanceTo(SomeOtherPoint)) 
```

然后你不需要 IComparable 接口。取决于您使用的 API。就我而言，我有一个 Point 和 DistanceTo 方法。(Revit API) 但是整数应该更容易确定“大小/位置”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T15:28:32.270

你的 Player 类需要实现 IComparable 接口..

[http://msdn.microsoft.com/en-gb/library/system.icomparable.aspx](http://msdn.microsoft.com/en-gb/library/system.icomparable.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T15:30:44.743

您的 Player 类必须实现 IComparable 接口。SortedSet 以排序顺序保存项目，但是如果您没有告诉它如何对它们进行排序（使用 IComparable），它怎么知道排序顺序是什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-18T15:32:43.650

有时它会在您忘记编写 order 属性时引发

```
SortedSet<Player> players = players.OrderBy(c => c); 
```

但它必须是这样的：

```
SortedSet<Player> players = players.OrderBy(c => c.PlayerName); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-03T15:28:19.130

让你的`Player`班级实现`IComparable`.

# ios - isMainThread 和 currentThread == mainThread 有什么区别？

> ID：14141892
> 
> 赞同：2
> 
> 时间：2013-01-03T15:26:59.293
> 
> 标签：ios, nsthread

我正在查看一些旧代码，并看到以下 if 语句：

```
if ([NSThread currentThread] != [NSThread mainThread]) 
```

我有一个偷偷摸摸的怀疑，这不一样

```
if (![[NSThread currentThread] isMainThread]) 
```

我很怀疑，因为我们从该字段中获得了一些崩溃报告（仅限 iOS 6），这些报告似乎是由需要在非主线程上运行的代码引起的。该代码似乎受到前一个 if 语句的保护，但考虑到我们看到的崩溃次数，我不相信。

上面的两个 if 语句是否等效，或者第一个语句是否可能由于某种原因而失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:31:04.463

这可能相同也可能不同 - 使用对象的比较结果`!=`通常没有记录。因为它是一个直接的指针比较，它只会对完全相同的对象返回 true，而不是在逻辑等价的情况下。这就是为什么您应该始终使用它们专用的相等和比较方法来比较对象。

（在这里，你很有可能它们是相同的，以防`+ [NSThread mainThread]`是单例，但这是一个实现细节——你不应该依赖它，即使它有效/似乎有效。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:01:44.740

> [NSThread currentThread] 如何返回同一线程的不同实例？

文档不保证返回的`NSThread`实例总是相同的。一个假设的实现可能是：

```
+ (NSThread *)currentThread {
    return [[NSThread alloc] initWithPrivateIdentifier:pthread_self()];
} 
```

实际的实现不太可能像这样工作。我的直觉甚至说比较身份是安全的——但文档不支持这一点。

> 给定线程是否可以有多个实例？

该文件没有说明相反的情况。所以，是的，这至少是可以想象的。

> 我正在尝试确定这是否真的有机会修复我无法重现的崩溃。

实际上，在实践中，我怀疑这`[NSThread currentThread] != [NSThread mainThread]`与 不同`+[NSThread isMainThread]`，但这只是我的感觉。

# curl - curl 重用 https 连接会话

> ID：14141895
> 
> 赞同：1
> 
> 时间：2013-01-03T15:27:12.087
> 
> 标签：curl, https, libcurl

我已经用 openssl 构建了 curl 并且能够执行 https 连接。

现在每次 curl 建立 TLS 连接时，它都会再次握手。

我需要使用具有服务器先前连接会话 ID 的客户端并在下一个请求中使用它。我已经尝试了以下选项，但每次尝试仍然要进行新的握手

```
 curl_easy_setopt(curl, CURLOPT_URL, https://127.0.0.1);
  curl_easy_setopt(curl, CURLOPT_WRITEHEADER, headerfile);

  curl_easy_setopt(curl,CURLOPT_SSLCERTTYPE,"PEM");

  curl_easy_setopt(curl,CURLOPT_SSLCERT,"My.cert");

  curl_easy_setopt(curl,CURLOPT_SSLKEYTYPE,"PEM");

  curl_easy_setopt(curl,CURLOPT_SSLKEY,"My.Key");

  curl_easy_setopt(curl,CURLOPT_CAINFO,".");

  curl_easy_setopt(curl,CURLOPT_SSL_VERIFYPEER,1L);

  curl_easy_setopt(curl, CURLOPT_COOKIEJAR,"seesion.id") 

  res = curl_easy_perform(curl);

  if(res != CURLE_OK)
{
    fprintf(stderr, "curl_easy_perform() failed: %s\n",

 }

curl_easy_cleanup(curl); 
```

我试过用 curl 做这个，但不能，有人可以建议我如何用 cCURL 做这个 ..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:18:37.093

在后续请求中重复使用相同的 curl 句柄！不要在它们之间再次调用[curl_easy_cleanup](http://curl.haxx.se/libcurl/c/curl_easy_cleanup.html) (curl) 和[curl_easy_init](http://curl.haxx.se/libcurl/c/curl_easy_init.html) ()。

# java - View.setBackground() 设置 ImageButton 的背景？

> ID：14141897
> 
> 赞同：0
> 
> 时间：2013-01-03T15:27:18.090
> 
> 标签：java, android

我有一个 ImageButton：

```
<ImageButton 
android:id="@+id/nextPageB"
android:layout_width="50dp"
android:layout_width="50dp"
android:layout_alignParentBottom="True"
android:contentDescription="@string/nextPage"
android:onClick="NextPage"
android:src="@drawable/ic_launcher"
/> 
```

这是从我的主要活动开始的单独活动的一部分：

```
Intent intent = new Intent(this, BookRead.class);
startActivity(intent); 
```

一旦进入新活动，我在 ImageButton 单击时调用 NextPage 方法：

```
public void NextPage(View view)
{
    view.setBackgroud(res.getDrawable(R.Drawable.MyNewImage));
} 
```

'res' 在我的新活动中的 onCreate 方法中定义：

```
res = this.getResources(); 
```

出于某种原因，当我单击 ImageButton 时，它会更改 ImageButton 本身的背景而不是活动布局。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:32:53.637

imagebutton 也是一个视图，您可能正在将 imagebutton 视图传递给 NextPage 方法。

您可以通过从 XML 引用它来获得正确的视图，也可以执行 view.getParent() 之类的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T15:33:02.480

onClick 方法接收实际点击的视图。

# java - 在类路径中找不到 jaxws21 前端

> ID：14141902
> 
> 赞同：3
> 
> 时间：2013-01-03T15:27:36.737
> 
> 标签：java, maven, jax-ws, cxf

由于各种原因，我需要在我的构建中试用 jaxws21 前端。所以我按照[这个答案](https://stackoverflow.com/a/14113078/1864054)的提示，添加到 wsdl 选项：

```
 <extraargs>
                    <extraarg>-fe</extraarg>
                    <extraarg>jaxws21</extraarg>
                </extraargs> 
```

但我的构建抱怨：

> 在类路径中找不到 jaxws21 前端

我该如何解决这个问题？

顺便说一句，我的 pom.xml 包括：

```
<dependency>
    <groupId>javax.xml.ws</groupId>
    <artifactId>jaxws-api</artifactId>
    <version>2.2.8</version>
</dependency> 
```

这可能是罪魁祸首吗？如果是这样，我应该将其更改为哪个版本？

**更新：**我尝试将（在该依赖项中）更改`2.2.8`为，`2.1`但我仍然遇到同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:26:20.317

是的。[就是](http://mail-archives.apache.org/mod_mbox/cxf-users/201203.mbox/%3C2771153.DNJ5AMHGsK@dilbert.dankulp.com%3E)这样。该`-fe`标志仅接受 CXF **2.3.3**及更高版本（我使用的是 2.2.7）

# sql-server - 如何通过Sql Server将多行分组为一行

> ID：14141903
> 
> 赞同：1
> 
> 时间：2013-01-03T15:27:39.983
> 
> 标签：sql-server, grouping

> **可能重复：**
> [在 Microsoft SQL Server 2005 中模拟 group_concat MySQL 函数？](https://stackoverflow.com/questions/451415/simulating-group-concat-mysql-function-in-microsoft-sql-server-2005)

我有 2 个像这样

**的类表：**
![在此处输入图像描述](../Images/19b431a1c4ac6ae86e503f29917d9907.png)

和**学生表：**
![在此处输入图像描述](../Images/91031b0d18dd1b3dfd2627ce46625b49.png)

我想加入两张桌子，但我想得到这样的结果
ClsName StdName
A George
B Jenifer,Anjel,Alex
C Alex,Joe,Michael

**怎么可能做到这一点？**
实际上，对于每个班级，我都希望有一排有不同的学生姓名

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T15:34:15.697

您应该能够使用以下内容：

```
select c.name ClassName,
    STUFF(( SELECT  distinct ', ' + s.name
            FROM    student s
            WHERE   c.id = s.classid
            FOR XML PATH('')
            ), 1, 2, '')  Names
from class c 
```

结果：

```
ClassName | Names
A         | George
B         | Alex, Anjel, Jenifer
C         | Alex, Joe, Micheal 
```

这是我使用的工作查询：

```
;with class(id, name) as
(
    select 1, 'A'
    union all
    select 2, 'B'
    union all
    select 3, 'C'
),
student(id, name, classid) as
(
    select 1, 'Alex', 3
    union all
    select 2, 'Alex', 3
    union all
    select 3, 'Alex', 3
    union all
    select 4, 'Joe', 3
    union all
    select 5, 'Micheal', 3
    union all
    select 6, 'Jenifer', 2
    union all
    select 7, 'Anjel', 2
    union all
    select 8, 'Alex', 2
    union all
    select 9, 'George', 1
)
select c.name,
    STUFF(( SELECT  distinct ', ' + s.name
            FROM    student s
            WHERE   c.id = s.classid
            FOR XML PATH('')
            ), 1, 2, '') Names
from class c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:33:15.133

你可以试试这个：

```
SELECT 
    distinct
    S.Classid,
    (
        SELECT name + ','
        FROM Student S2
        WHERE S2.Classid = S.Classid
        FOR XML PATH('')
    ) StdName,
    C.name ClsName
FROM 
Student S INNER JOIN Class C
ON S.Classid = C.id 
```

# sql - SQL Select Case and Average

> ID：14141907
> 
> 赞同：0
> 
> 时间：2013-01-03T15:27:52.133
> 
> 标签：sql, case, average

Hello I have a table with the tenure (integer, calculated in weeks) of employees in which the tenure is automatically calculated. I'm then trying to do an average tenure per week. However I want to cap the max tenure an employee can have as 20 (in weeks).

What I've go so far is this, but it's not working:

```
SELECT week,
AVG(CASE Tenure WHEN Tenure > '20' THEN '20' ELSE Tenure END) as Tenure
FROM table
GROUP BY week
ORDER BY week 
```

Am I on the right track? Please help me here. I've tried looking at other similar questions but no success.

Thanks in advance,

Giusepe Moreno

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T15:29:53.023

Try this

```
SELECT week,
AVG(CASE WHEN Tenure > 20 THEN 20 ELSE Tenure END) 
FROM table
GROUP BY week
ORDER BY week 
```

# .htaccess - 将所有请求重定向到帖子

> ID：14141908
> 
> 赞同：0
> 
> 时间：2013-01-03T15:27:56.843
> 
> 标签：.htaccess, redirect

我正在尝试将所有页面重定向到 URL example.com/big-changes-for-2013/ 上的博客文章（包括尾部斜杠）

我不想重定向我，因为我正在处理网站的其余部分。这是我到目前为止所拥有的（这是一个 .htaccess 重定向）：

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{REQUEST_URI} !/big-changes-for-2013/$ 
RewriteCond %{REMOTE_ADDR} !^50\.137\.88\.129
RewriteRule $ /big-changes-for-2013/$ [R=302,L] 
```

阻止我被重定向的部分有效。不起作用的部分是重定向本身，这是一个无限循环。

上面的代码是基于[this](https://stackoverflow.com/questions/2361933/htaccess-how-to-redirect-all-pages-to-a-holding-page)和[this](https://stackoverflow.com/questions/3522921/htaccess-redirect-all-pages-to-single-page)的组合。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:02:29.913

解决了：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REMOTE_ADDR} !^50\.137\.88\.129
RewriteCond %{REQUEST_URI} !^/(big-changes-for-2013/)
RewriteRule ^(.*) /big-changes-for-2013/ [L,R=301]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:03:25.860

尝试

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{REMOTE_ADDR} !^50\.137\.88\.129
RewriteRule ^(?!big-changes-for-2013/$) /big-changes-for-2013/$ [R=302,L] 
```

规则正则表达式是所谓的否定前瞻断言。它的意思是“匹配除`big-changes-for-2013/$`”以外的任何东西。

# ruby-on-rails - OS X 10.8 上 Rails 应用程序中的分段错误

> ID：14141909
> 
> 赞同：2
> 
> 时间：2013-01-03T15:27:57.170
> 
> 标签：ruby-on-rails, ruby, macos, segmentation-fault

我买了一台运行 OS X 10.8 的 Macbook Pro。我已经安装`rvm`并`ruby`使用了本[指南](http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/)。

安装成功，但是当我启动 Rails 应用程序时，或者在应用程序中的页面上单击 3-4 次时，出现分段错误错误。

[这是我的错误。](https://gist.github.com/4444214)

没有关于崩溃的`~/Library/Logs/CrashReporter`报告。`/Library/Logs/CrashReporter`

我的`rvm`版本是`1.17.6`Ruby 版本`1.9.3p362 (2012-12-25 revision 38607) [x86_64-darwin12.0.0]`，带有 Rails 3.2.8。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:32:06.943

Ruby 1.9.3-p362 似乎很容易出现段错误，正如[在 Travis-CI 上多次](https://twitter.com/travisci/status/285014980363943937)看到的那样。

您应该使用较旧的补丁版本，例如 1.9.3-p327，它对我来说效果很好。

编辑：当前版本的 1.9.3（本次更新为 1.9.3-p392）也可以正常工作。

# c# - 在多个任务之间共享 TaskScheduler 实例

> ID：14141911
> 
> 赞同：0
> 
> 时间：2013-01-03T15:27:57.403
> 
> 标签：c#, task-parallel-library

我创建了一个**TaskScheduler**，并将它作为参数**传递给****两个不同的任务。**

这样做有什么问题吗？我应该为每个任务创建一个新的 TaskScheduler 实例吗？

这是示例示例（为简单起见，删除了每个任务中的实际代码）

```
var uiSch = System.Threading.Tasks.TaskScheduler.FromCurrentSynchronizationContext();

var t1 = Task.Factory.StartNew<List<Carrier>>(() =>
                    {
                        //does stuff
                    })
                    .ContinueWith(previous =>
                        {
                            //does stuff
                        },
                        System.Threading.CancellationToken.None,
                        TaskContinuationOptions.OnlyOnRanToCompletion,
                        uiSch);

var t2 = Task.Factory.StartNew<List<Logic.WarehouseLogic.Warehouse>>(() =>
                    {
                        //does stuff
                    })
                    .ContinueWith(previous =>
                        {
                            //does stuff
                        },
                        System.Threading.CancellationToken.None,
                        TaskContinuationOptions.OnlyOnRanToCompletion,
                        uiSch); 
```

> [编辑1]

我的问题部分与以下错误有关：“当前 SynchronizationContext 可能无法用作 TaskScheduler” 可以在[此处找到修复](https://stackoverflow.com/questions/4659257/how-can-synchronizationcontext-current-of-the-main-thread-become-null-in-a-windo)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T15:48:47.210

在同一个任务调度器上调度多个任务没有问题。

# java - 使用 Apache TCPMon 模拟慢速连接

> ID：14141914
> 
> 赞同：1
> 
> 时间：2013-01-03T15:28:18.873
> 
> 标签：java, performance, connection, simulation, tcpmon

我需要模拟一个慢速客户端来测试我的 Java 服务器中的一些处理。我的想法是存根一个小型 Java 客户端并获得一些工具来模拟慢速连接。在我看来，这应该足够了。

到处搜索，我发现了 Apache TCPMon，它似乎能够模拟我的减速，并决定将其投入使用。

我理解它的方式——文档非常有限——我需要创建一个充当代理的 nre TCPMon，检查“模拟慢速连接”并进行配置。好，易于。

因此，我在端口 8081 上创建了一个 TCPMon，并为 localhost:8080 打开了“HTTP 代理支持”。然后我在 localhost:8080 上运行我的 Java 服务器，据我了解，我应该能够看到（延迟的）消息将我的浏览器指向`http://localhost:8081`. 相反，当我这样做时，我所能看到的只是以下异常：

```
java.net.MalformedURLException: no protocol: lib/img/body-bg.png
    at java.net.URL.<init>(URL.java:583)
    at java.net.URL.<init>(URL.java:480)
    at java.net.URL.<init>(URL.java:429)
    at org.apache.ws.commons.tcpmon.Connection.run(Connection.java:276) 
```

我将感谢任何对此有所了解的人的帮助，并建议在客户端和服务器都在我的笔记本电脑上运行的情况下，我可以如何在上面描述的范围内使用 TCPMon。

谢谢。

# c++ - 如果无法加载纹理，则回退到纯色

> ID：14141921
> 
> 赞同：0
> 
> 时间：2013-01-03T15:28:52.577
> 
> 标签：c++, opengl, drawing, textures, fallback

我当前的渲染器通过顶点的位置和颜色绘制表单。它还不能处理纹理。

```
struct Form
{
    unsigned int Positions, Colors, Elements, Program;
}; 
```

现在我想实现纹理的能力。由于在最终游戏中不会有没有纹理但颜色的形式，我想替换颜色功能而不是开发一个并列功能。

所以渲染器现在必须通过顶点的位置和纹理坐标来绘制表单。

```
struct Form
{
    unsigned int Positions, Coordinates, Elements, Texture, Program;
}; 
```

到现在为止还挺好。但是，如果无法在没有纹理的情况下进行渲染，如果图像文件不存在或由于某种原因无法加载，我的应用程序将无法绘制表单。因此，如果无法加载图像文件，我想实现回退到给定的纯色（比如粉红色）。

在不完全开发两个并列功能的情况下，如何实现这种回退？有没有通用的方法？我希望这可以在着色器中完成。或者也许我可以将粉红色纹理发送到视频卡，然后将所有形式视为平等。可悲的是，我不知道如何实现它，或者是否有可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:32:21.703

我已经通过程序创建一个虚拟检查器纹理并将其分配给任何没有任何有效纹理的对象来解决这个问题。它不是基于顶点颜色或网格颜色，而是有效的。并且不需要更改着色器，只需几行代码即可检查空纹理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:33:26.760

如果您从没有绑定纹理的纹理单元中采样，则检索到的样本始终是白色的；在没有完整纹理绑定的情况下从纹理中采样并不是错误。因此，您可以使用该白色来使用备用颜色对其进行调制。

# mobile - 如何更改 Appixia 应用程序中选项卡的标题？

> ID：14141930
> 
> 赞同：0
> 
> 时间：2013-01-03T15:29:24.257
> 
> 标签：mobile, e-commerce, appixia

我正在使用仪表板构建一个简单的应用程序，并试图弄清楚如何控制出现在标签栏上的标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:34:39.083

好的，我知道了。要更改选项卡图标标题，我需要选择根模块，然后编辑选项卡字段，然后编辑需要更新的特定选项卡。

工作顺利。

# macos - zsh read -q 在 OSX 上坏了？

> ID：14141933
> 
> 赞同：8
> 
> 时间：2013-01-03T15:29:36.343
> 
> 标签：macos, zsh

我正在运行，`% read -q`然后键入一个不是或的单个字符。但是，设置的值不是，它是我输入的字符。`y``Y``n``$REPLY``n`

的[文档](http://zsh.sourceforge.net/Doc/Release/Shell-Builtin-Commands.html)`read -q`明确说：

> 如果这个字符是 'y' 或 'Y' 则只从终端读取一个字符并将 name 设置为 'y' ，否则设置为 'n' 。

此行为在使用 zsh 4.3.11（默认）和 5.0.0（Homebrew）的 OSX 10.7 上重现，但在 Linux（Ubuntu 12.04，zsh 4.3.10）上不重现 - 在 Linux 上`$READ`，`n`正如预期的那样，中的值为 。

另外，我尝试过在`zsh -f`相同的结果下运行（即，我认为它不在我的初始化脚本中）。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T18:50:47.817

这确实是一个bug，已经有两年半了。zsh-workers 文章 27188 中的补丁无意中丢失了它。文章 30949 中的补丁。

# java - 如何在 GWT 上添加外部 JavaScript 库？

> ID：14141934
> 
> 赞同：1
> 
> 时间：2013-01-03T15:29:35.720
> 
> 标签：java, javascript, html, gwt, wrapper

我正在为 GWT 使用 OpenLayers 包装器，称为[GWT-OpenLayers](http://www.gwt-openlayers.org/user-reference.html)

在用户参考页面上，它说您需要在两个文件 gwt.xml 和 .html 上添加参考

像这样在 xml 上：

```
 <inherits name='org.gwtopenmaps.openlayers.OpenLayers'/> 
```

这在 html 上

```
 <script src="http://openlayers.org/api/2.11/OpenLayers.js"></script> 
```

GWT-OpenLayers 有一个展示，我正在做展示所做的事情。但是当应用程序启动并且我尝试检查源代码时，我没有在 html 上看到 openlayers 脚本。我尝试添加其他脚本，但不幸的是，该脚本没有出现在源代码中。
**更新 01 - html 和浏览器结果：**

```
 <head>
  ...
    <script src="http://www.openlayers.org/api/OpenLayers.js"></script>
    <script type="text/javascript" language="javascript"
        src="GeoStatistics/GeoStatistics.nocache.js"></script>
    <script type="text/javascript" src="ol/OpenLayers.js"></script>
    <script src="http://www.openstreetmap.org/openlayers/OpenStreetMap.js">
    </script>
 </head> 
```

**浏览器 = Chrome** ![在此处输入图像描述](../Images/9f56798155e54a9eb7d492b9b3af2018.png)

如您所见，在 html 上添加了几个脚本，但只出现了一个。

**更新 02 - 编译后，仍然无法工作** 我刚刚编译了我的项目，并且 html 仍然没有脚本标记。

但是我已经编辑了 html 并加载了项目，并且我得到了 script 标签。所以，这是一些解决方案，如果没有任何其他方法可以使用我的脚本标签生成 html，我可以在编译后放置标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:49:36.013

脚本被加载到应用程序上下文中。您可以将 FireFox 与 FireBug 或在 Chrome 开发工具中使用。添加 gwt 开放层展示的屏幕截图，如 FireBugs 脚本选项卡中所示。

![在此处输入图像描述](../Images/94a3361d960cc4572604f2930e8feea7.png)

第 1 步 - 确保 gwt-openlayers-client 在托管模式和部署模式编译的 GWT 项目类路径中

第 2 步 - 在 gwt 模块 xml 文件中

```
<inherits name='org.gwtopenmaps.openlayers.OpenLayers' /> 
```

第 3 步 - 在 html 头标签中

```
<script src="http://openlayers.org/api/OpenLayers.js"></script>
<script src="http://openstreetmap.org/openlayers/OpenStreetMap.js"></script>
<script type="text/javascript" language="javascript"
    src="GeoStatistics/GeoStatistics.nocache.js"></script> 
```

第4步 -

```
public void onModuleLoad()
    {
        MapOptions mapOptions = new MapOptions();
        MapWidget mapWidget = new MapWidget( "400px", "300px", mapOptions );

        OSM osm_1 = OSM.Mapnik( "Mapnik" );
        OSM osm_2 = OSM.CycleMap( "CycleMap" );

        osm_1.setIsBaseLayer( true );
        osm_2.setIsBaseLayer( true );

        LonLat lonLat = new LonLat( 6.95, 50.94 );
        lonLat.transform( "EPSG:4326", "EPSG:900913" );

        Map map = mapWidget.getMap();
        map.addLayer( osm_1 );
        map.addLayer( osm_2 );
        map.addControl( new LayerSwitcher() );
        map.addControl( new MousePosition() );
        map.setCenter( lonLat, 12 );
        RootPanel.get().add( mapWidget );
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T16:21:10.417

发现了问题。

Maven 的 GWT 插件没有编译我的主 .html(gwt:compile)

但是，这不是一个真正的问题，因为主 html 几乎没有更新，所以，只需将新的 .html 放在我的文件夹中，这是一个解决方案，不是很好，而是一个解决方案。

# architecture - 是否有任何约定以图形方式描述软件如何为用户工作？

> ID：14141939
> 
> 赞同：0
> 
> 时间：2013-01-03T15:29:56.127
> 
> 标签：architecture, uml, modeling

我不是要 UML，UML 主要是为软件架构师、程序员和集成专家服务的。我在问是否有任何传统的方式来向用户描述软件，例如管理员？

想象一个复杂的软件包，它包含许多模块、小型子程序、数据库引擎等。如何描述模块依赖关系、子模块如何工作以及它们做了​​什么而不深入了解实现细节？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:25:12.517

我通常会拉出 Visio 的默认符号。DB通常用黄色罐头来描绘，还有一些其他的罐头非常广泛传播。但是，我不确定是否有明确的约定，也不确定是否涵盖了更古怪的方面。

恕我直言，如果你让观众理解你的意思，你就成功了。

# wpf - WPF 覆盖元数据前台依赖属性

> ID：14141943
> 
> 赞同：2
> 
> 时间：2013-01-03T15:30:01.353
> 
> 标签：wpf

我希望有人能对我的问题有所了解，因为我到处搜索并且找不到对此的解释或解决方案。

为了解释这个问题，我创建了一个名为 Label 的类，它继承自 TextBlock，我想覆盖默认的前景画笔、字体粗细、字体大小和字体系列；除了前景之外，所有覆盖都起作用（我可以毫无问题地覆盖背景，因此它是特定于前景属性的东西）。

创建一个新的 WPF 应用程序并创建这个简单的类：-

```
namespace WpfApplication
{
    public class Label : TextBlock
    {
        static Label()
        {
            ForegroundProperty.OverrideMetadata(typeof(Label), new FrameworkPropertyMetadata(Brushes.Red));
            FontWeightProperty.OverrideMetadata(typeof(Label), new FrameworkPropertyMetadata(FontWeights.Bold));
            FontSizeProperty.OverrideMetadata(typeof(Label), new FrameworkPropertyMetadata(50.0));
            FontFamilyProperty.OverrideMetadata(typeof(Label), new FrameworkPropertyMetadata(new FontFamily("Calibri")));
        }
    }
} 
```

在 MainWindow.xaml 中创建这个新标签类的实例：-

```
<Grid>
    <local:Label Text="TEST" />
</Grid> 
```

您应该看到 Label 没有采用新的 Foreground 默认值，但在 SNOOP 中查看它仍然继承它的值。

据我所知，任何依赖属性都可以被覆盖，所以任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-06T19:02:55.417

```
ForegroundProperty.OverrideMetadata(typeof(LcdTextBlock), new FrameworkPropertyMetadata(new SolidColorBrush(Colors.Lime)) { Inherits = false }); 
```

这对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T15:50:45.263

一种解决方法是：

```
public class Label : TextBlock
    {
        static Label()
        {
            ForegroundProperty.OverrideMetadata(typeof(Label), new FrameworkPropertyMetadata(Brushes.Red, OnForegroundChanged));
            FontWeightProperty.OverrideMetadata(typeof(Label), new FrameworkPropertyMetadata(FontWeights.Bold));
            FontSizeProperty.OverrideMetadata(typeof(Label), new FrameworkPropertyMetadata(50.0));
            FontFamilyProperty.OverrideMetadata(typeof(Label), new FrameworkPropertyMetadata(new FontFamily("Calibri")));
        }

        private static void OnForegroundChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {

        MethodInfo mi = typeof(DependencyPropertyChangedEventArgs).GetMethod("get_OperationType",
                                                                              BindingFlags.NonPublic |
                                                                              BindingFlags.Instance);
        var v = mi.Invoke(e, null);

        if ((e.NewValue != Brushes.Red) && (v.ToString() == "Inherit"))
        {
            ((Label)d).Foreground = Brushes.Red;
        }
        else
        {
            ((Label)d).Foreground = (Brush)e.NewValue;
        }
    }
} 
```

在设计视图中的 VisualStudio 2012 上，您的代码预览以红色显示文本。有些东西在运行时改变它。但目前我不能告诉你是谁和为什么...... dafault继承价值盛行！

编辑：[这里](https://stackoverflow.com/a/8630868/520612)有一些很好的信息。

# yii - 为什么发送邮件后没有出现 javascript 弹出窗口？

> ID：14141944
> 
> 赞同：1
> 
> 时间：2013-01-03T15:30:01.953
> 
> 标签：yii

我的控制器中有这种情况，但我想知道为什么即使邮件发送成功，javascript 警报也不会启动？

```
 if(mail($to,$sub,$body,$headers)){
            echo '<script>alert("Thank you for your enquiry.\nWe will get back to you soon\n");</script>';
            $this->redirect(Yii::app()->homeUrl);
        } 
```

它只是重定向到 homeUrl 并跳过警报弹出框，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:42:44.363

您应该使用[setFlash](http://www.yiiframework.com/doc/api/1.1/CWebUser#setFlash-detail)设置要显示的消息并在视图中显示此消息，您应该检查[hasFlash](http://www.yiiframework.com/doc/api/1.1/CWebUser#hasFlash-detail)和 echo [getFlash](http://www.yiiframework.com/doc/api/1.1/CWebUser#getFlash-detail)以写入消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:56:03.553

如果您想在重定向之前显示警报，您可以通过在 javascript 甚至发送到浏览器之前将重定向放在 javascript 中作为 PHP 重定向来实现这一点

```
if(mail($to,$sub,$body,$headers)){
        echo '<script>
        alert("Thank you for your enquiry.\nWe will get back to you soon\n");
        location.replace('.Yii::app()->homeUrl.');
       </script>'; 
    } 
```

Adler 已经提到的闪存消息是一个不错的选择，因此您可以在重定向页面上获取消息（以防在重定向之前显示警报并不重要）

# turnjs - TurnJS 放大和缩小

> ID：14141945
> 
> 赞同：2
> 
> 时间：2013-01-03T15:30:07.903
> 
> 标签：turnjs

我正在寻求帮助。我正在使用 TurnJS API 并使用按钮而不是在翻书上单击/点击来寻找 ZoomIn 和 ZoomOut 功能。放大和缩小需要基于因子，例如 20%。每次我单击 ZoomIn 时，它应该放大 20% 到 100，反之亦然 Zoomout。

我试图编辑 zoom.js 但没有成功。希望任何人都可以就此问题与我联系。

# json - 需要最好的 MVC 4 Web API 网格

> ID：14141951
> 
> 赞同：2
> 
> 时间：2013-01-03T15:30:25.487
> 
> 标签：json, asp.net-mvc-4, visual-studio-2012, asp.net-web-api, mustache

有人可以推荐最好的 MVC4 WEB API Grid 吗？

现在我们正在使用 Mustache 模板来显示数据。当前应用程序：MVC 4 Web API、C#.Net、Visual Studio 2012、Mustache 模板 客户希望将 Mustache 模板替换为具有所有搜索和排序功能的漂亮网格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:33:16.797

[Datatables.net](http://www.datatables.net)提供了很多功能并且被广泛使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:35:49.853

我已经成功使用 jqgrid - mvc 的许多功能和演示 -

[http://www.trirand.com/blog/](http://www.trirand.com/blog/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-09T05:42:34.753

数据表、jqgrid、kendoUI 等。从长远来看，它们会给你带来极大的挫败感和不快乐。

最好的办法是让数据看起来像一个网格，您可以完全控制并真正了解正在发生的事情并进行排序和分页等。使用 CSS 的 Bootstrap 并对 Web Api 进行 ajax 调用。

Angular 真的很好，但是你可以不使用 Angular 开始。我参与了 40 个项目，其中我提到的 3 个项目让包括我自己在内的许多人都非常头疼。

# wpf - WPF 嵌套对象数据绑定

> ID：14141952
> 
> 赞同：1
> 
> 时间：2013-01-03T15:30:28.157
> 
> 标签：wpf, data-binding

您好我在理解 WPF 数据绑定与嵌套对象时遇到问题。

我有一个工作组类，其中包含一个名为**ListMembers**的 User_activation 对象列表，我想显示它的属性。如何访问其嵌套属性？此类包含另一个名为**User**的对象，该对象具有其用户名，最终我想在组合框中显示用户名，而不是 WPF_test.User_activation。

下面是 XAML 代码和相应的布局：

```
<ListView x:Name="ListViewWorkgroups" VerticalAlignment="Top" Height="Auto" Width="Auto" ItemsSource="{Binding listWorkgroups}">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Width="auto" Header="Workgroup" DisplayMemberBinding="{Binding Name}"></GridViewColumn>
                        <GridViewColumn Width="auto" Header="Skills">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <ComboBox  IsSynchronizedWithCurrentItem="True" ItemsSource="{Binding ListSkills}" ></ComboBox>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn Width="auto" Header="Members">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate >
                                    <ComboBox IsSynchronizedWithCurrentItem="True" ItemsSource="{Binding ListMembers}" ></ComboBox>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                    </GridView>
                </ListView.View>
            </ListView> 
```

布局：http: [//i50.tinypic.com/ydy5h.png](http://i50.tinypic.com/ydy5h.png)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:35:16.617

您需要为 ComboBox 设置 ItemTemplate

```
<ComboBox IsSynchronizedWithCurrentItem="True" ItemsSource="{Binding ListMembers}" >
<ComboBox.ItemTemplate>
    <DataTemplate>
       <TextBlock Text="{Binding User.Username}"/>
    </DataTemplate>
</ComboBox.ItemTemplate>
</ComboBox> 
```

作为替代方案，如果您不需要任何复杂的东西，您可以绑定 DisplayMemberPath

```
<ComboBox IsSynchronizedWithCurrentItem="True" ItemsSource="{Binding ListMembers}" DisplayMemberPath="{Binding User.Username}"/> 
```

您使用“。” 像在普通 c# 代码中一样访问属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T01:44:56.453

This is just a follow-up to the previous answer. I just discovered that in Bindings, you may use a leading period in a filesystem fashion:

```
<ComboBox ItemsSource="{Binding .ListMembers}">
<DataTemplate>
   <TextBlock Text="{Binding .User.Username}"/>
</DataTemplate> 
```

That syntax adds nothing semantically, but in some cases makes the statement more readable (and XAML can *certaintly* use that!)

Here's a better example:

```
<ComboBox ItemsSource="{Binding Caliber}" DisplayMemberPath=".Thickness" /> 
```

where `Thickness` is a property of `Caliber`.

# apache - Apache ErrorDocument：显示 404 URL

> ID：14141954
> 
> 赞同：1
> 
> 时间：2013-01-03T15:30:35.463
> 
> 标签：apache, http-status-code-404, errordocument

我怀疑这无法完成，但无论如何都可以。[当您使用 Apache 指令ErrorDocument](https://httpd.apache.org/docs/2.0/mod/core.html#errordocument)将 404 File Not Found 错误重定向到自定义页面时，有没有办法在*静态*站点上显示用户尝试访问的 URL ？例如，如果您尝试：

```
http://www.fredriley.org.uk/dingbat/arsebiscuits 
```

默认的 404 错误说：

```
The requested URL /dingbat/arsebiscuits was not found on this server. 
```

所以 URL 必须在环境变量中。我可以在自定义错误文档中解决这个问题吗？我想告诉用户 URL 而不是只给他们一个通用的错误文档。我知道我可以在 PHP 中轻松做到这一点，但该站点仅包含静态 HTML 文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:07:51.317

拥有静态站点并不会阻止您拥有动态错误页面。您可以使用托管服务提供的任何服务器端技术。

如果您可以使用 PHP，您可以简单地选择一个静态模板，将其扩展名更改为`*.php`并添加一些动态片段：

```
<p><?php echo htmlspecialchars($_SERVER['REQUEST_URI']); ?></p> 
```

如果您可以使用[SSI](http://httpd.apache.org/docs/2.2/howto/ssi.html)，则非常相似：

```
<p><!--#echo var="REQUEST_URI" --></span></p> 
```

该`REQUEST_URI`变量包含用户键入的 URL 的本地部分（哈希除外）。这是一个不错的选择。

# c++ - “ANSI C”或“ANSI C++”今天仍然有意义吗？

> ID：14141956
> 
> 赞同：6
> 
> 时间：2013-01-03T15:30:42.037
> 
> 标签：c++, c, coding-style, standards, ansi-c

上次我检查时，说您使用 ANSI C 编码等于说“这是符合 C99 的代码，其中没有其他内容”。现在有了 C11 和 C++11，这种区别还存在吗？它还有某种意义吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-03T15:45:53.533

从历史上看，“ANSI C”用于表示“标准 C”，即 C89，与“K&R C”和编译器编写者发明的各种预标准变体形成对比。这就是为什么第二版。《The C Programming Language》的封面上有一个大大的红色“ANSI C”印章。

然后有一段时间“ISO C”被用来表示“新标准C”，即C99，与“ANSI C”形成对比。

这总是一个令人困惑的用法，因为 ISO 和 ANSI 都批准了 C89 和 C99。ISO 将前者批准为 C90，并在 ANSI 版本的布局上进行了一些更改，但据推测其实质内容相同。因此，“ANSI C”始终是 ISO 标准，“ISO C”始终是 ANSI 标准。唯一的区别是哪个机构负责监督标准化过程。

按照这种用法（并可能鼓励它继续使用），`-ansi`GCC 的标志相当于`-std=c90`. 它实际上意味着“C90，加上一些不与标准冲突的 GNU 扩展”。

我不知道“ANSI C”指的是 C99，但这并不意味着它没有被用来表示那个意思。

我不认为在过去 10 年中使用“ANSI C”一词对任何人都有帮助。ANSI 批准了 C11，但开始说“啊哈！好吧，在这种情况下，ANSI C 现在突然意味着 C11！”并没有帮助。我们当然可以说 C11 是当前的 ANSI C 标准，但是不能以任何合理的期望使用术语“ANSI C”，即人们会清楚地理解它是指 C11。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-03T15:34:56.337

ISO C11 和 ISO C++11 均已被批准为新的 ANSI C 和 C++ 标准。

例如，在我的 C11 ANSI 副本上，它是这样写的：

*被 INCITS（国际信息技术标准委员会）采纳为美国国家标准。ANSI 批准日期：2012 年 5 月 23 日*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-03T15:35:11.827

由于目前C 标准的¹ 3 个不同版本和 C++ 的“两个半”版本被广泛使用，我想说今天这样的术语比以往任何时候都没有意义。

* * *

1.  实际上，在给定时间只有一个“当前”C (C++) 标准，即最后一个标准，因为它取代了以前的版本。我在这里要说的是，所有这些以前的版本仍然非常相关（通常比最新版本更重要）。

# winapi - 如何捕获或防止“应用程序未能正确初始化（0x########）。单击确定以终止应用程序。”

> ID：14141957
> 
> 赞同：1
> 
> 时间：2013-01-03T15:30:43.513
> 
> 标签：winapi, createprocess

我有一个我编写的 .net 控制台应用程序，它正在使用 CreateProcess 在后台运行。当我们从没有安装 .net 的机器上运行它时，它会弹出一个窗口，上面写着“应用程序无法正确初始化 (0xc0000135)。单击确定以终止应用程序。”

我需要此应用程序在无法启动时返回错误，而不是弹出交互式消息框。有没有办法阻止它这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:00:11.383

Before calling`CreateProcess`, call `SetThreadErrorMode(SEM_FAILCRITICALERRORS)`.

# quickbooks - 在执行 JournalEntryMod 时，您是否需要提供原始 JournalEntry 中的所有信息？

> ID：14141959
> 
> 赞同：0
> 
> 时间：2013-01-03T15:30:47.900
> 
> 标签：quickbooks

IJournalEntryMod的[文档](https://member.developer.intuit.com/qbSDK-current/Common/newOSR/index.html)说此调用只需要 txnId、txnLineId 和 EditSequence。我尝试更改其中一行的帐户，但收到错误“交易不平衡”。

1.  您是否必须将现有 JournalEntry 行中的每个值复制到附加到 JournalEntryModList 的行中？
2.  您是否需要提供现有事务的所有行？（我注意到文档上的这条评论“请注意，在 mod 请求中，包括 [原文如此] 一行意味着您必须包括所有行，无论是否修改”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:12:11.117

> 您是否必须将现有 JournalEntry 行中的每个值复制到附加到 JournalEntryModList 的行中？

您不必再次发送 [JournalLineMod] 中的每个元素，但您必须至少为每一行发送 [TxnLineID]。

例如，如果你只是发送这个：

```
<JournalEntryModRq>
<JournalEntryMod>
<TxnID>ABCD1234</TxnID>
<EditSequence>1234</EditSequence>
<TxnDate>some new date here</TxnDate>
</JournalEntryMod>
</JournalEntryModRq> 
```

然后，您实际上是在告诉 QuickBooks 删除该日记帐分录中的每个现有行项目。

相反，您必须为*要保留的每个行项目发送 TxnLineID*。您未发送的任何行项目 TxnLineID 值都将从交易中删除。

所以是这样的：

```
<JournalEntryModRq>
<JournalEntryMod>
<TxnID>ABCD1234</TxnID>
<EditSequence>1234</EditSequence>
<TxnDate>some new date here</TxnDate>

<JournalLineMod>
<TxnLineID>An existing TxnLineID goes here</TxnLineID>
</JournalLineMod>
<JournalLineMod>
<TxnLineID>An existing TxnLineID goes here</TxnLineID>
</JournalLineMod>

<JournalLineMod>
 ... bla bla bla lots of new data goes here ...
</JournalLineMod>

</JournalEntryMod>
</JournalEntryModRq> 
```

# ruby-on-rails - 无法批量分配受保护的属性：title、description、cloth_type、pic Rails 3

> ID：14141961
> 
> 赞同：-4
> 
> 时间：2013-01-03T15:30:59.117
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, mass-assignment

当对 /cloth/create 进行 POST 时，我收到警告：无法批量分配受保护的属性：标题、描述、布料类型、图片

布料.rb

```
class Cloth   
  include Mongoid::Document   
  include Mongoid::Timestamps 
  include Mongoid::MultiParameterAttributes   attr_accessible :pics

  field :title   
  field :description   
  field :cloth_type   
  belongs_to :seller   
  has_many :pics

  attr_accessible :pic_attributes   
  accepts_nested_attributes_for:pics
end 
```

图片.rb

```
class Pic   
  include Mongoid::Document
  include Mongoid::Paperclip  

  has_mongoid_attached_file :image, :styles => { :medium => "300x300>", :thumb => "100x100>" },
  :storage => :cloud_files,
  :cloudfiles_credentials =>  "#{Rails.root}/config/rackspace.yml",
  :path => ":attachment/:id/:timestamp_:style.:extension"

  belongs_to :cloth
  attr_accessible :cloth_attributes

  def create        
    @cloth = Cloth.create!(params[:cloth])  
  end
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T15:42:01.160

答案可以在这里找到：http: [//api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_accessible](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_accessible)

不过，我会说明。

通过设置`attr_accessible :pic_attributes`，您正在为可以通过批量分配设置哪些属性设置白名单。换句话说，您是说**只有**您列出的属性可以通过执行诸如`cloth = Cloth.new(params[:cloth])`. 您所说的任何其他属性都应该使用它们的访问器来设置，例如`cloth.title = params[:title]`.

如果您需要`attr_accessible`，则将其他属性添加到您的列表中。

```
attr_accessible :pic_attributes, :title, :description, etc ... 
```

# php - 在 mysql db 中检查电子邮件地址

> ID：14141964
> 
> 赞同：0
> 
> 时间：2013-01-03T15:31:02.827
> 
> 标签：php, database, mysqli

所以我试图做看起来应该做的事情，而且可能是一个非常简单的平凡任务。我正在尝试检查我的数据库中的电子邮件地址。我不知道我是否走在正确的轨道上，有人能把我逼出来吗？

```
$query = "SELECT * FROM 68_users WHERE email= $email";
if($result = mysqli_query($link, $query) == $email) {
     echo 'Email has been registered';
}else{
    $query = "INSERT INTO 68_users (email,pass,old_pass,first_name,last_name,dob,gender,phone,fanmail) 
             VALUES ('$email',AES_ENCRYPT('$pass', 'something'),AES_ENCRYPT('$pass', 'something'),'$first_name','$last_name','$dob','$gender','$phone','$fanmail')" 
             or die(mysqli_error());
    if ( !mysqli_query($link, $query) ) {
        echo 'error: '.mysqli_error($link);
        exit();
    }
}
mysqli_close($link);
} 
```

谢谢大家的帮助。我需要弄清楚 php 的调试情况。现在我在 Eclipse 中编写并在我的网站上进行调试，非常令人恼火..这就是我使用的：

```
$query = "SELECT * FROM 68_users WHERE email= '$email'";
$result = mysqli_query($link, $query);
if($result->num_rows > 0) {
    echo 'This email has previously been registered';
}else{
    $query = "INSERT INTO 68_users (email,pass,old_pass,first_name,last_name,dob,gender,phone,fanmail)
    VALUES ('$email',AES_ENCRYPT('$pass', 'something'),AES_ENCRYPT('$pass', 'something'),'$first_name','$last_name','$dob','$gender','$phone','$fanmail')"
    or die(mysqli_error());
    if ( !mysqli_query($link, $query) ) {
        echo 'error: '.mysqli_error($link);
        exit();
    }
    header( 'Location: http://www.example.com/html/thankyou.html' ) ;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:37:19.183

此查询将失败，因为您需要在 email 变量周围加上撇号。您也可以简单地运行查询并查看返回了多少行：

```
$query = "SELECT * FROM 68_users WHERE email= '$email'";
$result = mysqli_query($link, $query);
if($result->num_rows > 0) {
    echo 'Email has been registered';
}else{
 // ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:33:53.477

你需要`quotes`围绕变量`$email`，

```
$query = "SELECT * FROM 68_users WHERE email= '$email'"; 
```

您将需要查看其余代码的结果，以了解其他一切是否正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T15:34:06.873

在不知道当前代码的结果的情况下，我可以发现的一个问题是，您希望确保将电子邮件值括在查询语句的单引号中，以确保对其进行正确评估：

```
$query = "SELECT * FROM 68_users WHERE email='$email'"; 
```

当您的查询执行时，省略引号将导致错误，这取决于您的详细处理，可能会或可能不会明显可见。另外一点，这将是基本调试发挥作用的地方，这是所有程序员的基础。

删除电子邮件的相等检查，因为您的查询语句已经为您执行此操作。如果没有返回任何行，那么它将返回 false 并触发 else 语句：

```
$query = "SELECT * FROM 68_users WHERE email='$email'";
if($result = mysqli_query($link, $query)) {
    // Registered
}else{
    // Not Registered
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T15:36:37.910

```
$query = "SELECT * FROM 68_users WHERE email= '$email'"; 
```

还将返回一个值数组，您的“if ($result ... == $email)”将失败。

*var_dump($result)* 查看查询返回的内容。

# android - ScrollView 中的 ImageView 大小调整错误

> ID：14141968
> 
> 赞同：0
> 
> 时间：2013-01-03T15:31:12.110
> 
> 标签：android, imageview, scrollview

我正在使用 ImageView，确切地说它是扩展 ImageView 的 ImageMap，在具有以下代码部分的 ScrollView 中：

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:ctc="http://schemas.android.com/apk/res/de.svennergr.htn"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/backrepeat"
        android:orientation="vertical"
        android:padding="10dp"
        android:weightSum="1" >

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="15dp"
            android:layout_marginTop="15dp"
            android:baselineAligned="false"
            android:orientation="horizontal" >

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:orientation="vertical"
                android:weightSum="1" >

                <TextView
                    android:id="@+id/login_text"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_gravity="bottom"
                    android:layout_weight="0.3333"
                    android:paddingTop="10dp"
                    android:text="Login:" />

                <TextView
                    android:id="@+id/password_text"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="0.3333"
                    android:paddingTop="10dp"
                    android:text="Password:" />

                <TextView
                    android:id="@+id/email_text"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="0.3333"
                    android:paddingTop="10dp"
                    android:text="E-Mail:"
                    android:visibility="gone" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="vertical"
                android:weightSum="1" >

                <EditText
                    android:id="@+id/login_edit"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="0.3333"
                    android:ems="10" >
                </EditText>

                <EditText
                    android:id="@+id/passwd_edit"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="0.3333"
                    android:ems="10"
                    android:inputType="textPassword" />

                <EditText
                    android:id="@+id/email_edit"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="0.3333"
                    android:ems="10"
                    android:inputType="textEmailAddress"
                    android:visibility="gone" />
            </LinearLayout>
        </LinearLayout>

        <Button
            android:id="@+id/login"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:background="@drawable/button"
            android:text="Login"
            android:textColor="@color/button_start" />

        <Button
            android:id="@+id/register"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="3dp"
            android:background="@drawable/button"
            android:text="@string/register"
            android:textColor="@color/button_start" />

        <de.svennergr.htn.ImageMap
            android:id="@+id/imap"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_marginTop="10dp"
            android:adjustViewBounds="true"
            android:scaleType="centerCrop"
            android:src="@drawable/europa"
            ctc:map="europa" />
    </LinearLayout>

</ScrollView>
</LinearLayout> 
```

我已经发布了整个 XML 代码，以便您更好地了解。

Imageview 应该在显示的底部显示带有“fill_parent”的图像，但是图像正在调整大小并且没有显示到底部：

![具有调整大小的 ImageView 的图像](../Images/cdbf52368c3c37b72a943b03c952473d.png)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:33:18.103

尝试将此属性添加到您的滚动视图：

```
android:FillViewport="true" 
```

已编辑。

# c - 如何在 Autotools 中打包可执行文件及其依赖的库

> ID：14141972
> 
> 赞同：1
> 
> 时间：2013-01-03T15:31:35.350
> 
> 标签：c, makefile, autotools

我是 autotools 的新手，我一直在寻找如何使用 autotools 打包库和可执行文件的示例。可执行文件取决于库，因此必须首先构建库。

到目前为止，我已经将库自己打包，然后我已经能够编译可执行文件并在安装后链接到库。这是我的 Makefile.am 用于该过程：

```
lib_LTLIBRARIES = libfoo.1.0.0.la
libfoo_1_0_0_la_SOURCES = libfoo.c
library_includedir=$(includedir)
library_include_HEADERS = libfoo.h 
```

然后在 configure.ac 文件中，我`LT_INIT`在适当的位置添加了该行。一切都构建得很好并且工作正常。我有一个文件 foo.c 使用我可以编译的库`gcc foo.c -o foo -lfoo`，但是我想扩展 autotools 包以包含 foo 可执行文件，我不知道如何做到这一点。我已将 Makefile.am 修改为如下所示：

```
bin_PROGRAMS=foo
foo_SOURCES=foo.c
foo_DEPENDENCIES=libfoo.1.0.0.la
lib_LTLIBRARIES = libfoo.1.0.0.la
libfoo_1_0_0_la_SOURCES = libfoo.c
library_includedir=$(includedir)
library_include_HEADERS = libfoo.h 
```

我的`configure.ac`文件没有改变。在我开始之前，一切都运行良好，此时似乎 foo.c 是首先编译的，并且由于 libfoo 中的函数不可用，显然会引发很多错误。我已经搜索过这样的例子，但到目前为止还没有任何运气。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T00:12:49.300

这是正确的方法。

```
lib_LTLIBRARIES = libmoovcaps.la
libmovcaps_la_SOURCES = libmoovcaps.c
include_HEADERS = libmoovcaps.h
bin_PROGRAMS = moovcaps
moovcaps_SOURCES = moovcaps.c
moovcaps_LDADD = libmoovcaps.la 
```

PS：为什么你的 libmoovcaps.la 中有数字？您可以`-version-info`通过`libmoovcaps_LDFLAGS`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:26:56.807

我想通了，我把它放在我的`Makefile.am`：

```
lib_LTLIBRARIES = libfoo.1.0.0.la
libfoo_la_SOURCES = libfoo.c
library_includedir=$(includedir)
library_include_HEADERS = libfoo.h
bin_PROGRAMS=foo
foo_SOURCES=foo.c
foo_DEPENDENCIES=libfoo.1.0.0.la
foo_LDADD= libfoo.o 
```

这似乎现在有效:)

# windows-phone-7 - 如何在 Windows Phone (C#) 中打开 .pdf、.doc 文件

> ID：14141973
> 
> 赞同：2
> 
> 时间：2013-01-03T15:31:36.623
> 
> 标签：windows-phone-7

是否有可能在 Windows Phone 中打开 word 或 pdf 文件？我从指定的 API 获取文件字节数据，并且我希望在我的应用程序中能够预览文件......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T07:09:46.873

我认为您需要 [为 WP7 使用 FOXIT SDK](http://www.foxitsoftware.com/products/sdk/embedded/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:01:10.523

你可以看看这个教程：

[http://mobile.dzone.com/news/displaying-pdf-files-windows](http://mobile.dzone.com/news/displaying-pdf-files-windows)

但是使用的组件不是开源的。[http://www.componentone.com/SuperProducts/PdfViewerPhone/](http://www.componentone.com/SuperProducts/PdfViewerPhone/)

据我所知，没有可用于 WP7/8 的开源 pdf 查看器实现。

如果您是注册的 Windows Phone 开发人员，您可以尝试**免费获得 ComponentOne 或享受大量折扣。**看看[http://dev.windowsphone.com/en-us/featured/partners](http://dev.windowsphone.com/en-us/featured/partners)

# rabbitmq - RabbitMQ，死信交换-> 无法将消息路由到默认交换？

> ID：14141974
> 
> 赞同：7
> 
> 时间：2013-01-03T15:31:39.283
> 
> 标签：rabbitmq, amqp, dead-letter

使用 RabbitMQ Admin (v3)，我尝试创建一个将死信消息发送到默认交换器的队列，其中绑定了一个错误队列的路由键“MyErrorRoutingKey”。所以在管理界面，我把“死信交换”留空。

我只是想知道在尝试创建队列时出现以下消息是否正常：

> 406 PRECONDITION_FAILED - vhost'/'中队列'MyQueue'的无效参数'x-dead-letter-routing-key'：routing_key_but_no_dlx_defined

似乎可以将死信消息路由到默认交换，因为在文档中进一步说：

> 有可能形成死信队列的循环。例如，当队列死信消息发送到默认交换时，可能会发生这种情况，而没有指定死信路由键。这种循环中的消息（即两次到达同一个队列的消息）将被丢弃。

那么我应该如何将消息路由到默认交换？与上面描述的“循环无用死信”不同，我希望能够指定路由键，这样我的消息就不会丢失。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-17T22:32:22.000

老问题，但似乎没有人回答，所以我会试一试。

我在使用 Web UI 时遇到了完全相同的错误，但我可以通过手动将“x-dead-letter-exchange”和“x-dead-letter-routing-key”设置为自定义参数来解决它使用提供的字段。

![在此处输入图像描述](../Images/95eaac2a2e9d3f89a8131b22be227dd5.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-01T16:08:40.407

在我看来，routing_key_but_no_dlx_defined 说如果你没有定义死信交换，你不应该定义死信路由键，这也是有道理的。

我不确定你想用默认交换做什么，但它也有一个名字，所以也许你也可以设置死信交换......

关于您从文档中引用的最后一句话，这意味着如果您使用死信交换设置了一个循环，即：

```
队列-A > 死信队列 > 队列-A
```

...如果由于超时而离开 DEAD-LETTER-QUEUE，RabbitMQ 将在返回到 QUEUE-A 时丢弃该消息。如果你想要这样的延迟重试，你必须手动将消息排队到 DEAD-LETTER-QUEUE，但有迹象表明 RabbitMQ 可能会让你以后有这样的周期（[http://lists.rabbitmq. com/pipermail/rabbitmq-discuss/2013-April/026489.html](http://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2013-April/026489.html)）。

# excel - 使用复杂条件在 Excel 公式中四舍五入

> ID：14141976
> 
> 赞同：-1
> 
> 时间：2013-01-03T15:31:40.163
> 
> 标签：excel

嗨，我需要根据以下条件对数字（最后 2 位数字，无小数）进行四舍五入：

如果从 0 到 64 应该是 49

如果从 65 – 89 设置为 79

如果从 90 – 129 设置为 99

如果从 130 – 164 设置为 149

如果从 165 – 189 设置为 179

如果从 190 – 229 设置为 199

以此类推，直到 989

然后：如果值是从 989 – 1099 设置为 999

如果值是从 1100 – 1249 设置为 1199

如果值是从 1250 – 1349 设置为 1299

如果值是从 1350 – 1449 设置为 1399

以此类推，直到 5000

我将不胜感激一些信息并帮助如何获得适用于此的公式。

谢谢哈姆兹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:56:04.757

这不是一个真正的舍入问题，而是一个转换问题。因为您的数字组似乎没有模式，所以我认为这不是您可以计算的东西，因此您必须进行查找。

如果您想在一个公式中完成所有操作，您可以在 vlookup 中使用和数组，如下面的部分示例：

```
=VLOOKUP(C1,{0,49;65,79;90,99;130,149;165,179},2,TRUE) 
```

否则，将其作为正常的 vlookup 进行。您所需要的只是一个两列表格，第一列包含范围的下限，第二列包含您想要的值。重要的是 vlookup 的最终参数为 true，这使得 vlookup 找到最近的匹配项。

# python - 检查公式是否是 Z3Py 中的术语

> ID：14141977
> 
> 赞同：1
> 
> 时间：2013-01-03T15:31:41.747
> 
> 标签：python, z3

在 Z3Py 中，我需要使用标准语法检查某事是否是一个术语`term := const | var | f(t1,...,tn)`）。我已经编写了以下函数来确定这一点，但是我检查 n 元函数的方法似乎不是很理想。

有更好的方法吗？这些实用功能`is_term`, `is_atom`,`is_literal`等将很有用包含在 Z3 中。我会把它们放在贡献部分

```
CONNECTIVE_OPS = [Z3_OP_NOT,Z3_OP_AND,Z3_OP_OR,Z3_OP_IMPLIES,Z3_OP_IFF,Z3_OP_ITE]
REL_OPS = [Z3_OP_EQ,Z3_OP_LE,Z3_OP_LT,Z3_OP_GE,Z3_OP_GT]

def is_term(a):
    """
    term := const | var | f(t1,...,tn)
    """
    if is_const(a):
        return True
    else:
        r = (is_app(a) and \
                 a.decl().kind() not in CONNECTIVE_OPS + REL_OPS and \
                 all(is_term(c) for c in a.children()))
        return r 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:10:47.113

功能是否合理，几点评论：

1.  这取决于规范中“var”的含义。Z3 具有变量作为 de-Brujin 指数。z3py "is_var(a)" 中有一个函数来检查 "a" 是否是变量索引。

2.  还有另一个布尔连接词 Z3_OP_XOR。

3.  还有其他关系操作，例如比较位向量的操作。这取决于您的意图和代码的使用，但您也可以检查表达式的类型是否为布尔值，以及是否确保头函数符号未被解释。

4.  is_const(a) 被定义为 return is_app(a) 和 a.num_args() == 0。所以 is_const 真正由默认情况处理。

5.  Z3 作为简化、解析或其他转换的结果创建的表达式可能具有许多共享子表达式。因此，直接递归下降可能会在表达式的 DAG 大小上花费指数时间。您可以通过维护已访问节点的哈希表来处理此问题。在 Python 中，您可以使用 Z3_get_ast_id 检索表达式的唯一编号并将其保存在一个集合中。只要术语没有被垃圾收集，标识符就是唯一的，因此您应该将这样的集合维护为局部变量。

所以，大致如下：

```
 def get_expr_id(e):
     return Z3_get_ast_id(e.ctx.ref(), e.ast)

 def is_term_aux(a, seen):
    if get_expr_id(a) in seen:
        return True
    else:
        seen[get_expr_id(a)] = True
        r = (is_app(a) and \
             a.decl().kind() not in CONNECTIVE_OPS + REL_OPS and \
             all(is_term_aux(c, seen) for c in a.children()))
        return r

 def is_term(a):
     return is_term_aux(a, {}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:22:23.300

一阶逻辑中使用的术语、原子和文字的“教科书”定义不能直接应用于 Z3 表达式。在 Z3 中，我们允许诸如`f(And(a, b)) > 0`and之类的表达式`f(ForAll([x], g(x) == 0))`，其中`f`是从 Boolean 到 Integer 的函数。这个扩展并没有增加表现力，但是在写问题的时候非常方便。SMT 2.0 标准还允许“术语”`if-then-else`表达式。这是另一个允许我们将“公式”嵌套在“术语”中的功能。示例：`g(If(And(a, b), 1, 0))`。

在实现操作 Z3 表达式的过程时，我们有时需要区分布尔表达式和非布尔表达式。在这种情况下，“术语”只是一个没有布尔排序的表达式。

```
def is_term(a):
   return not is_bool(a) 
```

在其他情况下，我们希望以特殊方式处理布尔连接词 ( `And`, `Or`, ...)。例如，我们正在定义一个 CNF 转换器。在这种情况下，我们将“原子”定义为任何不是量词的布尔表达式，是（自由）变量或不是布尔连接词之一的应用程序。

```
def is_atom(a):
   return is_bool(a) and (is_var(a) or (is_app(a) and a.decl().kind() not in CONNECTIVE_OPS)) 
```

在我们定义了一个原子之后，一个字面量可以定义为：

```
def is_literal(a):
   return is_atom(a) or (is_not(a) and is_atom(a.arg(0))) 
```

这是一个演示这些功能的示例（也可以在[rise4fun](http://rise4fun.com/Z3Py/NCQ0)在线获得）：

```
x = Int('x')
p, q = Bools('p q')   
f = Function('f', IntSort(), BoolSort())   
g = Function('g', IntSort(), IntSort())
print is_literal(Not(x > 0))    
print is_literal(f(x))
print is_atom(Not(x > 0))
print is_atom(f(x))
print is_atom(x)
print is_term(f(x))
print is_term(g(x))
print is_term(x)
print is_term(Var(1, IntSort())) 
```

# actionscript-3 - MCTE 不适用于从数组加载的剪辑

> ID：14141980
> 
> 赞同：1
> 
> 时间：2013-01-03T15:31:59.630
> 
> 标签：actionscript-3, flash, air

我在几个 Flash 动画中使用 MCTE v3（来自 JumpEye Components），最初这些动画是从远程加载它们的主“播放器”加载的。一切正常。

现在我已经更改了主播放器，将每个剪辑推送到一个数组中，然后播放它们（而不是在每个剪辑结束后加载和播放）

但是现在 MCTE 转换被打破了。动画加载，但在动画中可以看到 MCTE 的几个有问题的“占位符”，并且跟踪日志显示以下错误：

> TypeError：错误 #1034：类型强制失败：无法将 flash.display::MovieClip@2e704b31 转换为 MCTEV3

有谁知道为什么将剪辑放入数组会破坏过渡组件？

# php - PHP缓存不适用于包含的文件

> ID：14141985
> 
> 赞同：0
> 
> 时间：2013-01-03T15:32:19.533
> 
> 标签：php, web-services, caching, buffer

我有一个 Web 表单，其中包含一个输出状态选择选项的包含文件。html看起来像

```
 <select name="state" id="state">
        <option value="">--</option>
        <?php include ("resources/data/stateoptions.php"); ?>
      </select> 
```

状态选项调用 Web 服务，以便商店位置列表始终是最新的。然而，这个联系表单页面似乎运行异常缓慢（如果我删除这个包含会快得多）。所以我想缓存网络服务调用。我的状态选项文件如下所示

```
<?php
  $cachefile = "cache/states.html";
  $cachetime = 5 * 60; // 5 minutes

  // Serve from the cache if it is younger than $cachetime
  if (file_exists($cachefile) && (time() - $cachetime < filemtime($cachefile))) 
  {
     include($cachefile);

     echo "<!-- Cached ".date('jS F Y H:i', filemtime($cachefile))." 
     -->n";

     exit;
  }

  ob_start(); // start the output buffer
?>

<?php
//url of locations web service
$serviceURL = 'http://webserviceurl/state';

//query the webservice
$string = file_get_contents($serviceURL);

//decode the json response into an array
$json_a=json_decode($string,true);

foreach( $json_a as $State => $IdealState){
$IdealState = $IdealState[State];
$IdealState2 = str_replace(' ', '-', $IdealState);
echo '<option value='.$IdealState2.'>'.$IdealState.'</option>';
}
?>

<?php
// open/create cache file and write data
$fp = fopen($cachefile, 'w'); 
// save the contents of output buffer to the file
fwrite($fp, ob_get_contents()); 
// close the file
fclose($fp); 
// Send the output to the browser
ob_end_flush(); 
?> 
```

当我直接调用这个文件时，一切都按预期工作，并创建了一个 states.html 文件。但是由于某种原因，当我的联系表单页面中包含 stateoptions.php 文件时，它永远不会创建缓存文件，并且速度问题仍然存在。我是一个相当新手的程序员，所以任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:43:05.880

这里的问题很可能是相对路径和工作目录。包含的文件从调用脚本继承其工作目录，它不会**自动**获得它所在位置的工作目录。

您要么需要使用魔法`__DIR__`常数之类的东西来构造绝对路径，要么相应地调整相对路径。

我要在这里稍微走一走，说如果你把第一行改成：

```
$cachefile = "resources/data/cache/states.html"; 
```

...您可能会发现它可以按您的预期工作。

# javascript - 没有数据时，SVG 路径中有间隙

> ID：14141987
> 
> 赞同：2
> 
> 时间：2013-01-03T15:32:22.390
> 
> 标签：javascript, d3.js

我正在尝试在 D3 中创建实时折线图。我的数据格式为 [[Date, value], [Date, value]。当我没有收到任何数据时，该值将为 0。我希望这些值的线中断，因此它们不会被绘制。然后，我会在我的图表中出现缺失数据的空白。

任何人有任何想法我会如何做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-04T08:50:21.677

尝试这个。变量 my_dataset 是具有属性 {x,y} 的对象数组。“NaN：在可视化中跳过 y 值。

```
var line = d3.svg.line()
  .x( function( d, i) { return x( d.x); })
  .y( function( d) { return y( d.y); })
  .defined( function( d) { return !isNaN( d.y); })
  ;

my_visualization.append( "svg:path")
    .data( [ my_dataset])
    .attr( "d", line) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:44:18.363

您可以通过在一组轴上创建多个图来轻松做到这一点。每个连续的数据集将是一个单独的图。然后只需确保为它们分配所有相同的颜色等。

# javascript - 鼠标悬停时弹出传单删除点击事件

> ID：14141988
> 
> 赞同：5
> 
> 时间：2013-01-03T15:32:27.680
> 
> 标签：javascript, leaflet, geojson

我使用 geoJSON 在我的地图上绘制了许多点。当您单击一个点时，地图会缩放到该点并在另一个 div 中拉出一些信息。当我在鼠标悬停事件上弹出一个弹出窗口时，我的点击功能不再起作用。

这是我的点击功能：

```
function fillInfo(e) {
        var layer = e.target; 

        document.getElementById('infoBox').innerHTML = '<h2>' + layer.feature.properties.name + '</h2>' + '<h3>' +  layer.feature.properties.address + '</h3></p>'
        }
        //Variable to set zoom level on click
        var southLat = layer.feature.geometry.coordinates[0] + .022438;
        var southLong = layer.feature.geometry.coordinates[1] - .003235;

        var northLat = layer.feature.geometry.coordinates[0] - .022438;
        var northLong = layer.feature.geometry.coordinates[1] + .003235;

        map.fitBounds([[southLong, southLat], [northLong, northLat]]);

    }​ 
```

这是我的鼠标悬停功能：

```
 function highlightFeature(e) {
        var layer = e.target; 

        layer.bindPopup(layer.feature.properties.name)
            .openPopup();

        layer.setStyle({
            weight: 5,
            color: '#666',
            dashArray: '',
            fillOpacity: 0.7
        });

        if (!L.Browser.ie && !L.Browser.opera) {
            layer.bringToFront();
        }

    } 
```

我在这里称它们为：

```
 function onEachFeature(feature, layer) {
        layer.on({
            click: fillInfo,
            mouseover: highlightFeature,
            mouseout: resetHighlight
        });
    } 
```

这使弹出窗口在翻转时正常工作，但该点不再响应单击事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T19:45:22.947

弹出窗口有一个偏移属性，默认设置为`[0,6]`，因此弹出窗口覆盖了该点（包含白色向下箭头的节点大于箭头），您将无法单击该点.

设置弹出窗口的偏移选项：

```
layer.bindPopup(layer.feature.properties.name,{offset:new L.Point(0,0)})
 .openPopup(); 
```

提供给 L.Point 的第二个参数是重要的 y 坐标，减小此参数以向上移动弹出窗口。

# ajax - ajax 多种形式的拼图

> ID：14141996
> 
> 赞同：2
> 
> 时间：2013-01-03T15:32:57.603
> 
> 标签：ajax, forms

我正在构建一个包含多种表单的页面。但他们都被发送了 1 个提交按钮。它类似于在 kickstarter.com (http://www.kickstarter.com/start) 中创建项目表单。

kickstarter 中使用的代码如下：

```
 $("#submit_for_review a").live("click", function (a) {
        a.preventDefault();
        var c = $(this),
            d = $("#saving-layer");
        d.show();
        $.ajax({
            url: c.attr("href"),
            type: "get",
            dataType: "json",
            success: function (a) {
                a.ok ? j(c, function () {
                    $("body").addClass("confirm_preview");
                    b("Preview", "Pre-Submit");
                    return !0
                }) : ($.each(a, function (a, b) {
                    if (b) {
                        var c = $("#" + a.replace(/_/g, "-")).html(b);
                        window.FB && window.FB.XFBML && setTimeout(function () {
                            FB.XFBML.parse(c[0])
                        }, v)
                    }
                }), e() && h($(".flash-error:first").closest(".panel").index()))
            },
            complete: function () {
                d.hide()
            }
        })
    }); 
```

现在我的问题是，这个按钮如何通过 ajax 发送数据？我可以看到有url，type，dataType，success，complete的参数，但是为什么没有发送参数数据，而服务器却能够接受来自所有表单的所有数据。数据可以通过 cookie 或 session 传递吗？感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:44:44.763

jQuery 网站有一个很好的[教程](http://docs.jquery.com/Tutorials%3aGetting_Started_with_jQuery#Setup)，其中有一个标题为“评价我：使用 AJAX”的部分（尽管它是 XML 而不是 JSON）。作为复习，它可能是一个遵循整个教程的想法。

关键是要记住 $ 创建了一个新的 jQuery 对象。

要通过流程概述来复习 AJAX，请尝试[W3Schools 页面](http://www.w3schools.com/ajax/ajax_intro.asp)。