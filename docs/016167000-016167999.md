# StackOverflow 问答 16167000-16167999

# ios - iOS：AFJSONRequestOperation 编码结果导致 NSInvalidArgumentException -“数据参数为零”

> ID：16167002
> 
> 赞同：0
> 
> 时间：2013-04-23T10:27:46.637
> 
> 标签：ios, objective-c, json, encoding, afjsonrequestoperation

我正在尝试获取一个 JSON 字符串，但有些单词有“á、é、ç”等。

JSON是：

```
{"Error":"", "Result":{"Transacoes": [{"ClienteID":"1","ID":"915","Banco":"Bradesco","Fornecedor":"","Tipo":"Cartão de crédito - Bradesco Visa","ValorCredito":"0,0000","ValorDebito":"4000,0000","Vencimento":"","Pagamento":"03/08/2012 00:00:00","Descricao":"Cartão Bradesco Visa","Lançamento":"03/08/2012 15:18:12"},{"ClienteID":"1","ID":"916","Banco":"Bradesco","Fornecedor":"","Tipo":"Alinhamento da Conta Bancária","ValorCredito":"22398,9200","ValorDebito":"0,0000","Vencimento":"","Pagamento":"02/08/2012 00:00:00","Descricao":"FGTS","Lançamento":"07/08/2012 11:12:16"}]}} 
```

代码是：

```
-(void)viewWillAppear:(BOOL)animated {
NSString *urlAddress = [NSString stringWithFormat:@"http://SITE?action=transacoes&AuthToken=%@&DataDe=02/08/2012&DataAte=03/08/2012", self.usuario.authToken];

NSURL *url = [NSURL URLWithString:urlAddress];
NSURLRequest *request = [NSURLRequest requestWithURL:url];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest: request
                                        success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
NSLog(@"%@", JSON);
                                        }
                                        failure: ^(NSURLRequest *request , NSURLResponse *response , NSError *error , id JSON){
                                            NSLog(@"ERROR: %@", error);
                                        }];

[operation start];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:16:14.500

您的应用程序抛出`Exception`，因为它无法从您请求的服务器获取数据。所以首先确保它接收到一些数据，然后实现以下代码

尝试使用以下代码来解析您的 json 数据，我尝试使用我的应用程序，它也可以与特殊符号一起正常工作。

```
NSString *urlAddress = [NSString stringWithFormat:@"http://SITE?action=transacoes&AuthToken=%@&DataDe=02/08/2012&DataAte=03/08/2012", self.usuario.authToken];

NSURL *url = [NSURL URLWithString:urlAddress];
NSURLRequest *request = [NSURLRequest requestWithURL:url];

NSHTTPURLResponse* urlResponse = nil;

NSError *error = nil;
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&urlResponse error:&error];

if([responseData bytes] > 0)
{
    // It will work only IOS 5.0 or later version otherwise you can use any third party JSON parsers (eg. SBJSON)
    NSDictionary* json = [NSJSONSerialization
                          JSONObjectWithData:responseData
                          options:NSJSONReadingMutableLeaves
                          error:&error];
    NSLog(@"%@",[[[[json objectForKey:@"Result"] objectForKey:@"Transacoes"] objectAtIndex:1] valueForKey:@"Descricao"]);
    NSLog(@"%@",[[[[json objectForKey:@"Result"] objectForKey:@"Transacoes"] objectAtIndex:1] valueForKey:@"Tipo"]);
} 
```

# sql - 对 SQL 错误文档感到困惑，如何查找原因？

> ID：16167007
> 
> 赞同：1
> 
> 时间：2013-04-23T10:27:58.000
> 
> 标签：sql, sql-server, sql-server-2008

我试图登录到远程服务器，我看到了链接中给出的错误 -

[http://www.microsoft.com/products/ee/transform.aspx?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=2](http://www.microsoft.com/products/ee/transform.aspx?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=2)

留言说——

消息：建立与服务器的连接时发生错误。**连接到 SQL Server 时，此故障可能是由于在默认设置下 SQL Server 不允许远程连接造成的。**（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）（.Net SqlClient 数据提供者）

紧随其后的是 -

**解释**

SQL Server 未响应客户端请求，因为服务器可能未启动。

信息和解释是不是相互矛盾？哪一个是问题的正确原因？我如何找出问题的真正根源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:32:28.743

他们并不矛盾。他们只是给出了不同的可能原因：

1.  SQL Server 不允许远程连接
2.  SQL Server 未启动

要修复它，请确保 SQL Server 允许远程连接并已启动。

允许远程连接可以在“SQL Server 配置管理器”中完成：

*   在安装了 SQL Server 的服务器上启动该程序。
*   导航到“SQL Server 网络配置”->“协议”
*   双击连接类型 - 例如命名管道 - 并将“启用”设置为“是”。
*   如果要启用 TCP/IP，请确保在第二个选项卡上也启用每个单独的 IP 地址。

有关更多信息，请参阅[此博客文章](http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:33:37.950

您正在使用的程序无法在它期望的端口/​​地址上找到 SQL 服务器。这可能是因为它配置错误，或者因为 SQL Server 已停止。我建议你打开一个桌面登录到有问题的机器，看看 SQL Server 是否正在运行。

此问题还有其他潜在原因：例如网络问题。

# c - 测量 int 数组的元组数

> ID：16167008
> 
> 赞同：-2
> 
> 时间：2013-04-23T10:27:58.363
> 
> 标签：c, gcc

我使用宏来获取整数数组的元素个数，我可以在主函数中得到整数数组个数的正确结果，但是如果我使用 getData 函数并发送整数数组的指针作为参数。我想知道为什么我得到这个错误的答案。谢谢！

我的程序代码如下：

```
#include <stdio.h>

#define LENGTHOFINTARRAY(intArray) ((int)(sizeof(intArray)/sizeof(int)))

int main (int argc, char *argv[])
{
    int a[] = {5,8,9,4,11,7,15,25,1};

    int getData(int *data);
    printf("%d\n", LENGTHOFINTARRAY(a));
    getData(a);

    return 0;
}

int getData(int *data)
{
    int i = 0;
    for(i; i < LENGTHOFINTARRAY(data); i++)
    {
        printf("%d, %d\n", LENGTHOFINTARRAY(data), data[i]);
    }

    return 1;
} 
```

我的程序的结果是：

9

1、5

我使用 gcc 作为我的编译器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:30:33.463

的类型`int* data`只是`int*`而`int[9]`不像 in `main`。is 的大小`int*`是任何其他指针的大小（通常为 4 或 8 个字节）。无法从指针中获取数组的大小。而且由于数组不能在 C 中按值传递（除非在结构或其他东西内），因此您必须传递数组的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:31:39.390

`getData()`视为. `data`_ `int*`它不知道它有多长。

您无法确定作为指向函数的指针传递的数组的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:51:19.807

正如你所定义的

```
int a[] = {5,8,9,4,11,7,15,25,1};

    int getData(int *data);
    printf("%d\n", LENGTHOFINTARRAY(a));
    getData(a); 
```

因此，当您调用“getData(a)”时，这意味着您将第一个元素的地址作为 &a[0];

所以在你的内部函数 getData() 为

```
int getData(int *data)
{
    int i = 0;
    for(i; i < LENGTHOFINTARRAY(data); i++)
    {
        printf("%d, %d\n", LENGTHOFINTARRAY(data), data[i]);
    }

    return 1;
} 
```

数据只是一个指向整数的指针，它获取 a[0] 的指针或地址；所以你的宏现在将数据视为指向 int 的指针。这导致了你得到的结果。

# java - nginx 可以根据之前的代理调用来决定是否代理到一个 url 吗？

> ID：16167014
> 
> 赞同：0
> 
> 时间：2013-04-23T10:28:06.347
> 
> 标签：java, proxy, nginx, playframework

我有以下情况：

1.  隐藏以供外部访问的后端系统
2.  一个用 Play Framework 编写的精简扩展，它对传递到后端的数据进行一些外部工作。
3.  一个 nginx 实例拦截所有公共调用，并决定代理到哪个系统

思路是这样的：如果有特定的调用来了，我想让 nginx 代理到 Play 应用，并根据 Play 应用的结果来决定是代理到后端，还是返回将应用程序播放到 Web 客户端。Play 应用程序的结果可以是一些 JSON，也可以直接使用响应代码，所以当它可以更进一步时，它会返回 200，如果不是 500，等等。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:33:28.617

在这种情况下，您使用 NGIX 作为您的播放应用程序的反向代理。
您播放控制器将处理请求，然后您可以应用您的业务逻辑来了解是否将请求转发到您的后端应用程序。

Play 的响应可以是标准的 http 响应或 JSON（或许多其他格式）。

您可以通过发出 Web 服务请求（来自 Play 中的 WS）或 MQ 消息（RabbitMQ 插件）或自定义协议来连接到后端应用程序。

# jquery - 为什么这个 jquery 选择器在 chrome 中工作，但在 firefox 中没有

> ID：16167018
> 
> 赞同：0
> 
> 时间：2013-04-23T10:28:20.583
> 
> 标签：jquery, google-chrome, firefox, jquery-selectors

我有这个html：

```
<div id="PaymentTypeOptions">
  <input type="radio" id="payment_Cash" name="PaymentTypeOption" value="1">Cash
  <input type="radio" id="payment_Card" name="PaymentTypeOption" value="2">Card
  <input type="radio" id="payment_Cheque" name="PaymentTypeOption" value="3">Cheque
  <input type="radio" id="payment_Voucher" name="PaymentTypeOption" value="4">Voucher
</div> 
```

我正在尝试选择所有输入类型，以便使用 jquery 将它们绑定到事件：

```
$('document').ready(function () {
  $('input:radio[name=PaymentTypeOption]').on('click', function () {
    ShowPaymentType(this);
  });
}); 
```

选择器在 Chrome 中有效，但在 Firefox 中无效。对于为什么会这样，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:31:08.580

删除引号后尝试`$('document')`：

改变这个：

```
$('document').ready(function () { 
```

对此：

```
$(document).ready(function () { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:13:50.740

Firefox 似乎保留了一些 javascript 值。老实说，我不确定这是怎么回事，但是关闭浏览器并打开一个新浏览器会导致问题消失。

# iphone - 向上或向下滚动时UITableview崩溃以及如何为每个单元格设置水平滚动视图

> ID：16167019
> 
> 赞同：1
> 
> 时间：2013-04-23T10:28:22.640
> 
> 标签：iphone, ios, ios6

我想显示每个单元格都包含嵌套 UIview 的表格视图，但我遇到了一些问题。

1) 当我尝试滚动表格视图时，我的应用程序崩溃。

通过将根视图而不是子视图添加到应用程序委托中来解决

现在问题2

2）我想在表格单元格中添加水平滚动视图。所以我可以在单个单元格中显示3个子视图，我可以在单元格中水平滚动..我该怎么做。我想做这个..

![在此处输入图像描述](https://i.stack.imgur.com/brWzp.png)

为了实现这一点，我有这个代码..

```
 - (id)initWithFrame:(CGRect)frame
  {
self = [super initWithFrame:frame];
if (self) {
    UIView *wagon = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 430, 187)];
    UIColor *background = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"wagon.png"]];
    wagon.backgroundColor = background;

    UIScrollView *scrollview = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 0, 830, 187)];
    scrollview.showsVerticalScrollIndicator=YES;
    scrollview.scrollEnabled=YES;
    scrollview.userInteractionEnabled=YES;

   UIView *videoview = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 220 , 100)];

    UIImageView *video = [[UIImageView alloc]initWithFrame:CGRectMake(wagon.frame.origin.x+18, wagon.frame.origin.y+35, 220, 100)];
    UIImage *bgImage = [UIImage imageNamed:@"video.png"];
    video.image = bgImage;
    videoview.contentMode = UIViewContentModeLeft;
    [videoview addSubview:video];

    UIView *textview = [[UIView alloc]initWithFrame:CGRectMake(wagon.frame.origin.x+238,wagon.frame.origin.y+28, 150 , 187)];
    textview.contentMode = UIViewContentModeRight;
    UILabel * label = [[UILabel alloc]initWithFrame:CGRectMake(28,10, 150 , 87)];
    label.text=@"This is testing text for IOS app to check line are aligned or not and to check video image and nested views for UIviews";
    label.backgroundColor = [UIColor clearColor];
    label.textColor=[UIColor redColor];
    label.numberOfLines = 4;
    [textview addSubview:label];

    [wagon addSubview:textview];
    [wagon addSubview:videoview];
    [scrollview addSubview:wagon];
    [self addSubview:scrollview];       
  }
   return self;
   } 
```

并从表格单元格中调用此视图

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
NSString *CellIdentifier = @"StateCell";
UITableViewCell *cell;
cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}
Wagon1 *wg=[[Wagon1 alloc]init];
[cell addSubview:wg];
return cell; 
```

}

## 通过添加 wg，我得到了一个火车 boggi，货车视图.. 我最后或第一个想要 2 个货车视图和引擎。

** 表崩溃问题已解决**

1）为了解决崩溃问题，我在stackoverflow上进行了搜索，我找到了解决方案，例如添加代表或更改为保留或强bla bla ..但这些都不适合我。这是我的代码。还有一件事我不使用 XIB ，笔尖或情节提要..

```
@interface MainScreenViewController : UIViewController 
{
UITableView* table;
 NSString * name;
 }
 @property (strong, retain) UITableView *table;
 @property (strong, retain) NSString *name;;
 @end 
```

.m 文件

```
@interface MainScreenViewController ()
@end
@implementation MainScreenViewController
@synthesize table;
@synthesize name;
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil  
{
self = [super initWithNibName:Nil bundle:Nil];
if (self) {
    // Custom initialization
}
return self;
 }
- (void)viewDidLoad
 {
[super viewDidLoad];
name=[[NSString alloc]init];
name=@"testing of row";
CGRect frame = self.view.frame;
table= [[UITableView alloc] initWithFrame:frame];
table.autoresizingMask = UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth;
[table setDelegate:self];// app crash here 
 table.dataSource = self;// here also 
[table reloadData];
   [self.view addSubview:table];
 }
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {
  return 8;
 }
 - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
  {
  return @"test";
  }

 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath: (NSIndexPath*)indexPath;
   {
  return 190;
  }
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
 {
// Return the number of sections.
return 1;
  }
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
  {
   static NSString *simpleTableIdentifier = @"SimpleTableItem";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

  if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
}
cell.textLabel.text = name;
return cell;
  }
    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
  return (toInterfaceOrientation == UIInterfaceOrientationPortrait);
  }
 - (void)didReceiveMemoryWarning
  {
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
   }
 @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:09:13.583

我试过你的代码，它对我来说很完美，我想问题应该是视图控制器初始化，试试这个[应用程序应该在应用程序启动结束时有一个根视图控制器，](https://stackoverflow.com/questions/7520971/applications-are-expected-to-have-a-root-view-controller-at-the-end-of-applicati)让我知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:20:24.870

在这里，检查这是否发生在 App Delegate 中：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[MainScreenViewController alloc] initWithNibName:@"MainScreenViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

并且在`MainScreenViewController.m`

```
@interface MainScreenViewController () <UITableViewDataSource,UITableViewDelegate>

@property (nonatomic, strong)UITableView * table;
@property (nonatomic, strong)NSString * name;

@end

@implementation MainScreenViewController
@synthesize table,name;

- (void)viewDidLoad
{
    [super viewDidLoad];

    name = [[NSString alloc]init];
    name  = @"testing of row";

    CGRect frame = self.view.frame;

    table = [[UITableView alloc] initWithFrame:frame];
    table.autoresizingMask = UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth;
    [table setDelegate:self];
    [table setDataSource:self];

    [self.view addSubview:table];

    // Do any additional setup after loading the view, typically from a nib.
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 8;
}
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return @"Test";
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath: (NSIndexPath*)indexPath;
{
    return 190;
}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"SimpleTableItem";

    UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
    }
    //    cell.textLabel.text = name;

    // Add UIScrollView for Horizontal scrolling.

    NSArray * colors = [NSArray arrayWithObjects:[UIColor redColor], [UIColor greenColor],[UIColor blueColor],[UIColor orangeColor], [UIColor blackColor],[UIColor purpleColor], nil];
    UIScrollView * scrollView = [[UIScrollView alloc]initWithFrame:CGRectMake(0.0,0.0,320.0,190.0)];
    scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * colors.count,scrollView.frame.size.height);

    for (int i = 0; i < colors.count; i++) {
        CGRect frame;
        frame.origin.x = scrollView.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = scrollView.frame.size;

        UIView *subview = [[UIView alloc] initWithFrame:frame];
        subview.backgroundColor = [colors objectAtIndex:i];
        [scrollView addSubview:subview];
    }

    [cell.contentView addSubview:scrollView];

    return cell;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T10:46:50.007

正如你所提到的

我已经添加了两者但仍然崩溃..我得到了这个 2013-04-23 12:37:28.361 AMM[2231:c07] 应用程序窗口预计在应用程序启动结束时有一个根视图控制器 2013-04-23 12:37:32.533 AMM[2231:c07] *** -[MainScreenViewController respondsToSelector:]：消息发送到已释放实例 0x71edb70

在应用程序委托文件中，您是否将主视图控制器添加到窗口的根视图控制器？您也可以尝试使用一些硬编码文本而不是为单元格文本分配名称。

# http - svnedge 中的非法 cookie 属性

> ID：16167022
> 
> 赞同：1
> 
> 时间：2013-04-23T10:28:34.453
> 
> 标签：http, cookies

我在开发模式下使用 Subversion Edge。我正在尝试针对 CTF 服务器进行复制。转换为副本模式时，出现以下错误。

```
2013-04-23 12:50:59,100 [27048996@qtp-15880435-5] DEBUG integration.CtfRemoteClientService  - ---Start of headers---
2013-04-23 12:50:59,100 [27048996@qtp-15880435-5] DEBUG integration.CtfRemoteClientService  - Date: Tue, 23 Apr 2013 07:21:20 GMT
2013-04-23 12:50:59,100 [27048996@qtp-15880435-5] DEBUG integration.CtfRemoteClientService  - Server: Apache-Coyote/1.1
2013-04-23 12:50:59,101 [27048996@qtp-15880435-5] DEBUG integration.CtfRemoteClientService  - CtfUserName: nobody
2013-04-23 12:50:59,101 [27048996@qtp-15880435-5] DEBUG integration.CtfRemoteClientService  - Location: http://abc.example.com/sf/sfmain/do/myPage;jsessionid=uOtw2JGeCTy3sn1BSniWsDg4.tf
2013-04-23 12:50:59,101 [27048996@qtp-15880435-5] DEBUG integration.CtfRemoteClientService  - Content-Type: text/html;charset=UTF-8
2013-04-23 12:50:59,101 [27048996@qtp-15880435-5] DEBUG integration.CtfRemoteClientService  - Content-Length: 0
2013-04-23 12:50:59,101 [27048996@qtp-15880435-5] DEBUG integration.CtfRemoteClientService  - Set-Cookie: JSESSIONID=uOtw2JGeCTy3sn1BSniWsDg4.tf; Path=/sf
2013-04-23 12:50:59,101 [27048996@qtp-15880435-5] DEBUG integration.CtfRemoteClientService  - Set-Cookie: JSESSIONID=uOtw2JGeCTy3sn1BSniWsDg4.tf; Path=/sf; HttpOnly
2013-04-23 12:50:59,101 [27048996@qtp-15880435-5] DEBUG integration.CtfRemoteClientService  - Set-Cookie: sf_auth=uses7bfc94a1b3add70b1002263a&uOtw2JGeCTy3sn1BSniWsDg4.tf; Path=/
2013-04-23 12:50:59,101 [27048996@qtp-15880435-5] DEBUG integration.CtfRemoteClientService  - Set-Cookie: SoapOneTimeToken=15A425792DEA0ACBF19DC3F3050FC27B; Path=/
2013-04-23 12:50:59,101 [27048996@qtp-15880435-5] DEBUG integration.CtfRemoteClientService  - Cache-Control: max-age=0
2013-04-23 12:50:59,101 [27048996@qtp-15880435-5] DEBUG integration.CtfRemoteClientService  - Expires: Tue, 23 Apr 2013 07:21:20 GMT
2013-04-23 12:50:59,101 [27048996@qtp-15880435-5] DEBUG integration.CtfRemoteClientService  - Vary: User-Agent
2013-04-23 12:50:59,101 [27048996@qtp-15880435-5] DEBUG integration.CtfRemoteClientService  - Keep-Alive: timeout=15, max=10000
2013-04-23 12:50:59,101 [27048996@qtp-15880435-5] DEBUG integration.CtfRemoteClientService  - Connection: Keep-Alive
2013-04-23 12:50:59,121 [27048996@qtp-15880435-5] DEBUG errors.GrailsExceptionResolver  - Resolving exception from handler [org.codehaus.groovy.grails.web.servlet.mvc.SimpleGrailsController@1715d1]: java.lang.IllegalArgumentException: Illegal cookie attribute 
```

不知道问题是什么..帮我解决这个..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T05:41:46.343

看起来问题已在 java1.7 中修复 将 java 从 1.6 更新到 1.7 解决了我的问题。

[java跟踪的bug的链接](http://bugs.sun.com/view_bug.do?bug_id=6790677)

# awk - grep 行中的数字并将其附加到文件中

> ID：16167024
> 
> 赞同：3
> 
> 时间：2013-04-23T10:28:36.287
> 
> 标签：awk, grep, cat

我经历了几个 grep 示例，但不知道如何执行以下操作。

说，我有一个文件有一行

```
! some test here and number -123.2345 text 
```

我可以使用这条线

```
grep ! input.txt 
```

但是我如何从这一行获取数字（可能是正数或负数）并将其附加到另一个文件的末尾？是否可以将 grep 应用于 grep 结果？如果是，那么我可以通过类似的方式获得号码

```
grep -Eo "[0-9]{1,}|\-[0-9]{1,}" 
```

p/s/ 我正在使用 OS-X

p/p/s/ 我正在尝试从多个文件中获取数据并放入一个文件中以供以后绘制。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T10:30:34.963

您的命令格式为：

```
grep ! input.txt | grep -Eo "[0-9]{1,}|\-[0-9]{1,}" >> output 
```

我们`grep`使用`grep`管道运算符`|`，这让我们可以将命令链接在一起。要将此输出附加到文件，我们使用重定向运算符`>>`。

但是有几个问题。你的正则表达式写得更好：`grep -Eoe '-?[0-9.]+'`这允许小数并返回单个数字而不是两个，如果你想要以开头的行，`!`那么 grep`^!`最好避免与包含`!`但不以它开头的行匹配。更好的做法：

```
grep '^!' input | grep -Eoe '-?[0-9.]+' >> output 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:37:33.707

```
perl -lne 'm/.*?([\d\.\-]+).*/g;print $1' your_file >>anotherfile_to_append 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:42:09.183

```
$foo="! some test here and number -123.2345 text"
$echo $foo | sed -e 's/[^0-9\.-]//g'
$-123.2345 
```

编辑：-

对于一个文件，

```
[ ]$ cat log
! some test here and number -123.2345 text
some blankline
some line without "the character" and with number 345.566
! again a number 34
[ ]$ sed -e '/^[^!]/d' -e 's/[^0-9.-]//g' log > op
[ ]$ cat op
-123.2345
34 
```

现在让我们看看牙签 :)`'/^[^!]/d'` `/`模式的开始，`^`而不是（如乘以假），以和删除`[^!]`开头的任何行。第二个表达式，不匹配 0 到 9 之间的任何内容，并且 . 和-，（其他所有内容）替换为空（即删除）并完成:)`!``d``[^0-9.-]``//`

# python - matplotlib，在图中绘制多个图形/点

> ID：16167029
> 
> 赞同：2
> 
> 时间：2013-04-23T10:28:56.570
> 
> 标签：python, matplotlib, arduino

我正在尝试开发一个遥测系统，它从 Arduino 发送传感器数据，实时绘制。为此，我使用 Python 和 matplotlib 库。**我的问题是，每次新数据点到达时，我想通过将其绘制到与其他数据点相同的图形中来添加该数据点。**到目前为止，我找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T02:47:58.570

您可以使用 Plotly 中的 Arduino API 将数据从 Arduino 流式传输到 Plotly 图形中。您有两个选择：连续传输数据（听起来您会想要这样做），或传输单个数据块。

如果您刷新页面，它将每隔几秒钟更新一次图表。

Arduino API 可[在此处](http://plot.ly/api/arduino)获得。而且，如果您已经在使用 Python，则可以使用该`extend`选项将数据更新到另一个绘图中。Python API 在[这里](http://plot.ly/api/python)。

这是从 Arduino 传输的示例，您可以在[此处查看交互式版本](https://plot.ly/~flann321/9/)

![在此处输入图像描述](https://i.stack.imgur.com/ihizR.png)

全面披露：我在 Plotly 工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T12:39:17.497

据我所知，你有几种不同的方法来做到这一点（我会在我认为增加难度的地方列出它们

1.  制作位图文件，例如 .png，每次新数据点到达时都必须重新生成该文件。为此，您需要将旧数据存储在文件或数据库中的某个位置。
2.  在浏览器中使用 svg。然后您可以使用 javascript 添加点或线（例如[http://sickel.net/blogg/?p=1506](http://sickel.net/blogg/?p=1506)）
3.  制作位图，存储并编辑它以添加新点 - 如果您想要在一端“滚动旧点”，或者在更多数据到达时重新缩放图像，这真的会变得很棘手。
4.  制作一系列位图，并将总图作为许多切片的组合。- 在这里你可以轻松地“滚掉”旧积分，但如果你想重新调整比例，你就不走运了。

# c# - 发布 ASP.NET 应用程序时出错

> ID：16167031
> 
> 赞同：1
> 
> 时间：2013-04-23T10:29:02.663
> 
> 标签：c#, asp.net, visual-studio-2010

我正在尝试发布一个网络应用程序，以便通过 CuteFtp Pro 上传它。我通常这样做没有问题。但这一次，我面临着疯狂的错误！实际上，当我右键单击解决方案并单击“使用文件系统发布”选项为此选择适当的路径时，最后我得到了一个错误：

**错误**

```
Copying file Images\512px-Icon_-_upload_photo_2.svg.png to obj\Debug\Package\PackageTmp\Images\512px-Icon_-_upload_photo_2.svg.png failed.
Could not find file 'Images\512px-Icon_-_upload_photo_2.svg.png'.
0   0   GiftShop 
```

我真的不知道也不知道这个错误，因为没有名为的文件 `512px-Icon_-_upload_photo_2.svg.png`

事实上，我从来没有通过该项目获得过该名称的图像！可能是什么原因？我对这个错误的挑战感到非常沮丧。

有人可以帮我吗？

太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-19T07:00:49.790

每当我们从文件夹中删除内容但忘记从 Visual Studio 解决方案中删除时，这基本上都会发生。

要解决此问题，请执行以下步骤：-

1.  转到Visual Studio解决方案资源管理器并右键单击特定内容

2.  从项目中排除（黄色标记的文件）。

3.  右键单击并从 Visual Studio 解决方案资源管理器中删除这些文件。

***希望这会帮助你:)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:35:07.637

尝试从您的项目中删除该文件（右键单击并排除）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:36:11.023

做一件事从项目中排除您的**obj**文件夹。这是解决此类错误的最佳方法。

在您的解决方案资源管理器中有一个带有工具提示“显示所有文件”的选项卡。单击它，它将显示所有文件。

还有另一种方式

**更新：进入项目 --> 打包/发布设置，然后单击“排除生成的调试符号”。该项目开始发布，没有任何问题。**

为您提供另一种解决方案

您在项目中看到文件了吗？如果是这样，请右键单击并告诉它从项目中删除“ghost”文件。一旦你这样做，我会尝试再次发布。

如果它没有显示项目，您可能能够创建一个具有相同名称的假文件（只需在其中放置一些文本，因此大小不是 0kb）并且与其他 asp 文件位于相同的位置。确保“选择显示隐藏文件”并将其添加到项目中，然后及时删除。这将从根本上修复 VS 认为文件存在的损坏。

希望它有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T11:26:35.033

查看您的解决方案并排除此图像文件，但请记住单击**Show All Files**并尝试重建解决方案。

**更新 1**

我昨天遇到了同样的问题，这是项目中未包含的图像。请转到解决方案资源管理器单击**显示所有文件**并检查**512px-Icon_-_upload_photo_2.svg.png**图像是否包含在项目中，如果它是灰色的，那么它不包含在项目中，如果有一个黄色图标，请删除它来自项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T10:44:04.473

在项目的所有文件中搜索文件的字符串名称。删除线，你就完成了。

最好的猜测是它必须在您使用的 CSS 之一中被引用，特别是如果您使用的是 Jquery 或其任何插件。

# qt - 在 QT 中传递指针时出错

> ID：16167032
> 
> 赞同：1
> 
> 时间：2013-04-23T10:29:03.097
> 
> 标签：qt, pointers

在 QT 中有以下代码启动线程以发送命令。该线程将 char * 和 int 作为参数。在“运行”中，我使用构造函数给出的指针。代码是：

```
MyThread::MyThread(char * payld, int payld_size)
{
    payload_size = payld_size;
    payload_p = payld;
}

void MyThread::run()
{
    while(...)
    {
        sendCommand(payload_p, payload_size);
    }
} 
```

不幸的是，这不起作用，当我尝试使用 thread.start() 时，我的应用程序崩溃了。但是当我将其更改为：

```
MyThread::MyThread(char * payld, int payld_size)
{
    payload_size = payld_size;
    payload_p = payld;

    for(int i=0; i<payload_size; i++)
    {
        payload[i] =  payld[i];
    }
}

void MyThread::run()
{
    while(...)
    {
        sendCommand(payload, payload_size);
    }
} 
```

代码确实运行并且有时只会崩溃（对我来说看起来很随机）。谁能解释一下为什么第一版不起作用而第二版起作用？以及为什么第二个代码有时会崩溃的任何想法？可能是因为没有预定义有效载荷的大小（在头文件中我将其定义为

```
char payload[]; 
```

当我将其定义为：

```
char payload[10]; 
```

它似乎工作得更好，但测试很烦人，因为崩溃是非常随机的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:58:49.227

而不是摆弄`char*`，我会切换到[QString](http://qt-project.org/doc/qt-4.8/qstring.html)（因为你使用的是Qt）。这需要一些学习，但让代码在这个框架中顺利运行几乎是强制性的。然后声明

```
QString payload; 
```

并根据`sendCommand`实现，使用成员函数 QString 之一来获取 char*，例如`payload.toLatin1()`

# java - Tomcat在一定数量的请求后拒绝连接

> ID：16167034
> 
> 赞同：1
> 
> 时间：2013-04-23T10:29:09.493
> 
> 标签：java, http, tomcat7, tcp-ip

我正在使用带有 Java 1.7 的 Tomcat 7.0.32。我有一个用例，我的客户端是单线程的并以高速度发送请求。现在我的问题是我的服务器，处理所有请求，这是以高延迟为代价的。这是非常明显的，因为通信不是并发的。我知道我的连接器是否是 BIO 并且我将最大线程数设置为 1，我的接受计数为 1，然后如果我发送 3 个并发请求，它会因连接被拒绝而失败。这是预期的。

但是，如果客户端是单线程的，那么上述不适用，我可以继续发送尽可能多的请求。但是延迟下降。这又是自然的。现在我正在尝试检查是否有任何可用的服务器（即Tomcat）配置可以影响操作系统在获取连接的时间很长时拒绝连接。

有任何想法吗？

谢谢，

维姬

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-23T10:34:24.173

> 这是非常明显的，因为通信不是并发的。

这对我来说并不明显。我运行了十几个高度并发的 Tomcat。

如果你暗示 Tomcat 不是一个高度并发的服务器，那你就错了。这是。你需要重新审视你的观察和假设。

# php - 更新脚本加倍计数器

> ID：16167036
> 
> 赞同：0
> 
> 时间：2013-04-23T10:29:13.913
> 
> 标签：php, jquery, mysql, sql-update

我有这个小脚本来更新报告计数器

```
 /*********************************
     * Report an ad as inappropriate
     * This happens when a user click
     * the "Report ad" link on the ad
     * view page.
     * 
     * The ad can then be reviewed
     * and disabled.
     * 
     * @param int | The ad id
     *********************************/
    function report_ad($aid) {
        $row = $this->db->dbh->query('UPDATE '. $this->config->db_prefix .'_adverts SET been_reported = 1, num_reports = num_reports + 1 WHERE aid = '.$aid.'');
        $row->execute();        
    } 
```

和这个 jQuery 来处理链接点击

```
$("#report-ad").click(function(){

   var conf = confirm("Do you want to report this ad as inappropriate?");
   var aid = {$smarty.get.aid}

   if(conf == true) {
     $.ajax({
       url: 'reportad.php',
       type: 'post',
       data: {literal}{aid: aid}{/literal},
       success: function(data) {
          alert("The ad has been reported as inappropriate");
       },
       error: function(data) {
          alert("An error occured");
       }
     });
  }
  return false;
}); 
```

reportad.php 仅包含以下内容：

```
$adverts = new Adverts();
$adverts->report_ad($_POST["aid"]); 
```

由于某种原因，它用 2 更新 num_reports，所以如果它是 1，它将变为 3，然后是 5，依此类推。我看不出哪里有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T20:15:00.553

帮助我们帮助您：追踪错误发生的位置：

*   如果您手动执行查询怎么办？还有+2？（只要设置了 bes_reported，存储过程就会递增）？
*   函数是否被多次调用？如果您是 php 调试新手，

    邮件（'我@host.com'，'消息'）；

是不好的做法，但做起来很快。（也检查 file_put_content() 以获得简单的非基于对象的日志记录）。

另外，你后面不是少了一个分号吗

```
var aid = {$smarty.get.aid} 
```

问候

编辑：不确定 query() 是准备好的语句，还是直接运行查询？在这种情况下，query() 和 execute() 将是您寻找的啤酒的两倍。

# php - 如何安装旧版本的 PHP libmcrypt？

> ID：16167037
> 
> 赞同：2
> 
> 时间：2013-04-23T10:29:20.947
> 
> 标签：php, encryption, mcrypt

我的项目需要使用 RC6 密码。但是，因为我的服务器中安装的 mcrypt 库是 mcrypt 版本 2.5.8，所以它不支持 RC6 密码。正如[http://www.php.net/manual/en/mcrypt.ciphers.php](http://www.php.net/manual/en/mcrypt.ciphers.php)中所写，RC6 128 位密码仅受 libmcrypt 2.2.x 和 2.4.x 支持。

我试图找到如何安装 mcrypt 库版本 2.2.x 或 2.4.x，但我找不到它。

有人知道如何安装这个旧版本（libmcrypt 2.2.x 或 2.2.4）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T21:11:39.403

这是 2.2.4 版本的链接：

`ftp://195.134.99.74/pub/crypto/mcrypt/attic/libmcrypt/old/libmcrypt-2.2.4.tar.gz`

删除你的密码：

例如：删除 php-mcrypt 删除 libmcrypt

从新包安装：

例如：

```
cd /usr/local/src
tar -zxvf libmcrypt-2.2.4.tar.gz
cd /usr/local/src/libmcrypt-2.2.4
./configure --prefix=/usr/local
make
make install 
```

# android - 安卓模拟器上的 Systrace

> ID：16167038
> 
> 赞同：3
> 
> 时间：2013-04-23T10:29:24.630
> 
> 标签：android, systrace

我正在尝试在 android 4.2 (avd 17) 模拟器上使用 systrace

我在跟踪选项中启用了 usb debuggimg 并激活了 webview 并在此处遵循本指南[http://www.youtube.com/watch?feature=player_embedded&v=Q8m9sHdyXnE#t=31m15s](http://www.youtube.com/watch?feature=player_embedded&v=Q8m9sHdyXnE#t=31m15s)

但是当我尝试在 android 工具目录中使用 ./systrace.py 开始跟踪时，我看到以下输出

```
error opening /sys/kernel/debug/tracing/options/overwrite: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/sched/sched_switch/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/sched/sched_wakeup/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/power/cpu_frequency/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/power/cpu_idle/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/buffer_size_kb: No such file or directory (2)
error opening /sys/kernel/debug/tracing/trace_clock: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/workqueue/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/ext4/ext4_sync_file_enter/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/ext4/ext4_sync_file_exit/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/block/block_rq_issue/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/block/block_rq_complete/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/tracing_on: No such file or directory (2)
error: unable to start trace
error opening /sys/kernel/debug/tracing/tracing_on: No such file or directory (2)
error opening /sys/kernel/debug/tracing/options/overwrite: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/sched/sched_switch/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/sched/sched_wakeup/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/power/cpu_frequency/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/trace_clock: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/workqueue/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/ext4/ext4_sync_file_enter/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/ext4/ext4_sync_file_exit/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/block/block_rq_issue/enable: No such file or directory (2)
error opening /sys/kernel/debug/tracing/events/block/block_rq_complete/enable: No such file or directory (2)
unable to start tracing
error opening /sys/kernel/debug/tracing/buffer_size_kb: No such file or directory (2) 
```

有人知道我需要做什么才能使追踪工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T13:16:36.930

systrace 在模拟器上不支持。它仅支持设备。

更多细节：

[无法在 android 模拟器上运行 systrace 工具](https://stackoverflow.com/questions/16167626/unable-to-run-systrace-tool-on-android-emulator)

[在 Windows 7 上使用 Jelly Bean 4.1 模拟器在 ADB 中运行 systrace 工具时出错](https://stackoverflow.com/questions/11300773/error-running-systrace-tool-in-adb-using-a-jelly-bean-4-1-emulator-on-windows-7)

对于设备将您的 sdk 更新到最新版本。

systrace 文件路径是`android-sdk\tools\systrace\systrace.py`. 最新的安卓 4.2+ `android-sdk\platform-tools\systrace\systrace.py`。

root 并使用以下命令重新安装设备。

```
adb root
adb remount 
```

# javascript - 如何在 JavaScript 中上传文件？

> ID：16167040
> 
> 赞同：-1
> 
> 时间：2013-04-23T10:29:42.047
> 
> 标签：javascript, jquery, html

当我们在 html 中上传文件时，基本上我们会写

```
<input type="file" /> 
```

这段代码给出了`ChooseFile`按钮，`no file chosen`

但我想要的是创建一个超链接并单击超链接使其像输入`type="file"`类型一样工作 - 例如：

```
<a href="#" >ChooseFile</a> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:36:49.280

不要认为您可以设置超出特定限制的 input=file 按钮的样式，

检查这些链接

[http://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)

[样式输入类型文件？](https://stackoverflow.com/questions/4909228/style-input-type-file)

或者您可以尝试一个现成的插件来为您完成这项工作

[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:47:34.917

我想这对你有帮助..

```
<!DOCTYPE html>
    <html>
    <body>

    <p>Click on one of the text labels to toggle the related control:</p>

    <div>
      <a href='#UPLOAD' >Upload a file</a>  
      <input type='file'  name='file1'  
           style='cursor:pointer; opacity:0.01; alpha(opacity=1); position:relative; z-index:200; left: -10em; margin:-0.3em;' />   
    </div>

    </body>
    </html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:36:40.080

尝试使用现有的 jquery 插件来上传文件，我推荐这个：[http ://blueimp.github.io/jQuery-File-Upload/](http://blueimp.github.io/jQuery-File-Upload/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T13:32:38.137

你最好的选择是使用一个有据可查的技巧，最终将文件输入元素隐藏为一个 div 的子元素，该元素的样式可以满足你的需求。我说这是有据可查的，因为它是 SO 上的一个非常常见的常见问题解答，并且在互联网上的许多其他网站和博客文章中都有介绍。

不要使用 javascript 来单击您的文件输入元素。您可能会遇到浏览器设置的安全限制。有些浏览器甚至可能不允许这样做。当/如果您在使用 javascript 单击文件输入元素后尝试通过 javascript 发送文件时，其他诸如 IE 将引发安全错误。

如果您想避免重新发明轮子，您可以使用预先构建的库来为您处理跨浏览器文件上传的复杂性。我推荐[Fine Uploader](http://fineuploader.com)。它得到了很好的支持，非常活跃，并且发展迅速。完全披露：我是这个库的主要维护者。

# real-time - 更新页面内容而不刷新页面

> ID：16167042
> 
> 赞同：1
> 
> 时间：2013-04-23T10:29:49.827
> 
> 标签：real-time, updating

我想在数据库通知表发生变化时更新用户仪表板上的最新通知而不刷新它......就像在 Facebook 中实时更新帖子和评论......不需要刷新页面。我该怎么做。任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:34:49.207

它是一种叫做`asynchronous`. 您可以在不重新加载页面的情况下刷新网页或 DIV 或其他任何内容的内容。

实际上，您应该使用`AJAX`将另一个页面加载到页面中已经存在的 DIV 中，以便它会按时间刷新。

[AJAX](http://www.w3schools.com/Ajax/)

w3学校的文档非常简单，您可以在那里看到。

但问题是您应该使用另一个称为 Handler 的页面或其他东西来加载和处理内容，然后使它们准备好呈现在您的页面中，这样您就可以使用 javascript 计时器等时间来加载它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:02:47.093

我在一家名为 Realtime ( [http://www.realtime.co](http://www.realtime.co) ) 的公司工作，我们开发了一个非常酷的框架来处理实时数据。

它在云上运行，我们提供了许多不同的 API，您无需安装任何东西，您可以获得一个免费帐户（每月有 1.000.000 条免费消息和 30.000 个用户）。它允许您将数据推送到浏览器，这意味着您不会使用 AJAX 请求来敲击您的服务器。

在浏览器上，它使用 websockets（如果可用）。对于较旧的非 websocket 浏览器，我们将透明地回退到您的浏览器可以使用的任何内容。

查看[http://www.realtime.co](http://www.realtime.co)和[http://www.xrtml.org](http://www.xrtml.org)以获取下载和文档。如果您需要任何帮助，请告诉我，因为我是 Realtime 的开发人员传播者 :)

# nopcommerce - nopCommerce 将 Quantity 和 StockQuantity 更改为 Double 或 Float

> ID：16167044
> 
> 赞同：0
> 
> 时间：2013-04-23T10:29:54.607
> 
> 标签：nopcommerce

我正在使用 nopCommerce2.5，并且我已经广泛搜索了将“添加到购物车数量”和“StockQuantity”更新为小数或浮点数的人。

我需要至少 0.25 的库存，然后能够增加 0.25……</p>

有人做过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T03:56:04.527

只需跳入并更改整个解决方案中对 Quantity 的所有引用，一切正常。

# php - 如何在 Zend Form 中替换标签标签

> ID：16167045
> 
> 赞同：0
> 
> 时间：2013-04-23T10:29:59.897
> 
> 标签：php, zend-framework, zend-form

任务是使用装饰器或其他东西将 Zend 表单中的标签标签**替换为任何其他人（即 div）现在我有了**

```
<label for="field1" class="required">Field1</label>
<input type="text" name="field1" id="field1" value="" size="20"> 
```

我想拥有的

```
<div>Field1</div>
<input type="text" name="field1" id="field1" value="" size="20"> 
```

可能吗？怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:37:50.743

像这样的东西

```
$this->setElementDecorators(array(
array('ViewHelper'),
array('Errors', array('tag' => 'div', 'class' => 'error')),
array('Label', array('tag' => 'span')),
array('HtmlTag', array('tag' => 'div', 'class' => 'label')), 
```

));

如需更多参考，请访问此[链接](https://stackoverflow.com/questions/7546135/zend-framework-decorators-wrap-label-and-viewhelper-inside-a-div)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T14:07:23.297

不知道标签是否可能，我想您将不得不重写标签元素在表单中的呈现方式。我使用描述标签简单地做到了：

```
<div class="input-group input-group-sm col-md-12">
   <span class="input-group-addon">Name of the field</span>
   <input id="name" class="form-control" type="text" name="name">
</div> 
```

这是通过使用如下装饰器完成的：

```
public $inputDecorators_md12 = array(
        'ViewHelper',        
        array('Description', array('escape' => false, 'tag' => 'span', 'placement' => 'prepend', 'class'=>'input-group-addon')),
        array(array('row' => 'HtmlTag'), array('tag' => 'div', 'class' => 'input-group input-group-sm col-md-12'))
    ); 
```

请注意，您可以为描述定义任何类型的标签。

所以而不是

```
$field->setLabel('fieldlabel') 
```

你可以做：

```
$field->setDescription('fieldlabel')
      ->setDecorators($this->inputDecorators_md12); 
```

# c++ - 扫描目录以从 C++ 加载 Python 插件

> ID：16167049
> 
> 赞同：1
> 
> 时间：2013-04-23T10:30:09.050
> 
> 标签：c++, python, plugins, boost

我想制作一个可以同时处理 C++ 和 Python 插件的 C++ 应用程序。对于 C++ 部分，我很好，但我对 Python 插件有疑问。

我想要做的是有一个包含我所有 python 插件的目录，应用程序将加载位于该目录中的所有插件（如 Sublime Text 2）。

我的问题是我不知道如何“解析”python 脚本以获取从我的插件接口继承的每个类的名称以创建它们。

*   boost.python 中有没有办法做到这一点？（我还没有找到有关它的信息）
*   python 是否有我可以用来执行此操作的模块变量？（我对python不太好）
*   我需要使用像 antlr 这样的词法分析器吗？（好像很重……）
*   我是否需要像 C++ 中那样具有“创建”功能？（Sublime Text 2 似乎不需要那个）

最后，您知道处理 Python 插件的 C++ 应用程序，我可以在其中检查代码吗？

谢谢 ;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T23:51:30.780

这个问题有点加载/不清楚，但我会试一试。

> 我的问题是我不知道如何“解析”python 脚本以获取从我的插件接口继承的每个类的名称以创建它们。

这可以通过 python 脚本轻松完成；也许您可以编写一个并从您的 C++ 应用程序中调用它。这是一段代码，它找到 python 脚本'*.py'，导入它们，并查找子类称为类的类`PluginInterface`......不知道在那之后你需要做什么，所以我在那里放了一个 TODO。

```
def find_plugins(directory):
    for dirname, _, filenames in os.walk(directory): # recursively search 'directory'
        for filename in filenames:
            # Look for files that end in '.py'
            if (filename.endswith(".py")):
                # Assume the filename is a python module, and attempt to find and load it
                ###  need to chop off the ".py" to get the module_name
                module_name = filename[:-3]
                # Attempt to find and load the module
                try:
                    module_info = imp.find_module(module_name, [dirname])
                    module = imp.load_module(module_name, *module_info)
                    # The module loaded successfully, now look through all
                    # the declarations for an item whose name that matches the module name
                    ##  First, define a predicate to filter for classes from the module
                    ##  that subclass PluginInterface
                    predicate = lambda obj: inspect.isclass(obj) and \
                                            obj.__module__ == module_name and \
                                            issubclass(obj, PluginInterface)
                    for _, declaration in inspect.getmembers(module, predicate):
                        # Each 'declaration' is a class defined in the module that inherits
                        # from 'PluginInterface'; you can instantiate an object of that class
                        # and return it, print the name of the class, etc.
                        # TODO:  fill this in
                        pass
                except:
                    # If anything goes wrong loading the module, skip it quietly
                    pass 
```

也许这足以让你开始，虽然它并不完整，你可能想了解这里使用的所有 python 库，以便将来维护它。

# javascript - 使用 css 使表格 td 灵活

> ID：16167050
> 
> 赞同：0
> 
> 时间：2013-04-23T10:30:11.227
> 
> 标签：javascript, html, css

我创建了一个演示。我需要一些关于表格单元格灵活性的帮助。

我有一些表格单元格，它们的宽度应该是固定的。

但是单元格由标签组成，标签可以有长文本或短文本。

基于此标签，表格单元格应灵活工作。但条件是文本应该在一行中，并且不应该与其他单元格文本换行。

css;

```
td{
    width:100px;
    border:1px solid red;
} 
```

html:

```
<table>
    <tr>
        <td>
            <label>asjkdkasdhadhakdhad asdjkaskdhaksdhakdhakd askdhaskdhakdhakdjad akssdhadkhakd </label>
        </td>
        <td>
            <label>an </label>
        </td>
    </tr>

</table> 
```

[http://jsfiddle.net/NDMTH/3/](http://jsfiddle.net/NDMTH/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:42:24.660

如果我理解得很好，请使用该属性`min-width`而不是`width`：

```
td{
    min-width:100px;
    border:1px solid red;
} 
```

并且`white-space:nowrap`在`label`（[MDN 参考](https://developer.mozilla.org/en-US/docs/CSS/white-space)）：

```
label{
    white-space:nowrap;
    width:100%;
    border:1px solid blue;
} 
```

[JSFiddle.net 上的工作示例](http://jsfiddle.net/bigood/NDMTH/4/)

# sql - vb.net - 从数据库中读取空值

> ID：16167056
> 
> 赞同：2
> 
> 时间：2013-04-23T10:30:24.807
> 
> 标签：sql, vb.net

我有一个数据库，其中列中没有值（所以它是`null`），但我无法在 vb.net 中处理它。我试过这段代码：

```
 reader.Read()
            If String.IsNullOrEmpty(reader.GetString(0)) Then
                Return
            Else
                tilbulfolderTextBox.Text = reader.GetString(0)
            End If 
```

还有：

```
If reader.Read() = False Then 
```

与：

```
If IsDBNull(reader.Read()) Then 
```

但显然它不起作用，因为在`Else`我无法`Null`使用此方法获取值之后的语句中出现异常。我想你会通过阅读代码本身找出我对程序的要求。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T10:36:51.887

定义了 DbDataReader 基础对象的[IsDBNull方法来处理这种情况。](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.isdbnull.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)
当然，如果 reader.Read() 返回 false（意味着没有更多行可用），您当然不能尝试阅读某些内容

```
 If reader.Read() Then
        If reader.IsDBNull(0) Then
            Return
        Else
            tilbulfolderTextBox.Text = reader.GetString(0)
        End If
   End If 
```

另外，我没有看到更多您的代码，但请记住，如果您不关闭连接并处置此操作中涉及的对象，以这种方式返回可能是非常错误的

而且，是的，正如其他人指出的那样，Microsoft.VisualBasic 程序集中还有一个名为 IsDBNull 的函数，但是，我更喜欢使用 .NET 框架中定义的类提供的方法，而不是为兼容而提供的方法以前的VB版本

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T10:37:02.527

你应该使用`IsDbNull`函数来比较它`null`：

```
 reader.Read()
        If IsDbNull(reader(0)) OrElse String.IsNullOrEmpty(reader.GetString(0)) Then
            Return
        Else
            tilbulfolderTextBox.Text = reader.GetString(0)
        End If 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T10:34:21.547

.Net 有一种不同的类型来处理 SQL NULL：`DbNull`.

查看这篇关于如何处理它的帖子：[在 vb.net 中处理 dbnull 数据](https://stackoverflow.com/questions/222834/handling-dbnull-data-in-vb-net)

在您的情况下，您需要该`IsDbNull`功能，请查看此[MSDN 文档](http://msdn.microsoft.com/en-us/library/tckcces5(v=vs.71).aspx)。

```
If IsDbNull(data) Then
    return
Else
    tilbulfolderTextBox.Text = data
End If 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T10:35:16.667

使用[IsDBNull](http://msdn.microsoft.com/en-IN/library/tckcces5%28v=vs.71%29.aspx)函数确保来自 DataReader 的值是否为空。然后继续代码流程。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-23T10:36:18.640

听起来您的 IF 可能无法正常工作

尝试改用 IsDBNull。

IsDBNull 是一个布尔变量，可以像下面这样使用；

```
reader.Read()

If Not IsDbNull(reader.GetString(0)) Then
    tilbulfolderTextBox.Text = reader.GetString(0)
Else
    return
End If 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-23T10:37:09.567

试试这个

```
reader.Read()
        If IsDbNull(reader.GetString(0)) Then
            Return
        Else
            tilbulfolderTextBox.Text = reader.GetString(0)
        End If 
```

# php - jQuery - 仅更改单击的元素，而不是所有具有相同的类

> ID：16167057
> 
> 赞同：0
> 
> 时间：2013-04-23T10:30:25.420
> 
> 标签：php, javascript, jquery, html

HTML/PHP 部分中的代码是在一段时间查询中从数据库中提取的，因此这些类在整个文档中重复多次。当我单击 时`.up img`，它会更改页面上具有该类的所有元素。我知道我可以使用`$(this).`，但我不确定这将如何用于`$('.down img').`元素，因为它不是被单击的对象。我在想是否可以使用唯一`mod`属性来识别它？

**HTML/PHP：**

```
<div class="up"><img src="img/up-g.png" mod="<?=$row_mod['id']; ?>" /></div>
<div class="result"><?php echo votes_total($row_mod['id']); ?></div>
<div class="down"><img src="img/dw-g.png" mod="<?=$row_mod['id']; ?>"></div> 
```

**jQuery：**

```
$(function() {
    $('.up img').click( function(){
            var postDataUp = $(this).attr('mod');
            $.post('/votePost.php', {varUp: postDataUp}, function(o){
                console.log(o);
                $('.up img').attr("src","img/up.png");
                $('.down img').attr("src","img/dw-g.png");
            }, 'json');
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T10:37:35.520

你在正确的轨道上`this`，然后你导航到兄弟姐妹：

```
$(function() {
    $('.up img').click( function(){
            var $this = $(this);
            var postDataUp = $this.attr('mod');
            $.post('/votePost.php', {varUp: postDataUp}, function(o){
                console.log(o);
                $this.attr("src","img/up.png");
                $this.closest('.up').nextAll('.down').first().find('img').attr("src","img/dw-g.png");
            }, 'json');
    });
}); 
```

...对于`down`按钮也是如此。长线将是`prevAll`而不是`nextAll`：

```
$this.closest('.down').prevAll('.up').first().find('img').attr("src","img/up-g.png"); 
```

现在，如果它们在一个容器中，并且它们是唯一的`.up`并且`.down`（例如，一个表行，它们是该行中唯一的*，*但当然还有其他行中的其他行），它会更容易一些：

```
// The up case
$this.closest('.container').find('.down img').attr("src","img/dw-g.png");

// The down case
$this.closest('.container').find('.up img').attr("src","img/up-g.png"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:38:20.147

```
$(function() {
    $('.up img').click( function(){
        var $this=$(this);
        var postDataUp = $this.attr('mod');
        $.post('/votePost.php', {varUp: postDataUp}, function(o){
            console.log(o);
            $this.attr("src","img/up.png");
            $this.parent().next().next().find("img").attr("src","img/dw-g.png");
        }, 'json');
});
$('.down img').click( function(){
        var postDataDw = $(this).attr('mod');
        $.post('/votePost.php', {varDw: postDataDw}, function(o){
            console.log(o);
            $this.attr("src","img/dw.png");
            $this.parent().next().next().find("img").attr("src","img/up-g.png");
        }, 'json');
});
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T10:33:44.610

尝试

```
$(function() {
    $('.up img').click( function(){
            var postDataUp = $(this).attr('mod');
            $(this).attr('submitting', 'true');
            $.post('/votePost.php', {varUp: postDataUp}, function(o){
                console.log(o);
                $('.up img[submitting="true"]').attr("src","img/up.png");
                $('.down img').attr("src","img/dw-g.png");
            }, 'json');
    });
    $('.down img').click( function(){
            var postDataDw = $(this).attr('mod');
            $.post('/votePost.php', {varDw: postDataDw}, function(o){
                console.log(o);
                $(this).attr("src","img/dw.png");
                $('.up img').attr("src","img/up-g.png");
            }, 'json');
    });
}); 
```

编辑：尝试使用标志

# java - 使用 java 删除 XML 中的重复项的小问题

> ID：16167059
> 
> 赞同：1
> 
> 时间：2013-04-23T10:30:29.820
> 
> 标签：java, xml, dom, xpath, xml-parsing

这是示例 XML：

```
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
        <check>
        <val>
            <Samsung>
               <name value="galaxy" />
               <name value="galaxy" />
               <name value="galaxys" />
                <id value="123" />
                <id value="123" />
                <cal>23</cal>
                <cal>23</cal>
                <name2 value="galaxy" />
           </Samsung>
            <htc>
               <name value="galaxy" />
               <name value="galaxy" />
                <name value="galaxys" />
              <id value="123" />
              <id value="123" />
             <name2 value="galaxy" />
            </htc>
       </val>
      </check> 
```

这是我编写的 java 代码，它找到重复的元素（包括它们的属性）并删除它们：

```
 import java.io.File;
     import java.io.IOException;

  import javax.xml.parsers.DocumentBuilder;
      import javax.xml.parsers.DocumentBuilderFactory;
     import javax.xml.parsers.ParserConfigurationException;
 import javax.xml.transform.OutputKeys;
        import javax.xml.transform.Transformer;
       import javax.xml.transform.TransformerException;
       import javax.xml.transform.TransformerFactory;
       import javax.xml.transform.dom.DOMSource;
      import javax.xml.transform.stream.StreamResult;
      import javax.xml.xpath.XPathConstants;
    import javax.xml.xpath.XPathExpression;
      import javax.xml.xpath.XPathExpressionException;
      import javax.xml.xpath.XPathFactory;

   import org.w3c.dom.Document;
      import org.w3c.dom.Element;
  import org.w3c.dom.Node;
      import org.w3c.dom.NodeList;
      import org.xml.sax.SAXException;
public class RecursiveNodeCheck {

/**
 * @param args
 */
public static String parent;
public static void main(String[] args) {
    // TODO Auto-generated method stub
    String path="D:/vodafone/parse.xml";

    try {

        File file = new File(path);

        DocumentBuilder dBuilder = DocumentBuilderFactory.newInstance()
        .newDocumentBuilder();

        Document doc = dBuilder.parse(file);

        System.out.println("Root element :" + doc.getDocumentElement().getNodeName());
        parent=doc.getDocumentElement().getNodeName();
        String name="//"+parent+"/*";
        XPathExpression expr = XPathFactory.newInstance().newXPath()
        .compile(name);

        NodeList list = (NodeList) expr.evaluate(doc, XPathConstants.NODESET);

        recursive(doc,list,path);

    } catch (Exception e) {
        System.out.println(e.getMessage());
    }

}

private static void recursive(Document doc,NodeList list,String path) throws XPathExpressionException, TransformerException, SAXException, ParserConfigurationException, IOException {
    // TODO Auto-generated method stub
    for (int count = 0; count < list.getLength(); count++) {
        Node tempNode = list.item(count);
        if(!(tempNode.getNodeName().equalsIgnoreCase(parent) )){
            if(!tempNode.hasChildNodes()&& tempNode.getNodeType() == Node.ELEMENT_NODE){
                Node head=  tempNode.getParentNode();

                Node current=head.getFirstChild();

                String exp=null;
                while(current!=null ){
                    if (current.getNodeType() != Node.ELEMENT_NODE ){
                        current=current.getNextSibling();
                    }else{
                        if( current.hasAttributes()  ){
                            String key = current.getAttributes().getNamedItem("value").getNodeValue();
                            String value="";
                            if(current.getNodeValue()!=null){
                                value = current.getNodeValue();
                            }
                            exp= "//"+head.getNodeName()+"/"+current.getNodeName()+"[@value='"+key+"']"+value;

                            DelElements(doc,exp,path);
                            current = current.getNextSibling();
                        }
                        else{

                            exp= "//"+head.getNodeName()+"/"+current.getNodeName()+"/text()";
                            DelElements(doc,exp,path);
                            current = current.getNextSibling();
                        }
                    }

                }

            }else{
                recursive(doc,tempNode.getChildNodes(),path);   
            }}

        if (tempNode.hasChildNodes()) {

            // loop again if has child nodes
            recursive(doc,tempNode.getChildNodes(),path);   

        }
        System.out.println("Node Name =" + tempNode.getNodeName() + " [CLOSE]");

    }

}

private static void DelElements(Document doc, String exp,String path) throws TransformerException, SAXException, ParserConfigurationException, IOException {
    // TODO Auto-generated method stub

    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setNamespaceAware(true);

    NodeList nodes = null;
    try {
         doc = factory.newDocumentBuilder().parse(new File(path));

        XPathExpression expr = XPathFactory.newInstance().newXPath()
        .compile(exp);

        nodes = (NodeList) expr.evaluate(doc, XPathConstants.NODESET);
    } catch (XPathExpressionException e) {
        e.printStackTrace();
    }

     for ( int i= nodes.getLength()-1;i>0; i--) {
            System.out.println("."); //progress indicator
            if (nodes.item(i).getNodeType() == Node.TEXT_NODE ){
                 nodes.item(i).getParentNode().removeChild( nodes.item(i));

            }
            else{
                 Element el = (Element) ( nodes.item(i));
               el.getParentNode().removeChild(el);
            }

        }
    TransformerFactory transformerFactory = TransformerFactory.newInstance();

    Transformer transformer = transformerFactory.newTransformer();
    transformer.setOutputProperty(OutputKeys.INDENT, "yes");
    DOMSource source = new DOMSource(doc);
    StreamResult result = new StreamResult(new File(path));
    transformer.transform(source, result);
    // TODO Auto-generated method stub

}

    }
     } 
```

这是我得到的输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<check>
<val>
    <Samsung>
        <name value="galaxy"/>

        <name value="galaxys"/>
        <id value="123"/>

        <cal>23</cal>
        **<cal/>**
        <name2 value="galaxy"/>
    </Samsung>
    <htc>
        <name value="galaxy"/>

        <name value="galaxys"/>
        <id value="123"/>

        <name2 value="galaxy"/>
    </htc>
</val>
</check> 
```

在上面的输出 xml 中，`<cal/>`标签仍然存在。我应该如何删除这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:16:23.213

对 XPATH 表达式进行了更改： `exp= "//"+head.getNodeName()+"/"+current.getNodeName()+"[text()='"+current.getTextContent()+"']";`

这个给出了正确的输出。

# c++ - ostringstream 给了我隐式实例化错误

> ID：16167065
> 
> 赞同：24
> 
> 时间：2013-04-23T10:30:45.890
> 
> 标签：c++, string

我正在尝试[此答案](https://stackoverflow.com/a/332132/768472)中提供的优雅解决方案，但无论我尝试什么，我都无法通过`Implicit instantiation of undefined template`此行的错误：

`std::ostringstream strs;`

我需要做什么？我已经包括了以下内容，我敢肯定这是矫枉过正的。作为第二个问题，似乎很难找到 ostringstream 究竟需要包含哪些内容：

```
#include <iostream>
#include <fstream>
#include <iosfwd>
#include <ios> 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-23T10:31:29.847

`stringstream`类在`sstream`标题中定义，所以写

```
#include <sstream> 
```

一切都会好起来的。

# f# - 你能在 foq 中设置递归模拟吗？

> ID：16167068
> 
> 赞同：2
> 
> 时间：2013-04-23T10:30:49.683
> 
> 标签：f#, mocking, easynetq, foq

我会让用 Foq 模拟一个[IBus](https://github.com/mikehadlow/EasyNetQ/blob/master/Source/EasyNetQ/IBus.cs)。

上的方法之一`IBus`是`OpenPublishChannel`，它返回一个[IPublishChannel](https://github.com/mikehadlow/EasyNetQ/blob/master/Source/EasyNetQ/IPublishChannel.cs)。IPublishChannel 又具有`Bus`返回 parent 的属性`IBus`。

我当前的代码如下，但显然它没有编译，因为 mockBus 不是由我需要的点定义的。有没有一种方法可以设置这样的递归模拟，而无需创建两个接口的模拟？

```
open System
open EasyNetQ
open Foq

let mockChannel = 
    Mock<IPublishChannel>()
        .Setup(fun x -> <@ x.Bus @>).Returns(mockBus)
        .Create()
let mockBus =
    Mock<IBus>()
        .Setup(fun x -> <@ x.OpenPublishChannel() @>).Returns(mockChannel)
        .Create() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:58:29.493

Foq 支持 Returns : unit -> 'TValue 方法，因此您可以懒惰地创建一个值。

使用一点突变实例可以互相引用：

```
type IPublishChannel =
    abstract Bus : IBus
and IBus =
    abstract OpenPublishChannel : unit -> IPublishChannel

let mutable mockBus : IBus option = None
let mutable mockChannel : IPublishChannel option = None

mockChannel <-
    Mock<IPublishChannel>()
        .Setup(fun x -> <@ x.Bus @>).Returns(fun () -> mockBus.Value)
        .Create()
    |> Some

mockBus <-
    Mock<IBus>()
        .Setup(fun x -> <@ x.OpenPublishChannel() @>).Returns(fun () -> mockChannel.Value)
        .Create()
    |> Some 
```

# java - 从android模拟器写入PC上的远程文件

> ID：16167071
> 
> 赞同：0
> 
> 时间：2013-04-23T10:30:53.970
> 
> 标签：java, android

从 android 模拟器将字符串写入远程文件时出现问题。什么都没有发生，没有错误，没有异常，也没有写入数据

这是我的代码：

```
 urlFile  = new URL("http://10.0.2.2/remoteDB/dataEdit.txt" );
                         urlConn = urlFile.openConnection();
                               urlConn.setDoOutput(true); 

                         OutputStreamWriter out = new OutputStreamWriter(
                                             urlConn.getOutputStream());

                         PrintWriter out2 = new PrintWriter(out);

                          out2.println("bla bla bla");
                           out2.flush();
                                               out2.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:44:28.747

http 协议（在您的 URL 中使用）不允许您打开要写入的远程文件。为了实现这一点，您需要在 PC 的 http 服务器上安装一些 CGI 类型的应用程序来弥补这一差距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:02:46.333

您可以在您的 pc 上使用 ftp 服务器并从您的代码写入 ftp 服务器上的文件。这是一个非常简单的方法

# mysql - 从日期中向前选择 10 行和向后选择 10 行

> ID：16167073
> 
> 赞同：0
> 
> 时间：2013-04-23T10:30:59.080
> 
> 标签：mysql, sql, union

我试图从今天的日期中以任一方向（时间向前和向后）和日期顺序选择 10 行。到目前为止我得到的最好的是：

```
SELECT * FROM (
  SELECT * FROM foo WHERE dt >= now() ORDER BY dt ASC LIMIT 10
    UNION
  SELECT * FROM foo WHERE dt < now() ORDER BY dt DESC LIMIT 10
) ORDER BY dt ASC; 
```

有没有更好/更有效的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:55:29.963

您的想法是合理的，但这是正确的查询。

```
SELECT * FROM (
  SELECT * FROM (SELECT * FROM foo WHERE dt >= now() ORDER BY dt ASC LIMIT 10) A
    UNION ALL
  SELECT * FROM (SELECT * FROM foo WHERE dt < now() ORDER BY dt DESC LIMIT 10) B
) C
ORDER BY dt ASC; 
```

每个查询级别只允许一个`ORDER BY`子句，因此您实际上需要进一步子查询`A`和`B`显示的部分。此外， UNION ALL 避免了排序操作，因为您知道这两个集合是不同的。

索引`foo.dt`将确保此查询尽可能快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:22:52.590

而不是你可以使用**简单** `query`

```
(SELECT * FROM one WHERE dt >= now() ORDER BY dt ASC LIMIT 10)
    UNION ALL
(SELECT * FROM one WHERE dt < now() ORDER BY dt DESC LIMIT 10) 
```

# ruby - 我想用 ruby 编辑一个格式良好的 excel 文件

> ID：16167075
> 
> 赞同：3
> 
> 时间：2013-04-23T10:31:00.557
> 
> 标签：ruby, excel

我有一个格式正确的 excel 文件，其中有很多我想保留的宏和样式。然后我有我想在文件中输入的信息。我想用红宝石来做。

我已经尝试过 roo 和电子表格，但他们似乎无法真正编辑文件，只需创建一个新文件并在此过程中丢失所有格式。

感觉应该很简单，只需编辑我想要的单元格并再次保存文件，但显然它比我最初更复杂（或者我完全失明）

任何帮助表示赞赏。

我现在正在学习 ruby​​，所以这就是为什么我更喜欢 ruby​​ 的解决方案。如果您知道有更适合的语言，请随时为我指出正确的方向，我会检查一下。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:44:52.363

从经验来看，没有 Ruby gem 可以处理所有花里胡哨、宏和样式的 Excel 文件。很遗憾，因为 Excel 是微软最好的产品。根据我的经验，`spreadsheet`库可以从 Excel、LibreOffice Calc 等导入旧数据（我不确定 Gnumeric）。

至于您从 Ruby 获取数据到 Excel 的问题，我建议您先将 Ruby 输出另存为单独的文件（电子表格、CSV、文本...），然后教 Excel 导入它（例如使用宏）。

另一种可能性是放弃 Excel 用于数据处理任务（并可能保留它用于数据呈现任务）。Excel 非常适合演示和简单的数据处理，但对于复杂的算法非常不利。

我写了 gems`yzz`和`y_nelson`，我打算用 Ruby 代替电子表格。Yzz 在 Ruby 中提供了 Ted Nelson 的 ZZ 结构（ZZ 结构是电子表格数据结构的改进版本）并将`y_nelson`其与 Petri 网混合（因为 Petri 网是 Excel 单元函数的改进版本）。从数学上讲，电子表格是某种多维正交数据单元格加上 Petri 网执行引擎的混合体。有了`y_nelson`，我希望将非常错过的​​ Excel 功能带入 Ruby，同时朝着更好的抽象迈出一步。

# episerver - EPiServer：具有 siteId 的站点已注册

> ID：16167077
> 
> 赞同：0
> 
> 时间：2013-04-23T10:31:03.167
> 
> 标签：episerver

我的 EPiServer 应用程序抛出以下错误：

> 具有 siteId 的站点已注册。首先调用 Reset 方法。

在异常发生之前没有代码更改，并且此实例的副本运行没有任何问题。

我的第一次尝试是最明显的，将 web.config 中的站点 ID 更改为其他内容。这没有帮助。但是，更改配置会重新启动应用程序，并在刷新页面后显示另一个异常：

> 此从站点在验证主许可证信息时失败

再次刷新后，出现第三个异常：

> ClassFactory 未初始化

以下刷新带回有关重复站点 ID 的原始异常。

我不知道会发生什么。在谷歌搜索没有带来任何结果。应用程序的每次重新启动（通过 iisreset 或通过配置更改）都会导致站点抛出所有这三个异常，并且总是以相同的顺序：许可证、类工厂和直到下一次重新启动重复的站点 ID。

我将非常感谢任何可以引导我找到解决方案的帮助。

**编辑：我正在使用 EPiServer 5**

**编辑 2：**我现在很确定“具有 siteid ... 的站点”异常在这里不相关。这只是以前失败的结果。这是基于异常发生的事情（看起来不太合乎逻辑，但很好）：

1.  IIS 已启动
2.  应用程序到达静态初始化程序并尝试验证主许可证。它失败了，抛出异常并且该站点尚未注册（在数据库中没有在 tblSiteConfig 中创建条目）
3.  页面已刷新
4.  应用程序到达静态初始化程序并**成功验证许可证，**然后注册站点，代码更进一步并在插件初始化方法上失败（类工厂未初始化）
5.  页面已刷新
6.  应用程序到达静态初始化程序并再次成功验证许可证，该站点失败，因为它已经注册
7.  第 6 步一直在进行，直到下一次 IIS 重新启动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:59:27.300

更改 siteId 后，您需要清除数据库中的一些表。我手头没有 EPi5 数据库，但我记得它至少是 tblSite。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:07:54.003

根据消息，看起来您正在使用 EPiServer 多站点功能。

首先要检查的是`/sites/site`部分`episerver.config`- 它们应该包含不同的`siteId`属性。

接下来，在`episerver.framework.config`文件中，清除`siteHostMapping`部分，所以它应该是完全空的：

```
<siteHostMapping /> 
```

然后，一个一个地启动站点。

问题的可能原因是站点启动期间出现异常 - 因此，如果无法修复这些错误，您仍然会遇到类似或相同的问题。请务必打开日志记录并检查日志。

# c# - 从字符串生成器/字符串 c# 中删除第一行

> ID：16167078
> 
> 赞同：3
> 
> 时间：2013-04-23T10:31:04.043
> 
> 标签：c#, stringbuilder

好的，所以我试图在表单中创建一个类似于文本框的“控制台”，但是一旦你到达底部，而不是能够向上滚动，它只会删除顶行，我遇到了一些困难。到目前为止，当它到达底部时，它会删除顶行，但只有一次，它只是照常进行。这是我的功能：

```
 StringBuilder sr = new StringBuilder();
    public void writeLine(string input)
    {
        string firstline = "";
        int numLines = Convert.ToString(sr).Split('\n').Length;
        if (numLines > 15)      //Max Lines
        {                
            sr.Remove(0, Convert.ToString(sr).Split('\n').FirstOrDefault().Length);              
        }
        sr.Append(input + "\r\n");
        consoleTxtBox.Text = Convert.ToString(sr) + numLines;
    } 
```

如果有人能解决这个问题就太好了，谢谢

卢卡斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T10:37:02.307

首先，您的解决方案有什么问题：它不起作用的原因是它删除了该行的内容，但它忽略了`\n`最后的内容。添加`1`应该解决这个问题：

```
sr.Remove(0, Convert.ToString(sr).Split('\n').FirstOrDefault().Length+1);              
//                                                                    ^
//                                                                    |
//   This will take care of the trailing '\n' after the first line ---+ 
```

现在用一种更简单的方法来做：你需要做的就是找到第一个`\n`，并在它之后获取子字符串，如下所示：

```
string RemoveFirstLine(string s) {
    return s.Substring(s.IndexOf(Environment.NewLine)+1);
} 
```

请注意，即使字符串中没有换行符，即`IndexOf`返回时`-1`（在这种情况下不会删除任何内容），此代码也不会崩溃。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T10:35:49.970

您可以使用 TextBox 中的[Lines](http://msdn.microsoft.com/en-GB/library/system.windows.forms.textboxbase.lines.aspx)属性。这将获取 TextBox 中的所有行作为一个数组，然后创建一个不包含第一个元素 ( `Skip(1)`) 的新数组。它将这个新数组分配回文本框。

```
string[] lines = textBox.Lines;
textBox.Lines = lines.Skip(1).ToArray(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T10:34:37.330

一个简单的替代方法：您可以将字符串拆分`Environment.NewLine`并返回除第一个之外的所有字符串：

```
public static string RemoveFirstLine(string input)
{
    var lines = input.Split(new[] { Environment.NewLine }, StringSplitOptions.None);
    return string.Join(Environment.NewLine, lines.Skip(1));
} 
```

[**演示**](http://ideone.com/Xh9usV)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T10:37:02.547

你可以删除这一行

```
 var lines = lines.Remove(0, lines.ToString().IndexOf(Environment.NewLine)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-19T06:54:17.777

大多数解决方案似乎没有考虑到 Enviroment.NewLine 可以包含多个字符（len > 1）这一事实。

```
 public void RemoveFirstStringFromStringBuilder()
    {
        var lines = new StringBuilder();

        lines.AppendLine("abc");

        var firstLine = lines.ToString().IndexOf(Environment.NewLine, StringComparison.Ordinal);

        if (firstLine >= 0)
            lines.Remove(0, firstLine + Environment.NewLine.Length);

        Console.WriteLine(lines.Length);
        Console.WriteLine(lines.ToString());
    } 
```

打印出：0 和 ""

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-09T13:26:20.750

对我有用的是：

```
 var strBuilder = new StringBuilder();
    strBuilder.AppendLine("ABC");
    strBuilder.AppendLine("54");
    strBuilder.AppendLine("04");

    strBuilder.Remove(0, strBuilder.ToString().IndexOf(Environment.NewLine) + 2);

    Console.WriteLine(strBuilder); 
```

+1 的解决方案对我不起作用，可能是因为在这种情况下 EOF 被解释为 2 个字符 (\r\n)

# android - 应用程序崩溃显示 NumberFormatException：无法在 Android 中将“”解析为整数？

> ID：16167083
> 
> 赞同：0
> 
> 时间：2013-04-23T10:31:28.797
> 
> 标签：android, matcher, numberformatexception

在我的应用程序中，我使用 match.group(int group) 方法返回与给定正则表达式组匹配的文本，其中“match”是 Matcher 对象。但是在运行应用程序后，我得到了 NumberFormatException。在使用 match.group() 方法之前，我尝试使用 match.find() 和 match.matches() 方法，但后来我收到 IllegalStateException 并且应用程序再次崩溃。

这是我的代码：

```
public int getProgramNumberInt () {
    Matcher m = PROGRAM_NUMBER_INT_PATTERN.matcher(programNumber);
    return m.matches() ? Integer.parseInt(m.group(1)) : 0;
} 
```

崩溃发生在这一行：

```
return m.matches() ? Integer.parseInt(m.group(1)) : 0; 
```

日志猫：

```
04-23 15:45:25.096: E/AndroidRuntime(16260): FATAL EXCEPTION: main
04-23 15:45:25.096: E/AndroidRuntime(16260): java.lang.NumberFormatException: unable to parse '' as integer
04-23 15:45:25.096: E/AndroidRuntime(16260):    at java.lang.Integer.parseInt(Integer.java:412)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at java.lang.Integer.parseInt(Integer.java:382)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at com.example.Matcher.getProgramNumberInt(Starter.java:101)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at com.example.Matcher.results.ResultsActivity$Adapter.getPayoffView(ResultsActivity.java:127)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at com.example.Matcher.results.ResultsActivity$Adapter.getView(ResultsActivity.java:62)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.widget.AbsListView.obtainView(AbsListView.java:1294)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1198)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.widget.ListView.onMeasure(ListView.java:1109)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.View.measure(View.java:8171)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:381)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.View.measure(View.java:8171)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.View.measure(View.java:8171)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.View.measure(View.java:8171)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.View.measure(View.java:8171)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.View.measure(View.java:8171)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.View.measure(View.java:8171)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:381)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.View.measure(View.java:8171)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.View.measure(View.java:8171)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.View.measure(View.java:8171)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.View.measure(View.java:8171)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.View.measure(View.java:8171)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.ViewRoot.performTraversals(ViewRoot.java:801)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.os.Looper.loop(Looper.java:123)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at android.app.ActivityThread.main(ActivityThread.java:4627)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at java.lang.reflect.Method.invokeNative(Native Method)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at java.lang.reflect.Method.invoke(Method.java:521)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-23 15:45:25.096: E/AndroidRuntime(16260):    at dalvik.system.NativeStart.main(Native Method) 
```

您能否让我知道是否有任何方法可以防止应用程序崩溃并解决此问题？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:33:54.237

该方法`m.group(1)`返回 '' 空字符串。所以`parseInt()`方法会抛出`NumberFormatException`。

# z3 - z3 战术无法通过在线界面获得

> ID：16167088
> 
> 赞同：1
> 
> 时间：2013-04-23T10:31:40.490
> 
> 标签：z3

我打印 Z3 中的战术列表。

```
for (int i=0;i < Z3_get_num_tactics(z3_cont);i++)
    cout<<"\n"<<Z3_get_tactic_name(z3_cont,i); 
```

1.  qflra
2.  qfnia
3.  qfbv
4.  qfnra
5.  qflia
6.  恢复-01
7.  因素
8.  添加边界
9.  传播不等式
10.  diff-neq
11.  度数偏移
12.  lia2pb
13.  调频
14.  pb2bv
15.  规范化边界
16.  净化算术
17.  nla2bv
18.  修复-dl-var
19.  分布式
20.  限制条件
21.  简化
22.  删除
23.  ctx-简化
24.  snf
25.  神经网络
26.  德
27.  辅因子白蚁
28.  elim-uncnstr
29.  分句
30.  对称减少
31.  occf
32.  tseitin-cnf
33.  tseitin-cnf-核心
34.  求解方程
35.  传播价值
36.  减少参数
37.  跳过
38.  失败
39.  未定则失败
40.  bv1-爆炸
41.  比特爆炸
42.  最大 bv 共享
43.  减小 bv 大小
44.  qfnra-nlsat
45.  卫星
46.  坐
47.  预处理
48.  smt
49.  ctx-solver-simplify
50.  艾格
51.  喇叭
52.  单位包含简化
53.  qe光
54.  q-sat
55.  q
56.  vsubst
57.  准宏
58.  BV
59.  ufbv
60.  宏查找器
61.  fpa2bv
62.  qffpa
63.  qffpabv
64.  qfbv-sls
65.  子铺路

此外，我发现并非所有这些都可以通过在线界面使用。问题是：我在哪里可以找到关于它们的文档（可能是一些论文）？哪些在在线界面中可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:45:54.903

[在http://rise4fun.com/z3py](http://rise4fun.com/z3py)上有一个关于使用策略的完整在线教程。它包含指向论文的指针，包括：Leonardo de Moura 和 Grant Passmore。SMT 求解中的战略挑战，人工智能讲义第 7788 卷。Springer，2013。它解释了基本组合器的使用（失败、跳过和-然后等）。可从 [http://research.microsoft.com/en-us/um/people/leonardo/publications/index.html访问](http://research.microsoft.com/en-us/um/people/leonardo/publications/index.html)

要获取有关每种策略的最详细信息，可以从[http://z3.codeplex.com](http://z3.codeplex.com)公开获得 Z3 源代码。

# http - http 上的页面会被缓存，而 https 上的页面则不会

> ID：16167090
> 
> 赞同：2
> 
> 时间：2013-04-23T10:31:43.273
> 
> 标签：http, http-caching

我有一个网络应用程序。引导页面不应被缓存，但 chrome 总是从缓存中获取页面，而它不会通过 https 显示该行为，它可以正常工作。

我的标题如下：

```
Request URL:https://localhost:7002/
Request Method:GET
Status Code:200 OK
Request Headersview source
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8,de-CH;q=0.6,de;q=0.4
Cache-Control:max-age=0
Connection:keep-alive
Host:localhost:7002
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.56 Safari/537.36
Response Headersview source
Cache-Control:no-cache
Content-Length:2215
Content-Type:text/html; charset=UTF-8
Date:Tue, 23 Apr 2013 10:19:03 GMT
Expires:Thu, 01 Jan 1970 00:00:00 GMT
Pragma:no-cache
Set-Cookie:JSESSIONID=WrSkR2gXB3Jkycwhtzmhwgkpzv4Nn1V6nshsMWZyHl924cNp6Y6L!-1407827785; path=/; HttpOnly
Vary:Accept-Encoding
X-Powered-By:Servlet/2.5 JSP/2.1 
```

http 上的标头完全相同。

我已经在 HTTP 标头和元 http-equiv 中尝试了 max-age、no-store、must-revalidate、ETag、Last-Modified、Pragma，但似乎没有任何东西可以防止缓存。

任何想法如何防止 chrome 缓存？

PS：iOS 上的 Safari 显示相同的行为。

# android - 当 ImageView 具有标志 clickable=true 时，onClickListener 未收到任何事件

> ID：16167091
> 
> 赞同：1
> 
> 时间：2013-04-23T10:31:50.360
> 
> 标签：android, android-relativelayout, android-imageview

`RelativeLayout`当按钮保持按下状态时，我必须`android:clickable="true"`将图像颜色从灰色更改为白色（否则如果`android:clickable="false"`它不起作用）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
android:id="@+id/contacts"
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_weight="0.2"
android:layout_width="wrap_content"
android:layout_height="wrap_content">

<ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:adjustViewBounds="true"
    android:clickable="true"   <!-- here clickable = true  -->
    android:contentDescription="@string/content_description_contacts"
    android:scaleType="fitXY"
    android:src="@drawable/contacts" />

<TextView
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_alignBottom="@id/image"
    android:paddingBottom="10dp"
    android:textColor="@drawable/text_color"
    android:text="@string/button_contacts"
    android:textSize="12sp" />    
</RelativeLayout> 
```

![在此处输入图像描述](https://i.stack.imgur.com/G28sM.png)

看起来像：

![在此处输入图像描述](https://i.stack.imgur.com/iqK3m.png)

我的`contacts`选择器似乎：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" 
    android:drawable="@drawable/contacts_over" />
<item android:state_selected="true"
    android:drawable="@drawable/contacts_selected" />
<item
     android:drawable="@drawable/contacts_default" />
</selector> 
```

如您所见，我有 3 张图像：默认情况下，选中并按下。

根据文档，设置`android:clickable="true"`为后`ImageView`我停止获取`onClickListener`事件。

```
 contacts = (RelativeLayout) findViewById(R.id.contacts);
 contacts.setOnClickListener(this); 
```

所以我有

*   或设置`clickable="false"`并且“state_pressed”不起作用
*   或设置`clickable="true"`但`onClickListener`不起作用（未收到事件）

我该怎么办，有什么解决方法吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:47:02.933

尝试设置`onClickListener`为 your`ImageView`而不是`RelativeLayout`.

这可能会让你感兴趣：

[如何在 Android 上将 onClick 事件传递给其父级？](https://stackoverflow.com/questions/4415528/how-to-pass-the-onclick-event-to-its-parent-on-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:52:39.423

工作得很好，如果你设置`Listner`为你`Imageview`的`Layout`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:47:06.553

尝试使用 ImageButton 小部件而不是 ImageView。

# asp.net-mvc - Twitter.Bootstrap.MVC4 Nuget 包中的导航路由控制器问题

> ID：16167098
> 
> 赞同：5
> 
> 时间：2013-04-23T10:32:07.813
> 
> 标签：asp.net-mvc, asp.net-mvc-3, twitter-bootstrap

使用 Twitter.Bootstrap.MVC4 可以将“null”传递给ExampleLayoursRoute.config 中的**客户控制器：**

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.MapNavigationRoute<HomeController>("Home Page", c => c.Index());

        routes.MapNavigationRoute<CustomerController>("Customer", null)  <-- pass null here
              .AddChildRoute<CustomerController>("List", c => c.Index())
              .AddChildRoute<CustomerController>("Add", c => c.Create())
            ;
    } 
```

我收到一个错误：对象引用未设置为 NavigationRouteconfigureationExtensions.cs 文件中的对象实例：

```
 public static NamedRoute ToDefaultAction<T>(this NamedRoute route, Expression<Func<T, ActionResult>> action,string areaName) where T : IController
    {
        var body = action.Body as MethodCallExpression; <--- Error here 
```

您不能添加指向同一控制器/操作的链接：

```
 routes.MapNavigationRoute<CustomerController>("Customer", c => c.Index())
              .AddChildRoute<CustomerController>("List", c => c.Index()) 
```

或者您收到错误：{“名为 'Navigation-Customer-Index' 的路由已在路由集合中。路由名称必须是唯一的。\r\n参数名称：名称”}

到目前为止，我唯一的解决方法是在控制器中添加第二个重复的 Action，并将其命名为 Index2（例如）：

```
public ActionResult Index()
    {
        return View(db.Customers.Where(x => x.UserName == User.Identity.Name).ToList());
    }

 public ActionResult Index2()
    {
        return View(db.Customers.Where(x => x.UserName == User.Identity.Name).ToList());
    } 
```

有没有比复制代码或添加不必要的操作更好的方法？

谢谢，马克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-20T09:51:51.730

我发现问题出在 Global.asax 文件中的语句：

```
 BootstrapSupport.BootstrapBundleConfig.RegisterBundles(System.Web.Optimization.BundleTable.Bundles);
        BootstrapMvcSample.ExampleLayoutsRouteConfig.RegisterRoutes(RouteTable.Routes);
        BootstrapSupport.BootstrapBundleConfig.RegisterBundles(System.Web.Optimization.BundleTable.Bundles);
        BootstrapMvcSample.ExampleLayoutsRouteConfig.RegisterRoutes(RouteTable.Routes); 
```

由于安装了 1.09 并卸载了 Twitter Bootstrap Nuget 包，我发现 Global.asax 文件中的条目重复了。删除这些重复条目有效。这 2 个调用至少需要一个条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T22:56:26.963

转到 NavigationRouteConfigurationExtension.cs。找到比这更好的方法，但是这个 hack 应该使它起作用（它只是一个证明）。问题是添加两个具有相同名称的路由，并且名称是从路由生成的，而不是显示名称。

```
 public static NavigationRouteBuilder AddChildRoute<T>(this NavigationRouteBuilder builder, string DisplayText, Expression<Func<T, ActionResult>> action,string areaName="") where T : IController
    {
        var childRoute = new NamedRoute("", "", new MvcRouteHandler());
        childRoute.ToDefaultAction<T>(action,areaName);
        childRoute.DisplayName = DisplayText;
        childRoute.IsChild = true;
        builder._parent.Children.Add(childRoute);

        //builder._routes.Add(childRoute.Name,childRoute);
        builder._routes.Add(Guid.NewGuid().ToString(), childRoute);

        return builder;
    } 
```

# forms - 密码复选框字段AngularJS最小/最大长度问题

> ID：16167100
> 
> 赞同：4
> 
> 时间：2013-04-23T10:32:10.523
> 
> 标签：forms, angularjs

我创建了一个密码字段，在选中复选框时显示密码。
我正在使用 ng-minlenght 和 ng-maxlength 来控制密码长度。

当密码介于输入字段的最小和最大长度之间时，它会显示应有的密码文本。

但是当密码无效/不在字段的最小和最大长度之间时，我得到一个空值。

[Plnkr 示例](http://plnkr.co/edit/J6ezLdIekzjLMY6tBEq8?p=preview)

这是Angular中的错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:00:02.260

这是设计使然，但我在文档中找不到任何明确说明它的参考。在满足验证标准之前，Angular 不会更改您的模型。您可以通过`{{user.password}}`在输入上方添加（[此处](http://plnkr.co/edit/zZVTd989MGq1ldSDI7zw?p=preview)）来看到这一点。在您输入 8 个字符之前，您不会看到页面上的文本。

您可以通过使用手动同步两个文本字段的指令来解决此问题，如下所示：

**[http://jsfiddle.net/langdonx/K6Qgm/11/](http://jsfiddle.net/langdonx/K6Qgm/11/)**

HTML

```
<div ng-app="app" ng-controller="x">
    password is: {{user.password}}
    <br/>
    <br/>
    standard input:
    <input ng-model="user.password" name="uPassword" type="password" ng-hide="isChecked" ng-minlength="8" ng-maxlength="20" placeholder="Password" required/>
    <br/>
    <br/>
    password directive: 
    <password ng-model="user.password" name="uPassword" />
</div> 
```

JavaScript

```
function x($scope) {
    $scope.user = {
        password: 'x'
    };
}

angular.module('app', [])
    .directive('password', function () {
    return {
        template: '' +
            '<div>' +
            '    <input type="text" ng-model="ngModel" name="name" ng-minlength="8" ng-maxlength="20" required />' +
            '    <input type="password" ng-model="ngModel" name="name" ng-minlength="ngMinlength" required />' +
            '    <input type="checkbox" ng-model="viewPasswordCheckbox" />' +
            '</div>',
        restrict: 'E',
        replace: true,
        scope: {
            ngModel: '=',
            name: '='
        },
        link: function (scope, element, attrs) {
            scope.$watch('viewPasswordCheckbox', function (newValue) {
                var show = newValue ? 1 : 0,
                    hide = newValue ? 0 : 1,
                    inputs = element.find('input');
                inputs[show].value = inputs[hide].value;
                inputs[hide].style.display = 'none';
                inputs[show].style.display = '';
            });
        }
    };
}); 
```

# ios - 在重新加载 UITableView 之前在 UITableCellView（使用 AFNetworking）上设置图像的问题

> ID：16167102
> 
> 赞同：1
> 
> 时间：2013-04-23T10:32:11.623
> 
> 标签：ios, uitableview, restkit, afnetworking

在我的应用程序中，我使用 CoreData 中的实体填充 UITableView，然后立即发出服务器请求以检查是否有新实体（使用 添加到表视图中`reloadData`）。

在单元格的第一次渲染中，每个单元格使用 AFNetworking`setImageWithURL`方法设置一个图像（请注意，AFNetworking 作为 RestKit 的一部分包含在项目中）。

`reloadData`一旦我在加载图像之前调用，就会出现问题。重新加载数据会导致单元格再次请求图像，并且我还在日志中收到以下错误：

```
restkit.network:RKHTTPRequestOperation.m:175 GET <MY-PHOTO-URL> (0) [14.1694 s]: Error Domain=NSURLErrorDomain Code=-999 "The operation couldn’t be completed. (NSURLErrorDomain error -999.)" {NSErrorFailingURLKey=<MY-PHOTO-URL>} 
```

除了错误之外，我还得到了图像完成加载的日志，状态为 200，但表的单元格都没有图像。

当然，如果我禁用数据重新加载，图像会完美加载，所以问题出在`reloadData`.

# ms-access - 使用 *.mdb 文件连接 SQL Server 表

> ID：16167103
> 
> 赞同：0
> 
> 时间：2013-04-23T10:32:13.033
> 
> 标签：ms-access, sql-server-2008-r2, linked-server

我正在尝试将 SQLServer 2008 R2 表与 msaccess 表 (*.mdb) 连接起来。我已经尝试过“OPENDATASOURCE”和“Linked Server”，但没有一个能正常工作。

例如，我收到以下消息：

> 链接服务器“TestLinkServer”的 OLE DB 提供程序“Microsoft.Jet.OLEDB.4.0”返回消息“无法打开数据库''。它可能不是您的应用程序识别的数据库，或者文件可能已损坏。”。

另一个错误信息：

> 链接服务器“MDBTest”的 OLE DB 提供程序“Microsoft.Jet.OLEDB.4.0”返回消息“Microsoft Jet 数据库引擎无法打开文件 '\10.55.56.34\Shared Folder\LBUS.mdb'。它已由另一个用户，或者您需要权限才能查看其数据。”。

还有更多：D

任何人都可以提供工作教程吗？提前致谢.. ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:33:17.420

最简单的方法是在 ms-access 中进行连接。

在您的访问数据库中设置一个表链接，该链接引用您要加入的 sql-server 表。
然后在 access 中构建一个查询，将该表与 access 数据库中的一个或多个表连接起来。

如果要连接多个 sql-server 表，首先在 sql-server 中创建一个视图，将所有相关表组合在一起。然后设置您的表格链接以引用该视图。

如果由于某种原因，您必须在 SQL Server 内部进行连接，则必须使用不同的技术，或者使用表链接功能将数据从访问表“推送”到（先前定义的）sql server 表。然后，它只是一个普通的连接。

# cucumber - find('order-button', :disabled => false) 引发 ArgumentError: invalid keys

> ID：16167106
> 
> 赞同：2
> 
> 时间：2013-04-23T10:32:30.180
> 
> 标签：cucumber, capybara, capybara-webkit

在我正在测试的网站上，会发生以下情况：

*   你点击一个按钮
*   执行 ajax 调用，暂时禁用所有输入字段
*   检索数据后，字段将被填写且不再禁用

为了等待这种情况发生（没有睡眠或其他愚蠢的解决方案），我正在考虑这样的事情：

```
find('order-button', :disabled => false).click 
```

但我得到以下异常：`ArgumentError: invalid keys :disabled, should be one of :text, :visible, :between, :count, :maximum, :minimum, :exact, :match, :wait`

我怎样才能让它工作？我正在使用最新版本的 Capybara (2.1.0)

对此的任何输入都非常感谢:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:22:02.167

`:disabled`[仅以下选择器类型支持](https://github.com/jnicklas/capybara/commit/9f516cfd7ae049aa0c0e2706c4eb66031708c8e0)选项：

```
:field
:link_or_button
:button
:fillable_field
:radio_button
:checkbox
:select
:file_field 
```

它可以用作：

```
find(:field, 'field_id', disabled: false) 
```

`:css`您似乎使用的不支持此选项。

预计您将使用`:css`更短的 css 属性：

```
find('#field_id:not([disabled])') 
```

# android - Android ndk-build 命令问题

> ID：16167110
> 
> 赞同：0
> 
> 时间：2013-04-23T10:32:50.313
> 
> 标签：android, ubuntu, android-ndk

我已经浏览了这个 NDK 示例[链接](http://code.google.com/p/awesomeguy/wiki/JNITutorial)。我做了所有。但是**ndk-build**不起作用（找不到命令）。我也尝试了 ./ndk-build 但没有成功。我也设置了路径变量。我使用的是 Ubuntu OS .bash.bashrc 文件中的任何 help.Ndk 路径都是这样的：

```
export NDK_HOME=/home/android/android-ndk-r8e-linux-x86/android-ndk-r8e/ 
```

最大的问题是我在命令提示符下对这个文件夹执行 cd 并执行**ndk-build**但它不起作用。这个文件中的文件是 ndk-build.cmd

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:44:15.140

如果要以`ndk-build`这种方式运行，则需要将可执行文件的路径放在`PATH`env 变量中。否则，您必须指定`ndk-build`. 例如`/home/username/ndkpath/ndk-build`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:47:56.993

似乎你弄错了路径，而是使用

```
export NDK_HOME=/home/android/android-ndk-r8e-linux-x86/ 
```

# windows-7 - ActiveX 组件无法创建对象：“MSXML2.DOMDocument”

> ID：16167111
> 
> 赞同：9
> 
> 时间：2013-04-23T10:32:52.910
> 
> 标签：windows-7, vbscript, 64-bit, activex

我正在尝试创建对象 Msxml2.DOMDocument.4.0 的实例，但出现以下错误： **ActiveX 组件无法创建对象：'MSXML2.DOMDocument'**

错误发生在这一行： Set xmlDoc = CreateObject("Msxml2.DOMDocument.4.0")

我怎么解决这个问题？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-23T11:27:50.960

Msxml2.DOMDocument 的特定版本 4.0 可能未（正确）安装在您的脚本运行的计算机上。尝试创建与版本无关的对象：

```
Set xmlDoc = CreateObject("Msxml2.DOMDocument") 
```

这应该为您提供在您的机器上“工作”的版本。如果失败，请尝试

```
Set xmlDoc = CreateObject("Msxml2.DOMDocument.6.0") 
```

或试验版本号。用于`TypeName(xmlDoc)`获取有效版本的提示。

PS 如果您的问题是由 32 位与 64 位问题引起的，[这](http://answers.microsoft.com/en-us/windows/forum/windows_7-windows_install/install-msxml4-in-windows-7-to-run-classic-asp/a268f889-df55-42e9-bd0f-c4623ed5a6f4)可能会给您进一步的提示以供检查。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T14:34:00.240

检查`msxml4.dll`您的系统上是否存在。并（重新）注册库（如果有）：

```
cd %SystemRoot%\system32
regsvr32 /u msxml4.dll
regsvr32 msxml4.dll 
```

您需要管理员权限才能执行此操作。

# jquery - 使用自动调整大小搜索 jQuery 缩略图库

> ID：16167115
> 
> 赞同：0
> 
> 时间：2013-04-23T10:33:03.393
> 
> 标签：jquery, resize, gallery, thumbnails, image-resizing

我需要一个缩略图库，我只会在其中放置一次图像链接，原始大小的图像。然后画廊会自动调整缩略图的大小并将其放入缩略图 div。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:51:12.807

我强烈推荐[这个滑块/画廊](http://flexslider.woothemes.com/thumbnail-slider.html)

# javascript - 通过 ajax 传递参数 - 正确的标记

> ID：16167118
> 
> 赞同：0
> 
> 时间：2013-04-23T10:33:10.150
> 
> 标签：javascript, html, ajax, markup

我正在为购物篮组装一个前端，它使用 Javascript API 与数据库进行通信。我有以下方法：

*   更新包裹数量
*   更新产品数量
*   移除包裹
*   恢复包

每个方法都需要传递各种参数，我目前正在寻找从页面中检索它们并传递它们的最佳方法。

例如，我目前使用这样的类：

```
<a href="#" class="updateProductQuantity">Update Quantity</a> 
```

在这种情况下，我会从输入字段中获取值。我也有需要传递的“常量”，例如篮子 ID、商店 ID 等，我希望能够以某种方式从标记中获取它们。

实现这一目标的理想方式是什么？也许在页面上有一个带有输入列表的隐藏表单，或者我可以将值附加到属性，类似于它在 twitter bootstrap 上完成的方式：

```
<a href="https://twitter.com/twbootstrap" class="twitter-follow-button" data-link-color="#0069D6" data-show-count="true">Follow @twbootstrap</a> 
```

我注意到他们使用了很多以“data-”为前缀的属性。那么正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:45:02.247

出色地..

我相信使用“data-”属性是最好的，因为它是 HTML5 的一个不错的小特性。

此外，它会保持你的标记干净。

因此，如果您认为您的应用程序将在现代浏览器上运行，那么这应该是可行的方法。

# asp.net - 在同一页面中处理来自不同提供商的 AuthenticationResult

> ID：16167123
> 
> 赞同：6
> 
> 时间：2013-04-23T10:33:24.403
> 
> 标签：asp.net, openid, dotnetopenauth, asp.net-4.5, liveid

我正在使用 LiveID 和 Google 提供商将 OpenID 集成到我现有的应用程序中。在我的登录页面上，除了原始登录字段之外，我还添加了“使用 Google 登录”和“使用 Microsoft 登录”按钮。

我可以成功读取上述两个提供程序的 AuthenticationResult 数据，但我通过以下方式完成此操作...

对于新的登录按钮，我制作了一个返回 URL 以在用户返回时区分它们：

```
Protected Sub btn_google_Click(sender As Object, e As EventArgs) Handles btn_google.Click
    Dim client As New GoogleOpenIdClient
    Dim u As New System.Uri("http://www.mytest.com/login.aspx?action=signin&provider=google")
    client.RequestAuthentication(New HttpContextWrapper(HttpContext.Current), u)
End Sub

Protected Sub btn_live_Click(sender As Object, e As EventArgs) Handles btn_live.Click
    Dim client As New MicrosoftClient("xyz", "12345")
    Dim u As New System.Uri("http://www.mytest.com/login.aspx?action=signin&provider=microsoft")
    client.RequestAuthentication(New HttpContextWrapper(HttpContext.Current), u)
End Sub 
```

因此，当用户被重定向回 l​​ogin.aspx 时，我会进行以下检查来处理登录功能：

```
If Not Page.IsPostBack Then
    If Request.QueryString("action") IsNot Nothing AndAlso Request.QueryString("action").Trim = "signin" Then
        If Request.QueryString("provider") IsNot Nothing AndAlso Request.QueryString("provider").Trim <> String.Empty Then
            Select Case Request.QueryString("provider").Trim
                Case "microsoft"
                    Dim client As New MicrosoftClient("xyz", "12345")
                    Dim u As New System.Uri("http://www.mytest.com/loginlive.aspx?action=signin&provider=microsoft")
                    Dim result As DotNetOpenAuth.AspNet.AuthenticationResult = client.VerifyAuthentication(New HttpContextWrapper(HttpContext.Current), u)
                    ' remainder of logic removed
                    ' ...
                Case "google"
                    Dim client As New GoogleOpenIdClient
                    Dim result As DotNetOpenAuth.AspNet.AuthenticationResult = client.VerifyAuthentication(New HttpContextWrapper(HttpContext.Current))
                    ' remainder of logic removed
                    ' ...
            End Select
        End
    End
End If 
```

我的主要问题是，这是处理 AuthenticationResults 的好方法吗？或者，是否有更好/更安全/更聪明的方法来完成同样的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T15:19:53.310

更好的方法是将抽象工厂模式与命令模式结合使用。这可以减少硬编码并且使代码松散耦合，因此您可以在将来为每个身份验证提供程序扩展功能。找到下面每个部分的代码片段

**“BaseAuthentication Provider”的抽象类**

```
public abstract class BaseAuthenticationProvider
{
    //abstract Methods that need to be invoked from the concrete class, this need to be decided based on the functionality you need to achieve. This function would be invoked using the command pattern.
    // AuthorizeUser() : this method would be invoked to authorize the user from the provider

   //AuthenticateUser() : this method would be invoked once the user is redirected from the provider site.

    //abstract Properties that will hold the base information for the authentication provider, this need to be decided based on the functionality you need to achieve
    //CustomerSecret
    //CustomerConsumerKey
} 
```

**使用以下代码片段为 Google、Yahoo、Microsoft 等实现具体类。**

```
public class GoogleAuthentication : BaseAuthenticationProvider
{
     public GoogleAuthentication()
     {
          //initialization
     }

     public void AuthorizeUser()
     {
          //code
     }

     public string CustomerSecret()
     {
          //code
     }

     public string CustomerConsumerKey()
     {
          //code
     }
} 
```

**工厂类创建具体对象**，防止创建该工厂类的实例，实现私有构造函数。

```
public class AuthenticationProviderFactory
{
     private AuthenticationProviderFactory()
     {
     }

     public static BaseAuthenticationProvider GetInstance(string Domain)
     {
          switch (Domain)
          {
               case "google":
                    return new GoogleAuthentication();
               case "yahoo":
                    return new YahooAuthentication();
           }
      }
 } 
```

**Login.aspx ：**为每个身份验证提供程序提供按钮，为每个按钮设置“CommandName”的值并将所有按钮链接到同一个事件处理程序

例如 btn_google.CommandName = "google"

```
Protected Sub AuthenticationProvider_Click(sender As Object, e As EventArgs) Handles btn_google.Click, btn_yahoo.Click
    AuthenticationProviderFactory.GetInstance(((Button)sender).CommandName).AuthorizeUser();
End Sub 
```

各自的 AuthorizeUser 方法将调用各自的提供者站点进行身份验证。当提供者将用户重定向到返回 URL 时，在 Page_Load 事件上应用相同的模式并从抽象类调用 Autheticate 方法。

# python-2.7 - 更改直方图上 x 和 y 轴上的值

> ID：16167124
> 
> 赞同：1
> 
> 时间：2013-04-23T10:33:29.467
> 
> 标签：python-2.7, matplotlib, histogram

我想绘制一个直方图，通过随机手在 x 次试验中找到多少个带有 2、3、4、5、6 或 7 个字符的拼字游戏单词。

直方图在 x 和 y 轴上应具有以下值：![MS 油漆示例](https://i.stack.imgur.com/fppK7.jpg)

我有一个结果列表：`[0.33, 0.42, 0.33, 1.09, 0.3, 0.0]`，第一个值意味着我在 100 次试验中平均每手有 0.33 个 2 字符的单词。第二个值是 3 个字符的单词，依此类推。

目前我有这样的事情：![从python保存的图像](https://i.stack.imgur.com/Jigfz.jpg)

在 x 轴上有平均字数，y 轴包含值的数量（两个值相同，这就是为什么第三行打印值为 2）。我不知道代码应该是什么样子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:13:34.827

解决了`pylab.bar()`：

```
pylab.figure()
pylab.bar(xaxis, plot_list, align='center', color='green')
pylab.title('Amount of scrabble words, possible to phrase from a random hand (100 trials)')
pylab.xlabel('Length of words')
pylab.ylabel('Average amount of words')
pylab.show() 
```

这是解决方案的样子：![](https://i.stack.imgur.com/AkiNq.png)

# html - 如何使用引导程序完全隐藏 div

> ID：16167130
> 
> 赞同：0
> 
> 时间：2013-04-23T10:33:40.817
> 
> 标签：html, twitter-bootstrap, hide

我正在开发一个网站，该网站在主要内容 div 上方的 div 中显示通知（无效的登录详细信息、成功注册等）。通知的显示就像一个魅力，但我也希望用户能够通过单击一个按钮来隐藏通知。

为此，我使用了引导程序中的“折叠”类。然而，这显然是错误的方法，因为 div 并没有完全消失，而是留下一个可见的小笔划。我认为这可能是预期的行为，我根本不应该使用崩溃类。所以现在我的问题是：当单击按钮时，如何巧妙地隐藏带有引导程序的 div？

我目前的代码是：

```
<div id="notifications_errors" class="hero-unit collapse in">
    <a class="close pull-right" data-toggle="collapse" data-target="#notifications_errors" href="#">&times;</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:04:30.060

使用 Bootstrap 不会阻止您执行以下操作：

```
$('#someButton).click(function(event){ $('#someDiv').toggle() }) 
```

假设你在你的项目中包含了 jQuery [如果你使用任何 BS js 插件，你应该这样做]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T06:09:32.077

尝试将您的内容移动到一个单独的`div`块中，这很可能是`hero-unit`该类的 css 与 css 冲突`collapse`。

```
<div id="notifications_errors" class="collapse in">**
  <div class="hero-unit">
    <a class="close pull-right" data-toggle="collapse" data-target="#notifications_errors" href="#">&times;</a>
  </div>
</div> 
```

这应该让 .collapse 类的 .height:0 和 overflow:hidden 属性正常工作。（我在尝试使用带有警报格式的折叠时遇到了类似的问题，这为我解决了这个问题）

# ios - 仅使用 iFrame 在 UIWebView 中播放 youtube 视频

> ID：16167134
> 
> 赞同：5
> 
> 时间：2013-04-23T10:33:45.263
> 
> 标签：ios, objective-c, iframe, youtube

我正在尝试使用以下代码在我的`UIWebView`using标签上播放 youtube 视频-`<iframe>`

```
NSString *html = @"\
<html><head>\
<style type=\"text/css\">\
body {    background-color: transparent;\
color: white; \
}\
</style>\
</head><body style=\"margin:0\">\
<iframe class=\"youtube-player\" width=\"300\" height=\"300\" src=\"http://www.youtube.com/embed/efRNKkmWdc0\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>\
</body></html>";

UIWebView *videoView = [[UIWebView alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0, 460.0)];
[videoView loadHTMLString:html baseURL:nil]; 
```

它工作正常。

![在此处输入图像描述](https://i.stack.imgur.com/jz4BS.png)

但是，我需要在 webview 本身上播放这个，而不是使用 iPhone 默认播放器。我如何将其限制为`UIWebView`仅播放。我也被定义为`iframe`播放器类`class=\"youtube-player\"`。但是，它采用了 iPhone 的默认播放器。

任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-06T19:01:55.240

尝试使用此代码初始化 iframe 播放器：

```
 player = new YT.Player('player', {
                               height: '100%',
                               width: '100%',
                               videoId: 'M7lc1UVf-VE',
                               playerVars: {
                                 'controls' : '0',
                                 'playsinline' : 1
                               }
                               }); 
```

请注意“playsinline”参数设置为 1。在包含视图中，使用此参数初始化 UIWebView：

```
webView.allowsInlineMediaPlayback = YES; 
```

我注意到的一件事是您不能将 baseURL 参数设置为 NULL；它必须是一个 NSString。下面是一个加载名为 iframe-player.html 的 HTML 文件的示例，该文件包含所需的 HTML 和 JavaScript 代码：

```
NSString *path = [[NSBundle mainBundle] pathForResource: @"iframe-player" ofType: @"html"];
NSString *embedHTML = [NSString stringWithContentsOfFile: path
                                                encoding:NSUTF8StringEncoding
                                                   error: &error];

[webView loadHTMLString:embedHTML baseURL:[NSURL URLWithString:@"about:blank"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T12:54:24.843

不可能。网络视频在 iPhone 上始终全屏显示。在您的应用程序中播放视频的唯一可能性是使用 MPMoviePlayer 并将视图添加到您的屏幕。但是你需要有一个视频文件的直接链接

# iphone - 在 Apple 中为同一企业帐户注册新设备

> ID：16167135
> 
> 赞同：-1
> 
> 时间：2013-04-23T10:33:47.473
> 
> 标签：iphone, ios, ipad, app-store

我们在公司有一个账户；通过此帐户，我们在 App Store 中提交我们的申请。

我已经为 iPhone4 完成了程序（新帐户、配置文件等），因此我能够创建应用程序。

我有几个新设备（iPad 和 iPhone5），我想让这些新设备也能够通过认证，以便创建应用程序（这些是我的设备）。

注册新设备需要什么？UDID？还有什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:39:58.733

首先，使用企业帐户，您无法将应用提交到应用商店，因此如果您将应用提交到应用商店，则您没有企业帐户。其次，您需要 UDID 将这些帐户设备添加到开发人员配置文件中。

# python - 在新文物上看不到我的 heroku celery 工人统计数据

> ID：16167143
> 
> 赞同：2
> 
> 时间：2013-04-23T10:34:22.300
> 
> 标签：python, heroku, celery, newrelic

我有一个 python 服务器在 heroku 上运行，一个 web dyno 和一个额外的 dyno 运行我的 celery 任务。

我添加了 new-relic 插件，可以看到我的应用程序的监控数据，除了我的 celery 任务的数据。在“后台任务”选项卡下检查时，我看到一条消息说`New Relic recorded no Celery background task executions in the last 7 days`（我确定我的 celery 任务工作正常）。

此外，我在 heroku 日志中收到以下错误（尽管两个 dynos 都报告了它，所以我不确定它是否相关）

> 数据收集器不可联系。这可能是由于网络问题或数据收集器重新启动所致。如果一段时间后无法联系，请将此问题报告给 New Relic 支持以进行进一步调查。引发的错误是 ConnectionError(MaxRetryError('Max retries exceeded for url: /agent_listener/invoke_raw_method?run_id=XXX&method=metric_data&license_key=XXX&protocol_version=12&marshal_format=json',),)。

我应该提到我目前在 new-relic 的*免费*层上，但是我找不到任何说这仅适用于*付费*版本的东西。

# asp.net - 我可以在 asp.net 中交换 DataGrid 中的行吗

> ID：16167145
> 
> 赞同：0
> 
> 时间：2013-04-23T10:34:24.623
> 
> 标签：asp.net, c#-3.0

我可以在 asp.net 中动态更改行索引吗？我有一个要求，我需要根据列值更改 asp.net 中数据网格中的一行。

# javascript - 展开的行应该在选择另一行时折叠

> ID：16167146
> 
> 赞同：1
> 
> 时间：2013-04-23T10:34:28.297
> 
> 标签：javascript, primefaces

我正在使用 primefaces 3.3 并在数据表下使用 p:rowExpansion 和 p:toggler。我想在选择另一行时折叠先前展开的行。

我有一个 id 为 reconcileTable 的数据表。

我们在 primefaces 中是否有任何功能来处理这种情况？

提前致谢！

代码片段::

```
 <p:dataTable id="ux_reconciliation_table" widgetVar="reconcileTable">                                   

    <p:ajax event="rowSelect" listener="#{reconciliationBean.validateReconciliationAction}" update=":reconciliation_form:multiProcessBtn,:message_form_dialog :reconciliation_form:removeLatestSel" oncomplete="checkRowExpansion()"></p:ajax>
    <p:ajax event="rowToggle" listener="#{reconciliationBean.onRowToggle}" update="ux_row_nonrequired_content "/>
    <p:ajax event="rowUnselect" update=":reconciliation_form:multiProcessBtn"/>

    <f:facet name="header">
    <p:outputPanel>
    <p:outputLabel value="#{resourceBundle['reconciliation.worksheet_search.label']} " styleClass="ux_reconciliation_datatable_header_text"/>
    <p:inputText id="globalFilter" onkeyup="reconcileTable.filter()" styleClass="ux_reconciliation_input_search_field" />
    <h:graphicImage value="../images/common/I_Search.png" styleClass="ux_dialog_search"/>
    </p:outputPanel>
    </f:facet>

    <p:column id="Billing_MiscParty_PartyRole_Party_Organization_NameInfo_longName" sortBy="#{reconciliationDetail.payorName}" filterBy="#{reconciliationDetail.payorName}" filterMatchMode="contains" filterStyleClass="hide" styleClass="ux_ui-datatable-column ux_alpha-column">  
    <f:facet name="header">
    <h:outputText value="" styleClass="ux_title_table_header_reconcile"/><br/>
    <h:outputText value="#{resourceBundle['reconciliation.payor_insured.table.column']}" styleClass="ux_title_table_header_reconcile"/><br/>
</f:facet>  
<h:panelGroup id="reconArrowTogglerLink">   
<div class="#{reconciliationDetail.parentId == 0?'ux_reconciliation_togger_icon':'ux_reconciliation_togger_icon ux_tab_style'}" onclick="reconciliationDatatable.onRowToggle(this, reconcileTable);">                                
    <p:rowToggler/>
    </div>
    </h:panelGroup>
    <h:outputText styleClass="ux_column_data_text ux_normal_text ux_reconciliation_subcriber" rendered="#{reconciliationDetail.payorName != null}" value="#{reconciliationDetail.payorName}"/>

    </p:column> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:24:46.650

一种解决方案是当用户展开一行时，其他展开的行将触发点击事件并折叠。

**另请参阅：** [如何一次展开一行？](https://stackoverflow.com/questions/15972990/how-at-a-time-one-row-can-expand-in-pdatatable/15975948#15975948)

在 OnRowSelection 中，您只需设置`selectionMode="single"`（Datatable 的属性）

# r - 在 R 中，如何将 SpatialPolygons* 转换为地图对象

> ID：16167147
> 
> 赞同：4
> 
> 时间：2013-04-23T10:34:34.377
> 
> 标签：r, ggplot2, gis, geospatial, spatial

我正在尝试使用此[JSS 论文](http://www.jstatsoft.org/v15/i05)`ProportionalSymbolMap`中定义的地图。

为了绘制比例符号，我首先需要一个地图类的对象。

然而，我通常使用的[方法](http://www.nceas.ucsb.edu/scicomp/usecases/ReadWriteESRIShapeFiles)返回 SpatialPolygonDataFrame。有什么包或方法可以在这里提供帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T12:34:51.417

*哈克*是解决这个问题的方法。我只是使用这组命令将 SpatialPolygons* 对象拆开，然后将其重新组合为 class 的对象`map`。我希望你喜欢它：

```
# read in shapefile as normal SpatialPolygons
xx <- readShapePoly(system.file("shapes/sids.shp", package="maptools")[1], IDvar="FIPSNO", proj4string=CRS("+proj=longlat +ellps=clrk66"))

# Formatting the data
require(reshape)
# Identifier column to split data on
xx@data$id <- rownames(xx@data)

# Convert to dataframe
xx.df <- as.data.frame(xx)

#Fortfy automagic
xx.fort <- fortify(xx, region="id")

# Join operation - one row per coordinate vector
xx <- join(xx.fort, xx.df,by="id")

# Split by ID because we need to add NA at end of each set of polygon coordinates to 'break' the line
xxSp <- split(xx, xx$id)

# Need to insert NA at end of each polygon shape to cut off that shape
xxL <- do.call( rbind , (lapply( xxSp , function(x) { j <- x[ nrow(x) , ] ; j[1:2] <- c(NA,NA); rbind( x , j ) })) )

# Create list object with same structure as map object
xxMap <- list( x = xxL$long , y = xxL$lat , range = c( range(xxL$long) , range(xxL$lat) ) , names = as.character(unique( xxL$NAME ) ) )

# Define as a map class object
attr(xxMap , "class") <- "map"

# Plot!!
map( xxMap ) 
```

![在此处输入图像描述](https://i.stack.imgur.com/uxhQK.jpg)

# node.js - Nodejs异步随机数

> ID：16167153
> 
> 赞同：0
> 
> 时间：2013-04-23T10:35:02.503
> 
> 标签：node.js

我需要在 nodejs 应用程序中创建一些 4-5 长度的随机字符。这是我找到的一个模块。

```
var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';
exports.generate = function(length) {
 length = length ? length : 32;
 var string = '';
 for (var i = 0; i < length; i++) {
  var randomNumber = Math.floor(Math.random() * chars.length);
  string += chars.substring(randomNumber, randomNumber + 1);
 }
 return string;
} 
```

但它似乎不是异步的。我需要担心它不是异步的吗？还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:06:51.110

我认为您不必担心它不是异步的（我假设您担心您的代码被阻塞？）。

使用默认长度 (32) 和 1.000.000 次调用的代码的简单基准测试在我的 MBP 上运行大约 1.2 秒，所以速度非常快。

如果你想进一步加快你的代码速度，你可以试试这个：

```
var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz'.split('');
...
string += chars[randomNumber]; 
```

这使我的测试运行速度提高了两倍。

# jquery - jQuery Accordion：从其他页面打开带有 achor 的项目

> ID：16167158
> 
> 赞同：1
> 
> 时间：2013-04-23T10:35:28.077
> 
> 标签：jquery, hash, anchor, accordion

我是 jQuery 的新手。
在主页上，我有 4 个指向手风琴页面的链接。
例如： http: [//pluscoating.falcondesign.nl/poedercoaten/#2](http://pluscoating.falcondesign.nl/poedercoaten/#2)
这必须打开 ID 为 2 的手风琴。

我想出了如何在哈希之后添加一个活动类。现在的问题是，“活动”类被放置在“a”元素之后。但必须在“acc-trigger”类之后添加。那么我该怎么做呢？

我的html代码：

```
<div>
    <span class="acc-trigger">
        <a id="1" href="#">Title 1</a>
    </span>
    <div class="acc-container">
        <div class="content">content 1</div>
    </div>
    <span class="acc-trigger">
        <a id="2" href="#">Title 2</a>
    </span>
    <div class="acc-container">
        <div class="content">content 2</div>
    </div>
    <span class="acc-trigger">
        <a id="3" href="#">Title 3</a>
    </span>
    <div class="acc-container">
        <div class="content">content 3</div>
    </div>
    <span class="acc-trigger">
        <a id="4" href="#">Title 4</a>
    </span>
    <div class="acc-container">
        <div class="content">content 4</div>
    </div>
</div> 
```

jQuery代码：

```
(function() {

    var $container = $('.acc-container'),
        $trigger   = $('.acc-trigger');

    var hash = window.location.hash.substring( 1 );

    $container.hide();
    $trigger.first().addClass('active').next().show();

    if( hash ) {
        var accordItem = $('.acc-trigger a#' + hash);
            $trigger.removeClass('active').next().slideUp(300);
            accordItem.addClass('active').next().show();
    }       

    var fullWidth = $container.outerWidth(true);
    $trigger.css('width', fullWidth);
    $container.css('width', fullWidth);

    $trigger.on('click', function(e) {
        if( $(this).next().is(':hidden') ) {
            $trigger.removeClass('active').next().slideUp(300);
            $(this).toggleClass('active').next().slideDown(300);
        }

        e.preventDefault();
    });

    // Resize
    $(window).on('resize', function() {
        fullWidth = $container.outerWidth(true)
        $trigger.css('width', $trigger.parent().width() );
        $container.css('width', $container.parent().width() );
    });

})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:41:28.123

尝试

```
if( hash ) {
    var accordItem = $('.acc-trigger a#' + hash);
    $trigger.removeClass('active').next().slideUp(300);
    accordItem.closest('.acc-trigger').addClass('active').next().show();
} 
```

另一种解决方案是在点击事件处理程序注册后触发点击事件

```
(function() {

    var $container = $('.acc-container'), $trigger = $('.acc-trigger');

    var hash = window.location.hash.substring(1);

    $container.hide();
    $trigger.first().addClass('active').next().show();

    var fullWidth = $container.outerWidth(true);
    $trigger.css('width', fullWidth);
    $container.css('width', fullWidth);

    $trigger.on('click', function(e) {
                if ($(this).next().is(':hidden')) {
                    $trigger.removeClass('active').next().slideUp(300);
                    $(this).toggleClass('active').next().slideDown(300);
                }

                e.preventDefault();
            });
    //move this line to down after the click event handler
    if (hash) {
        $('.acc-trigger a#' + hash).triggerHandler('click');
    }

    // Resize
    $(window).on('resize', function() {
                fullWidth = $container.outerWidth(true)
                $trigger.css('width', $trigger.parent().width());
                $container.css('width', $container.parent().width());
            });

})(); 
```

# php - 比较数据库字段中的字符串

> ID：16167159
> 
> 赞同：0
> 
> 时间：2013-04-23T10:35:38.103
> 
> 标签：php, mysql

你好，我有一个列名为 id、receiver_id 的表，现在我想获取其中 sender_id 是 current_logged 的​​记录，receiver_id 包含 id 中的当前 loggend。

表示receiver_id 包含用 分隔的user_id 的字符串，现在我想检查receiver_id 中是否存在user_id

假设我的 id 是`U112`并且 receiver_id`U112,U123,U157`现在包含字符串我该如何检查

我尝试如下但失败了

`$selDoc="SELECT * FROM documents WHERE sender_id='U112' OR 'U112' IN (receiver_id) ORDER BY id DESC";`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:47:09.137

`str IN (str2)`是一样的`str == str2`。

使用[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)：

```
FIND_IN_SET('U112', receiver_id) 
```

注意：您可能应该规范化您的架构。这将是一个全表扫描。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:08:46.990

这可能正常工作：

```
SELECT * FROM documents WHERE sender_id in ('U112','U113','U113') 
```

或者

```
SELECT * FROM documents WHERE sender_id ='U112' and sender_id in ('U112','U113','U113') 
```

注意：我在自己的桌子上工作，效果很好。例子：

```
select * from tbl_answers where ques_id in ('69','12','14')
select * from tbl_answers where ques_id = 69 and ques_id in ('69','12','14') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:54:01.340

或者你可以使用

```
receiver_id LIKE "% U112 %" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T11:14:36.027

你可以这样尝试：

```
SELECT  * FROM documents WHERE (receiver_id LIKE '%,U112' OR receiver_id LIKE 'U112,%' OR receiver_id LIKE '%,U112,%' OR receiver_id LIKE 'U112') 
```

# visual-studio-2010 - 如何使用 Visual Studio 调试 x64？

> ID：16167160
> 
> 赞同：0
> 
> 时间：2013-04-23T10:35:40.343
> 
> 标签：visual-studio-2010, silverlight, debugging, 64-bit

我正在尝试创建我的第一个 Silverlight 应用程序。似乎无法调试它，因为 Visual Studio 2010 使用 x86 'Remote Debugger'。我还安装了 x64 位版本：

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\Remote Debugger\x64 
```

但我找不到我应该如何使用 VS 2010

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\Remote Debugger\x64 
```

代替

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\Remote Debugger\x86 
```

谢谢你。

# capistrano - 无法运行 Capistrano - 依赖错误

> ID：16167162
> 
> 赞同：0
> 
> 时间：2013-04-23T10:35:42.137
> 
> 标签：capistrano

我已经使用以下命令在我的 Ubuntu 上安装了 Capistrano

```
sudo gem install capistrano
sudo gem install railsless-deploy # I want to deploy a PHP website
sudo gem install capistrano-ext 
```

当我运行“ `capify`。” 在我的部署文件夹中，出现错误：

与其他 Capistrano 命令相同的错误，例如简单的“ `cap -h`” ...

```
/usr/lib/ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find capistrano (>= 0) amongst [POpen4-0.1.4, Platform-0.4.0, addressable-2.3.4, addressable-2.3.2, bundler-1.3.5, bundler-1.2.3, bundler-1.0.21, chunky_png-1.2.8, chunky_png-1.2.7, coderay-1.0.9, coderay-1.0.8, commonjs-0.2.6, compass-0.12.2, compass-normalize-1.4.3, compass-normalize-1.4.2, compass-recipes-0.3.0, em-websocket-0.5.0, em-websocket-0.4.0, eventmachine-1.0.3, eventmachine-1.0.0, ffi-1.7.0, ffi-1.3.1, forge-0.5.0, formatador-0.2.4, fssm-0.2.10, fssm-0.2.9, guard-1.8.0, guard-1.7.0, guard-1.6.1, guard-1.3.3, guard-livereload-1.3.0, guard-livereload-1.2.1, guard-livereload-1.1.3, guard-livereload-1.0.1, hike-1.2.2, hike-1.2.1, http_parser.rb-0.5.3, json-1.7.7, json-1.7.6, json-1.6.5, less-2.3.2, less-2.2.2, less-2.0.8, libv8-3.16.14.1, libv8-3.11.8.13-x86-linux, libv8-3.3.10.4-x86-linux, listen-1.0.2, listen-0.7.3, listen-0.7.2, lumberjack-1.0.3, lumberjack-1.0.2, method_source-0.8.1, multi_json-1.7.2, multi_json-1.5.0, open4-1.3.0, pry-0.9.12.1, pry-0.9.12, pry-0.9.11.4, rack-1.5.2, rack-1.5.0, rack-1.3.5, rake-10.0.4, rake-10.0.3, rake-0.9.2.2, rb-fsevent-0.9.3, rb-inotify-0.9.0, rb-kqueue-0.2.0, ref-1.0.4, ref-1.0.2, rubygems-update-2.0.3, rubygems-update-1.8.25, rubyzip-0.9.9, sass-3.2.8, sass-3.2.7, sass-3.2.5, sassy-buttons-0.1.4, slick-buttons-0.0.6, slop-3.4.4, slop-3.4.3, sprockets-2.9.3, sprockets-2.9.2, sprockets-2.8.2, sprockets-2.0.3, sprockets-helpers-1.0.1, sprockets-helpers-1.0.0, sprockets-helpers-0.8.0, sprockets-sass-1.0.0, sprockets-sass-0.9.1, sprockets-sass-0.3.0, stitch-0.1.6, therubyracer-0.11.4, therubyracer-0.11.3, therubyracer-0.9.9, thor-0.18.1, thor-0.17.0, thor-0.15.4, tilt-1.3.7, tilt-1.3.3, yui-compressor-0.9.6] (Gem::LoadError)
from /usr/lib/ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
from /usr/lib/ruby/1.9.1/rubygems.rb:1231:in `gem'
from /usr/local/bin/cap:22:in `<main>' 
```

我是 Capistrano 和 Ruby 的菜鸟

任何想法来解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T21:59:13.600

可能发生的事情是您以 root 用户身份安装了 Capistrano。但是，从非 root 用户帐户运行 capify 会尝试查找为该特定用户安装的 Capistrano，而不是系统范围的安装。

你能简单地跑吗

```
gem install capistrano railsless-deploy capistrano-ext 
```

作为用户，不用Sudo？

回答您的评论：以 root 用户身份安装和运行 cap deploy 脚本通常不是最佳做法。出于您的目的，可能没问题，因为您使用 Ruby/Cap 执行的任务非常有限；将来，我会建议研究 RVM 之类的东西。

RVM（Ruby 版本管理器）是一个您可以在系统范围内安装的工具，然后它将管理您的 ruby​​ 版本和*每个用户*的 gem 。

# excel - 用于将单元格内容复制到另一个工作簿中的特定工作表的 Excel 宏

> ID：16167164
> 
> 赞同：0
> 
> 时间：2013-04-23T10:35:43.160
> 
> 标签：excel, vba

我需要一种将“ThisWorkbook”（宏所在的位置）中某些单元格的内容发送到另一个工作簿中的特定工作表的方法（其位置不会改变，与“ThisWorkbook”不同）

出于某种原因，以下内容不起作用：

```
Sub Transplant()

Dim thispath As String
Dim targetpath As String

'Set filepaths
thispath = ThisWorkbook.FullName
targetpath = ThisWorkbook.Path & "/subdir/Targetbook.xlsm"

Dim Srcwb As Workbook
Dim Trgwb As Workbook

'Set workbooks
Set Srcwb = Workbooks.Open(thispath)
Set Trgwb = Workbooks.Open(targetpath)

Srcwb.Worksheets("Sheet1").Range(Srcwb .Worksheets("Sheet1").Range("A1"), _
Srcwb.Worksheets("Sheet1").Range("A1").End(xlToRight)).Copy _
Destination:=Trgwb.Sheets("Sheet1").Cells(1, 1)

End Sub 
```

请帮忙！

//狮子座

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:02:31.100

这与您所拥有的几乎相同，尽管我没有重新打开活动工作簿。

你能描述一下你试图复制的范围吗？你可能会发现这`UsedRange`更容易。

```
Sub Transplant()
    Dim DWB As Workbook
    Dim S As Worksheet
    Set S = ThisWorkbook.WorksheetS("Sheet1") ' forgot to rename Source to S

    Set DWB = Application.Workbooks.Open(Thisworkbook.Path & "/subdir/Targetbook.xlsm")
    Set D = DWB.Worksheets("Sheet1")

    S.Range(S.Range("A1"), S.Range("A1").End(xlToRight)).Copy Destination:=D.Cells(1,1)
    ' S.UsedRange.Copy Destination:=D.Cells(1,1) - this might be easier
End Sub 
```

# c# - 如何解决：“已经有一个打开的 DataReader 与此连接关联，必须先关闭它。”

> ID：16167173
> 
> 赞同：0
> 
> 时间：2013-04-23T10:36:15.280
> 
> 标签：c#, html, mysql, css, razor

```
MySql.Data.MySqlClient.MySqlDataReader r = null;
MySql.Data.MySqlClient.MySqlCommand cmd = null;
System.Data.IDataRecord summary = null;

try
{
    connection.Open();
    cmd = new MySql.Data.MySqlClient.MySqlCommand("SELECT * FROM db.subnets WHERE name='"+selected+"';", connection);
    r = cmd.ExecuteReader();
    r.Read();
    summary = (System.Data.IDataRecord)r;

    <p style="font-family: 'Segoe UI'; font-size: 20px; color: #808080; margin: 0px 0px 20px 0px">Edycja podsieci</p>
    <form action="Edit.cshtml" style="color: #fff; font-family: 'Segoe UI'" method="post">
        <a style="width: 205px; display: inline-block; margin-bottom: 7px">Nazwa:</a><input style="width: 230px" type="text" name="name" value="@summary.GetString(8)"><br>
        <a style="width: 205px; display: inline-block; margin-bottom: 7px">Adres:</a><input style="width: 230px" type="text" name="address" value="@summary.GetString(1)"><br>
        <a style="width: 205px; display: inline-block; margin-bottom: 7px">Maska podsieci:</a><input style="width: 230px" type="text" name="netmask" value="@summary.GetString(2)"><br>
        <a style="width: 205px; display: inline-block; margin-bottom: 7px">Adres rozgloszeniowy:</a><input style="width: 230px" type="text" name="broadcast_address" value="@summary.GetString(4)"><br>
        <a style="width: 205px; display: inline-block; margin-bottom: 7px">Router:</a><input style="width: 230px" type="text" name="routers" value="@summary.GetString(5)"><br>

        <a style="width: 201px; display: inline-block; margin-bottom: 7px">Serwer:</a>
        @{
            MySql.Data.MySqlClient.MySqlCommand com = null;
            MySql.Data.MySqlClient.MySqlDataReader rd = null;
            System.Data.IDataRecord rec = null;

            try
            {
                MySql.Data.MySqlClient.MySqlConnection connect = new MySql.Data.MySqlClient.MySqlConnection(connString);
                com = new MySql.Data.MySqlClient.MySqlCommand("SELECT id,name from db.servers WHERE name!="+summary.GetString(8), connection);
                rd = cmd.ExecuteReader();
                summary = (System.Data.IDataRecord)rd;

                <select style="width: 234px" name="server">
                    <option value="@summary.GetString(0)">@summary.GetString(8)</option>
                    @{
                        while(rd.Read())
                        {
                            rec = (System.Data.IDataRecord)rd;

                            <option value="@rec.GetString(0)">@rec.GetString(1)</option>
                        }
                    }
                </select>

            }
            catch(Exception ex)
            {
                Response.Write(ex.Message);
            }
            finally
            {
                rd.Close();
            }
        }

        <a style="width: 205px; display: inline-block; margin-bottom: 7px">Budynek:</a><input style="width: 230px" type="text" name="building" value="@summary.GetString(7)"><br>
        <a style="width: 205px; display: inline-block; margin-bottom: 7px">Zakres:</a><input style="width: 230px" type="text" name="_range" value="@summary.GetString(3)"><br>
        <input type="hidden" value="subnets" name="from">
        <input type="hidden" value="@selected" name="selected">
        <input style="left: 400px; margin-top: 8px; margin-left: 380px" type="submit" value="Edytuj">
    </form>
}
catch(Exception ex)
{
    Response.Write(ex.Message);
}
finally
{
    r.Close();
    connection.Close();
}
break;    
} 
```

运行此代码后，我收到标题中的错误。我怎样才能解决这个问题？当我已经打开 MySqlDataReader 对象时，我需要获取一些数据。我可以存储“（System.Data.IDataRecord）r”中的数据吗，因为当我关闭“r”时，“summary”中的数据被删除了。

# javascript - 在谷歌地图上从foursquare绘制场地

> ID：16167176
> 
> 赞同：0
> 
> 时间：2013-04-23T10:36:19.173
> 
> 标签：javascript, geolocation, foursquare

我正在尝试使用 Foursquare 和 Google API 来接收我当前的位置，并从那里显示一系列场所，例如。特定半径内的餐厅，并使用自定义标记在地图上绘制每个餐厅。

我已经能够使用 google api 显示我当前的位置，但我从未使用过 Foursquare API，这似乎有点棘手，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:44:42.597

您将需要使用[场所/搜索](https://developer.foursquare.com/docs/venues/search)或[场所/探索](https://developer.foursquare.com/docs/venues/explore)端点来搜索该位置。

作为使用搜索的示例，此[JQuery getJSON](http://api.jquery.com/jQuery.getJSON/)调用将调用搜索端点，在给定场地 100m 内的“夜场”类别中寻找场地：

```
var ll = latitude + "," + longitude;        
$.getJSON("https://api.foursquare.com/v2/venues/search", {
    ll: ll,
    radius: 100,
    limit: 50
    intent: "browse",
    categoryId: "4d4b7105d754a06376d81259",
    client_id: foursq_client_id,
    client_secret: foursq_client_secret,
    v: 20130420
 }).done(function(data) {
    $.each(data.response.venues, function(i, item) {
        console.log(item);
    });
}); 
```

# php - 我的 php 代码帮助中的类用户？

> ID：16167177
> 
> 赞同：0
> 
> 时间：2013-04-23T10:36:22.983
> 
> 标签：php, phpmyadmin

我的类文件夹中有以下代码。当我执行它时，我收到以下错误

> SQLSTATE [23000]：违反完整性约束：1048 列 'firstname' 不能为空

. 我认为问题出在我的代码的第一部分？是变量的名称吗？

```
<?php

 class Users {
     public $username = null;
     public $firstname;
     public $lastname;
     public $firmname;
     public $email;
     public $password = null;
     public $salt = "Zo4rU5Z1YyKJAASY0PT6EUg7BBYdlEhPaNLuxAwU8lqu1ElzHv0Ri7EM6irpx5w";

     public function __construct( $data = array() ) {
         if( isset( $data['username'] ) ) $this->username = stripslashes( strip_tags( $data['username'] ) );
         if( isset( $data['firstname'] ) ) $this->firstname = stripslashes( strip_tags( $data['lastname'] ) );
         if( isset( $data['lastname'] ) ) $this->lastname = stripslashes( strip_tags( $data['username'] ) );
         if( isset( $data['firmname'] ) ) $this->firmname = stripslashes( strip_tags( $data['firmname'] ) );
         if( isset( $data['email'] ) ) $this->email = stripslashes( strip_tags( $data['email'] ) );
         if( isset( $data['password'] ) ) $this->password = stripslashes( strip_tags( $data['password'] ) );
     }

     public function storeFormValues( $params ) {
        //store the parameters
        $this->__construct( $params ); 
     }

     public function userLogin() {
         $success = false;
         try{
            $con = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD ); 
            $con->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
            $sql = "SELECT * FROM users WHERE username = :username AND password = :password LIMIT 1";

            $stmt = $con->prepare( $sql );
            $stmt->bindValue( "username", $this->username, PDO::PARAM_STR );
            $stmt->bindValue( "password", hash("sha256", $this->password . $this->salt), PDO::PARAM_STR );
            $stmt->execute();

            $valid = $stmt->fetchColumn();

            if( $valid ) {
                $success = true;
            }

            $con = null;
            return $success;
         }catch (PDOException $e) {
             echo $e->getMessage();
             return $success;
         }
     }

     public function register() {

        $correct = false;
            try {
                $con = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD );
                $con->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
                $sql = "INSERT INTO users(username, firstname, lastname, firmname, email, password, date ) VALUES(:username, :firstname, :lastname, :firmname, :email, :password, NOW())";

                $stmt = $con->prepare( $sql );
                $stmt->bindValue( "username", $this->username, PDO::PARAM_STR );
                $stmt->bindValue( "firstname", $this->firstname, PDO::PARAM_STR );
                $stmt->bindValue( "lastname", $this->lastname, PDO::PARAM_STR );
                $stmt->bindValue( "firmname", $this->firmname, PDO::PARAM_STR );
                $stmt->bindValue( "email", $this->email, PDO::PARAM_STR );
                $stmt->bindValue( "password", hash("sha256", $this->password . $this->salt), PDO::PARAM_STR );
                $stmt->execute();
                return "Registration Successful <br/> <a href='index.php'>Login Now</a>";
            }catch( PDOException $e ) {
                return $e->getMessage();
            }
     }

 }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:43:48.227

你忘了`:`这里之前的变量

```
$stmt->bindValue( ":username", $this->username, PDO::PARAM_STR );
$stmt->bindValue( ":firstname", $this->firstname, PDO::PARAM_STR );
$stmt->bindValue( ":lastname", $this->lastname, PDO::PARAM_STR );
$stmt->bindValue( ":firmname", $this->firmname, PDO::PARAM_STR );
$stmt->bindValue( ":email", $this->email, PDO::PARAM_STR );
$stmt->bindValue( ":password", hash("sha256", $this->password . $this->salt), PDO::PARAM_STR );
$stmt->execute(); 
```

更改其他查询以及...

# javascript - 更改 Bootstrap 下拉菜单的方向

> ID：16167178
> 
> 赞同：22
> 
> 时间：2013-04-23T10:36:24.273
> 
> 标签：javascript, html, css, twitter-bootstrap

如何更改[Twitter Bootstrap 下拉菜单](http://twitter.github.io/bootstrap/javascript.html#dropdowns)的方向？

我有一个这样的下拉列表：

![是）我有的](https://i.stack.imgur.com/y3VPP.png)

但我希望它看起来像这样：

![我想要的是](https://i.stack.imgur.com/4gMXr.png)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-08-18T13:04:34.120

从[http://getbootstrap.com/components/#dropdowns-alignment](http://getbootstrap.com/components/#dropdowns-alignment)：

> **已弃用 .pull-right 对齐**
> 从 v3.1.0 开始，我们已弃用 下拉菜单中**的 .pull-right**。要右对齐菜单，请使用 **`.dropdown-menu-right`**. 导航栏中的右对齐导航组件使用此类的混合版本来自动对齐菜单。要覆盖它，请使用**`.dropdown-menu-left`**.

在您的情况下，将`dropdown-menu-right`类添加到具有`dropdown-menu`该类的 div 应该可以解决问题。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-23T10:41:35.057

使用`pull-right`或`pull-left`类。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-02-15T07:40:47.320

这是（使用**dropdown-menu-right**）：

```
<ul class="dropdown-menu dropdown-menu-right">
   <li><a href"#">Action</a></li>
   <li><a href="#">Another action</a></li>
<ul> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-08-11T14:06:02.450

**引导程序 4**

使用“下拉菜单右”和“下拉菜单左”

```
<li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          @username
        </a>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="#"><i class="fas fa-cog"></i> Account Settings</a>
          <a class="dropdown-item" href="#"><i class="fas fa-sign-out-alt"></i> Logut</a>
        </div>
      </li> 
```

输出：

[![在此处输入图像描述](https://i.stack.imgur.com/2xSoX.png)](https://i.stack.imgur.com/2xSoX.png)

有关更多信息，请访问文档： [https ://getbootstrap.com/docs/4.0/components/dropdowns/](https://getbootstrap.com/docs/4.0/components/dropdowns/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T11:52:04.930

`transform: rotateY`或者 `-webkit-transform:rotateY`会成功，让我们将其应用于下拉菜单；

```
navbar .pull-right > li > .dropdown-menu, .navbar .nav > li > .dropdown-menu.pull-right {
    -webkit-transform: rotateY(180deg);
} 
```

或者，您可以根据您的确切要求将其插入`.dropdown-menu`或类中。`.open > .dropdown-menu`现在看起来像：

![下降1](https://i.stack.imgur.com/nlXMX.png)

可以看出，所有链接都需要还原，因此使用相同的 CSS 规则很简单：

```
.dropdown-menu > li > a {
    -webkit-transform: rotateY(180deg);
} 
```

现在它看起来像：

![下降2](https://i.stack.imgur.com/08keW.png)

需要通过更改下拉菜单的位置来进行一些清理`left:10px;`，它看起来就像您想要的那样：

![最后结果](https://i.stack.imgur.com/O9frF.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-28T17:35:58.907

***自从创建这篇文章以来，已经有很多更新，所以我想我会给出一个更新的答案。***

对于 Bootstrap 4+，您可以使用类`dropleft`、`dropright`或`dropup`; 在您的`lists/btn-group`父 div 中。

现在，您也可以使用按钮作为您的`dropdown-items`.

[在此处](https://getbootstrap.com/docs/4.1/components/dropdowns/)查看*Bootstraps 文档*

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-23T10:46:02.423

Twitter Bootstrap 中似乎没有选项来处理下拉菜单中的方向。对箭头位置有一些影响的是这个类`.navbar .nav > li > .dropdown-menu:before`尝试摆弄它以查看下拉方向的变化

# hibernate - 读取时休眠JPA复合外键问题

> ID：16167180
> 
> 赞同：0
> 
> 时间：2013-04-23T10:36:40.807
> 
> 标签：hibernate, jpa-2.0, hibernate-mapping

我正在使用 Hibernate JPA、EnterpriseDB(PostgresPlus Advanced Server 9.2.1.3) 和 Jboss 7.1.1 Final 并在读取具有复合主键和（一对一）外键链接到另一个实体的实体时收到异常。

我准备了一个项目来展示这个案例。单击[此处](http://www.fileconvoy.com/dfl.php?id=gd0fd69b2f711a54d99927268484a959b3995590a2)下载示例项目文件。注意：该文件将在接下来的 7 天内在服务器上可用。如果需要，我可以上传文件并更改链接。

我尝试读取实体列表，将复合主键的列之一与参数匹配。

```
public List<TableA> getComposites(String key) {
    CriteriaBuilder cb = em.getCriteriaBuilder();
    CriteriaQuery<TableA> query = cb.createQuery(TableA.class);

    Root<TableA> aEntity = query.from(TableA.class);
    aEntity.fetch(TableA_.tableB, JoinType.LEFT);

    query.where(cb.equal(aEntity.get(TableA_.id).get(TableAPK_.colA), key));

    query.select(aEntity).distinct(true);

    try {
        return em.createQuery(query).getResultList();
    } catch (NoResultException ignore) {
        return null;
    }
} 
```

例外是：

```
Caused by: org.hibernate.TypeMismatchException: Provided id of the wrong type for class org.test.hibernate.persistence.entity.TableB. Expected: class org.test.hibernate.persistence.entity.TableBPK, got class org.test.hibernate.persistence.entity.TableAPK 
```

表 A 和表 B 与复合主键（col_a、col_b、col_c）一对一链接，共享相同的列名。表 B 的主键也是表 A 主键的外键。

```
@Embeddable
public class TableAPK implements Serializable {
//default serial version id, required for serializable classes.
private static final long serialVersionUID = 1L;

@Column(name="col_a")
private String colA;

@Column(name="col_b")
private String colB;

@Column(name="col_c")
private String colC;

@Entity
@Table(name="table_a")
public class TableA implements Serializable {
private static final long serialVersionUID = 1L;

@EmbeddedId
private TableAPK id;

@Column(name="col_ex_d")
private String colExD;

//bi-directional one-to-one association to TableB
@OneToOne(mappedBy="tableA", fetch=FetchType.LAZY)
private TableB tableB;

@Embeddable
public class TableBPK implements Serializable {
//default serial version id, required for serializable classes.
private static final long serialVersionUID = 1L;

@Column(name="col_a")
private String colA;

@Column(name="col_b")
private String colB;

@Column(name="col_c")
private String colC;

@Entity
@Table(name="table_b")
public class TableB implements Serializable {
private static final long serialVersionUID = 1L;

@EmbeddedId
private TableBPK id;

@Column(name="col_ex_d")
private Integer colExD;

@Column(name="col_ex_e")
private String colExE;

@Column(name="col_ex_f")
private Boolean colExF;

//bi-directional one-to-one association to TableA
@OneToOne(fetch=FetchType.LAZY)
@PrimaryKeyJoinColumns({
    @PrimaryKeyJoinColumn(name="col_a", referencedColumnName="col_a"),
    @PrimaryKeyJoinColumn(name="col_b", referencedColumnName="col_b"),
    @PrimaryKeyJoinColumn(name="col_c", referencedColumnName="col_c")
    })
private TableA tableA; 
```

如果您想在本地进行测试： Project 有一个 liquibase 配置来创建表，甚至插入示例数据本身 ( `composite-persistence/src/main/liquibase`)。您可以检查`changelog.xml`文件以创建表和主键和外键。但是我没有在包中包含连接属性文件。如果您想在本地运行该项目，我可以尝试帮助设置环境。要测试，只需在部署后在浏览器上调用 servlet

```
/composite-web/Composite?myKey=a1 
```

如果您想使用 eclipselink 进行测试，只需激活提供程序和属性`composite-persistence/src/resources/META-INF/persistence.xml`（它们被注释掉以使用 Jboss 的默认 JPA 提供程序：Hibernate；您需要在 Jboss 服务器上配置 eclipselink 模块）。顺便说一下，实体的设置与eclipselink一起工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:24:11.903

由于`TableAPK`和`TableBPK`相等（具有完全相同的结构），您可以删除一个并在任何地方使用另一个。

我的意思是： delete `TableBPK`， rename `TableAPK`do`TablePK`并在任何地方使用它。

像`TableA`那时一样：

```
@Entity
@Table(name="table_a")
public class TableA implements Serializable {
private static final long serialVersionUID = 1L;

@EmbeddedId
private TablePK id; //<- this line changed from TableAPK to TablePK
... 
```

并且`TableB`：

```
@Entity
@Table(name="table_b")
public class TableB implements Serializable {
private static final long serialVersionUID = 1L;

@EmbeddedId
private TablePK id; //<- this line changed from TableBPK to TablePK 
```

# php - php没有向javascript发送数据

> ID：16167183
> 
> 赞同：0
> 
> 时间：2013-04-23T10:36:46.400
> 
> 标签：php, javascript, ajax, connect

老实说，我做了所有可能的搜索，看了很多教程，但仍然无法使其工作。错误在javascript和php之间的某个地方。奇怪的是，如果我在页面重新加载过程中单击提交按钮，则连接成功并且脚本可以工作。

请帮忙。

我从 php require-once 调用两个变量 $l1 和 $l2 ，它们在页面上做了一些工作，然后我在 Java 脚本中使用它们发送到 PHPfile onclick of submit button;

按钮：

```
<input class ="button vote" type = "submit" onClick= "javascript: somefunction();" value = "do it" /> 
```

功能：

```
function somefunction(){

var hr = new XMLHttpRequest();

var url = "index.php";
var wn = "<?php echo $l1 ?>";
var ls = "<?php echo $l2 ?>";
var vars = "wn="+wn+"&ls="+ls;
hr.open("POST", url, true);

hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

hr.onreadystatechange = function() {
   if(hr.readyState == 4 && hr.status == 200) {
   var return_data = hr.responseText;
  document.getElementById("status").innerHTML = return_data;
   }
    }

    hr.send(vars); // execute the request
    document.getElementById("status").innerHTML = "processing...";
} 
```

php 接受器在同一页面上：

```
<?php if (isset ($_POST ["wn"])){
$wnn = $_POST['wn'];
$lss = $_POST['ls'];... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:58:20.243

我想您是直接计算这些，还是从 $_SESSION 变量计算？当您在已完成的页面上查看源代码时，检查变量是否存在，可能就在您在 php.ini 中分配变量之后。

```
<?PHP
    if (isset($l1) && !empty($l1)) {
        echo "L1 is $l1";
    } else {
        echo "L1 wasnt set"; 
    } 
?> 
```

然后确保值最高匹配您在 javascript 中看到的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:47:49.383

尝试这个：

```
var wn = document.getElementById("wn").value;
var ls =  document.getElementById("ls").value; 
```

# vb.net - VB.net 阻止显示工具提示

> ID：16167184
> 
> 赞同：1
> 
> 时间：2013-04-23T10:36:46.910
> 
> 标签：vb.net, tooltip

在我的程序中，我使用工具提示来帮助新用户了解图标按钮的作用。我还可以选择关闭工具提示。

似乎有一种`tooltip.hide`方法，但我不太明白如何使用它。

那么，如果布尔值设置为 false，我如何获得不显示的工具提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:43:36.257

`tooltip.Hide()`用于隐藏`ToolTip`正在显示的时间。

如果您希望现在显示工具提示，您可以在调用显示它们的点时设置一个条件：

```
If Not chkBoxNoToolTips.Checked Then
    tooltip1.Show()
End If 
```

或者，如果它们是自动设置的，您可以从其控件中删除工具提示：

```
tooltip1.SetToolTip(label1, "") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:43:57.420

使用[Active](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.active.aspx)属性应该可以满足您的需求，它比使用[Hide](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.hide.aspx)和[Show](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.show.aspx)方法更简单。

```
'Hide ToolTip
ToolTip.Active = False

'Show ToolTip
ToolTip.Active = True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:43:29.760

调用 SetToolTip 并通过您的控件和一个空字符串，您可能也可以通过一个空引用，但我自己没有尝试过。

这应该为您删除工具提示

```
ToolTip1.SetToolTip(txtBox1, "") 
```

希望能帮助到你

# windows-8 - 将华硕vivo rt连接到笔记本电脑

> ID：16167193
> 
> 赞同：0
> 
> 时间：2013-04-23T10:37:01.593
> 
> 标签：windows-8, visual-studio-2012, tablet

如何将 Asus Vivo RT 连接到笔记本电脑以测试 win 8 应用程序？当我插入电线时，由于某种原因没有任何显示：/

或者有没有一种方法可以将应用程序部署到平板电脑上进行测试？到目前为止，我已经在平板电脑上安装了 Visual Studio 远程工具，但是如何传输应用程序来测试它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:41:25.020

你需要在你的 RT 设备上安装一个远程调试器并连接到它（只需要在同一个 wifi 网络上）。

您需要的信息在这里：http: [//blogs.msdn.com/b/dsvc/archive/2012/10/26/windows-rt-windows-store-app-debugging.aspx](http://blogs.msdn.com/b/dsvc/archive/2012/10/26/windows-rt-windows-store-app-debugging.aspx)

# ember.js - Ember 动态段为空

> ID：16167198
> 
> 赞同：2
> 
> 时间：2013-04-23T10:37:09.083
> 
> 标签：ember.js

请参阅[http://jsfiddle.net/kt2Hz/](http://jsfiddle.net/kt2Hz/)

我已经阅读了文档、api 并浏览了 Ember 的源代码。没运气！

**路线：**

```
App.Router.map ->
  @resource 'customers', path: 'my_customers', ->
    @resource 'customer', path: '/:customer_id', ->
      @route 'edit', path: '/my_edit'

App.CustomerEditRoute = Ember.Route.extend
  setupController: (controller, model) ->
    controller.set('content', model)
    alert("inspect: #{Ember.inspect(model)}") 
```

警报输出是“检查：未定义”

如果我检查参数，对象是空的：

```
App.CustomerEditRoute = Ember.Route.extend
  model: (params) ->
    alert("inspect: #{Ember.inspect(params)}") 
```

警报输出是“检查：{}”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T10:50:04.727

动态段仅传递给客户路线，而不是嵌套路线。因此，如果您将模型钩子更改`CustomerEditRoute`为

```
model: (params) ->
    return this.modelFor("customer") 
```

它应该工作。

[（顺便说一句，这里](https://stackoverflow.com/questions/16165892/how-to-create-a-right-structure-for-nested-routes-in-ember-js)的问题几乎相同。）

# cocoa - 在可可 webview 中的 nsurldownload 后，nsprogressindictor 进度未完全完成

> ID：16167200
> 
> 赞同：1
> 
> 时间：2013-04-23T10:37:10.497
> 
> 标签：cocoa, nsurlconnection, nsprogressindicator, nsurldownload

我的进度指示器在可可 webview 中不起作用我使用了这段代码 -

```
 -(void)download:(NSURLDownload *)download didReceiveResponse:(NSURLResponse *)response { 
                 NSLog(@"downl didreceiveresponse here"); 
                 NSLog(@"Recieved reponse with expected length: %lli", [response expectedContentLength]); 
                payload=0; 
                [payload setLength:0]; 
                [progrssbar setMaxValue:[response expectedContentLength]] ; 
                [self setProgrssbar:progrssbar]; 
        } 
            - (void)connection:(NSURLConnection *)conn didReceiveData:(NSData *)data 
        { 
              NSLog(@"Recieving data. Incoming Size: %li Total Size: %li", (unsigned long)[data length], (unsigned long)[payload length]); 
              [payload appendData:data]; 
              [progrssbar setDoubleValue:[payload length]]; 
         } 
  - (void)download:(NSURLDownload *)download didReceiveDataOfLength:(unsigned)length 
   { 
            NSLog(@"downl receivedata here%i",length); 
            [progrssbar setHidden:NO]; 
            [progrssbar setIndeterminate:NO]; 
            [progrssbar startAnimation:self]; 
            [progrssbar setDoubleValue:(double)length]; [progrssbar displayIfNeeded];
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:06:56.493

有效载荷究竟是什么声明的？我在我声明的地方使用了类似的代码，`NSMutableData *payload`然后在`-(void)download:(NSURLDownload *)download didReceiveResponse:(NSURLResponse *)response`我使用`payload=[NSMutableData data]`而不是你的地方`payload=0`，也许这就是问题所在？

# c++ - C ++将不同大小的不同数组传递给同一个函数

> ID：16167201
> 
> 赞同：3
> 
> 时间：2013-04-23T10:37:16.480
> 
> 标签：c++, arrays

我有 3 个二维数组，我想传递给一个函数。目前，我使用 if-else 语句来决定要发送哪个数组，然后复制所选数组的内容并传递新数组。

新数组：

```
char board[100][100]={} 
```

这些是数组（内容未显示）：

```
char mazeEasy[19][38], mazeMed[41][81], mazeHard[72][98]; 
```

如何在不使用的情况下将这三个函数中的任何一个传递给一个函数`board[100][100]`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T10:50:24.490

一种可能性是一个`template`函数：

```
template <typename T, std::size_t Dim1, std::size_t Dim2>
void f(T(&)[Dim1][Dim2])
{
    std::cout << Dim1 << ", " << Dim2 << "\n";
} 
```

[请参阅http://ideone.com/b60h1e](http://ideone.com/b60h1e)上的演示。请注意，这将实例化函数模板的三个不同实例（每个不同维度组合的实例化）。

建议改为a [`std::vector<std::vector<char>>`](http://en.cppreference.com/w/cpp/container/vector)。这避免了多个实例化，并且函数可以查询`std::vector`其大小或迭代：

```
void f(std::vector<std::vector<char>>& a_maze)
{
    std::cout << a_maze.size() << ", " << a_maze[0].size() << "\n";
} 
```

[请参阅http://ideone.com/nHL8Hj](http://ideone.com/nHL8Hj)上的演示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T10:54:41.070

不是*同一个*函数，但你可以通过使用模板和相对未知的“如果你想要显式维度，通过引用传递数组”方法来获得每对维度的函数：

```
template<size_t i, size_t j>
void stuff(char (&arr)[i][j])
{
    for (size_t x = 0; x < i; x++)
    {
        for (size_t y = 0; y < j; y++)
        {
            std::cout << arr[x][y] << " ";
        }
        std::cout << std::endl;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T12:05:33.477

/从评论中移出/

如果我错了，请纠正我，但我相信 C 中 2D 数组的内存布局是标准的一部分，你不能期待任何东西

```
 An object of array type contains a contiguously allocated non-empty 
 set of N sub-objects of type T. 
```

同样适用于 2D。

所以我会提出简化的 C 风格的解决方案。现代 C++ 编译器的生命还没有结束，有时您需要针对轻量级嵌入式系统和编译器的类似解决方案。

```
void dumpArray( int * array, int w, int h) 
{ 
    for (int i=0;i<h;i++) 
      for (int j=0;j<w;j++) 
        { 
          printf("[%i,%i] = %i\n", i,j,array[i*w+j]); 
        } 
} 

int main(int argc, char * argv[]) 
{ 
     int a[2][3] = { {1,2,3}, {4,5,6} }; 
     int a1[3][3] = { {1,2,3}, {4,5,6}, {7,8,9} }; 

     dumpArray( (int*)a, 3, 2); 
     dumpArray( (int*)a1, 3, 3); 
     return 0; 
} 
```

# php - 在 localhost 上加载图像但不使用 IP

> ID：16167202
> 
> 赞同：0
> 
> 时间：2013-04-23T10:37:18.387
> 
> 标签：php, javascript, jquery

我正在使用 PHP 脚本来读取目录中的一些文件夹，并根据他们的名字检索他们的海报。所有这些在`localhost`. 但是，在外部打开时，这不起作用并导致`blank`图像。

来自本地主机的屏幕截图：![本地主机的屏幕截图](https://i.stack.imgur.com/qvqCe.jpg)

* * *

问题可以在 中找到`89.241.171.100/Prac/`。PHP生成`img tag`：

```
while (false !== ($entry = readdir($handle))) {
      $counter++;
      echo "<span class='title'>
              <img src='holder.js/200x280/text:$entry' 
                   alt='$entry' 
                   onload='loader(this, \"$entry\")' />
                   </span>";
      if($counter == 5) break;
 } 
```

PHP 从以下位置获取通过 ajax 调用的图像的 src `loader()`：

```
if($_POST['title']) {
    $title = $_POST['title'];
    $imdb = new Imdb();
    $movieArray = $imdb->getMovieInfo("$title");
    $link = $movieArray["poster_large"];
    echo $link;
} 
```

`Loader()`功能：

```
$.ajax({
     type: 'post',
     url: 'loader.php',
     data: 'title='+title,
     success: function(data) {
          img.src = data;
     }
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:49:24.240

这看起来像是您加载它的方式的问题。这些图像是通过 Akamai 的 CDN 提供的，它不喜欢它所获得的引荐来源网址。

这是返回的内容，而不是图像有效负载。

```
<HTML><HEAD>
<TITLE>Referral Denied</TITLE>
</HEAD><BODY>
<H1>Referral Denied</H1>
You don't have permission to access "http&#58;&#47;&#47;ia&#46;media&#45;imdb&#46;com&#47;images&#47;M&#47;MV5BMTM5NjM0ODY1NF5BMl5BanBnXkFtZTcwMjk5NjI0Ng&#64;&#64;&#46;&#95;V1&#46;&#95;SY500&#46;jpg" on this server.<P>
Reference&#32;&#35;24&#46;24c633b8&#46;1366714063&#46;2a353f15
</BODY></HTML> 
```

我不鼓励违反任何人的条款，但这[可能](http://referrer-killer.googlecode.com/git/example.html)对您有用，我怀疑传递一个空的引荐来源网址将解决问题，因为当您直接访问图像 URL 时它可以工作（并且不发送引荐来源网址）。

编辑：

[这个小提琴](http://jsfiddle.net/ndM4S/)是我之前建议的一个工作示例。您会注意到直接链接的图像已死，但没有引荐来源的图像可以完美加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:11:04.157

你可以使用[Imdb API](http://imdbapi.org/)

只需通过以下方式请求数据：`http://imdbapi.org/?id={id}&type=json&plot=simple&episode=1&lang=en-US&aka=simple&release=simple`

{id} 是电影的 imdb id。然后你可以访问图片：

```
$data = json_decode(file_get_contents("http://imdbapi.org/?id={id}&type=json&plot=simple&episode=1&lang=en-US&aka=simple&release=simple"));
$img = $data->poster; 
```

# python - Python中pickle转储的输出文件大小的确切动态是什么？

> ID：16167203
> 
> 赞同：2
> 
> 时间：2013-04-23T10:37:21.317
> 
> 标签：python, pickle

在实际转储之前，如何确定泡菜转储的输出大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:41:18.313

您可以使用[`pickle.dumps()`](http://docs.python.org/2/library/pickle.html#pickle.dumps)将转储存储在内存中的字符串中并检查其大小。

我认为没有一种简单的方法可以在不调用 pickle 过程的情况下准确地确定这个大小。

# extjs - 如何实例化 Ext 视图以在 jasmine 中进行测试

> ID：16167204
> 
> 赞同：0
> 
> 时间：2013-04-23T10:37:22.630
> 
> 标签：extjs, jasmine

我想在 Ext4 中测试视图，但是

```
Application.getView 
```

返回构造函数，我想不出如何使它工作。

```
describe("general", function() {
    it("should have fields enabled by default", function(){
        var view = Application.getView('BRM.view.business_rule.form_part.General'),
            viewInstance = new view(),
            items = viewInstance.items
        ;
        _.each(items, function(item){
            console.log(item);
            debugger;
        })
    })
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:50:49.093

您必须使用 create 方法：

```
var viewInstance = Application.getView('BRM.view.business_rule.form_part.General').create();
var items = viewInstance.items; 
```

或者，您也可以使用 Ext.create：

```
Ext.create('BRM.view.business_rule.form_part.General') 
```

# maven - 使用 activeByDefault 是否违反 Maven 最佳实践？

> ID：16167206
> 
> 赞同：11
> 
> 时间：2013-04-23T10:37:26.683
> 
> 标签：maven, maven-profiles

我想知道**从不使用`<activeByDefault`>**是否是 Maven 最佳实践？

[此处](http://wayback.archive.org/web/20160312123920/http://www.andrewspencer.net/2011/maven-profile-best-practices/)的建议似乎很合理，但是您认为这是绝对的还是在某些情况下不适用？

我在该页面上发布内容的快照以供后代使用：

![在此处输入图像描述](https://i.stack.imgur.com/eF6Xg.png)

# php - 如何在 Linux 中加速 Image Magick 图像处理命令？

> ID：16167208
> 
> 赞同：1
> 
> 时间：2013-04-23T10:37:28.567
> 
> 标签：php, linux, imagemagick, imagemagick-convert

我在 linux 上的 PHP 程序中使用 Image Magick 来处理一些图像。在一种情况下，我们从 PSD 中获取图层并显示某些图层并对其进行着色。在其他情况下，我们覆盖 3 张左右的 PNG 图像，然后返回最终图像。我们使用的是 PHP，但我们使用系统命令来运行命令提示符下的命令，然后将图像提供给浏览器。似乎很慢。缓存不是一种选择，因为有无数种可能的组合。图像不是那么大，处理每张图像有时需要 5 秒，而且似乎服务器一次只处理一张（我假设浏览器可能同时要求多张图像。）。我们已将该站点放在一个非常强大的服务器上。

# spring-roo - Spring roo - 几个疑问 - JAX-RS，移除

> ID：16167216
> 
> 赞同：0
> 
> 时间：2013-04-23T10:37:51.333
> 
> 标签：spring-roo

我正在为我们的一个开发项目评估 spring roo。有人可以帮助我知道我的理解是否正确吗？

1.  Spring ROO 具有 JAX-RS 实现。
2.  如果从项目中删除了 spring roo，但依赖关系仍然存在。POM 文件不会自动更改。

我是 spring roo 的新手，任何代码/配置示例都将帮助我更好地理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:32:36.970

我不确定你问题的第一部分，但我希望能阐明第二部分。如果您删除 Roo，您将留下所有依赖项。POM 没有更新，因为依赖项仍然存在。仅仅因为您告诉 Roo 停止管理您的项目等并不意味着您不再需要 AspectJ。删除依赖项的唯一方法是手动删除它。

根据您尝试解决的依赖关系，删除它的任务可能很容易也可能很困难。例如，AspectJ 到处都在使用，而且可能很难删除。但是，您可能根本没有使用 JSON，并且可以轻松删除 Jackson 而不会出现任何问题。这在很大程度上取决于您的应用程序在做什么。请记住，Roo 只不过是一个非常复杂的宏工具。它并没有发明一种新的做任何事情的方法，它只是提供了一种生成样板代码的方法，您可以（并且经常这样做）自己生成。它只是倾向于以花哨的方式编写样板代码，以便它可以维护它生成的代码，而无需踩到您作为开发人员添加的内容。

# java - ActionBar Tabs android代码中的子菜单

> ID：16167219
> 
> 赞同：0
> 
> 时间：2013-04-23T10:38:03.960
> 
> 标签：java, android, android-actionbar, submenu

我使用了现有的选项卡菜单模型（操作栏），现在我在为每个选项卡添加子菜单时遇到问题，我该怎么做？

这是我的代码：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Set up the action bar.
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    // Create the adapter that will return a fragment for each of the three
    // primary sections of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(
            getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

    // When swiping between different sections, select the corresponding
    // tab. We can also use ActionBar.Tab#select() to do this if we have
    // a reference to the Tab.
    mViewPager
    .setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                @Override
    public void onPageSelected(int position) {
                        actionBar.setSelectedNavigationItem(position);
                }
    });
    // For each of the sections in the app, add a tab to the action bar.
    for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
        // Create a tab with text corresponding to the page title defined by
        // the adapter. Also specify this Activity object, which implements
        // the TabListener interface, as the callback (listener) for when
        // this tab is selected.
        Tab tab = actionBar.newTab();
        tab.setText(mSectionsPagerAdapter.getPageTitle(i));
        tab.setTabListener(this);       
        actionBar.addTab(tab);
    }
} 
```

这是菜单/main.xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/action_settings"
        android:orderInCategory="100"
        android:showAsAction="never"
        android:title="@string/action_settings">
    </item>
</menu> 
```

这是其余的代码：

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);

        return true;
    }

    @Override
    public void onTabSelected(ActionBar.Tab tab,
            FragmentTransaction fragmentTransaction) {
        // When the given tab is selected, switch to the corresponding page in
        // the ViewPager.

        mViewPager.setCurrentItem(tab.getPosition());
    }

   /**
 * 
 */

    @Override
    public void onTabUnselected(ActionBar.Tab tab,
            FragmentTransaction fragmentTransaction) {
    }

    @Override
    public void onTabReselected(ActionBar.Tab tab,
            FragmentTransaction fragmentTransaction) {
    }

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
     * one of the sections/tabs/pages.
     */
    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            // getItem is called to instantiate the fragment for the given page.
            // Return a DummySectionFragment (defined as a static inner class
            // below) with the page number as its lone argument.
            Fragment fragment = new DummySectionFragment();
            Bundle args = new Bundle();
            args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
            fragment.setArguments(args);
            return fragment;
        }

        @Override
        public int getCount() {
            // Show 3 total pages.
            return 3;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            Locale l = Locale.getDefault();
            switch (position) {
            case 0:
                return getString(R.string.title_section1).toUpperCase(l);
            case 1:
                return getString(R.string.title_section2).toUpperCase(l);
            case 2:
                return getString(R.string.title_section3).toUpperCase(l);
            }
            return null;
        }
    }

    /**
     * A dummy fragment representing a section of the app, but that simply
     * displays dummy text.
     */
    public static class DummySectionFragment extends Fragment {
        /**
         * The fragment argument representing the section number for this
         * fragment.
         */
        public static final String ARG_SECTION_NUMBER = "section_number";

        public DummySectionFragment() {
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View rootView = inflater.inflate(R.layout.fragment_main_dummy,
                    container, false);
            TextView dummyTextView = (TextView) rootView
                    .findViewById(R.id.section_label);
            dummyTextView.setText(Integer.toString(getArguments().getInt(
                    ARG_SECTION_NUMBER)));
            return rootView;
        }
    } 
```

我在等你的答案，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:51:30.060

我想我应该编辑这段代码：

```
public static class DummySectionFragment extends Fragment {
        /**
         * The fragment argument representing the section number for this
         * fragment.
         */
        public static final String ARG_SECTION_NUMBER = "section_number";

        public DummySectionFragment() {
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View rootView = inflater.inflate(R.layout.fragment_main_dummy,
                    container, false);
            TextView dummyTextView = (TextView) rootView
                    .findViewById(R.id.section_label);
            dummyTextView.setText(Integer.toString(getArguments().getInt(
                    ARG_SECTION_NUMBER)));
            return rootView;
        }
    } 
```

和 XML 文件并用菜单替换文本视图？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity$DummySectionFragment" >

    <TextView
        android:id="@+id/section_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:05:48.083

假设您的所有选项卡都有自己的类扩展片段，您只需包括：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.yourmenu, menu);
    this.menu = menu;
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection

} 
```

编辑：我刚刚看到你正在寻找一个子菜单。试试这个教程： [http](http://www.mysamplecode.com/2011/07/android-options-menu-submenu-group.html) : //www.mysamplecode.com/2011/07/android-options-menu-submenu-group.html 看看“选项菜单布局 optionmenu.xml”

* * *

您将需要为每个选项卡使用片段。

您的 MainActivity- 类：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

    //instantiate Fragments / Tabs
    Fragment tabonefragment = new TabOneFragment();
    Fragment tabtwofragment = new TabTwoFragment();

    PagerAdapter mPagerAdapter = new PagerAdapter(getSupportFragmentManager());
    mPagerAdapter.addFragment(tabonefragment);
    mPagerAdapter.addFragment(tabtwofragment);

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

// When swiping between different sections, select the corresponding
    // tab. We can also use ActionBar.Tab#select() to do this if we have
    // a reference to the Tab.
    mViewPager
   .setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
            @Override
    public void onPageSelected(int position) {
                    actionBar.setSelectedNavigationItem(position);
            }
     });

    //adding tabs to your action bar
    ActionBar ab = getActionBar();
    ab.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    Tab tab1 = ab.newTab().setText("tabonetext")
            .setTabListener(new TabListener<TabOneFragment>(
                    this, "tab_one", TabOneFragment.class));

    Tab tab2 = ab.newTab().setText("tabtwotext")
            .setTabListener(new TabListener<TabTwoFragment>(
                    this, "tab_two", TabTwoFragment.class));

    ab.addTab(tab1);
    ab.addTab(tab2);
  }

public static class TabListener<T extends Fragment> implements ActionBar.TabListener {
    private Fragment mFragment;
    private final Activity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    /** Constructor used each time a new tab is created.
      * @param activity  The host Activity, used to instantiate the fragment
      * @param tag  The identifier tag for the fragment
      * @param clz  The fragment's Class, used to instantiate the fragment
      */
    public TabListener(Activity activity, String tag, Class<T> clz) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
    }

    /* The following are each of the ActionBar.TabListener callbacks */

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // Check if the fragment is already initialized
        if (mFragment == null) {
            // If not, instantiate and add it to the activity
            mFragment = Fragment.instantiate(mActivity, mClass.getName());
            ft.add(android.R.id.content, mFragment, mTag);
        } else {
            // If it exists, simply attach it in order to show it
            ft.attach(mFragment);
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        if (mFragment != null) {
            // Detach the fragment, because another one is being attached
            ft.detach(mFragment);
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }

    public void onTabReselected(Tab arg0,
            android.app.FragmentTransaction arg1)
    {
    }

    public void onTabSelected(Tab arg0, android.app.FragmentTransaction arg1)
    {
        mViewPager.setCurrentItem(arg0.getPosition());
    }

    public void onTabUnselected(Tab arg0,
            android.app.FragmentTransaction arg1)
    {           
    }
}

 public class PagerAdapter extends FragmentPagerAdapter {

        private final ArrayList<Fragment> mFragments = new ArrayList<Fragment>();

        public PagerAdapter(FragmentManager manager) {
            super(manager);
        }

        public void addFragment(Fragment fragment) {
            mFragments.add(fragment);
            notifyDataSetChanged();
        }

        @Override
        public int getCount() {
            return mFragments.size();
        }

        @Override
        public Fragment getItem(int position) {
            return mFragments.get(position);
        }
    } 
```

你的片段类：

```
public class TabOneFragment extends Fragment {

 @Override
    public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    }

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState)
{
            //inflate your layout from  a tab_one_layout.xml file (or use the same xml of your R.layout.activitiy_main if you want)
    View view = inflater.inflate(R.layout.tab_one_layout, container, false);

    return view;
}

}

//HERE: individual options menu of TabOne
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.yourmenu, menu);
    this.menu = menu;
   //create some submenu if you want

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection

} 
```

应该这样做。TabTwo ofc 也有相同/相似的代码。

# ruby-on-rails - Rails ActiveRecord：范围不连贯

> ID：16167221
> 
> 赞同：2
> 
> 时间：2013-04-23T10:38:04.617
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

在我的模型中，我有：

```
#models/friend.rb
scope :approved_friend, where(:approved => true) 
```

Rails 控制台输出：

```
User.find(2).friends
 => [#<Friend id: 18, user_id: 2, approved: true, created_at: "2013-04-23 09:18:59", updated_at: "2013-04-23 09:18:59", friend_id: 1>] 

User.find(2).friends.approved_friend
=> [] 
```

请注意，输出中的批准是正确的......它变得*疯狂*的地方在这里：

```
User.find(1).friends.approved_friend
=> [#<Friend id: 19, user_id: 1, approved: true, created_at: "2013-04-23 09:19:36", updated_at: "2013-04-23 09:19:36", friend_id: 2>] 
```

我是不是错过了什么？

**编辑：** 一方面你有这个查询：

```
SELECT "friends".* FROM "friends" WHERE "friends"."user_id" = 2

 => [#<Friend id: 18, user_id: 2, approved: true, created_at: "2013-04-23 09:18:59", updated_at: "2013-04-23 09:18:59", friend_id: 1>] 
```

另一方面，你有这个（通过范围查询）：

```
SELECT "friends".* FROM "friends" WHERE "friends"."user_id" = 2 AND "friends"."approved" = 't'
 => [] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:36:25.233

由于 :status 字段位于 Friend 模型中，您可能必须将范围更改为此

范围 :approved_friend, where('friends.approved' => true).includes(:friend)

# javascript - 无法检查弹出窗口阻止程序是否已在 chrome 中启用

> ID：16167234
> 
> 赞同：0
> 
> 时间：2013-04-23T10:38:53.417
> 
> 标签：javascript, popup

我正在用 JavaScript 编写下面的代码，但无法检查弹出窗口阻止程序是否已在 chrome 中启用

方法一：

```
var params = 'height=1,width=1,left=-100,top=-100,location=no,toolbar=no,menubar=no,scrollbars=no,resizable=no,directories=no,status=no';
var testWindow = window.open(null, "popupTest", params);
if( !testWindow
    || testWindow.closed
    || (typeof testWindow.closed=='undefined')
    || testWindow.outerHeight == 0
    || testWindow.outerWidth == 0
    ) {
    // pop-ups ARE blocked
  //  document.location.href = 'popupsBlocked.htm';
    alert("blocked");
}
else {
    // pop-ups are NOT blocked
  testWindow.close();
    alert("not blocked");
} 
```

方法二：

```
var test = window.open(null, "", "width=0,height=0");
    try {
        test.close();           
        alert("Pop-ups not blocked");
    } catch (e) {
        alert("Pop-up blocker is enabled in the browsers");
    } 
```

两种方法都不起作用请帮助我....

# java - 在jaxb中生成列表标签和对象标签

> ID：16167238
> 
> 赞同：1
> 
> 时间：2013-04-23T10:39:32.533
> 
> 标签：java, xml, tags, jaxb

我想在 jaxb 中生成列表标签和对象标签。我有两节课。

```
@XmlRootElement(name = "firstclass")
    class Firstclass{
     List<secondclass> secondclassList = new ArrayList<secondclass>();

     //constructors, getters, setters

      @XmlElement(name = "secondclassList")
       public void setsecondclassList(List<Secondclass> secondclassList) {
       this.secondclassList= secondclassList;
      }

    } 
```

二级代码

```
@XmlRootElement(name = "secondclass")
    class Secondclass{
     String name;
     String attribute;

     //constructors, getters, setters
    } 
```

xml转换后，我得到类似的输出

```
<firstclass>
    <secondclassList>
      <name>my name</name>
      <attribute>attr value 11</attribute>
    <secondclassList>
    </secondclassList>
      <name>my name</name>
      <attribute>attr value 22</attribute>
    </secondclassList>
</firstclass> 
```

但我想要这样的输出

```
<firstclass>
    <secondclassList>
         <secondclass>
              <name>my name</name>
              <attribute>attr value 11</attribute>
         </secondclass>
         <secondclass>
              <name>my name</name>
              <attribute>attr value 22</attribute>
         </secondclass>
     </secondclassList>
</firstclass> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T10:54:49.323

尝试使用：

```
 @XmlElementWrapper(name = "secondclassList")
  @XmlElement(name="secondclass")
  public void setsecondclassList(List<Secondclass> secondclassList) { 
```

# rvm - 如何在 vagrant box 上使用 puppet 将 gem 安装到 rvm 中？

> ID：16167242
> 
> 赞同：3
> 
> 时间：2013-04-23T10:39:40.157
> 
> 标签：rvm, puppet, vagrant

我已经用 puppet 供应器设置了一个简单的 Vagrant 盒子。使用 puppet 我安装了 rvm：

```
exec { 'install_rvm':
  command => "${as_vagrant} 'curl -L https://get.rvm.io | bash -s stable'",
  creates => "${home}/.rvm",
  require => Package['curl']
} 
```

和红宝石：

```
exec { 'install_ruby':
  command => "${as_vagrant} '${home}/.rvm/bin/rvm install 2.0.0 --latest-binary --autolibs=enabled && rvm --fuzzy alias create default 2.0.0'",
  creates => "${home}/.rvm/bin/ruby",
  require => Exec['install_rvm']
} 
```

我正在尝试安装一个可以在 rvm 的默认 ruby​​ 版本（在本例中为 2.0.0）上可用的 gem

如果我尝试使用 puppet 记录的代码，它就可以工作（我想它会在系统 ruby​​ 上安装 gem）：

```
package { 'sinatra':
    ensure   => 'installed',
    provider => 'gem',
} 
```

**当前的解决方法：** 如果我以流浪用户身份执行命令，它可以工作，但看起来不太好：

```
$as_vagrant   = 'sudo -u vagrant -H bash -l -c'

exec { "${as_vagrant} 'sudo -u vagrant -H bash -l -c gem install stasis'":
  require => Exec['install_ruby']
} 
```

有任何想法吗？
谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T19:18:15.840

您可以使用puppet forge 中的[这个 rvm 模块](https://forge.puppetlabs.com/maestrodev/rvm)。查看[有关 puppet 的 Vagrant 文档](http://docs-v1.vagrantup.com/v1/docs/provisioners/puppet.html)，了解如何将 puppet 模块与 vagrant 一起使用。

# google-apps-script - 如何使用 getGuestList 获取姓名，而不是电子邮件地址？

> ID：16167244
> 
> 赞同：0
> 
> 时间：2013-04-23T10:39:42.857
> 
> 标签：google-apps-script, google-sheets, google-calendar-api

我找到了这个脚本（由 Jonathon 发布），需要对其进行修改以提供用户名。

当我尝试获取客人姓名（使用`getGuestList()`）时，它会在我的电子表格中返回 EventGuest。

如何将客人姓名（不是电子邮件）输入电子表格？

```
function caltest3(){

var ss = SpreadsheetApp.openById( 'spreadsheetId' ),
  sheet = ss.getSheetByName( 'sheetName' ),
  cals = ['id1', 'id2', 'id3'], c, cal, calName,
  start = new Date( 'whenever' ), end = new Date( 'whenever' ),
  events, i, details,
  eventslog = [], e,
  rows = [], range;

for (c = 0; c < cals.length; c += 1) {

cal = CalendarApp.getCalendarById(cals[c]);
calName = cal.getTitle();
events = cal.getEvents(start, end);

// add the events of the current calendar to the array of all events
  eventslog = eventslog.concat(
   events.map(function(event) {
     return {
       time: new Date(event.getStartTime()).getTime(), // sort by this
        details: [
         event.getTitle(),
         event.getStartTime(),
         event.getEndTime(),
         event.getDescription(),
         event.getLocation(),
         calName // change calendar info position in array to suit
        ]
      };
    })
  );
 }

// sort array of event so date order can be either way by reversing a & b
eventslog.sort(function(a, b) { return a.time - b.time; });

rows = eventslog.map(function(entry) { return entry.details; });

range = sheet.getRange(2, 1, rows.length, 6);
range.setValues(rows);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T14:53:58.960

您需要遍历返回的客人`Event.getGuestList()`，并检索每个名称`EventGuest.getName()`，[记录在这里](https://developers.google.com/apps-script/reference/calendar/event-guest#getName%28%29)。您应该验证该名称是否为空白，并且在这种情况下可能会选择电子邮件 - 我将把它留给您。

以下是您的功能将如何改变：

```
function caltest3(){

var ss = SpreadsheetApp.openById( 'spreadsheetId' ),
  sheet = ss.getSheetByName( 'sheetName' ),
  cals = ['id1', 'id2', 'id3'], c, cal, calName,
  start = new Date( 'whenever' ), end = new Date( 'whenever' ),
  events, i, details,
  eventslog = [], e,
  rows = [], range;

for (c = 0; c < cals.length; c += 1) {

cal = CalendarApp.getCalendarById(cals[c]);
calName = cal.getTitle();
events = cal.getEvents(start, end);

// add the events of the current calendar to the array of all events
  eventslog = eventslog.concat(
   events.map(function(event) {
     var deets =  {
       time: new Date(event.getStartTime()).getTime(), // sort by this
        details: [
         event.getTitle(),
         event.getStartTime(),
         event.getEndTime(),
         event.getDescription(),
         event.getLocation(),
         calName // change calendar info position in array to suit
        ]
      };
      var guestList = event.getGuestList();
      event.guests = [];
      for (var i in guestList) {
        event.guests.push(guestList[i].getName());
      } 
      deets.guests = guestList;
      return deets;
    })
  );
 } 
```

# facebook - 从上一个 Sharekit 版本获取用户 Facebbok id？

> ID：16167245
> 
> 赞同：1
> 
> 时间：2013-04-23T10:39:44.130
> 
> 标签：facebook, sharekit

几天以来，我更新到 Sharekit 上一个版本，并且可以共享，但是我需要在某些应用程序中获取用户 Facebook ID。我解释了我在做什么：当用户首先启动应用程序时，我检查 NSUserDefaults 如下：

```
 NSUserDefaults *userPreferences = [NSUserDefaults standardUserDefaults];

NSLog(@"user : %@",[userPreferences valueForKey:@"userId"]); 
```

看看他是否已经在我的数据库中注册。在另一种情况下，我展示了一个让他像这样连接 Facebook 的视图：

```
 [SHKFacebook   getUserInfo];

 NSNotificationCenter *center = [NSNotificationCenter defaultCenter];

[center addObserver:self
           selector:@selector(registerFacebook)
               name:@"SHKSendDidFinish"
             object:nil]; 
```

这是方法

```
- (void)registerFacebook {

NSDictionary *facebookUserInfo = [[NSUserDefaults standardUserDefaults] objectForKey:@"kSHKFacebookUserInfo"];

fbid= [facebookUserInfo objectForKey:@"id"];

NSLog(@"registred = %@",fbid);

NSUserDefaults *userPreferences = [NSUserDefaults standardUserDefaults];

[userPreferences setValue:fbid forKey:@"userId"] ;

.... } 
```

它适用于 IOS 6 和 6.1，但使用 IOS5 似乎无法获取用户 ID，即使我使用 forcePreIOS6FacebookPosting 为 YES。

任何想法？

# c# - 尝试使用 TSql100Parser 解析时无法正确解析 sql 脚本

> ID：16167246
> 
> 赞同：0
> 
> 时间：2013-04-23T10:39:45.513
> 
> 标签：c#, sql, parsing

我正在使用 ScriptDom 来解析 SQL 脚本。我的程序如下

```
static void Main(string[] args)
        {
            string script = @"
                            SET QUOTED_IDENTIFIER ON
                            GO

                            SET ANSI_NULLS ON
                            GO

                            CREATE PROCEDURE dbo.ws_Device_Update
                            (
                                @ApplicationId uniqueidentifier   ,
                                @OriginalApplicationId uniqueidentifier   ,
                                @DeviceIMEI nvarchar (50)  ,
                                @OriginalDeviceIMEI nvarchar (50)  ,
                                @ModelId int   ,
                                @DeviceName nvarchar (50)  ,
                                @DeviceDescription nvarchar (255)  ,
                                @DeviceState int   ,
                                @IsExpired bit   ,
                                @IsSuspended bit   ,
                                @LastAccessed datetime   ,
                                @ClientSeqNo bigint   ,
                                @ServerSeqNo bigint   ,
                                @ModelCode varchar (50)  ,
                                @PushToken varchar (512)  ,
                                @PushLastAlive datetime   ,
                                @PushLastDead datetime   ,
                                @DeviceType int   
                            )

                            AS

                            UPDATE dbo.[ws_Device]
                            SET

                                 [ModelId]              = @ModelId           --Does a device model change with same DeviceIMEI .I doubt it
                                ,[DeviceName]           = @DeviceName        --Does a device name change with same DeviceIMEI .I doubt it
                                ,[DeviceDescription]    = @DeviceDescription --Does a device description change with same DeviceIMEI .I doubt it
                                ,[DeviceState]          = @DeviceState       
                                ,[IsExpired]            = @IsExpired
                                ,[IsSuspended]          = @IsSuspended
                                ,[LastAccessed]         = @LastAccessed
                                ,[ClientSeqNo]          = @ClientSeqNo
                                ,[ServerSeqNo]          = @ServerSeqNo
                                ,[ModelCode]            = @ModelCode         --Does a device model code with same DeviceIMEI .I doubt it
                                ,[PushToken]            = @PushToken
                                ,[PushLastAlive]        = @PushLastAlive
                                ,[PushLastDead]         = @PushLastDead
                                ,[DeviceType]           = @DeviceType        --Does a device device type change with same DeviceIMEI .I doubt it
                            WHERE
                                [ApplicationId]         = @OriginalApplicationId 
                            AND [DeviceIMEI]            = @OriginalDeviceIMEI
                            ";

            IList<ParseError> parseErrors;
            TSql100Parser tsqlParser = new TSql100Parser(false);
            TSqlFragment fragment;
            using (StringReader stringReader = new StringReader(script))
            {
                fragment = (TSqlFragment)tsqlParser.Parse(stringReader, out parseErrors);
            }
            if (parseErrors.Count > 0)
            {
                Console.WriteLine(@"Errors encountered: ""{0}""", parseErrors[0].Message);
            }

            Console.ReadKey();
        } 
```

工作正常。

但如果我不提

```
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_NULLS ON
GO 
```

它失败

**遇到的错误：“CREATE 附近的语法不正确。”**

我的问题是它为什么会发生......没有*SET QUOTED_IDENTIFIER ON*或 *SET ANSI_NULLS ON*，它仍然是一个有效的存储过程。

或者是否必须使用这些？有没有办法绕过它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T09:40:55.630

Priyanka 的问题是在您的 CREATE PROCEDURE 文本之前有一个（不可见的）0xFFFE。如果您使用键盘，则可以验证这一点，转到 C 字符并将光标向左移动。你会发现在 C 的左边，光标似乎并没有向左前进，除非你再次按下左箭头键。

0xFFFE 是用于检测 Unicode 字节顺序的字节顺序标记，我怀疑这已以某种方式潜入您的代码中。现在，您可以使用 DEL 或 BackSpace 键简单地删除隐藏字符，它会修复它。

同样，将来总是将 true 传递给 TSql100Parser 类的构造函数。带引号的标识符处理默认是开启的，所以我们需要在解析器构造函数中尊重它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:43:47.650

阅读这两篇文章：
QUOT.ID：http://msdn.microsoft.com/en-us/library/ms188048.aspx ANSI：[http :](http://msdn.microsoft.com/en-us/library/ms174393.aspx) [//msdn.microsoft.com/en-us/library/ms174393.aspx](http://msdn.microsoft.com/en-us/library/ms188048.aspx)在您的情况，可能缺少后一种会导致问题，因为您的 UPDATE 获取 NULL(s)

# ajax - 来自 AJAX 请求的 302

> ID：16167247
> 
> 赞同：1
> 
> 时间：2013-04-23T10:39:48.617
> 
> 标签：ajax, http

我发送了一个 AJAX 请求，它返回一个 302（我看到这个使用提琴手）但在萤火虫中我从来没有看到 302。我只看到一个 500。

IE也会发生同样的事情。

如果 AJAX 请求返回 302，浏览器会吞下它吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-08T01:34:25.147

在我的 Web 应用程序中执行 AJAX POST 时，我发现我的浏览器正在注册 302 Found，然后是 200 OK。

![浏览器网络检查器](https://i.stack.imgur.com/bIkfg.png)

但是，JavaScript 调试器显示响应为 200 OK，HTML 内容将显示在重定向页面上。

![浏览器 JavaScript 检查器](https://i.stack.imgur.com/yDogqm.png)

这表明重定向是由 JavaScript 在内部处理的。在这种情况下，您可以将页面内容替换为服务器响应返回的内容。

```
document.open();
document.write(xhr.responseText);
document.close(); 
```

有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/4387688/replace-current-page-with-ajax-content)。

# dynamics-crm-2011 - CRM 2011：在 HTML Web 资源中查找

> ID：16167252
> 
> 赞同：0
> 
> 时间：2013-04-23T10:40:04.013
> 
> 标签：dynamics-crm-2011

可以在 HTML Web 资源中使用查找吗？

我已经替换了电子邮件实体上“转换为大小写”按钮的命令。
它现在在点击时打开一个 html 网络资源。
我需要向客户和主题显示查找字段。

对于这种情况，是否有替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:33:14.960

将查找添加到您自己的页面绝对是一件痛苦的事情，因为它们不会“为您提供”控件以将其添加到您的 HTML 资源中。我也不知道有任何现成的工具包。

显示主题的可能解决方案（假设您没有太多）是使用 HTML 选择元素并用可能的值填充它。

就客户而言，它很可能需要一些创造力或肘部油脂来取代，因为很可能您有太多的帐户/联系人无法在 HTML 选择中显示。一种想法是您很可能正在转换一封电子邮件，其中包含已在电子邮件中的联系人或帐户（来自或关于字段）。您可以尝试从电子邮件字段中提取所有帐户和联系人，并允许用户通过无线电、选择等方式选择其中一个。

如果这样的东西不起作用，那么您很可能需要创建自己的查找，或者类似的东西，例如带有内联网格的文本框，像查找一样被过滤，因此您不必重新创建整个对话体验。

希望有帮助。

# ruby-on-rails-3 - 在迁移中替换列的值

> ID：16167255
> 
> 赞同：0
> 
> 时间：2013-04-23T10:40:11.973
> 
> 标签：ruby-on-rails-3, migration

我有一个名为 " `p_type`" 的列，它是字符串，因为我认为有 types `A`，`B`并且`C`as strings

现在我意识到最好是拥有它，`bitmask`这样我才能拥有`A`并`C`在一起。

如果我做

```
change_column :cars, :p_type, :integer 
```

我要么会丢失所有现有的 p_type 数据，要么会出现严重错误，迁移会以某种方式扭曲数据（我不敢尝试）

有没有办法将列类型更改为 :`integer`并在迁移文件中具有某种功能

```
if A
 p_type = 1
elsif B
 p_type = 2
elsif C
 p_type = 4
end 
```

那么迁移会改变数据类型和数据本身吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:50:14.283

您可以先运行一个 rake 任务来更新 p_type 列，

```
Model_name.each { |obj|
if obj.p_type == "A"
 p_type = "1"
elsif obj.p_type == "B"
 p_type = "2"
elsif obj.p_type == "C"
 p_type = "4"
end
obj.save
} 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:22:21.717

解决了[如何在 Heroku 中更改列类型？](https://stackoverflow.com/questions/3075920/how-do-i-change-column-type-in-heroku)

```
rename_column :cars, :p_type , :p_type_string
add_column :cars, :p_type , :integer
Car.reset_column_information
Car.find_each { |c| c.update_attribute(:p_type , c.p_type_string) } 
remove_column :cars, :p_type_string 
```

# javascript - three.js 中边界框的坐标错误

> ID：16167257
> 
> 赞同：0
> 
> 时间：2013-04-23T10:40:24.177
> 
> 标签：javascript, three.js, webgl

我在 three.js 中的边界框有一些奇怪的行为。我使用 STLLoader，对于某些模型，一切正常，但对于其中一些模型，框已移动。例如：

[http://oi37.tinypic.com/35a1y4l.jpg](http://oi37.tinypic.com/35a1y4l.jpg) 和 [http://oi34.tinypic.com/4hf4tl.jpg](http://oi34.tinypic.com/4hf4tl.jpg)

边界框大小合适，位置为（0,0,0）。相同位置已加载 STL 模型。

这是我的代码：

```
function stlLoader() {
         var redPhongMaterial = new THREE.MeshPhongMaterial({ color: 0xFFEA32, side: THREE.DoubleSide, ambient:0x000000}); // yellow
            var stlLoader = new THREE.STLLoader();
            stlLoader.addEventListener('load', function (event) {
                    var stlGeometry = event.content;
                    var mesh = new THREE.Mesh(stlGeometry, redPhongMaterial);
                    mesh.scale.set(2, 2, 2);
                    mesh.castShadow = true;
                    mesh.receiveShadow = true;
                    stlGeometry.computeBoundingBox();
                    var boundingBox = mesh.geometry.boundingBox.clone();
                    drawBoundingBox(boundingBox, mesh.scale.x, mesh.scale.y, mesh.scale.z);
                    mesh.position.y = 0;
                    mesh.position.x = 0;
                    mesh.position.z = 0;
        scene.add( mesh );
                    loadComplete();
                } );
            stlLoader.load( ptsfilestoload );
    }

    function drawBoundingBox(box, scaleX, scaleY, scaleZ)
    {
        var length = scaleX * (box.max.x - box.min.x);
        var height = scaleY * (box.max.y - box.min.y);
        var depth =  scaleZ * (box.max.z - box.min.z);
        var boundingBoxGeometry = new THREE.CubeGeometry( length, height, depth );
        for ( var i = 0; i < boundingBoxGeometry.faces.length; i ++ ) 
        {
             boundingBoxGeometry.faces[i].color.setHex( Math.random() * 0xffffff );
        }
        var boundingBoxMaterial = new THREE.MeshBasicMaterial( { color: 0xffffff, vertexColors: THREE.FaceColors, transparent: true, opacity: 0.7 } );
        var boundingBoxMesh = new THREE.Mesh( boundingBoxGeometry, boundingBoxMaterial);
        scene.add( boundingBoxMesh );
    } 
```

或者这可能是 STLLoader 的问题？我对 webgl 和 three.js 真的很陌生，所以任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:19:21.573

在您的 drawBoundingBox 例程中，您需要

```
var bboxCenter = box.center ();
boundingBoxMesh .translateX (bboxCenter.x);
boundingBoxMesh .translateY (bboxCenter.y);
boundingBoxMesh .translateZ (bboxCenter.z); 
```

就在您将网格添加到场景之前。您的 Cube 是在 0,0,0 左右创建的。

# android - 如何从 twitter 获取家庭时间线数据

> ID：16167258
> 
> 赞同：1
> 
> 时间：2013-04-23T10:40:25.400
> 
> 标签：android, twitter, twitter4j

我开发了一个应用程序。在我的应用程序中，我想获取 twitter 主页时间线数据并显示列表视图。我使用了 twitter4j 库。我搜索了很多，还阅读了 twitter 文档。在 taht 文档中，使用波纹管获取用户时间线数据网络服务：“ [https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=twitterapi&count=2](https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=twitterapi&count=2) ”。它工作正常，将显示数据。但我的要求是获取家庭时间线数据.在该文档中，他们提供了以下网络服务：[https](https://api.twitter.com/1.1/statuses/home_timeline.json.This) ://api.twitter.com/1.1/statuses/home_timeline.json。这不起作用，并且不会显示家庭时间线数据。请任何人建议我，如何做到这一点。提前致谢

这是我的 oncreate 代码：这是我的进口商：

```
import java.util.ArrayList;
import java.util.List;
import org.json.JSONArray;
import org.json.JSONObject;
import com.dss.utils.UrltoValue;
import com.ibud.adapters.TweetList;
import twitter4j.Paging;
import twitter4j.Status;
import twitter4j.Twitter;
import twitter4j.TwitterException;
import twitter4j.TwitterFactory;
import twitter4j.User;
import twitter4j.auth.AccessToken;
import twitter4j.auth.RequestToken;
import twitter4j.conf.Configuration;
import twitter4j.conf.ConfigurationBuilder;
import twitter4j.json.DataObjectFactory;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.content.pm.ActivityInfo;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Build;
import android.os.Bundle;
import android.os.StrictMode;
import android.preference.PreferenceManager;
import android.text.Html;
import android.util.Log;
import android.view.KeyEvent;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast; 
```

这是我的实例变量：

```
static String TWITTER_CONSUMER_KEY = "CjHtStxCA2toDQY6xnMwg"; // place your cosumer key here
    static String TWITTER_CONSUMER_SECRET = "jjhpODDhtl3FM26ETn7yt3Q1Wc7VdxZXequDrmwFg"; // place your consumer secret here

    // Preference Constants
    static String PREFERENCE_NAME = "twitter_oauth";
    static final String PREF_KEY_OAUTH_TOKEN = "oauth_token";
    static final String PREF_KEY_OAUTH_SECRET = "oauth_token_secret";
    static final String PREF_KEY_TWITTER_LOGIN = "isTwitterLogedIn";
    static final String TWITTER_CALLBACK_URL = "oauth://t4jsample";

    // Twitter oauth urls
    static final String URL_TWITTER_AUTH = "auth_url";
    static final String URL_TWITTER_OAUTH_VERIFIER = "oauth_verifier";
    static final String URL_TWITTER_OAUTH_TOKEN = "oauth_token";
    String username="";
    private String strResponse;
    private String[] strText;
    LinearLayout llTotal;
    ListView lvlist;
    List<Status> statuses = new ArrayList<Status>();

    // Login button
    Button btnLoginTwitter,btnLoginFaceBook,btnBack;
    // Update status button
    Button btnUpdateStatus;
    // Logout button
    Button btnLogoutTwitter;
    // EditText for update
    EditText txtUpdate;
    // lbl update
    TextView lblUpdate;
    TextView lblUserName;
    // Progress dialog
    ProgressDialog pDialog;
    // Twitter
    private static Twitter twitter;
    private static RequestToken requestToken;
    // Shared Preferences
    private static SharedPreferences mSharedPreferences;
    // Internet Connection detector
    private ConnectionDetector cd;
    AccessToken accessToken;
    // Alert Dialog Manager
    AlertDialogManager alert = new AlertDialogManager();

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    cd = new ConnectionDetector(getApplicationContext());

    // Check if Internet present
    if (!cd.isConnectingToInternet()) {
        // Internet Connection is not present
        alert.showAlertDialog(MainActivity.this,
                "Internet Connection Error",
                "Please connect to working Internet connection", false);
        // stop executing code by return
        return;
    }

    // Check if twitter keys are set
    if (TWITTER_CONSUMER_KEY.trim().length() == 0
            || TWITTER_CONSUMER_SECRET.trim().length() == 0) {
        // Internet Connection is not present
        alert.showAlertDialog(MainActivity.this, "Twitter oAuth tokens",
                "Please set your twitter oauth tokens first!", false);
        // stop executing code by return
        return;
    }

    // All UI elements
    btnBack = (Button) findViewById(R.id.back);
    btnLoginFaceBook = (Button) findViewById(R.id.btnLoginFaceBook);
    btnLoginTwitter = (Button) findViewById(R.id.btnLoginTwitter);
    btnUpdateStatus = (Button) findViewById(R.id.btnUpdateStatus);
    btnLogoutTwitter = (Button) findViewById(R.id.btnLogoutTwitter);
    txtUpdate = (EditText) findViewById(R.id.txtUpdateStatus);
    lblUpdate = (TextView) findViewById(R.id.lblUpdate);
    lblUserName = (TextView) findViewById(R.id.lblUserName);

    // Shared Preferences
    mSharedPreferences = getApplicationContext().getSharedPreferences(
            "MyPref", 0);

    btnLoginTwitter.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {

            loginToTwitter();
        }
    });
    btnBack.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // Call login twitter function
            btnLogoutTwitter.setVisibility(View.GONE);
            btnUpdateStatus.setVisibility(View.GONE);
            txtUpdate.setVisibility(View.GONE);
            lblUpdate.setVisibility(View.GONE);
            lblUserName.setText("");
            lblUserName.setVisibility(View.GONE);
            btnLoginFaceBook.setVisibility(View.VISIBLE);
            btnLoginTwitter.setVisibility(View.VISIBLE);
        }
    });

    btnLoginFaceBook.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // Call login twitter function
            Log.e("this is", "facebook onclick");
        }
    });

    /**
     * Button click event to Update Status, will call updateTwitterStatus()
     * function
     * */
    btnUpdateStatus.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // Call update status function
            // Get the status from EditText
            String status = txtUpdate.getText().toString();

            // Check for blank text
            if (status.trim().length() > 0) {
                // update status
                new updateTwitterStatus().execute(status);
            } else {
                // EditText is empty
                Toast.makeText(getApplicationContext(),
                        "Please    enter status message",
                        Toast.LENGTH_SHORT).show();
            }
        }
    });

    /**
     * Button click event for logout from twitter
     * */
    btnLogoutTwitter.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // Call logout twitter function
            logoutFromTwitter();
        }
    });

    /**
     * This if conditions is tested once is redirected from twitter page.
     * Parse the uri to get oAuth Verifier
     * */
    if (!isTwitterLoggedInAlready()) {
        Uri uri = getIntent().getData();
        if (uri != null && uri.toString().startsWith(TWITTER_CALLBACK_URL)) {
            // oAuth verifier
            String verifier = uri
                    .getQueryParameter(URL_TWITTER_OAUTH_VERIFIER);

            try {
                // Get the access token
                accessToken = twitter.getOAuthAccessToken(requestToken,
                        verifier);

                // Shared Preferences
                Editor e = mSharedPreferences.edit();

                // After getting access token, access token secret
                // store them in application preferences
                e.putString(PREF_KEY_OAUTH_TOKEN, accessToken.getToken());
                e.putString(PREF_KEY_OAUTH_SECRET,
                        accessToken.getTokenSecret());
                // Store login status - true
                e.putBoolean(PREF_KEY_TWITTER_LOGIN, true);
                e.commit(); // save changes

                Log.e("Twitter OAuth Token", "> " + accessToken.getToken());

                // Hide login button
                btnLoginTwitter.setVisibility(View.GONE);
                btnLoginFaceBook.setVisibility(View.GONE);

                // Show Update Twitter
                lblUpdate.setVisibility(View.VISIBLE);
                txtUpdate.setVisibility(View.VISIBLE);
                btnUpdateStatus.setVisibility(View.VISIBLE);
                btnLogoutTwitter.setVisibility(View.VISIBLE);

                // Getting user details from twitter
                // For now i am getting his name only
                long userID = accessToken.getUserId();
                User user = twitter.showUser(userID);
                String username = user.getName();

                Log.e("user id:", "" + userID);
                Log.e("user name:", username);

                try {
                    ConfigurationBuilder builder = new ConfigurationBuilder();

                    Log.e("tryyyyyyyyy:", "try");

                    // TWITTER ACCESS TOKEN
                    String twit_access_token = mSharedPreferences
                            .getString(PREF_KEY_OAUTH_TOKEN, null);

                    Log.e("access token:", twit_access_token);

                    // TWITTER ACCESS TOKEN SECRET
                    String twit_access_token_secret = mSharedPreferences
                            .getString(PREF_KEY_OAUTH_SECRET, null);

                    Log.e("access token sec:", twit_access_token_secret);

                    builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
                    builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);
                    builder.setOAuthAccessToken(twit_access_token);
                    builder.setOAuthAccessTokenSecret(twit_access_token_secret);
                    builder.setJSONStoreEnabled(true);
                    builder.setIncludeEntitiesEnabled(true);
                    // builder.setIncludeMyRetweetEnabled(true);
                    builder.setIncludeRTsEnabled(true);

                    AccessToken accessToken = new AccessToken(
                            twit_access_token, twit_access_token_secret);

                    Log.e("accesstoken:", "" + accessToken);

                    Twitter twitter = new TwitterFactory(builder.build())
                            .getInstance(accessToken);

                    Log.e("twitter:", "" + twitter);

                    Paging paging = new Paging(200); // MAX 200 IN ONE CALL.
                                                        // SET YOUR OWN
                                                        // NUMBER <= 200
                    statuses = twitter.getHomeTimeline(paging);

                    Log.e("statuses", "statuses");

                    try {

                        Log.e("tryyyyyyyyy in tryyyyyyyyyyyyyy:", "try");

                        String strInitialDataSet = DataObjectFactory
                                .getRawJSON(statuses);
                        JSONArray JATweets = new JSONArray(
                                strInitialDataSet);

                        Log.e("lengthhhhhhhhhhhh:", "" + JATweets.length());

                        for (int i = 0; i < JATweets.length(); i++) {

                            JSONObject JOTweets = JATweets.getJSONObject(i);
                            Log.e("TWEETS", JOTweets.toString());

                        }

                    } catch (Exception e1) {
                        // TODO: handle exception
                        e1.printStackTrace();
                    }
                } catch (Exception e2) {
                    // TODO: handle exception
                }

                // Displaying in xml ui
                lblUserName.setText(Html.fromHtml("<b>Welcome " + username
                        + "</b>"));

            } catch (Exception e) {
                // Check log for login errors
                Log.e("Twitter Login Error", "> " + e.getMessage());
            }
            /*
             * Intent i = new Intent(this,ShareActivity.class);
             * startActivity(i);
             */
        }
    }

}// oncreate.

private void loginToTwitter() {
    // Check if already logged in
    if (!isTwitterLoggedInAlready()) {
        ConfigurationBuilder builder = new ConfigurationBuilder();
        builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
        builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);
        Configuration configuration = builder.build();

        TwitterFactory factory = new TwitterFactory(configuration);
        twitter = factory.getInstance();

        try {

            Log.e("clickkkkkkkkkkk:", "authoriseeeeeee");

            requestToken = twitter
                    .getOAuthRequestToken(TWITTER_CALLBACK_URL);
            this.startActivity(new Intent(Intent.ACTION_VIEW, Uri
                    .parse(requestToken.getAuthenticationURL())));
        } catch (TwitterException e) {
            e.printStackTrace();
        }
    } else {

        Log.e("elseeeeeeeeeeeee:", "elseeeeeeee");

        // user already logged into twitter
        Toast.makeText(getApplicationContext(),
                "Already Logged into twitter", Toast.LENGTH_LONG).show();
        btnLoginTwitter.setVisibility(View.GONE);
        btnLoginFaceBook.setVisibility(View.GONE);

        // Getting user details from twitter
        // For now i am getting his name only
        Uri uri = getIntent().getData();
        if (uri != null && uri.toString().startsWith(TWITTER_CALLBACK_URL)) {
            // oAuth verifier
            String verifier = uri
                    .getQueryParameter(URL_TWITTER_OAUTH_VERIFIER);

            try {
                // Get the access token
                accessToken = twitter.getOAuthAccessToken(requestToken,
                        verifier);

                // Shared Preferences
                Editor e = mSharedPreferences.edit();

                // After getting access token, access token secret
                // store them in application preferences
                e.putString(PREF_KEY_OAUTH_TOKEN, accessToken.getToken());
                e.putString(PREF_KEY_OAUTH_SECRET,
                        accessToken.getTokenSecret());
                // Store login status - true
                e.putBoolean(PREF_KEY_TWITTER_LOGIN, true);
                e.commit(); // save changes

                Log.e("Twitter OAuth Token", "> " + accessToken.getToken());

                long userID = accessToken.getUserId();
                Log.e("user id:", "" + userID);

                User user = twitter.showUser(userID);
                String username = user.getName();

                Log.e("user name:", username);

                // Hide login button
                btnLoginTwitter.setVisibility(View.GONE);

                // Displaying in xml ui
                lblUserName.setText(Html.fromHtml("<b>Welcome " + username
                        + "</b>"));
            } catch (Exception e) {
                // Check log for login errors
                Log.e("Twitter Login Error", "> " + e.getMessage());
            }

            /*
             * Intent i = new Intent(this,ShareActivity.class);
             * startActivity(i);
             */

        }

    }
}// login 
```

这是发布的推文：

```
class updateTwitterStatus extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(MainActivity.this);
            pDialog.setMessage("Updating to twitter...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting Places JSON
         * */
        protected String doInBackground(String... args) {
            Log.d("Tweet Text", "> " + args[0]);

            Log.e("Tweet Text", "> " + args[0]);

            String status = args[0];
            try {
                ConfigurationBuilder builder = new ConfigurationBuilder();
                builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
                builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);

                // Access Token 
                String access_token = mSharedPreferences.getString(PREF_KEY_OAUTH_TOKEN, "");
                // Access Token Secret
                String access_token_secret = mSharedPreferences.getString(PREF_KEY_OAUTH_SECRET, "");

                AccessToken accessToken = new AccessToken(access_token, access_token_secret);
                Twitter twitter = new TwitterFactory(builder.build()).getInstance(accessToken);

                // Update status
                twitter4j.Status response = twitter.updateStatus(status);

                Log.d("Status", "> " + response.getText());
                Log.e("Status", "> " + response.getText());

            } catch (TwitterException e) {
                // Error in updating status
                Log.d("Twitter Update Error", e.getMessage());
            }
            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog and show
         * the data in UI Always use runOnUiThread(new Runnable()) to update UI
         * from background thread, otherwise you will get error
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    Toast.makeText(getApplicationContext(),"Status tweeted successfully", Toast.LENGTH_SHORT).show();
                    // Clearing EditText field
                    txtUpdate.setText("");
                }
            });

        }

    }//update.

private void logoutFromTwitter() {
        // Clear the shared preferences
        Editor e = mSharedPreferences.edit();
        e.remove(PREF_KEY_OAUTH_TOKEN);
        e.remove(PREF_KEY_OAUTH_SECRET);
        e.remove(PREF_KEY_TWITTER_LOGIN);
        e.commit();

        // After this take the appropriate action
        // I am showing the hiding/showing buttons again
        // You might not needed this code
        btnLogoutTwitter.setVisibility(View.GONE);
        btnUpdateStatus.setVisibility(View.GONE);
        txtUpdate.setVisibility(View.GONE);
        lblUpdate.setVisibility(View.GONE);
        lblUserName.setText("");
        lblUserName.setVisibility(View.GONE);
        btnLoginFaceBook.setVisibility(View.VISIBLE);
        btnLoginTwitter.setVisibility(View.VISIBLE);
    }

private boolean isTwitterLoggedInAlready() {
        // return twitter login status from Shared Preferences
        return mSharedPreferences.getBoolean(PREF_KEY_TWITTER_LOGIN, false);
    }

    protected void onResume() {
        super.onResume();
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) 
     {
        if ((keyCode == KeyEvent.KEYCODE_BACK))
        {
            //Log.e("this is","default back button..............");
            Intent intent = new Intent(Intent.ACTION_MAIN);
               intent.addCategory(Intent.CATEGORY_HOME);
               intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
               startActivity(intent);

        }
        return false;
     } 
```

这是我的代码。请帮助我在哪里做错了，这是我的 xml 代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
  android:orientation="vertical"
>

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    >
    <Button
        android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/back"
    android:layout_alignParentLeft="true"
    android:text="back"
        />

    </RelativeLayout>
<LinearLayout
     android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"

    >

 <Button android:id="@+id/btnLoginFaceBook"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Login with facebook"
    android:layout_marginLeft="10dip"
    android:layout_marginRight="10dip"
    android:layout_marginTop="30dip"/>

<!-- Twitter Login Button -->
<Button android:id="@+id/btnLoginTwitter"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Login with Twitter"
    android:layout_marginLeft="10dip"
    android:layout_marginRight="10dip"
    android:layout_marginTop="30dip"/>

<!-- user name label -->
<TextView android:id="@+id/lblUserName"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="10dip"
    android:layout_marginTop="30dip"/>

<!-- label update status -->
<TextView android:id="@+id/lblUpdate" 
    android:text="Update Status"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dip"
    android:layout_marginRight="10dip"
    android:visibility="gone"/>

 <!-- Tweet EditText -->
 <EditText android:id="@+id/txtUpdateStatus"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="10dip"
    android:visibility="gone"/>

<!-- Tweet Button -->
<Button android:id="@+id/btnUpdateStatus"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Tweet"
    android:layout_marginLeft="10dip"
    android:layout_marginRight="10dip"
    android:visibility="gone"/>

 <!-- Twitter Logout button -->
 <Button android:id="@+id/btnLogoutTwitter"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Logout from Twitter"
    android:layout_marginLeft="10dip"
    android:layout_marginRight="10dip"
    android:layout_marginTop="50dip"
    android:visibility="gone"/>
</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:54:54.133

使用此代码。这是我的应用程序的生产代码。我从我的文件中`Strings` **`TWITTER_CONSUMER_KEY`**获取2 个值。虽然和的值是从我的文件中提取的。用您自己的存储方法替换这些位。**`TWITTER_CONSUMER_SECRET`**`strings.xml``Strings` **`twit_access_token`****`twit_access_token_secret`**`SharedPreferences`

```
try {
    ConfigurationBuilder builder = new ConfigurationBuilder();

    // GET THE CONSUMER KEY AND SECRET KEY FROM THE STRINGS XML
    String TWITTER_CONSUMER_KEY = getActivity().getString(R.string.TWITTER_CONSUMER_KEY);
    String TWITTER_CONSUMER_SECRET = getActivity().getString(R.string.TWITTER_CONSUMER_SECRET);

    // TWITTER ACCESS TOKEN
    String twit_access_token = twitPrefs.getString(PREF_KEY_OAUTH_TOKEN, null);

    // TWITTER ACCESS TOKEN SECRET
    String twit_access_token_secret = twitPrefs.getString(PREF_KEY_OAUTH_SECRET, null);

    builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
    builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);
    builder.setOAuthAccessToken(twit_access_token);
    builder.setOAuthAccessTokenSecret(twit_access_token_secret);
    builder.setJSONStoreEnabled(true);
    builder.setIncludeEntitiesEnabled(true);
    builder.setIncludeMyRetweetEnabled(true);
    builder.setIncludeRTsEnabled(true);

    AccessToken accessToken = new AccessToken(twit_access_token, twit_access_token_secret);
    Twitter twitter = new TwitterFactory(builder.build()).getInstance(accessToken);

    Paging paging = new Paging(200); // MAX 200 IN ONE CALL. SET YOUR OWN NUMBER <= 200
    statuses = twitter.getHomeTimeline(paging);

    try {
        String strInitialDataSet = DataObjectFactory.getRawJSON(statuses);
        JSONArray JATweets = new JSONArray(strInitialDataSet);

        for (int i = 0; i < JATweets.length(); i++) {
                JSONObject JOTweets = JATweets.getJSONObject(i);
                Log.e("TWEETS", JOTweets.toString());
        }

    } catch (Exception e) {
        // TODO: handle exception
    }
} catch (Exception e) {
    // TODO: handle exception
} 
```

**注 1：**`statuses`是`List<Status> statuses = new ArrayList<Status>();`我已声明并实例化为全局实例的一个实例。

**注意 2：**`builder.setJSONStoreEnabled(true);`如果您希望结果采用`JSON`格式，则此属性是必需的。如果你不需要它`JSON`，请告诉我。

**最后更新：**

在测试了 OP 的整个代码并调试了测试应用程序中的**所有内容**之后，罪魁祸首原来是一行（实际上是 2）：

```
Paging paging = new Paging(200); // MAX 200 IN ONE CALL. SET YOUR OWN NUMBER <= 200
statuses = twitter.getHomeTimeline(paging); 
```

事实证明，出于某种原因，Twitter API 不喜欢`Paging paging = new Paging(200);`. 将其更改为`Paging paging = new Paging(10);`奇怪的是，给了我 20 条推文。完全删除`Paging....`线，给了我**19**。真是奇怪的结果。但我目前最好的猜测是，该应用程序可能是 Twitter 开发人员网络上的新应用程序（在身份验证期间它仍然显示该应用程序无法访问*直接消息*）。

将该部分更改为：

```
// Paging paging = new Paging(10);
statuses = twitter.getHomeTimeline(); 
```

# python - 在函数中进一步更改字符串值

> ID：16167261
> 
> 赞同：1
> 
> 时间：2013-04-23T10:40:38.313
> 
> 标签：python

我有一个函数，它在开始时声明一个字符串：

```
def ran_network_listen(access_point_id, mode):
    current_uarfcn = "10650"
    ran_update_uarfcn = "upd ap" + " " + access_point_id + " " + "uarfcn=" + current_uarfcn 
    //etc 
```

稍后在函数中，在多个地方，我更改了`current_uarfcn`. 然后我传递`ran_update_uarfcn`给另一个函数。现在 `ran_update_uarfcn`包含为其设置的原始值。所以`10650`我永远是路过。

```
current_uarfcn = "11000"
proc_stdout = ran_cmd(ran_update_uarfcn) 
```

有没有什么方法可以更新原始字符串，而不必每次我想将它传递给我必须在下面这样的函数时定义它？

```
current_uarfcn = "11000"
ran_update_uarfcn = "upd ap" + " " + access_point_id + " " + "uarfcn=" + current_uarfcn
proc_stdout = ran_cmd(ran_update_uarfcn) 
```

当您必须多次执行此操作时，这很乏味。我希望原始字符串可以得到更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:44:50.903

无法自动更新字符串。

但是，您可以将字符串实现为以下函数`current_uarfcn`：

```
ran_update_uarfcn = lambda x: "upd ap " + access_point_id + " uarfcn=" + x 
```

并通过`ran_update_uarfcn(current_uarfcn)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:46:00.050

定义一个内部函数`set_current_uarfcn(value)`

```
current_uarfcn = ""
ran_update_uarfcn = ""

def ran_network_listen(access_point_id, mode):
  def set_current_uarfcn(value):
    global current_uarfcn
    global ran_update_uarfcn
    current_uarfcn = value
    ran_update_uarfcn = "upd ap" + " " + access_point_id + " " + "uarfcn=" + current_uarfcn 
  set_current_uarfcn("10650")
  //etc 
```

然后稍后在您的函数中，您可以编写：

```
set_current_uarfcn("11000")
proc_stdout = ran_cmd(ran_update_uarfcn) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T18:25:20.770

你的意思是字符串模板？

```
def ran_network_listen(access_point_id, mode):
    ran_update_uarfcn_tmpl = "upd ap {access_point_id} uarfcn={uarfcn}"
    ran_update_uarfcn = lambda uarfcn: ran_update_uarfcn_tmpl.format(access_point_id=access_point_id, uarfcn=uarfcn)

    current_uarfcn = "10650"
    print ran_update_uarfcn(current_uarfcn)
    current_uarfcn = "11000"
    proc_stdout = ran_cmd(ran_update_uarfcn(current_uarfcn)) 
```

或者也许你可以进一步重构它？

```
def uarfcn_str(method, access_point_id, uarfcn):
    return "{method} ap {apid} uarfcn={uarfcn}".format(
        method=method, apid=access_point_id, uarcfn=uarfcn)

def ran_cmd_update_uarcfn(apid, uarfcn):
    return ran_cmd(uarfcn_str('upd', apid, uarfcn))

def ran_network_listen(access_point_id, mode):
    ran_cmd_upd = lambda uarfcn: ran_cmd_update_uarcfn(access_point_id, uarfcn)
    current_uarfcn = "10650"
    proc_stdout = ran_cmd_upd(current_uarfcn)
    current_uarfcn = "10650"
    proc_stdout = ran_cmd_upd(current_uarfcn) 
```

# jquery - jquery中的表单提交

> ID：16167269
> 
> 赞同：0
> 
> 时间：2013-04-23T10:41:01.097
> 
> 标签：jquery, ajax

我想在表单保存/提交数据**后**创建 xml ，但它**在之前**

```
 <form action='/download' method='post'>

 <input type='submit' value='update' id='update'/>

 </form> 
```

现在这是我的 jquery

```
 $('#update').live("click", function() {
alert('called');
   $.post( 'myxml.php', {username:$('#username').val() },
     function( data ) {
     alert(data);
     }); 
}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-30T07:58:40.900

这对于您当前的 HTML 代码是不可能的。一旦表单提交，页面将被重定向，有效地杀死所有其他正在运行的 javascript。

但是，有一些方法可以通过 jQuery 提交表单而无需刷新页面。我建议你按照[这个](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)教程。

或者这样做：

```
 $('#update').on("click", function() {
alert('called');
   $.post( 'myxml.php', {username:$('#username').val() },
     function( data ) {
     alert(data);
     $('form[action="/download"]').submit()
     }); 
     return false; //prevent bubble
}); 
```

# tcp - 连接超时或被拒绝时是否解释了 tcp/ip 协议？

> ID：16167270
> 
> 赞同：1
> 
> 时间：2013-04-23T10:41:13.307
> 
> 标签：tcp, connection, timeout, protocols

当一个 tcp 客户端连接到一个 tcp 服务器时，同时服务器端的监听端口还没有建立。这个时候tcp客户端会报connection denied异常或者connection time out异常吗？

起初我认为 tcp/ip 会报告连接拒绝异常，因为服务器可以检查 LISTEN 端口（由客户端连接）是否存在。但实际上是连接超时。

我想知道 tcp/ip 协议是否解释了这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:46:17.190

> 这个时候tcp客户端会报connection denied异常或者connection time out异常吗？

如果客户端收到主动拒绝，即 TCP RST 段，这将在客户端显示为`ECONN.`否则您会收到连接超时。请注意，这也可能包括中间防火墙阻止连接的情况，因为如果防火墙规则阻止连接到该端口，不泄露主机甚至存在的信息通常被认为更安全。

# c# - C# - 来自图像的自定义界面

> ID：16167276
> 
> 赞同：0
> 
> 时间：2013-04-23T10:41:36.390
> 
> 标签：c#, winforms, interface, custom-controls, skin

我正在用 C# 创建一个 WinForm 程序，我想使用 PNG 或其他图像文件自定义它的皮肤或界面。我不仅关心按钮，还关心它的背景、进度条和其他一些控件。我从我的大部分研究中意识到，TransparentKey 用于不规则形状，然后面板支持 PNG 透明度。

**我的问题：**我想知道是否有更好的方法，实际和推荐的方法来为我的程序实现自定义接口。

我当前的代码使用 BackgroundImage 属性来替换图像。然而，我确实相信这不是我应该实施的方式。

这是我当前的代码：

```
public List<Image> BaseImage = new List<Image>();
public List<Image> ClickedImage = new List<Image>();
public List<object> ControlAction = new List<object>();
public List<Image> HoverImage = new List<Image>();
private int counter = 0;

public Control CreatePanel(Image BaseImage, Image HoverImage, Image ClickedImage,
    string Name, int x, int y, ButtonAction action)
{
                this.BaseImage.Add(BaseImage);
                this.HoverImage.Add(HoverImage);
                this.ClickedImage.Add(ClickedImage);
                int width = BaseImage.Width;
                int height = BaseImage.Height;

                Actions Action = new Actions();
                EventHandler SelectedAction = null;

                switch (action)
                {
                    case ButtonAction.Cancel:
                        SelectedAction = Action.Cancel;
                        break;

                    case ButtonAction.Exit:
                        SelectedAction = Action.Exit;
                        break;

                    case ButtonAction.Minimize:
                        SelectedAction = Action.Minimize;
                        break;

                    case ButtonAction.Open:
                        SelectedAction = Action.Open;
                        break;

                    case ButtonAction.Pause:
                        SelectedAction = Action.Pause;
                        break;

                    case ButtonAction.Start:
                        SelectedAction = Action.Start;
                        break;
                }

                Simplify.Invoke(() =>
                {
                    this.newPanel.SuspendLayout();

                this.newPanel.Location = new System.Drawing.Point(x, y);
                this.newPanel.Name = Name;
                this.newPanel.TabIndex = counter;
                this.newPanel.Size = new System.Drawing.Size(width, height);
                this.newPanel.BackColor = Color.FromArgb(0, 255, 255, 255);
                this.newPanel.BackgroundImage = this.BaseImage[counter];

                this.newPanel.Click += new EventHandler(SelectedAction);
                this.newPanel.MouseEnter += new EventHandler(PanelHover);
                this.newPanel.MouseDown += new MouseEventHandler(PanelClicked);
                this.newPanel.MouseLeave += new EventHandler(PanelLeave);

                this.newPanel.ResumeLayout(false);
                    });

                ControlAction.Add(action);
                counter += 1;

    return newPanel;
}

private void PanelClicked(object sender, MouseEventArgs e)
{
                this.newPanel.SuspendLayout();
                this.newPanel.BackColor = Color.FromArgb(0, 255, 255, 255);
                this.newPanel.BackgroundImage = ClickedImage[newPanel.TabIndex];
                this.newPanel.Size = new Size(ClickedImage[newPanel.TabIndex].Width, ClickedImage[newPanel.TabIndex].Height);
                this.newPanel.ResumeLayout(false);
}

private void PanelHover(object sender, EventArgs e)
{
                    this.newPanel.SuspendLayout();
                    this.newPanel.BackColor = Color.FromArgb(0, 255, 255, 255);
                    this.newPanel.BackgroundImage = HoverImage[newPanel.TabIndex];
                    this.newPanel.Size = new Size(HoverImage[newPanel.TabIndex].Width, HoverImage[newPanel.TabIndex].Height);
                    this.newPanel.ResumeLayout(false);
}

private void PanelLeave(object sender, EventArgs e)
{
                    this.newPanel.SuspendLayout();
                    this.newPanel.BackColor = Color.FromArgb(0, 255, 255, 255);
                    this.newPanel.BackgroundImage = BaseImage[newPanel.TabIndex];
                    this.newPanel.Size = new Size(BaseImage[newPanel.TabIndex].Width, BaseImage[newPanel.TabIndex].Height);
                    this.newPanel.ResumeLayout(false);
} 
```

我上面的代码创建了一个用作按钮的面板。它的动作取自一个名为*Actions*的类，它基本上只是在用户单击它时分配要分配的方法。我通过替换 BackgroundImage 来更改控件状态，同时更改其大小以避免裁剪区域。

提前致谢。

**附加信息** - 我正在使用 .NET Framework 2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:04:22.007

> 我的问题：我想知道是否有更好的方法，实际和推荐的方法来为我的程序实现自定义接口。

我建议使用 WPF（Windows 演示基础）。它提供高度可定制的控件，还支持硬件加速图形。

使用 winforms，您将获得闪烁的屏幕、调整大小和重绘的问题，而 wpf 则不会遇到这些问题。

# spring - Spring事务不回滚

> ID：16167278
> 
> 赞同：6
> 
> 时间：2013-04-23T10:41:42.303
> 
> 标签：spring, spring-transactions

我们有一个 Spring Transaction 回滚问题，其中回滚似乎不起作用。
在我的服务层方法中，`@Transactional`我调用了三个不同的`DAOImpl`类来插入 3 条记录。
中间插入从第四个表中获取以填充描述字段，但这失败了。我希望第一个插入回滚，但它似乎没有发生。
**几点：**

1.  'Get' 方法引发运行时异常

2.  我们使用`org.springframework.jdbc.datasource.DataSourceTransactionManager`并`MySQL datasource`定义在`applicationContext.xml`. Beans被创建在`Beans.xml`其中被导入`ApplicationContext.xml`

3.  图层中没有`@Transactional`注释`DAO`

4.  我们`<tx:annotation-driven transaction-manager="transactionManager"/>`在`applicationContext.xml`
5.  我们正在使用 Spring 3.1

**更新**：

代码片段....

服务类- 这与我所拥有的类似......我在有和没有@Autowired 的情况下进行了测试。在服务类中调用事务启用方法。

```
公共类客户服务{

    //@自动连线
    CustomerOrderDAO customerOrderDAOImpl;
    //@自动连线
    CustomerItemDAO customerItemDAOImpl;
    //@自动连线
    CustomerPromotionDAO customerPromotionDAOImpl;
    //@自动连线
    推广DAO 推广DAOImpl;

    //其他变量

    公共客户订单handleIncomingOrders（客户订单客户订单）{
        尝试 {
            saveOrderDetails(customerOrder);
            ......
            返回客户订单；
        } catch (Exception e) //TO-DO 捕获正确的异常
        {
            //发送错误响应
            …………
            返回客户订单；
        }
    }

    @Transactional
    公共无效 saveOrderDetails(CustomerOrder customerOrder) 抛出异常 {
            customerOrderDAOImpl.create(customerOrder);
            ……
            while (promotionsIterator.hasNext()) {
                customerPromotion.setPromotionName(promotionDAOImpl.getName(customerOrder.getPromotionId));
                customerPromotionDAOImpl.create(customerPromotion);
            }
            ……
            while (customerItemIterator.hasNext()) {
                customerItemDAOImpl.create(customerItem);
            }

    }
}

```

任何的想法？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T05:51:07.823

的默认行为`@Transactional`是在对象周围添加了事务行为（`CustomerService`在您的示例中）。从[参考文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/transaction.html#transaction-declarative-annotations)（向下滚动）：

> 在代理模式下（默认），只有通过代理传入的外部方法调用会被拦截。这意味着自调用，实际上是目标对象中的一个方法调用目标对象的另一个方法，在运行时不会导致实际的事务，即使调用的方法被标记为@Transactional。

在您的示例中，对 的外部调用`handlingIncomingOrders()`通过代理并命中目标对象（ 的实例`CustomerService`）。但是，后续调用`saveOrderDetails()`是目标对象内部的普通方法调用，因此永远不会调用代理中的事务行为。但是，如果`saveOrderDetails()`从另一个类调用 ，您会发现事务行为将按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T10:50:04.950

在您的情况下，解决方案将调用`saveOrderDetails(customerOrder);` 为调用`proxyBean.saveOrderDetails(customerOrder);`handleIncomingOrders`proxybean is the Object on which`的位置。

如果`CustomerService` 是`singleton`（默认范围），它可以像将以下代码添加到服务类一样简单。（将自引用添加为自动装配）

```
//@Autowired
CustomerService customerService; // As this is injected its a proxy 
```

并在方法中将其用作

```
 public CustomerOrder handleIncomingOrders(CustomerOrder customerOrder) {
    try {
        customerService.saveOrderDetails(customerOrder);
        .....
        return customerOrder;
    } catch (Exception e) //TO-DO catch proper exception 
    {
        //Send error response
        .......
        return customerOrder;
    }
  } 
```

如果其范围是 `Prototype`可能的简单解决方案之一，将如下所示。

```
public CustomerOrder handleIncomingOrders(CustomerOrder customerOrder, CustomerService customerService) {
    try {
        customerService.saveOrderDetails(customerOrder);
        .....
        return customerOrder;
    } catch (Exception e) //TO-DO catch proper exception 
    {
        //Send error response
        .......
        return customerOrder;
    }
  } 
```

并且您`handleIncomingOrders`在下面的代码中建议使用更改。

```
 bean.handleIncomingOrders(customerOrder); //Suppose this is old code 
Change it to 
    bean.handleIncomingOrders(customerOrder, bean);// THough it appears as we are sending reference to `THIS` as parameter whcihc can be unnecessary, in case of `Proxy`while inside your method `this` and `Passed reference` will point to different Obejects. 
```

# java - 为什么 THREAD-1 和 THREAD-2 不交错？

> ID：16167287
> 
> 赞同：2
> 
> 时间：2013-04-23T10:42:04.283
> 
> 标签：java, multithreading

```
 public class Mutex {

private int val;
public Mutex(int val) {

    this.val=val;
}

public int getVal() {
    return val;
}

public void printVal()
{
    int i=0;
    while (true)
    {

        System.out.println(Thread.currentThread().getName()+" "+this.getVal());
        if(i==50)
            break;
        else
            i++;
    }
}

public static void main(String args[])
{
    final Mutex m1=new Mutex(1);
    final Mutex m2 = new Mutex(2);
    new Thread(new Runnable()
    {
        @Override
        public void run() {

            m1.printVal();

        }
    },"THREAD-1").start();
    new Thread(new Runnable()
    {
        @Override
        public void run() {

            m2.printVal();

        }
    },"THREAD-2").start();
}

    } 
```

当“val”的类型为“int”时，THREAD-1 和 THREAD-2 不会交错，而如果我将其类型更改为 double，则线程会交错。我了解原语是线程安全的（long 和 double 除外）。考虑到上述代码示例，这究竟是如何工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T10:50:30.697

尝试将50增加到1000000，**也许**他们会？
线程 1 在其时隙结束之前执行完毕，因此没有上下文切换。

或者，...，如果您`Thread.sleep`每次都添加一个迭代，您可能会发现它们确实是交错的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:57:15.393

线程被设计为尽可能独立运行。如果您想交错调用，您将使用一个循环调用每个线程。

你应该假设你的线程可以在任何时候启动和停止，除非你控制它们。出于性能原因，通常最好只在它们上放置最少的控件，否则您最终可能会得到一个更复杂、更慢而不是更快的解决方案，这通常是使用线程的重点。

# function - F#如何从函数访问成员

> ID：16167288
> 
> 赞同：4
> 
> 时间：2013-04-23T10:42:07.617
> 
> 标签：function, f#, member

我对 F# 很陌生，所以我不太确定我做错了什么，这就是我想要做的：

```
type MyClass() =
    let someVar = this.MyMember()

    member this.MyMember() :unit = 
        // insert some code here 
```

我不能这样做，因为 Visual Studio 告诉我“this”没有定义，我该怎么办？我错过了 F# 的一些明显特征吗？

我尝试让我的所有成员函数改为......但是我必须重新排序所有函数，以便它们变得可见，然后它仍然无法工作

那怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T10:44:48.027

您需要插入一个自我标识符。由于某些性能原因，默认情况下不这样做。

以下作品：

```
type MyClass() as this =
    let someVar = this.MyMember()

    member this.MyMember() :unit = () 
```

# c# - C# 反向 UrlPathEncode

> ID：16167289
> 
> 赞同：3
> 
> 时间：2013-04-23T10:42:08.267
> 
> 标签：c#, url

我有这个：

> 文件：//localhost/Volumes/Untitled%20RAID%20Set%201/Callum/iTunes/Music/Steppenwolf/Steppenwolf_%20Gold/1-09%20Magic%20Carpet%20Ride.mp3

它是 Mac 上的一个位置，其路径已被编码以在 XML 文件中使用。

要创建此路径，您可以使用 UrlPathEncode。

但是现在，我想把它放回它的正常可读路径，即减去 %20 和其他被替换的字符，如锐角“e”等等等。将“/”轻松更改为“\”

如果不编写自己的“反向器”，你怎么能做到这一点？

如果归根结底，我会的，但我宁愿不这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:44:39.387

`Encode`当然，您需要使用相反的`Decode`.. [HttpUtility.UrlDecode](http://msdn.microsoft.com/en-us/library/system.web.httputility.urldecode.aspx)：

```
HttpUtility.UrlDecode("file://localhost/Volumes/Untitled%20RAID%20Set%201/Callum/iTunes/Music/Steppenwolf/Steppenwolf_%20Gold/1-09%20Magic%20Carpet%20Ride.mp3"); 
```

哪个会返回：

```
file://localhost/Volumes/Untitled RAID Set 1/Callum/iTunes/Music/Steppenwolf/Steppenwolf_ Gold/1-09 Magic Carpet Ride.mp3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T10:46:20.873

尝试：[`Uri.UnescapeDataString`](http://msdn.microsoft.com/en-us/library/system.uri.unescapedatastring.aspx)

```
Uri.UnescapeDataString("file://localhost/Volumes/Untitled%20RAID%20Set%201/Callum/iTunes/Music/Steppenwolf/Steppenwolf_%20Gold/1-09%20Magic%20Carpet%20Ride.mp3"); 
```

输出：

```
file://localhost/Volumes/Untitled RAID Set 1/Callum/iTunes/Music/Steppenwolf/Steppenwolf_ Gold/1-09 Magic Carpet Ride.mp3 
```

如果您无权访问`HttpUtility`（例如使用`.NET Framework Client Profile`） ，可能会有所帮助

# ios - 在mapview iOS 6中绘制折线

> ID：16167294
> 
> 赞同：1
> 
> 时间：2013-04-23T10:42:30.087
> 
> 标签：ios, objective-c, mapkit, mkannotation, mkpolyline

嗨，我正在做一个必须显示路线地图的应用程序。我解析了一个 Json 以获得绘制折线的点。我在网上找到了一个代码来绘制这条折线。我在此链接上找到的代码：http: [//iosguy.com/2012/05/22/tracing-routes-with-mapkit/](http://iosguy.com/2012/05/22/tracing-routes-with-mapkit/)

在它说“创建 MKPolyline 注释”的地方，我试图在我的应用程序中导入它，但是我在创建坐标数组时遇到了问题。我的方法是这样的：

```
- (void)createMKpolylineAnnotation {
NSInteger numberOfSteps = self.path.count;

CLLocationCoordinate2D *coords = malloc(sizeof(CLLocationCoordinate2D) * numberOfSteps);
for (NSInteger index = 0; index < numberOfSteps; index++) {
    CLLocation *location = [self.path objectAtIndex:index];
    CLLocationCoordinate2D coordinate = location.coordinate;
    coords[index] = coordinate;
}

MKPolyline *polyLine = [MKPolyline polylineWithCoordinates:coords count:numberOfSteps];
[self.mapView addOverlay:polyLine];
} 
```

当我尝试查看 coords 的值仅是第一次设置时，这是为什么呢？你能帮我解决这个问题还是我应该用另一种模式？

我在这里发布处理地图视图的视图控制器的代码。

**MapViewController.h**

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface MapViewController : UIViewController <MKMapViewDelegate>
@property (weak, nonatomic) IBOutlet MKMapView *mapView;

@property (nonatomic, strong) NSString *fromCity;
@property (nonatomic, strong) NSString *toCity;

- (IBAction)chooseKindOfMap:(id)sender;
@end 
```

**MapViewController.m**

```
#import "MapViewController.h"
#import "AppDelegate.h"
#import "PlaceAnnotation.h"

@interface MapViewController ()

@property (nonatomic, strong)NSMutableArray *mapAnnotation;
@property (nonatomic) BOOL needUpdateRegion;
@property (nonatomic, strong)NSMutableArray *path;

@end

@implementation MapViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self parseGoogleJsonToObtainPointsForPolyline];
    [self.mapView setDelegate:self];
    self.needUpdateRegion = YES;
    //[self centerMap];
    self.mapAnnotation = [[NSMutableArray alloc]initWithCapacity:2];
    AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication]delegate];
    NSLog(@"%d", appDelegate.dataForMap.count);
    NSArray* coords = [self getCoords:appDelegate.dataForMap];
    NSLog(@"coords = %@", coords);
    PlaceAnnotation *fromPlace = [[PlaceAnnotation alloc] initWithCoordinateAndName:coords[0] andLong:coords[1] andName:self.fromCity];
    PlaceAnnotation *toPlace = [[PlaceAnnotation alloc] initWithCoordinateAndName:coords[2] andLong:coords[3] andName:self.toCity];

    [self.mapAnnotation insertObject:fromPlace atIndex:0];
    [self.mapAnnotation insertObject:toPlace atIndex:1];
    NSLog(@"mapAnnotation.count: %d", self.mapAnnotation.count);

    if (self.mapAnnotation) {
        [self.mapView removeAnnotations:self.mapView.annotations];
    }

    [self.mapView addAnnotation:self.mapAnnotation[0]];
    [self.mapView addAnnotation:self.mapAnnotation[1]];
    NSLog(@"MapAnnotation = %@", self.mapView.annotations);
    [self updateRegion];
    [self createMKpolylineAnnotation];
}

//- (void)viewDidAppear:(BOOL)animated {
//    [super viewDidAppear:animated];
//    if (self.needUpdateRegion) [self updateRegion];
//}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (MKAnnotationView*)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation {
    MKPinAnnotationView *pin = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:nil];
    pin.pinColor = MKPinAnnotationColorRed;
    return pin;
}

- (void)mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views {
    MKPinAnnotationView *ulv = [mapView viewForAnnotation:mapView.userLocation];
    ulv.hidden = YES;
}

- (NSArray*)getCoords:(NSDictionary*)data {
    NSArray *legs = [data objectForKey:@"legs"];
    NSDictionary *firstZero = [legs objectAtIndex:0];
    NSDictionary *endLocation = [firstZero objectForKey:@"end_location"];
    NSDictionary *startLocation = [firstZero objectForKey:@"start_location"];
    NSString *latFrom = [startLocation objectForKey:@"lat"];
    NSString *lngFrom = [startLocation objectForKey:@"lng"];
    NSString *latTo = [endLocation objectForKey:@"lat"];
    NSString *lngTo = [endLocation objectForKey:@"lng"];
    return @[latFrom,lngFrom,latTo,lngTo];
}

- (void)centerMap {
    MKCoordinateRegion region;
    region.center.latitude = 41.178654;
    region.center.longitude = 11.843262;
    region.span.latitudeDelta = 11.070406;
    region.span.longitudeDelta = 12.744629;

    [self.mapView setRegion:region];
}

- (IBAction)chooseKindOfMap:(id)sender {
    if ([sender tag] == 0) {
        self.mapView.mapType = MKMapTypeStandard;
    }
    if ([sender tag] == 1) {
        self.mapView.mapType = MKMapTypeSatellite;
    }
    if ([sender tag] == 2) {
        self.mapView.mapType = MKMapTypeHybrid;
    }
}

- (void)updateRegion
{
    self.needUpdateRegion = NO;
    CGRect boundingRect;
    BOOL started = NO;
    for (id <MKAnnotation> annotation in self.mapView.annotations) {
        CGRect annotationRect = CGRectMake(annotation.coordinate.latitude, annotation.coordinate.longitude, 0, 0);
        if (!started) {
            started = YES;
            boundingRect = annotationRect;
        } else {
            boundingRect = CGRectUnion(boundingRect, annotationRect);
        }
    }
    if (started) {
        boundingRect = CGRectInset(boundingRect, -0.2, -0.2);
        if ((boundingRect.size.width < 20) && (boundingRect.size.height < 20)) {
            MKCoordinateRegion region;
            region.center.latitude = boundingRect.origin.x + boundingRect.size.width / 2;
            region.center.longitude = boundingRect.origin.y + boundingRect.size.height / 2;
            region.span.latitudeDelta = boundingRect.size.width;
            region.span.longitudeDelta = boundingRect.size.height;
            [self.mapView setRegion:region animated:YES];
        }
    }
}

- (void)parseGoogleJsonToObtainPointsForPolyline {
    NSDictionary *polyline;
    NSMutableArray *points = [[NSMutableArray alloc]init];;

    AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication]delegate];
    NSArray *legs = [appDelegate.dataForMap objectForKey:@"legs"];
    NSDictionary *firstZero =[legs objectAtIndex:0];
    NSArray *steps = [firstZero objectForKey:@"steps"];
    for (int i = 0; i < steps.count; i++) {
        polyline = [steps[i] objectForKey:@"polyline"];
        [points addObject:polyline[@"points"]];
        NSLog(@"POINTS = %@", polyline[@"points"]);
        self.path = [self decodePolyLine:points[i]];
    }
    NSLog(@"path = %@", self.path);
}

-(NSMutableArray *)decodePolyLine:(NSString *)encodedStr {
    NSMutableString *encoded = [[NSMutableString alloc] initWithCapacity:[encodedStr length]];
    [encoded appendString:encodedStr];
    [encoded replaceOccurrencesOfString:@"\\\\" withString:@"\\"
                                options:NSLiteralSearch
                                  range:NSMakeRange(0, [encoded length])];
    NSInteger len = [encoded length];
    NSInteger index = 0;
    NSMutableArray *array = [[NSMutableArray alloc] init];
    NSInteger lat=0;
    NSInteger lng=0;
    while (index < len) {
        NSInteger b;
        NSInteger shift = 0;
        NSInteger result = 0;
        do {
            b = [encoded characterAtIndex:index++] - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        NSInteger dlat = ((result & 1) ? ~(result >> 1) : (result >> 1));
        lat += dlat;
        shift = 0;
        result = 0;
        do {
            b = [encoded characterAtIndex:index++] - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        NSInteger dlng = ((result & 1) ? ~(result >> 1) : (result >> 1));
        lng += dlng;
        NSNumber *latitude = [[NSNumber alloc] initWithFloat:lat * 1e-5];
        NSNumber *longitude = [[NSNumber alloc] initWithFloat:lng * 1e-5];

        CLLocation *location = [[CLLocation alloc] initWithLatitude:[latitude floatValue] longitude:[longitude floatValue]];
        [array addObject:location];
    }

    return array;
}

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay {
    MKPolylineView *polylineView = [[MKPolylineView alloc] initWithPolyline:overlay];
    polylineView.strokeColor = [UIColor redColor];
    polylineView.lineWidth = 1.0;

    return polylineView;
}

- (void)createMKpolylineAnnotation {
    NSInteger numberOfSteps = self.path.count;

    CLLocationCoordinate2D *coords = malloc(sizeof(CLLocationCoordinate2D) * numberOfSteps);
    for (NSInteger index = 0; index < numberOfSteps; index++) {
        CLLocation *location = [self.path objectAtIndex:index];
        CLLocationCoordinate2D coordinate = location.coordinate;
        coords[index] = coordinate;
    }

    MKPolyline *polyLine = [MKPolyline polylineWithCoordinates:coords count:numberOfSteps];
    [self.mapView addOverlay:polyLine];
}
@end 
```

我使用 AppDelegate 拥有 Json（我在另一个类中解析它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:16:37.593

[这](http://spitzkoff.com/craig/?p=136)是一个如何将折线添加到 mapView 的教程。希望这可以帮助！

**编辑：**

不幸的是，上面提供的链接现在已损坏，我无法找到所引用的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-06T13:31:51.190

简单，只需复制粘贴我的代码并修改一些变量

```
- (IBAction)traceRoute:(UIButton *)sender {
 double latDouble = 39.7540615;
    double lngDouble = -8.8059587;

//    double latDouble = [self.sheetDetail.data.locationLat doubleValue];
//    double lngDouble = [self.sheetDetail.data.locationLng doubleValue];

    CLLocationCoordinate2D c2D = CLLocationCoordinate2DMake(latDouble, lngDouble);

    MKPlacemark *placemark = [[MKPlacemark alloc] initWithCoordinate:c2D addressDictionary:nil];
    MKMapItem *mapItem = [[MKMapItem alloc] initWithPlacemark:placemark];
    [mapItem setName:@"Mobile Edge"];

    MKPlacemark *placemark2;
    MKMapItem *mapItem2;
    if(kIS_OS_8_OR_LATER) {
        placemark2 = [[MKPlacemark alloc] initWithCoordinate:_userLoc addressDictionary:nil];
        mapItem2 = [[MKMapItem alloc] initWithPlacemark:placemark2];
        [mapItem2 setName:@"Me"];
    } else {
        placemark2 = [[MKPlacemark alloc] initWithCoordinate:_mapView.userLocation.coordinate addressDictionary:nil];
        mapItem2 = [[MKMapItem alloc] initWithPlacemark:placemark2];
        [mapItem2 setName:@"Me"];
    }

    MKDirectionsRequest *request = [[MKDirectionsRequest alloc] init];
    request.source = mapItem2;
    request.destination = mapItem;
    request.requestsAlternateRoutes = NO;
    MKDirections *directions = [[MKDirections alloc] initWithRequest:request];

    [directions calculateDirectionsWithCompletionHandler:
     ^(MKDirectionsResponse *response, NSError *error) {
         if (error) {
             // Handle error
             [[NSNotificationCenter defaultCenter] postNotificationName:@"finishedLocationRoute" object:nil];

             UIAlertView *alert = [[UIAlertView alloc] initWithTitle: NSLocalizedString(@"Route error title", nil)
                                                             message: NSLocalizedString(@"Route error", nil)
                                                            delegate:self
                                                   cancelButtonTitle:@"OK"
                                                   otherButtonTitles:nil];
             [alert show];

         } else {
             for (MKRoute *route in response.routes)
             {

                 //MKMapPoint middlePoint = route.polyline.points[route.polyline.pointCount/2];
                 //[self createAndAddAnnotationForCoordinate:MKCoordinateForMapPoint(middlePoint) andRoute:route];
                 [self.mapView addOverlay:route.polyline level:MKOverlayLevelAboveRoads];
             }

             //notifies parent menu
             //[[NSNotificationCenter defaultCenter] postNotificationName:@"finishedLocationRoute" object:nil];

         }
     }];
}

- (MKOverlayRenderer *)mapView:(MKMapView *)mapView rendererForOverlay:(id)overlay
{

    if (![overlay isKindOfClass:[MKPolygon class]]) {

        MKPolyline *route = overlay;
        MKPolylineRenderer *renderer = [[MKPolylineRenderer alloc] initWithPolyline:route];
        renderer.strokeColor = [UIColor blueColor];
        renderer.lineWidth = 5.0;
        return renderer;

    } else {

        return nil;
    }

} 
```

# c# - 表单提交后，MVC 从视图中返回填充模型

> ID：16167302
> 
> 赞同：3
> 
> 时间：2013-04-23T10:42:45.473
> 
> 标签：c#, asp.net-mvc, razor

我的模型：

```
 public class SendFileDeviceViewModel
  {
    public SendFileDeviceViewModel()
    {
      PolicyList = new List<SendFileDevicePoliciesViewModel>();
    }
    public string DeviceName { get; set; }
    public int DeviceId { get; set; }
    public string ManagementGroupName { get; set; }
    public int ManagementGroupId { get; set; }
    public bool ReloadConfiguration { get; set; }
    public bool ImmediateSend { get; set; }
    public DateTime TimeToSend { get; set; }
    public List<SendFileDevicePoliciesViewModel> PolicyList { get; set; }
  }
  public class SendFileDevicePoliciesViewModel
  {
    public int PackageTemplateId { get; set; }
    public string PolicyName { get; set; }
    public string PolicyType { get; set; }
    public string DefinedAt { get; set; }
    public bool ResendPolicy { get; set; }
  } 
```

我的观点：

```
<h2>Send files to a Device @Model.DeviceName</h2>
  <h3>Reload configuration settings</h3>
  @Html.CheckBoxFor(m => m.ReloadConfiguration) @Html.LabelFor(m => m.ReloadConfiguration)
  <h3>Select the policies to reload</h3>
  @using (Html.BeginForm())
  {

    @Html.HiddenFor(m => m.DeviceId)
    @Html.HiddenFor(m => m.ManagementGroupId)

    @Html.ValidationSummary(true)

    if (Model.PolicyList.Count() > 0)
    {
    <table>
      <caption>
        Policies available for this device</caption>
      <thead>
        <tr>
          <th scope="col">
            &nbsp;
          </th>
          <th scope="col">
            Policy Name
          </th>
          <th scope="col">
            Policy Type
          </th>
          <th scope="col">
            Defined At
          </th>
        </tr>
      </thead>
      <tbody>
        @foreach (var policies in Model.PolicyList)
        {
          <tr>
            @*<td>@Html.CheckBox("PackageTemplateId", new { value = policies.PackageTemplateId })</td>*@
            <td>@Html.CheckBoxFor(m => policies.ResendPolicy)</td>
            <td>@policies.PolicyName</td>
            <td>@policies.PolicyType</td>
            <td>@policies.DefinedAt</td>
          </tr>
        }
      </tbody>
    </table>
    }

    <div class="editor-label">
      @Html.LabelFor(m => m.ImmediateSend)
    </div>
    <div class="editor-field">
      @Html.CheckBoxFor(m => m.ImmediateSend)
    </div>

    <div class="editor-label">
      @Html.LabelFor(m => m.TimeToSend)
    </div>
    <div class="editor-field">
      @Html.EditorFor(m => m.TimeToSend)
    </div>
    <p>
      <input type="submit" value="Send files" /></p> 
```

我的问题是从控制器检索模型时，PolicyList 始终为空。我在这里错过了一些简单的事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T10:51:47.210

两个问题：

您的第一个问题是您在构造函数中重置列表，因此当表单发布并且模型绑定器实例化模型的实例时，您正在重新设置列表。将其更改为合并以仅在列表为时重新分配`null`：

```
public SendFileDeviceViewModel()
{
    PolicyList = PolicyList ?? new List<SendFileDevicePoliciesViewModel>();
} 
```

您的下一个问题是您的`foreach`. 为了`name`正确索引属性（以便模型绑定器可以完成它的工作），您需要使用`for`循环。另外，将 ID 保存在`HiddenFor`.

试试这个代替你的`foreach`：

```
@for (int i = 0; i < Model.PolicyList.Count; i++)
{
    <tr>
        <td>
            @Html.HiddenFor(m => m.PolicyList[i].PackageTemplateId)
            @Html.CheckBoxFor(m => m.PolicyList[i].ResendPolicy)
        </td>
        <td>@Model.PolicyList[i].PolicyName</td>
        <td>@Model.PolicyList[i].PolicyType</td>
        <td>@Model.PolicyList[i].DefinedAt</td>
    </tr>
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T10:50:07.900

这样做的原因是你不尊重[`naming convention`](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)你的输入字段。您应该用循环或自定义编辑器模板替换`foreach`视图中的循环：`for`

```
<tbody>
    @for (var i = 0; i < Model.PolicyList.Count; i++)
    {
        <tr>
            <td>@Html.CheckBoxFor(x => x.PolicyList[i].ResendPolicy)</td>
            <td>@Html.DisplayFor(x => x.PolicyList[i].PolicyName)</td>
            <td>@Html.DisplayFor(x => x.PolicyList[i].PolicyType)</td>
            <td>@Html.DisplayFor(x => x.PolicyList[i].DefinedAt)</td>
        </tr>
    }
</tbody> 
```

现在也只有`ResendPolicy`属性将被绑定，因为这是唯一具有相应输入字段（在您的情况下为复选框）的属性。如果您还想绑定其他人，您可能需要包含相应的隐藏字段：

```
<tbody>
    @for (var i = 0; i < Model.PolicyList.Count; i++)
    {
        <tr>
            <td>
                @Html.HiddenFor(x => x.PolicyList[i].PackageTemplateId)
                @Html.CheckBoxFor(x => x.PolicyList[i].ResendPolicy)
            </td>
            <td>
                @Html.HiddenFor(x => x.PolicyList[i].PolicyName)
                @Html.DisplayFor(x => x.PolicyList[i].PolicyName)
            </td>
            <td>
                @Html.HiddenFor(x => x.PolicyList[i].PolicyType)
                @Html.DisplayFor(x => x.PolicyList[i].PolicyType)
            </td>
            <td>
                @Html.HiddenFor(x => x.PolicyList[i].DefinedAt)
                @Html.DisplayFor(x => x.PolicyList[i].DefinedAt)
            </td>
        </tr>
    }
</tbody> 
```

# visual-studio - 为什么我的应用程序需要 Visual C++ Redistributable 包

> ID：16167305
> 
> 赞同：48
> 
> 时间：2013-04-23T10:42:49.910
> 
> 标签：visual-studio, visual-c++, windows-runtime, msvcrt, redistributable

我正在`C++`Visual Studio 中编写一个简单的应用程序。它还有一个设置项目。它在我的开发机器上运行良好，但是当我在用户机器上安装这个应用程序时，它需要`Visual C++ Redistributable Package`. 我想知道为什么我的应用程序需要`C++ Redistributable`？标准`C++`运行时库随 Windows 一起提供，不是吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-04-23T10:42:49.910

微软随大多数 32 位 Windows 版本一起提供的 C 运行时库的**唯一**`msvcrt.dll`版本是. 该库提供了 C 和 C++ 程序所需的一组典型库函数。这些包括字符串操作、内存分配、C 风格的输入/输出调用等。

Visual Studio 6.0 的编译器链接到这个库，所以如果你在 VS 6.0 中开发，你应该不会在大多数用户的机器上遇到任何问题。

但是，如果您在 VS 2005、VS 2008、VS 2010、VS 2012、VS 2013 或 VS 2015 中进行开发，则必须随应用程序分发额外的 C 运行时库。这是因为他们的编译器分别链接到`msvcrt80.dll`, `msvcrt90.dll`, `msvcrt100.dll`, `msvcrt110.dll`,`msvcrt120.dll`和`msvcrt140.dll`，这些都没有随 Windows 一起提供。

### 解决方案：

1.  可能的解决方案是与运行时库静态链接，但如果您同时拥有这两者`.exe`并`.dll`在您的应用程序中，它可能会导致很多问题。**不要那样做**。

    更具体地说，我将允许自己引用[这个](https://stackoverflow.com/a/14752373/1544364)答案的一部分：

    > 如果您创建 DLL 和 EXE，则使用 /MT 是有风险的。您最终会在程序中获得多个 CRT 副本。这对于早期版本的 VS 尤其是一个问题，其中每个 CRT 都有自己的堆，而 VS2012 则不然。但是，例如，当您有多个“errno”变量时，您仍然会遇到难看的运行时问题。强烈建议使用 /MD 以避免此类损失。

2.  另一种可能的解决方案是要求在用户计算机上安装适当的 Microsoft Visual C++ Redistributable 软件包。

    可以通过在安装项目的先决条件属性中指定此要求来完成。

3.  此外，您可以`dll`通过在安装项目中包含适当的“[合并模块”来分发运行时](http://msdn.microsoft.com/en-us/library/ms235290%28v=VS.100%29.aspx)”来分发运行时。在这种情况下不要忘记添加适当的“策略合并模块”，以避免错误的运行时版本导致错误。

4.  最后，您可以将所需的 DLL 放在安装应用程序的同一文件夹中。

### 进一步阅读：

*   “[重新分发 Visual C++ 文件](http://msdn.microsoft.com/en-us/library/vstudio/ms235299.aspx)” - MSDN 官方文档

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-19T09:50:55.217

尽管有些评论说«与运行时库静态链接，但是当您的应用程序中同时包含 .exe 和 .dll 时，它可能会导致很多问题。» 这不是真的。首先，我们不静态链接 DLL！我们静态链接 OBJ 和 LIB。LIB 是静态库；DLL 是动态库，您可以选择使用 LIB（静态）或 DLL（动态）。这完全取决于您的选择。唯一的缺点（对于 DLL 爱好者）是如果你想更新一个库，你需要重新编译和链接。我个人部署了我所有的静态链接软件，因此我获得了甚至不需要安装程序的奖励。我开发的软件是 100% 可移植的（在预安装器时代是通用程序的功能），最终用户可以自由地从一个文件夹简单地复制到另一个文件夹，甚至从硬盘驱动器复制到闪存驱动器（反之亦然）。错误信息 «DLL not found.» 根本不存在……从不。

有些人认为静态链接是玩具软件：错了！我可以编写一个功能齐全的应用程序，连接到 DBMS（Oracle、SQL Server 等）或任何其他类型的应用程序。

# php - 使用过多的嵌套字符串引号发布参数

> ID：16167308
> 
> 赞同：1
> 
> 时间：2013-04-23T10:42:51.957
> 
> 标签：php, javascript, post

在我的 PHP 网站中，有一个使用此代码动态生成的表：

```
<tbody>

<?php
$db = new PDO('mysql:host=localhost;dbname=farm-o-pedia', 'root', '');                                                                      
$db->query("SET NAMES utf8");
query2="select crop_id,crop_name from crop_master order by crop_id";
$result=$db->query($query2)->fetchAll(PDO::FETCH_ASSOC);

foreach($result as $row)
{

 print('<tr onclick="window.location.href = \'editdata.php\';"><td>'.$row['crop_id'].'</td><td class="center">'.$row['crop_name'].'</td></tr>');
}

$db=null;
?> 
```

在这里，我想传递已单击行的crop_id。如何使用 window.location.href = \'editdata.php\' 附加 GET 或 POST 参数？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:45:39.387

尝试这个：

```
print('<tr onclick="window.location.href = \'editdata.php?id='.$row["crop_id"].'\';"><td>'.$row['crop_id'].'</td><td class="center">'.$row['crop_name'].'</td></tr>'); 
```

如果您添加到您的 href ?id=your_id 中，您可以在 GET 模式下检索到页面，如下所示：

```
$id = $_GET['id']; 
```

# java - 带有 glassfish 和 tomcat 的 Web 服务

> ID：16167309
> 
> 赞同：0
> 
> 时间：2013-04-23T10:42:52.337
> 
> 标签：java, web-services, tomcat, glassfish

我已经使用 NetBeans 7.2.1、Tomcat 6+ 和 MySQL 生成了一个 RestFul Web 服务，但是当我测试这个 Web 服务时，我得到了以下异常：

```
java.lang.RuntimeException: javax.naming.NameNotFoundException: Name persistence-factory is not bound in this Context 
```

当使用 glassfish 以相同的方式实现此 Web 服务时。

需要一些指导，完全迷失了，现在已经搜索了 3 天的修复程序'但无法解决它'一些指导将是 gud'

# iphone - 如何在 iphone 中以编程方式使用 fbrequest 在 facebook 朋友墙上发帖？

> ID：16167314
> 
> 赞同：0
> 
> 时间：2013-04-23T10:43:02.630
> 
> 标签：iphone, ios, facebook

我搜索了每一个地方，但没有得到一个提示如何做到这一点......我也得到了一些代码，但它不起作用......任何人都可以建议我任何教程或示例代码来做到这一点！在此先感谢我正在尝试以下代码::

```
-(void)inviteFriend:(CustomButton *)sender
{

    NSString *str=[NSString stringWithFormat:@"%@/feed",sender.inviteUserId];
    if (FBSession.activeSession.isOpen)
    {
        //UIImage *image = [UIImage imageNamed:@"testImage.png"];

        hudApp = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
        hudApp.labelText = @"Page Sharing...";
        [self performSelector:@selector(timeout:) withObject:nil afterDelay:60*5];

        // NSString *fbMessage = [NSString stringWithFormat:@"test"];
        NSString *fbMessage = @"hello testing";

        NSMutableDictionary* params=[NSDictionary dictionaryWithObjectsAndKeys:fbMessage, @"message", FBSession.activeSession.accessToken, @"access_token", nil];

        NSLog(@"feed::%@",str);

        [FBRequestConnection startWithGraphPath:str
                             parameters:params
                             HTTPMethod:@"POST"
                      completionHandler:^(FBRequestConnection *connection, id result,NSError *error) {
                                  NSLog(@"result::%@",result);

                 if(error)
                 {
                  NSLog(@"fail : %@",error.localizedDescription);
                hudApp.labelText = [NSString stringWithFormat:@"%@",error.localizedDescription];
                                  }
                                  else
                                  {
                                      NSLog(@"Success facebook post");
                                      hudApp.labelText = [NSString stringWithFormat:@"Success"];
                                      // txtView.text = @"success";
                                      NSLog(@"success");
                                  }

                                  hudApp.mode = MBProgressHUDModeCustomView;
                                  [self performSelector:@selector(dismissHUD:) withObject:nil afterDelay:1.0];
                              }];
    }
    else
    {
        NSArray *permissions = [NSArray arrayWithObject:@"publish_stream"];
        [FBSession openActiveSessionWithPermissions:permissions allowLoginUI:YES
                          completionHandler:^(FBSession *session, FBSessionState state,NSError *error) {
                                      NSLog(@"session.permissions ? : %@", session.permissions);
                                      [self sessionDoneForPageShare:session state:state error:error withuserid:str];
                                  }
         ];
    }

}

-(void)sessionDoneForPageShare:(FBSession *)session state:(FBSessionState)state error:(NSError *)error withuserid :(NSString *)usreid
{
    //UIImage *image = [UIImage imageNamed:@"testImage.png"];

    NSLog(@"feed::%@",usreid);
    hudApp = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    hudApp.labelText = @"Page Sharing...";
    [self performSelector:@selector(timeout:) withObject:nil afterDelay:60*5];

    //NSString *fbMessage = [NSString stringWithFormat:@"test"];
    NSString *fbMessage = @"hello testing";

    NSLog(@"State : %d **** Facebook Message : %@",state,fbMessage);

   // NSMutableDictionary * params = [NSMutableDictionary dictionaryWithObjectsAndKeys: fbMessage, @"message", nil];

    NSMutableDictionary* params=[NSDictionary dictionaryWithObjectsAndKeys:fbMessage, @"message", FBSession.activeSession.accessToken, @"access_token", nil];

    [FBRequestConnection startWithGraphPath:usreid
                         parameters:params
                         HTTPMethod:@"POST"
                  completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

                              if(error)
                              {
                                  NSLog(@"fail : %@",error.localizedDescription);
                                  // txtView.text = [NSString stringWithFormat:@"%@",error.localizedDescription];
                                  NSLog(@"%@",[NSString stringWithFormat:@"%@",error.localizedDescription]);
                                  hudApp.labelText = [NSString stringWithFormat:@"%@",error.localizedDescription];
                              }
                              else
                              {
                                  NSLog(@"Success facebook post");
                                  hudApp.labelText = [NSString stringWithFormat:@"Success"];
                                  //txtView.text = @"success";
                                  NSLog(@"success");
                              }

                              hudApp.mode = MBProgressHUDModeCustomView;
                              [self performSelector:@selector(dismissHUD:) withObject:nil afterDelay:1.0];
                          }];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:45:22.377

为了在朋友的墙上发帖，您需要向`/{friend_id}/feed`. 但是，自 2013 年 2 月 6 日起，Facebook 已[禁止在朋友墙上发帖](http://developers.facebook.com/roadmap/completed-changes/)：

> **移除通过 Graph API 向朋友墙发帖的功能**
> 
> 我们将删除通过 Graph API 向用户朋友的墙发帖的功能。具体来说，针对 [user_id]/feed 的 [user_id] 与会话用户不同的帖子，或 target_id 用户与会话用户不同的 stream.publish 调用将失败。如果您想允许人们发布到他们朋友的时间线，请调用提要对话框。通过用户提及标签或动作标签包含朋友的故事将显示在朋友的时间线上（假设朋友批准标签）。有关详细信息，请参阅此博客文章。

# ruby-on-rails - Sinatra static assets empty

> ID：16167317
> 
> 赞同：0
> 
> 时间：2013-04-23T10:43:22.567
> 
> 标签：ruby-on-rails, sinatra, assets, rails-routing

I have a Sinatra app in a Rails app that serves a static asset from a directory. The app is mounted in the Rails routes like this:

`mount BeanstalkdView::Server, :at => "/beanstalk"`

When I run this locally it works fine, using Thin, but when I run it on my test server (Nginx/Passenger) the static assets behave strange. A request to a static file return 200 OK, but there is no content.

I tell Sinatra where my static files are via `set :public_folder, "#{root}/resources"` and in the template I load the static files, e.g. a CSS file with `#{request.env['SCRIPT_NAME']}/css/file.css`. I verified that both paths are correct.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T15:04:12.003

That happens due to `::Rack::Sendfile` middleware which is enabled by default in Rails 3.0.x in production (disabled by default in any environment since 3.1.x).

This middleware is really simple but yet powerful. When you pass `::Rack::File` or `::Sinatra::StaticFile` (or any other object) which respond to `:path`, this middlware adds `X-SendFile` (for Apache) or `X-SendFile-Redirect` (for NGinx) and does not sends actual body. So that Apache or NGinx will handle real file delivery. It's a good and most efficient way to serve static assets in production, however you may disable this middleware (if you don't want to mess with your Nginx/Apache config). Find and comment following config option in your `config/environments/production.rb` file:

```
config.action_dispatch.x_sendfile_header 
```

this config option is used to instruct `Sendfile` middleware which header to set (do not do anything if not specified).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-01T11:59:29.663

Aleksey V's answer helped me a lot. In the end I fixed this using the proper setting for Nginx in `production.rb`:

`config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect'`

Make sure you restart your Rails app, Nginx and do a hard refresh in your browser to get the files.

For more info check out: [http://jimneath.org/2011/04/05/rails-3-nginx-and-send_file.html](http://jimneath.org/2011/04/05/rails-3-nginx-and-send_file.html).

# sql - 以下模式的 sql 查询

> ID：16167322
> 
> 赞同：1
> 
> 时间：2013-04-23T10:43:40.713
> 
> 标签：sql, sql-server, database

我有一张桌子：名字

当我执行 : **SELECT * FROM Name**时，结果为：

```
Name
======
aaa
bbb
ccc
sss 
```

我希望结果只在一行中：

```
Name
====
aaa bbb ccc sss 
```

我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:46:13.977

试试这个——

```
DECLARE @temp TABLE
(
      col NVARCHAR(50)
)

INSERT INTO @temp (col)
VALUES 
    ('aaa'),
    ('bbb'),
    ('ccc'),
    ('sss')

SELECT str_string = (
    SELECT col + ' '
    FROM @temp
    FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)') 
```

或者试试这个 -

```
DECLARE @string NVARCHAR(MAX) = ''

SELECT @string = @string + col + ' '
FROM @temp

SELECT @string 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T10:47:27.820

请试试：

```
SELECT 
    (SELECT ColumnName + ' '
    FROM YourTable
    FOR XML PATH(''),type).value('.','nvarchar(max)')  AS [Name] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:10:11.943

可能会根据您的要求过度使用布丁，但是用于将行连接成单个值的 CLR 聚合函数在您的工具箱中是一件非常方便的事情。像下面的东西。根据我的经验，运行速度比 xml 快得多，并且支持 GROUP BY 等，因此非常强大。仅适用于 SQL2k8 或更高版本，如果将字符串连接到超过 2GB，则会爆炸。

```
[Serializable]
[Microsoft.SqlServer.Server.SqlUserDefinedAggregate(Format.UserDefined, MaxByteSize = -1)]
public struct Concatenate : IBinarySerialize
{
public string concat;
public string delimiter;

public void Init()
{
    this.concat = "";
}

public void Accumulate(SqlString text, SqlString delim)
{
    if (!text.IsNull)
    {
        concat += (string)text + (string)delim;
    }
    delimiter = (string)delim;
}

public void Merge(Concatenate Group)
{
    concat += (string)Group.concat + (string)Group.delimiter;
    delimiter = (string)Group.delimiter;
}

public SqlString Terminate()
{
    return concat.Substring(0, concat.Length - delimiter.Length);
}

public void Read(BinaryReader r)
{
    delimiter = r.ReadString();
    concat = r.ReadString();
}

public void Write(BinaryWriter w)
{
    w.Write(delimiter);
    w.Write(concat);
} 
```

}

# html - Ajax URL 损坏

> ID：16167326
> 
> 赞同：1
> 
> 时间：2013-04-23T10:43:50.257
> 
> 标签：html, ajax, path

我有一个每 2 分钟运行一次以获取最新提要的 javascript setinterval。但是，这仅适用于索引页面。该脚本位于我包含在站点主布局页面中的 js 文件中。可能是什么原因？我知道它与路径有关，因为当我在 Firebug 中检查 Net 选项卡时，路径是错误的。但是，该文件包含在主布局中，并且每个页面都有它（布局）。

不知道它是否会有所帮助，但我的脚本是：

```
 $(document).ready(function(){
    setInterval(myfx, my_time);
   }
   myfx(){ 
      ajax({ url: "mypage", ..)};

   } 
```

我认为路径是相对于用户当前在网站上的“文件夹”，..这是导致问题的原因。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:02:44.680

问题是您的 URL 是相对的，这意味着您查询的目标会随着您更改页面而更改。即如果你在[http://website.com/](http://website.com/)那么 mypage 是[http://website.com/mypage](http://website.com/mypage)，但是如果你在[http://website.com/help/details](http://website.com/help/details)那么 mypage 在[http: //website.com/help/mypage](http://website.com/help/mypage)，可能不存在。

解决方法是使您的 url 绝对（以“/”开头，例如 /mypage），以便它始终指向相同的位置。

# php - 应该在什么级别解决安全模式？如何？

> ID：16167328
> 
> 赞同：0
> 
> 时间：2013-04-23T10:43:56.447
> 
> 标签：php, safe-mode

PHP 安全模式是解决共享服务器安全问题的一种尝试。引用[PHP 手册](http://php.net/features.safe-mode)：

> 尝试在 PHP 级别解决此问题在架构上是不正确的，但由于 Web 服务器和操作系统级别的替代方案不太现实，许多人，尤其是 ISP，现在使用安全模式。

如果 PHP 安全模式在体系结构上不正确，无法尝试在 PHP 级别解决此问题，那么应该在什么级别解决？如何？

有人说您可以在不使用安全模式或关闭安全模式但录制给一些经验丰富的主机支持人员的情况下保护您的站点。不可能有完全的安全性`safe_mode_off`即使您有其他安全工具（例如 ModSecurity），也

所以，我不确定哪个是正确的？我现在完全感到困惑，并试图为这种情况找到一个可靠且准确的解决方案，以便在有`safe_mode_off`服务器或没有服务器的情况下运行我的网站，但不能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T15:02:42.537

您从 PHP 手册页得出的结论是错误的。您没有完全阅读/理解它：引入安全模式首先是失礼。没有什么要解决的，也没有什么可以解决的。它只是更多的一些营销，因此名称为“安全模式”，以针对 PHP 分期付款的 Shared-Hoster。

如果您想了解您使用的操作系统的资源管理，请查阅它的技术文档。

# android - 如何在 api 11 下使 TextView 可选

> ID：16167330
> 
> 赞同：1
> 
> 时间：2013-04-23T10:44:00.723
> 
> 标签：android, textview, android-4.0-ice-cream-sandwich

我需要有一个将显示给用户的文本，并且可以选择其中的一部分并将其复制到剪贴板。但是没有打开键盘。我知道在 api 11 和更新版本上我可以使用

```
text.setTextIsSelectable (true); 
```

但是降低操作系统版本的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:28:42.773

使用`ContextMenu`和`CLIPBOARD_SERVICE`：

```
private TextView mTextView;

protected final void onCreate(Bundle savedInstanceState) {
...
registerForContextMenu(mTextView);
}

@Override
public void onCreateContextMenu(ContextMenu menu, View view, ContextMenu.ContextMenuInfo menuInfo) {
        TextView textView = (TextView) view;
        menu.setHeaderTitle(textView.getText()).add(0, 0, 0, R.string.menu_copy_to_clipboard);
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    ((ClipboardManager) getSystemService(CLIPBOARD_SERVICE)).setText(mTextView.getText());
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T11:28:25.700

经过漫长而耗时的搜索，我找不到可以在 textview 中为 android API 级别 <=11 选择文本的组件。我写了这个可能对你有帮助的组件： [新的 Selectable TextView in android 3 (API <=11) 组件](https://stackoverflow.com/questions/18042308/new-selectable-textview-in-android-3-api-11-component)

# android - Adapter_Android 列表视图

> ID：16167333
> 
> 赞同：-1
> 
> 时间：2013-04-23T10:44:05.277
> 
> 标签：android

我的问题是我有两个课程，我想在`ListView`. 我想将这些合并到一个列表视图中`AsyncTask`，有我的代码，我需要帮助。

```
protected Void doInBackground(Void... params) {
            twitt = Services.getTwitterTv();
            twittns = Services.getTwitter();

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);
            for (Twitter twitts : twitt) 
                for(Twitter twittn: twittns)

                {
                    System.out.println(twitts.getTexte());
                    System.out.println(twittn.getTexte());

                }
            progressDialog.dismiss();
            twitt.addAll(Services.getTwitter());
            twitt.addAll(Services.getTwitterTv());

            TwitterAdapter adapter = new TwitterAdapter(TwitterTv.this, R.layout.twitts_item, twitt );
            TwitterAdapter adapter2 = new TwitterAdapter(TwitterTv.this, R.layout.twitts_item, twittns );

            twitterlist.setAdapter(adapter);
            twitterlist.setAdapter(adapter2);

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:55:54.137

因此，请标记日期并`addapter`询问它是什么数据。如果是`data1`inflate view 第一，如果是 inflate `data2`view `number2`。

然后只需用数据填充视图即可。

# ruby-on-rails-3 - Heroku 找不到我的资产管道脚本

> ID：16167334
> 
> 赞同：0
> 
> 时间：2013-04-23T10:44:09.930
> 
> 标签：ruby-on-rails-3, heroku, asset-pipeline

`../vendor/assets/javascripts`我最近按照某处的建议将一些 javascript 移到了我的文件夹中。它在本地工作正常，但是当我将它部署到 Heroku 时它停止工作。

它再也找不到我的 javascript 文件了。

问题是它以某种方式更改引用以包含这样的指纹

> www.mydomain.com/assets/jquery.validate-2dd178feef2ad4ecda69b07a4d281093.min

但是如果我删除指纹，我可以在 heroku 上看到我的文件

> www.mydomain.com/assets/jquery.validate.min

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:55:51.097

我发现移动到供应商文件夹的这 3 个 javascript 中有 1 个实际上正在工作。所以我尝试重命名其他 2 个脚本并再次重新部署它们。

那解决了它...

# session - 成功登录到gwt中的其他类后如何重定向以及如何在gwt中设置会话超时及其在会话超时后的响应？

> ID：16167339
> 
> 赞同：0
> 
> 时间：2013-04-23T10:44:27.073
> 
> 标签：session, gwt, servlets, redirect, login

你能告诉我成功登录GWT后如何重定向到下一页吗？我已经创建了服务接口及其实现，但不知道如何在登录身份验证后重定向页面。分享你的观点。并告诉我如何获取 sessiontimeout 然后自动重定向到 gwt 中的登录页面。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:32:49.217

可以`Window.Location.replace(String newURL)`用来切换页面。

至于会话超时，这取决于您使用的是哪种会话管理。

最简单的方法是在您进行的每个 RPC 调用中包含“会话已过期”信息，例如自定义异常：

服务器

```
public String myRpcCall() throws SessionExpiredException {
  if(!SessionManager.isSessionValid()) { // depends on your session management
     throw new SessionExpiredException;
  }
  return some_stuff(); // whatever you want to do
} 
```

客户

```
public doCall() {
   AsyncCallback<String> cb = new AsyncCallback<String>() {
      @Override
      public void onFailure(Throwable caught) {
         if(caught instanceof SessionExpiredException) {
            // inform the user and redirect to login page
            Window.Location.replace("login.html");
         }
         // handle other errors
      }
      // TODO onSuccess(String)
   };
   service.myRpcCall(cb);  // your rpc call goes here
} 
```

# jqplot - 如何使用 Jqplot 在水平条形图中启用 y 轴刻度（标签）的单击事件

> ID：16167341
> 
> 赞同：0
> 
> 时间：2013-04-23T10:44:30.510
> 
> 标签：jqplot

我正在尝试使用 jqplot 实现水平条形图。我想为 y 轴标签启用点击事件。

但我尝试使用 jquery 使用类名来访问“y 轴刻度”。

```
 $('.jqplot-yaxis-tick').click(function ()
    {
       alert("you have clicked the label");

    }); 
```

有没有像 jqplot 中的“jqplotDataClick”事件这样的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T06:42:31.777

这个问题 [从这里解决了](https://stackoverflow.com/questions/5959942/making-the-axis-labels-in-jqplot-clickable)

只需更新 .jqplot-yaxis-tick 的 z-index，使其成为第一个被单击并添加 .live （或 .on）的 div

```
$('.jqplot-yaxis-tick').css({
            cursor: "pointer",
            zIndex: "200"
    }).live('click', function (e) {
        alert("you have clicked the label");
    }); 
```

# c# - 530-5.5.1 需要身份验证错误，smtp

> ID：16167343
> 
> 赞同：0
> 
> 时间：2013-04-23T10:44:37.933
> 
> 标签：c#

这是我下面的完整代码，请需要帮助，我一直在尝试通过 gmail 发送电子邮件，我收到此错误“530-5.5.1 Authentication required”，异常发生在此行中名为“Send()”的方法中这里：（请参阅下面的完整代码），由于某种原因，我没有使用 c# 库，所以我需要让它工作，谢谢。

```
 //EXCEPTION OCCURS HERE, SEE THE SEND METHOD BELOW FOR FULL CODE
  foreach (string address in to)
        {
            try
            {
                message = "RCPT TO:<" + address + ">\r\n";
                response = ReadLine();
                SendCommand(message);
                Console.WriteLine(response);
                if (response.Substring(0, 3) != "250")
                {
                    throw new SmtpException(response);
                }
            }

        }
   //CONSTRUCTOR
    public Smtp()
    {
        Port =465 ;
        Host = "smtp.gmail.com";
        Email = "email@gmail.com";
        Password = "xxxxxxx";
        to = new List<String>() { "reciever@gmail.com"};
        from = "sender@gmail.com";

    }

  //FULLE CODE
  public void Connect()
    {
        if (Client == null)
            Client = new TcpClient();

        if (!Client.Connected)
            Client.Connect(Host, Port);

        //if (IsSecure)
        //{
            SslStream secureStream =
              new SslStream(Client.GetStream());
            secureStream.AuthenticateAsClient(Host);

            ClientStream = secureStream;
            secureStream = null;
            Console.WriteLine("secure");

        //}
        //else
        //{
        //    ClientStream = Client.GetStream();
        //    Console.WriteLine("non secure");
        //}

        Writer = new StreamWriter(ClientStream);
        Reader = new StreamReader(ClientStream);

       string c= ReadLine();
       Console.WriteLine(c);

      string  message = "EHLO me";
       SendCommand(message);
       string response = ReadLine();
       Console.WriteLine(response);
       if (response.Substring(0, 3) != "250")
       {
         //  throw new SmtpException(response);
       }

       Send();
    }

   // public void 
    public void Send()
    {
        string message = "MAIL FROM:<" + Email + ">";
        SendCommand(message);
        string response = ReadLine();
        Console.WriteLine(response);
        if (response.Substring(0, 3) != "250")
        {
            throw new SmtpException(response);
        }
        string x = ReadLine();
        Console.WriteLine(x);

        **//EXCEPTION OCCURS HERE**
        foreach (string address in to)
        {
            try
            {
                message = "RCPT TO:<" + address + ">\r\n";
                response = ReadLine();
                SendCommand(message);
                Console.WriteLine(response);
                if (response.Substring(0, 3) != "250")
                {
                    throw new SmtpException(response);
                }
            }
            catch (SmtpException e)
            {
                System.Console.WriteLine("{ 0}", e.Message);
            }
        }

        message = "DATA\r\n";
        SendCommand(message);
        response = ReadLine();
        Console.WriteLine(response);
        if (response.Substring(0, 3) != "354")
        {
            throw new SmtpException(response);
        }

        message = "Subject: " + subject + "\r\n";
        foreach (string address in to)
        {
            message += "To: " + address + "\r\n";
        }
        foreach (string address in cc)
        {
            message += "Cc: " + address + "\r\n";
        }

        message += "From: " + from + "\r\n";
        if (bodyHtml.Length > 0)
        {
            message += "MIME-Version: 1.0\r\n"
                + " Content-Type: text/ html;\r\n"
                + " charset=\" iso-8859-1\"\r\n";
            message += "\r\n" + bodyHtml;
        }
        else
        {
            message += "\r\n" + bodyText;
        };
        message += "\r\n.\r\n";
        SendCommand(message);
        response = ReadLine();
        Console.WriteLine(response);
        if (response.Substring(0, 3) != "250")
        {
            throw new SmtpException(response);
        }

        message = "QUIT\r\n";
        SendCommand(message);
        response = ReadLine();
        Console.WriteLine(response);
        if (response.IndexOf(" 221") == -1)
        {
            throw new SmtpException(response);
        }

    }

    public void Close()
    {
        if (Client != null)
        {
            if (Client.Connected)
                Logout();

            Client.Close();
            Client = null;
        }

        if (ClientStream != null)
        {
            ClientStream.Close();
            ClientStream = null;
        }

        if (Writer != null)
        {
            Writer.Close();
            Writer = null;
        }

        if (Reader != null)
        {
            Reader.Close();
            Reader = null;
        }

        disposed = true;
    }

    public void Dispose()
    {
        if (!disposed)
            Close();
    }

    protected void Login()
    {
        if (!IsResponseOk(SendCommand("USER " + Email)) ||
          !IsResponseOk(SendCommand("PASS " + Password)))
            throw new Exception("User/password not accepted");
    }

    protected void Logout()
    {
        SendCommand("RSET");
        //SendCommand("QUIT");
    }

    protected string SendCommand(string cmdtext)
    {
        Writer.WriteLine(cmdtext);
        Writer.Flush();

        return ReadLine();
    }

    protected string ReadLine()
    {
        return Reader.ReadLine() + "\r\n";
    }

    protected string ReadLines()
    {
        StringBuilder b = new StringBuilder();

        while (true)
        {
            string temp = ReadLine();

            if (temp == ".\r\n" || temp.IndexOf("-ERR") != -1)
                break;

            b.Append(temp);
        }

        return b.ToString();
    }

    protected static bool IsResponseOk(string response)
    {
        if (response.StartsWith("+OK"))
            return true;
        if (response.StartsWith("-ERR"))
            return false;

        throw new Exception("Cannot understand server response: " +
          response);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:00:16.407

显然，SMTP 服务器在接受要发送的邮件之前需要进行身份验证。这是司空见惯的，因为垃圾邮件发送者和诈骗者过去常常使用“开放中继”来兜售他们的商品。

检查服务器的规则以查看它们将接受什么身份验证。[http://en.wikipedia.org/wiki/SMTP_Authentication](http://en.wikipedia.org/wiki/SMTP_Authentication)上的 Wikipedia 参考资料可能有用。

# python - Python'get_text（）'不起作用

> ID：16167348
> 
> 赞同：1
> 
> 时间：2013-04-23T10:44:43.043
> 
> 标签：python, html-parsing, beautifulsoup

我正在尝试通过解析 html 编译以下代码，但出现错误：

```
import string, urllib2, urlparse, csv, sys
from urllib import quote
from urlparse import urljoin
from bs4 import BeautifulSoup
from ast import literal_eval

changable_url = 'http://www.asusparts.eu/partfinder/Asus/All%20In%20One/E%20Series'
page = urllib2.urlopen(changable_url)
base_url = 'http://www.asusparts.eu'
soup = BeautifulSoup(page)

selects = []
redirects = []
model_info = []

#Opening csv writer
c = csv.writer(open(r"asus_stock.csv", "wb"))
#Object reader
cr = csv.reader(open(r"asus_stock.csv", "rb"))

print "FETCHING OPTIONS"
select = soup.find(id='myselectListModel')
selects.append(select)
print selects.get_text() 
```

错误是：

```
print selects.get_text()
AttributeError: 'list' object has no attribute 'get_text' 
```

我怎么能通过这个错误？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:50:22.267

您正在运行`get_text()`函数 on `selects`，这是一个列表。列表没有那个功能。

你不应该自己运行它`select`吗？或者选择中的每个元素呢：

```
for item in selects:
   print item.get_text() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-16T15:28:08.983

我经常看到这个错误。

这与您应用`get.text()`的变量有关；`get_text()`是一个适用于美丽汤的功能。所以你必须重新汤选择：

```
select2 = BeautifulSoup(select, "lxml") 
```

`"lxml"`可以用您正在使用的任何解析器替换。如果这不起作用，请先尝试将 select 转换为字符串，然后执行上述变量函数。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-02-09T00:16:15.307

您需要在列表中获取一个元素。尝试`selects[0].get_text()`，它应该工作。

# iphone - 如何在 cocos 2d 中让两个物体发生碰撞？

> ID：16167362
> 
> 赞同：0
> 
> 时间：2013-04-23T10:45:22.277
> 
> 标签：iphone, cocos2d-iphone

```
 if (CGRectIntersectsRect(projectileRect, targetRects))
        {
           NSLog(@"ha ha Collision detected");
        }

     CGRect projectileRect = [player boundingBox];
     CGRect targetRects = [anEnemy boundingBox]; 
```

这是我用于碰撞的代码。问题是多次没有检查碰撞。如果检查了碰撞位置，则碰撞位置在左下角或右下角。

请告知该怎么做或如何进行碰撞的任何示例。另外我没有使用盒子或黑猩猩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:56:30.820

确保检查对象是否也通过了对象。雷在[这里对所有这些都有一些很好的理解](http://www.raywenderlich.com/606/how-to-use-box2d-for-just-collision-detection-with-cocos2d-iphone)

# php - 如何将查询发送到 php 页面并在 php 中获取 html 数据？

> ID：16167365
> 
> 赞同：1
> 
> 时间：2013-04-23T10:45:37.433
> 
> 标签：php, html, email, load

我正在尝试从 php 类发送 html 电子邮件，其中数据由发送到类方法的数据确定。

例如。

```
public function send_warning_email($user_id, $email){
   global $mail;
   $body = file_get_contents('email_processor.php');
   /// ohter codes  
} 
```

在上面的例子中。我想将查询发送到 email_processor.php 页面并获取返回纯文本并将其分配给 $body 变量。

是否可以使用另一个函数来代替 file_get_contents()，它允许我将查询发送到 php 页面并获取返回文本或执行此任务的其他方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:52:17.933

您可以要求您的 email_processor.php：

```
$body = require 'email_processor.php'; 
```

在这种情况下，你必须`return`有一些身体在你的`email_processor.php`

另一种情况：您可以使用输出缓冲区：

```
ob_start();
require 'email_processor.php';
$body = ob_get_clean(); 
```

在这种情况下，你必须在你的`email_processor.php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:47:55.187

利用`CURL`

```
$ch = curl_init();  
curl_setopt($ch, CURLOPT_URL,'email_processor.php');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS,$data);     
// receive server response ...
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$server_output = curl_exec ($ch);
curl_close ($ch); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:50:16.800

某些操作系统只会在您像这样传递它时读取它：

`$body = file_get_contents('./email_processor.php');`

# php - CodeIgniter DataMapper 相关项的顺序

> ID：16167366
> 
> 赞同：0
> 
> 时间：2013-04-23T10:45:37.697
> 
> 标签：php, codeigniter, codeigniter-datamapper

我正在 CodeIgniter/DataMapper 中编写一个发票应用程序。

每个客户都有许多发票。

在视图中，我希望能够显示客户数据，然后显示该客户的发票表。

目前，我在控制器中加载客户及其相关发票并将它们发送到视图。

```
public function view($id) {
    $c = new Customer($id);
    $c->invoice->get_iterated();
    $data['customer'] = $c;
} 
```

但是当我遍历发票以在视图中显示它们时，我真的希望它们按日期降序排列，但当然不是。

有没有办法指定相关项目的顺序或在显示它们之前对其进行排序，或者我是否需要单独加载发票，类似于以下控制器？

```
public function view($id) {
    $c = new Customer($id);
    $i = new Invoice();
    $i->order_by('invoice_date', 'desc');
    $i->get_where(array('customer_id' => $id));
    $data['customer'] = $c;
    $data['invoices'] = $i;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:01:38.163

您可以`->order_by()`在发出`get_iterated()`. 因此，在您的示例中，它看起来像：

```
$c->invoice->order_by('invoice_date', 'desc')->get_iterated(); 
```

# jquery - 具有动态加载图像和图像数量的 Fancybox

> ID：16167368
> 
> 赞同：0
> 
> 时间：2013-04-23T10:45:41.073
> 
> 标签：jquery, cordova, jquery-mobile, xml-rpc

我正在使用**fancybox** js 和 css 来制作图像滑块。在那个滑块中，我想动态更改图像的数量和图像的 src，但我对此一无所知。

代码：

```
$("#fancybox-manual-c").click(function () {
    alert("clicked");
    $.fancybox.open([
        {
            href: 'http://fancyapps.com/fancybox/demo/1_b.jpg',
            title: 'this image links to bbc news'
        }, {
            href: 'http://fancyapps.com/fancybox/demo/2_b.jpg',
            title: 'this image links to jquery'
        }, {
            href: 'http://fancyapps.com/fancybox/demo/3_b.jpg',
            title: 'this image links to fancybox'
        }
    ], {
        nextEffect: 'fade',
        prevEffect: 'fade',
        loop: false,
        mouseWheel: true,
        openEffect: 'elastic',
        closeEffect: 'elastic',
        openOpacity: true,
        closeOpacity: true,
        cyclic: false
    });
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:05:35.133

你使用花哨的盒子 1.3 还是 2？

1.  一般来说，首先最好了解动态的含义。您想在哪个事件中更改图像？即当用户点击某些东西或在特定的时间间隔内

2.  您想从哪里获得新的图像集？通过 ajax 加载它们还是它们已经嵌入到页面中的某个地方？

我有时会这样做：

```
<a class="mylink" href="#firstset">link</a>
<a class="mylink" href="#secondset">link</a>  

    <div class="content" style="display:none">
      <div id="firstset">
        image...
      </div>
      <div id="secondset">
        image...
      </div>
    </div>

    <script>
    $(".mylink").click(function() {
    var $content = $($(this).attr('href')).clone();

    $.fancybox({
      'titlePosition': 'inside', 'padding': '0', 'titleShow': false,
      'content': $content,
      'onComplete': function () {
        init your slider

      }
    });
    return false;
}) 
```

这只是为了给你一个想法，许多可能的解决方案之一指定的比你能得到更好的答案更准确

# xml - 从 SSRS XML 数据源中选择属性

> ID：16167369
> 
> 赞同：3
> 
> 时间：2013-04-23T10:45:41.737
> 
> 标签：xml, reporting-services

我有以下 XML 文件：

```
    <?xml 版本="1.0" 编码="utf-8"?>
    <根>
          <注意>
            <公司>公司1</公司>
            <Rank Indicator="increasing">2</Rank>
            <Position Indicator="decreasing">1</Rank>
          </NB>
          <注意>
            <公司>公司 2</公司>
            <Rank Indicator="decreating">42</Rank>
            <Position Indicator="increasing">6</Rank>
          </NB>
    </root>

```

我需要做的是创建一个输出以下列的数据集：

*   公司
*   排名指标
*   位置指示器

我试过这样的事情：

```
    <查询>
        <ElementPath>root/ {}/NB</ElementPath>
    </查询>

```

但是，这不包括任何属性。我设法通过使用这样的东西来获得一个属性：

```
    <查询>
        <ElementPath>root/ {}/NB/Rank{@Indicator}</ElementPath>
    </查询>

```

但是，我需要 Rank 和 Position 指标，我不确定在这种情况下如何提供属性列表。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:06:03.057

如果我理解您的评论，您必须创建一个没有连接字符串的数据源和一个以您的 XML 内容作为查询字符串的新数据集。

这是你应该做的：

1.  使用空白连接字符串创建 XML 数据源。
2.  为 XML 数据源创建一个新数据集。
3.  在数据集属性对话框中，单击查询设计器。基于文本的查询设计器对话框打开。
4.  在查询窗格中，输入以下内容：`<Query><XmlData>`
5.  复制您的 XML 文件并将文本粘贴到`<XmlData>`.
6.  一定要删除`<?xml version="1.0"?>`
7.  在查询的末尾，添加以下内容： `</XmlData></Query>`
8.  单击运行查询 (!)。

在您的情况下，您的代码将是这样的：

```
<Query>
    <XmlData>
        <root>
            <NB>
                <Company>Company 1</Company>
                <Rank Indicator="increasing">2</Rank>
                <Position Indicator="decreasing">1</Rank>
            </NB>
            <NB>
                <Company>Company 2</Company>
                <Rank Indicator="decreasing">42</Rank>
                <Position Indicator="increasing">6</Rank>
            </NB>
        </root>
    </XmlData>
</Query> 
```

如果要指定参数：

```
 </XmlData>
    <ElementPath>YourField {@}</ElementPath>
</Query> 
```

**编辑**

根据您的评论，检索特定字段：

`{FieldA, FieldB, FieldC}`

资料来源：

[http://msdn.microsoft.com/en-us/library/ms365158.aspx](http://msdn.microsoft.com/en-us/library/ms365158.aspx)

[http://msdn.microsoft.com/en-us/library/ms345251.aspx](http://msdn.microsoft.com/en-us/library/ms345251.aspx)

# spring-roo - Spring Roo + Webflow：无法序列化流执行。

> ID：16167371
> 
> 赞同：0
> 
> 时间：2013-04-23T10:45:48.380
> 
> 标签：spring-roo

这是我尝试打开流程时的错误：

> 无法序列化流程执行；确保存储在流或闪存范围中的所有对象都是可序列化的

但我所有的模型都是@RooJavaBean。可能这些不可序列化吗？

谢谢！

ps 完整的错误信息

> 消息：“org.springframework.webflow.execution.repository.snapshot.SnapshotCreationException：无法序列化流程执行；确保存储在流程或闪存范围中的所有对象都是可序列化的”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:57:22.973

我找到了解决方案：

@RooSerializable

# mysql - 为 Necessitas (qt-android) 构建 mysql 驱动程序

> ID：16167375
> 
> 赞同：0
> 
> 时间：2013-04-23T10:45:58.237
> 
> 标签：mysql, build, cmake, header-files, qt-necessitas

我正在尝试构建一个 mysql 驱动程序以在 qt-android 应用程序中使用它。现在一切似乎都清楚了，但我的脑海里出现了矛盾。虽然我正在编译 mysql-connector-c 源代码（ 6.0.2 ），但 cmake 缺少很多头文件。没关系，但我的问题是从哪里获得这些标题？或者我可以只使用我的 gcc 标头吗？

先感谢您！

链接到我使用的指南：http: [//qa-android.com/comp-lib-qt-android/2012-11/pdfNpp3xMBVQQ.pdf](http://qa-android.com/comp-lib-qt-android/2012-11/pdfNpp3xMBVQQ.pdf)

# c# - C#中用于同步对象超时的高精度计时器

> ID：16167380
> 
> 赞同：0
> 
> 时间：2013-04-23T10:46:02.487
> 
> 标签：c#, .net, windows, timer

我有类似以下代码的东西：

```
public void acquireReaderLock(int nmsMaxWait)
{
    //'nmsMaxWait' = timeout in milliseconds

    if(_mutex.WaitOne(nmsMaxWait))
    {
        //Need time left for the second wait?
        if(_semaphore.WaitOne(???)
        {
        }
        else
            throw new Exception("Timed out");
    }
    else
        throw new Exception("Timed out");
} 
```

我正在寻找一个高精度的计时器。在 C++ 中，我会使用[GetTickCount](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408%28v=vs.85%29.aspx)或[GetSystemTimeAsFileTime](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724397%28v=vs.85%29.aspx) API 来测量经过的时间，但我应该在 C# 中使用什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T10:50:04.297

您可能会想到使用[StopWatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)中最精确的计时类`CLR`，我们通常在代码执行测量中使用它。

但也有其他计时选项，例如：[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)类，也可以使用。

正如@Matthew Watson 所言，还有另一个选择：使用[Environment.TickCount](http://msdn.microsoft.com/en-us/library/system.environment.tickcount.aspx)。

# javascript - fb.api；来自非应用开发者账户的帖子

> ID：16167381
> 
> 赞同：1
> 
> 时间：2013-04-23T10:46:03.330
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-login

我创建了一个使用 FB Javascript SDK 的简单应用程序，它在 FB 上发布我网页文本区域中给出的内容。我为此使用 fb.api，问题是它仅适用于我的用户 ID（我从中创建了应用程序）。对于其他ID，它不起作用。有人可以帮忙吗？我希望其他用户在登录后也能够在他们的墙上发帖。

```
<html>
<head></head>
<body>
    <div id="fb-root"></div>
    <label>Give your message here:</label><br/>
    <textarea id = "ta"></textarea><br/>
    <label>Any image?</label><br/>
    <textarea id = "pic"></textarea><br/>
    <label>Any link?</label><br/>
    <textarea id = "ta_link"></textarea><br/>
    <button onclick = "testAPI()">Click To Post!</button>
    <script>
      // Additional JS functions here
      window.fbAsyncInit = function() {
        FB.init({
          appId      : 'AppID', // App ID
          channelUrl : 'http://127.0.0.1/channel.html', // Channel File
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          xfbml      : true  // parse XFBML
        });

        // Additional init code here
        FB.getLoginStatus(function(response) {
            if (response.status === 'connected') {
                alert("Connected");
                //testAPI();
            } else if (response.status === 'not_authorized') {
                // not_authorized
                login();
            } else {
                // not_logged_in
                login();
            }
        });
        };
         function login() {
            FB.login(function(response) {
                if (response.authResponse) {
                    //testAPI();
                } else {
                    alert("Can't connect")
                }
            });
        }
      function testAPI() {
          FB.getLoginStatus(function(response) {
            if (response.status === 'connected') {
          var tbmsg = document.getElementById("ta").value;
           var tbimg = document.getElementById("pic").value;
           var tblink = document.getElementById("ta_link").value;
          var wallPost = {};
        wallPost['message'] = tbmsg;
        if(tbmsg == "")
        {
            alert("Message box can't be empty")
        }

        if(tbimg)
        {
            wallPost['picture'] = tbimg;
        }
        if(tblink)
        {
            wallPost['link'] = tblink;
        }

        FB.api('/me/feed', 'post', wallPost , function(response) {
        if (!response || response.error) {
        alert('Error occured');
        } else {
        alert("Posted");
        }

    });
}
else
{
    alert("Login first")
} 
```

}); }

```
 // Load the SDK Asynchronously
    </script>
</body> 
```

# java - IndexOutOfBoundsException 不起作用

> ID：16167386
> 
> 赞同：0
> 
> 时间：2013-04-23T10:46:27.853
> 
> 标签：java, bluej

我试图在索引超出范围时显示错误消息，但即使数组列表中没有元素，我当前的代码也没有显示适当的错误消息。

这是我试图实现异常的部分的代码块。解释一下，make call 方法获取显示，它是一个与数组元素对应的数字，然后显示来自正确索引的调用。

```
public void makeCall()
{
    Mobile phoneCall = (Mobile) gadgets.get(getDisplay());
    phoneCall.PhoneCall(getPhoneNumber(), getDuration());
    System.out.println();
}

public int getDisplay()
{
    int gadgetDisplay = 0;
    try
    {
        gadgetDisplay = Integer.parseInt(displayText.getText());

    if (gadgetDisplay< 0)
    {
      JOptionPane.showMessageDialog
      (frame, "Please enter a positive Display");  
    }
    }
    catch(NumberFormatException exception)
    {
        JOptionPane.showMessageDialog
        (frame, "Please enter a positive Display");
    }
    catch(IndexOutOfBoundsException exception)
    {
        JOptionPane.showMessageDialog
        (frame, "Gadget is not listed");
    }
    return gadgetDisplay;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:56:31.500

只有当 try 块中的代码抛出`IndexOutOfBoundsException`.

目前，您的 try 块中没有任何内容会引发该异常。正如您所说的在`ArrayList`其他地方处理，您很可能需要将尝试访问内部元素的代码`ArrayList`放在它自己的 try catch 块中。异常需要在那里处理。

老实说，我认为您在这里发布了错误的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:58:19.663

您不会产生 Desired 异常，因为您没有尝试做某事，因此会发生异常。

OutOfBound 异常意味着您正在尝试从超出范围内获取值

```
public int getDisplay()
{
    int gadgetDisplay = 0;
    ArrayList arr = new ArrayList();
    arr.add("a");
    try
    {
        String str = arr.get(3);

    if (gadgetDisplay< 0)
    {
      JOptionPane.showMessageDialog
      (frame, "Please enter a positive Display");  
    }
    }
    catch(NumberFormatException exception)
    {
        JOptionPane.showMessageDialog
        (frame, "Please enter a positive Display");
    }
    catch(IndexOutOfBoundsException exception)
    {
        JOptionPane.showMessageDialog
        (frame, "Gadget is not listed");
    }
    return gadgetDisplay;
} 
```

上面的代码会产生异常。而且我不确定您对 ArrayList 的 Exception 有何期待

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:14:40.763

您不应该使用 try / catch 块来执行此操作 - 您已经知道 ArrayList 中有多少元素，所以只需使用[size()](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#size%28%29)来确保数字在范围内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T11:21:46.103

如果需要检查大小，则可以调用 size() 方法，也可以抛出异常，以便 makeCall 方法可以决定操作：

```
public void makeCall() {
    try {
        Mobile phoneCall = (Mobile) gadgets.get(getDisplay());
        phoneCall.PhoneCall(getPhoneNumber(), getDuration());
        System.out.println();
    }
    catch(NumberFormatException exception) {
        JOptionPane.showMessageDialog(frame, "Please enter a positive Display");
    }
    catch(IndexOutOfBoundsException exception) {
        JOptionPane.showMessageDialog(frame, "Gadget is not listed");
    }
    catch(IllegalArgumentException exception) {
        JOptionPane.showMessageDialog(frame, "Please enter a positive Display");
    }
}

public int getDisplay() throws NumberFormatException
{
    int gadgetDisplay = Integer.parseInt(displayText.getText());

    if (gadgetDisplay < 0) {
        throw new IllegalArgumentException("Please enter a positive Display");  
    }
    else if ( gadgetDisplay >= yourList.size() ) {
        throw new IndexOutOfBoundsException("Gadget is not listed");
    }

    return gadgetDisplay;
} 
```

或者你可以用一种方法做到这一点：

```
public void makeCall() {
    try {
        int gadgetDisplay = Integer.parseInt(displayText.getText());

        if (gadgetDisplay < 0) {
            JOptionPane.showMessageDialog(frame, "Please enter a positive Display");
        }
        else if ( gadgetDisplay >= yourList.size() ) {
            JOptionPane.showMessageDialog(frame, "Gadget is not listed");
        }
        else {
            Mobile phoneCall = (Mobile) gadgets.get(getDisplay());
            phoneCall.PhoneCall(getPhoneNumber(), getDuration());
            System.out.println();
        }
    }
    catch(NumberFormatException exception) {
        JOptionPane.showMessageDialog(frame, "Please enter a positive Display");
    }
} 
```

# r - 如何使 geom_text() 以 log-lin 比例与 geom_segment() 平行？

> ID：16167387
> 
> 赞同：6
> 
> 时间：2013-04-23T10:46:41.767
> 
> 标签：r, ggplot2

需要在 log-lin 图中注释一条线。如何使文本字符串（此处为“0000000000”）平行于它正在注释的行？

```
require(ggplot2)
require(scales)
x=c(1:10)
y=2^x
data_line <- data.frame(x=3,xend=8,y=2^8,yend=2^9)
line <- geom_segment(data=data_line,aes(x=x,xend=xend,y=y,yend=yend),color="blue")
angle= atan((data_line$yend - data_line$y) / (data_line$xend - data_line$x))*(180/pi)
text <- annotate("text",x=data_line$x,y=data_line$y,label="0000000000",angle=angle)
qplot(x=x,y=y,geom="line") + line + text + scale_y_log10() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:37:39.283

这是使用以下方法执行此操作的一种方法`coord_fixed`：

```
ratio <- .25/(256/5) # 256/5 is from (512-256)/(8-3)
df1 <- data.frame(x = 1:10, y = 2^(1:10))
d <- data.frame(xmin=3, xmax=8, ymin=256, ymax=512, annotation="bla")
ggplot() + geom_line(data = df1, aes(x=x, y=y)) + 
    geom_segment(data=d, aes(x=xmin, xend=xmax, y=ymin, yend=ymax)) + 
    geom_text(data = d, aes(x=4, y=256/5 * 4 + 512/5, 
    label=annotation, angle=atan2((ymax-ymin)*ratio, 
    (xmax-xmin)) * 180/pi), vjust=-0.5) + coord_fixed(ratio=ratio) 
```

![在此处输入图像描述](https://i.stack.imgur.com/RSQjk.png)

* * *

为了让它达到对数比例，它似乎有点棘手：

```
ratio <- -log10(.25/(256/5)) # 256/5 is from (512-256)/(8-3)
df1 <- data.frame(x = 1:10, y = 2^(1:10))
d <- data.frame(xmin=3, xmax=8, ymin=256, ymax=512, annotation="bla")
ggplot() + geom_line(data = df1, aes(x=x, y=y)) + 
    geom_segment(data=d, aes(x=xmin, xend=xmax, y=ymin, yend=ymax)) + 
    geom_text(data = d, aes(x=4, y=256/5 * 4 + 512/5, 
    label=annotation, angle=log10(atan2((ymax-ymin)*ratio, 
    (xmax-xmin)) * 180/pi)), vjust=-0.5) + coord_fixed(ratio=ratio) + scale_y_log10() 
```

![在此处输入图像描述](https://i.stack.imgur.com/0RJIG.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T15:33:40.860

解决方法如下

```
require(ggplot2)
require(scales)
coord_ratio = ((1+sqrt(5))/2)^-1
data <- data.frame(x=c(1:10),y=10^(1:10))
line_coord <- data.frame(x=round(runif(5,1,5)),
                     y=round(runif(5,10^1,10^5)),
                     xend=round(runif(5,5,10)),
                     yend=round(runif(5,10^5,10^10)))
line_draw <- geom_segment(data=line_coord,aes(x=x,y=y,xend=xend,yend=yend),color="blue")
angle = atan((log10(line_coord$yend)*(coord_ratio)-log10(line_coord$y)*coord_ratio) / (line_coord$xend-line_coord$x))*(180/pi)
text <- annotate("text",x=line_coord$x,y=line_coord$y,label="LLLLLLLLLL",angle=angle,hjust=-0.1,vjust=-0.5)
qplot(data$x,data$y) + scale_y_log10() + coord_fixed(ratio=coord_ratio) + line_draw + text 
```

![结果：i.imgur.com/0JBGAiO.png](https://i.imgur.com/0JBGAiO.png)

# android - 无法为低于 4.1 的设备获取 GCM 注册 ID

> ID：16167389
> 
> 赞同：1
> 
> 时间：2013-04-23T10:46:48.170
> 
> 标签：android, google-cloud-messaging

我在我的应用程序中使用 GCM，以下代码适用于 4.1 以上的设备。

但是，对于 4.1 以下的设备，我似乎无法获得 GCM 注册 ID。

请任何人告诉我为什么会发生这种情况。

这是我用来获取 regId 的代码。

```
 checkNotNull(CommonUtils.SENDER_ID, "SENDER_ID");
    GCMRegistrar.checkDevice(this);
    GCMRegistrar.checkManifest(this);
    final String regId = GCMRegistrar
            .getRegistrationId(getApplicationContext());
    Log.i(TAG + ">>>>>>>>....", "R Id Is>>>>>>" + regId);
    if (regId.equals("")) {
        // Automatically registers application on startup.
        GCMRegistrar.register(getApplicationContext(),
                CommonUtils.SENDER_ID);

    } else {
        Log.i(TAG + ">>>>>>>>....", "Already Registered");

    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:50:51.050

如果您在设备中没有设置 google 帐户，则不会获取 GCM 注册 ID。

请确保您拥有它。

# java - 公历和 1970 年之前的日期

> ID：16167391
> 
> 赞同：1
> 
> 时间：2013-04-23T10:46:52.050
> 
> 标签：java, hibernate, jpa

如何修复 1970 年之前的公历日期的变量“时间”。或者 1970 年之前的日期的公历变量“时间”的单位是什么？

我使用 hibernate 进行对象关系映射。我试图保存到我的数据库的数据是日期类型的公历。但是只要日期小于 1970，我的应用程序就会崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:35:06.387

*Epoch* （1970 年 1 月 1 日）之前的时间戳用负数表示。看看[这个 SO answer](https://stackoverflow.com/a/5488243/7345)来看看一个例子。

如果您的应用程序“崩溃”（无论这意味着什么），您需要查看它在数据库中的表示方式以及它是如何映射的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-01T05:12:58.530

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T10:49:50.267

你不能使用日历类吗？

```
public class DatePrint {
  public static void main(String[] argv) {
    Calendar c = new GregorianCalendar(1900, 10, 11);
    System.out.println(c.get(Calendar.DAY_OF_MONTH) + " "
        + c.get(Calendar.MONTH) + ", " + c.get(Calendar.YEAR) + " "
        + c.get(Calendar.ERA));
  }
} 
```

# opencv - SURF_GPU 和 BruteForceMatcher_GPU 与 knnMatch 的奇怪结果

> ID：16167403
> 
> 赞同：5
> 
> 时间：2013-04-23T10:47:16.380
> 
> 标签：opencv, cuda, gpu, surf

OpenCV 2.4.5、CUDA 5.0

我试图将我的 SURF 匹配器从 CPU 转移到 GPU 并得到如此奇怪的结果。我将 knnMatch 和 findHomography + perspectiveTransform 与我的函数一起使用，它会检查边界框的角以获得更精确的结果。

**GPU部分：**

```
const int baseImagesSize = baseImages.size();
SURF_GPU surf(1500);
surf.extended = false; 

GpuMat keypoints_test_GPU, descriptors_test_GPU;
surf(frame, GpuMat(), keypoints_test_GPU, descriptors_test_GPU);
vector<float> descriptors_test_CPU;
surf.downloadDescriptors(descriptors_test_GPU, descriptors_test_CPU);
Mat descriptors_test_CPU_Mat(descriptors_test_CPU);
vector<Point2f> objs_corners(4);
BruteForceMatcher_GPU< L2<float> > matcher;

vector<KeyPoint> keypoints_test_CPU;
surf.downloadKeypoints(keypoints_test_GPU, keypoints_test_CPU);

for (int i = 0; i < baseImagesSize; ++i)
{
    //Get the corners from the object
    objs_corners[0] = cvPoint(0,0);
    objs_corners[1] = cvPoint( baseImages[i].cols, 0 );
    objs_corners[2] = cvPoint( baseImages[i].cols, baseImages[i].rows );
    objs_corners[3] = cvPoint( 0, baseImages[i].rows );

    //cout<<endl<<objs_corners[0]<<" "<<objs_corners[1]<<" "<<objs_corners[2]<<" "<<objs_corners[3]<<endl;
    GpuMat keypoints_tmp_GPU, descriptors_tmp_GPU;
    surf(baseImages[i], GpuMat(), keypoints_tmp_GPU, descriptors_tmp_GPU);
    GpuMat trainIdx, distance;

    vector< vector<DMatch> > matches;
    matcher.knnMatch(descriptors_test_GPU, descriptors_tmp_GPU, matches, 2);
    vector<KeyPoint> keypoints_tmp_CPU;

    surf.downloadKeypoints(keypoints_tmp_GPU, keypoints_tmp_CPU);
    std::vector<DMatch > good_matches;

    for(int k = 0; k < min(descriptors_test_CPU_Mat.rows-1,(int) matches.size()); k++) //THIS LOOP IS SENSITIVE TO SEGFAULTS
    {
        if((matches[k][0].distance < 0.6*(matches[k][1].distance)) && ((int) matches[k].size()<=2 && (int) matches[k].size()>0))
        {
            good_matches.push_back(matches[k][0]);
        }
    }

    vector<Point2f> obj;
    vector<Point2f> scene;
    vector<Point2f> scene_corners(4);
    Mat H;
    Mat img (baseImages[i]), img_matches, frame_cpu (frame);
    std::ostringstream o_stream;
    o_stream<<"Logo_save/"<<baseImagesNames[i];
    try
    {
        drawMatches( img, keypoints_tmp_CPU, frame_cpu, keypoints_test_CPU, good_matches, img_matches, Scalar::all(-1), Scalar::all(-1), vector<char>(), DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS );
        imwrite(o_stream.str(),img_matches);
    }
    catch(...)
    {
        cout<<"Error in drawMatches name: "<< baseImagesNames[i]<<endl;
    }

    if (good_matches.size() >= 4)
    {
        for( int k = 0; k < good_matches.size(); k++ )
        {
            //Get the keypoints from the good matches
            obj.push_back( (keypoints_tmp_CPU)[ good_matches[k].queryIdx ].pt );
            scene.push_back( keypoints_test_CPU[ good_matches[k].trainIdx ].pt );
        }

        cout<<good_matches.size()<<" "<<baseImagesNames[i]<<endl;
        H = findHomography( obj, scene, CV_RANSAC);
        perspectiveTransform( objs_corners, scene_corners, H);
        bool falseDetect = isSmallAngle(scene_corners);
        //cout<< falseDetect<< endl;
        if(!falseDetect)
        {
            cout<<"DETECT "<<baseImagesNames[i]<<endl;
        }

    }

    matcher.clear();
} 
```

**GPU 上的错误结果（MIN_HESSIAN==1500）：** ![冲浪(1500)](https://i.stack.imgur.com/ZPygV.jpg)

**GPU 上的错误结果（MIN_HESSIAN==400）：** ![冲浪(400)](https://i.stack.imgur.com/MVKLH.jpg)

**CPU部分：**

```
SurfFeatureDetector detector( MIN_HESSIAN );//MIN_HESSIAN==400
const int baseImagesSize = baseImages.size();
vector< vector<KeyPoint> > kp_objects(baseImagesSize);

//Calculate descriptors (feature vectors)
SurfDescriptorExtractor extractor;
vector<Mat> des_objects(baseImagesSize);
FlannBasedMatcher matcher;
//namedWindow("SURF feature detector");
vector< vector<Point2f> > objs_corners(baseImagesSize,vector<Point2f>(4));

for (int i = 0; i < baseImagesSize; ++i)
{
    detector.detect(baseImages[i], kp_objects[i]);
    extractor.compute(baseImages[i], kp_objects[i], des_objects[i]);

    //Get the corners from the object
    (objs_corners[i])[0] = cvPoint(0,0);
    (objs_corners[i])[1] = cvPoint( baseImages[i].cols, 0 );
    (objs_corners[i])[2] = cvPoint( baseImages[i].cols, baseImages[i].rows );
    (objs_corners[i])[3] = cvPoint( 0, baseImages[i].rows );
}

Mat des_image;
std::vector<KeyPoint> kp_image;
Mat image;
cvtColor(frame, image, CV_RGB2GRAY);
detector.detect( image, kp_image );
extractor.compute( image, kp_image, des_image );

for (int i = 0; i < baseImagesSize; ++i)
{
    Mat img_matches;
    std::vector<vector<DMatch > > matches;
    std::vector<DMatch > good_matches;
    std::vector<Point2f> obj;
    std::vector<Point2f> scene;
    std::vector<Point2f> scene_corners(4);
    Mat H;
    matcher.knnMatch(des_objects[i], des_image, matches, 2);

    for(int k = 0; k < min(des_image.rows-1,(int) matches.size()); k++) //THIS LOOP IS SENSITIVE TO SEGFAULTS
    {
        if((matches[k][0].distance < 0.6*(matches[k][4].distance)) && ((int) matches[k].size()<=2 && (int) matches[k].size()>0))
        {
            good_matches.push_back(matches[k][0]);
        }
    }

    //Draw only "good" matches
    std::ostringstream o_stream;
    o_stream<<"Logo_save/"<<baseImagesNames[i];
    try
    {
        drawMatches( baseImages[i], kp_objects[i], image, kp_image, good_matches, img_matches, Scalar::all(-1), Scalar::all(-1), vector<char>(), DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS );
        imwrite(o_stream.str(),img_matches);
    }
    catch(...)
    {
        cout<<"Error in drawMatches name: "<< baseImagesNames[i]<<endl;
    }

    if (good_matches.size() >= 4)
    {
        for( int k = 0; k < good_matches.size(); k++ )
        {
            //Get the keypoints from the good matches
            obj.push_back( (kp_objects[i])[ good_matches[k].queryIdx ].pt );
            scene.push_back( kp_image[ good_matches[k].trainIdx ].pt );
        }

        H = findHomography( obj, scene, CV_RANSAC);
        perspectiveTransform( objs_corners[i], scene_corners, H);
        bool falseDetect = isSmallAngle(scene_corners);
        if(!falseDetect)
        {
            cout<<"DETECT "<<baseImagesNames[i]<<endl;
        }

    }
} 
```

**CPU 上的好结果（MIN_HESSIAN==400）：** ![CPU上的好结果：](https://i.stack.imgur.com/EMzui.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:04:07.753

问题在这里解决了[主题](http://answers.opencv.org/question/12187/bug-or-not-bug-knnmatch-from-bruteforcematcher_gpu/)

在 drawMatches 调用中交换参数：

```
drawMatches(frame_cpu, keypoints_test_CPU, img, keypoints_tmp_CPU, ...); 
```

交换 keypoints_tmp_CPU 和 keypoints_test_CPU：

```
obj.push_back( keypoints_test_CPU[ good_matches[k].trainIdx ].pt );
scene.push_back( (keypoints_tmp_CPU)[ good_matches[k].queryIdx ].pt ); 
```

# facebook - 使用 FB.api 在 Facebook 上发布消息

> ID：16167404
> 
> 赞同：0
> 
> 时间：2013-04-23T10:47:19.807
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-ads-api

我用 javascript 写了一段代码，用于在 Facebook 上发布消息。我成功发布了它，但它总是显示`only me`隐私声明。我真的很想公开发布这条消息。

我尝试设置`privacy = { 'value': 'EVERYONE' };`. 仍然发布私人消息（只有我）。

我的代码是-

```
 var privacy = { 'value': 'EVERYONE' };
        var txt = 'my post to test feed post using api';
        FB.api('me/feed', 'post', { message: txt, privacy: privacy }, function (response) {
            if (!response || response.error) {
                alert(JSON.stringify(response.error));
            } else {
                alert('Post ID: ' + response.id);
            }
        }); 
```

我怎样才能公开发布它？

非常感谢您的宝贵帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:50:11.290

您在添加应用程序时是否手动设置了应用程序的隐私？如果您转到[Facebook 设置](http://www.facebook.com/settings?tab=applications)，请查看您将应用程序设置为什么。该`privacy`参数仅限于用户在其帐户上设置的内容。

例如，如果用户设置了“朋友”，但应用程序使用“公共”，则使用用户的偏好。但是，如果用户设置了“公开”，但应用程序使用“朋友”，则使用应用程序的设置，因为它比用户的设置更严格。

简而言之，将优先考虑用户和应用程序之间最严格的隐私设置。

# javascript - 当我克隆对象时，会显示一条错误消息

> ID：16167411
> 
> 赞同：0
> 
> 时间：2013-04-23T10:47:42.383
> 
> 标签：javascript, object

首先下面是我自己的javascript库的代码。

```
(function() {
    var lib = {
        elems: [],
        getElem: function() {
            var tmpElem = [];
            for (var i = 0; i < arguments.length; i++)
                tmpElem.push(document.getElementById(arguments[i]));
            this.elems = tmpElem;
            tmpElem = null;
            return this;
        },
        html: function(txt) {
            for (var i = 0; i < this.elems.length; i++)
                this.elems[i].innerHTML = txt;
            return this;
        },
        style: function(prob, val) {
            for (var i = 0; i < this.elems.length; i++)
                this.elems[i].style[prob] = val;
            return this;
        },
        addEvent: function(event, callback) {
            if (this.elems[0].addEventListener) {
                for (var i = 0; i < this.elems.length; i++)
                    this.elems[i].addEventListener(event, callback, false);
            } else if (this.elems[0].attachEvent) {
                for (var i = 0; i < this.elems.length; i++)
                    this.elems[i].attachEvent('on' + event, callback);
            }
            return this;
        },
        toggle: function() {
            for (var i = 0; i < this.elems.length; i++)
                this.elems[i].style.display = (this.elems[i].style.display === 'none' || '') ? 'block' : 'none';
            return this;
        },
        domLoad: function(callback) {
            var isLoaded = false;
            var checkLoaded = setInterval(function() {
                if (document.body && document.getElementById)
                    isLoaded = true;
            }, 10);
            var Loaded = setInterval(function() {
                if (isLoaded) {
                    clearInterval(checkLoaded);
                    clearInterval(Loaded);
                    callback();
                }
            }, 10);
        }
    };

    var fn = lib.getElem;
    for(var i in lib)
        fn[i] = lib[i];

    window.lib = window.$ = fn;
})(); 
```

以前，我用这种方式来使用我自己的库，并且工作正常。

```
$.getElem('box').html('Welcome to my computer.'); 
```

但是当更新我自己库的代码时，我添加了

```
var fn = lib.getElem;
for(var i in lib)
   fn[i] = lib[i]; 
```

像这样使用元素选择器

```
$('box').html('Welcome to my computer.'); 
```

但是当添加更新的代码来克隆 lib 对象时，问题开始出现`TypeError: $(...).html is not a function`。

现在我想像这样使用元素选择器

```
$('box').html('Welcome to my computer.'); 
```

代替

```
$.getElem('box').html('Welcome to my computer.'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:05:45.680

虽然我不知道你想用这些额外的行来实现什么，只是通过阅读代码，`lib.getElem`没有一个名为的函数`html`

`lib`做。

因此，`var fn = lib;`应该做得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:13:54.800

您创建了一个引用“getElem”的变量 fn，但由于 fn 不是您的 lib 对象上的属性，因此这意味着当 getElem 引用“this”时，它将是您可能是窗口的全局对象。

删除以下所有 3 行

```
var fn = lib.getElem;
for(var i in lib)
   fn[i] = lib[i]; 
```

然后这样做

```
window.$ = function () { return lib.getElem.apply(lib, arguments); }; 
```

这将允许 getElem 被称为 $ 但保持“lib”作为上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:22:22.853

有更多方法可以实现这一点，但根本原因在于您的`getElem()`功能：`return this;`

`$`是对该函数的引用。如果你调用`$()`它，它被称为函数而不是方法。因此`this`指代`window`，`window`当然没有`html()`功能。

你可以`return lib;`解决这个问题。

# installation - 在 ClickOnce 中发布安装代码

> ID：16167412
> 
> 赞同：0
> 
> 时间：2013-04-23T10:47:46.217
> 
> 标签：installation, clickonce

有没有办法放置安装`C#`后将执行的代码（）`ClickOnce`而不运行应用程序？
我看到了微软的“自定义安装程序”，这是一个很好的方式来表达“你为什么不创建一个安装程序应用程序”，我不想这样做（我希望我的用户有一个单 - 嗯，双击，就是这样）。
任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T19:37:05.497

ClickOnce 应用程序在安装时运行 - 因此您基本上可以引导您自己的应用程序。

您可以在主入口点的开头放置一些代码。或者，我的首选方法是，您可以创建第二个包装应用程序。您可以将包装器设置为通过 clickonce 安装的应用程序，并在其旁边安装真正的 exe。在包装器中编写您的自定义代码，然后当您使用 Process 类完成启动和真正的 exe 时。

# jsf - 将 selectonemenu 中的 selectedValue 添加到列表

> ID：16167419
> 
> 赞同：3
> 
> 时间：2013-04-23T10:48:02.277
> 
> 标签：jsf, primefaces, arraylist, managed-bean, selectonemenu

所以，这就是交易：我有一个 selectOneMenu 在我看来：

```
<p:selectOneMenu value="#{personBean.person.personStates.state}" id="estadoRg"
    converter="entityConverter">
    <f:selectItems value="#{stateBean.states}" var="state" 
        itemLabel=#{state.name}" itemValue="#{state}">
    </f:selectItems>
</p:selectOneMenu> 
```

其中 personStates 是一个包含人员的列表，说明 n 日期。是否可以将 itemValue 中的值直接添加到 personStates 列表中？（我的 PersonModel 中有一个自动构建的 addPersonState 方法）

如果没有，我该怎么做？我不想为我的 personBean 中的每个 selectOneMenu （将是 5 个）添加一个状态实例......清楚吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:29:16.750

你应该通过`selectedState`值来处理它，然后你可以为特定的人绑定它：

```
<p:selectOneMenu value="#{stateBean.selectedState}" id="estadoRg"
    converter="entityConverter">
    <f:selectItems value="#{stateBean.states}" var="state" 
        itemLabel=#{state.name}" itemValue="#{state}">
    </f:selectItems>
</p:selectOneMenu> 
```

这是如何`p:selectOneMenu`使用的方式，能够绑定选定状态和人调用方法：

```
<p:commandButton actionListener="#{personBean.matchStates}" /> 
```

和支持bean方法：

```
public void matchStates {
    FacesContext facesContext = FacesContext.getCurrentInstance();
    ElContext elContext = facesContext.getELContext();
    Object stateBean = elContext.getELResolver().getValue(elContext, null, "stateBean"). 
    State selectedState = stateBean.getSelectedState();
    personList.get(index).setState = selectedState;
} 
```

# java - Wicket 如何将双重输入验证添加到 AjaxEditableLabel

> ID：16167420
> 
> 赞同：0
> 
> 时间：2013-04-23T10:48:12.620
> 
> 标签：java, wicket

使用 ajaxEditableLabel 时，我无法为检票口中的双精度添加输入验证。
这是我的代码：（项目是来自列表视图的列表项）

```
item.add(new AjaxEditableLabel("myDouble", new Model(myObject.getMyDouble())) {
                @Override
                protected void onSubmit(AjaxRequestTarget target) {
                    super.onSubmit(target);
                    myObject.setMyDouble(new Double(getEditor().getInput())); //here it fails to read the input when a use enters a wrong number
                   //Do something when it's a double
                }
            }); 
```

**如何向该组件添加验证器以检查这是否为双精度值？**

目前我正在使用：

```
 Double.parseDouble(myval); 
```

使用 try catch... 但这也需要更改输入字符串，因为 , 和 。

*应该有一个检票口方式来验证这个输入？*

编辑**：也许我必须将 NumericTextField 添加到此组件，但我不明白如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:57:14.090

我通过将 getInput 更改为**getConvertedInput();解决了** 这是我解决它的旧方法。使用**getModelObject()**更好，因为 Type 设置为 Double 这更好。

我还将类型更改为 Double。**.setType(Double.class**

```
item.add(new AjaxEditableLabel("myDouble", new Model(myObject.getMyDouble())) {
            @Override
            protected void onSubmit(AjaxRequestTarget target) {
                super.onSubmit(target);
                myObject.setMyDouble((Double)getEditor().getModelObject())); //changes here!!!
               //Do something when it's a double
            }
        }.setType(Double.class)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:03:20.490

检查这个：

爪哇：

```
public class MyPage extends WebPage {

    private List<Double> list = Arrays.asList(2013.0, 100.500);

    public MyPage() {

        final FeedbackPanel feedback = new FeedbackPanel("feedback");
        feedback.setOutputMarkupId(true);
        add(feedback);

        ListView<Double> items = new ListView<Double>("items", new PropertyModel(this, "list")) {
            @Override
            protected void populateItem(ListItem<Double> item) {
                item.add(new AjaxEditableLabel("item", item.getModel()) {
                    @Override
                    protected void onSubmit(AjaxRequestTarget target) {
                        System.out.println(Arrays.toString(list.toArray()));
                        target.add(feedback);
                        super.onSubmit(target);
                    }

                    @Override
                    protected void onError(AjaxRequestTarget target) {
                        target.add(feedback);
                        super.onError(target);
                    }
                }.add(new IValidator<Object>() {
                    @Override
                    public void validate(IValidatable<Object> validatable) {
                        String in = String.valueOf(validatable.getValue());
                        try {
                            Double.parseDouble(in.replace(".", ","));
                        } catch (Exception ignore) {
                            try{
                                Double.parseDouble(in.replace(",", "."));
                            }catch (Exception e){
                                ValidationError error = new ValidationError(String.format("`%s` is not a Double", in));
                                validatable.error(error);
                            }
                        }
                    }
                }));
            }
        };
        add(items);
    }
} 
```

标记：

```
<div wicket:id="feedback"/>
<ul wicket:id="items">
    <li wicket:id="item"></li>
</ul> 
```

* * *

上面的验证器仅用于演示，在实际代码中我建议创建一个单独的类（不是匿名类）。

# java - 在压缩字符串中的特定索引处查找字符的最佳方法

> ID：16167421
> 
> 赞同：3
> 
> 时间：2013-04-23T10:48:13.620
> 
> 标签：java

我知道我们可以通过以下方式做到这一点

1.  字符串生成器
2.  使用子字符串

但我正在寻找一种方法，我有一个压缩的字符串说`a5b4c2`等，这意味着`a`5 次`b`是 4 次等，所以字符串实际上`aaaaabbbbcc`是这样的。

所以索引 2 处的 char 应该返回 a，索引 6 处的 char 应该返回 b。

什么是最好的方法？

*我的问题更多关于解压缩 String 的最佳方法是什么？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:50:33.490

> 我的问题更多是关于处理这个压缩字符串，而不是在特定索引处查找字符。

解压字符串，直到得到你想知道的索引。或者您可以解压缩整个字符串并将其缓存。

> 什么是最好的方法？

没有任何更具体的要求，我相信最好的方法是你能想到的最简单的方法。

* * *

我会依次解析每对字母和数字，将索引减少该数字，如果剩余索引 < 0，则您拥有所需的字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:54:31.187

检查您要搜索的索引，然后开始累加字符数。每次添加时，检查索引是否在前一个区间和当前区间内。如果是，你已经找到你的角色是什么，否则再次添加。

例如，给定您的 string 的工作流程`a5b4c2`，如果您想要索引 7 处的字符，可能是这样的：

```
 current position: 0
   index we are looking for: 7
   add first character's count: 0+5 = 5
   does 7 fall within 0 and 5? no, add again
   current position: 5
   add second character's count: 5+4 = 9
   does 7 fall within 5 and 9? yes, so our character must be 'b'. 
```

我不确定这是否比解压缩字符串并仅使用`charAt()`或其他方法更有效或更快，这只是一种不同的处理方式。

编辑：由于问题更多是关于如何解压缩字符串，因此您可以使用 a`StringBuilder`并使用`for`循环将正确的字符编号附加到您的字符串......对我来说听起来是最简单的方法。

# cakephp-2.0 - 如何在 Cakephp 2.x 中向 Jshelper 添加 2 个回调

> ID：16167424
> 
> 赞同：1
> 
> 时间：2013-04-23T10:48:26.967
> 
> 标签：cakephp-2.0, cakephp-2.1

我想在 Js->submit 中添加 2 个回调，我的第一个返回 true 或 false。继续说我想采取行动。我的意思是如果它是真的，那么它会继续行动，否则在那一刻停止。

我已经尝试过但它没有接受 2 回调。请帮忙。

```
echo $this->Js->submit("Apply", 
array(
     'id' => 'submitForm', 'div' => false, 'class' => 'general_button', 'style' => array('float:none;', 'margin: 10px;'),
     'url' => array(
                 'controller' => 'categories', 'action' => 'index', 'field' => $search_term, 'value' => $search_value, 'parentId' => $parentId
              ),
     'update' => '#listID', 
     'confirm' => 'Are you sure you want to apply action to selected records ??',
     'before' => $this->Js->event('click', 'return checkboxCount();', false),
     'before' => $this->Js->get('#loaderID')->effect('fadeIn', array('buffer' => false)),
     'complete' => $this->Js->get('#loaderID')->effect('fadeOut', array('buffer' => false)),
     )
); 
```

我将如何继续它。作为函数`return checkboxCount();`返回真或假。但在这种情况下，我的函数甚至没有被调用。

# iphone - 如何检查使用了哪个 segue

> ID：16167425
> 
> 赞同：9
> 
> 时间：2013-04-23T10:48:26.543
> 
> 标签：iphone, ios, objective-c, uistoryboardsegue

我有两个导致相同的segue `viewController`。有 2 个按钮`viewController`使用 2 个 segue 连接到相同的按钮。在那`viewController`我需要检查哪个按钮被点击了。所以实际上我需要检查使用/执行了哪个segue。如何在 viewControllers 类中检查这一点？我知道有`prepareForSegue`方法，但我不能将其用于我的目的，因为我需要将`prepareForSegue`2 个按钮所在的类中，我不希望它在那里，但我想要它在`viewControllers`类中，因为我需要访问并在该类中设置一些变量。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T10:52:37.203

您需要在第一个视图控制器的 prepareforsegue 方法中设置第二个视图控制器的变量。这是这样做的：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:segueIdentifier1])
    {
        SecondViewController *secondVC = (SecondViewController *)segue.destinationViewController;
        if(sender.tag == ...) // You can of course use something other than tag to identify the button
        {
            secondVC.identifyingProperty = ...
        }
        else if(sender.tag == ...)
        {
            secondVC.identifyingProperty = ...
        }
    }
} 
```

然后您可以在第二个 vc 中检查该属性以了解您是如何到达那里的。如果您在情节提要中为 2 个按钮创建了 2 个 segue，则仅 segue 标识符就足以设置相应的属性值。然后代码变成这样：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:segueIdentifier1])
    {
        SecondViewController *secondVC = (SecondViewController *)segue.destinationViewController;
        secondVC.identifyingProperty = ...
    }
    else if([segue.identifier isEqualToString:segueIdentifier2])
    {
        SecondViewController *secondVC = (SecondViewController *)segue.destinationViewController;
        secondVC.identifyingProperty = ...
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T10:52:05.407

因此，首先您需要直接在故事板中设置您的 segues 标识符，或者使用该`performSegueWithIdentifier`方法通过您的代码设置。独立于您选择的方式，您的视图控制器将触发以下方法，因此您需要覆盖它以了解哪个`segue`发送消息，您可以这样做：

```
 -(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {    
        if ([segue.identifier isEqualToString:@"ButtonSegueIdentifierOne"]) {
            // button 1
        }
        if ([segue.identifier isEqualToString:@"ButtonSegueIdentifierTwo"]) {
            // button 2
        }
} 
```

# java - 如何在特定文件夹的jsp页面中显示所有图像？

> ID：16167429
> 
> 赞同：1
> 
> 时间：2013-04-23T10:48:42.357
> 
> 标签：java, jsp, liferay

我有一个文件夹，其中包含多个图像，我想在我的 jsp 页面中显示所有图像。我尝试在我的 jsp 页面中使用以下代码。

```
<img src="<%=request.getContextPath() %>/uploadFolder/poll1.jpg"
      width="114" height="110" style="float: left;">
<h1>
   Images
</h1> 
```

我在uploadFolder中有超过10张图片我想在jsp页面中显示所有图片请帮助我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:09:01.803

在您的 jsp 页面上使用以下代码：

```
File folder = new File("d:\\Reports"); //your path
File[] listOfFiles = folder.listFiles();

for (int i = 0; i < listOfFiles.length; i++)
{
    if (listOfFiles[i].isFile())
    { 
```

在html页面中：

```
<a href="servlet&filename=<%=listOfFiles[i].getName()%>">Download</a> 

}} 
```

我已经使用`<a>`标签展示了您可以在表格或`<img>`标签中显示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:02:16.453

构建要显示的文件名列表。

```
List imageUrlList = new ArrayList();  
File imageDir = new File("/myapp/images");  
for(File imageFile : imageDir.listFiles()){  
  String imageFileName = imageFile.getName();  

  // add this images name to the list we are building up  
  imageUrlList.add(imageFileName);  

}  
request.setAttribute("imageUrlList", imageUrlList); 
```

然后在 jsp 上`<img>`为每个文件显示一个标签。

```
<c:forEach var="img" items="${imageUrlList}">  
  <img >  
</c:forEach> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T10:58:47.330

```
File f = new File("/uploadFolder/");

File[] list = f.listFiles(); 
```

您将获得上传文件夹中所有文件的列表 -

你只需要像这样循环遍历它 -

```
for(int i = 0 ; i < list.length ; i++){
  File jpg = list[i]; 
  // use this file object to create img tag's in your jsp
} 
```

[有关文件](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)的更多信息

# asp.net-mvc - 误解 mvc 默认绑定

> ID：16167430
> 
> 赞同：0
> 
> 时间：2013-04-23T10:48:49.860
> 
> 标签：asp.net-mvc, model-binding, jquery-chosen

我有 multiselect jquery plagin ( [Choosen](http://harvesthq.github.io/chosen/) )，当我在“Multiple Select”模式下使用它时，我希望在控制器中使用下一个值：

```
 posted string = 'value1,value2...' 
```

真的有

```
 posted string = 'value2' 
```

只有当我直接引用 FormCollection 时，我才会得到如下预期值：

```
 [HttpPost]
    public ActionResult TagSearech(/*string tagSelect*/FormCollection c)
    {
      // only one value here
      // string[] names = tagSelect.Split(',');

      // as expected: value1,....
       string expectedValue = c['tagSelect'];

        return View();
    } 
```

我无法理解可能导致这种行为的原因。

**编辑**

这是视图：

```
 @using (Html.BeginForm("TagSearech", "Tag"))
    {
       @Html.DropDownList("tagSelect", Model, new { @class = "chzn-select",  data_placeholder = "tag names", multiple = "" })
       <input  type="submit"/>
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:56:09.763

MVC 将尝试将 URL 上的输入数据绑定到模型中。我还没有看到 Chosen.js 如何将数据发送回服务器，但本质上它是以错误的格式输入的，因此 MVC 将它看到的第一个元素绑定到字符串 Model。

FormsCollection 检索在 URL 中发布的所有数据，这就是您可以在那里看到所有选定值的原因。

您是否尝试将传入模型从 string 更改为 string[]，并查看是否所有项目都绑定到数组？

# python - 如何使用 urllib2 发送数据和自定义标头

> ID：16167431
> 
> 赞同：0
> 
> 时间：2013-04-23T10:49:04.957
> 
> 标签：python, json, urllib2, urllib

您好我正在使用 urrlib2 将一些数据和自定义标头发送到链接。我收到 500 内部服务器错误。我已经联系了该服务，他们说数据（json 数据）是正确的，但是我的 python 代码中有一些错误。我究竟做错了什么 ？以下是代码。

```
import urllib2,urllib
import json

PREPAYMENT_URL = "https://services.gharpay.in/rest/GharpayService/" 
PREPAYMENT_USERNAME = "somename"
PREPAYMENT_PASSWORD = "somepass"

data = {
 "customerDetails":{
              "address": "ads",
              "contactNo": "9663924147",
              "email": "a@c.com",
              "firstName": "akash",
              "lastName": "deshpande",
              "prefix": "Mr."
            },

"orderDetails" : {
              "pincode": "411036",
              "clientOrderID": "21234",
              "deliveryDate": "13-10-2013",
              "orderAmount": "123",
              "clientComments": "please be carefull",
              "paymentMode": "Cash",
              "productDetails": {
              "productID": "21334",
              "productQuantity": "1",
              "unitCost": "123",
              "productDescription": "tshirt"
              },
              "templateID": ""
             },

}

def create(request): 

    function = 'createOrder'
    url = PREPAYMENT_URL
    url = url+ function
    headers= {'username':PREPAYMENT_USERNAME,'password':PREPAYMENT_PASSWORD,'Content-type':'application/json'}
    data1 = urllib.urlencode(data)
    req = urllib2.Request(url,data1,headers)
    try:
        contents = urllib2.urlopen(req).read()
    except urllib2.HTTPError as e:
        error_message = e.read()
        print error_message # this error message is being printed. It is showing 500 error. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:49:51.533

你的代码是完美的，除了一个很小的细节：

> 标头应该是**Content-Type**，而不是**Content-type**。

也许尝试更改此标题并让我知道它是否有效！

# matlab - matlab中原始心电信号的QRS检测（峰值）

> ID：16167433
> 
> 赞同：2
> 
> 时间：2013-04-23T10:49:09.103
> 
> 标签：matlab, signal-processing

我想找到原始心电图信号的峰值，以便计算每分钟的心跳次数（bpm）。我在 matlab 中编写了一个代码，我附在下面。在下面的代码中，我无法正确找到阈值点，这将帮助我找到峰值，从而找到 bpm。

```
%input the signal into matlab

[x,fs]=wavread('heartbeat.wav');
subplot(2,1,1)
plot(x(1:10000),'r-')
grid on

%lowpass filter the input signal with cutoff at 100hz
h=fir1(30,0.3126);     %normalized cutoff freq=0.3126
y=filter(h,1,x);

subplot(2,1,2)
plot(y(1:10000),'b-')
grid on

% peaks are seen as pulses(heart beats)
beat_count=0;
for p=2:length(y)-1
    th(p)=abs(max(y(p)));
    if(y(p) >y(p-1) && y(p) >y(p+1) && y(p)>th(p))
        beat_count=beat_count+1;
    end
end

N = length(y);
duration_seconds=N/fs;
duration_minutes=duration_seconds/60;
BPM=beat_count/duration_minutes;
bpm=ceil(BPM); 
```

请帮助我，因为我是 matlab 新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:24:08.800

我建议更改代码的这一部分

```
beat_count=0;
for p=2:length(y)-1
    th(p)=abs(max(y(p)));
    if(y(p) >y(p-1) && y(p) >y(p+1) && y(p)>th(p))
        beat_count=beat_count+1;
    end
end 
```

这绝对是有缺陷的。我不确定您的逻辑在这里，但是怎么样。我们正在寻找峰值，但只有高峰值，所以首先让我们设置一个阈值（您必须将其调整为合理的数字）并剔除低于该值的所有内容以消除较小的峰值：

```
th = max(y) * 0.9; %So here I'm considering anything less than 90% of the max as not a real peak... this bit really depends on your logic of finding peaks though which you haven't explained
Yth = zeros(length(y), 1);
Yth(y > th) = y(y > th); 
```

好的，所以我建议您现在绘制 y 和 Yth 以查看该代码的作用。现在要找到峰值，我的逻辑是我们正在寻找局部最大值，即函数的一阶导数从正变为负的点。因此，我将通过查找信号上每个连续点之间的差异来找到一阶导数的非常简单的数值近似：

```
Ydiff = diff(Yth); 
```

不，我想找到信号从正到负的位置。所以我要让所有的正值都等于 0，所有的负值都等于 1：

```
Ydiff_logical = Ydiff < 0; 
```

最后我想找到这个信号从零变为一的位置（但不是相反）

```
Ypeaks = diff(Ydiff_logical) == 1; 
```

现在计算峰值：

```
sum(Ypeaks) 
```

请注意，由于使用 diff 来绘制目的，我们应该在 Ypeaks 的任一侧填充一个假，所以

```
Ypeaks = [false; Ypeaks; false]; 
```

好的，所以那里有很多 matlab，我建议您逐行运行，并通过绘制每行的结果以及双击 matlab 工作区中的变量来检查变量以了解发生了什么每一步。

**示例：（**`PeakSig`取自[http://www.mathworks.com/help/signal/ref/findpeaks.html](http://www.mathworks.com/help/signal/ref/findpeaks.html)的信号）并绘制：

```
plot(x(Ypeaks),PeakSig(Ypeaks),'k^','markerfacecolor',[1 0 0]); 
```

![在此处输入图像描述](https://i.stack.imgur.com/TzX2A.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T11:24:20.003

你怎么看内置

```
findpeaks(data,'Name',value) 
```

功能？您可以选择不同的峰值检测逻辑：

```
'MINPEAKHEIGHT'
'MINPEAKDISTANCE'
'THRESHOLD'
'NPEAKS'
'SORTSTR' 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-23T21:38:32.130

你知道，QRS 波群并不总是具有最大幅度，对于病理性心电图，它可以表现为几个轻微的振荡而不是一个高幅度的峰值。

因此，您可以尝试一种由我测试过的好的算法：假设检测标准是信号的高绝对变化率，在给定间隔内平均。

算法： - 50/60 Hz 滤波器（例如，对于 20 毫秒的 50 Hz 滑动窗口就可以了） - 自适应 hipass 滤波器（用于基线漂移） - 找到信号的一阶导数 x' - fing 平方导数 (x')^2 - 应用具有 QRS 复合波宽度的滑动平均窗口 - 大约 100-150 毫秒（您会得到一些具有 QRS 宽度的“矩形”信号） - 使用简单的阈值（例如，前 3 秒的最大值的 1/3）确定近似位置或 R - 在源 ECG 中找到该 R 位置 +-100 毫秒内的局部最大值。

但是，您仍然必须消除伪影和异常值（例如电涌，当电极连接失败时）。

此外，您还可以从本书中找到很多有用的信息：“RM Rangayyan - 生物医学信号分析”

# postgresql - Postgresql：使用窗口函数对组大小进行分组

> ID：16167434
> 
> 赞同：6
> 
> 时间：2013-04-23T10:49:12.343
> 
> 标签：postgresql, window-functions

Postgresql 中是否有一种方法可以编写一个查询，该查询根据具有限制的列对行进行分组，而不会丢弃其他行。

假设我有一个包含三列的表，其中`id, color, score`包含以下行

```
1 red 10.0
2 red 7.0
3 red 3.0
4 blue 5.0
5 green 4.0
6 blue 2.0
7 blue 1.0 
```

我可以通过以下查询使用窗口函数获得基于颜色的分组

```
SELECT * FROM (
    SELECT id, color, score, rank()
    OVER (PARTITION BY color ORDER BY score DESC)
    FROM grouping_test
) AS foo WHERE rank <= 2; 
```

结果

```
 id | color | score | rank 
 ----+-------+-------+------
   4 | blue  |   5.0 |    1
   6 | blue  |   2.0 |    2
   5 | green |   4.0 |    1
   1 | red   |  10.0 |    1
   2 | red   |   7.0 |    2 
```

丢弃排名> 2的项目。但是我需要的是这样的结果

```
1 red 10.0
2 red 7.0
4 blue 5.0
6 blue 2.0
5 green 4.0
3 red 3.0
7 blue 1.0 
```

没有丢弃的行。

**编辑：** 为了更准确地了解我需要的逻辑：

1.  给我得分最高的那一行
2.  具有相同颜色和最高分的下一行
3.  其余项目中得分最高的项目
4.  与 2\. 相同，但对于 3\. 中的行
    ...

只要找到相同颜色的对就继续，然后按分数降序排列剩下的。

可以在[此处](http://sqlfiddle.com/#!12/bbcfc/95)找到测试表的导入语句。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:19:13.583

可以使用两个嵌套的窗口函数来完成

```
SELECT
  id
FROM (
  SELECT
    id,
    color,
    score,
    ((rank() OVER color_window) - 1) / 2 AS rank_window_id
  FROM grouping_test
  WINDOW color_window AS (PARTITION BY color ORDER BY score DESC)
) as foo
WINDOW rank_window AS (PARTITION BY (color, rank_window_id))
ORDER BY
  (max(score) OVER rank_window) DESC,
  color; 
```

`2`是组大小的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:05:18.800

您可以这样做`ORDER BY (rank <= 2) DESC`以获取 rank<=2 高于一切的行：

```
SELECT id,color,score FROM (
SELECT id, color, score, rank()
OVER (PARTITION BY color ORDER BY score DESC),
max(score) OVER (PARTITION BY color) mx
FROM grouping_test
) AS foo 
ORDER BY 
  (rank <= 2) DESC, 
  CASE WHEN rank<=2 THEN mx ELSE NULL END DESC,
  id; 
```

[http://sqlfiddle.com/#!12/bbcfc/109](http://sqlfiddle.com/#!12/bbcfc/109)

# c# - 从 C# EPL 画圈？

> ID：16167438
> 
> 赞同：0
> 
> 时间：2013-04-23T10:49:29.880
> 
> 标签：c#, epl

无法使用 EPL 语言绘制圆形以从标签打印机打印。我正在使用 c# 做一个程序，它通过网络与标签打印机进行通信，一切正常，但找不到画圆的命令。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:52:45.813

在这里，您可以了解如何在 C# 中为打印机绘制多个形状，其中某些功能不适用于 EPL 打印机。

[http://www.neodynamic.com/Products/Help/ThermalLabel2.0/items_shape.htm](http://www.neodynamic.com/Products/Help/ThermalLabel2.0/items_shape.htm)

# php - 导入 phing 任务文件时出错，但该文件存在

> ID：16167439
> 
> 赞同：0
> 
> 时间：2013-04-23T10:49:31.373
> 
> 标签：php, pear, phing

2.4.12 构建。我已将 phing 文件放在 /opt/phing 中，并在 .bashrc 中添加了行。

```
export PHP_COMMAND=/usr/bin/php 
export PHING_HOME=/opt/phing 
export PHP_CLASSPATH=${PHING_HOME}/classes 
export PATH=${PATH}:${PHING_HOME}/bin 
```

我能够运行基本的 phing 脚本，但是当我使用 svnExportDiffTask 时，它会抛出错误。

```
[PHP Error] include_once(phing/tasks/ext/svn/SvnExportDiffTask.php):
            failed to open stream: No such file or directory
            [line 1057 of /opt/phing/classes/phing/Phing.php]
[PHP Error] include_once(): Failed opening 'phing/tasks/ext/svn/SvnExportDiffTask.php'
            for inclusion (include_path='/opt/phing/classes:.:/home/prateek/work/bitnami/php/lib/php') 
            [line 1057 of /opt/phing/classes/phing/Phing.php]
  [foreach] Error importing phing/tasks/ext/svn/SvnExportDiffTask.php
Execution of target "getcode" failed for the following reason:
/home/prateek/work/build/build.xml:31:35:
Execution of the target buildfile failed. Aborting.

BUILD FAILED
/home/prateek/work/build/build.xml:31:35:
Execution of the target buildfile failed. Aborting. 
```

谁可以帮我这个事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:42:56.037

通过 PEAR 安装程序安装 phing，以便自动安装所有依赖项。它将解决您的大部分问题。

# javascript - Jquery 1.9.1、CSS 和谷歌地图：“显示：无”问题

> ID：16167440
> 
> 赞同：1
> 
> 时间：2013-04-23T10:49:32.687
> 
> 标签：javascript, jquery, jquery-ui, google-maps, css

我正在努力让谷歌地图在我的网站上运行。问题是地图显示如下：

![我网站上的谷歌地图（挪威语言变量）](https://i.stack.imgur.com/irl6r.jpg)

据我所知，在显示 div 后重新调整对象大小是一个已知问题。（从更改`display: none;`为`display: block;`）

我在`display: none;`封装选项卡的 div 上使用 JQueryUI 选项卡和 a 。

我确实尝试删除选项卡并在开始时将所有选项卡显示为一个块，然后进行更改`window.load`- 但是在加载后让手表自行移动是相当难看的。

这个[JSFiddle](http://jsfiddle.net/eZ2e3/5/)演示了我想要它的方式（简化），尽管它有缺陷，因为我无法使其正常工作（它根本没有显示地图）。

是否有其他方法可以做到这一点 - 还是我必须为我的地图功能找到不同类型的布局？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:40:14.237

我发现唯一可靠的方法是用画布初始化地图`display:block`，然后隐藏它。如果这是在 $(function() {...}) 结构中完成的，那么在隐藏之前您不应该看到地图。

您还可以尝试在显示画布后最初隐藏画布并在第一次需要时初始化地图。

无论哪种方式，只有在其画布可见时才初始化地图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T06:11:10.313

采用

```
map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);  

$("#map_canvas").css("height", $(window).height()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-20T22:00:40.193

当您在地图初始化后操作任何地图的外部 div 时，就会发生这种情况。因此，要解决此问题，您必须在显示所有外部 div 后初始化地图。

所以只需在最后初始化地图：

```
$mapsOuterDivs.slideToggle(700);
setTimeout(function(){
    initializeGoogleMap();
},300); 
```

# ios - 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[Home isEqualToString:]

> ID：16167442
> 
> 赞同：0
> 
> 时间：2013-04-23T10:49:47.780
> 
> 标签：ios, objective-c, nsmutablearray, nsdictionary, uipickerview

我正在从 Web 服务获取数据：

```
//temp1 is NSDictionary
//responseArr1 is NSMutableArray
for(temp1 in responseArr1)......., 
{
     quesTxt = [[temp1 objectForKey:@"question_text"] stringByReplacingOccurrencesOfString:@"%PROFILENAME%" withString:del.onlyFirstName];

     quesID = [temp1 objectForKey:@"idlife_stage_question"];

     Home *objHome=[[Home alloc] init];

     objHome.homeQuesTxt = quesTxt;
     objHome.homeQuesID = quesID;

     [quesArray addObject:objHome];

     //[quesArray addObject:[[temp1 objectForKey:@"question_text"] stringByReplacingOccurrencesOfString:@"%PROFILENAME%" withString:del.onlyFirstName]];//this works fine

        } 
```

我尝试在选择器视图中填充的所有日期都会出现异常。

选择器视图委托：

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view {
    UILabel *retval = (id)view;
    if (!retval) {
        retval= [[UILabel alloc] initWithFrame:CGRectMake(0.0f, 0.0f, [pickerView rowSizeForComponent:component].width, [pickerView rowSizeForComponent:component].height)];
    }

    retval.text = [quesArray objectAtIndex:row];.........// **EXCEPTION HERE**...

    retval.font = [UIFont boldSystemFontOfSize:14];
    retval.numberOfLines = 3;

    return retval;
} 
```

我的网络服务示例：

```
{
        "idlife_stage_question" = 35;
        "life_stage_idlife_stage" = 1;
        "profile_idprofile" = 0;
        "question_text" = "When %PROFILENAME% first smiled?";..//%PROFILENAME% replaces with user name which i have
        sequence = 34;
    } 
```

**Home 是 NSObject 的子类**

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:59:50.700

```
retval.text = [quesArray objectAtIndex:row]; 
```

在这里您正在访问`quesArray`.

这是：`[quesArray addObject:objHome];`

而 objHome 是：`Home *objHome=[[Home alloc] init];`

所以你的错误就在这里，你试图将对象放入`retval`期望`NSString`.

**您需要使用以下内容：**

```
retval.text = [[quesArray objectAtIndex:row] homeQuesTxt]; //or anyother property that you want to show in text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:01:02.067

```
retval.text = [quesArray objectAtIndex:row]; 
```

你`retval.text`是一个字符串，你正在为它分配一个对象

你可以这样做

```
 Home  *newHome=[quesArray objectAtIndex:row];

  retval.text=newHome.homeQuesTxt; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:03:26.197

`quesArray`填充有`Home`对象

```
Home *home = quesArray[row];
retval.text = home.homeQuesTxt; 
```

# mysql - mySQL用子查询慢计数主键

> ID：16167452
> 
> 赞同：0
> 
> 时间：2013-04-23T10:50:17.573
> 
> 标签：mysql, sql, count

以下查询需要 5.5 秒。由于这是一个简单的主键计数，并且两个表都有 <5000 条记录，我很惊讶它有多慢。有什么办法可以提高性能吗？

```
SELECT COUNT(*) 
FROM users 
WHERE (SELECT COUNT(*) 
       FROM clients 
       WHERE userID=users.id)=0 
```

我正在计算没有客户的用户数量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:00:29.323

试试这个查询

```
SELECT 
   COUNT(*) 
FROM 
   users 
WHERE NOT EXISTS 
   (SELECT 
      userID 
   FROM 
      clients 
   WHERE 
      userID=users.id) 
```

或者你可以试试这个

```
SELECT 
   count(*) 
FROM 
   users u
LEFT JOIN  
   clients c
ON 
   u.id = c.userId
WHERE 
   c.userId IS null 
```

`id`在列上创建索引

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T10:57:39.987

试试这个：

```
 SELECT COUNT(*) FROM users u 
  left join clients c
  on u.id = c.userID 
  where u.id not in (select userID from clients) 
```

[**在这里演示**](http://sqlfiddle.com/#!2/d83b1/6)

# svn - SVN文件夹删除

> ID：16167453
> 
> 赞同：1
> 
> 时间：2013-04-23T10:50:18.733
> 
> 标签：svn

我想知道如何在 Windows 环境中从 svn 存储库中删除文件夹/项目。我已经使用 SVN 管理创建了文件夹和项目，但这里没有删除/删除的选项。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:54:46.290

使用此示例：

```
svn delete http://www.yourrepository.com/svn/folder --message "Deleting" 
```

如果你使用 TortoiseSVN：[删除、移动和重命名](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-rename.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:58:51.523

没有选项可以从管理面板中删除文件夹，您可以尝试从`svn client`类似`Rapid SVN`，

右键单击右侧选项卡中的文件夹，然后将出现名为“删除”的选项并选中“强制删除”复选框，然后单击“确定”按钮。

# facebook - Facebook 分享自定义描述是否可跟踪？

> ID：16167459
> 
> 赞同：0
> 
> 时间：2013-04-23T10:50:36.677
> 
> 标签：facebook, facebook-social-plugins

点击页面的分享按钮后，是否可以获得访问者在 Facebook 上分享页面的描述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:33:04.487

不幸的是，无法查看用户在分享您的页面或其他内容时输入的描述。如果共享是公开的，那么如果您知道用户的 facebook ID，您将能够检索共享文本，但这需要 Facebook API 调用。

# javascript - 解析错误堆栈

> ID：16167460
> 
> 赞同：2
> 
> 时间：2013-04-23T10:50:43.523
> 
> 标签：javascript, jquery

我通过这样的代码发现错误：

```
...
catch(error){
  ... error.stack ...
}
... 
```

`error.stack`据我所知，这是一个字符串。是否有一个 jQuery 函数可以将其解析为文件名、行、函数的行数组？`stack`或者，有没有直接给出数组的替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:55:02.900

它不是特定于 jquery 的，但请查看[stacktrace.js](http://stacktracejs.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:10:58.790

我不是专家，但试图回答

```
var stack=error.stack;
for(i=0;i<stack.Length;i++){
var arrstack +=stack.split(" ");
} 
```

# java - 对字符串变量执行数学运算是个好主意吗？

> ID：16167461
> 
> 赞同：1
> 
> 时间：2013-04-23T10:50:45.040
> 
> 标签：java, string, bigdecimal

将数值保存在`String`对象中的变量中（也传递方法并以字符串形式返回），然后只对其进行转换`BigDecimal`和操作，这是一个好主意吗？

在方法签名和 pojo 中使用的意图是操作可以在实现者`double`喜欢的任何其他类型中执行

例如

```
public String operate(String value1, String value2){
    BigDecimal val1 = new BigDecimal(value1);
    BigDecimal val2 = new BigDecimal(value2);
    return val1.multiply(val2).toString();
} 
```

或者它只是一个开销？

会不会影响性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:52:40.700

从一种格式转换为另一种格式总是开销。以格式存储它，以便您可以对其执行所有操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:55:09.930

不知道为什么这是个好主意。“ [Stringly Typed](http://www.codinghorror.com/blog/2012/07/new-programming-jargon.html) ”并不是一件好事。是的，BigDecimal 保存了一个更紧凑的数字，作为字节数组，并且还进行了优化以在一个值中保存小值`long`。字符串将是两字节字符十进制表示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T11:03:38.763

从两个角度来看，这是一个坏主意：

1.  所有操作都需要您从/到字符串表示形式进行转换
2.  内存开销是巨大的。

考虑这个例子。一个普通`int`的内存占用4个字节。`int`表示为 a最多可`String`占用 72 个字节：

*   16 字节——对象开销，
*   4 个字节——缓存的哈希码
*   8 个字节——对 char 数组的引用
*   24 + 2 * 10 字节——字符数组本身（最多 10 位）
*   最多 8 个字节用于填充

它是原始表示形式的 18 (!) 倍`int`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T10:55:25.153

这样做有很多问题。首先，有创建和销毁额外对象的开销，至少一个永远转换为/从字符串。根据这种情况发生的次数，它可能很重要。其次，每次从字符串转换为数字并返回时，都存在解析问题等风险。最后，您绕过 Java 提供的关于类型转换等的任何内置检查和平衡。

我个人的意见是，您应该尽可能减少转换，并尽可能将数据存储在最具体的对象/基元中。我认为这使代码更易于阅读，更易于维护，并且在出现错误时更易于排除故障。

# angularjs - Angular.js 删除带参数的资源

> ID：16167463
> 
> 赞同：25
> 
> 时间：2013-04-23T10:50:46.923
> 
> 标签：angularjs

我的 rest api 接受对以下 url 的 DELETE 请求

```
/api/users/{slug} 
```

因此，通过将删除发送给指定的用户（slug），该用户将被删除。这是服务代码：

```
angular.module('UserService',['ngResource']).factory('User', function($resource){
    var User = $resource('/api/users/:id1/:action/:id2', //add param to the url
    {}, 
    { 
        delete_user: {
            method: 'DELETE',
            params: {
                id1:"@id"
            }
        },
        update: {
            method: 'PUT',
            params: {
                id1:"@id"
            }
        }
    }); 

    return User;
}); 
```

我通过调用删除功能

```
user.$delete_user({id:user.id}, function(){}, function(response){}); 
```

但是，请求似乎发送到了错误的 url。

```
/api/users?id=4 
```

所以实际上缺少参数，结果我得到一个 405 Method not allowed。有没有机会以我的 api 风格发送删除请求？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-23T11:17:11.100

`params`是您操作中默认请求参数的对象。如果你想要 url 参数，你必须在第二个参数中指定它们，如下所示：

```
angular.module('UserService',['ngResource']).factory('User', function($resource){
    var User = $resource('/api/users/:id1/:action/:id2', //add param to the url
    {id1:'@id'},
    { 
        delete_user: {
            method: 'DELETE'
        }
    }); 

    return User;
}); 
```

这适用于：

```
// user has id
user.$delete_user(function(){
  //success
},function(){
  // error
}); 
```

或者

```
var data = {id:'id_from_data'};
User.delete_user({},data); 
```

或者

```
var params = {id1:'id1_from_params'};
User.delete_user(params); 
```

我制作了一个**[plnkr 示例](http://plnkr.co/edit/xy366u9Bm9ksXFG33E0L?p=preview)**- 您必须打开控制台以验证 DELETE 请求是否正确。

请参阅[Angular 资源文档](http://docs.angularjs.org/api/ngResource.%24resource)中的*parameterDefaults*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-12T09:43:20.133

我在使用服务添加/删除/更新类别时遇到了这个问题。虽然传入参数以获得它工作正常，但是当删除它时给我一个 ?id=1234 而不是 api/resource/1234

我通过将默认参数设为字符串来解决此问题。

///控制器

```
Service.delete({categoryId:id}, function(resp){
  console.log(resp)//whatever logic you want in here 
}); 
```

//服务

```
$resource('api/resource/:categoryId', {"categoryId":"@categoryId"}, {
   query:{method:"GET"},
   delete:{method:"DELETE"},

}); 
```

应该可以工作并且生成的 url 将是，最初我在默认参数中有 categoryId 作为变量名。

```
api/resource/1234 etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-03T07:43:54.113

只需省略参数中的“@”

```
 .factory('reportFactory', ['$resource', 'baseUrl', function ($resource, baseUrl) {
        return $resource(baseUrl + '/keys/:id', {}, {
        delete: { method: 'DELETE',
            headers: {
                'Content-Type': 'application/json'
            },
            params: {id: 'id'} }
       })
}]); 
```

这会给你：

```
 http://localhost:8080/reports/api/keys/b8a8a8e39a8f55da94fdbe6c 
```

没有问号

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-29T20:27:17.857

如果要删除模型，则无需添加参数（无论如何，参数都不适用于 DELETE）：

```
$resource('/users/:id').delete({id: user.id}, function(res) {
  ...
}) 
```

或者

```
$resource('/users/:role/:id').delete({role: 'visitor', id: user.id}); 
```

我不确定这是否是 ngResource 的错误。

# xml - 如何根据子元素的属性值将xml根拆分为同一文件中的两个分支

> ID：16167469
> 
> 赞同：0
> 
> 时间：2013-04-23T10:51:06.690
> 
> 标签：xml, xslt, split, transform, transformation

如果我有这个文件

```
<config someAttribute="sA" otherAttribute="oA">
<parameter name="p1" yetAnotherAttribute="yAA">
    Something
</parameter>
<parameter name="p2" yetAnotherAttribute="yAA2">
    Something else
</parameter>
<parameter name="p3" yetAnotherAttribute="yAA3">
    Something more
</parameter>
<parameter name="p4" yetAnotherAttribute="yAA4">
    Yet more 
</parameter>
</config> 
```

我想要这样的东西

```
<configs>
<config someAttribute="sA" otherAttribute="oA">
    <parameter name="p1" yetAnotherAttribute="yAA">
        Something
    </parameter>
    <parameter name="p2" yetAnotherAttribute="yAA2">
        Something else
    </parameter>
</config>
<config someAttribute="sA" otherAttribute="oA">
    <parameter name="p3" yetAnotherAttribute="yAA3">
        Something more
    </parameter>
    <parameter name="p4" yetAnotherAttribute="yAA4">
        Yet more 
    </parameter>
</config>
</configs> 
```

你能帮我处理xslt文件吗？您能否也告诉我在哪里可以找到一些有用的学习 xslt 的资源（从基础到高级主题，除了 w3schools）？

我决定提供更有意义的文件

我想转换这个文件

```
<config width="100" height="200">
<parameter name="account number" country="UK">
    12345678901234567890123456
</parameter>
<parameter name="client code" codeType="xa">
    UK0112
</parameter>
<parameter name="email-address" accepts="yes">
    john.sparrow@rex.co.uk
</parameter>
<parameter name="postal-code" country="UK">
    W1A 1HQ 
</parameter>
</config> 
```

进入这个文件

```
<configs>
<config width="100" height="200">
    <parameter name="account number" country="UK">
        12345678901234567890123456
    </parameter>
    <parameter name="client code" codeType="xa">
        UK0112
    </parameter>
</config>
<config width="100" height="200">
    <parameter name="email-address" accepts="yes">
        john.sparrow@rex.co.uk
    </parameter>
    <parameter name="postal-code" country="UK">
        W1A 1HQ 
    </parameter>    
</config>
</configs> 
```

亲切的问候，我的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:31:51.570

由于除了“帐号”和“客户编号”放在第一组，“电子邮件地址”和“邮政编码”放在第二组之外，这里似乎没有任何统一的规则，我能做到的最好推荐这种硬编码的方法：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <configs>
      <xsl:call-template name="Group">
        <xsl:with-param name="children"
                        select="*[@name = 'account number' or
                                  @name = 'client code']" />
      </xsl:call-template>
      <xsl:call-template name="Group">
        <xsl:with-param name="children"
                        select="*[@name = 'email-address' or
                                  @name = 'postal-code']" />
      </xsl:call-template>
    </configs>
  </xsl:template>

  <xsl:template name="Group">
    <xsl:param name="children" />

    <xsl:copy>
      <xsl:apply-templates select="@*" />
      <xsl:apply-templates select="$children" />
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，结果是：

```
<configs>
  <config width="100" height="200">
    <parameter name="account number" country="UK">
      12345678901234567890123456
    </parameter>
    <parameter name="client code" codeType="xa">
      UK0112
    </parameter>
  </config>
  <config width="100" height="200">
    <parameter name="email-address" accepts="yes">
      john.sparrow@rex.co.uk
    </parameter>
    <parameter name="postal-code" country="UK">
      W1A 1HQ
    </parameter>
  </config>
</configs> 
```

或者，如果您想根据它们在源数据中的顺序将项目分成 2 个（或任意数量）的组，您可以这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:variable name="groupSize" select="2" />

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <configs>
      <xsl:apply-templates select="parameter[position() mod $groupSize = 1]"
                           mode="group" />
    </configs>
  </xsl:template>

  <xsl:template match="*" mode="group">
    <config>
      <xsl:apply-templates select ="../@*" />
      <xsl:apply-templates 
        select=". | following-sibling::*[position() &lt; $groupSize]"/>
    </config>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生与上述相同的结果。

# php - 想通过 PHP 发送电子邮件并获得感谢页面。但是 $HEADER 和 $HEADERS 不能一起工作

> ID：16167470
> 
> 赞同：1
> 
> 时间：2013-04-23T10:51:11.153
> 
> 标签：php

这是我用于表单的 PHP 代码。我想用 $headers 附加它，并希望它在提交表单时重定向到感谢页面。我收到了感谢页面，但没有收到电子邮件。

```
<?php

$action = $_SERVER['PHP_SELF'];

    $fname = $_POST['fname'];
    $phone = $_POST['phone'];
    $e_mail = $_POST['e_mail'];
    $service = $_POST['service'];
    $maker = $_POST['maker'];
    $model = $_POST['model'];
    $year = $_POST['year'];
    $message = $_POST['message'];

$to = 'reckless.sam@gmail.com';
$headers = 'From: Micheal Key <reply@locallockman.com>';
$subject = 'Customer Service Request';
$body = 'Customer name: ' . $fname .  "\n" .  
'Contact-No: ' . $phone .  "\n" . 
'E-mail: ' . $e_mail .  "\n" .
'Service-Type: ' . $service .  "\n" .  
'Car-Make: '. $maker .  "\n" . 
'Car-Model: ' . $model .  "\n" . 
'Model-Year: ' . $year .  "\n" . 
'Service Required: ' . $message .  "\n" ;
$thankyou = "thankyou.html"; // thank you page
if(isset($_POST['fname']) && isset($_POST['phone']) && isset($_POST['e_mail']) && isset($_POST['service']) && isset($_POST['message']))

$maker = $model = $year = 'Not Set'; // Or just use a empty string: '';
if(isset($_POST['maker'])){
    $maker = $_POST['maker'];
}
if(isset($_POST['model'])){
    $model = $_POST['model'];
}
if(isset($_POST['year'])){
    $year = $_POST['year'];
}{
    $fname = $_POST['fname'];
    $phone = $_POST['phone'];
    $e_mail = $_POST['e_mail'];
    $type = $_POST['service'];
    $maker = $_POST['maker'];

    $model = $_POST['model'];

    $year = $_POST['year'];
    $message = $_POST['message'];

    if(empty($phone)){
        echo 'Fields With * Sign Are Mandatory';
    }
    else{
        if(mail($to,$headers,$subject,$body,$headers)){
     header("Location: $thankyou");
?>
<script>location.replace('<?php echo $thankyou;?>')</script>
<?
        }
        else{
            echo 'There was an error sending email/s.';
        }
    }

}

?> 
```

我将等待您的回答。如果您想知道任何事情，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:54:57.860

只需使用它就不需要`<script>`

```
if(mail($to,$subject,$body,$headers)){
    header("Location: $thankyou");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T11:01:53.680

查看[`mail`](http://us3.php.net/manual/en/function.mail.php)功能。然后，将您的邮件代码更改为：

```
mail($to,$subject,$body,$headers) 
```

如果还是收不到邮件，很有可能是在windows的问题，有多种解决方法，但很容易找到。^^

# events - 未使用 adAsyncExecute 参数触发 ExecuteComplete ADODB 连接事件

> ID：16167478
> 
> 赞同：6
> 
> 时间：2013-04-23T10:51:46.357
> 
> 标签：events, excel, event-handling, ado, vba

我在尝试异步捕获存储过程执行的完成时遇到问题。

在我的代码 VBA 下方（在名为 clsAsync 的类模块中）：

```
Option Explicit

Private WithEvents cnn As ADODB.Connection

Private Sub cnn_ExecuteComplete(ByVal RecordsAffected As Long, ByVal pError As ADODB.Error, adStatus As ADODB.EventStatusEnum, ByVal pCommand As ADODB.Command, ByVal pRecordset As ADODB.Recordset, ByVal pConnection As ADODB.Connection)
    MsgBox "Execution completed"
End Sub

Sub execSPAsync()
    Set cnn = New ADODB.Connection
    Set rst = New ADODB.Recordset
    cnn.ConnectionString = "connection to my database SQLSEREVER"
    cnn.Open
    cnn.Execute "kp.sp_WaitFor", adExecuteNoRecords, adAsyncExecute
End Sub 
```

这个类是 PublicNotCreatable。

要从模块调用 sub execSPAsync，我使用以下代码：

```
Sub testASYNC()
    Dim a As New clsAsync
    Call a.execSPAsync
End Sub 
```

存储过程非常简单：

```
alter PROC kp.sp_WaitFor
AS

WAITFOR DELAY '00:00:05' 
```

我的问题是事件 ExecuteComplete 根本没有被触发，而如果我评论 adAsynExecute 参数一切正常。关于如何解决我的问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T12:55:36.773

我解决了替换调用代码的问题：

```
Sub testASYNC()
    Dim a As New clsAsync
    Call a.execSPAsync
End Sub 
```

使用这个新代码：

```
Private a As clsAsync

Sub testASYNC()
    Set a = New clsAsync
    Call a.execSPAsync
End Sub 
```

在异步模式下，对象“a”在过程结束时不再可用（范围可见性问题）。

# z3 - 使用 ctx-simplify 策略的奇怪输出

> ID：16167482
> 
> 赞同：0
> 
> 时间：2013-04-23T10:52:05.453
> 
> 标签：z3

小例子准备如下：

```
(declare-datatypes () ((Type1 a b c d e g h i f k l m n o p q r s t u v w z)))
(declare-const x Type1)
(declare-const y Type1)
(assert (and (= y x) (or (and (not (= x g)) (not (= x a))) (and (or (not (= x g)) (not (= x q))) (not (= x a))))))
(apply ctx-simplify) 
```

输出是：

```
(goals
(goal
  (= y x)
  (or (not and) (not (= x a)))
  :precision precise :depth 1)
) 
```

什么`(or (not and) (not (= x a)))`意思？漏洞？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:41:02.863

感谢您指出了这一点。我同意在打印输出中没有参数的“和”看起来很奇怪。上下文简化器创建一个带有 0 个参数的连词。它被简单地打印为“和”。所以 ctx-simplify 返回的表达式等价于 (not (= xa))。我将更新 ctx-simplify 策略以返回不带空连词的表达式。

# iphone - 从 SearchDisplayController 推送到新视图

> ID：16167488
> 
> 赞同：1
> 
> 时间：2013-04-23T10:52:17.860
> 
> 标签：iphone, ios, objective-c, xcode

试图从搜索结果中推送到新视图，并且由于某种原因没有调用代码。抱歉，我不能更详细地描述。

这是代码：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
[self.table deselectRowAtIndexPath:indexPath animated:YES];
int selectedTemplateID = [((CollectionItem*)[cllct objectAtIndex:indexPath.row]).tID intValue];

ACollection *newView = [[ACollection alloc] initWithID:selectedTemplateID];
newView.template = [cllct objectAtIndex:indexPath.row];

if(tableView == self.table) {
    [self.navigationController pushViewController:newView animated:YES];
    newView.theTitle = [self.table cellForRowAtIndexPath:indexPath].textLabel.text;
}
if(tableView == self.searchDisplayController.searchResultsTableView) {
    NSLog(@"Should push");
    [self.navigationController pushViewController:newView animated:YES];
    newView.theTitle = [self.table cellForRowAtIndexPath:indexPath].textLabel.text;
  }

} 
```

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-23T11:05:27.507

首先检查tableview的数据源和委托。删除`[self.table deselectRowAtIndexPath:indexPath animated:YES];`并检查一次。

# c# - Windows Phone 7中参数异常的Web服务调用错误

> ID：16167490
> 
> 赞同：0
> 
> 时间：2013-04-23T10:52:23.650
> 
> 标签：c#, web-services, windows-phone-7

我正在为窗口电话调用 asmx Web 服务。这是我的代码。当我执行此代码时，它给了我以下错误：

> ArgumentException：无效的 appId 参数名称：appId：ID=3010.V2_Soap.Translate.3C775314

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        ServiceReference1.LanguageServiceClient myclient = new ServiceReference1.LanguageServiceClient();

        myclient.TranslateAsync(AppIdString, textBox1.Text, "en", "fr", "text/plain", "general");

        myclient.TranslateCompleted += new EventHandler<ServiceReference1.TranslateCompletedEventArgs>(translatecompleted);

    }

    private void translatecompleted(object obj, ServiceReference1.TranslateCompletedEventArgs e)
    { 

        textBlock1.Text = e.Result.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:00:59.310

我解决了我的问题。错误是我没有将servicesoapclient放入其中。这是正确的代码。

```
private void button1_Click(object sender, RoutedEventArgs e)
    {
        jomarzi.ServiceSoapClient obj = new jomarzi.ServiceSoapClient();
        obj.HelloWorldCompleted +=new EventHandler<jomarzi.HelloWorldCompletedEventArgs>(obj_HelloWorldCompleted);
        obj.HelloWorldAsync();

    }

    private void obj_HelloWorldCompleted(object sender, jomarzi.HelloWorldCompletedEventArgs e)
    {
        textBlock1.Text = e.Result;
    } 
```

# sql - sql 字段中字段的大小（以 KB 为单位）

> ID：16167493
> 
> 赞同：0
> 
> 时间：2013-04-23T10:52:32.140
> 
> 标签：sql, db2

如果有人能让我知道如何找出作为 Sql 查询返回的任何字段的大小（以 KB 为单位），我将不胜感激。

例如

```
Select x,y from table A 
```

结果 -

```
x   y
x1  y1y1y1y1y1y1
x2  y2y2y2...........long string character.
x3  y3y3y3y3.........Long string character.
-
-
-
- 
```

我在寻找

```
x       y
x1      10kb - Size of ( y1y1y1..) in kb
x2      100kb- Size of (y2y2y2...) in kb 
```

任何帮助/建议都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:04:50.983

这应该有效。

```
SELECT x, LENGTH(y) 
FROM table_name 
```

[关于多字节字符的一些注意事项](http://pic.dhe.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z9.doc.char/src/tpc/db2z_specifylengthcalcutation.htm)。如果您使用多字节字符，请考虑使用[VARCHAR() 函数](http://pic.dhe.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z9.doc.char/src/tpc/db2z_specifylengthcalcutation.htm)而不是 LENGTH()。

对于以千字节为单位的长度，请将 LENGTH(Y) 除以 1024。

```
SELECT x, LENGTH(y)/1024.0 
FROM table_name 
```

# iis - 我可以从本地服务器上的活动目录组中检索所有用户名，但在 IIS 上显示异常错误

> ID：16167504
> 
> 赞同：0
> 
> 时间：2013-04-23T10:52:56.690
> 
> 标签：iis, permissions, active-directory

我是 stachoverflow 的新用户，我正在为 Intranet 开发一个 Web 应用程序，它在其中对来自活动目录的用户进行身份验证，这在 IIS 上运行良好，但我在从活动目录组中检索数据（所有用户名）时遇到问题，这工作正常本地服务器。在 IIS 上，它给出了异常错误- System.DirectoryServices.DirectoryServicesCOMException: Logon failure: unknown user name or bad password。在 IIS windows 身份验证启用和其他被禁用

```
My code is:
Web.config file:
<authentication mode="Windows">
            <forms loginUrl="~/TTracker/Login.aspx" timeout="600"></forms>
        </authentication>

<authorization>
            <deny users="?"/>
            <allow users="*" />

        </authorization>
    <identity impersonate="true" />

Code for retrieving data:

using System.DirectoryServices;
using System.DirectoryServices.AccountManagement;
using (HostingEnvironment.Impersonate())
            {
                DropDownList1.Items.Add(new ListItem("-Select-", ""));
                string grpname = "Group1";                
                PrincipalContext ctx = new PrincipalContext(ContextType.Domain, "domain");
                GroupPrincipal grp = GroupPrincipal.FindByIdentity(ctx, IdentityType.SamAccountName, grpname);
                if (grp != null)
                {
                    foreach (Principal p in grp.GetMembers(false))
                    {
                        DropDownList1.Items.Add(p.SamAccountName + "-" + p.DisplayName);

                    }
                    grp.Dispose();
                    ctx.Dispose();
                    Console.ReadLine();
                }
                else
                {
                    Console.WriteLine("We did not find that group.");
                    Console.ReadLine();
                }
            }

this is my code for retrieving data from active directory which works fine locally but not works on IIS.

It will be great help if any one solve this issue.

Thanks in advance. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T11:46:27.903

这与模仿有关。

请检查以下内容，

我们可以模拟一个帐户来处理 AD。

ASP.NET Impersonation [http://msdn.microsoft.com/en-us/library/aa292118(VS.71).aspx](http://msdn.microsoft.com/en-us/library/aa292118(VS.71).aspx) 并阅读此文档。

Howto：（几乎）通过 C# 在 Active Directory 中的所有内容 [http://www.codeproject.com/KB/system/everythingInAD.aspx](http://www.codeproject.com/KB/system/everythingInAD.aspx)

# android - ListView 项目顶部和底部的 ListView 分隔线

> ID：16167506
> 
> 赞同：8
> 
> 时间：2013-04-23T10:53:43.840
> 
> 标签：android, android-layout, listview

我正在使用 Android Listview，并且我希望在 listview 项目的两侧都有一个 1px 的分隔线，这意味着在两种不同颜色的顶部和底部。但问题是我没有登录以在底部显示分隔线。我试过`android:layout_below`了，但显示无效。

这是列表视图代码

```
<ListView
        android:id="@+id/myphnview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@drawable/dividerheight"
        android:background="#E9EAEC"
        android:clickable="true"
        android:divider="@drawable/dividerheight" >
    </ListView> 
```

这是我用于顶部边框的 xml 文件。分割高度.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item>
        <shape android:shape="line" >
            <stroke android:color="#c6c7c9" />

            <size android:height="1px" />
        </shape>
    </item>

</layer-list> 
```

这是我的行的布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rowlayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#E9EAEC"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="2" >

        <ImageView
            android:id="@+id/icon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="5dp" 
            android:background="@drawable/ic_launcher"/>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:layout_weight="1" >

        <TextView
            android:id="@+id/file_name"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:layout_margin="5dp"
            android:text="Hello Android "
            android:textColor="@android:color/black"
            android:textSize="20dp" >
        </TextView>
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="5dp" >

        <ImageView
            android:id="@+id/share_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:background="@drawable/ic_launcher"/>
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-23T11:16:25.410

有几种方法可以实现这一点。一种简单的方法是在列表中完全隐藏分隔线（将分隔线宽度设置为 0 或将分隔线设置为 null），并让每个列表项在顶部包含一行，在底部包含一行。考虑这个xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="60dp">

    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:layout_alignParentTop="true"
        android:background="@android:color/white" />

    <LinearLayout ...>
        <!-- this is your current list item LinearLayout -->
    </LinearLayout>

    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:layout_alignParentBottom="true"
        android:background="@android:color/black" />

</RelativeLayout> 
```

由于您已经在使用自定义适配器，因此只需在`getView`适配器的方法中使用上述 XML 进行列表项布局即可。这将生成 60dp 高的列表项，顶部有一条白线，底部有一条黑线。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T11:02:35.960

您似乎想在列表视图的顶部和底部放置线条（边框）。如果这是你想要的，我会建议下面的代码。

**按以下方式在res/values/styles.xml**中准备一行。

```
<style name="Line">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">2px</item>
    <item name="android:layout_marginLeft">10dp</item>
    <item name="android:layout_marginRight">10dp</item>
    <item name="android:background">@drawable/line_gradient</item>
</style> 
```

**res/drawable/line_gradient.xml：**

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
<gradient
    android:startColor="@color/white"
    android:endColor="@color/white"
    android:centerColor="@color/blue"
    android:useLevel="false"
    android:type="linear"
    android:angle="0"/>
</shape> 
```

最后以下面的方式在您需要的地方使用该行。

```
 <View
        style="@style/Line"/>
<ListView
................
................
/>
 <View
        style="@style/Line"/> 
```

这是我在我的应用程序中使用的代码，但您可以根据需要自定义或着色。甚至您可以直接在`listview`. 但是单独创建一个 in`styles.xml`会使其在多个地方使用而没有代码冗余。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T11:03:16.810

我不认为有办法做到这一点。但是您可以`footerview`为`headerview`您的`ListView`. 我想它会带来你想要的。

例如：

```
TextView tv1 = new Textview(this);
tv1.setBackgroundResource(R.drawable.dividerheight); 
```

和

```
listview.addHeaderView(totalExpense);
listview.addFooterView(totalExpense); 
```

我希望这能帮到您。

# facebook - 使用 Graph API 检索超过 3 个月的 Facebook 见解

> ID：16167507
> 
> 赞同：1
> 
> 时间：2013-04-23T10:53:49.763
> 
> 标签：facebook, facebook-graph-api, facebook-page, facebook-insights

我正在使用 Facebook Graph API 来检索页面洞察信息。我的问题是我买不到3个月以上的。例如，如果我使用`/insights/page_fan_adds/day?since=2013-01-20&until=2013-04-23`一切正常，但如果我使用`/insights/page_fan_adds/day?since=2013-01-19&until=2013-04-23`（前一天前一天）我收到以下错误：

```
{
  "error": {
    "message": "Unsupported operation", 
    "type": "FacebookApiException", 
    "code": 100
  }
} 
```

这意味着无法从 facebook 页面见解中获取旧信息，或者我必须执行其他操作，例如使用某些权限或使用其他语法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T13:54:51.347

Facebook 不允许超过 89 天，但您可以调整自/直到字段以获取超过 89 天的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-20T19:12:51.597

Facebook 将返回长达 93 天的洞察数据。您可以通过试验`since`和`until`字段来验证这一点。

如果您需要超过 93 天，如另一个答案中所建议的，您必须修改`since`和`until`字段以获取不同的数据“窗口”。请注意，在 Facebook 返回的数据中，为方便起见，包含分页 URL。如果您愿意，可以使用它们而不是重构 URL。

# python - unident 不匹配任何外部缩进级别，我需要更改什么？

> ID：16167508
> 
> 赞同：0
> 
> 时间：2013-04-23T10:53:54.327
> 
> 标签：python, pygame, indentation

```
def update(self):
        # Get the current mouse position. This returns the position
        # as a list of two numbers
         pos = pygame.mouse.get_pos()

        # Fetch the x and y out of the list,
        # just like we'd fetch letters out of a string.
        # Set the player object to the mouse location
        self.circ.x=pos[0]
        self.circ.y=pos[1] 
```

**初始化 Pygame**

就在 self.circ.x=pos[0] 所在的地方似乎有一个 unident/indentation 错误，我是 python 新手，想知道出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:56:30.530

在 pos 变量删除它之前有一个空格。

```
def update(self):
    # Get the current mouse position. This returns the position
    # as a list of two numbers
    pos = pygame.mouse.get_pos()

    # Fetch the x and y out of the list,
    # just like we'd fetch letters out of a string.
    # Set the player object to the mouse location
    self.circ.x=pos[0]
    self.circ.y=pos[1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:23:17.023

线

```
 pos = pygame.mouse.get_pos() 
```

有一个额外的空间。为了清楚地看到这一点，删除评论会有所帮助。

```
 pos = pygame.mouse.get_pos()
        self.circ.x=pos[0]
        self.circ.y=pos[1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T11:06:29.337

Pos 的位置太靠右了。

# c# - 如何在 C# 中将文本框动态添加到表格行

> ID：16167509
> 
> 赞同：1
> 
> 时间：2013-04-23T10:54:00.083
> 
> 标签：c#, textbox, dynamically-generated

我想在 C# 中动态添加文本框，点击表格行中的按钮。为此，我使用了以下代码。[1]： http: [//pastie.org/7702237](http://pastie.org/7702237)。

问题是我可以添加任意数量的文本框，但它们添加在相同的位置，我的意思是表格行不会因为每次按钮单击而增加，而是只是用新的表格行替换旧的表格行。请帮助我解决这个问题。

在此先感谢 Ganesh

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:20:31.317

基于 Web 的应用程序不维护状态；为此，表的状态和任何变量都没有被维护。每次回发（由按钮生成）时，表的状态都会恢复到添加行之前的状态，然后以编程方式将行添加到其中。

为了实现您的目标，您需要以某种方式维护状态。在以下代码片段中，我正在使用会话：

```
private List<TableRow> TableRows
{
    get
    {
        if(Session["TableRows"] == null)
            Session["TableRows"] = new List<TableRow>();
        return (List<TableRow>)Session["TableRows"];
    }
} 
```

以下是修改后的代码以使用会话变量：

```
TextBox txtE, txtM, txtB;
Button btnAdd, btnDel;

TableRow trow;
TableCell tcell;

foreach(TableRow tr in TableRows)
    tblEduDetails.Controls.Add(tr);

int count = TableRows.Count + 1;

txtE = new TextBox();
txtE.ID = "E" + count.ToString();
txtE.Visible = true;
txtE.Text = "E " + count.ToString();
txtE.BorderWidth = 2;
txtE.TextMode = TextBoxMode.SingleLine;
txtE.Height = 30;

txtM = new TextBox();
txtM.ID = "M" + count.ToString();
txtM.Visible = true;
txtM.Text = "M " + count.ToString();
txtM.TextMode = TextBoxMode.SingleLine;
txtM.Height = 30;

txtB = new TextBox();
txtB.ID = "E" + count.ToString();
txtB.Visible = true;
txtB.Text = "B " + count.ToString();
txtB.TextMode = TextBoxMode.SingleLine;
txtB.Height = 30;

btnAdd = new Button();
btnAdd.ID = "A" + count.ToString();

btnDel = new Button();
btnDel.ID = "D" + count.ToString();

trow = new TableRow();
trow.ID = "R" + count.ToString();
trow.BorderWidth = 1;

tcell = new TableCell();
tcell.ID = "E" + count.ToString();
tcell.Controls.Add(txtE);
trow.Controls.Add(tcell);

tcell = new TableCell();
tcell.ID = "B" + count.ToString();
tcell.Controls.Add(txtM);
trow.Controls.Add(tcell);

tcell = new TableCell();
tcell.ID = "M" + count.ToString();
tcell.Controls.Add(txtB);
trow.Controls.Add(tcell);

tblEduDetails.Controls.Add(trow);
TableRows.Add(trow); 
```

# rest - Hmac用户认证说明

> ID：16167513
> 
> 赞同：0
> 
> 时间：2013-04-23T10:54:18.373
> 
> 标签：rest, authentication, restful-authentication

我正在尝试实现本文[Hmac User Authentication](http://c2.com/cgi/wiki?HmacUserAuthentication)中解释的身份验证系统。

我不明白以下部分：

> 服务器发回：let MESSAGE = (USERNAME,REALM,SALT,SESSIONID,ENCRYPTED_SESSION_KEY) in auth:(MESSAGE,HMAC(SHA1,PASSHASH,MESSAGE))。

我不知道如何生成 SESSIONID 和 ENCRYPTED_SESSION_KEY。什么是“授权”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T07:19:54.050

由于我的问题没有答案，我给出了我正在使用的解决方案。

就我而言，我用时间戳替换了 SESSION_ID。我使用 HMAC（SHA1，PASSASH，SESSION_ID）生成了 ENCRYPTED_SESSION_KEY。最后“auth”是一个 json 响应。

希望，它可以帮助有人点击此页面。

# dart - 如何使用 ID 查找视图

> ID：16167514
> 
> 赞同：1
> 
> 时间：2013-04-23T10:54:24.860
> 
> 标签：rikulo, dart, rikulo

尝试使用[rikulo](/questions/tagged/rikulo "显示标记为“rikulo”的问题")框架构建一些简单的应用程序并有一个问题：

*   是否可以`View`在分层布局中找到？如何 ？（在飞镖）

    Rikulo 网站上有一些关于 IdSpace 的文档，[但](http://docs.rikulo.org/ui/latest/Views/Fundamentals/ID_Space_and_Query.html)我不太了解如何使用它。**我**应该延长`View`吗`IdSpace`？还是`View`会自动生成 Id ？

更新（添加代码示例）

```
/*
* Function will actualy build View
*/
void _buildUi(Element tagElement)
{
   View mainView = new View();
   mainView.profile.width = '100%';
   mainView.profile.height = '100%';
   mainView.layout.type = 'linear';
   mainView.layout.orient = 'vertical';
   mainView.style.cssText = "background: yellow;";

   View vWorkSpace = new View();
   vWorkSpace.profile.width = 'flex';
   vWorkSpace.profile.height = 'flex';
   vWorkSpace.layout.type = 'linear';
   vWorkSpace.layout.orient = 'horizontal';
   vWorkSpace.style.cssText = "background: red;";

   //
   // Left menu
   View vLeftBar = new View();
   vLeftBar.profile.width = "10%";
   vLeftBar.profile.height = "10%";
   vLeftBar.layout.type = 'linear';
   vLeftBar.layout.orient = 'vertical';
   vLeftBar.layout.spacing = '10';

   View vLogo = new View();
   vLogo.addChild(new Image('images/google_chrome.png'));
   vLeftBar.addChild(vLogo);

   Button vButton = new Button();
   vButton.text = 'Sign in with Google';
   vLeftBar.addChild(vButton);
   vButton.on.click.add((e){      // Somehow I get an error here: Method 'add' not defined for class 'Stream'
      broadcaster.send(new ViewEvent('foo'));
   });

   vWorkSpace.addChild(vLeftBar);

   mainView.addChild(vWorkSpace);
   mainView.addToDocument(ref: tagElement, layout: true);
} 
```

`vButton`处理点击事件时在 dart.app 的另一个地方。我怎么能找到（在代码中）`vLogo`View ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T04:27:38.923

当然，与 Element 一样，View 提供基于 CSS 选择器的检索，称为[query](http://api.rikulo.org/ui/latest/rikulo_view/View.html#query)和[queryAll](http://api.rikulo.org/ui/latest/rikulo_view/View.html#queryAll)。您可以在检索 DOM 元素时使用它们来检索视图。

一般来说，你不必担心 IDSpace，除非你想在不同的视图中使用相同的 ID。层次结构树本身就是一个 ID 空间。如果一个视图实现了 IDSpace，它就形成了另一个 ID 空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T01:56:54.367

在代码中检索 View 的最简单方法是给它一个 id：

```
View vLogo = new View();
vLogo.id = "vLogo"; 
```

然后，在您的事件侦听器中，使用[查询](http://api.rikulo.org/ui/latest/rikulo_view/View.html#query)来访问它：

```
button.query("#vLogo"); // returns vLogo 
```

但是，在您的情况下，您将能够在事件侦听器闭包中直接访问 vLogo 实例。

# .net - 在 vb.net 中保存变量、集合

> ID：16167521
> 
> 赞同：1
> 
> 时间：2013-04-23T10:54:44.760
> 
> 标签：.net, vb.net

如何在 vb.net 中保存变量、集合、字典，以便在用户重新启动软件后保存修改。

例如，用户通过文本框输入新/旧键和更改字典的值。在他检查先前输入的密钥时重新启动后，他的修改是永久性的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-06T00:48:13.380

好的，我曾经问过同样的问题，看到你听起来像一个绝对的初学者，我会轻松一点。

单击`Project`屏幕顶部并向下滚动到程序的属性。在我的情况下， `Personal Assistant properties...` ![在此处输入图像描述](https://i.stack.imgur.com/0YUI8.png) 现在单击突出显示的文本，`Settings` ![在此处输入图像描述](https://i.stack.imgur.com/x5wlU.png) 您应该会看到这样的菜单，现在您可以在此处进行新设置。这些就像变量一样，但即使在程序重新启动时也会保持不变。就我而言，我为程序创建了一个名为 Name 的名称来记住用户的姓名。

如果您想使用该设置，请输入**以下**内容：`My.Settings.[Name of setting]` 如果您想更改它，只需在其后添加一个等号并输入其新值。`My.Settings.[Name of setting] = [New Value]`

这是一个例子： `Label1.Text = "Hello " + My.Settings.Name + "!"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T10:58:04.740

我假设您正在谈论在本地存储此数据的客户端应用程序？在这种情况下，可以使用隔离存储，请参阅[http://www.codeproject.com/Articles/6535/Isolated-Storage-in-NET-to-store-application-data](http://www.codeproject.com/Articles/6535/Isolated-Storage-in-NET-to-store-application-data)。或者你可以有一个基于 SQLite 的本地数据库来存储这些东西。

您还可以选择集中存储这些数据。但我们不知道您的确切要求/限制，您可能想向我们提供更多信息。

# php - 响应本身内部的响应长度

> ID：16167530
> 
> 赞同：0
> 
> 时间：2013-04-23T10:55:09.400
> 
> 标签：php, csv, response, string-length

我们有一个 PHP 响应脚本，它输出如下字符串：

```
BEGIN;
00000087;
data1A;data1B;data1C;
data2A;data2B;data2C;
data3A;data3B;data3C;
END; 
```

正如您在第 2 行看到的，响应的长度是在响应本身内部发送的。（响应长度稍后用于验证目的。）

目前，我们用前导零填充响应长度，总长度为 8 个字符，以保持计算简单。所以代码看起来像这样：

```
$sBegin = "BEGIN;\n";
$sData  = "data1A;data1B;data1C;\ndata2A;data2B;data2C;\ndata3A;data3B;data3C;\n";
$sEnd   = "END;";

$iPadLength = 8;
$iResponseLength = strlen($sBegin) + strlen($sData) + strlen($sEnd) + $iPadLength + strlen(";\n");

$sResponse = $sBegin . str_pad($iResponseLength, $iPadLength, "0", STR_PAD_LEFT) . ";\n" . $sData . $sEnd;
echo $sResponse; 
```

这个解决方案对我来说看起来很脏。大多数情况下，我不喜欢填充部分，因为响应数据会增长，并且填充长度会变得太小，这会导致计算错误。

我想知道在不改变响应的基本结构的情况下是否有更好的解决方案。

# java - 每百万次迭代打印一次消息

> ID：16167532
> 
> 赞同：0
> 
> 时间：2013-04-23T10:55:17.707
> 
> 标签：java, loops, for-loop, while-loop, iteration

我需要编写一个循环，每百万次迭代打印一次消息。我想让它运行 10 秒（时钟时间）以查看打印了多少条语句。

我想我现在只是把自己绑起来了……

```
public class OneInAMillion{
  public static void main(String []args){
    long startTime = System.currentTimeMillis();  //time at start of execution
    long endTime = startTime + 10000;  //time at end of execution (10000 = 10 seconds)
    int count = 1;

    while(System.currentTimeMillis() < endTime) { //run this before 10 seconds is up
      for (int i = 0; i < count; i++) {
        if(i % 1000000 == 0) {
            System.out.println("Iteration: " + count++);  //print every millionth iteration
        }
      }
    }

    System.out.println("Time up!"); //print once loop finishes
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T11:04:19.407

你在循环中有一个循环。想想每个循环的作用——第一个循环会一直持续到 10 秒。另一个将简单地从 0 开始变为 1，在 while 循环的下一次迭代中，它将从 0 变为 2，然后从 0 变为 3，依此类推。当它为 0（很多）时它也会打印，因为 0%1000000 是 0。

尝试将它们组合成一个循环。这可以通过摆脱 while 循环并仅使用带有 while 循环条件的 for 循环来完成，如下所示：

```
 public static void main(String[] args) {
     long endTime = System.currentTimeMillis() + 10000;  //time at end of execution (10000 = 10 seconds)
     for (int i = 1; System.currentTimeMillis() < endTime; i++) {
        if(i % 1000000 == 0) {
            System.out.println("Iteration: " + i/1000000);  //print every millionth iteration
        }
      }
      System.out.println("Time up!"); //print once loop finishes
  } 
```

请注意，`count`它将始终是 i/1000000，所以我摆脱了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:03:27.873

摆脱你的`for`循环，`i++`在你之前做`if`和打印`i`而不是计数，你应该被设置。

```
public class OneInAMillion{
  public static void main(String []args){
    long startTime = System.currentTimeMillis();  //time at start of execution
    long endTime = startTime + 10000;  //time at end of execution (10000 = 10 seconds)
    //int count = 1;
    int i = 0;
    while(System.currentTimeMillis() < endTime) { //run this before 10 seconds is up
        i++;
        if(i % 1000000 == 0) {
            System.out.println("Iteration: " + i);  //print every millionth iteration
        }
    }

    System.out.println("Time up!"); //print once loop finishes
  }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T11:05:38.467

您的 for 循环退出条件会干扰您的 while 循环退出条件，并阻止它在您期望的时候被评估。摆脱 while 循环：

```
public class OneInAMillion{
  public static void main(String []args){
    long startTime = System.currentTimeMillis();  //time at start of execution
    long endTime = startTime + 10000;  //time at end of execution (10000 = 10 seconds)
    int count = 1;

    for (int i = 0; i < count; i++) {
      if(System.currentTimeMillis() >= endTime) {
        break;
      }

      if(i % 1000000 == 0) {
        System.out.println("Iteration: " + count++);  //print every millionth iteration
      }
    }

    System.out.println("Time up!"); //print once loop finishes
  }
} 
```

# c# - 服务器无法识别 json，使用 restSharp 发送请求

> ID：16167533
> 
> 赞同：0
> 
> 时间：2013-04-23T10:55:20.510
> 
> 标签：c#, restsharp

我正在尝试将一些 json 发布到 jboss 服务。使用restSharp ..我的代码如下。

```
 RestClient client = new RestClient(baseURL);
        RestRequest authenticationrequest = new RestRequest();
        authenticationrequest.RequestFormat = DataFormat.Json;
        authenticationrequest.Method = Method.POST;
        authenticationrequest.AddParameter("text/json",                  authenticationrequest.JsonSerializer.Serialize(prequestObj), ParameterType.RequestBody); 
```

也试过这个

```
 RestClient client = new RestClient(baseURL);
        RestRequest authenticationrequest = new RestRequest();
        authenticationrequest.RequestFormat = DataFormat.Json;
        authenticationrequest.Method = Method.POST;                           authenticationrequest.AddBody(authenticationrequest.JsonSerializer.Serialize(prequestObj)); 
```

但在这两种情况下，我的服务器都给我错误，即 json 格式不正确

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:12:01.350

尝试使用 JsonHelper 准备您的 json，如下所示

```
 string jsonToSend = JsonHelper.ToJson(prequestObj); 
```

接着

```
authenticationrequest.AddParameter("application/json; charset=utf-8", jsonToSend, ParameterType.RequestBody); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:32:34.493

我发现出了什么问题...

我在 Windows Metro Style 中使用 RestSharp，所以下载了源代码并进行了一些修改...以便在函数 PutPostInternalAsync 中进行修改我刚刚添加了这些修改

```
 httpContent = new StringContent(Parameters[0].Value.ToString(), Encoding.UTF8, "application/json"); 
```

它解决了问题....

Parameters[0].Value.ToString() 代替这个，你可以编写一个可以返回序列化 json 对象的方法。（作为字符串）。

# licensing - JDK 源代码许可不一致

> ID：16167562
> 
> 赞同：4
> 
> 时间：2013-04-23T10:56:38.677
> 
> 标签：licensing, java, gpl

我安装了最新的 JDK (1.7.0_21)。当我在 Eclipse 中查看基础类的源代码时，例如`java.lang.String`文件顶部的许可证显示：

```
/*
 * Copyright (c) 1994, 2010, Oracle and/or its affiliates. All rights reserved.
 * ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
 */ 
```

此源代码来自`src.zip`JDK 版本附带的文件。

当我在这里查看源代码时：http: [//grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/String.java ?av=f](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/String.java?av=f)

...我看到了 GPL v2.0 许可标头。

```
/*
 * Copyright (c) 1994, 2010, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the "Classpath" exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */ 
```

据我了解，JDK 1.7 是作为完全开源发布的，在 GPL 2.0 下获得许可。

有人可以解释许可证差异吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:02:30.563

OpenJDK 在 GPL 2.0 下发布

来自 OpenJDK[常见问题解答](http://openjdk.java.net/faq/)

> OpenJDK 是在什么开源许可证下发布的？
> 
> GPL v2 适用于几乎所有的虚拟机，GPL v2 + Classpath 例外适用于类库和虚拟机中暴露公共 API 的部分。
> 
> Oracle 会改变 OpenJDK 许可模式吗？
> 
> 不会。在 Oracle 以及其他公司、研究人员和个人的贡献下，OpenJDK 社区继续蓬勃发展，而基于 GPL 的许可模式是这一成功的重要部分。甲骨文没有改变它的计划。

Oracle JDK 在 Oracle 许可下发布。来自[常见问题](http://www.oracle.com/technetwork/java/javase/overview/faqs-jsp-136696.html)

> Java SE 继续在 Oracle 二进制代码许可 (BCL) 下免费提供。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T11:01:34.817

您正在查看两个不同的版本，一个是 OpenJDK 7 的旧版本，另一个是基于 OpenJDK 的最新版本的 Oracle JDK。

# cocoa - 简单的 FTP 示例 - 连接关闭导致文件被截断

> ID：16167564
> 
> 赞同：0
> 
> 时间：2013-04-23T10:56:41.267
> 
> 标签：cocoa, file-upload, ftp, corruption

我采用了苹果的简单 FTP 示例并根据需要对其进行了编辑。（没有改变上传部分）

它报告上传正常，并且文件确实在 FTP 上，但是如果我下载文件并打开它（主要是 jpg 图像），我会收到文件已损坏的错误消息。

我唯一改变的是，当传输完成后，连接被强制关闭，而不是继续等待其他上传。

我认为该程序正在将最后一块数据分配给上传流，一旦完成，它就假定它已经完成，而无需等待流上传最后一块..这可能吗？有没有办法查看网络流（输出流）的缓冲区中是否有数据？我似乎只能为输入流做到这一点，但不能为输出流做到这一点。

更新：在使用十六进制编辑器将上传的文件与原始文件进行比较后，我发现这些文件是相同的，除了上传的文件的最后部分被砍掉了。切掉的部分并不总是相同的大小。它在 0 到 256 kb 之间变化...

UPDATE2：
`NSLog(@"ntstrm: %zu", self.networkStream.streamStatus);` 即使在上传时也总是返回 2。上传时它应该返回 4！然后在关闭后它返回 0。但从不返回 4 ......

UPDATE3：到目前为止，我发现的唯一解决方案是在我关闭连接之前放入一个计时器并等待 15 秒。但这不是我想做的事情，因为我用来上传许多文件的程序，如果对于每个文件，我必须停止 15 秒，这是一个巨大的痛苦。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T17:51:15.120

由于缺少任何代码片段，因此提出解决方案并不容易。

根据您的问题描述，这可能与缓冲区未正确刷新有关。

我建议您尝试在输出流上强制立即刷新。也想[避免套接字延迟](http://www.cocoabuilder.com/archive/cocoa/290086-flushing-nsoutputstream-gotten-from-nsnetservice.html)的人使用 TCP_NODELAY 只是在套接字级别设置了一些选项：

```
int yes = 1;
setsockopt(CFSocketGetNative(aSocket), IPPROTO_TCP, TCP_NODELAY, (void *)&yes, sizeof(yes)); 
```

希望这可以帮助。

# python - 当硒错过我看到的元素时打印dom

> ID：16167565
> 
> 赞同：3
> 
> 时间：2013-04-23T10:56:46.523
> 
> 标签：python, selenium, selenium-webdriver

**如何找到硒在 dom 中看到的内容，它错过了我在屏幕上看到的图像？**

*上下文：*我有一个 Selenium python 测试

```
browser.wait_to_find_visible_element(By.ID, 'image') 
```

有时找不到我在为测试启动的浏览器 selenium 上看到的图像：

```
<div id="container">
    <img id='image' src=''/>
</div> 
```

为了找出 selenium 看到的内容，我得到了以下内容`div`：

```
element  = browser.find_displayed_elements(By.CSS_SELECTOR, '#container')
print element 
```

打印：

> selenium.webdriver.remote.webelement.WebElement 对象位于 0x9b3876c

并尝试获取 dom：

```
dom = browser.driver.execute_script('return arguments[0].parentNode', element)
print dom 
```

哪个打印

```
None 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T05:08:59.053

你试过这个

```
element  = browser.find_displayed_elements(By.CSS_SELECTOR, '#container')
source_code = element.get_attribute("innerHTML")
# or
source_code = element.get_attribute("outerHTML") 
```

# c# - MVC4 项目 - 不能 DropCreateDatabaseIfModelChanges

> ID：16167567
> 
> 赞同：1
> 
> 时间：2013-04-23T10:56:52.417
> 
> 标签：c#, entity-framework, asp.net-mvc-4

我有一个使用表单身份验证的 MVC4 互联网应用程序。

开箱即用的`UserProfile`模型是在 Account 模型文件中创建的，我已将其移至其自己的文件并`DbSet<UserProfile`在我的文件中调用 > `DbContext`。我希望 EF 创建一个 2 表数据库，UserProfiles 和 Stories。

```
public class MySocialStoriesDb : DbContext
{
    public DbSet<UserProfile> UserProfiles { get; set; }
    public DbSet<Story> Stories { get; set; }
} 
```

故事模型

```
[Table("Stories")]
public class Story
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int StoryId { get; set; }

    public int UserId { get; set; }

    [ForeignKey("UserId")]
    public virtual UserProfile User { get; set; }

    public string File { get; set; }
    public DateTime DateCreated { get; set; }
    public string Name { get; set; }
} 
```

用户档案模型

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }

    public string UserName { get; set; }
    public string EmailAddress { get; set; }
    public string UserDirectory { get; set; }
    public bool Paid { get; set; }
    public DateTime DatePaid { get; set; }
    public string PaymentId { get; set; }
} 
```

我已经从包管理器运行 Enable-Migrations 并允许自动迁移和允许数据丢失。生成的 InitialCreate 文件似乎只创建了 User Profile 表，它的代码中没有任何 Story 表的内容。

我将以下行添加到 Global.asax

```
Database.SetInitializer(new Models.IntializeMySocialStoriesDb()); 
```

如果我现在更改模型，则数据库不会更改。如果我手动删除数据库并将其更改`InitializeMySocialStoriesDb`为 DropCreateDatabaseAlways 然后运行应用程序，则不会创建数据库。

我只是想知道我错过了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:03:53.293

不要打扰这个机制。这对于生产应用程序是不可行的，并且每次架构更改时都需要您处理所有数据。

而是将您的数据库模式创建为一个单独的 SSDT 项目，并使用 DACPAC 文件来初始部署和升级您的生产数据库，同时保持所有数据完好无损。只需将 SimpleMembership 创建的表复制到您的 SSDT 项目中。

这样您就拥有了准确的列定义，可以准确地定义约束，准确地定义外键、主键和唯一键等，并且仍然可以通过应用程序项目中的实体框架访问您的数据。升级生产数据库上的模式只需要部署一个 DACPAC。

在开发过程中，当您在 SSDT 中进行更改时，Visual Studio 将自动对表结构进行任何更改。

简而言之，我认为代码优先定义过于松散、无组织且是个坏主意。

# javascript - 如何使用 XMLHttpRequest 对象将输入流格式的图像文件发送到服务器

> ID：16167570
> 
> 赞同：0
> 
> 时间：2013-04-23T10:56:59.180
> 
> 标签：javascript, jquery, cordova, xmlhttprequest

我在 web 服务中有四个参数。该服务正在运行，我已经使用 android 应用程序进行了测试。但是我不能在phonegap中做同样的事情。

参数：name、emailid、pass 和 imagefile。图片格式为base64png。在服务器端，我作为 Inputstream 接收。寻求帮助以二进制格式发送。

```
 body+= ServiceHttpHeader('name',name1);
                    body+= ServiceHttpHeader('emailid',emailid1);
                    body+= ServiceHttpHeader('pass',pass1);
                    body +='Content-Disposition: form-data; name=imagedetails;'
                    body += 'filename='+imagedetails+'\r\n';
                    body += "Content-Type: application/octet-stream\r\n\r\n "; 
                    body +=imgdetailurl+'\r\n';

                    body += '--' + boundary + '--';
                    ImageUploadRequest.setRequestHeader('Cache-Control', 'no-cache');
                    ImageUploadRequest.send(body); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:09:00.203

Phonegap 有自己的 API 将图像上传到服务器。

一种解决方案是先将图像上传到服务器。成功上传后，您将所有其他参数以及服务器上文件的路径传递给另一个脚本，以执行您想要在那里完成的任何处理。

Phonegap 的文档说不应该使用 base64 编码的图像进行上传，因为这通常会导致最新的高分辨率相机图像出错。请改用 FILE_URI。你可以在这里阅读更多。

[http://docs.phonegap.com/en/1.2.0/phonegap_file_file.md.html#FileTransfer](http://docs.phonegap.com/en/1.2.0/phonegap_file_file.md.html#FileTransfer) [http://docs.phonegap.com/en/2.6.0/cordova_camera_camera.md.html#Camera](http://docs.phonegap.com/en/2.6.0/cordova_camera_camera.md.html#Camera) （用于camera.getPicture())

例子

```
function uploadPhotoToServer(imageURI)
{
    var options = new FileUploadOptions();
    options.fileKey="img_file";
    options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
    options.mimeType="image/jpeg";

    window.localStorage.setItem("upload_file_name",options.fileName);

    var params = new Object();
    params.value1 = "test";
    params.value2 = "param";

    options.params = params;
    options.chunkedMode = false;

    var ft = new FileTransfer();
    ft.upload(imageURI, encodeURI("<your image upload script url>"), onUploadSuccess, onFail, options);

}

function onUploadSuccess(r) 
{
    var filename = window.localStorage.getItem("upload_file_name");
    file_path_on_server = "path/to/images/folder"+filename;

       // other parameters
    var email = <the email Id> ;
    var name = <the name>;

    var parameters = "name="+name+"&email="+email+"&img_path="+file_path_on_server;

    $.ajax({
        url: <your current script url>,
        data: parameters ,
        dataType: "jsonp",
        timeout:10000,
        success:function(json) {
            alert(JSON.stringify(json, undefined,2));
        },
        error:function() {
            alert("Error");
        },
        type:"GET"
    });

function onFail()
{
       alert("Error");
} 
```

希望这可以帮助。

# c++ - 在 DLL 中创建线程

> ID：16167571
> 
> 赞同：5
> 
> 时间：2013-04-23T10:57:01.313
> 
> 标签：c++, dll, thread-sleep

我正在开发一个 .NET 分析器，它是用 c++（一个使用 ATL 的 dll）编写的。我想创建一个每 30 秒写入文件的线程。我希望线程函数成为我的一个类的方法

```
DWORD WINAPI CProfiler::MyThreadFunction( void* pContext )
{
   //Instructions that manipulate attributes from my class;
} 
```

当我尝试启动线程时

```
HANDLE l_handle = CreateThread( NULL, 0, MyThreadFunction, NULL, 0L, NULL ); 
```

我收到了这个错误：

```
argument of type "DWORD (__stdcall CProfiler::*)(void *pContext)" 
is incompatible with parameter of type "LPTHREAD_START_ROUTINE" 
```

如何在 DLL 中正确创建线程？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T11:04:37.180

您不能将指针传递给成员函数，就好像它是常规函数指针一样。您需要将您的成员函数声明为静态的。如果需要调用对象的成员函数，可以使用代理函数。

```
struct Foo
{
    virtual int Function();

    static DWORD WINAPI MyThreadFunction( void* pContext )
    {
        Foo *foo = static_cast<Foo*>(pContext);

        return foo->Function();
     }
};

Foo *foo = new Foo();

// call Foo::MyThreadFunction to start the thread
// Pass `foo` as the startup parameter of the thread function
CreateThread( NULL, 0, Foo::MyThreadFunction, foo, 0L, NULL ); 
```

# android - TransitionDrawable 没有按预期改变颜色

> ID：16167575
> 
> 赞同：3
> 
> 时间：2013-04-23T10:57:08.773
> 
> 标签：android, transitiondrawable

我在 ProgressIndicatorView 类中有以下内容。该视图在使用时包含以下五个矩形：

当用户按下“Fortsæt”按钮时，我调用视图方法 setProgressIndicator(int step) 将视图中下一个矩形的颜色设置为完全不透明。该方法如下所示：

```
public void setProgressIndicator(int activeStep) {
        // Fade IN
        TransitionDrawable transition = (TransitionDrawable) this.getChildAt(activeStep-1).getBackground();
        transition.startTransition(transitionTime);
} 
```

init 方法看起来像这样

```
private void init(Context context) {
    this.setOrientation(LinearLayout.HORIZONTAL);

    transitionColor = getResources().getDrawable(R.drawable.colortransition);
    for (int i = 0; i < squareAmount; i++) {
        ImageView loadingPiece = new ImageView(context);
        //loadingPiece.setBackgroundColor(transparentWhite);
        loadingPiece.setBackgroundDrawable(transitionColor);
        LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(0,
                LinearLayout.LayoutParams.FILL_PARENT, 1.0f);
        lp.setMargins(0, 15, 4, 15);
        this.addView(loadingPiece, lp);           
    }
} 
```

如果我使用静态背景颜色作为资源，则该方法非常有效，但当我使用可绘制的 transitioncolor 时则无效。关于可能导致问题的任何建议？

编辑：为澄清起见，这是我使用 this.getChildAt(activeStep-1).setBackgroundColor(opaqueWhite); 时的视图。

![在此处输入图像描述](https://i.stack.imgur.com/L8N12.png)

但这就是我使用 setProgressIndicator 的当前实现时的样子：

![在此处输入图像描述](https://i.stack.imgur.com/skVDn.png)

是什么导致这种情况发生？

*编辑：如果无法找到此问题的原因，是否有另一种方法可以实现此效果？*

# ios - 在真实设备中录制音频不起作用

> ID：16167580
> 
> 赞同：0
> 
> 时间：2013-04-23T10:57:23.097
> 
> 标签：ios, xcode

我正在我的应用程序中实现录音，我已经尝试了我在模拟器中编写的代码并且一切正常，但是当我在真实设备中尝试检查录音持续时间时，我发现它总是为零，但在模拟器中它显示正确的持续时间并且代码是相同的。我必须设置一些东西才能在真实设备中使用记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:03:35.860

我有一个优秀的录​​音方法：

```
-(IBAction) startRecording
{   progressView.progress = 0.0;

NSLog(@"startRecording");
AVAudioSession *audioSession = [AVAudioSession sharedInstance];
NSError *err = nil;
[audioSession setCategory :AVAudioSessionCategoryPlayAndRecord error:&err];
if(err){
    NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
    return;
}
[audioSession setActive:YES error:&err];
err = nil;
if(err){
    NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
    return;
}

recordSetting = [[NSMutableDictionary alloc] init];

// We can use kAudioFormatAppleIMA4 (4:1 compression) or kAudioFormatLinearPCM for nocompression
[recordSetting setValue :[NSNumber numberWithInt:kAudioFormatAppleIMA4] forKey:AVFormatIDKey];

// We can use 44100, 32000, 24000, 16000 or 12000 depending on sound quality
[recordSetting setValue:[NSNumber numberWithFloat:16000.0] forKey:AVSampleRateKey];

// We can use 2(if using additional h/w) or 1 (iPhone only has one microphone)
[recordSetting setValue:[NSNumber numberWithInt: 1] forKey:AVNumberOfChannelsKey];

// These settings are used if we are using kAudioFormatLinearPCM format
//[recordSetting setValue :[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
//[recordSetting setValue :[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsBigEndianKey];
//[recordSetting setValue :[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsFloatKey];

// Create a new dated file
//NSDate *now = [NSDate dateWithTimeIntervalSinceNow:0];
//  NSString *caldate = [now description];
//  recorderFilePath = [[NSString stringWithFormat:@"%@/%@.caf", DOCUMENTS_FOLDER, caldate] retain];
recorderFilePath = [NSString stringWithFormat:@"%@/MySound.caf", DOCUMENTS_FOLDER] ;

NSLog(@"recorderFilePath: %@",recorderFilePath);
_recorderFilePath = recorderFilePath;
self.recorderFilePath = recorderFilePath;
NSURL *url = [NSURL fileURLWithPath:recorderFilePath];

err = nil;

NSData *audioData = [NSData dataWithContentsOfFile:[url path] options: 0 error:&err];
if(audioData)
{
    NSFileManager *fm = [NSFileManager defaultManager];
    [fm removeItemAtPath:[url path] error:&err];
}

err = nil;
recorder = [[ AVAudioRecorder alloc] initWithURL:url settings:recordSetting error:&err];
if(!recorder){
    NSLog(@"recorder: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
    UIAlertView *alert =
    [[UIAlertView alloc] initWithTitle: @"Warning"
                               message: [err localizedDescription]
                              delegate: nil
                     cancelButtonTitle:@"OK"
                     otherButtonTitles:nil];
    [alert show];
     return;
}

//prepare to record
[recorder setDelegate:self];
[recorder prepareToRecord];
recorder.meteringEnabled = YES;

BOOL audioHWAvailable = audioSession.inputIsAvailable;
if (! audioHWAvailable) {
    UIAlertView *cantRecordAlert =
    [[UIAlertView alloc] initWithTitle: @"Warning"
                               message: @"Audio input hardware not available"
                              delegate: nil
                     cancelButtonTitle:@"OK"
                     otherButtonTitles:nil];
    [cantRecordAlert show];
     return;
}

// start recording
[recorder recordForDuration:(NSTimeInterval) 30];

lblStatusMsg.text = @"Recording...";
progressView.progress = 0.0;
timer = [NSTimer scheduledTimerWithTimeInterval:0.2 target:self selector:@selector(handleTimer) userInfo:nil repeats:YES];
NSLog(@"recording");
startRecord.enabled = NO;
stopRecord.enabled = YES;
} 
```

# javascript - 排序对象属性和 JSON.stringify

> ID：16167581
> 
> 赞同：133
> 
> 时间：2013-04-23T10:57:23.957
> 
> 标签：javascript, json

我的应用程序有大量对象，我将它们字符串化并将它们保存到磁盘。不幸的是，当数组中的对象被操作，有时被替换时，对象的属性以不同的顺序列出（它们的创建顺序？）。当我对数组执行 JSON.stringify() 并保存它时，diff 会显示以不同顺序列出的属性，这在尝试使用 diff 和合并工具进一步合并数据时很烦人。

理想情况下，我想在执行字符串化之前按字母顺序对对象的属性进行排序，或者作为字符串化操作的一部分。在许多地方都有用于操作数组对象的代码，并且更改这些代码以始终以明确的顺序创建属性是很困难的。

建议将是最受欢迎的！

一个精简的例子：

```
obj = {}; obj.name="X"; obj.os="linux";
JSON.stringify(obj);
obj = {}; obj.os="linux"; obj.name="X";
JSON.stringify(obj); 
```

这两个 stringify 调用的输出不同，并显示在我的数据的差异中，但我的应用程序并不关心属性的顺序。对象以多种方式和位置构造。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-04-23T11:18:57.860

更简单、现代且当前浏览器支持的方法就是这样：

```
JSON.stringify(sortMyObj, Object.keys(sortMyObj).sort()); 
```

但是，此方法确实会删除任何未引用且不适用于数组中的对象的嵌套对象。如果你想要这样的输出，你也需要展平排序对象：

```
{"a":{"h":4,"z":3},"b":2,"c":1} 
```

你可以这样做：

```
var flattenObject = function(ob) {
    var toReturn = {};

    for (var i in ob) {
        if (!ob.hasOwnProperty(i)) continue;

        if ((typeof ob[i]) == 'object') {
            var flatObject = flattenObject(ob[i]);
            for (var x in flatObject) {
                if (!flatObject.hasOwnProperty(x)) continue;

                toReturn[i + '.' + x] = flatObject[x];
            }
        } else {
            toReturn[i] = ob[i];
        }
    }
    return toReturn;
};
var myFlattenedObj = flattenObject(sortMyObj);
JSON.stringify(myFlattenedObj, Object.keys(myFlattenedObj).sort()); 
```

要以您可以自己调整的方式以编程方式执行此操作，您需要将对象属性名称推送到数组中，然后按字母顺序对数组进行排序并遍历该数组（将按正确的顺序）并从对象中选择每个值那个命令。“hasOwnProperty”也被选中，所以你肯定只有对象自己的属性。这是一个例子：

```
var obj = {"a":1,"b":2,"c":3};

function iterateObjectAlphabetically(obj, callback) {
    var arr = [],
        i;

    for (i in obj) {
        if (obj.hasOwnProperty(i)) {
            arr.push(i);
        }
    }

    arr.sort();

    for (i = 0; i < arr.length; i++) {
        var key = obj[arr[i]];
        //console.log( obj[arr[i]] ); //here is the sorted value
        //do what you want with the object property
        if (callback) {
            // callback returns arguments for value, key and original object
            callback(obj[arr[i]], arr[i], obj);
        }
    }
}

iterateObjectAlphabetically(obj, function(val, key, obj) {
    //do something here
}); 
```

同样，这应该保证您按字母顺序遍历。

最后，以最简单的方式更进一步，该库将递归地允许您对传递给它的任何 JSON 进行排序：[https ://www.npmjs.com/package/json-stable-stringify](https://www.npmjs.com/package/json-stable-stringify)

```
var stringify = require('json-stable-stringify');
var obj = { c: 8, b: [{z:6,y:5,x:4},7], a: 3 };
console.log(stringify(obj)); 
```

输出

```
{"a":3,"b":[{"x":4,"y":5,"z":6},7],"c":8} 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2018-12-03T11:54:02.730

我不明白为什么需要当前最佳答案的复杂性来递归获取所有密钥。除非需要完美的性能，否则在我看来我们可以调用`JSON.stringify()`两次，第一次获取所有密钥，第二次真正完成工作。这样，所有的递归复杂性都由 处理`stringify`，我们知道它知道它的内容，以及如何处理每个对象类型：

```
function JSONstringifyOrder( obj, space )
{
    var allKeys = [];
    var seen = {};
    JSON.stringify(obj, function (key, value) {
        if (!(key in seen)) {
            allKeys.push(key);
            seen[key] = null;
        }
        return value;
    });
    allKeys.sort();
    return JSON.stringify(obj, allKeys, space);
} 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2014-01-21T19:21:04.280

我认为，如果您可以控制 JSON 的生成（听起来像是），那么出于您的目的，这可能是一个很好的解决方案：[json-stable-stringify](https://npmjs.org/package/json-stable-stringify)

来自项目网站：

> 具有自定义排序的确定性 JSON.stringify() 从字符串化结果中获取确定性哈希

如果生成的 JSON 是确定性的，您应该能够轻松区分/合并它。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2016-11-17T04:09:19.247

您可以将属性名称的排序数组作为 的第二个参数传递`JSON.stringify()`：

```
JSON.stringify(obj, Object.keys(obj).sort()) 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2016-03-05T06:33:39.403

*2018 年 7 月 24 日更新：*

此版本对嵌套对象进行排序并支持数组：

```
function sortObjByKey(value) {
  return (typeof value === 'object') ?
    (Array.isArray(value) ?
      value.map(sortObjByKey) :
      Object.keys(value).sort().reduce(
        (o, key) => {
          const v = value[key];
          o[key] = sortObjByKey(v);
          return o;
        }, {})
    ) :
    value;
}

function orderedJsonStringify(obj) {
  return JSON.stringify(sortObjByKey(obj));
} 
```

测试用例：

```
 describe('orderedJsonStringify', () => {
    it('make properties in order', () => {
      const obj = {
        name: 'foo',
        arr: [
          { x: 1, y: 2 },
          { y: 4, x: 3 },
        ],
        value: { y: 2, x: 1, },
      };
      expect(orderedJsonStringify(obj))
        .to.equal('{"arr":[{"x":1,"y":2},{"x":3,"y":4}],"name":"foo","value":{"x":1,"y":2}}');
    });

    it('support array', () => {
      const obj = [
        { x: 1, y: 2 },
        { y: 4, x: 3 },
      ];
      expect(orderedJsonStringify(obj))
        .to.equal('[{"x":1,"y":2},{"x":3,"y":4}]');
    });

  }); 
```

* * *

*不推荐使用的答案：*

ES2016 中的简洁版本。归功于 @codename ，来自[https://stackoverflow.com/a/29622653/94148](https://stackoverflow.com/a/29622653/94148)

```
function orderedJsonStringify(o) {
  return JSON.stringify(Object.keys(o).sort().reduce((r, k) => (r[k] = o[k], r), {}));
} 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2017-04-26T14:16:37.153

[https://gist.github.com/davidfurlong/463a83a33b70a3b6618e97ec9679e490](https://gist.github.com/davidfurlong/463a83a33b70a3b6618e97ec9679e490)

```
const replacer = (key, value) =>
    value instanceof Object && !(value instanceof Array) ? 
        Object.keys(value)
        .sort()
        .reduce((sorted, key) => {
            sorted[key] = value[key];
            return sorted 
        }, {}) :
        value; 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-02-17T16:00:10.390

A recursive and simplified answer:

```
function sortObject(obj) {
    if(typeof obj !== 'object')
        return obj
    var temp = {};
    var keys = [];
    for(var key in obj)
        keys.push(key);
    keys.sort();
    for(var index in keys)
        temp[keys[index]] = sortObject(obj[keys[index]]);       
    return temp;
}

var str = JSON.stringify(sortObject(obj), undefined, 4); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-04-23T13:32:36.627

这与 Satpal Singh 的回答相同

```
function stringifyJSON(obj){
    keys = [];
    if(obj){
        for(var key in obj){
            keys.push(key);
        }
    }
    keys.sort();
    var tObj = {};
    var key;
    for(var index in keys){
        key = keys[index];
        tObj[ key ] = obj[ key ];
    }
    return JSON.stringify(tObj);
}

obj1 = {}; obj1.os="linux"; obj1.name="X";
stringifyJSON(obj1); //returns "{"name":"X","os":"linux"}"

obj2 = {}; obj2.name="X"; obj2.os="linux";
stringifyJSON(obj2); //returns "{"name":"X","os":"linux"}" 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-03-05T06:48:10.920

您可以在 EcmaScript 2015 中按属性名称对对象进行排序

```
function sortObjectByPropertyName(obj) {
    return Object.keys(obj).sort().reduce((c, d) => (c[d] = obj[d], c), {});
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-04-23T11:25:28.167

您可以向对象添加自定义`toJSON`函数，用于自定义输出。在函数内部，以特定顺序将当前属性添加到新对象应在字符串化时保留该顺序。

看这里：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)

没有用于控制排序的内置方法，因为 JSON 数据旨在通过键访问。

这是一个带有一个小例子的jsfiddle：

[http://jsfiddle.net/Eq2Yw/](http://jsfiddle.net/Eq2Yw/)

尝试注释掉`toJSON`函数 - 属性的顺序是相反的。请注意，这可能是特定于浏览器的，即规范中不正式支持排序。它适用于当前版本的 Firefox，但如果您想要一个 100% 健壮的解决方案，您可能必须编写自己的字符串化函数。

**编辑：**

另请参阅有关 stringify 的非确定性输出的 SO question，尤其是 Daff 关于浏览器差异的详细信息：

[如何确定性地验证 JSON 对象是否未被修改？](https://stackoverflow.com/questions/8931967/is-there-a-deterministic-equivalent-of-json-stringify)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-01-05T11:02:55.127

我从@Jason Parham 那里得到了答案并做了一些改进

```
function sortObject(obj, arraySorter) {
    if(typeof obj !== 'object')
        return obj
    if (Array.isArray(obj)) {
        if (arraySorter) {
            obj.sort(arraySorter);
        }
        for (var i = 0; i < obj.length; i++) {
            obj[i] = sortObject(obj[i], arraySorter);
        }
        return obj;
    }
    var temp = {};
    var keys = [];
    for(var key in obj)
        keys.push(key);
    keys.sort();
    for(var index in keys)
        temp[keys[index]] = sortObject(obj[keys[index]], arraySorter);       
    return temp;
} 
```

这解决了数组被转换为对象的问题，它还允许您定义如何对数组进行排序。

例子：

```
var data = { content: [{id: 3}, {id: 1}, {id: 2}] };
sortObject(data, (i1, i2) => i1.id - i2.id) 
```

输出：

```
{content:[{id:1},{id:2},{id:3}]} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-10-02T20:16:31.390

出于某种原因，接受的答案对我来说不适用于嵌套对象。这导致我自己编写代码。当我写这篇文章时，已经是 2019 年末了，该语言中还有更多可用的选项。

更新：我相信[大卫弗隆的回答](https://stackoverflow.com/a/43636793/11471381)比我之前的尝试更可取，我对此嗤之以鼻。我的依赖于对 Object.entries(...) 的支持，因此不支持 Internet Explorer。

```
function normalize(sortingFunction) {
  return function(key, value) {
    if (typeof value === 'object' && !Array.isArray(value)) {
      return Object
        .entries(value)
        .sort(sortingFunction || undefined)
        .reduce((acc, entry) => {
          acc[entry[0]] = entry[1];
          return acc;
        }, {});
    }
    return value;
  }
}

JSON.stringify(obj, normalize(), 2); 
```

--

**保留此旧版本以供历史参考**

**我发现对象中所有键的简单、扁平数组将起作用。**在几乎所有浏览器（不是 Edge 或 Internet Explorer，可以预见）和 Node 12+ 中，现在[Array.prototype.flatMap(...)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap)可用，因此有一个相当短的解决方案。（lodash 等价物也可以。）我只在 Safari、Chrome 和 Firefox 中进行了测试，但我看不出它为什么不能在支持 flatMap 和标准[JSON.stringify(...)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify)的其他任何地方工作。

```
function flattenEntries([key, value]) {
  return (typeof value !== 'object')
    ? [ [ key, value ] ]
    : [ [ key, value ], ...Object.entries(value).flatMap(flattenEntries) ];
}

function sortedStringify(obj, sorter, indent = 2) {
  const allEntries = Object.entries(obj).flatMap(flattenEntries);
  const sorted = allEntries.sort(sorter || undefined).map(entry => entry[0]);
  return JSON.stringify(obj, sorted, indent);
} 
```

有了这个，您可以在没有 3rd 方依赖项的情况下进行字符串化，甚至可以传入您自己的排序算法，该算法对键值条目对进行排序，因此您可以按键、有效负载或两者的组合进行排序。适用于嵌套对象、数组和普通旧数据类型的任何混合。

```
const obj = {
  "c": {
    "z": 4,
    "x": 3,
    "y": [
      2048,
      1999,
      {
        "x": false,
        "g": "help",
        "f": 5
      }
    ]
  },
  "a": 2,
  "b": 1
};

console.log(sortedStringify(obj, null, 2)); 
```

印刷：

```
{
  "a": 2,
  "b": 1,
  "c": {
    "x": 3,
    "y": [
      2048,
      1999,
      {
        "f": 5,
        "g": "help",
        "x": false
      }
    ],
    "z": 4
  }
} 
```

* * *

**如果您必须与较旧的 JavaScript 引擎兼容**，您可以使用这些稍微冗长的版本来模拟 flatMap 行为。客户端必须至少支持 ES5，所以不支持 Internet Explorer 8 或更低版本。

这些将返回与上述相同的结果。

```
function flattenEntries([key, value]) {
  if (typeof value !== 'object') {
    return [ [ key, value ] ];
  }
  const nestedEntries = Object
    .entries(value)
    .map(flattenEntries)
    .reduce((acc, arr) => acc.concat(arr), []);
  nestedEntries.unshift([ key, value ]);
  return nestedEntries;
}

function sortedStringify(obj, sorter, indent = 2) {
  const sortedKeys = Object
    .entries(obj)
    .map(flattenEntries)
    .reduce((acc, arr) => acc.concat(arr), [])
    .sort(sorter || undefined)
    .map(entry => entry[0]);
  return JSON.stringify(obj, sortedKeys, indent);
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-03-18T06:19:32.427

我只是重写了一个提到的例子来使用它`stringify`

```
const stringifySort = (key, value) => {
    if (!value || typeof value !== 'object' || Array.isArray(value)) return value;
    return Object.keys(value).sort().reduce((obj, key) => (obj[key]=value[key], obj), {});
};

JSON.stringify({name:"X", os:"linux"}, stringifySort); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-08-07T15:02:43.367

适用于 lodash、嵌套对象、对象属性的任何值：

```
function sort(myObj) {
  var sortedObj = {};
  Object.keys(myObj).sort().forEach(key => {
    sortedObj[key] = _.isPlainObject(myObj[key]) ? sort(myObj[key]) : myObj[key]
  })
  return sortedObj;
}
JSON.stringify(sort(yourObj), null, 2) 
```

它依赖于 Chrome 和 Node 的行为，即分配给对象的第一个键首先由`JSON.stringify`.

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-04-23T11:50:26.497

我做了一个函数来对对象进行排序，并使用回调 .. 它实际上创建了一个新对象

```
function sortObj( obj , callback ) {

    var r = [] ;

    for ( var i in obj ){
        if ( obj.hasOwnProperty( i ) ) {
             r.push( { key: i , value : obj[i] } );
        }
    }

    return r.sort( callback ).reduce( function( obj , n ){
        obj[ n.key ] = n.value ;
        return obj;
    },{});
} 
```

并用 object 调用它。

```
var obj = {
    name : "anu",
    os : "windows",
    value : 'msio',
};

var result = sortObj( obj , function( a, b ){
    return a.key < b.key  ;    
});

JSON.stringify( result ) 
```

打印`{"value":"msio","os":"windows","name":"anu"}`, 并使用 value 进行排序。

```
var result = sortObj( obj , function( a, b ){
    return a.value < b.value  ;    
});

JSON.stringify( result ) 
```

哪个打印`{"os":"windows","value":"msio","name":"anu"}`

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-04-23T11:21:31.690

尝试：

```
function obj(){
  this.name = '';
  this.os = '';
}

a = new obj();
a.name = 'X',
a.os = 'linux';
JSON.stringify(a);
b = new obj();
b.os = 'linux';
b.name = 'X',
JSON.stringify(b); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-08-10T07:03:09.993

很惊讶没有人提到 lodash 的`isEqual`功能。

> 在两个值之间执行深度比较以确定它们是否相等。
> 
> 注意：此方法支持比较数组、数组缓冲区、布尔值、日期对象、错误对象、映射、数字、对象对象、正则表达式、集合、字符串、符号和类型化数组。对象对象通过它们自己的而不是继承的、可枚举的属性进行比较。函数和 DOM 节点通过严格相等来比较，即 ===。
> 
> [https://lodash.com/docs/4.17.11#isEqual](https://lodash.com/docs/4.17.11#isEqual)

对于最初的问题 - 键的顺序不一致 - 这是一个很好的解决方案 - 当然，如果它发现冲突就会停止，而不是盲目地序列化整个对象。

为避免导入整个库，请执行以下操作：

```
import { isEqual } from "lodash-es"; 
```

* * *

奖励示例：您还可以通过此自定义运算符将其与 RxJS 一起使用

```
export const distinctUntilEqualChanged = <T>(): MonoTypeOperatorFunction<T> => 
                                                pipe(distinctUntilChanged(isEqual)); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-02-22T05:59:31.670

毕竟，它需要一个数组来缓存嵌套对象中的所有键（否则它将忽略未缓存的键。）最旧的答案是完全错误的，因为第二个参数不关心点符号。所以，答案（使用 Set）就变成了。

```
function stableStringify (obj) {
  const keys = new Set()
  const getAndSortKeys = (a) => {
    if (a) {
      if (typeof a === 'object' && a.toString() === '[object Object]') {
        Object.keys(a).map((k) => {
          keys.add(k)
          getAndSortKeys(a[k])
        })
      } else if (Array.isArray(a)) {
        a.map((el) => getAndSortKeys(el))
      }
    }
  }
  getAndSortKeys(obj)
  return JSON.stringify(obj, Array.from(keys).sort())
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-07-23T01:14:15.780

这是一种克隆方法...在转换为 json 之前克隆对象：

```
function sort(o: any): any {
    if (null === o) return o;
    if (undefined === o) return o;
    if (typeof o !== "object") return o;
    if (Array.isArray(o)) {
        return o.map((item) => sort(item));
    }
    const keys = Object.keys(o).sort();
    const result = <any>{};
    keys.forEach((k) => (result[k] = sort(o[k])));
    return result;
} 
```

If 非常新，但似乎可以很好地处理 package.json 文件。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-06-08T10:55:11.537

扩展 AJP 的答案，以处理数组：

```
function sort(myObj) {
    var sortedObj = {};
    Object.keys(myObj).sort().forEach(key => {
        sortedObj[key] = _.isPlainObject(myObj[key]) ? sort(myObj[key]) : _.isArray(myObj[key])? myObj[key].map(sort) : myObj[key]
    })
    return sortedObj;
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-05-09T19:08:36.513

如果列表中的对象没有相同的属性，则在字符串化之前生成一个组合的主对象：

```
let arr=[ <object1>, <object2>, ... ]
let o = {}
for ( let i = 0; i < arr.length; i++ ) {
  Object.assign( o, arr[i] );
}
JSON.stringify( arr, Object.keys( o ).sort() );
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-08-17T08:20:54.570

```
function FlatternInSort( obj ) {
    if( typeof obj === 'object' )
    {
        if( obj.constructor === Object )
        {       //here use underscore.js
            let PaireStr = _( obj ).chain().pairs().sortBy( p => p[0] ).map( p => p.map( FlatternInSort ).join( ':' )).value().join( ',' );
            return '{' + PaireStr + '}';
        }
        return '[' + obj.map( FlatternInSort ).join( ',' ) + ']';
    }
    return JSON.stringify( obj );
} 
```

// 示例如下。在每一层中，对于像 {} 这样的对象，在键排序中展平。对于数组、数字或字符串，像/使用 JSON.stringify 一样展平。

> > FlatternInSort( { c:9, b: { y: 4, z: 2, e: 9 }, F:4, a:[{j:8, h:3},{a:3,b:7}] })
> > 
> > "{"F":4,"a":[{"h":3,"j":8},{"a":3,"b":7}],"b":{"e" :9,"y":4,"z":2},"c":9}"

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-01-03T01:57:43.253

不要与 Chrome 调试器的对象监控相混淆。它显示对象中的排序键，即使实际上它没有排序。在对对象进行字符串化之前，您必须对其进行排序。

* * *

## 回答 #24

> 赞同：-4
> 
> 时间：2013-04-23T11:04:05.250

有`Array.sort`对你有帮助的方法。例如：

```
yourBigArray.sort(function(a,b){
    //custom sorting mechanism
}); 
```

# jquery - 从 json 返回的 sql 数据中删除撇号 + codeigniter

> ID：16167582
> 
> 赞同：0
> 
> 时间：2013-04-23T10:57:25.937
> 
> 标签：jquery, json, codeigniter

我的数据库查询中有以下字段：

```
REPLACE(ProductCode,concat((width*1000),(thickness*1000),REPLACE((convert(varchar,convert(decimal(8,1),length))),'.','')),'') as grade, 
```

然后从 codeigniters 模型和控制器返回到视图：

**模型：**

```
function get_skugrade_grade($q)
{
    $Query="select
              min(grade) as family
            from (SELECT
                    REPLACE(ProductCode,concat((width*1000),(thickness*1000),REPLACE((convert(varchar,convert(decimal(8,1),length))),'.','')),'') as grade,                     
                  FROM database.dbo.ProductList) as p
            where Options like '%$q%'";
    $result = $this->db->query($Query)->row();
    return $result->family;
} 
```

**控制器**

```
function get_skufamily_grades(){
    $this->load->model('Sales_model');
    if (isset($_POST['data'])){
        $q = strtolower($_POST['data']);
        $viewData   =   $this->Sales_model->get_skugrade_grade($q);
        $data_json = json_encode($viewData);
        echo $data_json;
    }
} 
```

**查看请求：**

```
$.post('get_skufamily_grades', {data:selectedObj.value},function(result) 
 { 
 $('input[name^="skugrade_1"]').val(result);
 }); 
```

视图的输出是`"CR"`. 如何删除两个撇号`""`

数据库结果简直了`CR`。我认为我的 jquery / json 添加了这些，因为它不是返回的数字。

当前服务器响应

![在此处输入图像描述](https://i.stack.imgur.com/muRzg.png) 一如既往地感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:00:50.140

是`""`由 json 编码添加的，有效的 json 格式是`{ "key" : "value" }`键和值包含在其中`"`的值，而不是`Number`和`Boolean`。

如果您将 ajax 请求配置为处理 json 请求，则可以解决此问题，使用`dataType: "json"`

更新
我不是 PHP 人，仍然尝试类似

```
function get_skufamily_grades(){
    $this->load->model('Sales_model');
    if (isset($_POST['data'])){
        $q = strtolower($_POST['data']);
        $viewData   =   $this->Sales_model->get_skugrade_grade($q);

        $arr = array('family' => $viewData);
        echo json_encode($arr);
    }
} 
```

然后将ajax请求更改为

```
$.post('get_skufamily_grades', {
    data : selectedObj.value
}, function(result) {
    $('input[name^="skugrade_1"]').val(result.family);
}, 'json'); 
```

# assembly - 将十六进制转换为十进制的汇编代码不起作用

> ID：16167583
> 
> 赞同：2
> 
> 时间：2013-04-23T10:57:30.753
> 
> 标签：assembly, hex, decimal, nasm, multiplication

我有这个汇编代码（linux 80x86 nasm），假设将十六进制数字转换为十进制：

```
 my_func:
    push    ebp
    mov ebp, esp    ; Entry code - set up ebp and esp
    pusha           ; Save registers
    mov dword[LC1],0
    mov ecx,dword[ebp+8]    ; Get argument (pointer to string)

start_loop:
    mov ebx,0       ;zero ebx register
    mov eax,16
    mov edx,0
    mov bl, byte[ecx]   ;bl is the curr number
    jmp bl_to_num   ;change it to be a number

continue:
    add dword[LC1], ebx ;dword[LC1] = dword[LC1]+ebx
    inc ecx
    cmp byte[ecx],0
    je  end_func

    mul dword[LC1]  ;dword[LC1]*eax = edx:eax
    mov     dword[LC1],eax

    jmp start_loop 
```

dword[LC1] 是我返回给 C 函数的参数，而 ecx 是指向接收到的字符串的指针。函数：bl_to_num 只是将 bl 字节转换为数字（a=10，b=11..）当我使用输入 1 运行此代码时，我收到输出 234。当我使用输入 2 运行此代码时，我收到输出 250\. 等等.. 我的错误在哪里？谢谢！

编辑：这是 bl_to_num：

```
bl_to_num:
    cmp bl,'A'
    je  con_a
    cmp bl,'a'
    je  con_a

    cmp bl,'B'
    je  con_b
    cmp bl,'b'
    je  con_b

    cmp bl,'C'
    je  con_c
    cmp bl,'c'
    je  con_c

    cmp bl,'D'
    je  con_d
    cmp bl,'d'
    je  con_d

    cmp bl,'E'
    je  con_e
    cmp bl,'e'
    je  con_e

    cmp bl,'F'
    je  con_f
    cmp bl,'f'
    je  con_f

    sub bl,48
    jmp continue
con_a:
      mov   bl,10
      jmp   continue
con_b:
      mov   bl,11
      jmp   continue
con_c:
      mov   bl,12
      jmp   continue
con_d:
      mov   bl,13
      jmp   continue
con_e:
      mov   bl,14
      jmp   continue
con_f:
      mov   bl,15
      jmp   continue 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:05:28.200

您的结果表明您的输入字符串在 NULL 终止符之前包含换行符 (0x0A)。所以如果你输入`'1'`你会得到：

第一次迭代：
`LC1 += 1`
`LC1 *= 16 (= 16)`

第二次迭代：
`LC += zero_extend(10-48)`即`LC += 218 (= 16 + 218 = 234)`

您的`bl_to_num`例程也可以简化很多：

```
bl_to_num:
  cmp bl,'9'
  jbe digit
  cmp bl,'F'
  jbe already_uppercase
  sub bl,' '
  already_uppercase:
  sub bl,7
  digit:
  sub bl,'0'
  jmp continue 
```

**编辑**：以下在我的机器（Xeon / Ubuntu 64 位）上对我来说很好：

```
format: .asciz "%d\n"

.bss
    LC1:  .long 0

.text
.globl main
.type   main, @function
main:

movl  8(%esp),%ecx   # get argv    
movl  4(%ecx),%ecx   # get argv[1] (argv[0] is the program name)

start_loop:
xor  %ebx,%ebx       
movl $16,%eax
xor  %edx,%edx
movb (%ecx),%bl   

sub  $48,%bl     # simplified bl_to_num that handles only '0'..'9'

continue:
add  %ebx,LC1 
inc  %ecx
cmpb $0,(%ecx)
je   end_func

mull LC1  
movl %eax,LC1

jmp  start_loop

end_func:

movl LC1,%eax
pushl %eax
pushl $format       # push the format string
call printf
addl $8,%esp        # pop the arguments

movl $0, %eax    # return value 
ret 
```

**$ gcc -m32 -o hexarg hexarg.s**
**$ ./hexarg 67**
**103**

# r - 如何访问 cox.zph 组件

> ID：16167585
> 
> 赞同：0
> 
> 时间：2013-04-23T10:57:33.770
> 
> 标签：r, sweave, cox-regression

我想在 Sweave 文档中使用 的`P`值，如下所示：`cox.zph`

```
<<echo=FALSE,results=tex>>=
campo = campos[1]
m1=coxph(Surv(TimeVar,EventVar)~Factor)
z=cox.zph(m1)
….
@ 
```

如果我分配给一个对象`print(cox.zph(m1))`：

```
temp = print(cox.zph(m1)) 
```

我在第三个组件中有 p 值`temp[3]`，但指令`print(z)`将结果输出到文档，我只想将`P`值存储在另一个变量中，而不是显示结果。

我尝试了隐形功能，但它对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:38:42.300

要回答您的具体问题，`results=hide`请在您的选项列表中使用。

```
<<echo=FALSE,results=hide>>=
campo = campos[1]
m1=coxph(Surv(TimeVar,EventVar)~Factor)
z=cox.zph(m1)
temp = print(x)
@ 
```

然后，您可以访问该`temp`变量。更好的解决方案是拉出`z`您需要的对象部分。所以在你的情况下，这将是：

```
##z is a list
z1 = z[[1]] 
```

变量`z1`是一个包含您需要的信息的矩阵。

# video - 使用 gstreamer 将 h264 流包装成 mp4

> ID：16167586
> 
> 赞同：3
> 
> 时间：2013-04-23T10:57:40.217
> 
> 标签：video, h.264, mp4, gstreamer

如何使用 Gstreamer 将纯 h.264 流包装到 mp4 中，以便我可以寻找视频中的特定位置？使用 Gstreamer 是因为它的许可证要求，所以请不要提供 ffmpeg！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T17:29:36.863

```
gst-launch-1.0 filesrc location=stream.h264 ! video/x-h264 ! h264parse ! mp4mux ! filesink location=video.mp4 
```

# python - 在 IPython Notebook 中以分离模式运行一些任务

> ID：16167589
> 
> 赞同：17
> 
> 时间：2013-04-23T10:57:46.397
> 
> 标签：python, background, ipython, ipython-notebook, ipython-magic

是否可以在 IPython Notebook 中运行一些较长的任务，关闭浏览器，然后在一段时间后再次打开它并显示这些任务的结果？

说，这样的任务：

```
def f():
    import time
    time.sleep(100)
    with open("result.txt", "w") as fh:
        fh.write("Done.") 
```

如果我正常运行任务，并在完成前关闭浏览器，当我打开它时，我看到 no `'result.txt'`。

如果我使用[`%px`](http://ipython.org/ipython-doc/dev/parallel/magics.html#px)魔法或并行执行来运行它 - 如果我在完成之前关闭浏览器也没有结果。

任何可用的扩展或黑客攻击？还是我错过了什么？

**更新 1：**

[尽管IPython 中](https://github.com/ipython/ipython/blob/master/examples/lib/BackgroundJobs.ipynb)有后台作业控制支持，但在我断开浏览器后后台作业会变得陈旧。我唯一能想到的是`%connect_info`在关闭浏览器之前发出，然后使用从屏幕终端连接

```
ipython console --existing <ID>.json 
```

并从那里运行我的工作。

**更新 2：**

更有用的技巧是结合`ipython console`和工作控制。即，我在浏览器中启动后台作业时打开控制台并附加到同一个会话，然后我可以自由地关闭它，直到作业完成。

**更新 3：**

它似乎从 iPython 1.0dev 版本开始工作，没有任何黑客攻击。你只需运行你想要的，关闭浏览器，它仍然运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:20:21.460

我通常使用 linux 命令屏幕，它会打开一个可以在后台运行的不同 shell。

例如，当您第一次进入 shell 时，您输入“screen”。然后它会给你一个新的终端。使用上面的命令在那里启动 ipython。运行后，在键盘上按 CTRL+A CTRL+D。然后程序开始在后台运行，您可以关闭终端。如果您想返回它，请在命令行中键入“screen -r”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T23:23:17.850

我不知道这在 IPython 1.0 中是否是新的，但在我的 IPython 笔记本中，如果我调用你的函数`f()`并关闭浏览器，内核将在后台运行，过了一会儿（我改为`time.sleep(10)`）我看到了`results.txt`文件生成。我认为您通常在控制台中启动的内核不会在您关闭浏览器窗口时停止。让我知道我是否弄错了。

# typo3 - maxw 和 if 取决于图像是纵向还是横向

> ID：16167590
> 
> 赞同：2
> 
> 时间：2013-04-23T10:57:50.193
> 
> 标签：typo3, typoscript

我只想为给定的图像设置 maxW 。但我想为纵向或横向格式提供另一个价值。

我试过的是这个（不起作用，这就是我问的原因..）

```
 10 = IMAGE
  10 {
    stdWrap.wrap = <div class="col_3-4">|</div>
    file {
      import = fileadmin/_processed_/
      import.data = levelmedia:-1
      import.listNum = 0
      treatIdAsReference = 1
      maxW = 585
      maxW.if {
        value.data = TSFE:lastImageInfo|0
        isGreaterThan.data = TSFE:lastImageInfo|1
      }
      maxW = 385
      maxW.if {
        value.data = TSFE:lastImageInfo|1
        isGreaterThan.data = TSFE:lastImageInfo|0
      }
    }
  } 
```

对于宽度和高度相等的情况，我没有在这里处理这个..

请问谁能帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:28:08.727

您的代码几乎没问题，但*maxW*的第一块被忽略，因为它*总是*被第二块重写。

因此，您应该尝试在此处使用**覆盖**：

```
 <snip>
  maxW = 585
  maxW.override = 385
  maxW.override.if {
    value.data = TSFE:lastImageInfo|1
    isGreaterThan.data = TSFE:lastImageInfo|0
  } 
```

最后你说：使用 585。并用 385 覆盖值，但仅在高度 > 宽度时覆盖。

# c# - 设置最大。大小，最大整数和最大字符串长度

> ID：16167592
> 
> 赞同：0
> 
> 时间：2013-04-23T10:58:03.177
> 
> 标签：c#, visual-studio-2012

在我的项目中，我有输入数据的文本框，例如 Name 、 Age 等。

1.  对于名称文本，我想让它接受一定数量的 str。

2.  年龄文本框只接受 3 个整数和某个数字的最大值，我无法添加更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:59:52.280

您可以使用控件的`MaxLength`属性`TextBox`- 您可以直接在代码中设置，也可以从 VS 设计器的属性窗口进行配置。

[http://msdn.microsoft.com/en-GB/library/system.windows.forms.textboxbase.maxlength.aspx](http://msdn.microsoft.com/en-GB/library/system.windows.forms.textboxbase.maxlength.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:09:58.243

好吧，您应该自己尝试一下，但这里有一些提示：这串代码使文本只接受字母没有数字，没有空格转到文本名称属性，来自事件双击 KeyPress 并尝试以下操作：

```
 private void TxtName_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (!char.IsControl(e.KeyChar) && !char.IsLetter(e.KeyChar) && e.KeyChar != '.')
            e.Handled = true;

    } 
```

这可以设置所写字母的最大大小，从文本名称属性，转到事件并双击 KeyDown 并尝试以下操作：

```
 private void TxtName_KeyDown(object sender, KeyEventArgs e)
        {
            int i = TxtName.Text.Length;
            if(!(e.KeyData == Keys.Back && e.KeyData == Keys.Delete))
                try
                {
                    if (TxtName.Text.Length >= 20)
                    {
                        e.SuppressKeyPress = true;
                        e.Handled = true;
                    }
                }
                catch { } 
} 
```

此代码设置最大值。整数值，转到 TextAge 属性，从事件中双击离开并尝试以下操作：

```
 private void TxtAge_Leave(object sender, EventArgs e)
    {
        string myString = (sender as TextBox).Text;
        int i = Convert.ToInt16(myString);
        if (i > 150)
        {
                MessageBox.Show("Invalid Age");
                TxtAge.Clear();
            (sender as TextBox).Focus();
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:19:17.667

'For Age TextBox 将其写入 Keypress 事件

```
Public Sub TextBox1_Keypress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles TextBox1.KeyPress

    Dim maxlen as Integer = 2 'Maximum Number Allowed

    Dim key = (Microsoft.VisualBasic.Asc(e.KeyChar))

        If key = 9 Or key = 8 Or (key >= 48 And key <= 57) Then
        Else
            e.Handled = True
            Beep()
        End If

    If sender.TextLength >= maxlen And key <> 8 And key <> 9 Then
        e.Handled = True
        Beep()
    End If
End Sub 
```

'对于文本

```
 Public Sub TextBox2_Keypress(ByVal sender As Object, ByVal e As  System.Windows.Forms.KeyPressEventArgs) Handles TextBox2.KeyPress
    Dim key = (Microsoft.VisualBasic.Asc(e.KeyChar))

    Dim maxlen as Integer = 10 'Maximum Allowed Text

    If sender.TextLength > maxlen Then
        e.Handled = True
        If key = 8 Then
            e.Handled = False
        End If
    End If
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T11:01:54.353

使用`MaxLength`TextBox 控件的属性

您可以使用[验证控件](http://www.w3schools.com/aspnet/aspnet_refvalidationcontrols.asp)

示例：对于年龄，将 MaxLength 属性设置为 3

# javascript - IE8：设置类时未调用复选框 onclick

> ID：16167594
> 
> 赞同：1
> 
> 时间：2013-04-23T10:58:06.623
> 
> 标签：javascript, html, xhtml, xhtml-1.0-strict

我有这样的代码

```
<input type='checkbox' class='rating'  id="sample"    onclick='checkboxcheck(parameters)'  />
                    <label for="sample"></label> 
```

和 CSS：

```
.rating {
    display:none;
}
input[type="checkbox"] + label {
    width: 15px;
    height: 15px;
    display: inline-block;
    background-image:url('../images/white_small.png') ;
}

input[type="checkbox"] + label:hover {
    width: 15px;
    height: 15px;
    display: inline-block;
    background-image:url('../images/golden_small.png') ;

}

input[type=checkbox]:checked + label {
    width: 15px;
    height: 15px;
    display: inline-block;
    background-image:url('../images/golden_small.png') ;
} 
```

如果我从复选框标记中删除类属性，我的 JS 函数就会调用。我只想在不删除类属性的情况下调用该函数。我从 SO 那里得到了一种解决方案，只需将文档类型更改为

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

请提供正确的方法来克服。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T15:32:33.160

我可以建议修改您的方法吗？

而不是`display:none;`您可以用 div 包装您的复选框并使用它来显示或隐藏您的复选框。我怀疑你会一直想把它隐藏起来。

**HTML：**

```
<div class="hideRating">
     <input type="checkbox" class="rating" id="sample" onclick="checkboxcheck('parameters')" />
</div>
<label for="sample"></label> 
```

**附加CSS：**

```
.hideRating {
  width:0;
  height:0;
  overflow:hidden;
}
.showRating {
  width:auto;
  height:auto;
  overflow:visible;
} 
```

*替换显示：无；在您的代码中声明*

`<div />`如果您需要 JS/jQuery 函数的示例来更新元素的类，请告诉我。

# php - URL 中的魔术文件夹名称

> ID：16167606
> 
> 赞同：1
> 
> 时间：2013-04-23T10:59:02.793
> 
> 标签：php, css, directory

我刚刚和这个战斗了两个小时。这是非常令人沮丧的。

**文件夹名称为“adsq”的 URL（还有其他）——`css`在 PHP 页面中看不到文件。**

这是两个相同的页面，不同之处仅在于文件夹名称：

[http://chengyangxj.com/adsq/index2.php](http://chengyangxj.com/adsq/index2.php)

[http://chengyangxj.com/ads/index2.php](http://chengyangxj.com/ads/index2.php)

一个正在工作，另一个`adsq`没有。它只是没有看到`css`文件。

我在 3 台具有不同操作系统的计算机上进行了尝试。

这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:17:57.507

如果您的 CSS 被 addblockers 阻止，请尝试使用不包含单词“ads”的文件夹中的绝对路径链接 CSS

例如

```
<link type="text/css" rel="stylesheet" href="/assets/css/mystyle.css"> 
```

# python - Python中是否有任何模块可以使用它在磁盘上获得与内存中相同的数据大小？

> ID：16167607
> 
> 赞同：-1
> 
> 时间：2013-04-23T10:59:06.517
> 
> 标签：python, pickle

我试过泡菜，但磁盘上的大小非常大。我尝试了所有协议；磁盘上的输出文件大小大于内存中的大小。我正在使用以下代码：

```
#Here, a is a string.
def picklate(a):
    picklist.append(a)
    pickle.dump(a,picklefile,2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:29:05.980

编辑：刚刚写了这个答案而没有真正关注pickle实际保存的内容，很明显对于字符串，pickle实际上与`numpy`文件大小几乎相同。也就是说，`numpy.save`在存储二进制数据数组的一般情况下很好，所以我将把这个答案留在这里。

`numpy.save`在保持尺寸大致相同方面做得很好。

```
import string, random, numpy
mystring = ''.join(random.choice(string.lowercase) for i in range(1000000))
numpy.save('my_file', mystring) 
```

您可以很容易地将其取回：

```
mystring = str(numpy.load('my_file.npy')) 
```

如果您希望文件更小，您也可以使用`numpy.savez_compressed`（尽管它的用法略有不同 - 例如`numpy.savez`，它是为存储多个数组而设计的）。

# php - 停止 twitter embed 有这么大的底部边距？

> ID：16167608
> 
> 赞同：2
> 
> 时间：2013-04-23T10:59:22.090
> 
> 标签：php, javascript, html

有没有办法让推文的推文嵌入代码在它们的底部没有这么大的边距？

使用通用嵌入代码 twitter 为您提供：

```
<blockquote class="twitter-tweet"><p>@<a href="https://twitter.com/gamingonlinux">gamingonlinux</a> the Mac version is taking us longer than we anticipated, so the Linux version has been shifted, too. We'll keep you posted!</p>— Strike Suit Zero (@StrikeSuitZero) <a href="https://twitter.com/StrikeSuitZero/status/326626905392545792">April 23, 2013</a></blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script> 
```

链接：[http ://www.gamingonlinux.com/articles/strike-suit-zero-space-combat-game-delayed-for-linux.1942](http://www.gamingonlinux.com/articles/strike-suit-zero-space-combat-game-delayed-for-linux.1942)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:09:00.010

还有一个问题：

```
<div id='AYAH'></div><script src='https://ws.areyouahuman.com/ws/script/175542a83683bff431e8fce2f2e1336470c11a63/51766b1e3587f' type='text/javascript' language='JavaScript'></script> 
```

它添加了一个高度为 200px 但没有内容的 iframe：

```
<iframe id="AYAH_iframe1366715281731" src="https://ws.areyouahuman.com//ws/chooseGame/1/1/51766b8f6f114/11-7" width="400" height="200" scrolling="no" frameborder="0" style="border: none; overflow: hidden;"></iframe> 
```

# sql-server-2008 - 如何在 sql sever 2008 的一列中拆分项目

> ID：16167609
> 
> 赞同：0
> 
> 时间：2013-04-23T10:59:23.033
> 
> 标签：sql-server-2008

```
WITH MYTABLE AS (
select Executive, count([Cat A]) AS [1-3], count([Cat B]) AS [4-6],count([Cat C]) AS [7-10],count([Cat D]) AS [11-15],count([Cat E]) AS [16+]
      from (
            select 
                  Executive,
                case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 0 and DATEDIFF(d,[next follow up date],getdate()) < 4)
                              then 'A'
                  end as [Cat A],
                  case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 3 and DATEDIFF(d,[next follow up date],getdate()) < 7)
                              then 'B'
                  end as [Cat B],
                  case when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 6 and DATEDIFF(d,[next follow up date],getdate()) < 11)
                              then 'C'
                  end as [Cat C],
                  case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 10 and DATEDIFF(d,[next follow up date],getdate()) < 16)
                              then 'D'
                  end as [Cat D],
                  case  when [Next Follow Up Date] < GETDATE() and (DATEDIFF(d,[next follow up date],getdate()) > 15)
                              then 'E'
                  end as [Cat E]
                  from vw_FollowUps)
            as Table1

      group by Executive, [Cat A], [Cat B], [Cat C], [Cat D], [Cat E]
      )
  Select T1.Executive, SUM([1-3]) AS [1-3],SUM([4-6]) AS [4-6],SUM([7-10]) AS [7-10],SUM([11-15]) AS [11-15],SUM([16+]) AS [16+]
  from MYTABLE T1
  GROUP BY T1.Executive 
```

* * *

```
i got output below

 Executive  1-3  4-6  7-10  11-15  16+

 kushali     1    2    0     1      2
 nirupama    0    1    1     3      1 
```

* * *

但我需要下面的输出-这里我想要项目列以及我们如何将项目拆分为一列

```
Executive   Projects                 1-3  4-6  7-10  11-15  16+

kushali    swgruha,runi,nanuapa       1    2    0     1      2
nirupama   swgruha,runi,nanuapa       1    2    0     1      2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:15:59.770

从您的示例中，您似乎在询问如何以这种形式汇总一系列记录...

```
 kushali      swgruha    1
 kushali      runi       1
 kushali      nanuapa    2 
```

...到这种形式：

```
kushali      swgruha,runi,nanuapa      4 
```

...这样您就可以对第一列进行 GROUP，将第二列聚合为 CSV（逗号分隔变量）字符串，然后对第三列执行 SUM。

这可以做到，并且有多种方法。

在不知道哪个表包含您要聚合成 CSV 字符串的字符串的情况下，我无法给您准确的 SQL 语句。[但是您可以在此处](http://www.annlewkowicz.com/2011/01/doing-things-with-strings-sql-xml-and.html)找到分步示例。（免责声明：这是我的博客。）您可以使用 CTE 和一些 XML 函数来实现。

# apache2 - rcapache2extreme-configtest 返回 NOT OK 但一切正常

> ID：16167610
> 
> 赞同：0
> 
> 时间：2013-04-23T10:59:31.560
> 
> 标签：apache2

跑步

```
rcapache2 extreme-configtest 
```

在我的 SLES11 SP2 上的 Apache 2.2.12 上返回

```
Syntax: NOT OK:
Syntax error on line 39 of /etc/apache2/somedirectory/ssl.somedomain.conf: SSLCertificateKeyFile:      file '/etc/apache2/ssldirectory/somekeyfile' does not exist or is empty 
```

但是 /etc/apache2/ssldirectory/somekeyfile 在那里并且不为空。

```
rcapache2 configtest 
```

工作，服务器启动没有任何错误显示。没有记录错误，一切似乎都按预期工作。漏洞？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T13:19:16.053

如果其他人遇到此问题，请自行回答。

这显然是预期的行为。

[打开 Suse 文档：](https://doc.opensuse.org/documentation/html/openSUSE_121/opensuse-reference/cha.apache2.html)

> **configtest 或extreme-configtest** 检查配置文件的语法而不影响正在运行的Web 服务器。因为每次启动、重新加载或重新启动服务器时都会强制执行此检查，因此通常不需要显式运行测试（如果发现配置错误，则不会启动、重新加载或重新启动 Web 服务器）。***extreme-configtest 选项以nobody 用户身份启动Web 服务器并实际加载配置，因此可以检测到更多错误。请注意，虽然配置已加载，但无法测试 SSL 设置，因为任何人都无法读取 SSL 证书。***

# android - 使用 Intent.getExtras 时遇到 NullPointerException

> ID：16167611
> 
> 赞同：1
> 
> 时间：2013-04-23T10:59:31.863
> 
> 标签：android, android-intent, nullpointerexception

在方法 performCrop() 中，代码如下：

```
public void performCrop() {
    try {
        Intent cropIntent = new Intent("com.android.camera.action.CROP");
        cropIntent.setDataAndType(picUri, "image/*");
        cropIntent.putExtra("crop", "true");
        ...
        startActivityForResult(cropIntent, PIC_CROP);
    } catch (ActivityNotFoundException anfe) {
        ...
    } 
```

在 onActivityResult 方法中，代码：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    ...
    Bundle extras = data.getExtras();//Here occurs the exception
    ...
    }
} 
```

# c# - Fluent Validation - 必须设置 n 个项目之一

> ID：16167612
> 
> 赞同：4
> 
> 时间：2013-04-23T10:59:43.387
> 
> 标签：c#, validation, fluentvalidation

我有一个名为“CustomerDataContract”的类，它具有三个属性：MobilePhone、OfficePhone 和 PrivatePhone。为了与客户取得联系，必须设置至少一个属性。

我创建了一个 Validator-Class 并添加了一个名为“CheckForAnyPhoneNumber”的自定义规则来检查是否至少提供了一个电话号码。这几乎解决了我的问题。我唯一的问题是，如果我清除例如 MobilePhone-Attribute 它会被评估并处于错误状态。如果我现在输入 OfficePhone 号码，MobilePhone-Attribute 不会被重新评估并保持错误模式。

知道如何正确解决这个问题吗？我也尝试创建一个 RuleSet 但没有成功。

这是（部分）CustomerDataContract：

```
public partial class CustomerDataContract
{

    public CustomerDataContract Clone()
    {
        return (CustomerDataContract) MemberwiseClone();
    }

    public override ValidationResult SelfValidate()
    {
        return ValidationHelper.Validate<CustomerDataContractValidator, CustomerDataContract>(this);
    }

} 
```

所有 DataContract 的基类：

```
[Serializable]
public abstract class BDataModel : IDataErrorInfo, INotifyPropertyChanged
{

    [field: NonSerialized]
    private ValidationResult _currentState = new ValidationResult();

    public ValidationResult CurrentValidationState
    {
        get { return _currentState; }
        set 
        { 
            _currentState = value;
            OnPropertyChanged("CurrentValidationState");
            OnPropertyChanged("IsValid");
            OnPropertyChanged("Error");
        }
    }

    #region INotifyPropertyChanged

    [field: NonSerialized]
    public event PropertyChangedEventHandler PropertyChanged;

    public void OnPropertyChanged(params string[] propertyName)
    {
        propertyName.ToList().ForEach(x =>
        {
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(x));
        });
    }

    #endregion

    public virtual ValidationResult SelfValidate()
    {
        return new ValidationResult();
    }

    public bool IsValid
    {
        get
        {
            if (CurrentValidationState == null)
                CurrentValidationState = SelfValidate();
            return CurrentValidationState.IsValid;
        }
    }

    #region IDataErrorInfo

    public string Error
    {
        get { return ValidationHelper.GetError(CurrentValidationState); }
    }

    public string this[string columnName]
    {
        get
        {
            CurrentValidationState = SelfValidate();
            if (_currentState == null) return string.Empty;
            var columnResults = _currentState.Errors.FirstOrDefault(x => string.Compare(x.PropertyName, columnName, true) == 0);
            return columnResults != null ? columnResults.ErrorMessage : string.Empty;
        }
    }

    #endregion

} 
```

这是验证器类：

```
public class CustomerDataContractValidator : AbstractValidator<CustomerDataContract>
{
    private readonly ILanguageManager _languageManager = LanguageManager.Instance;

    public CustomerDataContractValidator()
    {
        RuleFor(val => val.Lastname).NotEmpty().WithMessage(_languageManager.LanguageData["Global.Validation.ProvideLastname"]);
        RuleFor(val => val.Firstname).NotEmpty().WithMessage(_languageManager.LanguageData["Global.Validation.ProvideFirstname"]);
        RuleFor(val => val.Active).NotEmpty().WithMessage(_languageManager.LanguageData["Global.Validation.ProvideActive"]);
        RuleFor(val => val.Gender).NotEmpty().WithMessage(_languageManager.LanguageData["Global.Validation.ProvideGender"]);
        RuleFor(val => val.Mail).EmailAddress().When(val => !String.IsNullOrEmpty(val.Mail)).WithMessage(_languageManager.LanguageData["Global.Validation.ProvideValidEmail"]);

        // At least one phone number has to be filled in order to contact the customer
        RuleFor(val => val.MobilePhone).Must(CheckForAnyPhoneNumber).WithMessage(_languageManager.LanguageData["Global.Validation.ProvideAnyPhone"]);
        RuleFor(val => val.OfficePhone).Must(CheckForAnyPhoneNumber).WithMessage(_languageManager.LanguageData["Global.Validation.ProvideAnyPhone"]);
        RuleFor(val => val.PrivatePhone).Must(CheckForAnyPhoneNumber).WithMessage(_languageManager.LanguageData["Global.Validation.ProvideAnyPhone"]);

    }

    /// <summary>
    /// Checks wheter or not any phone number has been provided
    /// </summary>
    /// <param name="customer">The customer</param>
    /// <param name="phoneNumber">The phone number</param>
    /// <returns></returns>
    private static bool CheckForAnyPhoneNumber(CustomerDataContract customer, string phoneNumber)
    {
        return (!String.IsNullOrEmpty(customer.MobilePhone) || !String.IsNullOrEmpty(customer.OfficePhone) || !String.IsNullOrEmpty(customer.PrivatePhone));
    }
} 
```

和验证助手：

```
public class ValidationHelper
{
    public static ValidationResult Validate<T, K>(K entity)
        where T : IValidator<K>, new()
        where K : class
    {
        IValidator<K> validator = new T();
        return validator.Validate(entity);
    }

    public static string GetError(ValidationResult result)
    {
        var errorMessage = "";
        if (result != null)
        {
            var failure = result.Errors.FirstOrDefault();
            if(failure != null)
            {
                errorMessage = failure.ErrorMessage;
            }
        }
        return errorMessage;
    }
} 
```

视图模型：

```
public class CustomerViewModel : BMovingSelectionViewModel, IEventListener, ICustomerViewModel
{

    private CustomerDataContract _customer;

    public CustomerDataContract Customer
    {
        get
        {
            return _customer;
        }

        set
        {
            if (_customer != value)
            {
                _customer = value;
                OnPropertyChanged(() => Customer);
            }
        }
    }
} 
```

和观点：

```
<TextBlock Text="{MarkupExtensions:LanguageManager Global.Person.PhoneOffice}" Grid.Row="3" Grid.Column="0" VerticalAlignment="Center" />
<TextBox Grid.Row="3" Grid.Column="1" Text="{Validation:ValidationBinding Path=Customer.OfficePhone}" HorizontalContentAlignment="Stretch"  />

<TextBlock Text="{MarkupExtensions:LanguageManager Global.Person.PhonePrivate}" Grid.Row="4" Grid.Column="0" VerticalAlignment="Center" />
<TextBox Grid.Row="4" Grid.Column="1" Text="{Validation:ValidationBinding Path=Customer.PrivatePhone}" />

<TextBlock Text="{MarkupExtensions:LanguageManager Global.Person.PhoneMobile}" Grid.Row="5" Grid.Column="0" VerticalAlignment="Center" />
<TextBox Grid.Row="5" Grid.Column="1" Text="{Validation:ValidationBinding Path=Customer.MobilePhone}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:18:52.747

要使 WPF 更新错误信息，需要触发它来执行此操作。该触发器是`PropertyChanged`绑定属性上的事件。

* * *

最简单的解决方案是让您的视图模型参与进来。如果你能做到这一点，你只需要在`PropertyChanged`依赖属性组中每个属性的设置器中为所有依赖属性引发事件。
这意味着设置`PhoneOffice`会引发`PropertyChanged`for`"PhoneOffice"`和`"PhonePrivate"`for `"PhoneMobile"`。

* * *

另一种解决方案是使用规则集并将相关代码放入基类中。要使其工作，需要执行以下步骤：

1.  让基类监听自己的`PropertyChanged`事件
2.  在事件处理程序中，获取此属性的验证规则
3.  获取同一规则集的所有其他验证规则
4.  提高`PropertyChanged`验证规则的属性

# android - 你将如何在android中实现登录？

> ID：16167613
> 
> 赞同：0
> 
> 时间：2013-04-23T10:59:47.420
> 
> 标签：android

请注意，我已经阅读了几篇文章，但我仍然想知道，因为我正在努力实现这一点：

*   登录一次，“永远记住”直到注销
*   避免频繁发送密码
*   创建类似令牌的东西。

所以这是我的主要问题：令牌是随机生成的，对吗？所以想象一下有人使用wireshark 并读取了这个令牌。然后外来者可以使用这个令牌伪装成真正的用户。

我怎么能控制它？

想过发送IMEI并用令牌对其进行哈希处理，但它有点相同，IMEI可以伪造。考虑发送IP，但如果用户从3G切换到Wifi，令牌会崩溃，我不希望那样。

# android - 如何在 Android 中停止或销毁 VideoView

> ID：16167618
> 
> 赞同：3
> 
> 时间：2013-04-23T11:00:23.483
> 
> 标签：android, android-mediaplayer

在我的主要活动中，当用户单击“跳过”按钮时，我正在 VideoView 上播放视频：-

```
 skip_button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                vv.stopPlayback();
                vv = null;
                video_layout.setVisibility(View.GONE);
                main_layout.setVisibility(View.VISIBLE);    
            }
        }); 
```

下一个 Activity 将打开到现在，这工作正常，但是当回到具有 VideoView 的上一个 Activity 时，它需要很长时间才能返回。

这是控制台消息显示：

```
04-23 16:09:29.091: I/MediaPlayer(3152): MediaPlayer 

04-23 16:09:29.091: I/MediaPlayer(3152): MediaPlayer setDataSource(context, uri,headers)

04-23 16:09:29.201: I/MediaPlayer(3152): MediaPlayer setDisplay()

04-23 16:09:29.311: I/MediaPlayer(3152): MediaPlayer handleMessage what=5

04-23 16:09:29.311: I/MediaPlayer(3152): MediaPlayer handleMessage what=1

04-23 16:09:29.311: D/MediaPlayer(3152): getMetadata 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:07:49.667

你有没有在活动的oncreate中初始化它-

```
final VideoView myVideoView = (VideoView)findViewById(R.id.videoView1);
            myVideoView.setVideoPath("/sdcard/demovideo.mp4");
            MediaController controller=new MediaController(this);
            myVideoView.setMediaController(controller);
            myVideoView.requestFocus(); 
```

# web-crawler - 用 nutch 爬行时出错

> ID：16167620
> 
> 赞同：1
> 
> 时间：2013-04-23T11:00:29.470
> 
> 标签：web-crawler, nutch

我试图用 nutch 抓取网站并得到这个错误：

```
java.net.MalformedURLException: no protocol:
    Exception in thread "main" java.io.IOException: Job failed!
            at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1265)
            at org.apache.nutch.crawl.Injector.inject(Injector.java:296)
            at org.apache.nutch.crawl.Crawl.run(Crawl.java:127)
            at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
            at org.apache.nutch.crawl.Crawl.main(Crawl.java:55) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T23:56:34.440

检查你的种子清单。运行注入器作业时发生此错误。可能是由于您的种子列表。您的种子网址应如下所示：**[http://www.example.com](http://www.example.com)**。您必须将协议添加为 "http//" 。

# android - 以编程方式在进度条上设置进度

> ID：16167622
> 
> 赞同：-2
> 
> 时间：2013-04-23T11:00:32.313
> 
> 标签：android, android-progressbar

当我的进度条从 0 开始时，我想设置每秒的进度，直到达到 100%。

如何才能做到这一点。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/container_dialog"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/blackie"
    android:gravity="center"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Envoie en cours..."
        android:textColor="@color/white"
        android:textSize="@dimen/eighteen_sp"
        android:textStyle="bold" />

    <ProgressBar
        style="@style/CustomProgressBar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="15dip"
        android:max="100"
        android:progress="50"
        />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:07:08.577

```
int progress = 0;
Handler handler = new Handler();
handler.postDelayed(new Runnable() {

    @Override
    public void run() {
        // TODO Auto-generated method stub

        progress = Math.min(100, progress + 10); 
        progressBar.setProgress(progress);
        if( progress != 100 )
        {
            handler.postDelayed(this, 1000);
        }else
        { 
            handler.removeCallback(this);
         }

    }
}, 1000); 
```

您也可以考虑为您提供一个 id，`ProgressBar`以便您可以在`Activity`using`findViewById`方法中访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:05:49.073

```
Handler mHandler = new Handler(); 
int progress=0;

private Runnable mUpdateSpinnerTask = new Runnable() {
       public void run() {

          yourProgressBar.setProgress(progress);
           progress++
            if(progress<100)
           mHandler.postDelayed(this, 1000);

       }
    };

mHandler.postDelayed(mUpdateSpinnerTask, 1000); 
```

# templates - 将 Joomla 2.5 模板转换为 3.0，现在模块位置未显示

> ID：16167625
> 
> 赞同：0
> 
> 时间：2013-04-23T11:00:40.427
> 
> 标签：templates, upgrade, joomla3.0

我最近将一个Joomla 2.5模板转换为3.0，模板安装成功。但是模块位置不起作用。我确定问题出在 index.php 文件中。唯一加载的是徽标，但模板的其余部分似乎处于非活动状态。请向我解释为什么会这样，或者我是否必须重新定义模板的所有部分。还包括如何在 joomla 3.0 中定义模块位置，以便我获得所需的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:29:35.760

在这方面，我认为 Joomla 2.5 和 3.0 之间没有任何改变。要在模板中加载模块位置，您仍然使用：

```
<jdoc:include type="modules" name="position-1" /> 
```

或者如果您想应用特殊的镀铬：

```
<jdoc:include type="modules" name="position-1" style="html5" /> 
```

现在，在您的情况下，您的 chrome 中的某个地方可能存在问题，这就是徽标加载而不是其他徽标的原因。这些定义在`/templates/your_template/html/modules.php`. 如果您在此处使用已删除的功能，您可能需要查看[http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_3.0_and_Joomla_Platform_12.1 。](http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_3.0_and_Joomla_Platform_12.1)

# android - 无法在 android 模拟器上运行 systrace 工具

> ID：16167626
> 
> 赞同：0
> 
> 时间：2013-04-23T11:00:42.557
> 
> 标签：android, performance, android-emulator

用于 android 设备性能分析的 Systrace 工具未在 ubuntu 的 android 模拟器上执行

我已经尝试了以下相同的方法，但我最终遇到了同样的问题

1.首先我尝试挂载 /sys/kernel/debug 然后它的只读文件系统消息来了。所以我无法创建相同的 2.尝试使用最新的金鱼源代码创建新的内核映像 kernel-qmeu 映像和在sdk的系统映像位置替换，但模拟器无法启动。3.编辑init.rc并为/sys/kernel/debug添加权限并重新创建ramdisk.img，模拟器启动但它仍然没有在/sys/kernel 4.我尝试用debugfs支持替换新内核映像（通过make menuconfig) 和具有 debugfs 权限的 ramdisk.img。但模拟器无法启动。

请帮助我解决这个问题。如果有更多澄清，请随时回击

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T01:50:10.567

Google 不支持模拟器中的 systrace 工具。您将需要获得支持 systrace 的 Jelly Bean 设备。Google Nexus 设备似乎如此，而三星 GS3 则如此。我的摩托罗拉 Droid RAZR M 没有（至少到目前为止）。祝你好运！

# facebook - Facebook 竞赛应用，如何保存用户输入，如何重用应用？

> ID：16167629
> 
> 赞同：0
> 
> 时间：2013-04-23T11:00:50.330
> 
> 标签：facebook, save

我正在开发一个 facebook 竞赛应用程序。您如何保存参加比赛的用户，您还可以保存他们的电子邮件吗？我正在使用 PHP 并在 heroku 上托管。如果我想重用这个应用程序，你如何重置用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:25:16.353

> 您如何保存参加比赛的用户，您还可以保存他们的电子邮件吗？

我不确定你对这个问题的意思，但你可以使用应用程序权限请求用户 facebookId 和电子邮件，然后将它们存储在数据库中；

> 如果我想重用这个应用程序，你如何重置用户？

您的意思是保留相同的用户并清理他们的统计数据吗？有2组用户？

如果是选项 1，只需调用查询来更新表并清除所有相关字段。

如果选项二，如果您想保留 2 组用户，请在用户表中添加一个名为 appInstance 或其他内容的字段，然后对于每个用户群，您只加载您感兴趣的用户群。

# iphone - 如何在 iOS 上添加复选框

> ID：16167631
> 
> 赞同：3
> 
> 时间：2013-04-23T11:00:52.783
> 
> 标签：iphone

我想添加复选框并为每个复选框设置一个标题，如果选中某些框，那么它会显示某些文本，例如

如果框 1 则显示 text1

如果选择框 2，则显示 text2

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T11:07:20.857

尝试这个 ，

```
UIButton *buttonCheckbox = [[UIButton alloc] initWithFrame:CGRectMake(10, 12,20, 20)];  

[buttonCheckbox addTarget:self action:@selector(toggleButton:) forControlEvents: UIControlEventTouchUpInside];

- (void)toggleButton: (id) sender
{
   UIButton *tappedButton = (UIButton*)sender;

   NSLog(@"%d",tappedButton.tag);
   if([tappedButton.currentImage isEqual:[UIImage imageNamed:@"checkbox.png"]])
  {
   [sender  setImage:[UIImage imageNamed: @"checkbox-checked.png"] forState:UIControlStateNormal];
  }
    else
  {
   [sender  setImage:[UIImage imageNamed: @"checkbox.png"] forState:UIControlStateNormal];

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:05:38.510

您可以在[Cocoa Controls](https://www.cocoacontrols.com/tags/checkbox)上找到一些实现复选框的自定义控件。

例如`SSCheckBoxView`是其中之一。你可以在[github上找到](https://github.com/ardalahmet/SSCheckBoxView)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:07:16.590

您正在寻找 UISwitch，它具有与复选框相同的功能，但外观不同。否则，您可能需要通过自定义 UIButton 来创建自己的复选框。

要在 UISwitch 的值更改时获得更新，您需要将其 valueChanged 事件连接到一个操作。

```
-(IBAction) valueChanged:(UISwitch *) sender
{
     if(sender.on)
     {
         ...
     }
} 
```

# c - C 编译错误

> ID：16167636
> 
> 赞同：-8
> 
> 时间：2013-04-23T11:01:10.957
> 
> 标签：c

我必须用 C 语言编写一个程序来计算并显示以下表达式：

`P=1*2*(1/3)*4*5*(1/6)`

我尝试运行此代码（这是整个代码），但我无法编译它，因为它在 C++ 的第四行和第十一行显示错误。我做错了什么？

```
 #include <stdio.h>

    int i,n,f=1;
    for(i=1;i<=n;i++)
    {
        if(i%3==0)
           f=f/i;
        else
           f=f*i;
    }
    printf("%d\n", f);
    return 0; 
```

我不能在这里写错误，因为它们太多了..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T11:03:01.860

您缺少`main()`函数的定义。此外，`n`未初始化；您需要为其分配一个值。

```
#include <stdio.h>

int main(void)
{
    int i,n,f=1;
    for(i=1;i<=n;i++)
    {
        if(i%3==0)
            f=f/i;
        else
            f=f*i;
    }
    printf("%d\n", f);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:14:15.427

您可能需要声明`f`为`float`，我没有收到以下任何错误：

```
#include <stdio.h>

int main(void)
{
    int i,n;
    float f = 1;
    printf("Enter value of n:");
    scanf("%d",&n);
    for(i=1;i<=n;i++)
    {
        if(i%3==0)
            f=f/i;
        else
            f=f*i;
    }
    printf("%f\n", f);
    return 0;
} 
```

# java - 构造函数中的 Setter 方法

> ID：16167637
> 
> 赞同：7
> 
> 时间：2013-04-23T11:01:16.033
> 
> 标签：java, methods, constructor, setter

有一个我遇到的问题

```
public class Student{
     private String studentNumber;
     private String studentName;
     private double studentResult;

     public Student (String aNumber, String aName){
         setStudentNumber(aNumber);
         setStudentName(aName);
         setStudentResult(0);
     }
     // The standard getter and setter method are define here.
} 
```

在构造函数中使用 setter 方法的目的是什么？并且使用 setStudentResult(0)，我们是否需要另一个实例变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T11:04:06.543

调用可覆盖的方法是一种反模式，如果 Student 被覆盖，它可能会导致问题。一个好的模式是让 Student 不可变

```
public class Student{
    private final String studentNumber;
    ...
    public Student (String studentNumber, ...) {
       this.studentNumber = studentNumber;
    ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T11:05:10.137

构造函数中设置器的通常声称的原因是您使用相同的验证。然而，自封装是一种反模式。

更好地完成您所写的事情是拥有一个构造对象并调用 set 方法的静态方法。比这更好的是使整个事物不可变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T11:03:29.933

`sent`当您处理（您正在发送的）值的验证时，您将不得不使用上述代码实践。
例如，如果您不想允许将任何负数设置为`studentNUmber`来自构造函数的 a，那么您必须编写一个逻辑来检查构造函数内部或方法内部的数字，具体取决于类是不可变的还是可变的。如果类是可变的，则在方法中编写逻辑，如果类是不可变的，则在构造函数中编写逻辑（在不可变的类中，不允许编写 setter 方法，因为 setter 方法可以更改对象的状态）。
如果您不应用此类逻辑，则可以将任何负值设置为`studentNumber`.

此外，当您在其他类中创建了一个对象并且稍后您想要更改它的状态时，setter 方法很有用，例如，您想要更新学生的姓名，如下面给出的示例，

```
public class Student {
    private String studentNumber;
    private String studentName;
    private double studentResult;
    // The standard getter and setter method are define here.

    public Student(String aNumber, String aName) {
        studentNumber = aNumber;
        studentName =aName;
    }

    public String getStudentNumber() {
        return studentNumber;
    }

    public void setStudentNumber(String studentNumber) {
        this.studentNumber = studentNumber;
    }

    public String getStudentName() {
        return studentName;
    }

    public void setStudentName(String studentName) {
        this.studentName = studentName;
    }

    public double getStudentResult() {
        return studentResult;
    }

    public void setStudentResult(double studentResult) {
        this.studentResult = studentResult;
    }

    @Override
    public String toString() {
        return "studentNumber:"+studentNumber+", studentName"+studentName+", studentResult"+studentResult;
    }

}

class Test {
    public static void main(String[] args) {
        Student s = new Student("1", "AAA");
        s.setStudentName("BBB"); //we should call this method because of "studentName" is private variable in Student class.
        System.out.println(s);
    }
} 
```

about `setStudentResult`，你不需要另一个实例变量，因为它已经在`Student`类中声明了。相反，您需要在构造函数中再添加一个参数来`setStudentResult`赋值。

```
public Student(String aNumber, String aName, long result) {
        studentNumber = aNumber;
        studentName =aName; 
        studentResult =result;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T11:04:20.273

您是否在 setter 方法中执行任何业务逻辑。如果是，我想这就是你从构造函数调用 setter 的原因。如果您只是在 setter 中看到实例变量，那么直接设置实例变量是正常的做法。

```
public class Student{
private String studentNumber;
private String studentName;
private double studentResult;

public Student (String aNumber, String aName){
this.studentNumber = aNUmber;
this.studentName=aName;
this.studentResult=0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T11:11:20.467

如前所述，在构造函数中使用 setter 方法并不是一个好主意，原因有两个：

1.  子类可以覆盖它们，这可能会使对象处于未被考虑的状态。

2.  setter 方法可以具有通常在构造函数中可能不需要的功能。

这样做的原因有两个：

1.  大多数情况下，如果您在编写构造函数后生成 setter/getter，IDE（例如 eclipse）会自动执行此操作。

2.  有时，setter 方法也会执行您在使用构造函数进行初始化时想要执行的验证或格式化。在这种情况下，我建议将验证/格式化提取到不同的函数中，并从构造函数和设置器中调用该函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T11:04:36.580

从构造函数调用方法不是一个好主意。构造函数用于设置字段的初始值。

如果您想从构造函数中调用方法并且不希望有人覆盖它。将类声明为 final

# ruby-on-rails - 运行rails 3.2.13但还没有安装？

> ID：16167638
> 
> 赞同：1
> 
> 时间：2013-04-23T11:01:20.037
> 
> 标签：ruby-on-rails, ruby, rake, gemfile

每当我跑步时：

```
rails -v 
```

我得到结果

```
rails 3.2.13 
```

但我的gemfile如下：

```
gem 'rails', '~> 3.2.12'
gem 'rake' , '~> 10.0.4' 
```

我的 gemfile.lock 也有 3.2.12，但由于某种原因，当我检查版本时，我安装了 3.2.13。我认为这就是每次尝试运行服务器时都会出现错误的原因：

在任何源中都找不到 rake-10.0.4 (Bundler::GemNotFound)

谁能告诉我为什么我要运行 rails 3.2.13？我想运行 3.2.12，因为我的技术人员告诉我 2.13 仍然存在问题，我需要坚持使用 2.12。

当我已经安装了 rake gem 并且它在我的 gemfile 中时，任何人都可以告诉我为什么我会收到 rake 错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T11:05:59.057

从**[文档中](http://gembundler.com/v1.3/gemfile.html)**：

> 说明符`~>`具有特殊含义，最好通过示例来说明。`~> 2.0.3`与`>= 2.0.3`和相同`< 2.1`。`~> 2.1`与`>= 2.1`和相同`< 3.0`。`~> 2.2.beta`将匹配预发布版本，如`2.2.beta.12`.

这意味着

```
gem 'rails', '~> 3.2.12' 
```

是相同的`>= 3.2.12`，`< 3.3`这意味着`3.2.13`根据您的`Gemfile`.

如果您想要`3.2.12` **且仅`3.2.12`**此，您必须指定此

```
gem 'rails', '3.2.12' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:07:28.903

也许您安装了多个 rails 版本（2.3.12 和 2.3.13）。做一个

```
gem list | grep rails 
```

来验证它。

如果是这种情况，请使用`bundle exec`前缀运行您的命令。使用`bundle exec`bundler gem 查看您的 Gemfile 并仅使 Gemfile 中指定的那些 gem 可用于以下命令。

这边走

```
bundle exec rails -v 
```

应该给你`rails 3.2.12`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:08:01.583

尝试，`gem update rake` 或

安装包：`bundle install` 在项目根路径中

# clojure - 如何让 lein midje :autotest 与 immutant 一起使用？

> ID：16167643
> 
> 赞同：0
> 
> 时间：2013-04-23T11:01:42.083
> 
> 标签：clojure, midje, immutant

我正在将我在 ring over 中所做的应用程序迁移到 immutant 并且对于如何处理我的所有测试有点迷茫。

因为需要部署不变的项目，所以测试功能的最佳策略是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:44:28.663

该插件的`test`任务`lein-immutant`将启动 Immutant、部署您的应用程序、运行其所有测试、取消部署应用程序并关闭 Immutant。

不过，这实际上更像是一个 CI 过程。在开发您的应用程序时，最好连接到您在 REPL 中部署在 Immutant 中的应用程序。这样，您可以随时评估您的测试。

目前，该`test`任务不直接支持 midje 事实，但您可以将它们包装在 deftest 中以触发它们 ala [https://github.com/marick/Midje/wiki/Lein-test](https://github.com/marick/Midje/wiki/Lein-test)

# java - 使用 JAVA 或 JSP 获取 windows 用户名

> ID：16167646
> 
> 赞同：-4
> 
> 时间：2013-04-23T11:01:55.210
> 
> 标签：java, jsp

我想在 windows 上登录用户名，我的意思是用户使用 java 登录到 windows。我使用 `System.getProperty("user.name");`但我得到了服务器名称，而不是用户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T11:17:53.347

获取登录到您的 Web 应用程序的用户的名称（我认为这是您想要做的，基于您的评论）完全取决于您如何在系统中实现身份验证。但是，如果您的登录机制添加了此信息，则用户名可能在[`request.getRemoteUser()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRemoteUser%28%29)或中可用[`request.getUserPrincipal()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getUserPrincipal%28%29)。但如前所述，这一切都取决于。否则，您的身份验证机制可能会暴露这一点，但我们需要更多信息来提供帮助。

`System.getProperty("user.name")`只会为您提供运行 java 进程的用户的用户名。

# c++ - 为什么我无法访问 main 中的图像数据？

> ID：16167648
> 
> 赞同：0
> 
> 时间：2013-04-23T11:02:06.720
> 
> 标签：c++, c, vtk

我正在尝试使用 VTK 和 C++ 编写一个程序来读取 MRI 数据。但我无法获得主要的 MRI 原始数据的间距。“GetSpacing”仅适用于“ReadImageData”函数。我想我在 C++ 编程中犯了一些错误。但我不知道它在哪里。

```
vtkImageData* ReadImageData(string mri_imagedata_file)
{
    vtkSmartPointer<vtkMetaImageReader> reader =
        vtkSmartPointer<vtkMetaImageReader>::New();
    reader->SetFileName(mri_imagedata_file.c_str());
    reader->Update();
    vtkImageData* metaimage = reader->GetOutput();
    double sp[3];
    metaimage->GetSpacing(sp);
    cout << sp[0] << " " << sp[1] << " " << sp[2] <<endl; //<----------It works here.
    return metaimage;
}

int main (int argc, char *argv[])
{
    if(argc != 2)
    {
        cerr << "Usage: " << argv[0] << " MRI image data" <<endl;
        return EXIT_FAILURE;
    }
    string mri_imagedata_file = argv[1];// Input "prost00.mhd"

    vtkImageData* metaimage = ReadImageData(mri_imagedata_file);
    double sp2[3];
    metaimage->GetSpacing(sp2);
    cout << sp2[0] << " " << sp2[1] << " " << sp2[2] << endl; //<-----It doesn't work here

} 
```

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:08:44.970

我的假设是`vtkMetaImageReader::GetOutput()`返回指向一些`vtkMetaImageReader`内部数据的指针，所以当你退出时你`ReadImageData`的`reader`被破坏并且你返回的指针变得无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:10:02.407

假设`vtkSmartPointer<vtkMetaImageReader>`是一种智能指针， 函数中的指针在返回`reader` 时被破坏。`ReadImageData`这包括`metaimage`指向的内容。

```
 return metaimage;
    // reader->~();  // Destructed here. Including what is pointed to by metaimage. 
} 
```

一个好的解决方案是返回智能指针而不是`metaimage`. 这样，返回`reader`时指向的内容不会被破坏，`ReadImageData`并且在 main 中可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:10:25.463

看起来您忘记将数组作为参数传递给`GetSpacing`in `main`，因此它调用了返回 a 的重载`double*`，而您的数组保持不变。

您还打印了一个名为的数组，`spacing`尽管看起来您希望在`sp2`.

# c++ - 构造函数初始化列表和 const 变量

> ID：16167649
> 
> 赞同：2
> 
> 时间：2013-04-23T11:02:07.197
> 
> 标签：c++, constructor, initializer-list

可能这可能是一个非常基本的问题，但仍然想了解一些基本概念......

为什么我们将变量定义为 const ？- 在整个程序中保持该特定变量的值不变。

但是，当我遇到构造函数的初始化列表时，它允许在对象构造期间为 const 变量赋值（我尝试了下面的程序，例如），我对 const 关键字本身的基本概念感到困惑。有人可以澄清一下吗？

如果在对象构造期间允许更改，则以下程序中 const 变量的目的是什么？我们有这些行为的实时场景吗？如果是这样，你能给出一些场景吗？

```
#include<iostream>
using namespace std;

class Test {
    const int t;
public:
    Test(int t):t(t) {}  //Initializer list must be used
    int getT() { return t; }
};

int main() {
    Test t1(10);
    cout<<t1.getT();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T11:56:14.133

基本上，当数据成员被声明为常量时，它们必须在构造对象之前具有一些值**因此我们使用成员初始化器，以便在构造对象之前数据成员具有一些值。**

在这个程序中，直到最后，数据成员将具有相同的值

对于真实场景：

例如，您必须制作一个工资单程序，其中每个员工都有一个名字和姓氏，这样您就不会希望函数意外地修改他们的名字，因此为了防止这种情况，您可以保持它们不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:05:58.537

> 为什么我们将变量定义为 const ？

*声明* 一个变量`const`以表明它不会被改变。

> 但是，当我遇到构造函数的初始化列表时，它允许在对象构造期间为 const 变量赋值（我尝试了下面的程序，例如），我对 const 关键字本身的基本概念感到困惑。有人可以澄清一下吗？

如果不是简单类型而是MyClass，它不是赋值而是构造，`MyClass`将使用构造函数，而不是`operator=`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T11:06:52.400

它在对象构造期间不会改变，因为它没有（定义的）值。
当您`const`在类中提供 -member 时，这是对象身份的一部分，并且此特定值将在对象的整个生命周期中保持不变。
声明成员`const`时，您向编译器保证您不会尝试更改此成员的值。

来自[MSDN](http://msdn.microsoft.com/en-us/library/357syhfh.aspx)

`const`关键字指定变量的值是常量，并告诉编译器阻止程序员修改它。

```
// constant_values1.cpp
int main() {
   const int i = 5;
   i = 10;   // C3892
   i++;   // C2105
} 
```

# opengl - 我可以有一个没有 alpha 和深度的默认帧缓冲区吗？

> ID：16167650
> 
> 赞同：2
> 
> 时间：2013-04-23T11:02:11.263
> 
> 标签：opengl, sdl, opengl-3

我希望通过不分配我不使用的东西来节省一些视频卡内存。我远没有耗尽内存，但对我来说它会感觉“更干净”。

我真的想不出在默认帧缓冲区中有一个 alpha 值的理由，因为我的窗口无论如何都不会与我的桌面进行 alpha 混合。我想知道是否可以通过删除其 alpha 来节省几个字节或获得更多的颜色深度。

同样，我正在做一些延迟照明，我所有的深度计算都发生在一个不是默认的帧缓冲区中。然后，我只需将一个四边形（两个 tris）渲染到默认帧缓冲区，其中包含我渲染场景的纹理以及一些 GUI 元素，这些元素都不需要深度测试。我`glDisable(GL_DEPTH_TEST)`在渲染默认帧缓冲区时调用，但我不介意根本没有深度缓冲区而不是我不使用的深度缓冲区。

我可以在 OpenGL 中做到这一点吗？或者在我创建 OpenGL 上下文的 SDL 中？

我尝试使用以下 SDL 属性创建我的 OpenGl 上下文

```
sdl.GL_SetAttribute(sdl.GL_DOUBLEBUFFER, 1)
sdl.GL_SetAttribute(sdl.GL_DEPTH_SIZE, 0)
sdl.GL_SetAttribute(sdl.GL_ALPHA_SIZE, 0)
info := sdl.GetVideoInfo()
bpp := int(info.Vfmt.BitsPerPixel)
if screen := sdl.SetVideoMode(640, 480, bpp, sdl.OPENGL); screen == nil {
    panic("Could not open SDL window: " + sdl.GetError())
}
if err := gl.Init(); err != nil {
    panic(err)
} 
```

不幸的是，SDL 对 GoLang 的绑定缺少`sdl_gl_GetAttribute`允许我检查我的愿望是否被授予的功能。

正如我所说，没有紧急情况。我主要是好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:03:16.007

> 我真的想不出在默认帧缓冲区中有一个 alpha 值的理由，因为我的窗口无论如何都不会与我的桌面进行 alpha 混合。

这很好，因为具有 alpha 通道的默认帧缓冲区实际上不会这样做（无论如何在 Windows 上）。

帧缓冲区 alpha 用于混合操作。有时基于目标 Alpha 颜色以某种方式进行混合很有用。例如，在绘制反射表面后绘制反射对象时，我曾经使用目标 alpha 作为反射表面的“反射率”值。必须按此顺序进行，因为必须多次绘制反射面。

在任何情况下，用于创建 OpenGL 上下文的低级 WGL/GLX/etc API 确实允许您要求没有 alpha 或深度。请注意，如果您要求 0 alpha 位，那几乎肯定会为您节省 0 内存，因为渲染到 32 位帧缓冲区比 24 位帧缓冲区更有效。所以你不妨保留它。

但是，由于您使用的是 SDL，以及 SDL 的 Go 绑定，这取决于 SDL，它是 Go 绑定。`sdl_gl_SetAttribute`假设 SDL 正确实现该功能，该功能应该可以工作。如果你想验证这一点，你可以通过 OpenGL 询问帧缓冲区：

```
glBindFramebuffer(GL_FRAMEBUFFER, 0); //Use the default framebuffer.
GLint depthBits, alphaBits;
glGetFramebufferAttachmentParameteriv(GL_DRAW_FRAMEBUFFER, GL_DEPTH, GL_FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE, &depthBits);
glGetFramebufferAttachmentParameteriv(GL_DRAW_FRAMEBUFFER, GL_BACK_LEFT, GL_FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE, &alphaBits); 
```

# performance - Mvvm - 更新绑定需要太长时间

> ID：16167652
> 
> 赞同：0
> 
> 时间：2013-04-23T11:02:13.887
> 
> 标签：performance, mvvm, binding

我有 5 个 ViewModel。每个视图都有自己的虚拟机。当我启动程序时，ViewModel 会更改绑定，即

```
private string _bruttolohn;
public string Bruttolohn
{
    get { return _bruttolohn; }
    set
    {
        if (value != null)
        {
            if (value != _bruttolohn)
            {
                _bruttolohn = value;
                Calculate();
                RaisePropertyChanged(() => Bruttolohn);
            }
        }

    }
} 
```

Bruttolohn = 我输入的一些值来计算和设置新值。我有大约 100 个其他属性，它们都在使用 Binding。如果我启动程序，计算很好并且运行速度很快！但是当我更改视图时（所有视图都在 ContentControl 中。如果我单击一个按钮，视图将像这样更改：MyContent.Content = new FirstView();）。现在问题来了：如果我更改视图约 30 次，ViewModel 需要太长的时间来设置绑定。为什么！？+ 如果我调试并且我在这一点上：

```
RaisePropertyChanged(() => Bruttolohn); 
```

错误弹出： ObservableObject.cs 丢失...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:30:33.227

您显示的代码没有任何问题，因此我怀疑计算方法。剖析它。

如果 Calculation() 方法太长而无法发布，它不应该在属性设置器中:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:32:07.120

我想我找到了解决方案。每次我单击“FirstView”按钮时，ContentControl 的内容都会获得一个 NEW VIEW()！所以每次我点击按钮时，它都会：

```
MyContent.Content = new FirstView(); 
```

这意味着在后台仍然以某种方式打开视图......我无法自己解释它，但如果我将视图全局设置为

```
FirstView fw; 
```

并在 MainViewModel 的构造函数中说

```
fw = new FirstView(); 
```

我可以像这样轻松分配 ContentControl 的内容（无需创建新视图）：

```
MyContent.Content = fw; 
```

您可以在此处下载测试应用程序：[http](http://www65.zippyshare.com/v/89159114/file.html) : //www65.zippyshare.com/v/89159114/file.html 它有一个 MainView 和 2 个 Views。它显示了我的问题。如果单击按钮“FirstView”，则内容控件的内容将为“FirstView.xaml”。它有 2 个文本框，用于计算总和并有一个 for 循环（对于 i = 0，i < 500，i++）。如果你一开始就计算，计算只需要~1秒，但如果你点击按钮“FirstView”~30次并再次尝试计算，计算需要10多秒！！！我认为这是因为 MyContent.Content = new FirstView(); 如果我错了，你可以检查我的程序并纠正我，或者说我是否正确......就像我说的，我认为这是解决方案，但我不是 100% 确定。

# php - CodeIgniter 未定义变量 $config

> ID：16167659
> 
> 赞同：0
> 
> 时间：2013-04-23T11:02:30.883
> 
> 标签：php

```
function index()
{
$this->load->library('email',$config);
} 
```

我曾使用 Codeigniter 邮件类，但出现未定义变量错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:10:34.043

```
$config 
```

从未被赋予过价值，至少不在您的代码所在的范围内。

你必须做

```
$config = 'foo'; 
```

或类似的东西，在范围内的某个地方，来初始化它。

您还应该使用

```
if(isset($config)) 
```

以确保它确实存在。

或者只使用[三元运算符](http://en.wikipedia.org/wiki/%3f%3a)：

```
$config = isset($config) ? $config : 'default'; 
```

如果 config 需要在其他地方定义，那么您应该将其作为参数传递给函数。

```
index($config); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:05:40.133

Hay jems 我只是删除 $config 变量，因为它会自动加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:36:38.260

Codeigniter 库加载语法是

您必须尝试加载电子邮件类：

```
$this->load->library('email'); 
```

如果你想在加载时配置邮件类，那么语法是：

```
$this->load->library('email');
// config is 
$config['protocol'] = 'sendmail';
$config['mailpath'] = '/usr/sbin/sendmail';
$config['charset'] = 'iso-8859-1';
$config['wordwrap'] = TRUE;

$this->email->initialize($config); 
```

也试试这个：

```
$config['protocol'] = 'sendmail';
$config['mailpath'] = '/usr/sbin/sendmail';
$config['charset'] = 'iso-8859-1';
$config['wordwrap'] = TRUE;

$this->load->library('email',$config); 
```

# wcf-rest - 使用 POST 方法的 WCF Restful 服务向响应对象返回 BAD REQUEST(400)

> ID：16167662
> 
> 赞同：0
> 
> 时间：2013-04-23T11:02:34.070
> 
> 标签：wcf-rest, wcf-endpoint

我正在编写一个示例 WCF Restful 服务。这是尝试将对象传递给服务中的 POST 方法。这是代码

客户端代码：

```
HttpWebRequest req = null;
HttpWebResponse res = null;
string serviceurl = "localhost:63004/MySampleService.svc/Survey";
string XmlText;
req = (HttpWebRequest)WebRequest.Create(serviceurl);
req.Method = "POST";
req.ContentType = "application/xml; charset=utf-8";
req.Timeout = 30000;
req.Headers.Add(serviceurl);

var xmlDoc = new XmlDocument { XmlResolver = null };
xmlDoc.Load(Server.MapPath("Sample.xml"));
string sXml = xmlDoc.InnerXml;
req.ContentLength = sXml.Length;
var sw = new StreamWriter(req.GetRequestStream());
sw.Write(sXml);
sw.Close();

res = (HttpWebResponse)req.GetResponse();  //GETTING THE BAD REQUEST(400) ERROR here. 
```

服务代码：

```
[OperationContract]
[WebInvoke(UriTemplate = "/Survey", Method = "POST", RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, BodyStyle = WebMessageBodyStyle.Wrapped)]
void InsertData(Survey SurveyItem); 
```

任何人都可以帮助我......提前谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:38:31.107

您尚未在 web.config 或 app.config 中为 wcf 服务提供有关配置的详细信息。但是我在您的 webinvoke 属性中发现了一个错误。

每当您像上面那样发布请求（将 xml 直接作为字符串）时，您必须将 bodystyle 参数设置为 Bare，如下面的代码片段所示。

```
[OperationContract]
[WebInvoke(UriTemplate = "/Survey", Method = "POST", RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, BodyStyle = WebMessageBodyStyle.Bare)]
void InsertData(Survey SurveyItem); 
```

# symfony - 如何为目录项创建动态路由器

> ID：16167664
> 
> 赞同：1
> 
> 时间：2013-04-23T11:02:43.993
> 
> 标签：symfony

我正在尝试为 Symfony2 使用[Kunstmaan 捆绑包](http://bundles.kunstmaan.be/)，但遇到了一个问题。目前我正在尝试创建目录包，一切似乎都很好，但我不想为每个产品创建菜单项。通过 /en/catalog/* 菜单项中的项 slug-title 动态访问产品会很棒。这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T09:34:28.523

我们遇到了同样的问题……我们试图通过创建目录项来解决这个问题，这些目录项也是菜单项，但具有 null 作为父项，这样它们就不会出现在树中。通过这样做，您仍然拥有版本控制系统和所有内容，但是当您有许多目录项时，它不会减慢您的树的速度。[您可以使用 AdminListBundle ( https://github.com/Kunstmaan/KunstmaanAdminListBundle](https://github.com/Kunstmaan/KunstmaanAdminListBundle) )在管理列表中的某处列出这些目录项

要将这些目录项链接到某个概览页面，我们正在使用链路由器（[https://github.com/Kunstmaan/KunstmaanNodeBundle/blob/master/Resources/doc/NodeBundle.md](https://github.com/Kunstmaan/KunstmaanNodeBundle/blob/master/Resources/doc/NodeBundle.md)）。目前我们还没有一个明确的例子，但也许这可以让你开始？我们正在努力使使用链路由器更容易，但它仍在建设中：[https ://github.com/Kunstmaan/KunstmaanNodeBundle/pull/38/files](https://github.com/Kunstmaan/KunstmaanNodeBundle/pull/38/files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:38:37.607

最快/最简单的方法是将您的产品制作为可以定义为目录的子页面的页面。KunstmaanNodeBundle 将处理这些蛞蝓。

在您的目录类中（我假设它扩展了 AbstractPage）覆盖 getPossibleChildTypes 方法：

```
public function getPossibleChildTypes()
{
    return array (
        array(
            'name' => 'Product',
            'class'=> "Acme\CatalogBundle\Entity\Product"
        )
    );
} 
```

这样您就可以在目录页面下将产品创建为子页面。然后，您只需要在目录页面的树枝模板中获取目录的子项。

缺点是，每个产品都是一个单独的页面（带有版本控制），而不是一个简单的实体。

# c# - android app和asp.net C#之间的数据传输

> ID：16167667
> 
> 赞同：-2
> 
> 时间：2013-04-23T11:02:48.360
> 
> 标签：c#, android, asp.net, database, json

我想将数据从我的 android 应用程序发送到 asp.net(c#)。在 C# 页面中，我将对从 android 应用程序接收到的数据执行一些数据库操作，然后我会将结果发送回我的 android 应用程序。

我不知道如何做到这一点。请任何人解释或提供一些示例的链接。我搜索了很多但无法找到正确的答案。所以请解释要遵循的每个步骤或引用一些链接举些例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:37:12.517

我建议你看看这个，来自[MSDN](http://msdn.microsoft.com/en-us/library/ms731082%28v=vs.100%29.aspx)：

> Windows Communication Foundation (WCF) 是用于构建面向服务的应用程序的框架。使用 WCF，您可以将数据作为异步消息从一个服务终结点发送到另一个服务终结点。服务端点可以是 IIS 托管的持续可用服务的一部分，也可以是应用程序中托管的服务。

查看链接以获取更多信息，并在 google 上查找`WCF`. 我无法解释此答案中的所有内容，但我会为您提供指导。

您可以托管您的 WCF 服务，并通过 HTTP（或您可以使用的任何协议）访问它。在您的 android 中，为方便起见，您可以使用诸如[KSOAP 之](http://ksoap2.sourceforge.net/)类的库。您也可以查看一些 SO 问题，[KSOAP ANDROID 实施](https://stackoverflow.com/questions/11154919/ksoap-android-implementation)，[Android 上的 KSOAP 入门](https://stackoverflow.com/questions/4587856/getting-started-with-ksoap-on-android?rq=1)。

现在，现在，如果您正在谈论在您的 android 中打开一个页面来处理某些内容，您可以向它发布信息，然后获取响应并处理它。

在第二种情况下，我认为您可以使用包中的`HttpClient`和`HttpPost`类 `org.apache.http.client`。这些行中的一些东西：

```
HttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost("http://www.myaspnetstuff.com/process");

try {
    List<NameValuePair> parameters = new ArrayList<NameValuePair>(1);
    parameters.add(new BasicNameValuePair("id", "1"));

    httpPost.setEntity(new UrlEncodedFormEntity(parameters));

    //here you get your response and do whatever fits your needs.
    HttpResponse response = httpClient.execute(httpPost);

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
} 
```

# html - div 超出 不明原因

> ID：16167670
> 
> 赞同：0
> 
> 时间：2013-04-23T11:03:03.637
> 
> 标签：html, css

我只是注意到`<p>`外面的 div，所以“你想收到...”在里面 a `<p>`，然后在 div 之后有一个空的`<p></p>`，而不是全部在里面`<p>`

有人在这里看到错误吗？

```
<p class="subs1">
                Do you want to receive our emails and new collection previews? 
                <div style="" class="styledRadio first_radio">
                    <input type="radio" value="yes" name="user[collection_previews]" style="display: none;">
                </div>
                Yes 
                &nbsp;&nbsp;&nbsp;
                <div style=" width: 20px; height: 20px; cursor: pointer; background-position: 0px 0px;" class="styledRadio">
                    <input type="radio" value="no" name="user[collection_previews]" style="display: none;">
                </div>
                No
            </p> 
```

整个事情应该在 subs1 p 里面，但它不是

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T11:05:47.240

您不能在标签中使用块元素 ( `<div>`, `<form>`, `<p>`) 等。`<p>`使用`<div>`而不是`<p>`.

```
<div class="subs1">...</div> 
```

[http://www.w3.org/TR/html-markup/p.html](http://www.w3.org/TR/html-markup/p.html)声明只[`phrasing content`](http://www.w3.org/TR/html-markup/terminology.html#phrasing-content)允许。这意味着这些元素中没有块元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T11:14:16.943

[`p`](http://www.w3.org/TR/html-markup/p.html)用于包含*文本***段落**，而不是像s这样的块元素。*[`div`](http://www.w3.org/TR/html-markup/div.html)*

 *您的浏览器被迫重新组织节点，因为您编写它们的方式是*无效的 HTML*，并且无法解析为有效且有意义的 DOM 树。

考虑将 a`div`用于最外层的容器，而不是`p`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T11:04:01.140

`<p>`标签不能包含块级标签，它们被认为是无效的 html，这说明了您的页面呈现方式。它将块元素（`<div>`在这种情况下）分解为块级元素。

尝试将`<div>`s 更改为 a `<span>`。

div 是“块”类型，这就是它们突破到自己的行的原因。将它们更改为跨度（也是内联的）将允许您将项目包装在标签中，同时仍将它们保持在一行中。*

# html - 返回一个 JS 函数的值，并将其用作输入按钮的值

> ID：16167675
> 
> 赞同：6
> 
> 时间：2013-04-23T11:03:19.250
> 
> 标签：html, javascript

我想设置一个返回字符串的 JavaScript 函数，并将该字符串用作按钮的值。像这样的东西：

```
function test(){
 x = "some text";
 return x;
} 
```

我想在 value 属性的 input 元素中使用这个函数。像这样的东西：

```
<input type="button" id="s1" value="test()" /> 
```

不幸的是，按钮上没有显示“一些文本”而是“test()”。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T11:06:27.993

你可以这样做：

```
<input type="button" id="s1" value="" />
<script type="text/javascript">
 var elem = document.getElementById("s1");
 elem.value = "some text";
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T11:08:18.373

设置按钮值的正确方法是使用 HTML DOM 或 JQuery 之类的框架。这也有一个[JSBin Demo](http://jsbin.com/omedil/1/edit)。

例如，

**HTML**`test` -加载文档时运行函数。

```
<body onload = "test()">
  <input type="button" id="s1" value="" />
</body> 
```

**JavaScript -**

```
function test(){
 x = "some text";
 document.getElementById("s1").value =x;
} 
```

[查看 JSBin 演示](http://jsbin.com/omedil/1/edit)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T11:22:57.060

html 按钮的 value 属性只接受文本。看[这里](http://www.w3schools.com/tags/att_button_value.asp)。

我从您的问题中了解到的是您想要一个 html 按钮，其值应由 javascript 函数设置。你可以反过来实现这一点。

使用获取按钮元素`document.getElementById`并设置`value`内部`test()`

你的代码应该是这样的：

```
<input type="button" id="s1"/>

<script>
   function test(){
      document.getElementById('s1').value ='some text'; //s1 is the id of html button
   };
   test(); //dont forget to call function
</script> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T11:33:38.520

您还可以使用自定义数据属性以优雅的方式完成此操作。

在此处查看 JSFiddle 演示：http: [//jsfiddle.net/NJ5sK/](http://jsfiddle.net/NJ5sK/)

基本上，您使用应该调用以返回其值的函数的名称标记您的输入元素。然后你抓取所有具有`data-value-function`属性的元素，运行函数并赋值。

**HTML：**

```
<input type="text" data-value-function="cheese" />
<input type="text" data-value-function="animal" /> 
```

**JS：**

```
window.cheese = function() {
    return "Limburger";
}

window.animal = function() {
    return "Cat";
}

var elements = document.querySelectorAll('*[data-value-function]');
for (var i = 0; i < elements.length; i++) {
    var valueFunctionName = elements[i].getAttribute('data-value-function');
    elements[i].value = window[valueFunctionName]();
} 
```

享受！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T11:05:22.723

```
function test(){
    x = "some text";
    document.getElementById('s1').value = x;
} 
```

# r - R：在 is.na 中选择多个列

> ID：16167677
> 
> 赞同：0
> 
> 时间：2013-04-23T11:03:24.420
> 
> 标签：r, multiple-columns, na

我想使用 !is.na 命令删除部分包含 NA 的行：

```
table=data.frame(col1=c(1:2,NA,4,NA,4),col2=c(7:9,NA,NA,NA),col3=c(2:4,NA,NA,4),col4=c(1:6))

col1 col2 col3 col 4
1    7    2    1     
2    8    3    2 
NA   9    4    3
4    NA   NA   4
NA   NA   NA   5
4    NA   4    6 
```

这一切都应该发生在 lme 环境中，例如：

```
lme(col1~ log(col2)+col3, random= ~ 1 |col4, data=table[(!is.na(table[c("col1","col2","col3","col4")])),], method="ML") 
```

它不适用于此代码 - 还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:27:18.093

阅读`?lme`并特别注意`na.action`参数，您可以将其设置为`na.omit`或`na.exclude`。但是，如果您想比较模型，最好在外部进行`lme`，例如`lme.dat <- na.omit(table)`。这样所有模型都将使用相同的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-11T08:26:54.407

您可以`complete.cases`在要检查的列子集上使用该命令。例如：

```
df[complete.cases(df[,5:8]),] 
```

这将丢弃选择中至少为 one 的每一行`NA`。

# character - Unity 4 Character Mesh Collider 未对齐 - 角色掉落。附图片公司源统一资产链接

> ID：16167679
> 
> 赞同：1
> 
> 时间：2013-04-23T11:03:27.560
> 
> 标签：character, unity3d, mesh, rigid-bodies

你好窥视（第一次发帖耶）。

我刚刚开始学习统一，还在学习各种教程并学习 C# 的界面。

我正在运行 Unity 4 并从 Unity 商店下载了免费资产： [https ://www.assetstore.unity3d.com/#/content/3174](https://www.assetstore.unity3d.com/#/content/3174)

问题。我在 Unity 中创建了一个平面。转到角色并创建对撞机并将其作为类人生物导入。然后添加一个刚体 =**角色从平面上掉下来** 然后我添加了一个网格对撞机并将角色的网格附加到对撞机上。网格未正确对齐角色 =**角色从平面上掉了下来。** 然后我尝试了盒子和胶囊对撞机，它们工作得很好。**附上这些，角色就不会掉下来。** 然后我尝试了一个角色控制器=角色没有失败。

我想为这个测试角色有一个准确的网格，这样当敌人击中他时，就会有实际命中。

我已经从商店尝试了其他几个免费角色，他们都有同样的问题。有人可以告诉我如何解决这个问题吗？似乎我要么做错了什么，错过了一步，要么只是迷路了。

下面链接到所拍摄问题的图片： ![在此处输入图像描述](https://i.stack.imgur.com/HoRSX.png) ![在此处输入图像描述](https://i.stack.imgur.com/aMTg1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-08T12:56:29.867

在蒙皮的动画角色上使用网格碰撞器是一种错误的方法。网格碰撞器通常用于环境几何体和刚体对象。这都是由于 Unity 引擎需要大量工作才能根据提供的网格准确计算网格碰撞器的形状。更多的三角形意味着更多的工作，对于 10k 到 30k 三角形的相当复杂的低多边形角色网格，很明显 fps 肯定会下降到无法播放的水平。

对于我们的游戏，我们使用所有原始碰撞器，分布在足够的骨骼游戏对象上。所以，头骨有一个球体对撞机，脊柱有一个盒子对撞机（用于肺），前臂有一个胶囊对撞机等。这样，通过一点点脚本，你可以检测到命中并准确知道身体的哪个部位受损.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:25:30.563

如果您的对撞机与您的网格不完全匹配，那么很可能您将网格应用于对象的错误部分。

尝试将 Mesh Collider 应用到网格，而不是整个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:56:20.190

你有一个非常复杂的角色网格，所以使用网格对撞机可能不是最好的方法。在许多情况下，角色控制器或胶囊对撞机工作正常；否则，您可以只使用复合对撞机并在角色的各个身体部位周围创建一个盒子或球体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-04T10:38:11.233

这曾经发生在我身上。我犯的错误是，我在做了一些旋转和缩放之后应用了网格对撞机。所以我一导入模型就添加了网格对撞机。然后在您缩放/编辑模型时应该没问题。还要检查具有统一性和 3D MAX/Maya 的右手/左手坐标系。

# c# - Mono 没有找到 UIA Bridge，但软件包已经安装

> ID：16167682
> 
> 赞同：4
> 
> 时间：2013-04-23T11:03:30.760
> 
> 标签：c#, mono, monodevelop, uia

我现在搜索了很长时间，但找不到解决我的问题的方法：

我成功编译了 ac# 项目（使用 monodevelop）

当我尝试使用 >mono fubar.exe 运行它时，我得到以下输出：

```
Error loading UIA bridge (UiaDbusBridge, Version=1.0.0.0, Culture=neutral, PublicKeyToken=f4ceacb585d99812): System.IO.FileNotFoundException: Could not load file or assembly 'UiaDbusBridge, Version=1.0.0.0, Culture=neutral, PublicKeyToken=f4ceacb585d99812' or one of its dependencies. The system cannot find the file specified. File name: 'UiaDbusBridge, Version=1.0.0.0, Culture=neutral, PublicKeyToken=f4ceacb585d99812'at System.AppDomain.Load (System.String assemblyString, System.Security.Policy.Evidence assemblySecurity, Boolean refonly) [0x00000] in <filename unknown>:0 
```

我还安装了软件包：libmono-uia-*

感谢您的每一次帮助

* * *

和

MONO_PATH=/usr/lib/uiaatkbridge/mono fubar.exe

我得到：

```
Error loading UIA bridge (UiaDbusBridge, Version=1.0.0.0, Culture=neutral, PublicKeyToken=f4ceacb585d99812): System.IO.FileNotFoundException: Could not load file or assembly 'UiaDbusBridge, Version=1.0.0.0, Culture=neutral, PublicKeyToken=f4ceacb585d99812' or one of its dependencies. The system cannot find the file specified.
File name: 'UiaDbusBridge, Version=1.0.0.0, Culture=neutral, PublicKeyToken=f4ceacb585d99812'
  at System.AppDomain.Load (System.String assemblyString, System.Security.Policy.Evidence assemblySecurity, Boolean refonly) [0x00000] in <filename unknown>:0 
  at System.AppDomain.Load (System.String assemblyString) [0x00000] in <filename unknown>:0 
  at (wrapper remoting-invoke-with-check) System.AppDomain:Load (string)
  at System.Reflection.Assembly.Load (System.String assemblyString) [0x00000] in <filename unknown>:0 
  at System.Windows.Automation.Provider.BridgeManager.GetAutomationBridge (System.String bridgeAssemblyName) [0x00000] in <filename unknown>:0 
```

* * *

第一：感谢您的回复

```
find / | grep uiadbusbridge 
```

没有给出结果，但我认为包是这样命名的......如果我只搜索“uia”，我会得到以下结果：

```
/var/lib/dpkg/info/libmono-uia-atkbridge1.0-cil.md5sums
/var/lib/dpkg/info/libmono-uia-winforms1.0-cil.md5sums
/var/lib/dpkg/info/libmono-uia-winforms1.0-cil.list
/var/lib/dpkg/info/libmono-uia-atkbridge1.0-cil.list
/var/lib/dpkg/info/libmono-uia3.0-cil.clilibs
/var/lib/dpkg/info/libmono-uia-winforms1.0-cil.clilibs
/var/lib/dpkg/info/libmono-uia-cil-dev.list
/var/lib/dpkg/info/libmono-uia-cil-dev.md5sums
/var/lib/dpkg/info/libmono-uia-atkbridge1.0-cil.postrm
/var/lib/dpkg/info/libmono-uia3.0-cil.list
/var/lib/dpkg/info/libmono-uia-atkbridge1.0-cil.postinst
/var/lib/dpkg/info/libmono-uia-atkbridge1.0-cil.clilibs
/var/lib/dpkg/info/libmono-uia3.0-cil.md5sums
/var/lib/dpkg/info/libmono-uia-atkbridge1.0-cil.shlibs

/usr/lib/uiautomationwinforms
/usr/lib/uiautomationwinforms/UIAutomationWinforms.dll
/usr/lib/uiaatkbridge
/usr/lib/uiaatkbridge/UiaAtkBridge.dll.config
/usr/lib/uiaatkbridge/UiaAtkBridge.dll
/usr/lib/uiaatkbridge/libbridge-glue.so
/usr/lib/pkgconfig/mono-uia.pc
/usr/share/app-install/desktop/amule-adunanza-utils-gui:amuleguiadunanza.desktop
/usr/share/app-install/icons/amuleguiadunanza.png
/usr/share/doc/libmono-uia-winforms1.0-cil
/usr/share/doc/libmono-uia-winforms1.0-cil/copyright
/usr/share/doc/libmono-uia-winforms1.0-cil/NEWS.gz
/usr/share/doc/libmono-uia-winforms1.0-cil/README
/usr/share/doc/libmono-uia-winforms1.0-cil/changelog.Debian.gz
/usr/share/doc/libmono-uia-cil-dev
/usr/share/doc/libmono-uia-cil-dev/copyright
/usr/share/doc/libmono-uia-cil-dev/changelog.Debian.gz
/usr/share/doc/libmono-uia-atkbridge1.0-cil
/usr/share/doc/libmono-uia-atkbridge1.0-cil/copyright
/usr/share/doc/libmono-uia-atkbridge1.0-cil/NEWS.gz
/usr/share/doc/libmono-uia-atkbridge1.0-cil/README
/usr/share/doc/libmono-uia-atkbridge1.0-cil/changelog.Debian.gz
/usr/share/doc/libmono-uia3.0-cil
/usr/share/doc/libmono-uia3.0-cil/copyright
/usr/share/doc/libmono-uia3.0-cil/NEWS.gz
/usr/share/doc/libmono-uia3.0-cil/README
/usr/share/doc/libmono-uia3.0-cil/changelog.Debian.gz 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:08:27.793

尝试：

```
MONO_PATH=/usr/lib/uiaatkbridge/ mono fubar.exe 
```

不知道为什么没有这个就找不到DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T14:40:45.967

出于某种原因，Ubuntu 没有 UiaDbusBridge（或 UiaDbus）包。当您在互联网上搜索这些文件名中的任何一个时，您可能会偶然发现一个名为“rpmfind”的网站，其中列出了这些文件，因此它们存在于某个地方。

这里有一个 github 源代码库 -> [https://github.com/mono/uia2atk/tree/master/UiaDbus](https://github.com/mono/uia2atk/tree/master/UiaDbus)

我想必须下载这些东西并编译它。至少我在 www 的其他任何地方都找不到二进制文件。

*编辑

好吧，这些东西已经过时了（最新的提交是从 2 年前开始的），我摆弄了它，但它只是一团糟。到处都缺少引用，使用 .NET 3.5 等等。

# android - 删除列表视图中的选中项

> ID：16167689
> 
> 赞同：0
> 
> 时间：2013-04-23T11:03:53.640
> 
> 标签：android, listview

我想制作一个应用程序，其中包括一个`listView`带有复选框和一个名为`add`and的两个按钮`delete selected`。我想删除列表视图中选中的所有项目。尽管我付出了很多努力，但我无法做到这一点。任何帮助，将不胜感激。

这是我的代码

```
package com.example.chkbokinlistview;

public class Adapter extends ArrayAdapter<Movies> {

    ArrayList<Movies> data;
    Context context;
    int id;
    private Holder h;

    public Adapter(Context context, int textViewResourceId, ArrayList<Movies> objects) {
        super(context, textViewResourceId, objects);
        this.data = objects;
        this.context = context;
        this.id = textViewResourceId;
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final int p = position;
        View v = convertView;
        LayoutInflater l = ((Activity)context).getLayoutInflater();
        h = new Holder();
        if (v == null) {
            v = l.inflate(id, parent, false);
            h.tv = (TextView) v.findViewById(R.id.textView1);
            h.cb = (CheckBox) v.findViewById(R.id.checkBox1);
            v.setTag(h);
        }else{
            h = (Holder) v.getTag();
            h.cb.setChecked(true);
        }
        h.tv.setText(data.get(position).movieName);
        h.cb.setChecked(data.get(position).deleted);
        return v;
    }
    public void delete(){
        //how to delete all the items that are checked
    }

     class Holder{
        TextView tv;
        CheckBox cb;
    }

} 
```

MainActivity.java

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        lv = (ListView) findViewById(R.id.lv);
        bDelete = (Button) findViewById(R.id.bDelete);
        bAdd = (Button) findViewById(R.id.bAdd);

        list = new ArrayList<Movies>();
        a = new Adapter(this, R.layout.listitem, list);
        lv.setAdapter(a);

        bDelete.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                a.delete();
            }
        });
        bAdd.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                final EditText et = new EditText(MainActivity.this);
                dialog = new AlertDialog.Builder(MainActivity.this)
                .setPositiveButton("OK", new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface arg0, int arg1) {
                        // TODO Auto-generated method stub
                        list.add(new Movies(et.getText().toString(), false));
                        a.notifyDataSetChanged();
                        dialog.dismiss();
                    }
                })
                .setTitle("ADD Movie")
                .setView(et)
                .create();
                dialog.show();
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:29:13.647

在检查`checkbox`添加内容时，`position`当`ArrayList`您`toBeDeleted`单击删除按钮时，只需根据您所在的位置从您的`ArrayList`名称中删除项目并调用适配器方法。`data``toBeDeleted``notifyDataSetChanged()`

* * *

`checkedChangedListener`在`getView`方法中为您的`CheckBox`.

```
h.cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                    @Override
                    public void onCheckedChanged(CompoundButton arg0,
                            boolean arg1) {
                        // TODO Auto-generated method stub
                        if (arg1) {
                            list.add(position);
                        } else {
                            for (int i = 0; i < list.size(); i++) {
                                if (list.get(i) == position) {
                                    list.remove(i);
                                    break;
                                }
                            }
                        }

                    }
                }); 
```

其中 list 是 a `ArrayList<Integer>`，用于删除

```
private void delete() {
    for(int i = 0 i<list.size;i++)
        data.remove(list.get(i));
} 
```

但在删除之前，您必须按`list`降序排序，以便正确删除，否则您可能会得到一个`IndexOutofBoundException`

# javascript - JS 上的 JSON 回复解析

> ID：16167690
> 
> 赞同：0
> 
> 时间：2013-04-23T11:03:53.713
> 
> 标签：javascript, json, parsing, share, counter

我需要解析来自服务器的回复，有一个代码：

```
$.getJSON('http://connect.mail.ru/share_count?callback=1&url_list=http://www.google.com&func=test', function(data) {
      $('#ml_counter').text(data);
}); 
```

作为对[http://connect.mail.ru/share_count?callback=1&url_list=http://www.google.com&func=test](http://connect.mail.ru/share_count?callback=1&url_list=http://www.google.com&func=test)请求服务器的回复：

```
test(
{
 "http://www.google.com":{"shares":574,"clicks":65}
}); 
```

我怎样才能从中得到“574”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:06:56.360

```
callback: function(result) {
    var yourVal = result['http://www.google.com'].shares;
} 
```

在你的情况下：

```
.text(data['http://www.google.com'].shares); 
```

请注意，将 url 作为参数返回并不是很令人欣慰。您最好只返回子对象或域对象列表（其中一个属性类似于`url`，另一个是`{ shares .... }`对象。

# php - PHP mysql_fetch_assoc() 警告

> ID：16167692
> 
> 赞同：0
> 
> 时间：2013-04-23T11:04:01.157
> 
> 标签：php, mysql

我在 PHP 方面不是很好，我不知道为什么会出现这个错误。我试图打印出一些东西来消除错误。例如我的 SQL 查询或返回数组的内容，但它没有打印出来。

评论表：

![在此处输入图像描述](https://i.stack.imgur.com/EPY2n.png)

帖子表： ![在此处输入图像描述](https://i.stack.imgur.com/vjAp0.png)

![在此处输入图像描述](https://i.stack.imgur.com/fM94a.png)

![在此处输入图像描述](https://i.stack.imgur.com/Fn4CK.png)

警告：mysql_fetch_assoc() 期望参数 1 是资源，在第 106 行的 /Applications/MAMP/htdocs/atiwebNew/resources/func/blog.php 中给出的布尔值

# html - 使用 ColdFusion 在下拉列表中动态设置默认值？

> ID：16167709
> 
> 赞同：1
> 
> 时间：2013-04-23T11:04:38.613
> 
> 标签：html, drop-down-menu, coldfusion, cfml

我在这里可能完全错了，但是有没有办法`<cfif>`在下拉列表中使用来动态选择下拉列表的默认值？

我正在执行以下操作：

```
<select class="field select" id="TimeWithXYZYears" name="TimeWithXYZYears" >

<option value="00" <cfif #thisInstance.responses.TimeWithXYZYears# eq 0>selected="selected"</cfif>>0</option>
<option value="01" <cfif #thisInstance.responses.TimeWithXYZYears# eq 1>selected="selected"</cfif>>1</option>
<option value="02" <cfif #thisInstance.responses.TimeWithXYZYears# eq 2>selected="selected"</cfif>>2</option>
<option value="03" <cfif #thisInstance.responses.TimeWithXYZYears# eq 3>selected="selected"</cfif>>3</option>
.
.
.
</select> 
```

我已经`TimeWithXYZYears`从页面前面调用的组件方法中获取了值，我尝试将它转储到页面上，它给了我正确的值。

有没有办法在不编写另一个函数的情况下做到这一点？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-04-23T16:06:25.893

```
 <select class="field select" id="TimeWithXYZYears" name="TimeWithXYZYears" >

   <option value="00" <cfif thisInstance.responses.TimeWithXYZYears eq "00">selected</cfif>>0</option>
   <option value="01" <cfif thisInstance.responses.TimeWithXYZYears eq "01">selected</cfif>>1</option>
   <option value="02" <cfif thisInstance.responses.TimeWithXYZYears eq "02">selected</cfif>>2</option>
   <option value="03" <cfif thisInstance.responses.TimeWithXYZYears eq "03">selected</cfif>>3</option>
   .
   .
   .
   </select> 
```

唯一需要## 的时候是当你的变量被输出或引用时。引号意味着它不是一个变量，没有引号意味着它是一个变量。这适用于大多数 CFML 标签。此外，在许多情况下，HTML 的 SELECTED 只是 SELECTED 。它无法正常工作的原因是因为您的值与您的 IF 语句不准确。正确用法见上文。

# build - 开始在 TeamCity 中运行所有构建配置

> ID：16167710
> 
> 赞同：6
> 
> 时间：2013-04-23T11:04:39.563
> 
> 标签：build, teamcity

在 TC 中有一个带有几个构建配置的项目。构建配置以不相互干扰的项目为目标——因此我可以同时开始构建过程。在每个构建配置主页上都有启动构建的运行按钮。

我的问题 - 有可能创建一个触发所有配置构建的按钮？

我知道有构建触发器等等 - 但有时需要启动所有构建配置 - “按需”构建运行 - 去每个主页并按下运行按钮有点不方便。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T12:07:39.470

您可以通过创建“启动”构建配置来实现这一点——它不需要做任何事情——并通过`Finish Build`触发器将每个并行配置链接到它。当您`Run...`启动“启动”配置时，它会很快完成，然后应该触发所有并行配置。

# glassfish - 部署时 EJB 注入失败

> ID：16167712
> 
> 赞同：0
> 
> 时间：2013-04-23T11:04:45.720
> 
> 标签：glassfish, ejb, code-injection

我遇到了 exxh EJB 的问题。

首先，我的设置：我使用的是 GlassFish 和 JEE6。我有一个打包为 WAR 的 REST-Service 和一个打包为 EJB-Jar 的 bean。它们不在 EAR 内。应该通过@EJB 从 REST-WAR 使用 EJB，但是当我尝试部署 WAR 时，GlassFish 显示此错误：

部署过程中发生错误：

```
Exception while deploying the app [exx-upload-1.0] : Cannot resolve reference Local ejb-ref name=com.ex.exx.model.FileUpload/ocr,Local 3.x interface =com.ex.exx.api.IOCRService,ejb-link=null,lookup=,mappedName=,jndi-name=,refType=Session. Please see server.log for more details. 
```

（之前部署的 EJB 没有任何错误）。

我不知道为什么。这是 EJB 代码：

界面：

```
@Local
public interface IOCRService {
    public String performOCRonImage(BufferedImage input);
} 
```

和实施：

```
@Stateless
@LocalBean
public class OCRScanner implements IOCRService  {

    private Logger logger = Logger.getLogger(this.getClass().getName());
    private final static String NOT_RECOGNIZED = "Can not regocnize text";
    /**
     * Default constructor.
     */
    public OCRScanner() {
        logger.log(Level.INFO, "### OCR SCANNER BUILD" + this);
    }

    public String performOCRonImage(BufferedImage input) {
        logger.log(Level.INFO, "### OCR SCANNER CALLED" + this);
    }

    ... 
```

这是 WAR 中的重要部分：

```
public class FileUpload {
private final File PROPERTIES_FILE = new File(
        "fileUploadProperties.properties");
private final String PARAMETER_NAME = "file";
private final Logger logger = Logger.getLogger(this.getClass().getName());

@EJB
private IOCRService ocr;

public Response uploadFile(...) {
    // do some stuff
    logger.log(Level.INFO, "### EJB" + ocr.toString())
} 
```

有什么建议吗？我在这里找不到我的失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:18:43.490

通过用@Remote 替换@Local 解决了这个问题。这行得通，但是，我不满意，因为我不明白为什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-12T09:55:19.150

基本上，给定规范（例如，在[教程](https://docs.oracle.com/javaee/7/tutorial/doc/ejb-intro004.htm#GIPIZ)中解释），一个应用程序只能访问其他应用程序的 EJB，如果它们用`@Remote`.

因此，您有 3 个选项：

1.  `@Remote`用（你所做的）装饰你的 EJB ，
2.  将两者一起打包在一个耳朵内（因为它们将驻留在同一个应用程序中）。但是，如果您打算将它们部署在单独的应用程序甚至单独的服务器中，请使用 1.)
3.  将 CDI 与 一起使用`@Inject`，但这仍然只会在相同的应用程序中发现 EJB，或者装饰得`@Remote`好像不是一样。

HTH，亚历克斯

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T12:14:18.023

`@EJB`如果目标不是 EJB，则不应使用。我想这是你的情况，因为你正试图注入你的 WAR 中的一个类。

而是使用：

```
@Inject
private IOCRService ocr; 
```

基本上，`@Inject`在大多数情况下更好，因为：

*   它更安全，
*   它支持@Alternatives
*   它知道注入对象的范围。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-10-10T20:25:24.620

要添加的另一个解决方案`@Stateless(name="")`，这种工作形式

# asp.net - 通过数据 api 从 asp.net 网站上传视频到 youtube 失败

> ID：16167714
> 
> 赞同：0
> 
> 时间：2013-04-23T11:04:54.767
> 
> 标签：asp.net, youtube

我正在尝试使用数据 API 将 ASP.net 网站中的视频上传到 YouTube，但出现此错误：“远程服务器返回错误：(403) Forbidden。”

我正在使用以下代码：

YouTubeRequestSettings settings = new YouTubeRequestSettings("VideoPortal", "Developer_Key", "username", "password"); YouTubeRequest 请求 = 新的 YouTubeRequest(设置);

视频 newVideo = new Video();

```
 newVideo.Title = "testvideo";//txttitle.Text.Trim();
        newVideo.Tags.Add(new MediaCategory("Autos", YouTubeNameTable.CategorySchema));
        newVideo.Keywords = "testvideo";//txtkeyword.Text.Trim();
        newVideo.Description = "testvideodesc";//txtdesc.Text.Trim();
        newVideo.YouTubeEntry.Private = false;
        newVideo.Tags.Add(new MediaCategory("mydevtag, anotherdevtag",
          YouTubeNameTable.DeveloperTagSchema));

        newVideo.YouTubeEntry.Location = new GeoRssWhere(37, -122);
        // alternatively, you could just specify a descriptive string
        // newVideo.YouTubeEntry.setYouTubeExtension("location", "Mountain View, CA");
        string path = Server.MapPath("video/Screen-Recording.mov");
        newVideo.YouTubeEntry.MediaSource = new MediaFileSource(path,
          "video/quicktime");
        settings.Timeout = 100000000;
        Video createdVideo = request.Upload(newVideo); 
```

有人可以向我建议如何使此代码正常工作并解决错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:25:39.427

当您返回 HTTP 403 响应时，HTTP 响应正文的内容是什么？响应正文中应该有一条错误消息，提供错误原因的解释

# birt - 为 BIRT 报告添加新字体

> ID：16167715
> 
> 赞同：2
> 
> 时间：2013-04-23T11:04:58.563
> 
> 标签：birt

我需要为我的一份报告 Monotype Corsiva 添加新的字体类型。我如何在 BIRT 中做到这一点？我的 BIRT 版本是 3.7.2。我有 ttf 和 otf 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T04:34:07.577

在我的本地主机上玩之后，这就是我所做的：

1.  转到 eclipse/plugins/org.eclipse.birt.report.engine.fonts_3.7.2.v20120213/fontsConfig.xml
2.  添加新的字体路径
3.  重新启动笔记本电脑

但我不喜欢这种方式，因为它很粗糙，我也需要将它上传到服务器。我该怎么做呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:46:04.053

不清楚您是在询问如何向 BIRT 添加字体，还是在部署报告时如何显示特定字体。

如果部署时它们是 PDF、HTML、Excel 等？

这个技巧描述了如何在运行时对字体和样式进行许多更改 [http://www.birt-exchange.org/org/devshare/designing-birt-reports/1200-set-fontstyle-information-on-a-使用 de-api-or-script 报告/](http://www.birt-exchange.org/org/devshare/designing-birt-reports/1200-set-fontstyle-information-on-a-report-using-de-api-or-script/)

它可以在 ElementFactory 中完成

```
 dataStyle.setProperty( StyleHandle.FONT_FAMILY_PROP, "Monotype Corsiva" 
```

或者在 beforeFactory 中使用

```
 reportContext.getDesignHandle().findStyle("report").setProperty(StyleHandle.FONT_FAMILY_PROP, "Monotype Corsiva"); 
```

当然，这两种字体都需要在运行报告的 PC 上可用。

# spring-batch - 在 Spring Batch 中从数据库中读取记录

> ID：16167717
> 
> 赞同：3
> 
> 时间：2013-04-23T11:05:04.350
> 
> 标签：spring-batch, spring-batch-admin

我正在尝试使用循环从数据库中读取一些记录，然后对记录进行一些计算（更新一个名为 total 的字段）。

但我是春季批次的新手，所以请任何人都可以为我提供一些提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T14:07:49.473

这听起来像是块模式要解决的问题。您可以重用现有的 Spring Batch 组件从数据库中读取数据，组成自己的处理器，然后传回 Spring Batch 组件进行存储。

说用例是这样的；- 读取记录 - record.setTotalColumn(record.getColumn2() + record.getColumn3()) - 更新

此配置可能如下所示

```
<batch:job id="recordProcessor">
  <batch:step id="recordProcessor.step1">
    <batch:tasklet>
      <batch:chunk reader="jdbcReader" processor="calculator" writer="jdbcWriter" commit-interval="10"/>
      </batch:tasklet>
  </batch:step>
</batch:job>

<bean id="jdbcReader" class="org.springframework.batch.item.database.JdbcCursorItemReader">
  <property name="dataSource" ref="dataSource"/>
  <property name="sql" value="select idColumn,column1,column2,totalColumn from my_table"/>
  <property name="rowMapper" ref="myRowMapper"/>
</bean>

<bean id="jdbcWriter" class="org.springframework.batch.item.database.JdbcBatchItemWriter">
  <property name="dataSource" ref="dataSource"/>
  <property name="sql" value="update my_table set totalColumn = :value where idColumn = :id"/>
</bean>

<bean id="calculator" class="de.incompleteco.spring.batch.step.item.CalculationProcessor"/> 
```

这意味着您唯一需要从头开始“编写”的就是计算器处理器，它可以像这样；

```
package de.incompleteco.spring.batch.step.item;

import org.springframework.batch.item.ItemProcessor;

public class CalculationProcessor implements ItemProcessor<MyObject, MyObject> {

    @Override
    public MyObject process(MyObject item) throws Exception {
        //do the math
        item.setTotalColumn(item.getColumn1() + item.getColumn2());
        //return
        return item;
    }

} 
```

# javascript - 如何显示在对象中声明为 url 的图像并且这些对象存储在数组中？

> ID：16167724
> 
> 赞同：1
> 
> 时间：2013-04-23T11:05:24.977
> 
> 标签：javascript

```
var employees =[{
                  name:"jacob",
                  age :23,
                  city:"virginia",
                  yoe :12,
                  image :'a.jpg'
               },
               {
                  name:"aaron",
                  age :21,
                  city:"virginia",
                  yoe :12,
                  image :'b.jpg'
               },
               {
                  name:"johnny",
                  age :50,
                  city:"texas",
                  yoe :12,
                  image :'c.jpg'
               },
               {
                  name:"jacob",
                  age :12,
                  city:"virginia",
                  yoe :12,
                  image :'a.jpg'
               }]; 
```

我想访问图像并将其显示在浏览器上，我将这些图像保存在文件夹中....显示图像需要什么语句，但仅限于 javascript ma 初学者..请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:12:30.650

首先`employees`变量应该是一个对象，具有一个名为images的属性；否则图像对象应该在没有键的情况下存储，数组没有键；

这是您创建图像元素的方式：

```
var image = document.createElement('img');
image.src = employees['images']['employee1']['url'];
yourElement.appendChild(image); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:37:08.303

使用这种新结构，您只需遍历员工并获取图像 url。
一个可能的解决方案可能是：

```
for (var i = 0, length = employees.length; i < length i++) {
    var img = document.createElement("img");
    img.src = employee[i].image;
    document.body.appendChild(img);
} 
```

# vb.net - 从字符串错误转换

> ID：16167733
> 
> 赞同：0
> 
> 时间：2013-04-23T11:05:32.693
> 
> 标签：vb.net

您好，如果其中一个语句为假，我试图显示一个错误，但我收到一个错误：“**从字符串“False\example.exe** ”**到类型**“**布尔”的转换无效。** ”

```
If My.Computer.Registry.GetValue("HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\EXAMPLE", "InstallLocation", "") <> "" And
        My.Computer.FileSystem.FileExists(My.Computer.Registry.GetValue("HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\EXAMPLE", "InstallLocation", "ERROR")) & "\example.exe" Then
    Else
        System.Threading.Thread.Sleep(1000)
        example_error.ShowDialog()
    End If 
```

编辑：

```
Private Sub Form_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Dim ExecutablePath = IO.Path.Combine(CStr(My.Computer.Registry.GetValue("HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\MYAPP", "InstallLocation", "ERROR")), "myapp.exe")
    If Not String.IsNullOrEmpty(CStr(My.Computer.Registry.GetValue("HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\MYAPP", "InstallLocation", ""))) _
        AndAlso My.Computer.FileSystem.FileExists(ExecutablePath) Then
    Else
        System.Threading.Thread.Sleep(1000)
        GUI_Error.ShowDialog()
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:13:44.323

您的第二个条件不正确，因为您想将路径与文件名连接起来并用于`FileSystem.Exists`检查文件是否存在，但文件名不在方法调用中。而不是连接字符串来创建你应该使用的路径`Path.Combine`：

```
Dim filePath = Path.Combine(CStr(My.Computer.Registry.GetValue("HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\EXAMPLE", "InstallLocation", "ERROR")),
                            "example.exe")
If Not String.IsNullOrEmpty(CStr(My.Computer.Registry.GetValue("HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\EXAMPLE", "InstallLocation", ""))) _
    AndAlso File.Exists(filePath) Then
Else
    System.Threading.Thread.Sleep(1000)
    example_error.ShowDialog()
End If 
```

# c# - SignalR .Net 客户端：如何向组发送消息？

> ID：16167735
> 
> 赞同：21
> 
> 时间：2013-04-23T11:05:36.430
> 
> 标签：c#, asp.net, signalr

我正在使用 SignalR Wiki Getting Started Hubs 页面中的示例聊天应用程序。我已经扩展它以添加组支持，它工作正常。

但是，现在我想从外部控制台应用程序向组发送消息。这是我的控制台应用程序代码，下面是我的组代码。如何从代理向群组发送消息？是否可以？

```
// Console App
using System;
using Microsoft.AspNet.SignalR.Client.Hubs;

namespace SignalrNetClient
{
    class Program
    {
        static void Main(string[] args)
        {
            // Connect to the service
            var connection = new HubConnection("http://localhost:50116");
            var chatHub = connection.CreateHubProxy("Chat");

            // Print the message when it comes in
            connection.Received += data => Console.WriteLine(data);

            // Start the connection
            connection.Start().Wait();

            chatHub.Invoke("Send", "Hey there!");

            string line = null;
            while ((line = Console.ReadLine()) != null)
            {
                // Send a message to the server
                connection.Send(line).Wait();
            }
        }
    }
} 
```

SignalR Web 应用程序主机：

```
namespace SignalrServer.Hubs
{
    public class Chat : Hub
    {
        public void Send(string message)
        {
            // Call the addMessage method on all clients            
            Clients.All.addMessage(message);
            Clients.Group("RoomA").addMessage("Group Message " + message);
        }

        //server
        public void Join(string groupName)
        {
            Groups.Add(Context.ConnectionId, groupName);
        }
    }
} 
```

默认.aspx

```
<script src="http://code.jquery.com/jquery-1.8.2.min.js" type="text/javascript"></script>
<script src="Scripts/jquery.signalR-1.0.1.min.js" type="text/javascript"></script>
<!--  If this is an MVC project then use the following -->
<!--  <script src="~/signalr/hubs" type="text/javascript"></script> -->
<script src="signalr/hubs" type="text/javascript"></script>
<script type="text/javascript">
    $(function () {
        // Proxy created on the fly          
        var chat = $.connection.chat;

        // Declare a function on the chat hub so the server can invoke it          
        chat.client.addMessage = function (message) {
            $('#messages').append('<li>' + message + '</li>');
        };

        $.connection.hub.start(function () {
            chat.server.join("RoomA");
        });

        // Start the connection
        $.connection.hub.start().done(function () {

            $("#broadcast").click(function () {
                // Call the chat method on the server
                chat.server.send($('#msg').val());
            });
        });
    });
</script>

  <div>
    <input type="text" id="msg" />
<input type="button" id="broadcast" value="broadcast" />

<ul id="messages">
</ul>
  </div> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-23T13:22:07.373

我对类似的事情所做的是创建一个接受您选择的对象的方法，例如

你的新班级

```
public class MyMessage{
    public string Msg { get; set; }
    public string Group { get; set; }
} 
```

然后在 Hub 中创建一个接受此对象的方法。

```
public void Send(MyMessage message)
{
    // Call the addMessage method on all clients            
    Clients.All.addMessage(message.Msg);
    Clients.Group(message.Group).addMessage("Group Message " + message.Msg);
} 
```

然后从您的客户那里，您可以传入这个对象。

```
chatHub.Invoke<MyMessage>("send", new MyMessage() { Msg = "Hello World", Group = "RoomA" }); 
```

然后你也可以从 JS 客户端调用它

```
chat.server.send({ Msg: "Hello World", Group: "RoomA" }); 
```

# git - 如何下载 android 项目子存储库？

> ID：16167740
> 
> 赞同：0
> 
> 时间：2013-04-23T11:05:43.800
> 
> 标签：git

我想从以下 URL 下载所有随附的文件夹：

[https://android.googlesource.com/platform/frameworks/ex/+/refs/heads/master/chips#](https://android.googlesource.com/platform/frameworks/ex/+/refs/heads/master/chips#)

现在，我知道它是否是`git`repo，我使用`git clone ...`，`svn`并`hg`使用`checkout`命令。但是，我不知道如何下载这个？

请帮忙！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:07:39.760

从**[您提供的网站的根页面](https://android.googlesource.com/?format=HTML)**：

> 要克隆这些存储库之一，请安装 git，然后运行：
> 
> ```
> git clone https://android.googlesource.com/name 
> ```

将*名称*替换为存储库名称，在您的情况下，我认为是`platform/frameworks/ex`

# python - 使用读取的新值更新列表值 - Python

> ID：16167746
> 
> 赞同：1
> 
> 时间：2013-04-23T11:05:52.630
> 
> 标签：python, input

我真的不知道怎么问这个。我有一个最初设置为零的 3 个值的列表。然后我一次从用户那里读取 3 个值，我想用我读取的新值更新列表中的 3 个值。

```
cordlist = [0]*3 
```

输入：3 4 5

我希望列表现在看起来像： [3, 4, 5]

输入：2 3 -6

列表现在应该是 [5, 7, -1]

我该怎么做呢？这就是我所拥有的：

```
cordlist += ([int(g) for g in raw_input().split()] for i in xrange(n)) 
```

但这只是添加了一个新列表，并没有真正更新上一个列表中的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:18:56.163

```
In [17]: import numpy as np

In [18]: lst=np.array([0]*3)

In [19]: lst+=np.array([int(g) for g in raw_input().split()])

3 4 5

In [20]: lst
Out[20]: array([3, 4, 5])

In [21]: lst+=np.array([int(g) for g in raw_input().split()])

2 3 -6

In [22]: lst
Out[22]: array([ 5,  7, -1]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:11:19.987

我会做这样的事情：

```
cordlist = [0, 0, 0]
for i in xrange(n):
    cordlist = map(sum, zip(cordlist, map(int, raw_input().split()))) 
```

分解：

*   `map(int, raw_input().split())`相当于`[int(i) for i in raw_input().split()]`
*   `zip`基本上接受一个数字列表，并返回一个包含相同索引中元素的元组列表。有关更多信息，请参阅[文档](http://docs.python.org/2/library/functions.html#zip)。
*   `map`，正如我之前解释的，将函数应用于迭代中的每个元素，并返回一个列表。有关更多信息，请参阅[文档](http://docs.python.org/2/library/functions.html#map)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T11:16:26.497

```
cordlist = [v1+int(v2) for v1, v2 in zip(cordlist, raw_input().split())] 
```

像这样测试：

```
l1 = [1,2,3]
l2 = [2,3,4]
print [v1+v2 for v1, v2 in zip(l1, l2)] 
```

结果：[3,5,7]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T11:16:13.597

我会这样使用[`itertools.zip_longest`](http://docs.python.org/3.3/library/itertools.html#itertools.zip_longest)：

```
from itertools import zip_longest

def add_lists(l1, l2):
    return [int(i)+int(j) for i, j in zip_longest(l1, l2, fillvalue=0)]

result = []
while True:  
    l = input().split()
    print('result = ', add_lists(result, l)) 
```

输出：

```
>>> 1 2 3
result =  [1, 2, 3]
>>> 3 4 5
result =  [4, 6, 8] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T11:38:07.317

@namit 的 numpy 解决方案的更紧凑版本

```
>>> import numpy as np
>>> lst = np.zeros(3, dtype=int)
>>> for i in range(2):
        lst += np.fromstring(raw_input(), dtype=int, sep=' ')

3 4 5
2 3 -6
>>> lst
array([ 5,  7, -1]) 
```

# cron - Cron schedule - 在三个不同的时间执行作业，之间没有模式。可能吗？

> ID：16167748
> 
> 赞同：1
> 
> 时间：2013-04-23T11:05:58.943
> 
> 标签：cron, execute, schedule

我有一个要使用 Quartz 运行的工作，它需要使用 Cron 计划指定时间。

作业应在 17:00、17:35 和 22:05 运行。

是否可以使用 Cron 计划指定这些时间？我已经查看了维基百科的文章，但它并没有太大帮助。从我的角度来看，时间之间需要有一个模式，以便您可以使用 Cron 计划指定它们。

此致

尼古拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:10:38.037

您可以使用 3 个 cron 作业来完成。例子 ：

```
> crontab -e

00 17 * * * sh  /example/script.sh
35 17 * * * sh  /example/script.sh
05 22 * * * sh  /example/script.sh 
```

# android - Android - 如何为 GCM 实施规范 ID 以防止重复

> ID：16167753
> 
> 赞同：1
> 
> 时间：2013-04-23T11:06:20.510
> 
> 标签：android, push-notification, google-cloud-messaging

我已经在我的应用程序中实现了 GCM，并且我的设备在重新安装应用程序后收到两个警报。我已经阅读了有关规范 id 的信息，但是很难找到有关如何使用它或如何/在何处实现它的信息。谷歌的文档有时非常模糊，没有提供示例。这就是我进行正常注册以获取 regID 的方式。

```
GCMRegistrar.register(this, getString(R.string.gcm_project_id)); 
```

我是否更改此代码以发送规范注册，如果是，如何更改？我的服务器没有告诉我有任何规范 id，它总是说成功 3（对于其他设备应该是 2）和规范 0。所以我无法更新数据库，因为它不会让我知道有欺骗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:14:17.513

您正在混合内容，此调用接受从 google api 控制台获取的发件人 ID。注册 ID 通过 GCMBaseIntentService 中的 onRegistered 方法发送给您，您应该将其发送到服务器，以便您可以在推送通知发送中使用它。现在，如果您有一个旧的注册 ID，那么谷歌将在发送服务的响应中向您的服务器发送更新的注册 ID AKA 规范 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T16:33:27.580

一切都是我们需要用我们存储的服务器中的规范 id 更新现有的注册 id。你可以使用这个答案[更新规范 ID](https://stackoverflow.com/questions/15832171/gcm-canonical-id/29818357#29818357)

# c# - C# WPF 在 CellEditEnding 事件后更改数据网格单元格背景

> ID：16167755
> 
> 赞同：3
> 
> 时间：2013-04-23T11:06:28.090
> 
> 标签：c#, wpf, datagrid, cell, background-color

我的 C# wpf 应用程序中有一个**Datagrid** (DataGridMeterValues)。每次用户退出单元格的编辑模式时，都会触发**CellEditEnding事件。**

现在我希望在触发事件时更改单元格的背景。

这是我到目前为止得到的：

```
private void DataGridMeterValues_CellEditEnding(object sender, System.Windows.Controls.DataGridCellEditEndingEventArgs e)
{

// Code to change background color here

} 
```

我可以使用以下代码更改整行的背景：

```
e.Row.Background = Brushes.Yellow; 
```

现在我的问题是，我可以做同样的事情，但只针对 1 个单元格（选定的单元格）而不是整行

**编辑：**这是数据网格的 XAML

```
<DataGrid Grid.Row="3"  Grid.Column="1" AutoGenerateColumns="False"  Name="DataGridMeterValues" ItemsSource="{Binding Path=MeterValuesList, UpdateSourceTrigger=PropertyChanged}" AlternatingRowBackground="LightGray" BorderBrush="Gray" BorderThickness="1" FrozenColumnCount="0" CanUserResizeColumns="False" CanUserResizeRows="False" Margin="2,0" CanUserSortColumns="False" SelectionMode="Single" CanUserReorderColumns="False" CanUserAddRows="False" CanUserDeleteRows="False" HeadersVisibility="Column" GridLinesVisibility="All" AreRowDetailsFrozen="False" IsEnabled="True" CellEditEnding="DataGridMeterValues_CellEditEnding">
            <DataGrid.Resources>
                <Style x:Key="DataGridBase" TargetType="Control">
                    <Setter Property="LayoutTransform">
                        <Setter.Value>
                            <TransformGroup>
                                <RotateTransform Angle="-90" />
                                <ScaleTransform ScaleX="1" ScaleY="-1" />
                            </TransformGroup>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="TextOptions.TextFormattingMode" Value="Display" />
                </Style >
                <Style TargetType="DataGridCell" BasedOn="{StaticResource DataGridBase}"/>
                <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource DataGridBase}"/>                  
            </DataGrid.Resources>

            <DataGrid.LayoutTransform>
                <TransformGroup>
                    <RotateTransform Angle="90" />
                    <MatrixTransform Matrix="-1, 0, 0, 1, 0, 0" />
                </TransformGroup>
            </DataGrid.LayoutTransform>

            <DataGrid.RowHeaderStyle >
                <Style TargetType="DataGridRowHeader">
                    <Setter Property="Content" Value="X" />
                </Style>
            </DataGrid.RowHeaderStyle>
            <DataGrid.Columns>
                <DataGridTemplateColumn Header="Action" >
                    <DataGridTemplateColumn.CellTemplate >
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <Button Tag="{Binding}" Content="Activate" Width="50" BorderThickness="0" Margin="2" Background="{Binding Path=Activated}" Click="BtnActivate_Click" />
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn Header="Name" Binding="{Binding Path=Title, UpdateSourceTrigger=PropertyChanged}" />
                <DataGridTextColumn Header="Meter Type" Binding="{Binding Path=Type, UpdateSourceTrigger=PropertyChanged}" />

            </DataGrid.Columns>
        </DataGrid> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T11:11:07.267

```
private void DataGridMeterValues_CellEditEnding(object sender, System.Windows.Controls.DataGridCellEditEndingEventArgs e)
{

        FrameworkElement element = e.Column.GetCellContent(DataGridMeterValues.SelectedItem);
        (element.Parent as DataGridCell).Background = new SolidColorBrush(Colors.Red);

} 
```

我已经在选定的行和列中获取了单元格的框架元素。然后我使用它的 Parent 属性从该元素获取 DataGridCell 并设置它的背景属性。:)

DataGridCell 中可以有多个模板。最好我们获取 DataGridCell 并使用它的背景属性。

# iphone - 如何在 iphone 中以编程方式在 facebook 上分享视频？

> ID：16167759
> 
> 赞同：1
> 
> 时间：2013-04-23T11:06:40.383
> 
> 标签：iphone, ios, ios5, ios4, ios6

我使用了以下参数，但它不起作用，而是将图像上传到`facebook`。我将视频存储在捆绑包中并通过存储引用它，`AVAssest`然后将对象`avasset`作为参数传递......但它不起作用！任何人都可以建议我正确和完美的方式来做到这一点。我做了很多研发，但没有取得多少成果。请帮我解决这个问题。在此先感谢....

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       @"Upload video text", @"name",
                                       @"Video 001", @"caption",
                                       fbMessage, @"description",
                                       @"http://www.youtube.com/watch?v=XQcVllWpwGs", @"link" , image, @"picture",
                                       avAsset, @"source",
                                       @"video",@"type",
                                       nil]; 
```

# java - 新项目的 JSF 或 JSP 2 标记文件

> ID：16167760
> 
> 赞同：-2
> 
> 时间：2013-04-23T11:06:43.540
> 
> 标签：java, spring, jsp, jsf, rich-ui

我需要将一些停放的 Java 副项目中的功能合并到一个新的应用程序中，并试图决定要使用的一些第三方库，特别是与 UI 相关的库。我很想从面向技术架构的成员那里获得一些关于他们对最近 Java 框架趋势和经验的看法的反馈。

遗留项目是一个混合的、所有基于 Web 的、大量围绕 CRUDable 对象的业务逻辑和搜索。一个使用内部框架 - 非常快速、可扩展，但存在与内部工作相关的缺点 - 新开发人员的学习曲线等。另一个是 Tapestry 5 应用程序 - 非常强大，与 XFire / CXF 完美集成以生成网络服务，快速的 UI 生成，但对于非 Tapestry 类型具有良好的学习曲线。第三个，一个 Spring 3 应用程序，使用 JSP 2.0 标记文件作为视图层，并带有一些 JQuery 用于表示/ajax。

我对 Spring 非常熟悉，并且发现带有 Tiles 的 UI 的标签文件在低复杂性和性能方面非常有效。我最近还完成了一个使用 RichFaces 4 的项目，该项目成功并按时完成。我喜欢 RF/IceFaces 等免费提供的丰富 UI，并且注意到 JSF 在其最新版本中完全退出了 JSP。

切入正题，限制使用基于组件的 UI 库，其具有明确定义但不可修改的行为，如 RF / IF，比使用标签文件 / JQuery 的自行解决方案更适合新应用程序。我更熟悉后者，但不想在项目的早期阶段通过采用过时的方法走错路。我想继续将 Spring 3 控制器用于 RESTful、可书签的应用程序入口点 - 是否将 IF / RF 与 Spring 混合使用，或者 JSF 方法是否完全从 Spring 中删除了 MVC 义务？

如果从 Spring 中删除 MVC 义务：

*   JSF 生命周期将如何与 Spring 集成——它会是自包含的并且只使用 IOC 来连接 Spring 服务吗？

*   是否与生成 Web 服务等的 IF/RF 方法进行了良好的集成？

*   中频/射频对平板/手机有哪些支持？

*   是否完全需要 Spring - 托管 bean 可以解决问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:01:58.977

> 切入正题，使用基于组件的 UI 库具有明确定义但不可修改的行为（如 RF / IF）的限制，它比使用标签文件 / JQuery 的自行解决方案更适合新应用程序。

它不是一个或另一个。Java Server Faces 是一个基于组件的 Web 框架，它允许在请求和响应上同步服务器和客户端状态，从而允许应用程序中的阶段和事件模型之类的东西。许多 JSF 组件固有地利用 jQuery，并通过将它们包装在服务器端行为中来扩展富客户端控件。无论如何，这都不是不可修改的行为，只是有一些学习曲线可以以非常具体的方式定制事物。

JSF 目前是 Oracle 推荐的 Java EE Web 开发方法。

> IF / RF 与 Spring 混合还是 JSF 方法完全从 Spring 中删除了 MVC 义务？
> 
> JSF 生命周期将如何与 Spring 集成——它是自包含的并且只使用 IOC 来连接 Spring 服务吗？

JSF 本质上是它自己的 MVC 框架，并且托管属性已经在依赖注入中拥有自己的烘焙。Core Spring 主要是依赖注入，所以人们会认为它们是不一致的，但令人惊讶的是它们很好地结合在一起。

Spring 的最新版本为 JSF 提供了他们自己的 EL Resolver 实现，它允许将 JSF Managed Beans 作为 Spring bean 处理。这个类甚至可以回装到旧版本的 Spring 中，我已经完成并且没有发现任何问题。

Spring MVC 主要建立在 JSP 技术之上，但它不是 Spring 的核心部分。如果您不希望提供 JSP 页面，则根本不需要将它包含在 JSF Web 应用程序中。

> 是否与生成 Web 服务等的 IF/RF 方法进行了良好的集成？

当涉及到 JSF 应用程序中的 Web 服务时，最好记住 JSF 不必对您的 Web 应用程序定义限制，也不必对其进行完整定义。JSF 仅仅是 JSF 页面请求的前端。了解这一点后，您的同一个 Web 应用程序也可以提供它们自己的基于 SOAP 或 REST 的 Web 服务，或者只是在业务逻辑中的服务器端数据源处处理这些 Web 服务。另一种方法仍然是从页面上的 Javascript 调用外部 Web 服务。JSF 中的任何内容都不会阻止您合并 HTML、Javascript 甚至更新的 HTML5 技术的任何元素。

> 中频/射频对平板/手机有哪些支持？

不确定 IF 和 RF 有什么，但我知道 Primefaces 有一个令人印象深刻的移动应用程序控制集，值得一试。

> 是否完全需要 Spring - 托管 bean 可以解决问题吗？

不，绝对不需要。我碰巧喜欢 Spring，所以我使用它。

# roku - 将 xml 连接到 roku

> ID：16167770
> 
> 赞同：1
> 
> 时间：2013-04-23T11:07:05.237
> 
> 标签：roku, brightscript

我是 ROKU 的新手……我有一个网格屏幕。我想以一种简单的方式将 xml 连接到这个网格。我该如何连接？

请帮助我，我很震惊我的 xml 看起来像：

```
<video>
<ChannelTitle>A TV</ChannelTitle>
<LikesCount>0</LikesCount>
<Thumbnail/>
<VideoTitle>Archive_20130408_15.17.45.asf111111</VideoTitle>
<Videosource/>
<ViewsCount>0</ViewsCount>
</video>
<video>
<ChannelTitle>A TV</ChannelTitle>
<LikesCount>0</LikesCount>
<Thumbnail/>
<VideoTitle>Prash</VideoTitle>
<Videosource>source</Videosource>
<ViewsCount>0</ViewsCount>
</video>
<video>
<ChannelTitle>A TV</ChannelTitle>
<LikesCount>1</LikesCount>
<Thumbnail>ChildrenMuseum_Thumb.jpg</Thumbnail>
<VideoTitle>2012 07 03 4 32 pm.mp4</VideoTitle>
<Videosource>ChildrenMuseum.ism</Videosource>
<ViewsCount>39</ViewsCount>
</video>
<video>
<ChannelTitle>A TV</ChannelTitle>
<LikesCount>0</LikesCount>
<Thumbnail/>
<VideoTitle>Archive_20130406_11.55.48.asf</VideoTitle>
<Videosource/>
<ViewsCount>0</ViewsCount>
</video>
<video>
<ChannelTitle>A TV</ChannelTitle>
<LikesCount>0</LikesCount>
<Thumbnail/>
<VideoTitle>Archive_20130408_15.31.14.asf</VideoTitle>
<Videosource/>
<ViewsCount>0</ViewsCount>
</video>
<video>
<ChannelTitle>A TV</ChannelTitle>
<LikesCount>0</LikesCount>
<Thumbnail/>
<VideoTitle>Amber_10.wmv</VideoTitle>
<Videosource/>
<ViewsCount>10</ViewsCount>
</video>
<video>
<ChannelTitle>A TV</ChannelTitle>
<LikesCount>1</LikesCount>
<Thumbnail>10Little Numbers_18_Thumb.jpg</Thumbnail>
<VideoTitle>ABCAlphabetTrain.mov</VideoTitle>
<Videosource>10Little Numbers_18.ism</Videosource>
<ViewsCount>34</ViewsCount>
</video>
<video>
<ChannelTitle>B TV</ChannelTitle>
<LikesCount>0</LikesCount>
<Thumbnail/>
<VideoTitle>Archive_20130409_10.57.20.asf</VideoTitle>
<Videosource>source</Videosource>
<ViewsCount>0</ViewsCount>
</video>
<video>
<ChannelTitle>B TV</ChannelTitle>
<LikesCount>0</LikesCount>
<Thumbnail>Parrots_1_Thumb.jpg</Thumbnail>
<VideoTitle>MrsEppsTeacherOfYear_Thumb.mp4</VideoTitle>
<Videosource>Parrots_1.ism</Videosource>
<ViewsCount>9</ViewsCount>
</video>
<video>
<ChannelTitle>B TV</ChannelTitle>
<LikesCount>0</LikesCount>
<Thumbnail/>
<VideoTitle>test121.ts</VideoTitle>
<Videosource/>
<ViewsCount>0</ViewsCount>
</video>
<video>
<ChannelTitle>B TV</ChannelTitle>
<LikesCount>0</LikesCount>
<Thumbnail/>
<VideoTitle>123_test_Archive_20130412_17.17.45.asf</VideoTitle>
<Videosource>source</Videosource>
<ViewsCount>0</ViewsCount>
</video>
<video>
<ChannelTitle>B TV</ChannelTitle>
<LikesCount>0</LikesCount>
<Thumbnail>Encoder1-868000_39_Thumb.jpg</Thumbnail>
<VideoTitle>testedit1.ts</VideoTitle>
<Videosource>Encoder1-868000_39.ism</Videosource>
<ViewsCount>0</ViewsCount>
</video>
<video>
<ChannelTitle>B TV</ChannelTitle>
<LikesCount>0</LikesCount>
<Thumbnail/>
<VideoTitle>Archive_20130410_14.36.02.asf</VideoTitle>
<Videosource>source</Videosource>
<ViewsCount>0</ViewsCount>
</video>
<video>
<ChannelTitle>B TV</ChannelTitle>
<LikesCount>0</LikesCount>
<Thumbnail/>
<VideoTitle>Archive_20130409_10.52.28.asf</VideoTitle>
<Videosource/>
<ViewsCount>0</ViewsCount>
</video>
<video>
<ChannelTitle>B TV</ChannelTitle>
<LikesCount>0</LikesCount>
<Thumbnail/>
<VideoTitle>Archive_20130410_11.19.35555555555.asf</VideoTitle>
<Videosource/>
<ViewsCount>0</ViewsCount>
</video>
<video>
<ChannelTitle>C TV</ChannelTitle>
<LikesCount>0</LikesCount>
<Thumbnail>Christmas_holidays_1_Thumb.jpg</Thumbnail>
<VideoTitle>Christmas_holidays_1.mp4</VideoTitle>
<Videosource>Christmas_holidays_1.ism</Videosource>
<ViewsCount>7</ViewsCount>
</video>
<video>
<ChannelTitle>C TV</ChannelTitle>
<LikesCount>0</LikesCount>
<Thumbnail/>
<VideoTitle>Archive_20130408_18.31.52.asf</VideoTitle>
<Videosource>source</Videosource>
<ViewsCount>13</ViewsCount>
</video>
<video>
<ChannelTitle>G TV</ChannelTitle>
<LikesCount>0</LikesCount>
<Thumbnail>Christmas_holidays_14_Thumb.jpg</Thumbnail>
<VideoTitle>2012 Tennis sudhakar test.mp4</VideoTitle>
<Videosource>Christmas_holidays_14.ism</Videosource>
<ViewsCount>96</ViewsCount>
</video>
<video> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-22T22:58:16.730

首先，您应该查看 Roku SDK 文档，此链接专门用于 Roku 上的 XML 支持：

[http://sdkdocs.roku.com/display/sdkdoc/BrightScript+Language+Reference#BrightScriptLanguageReference-45BrightScriptXMLSupport](http://sdkdocs.roku.com/display/sdkdoc/BrightScript+Language+Reference#BrightScriptLanguageReference-45BrightScriptXMLSupport)

此外，为了使 Roku 能够解析 XML，XML 内容必须位于`<rsp stat="ok"></rsp>`标签内。

您还想查看 Grid 屏幕的文档：

[http://sdkdocs.roku.com/display/sdkdoc/roGridScreen](http://sdkdocs.roku.com/display/sdkdoc/roGridScreen)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-12T09:33:36.210

这里是 XML 组件概览（Roku 设计的组件）： [https ://developer.roku.com/en-gb/docs/developer-program/core-concepts/xml-components/overview.md](https://developer.roku.com/en-gb/docs/developer-program/core-concepts/xml-components/overview.md)

内容元数据参考（外部控制组件）：[https ://developer.roku.com/en-gb/docs/developer-program/getting-started/architecture/content-metadata.md](https://developer.roku.com/en-gb/docs/developer-program/getting-started/architecture/content-metadata.md)

```
sub init()
  m.top.functionName = "getcontent"
 end sub

sub getcontent()

  content = createObject("roSGNode", "ContentNode")
  contentxml = createObject("roXMLElement")

  if m.top.contenturi.left(4) = "http"
      readInternet = createObject("roUrlTransfer")
      readInternet.setUrl(m.top.contenturi) 'here give XML path
      contentxml.parse(readInternet.GetToString()) 'parse string from XML his load from browser
  else
       print "Read Asciifile call...."
  end if    

  if contentxml.getName()="Content"

    for each video in contentxml.GetNamedElements("video") 'here element tag is video
      itemcontent = content.createChild("ContentNode")
      itemcontent.setFields(video.getAttributes())
    end for       

  end if

  m.top.content = content

end sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-24T14:21:53.433

我假设您在 XML 1 中有一个网格屏幕。并且您在 XML 2 中为网格创建了一个组件，现在您希望在 XML 1 中定义的网格屏幕中看到这个 XML 2 组件。

在您定义网格的 XML 1 中，添加标记

itemComponentName="XML2" '其中 XML2 是您为网格项定义组件的 XML 2 的名称

到网格节点

参考 - [http://sdkdocs.roku.com/display/sdkdoc/BrightScript+Language+Reference#BrightScriptLanguageReference-45BrightScriptXMLSupport](http://sdkdocs.roku.com/display/sdkdoc/BrightScript+Language+Reference#BrightScriptLanguageReference-45BrightScriptXMLSupport)

# ios - 如何在 Titanium iphone 中设置行高动画

> ID：16167774
> 
> 赞同：4
> 
> 时间：2013-04-23T11:07:11.243
> 
> 标签：ios, animation, titanium-mobile

我正在使用 Titanium iphone 中的表格视图。我尝试为每一行添加动画样式。

也就是说，当用户点击每一行时，行高需要增加，所以我可以在行中显示隐藏的内容。当用户再次单击时，行高需要减小。

我的代码是，对于折叠视图，

```
var animation = Ti.UI.createAnimation({height: 1, duration: 500});
row.animate(animation); 
```

为了扩大视野，

```
row.animate(Ti.UI.createAnimation({ height:200, duration:300 }); 
```

但以上两个代码都不起作用，

如果我在**不使用动画的情况下设置行高，那么它工作正常。** 如何为表格视图行应用动画样式......任何人都可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T11:42:40.597

你可以试试这个

[http://developer.appcelerator.com/question/119198/animating-row-height-changes](http://developer.appcelerator.com/question/119198/animating-row-height-changes)

TableViewRow 无法设置动画。这是文档错误。您需要制作自己的动画函数（即setTimeout）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:37:40.033

当您更改行的高度时，默认情况下（在 iOS 上）是动画的，所以：

```
row.height = '40dp'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-14T10:04:44.470

如果将行高直接设置为数值，则在 iOS 上默认为动画。默认动画将覆盖您可能想出的任何自定义动画，例如使用标准`setTimeout`javascript 函数。

困难在于使行内容也显示为动画。假设`row.details`指向一个容器视图，该视图包含要在展开时显示的隐藏行详细信息。它的高度最初将设置为零。以下代码将以平滑的方式为整行设置动画：

```
var total_height_increase = 260;
var height_step = 5;
var duration = 200;
var time_step = duration * height_step / total_height_increase;
var num_steps = duration / time_step;
var i=0;
var increase_height = function(){
    setTimeout(function(){
        row.details.height += height_step;
        i += 1;
        if (i > num_steps) return;
        increase_height();
    }, time_step);          
};
increase_height();
row.height += total_height_increase; 
```

# java - 如何将一台服务器的缓存/会话数据转移到另一台服务器？

> ID：16167777
> 
> 赞同：2
> 
> 时间：2013-04-23T11:07:17.340
> 
> 标签：java, session, caching, copy

我有两台服务器，其中一台上有很多缓存数据和会话数据（来自数据库，并对此进行了更改）。我想在辅助服务器上安全地维护该数据。这是在主服务器出现故障的情况下有效地为客户端服务所必需的。

我们尝试的选项是：

1.  在辅助服务器上缓存数据并在每次对主服务器进行更改时更新。但这不可行，因为主服务器正在处理大量请求（大约 10 个请求/秒）。内存问题会来。

2.  完全删除缓存也会导致速度问题（由于每次都调用数据库）

请提供另一种有效解决问题的方法。

它的数据库在休眠状态。通过直接查询，我们将客户端的 IP 加载到数据库中的哈希映射中。希望这能澄清我的观点。在故障转移时，我需要辅助服务器上的所有哈希映射当前值。

# java - PlainSocketImpl.write 在写入许多套接字时挂起

> ID：16167779
> 
> 赞同：0
> 
> 时间：2013-04-23T11:07:24.060
> 
> 标签：java, android, sockets, concurrency

我有一个线程将相同的 40K 字节数组写入 16 个套接字（在套接字数组上迭代，每个套接字都发送整个字节数组）。这每 100 毫秒循环重复一次。
发送者是 android nexus 7 设备，接收者是 windows 7。

大约 30 秒后，其中一位作家继续说道：

```
Posix.sendtoBytes(FileDescriptor, Object, int, int, int, InetAddress, int) line: not available [native method]  
Posix.sendto(FileDescriptor, byte[], int, int, int, InetAddress, int) line: 146 
BlockGuardOs.sendto(FileDescriptor, byte[], int, int, int, InetAddress, int) line: 177  
IoBridge.sendto(FileDescriptor, byte[], int, int, int, InetAddress, int) line: 473  
PlainSocketImpl.write(byte[], int, int) line: 507   
PlainSocketImpl.access$100(PlainSocketImpl, byte[], int, int) line: 46  
PlainSocketImpl$PlainSocketOutputStream.write(byte[], int, int) line: 269 
```

这可能是android中的错误吗？是并发问题还是网络问题？任何想法都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:19:08.187

阅读器的阅读速度很慢，因此它的接收缓冲区已满，因此您的发送缓冲区已满，因此您阻塞了。

# email-attachments - 电子邮件附件在 gmail 中可以正常工作，但在我的邮件服务器上却不行

> ID：16167780
> 
> 赞同：0
> 
> 时间：2013-04-23T11:07:24.853
> 
> 标签：email-attachments

使用 PHP，我在我的 gmail 和邮件服务器 ID（公司电子邮件 ID）上发送电子邮件附件。我在我的两个电子邮件帐户中都收到了电子邮件，但是在我的公司电子邮件 ID 上，我的电子邮件附件显示错误（它无法正确打开），而在 gmail 中它很好。有什么想法或建议吗？？我在这里粘贴我的 php 代码。任何帮助将不胜感激。

HTML 代码：

```
 <form action="contact.php" method="post" name="form1" enctype="multipart/form-data">
  <label for="file">Filename:</label>
  <input type="file" name="fileAttach" id="file"><br><br>
  <input type="submit" name="submit" value="Submit" align="right">
  </form> 
```

联系方式.php：

```
 <?php
               if($_POST['submit'])
              {

           $strTo = "mymail@company.com, mymail@gmail.com";
            $strSubject = "Attachment file";
            $strMessage = "Attachment";
                $txtFormEmail = "mymail@gmail.com";

           $strSid = md5(uniqid(time()));

$strHeader = "";
$strHeader .= "From: "."<".$txtFormEmail.">\nReply-To: ".$txtFormEmail."";

$strHeader .= "MIME-Version: 1.0\n";
$strHeader .= "Content-Type: multipart/mixed; boundary=\"".$strSid."\"\n\n";
$strHeader .= "This is a multi-part message in MIME format.\n";

$strHeader .= "--".$strSid."\n";
$strHeader .= "Content-type: text/html; charset=utf-8\n";
$strHeader .= "Content-Transfer-Encoding: 7bit\n\n";
$strHeader .= $strMessage."\n\n";

//*** Attachment ***//
  if($_FILES["fileAttach"]["name"] != "")
    {
        $strFilesName = $_FILES["fileAttach"]["name"];
        $strContent = chunk_split(base64_encode(file_get_contents($_FILES["fileAttach"]["tmp_name"]))); 
    $strHeader .= "--".$strSid."\n";
    $strHeader .= "Content-Type: application/octet-stream; name=\"".$strFilesName."\"\n"; 
    $strHeader .= "Content-Transfer-Encoding: base64\n";
    $strHeader .= "Content-Disposition: attachment; filename=\"".$strFilesName."\"\n\n";
    $strHeader .= $strContent."\n\n";
}

$flgSend = mail($strTo,$strSubject,$strMessage,$strHeader); 

  }
  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-14T10:22:41.147

您可以使用 PHP Mailer Class 发送带有附件的邮件。

# batch-file - 如果存在转到下一个

> ID：16167785
> 
> 赞同：1
> 
> 时间：2013-04-23T11:07:46.610
> 
> 标签：batch-file

当框架已经安装时，如何让这个脚本进入 INSTALLAX？即使框架已经存在，它也会安装框架。

我错过了什么？

```
Echo off
IF EXIST "%Programfiles(x86)%" (GOTO 64-Bit) ELSE (GOTO 32-Bit)

:32-Bit
IF EXIST "%windir%\Microsoft.NET\Framework\v4.0.30319\SetupCache\Extended\setup.exe" GOTO INSTALLAX ELSE GOTO INSTALLFRAMEWORK

:64-Bit
IF EXIST "%windir%\Microsoft.NET\Framework64\v4.0.30319\SetupCache\Extended\setup.exe" GOTO INSTALLAX ELSE GOTO INSTALLFRAMEWORK

:INSTALLFRAMEWORK
start "" /w "\\server1\appdata01\Deployment\MicrosoftDynamicsAX\Prerequisites\Net Framework 4.0\dotNetFx40_Full_x86_x64.exe" /q /norestart
ECHO .NETFramework4.0Installed %Date% %TIME% >> \\server1\appdata01\Deployment\MicrosoftDynamicsAX\Client_Log\Framework\%COMPUTERNAME%.log

:INSTALLAX
start "" /w "\\server1\appdata01\Deployment\MicrosoftDynamicsAX\DynamicsAX\setup.exe" RunMode=Custom HideUI=1 AcceptLicenseTerms=1 ByPasswarnings=0 InstallClientUI=1 ClientAOSServer=ax-aos02-prod AOSPort=2712 AOSWsdlPort=8101 ClientLanguage=en-us ConfigurePrerequisites=1 ClientConfigFile="\\sespfs01\appdata01\Deployment\MicrosoftDynamicsAX\AX_Icons\DAX_Prod(usr)32-bit.axc" LogDir="\\server1\appdata01\Deployment\MicrosoftDynamicsAX\Client_Log"
ECHO AXDynamics2012Installed %Date% %TIME% >> \\server1\appdata01\Deployment\MicrosoftDynamicsAX\Client_Log\AXDynamics\%COMPUTERNAME%.log" GOTO END

:END
Exit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:27:01.953

你的问题很明显：

```
IF EXIST "%windir%\Microsoft.NET\Framework64\v4.0.30319\SetupCache\Extended\setup.exe" GOTO INSTALLAX GOTO INSTALLFRAMEWORK 
```

条件中没有**ELSE**。

而在 subs ": **INSTALLFRAMEWORK** " 和 ": **INSTALLAX** " 中，您不会告诉退出程序，所以 ": **INSTALLAX** " 总是被处理。

同样在“：**INSTALLAX** ”过程中，您使用两个命令而不使用连接运算符“ **&** ”（**Echo blabla >> file goto blabla**）

这是代码：

```
@Echo off

Set "FW32=%windir%\Microsoft.NET\Framework\v4.0.30319\SetupCache\Extended\setup.exe"
Set "FW64=%windir%\Microsoft.NET\Framework64\v4.0.30319\SetupCache\Extended\setup.exe"

IF EXIST "%Programfiles(x86)%" (
    REM 64BIT
    IF EXIST "%FW64%" (GOTO :INSTALLAX) ELSE (GOTO :INSTALLFRAMEWORK)
) ELSE (
    REM 32BIT
    IF EXIST "%FW32%" (GOTO :INSTALLAX) ELSE (GOTO :INSTALLFRAMEWORK)
)

:INSTALLFRAMEWORK
start "" /Wait "\\server1\appdata01\Deployment\MicrosoftDynamicsAX\Prerequisites\Net Framework 4.0\dotNetFx40_Full_x86_x64.exe" /q /norestart
ECHO .NETFramework4.0Installed %Date% %TIME% >> "\\server1\appdata01\Deployment\MicrosoftDynamicsAX\Client_Log\Framework\%COMPUTERNAME%.log"
Pause&Exit

:INSTALLAX
start "" /Wait "\\server1\appdata01\Deployment\MicrosoftDynamicsAX\DynamicsAX\setup.exe" RunMode=Custom HideUI=1 AcceptLicenseTerms=1 ByPasswarnings=0 InstallClientUI=1 ClientAOSServer=ax-aos02-prod AOSPort=2712 AOSWsdlPort=8101 ClientLanguage=en-us ConfigurePrerequisites=1 ClientConfigFile="\\sespfs01\appdata01\Deployment\MicrosoftDynamicsAX\AX_Icons\DAX_Prod(usr)32-bit.axc" LogDir="\\server1\appdata01\Deployment\MicrosoftDynamicsAX\Client_Log"
ECHO AXDynamics2012Installed %Date% %TIME% >> "\\server1\appdata01\Deployment\MicrosoftDynamicsAX\Client_Log\AXDynamics\%COMPUTERNAME%.log"
Pause&Exit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:25:43.730

您已经在第一个 IF 语句中做对了（使用括号）。

```
:32-Bit
IF EXIST "%windir%\Microsoft.NET\Framework\v4.0.30319\SetupCache\Extended\setup.exe"
  (GOTO INSTALLAX) ELSE (GOTO INSTALLFRAMEWORK)

:64-Bit
IF EXIST "%windir%\Microsoft.NET\Framework64\v4.0.30319\SetupCache\Extended\setup.exe"
  (GOTO INSTALLAX) ELSE (GOTO INSTALLFRAMEWORK) 
```

（仅为可读性添加换行符）

另外，你错过了一个 ELSE。

# java - Colletions.sort() 方法没有按预期工作

> ID：16167790
> 
> 赞同：-3
> 
> 时间：2013-04-23T11:08:03.373
> 
> 标签：java, collections

我正在尝试运行一个简单的程序。我在其中`ArrayList`使用`collections.sort()`了方法，但没有对输出进行排序。我使用`collections.sort()`方法的方式有什么问题吗？

请帮助我找到根本原因。

```
 import java.util.ArrayList;
    import java.util.Collections;
    import java.util.Vector;

    public class Vector1 {

        public static void main(String args[])
        {
            ArrayList<String> arraylist=new ArrayList<String>();

            arraylist.add("Register.classname");
            arraylist.add("com.jdbc.driver");
            arraylist.add("create Statement");
            arraylist.add("String Sql=Create table hello(column1 Number);");
            arraylist.add("execute Statement");

            Vector<String> vectorlist=new Vector<String>();
            vectorlist.add("Register.classname");
            vectorlist.add("com.jdbc.driver");
            vectorlist.add("create Statement");
            vectorlist.add("String Sql=Create table hello(column1 Number);");
            vectorlist.add("execute Statement");

            Collections.sort(arraylist);
            Collections.sort(vectorlist);

            for(int i=0; i<arraylist.size();i++)
            {
                System.out.println("Arraylist:"+arraylist.get(i));
            }
            for(int j=0;j<arraylist.size();j++)
            {
            System.out.println("Vectorlist:"+vectorlist.get(j));    

            }

        }
    }

    Output:
    Arraylist:Register.classname
    Arraylist:String Sql=Create table hello(column1 Number);
    Arraylist:com.jdbc.driver
    Arraylist:create Statement
    Arraylist:execute Statement
    Vectorlist:Register.classname
    Vectorlist:String Sql=Create table hello(column1 Number);
    Vectorlist:com.jdbc.driver
    Vectorlist:create Statement
    Vectorlist:execute Statement 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T11:11:38.950

那*是*排序的。它只是根据[`String.compareTo`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#compareTo%28java.lang.String%29)哪个是序数词典比较进行排序。在 Unicode 中，所有 ASCII 大写字母都早于 ASCII 小写字母，这就是您得到结果的原因。

如果要进行不区分大小写的比较，则应将 a 传递`Comparator<String>`给`Collections.sort`- 例如， a [`Collator`](http://docs.oracle.com/javase/7/docs/api/java/text/Collator.html)。

顺便说一句，这段代码被破坏了：

```
for(int j=0;j<arraylist.size();j++)
{
    System.out.println("Vectorlist:"+vectorlist.get(j));    
} 
```

你应该使用`vectorlist.size()`. 或者，更好的是，使用增强的 for 循环：

```
for (String item : vectorlist) {
    System.out.println("Vectorlist: " + item);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T11:10:20.120

这是你的输出：

```
Register.classname
String Sql=Create table hello(column1 Number);
com.jdbc.driver
create Statement
execute Statement 
```

这似乎是按**字母顺序排列**的正确顺序。你还期待什么？

`Collections#Sort``compareTo`使用 of的默认实现，`java.lang.String`即按字母顺序排列字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T11:11:08.760

输出按字母顺序排列：

```
Arraylist:Register.classname
Arraylist:String Sql=Create table hello(column1 Number);
Arraylist:com.jdbc.driver
Arraylist:create Statement
Arraylist:execute Statement 
```

请记住，AZ 在 az 之前。

为了对不区分大小写的使用进行排序：

```
Collections.sort(arraylist, new Comparator<String>() {
    @Override
    public int compare(String o1, String o2) {              
        return o1.compareToIgnoreCase(o2);
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T11:12:36.437

排序是正确的。默认字符串排序应用于集合。根据起始字母的 ASCII 值升序排序

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T11:15:30.480

要在使用 Collection.sort() 时忽略大小写，您应该编写自己的比较器

```
public class IgnoreCase implements Comparator<Object> {
        public int compare(Object i, Object j) {
            String a = (String) i;
            String b = (String) j;
            return a.toLowerCase().compareTo(b.toLowerCase());
        }
    }

Collections.sort(arraylist, new IgnoreCase ()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T11:16:04.513

您的输出按字母顺序正确排序。

正如您在 ascii 表中看到的，`http://www.asciitable.com/`大写字符位于小写字符之前。

所以：

*   `XXXXXXXX:String Sql=Create table hello(column1 Number);`

先来：

*   `XXXXXXXX:com.jdbc.driver`如果它们具有相同的前缀。

如果要对字符串进行排序而不考虑大小写，请使用不区分大小写的比较器：

```
Collections.sort(arraylist, String.CASE_INSENSITIVE_ORDER);
Collections.sort(vectorlist, String.CASE_INSENSITIVE_ORDER); 
```

那么你的输出将是：

输出：

```
Arraylist:com.jdbc.driver
Arraylist:create Statement
Arraylist:execute Statement
Arraylist:Register.classname
Arraylist:String Sql=Create table hello(column1 Number);
Vectorlist:com.jdbc.driver
Vectorlist:create Statement
Vectorlist:execute Statement
Vectorlist:Register.classname
Vectorlist:String Sql=Create table hello(column1 Number); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T11:17:54.807

您正在对字符串进行排序，并且排序工作正常。但是，您没有意识到 Unicode 字符集的结构。Unicode 的字符 0-127 与 ASCII 集相同，大写字母在小写字母之前。有关列表，请参见[http://en.wikipedia.org/wiki/ASCII#ASCII_printable_characters](http://en.wikipedia.org/wiki/ASCII#ASCII_printable_characters)。因此，*Register*先于*create*，依此类推。

如果您想要不区分大小写的排序或区分文化的匹配，您应该使用`Collator`and`CollationKey`类。

# jquery - 使用 .click() 调用 RSV 验证

> ID：16167792
> 
> 赞同：0
> 
> 时间：2013-04-23T11:08:12.460
> 
> 标签：jquery, validation

我正在使用 Benjamin Keen 的 RSV（真正简单的验证），但是我构建网站的方式我在页面底部有 javascript，这导致我正在验证的表单上出现可怕的内联 js 错误..

目前该表格有：

```
onSubmit="return RSV(this, rules); 
```

我想把它改成这样：

```
registerForm.click(function(e){
    e.preventDefault();

    //alert("fired!");
    return RSV($(this), rules);

}); 
```

但是控制台报告了一个 Uncaught **ReferenceError: rules is not defined**

我宁愿不使用内联 javascript，有没有人遇到过这个或理解到足以提供帮助 - anyhelp 将不胜感激。

[Benjamin 网站上验证码示例的链接](http://www.benjaminkeen.com/experiments/rsv/jquery/?page=5)

这是使插件工作所需的其余代码的示例。

```
$(document).ready(function() {
    $("#demo_form5").RSV({
      onCompleteHandler: myOnComplete,
      errorFieldClass: "errorFieldDemo5",
      displayType: "display-html",
      errorHTMLItemBullet: "&#8212; ",
            rules: [
                    "required,first_name,Please enter your first name.",
                    "required,last_name,Please enter your last name.",
                    "required,email,Please enter your email address.",
                    "valid_email,email,Please enter a valid email address.",
                    "required,any_integer,Please enter your age.",
                    "digits_only,any_integer,The age field may only contain digits.",
                    "required,marital_status,Please enter your marital status."
]
    }); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-05T15:49:51.917

使用 prevent default 并不能真正按这里的预期工作。它可能在某些浏览器中工作，它也可能完全阻止表单提交，所以我会省略它。e.preventDefault();

正如您指出的那样，以下确实有效......

```
$('#btnSubmit').submit(function(){
    return RSV(this, rules);
}); 
```

...表单中的按钮需要是一个输入字段，类型为 submit 和匹配的 id，因为你有它：

```
<input type="submit" id="btnSubmit" > 
```

我发现一些较旧的浏览器版本，例如 IE 8，偶尔会允许表单提交两次，从而在数据库中为您提供两条新记录。为确保不会发生这种情况，请将您的 myOnComplete 更改为：

```
function myOnComplete(){
      $(this).find("input[type='image'],input[type='submit']").click(function(){
        return false;
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:26:42.950

我找到了解决方案：

我的目标是表单而不是提交按钮，并且在我应该使用 .submit() 的地方也使用了 .click()。

正确的代码如下：

```
 $('#btnSubmit').submit(function(e){
        e.preventDefault();
        return RSV(this, rules);
    }) 
```

# asp.net - 将集合和可选参数传递给存储过程 T-SQL - ASP.NET

> ID：16167793
> 
> 赞同：10
> 
> 时间：2013-04-23T11:08:13.737
> 
> 标签：asp.net, tsql, stored-procedures, set, optional-parameters

我有一个带有以下控件的**aspx 页面：** **TextBox、CheckBoxList、DropDownList**。它们用于指定搜索条件。这些记录是使用存储过程从**SQL Server 数据库中获取的。**

1.  **CheckBoxList**中的每个**CheckBox**都有一个值，该值是数据库中产品组的实际 ID。如果选中了多个复选框，如何将 ID 列表作为一组传递给存储过程，以便我可以使用**IN @IdList**？我应该在 C# 和 T-SQL 中使用哪些变量类型？有可能吗？

*****   **DropDownList**的第一项是“ALL”。选择“ALL”时，我需要将**NULL**之类的内容传递给存储过程。**如果参数为NULL**，如何使存储过程忽略参数？

    CREATE PROCEDURE FilterList @ProductName nvarchar(200), @ProductGroupID int AS BEGIN SELECT prod_id AS 'ID', prod_name AS 'Name' FROM dbo.Products WHERE prod_group_id = @ProductGroupID OR prod_name = @ProductName END**** 

 ***** * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T13:18:35.750

您可以通过使默认值等于 NULL 来实现 T-SQL 存储过程中的可选参数。

将 NULL 用作“忽略此参数”的示例：

```
CREATE PROCEDURE [dbo].[dcspFilterEmpList]
    @ProductName nvarchar(200) = null,
    @ProductGroupID int = null
AS BEGIN 

    SELECT
    prod_id AS 'ID',
    prod_name AS 'Name'
    FROM dbo.Products

    WHERE (prod_group_id = @ProductGroupID OR @ProductGroupID IS NULL)
    AND (prod_name = @ProductName OR @ProductName IS NULL)

END 
```

It's perfectly fine to define a stored procedure to take a table-valued parameter in T-SQL. Here is an article on the subject [http://sqlwithmanoj.wordpress.com/2012/09/10/passing-multipledynamic-values-to-stored-procedures-functions-part4-by-using-tvp/](http://sqlwithmanoj.wordpress.com/2012/09/10/passing-multipledynamic-values-to-stored-procedures-functions-part4-by-using-tvp/)

If you need more info on this google for "table-valued parameter"

Example using multi-valued parameters:

```
CREATE TYPE XTV_ProductNames AS TABLE  --extension, table valued == XTV
( ProductName nvarchar(50))
GO
CREATE TYPE XTV_ProductGroups AS TABLE  --extension, table valued == XTV
( ProductGroupID int))
GO
CREATE PROCEDURE [dbo].[dcspFilterEmpList]
    @TVP1 XTV_ProductNames READONLY
    ,@TVP2 XTV_ProductGroups READONLY
AS BEGIN 
    SELECT
    prod_id AS 'ID',
    prod_name AS 'Name'
    FROM dbo.Products as p
    INNER JOIN @TVP1 as s
        ON p.prod_name = s.ProductName
    UNION
    SELECT
    prod_id AS 'ID',
    prod_name AS 'Name'
    FROM dbo.Products as p
    INNER JOIN @TVP2 as s
        ON p.prod_group_id = s.ProductGroupID
END 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-22T21:17:04.227

Your answer was correct David, but it was a little misleading because the parameter equaling NULL does not make it optional; it just has to be set to any value period. This also creates optional parameters:

```
CREATE PROCEDURE [dbo].[dcspFilterEmpList]
    @ProductName nvarchar(200) = 'DefaultProduct',
    @ProductGroupID int = 1
AS 
```

Which could thus be executed without passing any parameters, i.e.:

```
EXEC [dbo].[dcspFilterEmpList] 
```

I understand that this wasn't necessarily what Piscovetz was trying to do, but it seems to match more closely the actual topic question shown, and it is an important distinction.****

# sqlite - ImportError：Jinja2 模板中没有名为 _sqlite3 的模块

> ID：16167798
> 
> 赞同：0
> 
> 时间：2013-04-23T11:08:34.133
> 
> 标签：sqlite, google-app-engine, jinja2

我刚刚从 Python 2.5 迁移到 2.7 运行时，我编写的大多数服务器运行良好。但是我偶尔会看到这个奇怪的堆栈跟踪（为简洁起见，我已经将其砍掉了）：

```
ERROR    2013-04-23 10:40:15,598 wsgi.py:235]
Traceback (most recent call last):
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/jinja2-2.6/jinja2/environment.py", line 894, in render
return self.environment.handle_exception(exc_info, True)
File "templates/querystart.html", line 30, in top-level template code
{% for session in sessions %}
ImportError: No module named _sqlite3 
```

我自己没有导入sqlite3，也不依赖它。调用它的代码非常简单（可能接近于愚蠢的一面）：

```
class UserIdQuery(BaseHandler):
def get(self):
    sessionQuery=Session.all().order("userid")
    template_values = {
        'sessions': sessionQuery,
    }
    self.render_template('querystart.html',**template_values) 
```

以上只是对以下内容的扩展（取自一个非常有用的迁移教程）

```
class BaseHandler(webapp2.RequestHandler):
@webapp2.cached_property
def jinja2(self):
    return jinja2.get_jinja2(app=self.app)

def render_template(self, filename, **template_args):
    self.response.write(self.jinja2.render_template(filename, **template_args)) 
```

任何人都知道什么可能会触发导入错误？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:11:50.267

Appengine 使用 sqlite 作为数据存储，我敢打赌你在 OSX 上安装的 python2.7 缺少 sqlite 二进制库。做一个快速测试，启动一个 python 解释器（在 appengine 之外）并尝试导入 sqlite3

```
$ python
Python 2.7.3 (default, Sep 26 2012, 21:53:58) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import sqlite3
>>> 
```

如果失败，您就知道您安装了不完整的 2.7 运行时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T00:05:10.293

我遇到了同样的问题并修复了它。

我正在运行从 Ninite.com 安装的 python 2.7.3。

卸载python，直接从python.org下载并安装2.7.5安装程序，问题就消失了。

# jquery - 动态jquery点击功能

> ID：16167799
> 
> 赞同：-3
> 
> 时间：2013-04-23T11:08:33.783
> 
> 标签：jquery

我有小脚本：

```
<script type="text/javascript">
    $(document).ready(function(){
      $('a').click(function (e) {
        e.preventDefault();
        $('#iframe2').show(1000);
        $('#iframe2').attr('src', "http://www.htp-crm.pl/");
        $(this).hide(1000);
      }); 
    });
</script> 
```

和html：

```
<a href="#" id="1">LINK1</a><br>
<a href="#" id="2">LINK2</a><br>
<a href="#" id="3">LINK3</a><br>
1<iframe id="iframe1" style="display: none;"></iframe><br>
2<iframe id="iframe2" style="display: none;"></iframe><br>
3<iframe id="iframe3" style="display: none;"></iframe><br> 
```

我怎样才能通过动态功能做到这一点？它总是相同的： id=1 的链接显示 iframe1 id=2 的链接显示 iframe2 ... id=27 的链接显示 iframe27

* * *

我用这个：

```
<script type="text/javascript">
    $(document).ready(function(){
        $('a').click(function (e) {
            var linkId=$(this).attr('class');
            e.preventDefault();
            $('.show_km_'+linkId).show(1000);
            $('.show_km_'+linkId).attr('src', "calendar_files/index-km.php?id='.$row['iid'].'");
            $(this).hide(1000);
        }); 
    });
</script> 
```

我使用这个脚本来显示我和所选地址之间的谷歌距离。如果 iframe 有“显示：无”，为什么我对位置权限有疑问？我认为在我单击链接以显示 iframe 后可能会出现问题:(我可以在这里更改一些内容吗？

// 好的，我修复了谷歌地图脚本 :)。感谢大家向我展示如何更改脚本。最好的祝福！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:12:27.847

试试这个....

```
<script type="text/javascript">
    $(document).ready(function(){
        $('a').click(function (e) {
            var linkId=$(this).attr('id');
            e.preventDefault();
            $('#iframe'+linkId).show(1000);
            $('#iframe'+linkId).attr('src', "http://www.htp-crm.pl/");
            $(this).hide(1000);
        }); 
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:13:11.563

您可以遍历您的锚点以获取`id`并将其分配给`id`您要显示的 iframe：

```
$('a').click(function(e) {
    e.preventDefault();
    var id = $(this).attr('id');
    $('iframe#' + id).show();
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:14:59.000

我建议使用`data`来引用锚点和 iframe 之间的链接，就像这样......

```
<a href="#" data-iframe="iframe1">LINK1</a><br>
<a href="#" data-iframe="iframe2">LINK2</a><br>
<a href="#" data-iframe="iframe3">LINK3</a><br>
1<iframe id="iframe1" style="display: none;"></iframe><br>
2<iframe id="iframe2" style="display: none;"></iframe><br>
3<iframe id="iframe3" style="display: none;"></iframe><br> 
```

然后你可以`click`像这样引用处理程序中的数据......

```
<script type="text/javascript">
    $(document).ready(function(){
        $("a").on("click", function (e) {
            e.preventDefault();
            var $iframe = $("#" + $(this).data("iframe"));
            $iframe.show(1000);
            $iframe.attr("src", "http://www.htp-crm.pl/");
            $(this).hide(1000);
        }); 
    });
</script> 
```

我还建议不要使用数字作为 ID。除了阅读不友好因为它没有告诉你它是什么的事实之外，一些浏览器不喜欢它。

# php - 在 CI 中使用另一个域作为 URL 的一部分

> ID：16167805
> 
> 赞同：0
> 
> 时间：2013-04-23T11:08:51.143
> 
> 标签：php, codeigniter, dns, cross-domain, codeigniter-url

我想通过`CI`一些人有这样的个人页面来制作一个网站

```
main-domain.com/index.php/sites/site_id/other-controller... 
```

我想为拥有这个 site_id 的每个人分配一个域，并且访问者按这样的域工作：

```
sub-site-domain.com/other-controller... 
```

（只需替换`main-domain.com/index.php/sites/site_id/ to sub-site-domain.com/`）我也想添加域服务器，但每个域都使用核心文件和数据库来加载数据。但使用他们自己的域进行内部链接。我怎样才能做到这一点？如何将域添加到服务器以及配置是什么？我可以`session`在子站点域中使用主域吗？拥有这样一个网站的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:33:54.327

您可以在配置中设置动态 base_url `$config['base_url'] = 'http://'.$_SERVER['HTTP_HOST'].'/';` 或类似的东西

# css - 在 iOS 移动设备中自动忽略最小高度

> ID：16167809
> 
> 赞同：6
> 
> 时间：2013-04-23T11:09:02.097
> 
> 标签：css, media-queries

我有一些列表项设置为`min-height: 12em`- 用于桌面

在为平板电脑/手机屏幕缩小尺寸时，我想将其重置为：`min-height: auto`

然而 iPad / iPhone 忽略了这一点并保持 12em

我也设置了`height: auto`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T11:50:23.673

使用以下代码：

```
/* Desktop */
.listings.default li {
    min-height: 12em;
} 

/* Between Desktop and Tablet */ 
@media only screen and (max-width: 1200px) and (min-width: 768px) { 
    .listings.default li {
        display: list-item;
        min-height: inherit;
    }
} 
```

所以使用`inherit`而不是`auto`

我在我的 iPhone 上对此进行了测试，但使用了另一个媒体查询。查看[这篇文章](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)以查看标准设备的一些媒体查询。

# scala - Netflix Astyanax in scala

> ID：16167810
> 
> 赞同：0
> 
> 时间：2013-04-23T11:09:03.150
> 
> 标签：scala, for-loop

I got this code from [https://github.com/Netflix/astyanax/wiki/Cql-and-cql3](https://github.com/Netflix/astyanax/wiki/Cql-and-cql3)

I'm new to scala and my problem is to convert this for loop to a scala one.

Could you please help ?

```
result = keyspace
        .prepareQuery(CQL3_CF)
        .withCql("SELECT * FROM employees WHERE empId='111';")
        .execute();

for (Row<Integer, String> row : result.getResult().getRows()) {
    LOG.info("CQL Key: " + row.getKey());

    ColumnList<String> columns = row.getColumns();

    LOG.info("   empid      : " + columns.getIntegerValue("empid",      null));
    LOG.info("   deptid     : " + columns.getIntegerValue("deptid",     null));
    LOG.info("   first_name : " + columns.getStringValue ("first_name", null));
    LOG.info("   last_name  : " + columns.getStringValue ("last_name",  null));
} 
```

Many thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:51:53.470

将此代码转换为基于 scala 的循环构造的一种方法如下：

```
 import scala.collection.JavaConversions._

  val result = keyspace
    .prepareQuery(CQL3_CF)
    .withCql("SELECT * FROM employees WHERE empId='111';")
    .execute();  

  result.getResult().getRows() foreach { row =>
    LOG.info("CQL Key: " + row.getKey())

    val columns = row.getColumns()

    LOG.info("   empid      : " + columns.getIntegerValue("empid",      null))
    LOG.info("   deptid     : " + columns.getIntegerValue("deptid",     null))
    LOG.info("   first_name : " + columns.getStringValue ("first_name", null))
    LOG.info("   last_name  : " + columns.getStringValue ("last_name",  null))    
  } 
```

通过导入 JavaConversions._，我们可以访问一个隐式转换，它将 Java Iterable（即 Rows 对象）转换为 a `scala.collection.Iterable`，从而允许您使用`foreach`循环构造。

现在，这段代码在语法上是合理的，但它并不是真正好的 Scala 代码。它不是很实用，因为循环本身不返回任何东西。它还有一些处理空值的混乱逻辑，可能应该使用 Options 来代替。一个更实用的解决方案示例，`map`用于将结果数据映射到一个简单的案例类，如下所示：

```
import scala.collection.JavaConversions._

val result = keyspace
  .prepareQuery(CQL3_CF)
  .withCql("SELECT * FROM employees WHERE empId='111';")
  .execute(); 

case class Employee(id:Option[Int], depId:Option[Int], 
  firstName:Option[String], lastName:Option[String])

def optFor[T](cl:ColumnList[String], func:(ColumnList[String] => T)):Option[T] = {
  func(cl) match{
    case null => None
    case nonnull => Some(nonnull)
  }
}

val employees = result.getResult().getRows() map { row =>
  LOG.info("CQL Key: " + row.getKey())
  val cl = row.getColumns()
  val employee = Employee(optFor(cl, _.getIntegerValue("empid", null)), 
    optFor(cl, _.getIntegerValue("deptid", null)), 
    optFor(cl, _.getStringValue("first_name", null)), 
    optFor(cl, _.getStringValue("last_name", null)))

  LOG.info(employee)
  employee
} 
```

可能有一种更优雅的方式来处理 null 到`Option`转换（也许通过隐式），但这也有效。完成`map`操作后，您将拥有一个`scala.collection.Iterable`实例`Employee`，然后您可能会返回到 UI 进行显示。

# macos - 无法在 Qt 中选择 GCC (x86 32bit) 工具链

> ID：16167814
> 
> 赞同：0
> 
> 时间：2013-04-23T11:09:22.227
> 
> 标签：macos, qt

我无法选择 gcc 32bit 作为工具链来编译我的 qt 应用程序。以下是详细信息。

```
QtCreator - 2.4.1 (64bit)
QtSDK     - 4.8.0 (64bit)
Platform  - OS X Mountain Lion 10.8.2
Xcode     - 4.6.2 
```

我只想用 32 位工具链编译我的应用程序。我可以在 windows 中编译，但在 mac 中却不行。所以请帮我解决这个问题。

`Qt creator->Preferences->Build&Run`可用工具链列表如下所示

```
GCC (x86 32bit)
GCC (x86 64bit)
GCC (ppc 32bit)
GCC (ppc 64bit) 
```

但是当我尝试在项目的构建设置下设置工具链时，它仅列出如下

```
GCC (x86 64bit)
GCC (ppc 64bit) 
```

我还必须做什么才能获得 32 位。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:15:11.770

在 Creator 的设置中为此创建一个套件。它在工具->选项->构建和运行中。然后将该套件添加到项目的设置中。

当然，除非您安装的 Qt 库仅是 64 位的。在这种情况下，您显然无法使用它们构建 32 位应用程序。如果是这种情况，您需要自己构建 32 位的 Qt。

# c# - 异步 WCF：一个请求 => n 个结果

> ID：16167824
> 
> 赞同：1
> 
> 时间：2013-04-23T11:10:03.410
> 
> 标签：c#, wcf, asynchronous, request, response

WCF 是否可以执行一个异步请求并获得 0 到 n 个响应？

示例：当请求对象列表时，我想调用 wcfservice.GetObjects() 并作为响应，我希望每个对象都有响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:00:19.847

你为什么需要那个？是因为表演吗？

你不能只是分页吗

# c# - 提供对数据库处理程序的全局访问

> ID：16167827
> 
> 赞同：0
> 
> 时间：2013-04-23T11:10:23.753
> 
> 标签：c#, persistence

我正在用 C# 开发一个应用程序（但这不相关，因为我不想使用任何语言工具）并且我需要处理与数据库的连接。我会避免在每种方法中显式创建连接，例如：

```
private void btnAnteprima_Click(object sender, EventArgs e) 
{
    SqlConnection myConnection = new SqlConnection("user id=***;" +
                   "password=***;server=***;" +
                   "database=***");
    myConnection.Open();
    SqlDataReader myReader = null;
    SqlCommand myCommand = new SqlCommand("select * from *** where IDCliente=*", myConnection);
    myReader = myCommand.ExecuteReader();

    while (myReader.Read())
    {
        MessageBox.Show(myReader["xyz"].ToString());
    }           
} 
```

我会这样：

```
private void btnAnteprima_Click(object sender, EventArgs e) 
{
    SqlReader myReader = DbFactory.ExecuteQuery("select * from *** where IDCliente=*");

    while (myReader.Read())
    {
        MessageBox.Show(myReader["xyz"].ToString());
    }           
} 
```

据我所知，使用单例模式在性能方面是无用的，甚至是有害的。我徘徊在工厂模式以实现这一目标，但我不知道如何做到最好。你有例子，纸来做这件事吗？我不想重新发明轮子，我只想使用正确的设计模式，并了解轮子的背后是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:16:19.163

查看带有 Microsoft 企业库的数据访问块。

[http://msdn.microsoft.com/en-us/library/ff664408(v=pandp.50).aspx](http://msdn.microsoft.com/en-us/library/ff664408(v=pandp.50).aspx)

# python - In pandas, how can I reset index without adding a new column?

> ID：16167829
> 
> 赞同：65
> 
> 时间：2013-04-23T11:10:32.200
> 
> 标签：python, pandas

```
In [37]: df = pd.DataFrame([[1, 2, 3, 4], [2, 3, 4, 5], [3, 4, 5, 6]])

In [38]: df2 = pd.concat([df, df])

In [39]: df2.reset_index()
Out[39]: 
   index  0  1  2  3
0      0  1  2  3  4
1      1  2  3  4  5
2      2  3  4  5  6
3      0  1  2  3  4
4      1  2  3  4  5
5      2  3  4  5  6 
```

My problem is that how can I `reset_index` without adding a new column `index`?

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2013-04-23T11:30:00.707

您可以使用 中的`drop=True`选项`reset_index()`。见[这里](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.reset_index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-22T17:43:53.150

您也可以删除该列。

```
df2.reset_index().drop(["index"], axis=1)

    0   1   2   3
0   1   2   3   4
1   2   3   4   5
2   3   4   5   6
3   1   2   3   4
4   2   3   4   5
5   3   4   5   6 
```

# python - Python : I have a small bug with my beginner calculator

> ID：16167832
> 
> 赞同：0
> 
> 时间：2013-04-23T11:10:39.133
> 
> 标签：python, python-3.x, calculator

I've just started with python and I'm not too great at learning where the problems lie. I have this calculator code which I am trying to create from scratch, however I've run into a small problem.

```
def Addition():
    print('Addition: What are your numbers?')
    a = int(input('First Number:'))
    b = int(input('Second Number:'))
    print('Your Answer is:', a + b)

def Subtraction():
    print('Subtraction: What are your numbers?')
    c = int(input('First Number:'))
    d = int(input('Second Number:'))
    print('Your Answer is:', c - d)

def Multiplication():
    print('Multiplication: What are your numbers?')
    e = int(input('First Number:'))
    f = int(input('Second Number:'))
    print('Your Answer is:', e * f)

def Division():
    print('Division: What are your numbers?')
    g = int(input('First Number:'))
    h = int(input('Second Number:'))
    print('Your Answer is:', g / h)

x = 'test'

def Question():
        x = input('What would you like to do? (Add, Subtract, Divide, Multiply or         Quit)')
        while x == 'Add' or 'add' or 'A' or 'a':
            x = 'test123'
            print(Addition())
            x = 'test'
        while x == 'Divide' or 'Div' or 'D' or 'divide' or 'div':
            x = 'test'
            print(Division())
            x = 'test'
        while x == 'Multiply' or 'Mul' or 'Mult' or 'multiply' or 'mult' or 'Times' or 'times':
            x = 'test'
            print(Multiplication())
            x = 'test'
        while x == 'Subtract' or 'Take Away' or 'Take away' or 'take Away' or 'take away':
            x = 'test'
            print(Subtraction())
            x = 'test'
        while x == 'Quit' or 'exit' or 'quit' or 'Exit':
            x = 'test'
            print(exit())
        while x == 'test':
            print(Question())

while x == 'test':
        print(Question()) 
```

When i run the code it decides that Addition() is what it wants to run after asking me the question, no matter the input. Is this because I have defined it first, or for some other reason? Also, I don't want to use anyone elses code, but is there a simpler way to do this? Any help is greatly appreciated!

Thank you everyone for the help!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:16:13.703

你的代码有很多问题，但你的`Addition`函数总是被执行的原因是因为比较字符串不会像你想象的那样工作。当你写

```
while x == 'Add' or 'add' or 'A' or 'a': 
```

这被解释为

```
while (x == 'Add') or 'add' or 'A' or 'a': 
```

并因此检查 x 是否等于 'Add' 或任何字符串文字评估为 'True'，他们会这样做。编写比较的更好方法是使用`in`运算符（并使用`if`语句而不是 while）：

```
if x.lower() in ["add", "a"]: 
```

调用`lower`String 会将其转换为所有小写字符，因此将其与 'add' 进行比较就足够了，您无需将其与任何其他大小写不同的拼写进行比较。

另一件需要注意的是，您的代码中有大量不必要的重复 - 您可以将输入部分重构为单独的函数，而不是四次复制粘贴代码：

```
def getInput():
    a = int(input('First Number:'))
    b = int(input('Second Number:'))
    return a, b 
```

您现在可以像这样编写函数：

```
def addition():
    print('Addition: What are your numbers?')
    a, b = getInput()
    print('Your Answer is:', a + b) 
```

或者您可以通过创建一个广义评估函数来进一步简化这一点，该函数将函数作为应用于输入值的参数：

```
def evaluate(name, function):
    print("%s: What are your numbers?" % name)
    a, b = getInput()
    print("Your Answer is:", function(a, b)) 
```

这允许您根据“评估”函数定义加法、乘法等，将 lambda 作为参数传递：

```
evaluate("Addition", lambda x, y: x + y)
evaluate("Multiplication", lambda x, y: x * y)
evaluate("Two times a to the power of b", lambda x, y: 2 * (x ** y)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T11:16:34.163

问题是这一行：

```
 while x == 'Add' or 'add' or 'A' or 'a': 
```

应该是：

```
 if x in ['Add', 'add', 'A', 'a']: 
```

然后做出其他的 elif 语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T11:27:48.823

我认为您需要阅读有关函数和函数参数的信息。还可以查看循环及其用法。

这是您的代码的重构版本。它并不完美，但它应该让您知道移动到哪里。

```
def addition(a, b):
    return a + b

def subtraction(a, b):
    return a - b

def multiplication(a, b):
    return a * b

def division(a, b):
    if b != 0:
        return a / b
    else:
        print("Error: division by zero")

def question():
        x = input('What would you like to do? (Add, Subtract, Divide, Multiply or Quit)')
        while x != "Quit":
            a = int(input("Enter number a: "))
            b = int(input("Enter number b: "))

            if x == "Add":
                print(addition(a,b))
            elif x == "Subtract":
                print(subtraction(a,b))
            elif x == "Divide":
                print(division(a,b))
            elif x == "Multiply":
                print(multiplication(a,b))
            else:
                print("Wrong operation")

            x = input('What would you like to do? (Add, Subtract, Divide, Multiply or Quit)')

if __name__ == "__main__":
    question() 
```

以下是您在运行后如何使用它：

```
What would you like to do? (Add, Subtract, Divide, Multiply or Quit)"Add"
Enter number a: 4
Enter number b: 5
9
What would you like to do? (Add, Subtract, Divide, Multiply or Quit)"Subtract"
Enter number a: 6
Enter number b: 3
3
What would you like to do? (Add, Subtract, Divide, Multiply or Quit)"Quit" 
```

# javascript - Jquery Get 方法不运行成功事件

> ID：16167838
> 
> 赞同：-1
> 
> 时间：2013-04-23T11:11:10.863
> 
> 标签：javascript, jquery, xml, xml-parsing

我有以下代码来读取 XML 文件。

```
function getServiceURL(serviceName) {
    $.get("/xml/ServiceUrls.xml", function(xml){
        $(xml).find("service-name").each(function(){
            if($("service-name").text() == serviceName){
                var url = $("service-name").parent().find("service-url").text();
                return url;
            }else{
                return null;
            }
        });
    });
} 
```

xml文件看起来像这样！

```
<service>
    <service-title>getAllMajorGroups</service-title>
    <service-url>localhost:9157/getAllMajorGroups</service-url>
    <service-description>Web service to retrieve item major groups</service-description>
</service> 
```

当我运行应用程序时，get 查询的响应是成功的。

![在此处输入图像描述](https://i.stack.imgur.com/cfJ1L.png)

但该方法不运行成功功能。我也尝试使用 $.ajax 但同样的问题！有人有同样的东西吗？我在这里做错什么了吗？

请帮我！

谢谢！

更新：

我使用以下代码在另一个函数中调用该函数。

```
var serviceUrl = getServiceURL("getAllMajorGroups") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:14:38.267

你不觉得`service-name`应该`service-title`——

```
$(xml).find("service-title").each(function(){
            if($(this).text() == serviceName){
                var url = $(this).parent().find("service-url").text();
                return url;
            }else{
                return null;
            }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:15:37.383

当您`$("service-name")`在循环中编写时，它查看的是常规 DOM，而不是下载的 XML。您需要使用`$(this)`来获取`.each()`正在处理的元素。

```
function getServiceURL(serviceName) {
    $.get("/xml/ServiceUrls.xml", function(xml){
        alert ("success!"+xml);
        $(xml).find("service-name").each(function(){
            if($(this).text() == serviceName){
                var url = $(this).parent().find("service-url").text();
                return url;
            }else{
                return null;
            }
        });
    });
} 
```

我也不确定你期望`return url`做什么。`each()`迭代函数的返回值唯一要做的就是检查它是否`false`存在——如果是，则迭代停止。您不能通过`getServiceURL()`这种方式返回值，因为`$.get`它是异步的——它在 AJAX 调用开始时返回，它不等待响应。

# c# - 如何使用 C# 在具有特殊定位的 MS Word 中编写

> ID：16167844
> 
> 赞同：1
> 
> 时间：2013-04-23T11:11:23.760
> 
> 标签：c#, c#-4.0, ms-word

我有用于在 Microsoft Word 文档上打开和编写文本的代码。

```
 private void button1_Click(object sender, EventArgs e)
    {

        Microsoft.Office.Interop.Word._Application oWord;

        object oMissing = Type.Missing;
        oWord = new Microsoft.Office.Interop.Word.Application();
        oWord.Visible = true;

        oWord.Documents.Open("f:\\test.docx");
        oWord.Selection.TypeText("Write your text here");
    } 
```

我的问题是，如何使用特殊格式（位置、间距、对齐方式等）在 doc 文件中编写文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:14:55.353

我建议阅读这篇文章。您可以找到基本的文本格式以及许多其他可能派上用场的东西：
[http](http://www.c-sharpcorner.com/UploadFile/amrish_deep/WordAutomation05102007223934PM/WordAutomation.aspx)
: //www.c-sharpcorner.com/UploadFile/amrish_deep/WordAutomation05102007223934PM/WordAutomation.aspx 4.3.3 描述文本选择和 11.2 文本格式

# scripting - Corona SDK: iPhone 5 adjustment

> ID：16167846
> 
> 赞同：2
> 
> 时间：2013-04-23T11:11:27.840
> 
> 标签：scripting, lua, coronasdk, iphone-5

I am using the following config.lua file when creating my mobile application.

The screen will not adjust to iPhone5 when building to device. It will, however, adjust when running on the simulator that corona provides.

Can you tell me if the problem lies in this file, or if it depends on some other implementation issue.

Thanks!

/S

```
local isTall = ( "iPhone" == system.getInfo( "model" ) ) and ( display.pixelHeight > 960 )

 -- iPad Configuration
 if ( string.sub( system.getInfo("model"), 1, 4 ) == "iPad" ) then
   application =
   {
      content =
      {
         width = 360,
         height = 480,
         scale = "letterBox",
         xAlign = "center",
         yAlign = "center",
         imageSuffix =
         {
            ["@2x"] = 1.5,
            ["@4x"] = 3.0,
         },
      },
   }

   -- iPhone5 Configuration
   elseif ( string.sub( system.getInfo("model"), 1, 2 ) == "iP" and display.pixelHeight > 960 ) then
   application =
   {
      content =
      {
         width = 320,
         height = 568,
         scale = "letterBox",
         xAlign = "center",
         yAlign = "center",
         imageSuffix =
         {
            ["@2x"] = 1.5,
            ["@4x"] = 3.0,
         },
      },
   }

   -- iPhone 3,4 and Older iPod Touch
   elseif ( string.sub( system.getInfo("model"), 1, 2 ) == "iP" ) then
   application =
   {
      content =
      {
         width = 320,
         height = 480,
         scale = "letterBox",
         xAlign = "center",
         yAlign = "center",
         imageSuffix =
         {
            ["@2x"] = 1.5,
            ["@4x"] = 3.0,
         },
      },
   } 

   -- Android, Kindle Fire, and Nook
   elseif ( display.pixelHeight / display.pixelWidth > 1.72 ) then
   application =
   {
      content =
      {
         width = 320,
         height = 570,
         scale = "letterBox",
         xAlign = "center",
         yAlign = "center",
         imageSuffix =
         {
            ["@2x"] = 1.5,
            ["@4x"] = 3.0,
         },
      },
   }

else
   application =
   {
      content =
      {
         width = 320,
         height = 512,
         scale = "letterBox",
         xAlign = "center",
         yAlign = "center",
         imageSuffix =
         {
            ["@2x"] = 1.5,
            ["@4x"] = 3.0,
         },
      },
   }

end 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T12:13:37.123

解决了！

显然，我认为这根本不清楚，需要添加（到应用程序的根目录）一个名为“Default-568h@2x.png”的文件，它告诉设备进入 iPhone5 模式！

此文件应为尺寸为 640x1136 的 png

更多信息可以在以下位置找到：

*   [http://www.coronalabs.com/blog/2012/09/14/corona-guidelines-iphone-5-and-ios6-preliminary/](http://www.coronalabs.com/blog/2012/09/14/corona-guidelines-iphone-5-and-ios6-preliminary/)

在“支持 tall 应用程序”下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T12:35:09.803

如果您正在构建横向模式，例如

```
orientation = {
    default = "landscapeLeft",
    content = "landscapeLeft",
    supported = { "landscapeRight", "landscapeLeft"}
}, 
```

使用尺寸为 1136x640 的“Default-568h@2x.png”，否则会出现问题。

# http - Allow only one action use non secured connection at ASP.NET mvc 4, c#

> ID：16167847
> 
> 赞同：2
> 
> 时间：2013-04-23T11:11:33.957
> 
> 标签：http, asp.net-mvc-4, https

At my web application I need to create an action what will be accessible using http non secured connection. All other have to be accessible for https only. I found that I can use `[RequireHttps]` attribute for controller and action.

*But is there something like `[AllowHttp]` attribute?*

I do not want to put to all controller's action `[RequireHttps]` attribute. It's easier to put `[RequireHttps]` to Controller and `[AllowHttp]` to one action what can be accessed unsecured. Of course if this attribute is available

I mean something like we can do with Authentication. `[Authorize]` to controller and `[AllowAnonymous]` for some actions what can be accessed without authentication.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:22:35.590

正如您在 AuthorizeAttribute 的源代码中看到的那样，它检查 AllowAnonymousAttribute 的存在

```
 bool skipAuthorization = filterContext.ActionDescriptor.IsDefined(typeof(AllowAnonymousAttribute), inherit: true)
                                 || filterContext.ActionDescriptor.ControllerDescriptor.IsDefined(typeof(AllowAnonymousAttribute), inherit: true); 
```

所以你可以从 RequireHttps 派生你自己的属性并添加相同的检查，所以它看起来像

```
 if (!skipAuthorization && !filterContext.HttpContext.Request.IsSecureConnection)
        {

            HandleNonHttpsRequest(filterContext);
        } 
```

而不是 AllowAnonymousAttribute，您可以添加自己的 AllowHttpAttribute 并用这个新的 AllowHttpAttribute 标记您的操作

# php - Updating Multiple MySQL Rows at Once

> ID：16167855
> 
> 赞同：3
> 
> 时间：2013-04-23T11:12:00.947
> 
> 标签：php, mysql

Here's the scenario:

When the customer first place his/her order, the table is empty; looks like this

```
+----+------+---------+
| no | item | results |
+----+------+---------+ 
```

When the order has been placed, the table looks like this

```
+----+--------+---------+
| no | item   | results |
+----+--------+---------+
| 1  | Test 1 | null    |
| 2  | Test 2 | null    |
| 3  | Test 3 | null    |
+----+--------+---------+ 
```

That's the easy part. I can use comma separated `VALUE` clauses in the `INSERT` query.

The order is then sent to the lab, and when the lab guys are done with the job, the table becomes like this:

```
+----+--------+---------+
| no | item   | results |
+----+--------+---------+
| 1  | Test 1 | Res 1   |
| 2  | Test 2 | Res 2   |
| 3  | Test 3 | Res 3   |
+----+--------+---------+ 
```

This is where your answers come in. I need to update the tests with the results. However I'd really prefer not to do dozens of `UPDATE--SET--WHERE` statements, one for each test items. Is there any other way?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:29:56.823

根据存储引擎限制等，您可以*在重复时使用插入*

[http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html)

如果行已经存在，这允许您使用更新值的插入查询。

就像是

```
insert into table (no, item, result) values(1, "A", "B") on duplicate key update item=values(item), result=values(result) 
```

还有*REPLACE INTO*。

[http://dev.mysql.com/doc/refman/5.0/en/replace.html](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

其中之一应该适合您的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:18:21.040

您可以在其中创建另一个表和`INSERT`值：

```
+----+---------+
| no | results |
+----+---------+
| 1  | Res 1   |
| 2  | Res 2   |
| 3  | Res 3   |
+----+---------+ 
```

然后只有一个更新：

```
UPDATE
    t1
SET
    results = t2.results
INNER JOIN
    t2
ON t1.no = t2.no 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T11:28:58.043

```
INSERT INTO ... ON DUPLICATE KEY UPDATE 
```

表必须有唯一键。它比单行更新更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T11:13:21.503

不幸的是（据我所知），您不能在单个 SQL 查询中执行多个唯一更新。

您可以在单个查询中更新多行，但它们将分别获得相同的更新。

每个更新都需要作为自己的声明来完成。

您最好的选择是编写一个更新单行的循环，并让它为需要完成的每个更新运行。

# asp.net-mvc-3 - 值无法在文本框中正确显示 通过在 mvc3 中使用 jquery 和 ajax 根据在第一个文本框中选择的值填充第二个文本框中的值

> ID：16167857
> 
> 赞同：0
> 
> 时间：2013-04-23T11:12:02.043
> 
> 标签：asp.net-mvc-3, jquery

我正在 mvc3 中处理一个带有 2 个字段的小表单，1 个用于帐户代码，第二个用于帐户描述。
我使用 jquery 自动完成文本框从 sql server 2008 r2 数据库中的帐户代码字段中获取帐户代码和描述的数据，但它不会在文本框中正确显示值。
下面是我的代码。

```
$(function () {
        $("#AcCode").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "/Home/AutocompleteSuggestions", type: "POST", dataType: "json",
                    data: { term: request.term },
                    success: function (data) {
                        response($.map(data, function (item) {
                            return { label: item.split('-')[0], value: item.split('-')[1] }
                        }))
                    }
                })
            },
            minLength: 1,
            select: function (event, ui) {
                if (ui.item) {
                    alert("You picked" + ui.item.label + "' with a value of " + ui.item.value);
                     $("#AcCode").val(ui.item.label),
                   $("#Descrip").val(ui.item.value);
                }
            }

        });
    }); 
```

它在帐户代码字段中显示描述，而在描述字段中不显示任何内容。帮我解决这个问题。我想在描述字段中显示描述，在帐户代码字段中显示帐户代码。

从数据库中获取数据的函数 public List GetAutoCompDataDAL(string Acode) {

```
 List<string> result = new List<string>();

        using (SqlConnection con = new SqlConnection(CONNECTION_STRING))
        {
            using (SqlCommand cmd = new SqlCommand("select AcCode,Descrip from Account where AcCode like '%'+@AcCode+'%' order by AcCode asc", con))
            {
                con.Open();
                cmd.Parameters.AddWithValue("@AcCode", Acode);
                SqlDataReader dr = cmd.ExecuteReader();
                while (dr.Read())
                {

                    result.Add(string.Format("{0}-{1}", dr["AcCode"].ToString(), dr["Descrip"].ToString()));

                }
                con.Close();
                return result;
                //return result1;
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:26:01.493

您可以使用可以表示的视图模型（选项＃1），`AcCode`或者`Descrip`如果您不想要额外的代码（附加类），则返回对象列表（选项＃2）：

```
// option #1 if you want a viewmodel
public class AccountModel {
    public string Code {get;set}
    public string Description {get;set;}
}
// then use it just like the following:
//
// instead of this
// List<string> result = new List<string>();
// do this:
// option #1
// var results = new List<AccountModel>();
// option #2 
var results = new List<object>();

while (dr.Read())
{
    var code = dr["AcCode"].ToString();
    var desc = dr["Descrip"].ToString();
    results.Add(new { code , desc });
} 
```

然后在最后一个`using`子句之后将`results`对象作为 json 返回：

```
public ActionResult AutocompleteSuggestions() {
    return Json(results,JsonRequestBehavior.AllowGet);
} 
```

然后不是这样做：

```
$.ajax({
    url: "/checkout/AutocompleteSuggestions", type: "POST", dataType: "json",
    data: { term: request.term },
    success: function (data) {
        response($.map(data, function (item) {
            return { label: item.split('-')[0], value: item.split('-')[1] }
        }))
    }
}) 
```

您可以参考每个字段：

```
$.ajax({
    url: "/checkout/AutocompleteSuggestions", type: "POST", dataType: "json",
    data: { term: request.term },
    success: function (data) {
        response($.map(data, function (item) {
            return { label: item.code, value: item.desc }
        }))
    }
}) 
```

# c - C程序中的指针

> ID：16167858
> 
> 赞同：-4
> 
> 时间：2013-04-23T11:12:05.660
> 
> 标签：c, pointers

考虑 C 中的以下 2 个代码：- 第一个代码：-

```
int main()
{
    int *a,*b;
    *a=1;
} 
```

第二个代码： -

```
int main()
{
    int *a,*b;
    *a=1;
    *b=1;
} 
```

它们都编译没有错误。但是第一个运行，第二个没有。谁能解释一下？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T11:14:33.903

它们都表现出未定义的行为：第一个运行的原因是默认情况下恰好位于的指针指向`a`内存中写入不会导致崩溃的区域（它仍然是非法的）。你需要初始化你的指针来解决这个问题：

```
int *a = malloc(sizeof(int));
int *b = malloc(sizeof(int));
*a = 1;
*b = 1;
free(a);
free(b); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T11:19:26.933

这个问题的原因是指针没有任何内存地址，所以你必须在使用它们之前提供一个合法的内存地址。顺便说一句，你的两个代码都是错误的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T11:18:33.277

```
 int *a,*b;
    *a=1; 
```

在这里，`a`并且`b`有垃圾值（指向随机位置）。当你这样做时`*a = 1`，它将写入（覆盖）到它指向的那个位置[如果你被允许访问它]。有时，这可能不起作用，您会得到一个`segmentation fault`

# c# - 如何在 ASP.NET 下拉列表中添加选项组？

> ID：16167862
> 
> 赞同：35
> 
> 时间：2013-04-23T11:12:17.513
> 
> 标签：c#, asp.net

我需要在 ASP.NET 下拉服务器控件中对下拉列表选项进行分组。您对如何解决这个问题有任何想法吗？我是 ASP.NET 的新手。

![我的要求。](https://i.stack.imgur.com/6Cb7f.gif)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-23T11:15:30.470

看看这篇文章，我也需要 Group DropDown list 。. .

[具有 OptionGroup 支持的 ASP.NET DropDownList](http://www.codeproject.com/Articles/15505/ASP-NET-DropDownList-with-OptionGroup-support)

用法 ：

```
protected void Page_Load(object sender, EventArgs e) 
{

              ListItem item1 = new ListItem("Camel", "1");
              item1.Attributes["OptionGroup"] = "Mammals";

              ListItem item2 = new ListItem("Lion", "2");
              item2.Attributes["OptionGroup"] = "Mammals";

              ListItem item3 = new ListItem("Whale", "3");
              item3.Attributes["OptionGroup"] = "Mammals";

              ListItem item4 = new ListItem("Walrus", "4");
              item4.Attributes["OptionGroup"] = "Mammals";

              ListItem item5 = new ListItem("Velociraptor", "5");
              item5.Attributes["OptionGroup"] = "Dinosaurs";

              ListItem item6 = new ListItem("Allosaurus", "6");
              item6.Attributes["OptionGroup"] = "Dinosaurs";

              ListItem item7 = new ListItem("Triceratops", "7");
              item7.Attributes["OptionGroup"] = "Dinosaurs";

              ListItem item8 = new ListItem("Stegosaurus", "8");
              item8.Attributes["OptionGroup"] = "Dinosaurs";

              ListItem item9 = new ListItem("Tyrannosaurus", "9");
              item9.Attributes["OptionGroup"] = "Dinosaurs";

              ddlItems.Items.Add(item1);
              ddlItems.Items.Add(item2);
              ddlItems.Items.Add(item3);
              ddlItems.Items.Add(item4);
              ddlItems.Items.Add(item5);
              ddlItems.Items.Add(item6);
              ddlItems.Items.Add(item7);
              ddlItems.Items.Add(item8);
              ddlItems.Items.Add(item9);

          } 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-01-31T13:52:01.503

我真的很喜欢这个客户端解决方案（不需要自定义 DropDownList，但使用 jQuery）：

**后端**

```
private void _addSelectItem(DropDownList list, string title, string value, string group = null) {
   ListItem item = new ListItem(title, value);
   if (!String.IsNullOrEmpty(group))
   {
       item.Attributes["data-category"] = group;
   }
   list.Items.Add(item);
}

...
_addSelectItem(dropDown, "Option 1", "1");
_addSelectItem(dropDown, "Option 2", "2", "Category");
_addSelectItem(dropDown, "Option 3", "3", "Category");
... 
```

**客户**

```
var groups = {};
$("select option[data-category]").each(function () {
     groups[$.trim($(this).attr("data-category"))] = true;
});
$.each(groups, function (c) {
     $("select option[data-category='"+c+"']").wrapAll('<optgroup label="' + c + '">');
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-07T14:44:10.140

这很旧，但由于我最近使用了公认的答案，所以我想分享我的经验。虽然它确实提供了正确的标记，但它给我带来了问题，特别是当我尝试提交带有任何下拉列表的表单时，我会得到可怕的“无效回发或回调参数”错误。在像疯子一样用谷歌搜索之后，我发现了[这篇文章](http://randomdotnetnuggets.blogspot.com/2011/10/add-optgroup-tag-to-your-dropdownlist.html)，然后链接到了[这篇博](http://www.cstruter.com/blog/259)文。我最终使用的代码是这样的：

```
 public class DropDownListAdapter : System.Web.UI.WebControls.Adapters.WebControlAdapter {
    protected override void RenderContents(HtmlTextWriter writer) {

        var dropDownList = (DropDownList)Control;
        var items = dropDownList.Items;

        var groups = (from p in items.OfType<ListItem>()
                      group p by p.Attributes["Group"] into g
                      select new { Label = g.Key, Items = g.ToList() });

        foreach (var group in groups)
        {
            if (!String.IsNullOrEmpty(group.Label))
            {
                writer.WriteBeginTag("optgroup");
                writer.WriteAttribute("label", group.Label);
                writer.Write(">");
            }

            var count = group.Items.Count();
            if (count > 0)
            {
                var flag = false;
                for (var i = 0; i < count; i++)
                {
                    var item = group.Items[i];

                    writer.WriteBeginTag("option");
                    if (item.Selected)
                    {
                        if (flag)
                        {
                            throw new HttpException("Multiple selected items not allowed");
                        }
                        flag = true;

                        writer.WriteAttribute("selected", "selected");
                    }

                    if (!item.Enabled)
                    {
                        writer.WriteAttribute("disabled", "true");
                    }

                    writer.WriteAttribute("value", item.Value, true);

                    if (Page != null)
                    {
                        Page.ClientScript.RegisterForEventValidation(dropDownList.UniqueID, item.Value);
                    }
                    writer.Write('>');
                    HttpUtility.HtmlEncode(item.Text, writer);
                    writer.WriteEndTag("option");
                    writer.WriteLine();
                }
            }
            if (!String.IsNullOrEmpty(group.Label))
            {
                writer.WriteEndTag("optgroup");
            }
        }
    }
} 
```

此处使用的列表项是在设计页面中创建的，而不是在代码隐藏页面中创建的，如下所示：

```
<asp:ListItem Value="apple" Text="Apple" Group="Fruit"></asp:ListItem>
<asp:ListItem Value="banana" Text="Banana" Group="Fruit"></asp:ListItem>
<asp:ListItem Value="asparagus" Text="Asparagus" Group="Vegetable"></asp:ListItem>
<asp:ListItem Value="eggs" Text="Eggs" Group="Dairy"></asp:ListItem> 
```

这产生了与此处接受的答案相同的标记，但这并没有给我回发错误。我希望这可以减轻一些人的痛苦。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-26T20:40:06.973

```
----- in .cs  -----

List<SelectListItem> sl = new List<SelectListItem>();

sl.Add(new SelectListItem() { Text = "My text", Value = "1", Group = new SelectListGroup() { Name = "First Group" } });

sl.Add(new SelectListItem() { Text = "My text 2", Value = "2", Group = new SelectListGroup() { Name = "First Group" } });

var sl1 = new SelectList(sl,"Value","Text","Group.Name",-1);

ViewData["MyList"] = sl1;

----- in .cshtml    -----
Html.DropDownList("My List", ViewData["MyList"] as SelectList,
                        "-- No Preference --",
                        new {
                            @class = "ui-widget ui-corner-all square_corners searchPageDropdown"
                        })) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-11T12:13:54.283

1) 将下拉列表适配器类从[这里](http://www.codeproject.com/Articles/15505/ASP-NET-DropDownList-with-OptionGroup-support)添加到您的项目中

2) 将 App_Browsers 文件夹添加到您的项目中（右键单击项目 => 添加 => 添加 ASP.NET 文件夹 => App_Browsers）

3) 在 App_Browsers 页面中添加一个浏览器文件，并在 browsers 标签内添加以下代码。

`<browser refID="WebKit"> <controlAdapters> <adapter controlType="System.Web.UI.WebControls.DropDownList" adapterType="YourAdapterClasse'sNameSPace.DropDownListAdapter" /> </controlAdapters> </browser>`

refId = WebKit 支持 chrome 和 safari 浏览器

4) 然后你可以将项目添加到你的下拉列表 ListItem item1 = new ListItem("Smith Street", "1"); item1.Attributes["OptionGroup"] = "达尔文";

```
 ListItem item2 = new ListItem("Mitchel Street", "1");
            item2.Attributes["OptionGroup"] = "Darwin";

            ListItem item3 = new ListItem("Hunter Street", "2");
            item3.Attributes["OptionGroup"] = "Sydney";

            ListItem item4 = new ListItem("BroadwaY", "4");
            item4.Attributes["OptionGroup"] = "Sydney";

            venuedropdown.Items.Add(item1);
            venuedropdown.Items.Add(item2);
            venuedropdown.Items.Add(item3);
            venuedropdown.Items.Add(item4); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-28T20:37:13.993

这是我所做的，仅使用 jquery，没有服务器端更改：

```
/* Add Option Groups to Note Dropdown */
var $select = $('#<%= DropDownListIDHere.ClientID %>');
var optGroup;
$('#<%= DropDownListIDHere.ClientID %> option').each(function () {
    if ($(this).val() == '<') {
        /* Opener */
        optGroup = $('<optGroup>').attr('label', $(this).text());
    } else if ($(this).val() == '>') {
        /* Closer */
        $('</optGroup>').appendTo(optGroup);
        optGroup.appendTo($select);
        optGroup = null;
    } else {
        /* Normal Item */
        if (optGroup) {
            $('<option>' + $(this).text() + '</option>').attr('value', $(this).val()).appendTo(optGroup);
        } else {
            $('<option>' + $(this).text() + '</option>').attr('value', $(this).val()).appendTo($select);
        }
    }
    $(this).remove();
}); 
```

然后，您只需将特定项目添加为具有值 < 和 > 的开启者和关闭者，如下所示：

```
<asp:ListItem Text="Group 1" Value="<" />
<asp:ListItem Text="Thing 1" Value="1111" />
<asp:ListItem Text="Thing 2" Value="2222" />
<asp:ListItem Text="Thing 3" Value="3333" />
<asp:ListItem Text="Group 1" Value=">" /> 
```

超级简单，不需要新的控件，只针对要更改的选择，并且不需要每个项目都在一个 optgroup 中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-23T00:20:40.717

我真的很喜欢上面@ScottRFrost 的回答。但是，在撰写本文时，它比我的负载少了两块：

1.  它没有在我的 UpdatePanel 和
2.  它没有在回发中保留下拉选择的值。

这是我对他的答案的客户端的扩展：

```
$(document).ready(function () {

    ddlOptionGrouping();

    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(ddlOptionGrouping);

    function ddlOptionGrouping() {
        /* Add Option Groups to asp:DropdownList */
        var $select = $('#<%= aspDropDownList.ClientID %>');
        var optGroup;
        $('#<%= aspDropDownList.ClientID %> option').each(function () {
            if ($(this).val() == '<') {
                /* Opener */
                optGroup = $('<optGroup>').attr('label', $(this).text());
            } else if ($(this).val() == '>') {
                /* Closer */
                $('</optGroup>').appendTo(optGroup);
                optGroup.appendTo($select);
                optGroup = null;
            } else {
                /* Normal Item */
                let $option = $('<option>' + $(this).text() + '</option>').attr('value', $(this).val());
                if (this.hasAttribute('selected')) {
                    $option.attr('selected', $(this).attr('selected'));
                }
                if (optGroup) {
                    $option.appendTo(optGroup);
                } else {
                    $option.appendTo($select);
                }
            }
            $(this).remove();
        });
    }
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-27T10:53:06.060

我使用这种方法，它避免了 ViewBag 和 ViewData：

**查看型号：**

```
public class PageViewModel
{
    public int SelectedDropdownItem { get; set; }
    public IEnumerable<SelectListItem> DropdownList { get; set; }
} 
```

**示例实体模型（对于本示例）：**

```
public class Users
{
    public int Id { get; set; }
    public string Name { get; set; }
    public bool IsAdministrator { get; set; }
    public bool IsDefault { get; set; }
} 
```

**控制器：**

```
// Get list for the dropdown (this uses db values)
var userList = db.Users.ToList();

// Define the Groups
var group1 = new SelectListGroup { Name = "Administrators" };
var group2 = new SelectListGroup { Name = "Users" };

// Note - the -1 is needed at the end of this - pre-selected value is determined further down
// Note .OrderBy() determines the order in which the groups are displayed in the dropdown
var dropdownList = new SelectList(userList.Select(item => new SelectListItem
{
    Text = item.Name,
    Value = item.Id,
    // Assign the Group to the item by some appropriate selection method
    Group = item.IsAdministrator ? group1 : group2
}).OrderBy(a => a.Group.Name).ToList(), "Value", "Text", "Group.Name", -1);

// Assign values to ViewModel
var viewModel = new PageViewModel
{
    // Assign the pre-selected dropdown value by appropriate selction method (if needed)
    SelectedDropdownItem = userList.FirstOrDefault(a => a.IsDefault).Id,
    DropdownList =  dropdownList
}; 
```

**看法：**

```
<!-- If needed, change 'null' to "Please select item" -->
@Html.DropDownListFor(a => a.SelectedDropdownItem, Model.DropdownList, null, new { @class = "some-class" }) 
```

希望这可以帮助某人避免发生在我身上的事情-花费太多时间寻找强类型方法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-12-13T14:23:29.507

如果有多个选择标签，则对[mhu 出色解决方案](https://stackoverflow.com/a/37162373/808581)的客户端的这一小幅改进也适用。

实际上，在他的版本中，每个选择标签都会被每个选择标签的每个选项标签的一个副本填充

（在本例中， .select2 是所有选择标签共有的类）

```
function filterUserGroups()
{

    var groups = {};
    $("select option[data-category]").each(function () {
        var sGroup = $.trim($(this).attr("data-category"));
        groups[sGroup] = true;
    });
    $.each(groups, function (c) {

        $(".select2").each(function () {

            $(this).find("option[data-category='" + c + "']").wrapAll('<optgroup label="' + c + '">');

        })

    });

} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-03-29T15:56:20.580

我更喜欢客户端脚本解决方案来避免回发的复杂性，所以我像这样解决了它。这里我使用一个普通的 html select 只是为了在函数中显示它，但它也适用于 ASP DropDownList：

```
<script>
function addOptGrp() {
  var t, p
  for (var i = 0; i < arguments.length; i=i+2) {
    t=arguments[i];
    p=arguments[i+1]-i/2;
    var scripts = document.getElementsByTagName('script');
/* On the next line scripts[scripts.length - 1] is the last script 
   in the page, which by definition will always be the calling script, 
   no matter how many such scripts you have */
    var ddl = scripts[scripts.length - 1].previousElementSibling;
    var og = document.createElement("optgroup");
    og.label = t;
    ddl.add(og,p);
    ddl.selectedIndex = ddl.selectedIndex // needed for UI;
  }
}
</script>

<select style="width:100px;">
  <option>Apple</option>
  <option>Pear</option>
  <option>Banana</option>
  <option>Orange</option>
</select>
<!-- here I just add the option groups in a script that immediately executes. 
     Notice that the script must follow immediately after the select (or DropDownList) -->
<script>addOptGrp(
  'Simple fruits', 0,
  'Very exotic fruits', 3
)</script>
<br><br>

<!-- Here comes another one -->
<select style="width:100px;">
  <option>Red</option>
  <option>Blue</option>
  <option>Yellow</option>
  <option>Green</option>
  <option>Magenta</option>
  <option>White</option>
</select>
<script>addOptGrp(
  'Some colors', 0,
  'Some more colors', 4
)</script>
```

这个功能满足了我今天的需求。另一天可能需要使用修改后的版本，例如它将普通选项转换为 optgroups，这取决于一些前缀左右。

# java - How to work with new Entity Object without setting Id before persisting?

> ID：16167868
> 
> 赞同：0
> 
> 时间：2013-04-23T11:12:36.327
> 
> 标签：java, mysql, jsf-2, java-ee-6

When I choose "new price" from the `p:selectOneMenu` I get a validation error "value is not valid". This stops when I set an id for the new price in `bugBean.generateNewPrice()` manually.
Even an automatically generated id-value that makes more sense wouldn't be a good idea, as the id-value shouldn't be set before merging/persisting the record into the database to make sure it has not been occupied inbetween.

bug.xhtml

```
 <!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">
     <h:head>
    </h:head>

<h:body>
    <h:form id="selectTest">

        <p:selectOneMenu id="selectPrice" value="#{bugBean.selectedPrice}" converter="omnifaces.SelectItemsConverter">
        <f:selectItem itemValue="" itemLabel="choose price"/>
        <f:selectItem itemValue="#{bugBean.generateNewPrice()}" itemLabel="new price"/>
        <f:selectItems value="#{bugBean.getPrices()}" var="price" itemLabel="#{price.value}"/>      
        <p:ajax update="@all"/>
        </p:selectOneMenu>
        <p:messages autoUpdate="true"/>

</h:form>
</h:body>
</html> 
```

BugBean.java

```
package hoho.main.managebean;

import java.io.Serializable;
import java.util.List;
import javax.enterprise.context.SessionScoped;
import javax.inject.Inject;
import javax.inject.Named;
import hoho.model.generated.Price;
import hoho.service.BugService;

@Named
@SessionScoped
public class BugBean implements Serializable{

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @Inject
    BugService bugService;

    private Price selectedPrice;

    public List<Price> getPrices(){
        List<Price> prices = bugService.getPrices();
        return prices;
    }

    public Price generateNewPrice(){
        Price price = new Price();
        // price.setId(424234234L);
        return price;
    }

    public Price getSelectedPrice() {
        return selectedPrice;
    }

    public void setSelectedPrice(Price selectedPrice) {
        this.selectedPrice = selectedPrice;
    }   

} 
```

The Price Entity:

```
package hoho.model.generated;

import java.io.Serializable;
import javax.persistence.*;
import java.math.BigDecimal;
import java.util.List;

/**
 * The persistent class for the price database table.
 * 
 */
@Entity
public class Price implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    private Long id;

    private BigDecimal value;

    //bi-directional many-to-one association to DeliveryMethodHasPrice
    @OneToMany(mappedBy="price", fetch=FetchType.EAGER)
    private List<DeliveryMethodHasPrice> deliveryMethodHasPrices;

    //bi-directional many-to-one association to Item
    @OneToMany(mappedBy="price", fetch=FetchType.EAGER)
    private List<Item> items;

    //bi-directional many-to-one association to TaxRate
    @ManyToOne
    @JoinColumn(name="tax_rate_id1")
    private TaxRate taxRate;

    public Price() {
    }

    public Long getId() {
        return this.id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public BigDecimal getValue() {
        return this.value;
    }

    public void setValue(BigDecimal value) {
        this.value = value;
    }

    public List<DeliveryMethodHasPrice> getDeliveryMethodHasPrices() {
        return this.deliveryMethodHasPrices;
    }

    public void setDeliveryMethodHasPrices(List<DeliveryMethodHasPrice> deliveryMethodHasPrices) {
        this.deliveryMethodHasPrices = deliveryMethodHasPrices;
    }

    public List<Item> getItems() {
        return this.items;
    }

    public void setItems(List<Item> items) {
        this.items = items;
    }

    public TaxRate getTaxRate() {
        return this.taxRate;
    }

    public void setTaxRate(TaxRate taxRate) {
        this.taxRate = taxRate;
    }

    @Override
    public boolean equals(Object other) {
        System.out.println("hey");
        return (other instanceof Price) && (id != null)
            ? id.equals(((Price) other).id)
            : (other == this);
    }

    @Override
    public int hashCode() {
        return (id != null)
            ? (this.getClass().hashCode() + id.hashCode())
            : super.hashCode();
    }

    @Override
    public String toString() {
        return "Price[id=" + id + "]";
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:22:13.487

没有办法达到你想要的。我认为你需要稍微改变你的设计。

1.  与其将`New price`其作为 的选项，不如`h:selectOneMenu`使其成为独立的`h:booleanCheckbox`. 当用户勾选该框时，您可以创建一个没有 ID 的新实体。
2.  另一种方法是`New price`使用默认选项而不是`Choose one...`. 如果用户没有选择任何价格，则创建一个新`Price`实体。

# tsql - 全外连接不返回所有行？

> ID：16167870
> 
> 赞同：2
> 
> 时间：2013-04-23T11:12:37.593
> 
> 标签：tsql, full-outer-join

我有一个包含多个日期的多条记录的表。

我试图查看“日期 1”和“日期 2”之间的区别，并且我的完整外部连接没有返回我期望的数据。

我知道日期 1 有 13278 行，日期 2 有 13282 - 因此我希望看到至少 13282 行，但我得到 13195 ......这是一个`INNER JOIN`（我测试过）。

我希望得到如下结果：

```
001     000123    009    NULL    1000
001     000124    009    1000    1000
001     000125    009    1000    1000
001     000126    009    1000    NULL 
```

但这不会从任何一方获得任何空行？

```
SELECT 
    COALESCE(c.AccountBranch, p.AccountBranch)
    , COALESCE(c.AccountNumber, p.AccountNumber)
    , COALESCE(c.AccountSuffix, p.AccountSuffix)
    , c.PrincipleAmount
    , p.PrincipleAmount
    FROM ADStaging..cb_account_extension_principle_dpd c
    FULL OUTER JOIN ADStaging..cb_account_extension_principle_dpd p
        ON p.AccountBranch = c.AccountBranch
        AND p.AccountNumber = c.AccountNumber
        AND p.AccountSuffix = c.AccountSuffix
WHERE 
    (c.BusinessDataDate IS NULL OR c.BusinessDataDate = @CurrentBusinessDataDate)
    AND
    (p.BusinessDataDate IS NULL OR p.BusinessDataDate = @PreviousBusinessDataDate) 
```

* * *

这行得通 - 将连接的“键”组合在两个单独的选择语句中？

```
SELECT
      COALESCE(C.Account, P.Account) AS Account
    , COALESCE(C.AccountBranch, P.AccountBranch) as AccountBranch
    , COALESCE(C.AccountNumber, P.AccountNumber) as AccountNumber
    , COALESCE(C.AccountSuffix, P.AccountSuffix) as AccountSuffix
    , P.PrincipleAmount AS PreviousAmount
    , C.PrincipleAmount AS CurrentAmount
    , ISNULL(C.PrincipleAmount, P.PrincipleAmount) - ISNULL(P.PrincipleAmount,0)
FROM 
(SELECT 
    (pd.AccountBranch + pd.AccountNumber + pd.AccountSuffix) AS Account
    , pd.AccountBranch
    , pd.AccountNumber
    , pd.AccountSuffix
    , pd.PrincipleAmount
FROM ADStaging..cb_account_extension_principle_dpd pd
WHERE pd.BusinessDataDate = @CurrentBusinessDataDate) C
FULL OUTER JOIN 
(SELECT 
    (pd.AccountBranch + pd.AccountNumber + pd.AccountSuffix) AS Account
    , pd.AccountBranch
    , pd.AccountNumber
    , pd.AccountSuffix
    , pd.PrincipleAmount
FROM ADStaging..cb_account_extension_principle_dpd pd
WHERE pd.BusinessDataDate = @PreviousBusinessDataDate) P
    ON P.Account = C.Account
WHERE 
    (P.PrincipleAmount IS NULL OR C.PrincipleAmount IS NULL)
    OR
    P.PrincipleAmount <> C.PrincipleAmount 
```

* * *

但这不 - 加入组合值 - 只有当它们是单独的表时？

```
SELECT 
    COALESCE(c.AccountBranch, p.AccountBranch)
    , COALESCE(c.AccountNumber, p.AccountNumber)
    , COALESCE(c.AccountSuffix, p.AccountSuffix)
    , c.PrincipleAmount
    , p.PrincipleAmount
    FROM ADStaging..cb_account_extension_principle_dpd c
    FULL OUTER JOIN ADStaging..cb_account_extension_principle_dpd p
        ON (p.AccountBranch + p.AccountNumber + p.AccountSuffix)
        = (c.AccountBranch + c.AccountNumber + c.AccountSuffix)
WHERE 
    (c.BusinessDataDate = @CurrentBusinessDataDate)
    AND
    (p.BusinessDataDate = @PreviousBusinessDataDate) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T13:33:49.740

where 正在杀死外部连接。
一列不能同时为 null 和 = 到一个值。
将条件放入联接中。

```
SELECT COALESCE(c.AccountBranch, p.AccountBranch)
     , COALESCE(c.AccountNumber, p.AccountNumber)
     , COALESCE(c.AccountSuffix, p.AccountSuffix)
     , c.PrincipleAmount, p.PrincipleAmount
FROM            cb_account_extension_principle_dpd c
FULL OUTER JOIN cb_account_extension_principle_dpd p
  ON p.AccountBranch = c.AccountBranch
 AND p.AccountNumber = c.AccountNumber 
 AND p.AccountSuffix = c.AccountSuffix
 AND c.BusinessDataDate = @CurrentBusinessDataDate
 AND p.BusinessDataDate = @PreviousBusinessDataDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:14:25.110

我认为您的问题是，在第一个查询中，日期不是匹配的一部分。在您的第二个查询中，您加入的两个集合已经按日期过滤，因此它模拟了您在日期匹配时会发生的情况。假设您有两次相同的帐户分支，编号，后缀，但日期不同！这意味着完整的外部联接会找到匹配项，因为您在 ON 子句中没有日期。

试试这个：

```
use ADStaging;
--your dates go here:
declare @CurrentBusinessDataDate date = '2013-04-21'
, @PreviousBusinessDataDate date = '2013-04-23';
SELECT 
COALESCE(c.AccountBranch, p.AccountBranch)
, COALESCE(c.AccountNumber, p.AccountNumber)
, COALESCE(c.AccountSuffix, p.AccountSuffix)
, c.PrincipleAmount
, p.PrincipleAmount

FROM cb_account_extension_principle_dpd AS c
FULL OUTER JOIN cb_account_extension_principle_dpd AS p
    ON p.AccountBranch = c.AccountBranch
    AND p.AccountNumber = c.AccountNumber
    AND p.AccountSuffix = c.AccountSuffix
    AND p.BusinessDataDate = @PreviousBusinessDataDate
    AND c.BusinessDataDate = @CurrentBusinessDataDate; 
```

# javascript - uglify.js，Internet Explorer 9 错误

> ID：16167872
> 
> 赞同：0
> 
> 时间：2013-04-23T11:12:42.407
> 
> 标签：javascript, internet-explorer, uglifyjs, uglifyjs2

请帮忙

不知道这是什么，但似乎**uglify.js 源映射继续出现 IE9 错误**

看起来像

```
 User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0)
 Timestamp: Tue, 23 Apr 2013 07:29:26 UTC
 Message: Expected ';'
 Line: 25
 Char: 28
 Code: 0
 URI: http://[site address is hidden by me]:[port is hidden by me]/[long hash is also hidden by me].min.js 
```

以前有人见过这样的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:47:19.083

问题在评论中`//@ sourceMapUrl`

此处有关仅 IE 条件注释的更多详细信息 - [https://stackoverflow.com/a/3091907/2117550](https://stackoverflow.com/a/3091907/2117550)

# iphone - 将 UIActionsheet 添加到 UIAlertView

> ID：16167873
> 
> 赞同：0
> 
> 时间：2013-04-23T11:12:44.383
> 
> 标签：iphone, uitableview, uialertview, uiactionsheet

如何将 uiactionsheet 添加到 uialertview 中？我还将 tableview 添加到 alertview 中，并且还想添加具有四个按钮的操作表，当我编写这些代码时它会给出错误

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Preferences"
                                                    message:@"\n\n\n\n\n\n\n"
                                                   delegate:self
                                          cancelButtonTitle:@"Cancel"
                                          otherButtonTitles:@"OK", nil];

    UITableView *myView = [[[UITableView alloc] initWithFrame:CGRectMake(10, 40, 264, 150)
                                                        style:UITableViewStylePlain] autorelease];
    myView.delegate = self;
    myView.dataSource = self;

    [alert addSubview:myView];

   NSString *actionSheetTitle = @"Action Sheet Demo"; //Action Sheet Title
   NSString *destructiveTitle = @"Destructive Button"; //Action Sheet Button Titles
   NSString *other1 = @"Other Button 1";
   NSString *other2 = @"Other Button 2";
   NSString *other3 = @"Other Button 3";
   NSString *cancelTitle = @"Cancel Button";

   UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:actionSheetTitle
                                                            delegate:self
                                                   cancelButtonTitle:cancelTitle
                                              destructiveButtonTitle:destructiveTitle
                                                   otherButtonTitles:other1, other2, other3, nil];

   UIView *tempView = [[UIView alloc] initWithFrame:CGRectMake(10, 250, alert.frame.size.width, 250)];
   tempView.backgroundColor = [UIColor redColor];
   tempView.clipsToBounds = YES;
   [alert addSubview:tempView];

   [alert addSubview:actionSheet];
  [alert show];
    [actionSheet showInView:tempView];
     [myView reloadData]; 
```

Tableview 完全添加，但 actionsheet 不会添加。那么有什么解决办法吗？？？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-19T20:51:48.873

老问题，但我会向通过谷歌到达这里的任何人推荐[CXAlertView](https://github.com/ChrisXu1221/CXAlertView)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:51:58.597

我建议不要使用警报，而只是在屏幕上为视图设置动画以显示您想要的内容，因为警报具有特定目的。这比听起来容易得多。

# ruby - 从 gemspec / Gemfile 禁用 rdoc 和 ri

> ID：16167876
> 
> 赞同：6
> 
> 时间：2013-04-23T11:12:56.970
> 
> 标签：ruby, rubygems, gem, bundler, rdoc

我有一个客户宝石，我将通过 ruby​​gems 分发商业客户。Gem 客户端有 cca​​。十几个 gem 依赖项，当它被安装时，由于每个 gem的生成`rdoc`和安装它需要很长时间。`ri`

客户是商业用户，他们对 rdoc/ri 没有用处，我正在寻找一种方法来通过`.gemspec`或禁用它`Gemfile`。我熟悉利用系统文件`.gemrc`禁用 rdoc / ri 的解决方案。但这不是可接受的解决方案，因为我希望我的安装简单，只需键入：

`gem install foo`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T21:22:54.150

您可以使用[安装后消息](http://rubygems.rubyforge.org/rubygems-update/Gem/Specification.html#attribute-i-post_install_message)来解释他们可以通过运行@shime 建议的内容来加快安装速度：`echo 'gem: --no-ri --no-rdoc' > ~/.gemrc`

# c - 找出 UNIX 守护进程卡在哪里？

> ID：16167877
> 
> 赞同：0
> 
> 时间：2013-04-23T11:12:57.517
> 
> 标签：c, debugging, unix, gdb, daemon

多年前，我写了一个 UNIX 守护进程 ( `wsqueryd`)，它把自己置于后台：

```
pid_t pid;

pid = fork();
if (pid < 0)
  misc_log_error_and_exit("Could not fork parent process");

if (pid > 0) // => this is the parent process
  exit(EXIT_SUCCESS); // terminates it

// Creates an new session for the process.
if (setsid() < 0)
  misc_log_error_and_exit("Cannot create new session"); 
```

现在，我意识到有时守护进程会卡住。我附上`gdb`：

```
$ cd $DAEMON_SRC_PATH
$ ps aux | grep wsqueryd
apache   20735  [...]
$ sudo gdb wsqueryd # daemon runs as different user
[...]
(gdb) attach 20735
Attaching to program: [...]/wsqueryd, process 20735
warning: .dynamic section for "/lib/libk5crypto.so.3" is not at the expected address (wrong library or version mismatch?)
warning: .dynamic section for "/lib/libkrb5support.so.0" is not at the expected address (wrong library or version mismatch?)
Reading symbols from /usr/lib/libcurl.so.4...Reading symbols from /usr/lib/debug/usr/lib/libcurl.so.4.2.0.debug...done.
done.
Loaded symbols for /usr/lib/libcurl.so.4
Reading symbols from /usr/lib/libev.so.4...Reading symbols from /usr/lib/debug/usr/lib/libev.so.4.0.0.debug...done.
done.
Loaded symbols for /usr/lib/libev.so.4
Reading symbols from /lib/libz.so.1...Reading symbols from /usr/lib/debug/lib/libz.so.1.2.5.debug...done.
done.
[...]
(gdb) list
1       // (C) [...]
2
3       #include <stdlib.h>
4       #include <stdio.h>
5       #include "daemon.h"
6       #include "misc.h"
7       #include "retrieval.h"
8
9       int main(int argc, char *argv[]) {
10        misc_init(argv[0]); // to be called at the very beginning 
```

我如何找出守护程序卡在*哪里？*（带有周围的代码，并且能够单步执行）

# winapi - WindowsFromDc return null

> ID：16167880
> 
> 赞同：4
> 
> 时间：2013-04-23T11:13:08.780
> 
> 标签：winapi, hook, hwnd, gdi

I need some help about the win32 api and especially WindowsFromDc.

I have a application which hook a another application. This two application communicate by a NamedPipe. In the second application, I have hook the DrawTextExW function and I get a HDC from this function.

But when I do a WindowsFromDC with the DC returned by the DrawTextEx function, i got a null return.

So, I have some question about that : -Is it possible a HDC don't have a HDWN with ? -How I can get the HWND of the window which call DrawTextEx ? There are other way do to that ?

Thank you.

Ps : Sorry for my bad english...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:23:55.497

跨进程传递时，设备上下文句柄无效。所以你试图做的事情是不可能的。

至于你的其他问题：

> 是否有可能有一个`HDC`与一个不相关的`HWND`？

是的，这是完全可能的。许多设备上下文与窗口无关。

> 如何获取`HWND`调用 DrawTextEx 的窗口？

Windows 不调用函数，代码调用函数。所以，这个问题并没有真正的意义。

# java - hsqldb : Database lock acquisition when connecting to a file db

> ID：16167885
> 
> 赞同：6
> 
> 时间：2013-04-23T11:13:18.847
> 
> 标签：java, hsqldb

I am trying to connect to a hsqldb (using version 2.2.9).

I created one using the following:

```
java -cp hsqldb-2.2.9.jar org/hsqldb/util/DatabaseManagerSwing 
```

When trying to connect to the db thru my ui I'm getting the following exception:

```
Exception occured :  java.sql.SQLException: Database lock acquisition failure: lockFile: org.hsqldb.persist.LockFile@76e90d02[file =/rhel5pdi/home/mgnyp/workspace/src/Project/webapp/WEB-INF/lib/testDataBase.lck, exists=true, locked=false, valid=false, ] method: checkHeartbeat read: 2013-04-23 10:35:22 heartbeat - read: -8403 ms.
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.JDBCConnection.<init>(Unknown Source)
    at org.hsqldb.jdbc.JDBCDriver.getConnection(Unknown Source)
    at org.hsqldb.jdbc.JDBCDriver.connect(Unknown Source)
    at java.sql.DriverManager.getConnection(DriverManager.java:582)
    at java.sql.DriverManager.getConnection(DriverManager.java:185) 
```

I presumed the db is locked because the DatabaseManagerSwing established a connection before my ui did, so I closed that one. This caused the following exception:

```
 Exception occured :  java.sql.SQLException: Database lock acquisition failure: lockFile: org.hsqldb.persist.LockFile@76e90d02[file =/rhel5pdi/home/mgnyp/workspace/src/PmtMetricsUI2/webapp/WEB-INF/lib/testDataBase.lck, exists=false, locked=false, valid=false, ] method: openRAF reason: java.io.FileNotFoundException: /rhel5pdi/home/mgnyp/workspace/src/Project/webapp/WEB-INF/lib/testDataBase.lck (Permission denied)
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.JDBCConnection.<init>(Unknown Source)
    at org.hsqldb.jdbc.JDBCDriver.getConnection(Unknown Source)
    at org.hsqldb.jdbc.JDBCDriver.connect(Unknown Source)
    at java.sql.DriverManager.getConnection(DriverManager.java:582)
    at java.sql.DriverManager.getConnection(DriverManager.java:185) 
```

I'm using spring mvc and c3p0. Connection details (absolute path to the db provided):

```
Connection con = DriverManager.getConnection("jdbc:hsqldb:file:/home/mgnyp/workspace/src/Project/webapp/WEB-INF/lib/testDataBase", "SA", ""); 
```

I've tried this approach, unsuccessful unfortunately: [Database lock acquisition failure and hsqldb](https://stackoverflow.com/questions/3968595/database-lock-acquisition-failure-and-hsqldb)

I also looked up the docs at hsql.org

Apologies if the issue is obvious, I've never used hsql before.

I would appreciate any help or hints.

Thank you.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-04-30T19:45:57.823

我可以通过将 ;readonly=true 作为附加连接字符串的属性来禁用锁定文件。否则我发现锁总是为文件数据库保留的。对我有用的示例连接字符串是 jdbc:hsqldb:file:my/file/location;readonly=true

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-16T10:05:22.583

我有同样的问题。刚刚删除了 .lck (lock ) 文件并重新连接。现在它工作正常。

# c# - 最后一个单元格边框出现在表格的末尾

> ID：16167886
> 
> 赞同：0
> 
> 时间：2013-04-23T11:13:21.080
> 
> 标签：c#, asp.net, pdf, itextsharp

大家好，我正在尝试使用 itext sharp.i 创建一个 pdf以防止最后一个单元格的边框被拖到底部。下面是我的代码

```
 PdfPTable MainTable = new PdfPTable(2);
      MainTable.ElementComplete = false;
      MainTable.ExtendLastRow = false;
      MainTable.WidthPercentage = 105f;
      float[] widthh = new float[] { 50f, 55f };
      MainTable.SetWidths(widthh);
      MainTable.HorizontalAlignment = Element.ALIGN_CENTER;
     MainTable.SpacingBefore = 5f;

    PdfPTable Itms = new PdfPTable(2);
    float[] width = new float[] { 80f, 20f };
    Itms.SetWidths(width);
    Itms.HorizontalAlignment = iTextSharp.text.Image.ALIGN_TOP;
    Itms.ElementComplete = false;
    Itms.ExtendLastRow = false;
    Itms.DefaultCell.BorderColor = iTextSharp.text.BaseColor.BLACK;
    Itms.DefaultCell.BorderWidthBottom = 1;
    Itms.DefaultCell.BorderWidthTop = 1; 
    PdfPCell PdfPCell = null;

    //Add Header of the pdf table
    PdfPCell = new PdfPCell(new Phrase(new Chunk("Items", FontFactory.GetFont(FontFactory.HELVETICA_BOLD, 8, iTextSharp.text.BaseColor.BLACK))));
    PdfPCell.Border = iTextSharp.text.Rectangle.BOTTOM_BORDER;
    Itms.AddCell(PdfPCell);

    PdfPCell = new PdfPCell(new Phrase(new Chunk("Orderderd before", FontFactory.GetFont(FontFactory.HELVETICA_BOLD, 8, iTextSharp.text.BaseColor.BLACK))));
    PdfPCell.Border = iTextSharp.text.Rectangle.BOTTOM_BORDER;
    Itms.AddCell(PdfPCell);

    DataTable Excep = GetDatatable();
    //How add the data from datatable to pdf table
    for (int rows = 0; rows < Excep.Rows.Count; rows++)
    {
        for (int column = 0; column < Excep.Columns.Count; column++)
        {

            if ((column == 0) || (column == 2) || (column == 3))
            {
                PdfPCell = new PdfPCell(new Phrase(new Chunk(Excep.Rows[rows][column].ToString(), FontFactory.GetFont(FontFactory.HELVETICA, 6, iTextSharp.text.BaseColor.BLACK))));

                if (rows % 2 != 0)
                    PdfPCell.BackgroundColor = iTextSharp.text.BaseColor.LIGHT_GRAY;    
                Itms.AddCell(PdfPCell);
            }
        }
    }

     MainTable.AddCell(Itms); 
```

![在此处输入图像描述](https://i.stack.imgur.com/Xd3HC.jpg)

# google-apps-script - WYSIWYG EDITOR in Google Apps Script

> ID：16167889
> 
> 赞同：0
> 
> 时间：2013-04-23T11:13:27.443
> 
> 标签：google-apps-script

Has anyone had any luck getting a WYSIWYG editor working in google apps scripts. I have a small gas project with a form with several textarea's. The input is saved in a scriptDb object. I've tried using raptor editor but have had no luck. If I place the following code in [https://googledrive.com/host/folder_id/index.html](https://googledrive.com/host/folder_id/index.html) it works fine. If I try, however to put it in a script page, I get nothing. Is it caja?

```
<div id="element-to-edit"></div>
  <script type="text/javascript"      
    src="https://raw.github.com/PANmedia/Raptor/master/packages/raptor.0deps.js"></script>
  <script type="text/javascript">
    $('#element-to-edit').editor({autoEnable: true});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:15:34.933

不，我没有听说有人这样做过。我已经尝试了数十个在线可用的库，但没有一个工作。问题的根源在于 Google Caja 不允许我们在字段上获取和设置插入符号和选择位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:35:54.620

就像文档说的那样，你必须使用与 caja 兼容的库。

# php - jQuery/AJAX retrieving ID of newly inserted record and using this in HTML before page refresh

> ID：16167890
> 
> 赞同：2
> 
> 时间：2013-04-23T11:13:27.853
> 
> 标签：php, jquery, mysql, ajax

Using jQuery/AJAX, I'm trying to a) update an existing record in an HTML table consisting of $firstname, $lastname, and an auto-incrementing $user_id and b) return the new database entry along with its ID number and display them in the HTML without a page refresh.

The plan is to use jQuery .on("click"...) to get the data in the two name fields and fire the php file add-user.inc.php to insert these, leaving the value of $user_id as NULL, so it auto-increments:

```
$(document).on("click", ".insert", function(){
    var firstname = $('input.newdata[name="firstname"]').val();
    var lastname = $('input.newdata[name="lastname"]').val();
    $.ajax({ // begin insert ajax
        url: "php-includes/add-user.inc.php",
        type: "GET",
        data: { // begin insert data
            'firstname': firstname,
            'lastname': lastname
        }, // end insert data            
    }); // end insert ajax
// closing }); comes later 
```

Then, within the click event, so that the browser can identify the newly inserted row correctly for further data manipulation without a page refresh, to use another AJAX call to retrieve the id value of this newly inserted record:

```
 $.ajax({ // begin retrieve ajax
        url: "php-includes/retrieve-user_id.inc.php",
        data: "",
        datatype: "application/json",
        type: 'get',
        success: function(data) {
           var user_id = data;

            // declare var newrecord which is a table row containing
            // <tr> with the variable user_id as its ID
            // and <td>s containing inputs containing the newly inserted data

           $('table tr:last').before(newrecord); // .. and insert this into the table
        },  // end retrieve data
    }); // end retrieve ajax
}); 
```

**add-user.inc.php:**

```
// connect to db

$firstname = $_GET['firstname'];
$lastname = $_GET['lastname'];

$insert_user_sql = "INSERT INTO `table` (user_id, firstname, lastname)
    VALUES (NULL,'$firstname','$lastname')";

$result = $db->query($insert_user_sql); 
```

**retrieve-user_id.inc.php**

```
// connect to db

$retrieve_user_sql = "SELECT `user_id` from `table` ORDER BY `user_id` DESC LIMIT 1";
$retrieve_user_result = $db->query($retrieve_user_sql);
$retrieve_user_num_rows= $retrieve_user_result->num_rows;

if ($retrieve_user_num_rows > 0) { 
    while ($row = $retrieve_user_result->fetch_object()) {
        $user_id = $row->user_id;
        $result = ($user_id + 1);
    }
} else {
    $result = 1;
}

 echo $result; 
```

The user_id number inserted into the HTML is intermittently wrong, sometimes incrementing by 2 instead of 1, sometimes not incrementing, giving two table rows with the same ID until the page is refreshed and the correct ID number is retreived through pure PHP. This causes problems if several records are entered with no page refresh being done in between the inserts, as a single ID can be targetting more than one row.

There are no problems if a page refresh is performed between each insert.

Any ideas? Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:23:36.453

您不应该使用 a`GET`来插入数据 -`GET`调用应该是幂等的。

相反，您应该发出一个`POST`请求，该请求将返回响应中最后插入的 id，然后在 ajax 请求的回调中使用这样的值：

```
$(document).on("click", ".insert", function(){
    var firstname = $('input.newdata[name="firstname"]').val();
    var lastname = $('input.newdata[name="lastname"]').val();
    $.ajax({ // begin insert ajax
        url: "php-includes/add-user.inc.php",
        type: "POST",
        data: { // begin insert data
            'firstname': firstname,
            'lastname': lastname
        },
        success: function(response){

          // do your stuff here with the retrieved id

        }
    }); // end insert ajax
// closing }); comes later 
```

注意`success`添加的处理程序。

# xml - 转负价格等于正

> ID：16167892
> 
> 赞同：0
> 
> 时间：2013-04-23T11:13:30.800
> 
> 标签：xml, xslt, xpath, xslt-1.0

我必须在 XSL 1.0 中编写一个小的通用转换，当书名涉及“NC”时，将负价格变为正价格。价格可以出现在多个/任何级别。对于任何类型的 XML，我都必须遇到负号并将其变为正号。请建议。

XML-

```
<Books>
 <Book>
  <Name>NC</Name>
  <Price>-100.50</Price>
 </Book>
 <Book>
  <Name>B1</Name>
  <Pr>450.60</Pr>
 </Book>
 <Book>
  <Name>C1</Name>
  <Price>35.20</Price>
 </Book>
 <Book>
  <Name>D1</Name>
  <P>5</P>
 </Book>
</Books> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:37:17.650

如果您希望文本价格元素的数字小于零，则属于名称为“NC”的 Book 元素。在这种情况下，您只需要以下模板匹配

```
<xsl:template match="Book[Name='NC']/Price[number(.) &lt; 0]/text()"> 
```

然后，您只需添加代码即可将负值变为正值。

尝试以下 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" />

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

 <xsl:template match="Book[Name='NC']/Price[number(.) &lt; 0]/text()">
    <xsl:value-of select="format-number(0 - number(.), '0.00')" />
</xsl:template>

</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<Books>
   <Book>
      <Name>NC</Name>
      <Price>100.50</Price>
   </Book>
   <Book>
      <Name>B1</Name>
      <Pr>450.60</Pr>
   </Book>
   <Book>
      <Name>C1</Name>
      <Price>35.20</Price>
   </Book>
   <Book>
      <Name>D1</Name>
      <P>5</P>
   </Book>
</Books> 
```

请注意使用[恒等变换](http://en.wikipedia.org/wiki/Identity_transform)来复制现有元素。

# c# - MaxConcurrentRequestsPerCPU 和 MaxConcurrentThreadsPerCPU 没有按记录工作？

> ID：16167893
> 
> 赞同：2
> 
> 时间：2013-04-23T11:13:31.353
> 
> 标签：c#, asp.net, .net, iis

在 IIS7.5 环境中，我已将 aspnet.config 配置为将 MaxConcurrentRequestsPerCPU 设置为 1。

我正在这个 IIS 实例上执行一个 Web 服务，我已为其配置公开 MaxConcurrentRequestsPerCPU 和 MaxConcurrentThreadsPerCPU 以响应 ASMX Web 服务中的 WebMethod，这允许我通过 Web 服务确认 .NET 框架正在正确读取这些值，因此它们应该被 IIS 正确使用，只需让 WebMethod 从 HostingEnvironment 对象返回值。

我还有一个 WebMethod，它简单地让线程休眠 5 秒，简称为 TestMethod。

理论上，我相信这个设置应该确保对 TestMethod 的后续调用以串行方式发生，因为每个 CPU 只允许 1 个请求，或者，如果每个 CPU 实际上允许四核系统上的每个核心，则最多4 个请求被并行处理，具体取决于它是真正是每个 CPU 还是每个内核。

然而，这两种情况似乎都不是。对于此方法的 20 个同时请求，我希望看到大约 100 秒（20 个请求 x 5 秒）或 25 秒（（20 个请求/4 个核心）x 5 秒）的完成时间。相反，我始终以 10 秒的完成时间结束，这意味着尽管并发请求限制设置为 1，但并行处理了 10 个请求。当我还将每个 CPU 的并发线程也设置为 1 时，这仍然是正确的。

谁能解释为什么这些设置似乎被忽略了，或者在这种情况下似乎无法正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T19:05:01.590

为了测试这一点（这是一个非常奇怪的测试，没有人应该在生产中做这样的事情），你需要将 maxConcurrentRequestsPerCPU 设置为 1，然后将 MaxConcurrentThreadsPerCpu 设置为 0。

原因是 ThreadsPerCpu 设置是为了模拟老式的 IIS 限制（“经典”应用程序池模式）。

> 有一个相应的 IIS 7.5 更改（仅限 Windows Server 2008 R2），它允许为每个应用程序池指定不同的 aspnet.config 文件（此更改尚未移植到 IIS 7.0）。有了这个，您可以不同地配置每个应用程序池。maxConcurrentRequestsPerCPU 设置与上述注册表项相同，只是 aspnet.config 中的设置将覆盖注册表项值。maxConcurrentThreadsPerCPU 设置是新的，它允许通过线程数来控制并发性，类似于在 Classic/ISAPI 模式下完成的方式。默认情况下 maxConcurrentThreadsPerCPU 被禁用（值为 0），有利于通过请求数来控制并发，主要是因为 maxConcurrentRequestsPerCPU 性能更好（控制线程数量更复杂/实现成本更高）。通常您会使用请求门控，但您现在可以选择禁用它（设置 maxConccurrentRequestsPerCPU=0）并启用 maxConccurentThreadsPerCPU。您还可以同时启用请求和线程门控，ASP.NET 将确保满足这两个要求。requestQueueLimit 设置与 processModel/requestQueueLimit 相同，只是 aspnet.config 中的设置将覆盖 machine.config 设置。所有这些可能有点令人困惑，但对于几乎所有人来说，我的建议是对于 ASP.NET 2.0，您应该使用与 ASP.NET v4.0 中的默认设置相同的设置；即设置 maxConcurrentRequestsPerCPU = "5000"

[http://blogs.msdn.com/b/tmarq/archive/2007/07/21/asp-net-thread-usage-on-iis-7-0-and-6-0.aspx](http://blogs.msdn.com/b/tmarq/archive/2007/07/21/asp-net-thread-usage-on-iis-7-0-and-6-0.aspx)

# google-maps-api-3 - Google Maps API V3 中具有两个或更多 KML 层的交互式图例

> ID：16167895
> 
> 赞同：1
> 
> 时间：2013-04-23T11:13:36.377
> 
> 标签：google-maps-api-3, gis, kml

我对 JavaScript 和 Google Maps API（基本上是整个网络 GIS）还很陌生，我正在努力为几个 KML 图层（在这个例子中，只有两个）或类似 [http:// www.strahlen.org/map/central.htm](http://www.strahlen.org/map/central.htm) 但对于 KML 图层。

这是我的代码：

```
<script>
  var tocka = new google.maps.LatLng(46.150346, 15.863571);

  function initialize() {
    var neven = {
      center: tocka,
      zoom: 15,
      mapTypeId: google.maps.MapTypeId.HYBRID
    };
    var map = new google.maps.Map(document.getElementById("googleMap"), neven);

    var ctaLayer = new google.maps.KmlLayer({
      url: 'https://dl.dropboxusercontent.com/u/126827789/kuce.kmz'

    });
    ctaLayer.setMap(map);

    var ctaLayer = new google.maps.KmlLayer({
      url: 'https://dl.dropboxusercontent.com/u/126827789/neven.kmz'
    });
    ctaLayer.setMap(map);
  }

  google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

所以.. 如果可能的话，我想添加一些复选框来在这两个 kml 文件之间切换？

任何帮助和建议都更受欢迎。提前谢谢你，内文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-20T18:51:15.763

因此，您并不是真正要求有关地图内容的图例，而只是一个切换选项。我从另一个问题（[Toggle KML Layers in Google Maps v3](https://stackoverflow.com/questions/9855067/toggle-kml-layers-in-google-maps-v3)）中得到了这个答案，但我清理了它，因为它最初对我不起作用。现在效果很好。这是我的一个：

```
// Define the kml layers 
var kml = {
    a: {
        name: "Elevation Contours",
        url:'https://website.com/id/LimaContours200.kml'},
    b: {
        name: "Districts",
        url: 'https://https://website.com/id/LimaDistricts.kml'},
c:{
       name: "CAPECO Zones",
   url: 'https://website.com/id/ZonasCapeco.kml'}}

function initialize(){
    var mapOptions ={
    zoom: 12,
    center: new google.maps.LatLng(-12.0456072,-76.9991801),
    mapTypeId: google.maps.MapTypeId.SATELLITE,};
    //Display the map
    map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
    createTogglers();
    removeAll();
    startup();};

// the important function... kml[id].xxxxx refers back to the top 
function toggleKML(checked, id) {
    if (checked) {
        var layer = new google.maps.KmlLayer(kml[id].url,{
            preserveViewport: true,
            suppressInfoWindows: true});
        //store kml as obj
        kml[id].obj = layer;
        kml[id].obj.setMap(map);}
    else {
        kml[id].obj.setMap(null);
        delete kml[id].obj;}};

// create the controls dynamically because it's easier, really
function createTogglers() {
    var html = "<form><ul>";
    for (var prop in kml) {
        html += "<li id=\"selector-" + prop + "\"><input type='checkbox' id='" + prop +  "'" +
        " onclick='highlight(this,\"selector-" + prop + "\"); toggleKML(this.checked, this.id)' \/>" +
        kml[prop].name + "<\/li>";}

html += "<li class='control'><a href='#' onclick='removeAll();return false;'>" +
        "Remove all layers<\/a><\/li>" + "<\/ul><\/form>";
    document.getElementById("toggle_box").innerHTML = html;};

// easy way to remove all objects
function removeAll() {
    for (var prop in kml) {
        if (kml[prop].obj) {
            kml[prop].obj.setMap(null);
            delete kml[prop].obj;}}};

// Append Class on Select
function highlight(box, listitem) {
    var selected = 'selected';
    var normal = 'normal';
    document.getElementById(listitem).className = (box.checked ? selected: normal);};

function startup(){
// for example, this toggles kml b on load and updates the menu selector
var checkit = document.getElementById('b');
    checkit.checked = true;
toggleKML(checkit, 'b');
highlight(checkit, 'selector-b');} 
```

# three.js - three.js: how to add CopyShader after FXAAShader (r58)

> ID：16167897
> 
> 赞同：2
> 
> 时间：2013-04-23T11:13:41.650
> 
> 标签：three.js

In postprocessing, I added CopyShader after FXAAShader, for proper rendering even if FXAA are disabed (like a example: webgl_postprocessing2.html).

```
~

renderer.setSize( 320, 240 );  // not full screen

~

fxaa = new THREE.ShaderPass( THREE.FXAAShader );
fxaa.uniforms[ 'resolution' ].value = new THREE.Vector2( 1 / 320, 1 / 240 );
composer.addPass( fxaa );

var effect = new THREE.ShaderPass( THREE.CopyShader );
effect.renderToScreen = true;
composer.addPass( effect ); 
```

This code doesn't work well and the rendered image is smaller than expected.

I'm using r58 and confirmed with Firefox20\. What should I do?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:09:41.583

的`width`and必须与`height`的相匹配。`THREE.EffectComposer.renderTarget``WebGLRenderer`

为此，您创建自己的`renderTarget`并将其传递给`EffectComposer`构造函数。

```
var parameters = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter,
                   format: THREE.RGBFormat, stencilBuffer: false };
var renderTarget = new THREE.WebGLRenderTarget( width, height, parameters );

composer = new THREE.EffectComposer( renderer, renderTarget ); 
```

小提琴：http: [//jsfiddle.net/uxeez/4/](http://jsfiddle.net/uxeez/4/)

三.js r.58

# php - 字段“金额”的值无效。信用付款不能超过可用信用

> ID：16167901
> 
> 赞同：0
> 
> 时间：2013-04-23T11:13:56.593
> 
> 标签：php, codeigniter

我在 Codeigniter 中使用 Freshbooks API。当我从我这边付款时，我收到错误“ **‘金额’字段的值无效。来自信用的付款不能超过可用信用。** ”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:20:06.833

您没有提供任何代码，但从消息中这些是我的想法：

```
"Invalid value for field 'amount' 
```

amount 似乎只接受一种类型的输入，也许它只接受整数、浮点数或字符串。确保您确实使用了与预期输入完全相同的输入类型。

您是否在不应该存在的数量范围内使用逗号或点？数字是不是太大了？

```
"Payment from credit cannot exceed available credit." 
```

我猜你想向某人收费，但用户的信用卡上没有足够的钱，就像消息说的那样。或者你试图让用户支付很多钱，这实际上会将两个句子放在一起。

但实际上，如果您想要更准确的答案，请向我们展示一些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-12T15:49:59.513

以 1 开头的代码是一般错误，2 是身份验证错误，3 是授权错误，4 是验证错误，5 是处理错误。

我认为上面的错误代码是以 5 开头的系列。请联系 Freshbooks 支持。他们有非常好的支持团队。 [https://www.freshbooks.com/support](https://www.freshbooks.com/support) 或写信至 support@freshbooks.com

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T22:11:25.657

来自 FreshBooks 的 Hannele。

我相信该错误消息表明您正在尝试使用 FreshBooks 中该客户的现有信用支付发票，但该信用不足以支付付款金额。

发生这种情况的方式*有点*令人困惑，但可以在我们[的 payment.create 文档中找到](https://www.freshbooks.com/developers/docs/payments)：

> 根据 invoice_id 和 client_id 的存在，此函数可能具有三种可能的效果之一：
> 
> *   如果您仅指定 invoice_id，则付款将记录为发票付款。
> *   如果您仅指定 client_id，则付款将被记录为客户信用。
> *   如果您同时指定 invoice_id 和 client_id，则付款将被记录为发票付款，金额将从客户的信用中扣除。

我只是根据错误消息进行猜测，但您似乎想创建定期付款。因此，只指定发票 ID，而不是客户 ID。

如果您想获得信用，请仅指定客户 ID。

希望有帮助！

# sql - Multiple FULL OUTER JOIN on multiple tables

> ID：16167902
> 
> 赞同：43
> 
> 时间：2013-04-23T11:14:04.713
> 
> 标签：sql, sql-server, tsql, sql-server-2005, full-outer-join

I have multiple outer joins

```
SELECT  A.column2
        , B.column2
        , C.column2
FROM 
(
    (SELECT month, column2 FROM table1) A
    FULL OUTER JOIN
    (SELECT month, column2 FROM table2) B on A.month= B.month
    FULL OUTER JOIN 
    (SELECT month, column2 FROM table3) C on A.month= C.month
) 
```

Now the last join is having a problem, its repeating when month of A is more than B but if B has more month that A we have OUTER JOIN in C with month of A which now repeats, so I guess having a FULL OUTER JOIN within two table might solve the problem?? Any indepth links??

**Sample Data(Incorrect)**

```
╔════════════╦═════════╦═════════════╗
║  Revenue   ║ Budget  ║ ActualMonth ║
╠════════════╬═════════╬═════════════╣
║     6.9172 ║ 3.5046  ║ Jan         ║
║     7.3273 ║ 3.7383  ║ Feb         ║
║     7.3273 ║ 3.9719  ║ Mar         ║
║     7.2726 ║ 4.2056  ║ Apr         ║
║     7.2595 ║ 6.7757  ║ May         ║
║     7.2726 ║ 6.7757  ║ Jun         ║
║     0.41   ║ 0.00    ║ Jul         ║
║     0.41   ║ 0.00    ║ Aug         ║
║     0.41   ║ 0.00    ║ Sep         ║
║     0.41   ║ 0.00    ║ Oct         ║
║     7.4696 ║ 0.00    ║ Nov         ║
║     7.4696 ║ 0.00    ║ Dec         ║
║     0.00   ║ 9.3457  ║ Sep         ║
║     0.00   ║ 16.3551 ║ Dec         ║
║     0.00   ║ 6.3084  ║ Jul         ║
║     0.00   ║ 14.0186 ║ Oct         ║
║     0.00   ║ 16.3551 ║ Nov         ║
║     0.00   ║ 6.1915  ║ Aug         ║
╚════════════╩═════════╩═════════════╝ 
```

**Correct Data**

```
╔════════════╦═════════╦═════════════╗
║  Revenue   ║ Budget  ║ ActualMonth ║
╠════════════╬═════════╬═════════════╣
║     6.9172 ║ 3.5046  ║ Jan         ║
║     7.3273 ║ 3.7383  ║ Feb         ║
║     7.3273 ║ 3.9719  ║ Mar         ║
║     7.2726 ║ 4.2056  ║ Apr         ║
║     7.2595 ║ 6.7757  ║ May         ║
║     7.2726 ║ 6.7757  ║ Jun         ║
║     0.41   ║ 6.3084  ║ Jul         ║
║     0.41   ║ 6.1915  ║ Aug         ║
║     0.41   ║ 9.3457  ║ Sep         ║
║     0.41   ║ 14.0186 ║ Oct         ║
║     7.4696 ║ 16.3551 ║ Nov         ║
║     7.4696 ║ 16.3551 ║ Dec         ║
╚════════════╩═════════╩═════════════╝ 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-25T14:17:43.593

```
SELECT  A.column2
        , B.column2
        , C.column2
FROM 
(
    (SELECT month, column2 FROM table1) A
    FULL OUTER JOIN
    (SELECT month, column2 FROM table2) B on A.month= B.month
    FULL OUTER JOIN 
    (SELECT month, column2 FROM table3) C on ISNULL(A.month, B.month) = C.month
) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-04-16T12:00:06.360

执行此操作的方法之一是从所有三个表中的所有可能数据创建“锚”表，然后使用`left outer join`：

```
select
    A.column2,
    B.column2,
    C.column2
from (
    select distinct month from table1
    union
    select distinct month from table2
    union
    select distinct month from table3
) as X
    left outer join table1 as A on A.month = X.month
    left outer join table2 as B on B.month = X.month
    left outer join table3 as C on C.month = X.month 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-25T14:13:27.150

使用带有[COALESCE](http://msdn.microsoft.com/en-us/library/ms190349.aspx)函数的选项来确定列分组。

```
SELECT COALESCE(t1.Month, t2.Month, t3.Month) AS Month, 
       SUM(ISNULL(t1.Col1, 0)) AS t1Col1, 
       SUM(ISNULL(t2.Col1, 0)) AS t2Col1, 
       SUM(ISNULL(t3.Col1, 0)) AS t3Col1
FROM dbo.table1 t1 FULL OUTER JOIN dbo.table2 t2 ON t1.Month = t2.Month
                   FULL OUTER JOIN dbo.table3 t3 ON t1.Month = t3.Month
GROUP BY COALESCE(t1.Month, t2.Month, t3.Month) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-23T13:33:45.507

我可以想到 2 种方法来解决这个问题，具体取决于定义您想要的结果的实际逻辑。

第一种也是最简单的方法是使用 GROUP BY month，并使用 MAX(column2) 之类的聚合函数仅获取非零行，或者如果要添加多个非零行，请使用和（）。如果有一个聚合函数可以满足您的逻辑意图，这是最好的解决方案。

另一种是在您的 JOIN 中包含更多条件，例如“WHERE a.month=b.month AND b.column2 > 0”，但如果可能有多个非零行，这仍然无法解决问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-23T13:49:39.803

就像是

```
select month, sum(a) a,  sum(b) b, sum(c) c from (
  SELECT month, column2 A, 0 B, 0 C FROM table1 
    union 
  SELECT month, 0 A, column2 B, 0 C FROM table2
    union 
  SELECT month, 0 A, 0 B, column2 C FROM table3
) x
group by month 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-01-24T05:46:22.703

与其一次做所有的外连接，不如像这样一次做一个：

```
SELECT  A.column2
        , B.column2
        , C.column2
FROM 
(
    (SELECT month, column2 FROM (
        (SELECT month, column2 FROM table1) A
        FULL OUTER JOIN
        (SELECT month, column2 FROM table2) B on A.month= B.month
    )) A_AND_B
    FULL OUTER JOIN 
    (SELECT month, column2 FROM table3) C on A_AND_B.month= C.month
) 
```

即，对A和B进行完全外连接，然后对**那个**和C进行完全外连接，然后对**那个**和D进行完全外连接，然后对**那个**和E进行完全外连接，等等。

这不像上面的其他答案那么复杂，并且可以为尽可能多的表重复进行完全外连接。

# vb.net - 将可变数量的行添加到数据表

> ID：16167903
> 
> 赞同：0
> 
> 时间：2013-04-23T11:14:08.053
> 
> 标签：vb.net, datatable

我有一个包含 360 行数据的表格。我需要将这些数据添加到数据表中。但如果有重复，它应该只更新包含该数据的行。重复的数量可以从0到180。在vb.net 3.5中可以这样做吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:16:32.680

您可以使用[DataTable.LoadDataRow](http://msdn.microsoft.com/en-us/library/b5abehtz.aspx)方法。
这需要您定义表的主键。
该方法使用主键来识别重复行

```
Dim dt = new DataTable("test")
Dim col = dt.Columns.Add("ID", Type.GetType("System.Int32"))
col.AllowDbNull = false
col.Unique = true
dt.Columns.Add("Name", Type.GetType("System.String"))
..... ' and so on '

' now the primary key
Dim columns(1) As DataColumn
columns(0) = dt.Columns("ID")
dt.PrimaryKey = columns

' And then the LoadDataRow
Dim newRow As Object() = New Object(1) {}
newRow(0) = Convert.ToInt32(TextBox1.Text)
newRow(1) = TextBox2.Text
dt.LoadDataRow(newRow, True)
.... 
```

如果您的一个或多个 textbox1.Text 包含相同的 id，则先前的行将使用新值更新，否则将向数据表添加新行

**编辑**
看到您对 Quantity 列上的求和操作的评论，那么您应该更改方法（当然添加第三列与所需的数字类型）

```
' Search if the ID is already present '
Dim rows = dt.Select("ID=" & TextBox1.Text)
if rows.Length == 0 Then
   ' No ID found, add a newrow to the datatable'
   Dim newRow = dt.NewRow()
   newRow(0) = Convert.ToInt32(TextBox1.Text)
   newRow(1) = TextBox2.Text
   newRow(2) = Convert.ToInt32(TextBox3.Text)
   dt.Rows.Add(newRow)
Else
   ' ID found, the Rows array should be of just one row and the second column incremented of the quantity '
   rows(0)(2) +=  Convert.ToInt32(TextBox3.Text)
End If 
```

**编辑**

```
Dim dt As New DataTable 
'adding columns to the datatble'
dt.Columns.Add("Operation") 
dt.Columns.Add("folder") 
' This is a numeric column, so tell it to the framework
dt.Columns.Add("quantity", Type.GetType("System.Int32"))

'adding datarows 
' The search is on a string column, so enclose in single quotes 
' I assume that a 'folder' names doesn't contains a single quote
Dim rows = dt.Select("folder='" & L1F1.Text + "'") 
If rows.Length = 0 Then 
   Dim newRow = dt.NewRow() 
   newRow(0) = L1Ob1.Text 
   newRow(1) = L1F1.Text 
   newRow(2) = Convert.ToInt32(L1Qty1.Text) 
   dt.Rows.Add(newRow) 
Else 
   rows(0)(2) += Convert.ToInt32(L1Qty1.Text) 
End If 
```

# php - 无法遍历数组以填充 google 电子商务跟踪

> ID：16167905
> 
> 赞同：0
> 
> 时间：2013-04-23T11:14:15.100
> 
> 标签：php, zend-framework, foreach

好的，所以我有这个数组，我想用它来填充 gaq 电子商务跟踪：

```
$ga_itemdata = Array ( [0] => Array ( [product_id] => 7 [prod_name] => Pet Driver's License Bag Tag [prod_count] => 2 [price] => 19.99 ) [1] => Array ( [product_id] => 6 [prod_name] => The Driver's License Pet Tag [prod_count] => 1 [price] => 19.99 ) [2] => Array ( [product_id] => 5 [prod_name] => Pet Driver's License Key Chain [prod_count] => 3 [price] => 19.99 ) [3] => Array ( [product_id] => 4 [prod_name] => Pet Driver's License Magnet [prod_count] => 2 [price] => 14.99 ) [4] => Array ( [product_id] => 3 [prod_name] => Pet Driver's License Wallet Card [prod_count] => 3 [price] => 19.99 ) ) 
```

我试图用这些变量填充以下代码，然后回显到页面，为数组中的每个项目一次：

```
_gaq.push(['_addItem',
$order_id,         // I have this from another array
$product_id,       // SKU/code
$prod_name,        // product name
'empty',           // category or variation
$price',           // unit price
$prod_count        // quantity
]); 
```

我有这个 foreach 循环：

```
foreach($ga_itemdata as $itemnum => $itemarr[0]) {
    for($i=0; $i<sizeof($itemarr); $i++){
    foreach ($itemarr[$i] as $details[$i]) {

            // echo google tracking code 
          }
      }
     } 
```

它似乎工作不正常，我坚持下去，任何帮助都会很棒！

# javascript - 删除后的警报消息无法正常工作

> ID：16167906
> 
> 赞同：-1
> 
> 时间：2013-04-23T11:14:15.370
> 
> 标签：javascript

我有一个调用我的检索和删除 php 的代码，两者都正常工作我可以从数据库中检索和删除数据。我收到警报，确认我是否要删除也很好的数据。但是每当我单击“是”或“否”时，我都会收到消息：**无法删除记录！**, 而不是**Record/s 已被删除！**即使该记录确实已从数据库中删除。

我没有发布我的检索和删除 php，因为它们都在工作。只需要更正警报消息的显示方式。

这是我从数据库中查询和删除的脚本：

```
$(document).ready(function(){
        $("#RetrieveList").on('click',function() {
            var xid = $('#XiD').val();
            var date = $('#Date').val();
            $.post('resultgenerator_test.php',{xid:xid, date:date}, function(data){
            $("#results").html(data);
            });
            return false;
        });

    $("#DeletefromDB").click(function() {
            if (confirm("Are you sure you want to delete this Record/s?"))
            var id = $('input[name=checkbox]:checked').map(function()
                {
                    return $(this).val();
                }).get();
            $.post('deletedata_test.php',{id:id}, function(data)
            {
            $("#result").html(data);
            if(data == 'true') {
            $('#'+id).remove();alert('Record/s has been deleted!');
            }

            else {
            alert('Record/s could not be deleted!');
            }
            document.messages.submit();
            return false;
        });                 
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:19:21.883

您的`confirm`调用位于一个`if`语句中，该语句后面没有大括号内的代码块。因此，只有下一行（var id= 等）取决于`if`-statement。将其更改为：

```
if(!confirm('Blaba'))
    return; 
```

你的代码应该更有意义。另外请确保您在发布代码时缩进正确，以便我们*和您*更容易发现此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:20:04.760

这意味着`if(data == 'true')`条件失败。删除成功后，检查您的 PHP 会得到什么。

此外，如果数据是布尔类型，您应该使用`if(data)`而不是`if(data == 'true')`

并且即使在否时也解决记录删除问题，请按照@Niels 回答中的建议正确使用花括号

# jquery - 没有关于使用 Bootstrap 进行 Jquery 验证的消息

> ID：16167915
> 
> 赞同：2
> 
> 时间：2013-04-23T11:14:37.997
> 
> 标签：jquery, twitter-bootstrap, jquery-validate

我正在使用 Dan Cochran 的引导程序 jQuery 验证器[http://alittlecode.com/jquery-form-validation-with-styles-from-twitter-bootstrap/](http://alittlecode.com/jquery-form-validation-with-styles-from-twitter-bootstrap/)我想删除消息传递方面但保留 css 类以突出显示错误和成功对于必填字段。

我的代码如下：

```
 $(document).ready(function () {
    validator = $('#form1').validate({
    rules: {
        ctl00$ContentPlaceHolder1$forename: {
            required: true
        }
    },
    highlight: function (element) {
        $(element).closest('.control-group').removeClass('success').addClass('error');
    },

    errorPlacement: function (error, element) {
        return false;  //Suppress all messages
    },
    success: function (element) {
        element.addClass('valid').closest('.control-group').removeClass('error').addClass('success');
        //element.text('OK!').addClass('valid').closest('.control-group').removeClass('error').addClass('success');
    }
}); 
```

errorPlacement 函数的工作原理是它删除消息，因此创建的原始跨度包含文本“OK！” 但是，成功函数在删除错误类和应用成功类时会中断。

任何想法，将不胜感激

# hbase - Composite key in sqoop --hbase-row-key

> ID：16167916
> 
> 赞同：2
> 
> 时间：2013-04-23T11:14:38.957
> 
> 标签：hbase, sqoop

Is there a way where we can set composite key in --hbase-row-key in sqoop command. Something like: `--hbase-row-key column1,column2`

Also, can we somehow start the key in hbase from 1 and sort of auto-increment it for each new row entry from mysql. When another sqoop process runs, we can pick up the last max id, and increment it from there itself.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:51:15.257

不幸的是，Sqoop 目前不支持您的任何请求。您只能指定一列用作 HBase 的行键。我建议您在[Sqoop 的 JIRA](https://issues.apache.org/jira/browse/SQOOP)上创建一个新票证来请求此类功能。

**编辑：**

通过 Sqoop 1.4.4 中的 SQOOP-1038 添加了使用多列作为行键导入 HBase 的功能。

# ios - iOS Core 蓝牙无断开通知

> ID：16167919
> 
> 赞同：3
> 
> 时间：2013-04-23T11:14:56.433
> 
> 标签：ios, bluetooth, core-bluetooth, disconnect, cbperipheral

我正在使用 CoreBluetooth 开发应用程序，如果蓝牙连接丢失，我需要得到通知。我与许多 BLE 设备建立连接，将应用程序置于后台模式并等待断开连接通知。问题是我只有在我按下 BLE 设备上的关闭按钮时才会调用 didDisconnect 方法，而不是在我超出范围时调用。你知道为什么会发生这种情况吗？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T14:44:17.733

设备彼此远离时不会自动断开连接。你必须自己做。

# html - 使用内联 css 设置图像宽度

> ID：16167922
> 
> 赞同：4
> 
> 时间：2013-04-23T11:15:01.363
> 
> 标签：html, css

我想设置图像的宽度。这是我的代码：-

```
<div style="width: 630px;">
        <img src="Image/welcomeimage.jpg" alt="no image" />
  </div> 
```

这是我的情况，我不必设置Image的宽度。只有我可以设置 Div 的宽度。所以我必须使用 div 设置图像宽度。我怎样才能做到这一点？

[编辑] 感谢大家帮助我。现在我解决了我的问题。最初，我被告知不要使用 CSS，我必须使用内联 CSS 解决这个问题。但这是不可能的。所以我决定使用 CSS。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T11:26:13.497

### 采用`max-width`

您可以使用所有现代浏览器和 IE 8 及更高版本[支持](http://caniuse.com/#feat=minmaxwh)`max-width`的属性。

要使用它，请在您的 css 中调用它，如下所示：

```
div img { max-width: 100%; } 
```

这会将您的图像拉伸到`div`的宽度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T11:21:21.197

如果要设置内联宽度，只需执行此操作：

```
<div>
    <img src="Image/welcomeimage.jpg" alt="no image" width="630" />
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T11:20:05.750

这行得通。我从来没有`img`明确地改变过。

```
<div class="test" style="width: 630px;">
        <img src="http://i.imgur.com/FIylGsy.jpg" alt="no image" />
</div> 
```

CSS：

```
.test > *{
    width:100%;
} 
```

[演示](http://jsfiddle.net/fGRbD/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T11:20:30.607

像这样在css文件中尝试：

```
div img {
    width: 630px;
} 
```

你可以使用 JavaScript（例如 jQuery）吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T11:22:36.000

您可以使用 Javascript 动态设置图像的宽度：

伪：

```
var div = document.getElementById("yourDiv");
var width = div.style.height;
yourImg.style.width = width; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T11:23:57.353

使用以下 CSS

```
img {
    width: 100%;
} 
```

# c# - 带有 MySQL INSERT 参数的 C#

> ID：16167924
> 
> 赞同：34
> 
> 时间：2013-04-23T11:15:06.727
> 
> 标签：c#, mysql, database, sql-insert

大家好，我正在使用 Visual C# 2010 和 MySQL 版本 5.1.48-community。我希望你能帮助我处理这段代码。我不觉得它对我有用。我错过了什么？

```
string connString = ConfigurationManager.ConnectionStrings["default"].ConnectionString;
MySqlConnection conn = new MySqlConnection(connString);
conn.Open();
MySqlCommand comm = conn.CreateCommand();
comm.CommandText = "INSERT INTO room(person,address) VALUES(@person, @address)";
comm.Parameters.Add("@person", "Myname");
comm.Parameters.Add("@address", "Myaddress");
comm.ExecuteNonQuery();
conn.Close(); 
```

当我尝试编译它时。它说：

> 人员列不能为空

编辑：

但是当我尝试这段代码时。

```
comm.CommandText = "INSERT INTO room(person,address) VALUES('Myname', 'Myaddress')"; 
```

但是这段代码很容易受到 sql 注入攻击，但它可以工作，不会给我一个错误。

编辑：

我试着用这个。我在[这里](http://swengr.blogspot.com/2012/02/interfacing-to-access-database-via.html)找到了它，所以我认为它会起作用，但给了我这个错误

> 索引（从零开始）必须大于或等于零且小于参数列表的大小。

任何想法？

```
 string a = "myname";
    MySqlCommand cmd = new MySqlCommand();
    cmd.Connection = conn;
    cmd.CommandText = "INSERT INTO room(person,address) VALUES(?,?)";
    //cmd.Prepare();

    cmd.Parameters.Add("person", MySqlDbType.VarChar).Value = a;
    cmd.Parameters.Add("address", MySqlDbType.VarChar).Value = "myaddress";
    cmd.ExecuteNonQuery(); // HERE I GOT AN EXCEPTION IN THIS LINE 
```

任何帮助将非常感激。

已编辑： **已解决** 我使用了以下代码：

```
cmd.CommandText = "INSERT INTO room(person,address) VALUES(?person,?address)";
cmd.Parameters.Add("?person", MySqlDbType.VarChar).Value = "myname";
cmd.Parameters.Add("?address", MySqlDbType.VarChar).Value = "myaddress";
cmd.ExecuteNonQuery(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-23T11:23:12.267

您可以使用`AddWithValue`如下方法：

```
string connString = ConfigurationManager.ConnectionStrings["default"].ConnectionString;
MySqlConnection conn = new MySqlConnection(connString);
conn.Open();
MySqlCommand comm = conn.CreateCommand();
comm.CommandText = "INSERT INTO room(person,address) VALUES(@person, @address)";
comm.Parameters.AddWithValue("@person", "Myname");
comm.Parameters.AddWithValue("@address", "Myaddress");
comm.ExecuteNonQuery();
conn.Close(); 
```

或者

尝试使用`?`而不是`@`，例如：

```
string connString = ConfigurationManager.ConnectionStrings["default"].ConnectionString;
MySqlConnection conn = new MySqlConnection(connString);
conn.Open();
MySqlCommand comm = conn.CreateCommand();
comm.CommandText = "INSERT INTO room(person,address) VALUES(?person, ?address)";
comm.Parameters.Add("?person", "Myname");
comm.Parameters.Add("?address", "Myaddress");
comm.ExecuteNonQuery();
conn.Close(); 
```

希望能帮助到你...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T11:16:51.487

使用`AddWithValue`方法：

```
comm.Parameters.AddWithValue("@person", "Myname");
comm.Parameters.AddWithValue("@address", "Myaddress"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-02T23:21:33.057

我有同样的问题 - 最后尝试了？sigil 而不是@，它起作用了。

根据文档：

> 笔记。提供程序的早期版本使用“@”符号来标记 SQL 中的参数。这与 MySQL 用户变量不兼容，因此提供程序现在使用“？” 用于在 SQL 中定位参数的符号。要支持旧代码，您可以在连接字符串上设置 'old syntax=yes'。如果您这样做，请注意，如果您未能定义您打算在 SQL 中使用的参数，则不会引发异常。

真的吗？如果有人试图使用所谓的旧语法，为什么不直接抛出异常呢？一个 20 行的程序花费了几个小时……

[MySQL::MySQL 命令](http://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqlcommand.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-11-10T09:43:30.087

尝试在 Windows 窗体应用程序中使用 mysql-connector-net-5.1.7-noinstall 和 Visual Studio(2015) 插入数据时，我遇到了非常类似的问题。我不是 C# 大师。因此，解决所有问题大约需要 2 个小时。

以下代码最近有效：

```
string connetionString = null;
connetionString = "server=localhost;database=device_db;uid=root;pwd=123;";

using (MySqlConnection cn = new MySqlConnection(connetionString))
{
    try
    {
        string query = "INSERT INTO test_table(user_id, user_name) VALUES (?user_id,?user_name);";
        cn.Open();
        using (MySqlCommand cmd = new MySqlCommand(query, cn))
        {
            cmd.Parameters.Add("?user_id", MySqlDbType.Int32).Value = 123;
            cmd.Parameters.Add("?user_name", MySqlDbType.VarChar).Value = "Test username";
            cmd.ExecuteNonQuery();
        }
    }
    catch (MySqlException ex)
    {
        MessageBox.Show("Error in adding mysql row. Error: "+ex.Message);
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-23T11:19:43.437

三件事：使用`using`语句，使用`AddWithValue`和前缀参数？并添加`Allow User Variables=True`到连接字符串。

```
 string connString = ConfigurationManager.ConnectionStrings["default"].ConnectionString;
 using (var conn = new MySqlConnection(connString))
 {
      conn.Open();
      var comm = conn.CreateCommand();
      comm.CommandText = "INSERT INTO room(person,address) VALUES(@person, @address)";
      comm.Parameters.AddWithValue("?person", "Myname");
      comm.Parameters.AddWithValue("?address", "Myaddress");
      comm.ExecuteNonQuery();
  } 
```

另请参阅[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)了解有关命令用法的更多信息，以及[http://dev.mysql.com/doc/ refman/5.1/en/connector-net-connection-options.html](http://dev.mysql.com/doc/refman/5.1/en/connector-net-connection-options.html)以获取有关允许用户变量选项的信息（**仅在 5.2.2 及更高版本中支持**）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T11:17:21.737

```
comm.Parameters.Add("person", "Myname"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-12T14:09:11.597

我所做的是这样的。

```
String person;
String address;
person = your value;
address =your value;
string connString = ConfigurationManager.ConnectionStrings["default"].ConnectionString;
    MySqlConnection conn = new MySqlConnection(connString);
    conn.Open();
    MySqlCommand comm = conn.CreateCommand();
    comm.CommandText = "INSERT INTO room(person,address) VALUES('"+person+"','"+address+"')";
    comm.ExecuteNonQuery();
    conn.Close(); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-04-23T12:30:03.710

如有必要，请尝试调整“SqlDbType”处的代码以匹配您的数据库类型并使用此代码：

```
comm.Parameters.Add("@person",SqlDbType.VarChar).Value=MyName; 
```

或者：

```
comm.Parameters.AddWithValue("@person", Myname); 
```

这应该有效，但请记住使用 Command.Parameters.Add()，您可以定义特定的 SqlDbType，使用 Command.Parameters.AddWithValue()，它将尝试基于参数值隐式获取 SqlDbType，如果不能隐式，有时可能会中断转换数据类型。

希望这可以帮助。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2016-12-06T10:26:52.800

试试这个它正在工作

```
 MySqlCommand dbcmd = _conn.CreateCommand();
    dbcmd.CommandText = sqlCommandString;
    dbcmd.ExecuteNonQuery();
    long imageId = dbcmd.LastInsertedId; 
```

# asp.net-mvc - 如何在函数 MVC 上将数据/变量从 View 发送到 Cotroller

> ID：16167925
> 
> 赞同：0
> 
> 时间：2013-04-23T11:15:07.880
> 
> 标签：asp.net-mvc, controller

我正在做一个 MVC 项目。如何将变量值从视图发送到控制器。

这是我想从中获取 ID 的地方；一个 GridviewROw

```
e.Row.Attributes.Add("onclick", "window.open('test.aspx?id=" + DataBinder.Eval(e.Row.DataItem, "Id") + "','myprofilewindow','width=400,height=200,toolbar=0,resizable=0');"); 
```

我想将它发送到包含此功能的控制器

```
 public ActionResult Delete(Object obj)
    { 

    // TODO
        // Delete the user which its id = obj.id ; 
        return View();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:19:25.577

通常您通过路由、查询字符串或请求正文来执行此操作。

从它的外观来看，您应该能够做到这一点。

```
public ActionResult Delete(int id) ... 
```

# c - How to start running with MSVC

> ID：16167926
> 
> 赞同：1
> 
> 时间：2013-04-23T11:15:10.387
> 
> 标签：c, debugging, visual-c++, compilation, visual-studio-debugging

Starting from the beginning !! can anybody here help me how to start running C project with MSVC ?

I have all the source files under:

```
src/ directory 
```

all the header files under:

```
inc/ directory 
```

and few of the source under:

```
test/ directory 
```

test directory contains **makefile** for the project

How can I use the same setup in MSVC for compilation and debugging ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:31:07.643

从我的头顶，

1.  [创建一个工作区](http://msdn.microsoft.com/en-us/library/cc138514(v=vs.100).aspx)。确定您的应用程序是否是命令行、GUI、DLL 等。
2.  [创建一个项目](http://msdn.microsoft.com/en-us/library/zfzh36t7(v=vs.100).aspx)（或多个项目，具体取决于您的应用程序的结构）。
3.  [将每个文件添加](http://msdn.microsoft.com/en-us/library/vstudio/9f4t9t92(v=vs.100).aspx)到相应的项目中。
4.  设置编译器选项（如果有）。
5.  编译并修复任何可移植性问题（例如编译器指令）。

关于您的 makefile，请查看有关[cccl的](http://cccl.sourceforge.net/)[Stack Overflow 答案](https://stackoverflow.com/a/1227714/1383051)。

> cccl 是 Microsoft Visual C++ 的 cl.exe 和 link.exe 的包装器。它将 Unix 编译器参数转换为 cl 和 link 可以理解的参数。

# php - How to reduce multiple dependent queries

> ID：16167927
> 
> 赞同：4
> 
> 时间：2013-04-23T11:15:11.010
> 
> 标签：php, mysql

I was wondering if i can clean this up a bit, i wanted to make a nested sql statement but am unsure how.

```
$serverfile = mysqli_fetch_array(mysqli_query($link,"SELECT `Server_ID` 
    FROM `FileServerFiles` 
    WHERE `File_ID` ='$fileid' 
    limit 1"));
$server = mysqli_fetch_array(mysqli_query($link,"SELECT `ExternalDomain`,`AccessFile` 
    FROM `FileServers` 
    WHERE `ID` ='".$serverfile['Server_ID']."'")); 
```

i wanted something like this?

```
 $server = mysqli_fetch_array(mysqli_query($link,"SELECT `ExternalDomain`,`AccessFile` 
        FROM `FileServers` 
        WHERE `ID` ='(SELECT `Server_ID` 
            FROM `FileServerFiles` 
            WHERE `File_ID` ='$fileid' 
            limit 1)'"
    )); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:26:45.593

这个查询应该这样做；由于您只查询一项，因此您实际上并不需要加入：

```
SELECT `ExternalDomain`,`AccessFile` 
FROM `FileServers` 
WHERE `ID` IN (SELECT `Server_ID` 
    FROM `FileServerFiles` 
    WHERE `File_ID` ='$fileid' 
    limit 1
); 
```

顺便说一句，我假设它`$fileid`已经过适当的消毒；您还可以考虑准备好的陈述（和/或）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:16:53.983

你可以试试IN，

```
 $server = mysqli_fetch_array(mysqli_query($link,"SELECT `ExternalDomain`,`AccessFile` FROM `FileServers` WHERE `ID` IN (SELECT `Server_ID` AS ID FROM `FileServerFiles` WHERE `File_ID` ='$fileid' limit 1)")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:22:03.303

这不是嵌套的，而是使用`join`语法的等价物，有时被认为更简洁（而且现代，值得一提）。可能不是您想要的，但在这里供您参考（因为如果您使用数据库，您可能会遇到这种语法）。

这`INNER JOIN`意味着如果联接右侧没有匹配的行，则从结果中丢弃联接左侧的行。

我已经添加了大量的空白空间，所以很清楚，请随意删除它。但没必要。

```
$server = mysqli_fetch_array(mysqli_query($link,
   "SELECT 
       fs.ExternalDomain,
       fs.AccessFile

    FROM 
       FileServers fs

       INNER JOIN FileServerFiles fsf
       ON fs.fileid = fsf.server_id

     WHERE 
       fsf.File_ID ='$fileid' 

     LIMIT 1
   ")); 
```

正如@Jack 在我之前提到的，您应该确保`$fileid`已消毒。参考[http://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-23T11:18:53.637

语法可能有点不对劲，但左连接应该可以解决问题。旁观者认为较短，但一个查询优于 2 个。

```
$serverfile = mysqli_fetch_array(mysqli_query($link,"
    SELECT f.`Server_ID`, s.`ExternalDomain`, s.`AccessFile`
    FROM `FileServerFiles` f 
    LEFT JOIN `FileServers` AS s ON s.`ID` = f.`Server_ID` 
    WHERE f.`File_ID` ='$fileid'
    LIMIT 1
  ")); 
```

# java - 由于操作栏主题，应用程序强制关闭 - android

> ID：16167931
> 
> 赞同：3
> 
> 时间：2013-04-23T11:15:27.030
> 
> 标签：java, android, xml, android-actionbar, theming

我正在使用 actionbarsherlock。用我的自定义主题

在 values/styles.xml 我已经输入了这个。

```
<style name="Mytheme" parent="@style/Theme.Sherlock.Light">
    <item name="android:background">@drawable/actionbar_bg</item>
</style> 
```

**actionbar_bg**

```
<?xml version="1.0" encoding="utf-8"?>
<gradient xmlns:android="http://schemas.android.com/apk/res/android"
    android:type="linear"
    android:centerX="8%" 
    android:startColor="#969696" 
    android:centerColor="#FFFFFF" 
    android:endColor="#FFFFFFFF" 
    android:angle="270"
/> 
```

**显现**

```
<activity
        android:name="com.example.myapp.Secondactivity"
        android:label="@string/title_activity_second"
         android:theme="@style/Mytheme">
 </activity> 
```

**Logcat 错误** 无法启动活动，android.view.InflateException: Binary XML file line #21: Error inflating class

当我删除**android:theme="@style/Mytheme" 行时**，该应用程序运行良好

**更新：** 我将 android:background 更改为“背景”，并且该应用程序现在不会强制关闭。但未应用渐变。我所能看到的只是一个灰色的操作栏。

**更新#2**

修改styles.xml如下

```
<style name="Mytheme" parent="@style/Theme.Sherlock.Light">
<item name="actionBarStyle">@style/MyActionBarTheme</item>
</style>

<style name="MyActionBarTheme" parent="Widget.Sherlock.ActionBar">
<item name="background">@drawable/actionbar_bg</item>
<item name="android:background">@drawable/actionbar_bg</item>
</style> 
```

在 Manifest 中，我将主题称为 android:theme="@style/MyActionBarTheme" 。

正如您在图像中看到的那样，渐变分布在整个窗口中，而不仅仅是操作栏

![在此处输入图像描述](https://i.stack.imgur.com/oEhmL.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:18:32.270

尝试不`android`使用您的 xml 属性名称：

```
<style name="Mytheme" parent="@style/Theme.Sherlock.Light">
    <item name="actionBarStyle">@style/Widget.MyActionBarTheme</item>
    <item name="android:actionBarStyle">@style/Widget.MyActionBarTheme</item>
</style>

<style name="Widget.MyActionBarTheme" parent="Widget.Sherlock.ActionBar">
    <item name="background">@drawable/actionbar_bg</item>
</style> 
```

一个`android`将用于本机 ActionBar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:23:13.487

添加此 actionbar_bg.xml

![在此处输入图像描述](https://i.stack.imgur.com/R41kO.png)

```
Drawable dr = getResources().getDrawable(R.drawable.actionbar_bg);
getActionBar().setBackgroundDrawable(dr); 
```

actionbar_bg.xml

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <gradient
        android:angle="270"
        android:centerColor="#FFFFFF"
        android:centerX="8%"
        android:endColor="#FFFFFFFF"
        android:startColor="#969696"
        android:type="linear" />

</shape> 
```

# android - 错误启动 onPause()/onResume() android flash air

> ID：16167932
> 
> 赞同：1
> 
> 时间：2013-04-23T11:15:27.813
> 
> 标签：android, flash, android-intent, android-activity, air

我正在为 android 开发一个应用程序，使用 Flash Air 和 flash builder 和 flash cs6。

在我加载和 SWF 之后，我需要将我的应用程序放在后台，然后再次将应用程序调用到前台。那是因为我观察到我的应用程序的响应有所改善，它运行得更快

我正在使用这个：

```
navigateToURL(new URLRequest("intent:#Intent;action=android.intent.action.MAIN;category=android.intent.category.LAUNCHER;launchFlags=0x10000000;component=android.app.Activity.onPause();end")); 
```

但是打开了其他应用程序，在我的情况下是电子邮件应用程序

# php - Break HTTP file uploading from server side by PHP or Apache

> ID：16167935
> 
> 赞同：11
> 
> 时间：2013-04-23T11:15:32.677
> 
> 标签：php, node.js, http, mod-rewrite, file-upload

When uploading big file (>100M) to server, PHP always accept entire data POST from browser first. We cannot inject into the process of uploading.

For example, check the value of "`token`" before entire data send to server is **IMPOSSIBLE** in my PHP code:

```
<form enctype="multipart/form-data" action="upload.php?token=XXXXXX" method="POST">
    <input type="hidden" name="MAX_FILE_SIZE" value="3000000" />
    Send this file: <input name="userfile" type="file" />
    <input type="submit" value="Send File" />
</form> 
```

So I've try to use `mod_rewrite` like this:

```
RewriteEngine On
RewriteMap mymap prg:/tmp/map.php
RewriteCond %{QUERY_STRING} ^token=(.*)$ [NC]
RewriteRule ^/upload/fake.php$ ${mymap:%1} [L] 
```

map.php

```
#!/usr/bin/php
<?php
define("REAL_TARGET", "/upload/real.php\n");
define("FORBIDDEN", "/upload/forbidden.html\n");

$handle = fopen ("php://stdin","r");
while($token = trim(fgets($handle))) {
file_put_contents("/tmp/map.log", $token."\n", FILE_APPEND);
    if (check_token($token)) {
        echo REAL_TARGET;
    } else {
        echo FORBIDDEN;
    }
}

function check_token ($token) {//do your own security check
    return substr($token,0,4) === 'alix';
} 
```

But ... It fails **again**. `mod_rewrite` looks working too late in this situation. Data still transfer entirely.

Then I tried `Node.js`, like this (code snip):

```
var stream = new multipart.Stream(req);
stream.addListener('part', function(part) {
    sys.print(req.uri.params.token+"\n");
    if (req.uri.params.token != "xxxx") {//check token
      res.sendHeader(200, {'Content-Type': 'text/plain'});
      res.sendBody('Incorrect token!');
      res.finish();
      sys.puts("\n=> Block");
      return false;
    } 
```

Result is ... fail **again**.

So please help me to find the correct path to resolve this issue or tell me there is no way.

Related questions:

[Can PHP (with Apache or Nginx) check HTTP header before POST request finished?](https://stackoverflow.com/questions/16118160/can-php-with-apache-or-nginx-check-http-header-before-post-request-finished)

[Can some tell me how to make this script check for the password before it starts the upload process instead of after the file is uploaded?](https://stackoverflow.com/questions/14049665/can-some-tell-me-how-to-make-this-script-check-for-the-password-before-it-starts)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-05-03T00:38:38.300

首先，[您可以使用我为此创建的 GitHub 存储库自己尝试此代码](https://github.com/benjamingr/SoQuestionHeaders.git)。只需克隆存储库并运行`node header`.

（剧透，如果你正在阅读这篇文章，并且在时间压力下要完成一些工作并且没有心情学习（:(），最后有一个更简单的解决方案）

### 总体思路

这是一个很好的问题。您所要求的**非常有可能**，并且**不需要客户端**，只需更深入地了解 HTTP 协议的工作原理，同时展示 node.js 是如何运作的 :)

如果我们更深入地了解底层[TCP 协议](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)并针对这种特定情况自己处理 HTTP 请求，这将变得容易。Node.js 让您可以使用内置的[net 模块](http://nodejs.org/api/net.html)轻松完成此操作。

### HTTP 协议

首先，让我们看看 HTTP 请求是如何工作的。

[HTTP 请求](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4)包含一个头部部分，其一般格式为键：值对，由 CRLF ( `\r\n`) 分隔。我们知道，当我们到达双 CRLF（即`\r\n\r\n`）时，标题部分结束。

典型的 HTTP GET 请求可能如下所示：

```
GET /resource HTTP/1.1  
Cache-Control: no-cache  
User-Agent: Mozilla/5.0 

Hello=World&stuff=other 
```

“空行”之前的顶部是标题部分，底部是请求的正文。您的请求在正文部分看起来会有所不同，因为它是用编码的，`multipart/form-data`但标头将保持相似让我们来探索这如何适用于我们。

### nodejs中的TCP

我们可以在 TCP 中侦听原始请求并读取我们得到的数据包，直到我们读取我们谈到的双 crlf。然后我们将检查我们已经拥有的短标题部分以进行我们需要的任何验证。在我们这样做之后，如果验证没有通过（例如通过简单地结束 TCP 连接），我们可以结束请求，或者通过它。这允许我们不接收或读取请求正文，而只是接收或读取更小的标头。

将其嵌入到现有应用程序中的一种简单方法是将来自应用程序的请求代理到特定用例的实际 HTTP 服务器。

### 实施细节

这个解决方案是**最简单**的。这只是一个建议。

这是工作流程：

1.  我们需要 node.js 中的`net`模块，它允许我们在 node.js 中创建 tcp 服务器

2.  `net`使用将监听数据 的模块创建一个 TCP 服务器： `var tcpServer = net.createServer(function (socket) {...`. 不要忘记告诉它监听正确的端口

*   在该回调中，监听数据事件`socket.on("data",function(data){`，只要数据包到达就会触发。
*   从“数据”事件中读取传递缓冲区的数据，并将其存储在变量中
*   检查双 CRLF，这确保请求 HEADER 部分已[根据 HTTP 协议结束](http://www.w3.org/Protocols/rfc2616/rfc2616.html)
*   假设验证是一个标头（用您的话来说是标记），在**仅解析标头**后检查它，（也就是说，我们得到了双 CRLF）。这在检查内容长度标头时也有效。
*   如果您注意到标头没有签出，请调用`socket.end()`它将关闭连接。

### 这是我们将使用的一些东西

读取标题的方法：

```
function readHeaders(headers) {
    var parsedHeaders = {};
    var previous = "";    
    headers.forEach(function (val) {
        // check if the next line is actually continuing a header from previous line
        if (isContinuation(val)) {
            if (previous !== "") {
                parsedHeaders[previous] += decodeURIComponent(val.trimLeft());
                return;
            } else {
                throw new Exception("continuation, but no previous header");
            }
        }

        // parse a header that looks like : "name: SP value".
        var index = val.indexOf(":");

        if (index === -1) {
            throw new Exception("bad header structure: ");
        }

        var head = val.substr(0, index).toLowerCase();
        var value = val.substr(index + 1).trimLeft();

        previous = head;
        if (value !== "") {
            parsedHeaders[head] = decodeURIComponent(value);
        } else {
            parsedHeaders[head] = null;
        }
    });
    return parsedHeaders;
}; 
```

一种在数据事件中检查缓冲区中的双 CRLF 的方法，如果它存在于对象中，则返回其位置：

```
function checkForCRLF(data) {
    if (!Buffer.isBuffer(data)) {
        data = new Buffer(data,"utf-8");
    }
    for (var i = 0; i < data.length - 1; i++) {
        if (data[i] === 13) { //\r
            if (data[i + 1] === 10) { //\n
                if (i + 3 < data.length && data[i + 2] === 13 && data[i + 3] === 10) {
                    return { loc: i, after: i + 4 };
                }
            }
        } else if (data[i] === 10) { //\n

            if (data[i + 1] === 10) { //\n
                return { loc: i, after: i + 2 };
            }
        }
    }    
    return { loc: -1, after: -1337 };
}; 
```

还有这个小实用方法：

```
function isContinuation(str) {
    return str.charAt(0) === " " || str.charAt(0) === "\t";
} 
```

## 执行

```
var net = require("net"); // To use the node net module for TCP server. Node has equivalent modules for secure communication if you'd like to use HTTPS

//Create the server
var server = net.createServer(function(socket){ // Create a TCP server
    var req = []; //buffers so far, to save the data in case the headers don't arrive in a single packet
    socket.on("data",function(data){
        req.push(data); // add the new buffer
        var check = checkForCRLF(data);
        if(check.loc !== -1){ // This means we got to the end of the headers!
            var dataUpToHeaders= req.map(function(x){
                return x.toString();//get buffer strings
            }).join("");
            //get data up to /r/n
            dataUpToHeaders = dataUpToHeaders.substring(0,check.after);
            //split by line
            var headerList = dataUpToHeaders.trim().split("\r\n");
            headerList.shift() ;// remove the request line itself, eg GET / HTTP1.1
            console.log("Got headers!");
            //Read the headers
            var headerObject = readHeaders(headerList);
            //Get the header with your token
            console.log(headerObject["your-header-name"]);

            // Now perform all checks you need for it
            /*
            if(!yourHeaderValueValid){
                socket.end();
            }else{
                         //continue reading request body, and pass control to whatever logic you want!
            }
            */

        }
    });
}).listen(8080); // listen to port 8080 for the sake of the example 
```

如果您有任何问题随时问 ：）

## 好吧，我撒谎了，还有更简单的方法！

但这有什么乐趣呢？如果您最初跳过此处，您将不会了解 HTTP 的工作原理 :)

Node.js 有一个内置`http`模块。由于 node.js 中的请求本质上是分块的，尤其是长请求，因此您可以在不深入了解协议的情况下实现相同的事情。

这次，让我们使用该`http`模块来创建一个http服务器

```
server = http.createServer( function(req, res) { //create an HTTP server
    // The parameters are request/response objects
    // check if method is post, and the headers contain your value.
    // The connection was established but the body wasn't sent yet,
    // More information on how this works is in the above solution
    var specialRequest = (req.method == "POST") && req.headers["YourHeader"] === "YourTokenValue";
    if(specialRequest ){ // detect requests for special treatment
      // same as TCP direct solution add chunks
      req.on('data',function(chunkOfBody){
              //handle a chunk of the message body
      });
    }else{
        res.end(); // abort the underlying TCP connection, since the request and response use the same TCP connection this will work
        //req.destroy() // destroy the request in a non-clean matter, probably not what you want.
    }
}).listen(8080); 
```

这是基于默认情况下`request`，nodejs`http`模块中的句柄在发送标头后（但未执行其他任何操作）实际上挂钩的事实。[（服务器模块](https://github.com/joyent/node/blob/master/lib/_http_server.js#L391-L392)中[的这个，解析器模块中的这个）](https://github.com/joyent/node/blob/master/lib/_http_common.js#L114)

假设您的目标浏览器支持它，用户[igorw](https://chat.stackoverflow.com/users/289985/igorw)建议使用标题更简洁的解决方案。[`100 Continue`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)100 Continue 是一个状态代码，旨在完全按照您的尝试：

> 100（继续）状态（参见第 10.1.1 节）的目的是允许正在发送带有请求正文的请求消息的客户端确定源服务器是否愿意接受请求（基于请求标头）在客户端发送请求正文之前。在某些情况下，如果服务器在不查看正文的情况下拒绝消息，则客户端发送正文可能不合适或效率极低。

这里是 ：

```
var http = require('http');

function handle(req, rep) {
    req.pipe(process.stdout); // pipe the request to the output stream for further handling
    req.on('end', function () {
        rep.end();
        console.log('');
    });
}

var server = new http.Server();

server.on('checkContinue', function (req, rep) {
    if (!req.headers['x-foo']) {
        console.log('did not have foo');
        rep.writeHead(400);
        rep.end();
        return;
    }

    rep.writeContinue();
    handle(req, rep);
});

server.listen(8080); 
```

[您可以在此处](https://gist.github.com/igorw/75aae212a11ab642f864)查看示例输入/输出。这将要求您使用适当的`Expect:`标头触发请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T13:31:41.320

使用 JavaScript。当用户点击提交时，通过 ajax 提交一个 pre-form，等待 ajax 响应，然后当它返回成功与否时，提交实际的表单。您也可以回退到您不想要的方法，这总比没有好。

```
<script type="text/javascript">
function doAjaxTokenCheck() {
    //do ajax request for tokencheck.php?token=asdlkjflgkjs
    //if token is good return true
    //else return false and display error
}
</script>

<form enctype="multipart/form-data" action="upload.php?token=XXXXXX" method="POST">
    <input type="hidden" name="MAX_FILE_SIZE" value="3000000" />
    Send this file: <input name="userfile" type="file" />
    <input type="submit" value="Send File" onclick="return doAjaxTokenCheck()"/>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T02:23:18.723

为什么不只使用 APC 文件上传进度并将进度密钥设置为 APC 文件上传的密钥，这样在这种情况下，表单已提交并且上传进度将首先开始，但在第一次进度检查时，您将验证密钥如果它不正确，你会打断一切：

[http://www.johnboy.com/blog/a-useful-php-file-upload-progress-meter](http://www.johnboy.com/blog/a-useful-php-file-upload-progress-meter) [http://www.ultramegatech.com/2008/12/creating-upload-progress-bar-php/](http://www.ultramegatech.com/2008/12/creating-upload-progress-bar-php/)

这是一种更原生的方法。大致相同，只需将隐藏输入的密钥更改为您的令牌并验证它并在出现错误时中断连接。也许那会更好。 [http://php.net/manual/en/session.upload-progress.php](http://php.net/manual/en/session.upload-progress.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-27T18:14:30.563

绕过 PHP 后处理的一种方法是通过 PHP-CLI 路由请求。创建以下 CGI 脚本并尝试将大文件上传到其中。Web 服务器应该通过终止连接来响应。如果是这样，那么只需打开一个内部套接字连接并将数据发送到实际位置——当然，前提是满足条件。

```
#!/usr/bin/php
<?php

echo "Status: 500 Internal Server Error\r\n";
echo "\r\n";
die();

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-26T09:30:45.287

我建议您使用一些客户端插件来上传文件。你可以使用

[http://www.plupload.com/](http://www.plupload.com/)

或者

[https://github.com/blueimp/jQuery-File-Upload/](https://github.com/blueimp/jQuery-File-Upload/)

两个插件都可以在上传前检查文件大小。

如果您想使用自己的脚本，请选中此项。这可能会帮助你

```
 function readfile()
        {
            var files = document.getElementById("fileForUpload").files;
            var output = [];
            for (var i = 0, f; f = files[i]; i++) 
            {
                    if(f.size < 100000) // Check file size of file
                    {
                        // Your code for upload
                    }
                    else
                    {
                        alert('File size exceeds upload size limit');
                    }

            }
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T11:55:48.590

听起来您正在尝试流式传输上传并需要在处理之前进行验证：这有帮助吗？ [http://debuggable.com/posts/streaming-file-uploads-with-node-js:4ac094b2-b6c8-4a7f-bd07-28accbdd56cb](http://debuggable.com/posts/streaming-file-uploads-with-node-js:4ac094b2-b6c8-4a7f-bd07-28accbdd56cb)

[http://www.componentix.com/blog/13/file-uploads-using-nodejs-once-again](http://www.componentix.com/blog/13/file-uploads-using-nodejs-once-again)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-26T18:10:51.593

以前的版本有些模糊。所以我重写了代码来展示路由处理和中间件之间的区别。每个请求都会执行中间件。它们按照给定的顺序执行。`express.bodyParser()`是处理文件上传的中间件，你应该跳过不正确的令牌。`mymiddleware`只需检查令牌并终止无效请求。这必须在`express.bodyParser()`执行之前完成。

```
var express = require('express'),
app = express();

app.use(express.logger('dev'));
app.use(mymiddleware);                                 //This will work for you.
app.use(express.bodyParser());                         //You want to avoid this
app.use(express.methodOverride());
app.use(app.router);

app.use(express.static(__dirname+'/public'));
app.listen(8080, "127.0.0.1");

app.post('/upload',uploadhandler);                     //Too late. File already uploaded

function mymiddleware(req,res,next){                   //Middleware
    //console.log(req.method);
    //console.log(req.query.token);
    if (req.method === 'GET')
        next();
    else if (req.method === 'POST' && req.query.token === 'XXXXXX')
        next();
    else
        req.destroy();
}

function uploadhandler(req,res){                       //Route handler
    if (req.query.token === 'XXXXXX')
        res.end('Done');
    else
        req.destroy();
} 
```

`uploadhandler`另一方面不能中断上传，因为它已经被处理过`express.bodyParser()`。它只处理 POST 请求。希望这可以帮助。

# appdomain - 订阅 MarshalByRefObject 中的事件时出现 FileNotFoundException

> ID：16167940
> 
> 赞同：2
> 
> 时间：2013-04-23T11:16:03.403
> 
> 标签：appdomain, filenotfoundexception, marshalbyrefobject

我有使用 AppDomains 的应用程序。从主应用程序 A（它没有加载 B 的程序集）我创建一些表单 B，然后为该表单提供一个对象。然后我尝试这样做 someObject.eventName += 方法，NotFoundException 发生了消息“文件或程序集名称''，或其依赖项之一，未找到”。someObject.Item = value 没有给出任何例外。

DataWrited del = new DataWrited(_logger_DataWrited); // 没有例外

_logger.DataWrited = 德尔；// 给出与 += 相同的异常

Ofc 所有组件都在基本文件夹中并且是可访问的

PS对不起我的英语不好

问题已解决。我尝试在A中使用该方法，该方法在B中实现，ofc产生了异常。

# oop - 如何在包装多个交互的 API 类的同时保持封装？

> ID：16167942
> 
> 赞同：1
> 
> 时间：2013-04-23T11:16:05.933
> 
> 标签：oop, encapsulation, word-wrap

我有 API 类 A 和 B，我已经包装了它们，比如 WrappedA 和 WrappedB。现在我需要以可以调用 WrappedA.AddMappingTo(WrappedB) 的方式调用 A.AddMappingTo(B)，这样做的最佳方法是什么？

**选项 1：内部成员。WrappedA 可以看到 WrappedB.B。**

```
// class WrappedA
public void AddMappingTo(WrappedB wrappedB)
{
    a.AddMappingTo(wrappedB.b);
} 
```

感觉它打破了封装？

**选项 2：内部功能。WrappedA 可以看到 WrappedB.AddMappingFrom(A) 调用了 A.AddMappingTo(B)。**

```
// class WrappedA
public void AddMappingTo(WrappedB wrappedB)
{
    wrappedB.AddMappingFrom(a);
}

//class WrappedB
public void AddMappingFrom(A a)
{
    a.AddMappingTo(b);
} 
```

感觉它破坏了凝聚力 - 现在 WrappedA 和 WrappedB 都具有涉及相互映射的功能？

还有其他选择吗？

# c++ - Boost几何正确

> ID：16167943
> 
> 赞同：1
> 
> 时间：2013-04-23T11:16:07.890
> 
> 标签：c++, boost, boost-geometry

boost 1.52.0 中是否有机会纠正 3d 多边形？使用`point_xy`它效果很好，但不适用于`point<double, double, double>`3d。还是我应该自己测试方向？

谢谢

# cakephp - 我想在我的 cakephp 项目中为文本字段添加一个工具提示

> ID：16167951
> 
> 赞同：1
> 
> 时间：2013-04-23T11:16:15.223
> 
> 标签：cakephp

我想在我的 cakephp 项目中为文本字段添加一个工具提示。因此，每当用户开始在文本字段中输入值时，应该打开一个工具提示并指导他输入字段所需的值。这样用户就不会对输入的内容感到困惑。（可能是 jquery 或 javascript）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:21:31.987

使用 jQueryUI 很容易实现。只需在输入字段上使用[自动完成](http://jqueryui.com/autocomplete/)功能即可显示“可能的值”。

只需将带有可能值的脚本块添加到您的页面并附加它。喜欢：

```
$this->Html->scriptBlock(
<<<JS
$(function() {
  var availableTags = [
    "A",
    "B",
    "C"
  ];
  $( "#ModelField" ).autocomplete({
    source: availableTags
  });
});
JS
); 
```

后跟您的表单代码。

# c++ - How to delete from map all records with same value but different keys?

> ID：16167961
> 
> 赞同：2
> 
> 时间：2013-04-23T11:16:49.457
> 
> 标签：c++, boost, stl

I have `boost::unordered_map<int, Animal*>` and I need to delete all inserts where value is the same pointer like `Animal* a;` ( **a** is given **Animal*** like parameter, I have for different keys in map same **Animal*** pointer on couple places).

```
boost::unordered_map<int, Animal*> mp;
Animal* rex = new Animal("Rex");
mp[1]=rex;
mp[2]=rex;
mp[9]=rex; 
```

How to delete all records where value is rex, and after that delete rex from heap only once ?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T11:19:27.517

您需要遍历列表并删除与您正在搜索的指针值匹配的记录。

```
typedef boost::unordered_map<int, Animal*> AnimalMap;
AnimalMap mp;

void DeleteStuff(Animal* searchPointerValue)
{
    for(AnimalMap::iterator it = mp.begin(); it < mp.end(); )
    {
        if(it->second == searchPointerValue)
        {
            // erase() invalidates the iterator but returns a new one
            // that points to the next element in the map.
            it = mp.erase(it);
        }
        else
        {
            ++it; // Only bump the iterator if no erase is done
                  // since unordered_map::erase() takes care of that for us
        }
    }

    // now we can delete the animal as you so desire
    delete searchPointerValue;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T11:23:53.803

```
typedef boost::unordered_map<int, Animal*> mapType;
mapType myMap;

mapType::iterator it = myMap.begin();
while(it != myMap.end())
{
    if(it->second == current_pointer)
        it = mp.erase(it);
    else
        ++it;
}

delete  current_pointer;  // Don't forget this 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T11:21:31.167

使用智能指针，如`boost::shared_ptr`，而不是原始指针。这将使您有机会毫无顾虑地从地图中删除元素。

拥有一个带有引用计数的智能指针，您可以简单地遍历映射并擦除每个具有您想要的值的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T11:25:36.950

使用[`std::remove_if`](http://en.cppreference.com/w/cpp/algorithm/remove)合适的函子怎么样？

```
std::remove_if(std::begin(mp), std::end(mp),
               [](const std::pair<int, Animal*>& pair)
               { return (pair.second == rex); }); 
```

当然，除非您这样做，否则这可能会导致内存泄漏`delete rex`。使用[智能指针](http://en.cppreference.com/w/cpp/memory)是个好主意。

# c# - 如何使用在浏览器中运行的 Silverlight 来处理许多（超过 100 个）并行 HTTP 请求？

> ID：16167967
> 
> 赞同：1
> 
> 时间：2013-04-23T11:17:09.323
> 
> 标签：c#, silverlight, browser, parallel-processing, httprequest

我必须用我的 Silverlight 应用程序执行 100 个并行 HTTP 请求。不幸的是，并行连接受到浏览器的限制。

如果我启动 Prozess，我会并行启动所有请求。浏览器似乎只处理大约 10 个并行连接（比如 max-connections）。所以其他人都在等待。如果浏览器收到响应，它会处理下一个 WAITING 请求，依此类推。

我的问题是最后的 WAITING 请求永远不会被处理。有超时吗？如果是 - 我可以控制超时吗？

如果我实现自己的超时计时器，我该如何启动它（Silverlight 启动请求和浏览器处理请求之间似乎存在差距）。

我可以检测浏览器的“最大连接数”以将 100 个请求分成更小的块吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:28:37.873

现在我不建议这样做，但是如果您为同一服务器/网站创建多个子域名并平均分配负载，则每台服务器可以增加 10 个额外的调用。IE。www1.domain.com、www2.domain.com 等。您经常在 Bing 和 Google 地图上看到这种方法用于快速加载许多图块。但是正如其他人评论的那样，您的方法从一开始就是错误的。也许只考虑按需计算一行（即当用户请求计算特定行时）。使用 TPL async/await 扩展，将它分成 n/10 个队列并一一处理它们也相当容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:46:12.523

您可以在此页面上找到最大连接数的信息： [http ://www.browserscope.org/?category=network](http://www.browserscope.org/?category=network)

检查[BrowserInformation](http://msdn.microsoft.com/fr-fr/library/system.windows.browser.browserinformation%28v=vs.95%29.aspx)以适应块。

# struts2 - Liferay6中的Struts2+验证

> ID：16167971
> 
> 赞同：3
> 
> 时间：2013-04-23T11:17:22.467
> 
> 标签：struts2, liferay

我的 view.jsp 格式如下：

```
<s:form action="action">
  <s:textfiled name="user"></textfield>
</s:form> 
```

我在同一个包中创建了我的 ActionClass 和 ActionClass -Validation.xml。

ActionClass -Validation.xml：

```
<validators>
  <field name="user">
    <field-validator type="required">
      <message>You must enter a value.</message>
    </field-validator>
  </field>
</validators> 
```

在我的支柱

```
<action name="action" class="com.action.ActionClass" method="execute" >
   <result name="success">/html/view/register-success.jsp</result>
   <result name="error">/html/view/register-error.jsp</result>
   <result name="input">/html/view/view.jsp</result>
</action> 
```

但它不起作用。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:26:51.477

验证器`required`用于检查指定字段是否不为空。您可能希望使用`requiredstring`验证器来检查字符串字段是否为非空且长度 > 0。

此外，您的验证 xml 文件名应该是`ActionClass-validation.xml`，注意小写的`-validation`.

# 64-bit - 64 位 visio 上不支持无窗口 ActiveX 控件异常

> ID：16167973
> 
> 赞同：2
> 
> 时间：2013-04-23T11:17:27.847
> 
> 标签：64-bit, activex, visio

我正在将我的应用程序的兼容性从 visio 32 位扩展到 visio 64 位。我在 win7(64) 机器上使用 visio 2013。我得到了不支持无窗口 ActiveX 控件的异常。我已尝试 在此位置 \VisSDK\Samples\Readme Samples 64bit.htm 上使用 Visi SDK 提供的[KB 980533](http://support.microsoft.com/kb/980533)和 Readme 示例文件为 64 位系统构建解决方案。我已经尝试过 DEP 解决方案但无法正常工作。

**堆栈跟踪：**

```
 at System.Windows.Forms.AxHost.EnsureWindowPresent()
   at System.Windows.Forms.AxHost.InPlaceActivate()
   at System.Windows.Forms.AxHost.TransitionUpTo(Int32 state)
   at System.Windows.Forms.AxHost.CreateHandle()
   at System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)
   at System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)
   at System.Windows.Forms.AxHost.EndInit() 
```

{“无法获取 'AxDrawingControl' 控件的窗口句柄。不支持无窗口 ActiveX 控件。”}

系统信息：

操作系统：Windows 7 64 位 Visio：Visio 2013 64 位目标平台：.Net 4.5，任何 CPU 互操作：AxInterop.Microsoft.Office.VisOcx.dll（在 32 位机器上创建） Visio 绘图控制：VISOCX.DLL 64 位（是的，它已注册）IDE：Visual Studio 2013 Professional

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T16:24:19.953

我终于得到了使用 64 位的解决方案。

神奇的是我意识到我实际上并不需要 XAML 中的控件。所以我最终做的是从 XAML 页面中删除控件，并从 .xaml.cs 代码的构造函数中实例化它。

所以：按照[此链接](http://msdn.microsoft.com/en-us/library/ms742735.aspx)中的说明构建自定义控件。我*认为*您必须使用 64 位版本的 MSBuild.exe 进行构建，如[您提供的链接](http://support.microsoft.com/kb/980533)中所述。这显然仅在您创建自定义控件时才需要；我能够直接从 VS 构建解决方案（但它在由 MSBuild 构建时也可以正常工作，因此它也可以在自动构建中工作）。

## 创建自定义控件

1.  在安装了 32 位 Visio 的构建环境中创建一个名为 VisioAxControl 的新自定义控件项目
2.  在 VS Designer 中，将 Visio 绘图控件从工具箱拖放到 WindowsFormsHost 内的窗体中。您可能需要将此控件添加到工具箱（右键单击工具箱，“选择项目...”）。执行此步骤会导致 VS 创建（并添加引用）一个新的 DLL，即 AxMicrosoft.Office.Interop.VisOcx 类型的“Microsoft Visio 15.0 绘图控件类型库”。这个 DLL 放在项目下的 /obj/Release 目录下，但是如果你简单地选择引用并将“Copy local”设置为“true”，就会在构建时复制到/bin。
3.  打开代码隐藏并将控件的范围更改为`public`并重构：将其重命名`axDrawingControl1`为`AxVisioControl`（最重要的是，不要忘记`this.AxVisioControl.Name = "AxVisioControl";`）
4.  构建项目以创建用于最终 x86/32 位解决方案构建的 WPF 控件 DLL
5.  对于您的 x86/32 位解决方案，请将两者复制并引用`VisioAxControl.dll`到`AxMicrosoft.Office.Interop.VisOcx.dll`解决方案中某处的文件夹中。

    ### 构建 64 位控件

6.  在安装了 64 位 Visio 的构建环境中保存、复制/移动和打开自定义控件项目

7.  将构建平台更改为 x64
8.  打开管理员命令提示符，cd 到你的项目目录
9.  运行`MSBuild_Path\MSBuild.exe /p:Configuration=Release /p:Platform=x64 your_project_file_name`（对我来说，MSBuild_Path 是 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\MSBuild.exe）以构建自定义控件项目以创建 WPF 控件 DLL 以用于最终 x64 解决方案构建

## 包括在您的 64 位项目中

1.  复制和参考`/bin/Release/VisioAxControl.dll`和`/obj/Release/AxMicrosoft.Office.Interop.VisOcx.dll`。
2.  在表单的 XAML 中，添加一个`<WindowsFormsHost name="MyWindowsFormsHost"></WindowsFormsHost>`控件。
3.  在 XAML 的代码隐藏中，在构造函数中：

    ```
    using VisioAxControl;
    public DesignView()
    {
        InitializeComponent();
        var avc = new VisioAxControl() { Name = "vControl" };
        this.MyWindowsFormsHost.Child = avc;
        this._avc = avc.AxVisioControl;  // for later reference, such as adding shapes
    } 
    ```

4.  保存并构建您的项目！

# c# - TimeZone.IsInvalidTime 未捕获 2010 年埃及的 dst 导致的无效时间

> ID：16167974
> 
> 赞同：2
> 
> 时间：2013-04-23T11:17:28.797
> 
> 标签：c#, timezone, dst

**这是一个极端情况。**

我正在研究将无效的本地时间转换为 UTC 的修复程序。在本地时区中，由于夏令时 (dst)，某些时间段无法转换为 UTC。给定正确的时区，TimeZone.IsInvalidTime() 可用于识别此类数据时间值。

在埃及，2010 年 DST 每年更改 4 次（由于斋月）。IsInvalidTime() 似乎没有检测到第二次这样的转换。

***编辑*** TimeZoneInfo.ConvertTime()，这是我用来实际将其转换为 UTC 的，将这些值转换为 UTC。一个错误的转换，但转换都是一样的。

有人遇到过这个，有什么建议可以覆盖这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:52:24.507

Windows 时区数据库在准确反映时区规则的历史变化方面是出了名的糟糕。请改用 IANA/Olson 时区数据库。有关不同数据库的更多信息，请参阅[TimeZone 标签 wiki](https://stackoverflow.com/tags/timezone/info)。

对于 .Net，最好的解决方案是使用[NodaTime](https://code.google.com/p/noda-time/)。它完全实现了 IANA/Olson 数据库。您将使用`Africa/Cairo`准确反映所有历史变化的时区。

# c# - How to get the response over HTTP

> ID：16167977
> 
> 赞同：1
> 
> 时间：2013-04-23T11:17:40.523
> 
> 标签：c#, http, http-post, httprequest, httpresponse

I am sending HTTP request. I need to save the HTTP response to that request.

This is the request URL : `http://notify.test.com/gateway.do?service=notify_verify&partner=2088&notify_id=abcdefghijklmnopqrst`

Code I tried is below:

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://notify.test.com/gateway.do?service=notify_verify&partner=2088&notify_id=abcdefghijklmnopqrst");
        request.Proxy = WebProxy.GetDefaultProxy();
        request.Proxy.Credentials = CredentialCache.DefaultCredentials;
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        Stream resStream = response.GetResponseStream(); 
```

The response will be True or False. how can I save that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:21:14.053

如果您的要求很简单，`WebClient`那么还有很长的路要走：

```
string result;
using(var client = new WebClient()) {
    client.Proxy = ...
    result = client.DownloadString(uri);
} 
```

另见：`DownloadData`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:31:52.457

```
using(var resStream = response.GetResponseStream())
using(var reader = new StreamReader(resStream))
{
    var responseText = reader.ReadToEnd();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T11:21:45.397

`System.IO.Stream`你从那里获得一个`GetResponseStream()`，`Stream`提供`Read`你可以阅读的方法

```
using(Stream resStream = response.GetResponseStream()){ //release Stream after use
    if(resStream.CanRead){
        byte[] buffer = new byte[resStream.Length]; // or whatever
        if(resStream.Read(buffer, 0, resStream.Length) == 0) 
        {
            // end of Stream
        }
        else{
             //data received, work on buffer
        }
    }
} 
```

见[这里](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)`System.IO.Stream`。_

# git - error: Failed connect to github.com:8080; Connection refused

> ID：16167979
> 
> 赞同：4
> 
> 时间：2013-04-23T11:17:51.537
> 
> 标签：git, git-clone

I know this issue is not new, I kept looking for the answer but until now nothing worked for me.

The issue is that each time I try a `git clone` or `git pull` command, I receive the following error:

```
error: Failed connect to github.com:8080; Connection refused while accessing https://github.com/mxcl/homebrew.git/info/refs?service=git-upload-pack
fatal: HTTP request failed 
```

(Here its [https://github.com/mxcl/homebrew.git/info/refs?service=git-upload-pack](https://github.com/mxcl/homebrew.git/info/refs?service=git-upload-pack) but it is just an example, I have this issue whith all URLs)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T11:43:52.517

检查您是否设置了 git`http.proxy`或`https.proxy`配置，并取消设置两者。请参阅[拉取命令错误：无法连接到 github.com:8080](https://stackoverflow.com/questions/5102361/pull-command-error-failed-connect-to-github-com8080)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-22T06:08:48.010

尝试在推送或拉取之前设置公钥/私钥对。

```
ssh-keygen -t rsa -C "youremailid@xxxx.com" 
```

![在此处输入图像描述](https://i.stack.imgur.com/Tlk6B.png)

# android - Proguard：在Android中排除库项目

> ID：16167981
> 
> 赞同：6
> 
> 时间：2013-04-23T11:17:54.207
> 
> 标签：android, proguard

我有两个项目 Project_A 和 Project_B。Project_B 是 Project_A 的库项目。Project_B 在其 libs 文件夹中有外部 jar。

当我在 Project_A 上运行 proguard 时，出现以下错误：

```
(Unknown verification type [69] in stack map frame)) 
```

该错误是指外部 jar 中存在的文件（存在于 Project_B 的库中）

我正在使用我们在 android SDK 中获得的标准 proguard.cfg 文件。

我已经尝试过“-keep class .**”，但我仍然遇到同样的错误。

请让我知道是否有一种方法可以将 Project_B(library project) 及其 jar 排除在混淆之外。我只想在 Project_A 上运行 proguard，而不是在其库项目上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T23:49:00.107

ProGuard 需要整个类层次结构来正确处理应用程序，因此您不能真正忽略该库。

库代码似乎已损坏；很可能，它已被损坏它的工具进行了后处理。某些工具无法正确更新验证信息。此信息是可选的，但 ProGuard 期望其格式正确。您应该检查是否有更新版本的库或后处理工具。

# c# - C# 中用于电子邮件验证的最佳正则表达式

> ID：16167983
> 
> 赞同：46
> 
> 时间：2013-04-23T11:17:55.533
> 
> 标签：c#, regex, email-validation

我见过大量用于不同编程语言的正则表达式，它们都声称可以验证电子邮件地址。我看到很多评论说有问题的表达方式不适用于某些情况，它们要么太严格，要么太宽松。我正在寻找的是一个正则表达式，我可以在我的 C# 代码中使用它是确定的。

我发现的最好的东西是这个

```
^([\w\.\-]+)@([\w\-]+)((\.(\w){2,3})+)$ 
```

有更好的吗？

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2013-04-23T11:23:22.640

> 电子邮件地址：RFC 2822 格式
> 匹配普通电子邮件地址。不检查顶级域。
> 需要打开“不区分大小写”选项。

```
[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])? 
```

用法 ：

```
bool isEmail = Regex.IsMatch(emailString, @"\A(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?)\Z", RegexOptions.IgnoreCase); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-23T11:24:02.240

第一个选项（因为投掷而不好，但 MS 会为你工作）：

```
bool IsValidEmail(string email)
{
    try {
        var mail = new System.Net.Mail.MailAddress(email);
        return true;
    }
    catch {
        return false;
    }
} 
```

第二个选项是阅读[我知道如何验证电子邮件地址，直到我阅读 RFC](http://haacked.com/archive/2007/08/21/i-knew-how-to-validate-an-email-address-until-i.aspx)和[RFC 规范](http://ex-parrot.com/~pdw/Mail-RFC822-Address.html)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-23T11:24:01.037

此 C# 函数使用正则表达式来评估传递的电子邮件地址在语法上是否有效。

```
public static bool isValidEmail(string inputEmail)
{
   string strRegex = @"^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}" +
         @"\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\" + 
         @".)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$";
   Regex re = new Regex(strRegex);
   if (re.IsMatch(inputEmail))
    return (true);
   else
    return (false);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-24T13:45:01.710

更新了 2019 年的答案。

Regex 对象对于 Matching 函数是线程安全的。知道这一点并且存在一些性能选项或文化/语言问题，我提出了这个简单的解决方案。

```
public static Regex _regex = new Regex(
    @"^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$",
    RegexOptions.CultureInvariant | RegexOptions.Singleline);

public static bool IsValidEmailFormat(string emailInput)
{
    return _regex.IsMatch(emailInput);
} 
```

正则表达式的替代配置：

```
public static Regex _regex = new Regex(
    @"^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$",
    RegexOptions.CultureInvariant | RegexOptions.Compiled); 
```

我发现编译只在大字符串匹配时更快，例如书籍解析。简单的电子邮件匹配会更快，只需让 Regex 进行解释即可。

[线程安全和正则表达式](https://docs.microsoft.com/en-us/dotnet/standard/base-types/thread-safety-in-regular-expressions)
[Regex 最佳实践](https://docs.microsoft.com/en-us/dotnet/standard/base-types/best-practices)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-14T04:19:12.450

我想建议`new EmailAddressAttribute().IsValid(emailTxt)`在使用 RegEx 验证之前/之后进行额外验证

记住`EmailAddressAttribute`是`System.ComponentModel.DataAnnotations namespace`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-04T06:27:28.030

电子邮件验证正则表达式

```
^[a-z0-9][-a-z0-9._]+@([-a-z0-9]+.)+[a-z]{2,5}$ 
```

或者

```
^[a-z0-9][-a-z0-9._]+@([-a-z0-9]+[.])+[a-z]{2,5}$ 
```

演示链接：

[https://regex101.com/r/kN4nJ0/53](https://regex101.com/r/kN4nJ0/53)

# c# - 在 WPF 中使用 C# 代码删除 IE 缓存和 Cookie

> ID：16167984
> 
> 赞同：5
> 
> 时间：2013-04-23T11:17:56.800
> 
> 标签：c#, wpf, internet-explorer

我在我的 WPF 应用程序中使用 WebBrowser 控件，我希望从代码中清除 IE cookie 缓存。

我试图使用以下代码

```
string[] Cookies = System.IO.Directory.GetFiles(Environment.GetFolderPath(Environment.SpecialFolder.Cookies));
foreach (string currentFile in Cookies)
{
  try
  {
    System.IO.File.Delete(currentFile);
  }

  catch (Exception ex)
  {
    MessageBox.Show(ex.Message);
  }
} 
```

这会从指定文件夹中删除文件，但是当我使用 WebBrowser 控件返回时，cookie 会重新出现，就好像它们从未被删除一样。

这可能是正确的结果，因为我假设 Environment.SpecialFolder.Cookies 文件夹位于 AppData 中，这是用户正在做什么的当前快照。

如果我打开 IE，硬删除 cookie 和缓存，我会在我的应用程序中得到预期的输出。

有没有办法在代码中执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T11:37:13.017

Microsoft 知识库文章将帮助您更好地清除整个缓存。

[参考链接](http://support.microsoft.com/kb/326201)

但是，您也可以尝试以下解决方案。

```
string[] InterNetCache = System.IO.Directory.GetFiles(Environment.GetFolderPath(Environment.SpecialFolder.InternetCache)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-06T16:04:00.220

使用以下功能可以删除特定主机名的 cookie。如果需要清除整个缓存，则应删除条件“ **if(sourceUrlName.Contains(hostEntry) && sourceUrlName.ToLower().Contains("cookie"))** ”。

```
 /// <summary>
    /// Internets the set cookie.
    /// </summary>
    /// <param name="lpszUrlName">Name of the LPSZ URL.</param>
    /// <param name="lpszCookieName">Name of the LPSZ cookie.</param>
    /// <param name="lpszCookieData">The LPSZ cookie data.</param>
    /// <returns><c>true</c> if XXXX, <c>false</c> otherwise</returns>
    [DllImport("wininet.dll", CharSet = CharSet.Auto, SetLastError = true)]
    static extern bool InternetSetCookie(string lpszUrlName, string lpszCookieName, string lpszCookieData);

    /// <summary>
    /// Internets the get cookie.
    /// </summary>
    /// <param name="lpszUrl">The LPSZ URL.</param>
    /// <param name="lpszCookieName">Name of the LPSZ cookie.</param>
    /// <param name="lpszCookieData">The LPSZ cookie data.</param>
    /// <param name="lpdwSize">Size of the LPDW.</param>
    /// <returns><c>true</c> if XXXX, <c>false</c> otherwise</returns>
    [DllImport("wininet.dll", CharSet = CharSet.Auto, SetLastError = true)]
    static extern bool InternetGetCookie(string lpszUrl, string lpszCookieName, StringBuilder lpszCookieData, ref int lpdwSize);

    /// <summary>
    /// Finds the first URL cache entry.
    /// </summary>
    /// <param name="lpszUrlSearchPattern">The LPSZ URL search pattern.</param>
    /// <param name="lpFirstCacheEntryInfo">The lp first cache entry info.</param>
    /// <param name="lpdwFirstCacheEntryInfoBufferSize">Size of the LPDW first cache entry info buffer.</param>
    /// <returns>IntPtr.</returns>
    [DllImport(@"wininet",
        SetLastError = true,
        CharSet = CharSet.Auto,
        EntryPoint = "FindFirstUrlCacheEntryA",
        CallingConvention = CallingConvention.StdCall)]
    public static extern IntPtr FindFirstUrlCacheEntry(
        [MarshalAs(UnmanagedType.LPTStr)] string lpszUrlSearchPattern,
        IntPtr lpFirstCacheEntryInfo,
        ref int lpdwFirstCacheEntryInfoBufferSize);

    /// <summary>
    /// Finds the next URL cache entry.
    /// </summary>
    /// <param name="hFind">The h find.</param>
    /// <param name="lpNextCacheEntryInfo">The lp next cache entry info.</param>
    /// <param name="lpdwNextCacheEntryInfoBufferSize">Size of the LPDW next cache entry info buffer.</param>
    /// <returns><c>true</c> if XXXX, <c>false</c> otherwise</returns>
    [DllImport(@"wininet",
        SetLastError = true,
        CharSet = CharSet.Auto,
        EntryPoint = "FindNextUrlCacheEntryA",
        CallingConvention = CallingConvention.StdCall)]
    public static extern bool FindNextUrlCacheEntry(
        IntPtr hFind,
        IntPtr lpNextCacheEntryInfo,
        ref int lpdwNextCacheEntryInfoBufferSize);

    /// <summary>
    /// Deletes the URL cache entry.
    /// </summary>
    /// <param name="lpszUrlName">Name of the LPSZ URL.</param>
    /// <returns><c>true</c> if XXXX, <c>false</c> otherwise</returns>
    [DllImport(@"wininet",
        SetLastError = true,
        CharSet = CharSet.Auto,
        EntryPoint = "DeleteUrlCacheEntryA",
        CallingConvention = CallingConvention.StdCall)]
    public static extern bool DeleteUrlCacheEntry(
        IntPtr lpszUrlName);

    /// <summary>
    /// Clears the IE cache.
    /// </summary>
    /// <param name="url">The URL.</param>
    public static void ClearIECache(string url)
    {
        try
        {
            // No more items have been found.
            const int ERROR_NO_MORE_ITEMS = 259;

            string hostEntry = new Uri(url).Host;

            // Local variables
            int cacheEntryInfoBufferSizeInitial = 0;
            int cacheEntryInfoBufferSize = 0;
            IntPtr cacheEntryInfoBuffer = IntPtr.Zero;
            INTERNET_CACHE_ENTRY_INFOA internetCacheEntry;
            IntPtr enumHandle = IntPtr.Zero;
            bool returnValue = false;

            // Start to delete URLs that do not belong to any group.
            enumHandle = FindFirstUrlCacheEntry(null, IntPtr.Zero, ref cacheEntryInfoBufferSizeInitial);
            if (enumHandle == IntPtr.Zero && ERROR_NO_MORE_ITEMS == Marshal.GetLastWin32Error())
                return;

            cacheEntryInfoBufferSize = cacheEntryInfoBufferSizeInitial;
            cacheEntryInfoBuffer = Marshal.AllocHGlobal(cacheEntryInfoBufferSize);
            enumHandle = FindFirstUrlCacheEntry(null, cacheEntryInfoBuffer, ref cacheEntryInfoBufferSizeInitial);

            while (true)
            {
                internetCacheEntry = (INTERNET_CACHE_ENTRY_INFOA)Marshal.PtrToStructure(cacheEntryInfoBuffer, typeof(INTERNET_CACHE_ENTRY_INFOA));

                string sourceUrlName = Marshal.PtrToStringAnsi(internetCacheEntry.lpszSourceUrlName);
                cacheEntryInfoBufferSizeInitial = cacheEntryInfoBufferSize;

                if (sourceUrlName.Contains(hostEntry) && sourceUrlName.ToLower().Contains("cookie"))
                {
                    DeleteUrlCacheEntry(internetCacheEntry.lpszSourceUrlName);
                }

                returnValue = FindNextUrlCacheEntry(enumHandle, cacheEntryInfoBuffer, ref cacheEntryInfoBufferSizeInitial);

                if (!returnValue && ERROR_NO_MORE_ITEMS == Marshal.GetLastWin32Error())
                {
                    break;
                }
                if (!returnValue && cacheEntryInfoBufferSizeInitial > cacheEntryInfoBufferSize)
                {
                    cacheEntryInfoBufferSize = cacheEntryInfoBufferSizeInitial;
                    cacheEntryInfoBuffer = Marshal.ReAllocHGlobal(cacheEntryInfoBuffer, (IntPtr)cacheEntryInfoBufferSize);
                    returnValue = FindNextUrlCacheEntry(enumHandle, cacheEntryInfoBuffer, ref cacheEntryInfoBufferSizeInitial);
                }
            }

            Marshal.FreeHGlobal(cacheEntryInfoBuffer);
        }
        catch
        {
            //error
        }
    }

    /// <summary>
/// Struct INTERNET_CACHE_ENTRY_INFOA
/// </summary>
[StructLayout(LayoutKind.Explicit, Size = 80)]
public struct INTERNET_CACHE_ENTRY_INFOA
{
    [FieldOffset(0)]
    public uint dwStructSize;
    [FieldOffset(4)]
    public IntPtr lpszSourceUrlName;
    [FieldOffset(8)]
    public IntPtr lpszLocalFileName;
    [FieldOffset(12)]
    public uint CacheEntryType;
    [FieldOffset(16)]
    public uint dwUseCount;
    [FieldOffset(20)]
    public uint dwHitRate;
    [FieldOffset(24)]
    public uint dwSizeLow;
    [FieldOffset(28)]
    public uint dwSizeHigh;
    [FieldOffset(32)]
    public System.Runtime.InteropServices.ComTypes.FILETIME LastModifiedTime;
    [FieldOffset(40)]
    public System.Runtime.InteropServices.ComTypes.FILETIME ExpireTime;
    [FieldOffset(48)]
    public System.Runtime.InteropServices.ComTypes.FILETIME LastAccessTime;
    [FieldOffset(56)]
    public System.Runtime.InteropServices.ComTypes.FILETIME LastSyncTime;
    [FieldOffset(64)]
    public IntPtr lpHeaderInfo;
    [FieldOffset(68)]
    public uint dwHeaderInfoSize;
    [FieldOffset(72)]
    public IntPtr lpszFileExtension;
    [FieldOffset(76)]
    public uint dwReserved;
    [FieldOffset(76)]
    public uint dwExemptDelta;
} 
```

# php - AJAX-Request 结合 cURL 和 PHP 加载时间过长

> ID：16167986
> 
> 赞同：0
> 
> 时间：2013-04-23T11:17:57.753
> 
> 标签：php, ajax, curl, pdo

我正在使用 xampp 在我的本地机器上工作，并且所有其他 ajax 请求都运行得非常好而且很快。我当前的应用程序需要**21 秒**来加载 3.5 KB 的数据。

如果你问我，这有点慢。那么我的软件在做什么呢？

该软件有 4 个单选按钮。用户选择一个，然后创建一个 ajax 请求

```
var radio = $('input[name="selection"]:checked').val();
var hidden = $('#hiddenFive').val();
$.ajax
({  
    type: 'GET',
    url: 'curl.php',
    data: {type: radio, region: 'Hampshire', hidden: hidden},
    success: function(response, textStatus, XMLHttpRequest) 
    {
        var obj = jQuery.parseJSON(response);
        var strin = '';
        for(var i = 0; i < obj.length; i++)
        {
            strin += "<b>Name of " + radio + ": </b>" + obj[i].name + "<b> | Region: </b>" + obj[i].region + "<br>";    
        }
        $('#result').html(strin);
    },
    error: function(response, status, error)
    {
        alert("Error"); 
    }
}); 
```

*数据被发送到 curl.php 站点，该站点向外部*网站发送 curl 请求。我写了外部草书，因为它在同一个文件夹中，我们应该表现得像它是外部的，我们需要`cURL`来自它的数据（你知道的作业）

所以，现在，URL 看起来像这样

```
http://localhost/htmlAssignment/5/curl.php?type=town&region=Hampshire&hidden=hiddenFive 
```

curl.php 将这些参数保存在变量中，然后将其发送到 web service.php

```
<?php
$type = $_GET['type'];
$region = $_GET['region'];
$hidden = $_GET['hidden'];
$url = "http://localhost/htmlAssignment/webservice.php?type=" . $type . "&region=" .$region. "&hidden=".$hidden;
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
$output = curl_exec($ch);
curl_close($ch); 
echo $output;
?> 
```

webservice.php

检查隐藏值是否为 hiddenFive，什么是正确的，然后调用 db-function

```
if(isset($_GET['type']) && isset($_GET['region'])  && $_GET['hidden'] == 'hiddenFive')
{
    $array = array();
    $region = $_GET['region'];
    $type = $_GET['type'];
    $array = $db->getMultiDataPOI($type, $region);
    echo json_encode($array);           
} 
```

我的 db 函数看起来像这样

```
function getMultiDataPOI($type, $region)
    {
        $getMultiSQL = "SELECT ID, name, type, country, region, lon, lat, description FROM pointsofinterest WHERE type = :type AND region = :region";
        $getMultiPrepare = $this->prepare($getMultiSQL);
        $getMultiPrepare->bindParam(':type', $type);
        $getMultiPrepare->bindParam(':region', $region);
        $getMultiPrepare->execute();
        $getMultiResult = $getMultiPrepare->fetchAll();
        return $getMultiResult;
    } 
```

在这 20 秒之后，数据会正常显示并且应该正常显示，但需要 20 秒，如果你问我有什么奇怪的。这么长的时间这里可能是什么问题？正如我所说，我正在使用 xampp 和任何其他使用相同 web 服务加载的 AJAX 请求在 localhost 上工作。为什么这需要这么长时间？

如果 FireBug 有帮助，这里是一个屏幕。我希望你能读到它。

![FireBugScreen of Request](https://i.imgur.com/HRGRqj2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:28:22.390

根据我的经验，我发现 localhost 经常会导致奇怪的行为，例如您所描述的。您是否只是尝试将 localhost 的引用更改为 127.0.0.1 并使用它？本地主机仍然必须进行名称查找，这有时可能从您的主机文件中不可靠，请参阅[What is the difference between 127.0.0.1 and localhost](https://stackoverflow.com/questions/7382602/difference-between-127-0-0-1-and-localhost)

此外，我会尝试直接打开 PHP 服务文件，即您在 AJAX 中调用的文件，以确保它能够自行快速加载。由于它正在执行 SQL 查询，因此您的查询甚至您的 MySQL 配置可能会导致您出现一些滞后。

另一方面，我会谨慎使用您的 webserver.php 文件。您的所有请求数据都不会被过滤并直接进入您的数据库，这会使您的应用程序对 SQL 注入开放。

# solr - dataimporthandler 不在 solr 云上分发文档

> ID：16167987
> 
> 赞同：1
> 
> 时间：2013-04-23T11:17:58.177
> 
> 标签：solr, solrcloud

我们使用 4 个分片 solr 云，当我们尝试使用 dataimporthandler 导入数据时，它不会在所有 4 个分片中分发文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-07T18:56:22.037

据我了解：

您需要使用如下数据导入查询自己定义分片：

```
SELECT * from albums where id % 3 = 0
SELECT * from albums where id % 3 = 1
SELECT * from albums where id % 3 = 2 
```

参考：[http ://solr.pl/en/2010/12/27/data-import-handler-%E2%80%93-sharding-2/](http://solr.pl/en/2010/12/27/data-import-handler-%E2%80%93-sharding-2/)

# delphi - C++ Builder 和 chm 帮助文件

> ID：16167988
> 
> 赞同：3
> 
> 时间：2013-04-23T11:18:05.613
> 
> 标签：delphi, c++builder, vcl, chm

我正在尝试将 CHM 帮助文件实现到我用 C++ Builder 编写的应用程序中，但我总是得到“没有安装上下文相关的帮助”。

我添加了这些行：

```
#include "HtmlHelpViewer.hpp" 
```

OnCreate.. (Form1)

```
Application->HelpFile = ExtractFilePath(Application->ExeName) + "myfile.chm"; 
```

我已经通过对象检查器设置了 HelpContext 并且还尝试手动调用

```
Application->HelpContext(170); 
```

但是，它不起作用。该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T11:21:59.407

您需要强制链接器包含代码。仅仅包含头文件是不够的。

尝试将此添加到您的代码中：

```
#include "HTMLHelpViewer.hpp"
#pragma package(smart_init)
#pragma link "HTMLHelpViewer" 
```

我假设您不需要添加`Vcl`单位范围名称，因为您没有在问题的代码中这样做。但如果您确实需要这样做，代码将如下所示：

```
#include "Vcl.HTMLHelpViewer.hpp"
#pragma package(smart_init)
#pragma link "Vcl.HTMLHelpViewer" 
```

* * *

从您的评论和这个[Embarcadero 论坛主题](https://forums.embarcadero.com/message.jspa?messageID=413904)来看，我怀疑您使用的版本需要单位范围名称。您可能已经指定了单元范围别名，这意味着您可以在头文件中省略单元范围名称`#include`。但似乎您不能在`#pragma link`指令中省略单位范围名称。

# symfony1 - Symfony 1.4 中用户提交的表单数据的重复查找和潜在修改

> ID：16167992
> 
> 赞同：1
> 
> 时间：2013-04-23T11:18:14.883
> 
> 标签：symfony1, symfony-1.4

我的应用程序有 3 种主要对象类型：Person、Home 和 Office。这些对象中的每一个都有一个与之关联的位置（纬度、经度和地址），因此每个表（个人、家庭和办公室）都包含一个 location_id 列，映射到位置表中的位置。

Person、Home 和 Office 都是用一个简单的表单创建的。在这些对象创建表单（PersonForm.class.php、HomeForm.class.php 和 OfficeForm.class.php）中的每一个中，我都嵌入了一个 LocationForm（LocationForm.class.php）。

一切都很好，用户提交关于个人、家庭和/或办公室的数据（包括位置），并且数据正确保存在数据库中。

因此，我的问题是：我的多个主要对象都可以拥有/共享完全相同的位置（lat、lng 和地址）。例如，办公室和家庭，或者个人和家庭都可以共享相同的位置。也就是说，每当创建对象时，都会将一个新位置插入到位置表中。

在用户提交表单之后，但在将其保存到数据库之前，我想查询 Location 表以查找匹配项（已提交 Location ），如果匹配，则将已经存在的 Location 与这个新创建的 Person 相关联，家庭或办公室对象。

我读过的大部分内容都指向覆盖对象的 save() 函数，但如果是这种情况，并且我正在覆盖 Location 模型中的 save() 函数并且我找到了匹配项，那么我该如何创建与正在创建/保存过程中的新对象关联（插入的对象应获取结果位置匹配的 location_id）？

# windows - 如何在 Tkinter 窗口中打开 exe 文件

> ID：16167995
> 
> 赞同：1
> 
> 时间：2013-04-23T11:18:23.307
> 
> 标签：windows, python-2.7, tkinter, virtual-machine

我正在尝试打开记事本、photoshop 等应用程序。**在**Python 中的 Tkinter 窗口内。我尝试使用**os.sytem()**但它独立打开（不在 Tkinter 窗口内）。

我对此进行了很多搜索，但没有得到任何解决方案。任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:45:01.390

你不能做你想做的事。在 Tkinter 窗口中打开外部程序是不可能的。

虽然如果应用程序被设计为嵌入式，则可以将*一些*基于 X11 的应用程序嵌入到基于 X11 的 Tkinter 应用程序中，但对于非基于 X11 的应用程序，您将永远无法做到这一点。