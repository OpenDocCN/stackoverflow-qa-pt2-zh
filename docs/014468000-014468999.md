# StackOverflow 问答 14468000-14468999

# c++ - C 冒泡排序：排序后的数组丢失最大的数据块并被内存地址替换

> ID：14468001
> 
> 赞同：1
> 
> 时间：2013-01-22T21:06:48.127
> 
> 标签：c++, arrays, pointers, swap, bubble-sort

我得到的输出：

*   基础数组
*   7290 5184 6174 8003 7427 2245 6522 6669 8939 4814
*   排序数组
*   -33686019 2245 4814 5184 6174 6522 6669 7290 7427 8003
*   按任意键继续 。. .

我不知道这个数字 -33686019 是从哪里来的。我已经发布了所有代码，因为我真的不知道是什么原因造成的。

冒泡排序：

```
#include "Sorting.h"

double Sorting::bubbleSort( int size )
{
    //Make a copy of our "master key" array for us to sort
    int *toSort = whichArray(size);
    int *theArray = copyArray( toSort, size );  
    double time;

    cout << "The base array" << endl;
    for(int i = 0; i < 10; i++ )
    {
        cout << theArray[i] << endl;
    }

    //The sort

    //Begin time
    timer.startClock();

    bool swapped = true;
    int temp = 0;

    while( swapped == true )
    {
        swapped = false;

        for( int i = 0; i < size; i++ )
        {
            if( theArray[i+1] < theArray[i] )
            {
                /*temp = theArray[i+1];

                theArray[i+1] = theArray[i];
                theArray[i] = temp;*/

                swap(theArray[i + 1], theArray[i]);
                swapped = true;
            }
        }
    }

    time = timer.getTime();

    cout << "The Sorted array" << endl;
    for(int x = 0; x < 10; x++ )
    {
        cout << theArray[x] << endl;
    }

    return time;
} 
```

排序类：

```
#ifndef SORTING_H
#define SORTING_H

#include <stdio.h>
#include <stdlib.h>
#include <time.h>
//^For random numbers
#include <iostream>

#include "TimerSystem.h"
#include <iomanip>

using namespace std;

class Sorting
{
private:
    //The below pointers will point to arrays that hold the data sets
    int *n10;
    int *n100;
    int *n1000;
    int *n10000;

    TimerSystem timer;

    double runs[4][4];

    public:
    Sorting();
    ~Sorting(){};

    //Testing functions
    void printArray();
    void print2DArray();
    void dryRun();

    //Data manging and creating
    int randomNumGen();
    int* arrayGen( int size );//Returning a pointer
    int* copyArray( int *toCopy, int size );//Makes an array that the program can sort. The leaves the original array intact
    int* whichArray( int size );
    void datasetRun( int whichSort );//Does three runs of a sort and gets the average for all 4 array sizes

    //Sorts
    double bubbleSort( int size );
};

#endif 
```

其他调用函数：

```
#include "Sorting.h"

int Sorting::randomNumGen()
{
    int randomNumber = rand() % 10000 + 1;

    if( randomNumber > 10000 || randomNumber < 0 )
    {
        system("pause");
    }

    return randomNumber;
}

int* Sorting::arrayGen( int size )
{
    int *theArray= new int[size];

    for( int i = 0; i < size; i++ )
    {
        theArray[i] = randomNumGen();
    }

    return theArray;
}

int* Sorting::copyArray( int *toCopy, int size )
{
    int *newArray = new int[size];

    for( int i = 0; i < size; i++ )
    {
        newArray[i] = toCopy[i];
    }

    return newArray;
}

int* Sorting::whichArray( int size )
{
    if( size == 10 )
    {
        return n10;
    }
    else if( size == 100 )
    {
        return n100;
    }
    else if( size == 1000 )
    {
        return n100;
    }
    else if( size == 10000 )
    {
        return n1000;
    }

    return NULL;
}

void Sorting::datasetRun( int whichSort )
{
    //1: Bubble 
    //2: Insertion
    //3: Selection
    //4: Shell 
    //5: Quick
    //6: Merge

    int col = 0;
    int row = 0;
    int set = 10;
    bool runDone = false;

    if( whichSort == 1 )
    {
        for( int row = 0; row < 4; row++ )
        {
            for( int col = 0; col < 4; col++ )
            {
                runs[row][col] = bubbleSort( set );
            }

            //set = set * 10;
        }
    }
}

//Constructor
Sorting::Sorting()
{
    //For the random number generator
    srand( time(NULL) );

    n10 = arrayGen( 10 );
    n100 = arrayGen( 100 );
    n1000 = arrayGen( 1000 );
    n10000 = arrayGen( 10000 );
}

//Functions for testing
void Sorting::printArray()
{
    int size = 10000;

    for( int i = 0; i < size; i++ )
    {
        cout << n10000[i] << " ";
    }
}

void Sorting::print2DArray()
{
    for( int height = 0; height < 4; height++ )
    {
        for( int width = 0; width < 4; width++ )
        {
            cout << runs[height][width] << endl;
        }

        cout << "\n\n";
    }
} 
```

主要功能：

```
#include "Sorting.h"

void main()
{
    //Makes the numbers easily readable
    cout.setf(ios::fixed | ios::showpoint);
    cout.precision(16);

    Sorting theSorting;

    //theSorting.printArray();

    //cout << theSorting.bubbleSort( 10 ) << endl;

    //theSorting.datasetRun(1);
    //theSorting.print2DArray();

    theSorting.bubbleSort( 10 );

    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T21:11:02.973

以下位不正确：

```
for( int i = 0; i < size; i++ )
{
    if( theArray[i+1] < theArray[i] ) 
```

它正在访问超出数组边界的一个。`for`循环应该是：

```
for( int i = 0; i < size - 1; i++ ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T21:11:05.790

看这个：

```
for( int i = 0; i < size; i++ )
    {
        if( theArray[i+1] < theArray[i] ) 
```

theArray[i+1] 在循环的最后一次迭代中未定义。

将循环的延续表达式从更改`i < size`为`i < (size-1)`

# modernizr - 我可以使用modernizr 来填充以支持http DELETE / PUT 动词吗？

> ID：14468004
> 
> 赞同：0
> 
> 时间：2013-01-22T21:06:55.537
> 
> 标签：modernizr

我正在尝试支持当前与 IE8 相关的用户群，并注意到我不能使用“删除”或“放置”动词。使用modernizr 可以让我在IE8 中执行此操作吗？如果不是的话，如果有的话，什么库可以让我做到这一点，而无需像在帖子数据中传递动词这样的变通方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:49:18.137

根据对[这个（旧）SO question 的回答](https://stackoverflow.com/questions/165779/are-the-put-delete-head-etc-methods-available-in-most-web-browsers)，如果您通过 xmlHttpRequest 对象（即 Ajax 调用）使用 DELETE 和 PUT，您应该不会遇到问题。

此外，[xmlHttpRequest 的维基百科页面](http://en.wikipedia.org/wiki/XMLHttpRequest)还声明从 IE7 开始支持所有动词。

*直接的表单提交不*支持它们，但在这种情况下并没有太多需要使用它们；POST 应该足够了。但是对于 Ajax 调用，你应该没问题。

我建议在 IE8 中尝试确认，但我认为你不会有问题。

鉴于此，我认为您不需要 Modernizr 来帮助您，除非您需要 IE6 支持。但可以肯定的是，我查看[了 Modernizr 文档](http://modernizr.com/docs/)，其中列出了它所做的所有功能检测，但我看不到任何关于 http 动词的信息。即使 Modernizr 确实检测到了它，你仍然需要一个 polyfill 来实际修复它，而且我不知道有什么能做到这一点。.... 所以这是一件好事，你可能不需要它，那么。

# c++ - QWidget 在鼠标按下事件后没有响应。

> ID：14468008
> 
> 赞同：3
> 
> 时间：2013-01-22T21:07:10.123
> 
> 标签：c++, qt, qt4, qwidget, qt5

我试图让鼠标按下事件与我创建的小部件一起使用，但每次单击小部件时，窗口都会停止响应，我必须终止程序。有谁知道如何解决这个问题以及如何改变颜色？

这是 .h 和 .cpp 文件。

.cpp 文件：

```
#include "iconwidget.h"
#include <QPaintEvent>
#include <QPainter>
#include <QPainterPath>

iconWidget::iconWidget(QWidget *parent) :
    QWidget(parent)
{
    this->resize(ICON_WIDGET_WIDTH,ICON_WIDGET_HEIGHT);
    pressed = false;
}

void iconWidget::paintEvent(QPaintEvent *event)
{
    QRect areatopaint = event->rect();
    QPainter painter(this);
    QBrush brush(Qt::black);
    QPointF center = this->rect().center();
    QPainterPath icon;
    icon.addEllipse(center,20,20);
    painter.drawPath(icon);
    painter.fillPath(icon, brush);

    if (pressed) {
        brush.setColor(Qt::red);
    }
}

void iconWidget::mousePressEvent(QMouseEvent *event)
{
    pressed = true;
    update();
    iconWidget::mousePressEvent(event);
} 
```

.h 文件：

```
#define ICONWIDGET_H

#include <QWidget>

#define ICON_WIDGET_WIDTH 45
#define ICON_WIDGET_HEIGHT 45

class iconWidget : public QWidget
{
    Q_OBJECT

public:
    explicit iconWidget(QWidget *parent = 0);
    void paintEvent(QPaintEvent *event);
    bool pressed;

protected:
    void mousePressEvent(QMouseEvent *event);
};

#endif // ICONWIDGET_H 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T21:18:03.047

你调用`mousePressEvent()`了一个无休止的递归。你应该改变这一行：

```
iconWidget::mousePressEvent(event); 
```

在您的`mousePressEvent`功能中：

```
QWidget::mousePressEvent(event); 
```

# iis-7 - IIS 7 - URL 重写 - 我是否在正则表达式中包含 http 或 https 协议？

> ID：14468014
> 
> 赞同：0
> 
> 时间：2013-01-22T21:07:46.717
> 
> 标签：iis-7, url-rewriting, iis-7.5

在 IIS 7.5 (Win2k8 R2) 中，我正在尝试为这些请求创建一个新规则：

```
http://www.domain.com/userprofile
https://www.domain.com/userprofile
http://domain.com/userprofile
https://domain.com/userprofile 
```

重写为：

```
http://www.domain.com/users/?username=userprofile
(or whatever the protocol/domain is) 
```

我写的正则表达式是：

```
^(http|https)://(www\.domain.com|domain\.com)/([a-zA-Z0-9-]{6,35}) 
```

重写是：

```
{R:1}://{R:2}/users/?username={R:3} 
```

但这不起作用。是因为我不需要协议吗？我还添加了请求不是文件或目录的条件。

另外，每次更改规则时是否需要重新启动 IIS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:18:13.407

当您想要重写这些请求时，您不必查看协议或域名。在您的情况下并不重要，因为您只想重写路径。

以下规则应该有效：

```
<rule name="Rewrite user profiles">
    <match url="([a-zA-Z0-9-]{6,35})" />
    <action type="Rewrite" url="/users/?username={R:1}" />
</rule> 
```

更改规则时不必重新启动 IIS。IIS 将在 web.config 被修改时自动重启应用程序池，从而重新加载规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T00:23:43.130

@Marco 几乎是正确的，但最终的工作方式如下：（我在 IIS 管理器中使用了 URL 重写表单）

正则表达式：

```
^([a-zA-Z0-9-]{6,35})(/?)$ 
```

条件：

```
Not a file
Not a directory 
```

这会强制匹配直接在域之后开始，并且必须是第一个目录，或者没有尾随“/”。根据正则表达式，匹配必须介于 6 到 35 个字符之间，字母数字带有“-”

# wcf - 如何配置 WCF 服务以结束 wse3 客户端生成的错误“收件人不理解 wcf 标头安全性”？

> ID：14468020
> 
> 赞同：2
> 
> 时间：2013-01-22T21:08:17.703
> 
> 标签：wcf, soap, x509, wse3.0

我正在将 Web 服务从 .Net 1.1 升级到 WCF。将连接到我的新 Web 服务的客户端本身就是一个 Web 服务，并且是使用 WSE3 设计的。我无法控制该网络服务，它不会改变。

牢记这一点，我需要保持相同的服务端点和安全性相同，因此我使用 wscf.blue（首先使用 wsdl）设计了这个 WCF 服务，这很有帮助。如果客户端注释掉他们的 X509 消息加密代码，我们的 web 服务可以很好地通信。但是，如果他们保留 X509 加密，他们会收到以下消息：

**“名称空间'http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd'的标题'Security'未被此收件人理解消息，导致消息不被处理。这个错误一般表示这个消息的发送方启用了接收方无法处理的通信协议。请确保客户端绑定的配置与服务的绑定一致。: at System .Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse（SoapClientMessage 消息，WebResponse 响应，流 responseStream，布尔 asyncCall）在 System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke（字符串方法名，对象 [] 参数）“**

在我的服务中，我向自定义端点行为添加了一个消息检查器，并且 AfterReceiveRequest 被触发，但它永远不会到达实际的 Web 服务的方法调用。

我假设我的 web.config 需要更改，但我不知道将其更改为什么以便旧版 WSE3 Web 服务能够理解。任何想法都会有所帮助：

```
<configuration>    
<system.web>
    <compilation debug="true" targetFramework="4.0" />
</system.web>
  <system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior name="ServiceBehaviorUnsecure">
      <serviceCredentials>
        <serviceCertificate storeLocation="LocalMachine"     x509FindType="FindByThumbprint" findValue="xx 11 bb xx as bd ef ag r2 xx xx xx xx xx xx    12    34 56 78 90"/>
      </serviceCredentials>
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="true"/>          
    </behavior>
  </serviceBehaviors>      
  <endpointBehaviors>
    <behavior name="TestContextEndpointBehavior">
      <TestContextEndpointBehaviorExtensionElement />
    </behavior>
  </endpointBehaviors>      
</behaviors>
<bindings>
  <basicHttpBinding>
    <binding name="WebSoap" closeTimeout="00:01:00" openTimeout="00:01:00"
        receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
        bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
        maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
        messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
        useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
          maxBytesPerRead="4096" maxNameTableCharCount="16384" />         

      <security mode="None" />
    </binding>
  </basicHttpBinding>
      </bindings>
<services>     
  <service name="MyWebservice.MyNamespace.WebSoap"     behaviorConfiguration="ServiceBehaviorUnsecure">       
    <endpoint address="http://localhost:6380/WebSoap.svc" behaviorConfiguration="TestContextEndpointBehavior"
        binding="basicHttpBinding" bindingConfiguration="WebSoap"
        contract="IWebSoap" />

    <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
  </service>
</services>
<extensions>
  <behaviorExtensions>
    <add name="TestContextEndpointBehaviorExtensionElement"
         type="MyWebService.TestContextEndpointBehaviorExtensionElement,     MyLibrary,     Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
  </behaviorExtensions>
</extensions>
  </system.serviceModel>
</configuration> 
```

******编辑* *******

 ****我能够从客户端获取一部分代码，了解他们正在做什么来连接以保护旧 Web 服务中的 soap 标头。我还发现了一个[网页](http://msdn.microsoft.com/en-us/library/ms730049.aspx)，它应该会有所帮助，但它留下了更多问题。它声明选择身份验证模式。一种选择是 AnonymousForCertificate 和另一个 Mutual Certificate。如果您在页面上选择其中一个选项进行查看，它会引导您进入枚举类型，而其中一个似乎可能是 CertificateOverTransport。如果这三个中的任何一个有帮助，我都不会。例如，我们使用 SSL，因此 CertificateOverTransport 似乎可行，但它说它需要 X.509 版本 3 证书。我怎么知道 X509 的版本？也许下面的代码会帮助你帮助我：**

```
 public bool EncryptAndSignMessage(string sSigningMachine, string sEncryptingMachine, ref SoapContext scSoapContext)
    {
       //sSigningMachine is the WSE client's machine name and sEncryptingMachine is my WCF's IIS server machine.

   //For breavity, removed code to get byHasCodeSigning and byHashCodeEncrypting values. These are essentially the thumprints for the WSE's server's certificate and my WCF's server certificate.

                    X509SecurityToken securityTokenForSigning = this.GetSecurityTokenForSigning(byHashCodeSigning);
        X509SecurityToken securityTokenForEncrypting = this.GetSecurityTokenForEncrypting(byHashCodeEncryption);

        // SPECIFY TIME-TO-LIVE (TTL) FOR SOAP MESSAGE TO MINIMIZE RISK OF SOMEONE INTERCEPTING AND REPLAYING IT 
        scSoapContext.Security.Timestamp.TtlInSeconds = 60;

        // ADD THE CLIENT'S X.509 CERTIFICATES TO THE WS-SECURITY SOAP HEADER 
        scSoapContext.Security.Tokens.Add(securityTokenForSigning);
        scSoapContext.Security.Tokens.Add(securityTokenForEncrypting);

        // CREATE NEW INSTANCE OF THE MESSAGE SIGNATURE CLASS AND ADD THE DIGITAL SIGNATURE TO THE WS-SECURITY SOAP HEADER 
        MessageSignature sig = new MessageSignature(securityTokenForSigning);
        scSoapContext.Security.Elements.Add(sig);

        // CREATE NEW INSTANCE OF THE ENCRYPTED DATA CLASS AND ADD THE SECURITY TOKEN FOR ENCRYPTING TO THE WS-SECURITY SOAP HEADER 
        EncryptedData enc = new EncryptedData(securityTokenForEncrypting);
        scSoapContext.Security.Elements.Add(enc);
        return true;
    }

} 
```**

# html - 如何在表单文本字段中设置最大数量

> ID：14468021
> 
> 赞同：-1
> 
> 时间：2013-01-22T21:08:18.160
> 
> 标签：html, forms, textbox

我在表单中有一个文本框，我想将允许的最大数值设置为 50。这可以通过 HTML 实现吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T21:10:45.137

是的。使用 maxlength 属性。

`<input type="text" size="10" maxlength="50">`

编辑：我误解了你的问题。如果您希望它最大数量为 50 并且它不接受任何其他内容，您应该只检查输入中接受的值，如果它大于 50，您可以做一些事情（清除文本框，抛出错误，应用错误类等）。也许写一个函数来判断它是否是一个数字并且 <= 50？

```
function isValidNum(n) {
  if (!isNaN(parseFloat(n)) && isFinite(n) && n<=50) 
      //do something
} 
```

从[这里](https://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric/1830844#1830844)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T21:11:19.620

我认为您正在寻找 maxlength 属性：

```
<input type="text" maxlength="10"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T21:12:08.873

你可以在 onblur 事件中使用 javascript 来完成

```
function txtOnBlur(txt){
    if (txt.value >50){
         txt.value = "";
         alert("No values over 50");
     }
} 
```

添加添加 onBlur="javascript:txtOnBlur(this);" 属性到您的文本框。

如果是字符长度，只需添加 maxlenght 属性（maxlength="50"）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T00:30:36.430

据我了解，您正在寻找的更像是这样的：[将输入框限制为 0-100](https://stackoverflow.com/questions/1384074/limit-input-box-to-0-100)

[Crimson](https://stackoverflow.com/users/140970/crimson)提交的答案听起来与您需要的代码完全一致。根据您的需要进行编辑和改进，它将变为：

```
<script>
function handleChange(input) {
  if (input.value < 0) input.value = 0;
  if (input.value > 50) input.value = 50;
}
</script> 
```

你的文本框看起来像这样：

```
<input type="text" onChange="handleChange(this)" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T00:41:36.733

你要这个：

```
 <input type="number" min="1" max="50" /> 
```

因此 51 太高了。50没问题。这是一个 HTML5 属性。

`Maxlengh`将允许 50 个字符，即后面有 49 个零的数字。我不认为这是你的意思。 `Max`将允许输入的值不高于指定值。

您仍然需要在服务器端验证它。

# javascript - 检查 JS 变量是否以数字开头的最快方法

> ID：14468030
> 
> 赞同：1
> 
> 时间：2013-01-22T21:09:12.630
> 
> 标签：javascript

我正在使用一个对象作为哈希表，并且我已经将常规属性和整数作为键填充到其中。

我现在有兴趣计算此对象中的键数，这些键是数字，但显然 a`for (x in obj) { if (typeof x === "number") { ... } }`不会产生我想要的结果，因为所有键都是字符串。

因此，我确定如果键的第一个字符是数字，那么它必须是数字就足够了，因此我不关心键“3a”是否“错误地”确定为数字。

鉴于这种放松，我想​​我可以像这样检查它

```
for (x in obj) {
  var charCode = x.charCodeAt(0);
  if (charCode < 58 && charCode > 47) { // ascii digits check
     ...
  }
} 
```

从而避免使用正则表达式`parseInt`等。

这行得通吗？`charCodeAt`是 JS 1.2 所以这应该是防弹的，是吗？

提示：我希望看到一个 jsperf 将我的函数与每个人提出的函数进行比较。:) 我会自己做，但 jsperf 让我很困惑

更新：感谢您启动 JSPerf，它证实了我希望该`charCodeAt`函数将执行一段非常快速的代码，读取字符的 int 值。其他方法涉及解析。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T21:22:12.207

`parseInt(x, 10)`将正确解析字符串中的前导正数或负数，所以试试这个：

```
function startsWithNumber(x) {
    return !isNaN(parseInt(x, 10));
}

startsWithNumber('123abc'); // true
startsWithNumber('-123abc'); // true
startsWithNumber('123'); // true
startsWithNumber('-123'); // true
startsWithNumber(123); // true
startsWithNumber(-123); // true
startsWithNumber('abc'); // false
startsWithNumber('-abc'); // false
startsWithNumber('abc123'); // false
startsWithNumber('-abc123'); // false 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T21:18:04.560

这个问题具有误导性，因为很难说出*变量*的名称，但在示例中您正在处理对象属性（当然是某种变量......）。在这种情况下，如果您只需要知道它是否以数字*开头*，那么最好的选择可能是`parseInt`. 它将返回`NaN`任何不以数字开头的字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T21:25:58.650

为什么要推测什么时候[可以测量](http://jsperf.com/is-string-a-number)。在 Chrome 上，您的方法似乎是最快的。在我的测试运行中，提议的替代方案都落后了大约 60%。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T21:13:15.253

您也可以使用`isNaN(x)`或`isFinite(x)`- 看到[这个 SO question](https://stackoverflow.com/questions/1352577/check-that-variable-is-a-number?rq=1)

# c++ - GLFW - 带有 OpenGL 摄像头的 Mac OS X 10.7 上的 glfwSetMousePos 错误

> ID：14468039
> 
> 赞同：5
> 
> 时间：2013-01-22T21:09:38.603
> 
> 标签：c++, macos, opengl, opengl-3, glfw

我一直在关注[http://opengl-tutorials.org](http://opengl-tutorials.org)上的教程，到目前为止它们都很棒（我在 Mac 上，所以我不得不使用 OpenGL 3.2 和 GLSL 1.50 而不是 OpenGL 3.3 和 GLSL 3.30）。到目前为止，教程的唯一问题是使用 3D 相机教程（教程 6：键盘和鼠标），当我移动鼠标时，我没有得到任何旋转，如果我这样做，它只会很慢向下方向；即使我向任何方向移动鼠标。

我已经编译了给定的代码（OpenGL 2.1 和 3.x）并手工编写，这仍然存在这个错误。我不知道为什么会发生这种情况。这可能是 GLFW、Mac OS X 或其他东西的错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-11T10:05:09.910

我知道这是一个很老的问题，但我有同样的问题，所以它可能会有所帮助。我已经从网站下载了代码，并且在 common/controls.cpp 中评论了这一行：

```
glfwSetMousePos(1024/2, 768/2); 
```

显然，在带有 MacOS 的 GLFW 中存在一个错误，该指令无法正常工作。希望他们在较新的版本中修复它，但我还没有测试它。

附带说明一下，注释此行将使教程正常工作，但在夹紧垂直摄像机角度时可能会遇到一些问题：如果将鼠标移过夹紧点（例如向上），鼠标位置将不断更新，当您向下移动鼠标，您将不得不等到它到达夹紧点，然后相机再次移动。

[编辑] 这是完整的修改代码

```
// Reset mouse position for next frame
// EDIT : Doesn't work on Mac OS, hence the code below is a bit different from the website's
//glfwSetMousePos(1024/2, 768/2);

// Compute new orientation
horizontalAngle = 3.14f + mouseSpeed * float( 1024/2 - xpos );
verticalAngle   = mouseSpeed * float( 768/2 - ypos ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-03-16T08:41:14.400

正如[GLFW3 的文档](https://www.glfw.org/docs/3.3/group__input.html#ga04b03af936d906ca123c8f4ee08b39e7)中提到的那样：

> “窗口必须有输入焦点。”</p>

所以你应该打电话`glfwSetCursorPos`直到窗口有输入焦点！这不是带有 MacOS 的 GLFW 中的错误！

代码应该是这样的：

```
 bool firstMouse = true;

    float centerX = (float)mWidth / 2, centerY = (float)mHeight / 2;

    GLFWwindow* mWindow;

    void mouse_callback(GLFWwindow *window, double xPos, double yPos) {
      if (firstMouse) {
        // why here?
        // As
        // https://www.glfw.org/docs/3.3/group__input.html#ga04b03af936d906ca123c8f4ee08b39e7
        // mention :
        // "The window must have input focus."
        glfwSetCursorPos(mWindow, centerX, centerY);
        firstMouse = false;
      }

      // ...
    }

    void main() {
       // ...

       glfwSetCursorPosCallback(mWindow, mouse_callback);

       // ...
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-17T20:02:57.803

OS X 10.9 上的 GLFW 3 仍然存在同样的问题。

为了禁用光标并因此将其捕获在窗口中，我在创建窗口后添加了它。

```
glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_DISABLED); 
```

`//glfwSetCursorPos(window, 1024 / 2, 768 / 2);`然后我在controls.cpp中注释掉了

现在鼠标移动起作用了。但是，似乎从某个角度查看立方体时，左右移动鼠标时视图会旋转，而从其他角度来看，视图会左右移动。奇怪的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-23T10:39:57.417

对于 OSX 上的 GLFW2，在 glfwCreateWindow( ...,...,) 之后的 tutorial-XX.cpp 中添加这一行

```
glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_DISABLED); 
```

然后在 common/controls.cpp 中创建两个全局变量

```
double xpos_old, ypos_old; 
```

最后注释掉 glfwSetCursorPos(window, 1024/2, 768/2); 并将角度的计算更改为新设置，其想法是获得旧鼠标位置和新鼠标位置之间的差异。最终代码应如下所示：

```
// Reset mouse position for next frame
// glfwSetCursorPos(window, 1024/2, 768/2);
// Compute new orientation

horizontalAngle += mouseSpeed * float( xpos_old - xpos );
verticalAngle   += mouseSpeed * float( ypos_old - ypos );
xpos_old = xpos;
ypos_old = epos; 
```

这在我的 Mac 上效果很好！干杯！

# asp.net - 如何解决“块体没有以 0 大小的块正确终止。”？

> ID：14468042
> 
> 赞同：4
> 
> 时间：2013-01-22T21:09:52.110
> 
> 标签：asp.net, iis, rss

我有一个 RSS 提要。当我打开 Fiddler Web Debugger 浏览提要时，Fiddler 向我抛出此错误：

```
Chunked body did not terminate properly with 0-sized chunk. 
```

触发错误的服务器的响应如下所示：

```
HTTP/1.1 200 OK
Date: Tue, 22 Jan 2013 21:00:49 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
X-AspNet-Version: 2.0.50727
Cache-Control: private
Content-Type: text/xml; charset=utf-8
Content-Length: 30985

<rss version="2.0">
  <channel>
  ... etc 
```

RSS 的所有者在尝试将站点提交给 RSS 聚合器时报告了问题。

我试图在这里验证 rss：http: [//validator.w3.org/appc/](http://validator.w3.org/appc/)。回应是这样的：

```
IncompleteRead(30985 bytes read) (IncompleteRead; misconfigured server?) 
```

但是，如果我浏览到 rss 并将代码复制到此验证器中：http: [//validator.w3.org/appc/#validate_by_input](http://validator.w3.org/appc/#validate_by_input)，那么一切都会正确验证。

我该如何纠正？这是一个在 IIS6 中的 .NET 3.5 上运行的 C# ASP.NET webforms 项目。

## 更新

看来我错误地使用了 Fiddler。取消选中解码选项后，这是服务器响应：

```
HTTP/1.1 200 OK
Date: Tue, 22 Jan 2013 21:22:03 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
X-AspNet-Version: 2.0.50727
Transfer-Encoding: chunked
Cache-Control: private
Content-Type: text/xml; charset=utf-8

7909
<rss version="2.0">
  <channel>
   ... etc 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T21:16:16.793

您在上面发布的数据不是服务器发送的数据。来自服务器的响应包含 HTTP Header **Transfer-Encoding: chunked**但您的数据未正确采用 HTTP 分块编码格式。

请使用 Fiddler 捕获的实际数据更新您的问题，确保未**选中Fiddler 工具栏中的****解码**选项。

 **（至于问题的根本原因，您是否错误地调用了 Response.Close()？请参阅[这篇文章](http://blogs.msdn.com/b/ieinternals/archive/2012/07/16/content-length-and-transfer-encoding-validation-in-ie10-download-manager-couldnt-be-downloaded-retry-cancel.aspx)以了解为什么这是完成 HTTP 响应的错误方式。）**

# java - sqlite3 查询安卓

> ID：14468055
> 
> 赞同：1
> 
> 时间：2013-01-22T21:10:19.593
> 
> 标签：java, android, sqlite

我相对于 SQLite3，所以我想进行一个多词搜索的查询，我尝试使用 Match Against 进行全文搜索，因为它可以在 MySQL 中完成，但它没有工作，因为SQLite3 不支持这种类型的查询。所以我想知道如何做到这一点，以及 SQLite3 是否有一些特殊的命令来进行更复杂的查询。任何帮助将不胜感激。

我已经查看了一段时间的 SQLite 文档，但没有运气:(

```
SELECT product,category FROM products 
WHERE MATCH(product,category) AGAINST ('text') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:20:10.480

如果我赌

```
SELECT product,category FROM products WHERE product='Deep Cycle' AND category LIKE '%Battery'; 
```

我从下面的前[两个结果](https://www.google.com/search?q=sqlite+select)中得到了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T21:33:32.103

如果您正在寻找 MATCH 特定类型的搜索：

[http://www.sqlite.org/fts3.html#section_3](http://www.sqlite.org/fts3.html#section_3)

但是，如果您需要简单地获得结果：

[http://sqlite.org/lang_expr.html#like](http://sqlite.org/lang_expr.html#like)

# mysql - mysql在内部连接上发送数据很慢

> ID：14468059
> 
> 赞同：0
> 
> 时间：2013-01-22T21:10:32.023
> 
> 标签：mysql, sql

我有两个**相同**的专用服务器。首次使用 SQL 查询可以正常工作且快速。

```
SELECT 
  `store_item`.`product_id` 
FROM
  `store_item` 
  INNER JOIN `store` 
    ON (
      `store_item`.`store_id` = `store`.`id`
    ) 
WHERE (
    `store_item`.`product_id` IN (
     <many id (up to 500)>
    ) 
    AND `store`.`is_active` = 1 
    AND `store_item`.`is_available` = 1
  ) 
LIMIT 200 ; 
```

![在此处输入图像描述](../Images/7d9b0d84c089da3f571759c4c7aa4837.png) ![在此处输入图像描述](../Images/4aa99f3c1fac7d269a07ae690bad82ad.png)

**在具有相同**配置和**相同**版本 mysql的其他服务器上：

![在此处输入图像描述](../Images/325f8c7ed9e3ea8da671edea358cf7ac.png) ![在此处输入图像描述](../Images/9631f96c4148969fdfb0d794a6db0064.png)

有什么问题？

**更新 1.** 两台服务器的表结构相同。 **结构表`store`**

```
CREATE TABLE `store` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `type` int(11) NOT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `address` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `phone` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `email` varchar(75) COLLATE utf8_unicode_ci NOT NULL,
  `url` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
  `description` longtext COLLATE utf8_unicode_ci NOT NULL,
  `delivery_days` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `currency_id` int(11) NOT NULL,
  `account_currency_id` int(11) NOT NULL,
  `minimal_margin` decimal(5,2) NOT NULL,
  `balance_money` decimal(10,2) NOT NULL,
  `total_count` int(11) NOT NULL,
  `added_count` int(11) NOT NULL,
  `empty_count` int(11) NOT NULL,
  `unknown_count` int(11) NOT NULL,
  `is_distributor` tinyint(1) NOT NULL,
  `is_active` tinyint(1) NOT NULL,
  `group` int(11) NOT NULL,
  `sort` int(11) NOT NULL,
  `return_percent` int(11) NOT NULL,
  `updated` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `store_52094d6e` (`name`),
  KEY `store_41f657b3` (`currency_id`),
  KEY `store_145a375d` (`sort`),
  KEY `store_60ef08a5` (`account_currency_id`)
) ENGINE=MyISAM AUTO_INCREMENT=163 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

**结构`store_item`**

```
CREATE TABLE `store_item` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `store_id` int(11) NOT NULL,
  `code` varchar(54) COLLATE utf8_unicode_ci NOT NULL,
  `product_id` int(11) NOT NULL,
  `manufacturer_id` int(11) NOT NULL,
  `num` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `description` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `price_in` decimal(10,2) NOT NULL,
  `price_out` decimal(10,2) NOT NULL,
  `count` int(11) NOT NULL,
  `is_available` tinyint(1) NOT NULL,
  `delivery_days` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `discount_id` int(11) DEFAULT NULL,
  `discount_code` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
  `modified` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `store_id` (`store_id`,`product_id`),
  KEY `store_item_47799232` (`store_id`),
  KEY `store_item_44bdf3ee` (`product_id`),
  KEY `store_item_516bb1bd` (`count`),
  KEY `store_item_4ac7f441` (`manufacturer_id`),
  KEY `store_item_3aac1984` (`num`),
  KEY `store_item_52094d6e` (`name`),
  KEY `store_item_5c536bf3` (`discount_id`),
  KEY `store_item_65da3d2c` (`code`),
  KEY `store_item_5436e97a` (`modified`),
  KEY `store_item_64b158cd` (`discount_code`),
  KEY `store_item_5e0d2c81` (`is_available`)
) ENGINE=MyISAM AUTO_INCREMENT=16070923 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

# git - git-remote-hg 在 git clone hg::someurl 中使用“--insecure”

> ID：14468068
> 
> 赞同：0
> 
> 时间：2013-01-22T21:10:50.917
> 
> 标签：git, mercurial, https

我将 git 用于 vcs，并开始与一个使用 mercurial 的小组合作。因此，我一直在检查[**git-remote-hg**](https://github.com/dubiousjim/yagh)作为桥梁。

但是，**hg**存储库位于 https 后面，带有自签名证书。**仅使用hg**解决此问题的最简单方法是在克隆期间添加“--insecure”选项。

```
hg clone --insecure hgRepoURL 
```

我看不到如何为**git** clone 命令添加此选项

```
git clone --insecure hg::hgRepoURL 
```

不工作。寻找建议或其他方法来完成同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T00:19:19.787

您使用的网桥不会将任何参数传递给`hg clone`. 作为临时解决方法，您可以[将此行](https://github.com/dubiousjim/yagh/blob/master/src/remote-hg.py#L254)更改为`self._do("hg", "clone", "--insecure", self.hg_url, hg_repo_dir)`.

# ruby-on-rails - AR加入了父类中的类

> ID：14468072
> 
> 赞同：0
> 
> 时间：2013-01-22T21:10:55.010
> 
> 标签：ruby-on-rails, rails-activerecord

我有属于用户的作者实体。用户 has_many 帖子。请建议我如何在用户的作者实体上显示最近的帖子。

```
class User < ActiveRecord::Base
  has_many :posts, :foreign_key => "author_id"
end

class Post < ActiveRecord::Base
  attr_accessible :title, :content
  belongs_to :author, :class_name => "User"
end

class Author < ActiveRecord::Base
  belongs_to :user
  has_many :recent_posts, :through => :user,
          :class_name => "Post",
          :limit => 3,
          :order => "updated_at desc"
end 
```

最近的帖子应该怎么做？原始的sql？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:28:46.353

您希望使用 to`:source`选项来`has_many`指定另一个模型上的关联，如下所示：

```
has_many :recent_posts, :through => :user, :source => :posts, :limit => 3, :order => 'updated_at desc' 
```

# python - gensim 为 tf-idf 模型创建字典时是否使用了词干提取？

> ID：14468078
> 
> 赞同：2
> 
> 时间：2013-01-22T21:11:09.947
> 
> 标签：python, nlp, gensim

我正在使用 Gensim python 工具包为文档构建 tf-idf 模型。所以我需要先为所有文档创建一个字典。但是，我发现 Gensim 在创建字典和语料库之前不使用词干提取。我对吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T00:35:31.173

你是对的。Gensim 没有做任何特别的事情，只是将你给它的东西转换成不同的模型。

以下是相关报价及其来自的链接：

> 处理文档的方式如此多样且依赖于应用程序和语言，因此我决定不通过任何界面来限制它们。相反，文档由从中提取的特征表示，而不是由其“表面”字符串形式表示：如何获得特征取决于您。

[从字符串到向量](http://radimrehurek.com/gensim/tut1.html#from-strings-to-vectors)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-25T05:16:18.710

我也在为同样的情况而苦苦挣扎。为了克服我首先使用 stammed 文档`NLTK`，然后使用`gensim`. 可能它是执行任务的一种更简单、更方便的方法。

# java - IntelliJ：覆盖新的 java 版本不起作用

> ID：14468086
> 
> 赞同：1
> 
> 时间：2013-01-22T21:11:29.383
> 
> 标签：java, intellij-idea

我有一个我想使用的项目`Java v 1.7`，所以我在我的项目中对 Java 编译器 ![在此处输入图像描述](../Images/69bbc6d50f5513aa43f98db32aeb0897.png) 和 maven 编译器进行了更改
![在此处输入图像描述](../Images/63f0219487e554e024db52b43086c56f.png)

但是当我通过 IntelliJ 部署我的 JBoss 应用程序时，我仍然看到类似的错误

```
13:04:24,295 WARN  [org.jboss.modules] (MSC service thread 1-3) Failed to define class com.myorg.bb.business.LoginManager in Module "deployment.web-1.0-SNAPSHOT.war:main" from Service Module Loader: java.lang.UnsupportedClassVersionError: com/myorg/bb/business/LoginManager : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method) [classes.jar:1.6.0_29]
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631) [classes.jar:1.6.0_29]
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615) [classes.jar:1.6.0_29]
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141) [classes.jar:1.6.0_29] 
```

如何使用 Java v1.7 进行这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T08:45:47.960

确保`JAVA_HOME`设置为 1.7，您可以尝试在 IntelliJ IDEA[的 JBoss Run/Debug 配置中覆盖它，因为](https://i.stack.imgur.com/eezxI.png)[Mac 上的设置环境很棘手](https://stackoverflow.com/questions/135688/setting-environment-variables-in-os-x)，并且取决于操作系统版本。

# php - 我为我的个人图书馆编写了一个图书馆搜索程序，在选择多个单词时遇到了问题

> ID：14468090
> 
> 赞同：-1
> 
> 时间：2013-01-22T21:11:42.040
> 
> 标签：php, sql

例如，如果我搜索“猫”，我会得到所有包含“猫”字样的标题，例如“帽子里的猫”。

如果我输入'cat hat'，我应该返回'cat in the hat'，但查询返回空，因为它正在寻找'cat hat'而忽略'cat in the hat'。

我需要某种选择，它用我搜索的任何单词查找所有标题，然后为下一个单词执行此操作，等等……然后……我不知道，某种大的东西……

到目前为止，我正在玩类似的东西：

```
$query = "SELECT title 
FROM books 
WHERE TITLE LIKE '%" . $search . "%' LIMIT 0,75;"; 
```

可能需要某种递归函数，它将搜索输入分解为字符串数组，并对每个字符串进行搜索，然后将它们合并。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:15:02.160

您正在寻找[MySQL 全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:19:36.603

答案：

1.  将 $search 拆分为普通符号和空格，然后构建查询

2.  使用[MySql 全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

陷阱：完整的 SQL 文本搜索是更好的选择，它会导致更快的结果。另请注意，您当前的查询容易受到 SQL 注入的影响，请使用[mysqli::real_escape_string](http://php.net/manual/en/mysqli.real-escape-string.php)来避免这种情况。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T21:17:31.840

如果只是针对一个字段进行查询，您应该能够使用一组输入来执行此操作。如果是多个字段，则必须使用地图来完成。

我想指出的一件事是，这看起来很像是 SQL 注入的目标。将 SQL 查询连接到一个字符串中时，请务必小心。最终结果必须进行转义和/或参数化，以防止用户运行任意 SQL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T21:14:37.370

```
$query = "SELECT title 
FROM books 
WHERE TITLE LIKE '%" . $search1 . "%' AND LIKE '%" . $search2 . "%'  LIMIT 0,75;"; 
```

您需要为每个搜索词添加一个 AND 子句。如果需要，您还可以添加 OR。他们会给出不同的结果。OR 会有更多的结果，而 AND 当然会更具体。

# javascript - Ember.js pre4 路由器获取其他控制器

> ID：14468093
> 
> 赞同：1
> 
> 时间：2013-01-22T21:12:02.380
> 
> 标签：javascript, ember.js, ember-router

> **可能重复：**
> [从其他控制器访问控制器](https://stackoverflow.com/questions/14388249/accessing-controllers-from-other-controllers)

在 Ember pre2 和之前的旧路由器样式中，您可以从路由器获取其他控制器，所以如果我在一个名为的控制器中，`PeopleController`我可以做这样的事情

```
App.PeopleController = Ember.Controller.extend({
     some_computed_property: (function() {
          return this.get('target.otherController.property_i_want');
     }).property('target.otherController.property_i_want')
}); 
```

或从调试控制台

```
> App.router.get('otherController.property_i_want') 
```

这两个都有效。Pre4 / 新的路由风格似乎打破了这一点。如何使用新路由器和 pre4 获得此功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T23:15:45.237

我问了一个类似的问题；您可以在当前版本中声明依赖项。

[从其他控制器访问控制器](https://stackoverflow.com/questions/14388249/accessing-controllers-from-other-controllers)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T23:21:25.337

我有一个可怕的黑客：

```
Em.Route.reopen({init:function(){
  window.App.currentRoute = this;
  this._super.apply(this,arguments);
}}) 
```

这使您可以执行以下操作：

```
App.currentRoute.controllerFor('something');
App.currentRoute.target... 
```

编辑：目前，ember 支持为控制器定义“需求”，并公开容器以进行查找：

```
App.__container__.lookup("controller:application").get("someProperty")

App.ApplicationController = Em.Controller.extend({
    needs: ["authentication","notifications"],
    init: function(){
       this._super.apply(this,arguments)
       console.log(this.get("controllers.authentication"), this.get("controllers.notifications"))
    }
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T21:22:35.263

尝试`this.controllerFor('other').get('property_i_want')`

[请参阅http://emberjs.com/guides/routing/setting-up-a-controller/](http://emberjs.com/guides/routing/setting-up-a-controller/)的最后一部分

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-23T05:45:01.090

要从控制台访问控制器，`debugger;`请在您的代码中设置，刷新浏览器，这将在您设置`debugger`语句的位置停止执行，然后您可以在您所在的范围内访问您的控制器，使用

```
this.controllerFor('abs'); 
```

这在调试模板中也非常有用，您可以插入`{{debugger;}}`并让您访问控制台中模板的整个范围，例如尝试找出您`controller`或您`view`的内容。

# ruby-on-rails-3 - Rails 提交表单远程问题

> ID：14468097
> 
> 赞同：0
> 
> 时间：2013-01-22T21:12:13.723
> 
> 标签：ruby-on-rails-3, remote-forms

我正在尝试通过`remote: true`Rails 3 提交表单，出于某种原因，当我在浏览器中查看响应时，我只看到原始响应而不是被解释的 JavaScript。

形式：

```
<%= form_for @entry, url: contest_entries_path, remote: true, html: {id: "contest_form"} do |f| %> 
```

控制器：

```
class ContestEntriesController < ApplicationController
  respond_to :html, :js

  def index
    @entry = ContestEntry.new
    @entry.build_school
    respond_with @entry
  end

  def create
    @entry = ContestEntry.new(params[:contest_entry])
    respond_with @entry
  end
end 
```

创建.js.erb：

```
<% unless @entry.errors.any? %>

        <% if @entry.parent? %>
            $('body').find('#parents_message').show();
        <% else %>
            $('body').find('#falculty_message').show();
        <% end %>
    <% end %> 
```

浏览器中的响应是原始的 JavaScript 响应

# linux - Bash Shell 指定 getops 的有效选项

> ID：14468102
> 
> 赞同：0
> 
> 时间：2013-01-22T21:12:23.690
> 
> 标签：linux, bash, shell, debian

这是我正在使用的代码：

```
TYPE=""
FILE=""

while getopts "t:f:" opt; do
    case $opt in
        t)  TYPE="$OPTARG"
            ;;
        f)  FILE="$OPTARG"
            ;;
    esac
done

if [ -z "$TYPE" ]; then
  echo "No -t. Bye."
  exit 1 # error
else
  if [ -n "$FILE" ]; then
    echo "$TYPE and $FILE"
  else
    echo JUST $TYPE
  fi
fi 
```

是否可以为 $TYPE 指定有效选项？例如，有效的类型选项是：

```
IMAGE, ZIP, DOC 
```

如果将这些类型之一指定为有效参数，则脚本将运行现有行：

```
"echo "$TYPE and $FILE"" 
```

否则，它会回显错误并退出。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T21:34:00.843

如果您需要过滤掉`-t`switch ：

```
(...)
        t)
            case $OPTARG in
                img|image|doc)
                    TYPE="$OPTARG"
                ;;
                *)
                    echo >&2 "Unsupported type..."
                    exit 1
                ;;
            esac
        ;;
(...) 
```

# jquery - 无法从 ASP.NET 列表视图定位页面导航 DIV

> ID：14468104
> 
> 赞同：0
> 
> 时间：2013-01-22T21:12:34.240
> 
> 标签：jquery, asp.net, listview

我有这个页面：http: [//quotestample.com/Quotes/Words/Photography/All/Page1](http://quotestemple.com/Quotes/Words/Photography/All/Page1)

和 jquery.isotope 插件来订购白框，但问题是页面导航在列表视图内，它也被移动，我无法将它定位在页面顶部或底部。

任何想法如何在页面顶部或底部移动页面导航 div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:07:41.377

您可以将 RadDataPager 控件放置在 RadListView 的布局模板之外。

# android - 在android中的任何时间发送GPS坐标

> ID：14468110
> 
> 赞同：1
> 
> 时间：2013-01-22T21:13:07.573
> 
> 标签：android, gps, locationmanager

有下一个问题，需要一个程序随时将坐标发送到我的服务器。我创建了一个任务管理器，可以发送坐标，只买前三五次就死了。

这是我的代码，请问我的问题如何？

我的主要活动：

```
public class MainActivity extends Activity {
public int ingreso =0;      
double latitud=0;
double longitud=0;
boolean isGPSEnabled = false;
boolean isNetworkEnabled = false;
public double lat1=0;
public double lon1=0;enter code here

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final InstallationId Miid = new InstallationId();

    Alarmas mUIUpdater = new Alarmas(new Runnable() {
         @Override 
         public void run() {
            // do stuff ...
             /* Use the LocationManager class to obtain GPS locations */

            LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

            LocationListener mlocListener = new MyLocationListener();

            isGPSEnabled = mlocManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
            isNetworkEnabled = mlocManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);

            if (!isGPSEnabled && !isNetworkEnabled )
            {
                /*NO HAY GPS*/
                Toast.makeText( getApplicationContext(),"El GPS se encuentra desactivado. Favor activarlo para determinar el Centro de embellecimiento mas cercano",Toast.LENGTH_LONG ).show();
                Intent intentRedirectionGPSSettings = new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                intentRedirectionGPSSettings.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
                startActivityForResult(intentRedirectionGPSSettings, 0);
            }
            else
            {           
                if (isGPSEnabled)
                {
                    mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);

                }
                else
                {
                    if (isNetworkEnabled)
                    {
                        mlocManager.requestLocationUpdates( LocationManager.NETWORK_PROVIDER, 0, 0, mlocListener);

                    }
                }
            }

            lat1=((MyLocationListener) mlocListener).GetLatitud();
            Log.d("Enviando datos", "es " + ((MyLocationListener) mlocListener).GetLatitud());
            lon1=((MyLocationListener) mlocListener).GetLongitud();
            String miurl="http://casoft.com.co/evvc/registro.php?idphone=" + Miid.id(getApplicationContext()) + "&lat1=" + lat1 + "&lon1=" + lon1;              
            new Tareas().execute(miurl);                
            mlocManager.removeUpdates(mlocListener);

         }
    });

    mUIUpdater.startUpdates();

    //new Tareas().execute("http://casoft.com.co/evvc/registro.php?idphone=1&lat1=1&lon1=2");
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public class MyLocationListener implements LocationListener

{

    @Override
    public void onLocationChanged(Location loc)

    {
        loc.getLatitude();
        loc.getLongitude(); 
            latitud = loc.getLatitude();
            longitud= loc.getLongitude();
            Log.d("Enviando datos", latitud + "es " + longitud);

    }

    @Override

    public void onProviderDisabled(String provider)

    {

        ingreso=0;
    }

    @Override

    public void onProviderEnabled(String provider)

    {

        Toast.makeText( getApplicationContext(),"Gps Enabled",Toast.LENGTH_SHORT).show();

    }

    @Override

    public void onStatusChanged(String provider, int status, Bundle extras)

    {

    }

    public double GetLatitud()
    {

        return latitud;

    }

    public double GetLongitud()
    {

        return longitud;
    }

}/* End of Class MyLocationListener */

public void Sael(View view) {
    Intent i = new Intent(this, navegador.class );
    startActivity(i);
} 
```

}

这是获取idphone：

```
public class InstallationId {
private static String sID = null;
private static final String INSTALLATION = "INSTALLATION";

public synchronized static String id(Context context) {
    if (sID == null) {  
        File installation = new File(context.getFilesDir(), INSTALLATION);
        try {
            if (!installation.exists())
                writeInstallationFile(installation);
            sID = readInstallationFile(installation);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
    return sID;
}

private static String readInstallationFile(File installation) throws IOException {
    RandomAccessFile f = new RandomAccessFile(installation, "r");
    byte[] bytes = new byte[(int) f.length()];
    f.readFully(bytes);
    f.close();
    return new String(bytes);
}

private static void writeInstallationFile(File installation) throws IOException {
    FileOutputStream out = new FileOutputStream(installation);
    String id = UUID.randomUUID().toString();
    out.write(id.getBytes());
    out.close();
} 
```

}

这是警报：

```
public class Alarmas {
    private Handler mHandler = new Handler(); // TODO Don't know if this is created in the UI thread
    private Runnable mStatusChecker;
    private int UPDATE_INTERVAL = 9000;

    /**
     * Creates an UIUpdater object, that can be used to
     * perform UIUpdates on a specified time interval.
     * 
     * @param uiUpdater A runnable containing the update routine.
     */
    public Alarmas(final Runnable uiUpdater){
        mStatusChecker = new Runnable() {
            @Override
            public void run() {
                // Run the passed runnable
                uiUpdater.run();

                // Re-run it after the update interval
                mHandler.postDelayed(this, UPDATE_INTERVAL);
            }
        };
    }

    /**
     * The same as the default constructor, but specifying the
     * intended update interval.
     * 
     * @param uiUpdater A runnable containing the update routine.
     * @param interval  The interval over which the routine
     *                  should run (milliseconds).
     */
    public Alarmas(Runnable uiUpdater, int interval){
        this(uiUpdater);
        UPDATE_INTERVAL = interval;
    }

    /**
     * Starts the periodical update routine (mStatusChecker 
     * adds the callback to the handler).
     */
    public void startUpdates(){
        mStatusChecker.run();
    }

    /**
     * Stops the periodical update routine from running,
     * by removing the callback.
     */
    public void stopUpdates(){
        mHandler.removeCallbacks(mStatusChecker);
    } 
```

}

这就是任务

```
class Tareas extends AsyncTask<String, String, String>{

@Override
protected String doInBackground(String... uri) {
    HttpClient httpclient = new DefaultHttpClient();
    HttpResponse response;
    String responseString = null;
    Log.d("Enviando datos", "Solicitando");

    try {
        response = httpclient.execute(new HttpGet(uri[0]));
        StatusLine statusLine = response.getStatusLine();
        if(statusLine.getStatusCode() == HttpStatus.SC_OK){
            ByteArrayOutputStream out = new ByteArrayOutputStream();
            response.getEntity().writeTo(out);
            out.close();
            responseString = out.toString();
        } else{
            //Closes the connection.
            response.getEntity().getContent().close();
            throw new IOException(statusLine.getReasonPhrase());
        }
    } catch (ClientProtocolException e) {
        //TODO Handle problems..
    } catch (IOException e) {
        //TODO Handle problems..
    }
    return responseString;
}

@Override
protected void onPostExecute(String result) {
    super.onPostExecute(result);
    //Do anything with response..
} 
```

}

谢谢你的帮助。

Pda：我需要这个程序一直工作，并且只在任何时候向我发送 GPS 报告，用于测试的 UPDATE_INTERVAL 任何 9 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:19:08.897

> 只买前三五次就死了。

那是因为 Android 很可能终止了您的进程。

请`AlarmManager`用于应该每小时发生一次的工作。每小时获得一次位置修复有点棘手——我有[一个`LocationPoller`](https://github.com/commonsguy/cwac-locpoll)可以帮助解决这个问题的[库。](https://github.com/commonsguy/cwac-locpoll)

# mysql - SQL 累计前 12 个月 - 每月细分

> ID：14468111
> 
> 赞同：0
> 
> 时间：2013-01-22T21:13:09.377
> 
> 标签：mysql, sql, sql-server, reporting-services, ssrs-2008

任何人都可以协助我尝试编写一个 sql 语句吗？我正在使用 SSRS r1（sql 或 ssrs 解决方案都可以）

我如何能：

*   显示按月和年拆分的计数度量
*   对于每个月，我想计算上一个累计 12 个月

例如

```
2012 jan: counts feb 2011 - jan 2012
2012 feb: counts mar 2011 - feb 2012
2012 mar: counts apr 2011 - mar 2012 
```

我已经启动了这段代码，但它不正确，但是它让您了解我想要实现的目标（这个问题是我必须从日期开始计算月份和年份）

```
select 
    count(a.measure) count
    ,month(a.StartDate)
    ,year(a.StartDate)
from
    a
where 
    a.StartDate >=  DATEADD(mm,DATEDIFF(mm,0,@datepromt)-12,0) as startdateYrAgo --1st month 1 year ago 01/01/2012 
    and a.StartDate <= DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,0,@datepromt)+1,0)) as startdateEOM --last day of month 31/01/2013
group by 
    month(a.StartDate)
    ,year(a.StartDate) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:45:25.097

在这里，您对查询有一个想法，它必须如下所示；

```
SELECT 
 periods.year
,periods.month
,measures.cnt
FROM (
    SELECT DISTINCT
      year = YEAR(StartDate)
    , month = MONTH(StartDate)
    , month_running = DATEDIFF(mm, 0, StartDate) 
    FROM a
    GROUP BY YEAR(StartDate), MONTH(StartDate), DATEDIFF(mm, 0, StartDate) 
) periods
JOIN (
    SELECT month_running = DATEDIFF(mm, 0, StartDate), cnt = COUNT(measure) 
    FROM a
    GROUP BY DATEDIFF(mm, 0, StartDate) 
) measures
ON measures.month_running BETWEEN periods.month_running - 12 AND periods.month_running - 1 
```

# javascript - 从客户端检测到潜在危险的 Request.Form 值，请编码帮助

> ID：14468115
> 
> 赞同：2
> 
> 时间：2013-01-22T21:13:35.150
> 
> 标签：javascript, asp.net, html, regex, web-services

因此，我试图通过 Js 中的 Post 将字符串作为参数提交到 asp.net 服务，但我遇到了一些困难。在声明之前，我无权访问服务器，也无法访问验证，我严格从外部客户端访问。我收到了这个回复

```
System.Web.HttpRequestValidationException: A potentially dangerous Request.Form value was detected from the client (message=&quot;...t;img src=&amp;#39;http://192.168.1...&quot;).
    at System.Web.HttpRequest.ValidateString(String value, String collectionKey, RequestValidationSource requestCollection)
    at System.Web.HttpRequest.ValidateNameValueCollection(NameValueCollection nvc, RequestValidationSource requestCollection)
    at System.Web.HttpRequest.get_Form()
    at System.Web.Services.Protocols.HtmlFormParameterReader.Read(HttpRequest request)
    at System.Web.Services.Protocols.HttpServerProtocol.ReadParameters()
    at System.Web.Services.Protocols.WebServiceHandler.CoreProcessRequest() 
```

我发送的消息是：

```
xcvxzcvzxcvxcvzxcv< br /><img src='http://192.168.1.1:82/UserUploads/Images/65968/20130122020024996.jpg' alt='User Image' /> 
```

我使用以下编码：

```
htmlEncode: function(str) {
        str = str.replace(/&/g, '&amp;');
        str = str.replace(/'/g, '&#39;');
        str = str.replace(/"/g, "&quot;");
        str = str.replace(/</g, '&lt;');
        str = str.replace(/>/g, '&gt;');
        return str;
    }, 
```

产生：

```
xcvxzcvzxcvxcvzxcv&lt; br /&gt;&lt;img src=&#39;http://192.168.1.1:82/UserUploads/Images/65968/20130122020802027.jpg&#39; alt=&#39;User Image&#39; /&gt; 
```

我已经运行了几个验证器并检查了我的编码，但我无法找出导致问题的原因。我唯一的猜测是 http:// 导致了问题，如 javascript 错误所示，但我不确定。任何帮助或见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:47:12.593

问题是'. 根据 user409762， 的组合在 asp.net 中被标记为危险。

所以现在我的编码看起来像这样并且工作正常。

```
htmlEncode: function(str) {
    str = str.replace(/&/g, '&amp;');
    str = str.replace(/"/g, "&quot;");
    str = str.replace(/</g, '&lt;');
    str = str.replace(/>/g, '&gt;');
    return str;
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-05T17:35:56.900

[使用 Jquery，您可以像此链接一样](https://stackoverflow.com/questions/1219860/html-encoding-in-javascript-jquery)执行编码和解码。

```
function htmlEncode(value) {
    return $('<div/>').text(value).html();
}

function htmlDecode(value) {
    return $('<div/>').html(value).text();
} 
```

# wordpress - Wordpress WYSIWYG 编辑器自动添加具有样式的跨度类

> ID：14468117
> 
> 赞同：2
> 
> 时间：2013-01-22T21:13:38.867
> 
> 标签：wordpress, editor, tinymce, wysiwyg, html

出于某种原因，当我使用按钮创建项目符号列表时，我在 Wordpress 中的 WYSIWYG 编辑器会自动添加具有样式的跨度类。这很烦人，因为我希望我的文本有一定的大小，但是 span 类对样式进行了硬编码，并且弄乱了大小。

有谁知道如何删除跨度类的自动添加？

这个网站是为客户准备的，他/她不知道如何使用 HTML，这就是为什么它必须使用 WYSIWYG 编辑器。

非常感谢帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:01:38.163

我也有同样的问题，而且我不是在复制，每次创建列表时，编辑器都会在代码中添加：

文本

到列表的文本。

我怎样才能摆脱这个？

* * *

我刚刚在那篇文章中找到了一个适合我的解决方案： [http ://wordpress.org/support/topic/strange-behaviour-making-lists-in-the-visual-editor](http://wordpress.org/support/topic/strange-behaviour-making-lists-in-the-visual-editor)

如果您使用子主题，只需将此函数添加到您的 functions.php 文件中：

```
 /**
 * I want to use the basic 2012 theme but don't want TinyMCE to create
 * unwanted HTML. By removing editor-style.css from the $editor_styles
 * global, this code effectively undoes the call to add_editor_style()
 */
add_action( 'after_setup_theme', 'foobar_setup', 11 );
function foobar_setup() {
  global $editor_styles;
  $editor_styles = array();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T23:46:51.170

您是从某处复制和粘贴文本吗？有时文本会在其源代码中包含样式，并且这些样式会被带到所见即所得。见[http://tentblogger.com/copy-paste/](http://tentblogger.com/copy-paste/)

# java - 如何在 Java 中处理配置属性

> ID：14468119
> 
> 赞同：-7
> 
> 时间：2013-01-22T21:13:52.940
> 
> 标签：java, parsing

为了我的项目的目的，我需要一个配置文件来设置一些值，我需要解析这个文件并将分配的值提取到代码中的变量。你有什么建议或我可以使用的任何工具吗？我正在用Java编码！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T21:15:02.597

利用标准 Java[`Properties`](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)类。创建一个属性文件，即`conf.properties`加载它。

```
#conf.properties:
key=value

#code
Properties conf = new Properties();
conf.load(new FileInputStream(new File("conf.properties")));
conf.getProperty("key"); // returns "value" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T21:15:27.167

Java 对此有一个标准，称为[Properties](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T21:15:51.893

对于这个简单的项目，您不需要任何工具。将值存储为 name=value 对，确保它们符合 java.util.Properties 格式，然后您可以使用类的 API 来加载它们

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T21:18:37.207

最简单的方法是使用文本文件。建议将变量及其值放在一个 xml 文件中，然后用 Sax 读取。另一种方法是使用json。

# onload - 在鼠标悬停之前，Marque 不会启动

> ID：14468122
> 
> 赞同：0
> 
> 时间：2013-01-22T21:13:59.643
> 
> 标签：onload, marquee

我正在尝试在我的网站中放置一个文本框。一切正常，除了文本在被鼠标滚动之前不会开始滚动。我需要它在页面加载时开始滚动。

相同的代码在这里开始加载很好：http: [//javascript.about.com/library/blctmarquee1.htm](http://javascript.about.com/library/blctmarquee1.htm)

我的控制台说：

> ```
> Uncaught TypeError: Cannot call method 'getElementsByTagName' of null 
> 
> mq                 Marquee_Testing.html:61
> 
> start              Marquee_Testing.html:41 
> ```

这是javascript：

```
function start() {
        new mq('m1');
        new mq('m2');
        mqRotate(mqr); // must come last
    }
    window.onload = start;

    function objWidth(obj) {
        if (obj.offsetWidth) return obj.offsetWidth;
        if (obj.clip) return obj.clip.width;
        return 0;
    }
    var mqr = [];

    function mq(id) {
        this.mqo = document.getElementById(id);
        var wid = objWidth(this.mqo.getElementsByTagName('span')[0]) + 5;
        var fulwid = objWidth(this.mqo);
        var txt = this.mqo.getElementsByTagName('span')[0].innerHTML;
        this.mqo.innerHTML = '';
        var heit = this.mqo.style.height;
        this.mqo.onmouseout = function () {
            mqRotate(mqr);
        };
        this.mqo.onmouseover = function () {
            clearTimeout(mqr[0].TO);
        };
        this.mqo.ary = [];
        var maxw = Math.ceil(fulwid / wid) + 1;
        for (var i = 0; i < maxw; i++) {
            this.mqo.ary[i] = document.createElement('div');
            this.mqo.ary[i].innerHTML = txt;
            this.mqo.ary[i].style.position = 'absolute';
            this.mqo.ary[i].style.left = (wid * i) + 'px';
            this.mqo.ary[i].style.width = wid + 'px';
            this.mqo.ary[i].style.height = heit;
            this.mqo.appendChild(this.mqo.ary[i]);
        }
        mqr.push(this.mqo);
    }
    function mqRotate(mqr) {
        if (!mqr) return;
        for (var j = mqr.length - 1; j > -1; j--) {
            maxa = mqr[j].ary.length;
            for (var i = 0; i < maxa; i++) {
                var x = mqr[j].ary[i].style;
                x.left = (parseInt(x.left, 10) - 1) + 'px';
            }
            var y = mqr[j].ary[0].style;
            if (parseInt(y.left, 10) + parseInt(y.width, 10) < 0) {
                var z = mqr[j].ary.shift();
                z.style.left = (parseInt(z.style.left) + parseInt(z.style.width) * maxa) + 'px';
                mqr[j].ary.push(z);
            }
        }
        mqr[0].TO = setTimeout('mqRotate(mqr)', 10);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:57:08.000

我通过删除解决了这个问题

> 新 mq('m2');

我仍然不知道为什么这会影响选框“m1”滚动加载的能力，但无论如何它都已解决。

# jquery - 在 wordpress 的 TinyMCE 编辑器中使用 jQuery 的 AJAX 功能

> ID：14468129
> 
> 赞同：1
> 
> 时间：2013-01-22T21:14:28.763
> 
> 标签：jquery, ajax, wordpress, tinymce

我编写了一个自定义的 TinyMCE 插件，它给了我一个按钮，单击该按钮会打开一个模式窗口，允许我从上传的图像中选择图像，然后可以将其添加为我的帖子中的自定义画廊。即，通过单击提交按钮，将包含所选图像 ID 的短代码输入到我的帖子文本中。到目前为止，一切都很好。这可以按需要工作。现在，我不仅尝试输入简码，还尝试在单击“提交”时添加元值。基本上提交我的选择是通过通常的 JavaScript 机制完成的（不更新数据库 - 只是将一个字符串添加到文本中）。由于没有涉及 php 操作，我认为我可以使用 AJAX 来做到这一点。该函数如下所示：

```
function ajaxSubmit(id, argstring) {
    jQuery.post("../../add_post_meta.php", {
        post_id: id,
        key: 'bildstrecke',
        val: 'true',
        unique: 'true',
        security: '<?php echo $ajax_nonce ?>'
    }).success(function() {
        window.tinyMCE.execInstanceCommand('content', 'mceInsertContent', false, "[bildstrecke imgs=\""+argstring+"\"]");
        tinyMCEPopup.editor.execCommand('mceRepaint');
        tinyMCEPopup.close();
    }).error(function(e, x) {
        console.log([e, x])
    });
    return false;
} 
```

'add_post_meta.php' 包含一些将元值添加到数据库的 php 代码：

```
<?php
@require('../../../../wp-config.php');

// check for permissions
if( !is_user_logged_in() || !current_user_can('edit_posts') ) {
    wp_die(__("You are not allowed to be here"));
}

add_action('wp_ajax_action', 'action_function');

function action_function() {
    check_ajax_referer('nonce');
    die();
}

add_post_meta((int)$_POST['post_id'], $_POST['key'], $_POST['val'], $_POST['unique']);
?> 
```

但是，执行上述 JavaScript 函数 'ajaxSubmit' 会导致未指定的错误。对“add_post_meta.php”的调用没有正确执行（在控制台中，我看到了对脚本的调用，但没有得到正确的响应——我看到脚本被调用，但只出现了一个永远旋转的进程轮） .

有什么明显的我做错了吗？所需文件的路径都是正确的（当然，jQuery-libs 在 HTML-headers 中正确链接）。

感谢您的任何提示，

斯特凡

# arrays - 在 R 中，如何提取数组中最接近某个值的某行的列号？

> ID：14468130
> 
> 赞同：1
> 
> 时间：2013-01-22T21:14:30.423
> 
> 标签：arrays, r, statistics, extract

鉴于：

```
data(veteran)
library(survival)
veteran$prognostic_indicator <- 0
veteran$prognostic_indicator[veteran$karno<50] <- 1
model <- coxph(Surv(time,status)~age+prognostic_indicator,data=veteran)
library(obsSens)
object <- obsSensSCC(model, which = "prognostic_indicator", g0 = seq(1,10,0.01),p0 = c(0.05,0.1,0.2,0.3,0.4), p1 = seq(0, 1, 0.05), logHaz = FALSE, method = "approx") 
```

我可以提取向量：

```
object$lcl[21,1,1:901] 
```

这是按降序排列的值。我想提取最接近 1 但高于 1 的数字的“名称”。在这种情况下，我想提取名称“2.69”或位置 170，因为相应的数字是 1.0001292。位置 2.70 的数字是 0.9968844，因此太低了。

**如何在递减值向量中提取位置（或名称），其中数字最接近值 1.0，但高于？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:09:53.397

如果您使用该值创建一个新向量，则识别满足条件的第一个元素，然后将一个元素移回序列中。

```
obj <- object$lcl[21,1,1:901] 
obj[which(obj< 1)[1] -1]

#    2.69 
#1.000129 
```

另一种方法是处理反向向量。然后你不需要回溯：

```
> rev(obj)[which(rev(obj) > 1)[1] ]
    2.69 
1.000129 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:11:02.480

这是除了 DWin 的更清洁方法之外的另一种方法。

```
which.min(subset(object$lcl[21,1,1:901], object$lcl[21,1,1:901] > 1) - 1) 
```

# vb.net - IIS 6 上的 HTTPModule 在 Web 文件夹请求上执行？

> ID：14468134
> 
> 赞同：1
> 
> 时间：2013-01-22T21:14:43.413
> 
> 标签：vb.net, iis-6, httpmodule, mapped-drive, web-folders

是否可以使用 HTTP 模块通过 IIS 6 中的 Web 文件夹监视对站点的请求？我有一个非常简单的应用程序设置了一个 HTTP 模块，我在我的 Web.config 中引用了这个模块，如下所示：

```
<httpModules>
   <add name="MyCustomModule" type="SimpleTest.MyCustomModule"/>
</httpModules> 
```

在模块中，我设置了代码以在 BeginRequest 事件触发时写入“C”驱动器上的日志文件：

```
Private Sub BeginRequest(sender As Object, e As EventArgs)
    Dim oHttpApplication As HttpApplication = CType(sender, HttpApplication)
    Using file As System.IO.StreamWriter = IO.File.AppendText("C:\LOG.TXT")
        file.WriteLine("got to Begin request for path: " & oHttpApplication.Request.FilePath)
    End Using
End Sub 
```

现在，如果我导航到，`Http://localhost/default.aspx`我会在我的日志文件中看到一个条目，如下所示：

> 开始请求路径：\default.aspx

但是，如果我从 Internet Explorer 打开一个文件夹（我的站点中的一个子文件夹）作为 Web 文件夹，则不会记录任何请求。将驱动器映射到该文件夹​​具有相同的效果。

**是否可以在运行 IIS 6 的机器上对 Web 文件夹或映射驱动器的请求执行 HTTP 模块？**

如果是这样，是否需要任何额外的 IIS 配置？

# x86 - x86：超越函数的延迟和吞吐量

> ID：14468135
> 
> 赞同：3
> 
> 时间：2013-01-22T21:14:44.047
> 
> 标签：x86, latency, throughput, fpu, x87

[英特尔® 64 和 IA-32 架构优化参考手册](http://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-optimization-manual.html)列出了各种 CPU 指令的延迟和吞吐量数据。

对于超越函数（`FSIN`等），一些数字被列为范围（第 C-29 页）。脚注 4 解释：

> 先验指令的延迟和吞吐量在动态执行环境中可能会有很大差异。这些说明仅给出了一个近似值或一个值范围。

我的问题是：哪些因素会影响此类指令的吞吐量和延迟？我想这个论点的价值是一个因素。还有其他的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T21:23:46.040

除了参数之外，正在运行的其他指令的混合可能会对延迟和吞吐量产生影响。这些指令是微编码的，这意味着它们会生成一系列微操作，这些微操作需要与其他指令竞争 ALU 资源；如果发生此类争执，可能会对性能产生不利影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T02:42:24.260

x87 控制字指定计算的准确性（64 位、53 位或 24 位尾数），它会影响超越函数的性能，尤其是那些内部使用除法或平方根的函数。一般来说，我建议避免使用三角 x87 指令，因为在设计上它们对于大输入值非常不准确。

# json - MongoDB导入错误

> ID：14468136
> 
> 赞同：2
> 
> 时间：2013-01-22T21:14:45.530
> 
> 标签：json, mongodb, bson

我在使用转储/恢复将 MongoDB 数据库从本地计算机移动到 MongoHQ.com 时遇到了问题。当我将转储恢复到 MongoHQ 时，它丢失了大约 10% 的文档，并且没有明显的错误。

为了解决问题，虽然我会在本地使用导出/导入来验证数据，但我在导入时遇到错误，但导出没有报告任何错误。我使用 json 格式进行导出。这是导入错误之一；

```
exception:BSON representation of supplied JSON is too large: code FailedToParse: FailedToParse: Date milliseconds overflow: offset:10357 
```

它报告了大约 130k 个文档中的 726 个错误。基于错误，我认为日期字段存在问题，但我无法弄清楚如何找到问题文档。我尝试进行维修，但没有运气。
任何人都有想法尝试找出问题所在？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T17:25:02.950

在这里，我再次回答我自己的问题，希望对其他人有所帮助。

该问题出现在任何日期早于 1970 年 1 月 1 日（Unix 纪元）的文档上。我假设转储/恢复可以正常处理，但不能导出/导入，因为转储/恢复使用的是 BSON，而导入/导出使用的是 JSON 或 CSV。这是 MongoDB [https://jira.mongodb.org/browse/SERVER-961](https://jira.mongodb.org/browse/SERVER-961)的未解决错误报告。

作为脚注，我最初使用来自 Ruby 的 Mongoid 加载了我的 MongoDB，这显然能够处理 1970 年之前的日期。

# javascript - 当用户试图离开我的网页时创建一个弹出窗口并获取结果

> ID：14468138
> 
> 赞同：0
> 
> 时间：2013-01-22T21:14:54.630
> 
> 标签：javascript, html, confirm

我正在尝试对外部链接使用确认方法。当您按下链接时，应该会弹出问题，询问您是否要离开该网站？一切都按计划进行，除了您无论单击哪个按钮都会离开站点。

```
function warning(){
  var warning = document.getElementsByClassName("external");
  warning.onclick = confirm('Do you want to leave');

  if(warning){
    alert("Leaving site");

  }
  else{
    return false;
    alert("Staying on site");
  }
} 
```

以上显然行不通，你是怎么做到的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T21:16:17.613

```
warning.onclick = confirm('Do you want to leave'); 
```

这会`confirm()` **立即**调用，并将结果（真或假）分配给`onclick`（没有意义）。

相反，您需要创建一个匿名函数来调用`confirm()`并返回结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T21:31:05.540

> 以上显然行不通

是的。代码中有无数错误：

*   您的变量`warning`与函数同名 - 不好的做法，因为这会导致混淆
*   `warning.onclick`由于返回 NodeList 将不起作用`getElementsByClassName`，并且您只能将侦听器附加到单个元素
*   `= confirm('Do you want to leave');`直接分配调用的结果`confirm`。你当然想分配一个函数，当事件发生时它会被调用
*   `if(warning)`将永远是真的，因为即使是一个空的 NodeList 也是真的
*   `return false; alert()`- 永远不会执行警报。一条`return`语句立即跳出函数。

> 你怎么做呢？

一点也不。阻碍用户做他想做的事（当他点击链接时他想离开网站）的弹出窗口是不可取的。这是非常糟糕的 UI 设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T21:23:27.883

jQuery 对话框非常适合这个只需添加代码

```
warning.onclick = function()
{
 var msg = "do you want to leave this site: ";

 $( "#dialog-confirm" ).html(msg);
 $( "#dialog-confirm" ).dialog({
resizable: false,
title: 'title',
height:300,
modal: true,
buttons: {
    "Ok": function() {
        $( this ).dialog( "close" );
        window.location.href = url;
        },
    "Cancel": function() {
        $( this ).dialog( "close" );
        }
    }
    });
   } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-22T21:22:44.703

改为这样做：

```
var boolOK = confirm('Do you want to leave');

if (boolOK == true)
warning.onclick; 
```

更多解释在这里 [http://www.javascriptkit.com/javatutors/alert2.shtml](http://www.javascriptkit.com/javatutors/alert2.shtml)

# python - PyOpenCl：如何调试分段错误？

> ID：14468147
> 
> 赞同：16
> 
> 时间：2013-01-22T21:15:03.937
> 
> 标签：python, debugging, segmentation-fault, opencl, pyopencl

我有带有 OpenCL C 内核代码的 PyOpenCL 代码。当我运行我的应用程序时，我发现了分段错误错误。如何使用调试器或其他开发工具调试此类错误？我不知道该怎么做才能找出问题所在。我想到了选项`printf`或其他东西，但我想使用更强大的东西。

我相信内核代码中的错误，所以我想先调试内核代码。

UPD。我在 linux（Arch Linux，3.6.11），python 2 或 3，PyOpenCl 2012.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T19:59:54.240

内核调试是一个依赖于实现的事情。在 Linux 上，我发现最好的方法是在 CPU 上使用 AMD 的 CL 实现，使用 -g 编译内核，然后使用 gdb。他们的编程指南中对此进行了说明，如下：

[AMD CL 文档页面](http://developer.amd.com/tools/heterogeneous-computing/amd-accelerated-parallel-processing-app-sdk/documentation/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-14T00:58:42.790

如果您使用的是 nvidia 而不是 ATI/AMD GPU，则 nvidia SDK 中的 OpenCL 支持...低于预期。

英特尔为他们最近的处理器提供了一个基于 CPU 的 OpenCL SDK，参见[http://software.intel.com/en-us/vcsource/tools/opencl-sdk-2013——](http://software.intel.com/en-us/vcsource/tools/opencl-sdk-2013)（使用他们在 Ubuntu 上提供的 RPM 包，您需要在每个包上运行“fakeroot alien --to-deb”，然后运行“dpkg -i”）。

使用该 SDK，您需要将“-g”和“-s 文件名”标志添加到 build() 中的编译器选项。（如果你的内核在你的程序中只作为一个字符串存在，你可以在运行之前添加代码将它保存到一个文件中。）然后尝试“gdb --args python-cmd”，你可以通过输入“break”开始调试mykernel”，当被问及是否要等待“mykernel”符号被动态加载时回答 Y，然后键入“run”。

一旦你运行调试器手动输入命令，我建议制作一个可执行的 shell 脚本来使用调试器启动你最喜欢的 .py 文件（这也是一个方便的地方，可以在你的应用程序的启动中添加hackery，例如 python -m unittest， PYTHONPATH、virtualenv、LD_LIBRARY_PATH、LD_PRELOAD 等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:25:40.197

如果不完全测试您的软件套件，我不会贸然下结论。您正在运行[PyOpenCl](http://git.tiker.net/pyopencl.git)的最新发布版本。有可能您将某些内容传递给未正确填充的模块，并且后端模块在使用未正确填充的内容之前没有进行必要的错误检查（如果没有任何代码，不可能真正帮助您进行调试）提供）

您是否尝试过使用[python 调试器](http://docs.python.org/2/library/pdb.html)`import pdb; pdb.set_trace()`在不同的 pyopencl 调用之前设置不同的断点 ( )，甚至查看代码中的段错误？这绝对应该是你的首要任务。当您发现它在哪里出现段错误时，您需要仔细查看 pyopencl 示例/api 以了解您出错的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-11T11:41:18.997

分段错误通常是因为内核中的内存访问错误。有一个很酷的工具可以检测错误的内存访问，类似于 valgrind：[https](https://github.com/jrprice/Oclgrind) ://github.com/jrprice/Oclgrind 。结合内核代码中的一些 printfs，它可以更容易地定位问题。

# c# - C# SSIS 包用户

> ID：14468153
> 
> 赞同：0
> 
> 时间：2013-01-22T21:15:45.857
> 
> 标签：c#, ssis, impersonation

我正在尝试从我自己工作的 C# 运行 SSIS 包。我遇到的问题是我想让用户即时设置包。我设置了一个似乎正在工作的模拟类，但是当从 IIS 运行该包时会抛出错误。但是，当我从 VS2010 调试运行它时，它确实有效。

```
 using (ImpersonatedUser iu = new ImpersonatedUser("username", "domain", "password"))
   {
        Application app = new Application();
        Package package = null;
        MyEventListener eventListener = new MyEventListener();

        app.PackagePassword = "packagepassword";
        package = app.LoadPackage(@"packagepath", null);

        Microsoft.SqlServer.Dts.Runtime.DTSExecResult results = package.Execute(null, null, eventListener, null, null);
        if (results == Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure)
        {
            foreach (Microsoft.SqlServer.Dts.Runtime.DtsError local_DtsError in package.Errors)
            {
                lblErrorOutput.Text += "<br />Package Execution results: " + local_DtsError.Description.ToString();
                lblErrorOutput.Text += eventListener.output;
            }
        }
        else
        {
            lblErrorOutput.Text = WindowsIdentity.GetCurrent().Name;
            lblErrorOutput.Text += eventListener.output;
        }
    } 
```

这是从调试运行时的输出，然后是从 IIS 运行时（在同一台计算机上）

```
domain\user
Information: Microsoft.SqlServer.Dts.Runtime.TaskHost/SSIS.Pipeline : Validation phase is beginning.
Information: Microsoft.SqlServer.Dts.Runtime.TaskHost/SSIS.Pipeline : Validation phase is beginning.
Information: Microsoft.SqlServer.Dts.Runtime.TaskHost/SSIS.Pipeline : Prepare for Execute phase is beginning.
Information: Microsoft.SqlServer.Dts.Runtime.TaskHost/SSIS.Pipeline : Pre-Execute phase is beginning.
Information: Microsoft.SqlServer.Dts.Runtime.TaskHost/Source File [1] : The processing of file "filepathandname.csv" has started.
Information: Microsoft.SqlServer.Dts.Runtime.TaskHost/SSIS.Pipeline : Validation phase is beginning.
Information: Microsoft.SqlServer.Dts.Runtime.TaskHost/SSIS.Pipeline : Prepare for Execute phase is beginning.
Information: Microsoft.SqlServer.Dts.Runtime.TaskHost/SSIS.Pipeline : Pre-Execute phase is beginning.
Information: Microsoft.SqlServer.Dts.Runtime.TaskHost/Flat File Destination [16] : The processing of file "filepathandname.csv" has started. 
```

然后当通过 IIS

```
 domain\user
Information: Microsoft.SqlServer.Dts.Runtime.TaskHost/SSIS.Pipeline : Validation phase is beginning.
Information: Microsoft.SqlServer.Dts.Runtime.TaskHost/SSIS.Pipeline : Validation phase is beginning.
Error in: Microsoft.SqlServer.Dts.Runtime.Package/Connection manager "SourceConnectionFlatFile" : The file name property is not valid. The file name is a device or contains invalid characters.
Information: Microsoft.SqlServer.Dts.Runtime.TaskHost/SSIS.Pipeline : Prepare for Execute phase is beginning.
Error in: Microsoft.SqlServer.Dts.Runtime.Package/Connection manager "SourceConnectionFlatFile" : The file name property is not valid. The file name is a device or contains invalid characters.
Information: Microsoft.SqlServer.Dts.Runtime.TaskHost/SSIS.Pipeline : Pre-Execute phase is beginning.
Error in: Microsoft.SqlServer.Dts.Runtime.Package/Connection manager "SourceConnectionFlatFile" : The file name property is not valid. The file name is a device or contains invalid characters.
Information: Microsoft.SqlServer.Dts.Runtime.TaskHost/SSIS.Pipeline : Execute phase is beginning.
Information: Microsoft.SqlServer.Dts.Runtime.TaskHost/Destination -  : The final commit for the data insertion in "component "Destination" (94)" has started.
Error in: Microsoft.SqlServer.Dts.Runtime.TaskHost/File System Task : An error occurred with the following error message: "Could not find file 'filepathandname.csv'.". 
```

我看到的一切都让我相信它基于权限并且运行包的用户无权访问该文件。通过调试运行时，它在我登录计算机时运行，但是当通过 IIS 运行时，它是运行它的 DefaultAppPool。

我添加的检查“lblErrorOutput.Text = WindowsIdentity.GetCurrent().Name;” 正在向我展示我期望的用户。我不太明白发生了什么。包执行是否忽略了模拟用户？如果是这样，我该如何服用。

谢谢

# jquery - 如果选中复选框，则将类添加到父元素

> ID：14468156
> 
> 赞同：5
> 
> 时间：2013-01-22T21:15:55.200
> 
> 标签：jquery, css, checkbox, parent, addclass

我有一个带有复选框的表格，如下所示：

```
<td class="table-col" >
  <div class="group-one" >
    <input type="checkbox"  />
  </div>
</td> 
```

我想要做的是选中复选框以将“选定”类应用于“table-col”。

```
if ($('.table-col').find(':checked')) {
    $(this).parent().parent().addClass('selected');
} 
```

我看了很多帖子，上面有类似的解决方案，但它似乎对我不起作用。我不确定为什么，但这*指向*的是 HTMLDocument 而不是元素。

（编辑）在此页面上将有标记的复选框，我想应用“选中”的复选框。在@cimmonon 的评论中提到了事件处理。我需要查一下这个。也感谢您的回答！

（编辑）

```
<td class="table-col">
<div class="group-one">
    <input type="checkbox" checked="checked"/>
</div>
</td> 
```

因此，在页面加载之后，将会有标记的框（我认为它们将始终包含已*选中的 =“已检查”* ——不确定）复选框。这些是需要新风格的人。无需单击它们并应用样式的交互，但仍然非常酷。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T21:22:54.110

尝试这个...

```
$(":checkbox").on('click', function(){
     $(this).parent().toggleClass("checked");
}); 
```

[例子](http://jsfiddle.net/LE46Q/2/)

问候。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T21:25:56.897

您可以使用`.change()`绑定到`change`事件；然后，使用`.closest()`and在祖父元素`.toggleClass()`中添加或删除类名。`selected`

```
$("input:checkbox").change(function(){
  $(this).closest(".table-col").toggleClass('selected', this.checked);
}); 
```

[看这里。](http://jsfiddle.net/uTNNs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T21:23:14.263

给你的复选框起个名字，这样 jQuery 就可以钩住它：

```
$('input[name=foo]').is(':checked') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T21:38:58.053

$(this) 只会引用您的复选框（以便您可以根据您的代码访问它的祖父级），当您处于通过将其分配给复选框元素而调用的事件处理程序中时，正如@cimmanon 所暗示的那样。

因此，如果您将 .change() 处理程序分配给您的复选框，则 $(this) 将引用您的复选框。您实际上可以在一行中执行此操作，因为您可能想要打开或关闭“选定”类：

```
 $(":checkbox").change(function () {
    $(this).parent().parent().toggleClass('selected');
         }); 
```

否则 $(this) 指的是引发事件的控件，例如，如果您正在执行此代码以响应按钮单击处理程序，则 $(this) 将引用该按钮。

# python - 理解 numpy.r_() 连接的语法

> ID：14468158
> 
> 赞同：15
> 
> 时间：2013-01-22T21:16:08.907
> 
> 标签：python, numpy, concatenation

[我在函数r_](http://docs.scipy.org/doc/numpy/reference/generated/numpy.r_.html)的 numpy 文档中阅读了以下内容：

> 字符串整数指定沿哪个轴堆叠多个逗号分隔的数组。一个由两个逗号分隔的整数组成的字符串允许指示强制每个条目作为第二个整数进入的最小维数（要连接的轴仍然是第一个整数）。

他们举了这个例子：

```
>>> np.r_['0,2', [1,2,3], [4,5,6]] # concatenate along first axis, dim>=2
array([[1, 2, 3],
       [4, 5, 6]]) 
```

我不明白，字符串到底`'0,2'`指示 numpy 做什么？

除了上面的链接，还有其他网站有更多关于这个功能的文档吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T21:39:29.560

`'n,m'`告诉`r_`连接`axis=n`，并产生至少具有`m`维度的形状：

```
In [28]: np.r_['0,2', [1,2,3], [4,5,6]]
Out[28]: 
array([[1, 2, 3],
       [4, 5, 6]]) 
```

所以我们沿着axis=0连接，因此我们通常期望结果具有 shape `(6,)`，但是因为`m=2`，我们告诉`r_`该形状必须至少是二维的。所以我们得到了 shape `(2,3)`：

```
In [32]: np.r_['0,2', [1,2,3,], [4,5,6]].shape
Out[32]: (2, 3) 
```

看看当我们增加时会发生什么`m`：

```
In [36]: np.r_['0,3', [1,2,3,], [4,5,6]].shape
Out[36]: (2, 1, 3)    # <- 3 dimensions

In [37]: np.r_['0,4', [1,2,3,], [4,5,6]].shape
Out[37]: (2, 1, 1, 3) # <- 4 dimensions 
```

您可以使用的任何操作`r_`也可以使用更具可读性的数组构建函数之一来完成，例如`np.concatenate`, `np.row_stack`, `np.column_stack`, `np.hstack`, `np.vstack`or `np.dstack`，尽管它可能还需要调用`reshape`.

即使调用了 reshape，其他函数甚至可能更快：

```
In [38]: %timeit np.r_['0,4', [1,2,3,], [4,5,6]]
10000 loops, best of 3: 38 us per loop
In [43]: %timeit np.concatenate(([1,2,3,], [4,5,6])).reshape(2,1,1,3)
100000 loops, best of 3: 10.2 us per loop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T21:38:31.127

字符串 '0,2' 告诉 numpy 沿轴 0（第一个轴）连接并将元素包装在足够的括号中以确保二维数组。考虑以下结果：

```
for axis in (0,1):
    for minDim in (1,2,3):
        print np.r_['{},{}'.format(axis, minDim), [1,2,30, 31], [4,5,6, 61], [7,8,90, 91], [10,11, 12, 13]], 'axis={}, minDim={}\n'.format(axis, minDim)

[ 1  2 30 31  4  5  6 61  7  8 90 91 10 11 12 13] axis=0, minDim=1

[[ 1  2 30 31]
 [ 4  5  6 61]
 [ 7  8 90 91]
 [10 11 12 13]] axis=0, minDim=2

[[[ 1  2 30 31]]

 [[ 4  5  6 61]]

 [[ 7  8 90 91]]

 [[10 11 12 13]]] axis=0, minDim=3

[ 1  2 30 31  4  5  6 61  7  8 90 91 10 11 12 13] axis=1, minDim=1

[[ 1  2 30 31  4  5  6 61  7  8 90 91 10 11 12 13]] axis=1, minDim=2

[[[ 1  2 30 31]
  [ 4  5  6 61]
  [ 7  8 90 91]
  [10 11 12 13]]] axis=1, minDim=3 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-01-02T19:17:42.303

您突出显示的段落是两个逗号分隔的整数语法，它是三个逗号分隔的语法的特例。一旦你理解了三个逗号分隔的语法，两个逗号分隔的语法就到位了。

您的示例等效的三个逗号分隔的整数语法为：

```
np.r_['0,2,-1', [1,2,3], [4,5,6]] 
```

为了提供更好的解释，我将上面的内容更改为：

```
np.r_['0,2,-1', [1,2,3], [[4,5,6]]] 
```

上面有两个部分：

1.  逗号分隔的整数字符串

2.  两个逗号分隔的数组

逗号分隔的数组具有以下形状：

```
np.array([1,2,3]).shape
(3,)

np.array([[4,5,6]]).shape
(1, 3) 
```

换句话说，第一个“数组”是“一维的”，而第二个“数组”是“二维的”。

首先`2`in`0,2,-1`意味着每个都`array`应该升级，以便它被强制至少为`2-dimensional`. 由于第二个`array`已经`2-dimensional`是它不受影响。然而，第一个`array`是`1-dimensional`并且为了使其`2-dimensional` `np.r_`需要在其形状中添加一个 1 以`tuple`使其成为`(1,3)`or `(3,1)`。这就是`-1`in`0,2,-1`发挥作用的地方。它基本上决定了额外的 1 需要放置`tuple`在`array`. `-1`是默认值，并将`1`（或`1s`如果需要更多尺寸）放在形状的前面`tuple`（我将在下面进一步解释原因）。这会将第一个`array's`形状`tuple`变成`(1,3)`这与第二个`array's`形状相同`tuple`。`0`in表示生成的`0,2,-1`数组需要沿“0”轴连接。

由于`arrays`现在两者都具有连接形状`tuple`是`(1,3)`可能的，因为如果您将连接轴（上例中的维度 0，其值为 1）放在一边，`arrays`其余维度都相等（在这种情况下，剩余维度的值两者`arrays`都是 3)。如果不是这种情况，则会产生以下错误：

> ValueError：除连接轴外的所有输入数组维度必须完全匹配

现在，如果您连接两个`arrays`具有形状`(1,3)`的结果`array`将具有形状`(1+1,3) == (2,3)`，因此：

```
np.r_['0,2,-1', [1,2,3], [[4,5,6]]].shape
(2, 3) 
```

当`0`逗号分隔字符串中的第三个整数使用 a 或正整数时，该整数确定`array's`升级后的形状中每个形状元组的开始`tuple`（仅适用于`arrays`需要升级其维度的那些）。例如`0,2,0`，对于`arrays`要求形状升级，`array's`原始形状`tuple`应从升级形状的维度 0 开始`tuple`。对于`array` `[1,2,3]`它的形状`tuple` `(3,)`，`1`将放置在`3`. 这将导致形状`tuple`等于`(3,1)`并且您可以看到原始形状从升级后的形状`tuple` `(3,)`的维度开始。意味着对于`0``tuple``0,2,1``[1,2,3]``array's`shape`tuple` `(3,)`应该从升级后的 shape 元组的维度 1 开始。这意味着 1 需要放置在维度 0 处。生成的形状元组将是`(1,3)`。

当逗号分隔字符串中的第三个整数使用负数时，负号后面的整数决定了原始形状元组的结束位置。当原始形状元组是`(3,)` `0,2,-1`意味着原始形状元组应该在升级后的形状元组的最后一个维度结束，因此 1 将被放置在升级后的形状元组的维度 0 处，升级后的形状元组将是`(1,3)`。现在`(3,)`在升级后的形状元组的维度 1 处结束，这也是升级后的形状元组的最后一个维度（原始数组是`[1,2,3]`，升级后的数组是`[[1,2,3]]`）。

```
np.r_['0,2', [1,2,3], [4,5,6]] 
```

是相同的

```
np.r_['0,2,-1', [1,2,3], [4,5,6]] 
```

最后，这是一个具有更多维度的示例：

```
np.r_['2,4,1',[[1,2],[4,5],[10,11]],[7,8,9]].shape
(1, 3, 3, 1) 
```

逗号分隔的数组是：

`[[1,2],[4,5],[10,11]]`具有形状元组`(3,2)`

`[7,8,9]`具有形状元组`(3,)`

两者都`arrays`需要升级到`4-dimensional arrays`. 原始`array's`形状元组需要从维度 1 开始。

因此，对于第一个数组，形状变为`(1,3,2,1)`从`3,2`维度 1 开始，因为需要添加两个 1 才能使其`4-dimensional`一个 1 放置在原始形状元组之前，一个 1 放置在之后。

使用相同的逻辑，第二个数组的形状元组变为`(1,3,1,1)`.

现在`arrays`需要使用维度 2 作为连接轴将两者连接起来。从每个数组的升级后的形状元组中消除维度 2 会导致`(1,3,1)`两者的元组`arrays`。由于生成的元组是相同的，因此可以连接数组并将连接的轴相加以产生`(1, 3, 2+1, 1) == (1, 3, 3, 1)`.

# teamcity - TeamCity：防止 2 个构建同时运行

> ID：14468161
> 
> 赞同：15
> 
> 时间：2013-01-22T21:16:21.097
> 
> 标签：teamcity, teamcity-7.1

我不希望 Build Config A 和 Build Config B 同时运行。这是因为它们共享无法同时访问的相同资源。但是，每个构建配置都由单独的代理运行，因此它们可以同时运行。

相反，我希望一个构建配置在触发时等待另一个构建配置（如果它正在运行）完成。例如，如果 Build Config B 开始运行但 Build Config A 已经在运行，则 B 将等到 A 完成，然后 B 将运行。

我不认为快照依赖会起作用，因为它假设一个配置依赖于另一个，这在我的情况下是不正确的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T10:01:55.790

Keith，有两个插件可以帮助你：第一个是[Groovy 插件](http://confluence.jetbrains.net/display/TW/Groovy+plug)。它具有在所有项目上创建名称锁定的功能。

第二个是[TeamCity.SharedResources](http://confluence.jetbrains.net/display/TW/TeamCity+Shared+Resources)。它具有定义共享资源并使用读写锁锁定它们的功能。但是，此插件中定义的资源是按项目定义的。我们正在积极开发这个插件，所以欢迎您在[我们的跟踪器中观看它的页面](http://youtrack.jetbrains.com/issue/TW-3798)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-24T22:57:14.503

为了快速而肮脏，只需在项目的兼容代理选项卡上制定规则。他们必须在包含 xxx 的代理名称上运行（无论是什么），那么这些构建只能在该代理上运行，并且永远不会同时运行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-02T08:16:03.730

在最新版本的 TeamCity 中，您可以配置此参数。转到编辑配置设置 -> 编辑配置设置并设置参数：

*限制同时运行的构建数量（0 - 无限制）*

# vba - VB比较多个工作簿中的两个单元格范围以及是否将副本匹配到不同的单元格

> ID：14468162
> 
> 赞同：0
> 
> 时间：2013-01-22T21:16:29.633
> 
> 标签：vba, excel, compare

我整天都在想办法解决这个问题。这是我需要完成的：

1.  使用 GetFile 选择多个工作簿而不打开它们。
2.  将循环中的选定工作簿的单元格 A2 与参考工作簿进行比较。
3.  如果所选工作簿的单元格 A2 等于 A 列中包含的参考工作簿中数值的数值，则将匹配的参考工作簿单元格的相应单元格中的 B 列文本复制/粘贴到所选工作簿的 M2 中。

听起来很复杂，但让我演示一下。字母代表列名。

选定的工作簿 A2=12 M2= ""

参考手册 A2=12 B2=牛奶、蛋白质

期望的结果：
选定的工作簿 A2=12 M2=牛奶、蛋白质

到目前为止，这是我拥有的代码：

```
Sub Click() 
Dim rCell As Range, vVal1, vVal2 
Dim wbCheck As Workbook 

For Each rCell In Workbooks("2.xls").Worksheets(1).Range("A1:C100") 
    vVal1 = rCell 
    vVal2 = ThisWorkbook.Worksheets(1).Range(rCell.Address) 
    If IsNumeric(vVal1) And IsNumeric(vVal1) Then 
        If vVal1 = vVal2 Then 
            rCell.Interior.ColorIndex = 3 
        ElseIf vVal1 < > vVal2 Then  
        End If 
    End If 
Next rCell 
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:06:18.060

为什么你需要一个 VBA 代码呢？

这可以使用 Excel 公式来实现。

将其粘贴`M2`并复制下来

```
=IF(A2='C:\[Ref.xlsx]Sheet1'!A2,'C:\[Ref.xlsx]Sheet1'!B2,"") 
```

**我的假设**（请根据情况更改）

1.  参考文件名为 Ref.xlsx
2.  您正在从`Sheet1`参考文件中提取数据
3.  Ref.xlsx 在 C 中：

**编辑**

即使你想使用 VBA，你也可以这样做。

```
Sub Sample()
    Application.Calculation = xlCalculationManual

    ThisWorkbook.Sheets("Sheet1").Range("M2").Formula = _
    "=IF(A2='C:\[Sample.xlsx]Sheet1'!A2,'C:\[Sample.xlsx]Sheet1'!B2,"""")"

    Application.Calculation = xlCalculationAutomatic
End Sub 
```

由于您在第一点中提到的内容，上述公式或代码是有益的`Using GetFile select a number of workbooks without opening them.`如果您不想打开文件，那么`formula`or`formula in VBA`是要走的路:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:29:36.330

我解决了我自己的问题。答案是使用 VLookup。

=VLOOKUP(I2, 'C:\Desktop\Merge[ISReference.xlsx]Reference'!B2:G1923, 6, FALSE)

我很惊讶没有人向我提出这个建议。鉴于它的简单性，我能够将此函数构建到我构建的一些代码中，以通过表单上的 FSO 文件对话框选择器运行，并使用 Vlookup 链接外部工作簿。

感谢 Siddarth 给出了嵌入函数而不是疯狂迭代循环的正确方向。

# kendo-ui - KendoUI Grid 添加新记录弹出窗口，其中包含未在架构中定义的下拉列表

> ID：14468166
> 
> 赞同：0
> 
> 时间：2013-01-22T21:16:40.013
> 
> 标签：kendo-ui, kendo-grid

我正在使用编辑器模板通过弹出窗口显示剑道网格​​的下拉列表。填充网格的初始查询使用`/?$expand=ContactType`, where`ContactType`是查找值并且`Contact`是父记录。这工作正常，网格显示正确的数据和关联的`ContactType`. 单击`edit`也可以工作，因为我已经定义了一个编辑器模板来显示下拉菜单并选择了下拉菜单中的正确值。

但是我的问题是添加新记录。当我点击`add`我得到

> ContactType 未定义。

这是有道理的，`ContactType`因为我使用的是 expand，所以在 datagrid 的 datsource 模式中没有明确定义。我可以添加`ContactType`到模型定义中，没问题，并且错误消失了 - 但是在发送更新时`ContactType`是一个空字符串并且没有获取实际选择的值。 `ContactType`是与`Contact`我理解的相关实体，您不能使用它们确实具有 HierarchicalDataSource 但仅适用于树视图的相关实体来定义模型。

因此，给定网格弹出编辑器中的下拉列表，您如何获得`Add new`发送选定的下拉值？

这是一些代码，TIA 寻求帮助

```
<script id="popup_editor" type="text/x-kendo-template">
    <div class="k-edit-label">
    <label for="firstName">First Name</label>
    </div>
    <input type="text" name="firstName"  data-bind="value:firstName" />

    <div class="k-edit-label">
    <label for="middleName">Middle Name</label>
    </div>
    <input type="text" name="middleName"  data-bind="value:middleName" />

    <div class="k-edit-label">
    <label for="lastName">Last Name</label>
    </div>
    <input type="text" name="lastName"  data-bind="value:lastName" />

    <input name="ContactType" data-source="myDropdownDS" data-text-field="name"
    data-value-field="__KEY" data-bind="value:ContactType.__KEY" data-role="dropdownlist" />
</script>

<script>

    //Local
    var crudServiceBaseUrl = "http://127.0.0.1:8081/cors/";
    var myGridDS = new kendo.data.DataSource({
        type : "json",
        transport : {
            read : {
                url : crudServiceBaseUrl + "Contact" + "/?$expand=ContactType",
                dataType : "json",
                type : "GET",
                complete : function(jqXHR, textStatus) {
                    textStatus = "read";
                }
            },
            update : {
                url : crudServiceBaseUrl + "Contact" + "/?$method=update",
                dataType : "json",
                type : "POST",
                complete : function(jqXHR, textStatus) {
                    textStatus = "update";
                }
            },
            destroy : {
                url : crudServiceBaseUrl + "Contact" + "/?$method=delete",
                type : "GET",
                complete : function(jqXHR, textStatus) {
                    textStatus = "destroy";
                }
            },
            create : {
                url : crudServiceBaseUrl + "Contact" + "/?$method=update",
                dataType : "json",
                type : "POST",
                complete : function(jqXHR, textStatus) {
                    textStatus = "create";
                }
            },
            errors : function(response) { 
                var errorData = $.parseJSON(e.responseText);
                alert(errorData.errorMessage);
                //$("#loading").innerHtml = "error";
            },
            parameterMap : function(options, operation) {
                if (operation == "create") { 
                    return JSON.stringify({
                        "__ENTITIES" : options.models
                    });
                } else if (operation == "update") { 
                    var isEdit = true
                    var myParentEntity = "Contact"
                    var myData = options.models[0];
                    //uri gets added after first edit from Wakanda response, not needed and causes update to fail so delete
                    // delete myData.uri;
                    //

                    configureDataRowRelations(myParentEntity, myData, isEdit)
                    return JSON.stringify({
                        "__ENTITIES" : options.models
                    });
                }

            }
        },
        serverPaging : true,
        serverSorting : true,
        serverFiltering : true,
        batch : true,
        pageSize : 30,
        schema : {
            model : {
                id : "__KEY",
                fields : {
                    __KEY : {
                        type : "string"
                    },
                    __STAMP : {
                        type : "number"
                    },
                    ID : {
                        editable : false,
                        nullable : true
                    },
                    firstName : {
                        type : "string",
                        validation : {
                            required : true
                        }
                    },
                    middleName : {
                        type : "string"
                    },
                    lastName : {
                        type : "string",
                        validation : {
                            required : true
                        }
                    },
                    ContactType : {}
                }
            },
            data : "__ENTITIES"
        }
    });

    var myDropdownDS = new kendo.data.DataSource({
        type : "json",
        transport : {
            read : {
                url : crudServiceBaseUrl + "ContactType",
                dataType : "json",
                type : "GET",
            }
        },
        batch : true,
        pageSize : 30,
        schema : {
            model : {
                id : "__KEY",
                fields : {
                    __KEY : {
                        type : "string"
                    },
                    __STAMP : {
                        type : "number"
                    },
                    ID : {
                        editable : false,
                        nullable : true
                    },
                    name : {
                        type : "string",
                        validation : {
                            required : true
                        }
                    }
                }
            },
            data : "__ENTITIES"
        }
    });

    $('#PopupContactContactTypeGrid').kendoGrid({
        selectable : "row",
        filterable : true,
        pageable : true,
        sortable : true,
        dataSource : myGridDS,
        toolbar : ["create"],
        columns : [{
            field : "ID"
        }, {
            field : "firstName",
            title : "First Name"
        }, {
            field : "middleName",
            title : "Middle Name"
        }, {
            field : "lastName",
            title : "Last Name"
        }, {
            field : "ContactType.name",
            title : "Contact Type"
        }, {
            command : ["edit", "destroy"],
            title : "&nbsp;",
            width : "210px"
        }],
        editable : {
            mode : "popup",
            template : $("#popup_editor").html()
        },

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:37:10.067

如果在您的情况下该值未填充到输入中，则可能是由于使用了与字段名称不同的名称

所以我`data-bind="value:ContactType.__KEY"` 改为`data-bind="value:ContactType"`

由于缺乏好的文档和示例，这通常不是 Telerik 的问题，这需要很长时间才能解决。

# c# - 如果发生错误，中止 webtest

> ID：14468173
> 
> 赞同：4
> 
> 时间：2013-01-22T21:17:07.097
> 
> 标签：c#, visual-studio-2010, mstest, load-testing, webtest

使用 VS2010 的负载测试功能和记录的 webtests。

我在记录的网络测试中遇到级联错误问题。也就是说，如果一个请求失败，其他几个请求也会失败。这会在日志中造成很多混乱，因为通常只有第一个错误是相关的。

有没有办法让失败的验证规则在失败点终止 web 测试，而不运行其余的请求？

（要清楚，我仍然想继续进行一般的负载测试，只需停止该特定测试用例的特定迭代）

这是一些示例代码，演示了我正在尝试做的事情：

```
using System.ComponentModel;
using Microsoft.VisualStudio.TestTools.WebTesting;

namespace TestPlugInLibrary
{
    [DisplayName("My Validation Plugin")]
    [Description("Fails if the URL contains the string 'faq'.")]
    public class MyValidationPlugin : ValidationRule
    {
        public override void Validate(object sender, ValidationEventArgs e)
        {
            if (e.Response.ResponseUri.AbsoluteUri.Contains("faq"))
            {
                e.IsValid = false;
                // Want this to terminate the running test as well.
                // Tried throwing an exception here, but that didn't do it.
            }
            else
            {
                e.IsValid = true;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T23:45:57.200

我找到了一个很好的解决方案。[这里](http://blogs.msdn.com/b/slumley/archive/2006/09/21/stopping-a-webtest-on-a-request-error.aspx)有一个博客详细介绍了它，但简短的版本是使用 e.WebTest.Stop()。这会中止当前测试的当前迭代，同时根据需要保持运行的其余部分完好无损。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T22:36:59.663

使用[Assert.Fail()](http://msdn.microsoft.com/en-us/library/ms243700%28v=vs.100%29.aspx)。这将停止测试并抛出[AssertFailedException](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assertfailedexception%28v=vs.100%29.aspx)，就像任何失败的断言一样。

```
if (e.Response.ResponseUri.AbsoluteUri.Contains("faq"))
{
    e.IsValid = false;
    Assert.Fail("The URL contains the string 'faq'.");
} 
```

这将只停止特定的测试。在负载测试结束时，您可以看到由于此异常而失败的测试总数。

# vba - 在 Excel 宏中创建 CSE 数组公式

> ID：14468174
> 
> 赞同：0
> 
> 时间：2013-01-22T21:17:09.423
> 
> 标签：vba, excel, excel-formula

* * *

在名为“Sheet2”的 Excel 工作表的单元格 A1 中，有以下公式（CSE 数组公式）

```
{=INDEX(Data1, MATCH(F26&G26,Data2&Data3,0),7)}
Data1 = Sheet1!$D$3:$J$604
Data2 = Sheet1!$D$3:$D$604
Data3 = Sheet1!$D$3:$E604 
```

我想在 VBA 宏中重写它，下面是我到目前为止尝试过的（是的，它给了我一个错误（错误：无法分配给数组）

```
Sub Button1_Click()

Dim var1(1 To 10) As Integer
Dim var2(1 To 10) As Integer

With Application.WorksheetFunction
   var1 = .Match((F26 And G26), (Worksheets("Sheet1").Range("D3:D604") And Worksheets("Sheet1").Range("E3:E604")), 0)
   var2 = .Index(Worksheets("Sheet1").Range("D3:J604"), var1, 7) 
   Range("A1").Value = var2
End With

End Sub 
```

请问有什么建议/更正吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:15:23.070

你为什么将`var1`和定义`var2`为数组？

要连接字符串，请使用与`&`公式相同的运算符：`(F26 & G26)`
要连接范围，请使用以下`Application.Union()`方法：`Application.Union(range1, range2)`

我从函数中假设，您想要返回您所在区域中与 F26 和 G26 中的值匹配的所有地点的数组

这将是我的尝试：

```
Option Explicit

Sub Button1_Click()
Dim Values()
Dim FindData
Dim Counter As Long
Dim DataPoints As Long
Dim ReturnData()
ReDim ReturnData(1)
DataPoints = 1

Values = Application.Union(Range("D3::D604"),Range("E3:E604"))
FindData = Range("F26").Value & Range("G26").Value

For Counter = LBound(Values) To UBound(Values)
    If findata = (Values(Counter, 1) & Values(Counter, 2)) Then
        ReDim Preserve ReturnData(DataPoints)
        ReturnData(DataPoints) = Counter
        DataPoints = DataPoints + 1
    End If
Next

Range("A1:A" & DataPoints) = ReturnData

End Sub 
```

# sql - 无法使 T-SQL 电子邮件警报正常工作

> ID：14468177
> 
> 赞同：0
> 
> 时间：2013-01-22T21:17:50.880
> 
> 标签：sql, sql-server, tsql

基本上，我正在尝试创建一个向我发送电子邮件警报的 T-SQL 语句。我附上了下面的查询。查询从 select 开始，在 Tat 0 结束，这是我想要执行并通过电子邮件返回这些数据的内容。

当我单独运行该查询时，它会很好地返回它。我怀疑它在整个 T-SQL 语句中的某些内容不正确。我有点像 db newb。任何澄清都会非常有帮助。

```
begin
EXEC msdb.dbo.sp_send_dbmail
@profile_name = 'TRGEmail',
@recipients = 'test@test.com',
@body = 'The cases below have reach TAT 3 for PRI X Ray. Please set accordingly.

',
@query = 'select
 PATIENTS.FirstName, PATIENTS.Lastname, 
 STUDIES.study_datetime, 
 STUDY_LIST_VIEW.tat, 
 PATIENTS.Patient_ID
 from
opalrad.dbo.INSTITUTIONS INSTITUTIONS, 
opalrad.dbo.PATIENTS PATIENTS, 
opalrad.dbo.STATUSES STATUSES, 
opalrad.dbo.STUDIES STUDIES, 
opalrad.dbo.studies_calc studies_calc, 
opalrad.dbo.STUDY_LIST_VIEW STUDY_LIST_VIEW, 
opalrad.dbo.TRANSCRIPTION_TEXT TRANSCRIPTION_TEXT

 where 
STUDIES.study_id = studies_calc.study_id AND 
STUDIES.institution_id = INSTITUTIONS.institution_id AND 
TRANSCRIPTION_TEXT.STUDY_ID = STUDIES.study_id AND 
TRANSCRIPTION_TEXT.STUDY_ID = studies_calc.study_id AND 
PATIENTS.Patient_ID = STUDIES.patient_id AND 
STUDY_LIST_VIEW.INSTITUTION_ID = INSTITUTIONS.institution_id AND 
STUDY_LIST_VIEW.PATIENT_ID = PATIENTS.Patient_ID AND 
STUDY_LIST_VIEW.study_id = STUDIES.study_id AND 
STUDY_LIST_VIEW.study_id = studies_calc.study_id AND 
((INSTITUTIONS.institution_id= 569 ) AND 
(STUDY_LIST_VIEW.tat=0))',
 @subject = 'PRI STAT 3 requiring attention';
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:29:41.240

使用网络服务器而不是 SQL Server 来实际发送电子邮件是否可行？如果是这样，我建议这样做。

使用数据库执行此操作在性能方面可能存在风险。游标通常很慢，因为它需要单独对每一行执行操作。在这种情况下，您正在为每一行调用一个过程，这会使事情变得更糟。

如果您只是将结果集返回到您的网络服务器，则可以使用那里的内置电子邮件功能。由于您的查询工作正常，您将解决您的数据库问题，并可能为您自己节省很多性能问题。

作为旁注，是否可以使用 CSS 进行样式而不是`<b>`标签？;)

编辑：如果您无法将此功能移至网络服务器，请尝试`set @tableHTML`在行尾添加单引号。它缺少一个结束引号，这会导致语法错误。此外，请确保在完成后释放光标：`DEALLOCATE cursorName`

# asp.net-mvc - ASP MVC 从数据库中搜索/返回所有值的最佳方法

> ID：14468179
> 
> 赞同：1
> 
> 时间：2013-01-22T21:17:55.973
> 
> 标签：asp.net-mvc

在 ASP MVC 淹没列表中使用默认值的情况下，我需要代码返回所有值或简单地忽略该特定搜索条件。

下面是我在视图和控制器中的代码。由于 '%' 似乎不起作用，是否还有另一个关键字/运算符可以完成这项工作？

看法：

```
 <form method="post">
          <select name="Table" title="Table" style="font-size:8pt;">
            <option value="%">--Table Name--</option>
            <option value="AgentContEd">CE</option>
            <option value="AgentProductTraining">PT</option>
          </select>
          <select name="IssueType" style="font-size:8pt;">
            <option value="%">--Issue Type--</option>
            <option value="W">Warning</option>
            <option value="E">Error</option>
          </select>
          <select name="Status" style="font-size:8pt;">
            <option value="%">--Status Type--</option>
            <option value="O">Open</option>
            <option value="U">Under Review</option>
          </select>

        <input type="image" src="@Url.Content("~/Content/Images/Filter.bmp")" alt="Filter" style="padding-top: 0px;" />
        <a href="#" style="padding-left: 30px;"></a>
        </form> 
```

控制器：

```
 public ViewResult Index(FormCollection dropDownSelection)
    {
        //security
        //if (!Security.IsViewer(User)) return RedirectToAction("Message", "Home", new { id = 2 });

        //if (ViewBag.Level == 0) return RedirectToAction("Message", "Home", new { id = 2 });

        string table = dropDownSelection["Table"];
        string issue = dropDownSelection["IssueType"];
        string status = dropDownSelection["Status"];

        var followUpItem = from follow in db.FollowUpItems
                           where follow.TableName.Equals(table) &&
                                 follow.IssueType.Equals(issue) &&
                                 follow.Status.Equals(status)
                           select follow;

        return View(followUpItem.ToList());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:24:09.833

您可以使用其中一种方法，也可以[`SqlMethods.Like`](http://msdn.microsoft.com/en-us/library/system.data.linq.sqlclient.sqlmethods.like.aspx)只使用该[`String.Contains`](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)方法。（请记住，如果您保留使用或任何其他 SQL 通配符，`String.Contains`则会出现问题。）`%`

因此，这三种变体看起来像：

```
var followUpItem = from follow in db.FollowUpItems
                   where SqlMethods.Like(follow.TableName, table) &&
                         follow.IssueType.Contains(issue) &&
                         follow.Status.Equals(status)
                   select follow; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T21:24:24.380

我还没有编译这个，但我猜你想要这样的东西：

```
 public ViewResult Index(FormCollection dropDownSelection)
    {
        //security
        //if (!Security.IsViewer(User)) return RedirectToAction("Message", "Home", new { id = 2 });

        //if (ViewBag.Level == 0) return RedirectToAction("Message", "Home", new { id = 2 });

        string table = dropDownSelection["Table"];
        string issue = dropDownSelection["IssueType"];
        string status = dropDownSelection["Status"];

        var followUpItem = from follow in db.FollowUpItems
                   where (follow.TableName.Equals(table) || table.Equals("%")) &&
                         (follow.IssueType.Equals(issue) || issue.Equals("%")) &&
                         (follow.Status.Equals(status) || status.Equals("%"))
                   select follow;

        return View(followUpItem.ToList());
    } 
```

# linux - System V msg_send 被 SIGKILL 中断

> ID：14468184
> 
> 赞同：0
> 
> 时间：2013-01-22T21:18:34.950
> 
> 标签：linux, system, ipc, sysv

我有一个像这样工作的多进程应用程序......

有一个父进程。父进程查询数据库以查找工作，然后派生子进程来处理该工作。孩子们通过 System V 消息队列与父母交流，以表明他们已经完成了他们的工作。当父进程接收到该消息时，它会更新数据库以指示工作已完成。

这工作正常，但我正在努力处理被杀死的父进程。

发生的情况是父母收到一个 SIGINT（来自 CTRL-C），然后向每个孩子发送 SIGKILL。如果子进程在接收到该信号时正在阻塞 Sys V 消息队列写入，则写入被信号“中断”并且阻塞取消，并且父进程永远不会知道子进程的工作已经完成，并且数据库永远不会更新.

这意味着下次我运行脚本时，它将重新运行任何阻塞在 System V 队列写入上的工作。

我还没有一个解决方案的好主意。理想情况下，我希望能够强制队列写入保持阻塞状态，即使它收到 SIGKILL 但我认为这样的事情是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:40:11.267

好吧`SIGKILL`，根据定义，对接收它的进程来说是立即致命的，并且无法被捕获或处理。

这就是为什么您应该只将它用作最后的手段，当进程没有响应更礼貌的关闭请求时。你的父进程应该从向子进程发送类似`SIGINT`或的东西开始，并且只有在他们没有在合理的时间内退出时`SIGTERM`才会重置。`SIGKILL`

`SIGINT`和之类的信号`SIGTERM`可能仍然会导致子系统调用返回，`EINTR`但您可以处理它并重试调用并让它在退出之前完成。

# python - 你如何找出在 Python 中过滤的其他 __label 字段

> ID：14468185
> 
> 赞同：0
> 
> 时间：2013-01-22T21:18:37.067
> 
> 标签：python, django

我有以下有效的代码，

```
for x in SomeModel.objects.filter(type__label='ABC'): 
```

现在'ABC'是标签之一。如何找出我可以过滤的其他标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:34:52.863

我不完全确定你在问什么。的可能值是（可能）模型字段中`type__label`的值。你可以得到一个列表：`label``Type`

```
Type.objects.values_list('label', flat=True) 
```

或者，正如大卫在评论中建议的那样，只需查看管理界面即可。

# mysql - 什么可能导致我的 Crystal Report 在运行时缺少数据库字段？

> ID：14468189
> 
> 赞同：1
> 
> 时间：2013-01-22T21:18:42.853
> 
> 标签：mysql, vb.net, visual-studio-2010, crystal-reports

**女士们先生们，**

到目前为止，我已经成功地以编程方式从 MySQL 数据库中提取记录，以从单个表中创建水晶报表。使用下面的代码，我正在尝试连接两个表并在报告中显示它们的匹配记录：

```
 Try
        Dim myConnectionString As String = "Server=" & FormLogin.ComboBoxServerIP.SelectedItem & ";Port=3306;Uid=parts;Password=parts;Database=accounting;"
        Dim dbConn As New MySqlConnection(myConnectionString)
        Dim dbQuery As String = "SELECT * " & _
                                "FROM cc_master a JOIN customer b ON b.accountNumber = a.customer_accountNumber;"
        Dim dbAdapter As New MySqlDataAdapter(dbQuery, dbConn)
        Dim dbTable As New DataTable
        dbAdapter.Fill(dbTable)
        Dim report As New rptCardListAll
        report.SetDataSource(dbTable)
        CrystalReportViewer1.ReportSource = report
        CrystalReportViewer1.Zoom(1)
    Catch ex As Exception
        'MsgBox(ex.Message)
    End Try 
```

我现在遇到的问题是，当报告在运行时运行时，除了我从 CUSTOMER 表中提取的一个字段之外，所有数据库记录都填充在报告中。下面是一个屏幕截图。注意空白的客户名称 - 这不应该是空白的，因为我知道事实上该字段中的每条记录都有数据。

当我使用 MySQL Workbench 直接在数据库上运行查询时，查询工作正常，所以我无法弄清楚为什么报告不会提取请求的信息。任何帮助将不胜感激，谢谢。

![报告快照](../Images/df096b94c09eed62b8d3f68c91346807.png)

**编辑：在包含缺失字段（nameCOMPANY）的调试期间显示 DataSet Visualizer 的屏幕截图**

![报告快照](../Images/1c16a35eb0f74b4bce33842cd64140bd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:47:13.350

**大家晚上好**

因此，经过数小时的阅读和网络搜索，我已经设法找到或更好地找到了解决问题的方法。

看起来即使我在 VS 中创建了一个 DataSet 并使用它来创建我的 CR 报告，但我实际上并没有在代码中使用该 DataSet。相反，我正在做的是在运行时创建一个新的 DataTable，用我的查询结果填充它，并将报告的数据源属性设置为它。

我应该做的是创建我的 DataSet 的一个实例（我之前创建并用于设计报表的那个），用我的查询结果填充它，并将报表的 datasource 属性设置为它。这使 CR 能够识别并尊重我之前在 DataSet 设计器中建立的表链接/关系。我还了解到，将 DataAdapter 与返回多个表的查询一起使用时，默认命名约定是“Table”，然后是“Table1”等等 - 有必要将这些映射到我在 DB 中的表的实际名称。

**因此，在应用了所有这些课程之后，我不得不重新编写代码，如下所示：**

```
 Dim report As New rptCardListAll
    Dim myConnectionString As String = "Server=" & FormLogin.ComboBoxServerIP.SelectedItem & ";Port=3306;Uid=parts;Password=parts;Database=accounting;"
    Dim dbConn As New MySqlConnection(myConnectionString)
    Dim dbQuery As String = "SELECT * FROM cc_master; " & _
                            "SELECT * FROM customer;"
    Dim dbAdapter As New MySqlDataAdapter(dbQuery, dbConn)
    With dbAdapter
        .TableMappings.Add("Table", "cc_master")
        .TableMappings.Add("Table1", "customer")
    End With
    Try
        Dim dbDataSet As New accountingDataSet
        dbAdapter.Fill(dbDataSet)
        report.SetDataSource(dbDataSet)
        CrystalReportViewer1.ReportSource = report
        CrystalReportViewer1.Zoom(1)
    Catch ex As Exception
        MsgBox(ex.Message, MsgBoxStyle.OkOnly, "An Error Has Occured....")
    End Try 
```

我的报告现在显示客户表中缺少的字段“nameCOMPANY”。

**信用：** 我要感谢 @halfer、@luchosrock 和 @EvilBob22 的帮助。此外，我在以下文件中感谢作者：

[http://developer-content.emc.com/developer/downloads/CrystalReport_ADO_Dataset.pdf](http://developer-content.emc.com/developer/downloads/CrystalReport_ADO_Dataset.pdf)

[如何用多个表填充数据集？](https://stackoverflow.com/questions/11345761/how-to-fill-dataset-with-multiple-tables)

# google-analytics - 谷歌分析：配置文件解决方法

> ID：14468190
> 
> 赞同：2
> 
> 时间：2013-01-22T21:18:43.000
> 
> 标签：google-analytics

目前，我的主要网站上有 50 多个微型网站。那就是我有一个主要的顶级域，并且我在该域的子文件夹中有 50 多个微型站点（并且还在增长）。

以前，我为单独的微型网站（不同的 GA 跟踪 ID）使用单独的 GA 网络属性，效果很好，我能够很好地跟踪每个站点的活动。但是，我通过电子邮件与 GA 工作人员交谈，他告诉我应该改用单个 GA 网络资产，并使用多个配置文件按子文件夹/微型站点对数据进行分段。出于很多原因，这似乎是合乎逻辑的，在一个 GA 会话中跟踪整个网站的用户是主要的。

无论如何，我有一个子文件夹，其中包含一系列微型站点，现在将近 40 个。我不一定需要为这些网站中的每一个都提供个人资料，但有几个重要的网站我需要单独和定期报告我想看看其他网站的流量如何正在做。

所以我的问题是：有没有一种方法可以在单个配置文件中将数据分段到 40 多个（并且还在增长）微型站点并查看每个站点的月度统计数据？有没有办法可以从每个微型站点加载带有统计信息（访问次数/浏览量）的个人资料仪表板？分割数据甚至是我应该看的吗？作为更高级的 GA 用户，您将如何解决这个问题？

非常感谢您的意见！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:31:59.797

jimdo ( [http://www.jimdo.com](http://www.jimdo.com) ) 为他们的 DIY 网站创建者提供了一个基于谷歌分析的统计工具。他们将数百个（通常是低流量）站点放在一个配置文件中，为每个站点设置一个具有唯一 ID 的自定义变量，并通过 Google API 查询结果，按站点 ID 分段（至少这是他们的一位创始人在几个月前的网络分析会议）。鉴于该解决方案适用于数百万个客户站点（他们声称为其客户托管 700 万个网站），基于唯一站点 ID 的分段似乎是一个非常可靠的想法。

更新：由于 Universal Analytics 不推荐使用自定义变量，因此您现在可以使用自定义维度来代替自定义变量。除此之外，该方法应该仍然有效。

# c++ - gpumat 和 mat 错误

> ID：14468191
> 
> 赞同：5
> 
> 时间：2013-01-22T21:18:43.353
> 
> 标签：c++, opencv

当我编译这个例子时：

```
#include <iostream>
#include "opencv2/opencv.hpp"
#include "opencv2/gpu/gpu.hpp"

int main (int argc, char* argv[])

{
    try
    {
        cv::Mat src_host = cv::imread("file.png", CV_LOAD_IMAGE_GRAYSCALE);
        cv::gpu::GpuMat dst, src;
        src.upload(src_host);

        cv::gpu::threshold(src, dst, 128.0, 255.0, CV_THRESH_BINARY);

        cv::Mat result_host = dst;
        cv::imshow("Result", result_host);
        cv::waitKey();
    }
    catch(const cv::Exception& ex)
    {
        std::cout << "Error: " << ex.what() << std::endl;
    }
    return 0;
} 
```

* * *

我收到以下错误：

```
threshold.cpp: In function ‘int main(int, char**)’:
threshold.cpp:19: error: conversion from ‘cv::gpu::GpuMat’ to non-scalar type ‘cv::Mat’ requested 
```

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T23:15:34.803

在当前版本的 OpenCV 中，`cv::Mat`该类没有重载赋值运算符或接受类型参数的复制构造函数`cv::gpu::GpuMat`。因此，您的代码的以下行将无法编译。

```
cv::Mat result_host = dst; 
```

有 2 种替代方法。

首先，您可以将 .`dst`作为构造函数的参数传递`result_host`。

```
cv::Mat result_host(dst); 
```

其次是你可以调用的`download`函数`dst`

```
cv::Mat result_host;
dst.download(result_host); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T23:13:46.527

看来您应该使用`download`方法`gpuMat`将其转换为`cv::Mat`：

```
//! downloads data from device to host memory. Blocking calls.
        void download(cv::Mat& m) const; 
```

请参阅[此文档](http://docs.opencv.org/modules/gpu/doc/data_structures.html#gpu-gpumat)。

# mongodb - 将 Mongo 副本集配置为仅复制某些集合

> ID：14468196
> 
> 赞同：6
> 
> 时间：2013-01-22T21:18:58.860
> 
> 标签：mongodb, replication, nosql

我有一个大约 3GB 的 mongo 数据库，里面有几十个集合。其中三个集合每秒处理约 300 个查询，而其他集合的处理量要低得多。我预计流量将继续快速增长。

我想设置一个副本集来处理高流量的集合。这个新实例不需要复制数据库的其余部分。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:32:27.190

目前似乎无法通过 mongodb 的内置功能来实现，唯一的办法就是想出自己的手动复制算法或使用第三方编写的其他一些工具。

[https://github.com/wordnik/wordnik-oss](https://github.com/wordnik/wordnik-oss)项目可能会根据以下帖子帮助您实现这一目标。

> [https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/Ap9V4ArGuFo](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/Ap9V4ArGuFo)

描述在复制中过滤文档的解决方法。

> [仅复制 MongoDB 中 {'public':true} 的文档](https://stackoverflow.com/questions/11371571/replicate-only-documents-where-publictrue-in-mongodb)

或者只是自己手动复制数据，这可能值得一试。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:59:07.843

不，现在不可能。您可以做的是将这些集合移动到另一个未复制的数据库中。但是，一旦这些集合也看到更高的流量，这将导致头痛，因此您需要将它们移动到您的“复制”-db。

但一般来说，如果您需要扩展，复制不是要走的路，它更适合 DR/故障转移。Replicaset Secondary 只能（可选）回答读取查询，但不能回答写入查询，这是您应该牢记的。因此，如果您的写入负载很高，这可能无法解决您的问题。
一旦您允许您的应用程序从辅助设备中读取数据，您就需要保持最终的一致性，这意味着您的应用程序不能保证总是看到最新的数据。这是由于异步复制到辅助节点造成的。
事实上，如果你配置你的 writeconcern，你可以解决这个问题，这样在所有副本上写入需要成功，然后才被认为已写入并且你的驱动程序返回。但这可能会显着减慢您的写入操作。

因此，为了扩展查询执行能力，我会选择[Sharding](http://docs.mongodb.org/manual/sharding/)。这在每个集合级别上是可能的，所有未分片的集合将保留在“默认分片”上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:06:52.627

不可能，但是如果数据大小如此之小并且这些集合没有更新，那么复制它们的唯一开销是辅助节点上的小存储大小。与编写自己的复制逻辑相比，这是一个相对较小的代价，特别是因为集合的大小不会增长。

# servicestack - ServiceStack translateTo 发回空对象

> ID：14468197
> 
> 赞同：2
> 
> 时间：2013-01-22T21:19:01.497
> 
> 标签：servicestack

我有以下响应类：

```
 public class PatientFindResponse : IHasResponseStatus
    {
        public class Patient
        {

            public int PeopleId { get; set; }

            public string FirstName { get; set; }

            public string LastName { get; set; }

        }

        public Patient Result { get; set; }
        public ResponseStatus ResponseStatus { get; set; }
    }
```

这是我的服务：

```
public class PatientFindService : IService
    {
        public ISessionFactory NHSessionFactory { get; set; }

        public PatientFindService(ISessionFactory sessionFactory)
        {
            NHSessionFactory = sessionFactory;
        }

        public object Execute(PatientFind request)
        {
            using (var session = NHSessionFactory.OpenSession())
            {

                var result = session.Load<MyCompany.MyProduct.Entities.People>(request.PeopleId);

                return new PatientFindResponse
                {
                    Result = result.TranslateTo<PatientFindResponse.Patient>()
                };

            }
        }
    }
```

var 结果具有加载模型的数据，但是 translateTo 创建和对象，其中值全部为空，属性与我的模型中的名称相同，尽管我的 DTO 中没有包含我的所有属性模型，不确定这是否是 translateTo 不起作用的原因，我没有收到任何错误。

这是我的模型：

```
using System;
using System;
using System.Collections.Generic;

namespace MyCompany.MyProduct.Entities
{
    [Serializable]
    public partial class People
    {
        public People()
        {
            ShrEpisodes = new Iesi.Collections.Generic.HashedSet();     
        }
        public virtual string AdvDirectives
        {
            get;
            set;
        }
        public virtual DateTime? AdvDirectivesDate
        {
            get;
            set;
        }
        public virtual DateTime? AllergyUpdatedDate
        {
            get;
            set;
        }
        public virtual string AlternatePatientId
        {
            get;
            set;
        }
        public virtual DateTime? ArchiveDate
        {
            get;
            set;
        }
        public virtual string ArchivedInfo
        {
            get;
            set;
        }
        public virtual string AuthorizationSignature
        {
            get;
            set;
        }
        public virtual string BloodType
        {
            get;
            set;
        }
        public virtual string BreakGlass
        {
            get;
            set;
        }
        public virtual string Comment
        {
            get;
            set;
        }
        public virtual short CompanyId
        {
            get;
            set;
        }
        public virtual DateTime? Dor
        {
            get;
            set;
        }
        public virtual string ExternalPatientId
        {
            get;
            set;
        }
        public virtual DateTime? FamilyHistUpdated
        {
            get;
            set;
        }
        public virtual string FirstName
        {
            get;
            set;
        }
        public virtual int? GuarantorId
        {
            get;
            set;
        }
        public virtual DateTime? HealthCareMaintenanceUpdatedDate
        {
            get;
            set;
        }
        public virtual string IncludeInClergyList
        {
            get;
            set;
        }
        public virtual string IncludeInDirectory
        {
            get;
            set;
        }
        public virtual DateTime? LastInpatientAdmittedDate
        {
            get;
            set;
        }
        public virtual DateTime? LastInpatientDischargedDate
        {
            get;
            set;
        }
        public virtual string LastName
        {
            get;
            set;
        }
        public virtual DateTime? LastOutpatientAdmittedDate
        {
            get;
            set;
        }
        public virtual DateTime? LastTetanusDate
        {
            get;
            set;
        }
        public virtual string LivingWill
        {
            get;
            set;
        }
        public virtual DateTime? LivingWillDate
        {
            get;
            set;
        }
        public virtual DateTime? MedicalHistUpdated
        {
            get;
            set;
        }
        public virtual int? MedicalRecordNumber
        {
            get;
            set;
        }
        public virtual DateTime? MedicationUpdated
        {
            get;
            set;
        }
        public virtual int ModifiedBy
        {
            get;
            set;
        }
        public virtual DateTime ModifiedOn
        {
            get;
            set;
        }
        public virtual int? MothersPeopleId
        {
            get;
            set;
        }
        public virtual int PeopleId
        {
            get;
            set;
        }
        public virtual int? NkaEnteredBy
        {
            get;
            set;
        }
        public virtual DateTime? NkaEnteredOn
        {
            get;
            set;
        }
        public virtual int? NoInformation
        {
            get;
            set;
        }
        public virtual string NoKnownAllergies
        {
            get;
            set;
        }
        public virtual string NoKnownMedication
        {
            get;
            set;
        }
        public virtual string NoKnownMedicationInformationSource
        {
            get;
            set;
        }
        public virtual DateTime? NoKnownMedicationUpdated
        {
            get;
            set;
        }
        public virtual string NoKnownProblem
        {
            get;
            set;
        }
        public virtual string NoKnownProblemInformationSource
        {
            get;
            set;
        }
        public virtual DateTime? NoKnownProblemUpdated
        {
            get;
            set;
        }
        public virtual string NoMedicationHistoryAssessed
        {
            get;
            set;
        }
        public virtual DateTime? ObstetricalHistoryUpdatedDate
        {
            get;
            set;
        }
        public virtual DateTime? OnGoingProbUpdated
        {
            get;
            set;
        }
        public virtual string OrganDonor
        {
            get;
            set;
        }
        public virtual DateTime? OrgonDonorDate
        {
            get;
            set;
        }
        public virtual string OtherPatientId
        {
            get;
            set;
        }
        public virtual int? PatientId
        {
            get;
            set;
        }
        public virtual string PatientPreference
        {
            get;
            set;
        }
        public virtual string PatientRefusedSigning
        {
            get;
            set;
        }
        public virtual string PersonName
        {
            get;
            set;
        }
        public virtual int? PrimaryPharmacyId
        {
            get;
            set;
        }
        public virtual int? PrimaryPhysicianId
        {
            get;
            set;
        }
        public virtual DateTime? PrivacyNoticeDate
        {
            get;
            set;
        }
        public virtual int? RcopiaId
        {
            get;
            set;
        }
        public virtual DateTime? RcopiaLastUpdateDate
        {
            get;
            set;
        }
        public virtual string Relationship
        {
            get;
            set;
        }
        public virtual DateTime? SpouseDor
        {
            get;
            set;
        }
        public virtual string Status
        {
            get;
            set;
        }
        public virtual short? StorageLocationId
        {
            get;
            set;
        }
        public virtual string UnableToReportMedication
        {
            get;
            set;
        }
        public virtual string UnableToReportMedicationInformationSource
        {
            get;
            set;
        }
        public virtual DateTime? UnableToReportMedicationUpdated
        {
            get;
            set;
        }
        public virtual GlbPerson GlbPerson
        {
            get;
            set;
        }
        public virtual Iesi.Collections.Generic.ISet ShrEpisodes
        {
            get;
            set;
        }

        public override bool Equals(object obj)
        {
            if (ReferenceEquals(this, obj))
                return true;

            return Equals(obj as People);
        }

        public virtual bool Equals(People obj)
        {
            if (obj == null) return false;

            if (Equals(AdvDirectives, obj.AdvDirectives) == false) return false;
            if (Equals(AdvDirectivesDate, obj.AdvDirectivesDate) == false) return false;
            if (Equals(AllergyUpdatedDate, obj.AllergyUpdatedDate) == false) return false;
            if (Equals(AlternatePatientId, obj.AlternatePatientId) == false) return false;
            if (Equals(ArchiveDate, obj.ArchiveDate) == false) return false;
            if (Equals(ArchivedInfo, obj.ArchivedInfo) == false) return false;
            if (Equals(AuthorizationSignature, obj.AuthorizationSignature) == false) return false;
            if (Equals(BloodType, obj.BloodType) == false) return false;
            if (Equals(BreakGlass, obj.BreakGlass) == false) return false;
            if (Equals(Comment, obj.Comment) == false) return false;
            if (Equals(CompanyId, obj.CompanyId) == false) return false;
            if (Equals(Dor, obj.Dor) == false) return false;
            if (Equals(ExternalPatientId, obj.ExternalPatientId) == false) return false;
            if (Equals(FamilyHistUpdated, obj.FamilyHistUpdated) == false) return false;
            if (Equals(FirstName, obj.FirstName) == false) return false;
            if (Equals(GuarantorId, obj.GuarantorId) == false) return false;
            if (Equals(HealthCareMaintenanceUpdatedDate, obj.HealthCareMaintenanceUpdatedDate) == false) return false;
            if (Equals(IncludeInClergyList, obj.IncludeInClergyList) == false) return false;
            if (Equals(IncludeInDirectory, obj.IncludeInDirectory) == false) return false;
            if (Equals(LastInpatientAdmittedDate, obj.LastInpatientAdmittedDate) == false) return false;
            if (Equals(LastInpatientDischargedDate, obj.LastInpatientDischargedDate) == false) return false;
            if (Equals(LastName, obj.LastName) == false) return false;
            if (Equals(LastOutpatientAdmittedDate, obj.LastOutpatientAdmittedDate) == false) return false;
            if (Equals(LastTetanusDate, obj.LastTetanusDate) == false) return false;
            if (Equals(LivingWill, obj.LivingWill) == false) return false;
            if (Equals(LivingWillDate, obj.LivingWillDate) == false) return false;
            if (Equals(MedicalHistUpdated, obj.MedicalHistUpdated) == false) return false;
            if (Equals(MedicalRecordNumber, obj.MedicalRecordNumber) == false) return false;
            if (Equals(MedicationUpdated, obj.MedicationUpdated) == false) return false;
            if (Equals(ModifiedBy, obj.ModifiedBy) == false) return false;
            if (Equals(ModifiedOn, obj.ModifiedOn) == false) return false;
            if (Equals(MothersPeopleId, obj.MothersPeopleId) == false) return false;
            if (Equals(PeopleId, obj. PeopleId) == false) return false;
            if (Equals(NkaEnteredBy, obj.NkaEnteredBy) == false) return false;
            if (Equals(NkaEnteredOn, obj.NkaEnteredOn) == false) return false;
            if (Equals(NoInformation, obj.NoInformation) == false) return false;
            if (Equals(NoKnownAllergies, obj.NoKnownAllergies) == false) return false;
            if (Equals(NoKnownMedication, obj.NoKnownMedication) == false) return false;
            if (Equals(NoKnownMedicationInformationSource, obj.NoKnownMedicationInformationSource) == false) return false;
            if (Equals(NoKnownMedicationUpdated, obj.NoKnownMedicationUpdated) == false) return false;
            if (Equals(NoKnownProblem, obj.NoKnownProblem) == false) return false;
            if (Equals(NoKnownProblemInformationSource, obj.NoKnownProblemInformationSource) == false) return false;
            if (Equals(NoKnownProblemUpdated, obj.NoKnownProblemUpdated) == false) return false;
            if (Equals(NoMedicationHistoryAssessed, obj.NoMedicationHistoryAssessed) == false) return false;
            if (Equals(ObstetricalHistoryUpdatedDate, obj.ObstetricalHistoryUpdatedDate) == false) return false;
            if (Equals(OnGoingProbUpdated, obj.OnGoingProbUpdated) == false) return false;
            if (Equals(OrganDonor, obj.OrganDonor) == false) return false;
            if (Equals(OrgonDonorDate, obj.OrgonDonorDate) == false) return false;
            if (Equals(OtherPatientId, obj.OtherPatientId) == false) return false;
            if (Equals(PatientId, obj.PatientId) == false) return false;
            if (Equals(PatientPreference, obj.PatientPreference) == false) return false;
            if (Equals(PatientRefusedSigning, obj.PatientRefusedSigning) == false) return false;
            if (Equals(PersonName, obj.PersonName) == false) return false;
            if (Equals(PrimaryPharmacyId, obj.PrimaryPharmacyId) == false) return false;
            if (Equals(PrimaryPhysicianId, obj.PrimaryPhysicianId) == false) return false;
            if (Equals(PrivacyNoticeDate, obj.PrivacyNoticeDate) == false) return false;
            if (Equals(RcopiaId, obj.RcopiaId) == false) return false;
            if (Equals(RcopiaLastUpdateDate, obj.RcopiaLastUpdateDate) == false) return false;
            if (Equals(Relationship, obj.Relationship) == false) return false;
            if (Equals(SpouseDor, obj.SpouseDor) == false) return false;
            if (Equals(Status, obj.Status) == false) return false;
            if (Equals(StorageLocationId, obj.StorageLocationId) == false) return false;
            if (Equals(UnableToReportMedication, obj.UnableToReportMedication) == false) return false;
            if (Equals(UnableToReportMedicationInformationSource, obj.UnableToReportMedicationInformationSource) == false) return false;
            if (Equals(UnableToReportMedicationUpdated, obj.UnableToReportMedicationUpdated) == false) return false;
            return true;
        }

        public override int GetHashCode()
        {
            int result = 1;

            result = (result * 397) ^ (AdvDirectives != null ? AdvDirectives.GetHashCode() : 0);
            result = (result * 397) ^ (AdvDirectivesDate != null ? AdvDirectivesDate.GetHashCode() : 0);
            result = (result * 397) ^ (AllergyUpdatedDate != null ? AllergyUpdatedDate.GetHashCode() : 0);
            result = (result * 397) ^ (AlternatePatientId != null ? AlternatePatientId.GetHashCode() : 0);
            result = (result * 397) ^ (ArchiveDate != null ? ArchiveDate.GetHashCode() : 0);
            result = (result * 397) ^ (ArchivedInfo != null ? ArchivedInfo.GetHashCode() : 0);
            result = (result * 397) ^ (AuthorizationSignature != null ? AuthorizationSignature.GetHashCode() : 0);
            result = (result * 397) ^ (BloodType != null ? BloodType.GetHashCode() : 0);
            result = (result * 397) ^ (BreakGlass != null ? BreakGlass.GetHashCode() : 0);
            result = (result * 397) ^ (Comment != null ? Comment.GetHashCode() : 0);
            result = (result * 397) ^ CompanyId.GetHashCode();
            result = (result * 397) ^ (Dor != null ? Dor.GetHashCode() : 0);
            result = (result * 397) ^ (ExternalPatientId != null ? ExternalPatientId.GetHashCode() : 0);
            result = (result * 397) ^ (FamilyHistUpdated != null ? FamilyHistUpdated.GetHashCode() : 0);
            result = (result * 397) ^ (FirstName != null ? FirstName.GetHashCode() : 0);
            result = (result * 397) ^ (GuarantorId != null ? GuarantorId.GetHashCode() : 0);
            result = (result * 397) ^ (HealthCareMaintenanceUpdatedDate != null ? HealthCareMaintenanceUpdatedDate.GetHashCode() : 0);
            result = (result * 397) ^ (IncludeInClergyList != null ? IncludeInClergyList.GetHashCode() : 0);
            result = (result * 397) ^ (IncludeInDirectory != null ? IncludeInDirectory.GetHashCode() : 0);
            result = (result * 397) ^ (LastInpatientAdmittedDate != null ? LastInpatientAdmittedDate.GetHashCode() : 0);
            result = (result * 397) ^ (LastInpatientDischargedDate != null ? LastInpatientDischargedDate.GetHashCode() : 0);
            result = (result * 397) ^ (LastName != null ? LastName.GetHashCode() : 0);
            result = (result * 397) ^ (LastOutpatientAdmittedDate != null ? LastOutpatientAdmittedDate.GetHashCode() : 0);
            result = (result * 397) ^ (LastTetanusDate != null ? LastTetanusDate.GetHashCode() : 0);
            result = (result * 397) ^ (LivingWill != null ? LivingWill.GetHashCode() : 0);
            result = (result * 397) ^ (LivingWillDate != null ? LivingWillDate.GetHashCode() : 0);
            result = (result * 397) ^ (MedicalHistUpdated != null ? MedicalHistUpdated.GetHashCode() : 0);
            result = (result * 397) ^ (MedicalRecordNumber != null ? MedicalRecordNumber.GetHashCode() : 0);
            result = (result * 397) ^ (MedicationUpdated != null ? MedicationUpdated.GetHashCode() : 0);
            result = (result * 397) ^ ModifiedBy.GetHashCode();
            result = (result * 397) ^ ModifiedOn.GetHashCode();
            result = (result * 397) ^ (MothersPeopleId != null ? MothersPeopleId.GetHashCode() : 0);
            result = (result * 397) ^ PeopleId.GetHashCode();
            result = (result * 397) ^ (NkaEnteredBy != null ? NkaEnteredBy.GetHashCode() : 0);
            result = (result * 397) ^ (NkaEnteredOn != null ? NkaEnteredOn.GetHashCode() : 0);
            result = (result * 397) ^ (NoInformation != null ? NoInformation.GetHashCode() : 0);
            result = (result * 397) ^ (NoKnownAllergies != null ? NoKnownAllergies.GetHashCode() : 0);
            result = (result * 397) ^ (NoKnownMedication != null ? NoKnownMedication.GetHashCode() : 0);
            result = (result * 397) ^ (NoKnownMedicationInformationSource != null ? NoKnownMedicationInformationSource.GetHashCode() : 0);
            result = (result * 397) ^ (NoKnownMedicationUpdated != null ? NoKnownMedicationUpdated.GetHashCode() : 0);
            result = (result * 397) ^ (NoKnownProblem != null ? NoKnownProblem.GetHashCode() : 0);
            result = (result * 397) ^ (NoKnownProblemInformationSource != null ? NoKnownProblemInformationSource.GetHashCode() : 0);
            result = (result * 397) ^ (NoKnownProblemUpdated != null ? NoKnownProblemUpdated.GetHashCode() : 0);
            result = (result * 397) ^ (NoMedicationHistoryAssessed != null ? NoMedicationHistoryAssessed.GetHashCode() : 0);
            result = (result * 397) ^ (ObstetricalHistoryUpdatedDate != null ? ObstetricalHistoryUpdatedDate.GetHashCode() : 0);
            result = (result * 397) ^ (OnGoingProbUpdated != null ? OnGoingProbUpdated.GetHashCode() : 0);
            result = (result * 397) ^ (OrganDonor != null ? OrganDonor.GetHashCode() : 0);
            result = (result * 397) ^ (OrgonDonorDate != null ? OrgonDonorDate.GetHashCode() : 0);
            result = (result * 397) ^ (OtherPatientId != null ? OtherPatientId.GetHashCode() : 0);
            result = (result * 397) ^ (PatientId != null ? PatientId.GetHashCode() : 0);
            result = (result * 397) ^ (PatientPreference != null ? PatientPreference.GetHashCode() : 0);
            result = (result * 397) ^ (PatientRefusedSigning != null ? PatientRefusedSigning.GetHashCode() : 0);
            result = (result * 397) ^ (PersonName != null ? PersonName.GetHashCode() : 0);
            result = (result * 397) ^ (PrimaryPharmacyId != null ? PrimaryPharmacyId.GetHashCode() : 0);
            result = (result * 397) ^ (PrimaryPhysicianId != null ? PrimaryPhysicianId.GetHashCode() : 0);
            result = (result * 397) ^ (PrivacyNoticeDate != null ? PrivacyNoticeDate.GetHashCode() : 0);
            result = (result * 397) ^ (RcopiaId != null ? RcopiaId.GetHashCode() : 0);
            result = (result * 397) ^ (RcopiaLastUpdateDate != null ? RcopiaLastUpdateDate.GetHashCode() : 0);
            result = (result * 397) ^ (Relationship != null ? Relationship.GetHashCode() : 0);
            result = (result * 397) ^ (SpouseDor != null ? SpouseDor.GetHashCode() : 0);
            result = (result * 397) ^ (Status != null ? Status.GetHashCode() : 0);
            result = (result * 397) ^ (StorageLocationId != null ? StorageLocationId.GetHashCode() : 0);
            result = (result * 397) ^ (UnableToReportMedication != null ? UnableToReportMedication.GetHashCode() : 0);
            result = (result * 397) ^ (UnableToReportMedicationInformationSource != null ? UnableToReportMedicationInformationSource.GetHashCode() : 0);
            result = (result * 397) ^ (UnableToReportMedicationUpdated != null ? UnableToReportMedicationUpdated.GetHashCode() : 0);
            return result;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:42:06.893

此处显示的最重要信息是您尝试翻译的 2 种类型的定义。确保两者都有同名的**公共属性。**

诊断问题的最佳方法也是隔离它们，例如，您不需要 ServiceStack 或 NHibernate 来测试`TranslateTo<T>`功能，如果您单独测试结果，则更容易看到发生了什么，例如：

```
var model = new MyCompany.MyProduct.Entities.People { ... };
var dto = model.TranslateTo<PatientFindResponse.Patient>();
dto.PrintDump(); //Print the output of the translated object 
```

您的示例的另一个问题是您的服务实现了[ServiceStack 的新 API](https://github.com/ServiceStack/ServiceStack/wiki/New-Api) `IService`，但您使用的是旧 API 的**Execute()**方法而不是**Any()**，例如，您的服务应该类似于：

```
public class PatientFindService : IService 
{
    public object Any(PatientFind request) {
        ...
    }
} 
```

# redirect - ZF2 在控制器外部使用重定向

> ID：14468200
> 
> 赞同：4
> 
> 时间：2013-01-22T21:19:07.673
> 
> 标签：redirect, controller, zend-framework2

我正在研究一个在 Module.php 中调用并附加到引导程序的 ACL。

显然，ACL 限制了对站点某些区域的访问，这就需要重定向。但是，当尝试使用控制器插件进行重定向时，它不起作用，因为插件似乎需要控制器。

从控制器外部重定向到外部的最佳方法是什么？vanilla header() 函数不适合，因为我需要使用已定义的路由。

任何帮助都会很棒！

干杯-

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T00:15:15.477

通常，您希望通过返回响应来**缩短调度过程。**期间`route`或`dispatch`您可以返回响应以停止通常的代码流停止并直接完成结果。在 ACL 检查的情况下，您很可能希望尽早返回该响应并重定向到用户的登录页面。

您要么在控制器中构造响应，要么检查插件的返回值并在响应时重定向。注意第二种方法类似于[PRG 插件的工作方式](http://zf2.readthedocs.org/en/latest/modules/zend.mvc.plugins.html#the-post-redirect-get-plugin)。

第一种方法的示例：

```
use Zend\Mvc\Controller\AbstractActionController;

class MyController extends AbstractActionController
{
    public function fooAction()
    {
        if (!$this->aclAllowsAccess()) {
            // Use redirect plugin to redirect
            return $this->redirect('user/login');
        }

        // normal code flow
    }
} 
```

像 PRG 插件这样的例子可以工作：

```
use Zend\Mvc\Controller\AbstractActionController;
use Zend\Http\Response;

class MyController extends AbstractActionController
{
    public function fooAction()
    {
        $result = $this->aclCheck();

        if ($result instanceof Response) {
            // Use return value to short-circuit
            return $result
        }

        // normal code flow
    }
} 
```

然后插件可能看起来像这样（在第二种情况下）：

```
use Zend\Mvc\Controller\Plugin\AbstractPlugin;

class AclCheck extends AbstractPlugin
{
    public function __invoke()
    {
        // Check the ACL
        if (false === $result) {
            $controller = $this->getController();
            $redirector = $controller->getPluginManager()->get('Redirect');
            $response = $redirector->toRoute('user/login');

            return $response;
        }
    }
} 
```

在您的问题中，您说：

> [...] 它不起作用，因为插件似乎需要控制器。

当您想`$this->getController()`在插件中执行此操作时，这可能是控制器插件内部的问题。您必须扩展`Zend\Mvc\Controller\Plugin\AbstractPlugin`或实现`Zend\Mvc\Controller\Plugin\PluginInterface`以确保您的 ACL 插件与控制器一起注入。

如果您不希望这样做，则可以直接返回您自己创建的响应。它不太灵活，您在已经有响应对象的情况下创建响应对象（导致两个响应可能发生冲突），但插件代码将更改如下：

```
use Zend\Mvc\Controller\Plugin\AbstractPlugin;
use Zend\Http\PhpEnvironment\Response;

class AclCheck extends AbstractPlugin
{
    public function __invoke()
    {
        // Check the ACL
        if (false === $result) {
            $response = new Response;
            $response->setStatusCode(302);
            $response->getHeaders()
                     ->addHeaderLine('Location', '/user/login');

            return $response;
        }
    }
} 
```

# macos - 在调用其他可执行文件期间 bash $1 参数健忘症

> ID：14468202
> 
> 赞同：1
> 
> 时间：2013-01-22T21:19:24.113
> 
> 标签：macos, bash

在 OS X 下，我有一个 bash shell 脚本，它带有一个参数（这是一个文件夹名称）

当我打电话时：

```
echo "Build Starting for $1" | tee ~/MyFolder/$1/build.log 
```

它工作正常。它将正确的“$1”参数回显到 ~/MyFolder/$1/build.log 文件（存在）中。但是，当我调用另一个可执行文件并尝试使用 $1 参数时，该参数始终为空。

```
xcodebuild -configuration Release -project MyProject.xcodeproj | tee -a ~/MyFolder/$1/build.log 
```

这会在“~/MyFolder”中创建“build.log”，并忽略 $1。

这是为什么？我需要以某种方式“导出”它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:24:55.337

如果您正在调用一个函数或另一个脚本，并且希望相同的 $1、$2、.. 可用，请使用：

```
myFunctionOrScript "$@" 
```

`"$@"`等价于`"$1" "$2" "$3" ...`，因此将确保子进程中的 "$1" 与父进程中的 "$1" 相同。

您还可以将它们的值分配给新的命名变量：

```
export mydir=$1 
```

然后`$mydir`在`$1`子进程脚本中使用。

# c# - 下拉列表更好地作为 ViewBag 或模型 C#/.NET MVC4 的一部分

> ID：14468203
> 
> 赞同：8
> 
> 时间：2013-01-22T21:19:25.597
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

可能很简单，但我似乎遗漏了一些东西。

两种型号：

```
public class Hardware
{
    [Required]
    public int Id { get; set; }

    public int SerialNum { get; set; }
    public int ProductNum { get; set; }
    public string Notes { get; set; }
    public DateTime PurchaseDate { get; set; }
    public DateTime WarrantyExpiration { get; set; }

    public virtual Manufacturer Manufacturer { get; set; }
}

public class Manufacturer
{
    public int Id { get; set; }

    [Required]
    public string Name { get; set; }

    public virtual ICollection<Hardware> Hardware { get; set; }
} 
```

当我进入硬件创建视图时，我希望能够从制造商的下拉列表中进行选择，并且当它提交时，它应该在硬件和选择的制造商之间建立关系。

目前，我一直在使用以下内容在控制器中构建一个 selectList

```
SelectList selectList = new SelectList(db.Manufacturers, "Id", "Name");
ViewBag.selectList = selectList; 
```

然后将其投射到视图中：

```
@Html.DropDownListFor(model => model.Manufacturer, ViewBag.selectList as SelectList)\ 
```

但是，似乎应该有更好的方法来做到这一点 - 也许创建一个从 Hardware 继承的具有 SelectList 类型属性的视图模型？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-22T21:30:35.953

随着你的应用程序变得越来越复杂，你会看到你的 MVC 应用程序变成了 M-VM-VC，VM 是专用的 ViewModels，它通常会添加你的 UI 层需要的所有东西来生成 UI。

在这种情况下，我个人不会使用继承，因为您的 ViewModel 不是您的模型的专用版本。这正是您的 UI 创建视图所需要的（这完全取决于您）。

我的 ViewModel 看起来像这样：

```
public class HardwareVm
{
     public Hardware Hardware { get; set; }
     public IEnumerable<SelectListItem> Manufacturers { get; set; }
} 
```

在视图中：

```
@Html.DropDownListFor(model => model.Hardware.Manufacturer,  Manufacturers) 
```

控制器：

```
var manufacturers = db.Manufacturers.Select(m => new SelectListItem {Text = m.Name, Value = m.Id });
var model = new HardwareVm { Manufacturers = manufacturers }; 
```

# javascript - jQuery Mobile 1.3 面板禁用了我的 javascript

> ID：14468204
> 
> 赞同：0
> 
> 时间：2013-01-22T21:19:29.053
> 
> 标签：javascript, jquery, mobile, beta, panels

我意识到 1.3 仍然是一个测试版，但想知道是否有人遇到和我一样的问题并解决了它。

要使面板正常工作，页面内容必须包含在 data-role="content" 容器中。

但是，我正在使用一些 API，例如 twitter，它们将内容调用到 data-role="content" 容器中，并且容器中还有广告标签。这两个都使用 javascript 并且都禁用了 jQuery 移动平台。我只能在从第一个 data-role="header" 容器启用面板的平台上运行这些功能中的任何一个。

这是我的代码失败的示例。谢谢。

```
<div data-role="page" class="ui-responsive-panel">

<div data-role="header">
<h1>Title</h1>
</div><!-- /header -->

<div data-role="content">
<script language="javascript">
<!--
document.write('<scr'+'ipt language="#"></scri'+'pt>');
//-->
</script>
</div><!-- /content -->

<div data-role="footer">
footer text
</div><!-- /footer -->

<div data-role="panel" data-display="reveal" id="nav-panel">
<ul data-role="listview">
<li>link</li>
<li>link</li>
</ul>
</div><!-- /panel -->

</div><!-- /page --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:41:55.013

一个面板应该出现在页面 div 之后，就像这样

```
<div data-role="page">

<div data-role="panel" id="mypanel">
<!-- panel content goes here -->
</div><!-- /panel -->

<!-- header -->
<!-- content -->
<!-- footer -->

</div><!-- page --> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T15:00:53.963

您应该将面板代码直接放在页面 div 下方的标题上方。

# c++ - 元素之间的多线程蛮力比较以创建图形

> ID：14468205
> 
> 赞同：0
> 
> 时间：2013-01-22T21:19:32.907
> 
> 标签：c++, multithreading, algorithm, graph-algorithm

我有 N 个元素需要相互比较才能创建图表。它总共给出**(N*N-1)/2 次**比较。

我想**多线程这些比较**我也有几个限制：

*   每个元素都很大，实际上是一个矩阵，所以在每个线程中复制所有元素会占用太多内存。

*   每个比较都应该发生，这意味着我不能跳过一个。

*   每次可以在列表中添加一个新元素时，这非常棘手，因为我需要跟踪已完成的操作，只做新的。

*   由于比较的数量可能很大，比如 2000 万，我不能排那么大的队列。

*   最后，可以随时停止该过程，我必须能够恢复我什至在应用程序的其他执行中的位置。

到目前为止，我有一个主线程，其中包含线程池中的所有元素和几个工作线程。工作线程比较一组对或一系列元素。我想到了一个比较生成器，它可以按需提供下一个 X 比较。

我怎么能建造这个生成器？

我应该为工人复制每一对，直接从工人那里使用 ReadWriteLock 从 Master 读取数据吗？

我如何跟踪每个线程的进度？

我怎样才能停止并恢复比较状态？

如果有很多问题，我很抱歉。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:30:11.537

假设读取是线程安全的（通常只要没有人在写入），一个简单的解决方案是以某种方式在一组工作线程中细分任务，提前这样做。例如，对于*n 个*工作人员，您可以将对 ( *x* , *y* ) 分配给工作人员*x* mod *n*。唯一的通信是让每个工人知道它的序数（0…<em>n-1）。每个线程都应将其答案放入一个私有数组中，其他人完成后可以对其进行整理。

适应不同工人生产力的更复杂的模型是将每个值 0…<em>N-1 推送到队列中。每个工作线程从队列中拉出一个数字*x*，评估每个 ( *x* , *y* ) 对，然后返回另一个*x*。

如果您想花时间，将对排队以最大程度地减少缓存抖动会更有效。这是一个棘手的问题。本质上，您希望将小元素簇中的元素对排入队列，以便几乎同时评估簇中的每一对元素。尽管这很棘手，但它可能会对算法的效率产生巨大影响。

# ant - 在构建文件中包含 ant 库

> ID：14468206
> 
> 赞同：0
> 
> 时间：2013-01-22T21:19:35.907
> 
> 标签：ant

我的问题如下：我想在 ant 中使用 propertyregex 任务。我正在处理的项目建立在各种不同的服务器上，我不想配置（安装 ant-nodeps.jar）每台服务器。源需要包含默认情况下未安装在系统上的所有内容。

所以现在我需要从构建文件中将 ant-nodeps.jar 添加到 ant 类路径中。有人知道该怎么做吗？

干杯，罗伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:57:43.510

[propertyregex](http://ant-contrib.sourceforge.net/tasks/tasks/propertyregex.html)任务是 ant-contrib 的一部分，可以使用 Apache ivy 作为构建的一部分[安装](http://ant.apache.org/ivy/)

查看以下示例，该示例演示了如何下载和使用“for”任务（也来自 ant-contrib 项目）：

*   [操作系统升级后让我的 ANT 构建工作的问题](https://stackoverflow.com/questions/14259820/problems-getting-my-ant-builds-to-work-after-os-upgrade/14268543#14268543)

一个缺点是 ivy 没有与 ANT 预打包，因此以下答案提供了有关如何引导 ANT 构建的提示。一旦 ivy 启动，它就可以用来拉下你构建需要的所有其他东西。

*   [Ivy 无法解决依赖关系，无法找到原因](https://stackoverflow.com/questions/9853851/ivy-fails-to-resolve-a-dependancy-unable-to-find-cause/9855381#9855381)

# 更新

虽然我理解您要求在目标平台上没有任何更改，但如果您还必须匹配几个旧版本的构建软件，这是一个非常难以解决的问题。我发现最新的 ANT 和 5 岁的版本（如 1.7）之间不兼容（ANT 1.6.5 现在已经 8 岁了......）

我所做的是在我的[Jenkins 从节点](https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds)上安装数量非常有限的 ANT 版本。然后构建作业只能从这些中进行选择，然后使用 ivy 下载所有其他 3rd 方软件依赖项（此设置模拟您如何管理一组 Maven 项目）。

我怀疑您正在使用 ANT 来运行您的部署？如果是这种情况，我建议切换到 Groovy 之类的东西，它可以部署为[单个 jar文件，并且可以使用](http://search.maven.org/#artifactdetails%7Corg.codehaus.groovy%7Cgroovy-all%7C2.1.0-rc-3%7Cjar)[Grape 动态](http://groovy.codehaus.org/Grape)下拉依赖项。

# android - 使用支持库时，如何在 ListView 中提供 ContextMenu？

> ID：14468209
> 
> 赞同：2
> 
> 时间：2013-01-22T21:19:40.827
> 
> 标签：android, android-listview, actionbarsherlock, android-support-library

我在尝试`ContextMenu`使用该`ActionBarSherlock`库时遇到类型问题，正如您所知，它最终模仿/实现了 Android 支持库。

有一个`SherlockFragmentActivity`设置布局内容，并且在该内容中存在两个片段。其中一个片段是`SherlockListFragment`. 我打电话注册`onCreate`。`SherlockListFragment``ContextMenu`

`registerForContextMenu(getListView());`

问题出在尝试膨胀菜单时。

```
listView.setOnCreateContextMenuListener(new View.OnCreateContextMenuListener() {
       @Override
       public void onCreateContextMenu(ContextMenu contextMenu, View view, ContextMenu.ContextMenuInfo contextMenuInfo) {
                MenuInflater inflater = getSherlockActivity().getSupportMenuInflater();
                inflater.inflate(R.menu.lot_menu, contextMenu);
            }
        }); 
```

由于方法参数中指定的类型，我无法调用`inflate`，但它期望`com.actionbarsherlock.view.Menu`传入的类型是`android.view.ContextMenu`.

我似乎遗漏了一些东西，因为`Menu`在操作栏中膨胀 a 是微不足道的，但是在`ContextMenu`使用支持框架时似乎会造成问题。

我如何适当注册以根据需要使用支持框架并随后膨胀`ContextMenu`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T21:21:32.357

尝试使用`getMenuInflater()`而不是`getSupportMenuInflater()`膨胀成`ContextMenu`.

# events - Javascript Mootools 事件停止

> ID：14468214
> 
> 赞同：1
> 
> 时间：2013-01-22T21:19:55.037
> 
> 标签：events, mootools

好吧，我有这个脚本，我在提交请求时设置了用于验证我的输入值的 php 文件...我已经设置了当它未被验证时，正确的回显方式未被验证，现在我当我得到响应时想要在我的请求中并且它是停止提交的错误响应..这是脚本，它确实发送请求并返回响应但它不会停止提交...

我已经做到了，但是现在我需要在完成后弹出一条确认消息，我想在弹出消息时停止执行表单，如果用户单击“是”继续使用表单...我试过了像这样与 fireEvent 但它不会工作......帮助伙计们！

```
window.addEvent('domready', function(){

var form=document.adminForm;
form.addEvent('submit', function(e){
var success = false;    

var dataString="date=" + document.getElementById("date").value + "&start=" + document.getElementById("start").value + "&end=" + document.getElementById("end").value;

var requestData = new Request ({
        url: '/provjera.php',
        method:'POST',
        async:false,

        data:dataString,
        onComplete: function(responseText){
                var requestData2 = new Request({
                    url:'/posalji.php',
                    method:'POST',
                    data:dataString,
                    onComplete:function(responseText){

                    }

                });
                requestData2.send();

            success= responseText == 'NO ERROR';
            if(responseText == 'NO ERROR'){

            }else{
                alert("FAIL");
            }

        }
    });

    requestData.send();
    if(success){
        var result=confirm("Are you sure!?");
    e.stop();
    if(result){
    form.fireEvent("submit");  
    }

    }else{
            e.stop();
    }

});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:45:29.090

这行不通，它破坏了 XHR 的异步特性（它是 * *A* *JAX，呵呵）。

它的工作方式是这样的：

```
[form]
[submit event]
\->[function]->[xhr]->[onComplete function much later]->[e.stop() not applicable]
            \->[function continues and terminates] 
```

当`onComplete`到达并调用`.stop()`时，父函数执行已经退出并且未能停止事件，它已经冒泡了...... XHR 是非阻塞的！

你有两种模式可以解决这个问题：

# 1.总是停止事件，在onComplete中做一些额外的事情

本质上，无论 XHR 传递给您什么，都`onComplete`可以让您确定操作的成功/失败，并且您可以调用另一个函数、触发事件或执行您需要做的事情（例如，转换页面或在屏幕上显示验证错误等） .

# 2.使用同步AJAX（反模式）

如果您愿意，您实际上可以使您的 XHR 阻塞，以便在此执行上下文中您可以设置一个变量或停止事件`onComplete`- 通过传递`async: false`给您的 Request 构造函数选项来执行此操作。

我绝对不会推荐 2 ，除非您正在执行用户名可用性检查器之类`onBlur/onChange`的操作，需要在提交之前阻止线程。即使这样，你也可以优雅地做到这一点。

**根据请求进行**编辑，这是一个示例：http:** [//jsfiddle.net/dimitar/du5s4/](http://jsfiddle.net/dimitar/du5s4/)**

 **```
var form = document.id('adminForm');

form.addEvent('submit', function (e) {
    var success = false;

    // simulate a server response of two types.
    this.getElement('input[name=html]').set('value', ['success','error'].getRandom());

    var requestData = new Request({
        url: '/echo/html/',
        method: 'post',
        async: false,
        data: this,
        onComplete: function (responseText) {
            // if server returned success, don't stop the event.                                          
            success = this.response.text == 'success';
            console.log(success);
        }
    }).send();

    success || e.stop();
}); 
```

这是为 ajax 测试的 jsfiddle api 量身定制的，但你明白了。由于您评估响应，您的响应也可以设置变量 - 虽然我不记得评估的范围是什么 - 它可能是全局对象而不是提交函数的内部范围。

再一次，这是完全错误的，谨慎使用。您需要切换到正确的基于事件的设置。

[http://jsfiddle.net/dimitar/du5s4/2/](http://jsfiddle.net/dimitar/du5s4/2/) - 同样的东西，但没有异步黑客。

```
var form = document.id('adminForm');

form.addEvent('submit', function (e) {
    e && e.stop && e.stop();

    var self = this;

    // simulate a server response of two types.
    this.getElement('input[name=html]').set('value', ['success','error'].getRandom());

    var requestData = new Request({
        url: '/echo/html/',
        method: 'post',
        data: this,
        onComplete: function (responseText) {
            // if server returned success, 
            // call something like form.submit();                                          
            this.response.text == 'success' && self.submit();
            console.log(this.response.text);
        }
    }).send();
}); 
```**

# c# - 堆栈等效于 SOS !DumpHeap 命令

> ID：14468219
> 
> 赞同：0
> 
> 时间：2013-01-22T21:20:28.240
> 
> 标签：c#, .net, visual-studio-2010, visual-studio, debugging

我正在寻找类似`!DumpHeap`SOS 调试工具中的命令，但对于堆栈。

SOS中有这样的命令吗？在其他调试工具中？甚至可能吗？如果不是，为什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:28:21.103

它是 !clrstack。参考[在这里](http://msdn.microsoft.com/en-us/library/bb190764.aspx)。

# elasticsearch - 在elasticsearch中，有没有一些方法可以降低一组搜索词的重要性？

> ID：14468221
> 
> 赞同：3
> 
> 时间：2013-01-22T21:20:29.277
> 
> 标签：elasticsearch

理想情况下，我想降低某些词的重要性，例如“商店”、“商店”、“餐厅”。

当用户搜索“牛排餐厅”时，我希望“Jimmy's Steak Restaurant”与“Ralph's Steak House”一样重要。我希望通过严重降低“餐厅”一词的重要性（以及其他 20-50 个词）来实现这一点。

停用词适用于某些词，例如“a”、“the”、“of”等，但它们是全有或全无。

**有没有办法在索引或映射级别为每个单词提供加权或提升值？**

我可能可以在查询级别完成此操作，但如果我需要减少 50 个单词的影响，那可能会非常糟糕。

这是一个普遍的例子。在我实际的复杂解决方案中，我确实需要减少相当多的搜索词的影响。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T16:54:42.817

我不相信在索引期间指定术语级别的提升是可能的。 [在这个线程](http://elasticsearch-users.115913.n3.nabble.com/Modification-of-term-weight-td1449157.html)中，Shay 提到这在 Lucene 中是可能的，但是通过 API 显示它是一个棘手的特性。

另一个[相关线程](http://elasticsearch-users.115913.n3.nabble.com/Handling-tag-quot-weights-quot-td1395562.html)，暗示同样的事情。Shay 建议尝试使用 custom_score 查询对其进行排序：

> 我认为您应该首先尝试在搜索端解决它。如果您在搜索时知道权重，则可以构建一个根据标签应用不同提升的查询，或者使用 custom_score 查询。
> 
> Custom_score 查询比其他查询慢，但我建议您运行并检查它是否适合您（使用实际数据和相关索引大小）。好消息是，如果它对你来说很慢（这里的慢意味着负载下的延迟和 QPS），你总是可以添加更多的副本和更多的机器来分离负载。

[下面是一个 custom_score 查询示例，](https://gist.github.com/913260#gistcomment-26720)它在一个有点相似的术语级别上提升（除了它是针对只有一个类别术语的特殊字段，所以这可能不适用）。将脚本分解为本机脚本可能更容易，而不是使用 mvel，因为您将拥有大量单词。

作为替代方案，也许添加一个[同义词标记过滤器](http://www.elasticsearch.org/guide/reference/index-modules/analysis/synonym-tokenfilter.html)来交换“商店”、“餐厅”、“商店”等词？

# hibernate - 用于在多个集合值上获取实体的休眠查询

> ID：14468223
> 
> 赞同：0
> 
> 时间：2013-01-22T21:20:35.630
> 
> 标签：hibernate, hql

我想获取一个包含两个匹配集合实体的实体。

```
public class A {
    long id;
    Set<B> bs;
}

public class B {
    String name;
    String value;
} 
```

如果我有下表数据

```
Table A
ID     Name 
1      pluto
2      earth
3      mars

Table B
ID     A_ID     NAME     VALUE
1       1       abc       123
2       1       xyz       789
3       2       abc       456
4       2       xyz       789
5       3       abc       123 
```

我想获取至少有 1 个 B 且 name='abc' 和 value='123' 和 1 B 且 name='xyz' 和 value='789' 的所有“A”。在此示例中，我只想要名为“pluto”的 A，因为“earth”没有正确的“abc”值，并且 mars 缺少“xyz”。

我必须使用子选择来执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:59:14.770

您可能想在 A 和 B 之间使用一对多关联...

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/associations.html#assoc-unidirectional-12m](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/associations.html#assoc-unidirectional-12m)

...之后您可以找到大量查询该关联的示例，例如...

[HQL 和一对多查询](https://stackoverflow.com/questions/1167630/hql-and-one-to-many-queries)

# jquery - Jquery 可调整大小的问题，其中 div 合同的宽度和高度为零

> ID：14468224
> 
> 赞同：1
> 
> 时间：2013-01-22T21:20:41.473
> 
> 标签：jquery, draggable, css-position, crop, resizable

我对 jquery UI 的可调整大小有疑问。我环顾四周，找不到和我有同样问题的人。基本上，当我尝试从任何边缘或角落调整 div 的大小时，它的宽度和高度都会变为 0。

这是我的 HTML、CSS 和 JS。

HTML：

```
<div class="container">
    <img src="http://www.deshow.net/d/file/cartoon/2008-12/bob-ross-landscape-painting-281-2.jpg" width="500"></img>
    <div class="crop"></div>
</div> 
```

CSS：

```
div.container {
    position: relative;
    margin-top: 5px;
}
img {
    position: absolute;
    top: 0;
    left: 0;
}
div.crop {
    position: absolute;
    width: 300px;
    height: 200px;
    border: 2px dashed black;
    z-index: 10;
} 
```

Javascript：

```
$('div.crop').draggable({
    containment: 'parent',
}).resizable({
    containment: 'parent',
    handles: 'all',
    aspectRatio: 3/2
}); 
```

我已经在 jsfiddle 上复制了这个问题[http://jsfiddle.net/MWcPv/](http://jsfiddle.net/MWcPv/)

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:47:52.150

问题在于纵横比。

父级也没有高度和宽度，即内部的内容是绝对定位的，因此父级的高度和宽度为 0。我已将高度和宽度添加到父级并禁用纵横比。试试这个[http://jsfiddle.net/aamir/MWcPv/6/](http://jsfiddle.net/aamir/MWcPv/6/)

```
$('div.crop').draggable({
containment: 'parent',
}).resizable({
    containment: 'parent',
    handles: 'all',
    aspectRatio: 16 / 12
}); 
```

# database - 从两个不同的表中获得不同的计数？

> ID：14468229
> 
> 赞同：1
> 
> 时间：2013-01-22T21:21:11.210
> 
> 标签：database, oracle

我在尝试在 oracle 中编写的查询时遇到问题。

基本上我想获得两个具有相同提供程序列表的表的计数。我可以单独运行查询，但不确定如何一次性完成。

这是一个例子：

```
SELECT name, COUNT(name)
FROM   table1
group by name 
```

这给了我一个名字列表和他们旁边的计数。如果我在 table2 上运行相同的命令（更改 from 语句），它工作正常。我想要做的是有一个从table1 中获取计数并从table2 中减去它的查询。

我该怎么做？我曾尝试进行嵌套选择等，但似乎无法使其正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T21:27:41.757

假设`name`两个表中的值相同的一种选择是

```
SELECT t1.name, t2.cnt - t1.cnt diff
  FROM( SELECT name, COUNT(name) cnt 
          FROM table1
         group by name ) t1,
      ( SELECT name, COUNT(name) cnt 
          FROM table2
         group by name ) t2
 WHERE t1.name = t2.name 
```

如果您想处理一个表具有而另一个表`name`没有但您不知道哪个表具有额外名称的情况（并假设您想说另一个表的 a`cnt`为 0 `name`）

```
SELECT coalesce(t1.name, t2.name) name, 
       nvl(t1.cnt, 0 ) t1_cnt,
       nvl(t2.cnt, 0 ) t2_cnt,
       nvl(t2.cnt,0) - nvl(t1.cnt,0) diff
  FROM( SELECT name, COUNT(name) AS cnt
          FROM table1
         group by table1.name ) t1
      full outer join
      ( SELECT name, COUNT(name) AS cnt
          FROM table2
         group by table2.name ) t2
      on( t1.name = t2.name ) 
```

您可以在此[SQLFiddle中看到](http://sqlfiddle.com/#!4/56a22/5)

# ruby-on-rails - 在工厂女孩中克隆模型？

> ID：14468235
> 
> 赞同：1
> 
> 时间：2013-01-22T21:21:24.873
> 
> 标签：ruby-on-rails, ruby, factory-bot

我想使用 Factory Girl 生成大量模型，每个模型只有一个或两个属性不同。

有没有办法让工厂接受模型的实例？理想情况下，我想

```
 before(:all) do
    data1 = create(:instance,
             :attribute_1 => 1,
             :attribute_2 => 2,
             :attribute_3 => "something",
             :attribute_4 => "something else",
             :attribute_5 => 5
             ...
    )

    data2 = create(:instance,
                  :attribute 2 => 15,
                  base: data1
    )
  end 
```

data2 将被初始化为 data1 的克隆，我可以只指定要覆盖的新属性。

我试过使用瞬态属性，但看不到实现类似的方法：

```
FactoryGirl.define do
  factory :instance do
    ignore do
      base nil
    end
    attribute_1 { base.nil? ? argument.attribute_1 : base.attribute_1 + argument.attribute_1 }
    attribute_2 { base.nil? ? argument.attribute_2 : base.attribute_2 + argument.attribute_1 }
    ...
  end
end 
```

我是以完全错误的方式处理这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:05:27.537

你能更简单地通过定义你想要使用的属性的散列然后在第二次调用中稍微改变它来做到这一点吗？

就像是：

```
data_attributes = {
         :attribute_1 => 1,
         :attribute_2 => 2,
         :attribute_3 => "something",
         :attribute_4 => "something else",
         :attribute_5 => 5
         ...
}
data1 = create(:instance, data_attributes)

data2 = create(:instance, data_attributes.merge(:attribute_2 => 1)) 
```

我很欣赏这并不能完全回答您的问题，但它可能会解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T01:00:57.443

如果你只是想生成不同的属性，你看过[序列](https://github.com/thoughtbot/factory_girl/wiki/Usage)吗？

```
FactoryGirl.define do

  sequence :foo { |n| "#{n}" }

  factory :data { foo }
end 
```

在您的规格中：

```
data1 = FactoryGirl.create(:data)
data1.foo
  => "1"

data2 = FactoryGirl.create(:data) #It makes new, unique attributes for you
data2.foo
  => "2" 
```

# asp.net - 林克。加入多个表时出现匿名类型错误

> ID：14468240
> 
> 赞同：1
> 
> 时间：2013-01-22T21:21:41.067
> 
> 标签：asp.net, linq, entity-framework-5

我试图根据我的模型返回一个 IQueryable。

但我需要加入同一个查找表两次。然后将查询变量返回给gridview。

```
public IQueryable<Benchmark> GetBenchMarks([QueryString("hydrant")] string hydrant,
[QueryString("revdate")] string revdate, [QueryString("street")] string street,
[QueryString("quadrant")] string quadrant, [QueryString("desc")] string desc) {

    IQueryable<Benchmark> query = from p in _db.Benchmarks
    join s in _db.Streets on p.Street1Number equals s.Id
    join s2 in _db.Streets on p.Street2Number equals s2.Id
    select new {
        Street1Name = s.StreetName,
        p.OrderNumber,
        p.HydrantNumber,
        Street2Name = s2.StreetName,
        p.RevisionDate,
        p.Quadrant,
        p.Description,
        p.Street1Number
    };
} 
```

所以在第二个连接到 s2 上有一条红色的曲线。以及以下错误。

> `Error 5 Cannot implicitly convert type 'System.Linq.IQueryable<AnonymousType#1>' to 'System.Linq.IQueryable<Benchmarks.Model.Benchmark>'. An explicit conversion exists (are you missing a cast?) C:\Projects\Benchmarks\Benchmarks\Benchmarks_Home.aspx.cs 63 25 Benchmarks`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:32:56.183

Since you end your query with `select new {...}`, you are creating an anonymous object for each result. Instead, use `select p`, and each result will be a `Benchmark`.

However, it looks like returning a `Benchmark` is not what you want. In this case, you would want to change query to be of type `IQueryable` or `IQueryable<dynamic>` (and probably change the return type of the `GetBenchMarks` function as well, unless it does return `IQueryable<Benchmark>`!).

A second (potentially better) alternative would be to create a class to represent this anonymous type, and use that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:43:54.900

您的查询结果是`IEnumerable`匿名对象，因此无法转换为`Benchmark`.

如果你想`Street1Name`从连接关系中设置一些额外的属性（ - 显然没有映射到 DB 上），你可以这样做：

```
 IQueryable<Benchmark> query = from p in _db.Benchmarks
            join s in _db.Streets on p.Street1Number equals s.Id
            join s2 in _db.Streets on p.Street2Number equals s2.Id
        select new { 
                 ....
        };
 var ex = query.ToList();
 var result = new List<Benchmark>();
 foreach(bn in ex){
      result.Add(new Benchmark{ OrderNumber = bn.OrderNumber .... });
 }
// return result.AsQueryable();   
// but now it losts the point to return it as queryable, because the query was already executed so I would simply reurn that list
 return result; 
```

另一种选择是从查询中创建表示对象的新类，并从如下方法返回它：

```
... select new LoadedBenchmark { Street1Name = s.StreetName ....} 
```

# jquery - 在窗口调整大小时获取 div 的实时宽度？

> ID：14468245
> 
> 赞同：1
> 
> 时间：2013-01-22T21:22:07.447
> 
> 标签：jquery, html, resize, window, width

假设我有一个部分，它的宽度是 1181（在控制台中输出），我正在使用以下代码来找出它的宽度：

```
jQuery(document).ready(function()
{
    var body_size = jQuery('section').width();
    console.log(body_size);
}); 
```

如果我重新调整浏览器的大小，我必须重新加载页面以找出这个 div 的新大小。

有没有办法在我重新调整浏览器大小时找出大小？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T21:25:44.063

您可以处理“调整大小”事件。请注意，该事件会*非常*频繁地触发，因此最好不要在处理程序中进行任何 DOM 操作，或者尽可能少地进行操作。处理此问题的一种方法是使用计时器：

```
var resizeTimer;
$(window).resize(function() {
  clearTimeout(resizeTimer);
  resizeTimer = setTimeout(function() {
    var body_size = $('section').width();
    // ...
    // do your work here
    // ...
  }, 200);
}); 
```

这会设置一个计时器，以便在用户停止调整大小（或暂停一段时间）后至少 200 毫秒，您实际上不会做任何工作。

# algorithm - 一种基于比例尺重新计算坐标线上标记的算法

> ID：14468248
> 
> 赞同：0
> 
> 时间：2013-01-22T21:22:14.613
> 
> 标签：algorithm, scaling, zooming

我不知道如何用更少的词来表达我需要的算法的作用；很有可能这里已经回答了这样的问题，但我不知道如何搜索它。

我需要的是以下内容。
我正在编写一种 2D 图形绘图程序。显然，只画主坐标线不是很好，因为图形可能离原点很远，如果只画主线，用户对它的大小没有任何参考。
我决定绘制参考线，即以恒定间隔周期性出现的水平线和垂直线，对应于例如整数。然而，使用固定间隔的效果并不好，因为有缩放的可能性，也就是说，如果用户放大查看例如单位正方形的内部，他将再次看到几乎空的盒子，而没有任何尺寸参考。

所以，我需要以某种方式重新调整用于绘制参考线的间隔。换句话说，我需要一个类型的函数，`double -> double`它接受当前比例系数（我使用的那个指定一个长度单位中有多少像素）或应用于它的某个函数的值（例如，可以沿某个轴适合屏幕内部）并返回 step 值（以像素为单位，以逻辑单位表示，无所谓），即参考线之间的间隔长度。

我相信这种函数的值集是可数无限的，也就是说，这个函数会将比例系数值的区间映射到步长的固定值。我可以对算法进行粗略的描述，或者更准确地说，是我需要的映射。它看起来与此类似（输入值是屏幕内的最大单位数）：

*   ...
*   [5..9] -> 0.25
*   [9..15] -> 0.5
*   [15..30] -> 1
*   ...

这里的值纯粹是经验值，仅用于说明。

但是，我不知道如何将这组映射外推到更广泛的比例系数值，更不用说如何分析地表达这种依赖关系了。然而我确信这是可能的，因为我在许多绘图程序中都看到了这样的事情。

我发现[这个](https://stackoverflow.com/questions/9009265/algorithm-for-self-scaling-ruler-in-plotter-gui-component)问题看起来非常接近我的需要，但我无法将答案调整到我的任务中，因为它提到了标签宽度并且我没有任何标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:23:36.220

您可以将其精确定义为一个数量级（十次方），然后类似地处理其他数量级并转换回来，例如

```
double tickStep(double pixelDistance)
{
     if(pixelDistance <= 3.0)
       return(tickStep(pixelDistance * 10.0) / 10.0);
     else if(pixelDistance > 3.0 && pixelDistance <= 5.0)
        return(0.125);
     else if(pixelDistance > 5.0 && pixelDistance <= 9.0)
        return(0.25);
     else if(pixelDistance > 9.0 && pixelDistance <= 15.0)
        return(0.5);
     else if(pixelDistance > 15.0 && pixelDistance <= 30.0)
        return(1.0);
     else if(pixelDistance > 30.0)
        return(tickStep(pixelDistance / 10.0) * 10.0);
} 
```

我已经使用递归来阐明这个想法，但使用`log`and可能更有效`pow`。

# xna - XNA 声像取决于 X 坐标

> ID：14468249
> 
> 赞同：0
> 
> 时间：2013-01-22T21:22:20.713
> 
> 标签：xna

我需要根据 X 爆炸坐标播放声音平移。

```
Vector2 PositionOfExplosion = ExplosionCoord;
myScreenWidth = 480; //Windows phone
float SoundPan = ??? //Mus be something like MathHelper.Clamp(???, -1, 1);
_explosion1.Play(myVolumen, myPitch, SoundPan); // Pan from -1.0 left to 1.0 right. 0 is center 
```

恢复，

如果发生爆炸

```
 X=0 Pan= -1 
  ...
  X=120 Pan= -0.5 
  ...
  X=240 Pan= 0 
  ...
  x=360 Pan = 0.5
  ...
  x=480 Pan= 1 
```

对不起我的英语。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:25:51.380

`pan = (PositionOfExplosion.X - 240.0f) / 240.0f`

然后你可以夹到`-1..1`.

# vb.net - '=' 在 SQL 语句中无法识别

> ID：14468250
> 
> 赞同：4
> 
> 时间：2013-01-22T21:22:27.400
> 
> 标签：vb.net, ms-access

我收到一条错误消息，提示无法识别等号。我总是在 Access 中测试我的代码以确保它能够正常工作。有谁知道为什么会这样？

代码：

```
SELECT SUM(
                       IIf(TransactionType = 'Cash', 
                       TotalPrice, 0)
           ) AS TotalCash, 
       SUM(
                       IIf(TransactionType = 'Credit', 
                       TotalPrice, 0)
           ) AS TotalCredit,
       SUM(
                       IIf(TransactionType = 'Check', 
                       TotalPrice, 0)
           ) AS TotalCheck,
       SUM(
                       IIf(TransactionType = 'Multiple', 
                       IIf(MultiCash = 0, 
                        0, MultiCash), 0)
           ) AS MultipleCash,
       SUM(
                       IIf(TransactionType = 'Multiple', 
                       IIf(MultiCredit= 0, 
                        0, MultiCredit), 0)
           ) AS MultipleCredit,
       SUM(
                       IIf(TransactionType = 'Multiple', 
                       IIf(MultiCheck = 0, 
                        0, MultiCheck), 0)
           ) AS MultipleCheck

FROM  RECEIPT 

WHERE ReceiptDate BETWEEN ? AND ? 
```

错误：

```
Generated SELECT statement.
   Error in list of function arguments: '=' not recongized.
   Unable to parse query text. 
```

编辑：

让我告诉你我想做什么，而不仅仅是发布代码。这可能是解决此问题的另一个简单方法。所以我想从 vb.net 的报告查看器中提取一份报告，告诉我在特定日期之间使用的投标。

前任。

```
1/20/2013
Transaction Type                 Amount
Cash                             $100.00
Check                            $300.00
Credit                           $1,000.00
MultiCash                        $1,500.00
MultiCheck                       $1,500.00
MultiCredit                      $1,500.00 
```

报告查看器中的类似内容。用户将能够选择特定日期。我要从中提取信息的 Access 数据库表如下所示。

```
 RECEIPT
-----------
ReceiptNumber (PK)
ReceiptDate
TotalPrice
TransactionType
MultiCash
MultiCheck
MultiCredit
TotalTax 
```

也许还有其他方法可以做到这一点？

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:39:04.413

像这样的子句：

```
IIf(MultiCash = 0, 0, MultiCash) 
```

绝对什么都不做。您是在说“如果 multicash 为 0，则使用 0，否则使用该值……”

它看起来像是一种过于复杂的方法。试试这个，它会以稍微不同的格式为您提供数据，但我怀疑它会接近您所追求的

```
SELECT TransactionType, 
       SUM(TotalPrice)  AS SumTotalPrice,
       SUM(MultiCash )  AS MultipleCash,
       SUM(MultiCredit) AS MultipleCredit,
       SUM(MultiCheck ) AS MultipleCheck
FROM  Receipt 
WHERE ReceiptDate BETWEEN ? AND ?
GROUP BY TransactionType 
```

它还有一个好处是查询自然会处理以后引入的新支付类型。

# amazon-ec2 - 关于亚马逊免费套餐实例

> ID：14468251
> 
> 赞同：0
> 
> 时间：2013-01-22T21:22:27.283
> 
> 标签：amazon-ec2

我正在尝试使用亚马逊免费套餐实例。我运行了免费的 Fedora 服务器。我也在那里安装了一个网络服务器。现在我如何从外部访问该服务器。使用什么域名。我现在没有自己的域名。亚马逊本身不给我一些访问它的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:30:37.703

Amazon EC2 为您启动的每个实例分配一个默认公有 DNS。请注意，它不是一个用户友好的名称。要查看您的公共 DNS：

1.  登录 Amazon EC2 服务并访问您的控制台
2.  单击右上角的齿轮图标，这将显示“显示/隐藏列”对话框。
3.  在“EC2 实例属性”下选择`Public DNS`。
4.  单击应用关闭对话框并保存选项
5.  您的公共 DNS 现在显示在同名列下，复制该列中的值并开火。

请注意，要对您的实例做任何有用的事情（就远程访问而言），您应该为其启用一个或多个[安全组](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-network-security.html)。

![在此处输入图像描述](../Images/d7696ff65d03f422057e25caa07cc6c5.png)

# mysql - 在 SQL 查询中过滤双精度值

> ID：14468252
> 
> 赞同：0
> 
> 时间：2013-01-22T21:22:28.123
> 
> 标签：mysql, group-by

我遇到了 MySQL SQL 命令的问题。
我有一个包含 3 列的表格：

```
 id (int) | ip(string) | time(mysql timestamp) 
```

我想对所有按时间分组的行进行计数。我使用以下代码：

```
 SELECT DATE( TIME ) as date, COUNT( * ) as count
 FROM table
 WHERE TIME > ( NOW( ) - INTERVAL 10 DAY ) 
 GROUP BY DATE(  `time` ) 
```

好吧，但是现在，我想忽略双 IP。例如：如果我将以下数据放入 mysql 表中：

```
 ID | time                  | IP
 --------------------------------------
 1  | 2013-01-21 20:48:01   | 127.0.0.1  
 2  | 2013-01-22 20:48:01   | 127.0.0.1  
 3  | 2013-01-22 20:48:01   | 127.0.0.1
 4  | 2013-01-22 20:48:01   | 127.0.0.3 
```

我只想看到以下数据：

```
 date       | count
 ------------------
 2013-01-21 | 1  
 2013-01-22 | 2 
```

最好的方法是什么？我不会在我的应用程序中创建一个删除所有重复项的循环，因为表增长很快，如果我在我的应用程序中这样做，我将花费大量资源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T21:24:18.043

尝试这个：

```
SELECT DATE(`time`) as date, COUNT( DISTINCT IP ) as count
 FROM table
 WHERE `time` > ( NOW( ) - INTERVAL 10 DAY ) 
 GROUP BY DATE(  `time` ) 
```

**[SQL 小提琴演示](http://sqlfiddle.com/#!2/ac1d9/2)**

# android - 在 Android 中使用 Google Cloud Print API

> ID：14468266
> 
> 赞同：19
> 
> 时间：2013-01-22T21:23:14.640
> 
> 标签：android, printing, google-cloud-print

我正在开发一个需要打印到打印机的 android 应用程序。我决定使用谷歌云打印，因为它看起来很容易设置。最初，我按照[此处](https://developers.google.com/cloud-print/docs/android)找到的步骤集成到 Android 中。这有效，因为它将打印到我想要​​的打印机。但是，这个过程对用户来说有点复杂。就我而言，过程如下：

1.  用户选择了我在一些信息旁边显示的打印按钮。
2.  将显示一个对话框，其中包含将要打印的内容的预览。ActionBar 中有一个按钮，上面写着“打印”。这开始了这个过程。
3.  将显示一个新活动，其中显示了连接到该用户 Google 帐户的打印机列表。用户必须选择一个。
4.  将显示一个新页面，提供打印作业的描述。
5.  用户必须选择右上角的“打印”。
6.  打印作业开始，打印机打印出图片。

不幸的是，我的客户不想要这个过程。他们希望用户在第二步中单击“打印”，然后打印图片（步骤 1、2 和 6）。因此，我不能使用谷歌提供的 Intent，我必须使用实际的 API。这需要我获取 Google Auth 令牌，获取所需的打印机，然后以这种方式提交打印作业。我执行以下操作：

1.  使用 Google Play 服务检索用户 Gmail 帐户的 OAuth 令牌。
2.  使用 /search API 调用获取打印机列表。
3.  使用 /submit API 调用提交打印作业。

我已经完成了前两个。我只是在实际打印图片时遇到问题。不是打印图片，而是打印图片的字节数据（Base64 编码）。这是一些关于我如何发送请求的代码：

```
ContentResolver contentResolver = context.getContentResolver();
try {
    InputStream is = contentResolver.openInputStream(uri);
    ByteArrayOutputStream baos = new ByteArrayOutputStream();

    byte[] buffer = new byte[4096];
    int n = is.read(buffer);
    while (n >= 0) {
            baos.write(buffer, 0, n);
            n = is.read(buffer);
    }
    is.close();
    baos.flush();

    content = Base64.encodeToString(baos.toByteArray(), Base64.DEFAULT);
} catch (FileNotFoundException e) {
    Log.d(TAG, "File not found: " + uri.toString(), e);
} catch (IOException e) {
    e.printStackTrace();
} 
```

此代码检索图片（变量“uri”是该文件的 URI），并将其转换为 Base64 编码字符串。这与 Google 云打印页面（链接到上面）上提供的 PrintDialogActivity 中使用的方法相同。以下是我发送它的方式：

*   网址：[http://www.google.com/cloudprint/submit?access_token=[AUTH_TOKEN_GOES_HERE]&cookies=false&printerid=[PRINTER_ID_HERE]](http://www.google.com/cloudprint/submit?access_token=[AUTH_TOKEN_GOES_HERE]&cookies=false&printerid=[PRINTER_ID_HERE])
*   HTTP 方法：POST
*   POST参数：[printerId=PRINTER_ID_HERE, title=TestPrint, contentType=image/jpeg, capabilities={"capabilities":[{}]}, content=[Base64编码的数据字符串放在这里]]

据我所知，这就是它应该的样子。我在打印时收到 {"success":true} 的响应。但是，正如我上面所说，它会打印出实际的 Base64 数据字符串。任何帮助，将不胜感激。

**编辑：**使用 powerje 下面所说的，我设法解决了这个问题。我没有使用上面的代码，而是使用了以下代码：

```
public void submitPrintJobWithFile(String printerId, String title, String token, String filePath, String contentType){
    File file = new File(filePath);
    // Method that gets the correct headers
    List<Header> headers = getHeaders(contentType, token);
    // Method that gets the correct post parameters
    String url = CLOUDPRINT_URL + PATH_SUBMIT;
    List<NameValuePair> postParams = getParams(title, contentType);
    String params = "access_token=" + token + "&cookies=false" + "&printerid=" + printerId;
    url += params;
    response = sendMultipartData(url, file, postParams, headers);
}

private String sendMultipartData(String url, File file, List<NameValuePair> fields, List<Header> headers){
    HttpPost post = new HttpPost(url);
    MultipartEntity entity = new MultipartEntity();
    for(NameValuePair pair : fields){
        String name = pair.getName();
        String value = pair.getValue();
        try{
            entity.addPart(name, new StringBody(value));
        }catch (UnsupportedEncodingException e){
            Log.d(TAG, "Error turning pair (name=" + name + ", value=" + value + ") into StringBody.");
    }
    entity.addPart("content", new FileBody(file));
    post.setEntity(entity);
    // Finish HttpClient request here...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T16:44:37.320

看起来您需要使用多部分编码，例如：

[http://blog.tacticalnuclearstrike.com/2010/01/using-multipartentity-in-android-applications/](http://blog.tacticalnuclearstrike.com/2010/01/using-multipartentity-in-android-applications/)

自由贸易协定：

> 需要的文件是[apache-mime4j](http://james.apache.org/mime4j/)、[httpclient、httpcore 和 httpmime](http://hc.apache.org/downloads.cgi)。都是[Apache](http://www.apache.org/)基金会构建的开源项目。
> 
> 下载这 4 个文件并将它们添加到您的项目中，然后您应该能够使用以下代码将字符串和文件发布到页面。

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.tumblr.com/api/write");

try {
    MultipartEntity entity = new MultipartEntity();

    entity.addPart("type", new StringBody("photo"));
    entity.addPart("data", new FileBody(image));
    httppost.setEntity(entity);
    HttpResponse response = httpclient.execute(httppost);
} catch (ClientProtocolException e) {
} catch (IOException e) {
} 
```

> 在这种情况下，图像变量是一个文件，其中包含手机上的摄像头捕获的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T20:38:24.697

查看[Python Sample Code](https://developers.google.com/cloud-print/docs/pythonCode) SubmitJob 方法，似乎只有 PDF 类型需要用 Base64 编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-04T20:23:05.917

用一点更新来回答这个问题。截至 2013 年 10 月，在 4.4 和支持库中，内置了处理打印的方法。请参阅以下文档以了解如何正确执行此操作：

*   [PrintHelper](http://developer.android.com/reference/android/support/v4/print/PrintHelper.html) - 帮助打印位图的支持库类。
*   [DevBytes: Android 4.4 Printing API](https://www.youtube.com/watch?v=Iub67ic87KI) - 一个详细介绍 API 的 Android 开发者视频
*   [打印内容](http://developer.android.com/training/printing/index.html)- 关于如何使用这些 API 的 Android 培训指南。

# c++ - 如何通过 UDP + Unsigned-Long-Operator-Curiosity 发送 float[]

> ID：14468271
> 
> 赞同：2
> 
> 时间：2013-01-22T21:23:23.653
> 
> 标签：c++, udp, char, sendto

我正在编写一个从设备读取多个电压的 C++ 应用程序。我收到这些测量结果，`float[]`我想通过 UDP 将此数组发送到 MATLAB 脚本。

C++ 函数 sendto 需要获取`char[]`缓冲区，我真的不知道如何将其转换`float[]`为`char[]`缓冲区，因此我可以在 MATLAB 中轻松地重新组装它。有任何想法吗？

我遇到的另一个问题是那条线

```
addr.sin_addr = inet_addr("127.0.0.1"); 
```

inet_addr 返回一个 unsigned long，但我的编译器告诉我 = 运算符在其右侧不接受 unsigend long 数据类型。关于这个的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T21:32:18.203

You can always treat any object variable as a sequence of bytes. For this very purpose, it is explicitly allowed (and does not violate aliasing or constitute type punning) to reinterpret any object pointer as a pointer to the first element in an array of bytes (i.e. any `char` type).

**Example:**

```
T x;
char const * p = reinterpret_cast<char const *>(&x);

for (std::size_t i = 0; i != sizeof x; ++i) { /* p[i] is the ith byte in x */ } 
```

**For your case:**

```
float data[N];
char const * p = reinterpret_cast<char const *>(data);

write(fd, p, sizeof data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T21:47:35.477

决定是否要将 UDP 消息格式化为文本或二进制。如果是文本，您可以使用 boost::lexical_cast 将浮点数转换为字符串。您可以以任何您想要的方式（逗号分隔值、换行符分隔等）将 UDP 消息中的字符串值框起来，或者您可以使用已知格式，例如 JSON。

如果要传输二进制数据，请选择已知格式，例如 ONC RPC 使用的 XDR，并使用现有的库工具来创建二进制消息。

至于inet_addr错误，addr.sin_addr是一个struct in_addr。您需要将结果分配给 sin_addr 结构的 s_addr 成员，如下所示：

```
addr.sin_addr.s_addr = inet_addr("127.0.0.1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T21:37:05.153

你的帖子有两个问题。我相信这不是它应该的样子。

至于 float[]->byte[] conersion - 你应该检查 matlab 如何存储它的浮点变量。如果有任何机会，它使用与您的编译器相同的格式，仅用于您的计算机设置等，您可以简单地将它们作为字节数组 [] 发送。在任何其他情况下 - 不兼容的浮点字节格式，多台机器 - 您必须编写手动转换。首先每个浮点数到（例如）字符串，然后是许多浮点数。您的行可能如下所示：

`1.41234;1.63756;456345.45634`

至于 addr.sin_addr - 我认为你做错了。你应该访问

`addr.sin_addr.s_addr = inet_addr("1.1.1.1");`

# powershell - 电源外壳遥控器

> ID：14468278
> 
> 赞同：2
> 
> 时间：2013-01-22T21:23:52.253
> 
> 标签：powershell, invoke-command

我正在尝试从我的本地机器上运行它（Win7 & PS v2.0）

```
cls
$sess = Enter-PSSession -ComputerName blmcrmpoc
Invoke-Command -Session $sess -Scriptblock
{
$path = "C:\inetpub\logs\LogFiles"
$lastWrite = (Get-Date).AddDays(-90)
$oldLogs = Get-ChildItem -path $path -Recurse -Filter *.log | Where {$_.LastWriteTime -le $lastWrite}
if ($oldlogs.count -gt 0)
{foreach ($log in $oldLogs)
{$log.Delete()}}} 
```

但我得到这个错误。

***Invoke-Command：无法验证参数“会话”的参数。参数为 null 或空。提供一个不为 null 或空的参数，然后再次尝试该命令。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T21:54:45.630

尝试：

```
cls
$sess = New-PSSession -ComputerName blmcrmpoc
Invoke-Command -Session $sess -Scriptblock
{
    $path = "C:\inetpub\logs\LogFiles"
    $lastWrite = (Get-Date).AddDays(-90)
    $oldLogs = Get-ChildItem -path $path -Recurse -Filter *.log | Where {$_.LastWriteTime -le $lastWrite}
    if ($oldlogs.count -gt 0)
    {
        foreach ($log in $oldLogs)
        {
            $log.Delete()
        }
    }
} 
```

随着`Enter-PSSession`您输入一个 pssession（您开始对其进行远程处理，以便您可以直接编写命令，就好像它是本地计算机一样）。如果要在特定会话上使用 Invoke-Command，请使用创建会话，`New-Session`因为这会创建会话而不输入会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-28T04:34:15.870

如何访问脚本块的参数列表

ArgumentList 基于与 scriptblock 命令一起使用，例如：

你必须为脚本块传递参数..

```
    分类
    $sess = Enter-PSSession -ComputerName blmcrmpoc
    调用命令 -Session $sess -Scriptblock
    {
    $path = "C:\inetpub\logs\LogFiles"
    $lastWrite = (Get-Date).AddDays(-90)
    $oldLogs = Get-ChildItem -path $path -Recurse -Filter *.log | 其中 {$_.LastWriteTime -le $lastWrite}
    如果（$oldlogs.count -gt 0）
        {
       $xArgvalue=arg[0]
    $yArgvalue=arg[1]
    foreach ($log in $oldLogs)
     {
     $log.Delete()
     }
        }
    } -ArgumentList $x,$y

```

我在下面的链接中找到了[如何将参数传递给脚本块](http://powershelltutorial.net/home/powershell-questions)

# r - 更新 MongoDB 子文档中的特定字段 (rmongodb)

> ID：14468284
> 
> 赞同：2
> 
> 时间：2013-01-22T21:24:08.367
> 
> 标签：r, mongodb, crud

我在理解如何更新子文档（而不是**整个子文档）的****特定**字段的方式时遇到了一些问题。

 **我似乎已经了解如何查询子文档中的某些字段值，但是对于如何构建仅更改查询字段的 BSON 文档，我感到迷茫。

**仍然觉得我还没有完全理解“普通 MongoDB 语法”如何转换为 R 语法以及[更新运算符](http://docs.mongodb.org/manual/applications/update/#update-operators)是如何工作的。在这方面的任何提示将不胜感激。**

## 预赛

```
pkg <- "rmongodb"
lib <- file.path(R.home(), "library")
if (!suppressWarnings(require(pkg, lib.loc=lib, character.only=TRUE))) {
    install.packages(pkg, lib=lib)
    require(pkg, lib.loc=lib, character.only=TRUE)
}

db      <- "__test"
ns.0    <- "user"
ns      <- paste(db, ns.0, sep=".")
con     <- mongo.create(db=db) 
```

## 确保空数据库

```
mongo.remove(mongo=con, ns=ns) 
```

# 插入文档

**本节仅确保数据库中的一些示例数据。这只是一个辅助部分，你可以在精神上跳过！继续“查询”部分并查看“实际查询”以了解可能难以从下面的 R 代码中掌握的文档结构。**

## 文档 1 的 BSON

```
blist <- NULL
buf <- mongo.bson.buffer.create()
mongo.bson.buffer.append(buf, name="host", 
    value="unittest.com")
mongo.bson.buffer.start.array(buf, "paths")
mongo.bson.buffer.start.object(buf, "1")
mongo.bson.buffer.append(buf, name="path", 
    value="home")
mongo.bson.buffer.append(buf, name="url", 
    value="www.unittest.com/home")
mongo.bson.buffer.start.array(buf, "queries")
mongo.bson.buffer.start.object(buf, "1")
mongo.bson.buffer.append(buf, name="query", 
    value="?somequery")
mongo.bson.buffer.append(buf, name="url", 
    value="www.unittest.com/home?somequery")
mongo.bson.buffer.finish.object(buf) # finish query:1
mongo.bson.buffer.start.object(buf, "2")
mongo.bson.buffer.append(buf, name="query", 
    value="?someotherquery")
mongo.bson.buffer.append(buf, name="url", 
    value="www.unittest.com/home?someotherquery")
mongo.bson.buffer.finish.object(buf) # finish query:2
mongo.bson.buffer.finish.object(buf) # finish queries
mongo.bson.buffer.finish.object(buf) # finish path:1
mongo.bson.buffer.start.object(buf, "2")
mongo.bson.buffer.append(buf, name="path", 
    value="somepage")
mongo.bson.buffer.append(buf, name="url", 
    value="www.unittest.com/somepage")
mongo.bson.buffer.start.array(buf, "queries")
mongo.bson.buffer.start.object(buf, "1")
mongo.bson.buffer.append(buf, name="query", 
    value="?somequery")
mongo.bson.buffer.append(buf, name="url", 
    value="www.unittest.com/somepage?somequery")
mongo.bson.buffer.finish.object(buf) # finish query:1
mongo.bson.buffer.start.object(buf, "2")
mongo.bson.buffer.append(buf, name="query", 
    value="?someotherquery")
mongo.bson.buffer.append(buf, name="url", 
    value="www.unittest.com/somepage?someotherquery")
mongo.bson.buffer.finish.object(buf) # finish query:2
mongo.bson.buffer.finish.object(buf) # finish queries
mongo.bson.buffer.finish.object(buf) # finish path:2
mongo.bson.buffer.finish.object(buf) # finish paths
mongo.bson.buffer.finish.object(buf) # finish buf

b <- mongo.bson.from.buffer(buf)
blist <- c(blist, list(b)) 
```

## 文档 2 的 BSON

**编辑 2012-01-23**

我删除了这一部分以使问题更容易理解。

## 实际插入

```
sapply(blist, function(ii) {
    mongo.insert(mongo=con, ns=ns, b=ii)
}) 
```

# 查询

## BSON 查询

```
buf <- mongo.bson.buffer.create()
mongo.bson.buffer.start.object(buf, "paths")
mongo.bson.buffer.start.object(buf, "$elemMatch")
mongo.bson.buffer.start.object(buf, "queries")
mongo.bson.buffer.start.object(buf, "$elemMatch")
mongo.bson.buffer.append(buf, name="query", value="?somequery")
mongo.bson.buffer.finish.object(buf)
mongo.bson.buffer.finish.object(buf)
mongo.bson.buffer.finish.object(buf)
mongo.bson.buffer.finish.object(buf)
query <- mongo.bson.from.buffer(buf)
> query
    paths : 3    
        $elemMatch : 3   
            queries : 3      
                $elemMatch : 3   
                    query : 2    ?somequery 
```

## 实际查询

```
> mongo.find.one(mongo=con, ns=ns, query=query)
    _id : 7      50feff31ba54a032514b6181
    host : 2     unittest.com
    paths : 4    
        1 : 3    
            path : 2     home
            url : 2      www.unittest.com/home
            queries : 4      
                1 : 3    
                    query : 2    ?somequery
                    url : 2      www.unittest.com/home?somequery

                2 : 3    
                    query : 2    ?someotherquery
                    url : 2      www.unittest.com/home?someotherquery

        2 : 3    
            path : 2     somepage
            url : 2      www.unittest.com/somepage
            queries : 4      
                1 : 3    
                    query : 2    ?somequery
                    url : 2      www.unittest.com/somepage?somequery

                2 : 3    
                    query : 2    ?someotherquery
                    url : 2      www.unittest.com/somepage?someotherquery 
```

# 更新

## 用于更新的 BSON

我想`query`在子文档中设置字段的值`query`。我查看了[MongoDB 手册](http://docs.mongodb.org/manual/applications/update/#crud-update-update)并尝试了类似的方法（使用`$set`and`$`运算符，因为涉及数组）：

```
buf <- mongo.bson.buffer.create()
mongo.bson.buffer.start.object(buf, "$set")
mongo.bson.buffer.start.object(buf, "paths")
mongo.bson.buffer.start.object(buf, "$")
mongo.bson.buffer.start.object(buf, "queries")
mongo.bson.buffer.start.object(buf, "$")
mongo.bson.buffer.append(
    buf, 
    name="name", 
    value="abcd"
)
mongo.bson.buffer.finish.object(buf)
mongo.bson.buffer.finish.object(buf)
mongo.bson.buffer.finish.object(buf)
mongo.bson.buffer.finish.object(buf)
mongo.bson.buffer.finish.object(buf)
bnew <- mongo.bson.from.buffer(buf)

> bnew
    $set : 3     
        paths : 3    
            $ : 3    
                queries : 3      
                    $ : 3    
                        name : 2     abcd 
```

## 实际更新

显然，这不是一个好的选择；-)

```
res <- mongo.update(mongo=con, ns=ns, criteria=query, 
    objNew=bnew, flags=mongo.update.multi)

> res
[1] FALSE 
```

[2](http://docs.mongodb.org/manual/applications/update/#crud-update-update)：[http](http://docs.mongodb.org/manual/applications/update/#update-operators) : //docs.mongodb.org/manual/applications/update/#update-operators zU

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:56:02.557

试试这个bnew：

```
buf <- mongo.bson.buffer.create()
mongo.bson.buffer.start.object(buf, "$set")
mongo.bson.buffer.append(buf, "paths.0.queries.1.query", "?newquery")
mongo.bson.buffer.finish.object(buf)
bnew = mongo.bson.from.buffer(buf) 
```

这将替换第一个查询中的第二个查询。**

# html - 为什么gmail总是在电子邮件中的项目宽度上添加或删除一些小数部分？

> ID：14468292
> 
> 赞同：0
> 
> 时间：2013-01-22T21:24:44.613
> 
> 标签：html, html-table, html-email

我正在处理电子邮件 HTML 模板，并向我的 gmail 帐户发送了一个测试。我指定了每个`<td>`元素的宽度，并确保`<td>`一行中的所有宽度加起来与表格宽度一致。但在我看来，gmail总是为`td`我指定的宽度添加或删除一些十进制数，这导致表格宽度和整体宽度之间有点不匹配`td`。而且这种不匹配会在表格的边框和最后一行之间显示一个小间隙`td`，这对我来说有点烦人。有谁知道如何解决这个问题？

实际上这种不匹配只发生在 gmail 中。Hotmail 和雅虎没有这个问题。

代码如下：（里面有一些汉字，你可以忽略它们）

```
<table width="650" cellpadding="0" cellspacing="0" style="border: 10px solid black;">
    <tr>
        <td style="width: 18px; font-size: 30px; font-family: Helvetica, Arial, 'Microsoft Yahei', sans-serif;">
            <img border="0" src="http://m.bomoda.com/static/img/email/spacer.gif" style="display:block;" />    
        </td>
        <td width="297" style="vertical-align: top;">
         <table width='297' cellpadding="0" cellspacing="0">
            <tr>
                <td colspan="2" height="175" style="width: 297px; height: 175px; line-height: 175px; max-height: 175px;">
                    <img border="0" src="http://m.bomoda.com/static/img/email/spacer.gif" style="display:block;" />       
                </td>
            </tr>
            <tr>
                <td colspan="2" style="font-family: Helvetica, Arial, 'Microsoft Yahei', sans-serif; font-size: 24px; color: #000001; font-weight: bold; text-align: left; line-height: normal;">
                    让&lt;span style="color: #00bac9; font-family: Helvetica, Arial, 'Microsoft Yahei', sans-serif; font-size: 24px; font-weight: bold;">Bomoda</span>
                </td>
            </tr>
            <tr>
                <td colspan="2" style="font-family: Helvetica, Arial, 'Microsoft Yahei', sans-serif; font-size: 24px; color: #000001; font-weight: bold; text-align: left; line-height: normal;">
                                        </td>
            </tr>
            <tr>
                <td colspan="2" height="31" style="width: 297px; height: 31px; line-height: 31px; max-height: 31px;">
                    <img border="0" src="http://m.bomoda.com/static/img/email/spacer.gif" style="display:block;" />       
                </td>
            </tr>
            <tr>
                <td colspan="2" style="font-family: Helvetica, Arial, 'Microsoft Yahei', sans-serif; font-size: 14px; color: #000001; text-align: left; line-height: normal;">
                    <a href="http://www.bomoda.com" target="_blank" style="text-decoration: none;"><span style="color: #00bac9; font-family: Helvetica, Arial, 'Microsoft Yahei', sans-serif; font-size: 14px; ">Bomoda</span></a>Newsletter
                </td>
            </tr>
            <tr>
                <td colspan="2" height="36" style="width: 297px; height: 36px; line-height: 36px; max-height: 36px;">
                    <img border="0" src="http://m.bomoda.com/static/img/email/spacer.gif" style="display:block;" />       
                </td>
            </tr>
            <tr>
                <td width="116">
                    <a href="http://www.bomoda.com" target="_blank" style="display: block; text-decoration: none;">
                        <img border="0" src="http://m.bomoda.com/static/img/email/retention_email/button.jpg" alt="" style="display: block; width: 116px; height: 27px;" />
                    </a>
                </td>
                <td width="181">
                    <img border="0" src="http://m.bomoda.com/static/img/email/spacer.gif" style="display:block;" />    
                </td>
            </tr>       
         </table>    
        </td>
        <td width="315">
            <img border="0" alt="Bomoda" style="display: block; width: 315px; height: 458px;" src="http://m.bomoda.com/static/img/email/retention_email/A.jpg" />    
        </td> 
    </tr>
</table> 
```

如您所见，650 宽的表格只有一行，其中三个`td`。它们的宽度分别为 18、297 和 315，总共等于 630（考虑到表格的左右边框为 10 宽）。但是当我在chrome中使用开发者工具查看每个的宽度时`td`，它显示每个的计算宽度分别`td`为17.27272605895996、296.3636169433594和315.45452880859375，加起来不能达到630。所以表格边框之间会有一个小间隙和最右边的图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:37:00.190

尝试在所有 colspan'd 行上方放置一个 2 cols 的空行。有时，当您未在表格的第一行中指定 col 宽度时，您可能会遇到问题。

不确定这是否能解决您的问题，但我过去曾遇到过没有先设置 col 宽度的问题......

# ios - 使用 NSJSONSerialization 将自定义对象序列化为值

> ID：14468294
> 
> 赞同：2
> 
> 时间：2013-01-22T21:25:05.607
> 
> 标签：ios, nsjsonserialization

所以我的 JSON 请求应该类似于：

```
{ 
   "MyDictionary" : ["some values"], 
   "RegularValue" : "regularValue",
} 
```

所以我目前所做的是：

```
NSDictionary *myDict = @{@"Blah" : @"1", @"Yadayada" : @"2"}; 
NSDictionary *jsonDict = @{"MyDictionary" : myDict, "RegularValue" : "someValue"};
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDict options:kNilOptions error:&error]; 
```

所以这很好用。我遇到的问题是，我想要做的是使用 NSObject 的自定义子类并将其序列化为 JSON，而不是手动创建 MyDictionary。我基本上必须为我的自定义 NSObject 的属性手动创建 NSDictionary 并将其放入 NSJSONSerialization 方法中。但我想知道是否有更好的方法来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T03:41:54.120

也许这可以帮助[JLCustomClassDisassembler](https://github.com/joshuaLareta/JLCustomClassDisassembler)。

它迭代自定义对象以获取属性。这将为您提供字典/数组，然后只需使用 sbjson/jsonkit 或您喜欢的任何东西来构建您的 json 字符串。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-22T21:32:07.530

To achieve this you would need to create your own custom NSObject class with attributes and more and still have a custom method to serialize the object, similar to the way toString works on java, on Objective-C you would need to implement

```
- (NSString *)description 
```

on your method and then return the serialized object.

on this method you could read all the attributes of the current object and then somehow serialize them, this thread presents a nice sample code to read all the attributes of a certain Object

[Get an object properties list in Objective-C](https://stackoverflow.com/questions/754824/get-an-object-attributes-list-in-objective-c)

# ios - 如何仅在代码中打开 ipad 上的图像选择器

> ID：14468296
> 
> 赞同：1
> 
> 时间：2013-01-22T21:25:16.063
> 
> 标签：ios, objective-c, ipad, uiimage

如何在代码中创建图像选择器？

我将 iOS 6.0 与 ARC 一起用于 ipad。

我希望能够选择图片并以某种方式获取所选图像的 UIImage 。

我确实添加了代表：在此处输入代码

在 viewDidLoad 方法中做了 `enter code here`imagePicker = [[UIImagePickerController alloc] init];

并在单击的按钮方法中我放了

```
imagePicker.delegate = self;
imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
[self presentModalViewController:imagePicker animated:YES]; 
```

崩溃发生在

```
[self presentModalViewController:imagePicker animated:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:28:47.793

这里有一些教程[http://www.raywenderlich.com/130/how-to-write-a-custom-image-picker-like-uiimagepicker](http://www.raywenderlich.com/130/how-to-write-a-custom-image-picker-like-uiimagepicker)和[http://mobileorchard.com/ios-advanced-programming-the -image-picker/](http://mobileorchard.com/ios-advanced-programming-the-image-picker/)可能对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:44:59.540

在中添加属性`.h`

`@property (strong) UIPopoverController *pop;`

`.m`在您的按钮实施下的r文件中添加如下内容：

```
if (self.pop) {
        [self.pop dismissPopoverAnimated:YES];

    }

UIImagePickerController *imagePickerController = [[UIImagePickerController alloc] init];
       imagePickerController.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
       imagePickerController.delegate = self;
       imagePickerController.allowsEditing = YES; //if you want to edit the image

       self.pop=[[UIPopoverController alloc] initWithContentViewController:imagePickerController];
       //choose the direction of the arrow for the popover
       [self.pop presentPopoverFromRect:((UIButton *)sender).bounds inView:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
  }
} 
```

确保您`<UIPopoverControllerDelegate>`在 .h 中设置了您的委托

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T21:40:37.130

我的一个项目中有类似的代码，但我有

```
[self presentViewController:imagePicker animated:YES completion:nil]; 
```

代替

```
[self presentModalViewController:imagePicker animated:YES]; 
```

试试看它是否有效。注意 presentViewController 而不是 presentModalViewController。

# jquery-ui - 在 jquery 选项卡中显示 Grails 域

> ID：14468298
> 
> 赞同：0
> 
> 时间：2013-01-22T21:25:21.920
> 
> 标签：jquery-ui, grails

在 JQuery UI 选项卡中显示来自 Grails 数据库的数据的最佳方式是什么？我想要的是有一个选项卡界面，每个选项卡上都有一个来自不同域的记录列表。例如，Tab1 显示来自 Domain1 的记录列表，Tab2 显示来自 Domain2 的记录列表，等等。

我已经设置并工作了 JQuery UI 选项卡界面，目前正在使用 createLink 从控制器调用方法以返回相应域的模型。选项卡如下所示：

```
<div id="tabs">
    <ul>
        <li><a href="${createLink(action: 'listHardware')}">Hardware records</a></li>
        <li><a href="${createLink(action:'listModel')}">Model records</a></li>
        <li><a href="${createLink(action:'listBuilding')}">Building records</a></li>

    </ul>       
</div> 
```

来自控制器的方法如下所示：

```
def listHardware() {
    [hardwareList:Hardware.list(), hardwareInstanceTotal:Hardware.count()]      
} 
```

我还尝试使用“render(view:'HardwareList', model:[hardwareList:Hardware.list(), hardwareInstanceTotal:Hardware.count()]”在选项卡中渲染整个 GSP，但这需要每次选择选项卡时加载时间很长（至少 5 秒），而且根本不理想，特别是如果每​​个选项卡都需要很长时间。

**更新**

正如我在下面对 Rimero 的回答中所指出的那样，我能够使用模板来显示我的域数据表。我还尝试使用标签在每个选项卡上实现分页，但是每次单击其中一个页面查看另一个页面时，都会将我带到选项卡界面之外的完整模板本身。**关于如何格式化标签以使所有内容都保留在选项卡中的任何想法？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:18:34.480

这是我的建议：

*   例如，您可以使用 index 方法在控制器中一次获取所有内容。
*   您可以将选项卡内容实现为模板（g 渲染模板）。每个选项卡 == 1 个模板。
*   您可以从控制器的 index 方法中获取域对象 buildingList 等。
*   每个选项卡的 g:render 模板代码可能只需要传递一个地图或一个集合即可进行渲染。

在这种情况下，您不需要到控制器端点的超链接。您只需将锚点保留在选项卡（div id）上，就像这里的默认示例一样 -> [http://jqueryui.com/tabs/](http://jqueryui.com/tabs/)。

**更新的答案**

正如您所说，一次发送所有数据需要很长时间，您可以异步获取它。如果可能，仅直接为第一个选项卡填充数据。

*   为每个选项卡创建一个业务方法，它将模型作为 JSON 返回，仅在尚未从服务器检索到数据时才获取数据（需要保持状态或查看例如选项卡 ID 是否有一些 DOM 节点。

*   使用 JQuery，当 DOM 准备好时，获取当前选项卡，如果您没有急切地获取第一个选项卡的数据，请在忙图像旋转的这一刻获取它。

*   一旦你选择了一个新的标签，你需要检查数据是否已经被获取，如果没有，你发送一个 ajax 调用并且你的回调函数例如在标签 div 容器中填充数据。

希望能帮助到你。

# facebook - 网站上的 Facebook 评论（使其适用于网站上的不同页面）

> ID：14468307
> 
> 赞同：0
> 
> 时间：2013-01-22T21:25:51.127
> 
> 标签：facebook, comments, facebook-comments

我已经在我正在开发的网站上设置了 facebook 评论。我在 ASP 中工作并且有页眉和页脚。我将代码放在页脚中。它显示并且工作正常，除了每个页面显示相同的评论。我希望每个页面都有自己的评论。有谁知道如何做到这一点？

示例：我在主页上发表评论，它显示在整个网站的评论中。

我还希望评论显示在 Facebook 页面上。

任何帮助，将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:45:32.053

[在调试器](https://developers.facebook.com/tools/debug)中查看您的一些页面。我的猜测是您对所有页面都有一个规范的 url。

评论插件不支持让评论显示在您的 Facebook 页面上。您需要创建一个应用程序并将 Open Graph 操作发布到您的页面以执行此操作。

# java - 使用数据库刷新jcombo box java中的内容

> ID：14468310
> 
> 赞同：1
> 
> 时间：2013-01-22T21:26:06.787
> 
> 标签：java, mysql, database, swing, jcombobox

在第一个组合框中选择一个项目后，是否可以在一个组合框中刷新内容。第一个组合框中的项目将是类型，第二个组合框将具有该项目的子类型。此外，这必须发生在一帧上。组合框中的数据将从数据库中读取。类型将是数据库中的一列，子类型也是如此。我使用的数据库是MYSQL。

对快速简单的代码有什么建议吗？

我有一个很好的图像来说明这个问题，但我需要更多的代表来添加它。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T21:43:35.127

*   使用[XxxComboBoxModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/ComboBoxModel.html)为[JComboBox存储项目](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)

*   [JComboBox 及其 XxxComboBoxModel 的所有更新都必须在 EDT 上完成](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

*   `Database`从`Runnable#Thread`or调用事件`SwingWorker`，将这个（可能）困难且长时间运行的任务重定向到`Workers Thread`，否则 Swing GUI 将冻结或无响应（对于鼠标和按键事件）直到 JDBC 结束

*   [`SwingWorker`s 方法 publish()、process() 和 done()](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/simple.html)很好地保证了所有输出都将在 EDT 上完成

例如

```
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import javax.swing.*;

public class ComboBoxTwo extends JFrame implements ActionListener, ItemListener {

    private static final long serialVersionUID = 1L;
    private JComboBox mainComboBox;
    private JComboBox subComboBox;
    private Hashtable<Object, Object> subItems = new Hashtable<Object, Object>();

    public ComboBoxTwo() {
        String[] items = {"Select Item", "Color", "Shape", "Fruit"};
        mainComboBox = new JComboBox(items);
        mainComboBox.addActionListener(this);
        mainComboBox.addItemListener(this);
        //prevent action events from being fired when the up/down arrow keys are used
        //mainComboBox.putClientProperty("JComboBox.isTableCellEditor", Boolean.TRUE);
        getContentPane().add(mainComboBox, BorderLayout.WEST);
        subComboBox = new JComboBox();//  Create sub combo box with multiple models
        subComboBox.setPrototypeDisplayValue("XXXXXXXXXX"); // JDK1.4
        subComboBox.addItemListener(this);
        getContentPane().add(subComboBox, BorderLayout.EAST);
        String[] subItems1 = {"Select Color", "Red", "Blue", "Green"};
        subItems.put(items[1], subItems1);
        String[] subItems2 = {"Select Shape", "Circle", "Square", "Triangle"};
        subItems.put(items[2], subItems2);
        String[] subItems3 = {"Select Fruit", "Apple", "Orange", "Banana"};
        subItems.put(items[3], subItems3);
//      mainComboBox.setSelectedIndex(1);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        String item = (String) mainComboBox.getSelectedItem();
        Object o = subItems.get(item);
        if (o == null) {
            subComboBox.setModel(new DefaultComboBoxModel());
        } else {
            subComboBox.setModel(new DefaultComboBoxModel((String[]) o));
        }
    }

    @Override
    public void itemStateChanged(ItemEvent e) {
        if (e.getStateChange() == ItemEvent.SELECTED) {
            if (e.getSource() == mainComboBox) {
                if (mainComboBox.getSelectedIndex() != 0) {
                    FirstDialog firstDialog = new FirstDialog(ComboBoxTwo.this,
                            mainComboBox.getSelectedItem().toString(), "Please wait,  Searching for ..... ");
                }
            } 
        }
    }

    private class FirstDialog extends JDialog { //sipmle simulation of JDBC events, by using Swing Timer

        private static final long serialVersionUID = 1L;

        FirstDialog(final Frame parent, String winTitle, String msgString) {
            super(parent, winTitle);
            setModalityType(Dialog.ModalityType.APPLICATION_MODAL);
            JLabel myLabel = new JLabel(msgString);
            JButton bNext = new JButton("Stop Processes");
            add(myLabel, BorderLayout.CENTER);
            add(bNext, BorderLayout.SOUTH);
            bNext.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent evt) {
                    setVisible(false);
                }
            });
            javax.swing.Timer t = new javax.swing.Timer(1000, new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    setVisible(false);
                }
            });
            t.setRepeats(false);
            t.start();
            setLocationRelativeTo(parent);
            setSize(new Dimension(400, 100));
            setVisible(true);
        }
    }

    public static void main(String[] args) {
        JFrame frame = new ComboBoxTwo();
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

# c# - Glue 框架的代码示例？

> ID：14468312
> 
> 赞同：0
> 
> 时间：2013-01-22T21:26:13.413
> 
> 标签：c#, .net, type-conversion

谁能告诉我一些如何将[Glue 框架](http://glue.codeplex.com/)集成到项目中的完整代码示例？我正在尝试使用它有点像 AutoMapper，因为我希望能够将一堆转换注册到 Glue，然后任意将两个对象交给它，让它从那里弄清楚。该网站很好地说明了如何制作单独的映射，但没有说明如何将它们集成到整个项目中。

当然，这一切都会被抽象出来，因此如果 Glue 变得太慢或需要更改映射框架，则可以进行手动映射，但就目前而言，我看到的主要用例是创建大量`Glue.Converter.IConverter`对象和让您选择的 IoC 容器将它们注入到需要它们的任何地方。这听起来不错，但如果这是我们使用的程序，我们的项目将需要几十个这样的零卡路里物体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:13:26.333

这需要大量的麻烦，但我处理好了。

使用[TypeSwitch](http://blogs.msdn.com/b/jaredpar/archive/2008/05/16/switching-on-types.aspx)代码让我可以对类型进行一些切换，我最初写了以下代码：

```
 public Mapping<Address, DatabaseAddress> DatabaseAddress { get; }
    public Mapping<T1, T2> GetMapping<T1, T2>()
    {
        Mapping<T1, T2> retMapping = null;
        TypeSwitch.Do(
            typeof (T1),
            TypeSwitch.Case<Address>(() =>
                TypeSwitch.Do(
                    typeof (T2),
                    TypeSwitch.Case<DatabaseAddress>(() => retMapping = AddressToDatabaseAddressMapping)
            ));

        return returnedMapping;
    } 
```

`retMapping = AddressToDatabaseAddressMapping`导致编译器错误，因为您无法自动分配 `Mapping<Address,DatabaseAddress>`给`Mapping<T1,T2>`. 即使，启发式地，它们在这里是同一件事，但它们在逻辑上并不是同一件事。

`object`事实证明，您可以通过利用类型有效地使 C# 作为动态语言运行。

```
 public Mapping<Address, DatabaseAddress> DatabaseAddress { get; }
    public Mapping<T1, T2> GetMapping<T1, T2>()
    {
        object retMapping = null;
        TypeSwitch.Do(
            typeof (T1),
            TypeSwitch.Case<Address>(() =>
                TypeSwitch.Do(
                    typeof (T2),
                    TypeSwitch.Case<DatabaseAddress>(() => retMapping = AddressToDatabaseAddress),
            ));

        var returnedMapping = (Mapping<T1, T2>) retMapping;

        return returnedMapping;
    } 
```

这比表明我的观点所需要的要冗长一些，但有趣的是，在运行时，`AddressToDatabaseAddress`即使它的静态类型并不意味着它需要它，它也会保持它的身份。而且，由于启发式地`Mapping<T1, T2>`是 IS `Mapping<Address, DatabaseAddress>`，它将在运行时正确地分配自己并完美地工作。

重要的是要注意，我必须添加一些东西`TypeSwitch`才能`typeof(T1)`正常`typeof(T2)`工作。默认的写法，`object source`也就是传入的是`System.Type`，这不是你想要的行为！但是，添加以下重载：

```
 public static void Do(Type source, params CaseInfo[] cases)
    {
        foreach (var entry in cases.Where(entry => entry.IsDefault || entry.Target.IsAssignableFrom(source)))
        {
            entry.Action(source);
            break;
        }
    } 
```

将使其按预期运行。由于`System.Type`重载比重载更具体`System.Object`，框架会更喜欢使用它。如果有人`TypeSwitch`更喜欢直接输入类型，那么对于一个常见的用例来说会更加理智。

# mysql - 使用 MySQL INSERT VALUES 语法插入多行

> ID：14468314
> 
> 赞同：0
> 
> 时间：2013-01-22T21:26:26.610
> 
> 标签：mysql, ruby, mysql2

我正在寻找一种特定于 ruby​​ 的解决方案来使用[INSERT..VALUES 语法插入多行](https://dev.mysql.com/doc/refman/5.1/en/insert.html)

目前我正在生成单独的插入语句，但从数据库的角度来看，这是非常低效的。我发现了一些相关的问题，但不完全是我想要的。

**示例 INSERT 语句（当前）：**

```
INSERT INTO qux SELECT 1,3,'foo';
INSERT INTO qux SELECT 4,11,'bar';
INSERT INTO qux SELECT 12,19,'baz'; 
```

[使用 ruby​​ on rails 活动记录插入多条记录](https://stackoverflow.com/questions/10022178/insert-multiple-records-using-ruby-on-rails-active-record)

上面的问题使用 ActiveRecord 来实现我想要做的事情，但我正在寻找一种纯 ruby​​ 方法。

[如何使用 ruby​​ mysql2 执行事务](https://stackoverflow.com/questions/9288593/how-do-i-perform-transactions-with-ruby-mysql2)

上述问题使用事务来实现与我的需求相似的结果。然而，这仍然不如使用一个 INSERT VALUES 语句那么有效。

**示例数据：**

```
start,end,name
1,3,foo
4,11,bar
12,19,baz 
```

**INSERT VALUES 语句（需要）：**

```
INSERT INTO qux VALUES (1,3,'foo'),(4,11,'bar'),(12,19,'baz'); 
```

任何已经存在的具有此功能的 gem/代码库？

更新：我不使用也不打算在这个特定项目中使用 ActiveRecord。我直接与 MySQL 数据库进行交互，并且很想知道我的问题的任何解决方案。一种选择可能是自己构建功能；但是我不想在这里重新发明轮子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T00:50:47.897

```
INSERT INTO SomeTable ( Col1, Col2, Col3 )
SELECT Val1, Val2, Val3 FROM SomeOtherTable
UNION
SELECT 'MyProvidedVal1', 'MyProvidedVal2', 'MyProvidedVal3'
UNION
SELECT 'MyProvidedVal4', 'MyProvidedVal5', 'MyProvidedVal6' 
```

来源：[使用选择插入多行](https://stackoverflow.com/questions/5366814/insert-multiple-rows-using-select)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-14T08:11:48.913

好的，我想出了一个有点笨拙的解决方案，但它确实有效！

在 MySQL 中，制作一个简单的测试表：

```
CREATE TABLE `aa_test` (
  `a` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `b` varchar(256) DEFAULT NULL,
  `c` varchar(256) DEFAULT NULL,
) ENGINE=InnoDB AUTO_INCREMENT=48 DEFAULT CHARSET=utf8; 
```

在您的 ruby​​ 代码中，将您的行组合成一个大的 honkin' 数组：

```
values = [1, 'hi', 'there', 2, 'ho', 'there', 47, 'yo', 'buddy'] 
```

动态构建查询，具体取决于您拥有的行数：

```
query = "INSERT INTO aa_test (`a`, `b`, `c`) VALUES "
(values.size / 3).times {|ignore|
    query << '(?,?,?),'
}
query.chop! # remove final comma
client.prepare(query).execute(*values) 
```

有用！至少，在irb。:-)

```
# mysql -h*** -u*** -p*** YourDatabaseHere -e'SELECT * FROM aa_test'
+----+------+-------+
| a  | b    | c     |
+----+------+-------+
|  1 | hi   | there |
|  2 | ho   | there |
| 47 | yo   | buddy |
+----+------+-------+ 
```

当然，您必须跟踪 values[] 中有多少字段和行。您可以将列名保存在一个数组中，并将它们插入到查询中并为循环提供除数。

这是我的应用程序中动态行数的示例。您只需要一个列名数组：

```
col_names = ['Date', 'Receipt_type', 'Type', 'Name', 'Item', 'Num', 'Amount', 'Source', 'Destination', 'Statement_s']
query = 'INSERT INTO sa_general_journal ('
col_names.each do |col_name|
    query << '`' << col_name << '`,'
end
query.chop!
query << ') VALUES '
(values.size / col_names.size).times {|ignore|
    query << '('
    (col_names.size).times {|ignore|
        query << '?,'
    }
    query.chop!
    query << '),'
}
query.chop!
client.prepare(query).execute(*values) 
```

请记住，准备好的语句存在服务器端限制。`max_prepared_stmt_count`限制可以排队的准备好的语句的数量，以减少拒绝服务攻击。如果设置为零，则不能执行任何准备好的语句。此外，如果您正在加载 BLOBS，请记住准备好的语句数据必须在`max_allowed_packet`（我的服务器上为 16MB）范围内。我正在使用准备好的语句将 PDF 文件加载到 BLOB 中，这让我吃了好几次。

我来这里是为了寻找答案，但不得不自己想出一个。我知道这是一个老问题。（人们因为回答老问题而跳槽我！）但我希望这对像我一样通过搜索到达这里的人有用！

# java - 使用 Tomcat 获取 MSSQL JDBC 以在重新启动或网络问题后自动重新连接

> ID：14468320
> 
> 赞同：0
> 
> 时间：2013-01-22T21:26:42.510
> 
> 标签：java, sql-server, tomcat

当我们遇到 MSSQL 数据库故障转移、重启或网络问题时，似乎我们必须重启 Tomcat5 才能让它重新连接到数据库。我们在 Java 1.5 中使用标准的 sqljdbc.jar。谁能告诉我如何让它在出现故障或中断时自动重新连接，这样我们就不必在每次发生这种情况时手动重新启动我们的应用程序？

这是我们的 server.xml 的样子：

```
 <Resource name="jdbc/someDB" auth="Container" type="javax.sql.DataSource"/>
         <ResourceParams name="jdbc/someDB">
            <parameter>
                     <name>username</name>
                     <value>someuser</value>
            </parameter>
            <parameter>
                     <name>password</name>
                     <value>somepass</value>
            </parameter>
            <parameter>
                    <name>url</name>
                    <value>jdbc:sqlserver://somedb;DatabaseName=Dbname</value>
            </parameter>
            <parameter>
                     <name>driverClassName</name>
                     <value>com.microsoft.sqlserver.jdbc.SQLServerDriver</value>
            </parameter>
            <parameter>
                    <name>logAbandoned</name>
                    <value>true</value>
            </parameter>
            <parameter>
                    <name>removeAbandonedTimeout</name>
                    <value>30</value>
            </parameter>
            <parameter>
                    <name>removeAbandoned</name>
                    <value>true</value>
            </parameter>
      </ResourceParams> 
```

# python - 识别在 Tkinter 中单击了哪个模型对象

> ID：14468321
> 
> 赞同：0
> 
> 时间：2013-01-22T21:26:48.247
> 
> 标签：python, tkinter

我有许多重叠的形状代表画布上不相关的背景项目。我还有一个不重叠的圆圈图案，每个圆圈都是一个“洞”。每个“洞”精灵（圆圈）都有一个关联的“洞”对象，尽管从未在代码中明确显示。（旁注：我希望在模型和视图与这些对象之间建立逻辑关联，但还没有找到一种聪明的方法来做到这一点）。每个“洞”都是不同的，有不同的效果。

有一个小的圆形“球”，可以拖入任何“洞”。[我找到了如何从这个问题](https://stackoverflow.com/questions/6740855/board-drawing-code-to-move-an-oval/6789351#6789351)拖放。我需要找出球进了哪个洞。

到目前为止，我发现最好的方法是：

*   创建一个字典，将孔精灵中心的坐标映射到孔对象

*   像这样标记每个孔：

`t=("hole", "hole_at_{}_{}".format(x, y))`

*   在释放球时，这样做：

    def on_ball_release(self, event): '''当用户释放鼠标按住球时处理按钮事件。'''

    ```
    # use small invisible rectangle and find all overlapping items
    items = self._canvas.find_overlapping(event.x - 10, event.y - 10, event.x + 10, event.y + 10)

    for item in items:
        # there should only be 1 overlapping hole
        if "hole" in self._canvas.gettags(item):

            # get the coordinates from the tag
            coords = tuple([int(i) for i in self._canvas.gettags(item)[1].replace("hole_at_", "").split("_")])

            # get associated object using dictionary established before
            hole = self._hole_dict[coords]

            hole.process_ball()
            return 
    ```

这似乎非常混乱。我觉得应该有一些更聪明的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:55:59.190

免责声明：我不使用 Python，但许多 Tkinter 问题可以从我所拥有的 Tcl/Tk 经验中得到有用的回答。在这种情况下，需要做更多的工作来弄清楚我在 Tcl 中所做的事情是否易于用 Tkinter 表示。

`hole_at_...`首先，我不会添加“标识符标签*”*（不解析标签的项目 ID。（如果我必须添加字符串标识符，即使我决定从坐标创建它们，我也会使用*该字符串*作为我的字典键，以避免重新解析它。我们以后需要坐标吗？然后将它们设为`hole`对象的属性） .

其次，我将使用`pathName find`具有*多个*标准的子命令来查找标记为`hole` *并且*最接近给定点`overlapping`的项目（画布 ID）`closest`应该使用，即使它不是太近）。这是有问题的部分：Tkinter 是否支持画布中的多个标准`$pathName find`？

# c++ - C++ Qt 程序总是在退出时中止，glibc 在 SLES 11 上检测到损坏的双链表，在 Ubuntu 上运行良好

> ID：14468323
> 
> 赞同：1
> 
> 时间：2013-01-22T21:26:49.233
> 
> 标签：c++, linux, ubuntu, qt4, suse

我有一个使用 Qt 4.8 的 C++ 程序。在 64 位 Ubuntu 11.10 上使用 gcc 4.6.1 编译时运行良好。但是当在 32 位 SUSE Enterprise Linux (SLES) 11 sp 1 和 gcc 4.3 上编译时，每次程序退出时，它都会崩溃

```
*** glibc detected *** /opt/myprogram: corrupted double-linked list: 0x0821dfb0 ***
======= Backtrace: =========
/lib/libc.so.6(+0x6d3d4)[0xb6fd93d4]
/lib/libc.so.6(+0x6d929)[0xb6fd9929]
/lib/libc.so.6(+0x6ec7f)[0xb6fdac7f]
/lib/libc.so.6(cfree+0x6d)[0xb6fddcfd]
/usr/lib/libstdc++.so.6(_ZdlPv+0x21)[0xb71bd291]
/opt/ncrue/lib/libQtCore.so.4(_ZN8QMapData16continueFreeDataEi+0x59)[0xb72bdf49]
/opt/ncrue/lib/libQtCore.so.4(+0xc09e3)[0xb72d39e3]
/opt/ncrue/lib/libQtCore.so.4(+0xb0434)[0xb72c3434]
/opt/ncrue/lib/libQtCore.so.4(+0xc17df)[0xb72d47df]
/lib/libc.so.6(+0x2dbe1)[0xb6f99be1]
/lib/libc.so.6(+0x2dc3f)[0xb6f99c3f]
/lib/libc.so.6(__libc_start_main+0xed)[0xb6f82bed]
/opt/myprogram[0x80554c1] 
```

valgrind 提供了一些关于对已释放内存块的引用的不太有用的信息，但这些都是在结束后发生的事情`main()`。

我完全不知道如何解决这个问题。有谁知道发生了什么或如何解决？

ETA：这是要求的 valgrind 输出。

```
==24079== Invalid read of size 4
==24079==    at 0x7CE03B2: __tcf_0 (qatomic_i386.h:132)
==24079==    by 0x482EBE0: __run_exit_handlers (in /lib/libc-2.11.1.so)
==24079==    by 0x482EC3E: exit (in /lib/libc-2.11.1.so)
==24079==    by 0x4817BEC: (below main) (in /lib/libc-2.11.1.so)
==24079==  Address 0x6a0aec0 is 0 bytes inside a block of size 42 free'd
==24079==    at 0x4028FE1: free (vg_replace_malloc.c:446)
==24079==    by 0x444107C: qFree(void*) (in /opt/ncrue/lib/libQtCore.so.4.8.0)
==24079==    by 0x449923F: QString::free(QString::Data*) (in /opt/ncrue/lib/libQtCore.so.4.8.0)
==24079==    by 0x5F165E5: ???
==24079==    by 0x482EF87: __cxa_finalize (in /lib/libc-2.11.1.so)
==24079==    by 0x5E2BBA3: ???
==24079==    by 0x5F4B47F: ???
==24079==    by 0x4014356: _dl_close_worker (in /lib/ld-2.11.1.so)
==24079==    by 0x4014CE6: _dl_close (in /lib/ld-2.11.1.so)
==24079==    by 0x549ECF3: dlclose_doit (in /lib/libdl-2.11.1.so)
==24079==    by 0x400F125: _dl_catch_error (in /lib/ld-2.11.1.so)
==24079==    by 0x549F11B: _dlerror_run (in /lib/libdl-2.11.1.so)
==24079== 
==24079== Invalid read of size 4
==24079==    at 0x68693E2: __tcf_0 (qatomic_i386.h:132)
==24079==    by 0x482EBE0: __run_exit_handlers (in /lib/libc-2.11.1.so)
==24079==    by 0x482EC3E: exit (in /lib/libc-2.11.1.so)
==24079==    by 0x4817BEC: (below main) (in /lib/libc-2.11.1.so)
==24079==  Address 0x6a0aec0 is 0 bytes inside a block of size 42 free'd
==24079==    at 0x4028FE1: free (vg_replace_malloc.c:446)
==24079==    by 0x444107C: qFree(void*) (in /opt/ncrue/lib/libQtCore.so.4.8.0)
==24079==    by 0x449923F: QString::free(QString::Data*) (in /opt/ncrue/lib/libQtCore.so.4.8.0)
==24079==    by 0x5F165E5: ???
==24079==    by 0x482EF87: __cxa_finalize (in /lib/libc-2.11.1.so)
==24079==    by 0x5E2BBA3: ???
==24079==    by 0x5F4B47F: ???
==24079==    by 0x4014356: _dl_close_worker (in /lib/ld-2.11.1.so)
==24079==    by 0x4014CE6: _dl_close (in /lib/ld-2.11.1.so)
==24079==    by 0x549ECF3: dlclose_doit (in /lib/libdl-2.11.1.so)
==24079==    by 0x400F125: _dl_catch_error (in /lib/ld-2.11.1.so)
==24079==    by 0x549F11B: _dlerror_run (in /lib/libdl-2.11.1.so)
==24079== 
==24079== Invalid read of size 4
==24079==    at 0x681DB72: __tcf_0 (qatomic_i386.h:132)
==24079==    by 0x482EBE0: __run_exit_handlers (in /lib/libc-2.11.1.so)
==24079==    by 0x482EC3E: exit (in /lib/libc-2.11.1.so)
==24079==    by 0x4817BEC: (below main) (in /lib/libc-2.11.1.so)
==24079==  Address 0x6a0aec0 is 0 bytes inside a block of size 42 free'd
==24079==    at 0x4028FE1: free (vg_replace_malloc.c:446)
==24079==    by 0x444107C: qFree(void*) (in /opt/ncrue/lib/libQtCore.so.4.8.0)
==24079==    by 0x449923F: QString::free(QString::Data*) (in /opt/ncrue/lib/libQtCore.so.4.8.0)
==24079==    by 0x5F165E5: ???
==24079==    by 0x482EF87: __cxa_finalize (in /lib/libc-2.11.1.so)
==24079==    by 0x5E2BBA3: ???
==24079==    by 0x5F4B47F: ???
==24079==    by 0x4014356: _dl_close_worker (in /lib/ld-2.11.1.so)
==24079==    by 0x4014CE6: _dl_close (in /lib/ld-2.11.1.so)
==24079==    by 0x549ECF3: dlclose_doit (in /lib/libdl-2.11.1.so)
==24079==    by 0x400F125: _dl_catch_error (in /lib/ld-2.11.1.so)
==24079==    by 0x549F11B: _dlerror_run (in /lib/libdl-2.11.1.so)
==24079== 
==24079== Invalid read of size 4
==24079==    at 0x8055F82: __tcf_0 (qatomic_i386.h:132)
==24079==    by 0x482EBE0: __run_exit_handlers (in /lib/libc-2.11.1.so)
==24079==    by 0x482EC3E: exit (in /lib/libc-2.11.1.so)
==24079==    by 0x4817BEC: (below main) (in /lib/libc-2.11.1.so)
==24079==  Address 0x6a0aec0 is 0 bytes inside a block of size 42 free'd
==24079==    at 0x4028FE1: free (vg_replace_malloc.c:446)
==24079==    by 0x444107C: qFree(void*) (in /opt/ncrue/lib/libQtCore.so.4.8.0)
==24079==    by 0x449923F: QString::free(QString::Data*) (in /opt/ncrue/lib/libQtCore.so.4.8.0)
==24079==    by 0x5F165E5: ???
==24079==    by 0x482EF87: __cxa_finalize (in /lib/libc-2.11.1.so)
==24079==    by 0x5E2BBA3: ???
==24079==    by 0x5F4B47F: ???
==24079==    by 0x4014356: _dl_close_worker (in /lib/ld-2.11.1.so)
==24079==    by 0x4014CE6: _dl_close (in /lib/ld-2.11.1.so)
==24079==    by 0x549ECF3: dlclose_doit (in /lib/libdl-2.11.1.so)
==24079==    by 0x400F125: _dl_catch_error (in /lib/ld-2.11.1.so)
==24079==    by 0x549F11B: _dlerror_run (in /lib/libdl-2.11.1.so)
==24079== 
==24079== Invalid read of size 4
==24079==    at 0x4188F32: __tcf_0 (qatomic_i386.h:132)
==24079==    by 0x482EF87: __cxa_finalize (in /lib/libc-2.11.1.so)
==24079==    by 0x40787C3: ??? (in /opt/ncrue/lib/libDataFileAccess.so.1.2.0)
==24079==    by 0x419802F: ??? (in /opt/ncrue/lib/libDataFileAccess.so.1.2.0)
==24079==    by 0x400FB3A: _dl_fini (in /lib/ld-2.11.1.so)
==24079==    by 0x482EBE0: __run_exit_handlers (in /lib/libc-2.11.1.so)
==24079==    by 0x482EC3E: exit (in /lib/libc-2.11.1.so)
==24079==    by 0x4817BEC: (below main) (in /lib/libc-2.11.1.so)
==24079==  Address 0x6a0aec0 is 0 bytes inside a block of size 42 free'd
==24079==    at 0x4028FE1: free (vg_replace_malloc.c:446)
==24079==    by 0x444107C: qFree(void*) (in /opt/ncrue/lib/libQtCore.so.4.8.0)
==24079==    by 0x449923F: QString::free(QString::Data*) (in /opt/ncrue/lib/libQtCore.so.4.8.0)
==24079==    by 0x5F165E5: ???
==24079==    by 0x482EF87: __cxa_finalize (in /lib/libc-2.11.1.so)
==24079==    by 0x5E2BBA3: ???
==24079==    by 0x5F4B47F: ???
==24079==    by 0x4014356: _dl_close_worker (in /lib/ld-2.11.1.so)
==24079==    by 0x4014CE6: _dl_close (in /lib/ld-2.11.1.so)
==24079==    by 0x549ECF3: dlclose_doit (in /lib/libdl-2.11.1.so)
==24079==    by 0x400F125: _dl_catch_error (in /lib/ld-2.11.1.so)
==24079==    by 0x549F11B: _dlerror_run (in /lib/libdl-2.11.1.so) 
```

# android - 让 Android 输入显示 NumberPad 与 QWERTY

> ID：14468324
> 
> 赞同：-3
> 
> 时间：2013-01-22T21:26:52.123
> 
> 标签：android

在 Android 中，如何使显示用于用户输入的键盘显示数字键盘“123456789.+-”，而不是默认的 QWERTY 键盘？我需要它来显示这个以方便数据输入。

* * *

```
 <EditText
                    android:id="@+id/etCYLl"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="5dp"
                    android:layout_weight="1"
                    android:background="@drawable/myedittext"

                    android:ems="10"
                    android:inputType="numberDecimal|numberSigned"
                    android:digits="0123456789.+-"
                    android:nextFocusForward="@+id/etAXEl"
                    android:paddingLeft="5dp"
                    android:paddingRight="5dp"
                    android:singleLine="true" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:45:19.730

您需要编写一个用于应用程序的键盘。您可以更改键盘中使用的自定义键，请查看此处：[http ://www.droid-life.com/2010/04/22/create-your-own-custom-htc_ime-keyboard/](http://www.droid-life.com/2010/04/22/create-your-own-custom-htc_ime-keyboard/)

# jdbc - 测试 Quartz JDBC 作业存储

> ID：14468327
> 
> 赞同：0
> 
> 时间：2013-01-22T21:27:31.057
> 
> 标签：jdbc, quartz-scheduler, job-scheduling

我正在使用 Quartz JDBC Job store (org.quartz.impl.jdbcjobstore.JobStoreTX) 和 MySQL 来调度作业。

我有以下设置：

```
org.quartz.jobStore.class=org.quartz.impl.jdbcjobstore.JobStoreTX
org.quartz.jobStore.driverDelegateClass=org.quartz.impl.jdbcjobstore.StdJDBCDelegate
org.quartz.jobStore.dataSource=foo
org.quartz.dataSource.foo.driver=com.mysql.jdbc.Driver
org.quartz.dataSource.foo.URL=jdbc:mysql://localhost:3306/myDB
org.quartz.dataSource.foo.user=user
org.quartz.dataSource.foo.password=*****
org.quartz.dataSource.foo.maxConnections=5
org.quartz.dataSource.foo.validateOnCheckout=true
org.quartz.dataSource.foo.validationQuery=SELECT 1 
```

我可以安排工作，Quartz 在时间到期时从数据库中提取工作。

有些工作最多可以安排在未来 3 或 4 周内。我该如何测试这个？

现在我去手动更改系统时间。例如，如果我安排一个作业在 2013 年 2 月 5 日下午 12:45 运行，那么我将系统时钟时间更改为 2013 年 2 月 5 日下午 12:43，然后等待几分钟看看是否Quartz 接手了 DB 的工作。这对我来说很好。

我不想每次需要测试时都更改系统时钟时间。有一个更好的方法吗？

我注意到经常更改系统时间有时会使 Quartz 搞砸一些工作没有得到处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:26:47.927

您可以使用[Quartz TriggerUtils](http://quartz-scheduler.org/api/2.1.0/org/quartz/TriggerUtils.html)方法来确定未来的执行是否符合预期。

更具体地说，该`computeFireTimes(org.quartz.spi.OperableTrigger trigg, Calendar cal, int numTimes)`方法返回一个日期列表，这些日期是触发器的下一次触发时间。

我希望这有帮助。

# apache - 从 Internet 访问基于名称的虚拟主机

> ID：14468328
> 
> 赞同：0
> 
> 时间：2013-01-22T21:27:35.720
> 
> 标签：apache, virtual-hosts

我目前正在开始学习 Apache。所以我真的是这里的初学者。我已经能够建立一个可以在我自己的网络中访问的基本站点和虚拟主机。

如果我的问题听起来很愚蠢，请原谅我，但是否可以仅使用我的外部 IP 通过基于名称的虚拟主机访问我的虚拟主机？或者我是否必须为我的虚拟主机提供一个实际注册的域名，该域名将由 DNS 映射到我的外部 IP？

我可能已经在这里回答了我自己的问题。但我不知道。我在这里完全是菜鸟。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:33:29.373

您可以使用单个 IP 提供多个域名，尽管 IMO 始终为您要使用的每个域/子域拥有单独的 IP 始终是最佳实践，因为随着时间的推移，您可能需要在不同的服务器之间移动域。在这些情况下，您可以（如果您的主机设置允许）将 IP 地址与您正在迁移的站点一起移动，而无需更新 DNS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:57:41.240

虽然它不是一个好的永久解决方案，[但 PageKite](http://pagekite.net/)是一项可以帮助您的简洁服务

# javascript - chrome.tabs.query 返回未定义的 .url

> ID：14468344
> 
> 赞同：2
> 
> 时间：2013-01-22T21:28:58.277
> 
> 标签：javascript, google-chrome-extension, tabs

更新的问题：我可以 console.log 任意数量的选项卡，但没有选项卡具有 url 属性。

![啊啊啊](../Images/8593f505fa0199e1e0dda7cc55c4ecbd.png)

解决的原始问题：我似乎无法让这段非常简单的代码在 background.js 中工作。我想访问这些选项卡，但它们总是像`object Object`每个选项卡一样返回。

```
chrome.tabs.query({}, function(tab){
        alert(tab);
  }); 
```

![对象！](../Images/478ca391ead53894791b6459a5dd9b66.png)

我的清单文件中确实有标签，但即使没有它也没有什么区别。就我个人而言，我认为它不认为它具有选项卡的权限，但确实如此，并且我的其他权限（例如通知和 URL）工作正常。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-01T21:47:24.200

在 manifest.json 中添加 tabs 权限后，您需要删除并重新添加扩展，以便它考虑新权限。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T21:31:12.990

`chrome.tabs.query` actually returns an array of [Tab objects](http://developer.chrome.com/extensions/tabs.html) (which is why you are seeing `[object, Object]`. Try doing something like:

```
alert(tab[0].url); 
```

And see if it displays something that you are expecting.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T09:49:46.273

您必须在 manifest.json 中的权限数组中添加“选项卡”，否则您将无法看到选项卡的 url。

# css - 内联 UL 尺寸/定位存在问题

> ID：14468346
> 
> 赞同：0
> 
> 时间：2013-01-22T21:29:36.513
> 
> 标签：css, uinavigationbar, background-image

好的，所以使用 wordpress 为我朋友的一个教堂开发一个网站，但我遇到了障碍。我通常不喜欢导航栏，但我决定尝试一下......所以这就是我正在做的事情：

导航栏背景是一个 1x64 像素的重复-x。nav bar 实际上是一个 UL 内联显示。我想让每个`<li>`标签的背景都是一个静态的设置图像，它们彼此相邻，以获得动态的震撼。问题：我无法将背景图像强制为 100%。它仅与文本一样宽。图像尺寸（用 Photoshop 制作）为 167x64 像素。我无法将`<nav>`标签内的链接水平居中，也无法获得应有`<li>`的完整大小的背景。我已经尝试手动将每个级别中所有内容的高度设置为 64px 以及`verticle-align:middle;`用于我想要的定位，这真的让我的头很乱@.@

网站位于[http://parnell.co/hurricane-church-of-god](http://parnell.co/hurricane-church-of-god)

页面来源：

```
<div class="nav-wrapper">

            <!-- Nav -->

                <nav>
                    <ul id="menu-nav-bar" class="menu">
<li id="menu-item-18" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-6 current_page_item menu-item-18"><a href="http://parnell.co/hurricane-church-of-god/">Home</a></li>
<li id="menu-item-19" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-19"><a href="http://parnell.co/hurricane-church-of-god/sample-page">Sample Page</a></li>
<li id="menu-item-17" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17"><a href="http://parnell.co/hurricane-church-of-god/blog">Blog</a></li>
</ul>                </nav>

            <!-- /Nav -->

            <br class="clear">

        </div>
        <!-- /nav-wrapper --> 
```

CSS 来源：

```
/******************************************************
     *                    Navigation                      *
     ******************************************************/

    div.nav-wrapper {
        margin-top:-16px;
        -moz-border-radius: 15px;
        border-radius: 15px;
        background:url(img/nav-bg.png) repeat-x;
        height:64px;
        vertical-align:middle;
    }

    div.nav-wrappter ul,
    nav ul li {
        float:left;
        height:64px;
        vertical-align:middle;
    }

    nav ul#menu-nav-bar li {
        display: inline;
        list-style-type: none;
        vertical-align:middle;
        background-image:url(img/nav-button.png);
        background-size:100%;
        background-repeat:no-repeat;
        height:64px;
    }

    nav ul#menu-nav-bar li a {
        text-decoration:none;
        height:64px;
        vertical-align:middle;
    } 
```

请忍受我在代码上的草率，我整天都在努力解决它，并且或多或少地从头开始在那个部分上像 8 次。您可以提供的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:05:46.557

好的，感谢@ahillman3，我能够理清思路并弄清楚。很好的链接顺便说一句。以及错字......这是最大的问题，因为在修复之前没有任何东西可以正常工作。指定`<li>`标签的宽度会强制按钮正确运行。至于居中文本，css 属性`display:block;`在应用于时`nav ul#menu-nav-bar li a {}`是使`<a>`标签（线条对象）表现得像一个`div`或表格（一个块对象）的关键。之后，只需添加一些边距即可使文本居中在框中。

多谢你们！

# wordpress - Wordpress：如何在 WP_query 中结合关键字搜索和元过滤器

> ID：14468348
> 
> 赞同：0
> 
> 时间：2013-01-22T21:29:43.287
> 
> 标签：wordpress

我正在尝试在 WP_query 中组合按关键字和 meta_key 和 meta_value 过滤器进行搜索。关键字搜索和元过滤器独立运作良好，但一起则不行。如何完成？谢谢！

这是我的代码：

```
if ( isset($_REQUEST['search']) AND $_REQUEST['search'] )
{
    $query_param = array( 's' => urldecode($_REQUEST['search']), 'post_type' => GOODS_POST_TYPE );
    $query_param['meta_key'] = 'sku';
    $query_param['meta_value'] = urldecode($_REQUEST['search']);
}
$query = new WP_Query($query_param); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:10:19.013

在运行搜索之前修改您的查询，并使用 Wordpress 的内置函数来做您需要的事情，而不是依赖未过滤的数据：

```
<?php
add_action('pre_get_posts', 'modify_goods_search');
function modify_goods_search($query)
{
    if($query->is_search)
    {
        $query->set('meta_key', 'sku');
        $query->set('meta_value', get_search_query());
        $query->set('post_type', GOODS_POST_TYPE);
    }
}
?> 
```

请记住，这将修改所有搜索。如果您只想修改一个特定的搜索，您可以修改条件以确保您在修改给定查询之前位于特定页面上。

您可能还想考虑使用 meta_query 而不仅仅是 meta_key 和 meta_value。

一切信息：

[在元查询中预获取帖子](http://codex.wordpress.org/Plugin_API/Action_Reference/pre_get_posts)
[自定义字段参数](http://codex.wordpress.org/Class_Reference/WP_Query#Custom_Field_Parameters)
[获取搜索查询](http://codex.wordpress.org/Function_Reference/get_search_query)

# xml - 创建 XSL 样式表以管理 FileMaker Pro XML 输出

> ID：14468350
> 
> 赞同：2
> 
> 时间：2013-01-22T21:29:46.157
> 
> 标签：xml, xslt, filemaker, adobe-indesign

我使用 XML 将数据提供给 InDesign 模板，并且正在从更旧、更简单的设置（Excel 电子表格中的映射单元格）切换到 FileMaker Pro。FileMaker Pro 以与 InDesign 文档中已建立的 XML 结构略有不同的格式导出 XML。

从 FileMaker Pro 导出 XML 时，我可以选择使用 XSL 样式表，但我不知道如何创建一个（我发现的教程似乎含糊不清，或者假设我已经知道我不知道的东西）。

FileMaker Pro 导出如下所示：

```
<?xml version="1.0" encoding="UTF-8" ?><!-- This grammar has been deprecated - use FMPXMLRESULT instead --><FMPDSORESULT xmlns="http://www.filemaker.com/fmpdsoresult"><ERRORCODE>0</ERRORCODE>
<DATABASE>Projects.fmp12</DATABASE>
<LAYOUT></LAYOUT>
<ROW MODID="1" RECORDID="2">
<Project_name></Project_name>
<City_1></City_1>
<Size></Size>
<Building></Building>
<City_2></City_2>
<Completion></Completion>
<Scope_of_work></Scope_of_work>
<Description></Description>
</ROW> 
```

我需要为每条记录编写一个样式表，以便导出的 XML 与此结构匹配：

```
<project>
    <project_title>
        <name></name>
        <city_1></city_1>
    </project_title>
    <project_information>
        <size></size>
        <building></building>
        <city_2></city_2>
        <completion></completion>
        <scope_of_work></scope_of_work>
    </project_information>
    <description></description>
</project> 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T02:58:06.693

您没有指定结果 XML 的外部节点是什么样子，或者它是否使用命名空间，但这是怎么回事：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:fm="http://www.filemaker.com/fmpdsoresult" exclude-result-prefixes="fm">
  <xsl:output method="xml" indent="yes"/>

  <xsl:variable name="rename">
    <item from="Project_name" to="name" />
    <item from="City_1" to="city_1" />
    <item from="Size" to="size" />
    <item from="Building" to="building" />
    <item from="City_2" to="city_2" />
    <item from="Completion" to="completion" />
    <item from="Scope_of_work" to="scope_of_work" />
    <item from="Description" to="description" />
  </xsl:variable>

  <xsl:template match="/*">
    <root>
      <xsl:apply-templates select="fm:ROW"/>
    </root>
  </xsl:template>

  <xsl:template match="fm:ROW">
    <project>
      <project_title>
        <xsl:apply-templates select="fm:Project_name | fm:City_1" mode="rename" />
      </project_title>
      <project_information>
        <xsl:apply-templates 
         select="fm:size | fm:Building | fm:City_2 | fm:Completion | fm:Scope_of_work"
         mode="rename" />
      </project_information>
      <xsl:apply-templates select="fm:Description" mode="rename" />
    </project>
  </xsl:template>

  <xsl:template match="*" mode="rename">
    <xsl:element name="{document('')//xsl:variable[@name = 'rename']/item[@from = local-name(current())]/@to}">
      <xsl:value-of select="."/>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

在此输入上运行时：

```
<FMPDSORESULT xmlns="http://www.filemaker.com/fmpdsoresult">
  <ERRORCODE>0</ERRORCODE>
  <DATABASE>Projects.fmp12</DATABASE>
  <LAYOUT></LAYOUT>
  <ROW MODID="1" RECORDID="2">
    <Project_name>The best project</Project_name>
    <City_1>New York</City_1>
    <Size>3</Size>
    <Building>Chrysler</Building>
    <City_2>Los Angeles</City_2>
    <Completion>2012-10-12</Completion>
    <Scope_of_work>Big</Scope_of_work>
    <Description>A fun project</Description>
  </ROW>
  <ROW MODID="1" RECORDID="2">
    <Project_name>A pretty good project</Project_name>
    <City_1>Chicago</City_1>
    <Size>4</Size>
    <Building>30 Fake St.</Building>
    <City_2>Charlotte</City_2>
    <Completion>2013-02-03</Completion>
    <Scope_of_work>Medium</Scope_of_work>
    <Description>A serious project</Description>
  </ROW>
</FMPDSORESULT> 
```

产生这个：

```
<root>
  <project>
    <project_title>
      <name>The best project</name>
      <city_1>New York</city_1>
    </project_title>
    <project_information>
      <building>Chrysler</building>
      <city_2>Los Angeles</city_2>
      <completion>2012-10-12</completion>
      <scope_of_work>Big</scope_of_work>
    </project_information>
    <description>A fun project</description>
  </project>
  <project>
    <project_title>
      <name>A pretty good project</name>
      <city_1>Chicago</city_1>
    </project_title>
    <project_information>
      <building>30 Fake St.</building>
      <city_2>Charlotte</city_2>
      <completion>2013-02-03</completion>
      <scope_of_work>Medium</scope_of_work>
    </project_information>
    <description>A serious project</description>
  </project>
</root> 
```

# codeigniter - Codeigniter 活动记录嵌套选择问题

> ID：14468351
> 
> 赞同：0
> 
> 时间：2013-01-22T21:29:48.310
> 
> 标签：codeigniter, activerecord, select

我正在为我的 php 项目使用 codeigniter，但没有太多经验。所以，请帮助我。

我有两个数据库。1\. Kalix2 2\. 星号

在这两个数据库中，我都有一些表。我想对来自两个不同数据库的表进行连接。我有以下查询，它在后端工作正常，但我不知道如何使用活动记录来实现它。

```
SELECT  a.CompanyName, sum(ceil((b.billsec)/(c.Call_Limit*60))) as totalcall,
           hour(b.calldate) as use_hour FROM  Kalix2.ph_Companies a 
           INNER JOIN Asterisk.cdr b ON b.clid LIKE CONCAT('%', a.CompanyName, '%') 
           INNER JOIN Kalix2.ph_Plans c ON c.Comp_ID= a.Comp_ID 
           where  date(b.calldate)>='2013-01-15' and date(b.calldate)<='2013-1-20'  
           and c.Plan_Type='Per_Call' and a.CompanyName='ABCD' 
           group by hour(b.calldate); 
```

请帮我将此查询转换为活动记录格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:26:03.483

如果需要，您应该能够将其转换为活动记录，但只需将其转换为查询绑定即可获得更好的性能。常见的错误是尝试从多个类中运行查询：

```
$this->db1
$this->db2 
```

这将不起作用，因为运行 $this->db1->get() 因为它只知道 db1 中的数据而不知道 db2 中的数据。在连接中详细保留 database.table 信息，只使用一个 db 对象，并使用分析器调试查询生成，你应该很好。

[连接到多个数据库](http://ellislab.com/codeigniter/user-guide/database/connecting.html)

[Active Record 类和连接](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

[使用 Profiler 调试查询](http://ellislab.com/codeigniter/user-guide/general/profiling.html)

# python - 多个正则表达式搜索和替换

> ID：14468353
> 
> 赞同：0
> 
> 时间：2013-01-22T21:30:00.430
> 
> 标签：python, python-3.x

我正在尝试创建一个简单的脚本，它将从文件中获取正则表达式，然后在另一个文件上执行搜索和替换。这就是我所拥有的，但它不起作用，文件没有改变，我做错了什么？

```
import re, fileinput

separator = ' => '

file = open("searches.txt", "r")

for search in file:
    pattern, replacement = search.split(separator)
    pattern = 'r"""' + pattern + '"""'
    replacement = 'r"""' + replacement + '"""'
    for line in fileinput.input("test.txt", inplace=1):
        line = re.sub(pattern, replacement, line)
        print(line, end="") 
```

文件*search.txt*如下所示：

```
<p (class="test">.+?)</p> => <h1 \1</h1>
(<p class="not">).+?(</p>) => \1This was changed by the script\2 
```

和*test.txt*像这样：

```
<p class="test">This is an element with the test class</p>
<p class="not">This is an element without the test class</p>
<p class="test">This is another element with the test class</p> 
```

我做了一个测试，看看它是否正确地从文件中获取表达式：

```
>>> separator = ' => '
>>> file = open("searches.txt", "r")
>>> for search in file:
...     pattern, replacement = search.split(separator)
...     pattern = 'r"""' + pattern + '"""'
...     replacement = 'r"""' + replacement + '"""'
...     print(pattern)
...     print(replacement)
... 
r"""<p (class="test">.+?)</p>"""
r"""<h1 \1</h1>
"""
r"""(<p class="not">).+?(</p>)"""
r"""\1This was changed by the script\2""" 
```

*由于某种原因，第一次替换*的结束三引号在换行符上，这可能是我的问题的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T21:49:12.450

你不需要

```
pattern = 'r"""' + pattern + '"""' 
```

在对 re.sub 的调用中，`pattern`应该是实际的正则表达式。所以`<p (class="test">.+?)</p>`。当您将所有这些双引号括起来时，它会使模式永远不会与文件中的文本匹配。

即使您似乎看过这样的代码：

```
replaced = re.sub(r"""\w+""", '-') 
```

在这种情况下，`r"""`向 python 解释器表明您正在谈论“原始”多行字符串，或者不应替换反斜杠序列的字符串（例如 \n 替换为换行符）。程序员经常在 python 中使用“原始”字符串来引用正则表达式，因为他们想使用正则表达式序列（`\w`如上）而不必引用反斜杠。如果没有原始字符串，则正则表达式必须是`'\\w+'`，这会让人感到困惑。

但是无论如何，您根本不需要三重双引号。最后一个代码短语可以简单地写成：

```
replaced = re.sub(r'\w+', '-') 
```

最后，您的另一个问题是您的输入文件中有换行符，将每个模式 => 替换的情况分开。所以实际上它是“模式=>替换\ n”，尾随换行符跟随您的替换变量。尝试做：

```
for search in file:
    search = search.rstrip() #Remove the trailing \n from the input
    pattern, replacement = search.split(separator) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T21:44:42.577

两个观察：

1）`.strip()`像这样读取文件时使用：

```
pattern, replacement = search.strip().split(separator) 
```

这将从`\n`文件中删除

2)如果您打算从模式中转义正则表达式元字符，请使用[re.escape()而不是您正在使用的 r"""+ str +""" 形式](http://docs.python.org/2/library/re.html#re.escape)

# facebook - 如何在 Facebook 的“静态 Html：iFrame 选项卡”中显示 Wordpress 网站，以适应页面的内容高度？

> ID：14468366
> 
> 赞同：0
> 
> 时间：2013-01-22T21:30:56.867
> 
> 标签：facebook, wordpress, iframe, facebook-apps, static-html

我尝试了各种解决方案来让 iframe 根据网站的内容高度进行调整，这样我就可以取消垂直滚动条，但无法获得令人满意的解决方案。

许多解决方案要求在“服务器端”添加一段代码。如果这意味着我必须在我的 Wordpress 文件中编辑代码行，我会在哪里执行此操作？

[这是相关 iframe 的链接。](https://www.facebook.com/du.designsoc/app_190322544333196)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:57:26.287

与其尝试调整 Facebook 页面以适应您的 WordPress 安装，不如更改您的 WordPress 主题以处理在 Facebook iframe 中显示的问题。

在 iframe 中显示时，您的画布应该有一个固定宽度的主题，并且没有侧边栏。只是一个内容窗格。然后，当访问者到达 Facebook 框架之外时，您将拥有您的常规主题。

[虚拟主题](http://wordpress.org/extend/plugins/virtual-theme/)插件看起来可以帮助解决这个问题。我从来没有亲自使用过它。

# android - Intent is null after taking picture with camera in android 2.3(android.intent.action.MEDIA_UNMOUNTED)

> ID：14468371
> 
> 赞同：1
> 
> 时间：2013-01-22T21:31:04.863
> 
> 标签：android, android-intent, android-activity

I try to get picture from android camera using this code but I will get error would you please helping me in this implementation,Thanks in advance

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    //try{
  super.onActivityResult(requestCode, resultCode, data);
  if (requestCode == SELECT_IMAGE)
    if (resultCode == Activity.RESULT_OK && null != data) {

        Uri selectedImage = data.getData();

        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor cursor = getContentResolver().query(selectedImage,
                filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        Log.d("filecolumn : ",filePathColumn.toString());
        String picturePath = cursor.getString(columnIndex);
        cursor.close();

        Intent i = new Intent(getApplicationContext(), CustomizeActivity.class);
         i.setDataAndType(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
  mCurrentPhotoPath);
        i.putExtra("type", "album");
        i.putExtra("photo", picturePath);

        Log.d("getPath : ",picturePath);
        startActivity(i);
        overridePendingTransition( R.anim.slide_in_left, R.anim.slide_out_left );
        Log.d("photo : ",selectedImage.getPath());
      // TODO Do something with the select image URI
    }

  if(requestCode == CAMERA_PIC_REQUEST)
  {
      Log.v("camera", "cam");
      if (resultCode == Activity.RESULT_OK) {
          Log.v("camera", "result ok");  
          Intent i = new Intent(getApplicationContext(), CustomizeActivity.class);
          i.setDataAndType(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, 
mCurrentPhotoPath);
          i.putExtra("type", "photo");
          i.putExtra("photo", mCurrentPhotoPath);
          startActivity(i);
          overridePendingTransition( R.anim.slide_in_left, R.anim.slide_out_left );
      }
  }
} 
```

error log:

```
01-22 15:53:55.375: D/szipinf(810): Initializing inflate state
01-22 15:53:55.386: V/photo path(810): photoPath : null
01-22 15:53:55.386: W/System.err(810): java.lang.NullPointerException: file == null
01-22 15:53:55.386: W/System.err(810):  at java.io.FileInputStream.<init>(FileInputStream.java:76)
01-22 15:53:55.386: W/System.err(810):  at java.io.FileInputStream.<init>(FileInputStream.java:132)
01-22 15:53:55.386: W/System.err(810):  at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:362)
01-22 15:53:55.386: W/System.err(810):  at com.odacia.appcarnaval.CustomizeActivity.onCreate(CustomizeActivity.java:181)
01-22 15:53:55.386: W/System.err(810):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-22 15:53:55.386: W/System.err(810):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
android.intent.action.MEDIA_UNMOUNTED 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:06:53.583

试试这个相机代码，它对我有用，从 2.2 到 4.0.1。

```
 private static final int PICK_Camera_IMAGE = 2;
camera.setOnClickListener(new OnClickListener() {

        //
        public void onClick(View v) {

            String name = dateToString(new Date(), "yyyy-MM-dd-hh-mm-ss");
            destination = new File(Environment
                    .getExternalStorageDirectory(), name + ".jpg");

            Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            intent.putExtra(MediaStore.EXTRA_OUTPUT,
                    Uri.fromFile(destination));
            startActivityForResult(intent, PICK_Camera_IMAGE);

        }
    });

protected void onActivityResult(int requestCode, int resultCode,
        Intent imageReturnedIntent) {
    super.onActivityResult(requestCode, resultCode, imageReturnedIntent);
    Uri selectedImageUri = null;
    String filePath = null;
    switch (requestCode) {
         case PICK_Camera_IMAGE:
        if (resultCode == RESULT_OK) {

            Toast.makeText(Setting.this, "staRtttt", Toast.LENGTH_LONG)
                    .show();

            try {
                in = new FileInputStream(destination);
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            BitmapFactory.Options options = new BitmapFactory.Options();
            options.inSampleSize = 10;
            imagePath = destination.getAbsolutePath();
            mimagepath.setText(imagePath);
        //  Toast.makeText(Setting.this, "" + imagePath + "",Toast.LENGTH_LONG).show();
            Bitmap bmp = BitmapFactory.decodeStream(in, null, options);
            ByteArrayOutputStream bos = new ByteArrayOutputStream();

            // CompressFormat set up to JPG, you can change to PNG or
            // whatever you
            // want;

            bmp.compress(CompressFormat.JPEG, 100, bos);
            bmp.compress(CompressFormat.JPEG, 100, bos);
            // **********************
            // globaly..................................
            data = bos.toByteArray();

        } else if (resultCode == RESULT_CANCELED) {
            Toast.makeText(this, "Picture was not taken",
                    Toast.LENGTH_SHORT).show();
        }
        break;
 }
} 
```

# yii - YiiBooster 主题不起作用

> ID：14468373
> 
> 赞同：2
> 
> 时间：2013-01-22T21:31:08.833
> 
> 标签：yii, yii-extensions

我是 yii 的新手，我正在尝试安装助推器，如主页中所述，但没有成功。

扩展有效，我使用“bootstrap.gii”生成了 CRUD，但我使用了经典的蓝图主题。有我的视图输出：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="language" content="en" />

    <!-- blueprint CSS framework -->
    <link rel="stylesheet" type="text/css" href="/thouraya_booster/css/screen.css" media="screen, projection" />
    <link rel="stylesheet" type="text/css" href="/thouraya_booster/css/print.css" media="print" />
    <!--[if lt IE 8]>
    <link rel="stylesheet" type="text/css" href="/thouraya_booster/css/ie.css" media="screen, projection" />
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/thouraya_booster/css/main.css" />
    <link rel="stylesheet" type="text/css" href="/thouraya_booster/css/form.css" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" type="text/css" href="/thouraya_booster/assets/b50f179f/css/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="/thouraya_booster/assets/b50f179f/css/bootstrap-responsive.css" />
<link rel="stylesheet" type="text/css" href="/thouraya_booster/assets/b50f179f/css/bootstrap-yii.css" />
<link rel="stylesheet" type="text/css" href="/thouraya_booster/assets/b50f179f/css/jquery-ui-bootstrap.css" />
<script type="text/javascript" src="/thouraya_booster/assets/f74bdb93/jquery.js"></script>
<script type="text/javascript" src="/thouraya_booster/assets/b50f179f/js/bootstrap.bootbox.min.js"></script>
<script type="text/javascript" src="/thouraya_booster/assets/b50f179f/js/bootstrap.js"></script>
<title>My Web Application</title>
</head> 
```

我尝试手动添加 bootsrtap 主题，因为它曾经与 chris 的引导扩展一起使用，但我收到此错误消息**Bootstrap 及其行为没有名为“register”的方法或闭包。**

我试图手动修改 layouts/main.php 交换加载 css 的蓝图，`<?php echo Yii::app()->bootstrap->registerCoreCss(); ?>`但它不起作用

我什至尝试了一个`chmod777`for if 访问被拒绝某些 css 文件，然后扩展名将其替换为 yii 的默认文件。

这是我的配置文件的样子：

...

```
// preloading 'log' component
    'preload'=>array(
            'log',
            'bootstrap',
            ),

    // autoloading model and component classes
    'import'=>array(
        'application.models.*',
        'application.components.*',
    ),

    'modules'=>array(

        'gii'=>array(
            'class'=>'system.gii.GiiModule',
            'password'=>'root',
            // If removed, Gii defaults to localhost only. Edit carefully to taste.
            'ipFilters'=>array('127.0.0.1','::1'),
                        'generatorPaths' => array(
                            'bootstrap.gii'
                         ),
        ),
    ),

    // application components
    'components'=>array(

                'bootstrap' => array(
                        'class' => 'ext.bootstrap.components.Bootstrap',
                        'responsiveCss' => true,
                ),
... 
```

我不知道我是否在某处遗漏了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T14:12:45.487

我有完全相同的问题，这是我解决它的方法：

1.  我创建了一个新的干净的 webapp（使用 yiic webapp）并像你一样安装了 YiiBooster
2.  获取 YiiBoilerplate 并将其解压缩到某个地方
3.  转到 {unzipped}backend/views/layouts/ 并获取 main.php、column1.php 和 column2.php
4.  在 /themes 文件夹下的 webapp 中创建一个新主题（我称之为“助推器”）
5.  将 (3) 中的三个文件复制到主题/助推器/视图/布局中
6.  在你的 main.php 添加 'theme' => 'booster' 作为数组的顶级条目（我把它放在第一位）

PS爱你的头像...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T22:42:17.467

在文件views/layouts/main.php 中删除HEAD`Yii::app()->bootstrap->register();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-10T21:54:30.297

我得到了更简单的分步方法：

*   将 yiibooster 解压到扩展文件夹并将文件夹重命名为“yiibooster”
*   在 /protected/config/main.php 中添加以下代码

> Yii::setPathOfAlias('booster', `dirname(__FILE__)`. DIRECTORY_SEPARATOR . '../extensions/yiibooster');

*   仍然在 /protected/config/main.php 组件中添加：

> 'bootstrap' => 数组（'class' => 'booster.components.Bootstrap', ),

*   在我想使用 YiiBooster 小部件的任何控制器中，只需输入以下代码：

> 公共函数过滤器（）{返回数组（数组（'booster.filters.BootstrapFilter - 删除'））；}

*   就是这样！现在尝试在您的视图中放置一些按钮，例如：

> $this->widget('booster.widgets.TbButton', array('label' => 'Primary', 'context' => 'primary', ));

相信我，这确实有效。我已经将它应用到我的项目中。

来源：

[http://www.yiiframework.com/forum/index.php/topic/52918-yiibooster-installation-steps/](http://www.yiiframework.com/forum/index.php/topic/52918-yiibooster-installation-steps/)

# javascript - Replacing part of a text using jQuery's .replaceWith function

> ID：14468381
> 
> 赞同：0
> 
> 时间：2013-01-22T21:32:06.570
> 
> 标签：javascript, jquery

I am working on a new masterpage withing sharepoint 2010\. One of the placeholders produces the sitename - the page name in a string. When the page is ready the sources shows this for exampe.

```
<h1 class="ribbonmc">
    Devness Squared - Mark Jensen
</h1> 
```

Devenss Squared is the site name and Mark Jensen is the page name. I am trying to remove the **sitename** from being displayed and show the page name only using jQuery. This is what I have so far.

```
$(document).ready(function() {
        $('#ribbonmc').text(function(i, oldText) {
            return oldText === 'Devness Squared - ' ? '' : oldText;
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:35:59.123

正则表达式解决方案：

```
$(".ribbonmc").text(function(i, oldText) {
    return oldText.replace(/^Devness Squared - /, "");
}); 
```

非正则表达式解决方案：

```
$(".ribbonmc").text(function(i, oldText) {
    var r = "Devness Squared - ";
    return oldText.indexOf(r) === 0 ? oldText.substring(r.length) : oldText;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:38:58.243

```
$(document).ready(function() {
    var sitename = 'Devness Squared - ';
    $(".ribbonmc").text(function(i, oldText) {
        return oldText.indexOf(sitename) === 0    // if it starts with `sitename`
             ? oldText.substring(sitename.length) // t: return everything after it
             : oldText;                           // f: return existing
    });
}); 
```

# javascript - Node js async module series dependencies

> ID：14468383
> 
> 赞同：1
> 
> 时间：2013-01-22T21:32:14.727
> 
> 标签：javascript, node.js, asynchronous

I want to know how to handle dependencies in using the async library in Node.js, look at the following example:

```
db.open(function(error, client) {
  client.collection(('my-collection', function(error, collection) {
    collection.insert({ "email": "test@gmail.com" }, function(error, docs) {
      // Do stuff.
    });
  });
}); 
```

Using the [async library](https://github.com/caolan/async):

```
async.parallel([
    function(callback) {
       db.open(function(error, client) {
         callback(error, client);
       });
    },
    function(callback) {
       // How do I access the "client" variable at this point?
    }
],
function(results){
   // Do stuff.
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T21:41:53.237

您正在使用异步并行，它将所有功能一起运行，并且它们可以按任何顺序完成。

您可以使用异步瀑布函数将变量从一个回调传递到下一个函数，例如。

```
 async.waterfall([
    function(callback){
        callback(null, 'one', 'two');
    },
    function(arg1, arg2, callback){
        callback(null, 'three');
    },
    function(arg1, callback){
        // arg1 now equals 'three'
        callback(null, 'done');
    }
], function (err, result) {
   // result now equals 'done'    
}); 
```

或者您可以使用自动功能，它允许您指定哪些其他功能必须首先完成，例如。

```
async.auto({
    get_data: function(callback){
        // async code to get some data
    },
    make_folder: function(callback){
        // async code to create a directory to store a file in
        // this is run at the same time as getting the data
    },
    write_file: ['get_data', 'make_folder', function(callback){
        // once there is some data and the directory exists,
        // write the data to a file in the directory
        callback(null, filename);
    }],
    email_link: ['write_file', function(callback, results){
        // once the file is written let's email a link to it...
        // results.write_file contains the filename returned by write_file.
    }]
}); 
```

所以在你的情况下你可以做的是：

```
async.auto({
    dbReady: function(callback) {
       db.open(function(error, client) {
         callback(error, client);
       });
    },
    connected: ['dbReady', function(callback, results){
       // How do I access the "client" variable at this point?
       console.log(results.dbReady);
    }
},
function(results){
   // Do stuff.
}); 
```

[看看这个以了解所有可用的功能及其用途](https://github.com/caolan/async/blob/master/README.md)

# powerbuilder - Served licenses on multiple workstations

> ID：14468387
> 
> 赞同：2
> 
> 时间：2013-01-22T21:32:27.427
> 
> 标签：powerbuilder

At my work we're running Powerbuilder 12.5 and we have quite recently changed from having Local Stand-alone licenses to Served Stand-alone licenses. The main reason for doing this is so that we could run Powerbuilder through a Citrix environment.

The issue we are experiencing from doing this is that our licensing server runs out of licenses. We have a total of 9 licenses in our team and we also have 9 users.

This issue arised after we changed to the Citrix-environment. Our guess is that since our Citrix-environment is setup on multiple servers, a user will occupy one license per server it connects to. E.g. if we have two servers, 1 and 2, for the Citrix environment and 2 users, A and B, A will occupy one license on server 1 and one on server 2\. B will do the same, so two users are occupying 4 license. This guess is based on the logs on the SySAM server which I do not currently have access to(yet).

What I think that I have understood from doing some google'ing is that this should work, because the SySAM licensing server should check in and out licenses using the username of a user.

I understand that there are no floating licenses for Powerbuilder, we just want to be able to spread our 9 licenses on our 9 users but the users will not always be working in the same workstation, so, to make a question out of all this: Is it possible to run Powerbuilder with a SySAM licensing server AND running Powerbuilder from different workstations(i.e. Citrix environment setup on multiple servers) for the same user?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:14:39.833

您正在运行一个或两个 SySAM 进程吗？

-保罗霍兰- SAP

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:22:37.357

如果您将 Citrix 排除在外，那么您所问的问题听起来完全有可能。Citrix 和 IME 总是对 PowerBuilder IDE 和 SySAM 提出挑战。

上次我听说，Sybase（现在的 SAP）免费支持 SySAM 问题。您可能需要致电技术支持，看看他们是否会帮助您解决问题。

祝你好运，

特里。

# php - file() 正在使用缓存版本

> ID：14468391
> 
> 赞同：1
> 
> 时间：2013-01-22T21:33:09.510
> 
> 标签：php, file

使用时：

```
file('http://example.com/test.txt'); 
```

更改 test.txt 后，我​​得到了大约 5 分钟左右的 chached 版本。无论如何要禁用此缓存，以便每次加载它都是来自服务器的新负载？

我正在尝试一种方法来检查我的脚本的更新.. 这是我的代码..

```
$configLines = file($url);
foreach ($configLines as $av)
{
    list ($a, $v) = explode("=", $av);
    $$a = $v;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T21:35:53.960

您可以尝试将一些虚拟参数附加到 URL。这可能会诱使服务器认为您实际上是在请求*不同*的文件 -

```
file('http://example.com/test.txt?foo='.time()); 
```

# php - Twitter API 搜索用户？

> ID：14468395
> 
> 赞同：0
> 
> 时间：2013-01-22T21:33:31.663
> 
> 标签：php, twitter

我只是想使用关键字来搜索相关用户的最新推文或用户简历。不过，我对 OAuth 部分感到困惑。似乎 OAuth 和 twitter 应用程序是为了让某人使用 twitter 登录您的网站，并允许您代表他们做 twitter 事情。

我不想让其他人登录，我只想为自己搜索推特。我是否必须设置一个应用程序，然后在每次发出搜索请求之前使用 OAuth 以我自己的身份登录？我觉得我做错了什么！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:36:35.313

如果您想搜索 Twitter，则无需应用程序。只需使用[搜索 API](https://dev.twitter.com/docs/api/1/get/search)：

[http://search.twitter.com/search.json?q=stackoverflow](http://search.twitter.com/search.json?q=stackoverflow)

# java - PHP to Java Connection

> ID：14468397
> 
> 赞同：2
> 
> 时间：2013-01-22T21:33:34.160
> 
> 标签：java, php, connection, bukkit

I am working on a project where I send supposedly press a button on a webpage and it then executes a command in java. What I'm looking for is something like [this](http://dev.bukkit.org/server-mods/websend/). Say if I pressed a button and then it sends a command to the minecraft server to reload plugins. How would I go achieving this? Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:56:20.217

当您必须在不同的应用程序之间进行通信时，您可能需要一个桥梁。在您的情况下，我建议使用 Minecraft 的[RCON](http://wiki.vg/Rcon)服务（必须在配置中启用）或执行类似操作的插件，例如 Websend。

如果你想知道插件是如何工作的，Websend 代码实际上可以在[Github上找到。](https://github.com/Waterflames/Websend)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-12T00:48:18.543

# 通过套接字连接 PHP 和 Java

## 步骤1：

## 创建一个java服务器

我为这些情况创建了一个很好的 API。如果您愿意，可以使用它们：

### 聊天服务器

你需要做的就是创建这个类的一个新实例

```
package com.weebly.foxgenesis.src;
import java.net.*;
import java.util.ArrayList;
import java.util.List;
import java.util.StringTokenizer;
import java.io.*;

public final class ChatServer implements Runnable 
{  
    private final int CLIENTMAXIMUM;
    private ChatServerThread clients[];
    private ServerSocket server = null;
    private Thread       thread = null;
    private int clientCount = 0;
    private final ServerReciever output;
    private List<ConnectHandler> connectHandlers = new ArrayList<ConnectHandler>();
    private List<QuitHandler> quitHandlers = new ArrayList<QuitHandler>();

    /**
     * creates a new ChatServer for connection between clients
     * @param a ServerReciever implementing class
     */
    public ChatServer(ServerReciever a)
    {  
        CLIENTMAXIMUM = a.getMaximunClients();
        output = a;
        clients = new ChatServerThread[CLIENTMAXIMUM];
        try
        {  
            server = new ServerSocket();
            server.bind(new InetSocketAddress(output.getHost(), output.getPort()));
            log(server);
            start(); 
        }
        catch(IOException ioe)
        {  
            error("Can not bind to port " + a.getPort() + ": " + ioe.getMessage()); 
        }
    }

    /**
     * Force the Server to handle a msg
     */
    public void add(String text)
    {
        output.handle(text);
    }

    /**
     * Force the Server to handle an error
     */
    public void error(String text)
    {
        output.handleError(text);
    }

    /**
     * Log to the server
     */
    public void log(Object text)
    {
        output.handleLog(text);
    }

    /**
     * send a message to a specific client
     * @param ID ID of client
     * @param msg
     */
    public void send(int ID, String msg)
    {
        clients[findClient(ID)].send(msg);
        add(msg);
    }

    /**
     * Called by runnable
     */
    public void run()
    { 
        while (thread != null)
        {  
            try
            {   
                if(clientCount != CLIENTMAXIMUM){
                    log("Waiting for a client ..."); 
                    addThread(server.accept()); 
                }
            }
            catch(IOException ioe)
            {  
                error("Server accept error: " + ioe); 
                stop(); 
            }
        }

    }

    private void start()  
    { 
        if (thread == null)
        {  
            thread = new Thread(this); 
            thread.start();
        }
    }

    /**
     * Stops the server 
     */
    @SuppressWarnings("deprecation")
    public void stop()   
    { 
        if (thread != null)
        { 
            thread.stop(); 
            thread = null;
        }
    }

    private int findClient(int ID)
    {  
        for (int i = 0; i < clientCount; i++)
            if (clients[i].getID() == ID)
                return i;
        return -1;
    }

    /**
     * sends a message to a 
     * @param ID
     * @param input
     */
    public synchronized void handle(int ID, String input)
    {  
        StringTokenizer t = new StringTokenizer(input);
        String[] arg = new String[t.countTokens()];
        for(int i=0; t.hasMoreElements(); i++)
            arg[i] = t.nextToken(",");
        if(arg[0] == "new")
            switch(input)
            {
            case".bye":
            {
                clients[findClient(ID)].send(".bye");
                remove(ID); 
                break;
            }
            default:
            {
                for (int i = 0; i < clientCount; i++)
                    clients[i].send(input); 
                break;
            }
            }
    }
    /**
     * sends a message to all clients
     * @param input message to send
     */
    public void sendAll(String input)
    {
        for (int i = 0; i < clientCount; i++)
            clients[i].send(input); 
    }

    /**
     * remove a selected ID
     * @param ID ID of client
     */
    @SuppressWarnings("deprecation")
    public synchronized void remove(int ID)
    {  
        int pos = findClient(ID);
        if (pos >= 0)
        {  
            ChatServerThread toTerminate = clients[pos];
            log("Removing client thread " + ID + " at " + pos);
            if (pos < clientCount-1)
                for (int i = pos+1; i < clientCount; i++)
                    clients[i-1] = clients[i];
            clientCount--;
            QuitEvent e = new QuitEvent(toTerminate.getID());
            e.setGameBreaking(true);
            for(QuitHandler a: quitHandlers)
                a.quit(e);
            try
            {  
                toTerminate.close(); }
            catch(IOException ioe)
            {  
                error("Error closing thread: " + ioe); 
            }
            toTerminate.stop(); 
        }
    }

    private void addThread(Socket socket)
    {  
        if (clientCount < clients.length)
        { 
            log("Client accepted: " + socket);
            clients[clientCount] = new ChatServerThread(this, socket);
            try
            { 
                clients[clientCount].open(); 
                clients[clientCount].start();  
                ClientConnectEvent e = new ClientConnectEvent(clients[clientCount],clients[clientCount].getID());
                clientCount++; 
                for(ConnectHandler a: connectHandlers)
                    a.connect(e);
            }
            catch(IOException ioe)
            {  
                error("Error opening thread: " + ioe); 
            }
        }
        else
            error("Client refused: maximum " + clients.length + " reached.");
    }

    public String toString()
    {
        return "ChatServer{;host=" + output.getHost() + ";port=" + output.getPort() + ";clients=" + clientCount + ";}";
    }

    public int getAmountOfClients()
    {
        return clientCount;
    }

    public void addConnectHandler(ConnectHandler handler)
    {
        connectHandlers.add(handler);
    }

    public void removeConnectHandler(ConnectHandler handler)
    {
        connectHandlers.remove(handler);
    }

    public int getMaxClients()
    {
        return CLIENTMAXIMUM;
    }

    public void addQuitHandler(QuitHandler quitHandler) 
    {
        quitHandlers.add(quitHandler);
    }
    public void removeQuitHandler(QuitHandler quithandler)
    {
       quitHandlers.remove(quithandler);
    }
} 
```

### 聊天服务器线程

被 ChatServer 用作客户端连接

```
package com.weebly.foxgenesis.src;
import java.net.*;
import java.io.*;

public final class ChatServerThread extends Thread
{  
    private ChatServer server = null;
    private Socket socket = null;
    private int ID = -1;
    private DataInputStream  streamIn  =  null;
    private DataOutputStream streamOut = null;

    public ChatServerThread(ChatServer server, Socket socket)
    {  
        super();
        this.server = server;
        this.socket = socket;
        this.ID = socket.getPort();
    }
    @SuppressWarnings("deprecation")
    public void send(String msg)
    {   
        try
        {  
            streamOut.writeUTF(msg);
            streamOut.flush();
        }
        catch(IOException ioe)
        {  
            server.error(ID + " ERROR sending: " + ioe.getMessage());
            server.remove(ID);
            stop();
        }
    }

    public int getID()
    { 
        return ID;
    }

    @SuppressWarnings("deprecation")
    @Override
    public void run()
    {  
        server.log("Server Thread " + ID + " running.");
        while (true)
        {  
            try
            {  
                server.handle(ID, streamIn.readUTF());
            }
            catch(IOException ioe)
            {  
                server.error(ID + " ERROR reading: " + ioe.getMessage());
                server.remove(ID);
                stop();
            }
        }
    }

    public void open() throws IOException
    {  
        streamIn = new DataInputStream(new 
                BufferedInputStream(socket.getInputStream()));
        streamOut = new DataOutputStream(new
                BufferedOutputStream(socket.getOutputStream()));
    }

    public void close() throws IOException
    {  
        if (socket != null)    socket.close();
        if (streamIn != null)  streamIn.close();
        if (streamOut != null) streamOut.close();
    }
} 
```

### 客户端连接事件

```
package com.weebly.foxgenesis.src;

public class ClientConnectEvent extends ConnectionEvent
{
    private final ChatServerThread client;

    public ClientConnectEvent(ChatServerThread client, int clientID)
    {
        super(clientID);
        this.client = client;
    }

    public ChatServerThread getClient()
    {
        return client;
    }

    @Override
    public boolean isConnectionBreaking(){return false;}
} 
```

### 连接处理程序

```
package com.weebly.foxgenesis.src;

public interface ConnectHandler 
{
    public void connect(ClientConnectEvent e);
} 
```

### 客户端退出事件

```
package com.weebly.foxgenesis.src;

public class ClientQuitEvent extends ConnectionEvent
{
    public ClientQuitEvent(int clientID)
    {
        super(clientID);
    }

    @Override
    public boolean isConnectionBreaking() 
    {
        return true;
    }
} 
```

### 退出处理程序

```
package com.weebly.foxgenesis.src;

public interface QuitHandler 
{
    public void quit(ClientQuitEvent e);
} 
```

### 服务器接收器

```
package com.weebly.foxgenesis.src;

public interface ServerReciever 
{
    public void handle(String msg);
    public void handleError(String msg);
    public int getPort();
    public int getMaximunClients();
    public void handleLog(Object text);
    public String getHost();
} 
```

### 连接事件

```
package com.weebly.foxgenesis.src;

public abstract class ConnectionEvent 
{
    public abstract boolean isConnectionBreaking();
    private int clientID;
    public ConnectionEvent(int clientID)
    {
        this.clientID = clientID;
    }

    public int getClientID()
    {
        return clientID;
    }
} 
```

## 第2步：

## 将服务器连接到 Bukkit

我提供了一个关于如何通过制作新插件将服务器连接到 bukkit 的示例。

```
public class MyPlugin extends JavaPlugin
{
     @Override
     public void onEnable()
     {
        ChatServer server = new ChatServer(new ServerReciever()
        {
            @Override
            public void handle(String msg){handleMsg(msg);}

            @Override
            public void handleError(String msg){handleErr(msg);}

            @Override
            public int getPort(){return 25567}

            @Override
            public int getMaximunClients(){return 100;}

            @Override
            public void handleLog(Object text){log(text);}

            @Override
            public String getHost(){return "localhost";}
        }
   }
   public void handleLog(Object text)
   {
      System.out.println(text);
   }
   public void handelErr(String msg)
   {
     System.err.println(msg);
   }
   public void handleMsg(String msg)
   {
     if(msg.equalsIgnoreCase("reload"))
           Bukkit.reloadOrSomething(); //i don't know the void off the top of my head
   }
} 
```

## 第 3 步：

## 端口转发

如果您不知道那是什么，请继续使用 Google 搜索。网上有一些很棒的教程。您想要端口转发您在代码中设置的端口。

## 第4步：

## 向服务器发送消息

我不知道 PHP，但您需要做的就是将 UTF-8 编码消息发送到您在上面硬编码的端口上的服务器 ip。

## 第 5 步：

# 请享用！

# java - 如何更准确地绘制这个形状？

> ID：14468399
> 
> 赞同：2
> 
> 时间：2013-01-22T21:33:44.557
> 
> 标签：java, graphics2d, shapes

我`Graphics2D`用来绘制形状，例如矩形。但是，我已经让代码工作了，它在我的 GUI 上绘制了矩形，但是精度和我拖动它的大小相差甚远（get 方法默认返回整数）。每次单击面板时，形状大小和形状数量似乎都是随机的。

```
int a,b,a2,b2;

public void MyPaintMethod(Graphics g) {
    Graphics2D g2D = (Graphics2D) g;
    Rectangle2D rectangle = new Rectangle2D.Double(a,b,a2,b2);
    g2D.draw(rectangle);    
    repaint();
}

public void mousePressed(MouseEvent e) {
    // ML
    a = e.getX();
    b = e.getY();
}

public void mouseReleased(MouseEvent e) {
    // ML
    a2 = e.getX();
    b2 = e.getY();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T21:39:00.970

[Rectangle2D](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/Rectangle2D.Double.html)由 (x,y,width,height) 构成。你给它（x1，y1，x2，y2）。尝试：

```
Rectangle2D rectangle = new Rectangle2D.Double(a, b, a2-a, b2-b); 
```

# android - 模拟 Android 相机

> ID：14468400
> 
> 赞同：2
> 
> 时间：2013-01-22T21:33:44.157
> 
> 标签：android, video, camera, android-camera

我正在使用安卓手机的摄像头作为输入来测试成像算法，并且需要一种方法来始终如一地测试算法。理想情况下，我想拍摄预先录制的视频源，并让手机“假装”视频源是来自相机的实时视频。

我理想的解决方案是运行算法的应用程序不知道视频是预先录制的。我不想将视频文件直接加载到应用程序中，而是尽可能将其作为传感器数据读取。

这种方法可行吗？如果是这样，任何指向正确方向的指针都会非常有帮助，因为到目前为止谷歌搜索让我失败了

谢谢！

编辑：澄清一下，我的理解是 Camera 类使用摄像头服务从硬件读取视频。我不想在应用程序端做一些事情，而是想创建一个从视频文件而不是硬件读取的自定义摄像头服务。那可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:00:16.730

当您对实时 android 视频源进行处理时，您将需要构建自己的[自定义相机](http://developer.android.com/guide/topics/media/camera.html#custom-camera)应用程序，该应用程序通过Android 提供的[`PreviewCallback`接口](http://developer.android.com/reference/android/hardware/Camera.PreviewCallback.html#onPreviewFrame%28byte%5B%5D,%20android.hardware.Camera%29)为您提供各个帧。

现在，模拟这会有点棘手，因为预览帧的格式通常是 NV21 格式。如果您使用的是预先录制的视频，我认为没有任何清晰的方法可以逐帧读取，除非您尝试[`getFrameAtTime`](http://developer.android.com/reference/android/media/MediaMetadataRetriever.html#getFrameAtTime%28long,%20int%29)使用完全不同格式的位图的方法。

这使我建议您可以从该方法中使用这些位图进行测试（尽管我真的不确定您要在这里做什么）`getFrameAtTime`。为了使此代码能够在实时相机预览上工作，您需要将`PreviewCallback`界面中的 NV21 帧转换为与来自的位图相同的格式`getFrameAtTime`，或者您可以调整您的算法以处理 NV21 格式帧。NV21 是一种非常简洁的格式，分别显示颜色和亮度数据，但使用起来可能很棘手。

# wpf - WPF styles applied only to root element using dataTrigger

> ID：14468401
> 
> 赞同：0
> 
> 时间：2013-01-22T21:33:46.417
> 
> 标签：wpf, styles, datatrigger

I have faced a problem with the WPF styles.

In the root userControl I am having the resource defined like this:

```
<UserControl.Resources>
    <Style TargetType="{x:Type MyControl}">
        <Setter Property="MyControl.AAA" Value="Value1" />
    </Style>
</UserControl.Resources> 
```

This works just fine, it affects all the MyControl elements in the whole visual tree hierarchy.

If I attempt to change the setter using the DataTrigger, like this:

```
<UserControl.Resources>
    <Style TargetType="{x:Type MyControl}">
        <Style.Triggers>                
           <DataTrigger Binding="{Binding Path=SelectedAAAValue}" Value="Value1">
               <Setter Property="MyControl.AAA" Value="Value1" />
           </DataTrigger>
           <DataTrigger Binding="{Binding Path=SelectedAAAValue}" Value="Value2">
               <Setter Property="MyControl.AAA" Value="Value2"/>
           </DataTrigger>
        </Style.Triggers>
    </Style>
</UserControl.Resources> 
```

The style is applied only to the root element of a specific MyControl type.

Can anybody explain me why it is happening and how can I apply the style to all specific elements via DataTriggers?

Many thanks for any help. Ondra

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:21:17.027

我不知道为什么会这样，但也许你可以[在这里](http://wpftutorial.net/DependencyProperties.html#valueres)找到更多信息。这当然只是在您设置 MyControl.AAA 的属性是 DependecyProperty 的情况下。

下一段，在图像下，应该解释更多。

# linux - .dircolors does not affect existing files, only new files

> ID：14468403
> 
> 赞同：0
> 
> 时间：2013-01-22T21:33:48.950
> 
> 标签：linux, ubuntu-12.04

I recently decided that the terminal color scheme that Ubuntu uses is not optimal. I have edited .dircolors and it worked...for the most part. The issue I am having is I added two custom file extensions to .dircolors which are .R and .cpp. I wanted to make these different colors, but it only applies if I create a new file, say test.R or test.cpp, not for my already existing .R and .cpp files.

Any ideas why existing ones are not taking on the new color settings in .dircolors?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T23:15:43.207

这可能是因为`~/.dircolors`不是`ls`直接读取，而是在shell启动时用于设置使用的环境`LS_COLORS`变量`ls`。我敢打赌，您在列出目录时使用了两个不同的终端，一个是在修改`~/.dircolors`. 使更改在现有终端使用中生效`eval $(dircolors ~/.dircolors)`。

还根据文件的模式分配颜色。例如，您的旧文件可能是可执行文件，因此优先于您定义的文件获得该颜色。在我的系统上，这些基于模式的颜色用于 setuid 和 setgid 文件、具有功能的文件和可执行文件。

# php - Change the opacity of an image in PHP

> ID：14468405
> 
> 赞同：5
> 
> 时间：2013-01-22T21:33:57.173
> 
> 标签：php, image, gd, opacity, transparent

I am trying to change the opacity of an image using GD, Almost all the solutions that I found are similar to the code below, where you create a white transparent background and merge it with your image.

But this doesn't make the image transparent, the image just gets brighter, you can't actually look through it.

So my question is, how to change the opacity of an image so that you can look through it? Or am i doing something wrong with this code?

```
//Create an image with a white transparent background color
$newImage = ImageCreateTruecolor(300, 300);
$bg        = ImageColorAllocateAlpha($newImage, 255, 255, 255, 127);
ImageFill($newImage, 0, 0, $bg);

//Get the image
$source = imagecreatefrompng('my_image.png');

$opacity = 50;    

//Merge the image with the background
ImageCopyMerge($newImage,
               $source,
               0, 0, 0, 0,
               300,
               300,
               $opacity);

header('Content-Type: image/png');
imagepng($newImage);
imagedestroy($newImage); 
```

Thank you!

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-12-31T06:55:28.563

你只需要`imagefilter`使用`IMG_FILTER_COLORIZE`

```
$image = imagecreatefrompng('my_image.png');
$opacity = 0.5;
imagealphablending($image, false); // imagesavealpha can only be used by doing this for some reason
imagesavealpha($image, true); // this one helps you keep the alpha. 
$transparency = 1 - $opacity;
imagefilter($image, IMG_FILTER_COLORIZE, 0,0,0,127*$transparency); // the fourth parameter is alpha
header('Content-type: image/png');
imagepng($image); 
```

`imagealphablending`，我认为，是出于绘图目的，所以你不想使用它。我可能错了。我们都应该查一下:)

如果你想使用百分比，你可以`$opacity`相应地计算。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-20T03:47:12.210

没有直接的方法可以使用 DG 函数更改不透明度（实际上[有](https://stackoverflow.com/a/41406201/1118709)）。但可以使用逐像素操作来完成：

```
/**
 * @param resource $imageSrc Image resource. Not being modified.
 * @param float $opacity Opacity to set from 0 (fully transparent) to 1 (no change)
 * @return resource Transparent image resource
 */
function imagesetopacity( $imageSrc, $opacity )
{
    $width  = imagesx( $imageSrc );
    $height = imagesy( $imageSrc );

    // Duplicate image and convert to TrueColor
    $imageDst = imagecreatetruecolor( $width, $height );
    imagealphablending( $imageDst, false );
    imagefill( $imageDst, 0, 0, imagecolortransparent( $imageDst ));
    imagecopy( $imageDst, $imageSrc, 0, 0, 0, 0, $width, $height );

    // Set new opacity to each pixel
    for ( $x = 0; $x < $width; ++$x )
        for ( $y = 0; $y < $height; ++$y ) {
            $pixelColor = imagecolorat( $imageDst, $x, $y );
            $pixelOpacity = 127 - (( $pixelColor >> 24 ) & 0xFF );
            if ( $pixelOpacity > 0 ) {
                $pixelOpacity = $pixelOpacity * $opacity;
                $pixelColor = ( $pixelColor & 0xFFFFFF ) | ( (int)round( 127 - $pixelOpacity ) << 24 );
                imagesetpixel( $imageDst, $x, $y, $pixelColor );
            }
        }

    return $imageDst;
}

$source = imagecreatefrompng( 'my_image.png' );
$newImage = imagesetopacity( $source, 0.5 );
imagedestroy( $source );

header( 'Content-Type: image/png' );
imagepng( $newImage );
imagedestroy( $newImage ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-06T20:45:17.730

您是否尝试将 alpha blending 设置为 true？

`imagealphablending($newImage,true);`

# jquery - JQuery toggle visibility of multiple divs with same classnames

> ID：14468407
> 
> 赞同：1
> 
> 时间：2013-01-22T21:34:03.657
> 
> 标签：jquery, visibility

I'm trying to show/hide multiple `div`s with classnames based on proximity to the anchor which triggers the JQuery. I think something is wrong with how I'm referencing the div which I want to show.

I have a Fiddle here: [http://jsfiddle.net/lizfulghum/qKMH8/4/](http://jsfiddle.net/lizfulghum/qKMH8/4/) and I'm assuming the issue is with this line: `JQuery(this).next(".full").show();`

The complete code is as follows:

**HTML**

```
<div class="teaser">
    Blah blah blah
    <a href="#" class="toggle">Toggle</a>
</div>

<div class="full">
    Full Text Goes Here
</div>

<div class="teaser">
    Blah blah blah
    <a href="#" class="toggle">Toggle</a>
</div>

<div class="full">
    Full Text 2 Goes Here
</div> 
```

**Javascript**

```
jQuery(document).ready(function() {
    jQuery(".full").hide();
    jQuery(".toggle").click(function() {
        JQuery(".full").hide();
        JQuery(this).next(".full").show();
  });
}); 
```

Could anyone enlighten me on this point?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:38:38.817

你打错`jQuery`了两次。在调用之前，您还必须在 DOM 树中上一层`.next()`：

```
//                             \/ aliases jQuery back to $
jQuery(document).ready(function($) {
    $(".full").hide();
    $(".toggle").click(function() {
        $(".full").hide();
        $(this).parent().next(".full").show();
    });
}); 
```

[**小提琴**](http://jsfiddle.net/qKMH8/6/)

我在 DOM 就绪范围内使用了别名——DOM 就绪处理程序的第一个参数`jQuery`接收[jQuery](http://api.jquery.com/ready/)对象本身。打字速度更快，更不容易打错。您也可以在 WP 和其他场景中安全地使用此语法。`$``$``.noConflict()`

当然，如果您没有其他库获取全局`$`并且您没有使用将 jQuery 置于`noConflict`模式的框架，则可以使用`$`而不是`jQuery`开箱即用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T21:39:05.500

我添加了[parent()](http://api.jquery.com/parent/)。所以遍历会起作用：

```
$(document).ready(function() {
    $(".full").hide();
    $(".toggle").click(function() {
        $(".full").hide();
        $(this).parent().next(".full").show();
  });
}); 
```

[http://jsfiddle.net/qKMH8/5/](http://jsfiddle.net/qKMH8/5/)

# ubuntu - Installing ElasticSearch plugins

> ID：14468408
> 
> 赞同：4
> 
> 时间：2013-01-22T21:34:11.480
> 
> 标签：ubuntu, elasticsearch

I'm trying to install an ElasticSearch plugin on Ubuntu 12.04, and the documentation is not helping me. The plugin is distributed as a jar, and I've tried installing it with the plugin command without apparent success:

```
[13:28:38][root@pre-staging:/usr/share/elasticsearch]$ curl -I file:///usr/share/elasticsearch/plugins-no/elasticsearch-knapsack-1.0.3.jar
Content-Length: 322631
Accept-ranges: bytes
Last-Modified: Thu, 13 Dec 2012 18:47:04 GMT
[13:29:56][root@pre-staging:/usr/share/elasticsearch]$ bin/plugin -url file:///usr/share/elasticsearch/plugins-no/elasticsearch-knapsack-1.0.3.jar
[13:30:01][root@pre-staging:/usr/share/elasticsearch]$ ls plugins
[13:30:03][root@pre-staging:/usr/share/elasticsearch]$ 
```

You can see that the jar file exists, but when I install it nothing happens to the plugins directory. I've also tried manually adding the jar to the plugins directory. I have no idea whether that's supposed to work, or whether I'd see something in the elasticsearch log if I did things right, but I don't, and I don't see the behavior the plugin's documentation makes me expect I should. I've also followed the plugin's installation instructions directly, [https://github.com/jprante/elasticsearch-knapsack](https://github.com/jprante/elasticsearch-knapsack), which don't do anything useful either (the installation can't find whatever remote files it expects to install the plugin).

So the question is - How do I install this plugin? How can I tell if it's been installed correctly?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T11:47:23.633

该`plugin`命令没有做任何特别的事情，它只是尝试从不同的位置下载 zip 文件并将其解压缩到插件下的特定子文件夹中。大多数插件过去都可以直接作为 GitHub 下载使用，但由于 GitHub[已禁用其下载功能](https://github.com/blog/1302-goodbye-uploads)，因此正在讨论什么是解决此问题的最佳方法。来自 elasticsearch 团队的插件已被移至`download.elasticsearch.org`插件命令，最近更新了插件命令以反映此更改。查看相关[问题](https://github.com/elasticsearch/elasticsearch/issues/2507)和有关它的[博客](http://www.elasticsearch.org/blog/2012/12/17/new-download-service.html)文章。

无论如何，如果您在使用 plugin 命令时遇到问题，您可以下载 zip 文件并将其解压缩到 plugins 下的特定子文件夹中。之后，您需要重新启动 elasticsearch 节点，您将在输出中看到在启动期间已找到并成功加载的插件列表。鉴于您的解释，我猜您没有在插件下创建背包（或您喜欢的任何其他名称）文件夹。只需创建它并将 jar 放在该文件夹中。

# c++ - First Steps in Learning C++

> ID：14468410
> 
> 赞同：6
> 
> 时间：2013-01-22T21:34:15.980
> 
> 标签：c++, c

> **Possible Duplicate:**
> [The Definitive C++ Book Guide and List](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

I want to be a programmer; and I want to learn the basics of **C++**. Can anyone give me any pointers on how to start? I'm currently a complete novice and have no programming experience.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T21:37:01.137

网上有很多教程。只需搜索教程和 C++。这是一个例子：

[http://www.cprogramming.com/tutorial/lesson1.html](http://www.cprogramming.com/tutorial/lesson1.html)

另一种方法是投资一本书！

# ruby - 如何在 simple_fields_for 中迭代？

> ID：14468415
> 
> 赞同：5
> 
> 时间：2013-01-22T21:34:42.257
> 
> 标签：ruby, ruby-on-rails-3, simple-form

我需要在 simple_fields_for 块内进行迭代，以将数字 [0 到 6] 分配给 :day 字段。

控制器

```
7.times { @doctor.schedules.build } 
```

看法

```
<tr>
    <% @i = 0 %>
    <%= f.simple_fields_for :schedules do |builder| %>
    <td>
    <%= builder.input :day, value: @y, wrapper: :check  %>
    <%= builder.input :is_available, as: :boolean, label: false, wrapper: :check %>
    <% @i += 1 %>
    </td>
<% end %>
</tr> 
```

显然这将从 1 到 7 开始，我怎样才能让它从 0 迭代到 6？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T21:39:24.850

JFYI，您将能够在 Rails 4 中获取当前索引。请参阅[此](https://github.com/rails/rails/pull/5746)合并的拉取请求

现在你可以使用这样的东西：

```
<% @doctor.schedules.each_with_index do |schedule, index| %>
  <%= f.simple_fields_for :schedules, schedule do |ff| %>
    <%= ff.input :day, value: index %>
  <% end %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-23T08:42:06.080

如前所述，合并[https://github.com/rails/rails/pull/5746](https://github.com/rails/rails/pull/5746)后在 Rails 4 中是可能的。在 Rails 4 中，您可以`.index`在“构建器”上使用：

```
<%= f.simple_fields_for :schedules do |builder| %>
  <%= builder.input :day, value: builder.index+1 %>
<% end %> 
```

# algorithm - 给定一个一对多的地图，一种算法，告诉地图的一对一“子集”是否可以覆盖所有项目

> ID：14468416
> 
> 赞同：2
> 
> 时间：2013-01-22T21:34:42.563
> 
> 标签：algorithm, mapping, linear-algebra

我不确定要搜索的正确术语是什么（我搜索了“映射算法”和“一对一算法”），而且我想不出更简单（更规范）的公式。

我有两套，说

```
A B C D E 
```

和

```
L M N O P 
```

我得到一张一对多的地图，*例如*

```
A --> L, M, N, P
B --> M
C --> M, N, O
D --> N
E --> O, L 
```

判断地图的一对一“子集”是否可以覆盖所有项目的最简单和/或最快的算法是什么？例如，上面*确实*存在这样一个“子集”：

```
A --> P
B --> M
C --> O
D --> N
E --> L 
```

我不需要知道子集图*本身*，只需要知道*是否存在*。

“蛮力”算法是显而易见的——一个轻微的改进是深度优先，只要没有项目满足必要的映射就回溯——另一个改进可能是按照映射的升序进行，*例如*first `B --> M`，`D --> N`然后是 second`E --> O, L`等。

但所有这些似乎都是蛮力搜索的原始变体。有更好的算法吗？我对使用线性系统解决此类问题有一个模糊的记忆，例如将地图转换为矩阵并进行某种确定答案的归约，但我必须重新学习线性代数才能解决这个问题——也许SO可以更快地帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T20:16:49.323

假设这 2 个集合完全不相交，您正在解决的问题可以简化为[二分最大基数匹配](http://en.wikipedia.org/wiki/Matching_%28graph_theory%29#Maximum_matchings_in_bipartite_graphs)问题。如果可以进行的最大匹配数等于第一组的基数，则存在覆盖所有项目的映射子集。

除了将 Bipartite Matching 问题转换为流问题之外，[TopCoder 上的这个主题](http://apps.topcoder.com/forums/?module=Thread&threadID=684427&start=0&mc=10)还提到了使用 Kuhn 算法解决问题的更快方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T21:51:17.847

您正在寻找的术语是“二分匹配”。解决这个问题的最简单方法是将其转换为流问题。制作一个来源，将其连接到您的第一组的每个元素。将第一组的每个元素连接到第二组的一个或多个元素（建立一对一映射中的那些连接）。现在将第二组中的每个元素连接到单个接收器。所有这些连接的权重都应该是 1。

您可以使用任何最大流量求解算法（有关想法，请参见[http://en.wikipedia.org/wiki/Maximum_flow_problem](http://en.wikipedia.org/wiki/Maximum_flow_problem)）来检查最大流量。如果最大流量恰好等于每个集合中的元素数，那么就会存在您正在搜索的映射。

# javascript - 如何将剪断的javascript转换为coffeescript

> ID：14468417
> 
> 赞同：1
> 
> 时间：2013-01-22T21:34:43.273
> 
> 标签：javascript, coffeescript

```
//Trying to convert zis javascript...
http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
});

//To zis coffee-script
http.createServer(app).listen app.get('port'), (x) ->
  console.log "Express server listening on port " + app.get 'port' 
```

我的问题是：当我提供 app.get('port') 的值作为“listen”的第一个参数时，是否必须使用括号？如果我在不使用括号的情况下编写代码段：

```
http.createServer(app).listen app.get'port' (x) ->
      console.log "Express server listening on port " + app.get 'port' 
```

回调函数不会作为 app.get 的第二个参数传递吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:43:10.240

简而言之，转换如下所示：

```
http.createServer(app).listen app.get('port'), ->
    console.log "Express server listening on port #{app.get 'port'}" 
```

* * *

多一点解释：

CoffeeScript 的括号是可选的，除非函数不带参数。因此，如果您正在调用一个带有两个参数的函数，则以下两个是等效的：

```
Math.max(5, 12)
Math.max 5, 12 
```

Like `Math.max`,`http.createServer(app).listen`似乎有两个参数：一个端口（似乎）和一个回调函数。

您可以像这样轻松地编写它，这可能会更清楚一点。

```
serverListeningCallback = ->
    console.log "Express server listening on port #{app.get 'port'}"

http.createServer(app).listen app.get('port'), serverListeningCallback 
```

我会推荐顶部的解决方案，但以上内容可能会使解决方案更加清晰。

* * *

PS：注意[CoffeeScript 的字符串插值](http://coffeescript.org/#strings)。以下在 CoffeeScript 中是等价的：

```
"My favorite number is " + Math.random()
"My favorite number is #{Math.random}" 
```

# javascript - 在动态内容中提供来自 Cloudfront 的 HTML 和资产

> ID：14468418
> 
> 赞同：0
> 
> 时间：2013-01-22T21:34:44.277
> 
> 标签：javascript, ruby-on-rails, cdn, amazon-cloudfront

我有一个基本的应用程序，用户可以在其中上传一堆 HTML 文件（index.html、mypage.html）和一堆资产（myimage.jpg、myscript.js），并通过他们自己的网址（如 www.mysite）访问这些文件。 com/用户名/index.html。

但是，我的网站在上传的 HTML 中添加了一堆东西：添加评论、书签等的能力。所有这些都是通过 JS 注入的。

在我的 Rails 应用程序中，现在我正在控制器中加载用户从 S3 上传的内容，并将其与一堆 JS 一起输出到我的视图中：

```
def show
   # load HTML from S3
   # strip out everything between body tags and put in @body var
   # render view that outputs @body on a page with a bunch of JS
end 
```

但是，这非常慢，因为：

1.  我没有为用户上传的文件利用 CDN 缓存
2.  我没有在客户端上放置任何 HTTP 调用。客户端在查看任何内容之前正在等待服务器从 S3 加载内容。

我想请求的是以下内容

1.  Rails 应用程序返回一个带有 JS 的裸 HTMl 页面
2.  JS 从 Cloudfront 加载 HTML 文件（利用缓存）
3.  JS 在页面上注入 HTML，以及评论、书签等

我认为这会很棒，但我坚持文件版本控制。为了利用缓存，我想设置长 TTL 并利用文件验证。但是，我不想遍历所有用户上传的 HTML 并将所有资产标签从 /myimage.jpg 替换为 /myimage-VERSION.jpg，并且我不想要像 www.mysite.com/ 这样长的疯狂 URL用户名/索引-VERSION.html

我想知道是否有聪明的方法来做到这一点？基本上是从 Cloudfront 获取 HTML，从我的 Rails 应用程序中注入 HTML，并利用版本化文件，同时保持漂亮的 URL 和原始 HTML 文件不变。

还是我应该在控制器端使用 memcached？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:18:02.070

您可以设置 CloudFront 以使用您的 Rails 应用程序作为[自定义源](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/RequestAndResponseBehaviorCustomOrigin.html)。首先向 CloudFront 发送请求。当一个新的、未缓存的请求进入 CloudFront 时，您的应用程序将首先被命中以准备 CloudFront 的缓存。这是您在将完成的页面交付给 CloudFront 进行缓存之前执行所有自定义处理的时间。设置适当的缓存 ETag 或类似内容，CloudFront 将向您请求更新，您可以为其提供 304 或新内容。

# php - 使用 Ajax 显示另一个 Ajax 请求调用的 PHP 脚本的进度

> ID：14468419
> 
> 赞同：3
> 
> 时间：2013-01-22T21:34:47.057
> 
> 标签：php, ajax, get, progress, simultaneous

我对一个运行相当长的时间（1 秒到 3 分钟之间）的 PHP 脚本进行了 jQuery Ajax 调用。它不断地在数据库中记录完成百分比。如何同时继续运行另一个 Ajax 请求以向用户报告 MySQL 数据库的完成百分比？

**编辑** 我了解如何使用单独的 PHP 脚本来查询数据库，所以我的问题更多是如何设置 JavaScript 和 Ajax 调用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T22:02:37.263

在您的 AJAX 调用开始您的流程之后，您可以在一个循环中进行另一个 AJAX 调用，该循环请求、返回并呈现当前完成百分比，直到达到 100%。基本上，一个 AJAX 调用启动进程，然后是一系列检查状态的调用。

更新：这里有一些简单的 JavaScript 来实现你想要的：

```
<script>
function startProcess() {
    //start your long-running process
    $.ajax(
            {
                type: 'GET',
                url: "/longRunningProcess",
                async: true,
                success:
                    function (data) {
                        //do something - your long process is finished
                    }
            });
}
function getStatus() {
    //check your progress
    $.ajax(
            {
                type: 'GET',
                url: "/checkProgress",
                async: true,
                success:
                    function (data) {
                        //assume the data returned in the percentage complete
                        var percentage = parseInt(data);

                        //write your status somewhere, like a jQuery progress bar?

                        if (percentage < 100) {
                            //if not complete, check again
                            getStatus();
                        }
                    }
            });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:39:42.693

您可能需要另一个 URL 来调用数据库中的轮询进度。换句话说，报告进度的不同 PHP 脚本。Ajax 调用可能会使用超时或任何花哨的东西 jQuery 必须定期安排自己（直到服务器调用报告完成）。

记住要处理服务器端处理死掉（因此永远不会完成！）

# jquery - jQuery 有“动画”事件吗？

> ID：14468421
> 
> 赞同：0
> 
> 时间：2013-01-22T21:34:49.260
> 
> 标签：jquery, jquery-animate, jquery-effects, jquery-callback

jQuery 有`animating`-event（不是`:animated`）吗？类似的东西[`step`](http://api.jquery.com/animate/#step)，但作为额外的方法/事件？

目前我在每个动画步骤函数中触发一个自定义事件：

```
$('.foo').animate({property: 'value'}, {
    step: function(now, fx){
        $(this).trigger('animating', [now, fx])
    }
});

$('.foo').on('animating', function(e, now, fx){
    // do what you want
}); 
```

我认为在野外肯定有更好的解决方案。有什么想法/方法吗？

**更新**

我写了一个（当然**不是**很棒的）特殊事件，是什么让处理这个问题更容易一些：

```
(function($){
    var oldStep = $.fx.step._default;
    jQuery.event.special.animating = { };
    $.fx.step._default = function( fx ) {
        $(fx.elem).trigger('animating', fx);
        oldStep.apply( this, arguments );
    };
}(jQuery)); 
```

这不适用于 jQuery 1.7+，因为 jQuery 的动画方法已更改，或者 step 函数不再可扩展（$.fx.step 导致为空`object`）。

`jQuery.fx`指`Tween.prototype.init;` & `jQuery.fx.step`到`{};`

所以它不能工作...

我对每个提示都看得更远！

# android - Android 原生权限和保护级别

> ID：14468425
> 
> 赞同：1
> 
> 时间：2013-01-22T21:35:01.200
> 
> 标签：android, android-ndk, system-calls, android-permissions

我知道权限在 Android SDK 级别是如何工作的，但它在本机代码中究竟是如何工作的？当在本机代码中进行系统调用时，是什么决定了对 socket() fopen()、ioctl() 等的调用是否被允许？

我读了这些问题：

[android原生代码安全](https://stackoverflow.com/questions/11908755/android-native-code-security)

[Android 权限是如何执行的？](https://stackoverflow.com/questions/5154853/how-is-android-permission-enforced?lq=1)

但是第一个实际上并没有得到回答，而在第二个链接中，答案不起作用，我还没有代表评论其他人的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:54:16.817

> 但它在本机代码中究竟是如何工作的？

和其他地方一样。为流程定义了权限。在本机代码可以直接访问的情况下，您与之通信的本机代码会检查权限。

> 但是第一个实际上并没有回答

是的。寻找绿色复选标记。

> 在第二个答案中的链接不起作用

是的，该链接返回到不再运行的站点（另外，该文件已重命名）。[这应该是链接到 的文件](https://github.com/android/platform_dalvik/blob/master/vm/native/dalvik_system_Zygote.cpp)，镜像在 GitHub 上。

# php - 使用 eloquent 插入多行

> ID：14468427
> 
> 赞同：0
> 
> 时间：2013-01-22T21:35:04.643
> 
> 标签：php, database, eloquent

所以我正在尝试使用 eloquent 进行多行的数组插入，但我在文档中没有看到任何明显的方法来做到这一点。所以我不知道是否有最佳实践方式，或者我是否应该只通过这些插入方式进行。有人知道更聪明的方式吗？

它只是关系表中的行，两列都是引用另一个表中相同主键的外键。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-05T01:46:20.093

您可以对多行​​使用插入方法，如此处所示[http://jasonlewis.me/article/laravel-and-eloquent-part-1-basics](http://jasonlewis.me/article/laravel-and-eloquent-part-1-basics)

# excel - Excel 搜索功能的优先顺序

> ID：14468429
> 
> 赞同：0
> 
> 时间：2013-01-22T21:35:10.147
> 
> 标签：excel

我想知道搜索功能是否支持优先顺序？一旦满足第一个条件，我需要搜索功能来中断执行。

**我的公式是做什么的**

搜索笔记本电脑！D2 中的某些关键字，一旦找到，将文本打印到左侧并剪掉其余部分。

**我以为会发生的事**

Excel 在笔记本电脑中找到 B820！D2 将文本打印到左侧并砍掉其余部分

**实际发生了什么**

Excel 在笔记本电脑中找到 B820 和 Windows！D2，将文本打印到 Windows 左侧而不是 B820

**我的公式**

```
=IFERROR(LEFT(Laptops!D2,LOOKUP(2^15,SEARCH(D1:D7,Laptops!D2))-1),"") 
```

我尝试引用我所需的搜索参数，如下所示

```
=IFERROR(LEFT(Laptops!D2,LOOKUP(2^15,SEARCH({"B820","AMD","Pentium","Celeron","Windows","Intel","i3"},Laptops!D2))-1),"") 
```

它给出的结果与我从 D1:D7 引用它们时的结果相同，这并不奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:52:02.660

这是我在您上一个问题中提出的观点-该公式旨在处理每个单元格中的**单个**关键字-如果有多个关键字，您希望发生什么？

使用您引用的公式，您将获得D1:D7 中**最后一个**匹配项左侧的所有内容，因此如果出现“Windows”和“B820”，如果稍后在 D1 中列出，它将始终获得“Windows”左侧的所有内容： D7。您可以切换 D1:D7 中的顺序以适应或使用我建议的其他公式，即

`=IFERROR(LEFT(Laptops!D2,AGGREGATE(15,6,SEARCH(D$1:D$7,Laptops!D2),1)-1),"")`

**该版本将始终为您提供笔记本电脑中第一**场比赛左侧的所有内容**！D2**

这有帮助吗 - 如果没有，你能否举一些公式不起作用的例子以及你想要得到的东西。

# android - 是否可以通过 Google Play 跟踪 App Referrers？

> ID：14468431
> 
> 赞同：3
> 
> 时间：2013-01-22T21:35:28.390
> 
> 标签：android, installation, referrer

我已经研究这个主题几个小时了，我找不到任何有用的信息。所以最后我决定第一次创建一个 Stackoverflow 帐户。

基本上我有一个 Android 应用程序，它托管在一台服务器上，应用程序用户将从那里下载它。但是，该应用程序的链接将分发到许多不同的附属网站，每个网站都有我的系统已知的唯一 ID。

所以我想跟踪这些附属公司。应用程序需要知道用户在安装应用程序之前点击了哪个会员的链接。然后该应用程序会将会员编号传递给我们的服务器。

下载网址的示例将类似于：- [http://myserver.com/apphosting?affiliate=777&app.apk](http://myserver.com/apphosting?affiliate=777&app.apk)

仅当您在 Google Play 上托管应用程序并允许您使用安装引荐来源网址时，Google 才支持此功能。我对么？

有没有办法解决这个问题？在我看来，这是一个非常罕见的问题。

提前致谢。我非常感谢您的帮助和您宝贵的几分钟时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:44:24.347

There are a few ways to go about this and to do them well they all involve a significant amount of effort.

1.  You could return a different APK for every affiliate URL. If you have a lot of different affiliates, you'd want to have a build system which would compile a unique APK for each based on what is mostly the same application but with a different values resource file which contains the different affiliate IDs (probably making the main application a library application). Whether you hook this up directly to the web site or just copy the output to the website is up to you. You can then have your app phone home using this value.
2.  You can do some form of device fingerprinting both on the download side and on the app launch side, and match up the fingerprints. The simplest reasonably accurate fingerprint would probably just consist of the IP address of the device. This has its limitations, however. [Research](http://research.microsoft.com/apps/pubs/?id=117737) has shown that:

    > individual cell phones can expose different IP addresses to servers within time spans of a few minutes

You'll also find that multiple phones can share the same IP at the same time due to the [NAT technology that many carriers use](http://en.wikipedia.org/wiki/Carrier-grade_NAT). Still, the first 13-16 bits of the IP are for the most part quite stable within a short time period. You can also gain some accuracy by examining HTTP headers, especially browser user agents. There are some problems that manifest there too but there's definitely useful information there.

As you are distributing this application yourself, I would favor the first approach fairly heavily. It gives you better accuracy and is (at least in my opinion) easier to implement (and yes I've implemented something along the lines of both of these solutions). The downside of course is that you'll be distributing many different versions of your app, but if you do it right you should have only very minimal differences between the APKs that will only slightly increase your support overhead.

# php - Php Preg_Replace 字符数不匹配

> ID：14468432
> 
> 赞同：2
> 
> 时间：2013-01-22T21:35:48.000
> 
> 标签：php, preg-replace, digits, quantifiers

我正在尝试通过 preg_replacing 过滤字符串。除了数字和点之外的任何内容，并且点前不超过 5 个数字。wamp (UptoDate) 下的 PHP 5.4.3。

好搭配：

*   0.01
*   0.1
*   12345.11
*   12345.1
*   1
*   12345

坏匹配：

*   0,10
*   0,1
*   12345,11
*   12345,1
*   123456

我遇到的第一个问题是我无法删除 (,) 逗号，我只想保留 (.) 点作为分隔符。请记住，这是一个价格字符串。Php 似乎没有用 (,) 逗号计算，所以我希望输入只能用 . 而不是逗号。所以我使用（^），否定字符类，然后是0-9。. 然后我添加要匹配的字符数。我在 1-5 之间（1 或 2 或 3 或... 5

我究竟做错了什么。

这是我一直用来帮助的信息： [http ://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html) [http://www.expreg.com/options.php](http://www.expreg.com/options.php)

```
<?php $string = 'asd321asd321df564d.fasd321asd12';

$string = cleanabc123($string);

function cleanabc123($data) {   $data =
preg_replace("/([^0-9\s\.]){1,5}/u", "", $data);    return $data; }

// This will be 'username' now echo $string; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:44:55.593

颠倒你的意图更有意义：使用 preg_match() 只找到一个好的结果。否则返回 FALSE 或 NULL。

这样，您的正则表达式将更易于编写和理解。

顺便说一句，按照您现在的操作方式，您最好使用`preg_replace("/[^\d\.]/u", "", $str)`，替换所有不正确的字符，而与它们的位置无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:46:44.230

我会替换

```
preg_replace("/([^0-9\s\.]){1,5}/u", "", $data); 
```

和

```
$match = preg_match("/^[0-9]+([,.][0-9]{1,5})?$/u", $data); 
```

我更喜欢`preg_match`在这种情况下使用，我会返回`$match`.

# python - Requests.get 模块 python 获取 404-400

> ID：14468435
> 
> 赞同：0
> 
> 时间：2013-01-22T21:35:53.867
> 
> 标签：python, url

```
import requests
with open('urls.txt') as urls:
    for url in urls:
        r = requests.get(url)
        print r.status_code 
```

代码似乎有问题，“urls.txt”行包括“http://”，我认为由于这些脚本无法正常工作，因为我在网站在线时收到`404`了`400`状态代码！我怎样才能让网址出现在状态码旁边的终端中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:38:53.113

您要剥离`url`，它包括文件中的换行符：

```
import requests
with open('urls.txt') as urls:
    for url in urls:
        url = url.strip()
        r = requests.get(url)
        print url, r.status_code 
```

通过使用`.strip()`，您可以从字符串的开头和结尾删除空格（空格、制表符、换行符等）。

要打印带有状态代码的 URL，只需将其添加到`print`语句中。

# sql - 字段名称的 SQL 查询

> ID：14468445
> 
> 赞同：1
> 
> 时间：2013-01-22T21:36:09.917
> 
> 标签：sql

我表中的名字看起来像这样，

```
Select fname-ab, fname-wxyz, lname-ab, lname-wxyz
From table 
```

有没有办法编写一个查询来返回字段名称以结尾的所有字段的结果`-ab`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T21:41:10.843

大多数数据库都支持 information_schema.columns 表。您可以执行以下查询以获取符合您条件的所有列：

```
select column_name
from information_schema.columns
where table_name = 'table' and column_name like '%ab' 
```

然后，您可以将此列表放入 Excel，创建一个公式以在末尾添加逗号，将列表复制到 SQL 接口中，并修复语法（添加`select`、添加`from`、删除列表中的最后一个逗号）。

这实际上比描述更容易做到。

或者，您可以使用某种形式的动态 SQL，但其描述取决于数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:03:26.950

这会工作...

```
Declare @tableSchema Varchar(50) = 'dbo',
        @tableName Varchar(50) = 'table',
        @columns Nvarchar(Max),
        @sql Nvarchar(Max)

Select  @columns = Coalesce(@columns + ',','') + '[' + sc.name + ']'
From    syscolumns sc
Join    sysobjects so
        On  sc.id = so.id
Join    sys.schemas ss
        On  so.[uid] = ss.[schema_id]
Where   so.name = @tableName
And     ss.name = @tableSchema
And     sc.name like '%-ab'

Set     @sql = 'Select ' + @columns + '
                From    [' + @tableSchema + '].[' + @tableName + ']'

Exec    sp_executesql @sql 
```

# ruby-on-rails-3 - Rails：从 has_many 中提取值：通过模型中的关系

> ID：14468446
> 
> 赞同：0
> 
> 时间：2013-01-22T21:36:14.367
> 
> 标签：ruby-on-rails-3, associations, has-many-through

```
User   
  has_many :reservations, :dependent => :destroy
  has_many :events, :through => :reservations

Reservation
  belongs_to :user
  belongs_to :event

Event
  has_many :reservations, :dependent => :destroy
  has_many :attendees, :through => :reservations, :source => :user 
```

我想要的是一种方法`User`，我可以查询以找出该用户在给定事件中的状态。就像是：

```
 def attendee_status(event)
    res = self.reservations.where(event: event.id).first
    if res
      res.status
    else
      0
    end
  end 
```

我对关联语法感到困惑，除此之外......`column reservations.event does not exist`

每个用户对任何特定事件都*应该*只有一次预订……`first`假设是这样。（更好的方法？）

无论如何，模型`status`上的方法`Reservation`应该返回一个`%w[not_attending, awaiting_payment, payment_received]`

什么是“Rails 方式”来处理从模型到模型的这些关系/查找（甚至可能从更清晰的方法名称开始：`attendee_status(event)`）？！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T21:00:36.613

`User.reservations`是一个集合，`User.events`是一个集合。因为您的直通关联是通过 a 链接的，`belongs_to`所以两个集合的大小相同（假设所有预订都有一个事件）。

`User.reservations.event`不存在，但`User.reservations.first.event`会存在（假设至少有一个保留）。

第一个调用是`Reservation::event`类上的函数，第二个调用是类`Reservation#event`的实例。调用`Reservation::first`一个集合会给你一个实例。

我认为你只需要像这样修复这条线：

```
res = self.reservations.where(event_id: event.id) 
```

我希望这会有所帮助。

# ruby-on-rails - 设计子域范围内的注册和登录

> ID：14468448
> 
> 赞同：0
> 
> 时间：2013-01-22T21:36:45.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, scope, subdomain

我的网站可以通过更改（子）域来即时复制。我有一个域模型和我的大多数其他模型（如用户）`belongs_to :domain`。我不想要 SSO：每个子域都有自己的用户。

这两个步骤是：

*   在注册创建，保存之前，将 domain_id 设置为 Domain.find_by_name(request.host)
*   在会话创建中，使用电子邮件、密码和 domain_id 登录

但我没有找到正确的方法来做这一步......

非常感谢您的帮助，对我的英语感到抱歉！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:38:24.080

在设计 wiki 中有一个关于此的操作方法：

[https://github.com/plataformatec/devise/wiki/How-To:--Isolate-users-to-log-into-a-single-subdomain](https://github.com/plataformatec/devise/wiki/How-To:--Isolate-users-to-log-into-a-single-subdomain)

您还需要在创建用户时处理保存该信息，您可以在用户控制器中轻松完成此操作（或在用户注册时保存用户帐户的任何位置）。

# ios - selectedBackgroundView 修改 contentView 子视图

> ID：14468449
> 
> 赞同：23
> 
> 时间：2013-01-22T21:36:50.790
> 
> 标签：ios, uitableview

我正在使用自定义`backgroundView`和`selectedBackgroundView`子`UITableViewCell`类。这些单元格位于一个分组表中，因此我`UIImageView`根据单元格在`cellForRowAtIndexPath:`.

The problem I'm having is that when the cell is selected, its `selectedBackgroundView`modifies the contents of the `contentView`. 例如，在选择和/或突出显示一个单元格后，其中`UILabel`的`contentView`有其`backgroundColor`变化，`UIView`并且用作单元格分隔符的 不可见。

选择前： ![选择/突出显示之前](../Images/a222d061beb96a11c60072a18e5dab71.png) 选择后： ![选择/突出显示后](../Images/ee69922b6620f11add868abd11bf26fb.png)

我没有在任何地方看到这种行为。我需要做些什么来防止这种情况发生吗？是否有不同的方法来显示我应该采取的单元格选择/突出显示来防止这种情况？

*   注意：由于它是一个分组的表格视图，我设置了不同`backgroundView`的 s 和`selectedBackgroundView`s 与`UIImageView`s 来解释部分中顶部和底部单元格的圆角`cellForRowAtIndexPath:`，但是在使用 default 时我遇到了同样的问题`UITableViewSelectionStyleBlue`。

编辑1：

根据an0的回答，我覆盖了`setHighlighted:animated:`. 我不确定实现的可靠性如何，但这种方法可以维护子视图的`highlighted`和属性：`backgroundColor`

```
NSArray *recursiveAllSubviews = [self recursiveValueForKey:@"subviews"]; // Uses MTRecursiveKVC Cocoapod
NSArray *backgroundColors = [recursiveAllSubviews valueForKey:@"backgroundColor"];
[super setHighlighted:highlighted animated:animated];
if (highlighted) {
    [recursiveAllSubviews enumerateObjectsUsingBlock:^(UIView *view, NSUInteger index, BOOL *stop){
        if ([view respondsToSelector:@selector(setHighlighted:)]) {
            [view setValue:[NSNumber numberWithBool:NO] forKey:@"highlighted"];
        }
        id possiblyNull = [backgroundColors objectAtIndex:index];
        if (possiblyNull != [NSNull null]) {
            view.backgroundColor = possiblyNull;
        }
    }];
} 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-22T23:32:03.377

`UITableViewCell`突出显示/选择时自动做两件事：

1.  将其所有子视图设置`backgroundColor`为清除颜色（透明）。
2.  突出显示所有可以突出显示的子视图，例如`UIImageView`.

为了防止第一个问题，你必须在你的`UITableViewCell`子类中重写这两个方法：

```
- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated {
    [super setHighlighted:highlighted animated:animated];
    if (highlighted) {
        // Recover backgroundColor of subviews.
    }
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];
    if (selected) {
        // Recover backgroundColor of subviews.
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-17T16:35:47.987

set `cell.selectionStyle = UITableViewCellSelectionStyleNone` and override

```
- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated {
  if(highlighted) {
    self.contentView.backgroundColor = colorYouWantWhenHighlighted;
  } else {
    self.contentView.backgroundColor = colorYouWantWhenUnhighlighted;
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-18T20:55:14.930

就我而言，我有两个按钮，`UITableViewCell`它们的背景颜色正在被清除。这些按钮属于类型`GrayButton`，是我编写的派生的自定义类`UIButton`。我没有覆盖`UITableViewCell`方法，而是覆盖了`GrayButton`的`setBackgroundColor:`方法：

```
- (void)setBackgroundColor:(UIColor *)backgroundColor
{
    if (backgroundColor != [UIColor clearColor]) {
        [super setBackgroundColor:backgroundColor];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-20T11:22:11.663

在我的情况下，我切换到 contentView 并且效果更好

```
UIColor *backgroundColor = selected ? [UIColor redColor] : [UIColor clearColor];
self.contentView.backgroundColor = backgroundColor; 
```

而不是替换 selectedBackgroundView

```
UIView *selectionColor = [[UIView alloc] init];
selectionColor.backgroundColor = selected ? [UIColor redColor] : [UIColor clearColor];;
self.selectedBackgroundView = selectionColor;
[selectionColor release]; 
```

现在，仅当您点击并开始滚动的单元格不是选定的单元格时，此问题才可见。

# jquery - 使用 jQuery 和 Flask 在运行时将图像添加到图像滑块

> ID：14468454
> 
> 赞同：0
> 
> 时间：2013-01-22T21:37:08.837
> 
> 标签：jquery, python, ajax, flask, sijax

我需要我的 jQuery 图像滑块（我还没有）在几秒钟后更新以查看是否有新图像。它必须在不刷新页面的情况下执行此操作（异步）

为此，需要一个 javascript 函数向 Flask（通过 Sijax）发送请求以搜索新图像。通过 Sijax，Flask 将图像的来源返回给页面，因此 jQuery 可以更新图像滑块并添加新图像，而无需刷新页面。

（这怎么可能？是否有可以为我执行此操作的 jQuery 图像滑块？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:03:28.537

jquery 可以与[ajax异步工作](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
        url: 'yourpage',
        success: function(result) {
         //Do your thing
        }
}); 
```

现在由您决定它的工作方式

# java - 整数和字符串 TCP 连接

> ID：14468457
> 
> 赞同：2
> 
> 时间：2013-01-22T21:37:19.853
> 
> 标签：java, android, tcp

我实际上想在 Java 服务器和我的 Android 游戏之间编写 TCP 通信，以将数据保存到数据库中。曾经有一个全球排行榜。

实际上，我现在就编写了服务器，并且可以使用我编写的客户端连接到它，并希望稍后在 Android 中实现。这是来自客户端的一些代码：

```
 public void saveToDatabase(String name , int level, int killpoints){
        try {
            Socket soc = new Socket("localhost", PORT);
            DataOutputStream  out = new DataOutputStream(soc.getOutputStream());
            DataInputStream in = new DataInputStream(new BufferedInputStream(soc.getInputStream()));

            //to call the save statement!
            out.writeInt(0);
            //give the stuff 

            out.writeUTF(name);
            out.writeInt(level);
            out.writeInt(level);

            //close it
            out.close();
            in.close();
            soc.close();

        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
//          e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
//          e.printStackTrace();
        }
    } 
```

服务器现在所做的是它获取第一行并根据值检查要做什么。在服务器上发生这种情况：

```
public void run() {
        try {
            DataOutputStream out = new DataOutputStream (socket.getOutputStream());
//          DataInputStream  in = new DataInputStream(new InputStreamReader(
//                  socket.getInputStream()));
            DataInputStream in = new DataInputStream(new BufferedInputStream(socket.getInputStream()));
            Server.textArea.setText(Server.textArea.getText()+"Client connected: "+ clientNumber+ "\n");

            int firstLine = in.readInt(); //get first line for switch

            switch (firstLine) {
            case 0:
//              getting the whole objekt for the database in own lines!
                String name = in.readUTF();
                int level = in.readInt();
                int kp = in.readInt();
                Server.textArea.setText(Server.textArea.getText() + "SAVE: "
                        + name + " Level: " + level + " KP: " + kp + "\n");
//              Server.textArea.setText(Server.textArea.getText() + "SAVE called\n");       
                break;
            case 1:
                // else if return the top10
                Server.textArea.setText(Server.textArea.getText()
                        + "Return top10\n");
                // outp.write("asdf string");
                break;
            default:
                break;
            }

            out.close();
            in.close();
            socket.close();
            Server.textArea.setText(Server.textArea.getText()
                    + "Client disconnected: "+ clientNumber + "\n");
        } catch (Exception e) {
            System.out.println("IO error " + e);
        }
    } 
```

我将服务器端的所有内容记录到一个文本区域，并在服务器端得到它： ![控制台错误](../Images/b209e3e1641fd32d7013f8904eed37a4.png)

我承诺`com.saveToDatabase("test", 2, 123651);` 如果我将所有内容都以 UTF 格式发送，我实际上还会得到一些奇怪的东西：![在此处输入图像描述](../Images/6b6f3bed71fb9d41ac7692d0148b9297.png)

希望你能帮助我，甚至可以告诉我这是否也适用于 android。非常感谢。目前它没有正确转换字符串。

```
SAVE:  Level: 1908 KP: 1702065249
Client disconnected: 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:19:46.987

您的代码有太多问题。你写了一个 int (writeInt) 但你在服务器上读了一个字节 (read)。writeUTF 也只在线上放置一个字符串，但您读取一个带有新行的字符串。使用DataInputStream 读取对应的DataOutputStream。还要在套接字之前关闭输出流。

# ios - 绘制固定两个坐标IOS的形状

> ID：14468458
> 
> 赞同：1
> 
> 时间：2013-01-22T21:37:24.700
> 
> 标签：ios, xcode

我想用以下方式画一个箭头：

```
- (void) drawArrowWithContext:(CGContextRef)context atPoint:(CGPoint)startPoint withSize: (CGSize)size lineWidth:(float)width arrowHeight:(float)aheight andColor:(UIColor *)color
{
float width_wing = (size.width-width)/2;
float main = size.height-aheight;

CGContextSetFillColorWithColor(context, [color CGColor]);
CGContextSetStrokeColorWithColor(context,[color CGColor]);

CGPoint rectangle_points[] =
{
    CGPointMake(startPoint.x + width_wing, startPoint.y + 0.0),
    CGPointMake(startPoint.x + width_wing, startPoint.y + main),
    CGPointMake(startPoint.x + 0.0, startPoint.y + main), // left point
    CGPointMake(startPoint.x + size.width/2, startPoint.y + size.height),

    CGPointMake(startPoint.x + size.width, startPoint.y + main), // right point

    CGPointMake(startPoint.x + size.width-width_wing, startPoint.y + main),

    CGPointMake(startPoint.x + size.width-width_wing, startPoint.y + 0.0),
    CGPointMake(startPoint.x + width_wing, startPoint.y + 0.0),
};

CGContextAddLines(context, rectangle_points, 8);

CGContextFillPath(context);
} 
```

如您所见，我可以修复起始坐标 (CGPoint)startPoint，但我也想修复最终点。到目前为止，箭头始终指向下方。通过固定最后一点，我应该能够将它指向任何方向以及摆脱大小。我怎样才能在我的方法中插入这个？

# c++ - char 的实习工作 - 更好/等于查找

> ID：14468460
> 
> 赞同：1
> 
> 时间：2013-01-22T21:37:28.247
> 
> 标签：c++, c, lookup-tables

我尝试了以下方法：

```
int main()
{
    char* a = "sdwgfwegwe wefwef wefwefwefwysadqaw";
    char* b = "acd";
    char* c = "sdwgfwegwe wefwef wefwefwefwysadqaw";
    char* d;

    d = "acd";

    printf("%p\n", a);
    printf("%p\n", b);
    printf("%p\n", c);
    printf("%p\n", d);

    getchar();

    return 0;
} 
```

并且在输出（控制台）上，a 和 c 以及 b 和 d 具有相同的地址。我想过为每个角色实现一个查找表。这样做有什么好处/情况吗？以及编译器从中得到了什么（上面的示例，而不是查找表:)）？检查这个字符串是否已经被使用，如果没有，为给定的字符串保留内存 -> 将它返回给 a? 有没有人有一些书籍提示或链接，可以深入解释内部内存分配/管理，即使它依赖于编译器？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T21:39:40.447

字符串文字在 C 中被指定为不可修改。

并且来自 C99 基本原理[文档](http://www.open-std.org/jtc1/sc22/wg14/www/C99RationaleV5.10.pdf)：

> “该规范**允许实现共享具有相同文本的字符串副本**，将字符串文字放置在只读内存中，并执行某些优化”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T21:43:23.627

C++ 答案（第 2.14.5 节）：

> 是否所有字符串文字都是不同的（即，存储在不重叠的对象中）是实现定义的。

如何决定创建字符串文字对象完全取决于实现。一种实现方式可能与另一种实现方式不同。您的似乎将相同的字符串文字视为相同的对象。

# travis-ci - 如何在 Travis 中指定构建文件夹？

> ID：14468464
> 
> 赞同：55
> 
> 时间：2013-01-22T21:37:43.483
> 
> 标签：travis-ci

我有一个 github 存储库`user/repo`，但真正的项目位于子文件夹中`user/repo/project/build.sbt`
我应该在其中写什么`.travis.yml`以使 Travis 忽略顶部文件夹并仅在项目文件夹中工作？

受此启发，[我](https://stackoverflow.com/questions/14006810/how-do-i-get-travis-build-working-directory-in-travis-yml)尝试了以下方法，但没有成功：

```
env:
  global:
    - REPO="user/repo"
    - CI_HOME=`pwd`/$REPO
script: sh -c 'cd $CI_HOME/project' && sbt ++$TRAVIS_SCALA_VERSION package 
```

错误日志：

```
$ sh -c 'cd $CI_HOME/project' && sbt ++$TRAVIS_SCALA_VERSION package
Detected sbt version 0.12.2-RC1
/home/travis/build/user/repo doesn't appear to be an sbt project. 
```

理想情况下，应该有一种方法来指定构建文件夹，但让 Travis 处理构建命令。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-05-10T10:18:59.463

您也可以尝试在**.travis.yml**文件中添加以下行：

```
before_script: cd project 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2015-05-03T16:37:37.210

我尝试在我的 travis.yml 文件中使用它，但没有用

```
before_script: cd project 
```

然后我尝试了这个

```
before_install: cd project 
```

那行得通

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-02-05T00:15:12.167

只需编写一个 shell 脚本并使用它来构建您的项目。确保它在本地工作。这样的事情应该可以解决问题：

`build.sh`：

```
#!/bin/sh
cd $TRAVIS_BUILD_DIR/project
sbt ++$TRAVIS_SCALA_VERSION package 
```

`.travis.yml`：

```
script: build.sh 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-24T20:04:34.987

在您的 .travis.yml 文件中添加以下内容应该可以做到：

```
before_script: cd <project_name>
script:
  - sbt compile
  - sbt test 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-09-05T21:43:57.930

在您的 yml 文件中，`cd sub-folder`在运行构建命令之前添加一个“”步骤：

```
  默认：
    - 步：
        脚本：
          - 光盘项目
          - sbt ++$TRAVIS_SCALA_VERSION 包

```

gradle 项目示例：

```
  默认：
    - 步：
        脚本：
          - 光盘项目
          - chmod +x gradlew
          - ./gradlew assembleDebug

```

`"chmod: cannot access 'gradlew': No such file or directory"`如果`gradlew`文件与 git root 位于不同的文件夹中，这将修复类似的错误。

它也适用于使用 yml 文件的其他构建系统，例如[bitbucket-pipelines.yml](https://medium.com/rocknnull/setup-android-continuous-integration-ci-for-bitbucket-in-1-minute-9b72a4f1d745)。

# javascript - WP-eCommerce：获取基于两个类别的产品（返回仅存在于两个类别中的产品）

> ID：14468466
> 
> 赞同：0
> 
> 时间：2013-01-22T21:37:49.193
> 
> 标签：javascript, php, wordpress

我刚开始在 Wordpress 中开发，特别是使用 WP-eCommerce 插件，我遇到了几个问题。主要问题之一是根据特定产品在两个（或更多）类别中的存在来查询特定产品的能力。在这种情况下，我希望返回的唯一产品是同时存在于两个类别中的产品，而不仅仅是其中一个。

我知道这可以由我自己（原始 php）或仅使用 wp_query（或类似的东西）来完成。但是，我想尽可能地留在 WP-eCommerce 框架内，以限制所需的样式和冗余代码的数量。

为了澄清一下，这种情况的一个例子是这样的：

发送到 url 的查询字符串 -`http://example.com/?wpsc_product_category=cat1&wpsc_product_category=cat2`

然后由 WP-eCommerce 发送和处理，但只接受最近的`wpsc_product_category`查询，因此只返回 cat2 中存在的产品。

所以，总而言之，我的两个主要问题是：

1.  在 WP-eCommerce 框架中，我可以使用哪些选项来进行查询并返回同时存在于这两个类别中而不仅仅是其中一个类别的产品。

    *   如果那不可能，我可以使用什么样的 wordpress 选项
    *   创建我自己的函数怎么样？
2.  WP-eCommerce 中的查询过程到底是什么。至少，我可以访问格式化查询字符串的文件并让它查询两个类别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:58:33.970

那么，如果有人想创建一个基于两个产品类别的循环，比如“Soon”和“Skinny”，这应该可行吗？它仍然给了我第一类的所有结果..我错过了什么吗？

```
$args = array(
    'post_type' => 'wpsc-product',
    'tax_query' => array(
    'relation' => 'AND',
        array(
        'taxonomy' => 'category',   
        'field' => 'slug',
            'terms' => 'Soon'
        ),  
        array(
        'taxonomy' => 'category',
        'field' => 'slug',
        'terms' => 'Skinny'
        )
    )
);
$wp_query = new WP_Query( $args );
while( $my_query->have_posts() ) : $my_query->the_post(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:08:43.797

在我的一位同事的大力帮助下，这个问题得以解决。

基本上，由于 wpecommerce 是结构化的，它设计`WP-Query`为只真正管理一个变量来搜索。为了避免这种情况，您需要`$wp_query`在您自己的函数、您希望进行多个查询的文件等中覆盖该变量。

这是通过使用从 wordpress codex 中找到的代码来完成[的](http://codex.wordpress.org/Class_Reference/WP_Query#Taxonomy_Parameters)

摘抄：

```
 $args = array(
'post_type' => 'post',
'tax_query' => array(
    'relation' => 'AND',
    array(
        'taxonomy' => 'movie_genre',
        'field' => 'slug',
        'terms' => array( 'action', 'comedy' )
    ),
    array(
        'taxonomy' => 'actor',
        'field' => 'id',
        'terms' => array( 103, 115, 206 ),
        'operator' => 'NOT IN'
    )
)
);
$wp_query = new WP_Query( $args ); 
```

通过一些修改，我可以直接访问不同的分类变量关系并将多个搜索变量串在一起。

# iphone - 如何为 UINavigationController barbutton 项操作创建一个通用类？

> ID：14468467
> 
> 赞同：0
> 
> 时间：2013-01-22T21:37:49.910
> 
> 标签：iphone, objective-c, xcode, uinavigationcontroller

在我的应用程序中，我需要有一个 UINavigationController，它将在不同的视图控制器中具有不同的导航栏，并且基于此，它将具有需要不同操作的不同 UIBarButton 项。

目前我拥有的是一个导航控制器，我正在根据需要对其进行自定义，如果我需要添加任何按钮，我将在同一个类中编写它的操作方法。但是在很多地方，动作是相似的，所以我想为此创建一个通用控制器。我知道这是一种低效的方式，所以我在想是否有人可以指导我如何提高效率。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:19:18.713

`UIViewController`在基类中配置条形按钮项是正确的方法。

在基类中：

```
// Configure button.
button.target = self;
button.action = @selector(action:);

// Implement common action.
- (void)action:(id)sender {
    …
} 
```

在具有特殊作用的子类中：

```
// Implement special action.
- (void)action:(id)sender {
    …
} 
```

# ios - Restkit & CoreData 错误。调用 NSManagedObject 上的指定初始化程序失败

> ID：14468468
> 
> 赞同：0
> 
> 时间：2013-01-22T21:37:53.810
> 
> 标签：ios, core-data, restkit

我正在将我的应用程序从使用纯远程数据库更改为将远程数据库拉入本地数据库。当我尝试从远程数据库获取对象数组时出现此错误。

`CoreData: error: Failed to call designated initializer on NSManagedObject class 'Class'`

我不确定我做错了什么。这是我的restkit设置。

```
RKObjectManager *manager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:@"http://fake.herokuapp.com"]];
  NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"App" withExtension:@"momd"];
  NSManagedObjectModel *managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
  RKManagedObjectStore *managedObjectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:managedObjectModel];
  manager.managedObjectStore = managedObjectStore; 

  RKEntityMapping *classMapping = [RKEntityMapping mappingForEntityForName:@"Class" inManagedObjectStore:managedObjectStore]; 
  [classMapping        addAttributeMappingsFromDictionary:[Class      propertyMappings]];

  NSIndexSet *statusCodes = RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful); 
  RKResponseDescriptor *classDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:classMapping pathPattern:@"/class.json" keyPath:@"" statusCodes:statusCodes];
  [manager addResponseDescriptorsFromArray:@[classDescriptor]];
  [managedObjectStore createManagedObjectContexts];
   managedObjectStore.managedObjectCache = [[RKInMemoryManagedObjectCache alloc] initWithManagedObjectContext:managedObjectStore.persistentStoreManagedObjectContext];
  [RKObjectManager setSharedManager:manager]; 
```

这是我正在提出的请求，但它失败了（我认为是响应）。

```
 [manager getObjectsAtPath:@"class.json" parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult){
    NSLog(@"Success");

    }failure:^(RKObjectRequestOperation *operation, NSError *error) {}]; 
```

如果您需要其他任何东西，请告诉我。如果你能帮忙，我会是一个非常快乐的开发者。

谢谢，

-做

## **编辑**

这是propertMappings 返回的

```
+ (NSDictionary *) propertyMappings{return @{@"id" : @"iD", @"name" : @"name", @"image_url" : @"image_url"};} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:58:48.560

首先，我怀疑你会有一个名为“Class”的类，因为“Class”已经`typedef struct`在`objc.h`. 我建议将您的类名重构为`ABCClass`或未保留的名称。

其次，您通过调用添加属性映射`[Class propertyMappings]`。您应该改为执行以下操作：

```
[classMapping addAttributeMappingsFromDictionary:@{
 @"_id" : @"objectId",
 @"first_name":@"firstName",
 @"last_name":@"lastName"
 }]; 
```

不要忘记添加`identificationAttributes`到映射中，以防止 Core Data 中出现重复的对象。

最后，您是否在设置的任何阶段都创建了实际的 sqlite 文件？在初始化结束时尝试以下操作，就在您调用之前`-(void)createManagedObjectContexts`：

```
[managedObjectStore createPersistentStoreCoordinator];

NSString *storePath = [RKApplicationDataDirectory() stringByAppendingPathComponent:@"App.sqlite"];

NSError *error;

NSPersistentStore *persistentStore = [managedObjectStore addSQLitePersistentStoreAtPath:storePath fromSeedDatabaseAtPath:nil withConfiguration:nil options:nil error:&error];
NSAssert(persistentStore, @"Failed to add persistent store with error: %@", error); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:24:33.540

那么问题实际上是我试图拉入的实体是通过我的模型中的一些关系嵌套的，所以它不是父级。它导致了一个错误。我不得不稍微调整一下我的 api，一切正常。

谢谢你的帮助。

-做

# f# - 这个控制流而不是尝试捕获的正确或简单方法是什么？

> ID：14468470
> 
> 赞同：1
> 
> 时间：2013-01-22T21:37:57.280
> 
> 标签：f#

我找不到任何简单的（与`try catch`相当简单的方法相比）方法来做到这一点：

```
try
    Some (line.Split delimiter |> Array.map Int32.Parse)
with
    |_ -> None 
```

一个不好的（调用`Parse`两次）方法是这样的：

```
let array = line.Split delimiter
let parseSucceed =
    array |> Array.exist (Int32.TryParse >> fst >> not)
          |> not
if parseSucceed then Some (array |> Array.map Int32.Parse) else None 
```

有没有做这些任务的标准方法？我是否必须编写一个递归函数来处理这个问题？

如果输入不是数组而是流/序列怎么办？

### 更新：

@Daniel 的方法很棒。

```
module Seq =
    let tryCatch myFun (x: seq<_>) =
        let rec loop acc (e: IEnumerator<_>) =
            if e.MoveNext() then
                match myFun e.Current with
                | Some v -> loop (v::acc) e
                | None   -> (false, acc |> List.rev |> List.toSeq)
            else
                (true, acc |> List.rev |> List.toSeq)
        use e = x.GetEnumerator()
        loop [] e

let parse x =
    printf "%d " x // log when the function is called.
    if x > 3 then None else Some x

let tt myFun x =
    let y = Seq.tryCatch myFun x
    if fst y then
        printfn "yes %A" (y |> snd |> Seq.toArray)
    else
        printfn "no %A" (y |> snd |> Seq.toArray)

tt parse [| 0;2;1;2;4;1;2 |]
tt parse [| 0;2;1;2 |]

> 
0 2 1 2 4 no [|0; 2; 1; 2|]  // parse is called minimum number of times
0 2 1 2 yes [|0; 2; 1; 2|] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:58:22.543

你所拥有的是`'a option array`并且你想要一个`'a array option`where any`None`会导致整个值成为`None`。你可以定义一个这样的函数：

```
let lift a = 
         Array.foldBack 
                    (fun curr state -> Option.bind 
                                              (fun l -> Option.map (fun c -> c :: l) curr) state) a (Some []) 
         |> Option.map List.toArray;; 
```

用法：

```
lift [| (Some 10); (Some 12); (None); |] 
```

> 验证它：int [] 选项 = 无

```
lift [| (Some 10); (Some 12); |] 
```

> 验证它：int [] 选项 = Some [|10; 12|]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:28:07.677

如果您需要使用无限序列或流，最好将大函数拆分为几个较小的函数，您可以在需要时将它们组合起来：

```
let split delimiters (line: String) =
    line.Split delimiters
    |> Array.toSeq
let parse =
    Seq.map
        (fun x ->
            let (success, value) = Int32.TryParse x
            if success then Some value else None
        )
let isParseSucceed vals =
    vals
    |> Seq.forall Option.isSome
    |> fun b -> if b then Some (vals |> Seq.choose id) else None 
```

注意我故意让一切都`Seq`支持无限序列。
此外，`isParseSucceed`遍历序列两次，但另一种方法是遍历一次**并**解包`Option`（如果找到单个`None`值可能变得无用），这看起来更昂贵。

```
// Usage
let x1 = 
    "5,20,42,10"
    |> split [| ',' |]
    |> parse
    |> isParseSucceed
x1 |> printf "%A\n"
// output: Some (seq [5; 20; 42; 10])

let x2 = 
    "5,20,42,foobar,10"
    |> split [| ',' |]
    |> parse
    |> isParseSucceed
x2 |> printf "%A\n"
// output: null

// making an infinite sequence
// with all values are proper Int32's in a string form
// but the 5th value is "FOOBAR"
// We are not using `split` as it is not needed here
let x3 = 
    Seq.initInfinite (fun i -> if(i=5) then "FOOBAR" else i.ToString())
    |> parse
    |> isParseSucceed
x3 |> printf "%A\n"
// output: null

// the following will obviously hang
let x4 = 
    Seq.initInfinite (fun i -> i.ToString())
    |> parse
    |> isParseSucceed
x4 |> printf "%A\n" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T21:59:32.313

你可以这样做：

```
let fields = line.Split(delimiter) 
let parsedFields = 
  fields
    |> Seq.map Int32.TryParse
    |> Seq.takeWhile fst
    |> Seq.map snd
    |> Seq.toArray
if parsedFields.Length = fields.Length 
then Some parsedFields
else None 
```

或者，如果你想要一些更可重用的东西：

```
module Seq =
  let tryMap f (s: seq<_>) =
    use e = s.GetEnumerator()
    let res = ResizeArray()
    let rec loop() =
      if e.MoveNext() then
        match f e.Current with
        | Some x -> res.Add(x); loop()
        | None -> None
      else Some(seq res)
    loop()

type System.Int32 with
  static member tryParse s =
    match Int32.TryParse(s) with
    | true, i -> Some i
    | _ -> None

//Usage
line.Split(delimiter) |> Seq.tryMap Int32.tryParse 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T21:50:54.327

这应该有效：

```
let optInt32 str =
    match Int32.TryParse str with
    | false, _ ->
        None
    | true, value ->
        Some value

let tryParseDelimited (line : string) (delimiter : char) =
    let pieces = line.Split delimiter
    let parsedPieces = Array.choose optInt32 pieces
    if pieces.Length = parsedPieces.Length then
        Some parsedPieces
    else
        None 
```

# javascript - 如何获取点击元素jquery的en id

> ID：14468473
> 
> 赞同：4
> 
> 时间：2013-01-22T21:38:04.393
> 
> 标签：javascript, jquery

我想获取一个 id 作为被点击的 div 的字符串。有可能吗？

# HTML

```
<div id="test">
    <div class='button' id="a" ><p>Click 1</p></div>
    <div class='button' id="b" ><p>Click 2</p></div>
    <div class='button' id="c" ><p>Click 3</p></div>
    <div class='button' id="d" ><p>Click 4</p></div>
</div> 
```

我可以做这样的事情：

```
 $("#a").click(function() {
      /* do some action with this div */
  }); 
```

但是我想检测一下刚刚点击的div的id，因为我会有很多这样的div，一遍又一遍地重写同样的代码是没有意义的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T21:39:35.940

```
$("#a").click(function() {
    var id = this.id;
}); 
```

如果您需要`click`为所有元素设置事件`.button`，这是一种捷径：

```
$(".button").click(function(e) {
    var id = this.id;  // or e.target.id;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T21:39:49.510

```
$("div.button").click(function() {
    console.log(this.id);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T21:41:46.747

```
$(this).attr('id') 
```

会给你 id，但如果你想访问 div，你可以使用

```
$(this).parent('div') 
```

这只会在直接父级是 div 时返回，如果想找到你可以使用

```
$(this).parents('div') 
```

# php - sql查询去除随机字符

> ID：14468475
> 
> 赞同：0
> 
> 时间：2013-01-22T21:38:09.760
> 
> 标签：php, mysql

在我的数据库中，我有很多书籍的信息，但是这些书籍的 isbn-10 条目被弄乱了，因为我忘记在它们第一次输入数据库时​​从它们中删除“-”，例如在字段`description`我可能有这样的条目，

```
ISBN10: 0-470-945-176
by Paul D. Kimmel
Publisher: John Wiley &amp; Sons
Copyright year: © 2011 
```

但是我的大部分数据都是这样的

```
ISBN10: 0470945176
by Paul D. Kimmel
Publisher: John Wiley &amp; Sons
Copyright year: © 2011 
```

我应该使用什么 mysql 查询从中删除“-”，`description`以便我的数据像第二个示例一样正确格式化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:40:26.213

使用 MySQL[`REPLACE`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)字符串函数。

```
UPDATE books SET description = REPLACE(description, '-', ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:43:42.037

我会研究一个替换函数，可能还有 mySql 的正则表达式功能，这取决于描述的其他部分是否包含“-”字符。

[MySQL 字符串替换](https://stackoverflow.com/questions/5956993/mysql-string-replace) [http://www.regular-expressions.info/mysql.html](http://www.regular-expressions.info/mysql.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T21:41:08.203

[命令](http://dev.mysql.com/doc/refman/5.0/en/replace.html)：

```
UPDATE TableName SET `description` = REPLACE(`description`, '-', '') 
```

# jquery - jquery在“选择”标签或组合框上滑动上下效果

> ID：14468476
> 
> 赞同：1
> 
> 时间：2013-01-22T21:38:12.070
> 
> 标签：jquery, animation, combobox

我有一个带有以下选项的“选择”标签：

```
<select>
  <option value="blue">Blue</option>
  <option value="red">Red</option>
  <option value="green">Green</option>
</select> 
```

我想使用 jquery 添加“slideUp”和“slideDown”效果，但我找不到一个简单的例子来满足我的需要。效果应该类似于这个组合框示例：[Telerik Combobox](http://demos.telerik.com/aspnet-ajax/combobox/examples/configurator/defaultcs.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T22:13:57.693

这是一种可能的解决方案，您需要使用样式：

```
$(function(){
    $.fn.extend({
        slidingSelect: function(options)
        {
            var select= $(this);
            var selector=select.selector;

            var selectedValue=select.val();

            if(selectedValue=="undefined")
                selectedValue=select.find("option:first").val();                

            var divToggle=$("<div>"+selectedValue+"</div>").attr({id:select.attr("id")+"Toggle"}).css({width:select.width()}).click(function(){
                $(selector).slideToggle();
            }).insertBefore(select);

            select.attr("size",6);  
            select.change(function(){
                divToggle.html(select.val());
                $(selector).slideToggle();
            });

        }       
    });
    $("#colors").hide().slidingSelect();

});
```

```
div#colorsToggle
{
    display:block;
    padding:5px;
    border:1px solid black;

}

.select_style{
  position: absolute; 
 }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<select id="colors" class="select_style">
  <option value="blue">Blue</option>
  <option value="red">Red</option>
  <option value="green">Green</option>
</select>
```

此方法使用一个函数扩展 jquery，该函数根据选择的名称`slidingSelect`创建一个div，当单击该切换 div 时，就像在 Telerik 控件中一样。您将在 CSS 中设置样式以创建更好看的 UI。`toggle``slidesDown``#{ID of Select}Toggle`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T21:57:08.550

我猜有一个选择（选项）隐藏。当我按下按钮时，选择出现在按钮下方。当我选择任何选项时，按钮采用选择的值，选择消失。

希望您的代码将被分享。:)

# php - 在网页上显示度数符号

> ID：14468477
> 
> 赞同：7
> 
> 时间：2013-01-22T21:38:19.113
> 
> 标签：php, symbols

我有一个从元数据中提取 GPS 坐标并将结果导入数据库的程序。然后我在网页上使用 PHP 显示数据。

我的问题 - 我最近创建了一个新模板，但无论出于何种原因，它不再显示度数符号“°”而是“�”。

我只是觉得奇怪的是它适用于一个模板，而不适用于另一个？

我试过改变字体，但没有运气

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T21:45:12.390

请参见[学位字符](http://www.fileformat.info/info/unicode/char/b0/index.htm)。

具体来说，HTML 实体：`&deg;`.

检查两个模板中的文档字符串和字符编码是否正确，以确保它们是正确的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-16T18:43:34.817

您可以使用：

`utf8_encode('YOUR TEXT');`

[utf8_encode](http://php.net/manual/en/function.utf8-encode.php)将字符串数据从 ISO-8859-1 编码转换为 UTF-8。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T21:56:32.670

1.  使用 UTF-8 编码保存您的 PHP 文件。
2.  使用 charset=UTF-8 提供您的 PHP 文件。
3.  使用 charset=UTF-8 在 HTML 中添加 META 标记。

这将解决（几乎）您所有的 unicode 字符问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T21:57:04.677

当您输入或从数据库中提取数据时，请使用`htmlentities()`

您可以在此处找到有关此功能的良好指南[http://php.net/manual/en/function.htmlentities.php](http://php.net/manual/en/function.htmlentities.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-19T06:56:04.463

html中的摄氏度

```
<span>&#8451;</span> 
```

# laravel - Laravel query.php 中的硬编码 id 列

> ID：14468478
> 
> 赞同：4
> 
> 时间：2013-01-22T21:38:20.183
> 
> 标签：laravel

`id`由于 query.php 中的某些方法硬编码为列，我在 Laravel 中遇到了一些查询问题。因此，如果您在数据库中使用除 id 之外的其他名称，这些函数将惨遭失败。

在我的情况下，我有一个现有的 MSSQL 数据库，用户表的标识列`UserId`不是`id`。在我的情况下，问题出现在用户登录后 - 脚本 barfs：

```
SELECT TOP 1 [userid] FROM [User] WHERE [id] = ? 
```

当试图检索用户数据时，Fluent 似乎调用了其中一个有问题的函数，在 query.php 中找到。有没有人解决过这个问题，如果有，你是如何处理的？

更新：

`Auth::check()`我确实使用 Fluent 作为 Auth 驱动程序，并且在执行or时触发了错误`Auth::guest()`。堆栈跟踪如下所示：

```
#0 C:\laravel\database\connection.php(183): Laravel\Database\Connection->execute('SELECT TOP 1 [u...', Array)
#1 C:\laravel\database\query.php(709): Laravel\Database\Connection->query('SELECT TOP 1 [u...', Array)
#2 C:\laravel\database\query.php(653): Laravel\Database\Query->get(Array)
#3 C:\laravel\database\query.php(624): Laravel\Database\Query->first(Array)
#4 C:\laravel\auth\drivers\fluent.php(21): Laravel\Database\Query->find('162')
#5 C:\laravel\auth\drivers\driver.php(79): Laravel\Auth\Drivers\Fluent->retrieve('162')
#6 C:\laravel\auth\drivers\driver.php(65): Laravel\Auth\Drivers\Driver->user()
#7 C:\laravel\auth\drivers\driver.php(55): Laravel\Auth\Drivers\Driver->check() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T22:12:41.423

您的问题有两种解决方案：

1.  不要使用 Eloquent（我从你的问题推断出你正在使用）。相反，请使用 Fluent，例如

    ```
    $users = DB::table('users')->where('UserId', '=', 1)->first(); 
    ```

    虽然这种方法是有限制的，而且会阻止你使用 Eloquent。

2.  像这样定义你的模型：

    ```
    class User extends Eloquent {
        public static $key  = 'UserId';
        public static $table = 'users';
    } 
    ```

    where`$key`是主键`$table`的名称，是表的名称（如果它不是模型名称的复数，则很有用）。我猜这看起来不错，但不幸的是，如果您使用关系可能还不够。查看此[解决方法](http://forums.laravel.io/viewtopic.php?pid=23313#p23313)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T11:14:26.923

在 Laravel 4.* 中，自定义 id 应该被重新定义

```
class User extends Eloquent {
    protected $primaryKey = "UserID";
} 
```

# javascript - 在 JS 中验证开放时间之间的日期

> ID：14468483
> 
> 赞同：0
> 
> 时间：2013-01-22T21:38:43.243
> 
> 标签：javascript, validation, date, datetime

我想知道在商店的正确营业时间内验证日期的最佳方法是什么...

我正在为一位高尔夫专业人士创建一个网站，并正在接受有关课程的预订。我已将 fullCalendar 用于日历并将其与谷歌日历集成，因此可以轻松地将其同步到专业人士的手机等。

作为日历的一部分，当客户点击一个时间段时，fullcalendar 会为我提供一个日期对象。我想验证这个选定的时段是否在商店的营业时间内，以便上课等。

时间将在某个时候从数据库表中检索，但如果效果最好，我可以将它们以 JSON 格式返回到页面上 - 但这不是这个问题的目的......

营业时间因星期几和“季节”而异 [夏令时 -vs- 冬令时]

```
ie:
 Summer Times
    Monday = 10:00 - 21:00
    Tuesday = 10:00 - 21:00
    Wednesday = 10:00 - 21:00
    Thursday = 10:00 - 21:00
    Friday = 10:00 - 21:00
    Saturday = 08:00 - 18:00
    Sunday = 08:00 - 18:00

 Winter Times
    Monday = CLOSED
    Tuesday = 10:00 - 18:30
    Wednesday = 10:00 - 18:30
    Thursday = 12.00 – 20.30
    Friday = 12.00 – 20.30
    Saturday = 08:00 - 18:00
    Sunday = 08:00 - 18:00 
```

验证这一点的“最佳”方法是什么？

最好的选择是简单地做嵌套的 if/switch 语句..

```
[sudo code]
if(summer}
{
    switch(date.getDay())
    {
    case 1:
          if(time > mondayOpeningTime && time < mondayCloseTime)
          {
            return true;
          }
          else
          {
            return false;
          }
      break;
    case 2:
      execute code block 2
      break;
    .....
    default:
      code to be executed if n is different from case 1 and 2
    }
}
else
{
    // Same as summer logic but for winter times etc..
} 
```

或者有没有更好的方法来做到这一点？

为长篇文章/问题道歉，但提前感谢任何花时间阅读和回复它的人:)

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-15T09:03:29.057

这是我写的东西。相当粗糙，但考虑到关闭时间在午夜之后的情况。

也可在 Gist 获得：[https ://gist.github.com/vtntimo/b5c724371bfb27bfb080](https://gist.github.com/vtntimo/b5c724371bfb27bfb080)

如果你创造了改进，请联系我:)

```
/*
    Operating hours check
    =====================================

    - Checks if something is open right now
    - Supports closing times going over midnight
    - Feel free to use in whatever you need :)
    - If you make improvements, please inform me!

    Example:

    // Setting operating hours
    // Key 0 is sunday, 1 is monday and so on
    var hours = [
        // Sunday
        {
            open: '08:00',
            close: '16:00'
        },

        // Monday
        {
            allday: true // Open all day
        },

        // Tuesday
        false, // Closed all day

        // Wednesday
        {
            open: '08:00',
            close: '16:00'
        },

        // Thursday
        {
            open: '08:00',
            close: '16:00'
        },

        // Friday
        {
            open: '08:00',
            close: '16:00'
        },

        // Saturday
        {
            open: '08:00',
            close: '16:00'
        },
    ];

    if(isOpen(hours)) {
        alert("We're open!");
    }
    else {
        alert("We're closed!");
    }
*/
function isOpen(hours) {
    var now = new Date();
    var today = now.getDay();

    var yesterday = today - 1;
    if(yesterday < 0) yesterday = 6;

    // Check today's opening hours
    if(hours[today]) {

        // It's open all day today
        if(hours[today].allday) {
            return true;
        }

        // Not open all day
        else {
            var open = hours[today].open;
            var close = hours[today].close;

            // Check if the location is open
            if(checkOpenHours(now,now,open,close)) {
                return true;
            }
        }

    }

    // Check yesterday's opening hours in case of closing after midnight
    if(hours[yesterday]) {

        // Not open all day (possibly closing after midnight)
        if(!hours[yesterday].allday) {
            var open = hours[today].open;
            var close = hours[today].close;

            var yesterday_date = new Date(now.getFullYear(), now.getMonth(), (now.getDate()-1), 0, 0, 0, 0);
            if(checkOpenHours(now,yesterday_date,open,close)) {
                return true;
            }
        }

    }

    // Not open
    return false;
}

/*
    Check if "now" is within operating hours
*/
function checkOpenHours(now, operatingDate, open, close) {
    // Splitting times to array
    var o = open.split(":");
    var c = close.split(":");

    // Hours not in proper format
    if(o.length < 2 || c.length < 2) {
        return false;
    }

    // Converting array values to int
    for(var i = 0; i < o.length; i++) {
        o[i] = parseInt(o[i]);
    }
    for(var i = 0; i < c.length; i++) {
        c[i] = parseInt(c[i]);
    }

    // Set opening Date()
    var od = new Date(operatingDate.getFullYear(), operatingDate.getMonth(), operatingDate.getDate(), o[0], o[1], 0, 0);

    // Set closing Date()
    var closingDay = operatingDate.getDate();

    // Closing after midnight, shift day to tomorrow
    if(o[0] > c[0]) {
        closingDay++;
    }
    var cd = new Date(operatingDate.getFullYear(), operatingDate.getMonth(), closingDay, c[0], c[1], 0, 0);

    // Is within operating hours?
    if(now > od && now < cd) {
        return true;
    }
    else return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:53:22.487

您需要 2 个数组：openingTimes 和 closingTimes。第一个维度是季节，第二个维度是星期几。那么它只是：

```
return ((time > openingTimes[season, dayOfWeek]) && (time < closingTimes[season, dayOfWeek])); 
```

# vb.net - VB.Net：查找表中行数的代码无法正常工作

> ID：14468488
> 
> 赞同：0
> 
> 时间：2013-01-22T21:38:54.580
> 
> 标签：vb.net, sql-server-2008

我有这个函数，如果 id 存在则返回 1，如果不存在则返回 0。调试时我发现发送到 sqlserver 的查询是正确的并返回 1 行，我在 ds 表计数 =1 中也看到 1 但函数返回 0。有没有更好的方法来做到这一点？问题是什么？

```
Public Function check_id() As Integer
    Try
        connexion = New SqlConnection(chaine_de_connexion)
        da = New SqlDataAdapter("select * from table_x where id=5", connexion)
        ds = New DataSet
        da.Fill(ds, "Info")
        If ds.Tables("Info").Rows.Count > 0 Then
          Return 1
        Else
          Return 0
        End If
    Catch ex As Exception
       Return 0
    End Try
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:44:52.737

该`check_id()`函数返回 YES 或 NO.. 那么为什么不使用`Boolean`数据类型呢？

如果您将返回类型更改为`Boolean`您可以执行以下操作：

```
Return 0 < ds.Tables("Info").Rows.Count 
```

# java - 使用 JAVA API 的 SOLR 索引

> ID：14468489
> 
> 赞同：1
> 
> 时间：2013-01-22T21:38:54.483
> 
> 标签：java, api, solr, indexing

有人可以帮我解决这个问题吗，我知道 Solr 可以通过 HTTP API 使用 XML、JSON 等进行索引。但是无论如何在java api调用中索引和/或查询Solr，而不是通过网络。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:40:59.517

您可以`solrj`用作 java API。见[https://wiki.apache.org/solr/Solrj](https://wiki.apache.org/solr/Solrj)

# android - Android：如何对标准 android 短信 GUI 进行编程更改

> ID：14468494
> 
> 赞同：1
> 
> 时间：2013-01-22T21:39:02.820
> 
> 标签：android, button, sms

我想编写一个 android 应用程序来更改 android 标准消息 sms GUI，给它一个额外的发送按钮。一个发送按钮应该是通常的按钮，另一个应该是使用我的应用程序发送消息的按钮。如何在 android 标准短信 GUI 中添加这个额外的按钮？有人有关于如何执行此操作的示例代码吗？

亲切的问候本杰明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:43:16.107

好的，这对于市场上的手机是**无法做到的。**您将需要掌握源代码并为用户提供自定义 ROM 闪存。

但是，作为另一种选择，您可以构建自己的 SMS 应用程序并让用户安装。当用户需要发送短信时，系统会询问他们是否需要使用我们默认/您的应用。这种方式是一种更清洁的方法，对用户来说更容易获得。

# treeview - Google Drive SDK - 使用 Google Drive 目录结构填充 .NET TreeView

> ID：14468499
> 
> 赞同：0
> 
> 时间：2013-01-22T21:39:25.183
> 
> 标签：treeview, directory, structure, google-drive-api

由于您可能不关心的原因，我正在构建一个 VB.NET Google Drive 文件资源管理器应用程序。我正在使用 google drive v2 sdk，并且我正在尝试使用用户的整个 Google Drive 目录结构（不是文件，只是文件夹）填充树视图控件。我的代码运行良好，但是，正如我所担心的那样，它对于拥有大量嵌套文件夹的用户来说，这需要几分钟时间。我正在使用后台工作线程使用委托函数填充树视图。任何人都可以提出一种更有效的方法吗？

从我的代码中调用 NewPopulate() 来创建后台工作线程。从这里开始：

```
Private Sub NewPopulate()
    TreeView1.Nodes.Add(ActiveUser.Email, ActiveUser.Email)
    bwPopulateTree = New BackgroundWorker
    AddHandler bwPopulateTree.DoWork, AddressOf PopulateTreeStart
    AddHandler bwPopulateTree.RunWorkerCompleted, AddressOf PopulateTreeFinished
    bwPopulateTree.RunWorkerAsync()
    cmbActiveUsers.Enabled = False
End Sub

Private Sub PopulateTreeStart()
    Dim children As ChildList = FileManager.GetFoldersInFolder(ActiveUser.DriveService, "root")
    PopulateTreeLoop(ActiveUser.Email, children)
End Sub

Private Sub PopulateTreeFinished()
    lblToolStripStatus.Text = "Directory listing completed."
    SaveTree()
    cmbActiveUsers.Enabled = True
End Sub

Private Sub PopulateTreeLoop(nodeKey As String, ByVal childList As ChildList)
    If Not childList Is Nothing Then
        Dim user As GoogleUser = ActiveUser
        For Each child As ChildReference In childList.Items
            Dim successful As Boolean = False
            If TreeView1.InvokeRequired Then
                successful = TreeView1.Invoke(New m_FindAddNode(AddressOf FindAddNode), {nodeKey, child})
            Else
                successful = FindAddNode(nodeKey, child)
            End If
            Dim children As ChildList = FileManager.GetFoldersInFolder(user.DriveService, child.Id)
            If Not children Is Nothing Then
                PopulateTreeLoop(child.Id, children)
            End If
        Next
    End If
    End Sub

Private Function FindAddNode(nodeKey As String, child As ChildReference) As Boolean
    'Returns true if successful
    Try
        Dim service As DriveService = ActiveUser.DriveService
        Dim file As Drive.v2.Data.File = service.Files.Get(child.Id).Fetch()
        Dim node() As TreeNode = TreeView1.Nodes.Find(nodeKey, True)
        Dim strTitle As String
        If file.FileExtension Is Nothing Then
            strTitle = file.Title
        Else
            strTitle = If(file.Title.EndsWith(file.FileExtension), file.Title, file.Title + file.FileExtension)
        End If
        node(0).Nodes.Add(file.Id, strTitle)
        Return True
    Catch ex As Exception
        Return False
    End Try
End Function 
```

这是我的 FileManager 类函数：

```
Public Shared Function GetFoldersInFolder(service As DriveService, ByVal folderId As String) As ChildList
    Dim request As Google.Apis.Drive.v2.ChildrenResource.ListRequest = service.Children.List(folderId)
    request.Q = "mimeType='application/vnd.google-apps.folder'"
    Return request.Fetch()
End Function 
```

抱歉，我不得不包含这么多代码，但我试图只包含必要的代码。我也已经有代码可以让我缓存目录结构，但我认为这很难实现，因为我必须检查以确保事情没有改变......我真的只需要一种更快的检索方式目录结构。我知道这样做的另一种方法是让树视图仅在用户单击父文件夹后填充子文件夹，但我想避免每次等待服务器响应每个请求时的短暂暂停用户单击一个新文件夹。

我还有一个检索所有文件夹的功能：

```
Public Shared Function GetAllFolders(service As DriveService) As FileList
    Dim request As Google.Apis.Drive.v2.FilesResource.ListRequest = service.Files.List
    Dim request2 As Google.Apis.Drive.v2.FilesResource.ListRequest = service.Files.List
    request.Q = "mimeType='application/vnd.google-apps.folder'"
    Return request.Fetch()
End Function 
```

但是我想不出任何有效的方法来解析该列表以提出目录结构......有什么想法吗？我真的很感激帮助。我已经为此工作了几天...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T06:30:54.797

Your method is reasonable. Sorry it is taking a long time with large Google Drives. I certainly think that you are on the right idea in only populating the child nodes when the user attempts to expand the parent. The pause there is expected, but you can mitigate it somewhat by displaying some feedback to the user, e.g. `Loading...`.

In this age of cloud computing, users expect some delay when loading data from a remote service. This will improve in the future as network speeds improve.

# java - 注释 Spring 视图类

> ID：14468500
> 
> 赞同：0
> 
> 时间：2013-01-22T21:39:27.000
> 
> 标签：java, spring, view, annotations

我有一个类扩展了 Spring 的 AbstractExcelView 类，它呈现一个 XML 文件。在这个类中，我正在注入我的 Service bean 以供使用。我正在自动装配和组件扫描我的类，我也想对这个视图类做同样的事情，但我不清楚如何（或者是否可以做到）。这是我试图从配置中注释的内容：

```
<bean id="export.xls" class="com.my.views.ReportExcelView">
<property name="url">
    <value>/excel/template</value>
</property>
<property name="service" ref="testingService"/> 
```

我可以用@Component 注释类，用@Autowired 注释服务，但我不知道注释URL 的策略。我真正想做的是在 buildExcelWorkbook() 调用中调整它（基于请求中的某些内容），但似乎在此之前完成了一些初始化，因为我在尝试使用我的 excel 模板时遇到错误表示它没有 Excel 工作表句柄的方法。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:58:08.497

所以你的 ReportExcelView 现在可能看起来像这样。确保使用@Resource 连接一个简单的字符串。

```
package com.ex.springbasicex.view;
@Component
public class ReportExcelView{
    @Resource(name="myUrl")
    String url;

    @Autowired
    Service service;

    public String getUrl() {
        return url;
    }

    public void setUrl(String url) {
        this.url = url;
    }
} 
```

您的上下文配置可能应该像下面使用扫描的那样。下面是如何设置 myUrl 字符串资源。

```
<context:component-scan base-package="com.ex.springbasicex.view"  />
<bean id="myUrl" class="java.lang.String" >
    <constructor-arg>
        <value>/excel/template</value>
    </constructor-arg>
</bean> 
```

# matlab - 关联大矩阵

> ID：14468508
> 
> 赞同：3
> 
> 时间：2013-01-22T21:39:55.170
> 
> 标签：matlab, optimization, correlation

我有一个包含 100000 列（变量）和 100 行（观察）的矩阵。我需要将 (pearson) 与所有相关联。我使用 corrcoef，因为我发现它比 corr 快得多。当我采用 25000 列的矩阵时，操作需要 15 秒。但是，当我在几分钟后将大小增加到 50000 时，我的 matlab RAM 增加到 16Gb，并且 matlab（包括 windows）开始冻结。有什么建议么？有拆分专利吗？逐列计算变得非常低效......

感谢您的帮助，瓦迪姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:56:12.447

如果没有 64 位版本的 matlab 加上足够的内存来存储该大数组，或者以其他方式存储该数组，那么对如此大的数组进行蛮力计算是不可能的。您可以离线存储阵列，只在使用时带入您需要的东西。

此外，如果这些数字总是小整数，则使用 uint8 或 int8，或逻辑数组，甚至是单个数组，与双数组相比，所有这些都将减少内存需求。如果数组是稀疏的，那就更好了，然后使用稀疏数组操作。

另一种方法是使用[并行计算工具箱](http://www.mathworks.com/products/parallel-computing/ "并行计算工具箱")（和[MATLAB 分布式计算服务器](http://www.mathworks.com/products/distriben/ "MATLAB 分布式计算服务器")）同时利用多台机器的内存。这将允许您编写：

```
matlabpool open <a large number>
x = distributed.zeros( 100000, 100 ); 
```

另请参阅[此线程](http://www.mathworks.com/matlabcentral/newsreader/view_thread/285475)以处理大矩阵...

# jquery - 为用户格式化价格但保存为 INT

> ID：14468511
> 
> 赞同：-1
> 
> 时间：2013-01-22T21:40:15.913
> 
> 标签：jquery, currency

我使用 wordpress 和插件[JQ Price Format](http://jquerypriceformat.com/#examples)来格式化 Input['preco-novo'] 上的数字，因此用户键入 eq 3400000 并显示 34.000,00。问题是我需要将它保存为 INT，而这个插件正在编辑数字并保存为浮点数。有任何想法吗？

```
 jQuery(document).ready(function ($) {  $('input[name="wpcf[preco-novo]"]').priceFormat({
    prefix: '',
    centsSeparator: ',',
    thousandsSeparator: '.' }); }); JQuery('input[name="wpcf[preco-novo]"]').focusout(function($) {     $('input[name="wpcf[preco-novo]"]').priceFormat({
    prefix: '',
    centsSeparator: '',
    thousandsSeparator: '' }); }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:46:37.233

尝试使用[parseInt](http://www.w3schools.com/jsref/jsref_parseint.asp)函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:02:18.257

好的，由于 wordpress 兼容性错误预防，我遇到了 $ jQuery 的问题。

工作代码是这样的：

```
jQuery('input[name="wpcf[preco-novo]"]').focus(function ($) {
    jQuery('input[name="wpcf[preco-novo]"]').priceFormat({
        prefix: '',
        centsSeparator: ',',
        thousandsSeparator: '.'
    });
});
jQuery('input[name="wpcf[preco-novo]"]').focusout(function ($) {
    jQuery('input[name="wpcf[preco-novo]"]').priceFormat({
        prefix: '',
        centsSeparator: '',
        thousandsSeparator: ''
    });
}); 
```

感谢所有愿意分享您的知识的人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T22:11:22.600

我不确定您为什么要将价格保存为 int，但您在这里几乎没有选择。`priceFormat`制作自己的功能并不难`unFormat`，避免使用外部 jQuery 插件来处理像这样的小事情：

```
function priceFormat (num) {
    num = isNaN(num) || num === '' || num === null ? 0.00 : num;
    return parseFloat(num).toFixed(2);
}

function unFormat(num){
    return parseInt((num).replace('.',''));
} 
```

那么你可以这样做：

```
$('input[name="wpcf[preco-novo]"]').focus(function(){
    $(this).val(priceFormat($this.val());
}).focusout(function(){
    $(this).val(unFormat($this.val());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T21:43:56.253

你为什么不使用`Math.floor(your_float)`？

# ember.js - 如何使用 ember.js 使 textarea 自动增长？

> ID：14468513
> 
> 赞同：5
> 
> 时间：2013-01-22T21:40:18.227
> 
> 标签：ember.js, autogrow

如何使`TextArea` [autogrow](https://github.com/ultimatedelman/autogrow)插件与 ember.js 一起使用？它似乎不适用于`Ember.TextArea`.

我试过这个（咖啡脚本）：

```
 App.TextField = Ember.TextArea.extend
    didInsertElement: ->
      opts =
        animate: false
        cloneClass: 'faketextarea'
      @$().autogrow(opts) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T04:24:34.160

Ember 获取视图的方式似乎存在问题，`this.$()`该视图无法与 autogrow 插件很好地配合使用，导致 autogrow 无法正确侦听`TextArea`. 使用视图的 显式创建选择器`elementId`允许您的示例工作。

我正在使用 Ember 1.0.0-PRE.4

示例：http: [//jsbin.com/adedag/8/edit](http://jsbin.com/adedag/8/edit)

```
App.TextField = Ember.TextArea.extend({
  didInsertElement: function() {
    opts = {
      animate: false,
      cloneClass: 'faketextarea'
    }
    $('#'+this.get('elementId')).autogrow(opts);
  }
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-09T17:30:18.017

如果您使用的是 Bower，请考虑这个替代方案：[http ://www.jacklmoore.com/autosize/](http://www.jacklmoore.com/autosize/)

```
"dependencies": {
    "jquery": "~2.0",
    "ember": "1.2.0-beta.4",
    "ember-data-shim": "v1.0.0-beta.3",
    "handlebars": "1.1.2",
    "jquery-autosize":""
}, 
```

然后

```
App.AutosizeTextArea = Ember.TextArea.extend({
didInsertElement: function() {
    $('#'+this.get('elementId')).autosize();
} 
```

});

和

```
{{view App.AutosizeTextArea value=notes}} 
```

# android - 用于跨平台应用程序开发或 JQUERY 移动的离线 HTML5 或原生 SDK

> ID：14468515
> 
> 赞同：2
> 
> 时间：2013-01-22T21:40:25.663
> 
> 标签：android, jquery, ios, html, hybrid

我正计划构建一个应用程序，用于从菜单中选择内容并进行操作。我早些时候想学习 java 并在 android 上构建，但后来我遇到了 HTML5 和 JQuery mobile。

谁能指导我应该开始学习什么？我打算构建一个简单的应用程序。我只想要一个好的 GUI 并且想写一次。这就是为什么我认为我会在 HTML5 上工作，然后将其存储在本地并在不同平台的 webview 组件中打开它。所以我会写一次并在所有平台上使用它。

我是否朝着正确的方向前进？
还告诉我 HTML5、JQuery 和 Phonegap 之间的区别

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T23:00:17.957

我会用简单的英语逐一介绍。

**Phonegap**是一组 API，用于执行诸如使用手机相机拍照、使用设备加速计、地理定位等操作。

基本上，它是一种在您的应用程序和设备之间进行通信（通过 javascript）的方式。例如，要使用 Phonegap 拍照（打开相机），您可以执行以下操作：

```
navigator.camera.getPicture( cameraSuccess, cameraError, [ cameraOptions ] ); 
```

这本质上并不比用原生设备语言打开相机更困难（即：iOS 的 Objective C），但美妙的是这段代码可以在多个设备平台上工作（你有一个或两个小调整每个设备都做，但它基本上是一次编写并使用多平台）。这就是Phonegap。使用相同的代码与多个设备平台进行通信是一堆 API。

**jQuery**，更具体地说，在您的情况下，**jQuery mobile**是一个 javascript 库，主要用于用户界面设计（以及 Ajax）。它使执行动画（例如图像淡入或在屏幕上移动）、事件处理（当用户单击、悬停、聚焦、图像或按钮或任何元素时发生的事情）变得更容易。例如，看下面的一段代码：

```
$('.mybutton').click(function(){
    $('#myelement').fadeOut(500);
}); 
```

当用户在 500 毫秒内单击特定按钮时，这 3 行代码会淡出特定图像。短而甜。所以这正是 jQuery 的本质，一个让创建漂亮 UI 变得更容易的库。

**jQuery mobile**（顾名思义）是针对移动平台开发的。因此，除了 jQuery 的动画和事件之外，它还包括触摸和手势（滑动等）功能，以及在移动应用程序中处理页面和导航的出色框架。

**HTML5**是最新一代的 HTML，旨在为基于 Web 的内容提供全面的应用程序开发平台，从而消除对 Flash 或 java 等 3rd 方插件的需求。视听播放、拖放、使用 webSQL 的本地文件存储，当然还有用于高级绘图和动画的画布元素。

基本上它只是 HTML 的新版本，它允许更多现代功能。

**你在朝着正确的方向前进吗？**是的，你肯定是。虽然学习移动平台本地语言有其好处并且非常值得，但许多开发人员正在转向更通用的平台，例如 Phonegap。

一个很好的起点就在这里（StackOverflow），我绝对建议仔细阅读[Phonegap](http://docs.phonegap.com/en/2.3.0/index.html)和[jQuery Mobile](http://jquerymobile.com/test/)的文档并玩一些演示。

以下是有关该主题的一些有用链接：

*   [关于PhoneGap的问题和神话](http://phonegap.com/2012/06/21/questions-and-myths-about-phonegap/)
*   [Phonegap 简介](http://tricedesigns.com/presentations/intro%20to%20phonegap/#/)
*   [jQuery Mobile：它能为您做什么？](http://www.elated.com/articles/jquery-mobile-what-can-it-do-for-you/)
*   [什么是 HTML5？（视频）](http://www.youtube.com/watch?v=mzPxo7Y6JyA)

祝好运并玩得开心点

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T14:30:30.003

Html5 是原始信息。Jquery（Javascript 的一部分）对交互元素进行编码。CSS是设计。将它们全部分开，网络标准等。

这些技术适用于网络浏览器，但非网络浏览器无法读取此代码，例如应用商店等。Phonegap 打包此代码，因此可以在其他平台上读取。因此，与其多次重做代码 - 一次编写到处发布，或者类似的东西。在这张图片中可以看到：![http://phonegap.com/uploads/artwork/Build-Diagram-3.png](../Images/1da75a88975c2b4e19277e5b7f485ea1.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T22:57:54.197

[Phonegap](http://phonegap.com/)是一个框架，它允许您使用 HTML5、CSS 和 JavaScript 开发您的应用程序，并将其打包为每个主要移动平台的本机应用程序。理论上，您可以编写一次应用程序并针对浏览器以及具有相同核心代码库的主要移动平台（使用 Phonegap）。

[jQuery Mobile](http://jquerymobile.com/)是一个移动开发框架，建立在 HTML5、CSS 和 JavaScript 之上，可以与 Phonegap 结合使用来构建移动应用程序。它提供了一个可定制的、针对移动设备优化的用户界面（想想页面、标题、列表项、表单组件）和一个用于在应用程序页面之间导航的系统。

jQuery Mobile 依赖于[jQuery](http://jquery.com/)库，该库旨在通过掩盖许多可能使编写 JavaScript 变得困难的浏览器不一致性来简化客户端脚本编写。它对于选择 HTML 元素和遍历[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)特别有用，根据[本次调查](http://www.sitepoint.com/jquery-used-on-50-percent-of-websites/)，50% 的网站都在使用它。

根据您对应用程序的描述以及您希望编写一次可在各种平台上运行的代码，我会说您肯定走在正确的轨道上。

因为它是建立在这些技术之上的，所以我建议您先尝试在 HTML、CSS 和 jQuery 方面打下坚实的基础，然后再研究 jQuery Mobile。我认为您现在可以安全地忽略 Phonegap，因为当您使用上述技术构建应用程序时，您将能够使用该框架为您计划定位的平台打包您的应用程序。

# android - 如何从选项菜单中获取选项到标题栏 ActionBar Sherlock android

> ID：14468517
> 
> 赞同：1
> 
> 时间：2013-01-22T21:40:29.213
> 
> 标签：android, actionbarsherlock, options, titlebar, commonsware

我试图让我的选项出现在标题栏中。我正在使用 ActionBarSherlock，我可以弄清楚如何删除标题栏中的标题，但想用我的选项菜单中的 2 个选项替换文本。

我正在使用此代码[EmpubLite](https://github.com/commonsguy/cw-omnibus/tree/master/EmPubLite)作为我的应用程序的示例，但我无法弄清楚 Mark（commonsware 人）如何从标题栏中的选项菜单中获取图标。我的选项显示在操作栏的底部，这占用了屏幕上不必要的空间。我一直在查看示例here，但似乎无法确切了解如何在标题栏中获取选项。我希望马克（或某人）能解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:48:09.003

> 想用我的选项菜单中的 2 个选项替换文本

嗯，除非通过删除标题自动发生这种情况，否则我怀疑这是不可能的。

> 但我不知道马克（普通软件的人）是如何从标题栏中的选项菜单中获取图标的

[好吧，你看，这本令人愉快的小书](http://commonsware.com/Android)涵盖了这些内容...... :-)

更严重的是，`android:showAsAction`控制项目是否应该在溢出区域（`never`），应该在操作栏中（`ifRoom`），或者真的应该在操作栏中（`always`）。话虽这么说，`always`是一个提示，而不是一个需求，并且操作系统可能仍会将您的操作栏项目放在较小的屏幕尺寸上的溢出中。

您没有说明您正在试验哪个 EmPubLite 系列。早期，这些项目都设置为`never`：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item
        android:id="@+id/help"
        android:icon="@android:drawable/ic_menu_help"
        android:showAsAction="never"
        android:title="@string/help"/>
    <item
        android:id="@+id/about"
        android:icon="@android:drawable/ic_menu_info_details"
        android:showAsAction="never"
        android:title="@string/about">
    </item>

</menu> 
```

在本系列结束时，我们有一些理想地进入操作栏：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item
        android:id="@+id/notes"
        android:icon="@android:drawable/ic_menu_edit"
        android:showAsAction="ifRoom|withText"
        android:title="@string/notes">
    </item>
    <item
        android:id="@+id/update"
        android:icon="@android:drawable/ic_menu_save"
        android:showAsAction="ifRoom|withText"
        android:title="@string/download_update">
    </item>
    <item
        android:id="@+id/settings"
        android:icon="@android:drawable/ic_menu_preferences"
        android:showAsAction="never"
        android:title="@string/settings">
    </item>
    <item
        android:id="@+id/help"
        android:icon="@android:drawable/ic_menu_help"
        android:showAsAction="never"
        android:title="@string/help">
    </item>
    <item
        android:id="@+id/about"
        android:icon="@android:drawable/ic_menu_info_details"
        android:showAsAction="never"
        android:title="@string/about">
    </item>

</menu> 
```

> 我的选项显示在操作栏的底部，这占用了屏幕上不必要的空间。

那么你已经`android:uiOptions="splitActionBarWhenNarrow"`在你的清单中设置了某个地方。

# drupal - Drupal 视图中使用 AJAX 的暴露过滤器出错

> ID：14468521
> 
> 赞同：0
> 
> 时间：2013-01-22T21:40:46.290
> 
> 标签：drupal, drupal-7, drupal-views, drupal-taxonomy

当我尝试使用带有 AJAX（自动提交）的常规公开过滤器过滤 Drupal 视图时收到错误消息。

```
An error occured while attempting to process /views/ajax: 
Object [object Window] has no method 'indexOf' 
```

这就是我所做的：

*   清除所有缓存，运行 cron 和 update.php
*   视图、ctools 和 drupal 核心已经过时，所以我更新它们并运行 update.php
*   检查视图是否启用了 Ajax。
*   测试使用 Better Exposed Filters 是否有效，无效。
*   安装 JQuery 更新模块并启用它，也不起作用。
*   创建另一个暴露的过滤器（按日期、类型、标题）相同的错误。

**需要提到的重要一点是过滤器在视图预览中起作用。**

该视图非常简单，它唯一要做的就是显示事件列表（事件内容类型），并且我想按餐厅过滤内容（这是内容类型的选择列表）并且显示该错误。

这是规格：

*   Drupal 核心：7.19
*   视图模块：7.x-3.5
*   PHP版本：5.3.18
*   Apache2.2.22
*   MySQL 5.1.66
*   在 Windows 上使用 Acquia Dev Desktop 堆栈。

提前致谢

这是我导出视图时的结果代码：

[文件代码，点这里](https://www.dropbox.com/s/f6sexqb896vm87p/Exported_View.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:30:49.237

尝试启用干净的 URL。这对我有用。

# livecycle - 在 Adob e livecycle 中构建第一个应用程序

> ID：14468523
> 
> 赞同：0
> 
> 时间：2013-01-22T21:40:49.490
> 
> 标签：livecycle, lcds, livecycle-designer

嗨，我刚刚安装了 workbech 和 livecycle server。我必须在 livecycle 中创建一个应用程序。当我转到文件>新建>应用程序时

出现一个对话框，必须填写

用户名、密码、登录

这三个字段的值应该是什么，以便我能够在实时循环中创建应用程序。任何人都可以帮忙吗？我是 livecycle 的新手，没有创建任何应用程序，请帮助我从哪里获得这些值！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:33:58.277

Adobe 的 LiveCycle 工作台直接连接到 LiveCycle 服务器，应用程序被保存并部署在 LiveCycle 服务器本身上。

您必须输入与您要连接的服务器关联的用户名和密码。您还必须指定服务器的主机名/IP 地址，以允许 Workbench 连接服务器并对您的凭据进行身份验证。更多详细信息可以在[Adob​​e 帮助文档](http://help.adobe.com/en_US/livecycle/10.0/WorkbenchHelp/WS92d06802c76abadb766bbee6128402890a9-8000.html)中找到。

希望这可以帮助。如果您还有其他问题，请告诉我。

谢谢，阿玛汉。

# linux - Ubuntu BASH 脚本后台作业隐藏 Windows

> ID：14468529
> 
> 赞同：0
> 
> 时间：2013-01-22T21:41:17.507
> 
> 标签：linux, bash, background-process

我有一个看似简单的问题，我不知道如何解决。

我有一个 bash 脚本，它在循环中在后台启动一个程序。但是，每次程序打开时，它都会启动一个窗口并专注于它。有没有办法启动一个进程并将它启动的所有窗口最小化或完全抑制？

这是我的代码：

```
#!/bin/bash
while true; do
process1 & P=$!; #I need to hide all of the windows in this process
process2;
kill $P;
wait;
sleep 0.1; done 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:34:17.807

这取决于窗口管理器。尝试在 wm 文档中查找[如何防止焦点窃取。](http://bertrandbenoit.blogspot.com/2011/09/change-window-behavior-to-prevent-focus.html)

对于更通用的方法，您可以启动第二个 X 服务器（`startx -- :1`然后`Ctrl-Alt-F8`切换到它），运行一个实例`Xnest`以获取一个 X-server-in-a-window，其中子窗口不会窃取焦点，或者运行一个 vncserver /nxserver Windows 可以发送垃圾邮件，如果需要，您可以偶尔连接并查看。通过在例如 display 上设置任何这些`:1`，您可以使用 重定向您的进程窗口`DISPLAY=:1 process1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T03:35:05.840

使用 xdotool，将 name_in_titlebar 替换为标题栏中的名称：D

```
xdotool search --name name_in_titlebar windowactivate
xdotool key ctrl+super+Up 
```

# javascript - 如何在 IE 中停止剪切最后一行 Textarea 并减少行高？

> ID：14468534
> 
> 赞同：0
> 
> 时间：2013-01-22T21:41:32.973
> 
> 标签：javascript, html, css

我有一个包含多行文本的文本区域：

```
<textarea>this will not clipped
the bottom of this line will be clipped</textarea> 
```

我有 CSS 将文本的行高设置为字体大小的一半：

```
textarea {
    color: #000000;
    font-size: 50px;
    line-height: 25px;
    text-align: center;
    height: 150px;
    width: 450px;
    overflow: hidden;
} 
```

但是在 IE7/IE8/IE9 中显示时，textarea 的最后一行被剪掉了。我尝试了以下方法：

1.  在之后添加一个额外的换行符将导致该行渲染良好。这会导致我的应用程序中不允许出现溢出。
2.  在底部使用负边距和正填充。或者使用像 10px 这样的小高度值和像 140px 这样的大填充底部值。这渲染得很好，但会影响我对容器滚动高度和高度的测量。要继续使用此选项，我必须复制我的控件并将它们浮动在顶部并将实际用户输入复制到备用控件。
3.  切换`textarea`到 a`div`和 setting `contentEditable="true"`，通过 HTML 管理用户内容（意味着没有 \n 换行符`<br/>`）。
4.  使用 JS 将 textarea 的高度切换为“auto”并添加一个属性，`row="5"`但文本仍然被裁剪并将其删除/添加到页面以允许它重新渲染不起作用。

[jsFiddle 中的演示](http://jsfiddle.net/scottcanoni/YKW6Y/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:53:39.120

textarea 的高度最好由元素的 rows 属性控制，即：

```
<textarea rows="4"></textarea> 
```

还要从你的风格中删除高度。

# javascript - 如果用户有 cookie javascript，如何重定向用户

> ID：14468535
> 
> 赞同：-5
> 
> 时间：2013-01-22T21:41:33.993
> 
> 标签：javascript, html, css, redirect, cookies

我需要知道如何在用户第一次用 javascript 访问页面时给他们一个 cookie。然后我需要 cookie 在 1 小时内过期，如果 cookie 仍然存在并且他们尝试在 1 小时结束之前访问页面，它会重定向它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:45:51.707

如果可以使用 Jquery 你可以使用 Jquery 插件

设置一个cookie

```
$.cookie("example", "foo", { path: '/', expires: 7 }); 
```

得到一个饼干

```
alert( $.cookie("example") ); 
```

删除 cookie

```
$.cookie("example", null); 
```

使用它，您可以编写自定义逻辑以在 javascript 中进行重定向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:44:13.487

[重定向到启动页面](http://css-tricks.com/redirecting-to-a-splash-page-but-only-once-with-cookies/)中描述了一个相关的解决方案。

# javascript - CodeKit 编译错误，包括咖啡文件中的 JS 文件

> ID：14468536
> 
> 赞同：0
> 
> 时间：2013-01-22T21:41:45.173
> 
> 标签：javascript, coffeescript

我刚刚开始使用 CodeKit，到目前为止它很棒，但是我在 CoffeeScript 文件中包含 JavaScript 文件时遇到了麻烦。

在 CoffeeScript 文件中，我有一行：

```
# @codekit-prepend './vendor/backbone.js' 
```

这会导致以下错误：

```
SyntaxError: In /var/folders/t1/h24_m5yx2yq5sjc2jztvh2xr0000gn/T/CodeKitTempFolder.rrBQ5JI7WP7b1dQ/temp.coffee, reserved word "function" on line 27
at SyntaxError (unknown source)
at Lexer.exports.Lexer.Lexer.error (/Users/makala/Downloads/CodeKit.app/Contents/Resources/engines/coffee/lib/coffee-script/lexer.js:682:13)
at Lexer.exports.Lexer.Lexer.identifierToken (/Users/makala/Downloads/CodeKit.app/Contents/Resources/engines/coffee/lib/coffee-script/lexer.js:86:16)
at Lexer.exports.Lexer.Lexer.tokenize (/Users/makala/Downloads/CodeKit.app/Contents/Resources/engines/coffee/lib/coffee-script/lexer.js:33:19)
at Object.exports.compile.compile (/Users/makala/Downloads/CodeKit.app/Contents/Resources/engines/coffee/lib/coffee-script/coffee-script.js:47:32)
at compileScript (/Users/makala/Downloads/CodeKit.app/Contents/Resources/engines/coffee/lib/coffee-script/command.js:182:33)
at fs.stat.notSources.(anonymous function) (/Users/makala/Downloads/CodeKit.app/Contents/Resources/engines/coffee/lib/coffee-script/command.js:152:18)
at fs.readFile (fs.js:176:14)
at Object.oncomplete (fs.js:297:15) 
```

CoffeeScript 文件在没有该行的情况下可以完美编译。

我试图添加的 JS 文件*不是*直接编译的，而是“连接 + 缩小”的。JSHint/Lint*没有*检查CS 文件，它*正在*被缩小。

我认为这个错误可能是由于缺乏错误抑制（参见[http://incident57.com/codekit/help.php](http://incident57.com/codekit/help.php)上的“JavaScript 和 CoffeeScript 导入”>“抑制错误” ）。但是“显示错误”复选框在 CodeKit 应用程序中不可见。

哦，还有一件事，输出的 javascript 文件包含原始的咖啡脚本。我不确定这是编译失败的原因还是结果。

关于可能导致编译失败的任何想法？

感谢您的关注:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T02:03:26.440

> 由于技术原因（变量/函数阴影等），无法直接组合 CS 和 JS 文件。您需要做的是创建一个新的 Javascript 文件，该文件导入（使用 prepend/append 语句）编译 CS 文件时生成的 OUTPUT 文件和要导入的 JS 文件。
> 
> 然后，每当您保存 Coffee 文件时，CodeKit 都会做正确的事情并重新编译 javascript 文件。干杯!

*资料来源*：Bryan Jones，CodeKit 作者

# postgresql - 为什么 Postgres Hstore 索引适用于？（运算符）而不是 EXIST（函数）？

> ID：14468540
> 
> 赞同：4
> 
> 时间：2013-01-22T21:41:54.603
> 
> 标签：postgresql, indexing, hstore

[http://www.postgresql.org/docs/9.2/static/hstore.html](http://www.postgresql.org/docs/9.2/static/hstore.html)状态：

```
hstore has GiST and GIN index support for the @>, ?, ?& and ?| operators 
```

然而，索引[不适用于`EXIST`function](http://postgresql.1045698.n5.nabble.com/BUG-7715-hstore-quot-exists-quot-should-use-same-index-as-quot-quot-operator-td5734358.html)，这似乎等同于`?`operator。

运算符和函数之间有什么区别使得索引一个或另一个变得更加困难？

Hstore 扩展的未来版本可能使这些真正等效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:30:06.910

查找“CREATE OPERATOR CLASS”的文档，该文档描述了如何为任意运算符创建索引方法。您还需要先使用“CREATE OPERATOR”创建基于 EXIST 函数的运算符。

（警告：我没有使用 hstore 的经验）

[http://www.postgresql.org/docs/9.0/static/sql-createoperator.html](http://www.postgresql.org/docs/9.0/static/sql-createoperator.html)

[http://www.postgresql.org/docs/9.0/static/sql-createopclass.html](http://www.postgresql.org/docs/9.0/static/sql-createopclass.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:41:18.723

这是你的问题：PostgreSQL 函数是不透明的。规划者无法知道运算符和函数在语义上是等价的。这经常出现。

PostgreSQL 确实具有函数索引，因此您可以索引不可变函数的输出，但这可能不会让事情在这里完美地工作，因为您可能只能索引哪些行对于给定的调用返回 true，但这仍然非常有用带有部分索引。例如，您总是可以执行以下操作：

```
CREATE INDEX bar_has_aaa ON foo(exists(bar, 'aaa')); 
```

或者

```
CREATE INDEX bar_has_aaa ON foo(id) where exists (bar, 'aaa'); 
```

但我不认为这正是你需要它去的地方。希望它为您指明正确的方向。

编辑：以下让我觉得更好的解决方法。假设我们有一个表 foo：

```
 CREATE TABLE foo (
        id serial,
        bar hstore
 ); 
```

我们可以创建一个表方法 bar_keys：

```
CREATE FUNCTION bar_keys(foo) RETURNS text[] IMMUTABLE LANGUAGE SQL AS $$
    SELECT akeys($1.bar);
$$; 
```

然后我们可以使用 GIN 对其进行索引：

```
 CREATE INDEX foo_bar_keys_idx ON foo USING gin(bar_keys(foo)); 
```

我们可以在查询中使用它：

```
 SELECT * FROM foo WHERE foo.bar_keys @> array['aaa']; 
```

那应该使用索引。请注意，您可以直接索引/使用键，但我认为虚拟列会导致更清晰的语法。

# ruby-on-rails - 由于 readline 中的错误，当我按下按钮时，Rails 脚本/控制台崩溃

> ID：14468541
> 
> 赞同：5
> 
> 时间：2013-01-22T21:41:57.327
> 
> 标签：ruby-on-rails, ruby, console, readline

这个问题是间歇性的，但是按向上箭头来获取以前输入的命令我会得到一个错误，例如：

```
/Users/me/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-2.3.14/lib/active_support/whiny_nil.rb:52:in `method_missing': undefined method `force_encoding' for nil:NilClass (NoMethodError)
    from /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rb-readline-0.4.2/lib/rbreadline.rb:3801:in `_rl_col_width'
    from /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rb-readline-0.4.2/lib/rbreadline.rb:2944:in `update_line'
    from /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rb-readline-0.4.2/lib/rbreadline.rb:3486:in `block in rl_redisplay'
    from /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rb-readline-0.4.2/lib/rbreadline.rb:3481:in `each'
    from /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rb-readline-0.4.2/lib/rbreadline.rb:3481:in `rl_redisplay'
    from /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rb-readline-0.4.2/lib/rbreadline.rb:4618:in `_rl_internal_char_cleanup'
    from /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rb-readline-0.4.2/lib/rbreadline.rb:4679:in `readline_internal_charloop'
    from /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rb-readline-0.4.2/lib/rbreadline.rb:4743:in `readline_internal'
    from /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rb-readline-0.4.2/lib/rbreadline.rb:4765:in `readline'
    from /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rb-readline-0.4.2/lib/readline.rb:40:in `readline'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/input-method.rb:115:in `gets'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb.rb:139:in `block (2 levels) in eval_input'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb.rb:273:in `signal_status'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb.rb:138:in `block in eval_input'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/ruby-lex.rb:188:in `call'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/ruby-lex.rb:188:in `buf_input'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/ruby-lex.rb:103:in `getc'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/slex.rb:205:in `match_io'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/slex.rb:75:in `match'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/ruby-lex.rb:286:in `token'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/ruby-lex.rb:262:in `lex'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/ruby-lex.rb:233:in `block (2 levels) in each_top_level_statement'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/ruby-lex.rb:229:in `loop'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/ruby-lex.rb:229:in `block in each_top_level_statement'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/ruby-lex.rb:228:in `catch'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/ruby-lex.rb:228:in `each_top_level_statement'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb.rb:155:in `eval_input'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb.rb:70:in `block in start'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb.rb:69:in `catch'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb.rb:69:in `start'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

看起来问题出在readline中？如何解决问题？根据`bundle list`我有这个版本的readline：

> *   rb-readline (0.4.2)

**更新**`rvm pkg install readline`：使用每个答案更新后的新错误：

```
>/Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rb-readline-0.4.2/lib/rbreadline.rb:2730:in `[]': no implicit conversion from nil to integer (TypeError)
    from /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rb-readline-0.4.2/lib/rbreadline.rb:2730:in `update_line'
    from /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rb-readline-0.4.2/lib/rbreadline.rb:3486:in `block in rl_redisplay'
    from /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rb-readline-0.4.2/lib/rbreadline.rb:3481:in `each'
    from /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rb-readline-0.4.2/lib/rbreadline.rb:3481:in `rl_redisplay'
    from /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rb-readline-0.4.2/lib/rbreadline.rb:4618:in `_rl_internal_char_cleanup'
    from /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rb-readline-0.4.2/lib/rbreadline.rb:4679:in `readline_internal_charloop'
    from /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rb-readline-0.4.2/lib/rbreadline.rb:4743:in `readline_internal'
    from /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rb-readline-0.4.2/lib/rbreadline.rb:4765:in `readline'
    from /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rb-readline-0.4.2/lib/readline.rb:40:in `readline'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/input-method.rb:115:in `gets'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb.rb:139:in `block (2 levels) in eval_input'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb.rb:273:in `signal_status'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb.rb:138:in `block in eval_input'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/ruby-lex.rb:188:in `call'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/ruby-lex.rb:188:in `buf_input'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/ruby-lex.rb:103:in `getc'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/slex.rb:205:in `match_io'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/slex.rb:75:in `match'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/ruby-lex.rb:286:in `token'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/ruby-lex.rb:262:in `lex'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/ruby-lex.rb:233:in `block (2 levels) in each_top_level_statement'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/ruby-lex.rb:229:in `loop'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/ruby-lex.rb:229:in `block in each_top_level_statement'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/ruby-lex.rb:228:in `catch'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/ruby-lex.rb:228:in `each_top_level_statement'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb.rb:155:in `eval_input'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb.rb:70:in `block in start'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb.rb:69:in `catch'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb.rb:69:in `start'
    from /Users/me/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

而且我仍然遇到旧错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T22:13:26.850

这显然是 rb-readline 的问题。

我通常将 readline 安装为 rvm 包：

```
rvm pkg install readline 
```

并且不要在我的 Gemfile 中使用任何 readline 特定的东西。

你也可以看看：

[rails 控制台、RVM 和 readline 的问题](https://stackoverflow.com/questions/4498919/problems-with-the-rails-console-rvm-and-readline)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-02T09:47:12.357

我今天遇到了这个。

我相信这是因为 readline 试图解析控制台行上的一些文本。有些文字播放不好。

那么为什么是向上键呢？

这恰好是在我粘贴大量“东西”来设置变量之后。由于控制台崩溃了，我显然在粘贴中出了点问题。

发生崩溃后，所有 IT 专业人员都会做什么？再试一遍。尝试您在 rails 控制台中编写的最后一个命令的最快方法是什么？向上键。

一个很好的解决方法是简单地不按向上键或清除历史记录以删除有问题的行。

# c++ - 比较许多数字以找到最小值和最大值

> ID：14468542
> 
> 赞同：4
> 
> 时间：2013-01-22T21:42:04.230
> 
> 标签：c++, algorithm

为了简单起见，假设我有 3 个整数（整数），我知道我可以通过使用类似的东西找到最高的：

```
if(num1 > num2 && num1 > num3)
    cout << num1 << endl;
if(num2 > num1 && num2 > num3)
    cout << num2 << endl;
if(num3 > num1 && num3 > num2)
    cout << num3 << endl; 
```

最低的：

```
if(num1 < num2 && num1 < num3)
    cout << num1 << endl;
if(num2 > num1 && num2 > num3)
    cout << num2 << endl;
if(num3 < num1 && num3 < num2)
    cout << num3 << endl; 
```

我怎样才能得到这样的东西来处理像 221,111,122,121 这样的等式。编辑：我试图远离任何预建的数学包括，因为这不是重点..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T21:49:10.780

您应该考虑将您的值存储在一个容器中，例如`vector`（我不知道您是否*总是*有三个，或者您的数量是否会有所不同）。`std::min_element`然后，您可以使用`std::max_element`已经编写和调整的 and 来从一系列值中找到最小值/最大值。

# mono - 使用IList等接口真的有限制吗 AOT代码中的.someMethod？

> ID：14468544
> 
> 赞同：5
> 
> 时间：2013-01-22T21:42:07.240
> 
> 标签：mono, aot

在单声道项目文档中概述了此限制：

限制：通用接口实例化

> FullAOT 模式不支持以下类型的接口调度：
> 
> ```
> interface IFoo<T> {
> ...
>     void SomeMethod ();
> } 
> ```
> 
> 由于 Mono 无法从静态分析中确定哪种方法将实现 IFoo.SomeMethod，因此不支持此特定模式。

我们一直在使用这样的代码，不知道这个限制，目前正在尝试找出是否存在一些稳定性问题，这是否相关。这似乎按预期运行，因此我们怀疑这仍然是一个问题。我们的代码编译到 AOT 时没有错误，并且运行时不会抛出任何错误。这只是旧文档吗？

一个额外的奖励问题：如果这不应该工作......为什么*它*适用于内置的 C# 类，如 IList 没有问题，但它不应该工作？

# visual-studio-2010 - Visual Studio 2010 未从 VSS 签出代码

> ID：14468545
> 
> 赞同：2
> 
> 时间：2013-01-22T21:42:12.650
> 
> 标签：visual-studio-2010, visual-sourcesafe

我有一个项目，我一直在使用 VS Pending Checkins 选项卡中的 VSS 源代码控制。这一直有效，直到最近。现在，当我对代码进行更改时，我在 Pending Checkins 选项卡中没有看到条目。

我看到了[这篇](https://stackoverflow.com/questions/5294509/visual-studio-isnt-tracking-changes-or-checking-out-files-from-source-control)文章，但是在右键单击解决方案或在文件 -> 源代码管理下都没有看到联机选项。可能是因为那个人使用的是 TFS 而不是 VSS。

我尝试断开源代码管理链接并创建一个新树，但是当我进行更改时它仍然没有自动签出。我一直在使用 Check Out For Edit 选项，然后签入，但是无论我是否进行更改，这都会获取所有类。我在 VS 中使用源代码管理，因为该列表可以很容易地确定我是否需要签入某些内容。

有没有人知道为什么这可能已经停止与这个项目合作。它仍在其他项目中工作。我确实为保存和编辑选择了“自动签出”。允许编辑签入的项目未被选中，源代码管理 -> 环境下的任何其他选项也未被选中。

感谢您提出的任何建议。

更新：我刚刚在解决方案中添加了一个新类，该类出现在待处理的签入下。但是，我也对其他类进行了一些更改，但它们都没有出现在 checkins 下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-01T14:05:21.813

我也通过 Visual Studio 依赖 SourceSafe 来自动签出文件。但它通常只是默认情况下有效，尽管您需要知道我从[这篇](https://stackoverflow.com/a/783770/1998025)解释风险方法的帖子中学到的某些假设：

如果您获取所有文件而不签出它们，那么这些文件将是只读的，正如您在 Windows 资源管理器属性中看到的那样。然后，当您对任何文件键入第一次编辑时，VS/VSS 首先检查该文件的只读属性。如果它是只读的，那么文件将被自动检出（这是默认选项）。然后，当您准备签入一组文件时，VS 会显示所有“待签入”，您可以将它们作为一组签入。

多年来我一直依赖它，因为它在我们的环境中一直对我很好，直到几周前我的许多源文件以某种方式丢失了它们的只读属性。所以如果没有只读，一些文件没有被检出，因此没有被检入。这真的很难检测到，直到你的硬盘崩溃并且你尝试从另一台机器构建！

我在[这里](http://forums.asp.net/post/4395430.aspx)找到了一种修复只读属性的方法：

> 签入所有已编辑的文件（使用 VSS 找出更改的文件 [使用差异]，即使 VS 没有签出它们）。然后做了一个覆盖本地文件的获取最新版本，并确保未选中“保持可写”复选框。

# android - android中的线性布局（视图）大小

> ID：14468547
> 
> 赞同：2
> 
> 时间：2013-01-22T21:42:19.520
> 
> 标签：android, view, width, android-linearlayout

在我的应用程序中，我在线性布局中有 gridview。由于屏幕尺寸不同，我想计算 gridview 容器的宽度（在线性布局中），然后我会决定屏幕上应该显示多少列。我的问题是。当我写

```
linearlayout.getwidth(); 
```

它返回 0，因为它在 oncreate 方法中获取视图大小还为时过早。

什么是获得视图高度或宽度的干净解决方案。

我试过

```
Display display = ((WindowManager) getSystemService(WINDOW_SERVICE)).getDefaultDisplay();
int gridSize = display.getWidth(); 
```

但是android说它已被弃用:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:49:32.627

`Display.getWidth()`并且`Display.getHeight()`从 API 13 开始都已弃用，而支持[`Display.getSize(Point)`](http://developer.android.com/reference/android/view/Display.html#getSize(android.graphics.Point)). 为了与两者兼容，您必须进行版本检查并选择合适的版本。

这就是我这样做的方式：

```
Point size = new Point();
Display display = ((WindowManager) getSystemService(WINDOW_SERVICE)).getDefaultDisplay();
if (Build.VERSION.SDK_INT >= 13) {
    display.getSize(size); // API 13+
} else {
    size.x = display.getWidth();
    size.y = display.getHeight();
} 
```

然后`size.x`是你的宽度。（不要忘记在您的方法签名前加上`@TargetApi(13) @SuppressWarnings("deprecation")`.）

请记住，这是单位的显示宽度；如果您想简单地获取一个视图的大小，则必须在布局 UI 后调用它。这与此答案略有无关，但您可以在[此线程的答案](https://stackoverflow.com/a/3594216/1438733)中找到解决方案。

# sql - 重复数据不同key时查询获取所有ID

> ID：14468548
> 
> 赞同：1
> 
> 时间：2013-01-22T21:42:21.313
> 
> 标签：sql, sql-server, pivot

我有一个类似这样的 SQL 表：

```
+-----------------------------------------------+
|   ID   | FirstName | LastName  | SomeOtherData|
+-----------------------------------------------+
|  200   | Robert    | Barone    | Foo          |
|  228   | Doug      | Heffernan | Bar          |
|  2091  | Robert    | Barone    | Foo          |
|  3921  | Doug      | Heffernan | Bar          |
|  291   | Greg      | Warner    | Barfoo       |
+-----------------------------------------------+ 
```

现在我在生成一个表格时遇到了麻烦，该表格将列出给定人员的两个 ID，假设 FirstName 和 LastName 用于指示重复项。所以，基本上我想得到：

```
+---------------------------------------------------------+
|   ID   | OtherID | FirstName | LastName  | SomeOtherData|
+---------------------------------------------------------+
|  200   | 2091    | Robert    | Barone    | Foo          |
|  228   | 3921    | Doug      | Heffernan | Bar          |
|  291   |         | Greg      | Warner    | Barfoo       |
+---------------------------------------------------------+ 
```

有人能帮我解决这样的问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:46:12.373

您可以使用 a[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)将数据从行转换为列：

```
select [1] Id,
  [2] OtherId,
  firstname, 
  lastname
from
(
  select id, firstname, lastname,
    row_number() over(partition by firstname, lastname
                      order by id) rn
  from yourtable
) src
pivot
(
  max(id)
  for rn in ([1], [2])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c7ec6/6)

或者您可以使用带有`CASE`表达式的聚合函数：

```
select 
  max(case when rn = 1 then id end) Id,
  max(case when rn = 2 then id end) OtherId,
  firstname,
  lastname
from
(
  select id, firstname, lastname,
    row_number() over(partition by firstname, lastname
                      order by id) rn
  from yourtable
) src
group by firstname, lastname 
```

如果您有已知数量的重复值（1、2 等），上述方法将非常有用。如果您有超过 2 个 id，您也可以实现动态 SQL。动态 SQL 如下所示：

```
DECLARE @cols AS NVARCHAR(MAX),
    @colNames AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(cast(row_number() over(partition by firstname, lastname order by id) as varchar(50))) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colNames = STUFF((SELECT distinct ', ' + QUOTENAME(cast(row_number() over(partition by firstname, lastname order by id) as varchar(50))) +' as Id_' + cast(row_number() over(partition by firstname, lastname order by id) as varchar(50)) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT ' + @colNames + ', firstname, lastname from 
             (
                select id, firstname, lastname,
                  row_number() over(partition by firstname, lastname
                                    order by id) rn
                from yourtable
            ) x
            pivot 
            (
                max(id)
                for rn in (' + @cols + ')
            ) p 
            '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c7ec6/12)

所有 3 的结果将是：

```
|  ID | OTHERID | FIRSTNAME |  LASTNAME |
-----------------------------------------
| 200 |    2091 |    Robert |    Barone |
| 228 |    3921 |      Doug | Heffernan |
| 291 |  (null) |      Greg |    Warner | 
```

# xml - XML 如何包含感叹号！在 XML 文本字符串中？转义序列？

> ID：14468549
> 
> 赞同：3
> 
> 时间：2013-01-22T21:42:22.437
> 
> 标签：xml

我尝试了许多转义序列组合，以便在 Android 资源文件夹中的 xml 字符串中添加一个感叹号 - 无济于事。您将使用什么 xml 字符串来获取帮助！例如？谢谢...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T21:52:12.460

XML 文件应该接受一个感叹号，除非可能紧跟在一个开放的尖括号之后。

如果它真的拒绝，你应该可以使用数字实体： `Help&#x21;`=帮助！

或者你可以变得冗长`<![CDATA[Help!]]>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-25T20:01:34.257

你可以在属性中添加一些文本

```
nodElement->SetAttribute( "Name", node_tv->Text); 
```

**node_tv->文本有特殊符号**

# php - 登录用户的内容应该如何只包含在源代码中？

> ID：14468551
> 
> 赞同：1
> 
> 时间：2013-01-22T21:42:32.273
> 
> 标签：php, html, security

确认用户登录后，应该如何显示只有会员才能看到的页面？

例如

```
<?php
    start_session();
    if(isset($_SESSION[userLoggedIn]))
        echo 'welcome to the members area!';
    else
        echo 'You must log in first';
?> 
```

或者

```
<?php
    start_session();
    if(!isset($_SESSION[userLoggedIn]))
        goto notLoggedIn;
?>
    welcome to the members area!
<?php
    notLoggedIn:
        echo 'You must log in first';
?> 
```

或者

```
<?php
    start_session();
    if(isset($_SESSION[userLoggedIn]))
        include members.html;
    else
        include public.html
?> 
```

我不喜欢在 PHP 中有太多的 HTML。

使用`include`/`require`解决方案时，如何使人们不能直接访问 html 文件？例如`include members.html;`，是什么阻止用户输入 url `~/members.html`？ATM 我正在​​使用 WAMP，但我猜服务器上有设置？

**编辑：**好的，这就是我的计划：创建两个目录`public`并创建`private`webroot `public`。我将有 1 个页面来检查用户是否已登录，如果是，来自 $_GET['destination'] 的值将用于包含`private`目录中的正确页面。有什么我没有想到的陷阱吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:46:45.127

我建议不要`goto`，在这种情况下真的没有必要。`includes`如果您有多个页面并且不想混合使用 HTML 和 PHP，那么使用是一个不错的方法。

如果您希望所有内容都包含在一个页面上，您可以设置一个变量：

```
<?php
    start_session();
    $logged_in = ($_SESSION['isLoggedIn'] == true);
    // Whatever else you need...
?> 
```

然后，稍后在页面上（可能在最后），使用[替代语法](http://php.net/manual/en/control-structures.alternative-syntax.php)，您可以执行以下操作：

```
<?php if( $logged_in): ?>
    <p>Welcome to the member's area!</p>
<?php else: ?>
    <p>You must log in first!</p>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T21:50:40.043

> 我不喜欢在 PHP 中有太多的 HTML。

好的。然后将您的 HTML 移动到处理演示逻辑的 HTML 模板中：

```
 start_session();
 if(isset($_SESSION['userLoggedIn'])){
    require 'public_html/logged_in.php';

 }else{
    require 'public_html/public_area.php';
 } 
```

更好的是，创建一个加载这些模板的函数，例如：

```
function load_template($file, array $vars){
  extract($vars);
  unset($file, $vars);
  require func_get_arg(0);
} 
```

> 使用 include/require 解决方案时，我该如何做才能让人们不能直接访问 html 文件？

几种方法：

*   在主脚本中定义一个常量；检查此常量是否在您的模板中定义，如果没有则退出
*   或将变量传递给执行相同操作的模板
*   或将这些模板放在 Web 根目录之外
*   或使用 .htaccess 规则保护它们

我在这里假设这些模板也是 PHP 脚本。但是当然你也可以在 PHP 之上使用某种模板系统，或者创建你自己的......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T21:52:30.913

如果访问者未登录，则通过将访问者重定向离开来保持您的 PHP 文件干净：

```
if (empty($_SESSION['user_id'])
{
    header('Location: /not_logged_in_page'); // Redirect to another page!
    exit;
}

// Continue with the loggedin user page... 
```

# matlab - mac OS X下MATLAB编译代码

> ID：14468552
> 
> 赞同：1
> 
> 时间：2013-01-22T21:42:33.910
> 
> 标签：matlab, deployment, compiler-construction

我在mac下的MATLAB编译代码有一些问题。我已经在 windows 和 linux 下测试了相同的程序，完全没有问题。我的程序需要两个文件夹才能正常工作，但似乎 mac 不喜欢它们，因为它看不到它们。相反，win 和 linux 在查看和使用该文件夹时没有问题。我只想强调一下，在创建包之前，我显然将这些文件夹放在了 deploytool 包中。

任何想法？也许我正在运行程序，以不正确的方式设置环境变量。

编辑：程序启动后的matlab错误。

`Warning: Name is nonexistent or not a directory: materials`

但是`materials`文件夹在我的“当前目录”中，我也把它放在了 deploytool 文件夹中，为什么它看不到呢？貌似`addpath`报错，但是为什么在linux和windows下没有出现呢？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:52:17.997

这里有几点需要考虑：

1.  您是否正确设置了文件夹的权限？我会假设 OSX 的权限应该与您在 Linux 中使用的权限相同，但也许您在创建文件夹后忘记更新它们？
2.  Matlab 是否以您认为的用户身份运行？我不具体了解 Matlab，但它可能作为特定用户运行，具体取决于您所处的环境。
3.  您的错误肯定是找不到文件夹吗？有时有关磁盘 IO 的错误是模糊的或具有误导性的（例如由于权限导致的 - 参见第 1 点和第 2 点）。

# java - 此代码是否将 null 传递给 moveAfter() 以及如何处理它

> ID：14468553
> 
> 赞同：-1
> 
> 时间：2013-01-22T21:42:43.790
> 
> 标签：java, linked-list, nodes

所以我得到了这段代码，据我所知，我不允许更改：

```
public void insertionSort () {
    if (head == tail) {
        // empty list is sorted
        return;
    }
    Node nextNode = head.next; // start inserting second node
    while (nextNode != tail) {
        // set insertNode to node to be inserted in this iteration
        Node insertNode = nextNode; 
        // set nextNode to node to be inserted in next iteration
        nextNode = nextNode.next;  

        // find position where insertNode has to be inserted
        Node current = insertNode.prev;
        while (current != null && insertNode.value.compareTo(current.value) < 0) {
            current = current.prev;
        }

        // insert insertNode after current
        insertNode.moveAfter(current);
    }
} 
```

我对链表不是很熟悉，但据我所知，如果第二个 while 循环在第一次迭代中运行，那么这段代码会将 null 传递给 moveAfter() 到目前为止，对于 moveAfter() 我有：

```
 /**
     * Inserts this node after the specified node. If this and the specified node 
     * refer to the same node in the list, the list remains unchanged. If the 
     * specified node current is null, then this node is inserted at the head of 
     * the list.
     *
     * Precondition: this Node and the specified node are two nodes of this list
     *               this node and the specified node are not equal to the tail
     * 
     * @param node - the node in this list after which this node is inserted
     */
    public void moveAfter (Node node) {
        if(this.prev == null && node.next == null){
            throw new NoSuchElementException();
        }
        if(node.prev == null && node.next==null){
            throw new NoSuchElementException();
        }
        if(this == tail){
            throw new NoSuchElementException();
        }
        if(node == tail){
            throw new NoSuchElementException();
        }

          this.prev.next = this.next;
          this.next = node.next;
          node.next = this;                            
          this.prev = node;
    }
} 
```

如果我是正确的 insertSort() 将 null 传递给 moveAfter() 如果我无法更改 insertSort();

*旁注：如果我的问题难以阅读或未正确提问，请致歉。我似乎有在这个网站上搞砸他们的诀窍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:48:55.540

`moveAfter()`您的方法状态之前的注释：

> 如果指定的节点 current 为空，则将该节点插入到列表的头部。

由于`insertionSort()`使用`head`变量，我假设这是一个成员变量，您也可以`moveAfter()`按照规范所述使用它。

# c++ - QLineEdit 和 findChild()

> ID：14468555
> 
> 赞同：0
> 
> 时间：2013-01-22T21:43:02.487
> 
> 标签：c++, qt, oop, parent-child, qlineedit

我正在尝试设置使用 findChild() 找到的行编辑的文本

主窗口.cpp

```
void MainWindow::setValue(QString line, QString value){
    QLineEdit * edit = centralWidget()->findChild<QLineEdit *>(line);
    edit.setText(value);
} 
```

但是，我`edit.setText(value);`说 .setText 的左侧必须是类/结构/联合时出现错误。

如何正确将子名称的文本设置`line`为`value`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:01:06.063

您需要使用`->`运算符，因为 edit 是一个指针：

```
edit->setText(value); 
```

# javascript - 更改 SWF 中的颜色

> ID：14468556
> 
> 赞同：0
> 
> 时间：2013-01-22T21:43:02.887
> 
> 标签：javascript, html, flash

我正在使用 swf 小部件在网站上创建图片库，但问题是，我无法更改颜色。

你可以在这里找到小部件，在一个 zip 中，当放在网络服务器上时（我使用 wamp），工作得很好，很简单等。

如果您查看项目页面的底部，您会发现一个开发者的说明：

> *我已经包含了一些 flash vars，如果没有提供它们，则代码中有默认值。这里是 flash vars：flashvars.xmlPath = “xml/data.xml”; flashvars.backgroundColor = “0×000000”；flashvars.labelColor = “0xFFFFFF”“xmlPath” 是 XML 文件的路径。“backgroundColor”是背景的颜色。“labelColor”是封面流中间的文本标签的颜色。*

问题是，当我尝试在他们的 index.html 示例源中将此 var 更改为另一个值时，它不起作用。即使我删除了 var“xmlPath”中的一些字符，它仍然使用 xml/data.xml 的内容。似乎开发人员在实施过程中犯了一个错误。

由于我对 js 和 flash 都不熟悉，所以我请求您帮助将此应用程序的背景颜色从黑色更改为 #0C021D ..

我尝试了一个flash swf反编译器，没有成功，有没有人有提示？

提前致谢。

这是 index.html 源代码；

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>CosDesign</title>
    <link rel="stylesheet" media="screen" type="text/css" title="Design" href="css/main.css" />
    <script type="text/javascript" src="js/swfobject.js"></script>
    <script type="text/javascript">
        var flashvars = {};
        flashvars.xmlPath = "xml/data.xml";
        flashvars.backgroundColor = "0x00FF00";
        flashvars.labelColor = "0x006368"
        var params = {};
        params.loop = "false";
        params.menu = "false";
        params.quality = "best";
        params.scale = "noscale";
        params.salign = "tl";
        var attributes = {};
        swfobject.embedSWF("swf/main.swf", "myAlternativeContent", "590", "300", "10.0.0", "swf/expressInstall.swf", flashvars, params, attributes);
    </script>
</head>
<body>
    <div id="myAlternativeContent">
        <a href="http://www.adobe.com/go/getflashplayer">
        <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
        </a>
    </div>
</body> 
```

# gcc - 为什么我的断点没有按顺序运行？海合会和 C

> ID：14468557
> 
> 赞同：1
> 
> 时间：2013-01-22T21:43:05.440
> 
> 标签：gcc, breakpoints

我正在玩调试器。我正在做的实际任务是观察指令指针在我运行代码时如何变化。

但是，我很难理解其他内容。我在第 6 行、strcpy（位于第 7 行）和第 8 行设置断点。设置断点后，我运行它。

为什么它以不同的顺序通过断点？断点2、断点1和断点3？

我的另一个问题...断点 1 设置在第 6 行。然而，当我们到达该断点时，它显示“char_array2.c:7”。我知道第 6 行是空的，断点会在读取第 7 行的任何部分之前停止吗？

```
(gdb) list
1   #include <stdio.h>
2   #include <string.h>
3   
4   int main() {
5      char str_a[20];
6   
7      strcpy(str_a, "Hello World!\n");
8      printf(str_a);
9   }
(gdb) 
Line number 10 out of range; char_array2.c has 9 lines.
(gdb) break 6
Breakpoint 1 at 0x100000ec8: file char_array2.c, line 6.
(gdb) break strcpy
Breakpoint 2 at 0x20c49ba5c77e20
(gdb) break 8
Breakpoint 3 at 0x100000edd: file char_array2.c, line 8.
(gdb) run
Starting program: /Users/Guest1/Desktop/Hacking files/char_array2 
Reading symbols for shared libraries +. done

Breakpoint 2, 0x00007fff8601ce20 in strcpy ()
(gdb) continue
Continuing.

Breakpoint 1, main () at char_array2.c:7
7      strcpy(str_a, "Hello World!\n");
(gdb) continue
Continuing.

Breakpoint 3, main () at char_array2.c:8
8      printf(str_a); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:47:33.190

`Line number 10 out of range; char_array2.c has 9 lines`高度可疑。我认为，您的 GDB 无法确定行尾。在您的源文件中转换`\n`为`\r\n`，并设置您的编辑器以使用`\r\n`

另外，我同意 ams 的观点，完全可以肯定的是，使用显式`-g -O0`选项进行编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:24:58.490

你没有说你是如何构建你的程序的，但我猜你启用了编译器优化。

当编译器优化您的代码时，它允许以它喜欢的任何方式重新排序您的代码，前提是无法通过观察正在运行的程序来判断（即，它在逻辑上保持等效）。当然，如果您附加一个调试器并停止程序，您可以看到重新排序，这就是调试未优化代码的常见原因。

编译器不仅可以重新排序您的代码行，还可以重新排序每一行中的所有单独操作。断点通常会在与给定行关联的第一条指令上设置，但如果您单步执行一个函数，您通常会看到程序显然多次跳回每一行，然后您可以看到这些行是如何交错的。

当然，当编译器通过删除重复操作来优化代码时，并不总是清楚给定指令与哪个源代码行相关，然后您可能会出现一些非常违反直觉的行为。

最后，编译器可以自由地完全删除任何未使用的代码，或者可以与另一个代码组合，因此它可能看起来根本不会命中代码行。

# python - Python - 在字典中打印键的字符串

> ID：14468562
> 
> 赞同：4
> 
> 时间：2013-01-22T21:43:26.437
> 
> 标签：python, python-3.x

我的代码如下，

```
prices = {'banana':'4', 'apple':'2', 'orange':'1.5', 'pear':'3'}
stock = {'banana':6, 'apple':0, 'orange':32, 'pear':15}

print(prices.keys)
print("price :" + str(prices.values))
print("stock :" + str(stock.values)) 
```

我不明白为什么我会吐出一个看起来好像我要求输入类型的东西。是什么赋予了？

实际上，我的代码逻辑是错误的。

我希望代码吐出以下内容

关键价格：价值股票：价值

例如，这就是它的外观

苹果价格：2 库存：0

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T21:44:00.540

您需要调用这些方法来获得任何有用的信息：

```
print (prices.keys()) 
```

但是，在 python3.x 中，这仍然不是特别适合打印，因为它会打印您可能不想看到的额外垃圾。

您可能需要考虑`str.join`在从`dict.keys()`or返回的对象上使用`dict.values()`：

```
print (' '.join(prices.keys())) 
```

`str.join`几乎可以满足您的期望。左边的字符串是在您传递给的迭代中的每个元素之间插入的分隔符`join`。例如：

```
"!".join(["foo","bar","baz"]) 
```

将产生字符串： `"foo!bar!baz"`. 这里唯一的问题是您传递给的迭代中的每个元素都`str.join`必须是一个字符串。

* * *

至于你的编辑，

```
prices = {'banana':'4', 'apple':'2', 'orange':'1.5', 'pear':'3'}
stock = {'banana':6, 'apple':0, 'orange':32, 'pear':15}
prices.keys() & stock.keys()  #{'orange', 'pear', 'banana', 'apple'}
for item in (prices.keys() & stock.keys()):
    print (item,"price:",prices[item],"stock:",stock[item]) 
```

输出：

```
orange price: 1.5 stock: 32
pear price: 3 stock: 15
banana price: 4 stock: 6
apple price: 2 stock: 0 
```

似乎这就是你想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T22:39:34.603

```
prices = {'banana':'4', 'apple':'2', 'pear':'3'}
stock = {'banana':6, 'orange':32, 'pear':15}
for item in (prices.keys() & stock.keys()):
    print (item,"price:",prices.get(item,'-'),"stock:",stock.get(item,0)) 
```

生产

```
orange price: - stock: 32
pear price: 3 stock: 15
banana price: 4 stock: 6
apple price: 2 stock: 0 
```

如果股票和价格字典在每个字典中包含不同的水果（“键”），则默认使用 get 会有所帮助。该`.get()`功能在这里真的很有帮助。

正如 mgilson 所提到的，以下行是创建全套水果的地方。

```
prices.keys() & stock.keys()  #{'orange', 'pear', 'banana', 'apple'} 
```

我之前也使用 set 完成了此操作

```
set(prices.keys().extend(stock.keys()) 
```

但我更喜欢这种`&`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-21T18:07:48.960

前两个答案建议使用`.keys()`，但[请注意，](https://stackoverflow.com/questions/8953627/python-dictionary-keys-error)这将返回一个类型的对象`dict_keys`，而不是像字符串列表这样的可索引对象。要将键列表作为字符串获取，您应该简单地将字典转换为列表：`list(my_dict)`。

```
>>> prices = {'banana':'4', 'apple':'2', 'pear':'3'}
>>> print(prices.keys())
dict_keys(['banana', 'apple', 'pear'])
>>> prices.keys()[2]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'dict_keys' object does not support indexing
>>> print(list(prices))
['banana', 'apple', 'pear']
>>> list(prices)[2]
'pear' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-12T15:52:25.160

由于两个字典/对象具有相同的键，您可以使用一个简单的 for 循环来迭代其中一个字典并打印每个项目的价格和库存。

```
prices = {"banana": 4, "apple": 2, "orange": 1.5, "pear": 3}
stock  = {"banana": 6, "apple": 0, "orange": 32, "pear": 15}
for key in prices:
    print "stock: %s" % stock[key]
    print "prices: %s" % prices[key] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-13T05:22:03.003

```
prices = {"banana": 4, "apple": 2, "orange": 1.5, "pear": 3}
stock  = {"banana": 6, "apple": 0, "orange": 32, "pear": 15}
for key in prices:
    print key
    print "stock: %s" % stock[key]
    print "prices: %s" % prices[key] 
```

输出：

```
orange
stock: 32
prices: 1.5
pear
stock: 15
prices: 3
banana
stock: 6
prices: 4
apple
stock: 0
prices: 2
=> None 
```

# php - 在新订单邮件中添加产品链接到 sku（或产品名称）

> ID：14468564
> 
> 赞同：0
> 
> 时间：2013-01-22T21:43:29.650
> 
> 标签：php, email, magento

hy，我正在尝试添加一个链接到客户在 magento 下新订单时收到的新订单电子邮件（我的版本 1.6.2.0）

我已经编辑了/public_html/app/design/frontend/base/default/template/email/order/items/order/default.phtml，内容如下：

```
<?php $_item = $this->getItem() ?>
<?php $_order = $this->getItem()->getOrder() ?>
----
<!-- Start of edit file -->  
<a href="<?php echo $this->getProductUrl($_item) ?>">
<?php echo $this->htmlEscape($this->getSku($_item)) ?></a> 
```

当我在 sku 列中收到确认电子邮件时，颜色从黑色（默认 css）变为浅蓝色链接，但它没有任何链接属性，如下所示： [email_photo](https://lh6.googleusercontent.com/-IXDN4Qhpv6o/UP8FusEMVII/AAAAAAAAAB8/pPj_zDzoCAc/s656/link_email.jpg) 我也尝试过：

```
<a href="<?php echo $this->getUrlPath($_item) ?>">
<?php echo $this->htmlEscape($this->getSku($_item)) ?></a> 
```

我最终得到了同样的结果。

谁能告诉我我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T21:58:19.227

排队

```
<a href="<?php echo $this->getUrlPath($_item) ?>"> 
```

$this 是块 *Mage_Sales_Block_Order_Email_Items_Order_Default* 的一个实例。它没有函数 getUrlPath() 或 getProductUrl。

您应该使用 $_item 变量来获取产品对象，然后使用它来获取其 URL

```
$_item->getProduct()->getProductUrl() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:59:48.683

我之前尝试过这段代码：

```
<a href="<?php echo $_item->getProduct()->getUrlPath() ?>"><?php echo $this->htmlEscape($this->getSku($_item)) ?></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-05T13:10:01.563

**Magento 2**

要将产品名称与其订单电子邮件中的产品页面链接，请编辑以下文件：

```
Magento_Sales/templates/email/items/order/default.phtml
Magento_Sales/templates/email/items/invoice/default.phtml
Magento_Sales/templates/email/items/shipment/default.phtml 
```

要获取产品 URL，请使用以下代码片段并将其插入链接的 href 属性中。

```
<?= $_item->getProduct()->getProductUrl(); ?> 
```

例如，

```
<p class="product-name"> <a href="<?= $_item->getProduct()->getProductUrl(); ?>"> <?= $block->escapeHtml($_item->getName()); ?> </a> </p> 
```

代码片段的结果将是 Magento 电子邮件中可点击的产品名称。

教程来自：[https ://themes.email/magento/product-links-in-magento-order-emails.html](https://themes.email/magento/product-links-in-magento-order-emails.html)

# android - 删除 App Logo 旁边的空白区域（ActionBar Sherlock）

> ID：14468566
> 
> 赞同：4
> 
> 时间：2013-01-22T21:43:32.530
> 
> 标签：android, actionbarsherlock, android-theme

有人能告诉我如何消除应用程序徽标左侧的填充吗？？？

这就是我所说的[http://s9.postimage.org/ksxjpx1e7/Untitled.png](http://s9.postimage.org/ksxjpx1e7/Untitled.png)

即使使用 ABS 演示，您也可以通过添加`AndroidManifest.xml`

`android:logo="@drawable/icon"`

我什至尝试`abs__action_bar_home.xml`直接编辑，但不知何故，该死的填充仍然存在。

```
<view xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    class="com.actionbarsherlock.internal.widget.ActionBarView$HomeView"
    android:background="#00ff00" >

    <ImageView
        android:id="@id/abs__home"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
    android:padding="0dip"
    android:layout_marginLeft="0dip"
        android:layout_marginBottom="@dimen/abs__action_bar_icon_vertical_padding"
        android:layout_marginRight="8dip"
        android:layout_marginTop="@dimen/abs__action_bar_icon_vertical_padding"
        android:adjustViewBounds="true"
        android:contentDescription="@null"
        android:scaleType="fitCenter" />

        <ImageView
        android:id="@id/abs__up"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|left"
        android:layout_marginRight="-8dip"
        android:contentDescription="@null"
        android:src="?attr/homeAsUpIndicator"
        android:visibility="gone"
        tools:ignore="ContentDescription" />

</view> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T10:24:32.663

正如其中一条评论指出的那样，填充是为向上图标保留的。即使未显示向上图标，填充也会存在（因此当您隐藏/显示向上图标时徽标不会移动）。使用操作栏（和`ActionBarSherlock`）基本上有两种方法可以消除间隙：

1.**去掉向上图标 向上图标**
的大小会影响左边的内边距，如果你放的图片比箭头大，间隙会更大。如果你删除它，差距就会消失。请注意，删除向上图标可能不会带来您想要的确切外观。向上图标和徽标部分重叠（向上图标具有负的右边距），因此删除向上图标（它实际上将图像设置为空，不影响可见性）可能会导致徽标部分隐藏在左侧边缘的后面屏幕。要删除设置为
的向上图标。`android:homeAsUpIndicator``@null`

```
<style name="MyTheme" parent="@style/Theme.Sherlock">
    <item name="homeAsUpIndicator">@null</item>
    <item name="android:homeAsUpIndicator">@null</item>
</style> 
```

2.**隐藏主页布局，改用自定义视图**
这样工作量更大，但可以更好地影响结果。您需要将图标和标题放入自定义视图中。要隐藏主页布局并显示自定义，您必须`android:displayOptions`在操作栏样式中进行设置。然后在代码中设置正确的自定义视图（您也可以在样式中设置它，但那样会出错）。

```
<style name="MyTheme" parent="@style/Theme.Sherlock">
    <item name="actionBarStyle">@style/MyActionBarStyle</item>
    <item name="android:actionBarStyle">@style/MyActionBarStyle</item>
</style>

<style name="MyActionBarStyle" parent="@style/Widget.Sherlock.ActionBar">
    <item name="displayOptions">showCustom</item>
    <item name="android:displayOptions">showCustom</item>
</style> 
```

# c# - 带有 DropDownList 问题的数据绑定 FormView

> ID：14468567
> 
> 赞同：0
> 
> 时间：2013-01-22T21:43:33.050
> 
> 标签：c#, asp.net, ddl, formview

我正在努力实现以下目标：

1.  消除`FormView’s`默认的编辑链接按钮。

2.  使用当前数据和其他 DDL 数据选择显示`FormView`处于编辑模式。`Page_Load`

目前我有以下将 DDL 绑定到基于`id = x`等的当前数据库值：

```
<asp:DropDownList ID="DropDownList1" runat="server"
SelectedValue='<%# Bind("xxx") %>' 
DataSourceID="xxx"
DataTextField="xxx"
DataValueField="xxx"
ondatabound="DropDownList1_DataBound"> 
```

通过 C# 代码，我这样做是为了添加额外的 DDL 列表项以供选择：（这是浪费我的精力，因为数据已经在数据库中了！）

```
protected void DropDownList1 _DataBound(object sender, EventArgs e)
{
     DropDownList DropDownList1 = (DropDownList)FormView1.FindControl("DropDownList1");
     DropDownList1.Items.Insert(1, new ListItem("0 - 1 km/h", "0"));
     DropDownList1.Items.Insert(2, new ListItem("2 - 5 km/h", "1"));
     DropDownList1.Items.Insert(3, new ListItem("6 - 11 km/h", "2"));
     DropDownList1.Items.Insert(4, new ListItem("12 - 19 km/h", "3"));
     DropDownList1.Items.Insert(5, new ListItem("20 - 28 km/h", "4"));
} 
```

一定有更好的方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:57:50.870

不知道你是如何连接到数据库的，但如果你使用 datacontext linq to sql 是一个很好的方法。您的“ddl”将有一个 onLoad 事件，您可以在后面的代码中使用查询。例如：

```
<asp:DropDownList ID="DropDownList1" runat="server"
                  onLoad="DropDownList1_Load"
                  AutoPostBack="true" /> 
```

然后在后面的代码中：

```
protected void DropDownList1_Load(object sender, EventARgs e)
{
    YourDataContext db = new YourDataContext();
    var qry = from a in db.table1
              select a;
    foreach(var itm in qry)
    {
        DropDownList1.Items.Add(new ListItem(itm.speedRange.ToString(), itm.id.ToString()));
     db.Dispose();
} 
```

# javascript - $(window).resize 不起作用

> ID：14468572
> 
> 赞同：1
> 
> 时间：2013-01-22T21:43:43.653
> 
> 标签：javascript, jquery, html

`$(window).resize`不工作，我错过了什么？

所以我的这个页面有一个 350px 宽度的垂直菜单，水平居中。链接打开显示不同内容的 iframe。显示外部站点的 iframe 获得了他的宽度：`$("#iframeweb").width($(document).width() - $('#menu').width())`以便它填满屏幕，将菜单推到一边。

该部分有效，但它还需要在调整窗口大小时更改宽度，但它什么也不做......

编码：

```
<div id="wrapper">
    <div id="outer">
    <div id="inner">
        <iframe name="iframeweb" id="iframeweb"></iframe>
        <div id="menu">
                </div>
        <iframe name="iframeA4" id="iframeA4"></iframe>
    </div>
    </div>
    </div>

<script type="text/javascript">
$(window).resize(function() {
    $("#iframeweb").width($(document).width() - $('#menu').width());
};
</script>

<script type="text/javascript">
$("#linkA4").click(function(){
    $("#iframeA4")
        .hide('fast')
        .animate({"width": "0px"}, 'fast')
        .animate({"width": "210mm"}, 'fast')
        .show('fast');  
    $("#iframeweb").hide('fast');
});

$("#linkweb").click(function(){
    $("#iframeA4")
        .animate({"width": "0px"}, 'fast')
        .hide('fast');
    $("#iframeweb")
        .hide('fast')
        .width($(document).width() - $('#menu').width())
        .show('fast');
});
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T21:46:16.633

你有一个简单的语法错误，关闭括号

```
$(window).resize(function() {
    $("#iframeweb").width($(document).width() - $('#menu').width());
}); // <-- 
```

# maven - apache cxf maven 插件 wsdl 通配符配置

> ID：14468576
> 
> 赞同：0
> 
> 时间：2013-01-22T21:43:54.480
> 
> 标签：maven, path, wsdl, cxf, relative-path

在一个 Maven 项目结构中，我在资源文件夹下的单独文件夹中组织了几个 wsdls/模式。我必须在 pom.xml 中配置 apache cxf maven 插件才能从所有 wsdls 生成类。我如何为此配置带有通配符的相对路径？我使用了以下但没有成功。

```
<wsdlOption>                                       
 <wsdl>${basedir}/src/main/resources/wsdl/**/*.wsdl</wsdl>
</wsdlOption> 
```

请让我知道如何配置这样的相对路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T06:27:56.467

从[CXF doc](http://cxf.apache.org/docs/maven-cxf-codegen-plugin-wsdl-to-java.html#Mavencxf-codegen-plugin%28WSDLtoJava%29-Example5%3aUsingwsdlRootwithincludes/excludespatterns)，您应该可以这样做：

```
<configuration>
    <sourceRoot>${project.build.directory}/generated/cxf</sourceRoot>
    <wsdlRoot>${project.basedir}/src/main/resources/wsdl</wsdlRoot>
    <includes>
        <include>*.wsdl</include>
    </includes>
</configuration> 
```

# sqlite - 具有数百万条记录的 SQLite 中的高效分页

> ID：14468586
> 
> 赞同：115
> 
> 时间：2013-01-22T21:44:27.000
> 
> 标签：sqlite

我需要在列表视图中显示 SQLite 结果。当然，我需要对结果进行分页。

第一个选项是使用 LIMIT 子句。例如：

```
SELECT * FROM Table LIMIT 100, 5000 
```

它返回记录 5001 到 5100。问题是 SQLite 在内部“读取”前 5000 条记录，效率不高。

当有很多记录时，最好的分页方法是什么？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-01-22T22:03:00.407

请注意，您始终必须使用`ORDER BY`子句；否则，顺序是任意的。

要进行有效的分页，请保存已排序字段的第一个/最后一个显示值，并在显示下一页时紧随其后：

```
SELECT *
FROM MyTable
WHERE SomeColumn > LastValue
ORDER BY SomeColumn
LIMIT 100; 
```

[（这在 SQLite wiki 上](http://www2.sqlite.org/cvstrac/wiki?p=ScrollingCursor)有更详细的解释。）

当您有多个排序列（以及 SQLite 3.15 或更高版本）时，您可以为此使用[行值比较](http://www.sqlite.org/rowvalue.html#scrolling_window_queries)：

```
SELECT *
FROM MyTable
WHERE (SomeColumn, OtherColumn) > (LastSome, LastOther)
ORDER BY SomeColumn, OtherColumn
LIMIT 100; 
```

# youtube - 什么是身份证？检索 YouTube 分析数据

> ID：14468587
> 
> 赞同：0
> 
> 时间：2013-01-22T21:44:37.430
> 
> 标签：youtube, google-analytics

我正在使用[YouTube 的分析资源](https://developers.google.com/youtube/analytics/v1/)管理器，我正在尝试查询服务以获取数据，但我不知道如何填写第一个参数。

第一个参数是 IDS，说明 IDS 是：用于检索 YouTube 分析数据的唯一频道或内容所有者 ID。“C”是加密的频道 ID，“O”是内容所有者名称`channel==C`。`contentOwner==O`（细绳）

我在哪里可以得到`contentOwner`或 频道？

# sql-server - SQL Server 2008 R2 错误还是什么？

> ID：14468588
> 
> 赞同：2
> 
> 时间：2013-01-22T21:44:40.007
> 
> 标签：sql-server, sql-server-2008

我正在观察一种奇怪的行为。以下与 to 的子字符串转换相关的代码可以`nvarchar`正常`tinyint`工作：

```
DECLARE @s nvarchar(50) = N'Line 1'
DECLARE @n tinyint = SUBSTRING(@s, 6, 10)

SELECT
        N'Line 1' AS explicit_nvarchar,
        @s AS nvarchar_variable,
        SUBSTRING(@s, 6, 10) AS nvarchar_substring
        , @n AS tinyint_var_converted_earlier
        , CAST(SUBSTRING(@s, 6, 10) AS tinyint) AS cast_sub_var
        , CAST(SUBSTRING(N'Line 1', 6, 10) AS tinyint) AS cast_nvarchar_substr 
```

我可以在 Microsoft SQL Server Management Studio 中观察到以下输出：

![在此处输入图像描述](../Images/b98b92c5d853dc5a8316d4933d9479a3.png).

`SELECT`但是，如果注释行未注释，则尝试处理表中的代码会失败：

```
Select 
    [order].[identifier] As [order_identifier],
    [plan_data].[starts_on] As [from],
    [plan_data].[ends_on] As [to],
    [workplace].[identifier] AS line_identifier,
    SUBSTRING([workplace].[identifier], 6, 10) AS line_no_str
    --, CAST(SUBSTRING([workplace].[identifier], 6, 10) AS int) AS line_no
From 
    ... 
```

带有注释行... ![在此处输入图像描述](../Images/680aae9f5cb502e7bee6ebe2b7c91b93.png)

但带有未注释的行（用于转换为`tinyint`or `int`）...

![在此处输入图像描述](../Images/af010adfee166428b21d38f3fb5736d6.png)

**更新：**奇怪。我已将最后一行添加到 WHERE 以检查所有行是否包含`'Line...`

```
Where
    [plan].[identifier] = @lPlanIdentifier And
    (
        [plan_data].[starts_on] Between @fromUTC And @toUTC Or
        [plan_data].[ends_on] Between @fromUTC And @toUTC)
    AND LEFT([workplace].[identifier], 4) = N'Line' 
```

...突然之间，它也适用于未注释的行。我怎样才能发现导致问题的原因？

**Update2：**我应该完全按照[Hamlet Hakobyan 的答案](https://stackoverflow.com/a/14468720/1346705)发布。当查看表格内部时，我可以看到：

![在此处输入图像描述](../Images/00ebd06b305b6f0a21a8c4219f8fa357.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T21:53:42.930

您在返回的`identifier`列中有值。`SUBSTRING([workplace].[identifier], 6, 10)``ined`

试试这个查询：

```
SELECT * FROM [workplace]
WHERE SUBSTRING([identifier], 6, 10) = N'ined' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T22:19:29.960

如评论和其他答案所示，您有一个`[workplace].[identifier]`或多行的值，该值无法转换为`INT`. 当您将以下内容添加到`WHERE`子句时，您在子句中转换之前消除了包含此数据的行`SELECT`：

```
LEFT([workplace].[identifier], 4) = N'Line' 
```

运行以下命令以获取不同的值列表`[workplace].[identifier]`

```
SELECT DISTINCT [workplace].[identifier]
FROM [workplace] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T22:22:11.240

每当您将 varchar 转换为数字时出现错误，查找数据的最简单方法是使用`IsNumeric`. 但是`IsNumeric`并不意味着它值得删除[G Mastros](https://stackoverflow.com/users/1408129/g-mastros)在[此答案](https://stackoverflow.com/a/338122/119477)`IsInteger`中描述的科学或十进制格式

```
SELECT
    [order].[identifier] As [order_identifier],
    [plan_data].[starts_on] As [from],
    [plan_data].[ends_on] As [to],
    [workplace].[identifier] AS line_identifier,
    SUBSTRING([workplace].[identifier], 6, 10) AS line_no_str
    --, CAST(SUBSTRING([workplace].[identifier], 6, 10) AS int) AS line_no
FROM
  ...

WHERE 

   IsNumeric(SUBSTRING([workplace].[identifier], 6, 10) + '.0e0') = 0 
```

如果您无法修复它，但您可以使用默认值，而不是仅在合法的情况下使用 case 语句进行转换。

```
SELECT
    [order].[identifier] As [order_identifier],
    [plan_data].[starts_on] As [from],
    [plan_data].[ends_on] As [to],
    [workplace].[identifier] AS line_identifier,
    CASE WHEN IsNumeric(SUBSTRING([workplace].[identifier], 6, 10) + '.0e0') = 1
             THEN CAST(SUBSTRING([workplace].[identifier], 6, 10) AS int) 
             ELSE Null --Default to null in this example
    END as line_no 
```

# php - Android - 上传到 PHP 服务器时图像变为空

> ID：14468589
> 
> 赞同：1
> 
> 时间：2013-01-22T21:44:40.087
> 
> 标签：php, android, file-upload, image-uploading

我正在尝试将 img 从 android 手机上传到 php 服务器。

但是当它上传它的数据丢失（文件存在但有0字节）

我不知道问题出在 php 端还是 android 端。

这是我使用上传的代码

PHP：

```
<?php
$base=$_REQUEST['image'];
$binary=base64_decode($base);
header('Content-Type: bitmap; charset=utf-8');
$file = fopen('uploaded_image.jpg', 'wb');
fwrite($file, $binary);
fclose($file);
echo 'Image upload complete!!, Please check your php file directory……';
?> 
```

爪哇：

```
private  void httpPostFileUpload(String fpath){
        HttpURLConnection connection = null;
        DataOutputStream outputStream = null;
        DataInputStream inputStream = null;

        String pathToOurFile = fpath;
        Log.v("file path",fpath.toString());
        String urlServer = "http://leojg.alwaysdata.net/tests/androidConnect/upload_image.php";
        //String urlServer = "http://65.182.110.63/public/handle_upload.php";
        String lineEnd = "\r\n";
        String twoHyphens = "--";
        String boundary =  "*****";
        String fname = "";

        int bytesRead, bytesAvailable, bufferSize;
        byte[] buffer;
        int maxBufferSize = 1*1024*1024;

        try
        {
            File f = new File(pathToOurFile);
            fname =  f.getName();

            FileInputStream fileInputStream = new FileInputStream(f);

            URL url = new URL(urlServer);
            connection = (HttpURLConnection) url.openConnection();

            // Allow Inputs & Outputs
            connection.setDoInput(true);
            connection.setDoOutput(true);
            connection.setUseCaches(false);

            // Enable POST method
            connection.setRequestMethod("POST");

            connection.setRequestProperty("Connection", "Keep-Alive");
            connection.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

            outputStream = new DataOutputStream( connection.getOutputStream() );
            outputStream.writeBytes(twoHyphens + boundary + lineEnd);
            outputStream.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + pathToOurFile +"\"" + lineEnd);
            outputStream.writeBytes(lineEnd);

            Log.v("ouput stream",outputStream.toString());              

            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            buffer = new byte[bufferSize];

            // Read file
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);

            while (bytesRead > 0)
            {
                outputStream.write(buffer, 0, bufferSize);
                bytesAvailable = fileInputStream.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            }

            outputStream.writeBytes(lineEnd);
            outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

            // Responses from the server (code and message)
            int serverResponseCode = connection.getResponseCode();
            String serverResponseMessage = connection.getResponseMessage();

            Log.d("amanda", "upload async finished, server response : " + serverResponseMessage);

            fileInputStream.close();
            fileInputStream = null;
            outputStream.flush();
            outputStream.close();
            outputStream = null;
            f= null;

            parent.invokeJs("pictureUploadEnded('" + fname + "')");
            //this.delete(fpath);

        }
            catch (Exception ex)
        {
                Log.d("amanda", "exception uploading image : " + ex.getMessage());
        }     
} 
```

在这里你可以看到 img 的存储位置[http://leojg.alwaysdata.net/tests/androidConnect/](http://leojg.alwaysdata.net/tests/androidConnect/)

解决方案：

```
<?php
$target_path = "./";
$target_path = $target_path . basename( $_FILES['uploadedfile']['name']);
if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
 echo "The file ".  basename( $_FILES['uploadedfile']['name']).
 " has been uploaded";
} else{
 echo "There was an error uploading the file, please try again!";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:49:22.463

您无法从`$_REQUEST`. 试试`$_FILES`。[http://php.net/manual/en/features.file-upload.php](http://php.net/manual/en/features.file-upload.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T03:08:23.723

你必须使用PHP上传吗？我总觉得 FTP 上传更容易实现（后端可以使用 FileZilla）而且更稳定！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T21:53:59.240

尝试以下图像加载方法：

[http://loopj.com/android-async-http/](http://loopj.com/android-async-http/)

让我知道它是否有效。

# android - 创建一个将根据操作动态刷新的 AlertDialog

> ID：14468596
> 
> 赞同：1
> 
> 时间：2013-01-22T21:44:55.697
> 
> 标签：android

我正在处理一个表示同步操作的对话框。所以我有可变数量的记录，当我在我的应用程序上选择“同步”按钮时，它会显示如下内容：

“同步：记录 x of y”

其中 x 是当前记录，y 是总数。随着记录成功同步，对话框会刷新以表示这一点。

查看 Android API，看起来创建 AlertDialog 是可行的方法，但我不确定如何编写代码，以便 AlertDialog 实例在执行同步操作时动态更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:51:43.733

您可以使用 ProgressDialog。启动 AsyncTask，在 onPreExecute() 回调中创建 ProgressDialog，在 onPublishProgress() 回调中更新它（出于线程安全原因，您必须从 doInBackground() 方法调用 publishProgress()），然后在 onPostExecute() 中将其关闭打回来。

AsyncTask 文档的内容与您需要做的非常接近：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:02:58.293

为新对话框创建一个新 Activity，添加 Android 清单。

新建一个对话框，如果为空，则取消该对话框。并在NewIntent 上捕获新的Intent 以更新对话框的内容。如果您有任何问题，请告诉我。

```
public class NewDialog extends Activity {

private AlertDialog alertDialog;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Remove title bar
    requestWindowFeature(Window.FEATURE_NO_TITLE);
}

@Override
protected void onStart() {
    super.onStart();
    showNextDialog();
}

// Cancel the dialog if it is not null (i.e. contains message from previous dialog)
protected Dialog showNextDialog() {
        if (alertDialog != null) {
            alertDialog.cancel();
            alertDialog = null;
        }

// Build dialog with updated info
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle(dialogTitle);
        builder.setMessage(dialogMessage);
        alertDialog = builder.create();
        alertDialog.show();
        return alertDialog;
}

protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);
    showNextDialog();
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T21:51:22.350

这是我曾经见过的将文本居中的技巧`AlertDialog`：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setTitle("Title");
builder.setMessage("Message");
builder.setPositiveButton("OK", null);
AlertDialog dialog = builder.show();

// Must call show() prior to fetching text view
TextView messageView = (TextView)dialog.findViewById(android.R.id.message);
messageView.setGravity(Gravity.CENTER); 
```

我敢打赌如果你把最后一行改成

```
messageView.setText("Whatever you need"); 
```

它可以工作

# sql - 将存储过程输入参数分配给局部变量是否有助于优化查询？

> ID：14468603
> 
> 赞同：2
> 
> 时间：2013-01-22T21:45:17.310
> 
> 标签：sql, sql-server-2008, tsql, stored-procedures, query-optimization

我有一个需要 5 个输入参数的存储过程。该过程有点复杂，大约需要2分钟才能执行。我正在优化查询。

所以，我的问题是，将输入参数分配给局部变量然后在过程中使用局部变量总是有帮助吗？

如果是这样，它有什么帮助？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T22:56:38.470

我不会尝试解释参数嗅探的全部细节，但简而言之，它并不**总是**有帮助（而且它可能会阻碍）。

想象一个表 (T) 有一个主键和一个索引日期列 (A)，表中有 1,000 行，400 行具有相同的 A 值（比如说今天 20130122），剩下的 600 行是接下来的 600 天，所以每个日期只有 1 条记录。

这个查询：

```
SELECT *
FROM T
WHERE A = '20130122'; 
```

将产生不同的执行计划：

```
SELECT *
FROM T
WHERE A = '20130123'; 
```

由于统计数据表明将返回 1,000 行中的前 400 行，因此优化器应该认识到表扫描将比书签查找更有效，而第二个只会产生 1 行，因此书签查找将更多更高效。

现在，回到你的问题，如果我们把它变成一个程序：

```
CREATE PROCEDURE dbo.GetFromT @Param DATE
AS
    SELECT *
    FROM T
    WHERE A = @Param 
```

然后运行

```
EXECUTE dbo.GetFromT '20130122'; --400 rows 
```

将使用带有表扫描的查询计划，如果您第一次运行它时使用“20130123”作为参数，它将存储书签查找计划。在重新编译程序之前，该计划将保持不变。做这样的事情：

```
CREATE PROCEDURE dbo.GetFromT @Param VARCHAR(5)
AS
    DECLARE @Param2 VARCHAR(5) = @Param;
    SELECT *
    FROM T
    WHERE A = @Param2 
```

然后运行：

```
EXECUTE dbo.GetFromT '20130122'; 
```

虽然过程是一次性编译的，但它不能正常流动，所以在第一次编译时创建的查询计划不知道@Param2 会变成和@param 一样，所以优化器（不知道要多少行expect) 将假设将返回 300 (30%)，因此认为表扫描比书签查找更有效。如果您使用“20130123”作为参数运行相同的过程，它将产生相同的计划（不管它首先使用什么参数调用），因为统计信息不能用于未知值。因此，为“20130122”运行此过程会更有效，但对于所有其他值，效率将低于没有本地参数的情况（假设没有本地参数的过程首先使用除“20130122”之外的任何内容调用）

* * *

**一些用于演示的查询，以便您自己查看执行计划**

创建架构和示例数据

```
CREATE TABLE T (ID INT IDENTITY(1, 1) PRIMARY KEY, A DATE NOT NULL, B INT,C INT, D INT, E INT);

CREATE NONCLUSTERED INDEX IX_T ON T (A);

INSERT T (A, B, C, D, E)
SELECT  TOP 400 CAST('20130122' AS DATE), number, 2, 3, 4 
FROM    Master..spt_values 
WHERE   type = 'P'
UNION ALL
SELECT TOP 600 DATEADD(DAY, number, CAST('20130122' AS DATE)), number, 2, 3, 4 
FROM    Master..spt_values 
WHERE   Type = 'P';
GO
CREATE PROCEDURE dbo.GetFromT @Param DATE
AS
    SELECT *
    FROM T
    WHERE A = @Param
GO
CREATE PROCEDURE dbo.GetFromT2 @Param DATE
AS
    DECLARE @Param2 DATE = @Param;
    SELECT *
    FROM T
    WHERE A = @Param2
GO 
```

运行程序（显示实际执行计划）：

```
EXECUTE GetFromT '20130122';
EXECUTE GetFromT '20130123';
EXECUTE GetFromT2 '20130122';
EXECUTE GetFromT2 '20130123';
GO
EXECUTE SP_RECOMPILE GetFromT;
EXECUTE SP_RECOMPILE GetFromT2;
GO
EXECUTE GetFromT '20130123';
EXECUTE GetFromT '20130122';
EXECUTE GetFromT2 '20130123';
EXECUTE GetFromT2 '20130122'; 
```

您将看到第一次`GetFromT`编译它使用表扫描，并在使用参数“20130122”运行时保留它，`GetFromT2`还使用表扫描并保留“20130122”的计划。

在为重新编译设置过程并再次运行（注意以不同的顺序）后，`GetFromT`使用书签循环，并保留“20130122”的计划，尽管之前认为表扫描是更合适的计划。`GetFromT2`不受订单影响，计划与重新编译前相同。

因此，总而言之，这取决于数据的分布、索引、重新编译的频率以及过程是否会从使用局部变量中受益的运气。它当然并不**总是**有帮助。

* * *

希望我对使用本地参数、执行计划和存储过程编译的效果有所了解。如果我完全失败了，或者错过了一个关键点，可以在这里找到更深入的解释：

[http://www.sommarskog.se/query-plan-mysteries.html](http://www.sommarskog.se/query-plan-mysteries.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T22:28:35.270

我不相信。现代计算机体系结构在处理器附近有大量缓存，用于放入存储过程值。本质上，您可以将它们视为位于加载到本地缓存内存中的“堆栈”上。

如果您有输出参数，那么可能将输入值复制到局部变量将消除间接步骤。但是，第一次执行间接时，目标内存将被放入本地缓存中，并且可能会保留在那里。

所以，不，我不认为这是一个重要的优化。

但是，您总是可以对存储过程的不同变体进行计时，看看这是否有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-06T21:50:41.837

它确实有帮助。

以下链接包含有关参数嗅探的更多详细信息。

[http://blogs.msdn.com/b/turgays/archive/2013/09/10/parameter-sniffing-problem-and-workarounds.aspx](http://blogs.msdn.com/b/turgays/archive/2013/09/10/parameter-sniffing-problem-and-workarounds.aspx)

[http://sqlperformance.com/2013/08/t-sql-queries/parameter-sniffing-embedding-and-the-recompile-options](http://sqlperformance.com/2013/08/t-sql-queries/parameter-sniffing-embedding-and-the-recompile-options)

当您第一次执行带参数的 SP 时，查询优化器会根据参数的值创建查询计划。查询优化器使用该特定值的统计数据来决定最佳查询计划。但是基数问题会影响这一点。这意味着如果您使用不同的参数值执行相同的 SP，则先前生成的查询计划可能不是最佳计划。

通过将参数分配给局部变量，我们对查询优化器隐藏了参数值。因此它为一般情况创建查询计划。

这与在 SP 中使用“OPTIMIZE FOR UNKNOWN”提示相同。

# jquery - 淘汰赛（模板绑定）：没有从模板内部调用 javascript(JQuery) 函数

> ID：14468611
> 
> 赞同：1
> 
> 时间：2013-01-22T21:46:15.510
> 
> 标签：jquery, html, knockout.js, templatebinding

我有一个主页，其中包含所有引用的脚本，在正文中我有一个具有模板数据绑定的 duv 容器，并且我的 htm 正在那里绑定。

问题是我由 Jquery 控制的功能无法正常工作。例如，当我将日期选择器放在引用 JavaScript 的主页中时，它可以工作，但在绑定到模板的 htm 中不起作用。

所有库都已正确加载，但我的 jquery 功能在模板内被调用时不起作用。

例如主页：

```
<script src="Scripts/jquery.js" type="text/javascript"></script>
<script src="Scripts/jquery.qtip.js"></script>
<script src="Scripts/foundation.min.js"></script>
<script src="Scripts/jquery.tablesorter.js"></script>
<script src="Scripts/jquery-ui.js"></script>
<script src="Scripts/languageswitcher.js"></script>

<div id="Container" ua-app-id="topVm" data-bind='template: {name: pageModel, data: pageVM }'>                   
</div>
<!-- Initialize JS Plugins -->
<script src="Scripts/app.js"></script> 
```

* * *

现在我的视图在运行时加载到主页中。在我看来，我有一个日期选择器，它不起作用。当我把它放在主页上时，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:35:09.427

我认为这是因为您的 jQuery 代码是在渲染模板之前运行的。您可以使用模板绑定中提供的 afterRender 回调来启用日期选择器。查看[文档](http://knockoutjs.com/documentation/template-binding.html#note_4_using_afterrender_afteradd_and_beforeremove)以获取更多信息和示例。

但实现这一点的更好方法是创建自定义绑定。像这样的东西：

```
ko.bindingHandlers.datepicker = {
    init: function(element){
        $(element).datepicker();
    },
    update: function(element) {
        $(element).datepicker('refresh');
    }
}; 
```

然后，您可以通过执行以下操作将文本输入到日期选择器中：

```
<input type="text" data-bind="datepicker:true" /> 
```

[在此处](http://knockoutjs.com/documentation/custom-bindings.html)阅读有关自定义绑定的更多信息

# javascript - jQuery ui selectable：当只选择一个元素时，函数不会对取消选择做出反应

> ID：14468612
> 
> 赞同：0
> 
> 时间：2013-01-22T21:46:14.920
> 
> 标签：javascript, jquery-ui-selectable

以下是 jQuery ui 的可选插件的代码。该代码允许我在没有套索和键盘的情况下使用鼠标选择多个可选对象。当我选择时，console.log 消息确实出现在 firebug 中。当我选择了多个可选并取消选择其中一些时，它也会出现。

问题是，当只选择一个元素而我取消选择它时，什么也没有发生。在这种情况下，我也需要出现 console.log 消息。

任何帮助表示赞赏

```
<style>
    #feedback { font-size: 1.4em; }
    #selectable .ui-selecting { background: #FECA40; }
    #selectable .ui-selected { background: #F39814; color: white; }
    #selectable { list-style-type: none; margin: 0; padding: 0; width: 60%; }
    #selectable li { margin: 3px; padding: 0.4em; font-size: 1.4em; height: 18px; }
</style>
<script type="text/javascript">
    $(function() {
        $("#selectable").bind("mousedown", function(e) {
            e.metaKey = true;
        }).selectable({
            stop: function() {
                var result = $( "#select-result" ).empty();
                $( ".ui-selected", this ).each(function() {
                    var index = $( "#selectable li" ).index( this );
                    result.append( " #" + ( index + 1 ) );

                                    console.log("test")
                            });
            }
        });
    });
</script>

<p id="feedback">
    <span>You've selected:</span> <span id="select-result">none</span>.
</p>

<ol id="selectable">
    <li class="ui-widget-content">Item 1</li>
    <li class="ui-widget-content">Item 2</li>
    <li class="ui-widget-content">Item 3</li>
    <li class="ui-widget-content">Item 4</li>
    <li class="ui-widget-content">Item 5</li>
    <li class="ui-widget-content">Item 6</li>
</ol> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:03:22.027

您的问题是您的 console.log 函数仅针对每个选定的项目触发，因为那里的选择器是“.ui-selected”。当您取消选择最后一个时，没有任何选择，因此该功能根本不会触发。

您可以为每个未选择的项目绑定另一个函数，如下所示：

```
$(function() {
    $("#selectable").bind("mousedown", function(e) {
        e.metaKey = true;
    }).selectable({
        stop: function() {
            var result = $( "#select-result" ).empty();

            $( ".ui-selected", this ).each(function() {
                var index = $( "#selectable li" ).index( this );
                result.append( " #" + ( index + 1 ) );
                 console.log("selected");
            });

            $( ".ui-selectee", this ).each(function() {
                var index = $( "#selectable li" ).index( this );
                result.append( " #" + ( index + 1 ) );
                console.log("not selected");
            });
        }
    });
}); 
```

您可以通过为您刚刚选择或未选择的每个项目触发一个函数来使其更具动态性。为此，您可以使用 selectable 的选定和未选定事件。这与停止同时触发，并为您刚刚选择或未选择的每个项目触发，具体取决于您使用的项目。例如：

```
$(function() {
    $("#selectable").bind("mousedown", function(e) {
        e.metaKey = true;
    }).selectable({
        stop: function() {
            // fires at stop
            var result = $( "#select-result" ).empty();
        },
        selected: function(event, obj) {
            // this function will fire for each item that was just selected
            // obj is the selected object
            console.log("selected");
            console.log(obj);

            // Not sure if this bit will work, could try this instead of obj
            var index = $( "#selectable li" ).index(obj);
            $('#result').append( " #" + ( index + 1 ) );

        },
        unselected: function(event, obj) {
            // this function will fire for each item that was just deselected
            // obj is the unselected object

            console.log("deselected");
            console.log(obj);

            // Not sure if this bit will work
            var index = $( "#selectable li" ).index(obj);
            $('#result #" + ( index + 1 )').remove();
        }
    });
}); 
```

# api - 在 Yii 应用中使用 Restful Api 的 TDD 最佳实践

> ID：14468614
> 
> 赞同：3
> 
> 时间：2013-01-22T21:46:28.590
> 
> 标签：api, unit-testing, yii, tdd, phpunit

我一直在寻找在 Yii 应用程序开发中使用 TDD 的最佳方式。如今，大多数 Web 应用程序都由一个前端 API 层（通常是 JSON）组成，以提供对服务器和后端的异步调用。就我而言，这个应用程序中最常用的测试是单元测试和功能测试。后者在指南和书籍中最广泛地展示了利用 PHPUnit + Selenium，但 Behat + Mink 似乎也很酷（但我对它还不是很自信）

如果您曾经使用过使用浏览器（如 Selenium）的功能测试，您就会知道运行它们的次数越少，您的感觉就越好。这导致它们更慢，更难维护，有时（如使用 JS SDK 的弹出式 FB 登录）很痛苦。

在使用单个网页应用程序时，我关心测试我的 api 的 JSON 输出。我想使用类似单元测试的方法来测试这些功能，以便更快地进行更易于维护的测试。考虑到我的控制器的大部分操作对使用 accessControl 过滤器的仅登录用户可用，我想知道让我的测试启动和运行的最佳方法。

此刻我认为有两种方法可以做到这一点

*   使用 cUrl 指向所需的 enpoint 以获取 JSON 直接调用
*   控制器的功能

在第一个场景中，我可以使用固定装置，但我无法使用 Apache 模拟 CWebUser 类（模拟登录用户），当 cUrl 出现时，它由我的 CWebApplication 实例执行，该实例不是由 PHPUnit 执行的。我可以通过使我的所有 API 调用无状态并因此删除 accessControl 过滤器来解决这个问题。

在第二个中，我发现模拟 CWebUser 类的唯一方法是在我正在执行的测试类中覆盖它。在我不需要测试需要不同类型用户的用例之前，这种方法是有效的，而且我无法在运行时（或设置时）更改我的网络用户模拟。我发现模拟我的网络用户的唯一方法是您可以在下面找到的方法，这导致 $this->getMock('WebUser') 无论如何都不会影响配置文件中定义的 CWebApplication 的 WebUser（只读）单例。

下面是一个具体的例子：

```
class UserControllerTest extends CDbTestCase
{
    public $fixtures=array(
            /* NEEDED FIXTURES*/
    );

    public function testUserCanGetFavouriteStore() {

            $controller = new UserController(1);
            $result = json_decode($controller->actionAjaxGetFavStore());                    
            $this->assertInternalType('array', $result->data);              

            $model  = $result->data[0];
            $this->assertEquals($model->name, "Nome dello Store");  

    }
}

class WebUser extends CWebUser {

    public function getId() {
        return 1;
    }
    public function getIsGuest() {
            return false;
    }
}; 
```

我想知道通过 API 密钥或用户/密码组合使用 api 接口进行身份验证是否有用。如果我转向几乎无状态的 API 集成，这没问题，但大多数时候我只有控制器的操作（仅允许登录用户）返回 Json 数据以填充前端。

任何人都可以建议我更好的方法吗？也许只是测试这种 JSON 输出没用？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:39:58.080

也许我过于简单化了你的问题。听起来您想在运行测试之前模拟用户登录？如果是这样的话，为什么不在你的夹具中创建一个用户对象并在运行测试之前将它们实际登录，然后再将它们注销呢？

就像是：

```
/**
 * Sets up before each test method runs.
 * This mainly sets the base URL for the test application.
 */
protected function setUp()
{
    parent::setUp();

    // login as registered user
    $loginForm = new UserLoginForm();
    $loginForm->email = USER_EMAIL; // use your fixture
    $loginForm->password = USER_PASSWORD; // use your fixture
    if(!$loginForm->login()) {
        throw new Exception("Could not login in setup");
    }
}

protected function tearDown()
{
    parent::tearDown();
    Yii::app()->user->logout(true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T22:44:05.603

好的，实际上我和我的团队发现的唯一解决方案是创建一个存根 WebUser 类。以这种方式重写 WebUser 类，您可以在不让 Yii 依赖会话的情况下验证用户。

```
class WebUserMock extends WebUser {

public function login($identity,$duration=0)
{
    $id=$identity->getId();
    $states=$identity->getPersistentStates();
    if($this->beforeLogin($id,$states,false))
    {
        $this->changeIdentity($id,$identity->getName(),$states);
        $duration = 0;
        if($duration>0)
        {
            if($this->allowAutoLogin)
                $this->saveToCookie($duration);
            else
                throw new CException(Yii::t('yii','{class}.allowAutoLogin must be set true in order to use cookie-based authentication.',
                    array('{class}'=>get_class($this))));
        }

        $this->afterLogin(false);
    }
    return !$this->getIsGuest();
}

public function changeIdentity($id,$name,$states)
{   
    $this->setId($id);
    $this->setName($name);
    $this->loadIdentityStates($states);
}

// Load user model.
protected function loadUser() {
    $id = Yii::app()->user->id;
        if ($id!==null)
            $this->_model=User::model()->findByPk($id);
    return $this->_model;
}
}; 
```

在您的测试类的 setUp 方法中，您可以登录任何用户（在这种情况下，利用我的固定装置）

```
//a piece of your setUp() method....
$identity = new UserIdentity($this->users('User_2')->email, md5('demo'));               
$identity->authenticate();      
if($identity->errorCode===UserIdentity::ERROR_NONE)                                     
    Yii::app()->user->login($identity); 
```

最后要做的就是覆盖测试配置文件中的用户组件并告诉他使用这个：

保护/配置/test.php

```
'user'=>array(
    'class' => 'application.tests.mock.WebUserMock',
    'allowAutoLogin'=>false,
), 
```

仍然不确定这是处理它的最佳方法，但似乎工作正常

# sencha-touch - Sencha Touch 在哪里存储数据？

> ID：14468619
> 
> 赞同：0
> 
> 时间：2013-01-22T21:46:47.663
> 
> 标签：sencha-touch

我有以下情况要处理：

我的移动应用程序（封装在原生容器中的 Sencha Touch App）有大约 5000 个书名。现在，我不希望应用程序 ping 服务器在他的手机上获取这些书。应用程序将需要在运行时访问这些数据。我也应该这样

a) 在安装应用程序时将数据转储到 sqlite 中？（第一次运行） b) 仅从文件中获取数据。（我将对这些数据进行排序和查询操作 - 如果我将整个文件一次存储在一个数组中并进一步处理它可能不是一个好的解决方案）

好心劝告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:50:36.133

创建 JSON API 以从服务器上的数据库中获取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:35:57.140

您可以将此数据存储在 JSON 文件中，然后使用 JSON 代理来加载/排序/查询它。但就像 Diodeus 所说的那样，最好公开一个 Web 服务。

# xelement - 存在属性时 XElement null

> ID：14468623
> 
> 赞同：0
> 
> 时间：2013-01-22T21:47:31.297
> 
> 标签：xelement

给定以下xml：

```
<root xmlns="http://tempuri.org/myxsd.xsd">
    <node name="mynode" value="myvalue" />
</root> 
```

并给出以下代码：

```
string file = "myfile.xml";  //Contains the xml from above

XDocument document = XDocument.Load(file);
XElement root = document.Element("root");

if (root == null)
{
    throw new FormatException("Couldn't find root element 'parameters'.");
} 
```

如果根元素包含 xmlns 属性，则变量 root 为空。如果我删除 xmlns 属性，则 root 不为空。

谁能解释这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:10:34.310

当您像`<root xmlns="http://tempuri.org/myxsd.xsd">`这样声明根元素时，意味着您的根元素的所有后代都在`http://tempuri.org/myxsd.xsd`命名空间中。默认情况下，元素的命名空间有一个空的命名空间并`XDocument.Element`查找没有命名空间的元素。如果要访问具有命名空间的元素，则应显式指定命名空间。

```
var xdoc = XDocument.Parse(
"<root>" +
    "<child0><child01>Value0</child01></child0>" +
    "<child1 xmlns=\"http://www.namespace1.com\"><child11>Value1</child11></child1>" +
    "<ns2:child2 xmlns:ns2=\"http://www.namespace2.com\"><child21>Value2</child21></ns2:child2>" +
"</root>");

var ns1 = XNamespace.Get("http://www.namespace1.com");
var ns2 = XNamespace.Get("http://www.namespace2.com");

Console.WriteLine(xdoc.Element("root")
                      .Element("child0")
                      .Element("child01").Value); // Value0

Console.WriteLine(xdoc.Element("root")
                      .Element(ns1 + "child1")
                      .Element(ns1 + "child11").Value); // Value1

Console.WriteLine(xdoc.Element("root")
                      .Element(ns2 + "child2")
                      .Element("child21").Value); // Value2 
```

对于您的情况

```
var ns = XNamespace.Get("http://tempuri.org/myxsd.xsd");
xdoc.Element(ns + "root").Element(ns + "node").Attribute("name") 
```

# html - 相对于居中内容 div 的固定位置 div？

> ID：14468629
> 
> 赞同：2
> 
> 时间：2013-01-22T21:48:37.910
> 
> 标签：html, css

我是一名 CSS 初学者。我想要一个包含主要内容的半透明居中 div。它下面应该是一个包含目录的固定 div。

以下是我对此的尝试。这适用于特定的浏览器大小。但是当浏览器窗口的大小改变时，目录就会移动。

我希望目录与主 div 保持固定距离。

[jsFiddle 链接](http://jsfiddle.net/vMAQz/)

有了这个窗口大小，一切看起来都很好： ![有了这个窗口大小，一切看起来都很好](../Images/b39990bbae121bec74930e4928b8b439.png)

减小窗口大小会在内容 div 下移动 toc： ![减小窗口大小将 toc 移动到内容 div 下](../Images/5954e27d4514083695357d9c83b8743d.png)

html

```
<html>
<head>
    <title>Testpage</title>
    <link rel='stylesheet' href='css/testpage.css'>
</head>
<body>
    <div id="contenttable">
        <h1>Contents</h1>
        <a href="#">Content 01</a><br>
    </div>
    <div id="content">  
        some text
    </div>
</body>
</html> 
```

CSS：

```
#content{
    height: 1000px;
    width:  320px;
    position: relative;
    top: 50px;
    left: 50%;
    margin-left: -160px;
    background-color: cyan;
        }

#contenttable{
    padding: 12px;
    width:100%;
    height:200px;
    position: fixed;
    background-color: yellow;
    top: 125px;
    left: 6%;
}

#contenttable a{
    position: relative;
    top: 0px;
    left: 66%;
}

#contenttable h1{

    position: relative;
    top: 0px;
    left: 66%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:23:06.380

您可以使用位于TOC`absolute`内部的内部 div，并设置其位置。`fixed`

用于`CSS3 Calc`详细说明您的主要内容的正确位置。

用于`opacity`透明度，避免将`height`主要内容 div 设置为自动溢出处理。

**演示**：http: [//jsfiddle.net/vMAQz/1/](http://jsfiddle.net/vMAQz/1/)

CSS

```
#contenttable {
  padding: 12px;
  width:100%;
  height:200px;
  position: fixed;
  background-color: yellow;
  top: 125px;
}
#innerContent {
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 100px;
  padding: 30px;
}
#content {
  padding: 10px;
  opacity: 0.8;
  width: 320px;
  position: relative;
  top: 50px;
  left: calc(100% - 480px);
  background-color: cyan;
} 
```

HTML

```
<div id="contenttable">
  <div id="innerContent">
    <h1>Contents</h1>
    <a href="#">Content 01</a>
    <br/>
  </div>
</div>
<div id="content">
   some text
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:24:21.927

您需要做的就是更改内容 div 的宽度

```
#content{
    height: 1000px;
    width:  30%;
    position: relative;
    top: 50px;
    left: 50%;
    margin-left: -160px;
    background-color: cyan;
        } 
```

# java - addMouseListener 出错

> ID：14468630
> 
> 赞同：1
> 
> 时间：2013-01-22T21:48:39.267
> 
> 标签：java, swing, events, compilation, mouse

当我编译以下代码时，我得到了错误：

```
The method addMouseListener(Player) is undefined for the type Player 
```

代码：

```
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

public class Player extends Obj implements MouseListener {

    public Player() {
        super();
        addMouseListener(this);
    }

    public void mouseClicked(MouseEvent e) {}
    public void mouseEntered(MouseEvent e) {}
    public void mouseExited(MouseEvent e) {}
    public void mousePressed(MouseEvent e) {}
    public void mouseReleased(MouseEvent e) {}
} 
```

这是`Obj`类的代码：

```
import java.awt.Rectangle;
import java.util.ArrayList;

public class Obj {

    protected int x, y, width, height, dx, dy, depth;
    protected double speed, direction;
    protected Rectangle bound;
    protected ArrayList<Obj> collideList;

    public Obj() {
        bound = new Rectangle(x, y, width, height);
        collideList = new ArrayList<>();
    }

    public boolean checkCollision(Obj obj1, Obj obj2) {
        boolean collide = false;

        // Temporarily move bound to where it will be next step, 
            //to anticipate a collision
        // (this is important to make sure objects don't "stick" 
            // to each other)
        obj1.getBound().translate(obj1.getDx(), obj1.getDy());
        // If their bounds intersect, they have collided
        if (obj1!=obj2 && obj1.getBound().intersects(obj2.getBound())) {
            collide = true;
        } else {
            // Move the bound back
            bound.translate(-obj1.getDx(), -obj1.getDy());
        }

        return collide;
    }

    public void step() {
        bound.setBounds(x, y, width, height);
    }

    public Rectangle getBound() {
        return bound;
    }

    public int getX() {
        return x;
    }

    public int getY() {
        return y;
    }

    public int getDy() {
        return dy;
    }

    public int getDx() {
        return dx;
    }

    public void setX(int x) {
        this.x = x;
    }

    public void setY(int y) {
        this.y = y;
    }

    public int getWidth() {
        return width;
    }

    public int getHeight() {
        return height;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T21:52:29.370

您不能将鼠标侦听器添加到任何对象类型。`Obj`必须扩展`java.awt.Component`才能做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T21:54:56.357

正如 Dan 指出的那样 - 在对象层次结构中的任何地方都没有“addMouseListener”方法。

我假设您希望将其添加到您的 Obj 类中。

# operators - 为什么 Ada 中没有像 +=、-= 或 ++ 这样的（增广赋值）运算符？

> ID：14468636
> 
> 赞同：6
> 
> 时间：2013-01-22T21:49:16.397
> 
> 标签：operators, ada

我想知道为什么Ada中没有像`+=`, `-=`, `++`, `-=`, `<<=`or `x ? y : z`(not an *augmented assignment ...) 这样的运算符？*许多其他语言（C、C++、C#、Java、Perl）都有它们。

**-- 示例（C/C++/...）：**

```
int a = 3;

a += 4; /* A */
// long: a = a + 4

a++; /* B */
// long: a = a + 1

a = ( a > 3 ? 10 : 5 ); /* C */
// long: ' if a > 3 then a = 10 else a = 5' 
```

**-- 示例（Ada）：**

```
a : integer := 3;

a := a + 4;   -- A --
a := a + 1;   -- B --

if a > 3 then -- C --
    a := 10;
else
    a := 5;
end if; 
```

*（示例没有意义 - 仅用于演示）*

是不是因为...

*   运算符重载（但 C++ 也有这样的机制）？
*   可读性？
*   技术原因/限制？
*   这只是使这些表达式更短而不是编程真正需要的技巧吗？
*   Ada 中的赋值运算符是`:=`而不是`=`（所以`+=`-> `+=:`）？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-22T22:44:20.527

因为 Ada 的设计比其他一些语言更接近于数学......所以......

**赋值不是运算符**

运算符具有特定的属性——它们对返回结果的数量进行操作——同时保持数量本身不变。

这很重要 - 严格遵守对“运算符”的理解，并且您可以进行很多优化，因为语义更可预测。本质上，运营商没有副作用。您可以重复它们或排除重复的那些，并且您有更多的自由来重新排序表达式而不改变它们的结果。

如果您将分配误认为是操作员，...好吧，基本上您就完蛋了。只有一个具有副作用的“操作员”意味着您会失去所有操作员的宝贵属性……为什么？一些符号上的便利，一个非常肥沃的错误滋生地，没有额外的性能或效率。

顺便说一句，当我最近不得不在 GCC 内部闲逛时，我在其表达式分析器中发现了一个函数，该函数显式破坏了 (intermediate representation for)`a++`并在内部将其转换为 (intermediate representation for)`a = a + 1;`所以较短的形式确实看起来没有任何效率！

相同的原理（在 Ada 中不如 VHDL 严格）适用于函数 - 它们只是另一种形式的运算符，而纯函数（在 VHDL 中，在其声明中没有“不纯”一词的每个函数！）没有副作用。

这也是 Ada 既有函数又有过程的原因：函数、运算符和表达式本质上是相似的（理想情况下，无状态且无副作用）；过程、赋值和语句是一个单独的类别（过程调用和赋值是语句的形式）。

分离概念并为每项任务使用适当的概念对于制作清晰的程序大有帮助，您可以理解并可能按照您的意图进行操作......

哦，Ada-2012 终于用 if 和 case 表达式赶上了 VHDL-2008 和 Algol-W (1963)……

```
a := (if a > 3 then 10 else 5);
-- to my eyes MUCH more readable than ?: especially in multiple if-exprs!

b := (case a is 
      when 3 => 5;
      when 6|7 => 10;
      when others => 0); 
```

很明显，这里的赋值仍然是语句……

只想确认一下：

**赋值不是运算符**

Ada 的设计师对在不损害完整性的情况下什么是可能的，什么会导致一团糟有着令人印象深刻且通常非常清晰的把握。虽然添加了更新的语言功能，但随着编译器技术的发展足以使其可靠，它一直是一个谨慎的过程，Ada-83 子集仍然几乎完好无损。

# c - Two very similar functions involving sin() exhibit vastly different performance -- why?

> ID：14468639
> 
> 赞同：11
> 
> 时间：2013-01-22T21:49:40.933
> 
> 标签：c, performance, gcc, floating-point, x86

Consider the following two programs that perform the same computations in two different ways:

```
// v1.c
#include <stdio.h>
#include <math.h>
int main(void) {
   int i, j;
   int nbr_values = 8192;
   int n_iter = 100000;
   float x;
   for (j = 0; j < nbr_values; j++) {
      x = 1;
      for (i = 0; i < n_iter; i++)
         x = sin(x);
   }
   printf("%f\n", x);
   return 0;
} 
```

and

```
// v2.c
#include <stdio.h>
#include <math.h>
int main(void) {
   int i, j;
   int nbr_values = 8192;
   int n_iter = 100000;
   float x[nbr_values];
   for (i = 0; i < nbr_values; ++i) {
      x[i] = 1;
   }
   for (i = 0; i < n_iter; i++) {
      for (j = 0; j < nbr_values; ++j) {
         x[j] = sin(x[j]);
      }
   }
   printf("%f\n", x[0]);
   return 0;
} 
```

When I compile them using gcc 4.7.2 with `-O3 -ffast-math` and run on a Sandy Bridge box, the second program is twice as fast as the first one.

Why is that?

One suspect is the data dependency between successive iterations of the `i` loop in `v1`. However, I don't quite see what the full explanation might be.

(Question inspired by [Why is my python/numpy example faster than pure C implementation?](https://stackoverflow.com/questions/14466950/why-is-my-python-numpy-example-faster-than-pure-c-implementation))

**EDIT:**

Here is the generated assembly for `v1`:

```
 movl    $8192, %ebp
        pushq   %rbx
LCFI1:
        subq    $8, %rsp
LCFI2:
        .align 4
L2:
        movl    $100000, %ebx
        movss   LC0(%rip), %xmm0
        jmp     L5
        .align 4
L3:
        call    _sinf
L5:
        subl    $1, %ebx
        jne     L3
        subl    $1, %ebp
        .p2align 4,,2
        jne     L2 
```

and for `v2`:

```
 movl    $100000, %r14d
        .align 4
L8:
        xorl    %ebx, %ebx
        .align 4
L9:
        movss   (%r12,%rbx), %xmm0
        call    _sinf
        movss   %xmm0, (%r12,%rbx)
        addq    $4, %rbx
        cmpq    $32768, %rbx
        jne     L9
        subl    $1, %r14d
        jne     L8 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-22T21:51:39.483

Ignore the loop structure all together, and only think about the sequence of calls to `sin`. `v1` does the following:

```
x <-- sin(x)
x <-- sin(x)
x <-- sin(x)
... 
```

that is, each computation of `sin( )` cannot begin until the result of the previous call is available; it must wait for the entirety of the previous computation. This means that for N calls to `sin`, the total time required is 819200000 times the latency of a single `sin` evaluation.

In `v2`, by contrast, you do the following:

```
x[0] <-- sin(x[0])
x[1] <-- sin(x[1])
x[2] <-- sin(x[2])
... 
```

notice that each call to `sin` does not depend on the previous call. Effectively, the calls to `sin` are all independent, and the processor can begin on each as soon as the necessary register and ALU resources are available (without waiting for the previous computation to be completed). Thus, the time required is a function of the *throughput* of the sin function, not the latency, and so `v2` can finish in significantly less time.

* * *

I should also note that DeadMG is right that `v1` and `v2` are formally equivalent, and in a perfect world the compiler would optimize both of them into a single chain of 100000 `sin` evaluations (or simply evaluate the result at compile time). Sadly, we live in an imperfect world.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:02:17.040

In the first example, it runs 100000 loops of sin, 8192 times.

In the second example, it runs 8192 loops of sin, 100000 times.

Other than that and storing the result differently, I don't see any difference.

However, what does make a difference is that the input is being changed for each loop in the second case. So I suspect what happens is that the sin value, at certain times in the loop, gets much easier to calculate. And that can make a big difference. Calculating sin is not entirely trivial, and it's a series calculation that loops until the exit condition is hit.

# animation - SL5 - OOB - 动画主窗口

> ID：14468645
> 
> 赞同：2
> 
> 时间：2013-01-22T21:50:19.113
> 
> 标签：animation, silverlight-5.0, out-of-browser

我需要增加我的 Application.Current.MainWindow 的大小（当然，在运行 OOB 时）。
有没有办法在情节提要中做到这一点？
我可以以编程方式做到这一点：

```
private long timerCntr = 0;
    private void OpenBtn_OnClick(object sender, RoutedEventArgs e)
    {
        timerCntr = 0;
        DispatcherTimer t = new DispatcherTimer();
        t.Interval = new TimeSpan(0, 0, 0, 0, 10);
        t.Tick += (o, args) =>
            {
                if (timerCntr < 100)
                {
                    Application.Current.MainWindow.Height += 1;
                    userControl.Height += 1;
                    LayoutRoot.Height += 1;
                    ++timerCntr;
                }
                else
                {
                    t.Stop();
                }
            };
        t.Start();
        OpenStory.Begin();  // Controls opacity of object becoming visible
    } 
```

感谢您的任何见解...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:16:11.323

评论中的链接提供了答案。
基本上，添加一个隐藏的滑块控件；在情节提要中更改滑块的值；在滑块的 value_changed 处理程序中更改窗口大小。
效果很好。

# c# - 如何在类中包含“空”常量

> ID：14468646
> 
> 赞同：3
> 
> 时间：2013-01-22T21:50:19.007
> 
> 标签：c#, .net, class, constants, member

我有一个类，我想在 System.Drawing 中包含一个类似于 Point.Empty 的“空”常量成员。那可能吗？

这是给出错误的简化版本：

```
public class TrivialClass
{
    public const TrivialClass Empty = new TrivialClass(0);
    public int MyValue;
    public TrivialClass(int InitialValue)
    {
        MyValue = InitialValue;
    }
} 
```

给出的错误是：*TrivialClass.Empty 是 TrivialClass 类型。字符串以外的引用类型的 const 字段只能用 null 初始化。*

如果它很重要，我想像这样使用它：

```
void SomeFunction()
{
    TrivialClass myTrivial = TrivialClass.Empty;
    // Do stuff ...
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T21:52:23.473

您可以使用`static readonly`这些类型。常量只能用文字值（例如数字、字符串）初始化。

```
public class TrivialClass
{
    public static readonly TrivialClass Empty = new TrivialClass(0);
    public int MyValue;
    public TrivialClass(int InitialValue)
    {
        MyValue = InitialValue;
    }
} 
```

查找定义后。`Point.Empty`也是`static readonly`。[参考这里](http://msdn.microsoft.com/en-us/library/system.drawing.point.empty.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T21:53:38.287

只是快速拍摄，但我建议 Point.Empty 是静态成员，而不是常量：

```
public class TrivialClass
{
    public static readonly TrivialClass Empty = new TrivialClass(0);
    ...
} 
```

# java - 检测 JSplitPane 分隔线移动

> ID：14468648
> 
> 赞同：16
> 
> 时间：2013-01-22T21:50:29.190
> 
> 标签：java, swing, jsplitpane

有没有办法检测 JSplitPane 分隔线何时移动？有没有办法为分隔线运动添加监听器？

```
JPanel panel1 = new JPanel();
JPanel panel2 = new JPanel();
JSplitPane sp = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, panel1, panel2);
// What do I put here to be notified if the divider in sp is moved? 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-22T21:57:28.417

我认为您正在寻找[addPropertyChangeListener](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#addPropertyChangeListener%28java.beans.PropertyChangeListener%29) from `Container`。像这样的东西...

```
sp.addPropertyChangeListener(JSplitPane.DIVIDER_LOCATION_PROPERTY, 
    new PropertyChangeListener() {
        @Override
        public void propertyChange(PropertyChangeEvent pce) {}
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T22:01:42.657

采用

```
splitter.addPropertyChangeListener("dividerLocation", myListener); 
```

# jsp - 如何在 JSTL/JSP 中遍历字符串集合而不是带逗号的字符串？

> ID：14468649
> 
> 赞同：2
> 
> 时间：2013-01-22T21:50:32.683
> 
> 标签：jsp, jstl, cas

这是我正在使用的 jsp 文件的摘录：

```
<%@ page session="false" %><%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %><%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>

...

<c:forEach var="attr" items="${auth.principal.attributes}" >
    <c:forEach var="attrVal" items="${attr.value}"> 
        <attribute name="${fn:escapeXml(attr.key)}" value="${fn:escapeXml(attrVal)}"/>
    </c:forEach>
</c:forEach>

... 
```

每个属性可以是字符串或字符串的集合。这段代码大部分时间都可以正常工作，但如果其中一个字符串值包含逗号，那么它会被分成两个属性。

我期待的是如下输出：

```
...
<attribute name="FirstName" value="Adam"/>
<attribute name="LastName" value="Franco"/>
<attribute name="DisplayName" value="Franco, Adam S."/>
<attribute name="Status" value="Staff"/>
<attribute name="MemberOf" value="CN=All Staff,OU=Groups,DC=example,DC=edu"/>
<attribute name="MemberOf" value="CN=Admins,OU=Groups,DC=example,DC=edu"/>
... 
```

我得到的是：

```
...
<attribute name="FirstName" value="Adam"/>
<attribute name="LastName" value="Franco"/>
<attribute name="DisplayName" value="Franco"/>
<attribute name="DisplayName" value=" Adam S."/>
<attribute name="Status" value="Staff"/>
<attribute name="MemberOf" value="CN=All Staff,OU=Groups,DC=example,DC=edu"/>
<attribute name="MemberOf" value="CN=Admins,OU=Groups,DC=example,DC=edu"/>
... 
```

我已经验证了我的“DisplayName”属性是作为一个简单的字符串从后端传递到的，就像 FirstName 和 LastName 一样，唯一的区别是它恰好包含一个逗号。这是`principle.attributes`地图在返回到 JSP 之前的屏幕截图： ![在此处输入图像描述](../Images/6c2f5637bb7aff48dacaa91108eefd94.png)

如何区分 JSP 中的字符串和字符串集合，或者防止`forEach`调用以逗号分隔字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:11:59.553

您可以在迭代每个属性之前添加一个测试，以检查属性的类型是否为字符串[`Object.getClass()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#getClass%28%29)，然后使用[`Class.getSimpleName()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getSimpleName%28%29)。如果 type 是`String`，不要使用另一个循环： -

```
<c:forEach var="attr" items="${auth.principal.attributes}" >
    <c:choose>
        <c:when test="${attr.value.class.simpleName == 'String'}">
            <!-- attr.value is comma-separated string -->
            <!-- Don't iterate further. Just print it attr.value -->
            <attribute name="${fn:escapeXml(attr.key)}" value="${fn:escapeXml(attr.val)}"/>
        </c:when>
        <c:otherwise>
            <!-- attr.value is a collection -->
            <!-- Iterate further over attr.value -->
            <c:forEach var="attrVal" items="${attr.value}"> 
                <attribute name="${fn:escapeXml(attr.key)}" value="${fn:escapeXml(attrVal)}"/>
            </c:forEach>
        </c:otherwise>
    </c:choose>
</c:forEach> 
```

# iphone - 在 ViewController 中实现 MWFeedParser

> ID：14468650
> 
> 赞同：0
> 
> 时间：2013-01-22T21:50:34.877
> 
> 标签：iphone, ios, xcode

我正在尝试在我的应用程序中使用 MWFeedParser 库。在我的主屏幕上，我有一个名为 NewsViewController 的视图控制器。在 MWFeedParser 库中，根视图控制器称为 RootViewController。我试图将所有代码从 RootViewController 复制到 NewsViewController .H + .M 中，并且在 IB 中，我已将 tableview 链接到“dataSource”和“delegate”。但是当我的应用程序启动时，tableview 是空的。以下是代码的样子：

。H：

```
#import <UIKit/UIKit.h>
#import "MWFeedItem.h"
#import "MWFeedParser.h"

@interface NewsViewController : UITableViewController  <MWFeedParserDelegate, UITableViewDelegate, UITableViewDataSource> {

    // Parsing
    MWFeedParser *feedParser;
    NSMutableArray *parsedItems;

    // Displaying
    NSArray *itemsToDisplay;
    NSDateFormatter *formatter;
    IBOutlet UITableView *tableView;
}

// Properties
@property (nonatomic, retain) NSArray *itemsToDisplay;
@property (nonatomic, retain) IBOutlet UITableView *tableView;
-(IBAction)goHome;

@end 
```

.M:

```
#import "NSString+HTML.h"
#import "MWFeedParser.h"
#import "DetailTableViewController.h"

@implementation NewsViewController

@synthesize itemsToDisplay, tableView;

#pragma mark -
#pragma mark View lifecycle

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"News", @"News");
        self.tabBarItem.image = [UIImage imageNamed:@"icon_news"];    }
    return self;
}

- (void)viewDidLoad
{
    label.shadowOffset = CGSizeMake(0.0f, 1.0f);
    label.textColor = [UIColor colorWithRed:0xB3/249.0 green:0xB3/252.0 blue:0xB3/253.0 alpha:1];
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    // Date
    // Setup
    formatter = [[NSDateFormatter alloc] init];
    [formatter setDateStyle:NSDateFormatterShortStyle];
    [formatter setTimeStyle:NSDateFormatterShortStyle];
    parsedItems = [[NSMutableArray alloc] init];
    self.itemsToDisplay = [NSArray array];

    // Refresh button
    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh
                                                                                            target:self
                                                                                            action:@selector(refresh)];
    // Parse
    NSURL *feedURL = [NSURL URLWithString:@"http://www.mywebsite.com/feed/"];
    feedParser = [[MWFeedParser alloc] initWithFeedURL:feedURL];
    feedParser.delegate = self;
    feedParser.feedParseType = ParseTypeFull; // Parse feed info and all items
    feedParser.connectionType = ConnectionTypeAsynchronously;
    [feedParser parse];

    UIImage *someImage = [UIImage imageNamed:@"back_active1@2x.png"];
    [button setBackgroundImage:someImage forState:UIControlStateHighlighted];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)viewDidAppear:(BOOL)animated {
    static BOOL first = YES;
    if (first) {
        UIViewController *popup = [[Home1ViewController alloc] initWithNibName:@"Home1ViewController" bundle:nil];

        [self presentViewController:popup animated:NO completion:nil];
        first = NO;
    }
}

#pragma mark -
#pragma mark Parsing

// Reset and reparse
- (void)refresh {
    self.title = @"Refreshing...";
    [parsedItems removeAllObjects];
    [feedParser stopParsing];
    [feedParser parse];
    self.tableView.userInteractionEnabled = NO;
    self.tableView.alpha = 0.3;
}

- (void)updateTableWithParsedItems {
    self.itemsToDisplay = [parsedItems sortedArrayUsingDescriptors:
                           [NSArray arrayWithObject:[[NSSortDescriptor alloc] initWithKey:@"date"
                                                                                 ascending:NO]]];
    self.tableView.userInteractionEnabled = YES;
    self.tableView.alpha = 1;
    [self.tableView reloadData];
}

#pragma mark -
#pragma mark MWFeedParserDelegate

- (void)feedParserDidStart:(MWFeedParser *)parser {
    NSLog(@"Started Parsing: %@", parser.url);
}

- (void)feedParser:(MWFeedParser *)parser didParseFeedInfo:(MWFeedInfo *)info {
    NSLog(@"Parsed Feed Info: “%@”", info.title);
    self.title = info.title;
}

- (void)feedParser:(MWFeedParser *)parser didParseFeedItem:(MWFeedItem *)item {
    NSLog(@"Parsed Feed Item: “%@”", item.title);
    if (item) [parsedItems addObject:item];
}

- (void)feedParserDidFinish:(MWFeedParser *)parser {
    NSLog(@"Finished Parsing%@", (parser.stopped ? @" (Stopped)" : @""));
    [self updateTableWithParsedItems];
}

- (void)feedParser:(MWFeedParser *)parser didFailWithError:(NSError *)error {
    NSLog(@"Finished Parsing With Error: %@", error);
    if (parsedItems.count == 0) {
        self.title = @"Failed"; // Show failed message in title
    } else {
        // Failed but some items parsed, so show and inform of error
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Parsing Incomplete"
                                                         message:@"There was an error during the parsing of this feed. Not all of the feed items could parsed."
                                                        delegate:nil
                                               cancelButtonTitle:@"Dismiss"
                                               otherButtonTitles:nil];
        [alert show];
    }
    [self updateTableWithParsedItems];
}

#pragma mark -
#pragma mark Table view data source

// Customize the number of sections in the table view.
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return itemsToDisplay.count;
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    // Configure the cell.
    MWFeedItem *item = [itemsToDisplay objectAtIndex:indexPath.row];
    if (item) {

        // Process
        NSString *itemTitle = item.title ? [item.title stringByConvertingHTMLToPlainText] : @"[No Title]";
        NSString *itemSummary = item.summary ? [item.summary stringByConvertingHTMLToPlainText] : @"[No Summary]";

        // Set
        cell.textLabel.font = [UIFont boldSystemFontOfSize:15];
        cell.textLabel.text = itemTitle;
        NSMutableString *subtitle = [NSMutableString string];
        if (item.date) [subtitle appendFormat:@"%@: ", [formatter stringFromDate:item.date]];
        [subtitle appendString:itemSummary];
        cell.detailTextLabel.text = subtitle;

    }
    return cell;
}

#pragma mark -
#pragma mark Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    // Show detail
    DetailTableViewController *detail = [[DetailTableViewController alloc] initWithStyle:UITableViewStyleGrouped];
    detail.item = (MWFeedItem *)[itemsToDisplay objectAtIndex:indexPath.row];
    [self.navigationController pushViewController:detail animated:YES];

    // Deselect
    [self.tableView deselectRowAtIndexPath:indexPath animated:YES];

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:26:23.983

你所做的是在 feedparserDidFinish 方法中，尝试重新加载表......如下所示......

```
 - (void)feedParserDidFinish:(MWFeedParser *)parser {
       NSLog(@"Finished Parsing%@", (parser.stopped ? @" (Stopped)" : @""));
       [self.tableView reloadData];
     } 
```

让我知道它是否有效！！！！

快乐编码！！！！！！！

# javascript - 融合表层信息窗口显示几何字段中的所有顶点

> ID：14468653
> 
> 赞同：0
> 
> 时间：2013-01-22T21:50:37.897
> 
> 标签：javascript, google-maps, google-fusion-tables

这是我在这里的第一篇文章，所以如果我犯了新手失礼，我深表歉意。

我在地图顶部有一个[Google Fusion Table 图层](https://www.google.com/fusiontables/DataSource?docid=1Bgo94POIxKwQOOltuFbaAW6CpjQqPvYLVSqXuLk)。我通过导入 KML 文件来创建它。一切都很好，但上周我意识到 InfoWindow 现在正在几何字段中显示相关多边形的所有顶点。

奇怪的是，这些顶点不会显示在实际的 Fusion Table 中，而只会显示在地图顶部的图层上。我怀疑 JavaScript 代码可能会出现问题，我对它非常陌生，或者可能是 Fusion Tables 的新 API。

我删除了正文部分以解决此页面上的一些格式问题，但这里是代码：

```
<!DOCTYPE html>
<html>
                <head>
                <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
                <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
                <title>Georgia Areas</title>

                <link href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" />

                <script type="text/javascript" src="http://www.google.com/jsapi"></script> 

                <style type="text/css">
                                html { height: 100% }
                                body { height: 100%; margin: 0; padding: 0 }
                                #map_canvas { height: 100%; weight: 100% }
                                #search-panel {
                                                position: absolute;
                `                               top: 10px;
                                                left: 50%;
                                                margin-left: -180px;
                                                width: 350px;
                                                z-index: 5;
                                                background-color: #fff;
                                                padding: 5px;
                                                border: 1px solid #999;
                                }
                                #address {
                                                width: 345px;
                                }
                                #instruction {
                                                position:  fixed;
                                                float:  right;
                                                bottom:  10px;
                                                right:  20px;
                                                width: 375px;
                                                z-index: 4;
                                                background-color: #fff;
                                                padding: 7px;
                                                border: 1px solid #999;
                                                font-family:"Arial";
                                }
                                p.small {font-size: small}
                </style>

                <script type="text/javascript"
                src="http://maps.googleapis.com/maps/api/js?key=AIzaSyARy6zbLmjvq3uaPjI--s45afA0LA-ynnA&amp;sensor=false">
                </script>

                <script type="text/javascript">

                var infoWindow = new google.maps.InfoWindow();

                var input = document.getElementById('address');

                var geocoder;
                var gaCentroid;
                var gaBounds;
                var myMap;

                function myclick(num) {
                                google.maps.event.trigger(markers[num], "click");
                }

                function initialize() {

                                geocoder = new google.maps.Geocoder();                          

                                gaCentroid = new google.maps.LatLng(32.900000, -83.22671);

                                gaBounds = new google.maps.LatLngBounds(
                                                new google.maps.LatLng(30.34,-85.652),
                                                new google.maps.LatLng(35.01,-80.85)
                                );

                                var mapOptions = {
                                                center: gaCentroid,
                                                zoom: 8,
                                                mapTypeId: google.maps.MapTypeId.ROADMAP
                                };

                                myMap = new google.maps.Map(document.getElementById("map_canvas"), 
                                                mapOptions);

                                var lyr = new google.maps.FusionTablesLayer({
                                                query: {
                                                                select: 'geometry',
                                                                from: '1Bgo94POIxKwQOOltuFbaAW6CpjQqPvYLVSqXuLk'
                                                },
                                                styles: [{
                                                                polygonOptions: {
                                                                                fillColor: '0xDEEBF7',
                                                                                fillOpacity: 0.1
                                                                }
                                                }]
                                });

                                lyr.setMap(myMap);  

                }

                function codeAddress() {
                                var address = document.getElementById('address').value;
                                geocoder.geocode({'address':address}, function(results, status) {
                                                if (status == google.maps.GeocoderStatus.OK) {
                                                                myMap.setCenter(results[0].geometry.location);
                                                                myMap.fitBounds(results[0].geometry.viewport)
                                                                var marker = new google.maps.Marker({
                                                                                map: myMap,
                                                                                position: results[0].geometry.location
                                                                });
                                                } else {
                                                                alert('Geocode was not successful for the following reason: ' + status);
                                                }
                                });
                }

                function reCenter() {
                                var currentCenter = myMap.getCenter();
                                google.maps.event.trigger(myMap, 'resize');
                                myMap.setCenter(currentCenter);
                }

</script>
</head>
</html> 
```

任何人都可以对此有所了解吗？

谢谢，

瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:26:43.580

您必须`templateId`为 infoWindow 定义相同的内容。

将此添加到传递给图层的选项中：

```
templateId:2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:20:00.633

您可以配置信息窗口中显示的内容。

请参阅Fusion Tables 帮助中的[此页面](http://support.google.com/fusiontables/answer/171216?hl=en)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T20:36:22.583

我最终更改了代码以引用另一个融合表层。我改变的只是ID。这似乎适用于新图层，但我仍然不知道在 InfoWindow 中显示几何图形时发生了什么。

如果它再次发生，我很可能会尝试 Dr.Molle 的建议。

# django - 递归解包 Django 模板中的列表

> ID：14468656
> 
> 赞同：1
> 
> 时间：2013-01-22T21:50:52.133
> 
> 标签：django

我有以下列表，我想在我的模板中解压缩（存储在 中`eachpart.1`）

```
[u'Value1', u'Value2', Value3, Value4, [u'Value1', u'Value2', Value3, Value4], [u'Value1', u'Value2', Value3, Value4]] 
```

大多数时候格式是这样的：

```
[u'Value1', u'Value2', Value3, Value4] 
```

这在我的模板中显示如下：

```
<tr>
    <td width = 150px><a href="#">{{eachpart.0}}</a></td>
    <td>{{eachpart.1.0}}</td>
    <td><img src = "eachpart.1.1}}.jpg" alt="{{eachpart.1.1}}">
    </td>
</tr> 
```

但每隔一段时间，我就会得到顶部的角落案例，这可能是未知的重复。

我在我的模板中检测到这一点，如下所示：

```
 {% if eachpart.1|length > 4 %} 
```

这告诉我，我有这些极端案例之一。所以现在我想基本上确定条目的数量（将是`eachpart.1|length - 1`），并且对于每个条目，我想使用一个计数器来访问正确的值。

这可能在模板中吗？是否可以在模板中执行 while 循环和计数器？

还是我以一种完全低效的方式来解决这个问题？

# ruby-on-rails - 使用 Rails 创建 XML 文档

> ID：14468657
> 
> 赞同：0
> 
> 时间：2013-01-22T21:50:52.973
> 
> 标签：ruby-on-rails, xml, csv

我一直在互联网上寻找一种使用 rails 从 CSV 文档创建 xml 文档的方法。我想知道是否有人知道如何，或者可以指出我的方向，如何创建一个新文件和行。我已经知道如何解析 CSV 文件。我只需要帮助创建新的 xml 文件，向其中添加行，并将其全部保存在 rails 控制器中。

任何能使这更容易的宝石将不胜感激！

编辑：我想逐行创建这个文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:57:32.213

```
require 'builder'

file = File.new("path_to_file.xml", "w")

xml = Builder::XmlMarkup.new(:target=>file, :indent => 2)

xml.instruct! :xml, :encoding => "UTF-8",  :version => "1.0"

xml.transformation do |transformation|
  transformation.info do |info|
    info.other_info '0'
  end
end 
```

将创建xml

```
<transformation>
  <info>
    <other_info >0</other_info >
  </info>
</transformation> 
```

对于 csv，您所需要的只是标题和数据，由`,`

# javascript - jQuery Mobile：文档就绪与页面事件

> ID：14468659
> 
> 赞同：273
> 
> 时间：2013-01-22T21:50:56.437
> 
> 标签：javascript, jquery, html, jquery-mobile, cordova

我正在使用 jQuery Mobile，但我无法理解经典文档就绪和 jQuery Mobile 页面事件之间的差异。

1.  真正的区别是什么？

    为什么要

    ```
    <!-- language: lang-js -->

    $(document).ready() {

    }); 
    ```

    优于

    ```
    $(document).on('pageinit') {

    }); 
    ```

2.  当您从一个页面转换到另一个页面时，页面事件的顺序是什么？

3.  如何将数据从一页发送到另一页，是否可以访问前一页的数据？

* * *

## 回答 #1

> 赞同：441
> 
> 时间：2013-01-22T22:13:34.160

### jQuery Mobile 1.4 更新：

我最初的文章是针对旧的页面处理方式，基本上是 jQuery Mobile 1.4 之前的所有内容。旧的处理方式现在已弃用，它将一直有效直到（包括）jQuery Mobile 1.5，所以你仍然可以使用下面提到的所有内容，至少到明年和 jQuery Mobile 1.6 之前。

旧事件，包括**pageinit**不再存在，它们被**pagecontainer**小部件替换。**Pageinit**被完全删除，您可以使用**pagecreate**代替，该事件保持不变并且不会更改。

如果您对页面事件处理的新方式感兴趣，请查看**[此处](http://www.gajotres.net/page-events-order-in-jquery-mobile-version-1-4-update/)**，在任何其他情况下，请随时继续阅读本文。即使您使用的是 jQuery Mobile 1.4 +，您也应该阅读此答案，它超越了页面事件，因此您可能会发现很多有用的信息。

### 旧内容：

这篇文章也可以作为我博客的一部分在**[这里](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**找到。

# `$(document).on('pageinit')`对比`$(document).ready()`

**在jQuery**中学习的第一件事是调用**`$(document).ready()`**函数内部的代码，以便在加载 DOM 后立即执行所有内容。但是，在**jQuery Mobile**中，Ajax 用于在您导航时将每个页面的内容加载到 DOM 中。因为这**`$(document).ready()`**将在您的第一页加载之前触发，并且用于页面操作的每个代码都将在页面刷新后执行。这可能是一个非常微妙的错误。在某些系统上，它可能看起来工作正常，但在其他系统上，它可能会导致出现不稳定、难以重复的怪异现象。

经典的 jQuery 语法：

```
$(document).ready(function() {

}); 
```

为了解决这个问题（相信我，这是个问题）**jQuery Mobile**开发人员创建了页面事件。简而言之，页面事件是在页面执行的特定点触发的事件。其中一个页面事件是**pageinit**事件，我们可以这样使用它：

```
$(document).on('pageinit', function() {

}); 
```

我们可以更进一步，使用页面 id 代替文档选择器。假设我们有一个带有 id **index**的 jQuery Mobile 页面：

```
<div data-role="page" id="index">
    <div data-theme="a" data-role="header">
        <h3>
            First Page
        </h3>
        <a href="#second" class="ui-btn-right">Next</a>
    </div>

    <div data-role="content">
        <a href="#" data-role="button" id="test-button">Test button</a>
    </div>

    <div data-theme="a" data-role="footer" data-position="fixed">

    </div>
</div> 
```

要执行仅可用于索引页面的代码，我们可以使用以下语法：

```
$('#index').on('pageinit', function() {

}); 
```

**每次页面即将被加载并首次显示时，都会执行**Pageinit事件。**除非手动刷新页面或关闭 Ajax 页面加载，否则它不会再次触发。如果您希望每次访问页面时都执行代码，最好使用**pagebeforeshow**事件。**

 **这是一个工作示例：http: [//jsfiddle.net/Gajotres/Q3Usv/](http://jsfiddle.net/Gajotres/Q3Usv/)来演示这个问题。

关于这个问题的更多说明。无论您是使用 1 html 多页面还是多个 HTML 文件范例，都建议您将所有自定义 JavaScript 页面处理分离到一个单独的 JavaScript 文件中。这将使您的代码变得更好，但您将拥有更好的代码概览，尤其是在创建**jQuery Mobile**应用程序时。

还有另一个特殊的**jQuery Mobile**事件，它被称为**mobileinit**。当**jQuery Mobile**启动时，它会在文档对象上触发一个**mobileinit**事件。要覆盖默认设置，请将它们绑定到**mobileinit**。**使用mobileinit**的一个很好的例子是关闭 Ajax 页面加载，或更改默认的 Ajax 加载器行为。

```
$(document).on("mobileinit", function(){
  //apply overrides here
}); 
```

## 页面事件转换顺序

首先可以在这里找到所有事件：http: [//api.jquerymobile.com/category/events/](http://api.jquerymobile.com/category/events/)

假设我们有一个页面 A 和一个页面 B，这是一个卸载/加载顺序：

1.  页面 B - 创建之前的事件**[页面](http://api.jquerymobile.com/pagebeforecreate/)**

2.  页面 B - 事件页面**[创建](http://api.jquerymobile.com/pagecreate/)**

3.  页面 B - 事件页面**[初始化](http://api.jquerymobile.com/pageinit/)**

4.  页面 A - 事件页面**[前隐藏](http://api.jquerymobile.com/pagebeforehide/)**

5.  页面 A - 事件页面**[删除](http://api.jquerymobile.com/pageremove/)**

6.  页面 A - 事件页面**[隐藏](http://api.jquerymobile.com/pagehide/)**

7.  页面 B - 演出前的活动**[页面](http://api.jquerymobile.com/pagebeforeshow/)**

8.  页面 B - 活动页面**[展示](http://api.jquerymobile.com/pageshow/)**

**为了更好地理解页面事件，请阅读以下内容：**

*   **`pagebeforeload`**,**`pageload`**并**`pageloadfailed`**在加载外部页面时触发
*   **`pagebeforechange`**,**`pagechange`**并且**`pagechangefailed`**是页面更改事件。当用户在应用程序的页面之间导航时会触发这些事件。
*   **`pagebeforeshow`**, **`pagebeforehide`**,**`pageshow`**和**`pagehide`**是页面转换事件。这些事件在转换之前、期间和之后触发并命名。
*   **`pagebeforecreate`**,**`pagecreate`**并且**`pageinit`**用于页面初始化。
*   **`pageremove`**可以在从 DOM 中删除页面时触发然后处理

页面加载 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/QGnft/](http://jsfiddle.net/Gajotres/QGnft/)

> 如果未启用 AJAX，某些事件可能不会触发。

## 防止页面转换

如果由于某种原因需要在某些情况下阻止页面转换，则可以使用以下代码完成：

```
$(document).on('pagebeforechange', function(e, data){
    var to = data.toPage,
        from = data.options.fromPage;

    if (typeof to  === 'string') {
        var u = $.mobile.path.parseUrl(to);
        to = u.hash || '#' + u.pathname.substring(1);
        if (from) from = '#' + from.attr('id');

        if (from === '#index' && to === '#second') {
            alert('Can not transition from #index to #second!');
            e.preventDefault();
            e.stopPropagation();

            // remove active status on a button, if transition was triggered with a button
            $.mobile.activePage.find('.ui-btn-active').removeClass('ui-btn-active ui-focus ui-btn');;
        }
    }
}); 
```

这个例子在任何情况下都可以工作，因为它会在每次页面转换的请求时触发，最重要的是它会在页面转换发生之前阻止页面更改。

这是一个工作示例：

## 防止多个事件绑定/触发

**`jQuery Mobile`**与经典 Web 应用程序的工作方式不同。根据您每次访问某个页面时如何设法绑定事件，它会一遍又一遍地绑定事件。这不是错误，它只是如何**`jQuery Mobile`**处理其页面。例如，看看这个代码片段：

```
$(document).on('pagebeforeshow','#index' ,function(e,data){
    $(document).on('click', '#test-button',function(e) {
        alert('Button click');
    });
}); 
```

工作 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/CCfL4/](http://jsfiddle.net/Gajotres/CCfL4/)

每次访问页面**#index**点击事件都会绑定到按钮**#test-button**。通过从第 1 页移动到第 2 页并返回几次来测试它。有几种方法可以防止此问题：

### 解决方案 1

最好的解决方案是使用**`pageinit`**绑定事件。如果您查看官方文档，您会发现它**`pageinit`**只会触发一次，就像文档准备好一样，因此事件不会再次被绑定。这是最好的解决方案，因为您没有像使用 off 方法删除事件时那样的处理开销。

工作 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/AAFH8/](http://jsfiddle.net/Gajotres/AAFH8/)

这个可行的解决方案是基于前面有问题的例子。

### 解决方案 2

在绑定之前删除事件：

```
$(document).on('pagebeforeshow', '#index', function(){
    $(document).off('click', '#test-button').on('click', '#test-button',function(e) {
        alert('Button click');
    });
}); 
```

工作 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/K8YmG/](http://jsfiddle.net/Gajotres/K8YmG/)

### 解决方案 3

使用 jQuery 过滤器选择器，如下所示：

```
$('#carousel div:Event(!click)').each(function(){
    //If click is not bind to #carousel div do something
}); 
```

因为事件过滤器不是官方 jQuery 框架的一部分，所以可以在这里找到：http: [//www.codenothing.com/archives/2009/event-filter/](http://www.codenothing.com/archives/2009/event-filter/)

简而言之，如果速度是您主要关心的问题，那么**解决方案 2**比解决方案 1 好得多。

### 解决方案 4

一个新的，可能是最简单的。

```
$(document).on('pagebeforeshow', '#index', function(){
    $(document).on('click', '#test-button',function(e) {
        if(e.handled !== true) // This will prevent event triggering more than once
        {
            alert('Clicked');
            e.handled = true;
        }
    });
}); 
```

工作 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/Yerv9/](http://jsfiddle.net/Gajotres/Yerv9/)

此解决方案的 Tnx 到[sholsinger ：](https://stackoverflow.com/users/89789/sholsinger) [http ://sholsinger.com/archive/2011/08/prevent-jquery-live-handlers-from-firing-multiple-times/](http://sholsinger.com/archive/2011/08/prevent-jquery-live-handlers-from-firing-multiple-times/)

**pageChange 事件怪癖 - 触发两次**

有时候pagechange事件可以触发两次，和前面提到的问题没有任何关系。

pagebeforechange 事件发生两次的原因是由于在 toPage 不是 jQuery 增强的 DOM 对象时 changePage 中的递归调用。这种递归是危险的，因为允许开发人员在事件中更改 toPage。如果开发人员始终将 toPage 设置为字符串，则在 pagebeforechange 事件处理程序中，无论它是否是对象，都会导致无限递归循环。pageload 事件将新页面作为数据对象的页面属性传递（这应该添加到文档中，当前未列出）。因此，pageload 事件可用于访问加载的页面。

简而言之，这是因为您正在通过 pageChange 发送其他参数。

例子：

```
<a data-role="button" data-icon="arrow-r" data-iconpos="right" href="#care-plan-view?id=9e273f31-2672-47fd-9baa-6c35f093a800&amp;name=Sat"><h3>Sat</h3></a> 
```

**要解决此问题，请使用Page events transition order**中列出的任何页面事件。

## 页面更改时间

如前所述，当您从一个 jQuery Mobile 页面更改到另一个页面时，通常是通过单击指向 DOM 中已存在的另一个 jQuery Mobile 页面的链接，或者通过手动调用 $.mobile.changePage，会发生几个事件和后续操作。在较高级别上会发生以下操作：

*   页面更改过程开始
*   新页面已加载
*   该页面的内容是“增强的”（样式化的）
*   发生从现有页面到新页面的转换（幻灯片/弹出/等）

这是一个平均页面转换基准：

页面加载和处理：**3 ms**

页面增强：**45 毫秒**

过渡：**604 毫秒**

总时间：**670 毫秒**

*这些值以毫秒为单位。

如您所见，转换事件占用了将近 90% 的执行时间。

## 页面转换之间的数据/参数操作

在页面转换期间，可以将参数从一个页面发送到另一个页面。它可以通过几种方式完成。

参考：[https ://stackoverflow.com/a/13932240/1848600](https://stackoverflow.com/a/13932240/1848600)

**解决方案1：**

您可以使用 changePage 传递值：

```
$.mobile.changePage('page2.html', { dataUrl : "page2.html?paremeter=123", data : { 'paremeter' : '123' }, reloadPage : true, changeHash : true }); 
```

并像这样阅读它们：

```
$(document).on('pagebeforeshow', "#index", function (event, data) {
    var parameters = $(this).data("url").split("?")[1];;
    parameter = parameters.replace("parameter=","");
    alert(parameter);
}); 
```

### [示例](https://stackoverflow.com/a/15840673/1848600)：

**索引.html**

```
<!DOCTYPE html>
  <html>
    <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="widdiv=device-widdiv, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <title>
    </title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js">
    </script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <script>
        $(document).on('pagebeforeshow', "#index",function () {
            $(document).on('click', "#changePage",function () {
                $.mobile.changePage('second.html', { dataUrl : "second.html?paremeter=123", data : { 'paremeter' : '123' }, reloadPage : false, changeHash : true });
            });
        });

        $(document).on('pagebeforeshow', "#second",function () {
            var parameters = $(this).data("url").split("?")[1];;
            parameter = parameters.replace("parameter=","");
            alert(parameter);
        });
    </script>
   </head>
   <body>
    <!-- Home -->
    <div data-role="page" id="index">
        <div data-role="header">
            <h3>
                First Page
            </h3>
        </div>
        <div data-role="content">
          <a data-role="button" id="changePage">Test</a>
        </div> <!--content-->
    </div><!--page-->

  </body>
</html>
```

**第二个.html**

```
<!DOCTYPE html>
  <html>
    <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="widdiv=device-widdiv, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <title>
    </title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js">
    </script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
   </head>
   <body>
    <!-- Home -->
    <div data-role="page" id="second">
        <div data-role="header">
            <h3>
                Second Page
            </h3>
        </div>
        <div data-role="content">

        </div> <!--content-->
    </div><!--page-->

  </body>
</html>
```

**解决方案2：**

或者，您可以创建一个持久的 JavaScript 对象用于存储目的。只要 Ajax 用于页面加载（并且页面不会以任何方式重新加载），该对象将保持活动状态。

```
var storeObject = {
    firstname : '',
    lastname : ''
} 
```

示例：http: [//jsfiddle.net/Gajotres/9KKbx/](http://jsfiddle.net/Gajotres/9KKbx/)

**解决方案3：**

您还可以像这样访问上一页的数据：

```
$(document).on('pagebeforeshow', '#index',function (e, data) {
    alert(data.prevPage.attr('id'));
}); 
```

**prevPage**对象保存完整的前一页。

**解决方案4：**

作为最后一个解决方案，我们有一个漂亮的 localStorage 的 HTML 实现。它仅适用于 HTML5 浏览器（包括 Android 和 iOS 浏览器），但所有存储的数据通过页面刷新保持不变。

```
if(typeof(Storage)!=="undefined") {
    localStorage.firstname="Dragan";
    localStorage.lastname="Gaic";
} 
```

示例：http: [//jsfiddle.net/Gajotres/J9NTr/](http://jsfiddle.net/Gajotres/J9NTr/)

可能是最好的解决方案，但在某些版本的 iOS 5.X 中会失败。这是一个众所周知的错误。

## 不要使用`.live()`//`.bind()``.delegate()`

我忘了提及（以及提醒我的 tnx [andleer](https://stackoverflow.com/users/64262/andleer)）使用 on/off 进行事件绑定/解除绑定，live/die 和 bind/unbind 已被弃用。

jQuery 的 .live() 方法在 1.3 版被引入 API 时被视为天赐之物。在一个典型的 jQuery 应用程序中，可能会有大量的 DOM 操作，并且随着元素的来来去去，挂钩和解除挂钩会变得非常乏味。该`.live()`方法可以根据其选择器在应用程序的整个生命周期内挂钩事件。很棒吧？错了，`.live()`方法太慢了。该`.live()`方法实际上将其事件挂钩到文档对象，这意味着事件必须从生成事件的元素冒泡，直到它到达文档。这可能非常耗时。

现在已弃用。jQuery 团队的人们不再推荐使用它，我也不推荐。即使挂钩和取消挂钩事件可能很乏味，但没有该`.live()`方法的代码会比使用它快得多。

而不是**`.live()`**你应该使用**`.on()`**. **`.on()`**比**.live()**快大约 2-3 倍。看看这个事件绑定基准： http: [//jsperf.com/jquery-live-vs-delegate-vs-on/34](http://jsperf.com/jquery-live-vs-delegate-vs-on/34)，一切都会从那里清楚。

## 基准测试：

有一个用于**jQuery Mobile**页面事件基准测试的优秀脚本。它可以在这里找到：[https](https://github.com/jquery/jquery-mobile/blob/master/tools/page-change-time.js) ://github.com/jquery/jquery-mobile/blob/master/tools/page-change-time.js 。但在你对它做任何事情之前，我建议你删除它的**`alert`**通知系统（每个“更改页面”都会通过停止应用程序向你显示这些数据）并将其更改为**`console.log`**正常运行。

基本上这个脚本会记录你所有的页面事件，如果你仔细阅读这篇文章（页面事件描述）你会知道 jQm 花了多少时间在页面增强、页面转换......

## 最后的笔记

总是，我的意思是总是阅读官方的**jQuery Mobile**文档。它通常会为您提供所需的信息，并且与其他一些文档不同，这个文档相当不错，有足够的解释和代码示例。

## 变化：

*   30.01.2013 - 增加了一种防止多事件触发的新方法
*   **31.01.2013 - 为页面转换之间的章节数据/参数操作**添加了更好的说明
***   03.02.2013 -**在页面转换之间的数据/参数操作章节中添加了新的内容/示例***   22.05.2013 - 添加了页面转换/更改预防的解决方案，并添加了指向官方页面事件 API 文档的链接*   18.05.2013 - 添加了另一个针对多事件绑定的解决方案**

 *** * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-03-24T09:10:36.797

你们中的一些人可能会觉得这很有用。`Ctrl`只需将其复制粘贴到您的页面，您将获得在 Chrome 控制台 ( ++ `Shift`)中触发事件的顺序`I`。

```
$(document).on('pagebeforecreate',function(){console.log('pagebeforecreate');});
$(document).on('pagecreate',function(){console.log('pagecreate');});
$(document).on('pageinit',function(){console.log('pageinit');});
$(document).on('pagebeforehide',function(){console.log('pagebeforehide');});
$(document).on('pagebeforeshow',function(){console.log('pagebeforeshow');});
$(document).on('pageremove',function(){console.log('pageremove');});
$(document).on('pageshow',function(){console.log('pageshow');});
$(document).on('pagehide',function(){console.log('pagehide');});
$(window).load(function () {console.log("window loaded");});
$(window).unload(function () {console.log("window unloaded");});
$(function () {console.log('document ready');}); 
```

你不会在控制台中看到卸载，因为它在页面被卸载时被触发（当你离开页面时）。像这样使用它：

```
$(window).unload(function () { debugger; console.log("window unloaded");}); 
```

你会明白我的意思。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-01T14:41:33.577

这是正确的方法：

要执行仅对索引页面可用的代码，我们可以使用以下语法：

```
$(document).on('pageinit', "#index",  function() {
    ...
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-03T08:25:10.747

jQuery-mobile 中的文档就绪和页面事件之间的简单区别在于：

1.  文档就绪事件用于整个 HTML 页面，

    ```
    $(document).ready(function(e) {
        // Your code
    }); 
    ```

2.  当有页面事件时，用于处理特定页面事件：

    ```
    <div data-role="page" id="second">
        <div data-role="header">
            <h3>
                Page header
            </h3>
        </div>
        <div data-role="content">
            Page content
        </div> <!--content-->
        <div data-role="footer">
            Page footer
        </div> <!--footer-->
    </div><!--page--> 
    ```

您还可以使用 document 来处理 pageinit 事件：

```
$(document).on('pageinit', "#mypage", function() {

}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-06-30T07:31:35.493

当您使用 .on() 时，它基本上是您正在使用的实时查询。

另一方面， .ready （如您的情况）是一个静态查询。使用它时，您可以动态更新数据，而不必等待页面加载。当输入特定值时，您可以简单地将值传递到数据库中（如果需要）。

实时查询的使用在我们输入数据（帐户或帖子甚至评论）的表单中很常见。****

# jquery - jQuery DataTables - 添加后选择并删除一行

> ID：14468661
> 
> 赞同：1
> 
> 时间：2013-01-22T21:51:00.340
> 
> 标签：jquery, jquery-selectors, datatables

我正在使用 jQuery [DataTables](http://www.datatables.net/index)构建一个可以使用以下脚本添加和删除行的表：

添加行：

```
var row_count = 1; 

$(document).ready(function() {
$('#my_table').dataTable();
} );

function fnClickAddRow() {
$('#my_table').dataTable().fnAddData( [
    "<input type=\"text\" name=\"fieldA\"" + row_count + " value=\"\" />",
    "<input type=\"text\" name=\"fieldB\"" + row_count + " value=\"\" />",
    // ...
    ] );

row_count++;
} 
```

如本[例](http://www.datatables.net/release-datatables/examples/api/add_row.html)所示。

然后我使用另一个脚本添加行选择和删除：

```
var oTable;

$(document).ready(function() {
/* Add a click handler to the rows - this could be used as a callback */
  $("#my_table tbody tr").click( function( e ) {
    if ( $(this).hasClass('row_selected') ) {
        $(this).removeClass('row_selected');
    }
    else {
        oTable.$('tr.row_selected').removeClass('row_selected');
        $(this).addClass('row_selected');
    }
});

/* Add a click handler for the delete row */
$('#delete').click( function() {
    var anSelected = fnGetSelected( oTable );
    if ( anSelected.length !== 0 ) {
        oTable.fnDeleteRow( anSelected[0] );
    }
} );

/* Init the table */
oTable = $('#my_table').dataTable( );
} );

/* Get the rows which are currently selected */
function fnGetSelected( oTableLocal )
{
  return oTableLocal.$('tr.row_selected');
} 
```

添加行函数 (fnClickAddRow()) 与 HTML 编码的行上的删除函数一样工作正常。但是，添加到表对象的行是不可选择的，因此不可删除。我需要向我的数据数组添加什么以使添加的行可选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:58:29.060

要解决未应用的类，您应该使用[`.on()`](http://api.jquery.com/on/)（或[`.live()`](http://api.jquery.com/live/)对于 jQuery <1.7）：

```
// bind to currently available (and future-added) elements
$('#my_table').on('click', 'tbody tr', function(e){
  /* select code */
}); 
```

然后现有`<tr>`元素（以及使用添加的元素`fnAddRow`）将接收`click`绑定。

# iphone - 是否可以获得特定的 iPhone 型号？

> ID：14468662
> 
> 赞同：2
> 
> 时间：2013-01-22T21:51:02.863
> 
> 标签：iphone, ios, xcode, version

> **可能重复：**
> [使用 iPhone SDK 确定设备（iPhone、iPod Touch）](https://stackoverflow.com/questions/448162/determine-device-iphone-ipod-touch-with-iphone-sdk)
> [如何通过代码查找 iPhone/iPod 设备型号（3G、3GS、4、4S）？](https://stackoverflow.com/questions/8426518/how-to-find-iphone-ipod-device-model3g-3gs-4-4s-by-code)

我知道有一种方法可以通过使用命令 [[UIDevice currentDevice] model] 或 [[UIDevice currentDevice]localizedModel] 来获取手机的型号和本地化型号，但是在几台 iPhone 上，这两个命令都会生成相同的结果，即“iPhone”（或所有 iPad 的“iPad”）。

我希望找到一种方法来检测设备是 iPhone 3、3S、4、4S 还是 5（或 iPad 1、2 等）。这个值是否隐藏在唯一标识符中，还是有更简单的方法来找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:59:03.573

从[这个 iphonedevsdk 帖子](http://iphonedevsdk.com/forum/iphone-sdk-development/21423-get-the-type-of-the-iphone-programmatically.html)中，

```
#import <sys/utsname.h>

struct utsname u;
uname(&u);

NSString *nameString =  [NSString stringWithCString:u.machine encoding:NSUTF8StringEncoding]; 
```

查看[此博客“iPhone @2x 图形、比例和 iPad”](http://www.markj.net/iphone-4-2x-graphics-scale-ipad/)以及[此标识符列表](http://www.everyi.com/by-identifier/ipod-iphone-ipad-specs-by-model-identifier.html)。

# java - Java：MessageDigest.getInstance("MD5") 返回 null

> ID：14468664
> 
> 赞同：1
> 
> 时间：2013-01-22T21:51:09.517
> 
> 标签：java, jce

Java：知道为什么`MessageDigest.getInstance("MD5")`会返回`null`吗？直到最近，这一切都很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T22:04:56.630

我怀疑这个问题

> MessageDigest.getInstance(“MD5”) 返回 null

如果`MessageDigest`您的意思是类`java.security.MessageDigest`，该方法将**不会**返回 null，即使您提供了一个不存在的算法作为参数。

jdk1.7的代码

```
public static MessageDigest getInstance(String algorithm)
    throws NoSuchAlgorithmException {
        try {
            Object[] objs = Security.getImpl(algorithm, "MessageDigest",
                                             (String)null);
            if (objs[0] instanceof MessageDigest) {
                MessageDigest md = (MessageDigest)objs[0];
                md.provider = (Provider)objs[1];
                return md;
            } else {
                MessageDigest delegate =
                    new Delegate((MessageDigestSpi)objs[0], algorithm);
                delegate.provider = (Provider)objs[1];
                return delegate;
            }
        } catch(NoSuchProviderException e) {
            throw new NoSuchAlgorithmException(algorithm + " not found");
        }
    } 
```

如果返回null，则md或delegate必须为null，则该类发生NPE。

所以一步一步检查和调试你的代码，找出哪个对象是空的。

# mysql - 什么 SQL 查询将只返回一列中的不同值？

> ID：14468665
> 
> 赞同：0
> 
> 时间：2013-01-22T21:51:13.903
> 
> 标签：mysql

> **可能重复：**
> [MYSQL 不返回重复行](https://stackoverflow.com/questions/14441127/mysql-dont-return-duplicate-rows)

我知道以前有人问过这个问题，但我还没有看到任何适合我的情况的解决方案。典型的 SQL 语句如下所示：

```
SELECT Hostname,Site,Rack FROM hardwaredb WHERE Hostname LIKE '%$hostval%' 
```

$hostval 是一个 powershell 变量，它被系统名称替换。因此，如果我有一个名为 OldGlory117 的系统，语句将如下所示：

```
SELECT Hostname,Site,Rack FROM hardwaredb WHERE Hostname LIKE '%OldGlory117%' 
```

由于其他列，某些行重复，并且数据库中存在重复的主机名。所以上面的查询可能会返回：

```
OldGlory117    USA    Rack1
OldGlory117    USA    Rack1
OldGlory117    USA    Rack1 
```

当我不寻找导致重复的列时，这是有问题的。有没有办法只返回主机名具有唯一值的行？如果我没有在 WHERE 语句中指定主机名怎么办？前任：

```
SELECT Hostname,Site,Rack FROM hardwaredb WHERE Rack LIKE '%Rack1%' 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:54:16.317

您可以使用 GROUP BY 吗？

```
SELECT Hostname,Site,Rack FROM hardwaredb WHERE Rack LIKE '%Rack1%' GROUP BY Hostname 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T21:58:59.730

以下代码将为您完成这项工作：

```
SELECT Hostname,Site,Rack FROM hardwaredb WHERE Hostname LIKE '%$hostval%'
GROUP BY Hostname, Site, Rack 
```

您也可以尝试使用`SELECT DISTINCT`关键字，但如果您以前没有使用过它可能会产生意想不到的结果......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T22:03:44.890

据我了解，您可以在使用 DISTINCT 之后实现您的目标（只要所有三列在示例数据中都是不同的，就可以工作）。

```
SELECT  DISTINCT Hostname,Site,Rack 
FROM    hardwaredb 
WHERE   Rack LIKE '%Rack1%' 
```

如果站点和机架中的值不同，那么您可以使用：

```
SELECT  DISTINCT Hostname
FROM    hardwaredb 
WHERE   Rack LIKE '%Rack1%' 
```

最后，如果您的站点和机架中的值不同，但您需要可以使用这些列中的每一列的值（排序依据很重要，否则查询变得不确定，并且在查询相同数据时可能会产生不同的结果）：

```
SELECT  HostName, Site, Rack
FROM    hardwaredb 
WHERE   Rack LIKE '%Rack1%'
GROUP BY HostName
ORDER BY Rack, Site; 
```

但是，我个人不喜欢这种解决方案，它在大多数 DBMS 中不起作用，并且打破了 ANSI 标准，即在选择列表中包含不依赖于 group by 项目的列。在不了解您的确切要求的情况下，尽管很难发布替代方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T21:57:45.353

尝试这个：

```
SELECT Hostname,Site,Rack FROM hardwaredb WHERE Rack LIKE '%Rack1%' having count(Hostname)=1 GROUP BY Hostname,Site,Rack 
```

编辑：有子句会帮助你在分组子句上设置条件

# jsf - JSF Bean 属性初始化

> ID：14468667
> 
> 赞同：0
> 
> 时间：2013-01-22T21:51:21.767
> 
> 标签：jsf, properties, init, managed-bean

我有一个名为 User 的托管 bean，它有一个名为 name 的 String 属性：

```
public class User {
    private String name;
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
} 
```

我有另一个名为 UserManager 的托管 bean，它具有 User 类型的属性，并允许您将用户添加到用户列表中：

```
public class UserManager {
    private List<User> userList = new ArrayList<User>();
    private User user;
    public User getUser() {
        return this.user;
    }
    public void setUser(User user) {
        this.user = user;
    }
    public String addUser() {
        userList.add(user);
        return "_USERADDED";
    }
} 
```

我添加用户的 JSF 页面如下所示：

```
<h:form>
    <h:inputText value="#{userManager.user.name}"/>
    <h:commandButton value="Add User" action="#{userManager.addUser}"/>
</h:form> 
```

我遇到的问题是当我运行我的页面并单击“添加用户”按钮时，我收到以下错误：

*adduser.xhtml @11,50 value="#{userManager.user.name}": 目标不可达，'null' 返回 null*

我假设这个错误是由于 UserManager 中的*user*属性为 null 并且我试图访问它来设置属性*名称*。

如果我修改 UserManager 并初始化用户属性，我可以让它工作：

```
private User user = new User(); 
```

我的问题是，这是初始化属性的正确方法，还是可以从 JSF 文件和/或配置文件中进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:22:37.640

是的，您应该自己创建它。JSF/EL 不会自动创建嵌套属性。规范的方法是为此使用`@PostConstruct`。

```
@ManagedBean
@RequestScoped
public class UserManager {

    private List<User> userList = new ArrayList<User>();
    private User user;

    @PostConstruct
    public void init() { 
        user = new User();
    }

    public String addUser() {
        userList.add(user);
        return "_USERADDED";
    }

    public User getUser() {
        return user;
    }

} 
```

请注意，我省略了 setter，因为 JSF/EL 从未使用过它。我仍然想知道那里`userList`在做什么，它不属于那里。我假设它只是一个用于测试的存根。在这种情况下，它可能最好是您注入的应用程序或会话范围的 bean `@ManagedProperty`。

# clojure - 在 clojure 中，一个人是如何浏览函数列表的？

> ID：14468669
> 
> 赞同：2
> 
> 时间：2013-01-22T21:51:22.477
> 
> 标签：clojure

在 clojure 中，我想通过函数列表推送一个画眉值，但我不确定如何以惯用的方式这样做。这个想法是我将有一个包含未知数量的函数的列表，我想利用画眉的可变参数特性。

所以，像这样的事情......

```
(->> 1 inc inc inc)
; 4

(->> 1 '(inc inc inc))
; does not work, of course 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T22:31:26.637

reduce 在这种情况下做得很好

```
user> (reduce #(%2 %1) 1 [inc inc inc])
4
user> (defn thrush [val funs] (reduce #(%2 %1) val funs))
#'user/thrush
user> (thrush 1 [inc inc inc dec])
3 
```

在可能的情况下，通过宏来处理此类事情

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T23:04:37.247

我认为这`comp`是这里最惯用的选项，尽管它会使用前缀语法。这也更符合正常的 Clojure (fn args) 表示法。

```
=> ((comp inc inc inc) 1)
4 
```

`apply`如果函数通常采用可变参数，但您想为其提供一个集合，请将其与惯用语结合起来。

```
=> ((apply comp (repeat 3 inc)) 1)
4 
```

请注意，尽管它是从右到左的

```
=> ((comp str inc inc inc) 1)
"4"
=> ((comp inc inc inc str ) 1)
ClassCastException java.lang.String cannot be cast to java.lang.Number 
```

这也更符合 Clojure/Lisp s 表达式。

如果您想要更“简单”的人类可读符号，Arthur Ulfeldt 的答案是完全可以接受的，并且是 reduce 和函数式编程的一个很好的例子。不过，“按原样”使用它可能会妨碍熟悉 s 表达式的“简单性”。

小心宏！

-> 和 ->> 是宏的原因是它们主动重写表单，因此您可以`(filter odd?)`在它们的范围内使用通常不完整的参数表示法，而不必过度使用`partial`. 这不能用正常的功能组合来完成。

最好在转向宏之前学会充分利用[正常的函数组合。](http://clojuredocs.org/quickref/Clojure%20Core#FunctionsGeneral)对于不习惯的人来说，它们有很多陷阱，应该谨慎使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T13:51:45.623

怎么样：

```
user=> (def my-fns [inc inc inc])
#'user/my-fns
user=> (->> 1 ((apply comp my-fns)))
4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T22:08:30.827

我想你可以这样做：

```
 (defmacro thrush-list [x flist] `(->> ~x ~@flist))
 (thrush-list 1 [inc inc inc])
 ; 4 
```

# android - 外部调用/意图的上下文 getFilesDir()

> ID：14468670
> 
> 赞同：1
> 
> 时间：2013-01-22T21:51:23.313
> 
> 标签：android, android-intent, android-context

希望这个问题没有被问过很多次（或根本没有！），但我想知道`Context`当一个应用程序通过它`<intent-filter>`从另一个应用程序打开时，s 将如何工作，而不是它的`MAIN` `LAUNCHER`意图。

本质上，所有应用程序都是特定的，即使该应用程序正在由另一个应用程序打开。如果我在 上调用 getFilesDir() `Activity`，因为它是 的子类`Context`，它会给我我的应用程序的目录还是其他应用程序的目录？

对我来说，我会理解它会打开另一个应用程序的目录，但我希望能从你们中的一个或一些人那里更好地了解到底发生了什么（以及我可以访问什么）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:20:27.120

如果您打开一个带有 Intent 的应用程序，那么您已经打开了该应用程序。如果应用 A 向应用 B 发送 Intent，则应用 B 打开并且执行的代码在应用 B 中。上下文是应用 B 的上下文。

话虽如此，但如果应用 A 将文件放在“公共”区域，则应用 B 可以访问应用 A 创建的文件。

用例是什么？

# android - 如何以编程方式使android软键盘静音？

> ID：14468674
> 
> 赞同：1
> 
> 时间：2013-01-22T21:51:37.407
> 
> 标签：android

如何以编程方式使android软键盘静音？我尝试使用

```
AudioManager audio = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
audio.setStreamMute(AudioManager.FX_KEY_CLICK, true); 
```

但这无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:59:10.120

关闭正常音量。我不认为任何键盘都使用默认的按键噪音，当我制作键盘时，每个 OEM 都希望我们使用他们发送给我们的自定义 ogg 文件。但我们确实尊重正常音量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-16T09:32:11.597

```
if (isSetSound) {
        AudioManager am = (AudioManager) getSystemService(AUDIO_SERVICE);
        am.playSoundEffect(AudioManager.FX_KEY_CLICK);
    } else {
        AudioManager am = (AudioManager) getSystemService(AUDIO_SERVICE);
        am.setStreamMute(AudioManager.FX_KEY_CLICK, false);
    } 
```

# c# - 是否有用于将 WPF FlowDocument 转换为 WordML 的开源 XSLT？

> ID：14468675
> 
> 赞同：12
> 
> 时间：2013-01-22T21:51:38.550
> 
> 标签：c#, wpf, xslt, openxml, wordml

我想使用允许用户编辑和格式化文本的 WPF RichTextBox。此格式化文本最终将与我们的一些其他自定义 XML 数据一起进入 Word 文档。

我发现了几个从 WordML 到 FlowDocument 的示例，但没有将 RichTextBox FlowDocument 到 WordML。

与其重新发明轮子，我是否可以使用开源 XSLT 文件将 WPF FlowDocument 转换为 WordML？

我不是在寻找 100% 的解决方案（例如表格、数字、图纸等）。在这一点上，我只对保留字体格式、段落、项目符号列表等感兴趣。

**编辑：**

如果可能，我需要避免使用 Word Interop 或昂贵的第 3 方工具（例如 Apose）。我正在寻找一种优雅的方式来将一些基本的 FlowDocument XML 格式的内容转换为 OpenXML，最好是通过 XSLT。由于我对嵌入图片等项目不感兴趣，我相信这可能是可行的，因为我发现了另一个方向的示例（即 OpenXML/WordML 到 XAML Flowdocument）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:59:56.227

我在搜索中找到了几个解决方案。最简单的方法可能是转换为支持所有必需 XSLT 内容的 .rtf 格式。[这在这里](https://stackoverflow.com/questions/829053/how-to-convert-flowdocument-to-rtf)解释得很好。

我在网上找到的另一个解决方案是有人转到 PDF，但首先转换为 .DOCX。你可以在[这里](https://stackoverflow.com/questions/5334711/wpf-flowdocument-to-pdf)找到他的解决方案。如果您只想要转换为 .DOCX 的部分，则需要编辑他的代码，以便 .DOCX 不会被 .PDF 替换。

根据您的项目如何运作的细节，您可能会觉得[这](http://kintespace.com/rasxlog/?p=656)很有趣。

我希望这可以帮助你。目前没有直接的方法可以使用单个 API 执行此操作。您需要转换为某种格式，如 .XPS、.RTF 等，然后从它们使用另一个 API 转换为 WordMl。

快乐编码！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:46:10.913

JABFreeware 谈到了我使用过的一种方法。获取 FlowDocument 内容并创建一个 rtf，然后构建一个新的 Word 文档并保存。但是，您可能不想接触 Microsoft.Office.Interop.Word 之类的库。

还有一些其他方法的例子。[例如，您可能想在此处](http://www.openxml.biz/OpenXMLWriter.html)查看以下开源 FlowDocument 编辑器。它很旧，但仍然提供信息并将 FlowDocuments 转换为 docx。这导致从 Microsoft 的站点查看 OpenXml SDK（没有足够的代表获取更多链接，但 Google 会带您到那里）。

此外，您可能会发现[这](http://wordtoxaml.codeplex.com/)作为参考很有用。它是一个 Word 插件，您可以获取源代码，以便将 Word 文档转换为 FlowDocuments。它从原始请求倒退，但有可能逆转该过程。

希望有些帮助。

**编辑：**

如果您真的想作弊并且您将创建的文档非常基础，那么您可以。但是，我知道这仅适用于 docx。

1.  首先创建一个带有一些格式的简单 Word 文档（作为 docx）。
2.  提取内容并保留除 /word/document.xml 文件之外的所有内容。
3.  打开 /word/document.xml 文件并将其用作 XSLT 的模板。我在这里做了一个简单的：

流文档 XML

```
<?xml version="1.0" encoding="utf-8"?>
<FlowDocument xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
  <Paragraph>
    <Run FontWeight="Bold" Foreground="#FF0000">Testing</Run>
  </Paragraph>
  <Paragraph>
    <Run FontWeight="Bold" Foreground="#0000FF">Testing2</Run>
  </Paragraph>
</FlowDocument> 
```

XSLT（仅部分用于演示目的）

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
<xsl:template match="/x:FlowDocument">
    <?mso-application progid="Word.Document"?>
    <w:document xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main">
       <w:body>
          <w:sect>
        <w:p>
                <xsl:for-each select="x:Paragraph">
            <w:pPr>
                <w:jc w:val="center" />
                <w:spacing w:after="0" w:line="240" w:lineRule="auto"/>
            </w:pPr>
            <w:r>
                <w:rPr>
                    <w:rFonts w:ascii="Segoe UI" w:hAnsi="Segoe UI" w:cs="Segoe UI" />
                    <w:sz w:val="18" />
                    <w:b w:val="on" />
                    <w:i w:val="off" />
                    <w:color>
                        <xsl:attribute name="w:val"><xsl:value-of select="x:Run/@Foreground"/></xsl:attribute>
                    </w:color>
                </w:rPr>
                <w:t><xsl:value-of select="x:Run" /></w:t>
            </w:r>
    </xsl:for-each>
        </w:p>
      </w:sect>
    </w:body>
  </w:document>
</xsl:template>
</xsl:stylesheet> 
```

1.  使用 XmlDocument 和 XamlWriter 创建要转换的 xml。
2.  将转换结果另存为新的“document.xml”并将其放在 /word 目录中，并将所有内容打包为带有 .docx 扩展名的存档。

最令人头疼的是 FlowDocuments 可能是 RGBA，但 WordML 在颜色属性中使用 RBG。

所以，有一种方法可以用一个 xslt 搞定一切，但也很头疼。恕我直言，来自 OpenXmlWriter 应用程序的代码将是一个更清洁的解决方案。或者可能是两者的结合......

# cmake - CMake：将库链接到库

> ID：14468678
> 
> 赞同：24
> 
> 时间：2013-01-22T21:51:42.817
> 
> 标签：cmake

我对 cmake 有问题。可以说，我有一个 CMakeLists1，它有一个 CMakeLists2 所在的子目录。

在 CMakeLists2 我的目标是一个静态库。我想将它链接到外部库。我已经做到了：

```
link_directories ("path_to_library")
add_library (project2 ${sources})
target_link_libraries (project2 "name_of_external_lib") 
```

然后，我想在我的 project1 中使用这个 project2 中的一个类。我是这样做的：

```
add_executable (project1 ${sources})
target_link_libraries (project1 project2) 
```

但这根本行不通。首先，project2 没有链接到外部库。只是为了检查，我通过vs10项目属性添加了这个库，并且大小不同。第二件事，不知何故 project1 看到了外部库（它在这个项目的库依赖项中），当然找不到它。

问题是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T13:03:28.013

我认为 CMake 的默认行为是不将 project2 链接到外部库，而是将两个库链接到可执行文件。来自“掌握 CMake”一书。

> 由于静态库不链接到它们所依赖的库，因此 CMake 跟踪库很重要，以便可以在正在创建的可执行文件的链接行上指定它们。

您可以尝试在 CMakeLists2 中使用绝对路径：

```
add_library (project2 ${sources})
target_link_libraries (project2 "path to ext lib"/"name of ext lib") 
```

或者你可以添加

```
link_directories ("path_to_library") 
```

到 project1 的 CMakeLists 文件。

如果您真的想在 Visual Studio 中执行类似操作，您可能可以使用此[答案](https://stackoverflow.com/a/2157735/929658)中给出的命令在 CMake 中构建 custom_command。它可能看起来像这样（我没有测试它）。

```
set(EXT_LIB "path_to_library/name_of_external_lib") 
set(BIG_LIB "path_to_big_lib/name_of_big_lib")
add_library (project2 ${sources})
get_property(PROJ2_LOC TARGET project2 PROPERTY LOCATION)

add_custom_command(OUTPUT ${BIG_LIB} 
                   DEPENDS ${EXT_LIB} project2
                   COMMAND "lib.exe /OUT:${BIG_LIB} ${EXT_LIB} ${PROJ2_LOC} ) 
```

然后你可以将你的可执行文件与**${BIG_LIB}**链接起来。

您必须考虑的一些事项：

*   Maybe you have to use **LOCATION_CONFIG** ([CMake docs](http://cmake.org/cmake/help/v2.8.8/cmake.html#prop_tgt:LOCATION_CONFIG), I found the get_property command in [this answer](https://stackoverflow.com/a/4481942/929658) )
*   link.exe has to be in your path
*   watch the scope of the **BIG_LIB** variable if you want to use it in an other CMakeLists.txt

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T22:28:38.653

我猜问题很可能是 *name_of_external_lib* 不正确，所以它找不到它。

我会去：

```
find_library(
    LIB_I_NEED name_of_external_lib
    HINTS "path_to_library"
)

if(${LIB_I_NEED} STREQUAL "LIB_I_NEED-NOTFOUND")
    message(FATAL_ERROR "Couldn't find the 'external_lib' library)
endif()

message(STATUS "Found 'external_lib' at: ${LIB_I_NEED}")

add_library (project2 ${sources})
target_link_libraries (project2 ${LIB_I_NEED}) 
```

* * *

如果这没有帮助，请快速阅读 cmake 文档中的示例：

[http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:target_link_libraries](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:target_link_libraries)

它在那里提到的一件事是：

> 虽然一次重复通常就足够了，但病态目标文件和符号排列可能需要更多。可以通过在最后一次 target_link_libraries 调用中手动重复组件来处理这种情况

所以我想说的另一件事可能是在 project2 中：

```
set(PROJECT_2_LIBS project2 "name_of_external_lib" PARENT_SCOPE) 
```

然后在exe中：

```
target_link_libraries (project1 ${PROJECT_2_LIBS}) 
```

这将在两个地方重复“external_lib”链接，并为您提供更多工作机会；）

# c# - 将 DataGridViewComboBoxCell 添加到 GridView c#

> ID：14468684
> 
> 赞同：-1
> 
> 时间：2013-01-22T21:51:59.687
> 
> 标签：c#, gridview, combobox

似乎它是如此简单，但由于某种原因，它持续了 4 个小时没有结果。我有两列和几行已经填充的简单 Gridview，现在我想将 ComboBoxCell 添加到下一行。

我会展示我的逻辑，也许你会告诉我我的错误：

```
SampleGridView.Rows.Add("test1", "test1");
SampleGridView.Rows.Add("test2", "test2");
SampleGridView.Rows.Add("test3", "test3"); 
```

现在我正在插入我的 ComboBox 三行工作正常：

```
DataGridViewRow RowSample = new DataGridViewRow();
DataGridViewComboBoxCell  CellSample = new DataGridViewComboBoxCell();
CellSample.DataSource = StringList; // list of the items that I want to insert in ComboBox
RowSample.Cells.Add(CellSample);
SampleGridView.Rows.Add(RowSample); 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T01:21:42.050

想通了 :) 我试图将 ComboBox 插入该行的第二个单元格，但它没有用。我试图这样做：

```
SampleGridView.Rows.Add("CellText", RowSample); 
```

但它实际上必须是这样的

```
DataGridViewRow RowSample = new DataGridViewRow();
DataGridViewComboBoxCell  CellSample = new DataGridViewComboBoxCell();
CellSample.DataSource = StringList; // list of the string items that I want to insert in ComboBox
CellSample.Value = StringList[0]; // default value for the ComboBox
DataGridViewCell cell = new DataGridViewTextBoxCell();
cell.Value = "CellText"; // creating the text cell
RowSample.Cells.Add(cell);
RowSample.Cells.Add(CellSample);
SampleGridView.Rows.Add(RowSample); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:12:27.760

```
DataGridViewComboBoxColumn combo = new DataGridViewComboBoxColumn();
combo.datasource = stringlist;

SampleGridView.Columns.Add(combo); 
```

这不在我的脑海中，但应该可以。

# facebook - Facebook 应用程序用户数

> ID：14468685
> 
> 赞同：-1
> 
> 时间：2013-01-22T21:52:01.820
> 
> 标签：facebook

是否有任何 Facebook API 让我能够获取允许我的应用程序的用户总数？我看到了获取在最后一天和上个月访问它的用户的能力，但不是当前的总数。我浏览了很多文档（至少可以说是令人生畏的）并且没有看到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T23:09:42.323

您可以通过[Graph API Insights](https://developers.facebook.com/docs/reference/api/insights/)获得它，但您必须查看[FQL Insights 信息](https://developers.facebook.com/docs/reference/fql/insights)才能获得可用指标的列表。

```
https://graph.facebook.com/YOUR_APP_ID/insights/application_installed_users?access_token=TOKEN 
```

您使用的`access_token`需要是应用访问令牌，或应用管理员的用户访问令牌。

# java - 如何使用 Nimbus 外观更改表格单元格中的 JProgressbar 栏颜色

> ID：14468689
> 
> 赞同：1
> 
> 时间：2013-01-22T21:52:22.720
> 
> 标签：java, swing, jprogressbar, tablecellrenderer, nimbus

我的问题是我有一个表格，其中一列在表格单元格中有 ProgressBars，我想根据行号和列号动态更改 ProgressBar 的栏颜色，但是我无法实现它。Nimbus 也有局限性。我必须基于每个组件覆盖 Nimbus UI 默认值。因此，如果我想动态更改单元格的条形颜色，如何在不更改单元格文本颜色的情况下实现它？

```
 public class ProgressRenderer extends JProgressBar implements TableCellRenderer {

    private static final long serialVersionUID = 1L;

    public ProgressRenderer(int min, int max) {
        super(min, max);
        this.setStringPainted(true);
    }

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value,
            boolean isSelected, boolean hasFocus, int row, int column) {
        this.setValue((Integer) value);
        UIDefaults defaults = new UIDefaults();
        defaults.put("ProgressBar[Enabled].foregroundPainter", new MyPainter(Color.RED));
       defaults.put("ProgressBar[Enabled+Finished].foregroundPainter", new MyPainter(Color.RED));

              putClientProperty("Nimbus.Overrides.InheritDefaults", Boolean.TRUE);
     putClientProperty("Nimbus.Overrides", defaults);
        return this;
    }

    class MyPainter implements Painter<JProgressBar> {

        private final Color color;

        public MyPainter(Color c1) {
            this.color = c1;
        }
        @Override
        public void paint(Graphics2D gd, JProgressBar t, int width, int height) {
            gd.setColor(color);
            gd.fillRect(0, 0, width, height);
        }
    }         
} 
```

以上是我的代码片段，我使用 TableCellRenderer。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T07:27:38.820

类似的东西？;)

![JTable 单元格上的不同 JProgressBar](../Images/434db713d7a9d9f9277dba35aa59d4ec.png)

您遇到的问题是，为特定组件实例覆盖 Nimbus 的默认颜色**非常痛苦（请参阅**[相关问题](https://stackoverflow.com/questions/6922368/override-swing-nimbus-lf-primary-color-per-component-instance)）。

大多数 Nimbus 画家定义了大约 50 种不同的颜色，这些颜色源自一两个基本颜色（the`nimbusBlueGrey`和 Famous `nimbusOrange`）。最好的方法是在要更改的组件的`UIDefaults`found in`Nimbus.Override`属性中覆盖它们，但这不是他们所做的（我想打开一个错误；），不认真！）。

我一直在努力实现完全相同的目标，最终能够通过......（闭上眼睛）复制粘贴并将`javax.swing.plaf.nimbus.ProgressBarPainter`类破解到我自己的代码中！为什么？因为该类是包私有的，不能被覆盖（这会更干净一些......）。尽管我*讨厌*这样做，但它确实有效......

这是修改它的方法（我不会发布整个代码，因为它太大而且没那么有趣）：

1.  `ProgressBarPainter()`首先在构造函数之后添加以下方法。（它们基本上是您可以按照该`decodeColor()`方法找到的内容的复制粘贴，`AbstractRegionPainter`然后`NimbusLookAndFeel`再到`NimbusDefaults.getDerivedColor()`最后`DerivedColor.rederiveColor()`）：

    ```
    private float clamp(float v) {
        if (v < 0.0f)
            return 0.0f;
        if (v > 1.0f)
            return 1.0f;
        return v;
    }

    private int clamp(int v) {
        if (v < 0)
            return 0;
        if (v > 255)
            return 255;
        return v;
    }

        // Got from javax.swing.plaf.nimbus.DerivedColor.rederiveColor()
    private Color decodeColor(Color src, float hOffset, float sOffset, float bOffset, int aOffset) {
        float[] tmp = Color.RGBtoHSB(src.getRed(), src.getGreen(), src.getBlue(), null);
        tmp[0] = clamp(tmp[0] + hOffset);
        tmp[1] = clamp(tmp[1] + sOffset);
        tmp[2] = clamp(tmp[2] + bOffset);
        int alpha = clamp(src.getAlpha() + aOffset);
        return new Color((Color.HSBtoRGB(tmp[0], tmp[1], tmp[2]) & 0xFFFFFF) | (alpha << 24), true);
    } 
    ```

2.  将静态生成 50 种颜色的代码复制粘贴到您将用于动态生成它们的方法中，从您想要的颜色：

从 ：

```
private Color color1 = decodeColor("nimbusBlueGrey", 0.0f, -0.04845735f, -0.17647058f, 0);
...
private Color color50 = decodeColor("nimbusOrange", 0.0014062226f, -0.77816474f, 0.12941176f, 0); 
```

至：

```
private void initColors(Color foreground) {
    color1 = decodeColor("nimbusBlueGrey", 0.0f, -0.04845735f, -0.17647058f, 0);
    // ...
    color50 = decodeColor(foreground, 0.0014062226f, -0.77816474f, 0.12941176f, 0);
} 
```

请注意，我们将我们想要的颜色作为参数传递，并将其用作 的替代品`nimbusOrange`，这似乎是进度条的主要颜色。我们尝试坚持 Nimbus 派生颜色的方式。

并更改`ProgressBarPainter()`构造函数以包含主要颜色并生成它们：

```
public ProgressBarPainter(int state, Color foreground) {
    super();
    this.state = state;
    this.ctx = new AbstractRegionPainter.PaintContext(new Insets(5, 5, 5, 5), new Dimension(29, 19), false);
    initColors(foreground); // Generates appropriate colors
} 
```

您将`ctx`在`NimbusDefaults`. 但是，请注意枚举`AbstractRegionPainter.PaintContext.CacheMode`在调整后的类中不可见，因此您将无法使用所有花哨的功能。幸运的是，有一个更简单的构造函数`AbstractRegionPainter.PaintContext`不使用它。（就我而言，我不需要所有不同的状态，所以我使用默认值，但可以随意添加任何其他参数来处理它们）。

最后，Graal！;) （我正在根据应该是百分比的值更改颜色：`green`如果超过 75%，`orange`如果超过 50%，`red`否则）。

```
@Override
public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
    int v = ((Integer)value).intValue();
    Color c;
    if (val >= 75)
        c = Color.GREEN;
    else if (val >= 50)
        c = Color.ORANGE;
    else
        c = Color.RED;
    setValue(v);
    UIDefaults defaults = new UIDefaults();
    ProgressBarPainter painter = new ProgressBarPainter(ProgressBarPainter.FOREGROUND_ENABLED, c);
    defaults.put("ProgressBar[Enabled].foregroundPainter", painter);
    putClientProperty("Nimbus.Overrides", defaults);
    return this;
} 
```

现在，让我们稍微“清理”一下（我们可以称之为“清理”工作）：

*   删除`private Color colorXX`那些使用的分配`nimbusOrange`，因为它们将由调用生成`initColors()`。
*   保留这些使用的分配`nimbusBlueGrey`，因为我们不会更改它们，并且不要将它们包含在`initColors()`. 这样就可以`initColors()`生成 26 种颜色（17 到 28、30、33 到 44 和 50）。
*   如果像我一样，您只有几种颜色可以代表所有进度条，请预先生成`ProgressBarPainter`您将使用的所有 s 并在`getTableCellRendererComponent()`
*   （或者在我的情况下，使用适当的覆盖颜色画家创建三个`private static JProgressBar red, orange, green`并返回它们而不是`this`in `getTableCellRendererComponent()`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-28T07:37:09.480

或者，我最终做的是扩展`JPanel`并用我想要的颜色为自己绘制一个进度条：

![带有颜色的自定义绘制进度条](../Images/9c84fa54a88f785b484cd0e2447f7485.png)

```
public class ProgressBarCellRenderer extends JPanel implements TableCellRenderer {

    int val = 0;

    private static Paint generatePaint(Color c, int height) {
        return new LinearGradientPaint(0.0f, 0.0f, 0.0f, (float)height, new float[]{0.0f, 0.5f, 1.0f}, new Color[]{c.darker(), c.brighter(), c.darker()}, CycleMethod.REFLECT);
    }

    private static Paint greenPaint = generatePaint(Color.GREEN);
    private static Paint orangePaint = generatePaint(Color.ORANGE);
    private static Paint redPaint = generatePaint(Color.RED);

    @Override
    public void paintComponent(Graphics g) {
        Graphics2D g2d = (Graphics2D)g;
        int x = 1;
        int y = 1;
        int w = getWidth()-2;
        int h = getHeight()-2;
        g2d.setColor(Color.LIGHT_GRAY);
        g2d.fillRect(x, y, w, h);
        Paint backPaint;
        if (val >= 75)
            backPaint = greenPaint;
        else if (val >= 50)
            backPaint = orangePaint;
        else
            backPaint = redPaint;
        g2d.setPaint(backPaint);
        int wd = (int)Math.round(w * val / 100.0);
        g2d.fillRect(x, y, wd, h);
        g2d.draw3DRect(x, y, wd, h, true);
        // Draw some text here if you want
    }
} 
```

结果对我来说已经足够好了，我发现它比“ [Nimbus hack](https://stackoverflow.com/a/17359451/1098603) ”更干净（高效）！

# excel - 将工作表“1”到“31”合并到同一工作簿中的“ALL”工作表中

> ID：14468691
> 
> 赞同：0
> 
> 时间：2013-01-22T21:52:23.923
> 
> 标签：excel, vba

我目前有一个工作簿设置为在 excel 中打开多个 txt 文件，过滤所有数据并只导入我需要的内容。每次导入都会进入不同的 Excel 表“1”、“2”、“3”、.... 到“31”（天）。

所有工作表的列数相同，但行数不同。我需要做的是将所有工作表合并到同一工作簿中的“所有”工作表中。

帮助？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:56:31.450

我知道了！奇迹般有效。我的第一个工作表称为“ALL”，第二个工作表称为“设置”，我在其中检查我的日期范围，以查看我在几天内导入到其余工作表的文件，这些工作表名为“1”到“31”。使用此宏，第三张工作表（即工作表“1”）是当它开始合并到工作簿中的最后一张工作表时。它复制除具有列标题的第一行之外的所有内容。

```
Dim J As Integer

On Error Resume Next

For J = 3 To Sheets.Count
Sheets(J).Activate
Range("A1").Select
Selection.CurrentRegion.Select
Selection.Offset(1, 0).Resize(Selection.Rows.Count - 1).Select
Selection.Copy Destination:=Sheets(1).Range("A1000000").End(xlUp)(2)

Next

Sheets("ALL").Select 
```

# versioning - 发布生命周期和版本号

> ID：14468695
> 
> 赞同：0
> 
> 时间：2013-01-22T21:52:29.707
> 
> 标签：versioning, release-cycle

我正在为我办公室的用户编写许多小型实用程序脚本，我想开发一个发布周期/版本号系统，以便在测试和分发这些工具给用户时使用。我不确定发布周期阶段（alpha、beta、发布候选）和版本号（1.0.1、1.1.0、1.2.1 等）之间应该有什么关系。

假设我发布了一个工具的 0.1.0 版本。我将其称为 0.1.0-beta 并将其提供给一些用户进行测试。他们没有发现任何问题，所以我不需要对代码进行任何更改。然后我只是说 0.1.0 不再是 beta 版本，还是我要创建一个新的版本号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:06:12.580

根据 Semantic Versioning 2.0.0-rc.1（请参阅那里的版本号），简短的回答是您只需将发布的版本命名为 0.1.0，这将被认为大于 0.1.0-beta。

完整的细节在这里：[http ://semver.org](http://semver.org)

我无法评论使用这种方法的个人经验，但它似乎经过合理考虑，并且在其 github 问题页面上进行了相关讨论：[https ://github.com/mojombo/semver/issues](https://github.com/mojombo/semver/issues)

# c++ - 用 const char 指针分配的内存在哪里？

> ID：14468697
> 
> 赞同：6
> 
> 时间：2013-01-22T21:52:32.940
> 
> 标签：c++, c, memory

> **可能重复：**
> [C++ 中的字符串文字是在静态内存中创建的吗？](https://stackoverflow.com/questions/349025/is-a-string-literal-in-c-created-in-static-memory)
> [C++ 字符串字面量数据类型存储](https://stackoverflow.com/questions/2327841/c-string-literal-data-type-storage)

在这段代码中：

`const char * str = "hello world";`

如果我理解正确，指针是 4 或 8 个字节，我猜它会分配在堆栈上。但是“hello world”的内存分配和存储在哪里呢？
或者具体`str`指的是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-22T21:54:22.630

它没有分配。它通常存储在程序的代码段或堆栈中，这取决于编译器。无论哪种方式，它都指向一个以空字符结尾的字符数组。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T22:06:21.990

本质上，它的编译就像您编写的那样：

```
const static char helloworld[12] 
             = {'h', 'e', 'l', 'l', 'o',' ','w', 'o', 'r', 'l', 'd', '\0'};

const char * str = helloworld; 
```

该数组通常会放置在内存的某个只读部分中，可能靠近可执行代码。

根据定义的位置，str 将位于堆栈或全局内存空间中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-22T21:53:36.757

C 没有堆栈或堆。C 说这`"hello world"`是一个字符串文字，并且字符串文字具有*静态存储持续时间*。

# wordpress - 带有 WordPress 主题选项面板的未定义索引

> ID：14468700
> 
> 赞同：0
> 
> 时间：2013-01-22T21:52:38.387
> 
> 标签：wordpress, themes, options, options-menu, undefined-index

我在调试模式下有 4 个未定义的索引警告。我已经修复了大约 10 个，但我似乎无法找出修复其余部分的正确方法：

这是我的代码： http: [//pastebin.com/S61WuFem](http://pastebin.com/S61WuFem)

我的错误在第 112 行，使用 fixed_layout 和 fluid_layout，在第 154 和 156 行，使用 layout_view

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:06:19.433

一般来说，如果它可能不存在，我会在使用它*之前检查一个数组元素。*（这本质上是“未定义的索引”错误）。有一个简写`if`语句往往很方便：

```
<?php echo ($array['possible_element'] ? array['possible_element'] : ''); ?> 
```

[David Walsh](http://davidwalsh.name/php-ternary-examples)有一个很好的教程来解释这种语法。

另一种情况...如果您的*整个*数组可能为空并且尝试循环数组会导致此错误，请按以下模式包装循环：

```
<?php
if (is_array($array) && !empty($array)) {
    // now you can loop your array
}
?> 
```

希望有帮助。玩得开心！

# html - CSS表单对齐问题

> ID：14468701
> 
> 赞同：0
> 
> 时间：2013-01-22T21:52:45.620
> 
> 标签：html, css, jsp

我正在使用 JSP 设计一个 html 表单。下面是我的css文件-

```
 body {
    font-family: "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial,
        Helvetica, sans-serif;
    font-size: 12px;
}

p,h1,form,button {
    border: 0;
    margin: 0;
    padding: 0;
}

.spacer {
    clear: both;
    height: 1px;
}
/* ----------- My Form ----------- */
.myform {
    margin: 0 auto;
    width: 400px;
    padding: 14px;
}

/* ----------- stylized ----------- */
#stylized {
    border: solid 2px #b7ddf2;
    background: #ebf4fb;
}

#stylized h1 {
    font-size: 14px;
    font-weight: bold;
    margin-bottom: 8px;
}

#stylized p {
    font-size: 11px;
    color: #666666;
    margin-bottom: 20px;
    border-bottom: solid 1px #b7ddf2;
    padding-bottom: 10px;
}

#stylized label {
    display: block;
    font-weight: bold;
    text-align: right;
    width: 140px;
    float: left;
}

#stylized .small {
    color: #666666;
    display: block;
    font-size: 11px;
    font-weight: normal;
    text-align: right;
    width: 140px;
}

#stylized input {
    float: left;
    font-size: 12px;
    padding: 4px 2px;
    border: solid 1px #aacfe4;
    width: 200px;
    margin: 2px 0 20px 10px;
    height: 30px;
}

#stylized checkbox {
    float: left;
    font-size: 12px;
    padding: 4px 2px;
    border: solid 1px #aacfe4;
    width: 10px;
    margin: 2px 0 20px 10px;
}

#stylized select {
    float: left;
    font-size: 12px;
    padding: 4px 2px;
    border: solid 1px #aacfe4;
    width: 250px;
    margin: 2px 0 20px 10px;
    height: 100px;
}

#stylized button {
    clear: both;
    margin-left: 150px;
    width: 125px;
    height: 31px;
    background: #666666 url(img/button.png) no-repeat;
    text-align: center;
    line-height: 31px;
    color: #FFFFFF;
    font-size: 14px;
    font-weight: bold;
} 
```

下面是我使用 JSP 构建的表单。

```
<div id="stylized" class="myform">

        <form:form id="form" name="form" method="POST" action="/showResponse">
            <h1>Service call Form</h1>
            <p></p>

            <form:label path="userId">User Id
                <span class="small">Enter User Id</span>
            </form:label>
            <form:input name="name" id="name" path="userId" />

            <form:label path="debugFlag">Debug Flag :
                <span class="small">Select Debug Flag</span>
            </form:label>
            <form:checkbox path="debugFlag" name="name" id="name" />

            <form:label path="attributeNames">Attribute Names :
                <span class="small">Select Attribute Names</span>
            </form:label>
            <form:select path="attributeNames" items="${attributeNamesList}"
                multiple="true" name="name" id="name" />

            <form:label path="machineName">Machine Name
                <span class="small">Enter Machine Name</span>
            </form:label>
            <form:input name="name" id="name" path="machineName" />

            <form:label path="portNumber">Port Number
                <span class="small">Enter Port Number</span>
            </form:label>
            <form:input path="portNumber" name="name" id="name" />

            <button type="submit">Submit</button>
            <div class="spacer"></div>

        </form:form>
    </div> 
```

我面临的唯一问题是，它没有与它的标签和相应的输入正确对齐。下面是截图——

![在此处输入图像描述](../Images/4fdec781e862be268627d6cdfa344256.png)

仅正确分配了用户 ID 和调试标志。除此之外，它以某种方式搞砸了。谁能告诉我我在 CSS 中做错了什么？

查看页面源代码后的实际 HTML 代码-

```
<html>
<head><link href="/ressvr/z/u4/apo4x4yiqe23jo4erdz5ig4tm.css?dataUri=true" type="text/css" rel="stylesheet"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="layout" content="main" />
    <title>Sample App</title>
</head><body><div id="stylized" class="myform">

        <form id="form" name="form" action="/showResponse" method="POST"><h1>Service call Form</h1>
            <p></p>

            <label for="userId">User Id
                <span class="small">Enter User Id</span>
            </label><input id="name" name="userId" name="name" type="text" value=""/><div class="spacer"></div>

            <label for="debugFlag">Debug Flag
                <span class="small">Select Debug Flag</span>
            </label><input id="name" name="debugFlag" name="name" type="checkbox" value="true"/><input type="hidden" name="_debugFlag" value="on"/><div class="spacer"></div>

            <label for="attributeNames">Attribute Names
                <span class="small">Select Attribute Names</span>
            </label><select id="name" name="attributeNames" name="name" multiple="multiple"><option value="ACCOUNT">ACCOUNT</option><option value="ADVERTISING">ADVERTISING</option><option value="INFORMATION">INFORMATION</option></select><input type="hidden" name="_attributeNames" value="1"/><div class="spacer"></div>

            <label for="machineName">Machine Name
                <span class="small">Enter Machine Name</span>
            </label><input id="name" name="machineName" name="name" type="text" value=""/><div class="spacer"></div>

            <label for="portNumber">Port Number
                <span class="small">Enter Port Number</span>
            </label><input id="name" name="portNumber" name="name" type="text" value=""/><div class="spacer"></div>

            <button type="submit">Submit</button>
            <div class="spacer"></div>

        </form></div>
</body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:10:01.380

您将所有输入的宽度设置为相同。您当然不需要复选框上的 200px 宽度。

将不同的类名放在不同的输入类型上并单独设置它们的样式。

您可能还希望将表单包装在无序列表中，以允许它控制间距并清除浮动。

```
<fieldset>
  <legend>Delivery Details</legend>
  <ol>
    <li>
      <label for="name">Name<em>*</em></label>
      <input id="name" />
    </li>
    <li>
      <label for="address1">Address<em>*</em></label>
      <input id="address1" />
    </li>
    <li>
      <label for="address2">Address 2</label>
      <input id="address2" />
    </li>
    <li>
      <label for="town-city">Town/City</label>
      <input id="town-city" />
    </li>
    <li>
      <label for="county">County<em>*</em></label>
      <input id="county" />
    </li>
... 
```

这是一个很好的指南：[http ://www.alistapart.com/articles/prettyaccessibleforms/](http://www.alistapart.com/articles/prettyaccessibleforms/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:55:18.243

看起来您需要添加 clear:both; 到您的表单元素或在每个表单元素之间使用`<div class="spacer"></div>`标签。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-04T05:58:35.107

作为替代方案，您可以使用 Table 标记以正确的格式放置 html 控件。

# c# - 您可以在不知道它们代表的数据类型的情况下比较存储为字符串的两个数字吗？

> ID：14468702
> 
> 赞同：6
> 
> 时间：2013-01-22T21:52:46.640
> 
> 标签：c#, numbers, string-comparison

如果我有两个数字表示为字符串，“100”和“200”、“100.1”和“200.1”，我如何比较它们以查看哪个更大？

是否有一个通用的 Number.Compare(stringA, stringB) 来处理数据类型？我正在使用数据库条目来确定验证规则，但这些值可能是 long、decimal、float 等，所以我无法创建一个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T21:56:31.573

轻松使用 linq

```
var numbers = new string[] {  "100" ,"200", "100.1" , "200.1" };
double max = numbers.Max(n => double.Parse(n)); 
```

仅使用字符串操作的另一种解决方案

```
int N = 100;
var max = numbers.Select(n => n.Split('.'))
                 .OrderByDescending(p => p[0].PadLeft(N,'0'))
                 .ThenByDescending(p => p.Length > 1 ? p[1].PadRight(N, '0') : "")
                 .Select(p => p.Length > 1 ? p[0] + "." + p[1] : p[0])
                 .First(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T22:04:39.580

如果您声明类型，这也将起作用，`decimal`即使`numbers do not have a decimal point`就像一个人有一个`decimal point`this 也一样

```
var strNumbers = new string[] 
{ 
   "100", 
   "200",
   "100.1", 
   "200.1" 
};
decimal maxVal = numbers.Max(m => decimal.Parse(m)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T21:55:56.197

> 是否有一个通用的 Number.Compare(stringA, stringB) 来处理数据类型？

不，没有通用数字比较。你应该知道号码的类型。例如，您不能将浮点数“100.1”的字符串解析为整数。我会将您的字符串解析为小数或双精度数（将同时处理“100”和“100.1”），然后比较结果。使用[Math.Max](http://msdn.microsoft.com/en-us/library/system.math.max.aspx)从两个数字中获取更大的值：

```
var max = Math.Max(Double.Parse("100.1"), Double.Parse("200")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T21:57:33.143

你解析它们。使用已经存在的解析器，或者手动，后者可能会很棘手，因为你站起来告诉我格式可能是一切，这可能是科学记数法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T21:57:30.287

任何表示为字符串的数字都应该可以转换为双精度数。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-22T21:56:22.903

使用[int.tryParse](http://msdn.microsoft.com/en-us/library/f02979c7.aspx%22int.TryParse%22)因为这将确保如果字符串不是数字它不会爆炸

# php - Wordpress：简码中的 PHP 函数。如何？

> ID：14468703
> 
> 赞同：0
> 
> 时间：2013-01-22T21:52:53.190
> 
> 标签：php, wordpress, shortcode

这就是我想做的。此函数获取自定义 Wordpress 帖子字段的内容：

```
get_post_meta($post->ID, 'society_twitter', true); 
```

需要代替下面的字符串“yourTwitterUsername”运行，

```
[twitter-widget username="yourTwitterUsername"] 
```

看起来像：

```
[twitter-widget username="get_post_meta($post->ID, 'society_twitter', true);"] 
```

这可能吗？如果是这样，语法是什么？更多细节：我正在尝试修改 Twitter 小部件以显示在我的数据库的自定义帖子字段中列出的用户名，而不仅仅是一个字符串值。我试过编辑插件 php 本身，但这似乎是一个更简单的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T21:54:25.317

使用字符串连接？

```
$string = '[twitter-widget username="' . get_post_meta($post->ID, 'society_twitter', true) . '"]'; 
```

**编辑：**根据评论更新：

```
$string = '[twitter-widget username="' . get_post_meta($post->ID, 'society_twitter', true) . '"]';
echo do_shortcode( $string); 
```

# jquery-1.9 - jQuery 1.9 中导致 $.ajax 调用因语法错误而失败的变化

> ID：14468704
> 
> 赞同：33
> 
> 时间：2013-01-22T21:53:03.317
> 
> 标签：jquery-1.9

我正在进行 REST DELETE 调用，它返回 204。在 jQuery 1.8.3 中，这有效，并点击了 request.done 回调。但是，如果我使用 1.9，它会转到 request.fail，并在 textStatus 中出现 parsererror，在 errorThrown 中出现“SyntaxError: Unexpected end of input”。

```
remove = function (complete) {
            var self = this;
            var request = $.ajax({
              context: self,
              url: "/v1/item/" + itemId,
              dataType: "json",
              type: "DELETE"
            });
            request.done(removeCallback);
            request.fail(function (xhr, textStatus, errorThrown) {
                alert(errorThrown);
            });

        }, 
```

任何人都知道 1.9 中的哪些更改会导致此失败，以及需要更改哪些内容才能修复它？

所以，回答我自己的问题，看起来这实际上是问题所在：

来自[jQuery 升级指南](http://jquery.com/upgrade-guide/1.9/#jquery-ajax-returning-a-json-result-of-an-empty-string)

> ## jQuery.ajax 返回一个空字符串的 JSON 结果
> 
> 在 1.9 之前，预期返回数据类型为 JSON 或 JSONP 的 ajax 调用会将空字符串的返回值视为成功案例，但会向成功处理程序或承诺返回 null。从 1.9 开始，为 JSON 数据返回的空字符串被认为是格式错误的 JSON（因为它是）；这现在将引发错误。使用错误处理程序来捕获此类情况。

所以，如果删除 dataType

```
dataType: "json", 
```

它适用于 jQuery 1.8.3 和 1.9。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-25T10:43:00.310

HTTP 204 响应不是空字符串：这意味着没有数据。这是[删除和更新操作的有效响应](https://stackoverflow.com/questions/2342579)。

这看起来像[JQuery 1.9 中引入的错误](http://bugs.jquery.com/ticket/13292)。

删除 dataType 属性修复此问题的原因是，当它设置为“json”时，JQuery 尝试使用 JSON.parse 解析内容并因此失败。从票：

> 这不会因“json”以外的任何其他数据类型而失败，因为回归是由于 parseJSON 与本机 JSON.parse 的重新对齐（为 null/undefined 值抛出异常）。

不要尝试通过 statusCode 属性为 204 添加处理程序的票证中建议的解决方法，因为该处理程序*和*错误处理程序都会被触发。一个可能的解决方案如下：

```
 $.ajax(url, {
    type: "DELETE",
    dataType: "json",
    error: function (error) {
        if (error.status === 204) {
            // Success stuff
        }
        else {
            // fail
        }
    }}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-14T20:14:29.993

我遇到了一个非常相似的问题，您帮助我找到了答案-谢谢。然而，我的解决方案略有不同，所以我想我会分享它。

如问题所述，在 JQuery 网站上它说：

> 在 1.9 之前，预期返回数据类型为 JSON 或 JSONP 的 ajax 调用会将空字符串的返回值视为成功案例，但会向成功处理程序或承诺返回 null。从 1.9 开始，为 JSON 数据返回的空字符串被认为是格式错误的 JSON（因为它是）；这现在将引发错误。使用错误处理程序来捕获此类情况。

我将 JSON 数据传递给我的服务器上的一个方法，并将“void”作为返回类型，因为我不需要在成功函数中对返回的数据做任何事情。在 JQuery 1.9 + 的 AJAX 请求中传递 JSON 时，您不能再返回 null。然而，这在以前版本的 JQuery 中是可能的。

要停止收到错误并改为触发成功函数，您必须在 AJAX 请求中简单地返回有效的 JSON。只要它有效，您传递的内容并不重要，因为（在我的情况下）您没有使用返回的数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-22T22:23:10.353

问题似乎是 jQuery 将 204 响应的空正文（其中 Content-Length 为 0）视为“”。这是一种解释，但缺点是 "" 被视为任何其他响应字符串。因此，如果您使用 dataType:json 选项调用 jQuery.ajax()，jQuery 会尝试将 "" 转换为对象并抛出异常（"" 是无效的 JSON）。

jQuery 捕获异常并恢复，但如果您希望完全避免异常（在您的开发环境中），您可能会执行以下操作。将“转换器”选项添加到 jQuery.ajax() 并使用它来将“”响应更改为空值（我在 dataType 为 json 时执行此操作）。就像是 ：

```
var ajax_options =
    {
        /* ... other options here */
        "converters" :
            {
                "text json" :
                    function( result )
                    {
                        if ( result === "" ) result = null;
                        return jQuery.parseJSON( result );
                    }
            }
    };

var dfd = jQuery.ajax( ajax_options ); 
```

# java - 捕获 NullPointerException 的替代方法

> ID：14468706
> 
> 赞同：3
> 
> 时间：2013-01-22T21:53:07.120
> 
> 标签：java, nullpointerexception

我最近知道使用s`try`和`catch`块`NullPointerException`是一种不好的做法。

如果是这样，那么我有以下问题：

1.  为什么这是一个不好的做法？
2.  捕捉 a 的替代方法是`NullPointerException`什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T21:59:42.553

当您在一段您希望在​​特定情况下引发 NPE 的代码周围添加一个 try/catch 块时，您可能会无意中忘记该代码使用的另一个对象，该对象也可能为 null 并导致一个对象。然后，当您在 catch 块中添加代码以对预期的 NPE 做出反应时，代码也将在意外的 NPE 上执行。这最多会输出一个误导性的错误消息，最坏的情况会导致完全意外的程序行为。

一个例子：

```
try {
    ThingamabobFactory.getInstance().createThingamabob(ThingamabobFactory.getDefaults()).thingamabobify();
} catch(NullPointerException e) {
      // so... which of the above method calls did return null?
      // ...or was the NPE even thrown INSIDE one of these methods??
} 
```

因此，当您希望某个对象在某些情况下为 null 并且您想要处理这种情况时，请通过检查`if (object == null)`以避免任何误报来做到这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T22:01:42.640

捕获 NullPointerException 的最大问题是知道如何处理它，因为它可能有很多可能的原因。

如果您专门测试 null，您可以更确定您知道什么是 null 以及为什么。例如，假设一段代码包含对在特定情况下返回 null 的方法的调用，并且您希望在它这样做时采取一些措施。如果您立即测试方法结果，您**知道**null 是由于导致方法返回 null 的情况。

另一方面，如果您将块包装在 try-catch 中并捕获 NullPointerException，则该方法可能返回 null，但您无法确定发生了什么。try 块中可能出现了其他问题，导致异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T22:01:45.160

您可以避免使用 throws 直接处理，也可以使用[BCEL](http://surguy.net/articles/avoiding-null-pointer-exceptions.xml)尝试另一种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T21:56:01.077

如果可能的话，您应该避免出现任何异常，因为生成它们并通过应用程序发送它们在资源上是昂贵的。

空点很容易处理，只需检查某些内容是否为空

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-11-21T05:23:20.263

当您在音译服务端时包装非法参数异常，或者仅处理可预测的 null 情况以处理模型或方法的先决条件，或在此 catch 内捕获异常，如果实例 Of ... 写入日志或更多。一般来说，永远不要直接捕获空点异常，它是运行时异常，它有逻辑：如果你知道代码中哪里会是空，然后处理它。如果你不知道，在你抓到之后，你会做什么？你不是JVM，对吧？

# android - Android在不同设备上的动画不一致

> ID：14468708
> 
> 赞同：7
> 
> 时间：2013-01-22T21:53:09.067
> 
> 标签：android, animation, device, android-animation

我正在构建的应用程序在开始下一个活动之前有一个简单的图像按钮动画（旋转）。我已经在模拟器和 5 种不同的设备上对其进行了测试：

*   三星 GT-I5500

    三星 Galaxy Nexus

    三星盖乐世 s2

    摩托罗拉 Razr Maxx

    HTC（我不记得型号）

动画在所有模型上都运行良好，除了 Nexus。在 Nexus 上，设备在开始下一个活动之前等待动画的持续时间（500 毫秒），所以不是动画 - 只是一个烦人的（并且对用户来说似乎无法解释）延迟。除 GT-I5500 外，所有设备都运行 Jelly Bean。

问题：

1) 为什么动画可以在某些设备上运行，而不是在其他设备上运行，即使运行相同版本的操作系统？

2）有没有办法检查设备是否“接受”动画？（我最初以为它与 SDK 版本有关，但事实并非如此）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T21:59:37.970

音频、视频、GPU 加速取决于硬件。你可以生活在Java的陷阱中，它是平台独立的，有接口和继承。实际上有一个市场：

*   每个制造商都想给他一些特别的东西来获得新客户的钱
*   有程序制作的程序，那些可能有错误，如果它可以洞穴=>它有，因为没有一个测试是100％的情况。

# java - 创建一个 File 对象，表示相对于 .jar 文件的根目录的目录

> ID：14468710
> 
> 赞同：0
> 
> 时间：2013-01-22T21:53:14.617
> 
> 标签：java, file, executable-jar, robolectric

我正在尝试运行在可执行 .jar 文件中启动的 Robolectric 测试。[Robolectric 要求](http://pivotal.github.com/robolectric/customizing.html)您将 File 传递给其构造函数，其目录包含 AndroidManifest.xml 文件。我的 AndroidManifest.xml 文件位于我的 .jar 文件的根目录中，并且测试运行程序位于类似 com.some.package 的包中。我怎样才能做到这一点？

我尝试了以下方法：

```
public class CustomTestRunner extends RobolectricTestRunner {
    public CustomTestRunner(Class testClass) throws InitializationError, URISyntaxException {
        super(testClass, new File(CustomTestRunner.class.getResource("/AndroidManifest.xml").getPath().replace("AndroidManifest.xml", "")));
    }
} 
```

哪个不起作用，当它运行 Robolectric 抱怨时，我得到这个 FileNotFoundException：

> java.io.FileNotFoundException: /Users/christopherperry/Desktop/file:/Users/christopherperry/Desktop/my-executable-jar.jar!/AndroidManifest.xml 未找到或不是文件；它应该在 com.xtremelabs.robolectric.RobolectricTestRunner.createResourceLoader(RobolectricTestRunner.java:602) 的 com.xtremelabs.robolectric.RobolectricConfig.validate(RobolectricConfig.java:73) 指向您项目的 AndroidManifest.xml

我不明白，因为 AndroidManifest.xml 文件位于 jar 文件的根目录中，并且从错误消息来看，这似乎是它正在查找的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:32:19.433

JAR 文件中的项目本身不是文件，所以答案是“你不能”。

您可以通过从 Class.getResource() 获得的 URL 或从 Class.getResourceAsStream() 获得的流来访问它们。

# python - 与 RHN Satellite 的 API 交互的 Python 脚本

> ID：14468711
> 
> 赞同：0
> 
> 时间：2013-01-22T21:53:14.377
> 
> 标签：python, rhel, xmlrpclib, satellite

我正在尝试创建一个与 RHN Satellite 的 API 接口的 python 脚本。下面的代码安排一个远程命令立即针对指定的服务器（var id）运行。问题是卫星服务器在我指定后正好 2 小时安排了命令。我找不到发生这种情况的地方。Satellite 服务器和客户端都是 RHEL6。这是我的代码：

```
#!/bin/python
import xmlrpclib
from datetime import date, datetime, time, timedelta
from sys import argv
import socket
import os

SATELLITE_URL = "https://URL"
SATELLITE_LOGIN = "username"
SATELLITE_PASSWORD = "password"
client = xmlrpclib.Server(SATELLITE_URL, verbose=0)
key = client.auth.login(SATELLITE_LOGIN, SATELLITE_PASSWORD)
id = [] #Satellite server ID
script = "#!/bin/sh \n yum update -y"

def schedule_script():

    earliest_occurrence = xmlrpclib.DateTime()
    print earliest_occurrence
    client.system.scheduleScriptRun(key, id, "root", "root", 300, script, earliest_occurrence)

schedule_script()

client.auth.logout(key) 
```

当我打印变量“earliest_occurrence”时，它会打印当前时间。当我在卫星服务器上执行“日期”时，它会打印正确的时间。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:36:45.260

现在已经解决了，但我不确定如何解决。我确认的两件事是卫星服务器本身位于正确的时区（EST 与 MST），另一件事是我确认用于生成 API 密钥的帐户设置为正确的时区。在我使用 API 帐户登录到 Satellite 后，这个问题似乎消失了。所以，不幸的是，我不确定是什么修复了它，因为我没有改变任何东西。但是，如果有同样的问题，这些都是要验证的。

# android - onClick 内部片段给我 NPE

> ID：14468712
> 
> 赞同：1
> 
> 时间：2013-01-22T21:53:21.110
> 
> 标签：android, android-layout, android-fragments, android-viewpager, onclicklistener

我已经为此苦苦挣扎了一段时间。

我从常规活动切换到现在使用片段（根据用户建议），但我遇到了同样的问题。

我有 3 个页面，现在是 ViewPager 中的 3 个片段。我想要 addSite 片段中带有 id addSiteButton 的按钮；单击时，滚动到 setCurrentItem(2)。

任何帮助表示赞赏！这是我的代码。

片段活动

```
public class fieldsActivity extends FragmentActivity {

private static final int NUMBER_OF_PAGES = 3;

ViewPager mPager;
MyFragmentPagerAdapter mMyFragmentPagerAdapter;

/**
 * Called when the activity is first created.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // to create a custom title bar for activity window
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

    setContentView(R.layout.fields);
    // use custom layout title bar
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.topbar);

    mPager = (ViewPager) findViewById(R.id.fieldspager);
    mMyFragmentPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());
    mPager.setAdapter(mMyFragmentPagerAdapter);
    mPager.setCurrentItem(1);

}

private static class MyFragmentPagerAdapter extends FragmentPagerAdapter {

    public MyFragmentPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int page) {

        switch (page) {

            case 0: return new settingFields();

            case 1: return new addSite();

            case 2: return new createSite();

        }

       return null;

    }

    @Override
    public int getCount() {

        return NUMBER_OF_PAGES;
    }

} 
```

带按钮的班级

```
public class addSite extends Fragment {

public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    // Inflate the layout for this fragment

    if (container == null) {
        return null;
    }

    RelativeLayout mRelativeLayout = (RelativeLayout) inflater.inflate(R.layout.add_site, container, false);
    final ViewPager mPager = (ViewPager) mRelativeLayout.findViewById(R.id.fieldspager);
    Button addSiteButton = (Button) mRelativeLayout.findViewById(R.id.addSiteButton);
    addSiteButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {

            mPager.setCurrentItem(2, true);

        }
    });

   return mRelativeLayout;

}
} 
```

我觉得我在兜圈子，没有得到想要的动作。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:04:56.553

只需将 Fragment 作为 FragmentActivity 中的一个类，并取出变量阴影，`onCreateView()`因为您的寻呼机是一个全局变量。

```
public class fieldsActivity extends FragmentActivity {

  private static final int NUMBER_OF_PAGES = 3;

  ViewPager mPager;
  MyFragmentPagerAdapter mMyFragmentPagerAdapter;

  /**
   * Called when the activity is first created.
   */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // to create a custom title bar for activity window
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

    setContentView(R.layout.fields);
    // use custom layout title bar
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.topbar);

    mPager = (ViewPager) findViewById(R.id.fieldspager);
    mMyFragmentPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());
    mPager.setAdapter(mMyFragmentPagerAdapter);
    mPager.setCurrentItem(1);

  }

  public static class addSite extends Fragment {

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {

      RelativeLayout mRelativeLayout = (RelativeLayout) inflater.inflate(R.layout.add_site, container, false);
      //final ViewPager mPager = (ViewPager) mRelativeLayout.findViewById(R.id.fieldspager);
      Button addSiteButton = (Button) mRelativeLayout.findViewById(R.id.addSiteButton);
      addSiteButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {

        mPager.setCurrentItem(2, true);

        }
      });

      return mRelativeLayout;

    }
  }
} 
```

Also consider using the `@Override` annotation whenever you override a method so you don't make mistakes and use proper naming conventions. Java classes start with a capital.

# opengl - 如何通过着色器管道传递顶点颜色？

> ID：14468724
> 
> 赞同：2
> 
> 时间：2013-01-22T21:54:09.813
> 
> 标签：opengl, glsl, geometry-shader

我正在尝试通过顶点、几何和片段着色器传递顶点颜色：

```
glBegin(GL_POINTS);
    glVertex3f(-2.0f, 0.0f, 0.0); glColor3f(0.0,1.0,0.0);
    glVertex3f(+2.0f, 0.0f, 0.0); glColor3f(0.0,0.0,1.0);
glEnd(); 
```

顶点着色器：

```
# version 130 
varying vec4 colorv;
void main() {
    // pass trough:
    gl_Position = gl_ProjectionMatrix * gl_ModelViewMatrix * gl_Vertex; 
    colorv = gl_Color; 
} 
```

几何着色器：

```
#version 150

layout(points) in; // origo of cell
layout(points, max_vertices = 1) out;

varying vec4 colorv; 
varying vec4 color;
void main (void) 
{   
    for(int i = 0; i < gl_in.length(); ++i)
    {
        color = colorv;
        gl_Position = gl_in[i].gl_Position;
        EmitVertex();
        EndPrimitive();    
    }
} 
```

片段着色器：

```
# version 130 
varying vec4 color;
void main (void) 
{   
    // pass-trough:    
    gl_FragColor = color;
} 
```

但是它不起作用:-(。两个点都是灰色的。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:46:07.690

尝试从以下更改几何着色器中的输入/输出声明：

```
varying vec4 colorv; 
varying vec4 color; 
```

对此：

```
in vec4 colorv[];
out vec4 color; 
```

像这样：

```
#include <GL/glew.h>
#include <GL/glut.h>
#include <iostream>
#include <vector>

using namespace std;

#define GLSL( version, shader )  "#version " #version "\n" #shader

const GLchar* vert = GLSL
( 
    130,
    varying vec4 colorv;
    void main() {
        // pass trough:
        gl_Position = gl_ProjectionMatrix * gl_ModelViewMatrix * gl_Vertex; 
        colorv = gl_Color; 
    }
);

const GLchar* geom = GLSL
( 
    150,
    layout(points) in; // origo of cell
    layout(points, max_vertices = 1) out;

    in vec4 colorv[];
    out vec4 color;
    void main (void) 
    {   
        for( int i = 0; i < gl_in.length(); ++i )
        {
            color = colorv[i];
            gl_Position = gl_in[i].gl_Position;
            EmitVertex();
        }
        EndPrimitive();    
    }
);

const GLchar* frag = GLSL
(
    130,
    varying vec4 color;
    void main (void) 
    {   
        // pass-trough:    
        gl_FragColor = color;
    }
);

GLuint LoadShader( GLenum type, const string& aShaderSrc )
{
    GLuint shader = glCreateShader( type );
    const char* srcPtr = aShaderSrc.c_str();
    glShaderSource( shader, 1, &srcPtr, NULL );
    glCompileShader( shader );
    return shader;
}

GLuint LoadProgram( const string& aVertSrc, const string& aGeomSrc, const string& aFragSrc )
{
    GLuint vert = LoadShader( GL_VERTEX_SHADER, aVertSrc );
    GLuint geom = LoadShader( GL_GEOMETRY_SHADER, aGeomSrc );
    GLuint frag = LoadShader( GL_FRAGMENT_SHADER, aFragSrc );
    GLuint program = glCreateProgram();
    glAttachShader( program, vert );
    glAttachShader( program, geom );
    glAttachShader( program, frag );
    glLinkProgram( program );
    return program;
}

GLuint prog = 0;
void display()
{
    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );

    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    double w = glutGet( GLUT_WINDOW_WIDTH );
    double h = glutGet( GLUT_WINDOW_HEIGHT );
    double ar = w / h;
    glOrtho( -2 * ar, 2 * ar, -2, 2, -1, 1);

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();

    glUseProgram( prog );

    glBegin(GL_POINTS);
    glColor3ub( 0, 255, 0 );
    glVertex3f(-1.0f, 0.0f, 0.0);
    glColor3ub( 0, 0, 255 );
    glVertex3f(+1.0f, 0.0f, 0.0);
    glEnd();

    glutSwapBuffers();
}

int main( int argc, char **argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_RGBA | GLUT_DEPTH | GLUT_DOUBLE );
    glutInitWindowSize( 640, 480 );
    glutCreateWindow( "Geometry Shaders" );
    glewInit();

    prog = LoadProgram( vert, geom, frag );

    glutDisplayFunc( display );
    glutMainLoop();
    return 0;
} 
```

# android - 在surfaceview中更改线条的颜色并保留前一行的颜色

> ID：14468725
> 
> 赞同：3
> 
> 时间：2013-01-22T21:54:13.030
> 
> 标签：android, android-canvas, surfaceview

我按照这里的教程[https://github.com/vivekrk/SurfaceView-Sample](https://github.com/vivekrk/SurfaceView-Sample)并将其修改为下面的代码。

每次我按下按钮来改变颜色整个颜色，包括视图上已经存在的线都会改变。我只希望新线改变它的颜色。
我怎么做？

我是 Android 的菜鸟，任何帮助将不胜感激。提前致谢。

CanvasView.java

```
import java.util.ArrayList;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.RectF;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class CanvasView extends SurfaceView implements SurfaceHolder.Callback {

    private static final float STROKE_WIDTH = 8;

    private UIThread uiThread;

    private Path mPath;

    public static Paint mPaint;

    private Path oldPath;

    private DrawableObject drawableObject = null;

    private float mX;
    private float mY;
    private float TOUCH_TOLERANCE = 8;

    private RectF dirtyRect;

    private int mMode = Constants.FREE_DRAWING;

    private ArrayList<DrawableObject> objectsToDraw;

    public static int colorofpaint;

    public CanvasView(Context context) {
        super(context);
        getHolder().addCallback(this);

        objectsToDraw = new ArrayList<DrawableObject>();

        mPath = new Path();
    }

    public void clearCanvas() {
        mPath.reset();
    }

    public void setDrawingMode(int drawingMode) {
        mMode = drawingMode;
    }

    @Override
    public void onDraw(Canvas canvas) {
        setPaintProperties();

        if (canvas != null) {
            canvas.drawColor(Color.WHITE);
            synchronized (objectsToDraw) {
                for (DrawableObject drawableObject : objectsToDraw) {
                    drawableObject.draw(canvas);
                }
            }
        }
    }

    public void stopUIThread() {
        uiThread.setRunning(false);
    }

    private void setPaintProperties() {
        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        //mPaint.setColor(Color.RED);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(STROKE_WIDTH);
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        oldPath = mPath;
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (mMode) {
        case Constants.FREE_DRAWING:
            drawableObject = new FreeDrawing(mPath, mPaint);

            if (colorofpaint==1) {
                mPaint.setColor(Color.GREEN);
            }

            if (colorofpaint==2) {
                mPaint.setColor(Color.RED);
            }

            if (colorofpaint==3) {
                mPaint.setColor(Color.BLUE);
            }

            if (colorofpaint==4) {
                mPaint.setColor(Color.YELLOW);
            }

            if (colorofpaint==5) {
                mPaint.setColor(Color.CYAN);
            }

            if (colorofpaint==6) {
                mPaint.setColor(Color.BLACK);
            }

            if (colorofpaint==7) {
                mPaint.setColor(Color.MAGENTA);
            }

            break;

        default:
            break;
        }

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            synchronized (objectsToDraw) {
                objectsToDraw.add(drawableObject);
            }
            mPath.moveTo(x, y);
            mX = x;
            mY = y;
            break;

        case MotionEvent.ACTION_MOVE:
            switch (mMode) {
            case Constants.FREE_DRAWING:
                float dx = Math.abs(x - mX);
                float dy = Math.abs(y - mY);

                if (dx >= TOUCH_TOLERANCE  || dy >= TOUCH_TOLERANCE) {
                    mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);

                    mX = x;
                    mY = y;
                }
                break;
            }
            break;

        case MotionEvent.ACTION_UP:
            switch (mMode) {
            case Constants.FREE_DRAWING:
                mPath.moveTo(x, y);
                break;
            }
            break;
        }
        return true;
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        uiThread = new UIThread(this);
        uiThread.setRunning(true);
        uiThread.start();
    }

    public void restoreOldPath() {
        mPath = oldPath;
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        uiThread.setRunning(false);
    }

    public RectF getDirtyRect() {
        if(dirtyRect == null) {
            dirtyRect = new RectF();
        }
        return dirtyRect ;
    }

} 
```

UIThread .java

```
import android.graphics.Canvas;
import android.view.SurfaceHolder;

public class UIThread extends Thread {

    private static boolean toRun = false;
    private CanvasView canvasView;
    private SurfaceHolder surfaceHolder;

    public UIThread(CanvasView canvasView) {
        this.canvasView = canvasView;
        surfaceHolder = canvasView.getHolder();
    }

    public boolean isThreadRunning() {
        return toRun;
    }

    public void setRunning(boolean run) {
        toRun = run;
    }

    @Override
    public void run() {
        Canvas c;
        while (toRun) {
                c = null;
                try {
                    c = surfaceHolder.lockCanvas(null);
                    canvasView.onDraw(c);
                } finally {
                    if (c != null) {
                        surfaceHolder.unlockCanvasAndPost(c);
                    }
                }
        }
    }

} 
```

自由绘图.java

```
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Path;

public class FreeDrawing extends DrawableObject {

    private Path mPath;
    private Paint mPaint;

    public FreeDrawing(Path path, Paint paint) {
        mPath = path;
        mPaint = paint;
    }

    @Override
    public void draw(Canvas canvas) {
        canvas.drawPath(mPath, mPaint);
    }
} 
```

可绘制对象.java

```
import android.graphics.Canvas;

public abstract class DrawableObject {

    abstract public void draw(Canvas canvas);

} 
```

常量.java

```
public class Constants {
//  XXX:Drawing modes
    public static final int FREE_DRAWING = 1000;
    public static final int LINE_DRAWING = 1001;
    public static final int RECT_DRAWING = 1002;
    public static final int SELECT = 1003;
} 
```

SurfaceViewSampleActivity .java

```
import android.app.Activity;
import android.content.res.Configuration;
import android.graphics.Color;
import android.graphics.LightingColorFilter;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.FrameLayout;
import android.widget.RadioGroup;
import android.widget.RadioGroup.OnCheckedChangeListener;
import android.widget.Toast;

public class SurfaceViewSampleActivity extends Activity  {
    /** Called when the activity is first created. */
    private CanvasView view;
    private static final int CLEAR = 100;

    private FrameLayout surfaceViewFrame;

    private RadioGroup mode;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        surfaceViewFrame = (FrameLayout) findViewById(R.id.surfaceviewFrame);
        view = new CanvasView(this);
        surfaceViewFrame.addView(view, 0);

        CanvasView.colorofpaint=6;

        view.setDrawingMode(Constants.FREE_DRAWING);

        Button b1=(Button)findViewById(R.id.button1);
        b1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                CanvasView.colorofpaint=2;
        //      view.setDrawingMode(Constants.FREE_DRAWING);
            }
        });

        Button b2=(Button)findViewById(R.id.button2);
        b2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                CanvasView.colorofpaint=3;

                view.setDrawingMode(Constants.FREE_DRAWING);
            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        menu.add(0, CLEAR, 0, "Clear");
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case CLEAR:
            view.clearCanvas();
            break;
        }
        return true;
    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
        Toast.makeText(getApplicationContext(), "onConfigurationChanged", Toast.LENGTH_SHORT).show();
    }

} 
```

# url-rewriting - MVC 4 URL 重写

> ID：14468728
> 
> 赞同：0
> 
> 时间：2013-01-22T21:54:21.210
> 
> 标签：url-rewriting, asp.net-mvc-4

我找不到如何在 MVC4 中创建“假”子文件夹。

我想要一个像

```
AREA/CONTROLLERNAME/FAKEFOLDER/ACTION/ 
```

去

```
AREA/CONTROLLERNAME/ACTION 
```

有可能吗？有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:58:55.687

您是否尝试过使用路由？例如假设您有一个`Admin`区域：

```
public override void RegisterArea(AreaRegistrationContext context)
{
    context.MapRoute(
        "Admin_default",
        "Admin/{controller}/FAKEFOLDER/{action}/{id}",
        new { action = "Index", id = UrlParameter.Optional }
    );
} 
```

现在，当您请求时，将执行 are内的`/admin/home/fakefolder/index`操作`Index`。`HomeController``Admin`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:59:17.853

您可以`MapRoute`在路由中添加一个需要额外参数的参数（下例中的 fakefolder）。然后，路由像往常一样发生，控制器的操作为页面提供服务。例子：

```
routes.MapRoute(
          name: "FakeFolder",
          url: "{controller}/{fakefolder}/{action}",
          defaults: new { controller = "home", action = "index", fakefolder = UrlParameter.Optional}
      ); 
```

请注意，通过此路由，您可以使用任何“文件夹名称”，因为它只是一个占位符。

Url 示例： `myController/SomeFakeFolder/someAction`将执行中的`someAction`操作`myController`

# shell - 为什么我的 cron 工作会出现意外的 EOF？

> ID：14468733
> 
> 赞同：30
> 
> 时间：2013-01-22T21:54:40.493
> 
> 标签：shell, cron

我的 Cron 作业出现错误。我不断收到的错误是：

```
/bin/sh: -c: line 0: unexpected EOF while looking for matching `''
/bin/sh: -c: line 1: syntax error: unexpected end of file 
```

这是我的代码：

```
mysqldump -u database_user -p']T%zw51' database > /home/site/public_html/Secure/Cron/Database_Backup/database_backup.sql 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-01-22T22:04:16.353

您可能需要`%`使用`\`. `%`是 crontab 的一个特殊字符，它被转换为换行符，所以你的代码可能变成了

```
 -p']T
 zw51' 
```

尝试：

```
 -p']T\%zw51' 
```

# coldfusion - 读取 CSV 或管道分隔文件

> ID：14468735
> 
> 赞同：0
> 
> 时间：2013-01-22T21:54:43.670
> 
> 标签：coldfusion, coldfusion-9, cffile

我正在尝试读取使用 `|`分隔符而不是.csv 的 csv 文件`,`。

我在用

```
<cffunction name="loadCSVfile" access="public" returntype="string"> 
    <cfargument name="filename" required="yes" default="">

    <cffile action="read" file="#filename#" variable="csvData">

    <cfreturn csvData>
</cffunction> 
```

它适用于`,`分隔符但不适用于`|`. 我还需要做什么才能使此功能正常工作吗？

这就是我调用函数的方式：

```
 <cfscript>
       csvloaderCFC = CreateObject("component","AlscCSVloader");
    </cfscript>

    <cfset csvfilename = DataDirectory&q_DataDirectory.name>

    <!---  backup CSV file ---->
    <cffile action= "copy" source = "#csvfilename#"  
                destination = "#DataDirectorybackup#"> 

    <!---  Load CSV data ---->
    <cfscript>
        csvData = csvloaderCFC.loadCSVfile(csvfilename);
    </cfscript>

    <cfdump var="#csvData#"> 
```

最后`cfdump`它根本不显示

**管道分隔的样本**

```
Location|patient_ID|First Name|Last Name|
111|468454|Eric |Gallegos |
111|468457|kelsey|anderson|
10|468459|Rivenda|Kaur| 
```

**逗号分隔的样本**

```
Location,patient_ID,First Name,Last Name,
111,468454,Eric ,Gallegos ,
111,468457,kelsey,anderson,
10,468459,Rivenda,Kaur, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:20:56.860

除了调用 CFFile 来获取 CSV 作为某种结构之外，您还有很多工作要做。CFFile 敌人不会自己做这件事。（虽然奇怪的是 CFHttp 确实如此）老实说，你最好的选择可能是使用 Java 库。Apache 提供了几个：http: [//commons.apache.org/csv/](http://commons.apache.org/csv/)

这些应该会给你一些相当容易处理的东西。

如果您想要一个“纯”coldfusion CSV 选项，您可以查看此博客文章以了解特定的 impl： [http ://www.bennadel.com/blog/483-Parsing-CSV-Data-Using-ColdFusion.htm](http://www.bennadel.com/blog/483-Parsing-CSV-Data-Using-ColdFusion.htm)

基本上你需要阅读整个内容然后解析它。

# mysql - 在 2 个日期时间之间选择一些行

> ID：14468738
> 
> 赞同：1
> 
> 时间：2013-01-22T21:54:50.867
> 
> 标签：mysql, sql

我有一个这样的数据库：

```
ID->INT
Date->DateTime 
```

现在我想写一个 SELECT 来获取日期列在“2008/1/1”和“2010/1/1”之间的所有行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T21:56:20.360

```
SELECT * FROM mytable WHERE `Date` BETWEEN '2008-01-01' and '2010-01-01'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T21:56:37.523

您只需在`WHERE`子句中应用过滤器

```
select *
from yourtable
where date >= '2008-01-01' 
   and date <= '2010-01-01' 
```

# javascript - 在新窗口中显示图像

> ID：14468748
> 
> 赞同：1
> 
> 时间：2013-01-22T21:55:37.237
> 
> 标签：javascript, html, image, window

我目前正在尝试通过单击在新窗口中打开图像。但我似乎无法弄清楚我的代码哪里错了。有什么解决办法吗？

```
function largePic(){

var imageNumber = document.getElementById("img2");
imageNumber = this.getAttribute('src').split(".", 1);
window.open(imageNumber[0] + "zlatan-stor.jpg");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:59:54.437

您应该尝试将“ `this.getAttribute('src').split(".",1);`”更改为

```
imageNumber.getAttribute('src').split(".",1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:01:41.563

你确定#img2 是被点击的那个吗？如果不只是这样做：

```
function largePic(){

   var imageNumber = document.getElementById("img2");
   var link = imageNumber.getAttribute('src').split(".", 1);
   window.open(link[0] + "zlatan-stor.jpg");

} 
```

**这**只有在函数被内联调用时才有效（你不应该这样做，你应该将你的 js 代码放在一个单独的文件中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T22:04:52.840

这个[问题](https://stackoverflow.com/questions/8908022/open-image-in-new-window)和你的很相似。

我认为您的代码的主要问题是 `window.open`需要一个 URL 而没有提供一个。

按照在此链接上找到的答案应该允许您将代码分离到一个外部文件中，正如@Skatox 所提到的，这是一个很好的做法。

# mercurial - TortoiseHG“thg serve”不会从命令行启动

> ID：14468749
> 
> 赞同：0
> 
> 时间：2013-01-22T21:55:42.853
> 
> 标签：mercurial, webserver, tortoisehg

我`thg serve`在从命令行执行时遇到问题。我正在执行以下命令行：

```
thg serve 8082 --web-conf "E:\Mercurial_Repositories\settings.config" 
```

但我得到的是弹出的 Web 服务器未配置且未启动。但是，当我从 Workbench 中启动 Web 服务时，日志会显示以下执行行：

```
hg serve --port 8081 --debug --web-conf c:\users\vailla~1\appdata\local\temp\4\thg.lov 
```

这很奇怪。我假设该文件`thg.lov`包含来自工作台的配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:03:42.293

`thg serve`不支持将端口号作为参数。它`8000`默认选择。您可以在 Workbench 中更改此值，方法是导航到 File -> Settings -> Workbench 并将属性`Port`的值设置为您选择的值。只需删除调用中的端口号，`thg serve`Web 服务器将开始运行并根据内容提供存储库`settings.config`；因此，修改后的命令行将是`thg serve 8082 --web-conf "E:\Mercurial_Repositories\settings.config"`

# search - 在托管对象上下文和核心数据中进行全文搜索

> ID：14468757
> 
> 赞同：0
> 
> 时间：2013-01-22T21:56:05.523
> 
> 标签：search, core-data, full-text-search, cocoa-bindings, nsmanagedobjectcontext

我正在构建一个类似笔记的应用程序。它有一个 NStableview 显示所有笔记的标题，以及一个 NStextview 显示所选笔记的纯文本。我正在使用绑定和核心数据。我想要一个搜索功能：

```
1\. the tableview only shows the notes that contains the text you query
2\. the textview displays the first note, and highlight the text you queried 
```

我刚开始做 Cocoa 开发，不知道如何实现，以及我应该使用哪些类和方法。我google了一下，没有找到好的答案。

谁能给我一些想法和资源来看看？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:22:16.000

如果您的 xib 中有 NSSearchField，您可以转到绑定检查器并将谓词绑定到它，而不是值。将模型键路径留空，并在谓词格式（假设您的模型正在存储属性名称为“textContent”的文本内容）中输入：

`textContent contains[c] $value`

告诉它搜索，`[c]`不管情况如何。如果您为此使用绑定，它将自动更新您的 NSTableView。

至于突出显示您的内容，我不确定是否有一种简单的方法可以通过绑定来做到这一点（可能有）。

编辑：确保将它绑定到您的 NSArrayController，即使您将模型键路径留空

# php - 阅读特定粉丝专页的帖子

> ID：14468758
> 
> 赞同：0
> 
> 时间：2013-01-22T21:56:07.320
> 
> 标签：php, facebook, facebook-graph-api

我正在解决这个问题，所以我在这里提交。

我为我母亲创建了一个 Facebook 粉丝专页和一个网站来宣传她的音乐。因为她已经习惯了 facebook，所以我决定不要创建一个完整的后台，该网站将简单地显示粉丝页面的帖子、照片和事件。我通过简单的调用来做到这一点

```
$data= $fb->api('/'.PAGE_ID.'/posts?fields=id'); 
```

例如（或“笔记”、“事件”...）。问题是我必须使用从我自己的“我/帐户/”权限中获得的特定访问令牌。有时（比如每个月）我必须去 Graph API Explorer，获取该令牌，并将其保存在网站配置中。

我想知道我是否无法在我的网站上生成该访问令牌服务器端，但我似乎无法实现。除非我是经过身份验证的用户（显然），否则facebook PHP SDK 无法访问我的**api('/accounts')图形结果，并且对****api(PAGE_ID.'?fields=access_token')**的调用仅返回页面的 ID。

我究竟做错了什么？facebook php sdk 可以代表我（独立于用户）进行 api 调用吗？

更多信息：我创建了粉丝专页，以及一个名为 feed reader 的简单应用，拥有 *manage_pages* 权限。我是唯一授权该应用程序的用户，我不希望网站上的用户必须登录（他们为什么要登录？这是我的粉丝专页，为什么我需要他们的 *manage_page* 权限？）。

老实说，我觉得公共帖子也应该在图形 api 中公开，但我相信这是有原因的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:08:38.290

> 老实说，我觉得公共帖子也应该在图形 api 中公开，但我相信这是有原因的。

您可以像这样访问任何用户的公共帖子： *注意：这假设您在这里使用 PHP SDK [http://developers.facebook.com/docs/reference/php/](http://developers.facebook.com/docs/reference/php/)*

```
$facebook = new Facebook(
    array(
        'appId'  => 'fb_app_id',
        'secret' => 'fb_secret',
    )
);

$url = '/' . 'fb_username' . '/posts?fields=id,name,created_time,message,story,type&limit=10'; // you might need to screw with this some
$page = $facebook->api($url);
while(count($page['data']) > 0)
{
    foreach($page['data'] as $fb_post)
    {
        // USE THEM DATAS
    }
    // Keep retrieving next pages until spent            
    $url_parts = parse_url($page['paging']['next']);
    $url = '/' . 'fb_username' . '/posts?' . $url_parts['query'];
    $page = $facebook->api($url);  
} 
```

这是来自：[https](https://github.com/fyaconiello/WP_Social_Network_Posts/) ://github.com/fyaconiello/WP_Social_Network_Posts/ 的示例，它将 FB 帖子拉入并将 em 保存为 WP 帖子。写它是为了回答一个不同的问题。

# spring - 如何在不使用 Spring IOC 的情况下在 JSF 托管 bean 中注入服务

> ID：14468770
> 
> 赞同：0
> 
> 时间：2013-01-22T21:56:37.037
> 
> 标签：spring, jsf, dependency-injection

通常，如果我必须在 Spring 中注入服务，我会使用

```
 <bean id="mycontroller" class="com.MyController">
    <property name="myService" ref="myService" /> 
```

和

```
<bean id="myService" class="com.MyService"></bean> 
```

使用 JSF 时如何做同样的事情？我不想为 bean 使用两个 IOC 容器，而是将其保存在 faces 上下文中。我看过链接，例如

[JSF 2 使用 @ManagedProperty 注入 Spring bean/service 而没有 xml](https://stackoverflow.com/questions/8925170/jsf-2-inject-spring-bean-service-with-managedproperty-and-no-xml)

以及[关于将 spring bean 注入 jsf bean 的问题](https://stackoverflow.com/questions/5848551/a-problem-about-injecting-spring-bean-into-jsf-bean)。他们谈论将 Spring 托管 bean 注入 JSF 上下文。我正在尝试做的事情必须非常简单，但无法找到任何相关信息。我是新手，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T01:26:32.130

我想你可能对“豆”这个词感到困惑。问题是，你所说的“服务”也是一个 Spring bean，对吧？

根据您的配置，您可能将其作为服务使用，因为它具有 Spring 添加的一些附加功能（可能是事务管理）。

JSF IoC 容器非常简单，它不允许您将其生命周期配置为包括事务管理、AOP 和类似的东西。您必须使用 Spring（或 EJB，在 Java EE 环境中）做的那些事情。

因此，在将 JSF 与 Spring 结合使用时，您通常有两种选择：

1.  要么将 JSF 页面的支持 bean 放在 JSF 容器中，用`@ManagedBean`、`@RequestScoped`、`@ViewScoped`等注释它们；并`@ManagedProperty`在属性中注入任何必要的 Spring bean（需要一个 setter）
2.  或者跳过 JSF 容器，将所有其他的支持 bean 放在 Spring 容器中，并使用请求/会话的 Spring 范围，使用 Spring 的 annotations 注释它们`@Component`，并注入 with等。`@Scope("request")``@Scope("session")``@Autowired``@Qualifier`

就个人而言，面对这个选择，我会选择第一选择，因为它会给你`@ViewScoped`和其他一些细节。确实它使用了两个 IoC 容器，但是，哪个 Java EE 应用程序没有呢？

如果您仍然想走第二条路线，您还可[以为 Spring bean 添加一个视图范围，由 JSF viewMap 支持](http://cagataycivici.wordpress.com/2010/02/17/port-jsf-2-0s-viewscope-to-spring-3-0/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T12:37:45.103

Spring 所谓的“服务”在 Java EE 术语中是“EJB”。EJB 在 Glassfish、JBossAS 和 TomEE 等 Java EE Web 配置文件容器中是开箱即用的。

要创建无状态 EJB 服务，只需`@Stateless`在类上使用：

```
@Stateless
public class SomeService {

    public void doSomething() {
        // ...
    }

} 
```

并将其注入 JSF 托管 bean，只需`@EJB`在要注入的属性上使用：

```
@ManagedBean
@ViewScoped
public class SomeController {

    @EJB
    private SomeService service;

} 
```

而已。不需要getter/setter。不需要 XML 样板。

# javascript - JQuery 暂停幻灯片并使用 setInterval 恢复

> ID：14468773
> 
> 赞同：1
> 
> 时间：2013-01-22T21:56:40.210
> 
> 标签：javascript, jquery, jquery-plugins, slideshow, carousel

我知道那里有很多 JQuery 幻灯片，但我正在编写自己的代码并且遇到了一个我没有找到具体答案的障碍。

背景：一个自动化的 JQuery 幻灯片插件，在悬停/退出时具有暂停/恢复

问题：如何在 mouseenter 上暂停幻灯片，然后在 mouseleave 上完成 setInterval 的剩余时间段，而不是再次触发 setInterval。

解决方案：我认为这样做的唯一方法是使用带有延迟的自调用方法和 stop() 来处理鼠标行为，这将允许暂停的动画恢复其适当的剩余部分，而不是触发该方法再次？

你觉得呢？你有没有什么想法？

这是代码：

```
    (函数($){

    变种方法 = {

        初始化：函数（）{

            var cycle = window.setInterval(methods.automate, 1000);

            $('.slider_control').on('click', 'span', function(){
                methods.automate($(this).attr('slideNumber'));
            });

            $('.slider_master_container')
                。上（{
                        'mouseenter'：函数（）{
                            清除间隔（周期）；
                        },
                        “鼠标离开”：函数（）{
                            周期 = window.setInterval(methods.automate, 1000);
                        }
                });

        },

        自动化：函数（el）{
            var $active = $('.slide.active'),
                $下一个 = 埃尔？$('.slide[slideNumber=' + el) : $active.nextOrFirst();
            $next.css('z-index', 2);
            $active.fadeOut(1500, function() {
                $active.css('z-index', 1).show().removeClass('active');
                $next.css('z-index', 3).addClass('active');
            });
        }

    };

    $.fn.smartSlider = 函数（方法）{
        如果（方法[方法]）{
            返回方法[方法].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if ( typeof method === 'object' || ! method ) {
            返回方法.init.apply（这个，参数）；
        } 别的 {
            $.error( '方法 ' + 方法 + ' 在 jQuery.smartSlider 上不存在' );
        }
    };

})( jQuery );

```

# css - 在没有javascript的情况下，在所有可链接的内部制作一个带有图像+标题+ P的div

> ID：14468775
> 
> 赞同：1
> 
> 时间：2013-01-22T21:56:54.417
> 
> 标签：css, html, header

我试图让一个 div 悬停时显示隐藏的 h2 + P（使用 CSS），我希望整个 div（包括 h2 + p）可以链接到 X。

到目前为止，我设法使其工作的唯一方法是使 A 包装所有内容，但这当然只有 HTML5 有效，因此某些浏览器 (IE) 不会喜欢它。

```
<a href="#">
 <div class="one">
    <img src="#">
    <p>one</p>
 </div>
</a> 
```

我也不能单独给每个块一个单独的块，`<a>`因为我想改变悬停时的颜色，所以整个 div 需要是可悬停的。即使我那样做，肯定给一个帖子摘录（`<P>`）肯定会对seo不利吗？

本质上，这就是我想要的最终结果：

`<div class="one"> <img src"#"> <p>test</p> <a href="#" class="special"></a> </div>`

在一个：悬停，让整个 div 成为一个链接（href="#"）。

一定有办法做到这一点！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:30:11.023

将链接和内容都包装在 DIV 中：

```
<div class="wrapper">
  <a href="#"></a>
  <div class="one">
     <img src="#">
     <p>one</p>
  </div>
</div> 
```

使其相对，然后在顶部放置一个跨越整个内容区域的透明链接：

```
.wrapper a{
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  z-index: 5;
  background: transparent;
}

.wrapper a:hover{
  border: 1px solid #d33;  
}

.wrapper{
  position: relative;
  border: 1px solid #ccc;
} 
```

有点难看，但我没有看到没有 js 的任何其他选择:)

# richfaces - richface fileupload 文件大小受限错误

> ID：14468779
> 
> 赞同：2
> 
> 时间：2013-01-22T21:57:11.147
> 
> 标签：richfaces, seam, redhat, jboss6.x

我正在使用带有 Seam 2.2.、Jboss 6.1 的 Richface 3.3.3 我正在尝试使用rich:fileupload 组件。当我在 linux 服务器上部署我的代码时，我在 10 MB 以上的文件上出现错误，当我在我的 windows 服务器上尝试完全相同的代码时，它适用于高达 1.9 GB 的文件。

Windows 7，Ubuntu 作为服务器工作正常。Red Hat Enterprise Linux Server 版本 6.2 (Santiago) 不起作用。

我在 web.xml 中进行以下设置

```
<filter>
        <filter-name>Seam Filter</filter-name>
        <filter-class>org.jboss.seam.servlet.SeamFilter</filter-class>
         <init-param>
            <param-name>maxRequestSize</param-name>
            <param-value>1900000000</param-value>
        </init-param> 
        <init-param>
            <param-name>createTempFiles</param-name>
            <param-value>true</param-value>
        </init-param>

    </filter>
    <filter-mapping>
       <filter-name>Seam Filter</filter-name>
       <url-pattern>/*</url-pattern>
</filter-mapping> 
```

我的文件上传组件。

```
 <rich:fileUpload id="fileUploadId" uploadControlLabel="Ladda Ner"
                addControlLabel="Filer..." cancelEntryControlLabel="Ta bort"
                maxFilesQuantity="1000" uploadButtonClassDisabled="invisible"
                stopButtonClass="invisible"  onadd="_onaddHandler(event);" onerror="_onerrorhandle(event);"
                fileUploadListener="#{deliveryInAction.fileUploadListener}"
                onupload="Richfaces.showModalPanel('wait-dialog-upload');"
                onuploadcomplete="archive();" allowFlash="auto" styleClass="syll-file-upload"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:50:48.373

解决了它，有一个带有 max_body_size : 10M 的前端 Nginx 改变了它的工作。

# debugging - xslt调试一直在调试以前版本的xslt文档VS 2012

> ID：14468780
> 
> 赞同：0
> 
> 时间：2013-01-22T21:57:11.807
> 
> 标签：debugging, xslt, visual-studio-2012

我正在尝试在 VS2012 中调试 xslt 文件。当我点击顶部的 XML -> Xslt Debugging 时，它会继续显示我调试的先前版本的输出。从那时起，我对其进行了许多更改，但并没有反映出来。

这是一个屏幕输出：

[http://imgur.com/b4Og6Nm](http://imgur.com/b4Og6Nm)

我的 xslt 文件中的代码（我将输入指向 XML 文件）

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="/">
        <html>
            <head>
            </head>
            <body>
                <xsl:apply-templates select ="CommercialClients">

                </xsl:apply-templates>
            </body>
        </html>
    </xsl:template>

    <xsl:template match="CommercialClients">
        I found some data
    </xsl:template>

</xsl:stylesheet> 
```

# javascript - 日历未在 Chrome 中正确呈现

> ID：14468781
> 
> 赞同：0
> 
> 时间：2013-01-22T21:57:14.137
> 
> 标签：javascript, jquery, css, fullcalendar

我的页面使用[FullCalendar jQuery 插件](http://arshaw.com/fullcalendar/)来显示每月的活动日历。如果事件发生在同一天，则在 Firefox 或 IE 中查看日历时，它们之间会留有很小的空间，如下面的屏幕截图所示：

![在此处输入图像描述](../Images/6dfc27fbdadf9bef052127ef9fb55912.png)

另一方面，如果在 Chrome 中查看同一页面，则会在这些事件之间显示一个大的（不需要的）空间：

![在此处输入图像描述](../Images/33057e199190b3ff16ccc232f419946d.png)

在 Chrome 中查看页面时如何消除此空白？

## 更新

我从应用程序中删除了所有引导样式，问题不再发生，所以我猜有一些引导 CSS 规则仅应用于 Chrome 中的日历呈现。现在我只需要弄清楚哪些规则......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:15:33.280

## 固定的

奇怪的是，布局问题是由这个 CSS 规则引起的

```
 a {
        -webkit-transition: all 0.15s ease-out 0s !important;
        -moz-transition: all 0.15s ease-out 0s !important;
        -o-transition: all 0.15s ease-out 0s !important;
        transition: all 0.15s ease-out 0s !important;
    } 
```

我将其更改为：

```
 a {
        -webkit-transition: none !important;
        -moz-transition: none !important;
        -o-transition: none !important;
        transition: none !important;
    } 
```

问题解决了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:53:17.653

可以肯定的是，它以某种方式涉及为`top`包装`a`元素上的内联定位设置代码。Firefox 和 Chrome 都将第一个元素设置为，`top: 52px`但第二个元素的放置方式不同，Firefox 将其设置为`top: 95px`，Chrome 设置为`top: 137px`.

这种顶部定位差异可能是因为嵌套在with 类`height`中设置的差异。那是在 Chrome 中，但在Firefox 中。现在，有问题的项目实际上覆盖在结构上，它们不是它的直接子级。但显然代码必须以某种方式读取该结构的高度，以计算相对于它们所覆盖的“天”放置项目的位置。因此，Chrome内部较高的高度可能会影响它（反之亦然，影响嵌套的位置）。`div``div``fc-day-content``height``div``170px``65px``fc-day-content``div``fc-day-content``a``height``fc-day-content`

我还没有找到放置这些项目位置的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T00:07:43.533

该插件计算日历事件的位置错误。我建议将日历初始化为 on`load event`而不是`ready`. 所以更换

```
$(document).ready(function() {..... 
```

与

```
$(window).load(function() {..... 
```

看看有没有进展。

额外的反馈将有助于研究，BR。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T11:54:52.077

您应该尝试使用相对定位：对于这样的元素

```
position: relative;
width: 195px;
margin-top: 30px;
float: left; 
```

# haskell - 如何从“Fun with Type Functions”中的“Add”类中打印“add”函数的结果

> ID：14468782
> 
> 赞同：2
> 
> 时间：2013-01-22T21:57:14.867
> 
> 标签：haskell, typeclass, type-families

在此处的代码下方[Fun with Type Functions](http://www.haskell.org/haskellwiki/Simonpj/Talk%3aFunWithTypeFuns)

```
{-# LANGUAGE MultiParamTypeClasses, FlexibleInstances, FlexibleContexts, TypeFamilies #-}

-- Start basic
class Add a b where
  type SumTy a b
  add :: a -> b -> SumTy a b

instance Add Integer Double where
  type SumTy Integer Double = Double
  add x y = fromIntegral x + y

instance Add Double Integer where
  type SumTy Double Integer = Double
  add x y = x + fromIntegral y

instance (Num a) => Add a a where
  type SumTy a a = a
  add x y = x + y
-- End basic 
```

这是我试图运行的代码：

```
main = print $ show (add 1 1) 
```

这是结果：

```
No instance for (Show (SumTy a0 b0))
      arising from a use of `show'
    Possible fix: add an instance declaration for (Show (SumTy a0 b0))
    In the second argument of `($)', namely `show (add 1 1)'
    In the expression: print $ show (add 1 1)
    In an equation for `main': main = print $ show (add 1 1) 
```

我已经尝试了一些东西，比如把“数据”放在任何地方：

结果 1

```
Not a data constructor: `a' 
```

结果 2（删除“instance (Num a)”后）

```
Multiple declarations of `Double'
Declared at: ... 
```

像添加一些功能：

```
class Add a b where
    type SumTy a b
    add :: a -> b -> SumTy a b
    s :: SumTy a b -> String

instance Add Integer Double where
    type SumTy Integer Double = Double
    add x y = fromIntegral x + y
    s (SumTy _ x) = show x

main = print $ show (s (add 1 2.0) ) 
```

结果：

```
Not in scope: data constructor `SumTy' 
```

你可能已经注意到我被困住了，所以任何帮助对我来说都是无价的。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T23:05:03.137

问题是没有足够的上下文来确定`Add`使用哪个实例，因此无法确定结果的类型。由于 ghc 不知道要使用哪种类型，因此它报告了最通用的问题，没有`Show`泛型的实例`SumTy a b`：

```
No instance for (Show (SumTy a0 b0))
      arising from a use of `show'
    Possible fix: add an instance declaration for (Show (SumTy a0 b0))
    In the second argument of `($)', namely `show (add 1 1)'
    In the expression: print $ show (add 1 1)
    In an equation for `main': main = print $ show (add 1 1) 
```

不过，建议的“可能的修复”并不是这里需要的。您需要指定 的参数类型`add`，以便可以确定要使用的实例，从而确定结果类型：

```
*TyFun> show (add (1 :: Int) (1 :: Int))
"2"
*TyFun> show (add (1 :: Integer) (1 :: Integer))
"2"
*TyFun> show (add (1 :: Integer) (1 :: Double))
"2.0"
*TyFun> show (add (1 :: Integer) (1 :: Float))

<interactive>:7:1:
    No instance for (Show (SumTy Integer Float))
      arising from a use of `show'
    Possible fix:
      add an instance declaration for (Show (SumTy Integer Float))
    In the expression: show (add (1 :: Integer) (1 :: Float))
    In an equation for `it':
        it = show (add (1 :: Integer) (1 :: Float))

<interactive>:7:7:
    No instance for (Add Integer Float) arising from a use of `add'
    Possible fix: add an instance declaration for (Add Integer Float)
    In the first argument of `show', namely
      `(add (1 :: Integer) (1 :: Float))'
    In the expression: show (add (1 :: Integer) (1 :: Float))
    In an equation for `it':
        it = show (add (1 :: Integer) (1 :: Float)) 
```

# android - 使用旋转精灵进行碰撞检测，如何获得正确的边界矩形？

> ID：14468793
> 
> 赞同：1
> 
> 时间：2013-01-22T21:57:45.587
> 
> 标签：android, sprite, collision-detection, bounding-box

我目前正在创建一个 android 游戏并在不久前实现了碰撞检测。我只是在精灵周围绘制一个矩形，使用它们的位置、宽度和高度，并查看它们是否与其他矩形相交。但是，我的精灵现在根据它们的轨迹旋转，但我找不到如何旋转 Rect 所以边界是正确的。有什么建议么？

谢谢安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:06:48.947

`Rect`对象通常是轴对齐的，因此它们只需要 4 个值：top、left、bottom、right。

如果要旋转矩形，则需要将其转换为代表每个顶点坐标的八个值。

您可以通过平均所有 x 和 y 值轻松计算中心值。

然后它只是基本的数学。这是来自 StackOverflow 的内容：

[围绕另一个点旋转一个点 (2D)](https://stackoverflow.com/questions/2259476/rotating-a-point-about-another-point-2d)

您的八个值或四个角是（假设从右上角逆时针方向）：

```
v0 : (right, top)
v1 : (left, top)
v2 : (left, bottom)
v3 : (right, bottom) 
```

创建您自己的矩形对象来解决这个问题，并计算交点等。

请注意，我已经讨论过如何旋转矩形的顶点。如果您仍然想要一个*边界框*，这通常仍被认为是轴对齐的，因此您可以获取旋转顶点的最大值和最小值并构造一个新的（更大的）矩形。不过，这可能不是您想要的。

# padrino - 如何在自定义助手类中使用 Padrino 助手

> ID：14468796
> 
> 赞同：2
> 
> 时间：2013-01-22T21:58:06.583
> 
> 标签：padrino

我想使用自定义通知助手在我的 Padrino 应用程序中生成通知（闪存）消息。在助手内部，我想使用内置的 Padrino 助手（flash 和 content_tag。（参见下面的示例）

```
class NotificationHelper       

  def self.notify
    unless flash.empty?
      content_tag :div, class: 'notifications' do
        flash.map do |key, msg|
          headline = case key
          when :success then 'Super!'
          when :error   then 'Oh. Das tut uns leid.'
          end
          content_tag :p, :class => "notification" do
            content_tag(:span, headline, class: "headline #{key}") + msg
          end
        end.join("\n")
      end
    end
  end
end 
```

但是，如果我在视图中使用帮助程序，则会收到以下错误：“NoMethodError - NotificationHelper:Class 的未定义方法‘content_tag’：”

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:45:57.150

可能您应该在助手之后正确注册它：

```
module Flash
  def notify # without self
  end
end

class MyApp < Padrino::Application
  # ...
  # after helpers
  helpers Flash
end 
```

看看：[https ://github.com/padrino/padrino-contrib/blob/master/lib/padrino-contrib/helpers/flash.rb](https://github.com/padrino/padrino-contrib/blob/master/lib/padrino-contrib/helpers/flash.rb)

# java - 无法第二次执行表更改事件

> ID：14468806
> 
> 赞同：0
> 
> 时间：2013-01-22T21:58:49.000
> 
> 标签：java, sql, swing, events, user-interface

这是 MVC 的控制器类：

```
 public class EventController extends MouseAdapter implements ActionListener {
    private EventModel model;
    private EventView  view;

    /** Constructor */
   public EventController(EventModel myModel, EventView myView){
       model = myModel;
       view = myView;     
    }

   public void setUpListeners() {
       this.view.addEventButton.addActionListener(this); 
       this.view.addEventMenuItem.addActionListener(this);
       this.view.editEventMenuItem.addActionListener(this);
       this.view.tableEvent.addMouseListener(this);

   }

   @Override
   public void actionPerformed(ActionEvent e){
       Object button = e.getSource();
       if(button==this.view.addEventButton) {
           setEventDetails();          
       }
       else if (button==this.view.addEventMenuItem) {
           this.view.addDialog.setVisible(true);
       }
       else if(button==this.view.editEventMenuItem) {
           this.view.editDialog.setVisible(true);
       }

   }
   /*to change the display of label text of the VIEW according to the selected row of the table tableEvent*/

    @Override
    public void mouseClicked(java.awt.event.MouseEvent event) {
      int rowSelected = view.tableEvent.getSelectedRow();
      String tableClick = view.tableEvent.getModel().getValueAt(view.tableEvent.convertRowIndexToModel(rowSelected), 0).toString();
      Events e = model.getEvent(tableClick); //tell model to change its state based on user input on views 
      view.changeDisplay(e);
    } 
```

这是 View Class 及其 changeDisplay() 方法来适当地更改标签文本：

```
public class EventView extends javax.swing.JFrame {
private EventModel model;
public void changeDisplay(Events e) {
       evTitle.setText(""+e.getEventName());
       evWhen.setText("When: "+ e.getEventDate());
       evWhere.setText("Where: "+ e.getEventVenue());
       evDescription.setText("Description: "+ e.getEventDetail());
       evOpportunity.setText("Opporunity: "+ e.getEventOpportunity());
       evMoreDet.setText("More Details: "+ e.getEventMoreDetails());
   }

} 
```

这是模型类：

```
 public class EventModel {
        Connection conn = JavaConnect.ConnectDB();
        PreparedStatement pst = null;
        ResultSet rs = null; 
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
        Events e = new Events(); 

public void addEvent(String name, Date date,String start, String venue, String details,
String opportunity, String more, String end) throws SQLException {
    try {
    String qry = "INSERT INTO EVENT(eventName,date,time,venue,details,opportunity,moreDetails,endTime) VALUES (?,?,?,?,?,?,?,?)";
    pst = conn.prepareStatement(qry);
    pst.setString(1, name);
    pst.setString(2, sdf.format(date));
    pst.setString(3, start);
    pst.setString(4, venue);
    pst.setString(5, details);
    pst.setString(6, opportunity);
    pst.setString(7, more);
    pst.setString(8, end);
    pst.executeUpdate(); 
    }
    finally{
       try{ pst.close(); } 
       catch (SQLException se) {}
      }
}

public Events getEvent(String tableClick) {

    try {
        pst = conn.prepareStatement("SELECT * FROM Event WHERE eventID='"+tableClick+"' ");
        rs = pst.executeQuery();
        while(rs.next()){      
        e.setEventName(rs.getString(2));
        System.out.println(rs.getString(2));
        e.setEventDate(rs.getString(3));
        e.setEventTime(rs.getString(4));
        e.setEventVenue(rs.getString(5));
        e.setEventDetail(rs.getString(6));
        e.setEventOpportunity(rs.getString(7));
        e.setEventMoreDetails(rs.getString(8));
        e.setEndTime(rs.getString(9));
        rs.close();
        pst.close();
       }
    } 
    catch(SQLException ex){
    ex.printStackTrace();
    } 
    return e;
} //end getEvent

} 
```

![单击表格行正确更改标签文本](../Images/8766420fbfa0c27fadae8f172097fae1.png)

我的程序有一个小错误，我似乎无法修复很久。基本上，每当我单击表格 ( `tableEvent`) 的行时，它应该在表格旁边的标签中显示适当的文本，如屏幕截图所示，事件“软件开发职业事件”。这在第一次执行时工作正常，但是`mouseClicked`在我通过`addEvent`模型的方法添加事件后，控制器中的事件方法不会改变文本的显示。我不确定它是什么，是我在实例化类对象时做错了什么`Events`，我的`addEvent`方法是错误的，还是控制器中实际`mouseClicked`覆盖的方法是错误的。会是什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:22:58.260

我不确定我的回答是否对您有帮助，但应该使用`ListSelectionListener`. 它更好，因为它不仅为鼠标点击提供反应，还为关键事件提供反应。要将侦听器添加到表中，只需使用表的选择模型：

```
myTable.getSelectionModel().addListSelectionListener(myListener) 
```

可能此更改可以帮助您解决问题

# php - 在某种 MVC 框架中重写 URL？

> ID：14468816
> 
> 赞同：0
> 
> 时间：2013-01-22T21:59:04.080
> 
> 标签：php, model-view-controller, url-rewriting, autoload

我不太确定这是否是通过重写 URL 来完成的，但我不知道如何相应地命名它。

这是我的问题。我目前正在做一个网站项目，我正在使用 MVC 框架的抽象（它主要用于学习框架）。这就是我的文件夹结构的样子：

```
/controller/
 |--indexcontroller.php

/myaccount/
 |--/controller/
    |--indexcontroller.php
 |--index.php

/globals/
 |--framework.php

/templates/

/options/
 |--settings.php
 |--config-www.php.inc 
```

所以目前我正在使用自动加载器来加载所需的类。myaccount 文件夹中的 index.php 继承了应该处理类加载的框架类：

```
$urlparts = explode("/", $_SERVER['REQUEST_URI']);
    $urlparts2 = explode("?", $urlparts[2]);
    $class = str_replace(".php", "", $urlparts2[0]);

    if ($class == "") {

        $class = "index";
    }

    $letters_first = substr($class, 0, 1);
    $letters_last = substr($class, 1, strlen($class));

    $class = strtoupper($letters_first).$letters_last."Controller";

    if (class_exists($class)) {

        $object = new $class();

    } else {

        echo "Problem: class $class does not exist.";
    } 
```

我目前遇到的问题是，我只能使用“http://www.url.com/myaccount/”，它正在从 myaccount 加载控制器文件夹中的 indexcontroller.php（这很好）。但我也希望能够使用“http://www.url.com/myaccount/profile”，然后应该调用来自 myaccount 的控制器文件夹中的“profilecontroller.php”。

我怎样才能做到这一点？网址重写？还是我做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:22:39.213

起初这可能有点让人不知所措，但如果你明白了，它会让你的生活更轻松。

1 ) 看看现有的框架，如 symfony、codeigniter 等，看看它们是如何完成路由的。

2）尝试通过[composer](http://getcomposer.org/)重用这些“组件”（如路由表单symfony），这样您就不必自己动手了。

这边走：

*   您不必自己编写所有内容。
*   你正在使用热门的东西，比如作曲家:)
*   您仍然可以通过查看其他框架的实现来学习

我希望这个能有一点帮助 ：）。

# ruby-on-rails - Rails 动作缓存 RSpec 测试失败

> ID：14468820
> 
> 赞同：4
> 
> 时间：2013-01-22T21:59:22.483
> 
> 标签：ruby-on-rails, rspec, action-caching

我有一个规范，可以在禁用缓存和启用缓存时测试动作缓存。似乎测试执行的顺序会影响它们是否通过。

```
it "should not cache the index page when we're not caching" do
    ActionController::Base.perform_caching = false
    HomeController.caches_action :index
    Rails.cache.clear
    ActionController::Base.cache_store.exist?(:index_cache_path).should be_false
    get :index
    ActionController::Base.cache_store.exist?(:index_cache_path).should be_false
end

it "should cache the index page when we're caching" do
    ActionController::Base.perform_caching = true
    HomeController.caches_action :index
    Rails.cache.clear
    ActionController::Base.cache_store.exist?(:index_cache_path).should be_false
    get :index
    ActionController::Base.cache_store.exist?(:index_cache_path).should be_true
end 
```

当以上述顺序运行测试时，最后一个测试失败，因为 cache_store 在最后一个期望中不存在。我很难理解为什么无缓存测试会影响缓存测试。有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:27:24.153

如果您将 spec_helper.rb 随机测试顺序设置为 true，这是有道理的，因为您没有取消“ActionController::Base.perform_caching = false”设置。

编写缓存测试的推荐方法是执行 before(:each) 和 after(:each) 设置缓存设置的开和关。

由于您正在测试这些设置，如果您将其打开，请记住在测试结束之前将其关闭，反之亦然。您的测试将更加原子化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-30T22:19:22.767

确保您拥有：

```
config.action_controller.perform_caching = true 
```

在`environment/test.rb`.

否则 - 我注意到超级奇怪的事情。当我只运行请求测试 () 时缓存有效`spring rspec spec/requests` `describe '..' type: :request`，但如果我使用`rspec spec`.

# jquery - jQuery 验证 - 在运行时更改最大值

> ID：14468821
> 
> 赞同：7
> 
> 时间：2013-01-22T21:59:22.683
> 
> 标签：jquery, jquery-validate

我有这些验证规则：

```
$("#ed_details").validate({
    rules: {
        tagno: { required: true },
        itemid: { required: true },
        ralno: { required: true },
        feet: { required: true, number: true, min: 0 },
        inches: { required: true, number: true, min: 0 },
        cms: { required: true, number: true, min: 0 },
        length: { required: true, number: true, max: $('#maxlength').val() },
        qty: { required: true }
    }
}); 
```

这是长度验证的字段。它是仅用于测试目的的文本。一旦它工作，它将被隐藏。

```
<input type="text" name="maxlength" id="maxlength" value="<?=$maxL['ml']?>" /> 
```

这很好用，除非我在运行时更改 maxlength 的值（这可能发生）。用户正在从下拉列表中选择一个项目。每个项目都有一个最大长度的管道，可以与它一起使用。当项目发生变化时，屏幕上的 maxlength 值会发生变化。但是，当验证运行时，我会看到一条基于原始长度的错误消息（新项目为 0，无论编辑时加载的最大长度是多少）。

```
Please enter a value less than or equal to 156. 
```

即使 maxlength 字段显示另一个值，我也会看到这一点。

如果我在现场使用 Firebug，即使更改后它也会显示原始值。此外，手动更改 maxlength 字段而不是代码并没有什么不同。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T22:06:44.943

你不能**这样**改变`rules`...

```
length: { 
    required: true,
    number: true, 
    max: $('#maxlength').val()
}, 
```

那是因为，像大多数 jQuery 插件一样，`.validate()`只调用**一次**来*初始化*您的插件`form`......它不会重复运行，因此动态更改其中的`rules`选项`.validate()`没有任何作用。

使用该`rules`方法`add`动态更新您的规则。（与更改值的代码一起使用。）

```
$('#maxlength').rules("add", {
     max: $('#maxlength').val()
}); 
```

请参阅下面这个非常粗略的“概念证明”演示（您可以重新安排空间）。测试表单（初始值为 5）。然后单击一次按钮，值和规则（以及消息）正确更新为“2”。

[http://jsfiddle.net/Y565M/](http://jsfiddle.net/Y565M/)

[http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-30T13:57:39.723

你也可以这样做：

```
function ()  { return $("#maxlength").val()  } 
```

在这种情况下 ：

```
length : {  required:  true, number: true, max: function () { return $("#maxlength").val()  }  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T22:20:35.583

`change`也许你可以在触发器中添加 sparky 方法

```
$('#maxlength').change(function() {
    $('#ed_details').rules('remove', 'length');
    $('#ed_details').rules('add', { length : { required: true, number: true, max: $('#maxlength').val() } });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T22:28:08.817

您可以创建一个自定义验证器，在选择器中传递将提供最大值的输入：

```
$.validator.addMethod("MaxFromValue", function (val, ele, arg) {
    var max = $(arg).val();
    return this.optional(ele) || !(val > max);
}, $.format("Value cannot be greater than '{0}'")); 
```

*   这是未经测试的代码...谨慎使用*

# c# - 打开连接时 Exchange Web 服务流订阅超时

> ID：14468822
> 
> 赞同：3
> 
> 时间：2013-01-22T21:59:28.900
> 
> 标签：c#, .net, exchange-server, exchangewebservices

我目前正在解决与 Exchange Web 服务相关的问题。问题在于，在打开与流式订阅的连接（通过 StreamingSubscriptionConnection 对象）时，调用 Open 方法时操作会挂起。这是挂起的代码，供参考：

```
_streamingSubscriptionConnection = new StreamingSubscriptionConnection(_exchangeService, _connectionLifetime);
_streamingSubscriptionConnection.AddSubscription(_subscription);
_streamingSubscriptionConnection.OnNotificationEvent += new StreamingSubscriptionConnection.NotificationEventDelegate(OnNotificationEvent);
_streamingSubscriptionConnection.OnSubscriptionError += new StreamingSubscriptionConnection.SubscriptionErrorDelegate(OnSubscriptionError);
_streamingSubscriptionConnection.OnDisconnect += new StreamingSubscriptionConnection.SubscriptionErrorDelegate(OnDisconnect);
_streamingSubscriptionConnection.Open(); 
```

通常需要大约两分钟，然后它会抛出一个`ServiceRequestException`谁的消息是：

> 请求失败。操作已超时。

还值得一提的是，即使我将超时设置为一分钟，它仍然需要超过一分钟然后抛出这个异常。该调用永远不会超过该 Open 命令。

我的问题是，过去有没有人遇到过这种情况？此外，是否有任何可用的工具可用于诊断任何连接问题，以确定异常是在我端、Exchange 服务器端还是在中间某处？我试过 Fiddler 和 Microsoft Network Monitor 来寻找任何模式，但我很难辨别任何东西。

提前致谢！

编辑：要补充这一点，如果我添加一个跟踪侦听器，我会得到很多输出。我可以看到它检索订阅 ID，然后尝试连接。当它发出连接请求时，这是在发出 Open 命令和超时之间记录的内容：

```
<Trace Tag="EwsRequestHttpHeaders" Tid="10" Time="2013-01-24 19:16:18Z">
      POST /ews/exchange.asmx HTTP/1.1
      Content-Type: text/xml; charset=utf-8
      Accept: text/xml
      User-Agent: ExchangeServicesClient/14.03.0032.000
      Accept-Encoding: gzip,deflate      
</Trace>

<Trace Tag="EwsRequest" Tid="10" Time="2013-01-24 19:16:18Z" Version="14.03.0032.000">
    <?xml version="1.0" encoding="utf-8"?>
    <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:m="http://schemas.microsoft.com/exchange/services/2006/messages" xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
        <soap:Header>
            <t:RequestServerVersion Version="Exchange2010_SP1" />
        </soap:Header>
        <soap:Body>
            <m:GetStreamingEvents>
                <m:SubscriptionIds>
                    <t:SubscriptionId>GABsdGNmaXN3bXNnY2EwNi5mbmZpcy5jb20QAAAAnQCowdNSt0iTEhqVr8+a1GPHu2t+yM8I</t:SubscriptionId>
                </m:SubscriptionIds>
                <m:ConnectionTimeout>30</m:ConnectionTimeout>
            </m:GetStreamingEvents>
        </soap:Body>
    </soap:Envelope>
</Trace> 
```

我试图排除网络问题，但这样做有点困难。在这一点上，欢迎任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T16:50:53.123

对于那些追随我的人，这个问题最终与 .Net 或 EWS 库无关。

该问题最终与我们公司负载均衡器的持久性设置有关。使用我们的负载均衡器，如果为 EWS 流订阅调用启用任何类型的持久性，这些连接将失败。不幸的是，当时我不知道我和 Exchange 服务器之间有一个负载平衡器，因为开发人员在这里无法访问该基础结构。

无论如何，希望这对将来的人有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:01:34.257

当我向连接添加许多订阅时，我会遇到这种情况，连接需要很长时间才能打开。尝试将时间增加到`_connectionLifetime` 20 分钟，看看会发生什么。

# javascript - 第 3 方脚本破坏我的 JS

> ID：14468824
> 
> 赞同：1
> 
> 时间：2013-01-22T21:59:34.600
> 
> 标签：javascript, jquery

我有一个在我的网站上显示一些数据的第 3 方脚本。当脚本加载时，它会破坏脚本所在的任何页面上的所有 JS。我删除了脚本，我的页面可以正常工作。

有没有办法阻止第 3 方脚本以破坏页面的方式与我的页面交互？

**笔记：**

*   我无权访问要编辑的第 3 方脚本。
*   我正在将 jQuery 用于正在破坏的脚本。我已经到位，`jQuery.noConflict`但它仍然打破了页面。
*   我试图将脚本加载到 iframe 中，看看是否有所作为。它没有。
*   该脚本确实向页面写入数据，主要是 CSS 和 HTML

注意：以下代码可能包含药物内容的引用/链接，主要是大麻。

我正在为医用大麻药房建造一个网站。我正在从一个名为 WeedMaps 的网站导入药房的菜单。他们的嵌入代码如下所示：

```
<script type="text/javascript">var wmenu_id = 1111;</script> //The number correlates to the menu I need to pull, I have changed it in this question
<script type="text/javascript" src="http://legalmarijuanadispensary.com/components/com_weedmenu/weedmenu-widget.js"></script> 
```

当我使用上面的代码时，我网站的 JS 会中断。如何在使用我无法控制的 3rd 方脚本时防止我的代码中断。

**更新**

这是一个[JS Fiddle](http://jsfiddle.net/Lynda333/u8gH3/1/)。菜单打开但没有正确关闭。删除从杂草图中生成菜单的脚本，菜单可以正常工作。（杂草图菜单脚本位于 HTML 面板的底部。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:34:04.603

嗯，运气不太好。我会添加我所拥有的，因为它可能会引发您的进一步想法。然而，简而言之，我认为他们的剧本写得不是特别好，他们确实需要在最后修复它。

就目前而言，Firefox 在动画菜单时显示此错误：

> TypeError: jQuery.easing[jQuery.easing.def] 不是函数

[This blog](http://www.gilluminate.com/2011/06/06/jquery-easingjquery-easing-def-is-not-a-function/)建议在jQuery之前加载Easing插件时会发生这种情况。很好，我想——我们只需要在我们的 jQuery 加载后加载 WeedMenu 脚本。所以我尝试了以下方法（[在此处的帮助下](https://stackoverflow.com/questions/912711/jquery-to-load-javascript-file-dynamically)）：

```
$j.getScript('http://legalmarijuanadispensary.com/components/com_weedmenu/weedmenu-widget.js'); 
```

这给了我这个错误：

> 从异步加载的外部脚本调用 document.write() 被忽略。

事实证明，这是由于 WM 脚本使用 的结果而发生的，该脚本`document.write`已经过时了。所以这让我找到[了 crapLoader](http://www.functionn.in/2012/06/craploaderjs-load-almost-any-third.html)，它是用来处理这类事情的：

```
crapLoader.loadScript("http://legalmarijuanadispensary.com/components/com_weedmenu/weedmenu-widget.js", "menu-script"); 
```

不幸的是，这让我回到了最初的 Easing 错误。

[这是我的叉子](http://jsfiddle.net/u8gH3/2/)——如果你找到任何东西，请告诉我！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T03:41:22.393

脚本写得不好，我可以通过从脚本中删除一行代码来解决我的问题。我提供的链接列表到更长的脚本。该脚本有这行代码：

```
try {
    b("http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"), "function" != typeof wmenu_strains_callback && b("http://legalmarijuanadispensary.com/components/com_weedmenu/weedmenu.js", !0)
} 
```

如果我删除`b("http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"),`，则脚本有效，我的页面有效。发生的事情是脚本将 jQuery 插入到我的脑海中并破坏了我的 javascript 的其余部分。

# php - PHP cURL 很慢

> ID：14468826
> 
> 赞同：-1
> 
> 时间：2013-01-22T21:59:36.950
> 
> 标签：php, curl

我已经看到了很多关于这个问题的话题，但没有什么对我真正有用的，所以请原谅我开始另一个关于这个话题的话题。

为了建立起来，我的网站运行了大约 20 个 cURL 周期。我喜欢 cURL，因为你可以隐藏内容，但爬虫可以看到它。我在使用包含时遇到了问题，所以我不得不使用 cURL 作为替代品。每次 cURL 加载一个带有参数的 URL。所有 URL 都链接到**本地**​​ php 文件。

该网站平均需要四秒钟才能加载。

有没有办法加快这个速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:09:18.383

使用 cURL，而不是使用标准的 PHP 包含，您会遇到一些问题。这是一个总结。

排队 - 在您的代码中执行 20 个请求，每个请求都会延迟页面的创建。该请求在等待和加载方面有其自身的开销。

数据库 - 与其打开与数据库的连接、获取所有数据并关闭连接，您可能需要打开连接 20 次（取决于页面是否需要数据库访问）。创建和释放连接将花费您时间。

我敢打赌，无论您使用 cURL 做什么，都可以使用包含。当您在 PHP 中包含一个文件时，它可以访问当前范围内的所有变量 - 因此您不需要在查询字符串中传递它们，您可以从第二个文件中使用它们...

*例子.php*

```
$example = 'This is an example';
include_once('other.php'); 
```

*其他.php*

```
echo $example; // writes: This is an example 
```

# c# - OnTriggerEnter() 未调用

> ID：14468828
> 
> 赞同：3
> 
> 时间：2013-01-22T21:59:39.003
> 
> 标签：c#, unity3d, collision-detection

我有一个玩家（球体）和 4 个敌人（胶囊）。所有敌人都添加了角色控制器。它们还有一个子 GameObject，它有一个 RigidBody（没有质量，没有重力）和一个附加的 Box Collider。Box Collider 足够大，因此您可以看到盒子内部的球体模型，即使中间有一点空间。

玩家还有一个角色控制器，但没有 RigidBody。它确实有一个附有网格对撞机的球体。

所有敌人都选中了 IsTrigger 框。他们为什么不调用 OnTriggerEnter() 函数？请注意，当敌人发生碰撞时，会调用 OnTriggerEnter()。但它对播放器不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T22:35:19.983

球体是玩家的子游戏对象，还是游戏对象本身？您可能想检查脚本的附加位置。如果脚本附加到玩家但对撞机位于子游戏对象上，那将无法正常工作。Collider 和 script 需要在同一个 GameObject 上。

# image - JPEG 到视频流

> ID：14468837
> 
> 赞同：0
> 
> 时间：2013-01-22T22:00:06.737
> 
> 标签：image, video, stream, jpeg

我们正在从第三方获取图像，并希望有一个软件来压缩图像并流式传输它们。我们想知道是否有人知道`software/api`这样做的。

我在网上看到了这些，但不确定它是否是我想要的。

[http://www.aforgenet.com/framework/](http://www.aforgenet.com/framework/)
[http://splicer.codeplex.com/](http://splicer.codeplex.com/)

我们再次从第三方获取图像，我们希望将这些图像作为视频源流式传输到网站上（我们不想将它们显示为图像）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:13:24.133

[avifile](http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library)包装器应该是最好的选择之一。

# javascript - document.getElementById 返回 null

> ID：14468838
> 
> 赞同：0
> 
> 时间：2013-01-22T22:00:10.390
> 
> 标签：javascript, html, google-chrome, button, null

我目前正在尝试为 Chrome 编写扩展程序。

我现在要做的是创建一个 HTML 表单，上面有一个按钮，按下时会显示一个消息框。

我的项目由一个 HTML 文件和一个 JavaScript 文件组成。

```
<html>
<head>
<style>
body {
  width:100px;
  font-family: sans-serif;
  font-size: 0.8em;
}
</style>
<script src="popup.js"></script>
</head>
<body>
<input id="buttonid" type="button" value="try it"></input>
</body>

chrome.tabs.onCreated.addListener(onCreated());

function myFunction()
{
alert("Hello World!");
}

function onCreated()
{
    var fld = document.getElementById("buttonid");
    if(fld==null)
    {
        alert("null");
    }
    else
    {
        alert("not null");
    }   
} 
```

所以我的理解是，当呈现 HTML 时，它会运行我的 onCreated() 函数。然后它会查找 ID="buttonid" 的元素。但它总是返回 null，所以会出现一个消息框说“null”。

谁能解释一下？这似乎没有任何意义。我曾尝试在 IE 中运行稍微修改过的版本，但结果相同。

为了清楚起见，我知道这不会满足我上面的描述，但我试图在将事件附加到它之前从 JavaScript 访问按钮。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T22:01:35.230

代替

```
chrome.tabs.onCreated.addListener(onCreated()); 
```

和

```
chrome.tabs.onCreated.addListener(onCreated); 
```

事件处理程序规则 #1：[没有括号！](http://quirksmode.org/js/events_tradmod.html#link2)- 您不想执行该功能，但要注册它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:13:01.663

固定的！我放置了 window.onload=function(){onCreated()}; 在第一行。这意味着当加载 html 时，它会运行我的函数“onCreated”......谢谢大家，你把我推向了正确的方向。

# c# - 保持在 Web 应用程序上的位置

> ID：14468842
> 
> 赞同：0
> 
> 时间：2013-01-22T22:00:40.993
> 
> 标签：c#, asp.net, ajax, ajaxcontroltoolkit, tabcontainer

我希望我已经完成了我的功课。我有一个相当大的 Web 应用程序，当按下按钮时，网页会在回发时跳转到页面顶部。我知道该页面需要该行`MaintainScrollPositionOnPostback="true"`

所以我回到了第一原则并建立了两个网页。一个有一个 ajax 控件 takeit tabcontainer，第二个没有。

在带有 tabcontainer 的情况下，maintainposition 属性没有影响，页面会跳回 tabcontainer。在没有 ajax 的那个上它工作正常。两页都在下面。

你能告诉我为什么以及如何解决这个问题吗？

**在回发中保持位置的网页**

```
%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="MaintainMyPosition.WebForm1" MaintainScrollPositionOnPostback="true"  %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        This Web Application will maintain the position on postback</div>
                <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />    
    <asp:Button ID="Button1" runat="server" Text="Press me and position will be maintained" />
    </form>
</body>
</html> 
```

**不保持回发位置的网页**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm2.aspx.cs" Inherits="MaintainMyPosition.WebForm2" MaintainScrollPositionOnPostback="true"  %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
            <asp:ScriptManager ID="ScriptManager1" runat="server" LoadScriptsBeforeUI="True">
    </asp:ScriptManager>
    <div>   
        This Web Application will NOT maintain the position on postback
        </div>                          
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <asp:TabContainer ID="TabContainerMain" runat="server" ActiveTabIndex="4" Width="100%"
                        Height="100%" CssClass="" ViewStateMode="Enabled">

                        <asp:TabPanel ID="Tab_Errors" runat="server" HeaderText="Tab_Errors">
                            <ContentTemplate>
                                <div class="TabControls">
                                    <p>
                                        Hello Im an ajax control tab and I'm going to cause this webpage to not maintain position .</p>
                                </div>
                            </ContentTemplate>
                        </asp:TabPanel>                                             
                    </asp:TabContainer>
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />

    <asp:Button ID="Button1" runat="server" Text="Press me and position will not be maintained" />
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:13:58.090

这篇文章应该解释一下：

[http://www.eggheadcafe.com/tutorials/asp-net/7dd57635-0587-42ba-ae73-f52449e653bf/aspnet-ajax-maintain-scroll-position-from-a-partial-page-update.aspx](http://www.eggheadcafe.com/tutorials/asp-net/7dd57635-0587-42ba-ae73-f52449e653bf/aspnet-ajax-maintain-scroll-position-from-a-partial-page-update.aspx)

# symfony - 引用另一个目录中另一个文件中的函数

> ID：14468844
> 
> 赞同：0
> 
> 时间：2013-01-22T22:00:43.317
> 
> 标签：symfony

我的 Store 包中有一个组件需要访问`getCode()`我的 Foundation 包中的函数。我尝试通过`use \project\FondationBundle\Foundation\collection\GlobalCollection`. 这没有用。有什么建议么？

报错：

`Fatal error: Call to undefined function project\CmsBundle\Cms\Components\getCurrencyCode() in...`

似乎 Symfony 正在寻找错误的目录。

编辑 - 修正了一个错字。正确的路径是`\project\FondationBundle\Foundation\collection\GlobalCollection`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:50:36.773

该解决方案是仅为我的项目定制的解决方案。我的同事写了一些我刚刚复制的代码。经过进一步研究，cheesemacfly 指导我的方向是正确的，但是在我的情况下无法实施。

# jquery - PhoneGap getJSON 调用 REST 服务不起作用

> ID：14468845
> 
> 赞同：2
> 
> 时间：2013-01-22T22:00:45.860
> 
> 标签：jquery, json, web-services, rest, cordova

我正在创建一个 PhoneGap 应用程序，它应该调用一些 REST Web 服务方法来获取一些数据并将一些数据发送到服务器。

在我的程序的某个地方，我得到了以下代码：

```
$.getJSON("https://mgeowiki4.iwvi.uni-koblenz.de/API/UniKoblenz/validateCredentials/SampleUser/Password",
       function(data){
             echo("data: " + data);
   })
   .success(function() { alert("second success"); })
   .error(function() { alert("error"); })
   .complete(function() { alert("complete"); }); 
```

不幸的是，当我执行此操作时，什么也没有发生。我正在使用带有 android 模拟器的 Eclipse 来测试它。不显示任何警报消息。甚至不显示错误消息。

如果我在浏览器中调用服务，如果密码不正确，我会得到以下信息：

```
{"passwordIsValid": "false"} 
```

如果密码正确，则如下：

```
{"passwordIsValid": "true"} 
```

如何在 PhoneGap 应用程序中获得这些结果？我有点不知道该怎么做:-(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T22:31:16.033

您是否[允许白名单中的 ajax 端点](http://cordova.apache.org/docs/en/edge/guide_appdev_whitelist_index.md.html)？

logcat的输出是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:45:39.363

在您的页面中像这样使用，将起作用 - 使用[服务 Jquery Json](https://rvieiraweb.wordpress.com/2013/01/21/consuming-webservice-net-json-using-jquery/)

# python - python cgi脚本中的线程错误

> ID：14468851
> 
> 赞同：0
> 
> 时间：2013-01-22T22:01:08.777
> 
> 标签：python, linux, multithreading, apache, cgi

我正在运行的 CGI 脚本出现以下错误......

```
Traceback (most recent call last):, referer: http://mysite/cgi-bin/dev/testing.py
  File "/var/www/cgi-bin/dev/testing.py", line 908, in <module>, referer: http://mysite/cgi-bin/dev/testing.py
    webpage(), referer: http://mysite/cgi-bin/dev/testing.py
  File "/var/www/cgi-bin/dev/testing.py", line 899, in webpage, referer: http://mysite/cgi-bin/dev/testing.py
    getResults(form), referer: http://mysite/cgi-bin/dev/testing.py
  File "/var/www/cgi-bin/dev/testing.py", line 557, in getResults, referer: http://mysite/cgi-bin/dev/testing.py
    new_nums = processNums(nums), referer: http://mysite/cgi-bin/dev/testing.py
  File "/var/www/cgi-bin/dev/testing.py", line 328, in processNums, referer: http://mysite/cgi-bin/dev/testing.py
    t.start(), referer: http://mysite/cgi-bin/dev/testing.py
  File "/usr/lib64/python2.6/threading.py", line 471, in start, referer: http://mysite/cgi-bin/dev/testing.py
    _start_new_thread(self.__bootstrap, ()), referer: http://mysite/cgi-bin/dev/testing.py
  thread.error: can't start new thread, referer: http://mysite/cgi-bin/dev/testing.py 
```

这可能是我机器上的 ulimit 问题，但我想和你们一起检查我的代码。这是我用于线程的代码....

```
import Queue
import multiprocessing
from threading import Thread

def processNums(nums):
    new_nums = []

    queue = Queue.Queue()
    for num in nums:
        queue.put(num)

    thread_num = multiprocessing.cpu_count()
    for x in range(0,thread_num):
        t = Thread(target=multNum,args=(queue,new_nums,))
        t.setDaemon(True)
        t.start()

    queue.join()
    return new_nums

def multNum(queue,new_nums):
    while True:
        try: num = queue.get()
        except: break

        # do something....
        new_num = num*123456

        new_nums.append(new_num)
        queue.task_done()

print processNums([54,12,87,3268,2424,148,5,9877]) 
```

输出 [6666624, 1481472, 10740672, 403454208, 299257344, 18271488, 617280, 1219374912]

这是我的代码的一个真正淡化的版本（这里有很多我无法复制所有代码）但我怀疑我的问题出在此处。我的问题是......我应该以某种方式关闭这些线程吗？python不会自动做到这一点吗？或者这是 apache 或我的 linux 服务器的配置问题？这是我第一次看到这个错误，但这也是我第一次使用我正在使用的数据集运行这个应用程序。该数据集生成数千个线程。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:05:38.470

完成后应该加入线程。请参阅[Thread.join()](http://docs.python.org/2/library/threading.html#threading.Thread.join)的 Python 文档。

如果一个线程没有加入，它将作为一个僵尸进程保留在进程表中。

在基于 Linux 的系统上，pthreads 用于实现 Python 线程接口。很可能调用`pthread_create`失败。以下是手册页中的可能原因。这可能是一个`EAGAIN`错误，但错误代码无法通过 Python 线程接口提供。

> ```
>  EAGAIN Insufficient  resources  to create another thread, or a system-imposed limit on the number of threads was encountered.
>           The latter case may occur in two ways: the RLIMIT_NPROC soft resource limit (set via setrlimit(2)), which  limits  the
>           number  of  process  for  a  real  user  ID,  was reached; or the kernel's system-wide limit on the number of threads,
>           /proc/sys/kernel/threads-max, was reached.
> 
>    EINVAL Invalid settings in attr.
> 
>    EPERM  No permission to set the scheduling policy and parameters specified in attr. 
> ```

# android - android listview，复选框随机变化

> ID：14468852
> 
> 赞同：5
> 
> 时间：2013-01-22T22:01:15.143
> 
> 标签：android, android-listview, android-checkbox

我在每一行都有一个带有复选框的列表视图，当我选择任何复选框然后滚动屏幕时，每个项目的复选框都会随机更改，我的意思是取消选中它变成选中，有时它保持取消选中，然后当我再次向上滚动时，选中的变成取消选中，我发现这个问题[Android listview with checkbox problem](https://stackoverflow.com/questions/5444355/android-listview-with-checkbox-problem)，用户说这对他们有帮助，但我不明白我应该做什么，请帮忙

这是我的适配器

```
class RestaurantAdapter extends BaseAdapter {
    private static LayoutInflater inflater = null;
    private ArrayList<HashMap<String, String>> data;
    Activity activity;

    public RestaurantAdapter(Activity activity,
            ArrayList<HashMap<String, String>> data) {
        // TODO Auto-generated constructor stub
        this.activity = activity;
        this.data = data;
        inflater = (LayoutInflater) activity
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return data.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        View vi = convertView;
        if (vi == null)
            vi = inflater.inflate(R.layout.restaurant_multi_select_list_item,
                    null);
        TextView name = (TextView) vi
                .findViewById(R.id.restaurant_multi_select_title);
        ImageView image = (ImageView) vi
                .findViewById(R.id.restaurant_multi_select_list_item_image);
        CheckBox cb = (CheckBox) vi
                .findViewById(R.id.restaurant_multi_select_checkBox);
        HashMap<String, String> restaurant = data.get(position);
        name.setText(restaurant.get("name"));

        image.setImageResource(Integer.parseInt(restaurant.get("image")));
        return vi;

    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T22:18:38.137

它是关于循环和循环列表视图中的元素，看看`converView`概念。

我编辑您的代码并添加了一个状态数组以继续保存每个复选框的最后一个值并在每个循环中加载它并回收，

```
class RestaurantAdapter extends BaseAdapter {
    private ArrayList<Boolean> status = new ArrayList<Boolean>();
    private static LayoutInflater inflater = null;
    private ArrayList<HashMap<String, String>> data;
    Activity activity;

    public RestaurantAdapter(Activity activity,
            ArrayList<HashMap<String, String>> data) {
        // TODO Auto-generated constructor stub
        this.activity = activity;
        this.data = data;
        inflater = (LayoutInflater) activity
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        for (int i = 0; i < data.size(); i++) {
            status.add(false);
        }
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return data.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        View vi = convertView;
        if (vi == null)
            vi = inflater.inflate(R.layout.restaurant_multi_select_list_item,
                    null);
        TextView name = (TextView) vi
                .findViewById(R.id.restaurant_multi_select_title);
        ImageView image = (ImageView) vi
                .findViewById(R.id.restaurant_multi_select_list_item_image);
        CheckBox cb = (CheckBox) vi
                .findViewById(R.id.restaurant_multi_select_checkBox);
        cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                if (isChecked) {
                    status.set(position, true);
                } else {
                    status.set(position, false);
                }
            }
        });
        cb.setChecked(status.get(position));
        HashMap<String, String> restaurant = data.get(position);
        name.setText(restaurant.get("name"));

        image.setImageResource(Integer.parseInt(restaurant.get("image")));
        return vi;

    }
} 
```

不是你必须`setOnCheckedChangeListener`在 getview 上使用，而不是在 listview 上使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T22:14:42.483

您需要在 中明确设置复选框的状态`getView()`，具体取决于是否应检查该特定行。

为表示 ListView 元素而创建的视图通常会在滚动时出于性能原因（这是您在代码中`convertView`使用View 将简单地保留它们在最后一次使用该特定 View 实例时的任何状态。

# android - 在 Android 上调用 google TTS Cloud API

> ID：14468854
> 
> 赞同：1
> 
> 时间：2013-01-22T22:01:32.737
> 
> 标签：android, cloud, text-to-speech

我知道 TTS API 库可以在 Android 上离线使用。但是我怎样才能使用谷歌的在线 API 呢？我为 iOS 找到了这段代码：

```
local ttsUrl=string.format("http://translate.google.com/translate_tts?tl=%s&q=%s", "en", textToSend)
local ttsData = NSData:dataWithContentsOfURL(NSURL:URLWithString(ttsUrl))
local avPlayer = AVAudioPlayer:initWithData_error(ttsData, nil)
avPlayer:play() 
```

基本上，发送 URL、接收音频并在 Android 上播放的最佳方式是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T23:23:14.500

好吧，显然它就像使用 Android *MediaPlayer*并将 URL 传递给*setDataSource(String path)*一样简单。干杯!

# android - 如何在 android 中使用 yahoo 搜索查询启动浏览器

> ID：14468857
> 
> 赞同：2
> 
> 时间：2013-01-22T22:01:41.097
> 
> 标签：android

我想知道是否有办法用雅虎搜索查询启动浏览器。例如，用户可以选择某个单词或短语并单击一个按钮，该活动将使用 yahoo 搜索查询启动浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:08:03.117

尝试将搜索关键字附加到 Yahoo 搜索 api url 并通过 uri onClick new button 在您的活动中访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:12:46.923

最快的方法是使用意图，如下所示：

```
String query = "my search terms";
String url = "http://search.yahoo.com/search?p=" + query;
Intent i = new Intent(Intent.ACTION_VIEW);
i.setData(Uri.parse(url));
startActivity(i); 
```

Android 将自动尝试在与 URL 关联的应用程序中打开它，默认情况下，这些 URL 应该是它们的默认 Web 浏览器。

# python - 如何在 python 网页中获取当前 URL？

> ID：14468862
> 
> 赞同：13
> 
> 时间：2013-01-22T22:01:55.357
> 
> 标签：python, web-applications

我是 Python 的菜鸟。刚刚安装它，花了 2 个小时在谷歌上搜索如何获取在 URL 中发送到 Python 脚本的简单参数

找到[这个](https://stackoverflow.com/questions/5074803/retrieving-parameter-from-url-in-python)

非常有帮助，除了我无法为世界上任何事情弄清楚如何替换

```
import urlparse
url = 'http://foo.appspot.com/abc?def=ghi'
parsed = urlparse.urlparse(url)
print urlparse.parse_qs(parsed.query)['def'] 
```

用什么替换 url = 'string' 使其工作？我只想访问[http://site.com/test/test.py?param=abc](http://site.com/test/test.py?param=abc)并查看打印的 abc。

* * *

亚历克斯回答后的最终代码：

```
url = os.environ["REQUEST_URI"] 
parsed = urlparse.urlparse(url) 
print urlparse.parse_qs(parsed.query)['param'] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T22:17:10.550

如果您没有任何库可以为您执行此操作，您可以从通过浏览器发送到您的脚本的 HTTP 请求构建您当前的 URL。

您感兴趣的标头`Host`以及 HTTP 方法之后的任何内容（可能`GET`，在您的情况下）。[这里有一些更多的解释](http://djce.org.uk/dumprequest)（第一个链接看起来不错，你可以自由地谷歌一些:)。

[此答案](https://stackoverflow.com/a/2677423/182629)向您展示了如何获取 CGI 脚本中的标题：

> 如果您作为 CGI 运行，则无法直接读取 HTTP 标头，但 Web 服务器会将大部分信息放入环境变量中。你可以从中挑选出来`os.environ[]`。

如果您将此作为练习进行，那很好，因为您将了解幕后的内容。如果您正在构建任何可重用的东西，我建议您使用库或框架，这样您就不会在每次需要某些东西时都重新发明轮子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-23T01:04:09.810

这就是我在 Python 3 中从 CGI (A) URL、(B) GET 参数和 (C) POST 数据中捕获的方式：

==================================================== =====

导入系统、操作系统、io

# 捕获网址

myDomainSelf = os.environ.get('SERVER_NAME')

myPathSelf = os.environ.get('PATH_INFO')

myURLSelf = myDomainSelf + myPathSelf

# 捕获获取数据

myQuerySelf = os.environ.get('QUERY_STRING')

# 捕获发布数据

myTotalBytesStr=(os.environ.get('HTTP_CONTENT_LENGTH'))

如果（myTotalBytesStr == 无）：

```
myJSONStr = '{"error": {"value": true, "message": "No (post) data received"}}' 
```

别的：

```
myTotalBytes=int(os.environ.get('HTTP_CONTENT_LENGTH'))

myPostDataRaw = io.open(sys.stdin.fileno(),"rb").read(myTotalBytes)

myPostData = myPostDataRaw.decode("utf-8") 
```

# 将RAW写入文件

mySpy = "myURLSelf: [" + str(myURLSelf) + "]\n"

mySpy = mySpy + "myQuerySelf: [" + str(myQuerySelf) + "]\n"

mySpy = mySpy + "myPostData: [" + str(myPostData) + "]\n"

# 您需要在此处定义自己的 myPath

我的文件名 = “间谍.txt”

我的文件路径 = 我的路径 + "\" + 我的文件名

我的文件 = 打开（我的文件路径，“w”）

myFile.write(mySpy)

我的文件.close()

==================================================== =====

以下是一些其他有用的 CGI 环境变量：

AUTH_TYPE

CONTENT_LENGTH

内容类型

GATEWAY_INTERFACE

PATH_INFO

PATH_TRANSLATED

请求参数

远程地址

远程主机

REMOTE_IDENT

REMOTE_USER

REQUEST_METHOD

SCRIPT_NAME

服务器名称

服务器端口

SERVER_PROTOCOL

服务器软件

# javascript - 将 jQuery 选择器转换为 HTML 以获取新的 DOM 元素

> ID：14468863
> 
> 赞同：1
> 
> 时间：2013-01-22T22:02:07.633
> 
> 标签：javascript, jquery, jquery-plugins, jquery-selectors

我想实现一个将选择器转换为 HTML 的 jQuery 插件。我知道这两种语法之间的映射是多对多的，但是简单的选择器很容易转换为 HTML。

例子：

```
$('div#my-id.my-class').create(); 
```

可能会产生：

```
<div id="my-id" class="my-class" /> 
```

**编辑**：目的是在选择器返回一个空集时创建一个元素，而不必添加冗余代码。

```
var jqs = $('div#my-id');
if(jqs.length===0) jqs = jqs.create();
var elementWillAlwaysBeThere = jqs.get(0); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T22:24:10.583

我知道这可能不是你想要的。项目 zen 编码是关于使用类似 css 的语法来创建 dom 结构。所以我认为在那里寻找源代码会对你有很大帮助，即使你不是纯 CSS 选择器。 `div#wrapper>ul#imageSlider>li.image$*3`编译为：

```
<div id="wrapper">
    <ul id="imageSlider">
        <li class="image1"></li>
        <li class="image2"></li>
        <li class="image3"></li>
    </ul>
</div> 
```

因此，如果您在哪里使用 jQuery 端口，您可以 `$.zc("div#my-id.my-class")`再次执行您的示例，从而导致

```
<div id="my-id" class="my-class"></div> 
```

快乐源读

# c# - 将图像转换为 DDS

> ID：14468864
> 
> 赞同：1
> 
> 时间：2013-01-22T22:02:11.507
> 
> 标签：c#, windows-phone-8

我需要做的是在 WP8 中将图像从 jpg 转换为 dds。

我找到了几个库，但不幸的是，它们都不是为 WP8 构建的（例如[DevIL.Net](http://code.google.com/p/devil-net/)

有没有人有任何建议如何去做？

# python - 如何遍历列表理解中的子元素？

> ID：14468865
> 
> 赞同：1
> 
> 时间：2013-01-22T22:02:12.787
> 
> 标签：python, list

我现在有代码尝试让我按任意深度的键（如 mongo）对字典进行排序，但它要求我硬编码键的深度。

```
#This is the code for inside the function, you need to make a function to receive the  arguments
#and the dictionary. the arguments should be listed in order of layers. It then splits the argument string
#at the "." and assigns to each of the items.From there it should return the "l[]".
#you need to set it up to pass the arguments to these appropriate spots. so the list of dicts goes to
#list and the arguments go to argstring and it should be taken care of from there.

#splitting the argument
argstring="author.age"
arglist = argstring.split(".")

x=(5-len(arglist))#need to set this number to be the most you want to accept
while x>0:
    arglist.append('')
    x-=1

#test list
list = [
{'author' : {'name':'JKRowling','age':47,'bestseller':{'series':'harrypotter','copiessold':12345}}},

{'author' : {'name':'Tolkien','age':81,'bestseller':{'series':'LOTR','copiessold':5678}}},

{'author' : {'name':'GeorgeMartin','age':64,'bestseller':{'series':'Fire&Ice','copiessold':12}}},

{'author' : {'name':'UrsulaLeGuin','age':83,'bestseller':{'series':'EarthSea', 'copiessold':444444}}}
]
l=[]#the list for returning

#determining sort algorythm
l = sorted(list, key=lambda e: e[arglist[0]][arglist[1]])#need add as many of these as necesarry to match the number above
print() 
```

这可行，但必须手动指定 arglist 中的参数似乎很愚蠢。如果我需要 5 深，我需要手动指定 e 5 次。有没有办法使用列表理解或 for 循环来自动包含任意元素深度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T22:05:10.043

使用[`reduce()`](http://docs.python.org/2/library/functions.html#reduce)：

```
sorted(list, key=lambda e: reduce(lambda m, k: m[k], argslist, e)) 
```

`reduce()`接受一个函数、一个输入列表和一个可选的初始值，然后将该函数重新应用于下一个元素和最后一次调用的返回值（从初始值开始）。因此，它在从 中获取`m[k0][k1][k2]..[kn]`连续`k`值的地方运行`argslist`。

简短演示：

```
>>> e = {'author' : {'name':'JKRowling','age':47,'bestseller':{'series':'harrypotter','copiessold':12345}}}
>>> argslist = ['author', 'age']
>>> reduce(lambda m, k: m[k], argslist, e)
47 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:25:57.413

使用for循环遍历args没有错

```
>>> e = {'author' : {'name':'JKRowling','age':47,'bestseller':{'series':'harrypotter','copiessold':12345}}}
>>> argslist = ['author', 'age']
>>> result = e
>>> for arg in argslist:
...     result = result[arg]
... 
>>> result
47 
```

这种方式真的很容易调试，可以放`try/except`, `print`, 断点等。

# php - PHP包含在最后添加VARS的语句？

> ID：14468872
> 
> 赞同：0
> 
> 时间：2013-01-22T22:02:37.340
> 
> 标签：php, variables, include, var

我试图在“**包含**”的末尾添加一些变量。这可能吗？

这是不起作用的代码：

```
include('login.php?' . "message=used"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T22:04:09.390

您不需要包含查询字符串。包含/需要基本上将包含的代码放在适当的位置。只需在包含文件之前声明包含所需的任何变量：

```
$message = 'used';
include('login.php); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T22:05:10.607

不，不是，你真的没有理由这样做，你看。您在包含之前定义的每个变量都可以从包含中获得。

```
$var = "Hello include";
include("login.php"); 
```

//包含.php

```
echo $var; 
```

将输出“Hello include”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T22:05:14.463

**不**，`include()`将参数作为文件名，所以当你使用`login.php?message=used`它时，它正在寻找`login.php?message=used.php`，这显然不存在。

您可以更改`.ini`文件设置`allow_url_include`，但这会带来潜在的安全问题，否则只需在包含文件之前声明您的变量。

# c++ - 图像轮廓检测错误：OpenCV、C++

> ID：14468875
> 
> 赞同：1
> 
> 时间：2013-01-22T22:02:46.853
> 
> 标签：c++, opencv

我正在尝试编写一个程序来在 C++ 环境中使用 OpenCV 检测图像中的轮廓。

它的问题是我没有收到编译错误，而是运行时错误。我不知道为什么; 我按照这本书和 OpenCV 文档来源构建了下面的代码，它应该可以正常工作，但它没有......关于什么可能是错误的任何想法......？

```
#include "iostream"
#include<opencv\cv.h>
#include<opencv\highgui.h>
#include<opencv\ml.h>
#include<opencv\cxcore.h>
#include <iostream> 
#include <string> 
#include <opencv2/core/core.hpp> // Basic OpenCV structures (cv::Mat)
#include <opencv2/highgui/highgui.hpp> // Video write

using namespace cv;
using namespace std;

Mat image; Mat image_gray; Mat image_gray2; Mat threshold_output;
int thresh=100, max_thresh=255;

int main(int argc, char** argv) {

//Load Image
image =imread("C:/Users/Tomazi/Pictures/Opencv/ayo.bmp");

//Convert Image to gray & blur it
cvtColor( image, 
    image_gray, 
    CV_BGR2GRAY );

blur( image_gray, 
    image_gray2,
    Size(3,3) );
//Threshold Gray&Blur Image
threshold(image_gray2, 
    threshold_output, 
    thresh, 
    max_thresh, 
    THRESH_BINARY);

//2D Container
vector<vector<Point>> contours;

//Fnd Countours Points, (Imput Image, Storage, Mode1, Mode2, Offset??)
findContours(threshold_output,
    contours, // a vector of contours
    CV_RETR_EXTERNAL, // retrieve the external contours
    CV_CHAIN_APPROX_NONE,
    Point(0, 0)); // all pixels of each contours    

// Draw black contours on a white image
Mat result(threshold_output.size(),CV_8U,Scalar(255));

drawContours(result,contours,
    -1, // draw all contours
    Scalar(0), // in black
    2); // with a thickness of 2

    //Create Window
char* DisplayWindow = "Source";
namedWindow(DisplayWindow, CV_WINDOW_AUTOSIZE);
imshow(DisplayWindow, contours);

waitKey(0);
return 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:40:03.623

我敢打赌，您使用的是 MSVC IDE。无论如何，您的代码有很多问题，我已经在 Stackoverflow 上介绍了其中的大部分问题。他们来了：

*   [逃脱斜线](https://stackoverflow.com/questions/9877949/opencv-2-3-1-unable-to-read-image/9878512#9878512)
*   [安全编码并检查调用的返回](https://stackoverflow.com/questions/8743424/cvmat-gives-error-with-visual-c-express-2010/8758239#8758239)
*   [Visual Studio 如何在运行时加载文件](https://stackoverflow.com/a/10875594/176769)

我怀疑你的问题是`imread()`失败，因为它没有找到文件。上面的链接将帮助您解决这个问题。

# c# - 有什么方法可以禁用特定项目/命名空间/什么的智能感知？

> ID：14468877
> 
> 赞同：6
> 
> 时间：2013-01-22T22:02:57.933
> 
> 标签：c#, .net, visual-studio, visual-studio-2012, intellisense

除了在所有 Visual Studio 中禁用智能感知之外，还有其他方法可以在任何级别执行此操作吗？只是想确认/否认对其在我们一些过于庞大的项目/解决方案中的表现的怀疑，同时将其保留在我们真正关心的其他领域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:05:01.443

AFAIK 没有办法选择性地禁用 Intellisense。尝试完全禁用它，看看是否会有很大的不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:02:27.610

我注意到我的工作机器上的 Visual Studio 速度变慢，安装了几个 VS 扩展，如拼写检查器。禁用它们有帮助。

# .net - 水平堆积条形图

> ID：14468879
> 
> 赞同：0
> 
> 时间：2013-01-22T22:03:03.077
> 
> 标签：.net, visual-studio-2012, reportviewer, rdlc

我正在 Visual Studio 2012 中开发一个新的 RDLC 图表报告，我希望它看起来与[此处](http://www.google.com/imgres?um=1&hl=en&sa=N&tbo=d&biw=1920&bih=979&tbm=isch&tbnid=uZ99WySJgD1hcM%3a&imgrefurl=http://support2.dundas.com/onlinedocumentation/webchart2005/dcStacked_Column_Chart.html&docid=EWW6NLQkMYcv8M&imgurl=http://support2.dundas.com/onlinedocumentation/webchart2005/ChartType_Images/StackedColumnChart.png&w=404&h=326&ei=owv_UOK3EuuM0QGrr4DIBQ&zoom=1&iact=rc&dur=436&sig=100790038594854775489&page=1&tbnh=134&tbnw=166&start=0&ndsp=51&ved=1t:429,r:3,s:0,i:94&tx=83&ty=91)的报告相似。

我在 Visual Studio 中看到了许多不同类型的可用图表，但没有看到堆积条形图。这只是 Visual Studio 2012 中缺少的，还是我只是没有看到它？最终，我想要完成的是在水平堆叠的条形图中显示百分比值。

有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:06:59.760

找到它 -- （选择图表类型 --> 条形图 --> 100% 堆积条形图）。它就在我面前！

# android - XML 中 setTag(key, value) 的等价性

> ID：14468882
> 
> 赞同：8
> 
> 时间：2013-01-22T22:03:15.640
> 
> 标签：android, xml, view

`setTag(key)`我可以在我的 Android 布局文件中使用等价，如下所示：

```
 <EditText android:id="@+id/passwordEdit"
         android:tag="key"
         android:inputType="textPassword"/> 
```

我想`setTag(key, value)`在我的 xml 中使用等价的。

是否可以？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-07-04T08:55:18.320

我参加聚会有点晚了......但无论如何，如果您使用 api 级别 21 或更高级别，您可以从 xml 执行此操作。我不确定内存泄漏问题是否仍然存在。

```
<Button
android:layout_width=match_parent
android:layout_height=wrap_content
android:text="New button" >
     <tag android:id="SomeId" android:value="SomeValue" />
</Button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-20T07:43:55.490

有这个： `<tag android:id="..." android:value="..."/>`

# javascript - 在高度垂直对齐和绝对定位的 div 时遇到问题：自动容器

> ID：14468885
> 
> 赞同：0
> 
> 时间：2013-01-22T22:03:42.083
> 
> 标签：javascript, css, responsive-design

我正在尝试垂直对齐绝对定位的 div 中的文本块，该 div 位于最大宽度为 100% 且高度为 auto 的图像上（用于响应式布局）。如何垂直对齐文本块，使其在整个缩放过程​​中保持垂直对齐？我怀疑我需要使用某种 javascript，但我不确定。任何帮助是极大的赞赏。

[http://jsfiddle.net/8Jjs8/](http://jsfiddle.net/8Jjs8/)

```
<div id="container">
    <div class="slider">
        <ul class="slides">
            <li class="slide">
                <img src="http://awsassets.panda.org/img/scr_239815_362780.jpg" class="image">
                    <div class="caption">
                        <div class="caption-inside">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                        </div>
                    </div>
             </li>
        </ul>
    </div>
</div>

#container {
    max-width: 600px;
    max-height: 400px;
    margin: 0 auto;
    position: relative;
}

.slider {
    position: relaitve:
    width: 100%;
}

ul.slides {
    list-style: none;
    margin: 0;
    padding: 0;
}

li.slide {
    position: relative;
    display: block;
}

.image {
    max-width: 100%;
    height: auto;
}

div.caption {
    position: absolute;
    bottom: 0;
    left: 0;
    margin: 0;
    padding: 0;
}

div.caption-inside {
    background: rgba(255,255,255,.5);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:36:37.917

这将使您成为其中的一部分，但高度将成为一个问题。

```
div.caption {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
    height: 30%;
    margin: auto;
} 
```

我知道有一些新的 CSS 特性会让这一切变得更容易，但现在你可能不得不忍受这些限制或转向 js。

# multithreading - Matlabpool 线程数与核心数

> ID：14468886
> 
> 赞同：7
> 
> 时间：2013-01-22T22:03:44.713
> 
> 标签：multithreading, matlab, multicore

我有一台笔记本电脑正在`Ubuntu`运行`Intel(R) Core(TM) i5-2410M CPU @ 2.30GHz`。根据`Intel`上述处理器的网站（位于[此处](http://ark.intel.com/products/52224/Intel-Core-i5-2410M-Processor-3M-Cache-up-to-2_90-GHz)），该处理器有两个内核，一次可以并行运行 4 个线程（因为虽然它有 2 个物理内核，但它有 4 个逻辑内核）。

当我开始时`matlabpool`，它从`local`配置开始，并说它已连接到 2 个实验室。我想这意味着它可以并行运行 2 个线程。难道不知道CPU实际上可以并行运行4个线程吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T22:41:41.103

根据我的经验，默认情况下，`local`配置`matlabpool`使用机器拥有的物理内核数，而不是逻辑内核数。因此，在您的机器上，`matlabpool`仅连接到两个实验室。

但是，这只是一个设置，可以使用以下命令覆盖：

```
matlabpool poolsize n 
```

其中`n`是 1 到 12 之间的整数，表示您希望 Matlab 使用的实验室数量。

现在我们来看看有趣的一点，感谢@RodyOldenhuis 在评论中的快速课程，我可以更好地回答。

超线程意味着给定的物理内核可以同时有两个线程运行。当然，它们不能从字面上同时处理。这个想法更像这样：如果其中一个线程在将任务分配给核心时效率低下，那么核心可能会出现一些“停机时间”。第二个线程可以利用这个“停机时间”来完成一些工作。

根据我的经验，Matlab 在将线程分配给内核时通常很有效，因此，如果有一个 Matlab 线程（即一个实验室）通过它，内核可能只有很少的“停机时间”，因此对内核的优势很小。超线程。我的台式机是 core-i7，有 4 个物理核心，但有 8 个逻辑核心。`parfor`但是，我注意到运行具有 4 个实验室和 8 个实验室的循环之间几乎没有区别。事实上，由于与初始化额外实验室相关的启动成本，8 个实验室通常会更慢。

当然，这可能会因其他外部因素而变得复杂，例如您可能同时向 Matlab 运行的其他程序。

总之，我的怀疑是，即使你可以强制 Matlab 初始化 4 个实验室（甚至 12 个实验室），你也不会看到超过 2 个实验室的加速，因为 Matlab 通常在将任务分配给处理器。

# ios - gpus_ReturnNotPermittedKillClient 在应用程序后台运行时与 MKMapView 引发错误

> ID：14468888
> 
> 赞同：5
> 
> 时间：2013-01-22T22:03:45.803
> 
> 标签：ios, opengl-es, ios6, mkmapview

在网上进行了一些调查，我注意到`gpus_ReturnNotPermittedKillClient`当应用程序在后台运行时触发 OpenGL 操作时会抛出异常。我目前正在从事一个涉及地图视图和叠加层的项目（使用 Apple 的[Breadcrumb 示例代码](http://developer.apple.com/library/ios/#samplecode/Breadcrumb/Introduction/Intro.html)）。这些操作在主线程上执行，但是当地图视图被初始化或视图被推送到屏幕上时，应用程序可能会进入后台。

我还使用定位服务通过 GPS 检索点，但除非我们在前台，否则我不会更新叠加层。

据我了解，自 iOS 6 以来，MKMapView 现在是使用 OpenGL 创建的吗？如果是这种情况，那么绘制叠加层也可以通过 OpenGL 吗？这可以帮助解释为什么我一直随机收到此错误。

我听说过一些取消所有 OpenGL 操作的方法，例如调用`glFinish()`和`applicationDidEnterBackground`或`applicationWillResignActive`使用`[[CCDirector sharedDirector] pause]`. 考虑到这一点，使用 MKMapView/MKOverlayView 消除任何 OpenGL 绘图的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T15:04:35.033

在尝试了多种解决方案后，我意识到导致此崩溃的原因是地图视图框架的调整，该框架在地图分配后几秒钟被触发。状态栏被下拉，地图的框架向下动画了几个像素。因此，必须重新绘制地图（据说），如果此动画在背景中发生，则会导致崩溃。

我现在跟踪与应用程序的活动状态相关的状态栏状态，并且仅在应用程序状态为`UIApplicationStateActive`. 完成此操作后，我再也没有崩溃过。

# windows-8 - Windows 8 MessageWebSocket http 请求垃圾

> ID：14468894
> 
> 赞同：0
> 
> 时间：2013-01-22T22:04:20.973
> 
> 标签：windows-8, websocket, c++-cx

我正在开发一个 Windows 8 应用程序，它使用 node.js/socket.io 与 node.js 服务器通信，并且遇到了一堆连接问题。我决定运行一个 tcp 嗅探器应用程序（microsoft network monitor 3.4），并注意到在发送 http 请求之前，我的字符串中有一堆垃圾：

`C8 D7 19 87 09 1C C8 60 00 13 8C FA 08 00 45 00 00 C3 37 78 40 00 80 06 00 00 C0 A8 01 71 17 17 5C 67 C2 4F 01 BB 06 1A 36 71 A2 8B 48 C7 50 18 04 00 36 4D 00 00 47 45 54 20 2F 20 48 54 54 50 2F 31 2E 31 0D 0A 53 65 63 2D 57 65 62 53 6F 63 6B 65 74 2D 4B 65 79 3A 20 76 46 46 30 4F 4C 2F 55 63 53 49 6E 6F 70 46 67 52 69 6F 52 73 77 3D 3D 0D 0A 43 6F 6E 6E 65 63 74 69 6F 6E 3A 20 55 70 67 72 61 64 65 0D 0A 55 70 67 72 61 64 65 3A 20 57 65 62 73 6F 63 6B 65 74 0D 0A 53 65 63 2D 57 65 62 53 6F 63 6B 65 74 2D 56 65 72 73 69 6F 6E 3A 20 31 33 0D 0A 48 6F 73 74 3A 20 32 33 2E 32 33 2E 39 32 2E 31 30 33 3A 34 34 33 0D 0A 0D 0A È×.‡..È`..Œú..E..Ã7x@.€...À¨.q..\gÂO.»..6q¢‹HÇP...6M..GET / HTTP/1.1..Sec-WebSocket-Key: vFF0OL/UcSInopFgRioRsw==..Connection: Upgrade..Upgrade: Websocket..Sec-WebSocket-Version: 13..Host: 192.168.1.1:443....`（在大多数情况下，点是 \r\n）

虽然我使用的是 443 端口，但这不是一个安全的 websocket——我被迫使用 443，因为一些智能手机只允许 websocket 在该端口上创建套接字连接。

在 C++ 中，我正在创建 websocket，如下所示：

```
void Websocket::Connect(Platform::String ^host)
{
  if ( this->socket != nullptr ) return;
  try
  {
    Uri^ address = ref new Uri(host);
    readBuffer = ref new Buffer(1000);
    this->socket = ref new MessageWebSocket();
    this->socket->Control->MessageType = SocketMessageType::Utf8;
    this->socket->Control->MaxMessageSize = 512;
    this->socket->Closed += ref new TypedEventHandler<IWebSocket^, WebSocketClosedEventArgs^>( this, &Websocket::ServerClosed );
    this->socket->MessageReceived += ref new TypedEventHandler<MessageWebSocket^, MessageWebSocketMessageReceivedEventArgs^>( this, &Websocket::MessageRecv );
    create_task(this->socket->ConnectAsync(address)).then([this](task<void> previousTask)
    {
      try
      {
        concurrency::task_status status = previousTask.wait();
        switch( status ) {
        case concurrency::task_status::completed:
          this->connected = true;
          break;
        default:
          socketErrorString = ref new Platform::String( L"Connection was cancelled" );
        }
      }
      catch(Exception^ exception)
      {
        this->connected = false;
        socketErrorString = ref new Platform::String( exception->Message->Data() );
        this->socket = nullptr;
      } catch( ... ) {
        this->connected = false;
        socketErrorString = ref new Platform::String( L"Unknown exception caught (inside connect)" );
        this->socket = nullptr;
      }
    });
  } catch( Exception ^exc ) {
    this->connected = false;
    socketErrorString = exc->Message; //ref new Platform::String( L"Unknown exception caught (outside connect)" );
    this->socket = nullptr;
  }
} 
```

我在代码中看不到任何类型的问题，所以我希望其他几组眼睛也能看到。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:17:45.947

What you've pasted appears to be an [Ethernet frame](http://en.wikipedia.org/wiki/Ethernet_frame), but with 8 bytes stripped (7-byte preamble and 1-byte Start Frame Delimiter) because the network interface doesn't receive it.

The first fourteen bytes are the [Ethernet header](http://en.wikipedia.org/wiki/Ethernet_frame#Structure): 6 bytes for the destination MAC address, 6 bytes for the source MAC address, and 2 bytes for the [EtherType](http://en.wikipedia.org/wiki/Ethertype), with `08 00` denoting that it is IPv4 packet.

The Ethernet payload follows the Ethernet header and, in this case, is an [IP datagram](http://en.wikipedia.org/wiki/IPv4), so it starts with an [IP header](http://en.wikipedia.org/wiki/IPv4#Header) at offset 14 with byte `45` denoting an IPv4 header with a header length of 20 bytes. At offset 23 you'll find the IP protocol of `06` denoting TCP. At offset 26 you'll find the source IP address (`C0 A8 01 71`, i.e. 192.168.1.113). At offset 30 you'll find the destination IP address.

The IP payload follows the IP header, and, in this case, it is a [TCP segment](http://en.wikipedia.org/wiki/Transmission_Control_Protocol) starting with a [TCP header](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#TCP_segment_structure) at offset 34 with bytes `C2 4F` denoting a source port of 49743 and bytes `01 BB` denoting a destination port of 443\. At offset 46 you have `50` denoting a TCP header length of 20 bytes.

The TCP payload follows the TCP header, and, in this case, is [HTTP](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol) starting at offset 54 with bytes `47 45 54 ...` being "GET...".

This request packet appears to be wellformed. I believe your problem lies elsewhere.

# xaml - 如何在 C# 中操作项目

> ID：14468895
> 
> 赞同：0
> 
> 时间：2013-01-22T22:04:20.597
> 
> 标签：xaml, listview, gridview, visual-studio-2012, windows-store-apps

我正在使用 and 制作一个Windows应用**商店应用程序**。如何操作 a或 a中的单个项目？`C#``XAML``GridView``ListView`

根据某些逻辑条件，我需要加载或不加载这些容器中的项目。我已经尝试使用该项目的属性`Visibility.Collapsed`和`Visibility.Visible`，但这只是隐藏或显示该项目，它仍然加载在`GridView`/`ListView`中，并且是可选择的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:52:48.337

我认为你的意思是隐藏你的`GridViewItem`而不是保持空间。您只需将`GridView`'s`ItemsPanel`替换为`StackPanel`or `VirtualizingStackPanel`。

```
<GridView>
    <GridView.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel />
        </ItemsPanelTemplate>
    </GridView.ItemsPanel>
</GridView> 
```

# ios - XCode 4.5 中的代码签名身份

> ID：14468896
> 
> 赞同：0
> 
> 时间：2013-01-22T22:04:26.783
> 
> 标签：ios, xcode, signing

我在 Xcode 中开始构建设备时收到此消息；代码签名错误：找不到与应用程序标识符“vindfyrar2”匹配的有效配置文件

我已经完成了所有证书/配置文件验证过程。我在 xcode 管理器中的设备上安装了有效的配置文件。我认为我的问题是我在目标或项目构建设置中看不到任何配置文件 - >代码签名身份。

请看下面的图片！

![http://i.stack.imgur.com/qu9M4.png](../Images/e6d2bf80a886074deb8c1fa6642b0208.png) ![http://i.stack.imgur.com/q9Njf.png](../Images/e035877047f4553fa49a63767ef8ea66.png)

有人请有时间帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:08:38.027

每当我遇到这个问题时，我发现重新启动 Xcode 并在您的项目（不是目标）构建设置中选择不同的配置文件将导致列表刷新。如果您在任何地方都看不到配置文件，请从您的 Apple 开发人员中心再次下载它们并将它们拖到管理器的 Provisioning Profiles 窗格中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:39:04.177

在项目构建设置中，将 Code Signing Identity 设置为 Automatic Profile Selector (iPhone Developer)。现在再次检查代码签名菜单，它应该显示“（当前匹配：iPhone 开发人员：Jan Gifvars (xxxx) in 'iOS Team Provisioning Profile:*)”。如果没有，您需要确保您拥有正确的私钥、证书和配置文件。遵循本技术说明中的所有步骤。 [https://developer.apple.com/legacy/library/technotes/tn2250/_index.html](https://developer.apple.com/legacy/library/technotes/tn2250/_index.html)

# mobile-safari - 如何编写 Mobile Safari 将自动填充的 Web 表单？

> ID：14468909
> 
> 赞同：0
> 
> 时间：2013-01-22T22:05:03.307
> 
> 标签：mobile-safari

我一直无法找到开发人员的教程，只有无尽的教程向用户展示如何通过 Google 搜索打开该功能。有人愿意分享这是如何实现的吗？这是我的代码的一个小例子..没有自动填充（还）。我确实填写了我的联系卡并打开了该选项。

```
<div style='display:block;'> <
 <input name='first_name' id='firstName' type='text' />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:09:50.373

如果你用表单标签包装它就可以了。令人抓狂的是，没有任何关于此功能的文档。

# objective-c - 我的 tableview 没有被调用不会在断点处崩溃

> ID：14468911
> 
> 赞同：0
> 
> 时间：2013-01-22T22:05:10.043
> 
> 标签：objective-c, tableview, subclass, breakpoints, tbxml

好的，所以我一直在摆弄一些 iOS 开发，我对此很陌生。通常更多的是 PHP 和 JavaScript 人。但这是我的问题......在我的应用程序中，我正在创建从本地 xml 文件中提取好友列表（它将指向服务器上生成用户好友列表的 php 页面，但为了调试和开发的简单起见，我是使用本地。）

我有一个视图控制器（storybaord），当我单击“朋友”时加载，截至目前，视图加载但没有数据，在调试器中我可以看到它从 XML 中提取数据，所以我想，好吧也许 TableView 永远不会被调用，所以我在

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

但是app还是继续加载页面，

回顾一下，我有一个视图控制器，带有一个搜索栏、工具栏和一个表格视图，表格视图有一个占位符单元格，给定标识符 Cell，这里是 friendsListTableViewController.h 的编码

```
//
//  friendsListTableViewController.h
//  @ME
//
//  Created by Aaron Russell on 1/22/13.
//  Copyright (c) 2013 Aaron Russell. All rights reserved.
//

#import <UIKit/UIKit.h>
#import "TBXML.h"
@interface friendsListTableViewController : UIViewController <UITableViewDataSource, UITableViewDelegate, NSObject>{
    NSMutableArray *friendList;
    TBXML * tbxml;
    IBOutlet UIImage *imageFile;
}
@property (nonatomic, strong) NSMutableArray *_friends;
@property (nonatomic, strong) NSString *lname;

@end 
```

这是friendsListTableViewController.m文件

```
//
//  friendsListTableViewController.m
//  @ME
//
//  Created by Aaron Russell on 1/22/13.
//  Copyright (c) 2013 Aaron Russell. All rights reserved.
//

#import "friendsListTableViewController.h"

@interface friendsListTableViewController ()

@end

@implementation friendsListTableViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)viewDidLoad {
    [super viewDidLoad];

    //USED TO CONNECT TO SERVERS XML
    //    NSData *xmlData = [[NSData alloc]initWithContentsOfURL:[NSURL URLWithString:@"www.soontobesite.com"]];
    //tbxml = [[TBXML alloc]initWithXMLData:xmlData];
    NSString *xmlData = [[NSBundle mainBundle] pathForResource:@"friendlist" ofType:@"xml"];
    NSData *data = [[NSData alloc] initWithContentsOfFile:xmlData];
    tbxml = [[TBXML alloc]initWithXMLData:data];

    //strings
    // Obtain root element
    TBXMLElement * root = tbxml.rootXMLElement;
    if (root)
    {
        TBXMLElement * elem_PLANT = [TBXML childElementNamed:@"friend" parentElement:root];
        while (elem_PLANT !=nil)
        {
            TBXMLElement * elem_BOTANICAL = [TBXML childElementNamed:@"fname" parentElement:elem_PLANT];
            NSString *botanicalName = [TBXML textForElement:elem_BOTANICAL];
            [friendList addObject:botanicalName];
            elem_PLANT = [TBXML nextSiblingNamed:@"friend" searchFromElement:elem_PLANT]; //IF I CALL BREAKPOINT ON THIS LINE THE SIMULATOR BREAKS
        }

        //TBXMLElement *fname = [TBXML childElementNamed:@"fname" parentElement:elem_PLANT];
    }

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [friendList count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [friendList objectAtIndex:indexPath.row];

    return cell;
}

/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

/*
// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
}
*/

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

@end 
```

# //编辑//

多亏了下面评论中列出的一些建议，在它不会在 numberOfSectionsInTableView 或 numberOfRowsInSection 中断之前，我走得更远了，但是现在当我在 numberOfSectionsInTableView 或 numberOfRowsInSection 上中断但仍然不是 cellForRowAtIndexPath 时它会中断

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T02:03:38.990

您忘记分配`friendList`实例变量。在开始时`viewDidLoad`（甚至在初始化程序中更好）执行以下操作：

```
friendList = [[NSMutableArray alloc] initWithCapacity:0]; 
```

如果`friendList`没有初始化它有一个`nil`值。在 Objective-C 中发送消息`nil`不会使应用程序崩溃，它只是不做任何事情。另请参阅[此 SO question](https://stackoverflow.com/questions/1074321/what-does-sending-a-message-to-nil-mean-and-why-is-it-a-special-case)。

在您的代码中，调用`[friendList addObject:botanicalName]`根本不执行任何操作。稍后，当您调用`[friendList count]`in时`numberOfRowsInSection`，您将向表视图返回 0（零）。由于表视图认为没有行，它永远不会调用`cellForRowAtIndexPath`.

# phantomjs - 使用 behat 测试本地 PHP Web 应用程序时，Sahi + PhantomJS 失败

> ID：14468916
> 
> 赞同：0
> 
> 时间：2013-01-22T22:05:14.703
> 
> 标签：phantomjs, behat, headless-browser, mink, sahi

我在测试设置了 behat+sahi+phantomjs 的本地托管 Web 应用程序时遇到问题。

*   我只用 behat+sahi+chrome 运行了完整的套件，效果很好
*   我还针对运行良好的现场 stie 测试了一个小样本 behat 测试

当我将 base_url 指向本地托管的应用程序或部署了该应用程序的服务器时，问题似乎都会发生

像这样简单的事情：

```
@javascript
Scenario: Get to the login page
        Given I am on "/login"
        And I should see "Email Address"
        And I should see "Password" 
```

输出结果：

```
Given I am on "/login"                     # FeatureContext::visit()
And I should see "Email Address"           # FeatureContext::assertPageContainsText()
  Command execution time limit reached: `_sahi.setServerVarPlain('___lastValue___50ff0bcf186da', _sahi._getText(_sahi._byXPath("//html")))` 
```

我正在使用此处详述的设置：http: [//shaneuckland.co.uk/2012/11/headless-behatmink-testing-with-sahi-and-phantomjs/](http://shaneauckland.co.uk/2012/11/headless-behatmink-testing-with-sahi-and-phantomjs/)

这是配置问题吗？还是因为该应用程序也托管在本地主机上？

我可以尝试如何进一步解决此问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:04:28.617

> 当我将 base_url 指向本地托管的应用程序或部署了该应用程序的服务器时，问题似乎都会发生

Phantomjs 似乎没有使用 localhost 的代理。您可以尝试改用您的机器名称。您确定它也不适用于您的服务器吗？是否可以发布更多细节来重现这个？

# graph - 是否可以在 Neo4J 的密码查询语言的 Where 子句中引用自定义代码？

> ID：14468923
> 
> 赞同：0
> 
> 时间：2013-01-22T22:05:59.773
> 
> 标签：graph, nosql, neo4j

是否可以使用 Neo4J 的密码查询语言（或另一种声明性语言）但仍引用自定义代码片段（例如，基于 ElasticSearch/Lucene 搜索的结果执行自定义 WHERE 子句？）

如果其他 GraphDB 有支持此的声明性语言，请拍摄。我绝不会被 Neo4J 所束缚。

**背景：**

我正在研究是否将 Neo4J 包含在我当前的堆栈中，该堆栈在后端​​已经由 ElasticSearch、MongoDB 和 Redis 组成。

特别是 Redis 的快速集合交集功能，我可能会创建一些粗鲁的类似图形的查询。（尽管可能不如 graphDB 性能好）。我在定义 DSL 方面还有很长的路要走，需要支持的查询类型。

但是，我正在设计一个内容类型的 CMS，而我想用图形建模的这些内容类型之间的关系事先并不知道。

因此，填充所需的 Redis 集合（以 Mongo 作为源）以支持我基于 Contenttypes 及其在设计时未知的关系的所有查询的理想情况至少可以说是混乱的。希望你还在关注。

这使我得出结论，可能需要另一种解决方案，这就是为什么我特别关注 GraphDb'd 和 Neo4J （如果其他人可能更适合我的用例，请拍摄）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:21:56.197

如果您将内容类型建模为节点，则无需事先了解它们。

javascript 中的用户定义函数计划在今年晚些时候用于 cypher。

不过，您可以使用 gremlin 之类的语言在 groovy 中声明您的函数。

您可以将节点 ID 存储在 redis 中，然后将 redis 返回的 id 数组传递给密码查询以进行进一步处理。

```
start n=node({ids}) 
match n-[:HAS_TYPE]->content_type<-[:HAS_TYPE]-other_content
return content_type, count(*)
order by count(*) desc
limit 10

parameters: {"ids": [1,2,3,5]} 
```

# list - 在 Lisp 中，如何将给定元素添加到给定列表中的每个列表中？

> ID：14468925
> 
> 赞同：2
> 
> 时间：2013-01-22T22:06:01.270
> 
> 标签：list, functional-programming, lisp, common-lisp

这是我到目前为止所拥有的：

```
(defun append-all(x L)
  (if (null L)
    L   
    (cons (append (car L) x) (append-all x (cdr L))))
  )
) 
```

输出：

```
(append-all '3 '((1) (2 1) (2)))

((1 . 3) (2 1 . 3) (2 . 3)) 
```

想：

```
((1 3) (2 1 3) (2 3)) 
```

这是一个辅助函数，所以它是一个链表这一事实似乎给我带来了问题。

谢谢

编辑：固定递归调用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:08:08.717

在您的代码中，更改此部分：

```
(append (car L) x) 
```

对此：

```
(append (car L) (list x)) 
```

它以前不起作用，因为`append`应该接收两个*列表*作为参数，而不是列表和元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T22:52:50.843

```
(defun append-all (item list)
  "Appends ITEM to each sublist of LIST"
  (flet ((circular-list (item)
           (let ((list2 (list item)))
             (nconc list2 list2))))
    (mapcar #'append
            list
            (circular-list (list item))))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T22:19:09.343

如果您不想自己进行递归，这也应该有效：

```
(defun append-all (x L)
  (mapcar #'(lambda (l) (append l (list x))) L)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T03:18:07.560

我正在学习 clisp，但它可以工作。

```
(defun append-all (x L)
    (flet (
        (append-item (alist) (append alist (list x))))
        (mapcar #'append-item L)))

(print (append-all '3 '((1) (2 1) (2)))) 
```

# android - SpeechRecognizer 的精度 - Android

> ID：14468927
> 
> 赞同：2
> 
> 时间：2013-01-22T22:06:05.407
> 
> 标签：android, speech-recognition

抱歉我的英语很差... xD 我正在编写一些代码来使用 Android 的语音搜索。我已经宣布了这样的意图：

```
SpeechRecognizer sr;
Intent intent_listener;
intent_listener = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);        
intent_listener.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
intent_listener.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE,getPackageName());
intent_listener.putExtra(RecognizerIntent.EXTRA_SPEECH_INPUT_COMPLETE_SILENCE_LENGTH_MILLIS,0);

sr.startListening(intent_listener); 
```

然后我实现了*RecognitionListener*类，并在*onResult*方法上放了一些代码。这项工作，但它不准确，有时它不理解简单的短语。获得结果也需要很多时间......所以我尝试了可见框（您通常可以使用它来搜索手机上的内容），这非常完美。不是一回事吗？为什么其中一个比另一个更准确？我的参数有什么问题吗？我正在使用 android 4.0.3。非常感谢大家！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:30:47.817

不要设置`EXTRA_SPEECH_INPUT_COMPLETE_SILENCE_LENGTH_MILLIS`为`0`，而是根本不要设置它。

要回答你的问题，“可见框”`SpeechRecognizer`并不一定是“同一个东西”。它们可能并且可能经常是，但也可能存在由完全不同的语音识别提供商实现的情况。

# magento-1.7 - 将菜单项添加到管理菜单

> ID：14468928
> 
> 赞同：0
> 
> 时间：2013-01-22T22:06:09.273
> 
> 标签：magento-1.7, magento

我正在尝试向 Magento 管理区域添加几个菜单项。以下代码显示“本地访问 IP”子菜单项，但不显示“远程访问日志”子菜单项。

```
<?xml version="1.0"?>
<config>
 <menu>
    <VMR_Whitelist_menu translate="title" module="VMR_Whitelist">
        <title>VMR Modules</title>
        <sort_order>300</sort_order>
        <children>
            <!-- child items go here -->
            <subitem translate="title" module="VMR_Whitelist">
                <title>Remote Access Logs</title>
                <sort_order>9</sort_order>
                <action>adminhtml/whitelist/logs</action>
            </subitem>                
            <subitem translate="title" module="VMR_Whitelist">
                <title>Local Access IPs</title>
                <sort_order>10</sort_order>
                <action>adminhtml/whitelist/local</action>
            </subitem>
        </children>
    </VMR_Whitelist_menu>
 </menu>
  <acl>
    <resources>
        <admin>
            <children>
                <VMR_Whitelist_menu translate="title" module="VMR_Whitelist">
                    <title>VMR Modules</title>
                    <sort_order>300</sort_order>
                    <children>
                        <!-- child items go here -->
                        <subitem translate="title" module="VMR_Whitelist">
                            <title>Remote Access Logs</title>
                            <sort_order>9</sort_order>
                        </subitem>
                        <subitem translate="title" module="VMR_Whitelist">
                            <title>Local Access IP Write Access</title>
                            <sort_order>10</sort_order>
                        </subitem>
                    </children>
                </VMR_Whitelist_menu>
            </children>
        </admin>
    </resources>
</acl>
</config> 
```

任何关于为什么一个会出现而不是另一个的想法都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:12:27.937

```
<subitem translate="title" module="VMR_Whitelist"> 
```

项目名称不能在一个分支中重复。给它另一个名字。喜欢：

```
 <firstitem translate="title" module="VMR_Whitelist">
            <title>Remote Access Logs</title>
            <sort_order>9</sort_order>
            <action>adminhtml/whitelist/logs</action>
        </firstitem>                
        <seconditem translate="title" module="VMR_Whitelist">
            <title>Local Access IPs</title>
            <sort_order>10</sort_order>
            <action>adminhtml/whitelist/local</action>
        </seconditem> 
```

# json - 尝试在网页上访问 Twitter API 1.1 时出现 400 Bad Request

> ID：14468934
> 
> 赞同：0
> 
> 时间：2013-01-22T22:06:23.977
> 
> 标签：json, api, twitter

我正在尝试更新我在客户主页上构建的 Tweet Scroller。

www.xsp.com

我正在使用以下行来访问 api：

```
var url = 'https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=' + username + '&count=' + limit + '&callback=?'; //NEW API CALL V1.1'; 
```

其中用户名和限制是自定义设置变量。

这就是我在 Firebug 控制台中得到的：

```
https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=XSPGlob…&amp;count=5&callback=jQuery19005188902916852385_1358892149117&_=1358892149118 400 (Bad Request) 
```

我已经检查了 Twitter 文档。不知道我在这里做错了什么。有人有想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-23T00:00:49.000

我将假设您正在正确访问 API URL，因为我现在无法检查它（大声笑代理），但看起来用户名中有一个奇怪的字符，可能需要通过某些 URL 编码进行转义人物？

看起来您正在使用我不太熟悉的 javascript，但是在 java 中，如果 URL 确实不好，则会引发异常。没有javascript编译器可以检查这样的东西吗？

# java - java.nio.*Buffer：一次放一个元素与数组

> ID：14468935
> 
> 赞同：1
> 
> 时间：2013-01-22T22:06:34.683
> 
> 标签：java, android, nio

nio Buffer 系列 put 方法是否有很多开销？我有一些 FloatBuffers 和 ByteBuffers 需要容纳 4 到 8 个元素，并且这些值还没有保存在数组中。创建一个临时数组，填充它并调用一次 put 方法是否更有效，或者不打扰数组并为每个元素调用 put？

# objective-c - 禁用与“：”相关的自动缩进

> ID：14468936
> 
> 赞同：1
> 
> 时间：2013-01-22T22:06:36.463
> 
> 标签：objective-c, vim, macvim

我主要使用 VIM 在目标 C 中编程。

当你将一个命令分成多行时，VIM 有一个非常烦人的习惯，就是试图将你放入命令中的“：”排列起来。现在，很多程序员都重视这一点，我不是其中之一。我宁愿使用制表符缩进的命令而不是空格缩进的命令（这种类型的自动缩进会发生这种情况）。

举个例子：

```
[locationMapping addAttributeMappingsFromDictionary:@{
        @"id" : @"locationID",
        @"name" : @"name",
        @"address" : @"address",
        @"city" : @"city",
        @"state" : @"state",
        @"zipcode" : @"zipcode",
        @"country" : @"country",
        }]; 
```

对比

```
[locationMapping addAttributeMappingsFromDictionary:@{
                                             @"id" : @"locationID",
                                           @"name" : @"name",
                                        @"address" : @"address",
                                           @"city" : @"city",
                                          @"state" : @"state",
                                        @"zipcode" : @"zipcode",
                                        @"country" : @"country",
        }]; 
```

输入“：”时有什么方法可以禁用自动缩进？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T22:11:50.167

obj-c 文件类型似乎设置了一个`imap`for `:`to `*@<SNR>28_CompleteColon()`。您应该可以在自己的 ftplugin 中简单地删除它。

像这样的东西应该工作：

```
mkdir -p ~/.vim/after/ftplugin
echo ':iunmap <buffer> :' > ~/.vim/after/ftplugin/objc_no_colon.vim 
```

# java - 通过 printstream Java 写入文本文件时更改文本字体颜色

> ID：14468943
> 
> 赞同：0
> 
> 时间：2013-01-22T22:07:09.270
> 
> 标签：java, text, colors

我使用打印流将数组列表的内容写入文本文件。列表的一个元素看起来像这样：

名称：2D19 指纹：170 身份：Loop

我写它的方式是通过一个for循环

```
 ArrayList<String> array = new ArrayList<String>();
    for(int i=0; i<array.size(); array++){
         ps.println(array.get(i));
    } 
```

我想知道是否可以更改我写的任何文本的颜色。我尝试对此进行研究，但我看到的所有示例都涉及在 JTextArea 中编写，我不想这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T22:35:21.287

这取决于您打印的“媒体”。这个问题不是很清楚：您说您正在将字符串写入*文本文件*，因此那里没有颜色。

但是您可以在 HTML 文件中打印您的字符串并使用 HTML 语法来标记写入的文本，因此当您预览此类文件时，文本将被着色。

或者，如果您要打印到控制台，您可以使用 ANSI 转义码来表示颜色，这在 linux 上是开箱即用的。

# php - 在 php 语法中使用 ' 和 "

> ID：14468944
> 
> 赞同：0
> 
> 时间：2013-01-22T22:07:09.840
> 
> 标签：php, syntax, simplexml, php-5.2

> **可能重复：**
> [如何在 PHP 中获取有用的错误消息？](https://stackoverflow.com/questions/845021/how-to-get-useful-error-messages-in-php)

我已经开始了我的新年决议的一部分，并决定学习 php，作为其中的一部分，我试图解析一个 xml 提要，并回显包含在`<a>`标签中的事件的名称，将它们链接回 xml 提要上的事件页面地点。

我想我已经全部完成了，但我似乎不明白为什么这不起作用我只是得到一个空白页，如果有人能指出我正确的方向，那将不胜感激，干杯

```
<?php 
  // F1 W/H xml feed
  $xml = simplexml_load_file('http://whdn.williamhill.com/pricefeed/openbet_cdn?action=template&template=getHierarchyByMarketType&classId=5&marketSort=HH&filterBIR=N');

  foreach ($xml->response->williamhill->class->type as $type) {
    $type_attrib = $type->attributes();
    echo "<h2>".$type_attrib['name']."</h2>"; //Title - in this case f1 championship
} ?>

<ul>
  <?php 
      foreach($type->market as $event) {
          echo "<li>";
          echo "<a href="$event_attributes['url']">";
          echo $event_attributes['name'];
          echo "</a>";
          echo "</li>";
      }
  ?>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T22:11:28.220

```
echo "<a href="$event_attributes['url']">"; 
```

尝试将该行更改为

```
echo "<a href=\"".$event_attributes['url']."\">"; 
```

Php 解析器对此非常有趣。通常你选择一个并坚持下去，或者随意使用单引号和双引号。请记住，带有双引号的字符串会被解析为变量。

```
$hello = "Hello";
echo "$hello master"; 
```

是相同的

```
$hello ="Hello";
echo $hello.' master'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T22:14:21.827

当你测试你的 PHP 脚本时，你会发现打开错误很有用——然后 PHP 会告诉你为什么它没有显示任何东西：

```
error_reporting(E_ALL); 
```

通常，您会错过`;`或输入错误的变量名。

在您的情况下，错误在这里：

```
echo "<a href="$event_attributes['url']">"; 
```

你不小心用双引号结束了字符串，所以 PHP 认为字符串在这里结束：

```
echo "<a href=" 
```

这是使用单引号非常方便的地方，因为您的双引号不会关闭字符串。

```
echo '<a href="' . $event_attributes['url'] . '">'; 
```

PHP 中单引号和双引号的主要区别在于，双引号具有特殊的巧妙解析规则，而单引号则没有。例如：

```
$myVar = "BLAH";
echo "Example $myVar"; // Example BLAH
echo 'Example $myVar'; // Example $myVar 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T22:14:28.013

在你的无序列表中，你应该使用一个点来连接你的字符串，并像这样转义你的双引号：

```
echo "<a href=\"".$event_attributes['url']."\">"; 
```

代替

```
echo "<a href="$event_attributes['url']">"; 
```

您的示例抛出错误，因为您没有使用正确的字符串连接。但是，即使使用正确的 concat，它也会呈现为`<a href=http://someurl>`，并且您需要根据 html 标准添加双引号。因此，您必须双引号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T23:06:28.237

如果您不想在使用 a`'`或 a之间切换而感到困扰，`"`那么我建议使用 php 替代语法[php 替代语法](http://php.net/manual/en/control-structures.alternative-syntax.php)

使用给定的代码，它看起来像

```
<?php 
// F1 W/H xml feed
$xml = simplexml_load_file('http://whdn.williamhill.com/pricefeed/openbet_cdn?action=template&template=getHierarchyByMarketType&classId=5&marketSort=HH&filterBIR=N');

foreach ($xml->response->williamhill->class->type as $type) {
    $type_attrib = $type->attributes();
    echo "<h2>".$type_attrib['name']."</h2>"; //Title - in this case f1 championship
} ?>

<ul>
    <?php foreach($type->market as $event):?>
        <li>
            <a href="<?php echo $event_attributes['url']; ?>">
                <?php echo $event_attributes['name']; ?>
            </a>
        </li>
    <? endforeach;?>
</ul> 
```

这将带来的一个好处是它会产生更清晰的代码，因为您可以清楚地将您的`php`代码与您的代码区分开来`html`，这是以编写所有其他代码为代价的表示部分，以及`<?php ?>`其他人声称性能下降的代码。这是你的选择

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T22:10:41.330

改变

```
echo "<a href="$event_attributes['url']">"; 
```

为了

```
echo "<a href=".$event_attributes['url'].">"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T22:10:53.490

你错过了你的第二个时期`echo`，你有你的`$event_attributes['url']`

```
<?php 
  foreach($type->market as $event) {
      echo "<li>";
      echo "<a href=".$event_attributes['url'].">";
      echo $event_attributes['name'];
      echo "</a>";
      echo "</li>";
  } 
```

?>

我建议您启用错误日志，它可以让您知道任何脚本中存在问题的行。

# php - Doctrine 2.1.4/2.1.5 Unrecognized field 试图通过附加字段实现多对多

> ID：14468954
> 
> 赞同：1
> 
> 时间：2013-01-22T22:07:58.477
> 
> 标签：php, exception, orm, doctrine

我正在尝试使用 Doctrine 解决我的问题并使用附加字段实现多对多关联。

更详细 - 它看起来像这样：

人员 - Person_Project - 项目

*   一个人可以参与多个项目
*   几个人可以成为一个项目的一部分
*   人员具有项目特定的角色

这似乎与以下设置正常工作：

*   3 教义实体
*   人 -> OneToMany -> Person_Project
*   项目 -> OneToMany -> Person_Project

这些关联都是双向的，配置如下：

在 Person.php 中：

```
/**
 * @Id @GeneratedValue @Column(name="PersonenNr", type="integer")
 */
protected $id;

/**
 * @OneToMany(targetEntity="PersonProject", mappedBy="person", cascade={"PERSIST"})
 */
protected $personProjects = null;

public function __construct() {
    $this->personProjects = new ArrayCollection();
}

public function getProjects() {
    $projects = new ArrayCollection();
    foreach ($this->personProjects as $pp) {
        $projects->add($pp->project);
    }
    return $projects;
} 
```

在 Project.php 中：

```
/**
 * @Id @Column(name="ProjectId", type="string")
 */
protected $id;

/**
 * @OneToMany(targetEntity="PersonProject", mappedBy="project", cascade={"PERSIST"})
 */
protected $personProjects = null;

public function __construct() {
    $this->personProjects = new ArrayCollection();
} 
```

在 PersonProject.php 中：

```
/**
 * @Id
 * @ManyToOne(targetEntity="Person", inversedBy="personProjects")
 * @JoinColumn(name="PersonId", referencedColumnName="PersonId")
 */
protected $person = null;

/**
 * @Id
 * @ManyToOne(targetEntity="Project", inversedBy="personProjects")
 * @JoinColumn(name="ProjectId", referencedColumnName="ProjectId")
 */
protected $project = null; 
```

现在我的问题从使用它们开始。从数据库中检索到 Person-Object 后，尝试获取分配此人的任何项目，然后尝试访问该项目的任何属性，遇到以下错误：

```
Error in File: /usr/share/php/Doctrine/ORM/ORMException.php
Line: 60
Text: Unrecognized field:
Trace:
#0 /usr/share/php/Doctrine/ORM/Persisters/BasicEntityPersister.php(1231): Doctrine\ORM\ORMException::unrecognizedField('')
#1 /usr/share/php/Doctrine/ORM/Persisters/BasicEntityPersister.php(853): Doctrine\ORM\Persisters\BasicEntityPersister->_getSelectConditionSQL(Array, NULL)
#2 /usr/share/php/Doctrine/ORM/Persisters/BasicEntityPersister.php(568): Doctrine\ORM\Persisters\BasicEntityPersister->_getSelectEntitiesSQL(Array, NULL, 0)
#3 /tmp/DBProjectProxy.php(31): Doctrine\ORM\Persisters\BasicEntityPersister->load(Array, Object(DoctrineProxies\DBProjectProxy))
#4 /tmp/DBProjectProxy.php(41): DoctrineProxies\DBProjectProxy->__load()
#5 /home/[...]/project-data.html (12): DoctrineProxies\DBProjectProxy->getName()
... (just our internal call-hierarchy)
{main} 
```

在调试时，我可以看到检索到了正确的 Person_Project-Entities，但是所有项目都被 DoctrineProxies 替换了。一旦我尝试使用它们的任何属性，Doctrine 就会使用数据挂钩并初始化对象，但它会遇到前一个错误。

有人可以帮我吗？

如果需要任何进一步的输出/信息，请随时询问。

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:26:41.180

问题是由以下错误引起的：我们的数据库包含大写的列名，因此 Doctrine 的 BasicEntityPersister 中的第 1591 行找不到名为“projektkennung”的主键，因为它实际上被称为“Projektkennung”。

您应该始终输入区分大小写的列名！其他一切工作正常，只有深度调试才能帮助找出问题所在。

感谢@meze 试图帮助我:)

# java - 在不同的 Jpanel 中操作按钮

> ID：14468958
> 
> 赞同：0
> 
> 时间：2013-01-22T22:08:09.277
> 
> 标签：java, swing, oop, jpanel, jbutton

我有一个带有各种按钮的各种面板。一些按钮应该调用通过数组列表启动搜索的方法，其他按钮应该调用将信息发送到不同 JTextArea 框的方法。为每个按钮添加事件侦听器后，如何根据在我的 actionPerformed 方法中单击的按钮创建特定操作？下面是我的各种 gui 属性的代码，你可以看到有 3 个不同的 JPanel，每个 JPanel 的按钮需要执行不同的功能。我只需要知道如何确定单击了哪个按钮，以便将其链接到适当的方法（已经在另一个类中编写）。这需要if语句吗？如果我将它们公开，我的其他类是否可以访问 GUI 上的按钮，或者是否有更有效的方法来执行此操作。

```
JPanel foodOptions;
JButton[] button= new JButton[4]; //buttons to send selected object to info panel
static JComboBox[] box= new JComboBox[4];

JPanel search;
JLabel searchL ;
JTextField foodSearch;
JButton startSearch; //button to initialize search for typed food name
JTextArea searchInfo;

JPanel foodProfile;
JLabel foodLabel;
JTextArea foodInfo;
JButton addFood; //but to add food to consumed calories list

JPanel currentStatus;
JLabel foodsEaten;
JComboBox foodsToday;
JLabel calories;
JTextArea totalKCal;
JButton clearInfo; //button to clear food history 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T23:02:05.070

根据人们的评论，您需要使用某种类型的侦听器，这是一个真正的基本示例来帮助您入门，但是在大多数情况下，我会在其他地方定义您的侦听器，而不是即时定义：

```
JButton startSearch = new JButton("startSearch");
        JButton addFood = new JButton("addFood");

        startSearch.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                //DO SEARCH RELATED THINGS

            }
        });

        addFood.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                //DO FOOD ADD RELATED THINGS

            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:14:19.613

好吧，我猜有很多方法可以做到这一点。我想您可以执行以下操作：

```
public class Myclass implements ActionListener
{
  private JButton b1,b2;
  private MyClassWithMethods m = new MyClassWithMethods(); 

  // now for example b1
  b1 = new JButton("some action");
  b1.setActionCommand("action1");
  b1.addActionListener(this);

  public void actionPerformed(ActionEvent e) {
     if ("action1".equals(e.getActionCommand())) 
    {
        m.callMethod1();
    } else {
       // handle other actions here
    }
   }
 } 
```

您可以对更多按钮执行相同操作并测试哪个动作触发了事件，然后从您的类中调用适当的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T23:04:40.290

像这样的东西：

```
JButton searchButton = new JButton("Start search");

searchButton.addActionListener(new ActionListener() {
   public void actionPerformed(ActionEvent e) {
      // do some search here
   }
});

JButton addFoodButton= new JButton("Add food");

addFoodButton.addActionListener(new ActionListener() {
   public void actionPerformed(ActionEvent e) {
      // add your food
   }
}); 
```

等等。如果您需要通过多个按钮重用一个行为，请创建一个`ActionListener`实例而不是使用匿名类并将其多次分配给您的按钮。

# javascript - FusionTableLayer 地图和侧边栏

> ID：14468961
> 
> 赞同：0
> 
> 时间：2013-01-22T22:08:19.100
> 
> 标签：javascript, google-maps-api-3, google-fusion-tables

从 Fusion Table 创建地图时获得的原版代码如下面的文档所示。也可以从其中创建侧边栏，还是我需要转储 javascript 并从头开始？

```
<!DOCTYPE html>
<html>
<head>
<style>
#map-canvas { width:500px; height:300px; }
</style>
<script type="text/javascript"
src="http://maps.google.com/maps/api/js?sensor=false">
</script>
<script type="text/javascript">
var map;
var layerl0;
function initialize() {
map = new google.maps.Map(document.getElementById('map-canvas'), {
center: new google.maps.LatLng(33.79274320730208, -118.12398762656244),
zoom: 12,
mapTypeId: google.maps.MapTypeId.ROADMAP
});
layerl0 = new google.maps.FusionTablesLayer({
query: {
select: "col4",
from: "1bjD4dXHwKM8AYfEFFDQk8Q2RID18EAJi5pSl0wY"
},
map: map,
styleId: 2,
templateId: 2
});
}
google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>
<body>
<div id="map-canvas"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:02:55.520

可以将侧边栏添加到该代码中，但它需要查询表以填充侧边栏。下面是几个例子。您还可以通过触发 FusionTablesLayer 上的单击事件来使其工作。

[例子](http://www.geocodezip.com/v3_FusionTables_AfricaMap_kml_sidebar.html)

[例子](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_Watershed_Stewards_Map_sidebar2.html)

# mod-rewrite - 为什么此重写规则更改修复了我的 404

> ID：14468964
> 
> 赞同：0
> 
> 时间：2013-01-22T22:08:37.807
> 
> 标签：mod-rewrite

在文档根目录 WordPress~~有~~这个 .htaccess

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

一个非 WordPress 目录出现 404，带有 WordPress“未找到”页面。该目录有一个基本的身份验证 .htaccess

```
AuthUserFile /home/foo/.htpasswd
AuthName "FOO Admin"
AuthType Basic

<Limit GET>
        require valid-user
</Limit>

RewriteEngine off 
```

更改`RewriteRule . /index.php [L]` 以`RewriteRule ./ /index.php [L]`解决问题。

为什么要修复它？它是否告诉 mod_rewrite 不要查看当前目录 (.) 而是查看子目录 (./)？

我真的很想更清楚地了解这个过程。

PS 我已经`RewriteEngine off`在这篇文章中留下了，因为我确实在 auth htaccess 中尝试过 - 我发现它是在 auth 之前还是之后出现的并不重要。它似乎没有任何效果。

# css - 内联 UL - 每行 x 项数；每行之间需要一个 1px 的边框/分隔符

> ID：14468966
> 
> 赞同：1
> 
> 时间：2013-01-22T22:08:39.417
> 
> 标签：css

我正在创建一个带有内联无序列表的菜单栏，上面和下面都有一个 1px 分隔符。如果只有一行行，这很好。

一旦进入 2 行（或更多）链接，我希望在第一行（第二行之上）下方有第三个分隔符，但我终生无法解决。

我唯一的想法是使用带有线条和透明空间的背景图像，然后将其推到多条线上时会平铺，但必须有更好的方法！

任何帮助将不胜感激！

编辑：

所有图像嵌入一张。1.如果只有一行链接，大致是这样的。2\. 这就是当它分成多行时我得到的。3.好像你需要它..这就是我想要实现的；在每行 li 之后获得额外的分隔符：

[![](../Images/eba991475f6e84e903d1bfa5d9f88426.png)](https://i.imgur.com/ZvEve9G.png "链接到原始图像。")

抱歉链接..我目前不允许嵌入图像。所有图像合二为一；不能发布超过2个超链接..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:59:55.097

这是你如何做到的。使用 inline-block 会使事情变得有点挑战性，因为链接需要具有相同的宽度才能使 LI 和 UL 边界对齐。

```
<div class="menu">
<ul>
<li><a href="">Link</a></li>
<li><a href="">Link</a></li>
<li><a href="">Link</a></li>
<li><a href="">Link</a></li>
<li><a href="">Link</a></li>
<li><a href="">Link</a></li>
</ul>
</div> 
```

CSS：

```
.menu ul, .menu li {
    margin:0;
    padding:0;
    font-size: 0;
    list-style:none
}

.menu li {
    display:inline-block;
    border-bottom:1px solid #0000cc;
}

.menu a {
    display:block;
    padding:5px;
    margin:0;
    text-decoration:none;
    min-width:63px;
    font-size:16px;    
}    

.menu ul {
    width:220px;
    margin-top:5px;
    padding-bottom:1px;
    border-top:1px solid #002080;
    border-bottom:1px solid #002080;
} 
```

# c# - C#析构函数在哪里

> ID：14468970
> 
> 赞同：3
> 
> 时间：2013-01-22T22:09:09.833
> 
> 标签：c#, memory-management

我有一个类会产生另一个 UI 线程并做到这一点。每当我的父类被销毁时，我都需要中止该线程并进行清理。那么我怎么知道我的父类何时被破坏？

来自 C++，我的第一个想法是把它放在析构函数中。但是 C# 并没有真正的析构函数——只有终结器和处置——据我了解——可能会或可能不会被调用（我想这对 GC 来说是一种情绪？？）。

这很好也很简单——如果你可能想也可能不想释放你的资源。

但是，当一个对象被销毁时，您将绝对积极必须执行的代码放在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T22:11:37.017

您将其放入`Dispose`（实现`IDisposable`接口），然后确保`Dispose`在不再需要对象时调用它。有一种语言结构可以做到这一点：

```
using (var foo = new Foo())
{
    // Do something with foo.
} 
```

`foo.Dispose`将在`using`块的末尾调用。这相当于：

```
{
    var foo = new Foo();
    try
    {
        // Do something with foo.
    }
    finally
    {
        foo.Dispose();
    }
} 
```

注意当对象离开作用域时不会自动`Dispose`调用**；**你需要自己做，使用`using`块或显式调用它。

但是，您应该在`Foo`该调用中提供一个终结`Dispose`器，以便如果在 GC 到达对象之前没有释放该对象，则不会留下未释放的资源：

```
~Foo()
{
    Dispose();
} 
```

* * *

该`IDisposable`模式背后的想法是它明确地告诉您何时需要处理类。[这是一篇](http://www.codeproject.com/Articles/15360/Implementing-IDisposable-and-the-Dispose-Pattern-P)描述如何正确实现它的文章（考虑可能的后代类）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T22:14:27.593

当一个对象被破坏时，没有办法保证“绝对积极[将]被执行”（尝试拔掉你的电脑上的插头——不会调用终结器）

您可以期待的最好的结果是终结器——在 C# 中使用 C++ 析构函数语法定义。虽然，最好实现 IDisposable 并使用`using{}`块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T22:13:29.063

虽然这种方法并不常见，但您可以在 C# 中使用`~`字符定义“析构函数”，如下所示：

```
class Parent
{
    ~Parent()  // destructor
    {
        // cleanup statements...
    }
} 
```

笔记：

> 析构函数隐式调用对象基类的 Finalize。

（[来源](http://msdn.microsoft.com/en-us/library/66x5fx1b.aspx)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T22:13:13.960

你让你的类 a`Component`和包含类 a `Container`。

请参阅：[C# - 什么是组件以及它通常如何使用？](https://stackoverflow.com/questions/523844/c-sharp-what-is-a-component-and-how-is-it-typically-used)

其他答案似乎忙于“超出范围”用例。但是“每当我的父类被破坏时”？如果“父类”是“包含对象”，那么组件*就是*正确的工具。

# ios - 需要将 JSON 中的核心数据对象发布到 RESTful Web 服务的示例

> ID：14468975
> 
> 赞同：1
> 
> 时间：2013-01-22T22:09:30.977
> 
> 标签：ios, objective-c, ios6

几天来，我一直在阅读代码示例和帖子，但我还没有找到将 JSON 数据从我的 Core Data 对象发布到 RESTful Web 服务的明确方法。有大量关于从 Web 服务中提取 JSON 的文档，但没有太多关于发回内容的文档。谁能给我指出一个很好的例子或发布一些关于如何做到这一点的代码？我正在使用核心数据，并且我将要发回的对象映射到字典，但我缺少将其发送到服务的代码。

编辑：

我最终得到了下面的代码，它看起来正确并且运行没有错误，但是我返回了 0 字节的数据，并且我的 web 服务似乎没有收到请求。JSON 数据看起来不错，URL 是正确的，我可以点击 web 服务并从中获取 JSON 数据。NSURLConnection 委托方法也会按预期触发。

下面有什么我遗漏的吗？

```
- (void)SubmitSystems
{
    NSFetchRequest * allSystems = [[NSFetchRequest alloc] init];
    [allSystems setEntity:[NSEntityDescription entityForName:@"System" inManagedObjectContext:self.managedObjectContext]];
    NSError * error = nil;
    NSArray * systems = [self.managedObjectContext executeFetchRequest:allSystems error:&error];

    //error handling goes here
    //for (NSManagedObject * system in systems) {

    NSManagedObject *system = systems[2];

    NSString *entityString = @"System";
    NSString * serverString = [NSString stringWithFormat:@"%@%@", kWebServiceAddress, entityString];
    NSURL *url = [NSURL URLWithString:serverString];
    NSData* jsonData = [NSJSONSerialization dataWithJSONObject:[self jsonSystemDictionary:(System *)system] options:kNilOptions error:&error];

    //NSLog([[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding]); //debug only

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy: NSURLRequestReloadIgnoringCacheData timeoutInterval: 30.f];

    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setValue:[NSString stringWithFormat:@"%d", [jsonData length]] forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody: jsonData];

    self.urlConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES; 

//}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:16:43.973

你将需要`NSMutableURLRequest`。使用它，您可以使用字符串`setHTTPMethod`并将其传递给它`@"POST"`，然后根据需要使用您的属性`NSManagedObject`来填充`URL`,`HTTPBody`和/或`HTTPHeader`。

# c# - Google Maps Api 不显示图像

> ID：14468976
> 
> 赞同：0
> 
> 时间：2013-01-22T22:09:34.327
> 
> 标签：c#, asp.net, google-maps

我在 asp.net 中实现谷歌地图 api 时遇到问题。这是我的aspx代码：

```
<%@ Page Title="" Language="C#" AutoEventWireup="true" CodeFile="visual_loc.aspx.cs" Inherits="visual_loc" %>

<%--A sample project by Ghaffar khan--%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head id="Head1" runat="server">
    <title>Your Data on Google Map </title>
    <%--Google API reference--%>
    <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;sensor=false
                 &amp;key=asdfg" type="text/javascript">
    </script>
</head>

<body onload="initialize()" onunload="GUnload()">
    <form id="form1" runat="server">
    <asp:Panel ID="Panel1" runat="server">
                <%--Place holder to fill with javascript by server side code--%>
                <asp:Literal ID="js" runat="server"></asp:Literal>
                <%--Place for google to show your MAP--%>
                <div ID="map_canvas" style="width: 100%; height: 728px; margin-bottom:                      2px;">
                </div>
                <br />
            </asp:Panel>
        <br />
   </form>
   </body>

</html> 
```

而我背后的代码：
`getLocation()`是从我的数据库中获取经度和纬度的方法。是从这些位置`createDataTable()`创建的方法。`DataTable`

```
protected void Page_Load(object sender, EventArgs e)
    {
        string user_id;
        user_id = Request.Cookies["cookie"]["Login"];
        getLocation(user_id);
        BuildScript( createDataTable());

    }
    private void BuildScript(DataTable tbl)
    {
        String Locations = "";
        foreach (DataRow r in tbl.Rows)
        {
            // bypass empty rows        
            if (r["Latitude"].ToString().Trim().Length == 0)
                continue;

            string Latitude = r["Latitude"].ToString();
            string Longitude = r["Longitude"].ToString();

            // create a line of JavaScript for marker on map for this record    
            Locations += Environment.NewLine + " map.addOverlay(new GMarker(new GLatLng(" + Latitude + "," + Longitude + ")));";
        }

        // construct the final script
        js.Text = @"<script type='text/javascript'>
                            function initialize() {
                              if (GBrowserIsCompatible()) {
                                var map = new GMap2(document.getElementById('map_canvas'));
                                map.setCenter(new GLatLng(52.259, 21.012), 2); 
                                " + Locations + @"
                                map.setUIToDefault();
                              }
                            }
                            </script> ";
    } 
```

整个操作导致显示没有内容的空站点。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:28:26.050

问题是我对我的标记做了错误的目录，所以在地图上看不到。一旦我确实输入了有效的目录，一切正常。

# php - php, ajax ：如果可能的话，最好在开始时加载所有内容吗？

> ID：14468977
> 
> 赞同：0
> 
> 时间：2013-01-22T22:09:36.463
> 
> 标签：php, jquery, ajax

我创建了一个只有一页的网站。在此页面上，我可以单击图像并显示或隐藏弹出窗口（使用 jquery）。

它工作正常。

所有这些弹出窗口都包含文本、图像（我使用 php 生成此内容）。

```
<div id="pop_up_1>
    <!-- content : text / images -->
<div/>
<div id="pop_up_2>
    <!-- content : text / images -->
<div/>
and so on 
```

就像我在一页中有 10 页。这是很多内容。

您认为最好在开头加载所有内容还是使用 jquery ajax 加载内容：

```
$("#myDiv").load("ajax/video-mur-images.php"); 
```

我已经测试了这两种解决方案，但我不确定选择哪一种。

第一个：所有内容都已加载，之后不再查询，但有很多源代码和元素。

第二个，更少的元素和更少的源代码，但是当用户单击按钮时我必须加载内容。

我想这取决于我需要加载多少数据。那么我应该考虑的限制是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:14:12.320

使用 AJAX（甚至更好的 PJAX）加载内容肯定会更好。只是因为你不知道将来会有多少页。在单个请求中提供所有页面意味着您可能会执行 50 次数据库查询，而用户只需要执行 0 次查询的页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T22:13:00.860

这是一个有趣的哲学问题。通常，就像您现在所做的那样，开发人员从数据量开始，但最终都是关于用户体验。

您的页面加载缓慢吗？如果是这样，是否遵循了加快页面加载速度的[最佳实践？](http://developer.yahoo.com/performance/rules.html)什么会让用户更恼火——初始加载还是必须等待每次交互？

另请注意，虽然搜索引擎的网络爬虫越来越好，但它们不会加载您的 AJAX 内容。当您决定走这条路时，请使用一个框架，该框架为您提供书签功能，并使爬虫可以理解内部链接。

# openlaszlo - 在 OpenLaszlo 语言中对类属性进行数据绑定的正确语法是什么？

> ID：14468983
> 
> 赞同：1
> 
> 时间：2013-01-22T22:10:00.677
> 
> 标签：openlaszlo, lzx

我正在开发一个类，我希望将类的属性数据绑定到数据集。我已经设法在我的课程的以下简化版本中获得以下内容：

```
 <class name="myclass">

    <dataset name="attSettings"><settings>
        <property name="applyshadow" defaultvalue="false" type="boolean" />
    </settings></dataset>

    <attribute name="default_applyshadow" type="boolean" value="$once{(this.attSettings.getPointer()).xpathQuery('settings/property[@name=&quot;applyshadow&quot;]/@defaultvalue')}" />

  </class> 
```

但是，这种语法非常麻烦并且感觉不对，所以我想知道是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:27:36.130

这并不能回答您的问题，但可以解释为什么您不能在您的情况下使用本地数据集。当您在一个类中有一个本地数据集时，该数据集只能在该类的子级中寻址，例如：

```
<canvas debug="true">

    <class name="myclass">
        <dataset name="myds">
            <root>
                <property name="applyshadow" defaultvalue="false" type="boolean" />
            </root>
        </dataset>

        <text datapath="local:classroot.myds:/root/property[@name='applyshadow']/@defaultvalue" />

    </class>

    <myclass />

</canvas> 
```

元素可以通过附加到数据路径值`<text>`来访问父类的数据集。`local:`如果您没有为数据集选择名称，OpenLaszlo 将自动使用`localdata`数据集的名称。可以通过在 datapath/xpath 值中省略数据集名称来寻址使用该名称的数据集，例如

```
 <class name="myclass">
        <dataset>
            <root>
                <property name="applyshadow" defaultvalue="false" type="boolean" />
            </root>
        </dataset>

        <text datapath="local:classroot:/root/property[@name='applyshadow']/@defaultvalue" />

    </class> 
```

请注意，数据路径没有名称，并且用于`<text>`组件的数据路径是 now `local:classroot:/root/...`，while`local:classroot.localdata:/root/...`也可以。

我不理解设计决定，这使得无法允许在包含该数据集的类的数据路径中使用本地数据集，但可能有一些技术原因（初始化顺序等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T00:02:34.577

我想出了正确的语法来做我想做的事：

```
 <dataset name="myclass_settings">
   <root>
     <property name="applyshadow" defaultvalue="false" type="boolean" />
   </root>
 </dataset>

 <class name="myclass" datapath="myclass_settings:/root">
    <attribute name="default_applyshadow" type="boolean" value=$path{'property[@name=&quot;applyshadow&quot;]/@defaultvalue'}" />
 </class> 
```

$path{} 约束用于类属性，以通过相对 xpath 查询将值链接到数据集。我还必须将数据集移到课堂之外才能使其正常工作。

# c# - 启动进程后获取进程的友好名称

> ID：14468985
> 
> 赞同：2
> 
> 时间：2013-01-22T22:10:06.540
> 
> 标签：c#, .net, process

我正在为嵌入式系统编写监视程序服务，该系统监视一些专有进程并在必要时重新启动它们。*（在您问之前，与恶意软件*无关。这只是业务需求）

我需要**从刚刚创建的进程中检索友好名称**，以便稍后我可以使用该名称检索该进程以监控其运行状况。

我的问题如下：

*   如果我尝试在`Process.ProcessName`之后立即阅读`Process.Start()`，我会得到一个，`InvalidOperationException`因为该过程尚未完全创建。

*   如果使用`Process.WaitForInputIdle()`.

*   我**需要**在创建流程后立即获取友好名称，然后再执行其他任何操作。

这是一个代码片段：

```
var startInfo = new ProcessStartInfo { FileName = "notepad.exe" };
var process = new Process();
process.StartInfo = startInfo;
process.Start();
process.WaitForInputIdle();
var friendlyName = process.ProcessName; 
```

`InvalidOperationException`例如，如果正在启动的进程是 Firefox，这将在最后一行抛出一个。

那么我该怎么做呢？有没有更安全的方法？

编辑：添加了一个代码片段以进行澄清。EDIT2：重新表述了整个问题以进行澄清，留下了不相关的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T15:32:37.763

好的，所以经过大量研究后，我不得不求助于一个有点 hacky 的解决方案。

根据[Process.GetProcessesByName()](http://msdn.microsoft.com/en-us/library/aa326945%28v=vs.71%29.aspx)文档，“*进程名称是进程的友好名称，例如 Outlook，不包括 .exe 扩展名或路径。* ”。

考虑到这一点，我使用以下代码解决了这个问题：

```
var startInfo = new ProcessStartInfo { FileName = "notepad.exe" };
var process = new Process();
process.StartInfo = startInfo;
process.Start();
var friendlyName = Path.GetFileNameWithoutExtension(startInfo.FileName); 
```

正如我所说，它仍然感觉有点老套，但至少它完成了工作并让我继续前进。

无论如何，感谢您的所有评论！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:58:18.503

你在你的代码中遗漏了一些关键的东西并尝试使用这样的东西`NotePad.exe`，你会看到我在说什么

```
var startInfo = new ProcessStartInfo { FileName = "notepad.exe" };
var process = new Process();
process.StartInfo = startInfo;
process.StartInfo.UseShellExecute = false;
process.StartInfo.CreateNoWindow = false;
process.Start();
process.WaitForInputIdle();
// this line below will always be false because `process.ProcessName will be 
//notepad and process.StartInfo.FileName = notepade.exe 
if (process.ProcessName.Equals(process.StartInfo.FileName) == false)
{
   var theConfiguredProcessName = process.ProcessName;
} 
```

另一个选项你可以做下面两件事中的任何一件

```
Process[] processName = Process.GetProcessesByName("blah.exe"); 
```

或检查所有正在运行的进程并检查您正在运行的进程

```
Process[] processlist = Process.GetProcesses();
foreach(Process process in processlist)
{
   Console.WriteLine("Process: {0} ID: {1}", process.ProcessName, process.Id);
} 
```

# ios - 应用程序未通过协同设计验证：应用程序加载器

> ID：14468989
> 
> 赞同：0
> 
> 时间：2013-01-22T22:10:14.683
> 
> 标签：ios, xcode, flash-builder, app-store-connect, application-loader

我正在尝试使用 Application Loader 将我的 iOS 应用程序提交到 iTunes Connect。我曾多次尝试使用不同的证书，但每次提交时我都会收到一条错误消息，提示“应用程序未通过协同签名验证。签名无效、不允许授权或未使用 iPhone 分发证书签名。” 我将文件扩展名更改为“.zip”，然后上传“.app”文件的压缩版本。当我查看文件内容时，它说证书的类型是开发人员配置文件，但是当我直接从 Apple 的网站下载它并查看它的类型时，甚至会发生这种情况。在过去的四天里，我一直在研究解决方案，但没有找到任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:45:37.907

要提交到 App Store，您必须使用 App Store 配置文件（在您的开发者帐户页面上的分发下创建）进行代码签名。您的 Entitlements.plist 文件必须将它的一个字段“可以调试”设置为 NO。

# r - 用 NA 填充数据框行中的特定重复值

> ID：14468990
> 
> 赞同：4
> 
> 时间：2013-01-22T22:10:14.497
> 
> 标签：r, duplicates

对于我的数据框的每一行，我目前正在尝试选择所有等于 4 的重复值，以便将它们“等于”设置为 NA。

我的数据框是这样的：

```
dat <- read.table(text = "

   1  1  1  2  2  4  4  4  
   1  2  1  1  4  4  4  4", 

header=FALSE) 
```

我需要获得的是：

```
 1  1  1  2  2  4   NA  NA
   1  2  1  1  4  NA  NA  NA 
```

我找到了有关如何消除重复行或列的信息，但我真的不知道如何在此处进行。非常感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T22:35:12.183

有时你会想要避免`apply`，因为它破坏了数据框对象的多类特性。这是一种`by`方法：

```
> do.call(rbind, by(dat, rownames(dat), 
        function(line) {line[ duplicated(unlist(line)) & line==4 ] <- NA; line} ) )
  V1 V2 V3 V4 V5 V6 V7 V8
1  1  1  1  2  2  4 NA NA
2  1  2  1  1  4 NA NA NA 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T22:26:53.777

`duplicated`可以以这种方式与 a 一起使用`apply`：

```
dat <- t(apply(dat, 1, function(x) {x[duplicated(x) & x == 4] <- NA ; x})) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T22:15:50.907

`which`并且`apply`在这里很有帮助。

```
> dat <- t(apply(dat, 1, function(X) {X[which(X==4)][-1] <- NA ; X})) 
> dat
[1,]  1  1  1  2  2  4 NA NA
[2,]  1  2  1  1  4 NA NA NA 
```

但是可能有一种方法可以在`t`这里使用转置（）函数，有人可以帮我吗？

# android - 更改连接类型后连接超时

> ID：14468991
> 
> 赞同：1
> 
> 时间：2013-01-22T22:10:21.960
> 
> 标签：android, httpurlconnection

我在我的应用程序中使用以下代码：

```
if (httpConnection.getResponseCode() == HttpURLConnection.HTTP_OK) {
    ... 
```

通常它工作正常，但从 wifi 切换到 3G 后，我得到以下异常：

```
21:04:21.358: I/WifiService(2277): setShowAccessPointListDialog():false
21:04:21.368: I/WifiService(2277): setWifiEnabledDialog(): false
21:04:21.393: I/WifiHW(2277): wifi_stop_supplicant: Enter
21:04:21.393: I/WifiHW(2277): wifi_stop_supplicant: connecting supplicant is done
21:04:21.393: I/WifiHW(2277): wifi_stop_supplicant: status of  supplicant(connected), count(49) 
21:04:21.393: I/wpa_supplicant(22752): CTRL-EVENT-TERMINATING - signal 15 received
21:04:21.393: I/wpa_supplicant(22752): CTRL-EVENT-TERMINATING - signal 0 received
21:04:21.393: I/WifiMonitor(2277): Event [CTRL-EVENT-TERMINATING - signal 15 received]
21:04:21.393: V/WifiStateTracker(2277): Connection to supplicant lost
21:04:21.418: I/wpa_supplicant(22752): CTRL-EVENT-STATE-CHANGE id=1 state=0 BSSID=00:00:00:00:00:00
21:04:22.443: I/dhcpcd(22766): received SIGTERM, stopping
21:04:22.508: I/WifiHW(2277): wifi_stop_supplicant: exit normally
21:04:22.508: D/WifiStateTracker(2277): Reset connections and stopping DHCP
21:04:22.513: I/WifiHW(2277): wifi_close_supplicant_connection: enter
21:04:22.513: I/WifiHW(2277): wifi_close_supplicant_connection: exit
21:04:22.528: D/NetworkStateTracker(2277): setDetailed state, old =CONNECTED and new state=DISCONNECTED
21:04:22.528: D/ConnectivityService(2277): ConnectivityChange for WIFI: DISCONNECTED/DISCONNECTED
21:04:22.528: D/ConnectivityService(2277): getMobileDataEnabled returning true
21:04:22.533: D/DataConnectionTracker(2332): setEnabled(0, true) with old state = false and enabledCount = 0
21:04:22.558: V/ConnectivityService(2277): Attempting to switch to mobile
21:04:22.578: D/MobileDataStateTracker(2277): default Received state= DISCONNECTED, old= DISCONNECTED, reason= apnSwitched, apnTypeList= default
21:04:22.583: D/Tethering(2277): Tethering got CONNECTIVITY_ACTION
21:04:22.583: D/Tethering(2277): MasterInitialState.processMessage what=3
21:04:22.583: E/HierarchicalStateMachine(2277): TetherMaster - unhandledMessage: msg.what=3
21:04:22.618: D/MobileDataStateTracker(2277): default Received state= DISCONNECTED, old= DISCONNECTED, reason= apnSwitched, apnTypeList= default
21:04:22.638: D/GpsLocationProvider(2277): updateNetworkState available info: NetworkInfo: type: WIFI[], state: DISCONNECTED/DISCONNECTED, reason: (unspecified), extra: (none), roaming: false, failover: false, isAvailable: false
21:04:22.658: D/WifiStateTracker(2277): Disabling interface
21:04:22.658: I/WifiHW(2277): wifi_unload_driver: enter
21:04:22.663: D/MobileDataStateTracker(2277): default Received state= DISCONNECTED, old= DISCONNECTED, reason= apnSwitched, apnTypeList= default
21:04:22.723: D/MobileDataStateTracker(2277): default Received state= CONNECTING, old= DISCONNECTED, reason= apnSwitched, apnTypeList= default,supl
21:04:22.723: D/NetworkStateTracker(2277): setDetailed state, old =DISCONNECTED and new state=CONNECTING
21:04:22.728: D/ConnectivityService(2277): ConnectivityChange for mobile: CONNECTING/CONNECTING
21:04:22.773: I/GTalkService(22533): [ServiceAutoStarter] --- connectivity changed
21:04:22.773: I/GTalkService(22533): [ServiceAutoStarter] --- start GTalk service ---
21:04:22.883: D/NetworkLocationProvider(2277): onDataConnectionStateChanged 3
21:04:22.888: D/NetworkLocationProvider(2277): onDataConnectionStateChanged 3
21:04:22.893: D/NetworkLocationProvider(2277): onDataConnectionStateChanged 3
21:04:22.893: D/NetworkLocationProvider(2277): onDataConnectionStateChanged 3
21:04:23.453: E/WifiHW(2277): [WIFI] Unload Driver
21:04:23.453: I/WifiHW(2277): wifi_unload_driver: exit
21:04:23.493: I/DBG_WSS_DM(22809): [wssStartService.java Line:1413] ProtoIsWIFIConnected WiFi DisConnected
21:04:23.588: I/DBG_WSS_DM(22809): [wssTelephonyData.java Line:131] getInstance PHONE_TYPE_GSM
21:04:23.758: V/SettingsProvider(2277): secure <- value=0 name=wifi_on
21:04:23.758: V/SettingsProvider(2277): property: sys.settings_secure_version=42
21:04:23.768: V/SettingsProvider(2277): notifying: content://settings/secure/wifi_on
21:04:24.483: D/Tethering(2277): pdp0 is not a tetherable iface, ignoring
21:04:24.538: E/DataRouter(2171): [*] Received suspend/ resume event but DUN is not up so neglect 
21:04:24.548: D/MobileDataStateTracker(2277): replacing old mInterfaceName (pdp0) with pdp0 for hipri
21:04:24.553: D/MobileDataStateTracker(2277): replacing old mInterfaceName (pdp0) with pdp0 for supl
21:04:24.553: D/MobileDataStateTracker(2277): default Received state= CONNECTED, old= CONNECTING, reason= apnSwitched, apnTypeList= default,supl
21:04:24.563: D/MobileDataStateTracker(2277): CONNECTED interface name pdp0
21:04:24.563: D/MobileDataStateTracker(2277):   -> net.pdp0.gw: 100.97.40.1
21:04:24.563: D/MobileDataStateTracker(2277):   -> mDefaultGatewayAddr: 19423588
21:04:24.563: D/MobileDataStateTracker(2277): -------------------------
21:04:24.563: D/MobileDataStateTracker(2277): @net.pdp0.gw: 100.97.40.1
21:04:24.563: D/MobileDataStateTracker(2277): @net.pdp1.gw: 
21:04:24.563: D/MobileDataStateTracker(2277): @net.pdp2.gw: 
21:04:24.563: D/MobileDataStateTracker(2277): -------------------------
21:04:24.568: D/NetworkStateTracker(2277): setDetailed state, old =CONNECTING and new state=CONNECTED
21:04:24.568: V/NetworkStateTracker(2277): Setting TCP values: [4094,87380,110208,4096,16384,110208] which comes from [net.tcp.buffersize.umts]
21:04:24.568: D/ConnectivityService(2277): ConnectivityChange for mobile: CONNECTED/CONNECTED
21:04:24.598: I/DBG_WSS_DM(22809): [wssTelephonyData.java Line:131] getInstance PHONE_TYPE_GSM
21:04:24.598: D/ConnectivityService(2277): adding dns 10.74.210.210 for mobile
21:04:24.608: D/NetworkStateTracker(2277): addDefaultRoute for mobile(pdp0), GatewayAddr=19423588 mDefaultRouteSet=false
21:04:24.608: D/NetworkStateTracker(2277): addDefaultRoute for mobile (pdp0), GatewayAddr=19423588
21:04:24.608: D/ConnectivityService(2277): adding dns 10.74.210.211 for mobile
21:04:24.623: D/Tethering(2277): Tethering got CONNECTIVITY_ACTION
21:04:24.628: D/Tethering(2277): MasterInitialState.processMessage what=3
21:04:24.628: E/HierarchicalStateMachine(2277): TetherMaster - unhandledMessage: msg.what=3
21:04:24.733: D/Smack(22533): [XMPPConn] close connection, notifyClosed=false
21:04:24.748: D/GpsLocationProvider(2277): updateNetworkState available info: NetworkInfo: type: mobile[UMTS], state: CONNECTED/CONNECTED, reason: apnSwitched, extra: internet.t-mobile, roaming: false, failover: false, isAvailable: true
21:04:24.798: I/DBG_WSS_TP(22809): [wssHttpAdapter.java Line:1722] getIsConnected connect status is false
21:04:24.808: I/DBG_WSS_DM(22809): [wssStartService.java Line:1413] ProtoIsWIFIConnected WiFi DisConnected
21:04:24.808: D/NetworkLocationProvider(2277): onDataConnectionStateChanged 3
21:04:24.923: W/Smack/Packet(22533): notify conn break (IOEx), close connection
21:04:24.928: I/GTalkService(22533): [ServiceAutoStarter] --- connectivity changed
21:04:24.928: I/GTalkService(22533): [ServiceAutoStarter] --- start GTalk service ---
21:04:32.948: I/DBG_WSS_TP(22809): [wssHttpAdapter.java Line:1722] getIsConnected connect status is false
21:04:32.988: D/NetworkLocationProvider(2277): onDataConnectionStateChanged 3
21:04:36.008: I/DBG_WSS_TP(22809): [wssHttpAdapter.java Line:1722] getIsConnected connect status is false
21:04:36.013: D/NetworkLocationProvider(2277): onDataConnectionStateChanged 3
21:04:41.868: V/MyAppIntentService(22454): MyAppIntentService
21:04:41.943: V/MyAppIntentService(22454): myAppUpdate isOnline
21:04:42.003: V/MyAppIntentService(22454): myAppUpdate moveToNext
21:05:12.493: W/IInputConnectionWrapper(22454): getExtractedText on inactive InputConnection
21:05:12.498: W/IInputConnectionWrapper(22454): getExtractedText on inactive InputConnection
21:05:17.643: D/GoogleLoginService(22533): onBind: Intent { act=android.accounts.AccountAuthenticator cmp=com.google.android.gsf/.loginservice.GoogleLoginService }
21:06:56.483: D/NativeCrypto(22533): Freeing OpenSSL session
21:26:51.628: W/System.err(22454): java.net.SocketException: Connection timed out
21:26:51.668: W/System.err(22454):  at org.apache.harmony.luni.platform.OSNetworkSystem.readSocketImpl(Native Method)
21:26:51.673: W/System.err(22454):  at org.apache.harmony.luni.platform.OSNetworkSystem.read(OSNetworkSystem.java:358)
21:26:51.683: W/System.err(22454):  at org.apache.harmony.luni.net.PlainSocketImpl.read(PlainSocketImpl.java:561)
21:26:51.688: W/System.err(22454):  at org.apache.harmony.luni.net.SocketInputStream.read(SocketInputStream.java:61)
21:26:51.703: W/System.err(22454):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.readln(HttpURLConnectionImpl.java:1279)
21:26:51.708: W/System.err(22454):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.readServerResponse(HttpURLConnectionImpl.java:1351)
21:26:51.718: W/System.err(22454):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.sendRequest(HttpURLConnectionImpl.java:1339)
21:26:51.728: W/System.err(22454):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.doRequestInternal(HttpURLConnectionImpl.java:1656)
21:26:51.733: W/System.err(22454):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.doRequest(HttpURLConnectionImpl.java:1649)
21:26:51.743: W/System.err(22454):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:1374)
21:26:51.748: W/System.err(22454):  at com.dummy.myApp.MyAppIntentService.myAppUpdate(MyAppIntentService.java:117)
21:26:51.753: W/System.err(22454):  at com.dummy.myApp.MyAppIntentService.onHandleIntent(MyAppIntentService.java:85)
21:26:51.758: W/System.err(22454):  at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
21:26:51.768: W/System.err(22454):  at android.os.Handler.dispatchMessage(Handler.java:99)
21:26:51.773: W/System.err(22454):  at android.os.Looper.loop(Looper.java:123)
21:26:51.783: W/System.err(22454):  at android.os.HandlerThread.run(HandlerThread.java:60)
21:26:51.783: V/MyAppIntentService(22454): myAppUpdate moveToNext
21:26:53.943: I/DBG_WSS_TP(22809): [wssHttpAdapter.java Line:1722] getIsConnected connect status is false
21:26:53.948: D/NetworkLocationProvider(2277): onDataConnectionStateChanged 3
21:26:55.723: V/MyAppIntentService(22454): myAppUpdate HTTP_OK
21:26:56.583: V/MyAppIntentService(22454): myAppUpdate moveToNext
21:26:57.943: V/MyAppIntentService(22454): myAppUpdate HTTP_OK
21:26:58.773: V/MyAppIntentService(22454): myAppUpdate moveToNext
21:26:59.983: V/MyAppIntentService(22454): myAppUpdate HTTP_OK
21:27:00.893: V/MyAppIntentService(22454): myAppUpdate moveToNext
21:27:02.253: V/MyAppIntentService(22454): myAppUpdate HTTP_OK 
```

为什么将连接类型从wifi更改为3G后不起作用？从 3G 切换到 wifi 时一切正常。

在异常之后它工作正常（HTTP_OK）。当我在异常发生之前杀死 MyAppIntentService 并再次重新启动时，它也可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:38:16.597

可能是您的运营商阻止了连接。测试以使用浏览器获取资源。

或者你的连接真的很慢，尝试改变： HttpConnectionParams.setConnectionTimeout(httpParameters, CONNECTION_TIMEOUT);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:20:42.373

我在[这里](https://stackoverflow.com/questions/3352424/httpurlconnection-openconnection-fails-second-time)找到了解决方案。添加描述的解决方法后，它可以工作：

```
...
httpConnection.setRequestProperty("connection", "close");
if (httpConnection.getResponseCode() == HttpURLConnection.HTTP_OK) {
... 
```

# python - 如何使用 pymongo 连接到现有的文档集合/数据库？

> ID：14468992
> 
> 赞同：13
> 
> 时间：2013-01-22T22:10:33.080
> 
> 标签：python, mongodb, pymongo

在命令行上，这有效：

```
$ mongo
> show dbs
mydatabase   1.0GB 
```

但是，这不会：

```
$ python    
>>> import pymongo
>>> connection = pymongo.MongoClient()
>>> connection.mydatabase.find() 
```

我在这里通读了文档：

[http://api.mongodb.org/python/current/tutorial.html](http://api.mongodb.org/python/current/tutorial.html)

但是也不明白怎么...

1.  连接到现有数据库（使用 pymongo）
2.  查询 mongodb 连接中存在哪些数据库。

为什么我无法访问我的数据库？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-23T00:04:52.740

[连接到现有数据库](https://pymongo.readthedocs.io/en/stable/tutorial.html#making-a-connection-with-mongoclient)

```
import pymongo
from pymongo import MongoClient
connection = MongoClient()
db = connection.mydatabase 
```

[列出现有数据库](https://pymongo.readthedocs.io/en/stable/api/pymongo/mongo_client.html?highlight=database_names#pymongo.mongo_client.MongoClient.list_database_names)

```
import pymongo
from pymongo import MongoClient
connection = MongoClient()
# connection.database_names() # depreciated
connection.list_database_names() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-10-16T20:37:34.487

这个问题暗示用户有一个*本地* MongoDB。但是我发现这个问题试图连接到*远程*MongoDB。我认为该[教程值得一提](https://api.mongodb.com/python/current/tutorial.html#making-a-connection-with-mongoclient)（这里没有其他答案提到我如何指定主机和端口）

> 上面的代码将连接到默认主机和端口。我们还可以显式指定主机和端口，如下所示：

`client = MongoClient('localhost', 27017)`

> 或者使用 MongoDB URI 格式：

`client = MongoClient('mongodb://localhost:27017/')`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T22:16:11.193

`show dbs`并且`find()`是完全不同的命令，因此您无法将两者进行比较。

```
connection.mydatabase.find() 
```

实际上什么都不做，因为您不能`find()`在数据库级别上记录。您可能正在寻找：

```
cursor = connection.mydatabase.mycol.find() 
```

我不是 Python 程序员，但类似的东西和`foreach`var`cursor`来获取你的数据。

作为补充说明，您将需要替换`mycol`为包含您的文档的集合名称。

至于查询数据库列表，您可以执行以下操作：

```
databases = connection.mydatabase.command({'listDatabases': 1}); 
```

如此处所示：http: [//docs.mongodb.org/manual/reference/command/listDatabases/#listDatabases](http://docs.mongodb.org/manual/reference/command/listDatabases/#listDatabases)

然而，我又不是 Python 程序员，但这应该让你开始。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T23:59:18.283

在 python 命令行上：

```
import pymongo
from pymongo import MongoClient
connection = MongoClient()  ## connects by default to db at localhost:27017
connection.database_names() ## python binding equivalent to show dbs. 
```

尽管似乎没有大量示例，但[Python 驱动程序 API 文档](http://api.mongodb.org/python/current/api/index.html)中的绑定似乎非常完整。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-09T06:13:35.060

database_names() 已弃用。可以使用 list_database_names() 代替。

mongo_db_url 类似于“mongodb://localhost:27017/”。27017为默认端口号，适当替换。

```
from pymongo import MongoClient
client = MongoClient(<mongo_db_url>)
#or client = MongoClient('localhost', 27017)
client.list_database_names() 
```

# ios - 使用 Delegates 通过多个 viewController 传回数据

> ID：14468995
> 
> 赞同：0
> 
> 时间：2013-01-22T22:10:39.593
> 
> 标签：ios, xcode

我已经成功地学习了如何使用代表。迄今为止，我已经学会了如何通过 prepareForSegue 方法使用 storyBoards 将数据传递给 secondViewController，然后使用 Delegates 将来自 secondViewController 的数据返回给第一个 ViewController。

问题是当我按如下方式创建thirdViewController 时：ViewController >> secondViewController >>thirdViewController。（委托协议在thirdViewController中设置）

我的委托可以很好地将数据从 thirdViewController 传递到 secondViewController。问题是从 secondViewController 传递回 viewController

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

SecondViewController *page2 = [[SecondViewController alloc]init];
[[segue identifier] isEqual:@"page2"];
page2 = [segue destinationViewController];
page2.delegate = self; // this is the problem ?? 
```

}

我得到的错误如下：找不到属性“委托”。代表不能像这样在多个视图（链中）中工作的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:36:22.870

几个提示：

1.  `SecondViewController *page2 = [[Page2 alloc]init];`
    `SecondViewController`和之间有 什么关系`Page2`？

2.  确保您`delegate`在`SecondViewController`.

3.  确保您`#import "SecondViewController.h"`在`viewController.m`.

# jquery - 内容少时出现页脚间隙

> ID：14468997
> 
> 赞同：0
> 
> 时间：2013-01-22T22:10:51.110
> 
> 标签：jquery, html, css, web

所以我真的很困惑..我的网站页脚完美地位于主页上，但是一旦您将其他页面的内容加载到其中（通过 jquery），页脚就会立即在其上方获得巨大的差距.. 它不是直到我用大量文本填充它，它最终开始填补空白，而不是继续将空白推到页面下方。

[http://colourednoise.co.uk/site/22/](http://colourednoise.co.uk/site/22/)（请注意只有“主页、我们的工作和网站”在导航中起作用）

我知道编码真的很乱，但肯定没有意义..为什么在差距停止出现之前有一个门槛可以通过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:23:32.507

尝试删除以下设置：

```
#holen_wrapper {
    width: 922px;
    /* height: 100%;    */
    margin-right: auto;
    margin-left: auto;
} 
```

# .net - 将抽象基类属性映射到多个表（每个派生类一个）

> ID：14468999
> 
> 赞同：0
> 
> 时间：2013-01-22T22:10:57.140
> 
> 标签：.net, nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我正在使用流利的nhibernate，并且我正在尝试将我的抽象基类中的一个属性映射到一个特定的表，该表本身不能存在，这取决于派生类是什么。

```
public class UnmappedClass : Entity<Guid>
{
    // This class isn't mapped to a table on its own, its mapping depends on the class that uses it
}

public abstract class BaseClass : Entity<Guid>
{
    // mapping depends on derived class, not mapped to anything in base class
    protected IList<UnmappedClass> myList = new List<UnmappedClass>();

    public virtual IEnumerable<UnmappedClass> Stuff
    {
        get { return myList.ToList(); }
    }
}

public class DerivedClass : BaseClass
{
    // At this point, I need to map MyClass in member myList to a table specific to DerivedClass
} 
```

我在覆盖中尝试了以下操作并收到错误`Invalid object name 'UnmappedClass'.`

```
mapping.HasMany(Reveal.Member<DerivedClass, IEnumerable<UnmappedClass>>("myList"))
    .Table("TableName")
    .Access.Field()
    .Cascade.AllDeleteOrphan()
    .Inverse(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:13:25.497

我不完全确定，如果这是你想要的，但是使用泛型呢？这是一个例子：

```
public abstract class BaseClass<T> : Entity<Guid>
    where T : UnmappedClass
{
    // mapping depends on derived class, not mapped to anything in base class
    protected IList<T> myList = new List<T>();

    public virtual IEnumerable<T> Stuff
    {
        get { return myList.ToList(); }
    }
}

public class DerivedClass : BaseClass<MyClass>
{
} 
```

您的映射类也是一个通用基类：

```
public abstract class BaseClassMap<TEntity, TList> : ClassMap<TEntity>
    where TEntity : BaseClass
    where TList : UnmappedClass
{
    protected BaseClassMap()
    {
        HasMany(Reveal.Member<TEntity, IEnumerable<TList>>("myList"))
            .Table("TableName")
            .Access.Field()
            .Cascade.AllDeleteOrphan()
            .Inverse();
    }
}

public class DerivedClassMap : BaseClassMap<DerivedClass, MyClass>
{
} 
```

我没有检查代码是否编译。您应该获得一个由 MyClass 表（名为“TableName”）引用的 DerivedClass 表。